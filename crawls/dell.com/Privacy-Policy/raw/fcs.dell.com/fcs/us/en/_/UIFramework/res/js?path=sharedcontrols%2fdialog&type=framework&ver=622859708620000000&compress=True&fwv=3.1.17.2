Namespace.Manager.Register("Dell.SharedControls.Dialog");if(!String.prototype.startsWith){String.prototype.startsWith=function(str){return!this.indexOf(str);};}
Dell.SharedControls.Dialog={ModalHtml:'<div id="dialogTemplate" class="uif_modal_wrapper" style="display:none;"><div class="uif_modal" dir="ltr">'+'<div class="uif_modal_close" >'+'</div>    <div class="uif_modal_header">    <div class="uif_modal_upper_corner_l"></div>'+'<div class="uif_modal_upper"></div>    <div class="uif_modal_upper_corner_r"></div>    </div>'+'<div class="uif_modal_center_l">    <div class="uif_modal_center_r">    <div class="uif_modal_center clearfix"><div id="uif_placeholder">{0}</div></div>    </div>    </div>    <div class="uif_modal_footer">    <div class="uif_modal_lower_corner_l"></div>    <div class="uif_modal_lower"></div>    <div class="uif_modal_lower_corner_r"></div>    </div></div></div>',ModalBackgroundHtml:'<div class="uif_modal_background" style="display:none;"></div><!--[if IE 6]><iframe class="uif_modal_background uif_modal_iframeShim" style="display:none"></iframe><![endif]-->',ModalCss:function(size){switch(size){case 0:return"uif_modal_wrapper_small";case 1:return"uif_modal_wrapper_medium";case 2:return"uif_modal_wrapper_large";case 3:return"uif_modal_wrapper_fluid";default:return"uif_modal_wrapper_medium";}},init:function(){$("body").append(this.ModalBackgroundHtml);if(Dell.UIF.BrowserCombined()=="msie7"){$(".uif_modal_wrapper .uif_button").live("click",function(){var t=$(this),mouseUp=t.attr("onmouseup");if(mouseUp=="CloseDialog(this)"){t.parents(".uif_modal_wrapper").find(".uif_modal_close").trigger("click");}else if(mouseUp!=undefined&&mouseUp!=""){eval(mouseUp);}});}},isElement:function(src){try{var element=$(src);return(element.length>0)?true:false;}
catch(e){return false;}},createDialog:function(id,options,html){if(options==null||options=='undefined'){options={};}
if(options.Destroy==true){var destroyDialog=$("#"+id);$(".uif_modal_close",destroyDialog).unbind('click');destroyDialog.remove();}
options={"CacheContent":options.CacheContent||false,"Height":options.Height||0,"Id":id,"IsIframe":options.IsIframe||false,"IsModal":options.IsModal||true,"ShouldPreloadContent":options.ShouldPreloadContent||false,"Size":options.Size||1,"Src":options.Src||"","LoadingText":options.LoadingText||'Loading...',"Width":options.Width||0,"ReplaceContent":options.ReplaceContent||false};if(html){options.DynamicContent=html;}
var localizedModalHtml=Dell.UIF.Utility.StringHelper.format(this.ModalHtml,options.LoadingText);var newDialog=$(localizedModalHtml);$(".uif_modal_close",newDialog).click(function(){Dell.SharedControls.Dialog.closeDialog(id);});options.IsLoaded=false;newDialog.attr({"id":id});newDialog.addClass(this.ModalCss(options.Size));if(options.Size==3){newDialog.width(options.Width+20);newDialog.css("margin-left",(0-newDialog.outerWidth()/2-43));}
if(options.ReplaceContent){$("#"+id).remove();}
$("body").append(newDialog);newDialog.data("dialog",options);if(options.ShouldPreloadContent){this.bindDialog(newDialog);}},bindESC:function(doc,dialog){var modalDialog=$("#"+dialog);var dialogOptions=modalDialog.data("dialog");var bkgd=$('.uif_modal_background:first');$(bkgd).hover(function(){$(this).data("hover",1);},function(){$(this).data("hover",0);});$(doc).bind('keydown focus',function(event){var key=event.which;if(key==27){event.preventDefault();if(!Dell.SharedControls.Dialog.isInIframe()){Dell.SharedControls.Dialog.closeDialog(dialog);doc.unbind();}
else{if($(bkgd).data("hover")){Dell.SharedControls.Dialog.closeDialog(dialog);}}}});},openDialog:function(dialog){var modalDialog=$("#"+dialog);var dialogOptions=modalDialog.data("dialog");var modalPageViewSrc=(dialogOptions.DynamicContent)?"dynamiccontent":dialogOptions.Src||"notset";this.bindESC($(document),dialog);modalDialog.css('top',$(document).scrollTop()+81);if(!dialogOptions.CacheContent){this.bindDialog(modalDialog);}
else{if(dialogOptions.IsLoaded==false){this.bindDialog(modalDialog);}}
modalDialog.show();if(dialogOptions.IsModal){var background=$(".uif_modal_background");background.css('height',$(document).height());background.css('width',$(document).width());background.show();}
Dell.WebAnalytics.modalPageView(modalPageViewSrc);},bindDialog:function(dialog){var dialogElement=$(dialog);var content=dialogElement.find(".uif_modal_center");var oValidator=Dell.Validation;var dialogOptions=dialogElement.data("dialog");var src=dialogOptions.Src||dialogOptions.DynamicContent;if(dialogOptions.IsIframe){content.html("<iframe id='"+dialogElement.attr("id")+"_iframe' class='uif_modal_iframe' frameBorder='0' width='100%' src='"+src+"'></iframe>");if(dialogOptions.Height!=null&&dialogOptions.Height>0){Dell.SharedControls.Dialog.resizeDialog(dialogElement.attr("id"),dialogOptions.Height);}else{}}
else{if(!this.isElement(src)&&!dialogOptions.DynamicContent){content.html("");$.ajax({url:src,cache:false,success:function(data){content.html(data);if($(content).find(":input[data-val=true]").length>0){$.validator.unobtrusive.parse($(content));oValidator.bindBehaviors($("form",content));}},error:function(){alert("Error");}});}
else{if(dialogOptions.DynamicContent){content.html(dialogOptions.DynamicContent);}
else{var divContentHolder=$(src).detach();content.html("");divContentHolder.appendTo(content).show();}}}
dialogOptions.IsLoaded=true;},resizeDialog:function(id,height){var dialog=this.getDialog(id);$('.uif_modal_iframe',dialog).height(height);},closeDialog:function(ref){var isFunctionAvailable=(window.parent.Dell&&window.parent.Dell.SharedControls&&typeof window.parent.Dell.SharedControls.Dialog.closeDialog=="function")?true:false;var modalDialog=(typeof(ref)=="string")?this.getDialog(ref):$(ref).parents(".uif_modal_wrapper");if(Dell.SharedControls.Dialog.isInIframe()&&isFunctionAvailable){try{var parentDoc=window.parent.document;$(".uif_modal_wrapper",parentDoc).hide();$(".uif_modal_background",parentDoc).hide();}
catch(ex){log(ex.message);}}
if(modalDialog){modalDialog.hide();if(modalDialog.data("dialog").IsModal){$(".uif_modal_background").hide();}}},getDialog:function(id){var dialog=($('#'+id+'_dialog').length>0)?$('#'+id+'_dialog'):$("#"+id);return dialog;},isInIframe:function(){var x=(window.location!=window.parent.location)?true:false;return x;}};Dell.SharedControls.Dialog.ResizeDialog=function(id,height){log("Dell.SharedControls.Dialog.ResizeDialog is deprecated.  Please use Dell.SharedControls.Dialog.resizeDialog(id, height)","warn");Dell.SharedControls.Dialog.resizeDialog(id,height);};Dell.SharedControls.Dialog.CreateDialog=function(id,src,dataType,style,modal,preload,height){var http=$.trim(src).substring(4);var isIframe=(http.toLowerCase()=="http")?true:false;var dialog={"CacheContent":false,"Height":height,"Id":id,"IsIframe":isIframe,"IsModal":modal,"ShouldPreloadContent":preload,"Size":style,"Src":src};log("Dell.SharedControls.Dialog.CreateDialog is deprecated.  Please use Dell.SharedControls.Dialog.createDialog(id, options)","warn");Dell.SharedControls.Dialog.createDialog(id,dialog);};Dell.SharedControls.Dialog.BindDialog=function(dialog){var dialogElement=$(dialog);var src="";if(dialogElement.data("src"))
dialogElement.data("dialog").Src=dialogElement.data("src");if(dialogElement.data("height"))
dialogElement.data("dialog").Height=dialogElement.data("height");log("Dell.SharedControls.Dialog.CreateDialog is deprecated.  Please use Dell.SharedControls.Dialog.createDialog(id, options)","warn");Dell.SharedControls.Dialog.bindDialog(dialog);};Dell.SharedControls.Dialog.OpenDialog=function(dialog){log("Dell.SharedControls.Dialog.OpenDialog is deprecated.  Please use Dell.SharedControls.Dialog.openDialog(dialog)","warn");Dell.SharedControls.Dialog.openDialog(dialog);};Dell.SharedControls.Dialog.CloseDialog=function(link){log("Dell.SharedControls.Dialog.CloseDialog is deprecated.  Please use Dell.SharedControls.Dialog.closeDialog(link)","warn");Dell.SharedControls.Dialog.closeDialog(link);};$(function(){Dell.SharedControls.Dialog.init();});