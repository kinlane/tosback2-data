/* Â© 2012 Williams-Sonoma Inc. All rights reserved. */
dojo.provide("wsgc");if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(_1,_2){return _1.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_2&&_2.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(_3,re,_4){if(!(_3 instanceof Array)){return re(_3);}var b=[];for(var i=0;i<_3.length;i++){b.push(re(_3[i]));}return dojo.regexp.group(b.join("|"),_4);};dojo.regexp.group=function(_5,_6){return "("+(_6?"?:":"")+_5+")";};}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(_7,_8,_9){var c=document.cookie;if(arguments.length==1){var _a=c.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(_7)+"=([^;]*)"));return _a?decodeURIComponent(_a[1]):undefined;}else{_9=_9||{};var _b=_9.expires;if(typeof _b=="number"){var d=new Date();d.setTime(d.getTime()+_b*24*60*60*1000);_b=_9.expires=d;}if(_b&&_b.toUTCString){_9.expires=_b.toUTCString();}_8=encodeURIComponent(_8);var _c=_7+"="+_8,_d;for(_d in _9){_c+="; "+_d;var _e=_9[_d];if(_e!==true){_c+="="+_e;}}document.cookie=_c;}};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};}if(!dojo._hasResource["dojo.NodeList-manipulate"]){dojo._hasResource["dojo.NodeList-manipulate"]=true;dojo.provide("dojo.NodeList-manipulate");(function(){function _f(_10){var _11="",ch=_10.childNodes;for(var i=0,n;n=ch[i];i++){if(n.nodeType!=8){if(n.nodeType==1){_11+=_f(n);}else{_11+=n.nodeValue;}}}return _11;};function _12(_13){while(_13.childNodes[0]&&_13.childNodes[0].nodeType==1){_13=_13.childNodes[0];}return _13;};function _14(_15,_16){if(typeof _15=="string"){_15=dojo._toDom(_15,(_16&&_16.ownerDocument));if(_15.nodeType==11){_15=_15.childNodes[0];}}else{if(_15.nodeType==1&&_15.parentNode){_15=_15.cloneNode(false);}}return _15;};dojo.extend(dojo.NodeList,{_placeMultiple:function(_17,_18){var nl2=typeof _17=="string"||_17.nodeType?dojo.query(_17):_17;var _19=[];for(var i=0;i<nl2.length;i++){var _1a=nl2[i];var _1b=this.length;for(var j=_1b-1,_1c;_1c=this[j];j--){if(i>0){_1c=this._cloneNode(_1c);_19.unshift(_1c);}if(j==_1b-1){dojo.place(_1c,_1a,_18);}else{_1a.parentNode.insertBefore(_1c,_1a);}_1a=_1c;}}if(_19.length){_19.unshift(0);_19.unshift(this.length-1);Array.prototype.splice.apply(this,_19);}return this;},innerHTML:function(_1d){if(arguments.length){return this.addContent(_1d,"only");}else{return this[0].innerHTML;}},text:function(_1e){if(arguments.length){for(var i=0,_1f;_1f=this[i];i++){if(_1f.nodeType==1){dojo.empty(_1f);_1f.appendChild(_1f.ownerDocument.createTextNode(_1e));}}return this;}else{var _20="";for(i=0;_1f=this[i];i++){_20+=_f(_1f);}return _20;}},val:function(_21){if(arguments.length){var _22=dojo.isArray(_21);for(var _23=0,_24;_24=this[_23];_23++){var _25=_24.nodeName.toUpperCase();var _26=_24.type;var _27=_22?_21[_23]:_21;if(_25=="SELECT"){var _28=_24.options;for(var i=0;i<_28.length;i++){var opt=_28[i];if(_24.multiple){opt.selected=(dojo.indexOf(_21,opt.value)!=-1);}else{opt.selected=(opt.value==_27);}}}else{if(_26=="checkbox"||_26=="radio"){_24.checked=(_24.value==_27);}else{_24.value=_27;}}}return this;}else{_24=this[0];if(!_24||_24.nodeType!=1){return undefined;}_21=_24.value||"";if(_24.nodeName.toUpperCase()=="SELECT"&&_24.multiple){_21=[];_28=_24.options;for(i=0;i<_28.length;i++){opt=_28[i];if(opt.selected){_21.push(opt.value);}}if(!_21.length){_21=null;}}return _21;}},append:function(_29){return this.addContent(_29,"last");},appendTo:function(_2a){return this._placeMultiple(_2a,"last");},prepend:function(_2b){return this.addContent(_2b,"first");},prependTo:function(_2c){return this._placeMultiple(_2c,"first");},after:function(_2d){return this.addContent(_2d,"after");},insertAfter:function(_2e){return this._placeMultiple(_2e,"after");},before:function(_2f){return this.addContent(_2f,"before");},insertBefore:function(_30){return this._placeMultiple(_30,"before");},remove:dojo.NodeList.prototype.orphan,wrap:function(_31){if(this[0]){_31=_14(_31,this[0]);for(var i=0,_32;_32=this[i];i++){var _33=this._cloneNode(_31);if(_32.parentNode){_32.parentNode.replaceChild(_33,_32);}var _34=_12(_33);_34.appendChild(_32);}}return this;},wrapAll:function(_35){if(this[0]){_35=_14(_35,this[0]);this[0].parentNode.replaceChild(_35,this[0]);var _36=_12(_35);for(var i=0,_37;_37=this[i];i++){_36.appendChild(_37);}}return this;},wrapInner:function(_38){if(this[0]){_38=_14(_38,this[0]);for(var i=0;i<this.length;i++){var _39=this._cloneNode(_38);this._wrap(dojo._toArray(this[i].childNodes),null,this._NodeListCtor).wrapAll(_39);}}return this;},replaceWith:function(_3a){_3a=this._normalize(_3a,this[0]);for(var i=0,_3b;_3b=this[i];i++){this._place(_3a,_3b,"before",i>0);_3b.parentNode.removeChild(_3b);}return this;},replaceAll:function(_3c){var nl=dojo.query(_3c);var _3d=this._normalize(this,this[0]);for(var i=0,_3e;_3e=nl[i];i++){this._place(_3d,_3e,"before",i>0);_3e.parentNode.removeChild(_3e);}return this;},clone:function(){var ary=[];for(var i=0;i<this.length;i++){ary.push(this._cloneNode(this[i]));}return this._wrap(ary,this,this._NodeListCtor);}});if(!dojo.NodeList.prototype.html){dojo.NodeList.prototype.html=dojo.NodeList.prototype.innerHTML;}})();}if(!dojo._hasResource["dojo.NodeList-traverse"]){dojo._hasResource["dojo.NodeList-traverse"]=true;dojo.provide("dojo.NodeList-traverse");dojo.extend(dojo.NodeList,{_buildArrayFromCallback:function(_3f){var ary=[];for(var i=0;i<this.length;i++){var _40=_3f.call(this[i],this[i],ary);if(_40){ary=ary.concat(_40);}}return ary;},_filterQueryResult:function(_41,_42){var _43=dojo.filter(_41,function(_44){return dojo.query(_42,_44.parentNode).indexOf(_44)!=-1;});var _45=this._wrap(_43);return _45;},_getUniqueAsNodeList:function(_46){var ary=[];for(var i=0,_47;_47=_46[i];i++){if(_47.nodeType==1&&dojo.indexOf(ary,_47)==-1){ary.push(_47);}}return this._wrap(ary,null,this._NodeListCtor);},_getUniqueNodeListWithParent:function(_48,_49){var ary=this._getUniqueAsNodeList(_48);ary=(_49?this._filterQueryResult(ary,_49):ary);return ary._stash(this);},_getRelatedUniqueNodes:function(_4a,_4b){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(_4b),_4a);},children:function(_4c){return this._getRelatedUniqueNodes(_4c,function(_4d,ary){return dojo._toArray(_4d.childNodes);});},closest:function(_4e){var _4f=this;return this._getRelatedUniqueNodes(_4e,function(_50,ary){do{if(_4f._filterQueryResult([_50],_4e).length){return _50;}}while((_50=_50.parentNode)&&_50.nodeType==1);return null;});},parent:function(_51){return this._getRelatedUniqueNodes(_51,function(_52,ary){return _52.parentNode;});},parents:function(_53){return this._getRelatedUniqueNodes(_53,function(_54,ary){var _55=[];while(_54.parentNode){_54=_54.parentNode;_55.push(_54);}return _55;});},siblings:function(_56){return this._getRelatedUniqueNodes(_56,function(_57,ary){var _58=[];var _59=(_57.parentNode&&_57.parentNode.childNodes);for(var i=0;i<_59.length;i++){if(_59[i]!=_57){_58.push(_59[i]);}}return _58;});},next:function(_5a){return this._getRelatedUniqueNodes(_5a,function(_5b,ary){var _5c=_5b.nextSibling;while(_5c&&_5c.nodeType!=1){_5c=_5c.nextSibling;}return _5c;});},nextAll:function(_5d){return this._getRelatedUniqueNodes(_5d,function(_5e,ary){var _5f=[];var _60=_5e;while((_60=_60.nextSibling)){if(_60.nodeType==1){_5f.push(_60);}}return _5f;});},prev:function(_61){return this._getRelatedUniqueNodes(_61,function(_62,ary){var _63=_62.previousSibling;while(_63&&_63.nodeType!=1){_63=_63.previousSibling;}return _63;});},prevAll:function(_64){return this._getRelatedUniqueNodes(_64,function(_65,ary){var _66=[];var _67=_65;while((_67=_67.previousSibling)){if(_67.nodeType==1){_66.push(_67);}}return _66;});},andSelf:function(){return this.concat(this._parent);},first:function(){return this._wrap(((this[0]&&[this[0]])||[]),this);},last:function(){return this._wrap((this.length?[this[this.length-1]]:[]),this);},even:function(){return this.filter(function(_68,i){return i%2!=0;});},odd:function(){return this.filter(function(_69,i){return i%2==0;});}});}if(!dojo._hasResource["wsgc.js.SearchController"]){dojo._hasResource["wsgc.js.SearchController"]=true;dojo.provide("wsgc.js.SearchController");dojo.declare("wsgc.js.SearchController",null,{constructor:function(_6a,_6b){var _6c,_6d;if(_6a){this.searchField=_6a;}else{_6d=dojo.byId("search-field");if(_6d){this.searchField=_6d;}}if(location.href.indexOf("https:")===0){_6c=WSI.config.secureAppUrl;}else{_6c=WSI.config.appUrl;}if(!_6c){_6c="/";}this.searchUrl=_6c+this.searchUrl;this.resultsUrl=_6c+this.resultsUrl;this._searchResultsCache=[];this.currentResultSet=[];this.viewset=dojo.byId("type-ahead-viewset").value;this.createSearchResultsDiv(_6b);this._setupLocalStorage();this._registerSearchEvents();if(this.searchField.value===""){this.displayHistoricalSearchTerms();}},MIN_CHARS:2,SEARCH_HISTORY_LIMIT:3,pause:200,_searchResultsCache:null,_ajaxSearcRequest:null,currentSearchTerm:"",currentResultSet:null,searchUrl:"services/typeahead/",searchUrlSuffix:"*/index.json",resultsUrl:"search/results.html?words=",searchResults:null,inlineSearchHeader:null,searchField:null,timeouts:null,xhrimeout:1500,highlightedTerm:-1,viewset:null,_registerSearchEvents:function(){var _6e=this.searchField,_6f=dojo.byId("searchform");if(_6e){dojo.connect(_6e,"onkeyup",this,function(evt){var _70=evt.keyCode,_71=evt.ctlKey,_72=evt.shiftKey;if((_70===38||_70===40)&&!(_71||_72)){this.highlightTerm(_70);}else{if(_70===27&&!(_71||_72)){this.searchField.value=this.currentSearchTerm;this.hideSearchResults();}else{if(_70===13&&!(_71||_72)){this.searchResultKeyPress();this.hideSearchResults();}else{this.setCurrentSearchTerm(evt.currentTarget.value);this.primeTimeout();}}}});dojo.connect(_6e,"onfocus",this,this.displayHistoricalSearchTerms);dojo.connect(_6e,"onblur",this,this.hideSearchResults);}if(_6f){dojo.connect(_6f,"submit",this,function(evt){this.stashHistoricalSearchTerm(this.searchField.value);this.cancelSearchRequest();});}},displaySearchResults:function(_73,_74,_75){_75=_75?_75:"Search Suggestions";if(dojo.isArray(_73)&&_73.length>0){var ul=document.createElement("ul"),_76=document.createElement("li"),_77=document.createElement("a"),li,a,_78,_79;_77.href=this.resultsUrl;for(var i=0,len=_73.length;i<len;i++){_73[i]=_73[i].replace(/<[^>]+>/g,"");li=_76.cloneNode(true);a=_77.cloneNode(true);if(dojo.trim(_74)!==""){a.innerHTML=_73[i].replace(_74,"<span>"+_74+"</span>");}else{a.innerHTML=_73[i];}a.href=a.href+encodeURIComponent(_73[i]);li.appendChild(a);ul.appendChild(li);}_79=this.searchResults;_78=dojo.query("ul",_79);if(_78.length>0){_78=_78[0];_78.parentNode.replaceChild(ul,_78);}else{_79.appendChild(ul);}this.inlineSearchHeader.innerHTML=_75;dojo.removeClass(_79,"hide");this.highlightedTerm=-1;this.currentResultSet=_73;}else{this.hideSearchResults();}},displayHistoricalSearchTerms:function(){var _7a=dojo.fromJson(this.getLocalStorage("recentSearches")||"[]");if(_7a.length){this.displaySearchResults(_7a,"","Recent Searches");}},createSearchResultsDiv:function(_7b,_7c){if(_7b){this.searchResults=_7b;}else{var _7d=dojo.byId("inlineSearchResults"),_7e;if(_7d){this.searchResults=_7d;}else{var _7f=document.createElement("div");dojo.attr(_7f,{id:"searchResults"});dojo.addClass(_7f,"hide");this.searchField.parent.appendChild(_7f);this.searchResults=_7f;}}this.inlineSearchHeader=typeof (_7c)!=="undefined"?_7c:dojo.query(".inlineSearchHeader")[0];dojo.connect(this.searchResults,"onclick",this,this.searchResultClick);},hideSearchResults:function(){var _80=this;setTimeout(function(){dojo.addClass(_80.searchResults,"hide");dojo.query("ul",_80.searchResults).forEach("item.parentNode.removeChild(item);");},500);_80.currentResultSet=[];_80.highlightedTerm=-1;},queueSearch:function(){var _81={handleAs:"json",load:this.searchCallback,timeout:this.xhrimeout,searchTerm:this.currentSearchTerm,context:this};_81.url=this.searchUrl+this.viewset+"/"+encodeURIComponent(this.currentSearchTerm.replace(/\./g," "))+this.searchUrlSuffix;dojo.xhrGet(_81);},primeTimeout:function(){this.clearTimeout();if(this.currentSearchTerm.length>=this.MIN_CHARS){if(this._searchResultsCache[this.currentSearchTerm]){this.displaySearchResults(this._searchResultsCache[this.currentSearchTerm],this.currentSearchTerm);}else{var _82=this;this.timeouts=setTimeout(function(){_82.queueSearch();},this.pause);}}else{this.hideSearchResults();}},clearTimeout:function(){if(this.timeouts){clearTimeout(this.timeouts);}},setCurrentSearchTerm:function(_83){this.currentSearchTerm=dojo.trim(_83);},searchCallback:function(_84){if(_84&&_84.results&&this.searchTerm){var _85=_84.results,_86=this.searchTerm,_87=this.context;_87.displaySearchResults(_85,_86);_87._searchResultsCache[_86]=_85;}},highlightTerm:function(_88){var _89=this.currentResultSet,_8a=_89.length,_8b,_8c,_8d,_8e;if(_8a>0){_8b=(_88===38)?-1:1;_8c=this.highlightedTerm;_8d=_8c+_8b;if(_8d>-1&&_8d<_8a){_8e=dojo.query("li",this.searchResults);if(_8c>-1){dojo.removeClass(_8e[_8c],"highlighted");}dojo.addClass(_8e[_8d],"highlighted");this.searchField.value=_89[_8d];this.highlightedTerm=_8d;}}},searchResultClick:function(evt){var _8f=evt.target,_90,_91;if(_8f.nodeName==="A"){_91=_8f.innerHTML;_90=(_91.indexOf("<span>")>-1);_91=_91.replace(/<span>/,"").replace(/<\/span>/,"");this.stashHistoricalSearchTerm(_91);if(typeof cmCreatePageElementTag==="function"){if(_90){cmCreatePageElementTag("Type Ahead","Search Interactions");}else{cmCreatePageElementTag("Search history","Search Interactions");}}}},searchResultKeyPress:function(){if(dojo.query(".highlighted",this.searchResults).length){if(typeof cmCreatePageElementTag==="function"){cmCreatePageElementTag("Type Ahead","Search Interactions");}}},stashHistoricalSearchTerm:function(_92){var _93=dojo.fromJson(this.getLocalStorage("recentSearches")||"[]"),i,len,_94=[],obj={},_95=this.SEARCH_HISTORY_LIMIT;_93.unshift(_92.toLowerCase());for(i=0,len=_93.length;i<len;i++){if(!obj[_93[i]]){obj[_93[i]]=true;_94.push(_93[i]);}if(_94.length===_95){break;}}this.setLocalStorage("recentSearches",dojo.toJson(_94));},cancelSearchRequest:function(){if(this._ajaxSearcRequest&&typeof this._ajaxSearcRequest.cancel==="function"){this._ajaxSearcRequest.cancel();}},setLocalStorage:function(key,_96){return null;},getLocalStorage:function(key){return null;},_setupLocalStorage:function(){var _97,_98=WSI.config,_99=(location.protocol==="https:"),_9a,_9b;if("localStorage" in window&&window["localStorage"]!==null){this.setLocalStorage=function(key,_9c,_9d){if(typeof key!=="string"||typeof _9c!=="string"){return null;}if(!_9d){if(_99){dojo.cookie("temp_local",_9c,{domain:_98.cookieSubDomain,path:"/",expires:365});}else{dojo.cookie("sec_local",_9c,{domain:_98.cookieSubDomain,path:"/",secure:true,expires:365});}}return window.localStorage.setItem(key,_9c);};this.getLocalStorage=function(key){return window.localStorage.getItem(key);};if(_99){_9a=dojo.cookie("sec_local");if(_9a){this.setLocalStorage("recentSearches",_9a,true);dojo.cookie("sec_local",null,{domain:_98.cookieSubDomain,path:"/",secure:true,expires:-1});}}else{_9b=dojo.cookie("temp_local");if(_9b){this.setLocalStorage("recentSearches",_9b,true);dojo.cookie("temp_local",null,{domain:_98.cookieSubDomain,path:"/",expires:-1});}}}}});}if(!dojo._hasResource["wsgc.js.FooterUtils"]){dojo._hasResource["wsgc.js.FooterUtils"]=true;dojo.provide("wsgc.js.FooterUtils");dojo.declare("wsgc.js.FooterUtils",null,{constructor:function(){this.socialServices={facebook:{content:"<iframe src=\"http://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fpotterybarn&amp;width=190&amp;colorscheme=light&amp;connections=0&amp;stream=true&amp;header=true&amp;height=440\" scrolling=\"no\" frameborder=\"0\" style=\"border:none; overflow:hidden; width:190px; height:440px;\" allowTransparency=\"true\"></iframe><a href=\"http://facebook.com/potterybarn/\"  target=\"_blank\" class=\"popup_link_more\">View more at <span>www.facebook.com</span></a>"},twitter:{content:"<h3>Follow Us at Twitter <a href=\"http://twitter.com/@potterybarn\"  target=\"_blank\" >@potterybarn</a></h3><ul class=\"teaser_list\"></ul><a href=\"http://twitter.com/@potterybarn/\"  target=\"_blank\" class=\"popup_link_more\">View More Tweets at <span>www.twitter.com</span></a>",callback:this.readTwitter},youtube:{content:"<h3>Pottery Barn You tube's channel <a href=\"http://youtube.com/potterybarn\"  target=\"_blank\" >Suscribe to our Channel</a></h3><ul class=\"teaser_list\"></ul><a href=\"http://youtube.com/potterybarn\" target=\"_blank\" class=\"popup_link_more\">View More Videos at <span>www.youtube.com</span></a>",callback:this.readYoutube}};this.registerSocialFooterEvents();},socialServices:null,duration:2000,twitterFeedHeight:0,currentTweeterFeedIndex:0,registerSocialFooterEvents:function(){dojo.query("#popupLinks area[id]").forEach(function(_9e){dojo.connect(_9e,"onclick",this,function(evt){evt.preventDefault();dojo.style(dojo.byId("facebookPopup"),"display","none");dojo.style(dojo.byId("twitterPopup"),"display","none");dojo.style(dojo.byId("youtubePopup"),"display","none");var _9f=evt.currentTarget.id.split("_")[1],_a0,_a1;if(!_9f||!this.socialServices[_9f]){return;}_a0=this.socialServices[_9f].content;_a1=this.socialServices[_9f].callback;if(_a1){this.showSocialPopup(dojo.byId(_9f+"Popup"),this.duration,_a0,_a1);}else{this.showSocialPopup(dojo.byId(_9f+"Popup"),this.duration,_a0);}});},this);},showSocialPopup:function(_a2,_a3,_a4,_a5){if(_a2===null){return;}var _a6,_a7;_a6=dojo.query(".sm_popup_inner",_a2);if(_a6.length===0){return;}_a7=_a6[0];dojo.style(_a2,"display","block");var _a8=dojo.byId("close_social_button");if(!_a8){_a8=document.createElement("a");dojo.attr(_a8,{"href":"javascript:;","id":"close_social_button"});_a8.innerHTML="CLOSE";dojo.style(_a8,{"position":"absolute","right":"7px","top":"5px","fontSize":"8px","padding":"2px","color":"#000000","height":"14px"});dojo.connect(_a8,"click",function(){dojo.style(dojo.byId("facebookPopup"),"display","none");dojo.style(dojo.byId("twitterPopup"),"display","none");dojo.style(dojo.byId("youtubePopup"),"display","none");});}if(_a4&&(_a7.innerHTML=="")){_a7.innerHTML=_a4;if(_a5){_a5();}}_a2.appendChild(_a8);},hideSocialPopup:function(_a9,_aa){var _ab=setTimeout(function(){dojo.style(_a9,"display","none");},_aa);},secondsToMinutes:function(_ac){if(!typeof _ac==="number"){return "";}var _ad=parseInt(_ac/60),_ae=(_ac%60);return _ad+":"+_ae;},readTwitter:function(){var _af=document.createElement("script");dojo.attr(_af,{src:"http://twitter.com/statuses/user_timeline/potterybarn.json?count=3&callback=WSI.utils.displayTwitter",type:"text/javascript"});dojo.query("body")[0].appendChild(_af);},displayTwitter:function(_b0){if(_b0){var _b1=dojo.query("ul",dojo.byId("twitterPopup")),_b2,_b3=document.createElement("li");if(_b1.length>0){_b2=_b1[0];}else{return;}_b3.innerHTML=_b0[this.currentTweeterFeedIndex].text;_b2.appendChild(_b3);this.currentHeight+=_b3.clientHeight;if(this.currentTweeterFeedIndex<_b0.length-1){this.currentTweeterFeedIndex++;this.displayTwitter(_b0);}}},readYoutube:function(){var _b4=document.createElement("script");dojo.attr(_b4,{"class":"youtubeJsonScript","type":"text/javascript",src:"http://gdata.youtube.com/feeds/api/videos/?v=2&author=PotteryBarn&alt=json&orderby=published&max-results=4&callback=WSI.utils.displayYoutube"});dojo.query("body")[0].appendChild(_b4);},displayYoutube:function(_b5){if(_b5.feed){var _b6=_b5.feed.entry||[],_b7=_b6.length,_b8,_b9=dojo.query("ul",dojo.byId("youtubePopup")),_ba,_bb=document.createElement("li"),_bc="";if(_b9.length>0&&_b7>0){_ba=_b9[0];for(var i=0;i<_b7;i++){_bb=document.createElement("li");_b8=_b6[i];_bc=_b8.title.$t.length>45?_b8.title.$t.substr(0,45)+"...":_b8.title.$t;_bb.innerHTML="<a title=\"Watch this video on Youtube: "+_b8.title.$t+"\" href=\""+_b8.link[0].href+"\" class=\"tl_video_title\">\t\t\t\t\t\t\t\t\t\t\t<img src=\""+_b8.media$group.media$thumbnail[0].url+"\" alt=\"Thumbnail image for "+_b8.title.$t+"\" width=\"94\"/>\t\t\t\t\t\t\t\t\t\t<strong>"+_bc+"<span>"+this.secondsToMinutes(_b8.media$group.yt$duration.seconds)+"</span></strong>\t\t\t\t\t\t\t\t\t\t</a>";dojo.place(_bb,_ba,"last");}}}}});}if(!dojo._hasResource["wsgc.common.js.Utils"]){dojo._hasResource["wsgc.common.js.Utils"]=true;dojo.provide("wsgc.common.js.Utils");(function(_bd,_be){_bd.declare("wsgc.common.js.Utils",null,{getWindowScrollPos:function(){if(typeof window.pageXOffset==="undefined"){var _bf=document.documentElement||document.body.parentNode||document.body;return {x:_bf.scrollLeft,y:_bf.scrollTop};}return {x:window.pageXOffset,y:window.pageYOffset};}});}(dojo));}if(!dojo._hasResource["wsgc.js.UserAgent"]){dojo._hasResource["wsgc.js.UserAgent"]=true;dojo.provide("wsgc.js.UserAgent");(function(_c0,_c1){WSI=window.WSI||{};WSI.isIPad=!!navigator.userAgent.match(/iPad/i);WSI.capabilities=Modernizr;}(dojo));}if(!dojo._hasResource["wsgc.js.Utils"]){dojo._hasResource["wsgc.js.Utils"]=true;dojo.provide("wsgc.js.Utils");(function(_c2,_c3){var _c4={},_c5={},_c6=WSI.innerShiv,_c7=null,_c8=null;_c2.declare("wsgc.js.Utils",[wsgc.js.FooterUtils],{constructor:function(_c9,_ca){this._savedCartCookie=_c9;this._sessionCartCookie=_ca;this._registerSearchFieldEvents();this._registerPopupNewWindowEvents();this._registerPopulateShippingFromBilling();this._registerInterstitialEvents();this._registerViewAllCookieBaker();this._setBasketCount();this._registerMultiSelect();this._footerJOELPopup();this._emailAFriendPreview();this._registerPromotionsSignInEvents();this._registerAosDCPickupEvents();this._registerAsynchronousShopImages();this._registerPaymentGiftCardEvents();this._registerShopSortBy();this._nuclearFooter();this._bloomReach();this._registerOpenInParentWindowLink();if(_c2.byId("paymentInformation")){this._scrollToPaymentPageErrors();this._registerSVCApply();this._registerCreditCardFieldEvents();this._registerPlaceOrder();this._registerSVCLRC();this._registerPromoRemove();this._registerPromoApplyEvents();}_c2.query(".forgotPassword").forEach(_c2.hitch(this,function(_cb){_c2.connect(_cb,"onclick",this,"handleForgotPasswordClick");}));if(_c2.byId("mobileEquiv")){_c2.connect(_c2.byId("mobileEquiv"),"onclick",this,"handleMobileEquivClick");}_c2.connect(_c2.byId("cartForm"),"onsubmit",function(evt){_c2.query(".delete-item").forEach("item.disabled = true");return true;});_c2.query(".thankYouSort").forEach(function(_cc){_c2.connect(_cc,"onchange",null,function(evt){_c2.byId("frmSort").submit();});});if(_c2.byId("searchresults")&&_c2.exists("wsgc.js.SearchUtils")){this._searchUtils=new wsgc.js.SearchUtils();}if(!WSI.isEnabled("mbox")){_c2.query(".mboxDefault").forEach(function(_cd){if(_c2.style(_cd,"visibility")!=="visible"){_c2.style(_cd,"visibility","visible");}});}if(WSI.offsiteRequests.length){this._handleOffsiteRequests(WSI.offsiteRequests);WSI.offsiteRequests=[];}},DEFAULT_SEARCH_TEXT:"Search keyword or item #",POPUP_DEFAULT_HEIGHT:560,POPUP_DEFAULT_WIDTH:640,POPUP_DEFAULT_RESIZE:1,POPUP_DEFAULT_NAME:"AppPopup",_savedCartCookie:"",_sessionCartCookie:"",MULTI_BUY_CARTURL:"/shoppingcart/style-and-quantity.html",_multi_buy_items:null,MULTI_BUY_ERROR:"Please select a product to add to your cart.",formSubmitted:false,_searchController:null,_searchUtils:null,savedCreditCardSelected:false,savedCreditCardInfo:null,_setBasketCount:function(){var _ce=_c2.cookie(this._sessionCartCookie.toUpperCase());if(typeof _ce==="undefined"){_ce=_c2.cookie(this._savedCartCookie.toUpperCase());}if(typeof _ce==="undefined"||(_ce.split("|").length<4)){return;}var _cf=_ce.split("|")[3];if(_c2.byId("cart-count")){if(_cf!=="0"){_c2.byId("cart-count").innerHTML=": "+_cf;_c2.byId("cart-count").style.width=_c2.marginBox("cart-count").w+"px";}else{_c2.byId("cart-count").innerHTML="";}}},_registerSearchFieldEvents:function(){var _d0=_c2.byId("search-field"),_d1=_c2.byId("btnSearch"),_d2=(location.protocol==="https:"),_d3=_c2.cookie("sec_local"),_d4=_c2.cookie("temp_local");if(_d0){if((_d4&&!_d2)||(_d2&&_d3)){this._searchController=new wsgc.js.SearchController();}_c2.connect(_d0,"onfocus",this,function(evt){if(evt.currentTarget.value===this.DEFAULT_SEARCH_TEXT){evt.currentTarget.value="";}if(!this._searchController){this._searchController=new wsgc.js.SearchController();}});_c2.connect(_d0,"onblur",this,function(evt){if(evt.currentTarget.value==""){evt.currentTarget.value=this.DEFAULT_SEARCH_TEXT;}});}if(_d1){_c2.connect(_d1,"click",this,function(evt){var _d5=_c2.byId("searchform"),_d6=_c2.byId("search-field"),_d7="&cm_sp=OnsiteSearch-_-GlobalNav-_-Button",_d8;evt.preventDefault();if(_d5&&_d5.action&&_d0&&_d0.value&&typeof cmCreateManualLinkClickTag==="function"){_d8=_d5.action+"?words="+encodeURIComponent(_d0.value)+_d7;cmCreateManualLinkClickTag(_d8,"GLOBAL_NAV","SEARCH");}if(_c2.query(".highlighted",this.searchResults).length&&typeof cmCreatePageElementTag==="function"){cmCreatePageElementTag("Search Interactions","Type Ahead");}if(this._searchController){this._searchController.stashHistoricalSearchTerm(_d0.value);}_d5.submit();});}},_registerInterstitialEvents:function(){var _d9=null;_c2.query("form.interstitialForm #btn-edit").forEach(function(_da){_c2.connect(_da,"onclick",this,"_handleInterstitialEditClick");},this);_c2.query("form.interstitialForm .btnEditBehavior").forEach(function(_db){_c2.connect(_db,"onclick",this,"_handleInterstitialEditClick");},this);_c2.query("form.interstitialForm .btn-preview").forEach(function(_dc){_c2.connect(_dc,"onclick",this,"_handleInterstitialPreviewClick");},this);if(_c2.query("form.interstitialForm #btn-continue").length>0){_d9=_c2.query("form.interstitialForm #btn-continue")[0];_c2.connect(_d9,"onclick",this,"_handleInterstitialContinueClick");}},_registerViewAllCookieBaker:function(){_c2.query(".pagination .view-all").connect("onclick",function(evt){_c2.cookie("viewall","1",{"path":"/"});});_c2.query(".pagination .view-by-page").connect("onclick",function(evt){_c2.cookie("viewall","0",{"expires":-1});});},_registerPopupNewWindowEvents:function(){WSI.Events.delegate("click",".popup",function(evt){_c2.stopEvent(evt);var _dd=_c2.attr(this,"rel"),_de,_df,_e0,_e1,_e2,_e3,win;try{_de=_c2.fromJson(_dd);_df=(_de&&_de.dim&&_de.dim.height)?_de.dim.height:this.POPUP_DEFAULT_HEIGHT;_e0=(_de&&_de.dim&&_de.dim.width)?_de.dim.width:this.POPUP_DEFAULT_WIDTH;_e1=(_de&&_de.dim&&_de.dim.resize)?_de.dim.resize:this.POPUP_DEFAULT_RESIZE;_e2=(_de&&_de.name)?_de.name:this.POPUP_DEFAULT_NAME;}catch(e){_df=this.POPUP_DEFAULT_HEIGHT;_e0=this.POPUP_DEFAULT_WIDTH;_e1=this.POPUP_DEFAULT_RESIZE;_e2=this.POPUP_DEFAULT_NAME;}_e3="toolbar=no,location=no,directories=no,scrollbars=1,resizable="+_e1+",height="+_df+",width="+_e0+",screenX=4,screenY=4,top=4,left=4";win=window.open(this.href,_e2,_e3);if(win&&win.focus){win.focus();}if(_c2.attr(this,"pophref")){evt.href=_c2.attr(this,"pophref");}});WSI.Events.delegate("click",".newWindow",function(evt){_c2.stopEvent(evt);var _e4=_c2.attr(this,"rel"),_e5,_e6,_e7,win;try{_e5=_c2.fromJson(_e4);_e6=(_e5&&_e5.name)?_e5.name:this.POPUP_DEFAULT_NAME;}catch(e){_e6=this.POPUP_DEFAULT_NAME;}_e7="toolbar=yes,location=yes,directories=no,scrollbars=1,resizable=1";win=window.open(this.href,_e6,_e7);if(win&&win.focus){win.focus();}});_c2.query(".close").forEach(function(_e8){_c2.connect(_e8,"onclick",function(evt){evt.preventDefault();evt.stopPropagation();window.close();});});_c2.query(".closeAndContinue").forEach(function(_e9){_c2.connect(_e9,"onclick",this,"_newParentWindow");},this);_c2.query(".driveParent").forEach(function(_ea){_c2.connect(_ea,"onclick",this,"_redirectParent");},this);WSI.Events.delegate("click",".print, .printButton",function(evt){var _eb=_c2.query("img[data-async-src]"),_ec=_eb.length;evt.preventDefault();if(_ec==0){window.print();}else{_eb.forEach(function(e,i){e.setAttribute("src",e.getAttribute("data-async-src"));_c2.connect(e,"onload",function(){_ec--;if(_ec==0){window.print();}});e.removeAttribute("data-async-src");});}});_c2.query(".rollover").forEach(function(_ed){var _ee;_c2.connect(_ed,"onmouseover",function(evt){_ee=evt.currentTarget.src.replace("_off","_on");evt.currentTarget.src=_ee;});_c2.connect(_ed,"onmouseout",function(evt){var _ef=evt.currentTarget.src.replace("_on","_off");evt.currentTarget.src=_ef;});_c2.connect(_ed,"onfocus",function(evt){var _f0=evt.currentTarget.src.replace("_off","_on");evt.currentTarget.src=_f0;});_c2.connect(_ed,"onblur",function(evt){var _f1=evt.currentTarget.src.replace("_on","_off");evt.currentTarget.src=_f1;});});_c2.query(".delete-item").forEach(function(_f2){_c2.connect(_f2,"onclick",function(evt){var _f3;_c2.stopEvent(evt);_f3=_f2.name;document.cartForm[_f3].value="true";_c2.byId("cartForm").submit();});});_c2.query(".update-item").forEach(function(_f4){_c2.connect(_f4,"onclick",function(evt){_c2.stopEvent(evt);_c2.byId("cartForm").submit();});});_c2.query(".checkoutButton").forEach(function(_f5){_c2.connect(_f5,"onclick",function(evt){_c2.stopEvent(evt);_c2.byId("checkout").value="true";_c2.byId("chkmode").value=_c2.hasClass(evt.currentTarget,"expressButton")?"xpress":"normal";_c2.byId("cartForm").submit();});});},_registerSVCApply:function(){var _f6=_c2.byId("applysvc");if(!_f6){return;}_c2.connect(_f6,"onclick",function(evt){var _f7=_c2.byId("svcCard.svcCardNumber"),_f8=_c2.byId("svcCard.pinNumber"),_f9,_fa,_fb;if(_f7&&_f7.value===""){if(_f8&&_f8.value===""){_f9=_c2.byId("applyPromoBlock");if(_f9){_fa=_c2.byId("promoCode");if(_fa.value!==""){_c2.byId("promoApply").value="yes";}}_fb=_c2.byId("svcApply");_fb.value="yes";return;}}_fb=_c2.byId("svcApply");_fb.value="yes";});},_registerPlaceOrder:function(){var _fc=_c2.byId("placeOrderButton");if(!_fc){return;}_c2.connect(_fc,"onclick",this,function(evt){if(this.formSubmitted){evt.preventDefault();}else{_c2.byId("placeOrder").value="yes";this.formSubmitted=true;}});},_scrollToPaymentPageErrors:function(){var _fd=_c2.byId("paymentInformation");if(!_fd){return;}this.deferredPayment();var _fe=_c2.byId("promotionsErrors"),_ff=_c2.byId("svcError"),_100=_c2.byId("discountsApplied"),_101=_c2.byId("ccError");if(_fe){if(_c2.query("#errorScrollPoint").length>0){_c2.query("#errorScrollPoint")[0].scrollIntoView(true);}}else{if(_ff&&_c2.trim(_ff.innerHTML)!==""){if(_c2.query(".gift-cards-and-help").length>0){_c2.query(".gift-cards-and-help")[0].scrollIntoView(true);}}else{if(_101){if(_c2.query(".payment-information-block").length>0){_c2.query(".payment-information-block")[0].scrollIntoView(true);}}else{if(_100&&document.location.href===document.referrer){if(_c2.query(".gift-cards-and-help").length>0){_c2.query(".gift-cards-and-help")[0].scrollIntoView(true);}}}}}var _102=_c2.byId("creditCard.payType");if(_102.value==="8"){_c2.attr("creditCard.cardExpMonth","disabled",true);_c2.attr("creditCard.cardExpYear","disabled",true);_c2.attr("creditCard.cardVerificationNumber","disabled",true);}},_registerCreditCardFieldEvents:function(){var _103=_c2.byId("creditCard.payType");if(!_103){return;}_c2.connect(_103,"onchange",_c2.hitch(this,function(evt){var _104=evt.target.value,_105=_c2.byId("creditCard.cardExpMonth"),_106=_c2.byId("creditCard.cardExpYear"),_107=_c2.byId("creditCard.cardVerificationNumber"),_108=_c2.byId("allowZeroExp");if(this.savedCreditCardSelected&&_104!=="scc"){this.savedCreditCardSelected=false;_c2.query(".sccHide").forEach("dojo.removeClass(item, 'hide');");_c2.query(".sccDisable").forEach("dojo.attr(item, 'disabled', false);");_105.value="";_106.value="";_c2.attr(_107,"disabled",false);_107.value="";_c2.query("#edit-cc-link").forEach("dojo.addClass(item, 'hide');");}if(_104==="8"){_c2.query(".sccHide").forEach("dojo.removeClass(item, 'hide');");_c2.query(".sccDisable").forEach("dojo.attr(item, 'disabled', false);");_105.selectedIndex=0;_c2.attr(_105,"disabled",true);_106.selectedIndex=0;_c2.attr(_106,"disabled",true);_c2.removeClass(_107,"hide");_c2.attr(_107,"disabled",true);_108.value="Y";}else{_c2.query(".sccHide").forEach("dojo.removeClass(item, 'hide');");_c2.query(".sccDisable").forEach("dojo.attr(item, 'disabled', false);");_c2.attr(_107,"disabled",false);_108.value="N";_c2.removeClass(_107,"hide");if(_104==="scc"){this.displaySavedCreditCard();}}this.deferredPayment();}));if(_103.value==="scc"||(!_c2.byId("ccError")&&_c2.query("option[value='scc']",_c2.byId("creditCard.payType")).length>0)){this.displaySavedCreditCard();}},displaySavedCreditCard:function(){var _109,_10a,ccvn,_10b;if(!this.savedCreditCardInfo){_109=_c2.byId("savedCCJSON");if(!_109){return;}try{this.savedCreditCardInfo=_c2.fromJson(_109.value);}catch(e){this.savedCreditCardInfo="";}if(this.savedCreditCardInfo===""){return;}}_10a=this.savedCreditCardInfo;this.savedCreditCardSelected=true;_c2.byId("creditCard.payType").value="scc";_c2.byId("creditCard.cardExpMonth").value=_10a.expireMonth;_c2.byId("creditCard.cardExpYear").value=_10a.expireYear;WSI.formV=new wsgc.js.InlineValidation();WSI.formV.hideAllCreditCardErrorMsgs();ccvn=_c2.byId("creditCard.cardVerificationNumber");_10b=_c2.query(".ccvn");if(_10a.validate==="Y"||_10a.cardType==="8"){var _10c=_c2.byId("allowZeroExp");if(_10c){_10c.value="Y";}}else{_10b.forEach("dojo.removeClass(item, 'sccHide');");ccvn.value="";}_c2.query(".sccHide").forEach("dojo.addClass(item, 'hide');");_c2.query(".sccDisable").forEach("dojo.attr(item, 'disabled', true);");_c2.query("#edit-cc-link").forEach("dojo.removeClass(item, 'hide');");this.deferredPayment();},_registerPopulateShippingFromBilling:function(){var _10d=_c2.byId("applyBillingAddtoShipping");if(_10d&&_c2.hasClass(_10d,"billToShipCopy")){_c2.connect(_10d,"onclick",function(evt){var _10e=evt.target.checked;if(_10e){_c2.attr("shiptoAddress.fullName",{"value":_c2.byId("billtoAddress.fullName").value,"disabled":"disabled"});_c2.attr("shiptoAddress.addrLine1",{"value":_c2.byId("billtoAddress.addrLine1").value,"disabled":"disabled"});_c2.attr("shiptoAddress.addrLine2",{"value":_c2.byId("billtoAddress.addrLine2").value,"disabled":"disabled"});_c2.attr("shiptoAddress.city",{"value":_c2.byId("billtoAddress.city").value,"disabled":"disabled"});document.getElementById("shiptoAddress.state").value=document.getElementById("billtoAddress.state").value;_c2.byId("shiptoAddress.state").selectedIndex=_c2.byId("billtoAddress.state").selectedIndex;_c2.attr("shiptoAddress.state","disabled","true");_c2.attr("shiptoAddress.zip",{"value":_c2.byId("billtoAddress.zip").value,"disabled":"disabled"});_c2.attr("shiptoAddress.dayPhone",{"value":_c2.byId("billtoAddress.dayPhone").value,"disabled":"disabled"});_c2.attr("shiptoAddress.eveningPhone",{"value":_c2.byId("billtoAddress.eveningPhone").value,"disabled":"disabled"});_c2.query("#ship-account-info input, #ship-account-info select").addClass("disabled");}else{_c2.query("#ship-account-info input, #ship-account-info select").forEach(function(elem){elem.removeAttribute("disabled");});_c2.query("#ship-account-info input, #ship-account-info select").removeClass("disabled");}});if(_c2.attr(_10d,"checked")===true){_c2.query("#ship-account-info input, #ship-account-info select").forEach(function(elem){elem.setAttribute("disabled","disabled");});}}},handleForgotPasswordClick:function(evt){_c2.stopEvent(evt);var form=_c2.byId("loginForm");if(form){form.action=WSI.config.secureAppUrl+"account/password-request-confirmation.html";form.submit();}},handleMobileEquivClick:function(evt){if(WSI.config){_c2.cookie(WSI.config.sitePref,"mobile",{domain:WSI.config.cookieSubDomain,path:"/"});}},_handleInterstitialEditClick:function(evt){_c2.stopEvent(evt);_c2.byId("isEditMode").value="1";this._postInterstitialForm();},_handleInterstitialPreviewClick:function(evt){if(_c2.byId("isPreview")){_c2.byId("isPreview").value="1";}if(evt&&evt.currentTarget&&evt.currentTarget.id){var _10f=evt.currentTarget.id.substr(10);if(_c2.byId("previewIndex")){_c2.byId("previewIndex").value=_10f;}}_c2.stopEvent(evt);this._postInterstitialForm();},_handleInterstitialContinueClick:function(evt){_c2.stopEvent(evt);_c2.byId("isEditMode").value="0";this._postInterstitialForm();},_postInterstitialForm:function(){if(_c2.query(".interstitialForm").length>0){var form=_c2.query(".interstitialForm")[0];form.submit();}},_forwardToExternalSite:function(win,url){if(win){win.close();}var _110=window.open(url);},_registerSVCLRC:function(){var _111="";_c2.query(".removeSVCLRCButton").forEach(function(_112){_c2.connect(_112,"onclick",function(evt){if(!_c2.attr(evt.currentTarget,"svcnumber")){return false;}_111=_c2.attr(evt.currentTarget,"svcnumber");_c2.byId("removeSvcLrc").value=_111;return true;});});},_registerPromoRemove:function(){var _113="";_c2.query(".removePromoButton").forEach(function(_114){_c2.connect(_114,"onclick",function(evt){if(!_c2.attr(evt.currentTarget,"promoCode")){return false;}_113=_c2.attr(evt.currentTarget,"promoCode");_c2.byId("releasePromo").value=_113;return true;});});},_newParentWindow:function(evt){var win;var url=evt.currentTarget.href;if(_c2.isFF){try{if(_c2.exists("window.opener.WSI.utils._forwardToExternalSite")){window.opener.WSI.utils._forwardToExternalSite(window,url);}else{win=window.open(url);window.close();}}catch(e){win=window.open(url);window.close();}}else{win=window.open(url);window.close();}},_redirectParent:function(evt){evt.preventDefault();evt.stopPropagation();var url=evt.currentTarget.href;if(_c2.exists("window.opener")){window.opener.location.href=url;if(_c2.exists("window.opener.focus")){window.opener.focus();}}else{var win=window.open(url);window.close();}window.close();},deferredPayment:function(){var _115=_c2.byId("creditCard.payType").value;var _116=_c2.byId("deferredPayment");if(_116){var _117=_c2.byId("deferPayments");var _118=_117.value.split(",");var _119=_c2.byId("creditCard.payType").options;var _11a=_c2.byId("deferredCardType");for(var i=0;i<_118.length;i++){if(_115===_118[i]){for(var j=0;j<_119.length;j++){if(_119[j].value==_115){_11a.innerHTML=_119[j].text;}}_c2.style(_116,{"display":"block"});break;}else{_c2.style(_116,{"display":"none"});}}}},_registerMultiSelect:function(){this._multi_buy_items=[];if(_c2.byId("productGroupIds")&&_c2.byId("productGroupIds").value!==""){this._multi_buy_items=_c2.byId("productGroupIds").value.split(",");}if(_c2.query("form[name='multiSelect']").length>0){_c2.query(".pagination a").connect("onclick",this,function(evt){var _11b=_c2.query("form[name='multiSelect']")[0];var _11c=evt.currentTarget.href;evt.preventDefault();this._writeMultiBuyItemsToField();_11b.action=_11c;_11b.submit();});_c2.query(".btn-add-selected a").connect("onclick",this,function(evt){var _11d=_c2.query("form[name='multiSelect']")[0];var _11e=this.MULTI_BUY_CARTURL;evt.preventDefault();this._writeMultiBuyItemsToField();if(_c2.byId("productGroupIds")&&_c2.trim(_c2.byId("productGroupIds").value)!==""){_11d.action=_11e;_11d.submit();}else{if(_c2.byId("pageErrorHook")){_c2.byId("pageErrorHook").innerHTML=this.MULTI_BUY_ERROR;window.scroll(0,0);}}});_c2.query(".muliBuyCheckbox").connect("onclick",this,"_handleMutliBuyCheckboxClick");}},_writeMultiBuyItemsToField:function(){if(_c2.byId("productGroupIds")&&this._multi_buy_items){_c2.byId("productGroupIds").value=this._multi_buy_items.join(",");}},_handleMutliBuyCheckboxClick:function(evt){var _11f=evt.currentTarget;var _120=evt.currentTarget.value;if(_11f.checked){if(_c2.indexOf(this._multi_buy_items,_120)===-1){this._multi_buy_items.push(_120);}}else{if(_c2.indexOf(this._multi_buy_items,_120)>-1){this._multi_buy_items.splice(_c2.indexOf(this._multi_buy_items,_120),1);}}},_footerJOELPopup:function(){_c2.query("#joinEmail").forEach(function(frm){_c2.connect(frm,"onsubmit",this,function(evt){evt.preventDefault();evt.stopPropagation();var url=document.joinEmail.action+"?email="+document.joinEmail.email.value;var _121="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=300,width=410,screenX=4,screenY=4,top=4,left=4";var win=window.open(url,"joinemail",_121);win.focus();});});_c2.query("#inpageJoinEmail").forEach(function(frm){_c2.connect(frm,"onsubmit",this,function(evt){evt.preventDefault();evt.stopPropagation();var url=document.inpageJoinEmail.action+"?email="+document.inpageJoinEmail.email.value;var _122="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=300,width=410,screenX=4,screenY=4,top=4,left=4";var win=window.open(url,"joinemail",_122);win.focus();});});_c2.query("#joinEmail2").forEach(function(frm){_c2.connect(frm,"onsubmit",this,function(evt){evt.preventDefault();evt.stopPropagation();var url=document.joinEmail2.action+"?email="+document.joinEmail2.email.value;var _123="toolbar=no,location=no,directories=no,scrollbars=1,resizable=0,height=300,width=410,screenX=4,screenY=4,top=4,left=4";var win=window.open(url,"joinemail",_123);win.focus();});});},_emailAFriendPreview:function(){var _124=_c2.byId("emailAFriend");if(!_124){return;}var _125=_c2.byId("btn-preview");_c2.connect(_125,"onclick",function(evt){_c2.byId("preview").value="true";});},_registerPromotionsSignInEvents:function(){var _126=_c2.byId("apply-tax-exemption");if(!_126){return;}var _127=_c2.byId("yesexemption");if(_c2.byId("yesexemption").checked){_c2.removeClass("termsBlock","hide");}var _128=_c2.byId("noexemption");_c2.connect(_127,"onclick",function(evt){_c2.byId("termsBlock").className="";_c2.query(".message").forEach("item.className='hide';");});_c2.connect(_128,"onclick",function(evt){_c2.byId("termsBlock").className="hide";_c2.query(".message").forEach("item.className='hide';");});_c2.connect(_c2.byId("accepttoc"),"onclick",function(evt){_c2.query(".message").forEach("item.className='hide';");});if(_c2.byId("yesexemption").checked&&_c2.byId("accepttoc").checked){_c2.query(".message").forEach("item.className='hide';");}if(_c2.byId("noexemption").checked){_c2.query(".message").forEach("item.className='hide';");_c2.query("#termsBlock").forEach("item.className='hide';");}},_registerPaymentGiftCardEvents:function(){var _129=_c2.byId("base-gift-display");if(!_129){return;}var _12a=_c2.byId("has-gift-cards");var _12b=_c2.byId("no-gift-cards");if((_c2.byId("svcError"))||(_c2.byId("discountsApplied"))){_12a.checked="checked";_c2.byId("extended-gift-display").className="show";}_c2.connect(_12a,"onclick",function(evt){_c2.byId("extended-gift-display").className="show";});_c2.connect(_12b,"onclick",function(evt){if(_c2.byId("discountsApplied")){_12a.checked="checked";_c2.byId("remove-cards").className="show";}else{_c2.byId("extended-gift-display").className="hide";}});},_registerShopSortBy:function(){_c2.query("#sortBy").connect("onchange",null,function(evt){var _12c={best:"Sort By",best:"Best Match",priceAsc:"Price Low to High",priceDesc:"Price High to Low",ratingAsc:"Rating Low to High",ratingDesc:"Rating High to Low","new":"New",bestSeller:"Best Seller"};if(typeof cmCreatePageElementTag==="function"){var _12d=window.location.pathname.substr(0,8).match("/search/")?"Search Interactions":"Shop Interactions";cmCreatePageElementTag("Sort_"+_12c[evt.currentTarget.value],_12d);}if(_c2.byId("regListForm")){_c2.byId("regListForm").submit();}else{if(_c2.byId("sortByForm")){if(!_c2.byId("facetedNavContainer")){_c2.byId("sortByForm").submit();}}}});},_registerPromoApplyEvents:function(){var _12e=_c2.byId("applyPromoBlock");if(_12e){var _12f=_c2.byId("applyPromo");if(_12f){_c2.connect(_12f,"onclick",function(evt){_c2.byId("promoApply").value="yes";});}}else{return;}},bvCheckLoadState:function(){if(!BVisLoaded){_c2.byId("BVSubmissionFrame").src="";_c2.byId("BVSubmissionContainer").innerHTML="Review Submission Currently Unavailable";}},_registerAosDCPickupEvents:function(){var _130=_c2.query(".dcPickupCbx");if(_130.length===0){return;}var _131=function(_132){var _133=_132.parentNode.parentNode;_c2.query(".billingAddressUpdate",_133).forEach("item.checked=false;");_c2.query(".dcField",_133).forEach("dojo.addClass(item, 'hide');");_c2.query(".dcField input[type='text'], .dcField select",_133).forEach("item.value='';");};var _134=function(_135){var _136=_135.parentNode.parentNode;_c2.query(".dcField",_136).forEach("dojo.removeClass(item, 'hide');");_c2.query(".dcField input[type='text'], .dcField select",_136).forEach("item.value='';");};_130.forEach(function(item){if(item.checked){_131(item);}_c2.connect(item,"onclick",null,function(evt){var _137=evt.currentTarget;if(_137.checked){_131(_137);}else{_134(_137);}});});},_registerAsynchronousShopImages:function(){var _138=_c2.query("img[data-async-src]");this.asyncImages=[];this.currentImage=[0,null];if(_138.length){_138.forEach(function(e){this.asyncImages.push([_c2.coords(e,true).y,e]);},this);_c8=_c8||_c2.connect(window,"onscroll",this,this._loadAsynchronousShopImages);this._loadAsynchronousShopImages();}},_loadAsynchronousShopImages:function(){bottomThreshold=(document.documentElement.scrollTop||document.body.scrollTop)+(document.documentElement.clientHeight||window.innerHeight)*2;while(this.asyncImages.length&&(this.currentImage[0]<bottomThreshold)){this.currentImage=this.asyncImages.shift();if(_c2.attr(this.currentImage[1],"data-async-src")){this.currentImage[1].setAttribute("src",_c2.attr(this.currentImage[1],"data-async-src"));this.currentImage[1].removeAttribute("data-async-src");}}},_handleOffsiteRequests:function(_139){_139=_139||[];for(var i=0,len=_139.length;i<len;++i){var _13a=_139[i],type=_13a[0],url=_13a[1],_13b=_13a[2]||{};switch(type){case "css":this.loadStylesheet(url,_13b);break;case "js":this.loadScript(url,_13b);break;}}},loadScript:function(url,_13c){if(this.isScriptLoaded(url)){if(_13c&&_c2.isFunction(_13c)){_13c();}return;}var _13d=new _c2._Url(document.location.href),_13e=new _c2._Url(url),self=this,_13f;if(_13d.scheme===_13e.scheme&&_13d.host===_13e.host&&_13d.port===_13e.port){_c2.xhrGet({url:url,load:function(_140){self._xhrScript(_140);self.setScriptLoaded(url);if(_13c&&_c2.isFunction(_13c)){_13c();}}});}else{this.docHead=this.docHead||_c2.query("head")[0];_13f=_c2.create("script",{type:"text/javascript"});_13f[_c2.isIE?"onreadystatechange":"onload"]=function(){if(!_c2.isIE||this.readyState==="loaded"||this.readyState==="complete"){self.setScriptLoaded(url);if(_13c&&_c2.isFunction(_13c)){_13c();}}};_13f.src=url;_c2.place(_13f,this.docHead);}},loadStylesheet:function(url,_141,_142){if(this.isStylesheetLoaded(url)){if(_142&&_c2.isFunction(_142)){_142();}return;}var _143=document.createElement("link"),self=this;_c2.attr(_143,_c2.mixin(_141||{},{rel:"stylesheet",type:"text/css",href:url,onload:function(){if(_142&&_c2.isFunction(_142)){_142();}}}));this.docHead=this.docHead||_c2.query("head")[0];this.docHead.appendChild(_143);self.setStylesheetLoaded(url);},setStylesheetLoaded:function(urls){if(_c2.isArray(urls)){for(var i=0,len=urls.length;i<len;++i){_c4[urls[i]]=true;}}else{_c4[urls]=true;}},setScriptLoaded:function(urls){if(_c2.isArray(urls)){for(var i=0,len=urls.length;i<len;++i){_c5[urls[i]]=true;}}else{_c5[urls]=true;}},isStylesheetLoaded:function(url){return _c4[url];},isScriptLoaded:function(url){return _c5[url];},_xhrScript:function(_144){if(_144!==""){var _145,_146;_145=_c2.query("head")[0];_146=document.createElement("script");_146.type="text/javascript";_146.text=_144;_145.appendChild(_146);}},loadFragment:function(_147,_148){if(_c2.isObject(_147)){_148=_147;_147="GET";}var href=WSI.utils.stripBaseUrlWhenHrefHasAnchor(_148.url);function load(data){data=data.replace(/<script[^>]+type=(['"])text\/javascript\1[^>]*>([\s\S]*?)<\/script>/gim,function(_149,_14a,src){if(_c2.trim(src)){(window.execScript||function(src){window["eval"].call(window,src);})(src);}return "";});if(_148.load){_148.load(data);}_c2.publish("/fragment/loaded",[{href:href,data:data}]);};if(href.length&&href.charAt(0)==="#"){try{href=href.substr(1);var _14b=_c2.byId(href);if(_14b.nodeName==="SCRIPT"&&_c2.attr(_14b,"type")==="text/html"){var _14c=arguments.callee.templates||(arguments.callee.templates={});_14c[href]=_14c[href]||WSI.utils.template(_c2.trim(_14b.innerHTML));_14b=_14c[href]();}else{_14b=_14b.innerHTML;}load(_14b);}catch(error){if(_148.error){_148.error(error);}}}else{_c2.xhr(_147,_c2.mixin({},_148,{load:load,error:function(_14d){if(_148.error){_148.error(_14d);}}}));}},connect:function(obj,_14e,_14f,_150,_151){var _152=_14e.replace(/^on/,"");if(WSI.earlyEventQueues&&WSI.earlyEventQueues[_152]&&obj){var _153=WSI.earlyEventQueues[_152][obj];if(_153&&_153!=="drained"){var ctx=_14f||obj;var _154=typeof _150==="string"?ctx[_150]:_150;while(_153.length){var evt=_153.shift();_154.call(ctx,_151?evt:_c2.fixEvent(evt));}WSI.earlyEventQueues[_152][obj]="drained";}}return _c2.connect.apply(_c2,arguments);},stopEarlyEventCapture:function(){for(var _155 in (WSI.earlyEventQueues||{})){if(document.detachEvent){document.detachEvent("on"+_155,WSI.capturingEventHandler);}else{document.removeEventListener(_155,WSI.capturingEventHandler,true);}}WSI.earlyEventQueues={};_c2.query(".captureEarlyEvents").removeClass("earlyEventsCaptured").removeClass("captureEarlyEvents");},templateSettings:{evaluate:/\[%([\s\S]+?)%\]/g,interpolate:/\[%=([\s\S]+?)%\]/g},template:function(str,data){var c=this.templateSettings;var tmpl="var __p=[],print=function(){__p.push.apply(__p,arguments);};"+"with(obj||{}){__p.push('"+str.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(_156,code){return "',"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+",'";}).replace(c.evaluate||null,function(_157,code){return "');"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('";}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";var func=new Function("obj",tmpl);return data?func(data):func;},registerAvsOverrideElementTagHandler:function(_158,_159,_15a){if((_158||_158==="")&&_159&&_15a){_c2.query("form[name="+_158+"]").connect("submit",function(evt){_159=_c2.isArray(_159)?_159:[_159];_c2.some(_159,function(_15b){var _15c=_c2.byId(_15b+".overideAddressVerification");if(_15c&&_15c.checked){cmCreatePageElementTag(_15a,"AVS",null,null,null,"");return true;}});});}},_nuclearFooter:function(){_c2.query(".nso-title span").forEach(function(elem){_c2.connect(elem,"onclick",function(evt){var _15d="nso-"+elem.id;if(_c2.style(_15d,"visibility")=="visible"){_c2.style(_15d,"visibility","hidden");_c2.byId(elem.id).innerHTML="[+]";}else{_c2.query(".nso-brand").forEach(function(_15e){_c2.style(_15e,"visibility","hidden");});_c2.query(".nso-title span").forEach(function(_15f){_c2.byId(_15f.id).innerHTML="[+]";});_c2.style(_15d,"visibility","visible");_c2.byId(elem.id).innerHTML="[&ndash;]";}});});},sessionBoolCookieMap:["viewAllByDefault"],setSessionBool:function(name,_160){var _161=this.sessionBoolCookieMap.indexOf(name);if(_161!=-1){var _162=_c2.cookie("SESSION_COOKIE")||0;var _163=Math.pow(2,_161);if(_160){var _164=_162|_163;}else{var _164=_162&~_163;}_c2.cookie("SESSION_COOKIE",_164);}},getSessionBool:function(name){var _165=this.sessionBoolCookieMap.indexOf(name);if(_165!=-1){var _166=_c2.cookie("SESSION_COOKIE");var _167=Math.pow(2,_165);return (_166&_167)?true:false;}else{return false;}},swapClasses:function(_168,_169,_16a){if(_168.nodeName){_168=_c2.NodeList(_168);}_168.filter("."+_169).removeClass(_169).addClass(_16a);return _168;},closest:function(_16b,_16c){var node=_16c;do{if(_c2._filterQueryResult([node],_16b).length){return node;}}while((node=node.parentNode)&&node.nodeType===1);},_bloomReach:function(){var _16d=_c2.byId("br-more-products-widget"),_16e=_c2.byId("br-related-searches-widget");if(_16d){_c2.connect(_16d,"onclick",this,function(evt){var _16f=evt.target,_170;if(_c2.hasClass(_16f.parentNode,"br-more-widget-view")){evt.preventDefault();_c2.query(".br-more-widget",_16d).forEach("item.style.display='none';");_170=_c2.attr(_16f,"href").replace(/^[^#]*/,"");if(_170){_c2.query(_170,_16d).forEach("dojo.removeClass(item, 'hide');");}if(_16e){this._equalizeHeight(_16d,_16e);}}else{if(_c2.hasClass(_16f.parentNode,"br-more-widget-popup-close")){evt.preventDefault();_c2.query(".br-more-widget-popup",_16d).forEach("dojo.addClass(item, 'hide');");_c2.query(".br-more-widget",_16d).forEach("item.style.display='block';");if(_16e){this._equalizeHeight(_16d,_16e);}}}});}if(_16d&&_16e){this._equalizeHeight(_16d,_16e);}},_equalizeHeight:function(_171,_172){var _173;if(_171&&_172){_171.style.height="auto";_172.style.height="auto";_173=Math.max(_c2.marginBox(_171).h,_c2.marginBox(_172).h)-1;_c2.marginBox(_171,{h:_173});_c2.marginBox(_172,{h:_173});}},initXHRDialog:function initXHRDialog(_174,_175){var _176,_177,i,len,_178;_c2.query(".XHRForm").forEach(function(item){_c2.connect(item,"onsubmit",null,function(evt){var _179="get",_17a=10000;_c2.stopEvent(evt);if(this.submitted){return;}else{this.submitted=true;}if(item.method.toUpperCase()==="POST"){_179="post";}_c2.xhr(_179,{timeout:_17a,form:item,handleAs:"text",load:function(data,_17b){var _17c=WSI.config,_17d,_17e=_17b.xhr;_17d=_17e.getResponseHeader("Location");if(_17d){window.location.href=_17d;}else{if(data&&data.length){_174.containerNode.innerHTML=data;initXHRDialog(_174,_175);}else{_174.close();}}},error:function(_17f,_180){this.submitted=false;_c2.place("<ul class='error'><li>A communication error occurred - Please try gain.</li></ul>",_174.containerNode,"first");}});});});if(_175){_175=_c2.isArray(_175)?_175:[_175];for(i=0,len=_175.length;i<len;i++){_176=_175[i];if(typeof _176==="function"){_176(this);}}}_c2.query(".closeButton").forEach(function(item){_c2.connect(item,"onclick",_174,function(evt){_c2.stopEvent(evt);this.close();});});},addDialogLoadHandler:function addDialogLoadHandler(_181,_182){WSI.dialogLoadHandlers=WSI.dialogLoadHandlers||{};WSI.dialogLoadHandlers[_181]=_182;},removeDialogLoadHandler:function removeDialogLoadHandler(_183){if(WSI.dialogLoadHandlers){delete WSI.dialogLoadHandlers[_183];}},_registerOpenInParentWindowLink:function(){_c2.query(".openInParentWindow").forEach(function(elem){_c2.connect(elem,"click",function(evt){_c2.stopEvent(evt);(window.opener||window).location.href=_c2.attr(elem,"href");if(window.opener){window.close();}});});},smoothScrollTo:function(_184,_185){if(_c7!=null){return;}_c7=_184;if(_184){var _186=function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b;}return -c/2*((--t)*(t-2)-1)+b;};var _187=function(elem){var _188=0;if(elem.offsetParent){do{_188+=elem.offsetTop;}while(elem=elem.offsetParent);}return _188;};var _189=_187(_184);var _18a=window.pageYOffset||document.documentElement.scrollTop;var _18b=_189-_18a;var _18c=_185;var _18d=15;var wait=_18c/_18d;var _18e=0;var _18f=setInterval(function(){var cur=_186(_18e,_18a,_18b,_18d);window.scrollTo(0,cur);if(_18e===_18d){clearInterval(_18f);_c7=null;}_18e++;},wait);}},getBrowserScrollbarWidth:function(){return WSI.config.scrollbarWidth||(WSI.config.scrollbarWidth=(function(dojo,_190){var _191=dojo.place("<div style=\"position:absolute;top:0;left:0;visibility:hidden;width:200px;height:150px;overflow:hidden;margin-left:-9999px;\"/>",dojo.body());var _192=dojo.place("<p style=\"width:100%;height:200px;\"/>",_191);var _193=_192.offsetWidth;dojo.style(_191,"overflow","scroll");var _194=_192.offsetWidth;if(_193===_194){_194=_191.clientWidth;}dojo.destroy(_191);return _193-_194;}(_c2)));},stripBaseUrlWhenHrefHasAnchor:function(href){var _195=href.match(/#.*$/);return (_195!==null)?_195[0]:href;},toDom:function(src){if(_c2.isIE<=8){_c6.innerHTML=src;if(_c6.childNodes.length===1){return _c6.firstChild;}else{var frag=document.createDocumentFragment();while(_c6.childNodes.length){frag.appendChild(_c6.childNodes.item(0));}return frag;}}else{return _c2._toDom(src);}}});}(dojo));}if(!dojo._hasResource["wsgc.js.IntlUtils"]){dojo._hasResource["wsgc.js.IntlUtils"]=true;dojo.provide("wsgc.js.IntlUtils");(function(dojo,_196){dojo.declare("wsgc.js.IntlUtils",null,{constructor:function(){this._registerCheckoutEvent();this._registerDeleteCountryEventHandler(dojo.query(".deleteCountry"));},_registerCheckoutEvent:function(){WSI.Events.delegate("click",".checkoutButtonIntl",function(evt){dojo.stopEvent(evt);dojo.byId("checkout").value="true";dojo.byId("cartForm").submit();});},_registerDeleteCountryEventHandler:function(_197){_197.connect("click",function(evt){dojo.stopEvent(evt);dojo.xhrGet({url:"/international/ineligible-items.html",content:{country:"US",currency:"USD"},preventCache:true,load:function(){window.location.reload();}});if(typeof (cmCreateConversionEventTag)!=="undefined"){cmCreateConversionEventTag("Change Country","1","International");}});},initIneligibleItemsDialog:function(_198){dojo.removeAttr(_198.domNode,"style");dojo.query(".closeButton",_198.domNode).connect("click",function(evt){dojo.stopEvent(evt);dojo.publish("/closeDialogs");});},interceptAddToBasket:function(evt){var _199=WSI.utils.closest(".section",evt.currentTarget);if(dojo.query(".skuErrorHook",_199).length!==dojo.query(".skuErrorHook:empty",_199).length){dojo.stopEvent(evt);dojo.byId("pageErrorHook").focus();window.scrollTo(0,0);}},flagBasedCurrencySelector:function(_19a){var _19b=WSI.config.country||"US";var _19c=dojo.query(".currencyCode",_19a.elem)[0];var _19d={};for(var i=0,len=_19c.options.length;i<len;++i){_19d[_19c.options[i].value]=i;}dojo.addClass(dojo.query(".flagMap a."+_19b,_19a.elem)[0].parentNode,"selected-country");_19c.selectedIndex=_19d[WSI.config.currency||"USD"];dojo.query(".flagMap a",_19a.elem).connect("click",function(evt){dojo.query(".selected-country").removeClass("selected-country");_19b=this.getAttribute("data-countryCode");var _19e=this.getAttribute("data-defaultCurrency");dojo.addClass(this.parentNode,"selected-country");_19c.selectedIndex=_19d[_19e];dojo.stopEvent(evt);});dojo.connect(dojo.byId("intlSetCountryDialogSubmit"),"click",function(evt){dojo.stopEvent(evt);if(_19b!=""&&_19c.value){dojo.xhrGet({url:"/international/ineligible-items.html",content:{country:_19b,currency:_19c.value},preventCache:true,load:function(){window.location.reload();}});if(typeof (cmCreateConversionEventTag)!=="undefined"){cmCreateConversionEventTag("Change Country","1","International");}}else{dojo.query("ul.error",_19a.elem).removeClass("hide");dojo.query("ul.error li.countryMessage",_19a.elem).toggleClass("hide",countrySelect.selectedIndex!=0);dojo.query("ul.error li.currencyMessage",_19a.elem).toggleClass("hide",!!_19c.value);}});this._registerDeleteCountryEventHandler(dojo.query("#deleteCountry",_19a.elem));WSI.utils.swapClasses(dojo.query(".deferredLayover",_19a.elem),"deferredLayover","layover");dojo.query(".layover",_19a.elem).connect("click",function(evt){WSI.layoverC.openLayover(evt);});dojo.query("form",_19a.elem).forEach(function(form){form.reset();});}});}(dojo));}if(!dojo._hasResource["dojox.xml.parser"]){dojo._hasResource["dojox.xml.parser"]=true;dojo.provide("dojox.xml.parser");dojox.xml.parser.parse=function(str,_19f){var _1a0=dojo.doc;var doc;_19f=_19f||"text/xml";if(str&&dojo.trim(str)&&"DOMParser" in dojo.global){var _1a1=new DOMParser();doc=_1a1.parseFromString(str,_19f);var de=doc.documentElement;var _1a2="http://www.mozilla.org/newlayout/xml/parsererror.xml";if(de.nodeName=="parsererror"&&de.namespaceURI==_1a2){var _1a3=de.getElementsByTagNameNS(_1a2,"sourcetext")[0];if(_1a3){_1a3=_1a3.firstChild.data;}throw new Error("Error parsing text "+de.firstChild.data+" \n"+_1a3);}return doc;}else{if("ActiveXObject" in dojo.global){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];dojo.some(dp,function(p){try{doc=new ActiveXObject(p);}catch(e){return false;}return true;});if(str&&doc){doc.async=false;doc.loadXML(str);var pe=doc.parseError;if(pe.errorCode!==0){throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);}}if(doc){return doc;}}else{if(_1a0.implementation&&_1a0.implementation.createDocument){if(str&&dojo.trim(str)&&_1a0.createElement){var tmp=_1a0.createElement("xml");tmp.innerHTML=str;var _1a4=_1a0.implementation.createDocument("foo","",null);dojo.forEach(tmp.childNodes,function(_1a5){_1a4.importNode(_1a5,true);});return _1a4;}else{return _1a0.implementation.createDocument("","",null);}}}}return null;};dojox.xml.parser.textContent=function(node,text){if(arguments.length>1){var _1a6=node.ownerDocument||dojo.doc;dojox.xml.parser.replaceChildren(node,_1a6.createTextNode(text));return text;}else{if(node.textContent!==undefined){return node.textContent;}var _1a7="";if(node){dojo.forEach(node.childNodes,function(_1a8){switch(_1a8.nodeType){case 1:case 5:_1a7+=dojox.xml.parser.textContent(_1a8);break;case 3:case 2:case 4:_1a7+=_1a8.nodeValue;}});}return _1a7;}};dojox.xml.parser.replaceChildren=function(node,_1a9){var _1aa=[];if(dojo.isIE){dojo.forEach(node.childNodes,function(_1ab){_1aa.push(_1ab);});}dojox.xml.parser.removeChildren(node);dojo.forEach(_1aa,dojo.destroy);if(!dojo.isArray(_1a9)){node.appendChild(_1a9);}else{dojo.forEach(_1a9,function(_1ac){node.appendChild(_1ac);});}};dojox.xml.parser.removeChildren=function(node){var _1ad=node.childNodes.length;while(node.hasChildNodes()){node.removeChild(node.firstChild);}return _1ad;};dojox.xml.parser.innerXML=function(node){if(node.innerXML){return node.innerXML;}else{if(node.xml){return node.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(node);}}}return null;};}if(!dojo._hasResource["dojox.embed.Flash"]){dojo._hasResource["dojox.embed.Flash"]=true;dojo.provide("dojox.embed.Flash");(function(){var _1ae,_1af;var _1b0=7;var _1b1="dojox-embed-flash-",_1b2=0;var _1b3={expressInstall:false,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"always",allowNetworking:"all",style:null,redirect:null};function prep(_1b4){_1b4=dojo.delegate(_1b3,_1b4);if(!("path" in _1b4)){return null;}if(!("id" in _1b4)){_1b4.id=(_1b1+_1b2++);}return _1b4;};if(dojo.isIE){_1ae=function(_1b5){_1b5=prep(_1b5);if(!_1b5){return null;}var p;var path=_1b5.path;if(_1b5.vars){var a=[];for(p in _1b5.vars){a.push(p+"="+_1b5.vars[p]);}_1b5.params.FlashVars=a.join("&");delete _1b5.vars;}var s="<object id=\""+_1b5.id+"\" "+"classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" "+"width=\""+_1b5.width+"\" "+"height=\""+_1b5.height+"\""+((_1b5.style)?" style=\""+_1b5.style+"\"":"")+">"+"<param name=\"movie\" value=\""+path+"\" />";if(_1b5.params){for(p in _1b5.params){s+="<param name=\""+p+"\" value=\""+_1b5.params[p]+"\" />";}}s+="</object>";return {id:_1b5.id,markup:s};};_1af=(function(){var _1b6=10,_1b7=null;while(!_1b7&&_1b6>6){try{_1b7=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_1b6--);}catch(e){}}if(_1b7){var v=_1b7.GetVariable("$version").split(" ")[1].split(",");return {major:(v[0]!=null)?parseInt(v[0]):0,minor:(v[1]!=null)?parseInt(v[1]):0,rev:(v[2]!=null)?parseInt(v[2]):0};}return {major:0,minor:0,rev:0};})();}else{_1ae=function(_1b8){_1b8=prep(_1b8);if(!_1b8){return null;}var p;var path=_1b8.path;if(_1b8.vars){var a=[];for(p in _1b8.vars){a.push(p+"="+_1b8.vars[p]);}_1b8.params.flashVars=a.join("&");delete _1b8.vars;}var s="<embed type=\"application/x-shockwave-flash\" "+"src=\""+path+"\" "+"id=\""+_1b8.id+"\" "+"width=\""+_1b8.width+"\" "+"height=\""+_1b8.height+"\""+((_1b8.style)?" style=\""+_1b8.style+"\" ":"")+"swLiveConnect=\""+_1b8.swLiveConnect+"\" "+"allowScriptAccess=\""+_1b8.params.allowScriptAccess+"\" "+"allowNetworking=\""+_1b8.params.allowNetworking+"\" "+"pluginspage=\""+window.location.protocol+"//www.adobe.com/go/getflashplayer\" ";if(_1b8.params){for(p in _1b8.params){s+=" "+p+"=\""+_1b8.params[p]+"\"";}}s+=" />";return {id:_1b8.id,markup:s};};_1af=(function(){var _1b9=navigator.plugins["Shockwave Flash"];if(_1b9&&_1b9.description){var v=_1b9.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".");return {major:(v[0]!=null)?parseInt(v[0]):0,minor:(v[1]!=null)?parseInt(v[1]):0,rev:(v[2]!=null)?parseInt(v[2]):0};}return {major:0,minor:0,rev:0};})();}dojox.embed.Flash=function(_1ba,node){if(location.href.toLowerCase().indexOf("file://")>-1){throw new Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");}this.available=dojox.embed.Flash.available;this.minimumVersion=_1ba.minimumVersion||_1b0;this.id=null;this.movie=null;this.domNode=null;if(node){node=dojo.byId(node);}setTimeout(dojo.hitch(this,function(){if(_1ba.expressInstall||this.available&&this.available>=this.minimumVersion){if(_1ba&&node){this.init(_1ba,node);}else{this.onError("embed.Flash was not provided with the proper arguments.");}}else{if(!this.available){this.onError("Flash is not installed.");}else{this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);}dojo.query("img",node).forEach("dojo.style(item, 'display', 'inline')");}}),100);};dojo.extend(dojox.embed.Flash,{onReady:function(_1bb){},onLoad:function(_1bc){},onError:function(msg){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie);},init:function(_1bd,node){this.destroy();node=dojo.byId(node||this.domNode);if(!node){throw new Error("dojox.embed.Flash: no domNode reference has been passed.");}var p=0,_1be=false;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;if(dojox.embed.Flash.initialized){this.id=dojox.embed.Flash.place(_1bd,node);this.domNode=node;setTimeout(dojo.hitch(this,function(){this.movie=this.byId(this.id,_1bd.doc);this.onReady(this.movie);this._poller=setInterval(dojo.hitch(this,function(){try{p=this.movie.PercentLoaded();}catch(e){}if(p==100){this._onload();}else{if(p==0&&this._pollCount++>this._pollMax){clearInterval(this._poller);}}}),this.pollTime);}),1);}else{dojo.query("img",node).forEach("dojo.style(item, 'display', 'inline')");}},_destroy:function(){try{this.domNode.removeChild(this.movie);}catch(e){}this.id=this.movie=this.domNode=null;},destroy:function(){if(!this.movie){return;}var test=dojo.delegate({id:true,movie:true,domNode:true,onReady:true,onLoad:true});for(var p in this){if(!test[p]){delete this[p];}}if(this._poller){dojo.connect(this,"onLoad",this,"_destroy");}else{this._destroy();}},byId:function(_1bf,doc){doc=doc||document;if(doc.embeds[_1bf]){return doc.embeds[_1bf];}if(doc[_1bf]){return doc[_1bf];}if(window[_1bf]){return window[_1bf];}if(document[_1bf]){return document[_1bf];}return null;}});dojo.mixin(dojox.embed.Flash,{minSupported:8,available:_1af.major,supported:(_1af.major>=_1af.required),minimumRequired:_1af.required,version:_1af,initialized:false,onInitialize:function(){dojox.embed.Flash.initialized=true;},__ie_markup__:function(_1c0){return _1ae(_1c0);},proxy:function(obj,_1c1){dojo.forEach((dojo.isArray(_1c1)?_1c1:[_1c1]),function(item){this[item]=dojo.hitch(this,function(){return (function(){return eval(this.movie.CallFunction("<invoke name=\""+item+"\" returntype=\"javascript\">"+"<arguments>"+dojo.map(arguments,function(item){return __flash__toXML(item);}).join("")+"</arguments>"+"</invoke>"));}).apply(this,arguments||[]);});},obj);}});dojox.embed.Flash.place=function(_1c2,node){var o=_1ae(_1c2);node=dojo.byId(node);if(!node){node=dojo.doc.createElement("div");node.id=o.id+"-container";dojo.body().appendChild(node);}if(o){node.innerHTML=o.markup;return o.id;}return null;};dojox.embed.Flash.onInitialize();})();}if(!dojo._hasResource["wsgc.js.DeferredLayover"]){dojo._hasResource["wsgc.js.DeferredLayover"]=true;dojo.provide("wsgc.js.DeferredLayover");dojo.declare("wsgc.js.DeferredLayover",null,{constructor:function(_1c3){function _1c4(o){if(document.attachEvent){var t={};for(var i in o){t[i]=o[i];}o=t;}return o;};var _1c5=dojo.query(".deferredLayover");var _1c6=[];_1c5.forEach(function(_1c7){var _1c8=dojo.connect(_1c7,"click",function(evt){dojo.stopEvent(evt);dojo.forEach(_1c6,function(_1c9){dojo.disconnect(_1c9);});_1c6=[];if(WSI.layoverC){WSI.utils.swapClasses(_1c5,"deferredLayover","layover").connect("click",WSI.layoverC,WSI.layoverC.openLayover);WSI.layoverC.openLayover(evt);}else{evt=_1c4(evt);evt.currentTarget_=evt.currentTarget;WSI.utils.loadScript(_1c3,function(){setTimeout(function(){WSI.utils.swapClasses(_1c5,"deferredLayover","layover");WSI.layoverC=new wsgc.js.LayoverBase();WSI.layoverC.openLayover(evt);});});}});_1c6.push(_1c8);});}});}if(!dojo._hasResource["wsgc.js.Selector"]){dojo._hasResource["wsgc.js.Selector"]=true;dojo.provide("wsgc.js.Selector");(function(dojo,_1ca){var _1cb=_1cc(),_1cd="_sel_",_1ce=0,_1cf="parentNode",_1d0="previousSibling",_1d1={},_1d2={">":_1d3(_1cf,true)," ":_1d3(_1cf,false),"+":_1d3(_1d0,true),"~":_1d3(_1d0,false)};dojo.mixin(wsgc.js.Selector,{is:function is(_1d4,_1d5,_1d6){var _1d7=this.parse(_1d5),_1d8,i,l;for(i=0,l=_1d7.length;i<l;++i){_1d8=_1d6?[[" ",_1d6]].concat(_1d7[i]):_1d7[i];if(this.test(_1d9([_1d4]),_1d8,_1d8.length-1)){return true;}}return false;},test:function test(_1da,_1db,_1dc){var _1dd=_1db[_1dc][0],_1de=_1db[_1dc][1],_1df=_1d2[_1dd],_1e0,_1e1;while((_1e1=_1da())){if(_1de===_1e1||_1de==="*"||(typeof _1de==="string"&&dojo._filterQueryResult([_1e1],_1de).length)){_1e0=_1df(_1e1);if(_1dc===0||this.test(_1e0,_1db,_1dc-1)){return _1e1;}if(_1da.axis===_1e0.axis&&!_1e0.singleton){break;}}}},parse:function parse(_1e2){var _1e3=[],_1e4=_1d1[_1e2]||[],_1e5,_1e6;if(_1e4.length){return _1e4;}while((_1e5=_1cb.exec(_1e2))){_1e6=(_1e5[1]&&dojo.trim(_1e5[1]))||" ";if(_1e6.charAt(0)===","){_1e4.push(_1e3);_1e3=[[dojo.trim(_1e6.substr(1))||" ",_1e5[2]]];}else{_1e3.push([_1e6,_1e5[2]]);}}if(_1e3.length){_1e4.push(_1e3);}return _1d1[_1e2]=_1e4;},closest:function closest(_1e7,_1e8){var _1e9=this.parse(_1e7),_1ea,_1eb,_1ec,_1ed,_1ee;for(var i=0,len=_1e9.length;i<len;i++){_1ee=_1e9[i];_1ea=true;_1eb=_1d2[" "](_1e8);_1ec=function(){if(_1ea){_1ea=false;return _1e8;}return _1eb();};_1ed=this.test(_1ec,_1ee,_1ee.length-1);if(_1ed){return _1ed;}}},idFor:function idFor(elem){if(!elem.id){do{var id=_1cd+_1ce++;}while(dojo.byId(id));elem.id=id;}return elem.id;}});function _1d9(_1ef){var i=0;return function arrayIterator(){return _1ef[i++];};};function _1d3(axis,_1f0){return function nextIteratorGenerator(_1f1){var _1f2=true,_1f3=function _1f3(){_1f3.axis=axis;_1f3.singleton=_1f0;if(!_1f0||_1f2){_1f2=false;while((_1f1=_1f1[axis])&&_1f1.nodeType!==1){}return _1f1;}};return _1f3;};};function _1cc(){return /((?:\s+(?![>+~,])|\s*(?:,\s*)?[>+~]\s*|\s*,\s*|^\s*))((?:\*|[a-z_\\][a-z0-9_\\|-]*)?(?:(?:[.#][a-z_\\][a-z0-9_\\|-]*|(?::not\(\s*(?:\*|[.#]?[a-z_\\][a-z0-9_\\|-]*|\[\s*[a-z_\\][a-z0-9_\\|-]*\s*(?:[~|^$*]?=\s*(?:'[^']*'|"[^"]*")\s*)?\]|::?[a-z_\\][a-z0-9_\\|-]*(?:\((?:'[^']*'|"[^"]*"|[^)])*\))?)\s*\))|::?[a-z_\\][a-z0-9_\\|-]*(?:\((?:'[^']*'|"[^"]*"|[^)])*\))?|\[\s*[a-z_\\][a-z0-9_\\|-]*\s*(?:[~|^$*]?=\s*(?:'[^']*'|"[^"]*")\s*)?\])*))/ig;};}(dojo));}if(!dojo._hasResource["wsgc.js.Events"]){dojo._hasResource["wsgc.js.Events"]=true;dojo.provide("wsgc.js.Events");(function(dojo,_1f4){WSI=window.WSI||{};WSI.Events=dojo.mixin(wsgc.js.Events,wsgc.js.Selector,{delegate:function(_1f5,_1f6,_1f7,_1f8){if(!_1f8){_1f8=_1f7;_1f7=dojo.body();}_1f5=_1f5.replace(/^on/,"");var self=this,_1f9=this.idFor(_1f7),_1fa=this.delegate.delegates||(this.delegate.delegates={}),_1fb=_1fa[_1f9]||(_1fa[_1f9]={}),_1fc=_1fb.events||(_1fb.events={}),_1fd=_1fc[_1f5];this.parse(_1f6);if(!_1fd){_1fd=_1fc[_1f5]=function(evt){var _1fe=_1fd.selectors,elem=evt.target,_1ff={};do{if(elem.disabled){continue;}for(var _200 in _1fe){if(_1fe.hasOwnProperty(_200)){if(_20e(_1fe[_200],_1ff)&&self.is(elem,_200,_1f7===dojo.body()?null:_1f7)){dojo.forEach(_1fe[_200],function(_201){if(!_1ff[_201]){_1ff[_201]=true;_201.call(elem,evt);}});}}}}while(elem!=evt.currentTarget&&(elem=elem.parentNode)&&elem!=document.documentElement);};if(_1f5==="focus"||_1f5==="blur"){var _202=function(evt){return _1fd(dojo.fixEvent(evt||window.event,this));};if(document.attachEvent){document.attachEvent("onfocus"+(_1f5==="blur"?"out":"in"),_1f7,_202);}else{_1f7.addEventListener(_1f5,_202,true);}}else{dojo.connect(_1f7,_1f5,_1fd);}_1fd.selectors={};}_1fd.selectors[_1f6]=_1fd.selectors[_1f6]||[];_1fd.selectors[_1f6].push(_1f8);},undelegate:function(_203,_204,_205,_206){if(!_206){if(!_205){if(typeof _204==="function"){_206=_204;_205=dojo.body();_204=null;}else{if(typeof _204==="object"){_205=_204;_204=null;}else{_205=dojo.body();}}}else{if(typeof _205==="function"){_206=_205;_205=dojo.body();}}}var _207=this.delegate.delegates||{},_208=_207[this.idFor(_205)]||{},_209=_208.events||{},_20a=_209[_203]||{},_20b=_20a.selectors||{},_20c=_20b[_204||""]||[],_20d=_206?dojo.indexOf(_20c,_206):-1;if(!_204){if(!_206){_20a.selectors={};}else{for(_204 in _20b){if(_20b.hasOwnProperty(_204)){_20c=_20b[_204];_20d=dojo.indexOf(_20c,_206);if(_20d>-1){_20c.splice(_20d,1);}}}}}else{if(!_20c||(_206&&_20d===-1)){return;}else{if(_206){_20c.splice(_20d,1);}else{_20b[_204]=[];}}}}});function _20e(_20f,_210){return dojo.some(_20f,function(_211){return !_210[_211];});};if(dojo){dojo.delegateEvent=WSI.Events.delegate;dojo.undelegateEvent=WSI.Events.undelegate;}}(dojo));}if(!dojo._hasResource["wsgc.js.MetricsWrapper"]){dojo._hasResource["wsgc.js.MetricsWrapper"]=true;dojo.provide("wsgc.js.MetricsWrapper");(function(dojo,_212){WSI.Events.delegate("click","[data-metrics],[metrics]",function(evt){try{var _213=dojo.attr(this,"data-metrics");if(!_213){_213=dojo.attr(this,"metrics");}if(evt.target.type==="checkbox"){_213=_213.replace("Checkbox_$_State",evt.target.checked?"checked":"unchecked");}eval(_213);}catch(err){}});}(dojo));}if(!dojo._hasResource["wsgc.js.Tabs"]){dojo._hasResource["wsgc.js.Tabs"]=true;dojo.provide("wsgc.js.Tabs");(function(dojo,_214){var _215=WSI.isIPad;WSI.Events.delegate("click",".tabsWidget>:first-child>.tab",function(evt){dojo.stopEvent(evt);if(!dojo.hasClass(this,"active")){var tab=new Tab(this);tab.tabsAndContents.query(">.active").removeClass("active");tab.tabsAndContents.query(">:nth-child("+tab.position+")").addClass("active");dojo.publish("/tab/click",[tab]);}});if(_215){dojo.subscribe("/tab/click",function(_216){_217(_216);});dojo.addOnLoad(function(){dojo.query(".tabsWidget>:first-child()>.tab.active").forEach(function(_218){_217(new Tab(_218));});});function _217(tab){dojo.query(".tabScrollbar",tab.widget).remove();var _219=dojo.contentBox(tab.content),_21a=dojo.query(".scroll-contents",tab.content)[0],_21b=dojo.marginBox(_21a);if(_21b.h>_219.h){var _21c=dojo.place("<div class=\"tabScrollbar\"><div class=\"tabScroll\"/></div>",tab.widget,"last"),_21d=_21c.firstChild,_21e=_219.h*_219.h/_21b.h,_21f=dojo.style(_21d,"marginTop")+dojo.style(_21d,"marginBottom"),_220=_219.h-_21e-_21f,_221=_21b.h-_219.h,_222,_223;function _224(evt){_222=evt.targetTouches[0].clientY;_223=tab.content.scrollTop;};function _225(evt){if(evt.touches.length===1){dojo.stopEvent(evt);var _226=evt.targetTouches[evt.touches.length-1].clientY-_222;tab.content.scrollTop=_223-_226;}};function _227(evt){_21d.style.top=(_220*(tab.content.scrollTop/_221))+"px";};if(tab.widget.disconnectPreviousActiveTabEvents){tab.widget.disconnectPreviousActiveTabEvents();}tab.widget.disconnectPreviousActiveTabEvents=function(){_21a.removeEventListener("touchstart",_224);_21a.removeEventListener("touchmove",_225);tab.content.removeEventListener("scroll",_227);};_21d.style.height=_21e+"px";_21a.addEventListener("touchstart",_224);_21a.addEventListener("touchmove",_225);tab.content.addEventListener("scroll",_227);_21d.addEventListener("touchstart",function(evt){dojo.stopEvent(evt);_222=evt.targetTouches[0].clientY;_223=tab.content.scrollTop;});_21d.addEventListener("touchmove",function(evt){dojo.stopEvent(evt);var _228=evt.targetTouches[evt.touches.length-1].clientY-_222;tab.content.scrollTop=_223+(_221*(_228/_220));});_21c.addEventListener("touchstart",function(evt){dojo.stopEvent(evt);if(evt.targetTouches[0].clientY<dojo.position(_21d,true).y){tab.content.scrollTop-=_219.h;}else{tab.content.scrollTop+=_219.h;}});}};}function Tab(tab){this.tab=tab;this.parent=tab.parentNode;this.widget=this.parent.parentNode;this.tabsAndContents=dojo.query(">*",this.widget);this.position=dojo.query(">.tab",this.parent).indexOf(tab)+1;this.content=dojo.query(">:nth-child(2)>:nth-child("+this.position+")",this.widget)[0];};}(dojo));}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(args){var _229=this;dojo.mixin(_229,args);_229.node=args.node;_229._showArgs=dojo.mixin({},args);_229._showArgs.node=_229.node;_229._showArgs.duration=_229.showDuration;_229.showAnim=_229.showFunc(_229._showArgs);_229._hideArgs=dojo.mixin({},args);_229._hideArgs.node=_229.node;_229._hideArgs.duration=_229.hideDuration;_229.hideAnim=_229.hideFunc(_229._hideArgs);dojo.connect(_229.showAnim,"beforeBegin",dojo.hitch(_229.hideAnim,"stop",true));dojo.connect(_229.hideAnim,"beforeBegin",dojo.hitch(_229.showAnim,"stop",true));},show:function(_22a){return this.showAnim.play(_22a||0);},hide:function(_22b){return this.hideAnim.play(_22b||0);}});}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_22c={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _22d=function(_22e){this._index=-1;this._animations=_22e||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};d.extend(_22d,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_22f,_230){if(!this._current){this._current=this._animations[this._index=0];}if(!_230&&this._current.status()=="playing"){return this;}var _231=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_232=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_233=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(_231);d.disconnect(_232);d.disconnect(_233);});if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){d.disconnect(this._onEndCtx);}this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_234,_235){this.pause();var _236=this.duration*_234;this._current=null;d.some(this._animations,function(a){if(a.duration<=_236){this._current=a;return true;}_236-=a.duration;return false;});if(this._current){this._current.gotoPercent(_236/this._current.duration,_235);}return this;},stop:function(_237){if(this._current){if(_237){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}if(this._onEndCtx){d.disconnect(this._onEndCtx);}}});d.extend(_22d,_22c);dojo.fx.chain=function(_238){return new _22d(_238);};var _239=function(_23a){this._animations=_23a||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(_23a,function(a){var _23b=a.duration;if(a.delay){_23b+=a.delay;}if(this.duration<_23b){this.duration=_23b;}this._connects.push(d.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var self=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(d.connect(self._pseudoAnimation,evt,function(){self._fire(evt,arguments);}));});};d.extend(_239,{_doAction:function(_23c,args){d.forEach(this._animations,function(a){a[_23c].apply(a,args);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_23d,args){var t=this._pseudoAnimation;t[_23d].apply(t,args);},play:function(_23e,_23f){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_240,_241){var ms=this.duration*_240;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_241);});this._call("gotoPercent",arguments);return this;},stop:function(_242){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){d.forEach(this._connects,dojo.disconnect);}});d.extend(_239,_22c);dojo.fx.combine=function(_243){return new _239(_243);};dojo.fx.wipeIn=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _244=d.style(node,"height");return Math.max(_244,1);}},end:function(){return node.scrollHeight;}}}},args));d.connect(anim,"onEnd",function(){s.height="auto";s.overflow=o;});return anim;};dojo.fx.wipeOut=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{end:1}}},args));d.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});d.connect(anim,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return anim;};dojo.fx.slideTo=function(args){var node=args.node=d.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=d.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=d.animateProperty(d.mixin({properties:{top:args.top||0,left:args.left||0}},args));d.connect(anim,"beforeBegin",anim,init);return anim;};})();}if(!dojo._hasResource["dojo.fx.easing"]){dojo._hasResource["dojo.fx.easing"]=true;dojo.provide("dojo.fx.easing");dojo.fx.easing={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-dojo.fx.easing.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return dojo.fx.easing.bounceIn(n*2)/2;}return (dojo.fx.easing.bounceOut(n*2-1)/2)+0.5;}};}if(!dojo._hasResource["wsgc.js.Scroller"]){dojo._hasResource["wsgc.js.Scroller"]=true;dojo.provide("wsgc.js.Scroller");(function(dojo,_245){var _246={},_247="disabled",_248,_249={duration:450,rate:20,easing:dojo.fx.easing.quadInOut,pageSize:0};WSI.Events.delegate("click",".scroller-container>.control",function(evt){dojo.stopEvent(evt);if(!dojo.hasClass(this,_247)){var _24a=wsgc.js.Scroller.get(this.parentNode);var _24b=dojo.hasClass(this,"btn-next");if(_24b){_24a.next();}else{_24a.prev();}}});dojo.declare("wsgc.js.Scroller",null,{constructor:function(_24c){_246[_24d(_24c)]=this;this.widget=_24c;this.controls=dojo.query(">.control",this.widget);this.scroll=dojo.query(">.scroller",this.widget)[0];this.scrollerContainer=this.scroll.parentNode;this.isVertical=dojo.hasClass(this.scrollerContainer,"vertical");this.itemContainer=dojo.query(">.panel",this.scroll)[0];this.items=dojo.query(">*:not(.hide)",this.itemContainer);this.scrollSize=dojo.contentBox(this.scroll);var _24e=this.items.length?dojo.position(this.items[0]):{y:0,x:0},_24f=this.items.length>1?dojo.position(this.items[1]):_24e,_250=dojo.marginBox(this.itemContainer);this.itemOffset={h:_24f.y-_24e.y,w:_24f.x-_24e.x};if(this.isVertical){this.item=-Math.round(_250.t/this.itemOffset.h);this.itemsPerPage=Math.round(this.scrollSize.h/this.itemOffset.h);}else{this.item=-Math.round(_250.l/this.itemOffset.w);this.itemsPerPage=Math.round(this.scrollSize.w/this.itemOffset.w);}this.options=dojo.mixin({},_249,dojo.fromJson(dojo.attr(this.widget,"data-scroller")||"{}"));if(typeof this.options.easing=="string"){this.options.easing=eval(this.options.easing);}this.pageSize=this.options.pageSize||this.itemsPerPage;},scrollTo:function(_251){if(!_248&&_251>=this.itemsPerPage){_252(this,this.pageSize*Math.floor(_251/this.itemsPerPage));}},next:function(){_252(this,this.pageSize);},prev:function(){_253(this,this.pageSize);}});dojo.mixin(wsgc.js.Scroller,{get:function(_254){return _246[_24d(_254)]||new wsgc.js.Scroller(_254);}});var _255=0;function _24d(_256){return _256.id||(_256.id="_scroller"+_255++);};function _252(_257,_258){if(!_248&&_257.item<_257.items.length-_257.itemsPerPage){_257.item+=_258;var _259=dojo.marginBox(_257.itemContainer);if(_257.isVertical){_259.t-=(_257.itemOffset.h*_258);}else{_259.l-=(_257.itemOffset.w*_258);}dojo.fx.slideTo(dojo.mixin({},_257.options,{node:_257.items[0].parentNode,left:_259.l,top:_259.t,onEnd:function(){if(_257.item>=_257.items.length-_257.itemsPerPage){_257.controls.filter(".btn-next").addClass(_247);}_248=false;}})).play();_248=true;_257.controls.filter(".btn-prev").removeClass(_247);}};function _253(_25a,_25b){if(!_248&&_25a.item>0){_25a.item-=_25b;var _25c=dojo.marginBox(_25a.itemContainer);if(_25a.isVertical){_25c.t+=(_25a.itemOffset.h*_25b);}else{_25c.l+=(_25a.itemOffset.w*_25b);}dojo.fx.slideTo(dojo.mixin({},_25a.options,{node:_25a.itemContainer,left:_25c.l,top:_25c.t,onEnd:function(){if(_25a.item===0){_25a.controls.filter(".btn-prev").addClass(_247);}_248=false;}})).play();_248=true;_25a.controls.filter(".btn-next").removeClass(_247);}};}(dojo));}if(!dojo._hasResource["wsgc.js.Image"]){dojo._hasResource["wsgc.js.Image"]=true;(function(dojo,_25d){var _25e={duration:500,easing:dojo.fx.easing.quadInOut};WSI.Image=dojo.mixin(dojo.provide("wsgc.js.Image"),{swap:function(_25f,url,_260,_261){if(dojo.isFunction(_260)){_261=_260;_260={};}var _262=dojo.mixin({},_260,_25e);var _263=dojo.marginBox(_25f),_264=dojo.position(_25f);var _265=this.clone(_25f),self=this;dojo.style(_265,{"position":"absolute","top":"0px","left":"0px","opacity":0});var _266;var _267=setTimeout(function(){_266=dojo.clone(WSI.throbber);dojo.style(_266,{"position":"absolute","top":(_263.t+(_263.h/2))+"px","left":(_263.l+(_263.w/2))+"px"});dojo.place(_266,_25f,"after");},175);this.loadWithCallback(_265,url,function(){if(_267){clearTimeout(_267);_267=null;}setTimeout(function(){if(_266){dojo.destroy(_266);}},250);dojo.place(_265,_25f,"before");var _268=dojo.marginBox(_265);var _269;var _26a=[dojo.fadeOut(dojo.mixin({node:_25f},_262)),dojo.fadeIn(dojo.mixin({node:_265},_262))];if(_268.h>_263.h){var _26b="<div class='spacer' style='position: relative; height: 0px; width: 1px; visibility: hidden;'></div>";dojo.place(_26b,_25f,"after");var _26c=dojo.query(".spacer")[0];var _26d=Math.max(_268.h-_263.h,0);_26a.push(dojo.animateProperty(dojo.mixin({node:_26c,duration:150,properties:{height:_26d}},_262)));}var anim=dojo.fx.combine(_26a);dojo.connect(anim,"onEnd",function(){var _26e=self.clone(_25f);dojo.style(_26e,"opacity","1");_26e.id=_25f.id;self.loadWithCallback(_26e,dojo.attr(_265,"src"),function(){dojo.place(_26e,_25f,"replace");dojo.destroy(_26c);dojo.destroy(_265);if(_261){_261(_26e);}});});anim.play();});},loadWithCallback:function(_26f,url,fn){var _270="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",_271=dojo.connect(_26f,"onload",function(){if(_26f.src!==_270){fn();}dojo.disconnect(_271);});dojo.attr(_26f,"src",url);if(!dojo.isIE&&(_26f.complete||typeof _26f.complete==="undefined")){_26f.src=_270;_26f.src=url;}},clone:function(_272){var _273=new Image();dojo.forEach(["alt","class","title"],function(name){var val=dojo.attr(_272,name);if(val){dojo.attr(_273,name,val);}});return _273;}});}(dojo));}if(!dojo._hasResource["wsgc.js.Thumbnail"]){dojo._hasResource["wsgc.js.Thumbnail"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.Thumbnail");(function(dojo,_274){WSI.Events.delegate("click",".thumbnailWidget",function(evt){dojo.stopEvent(evt);var _275=dojo.fromJson(dojo.attr(this,"data-thumbnail")||"{}");dojo.publish("/thumbnail/click",[{href:this.href||_275.href,alt:_275.alt||"",elem:this,target:this.target||_275.target,map:_275.map,options:_275}]);});WSI.Thumbnail=dojo.mixin(wsgc.js.Thumbnail,{subscribe:function(_276,fn){if(typeof _276==="string"){_276=[_276];}dojo.subscribe("/thumbnail/click",function(_277){if(_277&&_277.target&&dojo.indexOf(_276,_277.target)>-1){fn(_277);}});}});var _278={};dojo.subscribe("/thumbnail/click",function(_279){if(!_278[_279.target]){var _27a=dojo.query("#"+_279.target+".thumbnailTarget");if(_27a.length){if(_27a[0].nodeName=="IMG"){if(_27a[0].src!=_279.href){_278[_279.target]=true;WSI.Image.swap(_27a[0],_279.href,function(_27b){if(_279.map){dojo.attr(_27b,"useMap",_279.map);}_278[_279.target]=false;});}}else{WSI.utils.loadFragment(dojo.mixin({url:_279.href,load:function(data){_27a.html(data);}},_279.options));}}}});function _27c(href){var _27d=href.match(/#.*/);return (_27d!==null)?_27d[0]:href;};}(dojo));}if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.window.getBox=function(){var _27e=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _27f=dojo._docScroll();return {w:_27e.clientWidth,h:_27e.clientHeight,l:_27f.x,t:_27f.y};};dojo.window.get=function(doc){if(dojo.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};dojo.window.scrollIntoView=function(node,pos){try{node=dojo.byId(node);var doc=node.ownerDocument||dojo.doc,body=doc.body||dojo.body(),html=doc.documentElement||body.parentNode,isIE=dojo.isIE,isWK=dojo.isWebKit;if((!(dojo.isMoz||isIE||isWK||dojo.isOpera)||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _280=doc.compatMode=="BackCompat",_281=_280?body:html,_282=isWK?body:_281,_283=_281.clientWidth,_284=_281.clientHeight,rtl=!dojo._isBodyLtr(),_285=pos||dojo.position(node),el=node.parentNode,_286=function(el){return ((isIE<=6||(isIE&&_280))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_286(node)){return;}while(el){if(el==body){el=_282;}var _287=dojo.position(el),_288=_286(el);if(el==_282){_287.w=_283;_287.h=_284;if(_282==html&&isIE&&rtl){_287.x+=_282.offsetWidth-_287.w;}if(_287.x<0||!isIE){_287.x=0;}if(_287.y<0||!isIE){_287.y=0;}}else{var pb=dojo._getPadBorderExtents(el);_287.w-=pb.w;_287.h-=pb.h;_287.x+=pb.l;_287.y+=pb.t;}if(el!=_282){var _289=el.clientWidth,_28a=_287.w-_289;if(_289>0&&_28a>0){_287.w=_289;if(isIE&&rtl){_287.x+=_28a;}}_289=el.clientHeight;_28a=_287.h-_289;if(_289>0&&_28a>0){_287.h=_289;}}if(_288){if(_287.y<0){_287.h+=_287.y;_287.y=0;}if(_287.x<0){_287.w+=_287.x;_287.x=0;}if(_287.y+_287.h>_284){_287.h=_284-_287.y;}if(_287.x+_287.w>_283){_287.w=_283-_287.x;}}var l=_285.x-_287.x,t=_285.y-Math.max(_287.y,0),r=l+_285.w-_287.w,bot=t+_285.h-_287.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);_285.x+=el.scrollLeft;el.scrollLeft+=(isIE>=8&&!_280&&rtl)?-s:s;_285.x-=el.scrollLeft;}if(bot*t>0){_285.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_285.y-=el.scrollTop;}el=(el!=_282)&&!_288&&el.parentNode;}}catch(error){node.scrollIntoView(false);}};}if(!dojo._hasResource["wsgc.js.Overlay"]){dojo._hasResource["wsgc.js.Overlay"]=true;dojo.provide("wsgc.js.Overlay");(function(dojo,_28b){var _28c={id:"",classname:"",mask:true,loadingThrobber:true,fixedScroll:true,destroyOnHide:true,preventCache:true},_28d={},_28e,_28f=".overlayMask,.overlayScroll,.overlayCloseButton",_290="",_291=WSI.isIPad,_292,_293=["onLoad","onShow","onShowing","onShown","onHide","onHidden","onDestroy","onRefresh"];dojo.addOnLoad(function(){WSI.Events.delegate("click",".overlayTrigger",function(evt){var _294=dojo.mixin({},dojo.fromJson(dojo.attr(this,"data-overlay")||"{}")),data=dojo.fromJson(dojo.attr(this,"data-overlaydata")||"{}"),href=dojo.attr(this,"href");wsgc.js.Overlay.trigger(_294,data,href);dojo.stopEvent(evt);});WSI.Events.delegate("click",".cancelOverlay",function(evt){wsgc.js.Overlay.cancel();});});dojo.declare("wsgc.js.Overlay",null,{constructor:function(href,_295){var self=this,loc=document.location,_296=loc.href.substr(0,loc.href.length-loc.hash.length);this.href=href.replace(_296,"");this.options=dojo.mixin({},_28c,_295);this.registeredCallbacks={};dojo.forEach(_293,function(name){self[name]=function(){return self._callback(name);};self.registeredCallbacks[name]=self.options[name]?[self.options[name]]:[];});this.isAjax=this.href.charAt(0)!=="#";},refresh:function(){var self=this;if(this.onRefresh(this)===false){return;}this.isLoaded=false;this.load(function(){if(self.throbber){dojo.destroy(self.throbber);}self.elem=dojo.place(WSI.utils.toDom(self.template(self.data)),self.elem,"replace");var pos={marginTop:self.elem.style.marginTop,marginLeft:self.elem.style.marginLeft,top:self.elem.style.top,left:self.elem.style.left};dojo.style(self.elem,pos);if(self.onShowing(self)===false){return;}});},load:function(_297){var self=this;if(!this.isAjax||this.isLoaded){if(_297){_297();}else{self.show();}return;}if(this.onLoad(this)===false){return;}if(this.options.loadingThrobber){this.throbber=dojo.place("<div class=\"overlayThrobber\"></div>",dojo.body());this.throbber.appendChild(dojo.clone(WSI.throbber));}var _298={};if(this.options.form&&dojo.byId(this.options.form)){_298.form=dojo.byId(this.options.form);}WSI.utils.loadFragment(this.options.httpmethod||"GET",dojo.mixin(_298,{url:this.href,preventCache:this.options.preventCache,timeout:this.options.timeout||30000,load:function(data){if(data===data.replace(/<script.+type=['"]text\/html['"].+id=['"]overlayTemplate_[^>]*>([\s\S]*?)<\/script>/gim,function(_299,src){self.template=WSI.utils.template(dojo.trim(src));return "";})){_292=_292||WSI.utils.template(dojo.trim(dojo.byId("overlayTemplate_defaultAjaxWrapper").innerHTML));self.template=(function(dojo,_29a){var _29b=_292({ajaxContent:data,id:self.options.id,classname:self.options.classname});return function(){return _29b;};}(dojo));}self.isLoaded=true;if(_297){_297();}else{self.show();}},error:function(_29c){var _29d=dojo.query("#overlayTemplate_overlayError");if(_29d.length===0){wsgc.js.Overlay.hideAll();if(self.throbber){dojo.destroy(self.throbber);}setTimeout(function(){alert("Sorry, your request could not be processed at this time. Please try again later.");if(self.mask){dojo.body().removeChild(self.mask);}if(self.scroll){dojo.style(self.scroll,"overflow","hidden");dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:_290,paddingRight:_290});dojo.body().removeChild(self.scroll);}},100);}else{self.elem=dojo.create("div",{"class":"overlayErrorContainer","innerHTML":_29d.innerHTML()});if(_297){_297();}else{self.show();}}}}));},show:function(){var self=this;if(_28e){if(_28e===self){self.refresh();return;}}if(this.onShow(this)===false){return;}self.mask=self.mask||(self.options.mask&&dojo.place("<div class='overlayMask'></div>",dojo.body()));self.scroll=self.scroll||(self.options.fixedScroll&&dojo.place("<div class='overlayScroll'></div>",dojo.body()));if(self.scroll&&!_291){dojo.style(self.scroll,{"overflowX":"auto","overflowY":"scroll"});dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:"hidden",paddingRight:WSI.utils.getBrowserScrollbarWidth()+"px"});}if(self.mask&&_291){var _29e=dojo.marginBox(dojo.body());dojo.style(self.mask,{width:window.innerWidth+"px",height:_29e.h+"px"});}if(this.isAjax&&!this.isLoaded){this.load(_29f);}else{try{self.template=self.template||WSI.utils.template(dojo.trim(dojo.byId("overlayTemplate_"+self.href.substr(1)).innerHTML));}catch(e){}_29f();}function _29f(){if(_28e){if(_28e!==self){_28e.hide(true);}}self.elem=self.elem||WSI.utils.toDom(self.template(self.data));dojo.style(self.scroll||self.elem,"opacity",0);if(self.scroll){dojo.style(self.elem,"left","-9999px");}dojo.place(self.elem,self.scroll||dojo.body());if(self.onShowing(self)===false){return;}setTimeout(function(){if(self.scroll){var _2a0=dojo.position(self.elem);var _2a1=self.elem.style.height==="auto"||self.elem.style.height==="";if(_2a1){dojo.style(self.elem,"marginTop",(_2a0.h/-2)+"px");}self.center();self.resizeConnection=dojo.connect(window,"resize",dojo.hitch(self,self.center));if(self.throbber){dojo.destroy(dojo.query("img",self.throbber)[0]);}if(_291){dojo.style(self.scroll||self.elem,"opacity",1);if(self.throbber){dojo.style(self.throbber,"opacity",0);}_28e=self;dojo.query("a",self.elem)[0].focus();dojo.style(self.scroll||self.elem,"filter",_290);if(self.onShown(self)===false){return;}}else{var _2a2=[dojo.fadeIn({node:self.scroll||self.elem,duration:self.throbber?150:500,delay:self.throbber?200:100,easing:dojo.fx.easing.linear,onEnd:function(evt){if(self.elem){_28e=self;dojo.query("a",self.elem)[0].focus();dojo.style(self.scroll||self.elem,"filter",_290);if(self.onShown(self)===false){return;}self.center();}}})];if(self.throbber){_2a2.push(dojo.animateProperty({node:self.throbber,duration:350,easing:dojo.fx.easing.quintInOut,properties:{marginTop:{end:_2a0.h/-2},height:{end:_2a0.h},marginLeft:{end:_2a0.w/-2},width:{end:_2a0.w}},onEnd:function(){dojo.destroy(self.throbber);}}));_2a2.push(dojo.fadeOut({node:self.throbber,duration:300,easing:dojo.fx.easing.linear}));}dojo.fx.combine(_2a2).play();}}});};},hide:function(_2a3){if(this.onHide(this)===false){return;}var self=this;if(self.mask){dojo.body().removeChild(self.mask);}if(this.scroll){dojo.disconnect(self.resizeConnection);self.resizeConnection=null;}if(_291||_2a3){dojo.style(self.scroll||self.elem,"opacity",0);_28e=null;dojo.body().removeChild(self.scroll||self.elem);if(self.options.destroyOnHide){self.destroy();}if(self.onHidden(self)===false){return;}}else{dojo.fadeOut({node:self.scroll||self.elem,duration:300,easing:dojo.fx.easing.expoOut,onEnd:function(evt){_28e=null;if(self.scroll){dojo.style(self.scroll,"overflow","hidden");dojo.style(!dojo.isFF?dojo.doc.documentElement:dojo.body(),{overflow:_290,paddingRight:_290});}dojo.body().removeChild(self.scroll||self.elem);if(self.options.destroyOnHide){self.destroy();}if(self.onHidden(self)===false){return;}}}).play();}},destroy:function(){if(this.onDestroy(this)===false){return;}dojo.destroy(this.elem);this.elem=null;delete this.elem;if(this.scroll){dojo.destroy(this.scroll);this.scroll=null;}if(this.mask){dojo.destroy(this.mask);this.mask=null;}this.template=null;this.isLoaded=false;},center:function(){var _2a4=dojo.position(this.elem),_2a5=dojo.window.getBox(),_2a6=false,_2a7={left:_290,top:_290,marginTop:(_2a4.h/-2)+"px",marginLeft:_290};if(_291){_2a5={l:window.pageXOffset,t:window.pageYOffset,w:window.innerWidth,h:window.innerHeight};}else{_2a5.t=_2a5.l=0;}_2a5.w-=WSI.utils.getBrowserScrollbarWidth();if(_2a4.w>_2a5.w){_2a7.marginLeft=0;_2a7.left=_2a5.l+"px";_2a6=true;}else{if(_291){_2a7.marginLeft=0;_2a7.left=(_2a5.l+(_2a5.w/2)-(_2a4.w/2))+"px";}}if(_2a4.h+20>_2a5.h-(_2a6?WSI.utils.getBrowserScrollbarWidth():0)){_2a7.marginTop="10px";_2a7.top=_2a5.t+"px";}else{if(_291){_2a7.marginTop="10px";_2a7.top=(_2a5.t+(_2a5.h/2)-(_2a4.h/2))+"px";}}dojo.style(this.elem,_2a7);},_callback:function(name){var self=this;var res=true;if(this.registeredCallbacks[name]){dojo.every(this.registeredCallbacks[name],function(_2a8){res=res&&(_2a8.call(self,self)!==false);return res;});}return res;},_addCallback:function(name,fn){if(this.registeredCallbacks[name]){this.registeredCallbacks[name].push(fn);}},_removeCallback:function(name,fn){if(this.registeredCallbacks[name]){if(fn){var i=this.registeredCallbacks[name].indexOf(fn);if(i!==-1){this.registeredCallbacks[name].splice(i,1);return true;}}else{this.registeredCallbacks[name]=[];return true;}}return false;}});function _2a9(href){var _2aa=href.match(/#(.*)/);return (_2aa!==null)?_2aa[0]:href;};var _2ab={getByHref:function(href,_2ac){href=_2a9(href||_2ac.href);var _2ad=_28d[href];if(_2ad){dojo.mixin(_2ad.options,_2ac);}else{_2ad=(_28d[href]=new wsgc.js.Overlay(href,_2ac));}return _2ad;},trigger:function(_2ae,data,href){overlay=wsgc.js.Overlay.getByHref(href,_2ae);overlay.data=data;overlay.show();},hide:function(href,_2af){href=_2a9(href||options.href);var _2b0=_28d[href];if(_2b0){_2b0.hide(_2af);}},refresh:function(href){href=_2a9(href||options.href);var _2b1=_28d[href];if(_2b1){_2b1.refresh();}},center:function(){if(_28e){_28e.center();}},hideAll:function(){try{_28e.hide(true);}catch(e){}return;},cancel:function(){try{_28e.hide(false);}catch(e){}return;}};dojo.forEach(_293,function(_2b2){var _2b3={};_2b3["addO"+_2b2.substr(1)]=function(fn){this._addCallback(_2b2,fn);};_2b3["removeO"+_2b2.substr(1)]=function(fn){this._removeCallback(_2b2,fn);};dojo.extend(wsgc.js.Overlay,_2b3);_2ab["addO"+_2b2.substr(1)+"ByHref"]=_2b4(_2b2);_2ab["removeO"+_2b2.substr(1)+"ByHref"]=_2b5(_2b2);});dojo.mixin(wsgc.js.Overlay,_2ab);function _2b4(name){return function(href,fn){var _2b6=wsgc.js.Overlay.getByHref(href);_2b6._addCallback(name,fn);};};function _2b5(name){return function(href,fn){var _2b7=wsgc.js.Overlay.getByHref(href);_2b7._removeCallback(name,fn);};};WSI.Events.delegate(WSI.capabilities.touch?"touchstart":"click",_28f,function(evt){if(this===evt.target&&_28e){dojo.stopEvent(evt);_28e.hide();}});dojo.connect(dojo.body(),"keypress",function(evt){if(evt.keyCode===dojo.keys.ESCAPE&&_28e){dojo.stopEvent(evt);_28e.hide();}});}(dojo));}if(!dojo._hasResource["wsgc.js.Tooltip"]){dojo._hasResource["wsgc.js.Tooltip"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.Tooltip");(function(dojo,_2b8){var _2b9=WSI.capabilities.touch,_2ba={placement:"above","style":"",id:"default",content:{},template:"",delay:300};if(!_2b9){WSI.Events.delegate("mouseover",".showTooltip",function(evt){var _2bb={},elem=this,_2bc;_2bb=new wsgc.js.Tooltip(this,WSI.dataset.get(this,"tooltip"));_2bc=dojo.connect(dojo.body(),"mousemove",function(evt){if(WSI.utils.closest(".showTooltip",evt.target)!==elem){dojo.disconnect(_2bc);_2bb.hide();}});});}dojo.declare("wsgc.js.Tooltip",null,{constructor:function(elem,_2bd){var _2be;this.options=dojo.mixin({},_2ba,_2bd);this.elem=elem;if(_2bd.template){_2be=WSI.utils.template(_2bd.template);}else{if(dojo.byId("template-tooltip-"+this.options.id)){_2be=WSI.utils.template(dojo.trim(dojo.byId("template-tooltip-"+this.options.id).innerHTML));}else{}}dojo.mixin(this.options.content,{"style":this.options.style,placement:this.options.placement});this.node=WSI.utils.toDom(_2be(this.options.content));this.setPositioning();this.show();},setPositioning:function(){var _2bf,_2c0;_2bf=dojo.position(this.elem,true);_2c0=this.getDimensions();switch(this.options.placement){case "above":this.position={x:_2bf.x+_2bf.w/2-_2c0.w/2,y:_2bf.y-_2c0.h};break;case "below":this.position={x:_2bf.x+_2bf.w/2-_2c0.w/2,y:_2bf.y+_2bf.h};break;case "left":this.position={x:_2bf.x-_2c0.w,y:_2bf.y+_2bf.h/2-_2c0.h/2};break;case "right":this.position={x:_2bf.x+_2bf.w,y:_2bf.y+_2bf.h/2-_2c0.h/2};break;}},getDimensions:function(){var _2c1;dojo.style(this.node,{position:"absolute",top:"0px",left:"0px"});dojo.place(this.node,dojo.body());_2c1=dojo.position(this.node,true);this.node.parentNode.removeChild(this.node);dojo.removeAttr(this.node,"style");return _2c1;},show:function(){dojo.style(this.node,{top:(this.position.y||0)+"px",left:(this.position.x||0)+"px",position:"absolute",opacity:0});dojo.place(this.node,dojo.body());dojo.fadeIn({node:this.node,duration:100,delay:this.options.delay}).play();},hide:function(){var node=this.node;dojo.fadeOut({node:this.node,duration:100,onEnd:function(){dojo.destroy(node);}}).play();}});}(dojo));}if(!dojo._hasResource["wsgc.js.SwatchTooltips"]){dojo._hasResource["wsgc.js.SwatchTooltips"]=true;WSI=window.WSI||{};dojo.provide("wsgc.js.SwatchTooltips");(function(dojo,_2c2){var _2c3=WSI.capabilities.touch;if(!_2c3){WSI.Events.delegate("mouseover","ul.graphical-att>li>a",function(evt){var _2c4={},elem=this,_2c5;_2c4=new wsgc.js.Tooltip(this,{"id":"swatch",content:{colorSrc:this.href,colorName:this.title}});_2c5=dojo.connect(dojo.body(),"mousemove",function(evt){if(WSI.utils.closest("a",evt.target)!==elem){dojo.disconnect(_2c5);_2c4.hide();}});});}}(dojo));}if(!dojo._hasResource["wsgc.js.Dataset"]){dojo._hasResource["wsgc.js.Dataset"]=true;(function(dojo,_2c6){var _2c7="data-";function _2c8(_2c9){return /^\s*{.*}\s*$/.test(_2c9)?dojo.fromJson(_2c9):(_2c9||{});};function _2ca(attr){return _2c7+attr.toLowerCase();};WSI.dataset=dojo.mixin(dojo.provide("wsgc.js.Dataset"),{get:function get(elem,attr,_2cb){if(_2cb){var name=_2ca(attr),_2cc={};while(elem){if(dojo.hasAttr(elem,name)){_2cc=dojo.mixin(get(elem,attr),_2cc);}elem=elem.parentNode;}return _2cc;}else{return _2c8(elem.getAttribute(_2ca(attr))||"{}");}},set:function(elem,attr,_2cd){elem.setAttribute(_2ca(attr),dojo.isObject(_2cd)?dojo.toJson(_2cd):_2cd);},"delete":function(elem,attr){elem.removeAttribute(_2ca(attr));},keys:function(elem){var keys=[],_2ce=elem.attributes;for(var i=0,len=_2ce.length;i<len;++i){var name=_2ce[i].name;if(!name.indexOf(_2c7)){keys.push(name.substr(_2c7.length));}}return keys;},mixin:function(elem,attr,obj){this.set(elem,attr,dojo.mixin(this.get(elem,attr),obj));}});}(dojo));}if(!dojo._hasResource["wsgc.common.js.VideoPlayer"]){dojo._hasResource["wsgc.common.js.VideoPlayer"]=true;dojo.provide("wsgc.common.js.VideoPlayer");dojo.provide("wsgc.js.VideoPlayer");(function(dojo,_2cf){var _2d0=0,_2d1={youTube:{width:640,height:390,autoplay:true,theme:"light"},productBuildFlash:{width:400,height:370}};WSI.VideoPlayer=dojo.mixin(wsgc.js.VideoPlayer,{youTubeData:function(_2d2,_2d3){var _2d4="cb"+_2d0++;WSI.utils.loadScript("//gdata.youtube.com/feeds/api/videos/"+_2d2+"?v=2&alt=json-in-script&callback=WSI.VideoPlayer."+_2d4);WSI.VideoPlayer[_2d4]=function(data){delete WSI.VideoPlayer[_2d4];try{_2d3({videoId:_2d2,title:data.entry.media$group.media$title.$t,description:data.entry.media$group.media$description.$t});}catch(e){if(console&&console.error){}}};},youTubePlayer:function(elem,_2d5){var opts=dojo.mixin({},_2d1.youTube,_2d5||{},WSI.dataset.get(elem,"youtubevideo")||{}),_2d6=opts.videoId,_2d7=!dojo.isIE||dojo.isIE>7,_2d8=!!navigator.userAgent.match(/iP(?:ad|hone)/i),_2d9="//www.youtube.com/embed/"+_2d6+"?enableuseJsApi="+(_2d7?1:0)+"&origin="+WSI.config.appUrl,_2da=new YT.Player(elem,{videoId:_2d6,height:opts.height,width:opts.width,events:_2d7?{onReady:function(evt){if(!_2d8&&opts.autoplay){_2da.playVideo();}},onStateChange:function(evt){if(evt.data===0&&_2d8){_2da.seekTo(0);}}}:{},playerVars:{wmode:"transparent",autohide:1,autoplay:dojo.isIE===7&&opts.autoplay?1:0,modestbranding:_2d8?0:1,iv_load_policy:3,fs:1,cc_load_policy:0,rel:0,showsearch:0,enablejsapi:1,webkitAllowFullScreen:"webkitAllowFullScreen",mozallowfullscreen:"mozallowfullscreen",allowFullScreen:"allowFullScreen",theme:opts.theme}});},productBuildFlashPlayer:function(elem,_2db){var opts=dojo.mixin({},_2d1.productBuildFlash,_2db||{},WSI.dataset.get(elem,"productbuildflash")||{}),_2dc=opts.videoPath,_2dd=WSI.config.sessionCookieName,_2de=_2dd?("&sessionCookieName="+_2dd+"&sessionId="+(dojo.cookie(_2dd)||"")):"";new dojox.embed.Flash({path:_2dc,width:opts.width,height:opts.height,params:{wmode:"transparent",allowFullScreen:"true",flashvars:"urlbase=${rc.getRootUrl()}&swfbase="+_2dc+_2de,allowScriptAccess:"always"}},elem);}});wsgc.common.js.VideoPlayer=wsgc.js.VideoPlayer;}(dojo));}if(!dojo._hasResource["wsgc.js.Social"]){dojo._hasResource["wsgc.js.Social"]=true;dojo.provide("wsgc.js.Social");(function(dojo,_2df){dojo.declare("wsgc.js.Social",[],{constructor:function(url){this.callbacks=[];if(url&&!WSI.isRetailStoreRequest()){WSI.utils.loadScript(url);}},_callCallbacks:function(){for(var i=0,len=this.callbacks.length;i<len;++i){if(false===this.callbacks[i].apply(this,arguments)){break;}}},registerCallback:function(fn){this.callbacks.push(fn);}});dojo.declare("wsgc.js.social.Twitter",[wsgc.js.Social],{constructor:function(url){var self=this,t=window.twttr={_e:[],ready:function(f){t._e.push(f);}};t.ready(function(_2e0){_2e0.events.bind("tweet",function(evt){self._callCallbacks(evt);});});}});dojo.declare("wsgc.js.social.Facebook",[wsgc.js.Social],{constructor:function(url,_2e1){var self=this,opts={status:true,cookie:true,xfbml:true};if(_2e1){opts.appId=_2e1;}window.fbAsyncInit=function(){FB.init(opts);FB.getLoginStatus(function(_2e2){});FB.Event.subscribe("edge.create",function(r){self._callCallbacks(r);});};}});dojo.declare("wsgc.js.social.GooglePlus",[wsgc.js.Social],{constructor:function(url){var self=this;window.googlepluscallback=function(arg){self._callCallbacks(arg);};}});}(dojo));}if(!dojo._hasResource["wsgc.js.GlobalTopNav"]){dojo._hasResource["wsgc.js.GlobalTopNav"]=true;dojo.provide("wsgc.js.GlobalTopNav");(function(dojo,_2e3){var _2e4=false;var _2e5=WSI.isIPad;var _2e6=WSI.capabilities.touch;var _2e7=dojo.byId("topnav-container");if(_2e7){var _2e8=WSI.dataset.get(_2e7,"topnav");}else{return;}_2e9();_2ea();WSI.Events.delegate("mousemove",".hoverFade:not(.hoverFadeActive)",_2eb);if(_2e6){WSI.Events.delegate("touchstart",".hoverFade:not(.hoverFadeActive)",_2eb);}function _2e9(){dojo.query(".equalizeHeights").forEach(_2ec);};function _2ea(_2ed){var _2ee=dojo.query("#topnav-container .nav-menu")[0];var _2ef=50;var _2f0=200;var _2f1=function(){var _2f2=dojo.contentBox(_2ee);var _2f3=false;var _2f4=-Infinity;dojo.query(".nav-columns",_2ee).forEach(function(menu,_2f5){if(_2f5>1){dojo.style(menu,"left","auto");}var pos=dojo.marginBox(menu);var _2f6=menu;var _2f7=0;var _2f8=0;_2f3=_2f3||pos.l<_2f4;_2f4=pos.l;dojo.query(".col, .spotlight",menu).map(function(col){_2f7+=_2e8.configId==="PK"?dojo.marginBox(col).w+3:dojo.marginBox(col).w;});do{_2f8+=dojo.style(_2f6,"padding-left")+dojo.style(_2f6,"border-left-width");_2f6=_2f6.parentNode;}while(_2f6!==_2ee.parentNode);_2f7+=_2e5?1:0;if(pos.l+_2f7+_2f8>_2f2.w){dojo.style(menu,{width:_2f7+"px",left:Math.max(0,_2f2.w-(_2f7+_2f8))+"px"});}});if(_2f3&&_2ef--){setTimeout(_2f1,_2f0);}};if(_2ed){_2f1();}else{function _2f9(evt){_2f1();WSI.Events.undelegate("mouseover",_2f9);if(_2e6){WSI.Events.undelegate("touchstart",_2f9);}};WSI.Events.delegate("mouseover","#topnav-container .nav-menu li",_2f9);if(_2e6){WSI.Events.delegate("touchstart","#topnav-container .nav-menu li",_2f9);}}};function _2eb(evt){dojo.stopEvent(evt);var elem=this;var _2fa=dojo.position(elem);var _2fb=dojo.query(".hoverFadeTarget",elem);var _2fc=true;if(_2e6){var _2fd;var _2fe;dojo.connect(dojo.body(),"touchstart",function(evt){_2fd=evt.changedTouches[0].clientX;_2fe=evt.changedTouches[0].clientY;});}var _2ff=dojo.connect(dojo.body(),_2e6?"touchend":"mousemove",function(evt){if(_2e6){var _300=Math.abs(Math.abs(evt.changedTouches[0].clientX)-Math.abs(_2fd))>20||Math.abs(Math.abs(evt.changedTouches[0].clientY)-Math.abs(_2fe))>20;}var _301=!_2e6?true:!_300;if(_301){var x=(_2e6?evt.changedTouches[0].clientX:evt.clientX)-_2fa.x;var y=(_2e6?evt.changedTouches[0].clientY:evt.clientY)-_2fa.y;if((_2fc&&(x<0||x>_2fa.w||y<0||y>_2fa.h))||WSI.utils.closest(".hoverFadeActive",evt.target)!==elem){_302.stop();dojo.disconnect(_2ff);var _303=dojo.fx.combine(_2fb.map(function(_304){return dojo.animateProperty({node:_304,properties:{opacity:0},duration:50});}));dojo.connect(_303,_2fc?"onBegin":"onEnd",function(){dojo.removeClass(elem,"hoverFadeActive");});_303.play();_2fc=false;}}}),_302=dojo.fx.combine(_2fb.map(function(_305){return dojo.animateProperty({node:_305,properties:{opacity:1},delay:_2e6?0:150,duration:150});}));if(_2e6){var temp=dojo.place("<span/>",dojo.body());setTimeout(function(){dojo.body().removeChild(temp);});}dojo.connect(_302,"onEnd",function(){_2fc=false;});_302.play();dojo.addClass(elem,"hoverFadeActive");};function _306(){if(_2e8.deferLoading){var url="/cacheable/"+_2e8.generations+"/globalnav/navigation.html";var self=this;WSI.utils.loadFragment({url:url,load:function(data){var _307=WSI.utils.toDom(data);var _308=dojo.query("#topnav-container .nav-columns");dojo.query(".nav-columns",_307).forEach(function(menu,i){dojo.style(menu,"opacity",!!_308.at(i).style("opacity")?1:0);_308.at(i).replaceWith(menu);});_2e9();_2ea(true);},error:function(_309){dojo.query("#topnav-container .nav-placeholder").remove();}});}};function _2ec(_30a){var _30b=0;dojo.query(">*",_30a).forEach(function(elem){_30b=Math.max(_30b,dojo.contentBox(elem).h);}).style({minHeight:_30b+"px"});};dojo.ready(_306);}(dojo));}if(!dojo._hasResource["wsgc.common.js.RichRelevance"]){dojo._hasResource["wsgc.common.js.RichRelevance"]=true;dojo.provide("wsgc.common.js.RichRelevance");(function(dojo,_30c){var WSI=window.WSI||{},_30d,_30e=4000;WSI.rr=WSI.rr||{};_30d=WSI.rr;_30d.init=function(_30f,url,_310,_311){R3_COMMON=new r3_common();R3_COMMON.setApiKey(_30f);R3_COMMON.setBaseUrl(url);R3_COMMON.setClickthruServer(_310);R3_COMMON.setSessionId(dojo.cookie(_311));R3_COMMON.setUserId(dojo.cookie("CoreID6"));};_30d.addOnLoad=function(_312,_313){dojo.addOnLoad(function(){var _314=dojo.byId("rrRACRecsTemplate");_30d.itemTemplate=_30d.itemTemplate||WSI.utils.template(dojo.byId("rrProductRecsItemTemplate").innerHTML);if(_312){_30d.ratingTemplate=_30d.ratingTemplate||WSI.utils.template(dojo.byId("ratingTemplate").innerHTML);}_30d.pricingTemplate=_30d.pricingTemplate||WSI.utils.template(dojo.byId("pricingTemplate").innerHTML);_30d.currencyTemplate=_30d.currencyTemplate||WSI.utils.template(dojo.byId("currencyTemplate").innerHTML);_30d.renderCurrency=function(_315){return _30d.currencyTemplate({name:WSI.config.currency,intl:WSI.config.international,amount:WSI.config.international?Number(_315).toFixed(2):Number(_315).toFixed(2).replace(/(\d)(\d\d\d)(?=\.)/g,"$1,$2")});};_30d.setupPriceData=function(item){var _316=item.attr_sale==="1"?"sale":(item.attr_specialprice?"special":""),_317,_318,i,len;if(item.salepricecents!=="0"){item.attr_saleprice=item.salepricecents/100;}item.attr_price=item.pricecents/100;if(typeof WSI.ccyConv==="function"){_317=["attr_price","attr_saleprice","attr_specialprice","attr_lowestprice","attr_lowestsaleprice","attr_lowestspecialprice"];for(i=0,len=_317.length;i<len;i++){if(item[_317[i]]){item[_317[i]]=WSI.ccyConv(item[_317[i]]);}}}_318=item["attr_lowest"+_316+"price"]?_30d.renderCurrency(item["attr_lowest"+_316+"price"])+" &ndash; "+_30d.renderCurrency(item["attr_"+_316+"price"]):_30d.renderCurrency(item["attr_"+_316+"price"]);item.priceData={saleOrSpecial:_316,price:_318,regularPrice:item.attr_lowestprice?_30d.renderCurrency(item.attr_lowestprice)+" &ndash; "+_30d.renderCurrency(item.attr_price):_30d.renderCurrency(item.attr_price),hasSurcharge:false,surcharge:0};};if(_314){_30d.racRecsTemplate=_30d.racRecsTemplate||WSI.utils.template(_314.innerHTML);}});if(_313&&!_30d.racFirst){_30d.getPIPRecs();}};_30d.callback=function(recs){var _319,_31a,_31b,_31c,_31d=_30d.templateInfo,_31e,j,i,len,_31f,_320;if(recs.placements&&recs.placements.length>0){for(j=0,_31e=recs.placements.length;j<_31e;j++){_319=recs.placements[j].items;_31b=recs.placements[j].placementType;if(_31b==="item_page.searchlanding"){setupSearchLandingToggle();}if(_319.length>0){_30d.recsShown=true;_31c=[];for(i=0,len=_319.length;i<len;++i){_319[i].index=i+1;_31f=_319[i].url.indexOf("%3F")>-1?"%26":"%3F";_319[i].url=_319[i].url+_31f+encodeURIComponent("cm_src="+_30d.templateInfo[_31b].cmSrc);_319[i].cmel=_30d.templateInfo[_31b].cmEl?_30d.templateInfo[_31b].cmEl:_30d.templateInfo[_31b].cmElCat;_319[i].cmelcat=_30d.templateInfo[_31b].cmElCat;_319[i].image=_319[i].image.slice(0,-5)+_30d.templateInfo[_31b].imgSuffix+_319[i].image.slice(-4);_30d.setupPriceData(_319[i]);_31c.push(_30d.itemTemplate(_319[i]));}dojo.place(dojo.trim((WSI.utils.template(dojo.byId(_30d.templateInfo[_31b].templateId).innerHTML))({placement:recs.placements[j],items:_31c.join(""),index:j,elCat:_31d[_31b].cmElCat,cmel:_31d[_31b].cmEl?_31d[_31b].cmEl:_31d[_31b].cmElCat})),dojo.query(_31d[_31b].placeNode)[0],_31d[_31b].placeFirst?"first":"last");if(_319.length<=_30d.templateInfo[_31b].scrollLimit){dojo.query("#machine-recs-"+j+" .btn-next, #machine-recs-"+j+" .btn-prev").addClass("invisible");}}}}else{dojo.query(".rrFallback").removeClass("hide");}if(WSI.config.id==="pk"&&_30d.templateInfo["item_page.pip2"]){if(recs.placements&&recs.placements.length===0){dojo.query(".you-may-also-like").addClass("hide");}}};_30d.getPIPRecs=function(){if(WSI.isRetailStoreRequest()||typeof _30d.templateInfo==="undefined"){return;}var _321;if(R3_COMMON&&R3_COMMON.placementTypes){R3_COMMON.placementTypes="";R3_ITEM=_30c,R3_ADDTOCART=_30c;}for(_321 in _30d.templateInfo){if(_30d.templateInfo.hasOwnProperty(_321)&&_321!=="item_page.searchlanding"&&!(dojo.exists("WSI.isIPad")&&_321==="item_page.rvi1")){R3_COMMON.addPlacementType(_321);}}R3_COMMON.enableJson();R3_ITEM=new r3_item();if(WSI.primaryGroupId){R3_ITEM.setId(WSI.primaryGroupId);}else{R3_ITEM.setId(WSI.groupId);}R3_ITEM.setRecommendable(_30d.isRecommendable);if(_30d.category){R3_ITEM.addCategory(_30d.category);}RR.jsonCallback=_30d.callback;rr_flush_onload();r3();};_30d.getRACRecs=function(_322,_323){if(WSI.isRetailStoreRequest()||typeof R3_COMMON==="undefined"){return;}var key;if(typeof _323==="undefined"){_323="#racOverlay";}if(R3_COMMON&&R3_COMMON.placementTypes){R3_COMMON.placementTypes="";R3_ITEM=_30c,R3_ADDTOCART=_30c,R3_CATEGORY=_30c,R3_SEARCH=_30c;}R3_COMMON.addPlacementType("add_to_cart_page.rac1");R3_COMMON.enableJson();R3_ADDTOCART=new r3_addtocart();if(_322){for(key in _322){if(_322.hasOwnProperty(key)){R3_ADDTOCART.addItemIdToCart(key);}}}WSI.rr.racRecsShown=false;RR.jsonCallback=function(recs){var _324=WSI.rr,_325=dojo.byId("rrRACRecsTemplate"),_326,_327,i,len,_328=_324.cartType?_324.cartType.toUpperCase():"RAC",_329="Auto"+_328+"Rel",_32a;if(recs.placements&&recs.placements.length>0&&!_324.racRecsShown&&(_324.racRecsTemplate||_325)){_324.racRecsTemplate=_324.racRecsTemplate||WSI.utils.template(_325.innerHTML);_327=recs.placements[0].items;_324.racRecsShown=true;if(_327.length>0){_326=[];for(i=0,len=_327.length;i<len;++i){_327[i].index=i+1;_32a=_327[i].url.indexOf("%3F")>-1?"%26":"%3F";_327[i].url=_327[i].url+_32a+encodeURIComponent("cm_src="+_329);_327[i].cmel="AUTORACREL";_327[i].cmelcat="AUTORACREL";_327[i].image=_327[i].image.slice(0,-5)+_324.racImgSuffix+_327[i].image.slice(-4);_324.setupPriceData(_327[i]);_326.push(_324.itemTemplate(_327[i]));}dojo.query(_323+" .ymal")[0].innerHTML=dojo.trim(_324.racRecsTemplate({placement:recs.placements[0],items:_326.join("")}));dojo.query(_323+" .ymal").removeClass("hide");}}else{_324.racMerchantRecs();}};rr_flush_onload();r3();};_30d.getRecs=function(){if(WSI.isRetailStoreRequest()){return;}var _32b=WSI.rr,_32c;for(_32c in _32b.templateInfo){if(_32b.templateInfo.hasOwnProperty(_32c)){R3_COMMON.addPlacementType(_32c);}}R3_COMMON.enableJson();_32b.recsShown=false;RR.jsonCallback=_32b.callback;rr_flush_onload();r3();setTimeout(function(){if(!_32b.recsShown){_32b.recsShown=true;dojo.query(".rrFallback").removeClass("hide");for(_32c in _32b.templateInfo){dojo.query(_32b.templateInfo[_32c].placeNode).addClass("hide");}}},_30e);};_30d.addExclusions=function(_32d,_32e,max){var i,len;if(typeof max==="undefined"){max=_32e.length;}for(i=0,len=Math.min(max,_32e.length);i<len;i++){_32d(_32e[i]);}};setupSearchLandingToggle=function(){WSI.Events.delegate("click",".hide-recommendations-title, .show-recommendations-title",function(evt){dojo.stopEvent(evt);var _32f=dojo.query(".search-landing-items");if(_32f.length>0){if(dojo.hasClass(evt.target,"hide-recommendations-title")||dojo.hasClass(evt.target.parentNode,"hide-recommendations-title")){if(dojo.isIE){dojo.query("li",_32f[0]).style("visibility","hidden");}dojo.fx.wipeOut({node:_32f[0]}).play();}else{dojo.fx.wipeIn({node:_32f[0],onEnd:function(){if(dojo.isIE){dojo.query("li",_32f[0]).style("visibility","visible");}}}).play();}dojo.forEach(dojo.query("#recommendationsToggle > a, #recommendationsToggle > h2"),function(item){dojo.toggleClass(item,"hide");});}});};})(dojo);}
