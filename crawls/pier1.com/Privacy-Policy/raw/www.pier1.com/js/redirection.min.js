if (document.domain != "www.pier1.ca") {
    if (window.location.pathname != "/DailyDealy/tabid/953/Default.aspx") {
        mm = {};
        mm.tools = {};
        mm.redirection = {};
        mm.tools.hasValue = function (b) { return b !== null && b !== undefined && b !== "" };
        mm.tools.trim = function (b) { return b.replace(/^\s+|\s+$/, "") };
        mm.tools.removeQuerystringValues = function (f) {
            var d = f.indexOf("?");
            var e = f;
            if (d >= 0) {
                e = e.substring(0, d)
            }
            return e
        };
        mm.tools.getQuerystringValue = function (k, j) {
            var l = "";
            var i = j + "=";
            if (k.length > 0) {
                var g = k.indexOf(i);
                if (g !== -1) {
                    g += i.length;
                    var h = k.indexOf("&", g);
                    if (h === -1) {
                        h = k.length
                    }
                    l = k.substring(g, h)
                }
            }
            return l
        };
        mm.tools.setBlockingCookie = function () {
            var d = new Date().getTime() + (10 * 60 * 1000);
            var c = "mobile=no;";
            c += "expires=" + new Date(d).toGMTString() + ";";
            c += "path=/";
            document.cookie = c
        };
        mm.tools.hasBlockingCookie = function () {
            var c = document.cookie.split(";");
            for (var d = 0; d < c.length; d++) {
                if (c[d] == "mobile=no") {
                    return true
                }
            }
            return false
        };
        mm.redirection.isUrlMatch = function (f, d) {
            var e = d.match(f);
            return e !== null
        };
        mm.redirection.QuerystringRoute = function (j, k, l) {
            var g = j !== undefined ? j : "";
            var h = k !== undefined ? k : "";
            var i = l !== undefined ? l : "";
            this.checkForRedirection = function (a) {
                return mm.redirection.isUrlMatch(g, a)
            };
            this.getRoute = function (a) {
                var f = "";
                if (mm.tools.hasValue(i)) {
                    var e = i.match(/\{(.*?)\}/gi);
                    for (var b = 0; b < e.length; b++) {
                        var c = e[b].replace(/\{/, "").replace(/\}/, "");
                        var d = mm.tools.getQuerystringValue(a, c);
                        f += "/" + d
                    }
                }
                return h + f
            }
        };
        mm.redirection.SeoRoute = function (j, k, l) {
            var g = j !== undefined ? j : "";
            var h = k !== undefined ? k : "";
            var i = l !== undefined ? l : function () {
            };
            this.checkForRedirection = function (a) { return mm.redirection.isUrlMatch(g, a) };
            this.getRoute = function (a) { return i(a, g, h) }
        };
        mm.redirection.Controller = function () {
            var f;
            this.init = function (a) {
                if (a === undefined) {
                    a = {}
                }
                f = { isTestMode: a.isTestMode !== undefined ? a.isTestMode : false, baseMobileUrl: a.baseMobileUrl !== undefined ? a.baseMobileUrl : "", redirectExclusionsByKeyword: a.redirectExclusionsByKeyword !== undefined ? a.redirectExclusionsByKeyword : [], pageByPageRoutes: a.pageByPageRoutes !== undefined ? a.pageByPageRoutes : [], blockMobileSiteUseQuerystringValue: a.blockMobileSiteUseQuerystringValue !== undefined ? a.blockMobileSiteUseQuerystringValue : "mobile=no" }
            };
            this.redirect = function (a) {
                var c = a.toString();
                if (!h() && !f.isTestMode) {
                    return
                }
                if (j(c)) {
                    return
                }
                if (mm.tools.hasBlockingCookie()) {
                    return
                }
                if (!i(c)) {
                    return
                }
                var b = g(c);
                if (!mm.tools.hasValue(b)) {
                    b = f.baseMobileUrl
                }
                if (f.isTestMode) {
                    console.log(b);
                    return b
                } else {
                    window.location = b
                }
            };


            function g(e) {
                var d = "";
                for (var b = 0; b < f.pageByPageRoutes.length; b++) {
                    var c = f.pageByPageRoutes[b];
                    var a = c.checkForRedirection(e);
                    if (a) {
                        c = c.getRoute(e);
                        d = f.baseMobileUrl + c;
                        break
                    }
                }
                return d
            }

            function h() {
                var b = navigator.userAgent;
                var a = navigator.accept;
                if (b !== null) {
                    var d = /up.browser|up.link|iphone|android|blackberry|mini|mmp|symbian|midp|wap|pocket|psp/ig;
                    var e = new RegExp(d);
                    if (e.test(b) && b.match(/iPad/gi) === null) {
                        if (screen.height <= 1000 || screen.width <= 1000) {
                            return true
                        }
                    }
                    var m = ["acs-", "alav", "alca", "amoi",
                    "audi", "aste", "avan", "benq",
                    "bird", "blac", "blaz", "brew",
                    "cell", "cldc", "cmd-", "dang",
                    "doco", "ef81", "eric", "hipt", "inno",
                    "ipaq", "java", "jigs", "kddi",
                    "keji", "leno", "lg-c", "lg-d",
                    "lg-g", "lge-", "maui", "maxo",
                    "midp", "mits", "mmef", "mobi",
                    "mot-", "moto", "mwbp", "nec-",
                    "newt", "noki", "opwv", "palm",
                    "pana", "pant", "pdxg", "phil",
                    "play", "pluc", "port", "pre:", "prox",
                    "qtek", "qwap", "sage", "sams",
                    "sany", "sch-", "sec-", "send",
                    "seri", "sgh-", "shar", "sie-",
                    "siem", "smal", "smar", "sony",
                    "sph-", "symb", "t-mo", "teli",
                    "tim-", "tosh", "tsm-", "upg1",
                    "upsi", "vk-v", "voda", "w3c ",
                    "wap-", "wapa", "wapi", "wapp",
                    "wapr", "webc", "winw", "winw", "wurf",
                    "xda", "xda-"];
                    for (var c = 0; c < m.length; c++) {
                        if ((m[c] === b.substring(0, 3) || b.match(/webos/gi)) && (!b.match(/iPad/gi))) {
                            return true
                        }
                    }
                    if (mm.tools.hasValue(a)) {
                        if (a.indexOf("text/vnd.wap.wml") !== -1 || a.indexOf("application/vnd.wap.xhtml+xml") !== -1) {
                            return true
                        }
                    }
                }
                return false
            }

            function j(a) {
                var b = a.indexOf(f.blockMobileSiteUseQuerystringValue);
                var c = b >= 0;
                if (c) {
                    mm.tools.setBlockingCookie()
                }
                return c
            }

            function i(b) {
                var a = true;
                var m = f.redirectExclusionsByKeyword;
                if (m !== undefined && m !== null) {
                    for (var d = 0; d < m.length; d++) {
                        var e = new RegExp(m[d], "i");
                        var c = e.exec(b);
                        if (c) {
                            a = false
                        }
                    }
                }
                return a
            }
        };

        mm.redirection.seoRouteLogicForStandardCategories = function (c, b, d) {
            var g = c.slice(c.indexOf("browse/") + 7, c.length), f = 0, a = 0;
            if (g.slice(0, 1) == "0") {
                var e = g.split(".");
                if (e.length > 2) {
                    switch (e[0]) {
                        case "0100":
                            f = 467;
                            switch (e[2]) {
                                case "new-arrivals":
                                    a = 93;
                                    break;
                                case "clearance":
                                    a = 95;
                                    break;
                                case "special-savings":
                                    a = 96;
                                    break;
                                default:
                                    break
                            }
                            break;
                        case "0200":
                            f = 485;
                            switch (e[2]) {
                                case "new-arrivals":
                                    a = 103;
                                    break;
                                case "pier1-favorites":
                                    a = 104;
                                    break;
                                case "clearance":
                                    a = 105;
                                    break;
                                case "special-savings":
                                    a = 106;
                                    break
                            }
                            break;
                        case "0300":
                            f = 519;
                            switch (e[2]) {
                                case "new-arrivals":
                                    a = 159;
                                    break;
                                case "pier1-favorites":
                                    a = 160;
                                    break;
                                case "clearance":
                                    a = 161;
                                    break;
                                case "special-savings":
                                    a = 162;
                                    break
                            }
                            break;
                        case "0400":
                            f = 493;
                            switch (e[2]) {
                                case "new-arrivals":
                                    a = 113;
                                    break;
                                case "pier1-favorites":
                                    a = 114;
                                    break;
                                case "clearance":
                                    a = 112;
                                    break;
                                case "special-savings":
                                    a = 116;
                                    break
                            }
                            break;
                        case "0500":
                            f = 508;
                            switch (e[2]) {
                                case "new-arrivals":
                                    a = 138;
                                    break;
                                case "pier1-favorites":
                                    a = 139;
                                    break;
                                case "clearance":
                                    a = 140;
                                    break;
                                case "special-savings":
                                    a = 141;
                                    break
                            }
                            break;
                        case "0600":
                            f = 514;
                            switch (e[2]) {
                                case "new-arrivals":
                                    a = 147;
                                    break;
                                case "pier1-favorites":
                                    a = 148;
                                    break;
                                case "clearance":
                                    a = 149;
                                    break;
                                case "special-savings":
                                    a = 150;
                                    break
                            }
                            break;
                        case "0700":
                            f = 501;
                            switch (e[2]) {
                                case "new-arrivals":
                                    a = 113;
                                    break;
                                case "pier1-favorites":
                                    a = 127;
                                    break;
                                case "clearance":
                                    a = 128;
                                    break;
                                case "special-savings":
                                    a = 116;
                                    break;
                                case "see-all":
                                    a = 130;
                                    break
                            }
                            break
                    }
                    return d + "/" + a + "/tab/" + f
                } else {
                    switch (e[0]) {
                        case "003":
                            f = 525;
                            a = 165;
                            break;
                        case "004":
                            f = 525;
                            a = 166;
                            break;
                        case "0105":
                            f = 467;
                            a = 92;
                            break;
                        case "0201":
                            f = 485;
                            a = 99;
                            break;
                        case "0202":
                            f = 485;
                            a = 100;
                            break;
                        case "0203":
                            f = 485;
                            a = 101;
                            break;
                        case "0204":
                            f = 485;
                            a = 102;
                            break;
                        case "0304":
                            f = 519;
                            a = 157;
                            break;
                        case "0306":
                            f = 519;
                            a = 158;
                            break;
                        case "0301":
                            f = 519;
                            catid = 156;
                            break;
                        case "0303":
                            f = 519;
                            a = 155;
                            break;
                        case "0302":
                            f = 519;
                            a = 154;
                            break;
                        case "0305":
                            f = 519;
                            a = 153;
                            break;
                        case "0401":
                            f = 493;
                            a = 109;
                            break;
                        case "0402":
                            f = 493;
                            a = 110;
                            break;
                        case "0403":
                            f = 493;
                            a = 111;
                            break;
                        case "0404":
                            f = 493;
                            catid = 112;
                            break;
                        case "0501":
                            f = 508;
                            a = 132;
                            break;
                        case "0502":
                            f = 508;
                            a = 133;
                            break;
                        case "0503":
                            f = 508;
                            a = 134;
                            break;
                        case "0504":
                            f = 508;
                            a = 135;
                            break;
                        case "0505":
                            f = 508;
                            a = 136;
                            break;
                        case "0506":
                            f = 508;
                            a = 137;
                            break;
                        case "0601":
                            f = 514;
                            a = 144;
                            break;
                        case "0602":
                            f = 514;
                            a = 145;
                            break;
                        case "0603":
                            f = 514;
                            a = 146;
                            break;
                        case "0701":
                            f = 501;
                            a = 119;
                            break;
                        case "0702":
                            f = 501;
                            a = 120;
                            break;
                        case "0703":
                            f = 501;
                            a = 125;
                            break;
                        case "0704":
                            f = 501;
                            a = 121;
                            break
                    }
                }
            } else {
                var e = g.split(".");
                f = e[0];
                a = e[1]
            }
            return d + "/" + a + "/tab/" + f
        };
        mm.redirection.seoRouteLogicForLongRoutes = function (c, b, d) {
            if (c.indexOf("/ProductId") != -1) {
                var e = c.slice(c.indexOf("ProductId/") + 10, c.indexOf("/ProductName"));
                return d + "/item/" + e
            } else {
                var f = c.slice(c.indexOf("tabid/") + 6, c.indexOf("/List"));
                var a = c.slice(c.indexOf("CategoryID/") + 11, c.indexOf("/Level"));
                return d + "/category/" + a + "/tab/" + f
            }
        };
        (function () {
            var a = new mm.redirection.Controller();
            a.init({ baseMobileUrl: "http://m.pier1.com", pageByPageRoutes: [new mm.redirection.SeoRoute("http://www.pier1.com/Catalog", "/#products", mm.redirection.seoRouteLogicForLongRoutes), new mm.redirection.SeoRoute("http://www.pier1.com/catalog/browse", "/#products/category", mm.redirection.seoRouteLogicForStandardCategories), ] });
            a.redirect(window.location)
        })();
    }
}