/* Metacafe Copyright - http://www.metacafe.com/ */
/* Files included: Initializer.js.tmp LazyLoad.js.tmp RemoteLoader.js.tmp _GoogleAnalytics.js.tmp BaseClasses.js.tmp AdManager.js.tmp Kpi.js.tmp _1mootools-1.3.js.tmp 6Facebook.js.tmp 3Ads.js.tmp comscore.php.tmp _2MootoolsExtensions.js.tmp AutoComplete.js.tmp _4swfobject.js.tmp */

(function(){this.MooTools={version:'1.3',build:'a3eed692dd85050d80168ec2c708efe901bb7db3'};var typeOf=this.typeOf=function(item){if(item==null)return'null';if(item.$family)return item.$family();if(item.nodeName){if(item.nodeType==1)return'element';if(item.nodeType==3)return(/\S/).test(item.nodeValue)?'textnode':'whitespace';}else if(typeof item.length=='number'){if(item.callee)return'arguments';if('item'in item)return'collection';}
return typeof item;};var instanceOf=this.instanceOf=function(item,object){if(item==null)return false;var constructor=item.$constructor||item.constructor;while(constructor){if(constructor===object)return true;constructor=constructor.parent;}
return item instanceof object;};var Function=this.Function;var enumerables=true;for(var i in{toString:1})enumerables=null;if(enumerables)enumerables=['hasOwnProperty','valueOf','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','constructor'];Function.prototype.overloadSetter=function(usePlural){var self=this;return function(a,b){if(a==null)return this;if(usePlural||typeof a!='string'){for(var k in a)self.call(this,k,a[k]);if(enumerables)for(var i=enumerables.length;i--;){k=enumerables[i];if(a.hasOwnProperty(k))self.call(this,k,a[k]);}}else{self.call(this,a,b);}
return this;};};Function.prototype.overloadGetter=function(usePlural){var self=this;return function(a){var args,result;if(usePlural||typeof a!='string')args=a;else if(arguments.length>1)args=arguments;if(args){result={};for(var i=0;i<args.length;i++)result[args[i]]=self.call(this,args[i]);}else{result=self.call(this,a);}
return result;};};Function.prototype.extend=function(key,value){this[key]=value;}.overloadSetter();Function.prototype.implement=function(key,value){this.prototype[key]=value;}.overloadSetter();var slice=Array.prototype.slice;Function.from=function(item){return(typeOf(item)=='function')?item:function(){return item;};};Array.from=function(item){if(item==null)return[];return(Type.isEnumerable(item)&&typeof item!='string')?(typeOf(item)=='array')?item:slice.call(item):[item];};Number.from=function(item){var number=parseFloat(item);return isFinite(number)?number:null;};String.from=function(item){return item+'';};Function.implement({hide:function(){this.$hidden=true;return this;},protect:function(){this.$protected=true;return this;}});var Type=this.Type=function(name,object){if(name){var lower=name.toLowerCase();var typeCheck=function(item){return(typeOf(item)==lower);};Type['is'+name]=typeCheck;if(object!=null){object.prototype.$family=(function(){return lower;}).hide();object.type=typeCheck;}}
if(object==null)return null;object.extend(this);object.$constructor=Type;object.prototype.$constructor=object;return object;};var toString=Object.prototype.toString;Type.isEnumerable=function(item){return(item!=null&&typeof item.length=='number'&&toString.call(item)!='[object Function]');};var hooks={};var hooksOf=function(object){var type=typeOf(object.prototype);return hooks[type]||(hooks[type]=[]);};var implement=function(name,method){if(method&&method.$hidden)return this;var hooks=hooksOf(this);for(var i=0;i<hooks.length;i++){var hook=hooks[i];if(typeOf(hook)=='type')implement.call(hook,name,method);else hook.call(this,name,method);}
var previous=this.prototype[name];if(previous==null||!previous.$protected)this.prototype[name]=method;if(this[name]==null&&typeOf(method)=='function')extend.call(this,name,function(item){return method.apply(item,slice.call(arguments,1));});return this;};var extend=function(name,method){if(method&&method.$hidden)return this;var previous=this[name];if(previous==null||!previous.$protected)this[name]=method;return this;};Type.implement({implement:implement.overloadSetter(),extend:extend.overloadSetter(),alias:function(name,existing){implement.call(this,name,this.prototype[existing]);}.overloadSetter(),mirror:function(hook){hooksOf(this).push(hook);return this;}});new Type('Type',Type);var force=function(name,object,methods){var isType=(object!=Object),prototype=object.prototype;if(isType)object=new Type(name,object);for(var i=0,l=methods.length;i<l;i++){var key=methods[i],generic=object[key],proto=prototype[key];if(generic)generic.protect();if(isType&&proto){delete prototype[key];prototype[key]=proto.protect();}}
if(isType)object.implement(prototype);return force;};force('String',String,['charAt','charCodeAt','concat','indexOf','lastIndexOf','match','quote','replace','search','slice','split','substr','substring','toLowerCase','toUpperCase'])('Array',Array,['pop','push','reverse','shift','sort','splice','unshift','concat','join','slice','indexOf','lastIndexOf','filter','forEach','every','map','some','reduce','reduceRight'])('Number',Number,['toExponential','toFixed','toLocaleString','toPrecision'])('Function',Function,['apply','call','bind'])('RegExp',RegExp,['exec','test'])('Object',Object,['create','defineProperty','defineProperties','keys','getPrototypeOf','getOwnPropertyDescriptor','getOwnPropertyNames','preventExtensions','isExtensible','seal','isSealed','freeze','isFrozen'])('Date',Date,['now']);Object.extend=extend.overloadSetter();Date.extend('now',function(){return+(new Date);});new Type('Boolean',Boolean);Number.prototype.$family=function(){return isFinite(this)?'number':'null';}.hide();Number.extend('random',function(min,max){return Math.floor(Math.random()*(max-min+1)+min);});Object.extend('forEach',function(object,fn,bind){for(var key in object){if(object.hasOwnProperty(key))fn.call(bind,object[key],key,object);}});Object.each=Object.forEach;Array.implement({forEach:function(fn,bind){for(var i=0,l=this.length;i<l;i++){if(i in this)fn.call(bind,this[i],i,this);}},each:function(fn,bind){Array.forEach(this,fn,bind);return this;}});var cloneOf=function(item){switch(typeOf(item)){case'array':return item.clone();case'object':return Object.clone(item);default:return item;}};Array.implement('clone',function(){var i=this.length,clone=new Array(i);while(i--)clone[i]=cloneOf(this[i]);return clone;});var mergeOne=function(source,key,current){switch(typeOf(current)){case'object':if(typeOf(source[key])=='object')Object.merge(source[key],current);else source[key]=Object.clone(current);break;case'array':source[key]=current.clone();break;default:source[key]=current;}
return source;};Object.extend({merge:function(source,k,v){if(typeOf(k)=='string')return mergeOne(source,k,v);for(var i=1,l=arguments.length;i<l;i++){var object=arguments[i];for(var key in object)mergeOne(source,key,object[key]);}
return source;},clone:function(object){var clone={};for(var key in object)clone[key]=cloneOf(object[key]);return clone;},append:function(original){for(var i=1,l=arguments.length;i<l;i++){var extended=arguments[i]||{};for(var key in extended)original[key]=extended[key];}
return original;}});['Object','WhiteSpace','TextNode','Collection','Arguments'].each(function(name){new Type(name);});var UID=Date.now();String.extend('uniqueID',function(){return(UID++).toString(36);});var Hash=this.Hash=new Type('Hash',function(object){if(typeOf(object)=='hash')object=Object.clone(object.getClean());for(var key in object)this[key]=object[key];return this;});Hash.implement({forEach:function(fn,bind){Object.forEach(this,fn,bind);},getClean:function(){var clean={};for(var key in this){if(this.hasOwnProperty(key))clean[key]=this[key];}
return clean;},getLength:function(){var length=0;for(var key in this){if(this.hasOwnProperty(key))length++;}
return length;}});Hash.alias('each','forEach');Object.type=Type.isObject;var Native=this.Native=function(properties){return new Type(properties.name,properties.initialize);};Native.type=Type.type;Native.implement=function(objects,methods){for(var i=0;i<objects.length;i++)objects[i].implement(methods);return Native;};var arrayType=Array.type;Array.type=function(item){return instanceOf(item,Array)||arrayType(item);};this.$A=function(item){return Array.from(item).slice();};this.$arguments=function(i){return function(){return arguments[i];};};this.$chk=function(obj){return!!(obj||obj===0);};this.$clear=function(timer){clearTimeout(timer);clearInterval(timer);return null;};this.$defined=function(obj){return(obj!=null);};this.$each=function(iterable,fn,bind){var type=typeOf(iterable);((type=='arguments'||type=='collection'||type=='array'||type=='elements')?Array:Object).each(iterable,fn,bind);};this.$empty=function(){};this.$extend=function(original,extended){return Object.append(original,extended);};this.$H=function(object){return new Hash(object);};this.$merge=function(){var args=Array.slice(arguments);args.unshift({});return Object.merge.apply(null,args);};this.$lambda=Function.from;this.$mixin=Object.merge;this.$random=Number.random;this.$splat=Array.from;this.$time=Date.now;this.$type=function(object){var type=typeOf(object);if(type=='elements')return'array';return(type=='null')?false:type;};this.$unlink=function(object){switch(typeOf(object)){case'object':return Object.clone(object);case'array':return Array.clone(object);case'hash':return new Hash(object);default:return object;}};})();Array.implement({invoke:function(methodName){var args=Array.slice(arguments,1);return this.map(function(item){return item[methodName].apply(item,args);});},every:function(fn,bind){for(var i=0,l=this.length;i<l;i++){if((i in this)&&!fn.call(bind,this[i],i,this))return false;}
return true;},filter:function(fn,bind){var results=[];for(var i=0,l=this.length;i<l;i++){if((i in this)&&fn.call(bind,this[i],i,this))results.push(this[i]);}
return results;},clean:function(){return this.filter(function(item){return item!=null;});},indexOf:function(item,from){var len=this.length;for(var i=(from<0)?Math.max(0,len+from):from||0;i<len;i++){if(this[i]===item)return i;}
return-1;},map:function(fn,bind){var results=[];for(var i=0,l=this.length;i<l;i++){if(i in this)results[i]=fn.call(bind,this[i],i,this);}
return results;},some:function(fn,bind){for(var i=0,l=this.length;i<l;i++){if((i in this)&&fn.call(bind,this[i],i,this))return true;}
return false;},associate:function(keys){var obj={},length=Math.min(this.length,keys.length);for(var i=0;i<length;i++)obj[keys[i]]=this[i];return obj;},link:function(object){var result={};for(var i=0,l=this.length;i<l;i++){for(var key in object){if(object[key](this[i])){result[key]=this[i];delete object[key];break;}}}
return result;},contains:function(item,from){return this.indexOf(item,from)!=-1;},append:function(array){this.push.apply(this,array);return this;},getLast:function(){return(this.length)?this[this.length-1]:null;},getRandom:function(){return(this.length)?this[Number.random(0,this.length-1)]:null;},include:function(item){if(!this.contains(item))this.push(item);return this;},combine:function(array){for(var i=0,l=array.length;i<l;i++)this.include(array[i]);return this;},erase:function(item){for(var i=this.length;i--;){if(this[i]===item)this.splice(i,1);}
return this;},empty:function(){this.length=0;return this;},flatten:function(){var array=[];for(var i=0,l=this.length;i<l;i++){var type=typeOf(this[i]);if(type=='null')continue;array=array.concat((type=='array'||type=='collection'||type=='arguments'||instanceOf(this[i],Array))?Array.flatten(this[i]):this[i]);}
return array;},pick:function(){for(var i=0,l=this.length;i<l;i++){if(this[i]!=null)return this[i];}
return null;},hexToRgb:function(array){if(this.length!=3)return null;var rgb=this.map(function(value){if(value.length==1)value+=value;return value.toInt(16);});return(array)?rgb:'rgb('+rgb+')';},rgbToHex:function(array){if(this.length<3)return null;if(this.length==4&&this[3]==0&&!array)return'transparent';var hex=[];for(var i=0;i<3;i++){var bit=(this[i]-0).toString(16);hex.push((bit.length==1)?'0'+bit:bit);}
return(array)?hex:'#'+hex.join('');}});Array.alias('extend','append');var $pick=function(){return Array.from(arguments).pick();};String.implement({test:function(regex,params){return((typeOf(regex)=='regexp')?regex:new RegExp(''+regex,params)).test(this);},contains:function(string,separator){return(separator)?(separator+this+separator).indexOf(separator+string+separator)>-1:this.indexOf(string)>-1;},trim:function(){return this.replace(/^\s+|\s+$/g,'');},clean:function(){return this.replace(/\s+/g,' ').trim();},camelCase:function(){return this.replace(/-\D/g,function(match){return match.charAt(1).toUpperCase();});},hyphenate:function(){return this.replace(/[A-Z]/g,function(match){return('-'+match.charAt(0).toLowerCase());});},capitalize:function(){return this.replace(/\b[a-z]/g,function(match){return match.toUpperCase();});},escapeRegExp:function(){return this.replace(/([-.*+?^${}()|[\]\/\\])/g,'\\$1');},toInt:function(base){return parseInt(this,base||10);},toFloat:function(){return parseFloat(this);},hexToRgb:function(array){var hex=this.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return(hex)?hex.slice(1).hexToRgb(array):null;},rgbToHex:function(array){var rgb=this.match(/\d{1,3}/g);return(rgb)?rgb.rgbToHex(array):null;},substitute:function(object,regexp){return this.replace(regexp||(/\\?\{([^{}]+)\}/g),function(match,name){if(match.charAt(0)=='\\')return match.slice(1);return(object[name]!=null)?object[name]:'';});}});Number.implement({limit:function(min,max){return Math.min(max,Math.max(min,this));},round:function(precision){precision=Math.pow(10,precision||0).toFixed(precision<0?-precision:0);return Math.round(this*precision)/precision;},times:function(fn,bind){for(var i=0;i<this;i++)fn.call(bind,i,this);},toFloat:function(){return parseFloat(this);},toInt:function(base){return parseInt(this,base||10);}});Number.alias('each','times');(function(math){var methods={};math.each(function(name){if(!Number[name])methods[name]=function(){return Math[name].apply(null,[this].concat(Array.from(arguments)));};});Number.implement(methods);})(['abs','acos','asin','atan','atan2','ceil','cos','exp','floor','log','max','min','pow','sin','sqrt','tan']);Function.extend({attempt:function(){for(var i=0,l=arguments.length;i<l;i++){try{return arguments[i]();}catch(e){}}
return null;}});Function.implement({attempt:function(args,bind){try{return this.apply(bind,Array.from(args));}catch(e){}
return null;},bind:function(bind){var self=this,args=(arguments.length>1)?Array.slice(arguments,1):null;return function(){if(!args&&!arguments.length)return self.call(bind);if(args&&arguments.length)return self.apply(bind,args.concat(Array.from(arguments)));return self.apply(bind,args||arguments);};},pass:function(args,bind){var self=this;if(args!=null)args=Array.from(args);return function(){return self.apply(bind,args||arguments);};},delay:function(delay,bind,args){return setTimeout(this.pass(args,bind),delay);},periodical:function(periodical,bind,args){return setInterval(this.pass(args,bind),periodical);}});delete Function.prototype.bind;Function.implement({create:function(options){var self=this;options=options||{};return function(event){var args=options.arguments;args=(args!=null)?Array.from(args):Array.slice(arguments,(options.event)?1:0);if(options.event)args=[event||window.event].extend(args);var returns=function(){return self.apply(options.bind||null,args);};if(options.delay)return setTimeout(returns,options.delay);if(options.periodical)return setInterval(returns,options.periodical);if(options.attempt)return Function.attempt(returns);return returns();};},bind:function(bind,args){var self=this;if(args!=null)args=Array.from(args);return function(){return self.apply(bind,args||arguments);};},bindWithEvent:function(bind,args){var self=this;if(args!=null)args=Array.from(args);return function(event){return self.apply(bind,(args==null)?arguments:[event].concat(args));};},run:function(args,bind){return this.apply(bind,Array.from(args));}});var $try=Function.attempt;Object.extend({subset:function(object,keys){var results={};for(var i=0,l=keys.length;i<l;i++){var k=keys[i];results[k]=object[k];}
return results;},map:function(object,fn,bind){var results={};for(var key in object){if(object.hasOwnProperty(key))results[key]=fn.call(bind,object[key],key,object);}
return results;},filter:function(object,fn,bind){var results={};Object.each(object,function(value,key){if(fn.call(bind,value,key,object))results[key]=value;});return results;},every:function(object,fn,bind){for(var key in object){if(object.hasOwnProperty(key)&&!fn.call(bind,object[key],key))return false;}
return true;},some:function(object,fn,bind){for(var key in object){if(object.hasOwnProperty(key)&&fn.call(bind,object[key],key))return true;}
return false;},keys:function(object){var keys=[];for(var key in object){if(object.hasOwnProperty(key))keys.push(key);}
return keys;},values:function(object){var values=[];for(var key in object){if(object.hasOwnProperty(key))values.push(object[key]);}
return values;},getLength:function(object){return Object.keys(object).length;},keyOf:function(object,value){for(var key in object){if(object.hasOwnProperty(key)&&object[key]===value)return key;}
return null;},contains:function(object,value){return Object.keyOf(object,value)!=null;},toQueryString:function(object,base){var queryString=[];Object.each(object,function(value,key){if(base)key=base+'['+key+']';var result;switch(typeOf(value)){case'object':result=Object.toQueryString(value,key);break;case'array':var qs={};value.each(function(val,i){qs[i]=val;});result=Object.toQueryString(qs,key);break;default:result=key+'='+encodeURIComponent(value);}
if(value!=null)queryString.push(result);});return queryString.join('&');}});Hash.implement({has:Object.prototype.hasOwnProperty,keyOf:function(value){return Object.keyOf(this,value);},hasValue:function(value){return Object.contains(this,value);},extend:function(properties){Hash.each(properties||{},function(value,key){Hash.set(this,key,value);},this);return this;},combine:function(properties){Hash.each(properties||{},function(value,key){Hash.include(this,key,value);},this);return this;},erase:function(key){if(this.hasOwnProperty(key))delete this[key];return this;},get:function(key){return(this.hasOwnProperty(key))?this[key]:null;},set:function(key,value){if(!this[key]||this.hasOwnProperty(key))this[key]=value;return this;},empty:function(){Hash.each(this,function(value,key){delete this[key];},this);return this;},include:function(key,value){if(this[key]==null)this[key]=value;return this;},map:function(fn,bind){return new Hash(Object.map(this,fn,bind));},filter:function(fn,bind){return new Hash(Object.filter(this,fn,bind));},every:function(fn,bind){return Object.every(this,fn,bind);},some:function(fn,bind){return Object.some(this,fn,bind);},getKeys:function(){return Object.keys(this);},getValues:function(){return Object.values(this);},toQueryString:function(base){return Object.toQueryString(this,base);}});Hash.extend=Object.append;Hash.alias({indexOf:'keyOf',contains:'hasValue'});(function(){var document=this.document;var window=document.window=this;var UID=1;this.$uid=(window.ActiveXObject)?function(item){return(item.uid||(item.uid=[UID++]))[0];}:function(item){return item.uid||(item.uid=UID++);};$uid(window);$uid(document);var ua=navigator.userAgent.toLowerCase(),platform=navigator.platform.toLowerCase(),UA=ua.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,'unknown',0],mode=UA[1]=='ie'&&document.documentMode;var Browser=this.Browser={extend:Function.prototype.extend,name:(UA[1]=='version')?UA[3]:UA[1],version:mode||parseFloat((UA[1]=='opera'&&UA[4])?UA[4]:UA[2]),Platform:{name:ua.match(/ip(?:ad|od|hone)/)?'ios':(ua.match(/(?:webos|android)/)||platform.match(/mac|win|linux/)||['other'])[0]},Features:{xpath:!!(document.evaluate),air:!!(window.runtime),query:!!(document.querySelector),json:!!(window.JSON)},Plugins:{}};Browser[Browser.name]=true;Browser[Browser.name+parseInt(Browser.version,10)]=true;Browser.Platform[Browser.Platform.name]=true;Browser.Request=(function(){var XMLHTTP=function(){return new XMLHttpRequest();};var MSXML2=function(){return new ActiveXObject('MSXML2.XMLHTTP');};var MSXML=function(){return new ActiveXObject('Microsoft.XMLHTTP');};return Function.attempt(function(){XMLHTTP();return XMLHTTP;},function(){MSXML2();return MSXML2;},function(){MSXML();return MSXML;});})();Browser.Features.xhr=!!(Browser.Request);var version=(Function.attempt(function(){return navigator.plugins['Shockwave Flash'].description;},function(){return new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');})||'0 r0').match(/\d+/g);Browser.Plugins.Flash={version:Number(version[0]||'0.'+version[1])||0,build:Number(version[2])||0};Browser.exec=function(text){if(!text)return text;if(window.execScript){window.execScript(text);}else{var script=document.createElement('script');script.setAttribute('type','text/javascript');script.text=text;document.head.appendChild(script);document.head.removeChild(script);}
return text;};String.implement('stripScripts',function(exec){var scripts='';var text=this.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(all,code){scripts+=code+'\n';return'';});if(exec===true)Browser.exec(scripts);else if(typeOf(exec)=='function')exec(scripts,text);return text;});Browser.extend({Document:this.Document,Window:this.Window,Element:this.Element,Event:this.Event});this.Window=this.$constructor=new Type('Window',function(){});this.$family=Function.from('window').hide();Window.mirror(function(name,method){window[name]=method;});this.Document=document.$constructor=new Type('Document',function(){});document.$family=Function.from('document').hide();Document.mirror(function(name,method){document[name]=method;});document.html=document.documentElement;document.head=document.getElementsByTagName('head')[0];if(document.execCommand)try{document.execCommand("BackgroundImageCache",false,true);}catch(e){}
if(this.attachEvent&&!this.addEventListener){var unloadEvent=function(){this.detachEvent('onunload',unloadEvent);document.head=document.html=document.window=null;};this.attachEvent('onunload',unloadEvent);}
var arrayFrom=Array.from;try{arrayFrom(document.html.childNodes);}catch(e){Array.from=function(item){if(typeof item!='string'&&Type.isEnumerable(item)&&typeOf(item)!='array'){var i=item.length,array=new Array(i);while(i--)array[i]=item[i];return array;}
return arrayFrom(item);};var prototype=Array.prototype,slice=prototype.slice;['pop','push','reverse','shift','sort','splice','unshift','concat','join','slice'].each(function(name){var method=prototype[name];Array[name]=function(item){return method.apply(Array.from(item),slice.call(arguments,1));};});}
if(Browser.Platform.ios)Browser.Platform.ipod=true;Browser.Engine={};var setEngine=function(name,version){Browser.Engine.name=name;Browser.Engine[name+version]=true;Browser.Engine.version=version;};if(Browser.ie){Browser.Engine.trident=true;switch(Browser.version){case 6:setEngine('trident',4);break;case 7:setEngine('trident',5);break;case 8:setEngine('trident',6);}}
if(Browser.firefox){Browser.Engine.gecko=true;if(Browser.version>=3)setEngine('gecko',19);else setEngine('gecko',18);}
if(Browser.safari||Browser.chrome){Browser.Engine.webkit=true;switch(Browser.version){case 2:setEngine('webkit',419);break;case 3:setEngine('webkit',420);break;case 4:setEngine('webkit',525);}}
if(Browser.opera){Browser.Engine.presto=true;if(Browser.version>=9.6)setEngine('presto',960);else if(Browser.version>=9.5)setEngine('presto',950);else setEngine('presto',925);}
if(Browser.name=='unknown'){switch((ua.match(/(?:webkit|khtml|gecko)/)||[])[0]){case'webkit':case'khtml':Browser.Engine.webkit=true;break;case'gecko':Browser.Engine.gecko=true;}}
this.$exec=Browser.exec;})();var Event=new Type('Event',function(event,win){if(!win)win=window;var doc=win.document;event=event||win.event;if(event.$extended)return event;this.$extended=true;var type=event.type,target=event.target||event.srcElement,page={},client={};while(target&&target.nodeType==3)target=target.parentNode;if(type.indexOf('key')!=-1){var code=event.which||event.keyCode;var key=Object.keyOf(Event.Keys,code);if(type=='keydown'){var fKey=code-111;if(fKey>0&&fKey<13)key='f'+fKey;}
if(!key)key=String.fromCharCode(code).toLowerCase();}else if(type.test(/click|mouse|menu/i)){doc=(!doc.compatMode||doc.compatMode=='CSS1Compat')?doc.html:doc.body;page={x:(event.pageX!=null)?event.pageX:event.clientX+doc.scrollLeft,y:(event.pageY!=null)?event.pageY:event.clientY+doc.scrollTop};client={x:(event.pageX!=null)?event.pageX-win.pageXOffset:event.clientX,y:(event.pageY!=null)?event.pageY-win.pageYOffset:event.clientY};if(type.test(/DOMMouseScroll|mousewheel/)){var wheel=(event.wheelDelta)?event.wheelDelta/120:-(event.detail||0)/3;}
var rightClick=(event.which==3)||(event.button==2),related=null;if(type.test(/over|out/)){related=event.relatedTarget||event[(type=='mouseover'?'from':'to')+'Element'];var testRelated=function(){while(related&&related.nodeType==3)related=related.parentNode;return true;};var hasRelated=(Browser.firefox2)?testRelated.attempt():testRelated();related=(hasRelated)?related:null;}}else if(type.test(/gesture|touch/i)){this.rotation=event.rotation;this.scale=event.scale;this.targetTouches=event.targetTouches;this.changedTouches=event.changedTouches;var touches=this.touches=event.touches;if(touches&&touches[0]){var touch=touches[0];page={x:touch.pageX,y:touch.pageY};client={x:touch.clientX,y:touch.clientY};}}
return Object.append(this,{event:event,type:type,page:page,client:client,rightClick:rightClick,wheel:wheel,relatedTarget:document.id(related),target:document.id(target),code:code,key:key,shift:event.shiftKey,control:event.ctrlKey,alt:event.altKey,meta:event.metaKey});});Event.Keys={'enter':13,'up':38,'down':40,'left':37,'right':39,'esc':27,'space':32,'backspace':8,'tab':9,'delete':46};Event.Keys=new Hash(Event.Keys);Event.implement({stop:function(){return this.stopPropagation().preventDefault();},stopPropagation:function(){if(this.event.stopPropagation)this.event.stopPropagation();else this.event.cancelBubble=true;return this;},preventDefault:function(){if(this.event.preventDefault)this.event.preventDefault();else this.event.returnValue=false;return this;}});(function(){var Class=this.Class=new Type('Class',function(params){if(instanceOf(params,Function))params={initialize:params};var newClass=function(){reset(this);if(newClass.$prototyping)return this;this.$caller=null;var value=(this.initialize)?this.initialize.apply(this,arguments):this;this.$caller=this.caller=null;return value;}.extend(this).implement(params);newClass.$constructor=Class;newClass.prototype.$constructor=newClass;newClass.prototype.parent=parent;return newClass;});var parent=function(){if(!this.$caller)throw new Error('The method "parent" cannot be called.');var name=this.$caller.$name,parent=this.$caller.$owner.parent,previous=(parent)?parent.prototype[name]:null;if(!previous)throw new Error('The method "'+name+'" has no parent.');return previous.apply(this,arguments);};var reset=function(object){for(var key in object){var value=object[key];switch(typeOf(value)){case'object':var F=function(){};F.prototype=value;object[key]=reset(new F);break;case'array':object[key]=value.clone();break;}}
return object;};var wrap=function(self,key,method){if(method.$origin)method=method.$origin;var wrapper=function(){if(method.$protected&&this.$caller==null)throw new Error('The method "'+key+'" cannot be called.');var caller=this.caller,current=this.$caller;this.caller=current;this.$caller=wrapper;var result=method.apply(this,arguments);this.$caller=current;this.caller=caller;return result;}.extend({$owner:self,$origin:method,$name:key});return wrapper;};var implement=function(key,value,retain){if(Class.Mutators.hasOwnProperty(key)){value=Class.Mutators[key].call(this,value);if(value==null)return this;}
if(typeOf(value)=='function'){if(value.$hidden)return this;this.prototype[key]=(retain)?value:wrap(this,key,value);}else{Object.merge(this.prototype,key,value);}
return this;};var getInstance=function(klass){klass.$prototyping=true;var proto=new klass;delete klass.$prototyping;return proto;};Class.implement('implement',implement.overloadSetter());Class.Mutators={Extends:function(parent){this.parent=parent;this.prototype=getInstance(parent);},Implements:function(items){Array.from(items).each(function(item){var instance=new item;for(var key in instance)implement.call(this,key,instance[key],true);},this);}};})();(function(){this.Chain=new Class({$chain:[],chain:function(){this.$chain.append(Array.flatten(arguments));return this;},callChain:function(){return(this.$chain.length)?this.$chain.shift().apply(this,arguments):false;},clearChain:function(){this.$chain.empty();return this;}});var removeOn=function(string){return string.replace(/^on([A-Z])/,function(full,first){return first.toLowerCase();});};this.Events=new Class({$events:{},addEvent:function(type,fn,internal){type=removeOn(type);if(fn==$empty)return this;this.$events[type]=(this.$events[type]||[]).include(fn);if(internal)fn.internal=true;return this;},addEvents:function(events){for(var type in events)this.addEvent(type,events[type]);return this;},fireEvent:function(type,args,delay){type=removeOn(type);var events=this.$events[type];if(!events)return this;args=Array.from(args);events.each(function(fn){if(delay)fn.delay(delay,this,args);else fn.apply(this,args);},this);return this;},removeEvent:function(type,fn){type=removeOn(type);var events=this.$events[type];if(events&&!fn.internal){var index=events.indexOf(fn);if(index!=-1)delete events[index];}
return this;},removeEvents:function(events){var type;if(typeOf(events)=='object'){for(type in events)this.removeEvent(type,events[type]);return this;}
if(events)events=removeOn(events);for(type in this.$events){if(events&&events!=type)continue;var fns=this.$events[type];for(var i=fns.length;i--;)this.removeEvent(type,fns[i]);}
return this;}});this.Options=new Class({setOptions:function(){var options=this.options=Object.merge.apply(null,[{},this.options].append(arguments));if(!this.addEvent)return this;for(var option in options){if(typeOf(options[option])!='function'||!(/^on[A-Z]/).test(option))continue;this.addEvent(option,options[option]);delete options[option];}
return this;}});})();(function(){var parsed,separatorIndex,combinatorIndex,reversed,cache={},reverseCache={},reUnescape=/\\/g;var parse=function(expression,isReversed){if(expression==null)return null;if(expression.Slick===true)return expression;expression=(''+expression).replace(/^\s+|\s+$/g,'');reversed=!!isReversed;var currentCache=(reversed)?reverseCache:cache;if(currentCache[expression])return currentCache[expression];parsed={Slick:true,expressions:[],raw:expression,reverse:function(){return parse(this.raw,true);}};separatorIndex=-1;while(expression!=(expression=expression.replace(regexp,parser)));parsed.length=parsed.expressions.length;return currentCache[expression]=(reversed)?reverse(parsed):parsed;};var reverseCombinator=function(combinator){if(combinator==='!')return' ';else if(combinator===' ')return'!';else if((/^!/).test(combinator))return combinator.replace(/^!/,'');else return'!'+combinator;};var reverse=function(expression){var expressions=expression.expressions;for(var i=0;i<expressions.length;i++){var exp=expressions[i];var last={parts:[],tag:'*',combinator:reverseCombinator(exp[0].combinator)};for(var j=0;j<exp.length;j++){var cexp=exp[j];if(!cexp.reverseCombinator)cexp.reverseCombinator=' ';cexp.combinator=cexp.reverseCombinator;delete cexp.reverseCombinator;}
exp.reverse().push(last);}
return expression;};var escapeRegExp=function(string){return string.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,"\\$&");};var regexp=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|:+(<unicode>+)(?:\\((?:(?:([\"'])([^\\12]*)\\12)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,'['+escapeRegExp(">+~`!@$%^&={}\\;</")+']').replace(/<unicode>/g,'(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])').replace(/<unicode1>/g,'(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])'));function parser(rawMatch,separator,combinator,combinatorChildren,tagName,id,className,attributeKey,attributeOperator,attributeQuote,attributeValue,pseudoClass,pseudoQuote,pseudoClassQuotedValue,pseudoClassValue){if(separator||separatorIndex===-1){parsed.expressions[++separatorIndex]=[];combinatorIndex=-1;if(separator)return'';}
if(combinator||combinatorChildren||combinatorIndex===-1){combinator=combinator||' ';var currentSeparator=parsed.expressions[separatorIndex];if(reversed&&currentSeparator[combinatorIndex])
currentSeparator[combinatorIndex].reverseCombinator=reverseCombinator(combinator);currentSeparator[++combinatorIndex]={combinator:combinator,tag:'*'};}
var currentParsed=parsed.expressions[separatorIndex][combinatorIndex];if(tagName){currentParsed.tag=tagName.replace(reUnescape,'');}else if(id){currentParsed.id=id.replace(reUnescape,'');}else if(className){className=className.replace(reUnescape,'');if(!currentParsed.classList)currentParsed.classList=[];if(!currentParsed.classes)currentParsed.classes=[];currentParsed.classList.push(className);currentParsed.classes.push({value:className,regexp:new RegExp('(^|\\s)'+escapeRegExp(className)+'(\\s|$)')});}else if(pseudoClass){pseudoClassValue=pseudoClassValue||pseudoClassQuotedValue;pseudoClassValue=pseudoClassValue?pseudoClassValue.replace(reUnescape,''):null;if(!currentParsed.pseudos)currentParsed.pseudos=[];currentParsed.pseudos.push({key:pseudoClass.replace(reUnescape,''),value:pseudoClassValue});}else if(attributeKey){attributeKey=attributeKey.replace(reUnescape,'');attributeValue=(attributeValue||'').replace(reUnescape,'');var test,regexp;switch(attributeOperator){case'^=':regexp=new RegExp('^'+escapeRegExp(attributeValue));break;case'$=':regexp=new RegExp(escapeRegExp(attributeValue)+'$');break;case'~=':regexp=new RegExp('(^|\\s)'+escapeRegExp(attributeValue)+'(\\s|$)');break;case'|=':regexp=new RegExp('^'+escapeRegExp(attributeValue)+'(-|$)');break;case'=':test=function(value){return attributeValue==value;};break;case'*=':test=function(value){return value&&value.indexOf(attributeValue)>-1;};break;case'!=':test=function(value){return attributeValue!=value;};break;default:test=function(value){return!!value;};}
if(attributeValue==''&&(/^[*$^]=$/).test(attributeOperator))test=function(){return false;};if(!test)test=function(value){return value&&regexp.test(value);};if(!currentParsed.attributes)currentParsed.attributes=[];currentParsed.attributes.push({key:attributeKey,operator:attributeOperator,value:attributeValue,test:test});}
return'';};var Slick=(this.Slick||{});Slick.parse=function(expression){return parse(expression);};Slick.escapeRegExp=escapeRegExp;if(!this.Slick)this.Slick=Slick;}).apply((typeof exports!='undefined')?exports:this);(function(){var local={};local.isNativeCode=function(fn){return(/\{\s*\[native code\]\s*\}/).test(''+fn);};local.isXML=function(document){return(!!document.xmlVersion)||(!!document.xml)||(Object.prototype.toString.call(document)==='[object XMLDocument]')||(document.nodeType===9&&document.documentElement.nodeName!=='HTML');};local.setDocument=function(document){if(document.nodeType===9);else if(document.ownerDocument)document=document.ownerDocument;else if(document.navigator)document=document.document;else return;if(this.document===document)return;this.document=document;var root=this.root=document.documentElement;this.isXMLDocument=this.isXML(document);this.brokenStarGEBTN=this.starSelectsClosedQSA=this.idGetsName=this.brokenMixedCaseQSA=this.brokenGEBCN=this.brokenCheckedQSA=this.brokenEmptyAttributeQSA=this.isHTMLDocument=false;var starSelectsClosed,starSelectsComments,brokenSecondClassNameGEBCN,cachedGetElementsByClassName;var selected,id;var testNode=document.createElement('div');root.appendChild(testNode);try{id='slick_getbyid_test';testNode.innerHTML='<a id="'+id+'"></a>';this.isHTMLDocument=!!document.getElementById(id);}catch(e){};if(this.isHTMLDocument){testNode.style.display='none';testNode.appendChild(document.createComment(''));starSelectsComments=(testNode.getElementsByTagName('*').length>0);try{testNode.innerHTML='foo</foo>';selected=testNode.getElementsByTagName('*');starSelectsClosed=(selected&&selected.length&&selected[0].nodeName.charAt(0)=='/');}catch(e){};this.brokenStarGEBTN=starSelectsComments||starSelectsClosed;if(testNode.querySelectorAll)try{testNode.innerHTML='foo</foo>';selected=testNode.querySelectorAll('*');this.starSelectsClosedQSA=(selected&&selected.length&&selected[0].nodeName.charAt(0)=='/');}catch(e){};try{id='slick_id_gets_name';testNode.innerHTML='<a name="'+id+'"></a><b id="'+id+'"></b>';this.idGetsName=document.getElementById(id)===testNode.firstChild;}catch(e){};try{testNode.innerHTML='<a class="MiXedCaSe"></a>';this.brokenMixedCaseQSA=!testNode.querySelectorAll('.MiXedCaSe').length;}catch(e){};try{testNode.innerHTML='<a class="f"></a><a class="b"></a>';testNode.getElementsByClassName('b').length;testNode.firstChild.className='b';cachedGetElementsByClassName=(testNode.getElementsByClassName('b').length!=2);}catch(e){};try{testNode.innerHTML='<a class="a"></a><a class="f b a"></a>';brokenSecondClassNameGEBCN=(testNode.getElementsByClassName('a').length!=2);}catch(e){};this.brokenGEBCN=cachedGetElementsByClassName||brokenSecondClassNameGEBCN;try{testNode.innerHTML='<select><option selected="selected">a</option></select>';this.brokenCheckedQSA=(testNode.querySelectorAll(':checked').length==0);}catch(e){};try{testNode.innerHTML='<a class=""></a>';this.brokenEmptyAttributeQSA=(testNode.querySelectorAll('[class*=""]').length!=0);}catch(e){};}
root.removeChild(testNode);testNode=null;this.hasAttribute=(root&&this.isNativeCode(root.hasAttribute))?function(node,attribute){return node.hasAttribute(attribute);}:function(node,attribute){node=node.getAttributeNode(attribute);return!!(node&&(node.specified||node.nodeValue));};this.contains=(root&&this.isNativeCode(root.contains))?function(context,node){return context.contains(node);}:(root&&root.compareDocumentPosition)?function(context,node){return context===node||!!(context.compareDocumentPosition(node)&16);}:function(context,node){if(node)do{if(node===context)return true;}while((node=node.parentNode));return false;};this.documentSorter=(root.compareDocumentPosition)?function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return 0;return a.compareDocumentPosition(b)&4?-1:a===b?0:1;}:('sourceIndex'in root)?function(a,b){if(!a.sourceIndex||!b.sourceIndex)return 0;return a.sourceIndex-b.sourceIndex;}:(document.createRange)?function(a,b){if(!a.ownerDocument||!b.ownerDocument)return 0;var aRange=a.ownerDocument.createRange(),bRange=b.ownerDocument.createRange();aRange.setStart(a,0);aRange.setEnd(a,0);bRange.setStart(b,0);bRange.setEnd(b,0);return aRange.compareBoundaryPoints(Range.START_TO_END,bRange);}:null;this.getUID=(this.isHTMLDocument)?this.getUIDHTML:this.getUIDXML;};local.search=function(context,expression,append,first){var found=this.found=(first)?null:(append||[]);if(!context)return found;if(context.navigator)context=context.document;else if(!context.nodeType)return found;var parsed,i;var uniques=this.uniques={};if(this.document!==(context.ownerDocument||context))this.setDocument(context);var shouldUniques=!!(append&&append.length);if(shouldUniques)for(i=found.length;i--;)this.uniques[this.getUID(found[i])]=true;if(typeof expression=='string'){for(i=this.overrides.length;i--;){var override=this.overrides[i];if(override.regexp.test(expression)){var result=override.method.call(context,expression,found,first);if(result===false)continue;if(result===true)return found;return result;}}
parsed=this.Slick.parse(expression);if(!parsed.length)return found;}else if(expression==null){return found;}else if(expression.Slick){parsed=expression;}else if(this.contains(context.documentElement||context,expression)){(found)?found.push(expression):found=expression;return found;}else{return found;}
this.posNTH={};this.posNTHLast={};this.posNTHType={};this.posNTHTypeLast={};this.push=(!shouldUniques&&(first||(parsed.length==1&&parsed.expressions[0].length==1)))?this.pushArray:this.pushUID;if(found==null)found=[];var j,m,n;var combinator,tag,id,classList,classes,attributes,pseudos;var currentItems,currentExpression,currentBit,lastBit,expressions=parsed.expressions;search:for(i=0;(currentExpression=expressions[i]);i++)for(j=0;(currentBit=currentExpression[j]);j++){combinator='combinator:'+currentBit.combinator;if(!this[combinator])continue search;tag=(this.isXMLDocument)?currentBit.tag:currentBit.tag.toUpperCase();id=currentBit.id;classList=currentBit.classList;classes=currentBit.classes;attributes=currentBit.attributes;pseudos=currentBit.pseudos;lastBit=(j===(currentExpression.length-1));this.bitUniques={};if(lastBit){this.uniques=uniques;this.found=found;}else{this.uniques={};this.found=[];}
if(j===0){this[combinator](context,tag,id,classes,attributes,pseudos,classList);if(first&&lastBit&&found.length)break search;}else{if(first&&lastBit)for(m=0,n=currentItems.length;m<n;m++){this[combinator](currentItems[m],tag,id,classes,attributes,pseudos,classList);if(found.length)break search;}else for(m=0,n=currentItems.length;m<n;m++)this[combinator](currentItems[m],tag,id,classes,attributes,pseudos,classList);}
currentItems=this.found;}
if(shouldUniques||(parsed.expressions.length>1))this.sort(found);return(first)?(found[0]||null):found;};local.uidx=1;local.uidk='slick:uniqueid';local.getUIDXML=function(node){var uid=node.getAttribute(this.uidk);if(!uid){uid=this.uidx++;node.setAttribute(this.uidk,uid);}
return uid;};local.getUIDHTML=function(node){return node.uniqueNumber||(node.uniqueNumber=this.uidx++);};local.sort=function(results){if(!this.documentSorter)return results;results.sort(this.documentSorter);return results;};local.cacheNTH={};local.matchNTH=/^([+-]?\d*)?([a-z]+)?([+-]\d+)?$/;local.parseNTHArgument=function(argument){var parsed=argument.match(this.matchNTH);if(!parsed)return false;var special=parsed[2]||false;var a=parsed[1]||1;if(a=='-')a=-1;var b=+parsed[3]||0;parsed=(special=='n')?{a:a,b:b}:(special=='odd')?{a:2,b:1}:(special=='even')?{a:2,b:0}:{a:0,b:a};return(this.cacheNTH[argument]=parsed);};local.createNTHPseudo=function(child,sibling,positions,ofType){return function(node,argument){var uid=this.getUID(node);if(!this[positions][uid]){var parent=node.parentNode;if(!parent)return false;var el=parent[child],count=1;if(ofType){var nodeName=node.nodeName;do{if(el.nodeName!==nodeName)continue;this[positions][this.getUID(el)]=count++;}while((el=el[sibling]));}else{do{if(el.nodeType!==1)continue;this[positions][this.getUID(el)]=count++;}while((el=el[sibling]));}}
argument=argument||'n';var parsed=this.cacheNTH[argument]||this.parseNTHArgument(argument);if(!parsed)return false;var a=parsed.a,b=parsed.b,pos=this[positions][uid];if(a==0)return b==pos;if(a>0){if(pos<b)return false;}else{if(b<pos)return false;}
return((pos-b)%a)==0;};};local.pushArray=function(node,tag,id,classes,attributes,pseudos){if(this.matchSelector(node,tag,id,classes,attributes,pseudos))this.found.push(node);};local.pushUID=function(node,tag,id,classes,attributes,pseudos){var uid=this.getUID(node);if(!this.uniques[uid]&&this.matchSelector(node,tag,id,classes,attributes,pseudos)){this.uniques[uid]=true;this.found.push(node);}};local.matchNode=function(node,selector){var parsed=this.Slick.parse(selector);if(!parsed)return true;if(parsed.length==1&&parsed.expressions[0].length==1){var exp=parsed.expressions[0][0];return this.matchSelector(node,(this.isXMLDocument)?exp.tag:exp.tag.toUpperCase(),exp.id,exp.classes,exp.attributes,exp.pseudos);}
var nodes=this.search(this.document,parsed);for(var i=0,item;item=nodes[i++];){if(item===node)return true;}
return false;};local.matchPseudo=function(node,name,argument){var pseudoName='pseudo:'+name;if(this[pseudoName])return this[pseudoName](node,argument);var attribute=this.getAttribute(node,name);return(argument)?argument==attribute:!!attribute;};local.matchSelector=function(node,tag,id,classes,attributes,pseudos){if(tag){if(tag=='*'){if(node.nodeName<'@')return false;}else{if(node.nodeName!=tag)return false;}}
if(id&&node.getAttribute('id')!=id)return false;var i,part,cls;if(classes)for(i=classes.length;i--;){cls=('className'in node)?node.className:node.getAttribute('class');if(!(cls&&classes[i].regexp.test(cls)))return false;}
if(attributes)for(i=attributes.length;i--;){part=attributes[i];if(part.operator?!part.test(this.getAttribute(node,part.key)):!this.hasAttribute(node,part.key))return false;}
if(pseudos)for(i=pseudos.length;i--;){part=pseudos[i];if(!this.matchPseudo(node,part.key,part.value))return false;}
return true;};var combinators={' ':function(node,tag,id,classes,attributes,pseudos,classList){var i,item,children;if(this.isHTMLDocument){getById:if(id){item=this.document.getElementById(id);if((!item&&node.all)||(this.idGetsName&&item&&item.getAttributeNode('id').nodeValue!=id)){children=node.all[id];if(!children)return;if(!children[0])children=[children];for(i=0;item=children[i++];)if(item.getAttributeNode('id').nodeValue==id){this.push(item,tag,null,classes,attributes,pseudos);break;}
return;}
if(!item){if(this.contains(this.document.documentElement,node))return;else break getById;}else if(this.document!==node&&!this.contains(node,item))return;this.push(item,tag,null,classes,attributes,pseudos);return;}
getByClass:if(classes&&node.getElementsByClassName&&!this.brokenGEBCN){children=node.getElementsByClassName(classList.join(' '));if(!(children&&children.length))break getByClass;for(i=0;item=children[i++];)this.push(item,tag,id,null,attributes,pseudos);return;}}
getByTag:{children=node.getElementsByTagName(tag);if(!(children&&children.length))break getByTag;if(!this.brokenStarGEBTN)tag=null;for(i=0;item=children[i++];)this.push(item,tag,id,classes,attributes,pseudos);}},'>':function(node,tag,id,classes,attributes,pseudos){if((node=node.firstChild))do{if(node.nodeType===1)this.push(node,tag,id,classes,attributes,pseudos);}while((node=node.nextSibling));},'+':function(node,tag,id,classes,attributes,pseudos){while((node=node.nextSibling))if(node.nodeType===1){this.push(node,tag,id,classes,attributes,pseudos);break;}},'^':function(node,tag,id,classes,attributes,pseudos){node=node.firstChild;if(node){if(node.nodeType===1)this.push(node,tag,id,classes,attributes,pseudos);else this['combinator:+'](node,tag,id,classes,attributes,pseudos);}},'~':function(node,tag,id,classes,attributes,pseudos){while((node=node.nextSibling)){if(node.nodeType!==1)continue;var uid=this.getUID(node);if(this.bitUniques[uid])break;this.bitUniques[uid]=true;this.push(node,tag,id,classes,attributes,pseudos);}},'++':function(node,tag,id,classes,attributes,pseudos){this['combinator:+'](node,tag,id,classes,attributes,pseudos);this['combinator:!+'](node,tag,id,classes,attributes,pseudos);},'~~':function(node,tag,id,classes,attributes,pseudos){this['combinator:~'](node,tag,id,classes,attributes,pseudos);this['combinator:!~'](node,tag,id,classes,attributes,pseudos);},'!':function(node,tag,id,classes,attributes,pseudos){while((node=node.parentNode))if(node!==this.document)this.push(node,tag,id,classes,attributes,pseudos);},'!>':function(node,tag,id,classes,attributes,pseudos){node=node.parentNode;if(node!==this.document)this.push(node,tag,id,classes,attributes,pseudos);},'!+':function(node,tag,id,classes,attributes,pseudos){while((node=node.previousSibling))if(node.nodeType===1){this.push(node,tag,id,classes,attributes,pseudos);break;}},'!^':function(node,tag,id,classes,attributes,pseudos){node=node.lastChild;if(node){if(node.nodeType===1)this.push(node,tag,id,classes,attributes,pseudos);else this['combinator:!+'](node,tag,id,classes,attributes,pseudos);}},'!~':function(node,tag,id,classes,attributes,pseudos){while((node=node.previousSibling)){if(node.nodeType!==1)continue;var uid=this.getUID(node);if(this.bitUniques[uid])break;this.bitUniques[uid]=true;this.push(node,tag,id,classes,attributes,pseudos);}}};for(var c in combinators)local['combinator:'+c]=combinators[c];var pseudos={'empty':function(node){var child=node.firstChild;return!(child&&child.nodeType==1)&&!(node.innerText||node.textContent||'').length;},'not':function(node,expression){return!this.matchNode(node,expression);},'contains':function(node,text){return(node.innerText||node.textContent||'').indexOf(text)>-1;},'first-child':function(node){while((node=node.previousSibling))if(node.nodeType===1)return false;return true;},'last-child':function(node){while((node=node.nextSibling))if(node.nodeType===1)return false;return true;},'only-child':function(node){var prev=node;while((prev=prev.previousSibling))if(prev.nodeType===1)return false;var next=node;while((next=next.nextSibling))if(next.nodeType===1)return false;return true;},'nth-child':local.createNTHPseudo('firstChild','nextSibling','posNTH'),'nth-last-child':local.createNTHPseudo('lastChild','previousSibling','posNTHLast'),'nth-of-type':local.createNTHPseudo('firstChild','nextSibling','posNTHType',true),'nth-last-of-type':local.createNTHPseudo('lastChild','previousSibling','posNTHTypeLast',true),'index':function(node,index){return this['pseudo:nth-child'](node,''+index+1);},'even':function(node,argument){return this['pseudo:nth-child'](node,'2n');},'odd':function(node,argument){return this['pseudo:nth-child'](node,'2n+1');},'first-of-type':function(node){var nodeName=node.nodeName;while((node=node.previousSibling))if(node.nodeName===nodeName)return false;return true;},'last-of-type':function(node){var nodeName=node.nodeName;while((node=node.nextSibling))if(node.nodeName===nodeName)return false;return true;},'only-of-type':function(node){var prev=node,nodeName=node.nodeName;while((prev=prev.previousSibling))if(prev.nodeName===nodeName)return false;var next=node;while((next=next.nextSibling))if(next.nodeName===nodeName)return false;return true;},'enabled':function(node){return(node.disabled===false);},'disabled':function(node){return(node.disabled===true);},'checked':function(node){return node.checked||node.selected;},'focus':function(node){return this.isHTMLDocument&&this.document.activeElement===node&&(node.href||node.type||this.hasAttribute(node,'tabindex'));},'root':function(node){return(node===this.root);},'selected':function(node){return node.selected;}};for(var p in pseudos)local['pseudo:'+p]=pseudos[p];local.attributeGetters={'class':function(){return('className'in this)?this.className:this.getAttribute('class');},'for':function(){return('htmlFor'in this)?this.htmlFor:this.getAttribute('for');},'href':function(){return('href'in this)?this.getAttribute('href',2):this.getAttribute('href');},'style':function(){return(this.style)?this.style.cssText:this.getAttribute('style');}};local.getAttribute=function(node,name){var method=this.attributeGetters[name];if(method)return method.call(node);var attributeNode=node.getAttributeNode(name);return attributeNode?attributeNode.nodeValue:null;};local.overrides=[];local.override=function(regexp,method){this.overrides.push({regexp:regexp,method:method});};var reEmptyAttribute=/\[.*[*$^]=(?:["']{2})?\]/;local.override(/./,function(expression,found,first){if(!this.querySelectorAll||this.nodeType!=9||!local.isHTMLDocument||local.brokenMixedCaseQSA||(local.brokenCheckedQSA&&expression.indexOf(':checked')>-1)||(local.brokenEmptyAttributeQSA&&reEmptyAttribute.test(expression))||Slick.disableQSA)return false;var nodes,node;try{if(first)return this.querySelector(expression)||null;else nodes=this.querySelectorAll(expression);}catch(error){return false;}
var i,hasOthers=!!(found.length);if(local.starSelectsClosedQSA)for(i=0;node=nodes[i++];){if(node.nodeName>'@'&&(!hasOthers||!local.uniques[local.getUIDHTML(node)]))found.push(node);}else for(i=0;node=nodes[i++];){if(!hasOthers||!local.uniques[local.getUIDHTML(node)])found.push(node);}
if(hasOthers)local.sort(found);return true;});local.override(/^[\w-]+$|^\*$/,function(expression,found,first){var tag=expression;if(tag=='*'&&local.brokenStarGEBTN)return false;var nodes=this.getElementsByTagName(tag);if(first)return nodes[0]||null;var i,node,hasOthers=!!(found.length);for(i=0;node=nodes[i++];){if(!hasOthers||!local.uniques[local.getUID(node)])found.push(node);}
if(hasOthers)local.sort(found);return true;});local.override(/^\.[\w-]+$/,function(expression,found,first){if(!local.isHTMLDocument||(!this.getElementsByClassName&&this.querySelectorAll))return false;var nodes,node,i,hasOthers=!!(found&&found.length),className=expression.substring(1);if(this.getElementsByClassName&&!local.brokenGEBCN){nodes=this.getElementsByClassName(className);if(first)return nodes[0]||null;for(i=0;node=nodes[i++];){if(!hasOthers||!local.uniques[local.getUIDHTML(node)])found.push(node);}}else{var matchClass=new RegExp('(^|\\s)'+Slick.escapeRegExp(className)+'(\\s|$)');nodes=this.getElementsByTagName('*');for(i=0;node=nodes[i++];){className=node.className;if(!className||!matchClass.test(className))continue;if(first)return node;if(!hasOthers||!local.uniques[local.getUIDHTML(node)])found.push(node);}}
if(hasOthers)local.sort(found);return(first)?null:true;});local.override(/^#[\w-]+$/,function(expression,found,first){if(!local.isHTMLDocument||this.nodeType!=9)return false;var id=expression.substring(1),el=this.getElementById(id);if(!el)return found;if(local.idGetsName&&el.getAttributeNode('id').nodeValue!=id)return false;if(first)return el||null;var hasOthers=!!(found.length);if(!hasOthers||!local.uniques[local.getUIDHTML(el)])found.push(el);if(hasOthers)local.sort(found);return true;});if(typeof document!='undefined')local.setDocument(document);var Slick=local.Slick=(this.Slick||{});Slick.version='0.9dev';Slick.search=function(context,expression,append){return local.search(context,expression,append);};Slick.find=function(context,expression){return local.search(context,expression,null,true);};Slick.contains=function(container,node){local.setDocument(container);return local.contains(container,node);};Slick.getAttribute=function(node,name){return local.getAttribute(node,name);};Slick.match=function(node,selector){if(!(node&&selector))return false;if(!selector||selector===node)return true;if(typeof selector!='string')return false;local.setDocument(node);return local.matchNode(node,selector);};Slick.defineAttributeGetter=function(name,fn){local.attributeGetters[name]=fn;return this;};Slick.lookupAttributeGetter=function(name){return local.attributeGetters[name];};Slick.definePseudo=function(name,fn){local['pseudo:'+name]=function(node,argument){return fn.call(node,argument);};return this;};Slick.lookupPseudo=function(name){var pseudo=local['pseudo:'+name];if(pseudo)return function(argument){return pseudo.call(this,argument);};return null;};Slick.override=function(regexp,fn){local.override(regexp,fn);return this;};Slick.isXML=local.isXML;Slick.uidOf=function(node){return local.getUIDHTML(node);};if(!this.Slick)this.Slick=Slick;}).apply((typeof exports!='undefined')?exports:this);var Element=function(tag,props){var konstructor=Element.Constructors[tag];if(konstructor)return konstructor(props);if(typeof tag!='string')return document.id(tag).set(props);if(!props)props={};if(!tag.test(/^[\w-]+$/)){var parsed=Slick.parse(tag).expressions[0][0];tag=(parsed.tag=='*')?'div':parsed.tag;if(parsed.id&&props.id==null)props.id=parsed.id;var attributes=parsed.attributes;if(attributes)for(var i=0,l=attributes.length;i<l;i++){var attr=attributes[i];if(attr.value!=null&&attr.operator=='='&&props[attr.key]==null)
props[attr.key]=attr.value;}
if(parsed.classList&&props['class']==null)props['class']=parsed.classList.join(' ');}
return document.newElement(tag,props);};if(Browser.Element)Element.prototype=Browser.Element.prototype;new Type('Element',Element).mirror(function(name){if(Array.prototype[name])return;var obj={};obj[name]=function(){var results=[],args=arguments,elements=true;for(var i=0,l=this.length;i<l;i++){var element=this[i],result=results[i]=element[name].apply(element,args);elements=(elements&&typeOf(result)=='element');}
return(elements)?new Elements(results):results;};Elements.implement(obj);});if(!Browser.Element){Element.parent=Object;Element.Prototype={'$family':Function.from('element').hide()};Element.mirror(function(name,method){Element.Prototype[name]=method;});}
Element.Constructors={};Element.Constructors=new Hash;var IFrame=new Type('IFrame',function(){var params=Array.link(arguments,{properties:Type.isObject,iframe:function(obj){return(obj!=null);}});var props=params.properties||{},iframe;if(params.iframe)iframe=document.id(params.iframe);var onload=props.onload||function(){};delete props.onload;props.id=props.name=[props.id,props.name,iframe?(iframe.id||iframe.name):'IFrame_'+String.uniqueID()].pick();iframe=new Element(iframe||'iframe',props);var onLoad=function(){onload.call(iframe.contentWindow);};if(window.frames[props.id])onLoad();else iframe.addListener('load',onLoad);return iframe;});var Elements=this.Elements=function(nodes){if(nodes&&nodes.length){var uniques={},node;for(var i=0;node=nodes[i++];){var uid=Slick.uidOf(node);if(!uniques[uid]){uniques[uid]=true;this.push(node);}}}};Elements.prototype={length:0};Elements.parent=Array;new Type('Elements',Elements).implement({filter:function(filter,bind){if(!filter)return this;return new Elements(Array.filter(this,(typeOf(filter)=='string')?function(item){return item.match(filter);}:filter,bind));}.protect(),push:function(){var length=this.length;for(var i=0,l=arguments.length;i<l;i++){var item=document.id(arguments[i]);if(item)this[length++]=item;}
return(this.length=length);}.protect(),concat:function(){var newElements=new Elements(this);for(var i=0,l=arguments.length;i<l;i++){var item=arguments[i];if(Type.isEnumerable(item))newElements.append(item);else newElements.push(item);}
return newElements;}.protect(),append:function(collection){for(var i=0,l=collection.length;i<l;i++)this.push(collection[i]);return this;}.protect(),empty:function(){while(this.length)delete this[--this.length];return this;}.protect()});(function(){var splice=Array.prototype.splice,object={'0':0,'1':1,length:2};splice.call(object,1,1);if(object[1]==1)Elements.implement('splice',function(){var length=this.length;splice.apply(this,arguments);while(length>=this.length)delete this[length--];return this;}.protect());Elements.implement(Array.prototype);Array.mirror(Elements);var createElementAcceptsHTML;try{var x=document.createElement('<input name=x>');createElementAcceptsHTML=(x.name=='x');}catch(e){}
var escapeQuotes=function(html){return(''+html).replace(/&/g,'&amp;').replace(/"/g,'&quot;');};Document.implement({newElement:function(tag,props){if(props&&props.checked!=null)props.defaultChecked=props.checked;if(createElementAcceptsHTML&&props){tag='<'+tag;if(props.name)tag+=' name="'+escapeQuotes(props.name)+'"';if(props.type)tag+=' type="'+escapeQuotes(props.type)+'"';tag+='>';delete props.name;delete props.type;}
return this.id(this.createElement(tag)).set(props);}});})();Document.implement({newTextNode:function(text){return this.createTextNode(text);},getDocument:function(){return this;},getWindow:function(){return this.window;},id:(function(){var types={string:function(id,nocash,doc){id=Slick.find(doc,'#'+id.replace(/(\W)/g,'\\$1'));return(id)?types.element(id,nocash):null;},element:function(el,nocash){$uid(el);if(!nocash&&!el.$family&&!(/^object|embed$/i).test(el.tagName)){Object.append(el,Element.Prototype);}
return el;},object:function(obj,nocash,doc){if(obj.toElement)return types.element(obj.toElement(doc),nocash);return null;}};types.textnode=types.whitespace=types.window=types.document=function(zero){return zero;};return function(el,nocash,doc){if(el&&el.$family&&el.uid)return el;var type=typeOf(el);return(types[type])?types[type](el,nocash,doc||document):null;};})()});if(window.$==null)Window.implement('$',function(el,nc){return document.id(el,nc,this.document);});Window.implement({getDocument:function(){return this.document;},getWindow:function(){return this;}});[Document,Element].invoke('implement',{getElements:function(expression){return Slick.search(this,expression,new Elements);},getElement:function(expression){return document.id(Slick.find(this,expression));}});(function(search,find,match){this.Selectors={};var pseudos=this.Selectors.Pseudo=new Hash();var addSlickPseudos=function(){for(var name in pseudos)if(pseudos.hasOwnProperty(name)){Slick.definePseudo(name,pseudos[name]);delete pseudos[name];}};Slick.search=function(context,expression,append){addSlickPseudos();return search.call(this,context,expression,append);};Slick.find=function(context,expression){addSlickPseudos();return find.call(this,context,expression);};Slick.match=function(node,selector){addSlickPseudos();return match.call(this,node,selector);};})(Slick.search,Slick.find,Slick.match);if(window.$$==null)Window.implement('$$',function(selector){var elements=new Elements;if(arguments.length==1&&typeof selector=='string')return Slick.search(this.document,selector,elements);var args=Array.flatten(arguments);for(var i=0,l=args.length;i<l;i++){var item=args[i];switch(typeOf(item)){case'element':elements.push(item);break;case'string':Slick.search(this.document,item,elements);}}
return elements;});if(window.$$==null)Window.implement('$$',function(selector){if(arguments.length==1){if(typeof selector=='string')return Slick.search(this.document,selector,new Elements);else if(Type.isEnumerable(selector))return new Elements(selector);}
return new Elements(arguments);});(function(){var collected={},storage={};var props={input:'checked',option:'selected',textarea:'value'};var get=function(uid){return(storage[uid]||(storage[uid]={}));};var clean=function(item){if(item.removeEvents)item.removeEvents();if(item.clearAttributes)item.clearAttributes();var uid=item.uid;if(uid!=null){delete collected[uid];delete storage[uid];}
return item;};var camels=['defaultValue','accessKey','cellPadding','cellSpacing','colSpan','frameBorder','maxLength','readOnly','rowSpan','tabIndex','useMap'];var bools=['compact','nowrap','ismap','declare','noshade','checked','disabled','readOnly','multiple','selected','noresize','defer'];var attributes={'html':'innerHTML','class':'className','for':'htmlFor','text':(function(){var temp=document.createElement('div');return(temp.innerText==null)?'textContent':'innerText';})()};var readOnly=['type'];var expandos=['value','defaultValue'];var uriAttrs=/^(?:href|src|usemap)$/i;bools=bools.associate(bools);camels=camels.associate(camels.map(String.toLowerCase));readOnly=readOnly.associate(readOnly);Object.append(attributes,expandos.associate(expandos));var inserters={before:function(context,element){var parent=element.parentNode;if(parent)parent.insertBefore(context,element);},after:function(context,element){var parent=element.parentNode;if(parent)parent.insertBefore(context,element.nextSibling);},bottom:function(context,element){element.appendChild(context);},top:function(context,element){element.insertBefore(context,element.firstChild);}};inserters.inside=inserters.bottom;Object.each(inserters,function(inserter,where){where=where.capitalize();var methods={};methods['inject'+where]=function(el){inserter(this,document.id(el,true));return this;};methods['grab'+where]=function(el){inserter(document.id(el,true),this);return this;};Element.implement(methods);});var injectCombinator=function(expression,combinator){if(!expression)return combinator;expression=Slick.parse(expression);var expressions=expression.expressions;for(var i=expressions.length;i--;)
expressions[i][0].combinator=combinator;return expression;};Element.implement({set:function(prop,value){var property=Element.Properties[prop];(property&&property.set)?property.set.call(this,value):this.setProperty(prop,value);}.overloadSetter(),get:function(prop){var property=Element.Properties[prop];return(property&&property.get)?property.get.apply(this):this.getProperty(prop);}.overloadGetter(),erase:function(prop){var property=Element.Properties[prop];(property&&property.erase)?property.erase.apply(this):this.removeProperty(prop);return this;},setProperty:function(attribute,value){attribute=camels[attribute]||attribute;if(value==null)return this.removeProperty(attribute);var key=attributes[attribute];(key)?this[key]=value:(bools[attribute])?this[attribute]=!!value:this.setAttribute(attribute,''+value);return this;},setProperties:function(attributes){for(var attribute in attributes)this.setProperty(attribute,attributes[attribute]);return this;},getProperty:function(attribute){attribute=camels[attribute]||attribute;var key=attributes[attribute]||readOnly[attribute];return(key)?this[key]:(bools[attribute])?!!this[attribute]:(uriAttrs.test(attribute)?this.getAttribute(attribute,2):(key=this.getAttributeNode(attribute))?key.nodeValue:null)||null;},getProperties:function(){var args=Array.from(arguments);return args.map(this.getProperty,this).associate(args);},removeProperty:function(attribute){attribute=camels[attribute]||attribute;var key=attributes[attribute];(key)?this[key]='':(bools[attribute])?this[attribute]=false:this.removeAttribute(attribute);return this;},removeProperties:function(){Array.each(arguments,this.removeProperty,this);return this;},hasClass:function(className){return this.className.clean().contains(className,' ');},addClass:function(className){if(!this.hasClass(className))this.className=(this.className+' '+className).clean();return this;},removeClass:function(className){this.className=this.className.replace(new RegExp('(^|\\s)'+className+'(?:\\s|$)'),'$1');return this;},toggleClass:function(className,force){if(force==null)force=!this.hasClass(className);return(force)?this.addClass(className):this.removeClass(className);},adopt:function(){var parent=this,fragment,elements=Array.flatten(arguments),length=elements.length;if(length>1)parent=fragment=document.createDocumentFragment();for(var i=0;i<length;i++){var element=document.id(elements[i],true);if(element)parent.appendChild(element);}
if(fragment)this.appendChild(fragment);return this;},appendText:function(text,where){return this.grab(this.getDocument().newTextNode(text),where);},grab:function(el,where){inserters[where||'bottom'](document.id(el,true),this);return this;},inject:function(el,where){inserters[where||'bottom'](this,document.id(el,true));return this;},replaces:function(el){el=document.id(el,true);el.parentNode.replaceChild(this,el);return this;},wraps:function(el,where){el=document.id(el,true);return this.replaces(el).grab(el,where);},getPrevious:function(expression){return document.id(Slick.find(this,injectCombinator(expression,'!~')));},getAllPrevious:function(expression){return Slick.search(this,injectCombinator(expression,'!~'),new Elements);},getNext:function(expression){return document.id(Slick.find(this,injectCombinator(expression,'~')));},getAllNext:function(expression){return Slick.search(this,injectCombinator(expression,'~'),new Elements);},getFirst:function(expression){return document.id(Slick.search(this,injectCombinator(expression,'>'))[0]);},getLast:function(expression){return document.id(Slick.search(this,injectCombinator(expression,'>')).getLast());},getParent:function(expression){return document.id(Slick.find(this,injectCombinator(expression,'!')));},getParents:function(expression){return Slick.search(this,injectCombinator(expression,'!'),new Elements);},getSiblings:function(expression){return Slick.search(this,injectCombinator(expression,'~~'),new Elements);},getChildren:function(expression){return Slick.search(this,injectCombinator(expression,'>'),new Elements);},getWindow:function(){return this.ownerDocument.window;},getDocument:function(){return this.ownerDocument;},getElementById:function(id){return document.id(Slick.find(this,'#'+(''+id).replace(/(\W)/g,'\\$1')));},getSelected:function(){this.selectedIndex;return new Elements(Array.from(this.options).filter(function(option){return option.selected;}));},toQueryString:function(){var queryString=[];this.getElements('input, select, textarea').each(function(el){var type=el.type;if(!el.name||el.disabled||type=='submit'||type=='reset'||type=='file'||type=='image')return;var value=(el.get('tag')=='select')?el.getSelected().map(function(opt){return document.id(opt).get('value');}):((type=='radio'||type=='checkbox')&&!el.checked)?null:el.get('value');Array.from(value).each(function(val){if(typeof val!='undefined')queryString.push(encodeURIComponent(el.name)+'='+encodeURIComponent(val));});});return queryString.join('&');},clone:function(contents,keepid){contents=contents!==false;var clone=this.cloneNode(contents);var clean=function(node,element){if(!keepid)node.removeAttribute('id');if(Browser.ie){node.clearAttributes();node.mergeAttributes(element);node.removeAttribute('uid');if(node.options){var no=node.options,eo=element.options;for(var j=no.length;j--;)no[j].selected=eo[j].selected;}}
var prop=props[element.tagName.toLowerCase()];if(prop&&element[prop])node[prop]=element[prop];};var i;if(contents){var ce=clone.getElementsByTagName('*'),te=this.getElementsByTagName('*');for(i=ce.length;i--;)clean(ce[i],te[i]);}
clean(clone,this);if(Browser.ie){var ts=this.getElementsByTagName('object'),cs=clone.getElementsByTagName('object'),tl=ts.length,cl=cs.length;for(i=0;i<tl&&i<cl;i++)
cs[i].outerHTML=ts[i].outerHTML;}
return document.id(clone);},destroy:function(){var children=clean(this).getElementsByTagName('*');Array.each(children,clean);Element.dispose(this);return null;},empty:function(){Array.from(this.childNodes).each(Element.dispose);return this;},dispose:function(){return(this.parentNode)?this.parentNode.removeChild(this):this;},match:function(expression){return!expression||Slick.match(this,expression);}});var contains={contains:function(element){return Slick.contains(this,element);}};if(!document.contains)Document.implement(contains);if(!document.createElement('div').contains)Element.implement(contains);Element.implement('hasChild',function(element){return this!==element&&this.contains(element);});[Element,Window,Document].invoke('implement',{addListener:function(type,fn){if(type=='unload'){var old=fn,self=this;fn=function(){self.removeListener('unload',fn);old();};}else{collected[this.uid]=this;}
if(this.addEventListener)this.addEventListener(type,fn,false);else this.attachEvent('on'+type,fn);return this;},removeListener:function(type,fn){if(this.removeEventListener)this.removeEventListener(type,fn,false);else this.detachEvent('on'+type,fn);return this;},retrieve:function(property,dflt){var storage=get(this.uid),prop=storage[property];if(dflt!=null&&prop==null)prop=storage[property]=dflt;return prop!=null?prop:null;},store:function(property,value){var storage=get(this.uid);storage[property]=value;return this;},eliminate:function(property){var storage=get(this.uid);delete storage[property];return this;}});if(window.attachEvent&&!window.addEventListener)window.addListener('unload',function(){Object.each(collected,clean);if(window.CollectGarbage)CollectGarbage();});})();Element.Properties={};Element.Properties=new Hash;Element.Properties.style={set:function(style){this.style.cssText=style;},get:function(){return this.style.cssText;},erase:function(){this.style.cssText='';}};Element.Properties.tag={get:function(){return this.tagName.toLowerCase();}};(function(maxLength){if(maxLength!=null)Element.Properties.maxlength=Element.Properties.maxLength={get:function(){var maxlength=this.getAttribute('maxLength');return maxlength==maxLength?null:maxlength;}};})(document.createElement('input').getAttribute('maxLength'));Element.Properties.html=(function(){var tableTest=Function.attempt(function(){var table=document.createElement('table');table.innerHTML='<tr><td></td></tr>';});var wrapper=document.createElement('div');var translations={table:[1,'<table>','</table>'],select:[1,'<select>','</select>'],tbody:[2,'<table><tbody>','</tbody></table>'],tr:[3,'<table><tbody><tr>','</tr></tbody></table>']};translations.thead=translations.tfoot=translations.tbody;var html={set:function(){var html=Array.flatten(arguments).join('');var wrap=(!tableTest&&translations[this.get('tag')]);if(wrap){var first=wrapper;first.innerHTML=wrap[1]+html+wrap[2];for(var i=wrap[0];i--;)first=first.firstChild;this.empty().adopt(first.childNodes);}else{this.innerHTML=html;}}};html.erase=html.set;return html;})();(function(){var html=document.html;Element.Properties.styles={set:function(styles){this.setStyles(styles);}};var hasOpacity=(html.style.opacity!=null);var reAlpha=/alpha\(opacity=([\d.]+)\)/i;var setOpacity=function(element,opacity){if(!element.currentStyle||!element.currentStyle.hasLayout)element.style.zoom=1;if(hasOpacity){element.style.opacity=opacity;}else{opacity=(opacity==1)?'':'alpha(opacity='+opacity*100+')';var filter=element.style.filter||element.getComputedStyle('filter')||'';element.style.filter=filter.test(reAlpha)?filter.replace(reAlpha,opacity):filter+opacity;}};Element.Properties.opacity={set:function(opacity){var visibility=this.style.visibility;if(opacity==0&&visibility!='hidden')this.style.visibility='hidden';else if(opacity!=0&&visibility!='visible')this.style.visibility='visible';setOpacity(this,opacity);},get:(hasOpacity)?function(){var opacity=this.style.opacity||this.getComputedStyle('opacity');return(opacity=='')?1:opacity;}:function(){var opacity,filter=(this.style.filter||this.getComputedStyle('filter'));if(filter)opacity=filter.match(reAlpha);return(opacity==null||filter==null)?1:(opacity[1]/100);}};var floatName=(html.style.cssFloat==null)?'styleFloat':'cssFloat';Element.implement({getComputedStyle:function(property){if(this.currentStyle)return this.currentStyle[property.camelCase()];var defaultView=Element.getDocument(this).defaultView,computed=defaultView?defaultView.getComputedStyle(this,null):null;return(computed)?computed.getPropertyValue((property==floatName)?'float':property.hyphenate()):null;},setOpacity:function(value){setOpacity(this,value);return this;},getOpacity:function(){return this.get('opacity');},setStyle:function(property,value){switch(property){case'opacity':return this.set('opacity',parseFloat(value));case'float':property=floatName;}
property=property.camelCase();if(typeOf(value)!='string'){var map=(Element.Styles[property]||'@').split(' ');value=Array.from(value).map(function(val,i){if(!map[i])return'';return(typeOf(val)=='number')?map[i].replace('@',Math.round(val)):val;}).join(' ');}else if(value==String(Number(value))){value=Math.round(value);}
this.style[property]=value;return this;},getStyle:function(property){switch(property){case'opacity':return this.get('opacity');case'float':property=floatName;}
property=property.camelCase();var result=this.style[property];if(!result||property=='zIndex'){result=[];for(var style in Element.ShortStyles){if(property!=style)continue;for(var s in Element.ShortStyles[style])result.push(this.getStyle(s));return result.join(' ');}
result=this.getComputedStyle(property);}
if(result){result=String(result);var color=result.match(/rgba?\([\d\s,]+\)/);if(color)result=result.replace(color[0],color[0].rgbToHex());}
if(Browser.opera||(Browser.ie&&isNaN(parseFloat(result)))){if(property.test(/^(height|width)$/)){var values=(property=='width')?['left','right']:['top','bottom'],size=0;values.each(function(value){size+=this.getStyle('border-'+value+'-width').toInt()+this.getStyle('padding-'+value).toInt();},this);return this['offset'+property.capitalize()]-size+'px';}
if(Browser.opera&&String(result).indexOf('px')!=-1)return result;if(property.test(/(border(.+)Width|margin|padding)/))return'0px';}
return result;},setStyles:function(styles){for(var style in styles)this.setStyle(style,styles[style]);return this;},getStyles:function(){var result={};Array.flatten(arguments).each(function(key){result[key]=this.getStyle(key);},this);return result;}});Element.Styles={left:'@px',top:'@px',bottom:'@px',right:'@px',width:'@px',height:'@px',maxWidth:'@px',maxHeight:'@px',minWidth:'@px',minHeight:'@px',backgroundColor:'rgb(@, @, @)',backgroundPosition:'@px @px',color:'rgb(@, @, @)',fontSize:'@px',letterSpacing:'@px',lineHeight:'@px',clip:'rect(@px @px @px @px)',margin:'@px @px @px @px',padding:'@px @px @px @px',border:'@px @ rgb(@, @, @) @px @ rgb(@, @, @) @px @ rgb(@, @, @)',borderWidth:'@px @px @px @px',borderStyle:'@ @ @ @',borderColor:'rgb(@, @, @) rgb(@, @, @) rgb(@, @, @) rgb(@, @, @)',zIndex:'@','zoom':'@',fontWeight:'@',textIndent:'@px',opacity:'@'};Element.Styles=new Hash(Element.Styles);Element.ShortStyles={margin:{},padding:{},border:{},borderWidth:{},borderStyle:{},borderColor:{}};['Top','Right','Bottom','Left'].each(function(direction){var Short=Element.ShortStyles;var All=Element.Styles;['margin','padding'].each(function(style){var sd=style+direction;Short[style][sd]=All[sd]='@px';});var bd='border'+direction;Short.border[bd]=All[bd]='@px @ rgb(@, @, @)';var bdw=bd+'Width',bds=bd+'Style',bdc=bd+'Color';Short[bd]={};Short.borderWidth[bdw]=Short[bd][bdw]=All[bdw]='@px';Short.borderStyle[bds]=Short[bd][bds]=All[bds]='@';Short.borderColor[bdc]=Short[bd][bdc]=All[bdc]='rgb(@, @, @)';});})();(function(){Element.Properties.events={set:function(events){this.addEvents(events);}};[Element,Window,Document].invoke('implement',{addEvent:function(type,fn){var events=this.retrieve('events',{});if(!events[type])events[type]={keys:[],values:[]};if(events[type].keys.contains(fn))return this;events[type].keys.push(fn);var realType=type,custom=Element.Events[type],condition=fn,self=this;if(custom){if(custom.onAdd)custom.onAdd.call(this,fn);if(custom.condition){condition=function(event){if(custom.condition.call(this,event))return fn.call(this,event);return true;};}
realType=custom.base||realType;}
var defn=function(){return fn.call(self);};var nativeEvent=Element.NativeEvents[realType];if(nativeEvent){if(nativeEvent==2){defn=function(event){event=new Event(event,self.getWindow());if(condition.call(self,event)===false)event.stop();};}
this.addListener(realType,defn);}
events[type].values.push(defn);return this;},removeEvent:function(type,fn){var events=this.retrieve('events');if(!events||!events[type])return this;var list=events[type];var index=list.keys.indexOf(fn);if(index==-1)return this;var value=list.values[index];delete list.keys[index];delete list.values[index];var custom=Element.Events[type];if(custom){if(custom.onRemove)custom.onRemove.call(this,fn);type=custom.base||type;}
return(Element.NativeEvents[type])?this.removeListener(type,value):this;},addEvents:function(events){for(var event in events)this.addEvent(event,events[event]);return this;},removeEvents:function(events){var type;if(typeOf(events)=='object'){for(type in events)this.removeEvent(type,events[type]);return this;}
var attached=this.retrieve('events');if(!attached)return this;if(!events){for(type in attached)this.removeEvents(type);this.eliminate('events');}else if(attached[events]){attached[events].keys.each(function(fn){this.removeEvent(events,fn);},this);delete attached[events];}
return this;},fireEvent:function(type,args,delay){var events=this.retrieve('events');if(!events||!events[type])return this;args=Array.from(args);events[type].keys.each(function(fn){if(delay)fn.delay(delay,this,args);else fn.apply(this,args);},this);return this;},cloneEvents:function(from,type){from=document.id(from);var events=from.retrieve('events');if(!events)return this;if(!type){for(var eventType in events)this.cloneEvents(from,eventType);}else if(events[type]){events[type].keys.each(function(fn){this.addEvent(type,fn);},this);}
return this;}});try{if(typeof HTMLElement!='undefined')
HTMLElement.prototype.fireEvent=Element.prototype.fireEvent;}catch(e){}
Element.NativeEvents={click:2,dblclick:2,mouseup:2,mousedown:2,contextmenu:2,mousewheel:2,DOMMouseScroll:2,mouseover:2,mouseout:2,mousemove:2,selectstart:2,selectend:2,keydown:2,keypress:2,keyup:2,orientationchange:2,touchstart:2,touchmove:2,touchend:2,touchcancel:2,gesturestart:2,gesturechange:2,gestureend:2,focus:2,blur:2,change:2,reset:2,select:2,submit:2,load:2,unload:1,beforeunload:2,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1};var check=function(event){var related=event.relatedTarget;if(related==null)return true;if(!related)return false;return(related!=this&&related.prefix!='xul'&&typeOf(this)!='document'&&!this.contains(related));};Element.Events={mouseenter:{base:'mouseover',condition:check},mouseleave:{base:'mouseout',condition:check},mousewheel:{base:(Browser.firefox)?'DOMMouseScroll':'mousewheel'}};Element.Events=new Hash(Element.Events);})();(function(){Element.implement({scrollTo:function(x,y){if(isBody(this)){this.getWindow().scrollTo(x,y);}else{this.scrollLeft=x;this.scrollTop=y;}
return this;},getSize:function(){if(isBody(this))return this.getWindow().getSize();return{x:this.offsetWidth,y:this.offsetHeight};},getScrollSize:function(){if(isBody(this))return this.getWindow().getScrollSize();return{x:this.scrollWidth,y:this.scrollHeight};},getScroll:function(){if(isBody(this))return this.getWindow().getScroll();return{x:this.scrollLeft,y:this.scrollTop};},getScrolls:function(){var element=this.parentNode,position={x:0,y:0};while(element&&!isBody(element)){position.x+=element.scrollLeft;position.y+=element.scrollTop;element=element.parentNode;}
return position;},getOffsetParent:function(){var element=this;if(isBody(element))return null;if(!Browser.ie)return element.offsetParent;while((element=element.parentNode)){if(styleString(element,'position')!='static'||isBody(element))return element;}
return null;},getOffsets:function(){if(this.getBoundingClientRect&&!Browser.Platform.ios){var bound=this.getBoundingClientRect(),html=document.id(this.getDocument().documentElement),htmlScroll=html.getScroll(),elemScrolls=this.getScrolls(),isFixed=(styleString(this,'position')=='fixed');return{x:bound.left.toInt()+elemScrolls.x+((isFixed)?0:htmlScroll.x)-html.clientLeft,y:bound.top.toInt()+elemScrolls.y+((isFixed)?0:htmlScroll.y)-html.clientTop};}
var element=this,position={x:0,y:0};if(isBody(this))return position;while(element&&!isBody(element)){position.x+=element.offsetLeft;position.y+=element.offsetTop;if(Browser.firefox){if(!borderBox(element)){position.x+=leftBorder(element);position.y+=topBorder(element);}
var parent=element.parentNode;if(parent&&styleString(parent,'overflow')!='visible'){position.x+=leftBorder(parent);position.y+=topBorder(parent);}}else if(element!=this&&Browser.safari){position.x+=leftBorder(element);position.y+=topBorder(element);}
element=element.offsetParent;}
if(Browser.firefox&&!borderBox(this)){position.x-=leftBorder(this);position.y-=topBorder(this);}
return position;},getPosition:function(relative){if(isBody(this))return{x:0,y:0};var offset=this.getOffsets(),scroll=this.getScrolls();var position={x:offset.x-scroll.x,y:offset.y-scroll.y};if(relative&&(relative=document.id(relative))){var relativePosition=relative.getPosition();return{x:position.x-relativePosition.x-leftBorder(relative),y:position.y-relativePosition.y-topBorder(relative)};}
return position;},getCoordinates:function(element){if(isBody(this))return this.getWindow().getCoordinates();var position=this.getPosition(element),size=this.getSize();var obj={left:position.x,top:position.y,width:size.x,height:size.y};obj.right=obj.left+obj.width;obj.bottom=obj.top+obj.height;return obj;},computePosition:function(obj){return{left:obj.x-styleNumber(this,'margin-left'),top:obj.y-styleNumber(this,'margin-top')};},setPosition:function(obj){return this.setStyles(this.computePosition(obj));}});[Document,Window].invoke('implement',{getSize:function(){var doc=getCompatElement(this);return{x:doc.clientWidth,y:doc.clientHeight};},getScroll:function(){var win=this.getWindow(),doc=getCompatElement(this);return{x:win.pageXOffset||doc.scrollLeft,y:win.pageYOffset||doc.scrollTop};},getScrollSize:function(){var doc=getCompatElement(this),min=this.getSize(),body=this.getDocument().body;return{x:Math.max(doc.scrollWidth,body.scrollWidth,min.x),y:Math.max(doc.scrollHeight,body.scrollHeight,min.y)};},getPosition:function(){return{x:0,y:0};},getCoordinates:function(){var size=this.getSize();return{top:0,left:0,bottom:size.y,right:size.x,height:size.y,width:size.x};}});var styleString=Element.getComputedStyle;function styleNumber(element,style){return styleString(element,style).toInt()||0;};function borderBox(element){return styleString(element,'-moz-box-sizing')=='border-box';};function topBorder(element){return styleNumber(element,'border-top-width');};function leftBorder(element){return styleNumber(element,'border-left-width');};function isBody(element){return(/^(?:body|html)$/i).test(element.tagName);};function getCompatElement(element){var doc=element.getDocument();return(!doc.compatMode||doc.compatMode=='CSS1Compat')?doc.html:doc.body;};})();Element.alias({position:'setPosition'});[Window,Document,Element].invoke('implement',{getHeight:function(){return this.getSize().y;},getWidth:function(){return this.getSize().x;},getScrollTop:function(){return this.getScroll().y;},getScrollLeft:function(){return this.getScroll().x;},getScrollHeight:function(){return this.getScrollSize().y;},getScrollWidth:function(){return this.getScrollSize().x;},getTop:function(){return this.getPosition().y;},getLeft:function(){return this.getPosition().x;}});(function(){var Fx=this.Fx=new Class({Implements:[Chain,Events,Options],options:{fps:50,unit:false,duration:500,link:'ignore'},initialize:function(options){this.subject=this.subject||this;this.setOptions(options);},getTransition:function(){return function(p){return-(Math.cos(Math.PI*p)-1)/2;};},step:function(){var time=Date.now();if(time<this.time+this.options.duration){var delta=this.transition((time-this.time)/this.options.duration);this.set(this.compute(this.from,this.to,delta));}else{this.set(this.compute(this.from,this.to,1));this.complete();}},set:function(now){return now;},compute:function(from,to,delta){return Fx.compute(from,to,delta);},check:function(){if(!this.timer)return true;switch(this.options.link){case'cancel':this.cancel();return true;case'chain':this.chain(this.caller.pass(arguments,this));return false;}
return false;},start:function(from,to){if(!this.check(from,to))return this;var duration=this.options.duration;this.options.duration=Fx.Durations[duration]||duration.toInt();this.from=from;this.to=to;this.time=0;this.transition=this.getTransition();this.startTimer();this.onStart();return this;},complete:function(){if(this.stopTimer())this.onComplete();return this;},cancel:function(){if(this.stopTimer())this.onCancel();return this;},onStart:function(){this.fireEvent('start',this.subject);},onComplete:function(){this.fireEvent('complete',this.subject);if(!this.callChain())this.fireEvent('chainComplete',this.subject);},onCancel:function(){this.fireEvent('cancel',this.subject).clearChain();},pause:function(){this.stopTimer();return this;},resume:function(){this.startTimer();return this;},stopTimer:function(){if(!this.timer)return false;this.time=Date.now()-this.time;this.timer=removeInstance(this);return true;},startTimer:function(){if(this.timer)return false;this.time=Date.now()-this.time;this.timer=addInstance(this);return true;}});Fx.compute=function(from,to,delta){return(to-from)*delta+from;};Fx.Durations={'short':250,'normal':500,'long':1000};var instances={},timers={};var loop=function(){for(var i=this.length;i--;){if(this[i])this[i].step();}};var addInstance=function(instance){var fps=instance.options.fps,list=instances[fps]||(instances[fps]=[]);list.push(instance);if(!timers[fps])timers[fps]=loop.periodical(Math.round(1000/fps),list);return true;};var removeInstance=function(instance){var fps=instance.options.fps,list=instances[fps]||[];list.erase(instance);if(!list.length&&timers[fps])timers[fps]=clearInterval(timers[fps]);return false;};})();Fx.CSS=new Class({Extends:Fx,prepare:function(element,property,values){values=Array.from(values);if(values[1]==null){values[1]=values[0];values[0]=element.getStyle(property);}
var parsed=values.map(this.parse);return{from:parsed[0],to:parsed[1]};},parse:function(value){value=Function.from(value)();value=(typeof value=='string')?value.split(' '):Array.from(value);return value.map(function(val){val=String(val);var found=false;Object.each(Fx.CSS.Parsers,function(parser,key){if(found)return;var parsed=parser.parse(val);if(parsed||parsed===0)found={value:parsed,parser:parser};});found=found||{value:val,parser:Fx.CSS.Parsers.String};return found;});},compute:function(from,to,delta){var computed=[];(Math.min(from.length,to.length)).times(function(i){computed.push({value:from[i].parser.compute(from[i].value,to[i].value,delta),parser:from[i].parser});});computed.$family=Function.from('fx:css:value');return computed;},serve:function(value,unit){if(typeOf(value)!='fx:css:value')value=this.parse(value);var returned=[];value.each(function(bit){returned=returned.concat(bit.parser.serve(bit.value,unit));});return returned;},render:function(element,property,value,unit){element.setStyle(property,this.serve(value,unit));},search:function(selector){if(Fx.CSS.Cache[selector])return Fx.CSS.Cache[selector];var to={};Array.each(document.styleSheets,function(sheet,j){var href=sheet.href;if(href&&href.contains('://')&&!href.contains(document.domain))return;var rules=sheet.rules||sheet.cssRules;Array.each(rules,function(rule,i){if(!rule.style)return;var selectorText=(rule.selectorText)?rule.selectorText.replace(/^\w+/,function(m){return m.toLowerCase();}):null;if(!selectorText||!selectorText.test('^'+selector+'$'))return;Element.Styles.each(function(value,style){if(!rule.style[style]||Element.ShortStyles[style])return;value=String(rule.style[style]);to[style]=(value.test(/^rgb/))?value.rgbToHex():value;});});});return Fx.CSS.Cache[selector]=to;}});Fx.CSS.Cache={};Fx.CSS.Parsers={Color:{parse:function(value){if(value.match(/^#[0-9a-f]{3,6}$/i))return value.hexToRgb(true);return((value=value.match(/(\d+),\s*(\d+),\s*(\d+)/)))?[value[1],value[2],value[3]]:false;},compute:function(from,to,delta){return from.map(function(value,i){return Math.round(Fx.compute(from[i],to[i],delta));});},serve:function(value){return value.map(Number);}},Number:{parse:parseFloat,compute:Fx.compute,serve:function(value,unit){return(unit)?value+unit:value;}},String:{parse:Function.from(false),compute:function(zero,one){return one;},serve:function(zero){return zero;}}};Fx.CSS.Parsers=new Hash(Fx.CSS.Parsers);Fx.Tween=new Class({Extends:Fx.CSS,initialize:function(element,options){this.element=this.subject=document.id(element);this.parent(options);},set:function(property,now){if(arguments.length==1){now=property;property=this.property||this.options.property;}
this.render(this.element,property,now,this.options.unit);return this;},start:function(property,from,to){if(!this.check(property,from,to))return this;var args=Array.flatten(arguments);this.property=this.options.property||args.shift();var parsed=this.prepare(this.element,this.property,args);return this.parent(parsed.from,parsed.to);}});Element.Properties.tween={set:function(options){this.get('tween').cancel().setOptions(options);return this;},get:function(){var tween=this.retrieve('tween');if(!tween){tween=new Fx.Tween(this,{link:'cancel'});this.store('tween',tween);}
return tween;}};Element.implement({tween:function(property,from,to){this.get('tween').start(arguments);return this;},fade:function(how){var fade=this.get('tween'),o='opacity',toggle;how=[how,'toggle'].pick();switch(how){case'in':fade.start(o,1);break;case'out':fade.start(o,0);break;case'show':fade.set(o,1);break;case'hide':fade.set(o,0);break;case'toggle':var flag=this.retrieve('fade:flag',this.get('opacity')==1);fade.start(o,(flag)?0:1);this.store('fade:flag',!flag);toggle=true;break;default:fade.start(o,arguments);}
if(!toggle)this.eliminate('fade:flag');return this;},highlight:function(start,end){if(!end){end=this.retrieve('highlight:original',this.getStyle('background-color'));end=(end=='transparent')?'#fff':end;}
var tween=this.get('tween');tween.start('background-color',start||'#ffff88',end).chain(function(){this.setStyle('background-color',this.retrieve('highlight:original'));tween.callChain();}.bind(this));return this;}});Fx.Morph=new Class({Extends:Fx.CSS,initialize:function(element,options){this.element=this.subject=document.id(element);this.parent(options);},set:function(now){if(typeof now=='string')now=this.search(now);for(var p in now)this.render(this.element,p,now[p],this.options.unit);return this;},compute:function(from,to,delta){var now={};for(var p in from)now[p]=this.parent(from[p],to[p],delta);return now;},start:function(properties){if(!this.check(properties))return this;if(typeof properties=='string')properties=this.search(properties);var from={},to={};for(var p in properties){var parsed=this.prepare(this.element,p,properties[p]);from[p]=parsed.from;to[p]=parsed.to;}
return this.parent(from,to);}});Element.Properties.morph={set:function(options){this.get('morph').cancel().setOptions(options);return this;},get:function(){var morph=this.retrieve('morph');if(!morph){morph=new Fx.Morph(this,{link:'cancel'});this.store('morph',morph);}
return morph;}};Element.implement({morph:function(props){this.get('morph').start(props);return this;}});Fx.implement({getTransition:function(){var trans=this.options.transition||Fx.Transitions.Sine.easeInOut;if(typeof trans=='string'){var data=trans.split(':');trans=Fx.Transitions;trans=trans[data[0]]||trans[data[0].capitalize()];if(data[1])trans=trans['ease'+data[1].capitalize()+(data[2]?data[2].capitalize():'')];}
return trans;}});Fx.Transition=function(transition,params){params=Array.from(params);return Object.append(transition,{easeIn:function(pos){return transition(pos,params);},easeOut:function(pos){return 1-transition(1-pos,params);},easeInOut:function(pos){return(pos<=0.5)?transition(2*pos,params)/2:(2-transition(2*(1-pos),params))/2;}});};Fx.Transitions={linear:function(zero){return zero;}};Fx.Transitions=new Hash(Fx.Transitions);Fx.Transitions.extend=function(transitions){for(var transition in transitions)Fx.Transitions[transition]=new Fx.Transition(transitions[transition]);};Fx.Transitions.extend({Pow:function(p,x){return Math.pow(p,x&&x[0]||6);},Expo:function(p){return Math.pow(2,8*(p-1));},Circ:function(p){return 1-Math.sin(Math.acos(p));},Sine:function(p){return 1-Math.sin((1-p)*Math.PI/2);},Back:function(p,x){x=x&&x[0]||1.618;return Math.pow(p,2)*((x+1)*p-x);},Bounce:function(p){var value;for(var a=0,b=1;1;a+=b,b/=2){if(p>=(7-4*a)/11){value=b*b-Math.pow((11-6*a-11*p)/4,2);break;}}
return value;},Elastic:function(p,x){return Math.pow(2,10*--p)*Math.cos(20*p*Math.PI*(x&&x[0]||1)/3);}});['Quad','Cubic','Quart','Quint'].each(function(transition,i){Fx.Transitions[transition]=new Fx.Transition(function(p){return Math.pow(p,[i+2]);});});(function(){var progressSupport=('onprogress'in new Browser.Request);var Request=this.Request=new Class({Implements:[Chain,Events,Options],options:{url:'',data:'',headers:{'X-Requested-With':'XMLHttpRequest','Accept':'text/javascript, text/html, application/xml, text/xml, */*'},async:true,format:false,method:'post',link:'ignore',isSuccess:null,emulation:true,urlEncoded:true,encoding:'utf-8',evalScripts:false,evalResponse:false,timeout:0,noCache:false},initialize:function(options){this.xhr=new Browser.Request();this.setOptions(options);this.headers=this.options.headers;},onStateChange:function(){var xhr=this.xhr;if(xhr.readyState!=4||!this.running)return;this.running=false;this.status=0;Function.attempt(function(){var status=xhr.status;this.status=(status==1223)?204:status;}.bind(this));xhr.onreadystatechange=function(){};clearTimeout(this.timer);this.response={text:this.xhr.responseText||'',xml:this.xhr.responseXML};if(this.options.isSuccess.call(this,this.status))
this.success(this.response.text,this.response.xml);else
this.failure();},isSuccess:function(){var status=this.status;return(status>=200&&status<300);},isRunning:function(){return!!this.running;},processScripts:function(text){if(this.options.evalResponse||(/(ecma|java)script/).test(this.getHeader('Content-type')))return Browser.exec(text);return text.stripScripts(this.options.evalScripts);},success:function(text,xml){this.onSuccess(this.processScripts(text),xml);},onSuccess:function(){this.fireEvent('complete',arguments).fireEvent('success',arguments).callChain();},failure:function(){this.onFailure();},onFailure:function(){this.fireEvent('complete').fireEvent('failure',this.xhr);},loadstart:function(event){this.fireEvent('loadstart',[event,this.xhr]);},progress:function(event){this.fireEvent('progress',[event,this.xhr]);},timeout:function(){this.fireEvent('timeout',this.xhr);},setHeader:function(name,value){this.headers[name]=value;return this;},getHeader:function(name){return Function.attempt(function(){return this.xhr.getResponseHeader(name);}.bind(this));},check:function(){if(!this.running)return true;switch(this.options.link){case'cancel':this.cancel();return true;case'chain':this.chain(this.caller.pass(arguments,this));return false;}
return false;},send:function(options){if(!this.check(options))return this;this.options.isSuccess=this.options.isSuccess||this.isSuccess;this.running=true;var type=typeOf(options);if(type=='string'||type=='element')options={data:options};var old=this.options;options=Object.append({data:old.data,url:old.url,method:old.method},options);var data=options.data,url=String(options.url),method=options.method.toLowerCase();switch(typeOf(data)){case'element':data=document.id(data).toQueryString();break;case'object':case'hash':data=Object.toQueryString(data);}
if(this.options.format){var format='format='+this.options.format;data=(data)?format+'&'+data:format;}
if(this.options.emulation&&!['get','post'].contains(method)){var _method='_method='+method;data=(data)?_method+'&'+data:_method;method='post';}
if(this.options.urlEncoded&&['post','put'].contains(method)){var encoding=(this.options.encoding)?'; charset='+this.options.encoding:'';this.headers['Content-type']='application/x-www-form-urlencoded'+encoding;}
if(!url)url=document.location.pathname;var trimPosition=url.lastIndexOf('/');if(trimPosition>-1&&(trimPosition=url.indexOf('#'))>-1)url=url.substr(0,trimPosition);if(this.options.noCache)
url+=(url.contains('?')?'&':'?')+String.uniqueID();if(data&&method=='get'){url+=(url.contains('?')?'&':'?')+data;data=null;}
var xhr=this.xhr;if(progressSupport){xhr.onloadstart=this.loadstart.bind(this);xhr.onprogress=this.progress.bind(this);}
xhr.open(method.toUpperCase(),url,this.options.async,this.options.user,this.options.password);if(this.options.user&&'withCredentials'in xhr)xhr.withCredentials=true;xhr.onreadystatechange=this.onStateChange.bind(this);Object.each(this.headers,function(value,key){try{xhr.setRequestHeader(key,value);}catch(e){this.fireEvent('exception',[key,value]);}},this);this.fireEvent('request');xhr.send(data);if(!this.options.async)this.onStateChange();if(this.options.timeout)this.timer=this.timeout.delay(this.options.timeout,this);return this;},cancel:function(){if(!this.running)return this;this.running=false;var xhr=this.xhr;xhr.abort();clearTimeout(this.timer);xhr.onreadystatechange=xhr.onprogress=xhr.onloadstart=function(){};this.xhr=new Browser.Request();this.fireEvent('cancel');return this;}});var methods={};['get','post','put','delete','GET','POST','PUT','DELETE'].each(function(method){methods[method]=function(data){return this.send({data:data,method:method});};});Request.implement(methods);Element.Properties.send={set:function(options){var send=this.get('send').cancel();send.setOptions(options);return this;},get:function(){var send=this.retrieve('send');if(!send){send=new Request({data:this,link:'cancel',method:this.get('method')||'post',url:this.get('action')});this.store('send',send);}
return send;}};Element.implement({send:function(url){var sender=this.get('send');sender.send({data:this,url:url||sender.options.url});return this;}});})();Request.HTML=new Class({Extends:Request,options:{update:false,append:false,evalScripts:true,filter:false,headers:{Accept:'text/html, application/xml, text/xml, */*'}},success:function(text){var options=this.options,response=this.response;response.html=text.stripScripts(function(script){response.javascript=script;});var match=response.html.match(/<body[^>]*>([\s\S]*?)<\/body>/i);if(match)response.html=match[1];var temp=new Element('div').set('html',response.html);response.tree=temp.childNodes;response.elements=temp.getElements('*');if(options.filter)response.tree=response.elements.filter(options.filter);if(options.update)document.id(options.update).empty().set('html',response.html);else if(options.append)document.id(options.append).adopt(temp.getChildren());if(options.evalScripts)Browser.exec(response.javascript);this.onSuccess(response.tree,response.elements,response.html,response.javascript);}});Element.Properties.load={set:function(options){var load=this.get('load').cancel();load.setOptions(options);return this;},get:function(){var load=this.retrieve('load');if(!load){load=new Request.HTML({data:this,link:'cancel',update:this,method:'get'});this.store('load',load);}
return load;}};Element.implement({load:function(){this.get('load').send(Array.link(arguments,{data:Type.isObject,url:Type.isString}));return this;}});if(!this.JSON)this.JSON={};JSON=new Hash({stringify:JSON.stringify,parse:JSON.parse});Object.append(JSON,{$specialChars:{'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},$replaceChars:function(chr){return JSON.$specialChars[chr]||'\\u00'+Math.floor(chr.charCodeAt()/16).toString(16)+(chr.charCodeAt()%16).toString(16);},encode:function(obj){switch(typeOf(obj)){case'string':return'"'+obj.replace(/[\x00-\x1f\\"]/g,JSON.$replaceChars)+'"';case'array':return'['+String(obj.map(JSON.encode).clean())+']';case'object':case'hash':var string=[];Object.each(obj,function(value,key){var json=JSON.encode(value);if(json)string.push(JSON.encode(key)+':'+json);});return'{'+string+'}';case'number':case'boolean':return String(obj);case'null':return'null';}
return null;},decode:function(string,secure){if(typeOf(string)!='string'||!string.length)return null;if(secure&&!(/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/).test(string.replace(/\\./g,'@').replace(/"[^"\\\n\r]*"/g,'')))return null;return eval('('+string+')');}});Request.JSON=new Class({Extends:Request,options:{secure:true},initialize:function(options){this.parent(options);Object.append(this.headers,{'Accept':'application/json','X-Request':'JSON'});},success:function(text){var secure=this.options.secure;var json=this.response.json=Function.attempt(function(){return JSON.decode(text,secure);});if(json==null)this.onFailure();else this.onSuccess(json,text);}});var Cookie=new Class({Implements:Options,options:{path:'/',domain:false,duration:false,secure:false,document:document,encode:true},initialize:function(key,options){this.key=key;this.setOptions(options);},write:function(value){if(this.options.encode)value=encodeURIComponent(value);if(this.options.domain)value+='; domain='+this.options.domain;if(this.options.path)value+='; path='+this.options.path;if(this.options.duration){var date=new Date();date.setTime(date.getTime()+this.options.duration*24*60*60*1000);value+='; expires='+date.toGMTString();}
if(this.options.secure)value+='; secure';this.options.document.cookie=this.key+'='+value;return this;},read:function(){var value=this.options.document.cookie.match('(?:^|;)\\s*'+this.key.escapeRegExp()+'=([^;]*)');return(value)?decodeURIComponent(value[1]):null;},dispose:function(){new Cookie(this.key,Object.merge({},this.options,{duration:-1})).write('');return this;}});Cookie.write=function(key,value,options){return new Cookie(key,options).write(value);};Cookie.read=function(key){return new Cookie(key).read();};Cookie.dispose=function(key,options){return new Cookie(key,options).dispose();};(function(window,document){var ready,loaded,checks=[],shouldPoll,timer,isFramed=true;try{isFramed=window.frameElement!=null;}catch(e){}
var domready=function(){clearTimeout(timer);if(ready)return;Browser.loaded=ready=true;document.removeListener('DOMContentLoaded',domready).removeListener('readystatechange',check);document.fireEvent('domready');window.fireEvent('domready');};var check=function(){for(var i=checks.length;i--;)if(checks[i]()){domready();return true;}
return false;};var poll=function(){clearTimeout(timer);if(!check())timer=setTimeout(poll,10);};document.addListener('DOMContentLoaded',domready);var testElement=document.createElement('div');if(testElement.doScroll&&!isFramed){checks.push(function(){try{testElement.doScroll();return true;}catch(e){}
return false;});shouldPoll=true;}
if(document.readyState)checks.push(function(){var state=document.readyState;return(state=='loaded'||state=='complete');});if('onreadystatechange'in document)document.addListener('readystatechange',check);else shouldPoll=true;if(shouldPoll)poll();Element.Events.domready={onAdd:function(fn){if(ready)fn.call(this);}};Element.Events.load={base:'load',onAdd:function(fn){if(loaded&&this==window)fn.call(this);},condition:function(){if(this==window){domready();delete Element.Events.load;}
return true;}};window.addEvent('load',function(){loaded=true;});})(window,document);(function(){var id=0;var Swiff=this.Swiff=new Class({Implements:Options,options:{id:null,height:1,width:1,container:null,properties:{},params:{quality:'high',allowScriptAccess:'always',wMode:'window',swLiveConnect:true},callBacks:{},vars:{}},toElement:function(){return this.object;},initialize:function(path,options){this.instance='Swiff_'+id++;this.setOptions(options);options=this.options;var id=this.id=options.id||this.instance;var container=document.id(options.container);Swiff.CallBacks[this.instance]={};var params=options.params,vars=options.vars,callBacks=options.callBacks;var properties=Object.append({height:options.height,width:options.width},options.properties);var self=this;for(var callBack in callBacks){Swiff.CallBacks[this.instance][callBack]=(function(option){return function(){return option.apply(self.object,arguments);};})(callBacks[callBack]);vars[callBack]='Swiff.CallBacks.'+this.instance+'.'+callBack;}
params.flashVars=Object.toQueryString(vars);if(Browser.ie){properties.classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000';params.movie=path;}else{properties.type='application/x-shockwave-flash';}
properties.data=path;var build='<object id="'+id+'"';for(var property in properties)build+=' '+property+'="'+properties[property]+'"';build+='>';for(var param in params){if(params[param])build+='<param name="'+param+'" value="'+params[param]+'" />';}
build+='</object>';this.object=((container)?container.empty():new Element('div')).set('html',build).firstChild;},replaces:function(element){element=document.id(element,true);element.parentNode.replaceChild(this.toElement(),element);return this;},inject:function(element){document.id(element,true).appendChild(this.toElement());return this;},remote:function(){return Swiff.remote.apply(Swiff,[this.toElement()].extend(arguments));}});Swiff.CallBacks={};Swiff.remote=function(obj,fn){var rs=obj.CallFunction('<invoke name="'+fn+'" returntype="javascript">'+__flash__argumentsToXML(arguments,2)+'</invoke>');return eval(rs);};})();MooTools.More={'version':'1.3.0.1','build':'6dce99bed2792dffcbbbb4ddc15a1fb9a41994b5'};(function(){if(this.Hash)return;var Hash=this.Hash=new Type('Hash',function(object){if(typeOf(object)=='hash')object=Object.clone(object.getClean());for(var key in object)this[key]=object[key];return this;});this.$H=function(object){return new Hash(object);};Hash.implement({forEach:function(fn,bind){Object.forEach(this,fn,bind);},getClean:function(){var clean={};for(var key in this){if(this.hasOwnProperty(key))clean[key]=this[key];}
return clean;},getLength:function(){var length=0;for(var key in this){if(this.hasOwnProperty(key))length++;}
return length;}});Hash.alias('each','forEach');Hash.implement({has:Object.prototype.hasOwnProperty,keyOf:function(value){return Object.keyOf(this,value);},hasValue:function(value){return Object.contains(this,value);},extend:function(properties){Hash.each(properties||{},function(value,key){Hash.set(this,key,value);},this);return this;},combine:function(properties){Hash.each(properties||{},function(value,key){Hash.include(this,key,value);},this);return this;},erase:function(key){if(this.hasOwnProperty(key))delete this[key];return this;},get:function(key){return(this.hasOwnProperty(key))?this[key]:null;},set:function(key,value){if(!this[key]||this.hasOwnProperty(key))this[key]=value;return this;},empty:function(){Hash.each(this,function(value,key){delete this[key];},this);return this;},include:function(key,value){if(this[key]==undefined)this[key]=value;return this;},map:function(fn,bind){return new Hash(Object.map(this,fn,bind));},filter:function(fn,bind){return new Hash(Object.filter(this,fn,bind));},every:function(fn,bind){return Object.every(this,fn,bind);},some:function(fn,bind){return Object.some(this,fn,bind);},getKeys:function(){return Object.keys(this);},getValues:function(){return Object.values(this);},toQueryString:function(base){return Object.toQueryString(this,base);}});Hash.alias({indexOf:'keyOf',contains:'hasValue'});})();Events.Pseudos=function(pseudos,addEvent,removeEvent){var storeKey='monitorEvents:';var storageOf=function(object){return{store:object.store?function(key,value){object.store(storeKey+key,value);}:function(key,value){(object.$monitorEvents||(object.$monitorEvents={}))[key]=value;},retrieve:object.retrieve?function(key,dflt){return object.retrieve(storeKey+key,dflt);}:function(key,dflt){if(!object.$monitorEvents)return dflt;return object.$monitorEvents[key]||dflt;}};};var splitType=function(type){if(type.indexOf(':')==-1)return null;var parsed=Slick.parse(type).expressions[0][0],parsedPseudos=parsed.pseudos;return(pseudos&&pseudos[parsedPseudos[0].key])?{event:parsed.tag,value:parsedPseudos[0].value,pseudo:parsedPseudos[0].key,original:type}:null;};return{addEvent:function(type,fn,internal){var split=splitType(type);if(!split)return addEvent.call(this,type,fn,internal);var storage=storageOf(this),events=storage.retrieve(type,[]),pseudoArgs=Array.from(pseudos[split.pseudo]),proxy=pseudoArgs[1];var self=this;var monitor=function(){pseudoArgs[0].call(self,split,fn,arguments,proxy);};events.include({event:fn,monitor:monitor});storage.store(type,events);var eventType=split.event;if(proxy&&proxy[eventType])eventType=proxy[eventType].base;addEvent.call(this,type,fn,internal);return addEvent.call(this,eventType,monitor,internal);},removeEvent:function(type,fn){var split=splitType(type);if(!split)return removeEvent.call(this,type,fn);var storage=storageOf(this),events=storage.retrieve(type),pseudoArgs=Array.from(pseudos[split.pseudo]),proxy=pseudoArgs[1];if(!events)return this;var eventType=split.event;if(proxy&&proxy[eventType])eventType=proxy[eventType].base;removeEvent.call(this,type,fn);events.each(function(monitor,i){if(!fn||monitor.event==fn)removeEvent.call(this,eventType,monitor.monitor);delete events[i];},this);storage.store(type,events);return this;}};};(function(){var pseudos={once:function(split,fn,args){fn.apply(this,args);this.removeEvent(split.original,fn);}};Events.definePseudo=function(key,fn){pseudos[key]=fn;};var proto=Events.prototype;Events.implement(Events.Pseudos(pseudos,proto.addEvent,proto.removeEvent));})();(function(){var pseudos={once:function(split,fn,args){fn.apply(this,args);this.removeEvent(split.original,fn);}};Event.definePseudo=function(key,fn,proxy){pseudos[key]=[fn,proxy];};var proto=Element.prototype;[Element,Window,Document].invoke('implement',Events.Pseudos(pseudos,proto.addEvent,proto.removeEvent));})();Event.definePseudo('relay',function(split,fn,args,proxy){var event=args[0];var check=proxy?proxy.condition:null;for(var target=event.target;target&&target!=this;target=target.parentNode){var finalTarget=document.id(target);if(Slick.match(target,split.value)&&(!check||check.call(finalTarget,event))){if(finalTarget)fn.call(finalTarget,event,finalTarget);return;}}},{mouseenter:{base:'mouseover',condition:Element.Events.mouseenter.condition},mouseleave:{base:'mouseout',condition:Element.Events.mouseleave.condition}});(function(){Fx.Scroll=new Class({Extends:Fx,options:{offset:{x:0,y:0},wheelStops:true},initialize:function(element,options){this.element=this.subject=document.id(element);this.parent(options);if(typeOf(this.element)!='element')this.element=document.id(this.element.getDocument().body);if(this.options.wheelStops){var stopper=this.element,cancel=this.cancel.pass(false,this);this.addEvent('start',function(){stopper.addEvent('mousewheel',cancel);},true);this.addEvent('complete',function(){stopper.removeEvent('mousewheel',cancel);},true);}},set:function(){var now=Array.flatten(arguments);if(Browser.firefox)now=[Math.round(now[0]),Math.round(now[1])];this.element.scrollTo(now[0]+this.options.offset.x,now[1]+this.options.offset.y);},compute:function(from,to,delta){return[0,1].map(function(i){return Fx.compute(from[i],to[i],delta);});},start:function(x,y){if(!this.check(x,y))return this;var element=this.element,scrollSize=element.getScrollSize(),scroll=element.getScroll(),size=element.getSize();values={x:x,y:y};for(var z in values){if(!values[z]&&values[z]!==0)values[z]=scroll[z];if(typeOf(values[z])!='number')values[z]=scrollSize[z]-size[z];values[z]+=this.options.offset[z];}
return this.parent([scroll.x,scroll.y],[values.x,values.y]);},toTop:function(){return this.start(false,0);},toLeft:function(){return this.start(0,false);},toRight:function(){return this.start('right',false);},toBottom:function(){return this.start(false,'bottom');},toElement:function(el){var position=document.id(el).getPosition(this.element),scroll=isBody(this.element)?{x:0,y:0}:this.element.getScroll();return this.start(position.x+scroll.x,position.y+scroll.y);},scrollIntoView:function(el,axes,offset){axes=axes?Array.from(axes):['x','y'];el=document.id(el);var to={},position=el.getPosition(this.element),size=el.getSize(),scroll=this.element.getScroll(),containerSize=this.element.getSize(),edge={x:position.x+size.x,y:position.y+size.y};['x','y'].each(function(axis){if(axes.contains(axis)){if(edge[axis]>scroll[axis]+containerSize[axis])to[axis]=edge[axis]-containerSize[axis];if(position[axis]<scroll[axis])to[axis]=position[axis];}
if(to[axis]==null)to[axis]=scroll[axis];if(offset&&offset[axis])to[axis]=to[axis]+offset[axis];},this);if(to.x!=scroll.x||to.y!=scroll.y)this.start(to.x,to.y);return this;},scrollToCenter:function(el,axes,offset){axes=axes?Array.from(axes):['x','y'];el=document.id(el);var to={},position=el.getPosition(this.element),size=el.getSize(),scroll=this.element.getScroll(),containerSize=this.element.getSize();['x','y'].each(function(axis){if(axes.contains(axis)){to[axis]=position[axis]-(containerSize[axis]-size[axis])/2;}
if(to[axis]==null)to[axis]=scroll[axis];if(offset&&offset[axis])to[axis]=to[axis]+offset[axis];},this);if(to.x!=scroll.x||to.y!=scroll.y)this.start(to.x,to.y);return this;}});function isBody(element){return(/^(?:body|html)$/i).test(element.tagName);};})();Request.JSONP=new Class({Implements:[Chain,Events,Options],options:{onRequest:function(src){if(this.options.log&&window.console&&console.log){console.log('JSONP retrieving script with url:'+src);}},onError:function(src){if(this.options.log&&window.console&&console.warn){console.warn('JSONP '+src+' will fail in Internet Explorer, which enforces a 2083 bytes length limit on URIs');}},url:'',callbackKey:'callback',injectScript:document.head,data:'',link:'ignore',timeout:0,log:false},initialize:function(options){this.setOptions(options);},send:function(options){if(!Request.prototype.check.call(this,options))return this;this.running=true;var type=typeOf(options);if(type=='string'||type=='element')options={data:options};options=Object.merge(this.options,options||{});var data=options.data;switch(typeOf(data)){case'element':data=document.id(data).toQueryString();break;case'object':case'hash':data=Object.toQueryString(data);}
var index=this.index=Request.JSONP.counter++;var src=options.url+
(options.url.test('\\?')?'&':'?')+
(options.callbackKey)+'=Request.JSONP.request_map.request_'+index+
(data?'&'+data:'');if(src.length>2083)this.fireEvent('error',src);var script=this.getScript(src).inject(options.injectScript);this.fireEvent('request',[script.get('src'),script]);Request.JSONP.request_map['request_'+index]=function(){this.success(arguments,index);}.bind(this);if(options.timeout){(function(){if(this.running)this.fireEvent('timeout',[script.get('src'),script]).fireEvent('failure').cancel();}).delay(options.timeout,this);}
return this;},getScript:function(src){return this.script=new Element('script',{type:'text/javascript',src:src});},success:function(args,index){if(!this.running)return false;this.clear().fireEvent('complete',args).fireEvent('success',args).callChain();},cancel:function(){return this.running?this.clear().fireEvent('cancel'):this;},isRunning:function(){return!!this.running;},clear:function(){if(this.script)this.script.destroy();this.running=false;return this;}});Request.JSONP.counter=0;Request.JSONP.request_map={};Class.Mutators.Binds=function(binds){return binds;};Class.Mutators.initialize=function(initialize){return function(){Array.from(this.Binds).each(function(name){var original=this[name];if(original)this[name]=original.bind(this);},this);return initialize.apply(this,arguments);};};Request.Queue=new Class({Implements:[Options,Events],Binds:['attach','request','complete','cancel','success','failure','exception'],options:{stopOnFailure:true,autoAdvance:true,concurrent:1,requests:{}},initialize:function(options){if(options){var requests=options.requests;delete options.requests;}
this.setOptions(options);this.requests={};this.queue=[];this.reqBinders={};if(requests)this.addRequests(requests);},addRequest:function(name,request){this.requests[name]=request;this.attach(name,request);return this;},addRequests:function(obj){Object.each(obj,function(req,name){this.addRequest(name,req);},this);return this;},getName:function(req){return Object.keyOf(this.requests,req);},attach:function(name,req){if(req._groupSend)return this;['request','complete','cancel','success','failure','exception'].each(function(evt){if(!this.reqBinders[name])this.reqBinders[name]={};this.reqBinders[name][evt]=function(){this['on'+evt.capitalize()].apply(this,[name,req].append(arguments));}.bind(this);req.addEvent(evt,this.reqBinders[name][evt]);},this);req._groupSend=req.send;req.send=function(options){this.send(name,options);return req;}.bind(this);return this;},removeRequest:function(req){var name=typeOf(req)=='object'?this.getName(req):req;if(!name&&typeOf(name)!='string')return this;req=this.requests[name];if(!req)return this;['request','complete','cancel','success','failure','exception'].each(function(evt){req.removeEvent(evt,this.reqBinders[name][evt]);},this);req.send=req._groupSend;delete req._groupSend;return this;},getRunning:function(){return Object.filter(this.requests,function(r){return r.running;});},isRunning:function(){return!!(Object.keys(this.getRunning()).length);},send:function(name,options){var q=function(){this.requests[name]._groupSend(options);this.queue.erase(q);}.bind(this);q.name=name;if(Object.keys(this.getRunning()).length>=this.options.concurrent||(this.error&&this.options.stopOnFailure))this.queue.push(q);else q();return this;},hasNext:function(name){return(!name)?!!this.queue.length:!!this.queue.filter(function(q){return q.name==name;}).length;},resume:function(){this.error=false;(this.options.concurrent-Object.keys(this.getRunning()).length).times(this.runNext,this);return this;},runNext:function(name){if(!this.queue.length)return this;if(!name){this.queue[0]();}else{var found;this.queue.each(function(q){if(!found&&q.name==name){found=true;q();}});}
return this;},runAll:function(){this.queue.each(function(q){q();});return this;},clear:function(name){if(!name){this.queue.empty();}else{this.queue=this.queue.map(function(q){if(q.name!=name)return q;else return false;}).filter(function(q){return q;});}
return this;},cancel:function(name){this.requests[name].cancel();return this;},onRequest:function(){this.fireEvent('request',arguments);},onComplete:function(){this.fireEvent('complete',arguments);if(!this.queue.length)this.fireEvent('end');},onCancel:function(){if(this.options.autoAdvance&&!this.error)this.runNext();this.fireEvent('cancel',arguments);},onSuccess:function(){if(this.options.autoAdvance&&!this.error)this.runNext();this.fireEvent('success',arguments);},onFailure:function(){this.error=true;if(!this.options.stopOnFailure&&this.options.autoAdvance)this.runNext();this.fireEvent('failure',arguments);},onException:function(){this.error=true;if(!this.options.stopOnFailure&&this.options.autoAdvance)this.runNext();this.fireEvent('exception',arguments);}});var Asset={javascript:function(source,properties){properties=Object.append({document:document},properties);if(properties.onLoad){properties.onload=properties.onLoad;delete properties.onLoad;}
var script=new Element('script',{src:source,type:'text/javascript'});var load=properties.onload||function(){},doc=properties.document;delete properties.onload;delete properties.document;return script.addEvents({load:load,readystatechange:function(){if(['loaded','complete'].contains(this.readyState))load.call(this);}}).set(properties).inject(doc.head);},css:function(source,properties){properties=properties||{};var onload=properties.onload||properties.onLoad;if(onload){properties.events=properties.events||{};properties.events.load=onload;delete properties.onload;delete properties.onLoad;}
return new Element('link',Object.merge({rel:'stylesheet',media:'screen',type:'text/css',href:source},properties)).inject(document.head);},image:function(source,properties){properties=Object.merge({onload:function(){},onabort:function(){},onerror:function(){}},properties);var image=new Image();var element=document.id(image)||new Element('img');['load','abort','error'].each(function(name){var type='on'+name;var cap=name.capitalize();if(properties['on'+cap]){properties[type]=properties['on'+cap];delete properties['on'+cap];}
var event=properties[type];delete properties[type];image[type]=function(){if(!image)return;if(!element.parentNode){element.width=image.width;element.height=image.height;}
image=image.onload=image.onabort=image.onerror=null;event.delay(1,element,element);element.fireEvent(name,element,1);};});image.src=element.src=source;if(image&&image.complete)image.onload.delay(1);return element.set(properties);},images:function(sources,options){options=Object.merge({onComplete:function(){},onProgress:function(){},onError:function(){},properties:{}},options);sources=Array.from(sources);var counter=0;return new Elements(sources.map(function(source,index){return Asset.image(source,Object.append(options.properties,{onload:function(){counter++;options.onProgress.call(this,counter,index,source);if(counter==sources.length)options.onComplete();},onerror:function(){counter++;options.onError.call(this,counter,index,source);if(counter==sources.length)options.onComplete();}}));}));}};(function(){var Color=this.Color=new Type('Color',function(color,type){if(arguments.length>=3){type='rgb';color=Array.slice(arguments,0,3);}else if(typeof color=='string'){if(color.match(/rgb/))color=color.rgbToHex().hexToRgb(true);else if(color.match(/hsb/))color=color.hsbToRgb();else color=color.hexToRgb(true);}
type=type||'rgb';switch(type){case'hsb':var old=color;color=color.hsbToRgb();color.hsb=old;break;case'hex':color=color.hexToRgb(true);break;}
color.rgb=color.slice(0,3);color.hsb=color.hsb||color.rgbToHsb();color.hex=color.rgbToHex();return Object.append(color,this);});Color.implement({mix:function(){var colors=Array.slice(arguments);var alpha=(typeOf(colors.getLast())=='number')?colors.pop():50;var rgb=this.slice();colors.each(function(color){color=new Color(color);for(var i=0;i<3;i++)rgb[i]=Math.round((rgb[i]/100*(100-alpha))+(color[i]/100*alpha));});return new Color(rgb,'rgb');},invert:function(){return new Color(this.map(function(value){return 255-value;}));},setHue:function(value){return new Color([value,this.hsb[1],this.hsb[2]],'hsb');},setSaturation:function(percent){return new Color([this.hsb[0],percent,this.hsb[2]],'hsb');},setBrightness:function(percent){return new Color([this.hsb[0],this.hsb[1],percent],'hsb');}});var $RGB=function(r,g,b){return new Color([r,g,b],'rgb');};var $HSB=function(h,s,b){return new Color([h,s,b],'hsb');};var $HEX=function(hex){return new Color(hex,'hex');};Array.implement({rgbToHsb:function(){var red=this[0],green=this[1],blue=this[2],hue=0;var max=Math.max(red,green,blue),min=Math.min(red,green,blue);var delta=max-min;var brightness=max/255,saturation=(max!=0)?delta/max:0;if(saturation!=0){var rr=(max-red)/delta;var gr=(max-green)/delta;var br=(max-blue)/delta;if(red==max)hue=br-gr;else if(green==max)hue=2+rr-br;else hue=4+gr-rr;hue/=6;if(hue<0)hue++;}
return[Math.round(hue*360),Math.round(saturation*100),Math.round(brightness*100)];},hsbToRgb:function(){var br=Math.round(this[2]/100*255);if(this[1]==0){return[br,br,br];}else{var hue=this[0]%360;var f=hue%60;var p=Math.round((this[2]*(100-this[1]))/10000*255);var q=Math.round((this[2]*(6000-this[1]*f))/600000*255);var t=Math.round((this[2]*(6000-this[1]*(60-f)))/600000*255);switch(Math.floor(hue/60)){case 0:return[br,t,p];case 1:return[q,br,p];case 2:return[p,br,t];case 3:return[p,q,br];case 4:return[t,p,br];case 5:return[br,p,q];}}
return false;}});String.implement({rgbToHsb:function(){var rgb=this.match(/\d{1,3}/g);return(rgb)?rgb.rgbToHsb():null;},hsbToRgb:function(){var hsb=this.match(/\d{1,3}/g);return(hsb)?hsb.hsbToRgb():null;}});})();Hash.Cookie=new Class({Extends:Cookie,options:{autoSave:true},initialize:function(name,options){this.parent(name,options);this.load();},save:function(){var value=JSON.encode(this.hash);if(!value||value.length>4096)return false;if(value=='{}')this.dispose();else this.write(value);return true;},load:function(){this.hash=new Hash(JSON.decode(this.read(),true));return this;}});Hash.each(Hash.prototype,function(method,name){if(typeof method=='function')Hash.Cookie.implement(name,function(){var value=method.apply(this.hash,arguments);if(this.options.autoSave)this.save();return value;});});
Window.implement({$ES:function(s,p){return($(p)||document).getElements(s);},$E:function(s,p){return($(p)||document).getElement(s);}});Element.implement({getFormElements:function(){return $$(this.getElements("input"),this.getElements("select"),this.getElements("textarea"));},toHash:function(){var hash=new Hash();this.getFormElements().each(function(el){var _name=el.get('name');var value=el.get('value');var checkable=el.get('type')=='checkbox'||el.get('type')=='radio';if(value===false||!_name||el.disabled||(checkable&&!el.checked)){return;}
var qs=function(val){hash.set(_name,val);};if($type(value)=='array'){value.each(qs);}else{qs(value);}});return hash;},show:function(){this.removeClass('Hidden');this.visible=true;return this;},hide:function(){this.addClass('Hidden');this.visible=false;return this;},toggle:function(){var visible=this.visible||!this.hasClass('Hidden');if(visible){this.hide();}else{this.show();}
return this;},center:function(containerID){var docSize=document.getSize(),scroll=document.getScroll(),size,styles;size={x:($(containerID)||document).getSize().x,y:this.getSize().y};styles={left:(scroll.x+(docSize.x-size.x)/2).toInt(),right:(scroll.x-(docSize.x-size.x)/2).toInt(),top:(scroll.y+(docSize.y-size.y)/2).toInt(),height:size.y};this.setStyles(styles);return this;},getSelectedText:function(){if(window.ie){return document.selection.createRange().text;}
return this.value.substring(this.selectionStart,this.selectionEnd);},replaceSelectedText:function(newtext,last){var isLast=(last===null)?true:last;var scroll_top=this.scrollTop;if(window.ie){this.focus();var range=document.selection.createRange();range.text=newtext;if(isLast){range.select();this.scrollTop=scroll_top;}}
else{originalStart=this.selectionStart;originalEnd=this.selectionEnd;this.value=this.value.substring(0,originalStart)+newtext+this.value.substring(originalEnd);if(isLast===false){this.setSelectionRange(originalStart,originalStart+newtext.length);}
else{this.setSelectionRange(originalStart+newtext.length,originalStart+newtext.length);this.scrollTop=scroll_top;}
this.focus();}},getTag:function(){return this.get('tag');},getValue:function(){return this.get('value');},getText:function(){return this.get('text');},setHTML:function(html){this.set('html',html);},remove:function(){this.dispose();}});Cookie.get=function(key){return new Cookie(key).read();};Cookie.set=function(key,value,options){return new Cookie(key,options).write(value);};Cookie.remove=function(key,options){Cookie.dispose(key,options);};Browser.Names=function(){var name='unknown',engine=Browser.Engine;if(engine.trident){name='IE'+(navigator.userAgent.test(/MSIE\s8/g)?'8':(engine.trident4?'6':engine.trident5?'7':''));}else if(engine.webkit){name='Safari/Webkit';}else if(engine.presto){name='Opera';}else if(engine.gecko){name='Mozilla/Gecko';}
this.Name=name;};Browser.Names();Element.Events.clickOutside={base:'click',onAdd:function(callback){document.addEvent('click',function(e){var target=this.getCoordinates();var isInVer=target.top<=e.clientY&&target.top+target.height>=e.clientY;var isInHor=target.left<=e.clientX&&target.left+target.width>=e.clientX;if(!isInHor||!isInVer){callback.call(this,e);}}.bind(this));}};Hash.implement({buildCombo:function(combo){var comboObj=$(combo);$ES('option',comboObj).each(function(el){el.dispose();});this.each(function(i,index){var o=new Element('option',{'value':i.value}).set('html',i.text).injectInside(comboObj);if(i.selected){comboObj.selectedIndex=index;}},this);return this;},fromArray:function(a){a.each(function(el,i){this[i]=el;},this);return this;}});String.implement({shorten:function(len){if(this.length>len-3){return this.substring(0,len-3)+"...";}else{return this;}},isURL:function(){var regexp=/((https{0,1}:\/\/\w+\.[^\s]+))|(www\.[^.][^\s]*)/;return regexp.test(this);},isNormal:function(){return this.test(/^[a-zA-Z0-9\-_\.]+$/);},toObject:function(){var p=this.split('&');var obj={};p.each(function(el){var a=el.split('=');obj[a[0]]=a[1];});return obj;},toObjectString:function(){return JSON.encode(this.toObject());},ucwords:function(){return(this+'').replace(/^(.)|\s(.)/g,function($1){return $1.toUpperCase();});},lcwords:function(){return(this+'').replace(/^(.*)/g,function($1){return $1.toLowerCase();});}});Object.toQueryString=function(json){var a=[];$each(json,function(item,index){a.push(index+'='+item);});return a.join('&');};Array.implement({subtract:function(ar){if((ar===null)||(ar===false)){return this;}
ar.each(function(value){this.erase(value);}.bind(this));return this;}});Request.Status=new Class({Extends:Request,Implements:[Options],options:{offsets:{'x':10,'y':8}},initialize:function(options){this.build();this.setOptions(options);this.parent(options);},build:function(){this.indicator=$('AjaxProg');this.indicator.hide();},onStart:function(){this.indicatorOn();},onTimeout:function(){this.indicatorOff();},send:function(options){this.setOptions(options);this.parent(options);},onStateChange:function(){this.parent();switch(this.xhr.readyState){case 1:case 2:this.indicatorOn();break;case 4:this.indicatorOff();break;}},indicatorOff:function(){document.removeEvents('mousemove');if(this.indicator!==null&&this.indicator.visible){this.indicator.hide();}},indicatorOn:function(){if(this.indicator!==null&&!this.indicator.visible){document.addEvent('mousemove',this.onMouseMove.bindWithEvent(this));this.indicator.show();}},onMouseMove:function(event){if((event.client.y>window.getHeight()-this.options.offsets.y-20)||(event.client.x>window.getWidth()-this.options.offsets.x-20)){this.posX=event.page.x-this.options.offsets.x-20;this.posY=event.page.y-this.options.offsets.y;this.indicator.set('styles',{'left':this.posX,'top':this.posY});}else{this.posX=event.page.x+this.options.offsets.x;this.posY=event.page.y+this.options.offsets.y;this.indicator.set('styles',{'left':this.posX,'top':this.posY});}}});var AjaxKeepAlive=new Class({initialize:function(){this.keepAliveAjax=null;this.sendKeepAlive.periodical(600000);},sendKeepAlive:function(){if(this.keepAliveAjax){this.keepAliveAjax.cancel();}
this.keepAliveAjax=new Request({url:'"/index.php?inputType=keepAlive"',data:'dummy=1'}).send();},onComplete:function(){this.keepAliveAjax=null;}});
var Ads=new Class({initialize:function(){this.ads={};this.renderQueue=[];this.options={tile:1,debug:false,ORD:Math.floor(Math.random()*1e16),maxValueLength:250};if(document.location.href.match(/[&|\?]debugDFP=[true|1]/))this.options.debug=true;var cookieParams=JSON.decode(Cookie.read('User'));if(cookieParams){["fbconnected","ffilter","referrer","LEID"].each(function(key){this.options[key]=(cookieParams[key]!=null)?cookieParams[key]+''.substring(0,this.options.maxValueLength):'null';}.bind(this));};window.addEvent("load",this.renderQueuedAds.bind(this));},addClientSideParams:function(baseURL){var o=this.options;return(baseURL+';fbconnected='+o.fbconnected
+';ffilter='+o.ffilter
+';referrer='+encodeURIComponent(o.referrer)
+';LEID='+o.LEID
+';tile='+(o.tile++)
+';ord='+o.ORD);},render:function(adData){var o=this.options;var adDataURL=this.addClientSideParams(adData.baseURL);var tagID=adData.targetID;var adElement=$(tagID);if(adElement){var adTagName=adElement.get('tag');switch(adTagName){case'script':if(adData.isAdx){new Element("script",{src:adDataURL}).inject($$('body')[0],'bottom');}else{document.write('<script type="text/javascript" src="'+adDataURL+'"><\/script>');}
break;case'iframe':if(adElement.contentWindow){adElement.contentWindow.location.replace(adDataURL);}else{adElement.set('src',adDataURL);}
break;case'style':adElement.set('src',adDataURL);break;case'link':adElement.set('href',adDataURL);break;default:console&&console.warn('No method for tag name',adTagName,'. Fix this on 3Ads.js');break;}
var ref=this.ads[tagID]={'adData':adData,'finalURL':adDataURL};if(adData.refreshRate>0&&adTagName=="iframe"){ref.refreshInterval=this.render.delay(adData.refreshRate,this,adData);}
if(o.debug){console&&console.log(adElement,this.ads[tagID],adDataURL);}}},addToRenderQueue:function(adData){this.renderQueue.push(adData);},renderQueuedAds:function(){while(this.renderQueue.length){this.render(this.renderQueue.shift());}},renderTakeover:function(cssUrl){Asset.css(cssUrl);},renderPushdown:function(html){document.write('<div id="PushdownContainer" class="Centred"><div id="PushdownUnit">');document.write(html);document.write('</div></div>');},renderFeatureBox:function(data){var ul=$$('ul.FeatureList')[0];var a=new Element('a',{href:data.clickThroughURL,target:data.target});new Element('img',{src:data.image}).inject(a);a.inject(ul,'bottom');if(data.trackerURL){new Element('img',{src:data.trackerURL,width:0,height:0}).inject(ul,'bottom');}},renderChannelSponsorship:function(data){var ul=$('Navigation');var a=new Element('a',{href:data.clickThroughURL,target:data.target});var imageProps={src:data.image};var w=data.width;var h=data.height;var stl=data.style;if(w){imageProps.width=w;}
if(h){imageProps.height=h;}
if(stl){imageProps.style=stl;}
new Element('img',imageProps).inject(a);a.inject(ul,'bottom');if(data.trackerURL){new Element('img',{src:data.trackerURL,width:0,height:0}).inject(ul,'bottom');}},renderHeaderTab:function(data){var li=$('customTab');var a=new Element('a',{href:data.clickThroughURL,target:data.target});new Element('img',{src:data.image,width:80,height:28}).inject(a);a.inject(li,'bottom');if(data.trackerURL){new Element('img',{src:data.trackerURL,width:0,height:0}).inject(li,'bottom');}},renderInSkin:function(inSkinOptions){var headerObj=window.headerObj;if(headerObj){Asset.javascript(headerObj.cdnJS+"/Components/InSkinIntegration.js"+headerObj.verJS,{events:{load:function(){new InSkinIntegration(inSkinOptions);}}});}else{this.renderInSkin.delay(200,this,inSkinOptions);}},renderStub:function(adData){$$('#'+adData.targetID).set('html',adData.stub);}});var ads=new Ads();
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();swfobject.defaultParams={'wmode':'transparent',"quality":"high","allowfullscreen":"true","allowscriptaccess":"always","bgcolor":"transparent"};
var fbListener=new Array();var Facebook=new Class({Implements:[Options],options:{redirectUrl:null},initialize:function(options){this.FBscope='email,publish_actions';this.setOptions(options);var appId=this.appId='115813460972';$ES('.FBConnect').addEvent('click',this.onConnect.bindWithEvent(this));window.fbAsyncInit=function(){FB.init({appId:appId,status:true,cookie:true,xfbml:true,oauth:true});FB.Event.subscribe('auth.login',onAuthResponseChange);FB.Event.subscribe('auth.authResponseChange',onAuthResponseChange);FB.Event.subscribe('auth.statusChange',onAuthResponseChange);FB.Event.subscribe('edge.create',function(targetUrl){fb.reportFBAction('like');});FB.Event.subscribe('edge.remove',function(targetUrl){fb.reportFBAction('unlike');});};var e=new Element('script',{src:document.location.protocol+'//connect.facebook.net/en_US/all.js',async:'async'});new Element('div',{id:'fb-root'}).inject(document.body).grab(e);},reportFBAction:function(type){var event='facebook/'+type+'/'+(this.customGALabel?this.customGALabel:'none');ga.sendSocialEvent(event);},setCustomGALabel:function(customGALabel){this.customGALabel=customGALabel;},onConnect:function(ev){if(ev){ev.preventDefault();if($(ev.target).hasClass('FBClickTrack')){this.sendTracker();}}
var shouldRefresh=true;if($(ev.target).hasClass('NoRefresh')){shouldRefresh=false;}
FB.login(function(response){if(response.authResponse){this.onLogin(response.authResponse,shouldRefresh);}else{}}.bind(this),{scope:this.FBscope});},onLogin:function(authResponse,shouldRefresh){if(authResponse){var s={uid:authResponse.userID,expires:authResponse.expiresIn,accessToken:authResponse.accessToken};if(shouldRefresh&&this.options.redirectUrl){window.location=this.options.redirectUrl+'?'+Object.toQueryString(s);}}},refreshGUI:function(){var req=new Request({url:'/index.php?pageToLoad=pageHeader&displayMode=StudiosRedesign',method:'get',onComplete:this.renderHeader.bind(this)}).send();},renderHeader:function(response){var headerElement=new Element('div',{'html':response});var headerULs=headerElement.getElements('ul');var headerAccountLinks=headerElement.getElementById('AccountLinks');var initDropDown=false;headerULs.each(function(el){if(el.get('id')=='UserLinks'){if(!$('AccountLinks')&&headerAccountLinks){headerAccountLinks.inject($('UserLinks'),'after');initDropDown=true;}
el.replaces($('UserLinks'));if(initDropDown){var acountDD=new DropDown($('WelcomeA'),$('AccountLinks'));}}});},addListener:function(listener){fbListener[fbListener.length]=listener;}});function onAuthResponseChange(response){if(!fb.options.sessionStarted&&response.status=="connected"){fb.options.sessionStarted=true;fb.options.isFBSessionUID=true;for(var i=0;i<fbListener.length;i++){fbListener[i].onAuthResponseChange(response.authResponse);}
var req=new Request({url:'/fb/status/allow/?pageToLoad=pageHeader&displayMode=StudiosRedesign&noRedirect=true&uid='+response.authResponse.userID+'&code='+response.authResponse.accessToken,method:'get',onComplete:function(responseComplete){if(!headerObj.userID){fb.refreshGUI();}}}).send();}
if((response.authResponse&&response.status!="connected")||(!fb.options.sessionStarted&&fb.options.isFBSessionUID&&response.status!="connected")){fb.options.sessionStarted=false;var req=new Request({url:'/fb/status/disconnect/?noRedirect=true',method:'get',onComplete:function(responseComplete){}}).send();}}
function onDialogCloseNewAccount(result){if(result===false){return;}
$('FBCreateAccount').submit();}
function onDialogCloseChannel(result){if(result===false){return;}
if(result===''){$ES('input','FBPostSettings').set('disabled',true).set('checked',false);}else{$ES('input','FBPostSettings').set('disabled',false);$('FBAllowPermsWrap').dispose();}}
function showPermissionsDialogChannel(ev){if(ev){var e=new Event(ev).preventDefault();}
FB.ui({method:'oauth',client_id:this.appId,scope:this.FBscope,display:'popup'},onDialogCloseChannel.bind(this));}
function showPermissionsDialogNewAccount(ev){if(ev){var e=new Event(ev).preventDefault();}
var checked=false;$ES('input','FBPostSettings').each(function(el){if(el.checked){checked=true;}});$('FBCreateAccount').submit();}
function bindPermissionDialogNewAccount(){$('FBCreateAccount').addEvent('submit',showPermissionsDialogNewAccount);}
function bindPermissionDialogChannel(){var btn=$('FBAllowPerms');if(!btn){return;}
btn.addEvent('click',showPermissionsDialogChannel);}
var AdManager=new Class({initialize:function(){this.run();},run:function(){this.links=$ES('.Ifrm');this.renderAds();},renderAds:function(){for(var i=0;i<this.links.length;i++){var el=this.links[i];var parent=el.getParent();if(parent.hasClass('Deferred')){continue;}
var url=el.get('href');var matches=url.match(/sz=(\d+)x(\d+)/);var size=matches?matches.splice(1,2):[300,250];var iframe=new Element('iframe',{'src':url,'width':size[0],'height':size[1],'frameborder':'0','class':'Ad','allowtransparancy':'1','scrolling':'no'});iframe.replaces(el);if(Browser.Engine.gecko){if(!parent.hasClass('Panel')){parent.show();}}else{iframe.addEvent('load',this.onFrameLoad.pass(parent));}}},onFrameLoad:function(parent){if(!parent.hasClass('Panel')){parent.show();}}});
Element.implement({autoexpand:function(){if(this.get('tag')!=='input'){return;}
this.addEvents({'keydown':function(){this.caret=this.getCaretPosition();this.setStyle('width',(this.value.length*15)+'px');}.bind(this),'focus':function(){this.setStyle('width',(this.value.length>0?this.value.length*15:25)+'px');}.bind(this)});},getCaretPosition:function(){try{if(this.createTextRange){var r=document.selection.createRange().duplicate();r.moveEnd('character',this.value.length);if(r.text===''){return this.value.length;}
return this.value.lastIndexOf(r.text);}else{try{return this.selectionStart;}catch(err1){return'0';}}}catch(err2){return'0';}},setCaretPosition:function(pos){try{if(document.selection){this.focus();var r=document.selection.createRange();r.moveStart('character',-this.value.length);r.moveStart('character',pos);r.moveEnd('character',0);r.select();}else if(this.selectionStart){this.selectionStart=pos;this.selectionEnd=pos;this.focus();}}catch(err){}},highlightSelection:function(from,to){try{if(document.selection){this.focus();var r=document.selection.createRange();r.moveStart('character',-this.value.length);r.moveStart('character',from);r.moveEnd('character',to||this.value.length);r.select();}else if(this.selectionStart){this.selectionStart=from;this.selectionEnd=to||this.value.length;}}catch(err){}}});var AutoComplete=new Class({Implements:[Options,Events],options:{minchars:3,separator:',',holderClass:'TagInput',containerClass:'TagInputWrap',suggestionBoxClass:'Suggestions',suggestionBoxExtraClasses:false,scriptTagId:'acScript',defaultFieldValue:'Search',tagField:null,targetForm:null,suggestUrl:null,callback:null,showChannelsAndTopicTypes:false,legacySearchForm:false},initialize:function(options){this.setOptions(options);this.element=$(this.options.tagField);this.initInputValue=this.element.value.trim().length===0?this.options.defaultFieldValue:this.element.value;this.form=$(this.options.targetForm);this.cancelSuggestion=false;this.showCTT=this.options.showChannelsAndTopicTypes;this.timer=null;this.usageData={acUsageCount:0,acUsageResTimeAvg:0,acUsageClickedFlag:0};this.reportedImpression=false;this.createHolder();},createHolder:function(){this.container=new Element('div',{'class':this.options.containerClass,'events':{'clickOutside':this.onClickOutside.bindWithEvent(this)}}).injectBefore(this.element);this.holder=new Element('div',{'class':this.options.holderClass,'events':{'click':function(ev){if($(ev.target)===this.holder&&this.input){this.input.focus();}}.bindWithEvent(this)}}).injectInside(this.container);this.element.injectInside(this.holder);this.createSuggestionBox();this.form.addEvent('submit',this.onFormSubmit.bindWithEvent(this));this.element.addEvents({'focus':this.onTextBoxFocus.bind(this),'blur':this.onTextBoxBlur.bind(this),'keydown':this.onTextBoxTypeDown.bindWithEvent(this),'keyup':this.onTextBoxTypeUp.bindWithEvent(this)});},createSuggestionBox:function(){var suggestionBoxClasses=[this.options.suggestionBoxClass,(this.options.suggestionBoxExtraClasses||'')].join(' ').trim();this.suggestionBox=new Element('div',{'class':suggestionBoxClasses}).injectAfter(this.holder).setStyle('display','none');this.suggestionList=new Element('div').injectInside(this.suggestionBox);if(window.ie6){this.iframe=new Element('iframe',{'frameborder':0}).setOpacity(0.1).injectTop(this.suggestionBox);}},closeSuggest:function(){this.suggestionBox.setStyle('display','none');this.suggestOpen=false;},openSuggest:function(){if(this.cancelSuggest){this.closeSuggest();return;}
this.suggestionBox.setStyle('display','block');this.suggestOpen=true;},getSuggestions:function(){if(this.options.suggestUrl===null||this.element.get('value').trim()===this.initInputValue){return;}
if($(this.options.scriptTagId)){$(this.options.scriptTagId).dispose();}
var showCTTFlag=this.showCTT?'showCTT=1&':'';var url=this.options.suggestUrl+(this.options.suggestUrl.match(/\?/g)?'&':'?')+showCTTFlag+'prefix='+encodeURIComponent(this.element.value)+'&callback='+this.options.callback+'.suggest';var js=new Asset.javascript(url,{id:this.options.scriptTagId});},suggest:function(json){if(json===undefined){return;}
var diff=new Date().getTime()-this.reqTimer;this.usageData.acUsageCount+=1;this.usageData.acUsageResTimeAvg=this.usageData.acUsageCount==1?diff:Math.round(((this.usageData.acUsageResTimeAvg*(this.usageData.acUsageCount-1))+diff)/this.usageData.acUsageCount);if(typeof json!=='object'){json=JSON.decode(json);}
this.suggestionList.set('html','');if(this.showCTT){var numOfTopics=json.topics?json.topics.length:0;var numOfChannels=json.channels?json.channels.length:0;this.numOfSuggestions=numOfTopics+numOfChannels;this.numOfTopics=numOfTopics;}else{this.numOfSuggestions=json.options?json.options.length:0;}
if(this.numOfSuggestions=='0'){this.closeSuggest();return;}else{this.reportAutoCompleteImpression();}
if(this.showCTT){this.showChannels=(numOfChannels>0)?true:false;if(this.showChannels){json.channels.each(function(channel){for(var channelName in channel){this.addSuggestionItem(channelName,channel[channelName]);}}.bind(this));}
json.topics.each(function(topic){for(var topicName in topic){this.addSuggestionItem(topicName,topic[topicName]);}}.bind(this));}else{for(el in json.options){if(json.options.hasOwnProperty(el)){this.addSuggestionItem(json.options[el]);}}}
this.suggestionBox.scrollTo(0,0);if(this.iframe){this.iframe.setProperty('height','0px').setStyle('height','0px');}
if(!this.suggestOpen&&this.suggestionList.getChildren()){this.openSuggest();}
var size=this.suggestionBox.getSize();var scrollSize=this.suggestionBox.getScrollSize();var scroll=scrollSize.y>size.y?scrollSize.y:size.y;this.shouldScroll=scroll>0?true:false;this.scrollCount=this.numOfSuggestion;this.suggestionBoxHeight=size.y;if(this.iframe){this.iframe.set('height',scroll+'px').setStyle('height',scroll+'px');}
this.currentValue=this.element.value;if(this.showCTT&&this.showChannels&&this.numOfTopics>0){var separator=new Element('div',{'class':'Separator'});separator.inject($$('a.acChannel').getLast(),'after');}},addSuggestionItem:function(el,moreDetails){var channelPageName='';var href='/tags/'+encodeURIComponent(el)+'/';if($defined(moreDetails)){var moreDetailsEl=new Element('span');var suggestionType='';this.setShortLength('longTopic');if(moreDetails.pageName){var channelLogoURL=headerObj.cdnServer+'/channellogo/channellogo_auto_complete/'+moreDetails.pageName+'/logo.jpg';channelPageName=moreDetails.pageName;suggestionType='acChannel';this.setShortLength('channel');href='/'+channelPageName+'/';var channelImage=new Asset.image(channelLogoURL,{onload:function(){var height=this.getSize().y;if(height==24||height==0){this.getParent().addClass('Hidden');}else{this.getParent().addClass('Loaded');}},onerror:function(){this.getParent().addClass('Hidden');}});moreDetailsEl=new Element('div',{'class':'MoreDetails '+suggestionType}).grab(channelImage);}
if(moreDetails.primaryType){suggestionType='acTopic';this.setShortLength('topicWithDetails');this.setShortLength('primaryType');var shortPrimaryType=moreDetails.primaryType.shorten(this.getShortLength('primaryType'));moreDetailsEl=new Element('span',{'class':'MoreDetails '+suggestionType,'html':shortPrimaryType,'title':moreDetails.primaryType});}}
var readableSuggestion=decodeURIComponent(el);var shortReadableSuggestion=this.showCTT?readableSuggestion.shorten(this.getShortLength()):readableSuggestion;var a=new Element('a',{'href':href,'class':'suggestion '+suggestionType,'html':shortReadableSuggestion,'title':readableSuggestion,'rel':readableSuggestion,'events':{'click':function(ev){ev.stop();if($(ev.target).tagName.toLowerCase()=='a'){this.add($(ev.target).get('rel'));}else{this.add($(ev.target).getParent().get('rel'));}
var channelPage=$(ev.target).retrieve('channelPageName');if(channelPage&&channelPage!=''){this.element.store('channelPageName',channelPage);}
this.usageData.acUsageClickedFlag=1;this.reportClick();this.fireEvent('onSuggestClick');}.bindWithEvent(this),'mouseenter':this.hover.bindWithEvent(this)}});if(suggestionType=='acChannel'){a.store('channelPageName',channelPageName);}
if($defined(moreDetails)){a.grab(moreDetailsEl);}
a.injectInside(this.suggestionList);},setShortLength:function(type){var legacy=this.options.legacySearchForm;switch(type){case'longTopic':this.shortLength=37;break;case'topicWithDetails':this.shortLength=legacy?24:22;break;case'channel':this.shortLength=legacy?20:24;break;case'primaryType':this.shortLengthPrimaryType=legacy?12:17;break;}},getShortLength:function(type){if(type=='primaryType'){return this.shortLengthPrimaryType;}else{return this.shortLength;}},onFormSubmit:function(ev){if(this.inEdit){ev.stop();return false;}},onTextBoxFocus:function(e){this.inEdit=true;this.element.addClass('Focused');},onTextBoxBlur:function(e){this.inEdit=false;this.element.removeClass('Focused');},onTextBoxTypeUp:function(ev){var el;switch(ev.key){case'esc':if(this.suggestOpen){this.closeSuggest();}
break;case'down':if(!this.suggestOpen){this.openSuggest();}
el=this.suggestionList.getElement('.focused')||this.suggestionList.getLast();this.traverse(el,'next',false);break;case'up':if(!this.suggestOpen){this.openSuggest();}
el=this.suggestionList.getElement('.focused')||this.suggestionList.getFirst();this.traverse(el,'previous',false);break;case'enter':case'space':break;default:this.timer=$clear(this.timer);this.timer=this.getSuggestions.delay(150,this);break;}},onTextBoxTypeDown:function(ev){if(ev.key==='enter'){if(!this.suggestOpen){return;}
var f=this.suggestionList.getElement('.focused')||null;if(f!==null){this.usageData.acUsageClickedFlag=1;this.reportClick();var fTarget=f.get('href');if(fTarget.match('/tags/')){this.add(f.get('rel'));}else{ev.preventDefault();window.location=fTarget;}}}},onClickOutside:function(ev){this.closeSuggest();},add:function(str){this.cancelSuggest=true;var html=str.clean();if(html.length===0){return;}
html=html.replace(/(<\/?strong>)|(<em>.*<\/em>)/gi,'');this.element.value=html;this.closeSuggest();this.cancelSuggest=false;},traverse:function(el,dir,focus){if(!el){return};var next,parent=el.getParent();if(!parent.getChildren()){return;}
switch(dir){case'next':el.removeClass('focused');next=el===parent.getLast()?parent.getFirst():el.getNext();if(next.get('tag')!='a'){next=next.getNext();}
break;case'previous':el.removeClass('focused');next=el===parent.getFirst()?parent.getLast():el.getPrevious();if(next.get('tag')!='a'){next=next.getPrevious()||parent.getLast();}
break;}
if(next===this.inputWrap){this.input.focus();}else{next.addClass('focused');if(focus){next.focus();}
if(!this.shouldScroll){return;}
var h=next.getCoordinates().height;var index=parent.getChildren().indexOf(next);var visibleIndex=Math.round(this.suggestionBoxHeight/h)-1;if(dir==='next'){if(index>=visibleIndex){this.suggestionBox.scrollTo(0,index*h);}else{this.suggestionBox.scrollTo(0,0);}}else if(dir==='previous'){if(index<=visibleIndex){this.suggestionBox.scrollTo(0,0);}else{this.suggestionBox.scrollTo(0,index*h);}}
this.highlight(next);}},hover:function(ev){var oldLink=this.suggestionList.getElement('.focused');var newLink=$(ev.target);if(oldLink){oldLink.removeClass('focused');}
newLink.addClass('focused');},highlight:function(el){this.element.value=el.get('rel');this.element.highlightSelection(this.currentValue.length);},reportClick:function(){if(typeof ga!=='undefined'){ga.onGAClick({'autoComplete':'yes'});}},reportAutoCompleteImpression:function(){if(typeof ga!=='undefined'&&!this.reportedImpression){ga.reportEvent('Box-Impressions/AutoComplete');this.reportedImpression=true;}}});
var OmnitureMC=new Class({initialize:function(props,clickReports){this.props=props;this.clickReports=new Hash(clickReports);this.reportedElements=null;window.document.addEvent('click',this.documentClick.bindWithEvent(this));},documentClick:function(event){for(var el=new Element(event.target);el&&el!=document.body&&el.nodeName!='#document';el=el.getParent()){if($defined(el.hasClass)){if(el.hasClass('report')){this.saveClickReport(event,el);break;}}}},hookClickReports:function(){},saveClickReport:function(event,target){var clickReport=null;target.className.split(' ').each(function(val){var t=this.clickReports.get(val);if(t!==null){clickReport=t;}}.bind(this));clickReport=clickReport||this.clickReports.get(target.get('id'));this.saveCookie(clickReport,event,target);if(typeof kpi!='undefined'){kpi.setRndtrpCookie();}},saveCookie:function(clickReport,event,target){var hashCookie=new Hash.Cookie("Omniture",{domain:headerObj.cookieDomain,path:'/',duration:100});if(clickReport){var h=new Hash(clickReport).each(function(val,key){var oldVal=hashCookie.get(key);if(key=='events'&&oldVal){if(!oldVal.test(val)){hashCookie.set(key,oldVal+','+val);}}else{hashCookie.set(key,val);}}.bind(this));}else{var elementText=event.target.innerHTML.replace(/(<([^>]+)>)/ig,"").replace('+',' ')||event.target.get('id');hashCookie.set('prop23',elementText);}},setModel:function(model){if($defined(model)){this.model=model;}},onPlay:function(){var props={'prop32':this.model.selectedItem.itemID+' '+this.model.selectedItem.title};this.report(props,'Item');},report:function(propsSent,section){if(!$defined(omnitureEnv)){return;}
var props=propsSent;var s2=s_gi(omnitureEnv);s2.linkTrackVars='';for(prop in props){if(props.hasOwnProperty(prop)){s2[prop]=props[prop];s2.linkTrackVars+=(s2.linkTrackVars.length?',':'')+prop;}}
s2.linkTrackEvents=s2.events;s2.tl(this,'o',section);}});function getOmnitureIntervalTime(sec){if(sec<3){return"<3";}
else if(sec<5){return"3-5";}
else if(sec<8){return"5-8";}
else if(sec<11){return"8-11";}
else if(sec<15){return"11-15";}
else if(sec<20){return"15-20";}
else if(sec<25){return"20-25";}
else{return">25";}}
var MainReportItems=false;var ReportItems=new Class({initialize:function(){if(!$defined(ReportItemsID)||ReportItemsID===0){return;}
this.reportID=ReportItemsID;$ES('.Items').each(function(catalogContainer){$ES('li',catalogContainer).addEvent('click',this.onClick.bindWithEvent(this));}.bind(this));},onClick:function(event){for(var el=event.target;el.nodeName!='LI'&&el!=document.body;el=el.parentNode){}
if(el==document.body){return;}
var thumb=$ES('.ItemThumb',el);for(var catalog=el;!catalog.hasClass('Items')&&catalog!=document.body;catalog=catalog.getParent()){}
if(catalog==document.body){return;}
var indexOf=$ES('.ItemThumb',catalog).indexOf(thumb);if(indexOf==-1){return;}
var i=catalog.get('id');if(!i){return;}else{id=i.match(/([0-9]+)/gi)[0];}
var spotID=id.toInt()*100+indexOf.toInt();Cookie.write('itemReport',spotID+"__"+this.reportID,{domain:headerObj.cookieDomain,path:"/"});}});var Search=new Class({Implements:[Options],options:{form:null,type:null,defaultPath:'videos/',appendSelectValue:true,path:''},initialize:function(options){this.setOptions(options);this.serverUrl='http://'+self.location.hostname.replace(/wikicafe/,'www').replace(/starter\./,'').replace(/blog/,'www').replace(/press/,'www')+'/';this.autoCompleteInstance=null;if(this.options.form){this.form=this.options.form;this.filter=$E('.SearchFilter',this.form);this.textField=this.form.getElement('input[type="text"]');this.form.set('target','_top');this.form.addEvent('submit',this.onSearch.bindWithEvent(this));this.textField.addEvents({focus:this.onFieldFocus.bindWithEvent(this),blur:this.onFieldBlur.bindWithEvent(this)});}},onFieldFocus:function(){var defaultText=this.textField.get('title')||'';if(this.textField.value==defaultText){this.textField.value='';}},onFieldBlur:function(){var defaultText=this.textField.get('title')||'';if(this.textField.value.trim()===''){this.textField.value=defaultText;}},onSearch:function(ev){if(ev){ev.preventDefault();}
var defaultText=this.textField.get('title')||'';var searchText=this.textField.value.clean().capitalize();searchText=searchText.replace(/[\/|\\]/g,"_");if(searchText==defaultText){searchText='';}
if(searchText===''){var url=this.serverUrl+this.options.defaultPath;var filter=this.filter?this.filter.value:'';if(this.options.appendSelectValue&&filter!==''){filter=$E('.SearchFilter',this.form)?$E('.SearchFilter',this.form).value:'';url+=filter+'/';}
self.location.href=url;}else{this.search(searchText);}},search:function(searchText){var filter=this.filter?this.filter.value:'';var channelPageName=this.textField.retrieve('channelPageName');this.channelFromAC=(channelPageName)?true:false;var url='';if(this.autoCompleteInstance&&this.autoCompleteInstance.showCTT&&this.channelFromAC){url=this.serverUrl+(this.options.path+(filter===''?'':'f/')+(filter===''?'':filter+'/')+channelPageName+'/').replace(/(\/\/)/g,'/');}else{url=this.serverUrl+(this.options.path+(filter===''?'':'f/')+'topics/'+(filter===''?'':filter+'/')+this.createSearchString(searchText)+'/').replace(/(\/\/)/g,'/');}
var d=10/(24*60);Cookie.write('searchFromSite',1,{duration:d,domain:headerObj.cookieDomain,path:"/"});if(typeof kpi!=='undefined'&&this.autoCompleteInstance!==null){d=this.autoCompleteInstance.usageData;for(r in d){if(d.hasOwnProperty(r)){kpi.addReport({name:r,value:d[r].toString()});}}}
if(this.options.type&&typeof ga!=='undefined'&&typeof ga.onGAClick!=='undefined'){ga.onGAClick({'searchType':this.options.type});}
self.location.href=url;},createSearchString:function(searchText){return encodeURIComponent(searchText.replace(/\s/g,'_').lcwords());},setAutoCompleteInstance:function(instance){this.autoCompleteInstance=instance;}});var ItemCatalog2=new Class({initialize:function(objID,saveAsLastCatalog){var hashCookie=new Hash.Cookie('User',{domain:headerObj.cookieDomain,path:'/',duration:362});if(document.location.toString().test('/watch/')){this.itemPage=true;}else{this.itemPage=false;hashCookie.set('LastCatalogReference','');}
this.objID=objID;this.saveAsLastCatalog=saveAsLastCatalog||false;this.obj=$(this.objID);if(this.obj){this.obj.addEvent('click',this.onItemClick.bindWithEvent(this));}},onItemClick:function(event){var foundAnchor=false;for(var el=$(event.target);el.get('tag')!='body';el=el.getParent()){if(el.get('tag')=='a'&&(el.get('href').test('/watch/'))){foundAnchor=true;break;}}
if(foundAnchor&&this.objID.match(/\d.?/)&&(!this.itemPage||this.saveAsLastCatalog)){(new Hash.Cookie('User',{domain:headerObj.cookieDomain,path:'/',duration:362})).set('LastCatalogReference',this.objID.match(/\d.?/)[0]);}}});var TopicCatalog=new Class({initialize:function(objID,saveAsLastCatalog){this.hashCookie=new Hash.Cookie('User',{domain:headerObj.cookieDomain,path:'/',duration:362});if(document.location.toString().test('/topics/')){this.topicPage=true;}else{this.topicPage=false;this.hashCookie.set('LastTopicCatalogReference','');}
this.objID=objID;this.saveAsLastCatalog=saveAsLastCatalog||false;this.obj=$(this.objID);if(this.obj){this.obj.addEvent('click',this.onTopicClick.bindWithEvent(this));}},onTopicClick:function(event){var foundAnchor=false;for(var el=$(event.target);el.get('tag')!='body';el=el.getParent()){if(el.get('tag')=='a'&&(el.get('href').test('/topics/'))){foundAnchor=true;break;}}
if(foundAnchor&&this.objID.match(/\d.?/)&&(!this.topicPage||this.saveAsLastCatalog)){this.hashCookie.set('LastTopicCatalogReference',this.objID);}}});var PanelMgr=new Class({initialize:function(){$ES('.Scrl').each(function(panel){panel.addEvent('scroll',this.loadThumbs.bindWithEvent(this,[panel]));},this);this.hashCookie=new Hash.Cookie('Panels',{domain:headerObj.cookieDomain,path:'/',duration:362});},togglePanel:function(panelTop,shouldSaveState){var panel=this.getPanel(panelTop);panel.toggleClass('Closed');if(shouldSaveState){this.savePanelState(panel,panel.hasClass('Closed')?0:1);}},loadThumbs:function(ev,panel){if(panel.retrieve('loaded')){return;}
$ES('img',panel).each(function(el){if(el.get('title')){el.set('src',el.get('title'));el.erase('title');}});panel.store('loaded',true);},getPanel:function(target){for(el=target;!el.hasClass('Panel')&&!el.hasClass('Parent');el=el.getParent()){}
return el;},toggleLayout:function(target){var panel=this.getPanel(target);var catalog=panel.getElement('.Items');if(!catalog||target.retrieve('Active')){return;}
var modes=catalog.hasClass('Mode1')||catalog.hasClass('Mode4')?['Mode1','Mode4']:['Default','Mode3'];var listView=panel.getElement('.ListView');var thumbView=panel.getElement('.ThumbView');catalog.toggleClass(modes[0]).toggleClass(modes[1]);(function(){catalog.toggleClass('IE7Sucks')}).delay(10);listView.toggleClass('Active').store('active',listView.hasClass('Active'));thumbView.toggleClass('Active').store('active',listView.hasClass('Active'));this.savePanelMode(panel,(catalog.hasClass(modes[0])?modes[0]:modes[1]));},savePanelState:function(panel,state){if(panel.get('id')){this.hashCookie.set(panel.get('id'),state);}},savePanelMode:function(panel,state){if(panel.get('id')){this.hashCookie.set(panel.get('id')+'-Mode',state);}}});var Console=new Class({initialize:function(){},log:function(msg){}});var DropDown=new Class({initialize:function(trigger,target){this.opened=false;this.trigger=[];if($defined(trigger.length)){trigger.each(function(el){this.trigger.push($(el));},this);}else{this.trigger=[$(trigger)];}
this.target=$(target);this.target.hide();this.initEvents();},initEvents:function(){this.trigger.each(function(el){el.addEvent('click',this.toggleTarget.bindWithEvent(this));},this);this.target.addEvent('clickOutside',this.onClickOutside.bindWithEvent(this));},toggleTarget:function(ev){ev.stop();this.trigger.each(function(el){el.toggleClass('Open');});this.target.toggle();this.opened=!this.opened;},onClickOutside:function(ev){if(!this.trigger.contains(ev.target)){this.hideTarget();}},hideTarget:function(){this.trigger.each(function(el){el.removeClass('Open');});this.target.hide().removeClass('Open');this.opened=false;}});var ReportManager=new Class({initialize:function(){return this;},report:function(el){var classes=el.removeClass('reports').className.clean();var newValues=classes===''?[]:classes.split(' ');var oldValues=Cookie.read('reports')?Cookie.read('reports').clean().split(' '):[];var reports=oldValues.merge(newValues).join(' ');Cookie.write('reports',reports,{domain:headerObj.cookieDomain,path:'/',duration:1});}});var DefaultHPToggler=new Class({initialize:function(pageName,activeSetter){this.pageName=pageName||'';this.activeSetter=$(activeSetter);if(!this.activeSetter){return;}
this.activeSetter=this.activeSetter.getParent();this.setters=$ES('.HPSetter');this.setters.addEvent('click',this.toggleHomepage.bindWithEvent(this));this.activateLinks();},activateLinks:function(){var activeHub=$('Hub'+this.pageName);if(activeHub){activeHub.addClass('Active');}
if(this.pageName!='home'){this.activeSetter.show();}},toggleHomepage:function(ev){var gaEvent,url;ev.preventDefault();for(var target=$(ev.target);target.get('tag')!='li';target=target.getParent()){}
if(target.getFirst().get('id')=='SetHP'){url=self.location.pathname;gaEvent='DefaultHomepage/Set/'+self.location.pathname.replace(/\//gi,'');}else{url='/';gaEvent='DefaultHomepage/Unet/'+self.location.pathname.replace(/\//gi,'');}
if(typeof ga!=='undefined'){ga.reportEvent(gaEvent);}
Cookie.write('hp',url,{domain:headerObj.cookieDomain,path:'/',duration:362});this.setters.toggle();}});
var GoogleAnalytics=new Class({Implements:[Options,Events],options:{clickReportRTE:null,clickReport:{},partnersClassNames:[],impressionReport:null,vars:null,useNewArch:false,shouldInitCustomVars:true,sessionVars:null,trackerID:'UA-6119600-1'},initialize:function(options){this.setOptions(options);this.pageTracker=null;this.eventTracker=null;this.pageName=null;this.ready=false;this.tries=0;this.events=[];this.bindCommonReports();this.queueImpressionReports();window.addEvent('gaClick',this.onGAClick.bind(this));},queueImpressionReports:function(){this.queueEvents(this.options.impressionReport);},changeClickReports:function(changes){var clickReport=$H(this.options.clickReport);clickReport.each(function(report,i){report=$H(report).extend(changes).getClean();clickReport[i]=$H(clickReport[i]);clickReport[i].extend(report);clickReport[i]=clickReport[i].getClean();});this.options.clickReport=clickReport.getClean();},addLateReports:function(reports,partnerName){if(partnerName){var partnerClickReport=this[partnerName+"ClickReport"]=$H({});reports.each(function(report){partnerClickReport.extend(report);});this[partnerName+"ClickReport"]=partnerClickReport.getClean();}else{var lateClickReport=$H(this.options.clickReport);reports.each(function(report){lateClickReport.extend(report);});this.options.clickReport=lateClickReport.getClean();}},bindReports:function(report,eventType){var eventType=eventType||'click';var reportObj=$H(report);reportObj.each(function(gaEvent){var selector=reportObj.keyOf(gaEvent);$$(selector).addEvent(eventType,function(ev){ga.reportEvent(gaEvent,ev.target);});}.bind(this));},bindSocialReports:function(report){var reportObj=$H(report);reportObj.each(function(gaEvent){var selector=reportObj.keyOf(gaEvent);$$(selector).addEvent('click',function(ev){ga.sendSocialEvent(gaEvent);});}.bind(this));},bindCommonReports:function(){var commonReports={};this.bindReports(commonReports);},run:function(){if(typeof _gat!='undefined'){this.pageTracker=_gat._getTracker(this.options.trackerID);this.ready=true;this.send();}else if(typeof _gat=='undefined'&&this.tries<10){this.tries+=1;this.run.delay(500,this);}},send:function(){if(this.options.shouldInitCustomVars){this.setEnvVars();}
this.addVars();this.pageTracker._trackPageview(this.pageName);if(this.events.length>0){this.events.each(function(event,index){this.sendEvent(event);},this);}
this.events=[];if(((this.pageName=="pageType-item"||this.pageName=="pageType-item-AgeGateOpen")&&this.options.vars["EmptyVar"]!=undefined)||((this.pageName!="pageType-item"&&this.pageName!="pageType-item-AgeGateOpen")&&this.options.vars["Content"]!=undefined)){var img=new Image();img.src="/debugToSysLog.php?logFileID=dbgGA&URI="+escape(document.location.href)+"&vars="+JSON.encode(this.options.vars)+"&pageName="+this.pageName;}},concatenate:function(obj){str=[];for(key in obj){if(obj.hasOwnProperty(key)){str.push(key+'-'+obj[key]);}}
return str.join('/');},reportPageName:function(pageName){this.pageName=(pageName||'pageType-unknown')+this.getSearchQueryString();if(window.showAgeGateFlg){this.pageName+='-AgeGateOpen'}
if(!this.ready){this.run();}else{this.send();}},queueEvents:function(events){events.each(function(event){this.events.push(event);}.bind(this));},removeEventsFromQueue:function(events){events.each(function(event){this.events=this.events.subtract([event]);}.bind(this));},sendQueuedEvents:function(){this.events.each(function(event){this.sendEvent(event);}.bind(this));},addVars:function(){var paramValue;var levelNumber;var slotNumber;for(paramName in this.options.vars){levelNumber=this.options.vars[paramName]["level"];paramValue=this.options.vars[paramName]["value"];slotNumber=this.options.vars[paramName]["slot"];this.pageTracker._setCustomVar(slotNumber,paramName,paramValue,levelNumber);}},reportEvent:function(event,el){if(el&&el.get('data-ga-label')){event=event+'/'+el.get('data-ga-label');}
if(!this.ready){this.events.push(event);}else{this.sendEvent(event);}},sendEvent:function(event){var data={};if(typeof(event)=="string"){var e=event.split('/');data.category=e[0];data.action=e[1];switch(e.length){case 4:data.value=e[3];case 3:data.label=e[2];break;}}else if(typeof(event)=="object"){for(var p in event){data[p]=event[p];}}
if(this.options.useNewArch&&!this.options.clickReportRTE.contains(data.category)){console.log("Category not Authorised for RTE:",data.category);return;}
if(data.hasOwnProperty("value")){if(isNaN(Number(data.value))){delete data.value;}}
if(data.hasOwnProperty("label")&&data.hasOwnProperty("value")){this.pageTracker._trackEvent(data.category,data.action,data.label,data.value);}else if(data.hasOwnProperty("label")){this.pageTracker._trackEvent(data.category,data.action,data.label);}else{this.pageTracker._trackEvent(data.category,data.action);}},sendSocialEvent:function(event){var e=event.split('/');if(e.length>2){_gaq.push(['_trackSocial',e[0],e[1],e[2]]);}},getSearchQueryString:function(){if(typeof headerObj=="undefined"||this.options.useNewArch)return'';if(!headerObj.search){return'';}
var search=headerObj.search;var category=headerObj.category||null;return'?q='+search+(category?'&c='+category:'&c=all');},setEnvVars:function(){var landing=this.concatenate(this.options.sessionVars);try{var envVar=Cookie.get('__utmv').split('.')[1];if(envVar!=landing){this.pageTracker._setVar(landing);}}catch(e){}
return landing;},onGAClick:function(el){if(typeof console!='undefined'&&document.location.href.test('.(dev|qa).')){console.log('onGAClick click',el);}
var targetElement;if($type(el)==='element'){targetElement=el;var partnersClassNames=this.options.partnersClassNames;var reports=this.options.clickReport;var obj=null;var classes=el.get('class')+' '+el.get('id');classes=classes.split(' ').filter(function(c){return c!=''&&c!='null';});classes.each(function(c,i){if(partnersClassNames.contains(c)){var partnerClickReport=this[c+'ClickReport'];classes.each(function(c){if(c in partnerClickReport){obj=partnerClickReport[c];}});}else{if(c in reports){obj=reports[c];}}}.bind(this));}
else{obj=el;}
if(!obj){return;}
if(this.options.useNewArch){for(key in obj){if(obj.hasOwnProperty(key)&&(this.options.clickReportRTE.contains(key))){if(typeof console!='undefined'&&document.location.href.test('.(dev|qa).'))console.log('onGAClick-NEW reporting '+key+'/'+obj[key]);this.reportEvent(key+'/'+obj[key],targetElement);}else{}}}else{if(typeof console!='undefined'&&document.location.href.test('.(dev|qa).'))console.log('onGAClick reporting',obj);var hashCookie=new Hash.Cookie("GA",{domain:headerObj.cookieDomain,path:'/',duration:100});for(key in obj){if(obj.hasOwnProperty(key)){hashCookie.set(key,obj[key]);}}}}});
var panelMgr,siteSearch;function initWikiCloseMsg(){var closeWikiMsg=$('CloseWikiMsg');if(closeWikiMsg){closeWikiMsg.addEvent('click',function(ev){var e=new Event(ev).preventDefault();$('NoticeArea').remove();Cookie.set('wikimsg',0,{domain:headerObj.cookieDomain,path:'/',duration:0});});}}
function setHeaderSocialButtosData(data){var customLabel=data.customLabel;var fbData=data.facebook;var twData=data.twitter;var headerSocialLinks=$('headerSocialLinks');var fbHeader=$('fbHeader');var twHeader=$('twHeader');if(headerSocialLinks&&customLabel){headerSocialLinks.set('html',customLabel);}
if(fbHeader&&fbData){fbHeader.set('href',fbData.href);fbHeader.set('title',fbData.title);}
if(twHeader&&twData){twHeader.set('href',twData.href);twHeader.set('title',twData.title);}}
function setCurrentStudio(studioName){if(studioName){headerObj.currentStudio=studioName;headerObj.currentTab=studioName+"Tab";activateCurrentTab();}}
function activateCurrentTab(){if(headerObj.currentTab&&$(headerObj.currentTab)){$(headerObj.currentTab).addClass('Active');}else{var links=$ES('a','SiteNav');for(i=0;i<links.length;i++){el=links[i];if(el.href.contains(document.location.pathname)){var parentElement=el.getParent();if(parentElement.hasClass("Tab")){parentElement.addClass('Active');break;}}}}}
function initPage(){var isLoggedIn=(headerObj.userID!=false);headerObj.target=headerObj.target||'_top';$ES('a','Header').set('target',headerObj.target);$ES('a','Footer').set('target',headerObj.target);activateCurrentTab();var moreDD=new DropDown($('MoreMenuOpener'),$('CategoryList'));if(isLoggedIn){var acountDD=new DropDown($('WelcomeA'),$('AccountLinks'));}
if($('ClientDL')&&$('fpObj')){$('ClientDL').addEvents({'click':function(e){try{itemManager.shouldPausePlayer=false;}catch(err){}},'mouseout':function(e){try{itemManager.shouldPausePlayer=true;}catch(err){}}});}
if(headerObj.search&&headerObj.search!==''){var sTop=$('SearchQuery'),sBtm=$('SearchQueryBtm');sTop.set('value',headerObj.search);if(sBtm){sBtm.set('value',headerObj.search);}}
initWikiCloseMsg();if(!Cookie.read('TZOffset')){var d=new Date();Cookie.write('TZOffset',d.getTimezoneOffset(),{duration:1,domain:document.domain,path:'/'});}
if($E('.Panel')||$E('.Parent.Fold')){panelMgr=new PanelMgr();}
$$('.slCat').addEvent('change',function(){if($(document.body).hasClass('topics')){if(typeof ga!='undefined'){var selectedCategory=this.getSelected().get('html')[0].replace('&amp;','&');ga.reportEvent('Catalogs/Topic Page Regular Search Click/'+selectedCategory);}};document.location=this.get('value');});if(!$('AjaxProg')){var ajaxProg=new Element('div',{id:'AjaxProg','class':'Hidden'}).injectInside(document.body);}
var attributes={id:'AjaxProgSwf'};swfobject.embedSWF(headerObj.cdnFlash+'/Misc/ajax.swf','AjaxProgSwf',"20","20","8",false,false,swfobject.defaultParams,attributes);if(Browser.Engine.trident){console=new Console();if(Browser.Engine.trident4){var f=$(document.body).getFirst();if(f.get('tag')=='img'){f.hide();}}}
fireAjaxRequests();}
function fireAjaxRequests(){$$('.onDomReadyCache').each(function(el){rpc.doRPC(el);});}
function initPageAds(){if(document.getElement('.Ifrm')){(function(){adManager=new AdManager();}).delay(1000);}}
window.addEvent('load',initPageAds);function initFooter(){window.addEvent('load',function(){MainReportItems=new ReportItems();});}
function pauseVideoPlayer(){var fpObj=$('fpObj');if(fpObj&&window.isVideoPlayerReady){fpObj.pause();}else{window.pauseVideoPlayer.delay(250,window);}}
function resumeVideoPlayer(){var fpObj=$('fpObj');if(fpObj&&window.isVideoPlayerReady){fpObj.resume();}else{window.resumeVideoPlayer.delay(250,window);}}
var KPI=new Class({initialize:function(){if(!$defined(pageStartTime)){return;}
this.headerTime=pageStartTime;this.reported=false;this.combinedReports=[];this.params={};this.reportMap=$H();this.prevReports=[];this.prevServerParams={};this.prevClientParams={};this.UUIDReady=false;this.windowLoadReady=false;this.addLostSessionReport();this.initPreviousReports();window.addEvent('load',this.onWindowLoad.bind(this));window.onerror=function(msg,url,line){this.addReport({name:'JSError',value:'Error: '+msg+',URL: '+url+',Line: '+line},true);return true;}.bind(this);},addSimpleReport:function(name){this.addReport({name:name,value:this.getTimeFromInit()});},addReport:function(report,force){if(!$defined(force)&&!this.isKPIReporting()){return true;}
if(!this.reported){this.combinedReports.push(report);}else{this.reportMap.set(report.name,report.value);this.combinedReports.data=this.simpleReportsToArray();Cookie.write('KPIPrevReports',JSON.encode(this.combinedReports),{path:'/',duration:0,domain:document.domain});}},simpleReportsToArray:function(){var a=[];this.reportMap.each(function(v,k){a.push({name:k,value:v});});return a;},initPreviousReports:function(){var prev=Cookie.read('KPIPrevReports',{path:'/',duration:0,domain:document.domain});if(!prev){return false;}
Cookie.dispose('KPIPrevReports',{path:'/',duration:0,domain:document.domain});var prevReports=JSON.decode(prev);this.prevClientParams=prevReports.PrevClientParams;this.prevServerParams=prevReports.PrevServerParams;this.prevReports=prevReports.data;delete prevReports.PrevClientParams;delete prevReports.PrevServerParams;delete prevReports.data;return true;},report:function(params){if(this.combinedReports.length===0||this.reported){return true;}
var serverParams=KPIServerParams||'';var rand=Math.floor(Math.random()*100*Math.random()*200);this.reported=true;var qs='/index.php?inputType=reporter&reportName=KPI&rand='+rand+'&headerType=css&'+'serverParams='+encodeURIComponent(JSON.encode(serverParams))+'&clientParams='+encodeURIComponent(JSON.encode(this.params))+'&data='+encodeURIComponent(JSON.encode(this.combinedReports))+'&isBeta='+isBeta;if(this.prevReports.length>0){qs+='&prevClientParams='+encodeURIComponent(JSON.encode(this.prevClientParams))+'&prevServerParams='+encodeURIComponent(JSON.encode(this.prevServerParams))+'&prevData='+encodeURIComponent(JSON.encode(this.prevReports));}
var img=new Element('img',{'src':qs,'alt':'kpi-img','class':'Hidden'}).injectInside($(document.body));delete this.combinedReports;this.combinedReports={'PrevClientParams':this.params,'PrevServerParams':serverParams,'data':[]};},addRndtrpReport:function(serverLoadTime){var lastClicktime;if(!(lastClickTime=Cookie.read('KPIRndtrpStart'))){return;}
lastClickTime=new Date(Cookie.read('KPIRndtrpStart'));Cookie.dispose('KPIRndtrpStart',{duration:0,domain:document.domain,path:'/'});rndtrpTime=(this.headerTime-lastClickTime)-serverLoadTime;this.addReport({name:'Rndtrp',value:rndtrpTime});},getTimeFromInit:function(){var d=new Date();return d.getTime()-this.headerTime;},addLostSessionReport:function(){if(Cookie.read('KPIPageInit')){this.addReport({name:'LostSession',value:'1'});this.removePageInitCookie();return true;}
return false;},isKPIReporting:function(){return $defined(KPIServerParams);},setRndtrpCookie:function(){if(this.isKPIReporting()){Cookie.write('KPIRndtrpStart',new Date(),{duration:0,domain:document.domain,path:'/'});}},setKPIPageInitCookie:function(){if(this.isKPIReporting()){Cookie.write('KPIPageInit',this.headerTime,{duration:0,domain:document.domain,path:'/'});}},initParams:function(){var d=new Date();var client=Browser.name+Browser.version;this.params={OS:navigator.platform,browser:client,gmtOffset:d.getTimezoneOffset(),UUID:''};},removePageInitCookie:function(){Cookie.dispose('KPIPageInit',{duration:0,domain:document.domain,path:'/'});},onUUID:function(){if(!this.UUIDReady){this.initParams();this.UUIDReady=true;}
if(this.UUIDReady&this.windowLoadReady){this.report();}},onDOMLoad:function(serverLoadTime){this.addSimpleReport('HTMLLoadTime');this.addRndtrpReport(serverLoadTime);this.removePageInitCookie();},onWindowLoad:function(){this.addSimpleReport('FullLoadTime');this.windowLoadReady=true;if(this.UUIDReady&this.windowLoadReady){this.report();}}});
var LazyLoad=new Class({Implements:[Options,Events],options:{range:200,elements:"img",container:window,mode:"vertical",realSrcAttribute:"data-src",useFade:true,imageMode:"img"},initialize:function(options){this.setOptions(options);this.container=document.id(this.options.container);this.elements=$$(this.options.elements);this.largestPosition=0;var axis=(this.options.mode=="vertical"?"y":"x");var offset=(this.container!=window&&this.container!=document.body?this.container:"");this.elements=this.elements.filter(function(el){if(this.options.useFade)
el.setStyle("opacity",0);var elPos=el.getPosition(offset)[axis];if(elPos<this.container.getSize()[axis]
+this.options.range){this.loadImage(el);return false;}
return true;},this);var action=function(e){var cpos=this.container.getScroll()[axis];if(cpos>this.largestPosition){this.elements=this.elements.filter(function(el){if((cpos+this.options.range+this.container.getSize()[axis])>=el.getPosition(offset)[axis]){this.loadImage(el);return false;}
return true;},this);this.largestPosition=cpos;}
this.fireEvent("scroll");if(!this.elements.length){this.container.removeEvent("scroll",action);this.fireEvent("complete");}}.bind(this);this.container.addEvent("scroll",action);},loadImage:function(image){if(this.options.useFade){image.addEvent("load",function(){image.fade(1);});}
var realSrcAttr=this.options.realSrcAttribute
var realSrc=image.get(realSrcAttr);if(realSrc){switch(this.options.imageMode){case"img":image.set("src",realSrc);break;case"background":image.setStyle('background-image','url('+realSrc+')');break;}
image.erase(realSrcAttr);}
this.fireEvent("load",[image]);}});
var rpc,clickManager;var RemoteLoader=new Class({Implements:[Events],initialize:function(){this.cachedObjects={};this.inProcessElements=[];this.scrollToTop=false;this.request=new Request({link:'chain',onSuccess:this.onSuccess.bind(this),onFailure:this.onFailure.bind(this)})},doRPC:function(el,event){var data,method,url;if(event){event.preventDefault();}
if(el.hasClass('Disabled')||el.getParent().hasClass('Disabled')){return;}
if(el.get('tag')=='a'&&(el.get('href')||el.get('rel'))){url=el.hasClass('useHREF')?el.get('href'):(el.get('rel')||el.get('href'));if(el.get('class').match('post([0-9a-zA-Z_\-]*)')){data=$ES('.'+el.get('class').match('post([0-9a-zA-Z_\-]*)')[1]).toQueryString().join('&');method='post';}else{method='get';data=null;}}
if(el.get('tag')=='input'||el.get('tag')=='button'){for(p=el;p.get('tag')!='form';p=p.getParent()){}
p.fireEvent('onBeforeSubmit');if(p.hasClass('notvalid')){return;}
method=p.get('method')||'post';url=p.get('action');data=p.toQueryString();}
this.url=url=url+(url.test('/$')?'?':'&')+'ajax=1&rand='+Math.random();this.postBody=data||'';this.request.shouldReplace=false;if(el.hasClass('TempElement')){this.inProcessElements.push(el);this.request.shouldReplace=true;}
this.scrollToTop=el.hasClass('scrollTop');this.request.send({url:url,method:method,data:data});},onSuccess:function(response){var elements=new Element('div').set('html',this.request.response.text).getChildren();this.replaceElements(elements);this.fireEvent('onComplete');if(this.scrollToTop){var fx=new Fx.Scroll(window).start(0,$('Content').getCoordinates().top-20);}},onFailure:function(response){this.fireEvent('onFailure');},replaceElements:function(elements){var isDev=document.location.href.test('.dev.');var isDebug=document.location.href.test('debug');elements.each(function(el){var id=el.get('id');if(el.get('tag')=='script'&&!el.get('src')){if(isDev){console.log('evaluating script ',el.get('html'));}
$exec(el.get('html').replace('<!--','').replace('--!>',''));return;}
else if(el.get('tag')=='script'||el.get('tag')=='link'){if((el.get('tag')=='script'&&$ES('script[src="'+el.get('src')+'"]').length)||(el.get('tag')=='link'&&$ES('link[href="'+el.get('href')+'"]').length)){if(isDev){console.log('skipping script ',el);}
return;}
if(isDev){}
if(isDebug){alert('injecting '+el.get('src')+el.get('href'));alert('handling element tag:'+el.get('tag')+' id:'+el.get('id')+' defer:'+el.get('defer')+' src:'+el.get('src')+' href:'+el.get('href')+' innerHTML:'+el.get('html'));}
if(el.get('tag')=='script'){var js=new Asset.javascript(el.get('src'));}else{el.injectTop(document.head);}}
else if(el.get('html')===''&&el.get('tag')!='input'&&el.get('tag')!='button'){if(this.cachedObjects[id]){this.getFromCache(id);}}else if(this.inProcessElements.length>0&&this.request.shouldReplace){var inProcessElement=this.inProcessElements.shift();el.replaces(inProcessElement);}else{var oldElement=$(id);this.fireEvent('onUnload',[id,this.url],0);if(!oldElement){if(isDev){console.log('could not find an element to replace with',el);}
return;}
if(!oldElement.hasClass('nocache')){this.cachedObjects[id]=oldElement;}
if(isDebug){alert(el);}
el.replaces(oldElement);}
this.fireEvent('onChange',[id,this.url,this.postBody],0);},this);},getFromCache:function(id){return this.cachedObjects[id].replaces($(id));},callModal:function(el){clickManager.callModal(el);},setManager:function(manager){this.manager=manager;}});rpc=new RemoteLoader();var ClickManager=new Class({initialize:function(){this.modal=null;this.reportManager=new ReportManager();this.modules=[];document.addEvent('click',this.documentClick.bindWithEvent(this));},documentClick:function(event){if(event.rightClick){return;}
var BrandedContainer=BrandedContainer||false;var _break=false;for(var el=$(event.target);el&&el!=document.body;el=el.parentNode){if($defined(el.hasClass)){if(el.hasClass('windowBlank')){el.set('target','_blank');_break=true;}
if(el.hasClass('modalOpener')){event.preventDefault();this.callModal(el);_break=true;}
if(el.hasClass('rpc')){if(el.get('tag')=='a'){event.preventDefault();}
rpc.doRPC(el,event);_break=true;}
if(el.hasClass('rpcConf')){if(el.get('tag')=='a'){event.preventDefault();}
if(confirm('Are you sure you want to '+(el.get('title')||'continue')+'?')){rpc.doRPC(el,event);}
_break=true;}
if(el.hasClass('Fold')){if(el.hasClass('Parent')){if($(event.target).hasClass('TopicSectionFold')){panelMgr.togglePanel(el,false);_break=true;}}else{el.blur();panelMgr.togglePanel(el,true);$$('.Panel').toggleClass('IE7Sucks');_break=true;}}
if(el.hasClass('Toggler')&&!BrandedContainer){event.preventDefault();el.blur();this.toggleSibling(el);_break=true;}
if(el.hasClass('ListView')||el.hasClass('ThumbView')){el.blur();panelMgr.toggleLayout(el);_break=true;}
if(el.hasClass('reports')){this.reportManager.report(el);_break=true;}
if(el.hasClass('FreezeAutoplay')){freezeAutoplayWhenReady=true;_break=true;}
if(el.hasClass('ga')){window.fireEvent('gaClick',[el]);}
if(this.modules.length){this.modules.each(function(module){module.handleClick(el);});}
if(_break||el.get('tag')=='a'){break;}}}
if($('AjaxProg')){$('AjaxProg').setStyles({'top':(event.page.y+10)+'px','left':(event.page.x+8)+'px'});}},toggleSibling:function(el){$ES('.Toggled',el.getParent()).toggle();if(el.hasClass('More')){el.set('html','&laquo;Less').removeClass('More').addClass('Less');if(el.get('title')){el.set('title',el.get('title').replace(/(more)/gi,'less'));}}else if(el.hasClass('Less')){el.set('html','More&raquo;').addClass('More').removeClass('Less');if(el.get('title')){el.set('title',el.get('title').replace(/(less)/gi,'more'));}}else{el.toggleClass('Folded');}},callModal:function(el){if(this.modal===null){this.modal=new Moobox();}
var rel=el.get('rel');var href=el.get('href');var url=rel&&rel!='nofollow'?rel:href;this.modal.getContent(url);},registerModule:function(module){this.modules.include(module);},unregisterModule:function(module){this.modules.erase(module);}});clickManager=new ClickManager();
function udm_(a,b){var c="comScore=",d=document,e=d.cookie,f="",g="indexOf",h="substring",i="length",j=2048,k,l="&ns_",m="&",n,o,p,q,r=window,s=r.encodeURIComponent||escape;if(e[g](c)+1)for(p=0,o=e.split(";"),q=o[i];p<q;p++)n=o[p][g](c),n+1&&(f=m+unescape(o[p][h](n+c[i])));a+=l+"_t="+ +(new Date)+l+"c="+(d.characterSet||d.defaultCharset||"")+"&c8="+s(d.title)+f+"&c7="+s(d.URL)+"&c9="+s(d.referrer),a[i]>j&&a[g](m)>0&&(k=a[h](0,j-8).lastIndexOf(m),a=(a[h](0,k)+l+"cut="+s(a[h](k+1)))[h](0,j)),d.images?(n=new Image,r.ns_p||(ns_p=n),typeof b=="function"&&(n.onload=n.onerror=b),n.src=a):d.write("<","p","><",'img src="',a,'" height="1" width="1" alt="*"',"><","/p",">")}typeof _comscore=="undefined"&&(_comscore=[]),function(){var a="length",b=self,c=b.encodeURIComponent?encodeURIComponent:escape,d=".scorecardresearch.com",e="//app"+d+"/s2e/invite",f=Math,g="script",h="width",i=/c2=(\d*)&/,j,k=function(b){if(!!b){var e,f=[],g,h=0,i,j,k="";for(var l in b){g=typeof b[l];if(g=="string"||g=="number")f[f[a]]=l+"="+c(b[l]),l=="c2"?k=b[l]:l=="c1"&&(h=1)}if(f[a]<=0||k=="")return;j=b.options||{},j.d=j.d||document;if(typeof j.url_append=="string"){i=j.url_append.replace(/&amp;/,"&").split("&");for(var l=0,n=i[a],o;l<n;l++)o=i[l].split("="),o[a]==2&&(f[f[a]]=o[0]+"="+c(o[1]))}e=["http",j.d.URL.charAt(4)=="s"?"s://sb":"://b",d,"/b?",h?"":"c1=2&",f.join("&").replace(/&$/,"")],udm_(e.join(""),function(){m(this,j)})}},l=function(b){b=b||_comscore;for(var c=0,d=b[a];c<d;c++)k(b[c]);b=_comscore=[]},m=function(a,b){if(!(a.src.indexOf("c1=2")<0||!b.d.createElement))if(b.force_script_extension||a[h]==2&&a.height>f.round(f.random()*100)){var c=b.d.createElement(g),d=b.d.getElementsByTagName(g)[0],j=[b.script_extension_url||e,"?","c2=",a.src.match(i)[1]].join("");d&&(c.src=j,c.async=!0,d.parentNode.insertBefore(c,d))}};l(),(j=b.COMSCORE)?(j.purge=l,j.beacon=k):COMSCORE={purge:l,beacon:k}}()