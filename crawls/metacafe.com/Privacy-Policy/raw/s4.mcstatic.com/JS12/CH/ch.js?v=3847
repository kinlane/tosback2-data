function addEvtListener(obj,evtName,f){if(document.addEventListener){if(obj){obj.addEventListener(evtName,f,false);}else{addEventListener(evtName,f,false);}}else{if(attachEvent){if(obj){obj.attachEvent("on"+evtName,f);}else{attachEvent("on"+evtName,f);}}}}var clickHeatGroup="",clickHeatSite="",clickHeatServer="",clickHeatLastIframe=-1,clickHeatTime=0,clickHeatQuota=-1,clickHeatBrowser="",clickHeatDocument="",clickHeatWait=500,clickHeatLocalWait=0;function catchClickHeat(e){var c,element,x,y,w,h,scrollx,scrolly,clickTime,now,clickHeatImg,params,sent=false,xmlhttp=false;try{if(clickHeatQuota===0){return true;}if(clickHeatGroup===""){return true;}if(!e){e=window.event;}c=e.which||e.button;element=e.srcElement||null;if(c===0){return true;}if(element!==null&&element.tagName.toLowerCase()==="iframe"){if(element.sourceIndex===clickHeatLastIframe){return true;}clickHeatLastIframe=element.sourceIndex;}else{clickHeatLastIframe=-1;}x=e.clientX;y=e.clientY;w=clickHeatDocument.clientWidth||window.innerWidth;h=clickHeatDocument.clientHeight||window.innerHeight;scrollx=window.pageXOffset||clickHeatDocument.scrollLeft;scrolly=window.pageYOffset||clickHeatDocument.scrollTop;if(x>w||y>h){return true;}clickTime=new Date();if(clickTime.getTime()-clickHeatTime<1000){return true;}clickHeatTime=clickTime.getTime();if(clickHeatQuota>0){clickHeatQuota=clickHeatQuota-1;}params="s="+clickHeatSite+"&g="+clickHeatGroup+"&x="+(x+scrollx)+"&y="+(y+scrolly)+"&w="+w+"&b="+clickHeatBrowser+"&c="+c+"&random="+Date();if(clickHeatServer.indexOf("http")!==0){try{xmlhttp=new ActiveXObject("Msxml2.XMLHTTP");}catch(er){try{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}catch(oc){xmlhttp=null;}}if(!xmlhttp&&typeof(XMLHttpRequest)!=="undefined"){xmlhttp=new XMLHttpRequest();}if(xmlhttp){xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState===4){clickHeatLocalWait=0;}};xmlhttp.open("GET",clickHeatServer+"?"+params,true);xmlhttp.setRequestHeader("Connection","close");xmlhttp.send(null);sent=true;}}if(sent===false){clickHeatImg=new Image();clickHeatImg.src=clickHeatServer+"?"+params;}now=new Date();clickHeatLocalWait=now.getTime()+clickHeatWait;while(clickHeatLocalWait>now.getTime()){now=new Date();}}catch(err){}return true;}function initClickHeat(){var i,iFrames,b,browsers,domain;if(clickHeatGroup===""||clickHeatServer===""){return false;}domain=document.location.protocol+"//"+document.location.host;if(clickHeatServer.indexOf(domain)===0){clickHeatServer=clickHeatServer.substring(domain.length,clickHeatServer.length);}addEvtListener(document,"mousedown",catchClickHeat);iFrames=document.getElementsByTagName("iframe");for(i=0;i<iFrames.length;i+=1){addEvtListener(iFrames[i],"focus",catchClickHeat);}clickHeatDocument=document.documentElement&&document.documentElement.clientHeight!==0?document.documentElement:document.body;b=navigator.userAgent?navigator.userAgent.toLowerCase().replace(/-/g,""):"";browsers=["chrome","firefox","safari","msie","opera"];clickHeatBrowser="unknown";for(i=0;i<browsers.length;i+=1){if(b.indexOf(browsers[i])!==-1){clickHeatBrowser=browsers[i];break;}}}