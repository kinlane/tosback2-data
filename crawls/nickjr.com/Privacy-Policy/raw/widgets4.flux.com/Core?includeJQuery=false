(function(){var n=function(){function i(){typeof window.Flux4!="object"&&(window.Flux4={}),Flux4.createWidget=function(){var u=arguments,r,i;document.readyState!="complete"&&(r=arguments.length==2&&typeof arguments[1]!="function"||arguments.length==3?arguments[1]:{},r.container||r.containerId||(i="Flux4DebugWidget_"+t,t++,document.write('<div id="'+i+'"><\/div>'),arguments.length==1?u=[arguments[0],{containerId:i}]:arguments.length==2&&typeof arguments[1]=="function"?u=[arguments[0],{containerId:i},arguments[1]]:r.containerId=i)),n.push(u)}}function r(){for(var t=document.getElementsByTagName("script"),i=new RegExp("http://widgets4.(flux-dev.com|flux-staging.com|flux.com)/Core","i"),n=0;n<t.length;n++)if(i.test(t[n].getAttribute("src")||""))return t[n]}function u(){return typeof window.Flux4=="object"&&!!window.Flux4}var n=[],t=1;return{reloadOnDebug:function(t){var h,o,c,s,f,e;return!u()&&window.location.href.toLowerCase().indexOf(t.toLowerCase())>-1?(i(),h=r(),o=h.getAttribute("id"),o||(c=$("script[widgets4Debug=true]")[0]||$("script.widgets4Core")[0],c&&(o=c.getAttribute("id"))),s=h.getAttribute("src"),s+=(s.indexOf("?")>-1?"&":"?")+t,f=document.createElement("script"),f.setAttribute("type","text/javascript"),f.setAttribute("src",s),f.setAttribute("id",o),f.setAttribute("widgets4Debug","true"),e=document.getElementsByTagName("HEAD")[0]||document.documentElement,f.onload=f.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){f.onload=f.onreadystatechange=null,e&&f.parentNode&&e.removeChild(f),this.removeAttribute("widgets4Debug");for(var t=0;t<n.length;t++)Flux4.createWidget.apply(null,n[t])}},e.insertBefore(f,e.firstChild),!0):!1}}}();if(!n.reloadOnDebug("enableWidgetsDebug=true")){
/*!
 * jQuery Migrate - v1.1.1 - 2013-02-16
 * https://github.com/jquery/jquery-migrate
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
 */
(function(n,t,i){function r(i){f[i]||(f[i]=!0,n.migrateWarnings.push(i),t.console&&console.warn&&!n.migrateMute&&(console.warn("JQMIGRATE: "+i),n.migrateTrace&&console.trace&&console.trace()))}function o(t,i,u,f){if(Object.defineProperty)try{Object.defineProperty(t,i,{configurable:!0,enumerable:!0,get:function(){return r(f),u},set:function(n){r(f),u=n}});return}catch(e){}n._definePropertyBroken=!0,t[i]=u}var f,l,a,v;if(!(parseFloat(n.fn.jquery)<1.9)){f={},n.migrateWarnings=[],n.migrateMute=!1,!n.migrateMute&&t.console&&console.log&&console.log("JQMIGRATE: Logging is active"),n.migrateTrace===i&&(n.migrateTrace=!0),n.migrateReset=function(){f={},n.migrateWarnings.length=0},document.compatMode==="BackCompat"&&r("jQuery is not compatible with Quirks Mode");var s=n("<input/>",{size:1}).attr("size")&&n.attrFn,h=n.attr,g=n.attrHooks.value&&n.attrHooks.value.get||function(){return null},nt=n.attrHooks.value&&n.attrHooks.value.set||function(){return i},tt=/^(?:input|button)$/i,it=/^[238]$/,rt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ut=/^(?:checked|selected)$/i;o(n,"attrFn",s||{},"jQuery.attrFn is deprecated"),n.attr=function(t,u,f,e){var o=u.toLowerCase(),c=t&&t.nodeType;return e&&(h.length<4&&r("jQuery.fn.attr( props, pass ) is deprecated"),t&&!it.test(c)&&(s?u in s:n.isFunction(n.fn[u])))?n(t)[u](f):(u==="type"&&f!==i&&tt.test(t.nodeName)&&t.parentNode&&r("Can't change the 'type' of an input or button in IE 6/7/8"),!n.attrHooks[o]&&rt.test(o)&&(n.attrHooks[o]={get:function(t,r){var u,f=n.prop(t,r);return f===!0||typeof f!="boolean"&&(u=t.getAttributeNode(r))&&u.nodeValue!==!1?r.toLowerCase():i},set:function(t,i,r){var u;return i===!1?n.removeAttr(t,r):(u=n.propFix[r]||r,u in t&&(t[u]=!0),t.setAttribute(r,r.toLowerCase())),r}},ut.test(o)&&r("jQuery.fn.attr('"+o+"') may use property instead of attribute")),h.call(n,t,u,f))},n.attrHooks.value={get:function(n,t){var i=(n.nodeName||"").toLowerCase();return i==="button"?g.apply(this,arguments):(i!=="input"&&i!=="option"&&r("jQuery.fn.attr('value') no longer gets properties"),t in n?n.value:null)},set:function(n,t){var i=(n.nodeName||"").toLowerCase();if(i==="button")return nt.apply(this,arguments);i!=="input"&&i!=="option"&&r("jQuery.fn.attr('value', val) no longer sets properties"),n.value=t}};var e,u,c=n.fn.init,ft=n.parseJSON,et=/^(?:[^<]*(<[\w\W]+>)[^>]*|#([\w\-]*))$/;n.fn.init=function(t,i,u){var f;return t&&typeof t=="string"&&!n.isPlainObject(i)&&(f=et.exec(t))&&f[1]&&(t.charAt(0)!=="<"&&r("$(html) HTML strings must start with '<' character"),i&&i.context&&(i=i.context),n.parseHTML)?c.call(this,n.parseHTML(n.trim(t),i,!0),i,u):c.apply(this,arguments)},n.fn.init.prototype=n.fn,n.parseJSON=function(n){return!n&&n!==null?(r("jQuery.parseJSON requires a valid JSON string"),null):ft.apply(this,arguments)},n.uaMatch=function(n){n=n.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}},n.browser||(e=n.uaMatch(navigator.userAgent),u={},e.browser&&(u[e.browser]=!0,u.version=e.version),u.chrome?u.webkit=!0:u.webkit&&(u.safari=!0),n.browser=u),o(n,"browser",n.browser,"jQuery.browser is deprecated"),n.sub=function(){function t(n,i){return new t.fn.init(n,i)}n.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(r,u){return u&&u instanceof n&&!(u instanceof t)&&(u=t(u)),n.fn.init.call(this,r,u,i)},t.fn.init.prototype=t.fn;var i=t(document);return r("jQuery.sub() is deprecated"),t},n.ajaxSetup({converters:{"text json":n.parseJSON}}),l=n.fn.data,n.fn.data=function(t){var f,u,e=this[0];return e&&t==="events"&&arguments.length===1&&(f=n.data(e,t),u=n._data(e,t),(f===i||f===u)&&u!==i)?(r("Use of jQuery.fn.data('events') is deprecated"),u):l.apply(this,arguments)},a=/\/(java|ecma)script/i,v=n.fn.andSelf||n.fn.addBack,n.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),v.apply(this,arguments)},n.clean||(n.clean=function(t,i,u,f){i=i||document,i=!i.nodeType&&i[0]||i,i=i.ownerDocument||i,r("jQuery.clean() is deprecated");var o,e,h,c,s=[];if(n.merge(s,n.buildFragment(t,i).childNodes),u)for(h=function(n){if(!n.type||a.test(n.type))return f?f.push(n.parentNode?n.parentNode.removeChild(n):n):u.appendChild(n)},o=0;(e=s[o])!=null;o++)n.nodeName(e,"script")&&h(e)||(u.appendChild(e),typeof e.getElementsByTagName!="undefined"&&(c=n.grep(n.merge([],e.getElementsByTagName("script")),h),s.splice.apply(s,[o+1,0].concat(c)),o+=c.length));return s});var ot=n.event.add,st=n.event.remove,ht=n.event.trigger,ct=n.fn.toggle,y=n.fn.live,p=n.fn.die,w="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",b=new RegExp("\\b(?:"+w+")\\b"),k=/(?:^|\s)hover(\.\S+|)\b/,d=function(t){return typeof t!="string"||n.event.special.hover?t:(k.test(t)&&r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(k,"mouseenter$1 mouseleave$1"))};n.event.props&&n.event.props[0]!=="attrChange"&&n.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),n.event.dispatch&&o(n.event,"handle",n.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),n.event.add=function(n,t,i,u,f){n!==document&&b.test(t)&&r("AJAX events should be attached to document: "+t),ot.call(this,n,d(t||""),i,u,f)},n.event.remove=function(n,t,i,r,u){st.call(this,n,d(t)||"",i,r,u)},n.fn.error=function(){var n=Array.prototype.slice.call(arguments,0);return(r("jQuery.fn.error() is deprecated"),n.splice(0,0,"error"),arguments.length)?this.bind.apply(this,n):(this.triggerHandler.apply(this,n),this)},n.fn.toggle=function(t,i){if(!n.isFunction(t)||!n.isFunction(i))return ct.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var u=arguments,e=t.guid||n.guid++,f=0,o=function(i){var r=(n._data(this,"lastToggle"+t.guid)||0)%f;return n._data(this,"lastToggle"+t.guid,r+1),i.preventDefault(),u[r].apply(this,arguments)||!1};for(o.guid=e;f<u.length;)u[f++].guid=e;return this.click(o)},n.fn.live=function(t,i,u){if(r("jQuery.fn.live() is deprecated"),y)return y.apply(this,arguments);n(this.context).on(t,this.selector,i,u);return this},n.fn.die=function(t,i){return(r("jQuery.fn.die() is deprecated"),p)?p.apply(this,arguments):(n(this.context).off(t,this.selector||"**",i),this)},n.event.trigger=function(n,t,i,u){return i||b.test(n)||r("Global events are undocumented and deprecated"),ht.call(this,n,t,i||document,u)},n.each(w.split("|"),function(t,i){n.event.special[i]={setup:function(){var t=this;return t!==document&&(n.event.add(document,i+"."+n.guid,function(){n.event.trigger(i,null,t,!0)}),n._data(this,i,n.guid++)),!1},teardown:function(){return this!==document&&n.event.remove(document,i+"."+n._data(this,i)),!1}}})}})(jQuery,window);
/*!
* jQuery Cookie Plugin v1.3
* https://github.com/carhartl/jquery-cookie
*
* Copyright 2011, Klaus Hartl
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://www.opensource.org/licenses/mit-license.php
* http://www.opensource.org/licenses/GPL-2.0
*/
(function(n,t,i){function f(n){return n}function e(n){return decodeURIComponent(n.replace(u," "))}var u=/\+/g,r=n.cookie=function(u,o,s){var p,c,l,a,h,w,v,y;if(o!==i)return s=n.extend({},r.defaults,s),o===null&&(s.expires=-1),typeof s.expires=="number"&&(p=s.expires,c=s.expires=new Date,c.setDate(c.getDate()+p)),o=r.json?JSON.stringify(o):String(o),t.cookie=[encodeURIComponent(u),"=",r.raw?o:encodeURIComponent(o),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("");for(l=r.raw?f:e,a=t.cookie.split("; "),h=0,w=a.length;h<w;h++)if(v=a[h].split("="),l(v.shift())===u)return y=l(v.join("=")),r.json?JSON.parse(y):y;return null};r.defaults={},n.removeCookie=function(t,i){return n.cookie(t)!==null?(n.cookie(t,null,i),!0):!1}})(jQuery,document),function(){var y=this,at=y._,e={},r=Array.prototype,nt=Object.prototype,vt=Function.prototype,p=r.push,t=r.slice,o=r.concat,f=nt.toString,yt=nt.hasOwnProperty,tt=r.forEach,it=r.map,rt=r.reduce,ut=r.reduceRight,ft=r.filter,et=r.every,ot=r.some,s=r.indexOf,st=r.lastIndexOf,pt=Array.isArray,wt=Object.keys,w=vt.bind,n=function(t){if(t instanceof n)return t;if(!(this instanceof n))return new n(t);this._wrapped=t},i,b,k,h,d,g,c,u,ht,ct,l,a,lt,v;typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=n),exports._=n):y._=n,n.VERSION="1.4.4",i=n.each=n.forEach=function(t,i,r){var u,o,f;if(t!=null)if(tt&&t.forEach===tt)t.forEach(i,r);else if(t.length===+t.length){for(u=0,o=t.length;u<o;u++)if(i.call(r,t[u],u,t)===e)return}else for(f in t)if(n.has(t,f)&&i.call(r,t[f],f,t)===e)return},n.map=n.collect=function(n,t,r){var u=[];return n==null?u:it&&n.map===it?n.map(t,r):(i(n,function(n,i,f){u[u.length]=t.call(r,n,i,f)}),u)},b="Reduce of empty array with no initial value",n.reduce=n.foldl=n.inject=function(t,r,u,f){var e=arguments.length>2;if(t==null&&(t=[]),rt&&t.reduce===rt)return f&&(r=n.bind(r,f)),e?t.reduce(r,u):t.reduce(r);if(i(t,function(n,t,i){e?u=r.call(f,u,n,t,i):(u=n,e=!0)}),!e)throw new TypeError(b);return u},n.reduceRight=n.foldr=function(t,r,u,f){var o=arguments.length>2,e,s;if(t==null&&(t=[]),ut&&t.reduceRight===ut)return f&&(r=n.bind(r,f)),o?t.reduceRight(r,u):t.reduceRight(r);if(e=t.length,e!==+e&&(s=n.keys(t),e=s.length),i(t,function(n,i,h){i=s?s[--e]:--e,o?u=r.call(f,u,t[i],i,h):(u=t[i],o=!0)}),!o)throw new TypeError(b);return u},n.find=n.detect=function(n,t,i){var r;return k(n,function(n,u,f){if(t.call(i,n,u,f))return r=n,!0}),r},n.filter=n.select=function(n,t,r){var u=[];return n==null?u:ft&&n.filter===ft?n.filter(t,r):(i(n,function(n,i,f){t.call(r,n,i,f)&&(u[u.length]=n)}),u)},n.reject=function(t,i,r){return n.filter(t,function(n,t,u){return!i.call(r,n,t,u)},r)},n.every=n.all=function(t,r,u){r||(r=n.identity);var f=!0;return t==null?f:et&&t.every===et?t.every(r,u):(i(t,function(n,t,i){if(!(f=f&&r.call(u,n,t,i)))return e}),!!f)},k=n.some=n.any=function(t,r,u){r||(r=n.identity);var f=!1;return t==null?f:ot&&t.some===ot?t.some(r,u):(i(t,function(n,t,i){if(f||(f=r.call(u,n,t,i)))return e}),!!f)},n.contains=n.include=function(n,t){return n==null?!1:s&&n.indexOf===s?n.indexOf(t)!=-1:k(n,function(n){return n===t})},n.invoke=function(i,r){var u=t.call(arguments,2),f=n.isFunction(r);return n.map(i,function(n){return(f?r:n[r]).apply(n,u)})},n.pluck=function(t,i){return n.map(t,function(n){return n[i]})},n.where=function(t,i,r){return n.isEmpty(i)?r?null:[]:n[r?"find":"filter"](t,function(n){for(var t in i)if(i[t]!==n[t])return!1;return!0})},n.findWhere=function(t,i){return n.where(t,i,!0)},n.max=function(t,r,u){if(!r&&n.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!r&&n.isEmpty(t))return-Infinity;var f={computed:-Infinity,value:-Infinity};return i(t,function(n,t,i){var e=r?r.call(u,n,t,i):n;e>=f.computed&&(f={value:n,computed:e})}),f.value},n.min=function(t,r,u){if(!r&&n.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!r&&n.isEmpty(t))return Infinity;var f={computed:Infinity,value:Infinity};return i(t,function(n,t,i){var e=r?r.call(u,n,t,i):n;e<f.computed&&(f={value:n,computed:e})}),f.value},n.shuffle=function(t){var u,f=0,r=[];return i(t,function(t){u=n.random(f++),r[f-1]=r[u],r[u]=t}),r},h=function(t){return n.isFunction(t)?t:function(n){return n[t]}},n.sortBy=function(t,i,r){var u=h(i);return n.pluck(n.map(t,function(n,t,i){return{value:n,index:t,criteria:u.call(r,n,t,i)}}).sort(function(n,t){var i=n.criteria,r=t.criteria;if(i!==r){if(i>r||i===void 0)return 1;if(i<r||r===void 0)return-1}return n.index<t.index?-1:1}),"value")},d=function(t,r,u,f){var e={},o=h(r||n.identity);return i(t,function(n,i){var r=o.call(u,n,i,t);f(e,r,n)}),e},n.groupBy=function(t,i,r){return d(t,i,r,function(t,i,r){(n.has(t,i)?t[i]:t[i]=[]).push(r)})},n.countBy=function(t,i,r){return d(t,i,r,function(t,i){n.has(t,i)||(t[i]=0),t[i]++})},n.sortedIndex=function(t,i,r,u){var e;r=r==null?n.identity:h(r);for(var s=r.call(u,i),f=0,o=t.length;f<o;)e=f+o>>>1,r.call(u,t[e])<s?f=e+1:o=e;return f},n.toArray=function(i){return i?n.isArray(i)?t.call(i):i.length===+i.length?n.map(i,n.identity):n.values(i):[]},n.size=function(t){return t==null?0:t.length===+t.length?t.length:n.keys(t).length},n.first=n.head=n.take=function(n,i,r){if(n!=null)return i!=null&&!r?t.call(n,0,i):n[0]},n.initial=function(n,i,r){return t.call(n,0,n.length-(i==null||r?1:i))},n.last=function(n,i,r){if(n!=null)return i==null||r?n[n.length-1]:t.call(n,Math.max(n.length-i,0))},n.rest=n.tail=n.drop=function(n,i,r){return t.call(n,i==null||r?1:i)},n.compact=function(t){return n.filter(t,n.identity)},g=function(t,r,u){return i(t,function(t){n.isArray(t)?r?p.apply(u,t):g(t,r,u):u.push(t)}),u},n.flatten=function(n,t){return g(n,t,[])},n.without=function(i){return n.difference(i,t.call(arguments,1))},n.uniq=n.unique=function(t,r,u,f){n.isFunction(r)&&(f=u,u=r,r=!1);var s=u?n.map(t,u,f):t,o=[],e=[];return i(s,function(i,u){(r?u&&e[e.length-1]===i:n.contains(e,i))||(e.push(i),o.push(t[u]))}),o},n.union=function(){return n.uniq(o.apply(r,arguments))},n.intersection=function(i){var r=t.call(arguments,1);return n.filter(n.uniq(i),function(t){return n.every(r,function(i){return n.indexOf(i,t)>=0})})},n.difference=function(i){var u=o.apply(r,t.call(arguments,1));return n.filter(i,function(t){return!n.contains(u,t)})},n.zip=function(){for(var r=t.call(arguments),u=n.max(n.pluck(r,"length")),f=new Array(u),i=0;i<u;i++)f[i]=n.pluck(r,""+i);return f},n.object=function(n,t){var r,i,u;if(n==null)return{};for(r={},i=0,u=n.length;i<u;i++)t?r[n[i]]=t[i]:r[n[i][0]]=n[i][1];return r},n.indexOf=function(t,i,r){if(t==null)return-1;var u=0,f=t.length;if(r)if(typeof r=="number")u=r<0?Math.max(0,f+r):r;else return u=n.sortedIndex(t,i),t[u]===i?u:-1;if(s&&t.indexOf===s)return t.indexOf(i,r);for(;u<f;u++)if(t[u]===i)return u;return-1},n.lastIndexOf=function(n,t,i){var u,r;if(n==null)return-1;if(u=i!=null,st&&n.lastIndexOf===st)return u?n.lastIndexOf(t,i):n.lastIndexOf(t);for(r=u?i:n.length;r--;)if(n[r]===t)return r;return-1},n.range=function(n,t,i){arguments.length<=1&&(t=n||0,n=0),i=arguments[2]||1;for(var r=Math.max(Math.ceil((t-n)/i),0),u=0,f=new Array(r);u<r;)f[u++]=n,n+=i;return f},n.bind=function(n,i){if(n.bind===w&&w)return w.apply(n,t.call(arguments,1));var r=t.call(arguments,2);return function(){return n.apply(i,r.concat(t.call(arguments)))}},n.partial=function(n){var i=t.call(arguments,1);return function(){return n.apply(this,i.concat(t.call(arguments)))}},n.bindAll=function(r){var u=t.call(arguments,1);return u.length===0&&(u=n.functions(r)),i(u,function(t){r[t]=n.bind(r[t],r)}),r},n.memoize=function(t,i){var r={};return i||(i=n.identity),function(){var u=i.apply(this,arguments);return n.has(r,u)?r[u]:r[u]=t.apply(this,arguments)}},n.delay=function(n,i){var r=t.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},i)},n.defer=function(i){return n.delay.apply(n,[i,1].concat(t.call(arguments,1)))},n.throttle=function(n,t){var r,u,i,f,e=0,o=function(){e=new Date,i=null,f=n.apply(r,u)};return function(){var s=new Date,h=t-(s-e);return r=this,u=arguments,h<=0?(clearTimeout(i),i=null,e=s,f=n.apply(r,u)):i||(i=setTimeout(o,h)),f}},n.debounce=function(n,t,i){var r,u;return function(){var f=this,e=arguments,o=function(){r=null,i||(u=n.apply(f,e))},s=i&&!r;return clearTimeout(r),r=setTimeout(o,t),s&&(u=n.apply(f,e)),u}},n.once=function(n){var i=!1,t;return function(){return i?t:(i=!0,t=n.apply(this,arguments),n=null,t)}},n.wrap=function(n,t){return function(){var i=[n];return p.apply(i,arguments),t.apply(this,i)}},n.compose=function(){var n=arguments;return function(){for(var i=arguments,t=n.length-1;t>=0;t--)i=[n[t].apply(this,i)];return i[0]}},n.after=function(n,t){return n<=0?t():function(){if(--n<1)return t.apply(this,arguments)}},n.keys=wt||function(t){var i,r;if(t!==Object(t))throw new TypeError("Invalid object");i=[];for(r in t)n.has(t,r)&&(i[i.length]=r);return i},n.values=function(t){var r=[],i;for(i in t)n.has(t,i)&&r.push(t[i]);return r},n.pairs=function(t){var r=[],i;for(i in t)n.has(t,i)&&r.push([i,t[i]]);return r},n.invert=function(t){var r={},i;for(i in t)n.has(t,i)&&(r[t[i]]=i);return r},n.functions=n.methods=function(t){var r=[],i;for(i in t)n.isFunction(t[i])&&r.push(i);return r.sort()},n.extend=function(n){return i(t.call(arguments,1),function(t){if(t)for(var i in t)n[i]=t[i]}),n},n.pick=function(n){var u={},f=o.apply(r,t.call(arguments,1));return i(f,function(t){t in n&&(u[t]=n[t])}),u},n.omit=function(i){var f={},e=o.apply(r,t.call(arguments,1)),u;for(u in i)n.contains(e,u)||(f[u]=i[u]);return f},n.defaults=function(n){return i(t.call(arguments,1),function(t){if(t)for(var i in t)n[i]==null&&(n[i]=t[i])}),n},n.clone=function(t){return n.isObject(t)?n.isArray(t)?t.slice():n.extend({},t):t},n.tap=function(n,t){return t(n),n},c=function(t,i,r,u){var a,v,e,o,h,l,s;if(t===i)return t!==0||1/t==1/i;if(t==null||i==null)return t===i;if(t instanceof n&&(t=t._wrapped),i instanceof n&&(i=i._wrapped),a=f.call(t),a!=f.call(i))return!1;switch(a){case"[object String]":return t==String(i);case"[object Number]":return t!=+t?i!=+i:t==0?1/t==1/i:t==+i;case"[object Date]":case"[object Boolean]":return+t==+i;case"[object RegExp]":return t.source==i.source&&t.global==i.global&&t.multiline==i.multiline&&t.ignoreCase==i.ignoreCase}if(typeof t!="object"||typeof i!="object")return!1;for(v=r.length;v--;)if(r[v]==t)return u[v]==i;if(r.push(t),u.push(i),e=0,o=!0,a=="[object Array]"){if(e=t.length,o=e==i.length,o)while(e--)if(!(o=c(t[e],i[e],r,u)))break}else{if(h=t.constructor,l=i.constructor,h!==l&&!(n.isFunction(h)&&h instanceof h&&n.isFunction(l)&&l instanceof l))return!1;for(s in t)if(n.has(t,s)&&(e++,!(o=n.has(i,s)&&c(t[s],i[s],r,u))))break;if(o){for(s in i)if(n.has(i,s)&&!e--)break;o=!e}}return r.pop(),u.pop(),o},n.isEqual=function(n,t){return c(n,t,[],[])},n.isEmpty=function(t){if(t==null)return!0;if(n.isArray(t)||n.isString(t))return t.length===0;for(var i in t)if(n.has(t,i))return!1;return!0},n.isElement=function(n){return!!(n&&n.nodeType===1)},n.isArray=pt||function(n){return f.call(n)=="[object Array]"},n.isObject=function(n){return n===Object(n)},i(["Arguments","Function","String","Number","Date","RegExp"],function(t){n["is"+t]=function(n){return f.call(n)=="[object "+t+"]"}}),n.isArguments(arguments)||(n.isArguments=function(t){return!!(t&&n.has(t,"callee"))}),typeof/./!="function"&&(n.isFunction=function(n){return typeof n=="function"}),n.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},n.isNaN=function(t){return n.isNumber(t)&&t!=+t},n.isBoolean=function(n){return n===!0||n===!1||f.call(n)=="[object Boolean]"},n.isNull=function(n){return n===null},n.isUndefined=function(n){return n===void 0},n.has=function(n,t){return yt.call(n,t)},n.noConflict=function(){return y._=at,this},n.identity=function(n){return n},n.times=function(n,t,i){for(var u=Array(n),r=0;r<n;r++)u[r]=t.call(i,r);return u},n.random=function(n,t){return t==null&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},u={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}},u.unescape=n.invert(u.escape),ht={escape:new RegExp("["+n.keys(u.escape).join("")+"]","g"),unescape:new RegExp("("+n.keys(u.unescape).join("|")+")","g")},n.each(["escape","unescape"],function(t){n[t]=function(n){return n==null?"":(""+n).replace(ht[t],function(n){return u[t][n]})}}),n.result=function(t,i){if(t==null)return null;var r=t[i];return n.isFunction(r)?r.call(t):r},n.mixin=function(t){i(n.functions(t),function(i){var r=n[i]=t[i];n.prototype[i]=function(){var t=[this._wrapped];return p.apply(t,arguments),v.call(this,r.apply(n,t))}})},ct=0,n.uniqueId=function(n){var t=++ct+"";return n?n+t:t},n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},l=/(.)^/,a={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t"},a[String.fromCharCode(8232)]="u2028",a[String.fromCharCode(8233)]="u2029",lt=/\\|'|\r|\n|\t|\u2028|\u2029/g,n.template=function(t,i,r){var f,e;r=n.defaults({},r,n.templateSettings);var h=new RegExp([(r.escape||l).source,(r.interpolate||l).source,(r.evaluate||l).source].join("|")+"|$","g"),o=0,u="__p+='";t.replace(h,function(n,i,r,f,e){return u+=t.slice(o,e).replace(lt,function(n){return"\\"+a[n]}),i&&(u+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),r&&(u+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),f&&(u+="';\n"+f+"\n__p+='"),o=e+n.length,n}),u+="';\n",r.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{f=new Function(r.variable||"obj","_",u)}catch(s){s.source=u;throw s;}return i?f(i,n):(e=function(t){return f.call(this,t,n)},e.source="function("+(r.variable||"obj")+"){\n"+u+"}",e)},n.chain=function(t){return n(t).chain()},v=function(t){return this._chain?n(t).chain():t},n.mixin(n),i(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var i=r[t];n.prototype[t]=function(){var n=this._wrapped;return i.apply(n,arguments),(t=="shift"||t=="splice")&&n.length===0&&delete n[0],v.call(this,n)}}),i(["concat","join","slice"],function(t){var i=r[t];n.prototype[t]=function(){return v.call(this,i.apply(this._wrapped,arguments))}}),n.extend(n.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this);
/*! A fix for the iOS orientationchange zoom bug.
 Script by @scottjehl, rebound by @wilto.
 MIT License.
*/
(function(n){function h(n,i,r){var e=n.children(),o=!1,u,s,f;for(n.empty(),u=0,s=e.length;u<s;u++)if(f=e.eq(u),n.append(f),r&&n.append(r),t(n,i)){f.remove(),o=!0;break}else r&&r.remove();return o}function e(i,r,u,f,s){var v=i.contents(),h=!1,y,c,p,l,a,w;for(i.empty(),y="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style",c=0,p=v.length;c<p;c++){if(h)break;(l=v[c],a=n(l),typeof l!="undefined")&&(i.append(a),s&&(w=i.is(y)?"after":"append",i[w](s)),l.nodeType==3?t(u,f)&&(h=o(a,r,u,f,s)):h=e(a,r,u,f,s),h||s&&s.remove())}return h}function o(i,r,u,f,e){var v=!1,a=i[0],d,h,g;if(typeof a=="undefined")return!1;for(var y=f.wrap=="letter"?"":" ",p=c(a).split(y),w=-1,l=-1,b=0,k=p.length-1;b<=k;){if(d=Math.floor((b+k)/2),d==l)break;l=d,s(a,p.slice(0,l+1).join(y)+f.ellipsis),t(u,f)?k=l:(w=l,b=l)}if(w!=-1){for(h=p.slice(0,w+1).join(y),v=!0;n.inArray(h.slice(-1),f.lastCharacter.remove)>-1;)h=h.slice(0,-1);n.inArray(h.slice(-1),f.lastCharacter.noEllipsis)<0&&(h+=f.ellipsis),s(a,h)}else g=i.parent(),i.remove(),$n=g.contents().eq(-1),v=o($n,r,u,f,e);return v}function t(n,t){return n.innerHeight()>t.maxHeight}function i(n){return{width:n.innerWidth(),height:n.innerHeight()}}function s(n,t){n.innerText?n.innerText=t:n.nodeValue?n.nodeValue=t:n.textContent&&(n.textContent=t)}function c(n){return n.innerText?n.innerText:n.nodeValue?n.nodeValue:n.textContent?n.textContent:""}function a(t,i){return typeof t=="undefined"?!1:t?typeof t=="string"?(t=n(t,i),t.length?t:!1):typeof t=="object"?typeof t.jquery=="undefined"?!1:t:!1:!1}function v(n){var i=n.innerHeight(),r=["paddingTop","paddingBottom"],t;for(z=0,l=r.length;z<l;z++)t=parseInt(n.css(r[z]),10),isNaN(t)&&(t=0),i-=t;return i}function y(n,t){return n?(t=typeof t=="string"?"dotdotdot: "+t:["dotdotdot:",t],window.console&&window.console.log&&window.console.log(t),!1):!1}var f,r,u;n.fn.dotdotdot||(n.fn.dotdotdot=function(r){var u;if(this.length==0)return y(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){n(this).dotdotdot(r)});u=this,u.data("dotdotdot")&&u.trigger("destroy.dot"),u.bind_events=function(){return u.bind("update.dot",function(i,r){i.preventDefault(),i.stopPropagation(),o.maxHeight=typeof o.height=="number"?o.height:v(u),o.maxHeight+=o.tolerance,typeof r!="undefined"&&((typeof r=="string"||r instanceof HTMLElement)&&(r=n("<div />").append(r).contents()),r instanceof n&&(l=r)),c=u.wrapInner('<div class="dotdotdot" />').children(),c.empty().append(l.clone(!0)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var a=!1,f=!1;return s.afterElement&&(a=s.afterElement.clone(!0),s.afterElement.remove()),t(c,o)&&(f=o.wrap=="children"?h(c,o,a):e(c,u,c,o,a)),c.replaceWith(c.contents()),c=null,n.isFunction(o.callback)&&o.callback.call(u[0],f,l),s.isTruncated=f,f}).bind("isTruncated.dot",function(n,t){return n.preventDefault(),n.stopPropagation(),typeof t=="function"&&t.call(u[0],s.isTruncated),s.isTruncated}).bind("originalContent.dot",function(n,t){return n.preventDefault(),n.stopPropagation(),typeof t=="function"&&t.call(u[0],l),l}).bind("destroy.dot",function(n){n.preventDefault(),n.stopPropagation(),u.unwatch().unbind_events().empty().append(l).data("dotdotdot",!1)}),u},u.unbind_events=function(){return u.unbind(".dot"),u},u.watch=function(){if(u.unwatch(),o.watch=="window"){var t=n(window),r=t.width(),f=t.height();t.bind("resize.dot"+s.dotId,function(){r==t.width()&&f==t.height()&&o.windowResizeFix||(r=t.width(),f=t.height(),p&&clearInterval(p),p=setTimeout(function(){u.trigger("update.dot")},10))})}else w=i(u),p=setInterval(function(){var n=i(u);(w.width!=n.width||w.height!=n.height)&&(u.trigger("update.dot"),w=i(u))},100);return u},u.unwatch=function(){return n(window).unbind("resize.dot"+s.dotId),p&&clearInterval(p),u};var l=u.contents(),o=n.extend(!0,{},n.fn.dotdotdot.defaults,r),s={},w={},p=null,c=null;return s.afterElement=a(o.after,u),s.isTruncated=!1,s.dotId=f++,u.data("dotdotdot",!0).bind_events().trigger("update.dot"),o.watch&&u.watch(),u},n.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,debug:!1},f=1,r=n.fn.html,n.fn.html=function(n){return typeof n!="undefined"?this.data("dotdotdot")&&typeof n!="function"?this.trigger("update",[n]):r.call(this,n):r.call(this)},u=n.fn.text,n.fn.text=function(t){if(typeof t!="undefined"){if(this.data("dotdotdot")){var i=n("<div />");return i.text(t),t=i.html(),i.remove(),this.trigger("update",[t])}return u.call(this,t)}return u.call(this)})})(jQuery),function(n){function yi(t,i){function d(t,i,r,u){var f=t.find(i),e,h;if(n(t).is(i)&&f.push(t),f.length!=0)for(e=0;e<f.length;e++)if(n(f[e]).text().replace(s,"").length>r){if(u){var l=n(f[e]).html(),a=n(f[e]),o=n("<a class='more'>&nbsp;more<\/a>");o.click(function(){a.html(l)})}h=c(n(f[e]).html(),r),n(f[e]).html(h),u&&n(f[e]).append(o)}}function h(t){var i=n("<div>").html(t);return i.contents().each(function(){var i=n(this),t;this.nodeType==8?i.remove():(t=i.html(),!!t&&t.length>0&&i.html(h(t)))}),i.html()}function c(n,t){n=h(n);var f=0,e=[],o="",r=0,c=!1,l=!1,a=!1,u="",v=0,i;for(n=n.replace(s,""),n=n.replace(/<br>/gi,"<br/>");f<t&&f!=t&&v<n.length;)i=n.charAt(r),i=="<"&&(o="",a=!0,n.length>r+1&&n.charAt(r+1)=="/"?l=!0:c=!0),a?(o+=i,i==">"&&(c&&!tt(o)&&e.push(o),l&&e.pop(),c=!1,l=!1,a=!1)):(f++,i=="&"&&(f-=g(n,r))),u+=i,r++,v++;return v<n.length&&(u+="..."),e.length>0&&(u=nt(e,u)),u}function g(t,i){for(var f=t.substring(i,i+7),e=f.charAt(0),r,u=1;u<f.length;u++){if(r=f.charAt(u),r=="<"||r=="&")break;e+=r}return e.length-n("<span>"+e+"<\/span>").text().length}function nt(n,t){for(var i=0;i<n.length;i++){for(var u=n[i],f=u.charAt(0)+"/",e=1,r=u.charAt(e);r!=" "&&r!=">";)f+=r,e++,r=u.charAt(e);f+=">",t+=f}return t}function tt(n){for(var i=n.length-2,t=n.charAt(i);t!="<"&&t!="/"&&t==" ";)i--,t=n.charAt(i);return t=="/"?!0:!1}function l(n){var t,r,i;try{return t=Array.prototype.slice.call(n)}catch(u){for(t=[],r=n.length,i=0;i<r;i++)t.push(n[i]);return t}}function u(n){if(typeof n=="string")return n;if(n.nodeType===r.TEXT_NODE)return n.nodeValue;var t=document.createElement("div");return t.appendChild(n),t.innerHTML}function f(t,i){n(t).html(i)}function v(n){var s=[],t,h,f,i,u,e={node:n,nodeType:n.nodeType,subNodes:null},o=[];if(n.nodeType===r.TEXT_NODE){for(i=n.nodeValue.split(et),t=1,f=i.length;t<f;t++)i[t].indexOf("/")||(i[t-1]+="/",i[t]=i[t].substring(1));u=n.nodeValue}else if(n.nodeType===r.ELEMENT_NODE){for(h=l(n.childNodes),t=0,f=h.length;t<f;t++)o.push(v(h[t])),s=s.concat(o[o.length-1].texts);u=s.join(""),i=[u]}else u="",i=[];return e.text=u,e.texts=i,e.subNodes=o,e}function y(n){for(var l,b,h="",o=[],v,a=[],t,s=[],p,k,d=n.node,i=0,c=n.subNodes.length;i<c;i++)if(t=n.subNodes[i],t.nodeType===r.TEXT_NODE)for(p=t.texts,l=0,b=p.length;l<b;l++)a.push([p[l],r.TEXT_NODE,undefined]);else k=t.text,a.push([k,r.ELEMENT_NODE,t]);for(i=0,c=a.length;i<c;i++)t=a[i],v=h+t[0],e(v,!0)?(h=v,t[1]===r.ELEMENT_NODE?o.push(u(t[2].node)):o.push(t[0])):(e(h)?s.push(w(o.join(""))):s.push(o.join("")),h="",o=[],t[1]===r.ELEMENT_NODE?(t[2]=y(t[2]),s.push(u(t[2].node))):s.push(t[0]));return e(h)?s.push(w(o.join(""))):s.push(o.join("")),f(d,s.join("")),n}function ot(t,i){var h=[],e=[],c,b,y=!1,s,w,v,f,k=!1;for(t=l(t),c=0,b=t.length;c<b;c++)s=t[c],s.nodeType===r.TEXT_NODE?(y=!0,v=s.nodeValue):(w=p(s,n.inArray(s.nodeName,a)>=0),y=!w[1],v=w[0]),y?e.push(v):(e&&(f=e.join(""),i||(f=o(f)),h.push(f),e=[]),h.push(u(v)),k=!0);return e&&(f=e.join(""),i||(f=o(f)),h.push(f)),[h,k]}function p(t,i,e){var s,h=n.inArray(t.nodeName,a)===-1;return t?t.nodeType===r.TEXT_NODE?[i?t.nodeValue:o(t.nodeValue),!1]:(t.nodeType===r.ELEMENT_NODE&&t.nodeName!=="A"&&(s=ot(t.childNodes,i),f(t,s[0].join("")),h=h||s[1]),[e?t.innerHTML:u(t),h]):["",!1]}function e(n,t){return!n||ft.test(n)?!1:t&&n.length<=8?!0:it.test(n)&&rt.test(n)}function w(t){var i=n("<div>"+t+"<\/div>").text();for(i.indexOf("www.")||(i="http://"+i);i.charAt(i.length-1).match(ut);)i=i.substring(0,i.length-1);return'<a href="'+i+'" target="_blank">'+t+"<\/a>"}function o(n){var t=document.createElement("div"),i;return f(t,n),i=v(t),t=y(i).node,t.innerHTML}function st(i){var r=n("<div>"+i+"<\/div>");return t?r.text():p(r[0],!1,!0)[0]}function b(t){var i=n("<div><\/div>");return t.contents().each(function(){var t,r,u;this.nodeType==3?i.append(ht(this.nodeValue)):(t=n(this),r=t.html(),!!r&&r.length>0&&(u=b(t),t.html(u)),i.append(t))}),i.html()}function ht(t){var r,u,f;if(t.length<=i)return t;for(r=n("<div><\/div>"),u=1,f=0;f<t.length;f++)r.append(t.charAt(f)),u==i?(r.append(n("<wbr />")),u=1):u++;return r.html()}function k(t,i){var u=n("<div>").html(t),r="";return u.contents().each(function(){if(this.nodeType==3)r+=this.nodeValue;else{var t=n(this);r+=t.is(i)?n("<div>").html(t).html():k(t.html(),i)}}),r}var s=/(\n|\r)\s{4,}/gi,r={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},a="B,SPAN,WBR,EM,STRONG,I".split(","),it=/^(((https?|ftp):\/\/)|(www\.))/,rt=/\S$/,ut=/[.,!:;\\?]/,ft=/\s/,et=/\b/;return{controlHtmlLength:d,linkWrapper:st,truncateHtml:c,toWbr:b,getTextFromHtmlSelectively:k}}var s,ni,ti;typeof window.Flux4=="object"&&window.Flux4||(window.Flux4={}),Flux4.loadModernizr=function(){function t(){window.Modernizr=function(n,t,i){function h(n){o.cssText=n}function f(n,t){return typeof n===t}function ut(n,t){return!!~(""+n).indexOf(t)}function tt(n,t){for(var r in n)if(o[n[r]]!==i)return t=="pfx"?n[r]:!0;return!1}function ft(n,t,r){var e,u;for(e in n)if(u=t[n[e]],u!==i)return r===!1?n[e]:f(u,"function")?u.bind(r||t):u;return!1}function p(n,t,i){var r=n.charAt(0).toUpperCase()+n.substr(1),u=(n+" "+k.join(r+" ")+r).split(" ");return f(t,"string")||f(t,"undefined")?tt(u,t):(u=(n+" "+d.join(r+" ")+r).split(" "),ft(u,t,i))}var r={},it=t.documentElement,e="modernizr",w=t.createElement(e),o=w.style,rt,ot={}.toString,l=" -webkit- -moz- -o- -ms- ".split(" "),b="Webkit Moz O ms",k=b.split(" "),d=b.toLowerCase().split(" "),u={},g=[],a=g.slice,s,nt=function(n,i,r,u){var c,l,h,f=t.createElement("div"),s=t.body,o=s?s:t.createElement("body");if(parseInt(r,10))while(r--)h=t.createElement("div"),h.id=u?u[r]:e+(r+1),f.appendChild(h);return c=["&#173;","<style>",n,"<\/style>"].join(""),f.id=e,(s?f:o).innerHTML+=c,o.appendChild(f),s||(o.style.background="",it.appendChild(o)),l=i(f,n),s?f.parentNode.removeChild(f):o.parentNode.removeChild(o),!!l},v={}.hasOwnProperty,y,et,c;y=f(v,"undefined")||f(v.call,"undefined")?function(n,t){return t in n&&f(n.constructor.prototype[t],"undefined")}:function(n,t){return v.call(n,t)},Function.prototype.bind||(Function.prototype.bind=function(n){var t=this,i,r;if(typeof t!="function")throw new TypeError;return i=a.call(arguments,1),r=function(){var f,e,u;return this instanceof r?(f=function(){},f.prototype=t.prototype,e=new f,u=t.apply(e,i.concat(a.call(arguments))),Object(u)===u)?u:e:t.apply(n,i.concat(a.call(arguments)))},r}),et=function(i,u){var e=i.join(""),f=u.length;nt(e,function(i){for(var u=t.styleSheets[t.styleSheets.length-1],s=u?u.cssRules&&u.cssRules[0]?u.cssRules[0].cssText:u.cssText||"":"",o=i.childNodes,e={};f--;)e[o[f].id]=o[f];r.touch="ontouchstart"in n||n.DocumentTouch&&t instanceof DocumentTouch||(e.touch&&e.touch.offsetTop)===9},f,u)}([,["@media (",l.join("touch-enabled),("),e,")","{#touch{top:9px;position:absolute}}"].join("")],[,"touch"]),u.touch=function(){return r.touch},u.postmessage=function(){return!!n.postMessage},u.rgba=function(){return h("background-color:rgba(150,255,150,.5)"),ut(o.backgroundColor,"rgba")},u.multiplebgs=function(){return h("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(o.background)},u.borderradius=function(){return p("borderRadius")},u.boxshadow=function(){return p("boxShadow")};for(c in u)y(u,c)&&(s=c.toLowerCase(),r[s]=u[c](),g.push((r[s]?"":"no-")+s));return r.addTest=function(n,t){if(typeof n=="object")for(var u in n)y(n,u)&&r.addTest(u,n[u]);else{if(n=n.toLowerCase(),r[n]!==i)return r;t=typeof t=="function"?t():t,r[n]=t}return r},h(""),w=rt=null,r._version="2.5.3",r._prefixes=l,r._domPrefixes=d,r._cssomPrefixes=k,r.testProp=function(n){return tt([n])},r.testAllProps=p,r.testStyles=nt,r}(this,this.document)}var n=window.Modernizr;if(t.apply(window),Flux4.Modernizr=window.Modernizr,typeof n!="undefined")window.Modernizr=n;else try{delete window.Modernizr}catch(i){window.Modernizr=undefined}(function(n){n.addTest("ipad",function(){return!!navigator.userAgent.match(/iPad/i)}),n.addTest("iphone",function(){return!!navigator.userAgent.match(/iPhone/i)}),n.addTest("ipod",function(){return!!navigator.userAgent.match(/iPod/i)}),n.addTest("appleios",function(){return n.ipad||n.ipod||n.iphone}),n.addTest("cookies",function(){if(navigator.cookieEnabled)return!0;if(navigator.cookieEnabled===!1)return!1;document.cookie="cookietest=1";var n=document.cookie.indexOf("cookietest=")!=-1;return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",n}),n.addTest("positionfixed",function(){var i=document.createElement("div"),r=i.cloneNode(!1),u=!1,t=document.body||function(){return u=!0,document.documentElement.appendChild(document.createElement("body"))}(),e=t.style.cssText,f;return t.style.cssText="padding:0;margin:0",i.style.cssText="position:fixed;top:42px",t.appendChild(i),t.appendChild(r),f=i.offsetTop!==r.offsetTop,t.removeChild(i),t.removeChild(r),t.style.cssText=e,u&&document.documentElement.removeChild(t),navigator.userAgent.match(/OS (\d)/i),f&&(!n.appleios||n.appleios&&RegExp.$1>=5)}),n.addTest("mediaquery",function(){var t="(min-width: 0px)",i=window.matchMedia||window.msMatchMedia,r;return i?i(t)&&i(t).matches||!1:(n.testStyles("@media "+t+" { #modernizr { position: absolute; } }",function(n){r=(window.getComputedStyle?getComputedStyle(n,null):n.currentStyle).position=="absolute"}),r)})})(Flux4.Modernizr)},s=function(n,t){var u,e,i,r;if(!(this instanceof s))return new s(n,t);if(!f)throw"JSON unavailable! Include http://www.json.org/json2.js to fix.";if(arguments.length<=2&&arguments.length>0)t=typeof arguments[0]=="function"?arguments[0]:arguments[1],n=typeof arguments[0]=="function"?{}:arguments[0];else throw"Incorrect # of ctor args!";if(typeof t!="function")throw"No callback was provided";if(this.record=n.record||"record",this.name=n.name||"records",n.adapter)for(i=0,r=s.adapters.length;i<r;i++)if(s.adapters[i].adapter===n.adapter){u=s.adapters[i].valid()?s.adapters[i]:undefined;break}if(!u)for(i=0,r=s.adapters.length;i<r;i++)if(u=s.adapters[i].valid()?s.adapters[i]:undefined,u)break;if(!u)throw"No valid adapter.";for(e in u)this[e]=u[e];for(i=0,r=s.plugins.length;i<r;i++)s.plugins[i].call(this);this.init(n,t)},s.adapters=[],s.adapter=function(n,t){var r,u,i;t.adapter=n,r="adapter valid init keys save batch get exists all remove nuke".split(" "),u=this.prototype.indexOf;for(i in t)if(u(r,i)===-1)throw"Invalid adapter! Nonstandard method: "+i;s.adapters.push(t)},s.plugins=[],s.plugin=function(n){for(var t in n)t==="init"?s.plugins.push(n[t]):this.prototype[t]=n[t]},s.prototype={isArray:Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},indexOf:function(n,t,i,r){if(n.indexOf)return n.indexOf(t);for(i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},lambda:function(n){return this.fn(this.record,n)},fn:function(n,t){return typeof t=="string"?new Function(n,t):t},uuid:function(){var n=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},each:function(n){var i=this.lambda(n),t,r;if(this.__results)for(t=0,r=this.__results.length;t<r;t++)i.call(this,this.__results[t],t);else this.all(function(n){for(var t=0,r=n.length;t<r;t++)i.call(this,n[t],t)});return this}},s.adapter("dom",function(){var n=window.localStorage,t=function(t){return{key:t+"._index_",all:function(){var t=n.getItem(this.key);return t&&(t=f.parse(t)),t===null&&n.setItem(this.key,f.stringify([])),f.parse(n.getItem(this.key))},add:function(t){var i=this.all();i.push(t),n.setItem(this.key,f.stringify(i))},del:function(t){for(var r=this.all(),u=[],i=0,e=r.length;i<e;i++)r[i]!=t&&u.push(r[i]);n.setItem(this.key,f.stringify(u))},find:function(n){for(var i=this.all(),t=0,r=i.length;t<r;t++)if(n===i[t])return t;return!1}}};return{valid:function(){return!!n},init:function(n,i){this.indexer=t(this.name),i&&this.fn(this.name,i).call(this,this)},save:function(t,i){var r=t.key?this.name+"."+t.key:this.name+"."+this.uuid();return this.indexer.find(r)===!1&&this.indexer.add(r),delete t.key,n.setItem(r,f.stringify(t)),t.key=r.slice(this.name.length+1),i&&this.lambda(i).call(this,t),this},batch:function(n,t){for(var r=[],i=0,u=n.length;i<u;i++)this.save(n[i],function(n){r.push(n)});return t&&this.lambda(t).call(this,r),this},keys:function(n){if(n){var t=this.name,i=this.indexer.all().map(function(n){return n.replace(t+".","")});this.fn("keys",n).call(this,i)}return this},get:function(t,i){var o,u,s,e,r;if(this.isArray(t)){for(o=[],u=0,s=t.length;u<s;u++)e=this.name+"."+t[u],r=n.getItem(e),r&&(r=f.parse(r),r.key=t[u],o.push(r));i&&this.lambda(i).call(this,o)}else e=this.name+"."+t,r=n.getItem(e),r&&(r=f.parse(r),r.key=t),i&&this.lambda(i).call(this,r);return this},exists:function(n,t){var i=this.indexer.find(this.name+"."+n)===!1?!1:!0;return this.lambda(t).call(this,i),this},all:function(t){for(var e=this.indexer.all(),o=[],r,u,i=0,s=e.length;i<s;i++)u=e[i],r=f.parse(n.getItem(u)),r.key=u.replace(this.name+".",""),o.push(r);return t&&this.fn(this.name,t).call(this,o),this},remove:function(t,i){var r=this.name+"."+(t.key?t.key:t);return this.indexer.del(r),n.removeItem(r),i&&this.lambda(i).call(this),this},nuke:function(n){return this.all(function(t){for(var i=0,r=t.length;i<r;i++)this.remove(t[i]);n&&this.lambda(n).call(this)}),this}}}()),s.adapter("ie-userdata",{valid:function(){return typeof document.body.addBehavior!="undefined"},init:function(n,t){var i=document.createElement("span");i.style.behavior="url('#default#userData')",i.style.position="absolute",i.style.left=1e4,document.body.appendChild(i),this.storage=i,this.storage.load(this.name),this.fn(this.name,t).call(this,this)},get:function(n,t){var i=f.parse(this.storage.getAttribute(n)||"null");return i&&(i.key=n),t&&this.lambda(t).call(this,i),this},save:function(n,t){var i=n.key||"lc"+this.uuid();return delete n.key,this.storage.setAttribute(i,f.stringify(n)),this.storage.save(this.name),n.key=i,t&&this.lambda(t).call(this,n),this},all:function(n){for(var u=this.storage.XMLDocument.firstChild.attributes,e=[],r,t,i=0,o=u.length;i<o;i++)r=u[i],t=f.parse(r.nodeValue||"null"),t&&(t.key=r.nodeName,e.push(t));return n&&this.fn(this.name,n).call(this,e),this},remove:function(n,t){var i=typeof n=="string"?n:n.key;return this.storage.removeAttribute(i),this.storage.save(this.name),t&&this.lambda(t).call(this),this},nuke:function(n){var t=this;return this.all(function(i){for(var r=0,u=i.length;r<u;r++)i[r].key&&t.remove(i[r].key);n&&t.lambda(n).call(t)}),this}}),s.adapter("indexed-db",function(){function t(n,t){console.error("error in indexed-db adapter!",n,t)}var n="lawnchair",i=2,u=function(){return window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.oIndexedDB||window.msIndexedDB},r=function(){return window.IDBTransaction||window.webkitIDBTransaction||window.mozIDBTransaction||window.oIDBTransaction||window.msIDBTransaction},f=function(){return window.IDBKeyRange||window.webkitIDBKeyRange||window.mozIDBKeyRange||window.oIDBKeyRange||window.msIDBKeyRange};return{valid:function(){return!!u()},init:function(r,f){this.idb=u(),this.waiting=[];var o=this.idb.open(this.name,i),e=this,c=e.fn(e.name,f),s=function(){return c.call(e,e)},h=function(){try{e.db.deleteObjectStore("teststore")}catch(i){}try{e.db.deleteObjectStore(n)}catch(r){}e.store=e.db.createObjectStore(n,{autoIncrement:!0});for(var t=0;t<e.waiting.length;t++)e.waiting[t].call(e);e.waiting=[],s()};o.onupgradeneeded=function(n){h(n.oldVersion,n.newVersion)},o.onsuccess=function(){var u,r,n;if(e.db=o.result,e.db.version!=""+i)u=e.db.version,r=e.db.setVersion(""+i),r.onsuccess=function(){h(u,i)},r.onerror=function(n){console.log("Failed to create objectstore "+n),t(n)};else{for(e.store={},n=0;n<e.waiting.length;n++)e.waiting[n].call(e);e.waiting=[],s()}},o.onerror=t},save:function(i,u){if(!this.store){this.waiting.push(function(){this.save(i,u)});return}var f=this,s=function(n){u&&(i.key=n.target.result,f.lambda(u).call(f,i))},h=this.db.transaction(n,r().READ_WRITE),e=h.objectStore(n),o=i.key?e.put(i,i.key):e.put(i);return o.onsuccess=s,o.onerror=t,this},batch:function(n,t){for(var r=[],u=!1,f=this,o=function(t){r.push(t),u=r.length===n.length},s=setInterval(function(){u&&(t&&f.lambda(t).call(f,r),clearInterval(s))},200),i=0,e=n.length;i<e;i++)this.save(n[i],o);return this},get:function(i,r){var u,h,e,f,l;if(!this.store){this.waiting.push(function(){this.get(i,r)});return}if(u=this,h=function(n){r&&u.lambda(r).call(u,n.target.result)},this.isArray(i)){var o=[],c=!1,s=i,a=function(n){o.push(n),c=o.length===s.length},v=setInterval(function(){c&&(r&&u.lambda(r).call(u,o),clearInterval(v))},200);for(f=0,l=s.length;f<l;f++)this.get(s[f],a)}else e=this.db.transaction(n).objectStore(n).get(i),e.onsuccess=h,e.onerror=function(n){console.log("Failed to find "+i),t(n)};return this},exists:function(i,r){if(!this.store){this.waiting.push(function(){this.exists(i,r)});return}var u=this,e=this.db.transaction(n).objectStore(n).openCursor(f().only(i));return e.onsuccess=function(n){u.lambda(r).call(u,n.target.result!==null)},e.onerror=function(n){console.log("Failed to test for "+i),t(n)},this},all:function(t){if(!this.store){this.waiting.push(function(){this.all(t)});return}var i=this.fn(this.name,t)||undefined,u=this,f=this.db.transaction(n).objectStore(n),r=[];return f.openCursor().onsuccess=function(n){var t=n.target.result;t?(r.push(t.value),t["continue"]()):i&&i.call(u,r)},this},remove:function(i,u){if(!this.store){this.waiting.push(function(){this.remove(i,u)});return}typeof i=="object"&&(i=i.key);var f=this,o=function(){u&&f.lambda(u).call(f)},e=this.db.transaction(n,r().READ_WRITE).objectStore(n)["delete"](i);return e.onsuccess=o,e.onerror=t,this},nuke:function(i){if(!this.store){this.waiting.push(function(){this.nuke(i)});return}var u=this,f=i?function(){u.lambda(i).call(u)}:function(){};try{this.db.transaction(n,r().READ_WRITE).objectStore(n).clear().onsuccess=f}catch(e){t()}return this}}}()),s.adapter("webkit-sqlite",function(){var n=function(n,t){console.log("error in sqlite adaptor!",n,t)},t=function(){return new Date};return Function.prototype.bind||(Function.prototype.bind=function(n){var i=[].slice,f=i.call(arguments,1),r=this,t=function(){},u=function(){return r.apply(this instanceof t?this:n||{},f.concat(i.call(arguments)))};return t.prototype=r.prototype,u.prototype=new t,u}),{valid:function(){return!!window.openDatabase},init:function(t,i){var r=this,u=r.fn(r.name,i),f="CREATE TABLE IF NOT EXISTS "+this.record+" (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT, timestamp REAL)",e=function(){return u.call(r,r)};this.db=openDatabase(this.name,"1.0.0",this.name,65536),this.db.transaction(function(t){t.executeSql(f,[],e,n)})},keys:function(t){var i=this.lambda(t),r=this,u="SELECT id FROM "+this.record+" ORDER BY timestamp DESC";return this.db.transaction(function(t){var f=function(n,t){var f,u,e;if(t.rows.length==0)i.call(r,[]);else{for(f=[],u=0,e=t.rows.length;u<e;u++)f.push(t.rows.item(u).id);i.call(r,f)}};t.executeSql(u,[],f,n)}),this},save:function(i,r){var u=this,o=i.key||u.uuid(),h="INSERT INTO "+this.record+" (value, timestamp, id) VALUES (?,?,?)",c="UPDATE "+this.record+" SET value=?, timestamp=? WHERE id=?",s=function(){r&&(i.key=o,u.lambda(r).call(u,i))},e=[t(),o];return u.exists(i.key,function(t){u.db.transaction(function(r){var u=function(t){e.unshift(f.stringify(t)),r.executeSql(h,e,s,n)},o=function(t){delete t.key,e.unshift(f.stringify(t)),r.executeSql(c,e,s,n)};t?o(i):u(i)})}),this},batch:function(n,t){for(var r=[],u=!1,f=this,o=function(t){r.push(t),u=r.length===n.length},s=setInterval(function(){u&&(t&&f.lambda(t).call(f,r),clearInterval(s))},200),i=0,e=n.length;i<e;i++)this.save(n[i],o);return this},get:function(t,i){var r=this,u="",e;return u=this.isArray(t)?"SELECT id, value FROM "+this.record+" WHERE id IN ('"+t.join("','")+"')":"SELECT id, value FROM "+this.record+" WHERE id = '"+t+"'",e=function(n,u){var s=null,e=[],o,h;if(u.rows.length)for(o=0,h=u.rows.length;o<h;o++)s=f.parse(u.rows.item(o).value),s.key=u.rows.item(o).id,e.push(s);r.isArray(t)||(e=e.length?e[0]:null),i&&r.lambda(i).call(r,e)},this.db.transaction(function(t){t.executeSql(u,[],e,n)}),this},exists:function(t,i){var u="SELECT * FROM "+this.record+" WHERE id = ?",r=this,f=function(n,t){i&&r.fn("exists",i).call(r,t.rows.length>0)};return this.db.transaction(function(i){i.executeSql(u,[t],f,n)}),this},all:function(t){var u=this,e="SELECT * FROM "+this.record,i=[],r=this.fn(this.name,t)||undefined,o=function(n,t){var e,s,o;if(t.rows.length!=0)for(e=0,s=t.rows.length;e<s;e++)o=f.parse(t.rows.item(e).value),o.key=t.rows.item(e).id,i.push(o);r&&r.call(u,i)};return this.db.transaction(function(t){t.executeSql(e,[],o,n)}),this},remove:function(t,i){var r=this,u=typeof t=="string"?t:t.key,f="DELETE FROM "+this.record+" WHERE id = ?",e=function(){i&&r.lambda(i).call(r)};return this.db.transaction(function(t){t.executeSql(f,[u],e,n)}),this},nuke:function(t){var r="DELETE FROM "+this.record,i=this,u=t?function(){i.lambda(t).call(i)}:function(){};return this.db.transaction(function(t){t.executeSql(r,[],u,n)}),this}}}());var wt=function(){var i=function(){var t=0,i,r=function(){t=0,n.isFunction(i)&&i()};return{newCallback:function(i){return t++,function(){n.isFunction(i)&&i(),t--,t==0&&r()}},allDone:function(n){i=n,t==0&&r()}}},t={};return t.iterator=function(n){var t=function(i){var r=function(){return n.length&&n[i].apply(null,arguments),r.next()};return r.next=function(){return i<n.length-1?t(i+1):null},r};return t(0)},t.waterfall=function(n,i){if(i=i||function(){},!n.length)return i();var r=function(n){return function(t){if(t)i(t),i=function(){};else{var u=Array.prototype.slice.call(arguments,1),f=n.next();f?u.push(r(f)):u.push(i),setTimeout(function(){n.apply(null,u)},0)}}};r(t.iterator(n))()},{fork:function(){var r=arguments.length-1,u=arguments[arguments.length-1],f,t,i;if(!n.isFunction(u))throw new b("AsyncOperations - fork: last argument must be a function.");for(f=function(){r--,r==0&&u()},t=0;t<arguments.length-1;t++){if(i=arguments[t],!n.isFunction(i))throw new b("AsyncOperations - fork: "+(t+1)+" argument must be a function.");i(f)}},createAsyncManager:function(){return new i},waterfall:t.waterfall}}(),hi=function(){function u(){}function f(f,e,o){o&&o.width&&o.height&&o.buttonSpriteUrl||u("parameter buttonInfo of embedClipboardFlash(containerId, callback, buttonInfo) must contain width, height and buttonSpriteUrl");var s="_copyCallback_"+t;t++,window[n]||(window[n]=[]),window[n][s]=function(){return e()},i.embedSWF(r.clipboardFlashUrl,f,o.width,o.height,"9.0.0",null,{buttonSpriteUrl:encodeURIComponent(o.buttonSpriteUrl),copyCallbackName:"window."+n+"."+s},{allowscriptaccess:"always",wmode:"transparent",scale:"noscale",salign:"lt",menu:"false"},{id:f})}var n="Flux4_Core_Utils_Clipboard_GlobalCallbacks",i=function(){function b(){var u,r,f,i;if(!c){if(n.ie&&n.win){u=o("span");try{r=t.getElementsByTagName("body")[0].appendChild(u),r.parentNode.removeChild(r)}catch(e){return}}for(c=!0,p&&(clearInterval(p),p=null),f=y.length,i=0;i<f;i++)y[i]()}}function k(n){c?n():y[y.length]=n}function ut(n){if(typeof r.addEventListener!=i)r.addEventListener("load",n,!1);else if(typeof t.addEventListener!=i)t.addEventListener("load",n,!1);else if(typeof r.attachEvent!=i)r.attachEvent("onload",n);else if(typeof r.onload=="function"){var u=r.onload;r.onload=function(){u(),n()}}else r.onload=n}function ot(){for(var f=e.length,r,i,t=0;t<f;t++)r=e[t].id,n.pv[0]>0?(i=u(r),i&&(e[t].width=i.getAttribute("width")?i.getAttribute("width"):"0",e[t].height=i.getAttribute("height")?i.getAttribute("height"):"0",l(e[t].swfVersion)?(n.webkit&&n.webkit<312&&st(i),s(r,!0)):e[t].expressInstall&&!v&&l("6.0.65")&&(n.win||n.mac)?ft(e[t]):ct(i))):s(r,!0)}function st(n){var s=n.getElementsByTagName(f)[0],e,t,h,i,r,c,u;if(s){if(e=o("embed"),t=s.attributes,t)for(h=t.length,i=0;i<h;i++)t[i].nodeName.toLowerCase()=="data"?e.setAttribute("src",t[i].nodeValue):e.setAttribute(t[i].nodeName,t[i].nodeValue);if(r=s.childNodes,r)for(c=r.length,u=0;u<c;u++)r[u].nodeType==1&&r[u].nodeName.toLowerCase()=="param"&&e.setAttribute(r[u].getAttribute("name"),r[u].getAttribute("value"));n.parentNode.replaceChild(e,n)}}function ht(t){n.ie&&n.win&&l("8.0.0")&&r.attachEvent("onunload",function(){var n=u(t),i;if(n){for(i in n)typeof n[i]=="function"&&(n[i]=function(){});n.parentNode.removeChild(n)}})}function ft(i){var f,e,c;if(v=!0,f=u(i.id),f){i.altContentId?(e=u(i.altContentId),e&&(h=e,w=i.altContentId)):h=g(f),!/%$/.test(i.width)&&parseInt(i.width,10)<310&&(i.width="310"),!/%$/.test(i.height)&&parseInt(i.height,10)<137&&(i.height="137"),t.title=t.title.slice(0,47)+" - Flash Player Installation";var l=n.ie&&n.win?"ActiveX":"PlugIn",a=t.title,y="MMredirectURL="+r.location+"&MMplayerType="+l+"&MMdoctitle="+a,s=i.id;n.ie&&n.win&&f.readyState!=4&&(c=o("div"),s+="SWFObjectNew",c.setAttribute("id",s),f.parentNode.insertBefore(c,f),f.style.display="none",r.attachEvent("onload",function(){f.parentNode.removeChild(f)})),nt({data:i.expressInstall,id:rt,width:i.width,height:i.height},{flashvars:y},s)}}function ct(t){if(n.ie&&n.win&&t.readyState!=4){var i=o("div");t.parentNode.insertBefore(i,t),i.parentNode.replaceChild(g(t),i),t.style.display="none",r.attachEvent("onload",function(){t.parentNode.removeChild(t)})}else t.parentNode.replaceChild(g(t),t)}function g(t){var u=o("div"),e,i,s,r;if(n.win&&n.ie)u.innerHTML=t.innerHTML;else if(e=t.getElementsByTagName(f)[0],e&&(i=e.childNodes,i))for(s=i.length,r=0;r<s;r++)i[r].nodeType==1&&i[r].nodeName.toLowerCase()=="param"||i[r].nodeType==8||u.appendChild(i[r].cloneNode(!0));return u}function nt(t,r,e){var b,p=u(e),k,s,d,w,c,h,v,a,l,y;if(typeof t.id==i&&(t.id=e),n.ie&&n.win){k="";for(s in t)t[s]!=Object.prototype[s]&&(s=="data"?r.movie=t[s]:s.toLowerCase()=="styleclass"?k+=' class="'+t[s]+'"':s!="classid"&&(k+=" "+s+'="'+t[s]+'"'));d="";for(w in r)r[w]!=Object.prototype[w]&&(d+='<param name="'+w+'" value="'+r[w]+'" />');p.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+k+">"+d+"<\/object>",ht(t.id),b=u(t.id)}else if(n.webkit&&n.webkit<312){c=o("embed"),c.setAttribute("type",it);for(h in t)t[h]!=Object.prototype[h]&&(h=="data"?c.setAttribute("src",t[h]):h.toLowerCase()=="styleclass"?c.setAttribute("class",t[h]):h!="classid"&&c.setAttribute(h,t[h]));for(v in r)r[v]!=Object.prototype[v]&&v!="movie"&&c.setAttribute(v,r[v]);p.parentNode.replaceChild(c,p),b=c}else{a=o(f),a.setAttribute("type",it);for(l in t)t[l]!=Object.prototype[l]&&(l.toLowerCase()=="styleclass"?a.setAttribute("class",t[l]):l!="classid"&&a.setAttribute(l,t[l]));for(y in r)r[y]!=Object.prototype[y]&&y!="movie"&&lt(a,y,r[y]);p.parentNode.replaceChild(a,p),b=a}return b}function lt(n,t,i){var r=o("param");r.setAttribute("name",t),r.setAttribute("value",i),n.appendChild(r)}function u(n){return t.getElementById(n)}function o(n){return t.createElement(n)}function l(t){var r=n.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10),i[2]=parseInt(i[2],10),r[0]>i[0]||r[0]==i[0]&&r[1]>i[1]||r[0]==i[0]&&r[1]==i[1]&&r[2]>=i[2]?!0:!1}function et(r,u){var h,e,s;n.ie&&n.mac||(h=t.getElementsByTagName("head")[0],e=o("style"),e.setAttribute("type","text/css"),e.setAttribute("media","screen"),n.ie&&n.win||typeof t.createTextNode==i||e.appendChild(t.createTextNode(r+" {"+u+"}")),h.appendChild(e),n.ie&&n.win&&typeof t.styleSheets!=i&&t.styleSheets.length>0&&(s=t.styleSheets[t.styleSheets.length-1],typeof s.addRule==f&&s.addRule(r,u)))}function s(n,t){var i=t?"visible":"hidden";c?u(n).style.visibility=i:et("#"+n,"visibility:"+i)}var i="undefined",f="object",tt="Shockwave Flash",d="ShockwaveFlash.ShockwaveFlash",it="application/x-shockwave-flash",rt="SWFObjectExprInst",r=window,t=document,a=navigator,y=[],e=[],p=null,h=null,w=null,c=!1,v=!1,n=function(){var c=typeof t.getElementById!=i&&typeof t.getElementsByTagName!=i&&typeof t.createElement!=i&&typeof t.appendChild!=i&&typeof t.replaceChild!=i&&typeof t.removeChild!=i&&typeof t.cloneNode!=i,u=[0,0,0],n=null,e,o;if(typeof a.plugins!=i&&typeof a.plugins[tt]==f)n=a.plugins[tt].description,n&&(n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),u[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),u[2]=/r/.test(n)?parseInt(n.replace(/^.*r(.*)$/,"$1"),10):0);else if(typeof r.ActiveXObject!=i){e=null,o=!1;try{e=new ActiveXObject(d+".7")}catch(p){try{e=new ActiveXObject(d+".6"),u=[6,0,21],e.AllowScriptAccess="always"}catch(p){u[0]==6&&(o=!0)}if(!o)try{e=new ActiveXObject(d)}catch(p){}}if(!o&&e)try{n=e.GetVariable("$version"),n&&(n=n.split(" ")[1].split(","),u=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}catch(p){}}var s=a.userAgent.toLowerCase(),h=a.platform.toLowerCase(),l=/webkit/.test(s)?parseFloat(s.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=h?/win/.test(h):/win/.test(s),y=h?/mac/.test(h):/mac/.test(s);return{w3cdom:c,pv:u,webkit:l,ie:!1,win:v,mac:y}}(),at=function(){if(n.w3cdom){if(k(ot),n.ie&&n.win)try{t.write("<script id=__ie_ondomload defer=true src=//:><\/script>");var r=u("__ie_ondomload");r&&(r.onreadystatechange=function(){this.readyState=="complete"&&(this.parentNode.removeChild(this),b())})}catch(f){}n.webkit&&typeof t.readyState!=i&&(p=setInterval(function(){/loaded|complete/.test(t.readyState)&&b()},10)),typeof t.addEventListener!=i&&t.addEventListener("DOMContentLoaded",b,null),ut(b)}}();return{registerObject:function(t,i,r){if(n.w3cdom&&t&&i){var u={};u.id=t,u.swfVersion=i,u.expressInstall=r?r:!1,e[e.length]=u,s(t,!1)}},getObjectById:function(t){var o=null,r,e;return n.w3cdom&&c&&(r=u(t),r&&(e=r.getElementsByTagName(f)[0],!e||e&&typeof r.SetVariable!=i?o=r:typeof e.SetVariable!=i&&(o=e))),o},embedSWF:function(t,r,u,e,o,h,c,a,y){var w,b,p;if(n.w3cdom&&t&&r&&u&&e&&o)if(u+="",e+="",l(o)){if(s(r,!1),w=typeof y==f?y:{},w.data=t,w.width=u,w.height=e,b=typeof a==f?a:{},typeof c==f)for(p in c)c[p]!=Object.prototype[p]&&(typeof b.flashvars!=i?b.flashvars+="&"+p+"="+c[p]:b.flashvars=p+"="+c[p]);k(function(){nt(w,b,r),w.id==r&&s(r,!0)})}else h&&!v&&l("6.0.65")&&(n.win||n.mac)&&(s(r,!1),k(function(){var n={};n.id=n.altContentId=r,n.width=u,n.height=e,n.expressInstall=h,ft(n)}))},getFlashPlayerVersion:function(){return{major:n.pv[0],minor:n.pv[1],release:n.pv[2]}},hasFlashPlayerVersion:l,createSWF:function(t,i,r){return n.w3cdom&&c?nt(t,i,r):undefined},createCSS:function(t,i){n.w3cdom&&et(t,i)},addDomLoadEvent:k,addLoadEvent:ut,getQueryParamValue:function(n){var u=t.location.search||t.location.hash,r,i;if(n==null)return u;if(u)for(r=u.substring(1).split("&"),i=0;i<r.length;i++)if(r[i].substring(0,r[i].indexOf("="))==n)return r[i].substring(r[i].indexOf("=")+1);return""},expressInstallCallback:function(){if(v&&h){var t=u(rt);t&&(t.parentNode.replaceChild(h,t),w&&(s(w,!0),n.ie&&n.win&&(h.style.display="block")),h=null,w=null,v=!1)}}}}(),t=0;return{embedClipboardFlash:f}}(),ii=function(n,t){function o(t,i){return e.trace("CookieDataCache"+(n?"["+n+"]:":":")+t,i)}function i(){var t=a.getCookie(n),i=[];if(t)try{i=f.parse(t)}catch(r){o("cookie parsing error: "+r,!0)}return i}function s(n){return n.expires<=(new Date).getTime()}function r(n,t){return _.detect(n,function(n){return n.key==t&&!s(n)})}function u(i){var r=_.reject(i,function(n){return s(n)});r.length>0?a.setCookie(n,f.stringify(r),t):a.setCookie(n,"",-1)}return n||o("cookieName is not defined"),t||(t=9e5),{containsKey:function(n){return!!r(i(),n)},getValue:function(n){return(r(i(),n)||{}).value},add:function(n,f){var o=i(),e=r(o,n);e||(e={key:n},o.push(e)),_.isUndefined(f)||(e.value=f),e.expires=(new Date).getTime()+t,u(o)},removeKey:function(n){var t=i(),f=r(t,n);f&&(f.expires=-1,u(t))},clear:function(){u([])}}},st={getCookie:function(n){var t=_.detect(document.cookie.split("; "),function(t){return t.indexOf(n)==0});if(t)return unescape(t.substring(n.length+1))},setCookie:function(n,t,i){if(i){var r=new Date;r.setTime(r.getTime()+i),i="; expires="+r.toGMTString()}document.cookie=n+"="+t+i+"; path=/;"},setRawCookie:function(n){document.cookie=n+"; path=/"},setCookieToRootDomain:function(n,t,i){var u,r;i&&(u=new Date,u.setTime(u.getTime()+i),i="; expires="+u.toGMTString()),r=location.hostname.split("."),r.length>1&&(r=r[r.length-2]+"."+r[r.length-1]),document.cookie=n+"="+t+i+"; path=/; domain="+r},removeCookie:function(n){this.setCookie(n,null,new Date(0))}},ri={generate:function(n){function f(n){var u=n+"",e="",i,r,s=0,f,t,o;for(i=r=0,s=u.length,f=0;f<s;f++)t=u.charCodeAt(f),o=null,t<128?r++:o=t>127&&t<2048?String.fromCharCode(t>>6|192)+String.fromCharCode(t&63|128):String.fromCharCode(t>>12|224)+String.fromCharCode(t>>6&63|128)+String.fromCharCode(t&63|128),o!==null&&(r>i&&(e+=u.substring(i,r)),e+=o,i=r=f+1);return r>i&&(e+=u.substring(i,u.length)),e}function e(n){for(var i,r=n&65535,t=r.toString(16).toUpperCase();t.length<4;)t="0"+t;for(r=n>>>16&65535,i=r.toString(16).toUpperCase();i.length<4;)i="0"+i;return i+t}var i;n=f(n);var t=0,r=0,u=0;for(t=t^-1,i=0;i<n.length;i++)u=(t^n.charCodeAt(i))&255,r="0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(u*9,8),t=t>>>8^r;return t=t^-1,e(t)}},e=function(){function n(n,t){return(n+Math.pow(10,t)).toString().substr(1)}function t(){var t=new Date;return"["+n(t.getHours(),2)+":"+n(t.getMinutes(),2)+":"+n(t.getSeconds(),2)+"."+n(t.getMilliseconds(),3)+"]"}return{trace:function(n,i){if(this.enabled&&window.console&&window.console.log){var r=t()+" WDK4:"+n;i&&console.error?console.error(r):console.log(r)}},enabled:!1}}(),o=function(){function i(){}function r(t){return!_.isString(t)||!n.trim(t)?(i("event name is not a string or empty",!0),!1):!0}function u(u,f){if(r(u)){if(!n.isFunction(f)){i("event listener is not a function",!0);return}var e=u.toLowerCase();t[e]||(t[e]=[]),t[e].push(f)}}function f(u,f){if(r(u)){if(!n.isFunction(f)){i("event listener is not a function",!0);return}var e=u.toLowerCase();t[e]&&t[e].pop(f)}}var t={};return{addEventListener:u,removeEventListener:f,addListOfEventListeners:function(t){if(!t){i("event list is empty",!0);return}n.each(t,function(n,t){f(n,t),u(n,t)})},raiseEvent:function(u){if(r(u)){i('"'+u+'" has been raised');var o=Array.prototype.slice.call(arguments,1),f=[].concat(t[u.toLowerCase()]||[]),s=Flux4.eventListeners||{};n.each(s,function(n,t){n.toLowerCase()===u.toLowerCase()&&f.push(t)}),n.each(f,function(n,t){try{t.apply(null,o)}catch(i){}})}}}}(),ci=function(){var t={twitter:{url:"http://platform.twitter.com/widgets.js",isLoaded:function(){return!!window.twttr&&!!window.twttr.widgets}},tumblr:{url:"http://platform.tumblr.com/v1/share.js",isLoaded:function(){return!!window.Tumblr}},foursquare:{url:"http://platform.foursquare.com/js/widgets.js",isLoaded:function(){return!!window.fourSq}},pinterest:{url:"http://assets.pinterest.com/js/pinit.js",isLoaded:function(){return!!window.PinIt&&window.PinIt.loaded}}};return{loadLibrary:function(i,r){var u=t[i.toLowerCase()];u&&(u.isLoaded()?r():u.isLoading?u.callbacks.push(r):(u.isLoading=!0,u.callbacks||(u.callbacks=[]),n.isFunction(r)&&u.callbacks.push(r),n.getScript(u.url,function(){delete u.isLoading,n.each(u.callbacks,function(n,t){t()}),delete u.callbacks})))}}}(),li={subscribe:function(t,i,r){typeof window.FB!="object"||_.isNull(window.Fb)||(this[t]||(this[t]={},FB.Event.subscribe(t,_.bind(function(i){var r=this[t][i.toLowerCase()];n.isFunction(r)&&r()},this))),this[t][i.toLowerCase()]=r)}},ai={embed:function(n,t,i,r,u,f,e){var c=ft.generate(),s,h,o;e=e||{},e.id=c,e.type="application/x-shockwave-flash",e.data=n,e.width=i,e.height=r,s="<object ";for(o in e)e[o]!=Object.prototype[o]&&(s+=o+'="'+e[o]+'" ');if(s+=">",f=f||{},f.movie=n,u){h="";for(o in u)u[o]!=Object.prototype[o]&&(h+=o+"="+u[o]+"&");f.flashVars=h}for(o in f)f[o]!=Object.prototype[o]&&(s+='<param name="'+o+'" value="'+f[o]+'" />');return s+="<\/object>",_.isString(t)&&(t=document.getElementById(t)),t.innerHTML=s,c}},vi=function(){function r(n,t){if(!window.gapi||!window.gapi.plusone){var r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script");i.type="text/javascript",i.async=!0,!n||(i.text="{lang: '"+n+"'}"),i.src="https://apis.google.com/js/plusone.js",i.onload=i.onreadystatechange=function(){window.gapi&&window.gapi.plusone&&(i.onload=i.onreadystatechange=null,i=undefined,t())},r.insertBefore(i,r.firstChild)}}var t=!1,i=[];return{loadApiScript:function(u,f){window.gapi&&window.gapi.plusone?setTimeout(f,0):(i.push(f),t||(t=!0,r(u,function(){t=!1,n.each(i,function(n,t){t()})})))},renderButton:function(n,t){if(!window.gapi||!window.gapi.plusone)throw new b("GooglePlusOneButton.renderButton: google api os not loaded. Invoke loadApiScript first.");gapi.plusone.render(n,t)}}}();var f=function(){function t(n,t){t.append(String(n))}function r(n,t){var f,r;if(t.append('"'),u.test(n))for(f=n.length,i=0;i<f;++i)if(r=n.charAt(i),r>=" ")(r==="\\"||r==='"')&&t.append("\\"),t.append(r);else switch(r){case"\b":t.append("\\b");break;case"\f":t.append("\\f");break;case"\n":t.append("\\n");break;case"\r":t.append("\\r");break;case"\t":t.append("\\t");break;default:t.append("\\u00"),r.charCodeAt()<16&&t.append("0"),t.append(r.charCodeAt().toString(16))}else t.append(n);t.append('"')}function f(n,t){t.append(n.toString())}function n(i,u,e,o){var s,c,h,a,y,v,l;switch(typeof i){case"object":if(i){if(o){for(c=0;c<o.length;c++)if(o[c]===i)throw"JSON: Circular reference";}else o=[];try{if(o.push(i),i instanceof Number)t(i,u);else if(i instanceof Boolean)f(i,u);else if(i instanceof String)r(i,u);else if(i instanceof Array){for(u.append("["),s=0;s<i.length;++s)s>0&&u.append(","),n(i[s],u,!1,o);u.append("]")}else{if(i instanceof Date){u.append('"\\/Date('),u.append(i.getTime()),u.append(')\\/"');break}h=[],a=0;for(y in i)h[a++]=y;for(e&&h.sort(),u.append("{"),v=!1,s=0;s<a;s++)l=i[h[s]],typeof l!="undefined"&&typeof l!="function"&&(v?u.append(","):v=!0,n(h[s],u,e,o),u.append(":"),n(l,u,e,o));u.append("}")}}finally{o.splice(o.length-1,1)}}else u.append("null");break;case"number":t(i,u);break;case"string":r(i,u);break;case"boolean":u.append(i.toString());break;default:u.append("null")}}function o(n){return n.replace(e,function(){return arguments[1]+'"'+new Date(parseInt(arguments[2])).toString()+'"'})}var u=new RegExp('["\\b\\f\\n\\r\\t\\\\\\x00-\\x1F]',"i"),e=new RegExp('(^|[^\\\\])\\"\\\\/Date\\((-?[0-9]+)(?:[a-zA-Z]|(?:\\+|-)[0-9]{4})?\\)\\\\/\\"',"g");return{stringify:function(t){var i={data:"",append:function(n){this.data=this.data+n}};return n(t,i,!1),i.data},parse:function(n){return eval("("+o(n)+")")},dictionaryToJson:function(n){var i={},t;if(n instanceof Array)for(t=0;t<n.length;t++)i[n[t].Key]=n[t].Value;return i},jsonToDictionary:function(n){var i=[],t;for(t in n)i.push({Key:t,Value:n[t]});return i},parseDate:function(n){return new Date(parseInt(n.replace(/\/Date\(|\)\//gi,"")))}}}(),a=function(){function n(n,t,i){if(i){var r=new Date;r.setTime(r.getTime()+i),i="; expires="+r.toGMTString()}document.cookie=n+"="+t+i+"; path=/"}function t(n){for(var r=document.cookie.split("; "),i,t=0;t<r.length;t++)if(i=r[t],i.indexOf(n)==0)return unescape(i.substring(n.length+1));return null}return{getCookie:t,setCookie:n,setActivityFeedCacheCookie:function(){n("_af_skipCache",!0,3e4)},isActivityFeedCacheCookieExist:function(){return!!t("_af_skipCache")}}}(),ui=function(n){function u(){try{}catch(n){}}var t=typeof localStorage!="undefined"&&window.localStorage,c=(n.TTL||5)*6e4,o=g.getCommunityUcid(),i=n.dataKey,s=i,r=i.timestampKeyPrefix||i+"Saved",h=r;return n.useUcid!==!1&&(i=s+o,r=h+o),{save:function(n){if(!t)return!1;var o=+new Date,e;try{return e=f.stringify(n),t.setItem(i,e),t.setItem(r,o),!0}catch(s){return u("Saving failed: "+s,!0),!1}},read:function(){if(!t)return null;try{var e=parseInt(t.getItem(r),10),n;return e+c<=+new Date?(this.reset(),null):(n=t.getItem(i),n?f.parse(n):null)}catch(o){u("Reading failed: "+o,!0);return}},reset:function(){if(!t)return!1;try{return t.removeItem(i),t.removeItem(r),!0}catch(n){return u("Reset failed: "+n,!0),!1}},resetAll:function(){if(!t)return!1;try{for(key in t)t.hasOwnProperty(key)&&(key.indexOf(s)===0||key.indexOf(h)===0)&&t.removeItem(key);return!0}catch(n){return u("Reset all failed: "+n,!0),!1}}}},pi=function(){function n(n,t){return(n+Math.pow(10,t)).toString().substr(1)}function t(){var t=new Date;return"["+n(t.getHours(),2)+":"+n(t.getMinutes(),2)+":"+n(t.getSeconds(),2)+"."+n(t.getMilliseconds(),3)+"]"}return{traceError:function(n){if(window.console&&window.console.error){var i=t()+" WDK4:"+n;console.error(i)}}}}(),bt=function(){function f(){}function r(){}function u(){}function o(e){var o=n(),s;o?o!=e&&(s=new tt("MtvnUserIdHelper",null,[{name:"updateMtvnCookieValue",template:i,isAction:!1}],{}),s.methods().updateMtvnCookieValue({mtvnUserId:o},r,u)):f("cookie '"+t+"' not found",!1)}function s(){var t=n(),f;!t||(f=new tt("MtvnUserIdHelper",null,[{name:"updateMtvnCookieValue",template:i,isAction:!1}],{}),f.methods().updateMtvnCookieValue({mtvnUserId:t},r,u))}function n(){return st.getCookie(t)}var t="vmn_uuid",i="http://daapi.flux.com/2.0/00001/Json/{communityUcid}/Action/UpdateCookie?mtvnUserId={mtvnUserId}";return{processMtvnUserId:o,processMtvnUserIdForLoggedOut:s,getMtvnCookie:n}}(),wi={overrideMethod:function(n,t,i){var r=n[t],u=i.length>2;n[t]=function(){if(u){var n=Array.prototype.slice.call(arguments);return n.unshift(r,arguments),i.apply(this,n)}return i.call(this,r,arguments)}}},w=function(){function o(){}function u(){return!!window.XMLHttpRequest&&_.isNull((new window.XMLHttpRequest).onprogress)}var t={},i="application/x-www-form-urlencoded";return{loadScript:function(i,u,f){var e="F"+ri.generate(i),s,h;i=r.addQueryParameter(i,"callback",e),t[e]=t[e]||[],t[e].push(u),t[e].length==1&&(s=n("<script>").attr({src:i,type:"text/javascript"}),nt.create(function(r,u){if(s.remove(),u&&u!=200)if(n.isFunction(f))f(r,u);else{var h="There was an error (HTTP "+u+") with request to url "+i+".";r&&(h+=" Error: "+r),o(h,!0)}else n.each(t[e],function(){this.call(null,r)});delete t[e]},e),h=document.getElementsByTagName("HEAD")[0]||document.documentElement,h.insertBefore(s[0],h.firstChild))},invokePostRequest:function(t,i,r){u()?n.ajax({url:t,type:"POST",data:i,crossDomain:!0,success:r,xhrFields:{withCredentials:"true"},contentType:"application/json",beforeSend:function(n){n&&(n.withCredentials=!0)}}):dt.executeWebRequest("POST",t,i,r,"application/json",!0)},getRequest:function(t,i,r,e){u()?n.ajax({url:t,type:"Get",data:i,dataType:"json",success:r,error:e,crossDomain:!0}):dt.executeWebRequest("GET",t,i,function(n){!!n&&_.isFunction(r)?_.isString(n)?r(f.parse(n)):r(n):_.isFunction(e)&&e(n)},!0)},postFormRequest:function(t,r,e,o){u()?n.ajax({url:t,type:"POST",data:r,success:e,contentType:i,error:o}):dt.executeWebRequest("POST",t,r,function(n){!!n&&_.isFunction(e)?_.isString(n)?e(f.parse(n)):e(n):_.isFunction(o)&&o(n)},i,!0)},setPostContentType:function(n){i=n}}}(),v={replace:function(n,t,i){return _.isString(n)?n.replace(i||new RegExp("\\{(.*?)\\}","gm"),function(){var n=(t||{})[arguments[1]];return _.isUndefined(n)||_.isNull(n)?"":n}):null},truncate:function(n,t){return n==null||t==0?"":n.length<=t?n:n.substring(0,t)+"..."},toWbrFormat:function(n,t){var i,r;if(!_.isString("string"))return"";for(i=[],t=t||5,r=t;r<n.length;r+=t)i.push(n.substring(r-t,r));return i.length*t<n.length&&i.push(n.substring(i.length*t)),i.join("<wbr />")},isEmail:function(n){return/^[A-Z0-9._%+-:]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(n)},camelize:function(n){return n.charAt(0).toLowerCase()+n.substr(1)},compactNumber:function(n){return n>999999?Math.round(n/1e6)+"m":n>999?Math.round(n/1e3)+"k":n}},d=function(){function s(){e||(o=Math.random(),e=!0)}function h(){s(),f._lastTrackingImage=null;try{var n=new Image;n.onError=function(){},n.onAbort=function(){},n.src=l(),f._lastTrackingImage=n}catch(t){}}function l(){return s(),[decodeURIComponent(f._trackingUrl),"?","CMU=",n("CommunityUcid",""),"&CU=",n("ContentUcid",""),"&UU=",n("UserUcid",""),"&LUU=",n("LoggedUserUcid",""),"&PT=",n("PageTypeId","17"),"&CUR=",n("ContentUri",""),"&AU=",n("AbsoluteUri",""),"&WN=",n("WidgetName",""),"&FTG=",encodeURIComponent(o),"&rnd=",encodeURIComponent(Math.random()),"&REF=",function(){return n("ServerRefferer",null)?n("ServerRefferer"):document.referrer?encodeURIComponent(document.referrer):""}(),"&RT=",n("ReportType",""),"&RP=",n("RP",""),"&RPL=",n("RPL",""),"&RAIU=",n("RAIU",""),"&RAS=",n("RAS",""),"&AIA=",n("activityItemAuthor",""),"&AICD=",n("activityItemClickDetail",""),"&MUID=",n("MtvUuid",""),"&UMT=",n("UserMemberType",""),"&ULS=",n("UserLoginSate",""),"&UNMT=",n("UserNetworkMemberType",""),"&DEV=",d.getDeviceType(n("Device",null))].join("")}function c(){r={}}function i(n,t){r[n]=t}function n(n,t){return r[n]||r[n]===0?encodeURIComponent(r[n]):t}function a(n,t){var r=null;_.isUndefined(n.userLoginState)||(r={userLoginState:n.userLoginState,userMemberType:n.userMemberType,userNetworkMemberType:n.userNetworkMemberType}),r||t!==!0||(r=d.getLoggedInUserInfo()),r&&(i("UserLoginSate",r.userLoginState),r.userLoginState!==0&&(i("UserMemberType",r.userMemberType),i("UserNetworkMemberType",r.userNetworkMemberType)))}var r={},e,o,u={web:1,mobile:2,app:3,player:4},f={_trackingUrl:"http://t.flux.com/tracking.gif",_lastTrackingImage:null,getLoggedInUserInfo:function(){return t.user?{userLoginState:t.user.communityMember?2:1,userMemberType:t.user.communityMemberType,userNetworkMemberType:t.user.memberType}:{userLoginState:0}},trackWidget:function(n,t,r){c(),i("CommunityUcid",n),i("WidgetName",t),i("ContentUri",r),h()},trackForReporting:function(n,t){c(),i("CommunityUcid",n.communityUcid),i("ContentUri",n.contentUri),i("UserUcid",n.userUcid),i("LoggedUserUcid",n.loggedUserUcid),i("WidgetName","Reporting"),i("ReportType",n.reportType),i("RP",n.product),i("RPL",n.productLocation),i("RAIU",n.activityItemUcid),i("RAS",n.activityService),i("ContentUcid",n.contentUcid),i("activityItemAuthor",n.activityItemAuthor),i("activityItemClickDetail",n.activityItemClickDetail),i("MtvUuid",bt.getMtvnCookie()),i("Device",n.device),a(n,t),h()},isNativeApp:!1,getDeviceType:function(n){var t=this.isNativeApp===!0?u.app:Flux4.Modernizr.touch?u.mobile:u.web;return n==undefined||!u[n.toLowerCase()]||(t=u[n.toLowerCase()]),t}};return f}(),ft=function(){var n=0;return{generate:function(){return"F"+(new Date).getTime()+n++}}}(),ht=function(){var n={msie:function(n){return/MSIE/gi.test(n)},firefox:function(n){return/firefox/gi.test(n)},opera:function(n){return/opera/gi.test(n)},safari:function(n){return/safari/gi.test(n)||/AppleWebKit.*Mobile/.test(n)},chrome:function(n){return/chrome/gi.test(n)}},t=/(?:firefox|MSIE|opera|safari|chrome)([\/\:\s][\d\.]+)?/i,i=/AppleWebKit([\/\:\s][\d\.]+)?.*Mobile/i;return{getBrowserVersion:function(){var e=navigator.userAgent,r=e.match(t)||e.match(i),o=r&&r[0],f={version:r&&r[1]?r[1].replace(/[\/\:\s]/,""):0,other:!0},u;for(u in n)n.hasOwnProperty(u)&&(f[u]=n[u](o),f[u]&&(f.other=!1));return f}}}(),nt={create:function(n,t,i){return t=t||ft.generate(),window[t]=i?function(){window[t]=undefined;try{delete window[t]}catch(i){}return n.apply(this,arguments)}:function(){window[t]=undefined;try{delete window[t]}catch(r){}var i=arguments;window.setTimeout(function(){n.apply(this,i)},0)},t}},kt=function(t){function s(){return window.postMessage&&!(n.browser.msie&&n.browser.version<8)}function h(n){var i=t.attr("src"),u;s()?(u=i.match(/:\/\/(.[^\/]+)/)[1],t.get(0).contentWindow.postMessage(f.stringify(n),"http://"+u)):t.attr("src",r.setHash(i,"args="+encodeURIComponent(f.stringify(n))))}function c(n){h(n.data[0]),t.unbind("load",c)}var u=null,o=!1,i="";return t.load(function(){o=!1,i=t.attr("src")}),{loadAndListen:function(h,c,l){if(this.stopListening(),n.isFunction(c)&&(i=h,i=r.addQueryParameter(i,"callbackName",nt.create(c,"F"+ri.generate(i),!0)),s()&&!l)){i=r.addQueryParameter(i,"postMessage","true");var a={};u=function(n){var t=n.origin.toLowerCase(),r;if(i.toLowerCase().indexOf(t)!=0){a[t]=(a[t]||0)+1,a[t]<=10&&e.trace("Hosts differ. Original: "+i+", message received from: "+n.origin,!0);return}try{r=f.parse(n.data)}catch(n){}r&&c(r)},window.addEventListener?window.addEventListener("message",u,!1):window.attachEvent("onmessage",u)}o=!0,t.attr("src",i)},stopListening:function(){u&&(window.addEventListener?window.removeEventListener("message",u,!1):window.detachEvent("onmessage",u),u=null)},send:function(n){t.attr("src")&&!o?h(n):t.load([n],c)}}},g=function(){var t=n("script[widgets4Debug=true]")[0],i,u;return t||(t=n("script.widgets4Core")[0]),t||(i=document.getElementsByTagName("script"),u=new RegExp("http://k?widgets4.flux(-dev|-staging)?.com/Core","i"),n.each(i,function(){if(u.test(n(this).attr("src")))return t=this,!1})),{getCommunityUcid:function(){return t.getAttribute("id")},getCulture:function(){return r.getQueryParameter(window.document.location.href,"culture")||t.getAttribute("culture")}}}(),bi=function(){function i(){function n(){t.community.highTrafficOptimizedMode===!0&&t._saveContextCache()}t.user||t.community.readOnlyMode||bt.processMtvnUserIdForLoggedOut(),o.addEventListener("FbTlToggleChanged",function(i){!t.user||(t.user.publishToFbTimeline=i,n())}),o.addEventListener("FbTlPromoOverlayDisabled",function(i){!t.user||(t.user.disableFbTimelineFirstTimeNotification=i,n())}),o.addEventListener("FbTlAlertOverlayDisabled",function(i){!t.user||(t.user.disableFbTimelinePostedNotification=i,n())}),o.addEventListener("UserPhoneSaved",function(){!t.user||(t.user.hasPhone=!0,n())})}function r(){!t.user||t.community.readOnlyMode||bt.processMtvnUserId(t.user.loggedMtvnUserId),t.user||u.removeBigDoorCookie(),u.dropMasterCookiesOnBrandsDomain(),!ot().isContextValid()}function f(){n||(n=!0,i()),r()}var n=!1;return{onContextReload:f}}(),t=function(){function t(){try{}catch(n){}}var i=new ui({dataKey:"FluxContext"}),u=g.getCommunityUcid();return{_queue:[],_saveContextCache:function(){if(Flux4.Modernizr.touch)return!1;t("Saving context to cache");var r=n.extend(!0,{},this);return(delete r._queue,!i.save(r))?(t("Saving context to cache failed",!0),!1):!0},_resetContextCache:function(n){var r;return n?(r=i.reset(),r&&t("Flux cache reset for community "+u)):(r=i.resetAll(),r&&t("Flux cache reset for all communities")),r||t("Flux cache reset failed"),r},_readContextCache:function(){if(Flux4.Modernizr.touch)return null;t("Reading context from cache");var n=i.read();return n===undefined?(t("Reading context from cache failed",!0),null):n},reset:function(){this._resetContextCache()},loadIfEmpty:function(n){this.community?n():this._reload(n,!0,!1)},_reload:function(i,u,f){var s=!1,c=r.buildContextUrl(),h=_.bind(function(t){n.extend(this,t),o.raiseEvent("ContextLoaded",this.copy()),n.each(this._queue,function(t,i){n.isFunction(i)&&i()}),this._queue=[],bi.onContextReload(),t.community.highTrafficOptimizedMode?t&&t.community&&t.community.readOnlyMode||s||this._saveContextCache():this._resetContextCache(!0)},this),e;this._queue.push(i),this._queue.length===1&&(u&&(e=this._readContextCache(),s=!!e),e?h(e):(this._resetContextCache(!f),t("Loading context from URL"),w.loadScript(c,h)))},reload:function(n){this._reload(n,!1,!0)},copy:function(){return this.community?{community:n.extend(!0,{},this.community),user:!this.user?null:n.extend(!0,{},this.user)}:null},hostedPage:_.isBoolean(window.FluxHostedPage)&&window.FluxHostedPage}}(),it=function(){function i(){}function w(i,r,u){t.loadIfEmpty(function(){var t=new at(!0).performCheck(i,null,!1,u);n.isFunction(r)&&r(t)})}function ft(){(typeof window.Flux4!="object"||_.isNull(window.Flux4))&&(window.Flux4={}),Flux4.getWidgetApi=it.getWidgetApi,Flux4.createWidget=it.createWidget,Flux4.signIn=function(n,i,r){t.loadIfEmpty(function(){new l(n).signIn(i,r)})},Flux4.signUp=function(n,i,r){t.loadIfEmpty(function(){new l(n).signUp(i,r)})},Flux4.thouToFluxSignUp=function(n,i,r,u){t.loadIfEmpty(function(){new l(r).thouToFluxSignUp(n,i,u)})},Flux4.getContext=function(i){var r=t.copy(),u;if(n.isFunction(i)){if(!!r){i(r);return}u=!1,o.addEventListener("ContextLoaded",function(n){u||(u=!0,i(n))})}else return r},Flux4.loadContext=function(i){t.loadIfEmpty(function(){n.isFunction(i)&&i(t.copy())})},Flux4.sutSignUp=function(n,i,r){t.loadIfEmpty(function(){new l(i).sutSignUp(n,r)})},Flux4.showInterimForm=function(n,i){t.loadIfEmpty(function(){new l(n).showInterimForm(i)})},Flux4.performRoadBlockerCheck=function(n,i,r,f){r&&t.community?u.authenticationChanged(function(){w(n,i,f)}):w(n,i,f)},Flux4.signOut=function(n,i){t.loadIfEmpty(function(){(new l).signOut(n,i)})},Flux4.addEventListener=function(n,t){o.addEventListener(n,t)},Flux4.removeEventListener=function(n,t){o.removeEventListener(n,t)},Flux4.raiseEvent=function(n){o.raiseEvent(n)},Flux4.showOverlay=function(n){t.loadIfEmpty(function(){n&&p.showOverlay("authentication",n)})},Flux4.confirm=function(n){t.loadIfEmpty(function(){n&&p.confirm("authentication",n)})},Flux4.openFeedbackOverlay=function(){t.loadIfEmpty(function(){h.show("deeplink",{size:{width:530,height:560},pageUrl:t.community.feedbackUrl})})},Flux4.openReportAbuse=function(n,r){if(!n){i("ReportAbuse deep link: obligatory parameter 'itemId' is missed",!0);return}if(!r){i("ReportAbuse deep link: obligatory parameter 'type' is missed",!0);return}var u="&itemId="+n+"&flagItem="+r;r.toLowerCase()=="content"&&(u+="&contentUri="+n),t.loadIfEmpty(function(){h.show("deeplink",{size:{width:530,height:560},pageUrl:t.community.reportAbuseUrl+u})})},Flux4.syncExternalAuth=function(n,i,r,u,f,e){t.loadIfEmpty(function(){nr.login(t.community.externalAuthUrl+"?userid="+n+"&ts="+i+"&tsOfUpdate="+r+"&signature="+u+"&postMessage=true",f,e)})},Flux4.verifyEmail=function(){t.loadIfEmpty(function(){(new l).verifyEmail()})}}function et(){i("Widget list:"),n.each(rt.widgets,function(){i(this.name+" -> "+this.url)}),i("Control list:"),n.each(rt.controls,function(){i(this.name+" -> "+this.url)})}function ot(){var t,u;document.createStyleSheet?(t=document.createStyleSheet(r.commonCssUrl,0),u=t.ownerNode||t.owningElement):(u=t=n("<link>").attr({type:"text/css",rel:"stylesheet",href:r.commonCssUrl}),n(n("head")[0]||n("body")[0]||document.documentElement).prepend(t)),n("<!--[if IE 9]><link rel='stylesheet' type='text/css' href='"+r.commonCssIE9Url+"'/><![endif]-->").insertAfter(u),i("Common css has been added")}function b(t){if(!t.apiOnly&&_.isUndefined(t.container)&&_.isUndefined(t.containerId)&&!a){var i="Flux4Widget_"+c;c++,document.write('<div id="'+i+'"><\/div>'),t.container=n("#"+i).removeAttr("id")}}function g(t,r,u,f,e,o){if(!f){i(e,!0);return}var s=null;r.container&&(s=n(r.container),delete r.container),r.containerId&&(s=n("#"+r.containerId),delete r.containerId),ki.get(f,function(n){n.controlData=o,y.invokeWidget(s,t,n,r,u)})}function st(n,t){if(y.isSingletonWidget(n)){var r=y.tryGetWidgetByName(n);if(!!r)return i('"'+n+'" is singleton, will be reused'),t&&t(r.getExternalInterface()),!0}return!1}function nt(n,u,e){f?t.loadIfEmpty(function(){ct.loadIfNeed(function(){var t=r.buildWidgetUrl(n),f='Widget "'+n+'" is not allowed. Creation is failed';u._version&&(t=t.replace(/version\=\d+/,"version="+u._version),i('Widget "'+n+'" version '+u._version,!1)),Flux4.Modernizr.touch&&(t=r.addQueryParameter(t,"platform","mobile")),g(n,u,e,t,f)})}):s.push(arguments)}function tt(t){var e=t[0],u=null,f=null,r;switch(t.length){case 1:i("createWidget called with no settings");break;case 2:r=t[1],n.isFunction(r)?f=r:u=r;break;case 3:u=t[1],f=t[2];break;default:i("Incorrect args count for createWidget",!0);return}return{name:e,settings:u||{},callback:f}}function ut(n){b(n.settings),st(n.name,n.callback)||window.setTimeout(function(){nt(n.name,n.settings,n.callback)},30)}function ht(n){i('Create widget "'+n+'"...');var t=tt(Array.prototype.slice.call(arguments));t&&(t.name=t.name.replace(/#.+/,""),t.settings._version=n.replace(/\w+#?/,""),ut(t))}function lt(n){i('Get API for widget "'+n+'"...');var t=tt(Array.prototype.slice.call(arguments));t&&(t.settings.apiOnly=!0,ut(t))}var f=!1,s=[],c=1,a=!1,v=!1;return{initialize:function(t,u,h,c){(r.getQueryParameter(window.location.href,"closeWindow")=="true"&&window.close(),v!==!0)&&(v=!0,e.enabled=t,k.loadFacebookJDK=h,d.isNativeApp=c,i("Register Flux4 object..."),ft(),Flux4.loadModernizr(),n(function(){i("DOM is ready"),a=!0,u&&ot(),(new l).checkAuthRedirectParams(),rt.load(function(){et(),f=!0,o.raiseEvent("CoreInitialized"),n.each(s,function(){nt.apply(null,this)})})}))},createWidget:ht,getWidgetApi:lt,createControl:function(n,t,u,f){i('Create control "'+n+'" with version '+t.version+"..."),b(u);var e=r.buildControlUrl(n,t.version),o='Control "'+n+'" is not allowed. Creation is failed';g(n,u,f,e,o,t)}}}(),dt=new function(){function n(){}function s(){return document.getElementById(u)}function h(n){for(var r=n.substring(1).split("|"),i=[],t=0;t<r.length;t++)i[i.length]=parseInt(r[t],16);return String.fromCharCode.apply(String,i)}function c(n){return eval('"'+n.replace(/\|/g,"\\u")+'"')}function l(n){return'\v'=="v"?c(n):h(n)}function a(t,i){return nt.create(function(r){window.setTimeout(function(){if(n("Received data from "+t),r){var u=(new Date).getTime();r=l(r),n("Data decoded in "+((new Date).getTime()-u)+" ms")}i.call(null,r)},0)})}function v(i){f?i():(t.push(i),o||(o=!0,n("Initialization..."),y(function(){n("Initialization complete"),f=!0;for(var i=0;i<t.length;i++)t[i]();t=null})))}function y(n){function e(){++s==2&&n()}var s=0,o=ft.generate(),t=document.createElement("div"),f;t.setAttribute("id",o),t.style.height="0",t.style.width="0",f=document.getElementsByTagName("body")[0],f.insertBefore(t,f.firstChild),i=ft.generate(),u=ai.embed(r.coreFlashUrl,o,"0","0",{onload:nt.create(e),executeWebRequest:i},{allowscriptaccess:"always"}),e()}var u=null,i,f=!1,o=!1,t=[];return{executeWebRequest:function(n,t,r,u,f,e){v(function(){s()[i](n,t,r,a(t,u),f,e)})}}},ct=function(){function e(t){i={},n.each(t,function(n,t){i[t.name.toLowerCase().replace("widgets4,","")]=t.strings})}function f(){var n=g.getCulture();return n||(n=!t.user||!t.user.localization||!t.user.localization.cultureName?t.community.localization.cultureName:t.user.localization.cultureName),n}var i,u;return{loadIfNeed:function(n){var t=f(),o=u!=t,s;o&&(i={}),t.toLowerCase()!="en-us"&&(!u||o)?(s=r.buildLocalizedResourcesUrl(t),w.loadScript(s,function(i){u=t,e(i),n()})):(u=t,n())},merge:function(t,r,u){var f=i?i[t.toLowerCase()]:null;return n.extend({},r,f||{},u)},getCurrentCulture:function(){return f()}}}(),r=function(){function s(n,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r="[\\?&]"+t+"=([^&#]*)",u=new RegExp(r),i=u.exec(n);return i?i[1]:""}function w(n,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r="[\\#&]"+t+"=([^&#]*)",u=new RegExp(r),i=u.exec(n);return i?i[1]:""}function h(n,t){var f=s(n,t),u=t+"="+f,e=u.length,r=n.indexOf(u),i;return r<0?n:(i=r+e,n[r-1]!="?"||i==n.length?r--:i++,i=Math.min(i,n.length),n.substring(0,r)+""+n.substring(i))}function i(n,t,i){n=h(n,t);var r=n.indexOf("?");return r==-1?n+="?":r<n.length-1&&(n+="&"),n+t+"="+i}function c(n){return!e.enabled||n.toLowerCase().indexOf((f.toLowerCase()+"="+o).toLowerCase())!=-1?n:i(n,f,o)}var f="enableWidgetsDebug",o="true",a="http://cus.flux.com/api/widgetsService/widgetList?communityUcid={communityUcid}",y="http://daapiak.flux.com/2.0/00001/json/{communityUcid}/feeds/widgets4Context",u="s.fluxstatic.com/widgets4",p="http://daapiak.flux.com/2.0/00001/json/{communityUcid}/feeds/LocalizedResources?culture={culture}&resourceGroupId=50",l="http://"+u+"/CSS/common.css?v=28";return{commonCssUrl:l,commonCssIE9Url:l.replace(".css","-ie9.css"),coreFlashUrl:"http://"+u+"/Flash/Core/Core.swf",clipboardFlashUrl:"http://"+u+"/Flash/Clipboard/Clipboard.swf",zeroClipboardFlashUrl:"http://"+u+"/Flash/ZeroClipboard/ZeroClipboard10.swf",facebookSignUpUrlTemplate:"http://daapi.flux.com/2.0/00001/Json/{communityUcid}/Action/FacebookSignUp2",logoutUrlTemplate:"http://daapi.flux.com/2.0/00001/Json/{communityUcid}/Action/Logout",buildWidgetUrl:function(t){var i=n.grep(rt.widgets,function(n){return n.name.toLowerCase()==t.toLowerCase()})[0];if(i)return c(i.url)},buildControlUrl:function(t,i){var r=n.grep(rt.controls,function(n){return n.name.toLowerCase()==t.toLowerCase()})[0];if(r)return c(r.url.replace("{version}",i||""))},buildWidgetListUrl:function(){return a.replace("{communityUcid}",g.getCommunityUcid())},buildContextUrl:function(){var n="";return typeof FluxAuthPresentation!="undefined"&&(n="&authPresentation="+FluxAuthPresentation),y.replace("{communityUcid}",g.getCommunityUcid())+n},buildDaapiUrl:function(t){var e,f,u;if(t.params)for(e in t.params)f=t.params[e],_.isString(f)&&!!n.trim(f)&&(t.params[e]=encodeURIComponent(f));return u=v.replace(t.template,n.extend({communityUcid:g.getCommunityUcid()},t.params||{})),t.bypassCache&&(u=i(u,"skipCache","true")),t.product&&(u=r.addQueryParameter(u,"product",t.product)),t.productLocation&&(u=r.addQueryParameter(u,"productLocation",t.productLocation)),t.device&&(u=r.addQueryParameter(u,"device",t.device)),u},addQueryParameter:i,getQueryParameter:s,getAnchorParameter:w,removeQueryParameter:h,setHash:function(n,t){var r=new RegExp("#([^\\?&]*)"),i=r.exec(n);return i&&(n=n.replace("#"+i[1],"")),n+"#"+t},buildLocalizedResourcesUrl:function(n){if(t.community)return v.replace(p,{communityUcid:g.getCommunityUcid(),culture:n})},addCultureQueryParameter:function(n){var t=g.getCulture();return t?i(n,"culture",t):n},getProductLocationName:function(n){return(n||"").toLowerCase()},addDeviceQueryParameter:function(n){return i(n,"device",d.getDeviceType())}}}(),ki=function(){var n={};return{get:function(t,i){var r=n[t];r?i(r):w.loadScript(t,function(r){n[t]=r,i(r)})}}}(),rt=function(){function n(){try{}catch(n){}}var t=new ui({dataKey:"FluxWidgetList",TTL:60}),i=g.getCommunityUcid();return{load:function(i){var f=!1,s=r.buildWidgetListUrl(),o=function(r){n("Done"),rt=r,f||(t.save(r),n("Saved to cache")),i()},u;n("Load data..."),u=e.enabled?null:t.read(),u?(f=!0,n("Read from cache"),o(u)):(n("Loading from URL"),w.loadScript(s,o))}}}(),tt=function(t,i,u,o){function s(){var n="DAAPI["+t+"]:";i&&(n+="Instance["+i+"]:")}function a(t,i,r){return!n.isFunction(i)||!n.isFunction(t)?(s('onComplete or onError delegate is not specified. Request with template "'+r+'" has been skipped',!0),!1):!0}function v(n,t,i,r){n&&n.readOnly?(s("ReadOnly mode detected",!0),i(new b(et.readOnlyMode,n))):n&&n.d&&!_.isUndefined(n.d.StatusCode)&&n.d.StatusCode?(s("Widgets web service call returned error: code "+n.d.StatusCode+", message: "+n.d.ErrorText,!0),i(new b("WebService#"+n.d.StatusCode,n))):(!!r&&_.isFunction(r)&&r(n),t(n))}function y(n,t){return _.isUndefined(t)?!1:t&&!_.isString(n[t])?(s('Parameter "'+t+'" is configured as skip cache parameter, but its value is not string or absent',!0),!1):!0}function p(n,i){return n[i]+"_"+t}function k(n){return n+"Completed"}function nt(n,t){return function(){var o=arguments.callee,h=arguments[arguments.length-2],f=arguments[arguments.length-1],u,i;if(a(h,f,n)){u=!1,_.isBoolean(arguments[arguments.length-3])?(u=arguments[arguments.length-3],i=arguments[arguments.length-4]):(i=arguments[arguments.length-3],y(i,t)&&(u=l.containsKey(p(i,t)),u&&s("Skip cache param has been detected: name="+t+" value="+i[t])));var e=Boolean(r.getQueryParameter(n,"skipCache")),k=function(t){c(o,i,t),v(t,h,f,function(t){e||fi.set(n,i,t)})},d=function(){var t=r.buildDaapiUrl({template:n,params:i,bypassCache:u});s("GET "+t),w.loadScript(t,k,function(n,r){c(o,i,n);var u;switch(r){case 400:u="There was an error (HTTP 400) with daapi request "+t+". Most likely that url is malformed. Check that you provided all information in it: community UCID, content UCID (if applicable), sorting/filtering options.";break;case 500:u="There was an error (HTTP 500) with request to url "+t+". There might be some server side troubles. Please check url again and if you continue to experience this problem - report this URL to Social Media support team.";break;default:u="There was an error (HTTP "+r+") with request to url "+t+"."}n&&(u+=" Error: "+n),s(u,!0),f(new b(et.systemError,n))})};!!u||e?d(e):fi.get(n,i,k,d)}}}function tt(t,i){return function(){var tt=arguments.callee,g=arguments[arguments.length-2],e=arguments[arguments.length-1],u,nt,h,k;a(g,e,t)&&(u=arguments[arguments.length-3],nt=u.device,delete u.device,h=r.buildDaapiUrl({template:t,params:n.extend({},u),product:(o.settings||{}).product,productLocation:(o.settings||{}).productLocation,device:d.getDeviceType(nt)}),k=f.stringify(u||{}),s("POST "+h),w.invokePostRequest(h,k,function(t){if(c(tt,k,t),_.isString(t)||n.isPlainObject(t)){var r=function(n){n.Status==1&&y(u,i)&&(l.add(p(u,i)),s("Skip cache param has been added: value="+u[i])),g(n)};v(_.isString(t)?f.parse(t):t,r,e)}else s("Postback error has occured! data: "+t,!0),e(new b(et.unexpected))}))}}var l=new ii("WDK4SkipDaapiCacheFlags"),h={},g=function(n){return _.detect(_.functions(h),function(t){return h[t]==n})},c=_.bind(function(t,i,r){var u=k(g(t));o&&n.isFunction(o.callExternalInterface)&&o.callExternalInterface(u,i,r)},this);n.each(u,function(n,t){h[t.name]=t.isAction?tt(t.template,t.skipCacheParam):nt(t.template,t.skipCacheParam)}),this.initEvents=function(t){var i=[];return this.externalInterface=t,n.each(_.functions(h),function(n,r){var u=k(r);t[u]=function(){},i.push(u)}),i},this.methods=function(){return h}},fi=function(){function i(i,r,u,f){var e=t(i,r);return n[e]?u(n[e]):f(),n[e]}function r(i,r,u){var f=t(i,r);n[f]=u}function u(i,r){n[t(i,r)]=undefined}function t(n,t){var i=[],r,u;for(r in t)u=r+"="+(t[r]!=null?t[r]:""),i.push(u);return i=i.sort(),n+"_"+f.stringify(i)}var n={};return{get:i,reset:u,set:r}}(),b=function(n,t){this.id=n,this.description=t},et=function(){var t={};return n.each(["unexpected","unknown","invalidParameters","systemError","notFound","forbidden","notLoggedIn","ratingUnsupportedSystem","ratingIllegal","ratingIllegalSystem","invalidCaptcha","readOnlyMode","faceBookAccountAlreadyLinkedToAnother","accountNotFound","incorrectPassword"],function(n,i){t[i]=i}),t}(),di=function(t){var i=lt.get();return{save:function(){i.readyToUse(!1),i.add(t,n.makeArray(arguments))},tryExecute:function(n){if(i.readyToUse()){var r=i.getValue(t);r&&(n.apply(null,r),i.removeKey(t))}},getActionParams:function(){return i}}},lt=function(){var n,t="readyToUse";return{get:function(){return n||(n=new ii("PostAuthActionParams",3e5),n.readyToUse=function(i){if(typeof i=="undefined")return n.getValue(t);i?n.add(t,i):n.clear()}),n}}}(),at=function(i,r){function u(){}function f(){i&&setTimeout(function(){o.raiseEvent("roadBlock",{widgetName:r},t.user)},1)}function s(i){return n.isFunction(i)&&t.community.readOnlyMode?(i(new b(et.readOnlyMode)),f(),!0):!1}return{needsRoadblocking:function(n){var i;return t.user?(n&&t.user.roadBlocker.FRD||(i=t.user.roadBlocker.redirectUrl),i)?!0:!1:!0},performCheck:function(n,i,e,o){var c,h;return(typeof e=="string"&&(o=e,e=!1),c=new l(null,r),!t.user)?s(i)?!1:(c.signIn(null,o),f(),u("User is not logged in"),!1):(u("Perform check, checkFrdOnly = "+!!n),n&&t.user.roadBlocker.FRD||(h=t.user.roadBlocker.redirectUrl),h)?s(i)?!1:(c.isOverlayMode()?(c.showInterimForm(null,e,o),f()):(h=h.replace("(returnPath)",encodeURIComponent(window.location.href)),u("Perform redirect to "+h),window.location.href=h),!1):(u("Action allowed"),u("Bypass check"),!0)},userCanPostComment:function(n){if(!t.user)u("User is not logged in, bypass check");else{if(u("Can user post a comment?"),t.user.isSystemBanned||t.user.isCommunityBanned)return u("User is banned"),!1;if(t.user.roadBlocker.userCanPostComment)u("Action allowed");else return u("User can't post a comment"),this.performCheck(!1,n),!1}return!0}}},ei=function(){function w(n){var t=n.match(/\}/g);return t?t.length:0}function s(t){var i=document.createElement("style"),r;return i.type="text/css",i.className="flux4Style",i.styleSheet&&(i.styleSheet.cssText=""),r=n(n("head")[0]||document.body||document.documentElement),t?r.append(i):r.prepend(i),i}function h(n,t){n.styleSheet?n.styleSheet.cssText=t:n.innerHTML=t}function e(n){var s="clientWidth",h=document.documentElement[s],a=document.compatMode==="CSS1Compat"&&h||document.body[s]||h,v=(new Date).getTime(),r,i,t,u,o;if(n&&f&&v-f<l){clearTimeout(c),c=setTimeout(e,l);return}for(f=v,r=document.getElementsByTagName("style"),i=0;i<r.length;i++)(t=r[i].mediaQuery,t)&&(u=t.replace(/^.*max-width\s*:\s*(\d+).*$/m,"$1"),o=t.replace(/^.*min-width\s*:\s*(\d+).*$/m,"$1"),r[i].disabled=u!=t&&a<=u||o!=t&&a>=o?!1:!0)}function a(){e(!0)}var v=500,o=[],r=null,t="",y="\n",u=0,p=!!n.browser.msie,i,c,l=30,f;return{embedStyleSheet:function(n,f){var c,a,b,k,l;if(!_.include(o,n)){o.push(n),i={},f&&(n=this.matchMedia(n,f.breakpoint||f.breakpoints,f._breakpoints),delete f._breakpoints),c=!r,p?(t+=y,a=w(n),u+a>v&&(c=!0,t="",u=0),u+=a,t+=n):(c=!0,t=n),c&&(r=s()),h(r,t),b=!1;for(k in i)b=!0,l=s(!0),l.disabled=!0,l.mediaQuery=k,h(l,i[k]);b&&e()}},matchMedia:function(n,t,r){var e,u,f,o,s;if(n.indexOf("@media")>=0){for(t=jQuery.isArray(t)?t:[t],r=jQuery.isArray(r)?r:[r],e="@media\\s*\\(\\s*(min|max)-width\\s*:\\s*{0}\\s*px\\)",u=0;u<r.length;u++)for(f=-1;f<2;f++)o=r[u]+f,s=t[u]+f,n=n.replace(new RegExp(e.replace(/\{0\}/,o),"g"),"@media($1-width:"+s+"px)");Flux4.Modernizr.mediaquery||(n=n.replace(/@media\s*\(([^)]+)\)\s*\{([\S\s]+?})[^{]*?}/g,function(n,t,r){return i[t]=r,""}),window.addEventListener?window.addEventListener("resize",a,!1):window.attachEvent&&window.attachEvent("onresize",a))}return n}}}(),vt=function(t,i,r,u){var o,e,s;this._widgetName=i,this._container=t,this._settings=u,this._defaultSettings=null,this._controls=r.controls,this._daapiUrls=r.daapiUrls,this._markup=r.markup,this._strings=r.strings,this._style=r.style,this._controlData=r.controlData,this._context={},this._updateContext(),this._renderCompleteList=[],this._instanceId=++vt.instanceCounter,this._createThisProxy();try{this._trace("Create..."),o=new tt(this._widgetName,this._instanceId,this._daapiUrls,this.thisProxy),e=new si(this._widgetName,r,o),this._instance=new r.constructor(n,this.thisProxy,e,this._context,n.extend({},et),f),this._instance.externalInterface||(this._instance.externalInterface={}),s=e.initEvents(this._instance.externalInterface),this._controlData&&(this._instance.externalInterface.getCoreEventNames=function(){return s}),this._trace("Done")}catch(h){this._trace(h+". Creation is failed",!0),this._isError=!0}};vt.instanceCounter=0,vt.prototype={render:function(t,i){if(i&&(this._updateContext(),this._updateThisProxy()),n.isFunction(this._instance.render)){if(!this._container){this._onRenderError("containerId or container is not specified",t);return}if(!this._container.length){this._onRenderError("container is not found",t);return}try{this._trace("Render...");var r=n("<div />");this._instance.render(r,_.bind(function(){this._container&&this._container.empty().append(r),n.isFunction(t)&&t(),n.each(this._renderCompleteList,function(n,t){t()}),this._renderCompleteList=[]},this),i),this._trace("Done")}catch(u){this._onRenderError(u,t)}}else n.isFunction(t)&&t()},getExternalInterface:function(){return this._instance.externalInterface},getApi:function(){return this._instance.API},getStyle:function(){return this._style},isError:function(){return this._isError},getName:function(){return this._widgetName},_onRenderError:function(t,i){this._trace(t+". Render is failed",!0),this._isError=!0,n.isFunction(i)&&i()},_updateContext:function(){this._context.activitySystemUnavailable=t.activitySystemUnavailable,this._context.community=n.extend({},t.community),this._context.user=!t.user?null:n.extend({},t.user),this._context.hostedPage=t.hostedPage,this._context.currentCulture=ct.getCurrentCulture()},_trace:function(){},_error:function(n){pi.traceError("Widget["+this._widgetName+"]:Instance["+this._instanceId+"]Error:"+n)},_getSettings:function(t){return n.extend(!t,{},this._defaultSettings,this._settings)},_createThisProxy:function(){var t=this,n={clientId:this._widgetName+"_"+this._instanceId,settings:this._getSettings(),trace:_.bind(this._trace,this),error:_.bind(this._error,this),createControl:_.bind(this._createControl,this),renderComplete:_.bind(function(n){this._renderCompleteList.push(n)},this),createWidget:_.bind(this._createWidget,this),getExternalInterface:_.bind(this.getExternalInterface,this),callExternalInterface:function(n){var i=Array.prototype.slice.call(arguments,1);t._callExternalInterface(n,i,[])}};n.setDefaultSettings=_.bind(function(t,i){this._defaultSettings=t,n.settings=this._getSettings(i)},this),n.defaultErrorHandler=function(n){if(!!n&&!!n.id)throw new b("Error has occured: "+n.id);},this.thisProxy=n,this._updateThisProxy()},_callExternalInterface:function(t,i,r){var f=this.thisProxy,s=f.getExternalInterface()||{},e=s[t],u=[].concat(i);r=r||[],r.push(this.getName()),u=u.concat([f.settings.callbackData,r.join(".")]),n.isFunction(e)&&setTimeout(function(){e.apply(null,u)},1),this._parentWidget?this._parentWidget._callExternalInterface(t,i,r):o.raiseEvent.apply(null,[t].concat(u))},_updateThisProxy:function(){var t=this.thisProxy,u=ct.merge(this._widgetName,this._strings,this._settings.localizedStrings),i=n.extend({},this._markup),r;for(r in i)i[r]=v.replace(i[r],u,new RegExp("\\${(.*?)\\}","gm"));t.strings=u,t.markup=i,t.daapiUrls={},n.each(this._daapiUrls,function(){t.daapiUrls[this.name]=this})},_createWidget:function(t,i,r){_.isUndefined(i.productLocation)&&(i.productLocation=this.thisProxy.settings.productLocation);var u=n.extend(!0,{_parentWidget:this},i);Flux4.createWidget(t,u,r)},_createControl:function(t,i,r){if(this._controls&&this._controls[t]){var u=n.extend(!0,{_parentWidget:this},i);_.isUndefined(u.containerId)&&(u.containerId=null),_.isUndefined(u.productLocation)&&(u.productLocation=this.thisProxy.productLocation),it.createControl(t,{version:this._controls[t],parentName:this._widgetName},u,function(n){r(n)})}else this._trace('Control "'+t+'" is not registered for widget "'+this._widgetName+'"',!0)}};var y=function(){function i(){}function f(t){return n.inArray(t.toLowerCase(),h)>-1}function s(t){return n.inArray(t.toLowerCase(),u)>-1}var r=[],h=["userprofile","auth"],u=[];return{reloadWidgets:function(i){t.reload(function(){ct.loadIfNeed(function(){n.each(r,function(){this.render(null,!0)}),n.isFunction(i)&&i()})}),!!window.Flux&&n.isFunction(window.Flux.reloadWidgets)&&window.Flux.reloadWidgets()},invokeWidget:function(t,e,h,c,l){var y,p,a,w;if(i('Invoke widget "'+e+'"...'),f(e)){if(s(e)){i("The widget is singleton and already loading...");return}u.push(e.toLowerCase())}(t&&t.length&&(y=n("<div />").addClass(v.camelize(e)+(h.controlData?h.controlData.version:"")),t.addClass("flux4Widget").addClass("flux4").append(y),t=y),typeof c._parentWidget!="undefined"&&(p=c._parentWidget,delete c._parentWidget),a=new vt(t,e,h,c),typeof p!="undefined"&&(a._parentWidget=p),a.isError())||(c.apiOnly?(n.isFunction(l)&&l(a.getApi()),i("Widget api successfully returned")):(w=a.getStyle(),w&&ei.embedStyleSheet(w,a.thisProxy.settings.responsive),a.render(function(){n.isFunction(l)&&l(a.getExternalInterface()),o.raiseEvent("WidgetLoaded:"+e.toLowerCase())}),r.push(a),a.isError()?i("Widget has been created, but with errors",!0):i("Widget has been created successfully")))},isLoadingSingleton:s,tryGetWidgetByName:function(n){return _.detect(r,function(t){return n==t.getName()})},isSingletonWidget:f}}(),c,gi=3,gt,l=function(i,s){function et(){return"authentication"+(u.isNewAuth()?"":" oldAuth")}function st(n,t){t=t||0,gt&&t<gi?c?n(!0):setTimeout(function(){st(n,t+1)},500):n(!1)}function b(t){n.isFunction(t)&&st(function(){t(c&&c.isDeviceSupported)})}function v(n,t,i,f,e,o){reloadPageOnOverlayClose=!1,t=r.addQueryParameter(t,"fbAutoLoginDisabled","true"),_.isUndefined(s)||(t=r.addQueryParameter(t,"productLocation",r.getProductLocationName(s))),h.show(et(),{pageUrl:r.addCultureQueryParameter(t),size:i,clickEvent:f,onPageLoaded:e,onClose:function(){lt.get().readyToUse(!1),ct(),reloadWidgets&&y.reloadWidgets()},callback:n,overlayClass:o,useOldReceiver:!u.isNewAuth(),resizeCallback:function(){Flux4.raiseEvent("overlayShowed")}})}function ct(){reloadPageOnOverlayClose&&t.hostedPage&&window.location.reload()}function nt(n,i){if(ht.getBrowserVersion().safari&&!_.isUndefined(n.setAuthCookieUrl)){t.reset(),n.action=i,a.setCookie(authRedirectParamsCookieName,f.stringify(n),6e4);var u=decodeURIComponent(n.setAuthCookieUrl);return window.location.href=r.addQueryParameter(u,"returnUrl",encodeURIComponent(window.location.href)),!0}return!1}function bt(){var i=a.getCookie(authRedirectParamsCookieName),n;if(!i)return!1;try{n=f.parse(i)}catch(r){}return a.setCookie(authRedirectParamsCookieName,"",-1),n&&!_.isUndefined(n.action)&&t.loadIfEmpty(function(){if(n.action=="deactivationCompleted"){wt();return}if(t.user){if((n.action=="processOverlayCallback"||n.action=="signIn"||n.action=="signUp")&&n.roadBlockerCheck==="true"){roadBlocker.performCheck(undefined,undefined,n.eventName==="SignIn");return}w(n)}}),!0}function p(n){return n?{eventName:n,widgetName:s}:null}function w(i,r){var f,e;if(i.eventName==="SignIn"&&(f=!1,o.addEventListener("OverlayCancelled",function(){f||(o.raiseEvent("SignInComplete",{widgetName:s},t.user),f=!0)})),_.isUndefined(i.resetAuth)||a.setCookie("MasterAuthIsRequested","",-1),_.isUndefined(i.BigDoorCookie)||u.addBigDoorCookie(i.BigDoorCookie),_.isUndefined(i.reloadSignIn)||u.authenticationChanged(null,!0,p(i.eventName)),i.set3POUFirstTimeCookie=="true"&&u.setThirdPartyJustLoggedInCookie(),!!i)if(_.isUndefined(i.showFlyUpType)){if(i.errorMsg&&!u.isAuth41()){alert(decodeURIComponent(String(i.errorMsg).replace(/\+/g," ")));return}}else switch(i.showFlyUpType){case"ShowAlienAccountFlyUp":h.hide(function(){(new l).showAlienAccountFlyUp(i)});break;case"ShowMergeAccountsFlyUp":h.hide(function(){(new l).showMergeAccountsFlyUp(i)})}_.isUndefined(i.postAuthRedirectUrl)?_.isUndefined(i.roadBlockerCheck)?i.isCommunityMember=="false"?u.authenticationChanged(function(){pt(null,!0,!0)},!1,p(i.eventName)):_.isUndefined(i.reload)&&i.isCommunityMember!="true"?i.logOut=="true"?(u.removeBigDoorCookie(),u.reload(null,p("signOut"))):_.isUndefined(i.showSignUpForm)?_.isUndefined(i.reloadSignIn)&&_.isUndefined(i.showSignInForm)?i.closeOverlay=="true"||i.closeOverlay===!0?(h.hide(),ct()):_.isUndefined(i.setheight)&&n.isFunction(r)&&_.isUndefined(i.unload)&&r():t.user?u.authenticationChanged(function(){rt(i.email)}):i.showFlyUpType||i.errorMsg?!i.errorMsg||kt(i.errorMsg):h.hide(function(){!i.deactivationFeedbackSubmitted||o.raiseEvent("AccountDeactivated"),ft(null,undefined,{email:i.email})}):h.hide(function(){it()}):(lt.get().readyToUse(!0),u.reload(null,p(i.eventName),!0)):u.authenticationChanged(function(){roadBlocker.performCheck(undefined,undefined,i.eventName==="SignIn")},!1,p(i.eventName)):(e=decodeURIComponent(i.postAuthRedirectUrl),i.redirectOverlay=="true"?(u.authenticationChanged(null,!0,p(i.eventName)),reloadPageOnOverlayClose=!0,h.redirectToUrl(e,u.postAuthOverlaySize())):h.hide(function(){window.location.href=e}))}function kt(n){var i=r.addDeviceQueryParameter(t.community.errorMessageUrl);i=r.addQueryParameter(i,"message",n),v(w,i,{height:170,width:430},undefined,undefined,"auth41")}function rt(n,f){if(!ut(f)){var o=new ot(s).useDirectBrandAuthDomain()?t.community.facebookContext.baseDirectAuthUrl+"Account/ShowLogin?product=Auth":t.community.authentication.signInUrl,e=r.addDeviceQueryParameter(i.customSigninPage||vt(o));n&&(e=r.addQueryParameter(e,"email",n)),v(function(n){nt(n,"signIn")||w(n)},e,u.signInOverlaySize(),f,undefined,"signInOverlay")}}function dt(n,i,r){(t.user||!ut(r))&&v(function(n){nt(n,"signUp")||w(n)},u.replaceUrlLocation(n),i||u.signInOverlaySize(),r,undefined,"signUpOverlay")}function ut(n){if(!t.community.authentication.signUpAndSignInEnabled&&u.isNewAuth()){var i=r.addDeviceQueryParameter(vt(t.community.authentication.thouSignInSignUpUrl));return v(function(n){!t.user&&nt(n,"signUp")||w(n)},i,u.thouSignInSignUpOverlaySize(),n),!0}return!1}function vt(n){return u.isAuth41()&&c&&c.isDeviceSupported||ht.getBrowserVersion().safari&&Flux4.Modernizr.touch?r.addQueryParameter(n,"callbackUrl",encodeURIComponent(window.location.href)):n}function it(n,f,e,o){if(f||!t.user){var s=r.addDeviceQueryParameter(n||i.customSignupPage||t.community.authentication.signUpUrl);u.isOverlayMode()?dt(s,e,o):window.location.href=u.replaceUrlLocation(s)}}function yt(n,i,f){var e=r.addDeviceQueryParameter(t.community.authentication.thouToFluxSignUpUrl);n&&(e=r.addQueryParameter(e,"fbDisconnect","true")),!!i&&i&&(e=r.addQueryParameter(e,"deactivateUserFirst","true")),it(e,!0,u.interimOverlaySize(),f)}function pt(n,f,e){var c,o,h;if(!t.user.communityMember){if(c=t.user.globalThirdPartyOnly||t.user.communityThirdPartyOnly,o=(t.user.initialThirdPartyConnection||"").toLowerCase(),c&&(o==="facebook"||o==="twitter")&&!!t.community.facebookContext&&t.community.facebookContext.enableThirdPartyAuth){o==="facebook"?new ot(s).triggerFacebookAuthFlow():o==="twitter"&&new ot(s).triggerTwitterAuthFlow();return}if(ut(n))return;if(u.isNewAuth()&&c||!k.enabled()&&t.user.facebookOnly){yt(!1,!1,n);return}}h=r.addDeviceQueryParameter(u.replaceUrlLocation(i.customInterimPage||t.community.authentication.interimPageUrl)),u.isThirdPartyJustLoggedIn()&&(h=r.addQueryParameter(h,"fbJustLoggedIn",1)),v(function(n){w(n,function(){lt.get().readyToUse(!0),n.load||u.reload(null,p(n.eventName),e)})},h,u.interimOverlaySize(),n,function(){u.removeThirdPartyJustLoggedInCookie()},"interimOverlay"),reloadPageOnOverlayClose=!!f||u.isThirdPartyJustLoggedIn()}function wt(){function i(){n||(n=!0,o.raiseEvent("AccountDeactivated"))}var n=!1;Flux4.addEventListener("OverlayCancelled",i),v(w,r.addDeviceQueryParameter(t.community.authentication.accountDeactivatedUrl),u.accountDeactivatedOverlaySize())}function g(){return{product:"Auth",productLocation:r.getProductLocationName(s||et()),device:d.getDeviceType()}}function ft(i,f,e){t.user||(o.raiseEvent("onBeforeSignIn"),t.community.authentication.enableApiBasedLogin||b(function(o){o?c.signIn.call(null,i,n.extend(g(),{title:f},e)):u.isOverlayMode()?rt(!e?null:e.email,i):window.location.href=u.replaceUrlLocation(r.addDeviceQueryParameter(t.community.authentication.signInUrl))}))}return i=i||{},authRedirectParamsCookieName="FluxAuthRedirectParams",reloadPageOnOverlayClose=!1,reloadWidgets=!1,roadBlocker=new at(!1,s),c||gt||t.loadIfEmpty(function(){if(u.isAuth41()&&!c){var t=n("<div>").css({position:"absolute",width:"1px",height:"1px",left:"-1000px",top:"-1000px"}).appendTo("body");gt=!0,Flux4.createWidget("Auth",{container:t},function(n){c=n})}}),{isNewAuth:u.isNewAuth,isOverlayMode:u.isOverlayMode,signIn:ft,signUp:function(i,r){b(function(u){u&&!t.user?c.signIn.call(null,i,n.extend(g(),{title:r})):it(null,!1,null,i)})},thouToFluxSignUp:yt,sutSignUp:function(n,u){var f=r.addDeviceQueryParameter(i.customSignupPage||t.community.authentication.signUpUrl);it(n?r.addQueryParameter(f,"sutid",n):f,!1,null,u)},fluxSignIn:function(i,r){if(!t.user){var u=this;t.community.authentication.enableApiBasedLogin||b(function(t){t&&n.isFunction(c.signInToFlux)?(o.raiseEvent("onBeforeSignIn"),c.signInToFlux.call(null,i,n.extend(g(),{title:r}))):u.signIn(i,r)})}},joinCommunity:function(i,r){if(!t.user.communityMember){var u=this;b(function(t){t?c.joinCommunity.call(null,i,n.extend(g(),{title:r})):u.showInterimForm(i)})}},showInterimForm:function(i,f,e){t.user&&(typeof f=="string"&&(e=f,f=!1),b(function(o){o?c.showInterimForm.call(null,i,n.extend(g(),{title:e})):u.isOverlayMode()?pt(i,undefined,f):window.location.href=u.replaceUrlLocation(r.addDeviceQueryParameter(t.community.authentication.interimPageUrl))}))},checkAuthRedirectParams:bt,signOut:function(i,f){var s,e,o;t.user&&(u.removeBigDoorCookie(),s=new tt("Authentication",null,[{name:"logout",template:r.logoutUrlTemplate,isAction:!0}],{}),e=f,n.isFunction(e)||(e=function(){}),o=function(){i?window.location.reload():u.reload(null,p("signOut"))},s.methods().logout({},function(){u.dropMasterCookiesOnBrandsDomain(!0,function(){k.enabled()&&t.user.facebookConnected?k.signOut(function(){o()}):o()})},e))},deactivationCompleted:function(n){nt(n||{},"deactivationCompleted")||u.authenticationChanged(function(){wt(),reloadPageOnOverlayClose=!0})},showAlienAccountFlyUp:function(n){var i=n;v(function(n){_.isUndefined(n.showSignInForm)||n.showSignInForm!=!0?_.isUndefined(n.redirectParentUrl)?_.isUndefined(n.closeOverlay)||n.closeOverlay!=!0||_.isUndefined(n.reload)||n.reload!=!0?setTimeout(function(){o.raiseEvent("OnAlienAccountFlyUpShowed",i)},0):h.hide(function(){window.location.reload()}):h.hide(function(){window.location.href=n.redirectParentUrl}):h.hide(function(){rt()})},decodeURIComponent(String(n.errorMsgOverlayUrl+"&isInitSignIn=true")).replace(/\+/g," "),{width:376,height:!t.user?176:205},null,null)},showMergeAccountsFlyUp:function(t){b(function(i){if(i){var u=decodeURIComponent(t.errorMsgOverlayUrl);c.mergeAccounts.call(null,null,n.extend(g(),{title:"MergeAccounts"},{userEmail:decodeURIComponent(r.getQueryParameter(u,"userEmail")),userName:decodeURIComponent(r.getQueryParameter(u,"userName")),userIdentity:decodeURIComponent(r.getQueryParameter(u,"userIdentity")),accessToken:decodeURIComponent(r.getQueryParameter(u,"accessToken"))}))}else reloadWidgets=!0,v(function(n){(_.isUndefined(n.closeOverlay)||n.closeOverlay!=!0||_.isUndefined(n.reload)||n.reload!=!0)&&(_.isUndefined(n.resetAuth)||n.resetAuth!=="true")||h.hide(function(){y.reloadWidgets()})},decodeURIComponent(String(t.errorMsgOverlayUrl+"&productLocation=UserBar")).replace(/\+/g," "),{width:385,height:275},null,null)})},verifyEmail:function(){b(function(i){var f=window.location.href,o=decodeURIComponent(r.getQueryParameter(f,"verification_value")),u;if(i||t.user){if(!o)return}else{ft();return}var s=decodeURIComponent(r.getQueryParameter(f,"email")),l=decodeURIComponent(r.getQueryParameter(f,"redirectUrl"));i?c.verifyEmail.call(null,null,n.extend(g(),{title:"EmailVerification"},{email:s,redirectUrl:l,verificationValue:o})):(u=t.community.emailVerificationUrl,u=r.addQueryParameter(u,"verificationValue",o),v(function(n){n.closeOverlay&&h.hide()},r.addDeviceQueryParameter(r.addCultureQueryParameter(u)),{width:275,height:130}))})},processAuthentication:w,authenticationChanged:u.authenticationChanged,redirectToSetAuthCookieUrlIfNeed:nt}},u=function(){function c(i,r){y.reloadWidgets(function(){n.isFunction(i)&&i(),r&&setTimeout(function(){o.raiseEvent(r.eventName,{widgetName:r.widgetName},t.user)},1)})}function u(){var t;try{t=n.cookie("fluxAuthCookieState"),!t||(t=f.parse(t))}catch(i){}return t}function s(n){var i=t.community.authentication.baseFluxAuthenticationUrl+"Cookies/GetCookiesFromMasterDomain",u;i=r.addQueryParameter(i,"skipCache",!0),u=new tt("Authentication",null,[{name:"dropMasterCookiesOnBrandsDomain",template:i,isAction:!1}],{}),u.methods().dropMasterCookiesOnBrandsDomain({},n,n)}function l(){var r=u(),i;!!r&&r.authStateChanged&&(r.loggedIn=!!t.user,r.isMember=!!t.user&&t.user.communityMember,r.authStateChanged=!1,i=location.hostname.split("."),i.length>1&&(i=i[i.length-2]+"."+i[i.length-1]),n.cookie("fluxAuthCookieState",f.stringify(r),{path:"/",domain:i,expires:1}))}function v(i,r){var f=u(),e=function(){l(),n.isFunction(r)&&r()};!f||i?s(e):(e(),(f.loggedIn!=!!t.user||f.isMember!=(!!t.user&&t.user.communityMember))&&s(e))}var i="fbJustLoggedIn";return{isNewAuth:function(){return t.community.authentication.pageDisplayMode==3||t.community.authentication.pageDisplayMode==4},isAuth41:function(){return t.community.authentication.pageDisplayMode==4},isOverlayMode:function(){return t.community.authentication.pageDisplayMode==2||t.community.authentication.pageDisplayMode==3||t.community.authentication.pageDisplayMode==4},signInOverlaySize:function(){var t=300;return this.isNewAuth()&&(t=335,n.browser.msie&&(n.browser.version=="7.0"&&(t=352),n.browser.version=="9.0"&&(t=334.5)),n.browser.mozilla&&parseInt(n.browser.version,10)>=7&&(t=335),n.browser.webkit&&(t=334)),{height:t}},thouSignInSignUpOverlaySize:function(){return{width:383,height:233}},interimOverlaySize:function(){return{height:300}},postAuthOverlaySize:function(){return{width:735,height:450}},accountDeactivatedOverlaySize:function(){return{width:400,height:300}},authenticationChanged:function(i,r,u,f){function e(){c(function(){n.isFunction(i)&&i(),f&&setTimeout(function(){o.raiseEvent("SignInComplete",{widgetName:u&&u.widgetName},t.user)},1)},u)}r?e():h.hide(e)},reload:function(n,i,r){t.hostedPage?h.hide(function(){window.location.reload()}):this.authenticationChanged(n,!1,i,r)},replaceUrlLocation:function(n){return n.replace("(location)",encodeURIComponent(window.location.href))},setThirdPartyJustLoggedInCookie:function(){a.setCookie(i,"1",3e5)},isThirdPartyJustLoggedIn:function(){return a.getCookie(i)=="1"},removeThirdPartyJustLoggedInCookie:function(){a.setCookie(i,"",-1)},addBigDoorCookie:function(n){st.setCookieToRootDomain("BDACWE",n,31536e6)},removeBigDoorCookie:function(){!a.getCookie("BDACWE")||st.setCookieToRootDomain("BDACWE","",-1)},dropMasterCookiesOnBrandsDomain:v}}(),nr=function(){function u(r){if(!_.isUndefined(r.errorMsg)){n.isFunction(i)&&i(r.errorMsg);return}(new l).processAuthentication(r),setTimeout(function(){n.isFunction(t)&&t()},100)}var t=null,i=null,r=new kt(n("<iframe>").hide().appendTo(n("body")));return{login:function(f,e,o){i=o,t=e,r.loadAndListen(f,n.proxy(u,this),!1)}}}(),yt=null,oi=!1,ot=function(i){function v(){return!!t.community.facebookContext&&t.community.facebookContext.enableThirdPartyAuth===!0&&!!t.community.facebookContext.baseDirectAuthUrl}function y(n){s()&&yt.triggerFacebookAuthFlow(n)}function p(n){s()&&yt.triggerTwitterAuthFlow(n)}function w(n){t.loadIfEmpty(function(){!t.community.facebookContext||t.community.facebookContext.enableThirdPartyAuth!==!0||n()})}function s(){return typeof yt=="object"}function b(n,t){var i="http://widgets4.flux.com/iframe/auth_iframe.html";return i=!n?i:r.addQueryParameter(i,"product",n),!t?i:r.addQueryParameter(i,"productLocation",t)}function c(n){return n.product||"Auth"}function h(n){return n.productLocation||r.getProductLocationName(i)}function k(n,t){var i=decodeURIComponent(t),f,o,u,e;if(n.errorMsgOverlayUrl)!n.showFlyUpType||(i=r.addQueryParameter(i,"showFlyUpType",n.showFlyUpType)),u=decodeURIComponent(n.errorMsgOverlayUrl).split("?")[1],!u||(u=u.split("&"));else return i;for(f=0,o=u.length;f<o;f++)e=u[f].split("="),i=r.addQueryParameter(i,e[0],e[1]);return i}function a(n){var i="",t,f,r,u;if(!n.showFlyUpType||(i="showFlyUpType="+n.showFlyUpType),!!n.errorMsgOverlayUrl)for(t=decodeURIComponent(n.errorMsgOverlayUrl).split("?")[1],!t||(t=t.split("&")),r=0,f=t.length;r<f;r++)u=t[r].split("="),i+="&"+u[0]+"="+u[1];return!n.errorMsg||(i+="&errorMsg="+decodeURIComponent(n.errorMsg)),i}function d(t){var i;t=t||{},f||(f=n("<iframe/>").addClass("flux4AuthFrame").appendTo("body"));var o=function(i){if(!!t.redirectUrl&&Flux4.Modernizr.touch){document.location.href=decodeURIComponent(t.redirectUrl);return}!i.setAuthCookieUrl||(new l).redirectToSetAuthCookieUrlIfNeed(i,"processOverlayCallback"),t.ignoreXdArguments===!0?document.location.href=f[0].src:(new l).processAuthentication(i),n.isFunction(t.callback)&&t.callback(a(i))},u=t&&t.domain||r.getQueryParameter(document.location.href,"domain")||document.domain,e=r.getQueryParameter(document.location.href,"callbackName")||nt.create(o,null,!0);t&&t.ignoreXdArguments&&(u=r.getQueryParameter(document.location.href,"domain"),e=r.getQueryParameter(document.location.href,"callbackName")),i=[b(c(t),h(t)),"#token=",t.token,"&secretToken=",t.secretToken,"&action=",t.action,"&provider=",t.provider,"&domain=",u,"&callbackName=",e,"&callbackUrl=",t.callbackUrl,"&redirectUrl=",t.redirectUrl,"&touch=",Flux4.Modernizr.touch].join(""),Flux4.Modernizr.touch&&(!t||t.redirectUrl)||!t||t.ignoreXdArguments?document.location.href=i:(i+="&product="+c(t),i+="&productLocation="+h(t),f.attr("src",i))}function g(t){t=t||{};var f,e=function(i){!f||f.close(),t.ignoreXdArguments!==!0&&(new l).processAuthentication(i),!!t.callbackUrl&&t.ignoreXdArguments?window.location.href=k(i,t.callbackUrl):n.isFunction(t.callback)&&(u.isAuth41()||!i.errorMsg||alert(decodeURIComponent(i.errorMsg).replace(/\+/g," ")),t.callback(a(i)))},i=r.addQueryParameter(t.url,"provider","twitter");i=r.addQueryParameter(i,"productLocation",h(t)),i=r.addQueryParameter(i,"domain",t.domain||document.domain),i=r.addQueryParameter(i,"callbackName",nt.create(e,"ProcessDirectThirdpartyAuthCallback",!0)),f=window.open(i,"TwitterAuthFacadePopup","width=800, height=500, status=1, location=1, resizable=yes")}function tt(){if(t.community.facebookContext&&t.community.facebookContext.enableThirdPartyAuth===!0){var n=t.community.facebookContext.directAuthDomain;return!(!n||0===n.length||/^\s*$/.test(n))}return!0}var f;return w(function(){if(!oi){oi=!0;var t=n("<div>").css({position:"absolute",width:"1px",height:"1px",left:"-1000px",top:"-1000px"}).appendTo("body");Flux4.createWidget("SocialAuth",{container:t,enableUiLayout:!1},function(n){yt=n,o.raiseEvent("ThirdPartyDirectAuth.SocialAuthRendered")})}}),{isReady:s,isContextValid:tt,triggerFacebookAuthFlow:y,triggerTwitterAuthFlow:p,processDirectFacebookAuth:d,processDirectTwitterAuth:g,useDirectBrandAuthDomain:v}},k=function(){function i(){}function r(){return typeof window.FB=="object"}function s(){return typeof window.fbAsyncInit=="function"||n("body div#fb-root").length>0}function h(){}function f(){return t.community.facebookContext}function c(t,i){r()?i():(n.ajaxSetup({cache:!0}),n.getScript(t,function(){i()}))}var u=0,o=10;return{loadFacebookJDK:!0,enabled:function(){return f()},signOut:function(n){i("Sign Out"),f()&&this.loadJdk({},function(){FB.getLoginStatus(function(t){t.session?FB.logout(n):n()})})},loadJdk:function(i,u,f){var o=n("#fb-root"),e;if(o.length==0&&n("body").prepend('<div id="fb-root"><\/div>'),e=(i?i.locale:null)||"en_US",this.loadFacebookJDK&&!window.FB)c(document.location.protocol+"//connect.facebook.net/"+e+"/all.js",function(){FB.init(n.extend({appId:i.appId||t.community.facebookContext.appId,status:!0,oauth:!0,cookie:!1},i)),u()});else{if(!r()){this.waitFacebookJdk(u,f);return}u()}},waitFacebookJdk:function(t,i){var e=function(){n.isFunction(i)&&i(),h()},c=function(){n.isFunction(t)&&t()},f;r()?c():s()?(u=0,f=setInterval(function(){r()?(clearInterval(f),c()):++u>=o&&(clearInterval(f),e())},500)):e()},getFacebookShareCounters:function(t,r){if(!t){i("getFacebookShareCounters: contentUrl must be specified",!0);return}if(!n.isFunction(r)){i("getFacebookShareCounters: callback must be specified and must be a function",!0);return}this.loadJdk({},function(){FB.api({method:"fql.query",query:"SELECT share_count, like_count, comment_count, total_count  FROM link_stat WHERE url='"+t+"'"},function(n){r(!n?{}:n[0])},function(n){i("getFacebookShareCounters: FQL request failed",!0),r({error:n})})},function(n){i("getFacebookShareCounters: failed to load JDK",!0),r({error:n})})}}}(),pt=function(){function t(){}return{getAllShareCounters:function(i,r,u){if(!i){t("getAllShareCounters: contentUrl must be specified",!0);return}if(!n.isFunction(r)){t("getAllShareCounters: callback must be specified and must be a function",!0);return}var f=function(){var t=n.Deferred();return k.getFacebookShareCounters(i,t.resolve),t.promise()},e=function(){var t=n.Deferred();return ut.getTwitterShareCounters(i,t.resolve),t.promise()};n.when||t("getAllCounters: ERROR - jquery does not contain $.when (Deffered functionality), seems that jquery version is less the 1.5",!0),n.when(f(),e()).then(function(n,t){r({facebook:n,twitterbutton:t})}).fail(function(t){n.isFunction(u)&&u(t)})},getAllFollowCounters:function(i,r,u){if(!i){t("getAllFollowCounters: contentUrl must be specified",!0);return}if(!n.isFunction(r)){t("getAllFollowCounters: callback must be specified and must be a function",!0);return}var f=function(){var t=n.Deferred();return k.getFacebookShareCounters(i.facebook,t.resolve),t.promise()},e=function(){var t=n.Deferred();return ut.getTwitterFollowCounters(i.twitter,t.resolve),t.promise()};n.when||t("getAllFollowCounters: ERROR - jquery does not contain $.when (Deffered functionality), seems that jquery version is less the 1.5",!0),n.when(f(),e()).then(function(n,t){r({facebook:n,twitterbutton:t})}).fail(function(t){n.isFunction(u)&&u(t)})}}}(),ut=function(){function t(){}return{getTwitterShareCounters:function(i,r){if(!i){t("getShareCounters: contentUrl must be specified",!0);return}if(!n.isFunction(r)){t("getShareCounters: callback must be specified and must be a function",!0);return}var u=new tt("Twitter",null,[{name:"getTwitterShareCounters",template:"http://urls.api.twitter.com/1/urls/count.json?url={URL}",isAction:!1}],{});u.methods().getTwitterShareCounters({URL:i},function(n){var t=n.count;r({total_count:t})},function(n){t('getTwitterShareCounters: seems that "http://urls.api.twitter.com/1/urls/count.json?url={URL}&callback={callback}" stop working',!0),r({error:n})})},getTwitterFollowCounters:function(i,r){if(!i){t("getFollowCounters: screenName must be specified",!0);return}if(!n.isFunction(r)){t("getFollowCounters: callback must be specified and must be a function",!0);return}var u=new tt("Twitter",null,[{name:"getTwitterShareCounters",template:"https://api.twitter.com/1/users/lookup.json?screen_name={NAME}",isAction:!1}],{});u.methods().getTwitterShareCounters({NAME:i},function(n){var t=n[0].followers_count;r({total_count:t})},function(n){t('getTwitterFollowCounters: seems that "https://api.twitter.com/1/users/lookup.json?screen_name={NAME}" stop working',!0),r({error:n})})}}}(),si=function(n,t,i){this.DAAPI=i.methods(),this.utils=new ti;var r=t.controlData?t.controlData.parentName:n;this.authentication=new l(null,r),this.UI=new ni(this.authentication,n),this.performRoadBlockerCheck=function(n,t,i){return new at(!0,r).performCheck(n,t,!1,i)},this.needsRoadblocking=function(n){return new at(!0,r).needsRoadblocking(n)},this.thirdPartyDirectAuth=new ot(r),this.initEvents=function(n){return[].concat(i.initEvents(n),this.UI.initEvents(n))},this.events=o};si.prototype={reloadWidgets:y.reloadWidgets,loadFacebookJdk:_.bind(k.loadJdk,k),getFacebookShareCounters:_.bind(k.getFacebookShareCounters,k),getTwitterShareCounters:_.bind(ut.getTwitterShareCounters,ut),getTwitterFollowCounters:_.bind(ut.getTwitterFollowCounters,ut),getAllShareCounters:_.bind(pt.getAllShareCounters,pt),getAllFollowCounters:_.bind(pt.getAllFollowCounters,pt),createPostAuthAction:function(n){return new di(n)}},ni=function(n,t){this.authentication=n,this.widgetName=t,this._overlayOpenEventName="onOverlayOpen",this._overlayClosedEventName="onOverlayClosed"},ni.prototype={_addExternalOverlayEvent:function(t,i){var r=this.externalInterface,u,f;return r&&n.isFunction(r[i])?(u=_.bind(r[i],r),n.isFunction(t)?t.externalEventAdded||(f=_.wrap(t,function(n){n(),u()})):f=u,n.extend(f,{externalEventAdded:!0})):t},initEvents:function(t){this.externalInterface=t;var i=[this._overlayOpenEventName,this._overlayClosedEventName];return n.each(i,function(){t[this]=function(){}}),i},showOverlay:function(n){n&&(n.onShowComplete=this._addExternalOverlayEvent(n.onShowComplete,this._overlayOpenEventName),n.onClose=this._addExternalOverlayEvent(n.onClose,this._overlayClosedEventName),p.showOverlay(this.widgetName,n))},hideOverlay:function(n){p.hideOverlay(this.widgetName,this._addExternalOverlayEvent(n,this._overlayClosedEventName))},correctOverlayPosition:function(){p.correctPosition(this.widgetName)},initAuthElements:function(n,i){var r=this,u=function(n){var t={cookieEnabled:Flux4.Modernizr.cookies};r.authentication.signIn(n,(i||{}).title||"",t)};n.find(".signIn").click(_.bind(u,this.authentication)).end().find(".signUp").click(_.bind(this.authentication.signUp,this.authentication)).end().find(".joinCommunity").click(_.bind(this.authentication.joinCommunity,this.authentication)),!t.user&&t.community.facebookContext&&this.authentication.isNewAuth()?(n.find(".connectTo3PContainer").show(),n.find(".connectTo3P").addClass("thirdPartyAuth").click(_.bind(this.authentication.signIn,this.authentication))):n.find(".connectTo3PContainer").hide()},initLoggedUserElements:function(i,r){if(t.user){if(_this=this,t.user.communityMember&&i.find(".loggedProfileUrl").removeClass("loggedProfileUrl").wrap(n("<a>").addClass("loggedProfileUrl")).click(function(n){n.preventDefault(),_this.openUserProfile(t.user.ucid,n,t.user.profileUrl)}),r){var u=t.user.thumbnails[r];u&&i.find("img.loggedUserThumbnail").attr("src",u)}i.find(".loggedDisplayName").each(function(){n(this).html()==""&&n(this).html(t.user.name),!t.user.communityMember&&t.user.communityThirdPartyOnly&&n(this).hide()})}},openUserProfile:function(n,i,u,f,s){if(!n,Flux4.Modernizr.touch&&f==="account"){baseDomainUrl=t.community.facebookContext.baseDirectAuthUrl||t.community.authentication.baseAuthenticationUrl,url=baseDomainUrl+"ProfileAccount/Edit",url=r.addQueryParameter(url,"product","Profile"),url=r.addQueryParameter(url,"productLocation","ProfileOverlay"),url=r.addQueryParameter(url,"touch","true"),url=r.addQueryParameter(url,"redirectUrl",encodeURIComponent(document.location.href)),window.location.href=url;return}var h=y.tryGetWidgetByName("UserProfile");h?h.getExternalInterface().openProfile(n,i,f,s):y.isLoadingSingleton("userprofile")?o.addEventListener("WidgetLoaded:userprofile",function(){h=y.tryGetWidgetByName("UserProfile"),h.getExternalInterface().openProfile(n,i,f,s)}):it.createWidget("UserProfile",{},function(t){t.openProfile(n,i,f,s)})},showExternalUrlOverlay:function(n){if(n)return h.show(this.widgetName,n)},hideExternalUrlOverlay:function(n){h.hide(n)},redirectExternalUrlOverlay:function(n,t){h.redirectToUrl(n,t)},correctExternalUrlOverlayPosition:function(n,t,i){h.correctPosition(n,t,i)}},ti=function(){this.XdReceiver=kt},ti.prototype={_:_,readCookie:a.getCookie,writeCookie:a.setCookie,setActivityFeedCacheCookie:a.setActivityFeedCacheCookie,isActivityFeedCacheCookieExist:a.isActivityFeedCacheCookieExist,setCookieToRootDomain:st.setCookieToRootDomain,addBigDoorCookie:u.addBigDoorCookie,removeBigDoorCookie:u.removeBigDoorCookie,setThirdPartyJustLoggedInCookie:u.setThirdPartyJustLoggedInCookie,replace:v.replace,truncateString:v.truncate,toWbrFormatString:v.toWbrFormat,camelize:v.camelize,compactNumber:v.compactNumber,validateEmail:v.isEmail,getBrowserVersion:ht.getBrowserVersion,getQueryParameter:r.getQueryParameter,getAnchorParameter:r.getAnchorParameter,removeQueryParameter:r.removeQueryParameter,trackWidget:d.trackWidget,trackForReporting:d.trackForReporting,getLoggedInUserInfo:d.getLoggedInUserInfo,embedStyleSheet:ei.embedStyleSheet,generateUID:ft.generate,externalWidgets:ci,googlePlusOneButton:vi,registerNamedCallback:function(n){return nt.create(n,null,!0)},addQueryParameter:r.addQueryParameter,addCultureQueryParameter:r.addCultureQueryParameter,addDeviceQueryParameter:r.addDeviceQueryParameter,fork:wt.fork,waterfall:wt.waterfall,storage:s,createAsyncManager:wt.createAsyncManager,facebookEvents:li,clipboard:hi.embedClipboardFlash,zeroClipboardFlashUrl:r.zeroClipboardFlashUrl,postFormRequest:w.postFormRequest,setPostContentType:w.setPostContentType,getRequest:w.getRequest,loadScript:w.loadScript,buildUrl:function(n,t){return r.buildDaapiUrl({template:n,params:t})},overrideMethod:wi.overrideMethod,_template:function(n,t){return _.template(n,t,{variable:"data"})},getUserProfileUrl:function(n){var i=t.community.userProfileUrl.replace("ProfileAccount/Edit","Account/MobileUserProfile/Edit"),u=r.getQueryParameter(location.href,"redirectUrl");return u||location.href.indexOf(i)!=0||(u=encodeURIComponent(location.href)),i=r.removeQueryParameter(i,"openUserProfile"),!n||(i=r.addQueryParameter(i,"openUserProfile",n)),i=r.removeQueryParameter(i,"touch"),i=r.addQueryParameter(i,"touch","true"),u&&(i=r.removeQueryParameter(i,"redirectUrl"),i=r.addQueryParameter(i,"redirectUrl",u)),i},HtmlHelper:yi};var h=function(){function c(t){_.isUndefined(t.closeOverlay)||t.closeOverlay!="true"?_.isUndefined(t.setheight)||this.setSize(t):(this.hide(),!t.deactivationFeedbackSubmitted||o.raiseEvent("AccountDeactivated")),n.isFunction(i.callback)&&i.callback(t)}function l(){var f=i.pageUrl,o;f=r.addQueryParameter(f,"domain",document.domain),f=r.addQueryParameter(f,"fluxHosted",t.hostedPage),o=n("<iframe>").attr({frameborder:0,marginheight:0,marginwidth:0,scrolling:"no"}).height(i.size.height).hide().load(function(){n.isFunction(i.onPageLoaded)&&i.onPageLoaded()}).appendTo(u),i.size.width&&o.width(i.size.width),e=new kt(o),e.loadAndListen(f,n.proxy(c,this),i.useOldReceiver)}function s(){u&&(e.stopListening(),u=null,e=null,f=null,i=null)}function h(n,t,i){p.correctPosition(f,n,t,i)}var u=null,e=null,f=null,i=null;return{show:function(t,r){if(!!u)throw new b("ExternalUrlOverlay [show] : another overlay already open. Close it first.");f=t,i=n.extend({size:{width:400,height:500},animationDuration:{fade:50,resize:50}},r),u=n(v.replace('<div style="width: {width}px;"><div class="loaderBar" align="center" style="width: {width}px; height: {height}px;"><div class="loaderIcon">&nbsp;<\/div><\/div><\/div>',i.size)),i=n.extend(i,{initContent:u,onClose:function(){s(),n.isFunction(r.onClose)&&r.onClose()},onShowComplete:n.proxy(l,this)}),p.showOverlay(f,i)},hide:function(t){if(!u){n.isFunction(t)&&t();return}p.hideOverlay(f,function(){s(),n.isFunction(t)&&t()})},setSize:function(t,r){var e,f,o;u&&(u.find(".loaderBar").length>0&&u.find(".loaderBar").remove().end().find("iframe").fadeIn(i.animationDuration.fade),e=Number(t.setheight),e!=0)&&(f=t.setwidth?Number(t.setwidth):0,o={height:e},f&&(o.width=f,u.css("width","auto")),u.find("iframe").animate(o,i.animationDuration.resize,function(){if(i){var t=f||i.alwaysCentered;t?h(!1,!i.alwaysCentered,i.resizeCallback):n.isFunction(i.resizeCallback)&&i.resizeCallback()}n.isFunction(r)&&r()}))},correctPosition:h,redirectToUrl:function(n,t){u&&(u.find("iframe").attr("src",n),this.setSize({setheight:t.height,setwidth:t.width},function(){u.find("iframe").attr("scrolling","auto")}))}}}(),tr=function(t){function c(){if(i){var t={};return t.left=Math.max((n(window).width()-i.width())/2,0),e||(t.left+=n(window).scrollLeft()),t.top=Math.max((n(window).height()-i.height())/2,0),e||(t.top+=n(window).scrollTop()),t}}function s(t,r,f){var e=c(!0);r&&delete e.top,t?(i.css(e),n.isFunction(f)&&f()):i.animate(e,u.show,f)}function b(t,i){var u={position:e?"fixed":"absolute",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:t},r=n("<div>").css(u).addClass("flux4").addClass("flux4Widget");return i&&r.addClass("transparentOverlay"),r}function l(){n("html").addClass("flux4disablePageScrolling")}function k(t){!t.shadowCss||r.css(t.shadowCss),w?r.fadeIn(u.show,l):(r.show(),setTimeout(l,u.show));var e=n.extend(c(!0),{});i.children().hide(),i.css(e).css("visibility","visible"),n.isFunction(t.onStartFadeIn)&&setTimeout(function(){t.onStartFadeIn()},1),i.find(".closeButton").fadeIn(u.show/2),f.fadeIn(u.show/2,function(){n.isFunction(t.onShowComplete)&&setTimeout(function(){t.onShowComplete()},1)})}function a(){o==="resize"?s(!0):setTimeout(function(){s(!0)},10)}var u={show:50,hide:50},r=null,i=null,y=null,e=!1,f=null,o="onorientationchange"in window?"orientationchange":"resize",h=ht.getBrowserVersion(),w=!h.msie||h.version*1>8;return{getWidgetName:function(){return t},show:function(u){if(!i&&u&&u.initContent){e=!0;var s=b(u.zIndex,u.showTransparent);r=n("<div>").addClass("overlayShadow"),u.shadowClass&&r.addClass(u.shadowClass),f=u.initContent.addClass("overlayContent"),i=n("<div>"),i.addClass("overlayContentWrapper").append(n("<div>").addClass("closeButton").click(function(){p.hideOverlay(t,u.onClose,!0)})).append(f),u.overlayClass&&i.addClass(u.overlayClass),s.append(r.hide()).append(n("<div>").addClass(v.camelize(t)).append(i)).appendTo(n("body")),n("html").addClass("flux4disablePageScrolling"),k(u),n(window).bind(o,a)}},hide:function(t){i&&(n(window).unbind(o,a),i.width(f.outerWidth()).height(f.outerHeight()),setTimeout(function(){i&&i.find("iframe").attr("src","").end().children().remove()},100),i.fadeOut(u.hide,function(){i.closest(".flux4").remove(),n.isFunction(t)&&setTimeout(t,1),i=y=null}),r.fadeOut(u.hide,function(){r=null,n("html").removeClass("flux4disablePageScrolling")}))},correctPosition:function(n,t,i){s(n,t,i)}}},p=function(){function u(n){for(var t=i.length-1;t>=0;t--)if(i[t].getWidgetName()==n)return t;return-1}function e(n){t=t?n.zIndex?Math.max(n.zIndex,t+1):t+1:n.zIndex||f}function s(){!r.getQueryParameter(document.location.href,"openUserProfile")||setTimeout(function(){Flux4.Modernizr.touch||y.tryGetWidgetByName("UserProfile")||y.isLoadingSingleton("userprofile")||it.createWidget("UserProfile",{container:n("body")})},1500)}function h(t){var i=n('<div class="confirmationContent"><div class="confirmField"><strong><span class="confirmMsg"><\/span><\/strong><div class="buttonsLine"><a class="btnCancel"><\/a><a class="primaryButton btnPost"><\/a><\/div><\/div><\/div>');return i.find(".confirmMsg").html(t.msg),i.find(".btnCancel").html(t.cancelLbl),i.find(".btnPost").html(t.yesLbl),!t.className||i.addClass(t.className),i}s();var i=[],f=9999,t=null;return{showOverlay:function(n,r){var u=new tr(n);e(r),r.zIndex=t,i.push(u),u.show(r)},confirm:function(n,t){var i=h(t);i.find(".btnPost").click(function(){p.hideOverlay(n),typeof t.onConfirm=="function"&&t.onConfirm()}),i.find(".btnCancel").click(function(){p.hideOverlay(n)}),p.showOverlay(n,{initContent:i,shadowCss:t.shadowCss,showTransparent:!!t.showTransparent})},hideOverlay:function(r,f,e){var s=u(r);s>-1&&(i[s].hide(function(){n.isFunction(f)&&f(),e&&o.raiseEvent("OverlayCancelled")}),t--,i.splice(s,1)),i.length==0&&(t=null)},correctPosition:function(n,t,r,f){var e=u(n);e>-1&&i[e].correctPosition(t,r,f)}}}();it.initialize(!1,!0,!0,!1)}(jQuery)}})()