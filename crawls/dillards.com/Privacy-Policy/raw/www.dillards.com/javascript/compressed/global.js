//********************************************************************
//*-------------------------------------------------------------------
//*	This file combines five javascript files into one:
//*
//*		* jQuery hoverIntent plugin
//*		* jQuery cookie plugin
//*		* util.js (standard site-wide utilites)
//*		* validation.js (qty and add-to-cart validation)
//*		* jQuery simpleModal plugin
//*		* jQuery ajaxManager plugin
//*
//*	These files are being included here, in global.js, as every
//* page needs these files.
//*-------------------------------------------------------------------
//********************************************************************

(function(a){a.fn.hoverIntent=function(m,k){var n={sensitivity:7,interval:100,timeout:0};n=a.extend(n,k?{over:m,out:k}:m);var p,o,h,d;var e=function(f){p=f.pageX;o=f.pageY};var c=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);if((Math.abs(h-p)+Math.abs(d-o))<n.sensitivity){a(f).unbind("mousemove",e);f.hoverIntent_s=1;return n.over.apply(f,[g])}else{h=p;d=o;f.hoverIntent_t=setTimeout(function(){c(g,f)},n.interval)}};var j=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);f.hoverIntent_s=0;return n.out.apply(f,[g])};var b=function(q){var g=jQuery.extend({},q);var f=this;if(f.hoverIntent_t){f.hoverIntent_t=clearTimeout(f.hoverIntent_t)}if(q.type=="mouseenter"){h=g.pageX;d=g.pageY;a(f).bind("mousemove",e);if(f.hoverIntent_s!=1){f.hoverIntent_t=setTimeout(function(){c(g,f)},n.interval)}}else{a(f).unbind("mousemove",e);if(f.hoverIntent_s==1){f.hoverIntent_t=setTimeout(function(){j(g,f)},n.timeout)}}};return this.bind("mouseenter",b).bind("mouseleave",b)}})(jQuery);jQuery.cookie=function(b,j,n){if(typeof j!="undefined"){n=n||{};if(j===null){j="";n.expires=-1}var e="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var f;if(typeof n.expires=="number"){f=new Date();f.setTime(f.getTime()+(n.expires*24*60*60*1000))}else{f=n.expires}e="; expires="+f.toUTCString()}var m=n.path?"; path="+(n.path):"";var g=n.domain?"; domain="+(n.domain):"";var a=n.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,m,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};function containsDoubleByte(c){var d=new String(c);var b=127;for(var a=0;a<d.length;a++){chr=d.charCodeAt(a);if(chr>b){return true}}return false}function isValidEmail(a){if(containsDoubleByte(a)){return false}if(a.length==0){return true}else{if(a.length<5){return false}else{if(a.indexOf(" ")>0){return false}else{if(a.indexOf("@")<1){return false}else{if(a.lastIndexOf(".")<(a.indexOf("@")+2)){return false}else{if(a.lastIndexOf(".")>=a.length-2){return false}}}}}}return true}function isValidUTF8length(b,a){if(utf8StringByteLength(b)>a){return false}else{return true}}function utf8StringByteLength(e){if(e===null){return 0}var d=String(e);var b=127;var a=2047;var c=d.length;for(i=0;i<d.length;i++){chr=d.charCodeAt(i);if(chr>b){c=c+1}if(chr>a){c=c+1}}return c}function fieldClear(a){if(a.Val){if(a.value==""){a.value=a.Val;a.Val=null;a.first=null}else{a.Val=null}}else{if(!a.first){a.Val=a.value;a.value="";a.first="true"}}}function trimMe(b){var a=b.value;a=a.replace(/^\s+|\s+$/g,"");b.value=a}function convertToLowerCase(b){var a=b.value;a=a.toLowerCase();b.value=a}var busy=false;function Add2ShopCart(a){if(!busy){busy=true;a.action="OrderItemAdd";a.URL.value="OrderCalculate?updatePrices=1&calculationUsageId=-1&dummaryparam=1&URL=ProductDisplay";a.submit()}}function Add2WishList(d){var c=d.getElementsByTagName("input");var b,a;for(b in c){a=c[b].id;if(a!=null&&a.indexOf("quantity")!=-1){c[b].value=1}}if(!busy){busy=true;d.action="InterestItemAdd";d.URL.value="InterestItemDisplay";d.submit()}}function displayIntegerValue(c,a){var b="0";b=getUserCookieValue(c,a);if(b==null){b="0"}document.write(b)}function displayAmountValue(d,b){var c="0.00";c=getUserCookieValue(d,b);if(c!=null){var a=c.indexOf(".");if(c.length-a>3){c=c.substring(0,a+3)}else{if(a!=-1&&c.length-a==2){c=c+"0"}else{if(a==-1){c=c+".00"}}}}else{c="0.00"}document.write(c)}function getUserCookieValue(g,d){var f=getCookie(g);if(f==null){return null}var c="@";var b="~~~";var e=d+b+"(.*?)("+c+")";var a=f.match(e);if(a){return(unescape(a[1]))}else{return null}}function toggleDesc(c){var b=$("#description a");b.click(function(){$(this).parent().fadeOut(290,function(){$(this).siblings().fadeIn(290)})})}function bundleDesc(){$("#attributes").find("div[id*=item] a[id*=viewDesc]").toggle(function(){$(this).addClass("on");$(this).addClass("onDesc");$(this).parent().next().slideDown(250);$(this).html("Hide Description")},function(){$(this).removeClass("on");$(this).removeClass("onDesc");$(this).parent().next().slideUp(250);$(this).html("View Description")})}function getCookie(b){var a=document.cookie.match(b+"=(.*?)(;|$)");if(a){return(unescape(a[1]))}else{return null}}function isEmpty(a){if(a==null){return true}else{return !a.match(/[^\s]/)}}function showDD(){$(this).addClass("facet-on");$(this).children(".dd").slideDown()}function hideDD(){$(this).children(".dd").slideUp();$(this).removeClass("facet-on")}function validateQuantity(c,a){var b=c.value;if(a){b="1"}if((c==null)||(c.value.length==0)){alert("Quantity is a required field.");c.value=b;c.focus();return false}else{if(isNaN(c.value)){alert("Quantity must be a valid number.");c.value=b;c.focus();return false}else{if(c.value<1){alert("Quantity must be greater than zero");c.value=b;c.focus();return false}else{return true}}}}function validateAttrs(f,d,h,a){var b,e,g,c=false;for(b=0,l=d.length;b<l;b++){g=d[b];e=((f[b].id).split("-"))[2];if(e=="color"){if((g==null)||(g.value.length==0)||g.value=="00"){c=true;dispMsg(e,g,c)}}else{if(e=="size"){if((g==null)||(g.value.length==0)||(g.value=="00")){c=true;dispMsg(e,g,c)}}else{if(e=="strength"){if((g==null)||(g.value.length==0)||(g.value=="00")){c=true;dispMsg(e,g,c)}}}}}if(c){return false}else{c=validateQuantity(h,a);return c}}function validateAttr(d,f,e,a){var b,d,f,c=false;d=((d.id).split("-"))[2];if(d=="color"){if((f==null)||(f.value.length==0)||f.value==0){c=true;dispMsg(d,f,c)}}else{if(d=="size"){if((f==null)||(f.value.length==0)||(f.value<1)){c=true;dispMsg(d,f,c)}}else{if(d=="amount"){if((f==null)||(f.value.length==0)||(f.value<1)){c=true;dispMsg(d,f,c)}}else{if(d=="strength"){if((f==null)||(f.value.length==0)||f.value==0){c=true;dispMsg(d,f,c)}}}}}if(c){return false}else{c=validateQuantity(e,a);return c}}function dispMsg(b,c,a){if(a){alert("Valid "+b+" should be selected.");return false}else{return true}}function validateItemAttrs(d,c,e){if(typeof d=="string"&&typeof c=="string"){var a,f,b=true;for(a=0,l=e.length;a<l;a++){f=e[a];if(f.value>=1){b=false;if(f.type!="hidden"&&f.style.display!="none"&&!f.disabled){f.focus()}break}}if(b){alert("Quantity must be a valid positive whole number.");return false}else{return true}}}function validateQuantities(c){var a,d,b=false;for(a in c){d=c[a];trimMe(d);if((d==null)||(d.value.length==0)||isNaN(d.value)||d.value<1||!isPositiveWholeNumber(d.value)){b=true;d.focus();break}}if(b){alert("Quantity must be a valid positive whole number.");return false}else{return true}}function isPositiveWholeNumber(c){for(var a=0;a<c.length;a++){var b=c.charAt(a);if(b<"0"||b>"9"){return false}}return true}(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(e){var j=[],f=e(document),c=e.browser.msie&&parseInt(e.browser.version)===6&&typeof window.XMLHttpRequest!=="object",b=e.browser.msie&&parseInt(e.browser.version)===7,h=null,g=e(window),a=[];e.modal=function(k,d){return e.modal.impl.init(k,d)};e.modal.close=function(){e.modal.impl.close()};e.modal.focus=function(d){e.modal.impl.focus(d)};e.modal.setContainerDimensions=function(){e.modal.impl.setContainerDimensions()};e.modal.setPosition=function(){e.modal.impl.setPosition()};e.modal.update=function(d,k){e.modal.impl.update(d,k)};e.fn.modal=function(d){return e.modal.impl.init(this,d)};e.modal.defaults={appendTo:"body",focus:true,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:false,autoPosition:true,zIndex:1000,close:true,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:true,overlayClose:false,fixed:true,position:null,persist:false,modal:true,onOpen:null,onShow:null,onClose:null};e.modal.impl={d:{},init:function(m,d){var k=this;if(k.d.data){return false}h=e.browser.msie&&!e.boxModel;k.o=e.extend({},e.modal.defaults,d);k.zIndex=k.o.zIndex;k.occb=false;if(typeof m==="object"){m=m instanceof jQuery?m:e(m);k.d.placeholder=false;if(m.parent().parent().size()>0){m.before(e("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"}));k.d.placeholder=true;k.display=m.css("display");if(!k.o.persist){k.d.orig=m.clone(true)}}}else{if(typeof m==="string"||typeof m==="number"){m=e("<div></div>").html(m)}else{alert("SimpleModal Error: Unsupported data type: "+typeof m);return k}}k.create(m);m=null;k.open();if(e.isFunction(k.o.onShow)){k.o.onShow.apply(k,[k.d])}return k},create:function(k){var d=this;d.getDimensions();if(d.o.modal&&c){d.d.iframe=e('<iframe src="javascript:false;"></iframe>').css(e.extend(d.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:a[0],width:a[1],zIndex:d.o.zIndex,top:0,left:0})).appendTo(d.o.appendTo)}d.d.overlay=e("<div></div>").attr("id",d.o.overlayId).addClass("simplemodal-overlay").css(e.extend(d.o.overlayCss,{display:"none",opacity:d.o.opacity/100,height:d.o.modal?j[0]:0,width:d.o.modal?j[1]:0,position:"fixed",left:0,top:0,zIndex:d.o.zIndex+1})).appendTo(d.o.appendTo);d.d.container=e("<div></div>").attr("id",d.o.containerId).addClass("simplemodal-container").css(e.extend({position:d.o.fixed?"fixed":"absolute"},d.o.containerCss,{display:"none",zIndex:d.o.zIndex+2})).append(d.o.close&&d.o.closeHTML?e(d.o.closeHTML).addClass(d.o.closeClass):"").appendTo(d.o.appendTo);d.d.wrap=e("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(d.d.container);d.d.data=k.attr("id",k.attr("id")||d.o.dataId).addClass("simplemodal-data").css(e.extend(d.o.dataCss,{display:"none"})).appendTo("body");k=null;d.setContainerDimensions();d.d.data.appendTo(d.d.wrap);if(c||h){d.fixIE()}},bindEvents:function(){var d=this;e("."+d.o.closeClass).bind("click.simplemodal",function(k){k.preventDefault();d.close()});if(d.o.modal&&d.o.close&&d.o.overlayClose){d.d.overlay.bind("click.simplemodal",function(k){k.preventDefault();d.close()})}f.bind("keydown.simplemodal",function(k){if(d.o.modal&&k.keyCode===9){d.watchTab(k)}else{if((d.o.close&&d.o.escClose)&&k.keyCode===27){k.preventDefault();d.close()}}});g.bind("resize.simplemodal orientationchange.simplemodal",function(){d.getDimensions();d.o.autoResize?d.setContainerDimensions():d.o.autoPosition&&d.setPosition();if(c||h){d.fixIE()}else{if(d.o.modal){d.d.iframe&&d.d.iframe.css({height:a[0],width:a[1]});d.d.overlay.css({height:j[0],width:j[1]})}}})},unbindEvents:function(){e("."+this.o.closeClass).unbind("click.simplemodal");f.unbind("keydown.simplemodal");g.unbind(".simplemodal");this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var d=this,k=d.o.position;e.each([d.d.iframe||null,!d.o.modal?null:d.d.overlay,d.d.container.css("position")==="fixed"?d.d.container:null],function(x,p){if(p){var v="document.body.clientHeight",z="document.body.clientWidth",B="document.body.scrollHeight",y="document.body.scrollLeft",t="document.body.scrollTop",o="document.body.scrollWidth",n="document.documentElement.clientHeight",w="document.documentElement.clientWidth",u="document.documentElement.scrollLeft",C="document.documentElement.scrollTop",D=p[0].style;D.position="absolute";if(x<2){D.removeExpression("height");D.removeExpression("width");D.setExpression("height",""+B+" > "+v+" ? "+B+" : "+v+' + "px"');D.setExpression("width",""+o+" > "+z+" ? "+o+" : "+z+' + "px"')}else{var r,m;if(k&&k.constructor===Array){var A=k[0]?typeof k[0]==="number"?k[0].toString():k[0].replace(/px/,""):p.css("top").replace(/px/,"");r=A.indexOf("%")===-1?A+" + (t = "+C+" ? "+C+" : "+t+') + "px"':parseInt(A.replace(/%/,""))+" * (("+n+" || "+v+") / 100) + (t = "+C+" ? "+C+" : "+t+') + "px"';if(k[1]){var q=typeof k[1]==="number"?k[1].toString():k[1].replace(/px/,"");m=q.indexOf("%")===-1?q+" + (t = "+u+" ? "+u+" : "+y+') + "px"':parseInt(q.replace(/%/,""))+" * (("+w+" || "+z+") / 100) + (t = "+u+" ? "+u+" : "+y+') + "px"'}}else{r="("+n+" || "+v+") / 2 - (this.offsetHeight / 2) + (t = "+C+" ? "+C+" : "+t+') + "px"';m="("+w+" || "+z+") / 2 - (this.offsetWidth / 2) + (t = "+u+" ? "+u+" : "+y+') + "px"'}D.removeExpression("top");D.removeExpression("left");D.setExpression("top",r);D.setExpression("left",m)}}})},focus:function(n){var k=this,m=n&&e.inArray(n,["first","last"])!==-1?n:"first";var d=e(":input:enabled:visible:"+m,k.d.wrap);setTimeout(function(){d.length>0?d.focus():k.d.wrap.focus()},10)},getDimensions:function(){var k=this,d=typeof window.innerHeight==="undefined"?g.height():window.innerHeight;j=[f.height(),f.width()];a=[d,g.width()]},getVal:function(k,m){return k?(typeof k==="number"?k:k==="auto"?0:k.indexOf("%")>0?((parseInt(k.replace(/%/,""))/100)*(m==="h"?a[0]:a[1])):parseInt(k.replace(/px/,""))):null},update:function(d,m){var k=this;if(!k.d.data){return false}k.d.origHeight=k.getVal(d,"h");k.d.origWidth=k.getVal(m,"w");k.d.data.hide();d&&k.d.container.css("height",d);m&&k.d.container.css("width",m);k.setContainerDimensions();k.d.data.show();k.o.focus&&k.focus();k.unbindEvents();k.bindEvents()},setContainerDimensions:function(){var w=this,n=c||b;var d=w.d.origHeight?w.d.origHeight:e.browser.opera?w.d.container.height():w.getVal(n?w.d.container[0].currentStyle.height:w.d.container.css("height"),"h"),m=w.d.origWidth?w.d.origWidth:e.browser.opera?w.d.container.width():w.getVal(n?w.d.container[0].currentStyle.width:w.d.container.css("width"),"w"),r=w.d.data.outerHeight(true),k=w.d.data.outerWidth(true);w.d.origHeight=w.d.origHeight||d;w.d.origWidth=w.d.origWidth||m;var o=w.o.maxHeight?w.getVal(w.o.maxHeight,"h"):null,t=w.o.maxWidth?w.getVal(w.o.maxWidth,"w"):null,q=o&&o<a[0]?o:a[0],v=t&&t<a[1]?t:a[1];var p=w.o.minHeight?w.getVal(w.o.minHeight,"h"):"auto";if(!d){if(!r){d=p}else{if(r>q){d=q}else{if(w.o.minHeight&&p!=="auto"&&r<p){d=p}else{d=r}}}}else{d=w.o.autoResize&&d>q?q:d<p?p:d}var u=w.o.minWidth?w.getVal(w.o.minWidth,"w"):"auto";if(!m){if(!k){m=u}else{if(k>v){m=v}else{if(w.o.minWidth&&u!=="auto"&&k<u){m=u}else{m=k}}}}else{m=w.o.autoResize&&m>v?v:m<u?u:m}w.d.container.css({height:d,width:m});w.d.wrap.css({overflow:(r>d||k>m)?"auto":"visible"});w.o.autoPosition&&w.setPosition()},setPosition:function(){var m=this,o,n,p=(a[0]/2)-(m.d.container.outerHeight(true)/2),k=(a[1]/2)-(m.d.container.outerWidth(true)/2),d=m.d.container.css("position")!=="fixed"?g.scrollTop():0;if(m.o.position&&Object.prototype.toString.call(m.o.position)==="[object Array]"){o=d+(m.o.position[0]||p);n=m.o.position[1]||k}else{o=d+p;n=k}m.d.container.css({left:n,top:o})},watchTab:function(k){var d=this;if(e(k.target).parents(".simplemodal-container").length>0){d.inputs=e(":input:enabled:visible:first, :input:enabled:visible:last",d.d.data[0]);if((!k.shiftKey&&k.target===d.inputs[d.inputs.length-1])||(k.shiftKey&&k.target===d.inputs[0])||d.inputs.length===0){k.preventDefault();var m=k.shiftKey?"last":"first";d.focus(m)}}else{k.preventDefault();d.focus()}},open:function(){var d=this;d.d.iframe&&d.d.iframe.show();if(e.isFunction(d.o.onOpen)){d.o.onOpen.apply(d,[d.d])}else{d.d.overlay.show();d.d.container.show();d.d.data.show()}d.o.focus&&d.focus();d.bindEvents()},close:function(){var d=this;if(!d.d.data){return false}d.unbindEvents();if(e.isFunction(d.o.onClose)&&!d.occb){d.occb=true;d.o.onClose.apply(d,[d.d])}else{if(d.d.placeholder){var k=e("#simplemodal-placeholder");if(d.o.persist){k.replaceWith(d.d.data.removeClass("simplemodal-data").css("display",d.display))}else{d.d.data.hide().remove();k.replaceWith(d.d.orig)}}else{d.d.data.hide().remove()}d.d.container.hide().remove();d.d.overlay.hide();d.d.iframe&&d.d.iframe.hide().remove();d.d.overlay.remove();d.d={}}}}}));(function(c){var b={},a={};c.manageAjax=(function(){function e(g,h){b[g]=new c.manageAjax._manager(g,h);return b[g]}function d(g){if(b[g]){b[g].clear(true);delete b[g]}}var f={create:e,destroy:d};return f})();c.manageAjax._manager=function(d,e){this.requests={};this.inProgress=0;this.name=d;this.qName=d;this.opts=c.extend({},c.manageAjax.defaults,e);if(e&&e.queue&&e.queue!==true&&typeof e.queue==="string"&&e.queue!=="clear"){this.qName=e.queue}};c.manageAjax._manager.prototype={add:function(d,e){if(typeof d=="object"){e=d}else{if(typeof d=="string"){e=c.extend(e||{},{url:d})}}e=c.extend({},this.opts,e);var h=e.complete||c.noop,g=e.success||c.noop,m=e.beforeSend||c.noop,j=e.error||c.noop,p=(typeof e.data=="string")?e.data:c.param(e.data||{}),n=e.type+e.url+p,k=this,f=this._createAjax(n,e,g,h);if(e.preventDoubleRequests&&e.queueDuplicateRequests){if(e.preventDoubleRequests){e.queueDuplicateRequests=false}setTimeout(function(){throw ("preventDoubleRequests and queueDuplicateRequests can't be both true")},0)}if(this.requests[n]&&e.preventDoubleRequests){return}f.xhrID=n;e.xhrID=n;e.beforeSend=function(r,q){var o=m.call(this,r,q);if(o===false){k._removeXHR(n)}r=null;return o};e.complete=function(q,o){k._complete.call(k,this,h,q,o,n,e);q=null};e.success=function(q,o,r){k._success.call(k,this,g,q,o,r,e);r=null};e.error=function(q,o,t){var r="",s="";if(o!=="timeout"&&q){r=q.status;s=q.responseXML||q.responseText}if(j){j.call(this,q,o,t,e)}else{setTimeout(function(){throw o+"| status: "+r+" | URL: "+e.url+" | data: "+p+" | thrown: "+t+" | response: "+s},0)}q=null};if(e.queue==="clear"){c(document).clearQueue(this.qName)}if(e.queue||(e.queueDuplicateRequests&&this.requests[n])){c.queue(document,this.qName,f);if(this.inProgress<e.maxRequests&&(!this.requests[n]||!e.queueDuplicateRequests)){c.dequeue(document,this.qName)}return n}return f()},_createAjax:function(h,g,f,d){var e=this;return function(){if(g.beforeCreate.call(g.context||e,h,g)===false){return}e.inProgress++;if(e.inProgress===1){c.event.trigger(e.name+"AjaxStart")}if(g.cacheResponse&&a[h]){if(!a[h].cacheTTL||a[h].cacheTTL<0||((new Date().getTime()-a[h].timestamp)<a[h].cacheTTL)){e.requests[h]={};setTimeout(function(){e._success.call(e,g.context||g,f,a[h]._successData,"success",a[h],g);e._complete.call(e,g.context||g,d,a[h],"success",h,g)},0)}else{delete a[h]}}if(!g.cacheResponse||!a[h]){if(g.async){e.requests[h]=c.ajax(g)}else{c.ajax(g)}}return h}},_removeXHR:function(d){if(this.opts.queue||this.opts.queueDuplicateRequests){c.dequeue(document,this.qName)}this.inProgress--;this.requests[d]=null;delete this.requests[d]},clearCache:function(){a={}},_isAbort:function(g,d,f){if(!f.abortIsNoSuccess||(!g&&!d)){return false}var e=!!((!g||g.readyState===0||this.lastAbort===f.xhrID));g=null;return e},_complete:function(e,j,h,d,f,g){if(this._isAbort(h,d,g)){d="abort";g.abort.call(e,h,d,g)}j.call(e,h,d,g);c.event.trigger(this.name+"AjaxComplete",[h,d,g]);if(g.domCompleteTrigger){c(g.domCompleteTrigger).trigger(this.name+"DOMComplete",[h,d,g]).trigger("DOMComplete",[h,d,g])}this._removeXHR(f);if(!this.inProgress){c.event.trigger(this.name+"AjaxStop")}h=null},_success:function(e,p,k,j,n,g){var m=this;if(this._isAbort(n,j,g)){n=null;return}if(g.abortOld){c.each(this.requests,function(o){if(o===g.xhrID){return false}m.abort(o)})}if(g.cacheResponse&&!a[g.xhrID]){if(!n){n={}}a[g.xhrID]={status:n.status,statusText:n.statusText,responseText:n.responseText,responseXML:n.responseXML,_successData:k,cacheTTL:g.cacheTTL,timestamp:new Date().getTime()};if("getAllResponseHeaders" in n){var f=n.getAllResponseHeaders();var h;var d=function(){if(h){return}h={};c.each(f.split("\n"),function(q,r){var o=r.indexOf(":");h[r.substr(0,o)]=r.substr(o+2)})};c.extend(a[g.xhrID],{getAllResponseHeaders:function(){return f},getResponseHeader:function(o){d();return(o in h)?h[o]:null}})}}p.call(e,k,j,n,g);c.event.trigger(this.name+"AjaxSuccess",[n,g,k]);if(g.domSuccessTrigger){c(g.domSuccessTrigger).trigger(this.name+"DOMSuccess",[k,g]).trigger("DOMSuccess",[k,g])}n=null},getData:function(e){if(e){var d=this.requests[e];if(!d&&this.opts.queue){d=c.grep(c(document).queue(this.qName),function(g,f){return(g.xhrID===e)})[0]}return d}return{requests:this.requests,queue:(this.opts.queue)?c(document).queue(this.qName):[],inProgress:this.inProgress}},abort:function(g){var f;if(g){f=this.getData(g);if(f&&f.abort){this.lastAbort=g;f.abort();this.lastAbort=false}else{c(document).queue(this.qName,c.grep(c(document).queue(this.qName),function(j,h){return(j!==f)}))}f=null;return}var e=this,d=[];c.each(this.requests,function(h){d.push(h)});c.each(d,function(h,j){e.abort(j)})},clear:function(d){c(document).clearQueue(this.qName);if(d){this.abort()}}};c.manageAjax._manager.prototype.getXHR=c.manageAjax._manager.prototype.getData;c.manageAjax.defaults={beforeCreate:c.noop,abort:c.noop,abortIsNoSuccess:true,maxRequests:1,cacheResponse:false,async:true,domCompleteTrigger:false,domSuccessTrigger:false,preventDoubleRequests:true,queueDuplicateRequests:false,cacheTTL:-1,queue:false};c.each(c.manageAjax._manager.prototype,function(e,d){if(e.indexOf("_")===0||!c.isFunction(d)){return}c.manageAjax[e]=function(g,h){if(!b[g]){if(e==="add"){c.manageAjax.create(g,h)}else{return}}var f=Array.prototype.slice.call(arguments,1);b[g][e].apply(b[g],f)}})})(jQuery);

