//********************************************************************
//*-------------------------------------------------------------------
//*	This file combines five javascript files into one:
//*
//*		* jQuery hoverIntent plugin
//*		* jQuery cookie plugin
//*		* util.js (standard site-wide utilites)
//*		* validation.js (qty and add-to-cart validation)
//*		* jQuery simpleModal plugin 1.4.3
//*		* jQuery ajaxManager plugin
//*
//*	These files are being included here, in global.js, as every
//* page needs these files.
//*-------------------------------------------------------------------
//********************************************************************

(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:250};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev])};var handleHover=function(e){var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)}if(e.type=="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}}};return this.bind('mouseenter',handleHover).bind('mouseleave',handleHover)}})(jQuery);jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options.expires=-1}var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000))}else{date=options.expires}expires='; expires='+date.toUTCString()}var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('')}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue}};function containsDoubleByte(target){var str=new String(target);var oneByteMax=0x007F;for(var i=0;i<str.length;i++){chr=str.charCodeAt(i);if(chr>oneByteMax){return true}}return false}function isValidEmail(strEmail){if(containsDoubleByte(strEmail)){return false}if(strEmail.length==0){return true}else if(strEmail.length<5){return false}else{if(strEmail.indexOf(" ")>0){return false}else{if(strEmail.indexOf("@")<1){return false}else{if(strEmail.lastIndexOf(".")<(strEmail.indexOf("@")+2)){return false}else{if(strEmail.lastIndexOf(".")>=strEmail.length-2){return false}}}}}return true}function isValidUTF8length(UTF16String,maxlength){if(utf8StringByteLength(UTF16String)>maxlength)return false;else return true}function utf8StringByteLength(UTF16String){if(UTF16String===null)return 0;var str=String(UTF16String);var oneByteMax=0x007F;var twoByteMax=0x07FF;var byteSize=str.length;for(i=0;i<str.length;i++){chr=str.charCodeAt(i);if(chr>oneByteMax)byteSize=byteSize+1;if(chr>twoByteMax)byteSize=byteSize+1}return byteSize}function fieldClear(obj){if(obj.Val){if(obj.value==''){obj.value=obj.Val;obj.Val=null;obj.first=null}else{obj.Val=null}}else if(!obj.first){obj.Val=obj.value;obj.value='';obj.first='true'}}function trimMe(field){var value=field.value;value=value.replace(/^\s+|\s+$/g,"");field.value=value}function convertToLowerCase(field){var value=field.value;value=value.toLowerCase();field.value=value}var busy=false;function Add2ShopCart(form){if(!busy){busy=true;form.action="OrderItemAdd";form.URL.value='OrderCalculate?updatePrices=1&calculationUsageId=-1&dummaryparam=1&URL=ProductDisplay';form.submit()}}function Add2WishList(form){var inputsArr=form.getElementsByTagName("input");var i,inputID;for(i in inputsArr){inputID=inputsArr[i].id;if(inputID!=null&&inputID.indexOf("quantity")!=-1){inputsArr[i].value=1}}if(!busy){busy=true;form.action="InterestItemAdd";form.URL.value='InterestItemDisplay';form.submit()}}function displayIntegerValue(cookieName,keyName){var str="0";str=getUserCookieValue(cookieName,keyName);if(str==null)str="0";document.write(str)}function displayAmountValue(cookieName,keyName){var str="0.00";str=getUserCookieValue(cookieName,keyName);if(str!=null){var iDotIndex=str.indexOf(".");if(str.length-iDotIndex>3)str=str.substring(0,iDotIndex+3);else if(iDotIndex!=-1&&str.length-iDotIndex==2)str=str+"0";else if(iDotIndex==-1)str=str+".00"}else{str="0.00"}document.write(str)}function getUserCookieValue(cookieName,keyName){var cookieValue=getCookie(cookieName);if(cookieValue==null)return null;var nameDelimiter="@";var pairDelimiter="~~~";var matchPattern=keyName+pairDelimiter+'(.*?)('+nameDelimiter+')';var results=cookieValue.match(matchPattern);if(results)return(unescape(results[1]));else return null}function toggleDesc(i){var a=$("#description a");a.click(function(){$(this).parent().fadeOut(290,function(){$(this).siblings().fadeIn(290)})})}function bundleDesc(){$("#attributes").find("div[id*=item] a[id*=viewDesc1]").toggle(function(){$(this).addClass("on");$(this).addClass("onDesc");$(this).parent().next().slideDown(250);$(this).html("Hide Description")},function(){$(this).removeClass("on");$(this).removeClass("onDesc");$(this).parent().next().slideUp(250);$(this).html("View Description")})}function getCookie(cookieName){var results=document.cookie.match(cookieName+'=(.*?)(;|$)');if(results)return(unescape(results[1]));else return null}function isEmpty(inputStr){if(inputStr==null){return true}else{return!inputStr.match(/[^\s]/)}}function showDD(){$(this).addClass("facet-on");$(this).children(".dd").slideDown()}function hideDD(){$(this).children(".dd").slideUp();$(this).removeClass("facet-on")}function validateQuantity(qty,resetQtyValue){var defaultQtyValue=qty.value;if(resetQtyValue){defaultQtyValue="1"}if((qty==null)||(qty.value.length==0)){alert("Quantity is a required field.");qty.value=defaultQtyValue;qty.focus();return false}else if(isNaN(qty.value)){alert("Quantity must be a valid number.");qty.value=defaultQtyValue;qty.focus();return false}else if(qty.value<1){alert("Quantity must be greater than zero");qty.value=defaultQtyValue;qty.focus();return false}else{return true}}function validateAttrs(attrNArr,attrVArr,qty,resetAttrValue){var i,attrN,attrV,isError=false;for(i=0,l=attrVArr.length;i<l;i++){attrV=attrVArr[i];attrN=((attrNArr[i].id).split("-"))[2];if(attrN=="formula"){if((attrV==null)||(attrV.value.length==0)||attrV.value=="*"){isError=true;dispMsg(attrN,attrV,isError)}}else if(attrN=="color"){if((attrV==null)||(attrV.value.length==0)||attrV.value=="*"){isError=true;dispMsg(attrN,attrV,isError)}}else if(attrN=="size"){if((attrV==null)||(attrV.value.length==0)||(attrV.value=="*")){isError=true;dispMsg(attrN,attrV,isError)}}else if(attrN=="strength"){if((attrV==null)||(attrV.value.length==0)||(attrV.value=="*")){isError=true;dispMsg(attrN,attrV,isError)}}}if(isError){return false}else{isError=validateQuantity(qty,resetAttrValue);return isError}}function validateAttr(attrN,attrV,qty,resetAttrValue){var i,attrN,attrV,isError=false;attrN=((attrN.id).split("-"))[2];if(attrN=="formula"){if((attrV==null)||(attrV.value.length==0)||attrV.value==0 || attrV.value=="*"){isError=true;dispMsg(attrN,attrV,isError)}}else if(attrN=="color"){if((attrV==null)||(attrV.value.length==0)||attrV.value==0 || attrV.value=="*"){isError=true;dispMsg(attrN,attrV,isError)}}else if(attrN=="size"){if((attrV==null)||(attrV.value.length==0)||(attrV.value=="*")){isError=true;dispMsg(attrN,attrV,isError)}}else if(attrN=="amount"){if((attrV==null)||(attrV.value.length==0)||(attrV.value=="*")){isError=true;dispMsg(attrN,attrV,isError)}}else if(attrN=="strength"){if((attrV==null)||(attrV.value.length==0)||attrV.value==0 || attrV.value=="*"){isError=true;dispMsg(attrN,attrV,isError)}}if(isError){return false}else{isError=validateQuantity(qty,resetAttrValue);return isError}}function dispMsg(attrN,attrV,isError){if(isError){alert("Valid "+attrN+" should be selected.");return false}else{return true}}function validateItemAttrs(attrNArr,attrVArr,qtyArr){if(typeof attrNArr=="string"&&typeof attrVArr=="string"){var i,qty,isError=true;for(i=0,l=qtyArr.length;i<l;i++){qty=qtyArr[i];if(qty.value>=1){isError=false;if(qty.type!="hidden"&&qty.style.display!="none"&&!qty.disabled){qty.focus()}break}}if(isError){alert("Quantity must be a valid positive whole number.");return false}else{return true}}}function validateQuantities(qtyArr){var i,qty,isError=false;for(i in qtyArr){qty=qtyArr[i];trimMe(qty);if((qty==null)||(qty.value.length==0)||isNaN(qty.value)||qty.value<1||!isPositiveWholeNumber(qty.value)){isError=true;qty.focus();break}}if(isError){alert("Quantity must be a valid positive whole number.");return false}else{return true}}function isPositiveWholeNumber(val){for(var i=0;i<val.length;i++){var ch=val.charAt(i);if(ch<"0"||ch>"9"){return false}}return true};(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory)}else{factory(jQuery)}}(function($){var d=[],doc=$(document),ie6=$.browser.msie&&parseInt($.browser.version)===6&&typeof window['XMLHttpRequest']!=='object',ie7=$.browser.msie&&parseInt($.browser.version)===7,ieQuirks=null,wndw=$(window),w=[];$.modal=function(data,options){return $.modal.impl.init(data,options)};$.modal.close=function(){$.modal.impl.close()};$.modal.focus=function(pos){$.modal.impl.focus(pos)};$.modal.setContainerDimensions=function(){$.modal.impl.setContainerDimensions()};$.modal.setPosition=function(){$.modal.impl.setPosition()};$.modal.update=function(height,width){$.modal.impl.update(height,width)};$.fn.modal=function(options){return $.modal.impl.init(this,options)};$.modal.defaults={appendTo:'body',focus:true,opacity:50,overlayId:'simplemodal-overlay',overlayCss:{},containerId:'simplemodal-container',containerCss:{},dataId:'simplemodal-data',dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:false,autoPosition:true,zIndex:1000,close:true,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:'simplemodal-close',escClose:true,overlayClose:false,fixed:true,position:null,persist:false,modal:true,onOpen:null,onShow:null,onClose:null};$.modal.impl={d:{},init:function(data,options){var s=this;if(s.d.data){return false}ieQuirks=$.browser.msie&&!$.support.boxModel;s.o=$.extend({},$.modal.defaults,options);s.zIndex=s.o.zIndex;s.occb=false;if(typeof data==='object'){data=data instanceof $?data:$(data);s.d.placeholder=false;if(data.parent().parent().size()>0){data.before($('<span></span>').attr('id','simplemodal-placeholder').css({display:'none'}));s.d.placeholder=true;s.display=data.css('display');if(!s.o.persist){s.d.orig=data.clone(true)}}}else if(typeof data==='string'||typeof data==='number'){data=$('<div></div>').html(data)}else{alert('SimpleModal Error: Unsupported data type: '+typeof data);return s}s.create(data);data=null;s.open();if($.isFunction(s.o.onShow)){s.o.onShow.apply(s,[s.d])}return s},create:function(data){var s=this;s.getDimensions();if(s.o.modal&&ie6){s.d.iframe=$('<iframe src="javascript:false;"></iframe>').css($.extend(s.o.iframeCss,{display:'none',opacity:0,position:'fixed',height:w[0],width:w[1],zIndex:s.o.zIndex,top:0,left:0})).appendTo(s.o.appendTo)}s.d.overlay=$('<div></div>').attr('id',s.o.overlayId).addClass('simplemodal-overlay').css($.extend(s.o.overlayCss,{display:'none',opacity:s.o.opacity/100,height:s.o.modal?d[0]:0,width:s.o.modal?d[1]:0,position:'fixed',left:0,top:0,zIndex:s.o.zIndex+1})).appendTo(s.o.appendTo);s.d.container=$('<div></div>').attr('id',s.o.containerId).addClass('simplemodal-container').css($.extend({position:s.o.fixed?'fixed':'absolute'},s.o.containerCss,{display:'none',zIndex:s.o.zIndex+2})).append(s.o.close&&s.o.closeHTML?$(s.o.closeHTML).addClass(s.o.closeClass):'').appendTo(s.o.appendTo);s.d.wrap=$('<div></div>').attr('tabIndex',-1).addClass('simplemodal-wrap').css({height:'100%',outline:0,width:'100%'}).appendTo(s.d.container);s.d.data=data.attr('id',data.attr('id')||s.o.dataId).addClass('simplemodal-data').css($.extend(s.o.dataCss,{display:'none'})).appendTo('body');data=null;s.setContainerDimensions();s.d.data.appendTo(s.d.wrap);if(ie6||ieQuirks){s.fixIE()}},bindEvents:function(){var s=this;$('.'+s.o.closeClass).bind('click.simplemodal',function(e){e.preventDefault();s.close()});if(s.o.modal&&s.o.close&&s.o.overlayClose){s.d.overlay.bind('click.simplemodal',function(e){e.preventDefault();s.close()})}doc.bind('keydown.simplemodal',function(e){if(s.o.modal&&e.keyCode===9){s.watchTab(e)}else if((s.o.close&&s.o.escClose)&&e.keyCode===27){e.preventDefault();s.close()}});wndw.bind('resize.simplemodal orientationchange.simplemodal',function(){s.getDimensions();s.o.autoResize?s.setContainerDimensions():s.o.autoPosition&&s.setPosition();if(ie6||ieQuirks){s.fixIE()}else if(s.o.modal){s.d.iframe&&s.d.iframe.css({height:w[0],width:w[1]});s.d.overlay.css({height:d[0],width:d[1]})}})},unbindEvents:function(){$('.'+this.o.closeClass).unbind('click.simplemodal');doc.unbind('keydown.simplemodal');wndw.unbind('.simplemodal');this.d.overlay.unbind('click.simplemodal')},fixIE:function(){var s=this,p=s.o.position;$.each([s.d.iframe||null,!s.o.modal?null:s.d.overlay,s.d.container.css('position')==='fixed'?s.d.container:null],function(i,el){if(el){var bch='document.body.clientHeight',bcw='document.body.clientWidth',bsh='document.body.scrollHeight',bsl='document.body.scrollLeft',bst='document.body.scrollTop',bsw='document.body.scrollWidth',ch='document.documentElement.clientHeight',cw='document.documentElement.clientWidth',sl='document.documentElement.scrollLeft',st='document.documentElement.scrollTop',s=el[0].style;s.position='absolute';if(i<2){s.removeExpression('height');s.removeExpression('width');s.setExpression('height',''+bsh+' > '+bch+' ? '+bsh+' : '+bch+' + "px"');s.setExpression('width',''+bsw+' > '+bcw+' ? '+bsw+' : '+bcw+' + "px"')}else{var te,le;if(p&&p.constructor===Array){var top=p[0]?typeof p[0]==='number'?p[0].toString():p[0].replace(/px/,''):el.css('top').replace(/px/,'');te=top.indexOf('%')===-1?top+' + (t = '+st+' ? '+st+' : '+bst+') + "px"':parseInt(top.replace(/%/,''))+' * (('+ch+' || '+bch+') / 100) + (t = '+st+' ? '+st+' : '+bst+') + "px"';if(p[1]){var left=typeof p[1]==='number'?p[1].toString():p[1].replace(/px/,'');le=left.indexOf('%')===-1?left+' + (t = '+sl+' ? '+sl+' : '+bsl+') + "px"':parseInt(left.replace(/%/,''))+' * (('+cw+' || '+bcw+') / 100) + (t = '+sl+' ? '+sl+' : '+bsl+') + "px"'}}else{te='('+ch+' || '+bch+') / 2 - (this.offsetHeight / 2) + (t = '+st+' ? '+st+' : '+bst+') + "px"';le='('+cw+' || '+bcw+') / 2 - (this.offsetWidth / 2) + (t = '+sl+' ? '+sl+' : '+bsl+') + "px"'}s.removeExpression('top');s.removeExpression('left');s.setExpression('top',te);s.setExpression('left',le)}}})},focus:function(pos){var s=this,p=pos&&$.inArray(pos,['first','last'])!==-1?pos:'first';var input=$(':input:enabled:visible:'+p,s.d.wrap);setTimeout(function(){input.length>0?input.focus():s.d.wrap.focus()},10)},getDimensions:function(){var s=this,h=typeof window.innerHeight==='undefined'?wndw.height():window.innerHeight;d=[doc.height(),doc.width()];w=[h,wndw.width()]},getVal:function(v,d){return v?(typeof v==='number'?v:v==='auto'?0:v.indexOf('%')>0?((parseInt(v.replace(/%/,''))/100)*(d==='h'?w[0]:w[1])):parseInt(v.replace(/px/,''))):null},update:function(height,width){var s=this;if(!s.d.data){return false}s.d.origHeight=s.getVal(height,'h');s.d.origWidth=s.getVal(width,'w');s.d.data.hide();height&&s.d.container.css('height',height);width&&s.d.container.css('width',width);s.setContainerDimensions();s.d.data.show();s.o.focus&&s.focus();s.unbindEvents();s.bindEvents()},setContainerDimensions:function(){var s=this,badIE=ie6||ie7;var ch=s.d.origHeight?s.d.origHeight:$.browser.opera?s.d.container.height():s.getVal(badIE?s.d.container[0].currentStyle['height']:s.d.container.css('height'),'h'),cw=s.d.origWidth?s.d.origWidth:$.browser.opera?s.d.container.width():s.getVal(badIE?s.d.container[0].currentStyle['width']:s.d.container.css('width'),'w'),dh=s.d.data.outerHeight(true),dw=s.d.data.outerWidth(true);s.d.origHeight=s.d.origHeight||ch;s.d.origWidth=s.d.origWidth||cw;var mxoh=s.o.maxHeight?s.getVal(s.o.maxHeight,'h'):null,mxow=s.o.maxWidth?s.getVal(s.o.maxWidth,'w'):null,mh=mxoh&&mxoh<w[0]?mxoh:w[0],mw=mxow&&mxow<w[1]?mxow:w[1];var moh=s.o.minHeight?s.getVal(s.o.minHeight,'h'):'auto';if(!ch){if(!dh){ch=moh}else{if(dh>mh){ch=mh}else if(s.o.minHeight&&moh!=='auto'&&dh<moh){ch=moh}else{ch=dh}}}else{ch=s.o.autoResize&&ch>mh?mh:ch<moh?moh:ch}var mow=s.o.minWidth?s.getVal(s.o.minWidth,'w'):'auto';if(!cw){if(!dw){cw=mow}else{if(dw>mw){cw=mw}else if(s.o.minWidth&&mow!=='auto'&&dw<mow){cw=mow}else{cw=dw}}}else{cw=s.o.autoResize&&cw>mw?mw:cw<mow?mow:cw}s.d.container.css({height:ch,width:cw});s.d.wrap.css({overflow:(dh>ch||dw>cw)?'auto':'visible'});s.o.autoPosition&&s.setPosition()},setPosition:function(){var s=this,top,left,hc=(w[0]/2)-(s.d.container.outerHeight(true)/2),vc=(w[1]/2)-(s.d.container.outerWidth(true)/2),st=s.d.container.css('position')!=='fixed'?wndw.scrollTop():0;if(s.o.position&&Object.prototype.toString.call(s.o.position)==='[object Array]'){top=st+(s.o.position[0]||hc);left=s.o.position[1]||vc}else{top=st+hc;left=vc}s.d.container.css({left:left,top:top})},watchTab:function(e){var s=this;if($(e.target).parents('.simplemodal-container').length>0){s.inputs=$(':input:enabled:visible:first, :input:enabled:visible:last',s.d.data[0]);if((!e.shiftKey&&e.target===s.inputs[s.inputs.length-1])||(e.shiftKey&&e.target===s.inputs[0])||s.inputs.length===0){e.preventDefault();var pos=e.shiftKey?'last':'first';s.focus(pos)}}else{e.preventDefault();s.focus()}},open:function(){var s=this;s.d.iframe&&s.d.iframe.show();if($.isFunction(s.o.onOpen)){s.o.onOpen.apply(s,[s.d])}else{s.d.overlay.show();s.d.container.show();s.d.data.show()}s.o.focus&&s.focus();s.bindEvents()},close:function(){var s=this;if(!s.d.data){return false}s.unbindEvents();if($.isFunction(s.o.onClose)&&!s.occb){s.occb=true;s.o.onClose.apply(s,[s.d])}else{if(s.d.placeholder){var ph=$('#simplemodal-placeholder');if(s.o.persist){ph.replaceWith(s.d.data.removeClass('simplemodal-data').css('display',s.display))}else{s.d.data.hide().remove();ph.replaceWith(s.d.orig)}}else{s.d.data.hide().remove()}s.d.container.hide().remove();s.d.overlay.hide();s.d.iframe&&s.d.iframe.hide().remove();s.d.overlay.remove();s.d={}}}}}));(function($){"use strict";var managed={},cache={};$.manageAjax=(function(){function create(name,opts){managed[name]=new $.manageAjax._manager(name,opts);return managed[name]}function destroy(name){if(managed[name]){managed[name].clear(true);delete managed[name]}}var publicFns={create:create,destroy:destroy};return publicFns})();$.manageAjax._manager=function(name,opts){this.requests={};this.inProgress=0;this.name=name;this.qName=name;this.opts=$.extend({},$.manageAjax.defaults,opts);if(opts&&opts.queue&&opts.queue!==true&&typeof opts.queue==='string'&&opts.queue!=='clear'){this.qName=opts.queue}};$.manageAjax._manager.prototype={add:function(url,o){if(typeof url=='object'){o=url}else if(typeof url=='string'){o=$.extend(o||{},{url:url})}o=$.extend({},this.opts,o);var origCom=o.complete||$.noop,origSuc=o.success||$.noop,beforeSend=o.beforeSend||$.noop,origError=o.error||$.noop,strData=(typeof o.data=='string')?o.data:$.param(o.data||{}),xhrID=o.type+o.url+strData,that=this,ajaxFn=this._createAjax(xhrID,o,origSuc,origCom);if(o.preventDoubleRequests&&o.queueDuplicateRequests){if(o.preventDoubleRequests){o.queueDuplicateRequests=false}setTimeout(function(){throw("preventDoubleRequests and queueDuplicateRequests can't be both true");},0)}if(this.requests[xhrID]&&o.preventDoubleRequests){return}ajaxFn.xhrID=xhrID;o.xhrID=xhrID;o.beforeSend=function(xhr,opts){var ret=beforeSend.call(this,xhr,opts);if(ret===false){that._removeXHR(xhrID)}xhr=null;return ret};o.complete=function(xhr,status){that._complete.call(that,this,origCom,xhr,status,xhrID,o);xhr=null};o.success=function(data,status,xhr){that._success.call(that,this,origSuc,data,status,xhr,o);xhr=null};o.error=function(ahr,status,errorStr){var httpStatus='',content='';if(status!=='timeout'&&ahr){httpStatus=ahr.status;content=ahr.responseXML||ahr.responseText}if(origError){origError.call(this,ahr,status,errorStr,o)}else{setTimeout(function(){throw status+'| status: '+httpStatus+' | URL: '+o.url+' | data: '+strData+' | thrown: '+errorStr+' | response: '+content;},0)}ahr=null};if(o.queue==='clear'){$(document).clearQueue(this.qName)}if(o.queue||(o.queueDuplicateRequests&&this.requests[xhrID])){$.queue(document,this.qName,ajaxFn);if(this.inProgress<o.maxRequests&&(!this.requests[xhrID]||!o.queueDuplicateRequests)){$.dequeue(document,this.qName)}return xhrID}return ajaxFn()},_createAjax:function(id,o,origSuc,origCom){var that=this;return function(){if(o.beforeCreate.call(o.context||that,id,o)===false){return}that.inProgress++;if(that.inProgress===1){$.event.trigger(that.name+'AjaxStart')}if(o.cacheResponse&&cache[id]){if(!cache[id].cacheTTL||cache[id].cacheTTL<0||((new Date().getTime()-cache[id].timestamp)<cache[id].cacheTTL)){that.requests[id]={};setTimeout(function(){that._success.call(that,o.context||o,origSuc,cache[id]._successData,'success',cache[id],o);that._complete.call(that,o.context||o,origCom,cache[id],'success',id,o)},0)}else{delete cache[id]}}if(!o.cacheResponse||!cache[id]){if(o.async){that.requests[id]=$.ajax(o)}else{$.ajax(o)}}return id}},_removeXHR:function(xhrID){if(this.opts.queue||this.opts.queueDuplicateRequests){$.dequeue(document,this.qName)}this.inProgress--;this.requests[xhrID]=null;delete this.requests[xhrID]},clearCache:function(){cache={}},_isAbort:function(xhr,status,o){if(!o.abortIsNoSuccess||(!xhr&&!status)){return false}var ret=!!((!xhr||xhr.readyState===0||this.lastAbort===o.xhrID));xhr=null;return ret},_complete:function(context,origFn,xhr,status,xhrID,o){if(this._isAbort(xhr,status,o)){status='abort';o.abort.call(context,xhr,status,o)}origFn.call(context,xhr,status,o);$.event.trigger(this.name+'AjaxComplete',[xhr,status,o]);if(o.domCompleteTrigger){$(o.domCompleteTrigger).trigger(this.name+'DOMComplete',[xhr,status,o]).trigger('DOMComplete',[xhr,status,o])}this._removeXHR(xhrID);if(!this.inProgress){$.event.trigger(this.name+'AjaxStop')}xhr=null},_success:function(context,origFn,data,status,xhr,o){var that=this;if(this._isAbort(xhr,status,o)){xhr=null;return}if(o.abortOld){$.each(this.requests,function(name){if(name===o.xhrID){return false}that.abort(name)})}if(o.cacheResponse&&!cache[o.xhrID]){if(!xhr){xhr={}}cache[o.xhrID]={status:xhr.status,statusText:xhr.statusText,responseText:xhr.responseText,responseXML:xhr.responseXML,_successData:data,cacheTTL:o.cacheTTL,timestamp:new Date().getTime()};if('getAllResponseHeaders'in xhr){var responseHeaders=xhr.getAllResponseHeaders();var parsedHeaders;var parseHeaders=function(){if(parsedHeaders){return}parsedHeaders={};$.each(responseHeaders.split("\n"),function(i,headerLine){var delimiter=headerLine.indexOf(":");parsedHeaders[headerLine.substr(0,delimiter)]=headerLine.substr(delimiter+2)})};$.extend(cache[o.xhrID],{getAllResponseHeaders:function(){return responseHeaders},getResponseHeader:function(name){parseHeaders();return(name in parsedHeaders)?parsedHeaders[name]:null}})}}origFn.call(context,data,status,xhr,o);$.event.trigger(this.name+'AjaxSuccess',[xhr,o,data]);if(o.domSuccessTrigger){$(o.domSuccessTrigger).trigger(this.name+'DOMSuccess',[data,o]).trigger('DOMSuccess',[data,o])}xhr=null},getData:function(id){if(id){var ret=this.requests[id];if(!ret&&this.opts.queue){ret=$.grep($(document).queue(this.qName),function(fn,i){return(fn.xhrID===id)})[0]}return ret}return{requests:this.requests,queue:(this.opts.queue)?$(document).queue(this.qName):[],inProgress:this.inProgress}},abort:function(id){var xhr;if(id){xhr=this.getData(id);if(xhr&&xhr.abort){this.lastAbort=id;xhr.abort();this.lastAbort=false}else{$(document).queue(this.qName,$.grep($(document).queue(this.qName),function(fn,i){return(fn!==xhr)}))}xhr=null;return}var that=this,ids=[];$.each(this.requests,function(id){ids.push(id)});$.each(ids,function(i,id){that.abort(id)})},clear:function(shouldAbort){$(document).clearQueue(this.qName);if(shouldAbort){this.abort()}}};$.manageAjax._manager.prototype.getXHR=$.manageAjax._manager.prototype.getData;$.manageAjax.defaults={beforeCreate:$.noop,abort:$.noop,abortIsNoSuccess:true,maxRequests:1,cacheResponse:false,async:true,domCompleteTrigger:false,domSuccessTrigger:false,preventDoubleRequests:true,queueDuplicateRequests:false,cacheTTL:-1,queue:false};$.each($.manageAjax._manager.prototype,function(n,fn){if(n.indexOf('_')===0||!$.isFunction(fn)){return}$.manageAjax[n]=function(name,o){if(!managed[name]){if(n==='add'){$.manageAjax.create(name,o)}else{return}}var args=Array.prototype.slice.call(arguments,1);managed[name][n].apply(managed[name],args)}})})(jQuery);function ipadCheck(){if((navigator.userAgent.match(/iPhone/i))||(navigator.userAgent.match(/iPod/i))||(navigator.userAgent.match(/iPad/i))){$('.ipadEspot').show()}else{$('.desktopEspot').show()}}


// Sticky Menu 
$(document).ready(function(){
	
	var isMobileDevice = false;
	if(typeof BrowserDetect != 'undefined') isMobileDevice =(BrowserDetect.OS=="iPad" || BrowserDetect.OS=="iPhone" || BrowserDetect.OS=="Android")
	var menuIsFixed = false;
	var breakPoint = 95;
	
	if(! isMobileDevice){
		
		$(window).scroll(function(){
	
			var isInternational = ($("#myDillardsContainer").css("display")!="block");
			var $scrollTop = $(document).scrollTop();
			
			if(!menuIsFixed && $scrollTop>=breakPoint){
				menuIsFixed = true;
				$("#main-nav-wrapper").addClass("sticky");
				$("#wrapper").css("padding-top","41px");
				$("#myDillardsSmallLogo").stop().fadeIn(250);
				$("#myDillardsBar").addClass("menuSticky");
				if(isInternational){
					$(".fiftyOne-nav").addClass("sticky");
					$("#main-nav-wrapper, .fiftyOne-nav").addClass("stickyInt");
				}
				return false;
			}
			if(menuIsFixed && $scrollTop<=breakPoint){
				menuIsFixed = false;
				$("#main-nav-wrapper, .fiftyOne-nav").removeClass("sticky");
				$("#main-nav-wrapper, .fiftyOne-nav").removeClass("stickyInt");
				$("#wrapper").css("padding-top","0");
				$("#myDillardsSmallLogo").stop().fadeOut(250);
				$("#myDillardsBar").removeClass("menuSticky");
			}
		});
	}
});
//Fire scroll event when window loads to prevent menu from sticking
//when user refreshes page from a scrolled down position
$(window).load(function(){
	$(window).trigger("scroll");
});