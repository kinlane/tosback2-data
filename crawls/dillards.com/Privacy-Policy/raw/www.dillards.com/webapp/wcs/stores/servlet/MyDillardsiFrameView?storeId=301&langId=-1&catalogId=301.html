
<!DOCTYPE HTML>
<!-- Start of JSTLEnvironmentSetup.jspf --><!-- End - JSPF File Name: JSTLEnvironmentSetup.jspf -->
 
<html xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=8" />
	<meta http-equiv="Page-Enter" content="revealtrans(duration=0.0)" />
	<meta http-equiv="Content-Type" content="" />
	
	
	<script type="text/javascript" src="../../../../javascript/compressed/jquery.js"></script>
	<script language="javascript" src="../../../../javascript/compressed/global.js" ></script>
	<script type="text/javascript" src="../../../../javascript/dropdown.js"></script>
	<script type="text/javascript" src="../../../../javascript/compressed/foresee-trigger.js"></script>   
	<script type="text/javascript" src="../../../../javascript/compressed/MyDillards.js"></script>
	
	
	<link rel="stylesheet" href="../../../../css/compressed/cv-master-styles.css" type="text/css" media="Screen" />
	<link rel="stylesheet" href="../../../../css/compressed/cv-home-styles.css" type="text/css" media="Screen" />
	<link rel="stylesheet" href="../../../../css/gallery-styles.css" type="text/css" media="Screen" />
	<link rel="stylesheet" href="../../../../css/compressed/print.css" type="text/css" media="print" />
	<link media="handheld and (max-device-width:480px)" href="../../../../css/compressed/mobile.css" type="text/css" rel="stylesheet" />
	<link rel="stylesheet" href="../../../../css/compressed/MyDillards.css"/>

</head>

<body style="width:100%;height:100%;background:transparent;">
	
	<!--[if lt IE 10]>
		<style type="text/css">
		#myDillardsRightFrameContent .itemRow{border:1px solid #eee !important;margin:0 0 5px -1px !important;}
		#myDillardsRightFrameContent .itemRow:hover{border:1px solid #ddd !important;margin:0 0 5px -1px !important;}
		
		#savedSearchContainer ul li:hover{margin:-1px !important;border:1px solid #ddd !important;}
		</style>
	<![endif]-->
	
	<!--[if lt IE 9]>
		<style type="text/css">
		#myDillardsRightFrameContent .myButtons div{-ms-filter:"none" !important;filter:"none" !important;}
		#myDillardsRightFrameContent .myButtons div:hover{-ms-filter:"none" !important;filter:"none" !important;}
		#myDillardsRightFrameContent .myButtons div.active, #myDillardsRightFrameContent .myButtons div.active:hover{-ms-filter:"none" !important;filter:"none" !important;}
		
		#myDillardsRightFrameContent .itemRow:hover{background:#fff !important;-ms-filter:"none" !important;filter:"none" !important;}
		
		#savedSearchContainer ul li:hover{background:#fff !important;-ms-filter:"none" !important;filter:"none" !important;}
		</style>
	<![endif]-->
	
	<!--[if lt IE 8]>
		<style type="text/css">
		#myDillardsRightFrameContent .myButtons div{padding:3px 10px 0 10px !important;}
		#myDillardsRightFrameContent button{padding:3px 0 9px 0 !important;}
		#myDillardsRightFrameContent button.primary{padding:0 8px 5px 8px !important;}
		</style>
	<![endif]-->
	
	<header>
	    
    </header>
		    <!-- Start of JSTLEnvironmentSetup.jspf --><!-- End - JSPF File Name: JSTLEnvironmentSetup.jspf --><!-- Start Coremetrics Impl --><!-- Coremetrics Tag Library -->
<script type="text/javascript" src="../../../../../libs.coremetrics.com/eluminate.js"></script> 
<script type="text/javascript" language="javascript" src="../../../../javascript/compressed/cmcustom_websphere_commerce.js"></script>

<script type="text/javascript">
cmSetupNormalization("krypto-_-krypto");
cmSetupOther({"cm_TrackImpressions":""});
var clientId="";
var boolVal="";
var siteVal="";
var siteVal2="";
if (document.domain == 'www.dillards.com' || document.domain == 'dillards.com')
{
	 clientId="90384811";
	 boolVal = true;
	 siteVal="data.coremetrics.com";
	 siteVal2="dillards.com";
	 
}else{

clientId="60384811";
booVal= false;
siteVal="testdata.coremetrics.com";
siteVal2="testsite.com";
}

cmSetClientID(clientId, boolVal,siteVal,siteVal2); 

</script><!-- End Coremetrics Impl -->

<div id="iFrameHeightMeasure"></div>

<div id="myDillardsRightFrameContent">

	<div class="ajaxBigLoader" style="display:none;"><div class="loadingContent">Loading content...</div></div>

	<div class="myButtons">
		<span>
			<div class="shoppingBag active">Shopping Bag</div><div class="wishList">Wish List</div><div class="savedSearch">Saved Searches</div><style type="text/css">#myDillardsRightFrameContent .myButtons .savedSearch{margin-right:0;border:0;}</style>
		</span>                              
	</div>
	<div class="shoppingBagPanel activePanel">
		<div id="shoppingBagContainer" style="display:none;"></div>
	</div>
	
	<div class="wishListPanel">
		<div id="wishListContainer"></div>
	</div>
	
	<div class="orderHistoryPanel">
		<div id="orderHistoryContainer"></div>
	</div>
	
	<div class="savedSearchPanel">
		<div id="savedSearchContainer"></div>
	</div>
	
</div>

<script type="text/javascript">
	
var ajaxArray = new Array();
var runningAjax = "";
var ajaxProcessing = ["false","false","false","false"];

function runAjax(ajaxIndex){
	if ( typeof runningAjax === 'object')
	{
		runningAjax.abort();
	}
    
    runningAjax = $.ajax(ajaxArray[ajaxIndex]);
};
	
	
var ajaxUrl = "https://www.dillards.com/webapp/wcs/stores/servlet/OrderCalculate?";
ajaxUrl += "storeId=301&catalogId=301&langId=-1&URL=MyDillardsShoppingBag&isDynamic=false&updatePrices=1&calculationUsageId=-1&calculationUsageId=-2&orderId=.";
var shoppingBag = {
	url: ajaxUrl,
	cache: false,
	type: 'POST',
	beforeSend: function() {
		ajaxProcessing[0] = "true";
	},
	success: function(html){
		$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeOut(300, function() {
			$("#myDillardsRightFrameContent #shoppingBagContainer").html($.trim(html)).stop().fadeIn(300);
			countItemRows("shopping");
			ajaxProcessing[0] = "false";
		});
	},
	error: function() {
		$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeOut(300);
		ajaxProcessing[0] = "false";
	}
};
ajaxArray.push(shoppingBag);


var ajaxUrl = "https://www.dillards.com/webapp/wcs/stores/servlet/MyDillardsInterestItems?storeId=301&landId=-1&catalogId=301";
var wishList = {
	url: ajaxUrl,
	cache: false,
	type: 'POST',
	beforeSend: function() {
		ajaxProcessing[1] = "true";
	},
	success: function(html){
		$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeOut(300, function() {
			cmCreatePageviewTag("My Dillards Wishlist", "-10001");
			cmCreatePageviewTag("Wish List Display", "-10001");
			$("#myDillardsRightFrameContent #wishListContainer").html($.trim(html)).stop().fadeIn(300);
			countItemRows("wish");
			ajaxProcessing[1] = "false";
		});
	},
	error: function() {
		$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeOut(300);
		ajaxProcessing[1] = "false";
	}
};		
ajaxArray.push(wishList);


var ajaxUrl = "https://www.dillards.com/webapp/wcs/stores/servlet/MyDillardsOrderHistoryList?storeId=301&landId=-1&catalogId=301&userId=-1002&userType=G";
var orderHistory = {
	url: ajaxUrl,
	cache: false,
	type: 'POST',
	beforeSend: function() {
		ajaxProcessing[2] = "true";
	},
	success: function(html){
		$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeOut(300, function() {
			cmCreatePageviewTag("My Dillards Order History", "-10001");
			cmCreatePageviewTag("Order History", "-10001");
			$("#myDillardsRightFrameContent #orderHistoryContainer").html($.trim(html)).stop().fadeIn(300);
			countItemRows("shopping");
			ajaxProcessing[2] = "false";
		});
	},
	error: function() {
		$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeOut(300);
		ajaxProcessing[2] = "false";
	}
};
ajaxArray.push(orderHistory);


var ajaxUrl = "https://www.dillards.com/webapp/wcs/stores/servlet/SavedSearch?";
ajaxUrl += "storeId=301&catalogId=301&langId=-1&location=MyDillards";
var savedSearch = {
	url: ajaxUrl,
	cache: false,
	type: 'POST',
	beforeSend: function() {
		ajaxProcessing[3] = "true";
	},
	success: function(html){
		$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeOut(300, function() {
			cmCreatePageviewTag("My Dillards Saved Searches", "-10001");
			cmCreatePageviewTag("My Searches", "-10001");
			$("#myDillardsRightFrameContent #savedSearchContainer").html($.trim(html)).stop().fadeIn(300);
			countItemRows("shopping");
			ajaxProcessing[3] = "false";
		});
	},
	error: function() {
		$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeOut(300);
		ajaxProcessing[3] = "false";
	}
};	
ajaxArray.push(savedSearch);	


$(document).ready(function(){

	$("#myDillardsRightFrameContent .shoppingBag").click(function() {		
		if (ajaxProcessing[0] == "false" && $("#myDillardsRightFrameContent #shoppingBagContainer").text().length == 0){
			runAjax(0);
			$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeIn(350);
  		} else if (ajaxProcessing[0] == "false") {
  			$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeOut(75);
  		} else {
  			$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeIn(350);
  	  	}
	});
	
	$("#myDillardsRightFrameContent .wishList").click(function() {			
		if (ajaxProcessing[1] == "false" && $("#myDillardsRightFrameContent #wishListContainer").text().length == 0){
			runAjax(1);
			$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeIn(350);
		} else if (ajaxProcessing[1] == "false") {
  			$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeOut(75);
  		} else {
  			$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeIn(350);
  	  	}
	});
	
	$("#myDillardsRightFrameContent .orderHistory").click(function() {		
		if (ajaxProcessing[2] == "false" && $("#myDillardsRightFrameContent #orderHistoryContainer").text().length == 0){
			runAjax(2);
			$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeIn(350);
		} else if (ajaxProcessing[2] == "false") {
  			$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeOut(75);
  		} else {
  			$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeIn(350);
  	  	}
	});
	
	$("#myDillardsRightFrameContent .savedSearch").click(function() {			
		if (ajaxProcessing[3] == "false" && $("#myDillardsRightFrameContent #savedSearchContainer").text().length == 0){
			runAjax(3);
			$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeIn(350);
		} else if (ajaxProcessing[3] == "false") {
  			$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeOut(75);
  		} else {
  			$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeIn(350);
  	  	}
	});
	
});



function watchForFrameStatus() {
	if ($("#iFrameHeightMeasure").height() > 100) {
		if ($("#myDillardsRightFrameContent").find(".activePanel div").text().length == 0) {
			runAjax(0);
			$("#myDillardsRightFrameContent .ajaxBigLoader").stop().fadeIn(350);
			clearTimeout(frameStatusTimeoutHandle);
		}
	} else {
		var frameStatusTimeoutHandle = setTimeout(watchForFrameStatus,1000);
	}
}
watchForFrameStatus();

</script>
    <footer>
	    		
    </footer>
</html>