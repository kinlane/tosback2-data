(function(aj,W,ao,ad,ae,X){var U=this;var ak=Math.floor(Math.random()*100)*100;var aq=Function.prototype;var ap=/^(http.?:\/\/([^\/\s]+))/;var ar=/[\-\w]+\/\.\.\//;var T=/([^:])\/\//g;var Z="";var am={};var ah=aj.easyXDM;var ay="easyXDM_";var aK;function aI(a,c){var b=typeof a[c];return b=="function"||(!!(b=="object"&&a[c]))||b=="unknown"}function az(a,b){return !!(typeof(a[b])=="object"&&a[b])}function at(a){return Object.prototype.toString.call(a)==="[object Array]"}var aB,aE;if(aI(aj,"addEventListener")){aB=function(c,a,b){c.addEventListener(a,b,false)};aE=function(c,a,b){c.removeEventListener(a,b,false)}}else{if(aI(aj,"attachEvent")){aB=function(a,c,b){a.attachEvent("on"+c,b)};aE=function(a,c,b){a.detachEvent("on"+c,b)}}else{throw new Error("Browser not supported")}}var aC=false,ab=[],af;if("readyState" in W){af=W.readyState;aC=af=="complete"||(~navigator.userAgent.indexOf("AppleWebKit/")&&(af=="loaded"||af=="interactive"))}else{aC=!!W.body}function av(){av=aq;aC=true;for(var a=0;a<ab.length;a++){ab[a]()}ab.length=0}if(!aC){if(aI(aj,"addEventListener")){aB(W,"DOMContentLoaded",av)}else{aB(W,"readystatechange",function(){if(W.readyState=="complete"){av()}});if(W.documentElement.doScroll&&aj===top){(function aa(){if(aC){return}try{W.documentElement.doScroll("left")}catch(a){ad(aa,1);return}av()}())}}aB(aj,"load",av)}function V(b,a){if(aC){b.call(a);return}ab.push(function(){b.call(a)})}function ai(){var c=parent;if(Z!==""){for(var a=0,b=Z.split(".");a<b.length;a++){c=c[b[a]]}}return c.easyXDM}function Y(a){aj.easyXDM=ah;Z=a;if(Z){ay="easyXDM_"+Z.replace(".","_")+"_"}return am}function aF(a){return a.match(ap)[2]}function ac(a){return a.match(ap)[1]}function aH(a){a=a.replace(T,"$1/");if(!a.match(/^(http||https):\/\//)){var b=(a.substring(0,1)==="/")?"":ao.pathname;if(b.substring(b.length-1)!=="/"){b=b.substring(0,b.lastIndexOf("/")+1)}a=ao.protocol+"//"+ao.host+b+a}while(ar.test(a)){a=a.replace(ar,"")}return a}function an(a,d){var f="",c=a.indexOf("#");if(c!==-1){f=a.substring(c);a=a.substring(0,c)}var e=[];for(var b in d){if(d.hasOwnProperty(b)){e.push(b+"="+X(d[b]))}}return a+((a.indexOf("?")===-1)?"?":"&")+e.join("&")+f}var au=(function(){var c={},d,b=ao.search.substring(1).split("&"),a=b.length;while(a--){d=b[a].split("=");c[d[0]]=ae(d[1])}return c}());function ax(a){return typeof a==="undefined"}function al(){var b={};var c={a:[1,2,3]},a='{"a":[1,2,3]}';if(JSON&&typeof JSON.stringify==="function"&&JSON.stringify(c).replace((/\s/g),"")===a){return JSON}if(Object.toJSON){if(Object.toJSON(c).replace((/\s/g),"")===a){b.stringify=Object.toJSON}}if(typeof String.prototype.evalJSON==="function"){c=a.evalJSON();if(c.a&&c.a.length===3&&c.a[2]===3){b.parse=function(d){return d.evalJSON()}}}if(b.stringify&&b.parse){al=function(){return b};return b}return null}function aw(a,b,c){var e;for(var d in b){if(b.hasOwnProperty(d)){if(d in a){e=b[d];if(typeof e==="object"){aw(a[d],e,c)}else{if(!c){a[d]=b[d]}}}else{a[d]=b[d]}}}return a}function S(){var a=W.createElement("iframe");a.name=ay+"TEST";aw(a.style,{position:"absolute",left:"-2000px",top:"0px"});W.body.appendChild(a);aK=!(a.contentWindow===aj.frames[a.name]);W.body.removeChild(a)}function aG(a){if(ax(aK)){S()}var b;if(aK){b=W.createElement('<iframe name="'+a.props.name+'"/>')}else{b=W.createElement("IFRAME");b.name=a.props.name}b.id=b.name=a.props.name;delete a.props.name;if(a.onLoad){aB(b,"load",a.onLoad)}if(typeof a.container=="string"){a.container=W.getElementById(a.container)}if(!a.container){b.style.position="absolute";b.style.left="-2000px";b.style.top="0px";a.container=W.body}b.border=b.frameBorder=0;a.container.insertBefore(b,a.container.firstChild);aw(b,a.props);return b}function aA(d,c){if(typeof d=="string"){d=[d]}var b,a=d.length;while(a--){b=d[a];b=new RegExp(b.substr(0,1)=="^"?b:("^"+b.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"));if(b.test(c)){return true}}return false}function ag(c){var h=c.protocol,b;c.isHost=c.isHost||ax(au.xdm_p);if(!c.props){c.props={}}if(!c.isHost){c.channel=au.xdm_c;c.secret=au.xdm_s;c.remote=au.xdm_e;h=au.xdm_p;if(c.acl&&!aA(c.acl,c.remote)){throw new Error("Access denied for "+c.remote)}}else{c.remote=aH(c.remote);c.channel=c.channel||"default"+ak++;c.secret=Math.random().toString(16).substring(2);if(ax(h)){if(ac(ao.href)==ac(c.remote)){h="4"}else{if(aI(aj,"postMessage")||aI(W,"postMessage")){h="1"}else{if(aI(aj,"ActiveXObject")&&aI(aj,"execScript")){h="3"}else{if(navigator.product==="Gecko"&&"frameElement" in aj&&navigator.userAgent.indexOf("WebKit")==-1){h="5"}else{if(c.remoteHelper){c.remoteHelper=aH(c.remoteHelper);h="2"}else{h="0"}}}}}}}switch(h){case"0":aw(c,{interval:100,delay:2000,useResize:true,useParent:false,usePolling:false},true);if(c.isHost){if(!c.local){var f=ao.protocol+"//"+ao.host,a=W.body.getElementsByTagName("img"),g;var d=a.length;while(d--){g=a[d];if(g.src.substring(0,f.length)===f){c.local=g.src;break}}if(!c.local){c.local=aj}}var e={xdm_c:c.channel,xdm_p:0};if(c.local===aj){c.usePolling=true;c.useParent=true;c.local=ao.protocol+"//"+ao.host+ao.pathname+ao.search;e.xdm_e=c.local;e.xdm_pa=1}else{e.xdm_e=aH(c.local)}if(c.container){c.useResize=false;e.xdm_po=1}c.remote=an(c.remote,e)}else{aw(c,{channel:au.xdm_c,remote:au.xdm_e,useParent:!ax(au.xdm_pa),usePolling:!ax(au.xdm_po),useResize:c.useParent?false:c.useResize})}b=[new am.stack.HashTransport(c),new am.stack.ReliableBehavior({}),new am.stack.QueueBehavior({encode:true,maxLength:4000-c.remote.length}),new am.stack.VerifyBehavior({initiate:c.isHost})];break;case"1":b=[new am.stack.PostMessageTransport(c)];break;case"2":b=[new am.stack.NameTransport(c),new am.stack.QueueBehavior(),new am.stack.VerifyBehavior({initiate:c.isHost})];break;case"3":b=[new am.stack.NixTransport(c)];break;case"4":b=[new am.stack.SameOriginTransport(c)];break;case"5":b=[new am.stack.FrameElementTransport(c)];break}b.push(new am.stack.QueueBehavior({lazy:c.lazy,remove:true}));return b}function aJ(d){var e,c={incoming:function(g,f){this.up.incoming(g,f)},outgoing:function(f,g){this.down.outgoing(f,g)},callback:function(f){this.up.callback(f)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var b=0,a=d.length;b<a;b++){e=d[b];aw(e,c,true);if(b!==0){e.down=d[b-1]}if(b!==a-1){e.up=d[b+1]}}return e}function aD(a){a.up.down=a.down;a.down.up=a.up;a.up=a.down=null}aw(am,{version:"2.4.10.103",query:au,stack:{},apply:aw,getJSONObject:al,whenReady:V,noConflict:Y});am.DomHelper={on:aB,un:aE,requiresJSON:function(a){if(!az(aj,"JSON")){W.write('<script type="text/javascript" src="'+a+'"></script>')}}};(function(){var a={};am.Fn={set:function(b,c){a[b]=c},get:function(c,b){var d=a[c];if(b){delete a[c]}return d}}}());am.Socket=function(b){var a=aJ(ag(b).concat([{incoming:function(e,d){b.onMessage(e,d)},callback:function(d){if(b.onReady){b.onReady(d)}}}])),c=ac(b.remote);this.origin=ac(b.remote);this.destroy=function(){a.destroy()};this.postMessage=function(d){a.outgoing(d,c)};a.init()};am.Rpc=function(c,b){if(b.local){for(var e in b.local){if(b.local.hasOwnProperty(e)){var d=b.local[e];if(typeof d==="function"){b.local[e]={method:d}}}}}var a=aJ(ag(c).concat([new am.stack.RpcBehavior(this,b),{callback:function(f){if(c.onReady){c.onReady(f)}}}]));this.origin=ac(c.remote);this.destroy=function(){a.destroy()};a.init()};am.stack.SameOriginTransport=function(b){var c,e,d,a;return(c={outgoing:function(g,h,f){d(g);if(f){f()}},destroy:function(){if(e){e.parentNode.removeChild(e);e=null}},onDOMReady:function(){a=ac(b.remote);if(b.isHost){aw(b.props,{src:an(b.remote,{xdm_e:ao.protocol+"//"+ao.host+ao.pathname,xdm_c:b.channel,xdm_p:4}),name:ay+b.channel+"_provider"});e=aG(b);am.Fn.set(b.channel,function(f){d=f;ad(function(){c.up.callback(true)},0);return function(g){c.up.incoming(g,a)}})}else{d=ai().Fn.get(b.channel,true)(function(f){c.up.incoming(f,a)});ad(function(){c.up.callback(true)},0)}},init:function(){V(c.onDOMReady,c)}})};am.stack.PostMessageTransport=function(d){var f,g,b,c;function a(h){if(h.origin){return h.origin}if(h.uri){return ac(h.uri)}if(h.domain){return ao.protocol+"//"+h.domain}throw"Unable to retrieve the origin of the event"}function e(h){var j=a(h);if(j==c&&h.data.substring(0,d.channel.length+1)==d.channel+" "){f.up.incoming(h.data.substring(d.channel.length+1),j)}}return(f={outgoing:function(h,j,k){b.postMessage(d.channel+" "+h,j||c);if(k){k()}},destroy:function(){aE(aj,"message",e);if(g){b=null;g.parentNode.removeChild(g);g=null}},onDOMReady:function(){c=ac(d.remote);if(d.isHost){aB(aj,"message",function h(j){if(j.data==d.channel+"-ready"){b=("postMessage" in g.contentWindow)?g.contentWindow:g.contentWindow.document;aE(aj,"message",h);aB(aj,"message",e);ad(function(){f.up.callback(true)},0)}});aw(d.props,{src:an(d.remote,{xdm_e:ao.protocol+"//"+ao.host,xdm_c:d.channel,xdm_p:1}),name:ay+d.channel+"_provider"});g=aG(d)}else{aB(aj,"message",e);b=("postMessage" in aj.parent)?aj.parent:aj.parent.document;b.postMessage(d.channel+"-ready",c);ad(function(){f.up.callback(true)},0)}},init:function(){V(f.onDOMReady,f)}})};am.stack.FrameElementTransport=function(b){var c,e,d,a;return(c={outgoing:function(g,h,f){d.call(this,g);if(f){f()}},destroy:function(){if(e){e.parentNode.removeChild(e);e=null}},onDOMReady:function(){a=ac(b.remote);if(b.isHost){aw(b.props,{src:an(b.remote,{xdm_e:ao.protocol+"//"+ao.host+ao.pathname+ao.search,xdm_c:b.channel,xdm_p:5}),name:ay+b.channel+"_provider"});e=aG(b);e.fn=function(f){delete e.fn;d=f;ad(function(){c.up.callback(true)},0);return function(g){c.up.incoming(g,a)}}}else{aj.parent.location=au.xdm_e+"#";d=aj.frameElement.fn(function(f){c.up.incoming(f,a)});c.up.callback(true)}},init:function(){V(c.onDOMReady,c)}})};am.stack.NixTransport=function(b){var d,f,e,a,c;return(d={outgoing:function(j,g,h){e(j);if(h){h()}},destroy:function(){c=null;if(f){f.parentNode.removeChild(f);f=null}},onDOMReady:function(){a=ac(b.remote);if(b.isHost){try{if(!aI(aj,"getNixProxy")){aj.execScript("Class NixProxy\n    Private m_parent, m_child, m_Auth\n\n    Public Sub SetParent(obj, auth)\n        If isEmpty(m_Auth) Then m_Auth = auth\n        SET m_parent = obj\n    End Sub\n    Public Sub SetChild(obj)\n        SET m_child = obj\n        m_parent.ready()\n    End Sub\n\n    Public Sub SendToParent(data, auth)\n        If m_Auth = auth Then m_parent.send(CStr(data))\n    End Sub\n    Public Sub SendToChild(data, auth)\n        If m_Auth = auth Then m_child.send(CStr(data))\n    End Sub\nEnd Class\nFunction getNixProxy()\n    Set GetNixProxy = New NixProxy\nEnd Function\n","vbscript")}c=getNixProxy();c.SetParent({send:function(j){d.up.incoming(j,a)},ready:function(){ad(function(){d.up.callback(true)},0)}},b.secret);e=function(j){c.SendToChild(j,b.secret)}}catch(h){throw new Error("Could not set up VBScript NixProxy:"+h.message)}aw(b.props,{src:an(b.remote,{xdm_e:ao.protocol+"//"+ao.host+ao.pathname+ao.search,xdm_c:b.channel,xdm_s:b.secret,xdm_p:3}),name:ay+b.channel+"_provider"});f=aG(b);f.contentWindow.opener=c}else{aj.parent.location=au.xdm_e+"#";try{c=aj.opener}catch(g){throw new Error("Cannot access window.opener")}c.SetChild({send:function(j){U.setTimeout(function(){d.up.incoming(j,a)},0)}});e=function(j){c.SendToParent(j,b.secret)};ad(function(){d.up.callback(true)},0)}},init:function(){V(d.onDOMReady,d)}})};am.stack.NameTransport=function(k){var l;var n,d,j,b,c,g,f;function a(p){var o=k.remoteHelper+(n?"#_3":"#_2")+k.channel;d.contentWindow.sendMessage(p,o)}function m(){if(n){if(++b===2||!n){l.up.callback(true)}}else{a("ready");l.up.callback(true)}}function e(o){l.up.incoming(o,g)}function h(){if(c){ad(function(){c(true)},0)}}return(l={outgoing:function(p,q,o){c=o;a(p)},destroy:function(){d.parentNode.removeChild(d);d=null;if(n){j.parentNode.removeChild(j);j=null}},onDOMReady:function(){n=k.isHost;b=0;g=ac(k.remote);k.local=aH(k.local);if(n){am.Fn.set(k.channel,function(p){if(n&&p==="ready"){am.Fn.set(k.channel,e);m()}});f=an(k.remote,{xdm_e:k.local,xdm_c:k.channel,xdm_p:2});aw(k.props,{src:f+"#"+k.channel,name:ay+k.channel+"_provider"});j=aG(k)}else{k.remoteHelper=k.remote;am.Fn.set(k.channel,e)}d=aG({props:{src:k.local+"#_4"+k.channel},onLoad:function o(){aE(d,"load",o);am.Fn.set(k.channel+"_load",h);(function p(){if(typeof d.contentWindow.sendMessage=="function"){m()}else{ad(p,50)}}())}})},init:function(){V(l.onDOMReady,l)}})};am.stack.HashTransport=function(l){var o;var c=this,a,m,j,p,h,n,g;var b,k;function f(s){if(!g){return}var r=l.remote+"#"+(h++)+"_"+s;((a||!b)?g.contentWindow:g).location=r}function q(r){p=r;o.up.incoming(p.substring(p.indexOf("_")+1),k)}function e(){if(!n){return}var r=n.location.href,t="",s=r.indexOf("#");if(s!=-1){t=r.substring(s)}if(t&&t!=p){q(t)}}function d(){m=setInterval(e,j)}return(o={outgoing:function(r,s){f(r)},destroy:function(){aj.clearInterval(m);if(a||!b){g.parentNode.removeChild(g)}g=null},onDOMReady:function(){a=l.isHost;j=l.interval;p="#"+l.channel;h=0;b=l.useParent;k=ac(l.remote);if(a){l.props={src:l.remote,name:ay+l.channel+"_provider"};if(b){l.onLoad=function(){n=aj;d();o.up.callback(true)}}else{var t=0,r=l.delay/50;(function s(){if(++t>r){throw new Error("Unable to reference listenerwindow")}try{n=g.contentWindow.frames[ay+l.channel+"_consumer"]}catch(u){}if(n){d();o.up.callback(true)}else{ad(s,50)}}())}g=aG(l)}else{n=aj;d();if(b){g=parent;o.up.callback(true)}else{aw(l,{props:{src:l.remote+"#"+l.channel+new Date(),name:ay+l.channel+"_consumer"},onLoad:function(){o.up.callback(true)}});g=aG(l)}}},init:function(){V(o.onDOMReady,o)}})};am.stack.ReliableBehavior=function(b){var d,f;var e=0,a=0,c="";return(d={incoming:function(g,j){var k=g.indexOf("_"),h=g.substring(0,k).split(",");g=g.substring(k+1);if(h[0]==e){c="";if(f){f(true)}}if(g.length>0){d.down.outgoing(h[1]+","+e+"_"+c,j);if(a!=h[1]){a=h[1];d.up.incoming(g,j)}}},outgoing:function(g,h,j){c=g;f=j;d.down.outgoing(a+","+(++e)+"_"+g,h)}})};am.stack.QueueBehavior=function(e){var h,j=[],b=true,f="",a,c=0,d=false,g=false;function k(){if(e.remove&&j.length===0){aD(h);return}if(b||j.length===0||a){return}b=true;var l=j.shift();h.down.outgoing(l.data,l.origin,function(m){b=false;if(l.callback){ad(function(){l.callback(m)},0)}k()})}return(h={init:function(){if(ax(e)){e={}}if(e.maxLength){c=e.maxLength;g=true}if(e.lazy){d=true}else{h.down.init()}},callback:function(m){b=false;var l=h.up;k();l.callback(m)},incoming:function(o,m){if(g){var n=o.indexOf("_"),l=parseInt(o.substring(0,n),10);f+=o.substring(n+1);if(l===0){if(e.encode){f=ae(f)}h.up.incoming(f,m);f=""}}else{h.up.incoming(o,m)}},outgoing:function(p,m,o){if(e.encode){p=X(p)}var l=[],n;if(g){while(p.length!==0){n=p.substring(0,c);p=p.substring(n.length);l.push(n)}while((n=l.shift())){j.push({data:l.length+"_"+n,origin:m,callback:l.length===0?o:null})}}else{j.push({data:p,origin:m,callback:o})}if(d){h.down.init()}else{k()}},destroy:function(){a=true;h.down.destroy()}})};am.stack.VerifyBehavior=function(e){var f,d,b,c=false;function a(){d=Math.random().toString(16).substring(2);f.down.outgoing(d)}return(f={incoming:function(g,h){var j=g.indexOf("_");if(j===-1){if(g===d){f.up.callback(true)}else{if(!b){b=g;if(!e.initiate){a()}f.down.outgoing(g)}}}else{if(g.substring(0,j)===b){f.up.incoming(g.substring(j+1),h)}}},outgoing:function(g,h,j){f.down.outgoing(d+"_"+g,h,j)},callback:function(g){if(e.initiate){a()}}})};am.stack.RpcBehavior=function(h,c){var e,a=c.serializer||al();var j=0,g={};function b(k){k.jsonrpc="2.0";e.down.outgoing(a.stringify(k))}function f(k,m){var l=Array.prototype.slice;return function(){var n=arguments.length,p,o={method:m};if(n>0&&typeof arguments[n-1]==="function"){if(n>1&&typeof arguments[n-2]==="function"){p={success:arguments[n-2],error:arguments[n-1]};o.params=l.call(arguments,0,n-2)}else{p={success:arguments[n-1]};o.params=l.call(arguments,0,n-1)}g[""+(++j)]=p;o.id=j}else{o.params=l.call(arguments,0)}if(k.namedParams&&o.params.length===1){o.params=o.params[0]}b(o)}}function d(r,q,m,p){if(!m){if(q){b({id:q,error:{code:-32601,message:"Procedure not found."}})}return}var o,l;if(q){o=function(s){o=aq;b({id:q,result:s})};l=function(s,t){l=aq;var u={id:q,error:{code:-32099,message:s}};if(t){u.error.data=t}b(u)}}else{o=l=aq}if(!at(p)){p=[p]}try{var k=m.method.apply(m.scope,p.concat([o,l]));if(!ax(k)){o(k)}}catch(n){l(n.message)}}return(e={incoming:function(l,k){var m=a.parse(l);if(m.method){if(c.handle){c.handle(m,b)}else{d(m.method,m.id,c.local[m.method],m.params)}}else{var n=g[m.id];if(m.error){if(n.error){n.error(m.error)}}else{if(n.success){n.success(m.result)}}delete g[m.id]}},init:function(){if(c.remote){for(var k in c.remote){if(c.remote.hasOwnProperty(k)){h[k]=f(c.remote[k],k)}}}e.down.init()},destroy:function(){for(var k in c.remote){if(c.remote.hasOwnProperty(k)&&h.hasOwnProperty(k)){delete h[k]}}e.down.destroy()}})};U.easyXDM=am})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);(function(){function Sb(){var strs=[];this.append=function(val){strs.push(val);return this};this.toStr=function(){return strs.join("")}}function Qp(url){url=url.replace(/&amp;/g,"&");var pairs=[];function init(){var s=url.split("?");if(s.length!=2){return}pairs=s[1].split("&")}init();this.length=function(){return pairs.length};this.get=function(key){var key=key.toLowerCase();for(var i=0,l=pairs.length;i<l;i++){var pair=pairs[i].split("=");if(pair[0].toLowerCase()===key){return pair[1]}}return undefined}}var Cookie={get:function(key){var cKey=key+"=",ca=document.cookie.split(";");for(var i=0,l=ca.length;i<l;i++){var c=ca[i];while(c.charAt(0)===" "){c=c.substring(1,c.length)}if(c.indexOf(cKey)===0){return c.substring(cKey.length,c.length)}}return undefined},set:function(key,val,days){var expires="";if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toGMTString()}document.cookie=key+"="+val+expires+"; path=/;domain=.break.com"},remove:function(key){this.set(key,"",-1)}};function load(src,remove,cb){var d=document,h=d.getElementsByTagName("head")[0],s=d.createElement("script");s.type="text/javascript";s.src=src;s.async=true;s.onreadystatechange=s.onload=function(){var r=s.readyState;if(!r||/loaded|complete/.test(r)){if(typeof(cb)==="function"){cb()}if(remove){var wait=setTimeout(function(){h.removeChild(s);clearTimeout(wait)},1)}s.onreadystatechange=s.onload=null}};h.appendChild(s)}window.BRK={AuthServer:(navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1)?"http://auth.break.com":"http://auth.break.com",RecaptchaKey:"6LeUsL0SAAAAAHbDdYn-j8xSPvu0uJAJBUyh1lGk",_prepSessionLoaded:false,_prepSession:function(){if(/Trident\/5./i.test(navigator.userAgent)){return}var d=document,body=d.getElementsByTagName("body")[0];var form=d.createElement("form");form.id=form.name="__brk_sessionform";form.enctype="application/x-www-form-urlencoded";form.action=BRK.AuthServer+"/auth/prepsession?"+parseInt(Math.random()*99999999999);form.method="GET";form.target="__brk_sessionframe";body.appendChild(form);var frame=d.createElement("iframe");frame.id=frame.name="__brk_sessionframe";frame.src=BRK.AuthServer+"/blank.html";frame.style.display="none";frame.onload=function(){if(!BRK._prepSessionLoaded){BRK._prepSessionLoaded=true;d.__brk_sessionform.submit()}};body.appendChild(frame)}};function boot(cb){var d=document,scripts=d.getElementsByTagName("script"),head=d.getElementsByTagName("head")[0];if(window.location.href.toLowerCase().indexOf("break.com")>-1){BRK.siteId=13;BRK.fbAppId=376604520810}else{var params=new Qp(scripts[scripts.length-1].src);if(params.length()!=2){var script=null;for(var i=0;i<scripts.length;i++){var str=scripts[i].src;var patt1=/brknet_api/gi;if(str.match(patt1)){script=scripts[i]}}params=new Qp(script.src);if(params.length()!=2){return}}BRK.siteId=params.get("id");BRK.fbAppId=params.get("fbapi")}BRK._prepSession();var hatCss=d.createElement("link");hatCss.href="http://s.brkmd.com/Content/break/css/api/brknet1.1.css";hatCss.rel="stylesheet";head.appendChild(hatCss);var fbRoot=d.createElement("div");fbRoot.setAttribute("id","fb-root");d.getElementsByTagName("body")[0].appendChild(fbRoot);if(typeof FB==="undefined"){var fb=d.createElement("script");fb.async=true;fb.src=d.location.protocol+"//connect.facebook.net/en_US/all.js";fbRoot.appendChild(fb);window.fbAsyncInit=function(){FB.init({appId:BRK.fbAppId,status:true,cookie:true,xfbml:true,oauth:true});if(typeof brknetFBReady==="function"){window.brknetFBReady()}}}else{window.brknetFBReady()}var jsonLoaded,xdm;if(typeof JSON==="undefined"){load("//media1.break.com/break/js/json2.js",false,function(){jsonLoaded=true})}else{jsonLoaded=true}if(typeof easyXDM==="undefined"){load("//media1.break.com/break/js/api/easyXDM/easyXDM.min.js",true,function(){xdm=easyXDM.noConflict("BRKNET")})}else{xdm=easyXDM.noConflict("BRKNET")}if(typeof jQuery==="undefined"){load("//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js",true,function(){var wait=setInterval(function(){if(jsonLoaded&&typeof(xdm)!="undefined"){cb(xdm,jQuery.noConflict(true));clearInterval(wait)}},10)})}else{var wait=setInterval(function(){if(jsonLoaded&&typeof(xdm)!="undefined"){cb(xdm,jQuery);clearInterval(wait)}},10)}}boot(function(xdm,$){BRK.overlay={timeout:undefined,reposition:function(modal){var win=$(window);var width=modal.overlay.find("#bmn-overlay-inner > div").outerWidth();if(width==0||width==null){width=695;modal.overlay.find("#bmn-overlay-inner").addClass("no-style")}var left=parseInt((win.width()*0.5)-(width*0.5));if(left<0){left=0}modal.overlay.css({width:width,top:win.scrollTop()+100,left:left});var height=win.height(),doc=$(document),width=win.width();var modalHeight=modal.overlay.outerHeight()+150,modalWidth=modal.overlay.outerWidth()+80;if(height<doc.height()){height=doc.height()}if(height<modalHeight){height=modalHeight}if(width<modalWidth){width=modalWidth}modal.mask.height(height).width(width)},onResize:function(){var modal=this.modal();if(!modal.overlay.is(":visible")){return}this.reposition(modal)},_onClose:undefined,onClose:function(){window.modalActive=false;if($.isFunction(this._onClose)){return this._onClose()}},modal:function(isNoClose){var mask=$("#bmn-overlay-mask");if(mask.length==0){mask=$('<div id="bmn-overlay-mask"></div>').appendTo("body").hide().css("opacity",0.5).click(function(){if(!isNoClose){BRK.overlay.hide()}});$(window).resize(function(){clearTimeout(BRK.overlay.timeout);BRK.overlay.timeout=setTimeout(function(){BRK.overlay.onResize()},50)})}var overlay=$("#bmn-overlay");if(overlay.length==0){var html='<div id="bmn-overlay"><div id="bmn-overlay-inner" class="bmn-cr-account-form hml-portal-wrap"></div><span class="bmn-spr hml-overlay-close">X</span></div>';overlay=$(html).appendTo("body").find(".hml-overlay-close").click(function(){if(!isNoClose){BRK.overlay.hide()}return false}).end()}return{overlay:overlay,mask:mask}},show:function(elm,onClose,isNoClose){window.modalActive=true;if(typeof swfobject!="undefined"&&swfobject.getObjectById("video-player-content")!=null&&typeof swfobject.getObjectById("video-player-content").brPlayerPause==="function"){swfobject.getObjectById("video-player-content").brPlayerPause()}this._onClose=onClose;var modal=this.modal(isNoClose),content=modal.overlay.find("#bmn-overlay-inner");var elmType=typeof(elm);if(elmType==="string"){content.html(elm)}else{if(elmType!=="undefined"){content.empty().append(elm)}}if($.isFunction(window.__trkBeforeShow)){$("embed,object,select,canvas").css("visibility","hidden");window.__trkBeforeShow()}this.reposition(modal);modal.mask.fadeIn();modal.overlay.fadeIn();$(document).scrollTop($("#bmn-overlay").offset().top-100);if($(window).width()<=960){$(document).scrollLeft($("#bmn-overlay").offset().left-20)}},hide:function(){if(typeof swfobject!="undefined"&&swfobject.getObjectById("video-player-content")!=null&&typeof swfobject.getObjectById("video-player-content").brPlayerPlay==="function"){swfobject.getObjectById("video-player-content").brPlayerPlay()}var modal=this.modal();var isCancelClose=this.onClose();if(!isCancelClose){if($.isFunction(window.__trkBeforeHide)){$("embed,object,select,canvas").css("visibility","visible");window.__trkBeforeHide()}modal.overlay.fadeOut(400,function(){var elem=BRK.overlay.modal().overlay;if(elem.hasClass("captcha")){elem.removeClass("captcha")}$(this).find("#bmn-overlay-inner").removeClass("no-style")});modal.mask.fadeOut(400);$("#myytplayer").css("visibility","visible")}}};BRK.comm={response:function(response){if($.isFunction(this._cb)){this._cb(JSON.parse(response))}},_cb:undefined,submit:function(message,cb){this._cb=cb;this.socket.postMessage(JSON.stringify(message))},getSubmit:function(message,cb){$.get(message.action,cb)},socket:undefined,init:function(initCb){if(typeof(BRK.AuthServer)==="undefined"){BRK.AuthServer=(navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1)?"http://auth.break.com":"http://auth.break.com"}this.socket=new xdm.Socket({remote:BRK.AuthServer.concat((navigator.userAgent.toLowerCase().indexOf("iphone")>-1||navigator.userAgent.toLowerCase().indexOf("ipad")>-1||navigator.userAgent.toLowerCase().indexOf("ipod")>-1)?"/provider.html":"/provider2.html"),onMessage:function(message,origin){BRK.comm.response(message)},onReady:function(message,origin){BRK.api.getSession(initCb)}})}};BRK.api={openPixel:function(trackViewSrc){if($("#__brk_tracking").length==0){var trackingDiv=document.createElement("div");trackingDiv.id="__brk_tracking";trackingDiv.width=0;trackingDiv.height=0;trackingDiv.style.display="none";document.body.appendChild(trackingDiv)}var trackPage=document.createElement("img");trackPage.id="brk_track_"+Math.random()*111;trackPage.src=trackViewSrc+"&rndmn="+Math.random()*111;trackPage.width=0;trackPage.height=0;trackPage.style.display="none";document.getElementById("__brk_tracking").appendChild(trackPage)},fbLogout:function(){try{FB.logout()}catch(e){}},fbSilentLogon:function(){var newsLetterOptInOffered=true;if($("#bmn-register-breakdown-modal").html()==null){newsLetterOptInOffered=false}var newsLetter=false;if(typeof $("#bmn-register-breakdown-modal")[0]!="undefined"){newsLetter=$("#bmn-register-breakdown-modal")[0].checked}FB.api("/me?fields=id,name,first_name,last_name,picture,email,birthday,gender,location",function(apiResp){FB.api("/me/friends",function(apiFriendsResp){var avatarUrl="";if(typeof apiResp.picture==="undefined"){return}else{if(typeof apiResp.picture.url!="undefined"){avatarUrl=apiResp.picture.url}else{if(typeof apiResp.picture.data.url!="undefined"){avatarUrl=apiResp.picture.data.url}else{if(typeof apiResp.picture==="string"){avatarUrl=apiResp.picture}}}}var fbLocationName="";if(typeof apiResp.location!="undefined"&&typeof apiResp.location.name!="undefined"){fbLocationName=apiResp.location.name}var numberOfFriends=0;if(typeof apiFriendsResp.data!="undefined"){numberOfFriends=apiFriendsResp.data.length}if(apiResp.email==="undefined"||apiResp.email==null){if(!Cookie.get("brk_nr")){Cookie.set("brk_nr","true",30);BRK.api.fbLogon()}}else{Cookie.remove("brk_nr");var user={FacebookId:apiResp.id,Email:apiResp.email,FirstName:apiResp.first_name,LastName:apiResp.last_name,BornDate:new Date(Date.parse(apiResp.birthday)),AvatarUrl:avatarUrl,OccasionalOffers:false,NewsLetter:newsLetter,AppId:BRK.siteId,Gender:apiResp.gender,City:fbLocationName,NumberOfFriends:numberOfFriends,NewsLetterOptInOffered:newsLetterOptInOffered};var message={method:"post",payload:{response:JSON.stringify({User:user})},action:BRK.AuthServer+"/auth/fblogon"};BRK.comm.submit(message,function(response){if(response.Status==="success"){if(response.User!=null&&response.User.Id>0){if($.isFunction(window.brknetPostFbLogon)&&window.location.toString().indexOf("info.break.com")==-1){window.brknetPostFbLogon(response.User);BRK.api.setauthcookie(response.User)}if(response.User.NewsLetterOptInOffered){BRK.hat.showNewsletterModal()}}else{if(response.User!=null&&response.User.Id==0){}else{BRK.api.reload()}}}else{BRK.overlay.show("<h4>"+response.Status+"</h4><p>"+response.Message+"</p>");BRK.api.fbLogout()}})}})},{scope:"user_birthday,email,publish_actions"})},fbLogon:function(){FB.login(function(fbResp){if(!fbResp.authResponse||fbResp.status==="unkown"){return}BRK.api.fbSilentLogon()},{scope:"user_birthday,email,publish_actions"})},logon:function(email,password,rememberMe,cb){BRK.comm.submit({method:"post",payload:{email:email,password:password},action:BRK.AuthServer+"/auth/logon"},function(response){if($.isFunction(cb)){cb(response)}if(response.Status&&response.Status==="success"){if(rememberMe==="checked"){Cookie.set("brk_hostsite_RM",response.User.Email,365)}else{Cookie.remove("brk_hostsite_RM")}if($.isFunction(window.brknetLoginExecuted)&&window.location.toString().indexOf("info.break.com")==-1){BRK.api.setSession(response.User);window.brknetLoginExecuted(response.User);BRK.api.setauthcookie(response.User)}else{BRK.api.reload()}}})},setauthcookie:function(responseUser){var requestMethod=(navigator.userAgent.toLowerCase().indexOf("safari")>-1)?"get":"post";if(responseUser){if(!Cookie.get("brk_auth")){BRK.comm.submit({method:requestMethod,payload:{},action:BRK.AuthServer+"/auth/GetAuthorizationToken"},function(authResponse){if(authResponse){Cookie.set("brk_auth",authResponse.encryptedAccessToken,0)}})}}else{Cookie.remove("brk_auth")}},logout:function(){BRK.api.fbLogout();BRK.comm.submit({method:"post",payload:{},action:BRK.AuthServer+"/auth/logout"},function(response){if($.isFunction(window.brknetPostLogout)){window.brknetPostLogout(response)}else{var wait=setTimeout(function(){BRK.api.reload()},500)}})},register:function(user,successCb,errorCb,hasCaptcha){var CptResponse="",CptChallenge="";if(hasCaptcha){CptResponse=Recaptcha.get_response();CptChallenge=Recaptcha.get_challenge()}var message={method:"post",payload:{response:JSON.stringify({User:user,CptResponse:CptResponse,CptChallenge:CptChallenge})},action:BRK.AuthServer+"/auth/register"};BRK.comm.submit(message,function(response){if(response.Status&&response.Status==="error"){if($.isFunction(errorCb)){errorCb(response)}return}if($.isFunction(successCb)){successCb(response)}})},verifyUser:function(username,regcode,cb){BRK.comm.submit({method:"post",payload:{username:username,regcode:regcode,siteid:BRK.siteId},action:BRK.AuthServer+"/auth/verify"},function(response){if($.isFunction(cb)){cb(response)}})},getSession:function(cb){var requestMethod=(navigator.userAgent.toLowerCase().indexOf("safari")>-1)?"get":"post";BRK.comm.submit({method:requestMethod,payload:{},action:BRK.AuthServer+"/auth/isloggedin"},function(response){BRK.api.setSession(response.User);if($.isFunction(cb)){cb(response)}if($.isFunction(window.brknetPostSession)){window.brknetPostSession(response)}BRK.api.setauthcookie(response.User)})},isLoggedIn:function(){if(!this.session){try{this.session=JSON.parse(Cookie.get(this.sessionKey))}catch(e){}}if(this.session){return true}return false},sessionKey:"brk_net_"+BRK.siteId,setSession:function(user){this.session=user;if(user){Cookie.set(this.sessionKey,JSON.stringify(user),90)}else{Cookie.remove(this.sessionKey);if($.isFunction(window.brknetClearSession)){window.brknetClearSession()}}},session:undefined,reload:function(){var currUrl=window.location.toString();var splitUrl=currUrl.split("#");window.location=splitUrl[0]}};BRK.hat={usernameRegEx:/^[\w\-_]{7,20}$/i,emailRegEx:/^[a-zA-Z0-9]+([_\.-]?[a-zA-Z0-9]+)*@[a-zA-Z0-9]+([\.-]?[a-zA-Z0-9]+)*(\.[a-zA-Z]{2,4})+$/i,slidesshowTimer:"featuredlist",fadeSpeed:1000,clickFadeSpeed:250,globalVars:{slideshowDelay:10000,pageNum:1,activeLI:0,totalLI:0,endOfList:false},fbConnect:function(){if(typeof BRK.api.session!="undefined"&&BRK.api.session!=null){var num=parseInt(BRK.api.session.Id);if(num>0){return}}BRK.api.fbSilentLogon()},setupLogin:function(){if(BRK.api.isLoggedIn()){if(FB.getLoginStatus){}var sess=BRK.api.session;if($.isFunction(window.brknetIsLoggedIn)){window.brknetIsLoggedIn(sess)}else{$.getJSON(BRK.AuthServer+"/auth/log?callback=?&type=brknetIsLoggedIn-undefined&url="+window.location+"__username"+sess.Username)}return}if($.isFunction(window.brknetNotLoggedIn)){window.brknetNotLoggedIn()}},verifyRegistration:function(){var params=new Qp(window.location.toString()),user=params.get("user"),verify=params.get("verify");if(user&&verify){BRK.api.verifyUser(user,verify,function(resp){if(resp.Status&&resp.Status==="error"){alert("We were unable to verify your account, please try again")}else{if(!resp.User){BRK.hat.showConfirmedModal()}else{if(resp.User!=null){if($.isFunction(window.brknetPostVerify)){window.brknetPostVerify(resp.User)}}}}})}},checkFieldHasData:function(elem){var elem=$(elem),valid=$.trim(elem.val())!=="";return valid},showRegModal:function(){var registrationReturnUrl=window.location.href;var html=' <div class="modal-box modal-login modal-reg"> 								<div class="modal-content clearfix"> 									<hgroup> 										<h1>Sign up with Break</h1> 									</hgroup> 									<p class="txt">Reasons to sign up:</p> 									<ul> 										<li>Share awesome with your friends</li> 										<li>Upload your videos</li> 										<li>Be the first to spot trending videos and photos</li> 										<li>Add Break to your Facebook Timeline</li> 									</ul> 									<div class="log-fb-button"><a id="bmn-fb-login-lb">Sign up using Facebook</a></div> 									<p class="link"><a href="http://www.break.com/user/register?registrationReturnUrl='+registrationReturnUrl+'">Or, continue signing up without Facebook »</a></p> 								</div> 							</div>';var reg=$(html);BRK.hat.bindRegEvents(BRK.overlay.modal().overlay);BRK.overlay.show(reg,function(){$(".modal-box").html("")})},showAfterRegModal:function(){var html='<div class="modal-box modal-forgot-password modal-forgot-password-ok"><div class="modal-content clearfix"><hgroup><h1>Check your email</h1><h2>We\'ve sent a confirmation email to the address you provided.</h2><h2>Please check your email and click on the link provided to confirm you\'re human.</h2></hgroup></div></div>';BRK.overlay.show(html,function(){var params=new Qp(window.location.href);var registrationReturnUrl=params.get("registrationReturnUrl");if(typeof registrationReturnUrl=="undefined"||registrationReturnUrl==null||registrationReturnUrl==""){registrationReturnUrl="http://www.break.com/"}window.location=registrationReturnUrl})},showConfirmedModal:function(){var html='<div class="modal-box modal-forgot-password modal-forgot-password-ok"><div class="modal-content clearfix"><hgroup><h1>Congratulations, you\'re human!</h1><h2>Your Break Media account has been confirmed!</h2></hgroup></div></div>';BRK.overlay.show(html,function(){window.location="http://www.break.com/"})},showCaptchaModal:function(user){var html=' <div class="modal-box modal-login modal-reg modal-captcha"> 								<form id="bmn-captcha-form" class="s-clear">									<div class="modal-content clearfix"> 										<hgroup> 											<h1>Sign up with Break</h1> 										</hgroup> 										<p><span style="color:#2a2a2a;">Loading...</span></p> 										<ul class="s-clear" style="visibility:hidden;"> 											<li id="hml-captcha-wrap"> 												<div id="brk_captcha_img"><!--captcha--></div> 											</li> 											<li><div class="bmn-form-validation bmn-form-val-thin error bmn-val" id="bmn-create-captcha-validation"> 												<span class="bmn-spr-y bmn-validation-icon"></span> 												<span class="bmn-form-validation-msg">Incorrect Captcha</span> 											</div></li> 											<li> 												<span class="bmn-btn-wrap"><button id="bmn-captcha-sign-in-btn" class="bmn-btn-lrg form-item-submit-button" type="button">Sign In!</button></span> 											</li> 										</ul> 									</div> 								</form> 							</div>';BRK.overlay.modal().overlay.addClass("captcha");BRK.overlay.show(html,function(){});load("http://www.google.com/recaptcha/api/js/recaptcha_ajax.js",false,function(){Recaptcha.create(BRK.RecaptchaKey,"brk_captcha_img",{theme:"white",callback:function(){$("#bmn-captcha-form").find("p").addClass("callout").html("Prove you're human and fill this out").next().css("visibility","visible")}})})},showLoginModal:function(){var emailVal=(Cookie.get("brk_hostsite_RM")!==undefined)?Cookie.get("brk_hostsite_RM"):"",checkboxVal=(emailVal!=="")?' checked="checked"':"";var $css;if(emailVal){$css=' style="display:none;" '}else{$css=""}var html=' <div class="modal-box modal-login"> 								<div class="modal-content clearfix"> 									<form class="s-clear" id="bmn-create-account-form"> 										<section class="left"> 											<hgroup> 												<h1>Log In with Facebook</h1> 												<h2>Recommended for instant log in</h2> 											</hgroup> 											<div class="log-fb-button"><a id="bmn-sigin-fb-login-lb">Log In with Facebook</a></div> 											<ul> 												<li>Share awesome with your friends</li> 												<li>Upload your videos</li> 												<li>Be the first to spot trending videos and photos</li> 												<li>Add Break to your Facebook Timeline</li> 											</ul> 										</section> 										<section class="right"> 											<hgroup> 												<h1>Log In with Break</h1> 												<h2>Login without using Facebook</h2> 											</hgroup> 											<div class="form-item-box form-item-mail" id="login-email"> 												<label for="bmn-signin-email" class="form-item-label">email</label><div class="form-item bmn-spr form-field-wrap"><label for="bmn-signin-email" class="form-item-input"><input type="text" value="'+emailVal+'" name="bmn-signin-email" id="bmn-signin-email"><i '+$css+'>Enter your e-mail</i></label><span class="form-item-icon">&nbsp;</span></div> 												<div class="bmn-form-validation bmn-val error" id="bmn-signin-email-validation"><span class="bmn-form-validation-msg error-info">Ok, that\'s a real email address.</span></div> 											</div> 											<div class="form-item-box form-item-password" id="login-password"> 												<label for="bmn-signin-password" class="form-item-label">password</label><div class="form-item bmn-spr form-field-wrap"><label for="bmn-signin-password" class="form-item-input"><input type="password" value="" name="bmn-signin-password" id="bmn-signin-password" class="bmn-spr bmn-form-field"><i>Enter your password</i></label><span class="form-item-icon">&nbsp;</span></div> 												<div class="bmn-form-validation bmn-val error" id="bmn-signin-password-validation"><span class="bmn-form-validation-msg error-info">&nbsp;</span></div> 											</div> 											<div id="signin-chkbx-fieldwrap" class="forgot-password"><a class="signin-form-toggle" href="">Forgot your password/email?</a></div> 											<div class="form-item-submit"> 												<span class="bmn-btn-wrap"><button id="bmn-sign-in-btn" class="bmn-btn-lrg form-item-submit-button" type="submit">Sign In!</button></span> 											</div> 										</section> 									</form> 								</div> 							</div>';BRK.hat.bindLoginEvents(BRK.overlay.modal().overlay);BRK.overlay.show(html)},showForgotPassModal:function(){var html=' <div class="modal-box modal-forgot-password"> 								<div class="modal-content form-length-300 clearfix"> 									<form class="s-clear" id="bmn-forgot-pass-modal"> 										<hgroup> 											<h1>Forgot Password</h1> 											<h2>Please enter your email and we\'ll send you a new temporary password.</h2> 										</hgroup> 										<div class="form-item-box form-item-mail"> 											<label for="bmn-forgotpass-modal-email" class="form-item-label">email</label><div class="bmn-spr form-field-wrap form-item"><label for="bmn-forgotpass-modal-email" class="form-item-input"><input type="text" value="" name="bmn-forgotpass-modal-email" id="bmn-forgotpass-modal-email"><i>Enter your email</i></label><span class="form-item-icon">&nbsp;</span></div> 											<div class="bmn-form-validation bmn-val" id="bmn-forgotpass-email-val"><span class="bmn-form-validation-msg error-info">Ok</span></div> 										</div> 										<div class="bmn-state-switch"><a class="signin-form-toggle" href="">&laquo; Back to sign in</a></div> 										<div class="form-item-submit"> 											<span class="bmn-btn-wrap"><button id="bmn-modal-reset-btn" class="bmn-btn-lrg form-item-submit-button" type="button">Reset Password</button></span> 										</div> 									</form> 								</div> 							</div>';BRK.hat.bindForgotPassEvents(BRK.overlay.modal().overlay);BRK.overlay.show(html)},showNewsletterModal:function(){var html=' <div class="modal-box modal-newsletter"> 								<div class="modal-content form-length-300 clearfix"> 									<form class="s-clear" id="bmn-create-account-form"> 										<hgroup> 											<h1>Don\'t forget!</h1> 											<h2>                                                 Sign up for our newsletter, The Breakdown.                                                 Once a week you’ll get our roundup of what not to miss.                                                 The other communications covers emails that we\'ll occasionally send out when we find something especially awesome. 											</h2> 										</hgroup> 										<div class="form-item-newsletter form-item-box-checkbox clearfix" id="register-newsletter"> 											<div class="form-checkbox">                                                 <div class="form-item-checkbox checked"> 												<input checked="checked" type="checkbox" name="bmn-register-newsletter" id="bmn-register-newsletter" value="yes">											    </div> 												<label for="bmn-register-newsletter" class="form-item-label">Rock on! Send me the Breakdown, the weekly newsletter.</label>											</div>                                            <div class="form-checkbox">                                                 <div class="form-item-checkbox checked"> 												<input checked="checked" type="checkbox" name="bmn-register-communications" id="bmn-register-communications" value="yes">											    </div> 												<label for="bmn-register-newsletter" class="form-item-label">Sign me up for the occasional update, special offers and other information from Break.</label>											</div>										</div>										<div class="form-item-submit"> 											<span class="bmn-btn-wrap"><button id="bmn-modal-newsletter-btn" class="bmn-btn-lrg form-item-submit-button" type="button">I\'m Done</button></span> 										</div> 									</form> 									<p class="disclaimer">* Reminder: You can always change this setting by visiting your profile section</p>								</div> 							</div>';BRK.hat.bindNewsletterEvents(BRK.overlay.modal().overlay);BRK.overlay.show(html,function(){var params=new Qp(window.location.href);var registrationReturnUrl=params.get("registrationReturnUrl");if(typeof registrationReturnUrl!="undefined"&&registrationReturnUrl!=null&&registrationReturnUrl!=""){window.location=registrationReturnUrl}})},validateRegUserName:function($this,$errorInfoDom,callback){var val=$this.val();if(!BRK.hat.usernameRegEx.test(val)){console.log(typeof BRK.hat.usernameRegEx.test(val));if(val===""){console.log(typeof val);msg="<strong>Username is blank</strong>Username should be 7-20 characters";BRK.hat.valMsg($errorInfoDom,msg,true);return false}else{msg="<strong>Username is invalid</strong>Username taken or not 7-20 characters";BRK.hat.valMsg($errorInfoDom,msg,true);return false}}else{$($errorInfoDom).addClass("success");$.getJSON(BRK.AuthServer+"/Auth/IsValidUserName.js/?callback=?",{username:val},function(data){if(data.isOk){$($errorInfoDom).removeClass("error").addClass("success");BRK.hat.valMsg($errorInfoDom,"OK",false)}else{errMsg="<strong>Username taken</strong>Please use a different username";BRK.hat.valMsg($errorInfoDom,errMsg,true)}if(typeof(callback)=="function"){eval(callback(data.isOk))}})}},validateRegEmail:function($this,$errorInfoDom,callback){var val=$this.val();if(!BRK.hat.emailRegEx.test(val)){if(val===""){errMsg="<strong>Email is blank</strong>Please fill in your email address";BRK.hat.valMsg($errorInfoDom,errMsg,true);return true}else{errMsg="<strong>Email is invalid</strong>Please check the Email format";BRK.hat.valMsg($errorInfoDom,errMsg,true);return true}}else{$.getJSON(BRK.AuthServer+"/Auth/IsValidEmail.js/?callback=?",{email:val},function(result){if(result.isOk){$($errorInfoDom).removeClass("error").addClass("success");BRK.hat.valMsg($errorInfoDom,"OK",false)}else{BRK.hat.valMsg($errorInfoDom,"<strong>Email is already registered</strong>Please login",true)}if(typeof(callback)=="function"){eval(callback(result.isOk))}})}},validateRegPassword:function($this,$errorInfoDom){var val=$this.val();if(val===""){BRK.hat.valMsg($errorInfoDom,"<strong>Password is blank</strong>Password should be longer than 7 characters",true);return true}else{if(val.length<7){BRK.hat.valMsg($errorInfoDom,"<strong>Password is too short</strong>Password should be longer than 7 characters",true);return true}else{$($errorInfoDom).removeClass("error").addClass("success");BRK.hat.valMsg($errorInfoDom,"OK",false);return false}}},validateRegPasswordConfirm:function($this,$password,$errorInfoDom){if($.trim($this)===""){msg="<strong>Confirm password is blank</strong>Please retype your password";BRK.hat.valMsg($errorInfoDom,msg,true);return true}else{if($.trim($this)!==$.trim($password)){msg="<strong>Passwords don't match</strong>Please retype your password";BRK.hat.valMsg($errorInfoDom,msg,true);return true}else{$($errorInfoDom).removeClass("error").addClass("success");BRK.hat.valMsg($errorInfoDom,"",false);return false}}},bindRegEvents:function(modal){modal.undelegate().delegate("#bmn-fb-login-lb","click",function(e){BRK.api.fbLogon()}).delegate(".form-item-checkbox","click",function(e){var $this=$(this),$input=$this.find("input");if(!$input.is(":checked")){$this.addClass("checked");$input.attr("checked","checked")}else{$this.removeClass("checked");$input.attr("checked",false)}})},bindLoginEvents:function(modal){modal.undelegate().delegate("#bmn-signin-create-account","click",function(e){e.preventDefault();BRK.hat.showRegModal()}).delegate(".form-item-input","focus",function(){$(this).find("i").animate({opacity:0.6},100)}).delegate(".form-item-input","blur",function(){$(this).find("i").animate({opacity:1},100)}).delegate(".form-item-input input","keyup",function(){if($(this).val()){$(this).next("i").hide()}else{$(this).next("i").show()}}).delegate("#bmn-sigin-fb-login-lb","click",function(e){e.preventDefault();BRK.api.openPixel("http://apex-ad.com/www/delivery/lg.php?bannerid=1612&cat_id=4259");BRK.api.fbLogon()}).delegate("#bmn-signin-forget-link","click",BRK.hat.showForgotPassModal).delegate(".signin-form-toggle","click",function(e){e.preventDefault();BRK.hat.showForgotPassModal()}).delegate("#bmn-sign-in-btn","click",function(e){e.preventDefault();BRK.api.openPixel("http://apex-ad.com/www/delivery/lg.php?bannerid=2030&cat_id=4265");var val=$.trim($("#bmn-signin-email").val());if(!BRK.hat.emailRegEx.test(val)){if(val===""){errMsg="<strong>Email is blank</strong>Please fill in your email address";BRK.hat.valMsg("#login-email",errMsg,true);return true}else{errMsg="<strong>Email is invalid</strong>Please check the Email format";BRK.hat.valMsg("#login-email",errMsg,true);return true}}else{$.getJSON(BRK.AuthServer+"/Auth/IsValidEmail.js/?callback=?",{email:val},function(result){if(!result.isOk){BRK.hat.valMsg("#login-email","",false);return false}else{errMsg="<strong>Email does't exist</strong>Please check email address";BRK.hat.valMsg("#login-email",errMsg,true);return true}})}var errors=0;if(!BRK.hat.valLoginModalPassword()){errors++}if(errors>0){return}var email=$.trim($("#bmn-signin-email").val()),password=$.trim($("#bmn-signin-password").val()),rememberMe=$("#bmn-signin-remember").attr("checked");BRK.api.logon(email,password,rememberMe,function(resp){if(resp.Status&&resp.Status==="error"){$(".form-item-password").removeClass("success");BRK.hat.valMsg("#bmn-signin-password-validation","<strong>Wrong Password</strong> The password is incorrect",true);BRK.api.openPixel("http://apex-ad.com/www/delivery/lg.php?bannerid=2030&cat_id=4267")}if(resp.Status&&resp.Status==="success"){var btn=$("#bmn-sign-in-btn"),msg='<span id="bmn-login-btn-msg">Succesful Sign In!</span>',t=null;btn.parent().css("position","relative");btn.css("visibility","hidden").parent().append(msg);BRK.api.openPixel("http://apex-ad.com/www/delivery/lg.php?bannerid=2030&cat_id=4266");t=setTimeout(function(){BRK.overlay.hide();if(jQuery.isFunction(window.BUI.controls.user.renderAccountUI)){BUI.controls.user.renderAccountUI(BRK.api.session)}},2000)}})});setTimeout(function(){$("#bmn-signin-email").focus()},0)},valLoginModalPassword:function(){var valid=$.trim($("#bmn-signin-password").val())!=="";BRK.hat.valMsg("#bmn-signin-password-validation",valid?"Ok":"<strong>Password is blank</strong>Enter your password",!valid);var dom=$("#bmn-signin-password").closest(".form-item-box");return valid},bindNewsletterEvents:function(modal){modal.undelegate().delegate(".form-item-checkbox","click",function(e){var $this=$(this);var $input=$this.find("input");if(!$input.is(":checked")){$this.addClass("checked");$input.attr("checked","checked")}else{$this.removeClass("checked");$input.attr("checked",false)}}).delegate("#bmn-modal-newsletter-btn","click",function(e){var enabledNewsletter=($("#bmn-register-newsletter:checked").val()==="yes")?true:false;var enabledCommunications=($("#bmn-register-communications:checked").val()==="yes")?true:false;$.getJSON(BRK.AuthServer+"/auth/UpdateEmailSettings?callback=?",{enableNewsLetter:enabledNewsletter,enableCommunications:enabledCommunications},function(result){BRK.overlay.hide()})})},bindForgotPassEvents:function(modal){modal.undelegate().delegate(".signin-form-toggle","click",function(e){e.preventDefault();BRK.hat.showLoginModal()}).delegate(".form-item-input","focus",function(){$(this).find("i").animate({opacity:0.6},100)}).delegate("#bmn-forgotpass-modal-email","blur",function(){$(this).next("i").animate({opacity:1},100)}).delegate("#bmn-forgotpass-modal-email","keyup",function(){if($(this).val()){$(this).next("i").hide()}else{$(this).next("i").show()}}).delegate("#bmn-modal-reset-btn","click",function(e){e.preventDefault();var em=$("#bmn-forgotpass-modal-email").val();if($.trim(em)===""){BRK.hat.valMsg("#bmn-forgotpass-email-val","<strong>Email is blank</strong>Enter your email",true);return false}if(!BRK.hat.emailRegEx.test(em)){errMsg="<strong>Email is invalid</strong>Please check the Email format";BRK.hat.valMsg("#bmn-forgotpass-email-val",errMsg,true);return false}$.getJSON(BRK.AuthServer+"/Profile/ResetPassword.js?callback=?",{email:em,client_id:BRK.siteId},function(result){if(result.success){BRK.overlay.show('<div class="modal-box modal-forgot-password modal-forgot-password-ok"><div class="modal-content clearfix"><hgroup><h1>Password Reset</h1><h2>Check your email. A temporary password has been sent to you.</h2></hgroup>')}else{BRK.hat.valMsg("#bmn-forgotpass-email-val","<strong>Email does't exist</strong>Please check email address",true)}})});setTimeout(function(){$("#bmn-forgotpass-modal-email").focus()},0)},valMsg:function(val,msg,isError){var valClass=isError?"error":"success";var $errorINFO=$(val).find(".error-info").html(msg);$(val).removeClass("error success").addClass(valClass).find(".error-info").html(msg).end().closest(".form-item-box,.form-item-box-checkbox,.form-item-box-select").removeClass("error success").addClass(valClass);$errorINFO.css("marginTop","-"+$errorINFO.outerHeight()/2+"px");var OK=0;var $form=$(val).closest(".modal-content");var $formItems=$form.find(".form-item-box,.form-item-box-checkbox,.form-item-box-select").not(".not-required");for(i=0;i<$formItems.length;i++){if($formItems.eq(i).hasClass("success")){OK++}}if(OK>=$formItems.length){$form.find(".form-item-submit-button").addClass("ok")}else{$form.find(".form-item-submit-button").removeClass("ok")}}};BRK.comm.init(function(){BRK.hat.setupLogin();BRK.hat.verifyRegistration();if(typeof(FB)!="undefined"&&FB!=null){BRK.hat.fbConnect()}})})})();