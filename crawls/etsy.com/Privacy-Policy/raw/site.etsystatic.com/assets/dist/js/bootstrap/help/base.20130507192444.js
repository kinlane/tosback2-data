(function(t,e){var i="/[^ws'\"-À-ÖØ-öø-ʯ]/g";e.Help=e.Help||{},e.Help.Search=function(e){this.form=t(e),this.searchField=this.form.find("input:text"),this.clearResults=this.form.find("a.clear-search-results"),this.searchResults=this.form.siblings("#search-results"),this.homeLink=t("#home-link"),this.searchResultsPerPage=5,this.defaultSearchInput=this.form.find(".search-field").val(),this.initFocusing(),this.initSearch(),this.initClearResults(),this.initNavigation(),this.initBackButton(),window.location.hash&&this.initHashSearch()},e.Help.Search.prototype={initFocusing:function(){var e=this;this.searchField.focus(function(){t(this).val()==e.defaultSearchInput&&t(this).val("").addClass("dark")}).blur(function(){""==t(this).val()&&t(this).val(e.defaultSearchInput).removeClass("dark")})},initSearch:function(){var e=this;this.form.submit(function(i){i.preventDefault();var s=e.searchField.val();s==e.defaultSearchInput||""==s?e.searchField.val("").focus():(t(this).addClass("highlight"),e.getSearchResults(s,0))})},initClearResults:function(){var e=this;this.clearResults.click(function(i){i.preventDefault(),t(this).hide(),e.searchResults.slideUp("slow"),e.searchField.val("").focus(),e.form.removeClass("highlight")})},initNavigation:function(){var e=this;this.searchResults.delegate("#navigation .link","click",function(i){i.preventDefault();var s=e.searchField.val(),n=t(this).data("offset");e.getSearchResults(s,n),window.scrollTo(0,e.searchField.offset().top)})},initBackButton:function(){var e=this;t(document).keyup(function(i){if(8===i.which&&!t(i.target).is("input, textarea"))if(i.preventDefault(),e.searchResults.find("#navigation .previous").length){var s=e.searchField.val(),n=e.searchResults.find("#navigation .previous").data("offset");e.getSearchResults(s,n)}else e.clearResults.click()})},initHashSearch:function(){var e=window.location.hash.substring(1),i=e.split("/"),s=i.pop(),n=(parseInt(s)-1)*this.searchResultsPerPage;(isNaN(n)||0>n)&&(n=0,i.push(s)),i.shift();var a=i.join(" "),r=t.trim(decodeURIComponent(a.replace(/%22/g,'"')));r&&(this.searchField.val(r),this.getSearchResults(r,n))},getSearchResults:function(s,n){(isNaN(n)||1>n)&&(n=0);var a=this,r=n/this.searchResultsPerPage+1,o=encodeURIComponent(s.replace(i,""));o&&(window.location.hash="/"+o.replace(/\s+/g,"/")+"/"+r,this.clearResults.slideUp("slow"),this.searchField.addClass("loading"),t.getJSON("/help/search/"+o+"/"+n+"?new_help=1",function(t){a.searchField.removeClass("loading"),a.clearResults.show(),a.searchResults.empty().append(t.search_results).slideDown("slow"),a.homeLink.length&&(e.homelink_position=a.homeLink.offset().top)}))}}})(window.jQuery,window.Etsy),window.Etsy.loader.loaded("help/search.20130507192444.js"),function(t,e){new e.Help.Search("#question")}(window.jQuery,window.Etsy);