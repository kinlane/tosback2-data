(function(c,e){e.Help=e.Help||{};e.Help.Search=function(a){this.form=c(a);this.searchField=this.form.find("input:text");this.clearResults=this.form.find("a.clear-search-results");this.searchResults=this.form.siblings("#search-results");this.homeLink=c("#home-link");this.searchResultsPerPage=5;this.initFocusing();this.initSearch();this.initClearResults();this.initNavigation();this.initBackButton();window.location.hash&&this.initHashSearch()};e.Help.Search.prototype={initFocusing:function(){var a=this.form.find(".search-field").val();
this.searchField.focus(function(){c(this).val()==a&&c(this).val("").addClass("dark")}).blur(function(){c(this).val()==""&&c(this).val(a).removeClass("dark")})},initSearch:function(){var a=this;this.form.submit(function(b){b.preventDefault();if(b=a.searchField.val()){c(this).addClass("highlight");a.getSearchResults(b,0)}})},initClearResults:function(){var a=this;this.clearResults.click(function(b){b.preventDefault();c(this).hide();a.searchResults.hide();a.searchField.val("").focus();a.form.removeClass("highlight")})},
initNavigation:function(){var a=this;this.searchResults.delegate("#navigation .link","click",function(b){b.preventDefault();b=a.searchField.val();var d=c(this).data("offset");a.getSearchResults(b,d);window.scrollTo(0,a.searchField.offset().top)})},initBackButton:function(){var a=this;c(document).keyup(function(b){if(b.which===8&&!c(b.target).is("input, textarea")){b.preventDefault();if(a.searchResults.find("#navigation .previous").length){b=a.searchField.val();var d=a.searchResults.find("#navigation .previous").data("offset");
a.getSearchResults(b,d)}else a.clearResults.click()}})},initHashSearch:function(){var a=window.location.hash.substring(1).split("/"),b=a.pop(),d=(parseInt(b)-1)*this.searchResultsPerPage;if(isNaN(d)||d<0){d=0;a.push(b)}a.shift();a=a.join(" ");if(a=c.trim(a.replace(/%22/g,'"'))){this.searchField.val(a);this.getSearchResults(a,d)}},getSearchResults:function(a,b){if(isNaN(b)||b<1)b=0;var d=this,g=b/this.searchResultsPerPage+1,f=a.replace("/[^ws'\"-\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02af]/g","");if(f){window.location.hash=
"/"+f.replace(/\s+/g,"/")+"/"+g;this.clearResults.hide();this.searchField.addClass("loading");c.getJSON("/help/search/"+f+"/"+b+"?new_help=1",function(h){d.searchField.removeClass("loading");d.clearResults.show();d.searchResults.empty().append(h.search_results).show();if(d.homeLink.length)e.homelink_position=d.homeLink.offset().top})}}}})(window.jQuery,window.Etsy);window.Etsy.loader.loaded("help/search.20121113201650.js");(function(c,e){new e.Help.Search("#question")})(window.jQuery,window.Etsy);
