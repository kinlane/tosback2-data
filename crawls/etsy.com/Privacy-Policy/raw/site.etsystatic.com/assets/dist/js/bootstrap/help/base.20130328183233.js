(function(t,e){var i="/[^ws'\"-À-ÖØ-öø-ʯ]/g";e.Help=e.Help||{},e.Help.Search=function(e){this.form=t(e),this.searchField=this.form.find("input:text"),this.clearResults=this.form.find("a.clear-search-results"),this.searchResults=this.form.siblings("#search-results"),this.homeLink=t("#home-link"),this.searchResultsPerPage=5,this.defaultSearchInput=this.form.find(".search-field").val(),this.initFocusing(),this.initSearch(),this.initClearResults(),this.initNavigation(),this.initBackButton(),window.location.hash&&this.initHashSearch()},e.Help.Search.prototype={initFocusing:function(){var e=this;this.searchField.focus(function(){t(this).val()==e.defaultSearchInput&&t(this).val("").addClass("dark")}).blur(function(){""==t(this).val()&&t(this).val(e.defaultSearchInput).removeClass("dark")})},initSearch:function(){var e=this;this.form.submit(function(i){i.preventDefault();var n=e.searchField.val();n==e.defaultSearchInput||""==n?e.searchField.val("").focus():(t(this).addClass("highlight"),e.getSearchResults(n,0))})},initClearResults:function(){var e=this;this.clearResults.click(function(i){i.preventDefault(),t(this).hide(),e.searchResults.slideUp("slow"),e.searchField.val("").focus(),e.form.removeClass("highlight")})},initNavigation:function(){var e=this;this.searchResults.delegate("#navigation .link","click",function(i){i.preventDefault();var n=e.searchField.val(),r=t(this).data("offset");e.getSearchResults(n,r),window.scrollTo(0,e.searchField.offset().top)})},initBackButton:function(){var e=this;t(document).keyup(function(i){if(8===i.which&&!t(i.target).is("input, textarea"))if(i.preventDefault(),e.searchResults.find("#navigation .previous").length){var n=e.searchField.val(),r=e.searchResults.find("#navigation .previous").data("offset");e.getSearchResults(n,r)}else e.clearResults.click()})},initHashSearch:function(){var e=window.location.hash.substring(1),i=e.split("/"),n=i.pop(),r=(parseInt(n)-1)*this.searchResultsPerPage;(isNaN(r)||0>r)&&(r=0,i.push(n)),i.shift();var a=i.join(" "),s=t.trim(decodeURIComponent(a.replace(/%22/g,'"')));s&&(this.searchField.val(s),this.getSearchResults(s,r))},getSearchResults:function(n,r){(isNaN(r)||1>r)&&(r=0);var a=this,s=r/this.searchResultsPerPage+1,o=encodeURIComponent(n.replace(i,""));o&&(window.location.hash="/"+o.replace(/\s+/g,"/")+"/"+s,this.clearResults.slideUp("slow"),this.searchField.addClass("loading"),t.getJSON("/help/search/"+o+"/"+r+"?new_help=1",function(t){a.searchField.removeClass("loading"),a.clearResults.show(),a.searchResults.empty().append(t.search_results).slideDown("slow"),a.homeLink.length&&(e.homelink_position=a.homeLink.offset().top)}))}}})(window.jQuery,window.Etsy),window.Etsy.loader.loaded("help/search.20130328183233.js"),function(t,e){new e.Help.Search("#question")}(window.jQuery,window.Etsy);