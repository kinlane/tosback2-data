
if(typeof(AR)=="undefined"){AR={};}
(function(window,undefined){var document=window.document;var jQuery=(function(){var jQuery=function(selector,context){return new jQuery.fn.init(selector,context);},_jQuery=window.jQuery,_$=window.$,rootjQuery,quickExpr=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,isSimple=/^.[^:#\[\.,]*$/,rnotwhite=/\S/,rwhite=/\s/,trimLeft=/^\s+/,trimRight=/\s+$/,rnonword=/\W/,rdigit=/\d/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rwebkit=/(webkit)[ \/]([\w.]+)/,ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/,rmsie=/(msie) ([\w.]+)/,rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/,userAgent=navigator.userAgent,browserMatch,readyBound=false,readyList=[],DOMContentLoaded,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,trim=String.prototype.trim,indexOf=Array.prototype.indexOf,class2type={};jQuery.fn=jQuery.prototype={init:function(selector,context){var match,elem,ret,doc;if(!selector){return this;}
if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this;}
if(selector==="body"&&!context&&document.body){this.context=document;this[0]=document.body;this.selector="body";this.length=1;return this;}
if(typeof selector==="string"){match=quickExpr.exec(selector);if(match&&(match[1]||!context)){if(match[1]){doc=(context?context.ownerDocument||context:document);ret=rsingleTag.exec(selector);if(ret){if(jQuery.isPlainObject(context)){selector=[document.createElement(ret[1])];jQuery.fn.attr.call(selector,context,true);}else{selector=[doc.createElement(ret[1])];}}else{ret=jQuery.buildFragment([match[1]],[doc]);selector=(ret.cacheable?ret.fragment.cloneNode(true):ret.fragment).childNodes;}
return jQuery.merge(this,selector);}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2]){return rootjQuery.find(selector);}
this.length=1;this[0]=elem;}
this.context=document;this.selector=selector;return this;}}else if(!context&&!rnonword.test(selector)){this.selector=selector;this.context=document;selector=document.getElementsByTagName(selector);return jQuery.merge(this,selector);}else if(!context||context.jquery){return(context||rootjQuery).find(selector);}else{return jQuery(context).find(selector);}}else if(jQuery.isFunction(selector)){return rootjQuery.ready(selector);}
if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context;}
return jQuery.makeArray(selector,this);},selector:"",jquery:"1.4.4",length:0,size:function(){return this.length;},toArray:function(){return slice.call(this,0);},get:function(num){return num==null?this.toArray():(num<0?this.slice(num)[0]:this[num]);},pushStack:function(elems,name,selector){var ret=jQuery();if(jQuery.isArray(elems)){push.apply(ret,elems);}else{jQuery.merge(ret,elems);}
ret.prevObject=this;ret.context=this.context;if(name==="find"){ret.selector=this.selector+(this.selector?" ":"")+selector;}else if(name){ret.selector=this.selector+"."+name+"("+selector+")";}
return ret;},each:function(callback,args){return jQuery.each(this,callback,args);},ready:function(fn){jQuery.bindReady();if(jQuery.isReady){fn.call(document,jQuery);}else if(readyList){readyList.push(fn);}
return this;},eq:function(i){return i===-1?this.slice(i):this.slice(i,+i+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},slice:function(){return this.pushStack(slice.apply(this,arguments),"slice",slice.call(arguments).join(","));},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},end:function(){return this.prevObject||jQuery(null);},push:push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2;}
if(typeof target!=="object"&&!jQuery.isFunction(target)){target={};}
if(length===i){target=this;--i;}
for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[];}else{clone=src&&jQuery.isPlainObject(src)?src:{};}
target[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};jQuery.extend({noConflict:function(deep){window.$=_$;if(deep){window.jQuery=_jQuery;}
return jQuery;},isReady:false,readyWait:1,ready:function(wait){if(wait===true){jQuery.readyWait--;}
if(!jQuery.readyWait||(wait!==true&&!jQuery.isReady)){if(!document.body){return setTimeout(jQuery.ready,1);}
jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return;}
if(readyList){var fn,i=0,ready=readyList;readyList=null;while((fn=ready[i++])){fn.call(document,jQuery);}
if(jQuery.fn.trigger){jQuery(document).trigger("ready").unbind("ready");}}}},bindReady:function(){if(readyBound){return;}
readyBound=true;if(document.readyState==="complete"){return setTimeout(jQuery.ready,1);}
if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",jQuery.ready,false);}else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",jQuery.ready);var toplevel=false;try{toplevel=window.frameElement==null;}catch(e){}
if(document.documentElement.doScroll&&toplevel){doScrollCheck();}}},isFunction:function(obj){return jQuery.type(obj)==="function";},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array";},isWindow:function(obj){return obj&&typeof obj==="object"&&"setInterval"in obj;},isNaN:function(obj){return obj==null||!rdigit.test(obj)||isNaN(obj);},type:function(obj){return obj==null?String(obj):class2type[toString.call(obj)]||"object";},isPlainObject:function(obj){if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false;}
if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false;}
var key;for(key in obj){}
return key===undefined||hasOwn.call(obj,key);},isEmptyObject:function(obj){for(var name in obj){return false;}
return true;},error:function(msg){throw msg;},parseJSON:function(data){if(typeof data!=="string"||!data){return null;}
data=jQuery.trim(data);if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return window.JSON&&window.JSON.parse?window.JSON.parse(data):(new Function("return "+data))();}else{jQuery.error("Invalid JSON: "+data);}},noop:function(){},globalEval:function(data){if(data&&rnotwhite.test(data)){var head=document.getElementsByTagName("head")[0]||document.documentElement,script=document.createElement("script");script.type="text/javascript";if(jQuery.support.scriptEval){script.appendChild(document.createTextNode(data));}else{script.text=data;}
head.insertBefore(script,head.firstChild);head.removeChild(script);}},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase();},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args){if(isObj){for(name in object){if(callback.apply(object[name],args)===false){break;}}}else{for(;i<length;){if(callback.apply(object[i++],args)===false){break;}}}}else{if(isObj){for(name in object){if(callback.call(object[name],name,object[name])===false){break;}}}else{for(var value=object[0];i<length&&callback.call(value,i,value)!==false;value=object[++i]){}}}
return object;},trim:trim?function(text){return text==null?"":trim.call(text);}:function(text){return text==null?"":text.toString().replace(trimLeft,"").replace(trimRight,"");},makeArray:function(array,results){var ret=results||[];if(array!=null){var type=jQuery.type(array);if(array.length==null||type==="string"||type==="function"||type==="regexp"||jQuery.isWindow(array)){push.call(ret,array);}else{jQuery.merge(ret,array);}}
return ret;},inArray:function(elem,array){if(array.indexOf){return array.indexOf(elem);}
for(var i=0,length=array.length;i<length;i++){if(array[i]===elem){return i;}}
return-1;},merge:function(first,second){var i=first.length,j=0;if(typeof second.length==="number"){for(var l=second.length;j<l;j++){first[i++]=second[j];}}else{while(second[j]!==undefined){first[i++]=second[j++];}}
first.length=i;return first;},grep:function(elems,callback,inv){var ret=[],retVal;inv=!!inv;for(var i=0,length=elems.length;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal){ret.push(elems[i]);}}
return ret;},map:function(elems,callback,arg){var ret=[],value;for(var i=0,length=elems.length;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value;}}
return ret.concat.apply([],ret);},guid:1,proxy:function(fn,proxy,thisObject){if(arguments.length===2){if(typeof proxy==="string"){thisObject=fn;fn=thisObject[proxy];proxy=undefined;}else if(proxy&&!jQuery.isFunction(proxy)){thisObject=proxy;proxy=undefined;}}
if(!proxy&&fn){proxy=function(){return fn.apply(thisObject||this,arguments);};}
if(fn){proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++;}
return proxy;},access:function(elems,key,value,exec,fn,pass){var length=elems.length;if(typeof key==="object"){for(var k in key){jQuery.access(elems,k,key[k],exec,fn,value);}
return elems;}
if(value!==undefined){exec=!pass&&exec&&jQuery.isFunction(value);for(var i=0;i<length;i++){fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);}
return elems;}
return length?fn(elems[0],key):undefined;},now:function(){return(new Date()).getTime();},uaMatch:function(ua){ua=ua.toLowerCase();var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf("compatible")<0&&rmozilla.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"};},browser:{}});jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase();});browserMatch=jQuery.uaMatch(userAgent);if(browserMatch.browser){jQuery.browser[browserMatch.browser]=true;jQuery.browser.version=browserMatch.version;}
if(jQuery.browser.webkit){jQuery.browser.safari=true;}
if(indexOf){jQuery.inArray=function(elem,array){return indexOf.call(array,elem);};}
if(!rwhite.test("\xA0")){trimLeft=/^[\s\xA0]+/;trimRight=/[\s\xA0]+$/;}
rootjQuery=jQuery(document);if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);jQuery.ready();};}else if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);jQuery.ready();}};}
function doScrollCheck(){if(jQuery.isReady){return;}
try{document.documentElement.doScroll("left");}catch(e){setTimeout(doScrollCheck,1);return;}
jQuery.ready();}
return(window.jQuery=window.$=jQuery);})();(function(){jQuery.support={};var root=document.documentElement,script=document.createElement("script"),div=document.createElement("div"),id="script"+jQuery.now();div.style.display="none";div.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var all=div.getElementsByTagName("*"),a=div.getElementsByTagName("a")[0],select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));if(!all||!all.length||!a){return;}
jQuery.support={leadingWhitespace:div.firstChild.nodeType===3,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/red/.test(a.getAttribute("style")),hrefNormalized:a.getAttribute("href")==="/a",opacity:/^0.55$/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:div.getElementsByTagName("input")[0].value==="on",optSelected:opt.selected,deleteExpando:true,optDisabled:false,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableHiddenOffsets:true};select.disabled=true;jQuery.support.optDisabled=!opt.disabled;script.type="text/javascript";try{script.appendChild(document.createTextNode("window."+id+"=1;"));}catch(e){}
root.insertBefore(script,root.firstChild);if(window[id]){jQuery.support.scriptEval=true;delete window[id];}
try{delete script.test;}catch(e){jQuery.support.deleteExpando=false;}
root.removeChild(script);if(div.attachEvent&&div.fireEvent){div.attachEvent("onclick",function click(){jQuery.support.noCloneEvent=false;div.detachEvent("onclick",click);});div.cloneNode(true).fireEvent("onclick");}
div=document.createElement("div");div.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";var fragment=document.createDocumentFragment();fragment.appendChild(div.firstChild);jQuery.support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;jQuery(function(){var div=document.createElement("div");div.style.width=div.style.paddingLeft="1px";document.body.appendChild(div);jQuery.boxModel=jQuery.support.boxModel=div.offsetWidth===2;if("zoom"in div.style){div.style.display="inline";div.style.zoom=1;jQuery.support.inlineBlockNeedsLayout=div.offsetWidth===2;div.style.display="";div.innerHTML="<div style='width:4px;'></div>";jQuery.support.shrinkWrapBlocks=div.offsetWidth!==2;}
div.innerHTML="<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";var tds=div.getElementsByTagName("td");jQuery.support.reliableHiddenOffsets=tds[0].offsetHeight===0;tds[0].style.display="";tds[1].style.display="none";jQuery.support.reliableHiddenOffsets=jQuery.support.reliableHiddenOffsets&&tds[0].offsetHeight===0;div.innerHTML="";document.body.removeChild(div).style.display="none";div=tds=null;});var eventSupported=function(eventName){var el=document.createElement("div");eventName="on"+eventName;var isSupported=(eventName in el);if(!isSupported){el.setAttribute(eventName,"return;");isSupported=typeof el[eventName]==="function";}
el=null;return isSupported;};jQuery.support.submitBubbles=eventSupported("submit");jQuery.support.changeBubbles=eventSupported("change");root=script=div=all=a=null;})();var windowData={},rbrace=/^(?:\{.*\}|\[.*\])$/;jQuery.extend({cache:{},uuid:0,expando:"jQuery"+jQuery.now(),noData:{"embed":true,"object":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000","applet":true},data:function(elem,name,data){if(!jQuery.acceptData(elem)){return;}
elem=elem==window?windowData:elem;var isNode=elem.nodeType,id=isNode?elem[jQuery.expando]:null,cache=jQuery.cache,thisCache;if(isNode&&!id&&typeof name==="string"&&data===undefined){return;}
if(!isNode){cache=elem;}else if(!id){elem[jQuery.expando]=id=++jQuery.uuid;}
if(typeof name==="object"){if(isNode){cache[id]=jQuery.extend(cache[id],name);}else{jQuery.extend(cache,name);}}else if(isNode&&!cache[id]){cache[id]={};}
thisCache=isNode?cache[id]:cache;if(data!==undefined){thisCache[name]=data;}
return typeof name==="string"?thisCache[name]:thisCache;},removeData:function(elem,name){if(!jQuery.acceptData(elem)){return;}
elem=elem==window?windowData:elem;var isNode=elem.nodeType,id=isNode?elem[jQuery.expando]:elem,cache=jQuery.cache,thisCache=isNode?cache[id]:id;if(name){if(thisCache){delete thisCache[name];if(isNode&&jQuery.isEmptyObject(thisCache)){jQuery.removeData(elem);}}}else{if(isNode&&jQuery.support.deleteExpando){delete elem[jQuery.expando];}else if(elem.removeAttribute){elem.removeAttribute(jQuery.expando);}else if(isNode){delete cache[id];}else{for(var n in elem){delete elem[n];}}}},acceptData:function(elem){if(elem.nodeName){var match=jQuery.noData[elem.nodeName.toLowerCase()];if(match){return!(match===true||elem.getAttribute("classid")!==match);}}
return true;}});jQuery.fn.extend({data:function(key,value){var data=null;if(typeof key==="undefined"){if(this.length){var attr=this[0].attributes,name;data=jQuery.data(this[0]);for(var i=0,l=attr.length;i<l;i++){name=attr[i].name;if(name.indexOf("data-")===0){name=name.substr(5);dataAttr(this[0],name,data[name]);}}}
return data;}else if(typeof key==="object"){return this.each(function(){jQuery.data(this,key);});}
var parts=key.split(".");parts[1]=parts[1]?"."+parts[1]:"";if(value===undefined){data=this.triggerHandler("getData"+parts[1]+"!",[parts[0]]);if(data===undefined&&this.length){data=jQuery.data(this[0],key);data=dataAttr(this[0],key,data);}
return data===undefined&&parts[1]?this.data(parts[0]):data;}else{return this.each(function(){var $this=jQuery(this),args=[parts[0],value];$this.triggerHandler("setData"+parts[1]+"!",args);jQuery.data(this,key,value);$this.triggerHandler("changeData"+parts[1]+"!",args);});}},removeData:function(key){return this.each(function(){jQuery.removeData(this,key);});}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){data=elem.getAttribute("data-"+key);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:!jQuery.isNaN(data)?parseFloat(data):rbrace.test(data)?jQuery.parseJSON(data):data;}catch(e){}
jQuery.data(elem,key,data);}else{data=undefined;}}
return data;}
jQuery.extend({queue:function(elem,type,data){if(!elem){return;}
type=(type||"fx")+"queue";var q=jQuery.data(elem,type);if(!data){return q||[];}
if(!q||jQuery.isArray(data)){q=jQuery.data(elem,type,jQuery.makeArray(data));}else{q.push(data);}
return q;},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift();if(fn==="inprogress"){fn=queue.shift();}
if(fn){if(type==="fx"){queue.unshift("inprogress");}
fn.call(elem,function(){jQuery.dequeue(elem,type);});}}});jQuery.fn.extend({queue:function(type,data){if(typeof type!=="string"){data=type;type="fx";}
if(data===undefined){return jQuery.queue(this[0],type);}
return this.each(function(i){var queue=jQuery.queue(this,type,data);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(){var elem=this;setTimeout(function(){jQuery.dequeue(elem,type);},time);});},clearQueue:function(type){return this.queue(type||"fx",[]);}});var rclass=/[\n\t]/g,rspaces=/\s+/,rreturn=/\r/g,rspecialurl=/^(?:href|src|style)$/,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea)?$/i,rradiocheck=/^(?:radio|checkbox)$/i;jQuery.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,name,value,true,jQuery.attr);},removeAttr:function(name,fn){return this.each(function(){jQuery.attr(this,name,"");if(this.nodeType===1){this.removeAttribute(name);}});},addClass:function(value){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);self.addClass(value.call(this,i,self.attr("class")));});}
if(value&&typeof value==="string"){var classNames=(value||"").split(rspaces);for(var i=0,l=this.length;i<l;i++){var elem=this[i];if(elem.nodeType===1){if(!elem.className){elem.className=value;}else{var className=" "+elem.className+" ",setClass=elem.className;for(var c=0,cl=classNames.length;c<cl;c++){if(className.indexOf(" "+classNames[c]+" ")<0){setClass+=" "+classNames[c];}}
elem.className=jQuery.trim(setClass);}}}}
return this;},removeClass:function(value){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);self.removeClass(value.call(this,i,self.attr("class")));});}
if((value&&typeof value==="string")||value===undefined){var classNames=(value||"").split(rspaces);for(var i=0,l=this.length;i<l;i++){var elem=this[i];if(elem.nodeType===1&&elem.className){if(value){var className=(" "+elem.className+" ").replace(rclass," ");for(var c=0,cl=classNames.length;c<cl;c++){className=className.replace(" "+classNames[c]+" "," ");}
elem.className=jQuery.trim(className);}else{elem.className="";}}}}
return this;},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);self.toggleClass(value.call(this,i,self.attr("class"),stateVal),stateVal);});}
return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspaces);while((className=classNames[i++])){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className);}}else if(type==="undefined"||type==="boolean"){if(this.className){jQuery.data(this,"__className__",this.className);}
this.className=this.className||value===false?"":jQuery.data(this,"__className__")||"";}});},hasClass:function(selector){var className=" "+selector+" ";for(var i=0,l=this.length;i<l;i++){if((" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1){return true;}}
return false;},val:function(value){if(!arguments.length){var elem=this[0];if(elem){if(jQuery.nodeName(elem,"option")){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text;}
if(jQuery.nodeName(elem,"select")){var index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==="select-one";if(index<0){return null;}
for(var i=one?index:0,max=one?index+1:options.length;i<max;i++){var option=options[i];if(option.selected&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value;}
values.push(value);}}
return values;}
if(rradiocheck.test(elem.type)&&!jQuery.support.checkOn){return elem.getAttribute("value")===null?"on":elem.value;}
return(elem.value||"").replace(rreturn,"");}
return undefined;}
var isFunction=jQuery.isFunction(value);return this.each(function(i){var self=jQuery(this),val=value;if(this.nodeType!==1){return;}
if(isFunction){val=value.call(this,i,self.val());}
if(val==null){val="";}else if(typeof val==="number"){val+="";}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+"";});}
if(jQuery.isArray(val)&&rradiocheck.test(this.type)){this.checked=jQuery.inArray(self.val(),val)>=0;}else if(jQuery.nodeName(this,"select")){var values=jQuery.makeArray(val);jQuery("option",this).each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0;});if(!values.length){this.selectedIndex=-1;}}else{this.value=val;}});}});jQuery.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(elem,name,value,pass){if(!elem||elem.nodeType===3||elem.nodeType===8){return undefined;}
if(pass&&name in jQuery.attrFn){return jQuery(elem)[name](value);}
var notxml=elem.nodeType!==1||!jQuery.isXMLDoc(elem),set=value!==undefined;name=notxml&&jQuery.props[name]||name;var special=rspecialurl.test(name);if(name==="selected"&&!jQuery.support.optSelected){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}}
if((name in elem||elem[name]!==undefined)&&notxml&&!special){if(set){if(name==="type"&&rtype.test(elem.nodeName)&&elem.parentNode){jQuery.error("type property can't be changed");}
if(value===null){if(elem.nodeType===1){elem.removeAttribute(name);}}else{elem[name]=value;}}
if(jQuery.nodeName(elem,"form")&&elem.getAttributeNode(name)){return elem.getAttributeNode(name).nodeValue;}
if(name==="tabIndex"){var attributeNode=elem.getAttributeNode("tabIndex");return attributeNode&&attributeNode.specified?attributeNode.value:rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined;}
return elem[name];}
if(!jQuery.support.style&&notxml&&name==="style"){if(set){elem.style.cssText=""+value;}
return elem.style.cssText;}
if(set){elem.setAttribute(name,""+value);}
if(!elem.attributes[name]&&(elem.hasAttribute&&!elem.hasAttribute(name))){return undefined;}
var attr=!jQuery.support.hrefNormalized&&notxml&&special?elem.getAttribute(name,2):elem.getAttribute(name);return attr===null?undefined:attr;}});var rnamespaces=/\.(.*)$/,rformElems=/^(?:textarea|input|select)$/i,rperiod=/\./g,rspace=/ /g,rescape=/[^\w\s.|`]/g,fcleanup=function(nm){return nm.replace(rescape,"\\$&");},focusCounts={focusin:0,focusout:0};jQuery.event={add:function(elem,types,handler,data){if(elem.nodeType===3||elem.nodeType===8){return;}
if(jQuery.isWindow(elem)&&(elem!==window&&!elem.frameElement)){elem=window;}
if(handler===false){handler=returnFalse;}else if(!handler){return;}
var handleObjIn,handleObj;if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;}
if(!handler.guid){handler.guid=jQuery.guid++;}
var elemData=jQuery.data(elem);if(!elemData){return;}
var eventKey=elem.nodeType?"events":"__events__",events=elemData[eventKey],eventHandle=elemData.handle;if(typeof events==="function"){eventHandle=events.handle;events=events.events;}else if(!events){if(!elem.nodeType){elemData[eventKey]=elemData=function(){};}
elemData.events=events={};}
if(!eventHandle){elemData.handle=eventHandle=function(){return typeof jQuery!=="undefined"&&!jQuery.event.triggered?jQuery.event.handle.apply(eventHandle.elem,arguments):undefined;};}
eventHandle.elem=elem;types=types.split(" ");var type,i=0,namespaces;while((type=types[i++])){handleObj=handleObjIn?jQuery.extend({},handleObjIn):{handler:handler,data:data};if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();handleObj.namespace=namespaces.slice(0).sort().join(".");}else{namespaces=[];handleObj.namespace="";}
handleObj.type=type;if(!handleObj.guid){handleObj.guid=handler.guid;}
var handlers=events[type],special=jQuery.event.special[type]||{};if(!handlers){handlers=events[type]=[];if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false);}else if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle);}}}
if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}
handlers.push(handleObj);jQuery.event.global[type]=true;}
elem=null;},global:{},remove:function(elem,types,handler,pos){if(elem.nodeType===3||elem.nodeType===8){return;}
if(handler===false){handler=returnFalse;}
var ret,type,fn,j,i=0,all,namespaces,namespace,special,eventType,handleObj,origType,eventKey=elem.nodeType?"events":"__events__",elemData=jQuery.data(elem),events=elemData&&elemData[eventKey];if(!elemData||!events){return;}
if(typeof events==="function"){elemData=events;events=events.events;}
if(types&&types.type){handler=types.handler;types=types.type;}
if(!types||typeof types==="string"&&types.charAt(0)==="."){types=types||"";for(type in events){jQuery.event.remove(elem,type+types);}
return;}
types=types.split(" ");while((type=types[i++])){origType=type;handleObj=null;all=type.indexOf(".")<0;namespaces=[];if(!all){namespaces=type.split(".");type=namespaces.shift();namespace=new RegExp("(^|\\.)"+
jQuery.map(namespaces.slice(0).sort(),fcleanup).join("\\.(?:.*\\.)?")+"(\\.|$)");}
eventType=events[type];if(!eventType){continue;}
if(!handler){for(j=0;j<eventType.length;j++){handleObj=eventType[j];if(all||namespace.test(handleObj.namespace)){jQuery.event.remove(elem,origType,handleObj.handler,j);eventType.splice(j--,1);}}
continue;}
special=jQuery.event.special[type]||{};for(j=pos||0;j<eventType.length;j++){handleObj=eventType[j];if(handler.guid===handleObj.guid){if(all||namespace.test(handleObj.namespace)){if(pos==null){eventType.splice(j--,1);}
if(special.remove){special.remove.call(elem,handleObj);}}
if(pos!=null){break;}}}
if(eventType.length===0||pos!=null&&eventType.length===1){if(!special.teardown||special.teardown.call(elem,namespaces)===false){jQuery.removeEvent(elem,type,elemData.handle);}
ret=null;delete events[type];}}
if(jQuery.isEmptyObject(events)){var handle=elemData.handle;if(handle){handle.elem=null;}
delete elemData.events;delete elemData.handle;if(typeof elemData==="function"){jQuery.removeData(elem,eventKey);}else if(jQuery.isEmptyObject(elemData)){jQuery.removeData(elem);}}},trigger:function(event,data,elem){var type=event.type||event,bubbling=arguments[3];if(!bubbling){event=typeof event==="object"?event[jQuery.expando]?event:jQuery.extend(jQuery.Event(type),event):jQuery.Event(type);if(type.indexOf("!")>=0){event.type=type=type.slice(0,-1);event.exclusive=true;}
if(!elem){event.stopPropagation();if(jQuery.event.global[type]){jQuery.each(jQuery.cache,function(){if(this.events&&this.events[type]){jQuery.event.trigger(event,data,this.handle.elem);}});}}
if(!elem||elem.nodeType===3||elem.nodeType===8){return undefined;}
event.result=undefined;event.target=elem;data=jQuery.makeArray(data);data.unshift(event);}
event.currentTarget=elem;var handle=elem.nodeType?jQuery.data(elem,"handle"):(jQuery.data(elem,"__events__")||{}).handle;if(handle){handle.apply(elem,data);}
var parent=elem.parentNode||elem.ownerDocument;try{if(!(elem&&elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()])){if(elem["on"+type]&&elem["on"+type].apply(elem,data)===false){event.result=false;event.preventDefault();}}}catch(inlineError){}
if(!event.isPropagationStopped()&&parent){jQuery.event.trigger(event,data,parent,true);}else if(!event.isDefaultPrevented()){var old,target=event.target,targetType=type.replace(rnamespaces,""),isClick=jQuery.nodeName(target,"a")&&targetType==="click",special=jQuery.event.special[targetType]||{};if((!special._default||special._default.call(elem,event)===false)&&!isClick&&!(target&&target.nodeName&&jQuery.noData[target.nodeName.toLowerCase()])){try{if(target[targetType]){old=target["on"+targetType];if(old){target["on"+targetType]=null;}
jQuery.event.triggered=true;target[targetType]();}}catch(triggerError){}
if(old){target["on"+targetType]=old;}
jQuery.event.triggered=false;}}},handle:function(event){var all,handlers,namespaces,namespace_re,events,namespace_sort=[],args=jQuery.makeArray(arguments);event=args[0]=jQuery.event.fix(event||window.event);event.currentTarget=this;all=event.type.indexOf(".")<0&&!event.exclusive;if(!all){namespaces=event.type.split(".");event.type=namespaces.shift();namespace_sort=namespaces.slice(0).sort();namespace_re=new RegExp("(^|\\.)"+namespace_sort.join("\\.(?:.*\\.)?")+"(\\.|$)");}
event.namespace=event.namespace||namespace_sort.join(".");events=jQuery.data(this,this.nodeType?"events":"__events__");if(typeof events==="function"){events=events.events;}
handlers=(events||{})[event.type];if(events&&handlers){handlers=handlers.slice(0);for(var j=0,l=handlers.length;j<l;j++){var handleObj=handlers[j];if(all||namespace_re.test(handleObj.namespace)){event.handler=handleObj.handler;event.data=handleObj.data;event.handleObj=handleObj;var ret=handleObj.handler.apply(this,args);if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation();}}
if(event.isImmediatePropagationStopped()){break;}}}}
return event.result;},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(event){if(event[jQuery.expando]){return event;}
var originalEvent=event;event=jQuery.Event(originalEvent);for(var i=this.props.length,prop;i;){prop=this.props[--i];event[prop]=originalEvent[prop];}
if(!event.target){event.target=event.srcElement||document;}
if(event.target.nodeType===3){event.target=event.target.parentNode;}
if(!event.relatedTarget&&event.fromElement){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement;}
if(event.pageX==null&&event.clientX!=null){var doc=document.documentElement,body=document.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}
if(event.which==null&&(event.charCode!=null||event.keyCode!=null)){event.which=event.charCode!=null?event.charCode:event.keyCode;}
if(!event.metaKey&&event.ctrlKey){event.metaKey=event.ctrlKey;}
if(!event.which&&event.button!==undefined){event.which=(event.button&1?1:(event.button&2?3:(event.button&4?2:0)));}
return event;},guid:1E8,proxy:jQuery.proxy,special:{ready:{setup:jQuery.bindReady,teardown:jQuery.noop},live:{add:function(handleObj){jQuery.event.add(this,liveConvert(handleObj.origType,handleObj.selector),jQuery.extend({},handleObj,{handler:liveHandler,guid:handleObj.handler.guid}));},remove:function(handleObj){jQuery.event.remove(this,liveConvert(handleObj.origType,handleObj.selector),handleObj);}},beforeunload:{setup:function(data,namespaces,eventHandle){if(jQuery.isWindow(this)){this.onbeforeunload=eventHandle;}},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle){this.onbeforeunload=null;}}}}};jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false);}}:function(elem,type,handle){if(elem.detachEvent){elem.detachEvent("on"+type,handle);}};jQuery.Event=function(src){if(!this.preventDefault){return new jQuery.Event(src);}
if(src&&src.type){this.originalEvent=src;this.type=src.type;}else{this.type=src;}
this.timeStamp=jQuery.now();this[jQuery.expando]=true;};function returnFalse(){return false;}
function returnTrue(){return true;}
jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.stopPropagation){e.stopPropagation();}
e.cancelBubble=true;},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation();},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var withinElement=function(event){var parent=event.relatedTarget;try{while(parent&&parent!==this){parent=parent.parentNode;}
if(parent!==this){event.type=event.data;jQuery.event.handle.apply(this,arguments);}}catch(e){}},delegate=function(event){event.type=event.data;jQuery.event.handle.apply(this,arguments);};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={setup:function(data){jQuery.event.add(this,fix,data&&data.selector?delegate:withinElement,orig);},teardown:function(data){jQuery.event.remove(this,fix,data&&data.selector?delegate:withinElement);}};});if(!jQuery.support.submitBubbles){jQuery.event.special.submit={setup:function(data,namespaces){if(this.nodeName.toLowerCase()!=="form"){jQuery.event.add(this,"click.specialSubmit",function(e){var elem=e.target,type=elem.type;if((type==="submit"||type==="image")&&jQuery(elem).closest("form").length){e.liveFired=undefined;return trigger("submit",this,arguments);}});jQuery.event.add(this,"keypress.specialSubmit",function(e){var elem=e.target,type=elem.type;if((type==="text"||type==="password")&&jQuery(elem).closest("form").length&&e.keyCode===13){e.liveFired=undefined;return trigger("submit",this,arguments);}});}else{return false;}},teardown:function(namespaces){jQuery.event.remove(this,".specialSubmit");}};}
if(!jQuery.support.changeBubbles){var changeFilters,getVal=function(elem){var type=elem.type,val=elem.value;if(type==="radio"||type==="checkbox"){val=elem.checked;}else if(type==="select-multiple"){val=elem.selectedIndex>-1?jQuery.map(elem.options,function(elem){return elem.selected;}).join("-"):"";}else if(elem.nodeName.toLowerCase()==="select"){val=elem.selectedIndex;}
return val;},testChange=function testChange(e){var elem=e.target,data,val;if(!rformElems.test(elem.nodeName)||elem.readOnly){return;}
data=jQuery.data(elem,"_change_data");val=getVal(elem);if(e.type!=="focusout"||elem.type!=="radio"){jQuery.data(elem,"_change_data",val);}
if(data===undefined||val===data){return;}
if(data!=null||val){e.type="change";e.liveFired=undefined;return jQuery.event.trigger(e,arguments[1],elem);}};jQuery.event.special.change={filters:{focusout:testChange,beforedeactivate:testChange,click:function(e){var elem=e.target,type=elem.type;if(type==="radio"||type==="checkbox"||elem.nodeName.toLowerCase()==="select"){return testChange.call(this,e);}},keydown:function(e){var elem=e.target,type=elem.type;if((e.keyCode===13&&elem.nodeName.toLowerCase()!=="textarea")||(e.keyCode===32&&(type==="checkbox"||type==="radio"))||type==="select-multiple"){return testChange.call(this,e);}},beforeactivate:function(e){var elem=e.target;jQuery.data(elem,"_change_data",getVal(elem));}},setup:function(data,namespaces){if(this.type==="file"){return false;}
for(var type in changeFilters){jQuery.event.add(this,type+".specialChange",changeFilters[type]);}
return rformElems.test(this.nodeName);},teardown:function(namespaces){jQuery.event.remove(this,".specialChange");return rformElems.test(this.nodeName);}};changeFilters=jQuery.event.special.change.filters;changeFilters.focus=changeFilters.beforeactivate;}
function trigger(type,elem,args){args[0].type=type;return jQuery.event.handle.apply(elem,args);}
if(document.addEventListener){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){jQuery.event.special[fix]={setup:function(){if(focusCounts[fix]++===0){document.addEventListener(orig,handler,true);}},teardown:function(){if(--focusCounts[fix]===0){document.removeEventListener(orig,handler,true);}}};function handler(e){e=jQuery.event.fix(e);e.type=fix;return jQuery.event.trigger(e,null,e.target);}});}
jQuery.each(["bind","one"],function(i,name){jQuery.fn[name]=function(type,data,fn){if(typeof type==="object"){for(var key in type){this[name](key,data,type[key],fn);}
return this;}
if(jQuery.isFunction(data)||data===false){fn=data;data=undefined;}
var handler=name==="one"?jQuery.proxy(fn,function(event){jQuery(this).unbind(event,handler);return fn.apply(this,arguments);}):fn;if(type==="unload"&&name!=="one"){this.one(type,data,fn);}else{for(var i=0,l=this.length;i<l;i++){jQuery.event.add(this[i],type,handler,data);}}
return this;};});jQuery.fn.extend({unbind:function(type,fn){if(typeof type==="object"&&!type.preventDefault){for(var key in type){this.unbind(key,type[key]);}}else{for(var i=0,l=this.length;i<l;i++){jQuery.event.remove(this[i],type,fn);}}
return this;},delegate:function(selector,types,data,fn){return this.live(types,data,fn,selector);},undelegate:function(selector,types,fn){if(arguments.length===0){return this.unbind("live");}else{return this.die(types,null,fn,selector);}},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){if(this[0]){var event=jQuery.Event(type);event.preventDefault();event.stopPropagation();jQuery.event.trigger(event,data,this[0]);return event.result;}},toggle:function(fn){var args=arguments,i=1;while(i<args.length){jQuery.proxy(fn,args[i++]);}
return this.click(jQuery.proxy(fn,function(event){var lastToggle=(jQuery.data(this,"lastToggle"+fn.guid)||0)%i;jQuery.data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false;}));},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});var liveMap={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};jQuery.each(["live","die"],function(i,name){jQuery.fn[name]=function(types,data,fn,origSelector){var type,i=0,match,namespaces,preType,selector=origSelector||this.selector,context=origSelector?this:jQuery(this.context);if(typeof types==="object"&&!types.preventDefault){for(var key in types){context[name](key,data,types[key],selector);}
return this;}
if(jQuery.isFunction(data)){fn=data;data=undefined;}
types=(types||"").split(" ");while((type=types[i++])!=null){match=rnamespaces.exec(type);namespaces="";if(match){namespaces=match[0];type=type.replace(rnamespaces,"");}
if(type==="hover"){types.push("mouseenter"+namespaces,"mouseleave"+namespaces);continue;}
preType=type;if(type==="focus"||type==="blur"){types.push(liveMap[type]+namespaces);type=type+namespaces;}else{type=(liveMap[type]||type)+namespaces;}
if(name==="live"){for(var j=0,l=context.length;j<l;j++){jQuery.event.add(context[j],"live."+liveConvert(type,selector),{data:data,selector:selector,handler:fn,origType:type,origHandler:fn,preType:preType});}}else{context.unbind("live."+liveConvert(type,selector),fn);}}
return this;};});function liveHandler(event){var stop,maxLevel,related,match,handleObj,elem,j,i,l,data,close,namespace,ret,elems=[],selectors=[],events=jQuery.data(this,this.nodeType?"events":"__events__");if(typeof events==="function"){events=events.events;}
if(event.liveFired===this||!events||!events.live||event.button&&event.type==="click"){return;}
if(event.namespace){namespace=new RegExp("(^|\\.)"+event.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)");}
event.liveFired=this;var live=events.live.slice(0);for(j=0;j<live.length;j++){handleObj=live[j];if(handleObj.origType.replace(rnamespaces,"")===event.type){selectors.push(handleObj.selector);}else{live.splice(j--,1);}}
match=jQuery(event.target).closest(selectors,event.currentTarget);for(i=0,l=match.length;i<l;i++){close=match[i];for(j=0;j<live.length;j++){handleObj=live[j];if(close.selector===handleObj.selector&&(!namespace||namespace.test(handleObj.namespace))){elem=close.elem;related=null;if(handleObj.preType==="mouseenter"||handleObj.preType==="mouseleave"){event.type=handleObj.preType;related=jQuery(event.relatedTarget).closest(handleObj.selector)[0];}
if(!related||related!==elem){elems.push({elem:elem,handleObj:handleObj,level:close.level});}}}}
for(i=0,l=elems.length;i<l;i++){match=elems[i];if(maxLevel&&match.level>maxLevel){break;}
event.currentTarget=match.elem;event.data=match.handleObj.data;event.handleObj=match.handleObj;ret=match.handleObj.origHandler.apply(match.elem,arguments);if(ret===false||event.isPropagationStopped()){maxLevel=match.level;if(ret===false){stop=false;}
if(event.isImmediatePropagationStopped()){break;}}}
return stop;}
function liveConvert(type,selector){return(type&&type!=="*"?type+".":"")+selector.replace(rperiod,"`").replace(rspace,"&");}
jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){if(fn==null){fn=data;data=null;}
return arguments.length>0?this.bind(name,data,fn):this.trigger(name);};if(jQuery.attrFn){jQuery.attrFn[name]=true;}});if(window.attachEvent&&!window.addEventListener){jQuery(window).bind("unload",function(){for(var id in jQuery.cache){if(jQuery.cache[id].handle){try{jQuery.event.remove(jQuery.cache[id].handle.elem);}catch(e){}}}});}
(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true;[0,0].sort(function(){baseHasDuplicate=false;return 0;});var Sizzle=function(selector,context,results,seed){results=results||[];context=context||document;var origContext=context;if(context.nodeType!==1&&context.nodeType!==9){return[];}
if(!selector||typeof selector!=="string"){return results;}
var m,set,checkSet,extra,ret,cur,pop,i,prune=true,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do{chunker.exec("");m=chunker.exec(soFar);if(m){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break;}}}while(m);if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context);}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift();}
set=posProcess(selector,set);}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0];}
if(context){ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set);}else{prune=false;}
while(parts.length){cur=parts.pop();pop=cur;if(!Expr.relative[cur]){cur="";}else{pop=parts.pop();}
if(pop==null){pop=context;}
Expr.relative[cur](checkSet,pop,contextXML);}}else{checkSet=parts=[];}}
if(!checkSet){checkSet=set;}
if(!checkSet){Sizzle.error(cur||selector);}
if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet);}else if(context&&context.nodeType===1){for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&Sizzle.contains(context,checkSet[i]))){results.push(set[i]);}}}else{for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i]);}}}}else{makeArray(checkSet,results);}
if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results);}
return results;};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1);}}}}
return results;};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set);};Sizzle.matchesSelector=function(node,expr){return Sizzle(expr,null,null,[node]).length>0;};Sizzle.find=function(expr,context,isXML){var set;if(!expr){return[];}
for(var i=0,l=Expr.order.length;i<l;i++){var match,type=Expr.order[i];if((match=Expr.leftMatch[type].exec(expr))){var left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(/\\/g,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break;}}}}
if(!set){set=context.getElementsByTagName("*");}
return{set:set,expr:expr};};Sizzle.filter=function(expr,set,inplace,not){var match,anyFound,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);while(expr&&set.length){for(var type in Expr.filter){if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){var found,item,filter=Expr.filter[type],left=match[1];anyFound=false;match.splice(1,1);if(left.substr(left.length-1)==="\\"){continue;}
if(curLoop===result){result=[];}
if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true;}else if(match===true){continue;}}
if(match){for(var i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);var pass=not^!!found;if(inplace&&found!=null){if(pass){anyFound=true;}else{curLoop[i]=false;}}else if(pass){result.push(item);anyFound=true;}}}}
if(found!==undefined){if(!inplace){curLoop=result;}
expr=expr.replace(Expr.match[type],"");if(!anyFound){return[];}
break;}}}
if(expr===old){if(anyFound==null){Sizzle.error(expr);}else{break;}}
old=expr;}
return curLoop;};Sizzle.error=function(msg){throw"Syntax error, unrecognized expression: "+msg;};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href");}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!/\W/.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase();}
for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}
checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part;}}
if(isPartStrNotTag){Sizzle.filter(part,checkSet,true);}},">":function(checkSet,part){var elem,isPartStr=typeof part==="string",i=0,l=checkSet.length;if(isPartStr&&!/\W/.test(part)){part=part.toLowerCase();for(;i<l;i++){elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false;}}}else{for(;i<l;i++){elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part;}}
if(isPartStr){Sizzle.filter(part,checkSet,true);}}},"":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck;}
checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML);},"~":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck;}
checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML);}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[];}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i]);}}
return ret.length===0?null:ret;}},TAG:function(match,context){return context.getElementsByTagName(match[1]);}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(/\\/g,"")+" ";if(isXML){return match;}
for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem);}}else if(inplace){curLoop[i]=false;}}}
return false;},ID:function(match){return match[1].replace(/\\/g,"");},TAG:function(match,curLoop){return match[1].toLowerCase();},CHILD:function(match){if(match[1]==="nth"){var test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0;}
match[0]=done++;return match;},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1].replace(/\\/g,"");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name];}
if(match[2]==="~="){match[4]=" "+match[4]+" ";}
return match;},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop);}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret);}
return false;}}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true;}
return match;},POS:function(match){match.unshift(true);return match;}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden";},disabled:function(elem){return elem.disabled===true;},checked:function(elem){return elem.checked===true;},selected:function(elem){elem.parentNode.selectedIndex;return elem.selected===true;},parent:function(elem){return!!elem.firstChild;},empty:function(elem){return!elem.firstChild;},has:function(elem,i,match){return!!Sizzle(match[3],elem).length;},header:function(elem){return(/h\d/i).test(elem.nodeName);},text:function(elem){return"text"===elem.type;},radio:function(elem){return"radio"===elem.type;},checkbox:function(elem){return"checkbox"===elem.type;},file:function(elem){return"file"===elem.type;},password:function(elem){return"password"===elem.type;},submit:function(elem){return"submit"===elem.type;},image:function(elem){return"image"===elem.type;},reset:function(elem){return"reset"===elem.type;},button:function(elem){return"button"===elem.type||elem.nodeName.toLowerCase()==="button";},input:function(elem){return(/input|select|textarea|button/i).test(elem.nodeName);}},setFilters:{first:function(elem,i){return i===0;},last:function(elem,i,match,array){return i===array.length-1;},even:function(elem,i){return i%2===0;},odd:function(elem,i){return i%2===1;},lt:function(elem,i,match){return i<match[3]-0;},gt:function(elem,i,match){return i>match[3]-0;},nth:function(elem,i,match){return match[3]-0===i;},eq:function(elem,i,match){return match[3]-0===i;}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array);}else if(name==="contains"){return(elem.textContent||elem.innerText||Sizzle.getText([elem])||"").indexOf(match[3])>=0;}else if(name==="not"){var not=match[3];for(var j=0,l=not.length;j<l;j++){if(not[j]===elem){return false;}}
return true;}else{Sizzle.error("Syntax error, unrecognized expression: "+name);}},CHILD:function(elem,match){var type=match[1],node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false;}}
if(type==="first"){return true;}
node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false;}}
return true;case"nth":var first=match[2],last=match[3];if(first===1&&last===0){return true;}
var doneName=match[0],parent=elem.parentNode;if(parent&&(parent.sizcache!==doneName||!elem.nodeIndex)){var count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count;}}
parent.sizcache=doneName;}
var diff=elem.nodeIndex-last;if(first===0){return diff===0;}else{return(diff%first===0&&diff/first>=0);}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match;},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||elem.nodeName.toLowerCase()===match;},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1;},ATTR:function(elem,match){var name=match[1],result=Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false;},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array);}}}};var origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1);};for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+(/(?![^\[]*\])(?![^\(]*\))/.source));Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape));}
var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results;}
return array;};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType;}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array);}else{if(typeof array.length==="number"){for(var l=array.length;i<l;i++){ret.push(array[i]);}}else{for(;array[i];i++){ret.push(array[i]);}}}
return ret;};}
var sortOrder,siblingCheck;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0;}
if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1;}
return a.compareDocumentPosition(b)&4?-1:1;};}else{sortOrder=function(a,b){var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(a===b){hasDuplicate=true;return 0;}else if(aup===bup){return siblingCheck(a,b);}else if(!aup){return-1;}else if(!bup){return 1;}
while(cur){ap.unshift(cur);cur=cur.parentNode;}
cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode;}
al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i]);}}
return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1);};siblingCheck=function(a,b,ret){if(a===b){return ret;}
var cur=a.nextSibling;while(cur){if(cur===b){return-1;}
cur=cur.nextSibling;}
return 1;};}
Sizzle.getText=function(elems){var ret="",elem;for(var i=0;elems[i];i++){elem=elems[i];if(elem.nodeType===3||elem.nodeType===4){ret+=elem.nodeValue;}else if(elem.nodeType!==8){ret+=Sizzle.getText(elem.childNodes);}}
return ret;};(function(){var form=document.createElement("div"),id="script"+(new Date()).getTime(),root=document.documentElement;form.innerHTML="<a name='"+id+"'/>";root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[];}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match;};}
root.removeChild(form);root=form=null;})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i]);}}
results=tmp;}
return results;};}
div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2);};}
div=null;})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div"),id="__sizzle__";div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return;}
Sizzle=function(query,context,extra,seed){context=context||document;query=query.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!seed&&!Sizzle.isXML(context)){if(context.nodeType===9){try{return makeArray(context.querySelectorAll(query),extra);}catch(qsaError){}}else if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){var old=context.getAttribute("id"),nid=old||id;if(!old){context.setAttribute("id",nid);}
try{return makeArray(context.querySelectorAll("#"+nid+" "+query),extra);}catch(pseudoError){}finally{if(!old){context.removeAttribute("id");}}}}
return oldSizzle(query,context,extra,seed);};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop];}
div=null;})();}
(function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector,pseudoWorks=false;try{matches.call(document.documentElement,"[test!='']:sizzle");}catch(pseudoError){pseudoWorks=true;}
if(matches){Sizzle.matchesSelector=function(node,expr){expr=expr.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!Sizzle.isXML(node)){try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){return matches.call(node,expr);}}catch(e){}}
return Sizzle(expr,null,null,[node]).length>0;};}})();(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return;}
div.lastChild.className="e";if(div.getElementsByClassName("e").length===1){return;}
Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1]);}};div=null;})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break;}
if(elem.nodeType===1&&!isXML){elem.sizcache=doneName;elem.sizset=i;}
if(elem.nodeName.toLowerCase()===cur){match=elem;break;}
elem=elem[dir];}
checkSet[i]=match;}}}
function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break;}
if(elem.nodeType===1){if(!isXML){elem.sizcache=doneName;elem.sizset=i;}
if(typeof cur!=="string"){if(elem===cur){match=true;break;}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break;}}
elem=elem[dir];}
checkSet[i]=match;}}}
if(document.documentElement.contains){Sizzle.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):true);};}else if(document.documentElement.compareDocumentPosition){Sizzle.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16);};}else{Sizzle.contains=function(){return false;};}
Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};var posProcess=function(selector,context){var match,tmpSet=[],later="",root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"");}
selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet);}
return Sizzle.filter(later,tmpSet);};jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.filters;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;})();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,isSimple=/^.[^:#\[\.,]*$/,slice=Array.prototype.slice,POS=jQuery.expr.match.POS;jQuery.fn.extend({find:function(selector){var ret=this.pushStack("","find",selector),length=0;for(var i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);if(i>0){for(var n=length;n<ret.length;n++){for(var r=0;r<length;r++){if(ret[r]===ret[n]){ret.splice(n--,1);break;}}}}}
return ret;},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;i<l;i++){if(jQuery.contains(this,targets[i])){return true;}}});},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector);},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector);},is:function(selector){return!!selector&&jQuery.filter(selector,this).length>0;},closest:function(selectors,context){var ret=[],i,l,cur=this[0];if(jQuery.isArray(selectors)){var match,selector,matches={},level=1;if(cur&&selectors.length){for(i=0,l=selectors.length;i<l;i++){selector=selectors[i];if(!matches[selector]){matches[selector]=jQuery.expr.match.POS.test(selector)?jQuery(selector,context||this.context):selector;}}
while(cur&&cur.ownerDocument&&cur!==context){for(selector in matches){match=matches[selector];if(match.jquery?match.index(cur)>-1:jQuery(cur).is(match)){ret.push({selector:selector,elem:cur,level:level});}}
cur=cur.parentNode;level++;}}
return ret;}
var pos=POS.test(selectors)?jQuery(selectors,context||this.context):null;for(i=0,l=this.length;i<l;i++){cur=this[i];while(cur){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break;}else{cur=cur.parentNode;if(!cur||!cur.ownerDocument||cur===context){break;}}}}
ret=ret.length>1?jQuery.unique(ret):ret;return this.pushStack(ret,"closest",selectors);},index:function(elem){if(!elem||typeof elem==="string"){return jQuery.inArray(this[0],elem?jQuery(elem):this.parent().children());}
return jQuery.inArray(elem.jquery?elem[0]:elem,this);},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context||this.context):jQuery.makeArray(selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all));},andSelf:function(){return this.add(this.prevObject);}});function isDisconnected(node){return!node||!node.parentNode||node.parentNode.nodeType===11;}
jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return jQuery.dir(elem,"parentNode");},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until);},next:function(elem){return jQuery.nth(elem,2,"nextSibling");},prev:function(elem){return jQuery.nth(elem,2,"previousSibling");},nextAll:function(elem){return jQuery.dir(elem,"nextSibling");},prevAll:function(elem){return jQuery.dir(elem,"previousSibling");},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until);},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until);},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem);},children:function(elem){return jQuery.sibling(elem.firstChild);},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name)){selector=until;}
if(selector&&typeof selector==="string"){ret=jQuery.filter(selector,ret);}
ret=this.length>1?jQuery.unique(ret):ret;if((this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name)){ret=ret.reverse();}
return this.pushStack(ret,name,slice.call(arguments).join(","));};});jQuery.extend({filter:function(expr,elems,not){if(not){expr=":not("+expr+")";}
return elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems);},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1){matched.push(cur);}
cur=cur[dir];}
return matched;},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir]){if(cur.nodeType===1&&++num===result){break;}}
return cur;},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n);}}
return r;}});function winnow(elements,qualifier,keep){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep;});}else if(qualifier.nodeType){return jQuery.grep(elements,function(elem,i){return(elem===qualifier)===keep;});}else if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1;});if(isSimple.test(qualifier)){return jQuery.filter(qualifier,filtered,!keep);}else{qualifier=jQuery.filter(qualifier,filtered);}}
return jQuery.grep(elements,function(elem,i){return(jQuery.inArray(elem,qualifier)>=0)===keep;});}
var rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnocache=/<(?:script|object|embed|option|style)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,raction=/\=([^="'>\s]+\/)>/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize){wrapMap._default=[1,"div<div>","</div>"];}
jQuery.fn.extend({text:function(text){if(jQuery.isFunction(text)){return this.each(function(i){var self=jQuery(this);self.text(text.call(this,i,self.text()));});}
if(typeof text!=="object"&&text!==undefined){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(text));}
return jQuery.text(this);},wrapAll:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i));});}
if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}
wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild;}
return elem;}).append(this);}
return this;},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}
return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){return this.each(function(){jQuery(this).wrapAll(html);});},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes);}}).end();},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.appendChild(elem);}});},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.insertBefore(elem,this.firstChild);}});},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this);});}else if(arguments.length){var set=jQuery(arguments[0]);set.push.apply(set,this.toArray());return this.pushStack(set,"before",arguments);}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling);});}else if(arguments.length){var set=this.pushStack(this,"after",arguments);set.push.apply(set,jQuery(arguments[0]).toArray());return set;}},remove:function(selector,keepData){for(var i=0,elem;(elem=this[i])!=null;i++){if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));jQuery.cleanData([elem]);}
if(elem.parentNode){elem.parentNode.removeChild(elem);}}}
return this;},empty:function(){for(var i=0,elem;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));}
while(elem.firstChild){elem.removeChild(elem.firstChild);}}
return this;},clone:function(events){var ret=this.map(function(){if(!jQuery.support.noCloneEvent&&!jQuery.isXMLDoc(this)){var html=this.outerHTML,ownerDocument=this.ownerDocument;if(!html){var div=ownerDocument.createElement("div");div.appendChild(this.cloneNode(true));html=div.innerHTML;}
return jQuery.clean([html.replace(rinlinejQuery,"").replace(raction,'="$1">').replace(rleadingWhitespace,"")],ownerDocument)[0];}else{return this.cloneNode(true);}});if(events===true){cloneCopyEvent(this,ret);cloneCopyEvent(this.find("*"),ret.find("*"));}
return ret;},html:function(value){if(value===undefined){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(rinlinejQuery,""):null;}else if(typeof value==="string"&&!rnocache.test(value)&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(var i=0,l=this.length;i<l;i++){if(this[i].nodeType===1){jQuery.cleanData(this[i].getElementsByTagName("*"));this[i].innerHTML=value;}}}catch(e){this.empty().append(value);}}else if(jQuery.isFunction(value)){this.each(function(i){var self=jQuery(this);self.html(value.call(this,i,self.html()));});}else{this.empty().append(value);}
return this;},replaceWith:function(value){if(this[0]&&this[0].parentNode){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old));});}
if(typeof value!=="string"){value=jQuery(value).detach();}
return this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();if(next){jQuery(next).before(value);}else{jQuery(parent).append(value);}});}else{return this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value);}},detach:function(selector){return this.remove(selector,true);},domManip:function(args,table,callback){var results,first,fragment,parent,value=args[0],scripts=[];if(!jQuery.support.checkClone&&arguments.length===3&&typeof value==="string"&&rchecked.test(value)){return this.each(function(){jQuery(this).domManip(args,table,callback,true);});}
if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback);});}
if(this[0]){parent=value&&value.parentNode;if(jQuery.support.parentNode&&parent&&parent.nodeType===11&&parent.childNodes.length===this.length){results={fragment:parent};}else{results=jQuery.buildFragment(args,this,scripts);}
fragment=results.fragment;if(fragment.childNodes.length===1){first=fragment=fragment.firstChild;}else{first=fragment.firstChild;}
if(first){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length;i<l;i++){callback.call(table?root(this[i],first):this[i],i>0||results.cacheable||this.length>1?fragment.cloneNode(true):fragment);}}
if(scripts.length){jQuery.each(scripts,evalScript);}}
return this;}});function root(elem,cur){return jQuery.nodeName(elem,"table")?(elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody"))):elem;}
function cloneCopyEvent(orig,ret){var i=0;ret.each(function(){if(this.nodeName!==(orig[i]&&orig[i].nodeName)){return;}
var oldData=jQuery.data(orig[i++]),curData=jQuery.data(this,oldData),events=oldData&&oldData.events;if(events){delete curData.handle;curData.events={};for(var type in events){for(var handler in events[type]){jQuery.event.add(this,type,events[type][handler],events[type][handler].data);}}}});}
jQuery.buildFragment=function(args,nodes,scripts){var fragment,cacheable,cacheresults,doc=(nodes&&nodes[0]?nodes[0].ownerDocument||nodes[0]:document);if(args.length===1&&typeof args[0]==="string"&&args[0].length<512&&doc===document&&!rnocache.test(args[0])&&(jQuery.support.checkClone||!rchecked.test(args[0]))){cacheable=true;cacheresults=jQuery.fragments[args[0]];if(cacheresults){if(cacheresults!==1){fragment=cacheresults;}}}
if(!fragment){fragment=doc.createDocumentFragment();jQuery.clean(args,doc,fragment,scripts);}
if(cacheable){jQuery.fragments[args[0]]=cacheresults?fragment:1;}
return{fragment:fragment,cacheable:cacheable};};jQuery.fragments={};jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=this.length===1&&this[0].parentNode;if(parent&&parent.nodeType===11&&parent.childNodes.length===1&&insert.length===1){insert[original](this[0]);return this;}else{for(var i=0,l=insert.length;i<l;i++){var elems=(i>0?this.clone(true):this).get();jQuery(insert[i])[original](elems);ret=ret.concat(elems);}
return this.pushStack(ret,name,insert.selector);}};});jQuery.extend({clean:function(elems,context,fragment,scripts){context=context||document;if(typeof context.createElement==="undefined"){context=context.ownerDocument||context[0]&&context[0].ownerDocument||document;}
var ret=[];for(var i=0,elem;(elem=elems[i])!=null;i++){if(typeof elem==="number"){elem+="";}
if(!elem){continue;}
if(typeof elem==="string"&&!rhtml.test(elem)){elem=context.createTextNode(elem);}else if(typeof elem==="string"){elem=elem.replace(rxhtmlTag,"<$1></$2>");var tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div");div.innerHTML=wrap[1]+elem+wrap[2];while(depth--){div=div.lastChild;}
if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(var j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j]);}}}
if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)){div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild);}
elem=div.childNodes;}
if(elem.nodeType){ret.push(elem);}else{ret=jQuery.merge(ret,elem);}}
if(fragment){for(i=0;ret[i];i++){if(scripts&&jQuery.nodeName(ret[i],"script")&&(!ret[i].type||ret[i].type.toLowerCase()==="text/javascript")){scripts.push(ret[i].parentNode?ret[i].parentNode.removeChild(ret[i]):ret[i]);}else{if(ret[i].nodeType===1){ret.splice.apply(ret,[i+1,0].concat(jQuery.makeArray(ret[i].getElementsByTagName("script"))));}
fragment.appendChild(ret[i]);}}}
return ret;},cleanData:function(elems){var data,id,cache=jQuery.cache,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando;for(var i=0,elem;(elem=elems[i])!=null;i++){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()]){continue;}
id=elem[jQuery.expando];if(id){data=cache[id];if(data&&data.events){for(var type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{jQuery.removeEvent(elem,type,data.handle);}}}
if(deleteExpando){delete elem[jQuery.expando];}else if(elem.removeAttribute){elem.removeAttribute(jQuery.expando);}
delete cache[id];}}}});function evalScript(i,elem){if(elem.src){jQuery.ajax({url:elem.src,async:false,dataType:"script"});}else{jQuery.globalEval(elem.text||elem.textContent||elem.innerHTML||"");}
if(elem.parentNode){elem.parentNode.removeChild(elem);}}
var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rdashAlpha=/-([a-z])/ig,rupper=/([A-Z])/g,rnumpx=/^-?\d+(?:px)?$/i,rnum=/^-?\d/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssWidth=["Left","Right"],cssHeight=["Top","Bottom"],curCSS,getComputedStyle,currentStyle,fcamelCase=function(all,letter){return letter.toUpperCase();};jQuery.fn.css=function(name,value){if(arguments.length===2&&value===undefined){return this;}
return jQuery.access(this,name,value,true,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);});};jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity","opacity");return ret===""?"1":ret;}else{return elem.style.opacity;}}}},cssNumber:{"zIndex":true,"fontWeight":true,"opacity":true,"zoom":true,"lineHeight":true},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}
var ret,origName=jQuery.camelCase(name),style=elem.style,hooks=jQuery.cssHooks[origName];name=jQuery.cssProps[origName]||origName;if(value!==undefined){if(typeof value==="number"&&isNaN(value)||value==null){return;}
if(typeof value==="number"&&!jQuery.cssNumber[origName]){value+="px";}
if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value))!==undefined){try{style[name]=value;}catch(e){}}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret;}
return style[name];}},css:function(elem,name,extra){var ret,origName=jQuery.camelCase(name),hooks=jQuery.cssHooks[origName];name=jQuery.cssProps[origName]||origName;if(hooks&&"get"in hooks&&(ret=hooks.get(elem,true,extra))!==undefined){return ret;}else if(curCSS){return curCSS(elem,name,origName);}},swap:function(elem,options,callback){var old={};for(var name in options){old[name]=elem.style[name];elem.style[name]=options[name];}
callback.call(elem);for(name in options){elem.style[name]=old[name];}},camelCase:function(string){return string.replace(rdashAlpha,fcamelCase);}});jQuery.curCSS=jQuery.css;jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){var val;if(computed){if(elem.offsetWidth!==0){val=getWH(elem,name,extra);}else{jQuery.swap(elem,cssShow,function(){val=getWH(elem,name,extra);});}
if(val<=0){val=curCSS(elem,name,name);if(val==="0px"&&currentStyle){val=currentStyle(elem,name,name);}
if(val!=null){return val===""||val==="auto"?"0px":val;}}
if(val<0||val==null){val=elem.style[name];return val===""||val==="auto"?"0px":val;}
return typeof val==="string"?val:val+"px";}},set:function(elem,value){if(rnumpx.test(value)){value=parseFloat(value);if(value>=0){return value+"px";}}else{return value;}}};});if(!jQuery.support.opacity){jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":computed?"1":"";},set:function(elem,value){var style=elem.style;style.zoom=1;var opacity=jQuery.isNaN(value)?"":"alpha(opacity="+value*100+")",filter=style.filter||"";style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):style.filter+' '+opacity;}};}
if(document.defaultView&&document.defaultView.getComputedStyle){getComputedStyle=function(elem,newName,name){var ret,defaultView,computedStyle;name=name.replace(rupper,"-$1").toLowerCase();if(!(defaultView=elem.ownerDocument.defaultView)){return undefined;}
if((computedStyle=defaultView.getComputedStyle(elem,null))){ret=computedStyle.getPropertyValue(name);if(ret===""&&!jQuery.contains(elem.ownerDocument.documentElement,elem)){ret=jQuery.style(elem,name);}}
return ret;};}
if(document.documentElement.currentStyle){currentStyle=function(elem,name){var left,rsLeft,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;if(!rnumpx.test(ret)&&rnum.test(ret)){left=style.left;rsLeft=elem.runtimeStyle.left;elem.runtimeStyle.left=elem.currentStyle.left;style.left=name==="fontSize"?"1em":(ret||0);ret=style.pixelLeft+"px";style.left=left;elem.runtimeStyle.left=rsLeft;}
return ret===""?"auto":ret;};}
curCSS=getComputedStyle||currentStyle;function getWH(elem,name,extra){var which=name==="width"?cssWidth:cssHeight,val=name==="width"?elem.offsetWidth:elem.offsetHeight;if(extra==="border"){return val;}
jQuery.each(which,function(){if(!extra){val-=parseFloat(jQuery.css(elem,"padding"+this))||0;}
if(extra==="margin"){val+=parseFloat(jQuery.css(elem,"margin"+this))||0;}else{val-=parseFloat(jQuery.css(elem,"border"+this+"Width"))||0;}});return val;}
if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;return(width===0&&height===0)||(!jQuery.support.reliableHiddenOffsets&&(elem.style.display||jQuery.css(elem,"display"))==="none");};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem);};}
var jsc=jQuery.now(),rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rselectTextarea=/^(?:select|textarea)/i,rinput=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rnoContent=/^(?:GET|HEAD)$/,rbracket=/\[\]$/,jsre=/\=\?(&|$)/,rquery=/\?/,rts=/([?&])_=[^&]*/,rurl=/^(\w+:)?\/\/([^\/?#]+)/,r20=/%20/g,rhash=/#.*$/,_load=jQuery.fn.load;jQuery.fn.extend({load:function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments);}else if(!this.length){return this;}
var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off);}
var type="GET";if(params){if(jQuery.isFunction(params)){callback=params;params=null;}else if(typeof params==="object"){params=jQuery.param(params,jQuery.ajaxSettings.traditional);type="POST";}}
var self=this;jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(res,status){if(status==="success"||status==="notmodified"){self.html(selector?jQuery("<div>").append(res.responseText.replace(rscript,"")).find(selector):res.responseText);}
if(callback){self.each(callback,[res.responseText,status,res]);}}});return this;},serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type));}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val};}):{name:elem.name,value:val};}).get();}});jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.bind(o,f);};});jQuery.extend({get:function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=null;}
return jQuery.ajax({type:"GET",url:url,data:data,success:callback,dataType:type});},getScript:function(url,callback){return jQuery.get(url,null,callback,"script");},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},post:function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data={};}
return jQuery.ajax({type:"POST",url:url,data:data,success:callback,dataType:type});},ajaxSetup:function(settings){jQuery.extend(jQuery.ajaxSettings,settings);},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return new window.XMLHttpRequest();},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},ajax:function(origSettings){var s=jQuery.extend(true,{},jQuery.ajaxSettings,origSettings),jsonp,status,data,type=s.type.toUpperCase(),noContent=rnoContent.test(type);s.url=s.url.replace(rhash,"");s.context=origSettings&&origSettings.context!=null?origSettings.context:s;if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}
if(s.dataType==="jsonp"){if(type==="GET"){if(!jsre.test(s.url)){s.url+=(rquery.test(s.url)?"&":"?")+(s.jsonp||"callback")+"=?";}}else if(!s.data||!jsre.test(s.data)){s.data=(s.data?s.data+"&":"")+(s.jsonp||"callback")+"=?";}
s.dataType="json";}
if(s.dataType==="json"&&(s.data&&jsre.test(s.data)||jsre.test(s.url))){jsonp=s.jsonpCallback||("jsonp"+jsc++);if(s.data){s.data=(s.data+"").replace(jsre,"="+jsonp+"$1");}
s.url=s.url.replace(jsre,"="+jsonp+"$1");s.dataType="script";var customJsonp=window[jsonp];window[jsonp]=function(tmp){if(jQuery.isFunction(customJsonp)){customJsonp(tmp);}else{window[jsonp]=undefined;try{delete window[jsonp];}catch(jsonpError){}}
data=tmp;jQuery.handleSuccess(s,xhr,status,data);jQuery.handleComplete(s,xhr,status,data);if(head){head.removeChild(script);}};}
if(s.dataType==="script"&&s.cache===null){s.cache=false;}
if(s.cache===false&&noContent){var ts=jQuery.now();var ret=s.url.replace(rts,"$1_="+ts);s.url=ret+((ret===s.url)?(rquery.test(s.url)?"&":"?")+"_="+ts:"");}
if(s.data&&noContent){s.url+=(rquery.test(s.url)?"&":"?")+s.data;}
if(s.global&&jQuery.active++===0){jQuery.event.trigger("ajaxStart");}
var parts=rurl.exec(s.url),remote=parts&&(parts[1]&&parts[1].toLowerCase()!==location.protocol||parts[2].toLowerCase()!==location.host);if(s.dataType==="script"&&type==="GET"&&remote){var head=document.getElementsByTagName("head")[0]||document.documentElement;var script=document.createElement("script");if(s.scriptCharset){script.charset=s.scriptCharset;}
script.src=s.url;if(!jsonp){var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;jQuery.handleSuccess(s,xhr,status,data);jQuery.handleComplete(s,xhr,status,data);script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script);}}};}
head.insertBefore(script,head.firstChild);return undefined;}
var requestDone=false;var xhr=s.xhr();if(!xhr){return;}
if(s.username){xhr.open(type,s.url,s.async,s.username,s.password);}else{xhr.open(type,s.url,s.async);}
try{if((s.data!=null&&!noContent)||(origSettings&&origSettings.contentType)){xhr.setRequestHeader("Content-Type",s.contentType);}
if(s.ifModified){if(jQuery.lastModified[s.url]){xhr.setRequestHeader("If-Modified-Since",jQuery.lastModified[s.url]);}
if(jQuery.etag[s.url]){xhr.setRequestHeader("If-None-Match",jQuery.etag[s.url]);}}
if(!remote){xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");}
xhr.setRequestHeader("Accept",s.dataType&&s.accepts[s.dataType]?s.accepts[s.dataType]+", */*; q=0.01":s.accepts._default);}catch(headerError){}
if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global&&jQuery.active--===1){jQuery.event.trigger("ajaxStop");}
xhr.abort();return false;}
if(s.global){jQuery.triggerGlobal(s,"ajaxSend",[xhr,s]);}
var onreadystatechange=xhr.onreadystatechange=function(isTimeout){if(!xhr||xhr.readyState===0||isTimeout==="abort"){if(!requestDone){jQuery.handleComplete(s,xhr,status,data);}
requestDone=true;if(xhr){xhr.onreadystatechange=jQuery.noop;}}else if(!requestDone&&xhr&&(xhr.readyState===4||isTimeout==="timeout")){requestDone=true;xhr.onreadystatechange=jQuery.noop;status=isTimeout==="timeout"?"timeout":!jQuery.httpSuccess(xhr)?"error":s.ifModified&&jQuery.httpNotModified(xhr,s.url)?"notmodified":"success";var errMsg;if(status==="success"){try{data=jQuery.httpData(xhr,s.dataType,s);}catch(parserError){status="parsererror";errMsg=parserError;}}
if(status==="success"||status==="notmodified"){if(!jsonp){jQuery.handleSuccess(s,xhr,status,data);}}else{jQuery.handleError(s,xhr,status,errMsg);}
if(!jsonp){jQuery.handleComplete(s,xhr,status,data);}
if(isTimeout==="timeout"){xhr.abort();}
if(s.async){xhr=null;}}};try{var oldAbort=xhr.abort;xhr.abort=function(){if(xhr){Function.prototype.call.call(oldAbort,xhr);}
onreadystatechange("abort");};}catch(abortError){}
if(s.async&&s.timeout>0){setTimeout(function(){if(xhr&&!requestDone){onreadystatechange("timeout");}},s.timeout);}
try{xhr.send(noContent||s.data==null?null:s.data);}catch(sendError){jQuery.handleError(s,xhr,null,sendError);jQuery.handleComplete(s,xhr,status,data);}
if(!s.async){onreadystatechange();}
return xhr;},param:function(a,traditional){var s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value);};if(traditional===undefined){traditional=jQuery.ajaxSettings.traditional;}
if(jQuery.isArray(a)||a.jquery){jQuery.each(a,function(){add(this.name,this.value);});}else{for(var prefix in a){buildParams(prefix,a[prefix],traditional,add);}}
return s.join("&").replace(r20,"+");}});function buildParams(prefix,obj,traditional,add){if(jQuery.isArray(obj)&&obj.length){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"||jQuery.isArray(v)?i:"")+"]",v,traditional,add);}});}else if(!traditional&&obj!=null&&typeof obj==="object"){if(jQuery.isEmptyObject(obj)){add(prefix,"");}else{jQuery.each(obj,function(k,v){buildParams(prefix+"["+k+"]",v,traditional,add);});}}else{add(prefix,obj);}}
jQuery.extend({active:0,lastModified:{},etag:{},handleError:function(s,xhr,status,e){if(s.error){s.error.call(s.context,xhr,status,e);}
if(s.global){jQuery.triggerGlobal(s,"ajaxError",[xhr,s,e]);}},handleSuccess:function(s,xhr,status,data){if(s.success){s.success.call(s.context,data,status,xhr);}
if(s.global){jQuery.triggerGlobal(s,"ajaxSuccess",[xhr,s]);}},handleComplete:function(s,xhr,status){if(s.complete){s.complete.call(s.context,xhr,status);}
if(s.global){jQuery.triggerGlobal(s,"ajaxComplete",[xhr,s]);}
if(s.global&&jQuery.active--===1){jQuery.event.trigger("ajaxStop");}},triggerGlobal:function(s,type,args){(s.context&&s.context.url==null?jQuery(s.context):jQuery.event).trigger(type,args);},httpSuccess:function(xhr){try{return!xhr.status&&location.protocol==="file:"||xhr.status>=200&&xhr.status<300||xhr.status===304||xhr.status===1223;}catch(e){}
return false;},httpNotModified:function(xhr,url){var lastModified=xhr.getResponseHeader("Last-Modified"),etag=xhr.getResponseHeader("Etag");if(lastModified){jQuery.lastModified[url]=lastModified;}
if(etag){jQuery.etag[url]=etag;}
return xhr.status===304;},httpData:function(xhr,type,s){var ct=xhr.getResponseHeader("content-type")||"",xml=type==="xml"||!type&&ct.indexOf("xml")>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==="parsererror"){jQuery.error("parsererror");}
if(s&&s.dataFilter){data=s.dataFilter(data,type);}
if(typeof data==="string"){if(type==="json"||!type&&ct.indexOf("json")>=0){data=jQuery.parseJSON(data);}else if(type==="script"||!type&&ct.indexOf("javascript")>=0){jQuery.globalEval(data);}}
return data;}});if(window.ActiveXObject){jQuery.ajaxSettings.xhr=function(){if(window.location.protocol!=="file:"){try{return new window.XMLHttpRequest();}catch(xhrError){}}
try{return new window.ActiveXObject("Microsoft.XMLHTTP");}catch(activeError){}};}
jQuery.support.ajax=!!jQuery.ajaxSettings.xhr();var elemdisplay={},rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=/^([+\-]=)?([\d+.\-]+)(.*)$/,timerId,fxAttrs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];jQuery.fn.extend({show:function(speed,easing,callback){var elem,display;if(speed||speed===0){return this.animate(genFx("show",3),speed,easing,callback);}else{for(var i=0,j=this.length;i<j;i++){elem=this[i];display=elem.style.display;if(!jQuery.data(elem,"olddisplay")&&display==="none"){display=elem.style.display="";}
if(display===""&&jQuery.css(elem,"display")==="none"){jQuery.data(elem,"olddisplay",defaultDisplay(elem.nodeName));}}
for(i=0;i<j;i++){elem=this[i];display=elem.style.display;if(display===""||display==="none"){elem.style.display=jQuery.data(elem,"olddisplay")||"";}}
return this;}},hide:function(speed,easing,callback){if(speed||speed===0){return this.animate(genFx("hide",3),speed,easing,callback);}else{for(var i=0,j=this.length;i<j;i++){var display=jQuery.css(this[i],"display");if(display!=="none"){jQuery.data(this[i],"olddisplay",display);}}
for(i=0;i<j;i++){this[i].style.display="none";}
return this;}},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2,callback){var bool=typeof fn==="boolean";if(jQuery.isFunction(fn)&&jQuery.isFunction(fn2)){this._toggle.apply(this,arguments);}else if(fn==null||bool){this.each(function(){var state=bool?fn:jQuery(this).is(":hidden");jQuery(this)[state?"show":"hide"]();});}else{this.animate(genFx("toggle",3),fn,fn2,callback);}
return this;},fadeTo:function(speed,to,easing,callback){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:to},speed,easing,callback);},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);if(jQuery.isEmptyObject(prop)){return this.each(optall.complete);}
return this[optall.queue===false?"each":"queue"](function(){var opt=jQuery.extend({},optall),p,isElement=this.nodeType===1,hidden=isElement&&jQuery(this).is(":hidden"),self=this;for(p in prop){var name=jQuery.camelCase(p);if(p!==name){prop[name]=prop[p];delete prop[p];p=name;}
if(prop[p]==="hide"&&hidden||prop[p]==="show"&&!hidden){return opt.complete.call(this);}
if(isElement&&(p==="height"||p==="width")){opt.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(jQuery.css(this,"display")==="inline"&&jQuery.css(this,"float")==="none"){if(!jQuery.support.inlineBlockNeedsLayout){this.style.display="inline-block";}else{var display=defaultDisplay(this.nodeName);if(display==="inline"){this.style.display="inline-block";}else{this.style.display="inline";this.style.zoom=1;}}}}
if(jQuery.isArray(prop[p])){(opt.specialEasing=opt.specialEasing||{})[p]=prop[p][1];prop[p]=prop[p][0];}}
if(opt.overflow!=null){this.style.overflow="hidden";}
opt.curAnim=jQuery.extend({},prop);jQuery.each(prop,function(name,val){var e=new jQuery.fx(self,opt,name);if(rfxtypes.test(val)){e[val==="toggle"?hidden?"show":"hide":val](prop);}else{var parts=rfxnum.exec(val),start=e.cur()||0;if(parts){var end=parseFloat(parts[2]),unit=parts[3]||"px";if(unit!=="px"){jQuery.style(self,name,(end||1)+unit);start=((end||1)/e.cur())*start;jQuery.style(self,name,start+unit);}
if(parts[1]){end=((parts[1]==="-="?-1:1)*end)+start;}
e.custom(start,end,unit);}else{e.custom(start,val,"");}}});return true;});},stop:function(clearQueue,gotoEnd){var timers=jQuery.timers;if(clearQueue){this.queue([]);}
this.each(function(){for(var i=timers.length-1;i>=0;i--){if(timers[i].elem===this){if(gotoEnd){timers[i](true);}
timers.splice(i,1);}}});if(!gotoEnd){this.dequeue();}
return this;}});function genFx(type,num){var obj={};jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type;});return obj;}
jQuery.each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;opt.old=opt.complete;opt.complete=function(){if(opt.queue!==false){jQuery(this).dequeue();}
if(jQuery.isFunction(opt.old)){opt.old.call(this);}};return opt;},easing:{linear:function(p,n,firstNum,diff){return firstNum+diff*p;},swing:function(p,n,firstNum,diff){return((-Math.cos(p*Math.PI)/2)+0.5)*diff+firstNum;}},timers:[],fx:function(elem,options,prop){this.options=options;this.elem=elem;this.prop=prop;if(!options.orig){options.orig={};}}});jQuery.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this);}
(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this);},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop];}
var r=parseFloat(jQuery.css(this.elem,this.prop));return r&&r>-10000?r:0;},custom:function(from,to,unit){var self=this,fx=jQuery.fx;this.startTime=jQuery.now();this.start=from;this.end=to;this.unit=unit||this.unit||"px";this.now=this.start;this.pos=this.state=0;function t(gotoEnd){return self.step(gotoEnd);}
t.elem=this.elem;if(t()&&jQuery.timers.push(t)&&!timerId){timerId=setInterval(fx.tick,fx.interval);}},show:function(){this.options.orig[this.prop]=jQuery.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());jQuery(this.elem).show();},hide:function(){this.options.orig[this.prop]=jQuery.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0);},step:function(gotoEnd){var t=jQuery.now(),done=true;if(gotoEnd||t>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var i in this.options.curAnim){if(this.options.curAnim[i]!==true){done=false;}}
if(done){if(this.options.overflow!=null&&!jQuery.support.shrinkWrapBlocks){var elem=this.elem,options=this.options;jQuery.each(["","X","Y"],function(index,value){elem.style["overflow"+value]=options.overflow[index];});}
if(this.options.hide){jQuery(this.elem).hide();}
if(this.options.hide||this.options.show){for(var p in this.options.curAnim){jQuery.style(this.elem,p,this.options.orig[p]);}}
this.options.complete.call(this.elem);}
return false;}else{var n=t-this.startTime;this.state=n/this.options.duration;var specialEasing=this.options.specialEasing&&this.options.specialEasing[this.prop];var defaultEasing=this.options.easing||(jQuery.easing.swing?"swing":"linear");this.pos=jQuery.easing[specialEasing||defaultEasing](this.state,n,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update();}
return true;}};jQuery.extend(jQuery.fx,{tick:function(){var timers=jQuery.timers;for(var i=0;i<timers.length;i++){if(!timers[i]()){timers.splice(i--,1);}}
if(!timers.length){jQuery.fx.stop();}},interval:13,stop:function(){clearInterval(timerId);timerId=null;},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,"opacity",fx.now);},_default:function(fx){if(fx.elem.style&&fx.elem.style[fx.prop]!=null){fx.elem.style[fx.prop]=(fx.prop==="width"||fx.prop==="height"?Math.max(0,fx.now):fx.now)+fx.unit;}else{fx.elem[fx.prop]=fx.now;}}}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};}
function defaultDisplay(nodeName){if(!elemdisplay[nodeName]){var elem=jQuery("<"+nodeName+">").appendTo("body"),display=elem.css("display");elem.remove();if(display==="none"||display===""){display="block";}
elemdisplay[nodeName]=display;}
return elemdisplay[nodeName];}
var rtable=/^t(?:able|d|h)$/i,rroot=/^(?:body|html)$/i;if("getBoundingClientRect"in document.documentElement){jQuery.fn.offset=function(options){var elem=this[0],box;if(options){return this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
if(!elem||!elem.ownerDocument){return null;}
if(elem===elem.ownerDocument.body){return jQuery.offset.bodyOffset(elem);}
try{box=elem.getBoundingClientRect();}catch(e){}
var doc=elem.ownerDocument,docElem=doc.documentElement;if(!box||!jQuery.contains(docElem,elem)){return box||{top:0,left:0};}
var body=doc.body,win=getWindow(doc),clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,scrollTop=(win.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop),scrollLeft=(win.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft),top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:top,left:left};};}else{jQuery.fn.offset=function(options){var elem=this[0];if(options){return this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
if(!elem||!elem.ownerDocument){return null;}
if(elem===elem.ownerDocument.body){return jQuery.offset.bodyOffset(elem);}
jQuery.offset.initialize();var computedStyle,offsetParent=elem.offsetParent,prevOffsetParent=elem,doc=elem.ownerDocument,docElem=doc.documentElement,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;while((elem=elem.parentNode)&&elem!==body&&elem!==docElem){if(jQuery.offset.supportsFixedPosition&&prevComputedStyle.position==="fixed"){break;}
computedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle;top-=elem.scrollTop;left-=elem.scrollLeft;if(elem===offsetParent){top+=elem.offsetTop;left+=elem.offsetLeft;if(jQuery.offset.doesNotAddBorder&&!(jQuery.offset.doesAddBorderForTableAndCells&&rtable.test(elem.nodeName))){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0;}
prevOffsetParent=offsetParent;offsetParent=elem.offsetParent;}
if(jQuery.offset.subtractsBorderForOverflowNotVisible&&computedStyle.overflow!=="visible"){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0;}
prevComputedStyle=computedStyle;}
if(prevComputedStyle.position==="relative"||prevComputedStyle.position==="static"){top+=body.offsetTop;left+=body.offsetLeft;}
if(jQuery.offset.supportsFixedPosition&&prevComputedStyle.position==="fixed"){top+=Math.max(docElem.scrollTop,body.scrollTop);left+=Math.max(docElem.scrollLeft,body.scrollLeft);}
return{top:top,left:left};};}
jQuery.offset={initialize:function(){var body=document.body,container=document.createElement("div"),innerDiv,checkDiv,table,td,bodyMarginTop=parseFloat(jQuery.css(body,"marginTop"))||0,html="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";jQuery.extend(container.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});container.innerHTML=html;body.insertBefore(container,body.firstChild);innerDiv=container.firstChild;checkDiv=innerDiv.firstChild;td=innerDiv.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(checkDiv.offsetTop!==5);this.doesAddBorderForTableAndCells=(td.offsetTop===5);checkDiv.style.position="fixed";checkDiv.style.top="20px";this.supportsFixedPosition=(checkDiv.offsetTop===20||checkDiv.offsetTop===15);checkDiv.style.position=checkDiv.style.top="";innerDiv.style.overflow="hidden";innerDiv.style.position="relative";this.subtractsBorderForOverflowNotVisible=(checkDiv.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(body.offsetTop!==bodyMarginTop);body.removeChild(container);body=container=innerDiv=checkDiv=table=td=null;jQuery.offset.initialize=jQuery.noop;},bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;jQuery.offset.initialize();if(jQuery.offset.doesNotIncludeMarginInBodyOffset){top+=parseFloat(jQuery.css(body,"marginTop"))||0;left+=parseFloat(jQuery.css(body,"marginLeft"))||0;}
return{top:top,left:left};},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");if(position==="static"){elem.style.position="relative";}
var curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=(position==="absolute"&&jQuery.inArray('auto',[curCSSTop,curCSSLeft])>-1),props={},curPosition={},curTop,curLeft;if(calculatePosition){curPosition=curElem.position();}
curTop=calculatePosition?curPosition.top:parseInt(curCSSTop,10)||0;curLeft=calculatePosition?curPosition.left:parseInt(curCSSLeft,10)||0;if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset);}
if(options.top!=null){props.top=(options.top-curOffset.top)+curTop;}
if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft;}
if("using"in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({position:function(){if(!this[0]){return null;}
var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0;offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0;parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0;parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&(!rroot.test(offsetParent.nodeName)&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent;}
return offsetParent;});}});jQuery.each(["Left","Top"],function(i,name){var method="scroll"+name;jQuery.fn[method]=function(val){var elem=this[0],win;if(!elem){return null;}
if(val!==undefined){return this.each(function(){win=getWindow(this);if(win){win.scrollTo(!i?val:jQuery(win).scrollLeft(),i?val:jQuery(win).scrollTop());}else{this[method]=val;}});}else{win=getWindow(elem);return win?("pageXOffset"in win)?win[i?"pageYOffset":"pageXOffset"]:jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method];}};});function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false;}
jQuery.each(["Height","Width"],function(i,name){var type=name.toLowerCase();jQuery.fn["inner"+name]=function(){return this[0]?parseFloat(jQuery.css(this[0],type,"padding")):null;};jQuery.fn["outer"+name]=function(margin){return this[0]?parseFloat(jQuery.css(this[0],type,margin?"margin":"border")):null;};jQuery.fn[type]=function(size){var elem=this[0];if(!elem){return size==null?null:this;}
if(jQuery.isFunction(size)){return this.each(function(i){var self=jQuery(this);self[type](size.call(this,i,self[type]()));});}
if(jQuery.isWindow(elem)){return elem.document.compatMode==="CSS1Compat"&&elem.document.documentElement["client"+name]||elem.document.body["client"+name];}else if(elem.nodeType===9){return Math.max(elem.documentElement["client"+name],elem.body["scroll"+name],elem.documentElement["scroll"+name],elem.body["offset"+name],elem.documentElement["offset"+name]);}else if(size===undefined){var orig=jQuery.css(elem,type),ret=parseFloat(orig);return jQuery.isNaN(ret)?orig:ret;}else{return this.css(type,typeof size==="string"?size:size+"px");}};});})(window);if(!this.JSON){this.JSON={};}
(function(){function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+
partial.join(',\n'+gap)+'\n'+
mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==='string'){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+
mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());function BindingStart(ioc,name){this._container=ioc;this._name=name;ExtendAsFluent.PrototypeOf(BindingStart);}
BindingStart.prototype={constructor:BindingStart,withConstructor:function(value){var binding=new Binding(this._name);binding.service=value;this._container.RegBinding(binding);return binding;},withInstance:function(value){this._container.RegisterInstance(this._name,value);}}
function Binding(name){this._name=name;this._requires=[];this._parameters=[];this._singleton=false;this._eventSource=[];this._eventListener=[];ExtendAsFluent.PrototypeOf(Binding);}
Binding.prototype={constructor:Binding,withDependencies:function(){Binding.AppendArgsToMember(arguments,this,"_requires");},withParameters:function(){Binding.AppendArgsToMember(arguments,this,"_parameters");for(var i=0;i<this._parameters.length;i++){if(typeof this._parameters[i]=="string"){this._parameters[i]=JsfIoc.prototype.Parameter(this._parameters[i]);}}},asSingleton:function(){this._singleton=true;},sendingEvents:function(){Binding.AppendArgsToMember(arguments,this,"_eventSource");},receivingEvents:function(){Binding.AppendArgsToMember(arguments,this,"_eventListener");},GetFriendlyName:function(){var result=this.service.toString();if(result.indexOf("(")>-1)
result=result.slice(0,result.indexOf("("));if(result.indexOf("function ")==0)
result=result.slice("function ".length);if(Binding.WhitespaceRegex.test(result))
return this._name;return result;}}
Binding.WhitespaceRegex=/^\s*$/;Binding.AppendArgsToMember=function(args,target,member){for(var i=0;i<args.length;i++){target[member].push(args[i]);}}
ExtendAsFluent={};ExtendAsFluent.PrototypeOf=function(obj){var prototype=obj.prototype;if(prototype.isFluent)
return;prototype.isFluent=true;for(var key in prototype){if(!prototype.hasOwnProperty(key))
continue;if(typeof(prototype[key])=="function"){prototype[key]=(function(original){return function(){var rv=original.apply(this,arguments);if(typeof(rv)==="undefined")
return this;else
return rv;}})(prototype[key]);}}};function JsfIoc(){this._bindings=[];this._singletons=[];}
JsfIoc.prototype={Register:function(name){return new BindingStart(this,name);},RegBinding:function(binding){this._bindings[binding._name]=binding;},RegisterInstance:function(name,instance){this._singletons[name]=instance;},Load:function(name){var result=this._singletons[name];if(result)
return result;var binding=this.GetBinding(name,"Load");result=new binding.service;for(var i=0;i<binding._requires.length;i++){var dependency=binding._requires[i];result[dependency]=this.Load(dependency);}
if(binding.boundParameters){for(var i=0;i<binding._parameters.length;i++){var parameter=binding._parameters[i];result[parameter._name]=binding.boundParameters[parameter._name];}}
else{var values=Array.prototype.slice.call(arguments,1);this._SetParametersToObject(binding,result,values)}
for(var i=0;i<binding._eventSource.length;i++){(function(event,that){result["_notify"+event]=function(){that.NotifyEvent(event,arguments);};})(binding._eventSource[i],this);}
if(binding._singleton){this._singletons[name]=result;}
return result;},Configure:function(name){var binding=this.GetBinding(name,"Configure");var boundParameters={};for(var i=0;i<binding._parameters.length;i++){this._SetParameterToObject(binding,binding._parameters[i],boundParameters,arguments[1+i],i);}
binding.boundParameters=boundParameters;},GetBinding:function(name,caller){var binding=this._bindings[name];if(typeof(binding)=="undefined"){throw caller+" was called for undefined service '"+name+"'.";}
return binding;},NotifyEvent:function(name,eventParameters){for(var bindingName in this._bindings){if(!this._bindings.hasOwnProperty(bindingName))
continue;var events=this._bindings[bindingName]._eventListener;if(events){for(var i=0;i<events.length;i++){if(events[i]==name){var listener=this.Load(bindingName);listener["On"+name].apply(listener,eventParameters||[]);}}}}},_SetParametersToObject:function(binding,target,values){for(var i=0;i<binding._parameters.length;i++){this._SetParameterToObject(binding,binding._parameters[i],target,values[i],i);}},_SetParameterToObject:function(binding,parameter,target,value,index){if(typeof(value)!=="undefined"&&!parameter.validator(value)){throw new Error("Invalid parameter #"+(index+1)+" passed to "+binding._name+".");}
if(typeof(value)==="undefined"){if(typeof(parameter.defaultValue)!=="undefined"){target[parameter._name]=parameter.defaultValue;}}else{target[parameter._name]=value;}}};function JsfParameter(name){this._name=name;this.validator=function(){return true;};ExtendAsFluent.PrototypeOf(JsfParameter);}
JsfParameter.prototype={constructor:JsfParameter,withValidator:function(value){this.validator=value;},withDefault:function(value){this.defaultValue=value;},asSingleJQueryElement:function(){this.validator=function(value){return typeof(jQuery)!="undefined"&&(value instanceof jQuery)&&(value.length==1);}}}
JsfIoc.prototype.Parameter=function(name){return new JsfParameter(name);}
var ioc=new JsfIoc();function getCookie(sName){var aCookie=document.cookie.split('; ');for(var i=0;i<aCookie.length;i++){var aCrumb=aCookie[i].split('=');if(sName==aCrumb[0])
return unescape(aCrumb[1]);}
return null;}
function setCookie(c_name,value,expiredays){var exdate=new Date()
expiredays=(expiredays==null)?0:expiredays;exdate.setDate(exdate.getDate()+expiredays);exdate=exdate.toGMTString();var domain=document.domain;if(typeof domain=='string'&&domain.indexOf(".")==-1){domain="";}
var cookiestring=c_name+'='+escape(value)+'; expires='+exdate+'; path=/'+
((domain=='')?';':('; domain='+domain+';'));document.cookie=cookiestring;}
function UpdateQueryStringItem(a,k,v){var re=new RegExp("([?|&])"+k+"=.*?(&|$)","i");if(a.match(re))
return a.replace(re,RegExp.$1+k+"="+v+RegExp.$2);else
return(a.indexOf('?')!=-1)?(a+'&'+k+"="+v):(a+'?'+k+"="+v);}
function ClickButton(e,formID,buttonID)
{e=e?e:window.event?event:null
if(e)
{var keyCode=e.keyCode?e.keyCode:e.charCode?e.charCode:e.which?e.which:void 0;if(keyCode==13)
{try
{var button=document.getElementById(buttonID);if(button&&button.click)
{button.click();}}
catch(e)
{}
return false;}}}
var __eventListeners=[];function addAREventListener(instance,eventName,listener)
{var listenerFn=listener;if(instance.addEventListener){instance.addEventListener(eventName,listenerFn,false);}else if(instance.attachEvent){listenerFn=function(){listener(window.event);}
instance.attachEvent("on"+eventName,listenerFn);}else{alert("Registration not supported! instance:"+instance+" eventname: "+eventName);}
var event={instance:instance,name:eventName,listener:listenerFn};__eventListeners.push(event);return event;}
function removeEventListener(event)
{var instance=event.instance;if(instance)
{if(instance.removeEventListener){instance.removeEventListener(event.name,event.listener,false);}else if(instance.detachEvent){instance.detachEvent("on"+event.name,event.listener);}
for(var i=0;i<__eventListeners.length;i++){if(__eventListeners[i]==event){__eventListeners.splice(i,1);break;}}}}
function unregisterAllEvents()
{while(__eventListeners.length>0){removeEventListener(__eventListeners[0]);}}
function getEventTarget(e)
{var target;if(e)
{if(e.target)
{target=e.target;}
else if(e.srcElement)
{target=e.srcElement;}
if(target&&target.nodeType==3)
{target=target.parentNode;}}
return target;}
function findX(element)
{var x=0;if(element.offsetParent)
while(true)
{x+=element.offsetLeft;if(!element.offsetParent)
break;element=element.offsetParent;}
else if(element.x)
x+=element.x;return x;}
function findY(element)
{var y=0;if(element.offsetParent)
while(true)
{y+=element.offsetTop;if(!element.offsetParent)
break;element=element.offsetParent;}
else if(element.y)
y+=element.y;return y;}
function getClientWidth()
{return filterClientInfo(window.innerWidth?window.innerWidth:0,document.documentElement?document.documentElement.clientWidth:0,document.body?document.body.clientWidth:0);}
function getClientHeight()
{return filterClientInfo(window.innerHeight?window.innerHeight:0,document.documentElement?document.documentElement.clientHeight:0,document.body?document.body.clientHeight:0);}
function getScrollLeft()
{return filterClientInfo(window.pageXOffset?window.pageXOffset:0,document.documentElement?document.documentElement.scrollLeft:0,document.body?document.body.scrollLeft:0);}
function getScrollTop()
{return filterClientInfo(window.pageYOffset?window.pageYOffset:0,document.documentElement?document.documentElement.scrollTop:0,document.body?document.body.scrollTop:0);}
function filterClientInfo(win,doc,body)
{var retVal=win?win:0;if(doc&&(!retVal||(retVal>doc)))
retVal=doc;return body&&(!retVal||(retVal>body))?body:retVal;}
function togglePanelView(id){if(document.getElementById(id).className=='expanded'){document.getElementById(id).className='collapsed';}
else{document.getElementById(id).className='expanded';}}
function togglePanelArrow(id){if(document.getElementById(id).className=='expanded'){document.getElementById(id).className='collapsed';}
else{document.getElementById(id).className='expanded';}}
function get_Object(id){var object=null;if(document.layers){object=document.layers[id];}else if(document.all){object=document.all[id];}else if(document.getElementById){object=document.getElementById(id);}
return object;}
Encoder={EncodeType:"entity",isEmpty:function(val){if(val){return((val===null)||val.length==0||/^\s+$/.test(val));}else{return true;}},arr1:['&nbsp;','&iexcl;','&cent;','&pound;','&curren;','&yen;','&brvbar;','&sect;','&uml;','&copy;','&ordf;','&laquo;','&not;','&shy;','&reg;','&macr;','&deg;','&plusmn;','&sup2;','&sup3;','&acute;','&micro;','&para;','&middot;','&cedil;','&sup1;','&ordm;','&raquo;','&frac14;','&frac12;','&frac34;','&iquest;','&Agrave;','&Aacute;','&Acirc;','&Atilde;','&Auml;','&Aring;','&AElig;','&Ccedil;','&Egrave;','&Eacute;','&Ecirc;','&Euml;','&Igrave;','&Iacute;','&Icirc;','&Iuml;','&ETH;','&Ntilde;','&Ograve;','&Oacute;','&Ocirc;','&Otilde;','&Ouml;','&times;','&Oslash;','&Ugrave;','&Uacute;','&Ucirc;','&Uuml;','&Yacute;','&THORN;','&szlig;','&agrave;','&aacute;','&acirc;','&atilde;','&auml;','&aring;','&aelig;','&ccedil;','&egrave;','&eacute;','&ecirc;','&euml;','&igrave;','&iacute;','&icirc;','&iuml;','&eth;','&ntilde;','&ograve;','&oacute;','&ocirc;','&otilde;','&ouml;','&divide;','&oslash;','&ugrave;','&uacute;','&ucirc;','&uuml;','&yacute;','&thorn;','&yuml;','&quot;','&amp;','&lt;','&gt;','&OElig;','&oelig;','&Scaron;','&scaron;','&Yuml;','&circ;','&tilde;','&ensp;','&emsp;','&thinsp;','&zwnj;','&zwj;','&lrm;','&rlm;','&ndash;','&mdash;','&lsquo;','&rsquo;','&sbquo;','&ldquo;','&rdquo;','&bdquo;','&dagger;','&Dagger;','&permil;','&lsaquo;','&rsaquo;','&euro;','&fnof;','&Alpha;','&Beta;','&Gamma;','&Delta;','&Epsilon;','&Zeta;','&Eta;','&Theta;','&Iota;','&Kappa;','&Lambda;','&Mu;','&Nu;','&Xi;','&Omicron;','&Pi;','&Rho;','&Sigma;','&Tau;','&Upsilon;','&Phi;','&Chi;','&Psi;','&Omega;','&alpha;','&beta;','&gamma;','&delta;','&epsilon;','&zeta;','&eta;','&theta;','&iota;','&kappa;','&lambda;','&mu;','&nu;','&xi;','&omicron;','&pi;','&rho;','&sigmaf;','&sigma;','&tau;','&upsilon;','&phi;','&chi;','&psi;','&omega;','&thetasym;','&upsih;','&piv;','&bull;','&hellip;','&prime;','&Prime;','&oline;','&frasl;','&weierp;','&image;','&real;','&trade;','&alefsym;','&larr;','&uarr;','&rarr;','&darr;','&harr;','&crarr;','&lArr;','&uArr;','&rArr;','&dArr;','&hArr;','&forall;','&part;','&exist;','&empty;','&nabla;','&isin;','&notin;','&ni;','&prod;','&sum;','&minus;','&lowast;','&radic;','&prop;','&infin;','&ang;','&and;','&or;','&cap;','&cup;','&int;','&there4;','&sim;','&cong;','&asymp;','&ne;','&equiv;','&le;','&ge;','&sub;','&sup;','&nsub;','&sube;','&supe;','&oplus;','&otimes;','&perp;','&sdot;','&lceil;','&rceil;','&lfloor;','&rfloor;','&lang;','&rang;','&loz;','&spades;','&clubs;','&hearts;','&diams;'],arr2:['&#160;','&#161;','&#162;','&#163;','&#164;','&#165;','&#166;','&#167;','&#168;','&#169;','&#170;','&#171;','&#172;','&#173;','&#174;','&#175;','&#176;','&#177;','&#178;','&#179;','&#180;','&#181;','&#182;','&#183;','&#184;','&#185;','&#186;','&#187;','&#188;','&#189;','&#190;','&#191;','&#192;','&#193;','&#194;','&#195;','&#196;','&#197;','&#198;','&#199;','&#200;','&#201;','&#202;','&#203;','&#204;','&#205;','&#206;','&#207;','&#208;','&#209;','&#210;','&#211;','&#212;','&#213;','&#214;','&#215;','&#216;','&#217;','&#218;','&#219;','&#220;','&#221;','&#222;','&#223;','&#224;','&#225;','&#226;','&#227;','&#228;','&#229;','&#230;','&#231;','&#232;','&#233;','&#234;','&#235;','&#236;','&#237;','&#238;','&#239;','&#240;','&#241;','&#242;','&#243;','&#244;','&#245;','&#246;','&#247;','&#248;','&#249;','&#250;','&#251;','&#252;','&#253;','&#254;','&#255;','&#34;','&#38;','&#60;','&#62;','&#338;','&#339;','&#352;','&#353;','&#376;','&#710;','&#732;','&#8194;','&#8195;','&#8201;','&#8204;','&#8205;','&#8206;','&#8207;','&#8211;','&#8212;','&#8216;','&#8217;','&#8218;','&#8220;','&#8221;','&#8222;','&#8224;','&#8225;','&#8240;','&#8249;','&#8250;','&#8364;','&#402;','&#913;','&#914;','&#915;','&#916;','&#917;','&#918;','&#919;','&#920;','&#921;','&#922;','&#923;','&#924;','&#925;','&#926;','&#927;','&#928;','&#929;','&#931;','&#932;','&#933;','&#934;','&#935;','&#936;','&#937;','&#945;','&#946;','&#947;','&#948;','&#949;','&#950;','&#951;','&#952;','&#953;','&#954;','&#955;','&#956;','&#957;','&#958;','&#959;','&#960;','&#961;','&#962;','&#963;','&#964;','&#965;','&#966;','&#967;','&#968;','&#969;','&#977;','&#978;','&#982;','&#8226;','&#8230;','&#8242;','&#8243;','&#8254;','&#8260;','&#8472;','&#8465;','&#8476;','&#8482;','&#8501;','&#8592;','&#8593;','&#8594;','&#8595;','&#8596;','&#8629;','&#8656;','&#8657;','&#8658;','&#8659;','&#8660;','&#8704;','&#8706;','&#8707;','&#8709;','&#8711;','&#8712;','&#8713;','&#8715;','&#8719;','&#8721;','&#8722;','&#8727;','&#8730;','&#8733;','&#8734;','&#8736;','&#8743;','&#8744;','&#8745;','&#8746;','&#8747;','&#8756;','&#8764;','&#8773;','&#8776;','&#8800;','&#8801;','&#8804;','&#8805;','&#8834;','&#8835;','&#8836;','&#8838;','&#8839;','&#8853;','&#8855;','&#8869;','&#8901;','&#8968;','&#8969;','&#8970;','&#8971;','&#9001;','&#9002;','&#9674;','&#9824;','&#9827;','&#9829;','&#9830;'],HTML2Numerical:function(s){return this.swapArrayVals(s,this.arr1,this.arr2);},NumericalToHTML:function(s){return this.swapArrayVals(s,this.arr2,this.arr1);},numEncode:function(s){if(this.isEmpty(s))return"";var e="";for(var i=0;i<s.length;i++)
{var c=s.charAt(i);if(c<" "||c>"~")
{c="&#"+c.charCodeAt()+";";}
e+=c;}
return e;},htmlDecode:function(s){var c,m,d=s;if(this.isEmpty(d))return"";d=this.HTML2Numerical(d);arr=d.match(/&#[0-9]{1,5};/g);if(arr!=null){for(var x=0;x<arr.length;x++){m=arr[x];c=m.substring(2,m.length-1);if(c>=-32768&&c<=65535){d=d.replace(m,String.fromCharCode(c));}else{d=d.replace(m,"");}}}
return d;},htmlEncode:function(s,dbl){if(this.isEmpty(s))return"";dbl=dbl||false;if(dbl){if(this.EncodeType=="numerical"){s=s.replace(/&/g,"&#38;");}else{s=s.replace(/&/g,"&amp;");}}
s=this.XSSEncode(s,false);if(this.EncodeType=="numerical"||!dbl){s=this.HTML2Numerical(s);}
s=this.numEncode(s);if(!dbl){s=s.replace(/&#/g,"##AMPHASH##");if(this.EncodeType=="numerical"){s=s.replace(/&/g,"&#38;");}else{s=s.replace(/&/g,"&amp;");}
s=s.replace(/##AMPHASH##/g,"&#");}
s=s.replace(/&#\d*([^\d;]|$)/g,"$1");if(!dbl){s=this.correctEncoding(s);}
if(this.EncodeType=="entity"){s=this.NumericalToHTML(s);}
return s;},XSSEncode:function(s,en){if(!this.isEmpty(s)){en=en||true;if(en){s=s.replace(/\'/g,"&#39;");s=s.replace(/\"/g,"&quot;");s=s.replace(/</g,"&lt;");s=s.replace(/>/g,"&gt;");}else{s=s.replace(/\'/g,"&#39;");s=s.replace(/\"/g,"&#34;");s=s.replace(/</g,"&#60;");s=s.replace(/>/g,"&#62;");}
return s;}else{return"";}},hasEncoded:function(s){if(/&#[0-9]{1,5};/g.test(s)){return true;}else if(/&[A-Z]{2,6};/gi.test(s)){return true;}else{return false;}},stripUnicode:function(s){return s.replace(/[^\x20-\x7E]/g,"");},correctEncoding:function(s){return s.replace(/(&amp;)(amp;)+/,"$1");},swapArrayVals:function(s,arr1,arr2){if(this.isEmpty(s))return"";var re;if(arr1&&arr2){if(arr1.length==arr2.length){for(var x=0,i=arr1.length;x<i;x++){re=new RegExp(arr1[x],'g');s=s.replace(re,arr2[x]);}}}
return s;},inArray:function(item,arr){for(var i=0,x=arr.length;i<x;i++){if(arr[i]===item){return i;}}
return-1;}}
var popupArray=[];document.onclick=check;function check(e){var target=(e&&e.target)||(event&&event.srcElement);var divs=$('.PopUp').toArray();var i=0;var obj;var countHiddenFloats=0;if(popupArray.length>0)
{for(i=0;i<popupArray.length;i++)
{if(!target.floater)
{obj=document.getElementById(popupArray[i]);obj.style.visibility='hidden';removeArrItem(popupArray,popupArray[i]);countHiddenFloats++;}}}
if(countHiddenFloats>0)
RestoreObjectTags();}
function initializeFloater(triggerID,floaterID,click,mouseout,Xoffset,Yoffset)
{if(!offset)var offset=0;if(mouseout=='undefined')var mouseout=true;var trigger=document.getElementById(triggerID);var floater=document.getElementById(floaterID);if(trigger&&floater)
{trigger.floater=floater;floater.isFocused=false;floater.isFloater=true;floater.Xoffset=Xoffset;floater.Yoffset=Yoffset;if(click)
{trigger.onclick=function(){var i=0;for(i=0;i<popupArray.length;i++)
{if(popupArray[i]!=floater.id)
{hideFloater(popupArray[i],true);removeArrItem(popupArray,popupArray[i]);}}
return false;}}
var divs=floater.getElementsByTagName('div');for(var i=0;i<divs.length;i++)
{if(divs[i].className=="button")
{addAREventListener(divs[i],'click',function(){hideFloater(floater.id,true);removeArrItem(popupArray,popupArray[i]);});}}
addAREventListener(trigger,click?'click':'mouseover',trigger_onfire);addAREventListener(floater,'mouseover',floater_onmouseover);}}
function floater_onmouseover(e)
{if(!e)var e=window.event;var element=getEventTarget(e);if(element)
{if(element.isFloater)
{element.isFocused=true;}
else
{while(element)
{element=element.parentNode;if(element.isFloater)
{element.isFocused=true;break;}}}}}
function hideFloater(elementID,forceClose)
{var element=document.getElementById(elementID);if(element)
{if(forceClose)
{element.isFocused=false;}
if(!element.isFocused)
{element.style.visibility="hidden";}}
RestoreObjectTags();}
function trigger_onfire(e)
{if(!e)var e=window.event;var element=getEventTarget(e);var divs=$('.PopUp').toArray();var i=0;if(popupArray.length>0)
{for(i=0;i<popupArray.length;i++)
{hideFloater(popupArray[i],true);removeArrItem(popupArray,popupArray[i]);}}
if(element&&element.floater)
{var floater=element.floater;var floaterWidth=floater.offsetWidth;var floaterHeight=floater.offsetHeight;var Xoffset=floater.Xoffset?floater.Xoffset:0;var Yoffset=floater.Yoffset?floater.Yoffset:0;var x=findX(element)+Xoffset;var y=findY(element)+element.offsetHeight+Yoffset;var browserWidth=getClientWidth();var browserHeight=getClientHeight();var scrollLeft=getScrollLeft();var scrollTop=getScrollTop();if(browserWidth>floaterWidth)
{if(x<scrollLeft)
{x=scrollLeft;}
else if(x+floaterWidth>browserWidth+scrollLeft)
{x=browserWidth-floaterWidth+scrollLeft;}}
if(browserHeight>floaterHeight)
{if(y+floaterHeight>browserHeight+scrollTop)
{y=y-floaterHeight-element.offsetHeight-(2*Yoffset);y=y>scrollTop?y:scrollTop;}}
floater.style.left=x+"px";floater.style.top=y+"px";floater.style.visibility="visible";popupArray[popupArray.length]=floater.id;HideObjectTags($(floater),true);}}
function removeArrItem(arr,id)
{if(id)
{for(var i=arr.length-1;i>=0;i-=1)
{if(arr[i]==id)
{arr.splice(i,1);}}}}
var HiddenObjects=[];function HideObjectTags(overlapTarget,onlyHideOverlapping){var hiddenObjects=HiddenObjects;var elementsNotToHide=[];if(overlapTarget!=null){elementsNotToHide=overlapTarget.find("*");}
$("object:visible, embed:visible, select:visible").each(function(){if(onlyHideOverlapping&&overlapTarget!=null&&!AR.IntersectionDetection.DoElementsOverlap(overlapTarget,$(this))){return;}
if($.inArray(this,elementsNotToHide)>=0){return;}
$(this).css("visibility","hidden");hiddenObjects.push(this);});}
function RestoreObjectTags(){var objectsToRestore=HiddenObjects;HiddenObjects=[];jQuery.each(objectsToRestore,function(){$(this).css("visibility","visible");});}
function showModalDialog(dialogID,underlayID,wrapperID)
{var success=false;setCookie('test','none',1);if(getCookie('test'))
{if(getCookie('ARUKModal')!='noshow')
{try
{var u=document.getElementById(underlayID);var p=document.getElementById(dialogID);var w=document.getElementById(wrapperID);if(p.style.visibility)
{p.style.visibility='visible';u.style.visibility='visible';w.style.visibility='visible';}
if(p.style.display)
{p.style.display='block';u.style.display='block';w.style.display='block';}}
catch(ex)
{}}}}
function hideModalDialog(dialogID,underlayID,wrapperID)
{var u=document.getElementById(underlayID);var p=document.getElementById(dialogID);var w=document.getElementById(wrapperID);if(p.style.visibility)
{p.style.visibility='hidden';u.style.visibility='hidden';w.style.visibility='hidden';}
else if(p.style.display)
{p.style.display='none';u.style.display='none';w.style.display='none';}
setCookie('ARUKModal','noshow',1);}
function hideModalDialogForever(underlayID,dialogID,wrapperID)
{var u=document.getElementById(underlayID);var p=document.getElementById(dialogID);var w=document.getElementById(wrapperID);if(p.style.visibility)
{p.style.visibility='hidden';u.style.visibility='hidden';w.style.visibility='hidden';}
else if(p.style.display)
{p.style.display='none';u.style.display='none';w.style.display='none';}
setCookie('ARUKModal','noshow',365);}
$.fn.reverse=[].reverse;$.fn.trim=function(str){if(str===undefined){str=$(this)[0];}
str=str.replace(/^\s\s*/,''),ws=/\s/,i=str.length;while(ws.test(str.charAt(--i)));return str.slice(0,i+1);};$.fn.isInt=function(x){if(x===undefined){x=$(this).val();}
var objRegExp=/(^-?\d\d*$)/;return objRegExp.test(x);};Array.prototype.remove=function(from,to){var rest=this.slice((to||from)+1||this.length);this.length=from<0?this.length+from:from;return this.push.apply(this,rest);};String.prototype.startsWith=function(prefix){return(this.substr(0,prefix.length)===prefix);}
String.prototype.endsWith=function(str){return(this.match(str+"$")==str)};$.extend(AR,{_isMobileDevice:false,Config:{ClientServiceUrl:"/Services/Client.svc/",ApplicationPath:"",ErrorLoggingHandler:"~/Handlers/LogClientError.ashx"},AnimationSpeed:function(){if(AR.IsIE6()==true){return 10;}
else{return 500;}},ServerSideData:{Data:{},Set:function(data,key){if(key){this.Data[key]=data;}},Initialize:function(data){this.Data=data;},Extend:function(data){$.extend(true,this.Data,data);},Get:function(key){var obj=this.Data[key];if(obj!=null){return obj;}
else{this.Data[key]={};return this.Data[key];}},GetByDom:function(item){return this.Get($(item).attr("id"));}},IsIE6:function(){return(jQuery.browser.msie&&jQuery.browser.version.substr(0,1)=="6");},ImageServer:{},ResponseCode:{"DidNotReachServer":-1,"Success":0,"Failure":1,"UserError":2,"NotFound":3,"PartialFailure":4},ShouldLogResponseCode:function(responseCode){return responseCode==AR.ResponseCode.Failure;},ItemType:{Recipe:1,Article:2,WebLink:3,Reference:4,PersonalRecipe:5,CustomRecipe:6,Menu:7,Video:8,NotSet:-1},MenuType:{MenuAR:1,MenuPersonal:2,MenuSample:3,NotSet:-1},TypeSpecificID:0,DebugVars:function(vars){var debug="<table cellspacing=3>";for(x=0;x<vars.length;x++){debug+="<tr><td align='right' style='font-weight:bold'>"+vars[x]+":</td><td>"+vars[x+1]+"</td></tr>";x++;}
debug+="</table>";return debug;},LogError:function(description,source,title){description=(description==null)?"No Description":description;AR.LogErrorEx({description:description},source,title);},LogAlert:function(description,source,title){description=(description==null)?"No Description":description;AR.LogAlertEx({description:description},source,title);},SetCursor:function(cursorStyle){document.body.style.cursor=cursorStyle;},Cursor:{"SetWait":function(){document.body.style.cursor='wait';},"SetDefault":function(){document.body.style.cursor='default';}},HostName:function(){var hostName=location.host;if(AR.Config.ApplicationPath.indexOf("/")!=0){hostName+="/";}
return hostName+AR.Config.ApplicationPath;},SetIsMobileDevice:function(value){this._isMobileDevice=value;},IsMobileDevice:function(){return this._isMobileDevice;}});AR.MessageBox={MessageType:{"Information":0,"Warning":1,"Failure":2,"Success":3},MessageClass:['message-box','message-box message-warning','message-box message-failure','message-box message-success'],PrintMessage:function(targetID,messageType,messageText,persist,duration){if(duration==null||duration==undefined){duration=5000;}
var target=$(targetID);target.removeClass(AR.MessageBox.MessageClass[1]).removeClass(AR.MessageBox.MessageClass[2]).removeClass(AR.MessageBox.MessageClass[3]).addClass(AR.MessageBox.MessageClass[messageType]);var speed=500;target.hide().html(messageText).fadeIn(speed,function(){$(this).css('zoom','');if(persist==null||persist==false){setTimeout(function(){target.slideUp(speed);},duration);}});},TryGetSelector:function(id){if(id==null||id==''){id="#msgClientPage";}
return id;},ShowSuccess:function(msg,selector,persist,duration){AR.MessageBox.PrintMessage(AR.MessageBox.TryGetSelector(selector),AR.MessageBox.MessageType.Success,msg,persist,duration);},ShowFailure:function(msg,selector,persist,duration){AR.MessageBox.PrintMessage(AR.MessageBox.TryGetSelector(selector),AR.MessageBox.MessageType.Failure,msg,persist,duration);},ShowWarning:function(msg,selector,persist,duration){AR.MessageBox.PrintMessage(AR.MessageBox.TryGetSelector(selector),AR.MessageBox.MessageType.Warning,msg,persist,duration);},ShowInfo:function(msg,selector,persist,duration){AR.MessageBox.PrintMessage(AR.MessageBox.TryGetSelector(selector),AR.MessageBox.MessageType.Information,msg,persist,duration);}};AR.Toolbox={Close:function(){$(".toolbox-actions-trigger-active").click();}}
var rowOver=function(){var thisRow=$(this);thisRow.addClass("recipe-list-row-active");var recipeName=thisRow.find(".title").text();$(".recipe-name").text(recipeName);$(this).find(".toolbox-header h1").show();};$(".row").live("mouseover.row-over",rowOver);var rowOut=function(){$(this).removeClass("recipe-list-row-active");if($(this).find(".toolbox-header").data("active")!="active"){$(this).find(".toolbox-header h1").hide();}};$(".row").live("mouseout.row-out",rowOut);$(".toolbox-header").live("click",function(){var toolboxLink=$(this).find("a");if($(this).data("active")=="active"){$(this).next("ul").slideUp(300,function callback(){toolboxLink.removeClass("toolbox-actions-trigger-active");});$(this).data("active","");}else{toolboxLink.addClass("toolbox-actions-trigger-active");$(this).next("ul").slideDown(300);$(this).data("active","active");}});AR.Dialog={Overlay:{},ShowLayer:function(id,speed){if(AR.SlideUpAllOptionsDropdowns){AR.SlideUpAllOptionsDropdowns();}
var mb=$(id);speed=speed|200;AR.TabBlocker.singletonInstance.BlockTabindexes($(document),mb);mb.fadeIn(speed);$(this.Overlay).css({"opacity":"0.20"}).fadeIn(speed);this.SizeModalToContent(mb);this.CenterModal(mb);this.ApplyFocusToModal(mb);},SizeModalToContent:function(modalBox){modalBox=modalBox||$(".modal:visible");var resizeableContent=modalBox.find(".rsz-content").children();if(resizeableContent.length>0){var contentWidth=resizeableContent.outerWidth();var contentHeight=resizeableContent.outerHeight();modalBox.width(contentWidth+18).height(contentHeight+36);modalBox.find(".rsz-footer .rsz-footer-content, .rsz-header .rsz-header-content").width(contentWidth-6);modalBox.find(".rsz-right-border, .rsz-left-border").height(contentHeight);}},CenterModal:function(modalBox){var mHeight=modalBox.outerHeight(true);var mWidth=modalBox.outerWidth(true);var winHeight=$(document).height();var visibleHeight=document.documentElement.clientHeight;var winWidth=$(document).width();var scrollTop=$(document).scrollTop();var posTop=(visibleHeight/2-mHeight/2)+scrollTop;if(posTop<0)
posTop=0;var posLeft=winWidth/2-mWidth/2;if(posLeft<0)
posLeft=0;modalBox.css({"position":"absolute","top":posTop,"left":posLeft});AR.AdSuppress(modalBox);$(this.Overlay).css({"height":winHeight,"width":winWidth});},CloseModalBox:function(onFinishCallback,speed){speed=speed|200;var targetElements=$(this.Overlay).add(".modal");var callbacksToIgnore=targetElements.length-1;this.RunOnClosingHandlers();var that=this;var restoreElementsIfAppropriate=function(){if(callbacksToIgnore<=0){AR.TabBlocker.singletonInstance.RestoreTabindexes();that.RunOnClosedHandlers();if(onFinishCallback!=null){onFinishCallback();}}};restoreElementsIfAppropriate();targetElements.fadeOut(speed,function(){restoreElementsIfAppropriate();callbacksToIgnore=callbacksToIgnore-1;});},CloseModalBoxAndShowAnother:function(id){AR.Dialog.CloseModalBox(function(){AR.Dialog.ShowLayer(id);});},EnableGlobalEscapeHandler:function(){AR.Dialog.DisableGlobalEscapeHandler();$(document).bind("keyup.DialogEscapeHandler",function(e){if(e.keyCode==27){AR.Dialog.CloseModalBox();}});},DisableGlobalEscapeHandler:function(){$(document).unbind("keyup.DialogEscapeHandler");},_onClosingHandlers:[],_onClosedHandlers:[],AddOnClosingHandler:function(callback){this._onClosingHandlers.push(callback);},RunOnClosingHandlers:function(){var currentHandlers=this._onClosingHandlers;this._onClosingHandlers=[];$.each(currentHandlers,function(index,value){value();});},AddOnClosedHandler:function(callback){this._onClosedHandlers.push(callback);},RunOnClosedHandlers:function(){var currentHandlers=this._onClosedHandlers;this._onClosedHandlers=[];$.each(currentHandlers,function(index,value){value();});},ApplyFocusToModal:function(mb){var allInputs=mb.find("input:visible, textarea:visible");if(allInputs.length>0&&!allInputs[0].disabled){allInputs[0].focus();}}};AR.VisitorInfo={IsLoggedIn:function(){return this._data._isLoggedIn;},IsRecognized:function(){return this._data._isRecognized;},IsSupportingMember:function(){return this._data._isSupportingMember;},IsLoggedInAsASupportingMember:function(){return this._data._isLoggedIn&&this._data._isSupportingMember;},VisitorID:function(){return this._data._ID;},_data:{_isLoggedIn:false,_isRecognized:false,_isSupportingMember:false,_ID:0}};ioc.Register("_visitorInfo").withInstance(AR.VisitorInfo);AR.Loader={Show:function(){AR.Cursor.SetWait();},Hide:function(callback){AR.Dialog.CloseModalBox(callback,10);AR.Cursor.SetDefault();}}
AR.Photos={ShowUserPhotoUploadDialog:function(data){AR.Analytics.RecordAction(AR.Analytics.Event.Start,AR.Analytics.Action.Source.RecipePage,AR.Analytics.Action.Type.RecipeAddPhoto,AR.Analytics.Action.GetItem(data.ItemType));var modalBox=$('.modal-upload-a-photo');var iframe=modalBox.find('iframe')[0];var continueButton=modalBox.find('.modal-upload-a-photo-continue-button');continueButton.unbind('click');continueButton.bind('click',function(e){e.preventDefault();var iframeDocument=iframe.contentWindow?iframe.contentWindow:iframe.contentDocument.document;iframeDocument.IframeSubmit();});IframeCallback_RecenterIframeDialog=function(iframeDimensionsFunc,buttonText){modalBox.find('.modal-upload-a-photo-continue-button-text').html(buttonText);var iframeDimensions=iframeDimensionsFunc();$(iframe).css('height',iframeDimensions.Height);AR.Dialog.CenterModal(modalBox);};IframeCallback_FinishIframeDialog=function(photoID,previewImage50x50,previewImage140x140){$('#'+data.ResultField).val(photoID);AR.Dialog.CloseModalBox();var callback=eval(data.ClientCallback);if(callback){callback(photoID,previewImage50x50,previewImage140x140);}
AR.Analytics.SendBeacon({"pev2":"Add a Recipe Photo","eVar7":AR.Analytics.Action.Source.RecipePage,"eVar8":AR.Analytics.Action.Type.RecipeAddPhoto,"eVar9":AR.Analytics.Action.GetItem(AR.ServerSideData.Data.ItemType),"linkTrackVars":"eVar7,eVar8,eVar9,events","events":"event10","linkTrackEvents":"event10"});};$(iframe).attr('src',data.IframeSrc);AR.Dialog.ShowLayer(modalBox);}};AR.ContactUs={PopulateRecipeContactUs:function(listItem){if(listItem){var layer=$(".modal-recipe-contact-us");$(".contact-us-recipe-name",layer).html(listItem.title);$(".contact-us-recipe-reply-address",layer).val(listItem.email);$(".recipe-approval-status",layer).val(listItem.status);$(".recipe-item-owner-id",layer).val(listItem.visitor);$(".recipe-shared-item-id",layer).val(listItem.ID);$(".recipe-approval-status-updated",layer).val(listItem.dateUpdated);$(".recipe-total",layer).val(listItem.recipeTotal);$("#commit",layer).unbind("click").click(listItem.commit);if(listItem.email.length>0){$(".contact-us-recipe-message").focus();}
else{$(".contact-us-recipe-reply-address").focus();}}}};AR.TypesDlg={RecipeTypes:["PersonalRecipe","WebLink","Reference","CustomRecipe","Recipe"],MenuTypes:["PersonalMenu","Menu"],SwitchTypes:function(shift,typeGroupID,type){if(typeGroupID==1){AR.TypesDlg.SwitchRecipeTypes(shift,type);}
else if(typeGroupID==2){AR.TypesDlg.SwitchMenuTypes(shift,type);}},SwitchRecipeTypes:function(shift,type){type=type||$(".recipe-type-content:visible").attr('class').split(' ')[1];$(".recipe-type-content").each(function(){$(this).hide();});var index=$.inArray(type,this.RecipeTypes);index=index+shift;if(index<0){index=this.RecipeTypes.length-1;}
else if(index>=this.RecipeTypes.length){index=0;}
$("."+this.RecipeTypes[index]).show();},SwitchMenuTypes:function(shift,type){type=type||$(".menu-type-content:visible").attr('class').split(' ')[1];$(".menu-type-content").each(function(){$(this).hide();});var index=$.inArray(type,this.MenuTypes);index=index+shift;if(index<0){index=this.MenuTypes.length-1;}
else if(index>=this.MenuTypes.length){index=0;}
$("."+this.MenuTypes[index]).show();}};AR.RecipeApprovalStatus={Types:["AwaitingReview","Accepted","NotAccepted","NotSubmittedForReview"],SwitchTypes:function(listItem){listItem=listItem||$(".recipe-approval-status-type-content:visible").attr('class').split(' ')[1];var layer=$(".recipe-approval-status-type-content "+listItem.status);var index=$.inArray(listItem.status,this.Types);var titleID='#recipe-name-'+listItem.status;$(".recipe-approval-status-type-content").each(function(){$(this).hide();});$("."+this.Types[index]).show();$(titleID).html(listItem.title);}};AR.StarRating={SetStarRatingImages:function(ratingList,value){var selectedClass='star-selected';ratingList.find('.'+selectedClass).removeClass(selectedClass);switch(value){case 5:$('.five-stars',ratingList).addClass(selectedClass);case 4:$('.four-stars',ratingList).addClass(selectedClass);case 3:$('.three-stars',ratingList).addClass(selectedClass);case 2:$('.two-stars',ratingList).addClass(selectedClass);case 1:$('.one-star',ratingList).addClass(selectedClass);}},CreateStarRatingController:function(ratingInputId){var inputElement=$('#'+ratingInputId);var ratingList=inputElement.prev('ul');function onRatingChanged(newValue){inputElement.val(newValue);AR.StarRating.SetStarRatingImages(ratingList,newValue);}
function getRating(){var rating=inputElement.val();if(1<=rating&&rating<=5){return rating;}
return 0;}
onRatingChanged(parseInt(inputElement.val()));$('a.five-stars',ratingList).click(function(){onRatingChanged(5);return false;});$('a.four-stars',ratingList).click(function(){onRatingChanged(4);return false;});$('a.three-stars',ratingList).click(function(){onRatingChanged(3);return false;});$('a.two-stars',ratingList).click(function(){onRatingChanged(2);return false;});$('a.one-star',ratingList).click(function(){onRatingChanged(1);return false;});return{SetRating:onRatingChanged,GetRating:getRating};}};$(document).ready(function(){if(AR.PrimaryNav!=null&&AR.PrimaryNav._initFinished==0){AR.PrimaryNav.OnInit();}
if(AR.PrimaryNav!=null&&AR.PrimaryNav._loadFinished==0){AR.PrimaryNav.OnLoad();}
if(AR.DialogLinker!=null){AR.DialogLinker.LinkMembershipDialogs($(document));}
AR.Dialog.Overlay=$('.modal-overlay:not(.loader)');$('a.modal-link').each(function(){$(this).click(function(event){event.preventDefault();});});$(".close-modal").click(function(e){AR.Dialog.CloseModalBox();e.preventDefault();});$(".add-photo").click(function(){AR.Dialog.ShowLayer(".modal-add-a-photo",null);});$(".open-recipe-approvalstatus-type-modal").click(function(){AR.Dialog.ShowLayer(".modal-recipe-approval-status-types",AR.RecipeApprovalStatus.SwitchTypes(AR.ServerSideData.GetByDom(this)));});$('.open-photo-upload-link').click(function(){var data=AR.ServerSideData.GetByDom(this);AR.Photos.ShowUserPhotoUploadDialog(data);});$(".open-recipe-contact-us-modal").click(function(){AR.Dialog.ShowLayer(".modal-recipe-contact-us",AR.ContactUs.PopulateRecipeContactUs(AR.ServerSideData.GetByDom(this)));});$(".open-add-folder-modal").click(function(){AR.Analytics.RecordAction(AR.Analytics.Event.Start,AR.Analytics.Action.Source.RecipeBox,AR.Analytics.Action.Type.FolderAdd);$("#msgAddFolderDialog").hide();$(".foldername-add").val('');AR.Dialog.ShowLayer(".modal-folder-add",null);var funcExclude=function(folderID){if(isNaN(folderID)||folderID<=0){return true;}
return false;};AR.Folders.Dom.LoadDropDownList($(".folder-add-ddl"),funcExclude,true);AR.Folders.Dom.SetDropdownSelected(".folder-add-ddl",AR.ServerSideData.GetByDom(this).selectedFolderID);});$('.modal-folder-add .folder-add-close-button').click(function(){$(".foldername-add").val('');$('#msgAddFolderDialog').hide;AR.Dialog.CloseModalBox();});AR.Share.LoadDialogs();AR.Dialog.EnableGlobalEscapeHandler();$('.add-to-brands-i-like').click(function(){var brandID=AR.ServerSideData.Get("BrandID");AR.BrandedProfile.AddToBrandsILike(brandID);});});function addToFolder(successMessage){AR.Dialog.CloseModalBox();AR.MessageBox.PrintMessage("#msgClientPage",AR.MessageBox.MessageType.Failure,successMessage);}
AR.ClientService={DoGet:function(url,callback){AR.SetModuleLogContent("AR.ClientService request",{verb:"GET",url:url,clientServiceUrl:AR.LogEval("AR.Config.ClientServiceUrl")});var ajaxSuccessCallback=this.CreateSuccessHandler(callback);var ajaxErrorCallback=this.CreateErrorHandler(callback);if(!this.__suppressLoaderChangeOnNextServiceCall){AR.Loader.Show();}
try{$.ajax({type:"GET",url:AR.Config.ClientServiceUrl+url,contentType:"application/json; charset=utf-8",dataType:"json",success:ajaxSuccessCallback,error:ajaxErrorCallback});}
catch(e){AR.SetModuleLogContent("AR.ClientService response",{message:"An exception was thrown calling $.ajax() for a GET request",exception:e});ajaxErrorCallback(null,null,null);}
this.__suppressLoaderChangeOnNextServiceCall=false;},DoInvoke:function(verb,url,postBody,callback,prependClientServiceURL){if(prependClientServiceURL==null||prependClientServiceURL==undefined){prependClientServiceURL=true;}
AR.SetModuleLogContent("AR.ClientService request",{verb:verb,url:url,postBody:postBody,clientServiceUrl:AR.LogEval("AR.Config.ClientServiceUrl")});var ajaxSuccessCallback=this.CreateSuccessHandler(callback);var ajaxErrorCallback=this.CreateErrorHandler(callback);if(!this.__suppressLoaderChangeOnNextServiceCall){AR.Loader.Show();}
var ajaxURL=prependClientServiceURL?(AR.Config.ClientServiceUrl+url):url;try{$.ajax({type:verb,url:ajaxURL,data:JSON.stringify(postBody),contentType:"application/json; charset=utf-8",dataType:"json",success:ajaxSuccessCallback,error:ajaxErrorCallback});}
catch(e){AR.SetModuleLogContent("AR.ClientService response",{message:"An exception was thrown calling $.ajax() for a non-get request",verb:verb,exception:e});ajaxErrorCallback(null,null,null);}
this.__suppressLoaderChangeOnNextServiceCall=false;},__suppressLoaderChangeOnNextServiceCall:false,SuppressNextLoaderChange:function(){this.__suppressLoaderChangeOnNextServiceCall=true;},CreateSuccessHandler:function(callback){if(this.__suppressLoaderChangeOnNextServiceCall){return function(data){AR.SetModuleLogContent("AR.ClientService response",{message:"A client service call succeeded",response:data});callback(data);};}else{return function(data){AR.SetModuleLogContent("AR.ClientService response",{message:"A client service call succeeded",response:data});AR.Loader.Hide(function(){callback(data);});};}},CreateErrorHandler:function(callback){if(this.__suppressLoaderChangeOnNextServiceCall){return function(XMLHttpRequest,ignored1,ignored2){var responseCode=AR.ResponseCode.Failure;if(XMLHttpRequest!=null){responseCode=AR.ResponseCode.DidNotReachServer;AR.SetModuleLogContent("AR.ClientService response",{message:"A client service call failed",status:XMLHttpRequest.status,statusText:XMLHttpRequest.statusText});}
callback({Message:"There was an unexpected error.",ResponseCode:responseCode,Data:null});}}else{return function(XMLHttpRequest,ignored1,ignored2){var responseCode=AR.ResponseCode.Failure;if(XMLHttpRequest!=null){responseCode=AR.ResponseCode.DidNotReachServer;AR.SetModuleLogContent("AR.ClientService response",{message:"A client service call failed",status:XMLHttpRequest.status,statusText:XMLHttpRequest.statusText});}
AR.Loader.Hide(function(){callback({Message:"There was an unexpected error.",ResponseCode:responseCode,Data:null});});}}},BoolToString:function(value){return(value==true||value.toString().toLowerCase()=="true")?'true':'false';},ContactUs:function(address,subject,message,category,callback){this.DoInvoke('POST','Contact/Us/'+category,{address:address,subject:subject,message:message},callback);},CreateFolder:function(name,parentFolderID,callback){this.DoInvoke('POST','Folder',{name:name,parentFolderID:parentFolderID},callback);},DeleteFolder:function(folderID,name,callback){this.DoInvoke('POST','Folder/Delete/'+folderID,{name:name},callback);},DeleteFromRecipeBox:function(savedItemID,folderID,callback){this.DoInvoke('POST','Recipebox/Item/Delete/'+savedItemID,{folderID:folderID},callback);},GetNote:function(savedItemID,callback){this.DoGet('Note/'+savedItemID,callback);},GetPhotos:function(itemID,isRecipe,callback){this.DoGet('Photos/'+itemID+'/'+this.BoolToString(isRecipe),callback);},GetPhotosPaged:function(itemID,isRecipe,pageNumber,pageSize,callback){this.DoGet('Photos/'+itemID+'/'+this.BoolToString(isRecipe)+'?pageNumber='+pageNumber+'&pageSize='+pageSize,callback);},GetReview:function(itemID,itemType,callback){this.DoGet('Review/'+itemID+'/'+itemType,callback);},GetReviewsPaged:function(itemID,itemType,pageNumber,pageSize,sort,callback){this.DoGet('Reviews/'+itemID+'/'+itemType+'?pageNumber='+pageNumber+'&pageSize='+pageSize+'&sort='+sort,callback);},IncrementReviewWasHelpful:function(reviewID,callback){this.DoInvoke('POST','Review/'+reviewID+'/Helpful',{action:'Add',value:1},callback);},MoveFolder:function(folderID,parentFolderID,name,callback){this.DoInvoke('POST','Folder/Move/'+folderID,{parentFolderID:parentFolderID,name:name},callback);},RenameFolder:function(folderID,nameNew,nameOld,callback){this.DoInvoke('POST','Folder/Rename/'+folderID,{nameNew:nameNew,nameOld:nameOld},callback);},SaveItemShareState:function(savedItemID,isShared,submitForApproval,callback){this.DoInvoke('POST','Share/'+savedItemID,{isShared:isShared,submitForApproval:submitForApproval},callback);},SaveNote:function(savedItemID,note,callback){this.DoInvoke('POST','Note/'+savedItemID,{note:note},callback);},SaveReview:function(itemID,itemType,rating,review,callback){this.DoInvoke('POST','Review/'+itemID+'/'+itemType,{rating:rating,review:review},callback);},SaveToRecipeBox:function(itemID,isRecipe,isMenu,folderID,callback){this.DoInvoke('POST','RecipeBox/Item/'+itemID+'/'+this.BoolToString(isRecipe),{folderID:folderID,isMenu:this.BoolToString(isMenu)},callback);},AddToShoppingList:function(listID,isKitchenApprovedRecipe,isMenu,itemID,servings,callback){this.DoInvoke('POST','ShoppingList/Item/'+itemID+'/'+this.BoolToString(isKitchenApprovedRecipe),{isMenu:this.BoolToString(isMenu),servings:servings,listID:listID},callback);},AddGroceryItemsToShoppingList:function(listID,items,callback){this.DoInvoke('POST','ShoppingList/Items/'+listID,{items:items},callback);},AddCustomGroceryItemsToShoppingList:function(listID,groceryItemTexts,callback){this.DoInvoke('POST','ShoppingList/Item/Custom/Many/'+listID,{groceryItemTexts:groceryItemTexts},callback);},AddCustomGroceryItemsToShoppingListAisle:function(listID,aisleID,groceryItemTexts,callback){this.DoInvoke('POST','ShoppingList/Item/Custom/Many/'+listID+"/"+aisleID,{groceryItemTexts:groceryItemTexts},callback);},AddCustomGroceryItemToShoppingList:function(listID,groceryItemText,callback){this.DoInvoke('POST','ShoppingList/Item/Custom/'+listID,{groceryItemText:groceryItemText},callback);},AddIngredientsToShoppingList:function(shoppingListID,recipeID,servings,ingredients,callback){var url="ShoppingList/Ingredients/Add/"+shoppingListID;var postData={recipeID:recipeID,servings:servings,ingredients:ingredients};this.DoInvoke('POST',url,postData,callback);},GetGroceryItems:function(aisleID,callback){this.DoGet('ShoppingList/Grocery/'+aisleID,callback);},CreateShoppingList:function(name,isDefault,callback){this.DoInvoke('POST','ShoppingList',{name:name,isDefault:isDefault},callback);},RenameShoppingList:function(listID,name,callback){this.DoInvoke('POST','ShoppingList/Rename/'+listID,{name:name},callback);},DeleteRecipesAndUpdateServings:function(listID,kitchenApprovedRecipeIDsToDelete,personalRecipeIDsToDelete,servingsToUpdate,callback){this.DoInvoke('POST','ShoppingList/Update/'+listID,{kitchenApprovedRecipeIDsToDelete:kitchenApprovedRecipeIDsToDelete,personalRecipeIDsToDelete:personalRecipeIDsToDelete,servingsToUpdate:servingsToUpdate},callback);},DeleteAndUpdateGroceryItems:function(listID,groceryItemsToDelete,kitchenApprovedRecipeItemsToDelete,personalItemsToDelete,groceryItemsToUpdate,kitchenApprovedRecipeItemsToUpdate,personalItemsToUpdate,callback){this.DoInvoke('POST','ShoppingList/UpdateItems/'+listID,{groceryItemsToDelete:groceryItemsToDelete,kitchenApprovedRecipeItemsToDelete:kitchenApprovedRecipeItemsToDelete,personalItemsToDelete:personalItemsToDelete,groceryItemsToUpdate:groceryItemsToUpdate,kitchenApprovedRecipeItemsToUpdate:kitchenApprovedRecipeItemsToUpdate,personalItemsToUpdate:personalItemsToUpdate},callback);},AddPhotoToSharedItem:function(sharedItemID,userPhotoID,callback){this.DoInvoke('POST','Photos/AddToSharedItem/'+sharedItemID+'/'+userPhotoID,{},callback);},IsCustomUrlAvailable:function(customUrl,callback){this.DoInvoke('POST','IsCustomUrlAvailable',{customUrl:customUrl},callback);},AddToBrandsILike:function(brandUserID,callback){this.DoInvoke('POST','BrandedProfile/AddToBrandsILike/'+brandUserID,{},callback);},AddItemToMenu:function(userID,sharedItemID,typeSpecificID,itemType,servings,callback){this.DoInvoke('POST','Menu/Item/'+sharedItemID,{userID:userID,typeSpecificID:typeSpecificID,itemType:itemType,servings:servings},callback);},AddToCooksILike:function(cookUserId,callback){this.DoInvoke('POST','Cook/CooksILike/Add/'+cookUserId,{},callback);},LogPrint:function(itemId,itemType,vistorId,callback){this.DoInvoke('POST','Recipe/LogPrint/'+itemId,{itemId:itemId,itemType:itemType,visitorId:vistorId},callback);},LogFacebookLike:function(itemId,itemType,vistorId,callback){this.DoInvoke('POST','LogFacebookLike/'+itemId,{itemId:itemId,itemType:itemType,visitorId:vistorId},callback);},LogVideoPlay:function(videoId,vistorId,callback){this.DoInvoke('POST','Video/LogVideoPlay/'+videoId,{videoId:videoId,visitorId:vistorId},callback);}};AR.Extenders={BindEnterToButton:function(targetID,buttonID){$('#'+targetID+',#'+targetID+' input,#'+targetID+' select,#'+targetID+' textarea').bind('keypress',function(e){if(e.keyCode==13){if(e.preventDefault)e.preventDefault();var btn=$('#'+buttonID);var href=btn.attr("href");if(typeof(href)!="undefined"&&href.substr(0,11)=="javascript:"){new Function(href.substr(11)).call(btn.eq(0));}
else{$('#'+buttonID).trigger('click');}}});},ShowCharCount:function(counterID,txtboxID,show){var wrapper=$('#'+counterID+'_StyleWrapper');var txtBox=$('#'+txtboxID);if(show=='true'){wrapper.show();}
else
wrapper.hide();},CheckMaxLength:function(e,textBox,maxLength){switch(e.keyCode){case 9:case 16:case 17:case 35:case 36:case 37:case 38:case 39:case 40:case 8:case 46:return true;case 27:textBox.value='';return true;}
return(textBox.value.length<maxLength);},SetCharCount:function(e,extenderID,showMaxLength,maxLength,textBoxID,warningColor,defaultColor,stopInput){var txt=$('#'+textBoxID);var charCount=$('#'+extenderID+'_CharCount');var allText=$('#'+extenderID+'_StyleWrapper');if(txt.length>0&&charCount.length>0&&allText.length>0){charCount.html(maxLength-txt.val().length);if(showMaxLength=='true')charCount.html(charCount.html()+'/'+maxLength);var color=(txt.val().length>maxLength)?warningColor:defaultColor;allText.css('color',color);if(e){var item=txt[0];if((item.selectionStart!==undefined||item.selectionStart==0)&&(item.selectionEnd!==undefined||item.selectionEnd==0)){if(txt.val().substring(item.selectionStart,item.selectionEnd)==''){if(!this.CheckMaxLength(e,item,maxLength)&&stopInput=='true'){e.preventDefault();return false;}}}
else if(document.selection!=undefined){var us=document.selection.createRange();if(us.text.length==0){if(!this.CheckMaxLength(e,item,maxLength)&&stopInput=='true'){e.preventDefault();return false;}}}}}
else{if(txt.length>0)txt.hide();if(charCount.length>0)charCount.hide();if(allText.length>0)allText.hide();}
return true;},BindKeysToCharCount:function(counterID,showMax,maxLength,targetID,warningColor,defaultColor,stopInput){var that=this;var target=$('#'+targetID);target.bind('keydown keyup input',function(e){if(!that.SetCharCount(e,counterID,showMax,maxLength,targetID,warningColor,defaultColor,stopInput)){e.preventDefault();return false;}});target.each(function(){this.RefreshCharacterCount=function(){that.SetCharCount(null,counterID,showMax,maxLength,targetID,warningColor,defaultColor,stopInput);};});target.bind('paste',function(e){var originalValue=target.val();setTimeout(function(){var newValue=target.val();if(newValue.length>maxLength&&originalValue.length<=maxLength){target.val(originalValue);that.SetCharCount(null,counterID,showMax,maxLength,targetID,warningColor,defaultColor,stopInput)}},0);});}}
$.fn.RefreshCharacterCount=function(){this.each(function(){if(this.RefreshCharacterCount!=null){this.RefreshCharacterCount();}});};AR.CreateTagsController=function(_rootElement,maxSelectable){var rootElement=$(_rootElement);var hiddenElement=$("input[type='hidden']",rootElement);var checkboxes=$("input[type='checkbox']",rootElement);var controller={};controller.UpdateHiddenField=function(lastClickedCheckbox){var checkedCheckboxes=checkboxes.filter(':checked');if(checkedCheckboxes.size()>maxSelectable){$(lastClickedCheckbox).attr('checked',false);}
else{var hiddenTextValue='';checkedCheckboxes.each(function(){var checkbox=$(this);hiddenTextValue=hiddenTextValue+'|'+checkbox.val();});hiddenElement.val(hiddenTextValue);}}
return controller;}
AR.CreateCustomRecipeTagsController=function(_rootElement,maxSelectable){var rootElement=$(_rootElement);var hiddenElement=$("input[type='hidden']",rootElement);var checkboxes=$("input[type='checkbox']",rootElement);var controller={};controller.UpdateHiddenField=function(lastClickedCheckbox){var checkedCheckboxes=checkboxes.filter(':checked');if(checkedCheckboxes.size()>maxSelectable){$(lastClickedCheckbox).attr('checked',false);}
else{var hiddenTextValue='';checkedCheckboxes.each(function(){var checkbox=$(this);hiddenTextValue=hiddenTextValue+'|'+checkbox.val();});hiddenElement.val(hiddenTextValue);}}
return controller;}
AR.ShowRateAndReview2=function(_$,itemID,itemType,itemName,msgLabelSelector,ratingImageSelector,noRatingSpanSelector,reviewTextSelector,menuType,actionSource){_$=_$||$;if(parseInt(itemType)==7){AR.Analytics.RecordCustomLinkClick(AR.Analytics.Action.CustomLinkClick.MenuReview);}
else{AR.Analytics.RecordCustomLinkClick(AR.Analytics.Action.CustomLinkClick.RecipeReview);}
var result=new AR.RateAndReviewContext(itemID,itemType,itemName,_$(msgLabelSelector),_$(ratingImageSelector),_$(noRatingSpanSelector),_$(reviewTextSelector),menuType,actionSource);AR.RateAndReviewContext.instance=result;return result;};AR.RateAndReviewContext=function(itemID,itemType,itemName,msgLabel,ratingImage,noRatingSpan,reviewText,menuType,actionSource){this._itemID=itemID;this._itemType=itemType;this._itemName=itemName;this._msgLabel=msgLabel;this._ratingImage=ratingImage;this._noRatingSpan=noRatingSpan;this._reviewText=reviewText;this._menuType=menuType;this._actionSource=actionSource;}
AR.RateAndReviewContext.prototype.Start=function(){var that=this;var url=AR.ClientUrlProvider.GetRateAndReviewLogonDialog(this._itemID,this._itemType,this._itemName,this._menuType);AR.CreateAspxDialog(url,function(){that.OnFailure()});AR.Analytics.DoStartReview(this._itemType,this._menuType,this._actionSource);};AR.RateAndReviewContext.prototype.OnSuccess=function(rating,review){AR.Analytics.DoSavedReview(this._itemType,this._menuType,this._actionSource);this._reviewText.text(review);if(rating>0){var imageUrl=AR.ClientUrlProvider.GetRecipeBoxListViewRatingImage(rating);this._ratingImage.attr("src",imageUrl);this._ratingImage.css("display","block");this._noRatingSpan.css("display","none");}else{this._ratingImage.css("display","none");this._noRatingSpan.css("display","inline");}}
AR.RateAndReviewContext.prototype.OnFailure=function(errorText){errorText=errorText||"Sorry, there was an error viewing or saving your review.";AR.MessageBox.ShowFailure(errorText,this._msgLabel);};AR.StartTooltipController=function(anchorContainerSelector,anchorSelector,sliderContainerSelector,sliderSelector,sliderHideableRegionSelector){var anchorContainer=$(anchorContainerSelector);var anchors=$(anchorSelector,anchorContainer);var sliderContainer=$(sliderContainerSelector);var sliders=$(sliderSelector,sliderContainer);var getOffsets=function(container,children,skew){var containerOffset=container.offset().top;var childrenOffsets=[];children.each(function(){var child=$(this);childrenOffsets[childrenOffsets.length]=child.offset().top-containerOffset+skew;});return childrenOffsets;};var getRelativeOffsetToNextChild=function(container,children){var offsets=getOffsets(container,children,0);var relativeOffsets=[];for(var i=0;i<offsets.length-1;i++){relativeOffsets[i]=offsets[i+1]-offsets[i];}
return relativeOffsets;};var fitToOffsets=function(minimumRelativeOffsets,animationSpeed){sliders.css('position','absolute');sliders.css('margin','0px');var minimumNextOffset=0;targetOffsets=getOffsets(anchorContainer,anchors,deltaFromAnchorToSliderContainer);for(var i=0;i<anchors.length;i++){var nextOffset=targetOffsets[i];if(nextOffset<minimumNextOffset)
nextOffset=minimumNextOffset;$(sliders[i]).animate({top:nextOffset},animationSpeed);minimumNextOffset=nextOffset+minimumRelativeOffsets[i];}};var setOpen=function(index,animationSpeed){var minimumRelativeOffsets=$.extend({},closedRelativeOffsets);minimumRelativeOffsets[index]=openRelativeOffsets[index];fitToOffsets(minimumRelativeOffsets,animationSpeed);};if(anchorContainer&&anchorContainer.length>0&&sliderContainer&&sliderContainer.length>0){var deltaFromAnchorToSliderContainer=anchorContainer.offset().top-sliderContainer.offset().top;var targetOffsets=getOffsets(anchorContainer,anchors,deltaFromAnchorToSliderContainer);var openRelativeOffsets=getRelativeOffsetToNextChild(sliderContainer,sliders);$(sliderHideableRegionSelector,sliders).css('display','none');var closedRelativeOffsets=getRelativeOffsetToNextChild(sliderContainer,sliders);sliders.each(function(sliderIndex){var currentSlider=$(this);$('a',currentSlider).click(function(){var anchorLink=$(this);var allAnchors=$('a',sliders);var otherAnchors=allAnchors.not(anchorLink);var expandingSelectedNode=anchorLink.hasClass("expand");allAnchors.removeClass("collapse").removeClass("expand");if(expandingSelectedNode){anchorLink.addClass("collapse");otherAnchors.addClass("expand");var regionToShow=$(sliderHideableRegionSelector,currentSlider);$(sliderHideableRegionSelector,sliders).not(regionToShow).slideUp(300);regionToShow.slideDown(300);setOpen(sliderIndex,300);}
else{allAnchors.addClass("expand");$(sliderHideableRegionSelector,sliders).slideUp(300);fitToOffsets(closedRelativeOffsets,300);}});});anchors.each(function(i){var func=function(){var associatedTip=$('a',sliders[i]);if(!associatedTip.hasClass("expand"))
associatedTip.addClass("expand");associatedTip.click();};if(($(this).attr('tagName')=="TEXTAREA")||($(this).attr('tagName')=="INPUT"&&$(this).attr("type")=="text")){$(this).focus(func);}else{$(this).click(func);}});fitToOffsets(closedRelativeOffsets,0);}};AR.Share={LoadDialogs:function(){$('.modal-link-sharing').click(function(){var serverItem=AR.ServerSideData.GetByDom(this);var radioButton,litIsShared;if(serverItem.isShared===false){radioButton=$('#isSharedFalse');litIsShared='Not Shared';}
else if(serverItem.approvalStatusType>1&&serverItem.canBeSubmitted===true){radioButton=$('#isSharedTrueAndSubmitted');litIsShared='Shared';}
else if(serverItem.canBeShared===false){radioButton=$('#isSharedFalse');litIsShared='Not Shared';}
else{radioButton=$('#isSharedTrue');litIsShared='Shared';}
if(serverItem.canBeSubmitted===true){$('#canSubmit').show();}
else{$('#canSubmit').hide();}
if(serverItem.canBeShared===true){$('#canShare').show();}
else{$('#canShare').hide();}
radioButton.attr("checked","checked");$('.isShared').text(litIsShared);$('.recipe-name').text(serverItem.title);$('.share-commit').unbind('click').click(function(){AR.Cursor.SetWait();var isShared;if($('#isSharedTrue').attr("checked")||$('#isSharedTrueAndSubmitted').attr("checked")){isShared=true;}
else{isShared=false;}
var submitForApproval=$('#isSharedTrueAndSubmitted').attr("checked");AR.ClientService.SaveItemShareState(serverItem.savedItemID,isShared,submitForApproval,function(data){var link=$('#savedItemID_'+serverItem.savedItemID);var notificationArea=link.parents('.myrecipeboxrow').find("#notificationArea");if(data.ResponseCode!=AR.ResponseCode.Success){AR.MessageBox.ShowFailure(data.Message,notificationArea);if(AR.ShouldLogResponseCode(data.ResponseCode)){AR.LogErrorEx({},"AR.Share","Error saving change to sharing selection.");}
AR.Dialog.CloseModalBox();AR.Cursor.SetDefault();return;}
AR.MessageBox.PrintMessage(notificationArea,AR.MessageBox.MessageType.Success,data.Message,false);if(isShared===true){link.text("Shared");}
else{link.text("Not Shared");}
serverItem.isShared=isShared;if(serverItem.approvalStatusType==1||serverItem.approvalStatusType==2){serverItem.approvalStatusType=submitForApproval?2:1;}
AR.Dialog.CloseModalBox();AR.Cursor.SetDefault();});});AR.Dialog.ShowLayer('.modal-sharing');});}};AR.SavedItemNoteCache={CachedNotes:{},GetCachedNote:function(savedItemID){return this.CachedNotes[savedItemID];},SetCachedNote:function(savedItemID,note){this.CachedNotes[savedItemID]=note;}};AR.AddEditNoteLayer=null;AR.InitAddEditNoteLayer=function(){var layer=$(".modal-add-notes");AR.AddEditNoteLayer={Layer:layer,NameField:$('.recipe-name',layer),TextInput:$('textarea',layer),SaveButton:$('.add-button',layer)};};AR.ShowAddEditNote=function(savedItemID,sharedItemName,noteValue,resultMsgSelector,linkTextSelector){AR.Analytics.RecordAction(AR.Analytics.Event.Start,AR.Analytics.Action.Source.RecipeBox,AR.Analytics.Action.Type.Note);noteValue=AR.SavedItemNoteCache.GetCachedNote(savedItemID)||noteValue;if(typeof(linkTextSelector)=='string')
linkTextSelector=$(linkTextSelector);var addEditLayer=AR.AddEditNoteLayer;addEditLayer.NameField.text(sharedItemName);addEditLayer.TextInput.val(noteValue||"");addEditLayer.TextInput.RefreshCharacterCount();var context={};context.NewNoteValue=null;context.OnSave=function(){context.NewNoteValue=addEditLayer.TextInput.val();AR.Dialog.CloseModalBox();AR.ClientService.SaveNote(savedItemID,context.NewNoteValue,context.OnClientServiceSuccess);};context.OnClientServiceSuccess=function(ajaxResponse){if(ajaxResponse.ResponseCode==AR.ResponseCode.Success){context.OnSuccess(context.NewNoteValue);AR.Analytics.RecordAction(AR.Analytics.Event.Complete,AR.Analytics.Action.Source.RecipeBox,AR.Analytics.Action.Type.Note);}
else{context.OnError();}};context.OnError=function(){AR.MessageBox.ShowFailure("Unable to save note.",resultMsgSelector);}
context.OnSuccess=function(){AR.MessageBox.ShowSuccess("Your note was saved.",resultMsgSelector);AR.SavedItemNoteCache.SetCachedNote(savedItemID,context.NewNoteValue);linkTextSelector.text("View Notes");}
AR.Dialog.ShowLayer(addEditLayer.Layer);addEditLayer.SaveButton.unbind('click');addEditLayer.SaveButton.bind('click',function(){context.OnSave();});return context;};AR.SavedItemFolderCache={CachedFolderLists:{},GetCachedFolders:function(savedItemID){return this.CachedFolderLists[savedItemID];},SetCachedFolders:function(savedItemID,folders){this.CachedFolderLists[savedItemID]=folders;},AddToFolder:function(savedItemID,folderID,folderName){if(this.CachedFolderLists[savedItemID]==null)
this.CachedFolderLists[savedItemID]=[];this.CachedFolderLists[savedItemID].push({ID:folderID,Name:folderName});},RemoveFromFolder:function(savedItemID,folderID){error("not implemented");}}
AR.JoinFirst10FolderNamesWithSemicolons=function(folders){folders=jQuery.extend([],folders);folders.reverse();var result="";var separator="";$.each(folders,function(index){if(index<10){result=result+separator+this.Name;separator="; ";}});return result;};AR.AddSavedItemToFolderLayer=null;AR.InitAddSavedItemToFolderLayer=function(){var layer=$(".modal-add-to-folder");AR.AddSavedItemToFolderLayer={Layer:layer,NameField:$('.recipe-name',layer),CurrentFoldersField:$('.current-folders',layer),FolderDropdown:$('select',layer),AddButton:$('.add-button',layer)};};AR.ShowAddToFolder=function(savedItemID,isRecipe,specialItemID,itemType,itemName,currentFoldersItemIsAlreadyIn,resultMsgSelector){AR.Analytics.RecordAction(AR.Analytics.Event.Start,AR.Analytics.Action.Source.RecipeBox,AR.Analytics.Action.Type.FolderAdd,AR.Analytics.Action.GetItem(itemType));var cachedFoldersItemIsAlreadyIn=AR.SavedItemFolderCache.GetCachedFolders(savedItemID);if(cachedFoldersItemIsAlreadyIn==null)
AR.SavedItemFolderCache.SetCachedFolders(savedItemID,currentFoldersItemIsAlreadyIn);currentFoldersItemIsAlreadyIn=cachedFoldersItemIsAlreadyIn||currentFoldersItemIsAlreadyIn;var idsOfFoldersItemIsAlreadyIn=$.map(currentFoldersItemIsAlreadyIn,function(f){return f.ID;});var layer=AR.AddSavedItemToFolderLayer;var funcExclude=function(folderID){if(isNaN(folderID)||$.inArray(folderID,idsOfFoldersItemIsAlreadyIn)!=-1){return true;}
return false;};AR.Folders.Dom.LoadDropDownList(layer.FolderDropdown,funcExclude,false);layer.NameField.text(itemName+' ');var currentFoldersItemIsAlreadyInText=AR.JoinFirst10FolderNamesWithSemicolons(currentFoldersItemIsAlreadyIn);layer.CurrentFoldersField.text(currentFoldersItemIsAlreadyInText);AR.Dialog.ShowLayer(layer.Layer);var context={};context.SelectedFolder=null;context.SelectedFolderName=null;context.OnAdd=function(){var selectedFolder=layer.FolderDropdown.val();if(selectedFolder==null||!isFinite(selectedFolder))
return;context.SelectedFolder=parseInt(selectedFolder);context.SelectedFolderName=layer.FolderDropdown.find("option:selected").text();AR.Dialog.CloseModalBox();var isMenu=false;AR.ClientService.SaveToRecipeBox(specialItemID,isRecipe,isMenu,selectedFolder,context.Callback);};context.Callback=function(ajaxResponse){if(ajaxResponse.ResponseCode==AR.ResponseCode.Success)
context.OnSuccess();else
context.OnFailure(ajaxResponse);};context.OnSuccess=function(){AR.Toolbox.Close();AR.MessageBox.ShowSuccess("Successfully added to folder.",resultMsgSelector);var isUncategorized=(window.location.href.indexOf("folder="+VirtualFolders.UnCategorized)>0);var isMyRecipeList=(window.location.href.indexOf("folder="+VirtualFolders.MyRecipeList)>0);if(isUncategorized||(isMyRecipeList&&currentFoldersItemIsAlreadyIn.length==0)){AR.Folders.Dom.UpdateSavedItemCount(VirtualFolders.UnCategorized,-1);AR.RecBoxSubNav.UpdateFolderCount(-1);if(isUncategorized){$(resultMsgSelector).parent().next().hide();}}
AR.SavedItemFolderCache.AddToFolder(savedItemID,context.SelectedFolder,context.SelectedFolderName);AR.Folders.Dom.UpdateSavedItemCount(context.SelectedFolder,1);AR.Analytics.RecordAction(AR.Analytics.Event.Complete,AR.Analytics.Action.Source.RecipeBox,AR.Analytics.Action.Type.FolderAdd,AR.Analytics.Action.GetItem(itemType));};context.OnFailure=function(ajaxResponse){AR.MessageBox.ShowFailure("Unable to add to folder.",resultMsgSelector);if(AR.ShouldLogResponseCode(ajaxResponse.ResponseCode)){AR.LogErrorEx({savedItemID:savedItemID,isRecipe:isRecipe,specialItemID:specialItemID,itemType:itemType,itemName:itemName,currentFoldersItemIsAlreadyIn:currentFoldersItemIsAlreadyIn,resultMsgSelector:resultMsgSelector},'main.js','AR.ShowAddToFolder.context.OnAdd');}};layer.AddButton.unbind("click");layer.AddButton.bind("click",context.OnAdd);return context;};AR.DeleteSavedItemFromFolderLayer=null;AR.InitDeleteSavedItemFromFolderLayer=function(){var layer=$(".modal-delete");AR.DeleteSavedItemFromFolderLayer={Layer:layer,NameField:$('.recipe-name',layer),FolderNameField:$('.folder-name',layer),SingleFolderDeletePlaceholder:$('.single-folder-delete',layer),MultipleFolderDeletePlaceholder:$('.multi-folder-delete',layer),ZeroFolderDeletePlaceholder:$('.zero-folder-delete',layer),DeleteButton:$('.delete-button',layer)};};AR.ShowDeleteFromFolderOrRecipeBox=function(savedItemID,savedItemName,folderID,folderName,currentFolders,resultMsgSelector,containingRow){if(folderID<=0){AR.ShowDeleteFromRecipeBox(savedItemID,savedItemName,currentFolders,resultMsgSelector,containingRow);}
else{AR.ShowDeleteFromFolder(savedItemID,savedItemName,folderID,folderName,currentFolders,resultMsgSelector,containingRow);}}
AR.ShowDeleteFromFolder=function(savedItemID,savedItemName,folderID,folderName,currentFolders,resultMsgSelector,containingRow){var layer=AR.DeleteSavedItemFromFolderLayer;layer.NameField.text(savedItemName+' ');layer.FolderNameField.text(folderName);layer.SingleFolderDeletePlaceholder.show();layer.MultipleFolderDeletePlaceholder.hide();layer.ZeroFolderDeletePlaceholder.hide();AR.Dialog.ShowLayer(layer.Layer);var context={};context.OnDelete=function(){AR.Dialog.CloseModalBox();AR.ClientService.DeleteFromRecipeBox(savedItemID,folderID,context.Callback);};layer.DeleteButton.unbind("click");layer.DeleteButton.bind("click",context.OnDelete);context.Callback=function(ajaxResponse){if(ajaxResponse.ResponseCode==AR.ResponseCode.Success)
context.OnSuccess();else
context.OnFailure(ajaxResponse);};context.OnSuccess=function(){AR.MessageBox.ShowSuccess("Item has been deleted.",resultMsgSelector);AR.Folders.Dom.UpdateSavedItemCount(folderID,-1);containingRow.hide();AR.RecBoxSubNav.UpdateFolderCount(-1);if(currentFolders.length==1){AR.Folders.Dom.UpdateSavedItemCount(-1,1);}};context.OnFailure=function(ajaxResponse){AR.MessageBox.ShowFailure("Could not delete item.",resultMsgSelector);if(AR.ShouldLogResponseCode(ajaxResponse.ResponseCode)){AR.LogErrorEx({savedItemID:savedItemID,folderID:folderID},'main.js','AR.ShowDeleteFromFolder.context.OnDelete');}};return context;};AR.ShowDeleteFromRecipeBox=function(savedItemID,savedItemName,currentFolders,resultMsgSelector,containingRow){var cachedFolders=AR.SavedItemFolderCache.GetCachedFolders(savedItemID);if(cachedFolders==null){AR.SavedItemFolderCache.SetCachedFolders(savedItemID,currentFolders);}
currentFolders=cachedFolders||currentFolders;var layer=AR.DeleteSavedItemFromFolderLayer;var nameText=AR.JoinFirst10FolderNamesWithSemicolons(currentFolders);layer.NameField.text(savedItemName+' ');layer.FolderNameField.text(nameText);layer.SingleFolderDeletePlaceholder.hide();layer.MultipleFolderDeletePlaceholder.hide();layer.ZeroFolderDeletePlaceholder.hide();if(currentFolders.length>1)
layer.MultipleFolderDeletePlaceholder.show();else if(currentFolders.length>0)
layer.SingleFolderDeletePlaceholder.show();else
layer.ZeroFolderDeletePlaceholder.show();AR.Dialog.ShowLayer(layer.Layer);var context={};context.OnDelete=function(){AR.Dialog.CloseModalBox();AR.ClientService.DeleteFromRecipeBox(savedItemID,0,context.Callback);};layer.DeleteButton.unbind("click");layer.DeleteButton.bind("click",context.OnDelete);context.Callback=function(ajaxResponse){if(ajaxResponse.ResponseCode==AR.ResponseCode.Success)
context.OnSuccess();else
context.OnFailure(ajaxResponse);};context.OnSuccess=function(){AR.MessageBox.ShowSuccess("Item has been deleted.",resultMsgSelector);$.each(currentFolders,function(){AR.Folders.Dom.UpdateSavedItemCount(this.ID,-1);});AR.Folders.Dom.UpdateSavedItemCount(0,-1);if(currentFolders.length==0){AR.Folders.Dom.UpdateSavedItemCount(-1,-1);}
containingRow.hide();AR.RecBoxSubNav.UpdateFolderCount(-1);};context.OnFailure=function(ajaxResponse){AR.MessageBox.ShowFailure("Could not delete item from your RecipeBox.",resultMsgSelector);if(AR.ShouldLogResponseCode(ajaxResponse.ResponseCode)){AR.LogErrorEx({savedItemID:savedItemID},'main.js','AR.ShowDeleteFromRecipeBox.context.OnDelete');}
var updatedImage=ClientUrlProvider.GetRecipeBoxListViewRatingImage(context._review.Rating);};return context;}
AR.Utils={PruneAndHellip:function(originalString,totalLength,findLastSpace){var result="";var hellip="…";if(originalString!=null&&originalString.length>0){if(originalString.length<=totalLength){result=originalString;}
else{var offset=((hellip=="…")?1:hellip.length);result=originalString.substr(0,totalLength-offset);if(findLastSpace&&result.indexOf(" ")>=0){result=result.substr(0,result.lastIndexOf(" "));}
result+=hellip;}}
return result;},HtmlEncode:function(value){var test=$('<div/>').text(value).html();return test;},HtmlDecode:function(value){return $('<div/>').html(value).text();},TruncateText:function(){$(".text-truncate").textTruncate();$(".text-truncate-multiline-height-30").textTruncate({multiline:true,height:30});$(".text-truncate-multiline-height-40").textTruncate({multiline:true,height:40});$(".text-truncate-multiline-height-45").textTruncate({multiline:true,height:45});$(".text-truncate-multiline-height-55").textTruncate({multiline:true,height:55});}}
AR.RecBoxSubNav={UpdateFolderCount:function(countChanged){var spanToUpdate=$('.rec-box-sub-nav-folder-size');var currentValue=parseInt(spanToUpdate.text());if(currentValue!=NaN){if(currentValue<0)
currentValue=0;currentValue=currentValue+countChanged;spanToUpdate.text(currentValue);}}};AR.ShoppingListUtils={AddToList:function(link,listID,isKitchenApprovedRecipe,isMenu,itemID,itemType){AR.Cursor.SetWait();AR.Analytics.RecordAction(AR.Analytics.Event.Start,AR.Analytics.Action.Source.RecipeBox,AR.Analytics.Action.Type.ShoppingListAddRecipe,AR.Analytics.Action.GetItem(itemType));AR.ClientService.AddToShoppingList(listID,isKitchenApprovedRecipe,isMenu,itemID,0,function(response){if(response.ResponseCode==AR.ResponseCode.Success){AR.Toolbox.Close();AR.MessageBox.PrintMessage($(link).parents('.row').prev().find('div'),AR.MessageBox.MessageType.Success,response.Message,false);AR.Analytics.RecordAction(AR.Analytics.Event.Complete,AR.Analytics.Action.Source.RecipeBox,AR.Analytics.Action.Type.ShoppingListAddRecipe,AR.Analytics.Action.GetItem(itemType));}
else{if(AR.ShouldLogResponseCode(response.ResponseCode)){AR.LogErrorEx({ListID:listID,isKitchenApprovedRecipe:isKitchenApprovedRecipe,ItemID:itemID},'main.js','AR.ShoppingListUtils.AddToList');}
AR.MessageBox.PrintMessage($(link).parents('.row').prev().find('div'),AR.MessageBox.MessageType.Failure,response.Message,true);}
AR.Cursor.SetDefault();});}};AR.Analytics={GetOmnitureS:function(){try{return(typeof(omnitureAccount)!="undefined")?s_gi(omnitureAccount):null;}
catch(exception){return null;}},LogConsoleInfo:function(message){var s_console=null;if(typeof(console)!="undefined"){console.info(message);}},ResetS:function(sObj){if(sObj!=null){s.linkTrackVars=s.linkTrackEvents="None";s.events="";s.pe=s.pev1=s.pev2="";s.eVar3=s.eVar7=s.eVar8=s.eVar9=s.eVar12=s.eVar13="";s.prop24=s.prop34=s.prop36="";}},LogS:function(extraInfo,sObj){if(sObj!=null){AR.Analytics.LogConsoleInfo(extraInfo);var msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackEvents:'"+s.linkTrackEvents+"'";AR.Analytics.LogConsoleInfo(msg);msg="s.events:'"+s.events+"'";AR.Analytics.LogConsoleInfo(msg);msg=(s.pe!=null)?"s.pe:'"+s.pe+"'\n":'';msg+=(s.pev1!=null)?"s.pev1:'"+s.pev1+"'\n":'';msg+=(s.pev2!=null)?"s.pev2:'"+s.pev2+"'\n":'';msg+=(s.eVar3!=null)?"s.eVar3:'"+s.eVar3+"'\n":'';msg+=(s.eVar7!=null)?"s.eVar7:'"+s.eVar7+"'\n":'';msg+=(s.eVar8!=null)?"s.eVar8:'"+s.eVar8+"'\n":'';msg+=(s.eVar9!=null)?"s.eVar9:'"+s.eVar9+"'\n":'';msg+=(s.eVar12!=null)?"s.eVar12:'"+s.eVar12+"'\n":'';msg+=(s.eVar13!=null)?"s.eVar13:'"+s.eVar13+"'\n":'';msg+=(s.prop24!=null)?"s.prop24:'"+s.prop24+"'\n":'';msg+=(s.prop34!=null)?"s.prop34:'"+s.prop34+"'\n":'';msg+=(s.prop36!=null)?"s.prop36:'"+s.prop36+"'\n":'';AR.Analytics.LogConsoleInfo(msg);}},DoSupportingMemberStart:function(callToAction,serializationID,visitVersion,linkName,layerName,internalSource){var s=AR.Analytics.GetOmnitureS();var hasLinkName=(linkName.length>0&&linkName!='undefined');var hasInternalSource=(internalSource.length>0&&internalSource!='undefined');var hasLayerName=(layerName.length>0&&layerName!='undefined');if(s!=null){s.linkTrackVars='eVar2,eVar3,eVar7,eVar13,events,products';s.linkTrackVars+=(hasLinkName)?',prop34':'';s.linkTrackVars+=(hasInternalSource)?',prop24':'';s.linkTrackVars+=(hasLayerName)?',prop36':'';s.linkTrackEvents='event2';s.events='event2:'+serializationID;s.eVar2=(AR.VisitorInfo.IsLoggedIn()&&!AR.VisitorInfo.IsSupportingMember())?"Upsell":'Registration';if(callToAction!=null&&callToAction!='undefined'&&callToAction.length>0&&callToAction!='Not Set'&&callToAction!='NotSet'){s.eVar3=callToAction;}
s.eVar7="";if(callToAction=="Kitchen View of Recipe"){try{var referrer=document.referrer.toLowerCase();if(referrer.lastIndexOf("my/recipebox")!=-1)
s.eVar7="Recipe Box";else if(referrer.lastIndexOf("detail.aspx")!=-1)
s.eVar7="Recipe Page";}
catch(e){}}
s.eVar13=visitVersion;if(hasLinkName){s.prop34=linkName;}
if(hasInternalSource){s.prop24=internalSource;}
if(hasLayerName){s.prop36=layerName;}
s.tl(true,'o','SM Start');var msg="BI: DoSupportingMemberStart('"+callToAction+"','"+serializationID+"','"+visitVersion+"','"+linkName+"','"+internalSource+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|s.eVar2:'"+s.eVar2+"'|s.eVar3:'"+s.eVar3+"'|s.eVar7:'"+s.eVar7+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.eVar13:'"+s.eVar13+"'";msg+=(hasLinkName)?"|prop34:'"+s.prop34+"'":'';msg+=(hasInternalSource)?"|prop24:'"+s.prop24+"'":'';msg+=(hasLayerName)?"|prop36:'"+s.prop36+"'":'';msg+=" * s.tl(true, 'o', 'SM Start')";AR.Analytics.LogConsoleInfo(msg);s.prop24=s.prop34=s.prop36=s.eVar13=s.eVar2=s.eVar3=s.eVar7=s.events=s.linkTrackVars="";}},DoFreeMemberStart:function(sToExtend,callToAction,linkName,internalSource){var s=sToExtend||AR.Analytics.GetOmnitureS();var hasLinkName=(linkName.length>0&&linkName!='undefined');var hasInternalSource=(internalSource.length>0&&internalSource!='undefined');if(s!=null){s.linkTrackVars='eVar3,events,products';s.linkTrackVars+=(hasLinkName)?',prop34':'';s.linkTrackVars+=(hasInternalSource)?',prop24':'';s.linkTrackEvents='event11';s.events='event11';if(callToAction!=null&&callToAction!='undefined'&&callToAction.length>0&&callToAction!='Not Set'&&callToAction!='NotSet'){s.eVar3=callToAction;}
if(hasLinkName){s.prop34=linkName;}
if(hasInternalSource){s.prop24=internalSource;}
if(sToExtend==null){s.tl(true,'o','Registration');var msg="BI: DoFreeMemberStart('"+sToExtend+"','"+callToAction+"','"+linkName+"','"+internalSource+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|s.eVar3:'"+s.eVar3+"'";msg+=(hasLinkName)?"|s.prop34:'"+s.prop34+"'":'';msg+=(hasInternalSource)?"|s.prop24:'"+s.prop24+"'":'';msg+=" * s.tl(true, 'o', 'Registration')";AR.Analytics.LogConsoleInfo(msg);s.prop24=s.prop34=s.eVar3=s.events=s.linkTrackVars="";}}},DoFreeMemberComplete:function(sToExtend){var s=sToExtend||AR.Analytics.GetOmnitureS();if(s!=null){s.linkTrackVars='events,products';s.linkTrackEvents='event12';s.events='event12';if(sToExtend==null){s.tl(true,'o','Order');var msg="BI: DoFreeMemberComplete('"+sToExtend+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"' * s.tl(true, 'o', 'Order')";AR.Analytics.LogConsoleInfo(msg);s.prop34=s.events=s.linkTrackVars="";}}},DoStartReview:function(itemType,menuType,actionSource){if(menuType>0){AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.RateReview,AR.Analytics.Event.Start,actionSource,AR.Analytics.Action.Type.MenuReview,AR.Analytics.Action.GetMenuItem(menuType),'');}
else{AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.RateReview,AR.Analytics.Event.Start,actionSource,AR.Analytics.Action.Type.RecipeReview,AR.Analytics.Action.GetItem(itemType),'');}},DoSavedReview:function(itemType,menuType,actionSource){if(menuType>0){AR.Analytics.RecordAction(AR.Analytics.Event.Complete,actionSource,AR.Analytics.Action.Type.MenuReview,AR.Analytics.Action.GetMenuItem(menuType));}
else{AR.Analytics.RecordAction(AR.Analytics.Event.Complete,actionSource,AR.Analytics.Action.Type.RecipeReview,AR.Analytics.Action.GetItem(itemType));}},SetFMOmniCallToAction:function(anchor){var s=AR.Analytics.GetOmnitureS();if(s!=null){try{var hasOverRide=false;var callToAction='';var qsLinkName='';var qsInternalSource='';var pageName=window.location.pathname;var cleanQs=anchor[0].search;if(anchor[0].search){var OverRideItems=AR.Analytics.OverRide.ParseItems(anchor[0].search.substr(1));for(i=0;i<OverRideItems.length;i++){if(OverRideItems[i]){switch(OverRideItems[i].Key){case AR.ClientUrlUtils.QueryStringParameters.AnalyticsCallToAction:callToAction=OverRideItems[i].Value;hasOverRide=true;break;case AR.ClientUrlUtils.QueryStringParameters.AnalyticsLinkName:qsLinkName=OverRideItems[i].Value;hasOverRide=true;break;case AR.ClientUrlUtils.QueryStringParameters.AnalyticsCustomLinkClick:AR.Analytics.RecordCustomLinkClick(OverRideItems[i].Value);hasOverRide=true;break;case AR.ClientUrlUtils.QueryStringParameters.AnalyticsInternalSource:qsInternalSource=OverRideItems[i].Value;hasOverRide=true;break;}
if(hasOverRide){cleanQs=cleanQs.replace(OverRideItems[i].Key+'='+OverRideItems[i].Original,'');}}}}
if(!hasOverRide){if(anchor.attr('calltoaction')){callToAction=anchor.attr('calltoaction');}}
if(callToAction.length<1){var pos1=pageName.lastIndexOf('/')+1;var pos2=pageName.lastIndexOf('.');if(pos2>pos1)
pageName=pageName.substring(pos1,pos2);callToAction=anchor[0].id+' '+pageName;}
AR.Analytics.DoFreeMemberStart(null,callToAction,qsLinkName,qsInternalSource);if(hasOverRide){var regEx=new RegExp("&*[&]",'g');anchor[0].search=cleanQs.replace(regEx,'&');return anchor[0].href;}
else{return'';}}
catch(exception){return'';}}
else if(anchor!=null&&anchor[0]!=null){return anchor[0].href;}}};ioc.Register("_analytics").withInstance(AR.Analytics);AR.IntersectionDetection={IsPointInRange:function(value,rangeStart,rangeLength){return rangeStart<=value&&value<=(rangeStart+rangeLength);},DoRangesOverlap:function(aStart,aLength,bStart,bLength){return this.IsPointInRange(aStart,bStart,bLength)||this.IsPointInRange(aStart+aLength,bStart,bLength)||this.IsPointInRange(bStart,aStart,aLength)||this.IsPointInRange(bStart+bLength,aStart,aLength);},DoElementsOverlap:function(a,b){var aOffset=a.offset();var bOffset=b.offset();return this.DoRangesOverlap(aOffset.left,a.outerWidth(),bOffset.left,b.outerWidth())&&this.DoRangesOverlap(aOffset.top,a.outerHeight(),bOffset.top,b.outerHeight());}};AR.BrandedProfile={AddToBrandsILike:function(brandID){AR.Cursor.SetWait();AR.ClientService.AddToBrandsILike(brandID,function(response){if(response.ResponseCode==AR.ResponseCode.Success){AR.MessageBox.ShowSuccess(response.Message,null,true);$('.add-to-brands-i-like').hide('normal',function(){});}
else if(response.ResponseCode==AR.ResponseCode.UserError){AR.MessageBox.ShowWarning(response.Message,null,true);}
else{AR.MessageBox.ShowFailure(response.Message,null,true);}});AR.Cursor.SetDefault();}};if(window.console&&typeof(window.console.time)=="undefined"){console.time=function(name,reset){if(!name){return;}
var time=new Date().getTime();if(!console.timeCounters){console.timeCounters={}};var key="KEY"+name.toString();if(!reset&&console.timeCounters[key]){return;}
console.timeCounters[key]=time;};console.timeEnd=function(name){var time=new Date().getTime();if(!console.timeCounters){return;}
var key="KEY"+name.toString();var timeCounter=console.timeCounters[key];if(timeCounter){var diff=time-timeCounter;var label=name+": "+diff+"ms";console.info(label);delete console.timeCounters[key];}
return diff;};}
AR.ZIndexOverride={OverriddenElements:[],OriginalValues:[],RevertOverrides:function(key){for(i=this.OverriddenElements.length-1;i>=0;i--){if(key==this.OverriddenElements[i].Key){$(this.OverriddenElements[i].Element).css("z-index",this.OriginalValues[i].Value);this.OverriddenElements.remove(i);this.OriginalValues.remove(i);}}},ApplyOverride:function(element,key){var overrideZIndex=$(element).css("z-index");var that=this;$(element).parents().each(function(){var parent=$(this);if(parent.css("position")=="relative"){that.OverriddenElements.push({Element:parent,Key:key});that.OriginalValues.push({Value:parent.css("z-index"),Key:key});parent.css("z-index",overrideZIndex);}});}};AR.AdData={RootURL:"//ad.doubleclick.net",IFrameVerb:"adi",Site:"",Zone:"",KeyValues:"",KeyWords:"",Ord:"",VisitorID:"",VisitorStatus:"",VisitorStatusAbbr:"",ItemID:"",ItemAdKey:"",SessionGroup:"",GenerateIFrameURL:function(pos,size,product){var root=[];root.push(this.RootURL);root.push(this.IFrameVerb);root.push(this.Site);root.push(this.Zone);var params=[];params.push(root.join("/"));params.push(AudienceScience.SegmentValues);params.push(this.KeyValues);params.push(this.KeyWords);params.push("ssngroup="+this.SessionGroup);params.push("status="+this.VisitorStatus);params.push(this.GenerateUParam(pos,product));params.push("product="+product);params.push("tile="+pos);params.push("pos="+pos);params.push("sz="+size);params.push("ord="+Math.random()*10000000000000000);return params.join(";");},GenerateUParam:function(pos,product){var vals=[];vals.push(AudienceScience.EncodeRSI(AudienceScience.SegmentValues));vals.push(this.VisitorID);vals.push(this.ItemAdKey.toUpperCase()+this.ItemID);vals.push(pos);vals.push(product);vals.push(encodeURI(this.KeyWords));vals.push(this.SessionGroup);vals.push(this.VisitorStatusAbbr);vals.push('');return"u="+vals.join("|");}};AudienceScience={Segments:[],SegmentValues:"",Initialize:function(){this.Segments=[];var segs_beg=document.cookie.indexOf('rsi_segs=');if(segs_beg>=0){segs_beg=document.cookie.indexOf('=',segs_beg)+1;if(segs_beg>0){var segs_end=document.cookie.indexOf(';',segs_beg);if(segs_end==-1){segs_end=document.cookie.length;}
this.Segments=document.cookie.substring(segs_beg,segs_end).split('|');}}
var segLen=20;this.SegmentValues="";if(this.Segments.length<segLen){segLen=this.Segments.length;}
for(var i=0;i<segLen;i++){this.SegmentValues+=("rsi"+"="+this.Segments[i]+";");}},TrimRSI:function(rsiValueString){var output="";var rsiArray=rsiValueString.split(";");for(x=0;x<rsiArray.length;x++){if(rsiArray[x].indexOf("_")!=-1){output+=rsiArray[x].substring(rsiArray[x].indexOf("_")+1);if(x==rsiArray.length+1)output+="|";}}
return output;},EncodeRSI:function(rsiValueString){var output=AudienceScience.TrimRSI(rsiValueString);output=AR.BaseN.RecodeString(output,BASE_DECIMAL,BASE_64_DART_SAFE);return output;}};AudienceScience.Initialize();$(document).ready(function(){$("*").live("mousedown",function(event){if(event.target!=event.currentTarget){return;}
if(AR.ActiveOption&&jQuery.contains(AR.ActiveOption.dropdown[0],this)){return;}
AR.SlideUpAllOptionsDropdowns();});});AR.InitOptionsDropdown=function(selector){$(selector).live('click',function(){AR.SlideUpAllOptionsDropdowns();var nextOptionsDropdown=$(this).nextAll(".options-dropdown:first");if(nextOptionsDropdown.is(":hidden")){AR.ActiveOption={dropdown:nextOptionsDropdown,dropdownButton:$(this)};AR.ZIndexOverride.ApplyOverride(nextOptionsDropdown,"optiondropdown");nextOptionsDropdown.slideDown(250,AR.OptionDropdown.KeepInView);$(this).css({background:"url('"+AR.ImageServer+"/ar/myar/menuplanner/canvas/options-arrow-up.png') no-repeat scroll 2px 50% transparent"});}});}
AR.ActiveOption=null;AR.SlideUpAllOptionsDropdowns=function(){if(AR.ActiveOption){var optionText=AR.ActiveOption.dropdownButton;var optionMenu=AR.ActiveOption.dropdown;AR.ActiveOption=null;optionMenu.slideUp(250);optionText.css({background:"url('"+AR.ImageServer+"/ar/myar/menuplanner/canvas/options-arrow-down.png') no-repeat scroll 2px 50% transparent"});optionMenu.find("#newshoppinglist").hide();optionMenu.find("#newmenu").hide();}
AR.ZIndexOverride.RevertOverrides("optiondropdown");}
AR.OptionDropdown={Load:function(){$(".addtoshoppinglist").click(function(e){e.preventDefault();if($(this).next("#newshoppinglist").is(':hidden')){var BI=AR.Analytics;var biLinkValue=(window.location.pathname.indexOf("RecipeBox")>-1)?BI.Action.CustomLinkClick.ShoppingListRecipeAdd:(window.location.pathname.indexOf("Menus")>-1)?BI.Action.CustomLinkClick.ShoppingListAddMenu:"Unknown";BI.RecordCustomLinkClick(biLinkValue);}
$(this).next("#newshoppinglist").toggle();});$(".tool-addtomenu").click(function(e){e.preventDefault();if(!AR.VisitorInfo.IsSupportingMember()){var menuPlannerURL=$(this).attr("href");if(menuPlannerURL!=null&&menuPlannerURL!="javascript:void(0);"){window.location=menuPlannerURL;}}
else{if($(this).next(".star").next("#newmenu").is(':hidden')){var BI=AR.Analytics;var source=(window.location.pathname.indexOf("RecipeBox")>-1)?BI.Action.Source.RecipeBox:(window.location.pathname.indexOf("Menus")>-1)?BI.Action.Source.MyMenus:"Unknown";var rowValue=$(this).parents(".recipe-box-list-row")[0];var nlRegEx=new RegExp("\\n",'g');var wsRegEx=new RegExp("\\s",'g');var itemValue=$(rowValue).find(".recipe-list-type").text().replace(nlRegEx,"").replace(wsRegEx,"");var itemType='';switch(itemValue){case"PersonalRecipe":itemType="Personal";break;case"KitchenApproved":itemType="Kitchen Approved";break;case"Weblink":itemType="Weblink";break;case"CustomRecipe":itemType="Custom";break;case"Reference":itemType="Reference";break;}
BI.RecordCustomLinkClick(BI.Action.CustomLinkClick.MenuRecipeAddExpanded);BI.RecordAction(BI.Event.Start,source,BI.Action.Type.MenuAdd,itemType);}
var hasMenus=($(this).next(".star").next("#newmenu").find(".ddlSelectedMenuItem").children().length>0);if(hasMenus){$(this).next(".star").next("#newmenu").toggle();}
else{var savedItemID=$(this).parents(".myrecipeboxrow")[0].id;$(".action-addMenu-"+savedItemID).trigger("click");}}});$(".tool-addfolder").click(function(e){e.preventDefault();ioc.Load("_dialogLauncher").AddFolder(function(result){AR.Analytics.RecordAction(AR.Analytics.Event.Complete,AR.Analytics.Action.Source.RecipeBox,AR.Analytics.Action.Type.FolderAdd);},function(){AR.MessageBox.ShowFailure("Sorry, but your new folder could not be created.",null,false);});});},KeepInView:function(){var winTop=0-$(window).scrollTop();var winHeight=$(window).height();var thisTop=this.getBoundingClientRect().top;var thisBot=thisTop+this.clientHeight;var spillover=thisBot-winHeight;if(spillover>0)
$(window).scrollTop($(window).scrollTop()+spillover);}}
function FeaturedVideosHomepage(){this._wasReady=false;this._wasStarted=false;this._activePanel=null;this._needVolumeZero=false;this._channelCallToAction=null;this._callToActions=[];}
FeaturedVideosHomepage.prototype={constructor:FeaturedVideosHomepage,RequestAutoplay:function(){this._needVolumeZero=true;},SetCallToActions:function(channelCallToAction,callToActions){this._channelCallToAction=channelCallToAction;this._callToActions=callToActions;},WasReady:function(){return this._wasReady;},WasStarted:function(){return this._wasStarted;},GetActivePanel:function(){return this._activePanel;},OnVideoEvent:function(playerId,eventName,eventArgs){this.Player=document.getElementById(playerId)
try
{if(this._needVolumeZero){this.Player.setVolume(0);this._needVolumeZero=false;}}
catch(err)
{}
if(!this._wasReady){try
{this.Player.getVolume();this._wasReady=true;}
catch(err)
{}}
switch(eventName){case"stateChanged":if(eventArgs.state=="playing"){this._wasStarted=true;this.UpdateTitleDescription();this.UpdateCallToAction();}else if(eventArgs.state=="buffering"){this.UpdateTitleDescription();this.UpdateCallToAction();}
break;case"activePanelChanged":this._activePanel=eventArgs.activePanel;break;}},UpdateTitleDescription:function(){var item=this.Player.getCurrentItem();$(".homepage-video-container .titleText").text(item.title).removeAttr("title");$(".homepage-video-container .descriptionText").text(item.description).removeAttr("title");this.ApplyEllipsis();},UpdateCallToAction:function(){var item=this.Player.getCurrentItem();var callToActionLink=$(".homepage-video-container .calltoaction");var callToAction=null;for(var i=0;i<this._callToActions.length;i++){var current=this._callToActions[i];if(item.embedCode==current.embedCode){callToAction=current;break;}}
callToAction=callToAction||this._channelCallToAction;if(callToAction!=null){callToActionLink.attr("href",callToAction.link);callToActionLink.text(callToAction.linkText);callToActionLink.attr("title",callToAction.linkPopup);callToActionLink.css("visibility","visible");}
else{callToActionLink.css("visibility","hidden");}},ApplyEllipsis:function(){$(".homepage-video-container .titleText").textTruncate({multiline:true,height:50});$(".homepage-video-container .descriptionText").textTruncate({multiline:true,height:100});}}
AR.FeaturedVideosHomepage=new FeaturedVideosHomepage();AR.FeaturedVideosHomepageEventHandler=function(){return AR.FeaturedVideosHomepage.OnVideoEvent.apply(AR.FeaturedVideosHomepage,arguments);};if(typeof(AR)=="undefined"){AR={};}
var googletag=googletag||{};googletag.cmd=googletag.cmd||[];function onTemplateLoaded(pPlayer){AR.Video.Brightcove.OnTemplateLoaded(pPlayer);}
AR.Video={HasBannerAd:false,IsBannerAdDivEmpty:function(){if(!AR.Video.HasBannerAd&&$("div#videoCompanionAdDiv div").is(":empty")){AR.Video.HasBannerAd=true;return true;}
return false;},ConfigureAds:function(){(function(){var gads=document.createElement('script');gads.async=true;gads.type='text/javascript';var useSSL='https:'==document.location.protocol;gads.src=(useSSL?'https:':'http:')+'//www.googletagservices.com/tag/js/gpt.js';var node=document.getElementsByTagName('script')[0];node.parentNode.insertBefore(gads,node);})();googletag.cmd.push(function(){googletag.defineUnit(videoNetworkSiteZone,[300,250],'ad-companion').addService(googletag.companionAds()).addService(googletag.pubads());googletag.pubads().disableInitialLoad();googletag.pubads().enableAsyncRendering();googletag.companionAds().setRefreshUnfilledSlots(true);googletag.enableServices();});}}
AR.Video.Brightcove={DebugRenditions:(RegExp('[?&]debug([^&]*)').exec(window.location.search)),IsFullScreen:false,PlayerModule:null,VideoPlayerModule:null,ContentModule:null,ExperienceModule:null,MenuModule:null,AdsModule:null,SocialModule:null,OnTemplateLoaded:function(pPlayer){AR.Video.Brightcove.PlayerModule=bcPlayer.getPlayer(pPlayer);AR.Video.Brightcove.VideoPlayerModule=AR.Video.Brightcove.PlayerModule.getModule(APIModules.VIDEO_PLAYER);AR.Video.Brightcove.AdsModule=AR.Video.Brightcove.PlayerModule.getModule(APIModules.ADVERTISING);AR.Video.Brightcove.ExperienceModule=AR.Video.Brightcove.PlayerModule.getModule(APIModules.EXPERIENCE);AR.Video.Brightcove.MenuModule=AR.Video.Brightcove.PlayerModule.getModule(APIModules.MENU);AR.Video.Brightcove.ContentModule=AR.Video.Brightcove.PlayerModule.getModule(APIModules.CONTENT);AR.Video.Brightcove.SocialModule=AR.Video.Brightcove.PlayerModule.getModule(APIModules.SOCIAL);if(AR.Video.Brightcove.ExperienceModule){AR.Video.Brightcove.ExperienceModule.addEventListener(BCExperienceEvent.TEMPLATE_READY,AR.Video.Brightcove.OnTemplateReady);}
if(AR.Video.Brightcove.VideoPlayerModule){AR.Video.Brightcove.VideoPlayerModule.setRenditionSelectionCallback(AR.Video.Brightcove.SelectRendition);}
AR.Video.Brightcove.SetAdPolicy(videoAdTagUrl);},OnTemplateReady:function(e){if(AR.Video.Brightcove.VideoPlayerModule){AR.Video.Brightcove.VideoPlayerModule.setVolume(0.5);if($("input#_HomepageAutoplay").val()==="true"){AR.Video.Brightcove.VideoPlayerModule.mute();}
AR.Video.Brightcove.VideoPlayerModule.addEventListener(BCMediaEvent.COMPLETE,AR.Video.Brightcove.OnVideoComplete);}
if(AR.Video.Brightcove.SocialModule){AR.Video.Brightcove.SocialModule.setLink(socialModuleGetLink);}
if(AR.Video.Brightcove.ContentModule){AR.Video.Brightcove.ContentModule.addEventListener(BCContentEvent.MEDIA_COLLECTION_LOAD,AR.Video.Brightcove.OnMediaCollectionLoad);}
if(AR.Video.Brightcove.ExperienceModule){AR.Video.Brightcove.ExperienceModule.addEventListener(BCExperienceEvent.ENTER_FULLSCREEN,AR.Video.Brightcove.OnEnterFullScreen);AR.Video.Brightcove.ExperienceModule.addEventListener(BCExperienceEvent.EXIT_FULLSCREEN,AR.Video.Brightcove.OnExitFullScreen);}
if(AR.Video.Brightcove.MenuModule){AR.Video.Brightcove.MenuModule.addEventListener(BCMenuEvent.VIDEO_REQUEST,AR.Video.Brightcove.OnVideoRequest);AR.Video.Brightcove.MenuModule.setAdditionalMediaCallback(AR.Video.Brightcove.LoadRelatedVideos)}
$("div.video-loading").css("background","none");},OnEnterFullScreen:function(){AR.Video.Brightcove.IsFullScreen=true;},OnExitFullScreen:function(){AR.Video.Brightcove.IsFullScreen=false;},OnMediaCollectionLoad:function(e){if(e.mediaCollection!==null){var media=[];for(var i=0;i<e.mediaCollection.mediaCount;i++){media[i]=AR.Video.Brightcove.ContentModule.getMedia(e.mediaCollection.mediaIds[i]);}
AR.Video.Brightcove.MenuModule.setAdditionalMediaForType(media,BCMenuAdditionalMedia.RELATED_VIDEOS);}},OnVideoRequest:function(e){if(e.args.id!==null){window.location.href=AR.ClientUrlProvider.ResolveUrl("/handlers/videoredirect.ashx?p=2&id="+e.args.id);}},LoadRelatedVideos:function(type,media){if(type===BCMenuAdditionalMedia.RELATED_VIDEOS){if(AR.Video.Brightcove.ContentModule&&mediaIDsRelatedVideos){AR.Video.Brightcove.ContentModule.getMediaInGroupAsynch(mediaIDsRelatedVideos);}}
return true;},OnVideoComplete:function(e){if(e!==null){AR.ClientService.LogVideoPlay(AR.Ads.TypeSpecificID,AR.Ads.VisitorID,function(data){});}},SelectRendition:function(context){var renditions=context.renditions;var renditionIndex=-1;var playerHeight=context.screenHeight;if(AR.Video.Brightcove.DebugRenditions){console.info("Current rendition is: "+context.currentRendition.size+" "+context.currentRendition.frameWidth+"x"+context.currentRendition.frameHeight);console.info("Player width and height: "+context.screenWidth+"x"+context.screenHeight);}
if(!AR.Video.Brightcove.IsFullScreen){if(context.currentRendition.frameHeight>=playerHeight){for(var i=0;i<renditions.length;i++){if(playerHeight===renditions[i].frameHeight){renditionIndex=i;break;}else if(playerHeight>renditions[i].frameHeight){renditionIndex=i-1;break;}}}}
if(AR.Video.Brightcove.DebugRenditions){var match=RegExp('[?&]debug=([^&]*)').exec(window.location.search);var index=match&&decodeURIComponent(match[1].replace(/\+/g,' '));renditionIndex=index||renditionIndex;if(renditionIndex!==-1&&renditionIndex<renditions.length){console.info("New rendition is: "+renditions[renditionIndex].size+" "+renditions[renditionIndex].frameWidth+"x"+renditions[renditionIndex].frameHeight);}}
if(AR.Video.Brightcove.DebugRenditions){console.info("------------------------------------------");}
return renditionIndex;},SetAdPolicy:function(adTagUrl){var adPolicy=new Object();adPolicy.adServerURL=adTagUrl;adPolicy.prerollAds=true;adPolicy.midrollAds=false;adPolicy.postrollAds=false;AR.Video.Brightcove.AdsModule.setAdPolicy(adPolicy);}}
AR.Video.Ooyala={ReceiveOoyalaEvent:function(playerId,eventName,eventArgs){switch(eventName){case"adStarted":if(AR.Video.IsBannerAdDivEmpty()){}
break;case"playheadTimeChanged":if(AR.Video.IsBannerAdDivEmpty()){if(AR.VisitorInfo.IsLoggedInAsASupportingMember()){}else{}}
break;}}}
AR.Analytics.Event={ChangeServingSize:"event6",Complete:"event10",PrintMenu:"event13",SearchResultClick:"event8",Start:"event9"};AR.Analytics.OverRide={CreateItem:function(key,value,original){this.Key=key;this.Value=value;this.Original=original;},ParseItems:function(qs){var OverRideItems=new Array(3);var qsItems=qs.split("&");for(i=0;i<qsItems.length;i++){qsItem=qsItems[i].split("=");var overRide=new AR.Analytics.OverRide.CreateItem(qsItem[0],decodeURIComponent(qsItem[1]).replace(/\+/g,' '),qsItem[1]);OverRideItems[i]=overRide;}
return OverRideItems;}};AR.Analytics.Action={Source:{BlogPost:"Blog Post",MenuDetail:"Menu Detail",MPFullMode:"MP Full Mode",MPDemoMode:"MP Demo Mode",MenuPreview:"Menu Preview",MyMenus:"My Menus",RecipeBox:"Recipe Box",RecipePage:"Recipe Page",RecipePreview:"Recipe Preview",RecipeSearch:"Recipe Search",ReferencePage:"Reference Page",ShoppingList:"Shopping List",WeblinkPage:"Weblink Page",Video:"Video Detail"},Type:{AdvancedPrintOption:"Adv Print Option",ChangeServings:"Adjust Servings",EmailBlog:"Email Blog Post",EmailRecipe:"Email Recipe",EmailRecipeBranded:"Email Recipe:Branded",EmailReference:"Email Reference",EmailWeblink:"Email Weblink",EmailShoppingList:"Email Shopping List",EmailVideo:"Email Video",FolderAdd:"Add to Folder",ItemAdd:"Add New Item",MealNoteAdd:"Add Meal Notes",MealRename:"Rename Meal",MealSaveAsMenu:"Save Meal as Menu",MenuAdd:"Add to Menu",MenuCreate:"Create Menu",MenuDelete:"Delete Menu",MenuDetailsAdd:"Add Menu Details",MenuOpen:"Open Menu",MenuPrint:"Print Menu",MenuRename:"Rename Menu",MenuReview:"Rate/Review Menu",MenuSaveAs:"Save Menu As",MenuShare:"Share Menu",MpMealDrop:"MP Drop in Meal",MpMealReorder:"MP Reorder Meal",MpMyMenusSearch:"MP My Menus Search",MpRecipeBoxSearch:"MP Recipe Box Search",MpRecipeMove:"MP Move Recipe",MpRecipeReorder:"MP Reorder Recipe",MpRecipeSearch:"MP Recipe Search",MyMenuAdd:"Add to My Menus",Note:"Personal Note",NutritionSearchCollapsed:"Nutrition Search Collapsed",NutritionSearchExpanded:"Nutrition Search Expanded",RecipeAddPhoto:"Add a Recipe Photo",RecipeBoxAdd:"Add to Recipe Box",RecipeCustomize:"Customize Recipe",RecipeEmail:"Email Recipe",RecipePhotoLayer:"Recipe Photo Layer",RecipePrint:"Print Recipe",RecipeReview:"Rate/Review Recipe",RecipeReviewLayer:"Recipe Review Layer",RecipeSearchMoreClicked:"Recipe Search - More Description",RecipeSearchNutritionClicked:"Recipe Search - Nutrition",RecipeSearchPhotoClicked:"Recipe Search - Recipe Photo",ServingsAdjust:"Adjust Servings",ShoppingListAddItem:"Add Grocery Item",ShoppingListAddMenu:"Add Menu to SL",ShoppingListAddRecipe:"Add Recipe to Shopping List",ShoppingListCreate:"Create Shopping List",ShoppingListEmail:"Email Shopping List",ShoppingListPrint:"Print Shopping List"},Item:{Custom:"Custom",MealItem:"Meal",Menu:"Menu",MenuAR:"Menu AR",MenuPersonal:"Menu Personal",MenuSample:"Menu Sample",NonPartnerVideo:"Non Partner Video",PartnerVideo:"Partner Video",Personal:"Personal",Recipe:"Kitchen Approved",Reference:"Reference",Weblink:"Weblink",WriteInMealItem:"Write In"},ActionOption:{AdvancedPrintCancelTheme:"Adv Print Cancel Theme",AdvancedPrintChooseColor:"Adv Print Pick Color",AdvancedPrintChooseFont:"Adv Print Pick Font",AdvancedPrintChoosePhoto:"Adv Print Pick Photo",AdvancedPrintChooseReview:"Adv Print Pick Reviews",AdvancedPrintChooseTheme:"Adv Print Pick Theme",AdvancedPrintCustomHeadline:"Adv Print Custom Headline",AdvancedPrintSaveTheme:"Adv Print Save Theme",MenuPrintCookingInstructions:"Print Opt:Instructions",MenuPrintMeal:"Print Opt:Meal",MenuPrintShoppingList:"Print Opt:SL",MenuSpecialCreate:"Create Menu:Custom",MenuWeeklyCreate:"Create Menu:Week"},CallToAction:{ArToolsMenuTab:"AR Tools Menus Tab",ArToolsRecipeBoxTab:"AR Tools Recipe Box Tab",ArToolsShoppingListTab:"AR Tools SL Tab",CookMenusThumb:"Cooks Menus:Thumb",CookMenusTitle:"Cooks Menus:Title",LatestARMenusThumb:"Latest AR Menus:Thumb",LatestARMenusMenuTitle:"Latest AR Menus:Title",LatestUserMenusMenuTitle:"Latest User Menus:Menu Title",LatestUserMenusThumb:"Latest User Menus:Thumb",MenuDetailMenuCustomize:"Menu Detail:Customize Menu",MenuDetailMpTry:"Menu Detail:Try MP",MenuDetailMyMenusAdd:"Menu Detail:Add to My Menus",MenuDetailReview:"Menu Detail:RateReview",MenuDetailShoppingListAdd:"Menu Detail:Add to SL",MenuListThumb:"Menu List:Thumb",MenusLikeThisMenuTitle:"Menus Like This:Menu Title",MenuListMenuTitle:"Menu List:Title",MenuListNotification:"Menu List:Notification",MenuListItem:"Menu List:Item",MenuTabFeaturedMenu:"Menu Tab Featured Menu",MenuToggleThumb:"Menus Toggle:Thumb",MenuToggleTitle:"Menus Toggle:Title",MpNotifications:"MP Notifications",RecipeDetailReview:"Recipe Detail:RateReview",RecipeBoxMenuAdd:"Recipe Box:Add to Menu",RecipeBoxReview:"RecipeBox:RateReview",RecipeMenuAdd:"Recipe:Add to Menu",RelatedMenu:"Related Menu",ShoppingListCustomizeMenu:"SL:Customize Menu",SupportingMemberIcon:"Blue Star",WeeklyMenuAlerts:"New Menu Sign Up",PrimaryNavMenuPlanAMenu:"PrimaryNav:Try MP",PrimaryNavMenuWeeklySignUp:"PrimaryNav: New Menu Sign Up",PrimaryNavBuzzNewsletters:"PrimaryNav: Newsletters",PrimaryNavMyARJoinForFreeTab:"PrimaryNav:Tab7",PrimaryNavMyARJoinForFreeBtn:"PrimaryNav:Tab7 Free",PrimaryNavMyARSupportingMemberBtn:"PrimaryNav:Tab7 Supporting"},LayerName:{ChangeServings:"Adjust Servings",EmailBlog:"Email Blog Post",EmailRecipe:"Email Recipe",EmailRecipeBranded:"Email Recipe:Branded",EmailShoppingList:"Email Shopping List",EmailVideo:"Email Video",NewItemAdd:"Add New Item",NotesAdd:"Add Notes",MealRename:"Rename Meal",MenuCreate:"Create Menu",MenuDelete:"Delete Menu",MenuDetailsAdd:"Add Menu Details",MenuOpen:"Open Menu",MenuPreview:"Menu Preview",MenuRename:"Rename Menu",MenuSaveAs:"Save Menu As",MenuShare:"Share Menu",MpInitialUX:"MP Initial UX",MpMenuCreate:"Create New Menu",PersonalRecipeAdd:"Add New Personal Recipe",RateReview:"Rate Review",RecipePhoto:"Recipe Photo Layer",RecipePreview:"Recipe Preview",RecipeReview:"Recipe Review Layer",ServingsAdjust:"Adjust Servings",ShoppingListCreate:"Create Shopping List",UnsavedWork:"Unsaved Work"},CustomLinkClick:{Back:"Back",CompletePurchaseButton:"Complete Purchase",MealAdd:"Add Meal to Menu",MealDelete:"Delete Meal",MealNotesAdd:"Add Meal Notes",MealRecipeDelete:"Delete Recipe from Meal",MealSaveAsMenu:"Save Meal as Menu",MealServingSizeChange:"Change Meal Serving Size",MenuAdd:"Add to Menu",MenuAddRecipe:"Add Recipe to Menu",MenuAddWeblink:"Add Weblink to Menu",MenuAddWebReference:"Add Reference to Menu",MenuAddtoMenu:"Add Menu to Menu",MenuCreate:"Create Menu",MenuDelete:"Delete Menu",MenuDetailActSLCollapse:"Menu Detail Act SL Collapsed",MenuDetailActSLExpand:"Menu Detail Act SL Expanded",MenuDetailsAdd:"Add Menu Details",MenuDetailSLCollapse:"Menu Detail:SL Collapsed",MenuDetailSLExpand:"Menu Detail:SL Expanded",MenuDetailMenuAdd:"Menu Detail:Add to My Menus",MenuMealAdd:"Add Meal to Menu",MenuNutritionCollapse:"Menu Nutrition Collapsed",MenuNutritionExpand:"Menu Nutrition Expanded",MenuPreview:"Menu Preview",MenuPrint:"Print Menu",MenuRecipeAddExpanded:"Add Recipe to Menu Expanded",MenuRename:"Rename Menu",MenuReview:"Rate/Review Menu",MenuSave:"Save Menu",MenuSaveAs:"Save Menu As",MenuServingSizeChange:"Change Menu Serving Size",MenuShare:"Share Menu",MenuShareStatus:"Menu Share Status",MpMealNutritionCollapse:"MP Meal Nutrition Collapsed",MpMealNutritionExpand:"MP Meal Nutrition Expanded",MpMenuOptionsCollapse:"MP Menu Opt Collapsed",MpMenuOptionsExpand:"MP Menu Opt Expanded",MpMyArToolsCollapse:"MP My ARTools Collapsed",MpMyArToolsExpand:"MP My ARTools Expanded",MpMyMenusCollapse:"MP MyMenus Collapsed",MpMyMenusExpand:"MP MyMenus Expanded",MpMyRecipesCollapse:"MP MyRecipes Collapsed",MpMyRecipesExpand:"MP MyRecipes Expanded",MpSearchCollapse:"MP Search Collapsed",MpSearchExpand:"MP Search Expanded",MyArItemOptionCollapse:"MyAR Menu Item Opt Collapsed",MyArItemOptionExpand:"MyAR Menu Item Opt Expanded",MyArMenusOptionsCollapse:"MyAR Menus Opt Collapsed",MyArMenusOptionsExpand:"MyAR Menus Opt Expanded",MyArRbItemOptionsCollapse:"MyAR RB Item Opt Collapsed",MyArRbItemOptionsExpand:"MyAR RB Item Opt Expanded",MyArRbMenuRecipeAddExpand:"Add Recipe to Menu Expanded",MyArRbOptionsCollapse:"MyAR RB Opt Expanded",MyArRbOptionsExpand:"MyAR RB Opt Expanded",MyArSlOptCollapse:"MyAR SL Opt Collapsed",MyArSlOptExpand:"MyAR SL Opt Expanded",MyMenusAdd:"Add to My Menus",PersonalRecipeCreate:"Create Personal Recipe",RecipeDetailSLCollapse:"Recipe Detail:SL Collapsed",RecipeDetailSLExpand:"Recipe Detail:SL Expanded",RecipeFolders:"Recipe Folders",RecipePreview:"Recipe Preview",RecipeReview:"Rate/Review Recipe",RecipeSearch:"Recipe Search",RecipeServingSizeChange:"Change Recipe Serving Size",ReferencePreview:"Reference Preview",ShoppingListAddMenu:"Add Menu to SL",ShoppingListCreate:"Create Shopping List",ShoppingListRecipeAdd:"Add Recipe to SL",WeblinkPreview:"Weblink Preview",WriteInMealItem:"Write In Meal Item",WriteInMenuItem:"Write In Menu Item"},LinkName:{ArToolsMenusCreateMenu:"AR Tools:Create Menu",ArToolsMenusView:"AR Tools:View Menus",ArToolsMenuThumb:"AR Tools:Menu Thumb",ArToolsMenuTitle:"AR Tools:Title",ArToolsSampleMenu:"AR Tools:Sample Menu",ContinueAwayFromPage:"Continue Away from Page",CreatePersonalRecipe:"Create Personal Recipe",FeaturedMenuMealTitle:"Featured Menu:Meal Title",FeaturedMenuMenuPlannerTry:"Featured Menu:Try MP",FeaturedMenuMenuTitle:"Featured Menu:Menu Title",FeaturedMenuViewMenu:"Featured Menu:View Menu",LatestARMenusThumb:"Latest AR Menus:Thumb",LatestARMenusMenuTitle:"Latest AR Menus:Title",LatestUserMenusThumb:"Latest User Menus:Thumb",LatestUserMenusMenuTitle:"Latest User Menus:Title",MenuCategory:"Menu Category:",MenuCustomize:"Customize Menu",MenuEdit:"Edit Menu",MenuPageView:"View Menu Page",MenuPlannerTry:"Try MP",MenuPrint:"Print Menu",MenusLikeThisMenuTitle:"Menus Like This:Title",MenuTag:"Menu Tag:",MenuThumb:"Menu Thumb",MenuTitle:"Menu Title",MenuToggleThumb:"Menus Toggle:Thumb",MenuToggleTitle:"Menus Toggle:Title",MyArSlNewMenu:"My AR SL:New Menu",MyArToolsMP:"MyAR Tools:MP",NoMenusNewMenu:"No Menus:New Menu",NoMenusSampleMenu:"No Menus:Sample Menu",OptionsNewMenu:"Opt:New Menu",RateReviewCustomizeMenu:"Rate/Review:Customize Menu",RecipePageView:"View Recipe Page",RecipePhotoLayerTurn:"Recipe Photo Layer Turn",RecipePhotoLayerViewAll:"Recipe Photo Layer View All",RecipeReviewLayerTurn:"Recipe Review Layer Turn",RecipeReviewLayerViewAll:"Recipe Review Layer View All",RecipeReviewLayerHeader:"Recipe Header",RecipeReviewLayerBlock:"Recipe Review Block",RecipeReviewLayerReviews:"RD_Reviews",RecipeReviewLayerMoreReviews:"RD_MoreReviews",RecipeTitleSearch:"Search:Recipe Title",ReviewLayerSortByMostHelpful:"RL_SortByMostHelpful",ReviewLayerSortByMostPositive:"RL_SortByMostPositive",ReviewLayerSortByLeastPositive:"RL_SortByLeastPositive",ReviewLayerSortByNewest:"RL_SortByNewest",RelatedMenusMenuCreate:"Related Menus:Create Menu",RelatedMenusMenuTitle:"Related Menus:Title",RelatedMenusViewMenus:"Related Menus:View Menus",RelatedMenusViewRelated:"Related Menus:View Related",RelatedMenusViewSampleMenu:"Related Menus:Sample Menu",ReturnToPage:"Return to Page",ShoppingListMenuCustomize:"SL:Customize Menu",ShoppingListAddCheckedItems:"AddChecked:ShoppingList",VideoHomeNewestTab:"VH_Newest",VideoHomePopularTab:"VH_Popular",VideoHomeAllVideosTab:"VH_AllVideos",VideoHomeBrandsTab:"VH_Brands",VideoCarouselThumbnailClick:"VH_VideoPromos",VideoCarouselPrevNextClick:"VH_CarouselTurn"},ContentType:{Recipe:"Recipe",CommunityList:"Community List",MenuList:"Menu List",MpDemoMode:"MP Demo Mode",MpFullMode:"MP Full Mode",MenuPrint:"Menu Print",RecipePhoto:"Recipe Photos",Review:"Reviews"},GetItem:function(itemType){var retVal="";itemType=parseInt(itemType);switch(itemType){case AR.ItemType.Recipe:retVal=this.Item.Recipe;break;case AR.ItemType.WebLink:retVal=this.Item.Weblink;break;case AR.ItemType.Reference:retVal=this.Item.Reference;break;case AR.ItemType.PersonalRecipe:retVal=this.Item.Personal;break;case AR.ItemType.CustomRecipe:retVal=this.Item.Custom;break;case AR.ItemType.MealItem:retVal=this.Item.MealItem;break;case AR.ItemType.Menu:retVal=this.Item.Menu;break;case AR.ItemType.MenuAR:retVal=this.Item.MenuAR;break;case AR.ItemType.MenuPersonal:retVal=this.Item.MenuPersonal;break;case AR.ItemType.MenuSample:retVal=this.Item.MenuSample;break;case AR.ItemType.WriteInMealItem:retVal=this.Item.WriteInMealItem;break;default:retVal=null;break;}
return retVal;},GetMenuItem:function(menuType){var retVal="";menuType=parseInt(menuType);switch(menuType){case AR.MenuType.MenuAR:retVal=this.Item.MenuAR;break;case AR.MenuType.MenuPersonal:retVal=this.Item.MenuPersonal;break;case AR.MenuType.MenuSample:retVal=this.Item.MenuSample;break;default:retVal=null;break;}
return retVal;}}
AR.Analytics.RecordPageView=function(data){var s=AR.Analytics.GetOmnitureS();if(s!=null&&data!=null){AR.Analytics.ResetS(s);$.extend(s,data);s.eVar1=s.pageName;AR.Analytics.LogS("-- BI: RecordPageView s.t()",s);s.t();AR.Analytics.ResetS(s);}};AR.Analytics.SendBeacon=function(data,anchor){var s=AR.Analytics.GetOmnitureS();if(s!=null&&data!=null){s.linkTrackVars=data.linkTrackVars||'None';s.linkTrackEvents=data.linkTrackEvents||'None';s.events=data.events;s.pe=data.pe||'lnk_o';s.pev1=data.pev1;s.pev2=data.pev2||'None';s.eVar3=data.eVar3;s.eVar7=(data.usePageContentTypeAsSource&&s.prop6)?s.prop6:data.eVar7;s.eVar8=data.eVar8;s.eVar9=data.eVar9;s.eVar12=data.eVar12;s.eVar13=data.eVar13;s.prop24=data.prop24;s.prop34=data.prop34;s.prop36=data.prop36;var msg="";if(!data.disableDelay&&anchor!=null){s.tl(anchor[0],'o',s.pev2);msg="-- BI: SendBeacon  s.tl(this, 'o', '"+s.pev2+"')";}
else{s.tl(true,'o',s.pev2);msg="-- BI: SendBeacon  s.tl(true, 'o', '"+s.pev2+"')";}
AR.Analytics.LogS(msg,s);AR.Analytics.ResetS(s);}};AR.Analytics.RecordAction=function(event,source,type,item,itemID){var s=AR.Analytics.GetOmnitureS();if(s!=null){s.linkTrackEvents=(event instanceof Array)?event.join(","):event;s.linkTrackVars=(source!='')?"eVar7,":'';s.linkTrackVars+=(type!='')?"eVar8,":'';s.linkTrackVars+=(item!='')?"eVar9,":'';s.linkTrackVars+=(itemID!='')?"eVar12,":'';s.linkTrackVars+=(s.linkTrackEvents!='')?"events":'';s.linkTrackVars=(s.linkTrackVars.endsWith(','))?s.linkTrackVars.substr(0,s.linkTrackVars.length-1):s.linkTrackVars;s.eVar7=source;s.eVar8=type;s.eVar9=item;s.eVar12=itemID;s.events=(s.linkTrackEvents!="")?s.linkTrackEvents:"None";if(type!=''){s.tl(true,'o',type);}
else{s.tl(true,'o','None');}
var msg="BI: RecordAction('"+event+"','"+source+"','"+type+"','"+item+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|";msg+=(source!='')?"s.eVar7:'"+s.eVar7+"'|":'';msg+=(type!='')?"s.eVar8:'"+s.eVar8+"'|":'';msg+=(item!='')?"s.eVar9:'"+s.eVar9+"'|":'';AR.Analytics.LogConsoleInfo(msg);msg="-- * s.tl(true, 'o', '"+type+"')";AR.Analytics.LogConsoleInfo(msg);s.prop34=s.eVar7=s.eVar8=s.eVar9=s.linkTrackEvents="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordActionOption=function(actionoption,actiontype){var s=AR.Analytics.GetOmnitureS();var event='';if(s!=null){s.linkTrackVars="eVar12";s.linkTrackEvents=(event instanceof Array)?event.join(","):event;s.eVar12=actionoption;s.events=(s.linkTrackEvents!="")?s.linkTrackEvents:"None";s.tl(true,'o',actiontype);var msg="BI: RecordActionOption('"+actionoption+"','"+actiontype+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|s.eVar12:'"+s.eVar12+"' * s.tl(true, 'o', '"+actiontype+"')";AR.Analytics.LogConsoleInfo(msg);s.prop34=s.eVar12=s.linkTrackEvents="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordInternalSource=function(linkName){var s=AR.Analytics.GetOmnitureS();var event='';if(s!=null){s.linkTrackVars="prop24";s.linkTrackEvents=(event instanceof Array)?event.join(","):event;s.prop24=linkName;s.events=(s.linkTrackEvents!="")?s.linkTrackEvents:"None";s.tl(true,'o','None');var msg="BI: RecordInternalSource('"+linkName+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|s.prop24:'"+s.prop24+"' * s.tl(true, 'o', 'None')";AR.Analytics.LogConsoleInfo(msg);s.prop24=s.linkTrackEvents="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordCustomLinkClick=function(linkType){var s=AR.Analytics.GetOmnitureS();if(s!=null){s.events="None";s.linkTrackVars="None";s.pe='lnk_o';s.pev2=linkType;s.tl(true,'o',linkType);var msg="BI: RecordCustomLinkClick('"+linkType+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|linkType:'"+linkType+"' * s.tl(true, 'o', '"+linkType+"')";AR.Analytics.LogConsoleInfo(msg);s.prop34=s.pe=s.pev2="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordExternalShare=function(source,type,item,customLinkOverRide){var s=AR.Analytics.GetOmnitureS();var customLinkClickValue=(customLinkOverRide!='')?customLinkOverRide:type;if(s!=null){s.events="None";s.pe='lnk_o';s.pev2=customLinkClickValue;s.linkTrackVars=(source!='')?"eVar7,":'';s.linkTrackVars+=(type!='')?"eVar8,":'';s.linkTrackVars+=(item!='')?"eVar9,":'';s.linkTrackVars=(s.linkTrackVars.endsWith(','))?s.linkTrackVars.substr(0,s.linkTrackVars.length-1):s.linkTrackVars;s.eVar7=source;s.eVar8=type;s.eVar9=item;s.tl(true,'o',customLinkClickValue);var msg="BI: RecordExternalShare('"+source+"','"+type+"','"+item+"','"+customLinkOverRide+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|";msg+=(source!='')?"s.eVar7:'"+s.eVar7+"'|":'';msg+=(type!='')?"s.eVar8:'"+s.eVar8+"'|":'';msg+=(item!='')?"s.eVar9:'"+s.eVar9+"'|":'';AR.Analytics.LogConsoleInfo(msg);msg="-- * s.tl(true, 'o', '"+customLinkClickValue+"')";AR.Analytics.LogConsoleInfo(msg);s.prop34=s.eVar7=s.eVar8=s.eVar9=s.linkTrackEvents="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordLinkName=function(linkName){var s=AR.Analytics.GetOmnitureS();if(s!=null){s.events="None";s.linkTrackVars="prop34";s.prop34=linkName;s.tl(true,'o','None');var msg="BI: RecordLinkName('"+linkName+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|s.prop34:'"+s.prop34+"' * s.tl(true, 'o', 'None')";AR.Analytics.LogConsoleInfo(msg);s.prop34="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordCallToAction=function(callToAction){var s=AR.Analytics.GetOmnitureS();if(s!=null){s.events="None";s.linkTrackVars="eVar3";s.eVar3=callToAction;s.tl(true,'o','None');var msg="BI: RecordCallToAction('"+callToAction+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|s.eVar3:'"+s.eVar3+"' * s.tl(true, 'o', 'None')";AR.Analytics.LogConsoleInfo(msg);s.prop34=s.eVar3="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordCallToActionAndLinkName=function(callToAction,linkName){var s=AR.Analytics.GetOmnitureS();if(s!=null){s.events="None";s.linkTrackVars="eVar3,prop34";s.eVar3=callToAction;s.prop34=linkName;s.tl(true,'o','None');var msg="BI: RecordCallToActionAndLinkName('"+callToAction+"','"+linkName+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|s.eVar3:'"+s.eVar3+"'|s.prop34:'"+s.prop34+"' * s.tl(true, 'o', 'None')";AR.Analytics.LogConsoleInfo(msg);s.eVar3=s.prop34="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordCallToActionAndCustomLink=function(callToAction,linkType){var s=AR.Analytics.GetOmnitureS();if(s!=null){s.events="None";s.linkTrackVars="eVar3";s.pe='lnk_o';s.pev2=linkType;s.eVar3=callToAction;s.tl(true,'o',linkType);var msg="BI: RecordCallToActionAndCustomLink('"+callToAction+"','"+linkType+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|s.eVar3:'"+s.eVar3+"|linkType:'"+linkType+"' * s.tl(true, 'o', '"+linkType+"')";AR.Analytics.LogConsoleInfo(msg);s.prop34=s.eVar3=s.pe=s.pev2="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordSearchAction=function(event,source,type,searchTerm,resultCount){var s=AR.Analytics.GetOmnitureS();if(s!=null){s.linkTrackVars="eVar7,eVar8,eVar11,prop14,events";s.linkTrackEvents=(event instanceof Array)?event.join(","):event;s.events=(s.linkTrackEvents!="")?s.linkTrackEvents:"None";s.eVar7=source;s.eVar8=type;s.eVar11=searchTerm;s.prop14=resultCount;s.tl(true,'o','None');var msg="BI: RecordSearchAction('"+event+"','"+source+"','"+type+"','"+searchTerm+"','"+resultCount+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|s.eVar7:'"+s.eVar7+"'|s.eVar8:'"+s.eVar8+"'|s.eVar11:'"+s.eVar11+"'|s.prop14:'"+s.prop14+"' * s.tl(true, 'o', 'None')";AR.Analytics.LogConsoleInfo(msg);s.prop34=s.eVar7=s.eVar8=s.eVar11=s.prop14="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordSearchActionDetail=function(event,source,type,searchTerm,resultCount,actionDetail){var s=AR.Analytics.GetOmnitureS();if(s!=null){s.linkTrackVars="eVar7,eVar8,eVar11,prop14,eVar12,events";s.linkTrackEvents=(event instanceof Array)?event.join(","):event;s.events=(s.linkTrackEvents!="")?s.linkTrackEvents:"None";s.eVar7=source;s.eVar8=type;s.eVar11=searchTerm;s.eVar12=actionDetail;s.prop14=resultCount;s.tl(true,'o','None');var msg="BI: RecordSearchActionDetail('"+event+"','"+source+"','"+type+"','"+searchTerm+"','"+resultCount+"','"+actionDetail+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|s.eVar7:'"+s.eVar7+"'|s.eVar8:'"+s.eVar8+"'|s.eVar11:'"+s.eVar11+"'|s.prop14:'"+s.prop14+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- |s.evar12:'"+s.eVar12+"' * s.tl(true, 'o', 'None')";AR.Analytics.LogConsoleInfo(msg);s.prop34=s.eVar7=s.eVar8=s.eVar11=s.prop14=s.eVar12="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordSearchResultClick=function(event,linkName){var s=AR.Analytics.GetOmnitureS();if(s!=null){s.linkTrackVars="prop34,events";s.linkTrackEvents=(event instanceof Array)?event.join(","):event;s.events=(s.linkTrackEvents!="")?s.linkTrackEvents:"None";s.prop34=linkName;s.tl(true,'o','None');var msg="BI: RecordSearchResultClick('"+event+"','"+linkName+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|s.prop34:'"+s.prop34+"' * s.tl(true, 'o', 'None')";AR.Analytics.LogConsoleInfo(msg);s.prop34="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordCanvasDrop=function(type){var s=AR.Analytics.GetOmnitureS();if(s!=null){s.linkTrackVars="eVar8";s.events="None";s.eVar8=type;s.tl(true,'o','None');var msg="BI: RecordCanvasDrop('"+type+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|s.eVar8:'"+s.eVar8+"' * s.tl(true, 'o', 'None')";AR.Analytics.LogConsoleInfo(msg);s.prop34=s.eVar8="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordLayerOpen=function(layerName,contentType){var s=AR.Analytics.GetOmnitureS();if(s!=null){s.linkTrackVars="prop36";s.linkTrackVars+=(contentType!='')?',prop6':'';s.events="None";s.prop36=layerName;s.prop6=contentType;s.tl(true,'o','None');var msg="BI: RecordLayerOpen('"+layerName+"','"+contentType+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|s.prop36:'"+s.prop36+"'";msg+=(contentType!='')?"|s.prop6:'"+s.prop6+"'":'';msg+=" * s.tl(true, 'o', 'None')"
AR.Analytics.LogConsoleInfo(msg);s.prop34=s.eVar8=s.prop36=s.prop6="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordLayerOpenAction=function(layerName,event,source,type,item,itemID){var s=AR.Analytics.GetOmnitureS();if(s!=null){s.linkTrackEvents=(event instanceof Array)?event.join(","):event;s.events=(s.linkTrackEvents!="")?s.linkTrackEvents:"None";s.linkTrackVars=(layerName!='')?"prop36,":'';s.linkTrackVars+=(source!='')?"eVar7,":'';s.linkTrackVars+=(type!='')?"eVar8,":'';s.linkTrackVars+=(item!='')?"eVar9,":'';s.linkTrackVars+=(itemID!='')?"eVar12,":'';s.linkTrackVars+=(s.linkTrackEvents!='')?"events":'';s.linkTrackVars=(s.linkTrackVars.endsWith(','))?s.linkTrackVars.substr(0,s.linkTrackVars.length-1):s.linkTrackVars;s.prop36=layerName;s.eVar7=source;s.eVar8=type;s.eVar9=item;s.eVar12=itemID;var param=(type!="")?type:"None";s.tl(true,'o',param);var msg="BI: RecordLayerOpenAction('"+layerName+"','"+event+"','"+source+"','"+type+"','"+item+"')";AR.Analytics.LogConsoleInfo(msg);msg="-- s.linkTrackVars:'"+s.linkTrackVars+"'";AR.Analytics.LogConsoleInfo(msg);msg="-- s.events:'"+s.events+"'|";msg+=(layerName!='')?"s.prop36:'"+s.prop36+"'|":'';msg+=(source!='')?"s.eVar7:'"+s.eVar7+"'|":'';msg+=(type!='')?"s.eVar8:'"+s.eVar8+"'|":'';msg+=(item!='')?"s.eVar9:'"+s.eVar9+"'|":'';AR.Analytics.LogConsoleInfo(msg);msg="-- * s.tl(true, 'o', '"+param+"')";AR.Analytics.LogConsoleInfo(msg);s.prop34=s.eVar7=s.eVar8=s.eVar9=s.prop36="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordVideoClick=function(event,actionType,actionItem,actionDetail,internalSource){var s=AR.Analytics.GetOmnitureS();if(s!=null){s.linkTrackVars="eVar1,eVar7,eVar8,eVar9,eVar12,events";s.linkTrackVars+=(internalSource!='')?",prop24":'';s.linkTrackEvents=(event instanceof Array)?event.join(","):event;s.events=(s.linkTrackEvents!="")?s.linkTrackEvents:"None";s.eVar1=s.pageName;s.eVar7=s.prop6||s.pageName;s.eVar8=actionType;s.eVar9=actionItem;s.eVar12="Video: "+actionDetail;s.prop24=internalSource;s.tl(true,"o",((event==="event10")?"Video Close":actionType));s.eVar1=s.eVar7=s.eVar8=s.eVar9=s.eVar12="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordCarouselAction=function(linkName){var s=AR.Analytics.GetOmnitureS();if(s!=null&&linkName){s.events="None";s.linkTrackVars="prop34";s.prop34=linkName;s.tl(true,'o',linkName);s.prop34="";s.linkTrackVars=s.events="None";}};AR.Analytics.RecordAdPushViaAPI=function(event,actionSource,actionType,actionItem,actionDetail){var s=AR.Analytics.GetOmnitureS();if(s!=null){s.linkTrackVars="eVar3,eVar7,eVar8"+((actionItem)?",eVar9,prop32":"")+((actionDetail)?",eVar12":"")+",events";s.linkTrackEvents=(event instanceof Array)?event.join(","):event;s.events=(s.linkTrackEvents!="")?s.linkTrackEvents:"None";s.eVar3=s.eVar8=actionType;s.eVar7=actionSource;s.eVar9=actionItem;s.eVar12=s.prop32=actionDetail;s.tl(true,"o","None");s.eVar3=s.eVar7=s.eVar8=s.eVar9=s.eVar12=s.prop32="";s.linkTrackVars=s.events="None";}};AR.Analytics.CollapsiblePanelScript=function(){var _value;function SetValue(value){if(value==null||value.toString()==''){AR.LogAlert('CollapsiblePanelScript.SetValue is null or empty','Print Page','Advanced Print Options');}
_value=value;}
function GetValue(){if(_value==null||_value.length<1){AR.LogAlert('CollapsiblePanelScript.GetValue is null or empty','Print Page','Advanced Print Options');return'';}
else
return _value;}
return{SetValue:SetValue,GetValue:GetValue};}();AR.AdSuppress=function(elementNotToHide){$("embed, object, select").each(function(){var elementToHide=$(this);if(elementToHide.css("visibility")=="hidden"){return;}
if(elementNotToHide!=null){var shouldntHideElement=false;elementNotToHide.each(function(){shouldntHideElement=shouldntHideElement||jQuery.contains(this,elementToHide[0]);});if(shouldntHideElement){return;}}
elementToHide.css("visibility","hidden");AR.Dialog.AddOnClosedHandler(function(){elementToHide.css("visibility","visible");});elementToHide.parents().each(function(){var parentOfElementToHide=$(this);if(parentOfElementToHide.data("suppressed")===undefined||!parentOfElementToHide.data("suppressed")){parentOfElementToHide.data("suppressed",parentOfElementToHide.css("z-index"));parentOfElementToHide.css("z-index","0");AR.Dialog.AddOnClosedHandler(function(){if(parentOfElementToHide.data("suppressed")!=="auto"){parentOfElementToHide.css("z-index",parentOfElementToHide.data("suppressed"));}
else{parentOfElementToHide.css("z-index",'');}
parentOfElementToHide.data("suppressed",false);});}});});}
AR.LogEval=function(expression){var result=null;try{result=eval(expression);if(typeof(result)=="undefined"){result={LogEvalMessage:"Value was undefined"};}}
catch(exception){result={LogEvalMessage:"Exception thrown during eval",exception:exception};}
return result;};AR.LogErrorEx=function(data,source,title){try{AR.SetModuleLogContent("PageInfo",{location:AR.LogEval("window.location.href"),visitor:AR.LogEval("AR.VisitorInfo._data"),TypeSpecificID:AR.LogEval("AR.TypeSpecificID")});data=$.extend({},data,{modules:AR._moduleLogContent});data=AR.LogClean(data);data=JSON.stringify(data);source=(source==null)?"Main.js":source;title=(title==null)?"Script Error":title;var url=AR.ClientUrlProvider.ResolveUrl(AR.Config.ErrorLoggingHandler)+"?source="+escape(source)+"&title="+escape(title);var result=$.post(url,{description:data});}catch(e){}};AR.LogAlertEx=function(data,source,title){try{AR.SetModuleLogContent("PageInfo",{location:AR.LogEval("window.location.href"),visitor:AR.LogEval("AR.VisitorInfo._data"),TypeSpecificID:AR.LogEval("AR.TypeSpecificID")});data=$.extend({},data,{modules:AR._moduleLogContent});data=AR.LogClean(data);data=JSON.stringify(data);source=(source==null)?"Main.js":source;title=(title==null)?"Script Alert":title;var url=AR.ClientUrlProvider.ResolveUrl(AR.Config.ErrorLoggingHandler)+"?source="+escape(source)+"&title="+escape(title)+"&type=Alert";var result=$.post(url,{description:data});}catch(e){}};AR.SetModuleLogContent=function(moduleName,data){AR._moduleLogContent[moduleName]=AR.LogClean(data);};AR._moduleLogContent={};AR.LogClean=function(expression,allowedDepth){if(typeof(allowedDepth)!="number"){allowedDepth=8;AR.LogClean.CallLimit=256;}
if(allowedDepth<=0||AR.LogClean.CallLimit<=0){return"AR.LogClean stopped due to recursion limit";}
AR.LogClean.CallLimit--;if(typeof(expression)=="undefined"||expression==null||typeof(expression)=="number"||typeof(expression)=="string"||typeof(expression)=="boolean"){return expression;}
else if(typeof(expression)=="function"){return null;}
else{var result={}
try{for(key in expression){break;}}
catch(e){return AR.LogClean({message:"AR.LogClean stopped due to exception accessing iterator",exception:e});}
for(key in expression){var value=null;var haveValue=false;try{value=expression[key];if(typeof(value)!="function")
haveValue=true;}
catch(error){}
if(haveValue)
result[key]=AR.LogClean(value,allowedDepth-1);}
return result;}};BASE_DECIMAL='0123456789';BASE_64_DART_SAFE='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz$-_.!*(),';AR.BaseN={RecodeString:function(number,inputBase,outputBase){if(outputBase==''){throw Error('Empty output base');}
var isZero=true;for(var i=0,n=number.length;i<n;i++){if(number.charAt(i)!=inputBase.charAt(0)){isZero=false;break;}}
if(isZero){return outputBase.charAt(0);}
var numberDigits=AR.BaseN.StringToArray(number,inputBase);var inputBaseSize=inputBase.length;var outputBaseSize=outputBase.length;var result=[];for(var i=numberDigits.length-1;i>=0;i--){var carry=0;for(var j=0,n=result.length;j<n;j++){var digit=result[j];digit=digit*inputBaseSize+carry;if(digit>=outputBaseSize){var remainder=digit%outputBaseSize;carry=(digit-remainder)/outputBaseSize;digit=remainder;}else{carry=0;}
result[j]=digit;}
while(carry){var remainder=carry%outputBaseSize;result.push(remainder);carry=(carry-remainder)/outputBaseSize;}
if(isZero){return outputBase.charAt(0);}
carry=numberDigits[i];var j=0;while(carry){if(j>=result.length){result.push(0);}
var digit=result[j];digit+=carry;if(digit>=outputBaseSize){var remainder=digit%outputBaseSize;carry=(digit-remainder)/outputBaseSize;digit=remainder;}else{carry=0;}
result[j]=digit;j++;}}
return AR.BaseN.ArrayToString(result,outputBase);},StringToArray:function(number,base){var index={};for(var i=0,n=base.length;i<n;i++){index[base.charAt(i)]=i;}
var result=[];for(var i=number.length-1;i>=0;i--){var character=number.charAt(i);var digit=index[character];if(typeof digit=='undefined'){throw Error('Number '+number+' contains a character not found in base '+
base+', which is '+character);}
result.push(digit);}
return result;},ArrayToString:function(number,base){var n=number.length;var chars=[];var baseSize=base.length;for(var i=n-1;i>=0;i--){var digit=number[i];if(digit>=baseSize||digit<0){throw Error('Number '+number+' contains an invalid digit: '+digit);}
chars.push(base.charAt(digit));}
return chars.join('');}};AR.ClientUrlProvider={ResolveUrl:function(url){if(url!=null){if(url.length>1&&url.charAt(0)=='~'&&url.charAt(1)=='/'){url=url.substr(1,url.length-1);url=AR.Config.ApplicationPath+url;}else if(url.length>0&&url.charAt(0)=='/'){url=AR.Config.ApplicationPath+url;}}
return url;},ResolveImageUrl:function(path){if(path.substring(0,4)=="http"){return path;}
if(path.charAt(0)!='/'){path="/"+path;}
var imageServer=AR.ImageServer;if(imageServer.charAt(imageServer.length-1)=='/'){imageServer=imageServer.substr(0,imageServer.length-1);}
return imageServer+path;},GetItemFolder:function(itemType,useFriendly){var folder="";switch(itemType){case AR.ItemType.CustomRecipe:folder=(useFriendly)?"~/CustomRecipe":"~/My/RecipeBox/CustomRecipes";break;case AR.ItemType.WebLink:folder=(useFriendly)?"~/WebLink":"~/My/RecipeBox/Links";break;case AR.ItemType.PersonalRecipe:folder=(useFriendly)?"~/PersonalRecipe":"~/My/RecipeBox/PersonalRecipes";break;case AR.ItemType.Reference:folder=(useFriendly)?"~/Reference":"~/My/RecipeBox/References";break;}
return folder;},GetRecipeBoxFolder:function(folderID){return this.ResolveUrl("~/My/RecipeBox/Default.aspx?folder="+folderID);},GetMyReviewsDetailPage:function(sharedItemID,itemType){sharedItemID=parseInt(sharedItemID);itemType=parseInt(itemType);return this.ResolveUrl("~/My/Shared/Reviews/Detail.aspx?id="+sharedItemID+"&typeID="+itemType);},GetCustomizeRecipeUrl:function(recipeID){return this.ResolveUrl("~/My/RecipeBox/CustomRecipes/AddEdit.aspx?recipeID="+recipeID+"&new=1");},GetRecipeBoxListViewRatingImage:function(rating){var relativeURL="/ar/myar/stars/";var newRating=Math.round(rating*2);switch(newRating){case 0:relativeURL+="sm_0star.gif";break;case 1:relativeURL+="sm_0.5star.gif";break;case 2:relativeURL+="sm_1star.gif";break;case 3:relativeURL+="sm_1.5star.gif";break;case 4:relativeURL+="sm_2star.gif";break;case 5:relativeURL+="sm_2.5star.gif";break;case 6:relativeURL+="sm_3star.gif";break;case 7:relativeURL+="sm_3.5star.gif";break;case 8:relativeURL+="sm_4star.gif";break;case 9:relativeURL+="sm_4.5star.gif";break;case 10:relativeURL+="sm_5star.gif";break;default:relativeURL+="sm_0star.gif";break;};return this.ResolveImageUrl(relativeURL);},GetRatingImage:function(rating){var relativeURL="/images/";var newRating=Math.round(rating*2);switch(newRating){case 0:relativeURL+="15876.gif";break;case 1:relativeURL+="15877.gif";break;case 2:relativeURL+="15868.gif";break;case 3:relativeURL+="15867.gif";break;case 4:relativeURL+="15870.gif";break;case 5:relativeURL+="15869.gif";break;case 6:relativeURL+="15872.gif";break;case 7:relativeURL+="15871.gif";break;case 8:relativeURL+="15874.gif";break;case 9:relativeURL+="15873.gif";break;case 10:relativeURL+="15875.gif";break;};return this.ResolveImageUrl(relativeURL);},GetTypesUrl:function(){return this.ResolveUrl("~/Controls/Dialogs/TypesDlg.aspx");},GetSignUpAspxDialog:function(){return this.ResolveUrl("~/Membership/SignUpDialog.aspx");},GetLogonAspxDialog:function(){return this.ResolveUrl("~/Membership/LogonDialog.aspx");},GetProductSelectionDialog:function(featureType,linkName,internalSource,callToAction){featureType=featureType||"NotSet";callToAction=callToAction||"";featureType=encodeURIComponent(decodeURIComponent(featureType));linkName=encodeURIComponent(decodeURIComponent(linkName));internalSource=encodeURIComponent(decodeURIComponent(internalSource));var qs="FeatureType="+featureType+"&p34="+linkName+"&prop24="+internalSource;if(callToAction!=""){qs+="&e3="+encodeURIComponent(decodeURIComponent(callToAction));}
return this.ResolveUrl("~/Membership/Controls/SKU/ProductSelectionDialog.aspx?"+qs);},GetAdvancedPrintProductSelectionDialog:function(featureType,printFeature,linkName){featureType=featureType||"NotSet";printFeature=printFeature||"NotSet";featureType=encodeURIComponent(decodeURIComponent(featureType));printFeature=encodeURIComponent(decodeURIComponent(printFeature));linkName=encodeURIComponent(decodeURIComponent(linkName));return this.ResolveUrl("~/Membership/Controls/SKU/ProductSelectionDialog.aspx?FeatureType="+featureType+"&AdvancedPrintFeature="+printFeature+"&p34="+linkName);},GetRateAndReviewLogonDialog:function(itemID,itemType,itemTitle,menuType){return this.ResolveUrl("~/Controls/RateAndReviewDialog/Dialog.aspx"
+"?id="+itemID
+"&itemtype="+itemType
+"&title="+escape(itemTitle)
+"&menuType="+menuType);},GetPhotoByID:function(photoID,size,isUserPhoto){var path='/global/recipes/'+size+'/'+photoID+'.jpg';if(isUserPhoto){var pad=('00000000'+photoID.toString()).slice(-8);path='/userphotos/'+size+'/'+pad.substring(0,2)+"/"+pad.substring(2,4)+"/"+pad.substring(4,6)+"/"+photoID.toString()+".jpg";}
return this.ResolveImageUrl(path);},GetMyMenusPage:function(){return this.ResolveUrl("~/My/Menus/Default.aspx");},GetMyRecipeBoxPage:function(){return this.ResolveUrl("~/My/RecipeBox/Default.aspx");},GetCanvasUrl:function(menuId){if(menuId!=null)
return this.ResolveUrl("~/My/Menus/Planner.aspx?sharedItemID="+menuId);else
return this.ResolveUrl("~/My/Menus/Planner.aspx");},GetRecipeOfTheDayUrl:function(){var url=$("a.recipe-of-the-day-link").attr("href");return this.ResolveUrl(url);},GetVideoOfTheDayUrl:function(){var url=$("a.video-of-the-day-link").attr("href");return url;}};try
{ioc.Register("_clientUrlProvider").withInstance(AR.ClientUrlProvider);}
catch(e){}
AR.ClientUrlUtils={QueryStringParameters:{AnalyticsCallToAction:"e3",AnalyticsActionItem:"e9",AnalyticsInternalSource:"prop24",AnalyticsLinkName:"p34",AnalyticsCustomLinkClick:"custlnkclk"},GetQueryStringItemFromAnchor:function(key,anchor){var retVal=null;if(anchor!=null&&anchor.is("a")){retVal=AR.ClientUrlUtils.GetQueryStringItem(key,anchor.attr("href"));}
return retVal;},GetQueryStringItem:function(key,url){return AR.ClientUrlUtils.GetUrlEncodedKey(key,url);},RemoveQueryStringItems:function(queryString,paramKeys){queryString=queryString||"";paramKeys=paramKeys||"";if(queryString.substr(0,1)=="?"){queryString=queryString.substr(1);}
var qsItems=queryString.split("&");var qsItem;var itemsToKeep=new Array();var j=0;for(i=0;i<qsItems.length;i++){qsItem=qsItems[i].split("=");if($.inArray(qsItem[0],paramKeys)==-1){itemsToKeep[j++]=qsItems[i];}}
return((itemsToKeep.length>0)?itemsToKeep.join("&"):"");},SetQueryString:function(key,value,url){if(!url)return""
if(!key)return url;var qryStrPos=url.indexOf("?");var baseUrl=(qryStrPos>-1)?url.substring(0,qryStrPos):url;var q=(qryStrPos>-1)?url.substring(url.indexOf("?",0)):"";return baseUrl+AR.ClientUrlUtils.SetUrlEncodedKey(key,value,q);},GetUrlEncodedKey:function(key,url){if(!url)
url=window.location.search;var re=new RegExp("[?|&]"+key+"=(.*?)&");var matches=re.exec(url+"&");if(!matches||matches.length<2)
return"";return decodeURIComponent(matches[1].replace("+"," "));},SetUrlEncodedKey:function(key,value,qryStr){qryStr=qryStr||"";value=value||""
var q=qryStr+"&";var re=new RegExp("[?|&]"+key+"=.*?&");if(!re.test(q))
q+=key+"="+encodeURI(value);else
q=q.replace(re,"&"+key+"="+encodeURIComponent(value)+"&");q=AR.ClientUrlUtils.TrimStart(q,"&");q=AR.ClientUrlUtils.TrimEnd(q,"&");return(q[0]=="?")?q:q="?"+q;},TrimEnd:function(qryStr,valToTrim){if(valToTrim)
return qryStr.replace(new RegExp(AR.ClientUrlUtils.EscapeRegExp(valToTrim)+"*$"),'');else
return qryStr.replace(/\s+$/,'');},TrimStart:function(qryStr,valToTrim){if(valToTrim)
return qryStr.replace(new RegExp("^"+AR.ClientUrlUtils.EscapeRegExp(valToTrim)+"*"),'');else
return qryStr.replace(/^\s+/,'');},EscapeRegExp:function(textToEscape){if(textToEscape)
return textToEscape.replace(/[.*+?^${}()|[\]\/\\]/g,"\\$0");else
return"";}};function DialogLauncher(){this._defaultErrorHandler=function(){};}
ioc.Register("_dialogLauncher").withConstructor(DialogLauncher).withDependencies("_aspxDialog","_clientUrlProvider").asSingleton();DialogLauncher.prototype={SetErrorHandler:function(callback){this._defaultErrorHandler=callback;},AddEditMenuDetails:function(title,descr,notes,attributes,successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuAddEditDetails.aspx",{_title:title,_description:descr,_note:notes,_attributes:JSON.stringify(attributes)},successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.MenuDetailsAdd,AR.Analytics.Event.Start,(AR.VisitorInfo.IsSupportingMember())?AR.Analytics.Action.Source.MPFullMode:AR.Analytics.Action.Source.MPDemoMode,AR.Analytics.Action.Type.MenuDetailsAdd,AR.Analytics.Action.Item.MenuPersonal);},AddEditMealNote:function(mealName,note,successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MealAddEditNote.aspx",{_mealName:mealName,_note:note},successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.NotesAdd,AR.Analytics.Event.Start,(AR.VisitorInfo.IsSupportingMember())?AR.Analytics.Action.Source.MPFullMode:AR.Analytics.Action.Source.MPDemoMode,AR.Analytics.Action.Type.MealNoteAdd,AR.Analytics.Action.Item.MenuPersonal);},AddMenu:function(successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuAdd.aspx",null,successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.MpMenuCreate,AR.Analytics.Event.Start,(AR.VisitorInfo.IsSupportingMember())?AR.Analytics.Action.Source.MPFullMode:AR.Analytics.Action.Source.MPDemoMode,AR.Analytics.Action.Type.MenuCreate,AR.Analytics.Action.Item.MenuPersonal);},AddMenuItem:function(successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuAddItem.aspx",null,successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.NewItemAdd,AR.Analytics.Event.Start,(AR.VisitorInfo.IsSupportingMember())?AR.Analytics.Action.Source.MPFullMode:AR.Analytics.Action.Source.MPDemoMode,AR.Analytics.Action.Type.ItemAdd,AR.Analytics.Action.Item.WriteInMealItem);},ChangeServings:function(currSrv,origYield,itemName,srvType,successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuChangeServings.aspx",{_currSrv:currSrv,_origYield:origYield,_itemName:itemName,_srvType:srvType},successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.ChangeServings,AR.Analytics.Event.Start,(AR.VisitorInfo.IsSupportingMember())?AR.Analytics.Action.Source.MPFullMode:AR.Analytics.Action.Source.MPDemoMode,AR.Analytics.Action.Type.ChangeServings,AR.Analytics.Action.Item.MenuPersonal);},ChooseShoppingList:function(menuID,defaultName,successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/ChooseShoppingList.aspx",{_menuID:menuID,_defaultName:defaultName},successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.ShoppingListCreate,AR.Analytics.Event.Start,(AR.VisitorInfo.IsSupportingMember())?AR.Analytics.Action.Source.MPFullMode:AR.Analytics.Action.Source.MPDemoMode,AR.Analytics.Action.Type.ShoppingListCreate,AR.Analytics.Action.Item.MenuPersonal);},OpenMenu:function(successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuOpen.aspx",null,successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.MenuOpen,AR.Analytics.Event.Start,(AR.VisitorInfo.IsSupportingMember())?AR.Analytics.Action.Source.MPFullMode:AR.Analytics.Action.Source.MPDemoMode,AR.Analytics.Action.Type.MenuOpen,AR.Analytics.Action.Item.MenuPersonal);},PreviewMenu:function(menu,successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuPreview.aspx",{_menu:JSON.stringify(menu)},successCallback,errorCallback);AR.Analytics.RecordLayerOpen(AR.Analytics.Action.LayerName.MenuPreview,AR.Analytics.Action.Item.MenuPersonal);},PreviewMenuByMenuID:function(menuID,canAddToMenu,successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuPreview.aspx",{_menuID:menuID,_canAddToMenu:canAddToMenu},successCallback,errorCallback);},PreviewRecipe:function(itemType,typeSpecificID,canAddToMenu,successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/RecipePreview.aspx",{_itemTypeID:itemType,_typeSpecificID:typeSpecificID,_canAddToMenu:canAddToMenu},successCallback,errorCallback);AR.Analytics.RecordLayerOpen(AR.Analytics.Action.LayerName.RecipePreview,'Recipe');},RecipeLimitExceeded:function(successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuRecipeLimitExceeded.aspx",{_context:0},successCallback,errorCallback);},MealLimitExceeded:function(successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuRecipeLimitExceeded.aspx",{_context:1},successCallback,errorCallback);},RenameMenu:function(currTitle,successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuRename.aspx",{_currTitle:currTitle,_type:1},successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.MenuRename,AR.Analytics.Event.Start,(AR.VisitorInfo.IsSupportingMember())?AR.Analytics.Action.Source.MPFullMode:AR.Analytics.Action.Source.MPDemoMode,AR.Analytics.Action.Type.MenuRename,AR.Analytics.Action.Item.MenuPersonal);},RenameMeal:function(currTitle,successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuRename.aspx",{_currTitle:currTitle,_type:2},successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.MealRename,AR.Analytics.Event.Start,(AR.VisitorInfo.IsSupportingMember())?AR.Analytics.Action.Source.MPFullMode:AR.Analytics.Action.Source.MPDemoMode,AR.Analytics.Action.Type.MealRename,AR.Analytics.Action.Item.MenuPersonal);},SaveAs:function(currTitle,successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuSaveAs.aspx",{_currTitle:currTitle},successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.MenuSaveAs,AR.Analytics.Event.Start,(AR.VisitorInfo.IsSupportingMember())?AR.Analytics.Action.Source.MPFullMode:AR.Analytics.Action.Source.MPDemoMode,AR.Analytics.Action.Type.MenuSaveAs,AR.Analytics.Action.Item.MenuPersonal);},ShareMenu:function(isShared,successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuShare.aspx",{_isShared:isShared},successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.MenuShare,AR.Analytics.Event.Start,(AR.VisitorInfo.IsSupportingMember())?AR.Analytics.Action.Source.MPFullMode:AR.Analytics.Action.Source.MPDemoMode,AR.Analytics.Action.Type.MenuShare,AR.Analytics.Action.Item.MenuPersonal);},UnsavedWork:function(successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuUnsavedWork.aspx",null,successCallback,errorCallback);AR.Analytics.RecordLayerOpen(AR.Analytics.Action.LayerName.UnsavedWork,'');},CreateNewMenu:function(successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuCreate.aspx",null,successCallback,errorCallback);},CreateNewShoppingList:function(suggestedTitle,currentListNames,successCallback,errorCallback){this.Launch("~/My/ShoppingList/Controls/Dialogs/CreateShoppingList.aspx",{_suggestedTitle:suggestedTitle,_currentListNames:currentListNames},successCallback,errorCallback);},DeleteMenu:function(savedItemID,menuTitle,actionSource,successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuDelete.aspx",{_savedItemID:savedItemID,_menuTitle:menuTitle},successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.MenuDelete,AR.Analytics.Event.Start,actionSource,AR.Analytics.Action.Type.MenuDelete,AR.Analytics.Action.Item.MenuPersonal);},MembershipProductSelection:function(featureType,linkName){this.Launch("~/Membership/Controls/SKU/ProductSelectionDialog.aspx?FeatureType="+featureType+"&p34="+linkName);},NewMenuAlertPitch:function(successCallback,errorCallback){this.Launch("~/My/Menus/Controls/Dialogs/MenuAlertEmailPrompt.aspx",null,successCallback,errorCallback);},AddFolder:function(successCallback,errorCallback){this.Launch("~/My/Controls/Dialogs/FolderAdd.aspx",null,successCallback,errorCallback);AR.Analytics.RecordAction(AR.Analytics.Event.Start,AR.Analytics.Action.Source.RecipeBox,AR.Analytics.Action.Type.FolderAdd);},MailRecipe:function(recipeID,userID,merchDate,sharedItemID,sharedItemType,sharedItemTypeEnumDescription,biSource,biType,isBranded,successCallback,errorCallback){this.Launch("~/Recipe-Tools/Controls/Dialogs/EmailRecipe.aspx",{_recipeID:recipeID,_userID:userID,_merchDate:merchDate,_sharedItemID:sharedItemID,_sharedItemType:sharedItemType},successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction((isBranded)?AR.Analytics.Action.LayerName.EmailRecipeBranded:AR.Analytics.Action.LayerName.EmailRecipe,AR.Analytics.Event.Start,biSource,biType,sharedItemTypeEnumDescription,recipeID);},MailBlogPost:function(blogPostID,successCallback,errorCallback){this.Launch("~/My/Shared/Blogs/Controls/Dialogs/EmailBlogPost.aspx",{_blogPostID:blogPostID},successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.EmailBlog,AR.Analytics.Event.Start,AR.Analytics.Action.Source.BlogPost,AR.Analytics.Action.Type.EmailBlog,'');},MailShoppingList:function(shoppingListID,userID,merchDate,shouldPurgeMerch,successCallback,errorCallback){this.Launch("~/Recipe-Tools/Controls/Dialogs/EmailShoppingList.aspx",{_shoppingListID:shoppingListID,_userID:userID,merchDate:merchDate,_shouldPurgeMerch:shouldPurgeMerch},successCallback,errorCallback);AR.Analytics.RecordLayerOpenAction(AR.Analytics.Action.LayerName.EmailShoppingList,AR.Analytics.Event.Start,AR.Analytics.Action.Source.ShoppingList,AR.Analytics.Action.Type.EmailShoppingList,'');},SampleMenuPitch:function(successCallback,errorCallback,menuType){this.Launch("~/Controls/Menus/Dialogs/SampleMenuPitchDlg.aspx",{_menuType:menuType},successCallback,errorCallback);},MailVideo:function(videoID,isPartnerVideo,successCallback,errorCallback){this.Launch("~/Recipe-Tools/Controls/Dialogs/EmailVideo.aspx",{_videoID:videoID,_isPartnerVideo:isPartnerVideo},successCallback,errorCallback);},Launch:function(url,postData,successCallback,errorCallback){var that=this;errorCallback=errorCallback||this._defaultErrorHandler;url=this._clientUrlProvider.ResolveUrl(url);this._aspxDialog.StartPost(url,postData,successCallback,errorCallback);}};AR.SitePinning={CreateDynamicJumplists:function(){try{if(window.external.msIsSiteMode()){window.external.msSiteModeClearJumpList();window.external.msSiteModeCreateJumplist("Featured");window.external.msSiteModeAddJumpListItem("Recipe of the Day",AR.ClientUrlProvider.GetRecipeOfTheDayUrl(),"favicon.ico");window.external.msSiteModeAddJumpListItem("Video of the Day",AR.ClientUrlProvider.GetVideoOfTheDayUrl(),"favicon.ico");window.external.msSiteModeShowJumplist();};}catch(ex){};}};AR.DetailPage={SlideContent:function(hide,show,img,imgPath){img.attr('src',imgPath);hide.attr('display','block');show.attr('display','block');show.slideDown(400);hide.slideUp(200);},CurrentList:".review",SwitchLists:function(show){if(this.CurrentList==show)
return;var morereviews=$("a.link-more-reviews");var morecustom=$("a.link-custom-versions");if(show==='.review'){morereviews.show();morecustom.hide();}else if(show==='.custom'){morereviews.hide();morecustom.show();}else{morereviews.hide();morecustom.hide();}
$(show+"-block").slideDown(400,'swing');$(this.CurrentList+"-block").slideUp(400,'swing');$(this.CurrentList+"-link").removeClass("on");this.CurrentList=show;$(this.CurrentList+"-link").addClass("on");},MinusImageURL:'ar/myar/icons/icon-minus.gif',PlusImageURL:'ar/myar/icons/icon-plus.gif',CustomLoaded:false,SavedLoaded:false,MenusLoaded:false,ScrollAndOpenUserSaved:function(){if($(".detailpagemidpagetabs").offset()){var offset=$('.detailpagemidpagetabs').offset().top;$('html, body').animate({scrollTop:offset},'slow');if(!AR.DetailPage.SavedLoaded){AR.DetailPage.LoadSaved();}
AR.DetailPage.SwitchLists(".saved");}},ScrollAndOpenCustomVersions:function(){if($(".detailpagemidpagetabs").offset()){var offset=$('.detailpagemidpagetabs').offset().top;$('html, body').animate({scrollTop:offset},'slow');AR.DetailPage.OpenCustomVersions();}},OpenCustomVersions:function(){if(!AR.DetailPage.CustomLoaded){AR.DetailPage.LoadCustom();AR.DetailPage.SwitchLists(".custom");AR.DetailPage.TruncateCustom(300);}else{AR.DetailPage.SwitchLists(".custom");}},LoadCustomVersionsPage:function(){AR.DetailPage.LoadCustom();$(".custom-block").show();AR.DetailPage.TruncateCustom(450);},ScrollAndOpenMenus:function(){if($(".detailpagemidpagetabs").offset()){var offset=$('.detailpagemidpagetabs').offset().top;$('html, body').animate({scrollTop:offset},'slow');if(!AR.DetailPage.MenusLoaded){AR.DetailPage.LoadMenus();}
AR.DetailPage.SwitchLists(".menus");}},LoadMenus:function(){var container=$(".menu");var menus=AR.ServerSideData.Get("menusData");var menuDiv=$(".menus-block");var linkClass;if(container&&menus&&menuDiv){jQuery.each(menus,function(){var m=container.clone();$('#title',m).text(this.title);$('#title',m).attr('href',this.detailLink);linkClass=(this.isSample)?"titleLink":"titleLink linkRequiresSupportingMembership featureHintMenus";$('#title',m).attr('class',linkClass);$('#description',m).text(this.desc);$('.image-link',m).attr('href',this.imageLink);linkClass=(this.isSample)?"image-link":"image-link linkRequiresSupportingMembership featureHintMenus";$('.image-link',m).attr('class',linkClass);if(this.img!=''){$('#previewImage',m).attr('src',this.img);}
else{$('#previewImage',m).hide();}
$('#recipeCount',m).text(this.recipeCount);$('#mealCount',m).text(this.mealCount);if(this.tags!=''){$('#tags',m).text(this.tags);}
if(this.creatorLink!=''){$('#creatorLink',m).text(this.creatorName);$('#creatorLink',m).attr('href',this.creatorLink);$('#creatorName',m).hide();}
else{$('#creatorName',m).text(this.creatorName);$('#creatorLink',m).hide();}
if(this.isSample==false){$('#isSample',m).hide();}
else{$('#isSample',m).show();}
menuDiv.append(m.html());});}
if(AR.DialogLinker!=null){AR.DialogLinker.LinkMembershipDialogs($(".menu"));}
this.MenusLoaded=true;},LoadCustom:function(){var container=$(".customVersion");var customs=AR.ServerSideData.Get("customVersions");var customDiv=$(".custom-block");if(container&&customs&&customDiv){jQuery.each(customs,function(){var c=container.clone();if(this.isBP==true){$('#container',c).removeClass('blinged').addClass('branded');$('#iconSpan',c).hide();}
if(this.img!=''){$('#profileImage',c).attr('src',this.img);}
else{$('#profileImage',c).hide();}
$('#title',c).attr('href',this.detailLink).text(this.title);if(this.userLink!=''){$('#profileURL',c).attr('href',this.userLink).text(this.userName);$('#submitterName',c).hide();}
else{$('#profileURL',c).hide();$('#submitterName',c).text(this.userName);}
var tagContainer=$('#customrec-tags',c);if(this.CRTags.length>0){var that=this;$.each(this.CRTags,function(index,value){var toolTip=AR.DetailPage.GetCustomRecipeTagTooltip(value);var cssClass=AR.DetailPage.GetCustomRecipeTagCssClass(value);var image=$('<div>').attr('class',cssClass).attr('title',toolTip).html('&nbsp;');if(index!=0){var div=$('<div>').attr('class','tagdivider').html('&nbsp;')
tagContainer.prepend(div);}
tagContainer.prepend(image);});}
if(this.whatChanged!=''){$('#whatChanged',c).text(this.whatChanged);}else{$('.customchanges',c).hide();}
$('#description',c).text(this.desc);customDiv.append(c.html());});};this.CustomLoaded=true;},TruncateCustom:function(width){$('.customWhatChanged').textTruncate({width:width});},GetCustomRecipeTagCssClass:function(tagID){var ret="";switch(tagID){case 31:ret="spicy";break;case 32:ret="healthier";break;case 33:ret="veg";break;case 34:ret="quick";break;case 35:ret="budget";break;case 36:ret="restricted";break;case 37:ret="kid";break;case 38:ret="flair";break;}
return ret;},GetCustomRecipeTagTooltip:function(tagID){var ret="";switch(tagID){case 31:ret="Spicier";break;case 32:ret="Healthier";break;case 33:ret="Vegetarian / Vegan";break;case 34:ret="Quick & Easy";break;case 35:ret="Budget Friendly";break;case 36:ret="Restricted / Special Diet";break;case 37:ret="Kid Friendly";break;case 38:ret="Flair";break;}
return ret;},LoadSaved:function(){var container=$(".userWhoSaved");var users=AR.ServerSideData.Get("userWhoSaved");var customDiv=$(".saved-block");if(container&&users&&customDiv){jQuery.each(users,function(){var c=container.clone();$('#profileImage',c).attr('src',this.imgUrl);if(this.regionName&&this.regionName!=''){$('#region',c).attr('href',this.regionUrl).text(this.regionName);$('#country',c).attr('href',this.countryUrl).text(this.countryName);}
else{$('#savedLocation',c).hide();}
if(this.userUrl!=''){$('#profileURL',c).attr('href',this.userUrl).text(this.userName);$('#submitterName',c).hide();$('#prof',c).attr('href',this.userUrl);$('#profText',c).hide();$('#rb',c).attr('href',this.userUrl.replace('Profile.aspx','Recipes.aspx'));$('#rbText',c).hide();if(this.reviews=='true'){$('#review',c).attr('href',this.userUrl.replace('Profile.aspx','Reviews.aspx'));$('#revText',c).hide();}
else{$('#review',c).hide();$('#revText',c).show();}}
else{$('#profileURL',c).hide();$('#submitterName',c).text(this.userName);$('#rb',c).hide();$('#prof',c).hide();$('#review',c).hide();}
if(this.isBP==true){$('#container',c).removeClass('blinged').addClass('branded');$('#iconSpan',c).hide();$('#spanReviewContainer',c).hide();}
else if(this.isSupporting=='false'){$('.author-info',c).removeClass("blinged");$('#iconSpan',c).hide();}
$('#savedOn',c).text(this.saved);customDiv.append(c.html());});};this.SavedLoaded=true;},OnPhotoCountIncrease:function(){$('div.recipe-photos').css("display","block");var countSpan=$('span.userphotocount');var currentCount=parseInt(countSpan.text());if(currentCount!=NaN){currentCount=currentCount+1;}
countSpan.text(currentCount);countSpan.next('span').text(currentCount>1?" Photos":" Photo");},GetPhotoUploadHandler:function(typeSpecificID,itemType,imageTargetSelector,messageBoxSelector){return function(photoID,previewImage50x50,previewImage140x140){var onSuccess=function(){$(imageTargetSelector).attr("src",previewImage140x140);AR.DetailPage.OnPhotoCountIncrease();AR.PhotoCarousel.ClearCachedData();AR.MessageBox.ShowSuccess("Your photo has been saved.",messageBoxSelector);AR.Analytics.RecordAction(AR.Analytics.Event.Complete,AR.Analytics.Action.Source.RecipeBox,AR.Analytics.Action.Type.RecipeAddPhoto,AR.Analytics.Action.GetItem(itemType));};var onFailure=function(){AR.MessageBox.ShowFailure("There was a problem uploading your photo.",messageBoxSelector);};if(itemType!=AR.ItemType.Recipe){AR.ClientService.AddPhotoToSharedItem(typeSpecificID,photoID,function(response){if(response.ResponseCode==AR.ResponseCode.Success)
onSuccess();else
onFailure();});}
else{onSuccess();}};}};AR.DetailPage.MenuDetails={OnInit:function(){if(AR.IsMobileDevice()){this.WireUpMobileEvents();}},WireUpMobileEvents:function(){$('.recipe').removeClass("use_hover");$('.recipe').click(function(event){if(!$(this).is(".has_hover")){$('.recipe').removeClass("has_hover");$('.recipe').find('.MenusrecipeCTA').hide();$(this).addClass("has_hover");$(this).find('.MenusrecipeCTA').show();}
else{$(this).removeClass("has_hover");$(this).find('.MenusrecipeCTA').hide();}});},ToggleContent:function(content,trigger){if(content.is(':hidden')){content.slideDown(400);trigger.html('Hide Details');}
else{content.slideUp(200);trigger.html('See Details &#187;');}},ToggleNutritionContent:function(content,trigger,tagSpan){if(content.is(':hidden')){AR.Analytics.RecordCustomLinkClick(AR.Analytics.Action.CustomLinkClick.MenuNutritionExpand);AR.DetailPage.MenuDetails.ToggleContent(content,trigger);}
else{AR.Analytics.RecordCustomLinkClick(AR.Analytics.Action.CustomLinkClick.MenuNutritionCollapse);AR.DetailPage.MenuDetails.ToggleContent(content,trigger);}
if(tagSpan){if(tagSpan.is(':hidden')){tagSpan.show();}else{tagSpan.hide();}}},SetNutritionDetailsOnClick:function(mealID){var triggerLink=$('.menudetail-nutrition-trigger'+mealID);var contentDiv=$('.menudetail-nutrition-content'+mealID);var tagSpan=$('.menudetail-nutrition-powered-by-tag'+mealID);triggerLink.click(function(e){e.preventDefault();AR.DetailPage.MenuDetails.ToggleNutritionContent(contentDiv,triggerLink,tagSpan);});}};AR.DetailPage.RecipeTools={IsRecipe:function(){if(AR.ServerSideData.Data.IsRecipe==undefined){AR.ServerSideData.Data.IsRecipe=true;}
return AR.ServerSideData.Data.IsRecipe;},IsMenu:function(){if(AR.ServerSideData.Data.IsMenu==undefined){AR.ServerSideData.Data.IsMenu=false;}
return AR.ServerSideData.Data.IsMenu;},IsWebLink:function(){return AR.ServerSideData.Data.IsWebLink},IsWebReference:function(){return AR.ServerSideData.Data.IsWebReference},Slide:function(li,link,parent,useBordbot){if(li.is(':hidden')){$('img',link).attr('src',AR.ImageServer+AR.DetailPage.MinusImageURL);var source='none';if(link.hasClass("menu")){source=link.hasClass("RTSL")?AR.Analytics.Action.CustomLinkClick.MenuDetailActSLExpand:'none';}
if(link.hasClass("recipe")){source=link.hasClass("RTSL")?AR.Analytics.Action.CustomLinkClick.RecipeDetailSLExpand:'none';}
if(source!='none'){AR.Analytics.RecordCustomLinkClick(source);}
if(useBordbot){$(parent).removeClass('bordbot');}
li.slideDown(300);}
else{$('img',link).attr('src',AR.ImageServer+AR.DetailPage.PlusImageURL);var source='none';if(link.hasClass("menu")){source=link.hasClass("RTSL")?AR.Analytics.Action.CustomLinkClick.MenuDetailActSLCollapse:'none';}
if(link.hasClass("recipe")){source=link.hasClass("RTSL")?AR.Analytics.Action.CustomLinkClick.RecipeDetailSLCollapse:'none';}
if(source!='none'){AR.Analytics.RecordCustomLinkClick(source);}
li.slideUp(300,function(){if(useBordbot){$(parent).addClass('bordbot');}});}},AddToRB:function(folder,isOldDesign,callback){if(AR.VisitorInfo.IsLoggedIn()){var duration=10000;AR.Analytics.RecordAction(AR.Analytics.Event.Start,AR.Analytics.Action.Source.RecipePage,AR.Analytics.Action.Type.RecipeBoxAdd,AR.Analytics.Action.GetItem(AR.ServerSideData.Data.ItemType));var folderID=(folder)?folder.toString():'0';AR.ClientService.SaveToRecipeBox(AR.TypeSpecificID.toString(),AR.DetailPage.RecipeTools.IsRecipe(),AR.DetailPage.RecipeTools.IsMenu(),folderID,function(response){if(response.ResponseCode==AR.ResponseCode.Success){AR.MessageBox.ShowSuccess(response.Message,'#msgLabel',false,duration);AR.RBM.Add($('#itemTitle').text(),document.URL,AR.ServerSideData.Get('Item_RateAndReview_Rating'),isOldDesign);AR.Loader.Hide();AR.Analytics.RecordAction(AR.Analytics.Event.Complete,AR.Analytics.Action.Source.RecipePage,AR.Analytics.Action.Type.RecipeBoxAdd,AR.Analytics.Action.GetItem(AR.ServerSideData.Data.ItemType));}
else{AR.MessageBox.ShowFailure(response.Message,'#msgLabel',false,duration);if(AR.ShouldLogResponseCode(response.ResponseCode)){AR.LogErrorEx({IsRecipe:AR.LogEval("AR.DetailPage.RecipeTools.IsRecipe()"),FolderID:folderID},'detail-page.js','Error adding item to RecipeBox.');}}
if(folder){$('a.RTRB').trigger('click');}
if(callback)
callback();});}},AddToMyMenus:function(callback){if(AR.VisitorInfo.IsLoggedIn()){AR.Analytics.RecordCustomLinkClick(AR.Analytics.Action.CustomLinkClick.MenuDetailMenuAdd);AR.ClientService.SaveToRecipeBox(AR.TypeSpecificID.toString(),this.IsRecipe(),this.IsMenu(),0,function(response){if(response.ResponseCode==AR.ResponseCode.Success){AR.MessageBox.ShowSuccess(response.Message,'#msgLabel');AR.RBM.AddMenu($('.menuDetailTitle').text(),document.URL);AR.Loader.Hide();AR.Analytics.RecordAction(AR.Analytics.Event.Complete,AR.Analytics.Action.Source.MenuDetail,AR.Analytics.Action.Type.MyMenuAdd,AR.ServerSideData.Get('sharedItemType'));}
else{AR.MessageBox.ShowFailure(response.Message,'#msgLabel');if(AR.ShouldLogResponseCode(response.ResponseCode)){AR.LogErrorEx({IsMenu:AR.LogEval("AR.DetailPage.RecipeTools.IsMenu()"),FolderID:0},'detail-page.js','Error adding menu to MY Menus from menu detail page.');}}
if(callback)
callback();});}},AddItemToMenu:function(sharedItemID,createNewMenu){var an=AR.Analytics;if(AR.VisitorInfo.IsLoggedIn()){if(!AR.RBM.MenuExists(sharedItemID)){AR.RBM.IncrementMenuCount();}
var originalServingValue=$('.yield').text().toString().toLowerCase().replace(' servings','');var modifiedServingValue=$('.servings-amount').val();var servingValue=(modifiedServingValue&&(modifiedServingValue!=originalServingValue))?modifiedServingValue:originalServingValue;AR.ClientService.AddItemToMenu(AR.VisitorInfo._data._ID.toString(),sharedItemID,AR.TypeSpecificID.toString(),AR.ServerSideData.Data.ItemType,servingValue,function(response){if(response.ResponseCode==AR.ResponseCode.Success){AR.MessageBox.ShowSuccess(response.Message,'#msgLabel');AR.RBM.AddToMenu(response.Data,true);AR.Loader.Hide();var source=(AR.DetailPage.RecipeTools.IsMenu())?an.Action.Source.MenuDetail:(AR.DetailPage.RecipeTools.IsRecipe())?an.Action.Source.RecipePage:(AR.DetailPage.RecipeTools.IsWebLink())?an.Action.Source.WeblinkPage:an.Action.Source.ReferencePage;an.RecordAction(AR.Analytics.Event.Complete,source,an.Action.Type.MenuAdd,AR.ServerSideData.Get('sharedItemType'));}
else{AR.MessageBox.ShowFailure(response.Message,'#msgLabel');if(AR.ShouldLogResponseCode(response.ResponseCode)){AR.LogErrorEx({IsMenu:AR.LogEval("AR.DetailPage.RecipeTools.IsMenu()"),FolderID:0},'detail-page.js','Error adding item to menu from '+window.location.pathname);}}});if(!($(".menu-box-form").is(':hidden'))){$('a.RTMN').trigger('click');}}},AddToList:function(analyticsLoggingInProgress,listSelector,servingsSelector,isOldDesign,callback){if(listSelector==null||listSelector==undefined){listSelector='.shopping-list option:selected';}
if(servingsSelector==null||servingsSelector==undefined){servingsSelector='.servings-amount';}
if(AR.VisitorInfo.IsLoggedIn()){var messageDuration=10000;if(analyticsLoggingInProgress=='false'){var source=(AR.DetailPage.RecipeTools.IsMenu())?AR.Analytics.Action.Source.MenuDetail:AR.Analytics.Action.Source.RecipePage;var type=(AR.DetailPage.RecipeTools.IsMenu())?AR.Analytics.Action.Type.ShoppingListAddMenu:AR.Analytics.Action.Type.ShoppingListAddRecipe;var actionItem=(AR.DetailPage.RecipeTools.IsMenu())?AR.ServerSideData.Get("sharedItemType"):AR.Analytics.Action.GetItem(AR.ServerSideData.Data.ItemType);if(AR.DetailPage.RecipeTools.IsMenu()){AR.Analytics.RecordCustomLinkClick(AR.Analytics.Action.CustomLinkClick.ShoppingListAddMenu);}}
var list=$(listSelector);var servings=$(servingsSelector).val();AR.ClientService.AddToShoppingList(list.val(),AR.ServerSideData.Data.IsRecipe,AR.ServerSideData.Data.IsMenu,AR.TypeSpecificID.toString(),(servings)?servings:0,function(response){if(response.ResponseCode==AR.ResponseCode.Success){AR.MessageBox.ShowSuccess(response.Message,'#msgLabel',false,messageDuration);if(analyticsLoggingInProgress=='false'){AR.Analytics.SendBeacon({"pev2":"Add Recipe to Shopping List","prop34":"Save:ShoppingList","eVar7":source,"eVar8":type,"eVar9":actionItem,"linkTrackVars":"eVar7,eVar8,eVar9,prop34,events","events":"event9,event10","linkTrackEvents":"event9,event10"});}
AR.RBM.AddToList(list.val(),list.text(),isOldDesign);AR.Loader.Hide();}
else{AR.MessageBox.ShowFailure(response.Message,'#msgLabel',false,messageDuration);if(AR.ShouldLogResponseCode(response.ResponseCode)){AR.LogErrorEx({IsRecipe:AR.LogEval("AR.DetailPage.RecipeTools.IsRecipe()"),Servings:servings,ShoppingListID:AR.LogEval("$('.shopping-list').val()")},'AddToList','Error adding item to Shopping List.');}
AR.Loader.Hide();}
if(list&&!($(".shopping-list-form").is(':hidden'))){AR.DetailPage.RecipeTools.Slide($('.shopping-list-form'),$('a.RTSL'),'#liAddToSL',true);}
if(callback)
callback();});}}};AR.DetailPage.Servings={MinServings:1,MaxServings:300,ServingsWarningMsg:'You must enter a number between 1 and 300.',ValidateServings:function(){var reg_isinteger=/^\d+$/;var servings=$('.servings-amount').val();if(!reg_isinteger.test(servings)){return false;}else{return(servings>=this.MinServings&&servings<=this.MaxServings);}}};$(document).ready(function(){$("a.nutritional-information").click(function(e){e.preventDefault();if($("#nutri-info").is(":hidden")){AR.DetailPage.SlideContent($("p.nutritional-information"),$("#nutri-info"),$('img.nutritional-information'),AR.ImageServer+AR.DetailPage.MinusImageURL);}
else{AR.DetailPage.SlideContent($("#nutri-info"),$("p.nutritional-information"),$('img.nutritional-information'),AR.ImageServer+AR.DetailPage.PlusImageURL);}});$(".listItemReview").click(function(e){e.preventDefault();if($(".listItemReviewFull",$(this).parent().parent()).is(":hidden")){AR.DetailPage.SlideContent($(".listItemReviewMini",$(this).parent().parent()),$(".listItemReviewFull",$(this).parent().parent()),$('.listItemReviewImage',$(this)),AR.ImageServer+AR.DetailPage.MinusImageURL);$('.listItemReviewImage',$(this)).attr("alt","show less");$('.listItemReviewImage',$(this)).attr("title","show less");}
else{AR.DetailPage.SlideContent($(".listItemReviewFull",$(this).parent().parent()),$(".listItemReviewMini",$(this).parent().parent()),$('.listItemReviewImage',$(this)),AR.ImageServer+AR.DetailPage.PlusImageURL);$('.listItemReviewImage',$(this)).attr("alt","view full review");$('.listItemReviewImage',$(this)).attr("title","view full review");}});$(".review-link").click(function(e){e.preventDefault();AR.DetailPage.SwitchLists(".review");});$(".custom-link").click(function(e){e.preventDefault();AR.DetailPage.OpenCustomVersions();});$(".menus-link").click(function(e){e.preventDefault();if(!AR.DetailPage.MenusLoaded){AR.DetailPage.LoadMenus();}
AR.DetailPage.SwitchLists(".menus");});$(".saved-link").click(function(e){e.preventDefault();if(!AR.DetailPage.SavedLoaded){AR.DetailPage.LoadSaved();}
AR.DetailPage.SwitchLists(".saved");});var featureHintFromItemType=AR.DetailPage.RecipeTools.IsWebLink()?'featureHintWeblinkAddToMenu':AR.DetailPage.RecipeTools.IsWebReference()?'featureHintReferenceAddToMenu':'featureHintRecipeAddToMenu';$("a.RTMN").addClass(featureHintFromItemType);$('.userSaved').click(function(e){e.preventDefault();AR.DetailPage.ScrollAndOpenUserSaved();});$('.menu').click(function(e){e.preventDefault();AR.DetailPage.ScrollAndOpenMenus();});$("a.RTRB").click(function(e){e.preventDefault();AR.DetailPage.RecipeTools.Slide($('.recipe-box-form'),$('a.RTRB'),'#liAddToRB',true);});$("a.RTSL").click(function(e){e.preventDefault();AR.DetailPage.RecipeTools.Slide($('.shopping-list-form'),$('a.RTSL'),'#liAddToSL',true);});$("a.RTSE").click(function(e){e.preventDefault();AR.DetailPage.RecipeTools.Slide($('.share-email-form'),$('a.RTSE'),'#liEmail',false);});$("a.RTMN").click(function(e){e.preventDefault();if($('.menu-box-form').is(':hidden')){var BI=AR.Analytics;var itemType=AR.ServerSideData.Get("sharedItemType");var source=(AR.DetailPage.RecipeTools.IsMenu())?BI.Action.Source.MenuDetail:(AR.DetailPage.RecipeTools.IsWebLink())?BI.Action.Source.WeblinkPage:(AR.DetailPage.RecipeTools.IsWebReference())?BI.Action.Source.ReferencePage:BI.Action.Source.RecipePage;BI.RecordAction(BI.Event.Start,source,BI.Action.Type.MenuAdd,itemType);}
AR.DetailPage.RecipeTools.Slide($('.menu-box-form'),$('a.RTMN'),'#liAddToMyMenu',true);});$("a.share-email").click(function(e){e.preventDefault();AR.DetailPage.RecipeTools.Slide($('.share-email-form'),$('a.RTSE'),'#liEmail',false);});$('#addToRB').click(function(){AR.DetailPage.RecipeTools.AddToRB();});$('.add-item-to-default-shopping-list').click(function(){AR.DetailPage.RecipeTools.AddToList('false');});$(".toolbox-add-to-my-menu").click(function(e){e.preventDefault();AR.DetailPage.RecipeTools.AddToMyMenus();});$('.menu-add-item-button').click(function(e){e.preventDefault();AR.DetailPage.RecipeTools.AddItemToMenu($('.ddlSelectedMenuItem').val(),false);});$('.add-item-to-recipe-box').click(function(){AR.DetailPage.RecipeTools.AddToRB($('.fold-list').val());});$('.add-item-to-shopping-list').click(function(){AR.DetailPage.RecipeTools.AddToList('false');});$("a.RT-recipe-send-to-a-friend").click(function(e){e.preventDefault();var BI=AR.Analytics;var data=$("a.RT-recipe-send-to-a-friend");var isBrandedEmail=data.attr("data-recipe-detail-brandedemail");var itemType=(data.attr("data-recipe-detail-shared-item-type"))?data.attr("data-recipe-detail-shared-item-type"):'';var recipeID=(data.attr("data-recipe-detail-recipe-id"))?data.attr("data-recipe-detail-recipe-id"):'0';var merchDate=(data.attr("data-recipe-detail-merchdate"))?data.attr("data-recipe-detail-merchdate"):'';var biSource=(AR.DetailPage.RecipeTools.IsWebLink())?BI.Action.Source.WeblinkPage:(AR.DetailPage.RecipeTools.IsWebReference())?BI.Action.Source.ReferencePage:BI.Action.Source.RecipePage;var biType=(AR.DetailPage.RecipeTools.IsWebLink())?BI.Action.Type.EmailWeblink:(AR.DetailPage.RecipeTools.IsWebReference())?BI.Action.Type.EmailReference:(isBrandedEmail)?BI.Action.Type.EmailRecipeBranded:BI.Action.Type.EmailRecipe;var resultMsgSelector=(itemType=="Recipe")?null:"#msgLabel";if(isBrandedEmail){AR.Analytics.RecordActionOption(AR.TypeSpecificID,BI.Action.Type.EmailRecipeBranded);}
ioc.Load("_dialogLauncher").MailRecipe(recipeID,AR.VisitorInfo.VisitorID(),merchDate,AR.TypeSpecificID,itemType,AR.ServerSideData.Get("sharedItemType"),biSource,biType,isBrandedEmail,function(result){if(result){BI.RecordAction(BI.Event.Complete,biSource,biType,AR.ServerSideData.Get("sharedItemType"),recipeID);if(result!==true){window.location.href=result;}
AR.MessageBox.ShowSuccess("Recipe successfully emailed.",resultMsgSelector,false);}
else{AR.MessageBox.ShowFailure("An unexpected error occured while attempting to email this recipe.",resultMsgSelector,false);}},function(){AR.MessageBox.ShowFailure("An unexpected error occured while attempting to email this recipe.",resultMsgSelector,false);});});$("a.emailVid").click(function(e){e.preventDefault();var videoResultMessage=$('#msgClientPage');var data=$("a.emailVid");var isPartnerVideo=(data.attr("data-video-detail-isPartnerVideo"))?data.attr("data-video-detail-isPartnerVideo"):"false";ioc.Load("_dialogLauncher").MailVideo(AR.TypeSpecificID,isPartnerVideo,function(result){if(result){AR.MessageBox.ShowSuccess("Video successfully emailed.",videoResultMessage,false);}
else{AR.MessageBox.ShowFailure("An unexpected error occured while attempting to email this video.",videoResultMessage,false);}},function(){AR.MessageBox.ShowFailure("An unexpected error occured while attempting to email this video.",videoResultMessage,false);});});$('.create-shopping-list-from-detail-page').click(function(e){var BI=AR.Analytics;var itemType=AR.ServerSideData.Get("sharedItemType");var source=(AR.DetailPage.RecipeTools.IsMenu())?BI.Action.Source.MenuDetail:(AR.DetailPage.RecipeTools.IsRecipe())?BI.Action.Source.RecipePage:(AR.DetailPage.RecipeTools.IsWebLink())?BI.Action.Source.WeblinkPage:BI.Action.Source.ReferencePage;BI.RecordLayerOpenAction(BI.Action.LayerName.ShoppingListCreate,BI.Event.Start,source,BI.Action.Type.ShoppingListCreate,itemType);ioc.Load("_dialogLauncher").CreateNewShoppingList(AR.ServerSideData.Get("currentItemTitle"),AR.ServerSideData.Get("currentShoppingListTitles"),function(result){BI.RecordAction(AR.Analytics.Event.Complete,source,BI.Action.Type.ShoppingListCreate,itemType);$('.ddlSelectedShoppingListItem').append($('<option></option>').val(result.substring(result.indexOf("|^|")+3)).html(result.substring(0,result.indexOf("|^|"))).attr("selected","selected"));AR.DetailPage.RecipeTools.AddToList('true');if(!($(".shopping-list-form").is(':hidden'))){AR.DetailPage.RecipeTools.Slide($('.shopping-list-form'),$('a.RTSL'),'#liAddToSL',true);}
AR.Loader.Hide();},function(){AR.MessageBox.ShowFailure("Sorry, your new shopping list could not be created.",null,false);AR.Loader.Hide();});});$('.create-new-menu').click(function(e){var an=AR.Analytics;var source=(AR.DetailPage.RecipeTools.IsMenu())?an.Action.Source.MenuDetail:(AR.DetailPage.RecipeTools.IsWebLink())?an.Action.Source.WeblinkPage:(AR.DetailPage.RecipeTools.IsWebReference())?an.Action.Source.ReferencePage:an.Action.Source.RecipePage;an.RecordLayerOpenAction(AR.Analytics.Action.LayerName.MenuCreate,AR.Analytics.Event.Start,source,an.Action.Type.MenuCreate,an.Action.Item.MenuPersonal);ioc.Load("_dialogLauncher").CreateNewMenu(function(result){an.RecordAction(AR.Analytics.Event.Complete,source,an.Action.Type.MenuCreate,an.Action.Item.MenuPersonal);AR.DetailPage.RecipeTools.AddItemToMenu(result.substring(result.indexOf(",")+1),true);$('.ddlSelectedMenuItem').append($('<option></option>').val(result.substring(result.indexOf(",")+1)).html(result.substring(0,result.indexOf(","))));},function(){AR.MessageBox.ShowFailure("Sorry, but your new menu could not be created.",null,false);});});$('.calculate-servings').click(function(event){if(!AR.DetailPage.Servings.ValidateServings()){event.preventDefault();$(".servings-amount").focus();AR.MessageBox.ShowWarning(AR.DetailPage.Servings.ServingsWarningMsg,null,false);}});$(".servings-amount").keydown(function(e){if(e.which==13){if(!AR.DetailPage.Servings.ValidateServings()){e.preventDefault();e.stopPropagation();$(".servings-amount").focus();AR.MessageBox.ShowWarning(AR.DetailPage.Servings.ServingsWarningMsg,null,false);}
else{var lnkbtn=$(".calculate-servings");var href=lnkbtn.attr("href");if(typeof(href)!="undefined"&&href.substr(0,11)=="javascript:"){new Function(href.substr(11)).call(lnkbtn.eq(0));}}}}),$('.servings-amount').val($('.servings-hdnservings').val());$('.menudetail-sl-info').click(function(event){event.preventDefault();var val=$('.menudetail-sl-content').is(':hidden')?AR.Analytics.Action.CustomLinkClick.MenuDetailSLExpand:AR.Analytics.Action.CustomLinkClick.MenuDetailSLCollapse;AR.Analytics.RecordCustomLinkClick(val);AR.DetailPage.MenuDetails.ToggleContent($('.menudetail-sl-content'),$('.menudetail-sl-info'));});});AR.PhotoCarousel={Config:{PageSize:10,MessageBoxSelector:"#msgLabel",ErrorLoadingMessage:"Sorry, there was an error loading the current photo."},Options:{ContainerSelector:".modal-recipe-photos"},Data:{ItemID:0,IsRecipe:false,CurrentPhotoIndex:0,TotalRecords:0,Photos:{}},GetCurrentPageNumber:function(){return this.GetPageNumber(AR.PhotoCarousel.Data.CurrentPhotoIndex);},GetIsCurrentPage:function(pageNumber){return(pageNumber==this.GetCurrentPageNumber());},GetPreviousPhotoIndex:function(){return(AR.PhotoCarousel.Data.CurrentPhotoIndex==0)?(AR.PhotoCarousel.Data.TotalRecords-1):(AR.PhotoCarousel.Data.CurrentPhotoIndex-1);},GetNextPhotoIndex:function(){return(AR.PhotoCarousel.Data.CurrentPhotoIndex==(AR.PhotoCarousel.Data.TotalRecords-1))?0:(AR.PhotoCarousel.Data.CurrentPhotoIndex+1);},GetPageNumber:function(photoIndex){return Math.ceil((photoIndex+1)/AR.PhotoCarousel.Config.PageSize);},LoadLayer:function(){var photoIndex=AR.PhotoCarousel.Data.CurrentPhotoIndex;if(AR.PhotoCarousel.Data.Photos[photoIndex]){AR.PhotoCarousel.SetContent(AR.PhotoCarousel.Data.Photos[photoIndex]);}
else{AR.PhotoCarousel.GetDataFromService(this.GetCurrentPageNumber());}
AR.PhotoCarousel.PreLoadIndexData(this.GetNextPhotoIndex());AR.PhotoCarousel.PreLoadIndexData(this.GetPreviousPhotoIndex());},SetLinkOrSpan:function(spanSelector,linkSelector,text,url){if(url){$(spanSelector).hide();$(linkSelector).show().attr("href",AR.ClientUrlProvider.ResolveUrl(url)).text(text);}
else{$(spanSelector).show().text(text);$(linkSelector).hide();}},SetContent:function(photo){if(photo){if(AR.PhotoCarousel.Data.TotalRecords>1){$("#spnPageNumber").text(AR.PhotoCarousel.Data.CurrentPhotoIndex+1);$("#spnPageCount").text(AR.PhotoCarousel.Data.TotalRecords);$(".photo-scroll-buttons").show();$("#jqViewAllDiv").show();$("#jqViewAllLink").attr("href",AR.PhotoCarousel.Data.PhotoGalleryUrl);}else{$(".photo-scroll-buttons").hide();$("#jqViewAllDiv").hide();}
var cookBaseUrl=(photo.User.CustomUrlPiece)?AR.ClientUrlProvider.ResolveUrl("~/Cook/"+photo.User.CustomUrlPiece):AR.ClientUrlProvider.ResolveUrl("~/Cook/"+photo.User.ObfuscatedUserID);var thumbnailUrl=photo.User.ProfileImageUrl.replace("/userphotos/140x140/","/userphotos/50x50/");$("#jqPhotoTitleSpan").text(photo.Title);if(photo.Caption.toLowerCase()==photo.Title.toLowerCase()){$("#jqPhotoCaptionSpan").hide();}else{$("#jqPhotoCaptionSpan").show();}
$("#jqPhotoCaptionSpan").text(photo.Caption);$("#jqPhotoDateSpan").text(photo.Date);var name=Encoder.htmlDecode(photo.User.DisplayName);$("#jqPhotographerDisplayName").text(name).textTruncate({width:220});$("[data-bind='display-name']").text(name).textTruncate({width:220});;if(photo.User.HasHomePage){$("#jqPhotographerProfileSpan").hide();$("#jqPhotographerProfileLink").show().attr("href",cookBaseUrl);}else{$("#jqPhotographerProfileSpan").show();$("#jqPhotographerProfileLink").hide();}
if(photo.User.ProfileImageUrl==""){$("#jqPhotographerThumbnailImage").show().attr("src","http://images.media-allrecipes.com/mobile/allrecipes/images/weeble.png");}
else{var theUrl=(thumbnailUrl.substring(0,4)=='http')?thumbnailUrl:AR.ClientUrlProvider.ResolveImageUrl(thumbnailUrl);$("#jqPhotographerThumbnailImage").show().attr("src",theUrl);}
$("#jqPhotographerBadgeDiv").removeClass("blinged");$("#jqPhotographerStarLink").hide();if(photo.User.IsSupporting){$("#jqPhotographerBadgeDiv").addClass("blinged");$("#jqPhotographerStarLink").show().attr("href",AR.ClientUrlProvider.ResolveUrl("~/SupportingMembership/Info.aspx?ect=21"));}
$("#jqPhotographerAboutMe").text(photo.User.AboutMe);$("#jqPhotographerPhotoCount").text(photo.User.PhotoCount);$("#jqPhotosText").text((photo.User.PhotoCount===1)?"Photo":"Photos");$("#jqPhotographerProfileLink").attr("href",cookBaseUrl+"/Profile.aspx");if(photo.User.RecipeCount>0){$("#jqPhotographerNoRecipesSpan").hide();$("#jqPhotographerRecipesLink").show().attr("href",cookBaseUrl+"/Recipes.aspx");}
else{$("#jqPhotographerRecipesLink").hide();$("#jqPhotographerNoRecipesSpan").show();}
var cookPhotosUrl=cookBaseUrl+"/Photos.aspx";$("#jqPhotographerPhotosLink").attr("href",cookPhotosUrl);$("#jqPhotographerPhotoCountContainer").click(function(){window.location=cookPhotosUrl;});if(photo.User.HomeTown){$(".home-town-modal").show();AR.PhotoCarousel.SetLinkOrSpan("#jqPhotographerHomeTownCitySpan","#jqPhotographerHomeTownCityLink",photo.User.HomeTown.City.Text,photo.User.HomeTown.City.URI);AR.PhotoCarousel.SetLinkOrSpan("#jqPhotographerHomeTownStateSpan","#jqPhotographerHomeTownStateLink",photo.User.HomeTown.State.Text,photo.User.HomeTown.State.URI);AR.PhotoCarousel.SetLinkOrSpan("#jqPhotographerHomeTownCountrySpan","#jqPhotographerHomeTownCountryLink",photo.User.HomeTown.Country.Text,photo.User.HomeTown.Country.URI);}
else{$(".home-town-modal").hide();}
if(photo.User.LivingIn){$(".living-in-modal").show();AR.PhotoCarousel.SetLinkOrSpan("#jqPhotographerLivingInCitySpan","#jqPhotographerLivingInCityLink",photo.User.LivingIn.City.Text,photo.User.LivingIn.City.URI);AR.PhotoCarousel.SetLinkOrSpan("#jqPhotographerLivingInStateSpan","#jqPhotographerLivingInStateLink",photo.User.LivingIn.State.Text,photo.User.LivingIn.State.URI);AR.PhotoCarousel.SetLinkOrSpan("#jqPhotographerLivingInCountrySpan","#jqPhotographerLivingInCountryLink",photo.User.LivingIn.Country.Text,photo.User.LivingIn.Country.URI);}
else{$(".living-in-modal").hide();}
if(photo.User.IsBrandedProfile){$("#jqPhotoLinks").hide();$("#jqCookingLevel").hide();$("#jqLivingIn").hide();$("jqPhotographerStarLink").hide();$("#jqSupportingMemberIconSpan").hide();$("#jqHomeTownLabel").text("Headquarters:");$("#jqPhotographerLabel").text("Photo By:");if(photo.User.IsSupporting)$("#jqPhotographerBadgeDiv").removeClass("blinged");$("#jqPhotographerBadgeDiv").addClass("branded");}
else{$("#jqPhotographerBadgeDiv").removeClass("branded");}
AR.PhotoCarousel.PreLoadImage(photo);AR.PhotoCarousel.PreLoadImage(AR.PhotoCarousel.Data.Photos[AR.PhotoCarousel.GetNextPhotoIndex()]);AR.PhotoCarousel.PreLoadImage(AR.PhotoCarousel.Data.Photos[AR.PhotoCarousel.GetPreviousPhotoIndex()]);var pos=AR.PhotoCarousel.Data.CurrentPhotoIndex+1;$("#jqAdIframe").attr("src",AR.Ads.GenerateIFrameURL(pos,"300x250","photo"));$("#imgPhotoImage").attr("src",photo.Image.src);$('iframe','#jqPinterstPhotoLayerSpan').remove();var href='http://allrecipes.com'+window.location.pathname;if(window.location.pathname.toLowerCase().indexOf("detail")==-1){if(window.location.pathname.lastIndexOf('/')==window.location.pathname.length-1){href=href+"detail.aspx";}else{href=href+"/detail.aspx";}}
$('<a>',{id:'newPinLink',title:'Pin It',href:'http://pinterest.com/pin/create/button/?url='+href+'&description='+photo.Title+' Allrecipes.com&media='+photo.Image.src}).addClass('pin-it-button').appendTo('#jqPinterstPhotoLayerSpan');$.ajax({url:'http://assets.pinterest.com/js/pinit.js',dataType:'script',cache:true});if(!$(AR.PhotoCarousel.Options.ContainerSelector).is(":visible")){AR.Dialog.ShowLayer(AR.PhotoCarousel.Options.ContainerSelector);}
var descDiv=$("#jqDescription");var parentHeight=$(AR.PhotoCarousel.Options.ContainerSelector).find(".right-column").innerHeight();descDiv.height(parentHeight-$("#jqPhotographerBadgeDiv").outerHeight()-34);if(descDiv.attr("scrollHeight")>descDiv.outerHeight()){descDiv.css("border",'1px solid #cccccc');}else{descDiv.css("border",'');}
descDiv.scrollTop(0);$("#jqPhotographerAboutMe").textTruncate({multiline:true,height:71,width:200,tooltip:false})
$(".modal-recipe-photo-carousel",$("#zoneRecipe")).find(".modal-header").textTruncate({width:690});}},PreLoadIndexData:function(index){var pageNumber=this.GetPageNumber(index);if(!AR.PhotoCarousel.GetIsCurrentPage(pageNumber)&&!AR.PhotoCarousel.Data.Photos[index]){AR.PhotoCarousel.GetDataFromService(pageNumber);}},PreLoadImage:function(photo){if(photo&&!photo.Image){if((new RegExp("https?://")).test(photo.PhotoUrl)!=true){photo.PhotoUrl=AR.ImageServer+photo.PhotoUrl;}
photo.Image=new Image(250,250);photo.Image.src=photo.PhotoUrl;}},GetDataFromService:function(pageNumber){if(AR.PhotoCarousel.GetIsCurrentPage(pageNumber)){AR.Cursor.SetWait();}
AR.ClientService.SuppressNextLoaderChange();AR.ClientService.GetPhotosPaged(AR.PhotoCarousel.Data.ItemID,AR.PhotoCarousel.Data.IsRecipe,pageNumber,AR.PhotoCarousel.Config.PageSize,AR.PhotoCarousel.Events.GetPhotosPaged_callback);},StorePageData:function(photos,pageNumber){if(photos){var index=0;for(i=0;i<photos.length;i++){index=((pageNumber-1)*AR.PhotoCarousel.Config.PageSize)+i;AR.PhotoCarousel.Data.Photos[index]=photos[i];}
if(pageNumber!=AR.PhotoCarousel.GetCurrentPageNumber()){index=((pageNumber-1)*AR.PhotoCarousel.Config.PageSize);AR.PhotoCarousel.Data.Photos[index];index=((pageNumber-1)*AR.PhotoCarousel.Config.PageSize)+photos.length;AR.PhotoCarousel.Data.Photos[index];}}},ClearCachedData:function(){AR.PhotoCarousel.Data.ItemID=null;AR.PhotoCarousel.Data.IsRecipe=null;AR.PhotoCarousel.Data.TotalRecords=0;AR.PhotoCarousel.Data.Photos=null;},OpenCarousel:function(itemID,isRecipe,photoGalleryUrl){AR.PhotoCarousel.Data.CurrentPhotoIndex=0;if(AR.PhotoCarousel.Data.ItemID!=itemID||AR.PhotoCarousel.Data.IsRecipe!=isRecipe||AR.PhotoCarousel.Data.Photos==null){AR.PhotoCarousel.ClearCachedData();AR.PhotoCarousel.Data.ItemID=itemID;AR.PhotoCarousel.Data.IsRecipe=isRecipe;AR.PhotoCarousel.Data.PhotoGalleryUrl=photoGalleryUrl;AR.PhotoCarousel.GetDataFromService(1);}
else{AR.PhotoCarousel.LoadLayer();}},Events:{Open_onClick:function(){var serverItem=AR.ServerSideData.GetByDom(this);if(serverItem){AR.PhotoCarousel.OpenCarousel(serverItem.itemID,serverItem.isRecipe,serverItem.photoGalleryUrl);AR.PhotoCarousel.RecordView(false);}},PreviousPhoto_onClick:function(e){e.preventDefault();AR.PhotoCarousel.Data.CurrentPhotoIndex=AR.PhotoCarousel.GetPreviousPhotoIndex();AR.PhotoCarousel.RecordView(true);AR.PhotoCarousel.LoadLayer();},NextPhoto_onClick:function(e){e.preventDefault();AR.PhotoCarousel.Data.CurrentPhotoIndex=AR.PhotoCarousel.GetNextPhotoIndex();AR.PhotoCarousel.RecordView(true);AR.PhotoCarousel.LoadLayer();},ViewAll_onClick:function(e){AR.Analytics.RecordInternalSource(AR.Analytics.Action.LinkName.RecipePhotoLayerViewAll);},GetPhotosPaged_callback:function(response){var fatalError=false;var errorMessage="";var shouldLogError=AR.ShouldLogResponseCode(response.ResponseCode);if(response.ResponseCode==AR.ResponseCode.Success){var isCurrentPage=response.Data.PageNumber==AR.PhotoCarousel.GetCurrentPageNumber();AR.PhotoCarousel.Data.TotalRecords=response.Data.TotalRecords;if(AR.PhotoCarousel.Data.Photos==null){AR.PhotoCarousel.Data.Photos=new Array(response.Data.TotalRecords);}
if(response.Data.PageNumber>0&&response.Data.Items.length>0){AR.PhotoCarousel.StorePageData(response.Data.Items,response.Data.PageNumber);if(isCurrentPage){AR.PhotoCarousel.LoadLayer();}}
else{fatalError=true;shouldLogError=true;}}
else{fatalError=true;}
if(fatalError){AR.Dialog.CloseModalBox();AR.MessageBox.ShowFailure(AR.PhotoCarousel.Config.ErrorLoadingMessage,AR.PhotoCarousel.Config.MessageBoxSelector);if(shouldLogError){AR.LogErrorEx({ItemID:AR.LogEval("AR.PhotoCarousel.Data.ItemID"),IsRecipe:AR.LogEval("AR.PhotoCarousel.Data.IsRecipe")},"PhotoCarousel","Error in GetPhotosPaged_onSuccess.");}}
AR.Cursor.SetDefault();}},Initialize:function(){$(".open_modal-recipe-photos").click(this.Events.Open_onClick);$("#lnkNextPhoto").click(this.Events.NextPhoto_onClick);$("#lnkPreviousPhoto").click(this.Events.PreviousPhoto_onClick);$("#jqViewAllLink").click(this.Events.ViewAll_onClick);if(arguments.length>0){AR.PhotoCarousel.Options.ContainerSelector=arguments[0];}},RecordView:function(pageTurn){AR.Analytics.RecordPageView({pageName:"/recipe/"+AR.FriendlyName+"/photo-gallery-layer",channel:"Recipes",events:"event1",prop6:AR.Analytics.Action.ContentType.RecipePhoto,prop9:1,prop24:(pageTurn?AR.Analytics.Action.LinkName.RecipePhotoLayerTurn:"Recipe Photo"),prop36:AR.Analytics.Action.LayerName.RecipePhoto});}};AR.ReviewCarousel={Config:{PageSize:10,MessageBoxSelector:"#msgLabel",ErrorLoadingMessage:"Sorry, there was an error loading the current review.",DynamicMode:true},Options:{LoadIndexFromDataAttribute:false,ContainerSelector:".modal-recipe-reviews"},Data:{ItemID:0,ItemType:0,CurrentReviewIndex:0,TotalRecords:0,Reviews:{}},RegisterData:function(itemID,itemType,count,reviews){this.Data.ItemID=itemID;this.Data.ItemType=itemType;if(count){this.Data.TotalRecords=count;}
if(reviews){this.Data.Reviews=reviews;this.Config.DynamicMode=true;this.Data.TotalRecords=Math.max(this.Data.TotalRecords,this.Data.Reviews.length);}},GetCurrentPageNumber:function(){return this.GetPageNumber(AR.ReviewCarousel.Data.CurrentReviewIndex);},GetIsCurrentPage:function(pageNumber){return(pageNumber==this.GetCurrentPageNumber());},GetPreviousReviewIndex:function(){return(AR.ReviewCarousel.Data.CurrentReviewIndex==0)?(AR.ReviewCarousel.Data.TotalRecords-1):(AR.ReviewCarousel.Data.CurrentReviewIndex-1);},GetNextReviewIndex:function(){return(AR.ReviewCarousel.Data.CurrentReviewIndex==(AR.ReviewCarousel.Data.TotalRecords-1))?0:(AR.ReviewCarousel.Data.CurrentReviewIndex+1);},GetPageNumber:function(reviewIndex){return Math.ceil((reviewIndex+1)/AR.ReviewCarousel.Config.PageSize);},LoadLayer:function(){var reviewIndex=AR.ReviewCarousel.Data.CurrentReviewIndex;if(!AR.ReviewCarousel.Config.DynamicMode){if(reviewIndex==0&&AR.ReviewCarousel.Data.TotalRecords>AR.ReviewCarousel.Data.Reviews.length){$('#lnkPreviousReview').addClass('left-arrow-inactive');}else{$('#lnkPreviousReview').removeClass('left-arrow-inactive');}}
if(AR.ReviewCarousel.Data.Reviews[reviewIndex]){AR.ReviewCarousel.SetContent(AR.ReviewCarousel.Data.Reviews[reviewIndex]);}
else if(AR.ReviewCarousel.Config.DynamicMode){AR.ReviewCarousel.GetDataFromService(this.GetCurrentPageNumber());}
else{AR.ReviewCarousel.Navigate('reviews.aspx?SortBy=Helpfulness&Direction=Descending&Page=2');}
if(AR.ReviewCarousel.Config.DynamicMode&&AR.ReviewCarousel.Data.TotalRecords>0){AR.ReviewCarousel.PreLoadIndexData(this.GetNextReviewIndex());AR.ReviewCarousel.PreLoadIndexData(this.GetPreviousReviewIndex());}},SetLinkOrSpan:function(spanSelector,linkSelector,text,url){if(url){$(spanSelector).hide();$(linkSelector).show().attr("href",url).text(text);}
else{$(spanSelector).show().text(text);$(linkSelector).hide();}},SetContent:function(review){if(review){if(AR.ReviewCarousel.Data.TotalRecords>1){$("#spnPageNumberReview").text(AR.ReviewCarousel.Data.CurrentReviewIndex+1);$("#spnPageCountReview").text(AR.ReviewCarousel.Data.TotalRecords);$(".review-scroll-buttons").show();$("#jqViewAllDivReview").show();$("#jqViewAllLinkReview").attr("href",AR.ReviewCarousel.Data.ReviewGalleryUrl);}else{$(".review-scroll-buttons").hide();$("#jqViewAllDivReview").hide();}
var cookBaseUrl=(review.User.CustomUrlPiece)?AR.ClientUrlProvider.ResolveUrl("~/Cook/"+review.User.CustomUrlPiece):AR.ClientUrlProvider.ResolveUrl("~/Cook/"+review.User.ObfuscatedUserID);$("#jqReviewTitleSpan").text(review.Title);$("#jqReviewRating").attr("src",AR.ClientUrlProvider.GetRatingImage(review.Rating));this.SetLinkOrSpan("#jqReviewerProfileSpan","#jqReviewerProfileLink",review.User.DisplayName,review.User.HasHomePage?cookBaseUrl:null);$("#jqReviewDate").text(review.Date);$("#jqReviewText").text(review.Text);$("#jqReviewHelpfulLink").data("reviewID",review.ID);$("#jqReviewHelpfulCount").text(review.HelpfulCount);$("#jqReviewHelpfulContainer").show();$("#jqReviewHelpfulMessage").hide();var pos=AR.ReviewCarousel.Data.CurrentReviewIndex+1;$("#jqAdIframeReview").attr("src",AR.Ads.GenerateIFrameURL(pos,"300x250","review"));if(!$(AR.ReviewCarousel.Options.ContainerSelector).is(":visible")){AR.Dialog.ShowLayer(AR.ReviewCarousel.Options.ContainerSelector);}}},PreLoadIndexData:function(index,sort,callback){if(sort==null||sort==undefined){sort=4;}
if(callback==null||callback==undefined){callback=AR.ReviewCarousel.Events.GetReviewsPaged_callback;}
var pageNumber=this.GetPageNumber(index);if(this.Config.DynamicMode&&!AR.ReviewCarousel.GetIsCurrentPage(pageNumber)&&!AR.ReviewCarousel.Data.Reviews[index]){AR.ReviewCarousel.GetDataFromService(pageNumber,sort,callback);}},GetDataFromService:function(pageNumber,sort,callback){if(isNaN(pageNumber)||AR.ReviewCarousel.Data.ItemID==0){try{throw new Error("dummy exception")}
catch(e){AR.LogAlert("pageNumber="+pageNumber+", ItemID="+AR.ReviewCarousel.Data.ItemID+", ItemType="+AR.ReviewCarousel.Data.ItemType,"AR.ReviewCarousel.GetDataFromService called with bad params",e.stack)}
return;}
if(sort==null||sort==undefined){sort=4;}
if(callback==null||callback==undefined){callback=AR.ReviewCarousel.Events.GetReviewsPaged_callback;}
if(!this.Config.DynamicMode){AR.MessageBox.ShowFailure(AR.ReviewCarousel.Config.ErrorLoadingMessage,AR.ReviewCarousel.Config.MessageBoxSelector);}else{if(AR.ReviewCarousel.GetIsCurrentPage(pageNumber)){AR.Cursor.SetWait();}
AR.ClientService.SuppressNextLoaderChange();AR.ClientService.GetReviewsPaged(AR.ReviewCarousel.Data.ItemID,AR.ReviewCarousel.Data.ItemType,pageNumber,AR.ReviewCarousel.Config.PageSize,sort,callback);}},StorePageData:function(reviews,pageNumber){if(reviews){var index=0;for(i=0;i<reviews.length;i++){index=((pageNumber-1)*AR.ReviewCarousel.Config.PageSize)+i;AR.ReviewCarousel.Data.Reviews[index]=reviews[i];}
if(pageNumber!=AR.ReviewCarousel.GetCurrentPageNumber()){index=((pageNumber-1)*AR.ReviewCarousel.Config.PageSize);AR.ReviewCarousel.Data.Reviews[index];index=((pageNumber-1)*AR.ReviewCarousel.Config.PageSize)+reviews.length;AR.ReviewCarousel.Data.Reviews[index];}}},Navigate:function(url){$('.review-body').hide();if($('#review-loading').length>0){$('#review-loading').show();}
else{$('#review-loading-new').show();}
document.location=url;},OpenCarousel:function(index){AR.ReviewCarousel.Data.CurrentReviewIndex=index;AR.ReviewCarousel.LoadLayer();},Events:{Open_onClick:function(e){e.preventDefault();var serverdata=AR.ReviewCarousel.Options.LoadIndexFromDataAttribute?AR.ServerSideData.Get($(this).data("server-data-key")):AR.ServerSideData.GetByDom(this);if(serverdata){AR.ReviewCarousel.OpenCarousel(parseInt(serverdata.index));if(serverdata.source=="review"){AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerBlock,AR.Analytics.Action.LinkName.RecipeReviewLayerReviews);}else{AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerHeader,AR.Analytics.Action.LinkName.RecipeReviewLayerReviews);}}},PreviousReview_onClick:function(e){e.preventDefault();if(!$(this).hasClass('left-arrow-inactive')){AR.ReviewCarousel.Data.CurrentReviewIndex=AR.ReviewCarousel.GetPreviousReviewIndex();AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerTurn);AR.ReviewCarousel.LoadLayer();}},NextReview_onClick:function(e){e.preventDefault();AR.ReviewCarousel.Data.CurrentReviewIndex=AR.ReviewCarousel.GetNextReviewIndex();AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerTurn);AR.ReviewCarousel.LoadLayer();},ViewAll_onClick:function(e){AR.Analytics.RecordInternalSource(AR.Analytics.Action.LinkName.RecipeReviewLayerViewAll);},Helpful_onClick:function(e){var reviewID=$(this).data("reviewID");if(reviewID){AR.ClientService.SuppressNextLoaderChange();AR.ClientService.IncrementReviewWasHelpful(reviewID,function(){});}
$("#jqReviewHelpfulContainer").hide();$("#jqReviewHelpfulMessage").show();},GetReviewsPaged_callback:function(response){var fatalError=false;var errorMessage="";var shouldLogError=AR.ShouldLogResponseCode(response.ResponseCode);if(response.ResponseCode==AR.ResponseCode.Success){var isCurrentPage=response.Data.PageNumber==AR.ReviewCarousel.GetCurrentPageNumber();AR.ReviewCarousel.Data.TotalRecords=response.Data.TotalRecords;if(AR.ReviewCarousel.Data.Reviews==null){AR.ReviewCarousel.Data.Reviews=new Array(response.Data.TotalRecords);}
if(response.Data.PageNumber>0&&response.Data.Items.length>0){AR.ReviewCarousel.StorePageData(response.Data.Items,response.Data.PageNumber);if(isCurrentPage){AR.ReviewCarousel.LoadLayer();}}
else{fatalError=true;shouldLogError=true;}}
else{fatalError=true;}
if(fatalError){AR.Dialog.CloseModalBox();AR.MessageBox.ShowFailure(AR.ReviewCarousel.Config.ErrorLoadingMessage,AR.ReviewCarousel.Config.MessageBoxSelector);if(shouldLogError){AR.LogErrorEx({ItemID:AR.LogEval("AR.ReviewCarousel.Data.ItemID"),ItemType:AR.LogEval("AR.ReviewCarousel.Data.ItemType")},"ReviewCarousel","Error in GetReviewsPaged_callback.");}}
AR.Cursor.SetDefault();}},Initialize:function(){$(".open_modal-recipe-reviews").click(this.Events.Open_onClick);$("#lnkNextReview").click(this.Events.NextReview_onClick);$("#lnkPreviousReview").click(this.Events.PreviousReview_onClick);$("#jqViewAllLinkReview").click(this.Events.ViewAll_onClick);$("#jqReviewHelpfulLink").click(this.Events.Helpful_onClick);AR.ReviewCarousel.Options.LoadIndexFromDataAttribute=arguments[0];AR.ReviewCarousel.Options.ContainerSelector=arguments[1];},RecordView:function(action,linkName){AR.Analytics.RecordPageView({pageName:"/recipe/"+AR.FriendlyName+"/review-layer",channel:"Recipes",events:"event1",prop6:AR.Analytics.Action.ContentType.Review,prop9:1,prop24:action,prop34:linkName,prop36:AR.Analytics.Action.LayerName.RecipeReview});}}
var FeaturePrefix="featureHint";var Features1=["NotSet","Blogs","CustomPrint","CustomRecipe","NutritionSearch","CustomUrl","KitchenView","Menus"];var Features2=["UpgradeNowTopNav","ARToolsRecipeBoxTab","ARToolsMenusTab","RelatedMenu","MoreMenusLikeThis"];var Features3=["MenusToggleThumbnail","MenusToggleTitle","MPNotifications","MenuDetailAddMenu","MenuListTitle","MenuListThumb","MenuListNotification","MenuListItem","MenuLatestUserTitle","MenuLatestUserThumb","MenuLatestARTitle","MenuLatestARThumb","MenuWeeklyAlert","MPAddToShoppingList","MPSaveMenu","MPMyMenus"];var Features4=["RecipeAddToMenu","ReferenceAddToMenu","WeblinkAddToMenu","CooksMenuListThumb","CooksMenuListTitle","RecipeBoxMenuAdd"];var Features5=["PrimaryNavNewMenuSignUp","PrimaryNavMyARSupportingMemberBtn"];var Features=Features1.concat(Features2.concat(Features3.concat(Features4.concat(Features5))));var AdvancedPrintFeatures=["NotSet","CustomHeadline","Reviews","Photos","Themes","Colors","Fonts"];var PitchDialogType=["NotSet","NewestMenuAlerts","MenuBarricade"];AR.DialogLinker={SetNextStepUrl:function(value){setCookie("ARNextStep",value,1);},GetNextStepForHyperlink:function(anchor){var nextStep=anchor[0].href;if(anchor.hasClass("linkRequirementNextStepIsSamePage")){nextStep=window.location.href;}
return nextStep;},GetPitchDialogForHyperLink:function(anchor){var pitchDialogType="NotSet";if(anchor){var classToPitchDialogMap=$.map(PitchDialogType,function(pitchTypeName){return{hintClass:"pitchDialogHint"+pitchTypeName,pitchType:pitchTypeName};});$.each(classToPitchDialogMap,function(){if(anchor.hasClass(this.hintClass))
pitchDialogType=this.pitchType;});}
return pitchDialogType;},GetFeatureHintFromHyperlink:function(anchor){var featureHighlight="NotSet";if(anchor){var classToFeatureMap=$.map(Features,function(featureName){return{hintClass:FeaturePrefix+featureName,feature:featureName};});$.each(classToFeatureMap,function(){if(anchor.hasClass(this.hintClass))
featureHighlight=this.feature;});}
return featureHighlight;},GetAdvancedPrintFeatureHintFromHyperlink:function(anchor){var featureHighlight="NotSet";if(anchor){var classToFeatureMap=$.map(AdvancedPrintFeatures,function(featureName){return{hintClass:"advancedPrintFeatureHint"+featureName,feature:featureName};});$.each(classToFeatureMap,function(){if(anchor.hasClass(this.hintClass))
featureHighlight=this.feature;});}
return featureHighlight;},LinkMembershipDialogs:function(domToLink){var that=this;domToLink.find('.linkRequiresLogin').click(function(e){that.OnLinkRequiringLogin(e,$(this));});domToLink.find('textarea.linkRequiresLogin').focus(function(e){that.OnLinkRequiringLogin(e,$(this));});domToLink.find('.linkPrefersLogin').click(function(e){that.OnLinkPrefersLogin(e,$(this));});domToLink.find('.linkShowsRegister').click(function(e){that.OnShowRegisterDialog(e,$(this));});domToLink.find('.linkShowsLogin').click(function(e){that.OnShowsLoginDialog(e,$(this));});domToLink.find(".linkRequiresSupportingMembership").click(function(e){that.OnLinkRequiringSupportingMembership(e,$(this));});domToLink.find(".linkPrefersSupportingMembership").click(function(e){that.OnLinkPrefersSupportingMembership(e,$(this));});domToLink.find(".linkPrefersSupportingMembershipPitchDialog").click(function(e){that.OnLinkPrefersSupportingMembershipPitchDialog(e,$(this));});},OnLinkRequiringLogin:function(event,anchor){if(AR.VisitorInfo.IsLoggedIn()){}else{event.preventDefault();event.stopImmediatePropagation();if($(anchor).attr("data-close-layer-on-login")){$(anchor).closest("."+$(anchor).attr("data-close-layer-on-login")).hide();}
this.SetNextStepUrl(this.GetNextStepForHyperlink(anchor));if(AR.VisitorInfo.IsRecognized()){AR.CreateAspxDialog(AR.ClientUrlProvider.GetLogonAspxDialog());}
else{AR.CreateAspxSignUpDialog(anchor);}}},OnLinkPrefersLogin:function(event,anchor){if(!AR.VisitorInfo.IsLoggedIn()&&AR.VisitorInfo.IsRecognized()){event.preventDefault();event.stopImmediatePropagation();AR.DialogLinker.SetNextStepUrl(AR.DialogLinker.GetNextStepForHyperlink(anchor));AR.CreateAspxDialog(AR.ClientUrlProvider.GetLogonAspxDialog());}},OnShowRegisterDialog:function(event,anchor){if(AR.VisitorInfo.IsLoggedIn()){}else{event.preventDefault();event.stopImmediatePropagation();AR.DialogLinker.SetNextStepUrl(AR.DialogLinker.GetNextStepForHyperlink(anchor));AR.CreateAspxSignUpDialog(anchor);}},OnShowsLoginDialog:function(event,anchor){if(AR.VisitorInfo.IsLoggedIn()){}else{event.preventDefault();event.stopImmediatePropagation();AR.DialogLinker.SetNextStepUrl(AR.DialogLinker.GetNextStepForHyperlink(anchor));AR.CreateAspxDialog(AR.ClientUrlProvider.GetLogonAspxDialog());}},OnLinkPrefersSupportingMembershipPitchDialog:function(event,anchor){if(AR.VisitorInfo.IsLoggedIn()&&AR.VisitorInfo.IsSupportingMember()){}else{event.preventDefault();event.stopImmediatePropagation();AR.DialogLinker.SetNextStepUrl(AR.DialogLinker.GetNextStepForHyperlink(anchor));if(!AR.VisitorInfo.IsLoggedIn()&&AR.VisitorInfo.IsSupportingMember()){AR.CreateAspxDialog(AR.ClientUrlProvider.GetLogonAspxDialog());}else{var pitchDialog=AR.DialogLinker.GetPitchDialogForHyperLink(anchor);var featureHighlight=AR.DialogLinker.GetFeatureHintFromHyperlink(anchor);var linkName=(anchor[0].name)?encodeURIComponent(anchor[0].name):'';if(pitchDialog=='MenuBarricade'){var qsKey=AR.ClientUrlUtils.QueryStringParameters.AnalyticsActionItem;var menuType=AR.ClientUrlUtils.GetQueryStringItemFromAnchor(qsKey,anchor);AR.DialogLinker.ProcessPitchDialog(pitchDialog,featureHighlight,menuType);}
else if(!AR.VisitorInfo.IsRecognized()&&pitchDialog!='NotSet'){AR.DialogLinker.ProcessPitchDialog(pitchDialog,featureHighlight,linkName);}
else{AR.DialogLinker.ShowProductSelectionDialog(featureHighlight,linkName);}}}},OnLinkRequiringSupportingMembership:function(event,anchor){if(AR.VisitorInfo.IsLoggedIn()&&AR.VisitorInfo.IsSupportingMember()){}else{event.preventDefault();event.stopImmediatePropagation();AR.DialogLinker.SetNextStepUrl(AR.DialogLinker.GetNextStepForHyperlink(anchor));if(!AR.VisitorInfo.IsLoggedIn()&&AR.VisitorInfo.IsSupportingMember()){AR.CreateAspxDialog(AR.ClientUrlProvider.GetLogonAspxDialog());}else{var featureHighlight=AR.DialogLinker.GetFeatureHintFromHyperlink(anchor);var linkName=(anchor[0].name)?encodeURIComponent(anchor[0].name):'';var advPrintFeatureHighlight=AR.DialogLinker.GetAdvancedPrintFeatureHintFromHyperlink(anchor);var qsInternalSource="";var qsCallToAction="";var OverRideItems=AR.Analytics.OverRide.ParseItems(anchor[0].search.substr(1));for(i=0;i<OverRideItems.length;i++){if(OverRideItems[i]){switch(OverRideItems[i].Key){case AR.ClientUrlUtils.QueryStringParameters.AnalyticsLinkName:linkName=OverRideItems[i].Value;break;case AR.ClientUrlUtils.QueryStringParameters.AnalyticsCustomLinkClick:AR.Analytics.RecordCustomLinkClick(OverRideItems[i].Value);break;case AR.ClientUrlUtils.QueryStringParameters.AnalyticsInternalSource:qsInternalSource=OverRideItems[i].Value;break;case AR.ClientUrlUtils.QueryStringParameters.AnalyticsCallToAction:qsCallToAction=OverRideItems[i].Value;break;}}}
if(advPrintFeatureHighlight=='NotSet'){AR.DialogLinker.ShowProductSelectionDialog(featureHighlight,linkName,qsInternalSource,qsCallToAction);}
else{AR.DialogLinker.ShowAdvancedPrintProductSelectionDialog(featureHighlight,advPrintFeatureHighlight,linkName);}}}},OnLinkPrefersSupportingMembership:function(event,anchor){if(!AR.VisitorInfo.IsLoggedIn()&&AR.VisitorInfo.IsSupportingMember()){event.preventDefault();event.stopImmediatePropagation();AR.DialogLinker.SetNextStepUrl(AR.DialogLinker.GetNextStepForHyperlink(anchor));AR.CreateAspxDialog(AR.ClientUrlProvider.GetLogonAspxDialog());}},ShowProductSelectionDialog:function(featureHighlight,linkName,internalSource,callToAction){AR.CreateAspxDialog(AR.ClientUrlProvider.GetProductSelectionDialog(featureHighlight,linkName,internalSource,callToAction));},ShowAdvancedPrintProductSelectionDialog:function(featureHighlight,printFeature,linkName){AR.CreateAspxDialog(AR.ClientUrlProvider.GetAdvancedPrintProductSelectionDialog(featureHighlight,printFeature,linkName));},ProcessPitchDialog:function(pitchItem,featureHighlight,postData){switch(pitchItem){case"NewestMenuAlerts":ioc.Load("_dialogLauncher").NewMenuAlertPitch(function(result){var t=setTimeout(function(){AR.DialogLinker.ShowProductSelectionDialog(featureHighlight,postData);},10);},function(){});break;case"MenuBarricade":ioc.Load("_dialogLauncher").SampleMenuPitch(function(result){},function(){},postData);break;default:break;}}};AR.CreateAspxSignUpDialog=function(anchor){var updatedUrl=AR.Analytics.SetFMOmniCallToAction(anchor);if(updatedUrl!=null&&updatedUrl.length>0){AR.DialogLinker.SetNextStepUrl(updatedUrl);}
AR.CreateAspxDialog(AR.ClientUrlProvider.GetSignUpAspxDialog());};ioc.Register("_membershipDialogLinker").withInstance(AR.DialogLinker);AR.TabBlocker=function(){this._storedTabindexes=[];};AR.TabBlocker.prototype.GetTotalTabindexesBlocked=function(){return this._storedTabindexes.length;};AR.TabBlocker.prototype.BlockTabindexes=function(targetDom,excludedDom){targetDom=targetDom||$(document);var elementsToBlock=targetDom.find("*");var that=this;var elementsAndTabindexes=[];jQuery.each(elementsToBlock,function(){var elementToBlock=this;var jQueryelementToBlock=$(elementToBlock);if(jQueryelementToBlock.css("display")=="none"||jQueryelementToBlock.css("visibility")=="hidden"){return;}
var originalTabIndex=jQueryelementToBlock.attr("tabindex");if(originalTabIndex=='-1'){return;}
if(typeof(originalTabIndex)=="undefined"&&jQueryelementToBlock[0].nodeName!="UL"){return;}
if(excludedDom){var excluded=false;jQuery.each(excludedDom,function(){var domToExclude=this;if(elementToBlock==domToExclude||jQuery.contains(domToExclude,elementToBlock)){excluded=true;}});if(excluded){return;}}
elementsAndTabindexes[elementsAndTabindexes.length]=[elementToBlock,originalTabIndex];$(this).attr("tabindex",-1);});this._storedTabindexes=this._storedTabindexes.concat(elementsAndTabindexes);};AR.TabBlocker.prototype.RestoreTabindexes=function(){var toRestore=this._storedTabindexes.reverse();this._storedTabindexes=[];var that=this;$.each(toRestore,function(){var targetNode=this[0];var tabindex=this[1];$(targetNode).attr("tabindex",tabindex);});};AR.TabBlocker.singletonInstance=new AR.TabBlocker();AR.AspnetJavascriptContext=function(){this._valuesToPreserve=["__doPostBack","theForm","WebForm_OnSubmit","Page_Validators","ValidatorOnSubmit","Page_ValidationActive","ValidatorOnChange"];this._context=null;};AR.AspnetJavascriptContext.prototype.Preserve=function(){if(this._context!=null)
return;var result={};$.each(this._valuesToPreserve,function(){if(typeof(window[this])!=="undefined"){result[this]=window[this];}});this._context=result;}
AR.AspnetJavascriptContext.prototype.GetContext=function(){return this._context;}
AR.AspnetJavascriptContext.prototype.Restore=function(){if(this._context!=null){var context=this._context;$.each(this._valuesToPreserve,function(){window[this]=context[this];});};}
AR.AspnetJavascriptContext.singletonInstance=new AR.AspnetJavascriptContext();AR.AspxDialogTemplateWidget=function(dialogTemplate){this._dialog=dialogTemplate.clone(false);this._dialog.addClass("aspx-dialog-instance");};AR.AspxDialogTemplateWidget.prototype.Close=function(){this._dialog.remove();};AR.AspxDialogTemplateWidget.prototype.GetDialog=function(){return this._dialog;};AR.AspxDialogTemplateWidget.prototype.GetTitleArea=function(){return this._dialog.find(".aspxdialog-title");};AR.AspxDialogTemplateWidget.prototype.GetContentArea=function(){return this._dialog.find(".rsz-content");};AR.AspxDialogTemplateWidget.prototype.GetCloseButtons=function(){return this._dialog.find("a.close-modal, a.close-modal-and-handle-click, div.modal-close-button a");}
AR.AspxDialogTemplateWidget.prototype.GetForm=function(){return this.GetContentArea().find("form");}
AR.AspxDialogTemplateWidget.prototype.GetUpperRightCloseButton=function(){return this._dialog.find("div.modal-close-button");}
AR.AspxDialogTemplateWidget.prototype.GetHiddenTitleInfo=function(){return this.GetContentArea().find(".hiddeninfo-title");};AR.AspxDialogTemplateWidget.prototype.GetHiddenShouldShowButtonInfo=function(){return typeof(aspxDialogParameters)!=="undefined"&&typeof(aspxDialogParameters.ShowCloseButton)!=="undefined"&&aspxDialogParameters.ShowCloseButton;};AR.AspxDialogTemplateWidget.prototype.GetUrl=function(){if(typeof(aspxDialogParameters)!=="undefined"&&typeof(aspxDialogParameters.Url)!=="undefined"){return aspxDialogParameters.Url;}else{return window.location;}};AR.AspxDialogTemplateWidget.prototype.GetReturnValue=function(){if(typeof(aspxDialogParameters)!=="undefined"&&typeof(aspxDialogParameters.ReturnValue)!=="undefined"){return aspxDialogParameters.ReturnValue;}else{return null;}};AR.AspxDialogTemplateWidget.prototype.IsValidDownloadResult=function(){return this.GetTitleArea().length>0;};AR.CreateAspxDialog=function(url,errorCallback){AR.SetModuleLogContent("AR.AspxDialog",{url:url});var result=new AR.AspxDialog(AR.AspnetJavascriptContext.singletonInstance,$);result.Start(url,null,errorCallback);};AR.AspxDialog=function(aspnetJavascriptContext){this._aspnetJavascriptContext=aspnetJavascriptContext;this._clickFormParameters=[];this._aspnetFormParameters=[];var that=this;$.each(["Close","OnLoadFinished","OnFormSubmit","OnFormClick","OnSubmit","OnClosing","OnClosed","Aspnet__doPostBack"],function(){var functionToOverride=this;that[functionToOverride]=function(){return AR.AspxDialog.prototype[functionToOverride].apply(that,arguments);};});}
AR.AspxDialog.prototype.Close=function(event){AR.Dialog.CloseModalBox();if(event!=null&&event.preventDefault!=null){event.preventDefault();}}
AR.AspxDialog.prototype.Start=function(url,successCallback,errorCallback){this._url=url;this._successCallback=successCallback;this._errorCallback=errorCallback;this.ClearExistingAspxDialog();this.RegisterDialogCloseHandlers();this.PreserveAspnetJavascriptContent();this.PrepareTemplate();this.LoadDialogContent();};AR.AspxDialog.prototype.StartPost=function(url,data,successCallback,errorCallback){this._url=url;this._data=data;this._successCallback=successCallback;this._errorCallback=errorCallback;this.ClearExistingAspxDialog();this.RegisterDialogCloseHandlers();this.PreserveAspnetJavascriptContent();this.PrepareTemplate();this.LoadDialogContentPost();};AR.AspxDialog.prototype.ClearExistingAspxDialog=function(){AR.Dialog.RunOnClosingHandlers();AR.Dialog.RunOnClosedHandlers();};AR.AspxDialog.prototype.RegisterDialogCloseHandlers=function(){AR.Dialog.AddOnClosingHandler(this.OnClosing);AR.Dialog.AddOnClosedHandler(this.OnClosed);};AR.AspxDialog.prototype.PreserveAspnetJavascriptContent=function(){this._aspnetJavascriptContext.Preserve();};AR.AspxDialog.prototype.PrepareTemplate=function(){this._widget=new AR.AspxDialogTemplateWidget($(".modal-dialog-template"));$("form").before(this._widget.GetDialog());};AR.AspxDialog.prototype.LoadDialogContent=function(){var modalContent=this._widget.GetContentArea();this._pendingRequest=modalContent.load(this._url,this.OnLoadFinished);};AR.AspxDialog.prototype.LoadDialogContentPost=function(){var modalContent=this._widget.GetContentArea();this._pendingRequest=modalContent.load(this._url,this._data,this.OnLoadFinished);};AR.AspxDialog.prototype.OnLoadFinished=function(responseText,textStatus){this._pendingRequest=null;if(textStatus!="error"){var returnValue=this._widget.GetReturnValue();if(returnValue!=null){this.HandleReturnValue(returnValue);return;}
if(this._widget.IsValidDownloadResult()){this.HandleNextDialog();return;}}
this.OnError();};AR.AspxDialog.prototype.OnError=function(){this.Close();if(this._errorCallback){this._errorCallback();}};AR.AspxDialog.prototype.HandleReturnValue=function(value){var that=this;AR.Dialog.CloseModalBox(function(){if(that._successCallback){that._successCallback(value);}});};AR.AspxDialog.prototype.HandleNextDialog=function(){this.RedefineAspnet__doPostBack();this.ShowDialog();this.SetTitle();this.SetUpperRightCancelButtonVisibility();this.WireCloseButtons();this.WireFormSubmit();};AR.AspxDialog.prototype.RedefineAspnet__doPostBack=function(){__doPostBack=this.Aspnet__doPostBack;};AR.AspxDialog.prototype.ShowDialog=function(){AR.Dialog.ShowLayer(this._widget.GetDialog());};AR.AspxDialog.prototype.Aspnet__doPostBack=function(eventTarget,eventArgument){var aspnetFormParameters=[]
aspnetFormParameters[0]={name:"__EVENTTARGET",value:eventTarget};aspnetFormParameters[1]={name:"__EVENTARGUMENT",value:eventArgument};this._aspnetFormParameters=aspnetFormParameters;var that=this;setTimeout(function(){that._aspnetFormParameters=[];},100);this._widget.GetForm().submit();};AR.AspxDialog.prototype.SetTitle=function(){var titleContent=this._widget.GetHiddenTitleInfo();var titleTarget=this._widget.GetTitleArea();titleTarget.empty();titleTarget.append(titleContent.contents());};AR.AspxDialog.prototype.SetUpperRightCancelButtonVisibility=function(){var shouldShowButton=this._widget.GetHiddenShouldShowButtonInfo();this._widget.GetUpperRightCloseButton().css("visibility",shouldShowButton?"visible":"hidden");};AR.AspxDialog.prototype.WireCloseButtons=function(){var that=this;this._widget.GetCloseButtons().one("click",function(e){if(!$(this).hasClass("close-modal-and-handle-click")){e.preventDefault();}
that.Close();});};AR.AspxDialog.prototype.WireFormSubmit=function(){var form=this._widget.GetForm();form.click(this.OnFormClick);form.submit(this.OnFormSubmit);};AR.AspxDialog.prototype.OnFormSubmit=function(){this.OnSubmit();return false;};AR.AspxDialog.prototype.OnFormClick=function(e){var target=e.target;var $el=$(target);if(!($el.is(":submit,input:image"))){var t=$el.closest(':submit');if(t.length==0)
return;target=t[0];}
if(target.name){var additionalFormParameters=[];additionalFormParameters.push({name:target.name,value:target.value});if(target.type=='image'){var x;var y;if(e.offsetX!=undefined){x=e.offsetX;y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();x=e.pageX-offset.left;y=e.pageY-offset.top;}else{x=e.pageX-target.offsetLeft;y=e.pageY-target.offsetTop;}
x=parseInt(x);y=parseInt(y);additionalFormParameters.push({name:target.name+'.x',value:x});additionalFormParameters.push({name:target.name+'.y',value:y});}
this._clickFormParameters=additionalFormParameters;var that=this;setTimeout(function(){that._clickFormParameters=[];},100);}};AR.AspxDialog.prototype.GetFormParameters=function(){var form=this._widget.GetForm();var aspnetFormParameterNames=$.map(this._aspnetFormParameters,function(element){return element.name;});var includedFormParameters=$.grep(form.serializeArray(),function(parameter,index){var parameterName=parameter.name;return $.inArray(parameterName,aspnetFormParameterNames)==-1;});return $.merge($.merge($.merge([],includedFormParameters),this._clickFormParameters),this._aspnetFormParameters);};AR.AspxDialog.prototype.OnSubmit=function(){var formData=this.GetFormParameters();var targetUrl=this._widget.GetUrl();var modalContent=this._widget.GetContentArea();this._pendingRequest=modalContent.load(targetUrl,formData,this.OnLoadFinished);};AR.AspxDialog.prototype.OnClosing=function(e){var pendingRequest=this._pendingRequest;this._pendingRequest=null;if(pendingRequest!=null){}};AR.AspxDialog.prototype.OnClosed=function(e){this._widget.Close();this._aspnetJavascriptContext.Restore();};ioc.Register("_aspnetJavascriptContext").withInstance(AR.AspnetJavascriptContext.singletonInstance);ioc.Register("_aspxDialog").withConstructor(AR.AspxDialog).withDependencies("_aspnetJavascriptContext");(function($){$.fn.textTruncate=function(){var userOptions={},args=arguments,func=args.callee;if(args.length){if(args[0].constructor==Object){userOptions=args[0];}else if(args[0]=="options"){return $(this).eq(0).data("options-truncate");}else{userOptions={width:parseInt(args[0]),height:parseInt(args[1]),tail:args[2]}}}
this.css("visibility","hidden");var options=$.extend({},func.defaults,userOptions);return this.each(function(){var $this=$(this);$this.data("options-truncate",options);if(options.tail=="..."&&func._native){this.style[func._native]="ellipsis";$this.css("visibility","visible");return true;}
var width=options.width||$this.parent().width();var height=options.height||$this.parent().height();var text=$this.text();var maxCounter=text.length;var css="padding:0; margin:0; border:none; font:inherit;";var $table;if(options.multiline){$table=$('<table style="'+css+'width:'+width+'px;zoom:1;position:absolute;"><tr style="'+css+'"><td style="'+css+'white-space:normal;">'+options.tail+'</td></tr></table>');}else{$table=$('<table style="'+css+'width:auto;zoom:1;position:absolute;"><tr style="'+css+'"><td style="'+css+'white-space:nowrap;">'+options.tail+'</td></tr></table>');}
var $td=$("td",$table);$this.html($table);var tailwidth=$td.width();var numChars=text.length;var targetWidth=(options.multiline)?width:width-tailwidth;var targetHeight=height;var tailLength=options.tail.text!==undefined?options.tail.text().length+1:2;var counter=0;$td.text(text);if(options.alwaysAppendTail===true){$td.append(options.tail);}
var tooltipSet=false;if(options.tooltip){$this.attr("title",$.trim(text));tooltipSet=true;}
var origLength=$td.width();var origHeight=$td.height();var safeGuessLength=targetWidth*1.10;var safeGuessHeight=targetHeight*1.10;if(origLength-safeGuessLength>0){var cut_ratio=safeGuessLength/origLength,num_guessText_chars=Math.ceil(numChars*cut_ratio),guessText=text.substring(0,num_guessText_chars),guessTextLength=$td.text(text).append(options.tail).width();if(guessTextLength>targetWidth){text=guessText;numChars=text.length;}}
if(origHeight-safeGuessHeight>0){var cut_ratio=safeGuessHeight/origHeight,num_guessText_chars=Math.ceil(numChars*cut_ratio),guessText=text.substring(0,num_guessText_chars),guessTextHeight=$td.text(text).append(options.tail).height;if(guessTextLength>targetWidth){text=guessText;numChars=text.length;}}
if(options.multiline&&($td.height()>targetHeight||$td.width()>targetWidth)){if(options.tail.text!==undefined&&options.prependHellip===true){options.tail.prepend("&hellip;");}
while($td.height()>targetHeight||$td.width()>targetWidth){counter++;if(options.wrap=="word"&&$td.text().lastIndexOf(" ")!=-1){$td.text($td.text().substring(0,$td.text().lastIndexOf(" ")-tailLength)).append(options.tail);}else{$td.text($td.text().substring(0,$td.text().length-tailLength)).append(options.tail);}
if(counter>=maxCounter){console.warn("Max loop count ("+maxCounter+") encountered in textTruncate plug-in.");return;}}
text=$.trim($td.html());$this.html(text);}else if($td.width()>width){while($td.width()>targetWidth){counter++;if(options.wrap=="word"&&$td.text().lastIndexOf(" ")!=-1){$td.text($td.text().substring(0,$td.text().lastIndexOf(" ")));}else{$td.text($td.text().substring(0,$td.text().length-1));}
if(counter>=maxCounter){console.warn("Max loop count ("+maxCounter+") encountered in textTruncate plug-in.");return;}}
text=$.trim($td.text());$this.text(text).append(options.tail);}else{if(tooltipSet){$(this).removeAttr("title")}
$this.text(text);if(options.alwaysAppendTail===true){$this.append(options.tail);}}
this.style.visibility="visible";return true;});return true;};var css=document.documentElement.style;var _native=false;if("textOverflow"in css){_native="textOverflow";}else if("OTextOverflow"in css){_native="OTextOverflow";}
$.fn.textTruncate._native=_native;$.fn.textTruncate.defaults={multiline:false,tail:"&hellip;",tooltip:true,wrap:"word",prependHellip:false,alwaysAppendTail:false};})(jQuery);AR.RBM={SetInitial:function(){var tabName=getCookie('rbm');switch(tabName){case'tabRecipe':AR.RBM.ShowTab('myarRecipe',$('#'+tabName).parent());AR.RBM.Truncate('recipe');break;case'tabMenu':AR.RBM.ShowTab('myarMenu',$('#'+tabName).parent());AR.RBM.Truncate('menu');break;case'tabShoppingList':AR.RBM.ShowTab('myarShoppingList',$('#'+tabName).parent());AR.RBM.TruncateSL();break;default:if(AR.VisitorInfo.IsRecognized()==false){AR.RBM.ShowTab('myarMenu',$('#tabMenu').parent());AR.RBM.Truncate('menu');}
break;}},Truncate:function(div){$('div.recent-'+div+' p.plaincharacterwrap a').textTruncate({multiline:true,height:35});},TruncateSL:function(){$("p.shopListTitleP a").textTruncate({width:140});},ShowTab:function(tabName,tab){if(AR.RBM.IsVisible(tabName)){return;}
AR.RBM.HideAllTabs();$('#'+tabName).show();$('#activeTab').text(tabName);$(tab).addClass('on');},ToggleARTabs:function(e){var tabName=$(e.target).attr('id');switch(tabName){case'tabRecipe':AR.RBM.ShowTab('myarRecipe',$(e.target).parent());AR.RBM.Truncate('recipe');break;case'tabMenu':AR.RBM.ShowTab('myarMenu',$(e.target).parent());AR.RBM.Truncate('menu');break;case'tabShoppingList':AR.RBM.ShowTab('myarShoppingList',$(e.target).parent());AR.RBM.TruncateSL();break;}
setCookie('rbm',tabName,1);},HideAllTabs:function(){$('.myar-wrap').hide();$('.myar-tab').parent().removeClass('on');},IsVisible:function(tab){return $('#'+tab).is(':visible');},PerformHover:function(container,open,recent,func){open.stop(true,true);if(container.innerWidth()==58){recent.die('mouseover',func);open.animate({width:'58px'},300).removeClass('open');container.addClass('open').animate({width:'174px'},300,function callback(){recent.live('mouseover',func);});}},Hover:function(){AR.RBM.PerformHover($(this),$('.recent-recipe.open'),$('.recent-recipe'),AR.RBM.Hover);},HoverMenu:function(){AR.RBM.PerformHover($(this),$('.recent-menu.open'),$('.recent-menu'),AR.RBM.HoverMenu);},HideNoItems:function(rb,context){if(rb.is(':hidden')){rb.slideDown(300);$('.noItems',context).slideUp(300);}},CloneTarget:function(baseClass){$(baseClass+':nth-child(1)').clone(true).insertAfter(baseClass+':nth-child(1)').show();var clone=$(baseClass+':nth-child(2)').removeClass('hidden');$(baseClass+':nth-child(5)').remove();$(baseClass+'.open').animate({width:'58px'},300).removeClass('open');clone.animate({width:'174px'},300).addClass('open');return clone;},Add:function(title,url,rating,isOldDesign){if(isOldDesign==null||isOldDesign==undefined){isOldDesign=true}
$("#tabRecipe").click();var ctxt=$("#divMyARTools");var rb=$(".hasItem",ctxt);if(rb){AR.RBM.HideNoItems(rb,"#myarRecipe");var clone=AR.RBM.CloneTarget(".recent-recipe");$("#imgStars",clone).hide();var img=AR.RBM.GetRecipeImage();var newImage=img.clone(true).insertAfter(img);var imgPos=img.offset();var newPos=clone.offset();var beginTop,beginLeft,endTop,endLeft;if(isOldDesign===true){beginTop=imgPos.top;beginLeft=imgPos.left;endTop=newPos.top;endLeft=newPos.left;}
else{beginTop=0;beginLeft=0;endTop=newPos.top-imgPos.top;endLeft=newPos.left-imgPos.left;}
AR.RBM.Animate(newImage,beginTop,beginLeft,endTop,endLeft);AR.RBM.LoadRecipe(img,clone,url,title,rating);var count=parseInt($('#rbmRecipeCount').text());$('#rbmRecipeCount').text(count+1);}},LoadRecipe:function(img,clone,url,title,rating){var t=$.trim(title);$('.cloneImage',clone).attr('src',img.attr('src'));$('.cloneImage',clone).attr('alt',AR.Utils.HtmlEncode(t)).attr("title",AR.Utils.HtmlEncode(t));$('#imgLink',clone).attr('href',url);$('p > #lnkRecipeTitle',clone).attr('href',url).text(t).textTruncate({multiline:true,height:35});var imgStarUrl=AR.ClientUrlProvider.GetRecipeBoxListViewRatingImage(rating);$('#imgStars',clone).attr('src',imgStarUrl).attr('alt',rating+' stars').attr('title',rating+' stars').show();},AddMenu:function(menuTitle,menuUrl){$('#tabMenu').click();var rb=$('.hasItem',$('#myarMenu'));if(rb){AR.RBM.HideNoItems(rb,'#myarMenu');var count=parseInt($('#rbmMenuCount').text());$('#rbmMenuCount').text(count+1);var mealCount=parseInt($('#mealCount').text());var recipeCount=parseInt($('#recipeCount').text());var imageUrl;var img=AR.RBM.GetMealImage();if(img.length>0){imageUrl=img.attr('src');}else{imageUrl=AR.ClientUrlProvider.ResolveImageUrl("/ar/myar/menuplanner/detail/no_image_menu_icon.png");}
AR.RBM.PerformMenuAdd(img,menuTitle,menuUrl,imageUrl,mealCount,recipeCount);}},PerformMenuAdd:function(img,menuTitle,menuUrl,imageUrl,mealCount,mealItemCount){var clone=AR.RBM.CloneTarget('.recent-menu');$('.rb-menu-added',clone).hide();if(img.length>0){var newImage=img.clone(true).insertAfter(img);var imgPos=img.position();var newPos=clone.offset();var animateTop,animateLeft,newPos;if(AR.ServerSideData.Data.IsRecipe){animateTop=newPos.top;animateLeft=newPos.left;}
else{animateTop=newPos.top-img.offset().top;animateLeft=newPos.left-img.offset().left;}
var diff=AR.RBM.MessageLabelActive();if(diff>0){imgPos.top=imgPos.top-diff;}
AR.RBM.Animate(newImage,imgPos.top,imgPos.left,animateTop,animateLeft);}
AR.RBM.LoadMenu(clone,imageUrl,menuTitle,menuUrl,mealCount,mealItemCount,newImage);},MessageLabelActive:function(){return $('#msgLabel').height();},LoadMenu:function(clone,imageUrl,menuTitle,menuUrl,mealCount,mealItemCount,newImage){var t=$.trim(menuTitle);$('p > #lnkMenuTitle',clone).attr('href',menuUrl).text(t).textTruncate({multiline:true,height:35});$('.cloneImage',clone).attr('src',imageUrl).attr('alt',t);$('#imgMenuLink',clone).attr('href',menuUrl);$('#spanMealCount',clone).text(mealCount+" meals ");$('#spanRecipeCount',clone).text(mealItemCount+" recipes ");$('.rb-menu-added',clone).show();},Animate:function(newImage,startTop,startLeft,endTop,endLeft){newImage.css({position:'absolute',top:startTop,left:startLeft,zIndex:'5000'});newImage.animate({top:endTop,left:endLeft,width:'50px',height:'50px',opacity:'.2'},800,function callback(){newImage.remove();});},IncrementMenuCount:function(){var menuCountElement=$.find("#rbmMenuCount");var menuCount=parseInt($(menuCountElement).text());menuCount+=1;$(menuCountElement).text(menuCount);},MenuExists:function(sharedItemID){var exists=$('.recent-menu a[href*="'+sharedItemID+'"]').length;},AddToMenu:function(menu,isOldDesign){if(isOldDesign==null||isOldDesign==undefined){isOldDesign=true}
$('#tabMenu').click();if(menu){var rb=$('.hasItem');if(rb){var img=AR.RBM.GetRecipeImage();AR.RBM.HideNoItems(rb);var existingMenu=$('.recent-menu a[href*="'+menu.SharedItemID+'"]');if(existingMenu.length){existingMenu.parent().addClass('open');var img=$('.rec-image');$('.rb-menu-added',existingMenu).hide();var newImage=img.clone(true).insertAfter(img);var imgPos=img.offset();var newPos=existingMenu.offset();var beginTop,beginLeft,endTop,endLeft;if(isOldDesign===true){beginTop=imgPos.top;beginLeft=imgPos.left;endTop=newPos.top;endLeft=newPos.left;}
else{beginTop=0;beginLeft=0;endTop=newPos.top-imgPos.top;endLeft=newPos.left-imgPos.left;}
var diff=AR.RBM.MessageLabelActive();if(diff>0&&isOldDesign){imgPos.top=imgPos.top-diff;}
AR.RBM.Animate(newImage,beginTop,beginLeft,endTop,endLeft);$(existingMenu.parent()).find('#spanMealCount').text(menu.MealCount+" meals ");$(existingMenu.parent()).find('#spanRecipeCount').text(menu.MealItemCount+" recipes ");}
else{AR.RBM.PerformMenuAdd(img,menu.Title,menu.Description,menu.ListItemRecipePhotoURL,menu.MealCount,menu.MealItemCount);}}}},AddToList:function(shoppingListID,shoppingListTitle,isOldDesign){if(isOldDesign==null||isOldDesign==undefined){isOldDesign=true}
$('#tabShoppingList').click();if(shoppingListID){var rb=$('.hasItem',$('#myarShoppingList'));if(rb){AR.RBM.HideNoItems(rb,'#myarShoppingList');var SLID=$('.hidSLID').val();if(SLID!=shoppingListID){$('.shoppingListRBM li').remove();$('.shopListTitleP > a').attr('href',AR.ClientUrlProvider.ResolveUrl('~/My/ShoppingList/Default.aspx?SID='+shoppingListID)).text(shoppingListTitle);}
var img;var titles=new Array();var newImageTopPos;var newImageLeftPos;var imgTopPos;var imgLeftPos;var newPos=$('#divRecentShoppingListItems').offset();if(AR.ServerSideData.Data.IsMenu){img=AR.RBM.GetMealImage();$('.titleurl[disabled!="disabled"]').each(function(){titles.push($(this).text());});imgTopPos=img.position().top;imgLeftPos=img.position().left;newImageTopPos=newPos.top-img.offset().top;newImageLeftPos=newPos.left-img.offset().left;}
else{img=AR.RBM.GetRecipeImage();titles.push($('#itemTitle').text());imgTopPos=img.offset().top;imgLeftPos=img.offset().left;newImageTopPos=newPos.top;newImageLeftPos=newPos.left;}
if(img.length>0){var newImage=img.clone(true).insertAfter(img);var diff=AR.RBM.MessageLabelActive();if(diff>0&&isOldDesign){imgTopPos=imgTopPos-diff;}
var beginTop,beginLeft,endTop,endLeft;if(isOldDesign===true){beginTop=imgTopPos;beginLeft=imgLeftPos;endTop=newImageTopPos;endLeft=newImageLeftPos;}
else{beginTop=0;beginLeft=0;endTop=newImageTopPos-imgTopPos;endLeft=newImageLeftPos-imgLeftPos;}
AR.RBM.Animate(newImage,beginTop,beginLeft,endTop,endLeft);}
titles.reverse();jQuery.each(titles,function(){AR.RBM.AddItemToShoppingList($.trim(this));});}}},AddItemToShoppingList:function(title){var ul=$('.shoppingListRBM');var canAdd=true;$('li',ul).each(function(i,item){if($('span',item).text()==title){canAdd=false;}});if(canAdd==true){var count=ul.children("li").length;if(count>2){$("li:last-child",ul).remove();}
ul.prepend('<li class="ellipsis">'+title+'</li>');}},GetRecipeImage:function(){return $('.rec-image');},GetMealImage:function(){return $('.isMainMenuPhoto img');}};$(document).ready(function(){$('.recent-recipe').live('mouseover',AR.RBM.Hover);$('.recent-menu').live('mouseover',AR.RBM.HoverMenu);$('.myar-tab').click(function(e){AR.RBM.ToggleARTabs(e);});});(function($){var JQOTE2_TMPL_UNDEF_ERROR='UndefinedTemplateError',JQOTE2_TMPL_COMP_ERROR='TemplateCompilationError',JQOTE2_TMPL_EXEC_ERROR='TemplateExecutionError';var ARR='[object Array]',STR='[object String]',FUNC='[object Function]';var n=1,tag='%',qreg=/^[^<]*(<[\w\W]+>)[^>]*$/,type_of=Object.prototype.toString;function raise(error,ext){throw($.extend(error,ext),error);}
function dotted_ns(fn){var ns=[];if(type_of.call(fn)!==ARR)return false;for(var i=0,l=fn.length;i<l;i++)
ns[i]=fn[i].jqote_id;return ns.length?ns.sort().join('.').replace(/(\b\d+\b)\.(?:\1(\.|$))+/g,'$1$2'):false;}
function lambda(tmpl,t){var f,fn=[],t=t||tag,type=type_of.call(tmpl);if(type===FUNC)
return tmpl.jqote_id?[tmpl]:false;if(type!==ARR)
return[$.jqotec(tmpl,t)];if(type===ARR)
for(var i=0,l=tmpl.length;i<l;i++)
if(f=lambda(tmpl[i],t))fn.push(f[0]);return fn.length?fn:false;}
$.fn.extend({jqote:function(data,t){var data=type_of.call(data)===ARR?data:[data],dom='';this.each(function(i){var fn=$.jqotec(this,t);for(var j=0;j<data.length;j++)
dom+=fn.call(data[j],i,j,data,fn);});return dom;}});$.each({app:'append',pre:'prepend',sub:'html'},function(name,method){$.fn['jqote'+name]=function(elem,data,t){var ns,regexp,str=$.jqote(elem,data,t),$$=!qreg.test(str)?function(str){return $(document.createTextNode(str));}:$;if(!!(ns=dotted_ns(lambda(elem))))
regexp=new RegExp('(^|\\.)'+ns.split('.').join('\\.(.*)?')+'(\\.|$)');return this.each(function(){var dom=$$(str);$(this)[method](dom);(dom[0].nodeType===3?$(this):dom).trigger('jqote.'+name,[dom,regexp]);});};});$.extend({jqote:function(elem,data,t){var str='',t=t||tag,fn=lambda(elem);if(fn===false)
raise(new Error('Empty or undefined template passed to $.jqote'),{type:JQOTE2_TMPL_UNDEF_ERROR});data=type_of.call(data)!==ARR?[data]:data;for(var i=0,l=fn.length;i<l;i++)
for(var j=0;j<data.length;j++)
str+=fn[i].call(data[j],i,j,data,fn[i]);return str;},jqotec:function(template,t){var cache,elem,tmpl,t=t||tag,type=type_of.call(template);if(type===STR&&qreg.test(template)){elem=tmpl=template;if(cache=$.jqotecache[template])return cache;}else{elem=type===STR||template.nodeType?$(template):template instanceof jQuery?template:null;if(!elem[0]||!(tmpl=elem[0].innerHTML)&&!(tmpl=elem.text()))
raise(new Error('Empty or undefined template passed to $.jqotec'),{type:JQOTE2_TMPL_UNDEF_ERROR});if(cache=$.jqotecache[$.data(elem[0],'jqote_id')])return cache;}
var str='',index,arr=tmpl.replace(/\s*<!\[CDATA\[\s*|\s*\]\]>\s*|[\r\n\t]/g,'').split('<'+t).join(t+'>\x1b').split(t+'>');for(var m=0,l=arr.length;m<l;m++)
str+=arr[m].charAt(0)!=='\x1b'?"out+='"+arr[m].replace(/(\\|["'])/g,'\\$1')+"'":(arr[m].charAt(1)==='='?';out+=('+arr[m].substr(2)+');':(arr[m].charAt(1)==='!'?';out+=$.jqotenc(('+arr[m].substr(2)+'));':';'+arr[m].substr(1)));str='try{'+
('var out="";'+str+';return out;').split("out+='';").join('').split('var out="";out+=').join('var out=')+'}catch(e){e.type="'+JQOTE2_TMPL_EXEC_ERROR+'";e.args=arguments;e.template=arguments.callee.toString();throw e;}';try{var fn=new Function('i, j, data, fn',str);}catch(e){raise(e,{type:JQOTE2_TMPL_COMP_ERROR});}
index=elem instanceof jQuery?$.data(elem[0],'jqote_id',n):elem;return $.jqotecache[index]=(fn.jqote_id=n++,fn);},jqotefn:function(elem){var type=type_of.call(elem),index=type===STR&&qreg.test(elem)?elem:$.data($(elem)[0],'jqote_id');return $.jqotecache[index]||false;},jqotetag:function(str){if(type_of.call(str)===STR)tag=str;},jqotenc:function(str){return str.toString().replace(/&(?!\w+;)/g,'&#38;').split('<').join('&#60;').split('>').join('&#62;').split('"').join('&#34;').split("'").join('&#39;');},jqotecache:{}});$.event.special.jqote={add:function(obj){var ns,handler=obj.handler,data=!obj.data?[]:type_of.call(obj.data)!==ARR?[obj.data]:obj.data;if(!obj.namespace)obj.namespace='app.pre.sub';if(!data.length||!(ns=dotted_ns(lambda(data))))return;obj.handler=function(event,dom,regexp){return!regexp||regexp.test(ns)?handler.apply(this,[event,dom]):null;};}};})(jQuery);AR.PrimaryNav={_hoverTimer:0,_hasHover:false,_initFinished:0,_loadFinished:0,OnInit:function(){this.Reset();this.WireTabEvents();this._initFinished=1;},OnLoad:function(){this.WireMerchBlocks();this.WireLinkEvents();this._loadFinished=1;},DelayEnabled:function(){return!this._hasHover;},Reset:function(){$(".sub_nav_menu").hide();$("a.trigger").removeClass("has_hover");this._hasHover=false;},WireLinkEvents:function(){$('#lnkMyAR_Login_Anon').click(function(e){AR.Analytics.RecordInternalSource("PN_7.2.1_SN.Login");AR.PrimaryNav.HideSubNavListItem($(".tabSeven"));});$('.linkShowsRegister').click(function(e){AR.PrimaryNav.HideSubNavListItem($(".tabSeven"));});$('.linkRequiresLogin').click(function(e){AR.PrimaryNav.HideSubNavListItem($(this).parents(".tabContainer"));});$('.linkRequiresSupportingMembership').click(function(e){AR.PrimaryNav.HideSubNavListItem($(this).parents(".tabContainer"));});$('.linkLaunchesVideoLayer').click(function(e){AR.PrimaryNav.HideSubNavListItem($(this).parents(".tabContainer"));});$('.lnkOffSite').click(function(e){var lnk=$(this);if(lnk.attr("data-ar-prop24")!=null){e.preventDefault();e.stopImmediatePropagation();AR.Analytics.RecordInternalSource(lnk.attr("data-ar-prop24"));(lnk.attr("target")=="_self")?window.location=lnk.attr("href"):window.open(lnk.attr("href"));}});},WireMerchBlocks:function(){$(".topnavmerch").click(function(e){AR.PrimaryNav.HideSubNavListItem($(this).parents(".tabContainer"));var anchor=$(this).find("a");if(anchor){if(anchor.is(".linkRequiresLogin")){AR.DialogLinker.OnLinkRequiringLogin(e,anchor);}
else if(anchor.is(".linkRequiresSupportingMembership")){AR.DialogLinker.OnLinkRequiringSupportingMembership(e,anchor);}
else{window.location=anchor.attr("href");return false;}}});},WireTabEvents:function(){var that=this;if(!AR.IsMobileDevice()){$("a.trigger").mouseenter(function(){that.TabOnHover($(this));});$("a.trigger").mouseleave(function(){clearTimeout(AR.PrimaryNav._hoverTimer);});$(".tabContainer").mouseleave(function(){that.HideSubNavListItem($(this));});$("ul#topNavUL").mouseleave(function(){AR.PrimaryNav._hasHover=false;});}
else{$("a.trigger").click(function(e){e.preventDefault();e.stopImmediatePropagation();if($(this).is(".has_hover")==false){AR.PrimaryNav.Reset();AR.PrimaryNav.SubNavLoadImages($(this));AR.PrimaryNav.ShowSubNav($(this));}
else{AR.PrimaryNav.HideSubNavAnchor($(this));}});}},TabOnHover:function(anchor){if(anchor.is(".has_hover")==false){AR.PrimaryNav.SubNavLoadImages(anchor);AR.PrimaryNav._hoverTimer=setTimeout(function(){AR.PrimaryNav.ShowSubNav(anchor);},(AR.PrimaryNav.DelayEnabled())?250:0);}},HideSubNavListItem:function(listItem){listItem.find("a.trigger").removeClass("has_hover");listItem.children(".sub_nav_menu").hide();AR.ZIndexOverride.RevertOverrides("primarynav");},HideSubNavAnchor:function(anchor){anchor.removeClass("has_hover");var tabListItem=anchor.parents(".tabContainer");tabListItem.children(".sub_nav_menu").hide();AR.ZIndexOverride.RevertOverrides("primarynav");},ShowSubNav:function(anchor){anchor.addClass("has_hover");var tabListItem=anchor.parents(".tabContainer");tabListItem.children(".sub_nav_menu").show();AR.PrimaryNav._hasHover=true;AR.ZIndexOverride.ApplyOverride(anchor.next(".sub_nav_menu"),"primarynav");},SubNavLoadImages:function(anchor){anchor.parent().find(".imgTopNavFeat").each(function(){var img=$(this);if(img.attr("src").indexOf("spacer.gif")!=-1){img.attr("src",img.attr("data-ar-src"));}});}};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,'');}
function DoSearch(linkClicked){var canSearch=(typeof(linkClicked)!=undefined)||!($('.dirtyform'))||!($('.dirtyform').isChanged());if(canSearch===true){var searchID='';var url='';if(linkClicked=='advanced'){url='/Search/Recipes-Advanced.aspx';}
else if(linkClicked=='glossary'){url='/Search/Glossary.aspx';}
else if(linkClicked=='collection'){url='/Search/Collection.aspx';}
else if($(".search-link-recipes",".searchtxt").hasClass("chosen")){url='/Search/Recipes.aspx';searchID='Recipe';}
else if($(".search-link-ingredients",".searchtxt").hasClass("chosen")){url='/Search/Ingredients.aspx';searchID='Ingredient';}
else if($(".search-link-articles",".searchtxt").hasClass("chosen")){url='/Search/Articles.aspx';searchID='Article';}
url=AR.ClientUrlProvider.ResolveUrl(url);var searchTxt=$(".searchBox");if(searchTxt.length>0){var sVal=searchTxt.val().trim();var defaultText=searchTxt.data("stored").defaultText;if(sVal!=''&&sVal!=defaultText){if(searchID=='Ingredient'){var iWanted=1;var iUnwanted=1;url+='?WithTerm=&SearchIn=All';termArray=sVal.split(',');for(i=1;i<termArray.length+1;i++){var qVal=termArray[i-1].trim();if(qVal.charAt(0)=='-'){qVal=qVal.substring(1,qVal.length);url+='&Unwanted'+iUnwanted+'='+encodeMyHtml(qVal);iUnwanted++;}
else{url+='&Wanted'+iWanted+'='+encodeMyHtml(qVal);iWanted++;}}}
else{sVal=sVal.replace(/:/g,' ');url+='?WithTerm='+encodeMyHtml(sVal);}
location.href=url;return false;}
else{if(searchID=="Recipe"||searchID=="Article"){return false;}
else{return true;}}}
return true;}
else{return false;}}
function moveSelectedSearch(link){$(".search_link").css("color","#0066CC").removeClass("chosen");link.css("color","#333333").addClass("chosen");var ret=DoSearch();if(ret==false){document.aspnetForm.ctl00_txtSearch.focus();}
return ret;}
function encodeMyHtml(htmlToEncode){encodedHtml=escape(htmlToEncode);encodedHtml=encodedHtml.replace(/\//g,"%2F");encodedHtml=encodedHtml.replace(/\?/g,"%3F");encodedHtml=encodedHtml.replace(/=/g,"%3D");encodedHtml=encodedHtml.replace(/&/g,"%26");encodedHtml=encodedHtml.replace(/@/g,"%40");encodedHtml=encodedHtml.replace(/[<]/g,"");encodedHtml=encodedHtml.replace(/[>]/g,"");return encodedHtml;}
if(typeof(AR)=="undefined"){AR={};}
AR.Ads={modeMobileSL:"mobilesl",modeMobileRB:"mobilerb",_defaultsRecipeBox:{dartID:"",folder:"",recipeID:0,recipeIDs:{},site:"ar.recipebox",zone:"",mode:"rb"},_defaultsShoppingList:{aisle:0,dartID:"",item:"",items:{},recipeID:0,recipeIDs:{},shoppingList:"",site:"ar.myar",zone:"shoppinglist",mode:"sl"},IFrameVerb:"adi",ItemAdKey:"",KeyValues:"",KeyWords:"",Ord:"",RootURL:"//ad.doubleclick.net",SessionGroup:"",Site:"",TypeSpecificID:"",VisitorID:"",VisitorStatus:"",VisitorStatusAbbr:"",Zone:"",AddItemToShoppingList:function(options){var settings=$.extend({},this._defaultsShoppingList,options);var url=AR.ClientUrlProvider.ResolveUrl(encodeURI("~/handlers/adshandler.ashx?items="+settings.item+"&aisle="+settings.aisle+"&shoppingList="+settings.shoppingList+"&mode="+settings.mode));var an=(settings.mode==this.modeMobileSL)?AR.Mobile.Analytics:AR.Analytics;an.RecordAdPushViaAPI("event9",settings.dartID,"Add Item to SL:Branded",null,settings.item);this._setCookies(settings);this._checkLoginAndRedirect(url,settings);},AddItemsToShoppingList:function(options){var settings=$.extend({},this._defaultsShoppingList,options);var url=AR.ClientUrlProvider.ResolveUrl(encodeURI("~/handlers/adshandler.ashx?items="+settings.items.join("|")+"&aisle="+settings.aisle+"&shoppingList="+settings.shoppingList+"&mode="+settings.mode));var an=(settings.mode==this.modeMobileSL)?AR.Mobile.Analytics:AR.Analytics;an.RecordAdPushViaAPI("event9",settings.dartID,"Add Item to SL:Branded",null,settings.items.join(","));this._setCookies(settings);this._checkLoginAndRedirect(url,settings);},AddRecipeToRecipeBox:function(options){var settings=$.extend({},this._defaultsRecipeBox,options);var url=AR.ClientUrlProvider.ResolveUrl(encodeURI("~/handlers/adshandler.ashx?recipeIDs="+settings.recipeID+"&folder="+settings.folder+"&mode="+settings.mode));var an=(settings.mode==this.modeMobileRB)?AR.Mobile.Analytics:AR.Analytics;an.RecordAdPushViaAPI("event9",settings.dartID,"Save Recipe:Branded","Kitchen Approved",settings.recipeID);this._setCookies(settings);this._checkLoginAndRedirect(url,settings);},AddRecipesToRecipeBox:function(options){var settings=$.extend({},this._defaultsRecipeBox,options);var url=AR.ClientUrlProvider.ResolveUrl(encodeURI("~/handlers/adshandler.ashx?recipeIDs="+settings.recipeIDs.join("|")+"&folder="+settings.folder+"&mode="+settings.mode));var an=(settings.mode==this.modeMobileRB)?AR.Mobile.Analytics:AR.Analytics;an.RecordAdPushViaAPI("event9",settings.dartID,"Save Recipe:Branded","Kitchen Approved",settings.recipeIDs.join(","));this._setCookies(settings);this._checkLoginAndRedirect(url,settings);},AddRecipeToShoppingList:function(options){var settings=$.extend({},this._defaultsShoppingList,options);var url=AR.ClientUrlProvider.ResolveUrl(encodeURI("~/handlers/adshandler.ashx?recipeIDs="+settings.recipeID+"&aisle="+settings.aisle+"&shoppingList="+settings.shoppingList+"&mode="+settings.mode));var an=(settings.mode==this.modeMobileSL)?AR.Mobile.Analytics:AR.Analytics;an.RecordAdPushViaAPI("event9",settings.dartID,"Add Recipe to SL:Branded","Kitchen Approved",settings.recipeID);this._setCookies(settings);this._checkLoginAndRedirect(url,settings);},AddRecipesToShoppingList:function(options){var settings=$.extend({},this._defaultsShoppingList,options);var url=AR.ClientUrlProvider.ResolveUrl(encodeURI("~/handlers/adshandler.ashx?recipeIDs="+settings.recipeIDs.join("|")+"&aisle="+settings.aisle+"&shoppingList="+settings.shoppingList+"&mode="+settings.mode));var an=(settings.mode==this.modeMobileSL)?AR.Mobile.Analytics:AR.Analytics;an.RecordAdPushViaAPI("event9",settings.dartID,"Add Recipe to SL:Branded","Kitchen Approved",settings.recipeIDs.join(","));this._setCookies(settings);this._checkLoginAndRedirect(url,settings);},GenerateIFrameURL:function(pos,size,product){var root=[];root.push(this.RootURL);root.push(this.IFrameVerb);root.push(this.Site);root.push(this.Zone);var params=[];params.push(root.join("/"));params.push(AudienceScience.SegmentValues);params.push(this.KeyValues);params.push(this.KeyWords);params.push("ssngroup="+this.SessionGroup);params.push("status="+this.VisitorStatus);params.push(this.GenerateUParam(pos,product));params.push("product="+product);params.push("tile="+pos);params.push("pos="+pos);params.push("sz="+size);params.push("ord="+Math.random()*10000000000000000);return params.join(";");},GenerateUParam:function(pos,product){var vals=[];vals.push(AudienceScience.EncodeRSI(AudienceScience.SegmentValues));vals.push(this.VisitorID);vals.push(this.ItemAdKey.toUpperCase()+this.ItemID);vals.push(pos);vals.push(product);vals.push(encodeURI(this.KeyWords));vals.push(this.SessionGroup);vals.push(this.VisitorStatusAbbr);vals.push('');return"u="+vals.join("|");},_checkLoginAndRedirect:function(url,settings){var visitor=(settings.mode==this.modeMobileRB||settings.mode==this.modeMobileSL)?AR.Mobile.Account.VisitorInfo:AR.VisitorInfo;if(visitor.IsLoggedIn()){window.location.href=url;}
else{if(settings&&(settings.mode==this.modeMobileSL||settings.mode==this.modeMobileRB)){window.location.href=AR.Config.MobileSitePath+"/account/login?loginreferrerurl="+encodeURIComponent(url);}
else{var anchor=$(document.createElement("a"));anchor[0].href=url;anchor.addClass("");AR.DialogLinker.OnLinkRequiringLogin($.Event("click"),anchor);}}},_setCookies:function(settings){var minutesToExpire=5;var date=new Date();date.setTime(date.getTime()+(minutesToExpire*60*1000));var path;switch(settings.mode){case"rb":path="/my/recipebox/default.aspx";case"sl":path="/my/shoppinglist/default.aspx";case this.modeMobileSL:path="/my/shopping-list";case this.modeMobileRB:path="/my/recipe-box";break;}
var adTargetingValue=settings.site+"|"+settings.zone;var adBIDataValue="";if(settings.recipeID>0){adBIDataValue=settings.dartID+"|"+settings.recipeID;}else if(settings.recipeIDs.length>0){adBIDataValue=settings.dartID+"|"+settings.recipeIDs.join(",");}else if(settings.item!=""){adBIDataValue=settings.dartID+"|"+settings.item;}else if(settings.items.length>0){adBIDataValue=settings.dartID+"|"+settings.items.join(",");}
document.cookie="ARAdTargeting="+adTargetingValue+"; expires="+date.toGMTString()+"; path="+path;document.cookie="ARAdBIData="+adBIDataValue+"; expires="+date.toGMTString()+"; path="+path;}};if(typeof(AR)=="undefined"){AR={};}
AR.FacebookWrapper={};AR.Search={AnimationSpeed:600,QueryType:{Keyword:"k",Ingredient:"i",Advanced:"a",Nutrition:"n"},SetFormState:function(forceOpen){this.SetEnableSearchEvent();this.SetSearchButtonEnablers();this.ToggleSearchButtonState(false);var qt=AR.Search.GetQueryStringQueryType();switch(qt){case AR.Search.QueryType.Ingredient:AR.Search.ActivateLeftNavLink($("#lnkIngredient"));if(!AR.Search.HasSearchResults()||forceOpen){AR.Search.OpenForm("form-ingredient");}
break;case AR.Search.QueryType.Nutrition:AR.Search.ActivateLeftNavLink($("#lnkNutrition"));if(!AR.Search.HasSearchResults()||!AR.VisitorInfo.IsLoggedInAsASupportingMember()||forceOpen){AR.Search.OpenForm("form-nutrition");}
break;case AR.Search.QueryType.Advanced:AR.Search.ActivateLeftNavLink($("#lnkAdvanced"));if(!AR.Search.HasSearchResults()||forceOpen){AR.Search.OpenForm("form-advanced");}
break;default:AR.Search.ActivateLeftNavLink($("#lnkKeyword"));AR.Search.OpenForm("form-keyword");break;};},EnableSearchButton:function(){$("div.search_form_container").trigger("EnableSearchButton");},SetSearchButtonEnablers:function(){var textboxes=$("input.search_text_box");var that=this;$(textboxes).keyup(function(){that.EnableSearchButton();});$(".enable_search_on_change").change(function(){that.EnableSearchButton();});},SetEnableSearchEvent:function(){var that=this;$("div.search_form_container").bind("EnableSearchButton",function(e){that.ToggleSearchButtonState(true);$(this).unbind("EnableSearchButton");});},ToggleSearchButtonState:function(superEnabled){var button=$("button.form_button_search");if(superEnabled){$(button).addClass("searchEnabled");}else{$(button).removeClass("searchEnabled");};},HasSearchResults:function(){return($("div.searchResult").length>0);},GetQueryStringQueryType:function(){var query=location.search;var i=query.indexOf("qt=")+3;return query.substring(i,i+1);},GetQueryStringResultType:function(){var query=location.search;var i=query.indexOf("rt=")+3;return query.substring(i,i+1);},GetQueryType:function(formID){var qt="";switch(true){case(formID.indexOf("keyword")!=-1):qt=AR.Search.QueryType.Keyword;break;case(formID.indexOf("nutrition")!=-1):qt=AR.Search.QueryType.Nutrition;break;case(formID.indexOf("ingredient")!=-1):qt=AR.Search.QueryType.Ingredient;break;case(formID.indexOf("advanced")!=-1):qt=AR.Search.QueryType.Advanced;break;};return qt;},Init:function(){$(".articleText").textTruncate({multiline:true,height:40});$(".search-link-ingredient").click(function(e){AR.Search.PerformSearch(e,AR.Search.QueryType.Ingredient);});$(".search-link-nutrition").click(function(e){AR.Search.PerformSearch(e,AR.Search.QueryType.Nutrition);});$(".search-link-advanced").click(function(e){AR.Search.PerformSearch(e,AR.Search.QueryType.Advanced);});},PerformSearch:function(e,queryType){var searchBox=$(".searchBox");var val=searchBox.val();if(val!=""&&val!=searchBox.data('stored').defaultText){e.preventDefault();var query="qt="+queryType+"&wt="+val+"&ms=1";location.href=AR.ClientUrlProvider.ResolveUrl("~/Search/Default.aspx?"+query);}},InitSummaryChangeLink:function(){$(".changelink").click(function(e){e.preventDefault();AR.Search.SetFormState(true);});},ActivateLeftNavLink:function(link){$("li.left_active",".jqsearch_searchby").removeClass("left_active");link.parent().addClass("left_active");},OpenForm:function(formID){$("input.hidden-active-form").val(AR.Search.GetQueryType(formID));var form=$("div."+formID);if(form.is(":hidden")){var visibleForms=$("div.formWrapper:visible");if(visibleForms.length==0){form.slideDown(this.AnimationSpeed);}
else{$(visibleForms).slideUp(this.AnimationSpeed,function(){form.slideDown(this.AnimationSpeed);});}}},PerformRecipeSearch:function(formID){var queryType=AR.Search.GetQueryType(formID);var val=$(".search_text_box").val();var query="qt="+queryType+"&wt="+val+"&rt=r&ms=1";location.href=AR.ClientUrlProvider.ResolveUrl("~/Search/Default.aspx?"+query);},EnableFormLinks:function(){$(".form-open").click(function(e){e.preventDefault();var link=$(this);var formID=link.attr("form-name");var resultType=AR.Search.GetQueryStringResultType();if(resultType!="r"){AR.Search.PerformRecipeSearch(formID);};AR.Search.ActivateLeftNavLink(link);if(AR.Search.NutritionTeaserResultsIsDisplayed()){$("input.hidden-active-form").val(AR.Search.GetQueryType(formID));__doPostBack('ctl00$CenterColumnPlaceHolder$btnSearch','');}
else{AR.Search.OpenForm(formID);}});},NutritionTeaserResultsIsDisplayed:function(){return(!AR.VisitorInfo.IsLoggedInAsASupportingMember()&&AR.Search.GetQueryStringQueryType()==AR.Search.QueryType.Nutrition);}};(function($){$.extend($.fn,{validate:function(options){if(!this.length){if(options&&options.debug&&window.console){console.warn("nothing selected, can't validate, returning nothing");}
return;}
var validator=$.data(this[0],'validator');if(validator){return validator;}
this.attr('novalidate','novalidate');validator=new $.validator(options,this[0]);$.data(this[0],'validator',validator);if(validator.settings.onsubmit){this.validateDelegate(":submit","click",function(ev){if(validator.settings.submitHandler){validator.submitButton=ev.target;}
if($(ev.target).hasClass('cancel')){validator.cancelSubmit=true;}});this.submit(function(event){if(validator.settings.debug){event.preventDefault();}
function handle(){var hidden;if(validator.settings.submitHandler){if(validator.submitButton){hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);}
validator.settings.submitHandler.call(validator,validator.currentForm,event);if(validator.submitButton){hidden.remove();}
return false;}
return true;}
if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}
if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}
return handle();}else{validator.focusInvalid();return false;}});}
return validator;},valid:function(){if($(this[0]).is('form')){return this.validate().form();}else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid&=validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,'validator').settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));staticRules[element.name]=existingRules;if(argument.messages){settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);}
break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}
var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}
var data=$.validator.normalizeRules($.extend({},$.validator.metadataRules(element),$.validator.classRules(element),$.validator.attributeRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}
return data;}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+a.value);},filled:function(a){return!!$.trim(""+a.value);},unchecked:function(a){return!a.checked;}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length===1){return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};}
if(arguments.length>2&&params.constructor!==Array){params=$.makeArray(arguments).slice(1);}
if(params.constructor!==Array){params=[params];}
$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n);});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(element,event){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);}
this.addWrapper(this.errorsFor(element)).hide();}},onfocusout:function(element,event){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element,event){if(element.name in this.submitted||element===this.lastElement){this.element(element);}},onclick:function(element,event){if(element.name in this.submitted){this.element(element);}
else if(element.parentNode.name in this.submitted){this.element(element.parentNode);}},highlight:function(element,errorClass,validClass){if(element.type==='radio'){this.findByName(element.name).addClass(errorClass).removeClass(validClass);}else{$(element).addClass(errorClass).removeClass(validClass);}},unhighlight:function(element,errorClass,validClass){if(element.type==='radio'){this.findByName(element.name).removeClass(errorClass).addClass(validClass);}else{$(element).removeClass(errorClass).addClass(validClass);}}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){$.each(value.split(/\s/),function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,"");if(validator.settings[eventType]){validator.settings[eventType].call(validator,this[0],event);}}
$(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, "+"[type='number'], [type='search'] ,[type='tel'], [type='url'], "+"[type='email'], [type='datetime'], [type='date'], [type='month'], "+"[type='week'], [type='time'], [type='datetime-local'], "+"[type='range'], [type='color'] ","focusin focusout keyup",delegate).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",delegate);if(this.settings.invalidHandler){$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);}},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid()){$(this.currentForm).triggerHandler("invalid-form",[this]);}
this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}
return this.valid();},element:function(element){element=this.validationTargetFor(this.clean(element));this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element)!==false;if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}
if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}
this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}
this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}
if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList);}else{this.defaultShowErrors();}},resetForm:function(){if($.fn.resetForm){$(this.currentForm).resetForm();}
this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj){count++;}
return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()===0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin");}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name===lastActive.name;}).length===1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){if(!this.name&&validator.settings.debug&&window.console){console.error("%o has no name assigned",this);}
if(this.name in rulesCache||!validator.objectLength($(this).rules())){return false;}
rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){var errorClass=this.settings.errorClass.replace(' ','.');return $(this.settings.errorElement+"."+errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},elementValue:function(element){var val=$(element).val();if(typeof val==='string'){return val.replace(/\r/g,"");}
return val;},check:function(element){element=this.validationTargetFor(this.clean(element));var rules=$(element).rules();var dependencyMismatch=false;var val=this.elementValue(element);var result;for(var method in rules){var rule={method:method,parameters:rules[method]};try{result=$.validator.methods[method].call(this,val,element,rule.parameters);if(result==="dependency-mismatch"){dependencyMismatch=true;continue;}
dependencyMismatch=false;if(result==="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}
if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){if(this.settings.debug&&window.console){console.log("exception occured when checking element "+element.id+", check the '"+rule.method+"' method",e);}
throw e;}}
if(dependencyMismatch){return;}
if(this.objectLength(rules)){this.successList.push(element);}
return true;},customMetaMessage:function(element,method){if(!$.metadata){return;}
var meta=this.settings.meta?$(element).metadata()[this.settings.meta]:$(element).metadata();return meta&&meta.messages&&meta.messages[method];},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined){return arguments[i];}}
return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customMetaMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message==="function"){message=message.call(this,rule.parameters,element);}else if(theregex.test(message)){message=$.validator.format(message.replace(theregex,'{$1}'),rule.parameters);}
this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper){toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));}
return toToggle;},defaultShowErrors:function(){var i,elements;for(i=0;this.errorList[i];i++){var error=this.errorList[i];if(this.settings.highlight){this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);}
this.showLabel(error.element,error.message);}
if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}
if(this.settings.success){for(i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}
if(this.settings.unhighlight){for(i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}
this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass(this.settings.validClass).addClass(this.settings.errorClass);if(label.attr("generated")){label.html(message);}}else{label=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}
if(!this.labelContainer.append(label).length){if(this.settings.errorPlacement){this.settings.errorPlacement(label,$(element));}else{label.insertAfter(element);}}}
if(!message&&this.settings.success){label.text("");if(typeof this.settings.success==="string"){label.addClass(this.settings.success);}else{this.settings.success(label);}}
this.toShow=this.toShow.add(label);},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr('for')===name;});},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},validationTargetFor:function(element){if(this.checkable(element)){element=this.findByName(element.name).not(this.settings.ignore)[0];}
return element;},checkable:function(element){return(/radio|checkbox/i).test(element.type);},findByName:function(name){var form=this.currentForm;return $(document.getElementsByName(name)).map(function(index,element){return element.form===form&&element.name===name&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case'select':return $("option:selected",element).length;case'input':if(this.checkable(element)){return this.findByName(element.name).filter(':checked').length;}}
return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0;}
delete this.pending[element.name];if(valid&&this.pendingRequest===0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false;}else if(!valid&&this.pendingRequest===0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){if(className.constructor===String){this.classRuleSettings[className]=rules;}else{$.extend(this.classRuleSettings,className);}},classRules:function(element){var rules={};var classes=$(element).attr('class');if(classes){$.each(classes.split(' '),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});}
return rules;},attributeRules:function(element){var rules={};var $element=$(element);for(var method in $.validator.methods){var value;if(method==='required'){value=$element.get(0).getAttribute(method);if(value===""){value=true;}else if(value==="false"){value=false;}
value=!!value;}else{value=$element.attr(method);}
if(value){rules[method]=value;}else if($element[0].getAttribute("type")===method){rules[method]=true;}}
if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}
return rules;},metadataRules:function(element){if(!$.metadata){return{};}
var meta=$.data(element.form,'validator').settings.meta;return meta?$(element).metadata()[meta]:$(element).metadata();},staticRules:function(element){var rules={};var validator=$.data(element.form,'validator');if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}
return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}
if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}
if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(['minlength','maxlength','min','max'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(['rangelength','range'],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}
if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}
if(rules.messages){delete rules.messages;}
return rules;},normalizeRule:function(data){if(typeof data==="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}
return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!==undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element)){return"dependency-mismatch";}
if(element.nodeName.toLowerCase()==="select"){var val=$(element).val();return val&&val.length>0;}
if(this.checkable(element)){return this.getLength(value,element)>0;}
return $.trim(value).length>0;},remote:function(value,element,param){if(this.optional(element)){return"dependency-mismatch";}
var previous=this.previousValue(element);if(!this.settings.messages[element.name]){this.settings.messages[element.name]={};}
previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param==="string"&&{url:param}||param;if(this.pending[element.name]){return"pending";}
if(previous.old===value){return previous.valid;}
previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===true;if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}else{var errors={};var message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message;validator.showErrors(errors);}
previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param;},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length<=param;},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element)){return"dependency-mismatch";}
if(/[^0-9 \-]+/.test(value)){return false;}
var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9){nDigit-=9;}}
nCheck+=nDigit;bEven=!bEven;}
return(nCheck%10)===0;},accept:function(value,element,param){param=typeof param==="string"?param.replace(/,/g,'|'):"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp(".("+param+")$","i"));},equalTo:function(value,element,param){var target=$(param).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid();});return value===target.val();}}});$.format=$.validator.format;}(jQuery));(function($){var pendingRequests={};if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
pendingRequests[port]=xhr;}});}else{var ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;if(mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
return(pendingRequests[port]=ajax.apply(this,arguments));}
return ajax.apply(this,arguments);};}}(jQuery));(function($){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){$.each({focus:'focusin',blur:'focusout'},function(original,fix){$.event.special[fix]={setup:function(){this.addEventListener(original,handler,true);},teardown:function(){this.removeEventListener(original,handler,true);},handler:function(e){var args=arguments;args[0]=$.event.fix(e);args[0].type=fix;return $.event.handle.apply(this,args);}};function handler(e){e=$.event.fix(e);e.type=fix;return $.event.handle.call(this,e);}});}
$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});}});}(jQuery));AR.Core={};AR.Core.Utilities={};$(document).ready(function(){$("head").data("VisitorID",AR.VisitorInfo.VisitorID());});$.fn.trim=function(str){if(str===undefined){str=$(this)[0];}
str=str.replace(/^\s\s*/,''),ws=/\s/,i=str.length;while(ws.test(str.charAt(--i)));return str.slice(0,i+1);};(function($){$.QueryString=(function(a){if(a=="")return{};var b={};for(var i=0;i<a.length;++i){var p=a[i].split('=');if(p.length!=2)continue;b[p[0]]=decodeURIComponent(p[1].replace(/\+/g," "));}
return b;})(window.location.search.substr(1).split('&'))})(jQuery);AR.Core.Utilities={Formats:{SelectorByName:"[name={0}]",SelectByDataAttribute:"[data-{0}={1}]"},GetSelectorByName:function(name){return this.Formats.SelectorByName.replace("{0}",name);},GetSelectorByDataAttribute:function(name,value){return this.Formats.SelectByDataAttribute.replace("{0}",name).replace("{1}",value);},ScrollTo:function(target,callback){var _target;var _callbackHasFired=false;if(typeof(target)=='number'){_target=parseInt(target);}
else if(target.length){_target=target.offset().top;}
$(document).trigger("scrollstart");$("html,body").animate({scrollTop:_target},1000,function(){$(document).trigger("scrollstart");setTimeout(function(){$(document).trigger("scrollstop");if(callback&&typeof(callback)==="function"&&_callbackHasFired==false){callback();_callbackHasFired=true;}},0);});},ShowTextOverflow:function(moreLinkElement,itemType){var itemIDName=itemType+"id";var itemID=$(moreLinkElement).data(itemIDName);var itemIDselector=globalUtils.GetSelectorByDataAttribute(itemIDName,itemID);var overflow=$("."+itemType+"_overflow"+itemIDselector);var morelink=$("."+itemType+"_morelink"+itemIDselector);var ellipsis=$("."+itemType+"_ellipsis"+itemIDselector);ellipsis.hide();morelink.hide();overflow.show();},HideTextOverflow:function(overflowElement,itemType){var overflowText=$(overflowElement).text();var itemIDName=itemType+"id";var itemID=$(overflowElement).data(itemIDName);var itemIDselector=globalUtils.GetSelectorByDataAttribute(itemIDName,itemID);var overflow=$("."+itemType+"_overflow"+itemIDselector);var morelink=$("."+itemType+"_morelink"+itemIDselector);var ellipsis=$("."+itemType+"_ellipsis"+itemIDselector);if(overflowText.length==0||overflowText=="\""){morelink.hide();ellipsis.hide();}
else{overflow.hide();}},GetOrientation:function(){var orientation=$.event.special.orientationchange.orientation()
return orientation;},GetScreenWidth:function(){var orientation=$.event.special.orientationchange.orientation(),port=orientation==="portrait",winMin=port?320:480,screenWidth=port?screen.availHeight:screen.availWidth,winWidth=Math.max(winMin,$(window).width()),pageMin=Math.min(screenWidth,winWidth);return pageMin;},Truncate:function(text,threshold,isQuoted){var ret="";if(text.length>threshold){if(isQuoted)ret+="&quot;";ret+=text.substr(0,threshold);ret+="&hellip;";if(isQuoted)ret+="&quot;";}
else if(isQuoted){ret="&quot;"+text+"&quot;";}
else{ret=text;}
return ret;},AddHoursToDate:function(date,hours){date.setHours(date.getHours()+hours);return date;},BoolToString:function(value){return(value==true||value.toString().toLowerCase()=="true")?'true':'false';},ButtonEnable:function(selector,enabled,onclick){if(enabled){$(selector).removeClass("btn-disabled").removeAttr("disabled");$(selector).unbind("click").bind("click",onclick);}
else{$(selector).addClass("btn-disabled").attr("disabled",true);$(selector).unbind("click");}},ExecuteFunctionByName:function(fullyQualifiedFunctionName,callback){var executionContext=window;var cb=fullyQualifiedFunctionName.split(".");for(var i=0;i<cb.length;i++){var fn=executionContext[cb[i]];if(typeof fn==='function'){fn(callback);}
executionContext=fn;}},DefaultButtonExtender:function(controlID,buttonID,controlContext,buttonContext){if(controlContext==null||controlContext==undefined){controlContext="body";}
if(buttonContext==null||buttonContext==undefined){buttonContext="body";}
$("#"+controlID,"#"+controlContext).keypress(function(e){if(e.which==13){$("#"+buttonID,"#"+buttonContext).click();}});},OmniWaitCursor:function(){$("*").css("cursor","wait");},AttributeEncode:function(string){return(''+string).replace(/'/g,'&quot;').replace(/"/g,'&quot;');}};(function($){$.fn.textfill=function(options){$.each(this,function(){var ourText=$('span:visible:first',this);var maxHeight=$(this).height()-2;var maxWidth=$(this).width()-10;var textHeight=ourText.height();var textWidth=ourText.width();var triggered=false;if(ourText.length>0){while((textHeight>maxHeight||textWidth>maxWidth)){if(ourText.html()!==null){triggered=true;ourText.html(ourText.html().substring(0,ourText.html().length-1));textHeight=ourText.height();textWidth=ourText.width();}}
if(triggered){ourText.html(ourText.html().substring(0,ourText.html().length-2)+String.fromCharCode(8230));}}
return this;});}})(jQuery);AR.Core.Utilities.Validation={IsBlank:function(data){return(!data||data.length==0);},IsEmail:function(addr){var email_regex=/^((\"[^\"\f\n\r\t\v\b]+\")|([\w\!\#\$\%\&\'\*\+\-\~\/\^\`\|\{\}]+(\.[\w\!\#\$\%\&\'\*\+\-\~\/\^\`\|\{\}]+)*))@((\[(((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9])))\])|(((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9]))\.((25[0-5])|(2[0-4][0-9])|([0-1]?[0-9]?[0-9])))|((([A-Za-z0-9\-])+\.)+[A-Za-z\-]+))$/;var addresses=addr.replace(",",";").replace("\n",";").replace(" ",";").replace(";;",";").split(";");for(x=0;x<addresses.length;x++){if(!email_regex.test(addresses[x])){return false;}}
return true;}}
$(document).ready(function(){AR.Core.Reviews.zoneRecipe=$("#zoneRecipe");AR.Core.Reviews.zoneReviews=$("#reviewsection",this.zoneRecipe);AR.Core.Reviews.layerReviews=$(".modal-recipe-reviews-carousel");});AR.Core.Reviews={zoneRecipe:null,zoneReviews:null,layerReviews:null,OpenReviewDialog:function(e){if(e){e.preventDefault();if(e.target)el=e.target;else if(e.srcElement)el=e.srcElement;}
else el=null;var serverdata=AR.ReviewCarousel.Options.LoadIndexFromDataAttribute?AR.ServerSideData.Get($(el).data("reviewID")):AR.ServerSideData.GetByDom(el);if(serverdata){if(serverdata.index===undefined){serverdata=AR.ServerSideData.Get($("#ratingRollup",this.zoneReviews).data("reviewID"))}
var index=parseInt(serverdata.index);if(isNaN(index))index=0;AR.ReviewCarousel.Data.CurrentReviewIndex=index;this.LoadReviewLayer();if(serverdata.source=="review"){var linkname=(el==null)?AR.Analytics.Action.LinkName.RecipeReviewLayerReviews:AR.Analytics.Action.LinkName.RecipeReviewLayerMoreReviews;AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerBlock,linkname);}else{AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerHeader,'');}}},LoadReviewLayer:function(){var sort=$("div.searchSortBy ul li a[class='active']",AR.Core.Reviews.layerReviews).data("sort");if(sort==null||sort==undefined){sort=4;}
var ctxt=$("#zoneReview",this.zoneRecipe);var reviewIndex=AR.ReviewCarousel.Data.CurrentReviewIndex;var ReviewDataCallback=function(response){var fatalError=false;var errorMessage="";var shouldLogError=AR.ShouldLogResponseCode(response.ResponseCode);if(response.ResponseCode==AR.ResponseCode.Success){var isCurrentPage=response.Data.PageNumber==AR.ReviewCarousel.GetCurrentPageNumber();AR.ReviewCarousel.Data.TotalRecords=response.Data.TotalRecords;if(AR.ReviewCarousel.Data.Reviews==null){AR.ReviewCarousel.Data.Reviews=new Array(response.Data.TotalRecords);}
if(response.Data.PageNumber>0&&response.Data.Items.length>0){AR.ReviewCarousel.StorePageData(response.Data.Items,response.Data.PageNumber);if(isCurrentPage){AR.Core.Reviews.LoadReviewLayer();}}
else{fatalError=true;shouldLogError=true;}}
else{fatalError=true;}
if(fatalError){AR.Dialog.CloseModalBox();AR.MessageBox.ShowFailure(AR.ReviewCarousel.Config.ErrorLoadingMessage,AR.ReviewCarousel.Config.MessageBoxSelector);if(shouldLogError){AR.LogErrorEx({ItemID:AR.LogEval("AR.ReviewCarousel.Data.ItemID"),ItemType:AR.LogEval("AR.ReviewCarousel.Data.ItemType")},"ReviewCarousel","Error in GetReviewsPaged_callback.");}}
AR.Cursor.SetDefault();};var SetupPaging=function(){if(!AR.ReviewCarousel.Config.DynamicMode){if(reviewIndex==0&&AR.ReviewCarousel.Data.TotalRecords>AR.ReviewCarousel.Data.Reviews.length){$("#lnkScrollReviewLeft").addClass("left-arrow-inactive");}else{$("#lnkScrollReviewLeft").removeClass("left-arrow-inactive");}}
if(AR.ReviewCarousel.Data.TotalRecords>1){$("#currentReview",ctxt).text(AR.ReviewCarousel.Data.CurrentReviewIndex+1);$("#totalReviews",ctxt).text(AR.ReviewCarousel.Data.TotalRecords);$(".paging",ctxt).show();}
else{$(".paging",ctxt).hide();}};SetupPaging();if(AR.ReviewCarousel.Data.Reviews[reviewIndex]){this.SetReviewLayerContent(AR.ReviewCarousel.Data.Reviews[reviewIndex]);}
else if(AR.ReviewCarousel.Config.DynamicMode){AR.ReviewCarousel.GetDataFromService(AR.ReviewCarousel.GetCurrentPageNumber(),sort,ReviewDataCallback);}
else{AR.ReviewCarousel.Navigate('reviews.aspx?SortBy=Helpfulness&Direction=Descending&Page=2');}
if(AR.ReviewCarousel.Config.DynamicMode&&AR.ReviewCarousel.Data.TotalRecords>0){AR.ReviewCarousel.PreLoadIndexData(AR.ReviewCarousel.GetNextReviewIndex(),sort,ReviewDataCallback);AR.ReviewCarousel.PreLoadIndexData(AR.ReviewCarousel.GetPreviousReviewIndex(),sort,ReviewDataCallback);}},IncrementHelpfulCounter:function(){$("*").css("cursor","wait");var linkReviewHelpuful=$("#lnkReviewHelpful",".modal-recipe-reviews-carousel");var reviewID=linkReviewHelpuful.data("reviewID");if(reviewID){AR.ClientService.SuppressNextLoaderChange();AR.ClientService.IncrementReviewWasHelpful(reviewID,function(response){if(response.ResponseCode==AR.ResponseCode.Success){AR.MessageBox.ShowSuccess("Thanks for voting! Your vote will be added soon.","#msgHelpful",false);AR.Core.Utilities.ButtonEnable(linkReviewHelpuful,false);var hCount=parseInt($("#helpfulCount").text());hCount++;$("#helpfulCount").text(hCount);AR.ReviewCarousel.Data.Reviews[AR.ReviewCarousel.Data.CurrentReviewIndex].HelpfulCount=hCount;}
else{AR.MessageBox.ShowFailure("Oops, something went wrong. Please try again.","#msgHelpful",false);}
$("*").css("cursor","default");});}},SetReviewLayerContent:function(review){if(review){var cookBaseUrl=(review.User.CustomUrlPiece)?AR.ClientUrlProvider.ResolveUrl("~/Cook/"+review.User.CustomUrlPiece):AR.ClientUrlProvider.ResolveUrl("~/Cook/"+review.User.ObfuscatedUserID);var ctxt=this.layerReviews;var starWidth=AR.Core.Stars.GetWidthFromRating($(".rating-stars-img",ctxt),review.Rating);$("#rating",ctxt).width(starWidth);AR.ReviewCarousel.SetLinkOrSpan("#userNameSpan","#userNameLink",review.User.DisplayName,(review.User.ObfuscatedUserID>0)?cookBaseUrl:null);$("#userImage",ctxt).attr("src",AR.ClientUrlProvider.ResolveImageUrl(((review.User.ProfileImageUrl!="")?review.User.ProfileImageUrl:"/ar/topnav/nopic50notext.png")));$("#dateUpdated",ctxt).text(review.Date);$("#reviewText",ctxt).text(review.Text);$("#lnkReviewHelpful",ctxt).data("reviewID",review.ID);$("#helpfulCount",ctxt).text(review.HelpfulCount);AR.Core.Utilities.ButtonEnable($("#lnkReviewHelpful",".modal-recipe-reviews-carousel"),true,function(){AR.Core.Reviews.IncrementHelpfulCounter();});var pos=AR.ReviewCarousel.Data.CurrentReviewIndex+1;$("#jqAdIframeReview").attr("src",AR.Ads.GenerateIFrameURL(pos,"300x250","review"));if(!$(AR.ReviewCarousel.Options.ContainerSelector).is(":visible")){AR.Dialog.ShowLayer(AR.ReviewCarousel.Options.ContainerSelector);}}}};$(document).ready(function(){var zoneRecipe=$("#zoneRecipe"),zoneReviewLayer=$("#zoneReview"),zoneReviews=$("#reviewsection",zoneRecipe),layerReviews=$(".modal-recipe-reviews-carousel"),submitterInfo=$("#spanReviewerInfo",zoneReviews);var SortReviewsInLayer=function(sort,startingIndex){if(startingIndex==null||startingIndex==undefined){startingIndex=0;}
var existing=AR.ReviewCarousel.Data;AR.ReviewCarousel.Data.CurrentReviewIndex=startingIndex;delete AR.ReviewCarousel.Data.Reviews;AR.ReviewCarousel.Data.Reviews=new Array(AR.ReviewCarousel.Data.TotalRecords);AR.Core.Reviews.LoadReviewLayer();};$("div.searchSortBy ul li a",zoneReviewLayer).click(function(e){$("div.searchSortBy ul li a[class='active']",zoneReviewLayer).removeClass("active");var link=$(this);link.addClass("active");var sort=link.data("sort");var sortAnalyticsText=AR.Analytics.Action.LinkName.ReviewLayerSortByMostHelpful;switch(sort){case 2:sortAnalyticsText=AR.Analytics.Action.LinkName.ReviewLayerSortByNewest;break;case 4:sortAnalyticsText=AR.Analytics.Action.LinkName.ReviewLayerSortByMostHelpful;break;case 5:sortAnalyticsText=AR.Analytics.Action.LinkName.ReviewLayerSortByLeastPositive;break;case 6:sortAnalyticsText=AR.Analytics.Action.LinkName.ReviewLayerSortByMostPositive;break;}
AR.Analytics.RecordLinkName(sortAnalyticsText);SortReviewsInLayer(sort);});$(".link-open-review-dialog",zoneRecipe).click(function(e){$("div.searchSortBy ul li a",zoneReviewLayer).removeClass("active").first().addClass("active");AR.Analytics.SendBeacon({"prop34":AR.Analytics.Action.LinkName.RecipeReviewLayerMoreReviews,"linkTrackVars":"prop34"});var page=1,index=-1;if($(this).data("page")!=undefined){page=$(this).data("page");}
if($(this).data("index")!=undefined){index=$(this).data("index");}
if(index>=0){var totalIndex=((page-1)*10)+index;for(var i=0;i<totalIndex;i++){AR.ReviewCarousel.Data.CurrentReviewIndex=AR.ReviewCarousel.GetNextReviewIndex();}
SortReviewsInLayer(4,totalIndex);}
else{SortReviewsInLayer(4);}});$("#lnkReviewHelpful",layerReviews).click(function(){AR.Core.Reviews.IncrementHelpfulCounter();});$("#lnkScrollReviewLeft",layerReviews).click(function(e){LoadPreviousReview(e);});$("#lnkScrollReviewRight",layerReviews).click(function(e){LoadNextReview(e);});var LoadPreviousReview=function(e){e.preventDefault();if(!$("#lnkScrollReviewLeft").hasClass('left-arrow-inactive')){AR.ReviewCarousel.Data.CurrentReviewIndex=AR.ReviewCarousel.GetPreviousReviewIndex();AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerTurn,'');AR.Core.Reviews.LoadReviewLayer();}};var LoadNextReview=function(e){e.preventDefault();AR.ReviewCarousel.Data.CurrentReviewIndex=AR.ReviewCarousel.GetNextReviewIndex();AR.ReviewCarousel.RecordView(AR.Analytics.Action.LinkName.RecipeReviewLayerTurn,'');AR.Core.Reviews.LoadReviewLayer();};var ViewAll_onClick=function(e){AR.Analytics.RecordInternalSource(AR.Analytics.Action.LinkName.RecipeReviewLayerViewAll);};});