if(typeof(robotreplay)=="undefined"||typeof(robotreplay.Domready)=="undefined"){if(typeof robotreplay=="undefined"){robotreplay={}}var robotreplayInit=function(){var r=robotreplay;r.version=12.1;r.images="/_fsr_/images/";
r.swf_url="/blair/foresee/transport5.swf";
r.secure_swf_url="/blair/foresee/transport5.swf";
r.browserControl=false;r.enabledBrowsers={"ie":{"6":true,"7":true,"8":true,"9":true},"mozilla":{"3":true,"4":true,"5":true},"chrome":{"10":true,"11":true,"12":true},"webkit":{"4":true,"5":true},"opera":{"9":true,"10":true,"11":true}};r.domains={'blair.com':'blair.com'};r.pingTime=30000;r.hiddenFieldClassName="fsrHidden";r.visibleFieldClassName="fsrVisible";r.hiddenBlockOpenTag="fsrHiddenBlockStart";r.hiddenBlockCloseTag="fsrHiddenBlockEnd";r.flashMajorVersion=9;r.omitTagList='';r.windowNameDelimiter="__RRSTORAGE__"}();robotreplay.href=window.location.href;robotreplay.location={};for(var p in window.location){if(typeof(window.location[p])=='string'){robotreplay.location[p]=window.location[p]}}robotreplay.location.toString=function(){return this.href};robotreplay.noop=function(){};robotreplay.close=function(c,f,p){if(null==p){return function(){return f.apply(c,arguments)}}else{return function(){return f.apply(c,p)}}};robotreplay.forEach=function(o,f,c){var s=true;for(var i in o){if(Object.hasOwnProperty.call(o,i)){s=(f.call(c||window,i,o)==false||!s?false:true)}}return s};robotreplay.encodingMap={"~":"(rrt)","*":"(rrs)","'":"(rra)","&":"(rram)","_":"(rru)","\n":"(rrnl)"};robotreplay.formEncodingMap={":":":fc:",";":":sc:","[":":sbo:","]":":sbc:",",":":cc:"};robotreplay.encodeRRChars=function(s){return robotreplay._encode(s,robotreplay.encodingMap)};robotreplay.encodeFormRRChars=function(s){return robotreplay._encode(s,robotreplay.formEncodingMap)};robotreplay._encode=function(s,map){s+="";robotreplay.forEach(map,function(c,m){s=s.replace(new RegExp("\\"+c,"g"),m[c])},this);return s};(function(){var w=window,ss=w.sessionStorage,s=w.name,d="__RRSTORAGE__";var u=function(){try{w.sessionStorage.robotreplay=s.substr(s.indexOf(d))}catch(e){if(e.name=="NS_ERROR_DOM_SECURITY_ERR")return;try{robotreplay.Log.cancelRecord()}catch(e){}}};if(typeof ss=='object'){if(w.name==null)w.name='';var i=s.indexOf(d);if(typeof w.name=='undefined'||w.name==''||i<0){w.name=w.name+" ";if(typeof ss.robotreplay!='undefined'&&ss.robotreplay!=''&&ss.robotreplay!=null){w.name+=ss.robotreplay}}try{ss.setItem('robotreplay','')}catch(e){}if(w.addEventListener){w.addEventListener('unload',u,true);}else if(w.attachEvent){w.attachEvent('onunload',u);}}})();robotreplay.Html={getOuterHtml:function(node){if(robotreplay.browser=="ie")return node.outerHTML;else{var html='';switch(node.nodeType){case Node.ELEMENT_NODE:html+='<';html+=node.nodeName.toLowerCase();if(!robotreplay.Html.specialElements[node.nodeName]){for(var a=0;a<node.attributes.length;a++){if(node.attributes[a].nodeName.toLowerCase()!="_moz-userdefined"){html+=' '+node.attributes[a].nodeName.toLowerCase()+'="'+node.attributes[a].nodeValue+'"'}}html+='>';if(!robotreplay.Html.emptyElements[node.nodeName]){html+=node.innerHTML;html+='<\/'+node.nodeName.toLowerCase()+'>'}}else switch(node.nodeName){case'TEXTAREA':for(var a=0;a<node.attributes.length;a++)if(node.attributes[a].nodeName.toLowerCase()!='value')html+=' '+node.attributes[a].nodeName.toUpperCase()+'="'+node.attributes[a].nodeValue+'"';else var content=node.attributes[a].nodeValue;html+='>';html+=content;html+='<\/'+node.nodeName+'>';break}break;case Node.TEXT_NODE:html+=node.nodeValue;break;case Node.COMMENT_NODE:html+='<!'+'--'+node.nodeValue+'--'+'>';break}return html}},specialElements:{TEXTAREA:true},charset:function(){if(robotreplay.browser=="ie"){return document.charset}else{return document.characterSet}},emptyElements:{HR:true,BR:true,IMG:true,INPUT:true}};robotreplay.Math={distance:function(v1,v2){if(v1.x)return Math.sqrt(Math.pow(v2.y-v1.y,2)+Math.pow(v2.x-v1.x,2));else return Math.sqrt(Math.pow(v2[0]-v1[0],2)+Math.pow(v2[1]-v1[1],2))}};robotreplay.sync=function(handler,events,context){var i=events.length;var f=function(){i--;if(!i){handler.call(context)}};for(var i=0;i<events.length;i++){var e=events[i];if(!e.notified){e.subscribeOnce(f)}else{i--}}if(i==0){handler.call(context)}};robotreplay.Subject=function(type){this.type=type;this.handlers={};this.guid=0;this.notified=false};robotreplay.Subject.prototype={notify:function(){var args=arguments;if(args.length==0){args=new Array();args[0]=new robotreplay.EventArgs(null,this);args[0].event=this;args[0].source=null}else if(typeof(args[0].event)!="undefined"&&args[0].event==null){args[0].event=this}var fail=robotreplay.forEach(this.handlers,function(item){var handler=this.handlers[item];if(handler instanceof Function){return handler.apply(this,args)}},this);this.notified=true;return fail},subscribe:function(method,context,guid){if(method==null)return;var func=method;if(typeof context=="object"&&method instanceof Function){func=robotreplay.close(context,method)};guid=guid||func.observer_guid||method.observer_guid||this.guid++;func.observer_guid=guid;method.observer_guid=guid;this.handlers[guid]=func;return guid},subscribeOnce:function(method,context){if(!method){return}var guid=null;var _this=this;var func1=function(){method.apply(context||null,arguments);_this.unSubscribe(guid)};guid=this.subscribe(func1);return guid},unSubscribe:function(guid){if(guid instanceof Function){guid=guid.observer_guid}this.handlers[guid]=null;delete this.handlers[guid]}};robotreplay.onInit=new robotreplay.Subject();robotreplay.onFlashReady=new robotreplay.Subject();robotreplay.ResponseEventArgs=function(source,subject,message){this.source=source;this.subject=subject;this.message=message||{}};robotreplay.ScriptTransport=function(id){this.targetUrl="";this.onSuccess=new robotreplay.Subject();this.onFailure=new robotreplay.Subject();this.type='script'};robotreplay.ScriptTransport.inTransit={};robotreplay.ScriptTransport.prototype.send=function(data,action){var url=this.targetUrl||robotreplay.User.rec_servers.script;this.data=data.data;delete data.data;var query=this.formatQuery(data);url+="?act=Rec3."+action+"&"+query;this.marshalRequests(this.data,url)};robotreplay.ScriptTransport.prototype.marshalRequests=function(data,url){var rb=robotreplay.Browser.browser;var blockIndex=0;var bufferSpace=50;var encodedData=encodeURIComponent(data);do{blockIndex+=1;var currentBlockData=encodedData;if((encodedData.length+url.length+bufferSpace)>=rb.maxurllength){for(var i=encodedData.length-1;i>21;i-=20){currentBlockData=encodedData.substr(0,i);if((currentBlockData.length+url.length+bufferSpace)<=rb.maxurllength){break}}currentBlockData=currentBlockData.substr(0,currentBlockData.lastIndexOf("~"))}encodedData=encodedData.substr(currentBlockData.length);this._send(currentBlockData,url,blockIndex)}while(encodedData.length>0&&currentBlockData.length>0)};robotreplay.ScriptTransport.prototype._send=function(data,url,blockIndex){var id=robotreplay.MD5.hash(data,1);url+="&id="+id+"&client_timestamp="+new Date().valueOf();this.id=id;var that=this;robotreplay.ScriptTransport.inTransit[id]={handleResponse:function(){that.handleResponse(id)}};if(document.getElementById(id)!=null){}var bodyElement=document.getElementsByTagName("body")[0];var scriptTag=document.createElement("script");scriptTag.type="text/javascript";scriptTag.id=id;scriptTag.setAttribute("src",url+"&data="+data+"&request_id="+blockIndex);if(data&&data.length>0){bodyElement.appendChild(scriptTag)}else{scriptTag=null}};robotreplay.ScriptTransport.prototype.formatQuery=function(params){var query="";robotreplay.forEach(params,function(name){if(name!="client_timestamp"&&name!="request_id"){var value=params[name];if(name=="url"){value=encodeURIComponent(value)}query+=name+"="+value+"&"}});query=query.replace(/&$/,"");return query};robotreplay.ScriptTransport.prototype.handleResponse=function(id){var node=document.getElementById(id);node.parentNode.removeChild(node);delete robotreplay.ScriptTransport.inTransit[id];this.onSuccess.notify(new robotreplay.ResponseEventArgs(this,this.onSuccess,id))};robotreplay.FlashTransport=function(id){this.id=id||"_r"+Math.round(Math.random()*10000);this.targetUrl="";this.onSuccess=new robotreplay.Subject();this.onFailure=new robotreplay.Subject();this.type='flash'};robotreplay.FlashTransport.inTransit={};robotreplay.FlashTransport.transitTimes={};robotreplay.FlashTransport.prototype.send=function(data,action){var r=robotreplay;var url=this.targetUrl||r.User.rec_servers.amf;var transport=r.Swf.getMovie();this.data=data.data;r.FlashTransport.inTransit[this.id]=this;r.FlashTransport.transitTimes[this.id]=new Date();var retVal=false;if(transport){switch(action){case"event":retVal=transport.sendEventData(data.data,url,this.id,data.client_timestamp,data.version,data.url,data.session_id,data.request_id,data.retries);break;case"session":retVal=transport.sendSessionData(url,this.id,data.client_timezone,data.version,data.session_id,data.group_session_id,data.user_id,data.user_domain,data.browser,data.start_time,data.metadata);break;case"dom":if(data.charset){retVal=transport.sendDomDataWithCharset(data.html,url,this.id,data.hash,data.client_timestamp,data.request_id,data.url,data.url_md5,data.retries,data.version,data.charset,data.session_id)}else{retVal=transport.sendDomData(data.html,url,this.id,data.hash,data.client_timestamp,data.request_id,data.url,data.url_md5,data.retries,data.version,data.session_id)}break;case"ping":retVal=transport.sendPing(url,data.session_id);break}}return retVal};robotreplay.FlashTransport.prototype.handleResponse=function(response){var r=robotreplay,F=r.FlashTransport,R=r.ResponseEventArgs;delete F.inTransit[this.id];var e=r.JSON.parse(response);if(F.isSuccess(e)){this.onSuccess.notify(new R(this,this.onSuccess,e))}else{this.onFailure.notify(new R(this,this.onFailure,e))}};robotreplay.FlashTransport.isSuccess=function(e){try{if(e.status==1){return true}}catch(e){}return false};robotreplay.Cookies={SESSIONGROUPID:"rr_group_id",SESSIONID:"rr_session_id",DOMAINKEY:"rr_domain",VERSIONKEY:"rr_version",ISRESP:"rr_is_respondent",RECCANCELLED:"reccancelled",namespace:'foresee.analytics',_cookesOn:false,cookiesOn:function(){if(this._cookesOn==true)return true;else{this.setCookie("rr_ctest","123",-1);if(this.getCookie("rr_ctest")=="123"){this.delCookie("rr_ctest");this._cookesOn=true;return true}else return false}},setCookie:function(name,value,expires,path,domain){robotreplay.Cookies.delCookie(name);path=path||"/";domain=(domain=="localhost"?"":domain);if(!expires&&expires!=-1)expires=3600000;var expires_date=new Date((new Date()).getTime()+(expires));var cookieData=name+"="+value+((expires!=-1)?"; expires="+expires_date.toGMTString():"")+((path)?"; path="+path:"")+((domain)?"; domain="+domain:"");document.cookie=cookieData},setNSCookie:function(name,value,expires,path,domain,ns){var c=this.getJSONCookie(ns);c[name]=value;if(value==""||value==null){delete c[name]}this.setCookie(ns||this.namespace,escape(robotreplay.JSON.stringify(c)),expires,path,domain)},getCookie:function(name,skipdecode){if(!name)name="";var start=document.cookie.indexOf(name+"=");var len=start+name.length+1;if((!start)&&(name!=document.cookie.substring(0,name.length))){return null}if(start==-1)return null;var end=document.cookie.indexOf(";",len);if(end==-1)end=document.cookie.length;if(!skipdecode)return decodeURIComponent(document.cookie.substring(len,end));else return document.cookie.substring(len,end)},getNSCookie:function(name,ns){var o=this.getJSONCookie(ns);if(typeof o[name]!="undefined"){return o[name]}else{return""}},getJSONCookie:function(name){var c=this.getCookie(name||this.namespace);var cP=null;if(c!=null&&c!=""){try{cP=robotreplay.JSON.parse(unescape(c))}catch(e){return{}}return cP}else{return{}}},delCookie:function(name,path,domain){var date=new Date();date.setTime(date.getTime()+(-1*24*60*60*1000));var expires="; expires="+date.toGMTString();document.cookie=name+"="+expires+"; path=/"}};robotreplay.Swf={wasAlive:false,hasTranslate:false,translateLoaded:true,so:{},swfObjectID:"rr_swfContainer",swfSize:{w:5,h:5},addTransportSwf:function(){if(this.hasTranslate){this.translateLoaded=false;var objs=document.getElementsByTagName("object");for(var i=0,j=objs.length;i<j;i++){if(objs[i].data&&objs[i].data.indexOf("translate.googleapis")>-1){this.translateLoaded=true;break}}}if(!window.rr_isreplay&&this.translateLoaded){var r=robotreplay,rs=robotreplay.Swf;var scr=document.createElement('div');var s=scr.style;s.position="absolute";s.top="1px";s.left="1px";s.width=(rs.swfSize.w+1)+"px";s.height=(rs.swfSize.h+1)+"px";s.minHeight=(rs.swfSize.w+1)+"px";s.minWidth=(rs.swfSize.h+1)+"px";s.padding="0px";s.margin="0px";s.display="block";s.visibility="visible";s.zIndex="100000";scr.id=rs.swfObjectID;document.body.appendChild(scr);var so=new rs.so.SWFObject((window.location.protocol==="https:"?r.secure_swf_url:r.swf_url),rs.swfObjectID+"m",rs.swfSize.w,rs.swfSize.h,r.flashMajorVersion+".0.0","");so.addParam("quality","high");so.addParam("wmode","transparent");so.addParam("allowScriptAccess","always");so.write(rs.swfObjectID);rs.repositionMovie()}else if(!this.translateLoaded){setTimeout(function(){robotreplay.Swf.addTransportSwf()},2000)}},movieCache:null,getMovie:function(){var rs=robotreplay.Swf;if(!rs.movieCache){rs.movieCache=document.getElementById(robotreplay.Swf.swfObjectID+"m")}return rs.movieCache},isAlive:function(){var isAlive=false;var fObj=this.getMovie();try{fObj.isAlive();this.wasAlive=isAlive=true}catch(e){isAlive=false}return isAlive},repositionMovie:function(){var r=robotreplay;try{r.Geometry.setScrollPosition();var winpos=r.Geometry.getScrollPosition();var flObj=this.getMovie();flObj.style.left=(winpos.scrollLeft+1)+"px";flObj.style.top=(winpos.scrollTop+1)+"px";flObj.style.width="6px";flObj.style.height="6px";flObj.style.minHeight="6px";flObj.style.minWidth="6px"}catch(e){}},installed:false,isInstalled:function(){return true;}};if(typeof robotreplay.Swf.so.util=="undefined"){robotreplay.Swf.so.util=new Object()}if(typeof robotreplay.Swf.so.SWFObjectUtil=="undefined"){robotreplay.Swf.so.SWFObjectUtil=new Object()}robotreplay.Swf.so.SWFObject=function(_1,id,w,h,_5,c,_7,_8,_9,_a){if(!document.getElementById){return}this.DETECT_KEY=_a?_a:"detectflash";this.skipDetect=robotreplay.Swf.so.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(_1){this.setAttribute("swf",_1)}if(id){this.setAttribute("id",id)}if(w){this.setAttribute("width",w)}if(h){this.setAttribute("height",h)}if(_5){this.setAttribute("version",new robotreplay.Swf.so.PlayerVersion(_5.toString().split(".")))}this.installedVer=robotreplay.Swf.so.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){robotreplay.Swf.so.SWFObject.doPrepUnload=true}if(c){this.addParam("bgcolor",c)}var q=_7?_7:"high";this.addParam("quality",q);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var _c=(_8)?_8:window.location;this.setAttribute("xiRedirectUrl",_c);this.setAttribute("redirectUrl","");if(_9){this.setAttribute("redirectUrl",_9)}};robotreplay.Swf.so.SWFObject.prototype={useExpressInstall:function(_d){this.xiSWFPath=!_d?"expressinstall.swf":_d;this.setAttribute("useExpressInstall",true)},setAttribute:function(_e,_f){this.attributes[_e]=_f},getAttribute:function(_10){return this.attributes[_10]},addParam:function(_11,_12){this.params[_11]=_12},getParams:function(){return this.params},addVariable:function(_13,_14){this.variables[_13]=_14},getVariable:function(_15){return this.variables[_15]},getVariables:function(){return this.variables},getVariablePairs:function(){var _16=new Array();var key;var _18=this.getVariables();for(key in _18){_16.push(key+"="+_18[key])}return _16},getSWFHTML:function(){var _19="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath)}_19="<embed style=\"position:absolute;top:1px;left:1px;\" type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\"";_19+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" ";var _1a=this.getParams();for(var key in _1a){_19+=[key]+"=\""+_1a[key]+"\" "}var _1c=this.getVariablePairs().join("&");if(_1c.length>0){_19+="flashvars=\""+_1c+"\""}_19+="/>"}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath)}_19="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\">";_19+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";var _1d=this.getParams();for(var key in _1d){_19+="<param name=\""+key+"\" value=\""+_1d[key]+"\" />"}var _1f=this.getVariablePairs().join("&");if(_1f.length>0){_19+="<param name=\"flashvars\" value=\""+_1f+"\" />"}_19+="</object>"}return _19},write:function(_20){if(this.getAttribute("useExpressInstall")){var _21=new robotreplay.Swf.so.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(_21)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title)}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=(typeof _20=="string")?document.getElementById(_20):_20;n.innerHTML=this.getSWFHTML();return true}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"))}}return false}};robotreplay.Swf.so.SWFObjectUtil.getPlayerVersion=function(){var _23=new robotreplay.Swf.so.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_23=new robotreplay.Swf.so.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."))}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_23=new robotreplay.Swf.so.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always"}catch(e){if(_23.major==6){return _23}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){}}if(axo!=null){_23=new robotreplay.Swf.so.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","))}}return _23};robotreplay.Swf.so.PlayerVersion=function(_27){this.major=_27[0]!=null?parseInt(_27[0]):0;this.minor=_27[1]!=null?parseInt(_27[1]):0;this.rev=_27[2]!=null?parseInt(_27[2]):0};robotreplay.Swf.so.PlayerVersion.prototype.versionIsValid=function(fv){if(this.major<fv.major){return false}if(this.major>fv.major){return true}if(this.minor<fv.minor){return false}if(this.minor>fv.minor){return true}if(this.rev<fv.rev){return false}return true};robotreplay.Swf.so.util={getRequestParameter:function(_29){var q=document.location.search||document.location.hash;if(q){var _2b=q.substring(1).split("&");for(var i=0;i<_2b.length;i++){if(_2b[i].substring(0,_2b[i].indexOf("="))==_29){return _2b[i].substring((_2b[i].indexOf("=")+1))}}}return""}};robotreplay.Swf.so.SWFObjectUtil.cleanupSWFs=function(){var _2d=document.getElementsByTagName("OBJECT");for(var i=_2d.length;i>0;i--){_2d[i].style.display="none";for(var x in _2d[i]){if(typeof _2d[i][x]=="function"){_2d[i][x]=function(){}}}}};if(robotreplay.Swf.so.SWFObject.doPrepUnload){robotreplay.Swf.so.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",robotreplay.Swf.so.SWFObjectUtil.cleanupSWFs)};window.attachEvent("onbeforeunload",robotreplay.Swf.so.SWFObjectUtil.prepUnload)}if(Array.prototype.push==null){Array.prototype.push=function(_30){this[this.length]=_30;return this.length}};robotreplay.TransportFactory=function(){};robotreplay.TransportFactory.noScriptSaves=false;robotreplay.TransportFactory.getTransport=function(emergency,id){var r=robotreplay,S=r.Swf;var o=null;if(S.isInstalled()&&robotreplay.Domready.didExecute==true){if(S.isAlive()){o=new r.FlashTransport(id);o.targetUrl=r.User.rec_servers.amf}else if(emergency&&!this.noScriptSaves){o=new r.ScriptTransport();o.targetUrl=r.User.rec_servers.script}if(o!=null&&(o.targetUrl.indexOf('//localhost')<0&&o.targetUrl.indexOf('192.168')<0)){o.targetUrl=o.targetUrl.replace("http:","https:")}}return o};robotreplay.Dom={getCoords:function(obj){var left,top,ew,eh;left=top=ew=eh=0;try{ew=obj.offsetWidth;eh=obj.offsetHeight}catch(e){}if(obj.offsetParent){do{left+=obj.offsetLeft;top+=obj.offsetTop}while(obj=obj.offsetParent)}return{x:left,y:top,height:eh,width:ew}},getPageDimensions:function(){var dims={};var elem;if(robotreplay.browser=="ie"){elem=document.body}else{elem=document.documentElement}dims.w=elem.scrollWidth;dims.h=elem.scrollHeight;return dims},getiFrameCoords:function(e){var c={x:0,y:0},w=null;try{var getWin=(robotreplay.browser=="ie"?function(e){return e.ownerDocument.parentWindow.window}:function(e){if(e.ownerDocument)return e.ownerDocument.defaultView;else return e});w=getWin(e);if(w!==top){var f=w.frameElement;while(f){var fc=this.getCoords(f);c.x+=fc.x;c.y+=fc.y;if(f.ownerDocument){f=getWin(f).frameElement}else{f=null}}}}catch(e){}return c},getAbsoluteCoords:function(myobj){var ac=this.getCoords(myobj);var ic=this.getiFrameCoords(myobj);ac.y+=ic.y;ac.x+=ic.x;return ac},getiFrameReference:function(frameEl){var br=robotreplay.browser;var resId=frameEl.id;if(br=="ie"){var iFr=frameEl.ownerDocument.parentWindow.window.frameElement;try{while(iFr){resId=iFr.id+";"+resId;var iFr=iFr.ownerDocument.parentWindow.window.frameElement}}catch(e){}}else{var iFr=frameEl.ownerDocument.defaultView.frameElement;try{while(iFr){resId=iFr.id+";"+resId;var iFr=iFr.ownerDocument.defaultView.frameElement}}catch(e){}}return resId},getCaretInfo:function(oTextarea){var docObj=oTextarea.ownerDocument;var result={start:0,end:0,caret:0};if(robotreplay.browser=="ie"){if(oTextarea.tagName.toLowerCase()=="textarea"){if(oTextarea.value.charCodeAt(oTextarea.value.length-1)<14){oTextarea.value=oTextarea.value.replace(/34/g,'')+String.fromCharCode(28);}var oRng=docObj.selection.createRange();var oRng2=oRng.duplicate();oRng2.moveToElementText(oTextarea);oRng2.setEndPoint('StartToEnd',oRng);result.end=oTextarea.value.length-oRng2.text.length;oRng2.setEndPoint('StartToStart',oRng);result.start=oTextarea.value.length-oRng2.text.length;result.caret=result.end;if(oTextarea.value.substr(oTextarea.value.length-1)==String.fromCharCode(28)){oTextarea.value=oTextarea.value.substr(0,oTextarea.value.length-1)}var startcOffset=(oTextarea.value.substr(0,result.start).split('\n').length)-1;var caretcOffset=(oTextarea.value.substr(0,result.caret).split('\n').length)-1;var endcOffset=(oTextarea.value.substr(0,result.end).split('\n').length)-1;result.caret-=caretcOffset;result.start-=startcOffset;result.end-=endcOffset;}else{var range=docObj.selection.createRange();var r2=range.duplicate();result.start=0-r2.moveStart('character',-100000);result.end=result.start+range.text.length;result.caret=result.end}}else{result.start=oTextarea.selectionStart;result.end=oTextarea.selectionEnd;result.caret=result.end}if(result.start<0){result={start:0,end:0,caret:0}}return result},objectsSame:function(obj1,obj2){var issame=true;robotreplay.forEach(obj1,function(i){if(!obj2[i]){if(obj1[i]){issame=false}}else{if(obj2[i]!=obj1[i]){issame=false}}});return issame},getMulti:function(ob){selected=new Array();for(var i=0;i<ob.options.length;i++){if(ob.options[i].selected){selected.push(i)}}return selected},getCheckedValue:function(radioObj){if(!radioObj)return"";var radioLength=radioObj.length;if(radioLength==undefined)if(radioObj.checked)return radioObj.value;else return"";for(var i=0;i<radioLength;i++){if(radioObj[i].checked){return radioObj[i].value}}return""},isIFrame:function(){return(self!==this.getTop()&&window.rr_test!=true)},getTop:function(){try{if(top.ntbtestdoc!=null){return top.ntbtestdoc}if(robotreplay.Browser.browser.basetype!="ie")delete(top)}catch(e){return null}return top},idTest:/^[a-z]*#([a-z][\w\-:.]*)$/i,watchInterval:900,watch:function(selector,watchsize,callback,persistent,params){if(robotreplay.Log.getIsCancelled()==false){if(!params){params={watchid:true}}if(!params.delay){params.delay=750}if(!params.watchmask){params.watchmask=false}if(!params.watchtest){watchtest=false}if(persistent){params.watchexist=true}params.size=params.size||watchsize;callback=callback||function(){};params.callback=callback;var s=selector.split(",");for(var i=0;i<s.length;i++){this.domWatches[s[i]]={params:params}}}},watchOnce:function(selector,watchsize,callback,persistent,params){if(robotreplay.Log.getIsCancelled()==false){callback=callback||function(){};var handler=function(node,firstAdd){if(firstAdd!==true){delete robotreplay.Dom.domWatches[selector]}return callback.call(window,node)};this.watch(selector,watchsize,handler,persistent,params)}},runWatch:function(){var r=robotreplay,D=r.Dom;var startTime=new Date();var canContinue=robotreplay.Capture.mouseOverPage;if(r.Log.getIsCancelled()==false){r.forEach(this.domWatches,function(selector,collection){if(canContinue){var item=collection[selector];var params=item.params;if(params.watchexist){this.existWatch(selector,params)}var m=selector.match(this.idTest);if(m){var elem=document.getElementById(m[1]);if(elem){this._watch(elem,params)}}else{var n=this.query.select(selector);for(var i=0;i<n.length;i++){var elem=n[i];this.getId(elem,'rr_newel');this._watch(elem,params)}}if(new Date()-startTime>2000)canContinue=false}else{}},D);for(var j=0;j<this.attributeWatches.length;j++){var selector=this.attributeWatches[j].selector;var name=this.attributeWatches[j].name;var m=selector.match(this.idTest);if(m){D._watchAttribute(m[1],name)}else{var n=D.query.select(selector);for(var i=0;i<n.length;i++){var id=this.getId(n[i],'_rel');D._watchAttribute(id,name)}}}}else{clearInterval(D.watchInterval)}},_watch:function(elem,params){if(robotreplay.Log.getIsCancelled()==false){if(params.watchtest&&!params.watchtest.call()){return}if(params.watchvis){this.watchVis(elem)}if(params.watchpos){this.watchPos(elem)}if(params.watchcheck){this.watchCheck(elem)}if(params.watchid){this.watchContent(elem,params.watchsize,params.callback,params.watchmask)}}},attributeWatches:[],domWatches:{},posHistory:{},watchPos:function(obj){if(obj){var r=robotreplay;var rd=r.Dom;var id=obj.id;var top=rd.getStyle(obj,'top');var left=rd.getStyle(obj,'left');if(!rd.posHistory[id]){rd.posHistory[id]={top:top,left:left}}if(rd.posHistory[id].top!=top||rd.posHistory[id].left!=left){rd.posHistory[id]={top:top,left:left};r.Log.push("ce",{fn:escape("var elm = document.getElementById('"+id+"'); elm.style.top='"+top+"';elm.style.left='"+left+"';")})}}},checkHistory:{},watchCheck:function(obj){if(obj){var r=robotreplay;var rd=r.Dom;var id=obj.id;var isChecked=obj.checked;if(!rd.checkHistory[id]){rd.checkHistory[id]={isChecked:isChecked};r.Log.push("ce",{fn:escape("var elm = document.getElementById('"+id+"'); elm.checked = "+isChecked+";")})}if(rd.checkHistory[id].isChecked!=isChecked){rd.checkHistory[id]={isChecked:isChecked};r.Log.push("ce",{fn:escape("var elm = document.getElementById('"+id+"'); elm.checked = "+isChecked+";")})}}},visHistory:{},watchVis:function(obj){if(obj){var r=robotreplay;var rd=r.Dom;var id=obj.id;var vis=rd.getStyle(obj,'visibility');var dis=rd.getStyle(obj,'display');if(!rd.visHistory[id]){rd.visHistory[id]={vis:vis,dis:dis}}if(rd.visHistory[id].vis!=vis||rd.visHistory[id].dis!=dis){rd.visHistory[id]={vis:vis,dis:dis};r.Log.push("ce",{fn:escape("var elm = document.getElementById('"+id+"'); elm.style.visibility='"+vis+"';elm.style.display='"+dis+"';")})}}},initDeleteTracker:{},existTracker:{},existWatch:function(selector,params){var r=robotreplay;var m=selector.match(this.idTest);if(m){var n=document.getElementById(m[1]);if(n){this._existWatch(n,params)}else if(!this.initDeleteTracker[selector]){this.initDeleteTracker[selector]=true;r.Log.push("del",{eid:"SRnoid",esel:selector})}}else{var n=this.query.select(selector);for(var i=0;i<n.length;i++){this._existWatch(n[i],params)}if(n.length==0&&!this.initDeleteTracker[selector]){this.initDeleteTracker[selector]=true;r.Log.push("del",{eid:"SRnoid",esel:selector})}}r.forEach(this.existTracker,function(item){if(this.existTracker[item]&&!document.getElementById(item)){this.existTracker[item]=null;r.Log.push("del",{eid:item})}},this)},_existWatch:function(elem,params){var r=robotreplay;var id=this.getId(elem,'rrew_');if(!this.existTracker[id]){this.existTracker[id]=true;var pNode=elem.parentNode;var s='#'+pNode.id;if(pNode.tagName=="BODY"){s="body"}var result=params.callback.apply(window,[elem]);r.Log.push("ael",{pnode:s,eid:id,html:escape(r.Html.getOuterHtml(elem).replace(/\r\n/g,''))});if(result!==false){this.watchContent(elem,params.watchsize,params.callback);this._watchAttribute(id,"style")}}},quickSaveDOMNode:function(id){var h=document.getElementById(id).innerHTML;robotreplay.Log.push('sin',{id:id,html:escape(h.replace(/\r\n/g,''))})},htmlHash:{},watchContent:function(n,watchsize,callback,mask){var r=robotreplay;if((new Date()-r.Capture.lastScrollTime)>850){if(n!=null){robotreplay.Dom.maskNodes("input",n);robotreplay.Dom.maskNodes("textarea",n);robotreplay.Dom.forceVisible("input[type='button'], input[type='submit'], input[type='checkbox']",n);if(mask){robotreplay.Dom.maskNodes("#"+n.id+" *")}var id=n.id;var firstAdd=this.htmlHash[id]==null;callback.call(this,n,firstAdd);var h=(robotreplay.browser=="ie"?r.Dom.removeSizzleAttributes(n.innerHTML):n.innerHTML);var hasChanged=this.htmlHash[id]!=h;if(firstAdd||hasChanged){r.Log.push('sin',{id:id,html:escape(h.replace(/\r\n/g,''))});r.Capture.saveSelectBoxesState(n);r.Capture.performIndexing(n,null)}this.htmlHash[id]=h;if(watchsize){var w=n.offsetWidth;var h=n.offsetHeight;if((w&&h)&&(w!=width&&h!=height)){r.Log.push('ce',{fn:'try{var kjds = document.getElementById("'+id+'"); kjds.style.height=\''+h+'px\';kjds.style.width=\''+w+'px\';}catch(e){}'});r.Capture.performIndexing(n,null)}}}}},watchAttribute:function(selector,name){var s=selector.split(",");for(var i=0;i<s.length;i++){this.attributeWatches.push({selector:s[i],name:name})}},attrHash:{},_watchAttribute:function(id,name){var r=robotreplay;if((new Date()-r.Capture.lastScrollTime)>850){var n=document.getElementById(id);if(n!=null){var h,s;if(name!='class'&&name!='value'){h=n.getAttribute(name)||'';if(name=="style"&&'\v'=='v'&&typeof(h.cssText)!="undefined"){h=h.cssText.toString()}s='setAttribute("'+name+'","'+h+'")'}else if(name=='value'){h=n.value;s='value="'+h+'"'}else{h=n.className;s='className="'+h+'"'}if(this.attrHash[id+name]==null||this.attrHash[id+name]!=h){if(name=="style"){robotreplay.Log.push("ce",{fn:escape("robotreplay.Replay.Dom.setInlineStyle(document.getElementById('"+id+"'), '"+h.replace(/'/g,"\\'")+"');")})}else if(name=="disabled"&&(h==null||h=="")){s='removeAttribute("'+name+'")';robotreplay.Log.push('ce',{fn:escape('try{document.getElementById("'+id+'").'+s+';}catch(e){}')})}else{robotreplay.Log.push('ce',{fn:escape('try{document.getElementById("'+id+'").'+s+';}catch(e){}')})}this.attrHash[id+name]=h}}}},getDocType:function(){var dc='';var pre='<!DOCTYPE HTML PUBLIC "-//W3C//DTD ';var hs='HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">';var hl='HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">';var hx='HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">';var xs='XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">';var xt='XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">';var x='XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">';try{var cdt='';dc="";cdt=document.childNodes[0].nodeValue||document.doctype.systemId;cdt=cdt.toLowerCase();dc="<!DOCTYPE HTML>";if(cdt.indexOf('html4')>0&&cdt.indexOf('strict')>0){dc=pre+hs}else if(cdt.indexOf('html40')>0&&cdt.indexOf('loose')>0){dc=pre+hx}else if(cdt.indexOf('html4')>0&&cdt.indexOf('loose')>0){dc=pre+hl}else if(cdt.indexOf('xhtml1')>0&&cdt.indexOf('strict')>0){dc=pre+xs}else if(cdt.indexOf('xhtml1')>0&&cdt.indexOf('transitional')>0){dc=pre+xt}else if(cdt.indexOf('xhtml11.dtd')>0){dc=pre+x}}catch(e){dc="<!DOCTYPE HTML>"}return dc},getStyle:function(oElm,strCssRule){var strValue="";if(document.defaultView&&document.defaultView.getComputedStyle){strValue=document.defaultView.getComputedStyle(oElm,"").getPropertyValue(strCssRule)}else if(oElm.currentStyle){strCssRule=strCssRule.replace(/\-(\w)/g,function(strMatch,p1){return p1.toUpperCase()});strValue=oElm.currentStyle[strCssRule]}return strValue},getId:function(o,s){var id=o.id;if(!id||id==''){id=s+Math.round(Math.random()*10000);o.id=id}return id},removeSizzleAttributes:function(domHTML){var someHTML=domHTML.replace(/sizset=".*?"/g,"").replace(/sizcache=".*?"/g,"");return someHTML},maskNodes:function(selector,context){var nodes=robotreplay.Dom.query(selector,context);for(var i=0;i<nodes.length;i++){var e=nodes[i];var c=e.className;if(c!=null&&c.indexOf("fsrHidden")<0){c=(c?c+" fsrHidden":"fsrHidden");e.className=c}}},forceVisible:function(selector,context){var nodes=robotreplay.Dom.query(selector,context);for(var i=0;i<nodes.length;i++){var e=nodes[i];var c=e.className;if(e.getAttribute("type")!="hidden"&&c.indexOf("fsrVisible")==-1){c=c.replace('fsrHidden','');c=(c?c+" fsrVisible":"fsrVisible");e.className=c}}},removeHidden:function(selector,context){var nodes=robotreplay.Dom.query(selector,context);for(var i=0;i<nodes.length;i++){var e=nodes[i];var c=e.className;if(e.getAttribute("type")!="hidden"){c=c.replace('fsrHidden','');c=c.replace(/^\s*/,'').replace(/\s*$/,'');e.className=c}}},isElementVisible:function(elem){if(elem.offsetHeight==0&&elem.offsetWidth==0)return false;return true}};robotreplay.Dom.watchInterval=setInterval(robotreplay.close(robotreplay.Dom,robotreplay.Dom.runWatch),900);(function(r){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true;[0,0].sort(function(){baseHasDuplicate=false;return 0});var Sizzle=function(selector,context,results,seed){if(selector&&selector=="#")return[];results=results||[];context=context||document;var origContext=context;if(context.nodeType!==1&&context.nodeType!==9){return[]}if(!selector||typeof selector!=="string"){return results}var parts=[],m,set,checkSet,extra,prune=true,contextXML=Sizzle.isXML(context),soFar=selector,ret,cur,pop,i;do{chunker.exec("");m=chunker.exec(soFar);if(m){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break}}}while(m);if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context)}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift()}set=posProcess(selector,set)}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]}if(context){ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set)}else{prune=false}while(parts.length){cur=parts.pop();pop=cur;if(!Expr.relative[cur]){cur=""}else{pop=parts.pop()}if(pop==null){pop=context}Expr.relative[cur](checkSet,pop,contextXML)}}else{checkSet=parts=[]}}if(!checkSet){checkSet=set}if(!checkSet){Sizzle.error(cur||selector)}if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet)}else if(context&&context.nodeType===1){for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&Sizzle.contains(context,checkSet[i]))){results.push(set[i])}}}else{for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i])}}}}else{makeArray(checkSet,results)}if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results)}return results};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1)}}}}return results};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)};Sizzle.find=function(expr,context,isXML){var set;if(!expr){return[]}for(var i=0,l=Expr.order.length;i<l;i++){var type=Expr.order[i],match;if((match=Expr.leftMatch[type].exec(expr))){var left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(/\\/g,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break}}}}if(!set){set=context.getElementsByTagName("*")}return{set:set,expr:expr}};Sizzle.filter=function(expr,set,inplace,not){var old=expr,result=[],curLoop=set,match,anyFound,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);while(expr&&set.length){for(var type in Expr.filter){if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){var filter=Expr.filter[type],found,item,left=match[1];anyFound=false;match.splice(1,1);if(left.substr(left.length-1)==="\\"){continue}if(curLoop===result){result=[]}if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true}else if(match===true){continue}}if(match){for(var i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);var pass=not^!!found;if(inplace&&found!=null){if(pass){anyFound=true}else{curLoop[i]=false}}else if(pass){result.push(item);anyFound=true}}}}if(found!==undefined){if(!inplace){curLoop=result}expr=expr.replace(Expr.match[type],"");if(!anyFound){return[]}break}}}if(expr===old){if(anyFound==null){Sizzle.error(expr)}else{break}}old=expr}return curLoop};Sizzle.error=function(msg){throw"Syntax error, unrecognized expression: "+msg};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!/\W/.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase()}for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part}}if(isPartStrNotTag){Sizzle.filter(part,checkSet,true)}},">":function(checkSet,part){var isPartStr=typeof part==="string",elem,i=0,l=checkSet.length;if(isPartStr&&!/\W/.test(part)){part=part.toLowerCase();for(;i<l;i++){elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false}}}else{for(;i<l;i++){elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part}}if(isPartStr){Sizzle.filter(part,checkSet,true)}}},"":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck,nodeCheck;if(typeof part==="string"&&!/\W/.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck}checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck,nodeCheck;if(typeof part==="string"&&!/\W/.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck}checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?[m]:[]}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i])}}return ret.length===0?null:ret}},TAG:function(match,context){return context.getElementsByTagName(match[1])}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(/\\/g,"")+" ";if(isXML){return match}for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem)}}else if(inplace){curLoop[i]=false}}}return false},ID:function(match){return match[1].replace(/\\/g,"")},TAG:function(match,curLoop){return match[1].toLowerCase()},CHILD:function(match){if(match[1]==="nth"){var test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0}match[0]=done++;return match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1].replace(/\\/g,"");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name]}if(match[2]==="~="){match[4]=" "+match[4]+" "}return match},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop)}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret)}return false}}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true}return match},POS:function(match){match.unshift(true);return match}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden"},disabled:function(elem){return elem.disabled===true},checked:function(elem){return elem.checked===true},selected:function(elem){elem.parentNode.selectedIndex;return elem.selected===true},parent:function(elem){return!!elem.firstChild},empty:function(elem){return!elem.firstChild},has:function(elem,i,match){return!!Sizzle(match[3],elem).length},header:function(elem){return(/h\d/i).test(elem.nodeName)},text:function(elem){return"text"===elem.type},radio:function(elem){return"radio"===elem.type},checkbox:function(elem){return"checkbox"===elem.type},file:function(elem){return"file"===elem.type},password:function(elem){return"password"===elem.type},submit:function(elem){return"submit"===elem.type},image:function(elem){return"image"===elem.type},reset:function(elem){return"reset"===elem.type},button:function(elem){return"button"===elem.type||elem.nodeName.toLowerCase()==="button"},input:function(elem){return(/input|select|textarea|button/i).test(elem.nodeName)}},setFilters:{first:function(elem,i){return i===0},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array)}else if(name==="contains"){return(elem.textContent||elem.innerText||Sizzle.getText([elem])||"").indexOf(match[3])>=0}else if(name==="not"){var not=match[3];for(var j=0,l=not.length;j<l;j++){if(not[j]===elem){return false}}return true}else{Sizzle.error("Syntax error, unrecognized expression: "+name)}},CHILD:function(elem,match){var type=match[1],node=elem;switch(type){case'only':case'first':while((node=node.previousSibling)){if(node.nodeType===1){return false}}if(type==="first"){return true}node=elem;case'last':while((node=node.nextSibling)){if(node.nodeType===1){return false}}return true;case'nth':var first=match[2],last=match[3];if(first===1&&last===0){return true}var doneName=match[0],parent=elem.parentNode;if(parent&&(parent.sizcache!==doneName||!elem.nodeIndex)){var count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count}}parent.sizcache=doneName}var diff=elem.nodeIndex-last;if(first===0){return diff===0}else{return(diff%first===0&&diff/first>=0)}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array)}}}};var origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1)};for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+(/(?![^\[]*\])(?![^\(]*\))/.source));Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape))}var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results}return array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType;}catch(e){makeArray=function(array,results){var ret=results||[],i=0;if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array)}else{if(typeof array.length==="number"){for(var l=array.length;i<l;i++){ret.push(array[i])}}else{for(;array[i];i++){ret.push(array[i])}}}return ret}}var sortOrder;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition){if(a==b){hasDuplicate=true}return a.compareDocumentPosition?-1:1}var ret=a.compareDocumentPosition(b)&4?-1:a===b?0:1;if(ret===0){hasDuplicate=true}return ret}}else if("sourceIndex"in document.documentElement){sortOrder=function(a,b){if(!a.sourceIndex||!b.sourceIndex){if(a==b){hasDuplicate=true}return a.sourceIndex?-1:1}var ret=a.sourceIndex-b.sourceIndex;if(ret===0){hasDuplicate=true}return ret}}else if(document.createRange){sortOrder=function(a,b){if(!a.ownerDocument||!b.ownerDocument){if(a==b){hasDuplicate=true}return a.ownerDocument?-1:1}var aRange=a.ownerDocument.createRange(),bRange=b.ownerDocument.createRange();aRange.setStart(a,0);aRange.setEnd(a,0);bRange.setStart(b,0);bRange.setEnd(b,0);var ret=aRange.compareBoundaryPoints(Range.START_TO_END,bRange);if(ret===0){hasDuplicate=true}return ret}}Sizzle.getText=function(elems){var ret="",elem;for(var i=0;elems[i];i++){elem=elems[i];if(elem.nodeType===3||elem.nodeType===4){ret+=elem.nodeValue;}else if(elem.nodeType!==8){ret+=Sizzle.getText(elem.childNodes)}}return ret};(function(){var form=document.createElement("div"),id="script"+(new Date()).getTime();form.innerHTML="<a name='"+id+"'/>";var root=document.documentElement;root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match}}root.removeChild(form);root=form=null;})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i])}}results=tmp}return results}}div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)}}div=null;})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div");div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return}Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&context.nodeType===9&&!Sizzle.isXML(context)){try{return makeArray(context.querySelectorAll(query),extra)}catch(e){}}try{return oldSizzle(query,context,extra,seed)}catch(e){return[]}};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop]}div=null;})()}(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return}div.lastChild.className="e";if(div.getElementsByClassName("e").length===1){return}Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1])}};div=null;})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1&&!isXML){elem.sizcache=doneName;elem.sizset=i}if(elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1){if(!isXML){elem.sizcache=doneName;elem.sizset=i}if(typeof cur!=="string"){if(elem===cur){match=true;break}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}}elem=elem[dir]}checkSet[i]=match}}}Sizzle.contains=document.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):true)};Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};var posProcess=function(selector,context){var tmpSet=[],later="",match,root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"")}selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet)}return Sizzle.filter(later,tmpSet)};r.Dom.query=Sizzle;r.Dom.query.select=Sizzle})(robotreplay);robotreplay.User={id:524,rec_servers:{amf:'http://replay.foreseeresults.com/rec/amfservice/amf',script:'http://replay.foreseeresults.com/rec/scriptservice'}};robotreplay.Domready={browser:{},userAgent:"",readyBound:false,isReady:false,readyList:[],didExecute:false,loadedBound:false,isLoaded:false,loadedList:[],getBrowser:function(){var DR=robotreplay.Domready;DR.userAgent=navigator.userAgent.toLowerCase();DR.browser.version=(DR.userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1];DR.browser.safari=/webkit/.test(DR.userAgent);DR.browser.opera=/opera/.test(DR.userAgent);DR.browser.msie=(/msie/.test(DR.userAgent))&&(!/opera/.test(DR.userAgent));DR.browser.mozilla=(/mozilla/.test(DR.userAgent))&&(!/(compatible|webkit)/.test(DR.userAgent))},onLoad:function(){var DR=robotreplay.Domready;if(robotreplay.Replay||!robotreplay.Log.getIsCancelled()){if(robotreplay.onInit.notified){if(!DR.isLoaded){DR.isLoaded=true;if(DR.loadedList){for(var fn=0;fn<DR.loadedList.length;fn++){try{DR.loadedList[fn].call(window,[])}catch(err){}}DR.loadedList=[]}}}else{setTimeout(function(){robotreplay.Domready.onLoad()},50)}}},bindOnLoad:function(){var DR=robotreplay.Domready;if(DR.loadedBound){return}DR.loadedBound=true;if(document.attachEvent){window.attachEvent("onload",this.onLoad)}else{window.addEventListener("load",this.onLoad,false)}},addLoadEvent:function(func,o,args){var DR=robotreplay.Domready;DR.bindOnLoad();o=o||window;if(DR.isLoaded){try{func.call(o,[])}catch(e){}}else{DR.loadedList.push(function(){return func.call(o,[])})}},domReady:function(){var DR=robotreplay.Domready;if(!DR.isReady){DR.isReady=true;if(DR.readyList){for(var fn=0;fn<DR.readyList.length;fn++){try{DR.readyList[fn].call(window,[])}catch(err){}}DR.readyList=[]}DR.didExecute=true}},bindReady:function(){var DR=robotreplay.Domready;if(DR.readyBound){return}DR.readyBound=true;DR.getBrowser();if(document.addEventListener&&!DR.browser.opera){document.addEventListener("DOMContentLoaded",DR.domReady,false)}if(DR.browser.msie&&window==top)(function(){if(DR.isReady)return;try{document.documentElement.doScroll("left")}catch(error){setTimeout(arguments.callee,0);return}DR.domReady()})();if(DR.browser.opera){document.addEventListener("DOMContentLoaded",function(){if(DR.isReady)return;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].disabled){setTimeout(arguments.callee,0);return}DR.domReady()},false)}if(DR.browser.safari){var numStyles;(function(){if(DR.isReady)return;if(document.readyState!="loaded"&&document.readyState!="complete"){setTimeout(arguments.callee,0);return}if(numStyles===undefined){var links=document.getElementsByTagName("link");for(var i=0;i<links.length;i++){if(links[i].getAttribute('rel')=='stylesheet'){numStyles++}}var styles=document.getElementsByTagName("style");numStyles+=styles.length}if(document.styleSheets.length!=numStyles){setTimeout(arguments.callee,0);return}DR.domReady()})()}DR.addLoadEvent(DR.domReady)},attach:function(fn,o,args){var DR=robotreplay.Domready;DR.bindReady();if(typeof fn=="function"){o=o||window;if(DR.isReady){try{fn.call(o,[])}catch(e){}}else{DR.readyList.push(function(){return fn.call(o,[])})}}else if(typeof fn=="string"){if(DR.isReady){try{eval(fn)}catch(e){}}else{DR.readyList.push(function(){return eval(fn)})}}}};robotreplay.Domready.bindReady();robotreplay.Domready.bindOnLoad();robotreplay.Onunload={rewritten:false,reWriteOnUnload:function(){var ru=robotreplay.Onunload;if(this.rewritten==false){this.rewritten=true;if(window.addEventListener){window.addEventListener("unload",function(){eval(ru.onUnLoad)},true)}else{window.attachEvent("onunload",function(){eval(ru.onUnLoad)})}}},onUnLoad:"",attach:function(jscode_to_eval){robotreplay.Onunload.onUnLoad+=jscode_to_eval}};robotreplay.Onunload.reWriteOnUnload();robotreplay.Session={rr_session_id:null,rr_group_session_id:null,m_domain:null,getSessionId:function(){return this.rr_session_id},initSessionId:function(){var r=robotreplay;if(this.rr_session_id==null){var S=r.Storage;var C=r.Cookies;var id=S.read(S.SESSIONID,"");if(!id||id=="null"||this.isSessionStale()){S.clearAll();S.write(S.DOMAINKEY,this.getDomain(),true);C.setNSCookie(C.DOMAINKEY,this.getDomain(),-1,'/',this.getDomain());S.write(S.VERSIONKEY,r.version,true);C.setNSCookie(C.VERSIONKEY,r.version,-1,'/',this.getDomain());id=Math.abs((new Date())-0)+"_"+Math.round(Math.random()*10000);this.rr_session_id=id;S.write(S.SESSIONID,id,true);r.is_new_session=true;S.write(S.NEWSESSIONKEY,"1",true);S.write(S.STARTTIME,new Date().valueOf(),true)}this.rr_session_id=id}},getGroupSessionId:function(){return this.rr_group_session_id},initGroupSessionId:function(){if(this.rr_group_session_id==null){var C=robotreplay.Cookies;var name=C.SESSIONGROUPID;var id=C.getCookie(name);if(!id||id==null||id==''){id=((new Date())-0)+"_"+Math.round(Math.random()*10000);C.setCookie(name,id,-1,'/',this.getDomain())}this.rr_group_session_id=id}},isSessionStale:function(){var r=robotreplay;var S=r.Storage,C=r.Cookies,db=(!window.rr_test),h=window.location.href;if(S.read(S.SESSIONID,'')==''){return true}var od=S.read(S.DOMAINKEY,''),odc=C.getNSCookie(C.DOMAINKEY),d=this.getDomain();if(od!=d&&r.domains[od]==null&&odc!=d&&r.domains[odc]==null){return true}var ov=S.read(S.VERSIONKEY,''),ovc=C.getNSCookie(C.VERSIONKEY),v=robotreplay.version;if((v>ov||ov=='')&&(v>ovc||ovc=='')){return true}return false},init:function(){var ru=robotreplay.User;var rc=robotreplay.Cookies;if(this.isRecording()){this.url=String(window.location);this.pageInitDateTime=new Date();this.pageLoadTime=0;robotreplay.Domready.addLoadEvent(function(){robotreplay.Session.pageLoadTime=(new Date())-robotreplay.Session.pageInitDateTime});this.rec_server=rec_svr=ru.rec_servers[Math.round(Math.random()*(ru.rec_servers.length-1))];this.initSessionId();this.initGroupSessionId()}},isPageRecordable:function(){if(window.location.href.indexOf('_norr_')>-1||document.getElementsByTagName('frameset').length>0){window.rr_skipPage=true}return window.rr_skipPage!==true},isPageSecure:function(){return(window.location.protocol==="https:")},getDomain:function(){if(this.m_domain==null){var domain=window.location.hostname;if(domain=='localhost'){this.m_domain=domain;return this.m_domain}while(domain.split('.').length>1){if(robotreplay.domains[domain]!=null){this.m_domain=domain;break}domain=domain.split('.').slice(1).join('.')}}return this.m_domain},getTimezone:function(){var tza=((new Date().getTimezoneOffset())/60).toString().split(".");var sign=(tza[0]/Math.abs(tza[0])==1)?"-":"+";var hour=(Math.abs(tza[0]).toString().length==1)?"0":"";var min=Math.abs(tza[0])+":"+(tza[1]?tza[1]*6:"00");return sign+hour+min},checkCookies:function(){var r=robotreplay,C=r.Cookies,ac=r.stopRecordCookies||[];for(i=0;i<ac.length;i++){var c=C.getCookie(ac[i],true);if(c!=null&&c.length>0)return false}return true},isRecording:function(){var R=robotreplay;return(!R.Replay&&window.rr_isreplay!=true&&!R.SiteSpecific.noRecord&&(!R.browserControl||R.Browser.checkBrowserEnabled())&&R.Swf.isInstalled()&&R.Session.getDomain()&&R.Cookies.cookiesOn()&&R.Session.checkCookies()&&window.rr_recording!=false&&!R.Log.getIsCancelled())}};robotreplay.Browser={init:function(){var rb=robotreplay.Browser;rb.xpath=!!(document.evaluate);if(window.ActiveXObject)rb.ie=window[window.XMLHttpRequest?'ie7':'ie6']=true;else if(document.childNodes&&!document.all&&!navigator.taintEnabled)rb.webkit=rb[rb.xpath?'webkit420':'webkit419']=true;else if(document.getBoxObjectFor!=null)rb.gecko=true;rb.khtml=rb.webkit;this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS";this.isStandards=false;if(document.compatMode=="CSS1Compat"){this.isStandards=true}robotreplay.browser=this.browser.basetype;if(rb.browser.basetype=="ie"&&rb.version.maj>=7){rb.ie9==null;if(rb.version.maj==9)rb.ie9=true;if(rb.version.maj==8)rb.ie8=true;if(rb.version.maj==7)rb.ie7=true;rb.ie6=null;rb.ie=true;rb.maxconnections=6}if(rb.browser.basetype=="mozilla"&&rb.version.maj<3){rb.maxconnections=2}},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string;var dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;this.versionSearchString2=data[i].versionSearch2||this.versionSearchString;if(dataString){if(dataString.indexOf(data[i].subString)!=-1)return data[i].identity}else if(dataProp)return data[i].identity}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index==-1){index=dataString.indexOf(this.versionSearchString2);if(index==-1)return;this.versionSearchString=this.versionSearchString2};var vstring=dataString.substring(index+this.versionSearchString.length);if(vstring.indexOf(' ')>-1)vstring=vstring.substr(0,vstring.indexOf(' '));if(vstring.indexOf(';')>-1)vstring=vstring.substr(0,vstring.indexOf(';'));var maj=0;var min=0;if(vstring.indexOf('.')>-1){var varr=vstring.split('.');maj=parseInt(varr[0]);min=parseInt(varr[varr.length-1])};if((dataString.indexOf('Safari')>-1)&&(maj>100)&&(maj<500))maj=2;return{maj:maj,min:min,fullstring:vstring}},dataBrowser:[{string:navigator.vendor,subString:"Google Inc.",versionSearch:"Chrome/",identity:{name:"Chrome",basetype:"chrome",maxurllength:3900,maxconnections:2}},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:{name:"OmniWeb",basetype:"webkit",maxurllength:3900,maxconnections:2}},{string:navigator.vendor,subString:"Apple",versionSearch:"Version/",versionSearch2:"Safari/",identity:{name:"Safari",basetype:"webkit",maxurllength:3900,maxconnections:4}},{prop:window.opera,versionSearch:"Opera/",identity:{name:"Opera",basetype:"opera",maxurllength:3900,maxconnections:4}},{string:navigator.vendor,subString:"iCab",versionSearch:"iCab/",identity:{name:"iCab",basetype:"webkit",maxurllength:3900,maxconnections:2}},{string:navigator.vendor,subString:"Konqueror",versionSearch:"KHTML/",identity:{name:"Konqueror",basetype:"webkit",maxurllength:3900,maxconnections:4}},{string:navigator.userAgent,subString:"Firefox",versionSearch:"Firefox/",identity:{name:"Firefox",basetype:"mozilla",maxurllength:3900,maxconnections:6}},{string:navigator.vendor,subString:"Camino",versionSearch:"Camino/",identity:{name:"Camino",basetype:"mozilla",maxurllength:3900,maxconnections:2}},{string:navigator.userAgent,subString:"Navigator",versionSearch:"Navigator/",identity:{name:"Netscape",basetype:"mozilla",maxurllength:3900,maxconnections:2}},{string:navigator.userAgent,subString:"MSIE",identity:{name:"Explorer",basetype:"ie",maxurllength:1990,maxconnections:2},versionSearch:"MSIE "},{string:navigator.userAgent,subString:"Gecko",identity:{name:"Mozilla",basetype:"mozilla",maxurllength:3900,maxconnections:2},versionSearch:"rv"},{string:navigator.userAgent,subString:"Netscape",versionSearch:"Netscape/",identity:{name:"Netscape",basetype:"mozilla",maxurllength:3900,maxconnections:2}}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],checkBrowserEnabled:function(){var bEnabled=true;try{bEnabled=robotreplay.enabledBrowsers[robotreplay.Browser.browser.basetype][robotreplay.Browser.version.maj]}catch(e){}return bEnabled}};robotreplay.Browser.init();robotreplay.Geometry={scrollbarWidth:0,scrollbarHeight:0,currentScrollPosition:{scrollLeft:0,scrollTop:0},currentFrameScrollPosition:{scrollLeft:0,scrollTop:0},getScrollPosition:function(){return this.currentScrollPosition},getFrameScrollPosition:function(){return this.currentFrameScrollPosition},setScrollPosition:function(isFrame){var scrollLeft=0;var scrollTop=0;var r=robotreplay,B=r.Browser;var db=null;var dd=null;if(isFrame){db=isFrame.document.body;dd=isFrame.document.documentElement}else{db=document.body;dd=document.documentElement;}if(B.isStandards==true){var client=r.browser;if(client=="ie"||client=="mozilla"||client=="opera"){scrollLeft=dd.scrollLeft;scrollTop=dd.scrollTop}else if(client=="webkit"){scrollLeft=db.scrollLeft;scrollTop=db.scrollTop}}else{if(db){scrollLeft=db.scrollLeft;scrollTop=db.scrollTop}}if(db&&scrollTop==0&&db.scrollTop&&db.scrollTop>0){scrollTop=db.scrollTop;scrollLeft=db.scrollLeft}if(isFrame){this.currentFrameScrollPosition={scrollLeft:scrollLeft,scrollTop:scrollTop}}else{this.currentScrollPosition={scrollLeft:scrollLeft,scrollTop:scrollTop}}},getWindowSize:function(){var overflowX=false;var overflowY=false;var browserWidth=0;var browserHeight=0;var bodyWidth=0;var bodyHeight=0;var dwo=robotreplay.Geometry;var doc=dwo.getCompatElement();var client=robotreplay.browser;var msize=dwo.getScrollbarSize();if(client=="webkit"||client=="opera"||client=="presto"){browserWidth=window.innerWidth;browserHeight=window.innerHeight;bodyWidth=Math.max(doc.scrollWidth,browserWidth);bodyHeight=Math.max(doc.scrollHeight,browserHeight);overflowX=(bodyWidth>browserWidth);overflowY=(bodyHeight>browserHeight);if(overflowX==true){browserHeight-=msize.scrollbarHeight}if(overflowY==true){browserWidth-=msize.scrollbarWidth}}else{browserWidth=doc.clientWidth;browserHeight=doc.clientHeight;bodyWidth=Math.max(doc.scrollWidth,browserWidth);bodyHeight=Math.max(doc.scrollHeight,browserHeight);overflowX=(bodyWidth>browserWidth);overflowY=(bodyHeight>browserHeight)}return{windowWidth:browserWidth,windowHeight:browserHeight,bodyWidth:bodyWidth,bodyHeight:bodyHeight,overflowX:overflowX,overflowY:overflowY}},getCompatElement:function(){return(!document.compatMode||document.compatMode=='CSS1Compat')?document.getElementsByTagName('html')[0]:document.body},sbInterval:null,getScrollbarSize:function(){var rw=robotreplay.Geometry;if(rw.scrollbarWidth==0){var scr=document.createElement('div');var s=scr.style;s.position='absolute';s.left='-1000px';s.top='-1000px';s.width='100px';s.height='100px';s.padding='0px';s.margin='0px';s.overflow='scroll';s.border='0px';var inn=document.createElement('div');s=inn.style;s.position='relative';s.border='0px';s.height='200px';s.padding='0px';s.margin='0px';scr.appendChild(inn);try{document.body.appendChild(scr);rw.scrollbarWidth=100-inn.offsetWidth;rw.scrollbarHeight=rw.scrollbarWidth;document.body.removeChild(scr);clearInterval(rw.sbInterval)}catch(e){rw.sbInterval=setInterval(robotreplay.Geometry.getScrollbarSize,500)}}return{scrollbarWidth:rw.scrollbarWidth,scrollbarHeight:rw.scrollbarHeight}},init:function(){if(document.body)robotreplay.Geometry.getScrollbarSize();else setTimeout(robotreplay.Geometry.init,500)}};robotreplay.Domready.attach(function(){robotreplay.Geometry.init()});robotreplay.Event={remove:function(obj,eventName,fnReference,direction){if(!direction)direction=false;if(window.addEventListener){obj.removeEventListener(eventName,fnReference,direction)}else if(window.attachEvent){obj.detachEvent('on'+eventName,fnReference)}},attachWindowEvent:function(eventName,fnReference){if(robotreplay.browser=="ie"){if((eventName=="scroll")||(eventName=="resize")||(eventName=="load"))this.attach(window,eventName,fnReference);else this.attach(document,eventName,fnReference)}else this.attach(window,eventName,fnReference)},removeWindowEvent:function(eventName,fnReference){if(robotreplay.browser=="ie"){if((eventName=="scroll")||(eventName=="resize"))this.remove(window,eventName,fnReference);else this.remove(document,eventName,fnReference)}else this.remove(window,eventName,fnReference)},preventDefault:function(evt,v){if(evt==null){return}if(evt.stopPropagation)evt.stopPropagation();else evt.cancelBubble=true;if(robotreplay.browser=="ie"){evt.returnValue=false}else{evt.preventDefault()}if(v!=null){e.keyCode=v}}};if(window.addEventListener){robotreplay.Event.attach=function(obj,eventName,fnReference,direction){if(!direction)direction=false;obj.addEventListener(eventName,fnReference,direction)}}else if(window.attachEvent){robotreplay.Event.attach=function(obj,eventName,fnReference){obj.attachEvent('on'+eventName,fnReference)}}robotreplay.EventArgs=function(source,event){this.source=source;this.event=event};robotreplay.JSON={};(function(){function f(n){return n<10?'0'+n:n}if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z'};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];if(typeof c==='string'){return c}return'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key)}if(typeof rep==='function'){value=rep.call(holder,key,value)}switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null'}gap+=indent;partial=[];if(typeof value.length==='number'&&!value.propertyIsEnumerable('length')){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null'}v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v}if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==='string'){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v)}}}}v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v}}if(typeof JSON==='undefined'||typeof JSON.stringify!=='function'){robotreplay.JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' '}}else if(typeof space==='string'){indent=space}rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('robotreplay.JSON.stringify')}return str('',{'':value})}}else{robotreplay.JSON.stringify=JSON.stringify}if(typeof JSON==='undefined'||typeof JSON.parse!=='function'){robotreplay.JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4)})};if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j};throw new SyntaxError('robotreplay.JSON.parse')}}else{robotreplay.JSON.parse=JSON.parse}})();robotreplay.MD5=function(){};robotreplay.MD5.hexcase=0;robotreplay.MD5.b64pad="";robotreplay.MD5.chrsz=8;robotreplay.MD5.skipRate=2;robotreplay.MD5.init=function(s){s=s||document.body.innerHTML;var skipRate=Math.ceil(s.length/9000);this.skipRate=(isNaN(skipRate)?2:skipRate)};robotreplay.MD5.hash=function(s,sr){if(sr==null){this.init(s)}else{this.skipRate=sr}return this.binl2hex(this.core_md5(this.str2binl(s),s.length/this.skipRate*this.chrsz))};robotreplay.MD5.core_md5=function(x,len){x[len>>5]|=0x80<<((len)%32);x[(((len+64)>>>9)<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16*this.skipRate){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=this.ff(a,b,c,d,x[i+0],7,-680876936);d=this.ff(d,a,b,c,x[i+1],12,-389564586);c=this.ff(c,d,a,b,x[i+2],17,606105819);b=this.ff(b,c,d,a,x[i+3],22,-1044525330);a=this.ff(a,b,c,d,x[i+4],7,-176418897);d=this.ff(d,a,b,c,x[i+5],12,1200080426);c=this.ff(c,d,a,b,x[i+6],17,-1473231341);b=this.ff(b,c,d,a,x[i+7],22,-45705983);a=this.ff(a,b,c,d,x[i+8],7,1770035416);d=this.ff(d,a,b,c,x[i+9],12,-1958414417);c=this.ff(c,d,a,b,x[i+10],17,-42063);b=this.ff(b,c,d,a,x[i+11],22,-1990404162);a=this.ff(a,b,c,d,x[i+12],7,1804603682);d=this.ff(d,a,b,c,x[i+13],12,-40341101);c=this.ff(c,d,a,b,x[i+14],17,-1502002290);b=this.ff(b,c,d,a,x[i+15],22,1236535329);a=this.gg(a,b,c,d,x[i+1],5,-165796510);d=this.gg(d,a,b,c,x[i+6],9,-1069501632);c=this.gg(c,d,a,b,x[i+11],14,643717713);b=this.gg(b,c,d,a,x[i+0],20,-373897302);a=this.gg(a,b,c,d,x[i+5],5,-701558691);d=this.gg(d,a,b,c,x[i+10],9,38016083);c=this.gg(c,d,a,b,x[i+15],14,-660478335);b=this.gg(b,c,d,a,x[i+4],20,-405537848);a=this.gg(a,b,c,d,x[i+9],5,568446438);d=this.gg(d,a,b,c,x[i+14],9,-1019803690);c=this.gg(c,d,a,b,x[i+3],14,-187363961);b=this.gg(b,c,d,a,x[i+8],20,1163531501);a=this.gg(a,b,c,d,x[i+13],5,-1444681467);d=this.gg(d,a,b,c,x[i+2],9,-51403784);c=this.gg(c,d,a,b,x[i+7],14,1735328473);b=this.gg(b,c,d,a,x[i+12],20,-1926607734);a=this.hh(a,b,c,d,x[i+5],4,-378558);d=this.hh(d,a,b,c,x[i+8],11,-2022574463);c=this.hh(c,d,a,b,x[i+11],16,1839030562);b=this.hh(b,c,d,a,x[i+14],23,-35309556);a=this.hh(a,b,c,d,x[i+1],4,-1530992060);d=this.hh(d,a,b,c,x[i+4],11,1272893353);c=this.hh(c,d,a,b,x[i+7],16,-155497632);b=this.hh(b,c,d,a,x[i+10],23,-1094730640);a=this.hh(a,b,c,d,x[i+13],4,681279174);d=this.hh(d,a,b,c,x[i+0],11,-358537222);c=this.hh(c,d,a,b,x[i+3],16,-722521979);b=this.hh(b,c,d,a,x[i+6],23,76029189);a=this.hh(a,b,c,d,x[i+9],4,-640364487);d=this.hh(d,a,b,c,x[i+12],11,-421815835);c=this.hh(c,d,a,b,x[i+15],16,530742520);b=this.hh(b,c,d,a,x[i+2],23,-995338651);a=this.ii(a,b,c,d,x[i+0],6,-198630844);d=this.ii(d,a,b,c,x[i+7],10,1126891415);c=this.ii(c,d,a,b,x[i+14],15,-1416354905);b=this.ii(b,c,d,a,x[i+5],21,-57434055);a=this.ii(a,b,c,d,x[i+12],6,1700485571);d=this.ii(d,a,b,c,x[i+3],10,-1894986606);c=this.ii(c,d,a,b,x[i+10],15,-1051523);b=this.ii(b,c,d,a,x[i+1],21,-2054922799);a=this.ii(a,b,c,d,x[i+8],6,1873313359);d=this.ii(d,a,b,c,x[i+15],10,-30611744);c=this.ii(c,d,a,b,x[i+6],15,-1560198380);b=this.ii(b,c,d,a,x[i+13],21,1309151649);a=this.ii(a,b,c,d,x[i+4],6,-145523070);d=this.ii(d,a,b,c,x[i+11],10,-1120210379);c=this.ii(c,d,a,b,x[i+2],15,718787259);b=this.ii(b,c,d,a,x[i+9],21,-343485551);a=this.safe_add(a,olda);b=this.safe_add(b,oldb);c=this.safe_add(c,oldc);d=this.safe_add(d,oldd)}return new Array(a,b,c,d)};robotreplay.MD5.cmn=function(q,a,b,x,s,t){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(a,q),this.safe_add(x,t)),s),b)};robotreplay.MD5.ff=function(a,b,c,d,x,s,t){return this.cmn((b&c)|((~b)&d),a,b,x,s,t)};robotreplay.MD5.gg=function(a,b,c,d,x,s,t){return this.cmn((b&d)|(c&(~d)),a,b,x,s,t)};robotreplay.MD5.hh=function(a,b,c,d,x,s,t){return this.cmn(b^c^d,a,b,x,s,t)};robotreplay.MD5.ii=function(a,b,c,d,x,s,t){return this.cmn(c^(b|(~d)),a,b,x,s,t)};robotreplay.MD5.safe_add=function(x,y){var lsw=(x&0xFFFF)+(y&0xFFFF);var msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&0xFFFF)};robotreplay.MD5.bit_rol=function(num,cnt){return(num<<cnt)|(num>>>(32-cnt))};robotreplay.MD5.str2binl=function(str){var bin=new Array();var mask=(1<<this.chrsz)-1;for(var i=0;i<str.length*this.chrsz;i+=this.chrsz*this.skipRate)bin[i>>5]|=(str.charCodeAt(i/this.chrsz)&mask)<<(i%32);return bin};robotreplay.MD5.binl2hex=function(binarray){var hex_tab=this.hexcase?"0123456789ABCDEF":"0123456789abcdef";var str="";for(var i=0;i<binarray.length*4;i++){str+=hex_tab.charAt((binarray[i>>2]>>((i%4)*8+4))&0xF)+hex_tab.charAt((binarray[i>>2]>>((i%4)*8))&0xF)}return str};robotreplay.Serializer={onInit:new robotreplay.Subject(),onBeforeInit:new robotreplay.Subject(),shouldDelay:false,maxRetries:5,thisPageDomHash:'',init:function(){var r=robotreplay;if(window.rr_serialize!=false&&!r.Log.getIsCancelled()){if(this.shouldDelay===true){r.Domready.addLoadEvent(function(){robotreplay.Serializer._init()})}else{this._init()}}},_init:function(){this.onBeforeInit.notify();var r=robotreplay;var isIFrame=r.Dom.isIFrame();if(isIFrame){var t=(r.Dom.getTop());r=t.robotreplay}var dom=this.normalizeDom();var hash=r.MD5.hash(r.MD5.hash(this.normalizeDomForHash(dom))+r.MD5.hash(Math.random()+r.Session.getSessionId(),1),1);this.thisPageDomHash=hash;var url=window.location.href;this.onInit.notify(hash);var S=r.Storage;var doms=S.read(S.DOMKEY,{});var urlList=S.read(S.URLLISTKEY,{});if(!doms[hash]){doms[hash]=dom;urlList[hash]={url:url,url_md5:r.MD5.hash(url,1),charset:r.Html.charset()};S.write(S.DOMKEY,doms,true,true);S.write(S.URLLISTKEY,urlList,true,true);S.commit()}if(isIFrame){r.Serializer.serializeDoms.apply(r.Serializer)}else{r.onFlashReady.subscribeOnce(this.serializeDoms,this)}},stripHiddenDomMaterial:function(html){var r=robotreplay;html=this.superReplace(html,new RegExp("<!--(\\W)*"+r.hiddenBlockOpenTag+"[\\w\\W]*?"+r.hiddenBlockCloseTag+"(\\W)*-->","mig"),this.maskBlock);html=this.superReplace(html,new RegExp("<(\\W)*input[^>]*?"+r.hiddenFieldClassName+"[\\w\\W]*?>","mig"),this.maskValue);html=this.superReplace(html,new RegExp("<(\\W)*textarea[^>]*?"+r.hiddenFieldClassName+"[\\w\\W]*?<(\\W)*/(\\W)*textarea(\\W)*>","mig"),this.maskBlock);return html},superReplace:function(html,regx,handleFn){var result;var res="";var currentPos=0;while((result=regx.exec(html))!=null){res+=html.substring(currentPos,result.index);var newStr=handleFn(result[0]);res+=newStr;currentPos=result.index+result[0].length}res+=html.substring(currentPos,html.length);return res},maskValue:function(html){return html.replace(new RegExp("value=\"([^\"]*)\"","gim"),function(str,p1){return"value=\""+p1.replace(/[^\W]/g,"*")+"\""})},maskBlock:function(html){var res=html;if(html.length>0){res="";var currentPos=-1;var lastPos=-1;while(currentPos<html.length){lastPos=currentPos;currentPos=html.indexOf("<",currentPos+1);if(currentPos>-1){res+=html.substring(lastPos,currentPos).replace("<","").replace(">","").replace(/[^\W]/g,"*");res+=html.substring(currentPos,html.indexOf(">",currentPos)+1);currentPos=html.indexOf(">",currentPos)}else currentPos=html.length}res+=html.substring(lastPos,html.length).replace("<","").replace(">","").replace(/[^\W]/g,"*")}return res},normalizeDom:function(){var r=robotreplay;var dom=r.Html.getOuterHtml(document.getElementsByTagName("html")[0]);dom=this.stripHiddenDomMaterial(dom);dom=dom.replace(/<input.*?name=["']?__VIEWSTATE["']?.*?\/?>/gi,"");dom=dom.replace(/<noscript>[\s\S]*?<\/noscript>/gi,"");if(r.browser=='ie'){var os=document.getElementsByTagName('object');for(var i=0;i<os.length;i++){dom=this.fixObjectTag(dom,os[i])}}dom=r.Dom.getDocType()+'\n'+dom;return dom},fixObjectTag:function(dom,o){var id=o.id;var re=new RegExp('(<object[^>]*id=[\'"]?'+id+'[\'"]?.*?>)([\\s\\S]*?)(\<\/object\>)','im');return dom.replace(re,function($0,$1,$2,$3){var params='';var other='';for(var j=0;j<o.childNodes.length;j++){var p=o.childNodes[j];if(p.tagName=='PARAM'){params+=p.outerHTML}else{other+=p.outerHTML}}return $1+params+other+$3})},normalizeDomForHash:function(dom){return dom.replace(/<!--(.*?)-->/gim,"")},serializeDoms:function(){var r=robotreplay,S=r.Storage;if((r.Log.getOKTransmit()||S.isDomsFull())&&!r.Log.getIsCancelled()){var doms=S.read(S.DOMKEY,{});var urlList=S.read(S.URLLISTKEY,{});r.forEach(urlList,function(hash){var dom=doms[hash];var url=urlList[hash]||{url:'',url_md5:''};this.serializeDom(dom,hash,url)},this)}},serializeDom:function(dom,hash,url){if(dom&&dom.length>0){var r=robotreplay;var transport=r.TransportFactory.getTransport(false);if(transport!=null){var S=r.Storage;var data={html:dom,hash:hash,client_timestamp:(new Date()).getTime(),url:url.url,url_md5:url.url_md5,version:r.version,session_id:r.Session.getSessionId(),charset:url.charset};transport.onSuccess.subscribeOnce(this.handleSuccess,this);transport.onFailure.subscribeOnce(this.handleFailure,this);transport.send(data,"dom")}}else{this.removeDomFromStorage(hash)}},handleSuccess:function(e){this.removeDomFromStorage(e.message.response)},handleFailure:function(e){var r=robotreplay,S=r.Storage;var retries=S.read(S.DOMRETRIESKEY,0);S.write(S.DOMRETRIESKEY,++retries,true);if(retries>r.Serializer.maxRetries){r.Log.cancelRecord()}else{setTimeout(function(){r.Serializer.serializeDoms()},500)}},removeDomFromStorage:function(hash){var S=robotreplay.Storage;var urlList=S.read(S.URLLISTKEY,{});var doms=S.read(S.DOMKEY,{});delete doms[hash];delete urlList[hash];S.write(S.DOMKEY,doms,true,true);S.write(S.URLLISTKEY,urlList,true,true);S.commit()}};(function(r){r.Serializer.onBeforeInit.subscribe(function(){var D=r.Dom;D.maskNodes("input, textarea, address");D.removeHidden("input[type='checkbox'], input[type='button'], input[type='submit']")})})(robotreplay);robotreplay.Storage={cache:null,ISRESP:"rr_is_respondent",SESSIONRETRIESKEY:"sessionretries",DOMRETRIESKEY:"domretries",MOUSEPOS:"mousepos",DOMKEY:"domstream",EVENTSKEY:"eventstream",URLLISTKEY:"urllist",SESSIONID:"rr_session_id",DELIMITER:robotreplay.windowNameDelimiter,DOMAINKEY:"domain",STARTTIME:"timestamp",VERSIONKEY:"version",NEWSESSIONKEY:"isnewsession",QUEUED:"queued",eventStorageLimit:(robotreplay.browser=="mozilla"?250000:500000),domStorageLimit:(robotreplay.browser=="mozilla"?750000:1500000),onClear:new robotreplay.Subject(),write:function(key,value,clear,batch){var c=this.getCache();if(c[key]&&clear!==true){c[key]+=value}else{c[key]=value}if(batch!==true){this.commit()}return c[key]},append:function(key,value,batch){return this.write(key,value,false,batch)},read:function(key,defaultValue){defaultValue=(typeof defaultValue!="undefined"?defaultValue:"");var cache=this.getCache(),v=cache[key];if(typeof v==="undefined"){v=defaultValue}return v},clear:function(key,batch){var c=this.getCache();if(c[key]){delete c[key];if(batch!==true){this.commit()}}this.onClear.notify()},clearAll:function(){if(window.name==null)window.name="";var r=robotreplay,d=r.Storage.DELIMITER,s=window.name,i=s.indexOf(d);window.name=(i>=0?s.substring(0,s.indexOf(d)):s);this.cache={}},isDomsFull:function(){return this._isFull(new RegExp("\""+this.DOMKEY+"\""+":(.*<\/html>\")","i"),this.domStorageLimit)},isEventsFull:function(){return this.read(this.EVENTSKEY,"").length>this.eventStorageLimit},_isFull:function(pattern,limit){var v=window.name.match(pattern);if(v&&v[1]&&v[1].length>limit){return true}return false},commit:function(){var wn=window.name;var r=robotreplay,d=this.DELIMITER;var c=this.getCache();var jsonString=d+r.JSON.stringify(c);var i=wn.indexOf(d);try{delete(name)}catch(e){}if(i>=0){window.name=wn.substring(0,i)+jsonString}else{window.name+=jsonString}},getCache:function(){var r=robotreplay,d=this.DELIMITER;if(!this.cache){try{var n=window.name;var s=n.substr(n.indexOf(d)+d.length);if(s.indexOf("|rr_preld::")>-1)s=s.split("|rr_preld::")[0];var b=r.Browser;if(b.browser.basetype=="mozilla"&&b.version.min<5&&b.version.maj<=3){this.cache=r.JSON.parse(s)}else{this.cache=eval('('+s+')')}}catch(e){this.cache={}}}return this.cache}};robotreplay.Onunload.attach("window.__flash__removeCallback = function(instance,name) {	try {instance[name] = null;} catch(e) {}};");robotreplay.Log={requestId:1,maxRetries:10,enabled:true,aData:[],startTime:null,lastTime:null,syncBucket:null,syncInterval:10000,onInviteAccepted:new robotreplay.Subject(),init:function(){if(!this.getIsCancelled()){if(typeof this.isSeparate!="undefined"){var qc=robotreplay_startup.Capture;this.lastTime=qc.lastTime;this.startTime=qc.startTime;this.isFirstMouseMove=qc.isFirstMouseMove}var r=robotreplay,C=r.Cookies,L=r.Log;L.checkTransmissionCookie();L.startTime=new Date();if(window.rr_begintime)L.startTime=window.rr_begintime;L.lastTime=L.startTime;L.syncBucket=0;L.push("ph",true);if(L.getOKTransmit()==true)L.setHeartbeat();L.push("tk",(new Date()).getTime())}},checkTransmissionCookie:function(){var r=robotreplay,C=r.Cookies,L=r.Log;if(C.getCookie("fsr.t")==1){r.Log.setOKTransmit()}},recPageDimensions:function(){var dims=robotreplay.Dom.getPageDimensions();robotreplay.Log.push("cd",dims)},wasCancelled:false,getIsCancelled:function(){if(robotreplay.Replay){return false}else if(this.wasCancelled){return true}else{var C=robotreplay.Cookies;var cval=C.getNSCookie(C.RECCANCELLED);if(!cval||cval=="")return false;this.wasCancelled=true;return true}},entryDetails:function(entryString){if(entryString){var a=entryString.split('*');if(a.length>1){if(a[1].indexOf('_')>0)a[1]=a[1].substr(0,a[1].indexOf('_'));a[1]=parseInt(a[1].replace('(','').replace(')','').replace('_',''))}}return a},isFirstEvent:true,isFirstMouseMove:true,idleTimeoutId:null,idleTimeout:300000,push:function(eventType,eventData,skipEncode,forceTimeIndex,timeBefore){var r=robotreplay,L=r.Log,C=r.Capture;if(this.getIsCancelled()==false){clearTimeout(this.idleTimeoutId);this.idleTimeoutId=setTimeout(robotreplay.close(L,L.cancelRecord),this.idleTimeout);skipEncode=false;if(!eventData||eventData=="undefined"){eventData=""}if(L.enabled==true){var skipPush=false;if(!skipEncode)skipEncode=false;var oLst="";if(eventData&&eventData.el){oLst=eventData.el;}if(skipPush==false){if(timeBefore>=0&&this.aData.length>0){var timeline=this.aData;var timeCount=new Date()-this.lastTime;var indexArr=timeline.length;while(timeCount<timeBefore){indexArr--;if(indexArr<=0){timeCount=timeBefore}else{var entryArray=this.entryDetails(timeline[indexArr]);timeCount+=entryArray[1]}}timeCount-=timeBefore;var finalString=this.generateEventString(eventType,eventData,skipEncode,forceTimeIndex,timeCount);this.aData=[];this.aData=this.aData.concat(timeline.slice(0,indexArr));this.aData.push(finalString.substr(0,finalString.length-1));finalString='';if(indexArr<timeline.length){var entryArray=this.entryDetails(timeline[indexArr]);entryArray[1]="("+(entryArray[1]-timeCount)+")";finalString+=entryArray.join('*')+'~';this.aData.push(finalString.substr(0,finalString.length-1));this.aData=this.aData.concat(timeline.slice(indexArr+1,timeline.length));var itemIndex=indexArr;if(itemIndex<0)itemIndex=0}else{var itemIndex=timeline.length;if(itemIndex<0)itemIndex=0}}else{var finalString=this.generateEventString(eventType,eventData,skipEncode,forceTimeIndex);this.aData.push(finalString.substr(0,finalString.length-1));var itemIndex=this.aData.length-1}this.handleTransmissionAndStorage();return itemIndex}}else{return 0}}},generateEventString:function(eventType,eventData,skipEncode,forceTimeIndex,setTimeInterval){var r=robotreplay,rl=r.Log;try{var isSetTimeInterval=false;if(setTimeInterval>=0)isSetTimeInterval=true;var eventString='';var skipenc=((skipEncode)||(skipEncode==true));if(eventData.constructor==Array){for(var ic=0,b=eventData.length;ic<b;ic++){if(ic>0)eventString+="'";if(skipenc==false)eventString+=r.encodeRRChars(eventData[ic]);else eventString+=eventData[ic]}}else if(eventData.constructor==Object||eventData.constructor.toString().match(/object/i)!==null){var ic=0;r.forEach(eventData,function(i){ic++;if(typeof eventData[i]!='function'){if(ic>1)eventString+="'";if(skipenc==false)eventString+=r.encodeRRChars(i)+"_"+r.encodeRRChars(eventData[i]);else eventString+=i+"_"+eventData[i]}},this)}else if(eventData.constructor==String){if(skipenc==false)eventString+=r.encodeRRChars(eventData);else eventString+=eventData}else if(eventData.constructor==Number){eventString+=eventData}var curTime=new Date();var curDiff=curTime-this.lastTime;if(isSetTimeInterval==true)curDiff=setTimeInterval;if(curDiff>1000*60*60)curDiff=3000;if(rl.isFirstMouseMove==true){if(eventType=="m")rl.isFirstMouseMove=false;this.lastTime=curTime;this.startTime=curTime;if(curDiff<10000&&eventType!='sf'&&curDiff>100)curDiff=100}if(isSetTimeInterval==false)this.lastTime=curTime;if(isSetTimeInterval==false)this.syncBucket+=curDiff;var timeString="("+curDiff+")";if((this.syncBucket>this.syncInterval)||(forceTimeIndex&&(forceTimeIndex==true))){if(!setTimeInterval){this.syncBucket=0;timeString="("+curDiff+")"}}var finalString=eventType+"*"+timeString+"*"+eventString+"~"}catch(e){var cont="";if(eventData)cont=eventData.constructor;}return finalString},cleanEventLog:function(eventType,startIndex,endIndex){var eventArray=this.aData;if(!startIndex||startIndex<0)startIndex=-1;if(!endIndex||endIndex==0)endIndex=eventArray.length;this.aData=[];var timeBank=0;for(var i=0,eAL=eventArray.length;i<eAL;i++){if(eventArray[i].indexOf('*')>0){var eT=eventArray[i].split('*')[0];if((eT==eventType||eventType=="*")&&(i>=startIndex&&i<=endIndex)){timeBank+=this.entryDetails(eventArray[i])[1]}else{var eventString=eventArray[i];if(timeBank>0){var eventDetails=this.entryDetails(eventArray[i]);eventDetails[1]="("+(eventDetails[1]+timeBank)+")";eventString=eventDetails.join('*');timeBank=0}this.aData.push(eventString)}}}},getOKTransmit:function(){var r=robotreplay;var S=r.Storage;var C=r.Cookies;var rl=r.Log;if(!rl.doTransmit){var isresp=S.read(S.ISRESP,false);if(isresp==false){var id=C.getNSCookie(C.ISRESP);if(id&&id!=null&&id.length>0){isresp=true;S.write(S.ISRESP,true,true)}}if(isresp){rl.doTransmit=true}}return rl.doTransmit},setOKTransmit:function(){var r=robotreplay,C=r.Cookies,L=r.Log;if(r.Session.isRecording()){var S=r.Storage;L.doTransmit=true;C.setNSCookie(C.ISRESP,"true",-1,'/',r.Session.getDomain());S.write(S.ISRESP,true,true);L.onInviteAccepted.notify();L.setHeartbeat()}},doTransmit:false,blockStorageMethod:'',heartbeatMonitor:null,lastTransmission:(new Date())-15000,lastStoreWrite:(new Date()-750),minTransmissionDelay:10000,minStoreWriteDelay:750,flashLoaded:false,handleTransmissionAndStorage:function(justForceSend){var r=robotreplay;var L=r.Log;var S=r.Storage;justForceSend=justForceSend&&r.Swf.wasAlive;if(!r.Replay){var now=new Date();if((((now-L.lastTransmission)>L.minTransmissionDelay)||justForceSend)&&(((now-L.lastStoreWrite)>L.minStoreWriteDelay)||justForceSend)&&!r.Log.getIsCancelled()&&datastream!=''){var data=L.aData.join('~')+'~';var datastream=S.read(S.EVENTSKEY,"")+data;var transport=r.TransportFactory.getTransport(justForceSend);if(transport!==null){L.lastTransmission=now;if(!L.getOKTransmit()&&!S.isEventsFull()){S.write(S.EVENTSKEY,data)}else{if(S.read(S.NEWSESSIONKEY,"0")=="1"){L.createSession()}if(justForceSend&&transport.type=='script'){S.write(S.EVENTSKEY,data)}this.sendEvents(transport,datastream)}}else{L.lastStoreWrite=now;S.write(S.EVENTSKEY,data)}L.aData=[]}}},sendEvents:function(transport,datastream){var r=robotreplay;var S=r.Storage;var L=r.Log;var data={data:datastream,client_timestamp:new Date().getTime(),version:(r.version||'0'),url:window.location.href,url_md5:r.MD5.hash(window.location.href,1),session_id:r.Session.getSessionId(),request_id:r.Log.requestId++,retries:0};if(transport.type=='flash'){var queued=S.read(S.QUEUED,{});queued[transport.id]=data;S.write(S.QUEUED,queued,true,true);S.clear(S.EVENTSKEY,true);S.commit()}transport.onSuccess.subscribeOnce(L.handleSuccess,L);transport.onFailure.subscribeOnce(L.handleFailure,L);transport.send(data,"event")},sendQueued:function(){var r=robotreplay,S=r.Storage,L=r.Log;var queued=S.read(S.QUEUED,{});r.forEach(queued,function(id){var transport=r.TransportFactory.getTransport(false,id);transport.onSuccess.subscribeOnce(L.handleSuccess,L);transport.onFailure.subscribeOnce(L.handleFailure,L);this.resend(queued[id],transport)},this)},createSession:function(){var r=robotreplay,S=r.Storage,E=r.Session,L=r.Log;var transport=r.TransportFactory.getTransport();if(transport!==null){var data={client_timezone:E.getTimezone(),version:(r.version||'0'),session_id:E.getSessionId(),group_session_id:E.getGroupSessionId(),user_id:r.User.id,user_domain:E.getDomain(),browser:'',start_time:S.read(S.STARTTIME,''),metadata:r.Log.getOKTransmit()};var retries=S.read(S.SESSIONRETRIESKEY,0);transport.onSuccess.subscribeOnce(function(e){S.clear(S.NEWSESSIONKEY);r.is_new_session=false});transport.onFailure.subscribeOnce(function(e){S.write(S.SESSIONRETRIESKEY,++retries,true);if(retries>L.maxRetries){L.cancelRecord()}});transport.send(data,"session")}},handleSuccess:function(e){if(e.source){var S=robotreplay.Storage;var queued=S.read(S.QUEUED,{});delete queued[e.source.id];S.write(S.QUEUED,queued,true);}},handleFailure:function(e){var S=robotreplay.Storage;var transport=e.source;var queued=S.read(S.QUEUED,{});var data=queued[transport.id];if(data){this.resend(data,transport)}},resend:function(data,transport){data.retries++;if(data.retries>this.maxRetries){this.cancelRecord()}else{transport.send(data,"event")}},setHeartbeat:function(time){this.clearHeartbeat();this.heartbeatMonitor=setInterval(function(){var r=robotreplay;this.isFirstMouseMove=false;var t=r.TransportFactory.getTransport(false,new Date().getTime());if(t!=null){t.onFailure.subscribeOnce(this.handlePingFailure,this);t.send({'session_id':r.Session.getSessionId()},'ping')}},time||robotreplay.pingTime)},handlePingFailure:function(e){this.cancelRecord()},clearHeartbeat:function(){clearInterval(this.heartbeatMonitor);this.heartbeatMonitor=null},close:function(){robotreplay.Log.handleTransmissionAndStorage(true)},cancelRecord:function(){var r=robotreplay;var C=r.Cookies;var S=r.Storage;var RS=r.Session;var L=r.Log;if(C.cookiesOn()){C.setNSCookie(C.ISRESP,'',-1,'/',RS.getDomain());C.setNSCookie(C.RECCANCELLED,true,-1,'/',RS.getDomain())}S.clearAll();L.doTransmit=false;L.clearHeartbeat()}};robotreplay.siteSpecificCode={'blair.com':function(){var r=robotreplay,D=r.Dom,DR=r.Domready;window.__watchRatingControl=function(){D.watchAttribute(".refinements > li.section:nth(1) > div.options","style")};window.__watchProductQuickView=function(){D.watch('div#widget-quickview',null,null,null,{watchexist:true,watchid:true});D.watch('div#productPopupLayer',null,null,null,{watchexist:true,watchid:true});D.watchAttribute("#widget-quickview","style")};window.__watchCartPreview=function(){D.watch("#widget-ucart-item-count");D.watch("#widget-ucart",false,null,true)};window.__watchProductQuantityControl=function(){var f=function(node){D.maskNodes("input.the-variant-qtys",node);return false};D.watch("div#variant-selector-block-regular > div.variant-container:gt(0)",false,f,true,{watchid:false});D.watch("div#variant-selector-block-regular > div.qty-container:gt(0)",false,f,true,{watchid:false})};window.__watchProductReview=function(){D.watchOnce("div#BVSubmissionContainer",false,function(){r.Capture.performIndexing(document,null);D.watchOnce("td#BVSubmissionPhotoSection",false,null,false);window.__watchProductRating()},false,{watchid:true});D.watch("#BVCustomerRatings, #variant-selector-block-sale")};window.__watchProductRating=function(){D.watch(".ratingDisplayValue",false,null,false);D.watchAttribute("table.ratingBar table table","style")};window.__attachToNav=function(){robotreplay.Implementation.attachIEClicks("#results-found a.refine-cat")};window.__watchProductResultsRefine=function(){D.watchAttribute("#results-found ul.refinements li.section div.options","style")};window.__watchProductTabs=function(){D.watch("#product-details div.product-info-tabs div.tab-panel-container span.inner");D.watchAttribute("#product-details div.product-info-tabs div.product-panels > div.panel","style")};window.__scrubRegistration=function(){D.maskNodes("div#address-book div.address-container > h3, div#address-book div.address-container > div > ul")};window.__unmaskFields=function(){D.forceVisible("input#zipCode, input#firstName, input#lastName, input#che-orde-last-name, input#che-orde-order-num");D.forceVisible("input#keyword, input#header-email-input, div.item-numbers-container input, input#catalogCode, div.qty-container input, div.search-within-container input, div#catalogcodeblock input, div#che-bas-promo-area input");D.forceVisible("div#no-results div.search-container input");D.forceVisible("#userName, #emailAddress, #reEnterEmailAddress, #oldEmailAddress, #newEmailAddress, #reEnterNewEmailAddress, #catalog-code, #promoCode, #email, #cust-num")};window.__scrubCCApp=function(){D.maskNodes("div#che-plp-content div.right-col *")};window.__maskMagazineRequest=function(){D.maskNodes("div.FormArea div.FormEntry input")};window.__scrubCheckout=function(){D.maskNodes("div#che-del-meth-gift-container > div > h4");D.maskNodes("div#che-pay-bill-addr p");D.maskNodes("div.che-pay-ship-to div.ship-info p:eq(0)");D.maskNodes("div.che-pay-ship-to > h4");D.maskNodes("div#che-add-addr-book > div.address");D.maskNodes("div#che-rec-billing-info");D.maskNodes("div.order-info-detail")};window.__scrubContactUs=function(){D.maskNodes("textarea#message")};window.__scrub=function(){window.__maskMagazineRequest();window.__scrubRegistration();window.__scrubCheckout();window.__scrubContactUs();window.__scrubCCApp();window.__unmaskFields()};window.__watch=function(){window.__watchProductQuickView();window.__watchRatingControl();window.__watchCartPreview();window.__watchProductQuantityControl();window.__watchProductReview();window.__watchProductResultsRefine();window.__watchProductTabs()};DR.attach("window.__attachToNav();");DR.attach("window.__watch();");robotreplay.Serializer.onBeforeInit.subscribe(function(){window.__scrub();D.maskNodes("select#state, select#ccType, select#cc-type, select#ccMonth, select#ccYear, select#saved-cc, select#cc-Year, select#cc-Month, select#birthMonth, select#birthDay, select#birthYear")})}};robotreplay.SiteSpecific={indexDelay:false,noRecord:false,init:function(){var R=robotreplay;try{var sc=R.siteSpecificCode;var ss=R.Session.getDomain();if(sc&&R.Session.isRecording()){var code=sc[ss];code.call(this)}}catch(e){}}};robotreplay.SiteSpecific.init();robotreplay.Capture={initialized:false,onMouseDownUp:new robotreplay.Subject(),onAddMouseMoveToClick:new robotreplay.Subject(),onIndexingComplete:new robotreplay.Subject(),onSetPage:new robotreplay.Subject(),setMouseOverList:function(){var S=robotreplay.SiteSpecific;if(S.skipFromMouseOver){robotreplay.Capture.skipFromMouseOver=S.skipFromMouseOver}},init:function(){var r=robotreplay;if(this.initialized==false){if(!document||!document.body){setTimeout(r.Capture.init,50)}else{var re=r.Event;var rl=r.Log;var rb=r.Browser;var rs=r.Session;if(robotreplay.omitTagList)r.Capture.removeTagsFromIndexing(robotreplay.omitTagList);r.Capture.setMouseOverList();try{this.setPage();r.forEach(this.formFieldTypes,function(tagName){this.tagList[tagName]=""},this);this.lastMouseTime=new Date();re.attachWindowEvent('mousemove',this.mouseMove);if(robotreplay.browser!="webkit"){re.attachWindowEvent('mouseout',this.pageFocus);re.attachWindowEvent('mouseover',this.pageFocus);}re.attachWindowEvent('resize',this.pageResize);re.attachWindowEvent('scroll',this.pageScroll);this.pageResize();rl.push('br',{br:rb.browser.name,bt:rb.browser.basetype,os:rb.OS,vr:rb.version.fullstring,vrj:rb.version.maj,vrn:rb.version.min})}catch(e){}rl.push('sm',{st:rs.pageLoadTime,sd:rs.pageInitDateTime});rl.push('dt',{t:document.title});rl.push("tk",(new Date()).getTime());re.attachWindowEvent('mousedown',this.emergencySave);re.attach(document,'keydown',function(e){try{var k;if(window.event){e=window.event;k=e.keyCode}else if(e){k=e.which}if((k==115&&e.altKey)||(k==87&&e.ctrlKey)||(k==81&&e.metaKey)||(k==87&&e.metaKey)){r.Capture.emergencySave()}}catch(ex){}});this.indexElements();this.initialized=true}}},uninstall:function(){var re=robotreplay.Event;var rc=robotreplay.Capture;re.removeWindowEvent('mousemove',rc.mouseMove);if(robotreplay.browser!="webkit"){re.removeWindowEvent('mouseout',rc.pageFocus);re.removeWindowEvent('mouseover',rc.pageFocus);}re.remove(document.body,"mouseover",rc.mouseOverEl,true);re.remove(document.body,"mouseout",rc.mouseOutEl,true)},saveForm:function(formObj){var r=robotreplay,rd=r.Dom;var ac=rd.getAbsoluteCoords(formObj);ac.name=formObj.name;ac.id=rd.getiFrameReference(formObj);r.forEach(this.formFieldTypes,function(tagName){var objarray=formObj.getElementsByTagName(tagName);if(objarray.length>0){ac[tagName]=objarray.length;var acis="[";for(var k=0,l=objarray.length;k<l;k++){if(k>0){acis+=";"}objarray[k].setAttribute("autocomplete","off");var md=rd.getAbsoluteCoords(objarray[k]);var mds=objarray[k].name.replace(/,/g,"")+","+objarray[k].id.replace(/,/g,"")+","+md.x+","+md.y+","+md.width+","+md.height;acis+=mds}acis+="]";ac[tagName+"_inf"]=acis}},this);r.Log.push('fd',ac)},elArray:{},tagList:{"h1":"","h2":"","h3":"","span":"","iframe":"","frame":"","div":"","img":"","form":"","button":"","ul":"","ol":"","li":"","dl":"","dd":"","dt":"","table":"","td":"","tr":"","reset":"","submit":"","a":"","embed":"","area":"","strong":"","aside":"","section":"","body":"","head":""},skipFromMouseOver:{"table":"","td":"","tr":"","form":"","iframe":"","frame":"","checkbox":"","span":""},formFieldTypes:{"input":"","checkbox":"","fileupload":"","hidden":"","password":"","radio":"","select":"","text":"","textarea":"","select-one":"","select-multiple":""},specialEventTagList:{"div":"","textarea":"","input":"","checkbox":"","select":"","button":"","form":"","a":""},constantReCheckingList:[],removeTagsFromIndexing:function(tags){if(tags.length>0){var tlist=tags.split(",");for(var i=0;i<tlist.length;i++){delete this.tagList[tlist[i]]}}},performIndexing:function(frameContext,idprefix){var foundNewItems=false;var r=robotreplay,rs=r.String;var radios=[];r.forEach(this.tagList,function(tagName){if(!this.elArray[tagName]){this.elArray[tagName]=0}var elCount=this.elArray[tagName];if(frameContext.nodeType==9){var eList=frameContext.getElementsByTagName(tagName)}else{var eList=robotreplay.Dom.query.select(tagName,frameContext)}for(var k=0,l=eList.length;k<l;k++){var elem=eList[k];if(!elem.id&&elem.robotreplay_ignore!='true'){var newid="rr"+tagName+elCount++;if(tagName=="a"){newid="rrta"+tagName+(elCount-1)}elem.id=newid;foundNewItems=true}if(this.specialEventTagList[tagName]!=null&&elem.rr_eventAdded==null){this.attachEvents(elem,tagName);if(this.formFieldTypes[tagName]!=null&&elem.type=="radio"){radios.push(elem.checked)}}}this.elArray[tagName]=elCount},this);if(radios.length>0){r.Log.push("rs",radios.join(","))}if(foundNewItems==true){r.Log.push("ei",[1],true,false);if(this.constantReCheckingList.length>0){this.periodicEventCheck()}}return foundNewItems},attachEvents:function(elem,tagName){var r=robotreplay,re=r.Event,br=robotreplay.browser,Br=robotreplay.Browser.version;elem.rr_eventAdded=true;if((tagName=="textarea")&&(br=="mozilla")&&(Br.maj<3)){if(elem.rr_recheck==null){elem.rr_recheck=true;this.constantReCheckingList[this.constantReCheckingList.length]=elem}}else{re.attach(elem,"scroll",robotreplay.Capture.scrollEl)}if((tagName=="textarea")||(tagName=="text")||(tagName=="input")||(tagName=="select")){re.attach(elem,"focus",this.focusBlurEl,true);re.attach(elem,"blur",this.focusBlurEl,true);re.attach(elem,"click",this.focusBlurEl,true)}if(this.formFieldTypes[tagName]!=null&&elem.type!="radio"){r.Log.push("sf",this.serializeFormField(elem))}if(this.isTextField(elem)){re.attach(elem,"click",this.textFieldWatcher,true);re.attach(elem,"keydown",this.keyType,true);re.attach(elem,"keyup",this.keyType,true)}if(tagName=="select"){re.attach(elem,"change",this.changeSelect,true)}},isTextField:function(fieldObj){var tagName=fieldObj.tagName.toLowerCase();var fieldType=fieldObj.type;if((tagName=="textarea")||(tagName=="text")||((tagName=="input")&&((fieldType=="text")||(fieldType=="password")))){return true}return false},frameHistory:[],indexElements:function(){var r=robotreplay,re=r.Event;var foundNewItems=false;var frameArray=[];var windowArray=[];frameArray[frameArray.length]=document;windowArray[windowArray.length]=window;var currentFrameIndex=0;var idPrefix='';while(windowArray[currentFrameIndex]!=null){var currentFrame=frameArray[currentFrameIndex];var pastIndexed=false;for(var i=0,j=this.frameHistory.length;i<j;i++){if(this.frameHistory[i]==currentFrame){pastIndexed=true}}if(currentFrame){foundNewItems=this.performIndexing(currentFrame,null);if(pastIndexed==false){var frameBody=currentFrame.body;re.attach(frameBody,"mouseover",this.mouseOverEl,true);re.attach(frameBody,"mouseout",this.mouseOutEl,true);re.attach(frameBody,"mousedown",this.mouseDownUp,true);re.attach(frameBody,"mouseup",this.mouseDownUp,true);re.attach(frameBody,"click",this.mouseDownUp,true);re.attach(frameBody,"dblclick",this.mouseDownUp,true);re.attach(frameBody,"contextmenu",this.mouseDownUp,true)}}if(!pastIndexed){this.frameHistory.push(currentFrame);if(currentFrameIndex>0){if(r.browser=="ie"){re.attach(windowArray[currentFrameIndex].document.body,"mousemove",this.mouseMove)}else{re.attach(windowArray[currentFrameIndex],"mousemove",this.mouseMove)}}}if(currentFrame){var a=Array().concat.call(new Array(),currentFrame.getElementsByTagName("frame"),currentFrame.getElementsByTagName("iframe"));for(var j=0;j<a.length;j++){var l=a[j];for(var i=0;i<l.length;i++){try{if(l[i].contentWindow.rr_domready){frameArray.push(l[i].contentWindow.document);windowArray.push(l[i].contentWindow)}}catch(e){}}}}try{if(windowArray[currentFrameIndex].rr_domready&&!pastIndexed&&!window.noIndexIFrames){windowArray[currentFrameIndex].robotreplay.saveIFrame(r.Session.getSessionId());var frameScroll=function(fIndex){robotreplay.Event.attach(windowArray[fIndex],'scroll',function(){robotreplay.Capture.scrollEl(windowArray[fIndex])})};frameScroll(currentFrameIndex)}}catch(e){}currentFrameIndex++}this.onIndexingComplete.notify()},periodicEventHandle:null,periodicCheckInterval:500,periodicEventCheck:function(){var tl=this.constantReCheckingList;var rb=robotreplay.browser;var maj=robotreplay.Browser.version.maj;clearTimeout(this.periodicEventHandle);for(var i=0,k=tl.length;i<k;i++){if(tl[i].tagName.toLowerCase()=="textarea"){if((maj<3)&&(rb="mozilla")){if(!tl[i].scrollInfo){tl[i].scrollInfo={top:0,left:0}}if((tl[i].scrollInfo.top!=tl[i].scrollTop)||(tl[i].scrollInfo.left!=tl[i].scrollLeft)){tl[i].scrollInfo.top=tl[i].scrollTop;tl[i].scrollInfo.left=tl[i].scrollLeft;var myEvent={target:tl[i]};this.scrollEl(myEvent)}}}}this.periodicEventHandle=setTimeout(function(){robotreplay.Capture.periodicEventCheck()},this.periodicCheckInterval)},changeSelect:function(event){var r=robotreplay;var rc=r.Capture;var rd=r.Dom;var L=r.Log;var targetElement=(event.target||event.toElement||event.srcElement);var myElId=rd.getiFrameReference(targetElement);var newEl=rc.serializeFormField(targetElement,true);newEl.value=rc.serialFormRecords[myElId].value;if(rd.objectsSame(newEl,rc.serialFormRecords[myElId])==false){L.push("sf",rc.serializeFormField(targetElement))}else{L.push("sv",{el:myElId,val:rc.serializeFormField(targetElement).value})}rc.serializeFormField(targetElement)},saveSelectBoxesState:function(rootEl){if(rootEl){var r=robotreplay;var els=rootEl.getElementsByTagName('select');for(var i=0;i<els.length;i++){r.Log.push("sv",{el:els[i].id,type:"select-one",val:els[i].selectedIndex})}}},keyType:function(event){var rc=robotreplay.Capture;var rd=robotreplay.Dom;var L=robotreplay.Log;var targetElement=(event.target||event.toElement||event.srcElement);var myElId=rd.getiFrameReference(targetElement);var oldVer=rc.serialFormRecords[myElId];if(typeof oldVer.value=="undefined"||!oldVer.value)oldVer.value="";var skipRecord=false;var kk=event.keyCode;if(((Math.abs(oldVer.value.length-targetElement.value.length)>1)||((rc.lastTextFieldCaret.end-rc.lastTextFieldCaret.start)==1))||(kk==13)){L.push("sf",rc.serializeFormField(targetElement));skipRecord=true}rc.textFieldWatcher(targetElement);if((skipRecord==false)&&((targetElement.value.length-oldVer.value.length)==1)){var val=targetElement.value.substr(rc.lastTextFieldCaret.caret-1,1);if(targetElement.className.indexOf(robotreplay.hiddenFieldClassName)!=-1&&targetElement.className.indexOf(robotreplay.visibleFieldClassName)==-1){val=val.replace(/./g,'*')}L.push("k",{el:myElId,c:val,st:targetElement.scrollTop,sl:targetElement.scrollLeft})}else{if((kk==8)||(kk==46)||(kk==13)){var cp=rd.getCaretInfo(targetElement);if(event.type=="keydown"){L.push("sk",{el:myElId,c:kk,s:cp.start,end:cp.end});}else{L.push("c",{el:myElId,s:cp.start,e:cp.end,c:cp.caret,st:targetElement.scrollTop,sl:targetElement.scrollLeft},true)}}}rc.serializeFormField(targetElement,false)},lastMouseDown:{x:0,y:0},mouseDownUp:function(event){var targetElement=(event.target||event.toElement||event.srcElement);var R=robotreplay;var L=R.Log,C=R.Capture;R.Geometry.setScrollPosition();if(targetElement){var tag="";try{tag=targetElement.tagName.toLowerCase()}catch(e){}var x=C.lastMouseCoords.clientX;var y=C.lastMouseCoords.clientY;if(C.onAddMouseMoveToClick.notify(event)){C.mouseMove(event,true);}if(C.tagList[tag]!=null){var myElId=R.Dom.getiFrameReference(targetElement);if(event.type=="mousedown"){C.lastMouseDown.x=x;C.lastMouseDown.y=y;L.push("md",{el:myElId,x:x,y:y},false,false)}else if(event.type=="mouseup"){L.push("mu",{el:myElId,x:x,y:y},false,false)}else if(event.type=="click"){if(R.browser=="mozilla"){if(targetElement.type!="submit"||event.clientX!=0||event.clientY!=0){L.push("ck",{el:myElId,x:C.lastMouseDown.x,y:C.lastMouseDown.y},false,false)}}else{L.push("ck",{el:myElId,x:C.lastMouseDown.x,y:C.lastMouseDown.y},false,false)}}else if(event.type=="dblclick"){L.push("dk",{el:myElId,x:x,y:y},false,false)}else if(event.type=="contextmenu"){L.push("cm",{el:myElId,x:x,y:y},false,false)}}else{if(C.onMouseDownUp.notify(event,x,y)){if(event.type=="mousedown"){L.push("md",{x:x,y:y},false,false)}else if(event.type=="mouseup"){L.push("mu",{x:x,y:y},false,false)}else if(event.type=="click"){L.push("ck",{x:x,y:y},false,false)}else if(event.type=="dblclick"){L.push("dk",{x:x,y:y},false,false)}else if(event.type=="contextmenu"){L.push("cm",{x:x,y:y},false,false)}}}}},formEvent:function(event){var targetElement=(event.target||event.toElement||event.srcElement);if(targetElement){var rd=robotreplay.Dom;var L=robotreplay.Log;robotreplay.Capture.serializeCompareForm(targetElement);var myElId=rd.getiFrameReference(targetElement);if(event.type=="reset"){L.push("fr",{el:myElId})}else if(event.type=="submit"){L.push("fb",{el:myElId})}}},focusBlurEl:function(event){var targetElement=(event.target||event.toElement||event.srcElement);if(targetElement){var tag="";try{tag=targetElement.tagName.toLowerCase()}catch(e){}var r=robotreplay,rc=r.Capture,rd=r.Dom,L=r.Log;if(rc.tagList[tag]!=null){var myElId=rd.getiFrameReference(targetElement);if(event.type=="focus"){if(rc.formFieldTypes[tag]!=null){if(rd.objectsSame(rc.serialFormRecords[myElId],rc.serializeFormField(targetElement,true))==false){L.push("sf",rc.serializeFormField(targetElement))}}if(targetElement.form){rc.serializeCompareForm(targetElement)}L.push("fs",{el:myElId},true,false);if(rc.isTextField(targetElement)){rc.textFieldWatcher(targetElement)}}else if(event.type=="blur"){clearTimeout(rc.textFieldTimer);if(rc.formFieldTypes[tag]!=null){if(rd.objectsSame(rc.serialFormRecords[myElId],rc.serializeFormField(targetElement,true))==false){L.push("sf",rc.serializeFormField(targetElement))}}L.push("bl",{el:myElId},true,false)}else if(event.type=="click"){if(targetElement.type&&(targetElement.type=="checkbox"||targetElement.type=="radio")){L.push("sf",rc.serializeFormField(targetElement))}}}}},scrollInterval:200,lastScrollTime:new Date(),lastScrollElement:null,scrollCatchTimer:null,scrollEl:function(event){var targetElement=(event.target||event.toElement||event.srcElement||event.document);if(targetElement){var rc=robotreplay.Capture;var ctime=(new Date());var tdiff=ctime-rc.lastScrollTime;if(rc.lastScrollElement!=targetElement){tdiff=rc.scrollInterval*2}else{clearTimeout(rc.scrollCatchTimer)}if(tdiff>=rc.scrollInterval){rc.lastScrollTime=ctime;rc.lastScrollElement=targetElement;var tag="";try{tag=targetElement.tagName.toLowerCase()}catch(e){}if(rc.tagList[tag]!=null){var myElId=robotreplay.Dom.getiFrameReference(targetElement);robotreplay.Log.push("se",{el:myElId,t:targetElement.scrollTop,l:targetElement.scrollLeft},true,false)}else if(targetElement.nodeType==9){var myElId=null;if(robotreplay.browser=="ie"){var myElId=targetElement.parentWindow.frameElement.id;robotreplay.Geometry.setScrollPosition(targetElement.parentWindow)}else{var myElId=targetElement.defaultView.frameElement.id;robotreplay.Geometry.setScrollPosition(targetElement.defaultView)}robotreplay.Capture.recordFrameScroll(myElId)}}else{rc.scrollCatchTimer=setTimeout(function(){robotreplay.Capture.scrollEl({target:targetElement})},Math.round(rc.scrollInterval*1.2))}}},mouseOverEl:function(event,overrideEl){try{var targetElement=overrideEl||event.target||event.srcElement;if(targetElement){var tag="";try{tag=targetElement.tagName.toLowerCase()}catch(e){}var r=robotreplay,rc=r.Capture,D=r.Dom;if(rc.tagList[tag]!=null&&rc.skipFromMouseOver[tag]==null){var myElId=D.getiFrameReference(targetElement);var rt=null;if(r.browser=="ie"){}else{rt=D.getiFrameReference(event.relatedTarget)}if(!myElId||myElId==""){rc.indexElements()}else{r.Log.push("mo",{el:myElId,rT:rt},true,false)}}}}catch(e){}},mouseOutEl:function(event,overrideEl,cancelRT){try{var targetElement=overrideEl||event.target||event.srcElement;if(targetElement){var tag="";try{tag=targetElement.tagName.toLowerCase()}catch(e){}var r=robotreplay,rc=r.Capture,D=r.Dom;if(rc.tagList[tag]!=null&&rc.skipFromMouseOver[tag]==null){var myElId=D.getiFrameReference(targetElement);var rt=null;if(r.browser!="ie"&&cancelRT!='true'){rt=D.getiFrameReference(event.relatedTarget)}r.Log.push("mt",{el:myElId,rT:rt},true,false)}}}catch(e){}},lastScrollCoords:{scrollLeft:0,scrollTop:0},pageScroll:function(event){var r=robotreplay,C=r.Capture,G=r.Geometry;G.setScrollPosition();C.recordPageScroll();C.lastScrollTime=new Date()},recordPageScroll:function(){wg=robotreplay.Geometry.getScrollPosition();var rl=robotreplay.Log;var rc=robotreplay.Capture;var rm=rc.lastRawMouseCoords;if(!wg.scrollLeft||wg.scrollLeft.length<1){wg.scrollLeft=0}if(!wg.scrollTop||wg.scrollTop.length<1){wg.scrollTop=0}rl.push("ps",[wg.scrollLeft,wg.scrollTop],true,false);if(rc.mouseOverPage==true){if(rm.clientX==0||rm.clientY==0){var S=robotreplay.Storage;var mp=S.read(S.MOUSEPOS,rm.clientX+","+rm.clientY).split(",");if(rm.clientX==0)rm.clientX=parseInt(mp[0]);if(rm.clientY==0)rm.clientY=parseInt(mp[1])}rl.push('m',[rm.clientX+wg.scrollLeft,rm.clientY+wg.scrollTop],true)}},recordFrameScroll:function(frameID){fg=robotreplay.Geometry.getFrameScrollPosition();var rl=robotreplay.Log;var rc=robotreplay.Capture;var rm=rc.lastRawMouseCoords;if(!fg.scrollLeft||fg.scrollLeft.length<1){fg.scrollLeft=0}if(!fg.scrollTop||fg.scrollTop.length<1){fg.scrollTop=0}rl.push("se",{el:frameID,t:fg.scrollTop,l:fg.scrollLeft},true,false);if(rc.mouseOverPage==true){if(rm.clientX==0||rm.clientY==0){var S=robotreplay.Storage;var mp=S.read(S.MOUSEPOS,rm.clientX+","+rm.clientY).split(",");if(rm.clientX==0)rm.clientX=parseInt(mp[0]);if(rm.clientY==0)rm.clientY=parseInt(mp[1])}rl.push('m',[rm.clientX+fg.scrollLeft,rm.clientY+fg.scrollTop],true)}},resizeThrottle:null,pageResize:function(event){clearTimeout(this.resizeThrottle);this.resizeThrottle=setTimeout("robotreplay.Capture.recordResize()",300)},recordResize:function(){var wg=robotreplay.Geometry.getWindowSize();robotreplay.Log.push("pr",[wg.windowWidth,wg.windowHeight],true,false,0)},mouseInterval:150,lastMouseTime:new Date(),lastMouseCoords:{clientX:0,clientY:0},lastRawMouseCoords:{clientX:0,clientY:0},mouseOverPage:true,mouseOverPageThrottle:null,mouseOverInitialized:false,catchLastPositionCatch:null,mouseMove:function(event,forceRecord){var r=robotreplay;var L=r.Log;var C=r.Capture;var ctime=(new Date());var tdiff=ctime-C.lastMouseTime;if(!forceRecord){forceRecord=false}if(C.mouseOverPage==false){C.setPageFocusStatus(true);}var sg=r.Geometry.getScrollPosition();var mouse={};mouse.clientX=event.clientX+sg.scrollLeft;mouse.clientY=event.clientY+sg.scrollTop;C.lastRawMouseCoords.clientX=event.clientX;C.lastRawMouseCoords.clientY=event.clientY;var myC=robotreplay.Dom.getiFrameCoords(event.srcElement||event.currentTarget);if((myC.x>0)||(myC.y>0)){myC.x+=event.clientX;myC.y+=event.clientY;mouse.clientX=myC.x;mouse.clientY=myC.y;C.lastRawMouseCoords.clientX=myC.x-sg.scrollLeft;C.lastRawMouseCoords.clientY=myC.y-sg.scrollTop}if(mouse.clientY<0||mouse.clientX<0){C.setPageFocusStatus(false);}if(r.browser=="webkit"){var mdist=r.Math.distance([mouse.clientX,mouse.clientY],[C.lastMouseCoords.clientX,C.lastMouseCoords.clientY]);if((mdist>(200/ (tdiff /500)))&&(tdiff>3000)){var pageLeave=L.push("pf",[0],true,false,tdiff-10);var pageReEnter=L.push("pf",[1],true,false);C.lastMouseTime=ctime;L.cleanEventLog("m",pageLeave,pageReEnter);}}clearTimeout(C.catchLastPositionCatch);if(C.mouseOverPage==true){if(((tdiff>=C.mouseInterval)&&(!((mouse.clientX==0)&&(mouse.clientY==0))))||forceRecord==true){L.push("m",[mouse.clientX,mouse.clientY],true);C.lastMouseTime=ctime}else{C.catchLastPositionCatch=setTimeout(function(){if(C.mouseOverPage==true){L.push('m',[mouse.clientX,mouse.clientY],true);if(r.Browser.browser.basetype=="webkit"){C.emergencySave()}}},C.mouseInterval*3)}};C.lastMouseCoords.clientX=mouse.clientX;C.lastMouseCoords.clientY=mouse.clientY;},lastPageFocusCall:false,lastBlurEvent:new Date(),setPageFocusStatus:function(isOn,actuallyRecord){var rc=robotreplay.Capture;var rl=robotreplay.Log;if(rc.lastPageFocusCall!=isOn){clearTimeout(rc.mouseOverPageThrottle)}rc.mouseOverInitialized=true;if(actuallyRecord&&actuallyRecord==true){if(this.mouseOverPage!=isOn){this.mouseOverPage=isOn;if(isOn==true){rl.push("pf",["1"],true)}rl.push("m",[rc.lastMouseCoords.clientX,rc.lastMouseCoords.clientY],true);if(isOn==false){rl.push("pf",["0"],true)}rc.lastMouseTime=(new Date())}}else{rc.mouseOverPageThrottle=setTimeout(function(){rc.setPageFocusStatus(isOn,true)},50);rc.lastPageFocusCall=isOn}var now=new Date();if(isOn==false&&(now-rc.lastBlurEvent)>500){rc.lastBlurEvent=now;this.emergencySave()}},pageFocus:function(event){var rc=robotreplay.Capture;var eventStatus=null;var forceInstant=false;if(robotreplay.browser=="mozilla"){if(!event.relatedTarget&&event.type!="mouseover")eventStatus="OFF";else eventStatus="ON"}else if(robotreplay.browser=="ie"){forceInstant=true;if(!event.toElement)eventStatus="OFF";else eventStatus="ON"}else if(robotreplay.browser=="opera"){forceInstant=true;if(event.toElement==document.body)eventStatus="OFF";else eventStatus="ON"}if((rc.mouseOverPage==false)&&(eventStatus=="ON")){rc.setPageFocusStatus(true,forceInstant)}if((rc.mouseOverPage==true)&&(eventStatus=="OFF")){rc.setPageFocusStatus(false,forceInstant)}},textFieldTimer:null,lastTextFieldObj:null,lastTextFieldCaret:{start:0,end:0,caret:0},textFieldWatcher:function(fieldObj){clearTimeout(this.textFieldTimer);var rc=robotreplay.Capture;var rd=robotreplay.Dom;if(!rd.isElementVisible(fieldObj))return;if(!fieldObj.tagName)var fieldObj=(fieldObj.target||fieldObj.toElement||fieldObj.srcElement);var selo={start:0,end:0};var cp=rd.getCaretInfo(fieldObj);var rcl=rc.lastTextFieldCaret;if((rc.lastTextFieldObj!=fieldObj)||(rcl.start!=cp.start)||(rcl.end!=cp.end)||(rcl.caret!=cp.caret)){rc.lastTextFieldObj=fieldObj;rc.lastTextFieldCaret=cp;var myElId=rd.getiFrameReference(fieldObj);robotreplay.Log.push("c",{el:myElId,s:cp.start,e:cp.end,c:cp.caret,st:fieldObj.scrollTop,sl:fieldObj.scrollLeft},true)}this.textFieldTimer=setTimeout(function(){robotreplay.Capture.textFieldWatcher(fieldObj)},150);return true},serialFormRecords:[],serializeFormField:function(fO,skipCache){if(fO){var r=robotreplay,rd=r.Dom;var sD={};sD.name=fO.name;try{sD.el=rd.getiFrameReference(fO);sD.value=fO.value;sD.disabled=fO.disabled;if(fO.className.indexOf(robotreplay.hiddenFieldClassName)!=-1){sD.value=sD.value.replace(/./g,'*')}if(!fO.value)sD.value='';sD.checked=fO.checked;sD.type=fO.type;if(fO.type=="radio")sD.value=rd.getCheckedValue(fO);if(fO.form)sD.form=rd.getiFrameReference(fO.form);if(skipCache&&(skipCache==true)){}else this.serialFormRecords[sD.el]=sD;if((fO.type=="select-one")||(fO.type=="select-multiple")){sD.selectedIndex=fO.selectedIndex;sD.options="[";for(var i=0,k=fO.options.length;i<k;i++){if(i>0){sD.options+=","}sD.options+=r.encodeFormRRChars((fO.options[i].value==""?fO.options[i].text:fO.options[i].value))+";"+r.encodeFormRRChars(fO.options[i].text)}sD.options+="]"};if(fO.type=="select-multiple"){sD.value=rd.getMulti(fO).toString()}}catch(e){}if(sD.name=="__VIEWSTATE"){sD.value=""}return sD}else return{}},serializeCompareForm:function(fO,clearPrev){var r=robotreplay,rc=r.Capture,rd=r.Dom;fO=(fO.form||fO);if(!clearPrev)clearPrev=false;for(var i=0;i<fO.length;i++){var myElId=rd.getiFrameReference(fO[i]);if(rc.formFieldTypes[fO[i].type]!=null){if(rd.objectsSame(rc.serialFormRecords[myElId],rc.serializeFormField(fO[i],true))==false||clearPrev==true){r.Log.push("sf",rc.serializeFormField(fO[i]))}}}},setPage:function(){var r=robotreplay,L=r.Log;if(!window.rr_begintime){window.rr_begintime=new Date()}if(typeof robotreplay_startup!="undefined"){var C=robotreplay_startup.Capture;robotreplay_startup.Init.shutdown();var a=C.dataStream.split('~');L.aData=L.aData.concat(a.slice(0,a.length-1));C.dataStream=""}else{L.push("sp",r.encodeRRChars(robotreplay.Session.url),false,null,(new Date()-window.rr_begintime))}this.onSetPage.notify()},emergencySave:function(e){e=e||window.event;if(e!=null){var elem=e.target||e.srcElement;if(elem!=null&&e.type=='mousedown'){try{var type=elem.type||'';if(elem.tagName=='HTML'||(elem.tagName=='INPUT'&&type=='text')){return}}catch(e){}}}var r=robotreplay;var S=r.Storage;r.Log.handleTransmissionAndStorage(true);var m=r.Capture.lastMouseCoords;S.write(S.MOUSEPOS,m.clientX+","+m.clientY,true);}};robotreplay.init=function(){var R=robotreplay,D=R.Domready,L=R.Log,S=R.Serializer,O=R.Onunload,OF=R.onFlashReady;if(R.Session.isRecording()){if(document.body){if(!R.Dom.isIFrame()){if(R.Session.isPageRecordable()){L.init();L.onInviteAccepted.subscribeOnce(function(){OF.subscribeOnce(S.serializeDoms,S)});OF.subscribeOnce(L.sendQueued,L);OF.subscribeOnce(function(){L.handleTransmissionAndStorage(true)});O.attach("robotreplay.Log.close();");O.attach("robotreplay.Capture.uninstall();");S.onInit.subscribeOnce(function(hash){var h=window.location.href;L.push("ds",{md5:hash,url:h,urlmd5:robotreplay.MD5.hash(h,1)});L.push("en",{el:R.JSON.stringify(R.Capture.elArray)});L.recPageDimensions()});if(R.Browser.browser.basetype=="ie"){D.attach(robotreplay.Capture.init,robotreplay.Capture);D.attach(robotreplay.Serializer.init,robotreplay.Serializer);D.attach(robotreplay.Swf.addTransportSwf,robotreplay.Swf)}else{D.attach(robotreplay.Capture.init,robotreplay.Capture);D.attach(robotreplay.Serializer.init,robotreplay.Serializer);D.attach(robotreplay.Swf.addTransportSwf,robotreplay.Swf)}}else{L.init();O.attach("robotreplay.Log.close();");D.attach("robotreplay.Swf.addTransportSwf();");D.attach("robotreplay.transmitSkipPage();")}R.onInit.notify()}else{if(R.Session.isPageRecordable()){D.attach("robotreplay.initIFrame();")}}}else{setTimeout(robotreplay.init,300)}}};robotreplay.initIFrame=function(i){window.rr_domready=true;i=i||1;var r=robotreplay,t=(r.Dom.getTop()),tr="";if(t){tr=t.robotreplay}else{return}if(tr&&tr.Capture&&tr.Capture.initialized===true){tr.Capture.indexElements()}else{if(i<20){setTimeout(function(){r.initIFrame.call(r,i+1)},200)}}};robotreplay.saveIFrame=function(sessionId){var R=robotreplay,S=R.Session,E=R.Serializer,D=R.Dom;S.rr_session_id=sessionId;if(D.isIFrame()&&S.isPageRecordable()){E.onInit.subscribeOnce(function(hash){var h=window.location.href;var t=window.frameElement.id;(D.getTop()).robotreplay.Log.push('is',{md5:hash,url:h,urlmd5:R.MD5.hash(h,1),eid:t})});R.Swf.addTransportSwf();E.init()}};robotreplay.initRetry=function(){try{var R=robotreplay;R.Onunload.attach("robotreplay.Log.close();");R.Onunload.attach("robotreplay.Capture.uninstall();");R.Domready.attach("robotreplay.Capture.indexElements();")}catch(e){setTimeout(robotreplay.initRetry,200)}};robotreplay.transmitSkipPage=function(){var r=robotreplay,L=r.Log,C=r.Capture,S=r.Session,B=r.Browser;C.setPage();L.push('sm',{st:S.pageLoadTime,sd:S.pageInitDateTime});L.push('dt',{t:document.title});L.push("tk",(new Date()).getTime());C.recordResize();L.push('br',{br:B.browser.name,bt:B.browser.basetype,os:B.OS,vr:B.version.fullstring,vrj:B.version.maj,vrn:B.version.min});L.push("nr",{url:window.location.href},true);L.onInviteAccepted.subscribeOnce(function(){L.handleTransmissionAndStorage(true);r.onFlashReady.subscribeOnce(r.Serializer.serializeDoms,r.Serializer)})};robotreplay.Session.init();if(window.rr_isreplay!=true){robotreplay.init()}robotreplay_startup={noRecord:false,version:12.1};robotreplay_startup.Capture={isSeparate:false,delimeter:'|rr_preld::',encodeRRCharacters:function(value_to_encode){var rr_pref='(rr';var rr_suf=')';var string_to_encode=String(value_to_encode);string_to_encode=string_to_encode.replace(/~/g,rr_pref+'t'+rr_suf);string_to_encode=string_to_encode.replace(/'/g,rr_pref+'a'+rr_suf);string_to_encode=string_to_encode.replace(/&/g,rr_pref+'am'+rr_suf);string_to_encode=string_to_encode.replace(/_/g,rr_pref+'u'+rr_suf);string_to_encode=string_to_encode.replace(/\*/g,rr_pref+'s'+rr_suf);string_to_encode=string_to_encode.replace(/\n/g,rr_pref+'nl'+rr_suf);return string_to_encode},dataStream:"",init:function(){this.isSeparate=(typeof robotreplay=="undefined");var rc=robotreplay_startup.Capture;rc.dataStream=robotreplay_startup.Capture.getNameData();rc.setP();rc.attachCriticals();if(window.addEventListener){window.addEventListener("unload",function(){robotreplay_startup.Capture.unloadDump()},true)}else{window.attachEvent("onunload",function(){robotreplay_startup.Capture.unloadDump()})}},shutdown:function(){var rc=robotreplay_startup.Capture;rc.detachCriticals();rc.killNameData()},unloadDump:function(){if(typeof robotreplay=="undefined"||robotreplay.Domready.didExecute==false){robotreplay_startup.Capture.rewriteNameData(robotreplay_startup.Capture.dataStream)}},getNameData:function(){var wn=window.name,d=robotreplay_startup.Capture.delimeter;var al=wn.indexOf(d);if(al>-1){var dbl=wn.substr(al);dbl=dbl.substr(0,dbl.indexOf(":::"));dbl=dbl.replace(d,"");dbl=dbl.replace(":::","");return dbl}else{return""}},kNameDataPos:-1,killNameData:function(addval){var wn=window.name;var td=robotreplay_startup.Capture;if(!td.kNameDataPos||td.kNameDataPos<0){td.kNameDataPos=wn.indexOf(td.delimeter)}if(td.kNameDataPos>-1){var dbl=wn.substr(0,td.kNameDataPos)+wn.substr(wn.indexOf(":::")+3);if(!addval){addval=''}window.name=dbl+addval}else{if(addval){window.name+=addval}}},rewriteNameData:function(str){var td=robotreplay_startup.Capture,newdb=td.delimeter+str+":::";td.killNameData(newdb)},attachCriticals:function(){var rs=robotreplay_startup.Capture;if(typeof robotreplay!="undefined"&&robotreplay.Event){robotreplay.Event.attachWindowEvent('mousemove',rs.mouseMove);}else{this.attachWindowEvent('mousemove',rs.mouseMove);}},detachCriticals:function(){var rs=robotreplay_startup.Capture;if(typeof robotreplay!="undefined"&&robotreplay.Event){robotreplay.Event.removeWindowEvent('mousemove',rs.mouseMove,true)}else{this.removeWindowEvent('mousemove',rs.mouseMove,true)}},mouseInterval:75,lastMouseTime:new Date(),lastMouseCoords:{clientX:0,clientY:0},lastRawMouseCoords:{clientX:0,clientY:0},mouseMove:function(event){var rc=robotreplay_startup.Capture;var ctime=(new Date());var tdiff=ctime-rc.lastMouseTime;var mouse={};if(typeof robotreplay!="undefined"&&robotreplay.Geometry){var sg=robotreplay.Geometry.getScrollPosition();mouse.clientX=event.clientX+sg.scrollLeft;mouse.clientY=event.clientY+sg.scrollTop}else{mouse.clientX=event.clientX;mouse.clientY=event.clientY}rc.lastRawMouseCoords.clientX=event.clientX;rc.lastRawMouseCoords.clientY=event.clientY;if((tdiff>=rc.mouseInterval)&&(!((mouse.clientX==0)&&(mouse.clientY==0)))){rc.pushM(mouse.clientX,mouse.clientY);rc.lastMouseTime=ctime};rc.lastMouseCoords.clientX=mouse.clientX;rc.lastMouseCoords.clientY=mouse.clientY},lastTime:new Date(),setP:function(){var rs=robotreplay_startup.Capture;var rl=this;if(rl.isSeparate==false&&typeof robotreplay!="undefined"){rl=robotreplay.Log}rs.dataStream+="sp*(0)*"+rs.encodeRRCharacters(window.location.href)+"~";rs.rewriteNameData(rs.dataStream)},lastTime:new Date(),startTime:new Date(),isFirstMouseMove:true,lastCommit:new Date(),pushM:function(x,y){var rl=this;if(rl.isSeparate==false&&typeof robotreplay!="undefined"){rl=robotreplay.Log}var rc=robotreplay_startup.Capture;var nTime=new Date();if(rl.isFirstMouseMove==true){rl.isFirstMouseMove=false;rl.lastTime=nTime;rl.startTime=nTime}rc.dataStream+="m*("+(nTime-rc.lastTime)+")*"+x+"'"+y+"~";rc.lastTime=nTime;if(nTime-rc.lastCommit>500){rc.rewriteNameData(rc.dataStream);rc.lastCommit=nTime}}};robotreplay_startup.Init={init:function(){robotreplay_startup.Capture.init()},shutdown:function(){robotreplay_startup.Capture.shutdown()}};robotreplay_startup.Init.init();robotreplay.Implementation={ignoreForms:function(s){var C=robotreplay.Capture,E=robotreplay.Event;var g=function(){var as=robotreplay.Dom.query.select(s);for(var i=0;i<as.length;i++){var a=as[i];if(a!=null){a.rr_ignoreForms='true'}}};g()},attachIEClicks:function(s){var r=robotreplay;var g=function(){try{if(r.browser=="ie"&&!r.Browser.ie9){var elems=r.Dom.query.select(s);for(var j=0;j<elems.length;j++){r.Event.attach(elems[j],"click",function(e){r.Capture.mouseDownUp(e)},true)}}}catch(e){}};g()},compareURL:function(urlParam){var rh=robotreplay.href;if(rh.indexOf(urlParam)>-1){return true}return false}}}