;(function(window,$,undefined){"use strict";'nord'in window||(window.nord={})
$.extend(window.nord,{videoAlt:function(id){this.index=id[id.length-1];this.active=true;this.self=$('#'+id);this.player=_V_(id);this.poster=this.player.options.poster;this.playButton=$('#'+id).prev('.play');var context=this;this.that=context;this.player.addEvent("play",Nordstrom.AdvancedImageViewer.prototype._onVideoAltPlay);this.player.addEvent("ended",function(){context.makeOpaqueAfterEnd(context);});var errorEvents=['error'];for(var i=0;i<errorEvents.length;i++){this.player.addEvent(errorEvents[i],function(){context.swapImage(context.that);});}
this.self.on('contextmenu',function(){return false;});this.playButton.on("click",'',context,this.playVideo);if(!this.canPlayMP4()&&!this.hasGoodFlashVersion()){context.self.empty().replaceWith('<div id="upgrade-flash"><p>Your browser\'s flash player is either disabled or needs to be upgraded. Please enable or <a href="http://get.adobe.com/flashplayer/">upgrade your flash player now</a>.</div>');context.active=false;$('#video-alt-thumbnail-'+context.index).find('span').remove();}},videoAltInit:function(){$('.video-js').each(function(){var vidNum=this.id[this.id.length-1];$('#video-alt-thumbnail-'+vidNum).data('videoAlt',new nord.videoAlt(this.id));});}});nord.videoAlt.prototype.playVideo=function(context){var context=(context.data!=undefined)?context.data:context;if(context.active){context.playButton.fadeOut('fast');context.unscreen();context.self.stop();context.player.currentTime(0);context.player.play();}};nord.videoAlt.prototype.makeOpaqueAfterEnd=function(context){var context=context;if(context.active){context.screen();context.playButton.fadeIn('fast');if(!context.self.hasClass('vjs-paused')){context.self.addClass('vjs-paused');}}};nord.videoAlt.prototype.swapImage=function(c){var context=c;var imgsrc=context.player.options.poster;context.active=false;context.player.destroy();context.playButton.after('<img src="'+imgsrc+'"/>');$('#video-alt-thumbnail-'+context.index).removeClass('video-alt-thumbnail').find('span').remove();};nord.videoAlt.prototype.pause=function(context){context=context.data;if(context.active){context.player.pause();}};nord.videoAlt.prototype.canPlayMP4=function(){var canPlay=false;var v=document.createElement('video');if(v.canPlayType&&v.canPlayType('video/mp4').replace(/no/,'')){canPlay=true;}
return canPlay;};nord.videoAlt.prototype.hasGoodFlashVersion=function(flashVersion){var playerVersion=swfobject.getFlashPlayerVersion();if((playerVersion.major<9)||(playerVersion.major==9&&playerVersion.minor==0&&playerVersion.release<115)){return false;}else{return true;}};nord.videoAlt.prototype.screen=function(){var el=$(this.player.el);var sc=$('<div id="nord-video-alt-screen"></div>');sc.appendTo(el).css({position:'absolute',background:'white',top:0,left:0,width:el.outerWidth(),height:el.outerHeight(),zindex:1,opacity:0}).animate({opacity:.25});};nord.videoAlt.prototype.unscreen=function(){var screen=$('#nord-video-alt-screen');if(screen.length<1)return;screen.animate({opacity:1},100,function(){screen.animate({opacity:0},400,function(){screen.remove()});});};})(window,jQuery);