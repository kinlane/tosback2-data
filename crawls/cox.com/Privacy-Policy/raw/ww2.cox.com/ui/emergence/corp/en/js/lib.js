var MooTools={version:"1.11"};function $defined(a){return(a!=undefined)}function $type(b){if(!$defined(b)){return false}if(b.htmlElement){return"element"}var a=typeof b;if(a=="object"&&b.nodeName){switch(b.nodeType){case 1:return"element";case 3:return(/\S/).test(b.nodeValue)?"textnode":"whitespace"}}if(a=="object"||a=="function"){switch(b.constructor){case Array:return"array";case RegExp:return"regexp";case Class:return"class"}if(typeof b.length=="number"){if(b.item){return"collection"}if(b.callee){return"arguments"}}}return a}function $merge(){var c={};for(var b=0;b<arguments.length;b++){for(var f in arguments[b]){var a=arguments[b][f];var d=c[f];if(d&&$type(a)=="object"&&$type(d)=="object"){c[f]=$merge(d,a)}else{c[f]=a}}}return c}var $extend=function(){var a=arguments;if(!a[1]){a=[this,a[0]]}for(var b in a[1]){a[0][b]=a[1][b]}return a[0]};var $native=function(){for(var b=0,a=arguments.length;b<a;b++){arguments[b].extend=function(c){for(var d in c){if(!this.prototype[d]){this.prototype[d]=c[d]}if(!this[d]){this[d]=$native.generic(d)}}}}};$native.generic=function(a){return function(b){return this.prototype[a].apply(b,Array.prototype.slice.call(arguments,1))}};$native(Function,Array,String,Number);function $chk(a){return !!(a||a===0)}function $pick(b,a){return $defined(b)?b:a}function $random(b,a){return Math.floor(Math.random()*(a-b+1)+b)}function $time(){return new Date().getTime()}function $clear(a){clearTimeout(a);clearInterval(a);return null}var Abstract=function(a){a=a||{};a.extend=$extend;return a};var Window=new Abstract(window);var Document=new Abstract(document);document.head=document.getElementsByTagName("head")[0];window.xpath=!!(document.evaluate);if(window.ActiveXObject){window.ie=window[window.XMLHttpRequest?"ie7":"ie6"]=true}else{if(document.childNodes&&!document.all&&!navigator.taintEnabled){window.webkit=window[window.xpath?"webkit420":"webkit419"]=true}else{if(document.getBoxObjectFor!=null){window.gecko=true}}}window.khtml=window.webkit;Object.extend=$extend;if(typeof HTMLElement=="undefined"){var HTMLElement=function(){};if(window.webkit){document.createElement("iframe")}HTMLElement.prototype=(window.webkit)?window["[[DOMElement.prototype]]"]:{}}HTMLElement.prototype.htmlElement=function(){};if(window.ie6){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}var Class=function(b){var a=function(){return(arguments[0]!==null&&this.initialize&&$type(this.initialize)=="function")?this.initialize.apply(this,arguments):this};$extend(a,this);a.prototype=b;a.constructor=Class;return a};Class.empty=function(){};Class.prototype={extend:function(b){var c=new this(null);for(var d in b){var a=c[d];c[d]=Class.Merge(a,b[d])}return new Class(c)},implement:function(){for(var b=0,a=arguments.length;b<a;b++){$extend(this.prototype,arguments[b])}}};Class.Merge=function(c,d){if(c&&c!=d){var b=$type(d);if(b!=$type(c)){return d}switch(b){case"function":var a=function(){this.parent=arguments.callee.parent;return d.apply(this,arguments)};a.parent=c;return a;case"object":return $merge(c,d)}}return d};var Events=new Class({addEvent:function(b,a){if(a!=Class.empty){this.$events=this.$events||{};this.$events[b]=this.$events[b]||[];this.$events[b].include(a)}return this},fireEvent:function(c,b,a){if(this.$events&&this.$events[c]){this.$events[c].each(function(d){d.create({bind:this,delay:a,"arguments":b})()},this)}return this},removeEvent:function(b,a){if(this.$events&&this.$events[b]){this.$events[b].remove(a)}return this}});var Options=new Class({setOptions:function(){this.options=$merge.apply(null,[this.options].extend(arguments));if(this.addEvent){for(var a in this.options){if($type(this.options[a]=="function")&&(/^on[A-Z]/).test(a)){this.addEvent(a,this.options[a])}}}return this}});Array.extend({forEach:function(c,d){for(var b=0,a=this.length;b<a;b++){c.call(d,this[b],b,this)}},filter:function(d,f){var c=[];for(var b=0,a=this.length;b<a;b++){if(d.call(f,this[b],b,this)){c.push(this[b])}}return c},map:function(d,f){var c=[];for(var b=0,a=this.length;b<a;b++){c[b]=d.call(f,this[b],b,this)}return c},every:function(c,d){for(var b=0,a=this.length;b<a;b++){if(!c.call(d,this[b],b,this)){return false}}return true},some:function(c,d){for(var b=0,a=this.length;b<a;b++){if(c.call(d,this[b],b,this)){return true}}return false},indexOf:function(c,d){var a=this.length;for(var b=(d<0)?Math.max(0,a+d):d||0;b<a;b++){if(this[b]===c){return b}}return -1},copy:function(d,c){d=d||0;if(d<0){d=this.length+d}c=c||(this.length-d);var a=[];for(var b=0;b<c;b++){a[b]=this[d++]}return a},remove:function(c){var b=0;var a=this.length;while(b<a){if(this[b]===c){this.splice(b,1);a--}else{b++}}return this},contains:function(a,b){return this.indexOf(a,b)!=-1},associate:function(c){var d={},b=Math.min(this.length,c.length);for(var a=0;a<b;a++){d[c[a]]=this[a]}return d},extend:function(c){for(var b=0,a=c.length;b<a;b++){this.push(c[b])}return this},merge:function(c){for(var b=0,a=c.length;b<a;b++){this.include(c[b])}return this},include:function(a){if(!this.contains(a)){this.push(a)}return this},getLast:function(){return this[this.length-1]||null}});Array.prototype.each=Array.prototype.forEach;Array.each=Array.forEach;function $A(a){return Array.copy(a)}function $each(c,b,d){if(c&&typeof c.length=="number"&&$type(c)!="object"){Array.forEach(c,b,d)}else{for(var a in c){b.call(d||c,c[a],a)}}}Array.prototype.test=Array.prototype.contains;String.extend({test:function(a,b){return(($type(a)=="string")?new RegExp(a,b):a).test(this)},toInt:function(){return parseInt(this,10)},camelCase:function(){return this.replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()})},hyphenate:function(){return this.replace(/\w[A-Z]/g,function(a){return(a.charAt(0)+"-"+a.charAt(1).toLowerCase())})},capitalize:function(){return this.replace(/\b[a-z]/g,function(a){return a.toUpperCase()})},trim:function(){return this.replace(/^\s+|\s+$/g,"")},clean:function(){return this.replace(/\s{2,}/g," ").trim()},contains:function(a,b){return(b)?(b+this+b).indexOf(b+a+b)>-1:this.indexOf(a)>-1}});Function.extend({create:function(a){var b=this;a=$merge({bind:b,event:false,"arguments":null,delay:false,periodical:false,attempt:false},a);if($chk(a.arguments)&&$type(a.arguments)!="array"){a.arguments=[a.arguments]}return function(f){var c;if(a.event){f=f||window.event;c=[(a.event===true)?f:new a.event(f)];if(a.arguments){c.extend(a.arguments)}}else{c=a.arguments||arguments}var g=function(){return b.apply($pick(a.bind,b),c)};if(a.delay){return setTimeout(g,a.delay)}if(a.periodical){return setInterval(g,a.periodical)}if(a.attempt){try{return g()}catch(d){return false}}return g()}},pass:function(a,b){return this.create({"arguments":a,bind:b})},attempt:function(a,b){return this.create({"arguments":a,bind:b,attempt:true})()},bind:function(b,a){return this.create({bind:b,"arguments":a})},bindAsEventListener:function(b,a){return this.create({bind:b,event:true,"arguments":a})},delay:function(b,c,a){return this.create({delay:b,bind:c,"arguments":a})()},periodical:function(a,c,b){return this.create({periodical:a,bind:c,"arguments":b})()}});Number.extend({toInt:function(){return parseInt(this)},toFloat:function(){return parseFloat(this)},limit:function(b,a){return Math.min(a,Math.max(b,this))},round:function(a){a=Math.pow(10,a||0);return Math.round(this*a)/a},times:function(b){for(var a=0;a<this;a++){b(a)}}});var Element=new Class({initialize:function(d,c){if($type(d)=="string"){if(window.ie&&c&&(c.name||c.type)){var a=(c.name)?' name="'+c.name+'"':"";var b=(c.type)?' type="'+c.type+'"':"";delete c.name;delete c.type;d="<"+d+a+b+">"}d=document.createElement(d)}d=$(d);return(!c||!d)?d:d.set(c)}});var Elements=new Class({initialize:function(a){return(a)?$extend(a,this):this}});Elements.extend=function(a){for(var b in a){this.prototype[b]=a[b];this[b]=$native.generic(b)}};function $(b){if(!b){return null}if(b.htmlElement){return Garbage.collect(b)}if([window,document].contains(b)){return b}var a=$type(b);if(a=="string"){b=document.getElementById(b);a=(b)?"element":false}if(a!="element"){return null}if(b.htmlElement){return Garbage.collect(b)}if(["object","embed"].contains(b.tagName.toLowerCase())){return b}$extend(b,Element.prototype);b.htmlElement=function(){};return Garbage.collect(b)}document.getElementsBySelector=document.getElementsByTagName;function $$(){var d=[];for(var c=0,b=arguments.length;c<b;c++){var a=arguments[c];switch($type(a)){case"element":d.push(a);case"boolean":break;case false:break;case"string":a=document.getElementsBySelector(a,true);default:d.extend(a)}}return $$.unique(d)}$$.unique=function(j){var f=[];for(var c=0,a=j.length;c<a;c++){if(j[c].$included){continue}var b=$(j[c]);if(b&&!b.$included){b.$included=true;f.push(b)}}for(var h=0,g=f.length;h<g;h++){f[h].$included=null}return new Elements(f)};Elements.Multi=function(a){return function(){var d=arguments;var b=[];var h=true;for(var f=0,c=this.length,g;f<c;f++){g=this[f][a].apply(this[f],d);if($type(g)!="element"){h=false}b.push(g)}return(h)?$$.unique(b):b}};Element.extend=function(a){for(var b in a){HTMLElement.prototype[b]=a[b];Element.prototype[b]=a[b];Element[b]=$native.generic(b);var c=(Array.prototype[b])?b+"Elements":b;Elements.prototype[c]=Elements.Multi(b)}};Element.extend({set:function(a){for(var c in a){var b=a[c];switch(c){case"styles":this.setStyles(b);break;case"events":if(this.addEvents){this.addEvents(b)}break;case"properties":this.setProperties(b);break;default:this.setProperty(c,b)}}return this},inject:function(c,a){c=$(c);switch(a){case"before":c.parentNode.insertBefore(this,c);break;case"after":var b=c.getNext();if(!b){c.parentNode.appendChild(this)}else{c.parentNode.insertBefore(this,b)}break;case"top":var d=c.firstChild;if(d){c.insertBefore(this,d);break}default:c.appendChild(this)}return this},injectAfter:function(a){return this.inject(a,"after")},injectInside:function(a){return this.inject(a,"bottom")},adopt:function(){var a=[];$each(arguments,function(b){a=a.concat(b)});$$(a).inject(this);return this},remove:function(){return this.parentNode.removeChild(this)},hasClass:function(a){return this.className.contains(a," ")},addClass:function(a){if(!this.hasClass(a)){this.className=(this.className+" "+a).clean()}return this},removeClass:function(a){this.className=this.className.replace(new RegExp("(^|\\s)"+a+"(?:\\s|$)"),"$1").clean();return this},toggleClass:function(a){return this.hasClass(a)?this.removeClass(a):this.addClass(a)},setStyle:function(b,a){switch(b){case"float":b=(window.ie)?"styleFloat":"cssFloat"}b=b.camelCase();switch($type(a)){case"number":if(!["zIndex","zoom"].contains(b)){a+="px"}break;case"array":a="rgb("+a.join(",")+")"}this.style[b]=a;return this},setStyles:function(a){switch($type(a)){case"object":Element.setMany(this,"setStyle",a);break;case"string":this.style.cssText=a}return this},getStyle:function(c){c=c.camelCase();var a=this.style[c];if(!$chk(a)){a=[];for(var b in Element.Styles){if(c==b){Element.Styles[b].each(function(g){var f=this.getStyle(g);a.push(parseInt(f)?f:"0px")},this);if(c=="border"){var d=a.every(function(f){return(f==a[0])});return(d)?a[0]:false}return a.join(" ")}}if(c.contains("border")){if(Element.Styles.border.contains(c)){return["Width","Style","Color"].map(function(f){return this.getStyle(c+f)},this).join(" ")}else{if(Element.borderShort.contains(c)){return["Top","Right","Bottom","Left"].map(function(f){return this.getStyle("border"+f+c.replace("border",""))},this).join(" ")}}}if(document.defaultView){a=document.defaultView.getComputedStyle(this,null).getPropertyValue(c.hyphenate())}else{if(this.currentStyle){a=this.currentStyle[c]}}}if(window.ie){a=Element.fixStyle(c,a,this)}return a},getStyles:function(){return Element.getMany(this,"getStyle",arguments)},walk:function(a,c){a+="Sibling";var b=(c)?this[c]:this[a];while(b&&$type(b)!="element"){b=b[a]}return $(b)},getNext:function(){return this.walk("next")},getLast:function(){return this.walk("previous","lastChild")},getParent:function(){return $(this.parentNode)},hasChild:function(a){return !!$A(this.getElementsByTagName("*")).contains(a)},getProperty:function(d){var b=Element.Properties[d];if(b){return this[b]}var a=Element.PropertiesIFlag[d]||0;if(!window.ie||a){return this.getAttribute(d,a)}var c=this.attributes[d];return(c)?c.nodeValue:null},setProperty:function(c,b){var a=Element.Properties[c];if(a){this[a]=b}else{this.setAttribute(c,b)}return this},setProperties:function(a){return Element.setMany(this,"setProperty",a)},setHTML:function(){this.innerHTML=$A(arguments).join("");return this},getText:function(){var a=this.getTag();if(["style","script"].contains(a)){if(window.ie){if(a=="style"){return this.styleSheet.cssText}else{if(a=="script"){return this.getProperty("text")}}}else{return this.innerHTML}}return($pick(this.innerText,this.textContent))},getTag:function(){return this.tagName.toLowerCase()},empty:function(){Garbage.trash(this.getElementsByTagName("*"));return this.setHTML("")}});Element.fixStyle=function(f,a,d){if($chk(parseInt(a))){return a}if(["height","width"].contains(f)){var b=(f=="width")?["left","right"]:["top","bottom"];var c=0;b.each(function(g){c+=d.getStyle("border-"+g+"-width").toInt()+d.getStyle("padding-"+g).toInt()});return d["offset"+f.capitalize()]-c+"px"}else{if(f.test(/border(.+)Width|margin|padding/)){return"0px"}}return a};Element.Styles={border:[],padding:[],margin:[]};["Top","Right","Bottom","Left"].each(function(b){for(var a in Element.Styles){Element.Styles[a].push(a+b)}});Element.borderShort=["borderWidth","borderStyle","borderColor"];Element.getMany=function(b,d,c){var a={};$each(c,function(f){a[f]=b[d](f)});return a};Element.setMany=function(b,d,c){for(var a in c){b[d](a,c[a])}return b};Element.Properties=new Abstract({"class":"className","for":"htmlFor",colspan:"colSpan",rowspan:"rowSpan",accesskey:"accessKey",tabindex:"tabIndex",maxlength:"maxLength",readonly:"readOnly",frameborder:"frameBorder",value:"value",disabled:"disabled",checked:"checked",multiple:"multiple",selected:"selected"});Element.PropertiesIFlag={href:2,src:2};Element.Methods={Listeners:{addListener:function(b,a){if(this.addEventListener){this.addEventListener(b,a,false)}else{this.attachEvent("on"+b,a)}return this},removeListener:function(b,a){if(this.removeEventListener){this.removeEventListener(b,a,false)}else{this.detachEvent("on"+b,a)}return this}}};window.extend(Element.Methods.Listeners);document.extend(Element.Methods.Listeners);Element.extend(Element.Methods.Listeners);var Garbage={elements:[],collect:function(a){if(!a.$tmp){Garbage.elements.push(a);a.$tmp={opacity:1}}return a},trash:function(g){try{for(var c=0,a=g.length,f;c<a;c++){if(!(f=g[c])||!f.$tmp){continue}if(f.$events){f.fireEvent("trash").removeEvents()}for(var h in f.$tmp){f.$tmp[h]=null}for(var k in Element.prototype){f[k]=null}Garbage.elements[Garbage.elements.indexOf(f)]=null;f.htmlElement=f.$tmp=f=null}}catch(b){}Garbage.elements.remove(null)},empty:function(){Garbage.collect(window);Garbage.collect(document);Garbage.trash(Garbage.elements)}};window.addListener("beforeunload",function(){window.addListener("unload",Garbage.empty);if(window.ie){window.addListener("unload",CollectGarbage)}});var Event=new Class({initialize:function(c){if(c&&c.$extended){return c}this.$extended=true;c=c||window.event;this.event=c;this.type=c.type;this.target=c.target||c.srcElement;if(this.target.nodeType==3){this.target=this.target.parentNode}this.shift=c.shiftKey;this.control=c.ctrlKey;this.alt=c.altKey;this.meta=c.metaKey;if(["DOMMouseScroll","mousewheel"].contains(this.type)){this.wheel=(c.wheelDelta)?c.wheelDelta/120:-(c.detail||0)/3}else{if(this.type.contains("key")){this.code=c.which||c.keyCode;for(var b in Event.keys){if(Event.keys[b]==this.code){this.key=b;break}}if(this.type=="keydown"){var a=this.code-111;if(a>0&&a<13){this.key="f"+a}}this.key=this.key||String.fromCharCode(this.code).toLowerCase()}else{if(this.type.test(/(click|mouse|menu)/)){this.page={x:c.pageX||c.clientX+document.documentElement.scrollLeft,y:c.pageY||c.clientY+document.documentElement.scrollTop};this.client={x:c.pageX?c.pageX-window.pageXOffset:c.clientX,y:c.pageY?c.pageY-window.pageYOffset:c.clientY};this.rightClick=(c.which==3)||(c.button==2);switch(this.type){case"mouseover":this.relatedTarget=c.relatedTarget||c.fromElement;break;case"mouseout":this.relatedTarget=c.relatedTarget||c.toElement}this.fixRelatedTarget()}}}return this},stop:function(){return this.stopPropagation().preventDefault()},stopPropagation:function(){if(this.event.stopPropagation){this.event.stopPropagation()}else{this.event.cancelBubble=true}return this},preventDefault:function(){if(this.event.preventDefault){this.event.preventDefault()}else{this.event.returnValue=false}return this}});Event.fix={relatedTarget:function(){if(this.relatedTarget&&this.relatedTarget.nodeType==3){this.relatedTarget=this.relatedTarget.parentNode}},relatedTargetGecko:function(){try{Event.fix.relatedTarget.call(this)}catch(a){this.relatedTarget=this.target}}};Event.prototype.fixRelatedTarget=(window.gecko)?Event.fix.relatedTargetGecko:Event.fix.relatedTarget;Event.keys=new Abstract({enter:13,up:38,down:40,left:37,right:39,esc:27,space:32,backspace:8,tab:9,"delete":46});Element.Methods.Events={addEvent:function(c,b){this.$events=this.$events||{};this.$events[c]=this.$events[c]||{keys:[],values:[]};if(this.$events[c].keys.contains(b)){return this}this.$events[c].keys.push(b);var a=c;var d=Element.Events[c];if(d){if(d.add){d.add.call(this,b)}if(d.map){b=d.map}if(d.type){a=d.type}}if(!this.addEventListener){b=b.create({bind:this,event:true})}this.$events[c].values.push(b);return(Element.NativeEvents.contains(a))?this.addListener(a,b):this},addEvents:function(a){return Element.setMany(this,"addEvent",a)},removeEvents:function(a){if(!this.$events){return this}if(!a){for(var b in this.$events){this.removeEvents(b)}this.$events=null}else{if(this.$events[a]){this.$events[a].keys.each(function(c){this.removeEvent(a,c)},this);this.$events[a]=null}}return this},fireEvent:function(c,b,a){if(this.$events&&this.$events[c]){this.$events[c].keys.each(function(d){d.create({bind:this,delay:a,"arguments":b})()},this)}return this},cloneEvents:function(c,a){if(!c.$events){return this}if(!a){for(var b in c.$events){this.cloneEvents(c,b)}}else{if(c.$events[a]){c.$events[a].keys.each(function(d){this.addEvent(a,d)},this)}}return this}};window.extend(Element.Methods.Events);document.extend(Element.Methods.Events);Element.extend(Element.Methods.Events);Element.Events=new Abstract({mouseenter:{type:"mouseover",map:function(a){a=new Event(a);if(a.relatedTarget!=this&&!this.hasChild(a.relatedTarget)){this.fireEvent("mouseenter",a)}}},mouseleave:{type:"mouseout",map:function(a){a=new Event(a);if(a.relatedTarget!=this&&!this.hasChild(a.relatedTarget)){this.fireEvent("mouseleave",a)}}},mousewheel:{type:(window.gecko)?"DOMMouseScroll":"mousewheel"}});Element.NativeEvents=["click","dblclick","mouseup","mousedown","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","keydown","keypress","keyup","load","unload","beforeunload","resize","move","focus","blur","change","submit","reset","select","error","abort","contextmenu","scroll"];imgError=function(b){var a=b.parentNode.parentNode;dojo.addClass(a,"disabled");b.src="/ui/emergence/corp/en/img/interface/image-na/50x50.gif";a.mojoControllers["cox.controller.interface.EnlargeImageController"].removeObservers();a.href="javascript:void(0)"};var mboxCopyright="Copyright 1996-2012. Adobe Systems Incorporated. All rights reserved.";mboxUrlBuilder=function(d,c){this.a=d;this.b=c;this.c=new Array();this.d=function(a){return a};this.f=null};mboxUrlBuilder.prototype.addParameter=function(m,f){var d=new RegExp("('|\")");if(d.exec(m)){throw"Parameter '"+m+"' contains invalid characters"}for(var c=0;c<this.c.length;c++){var b=this.c[c];if(b.name==m){b.value=f;return this}}var a=new Object();a.name=m;a.value=f;this.c[this.c.length]=a;return this};mboxUrlBuilder.prototype.addParameters=function(d){if(!d){return this}for(var b=0;b<d.length;b++){var a=d[b].indexOf("=");if(a==-1||a==0){continue}this.addParameter(d[b].substring(0,a),d[b].substring(a+1,d[b].length))}return this};mboxUrlBuilder.prototype.setServerType=function(a){this.o=a};mboxUrlBuilder.prototype.setBasePath=function(a){this.f=a};mboxUrlBuilder.prototype.setUrlProcessAction=function(a){this.d=a};mboxUrlBuilder.prototype.buildUrl=function(){var f=this.f?this.f:"/m2/"+this.b+"/mbox/"+this.o;var d=document.location.protocol=="file:"?"http:":document.location.protocol;var g=d+"//"+this.a+f;var c=g.indexOf("?")!=-1?"&":"?";for(var b=0;b<this.c.length;b++){var a=this.c[b];g+=c+encodeURIComponent(a.name)+"="+encodeURIComponent(a.value);c="&"}return this.t(this.d(g))};mboxUrlBuilder.prototype.getParameters=function(){return this.c};mboxUrlBuilder.prototype.setParameters=function(a){this.c=a};mboxUrlBuilder.prototype.clone=function(){var b=new mboxUrlBuilder(this.a,this.b);b.setServerType(this.o);b.setBasePath(this.f);b.setUrlProcessAction(this.d);for(var a=0;a<this.c.length;a++){b.addParameter(this.c[a].name,this.c[a].value)}return b};mboxUrlBuilder.prototype.t=function(a){return a.replace(/\"/g,"&quot;").replace(/>/g,"&gt;")};mboxStandardFetcher=function(){};mboxStandardFetcher.prototype.getType=function(){return"standard"};mboxStandardFetcher.prototype.fetch=function(a){a.setServerType(this.getType());document.write('<script src="'+a.buildUrl()+'" language="JavaScript"><\/script>')};mboxStandardFetcher.prototype.cancel=function(){};mboxAjaxFetcher=function(){};mboxAjaxFetcher.prototype.getType=function(){return"ajax"};mboxAjaxFetcher.prototype.fetch=function(a){a.setServerType(this.getType());var b=a.buildUrl();this.x=document.createElement("script");this.x.src=b;document.body.appendChild(this.x)};mboxAjaxFetcher.prototype.cancel=function(){};mboxMap=function(){this.y=new Object();this.z=new Array()};mboxMap.prototype.put=function(a,b){if(!this.y[a]){this.z[this.z.length]=a}this.y[a]=b};mboxMap.prototype.get=function(a){return this.y[a]};mboxMap.prototype.remove=function(a){this.y[a]=undefined};mboxMap.prototype.each=function(d){for(var b=0;b<this.z.length;b++){var a=this.z[b];var c=this.y[a];if(c){var f=d(a,c);if(f===false){break}}}};mboxFactory=function(f,a,d){this.E=false;this.C=f;this.D=d;this.F=new mboxList();mboxFactories.put(d,this);this.G=typeof document.createElement("div").replaceChild!="undefined"&&(function(){return true})()&&typeof document.getElementById!="undefined"&&typeof(window.attachEvent||document.addEventListener||window.addEventListener)!="undefined"&&typeof encodeURIComponent!="undefined";this.H=this.G&&mboxGetPageParameter("mboxDisable")==null;var c=d=="default";this.J=new mboxCookieManager("mbox"+(c?"":("-"+d)),(function(){return mboxCookiePageDomain()})());this.H=this.H&&this.J.isEnabled()&&(this.J.getCookie("disable")==null);if(this.isAdmin()){this.enable()}this.K();this.L=mboxGenerateId();this.M=mboxScreenHeight();this.N=mboxScreenWidth();this.O=mboxBrowserWidth();this.P=mboxBrowserHeight();this.Q=mboxScreenColorDepth();this.R=mboxBrowserTimeOffset();this.S=new mboxSession(this.L,"mboxSession","session",31*60,this.J);this.T=new mboxPC("PC",1209600,this.J);this.w=new mboxUrlBuilder(f,a);this.U(this.w,c);this.V=new Date().getTime();this.W=this.V;var g=this;this.addOnLoad(function(){g.W=new Date().getTime()});if(this.G){this.addOnLoad(function(){g.E=true;g.getMboxes().each(function(b){b.setFetcher(new mboxAjaxFetcher());b.finalize()})});if(this.H){this.limitTraffic(100,10368000);this.Z();this._=new mboxSignaler(function(b,h){return g.create(b,h)},this.J)}}};mboxFactory.prototype.isEnabled=function(){return this.H};mboxFactory.prototype.getDisableReason=function(){return this.J.getCookie("disable")};mboxFactory.prototype.isSupported=function(){return this.G};mboxFactory.prototype.disable=function(b,a){if(typeof b=="undefined"){b=60*60}if(typeof a=="undefined"){a="unspecified"}if(!this.isAdmin()){this.H=false;this.J.setCookie("disable",a,b)}};mboxFactory.prototype.enable=function(){this.H=true;this.J.deleteCookie("disable")};mboxFactory.prototype.isAdmin=function(){return document.location.href.indexOf("mboxEnv")!=-1};mboxFactory.prototype.limitTraffic=function(a,b){};mboxFactory.prototype.addOnLoad=function(a){if(this.isDomLoaded()){a()}else{var b=false;var c=function(){if(b){return}b=true;a()};this.hb.push(c);if(this.isDomLoaded()&&!b){c()}}};mboxFactory.prototype.getEllapsedTime=function(){return this.W-this.V};mboxFactory.prototype.getEllapsedTimeUntil=function(a){return a-this.V};mboxFactory.prototype.getMboxes=function(){return this.F};mboxFactory.prototype.get=function(b,a){return this.F.get(b).getById(a||0)};mboxFactory.prototype.update=function(a,d){if(!this.isEnabled()){return}if(!this.isDomLoaded()){var b=this;this.addOnLoad(function(){b.update(a,d)});return}if(this.F.get(a).length()==0){throw"Mbox "+a+" is not defined"}this.F.get(a).each(function(c){c.getUrlBuilder().addParameter("mboxPage",mboxGenerateId());c.load(d)})};mboxFactory.prototype.create=function(n,j,h){if(!this.isSupported()){return null}var i=this.w.clone();i.addParameter("mboxCount",this.F.length()+1);i.addParameters(j);var m=this.F.get(n).length();var d=this.D+"-"+n+"-"+m;var l;if(h){l=new mboxLocatorNode(h)}else{if(this.E){throw"The page has already been loaded, can't write marker"}l=new mboxLocatorDefault(d)}try{var b=this;var g="mboxImported-"+d;var a=new mbox(n,m,i,l,g);if(this.H){a.setFetcher(this.E?new mboxAjaxFetcher():new mboxStandardFetcher())}a.setOnError(function(c,o){a.setMessage(c);a.activate();if(!a.isActivated()){b.disable(60*60,c);window.location.reload(false)}});this.F.add(a)}catch(k){this.disable();throw'Failed creating mbox "'+n+'", the error was: '+k}var f=new Date();i.addParameter("mboxTime",f.getTime()-(f.getTimezoneOffset()*60000));return a};mboxFactory.prototype.getCookieManager=function(){return this.J};mboxFactory.prototype.getPageId=function(){return this.L};mboxFactory.prototype.getPCId=function(){return this.T};mboxFactory.prototype.getSessionId=function(){return this.S};mboxFactory.prototype.getSignaler=function(){return this._};mboxFactory.prototype.getUrlBuilder=function(){return this.w};mboxFactory.prototype.U=function(b,a){b.addParameter("mboxHost",document.location.hostname).addParameter("mboxSession",this.S.getId());if(!a){b.addParameter("mboxFactoryId",this.D)}if(this.T.getId()!=null){b.addParameter("mboxPC",this.T.getId())}b.addParameter("mboxPage",this.L);b.addParameter("screenHeight",this.M);b.addParameter("screenWidth",this.N);b.addParameter("browserWidth",this.O);b.addParameter("browserHeight",this.P);b.addParameter("browserTimeOffset",this.R);b.addParameter("colorDepth",this.Q);b.setUrlProcessAction(function(d){d+="&mboxURL="+encodeURIComponent(document.location);var c=encodeURIComponent(document.referrer);if(d.length+c.length<2000){d+="&mboxReferrer="+c}d+="&mboxVersion="+mboxVersion;return d})};mboxFactory.prototype.sb=function(){return""};mboxFactory.prototype.Z=function(){document.write("<style>.mboxDefault { visibility:hidden; }</style>")};mboxFactory.prototype.isDomLoaded=function(){return this.E};mboxFactory.prototype.K=function(){if(this.hb!=null){return}this.hb=new Array();var a=this;(function(){var b=document.addEventListener?"DOMContentLoaded":"onreadystatechange";var c=false;var d=function(){if(c){return}c=true;for(var g=0;g<a.hb.length;++g){a.hb[g]()}};if(document.addEventListener){document.addEventListener(b,function(){document.removeEventListener(b,arguments.callee,false);d()},false);window.addEventListener("load",function(){document.removeEventListener("load",arguments.callee,false);d()},false)}else{if(document.attachEvent){if(self!==self.top){document.attachEvent(b,function(){if(document.readyState==="complete"){document.detachEvent(b,arguments.callee);d()}})}else{var f=function(){try{document.documentElement.doScroll("left");d()}catch(g){setTimeout(f,13)}};f()}}}if(document.readyState==="complete"){d()}})()};mboxSignaler=function(b,d){this.J=d;var c=d.getCookieNames("signal-");for(var f=0;f<c.length;f++){var h=c[f];var a=d.getCookie(h).split("&");var g=b(a[0],a);g.load();d.deleteCookie(h)}};mboxSignaler.prototype.signal=function(a,b){this.J.setCookie("signal-"+a,mboxShiftArray(arguments).join("&"),45*60)};mboxList=function(){this.F=new Array()};mboxList.prototype.add=function(a){if(a!=null){this.F[this.F.length]=a}};mboxList.prototype.get=function(b){var d=new mboxList();for(var a=0;a<this.F.length;a++){var c=this.F[a];if(c.getName()==b){d.add(c)}}return d};mboxList.prototype.getById=function(a){return this.F[a]};mboxList.prototype.length=function(){return this.F.length};mboxList.prototype.each=function(b){if(typeof b!="function"){throw"Action must be a function, was: "+typeof(b)}for(var a=0;a<this.F.length;a++){b(this.F[a])}};mboxLocatorDefault=function(a){this.g="mboxMarker-"+a;document.write('<div id="'+this.g+'" style="visibility:hidden;display:none">&nbsp;</div>')};mboxLocatorDefault.prototype.locate=function(){var a=document.getElementById(this.g);while(a!=null){if(a.nodeType==1){if(a.className=="mboxDefault"){return a}}a=a.previousSibling}return null};mboxLocatorDefault.prototype.force=function(){var a=document.createElement("div");a.className="mboxDefault";var b=document.getElementById(this.g);b.parentNode.insertBefore(a,b);return a};mboxLocatorNode=function(a){this.Eb=a};mboxLocatorNode.prototype.locate=function(){return typeof this.Eb=="string"?document.getElementById(this.Eb):this.Eb};mboxLocatorNode.prototype.force=function(){return null};mboxCreate=function(a){var b=mboxFactoryDefault.create(a,mboxShiftArray(arguments));if(b){b.load()}return b};mboxDefine=function(a,b){var c=mboxFactoryDefault.create(b,mboxShiftArray(mboxShiftArray(arguments)),a);return c};mboxUpdate=function(a){mboxFactoryDefault.update(a,mboxShiftArray(arguments))};mbox=function(f,c,b,d,a){this.Kb=null;this.Lb=0;this.mb=d;this.nb=a;this.Mb=null;this.Nb=new mboxOfferContent();this.Fb=null;this.w=b;this.message="";this.Ob=new Object();this.Pb=0;this.Ib=c;this.g=f;this.Qb();b.addParameter("mbox",f).addParameter("mboxId",c);this.Rb=function(){};this.Sb=function(){};this.Tb=null};mbox.prototype.getId=function(){return this.Ib};mbox.prototype.Qb=function(){if(this.g.length>250){throw"Mbox Name "+this.g+" exceeds max length of 250 characters."}else{if(this.g.match(/^\s+|\s+$/g)){throw"Mbox Name "+this.g+" has leading/trailing whitespace(s)."}}};mbox.prototype.getName=function(){return this.g};mbox.prototype.getParameters=function(){var d=this.w.getParameters();var b=new Array();for(var a=0;a<d.length;a++){if(d[a].name.indexOf("mbox")!=0){b[b.length]=d[a].name+"="+d[a].value}}return b};mbox.prototype.setOnLoad=function(a){this.Sb=a;return this};mbox.prototype.setMessage=function(a){this.message=a;return this};mbox.prototype.setOnError=function(a){this.Rb=a;return this};mbox.prototype.setFetcher=function(a){if(this.Mb){this.Mb.cancel()}this.Mb=a;return this};mbox.prototype.getFetcher=function(){return this.Mb};mbox.prototype.load=function(d){if(this.Mb==null){return this}this.setEventTime("load.start");this.cancelTimeout();this.Lb=0;var a=(d&&d.length>0)?this.w.clone().addParameters(d):this.w;this.Mb.fetch(a);var b=this;this.Vb=setTimeout(function(){b.Rb("browser timeout",b.Mb.getType())},15000);this.setEventTime("load.end");return this};mbox.prototype.loaded=function(){this.cancelTimeout();if(!this.activate()){var a=this;setTimeout(function(){a.loaded()},100)}};mbox.prototype.activate=function(){if(this.Lb){return this.Lb}this.setEventTime("activate"+ ++this.Pb+".start");if(this.show()){this.cancelTimeout();this.Lb=1}this.setEventTime("activate"+this.Pb+".end");return this.Lb};mbox.prototype.isActivated=function(){return this.Lb};mbox.prototype.setOffer=function(a){if(a&&a.show&&a.setOnLoad){this.Nb=a}else{throw"Invalid offer"}return this};mbox.prototype.getOffer=function(){return this.Nb};mbox.prototype.show=function(){this.setEventTime("show.start");var a=this.Nb.show(this);this.setEventTime(a==1?"show.end.ok":"show.end");return a};mbox.prototype.showContent=function(a){if(a==null){return 0}if(this.Fb==null||!this.Fb.parentNode){this.Fb=this.getDefaultDiv();if(this.Fb==null){return 0}}if(this.Fb!=a){this.Xb(this.Fb);this.Fb.parentNode.replaceChild(a,this.Fb);this.Fb=a}this.Yb(a);this.Sb();return 1};mbox.prototype.hide=function(){this.setEventTime("hide.start");var a=this.showContent(this.getDefaultDiv());this.setEventTime(a==1?"hide.end.ok":"hide.end.fail");return a};mbox.prototype.finalize=function(){this.setEventTime("finalize.start");this.cancelTimeout();if(this.getDefaultDiv()==null){if(this.mb.force()!=null){this.setMessage("No default content, an empty one has been added")}else{this.setMessage("Unable to locate mbox")}}if(!this.activate()){this.hide();this.setEventTime("finalize.end.hide")}this.setEventTime("finalize.end.ok")};mbox.prototype.cancelTimeout=function(){if(this.Vb){clearTimeout(this.Vb)}if(this.Mb!=null){this.Mb.cancel()}};mbox.prototype.getDiv=function(){return this.Fb};mbox.prototype.getDefaultDiv=function(){if(this.Tb==null){this.Tb=this.mb.locate()}return this.Tb};mbox.prototype.setEventTime=function(a){this.Ob[a]=(new Date()).getTime()};mbox.prototype.getEventTimes=function(){return this.Ob};mbox.prototype.getImportName=function(){return this.nb};mbox.prototype.getURL=function(){return this.w.buildUrl()};mbox.prototype.getUrlBuilder=function(){return this.w};mbox.prototype._b=function(a){return a.style.display!="none"};mbox.prototype.Yb=function(a){this.ac(a,true)};mbox.prototype.Xb=function(a){this.ac(a,false)};mbox.prototype.ac=function(b,a){b.style.visibility=a?"visible":"hidden";b.style.display=a?"block":"none"};mboxOfferContent=function(){this.Sb=function(){}};mboxOfferContent.prototype.show=function(a){var b=a.showContent(document.getElementById(a.getImportName()));if(b==1){this.Sb()}return b};mboxOfferContent.prototype.setOnLoad=function(a){this.Sb=a};mboxOfferAjax=function(a){this.Wb=a;this.Sb=function(){}};mboxOfferAjax.prototype.setOnLoad=function(a){this.Sb=a};mboxOfferAjax.prototype.show=function(a){var c=document.createElement("div");c.id=a.getImportName();c.innerHTML=this.Wb;var b=a.showContent(c);if(b==1){this.Sb()}return b};mboxOfferDefault=function(){this.Sb=function(){}};mboxOfferDefault.prototype.setOnLoad=function(a){this.Sb=a};mboxOfferDefault.prototype.show=function(a){var b=a.hide();if(b==1){this.Sb()}return b};mboxCookieManager=function mboxCookieManager(b,a){this.g=b;this.dc=a==""||a.indexOf(".")==-1?"":"; domain="+a;this.ec=new mboxMap();this.loadCookies()};mboxCookieManager.prototype.isEnabled=function(){this.setCookie("check","true",60);this.loadCookies();return this.getCookie("check")=="true"};mboxCookieManager.prototype.setCookie=function(c,b,d){if(typeof c!="undefined"&&typeof b!="undefined"&&typeof d!="undefined"){var a=new Object();a.name=c;a.value=escape(b);a.expireOn=Math.ceil(d+new Date().getTime()/1000);this.ec.put(c,a);this.saveCookies()}};mboxCookieManager.prototype.getCookie=function(b){var a=this.ec.get(b);return a?unescape(a.value):null};mboxCookieManager.prototype.deleteCookie=function(a){this.ec.remove(a);this.saveCookies()};mboxCookieManager.prototype.getCookieNames=function(a){var b=new Array();this.ec.each(function(d,c){if(d.indexOf(a)==0){b[b.length]=d}});return b};mboxCookieManager.prototype.saveCookies=function(){var a=false;var b="disable";var c=new Array();var d=0;this.ec.each(function(i,h){if(!a||i===b){c[c.length]=i+"#"+h.value+"#"+h.expireOn;if(d<h.expireOn){d=h.expireOn}}});var f=new Date(d*1000);document.cookie=this.g+"="+c.join("|")+"; expires="+f.toGMTString()+"; path=/"+this.dc};mboxCookieManager.prototype.loadCookies=function(){this.ec=new mboxMap();var h=document.cookie.indexOf(this.g+"=");if(h!=-1){var a=document.cookie.indexOf(";",h);if(a==-1){a=document.cookie.indexOf(",",h);if(a==-1){a=document.cookie.length}}var c=document.cookie.substring(h+this.g.length+1,a).split("|");var f=Math.ceil(new Date().getTime()/1000);for(var b=0;b<c.length;b++){var d=c[b].split("#");if(f<=d[2]){var g=new Object();g.name=d[0];g.value=d[1];g.expireOn=d[2];this.ec.put(g.name,g)}}}};mboxSession=function(f,a,d,c,b){this.tc=a;this.Ab=d;this.uc=c;this.J=b;this.vc=false;this.Ib=typeof mboxForceSessionId!="undefined"?mboxForceSessionId:mboxGetPageParameter(this.tc);if(this.Ib==null||this.Ib.length==0){this.Ib=b.getCookie(d);if(this.Ib==null||this.Ib.length==0){this.Ib=f;this.vc=true}}b.setCookie(d,this.Ib,c)};mboxSession.prototype.getId=function(){return this.Ib};mboxSession.prototype.forceId=function(a){this.Ib=a;this.J.setCookie(this.Ab,this.Ib,this.uc)};mboxPC=function(c,b,a){this.Ab=c;this.uc=b;this.J=a;this.Ib=typeof mboxForcePCId!="undefined"?mboxForcePCId:a.getCookie(c);if(this.Ib!=null){a.setCookie(c,this.Ib,b)}};mboxPC.prototype.getId=function(){return this.Ib};mboxPC.prototype.forceId=function(a){if(this.Ib!=a){this.Ib=a;this.J.setCookie(this.Ab,this.Ib,this.uc);return true}return false};mboxGetPageParameter=function(a){var d=null;var b=new RegExp(a+"=([^&]*)");var c=b.exec(document.location);if(c!=null&&c.length>=2){d=c[1]}return d};mboxSetCookie=function(b,a,c){return mboxFactoryDefault.getCookieManager().setCookie(b,a,c)};mboxGetCookie=function(a){return mboxFactoryDefault.getCookieManager().getCookie(a)};mboxCookiePageDomain=function(){var b=(/([^:]*)(:[0-9]{0,5})?/).exec(document.location.host)[1];var a=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/;if(!a.exec(b)){var c=(/([^\.]+\.[^\.]{3}|[^\.]+\.[^\.]+\.[^\.]{2})$/).exec(b);if(c){b=c[0]}}return b?b:""};mboxShiftArray=function(c){var b=new Array();for(var a=1;a<c.length;a++){b[b.length]=c[a]}return b};mboxGenerateId=function(){return(new Date()).getTime()+"-"+Math.floor(Math.random()*999999)};mboxScreenHeight=function(){return screen.height};mboxScreenWidth=function(){return screen.width};mboxBrowserWidth=function(){return(window.innerWidth)?window.innerWidth:document.documentElement?document.documentElement.clientWidth:document.body.clientWidth};mboxBrowserHeight=function(){return(window.innerHeight)?window.innerHeight:document.documentElement?document.documentElement.clientHeight:document.body.clientHeight};mboxBrowserTimeOffset=function(){return -new Date().getTimezoneOffset()};mboxScreenColorDepth=function(){return screen.pixelDepth};if(typeof mboxVersion=="undefined"){var mboxVersion=41;var mboxFactories=new mboxMap();var mboxFactoryDefault=new mboxFactory("coxcommunications.tt.omtrdc.net","coxcommunications","default")}if(mboxGetPageParameter("mboxDebug")!=null||mboxFactoryDefault.getCookieManager().getCookie("debug")!=null){setTimeout(function(){if(typeof mboxDebugLoaded=="undefined"){alert("Could not load the remote debug.\nPlease check your connection to Test&amp;Target servers")}},60*60);document.write('<script language="Javascript1.2" src="http://admin3.testandtarget.omniture.com/admin/mbox/mbox_debug.jsp?mboxServerHost=coxcommunications.tt.omtrdc.net&clientCode=coxcommunications"><\/script>')}var mboxTrack=function(h,g){var a,b,c,d=mboxFactoryDefault;if(d.isEnabled()){if(d.getMboxes().length()>0){a=d.getMboxes().getById(0);b=a.getURL().replace("mbox="+escape(a.getName()),"mbox="+h).replace("/undefined","/ajax").replace("mboxPage="+d.getPageId(),"mboxPage="+mboxGenerateId())+"&"+g,c=new Image();c.style.display="none";c.src=b;document.body.appendChild(c)}else{mboxTrackDefer(h,g)}}},mboxTrackDefer=function(c,b){var a=mboxFactoryDefault;if(a.isEnabled()){mboxFactoryDefault.getSignaler().signal(c,c+"&"+b)}},mboxTrackLink=function(c,b,a){mboxTrack(c,b);setTimeout("location='"+a+"'",500)};dojo.provide("lib.trimpath.template");if(typeof(TrimPath)=="undefined"){TrimPath={}}(function(){if(TrimPath==null){TrimPath=new Object()}if(TrimPath.evalEx==null){TrimPath.evalEx=function(src){return eval(src)}}var UNDEFINED;if(Array.prototype.pop==null){Array.prototype.pop=function(){if(this.length===0){return UNDEFINED}return this[--this.length]}}if(Array.prototype.push==null){Array.prototype.push=function(){for(var i=0;i<arguments.length;++i){this[this.length]=arguments[i]}return this.length}}TrimPath.parseTemplate=function(tmplContent,optTmplName,optEtc){if(optEtc==null){optEtc=TrimPath.parseTemplate_etc}var funcSrc=parse(tmplContent,optTmplName,optEtc);var func=TrimPath.evalEx(funcSrc,optTmplName,1);if(func!=null){return new optEtc.Template(optTmplName,tmplContent,funcSrc,func,optEtc)}return null};try{String.prototype.process=function(context,optFlags){var template=TrimPath.parseTemplate(this,null);if(template!=null){return template.process(context,optFlags)}return this}}catch(e){}TrimPath.parseTemplate_etc={};TrimPath.parseTemplate_etc.statementTag="forelse|for|if|elseif|else|var|macro";TrimPath.parseTemplate_etc.statementDef={"if":{delta:1,prefix:"if (",suffix:") {",paramMin:1},"else":{delta:0,prefix:"} else {"},elseif:{delta:0,prefix:"} else if (",suffix:") {",paramDefault:"true"},"/if":{delta:-1,prefix:"}"},"for":{delta:1,paramMin:3,prefixFunc:function(stmtParts,state,tmplName,etc){if(stmtParts[2]!="in"){throw new etc.ParseError(tmplName,state.line,"bad for loop statement: "+stmtParts.join(" "))}var iterVar=stmtParts[1];var listVar="__LIST__"+iterVar;return["var ",listVar," = ",stmtParts[3],";","var __LENGTH_STACK__;","if (typeof(__LENGTH_STACK__) == 'undefined' || !__LENGTH_STACK__.length) __LENGTH_STACK__ = new Array();","__LENGTH_STACK__[__LENGTH_STACK__.length] = 0;","if ((",listVar,") != null) { ","var ",iterVar,"_ct = 0;","for (var ",iterVar,"_index in ",listVar,") { ",iterVar,"_ct++;","if (typeof(",listVar,"[",iterVar,"_index]) == 'function') {continue;}","__LENGTH_STACK__[__LENGTH_STACK__.length - 1]++;","var ",iterVar," = ",listVar,"[",iterVar,"_index];"].join("")}},forelse:{delta:0,prefix:"} } if (__LENGTH_STACK__[__LENGTH_STACK__.length - 1] == 0) { if (",suffix:") {",paramDefault:"true"},"/for":{delta:-1,prefix:"} }; delete __LENGTH_STACK__[__LENGTH_STACK__.length - 1];"},"var":{delta:0,prefix:"var ",suffix:";"},macro:{delta:1,prefixFunc:function(stmtParts,state,tmplName,etc){var macroName=stmtParts[1].split("(")[0];return["var ",macroName," = function",stmtParts.slice(1).join(" ").substring(macroName.length),"{ var _OUT_arr = []; var _OUT = { write: function(m) { if (m) _OUT_arr.push(m); } }; "].join("")}},"/macro":{delta:-1,prefix:" return _OUT_arr.join(''); };"}};TrimPath.parseTemplate_etc.modifierDef={eat:function(v){return""},escape:function(s){return String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},capitalize:function(s){return String(s).toUpperCase()},"default":function(s,d){return s!=null?s:d}};TrimPath.parseTemplate_etc.modifierDef.h=TrimPath.parseTemplate_etc.modifierDef.escape;TrimPath.parseTemplate_etc.Template=function(tmplName,tmplContent,funcSrc,func,etc){this.process=function(context,flags){if(context==null){context={}}if(context._MODIFIERS==null){context._MODIFIERS={}}if(context.defined==null){context.defined=function(str){return(context[str]!=undefined)}}for(var k in etc.modifierDef){if(context._MODIFIERS[k]==null){context._MODIFIERS[k]=etc.modifierDef[k]}}if(flags==null){flags={}}var resultArr=[];var resultOut={write:function(m){resultArr.push(m)}};try{func(resultOut,context,flags)}catch(e){if(flags.throwExceptions==true){throw e}var result=new String(resultArr.join("")+"[ERROR: "+e.toString()+(e.message?"; "+e.message:"")+"]");result.exception=e;return result}return resultArr.join("")};this.name=tmplName;this.source=tmplContent;this.sourceFunc=funcSrc;this.toString=function(){return"TrimPath.Template ["+tmplName+"]"}};TrimPath.parseTemplate_etc.ParseError=function(name,line,message){this.name=name;this.line=line;this.message=message};TrimPath.parseTemplate_etc.ParseError.prototype.toString=function(){return("TrimPath template ParseError in "+this.name+": line "+this.line+", "+this.message)};var parse=function(body,tmplName,etc){body=cleanWhiteSpace(body);var funcText=["var TrimPath_Template_TEMP = function(_OUT, _CONTEXT, _FLAGS) { with (_CONTEXT) {"];var state={stack:[],line:1};var endStmtPrev=-1;while(endStmtPrev+1<body.length){var begStmt=endStmtPrev;begStmt=body.indexOf("{",begStmt+1);while(begStmt>=0){var endStmt=body.indexOf("}",begStmt+1);var stmt=body.substring(begStmt,endStmt);var blockrx=stmt.match(/^\{(cdata|minify|eval)/);if(blockrx){var blockType=blockrx[1];var blockMarkerBeg=begStmt+blockType.length+1;var blockMarkerEnd=body.indexOf("}",blockMarkerBeg);if(blockMarkerEnd>=0){var blockMarker;if(blockMarkerEnd-blockMarkerBeg<=0){blockMarker="{/"+blockType+"}"}else{blockMarker=body.substring(blockMarkerBeg+1,blockMarkerEnd)}var blockEnd=body.indexOf(blockMarker,blockMarkerEnd+1);if(blockEnd>=0){emitSectionText(body.substring(endStmtPrev+1,begStmt),funcText);var blockText=body.substring(blockMarkerEnd+1,blockEnd);if(blockType=="cdata"){emitText(blockText,funcText)}else{if(blockType=="minify"){emitText(scrubWhiteSpace(blockText),funcText)}else{if(blockType=="eval"){if(blockText!=null&&blockText.length>0){funcText.push("_OUT.write( (function() { "+blockText+" })() );")}}}}begStmt=endStmtPrev=blockEnd+blockMarker.length-1}}}else{if(body.charAt(begStmt-1)!="$"&&body.charAt(begStmt-1)!="\\"){var offset=(body.charAt(begStmt+1)=="/"?2:1);if(body.substring(begStmt+offset,begStmt+10+offset).search(TrimPath.parseTemplate_etc.statementTag)==0){break}}}begStmt=body.indexOf("{",begStmt+1)}if(begStmt<0){break}var endStmt=body.indexOf("}",begStmt+1);if(endStmt<0){break}emitSectionText(body.substring(endStmtPrev+1,begStmt),funcText);emitStatement(body.substring(begStmt,endStmt+1),state,funcText,tmplName,etc);endStmtPrev=endStmt}emitSectionText(body.substring(endStmtPrev+1),funcText);if(state.stack.length!=0){throw new etc.ParseError(tmplName,state.line,"unclosed, unmatched statement(s): "+state.stack.join(","))}funcText.push("}}; TrimPath_Template_TEMP");return funcText.join("")};var emitStatement=function(stmtStr,state,funcText,tmplName,etc){var parts=stmtStr.slice(1,-1).split(" ");var stmt=etc.statementDef[parts[0]];if(stmt==null){emitSectionText(stmtStr,funcText);return}if(stmt.delta<0){if(state.stack.length<=0){throw new etc.ParseError(tmplName,state.line,"close tag does not match any previous statement: "+stmtStr)}state.stack.pop()}if(stmt.delta>0){state.stack.push(stmtStr)}if(stmt.paramMin!=null&&stmt.paramMin>=parts.length){throw new etc.ParseError(tmplName,state.line,"statement needs more parameters: "+stmtStr)}if(stmt.prefixFunc!=null){funcText.push(stmt.prefixFunc(parts,state,tmplName,etc))}else{funcText.push(stmt.prefix)}if(stmt.suffix!=null){if(parts.length<=1){if(stmt.paramDefault!=null){funcText.push(stmt.paramDefault)}}else{for(var i=1;i<parts.length;i++){if(i>1){funcText.push(" ")}funcText.push(parts[i])}}funcText.push(stmt.suffix)}};var emitSectionText=function(text,funcText){if(text.length<=0){return}var nlPrefix=0;var nlSuffix=text.length-1;while(nlPrefix<text.length&&(text.charAt(nlPrefix)=="\n")){nlPrefix++}while(nlSuffix>=0&&(text.charAt(nlSuffix)==" "||text.charAt(nlSuffix)=="\t")){nlSuffix--}if(nlSuffix<nlPrefix){nlSuffix=nlPrefix}if(nlPrefix>0){funcText.push('if (_FLAGS.keepWhitespace == true) _OUT.write("');var s=text.substring(0,nlPrefix).replace("\n","\\n");if(s.charAt(s.length-1)=="\n"){s=s.substring(0,s.length-1)}funcText.push(s);funcText.push('");')}var lines=text.substring(nlPrefix,nlSuffix+1).split("\n");for(var i=0;i<lines.length;i++){emitSectionTextLine(lines[i],funcText);if(i<lines.length-1){funcText.push('_OUT.write("\\n");\n')}}if(nlSuffix+1<text.length){funcText.push('if (_FLAGS.keepWhitespace == true) _OUT.write("');var s=text.substring(nlSuffix+1).replace("\n","\\n");if(s.charAt(s.length-1)=="\n"){s=s.substring(0,s.length-1)}funcText.push(s);funcText.push('");')}};var emitSectionTextLine=function(line,funcText){var endMarkPrev="}";var endExprPrev=-1;while(endExprPrev+endMarkPrev.length<line.length){var begMark="${",endMark="}";var begExpr=line.indexOf(begMark,endExprPrev+endMarkPrev.length);if(begExpr<0){break}if(line.charAt(begExpr+2)=="%"){begMark="${%";endMark="%}"}var endExpr=line.indexOf(endMark,begExpr+begMark.length);if(endExpr<0){break}emitText(line.substring(endExprPrev+endMarkPrev.length,begExpr),funcText);var exprArr=line.substring(begExpr+begMark.length,endExpr).replace(/\|\|/g,"#@@#").split("|");for(var k in exprArr){if(exprArr[k].replace){exprArr[k]=exprArr[k].replace(/#@@#/g,"||")}}funcText.push("_OUT.write(");emitExpression(exprArr,exprArr.length-1,funcText);funcText.push(");");endExprPrev=endExpr;endMarkPrev=endMark}emitText(line.substring(endExprPrev+endMarkPrev.length),funcText)};var emitText=function(text,funcText){if(text==null||text.length<=0){return}text=text.replace(/\\/g,"\\\\");text=text.replace(/\n/g,"\\n");text=text.replace(/"/g,'\\"');funcText.push('_OUT.write("');funcText.push(text);funcText.push('");')};var emitExpression=function(exprArr,index,funcText){var expr=exprArr[index];if(index<=0){funcText.push(expr);return}var parts=expr.split(":");funcText.push('_MODIFIERS["');funcText.push(parts[0]);funcText.push('"](');emitExpression(exprArr,index-1,funcText);if(parts.length>1){funcText.push(",");funcText.push(parts[1])}funcText.push(")")};var cleanWhiteSpace=function(result){result=result.replace(/\t/g,"    ");result=result.replace(/\r\n/g,"\n");result=result.replace(/\r/g,"\n");result=result.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1");return result};var scrubWhiteSpace=function(result){result=result.replace(/^\s+/g,"");result=result.replace(/\s+$/g,"");result=result.replace(/\s+/g," ");result=result.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1");return result};TrimPath.parseDOMTemplate=function(elementId,optDocument,optEtc){if(optDocument==null){optDocument=document}var element=optDocument.getElementById(elementId);var content=element.value;if(content==null){content=element.innerHTML}content=content.replace(/&lt;/g,"<").replace(/&gt;/g,">");return TrimPath.parseTemplate(content,elementId,optEtc)};TrimPath.processDOMTemplate=function(elementId,context,optFlags,optDocument,optEtc){return TrimPath.parseDOMTemplate(elementId,optDocument,optEtc).process(context,optFlags)}})();