(function(a){a.fn.jqm=function(j){var h={overlay:97,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:l,ajaxText:'<h1>&nbsp;</h1><div class="modalLoader"><span>Loading...<span></div>',target:l,modal:l,toTop:l,onShow:l,onHide:l,onLoad:l};return this.each(function(){if(this._jqm)return c[this._jqm].c=a.extend({},c[this._jqm].c,j);b++;this._jqm=b;c[b]={c:a.extend(h,a.jqm.params,j),a:l,w:a(this).addClass("jqmID"+b),s:b};h.trigger&&a(this).jqmAddTrigger(h.trigger)})};a.fn.jqmAddClose=
function(a){return e(this,a,"jqmHide")};a.fn.jqmAddTrigger=function(a){return e(this,a,"jqmShow")};a.fn.jqmShow=function(b){return this.each(function(){b=b||window.event;a.jqm.open(this._jqm,b)})};a.fn.jqmHide=function(b){return this.each(function(){b=b||window.event;a.jqm.close(this._jqm,b)})};a.jqm={hash:{},open:function(b,h){var e=c[b],f=e.c,g="."+f.closeClass,q=e.w.css("z-index"),q=0<q?q:1E9,t=a("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":q-1,opacity:f.overlay/
100});if(e.a)return l;e.t=h;e.a=!0;e.w.css("z-index",q);f.modal?(d[0]||n("bind"),d.push(b)):0<f.overlay?e.w.jqmAddClose(t):t=l;e.o=t?t.addClass(f.overlayClass).prependTo("body"):l;if(j&&(a("html,body").css({height:"100%",width:"100%"}),t)){var t=t.css({position:"fixed"})[0],y;for(y in{Top:1,Left:1})t.style.setExpression(y.toLowerCase(),"(_=(document.documentElement.scroll"+y+" || document.body.scroll"+y+"))+'px'")}f.ajax?(q=f.target||e.w,t=f.ajax,q="string"==typeof q?a(q,e.w):a(q),t="@"==t.substr(0,
1)?a(h).attr(t.substring(1)):t,jQuery(".jqContent").html(f.ajaxText).load(t,function(){f.onLoad&&f.onLoad.call(this,e);g&&e.w.jqmAddClose(a(g,e.w));k(e)})):g&&e.w.jqmAddClose(a(g,e.w));f.toTop&&e.o&&e.w.before('<span id="jqmP'+e.w[0]._jqm+'"></span>').insertAfter(e.o);f.onShow?f.onShow(e):e.w.show();k(e);return l},close:function(b){b=c[b];if(!b.a)return l;b.a=l;d[0]&&(d.pop(),d[0]||n("unbind"));b.c.toTop&&b.o&&a("#jqmP"+b.w[0]._jqm).after(b.w).remove();if(b.c.onHide)b.c.onHide(b);else b.w.hide(),
b.o&&b.o.remove();"undefined"!=typeof forceauth&&(window.location="/");return l},params:{}};var b=0,c=a.jqm.hash,d=[],j=a.browser.msie&&"6.0"==a.browser.version,l=!1,h=a('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0}),k=function(b){j&&(b.o?b.o.html('<p style="width:100%;height:100%"/>').prepend(h):a("iframe.jqm",b.w)[0]||b.w.prepend(h));g(b)},g=function(b){try{a(":input:visible",b.w)[0].focus()}catch(c){}},n=function(b){a()[b]("keypress",f)[b]("keydown",
f)[b]("mousedown",f)},f=function(b){var j=c[d[d.length-1]];(b=!a(b.target).parents(".jqmID"+j.s)[0])&&g(j);return!b},e=function(b,j,h){return b.each(function(){var b=this._jqm;a(j).each(function(){this[h]||(this[h]=[],a(this).click(function(){for(var a in{jqmShow:1,jqmHide:1})for(var b in this[a])if(c[this[a][b]])c[this[a][b]].w[a](this);return l}));this[h].push(b)})})}})(jQuery);
function populateModal(a){jQuery("#jqModal").jqm({ajax:!1});jQuery("#jqModal").jqmShow();jQuery("#jqModal").jqmAddClose(".jqmClose");jQuery(".jqContent").html(a);if(0!=jQuery("#iPhoneUserCol").length){var a=jQuery("#siteContainer").height(),b=jQuery(window).scrollTop();jQuery(".jqmOverlay").css({height:a+"px"});jQuery("#jqModal").css({top:b+50+"px"})}}
var centerJQM=function(a){a.w.show();"undefined"!=typeof autoplayState&&!0==autoplayState&&toggleAutoplay();"undefined"!=typeof gallery&&(gallery._busy=!0);if(0!=jQuery("#iPhoneUserCol").length){var a=jQuery("#siteContainer").height(),b=jQuery(window).scrollTop();jQuery(".jqmOverlay").css({height:a+"px"});jQuery("#jqModal").css({top:b+50+"px"})}},modalHide=function(a){a.w.fadeOut("2000",function(){a.o.remove();"fixed"!=jQuery(".jqmWindow").css("position")&&jQuery(".jqmWindow").css({position:"fixed"});
jQuery("#jqModal").jqm({ajax:"@href",trigger:".jqmify",onLoad:centerJQM,onHide:modalHide})});"undefined"!=typeof gallery&&(gallery._busy=!1)};(function(a){var b={vertical:!1,rtl:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",
buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},c=!1;a(window).bind("load.jcarousel",function(){c=!0});a.jcarousel=function(j,l){this.options=a.extend({},b,l||{});this.autoStopped=this.locked=!1;this.buttonPrevState=this.buttonNextState=this.buttonPrev=this.buttonNext=this.list=this.clip=this.container=null;if(!l||void 0===l.rtl)this.options.rtl="rtl"==(a(j).attr("dir")||a("html").attr("dir")||"").toLowerCase();this.wh=!this.options.vertical?"width":"height";this.lt=!this.options.vertical?
this.options.rtl?"right":"left":"top";for(var h="",d=j.className.split(" "),g=0;g<d.length;g++)if(-1!=d[g].indexOf("jcarousel-skin")){a(j).removeClass(d[g]);h=d[g];break}"UL"==j.nodeName.toUpperCase()||"OL"==j.nodeName.toUpperCase()?(this.list=a(j),this.clip=this.list.parents(".jcarousel-clip"),this.container=this.list.parents(".jcarousel-container")):(this.container=a(j),this.list=this.container.find("ul,ol").eq(0),this.clip=this.container.find(".jcarousel-clip"));0===this.clip.size()&&(this.clip=
this.list.wrap("<div></div>").parent());0===this.container.size()&&(this.container=this.clip.wrap("<div></div>").parent());""!==h&&-1==this.container.parent()[0].className.indexOf("jcarousel-skin")&&this.container.wrap('<div class=" '+h+'"></div>');this.buttonPrev=a(".jcarousel-prev",this.container);0===this.buttonPrev.size()&&null!==this.options.buttonPrevHTML&&(this.buttonPrev=a(this.options.buttonPrevHTML).appendTo(this.container));this.buttonPrev.addClass(this.className("jcarousel-prev"));this.buttonNext=
a(".jcarousel-next",this.container);0===this.buttonNext.size()&&null!==this.options.buttonNextHTML&&(this.buttonNext=a(this.options.buttonNextHTML).appendTo(this.container));this.buttonNext.addClass(this.className("jcarousel-next"));this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"});this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0);this.container.addClass(this.className("jcarousel-container")).css({position:"relative"});
!this.options.vertical&&this.options.rtl&&this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl");var n=null!==this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,h=this.list.children("li"),f=this;if(0<h.size()){var e=0,m=this.options.offset;h.each(function(){f.format(this,m++);e+=f.dimension(this,n)});this.list.css(this.wh,e+100+"px");if(!l||void 0===l.size)this.options.size=h.size()}this.container.css("display","block");this.buttonNext.css("display","block");this.buttonPrev.css("display",
"block");this.funcNext=function(){f.next()};this.funcPrev=function(){f.prev()};this.funcResize=function(){f.resizeTimer&&clearTimeout(f.resizeTimer);f.resizeTimer=setTimeout(function(){f.reload()},100)};null!==this.options.initCallback&&this.options.initCallback(this,"init");!c&&a.browser.safari?(this.buttons(!1,!1),a(window).bind("load.jcarousel",function(){f.setup()})):this.setup()};var d=a.jcarousel;d.fn=d.prototype={jcarousel:"0.2.8"};d.fn.extend=d.extend=a.extend;d.fn.extend({setup:function(){this.prevLast=
this.prevFirst=this.last=this.first=null;this.animating=!1;this.tail=this.resizeTimer=this.timer=null;this.inTail=!1;if(!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var b=this.pos(this.options.start,!0);this.prevFirst=this.prevLast=null;this.animate(b,!1);a(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize);null!==this.options.setupCallback&&this.options.setupCallback(this)}},reset:function(){this.list.empty();this.list.css(this.lt,
"0px");this.list.css(this.wh,"10px");null!==this.options.initCallback&&this.options.initCallback(this,"reset");this.setup()},reload:function(){null!==this.tail&&this.inTail&&this.list.css(this.lt,d.intval(this.list.css(this.lt))+this.tail);this.tail=null;this.inTail=!1;null!==this.options.reloadCallback&&this.options.reloadCallback(this);if(null!==this.options.visible){var a=this,b=Math.ceil(this.clipping()/this.options.visible),c=0,k=0;this.list.children("li").each(function(d){c+=a.dimension(this,
b);d+1<a.first&&(k=c)});this.list.css(this.wh,c+"px");this.list.css(this.lt,-k+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0;this.buttons()},unlock:function(){this.locked=!1;this.buttons()},size:function(a){void 0!==a&&(this.options.size=a,this.locked||this.buttons());return this.options.size},has:function(a,b){if(void 0===b||!b)b=a;null!==this.options.size&&b>this.options.size&&(b=this.options.size);for(var c=a;c<=b;c++){var d=this.get(c);if(!d.length||d.hasClass("jcarousel-item-placeholder"))return!1}return!0},
get:function(b){return a(">.jcarousel-item-"+b,this.list)},add:function(b,c){var h=this.get(b),k=0,g=a(c);if(0===h.length)for(var n,f=d.intval(b),h=this.create(b);;){if(n=this.get(--f),0>=f||n.length){0>=f?this.list.prepend(h):n.after(h);break}}else k=this.dimension(h);"LI"==g.get(0).nodeName.toUpperCase()?(h.replaceWith(g),h=g):h.empty().append(c);this.format(h.removeClass(this.className("jcarousel-item-placeholder")),b);g=null!==this.options.visible?Math.ceil(this.clipping()/this.options.visible):
null;k=this.dimension(h,g)-k;0<b&&b<this.first&&this.list.css(this.lt,d.intval(this.list.css(this.lt))-k+"px");this.list.css(this.wh,d.intval(this.list.css(this.wh))+k+"px");return h},remove:function(a){var b=this.get(a);if(b.length&&!(a>=this.first&&a<=this.last)){var c=this.dimension(b);a<this.first&&this.list.css(this.lt,d.intval(this.list.css(this.lt))+c+"px");b.remove();this.list.css(this.wh,d.intval(this.list.css(this.wh))-c+"px")}},next:function(){null!==this.tail&&!this.inTail?this.scrollTail(!1):
this.scroll(("both"==this.options.wrap||"last"==this.options.wrap)&&null!==this.options.size&&this.last==this.options.size?1:this.first+this.options.scroll)},prev:function(){null!==this.tail&&this.inTail?this.scrollTail(!0):this.scroll(("both"==this.options.wrap||"first"==this.options.wrap)&&null!==this.options.size&&1==this.first?this.options.size:this.first-this.options.scroll)},scrollTail:function(a){if(!this.locked&&!this.animating&&this.tail){this.pauseAuto();var b=d.intval(this.list.css(this.lt)),
b=!a?b-this.tail:b+this.tail;this.inTail=!a;this.prevFirst=this.first;this.prevLast=this.last;this.animate(b)}},scroll:function(a,b){!this.locked&&!this.animating&&(this.pauseAuto(),this.animate(this.pos(a),b))},pos:function(a,b){var c=d.intval(this.list.css(this.lt));if(this.locked||this.animating)return c;"circular"!=this.options.wrap&&(a=1>a?1:this.options.size&&a>this.options.size?this.options.size:a);for(var k=this.first>a,g="circular"!=this.options.wrap&&1>=this.first?1:this.first,n=k?this.get(g):
this.get(this.last),f=k?g:g-1,e=null,m=0,s=!1,u=0;k?--f>=a:++f<a;){e=this.get(f);s=!e.length;if(0===e.length&&(e=this.create(f).addClass(this.className("jcarousel-item-placeholder")),n[k?"before":"after"](e),null!==this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(0>=f||f>this.options.size)))n=this.get(this.index(f)),n.length&&(e=this.add(f,n.clone(!0)));n=e;u=this.dimension(e);s&&(m+=u);if(null!==this.first&&("circular"==this.options.wrap||1<=f&&(null===this.options.size||f<=
this.options.size)))c=k?c+u:c-u}for(var g=this.clipping(),z=[],w=0,q=0,n=this.get(a-1),f=a;++w;){e=this.get(f);s=!e.length;if(0===e.length){e=this.create(f).addClass(this.className("jcarousel-item-placeholder"));if(0===n.length)this.list.prepend(e);else n[k?"before":"after"](e);if(null!==this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(0>=f||f>this.options.size))n=this.get(this.index(f)),n.length&&(e=this.add(f,n.clone(!0)))}n=e;u=this.dimension(e);if(0===u)throw Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...");
"circular"!=this.options.wrap&&null!==this.options.size&&f>this.options.size?z.push(e):s&&(m+=u);q+=u;if(q>=g)break;f++}for(e=0;e<z.length;e++)z[e].remove();0<m&&(this.list.css(this.wh,this.dimension(this.list)+m+"px"),k&&(c-=m,this.list.css(this.lt,d.intval(this.list.css(this.lt))-m+"px")));m=a+w-1;"circular"!=this.options.wrap&&(this.options.size&&m>this.options.size)&&(m=this.options.size);if(f>m){w=0;f=m;for(q=0;++w;){e=this.get(f--);if(!e.length)break;q+=this.dimension(e);if(q>=g)break}}f=m-
w+1;"circular"!=this.options.wrap&&1>f&&(f=1);this.inTail&&k&&(c+=this.tail,this.inTail=!1);this.tail=null;"circular"!=this.options.wrap&&(m==this.options.size&&1<=m-w+1)&&(k=d.intval(this.get(m).css(!this.options.vertical?"marginRight":"marginBottom")),q-k>g&&(this.tail=q-g-k));b&&(a===this.options.size&&this.tail)&&(c-=this.tail,this.inTail=!0);for(;a-- >f;)c+=this.dimension(this.get(a));this.prevFirst=this.first;this.prevLast=this.last;this.first=f;this.last=m;return c},animate:function(b,c){if(!this.locked&&
!this.animating){this.animating=!0;var d=this,k=function(){d.animating=!1;0===b&&d.list.css(d.lt,0);!d.autoStopped&&("circular"==d.options.wrap||"both"==d.options.wrap||"last"==d.options.wrap||null===d.options.size||d.last<d.options.size||d.last==d.options.size&&null!==d.tail&&!d.inTail)&&d.startAuto();d.buttons();d.notify("onAfterAnimation");if("circular"==d.options.wrap&&null!==d.options.size)for(var a=d.prevFirst;a<=d.prevLast;a++)null!==a&&(!(a>=d.first&&a<=d.last)&&(1>a||a>d.options.size))&&
d.remove(a)};this.notify("onBeforeAnimation");if(!this.options.animation||!1===c)this.list.css(this.lt,b+"px"),k();else{var g=!this.options.vertical?this.options.rtl?{right:b}:{left:b}:{top:b},k={duration:this.options.animation,easing:this.options.easing,complete:k};a.isFunction(this.options.animationStepCallback)&&(k.step=this.options.animationStepCallback);this.list.animate(g,k)}}},startAuto:function(a){void 0!==a&&(this.options.auto=a);if(0===this.options.auto)return this.stopAuto();if(null===
this.timer){this.autoStopped=!1;var b=this;this.timer=window.setTimeout(function(){b.next()},1E3*this.options.auto)}},stopAuto:function(){this.pauseAuto();this.autoStopped=!0},pauseAuto:function(){null!==this.timer&&(window.clearTimeout(this.timer),this.timer=null)},buttons:function(a,b){if(null==a&&(a=!this.locked&&0!==this.options.size&&(this.options.wrap&&"first"!=this.options.wrap||null===this.options.size||this.last<this.options.size),!this.locked&&(!this.options.wrap||"first"==this.options.wrap)&&
null!==this.options.size&&this.last>=this.options.size))a=null!==this.tail&&!this.inTail;if(null==b&&(b=!this.locked&&0!==this.options.size&&(this.options.wrap&&"last"!=this.options.wrap||1<this.first),!this.locked&&(!this.options.wrap||"last"==this.options.wrap)&&null!==this.options.size&&1==this.first))b=null!==this.tail&&this.inTail;var c=this;0<this.buttonNext.size()?(this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext),a&&this.buttonNext.bind(this.options.buttonNextEvent+
".jcarousel",this.funcNext),this.buttonNext[a?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",a?!1:!0),null!==this.options.buttonNextCallback&&this.buttonNext.data("jcarouselstate")!=a&&this.buttonNext.each(function(){c.options.buttonNextCallback(c,this,a)}).data("jcarouselstate",a)):null!==this.options.buttonNextCallback&&this.buttonNextState!=a&&this.options.buttonNextCallback(c,null,a);0<this.buttonPrev.size()?(this.buttonPrev.unbind(this.options.buttonPrevEvent+
".jcarousel",this.funcPrev),b&&this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),this.buttonPrev[b?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",b?!1:!0),null!==this.options.buttonPrevCallback&&this.buttonPrev.data("jcarouselstate")!=b&&this.buttonPrev.each(function(){c.options.buttonPrevCallback(c,this,b)}).data("jcarouselstate",b)):null!==this.options.buttonPrevCallback&&this.buttonPrevState!=b&&this.options.buttonPrevCallback(c,
null,b);this.buttonNextState=a;this.buttonPrevState=b},notify:function(a){var b=null===this.prevFirst?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",a,b);this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",a,b,this.first),this.callback("itemFirstOutCallback",a,b,this.prevFirst));this.prevLast!==this.last&&(this.callback("itemLastInCallback",a,b,this.last),this.callback("itemLastOutCallback",a,b,this.prevLast));this.callback("itemVisibleInCallback",a,
b,this.first,this.last,this.prevFirst,this.prevLast);this.callback("itemVisibleOutCallback",a,b,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(b,c,d,k,g,n,f){if(!(null==this.options[b]||"object"!=typeof this.options[b]&&"onAfterAnimation"!=c)){var e="object"==typeof this.options[b]?this.options[b][c]:this.options[b];if(a.isFunction(e)){var m=this;if(void 0===k)e(m,d,c);else if(void 0===g)this.get(k).each(function(){e(m,this,k,d,c)});else for(var b=function(a){m.get(a).each(function(){e(m,
this,a,d,c)})},s=k;s<=g;s++)null!==s&&!(s>=n&&s<=f)&&b(s)}}},create:function(a){return this.format("<li></li>",a)},format:function(b,c){for(var b=a(b),d=b.get(0).className.split(" "),k=0;k<d.length;k++)-1!=d[k].indexOf("jcarousel-")&&b.removeClass(d[k]);b.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+c)).css({"float":this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",c);return b},className:function(a){return a+" "+a+(!this.options.vertical?
"-horizontal":"-vertical")},dimension:function(b,c){var h=a(b);if(null==c)return!this.options.vertical?h.outerWidth(!0)||d.intval(this.options.itemFallbackDimension):h.outerHeight(!0)||d.intval(this.options.itemFallbackDimension);var k=!this.options.vertical?c-d.intval(h.css("marginLeft"))-d.intval(h.css("marginRight")):c-d.intval(h.css("marginTop"))-d.intval(h.css("marginBottom"));a(h).css(this.wh,k+"px");return this.dimension(h)},clipping:function(){return!this.options.vertical?this.clip[0].offsetWidth-
d.intval(this.clip.css("borderLeftWidth"))-d.intval(this.clip.css("borderRightWidth")):this.clip[0].offsetHeight-d.intval(this.clip.css("borderTopWidth"))-d.intval(this.clip.css("borderBottomWidth"))},index:function(a,b){null==b&&(b=this.options.size);return Math.round(((a-1)/b-Math.floor((a-1)/b))*b)+1}});d.extend({defaults:function(c){return a.extend(b,c||{})},intval:function(a){a=parseInt(a,10);return isNaN(a)?0:a},windowLoaded:function(){c=!0}});a.fn.jcarousel=function(b){if("string"==typeof b){var c=
a(this).data("jcarousel"),h=Array.prototype.slice.call(arguments,1);return c[b].apply(c,h)}return this.each(function(){var c=a(this).data("jcarousel");c?(b&&a.extend(c.options,b),c.reload()):a(this).data("jcarousel",new d(this,b))})}})(jQuery);(function(a){function b(b){if(b&&void 0===b.allowPageScroll&&(void 0!==b.swipe||void 0!==b.swipeStatus))b.allowPageScroll=n;b||(b={});b=a.extend({},a.fn.swipe.defaults,b);return this.each(function(){var d=a(this),e=d.data(L);e||(e=new c(this,b),d.data(L,e))})}function c(b,c){function H(b){if(!0!==p.data(L+"_intouch")&&!(0<a(b.target).closest(c.excludedElements,p).length)){var d=b.originalEvent,e,f=D?d.touches[0]:d;r=q;D?v=d.touches.length:b.preventDefault();B=0;M=F=null;I=J=A=0;K=1;pinchDistance=
0;for(var b=[],g=0;5>=g;g++)b.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});x=b;R=P=0;if(!D||v===c.fingers||c.fingers===w||S()){if(Y(0,f),Z=Q(),2==v&&(Y(1,d.touches[1]),J=I=$(x[0].start,x[1].start)),c.swipeStatus||c.pinchStatus)e=G(d,r)}else e=!1;if(!1===e)return r=C,G(d,r),e;T(!0)}}function aa(b){var e,m,s,p=b.originalEvent;if(!(r===y||r===C||ha())){var q,E=ia(D?p.touches[0]:p);U=Q();D&&(v=p.touches.length);r=t;2==v&&(0==J?(Y(1,p.touches[1]),J=I=$(x[0].start,x[1].start)):(ia(p.touches[1]),I=
$(x[0].end,x[1].end),M=1>K?g:k),K=(1*(I/J)).toFixed(2),pinchDistance=Math.abs(J-I));if(v===c.fingers||c.fingers===w||!D||S()){e=E.start;m=E.end;e=Math.atan2(m.y-e.y,e.x-m.x);e=Math.round(180*e/Math.PI);0>e&&(e=360-Math.abs(e));e=F=45>=e&&0<=e?d:360>=e&&315<=e?d:135<=e&&225>=e?j:45<e&&135>e?h:l;if(c.allowPageScroll===n||S())b.preventDefault();else switch(m=c.allowPageScroll===f,e){case d:(c.swipeLeft&&m||!m&&c.allowPageScroll!=u)&&b.preventDefault();break;case j:(c.swipeRight&&m||!m&&c.allowPageScroll!=
u)&&b.preventDefault();break;case l:(c.swipeUp&&m||!m&&c.allowPageScroll!=z)&&b.preventDefault();break;case h:(c.swipeDown&&m||!m&&c.allowPageScroll!=z)&&b.preventDefault()}B=Math.round(Math.sqrt(Math.pow(E.end.x-E.start.x,2)+Math.pow(E.end.y-E.start.y,2)));A=U-Z;if(c.swipeStatus||c.pinchStatus)q=G(p,r);if(!c.triggerOnTouchEnd||c.triggerOnTouchLeave){b=!0;if(c.triggerOnTouchLeave){s=a(this);var H=s.offset(),b=H.left;e=H.left+s.outerWidth();m=H.top;s=H.top+s.outerHeight();b=E.end.x>b&&E.end.x<e&&E.end.y>
m&&E.end.y<s}!c.triggerOnTouchEnd&&b?r=ba(t):c.triggerOnTouchLeave&&!b&&(r=ba(y));(r==C||r==y)&&G(p,r)}}else r=C,G(p,r);!1===q&&(r=C,G(p,r))}}function ca(a){var b=a.originalEvent;if(D&&0<b.touches.length)return P=Q(),R=event.touches.length+1,!0;ha()&&(v=R);a.preventDefault();U=Q();if(c.triggerOnTouchEnd||!1==c.triggerOnTouchEnd&&r===t){r=y;a=0!==x[0].end.x;if(!(v===c.fingers||c.fingers===w)&&D||!a||!ja()&&!ka())r=C;G(b,r)}else r===t&&(r=C,G(b,r));T(!1)}function N(){I=J=Z=U=v=0;K=1;R=P=0;T(!1)}function da(a){a=
a.originalEvent;c.triggerOnTouchLeave&&(r=ba(y),G(a,r))}function la(){p.unbind(V,H);p.unbind(W,N);p.unbind(ea,aa);p.unbind(fa,ca);O&&p.unbind(O,da);T(!1)}function ba(a){var b=a,d=null!==c.threshold?B>=c.threshold:!0;(c.maxTimeThreshold?!(A>=c.maxTimeThreshold):1)?d&&a==t&&(!c.triggerOnTouchEnd||c.triggerOnTouchLeave)?b=y:!d&&(a==y&&c.triggerOnTouchLeave)&&(b=C):b=C;return b}function G(a,b){var d=void 0;(c.swipe||c.swipeStatus||c.swipeLeft||c.swipeRight||c.swipeUp||c.swipeDown)&&(d=ga(a,b,e));S()&&
!1!==d&&(d=ga(a,b,m));c.click&&!1!==d&&(d=ga(a,b,s));b===C&&N(a);b===y&&(D?0==a.touches.length&&N(a):N(a));return d}function ga(a,b,f){var n=void 0;if(f==e){if(c.swipeStatus&&(n=c.swipeStatus.call(p,a,b,F||null,B||0,A||0,v),!1===n))return!1;if(b==y&&ka()){if(c.swipe&&(n=c.swipe.call(p,a,F,B,A,v),!1===n))return!1;switch(F){case d:c.swipeLeft&&(n=c.swipeLeft.call(p,a,F,B,A,v));break;case j:c.swipeRight&&(n=c.swipeRight.call(p,a,F,B,A,v));break;case l:c.swipeUp&&(n=c.swipeUp.call(p,a,F,B,A,v));break;
case h:c.swipeDown&&(n=c.swipeDown.call(p,a,F,B,A,v))}}}if(f==m){if(c.pinchStatus&&(n=c.pinchStatus.call(p,a,b,M||null,pinchDistance||0,A||0,v,K),!1===n))return!1;if(b==y&&ja())switch(M){case k:c.pinchIn&&(n=c.pinchIn.call(p,a,M||null,pinchDistance||0,A||0,v,K));break;case g:c.pinchOut&&(n=c.pinchOut.call(p,a,M||null,pinchDistance||0,A||0,v,K))}}if(f==s&&b===C&&c.click&&(1===v||!D)&&(isNaN(B)||0===B))n=c.click.call(p,a,a.target);return n}function ja(){var a;a=null!==c.pinchThreshold?pinchDistance>=
c.pinchThreshold:!0;return a}function S(){return!(!c.pinchStatus&&!c.pinchIn&&!c.pinchOut)}function ka(){var a=c.maxTimeThreshold?A>=c.maxTimeThreshold?!1:!0:!0;return(null!==c.threshold?B>=c.threshold:!0)&&a}function ha(){var a=!1;P&&Q()-P<=c.fingerReleaseThreshold&&(a=!0);return a}function T(a){!0===a?(p.bind(ea,aa),p.bind(fa,ca),O&&p.bind(O,da)):(p.unbind(ea,aa,!1),p.unbind(fa,ca,!1),O&&p.unbind(O,da,!1));p.data(L+"_intouch",!0===a)}function Y(a,b){x[a].identifier=void 0!==b.identifier?b.identifier:
0;x[a].start.x=x[a].end.x=b.pageX;x[a].start.y=x[a].end.y=b.pageY;return x[a]}function ia(a){var b=void 0!==a.identifier?a.identifier:0;a:{for(var c=0;c<x.length;c++)if(x[c].identifier==b){b=x[c];break a}b=void 0}b.end.x=a.pageX;b.end.y=a.pageY;return b}function $(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);return Math.round(Math.sqrt(c*c+d*d))}function Q(){return(new Date).getTime()}var X=D||!c.fallbackToMouseEvents,V=X?"touchstart":"mousedown",ea=X?"touchmove":"mousemove",fa=X?"touchend":"mouseup",
O=X?null:"mouseleave",W="touchcancel",B=0,F=null,A=0,J=0,I=0,K=1,M=0,p=a(b),r="start",v=0,x=null,Z=0,U=0,P=0,R=0;try{p.bind(V,H),p.bind(W,N)}catch(ma){a.error("events not supported "+V+","+W+" on jQuery.swipe")}this.enable=function(){p.bind(V,H);p.bind(W,N);return p};this.disable=function(){la();return p};this.destroy=function(){la();p.data(L,null);return p}}NaN;var d="left",j="right",l="up",h="down",k="in",g="out",n="none",f="auto",e="swipe",m="pinch",s="click",u="horizontal",z="vertical",w="all",
q="start",t="move",y="end",C="cancel",D="ontouchstart"in window,L="TouchSwipe";a.fn.swipe=function(c){var d=a(this),e=d.data(L);if(e&&"string"===typeof c){if(e[c])return e[c].apply(this,Array.prototype.slice.call(arguments,1));a.error("Method "+c+" does not exist on jQuery.swipe")}else if(!e&&("object"===typeof c||!c))return b.apply(this,arguments);return d};a.fn.swipe.defaults={fingers:1,threshold:75,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,swipe:null,swipeLeft:null,swipeRight:null,
swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"button, input, select, textarea, a, .noSwipe"};a.fn.swipe.phases={PHASE_START:q,PHASE_MOVE:t,PHASE_END:y,PHASE_CANCEL:C};a.fn.swipe.directions={LEFT:d,RIGHT:j,UP:l,DOWN:h,IN:k,OUT:g};a.fn.swipe.pageScroll={NONE:n,HORIZONTAL:u,VERTICAL:z,AUTO:f};a.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:w}})(jQuery);(function(a){a.fn.extend({customSelect:function(){if(!a.browser.msie||a.browser.msie&&6<a.browser.version)return this.each(function(){var b=a(this).find(":selected").html();b||(b="&nbsp;");a(this).after('<span class="customStyleSelectBox"><span class="customStyleSelectBoxInner">'+b+"</span></span>").css({position:"absolute",opacity:0,fontSize:a(this).next().css("font-size")});var b=a(this).next(),c=parseInt(a(this).width())-parseInt(b.css("padding-left"))-parseInt(b.css("padding-right")),d=b.find(":first-child");
b.css({display:"inline-block"});d.css({width:c,display:"inline-block"});b=parseInt(b.height())+parseInt(b.css("padding-top"))+parseInt(b.css("padding-bottom"));a(this).height(b).change(function(){d.text(a(this).find(":selected").text()).parent().addClass("changed")})})}})})(jQuery);var bkExtend=function(){var a=arguments;1==a.length&&(a=[this,a[0]]);for(var b in a[1])a[0][b]=a[1][b];return a[0]};function bkClass(){}bkClass.prototype.construct=function(){};bkClass.extend=function(a){var b=function(){if(arguments[0]!==bkClass)return this.construct.apply(this,arguments)},c=new this(bkClass);bkExtend(c,a);b.prototype=c;b.extend=this.extend;return b};
var bkElement=bkClass.extend({construct:function(a,b){"string"==typeof a&&(a=(b||document).createElement(a));return a=$BK(a)},appendTo:function(a){a.appendChild(this);return this},appendBefore:function(a){a.parentNode.insertBefore(this,a);return this},addEvent:function(a,b){bkLib.addEvent(this,a,b);return this},setContent:function(a){this.innerHTML=a;return this},pos:function(){var a=curtop=0;obj=this;if(obj.offsetParent){do a+=obj.offsetLeft,curtop+=obj.offsetTop;while(obj=obj.offsetParent)}var b=
!window.opera?parseInt(this.getStyle("border-width")||this.style.border)||0:0;return[a+b,curtop+b+this.offsetHeight]},noSelect:function(){bkLib.noSelect(this);return this},parentTag:function(a){var b=this;do{if(b&&b.nodeName&&b.nodeName.toUpperCase()==a)return b;b=b.parentNode}while(b);return!1},hasClass:function(a){return this.className.match(RegExp("(\\s|^)nicEdit-"+a+"(\\s|$)"))},addClass:function(a){this.hasClass(a)||(this.className+=" nicEdit-"+a);return this},removeClass:function(a){this.hasClass(a)&&
(this.className=this.className.replace(RegExp("(\\s|^)nicEdit-"+a+"(\\s|$)")," "));return this},setStyle:function(a){var b=this.style,c;for(c in a)switch(c){case "float":b.cssFloat=b.styleFloat=a[c];break;case "opacity":b.opacity=a[c];b.filter="alpha(opacity="+Math.round(100*a[c])+")";break;case "className":this.className=a[c];break;default:b[c]=a[c]}return this},getStyle:function(a,b){var c=!b?document.defaultView:b;if(1==this.nodeType)return c&&c.getComputedStyle?c.getComputedStyle(this,null).getPropertyValue(a):
this.currentStyle[bkLib.camelize(a)]},remove:function(){this.parentNode.removeChild(this);return this},setAttributes:function(a){for(var b in a)this[b]=a[b];return this}}),bkLib={isMSIE:-1!=navigator.appVersion.indexOf("MSIE"),addEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},toArray:function(a){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c},noSelect:function(a){a.setAttribute&&("input"!=a.nodeName.toLowerCase()&&"textarea"!=a.nodeName.toLowerCase())&&
a.setAttribute("unselectable","on");for(var b=0;b<a.childNodes.length;b++)bkLib.noSelect(a.childNodes[b])},camelize:function(a){return a.replace(/\-(.)/g,function(a,c){return c.toUpperCase()})},inArray:function(a,b){return null!=bkLib.search(a,b)},search:function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return null},cancelEvent:function(a){a=a||window.event;a.preventDefault&&a.stopPropagation&&(a.preventDefault(),a.stopPropagation());return!1},domLoad:[],domLoaded:function(){if(!arguments.callee.done){arguments.callee.done=
!0;for(i=0;i<bkLib.domLoad.length;i++)bkLib.domLoad[i]()}},onDomLoaded:function(a){this.domLoad.push(a);document.addEventListener?document.addEventListener("DOMContentLoaded",bkLib.domLoaded,null):bkLib.isMSIE&&jQuery(document).ready(function(){bkLib.domLoaded()});window.onload=bkLib.domLoaded}};function $BK(a){"string"==typeof a&&(a=document.getElementById(a));return a&&!a.appendTo?bkExtend(a,bkElement.prototype):a}
var bkEvent={addEvent:function(a,b){b&&(this.eventList=this.eventList||{},this.eventList[a]=this.eventList[a]||[],this.eventList[a].push(b));return this},fireEvent:function(){var a=bkLib.toArray(arguments),b=a.shift();if(this.eventList&&this.eventList[b])for(var c=0;c<this.eventList[b].length;c++)this.eventList[b][c].apply(this,a)}};function __(a){return a}
Function.prototype.closure=function(){var a=this,b=bkLib.toArray(arguments),c=b.shift();return function(){if("undefined"!=typeof bkLib)return a.apply(c,b.concat(bkLib.toArray(arguments)))}};Function.prototype.closureListener=function(){var a=this,b=bkLib.toArray(arguments),c=b.shift();return function(d){d=d||window.event;return a.apply(c,[d,d.target?d.target:d.srcElement].concat(b))}};
var nicEditorConfig=bkClass.extend({buttons:{bold:{name:__("Click to Bold"),command:"Bold",tags:["B","STRONG"],css:{"font-weight":"bold"},key:"b"},italic:{name:__("Click to Italic"),command:"Italic",tags:["EM","I"],css:{"font-style":"italic"},key:"i"},underline:{name:__("Click to Underline"),command:"Underline",tags:["U"],css:{"text-decoration":"underline"},key:"u"},left:{name:__("Left Align"),command:"justifyleft",noActive:!0},center:{name:__("Center Align"),command:"justifycenter",noActive:!0},
right:{name:__("Right Align"),command:"justifyright",noActive:!0},justify:{name:__("Justify Align"),command:"justifyfull",noActive:!0},ol:{name:__("Insert Ordered List"),command:"insertorderedlist",tags:["OL"]},ul:{name:__("Insert Unordered List"),command:"insertunorderedlist",tags:["UL"]},subscript:{name:__("Click to Subscript"),command:"subscript",tags:["SUB"]},superscript:{name:__("Click to Superscript"),command:"superscript",tags:["SUP"]},strikethrough:{name:__("Click to Strike Through"),command:"strikeThrough",
css:{"text-decoration":"line-through"}},removeformat:{name:__("Remove Formatting"),command:"removeformat",noActive:!0},indent:{name:__("Indent Text"),command:"indent",noActive:!0},outdent:{name:__("Remove Indent"),command:"outdent",noActive:!0},hr:{name:__("Horizontal Rule"),command:"insertHorizontalRule",noActive:!0}},iconsPath:"http://media.ebaumsworld.com/img/nicEditIconsEmbed.gif",buttonList:"save bold italic underline left center right justify ol ul fontSize fontFamily fontFormat indent outdent image upload link unlink forecolor bgcolor embed".split(" "),
iconList:{xhtml:1,bgcolor:2,forecolor:3,bold:4,center:5,hr:6,indent:7,italic:8,justify:9,left:10,ol:11,outdent:12,removeformat:13,right:14,save:25,strikethrough:16,subscript:17,superscript:18,ul:19,underline:20,image:21,link:22,unlink:23,close:24,arrow:26,embed:28}}),nicEditors={nicPlugins:[],editors:[],registerPlugin:function(a,b){this.nicPlugins.push({p:a,o:b})},allTextAreas:function(a){for(var b=document.getElementsByTagName("textarea"),c=0;c<b.length;c++)nicEditors.editors.push((new nicEditor(a)).panelInstance(b[c]));
return nicEditors.editors},findEditor:function(a){for(var b=nicEditors.editors,c=0;c<b.length;c++)if(b[c].instanceById(a))return b[c].instanceById(a)}},nicEditor=bkClass.extend({construct:function(a){this.options=new nicEditorConfig;bkExtend(this.options,a);this.nicInstances=[];this.loadedPlugins=[];for(var a=nicEditors.nicPlugins,b=0;b<a.length;b++)this.loadedPlugins.push(new a[b].p(this,a[b].o));nicEditors.editors.push(this);bkLib.addEvent(document.body,"mousedown",this.selectCheck.closureListener(this))},
panelInstance:function(a,b){var a=this.checkReplace($BK(a)),c=(new bkElement("DIV")).setStyle({width:(parseInt(a.getStyle("width"))||a.clientWidth)+"px"}).appendBefore(a);this.setPanel(c);return this.addInstance(a,b)},checkReplace:function(a){var b=nicEditors.findEditor(a);b&&(b.removeInstance(a),b.removePanel());return a},addInstance:function(a,b){var a=this.checkReplace($BK(a)),c=a.contentEditable||window.opera?new nicEditorInstance(a,b,this):new nicEditorIFrameInstance(a,b,this);this.nicInstances.push(c);
return this},removeInstance:function(a){for(var a=$BK(a),b=this.nicInstances,c=0;c<b.length;c++)b[c].e==a&&(b[c].remove(),this.nicInstances.splice(c,1))},removePanel:function(){this.nicPanel&&(this.nicPanel.remove(),this.nicPanel=null)},instanceById:function(a){for(var a=$BK(a),b=this.nicInstances,c=0;c<b.length;c++)if(b[c].e==a)return b[c]},setPanel:function(a){this.nicPanel=new nicEditorPanel($BK(a),this.options,this);this.fireEvent("panel",this.nicPanel);return this},nicCommand:function(a,b){this.selectedInstance&&
this.selectedInstance.nicCommand(a,b)},getIcon:function(a,b){var c=this.options.iconList[a],d=b.iconFiles?b.iconFiles[a]:"";return{backgroundImage:"url('"+(c?this.options.iconsPath:d)+"')",backgroundPosition:(c?-18*(c-1):0)+"px 0px"}},selectCheck:function(a,b){do if(b.className&&-1!=b.className.indexOf("nicEdit"))return!1;while(b=b.parentNode);this.fireEvent("blur",this.selectedInstance,b);this.lastSelectedInstance=this.selectedInstance;this.selectedInstance=null;return!1}}),nicEditor=nicEditor.extend(bkEvent),
nicEditorInstance=bkClass.extend({isSelected:!1,construct:function(a,b,c){this.ne=c;this.elm=this.e=a;this.options=b||{};newX=parseInt(a.getStyle("width"))||a.clientWidth;newY=parseInt(a.getStyle("height"))||a.clientHeight;this.initialHeight=newY-8;if((c="textarea"==a.nodeName.toLowerCase())||this.options.hasPanel){var b=bkLib.isMSIE&&!("undefined"!=typeof document.body.style.maxHeight&&"CSS1Compat"==document.compatMode),d={width:newX+"px",border:"1px solid #ccc",borderTop:0,overflowY:"auto",overflowX:"hidden"};
d[b?"height":"maxHeight"]=this.ne.options.maxHeight?this.ne.options.maxHeight+"px":null;this.editorContain=(new bkElement("DIV")).setStyle(d).appendBefore(a);d=(new bkElement("DIV")).setStyle({width:newX-20+"px",margin:"4px",minHeight:newY+"px"}).addClass("main").appendTo(this.editorContain);a.setStyle({display:"none"});d.innerHTML=a.innerHTML;c&&(d.setContent(a.value),this.copyElm=a,(a=a.parentTag("FORM"))&&bkLib.addEvent(a,"submit",this.saveContent.closure(this)));d.setStyle(b?{height:newY+"px"}:
{overflow:"hidden"});this.elm=d}this.ne.addEvent("blur",this.blur.closure(this));this.init();this.blur()},init:function(){this.elm.setAttribute("contentEditable","true");""==this.getContent()&&this.setContent("<br />");this.instanceDoc=document.defaultView;this.elm.addEvent("mousedown",this.selected.closureListener(this)).addEvent("keypress",this.keyDown.closureListener(this)).addEvent("focus",this.selected.closure(this)).addEvent("blur",this.blur.closure(this)).addEvent("keyup",this.selected.closure(this));
this.ne.fireEvent("add",this)},remove:function(){this.saveContent();if(this.copyElm||this.options.hasPanel)this.editorContain.remove(),this.e.setStyle({display:"block"}),this.ne.removePanel();this.disable();this.ne.fireEvent("remove",this)},disable:function(){this.elm.setAttribute("contentEditable","false")},getSel:function(){return window.getSelection?window.getSelection():document.selection},getRng:function(){var a=this.getSel();return!a?null:0<a.rangeCount?a.getRangeAt(0):a.createRange()},selRng:function(a,
b){window.getSelection?(b.removeAllRanges(),b.addRange(a)):a.select()},selElm:function(){var a=this.getRng();if(a.startContainer){var b=a.startContainer;if(1==a.cloneContents().childNodes.length)for(var c=0;c<b.childNodes.length;c++){var d=b.childNodes[c].ownerDocument.createRange();d.selectNode(b.childNodes[c]);if(1!=a.compareBoundaryPoints(Range.START_TO_START,d)&&-1!=a.compareBoundaryPoints(Range.END_TO_END,d))return $BK(b.childNodes[c])}return $BK(b)}return $BK("Control"==this.getSel().type?a.item(0):
a.parentElement())},saveRng:function(){this.savedRange=this.getRng();this.savedSel=this.getSel()},restoreRng:function(){this.savedRange&&this.selRng(this.savedRange,this.savedSel)},keyDown:function(a){a.ctrlKey&&this.ne.fireEvent("key",this,a)},selected:function(a,b){b||(b=this.selElm());if(!a.ctrlKey){var c=this.ne.selectedInstance;c!=this&&(c&&this.ne.fireEvent("blur",c,b),this.ne.selectedInstance=this,this.ne.fireEvent("focus",c,b));this.ne.fireEvent("selected",c,b);this.isFocused=!0;this.elm.addClass("selected")}return!1},
blur:function(){this.isFocused=!1;this.elm.removeClass("selected")},saveContent:function(){if(this.copyElm||this.options.hasPanel)this.ne.fireEvent("save",this),this.copyElm?this.copyElm.value=this.getContent():this.e.innerHTML=this.getContent()},getElm:function(){return this.elm},getContent:function(){this.content=this.getElm().innerHTML;this.ne.fireEvent("get",this);return this.content},setContent:function(a){this.content=a;this.ne.fireEvent("set",this);this.elm.innerHTML=this.content},nicCommand:function(a,
b){document.execCommand(a,!1,b)}}),nicEditorIFrameInstance=nicEditorInstance.extend({savedStyles:[],init:function(){var a=this.elm.innerHTML.replace(/^\s+|\s+$/g,"");this.elm.innerHTML="";!a?a="<br />":a;this.initialContent=a;this.elmFrame=(new bkElement("iframe")).setAttributes({src:"javascript:;",frameBorder:0,allowTransparency:"true",scrolling:"no"}).setStyle({height:"100px",width:"100%"}).addClass("frame").appendTo(this.elm);this.copyElm&&this.elmFrame.setStyle({width:this.elm.offsetWidth-4+"px"});
a=["font-size","font-family","font-weight","color"];for(itm in a)this.savedStyles[bkLib.camelize(itm)]=this.elm.getStyle(itm);setTimeout(this.initFrame.closure(this),50)},disable:function(){this.elm.innerHTML=this.getContent()},initFrame:function(){var a=$BK(this.elmFrame.contentWindow.document);a.designMode="on";a.open();var b=this.ne.options.externalCSS;a.write("<html><head>"+(b?'<link href="'+b+'" rel="stylesheet" type="text/css" />':"")+'</head><body id="nicEditContent" style="margin: 0 !important; background-color: transparent !important;">'+
this.initialContent+"</body></html>");a.close();this.frameDoc=a;this.frameWin=$BK(this.elmFrame.contentWindow);this.frameContent=$BK(this.frameWin.document.body).setStyle(this.savedStyles);this.instanceDoc=this.frameWin.document.defaultView;this.heightUpdate();this.frameDoc.addEvent("mousedown",this.selected.closureListener(this)).addEvent("keyup",this.heightUpdate.closureListener(this)).addEvent("keydown",this.keyDown.closureListener(this)).addEvent("keyup",this.selected.closure(this));this.ne.fireEvent("add",
this)},getElm:function(){return this.frameContent},setContent:function(a){this.content=a;this.ne.fireEvent("set",this);this.frameContent.innerHTML=this.content;this.heightUpdate()},getSel:function(){return this.frameWin?this.frameWin.getSelection():this.frameDoc.selection},heightUpdate:function(){this.elmFrame.style.height=Math.max(this.frameContent.offsetHeight,this.initialHeight)+"px"},nicCommand:function(a,b){this.frameDoc.execCommand(a,!1,b);setTimeout(this.heightUpdate.closure(this),100)}}),
nicEditorPanel=bkClass.extend({construct:function(a,b,c){this.elm=a;this.options=b;this.ne=c;this.panelButtons=[];this.buttonList=bkExtend([],this.ne.options.buttonList);this.panelContain=(new bkElement("DIV")).setStyle({overflow:"hidden",width:"100%",border:"1px solid #cccccc",backgroundColor:"#efefef"}).addClass("panelContain");this.panelElm=(new bkElement("DIV")).setStyle({margin:"2px",marginTop:"0px",zoom:1,overflow:"hidden"}).addClass("panel").appendTo(this.panelContain);this.panelContain.appendTo(a);
b=this.ne.options;c=b.buttons;for(button in c)this.addButton(button,b,!0);this.reorder();a.noSelect()},addButton:function(a,b){var c=b.buttons[a],c=c.type?eval("(typeof("+c.type+') == "undefined") ? null : '+c.type+";"):nicEditorButton,d=bkLib.inArray(this.buttonList,a);if(c&&(d||this.ne.options.fullPanel))this.panelButtons.push(new c(this.panelElm,a,b,this.ne)),d||this.buttonList.push(a)},findButton:function(a){for(var b=0;b<this.panelButtons.length;b++)if(this.panelButtons[b].name==a)return this.panelButtons[b]},
reorder:function(){for(var a=this.buttonList,b=0;b<a.length;b++){var c=this.findButton(a[b]);c&&this.panelElm.appendChild(c.margin)}},remove:function(){this.elm.remove()}}),nicEditorButton=bkClass.extend({construct:function(a,b,c,d){this.options=c.buttons[b];this.name=b;this.ne=d;this.elm=a;this.margin=(new bkElement("DIV")).setStyle({"float":"left",marginTop:"2px"}).appendTo(a);this.contain="embed"==b?(new bkElement("DIV")).setStyle({width:"38px",height:"20px"}).addClass("buttonContain").appendTo(this.margin):
(new bkElement("DIV")).setStyle({width:"20px",height:"20px"}).addClass("buttonContain").appendTo(this.margin);this.border=(new bkElement("DIV")).setStyle({backgroundColor:"#efefef",border:"1px solid #efefef"}).appendTo(this.contain);this.button="embed"==b?(new bkElement("DIV")).setStyle({width:"38px",height:"18px",overflow:"hidden",zoom:1,cursor:"pointer"}).addClass("button").setStyle(this.ne.getIcon(b,c)).appendTo(this.border):(new bkElement("DIV")).setStyle({width:"18px",height:"18px",overflow:"hidden",
zoom:1,cursor:"pointer"}).addClass("button").setStyle(this.ne.getIcon(b,c)).appendTo(this.border);this.button.addEvent("mouseover",this.hoverOn.closure(this)).addEvent("mouseout",this.hoverOff.closure(this)).addEvent("mousedown",this.mouseClick.closure(this)).noSelect();window.opera||(this.button.onmousedown=this.button.onclick=bkLib.cancelEvent);d.addEvent("selected",this.enable.closure(this)).addEvent("blur",this.disable.closure(this)).addEvent("key",this.key.closure(this));this.disable();this.init()},
init:function(){},hide:function(){this.contain.setStyle({display:"none"})},updateState:function(){this.isDisabled?this.setBg():this.isHover?this.setBg("hover"):this.isActive?this.setBg("active"):this.setBg()},setBg:function(a){switch(a){case "hover":var b={border:"1px solid #666",backgroundColor:"#ddd"};break;case "active":b={border:"1px solid #666",backgroundColor:"#ccc"};break;default:b={border:"1px solid #efefef",backgroundColor:"#efefef"}}this.border.setStyle(b).addClass("button-"+a)},checkNodes:function(a){var b=
a;do if(this.options.tags&&bkLib.inArray(this.options.tags,b.nodeName))return this.activate(),!0;while(b=b.parentNode&&"nicEdit"!=b.className);for(b=$BK(a);3==b.nodeType;)b=$BK(b.parentNode);if(this.options.css)for(itm in this.options.css)if(b.getStyle(itm,this.ne.selectedInstance.instanceDoc)==this.options.css[itm])return this.activate(),!0;this.deactivate();return!1},activate:function(){this.isDisabled||(this.isActive=!0,this.updateState(),this.ne.fireEvent("buttonActivate",this))},deactivate:function(){this.isActive=
!1;this.updateState();this.isDisabled||this.ne.fireEvent("buttonDeactivate",this)},enable:function(a,b){this.isDisabled=!1;this.contain.setStyle({opacity:1}).addClass("buttonEnabled");this.updateState();this.checkNodes(b)},disable:function(){this.isDisabled=!0;this.contain.setStyle({opacity:0.6}).removeClass("buttonEnabled");this.updateState()},toggleActive:function(){this.isActive?this.deactivate():this.activate()},hoverOn:function(){this.isDisabled||(this.isHover=!0,this.updateState(),this.ne.fireEvent("buttonOver",
this))},hoverOff:function(){this.isHover=!1;this.updateState();this.ne.fireEvent("buttonOut",this)},mouseClick:function(){this.options.command&&(this.ne.nicCommand(this.options.command,this.options.commandArgs),this.options.noActive||this.toggleActive());this.ne.fireEvent("buttonClick",this)},key:function(a,b){if(this.options.key&&b.ctrlKey&&String.fromCharCode(b.keyCode||b.charCode).toLowerCase()==this.options.key)this.mouseClick(),b.preventDefault&&b.preventDefault()}}),nicPlugin=bkClass.extend({construct:function(a,
b){this.options=b;this.ne=a;this.ne.addEvent("panel",this.loadPanel.closure(this));this.init()},loadPanel:function(a){var b=this.options.buttons,c;for(c in b)a.addButton(c,this.options);a.reorder()},init:function(){}}),nicPaneOptions={},nicEditorPane=bkClass.extend({construct:function(a,b,c,d){this.ne=b;this.elm=a;this.pos=a.pos();this.contain=(new bkElement("div")).setStyle({zIndex:"1000000001",overflow:"hidden",position:"absolute",left:this.pos[0]+"px",top:this.pos[1]+"px"});this.pane=(new bkElement("div")).setStyle({fontSize:"12px",
border:"1px solid #ccc",overflow:"hidden",padding:"4px",textAlign:"left",backgroundColor:"#ffffc9"}).addClass("pane").setStyle(c).appendTo(this.contain);d&&!d.options.noClose&&(this.close=(new bkElement("div")).setStyle({"float":"right",height:"16px",width:"16px",cursor:"pointer"}).setStyle(this.ne.getIcon("close",nicPaneOptions)).addEvent("mousedown",d.removePane.closure(this)).appendTo(this.pane));this.contain.noSelect().appendTo(document.body);this.position();this.init()},init:function(){},position:function(){if(this.ne.nicPanel){var a=
this.ne.nicPanel.elm,a=a.pos()[0]+parseInt(a.getStyle("width"))-(parseInt(this.pane.getStyle("width"))+8);a<this.pos[0]&&this.contain.setStyle({left:a+"px"})}},toggle:function(){this.isVisible=!this.isVisible;this.contain.setStyle({display:this.isVisible?"block":"none"})},remove:function(){this.contain&&(this.contain.remove(),this.contain=null)},append:function(a){a.appendTo(this.pane)},setContent:function(a){this.pane.setContent(a)}}),nicEditorAdvancedButton=nicEditorButton.extend({init:function(){this.ne.addEvent("selected",
this.removePane.closure(this)).addEvent("blur",this.removePane.closure(this))},mouseClick:function(){this.isDisabled||(this.pane&&this.pane.pane?this.removePane():(this.pane=new nicEditorPane(this.contain,this.ne,{width:this.width||"270px",backgroundColor:"#fff"},this),this.addPane(),this.ne.selectedInstance.saveRng()))},addForm:function(a,b){this.form=(new bkElement("form")).addEvent("submit",this.submit.closureListener(this));this.pane.append(this.form);this.inputs={};for(itm in a){var c=a[itm],
d="";b&&(d=b.getAttribute(itm));d||(d=c.value||"");var j=a[itm].type;if("title"==j)(new bkElement("div")).setContent(c.txt).setStyle({fontSize:"14px",fontWeight:"bold",padding:"0px",margin:"2px 0"}).appendTo(this.form);else{var l=(new bkElement("div")).setStyle({overflow:"hidden",clear:"both"}).appendTo(this.form);c.txt&&(new bkElement("label")).setAttributes({"for":itm}).setContent(c.txt).setStyle({margin:"2px 4px",fontSize:"13px",width:"50px",lineHeight:"20px",textAlign:"right","float":"left"}).appendTo(l);
switch(j){case "text":this.inputs[itm]=(new bkElement("input")).setAttributes({id:itm,value:d,type:"text"}).setStyle({margin:"2px 0",fontSize:"13px","float":"left",height:"20px",border:"1px solid #ccc",overflow:"hidden"}).setStyle(c.style).appendTo(l);break;case "select":this.inputs[itm]=(new bkElement("select")).setAttributes({id:itm}).setStyle({border:"1px solid #ccc","float":"left",margin:"2px 0"}).appendTo(l);for(opt in c.options)(new bkElement("option")).setAttributes({value:opt,selected:opt==
d?"selected":""}).setContent(c.options[opt]).appendTo(this.inputs[itm]);break;case "content":this.inputs[itm]=(new bkElement("textarea")).setAttributes({id:itm}).setStyle({border:"1px solid #ccc","float":"left"}).setStyle(c.style).appendTo(l),this.inputs[itm].value=d}}}(new bkElement("input")).setAttributes({type:"submit",value:"Submit"}).setStyle({backgroundColor:"#efefef",border:"1px solid #ccc",margin:"3px 0","float":"left",clear:"both"}).appendTo(this.form);this.form.onsubmit=bkLib.cancelEvent},
submit:function(){},findElm:function(a,b,c){for(var a=this.ne.selectedInstance.getElm().getElementsByTagName(a),d=0;d<a.length;d++)if(a[d].getAttribute(b)==c)return $BK(a[d])},removePane:function(){this.pane&&(this.pane.remove(),this.pane=null,this.ne.selectedInstance.restoreRng())}}),nicButtonTips=bkClass.extend({construct:function(a){this.ne=a;a.addEvent("buttonOver",this.show.closure(this)).addEvent("buttonOut",this.hide.closure(this))},show:function(a){this.timer=setTimeout(this.create.closure(this,
a),400)},create:function(a){this.timer=null;this.pane||(this.pane=new nicEditorPane(a.button,this.ne,{fontSize:"12px",marginTop:"5px"}),this.pane.setContent(a.options.name))},hide:function(){this.timer&&clearTimeout(this.timer);this.pane&&(this.pane=this.pane.remove())}});nicEditors.registerPlugin(nicButtonTips);
var nicSelectOptions={buttons:{fontSize:{name:__("Select Font Size"),type:"nicEditorFontSizeSelect",command:"fontsize"},fontFamily:{name:__("Select Font Family"),type:"nicEditorFontFamilySelect",command:"fontname"},fontFormat:{name:__("Select Font Format"),type:"nicEditorFontFormatSelect",command:"formatBlock"}}},nicEditorSelect=bkClass.extend({construct:function(a,b,c,d){this.options=c.buttons[b];this.elm=a;this.ne=d;this.name=b;this.selOptions=[];this.margin=(new bkElement("div")).setStyle({"float":"left",
margin:"2px 1px 0 1px"}).appendTo(this.elm);this.contain=(new bkElement("div")).setStyle({width:"90px",height:"20px",cursor:"pointer",overflow:"hidden"}).addClass("selectContain").addEvent("click",this.toggle.closure(this)).appendTo(this.margin);this.items=(new bkElement("div")).setStyle({overflow:"hidden",zoom:1,border:"1px solid #ccc",paddingLeft:"3px",backgroundColor:"#fff"}).appendTo(this.contain);this.control=(new bkElement("div")).setStyle({overflow:"hidden","float":"right",height:"18px",width:"16px"}).addClass("selectControl").setStyle(this.ne.getIcon("arrow",
c)).appendTo(this.items);this.txt=(new bkElement("div")).setStyle({overflow:"hidden","float":"left",width:"66px",height:"14px",marginTop:"1px",fontFamily:"sans-serif",textAlign:"center",fontSize:"12px"}).addClass("selectTxt").appendTo(this.items);window.opera||(this.contain.onmousedown=this.control.onmousedown=this.txt.onmousedown=bkLib.cancelEvent);this.margin.noSelect();this.ne.addEvent("selected",this.enable.closure(this)).addEvent("blur",this.disable.closure(this));this.disable();this.init()},
disable:function(){this.isDisabled=!0;this.close();this.contain.setStyle({opacity:0.6})},enable:function(){this.isDisabled=!1;this.close();this.contain.setStyle({opacity:1})},setDisplay:function(a){this.txt.setContent(a)},toggle:function(){this.isDisabled||(this.pane?this.close():this.open())},open:function(){this.pane=new nicEditorPane(this.items,this.ne,{width:"88px",padding:"0px",borderTop:0,borderLeft:"1px solid #ccc",borderRight:"1px solid #ccc",borderBottom:"0px",backgroundColor:"#fff"});for(var a=
0;a<this.selOptions.length;a++){var b=this.selOptions[a],c=(new bkElement("div")).setStyle({overflow:"hidden",borderBottom:"1px solid #ccc",width:"88px",textAlign:"left",overflow:"hidden",cursor:"pointer"}),d=(new bkElement("div")).setStyle({padding:"0px 4px"}).setContent(b[1]).appendTo(c).noSelect();d.addEvent("click",this.update.closure(this,b[0])).addEvent("mouseover",this.over.closure(this,d)).addEvent("mouseout",this.out.closure(this,d)).setAttributes("id",b[0]);this.pane.append(c);window.opera||
(d.onmousedown=bkLib.cancelEvent)}},close:function(){this.pane&&(this.pane=this.pane.remove())},over:function(a){a.setStyle({backgroundColor:"#ccc"})},out:function(a){a.setStyle({backgroundColor:"#fff"})},add:function(a,b){this.selOptions.push([a,b])},update:function(a){this.ne.nicCommand(this.options.command,a);this.close()}}),nicEditorFontSizeSelect=nicEditorSelect.extend({sel:{1:"1&nbsp;(8pt)",2:"2&nbsp;(10pt)",3:"3&nbsp;(12pt)",4:"4&nbsp;(14pt)",5:"5&nbsp;(18pt)",6:"6&nbsp;(24pt)"},init:function(){this.setDisplay("Font&nbsp;Size...");
for(itm in this.sel)this.add(itm,'<font size="'+itm+'">'+this.sel[itm]+"</font>")}}),nicEditorFontFamilySelect=nicEditorSelect.extend({sel:{arial:"Arial","comic sans ms":"Comic Sans","courier new":"Courier New",georgia:"Georgia",helvetica:"Helvetica",impact:"Impact","times new roman":"Times","trebuchet ms":"Trebuchet",verdana:"Verdana"},init:function(){this.setDisplay("Font&nbsp;Family...");for(itm in this.sel)this.add(itm,'<font face="'+itm+'">'+this.sel[itm]+"</font>")}}),nicEditorFontFormatSelect=
nicEditorSelect.extend({sel:{p:"Paragraph",pre:"Pre",h6:"Heading&nbsp;6",h5:"Heading&nbsp;5",h4:"Heading&nbsp;4",h3:"Heading&nbsp;3",h2:"Heading&nbsp;2",h1:"Heading&nbsp;1"},init:function(){this.setDisplay("Font&nbsp;Format...");for(itm in this.sel){var a=itm.toUpperCase();this.add("<"+a+">","<"+itm+' style="padding: 0px; margin: 0px;">'+this.sel[itm]+"</"+a+">")}}});nicEditors.registerPlugin(nicPlugin,nicSelectOptions);
var nicLinkOptions={buttons:{link:{name:"Add Link",type:"nicLinkButton",tags:["A"]},unlink:{name:"Remove Link",command:"unlink",noActive:!0}}},nicLinkButton=nicEditorAdvancedButton.extend({addPane:function(){this.ln=this.ne.selectedInstance.selElm().parentTag("A");this.addForm({"":{type:"title",txt:"Add/Edit Link"},href:{type:"text",txt:"URL",value:"http://",style:{width:"150px"}},title:{type:"text",txt:"Title"},target:{type:"select",txt:"Open In",options:{"":"Current Window",_blank:"New Window"},
style:{width:"100px"}}},this.ln)},submit:function(){var a=this.inputs.href.value;if("http://"==a||""==a)return alert("You must enter a URL to Create a Link"),!1;this.removePane();this.ln||(this.ne.nicCommand("createlink","javascript:nicTemp();"),this.ln=this.findElm("A","href","javascript:nicTemp();"));this.ln&&this.ln.setAttributes({href:this.inputs.href.value,title:this.inputs.title.value,target:this.inputs.target.options[this.inputs.target.selectedIndex].value})}});
nicEditors.registerPlugin(nicPlugin,nicLinkOptions);
var nicColorOptions={buttons:{forecolor:{name:__("Change Text Color"),type:"nicEditorColorButton",noClose:!0},bgcolor:{name:__("Change Background Color"),type:"nicEditorBgColorButton",noClose:!0}}},nicEditorColorButton=nicEditorAdvancedButton.extend({addPane:function(){var a={"0":"00",1:"33",2:"66",3:"99",4:"CC",5:"FF"},b=(new bkElement("DIV")).setStyle({width:"270px"}),c;for(c in a)for(var d in a)for(var j in a){var l="#"+a[c]+a[j]+a[d],h=(new bkElement("DIV")).setStyle({cursor:"pointer",height:"15px",
"float":"left"}).appendTo(b),k=(new bkElement("DIV")).setStyle({border:"2px solid "+l}).appendTo(h),l=(new bkElement("DIV")).setStyle({backgroundColor:l,overflow:"hidden",width:"11px",height:"11px"}).addEvent("click",this.colorSelect.closure(this,l)).addEvent("mouseover",this.on.closure(this,k)).addEvent("mouseout",this.off.closure(this,k,l)).appendTo(k);window.opera||(h.onmousedown=l.onmousedown=bkLib.cancelEvent)}this.pane.append(b.noSelect())},colorSelect:function(a){this.ne.nicCommand("foreColor",
a);this.removePane()},on:function(a){a.setStyle({border:"2px solid #000"})},off:function(a,b){a.setStyle({border:"2px solid "+b})}}),nicEditorBgColorButton=nicEditorColorButton.extend({colorSelect:function(a){this.ne.nicCommand("hiliteColor",a);this.removePane()}});nicEditors.registerPlugin(nicPlugin,nicColorOptions);
var nicImageOptions={buttons:{image:{name:"Add Image",type:"nicImageButton",tags:["IMG"]}}},nicImageButton=nicEditorAdvancedButton.extend({addPane:function(){this.im=this.ne.selectedInstance.selElm().parentTag("IMG");this.addForm({"":{type:"title",txt:"Add/Edit Image"},src:{type:"text",txt:"URL",value:"http://",style:{width:"150px"}},alt:{type:"text",txt:"Alt Text",style:{width:"100px"}},align:{type:"select",txt:"Align",options:{none:"Default",left:"Left",right:"Right"}}},this.im)},submit:function(){var a=
this.inputs.src.value;if(""==a||"http://"==a)return alert("You must enter a Image URL to insert"),!1;this.removePane();this.im||(this.ne.nicCommand("insertImage","javascript:nicImTemp();"),this.im=this.findElm("IMG","src","javascript:nicImTemp();"));this.im&&this.im.setAttributes({src:this.inputs.src.value,alt:this.inputs.alt.value,align:this.inputs.align.value})}});nicEditors.registerPlugin(nicPlugin,nicImageOptions);
var nicSaveOptions={buttons:{save:{name:__("Save this content"),type:"nicEditorSaveButton"}}},nicEditorSaveButton=nicEditorButton.extend({init:function(){this.ne.options.onSave||this.margin.setStyle({display:"none"})},mouseClick:function(){var a=this.ne.options.onSave,b=this.ne.selectedInstance;a(b.getContent(),b.elm.id,b)}});nicEditors.registerPlugin(nicPlugin,nicSaveOptions);
var nicCodeOptions={buttons:{xhtml:{name:"Edit HTML",type:"nicCodeButton"}}},nicCodeButton=nicEditorAdvancedButton.extend({width:"350px",addPane:function(){this.addForm({"":{type:"title",txt:"Edit HTML"},code:{type:"content",value:this.ne.selectedInstance.getContent(),style:{width:"340px",height:"200px"}}})},submit:function(){this.ne.selectedInstance.setContent(this.inputs.code.value);this.removePane()}});nicEditors.registerPlugin(nicPlugin,nicCodeOptions);
var nicEmbedOptions={buttons:{embed:{name:"Embed Video or Media",type:"nicEmbedButton"}}},nicEmbedButton=nicEditorAdvancedButton.extend({addPane:function(){this.im=this.ne.selectedInstance.selElm().parentTag("IMG");this.addForm({"":{type:"title",txt:"Embed Video or Media"},embedsrc:{type:"text",txt:"Code",value:"",style:{width:"200px"}}},this.im)},submit:function(){var a=this.inputs.embedsrc.value;if(""==a||"http://"==a)return alert("You must enter the code to insert"),!1;this.removePane();a.indexOf('wmode="transparent"')?
a=a.replace('wmode="transparent"','wmode="opaque"'):a.indexOf('wmode="window"')&&(a=a.replace('wmode="window"','wmode="opaque"'));if(!this.im){var b=this.ne.selectedInstance.getContent();this.ne.selectedInstance.setContent(b+a+"<br /><br />");-1==a.indexOf("wmode")&&jQuery("embed").attr("wmode","opaque")}}});nicEditors.registerPlugin(nicPlugin,nicEmbedOptions);(function(a){a.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage"]};a.expr[":"].uncached=function(b){if(!a(b).is('img[src!=""]'))return!1;var c=document.createElement("img");c.src=b.src;return!c.complete};a.fn.waitForImages=function(b,c,d){a.isPlainObject(b)&&(c=b.each,d=b.waitForAll,b=b.finished);b=b||a.noop;c=c||a.noop;d=!!d;if(!a.isFunction(b)||!a.isFunction(c))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var j=
a(this),l=[];if(d){var h=a.waitForImages.hasImageProperties||[],k=/url\((['"]?)(.*?)\1\)/g;j.find("*").each(function(){var b=a(this);b.is("img:uncached")&&l.push({src:b.attr("src"),element:b[0]});a.each(h,function(a,c){var d=b.css(c);if(!d)return!0;for(var n;n=k.exec(d);)l.push({src:n[2],element:b[0]})})})}else j.find("img:uncached").each(function(){l.push({src:this.src,element:this})});var g=l.length,n=0;0==g&&b.call(j[0]);a.each(l,function(d,e){var m=new Image;a(m).bind("load.waitForImages error.waitForImages",
function(a){n++;c.call(e.element,n,g,"load"==a.type);if(n==g)return b.call(j[0]),!1});m.src=e.src})})}})(jQuery);(function(a){var b={numOfCol:5,offsetX:5,offsetY:5,blockElement:"div"},c,d,j=[];Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c=this.length>>>0,d=Number(b)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);d<c;d++)if(d in this&&this[d]===a)return d;return-1});var l=function(a,c,d,e,m){for(a=0;a<e;a++){var h={};h.x=c+a;h.size=e;h.endY=d+m+2*b.offsetY;j.push(h)}},h=function(a,b){for(var c=0;c<j.length;c++){var d=j[c];if("x"==b&&d.x==a||"endY"==b&&d.endY==a)return c}},k=function(a,
b){for(var c=[],d=0;d<b;d++)c.push(j[h(a+d,"x")].endY);var d=Math.min.apply(Math,c),m=Math.max.apply(Math,c);return[d,m,c.indexOf(d)]};a.fn.BlocksIt=function(g){g&&"object"===typeof g&&a.extend(b,g);c=a(this);d=c.width()/b.numOfCol;j=[];for(g=0;g<b.numOfCol;g++)l("empty-"+g,g,0,1,-b.offsetY);c.children(b.blockElement).each(function(){var c=a(this);!c.data("size")||0>c.data("size")?c.data("size",1):c.data("size")>b.numOfCol&&c.data("size",b.numOfCol);var f;f=c.data("size");if(1<f){for(var e=j.length-
f,m=!1,g,u,z=0;z<j.length;z++){var w=j[z].x;if(0<=w&&w<=e){var q=k(w,f);m?q[1]<g[1]&&(g=q,u=w):(m=!0,g=q,u=w)}}f=[u,g[1]]}else g=k(0,j.length),f=[g[2],g[0]];e=d*c.data("size")-(c.outerWidth()-c.width());c.css({width:e-2*b.offsetX,left:f[0]*d,top:f[1],position:"absolute"});e=c.outerHeight();m=f[0];g=c.data("size");for(u=0;u<g;u++)z=h(m+u,"x"),j.splice(z,1);l(c.attr("id"),f[0],f[1],c.data("size"),e)});g=k(0,j.length);c.height(g[1]+b.offsetY);return this}})(jQuery);(function(a){a.fn.hoverIntent=function(b,c){var d={sensitivity:7,interval:100,timeout:0},d=a.extend(d,c?{over:b,out:c}:b),j,l,h,k,g=function(a){j=a.pageX;l=a.pageY},n=function(b,c){c.hoverIntent_t=clearTimeout(c.hoverIntent_t);if(Math.abs(h-j)+Math.abs(k-l)<d.sensitivity)return a(c).unbind("mousemove",g),c.hoverIntent_s=1,d.over.apply(c,[b]);h=j;k=l;c.hoverIntent_t=setTimeout(function(){n(b,c)},d.interval)},f=function(b){for(var c=("mouseover"==b.type?b.fromElement:b.toElement)||b.relatedTarget;c&&
c!=this;)try{c=c.parentNode}catch(f){c=this}if(c==this)return!1;var l=jQuery.extend({},b),j=this;j.hoverIntent_t&&(j.hoverIntent_t=clearTimeout(j.hoverIntent_t));"mouseover"==b.type?(h=l.pageX,k=l.pageY,a(j).bind("mousemove",g),1!=j.hoverIntent_s&&(j.hoverIntent_t=setTimeout(function(){n(l,j)},d.interval))):(a(j).unbind("mousemove",g),1==j.hoverIntent_s&&(j.hoverIntent_t=setTimeout(function(){j.hoverIntent_t=clearTimeout(j.hoverIntent_t);j.hoverIntent_s=0;d.out.apply(j,[l])},d.timeout)))};return this.mouseover(f).mouseout(f)}})(jQuery);
