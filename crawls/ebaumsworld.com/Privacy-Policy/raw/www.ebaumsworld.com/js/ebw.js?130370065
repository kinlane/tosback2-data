jQuery(document).ready(function(){jQuery("#jqModal").jqm({ajax:"@href",trigger:".jqmify",onLoad:centerJQM,onHide:modalHide})});
var Ebaum={refreshCounter:1,container:"mediaListColumn",ajaxRefresh:function(){0==this.refreshCounter%4&&("iPhone"!=navigator.platform&&"iPod"!=navigator.platform)&&(0<jQuery("#leaderboard_iframe").length&&jQuery("#leaderboard_iframe").get(0).contentWindow.location.reload(!0),0<jQuery("#mediumrect_atf_iframe").length&&jQuery("#mediumrect_atf_iframe").get(0).contentWindow.location.reload(!0),0<jQuery("#mediumrect_btf_iframe").length&&jQuery("#mediumrect_btf_iframe").get(0).contentWindow.location.reload(!0));
this.refreshCounter++},refreshAds:function(a){!1==a?(0<jQuery("#leaderboard_iframe").length&&jQuery("#leaderboard_iframe").attr("src","/adcode/?loc=leaderboard&type=ros"),0<jQuery("#mediumrect_atf_iframe").length&&jQuery("#mediumrect_atf_iframe").attr("src","/adcode/?loc=mediumrect_atf&type=ros"),0<jQuery("#mediumrect_btf_iframe").length&&jQuery("#mediumrect_btf_iframe").attr("src","/adcode/?loc=mediumrect_btf&type=ros")):(0<jQuery("#leaderboard_iframe").length&&jQuery("#leaderboard_iframe").attr("src",
"http://gallys.gfrevenge.com/vbanners/code.php?site=gfrevenge&size=728x90&id=rlebaum&cmp=728x90sept&ad_id=ebaumsworld"),0<jQuery("#mediumrect_atf_iframe").length&&jQuery("#mediumrect_atf_iframe").attr("src","http://gallys.gfrevenge.com/vbanners/code.php?site=gfrevenge&size=300x250_27&id=rlebaum&cmp=300x250sept&ad_id=ebaumsworld"),0<jQuery("#mediumrect_btf_iframe").length&&jQuery("#mediumrect_btf_iframe").attr("src","http://gallys.gfrevenge.com/vbanners/code.php?site=gfrevenge&size=300x250_27&id=rlebaum&cmp=300x250sept&ad_id=ebaumsworld"))},
fireComscore:function(a){COMSCORE.beacon({c1:"2",c2:"15131799",c3:"",c4:a})},updateAnalytics:function(a){a||(a=/:\/\/.*?(\/.*?)$/.exec(String(window.location))[1]);_gaq.push(["_trackPageview",a])},changeListPage:function(a,b,c){null!=b&&(this.container=b);this.loadUri(a);"commentListHolder"==this.container&&jQuery("#commentList").html('<div class="widgetLoader"></div>');b=!1;void 0!=c&&(void 0!=c[2]&&"moderate-mature"==c[2])&&(b=!0,EbaumScrollAd.type="mature");this.refreshAds(b);this.updateAnalytics(a)},
loadUri:function(a){jQuery(".listingLoader").show();"function"===typeof history.pushState||"commentListHolder"==this.container?jQuery("#"+this.container).load(a,function(){"commentListHolder"==Ebaum.container&&(offset=document.getElementById(Ebaum.container).offsetTop,120<offset&&(offset-=120),window.scrollTo(0,offset));jQuery(".listingLoader").hide()}):window.location=a},updateMessageCount:function(){jQuery.getJSON("/message/getmailcount/",function(a){jQuery("#mailCount").text(a.cnt)})}},EbaumTopMedia=
{launch:function(){jQuery(".topVideoNav li a").click(function(){jQuery("#topVideoList").html('<div id="topMediaLoader" class="topMediaLoader"></div>');var a="/media/topview/"+jQuery(this).attr("id")+"/",b=this;jQuery("#topVideoList").load(a,function(){jQuery(".topVideoNav a.active").removeClass("active");jQuery(b).addClass("active")})})}};function EbaumEnlarge(a){this.iPhone=a}
EbaumEnlarge.prototype.enlarge=function(a){jQuery("#jqEnlargeModal").jqm({onLoad:function(){jQuery("#mediumrect").hide()},onHide:function(a){jQuery("#mediumrect").show();a.w.fadeOut("2000",function(){a.o.remove()})}});jQuery.get(a,function(a){jQuery("#jqEnlargeModal").css({width:""});jQuery("#jqEnlargeModal").jqmShow();jQuery("#jqEnlargeModal").html("");jQuery("#jqEnlargeModal").append(a);a=jQuery("#jqEnlargeModal img").css("width");jQuery("#jqEnlargeModal").css({width:a});jQuery("#jqEnlargeModal").jqmAddClose(".jqEnlargeClose");
var a=parseInt(a),c=0;a>screen.availWidth||(a>jQuery(window).width()?c=document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft:(c=jQuery(window).width()/2-a/2,0<window.pageXOffset?c+=window.pageXOffset:0<document.documentElement.scrollLeft&&(c+=document.documentElement.scrollLeft)));jQuery(".enlargeModal h1").css({width:a+10+"px"});jQuery("#jqEnlargeModal").css({"margin-left":"0px",left:c,top:"300px"});jQuery(".jqmOverlay").css({"z-index":jQuery("#jqEnlargeModal").css("z-index")-
1});this.iPhone&&(a=jQuery("#siteContainer").height(),c=jQuery(window).scrollTop(),jQuery(".jqmOverlay").css({height:a+"px"}),jQuery("#jqEnlargeModal").css({top:c+50+"px"}))});return!1};
var EbaumHistory={init:function(a){this.add(a);window.onpopstate=function(a){EbaumHistory.pop(a);EbaumListingNav.handlePop(a)}},add:function(a,b){data={url:a,extra:b};"function"===typeof history.pushState&&history.pushState(data,"",a)},pop:function(a){null!=a.state&&(url=a.state.url,Ebaum.loadUri(url))}},EbaumAudio={currentPosition:null,currentState:null,autoPaused:0,sendEvent:function(a,b){this.thisMovie("flashContainer").sendEvent(a,b)},getUpdate:function(a,b){"time"==a&&(this.currentPosition=b);
"state"==a&&(this.currentState=b,0==this.currentState?jQuery("#globeAudio").attr("src","http://media.ebaumsworld.com/img/audiopause.png"):jQuery("#globeAudio").attr("src","http://media.ebaumsworld.com/img/audioplay.png"))},pauseToggle:function(){autoPaused=0==this.currentState?0:1;2==this.currentState?jQuery("#globeAudio").attr("src","http://media.ebaumsworld.com/img/audiopause.png"):jQuery("#globeAudio").attr("src","http://media.ebaumsworld.com/img/audioplay.png");this.sendEvent("playpause")},getCurrentPosition:function(){return 1E3*
Math.round(this.currentPosition)},thisMovie:function(a){return-1!=navigator.appName.indexOf("Microsoft")?window[a]:document[a]}},EbaumScrollAd={type:null,el:null,pos:null,rendered:!1,fixed:!1,updated:!1,init:function(a){this.type=a;window.onscroll=EbaumScrollAd.trackScroll;a=document.getElementById("mediumRectBTF");this.pos=EbaumScrollAd.getElementPos(a);EbaumScrollAd.el=document.getElementById("mediumRectBTF")},getScrollPos:function(){return window.innerHeight?[window.innerWidth-10,window.innerHeight-
10,window.pageXOffset,window.pageYOffset]:document.documentElement.clientHeight?[document.documentElement.clientWidth-10,document.documentElement.clientHeight-10,document.documentElement.scrollLeft,document.documentElement.scrollTop]:[document.body.clientWidth,document.body.clientHeight,document.body.scrollLeft,document.body.scrollTop]},trackScroll:function(){void 0==EbaumScrollAd.el&&(EbaumScrollAd.el=document.getElementById("mediumRectBTF"));var a=EbaumScrollAd.getScrollPos();1E3<a[3]&&!1==EbaumScrollAd.updated&&
(EbaumScrollAd.pos=EbaumScrollAd.getElementPos(EbaumScrollAd.el),EbaumScrollAd.updated=!0);var b=EbaumScrollAd.pos;a[3]>b&&!1==EbaumScrollAd.fixed&&(EbaumScrollAd.fixed=!0,jQuery("#mediumRectBTF").addClass("fixedRight"));a[3]<=b&&!0==EbaumScrollAd.fixed&&(EbaumScrollAd.fixed=!1,jQuery("#mediumRectBTF").removeClass("fixedRight"))},getElementPos:function(a){var b=0;if(a.offsetParent){do b+=a.offsetTop;while(a=a.offsetParent)}return b}};EbaumListingNav.prototype=new EmuseEvent;EbaumListingNav.constructor=EbaumListingNav;var originalState;
function EbaumListingNav(a,b){this._container=a;this._action=b.action;this._mediaType=b.mediaType;this._modType=b.modType;this._featureType=b.featureType;this._dateType=b.dateType;this._subscribeType=b.subscribeType;this._layoutType="";this._tag=b.tag;this._searchTerm=b.searchTerm;this._sortType=b.sortType;selectedEls=jQuery(".selected");originalState={};for(var c=0,d=selectedEls.length;c<d;c++)originalState[c]=jQuery(selectedEls[c]).attr("id");this._container.onclick=this.bind(this.handleClick)}
EbaumListingNav.handlePop=function(a){extras=(popExtras=a.state.extra)?popExtras:originalState;for(div in extras)if(jQuery("#"+extras[div]).parent().siblings().children().removeClass("selected"),jQuery("#"+extras[div]).addClass("selected"),"featured-false"==extras[div]||"featured-featured"==extras[div])string=a=extras[div].split("-")[1],"false"==a&&(string="All"),jQuery("#filterDropLabel").html(string)};
EbaumListingNav.prototype.handleClick=function(a){var a=a||window.event,a=a.target||a.srcElement,b=a.id.split("-"),c=b[0],b=b[1];-1==jQuery(a).parents().index(jQuery("#filterDropList"))&&"filterDropTrigger"!=jQuery(a).attr("id")&&-1==jQuery(a).parents().index(jQuery("#filterDropTrigger"))&&jQuery("#filterDropList").is(":visible")&&jQuery("#filterDropList").hide();switch(c){case "media":this._mediaType="all"==b?!1:b;this.setSelected(a);this.buildUrl();break;case "date":this._dateType="month"==b?!1:
b;this.setSelected(a);this.buildUrl();break;case "subscribed":this._subscribeType="false"==b?!1:b;this.setSelected(a);this.buildUrl();break;case "sort":this._sortType="false"==b?!1:b;this.setSelected(a);this.buildUrl();break;case "moderate":this._modType=b;this._featureType=!1;string="nonfeatured"==b?"Non-Featured":b;jQuery("#filterDropLabel").html(string);jQuery("#filterDropList").hide();this.setSelected(a);this.buildUrl();break;case "featured":this._modType=!1;string=b;"false"==b?(this._featureType=
!1,string="All"):this._featureType=b;jQuery("#filterDropLabel").html(string);jQuery("#filterDropList").hide();this.setSelected(a);this.buildUrl();break;case "layout":this._layoutType=b;this.setSelected(a);this.buildUrl();break;case "filterDropTrigger":case "filterDropLabel":jQuery("#filterDropList").toggle()}};EbaumListingNav.prototype.setSelected=function(a){jQuery(a).parent().siblings().children().removeClass("selected");jQuery(a).addClass("selected")};
EbaumListingNav.prototype.buildUrl=function(){var a="/"+this._action+"/";this._tag&&(a+=this._tag+"/");this._searchTerm&&(a+=this._searchTerm+"/");this._subscribeType&&(a+=this._subscribeType+"/");this._sortType&&(a+=this._sortType+"/");this._dateType&&(a+=this._dateType+"/");this._modType&&(a+=this._modType+"/");this._mediaType&&(a+=this._mediaType+"/");this._featureType&&(a+=this._featureType+"/");this._layoutType&&(a+="?layout="+this._layoutType);for(var b=jQuery(".selected"),c=0,d=b.length;c<
d;c++)jQuery(b[c]).attr("id");this._layoutType?(jQuery(".listingLoader").show(),jQuery("#mediaListColumn").load(a,function(){jQuery(".listingLoader").hide()}),this._layoutType=""):window.location=a};EbaumListingNav.prototype.page=function(a){window.location=a};EbaumListingNav.prototype._splitId=function(a){a=a.id.split("-");return{type:a[0],id:a[1]}};EbaumUserMenu.prototype=new EmuseEvent;EbaumUserMenu.constructor=EbaumUserMenu;function EbaumUserMenu(a,b){this._container=a;this._auth=b;this._container.onclick=this.bind(this.handleClick)}
EbaumUserMenu.prototype.handleClick=function(a){a=a||window.event;a=a.target||a.srcElement;switch(a.id.split("-")[0]){case "subscribe":this.checkAuth()&&this.subscribe(a);break;case "unsubscribe":this.checkAuth()&&this.unsubscribe(a);break;case "addBuddy":this.checkAuth()&&this.addBuddy(a);break;case "removeBuddy":this.checkAuth()&&this.removeBuddy(a);break;case "block":this.checkAuth()&&this.block(a);break;case "unblock":this.checkAuth()&&this.unblock(a);break;case "favorite":this.checkAuth()&&(jQuery("#favorite").hasClass("favorited")?
this.unfavorite():this.favorite());break;case "sendPM":this.checkAuth()&&this.sendPM(a);break;case "editProfile":this.checkAuth()&&this.editProfile(a)}};EbaumUserMenu.prototype.checkAuth=function(){return!this._auth?(jQuery("#jqModal").jqm({ajax:"/user/login/"}),jQuery("#jqModal").jqmShow(),!1):!0};
EbaumUserMenu.prototype.subscribe=function(a){var b=a.id.split("-");jQuery.get("/user/subscribe/"+b[1]+"/",function(c){c.success?(jQuery(a).removeClass("subscribe").addClass("unsubscribe"),jQuery(a).attr("id","unsubscribe-"+b[1])):populateModal("<h1>Error</h1>")})};
EbaumUserMenu.prototype.unsubscribe=function(a){var b=a.id.split("-");jQuery.getJSON("/user/removesubscription/"+b[1]+"/",function(c){c.success?(jQuery(a).removeClass("unsubscribe").addClass("subscribe"),jQuery(a).attr("id","subscribe-"+b[1])):populateModal("<h1>Error</h1>")})};
EbaumUserMenu.prototype.block=function(a){var b=a.id.split("-");jQuery.get("/user/blockuser/"+b[1]+"/",function(c){c.success?(jQuery(a).removeClass("blockUser").addClass("unblockUser"),jQuery(a).attr("id","unblock-"+b[1])):populateModal("<h1>Error</h1>")})};EbaumUserMenu.prototype.unblock=function(a){var b=a.id.split("-");jQuery.get("/user/unblockuser/"+b[1]+"/",function(c){c.success?(jQuery(a).removeClass("unblockUser").addClass("blockUser"),jQuery(a).attr("id","block-"+b[1])):populateModal("<h1>Error</h1>")})};
EbaumUserMenu.prototype.addBuddy=function(a){var b=a.id.split("-");jQuery.get("/user/addbuddy/"+b[1]+"/",function(b){b.success?jQuery(a).removeClass("addBuddy").addClass("requestSent").addClass("disabled"):populateModal("<h1>Error</h1>")})};EbaumUserMenu.prototype.removeBuddy=function(a){var b=a.id.split("-");jQuery.get("/user/removebuddy/"+b[1]+"/",function(c){c.success?(jQuery(a).removeClass("removeBuddy").addClass("addBuddy"),jQuery(a).attr("id","addBuddy-"+b[1])):populateModal("<h1>Error</h1>")})};
EbaumUserMenu.prototype.sendPM=function(a){a=a.id.split("-");jQuery("#jqModal").jqm({ajax:"/message/compose/?buddy="+a[1]});jQuery("#jqModal").jqmShow()};EbaumUserMenu.prototype.editProfile=function(){jQuery("#jqModal").jqm({ajax:"/user/edit/"});jQuery("#jqModal").jqmShow()};EbaumUserMenu.prototype._splitId=function(a){a=a.id.split("-");return{type:a[0],id:a[1]}};EbaumMediaDetail.prototype=new EmuseEvent;EbaumMediaDetail.constructor=EbaumMediaDetail;function EbaumMediaDetail(a,b,c){this._container=a;this._id=b;this._auth=c;this._container.onclick=this.bind(this.handleClick)}
EbaumMediaDetail.prototype.handleClick=function(a){var a=a||window.event,a=a.target||a.srcElement,b=a.id.split("-"),c=b[0],d=b[1],b=b[2];"dropListTrigger"!=c&&"sortDropTrigger"!=c&&"sortDropLabel"!=c&&jQuery(".dropList").is(":visible")&&jQuery(".dropList").hide();switch(c){case "dropListTrigger":this.checkAuth()&&EbaumUser.triggerMenu(b,d);break;case "sortDropTrigger":case "sortDropLabel":jQuery("#filterDropList").toggle();break;case "subscribe":this.checkAuth()&&this.subscribe(a);break;case "unsubscribe":this.checkAuth()&&
this.unsubscribe(a);break;case "addBuddy":this.checkAuth()&&this.addBuddy(a);break;case "removeBuddy":this.checkAuth()&&this.removeBuddy(a);break;case "block":this.checkAuth()&&this.block(a);break;case "unblock":this.checkAuth()&&this.unblock(a);break;case "favorite":this.checkAuth()&&(jQuery("#favorite").hasClass("favorited")?this.unfavorite():this.favorite());break;case "flag":this.checkAuth()&&(jQuery("#flag").hasClass("flagged")||this.flag());break;case "sendPM":this.checkAuth()&&this.sendPM(a);
break;case "showcase":this.checkAuth()&&this.showcase(a);break;case "userDelete":this.checkAuth()&&this.userDelete(a)}};EbaumMediaDetail.prototype.checkAuth=function(){return!this._auth?(jQuery("#jqModal").jqm({ajax:"/user/login/"}),jQuery("#jqModal").jqmShow(),!1):!0};EbaumMediaDetail.prototype.subscribe=function(a){var b=a.id.split("-");jQuery.get("/user/subscribe/"+b[1]+"/",function(b){b.success?jQuery(a).html("Success"):populateModal("oops")})};
EbaumMediaDetail.prototype.unsubscribe=function(a){var b=a.id.split("-");jQuery.getJSON("/user/removesubscription/"+b[1]+"/",function(b){b.success?jQuery(a).html("Success"):populateModal("oops")})};EbaumMediaDetail.prototype.block=function(a){var b=a.id.split("-");jQuery.get("/user/blockuser/"+b[1]+"/",function(b){b.success?jQuery(a).html("Success"):populateModal("oops")})};
EbaumMediaDetail.prototype.unblock=function(a){var b=a.id.split("-");jQuery.get("/user/unblockuser/"+b[1]+"/",function(b){b.success?jQuery(a).html("Success"):populateModal("oops")})};EbaumMediaDetail.prototype.addBuddy=function(a){var b=a.id.split("-");jQuery.get("/user/addbuddy/"+b[1]+"/",function(b){b.success?jQuery(a).html("Success"):populateModal("oops")})};
EbaumMediaDetail.prototype.removeBuddy=function(a){var b=a.id.split("-");jQuery.get("/user/removebuddy/"+b[1]+"/",function(b){b.success?jQuery(a).html("Success"):populateModal("oops")})};EbaumMediaDetail.prototype.sendPM=function(a){a=a.id.split("-");jQuery("#jqModal").jqm({ajax:"/message/compose/?buddy="+a[1]});jQuery("#jqModal").jqmShow()};
EbaumMediaDetail.prototype.favorite=function(){jQuery.getJSON("/user/addfavorite/"+this._id+"/",function(a){return a.success?(jQuery(".topFavoriteCount").addClass("favorited"),a=jQuery(".topFavoriteCount").html(),a=parseInt(a),0<a?a++:a=1,jQuery(".favoriteCount").html(a),!0):!1})};
EbaumMediaDetail.prototype.unfavorite=function(){jQuery.getJSON("/user/removefavorites/"+this._id+"/",function(a){return a.success?(jQuery(".topFavoriteCount").removeClass("favorited"),a=jQuery(".topFavoriteCount").html(),a=parseInt(a),0<a?a--:a=1,jQuery(".favoriteCount").html(a),!0):!1})};EbaumMediaDetail.prototype.flag=function(){jQuery.get("/media/flag/"+this._id+"/",function(a){if(a.success)return jQuery("#flag").addClass("flagged"),!0;jQuery("#flag").hide();return!1})};
EbaumMediaDetail.prototype.showcase=function(){jQuery.get("/user/setshowcase/"+this._id+"/",function(a){if(a.success)return window.location=a.data,!0;jQuery("#flag").hide();return!1})};EbaumMediaDetail.prototype.userDelete=function(){confirm("Do you really want to delete this media item?")&&jQuery.get("/user/removeuploads/"+this._id+"/",function(a){a.success?window.location="/":populateModal("<h1>ALERT</h1> Media failed to delete.")});return!1};
EbaumMediaDetail.prototype._splitId=function(a){a=a.id.split("-");return{type:a[0],id:a[1]}};EbaumForm.prototype=new EmuseEvent;EbaumForm.constructor=EbaumForm;
function EbaumForm(a,b){this._container=a;this._ip=b.ip;this._avatar=b.avatar;this._container.onclick=this.bind(this.handleClick);var c=this;jQuery("input").focus(function(a){var b=a||window.event,b=b.target||b.srcElement;"signupBtn"!=b.id&&("forgotLoginBtn"!=b.id&&"submit"!=b.type)&&c.handleClick(a)});jQuery("input").blur(function(a){a=a||window.event;a=(a.target||a.srcElement).id.split("-");jQuery("#label-"+a.id).removeClass("inputFocus")});jQuery("#register input[name=username]").blur(function(){var a=
jQuery("#register input[name=username]").val();jQuery.getJSON("/user/checkavailable/",{type:"username",value:a},function(a){a.success?jQuery("#register #usernameError").html(""):jQuery("#usernameError").html("Username already in use.  Please choose a different username.")})})}
EbaumForm.prototype.handleClick=function(a){var a=a||window.event,a=a.target||a.srcElement,b=a.id.split("-"),c=b[0],b=b[1];jQuery(".inputFocus").removeClass("inputFocus");switch(c){case "input":jQuery("#label-"+b).addClass("inputFocus");break;case "femaleCheckBox":"f"!=jQuery("#gender").val()?(jQuery("#gender").val("f"),jQuery("#"+a.id).addClass("checked"),jQuery("#maleCheckBox").removeClass("checked")):(jQuery("#gender").attr("value",""),jQuery("#"+a.id).removeClass("checked"));break;case "maleCheckBox":"m"!=
jQuery("#gender").val()?(jQuery("#gender").val("m"),jQuery("#"+a.id).addClass("checked"),jQuery("#femaleCheckBox").removeClass("checked")):(jQuery("#gender").attr("value",""),jQuery("#maleCheckBox").removeClass("checked"));break;case "termsCheckBox":jQuery("#check-terms").val()?(jQuery("#check-terms").val(""),jQuery("#"+a.id).removeClass("checked"),jQuery("#signupBtn").attr("disabled",!0)):(jQuery("#check-terms").val(this._ip),jQuery("#"+a.id).addClass("checked"),jQuery("#signupBtn").attr("disabled",
!1));break;case "checkNewsFake":jQuery("#check-news").val()?(jQuery("#check-news").val(""),jQuery("#"+a.id).removeClass("checked")):(jQuery("#check-news").val(1),jQuery("#"+a.id).addClass("checked"));break;case "rememberCheck":jQuery("#rememberMe").val()?(jQuery("#rememberMe").val(""),jQuery("#"+a.id).removeClass("checked")):(jQuery("#rememberMe").val(1),jQuery("#"+a.id).addClass("checked"));break;case "avatarCheckBox":jQuery("#fbAvatar").val()?(jQuery("#fbAvatar").val(""),jQuery("#"+a.id).removeClass("checked")):
(jQuery("#fbAvatar").val(this._avatar),jQuery("#"+a.id).addClass("checked"));break;case "fakeCheck":jQuery("#realCheck-"+b).val()?(jQuery("#realCheck-"+b).val(""),jQuery("#"+a.id).removeClass("checked")):(jQuery("#realCheck-"+b).val(1),jQuery("#"+a.id).addClass("checked"));break;case "matureYesBox":"1"!=jQuery("#maturePref").val()?(jQuery("#maturePref").val("1"),jQuery("#"+a.id).addClass("checked"),jQuery("#matureNoBox").removeClass("checked")):(jQuery("#maturePref").attr("value",""),jQuery("#"+a.id).removeClass("checked"),
jQuery("#matureNoBox").addClass("checked"));break;case "matureNoBox":""!=jQuery("#maturePref").val()?(jQuery("#maturePref").val(""),jQuery("#"+a.id).addClass("checked"),jQuery("#matureYesBox").removeClass("checked")):(jQuery("#maturePref").attr("value","1"),jQuery("#"+a.id).removeClass("checked"),jQuery("#matureYesBox").addClass("checked"));break;case "signupBtn":this.submitSignup();break;case "forgotLoginBtn":this.forgotLogin();break;default:jQuery(".uploadLabel").removeClass("inputFocus")}};
EbaumForm.prototype.submitSignup=function(){var a=jQuery("#register").serialize();jQuery.post("/user/signup/",a,function(a){if(a.success)window.location="/";else{jQuery(".error").html("");var c=a.data.errors;if(null!=c){var d="";for(x in c)d+=c[x]+"<br />";jQuery("#submitError").html(d)}else jQuery("#submitError").html("Errors found. Please review.");a=a.data.fieldErrors;for(x in a)jQuery("#"+x+"Error").html(a[x])}})};
EbaumForm.prototype.forgotLogin=function(){var a=jQuery("#lost").serialize();jQuery.post("/user/forgotlogin/",a,function(a){if(a.success)window.location.reload();else if(jQuery("#submitError").html(""),a=a.data.errors,null!=a){var c="";for(x in a)c+=a[x]+"<br />";jQuery("#submitError").html(c)}})};
EbaumForm.prototype.validateEmail=function(){var a=jQuery("#input-email").val();jQuery("#errors").hide();if(0==jQuery.trim(a).length||0!=jQuery.trim(a).length&&!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(a))return jQuery("#errors").html("Enter a valid email address.").show(),!1};EbaumSlider.prototype=new EmuseEvent;EbaumSlider.constructor=EbaumSlider;function EbaumSlider(a){this._container=a;this._container.onmouseover=this.bind(this.handleEnter);this._container.onmouseout=this.bind(this.handleLeave)}
EbaumSlider.prototype.handleEnter=function(a){var b=a||window.event,a=b.target||b.srcElement,b=b.relatedTarget||b.fromElement,c=a.id.split("-"),c=c[0];if("slider"!=c){for(;"slider"!=c&&"BODY"!=a.nodeName;)a=a.parentNode,c=a.id.split("-"),c=c[0];if("slider"==c)if(void 0===b)this.enterHandler(a);else{for(;b!=a&&"BODY"!=b.nodeName;)b=b.parentNode;b!=a&&this.enterHandler(a)}}else if(void 0===b)this.enterHandler(a);else{for(;b!=a&&"BODY"!=b.nodeName;)b=b.parentNode;b!=a&&this.enterHandler(a)}};
EbaumSlider.prototype.handleLeave=function(a){var b=a||window.event,a=b.target||b.srcElement,b=b.relatedTarget||b.toElement,c=a.id.split("-"),c=c[0];if("slider"!=c){for(;"slider"!=c&&"BODY"!=a.nodeName;)a=a.parentNode,c=a.id.split("-"),c=c[0];if("slider"==c)if(void 0===b)this.leaveHandler(a);else{for(;b!=a&&"BODY"!=b.nodeName;)b=b.parentNode;b!=a&&this.leaveHandler(a)}}else if(void 0===b)this.leaveHandler(a);else{for(;b!=a&&"BODY"!=b.nodeName;)b=b.parentNode;b!=a&&this.leaveHandler(a)}};
EbaumSlider.prototype.enterHandler=function(a){jQuery("#"+a.id+" .slider").show(100)};EbaumSlider.prototype.leaveHandler=function(a){jQuery("#"+a.id+" .slider").hide(100)};EbaumRating.constructor=EbaumRating;function EbaumRating(a){this._container=a;var b=this;this._container.onclick=function(a){b.handleClick.call(b,a)};this._container.onmouseover=function(a){b.handleEnter.call(b,a)};this._container.onmouseout=function(a){b.handleLeave.call(b,a)}}
EbaumRating.prototype.handleEnter=function(a){var b=a||window.event,a=b.target||b.srcElement,b=b.relatedTarget||b.fromElement,c=a.id.split("-"),d=c[0],c=c[2];if("stars"!=d){for(;"stars"!=d&&"BODY"!=a.nodeName;)a=a.parentNode,c=a.id.split("-"),d=c[0];if("stars"==d)if(void 0===b)this.enterHandler(a);else{for(;b!=a&&"BODY"!=b.nodeName;)b=b.parentNode;b!=a&&this.enterHandler(a)}}else if(c)this.enterHandler(a);else if(void 0===b)this.enterHandler(a);else{for(;b!=a&&"BODY"!=b.nodeName;)b=b.parentNode;b!=
a&&this.enterHandler(a)}};EbaumRating.prototype.enterHandler=function(a){var b=a.id.split("-"),c=b[1];if(b[2]&&jQuery("#stars-"+c+" .mediaStars").length){jQuery(a).attr("cursor","pointer");c=b[1];b=b[2];jQuery("#stars-"+c+" .userDynamic .star").removeClass("yellowOn");for(jQuery("#stars-"+c+" .userDynamic .star").addClass("off");0<b;b--)jQuery("#stars-"+c+"-"+b).removeClass("off"),jQuery("#stars-"+c+"-"+b).addClass("yellowOn")}jQuery("#"+a.id+" .userStars").show();jQuery("#"+a.id+" .mediaStars").hide()};
EbaumRating.prototype.handleLeave=function(a){var b=a||window.event,a=b.target||b.srcElement,b=b.relatedTarget||b.toElement,c=a.id.split("-"),d=c[0],f=c[1],c=c[2];if("stars"!=d){for(;"stars"!=d&&"BODY"!=a.nodeName;)a=a.parentNode,c=a.id.split("-"),d=c[0];if("stars"==d)if(void 0===b)this.leaveHandler(a);else{for(;b!=a&&"BODY"!=b.nodeName;)b=b.parentNode;b!=a&&this.leaveHandler(a)}}else if(c)b.id.split("-")[2]?this.starLeaveHandler(a):jQuery("#stars-"+f+" .mediaStars").length&&(jQuery("#stars-"+f+" .userStars").hide(),
jQuery("#stars-"+f+" .mediaStars").show());else if(void 0===b)this.leaveHandler(a);else{for(;b!=a&&"BODY"!=b.nodeName;)b=b.parentNode;b!=a&&this.leaveHandler(a)}};EbaumRating.prototype.starLeaveHandler=function(a){var b=a.id.split("-"),c=b[1];if(b[2]&&jQuery("#stars-"+c+" .mediaStars").length){jQuery(a).attr("cursor","pointer");c=b[1];for(a=b[2];0<a;a--)jQuery("#stars-"+c+"-"+a).addClass("off"),jQuery("#stars-"+c+"-"+a).removeClass("yellowOn")}};
EbaumRating.prototype.leaveHandler=function(a){a.id.split("-");jQuery("#"+a.id+" .mediaStars").length&&(jQuery("#"+a.id+" .userStars").hide(),jQuery("#"+a.id+" .mediaStars").show())};EbaumRating.prototype.handleClick=function(a){a=a||window.event;a=a.target||a.srcElement;jQuery(a.parentNode).hasClass("userDynamic")&&(a.id.split("-")[2]?this.submitUserRating(a):(jQuery("#jqModal").jqm({ajax:"/user/login/"}),jQuery("#jqModal").jqmShow()))};
EbaumRating.prototype.submitUserRating=function(a){var a=jQuery(a).attr("id").split("-"),b=a[1],c=a[2],d=this;jQuery.post("/media/rate/"+b+"/",{rating:c},function(a){a.success?d.updateVoteDisplay(c,b):populateModal(a.error)})};
EbaumRating.prototype.updateVoteDisplay=function(a,b){jQuery("#rating-"+b+" .userDynamic").addClass("userStatic");jQuery("#rating-"+b+" .userStatic").removeClass("userDynamic");jQuery("#rating-"+b+" .userStatic .star").attr("title",a+" stars");for(var c=a;0<c;c--)jQuery("#star-"+b+"-"+c).removeClass("off"),jQuery("#star-"+b+"-"+c).addClass("on");jQuery("#rating-"+b+" .userStatic .star").unbind();c=jQuery("#votes-"+b).html();c=parseInt(c);0<c?c++:c=1;jQuery("#votes-"+b).html(c);jQuery("#rating-"+b+
" .mediaStars").remove();jQuery("#rating-"+b+" .userStars").show()};EbaumGallery.constructor=EbaumGallery;
function EbaumGallery(a,b,c,d,f){this._container=a;this._id=b;this._count=c;this._start=d;this._contest=f;this._busy=!1;this._thumbImages=jQuery(".galleryThumbImage");this._fullImages=[];this._thumbImages=jQuery("li.galleryThumb img.galleryThumbImage");this._current=this._start;this._currentImageToLoad=this._start-1;startId=jQuery("#thumb"+this._start+" .galleryThumbImage").attr("id");info=startId.split("-");this._currentId=startId=info[1];var g=this;document.onkeyup=function(a){g.handleKeyUp.call(g,
a)};"ontouchstart"in window?this._container.ontouchstart=function(a){g.handleClick.call(g,a)}:this._container.onclick=function(a){g.handleClick.call(g,a)};this._contest&&jQuery("#contestRating").html(jQuery("#ratingsWrapper-"+startId).html());this.loadImagesInOrder();this.changeImage(jQuery("#thumb"+this._start+" .galleryThumbImage"))}
EbaumGallery.prototype.handleClick=function(a){var a=a||window.event,a=a.target||a.srcElement,b=a.id.split("-")[0];if(!this._busy)switch(b){case "galleryNext":this.nextHandler();break;case "galleryPrev":this.prevHandler();break;case "thumb":this.thumbHandler(a);break;case "thumbNum":this.thumbHandler(a.nextElementSibling);break;case "gridToggle":jQuery("#gridOverlay").toggle();break;case "share":jQuery("#shareOverlay").show();break;case "shareToggle":jQuery("#shareOverlay").hide();break;case "captionReveal":jQuery("#captionReveal").hide();
jQuery("#captionOverlay").slideToggle("fast");break;case "captionClose":jQuery("#captionOverlay").slideToggle("fast",function(){jQuery("#captionReveal").show()})}};EbaumGallery.prototype.handleKeyUp=function(a){a=a||window.event;if(!this._busy)switch(a.keyCode){case 37:this.prevHandler();break;case 39:this.nextHandler()}};
EbaumGallery.prototype.nextHandler=function(){var a;if("postroll"==this._current)jQuery("#nextGallery .thumbnail a").click(),document.location=jQuery("#nextGallery .thumbnail a").attr("href")+"?autoplay=true";else if(this._current<this._count){if(!this.checkImageLoaded(this._current))return!1;this._current+=1;a=jQuery("#thumb"+this._current+" .galleryThumbImage");this.changeImage(a)}else{jQuery("#galleryFeature").hide();jQuery("#galleryPostRoll").show();jQuery(".galleryProgress").hide();jQuery("#share").hide();
var b=this;this._current="postroll";jQuery("#replayGallery").click(function(){jQuery("#galleryPostRoll").hide();jQuery("#galleryFeature").show();jQuery(".galleryProgress").show();jQuery("#share").show();b._current=1;a=jQuery("#thumb1 .galleryThumbImage");b.changeImage(a)})}};
EbaumGallery.prototype.prevHandler=function(){var a;"postroll"==this._current&&(jQuery("#galleryFeature").show(),jQuery("#galleryPostRoll").hide(),jQuery(".galleryProgress").show(),jQuery("#share").show(),this._current=1);if(1<this._current){if(!this.checkImageLoaded(this._current-2))return!1;this._current-=1}else{if(!this.checkImageLoaded(this._count-1))return!1;this._current=this._count}a=jQuery("#thumb"+this._current+" .galleryThumbImage");this.changeImage(a)};
EbaumGallery.prototype.thumbHandler=function(a){var a=jQuery(a),b=parseInt(jQuery(a).parent("li").attr("id").match(/([0-9]+)/)[0]);if(this._current!=b){if(!this.checkImageLoaded(b-1))return!1;this._current=b;this.changeImage(a);jQuery("#gridOverlay").toggle()}};
EbaumGallery.prototype.changeImage=function(a){this._busy=!0;var b=jQuery(a).attr("id");if(void 0!=b){b=b.split("-");this._currentId=b[1];jQuery(a).attr("path");b=jQuery(a).attr("title");jQuery(a).attr("avgrating");var c=jQuery(a).attr("dimwidth"),d=jQuery(a).attr("dimheight"),f=this;jQuery("#galleryFeature img").attr("src")!=f._fullImages[f._current-1].src||this._start==this._current?jQuery("img#galleryFeatureImage").animate({opacity:0},250,function(){jQuery("#galleryFeature img").replaceWith(f._fullImages[f._current-
1]);jQuery("#galleryFeature img").attr("id","galleryFeatureImage");jQuery("img#galleryFeatureImage").fadeTo(250,1);c>d?(newWidth=630,newHeight=newWidth*d/c,580<newHeight&&(newHeight=580,newWidth=newHeight*c/d)):(newHeight=580,newWidth=newHeight*c/d,630<newWidth&&(newWidth=630,newHeight=newWidth*d/c));jQuery("img#galleryFeatureImage").css({width:newWidth+"px"});jQuery("img#galleryFeatureImage").css({height:newHeight+"px"});f._busy=!1}):this._busy=!1;jQuery(".currentThumb").removeClass("currentThumb");
jQuery(a).addClass("currentThumb");630<c||580<d?(jQuery("#enlarge").show(),jQuery("#enlarge a").attr({href:"/pictures/enlarge/"+this._currentId+"/"}),jQuery("#share")):jQuery("#enlarge").hide();jQuery("#currentThumbIndex").html(this._current);jQuery("#captionContent").html(b);""!=b?jQuery("#captionOverlay").show():jQuery("#captionOverlay").hide();jQuery("#captionReveal").hide();if(this._contest&&(b=jQuery("#contestRating div").attr("id")))b=b.split("-"),b=b[1],jQuery("#ratingsWrapper-"+b).html(jQuery("#contestRating").html()),
this.loadRating(this._currentId);jQuery("#shareUrl").val("http://www.ebaumsworld.com/pictures/view/"+this._id+"/?image="+this._currentId);jQuery("#shareThumb img").attr("src",jQuery(a).attr("thumb"));Ebaum.ajaxRefresh();a=/:\/\/.*?(\/.*?)$/.exec(String(window.location))[1];a+=window.location.href;Ebaum.updateAnalytics(a);Ebaum.fireComscore(window.location.href+"#image="+this._currentId)}};
EbaumGallery.prototype.loadRating=function(a){jQuery("#contestRating").html(jQuery("#ratingsWrapper-"+a).html());jQuery("#ratingsWrapper-"+a).html("")};EbaumGallery.prototype.checkImageLoaded=function(a){return!this._fullImages[a]||!this._fullImages[a].complete||!this._thumbImages[a].complete?!1:!0};
EbaumGallery.prototype.loadImagesInOrder=function(){var a=this;this._fullImages[this._currentImageToLoad]=new Image;this._fullImages[this._currentImageToLoad].onload=function(){a._thumbImages[a._currentImageToLoad].onload=function(){jQuery(this).prev().remove();jQuery(this).css({display:"inline"});a._currentImageToLoad++;a._currentImageToLoad<a._count&&!a._fullImages[a._currentImageToLoad]?a.loadImagesInOrder():a._fullImages[0]||(a._count-a._start<a._scroll?a._currentImageToLoad==a._count?a._currentImageToLoad=
a._start-2:(a._currentImageToLoad-=2,a._currentImageToLoad<a._count-a._scroll-1&&(a._currentImageToLoad=0)):a._currentImageToLoad=0,a.loadImagesInOrder())};a._thumbImages[a._currentImageToLoad].src=jQuery(a._thumbImages[a._currentImageToLoad]).attr("thumb")};this._fullImages[this._currentImageToLoad].src=jQuery(this._thumbImages[this._currentImageToLoad]).attr("path")};var EbaumFacebook={init:function(){window.fbAsyncInit=function(){FB.init({appId:0x7f95d621035b,status:!1,cookie:!0,xfbml:!0})};var a;document.getElementById("facebook-jssdk")||(a=document.createElement("script"),a.id="facebook-jssdk",a.async=!0,a.src="//connect.facebook.net/en_US/all.js",document.getElementsByTagName("head")[0].appendChild(a))},login:function(){FB.login(function(a){"connected"==a.status&&(jQuery("#jqModal").hide(),jQuery("#jqModal").show(),jQuery(".jqContent").html('Logging in with Facebook Connect...<br /><br /><div class="modalLoader"></div><br />'),
window.location="/user/facebookconnect/")},{scope:"email, user_birthday"})},signup:function(){jQuery("form[name=register]").submit(function(){var a=!0;jQuery("input[class=required]").each(function(){if(0==jQuery.trim(this.value).length)return alert("Please enter all required fields."),jQuery("input[class=required]").each(function(){""==this.value&&jQuery(this).css({backgroundColor:"yellow"})}),a=!1});unstring=jQuery("input[name=username]").val();if(15<unstring.length||4>unstring.length)alert("Your username must between 4 and 15 characters long"),
a=!1;0==jQuery("input[name=gender]:checked").size()&&(alert("You must select a gender"),a=!1);0==jQuery("input[name=termsbox]:checked").size()&&(alert("You must accept the terms of use policy"),a=!1);return a?(jQuery("#jqModal").show(),jQuery(".jqContent").html('Registering your information...<br /><br /><div class="modalLoader"></div><br />'),!0):!1});jQuery("input[name=username]").blur(function(){var a=jQuery("input[name=username]").val();jQuery.getJSON("/user/checkavailable/",{type:"username",
value:a},function(a){a.success||(alert("Username already in use.  Please choose a different username."),jQuery("input[name=username]").select())})})}};EbaumInbox.prototype=new EmuseEvent;EbaumInbox.constructor=EbaumInbox;function EbaumInbox(a){this._container=a;this._listPage=1;this._sort=void 0;this._container.onclick=this.bind(this.handleClick);this._container.onchange=this.bind(this.handleChange);this._container.onsubmit=this.bind(this.handleSubmit)}EbaumInbox.prototype.handleSubmit=function(a){a=a||window.event;(a.target||a.srcElement).id.split("-")};
EbaumInbox.prototype.handleChange=function(a){a=a||window.event;a=(a.target||a.srcElement).id.split("-")[0];switch(a){case "inboxCheckbox":"all"==jQuery("#"+a).val()?jQuery("input:checkbox").attr("checked",!0):"read"==jQuery("#"+a).val()?(jQuery("input:checkbox").attr("checked",!1),jQuery("input:checkbox.read").attr("checked",!0)):"unread"==jQuery("#"+a).val()?(jQuery("input:checkbox").attr("checked",!1),jQuery("input:checkbox.unread").attr("checked",!0)):"saved"==jQuery("#"+a).val()?(jQuery("input:checkbox").attr("checked",
!1),jQuery("input:checkbox.saved").attr("checked",!0)):"none"==jQuery("#"+a).val()&&jQuery("input:checkbox").attr("checked",!1)}};
EbaumInbox.prototype.handleClick=function(a){var a=a||window.event,a=a.target||a.srcElement,b=a.id.split("-"),c=b[1];switch(b[0]){case "viewComment":this.gotoComment(a);break;case "confirmBuddy":this.confirmBuddy(a);break;case "addBuddy":this.addBuddy(a);break;case "blockUser":this.blockUser(a);break;case "viewMedia":this.gotoMedia(a);break;case "acceptCreator":this.acceptCreator(a);break;case "composeBtn":jQuery("#jqModal").jqm({ajax:"/message/compose/"});jQuery("#jqModal").jqmShow();break;case "reply":jQuery("#message-"+
c).hasClass("unread")&&this.markRead(a);jQuery("#jqModal").jqm({ajax:"/message/reply/"+c+"/"});jQuery("#jqModal").jqmShow();break;case "remove":this.remove(a);break;case "bulkMarkRead":this.bulkMarkRead(a);break;case "bulkRemove":this.bulkRemove(a);break;case "featured":"unread"==c?jQuery("#markAllRead").show():jQuery("#markAllRead").hide();break;case "markReadAll":this.markAllRead(a);break;case "markRead":this.markRead(a)}};
EbaumInbox.prototype.gotoComment=function(a){a=a.id.split("-");window.location=a[1]+"-"+a[2]};EbaumInbox.prototype.gotoMedia=function(a){var b=this._splitId(a);jQuery("#message-"+b.id).hasClass("unread")&&this.markRead(a);window.location=b.id};EbaumInbox.prototype.remove=function(a){var b=this._splitId(a);jQuery.post("/message/remove/",{ids:b.id},function(a){a.success&&jQuery("#message-"+b.id).hide()})};
EbaumInbox.prototype.bulkRemove=function(a){this._splitId(a);ids="";jQuery("input:checkbox:checked").each(function(){ids+=jQuery(this).val()+","});jQuery.post("/message/remove/",{ids:ids},function(a){if(a.success){idArray=ids.split(",");for(var a=0,c=idArray.length;a<c;a++)jQuery("#message-"+idArray[a]).hide()}})};
EbaumInbox.prototype.bulkMarkRead=function(a){this._splitId(a);ids="";jQuery("input:checkbox:checked").each(function(){ids+=jQuery(this).val()+","});jQuery.post("/message/markread/",{ids:ids},function(a){a.success&&jQuery(".unread").removeClass("unread")})};EbaumInbox.prototype.markRead=function(a){var b=this._splitId(a);jQuery.get("/message/markread/?ids="+b.id,function(a){a.success&&(jQuery("#message-"+b.id).removeClass("unread"),jQuery("#message-"+b.id+" #markRead-"+b.id).hide())})};
EbaumInbox.prototype.markAllRead=function(a){this._splitId(a);jQuery.get("/message/markread/",function(a){a.success&&jQuery(".unread").removeClass("unread")})};EbaumInbox.prototype.markSpam=function(a){var b=this._splitId(a);jQuery.get("/message/markspam/"+b.id+"/",function(a){a.success&&jQuery("#message-"+b.id).hide()})};
EbaumInbox.prototype.acceptCreator=function(a){var b=a.id.split("-");jQuery("#message-"+b[1]).hasClass("unread")&&this.markRead(a);jQuery.get("/producer/confirm/",function(b){b.success?(jQuery("#"+a.id).html("Confirmed"),jQuery("#"+a.id).addClass("confirmed")):populateModal("<h1>Error</h1> Your status could not be confirmed at this time.")})};
EbaumInbox.prototype.confirmBuddy=function(a){var b=a.id.split("-"),c="/user/confirmbuddy/"+b[2]+"/";jQuery("#message-"+b[1]).hasClass("unread")&&this.markRead(a);jQuery.get(c,function(b){b.success?jQuery("#"+a.id).html("Confirmed"):(jQuery("#"+a.id).html("Error"),populateModal("<h1>Error</h1>"+b.error))})};EbaumInbox.prototype.addBuddy=function(a){var b=this._splitId(a),c="/user/addbuddy/"+b.id+"/";jQuery("#message-"+b.id).hasClass("unread")&&this.markRead(a);jQuery.get(c,function(){})};
EbaumInbox.prototype.blockUser=function(a){a="/user/blockuser/"+this._splitId(a).id+"/";jQuery.get(a,function(){})};EbaumInbox.prototype._splitId=function(a){a=a.id.split("-");return{type:a[0],id:a[1]}};EbaumUpload.prototype=new EmuseEvent;EbaumUpload.constructor=EbaumUpload;
function EbaumUpload(a,b){this._container=a;this._form=document.getElementById(b.formId);this._locked=!1;this._fileUploadLimit=1;this._multipleFiles=!1;this._mediaType=b.mediaType;this._adminHtml=b.adminHtml;this._contentType="file";this._numUploadedFiles=this._blogEditor=0;this._sid=b.sid;this._ip=b.ip;this._legacyFiles=this._errorCount=this._previousErrors=0;this._uploader=null;this._container.onclick=this.bind(this.handleClick)}
EbaumUpload.prototype.submit=function(){jQuery(".error").html("");var a=jQuery("#uploadForm").serialize();"blog"==this._mediaType&&(this._adminHtml?a+="&blog_body2="+tinyMCE.activeEditor.getContent():(question=(new nicEditors.findEditor("blogBody")).getContent(),a+="&blog_body2="+question));jQuery("#submitErrors").html('<br /><div class="modalLoader"></div>');jQuery.post("/upload/",a,function(a){if(a.success)window.scrollTo(0,0),jQuery("#uploadContainer").html(a.message);else if(jQuery("#submitErrors").html(a.error),
a.data){var c=a.data.errors;if(c.length){var d="";for(x in c)d+=c[x]+"<br />";jQuery("#submitErrors").html(d)}a=a.data.fieldErrors;for(x in a)jQuery("#"+x+"Error").html(a[x])}})};
EbaumUpload.prototype.handleClick=function(a){var a=a||window.event,a=a.target||a.srcElement,b=a.id.split("-"),c=b[1];switch(b[0]){case "uploadMedia":this._locked||(this._mediaType=c,this.buildForm());break;case "girlCheckBox":this._locked||this.lockForm();5!=jQuery("#moderateCode").val()?(jQuery("#moderateCode").val(5),jQuery("#"+a.id).addClass("checked"),jQuery("#matureCheckBox").removeClass("checked")):(jQuery("#moderateCode").attr("value",""),jQuery("#girlCheckBox").removeClass("checked"));break;
case "matureCheckBox":this._locked||this.lockForm();7!=jQuery("#moderateCode").val()?(jQuery("#moderateCode").val(7),jQuery("#"+a.id).addClass("checked"),jQuery("#girlCheckBox").removeClass("checked")):(jQuery("#moderateCode").attr("value",""),jQuery("#"+a.id).removeClass("checked"));break;case "termsCheckBox":this._locked||this.lockForm();jQuery("#terms-check").val()?(jQuery("#terms-check").val(""),jQuery("#"+a.id).removeClass("checked"),jQuery("#submitBtn").attr("disabled",!0)):(jQuery("#terms-check").val(this._ip),
jQuery("#"+a.id).addClass("checked"),jQuery("#submitBtn").attr("disabled",!1));break;case "input":this._locked||this.lockForm();jQuery(".uploadLabel").removeClass("inputFocus");jQuery("#"+c+"Box .uploadLabel").addClass("inputFocus");break;case "clearBtn":var d=this;jQuery.get("/upload/clear/",function(a){a.success&&(d._numUploadedFiles=0,d._legacyFiles=0,jQuery("#fileList ul").html(""),jQuery("#errorBox").html("").hide(),d.initUploader())});break;case "editLink":jQuery(".jqContent").load("/user/editupload/"+
c);break;default:jQuery(".uploadLabel").removeClass("inputFocus")}"blog"==this._mediaType&&jQuery(".nicEdit-main").hasClass("nicEdit-selected")&&(jQuery(".uploadLabel").removeClass("inputFocus"),jQuery("#blogBody .uploadLabel").addClass("inputFocus"))};EbaumUpload.prototype.lockForm=function(){this._locked=!0;jQuery(".mediaSelect li").addClass("disabled");jQuery(".mediaSelect ."+this._mediaType).removeClass("disabled").addClass("selected")};
EbaumUpload.prototype.buildForm=function(){jQuery(".mediaSelect li").removeClass("selected");jQuery(".mediaSelect ."+this._mediaType).addClass("selected");var a="";jQuery("#multipleNote").hide();switch(this._mediaType){case "audio":a="n Audio";break;case "flash":a="n Animation";break;case "gallery":a=" Gallery";jQuery("#multipleNote").show();this._mediaType="picture";this._multipleFiles=!0;this._fileUploadLimit=32;break;default:title=this._mediaType[0].toUpperCase()+this._mediaType.slice(1),a=" "+
title}this._form.reset();jQuery("#hiddenMediaType").val(this._mediaType);jQuery("#fileBoxWrapper").hide();jQuery("#uploadTitleType").html(a);jQuery("#uploadFormContainer").show();jQuery("#youTubeLink").hide();"blog"==this._mediaType?(jQuery("#descriptionBody").hide(),jQuery("#descriptionLabel").html("Body"),jQuery("#blogHolder").show(),this._blogEditor||(this._adminHtml?(jQuery("textarea.tinymce").tinymce({script_url:"/js/tinymce/tiny_mce.js"}),this._blogEditor=1):(this._blogEditor=(new nicEditor({buttonList:"bold italic underline image embed xhtml".split(" "),
maxHeight:408})).setPanel("editTool"),this._blogEditor.addInstance("blogBody")))):(jQuery("#descriptionBody").show(),jQuery("#blogHolder").hide(),"joke"!=this._mediaType?(this.initUploader(),jQuery("#fileBoxWrapper").show(),jQuery("#descriptionLabel").html("Description"),jQuery("#input-description").attr("maxlength",350),"video"==this._mediaType&&jQuery("#youTubeLink").show()):(jQuery("#descriptionLabel").html("Joke"),jQuery("#input-description").removeAttr("maxlength")))};
EbaumUpload.prototype.initUploader=function(){switch(this._mediaType){case "audio":this._allowedDescription="MP3 Audio Files";this._allowedTypes="*.mp3";this._sizeLimit="10 MB";break;case "game":case "flash":case "soundboard":this._allowedDescription="Flash Files";this._allowedTypes="*.swf";this._sizeLimit="150 MB";break;case "picture":this._allowedDescription="Image Files";this._allowedTypes="*.jpg; *.jpeg; *.gif; *.png";this._sizeLimit="3 MB";break;case "video":this._allowedDescription="Video Files";
this._allowedTypes="*.flv; *.avi; *.wmv; *.mpg; *.mpeg; *.mov; *.mp4; *.m4v";this._sizeLimit="150 MB";break;default:this._alloweDescription="None",this._allowedTypes="none",this._sizeLimit=0}jQuery("span#sizeLimit").html(this._sizeLimit);jQuery('object[id^="SWFUpload_"]').remove();jQuery("#uploadBox").prepend('<span id="spanButtonPlaceHolder"></span>');var a=this;this._uploader=this.uploadMedia=new SWFUpload({upload_url:"/upload/sendfiles/"+this._mediaType+"/?PHPSESSID="+jQuery("#SID").html(),file_queue_error_handler:function(a,
c,d){jQuery("#errorBox").show();a?jQuery("#errorBox").append('Error queueing: <span style="color:#f4f5f8; margin-right:0px;">'+a.name+"</span>&nbsp;"+d+"<br/ >"):jQuery("#errorBox").append("Error queueing: You are only allowed up upload 32 images to one gallery. <br />")},file_dialog_start_handler:function(){a._locked||a.lockForm();jQuery("#errorBox").html("");jQuery("#errorBox").hide()},file_dialog_complete_handler:function(b){0<b&&(jQuery("#clearBtn").attr("disabled","true"),1>this.getStats().files_queued&&
jQuery("#clearBtn").removeAttr("disabled"),a._errorCount=this.getStats().queue_errors,a._errorCount-=a._previousErrors,a._numUploadedFiles=b-a._errorCount,0<a._legacyFiles?(a._numUploadedFiles+=a._legacyFiles,32<a._numUploadedFiles||(jQuery("#numTotal").html(" of "+a._numUploadedFiles),jQuery("#numUploaded").html(a._legacyFiles+1+"&nbsp;"))):this._multipleFiles&&(jQuery("#galleryProgress").show(),jQuery(".currentUpload div.progress").css({width:"1px"}),jQuery("#numUploaded").html("1 &nbsp;"),jQuery("#numTotal").html(" of "+
a._numUploadedFiles),"gallery"!=a._mediaType&&(this.disabled=!0)),this.startUpload())},upload_progress_handler:function(b,c){percent=1<a._numUploadedFiles?Math.ceil(100*(this.getStats().successful_uploads/a._numUploadedFiles)):Math.ceil(100*(c/b.size));100==percent?(jQuery(".currentUpload div.progress_text").html('<img width="20" height="20"src="http://media.ebaumsworld.com/img/modalLoader.gif" />'),jQuery(".currentUpload div.progress").css({width:"230px"})):(a._multipleFiles?jQuery(".currentUpload div.progress_text").html('<img width="20" height="20"src="http://media.ebaumsworld.com/img/modalLoader.gif" />'):
jQuery(".currentUpload div.progress_text").html("<span>"+percent+"%</span>"),jQuery(".currentUpload div.progress").css({width:percent+"%"}))},upload_start_handler:function(a){jQuery(".uploadingList").html('<li class="currentUpload upload_cont"><div class="filename">'+a.name+'</div><div class="outer_progress"><div class="progress"></div></div><div class="progress_text"></div></li>');return!0},upload_error_handler:function(a,c,d){jQuery("#errorBox").html("Error uploading media file: "+d+" ("+c+")");
jQuery("#errorBox").show()},upload_success_handler:function(b,c){json=eval("("+c+")");json.error?(jQuery("li.currentUpload").remove(),jQuery("#errorBox").html(json.error),jQuery("#errorBox").show()):(jQuery(".currentUpload div.progress_text").html("<span>Complete</span>"),a._locked=!0,jQuery(".currentUpload div.progress").css({width:"230px"}),jQuery(".currentUpload div.outer_progress").css({background:"#F1CE15",width:"230px"}));jQuery(".currentUpload").removeClass("currentUpload")},upload_complete_handler:function(){0<
this.getStats().files_queued?(!0==a._multipleFiles&&(jQuery("#numUploaded").html(this.getStats().successful_uploads+1+"&nbsp;"),jQuery("#numTotal").html(" of "+a._numUploadedFiles)),this.startUpload()):(a._multipleFiles?(a._legacyFiles=a._numUploadedFiles,a._previousErrors=this.getStats().queue_errors):jQuery(".uploader .swfupload").hide(),jQuery("#submitBtn").show(),jQuery("#clearBtn").removeAttr("disabled"))},file_queued_handler:function(){},flash_url:"/js/swfupload/swfupload_f10.swf?3433",flash9_url:"/js/swfupload/swfupload_f9.swf",
file_size_limit:this._sizeLimit,file_types:this._allowedTypes,file_types_description:this._allowedDescription,file_upload_limit:this._fileUploadLimit,file_queue_limit:this._fileUploadLimit,debug:!1,button_placeholder_id:"spanButtonPlaceHolder",button_image_url:"http://images.ebaumsworld.com/img/uploadBtn.png",button_width:110,button_height:36,button_text:"",button_text_style:".btnText { font-family: Arial; }",button_text_left_padding:0,button_text_top_padding:0,button_action:this._multipleFiles?SWFUpload.BUTTON_ACTION.SELECT_FILES:
SWFUpload.BUTTON_ACTION.SELECT_FILE,button_disable:!1,button_window_mode:"transparent"})};function EmuseEvent(){this._listeners={}}EmuseEvent.prototype.addListener=function(a,b){"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]);this._listeners[a].push(b)};EmuseEvent.prototype.removeListener=function(a,b){if(this._listeners[a]instanceof Array)for(var c=this._listeners[a],d=0,f=c.length;d<f;d++)if(c[d]===b){c.splice(d,1);break}};
EmuseEvent.prototype.fire=function(a){"string"==typeof a&&(a={type:a});a.target||(a.target=this);if(!a.type)throw Error("Event object missing 'type' property.");if(this._listeners[a.type]instanceof Array)for(var b=this._listeners[a.type],c=0,d=b.length;c<d;c++)b[c].call(this,a)};EmuseEvent.prototype.relay=function(a,b){if(void 0==b)throw Error("No target passed to relay");"string"==typeof a&&(a={type:a});a.target=b;this.fire(a)};
EmuseEvent.prototype.bind=function(a){var b=this;return function(c){a.call(b,c)}};var EbaumUser={username:null,init:function(a){this.username=a},buddyListInit:function(){jQuery("#buddyList").load("/user/buddies/"+this.username+"/")},triggerMenu:function(a,b){jQuery("#"+b).is(":visible")?jQuery("#"+b).hide():(jQuery("#"+b).load("/user/menu/"+a+"/"),jQuery("#"+b).show())},subscriptionListInit:function(){jQuery("#subscriptionList").load("/user/subscriptions/"+this.username+"/")},editBuddies:function(){jQuery("#buddyList img, #editBuddies").unbind("click");jQuery("#editBuddies").css({"background-position":"0 -80px"});
jQuery("#editBuddies").removeAttr("onclick");jQuery("#editBuddies").bind("click",function(){EbaumUser.cancelEditBuddies();return!1});jQuery("#editMessage").slideDown("fast");jQuery("#buddyList img").click(function(){var a=jQuery(this).attr("id").split("-")[1];confirm("Do you really want to remove "+a+" from your buddy list?")&&EbaumUser.removeBuddy(a);return!1})},cancelEditBuddies:function(){jQuery("#buddyList img, #editBuddies").unbind("click");jQuery("#editBuddies").css({"background-position":"0 -60px"}).click(function(){EbaumUser.editBuddies();
return!1});jQuery("#editMessage").slideUp("fast");jQuery("#buddyList img").click(function(){return!0})},editSubscriptions:function(){jQuery("#editSubscriptions").removeAttr("onclick");jQuery("#editSubscriptions").css({"background-position":"0 -80px"});jQuery("#editSubscriptions").click(function(){EbaumUser.cancelEditSubscriptions();return!1});jQuery("#subscriptionList").load("/user/editsubscription/")},editSubscriptionsSubmit:function(){data=jQuery("#editSubscriptionForm").serialize();jQuery(".error").html("");
jQuery.post(jQuery("#editSubscriptionForm").attr("action"),data,function(a){if(a.success)jQuery("#editSubscriptionForm").html("Your changes were successfully saved.");else if(a.error){for(err in a.error)for(e in a.error[err])jQuery("#subMessage").append(a.error[err][e]);jQuery("#subMessage").show()}});return!1},cancelEditSubscriptions:function(){jQuery("#editSubscriptions").unbind("click");jQuery("#subMessage").html("").hide();jQuery("#editSubscriptions").css({"background-position":"0 -60px"});jQuery("#editSubscriptions").attr({src:"/img/edit.png",
title:"Edit"}).click(function(){EbaumUser.editSubscriptions();return!1});jQuery("#subscriptionList").load("/user/subscriptions/"+this.username+"/")},removeSubscription:function(){return confirm("Are you sure you would like to unsubscribe from that user?")?(subId=jQuery(this).attr("id"),jQuery.getJSON("/user/removesubscription/"+subId+"/",function(a){a.success?jQuery("tr#deleteSub-"+subId).remove():jQuery("#subMessage").html(a.error).show()}),!0):!1},addBuddy:function(a){jQuery.get("/user/addbuddy/"+
a+"/",function(a){a.success?populateModal("The user was added to your buddylist"):populateModal(a.error)})},confirmBuddy:function(a,b){jQuery.get("/user/confirmbuddy/"+a+"/",function(a){a.success?(populateModal("You have accepted the buddy request."),inboxAction("markread","",b.parents("ul.msgListItem").attr("id"),location.href),jQuery(b).remove()):populateModal(a.error)})},removeBuddy:function(a){jQuery.get("/user/removebuddy/"+a+"/",function(b){b.success?(populateModal("The user was removed from your buddylist"),
jQuery("#buddy-"+a).parent().parent().parent().remove()):populateModal(b.error)})},blockUser:function(a){jQuery.get("/user/blockuser/"+a+"/",function(a){a.success?populateModal("The user was added to your blocklist. To remove a user from you block list visit the 'Edit Profile' section."):populateModal(a.error)})},subscribe:function(){this.username?jQuery.get("/user/subscribe/"+this.username+"/",function(a){a=a.success?'<img src="http://images.ebaumsworld.com/img/accept.png"height="16" width="16" /> <span style="color:#369;">Subscribed!</span>':
a.error;jQuery("#subscribeInfo").html(a)}):(jQuery("#jqModal").jqm({ajax:"/user/login/"}),jQuery("#jqModal").jqmShow())},unblockUser:function(a){jQuery.get("/user/unblockuser/"+a+"/",function(b){b.success?jQuery("#block-"+a).remove():populateModal(b.error)})},profileWriteMessage:function(a){if(!a)return jQuery("#jqModal").jqm({ajax:"/user/login/"}),jQuery("#jqModal").jqmShow(),!1;jQuery("#profileWriteTrigger").hide();jQuery("#writeProfileMessage").slideDown("slow")},profileShowcaseInit:function(){jQuery("#showcasedMedia").load("/user/showcase/"+
this.username+"/")},profileMessageInit:function(){jQuery("#messageList").load("/user/message/"+this.username+"/")},profileActivityInit:function(){jQuery("#activityList").load("/user/activity/"+this.username+"/")},pageProfileMessage:function(a,b){jQuery("#messageList").load("/user/message/"+a+"/?page="+b)},removeMessage:function(a){jQuery.get("/message/remove/?ids="+a,function(b){b.success?jQuery("#message-"+a).remove():populateModal("<h1>ALERT</h1>Message failed to delete.")})},removeComment:function(a){confirm("Do you really want to remove this comment from your list?")&&
jQuery.get("/user/removecomment/"+a+"/",function(b){b.success?jQuery("#comment-"+a).remove():populateModal("<h1>ALERT</h1>Message failed to delete.")});return!1},setAvatar:function(a,b){data={userId:a,avatarId:b};jQuery.post("/user/changeavatar/",data,function(a){a.success?(jQuery(".currentAvatar img").attr("src",a.data.path),jQuery("#avatarInfo img").attr("src",a.data.path),jQuery(".historyAvatar").removeClass("selectedAvatar"),jQuery("#"+b).addClass("selectedAvatar")):(jQuery(".error").html(a.error),
jQuery(".error").show())})},removeAvatar:function(a,b){data={userId:a,avatarId:b};jQuery.post("/user/removeavatar/",data,function(a){a.success?(jQuery("#"+b).parent().hide(),a.data&&(newImg=jQuery('.historyAvatar img[src="http://images.ebaumsworld.com'+a.data.avatar_path+'"]'),jQuery(newImg).parent().addClass("selectedAvatar"),jQuery(".currentAvatar img").attr("src",a.data.path),jQuery("#avatarinfo img").attr("src",a.data.path),jQuery("#profileAvatar img").attr("src",a.data.path))):(jQuery(".error").html(a.error),
jQuery(".error").show())})},confirmCode:function(){if(""==jQuery("#input-code").val())return alert("Please enter a code."),!1;document.confirmcode.submit()},resendCode:function(){jQuery("#sendcode").attr("disabled","disabled");return!0},confirmEmail:function(){if(""==jQuery("#input-email").val())return alert("Please enter a new e-mail address."),!1;document.updateemail.submit()},profileEditInit:function(a){jQuery(".jqmWindow").css({position:"absolute"});jQuery(".jqmOverlay").unbind();jQuery("input[name=user_email]").blur(function(){value=
jQuery("input[name=user_email]").val();jQuery.getJSON("/user/checkavailable/",{type:"email",value:value},function(a){a.success||(alert("Email address already in use.  Please choose a different email address"),jQuery("input[name=user_email]").select())})});this.initAvatarUpload("/user/uploadavatar/?PHPSESSID="+a,"Avatar")},profileEditSubmit:function(){data=jQuery("#editProfileForm").serialize();jQuery(".error").html("");jQuery.post(jQuery("#editProfileForm").attr("action"),data,function(a){if(a.success)window.location.reload();
else if(a.error){for(err in a.error)for(e in a.error[err])jQuery("#"+err+"Error").append(a.error[err][e]);jQuery("#"+err+"Error").show()}});return!1},initAvatarUpload:function(a,b){uploadAvatar=new SWFUpload({upload_url:a,file_queue_error_handler:function(a,b,f){alert("Error queueing file for upload: "+f)},file_dialog_complete_handler:function(a){0<a&&this.startUpload()},upload_progress_handler:function(a,d){percent=Math.ceil(100*(d/a.size));jQuery("#"+b+" .uploadStatus").html("Uploading ... "+percent+
"% Complete");percent=Math.ceil(100*(d/a.size));100==percent?(jQuery(".currentUpload div.progress_text").html('<img width="20" height="20"src="http://media.ebaumsworld.com/img/modalLoader.gif" />'),jQuery(".currentUpload div.progress").css({width:"230px"})):(jQuery(".currentUpload div.progress_text").html("<span>"+percent+"%</span>"),jQuery(".currentUpload div.progress").css({width:percent+"%"}))},upload_start_handler:function(a){jQuery(".uploadingList").html('<li class="currentUpload upload_cont"><div class="filename">'+
a.name+'</div><div class="outer_progress"><div class="progress"></div></div><div class="progress_text"></div></li>');return!0},upload_error_handler:function(a,b,f){jQuery("#errorBox").html("Error uploading media file: "+f+" ("+b+")");jQuery("#errorBox").show()},upload_success_handler:function(a,d){resp=eval("("+d+")");!1==resp.success?(jQuery("li.currentUpload").remove(),jQuery("#errorBox").html(resp.error),jQuery("#errorBox").show()):(jQuery(".currentUpload div.progress").css({width:"230px"}),jQuery(".currentUpload div.outer_progress").css({background:"#F1CE15",
width:"230px"}),jQuery("#current"+b).attr("src","http://images.ebaumsworld.com"+resp.data.path));jQuery(".currentUpload").removeClass("currentUpload")},upload_complete_handler:function(){0<this.getStats().files_queued?this.startUpload():(jQuery("#"+b+" .uploadBtn").show(),jQuery("#"+b+" .uploadStatus").html("<strong>Upload Complete</strong>"))},flash_url:"/js/swfupload/swfupload_f10.swf",file_size_limit:50,file_types:"*.jpeg; *.jpg; *.gif;",file_upload_limit:1,file_queue_limit:1,debug:!1,button_placeholder_id:"spanButtonPlaceHolder",
button_image_url:"http://images.ebaumsworld.com/img/uploadBtn.png",button_width:110,button_height:36,button_text:"",button_text_style:".btnText { font-family: Arial; }",button_text_left_padding:0,button_text_top_padding:0,button_action:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_disable:!1,button_window_mode:"transparent"});jQuery("#"+b+" .uploader").html("");jQuery("#"+b+" .uploader").append('<div class="uploadContainer" style="float:left;">');jQuery("#"+b+" .uploader").append('<span class="uploadStatus"></span>');
jQuery("#"+b+" .uploader").append('<div class="uploadFileList"><ul></ul></div>');jQuery("#"+b+" .uploader").append("</div>")},signupEnable:function(a){if(""==a.value)return!1;"disabled"==jQuery("uploadBtn").attr("disabled")&&jQuery("uploadBtn").attr("disabled",!1);!1==jQuery("termscheck").checked&&jQuery("uploadBtn").attr("disabled","disabled");return!0},signupInit:function(){jQuery("form[name=register]").submit(function(){jQuery("input[class=required]").each(function(){if(0==jQuery.trim(this.value).length)return alert("Please enter all required fields."),
jQuery("input[class=required]").each(function(){""==this.value&&jQuery(this).css({backgroundColor:"yellow"})}),!1});if(jQuery("input[name=password]").val()!=jQuery("input[name=verify_password]").val())return alert("Passwords do not match."),!1;if(1>jQuery("input[name=gender]:checked").length)return alert("Please select your gender."),!1});jQuery("input[name=username]").blur(function(){var a=jQuery("input[name=username]").val();jQuery.getJSON("/user/checkavailable/",{type:"username",value:a},function(a){a.success||
(alert("Username already in use.  Please choose a different username."),jQuery("input[name=username]").select())})});jQuery("input[name=email]").blur(function(){if(""!=jQuery("input[name=email]").val()){var a=jQuery("input[name=email]").val();jQuery.getJSON("/user/checkavailable/",{type:"email",value:a},function(a){a.success||(alert("Email address already in use.  Please choose a different email address"),jQuery("input[name=email]").select())})}})}},EbaumProfileFlash={removeRefresh:function(){jQuery("#reloadFlash").remove()},
loadFlash:function(a,b,c){jQuery("#flashContainer").html('<div id="flashObject"></div>');params={menu:!1};swfobject.embedSWF("http://media.ebaumsworld.com"+c,"flashObject",a,b,"9",!1,!1,params);swfobject.addLoadEvent();jQuery(".jqmWindow").css({position:"absolute"});this.removeRefresh()},loadMedia:function(a){0!=jQuery("#iPhoneUserCol").length?populateModal("<div style='font-size:22px; font-weight:bold;'>The pageyou requested is not supported on this device.</div>"):(jQuery("#jqModal").jqm({ajax:"/user/showcaseenlarge/"+
a+"/"}),jQuery("#jqModal").jqmShow())}},EbaumUserMedia={init:function(a,b){jQuery(".jqmWindow").css({position:"absolute"});jQuery(".jqmOverlay").unbind();this.uploadThumbInit("/upload/sendfiles/picture/?media="+a+"&PHPSESSID="+b,"thumbnailUploadInfo")},submit:function(a){"blog"==a&&jQuery("#blogBody").html(tinyMCE.activeEditor.getContent());return!0},remove:function(a,b){confirm("Do you really want to remove this item for your "+b+"?")&&jQuery.get("/user/remove"+b+"/"+a+"/",function(c){c.success?
jQuery("#media-"+a).remove():c.error?populateModal("<h1>ALERT</h1>"+c.error+"."):populateModal("<h1>ALERT</h1>"+b+" failed to delete.")});return!1},setNewThumb:function(){jQuery("img.gallerySelectedThumb").removeClass("gallerySelectedThumb");jQuery("a.gallerySelectedThumb").attr("class","");jQuery("a[name=clicked] img").addClass("gallerySelectedThumb");jQuery("#currentThumb").attr("src",jQuery("a[name=clicked] img").attr("src"));jQuery("#thumb_path").attr("value",jQuery("a[name=clicked] img").attr("src"));
fullId=jQuery("a[name=clicked] img").attr("id");parts=fullId.split("-");jQuery("#thumbId").attr("value",parts[1]);jQuery("a[name=clicked]").attr("name","")},uploadThumbInit:function(a,b){uploadThumb=new SWFUpload({upload_url:a,file_queue_error_handler:function(a,b,f){alert("Error queueing file for upload: "+f)},file_dialog_complete_handler:function(a){0<a&&this.startUpload()},upload_progress_handler:function(a,d){jQuery(".commitChangesBtn").attr("disabled",!0);percent=Math.ceil(100*(d/a.size));jQuery("#"+
b+" .uploadStatus").html("Uploading ... "+percent+"% Complete");100==percent&&jQuery("#"+b+" .uploadStatus").html('<img width="20" height="20"src="http://media.ebaumsworld.com/img/modalLoader.gif" />')},upload_error_handler:function(a,b,f){alert("Error uploading media file: "+f+" ("+b+")")},upload_success_handler:function(a,d){jQuery(".commitChangesBtn").attr("disabled",!1);json=eval("("+d+")");json.error?(jQuery("li.currentUpload").remove(),uploadMediaType(uploadType,multipleFiles),jQuery("#errorBox").html(json.error),
jQuery("#errorBox").show()):(jQuery("object.swfupload").hide(),jQuery("#"+b+" .uploadFileList ul").append("<li>"+a.name+"</li>"),jQuery("#currentThumb").attr("src",json.data.thumbnail+".jpg"))},upload_complete_handler:function(){0<this.getStats().files_queued?this.startUpload():(jQuery("#"+b+" .uploadBtn").show(),jQuery("#"+b+" .uploadStatus").html("<strong>Upload Complete</strong>"),jQuery("#submitThumb").css({display:"inline"}),setTimeout(function(){jQuery("#"+b+" .uploadStatus").fadeOut()},3E3))},
flash_url:"/js/swfupload/swfupload_f10.swf",file_size_limit:"3MB",file_types:"*.jpeg; *.jpg; *.gif; *.png;",file_upload_limit:1,file_queue_limit:1,debug:!1,button_placeholder_id:"spanButtonPlaceHolder",button_image_url:"http://images.ebaumsworld.com/img/uploadBtn.png",button_width:110,button_height:36,button_text:"",button_text_style:".btnText { font-family: Arial; }",button_text_left_padding:0,button_text_top_padding:0,button_action:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_disable:!1,button_window_mode:"transparent"});
jQuery("#thumbnailUploadInfo .uploader").html('<div id="thumnailSizeLimit" style="margin-bottom:9px;">Size Limit: 3MB</div>');jQuery("#thumbnailUploadInfo .uploader").append('<div class="uploadContainer" style="float:left;">');jQuery("#thumbnailUploadInfo .uploader").append('<span class="uploadStatus"></span>');jQuery("#thumbnailUploadInfo .uploader").append('<div class="uploadFileList"><ul></ul></div>');jQuery("#thumbnailUploadInfo .uploader").append("</div>")}};var CommentEvent={ADD:"add",ADD_REPLY:"add_reply",ADD_COMPLETE:"add_complete"};EbaumComment.prototype=new EmuseEvent;EbaumComment.constructor=EbaumComment;
function EbaumComment(a,b,c){this._authenticated=c;this._id=b;this._container=a;this._listPage=1;this._timeoutId=void 0;this._processing=0;this._sort=void 0;this._commentId=!1;this._container.onclick=this.bind(this.handleClick);this._container.onchange=this.bind(this.handleChange);this.addListener(CommentEvent.ADD,this.addHandler);this.addListener(CommentEvent.ADD_REPLY,this.addReplyHandler);this.addListener(CommentEvent.ADD_COMPLETE,this.page);(this._commentId=this.getCommentIdFromUrl())?this._listPage=
this.getCommentPage(this._commentId):this.load(this._listPage)}
EbaumComment.prototype.handleClick=function(a){var a=a||window.event,a=a.target||a.srcElement,b=a.id.split("-"),c=b[1];switch(b[0]){case "addComment":this.relay(CommentEvent.ADD,a);break;case "addReply":this.relay(CommentEvent.ADD_REPLY,a);break;case "reply":this.replyBtn(c);break;case "ban":this.banBtn(a);break;case "confirmBan":this.confirmBan(a);break;case "delete":this.deleteBtn(a);break;case "addCommentText":"Add your comment here. 300 character Max."==jQuery(a).val()&&this.clearInput(a);break;
case "commentReplyText":"Add your reply here. 300 character Max."==jQuery(a).val()&&this.clearInput(a);break;case "commentRefresh":this.refreshComments();break;case "rateUp":this.rateComment(c,1);break;case "rateDown":this.rateComment(c,-1);break;case "watch":this.watchComment(a);break;case "commentSortInfo":jQuery("#jqModal").jqm({ajax:"/comment/explain/"});jQuery("#jqModal").jqmShow();break;case "sort":this.sortList(c,this._page),document.getElementById("sortDropLabel").innerHTML=a.innerHTML}};
EbaumComment.prototype.handleChange=function(a){a=a||window.event;switch((a.target||a.srcElement).id.split("-")[0]){case "sortBySelect":this.sortList(jQuery("#sortBySelect option:selected").val(),this._page)}};
EbaumComment.prototype.rateComment=function(a,b){if(!this._authenticated)return this.promptLogin(),!1;jQuery.post("/comment/rate/",{commentId:a,rating:b},function(c){c.success?(c=parseInt(jQuery("#commentRating-"+a).html().replace(/\s*/g,"")),1==b?(c++,0<=c&&jQuery("#commentRating-"+a).removeClass("negative"),jQuery("#rateUp-"+a).addClass("rated"),jQuery("#rateDown-"+a).fadeOut("fast")):(c--,0>c&&jQuery("#commentRating-"+a).addClass("negative"),jQuery("#rateDown-"+a).addClass("rated"),jQuery("#rateUp-"+
a).fadeOut("fast")),jQuery("#commentRating-"+a).html(" "+c)):(jQuery("#rateUp-"+a).attr("background","url('http://media.ebaumsworld.com/img/exclamation.png') 0 0 no-repeat"),jQuery("#rateDown-"+a).fadeOut("fast"))})};
EbaumComment.prototype.load=function(a){"number"!=typeof a&&(a=this._listPage);var b=this;jQuery("#commentListHolder").load("/comment/list/"+this._id+"/?page="+a,function(){if(b._commentId){var a=jQuery("#comment-"+b._commentId).offset();b._commentId&&a&&(jQuery("html,body").animate({scrollTop:a.top},500),jQuery("#comment-"+b._commentId).css({"background-color":"#f4f5f8"}))}})};
EbaumComment.prototype.getCommentIdFromUrl=function(){var a=location.href.match(/#comment-([0-9]+)$/i);return a&&a[1]?a[1]:!1};EbaumComment.prototype.getCommentPage=function(a){eComment=this;jQuery.getJSON("/comment/getpage/"+a+"/",function(a){eComment._listPage=0<a.data.page?a.data.page:1;eComment.load(this._listPage)})};
EbaumComment.prototype.page=function(a){void 0!=this._id&&(isNaN(a)&&(a=1),jQuery("#commentList").html('<div class="widgetLoader"></div>'),a="/comment/list/"+this._id+"/?page="+a,void 0!=this._sort&&(a+="&sort="+this._sort),jQuery("#commentListHolder").load(a),Ebaum.ajaxRefresh(),Ebaum.updateAnalytics(a))};
EbaumComment.prototype.addHandler=function(){if(!this._authenticated)return this.promptLogin(),!1;if(0==this._processing){this._processing=1;var a=escape(jQuery("#addCommentText").val());eComment=this;jQuery.post("/comment/add/"+this._id+"/",{comment:a},function(a){if(a.success)eComment.fire(CommentEvent.ADD_COMPLETE),jQuery("#addCommentText").val("");else return jQuery("#commentError").html(a.error),eComment._processing=0,!1;eComment._processing=0;return!0})}};
EbaumComment.prototype.replyBtn=function(a){jQuery("#commentReplyForm-"+a).slideDown("fast");jQuery("#commentReplyText-"+a).focus()};
EbaumComment.prototype.addReplyHandler=function(a){if(!this._authenticated)return this.promptLogin(),!1;var b=a.target.id.split("-")[1];if(0==this._processing&&b){this._processing=1;var a=escape(jQuery("#commentReplyText-"+b).val()),c=this;jQuery.post("/comment/add/"+this._id+"/",{comment:a,parent:b},function(a){if(a.success)newId=a.data.id,c.getCommentPage(newId);else return jQuery("#replyError-"+b).html(a.error),c._processing=0,!1;c._processing=0;return!0})}};
EbaumComment.prototype.watchComment=function(a){if(!this._authenticated)return this.promptLogin(),!1;var b=this._splitId(a);jQuery.post("/comment/watch/",{id:b.id},function(a){if(a.success)jQuery("#commentWatchButton-"+b.id+" img").attr("src","http://media.ebaumsworld.com/img/tick.png");else return jQuery("#commentWatchButton-"+b.id+" img").attr("src","http://media.ebaumsworld.com/img/exclamation.png"),!1;return!0})};
EbaumComment.prototype.refreshComments=function(){jQuery("#commentRefresh").attr("disabled")||(this._sort=void 0,this.page(1),jQuery("#commentRefresh").attr("disabled","disabled"),this._timeoutId=setTimeout(this.enableRefresh,2E3))};EbaumComment.prototype.enableRefresh=function(){jQuery("#commentRefresh").removeAttr("disabled");"undefined"!=this._timeoutId&&window.clearTimeout(this._timeoutId)};EbaumComment.prototype.sortList=function(a,b){b||(b=1);this._sort=a;this.page(b)};
EbaumComment.prototype.clearInput=function(a){jQuery(a).val("")};EbaumComment.prototype.deleteBtn=function(a){var b=this._splitId(a);jQuery.post("/comment/admin/delete/",{id:b.id},function(a){a.success?jQuery("#comment-"+b.id).slideUp("slow"):jQuery("#comment-"+b.id).before(a.message);return!0})};
EbaumComment.prototype.banBtn=function(a){document.getElementById("jqModal").onclick=this.bind(this.handleClick);a=this._splitId(a);jQuery(".jqBarText").html("Comment Ban User");jQuery("#jqModal").jqm({ajax:"/comment/admin/ban/"+a.id+"/",target:".jqContent"}).jqmShow()};
EbaumComment.prototype.confirmBan=function(a){if(!jQuery("#banReason").val())return jQuery("#formError").html("You must enter a reason to ban the user."),!1;var b=this._splitId(a),a=jQuery("#commentBanForm").serialize();jQuery("#formError").html('<img src="http://media.ebaumsworld.com/img/modalLoader.gif" />');jQuery.post("/comment/admin/ban/"+b.id+"/",a,function(a){a.success?(populateModal(a.message),jQuery("img#ban-"+b.id).attr("src","http://media.ebaumsworld.com/img/tick.png"),jQuery("#comment-"+
b.id).fadeTo("slow",0.3)):populateModal(a.error)})};EbaumComment.prototype.promptLogin=function(){jQuery("#jqModal").jqm({ajax:"/user/login/"});jQuery("#jqModal").jqmShow()};EbaumComment.prototype._splitId=function(a){a=a.id.split("-");return{type:a[0],id:a[1]}};var EbaumRelatedMedia={prevPage:0,page:1,nextPage:2,prevButton:void 0,nextButton:void 0,totalCount:void 0,fadeSpeed:"fast",working:!1,init:function(){this.prevButton=jQuery("#prevRelatedMedia");this.nextButton=jQuery("#nextRelatedMedia");this.totalCount=1*jQuery("#relatedMediaCount").val();jQuery(".relatedMediaList"+this.page).fadeIn(this.fadeSpeed);4<this.totalCount?this.setNextActive():this.setNextInactive();this.setPrevInactive()},prev:function(){if(!this.working&&(this.working=!0,0<this.prevPage||
1==this.page))this.fade(this.prevPage),this.setNextActive()},next:function(){this.working||(this.working=!0,this.totalCount/4>this.page?(this.fade(this.nextPage),this.setPrevActive()):this.setNextInactive())},setPrevInactive:function(){this.prevButton.removeClass("active");this.prevButton.attr("src","http://media.ebaumsworld.com/img/arrowInactivePrevious.png");this.prevButton.unbind("click")},setPrevActive:function(){this.prevButton.addClass("active");this.prevButton.attr("src","http://media.ebaumsworld.com/img/arrowActivePrevious.png");
this.prevButton.unbind("click");this.prevButton.click(function(){EbaumRelatedMedia.prev()})},setNextInactive:function(){this.nextButton.removeClass("active");this.nextButton.attr("src","http://media.ebaumsworld.com/img/arrowInactiveNext.png");this.nextButton.unbind("click")},setNextActive:function(){this.nextButton.addClass("active");this.nextButton.attr("src","http://media.ebaumsworld.com/img/arrowActiveNext.png");this.nextButton.unbind("click");this.nextButton.click(function(){EbaumRelatedMedia.next()})},
fade:function(a){jQuery(".relatedMediaList"+this.page).fadeOut(this.fadeSpeed,function(){jQuery(".relatedMediaList"+a).fadeIn(EbaumRelatedMedia.fadeSpeed);EbaumRelatedMedia.working=!1});a>this.page?this.incrementCounts():a<this.page&&this.decrementCounts()},incrementCounts:function(){this.prevPage=this.page;this.page=this.nextPage;++this.nextPage>this.totalCount/4&&this.setNextInactive()},decrementCounts:function(){this.nextPage=this.page;this.page=this.prevPage;this.prevPage--;1==this.page&&this.setPrevInactive()}};EbaumOverlay.prototype=new EmuseEvent;EbaumOverlay.constructor=EbaumOverlay;function EbaumOverlay(a,b){this._container=a;this._authenticated=b;this._container.onclick=this.bind(this.handleClick);this._container.onmouseover=this.bind(this.handleEnter);this._container.onmouseout=this.bind(this.handleLeave)}
EbaumOverlay.prototype.handleClick=function(a){a=a||window.event;a=a.target||a.srcElement;if(a.id){var a=a.id.split("-"),b=a[1];switch(a[0]){case "hl":a=document.getElementById("hla-"+b);b="_blank"==a.target?"_blank":"_self";window.open(a.href,b);break;case "rm":a=document.getElementById("rma-"+b),b="_blank"==a.target?"_blank":"_self",window.open(a.href,b)}}};
EbaumOverlay.prototype.handleEnter=function(a){var b=a||window.event,a=b.target||b.srcElement,b=b.relatedTarget||b.fromElement,c=a.id.split("-"),c=c[0];if("overlay"!=c){for(;"overlay"!=c&&"BODY"!=a.nodeName;)a=a.parentNode,c=a.id.split("-"),c=c[0];if("overlay"==c)if(void 0===b)this.enterHandler(a);else{for(;b!=a&&"BODY"!=b.nodeName;)b=b.parentNode;b!=a&&this.enterHandler(a)}}else if(void 0===b)this.enterHandler(a);else{for(;b!=a&&"BODY"!=b.nodeName;)b=b.parentNode;b!=a&&this.enterHandler(a)}};
EbaumOverlay.prototype.handleLeave=function(a){var b=a||window.event,a=b.target||b.srcElement,b=b.relatedTarget||b.toElement,c=a.id.split("-"),c=c[0];if("overlay"!=c){for(;"overlay"!=c&&"BODY"!=a.nodeName;)a=a.parentNode,c=a.id.split("-"),c=c[0];if("overlay"==c)if(void 0===b)this.leaveHandler(a);else{for(;b!=a&&"BODY"!=b.nodeName;)b=b.parentNode;b!=a&&this.leaveHandler(a)}}else if(void 0===b)this.leaveHandler(a);else{for(;b!=a&&"BODY"!=b.nodeName;)b=b.parentNode;b!=a&&this.leaveHandler(a)}};
EbaumOverlay.prototype.enterHandler=function(a){jQuery("#"+a.id+" .overlay").show()};EbaumOverlay.prototype.leaveHandler=function(a){jQuery("#"+a.id+" .overlay").hide()};
EbaumOverlay.prototype.flagHandler=function(a){var b=a.id.split("-")[1];this._authenticated?jQuery.getJSON("/media/flag/"+b+"/",function(b){!1==b.success?(populateModal(b.message),jQuery(".jqBarText").html("Oops!")):b.message?jQuery("img#"+a.id).attr("src","/img/assets/overlayFlag.png"):jQuery("img#"+a.id).attr("src","/img/assets/overlayFlagged.png")}):(populateModal("Log in to flag this."),jQuery(".jqBarText").html("Login"))};
EbaumOverlay.prototype.likeHandler=function(a){var b=a.id.split("-")[1];this._authenticated?(jQuery.getJSON("/user/likemedia/"+b+"/",function(b){!1==b.success?(populateModal(b.message),jQuery(".jqBarText").html("Oops!")):b.message?(jQuery("img#"+a.id).attr("src","/img/assets/overlayLike.png"),jQuery("#statLikeCount").html(1*jQuery("#statLikeCount").html()-1)):(jQuery("img#"+a.id).attr("src","/img/assets/overlayLiked.png"),jQuery("#statLikeCount").html(1*jQuery("#statLikeCount").html()+1))}),jQuery("img#"+
a.id).attr("src","/img/assets/overlayLiked.png")):(populateModal("Log in to like this."),jQuery(".jqBarText").html("Login"))};
