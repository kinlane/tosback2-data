$(document).ready(function(){$("body").bind("click",function(a){a=$(a.target);!1===mobile&&(0===a.filter(".page-options").length&&0===a.parents(".page-options").length)&&$("#page-options").dialog("close")});$(window).resize(function(){resize_parallel_dropdowns()});bg.zoomFix();window.screen.deviceXDPI&&$(window).resize(function(){bg.zoomFix()});$(".passage-resources-open").click(function(a){a.preventDefault();a.stopPropagation();var b=$(this).attr("data-bg").split("#"),c="."+b[0],a=b[1],d=b[2];_gaq.push(["_trackEvent",
"sidebar","open",a.replace("Psa","Ps")]);$.ajax({url:"/exbib/contents/?osis="+a+"&class="+b[0]+"&key="+d,cache:!0,dataType:"html",success:function(a){$(".exbib-spinner"+c).hide();$(".exbib-content"+c).html(a);a=$(".heading"+c+" h3").text()+'<span class="passage-resources-close '+b[0]+'">X</span>';$(".exbib-content"+c+" .exbib-osis").html(a);exbibEntryLinks()},error:function(){},timeout:3E4});a=function(){hide_merch();$(".passage-resources-open"+c).hide();$(".passage-left"+c).animate({width:"60%"},
500,function(){$(".passage-drawer"+c).fadeIn(500);0<$(".exbib-content"+c+" .exbib-entry").length||$(".exbib-spinner"+c).show()})};0<$(".passage-parallel-new-col-remove").length?$(".passage-parallel-new-col-remove").trigger("click",a):a()});$(".passage-resources-close").live("click",function(a,b){a.preventDefault();a.stopPropagation();_gaq.push(["_trackEvent","sidebar","close"]);var c="."+$(this).attr("class").match(/passage-class-\d/)[0];$(".passage-drawer"+c).hide();0===$(".passage-drawer:visible").length&&
show_merch();var d=0===$(".passage-drawer:visible").length;$(".passage-left"+c).animate({width:"100%"},500,function(){$(".passage-resources-open"+c).show();b&&d&&b()})});$(".passage-updatetranslation select").bind("change",function(){var a,b=window.location.href.match(/^.*?version=([a-z0-9;,\-]+).*?$/i),b=b?b[1]:"";a=[];for(var c=!1,d=0;d<$(".multipassage, .passage-wrap").length&&!1===c;d++){for(var f=$("#table"+d+" .passage-updatetranslation select, .page-translation select"),g=0;g<f.length;g++)a.push($(f[g]).val());
a.join(";")!==b?c=!0:a=[]}b=RegExp("version="+b);a=window.location.href.match(/version=/i)?window.location.href.replace(b,"version="+a.join(";")):window.location.href+"&version="+a.join(";");window.location=a});$(".exbib-back-button").click(function(a){a.preventDefault();a.stopPropagation();for(var b,a=this.className.split(/\s+/),c=0;c<a.length;c++)0===a[c].indexOf("passage-class")&&(b="."+a[c]);$(".exbib-chunk"+b).fadeOut(500,function(){$(".exbib-content"+b).fadeIn(500)})});$(".passage-parallel-remove").click(function(a){a=
$(a.target).parents(".multipassage-box");if(0!==a.length&&(a=a[0].className,a=a.match(/(\w+)-col-(\d+)/),null!==a)){var a=a[2],b=get_versions_from_url();b.splice(a,1);a=window.location.search.replace(/(?:version\d?=[a-z0-9;,\-]+&?)+/i,"version="+b.join(";")+"&");a=a.replace(/&$/,"");window.location.search=a}});var b=function(){var a=$(".passage-updatetranslation").last().clone();a.addClass("passage-new-translation");var b=$('<div class="passage-parallel-tools"><span class="passage-parallel-remove passage-parallel-new-col-remove">X</span></div>'),
c=get_versions_from_url();a.bind("change",function(a){c.push($(a.target).val());a=window.location.href.match(/version\d?=/)?window.location.href.replace(/(?:version=[a-z0-9;,\-]+)|(?:version\d=[a-z0-9;,\-]+&?)+/i,"version="+c.join(";")):window.location.href+"&version="+c.join(";");window.location=a});b.bind("click",function(a,b){$(".passage-parallel-add").show();if(1===c.length)$(".new-passage-col").remove(),$(".passage-resources-open").show(),$(".passage-wrap, .passage-left").css({borderRight:"0",
paddingRight:0,marginRight:0}),$(".passage-wrap").animate({width:"100%"},500,function(){b&&b()}),show_merch();else{$(".multipassage-box.last-col").children().hide();var e=100/($("#table1 .multipassage-box").length-1)+"%";$(".multipassage-box").animate({width:e},{duration:500,step:function(){resize_parallel_dropdowns()},complete:function(){resize_parallel_dropdowns();$(".multipassage-box.new-passage-col").remove();var a=$(".multipassage-box.penultimate-col");a.addClass("last-col");a.removeClass("penultimate-col")}})}});
if(0===$(".new-passage-col").length){$(".passage-parallel-add").hide();if(1===c.length){var d=$('<div class="new-passage-col"></div>');d.append(a);d.append("<p>Choose a version from the above dropdown menu to see it in parallel.</p>");var f=function(){$(".passage-resources-open").hide();$(".passage-wrap, .passage-left").css({borderRight:"1px solid #F2B92A",paddingRight:"5px",marginRight:"10px"});hide_merch();var c=$(".passage-wrap");c.attr("data-complete",!1);c.animate({width:"50%"},500,function(){$(this).attr("data-complete",
!0);0===$('.passage-wrap[data-complete="false"]').length&&(b.insertAfter(a),d.insertAfter(".passage-wrap"));resize_parallel_dropdowns()})},g=$(".passage-resources-close:visible");0===g.length?f():g.trigger("click",f)}else if(1<c.length){var f=$(".multipassage-box"),g=100/($("#table1 .multipassage-box").length+1)+"%",i=$('<td class="multipassage-box last-col new-passage-col"></td>'),j=$(".multipassage-box.last-col");j.removeClass("last-col");j.addClass("penultimate-col");$(".multipassage-box.hidden-col");
i.appendTo(".multipassage tr");f.attr("data-complete",!1);f.animate({width:g},{duration:500,step:function(){resize_parallel_dropdowns()},complete:function(){$(this).attr("data-complete",!0);0===$('.multipassage-box[data-complete="false"]').length&&(a.appendTo(".last-col"),b.appendTo(".last-col"),$(".last-col").append("<p>Choose a version from the above dropdown menu to see it in parallel.</p>"),resize_parallel_dropdowns())}})}$(".parallel-info").show()}};$(".passage-parallel-add").bind("click",b);
$(".passage-parallel-button").bind("click",function(){var a;if(BGVersions)var c=BGVersions;else(c=window.location.href.match(/^.*?version=([a-z0-9;,\-]+).*?$/i))&&(c=c[1]);var h=!1;if(c){a=c.split(";");for(var d=0;d<a.length;d++)if("CEB"==a[d]){h=!0;break}a=a.join(";");a+=h?"":";CEB"}else a="CEB";h?b():(c=RegExp("version="+c),a=window.location.href.match(/version=/i)?window.location.href.replace(c,"version="+a):window.location.href+"&version="+a,window.location=a)});if(!1===mobile){var c=$("#page-options").dialog({resizable:!1,
autoOpen:!1,draggable:!1,dialogClass:"po-dropdown page-options"});$("input#search").autocomplete({source:function(a,b){var c=a.term.toLowerCase(),c=c.replace(/[^\w\-]/,""),c=c.replace(/\s+/," "),c=$.trim(c),d="www.biblegateway.com"===location.host||"new.biblegateway.com"===location.host?"http://static5.bgcdn.com":"http://"+location.host,f=!1;if($("body").data("no_results"))for(var g=$("body").data("no_results"),i=0;i<g.length;i++)if(RegExp(g[i],"i").test(c)){f=!0;break}!1===f&&0<c.length&&!/\w.*\d/.test(c)?
$.ajax({url:d+"/api/json/suggest.php",dataType:"jsonp",jsonpCallback:"update_suggest",cache:!0,data:{term:c,language:prefs.language},success:function(a){if(0===a.length){var d;$("body").data("no_results")?(d=$("body").data("no_results"),d.push(c)):d=[c];$("body").data("no_results",d)}b(a)}}):b([])},close:function(){}})}$("#page-options-button").bind("click",function(a){!0===c.dialog("isOpen")?c.dialog("close"):c.dialog("open");positionDialogUnder(c,a.target)});$(".po_toggle_woj").bind("click",function(a){!0===
$(a.target).is(":checked")?($(".woj").css("color","red"),setUpdatePrefs("pslookup_showwoj","yes",null)):($(".woj").css("color","#000"),setUpdatePrefs("pslookup_showwoj","no",null))});$(".po_toggle_footnotes").bind("click",function(a){for(var a=$(a.target),b=$(".footnote"),c=0;c<b.length;c++){var d=$(b[c]);!0===a.is(":checked")?d.html(d.attr("value")):d.html("")}!0===a.is(":checked")?(setUpdatePrefs("pslookup_showfootnotes","yes"),$(".footnotes").slideDown(200)):(setUpdatePrefs("pslookup_showfootnotes",
"no"),$(".footnotes").slideUp(200))});$(".po_toggle_xrefs").bind("click",function(a){for(var a=$(a.target),b=$(".xref, .crossreference"),c=0;c<b.length;c++){var d=$(b[c]);!0===a.is(":checked")?d.html(d.attr("value")):d.html("")}!0===a.is(":checked")?(setUpdatePrefs("pslookup_showxrefs","yes"),$(".crossrefs").slideDown(200)):(setUpdatePrefs("pslookup_showxrefs","no"),$(".crossrefs").slideUp(200))});$(".po_toggle_versenums").bind("click",function(a){!0===$(a.target).is(":checked")?($(".versenum, .chapternum").removeClass("hide"),
setUpdatePrefs("pslookup_showversenums","yes",null)):($(".versenum, .chapternum").addClass("hide"),setUpdatePrefs("pslookup_showversenums","no",null))});$(".po_toggle_headings").bind("click",function(a){!0===$(a.target).is(":checked")?($(".passage-header, .text-html h3").css("display","block"),setUpdatePrefs("pslookup_showheadings","yes",null)):($(".passage-header, .text-html h3").css("display","none"),setUpdatePrefs("pslookup_showheadings","no",null))});$(".po_toggle_indent").bind("click",function(a){!0===
$(a.target).is(":checked")?($(".text-html").addClass("text-indent"),setUpdatePrefs("pslookup_showindent","yes",null)):($(".text-html").removeClass("text-indent"),setUpdatePrefs("pslookup_showindent","no",null))});$(".translation-dropdown").bind("change",function(a){a=$(a.target);a.children(":selected").hasClass("spacer")?a.attr("selectedIndex",a.attr("selectedIndex")-1):a.children(":selected").hasClass("lang")&&a.attr("selectedIndex",a.attr("selectedIndex")+1)});$("#search-box .translation-dropdown").bind("change",
function(a){var b=$(a.target),a=$("#header-book-list"),b=a.attr("href").replace(/vid=[\w\-]+/,"vid="+b.val());a.attr("href",b)});$("#a9g-fixed-bottom .close-button").bind("click",function(){var a=new Date;a.setTime(a.getTime()+864E5);document.cookie="a9gb=1; expires=0; path=/";$("#a9g-fixed-bottom").hide()});$(".home-body #search").focus()});
function hide_merch(){$(".content-col").animate({marginRight:0},500);$(".content-rightcol").animate({width:"0px",marginLeft:0},500,function(){$(".content-rightcol").hide()})}function show_merch(){0<$("#merch-side").length&&($(".content-col").animate({marginRight:"230px"},500),$(".content-rightcol").show(),$(".content-rightcol").animate({width:"212px",marginLeft:"-212px"},500))}
function recordOutboundLink(b,c,a,e,h){try{_gaq.push(["_trackEvent",c,a,e,h])}catch(d){}setTimeout(function(){document.location=b.href},100)}
var embed_passage={passage:{},options:{},update_embedcode:function(){var b={"embed-versenum":!0,"embed-woj":!0,"embed-xref":!0,"embed-footnote":!0,"embed-heading":!0},c=this.options,a=document.createElement("div");$(a).html(this.passage.text);for(var e=0,h=c.length;e<h;e++){var d=$(c[e]).attr("id").substr(6);b[$(c[e]).attr("id")]=!1;switch(d){case "heading":$(":header",a).remove();break;case "footnote":case "xref":$("div."+("xref"===d?"crossrefs":d+"s"),a).remove();default:$("sup."+d,a).remove()}}$("span.woj",
a).removeAttr("style").removeAttr("class");for(e=0;e<b.length;e++)setUpdatePrefs("pslookup_"+e,b[e]);$("#embed-embed").val($(a).html());$("#embed-link").val(this.passage.url)},get_passage:function(b){$("#embed-overlay").css("display","block");$("#embed-message").hide();$.get("/api/json/embed.php",{search:b,version:embed_passage.passage.version_info.id},function(c){"ERROR"===c.text?$("#embed-message").html("<br/>"+c.error).show():(embed_passage.passage=c,embed_passage.passage_reference=b,embed_passage.update_embedcode());
$("#embed-overlay").css("display","none")},"json")},toggle:function(b){b.parent().get(0)!==$("#embed").parent().get(0)&&($("#embed").hide(),b.after($("#embed")));$("#embed").toggle();$("#embed").is(":visible")&&$(document.body).bind("click.embed",function(){$("#embed").hide();$(document.body).unbind("click.embed")})}};
function init_embed(b){embed_passage.coremetrics=b;jQuery(document).ready(function(){function b(){embed_passage.options=$("#embed input:checkbox").not(":checked");embed_passage.passage_reference=$("#embed-passage").attr("value");embed_passage.update_embedcode()}$("#result-options1").append('<li class="embed"><a href="#" onmouseover="ShowOptionInfo(\'Embed this passage\', \'Use on your site\')" onmouseout="HideOptionInfo()"><span>Embed this passage</span></a></li><li class="whats-this"><a onclick="return embed_help_window();" href="/help/embed.html" title="Embed or link to this passage on your blog or website">?</a></li>');
$("#result-options2").append('<li class="embed"><a href="#" onmouseover="ShowOptionInfo2(\'Embed this passage\', \'Use on your site\')" onmouseout="HideOptionInfo2()"><span>Embed this passage</span></a></li><li class="whats-this"><a onclick="return embed_help_window();" href="/help/embed.html" title="Embed or link to this passage on your blog or website">?</a></li>');$("#embed input:checkbox").click(b);$("#embed tr#embed-show-hide span.show-hide").click(function(){$("#embed tr.embed-options").each(function(a,
b){$(b).toggle("none"===$(b).css("display"))});$("#embed-show").each(function(a,b){$(b).toggle("none"===$(b).css("display"))});$("#embed-hide").each(function(a,b){$(b).toggle("none"===$(b).css("display"))})});$("#embed-passage").bind("blur keyup",function(a){!("keyup"===a.type&&13!==a.keyCode)&&embed_passage.passage_reference!==$("#embed-passage").attr("value")&&(embed_passage.get_passage($("#embed-passage").attr("value")),embed_passage.update_embedcode())});$("#embed").click(function(a){a.stopPropagation()});
$("li.embed a").click(function(a){a.stopPropagation();embed_passage.toggle($(this));embed_passage.coremetrics&&cmCreatePageElementTag("Embed","click");return!1});$("#embed-link, #embed-embed").bind("click",function(a){if(embed_passage.coremetrics){for(var a=$(a.target).attr("id").substr(6),b=["versenum","footnote","xref","heading"],c=0,d=embed_passage.options.length;c<d;c++)for(var f=0,g=b.length;f<g;f++)b[f]===$(embed_passage.options[c]).attr("id").substr(6)&&b.splice(f,1);0<b.length&&(a+=":"+b.join(","));
cmCreatePageElementTag("Embed",a)}$(this).select()});b()})}function embed_help_window(){window.open("/help/embed.html","BGEmbedHelp","width=400,height=500,resizeable=yes,scrollbars=yes,toolbar=no,status=yes");return!1}function redirect(b){window.location=b}
function setUpdatePrefs(b,c,a,e){prefs[b]=c;var h,d,f,g,c="";h=/^(pslookup|keysearch)_(search|version)(\d+)/;for(b in prefs)if("string"===typeof prefs[b])if(b.match(h)){var i=b.substring(0,b.length-1),j=i+"@"+prefs[b];switch(i){case "pslookup_search":f=f?f+(">"+prefs[b]):j;break;case "pslookup_version":d=d?d+(">"+prefs[b]):j;break;case "keysearch_search":c&&(c+="&");c+=i+"@"+prefs[b];break;case "keysearch_version":g=g?g+(">"+prefs[b]):j}}else c&&(c+="&"),c+=b+"@"+prefs[b];c+="&"+f+"&"+d+"&undefined&"+
g;b=new Date;b.setYear(b.getFullYear()+1);document.cookie="BG_PREFS="+c+";expires="+b.toGMTString()+"; path=/;";if(a)try{_gaq.push(a)}catch(k){}e&&setTimeout(window.location.reload,100)}
function changeFontSize(b,c,a){var e=["xsmall","small","medium","large","xlarge"],h=e.indexOf(b)+1,d=e.indexOf(c)+1;_gaq.push(["_trackEvent","font-size",d<h?"up":"down",d+"-"+h]);setUpdatePrefs("fontsize",b);window.setTimeout(function(){window.location.reload()},100);a&&cmCreatePageElementTag("Font Size",e.indexOf(c)+1+"-"+(e.indexOf(b)+1))}
function changeLanguages(b,c){_gaq.push(["_trackEvent","language",b]);setUpdatePrefs("language",b);setUpdatePrefs("keysearch_language1",b);var a=window.location.href;if(a.match("language=")){for(var e=a.split("?"),h=e[1].split("&"),d=[],f=0;f<h.length;f++)h[f].match("language=")||d.push(h[f]);a=0===d.length?e[0]:e[0]+"?"+d.join("&")}setTimeout(function(){window.location=a},100);c&&cmCreatePageElementTag("Language",b)}
function ExpandSection(b){document.getElementById(b+"-open").style.display="block";document.getElementById(b+"-closed").style.display="none";setUpdatePrefs(b,"open")}function CollapseSection(b){document.getElementById(b+"-open").style.display="none";document.getElementById(b+"-closed").style.display="block";setUpdatePrefs(b,"closed")}
function SetKeysearchWholewordsonly(b){"phrase"===b?(document.getElementById("wholewordsonly").disabled=!0,document.getElementById("wholewordsonlytext").style.color="#bbb"):(document.getElementById("wholewordsonly").disabled=!1,document.getElementById("wholewordsonlytext").style.color="#336")}
function SetKeysearchLimitoptions(b){"none"===b?($("#limit-bookset-dropdown").attr("disabled",!0),$("#limit-span-begin").attr("disabled",!0),$("#limit-span-end").attr("disabled",!0),$("#limit-none-label").css("color","#336"),$("#limit-bookset-label").css("color","#bbb"),$("#limit-span-label").css("color","#bbb")):"bookset"===b?($("#limit-bookset-dropdown").attr("disabled",!1),$("#limit-span-begin").attr("disabled",!0),$("#limit-span-end").attr("disabled",!0),$("#limit-none-label").css("color","#bbb"),
$("#limit-bookset-label").css("color","#336"),$("#limit-span-label").css("color","#bbb")):($("#limit-bookset-dropdown").attr("disabled",!0),$("#limit-span-begin").attr("disabled",!1),$("#limit-span-end").attr("disabled",!1),$("#limit-none-label").css("color","#bbb"),$("#limit-bookset-label").css("color","#bbb"),$("#limit-span-label").css("color","#336"))}
function InfoPopup(b){window.open(b,"Info","resizable=no, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, width=300, height=300");return!1}
function setLanguageOptsDisabledState(b){var c;"disabled"===b?(c="disabled",b="#ccc"):(c="",b="#336");for(var a=[],a=document.getElementsByTagName("input"),e=0;e<a.length;e++)"languageOpt"===a[e].className&&(a[e].disabled=c);c=[];c=document.getElementsByTagName("td");for(e=0;e<c.length;e++)"languageOpts"===c[e].className&&(c[e].style.color=b)}function enableOption(b){for(var c=0;c<b.length;c++)document.getElementsByID(b[c]).checked="checked"}
function init_newsletterform(){$(".newsletter-birthdate").bind("change blur",function(){var b=$("#newsletter-birthmonth").val()+"/"+$("#newsletter-birthday").val()+"/"+$("#newsletter-birthyear").val();$("#newsletter-birthdate").val(b)});$(".newsletter-email_address").bind("change keyup",function(){var b="",c=/^([^@<>\[\]\s])+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,a=$("#newsletter-email").val(),e=$("#newsletter-confirm").val();0<a.length&&0<e.length&&(a!==e?($("#newsletter-submit").attr("disabled",
!0),b="Email Addresses do not match."):$("#newsletter-submit").attr("disabled",!1),c.test(a)?$("#newsletter-submit").attr("disabled",!1):($("#newsletter-submit").attr("disabled",!0),b+=" Invalid Email Address."),$("#newsletter-email-error").html(b))})}Array.indexOf||(Array.prototype.indexOf=function(b,c){for(var a=c||0;a<this.length;a++)if(this[a]===b)return a;return-1});
function exbibFixupInternalLinks(){$(".internalref").each(function(){var b=$(this).attr("data-internalref"),c=$(".exbib-hidden-pub").text();$(this).attr("href","/resources/"+b+"/"+c)})}
function exbibEntryLinks(){$(".exbib-entry").click(function(b){b.preventDefault();b.stopPropagation();var b=$(this).attr("data-bg").split("#"),c="."+b[0].match(/passage\-class\-\d/),a=b[1];_gaq.push(["_trackEvent","sidebar","content",b[2]]);b=$(".passage-drawer"+c).position().top;($("html").scrollTop()>b||$("body").scrollTop()>b)&&$("html, body").animate({scrollTop:b},"slow");$(".exbib-content"+c).fadeOut(500,function(){$(".exbib-chunk"+c).fadeIn(500);$(".exbib-chunk-text"+c).html('<div class="exbib-spinner" style="display: block; "></div>');
$.ajax({url:a,cache:!0,dataType:"html",success:function(a){$(".exbib-chunk-text"+c).html(a);a=$(".exbib-chunk-text"+c+" .exbib-hidden-title").text();$(".exbib-back-title"+c).html(a);$(".exbib-chunk-merlink"+c).html($(".exbib-hidden-merlink").html());$(".exbib-chunk-footnote"+c).html($(".exbib-hidden-footnote").html());$(".exbib-chunk-text"+c).css("max-height",$(".passage-wrap").height()-150+"px");$(".exbib-chunk-text"+c).css("height","auto")},error:function(){},timeout:3E4})})})}
function positionDialogUnder(b,c){var c=$(c),a=c.offset(),e=b.parents(".ui-dialog");e.css("left",a.left);e.css("top",a.top+c.height()+15);e.css("width","auto");b.css("min-height","")}function resize_parallel_dropdowns(){var b=$(".passage-left, .multipassage-box").width(),c=$(".multipassage-box select, .passage-new-translation select"),b=b-70,b=325<b?325:b;c.parent().css("width",b);c.css("width",b);c.show()}
function get_versions_from_url(){var b=window.location.href.match(/version?=([a-z0-9;,\-]+)/i),c=[];if(null!==b)c=b[1].split(/[;,]/);else{for(b=0;5>b;b++){var a=window.location.href.match(RegExp("version"+b+"=([a-z0-9;,-]+)","i"));a&&c.push(a[1])}0===c.length&&(c=prefs.default_version.split())}return c}var bg=function(){return{zoomFix:function(){var b=1;window.screen.deviceXDPI&&(b=window.screen.deviceXDPI/96);2<b?$("body").addClass("large-zoom"):$("body").removeClass("large-zoom")}}}();
(function(){$().ready(function(){})}).call(this);