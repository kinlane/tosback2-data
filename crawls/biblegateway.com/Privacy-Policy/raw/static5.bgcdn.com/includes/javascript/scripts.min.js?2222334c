$(document).ready(function(){$("body").bind("click",function(b){b=$(b.target);!1===mobile&&(0===b.filter(".page-options").length&&0===b.parents(".page-options").length)&&$("#page-options").dialog("close")});$(window).resize(function(){resize_parallel_dropdowns()});bg.zoomFix();window.screen.deviceXDPI&&$(window).resize(function(){bg.zoomFix()});$(".passage-resources-open").click(function(b){b.preventDefault();b.stopPropagation();var a=$(this).attr("data-bg").split("#"),c="."+a[0],b=a[1],d=a[2];_gaq.push(["_trackEvent",
"sidebar","open",b.replace("Psa","Ps")]);$.ajax({url:"/exbib/contents/?osis="+b+"&class="+a[0]+"&key="+d,cache:!0,dataType:"html",success:function(b){$(".exbib-spinner"+c).hide();$(".exbib-content"+c).html(b);b=$(".heading"+c+" h3").text()+'<span class="passage-resources-close '+a[0]+'">X</span>';$(".exbib-content"+c+" .exbib-osis").html(b);exbibEntryLinks()},error:function(){},timeout:3E4});b=function(){hide_merch();$(".passage-resources-open"+c).hide();$(".passage-left"+c).animate({width:"60%"},
500,function(){$(".passage-drawer"+c).fadeIn(500);0<$(".exbib-content"+c+" .exbib-entry").length||$(".exbib-spinner"+c).show()})};0<$(".passage-parallel-new-col-remove").length?$(".passage-parallel-new-col-remove").trigger("click",b):b()});$(".passage-resources-close").live("click",function(b,a){b.preventDefault();b.stopPropagation();_gaq.push(["_trackEvent","sidebar","close"]);var c="."+$(this).attr("class").match(/passage-class-\d/)[0];$(".passage-drawer"+c).hide();0===$(".passage-drawer:visible").length&&
show_merch();var d=0===$(".passage-drawer:visible").length;$(".passage-left"+c).animate({width:"100%"},500,function(){$(".passage-resources-open"+c).show();a&&d&&a()})});$(".passage-updatetranslation select").bind("change",function(){var b,a=window.location.href.match(/^.*?version=([a-z0-9;,\-]+).*?$/i),a=a?a[1]:"";b=[];for(var c=!1,d=0;d<$(".multipassage, .passage-wrap").length&&!1===c;d++){for(var f=$("#table"+d+" .passage-updatetranslation select, .page-translation select"),h=0;h<f.length;h++)b.push($(f[h]).val());
b.join(";")!==a?c=!0:b=[]}a=RegExp("version="+a);b=window.location.href.match(/version=/i)?window.location.href.replace(a,"version="+b.join(";")):window.location.href+"&version="+b.join(";");window.location=b});$(".exbib-back-button").click(function(b){b.preventDefault();b.stopPropagation();for(var a,b=this.className.split(/\s+/),c=0;c<b.length;c++)0===b[c].indexOf("passage-class")&&(a="."+b[c]);$(".exbib-chunk"+a).fadeOut(500,function(){$(".exbib-content"+a).fadeIn(500)})});$(".passage-parallel-remove").click(function(b){b=
$(b.target).parents(".multipassage-box");if(0!==b.length&&(b=b[0].className,b=b.match(/(\w+)-col-(\d+)/),null!==b)){var b=b[2],a=get_versions_from_url();a.splice(b,1);b=window.location.search.replace(/(?:version\d?=[a-z0-9;,\-]+&?)+/i,"version="+a.join(";")+"&");b=b.replace(/&$/,"");window.location.search=b}});var a=function(){var b=$(".passage-updatetranslation").last().clone();b.addClass("passage-new-translation");var a=$('<div class="passage-parallel-tools"><span class="passage-parallel-remove passage-parallel-new-col-remove">X</span></div>'),
c=get_versions_from_url();b.bind("change",function(b){c.push($(b.target).val());b=window.location.href.match(/version\d?=/)?window.location.href.replace(/(?:version=[a-z0-9;,\-]+)|(?:version\d=[a-z0-9;,\-]+&?)+/i,"version="+c.join(";")):window.location.href+"&version="+c.join(";");window.location=b});a.bind("click",function(b,a){$(".passage-parallel-add").show();if(1===c.length)$(".new-passage-col").remove(),$(".passage-resources-open").show(),$(".passage-wrap, .passage-left").css({borderRight:"0",
paddingRight:0,marginRight:0}),$(".passage-wrap").animate({width:"100%"},500,function(){a&&a()}),show_merch();else{$(".multipassage-box.last-col").children().hide();var e=100/($("#table1 .multipassage-box").length-1)+"%";$(".multipassage-box").animate({width:e},{duration:500,step:function(){resize_parallel_dropdowns()},complete:function(){resize_parallel_dropdowns();$(".multipassage-box.new-passage-col").remove();var b=$(".multipassage-box.penultimate-col");b.addClass("last-col");b.removeClass("penultimate-col")}})}});
if(0===$(".new-passage-col").length){$(".passage-parallel-add").hide();if(1===c.length){var d=$('<div class="new-passage-col"></div>');d.append(b);d.append("<p>Choose a version from the above dropdown menu to see it in parallel.</p>");var f=function(){$(".passage-resources-open").hide();$(".passage-wrap, .passage-left").css({borderRight:"1px solid #F2B92A",paddingRight:"5px",marginRight:"10px"});hide_merch();var c=$(".passage-wrap");c.attr("data-complete",!1);c.animate({width:"50%"},500,function(){$(this).attr("data-complete",
!0);0===$('.passage-wrap[data-complete="false"]').length&&(a.insertAfter(b),d.insertAfter(".passage-wrap"));resize_parallel_dropdowns()})},h=$(".passage-resources-close:visible");0===h.length?f():h.trigger("click",f)}else if(1<c.length){var f=$(".multipassage-box"),h=100/($("#table1 .multipassage-box").length+1)+"%",i=$('<td class="multipassage-box last-col new-passage-col"></td>'),j=$(".multipassage-box.last-col");j.removeClass("last-col");j.addClass("penultimate-col");$(".multipassage-box.hidden-col");
i.appendTo(".multipassage tr");f.attr("data-complete",!1);f.animate({width:h},{duration:500,step:function(){resize_parallel_dropdowns()},complete:function(){$(this).attr("data-complete",!0);0===$('.multipassage-box[data-complete="false"]').length&&(b.appendTo(".last-col"),a.appendTo(".last-col"),$(".last-col").append("<p>Choose a version from the above dropdown menu to see it in parallel.</p>"),resize_parallel_dropdowns())}})}$(".parallel-info").show()}};$(".passage-parallel-add").bind("click",a);
$(".passage-parallel-button").bind("click",function(){var b,c=window.location.href.match(/^.*?version=([a-z0-9;,\-]+).*?$/i),g=!1;if(c){c=c[1];b=c.split(";");for(var d=0;d<b.length;d++)if("CEB"==b[d]){g=!0;break}b=b.join(";");b+=g?"":";CEB"}else b="CEB";g?a():(c=RegExp("version="+c),b=window.location.href.match(/version=/i)?window.location.href.replace(c,"version="+b):window.location.href+"&version="+b,window.location=b)});if(!1===mobile){var c=$("#page-options").dialog({resizable:!1,autoOpen:!1,
draggable:!1,dialogClass:"po-dropdown page-options"});$("input#search").autocomplete({source:function(b,a){var c=b.term.toLowerCase(),c=c.replace(/[^\w\-]/,""),c=c.replace(/\s+/," "),c=$.trim(c),d="www.biblegateway.com"===location.host||"new.biblegateway.com"===location.host?"http://static5.bgcdn.com":"http://"+location.host,f=!1;if($("body").data("no_results"))for(var h=$("body").data("no_results"),i=0;i<h.length;i++)if(RegExp(h[i],"i").test(c)){f=!0;break}!1===f&&0<c.length&&!/\w.*\d/.test(c)?$.ajax({url:d+
"/api/json/suggest.php",dataType:"jsonp",jsonpCallback:"update_suggest",cache:!0,data:{term:c,language:prefs.language},success:function(b){if(0===b.length){var d;$("body").data("no_results")?(d=$("body").data("no_results"),d.push(c)):d=[c];$("body").data("no_results",d)}a(b)}}):a([])},close:function(){}})}$("#page-options-button").bind("click",function(b){!0===c.dialog("isOpen")?c.dialog("close"):c.dialog("open");positionDialogUnder(c,b.target)});$(".po_toggle_woj").bind("click",function(b){!0===
$(b.target).is(":checked")?($(".woj").css("color","red"),setUpdatePrefs("pslookup_showwoj","yes",null)):($(".woj").css("color","#000"),setUpdatePrefs("pslookup_showwoj","no",null))});$(".po_toggle_footnotes").bind("click",function(b){for(var b=$(b.target),a=$(".footnote"),c=0;c<a.length;c++){var d=$(a[c]);!0===b.is(":checked")?d.html(d.attr("value")):d.html("")}!0===b.is(":checked")?(setUpdatePrefs("pslookup_showfootnotes","yes"),$(".footnotes").slideDown(200)):(setUpdatePrefs("pslookup_showfootnotes",
"no"),$(".footnotes").slideUp(200))});$(".po_toggle_xrefs").bind("click",function(b){for(var b=$(b.target),a=$(".xref, .crossreference"),c=0;c<a.length;c++){var d=$(a[c]);!0===b.is(":checked")?d.html(d.attr("value")):d.html("")}!0===b.is(":checked")?(setUpdatePrefs("pslookup_showxrefs","yes"),$(".crossrefs").slideDown(200)):(setUpdatePrefs("pslookup_showxrefs","no"),$(".crossrefs").slideUp(200))});$(".po_toggle_versenums").bind("click",function(b){!0===$(b.target).is(":checked")?($(".versenum, .chapternum").css("display",
"inline"),setUpdatePrefs("pslookup_showversenums","yes",null)):($(".versenum, .chapternum").css("display","none"),setUpdatePrefs("pslookup_showversenums","no",null))});$(".po_toggle_headings").bind("click",function(b){!0===$(b.target).is(":checked")?($(".passage-header, .text-html h3").css("display","block"),setUpdatePrefs("pslookup_showheadings","yes",null)):($(".passage-header, .text-html h3").css("display","none"),setUpdatePrefs("pslookup_showheadings","no",null))});$(".po_toggle_indent").bind("click",
function(b){!0===$(b.target).is(":checked")?($(".text-html").addClass("text-indent"),setUpdatePrefs("pslookup_showindent","yes",null)):($(".text-html").removeClass("text-indent"),setUpdatePrefs("pslookup_showindent","no",null))});$(".translation-dropdown").bind("change",function(b){b=$(b.target);b.children(":selected").hasClass("spacer")?b.attr("selectedIndex",b.attr("selectedIndex")-1):b.children(":selected").hasClass("lang")&&b.attr("selectedIndex",b.attr("selectedIndex")+1)});$("#search-box .translation-dropdown").bind("change",
function(b){var a=$(b.target),b=$("#header-book-list"),a=b.attr("href").replace(/vid=[\w\-]+/,"vid="+a.val());b.attr("href",a)});$("#a9g-fixed-bottom .close-button").bind("click",function(){$("#a9g-fixed-bottom").hide()});$(".home-body #search").focus()});function hide_merch(){$(".content-col").animate({marginRight:0},500);$(".content-rightcol").animate({width:"0px",marginLeft:0},500,function(){$(".content-rightcol").hide()})}
function show_merch(){0<$("#merch-side").length&&($(".content-col").animate({marginRight:"230px"},500),$(".content-rightcol").show(),$(".content-rightcol").animate({width:"212px",marginLeft:"-212px"},500))}function recordOutboundLink(a,c,b,e,g){try{_gaq.push(["_trackEvent",c,b,e,g])}catch(d){}setTimeout(function(){document.location=a.href},100)}
var embed_passage={passage:{},options:{},update_embedcode:function(){var a={"embed-versenum":!0,"embed-woj":!0,"embed-xref":!0,"embed-footnote":!0,"embed-heading":!0},c=this.options,b=document.createElement("div");$(b).html(this.passage.text);for(var e=0,g=c.length;e<g;e++){var d=$(c[e]).attr("id").substr(6);a[$(c[e]).attr("id")]=!1;switch(d){case "heading":$(":header",b).remove();break;case "footnote":case "xref":$("div."+("xref"===d?"crossrefs":d+"s"),b).remove();default:$("sup."+d,b).remove()}}$("span.woj",
b).removeAttr("style").removeAttr("class");for(e=0;e<a.length;e++)setUpdatePrefs("pslookup_"+e,a[e]);$("#embed-embed").val($(b).html());$("#embed-link").val(this.passage.url)},get_passage:function(a){$("#embed-overlay").css("display","block");$("#embed-message").hide();$.get("/api/json/embed.php",{search:a,version:embed_passage.passage.version_info.id},function(c){"ERROR"===c.text?$("#embed-message").html("<br/>"+c.error).show():(embed_passage.passage=c,embed_passage.passage_reference=a,embed_passage.update_embedcode());
$("#embed-overlay").css("display","none")},"json")},toggle:function(a){a.parent().get(0)!==$("#embed").parent().get(0)&&($("#embed").hide(),a.after($("#embed")));$("#embed").toggle();$("#embed").is(":visible")&&$(document.body).bind("click.embed",function(){$("#embed").hide();$(document.body).unbind("click.embed")})}};
function init_embed(a){embed_passage.coremetrics=a;jQuery(document).ready(function(){function a(){embed_passage.options=$("#embed input:checkbox").not(":checked");embed_passage.passage_reference=$("#embed-passage").attr("value");embed_passage.update_embedcode()}$("#result-options1").append('<li class="embed"><a href="#" onmouseover="ShowOptionInfo(\'Embed this passage\', \'Use on your site\')" onmouseout="HideOptionInfo()"><span>Embed this passage</span></a></li><li class="whats-this"><a onclick="return embed_help_window();" href="/help/embed.html" title="Embed or link to this passage on your blog or website">?</a></li>');
$("#result-options2").append('<li class="embed"><a href="#" onmouseover="ShowOptionInfo2(\'Embed this passage\', \'Use on your site\')" onmouseout="HideOptionInfo2()"><span>Embed this passage</span></a></li><li class="whats-this"><a onclick="return embed_help_window();" href="/help/embed.html" title="Embed or link to this passage on your blog or website">?</a></li>');$("#embed input:checkbox").click(a);$("#embed tr#embed-show-hide span.show-hide").click(function(){$("#embed tr.embed-options").each(function(b,
a){$(a).toggle("none"===$(a).css("display"))});$("#embed-show").each(function(b,a){$(a).toggle("none"===$(a).css("display"))});$("#embed-hide").each(function(b,a){$(a).toggle("none"===$(a).css("display"))})});$("#embed-passage").bind("blur keyup",function(b){!("keyup"===b.type&&13!==b.keyCode)&&embed_passage.passage_reference!==$("#embed-passage").attr("value")&&(embed_passage.get_passage($("#embed-passage").attr("value")),embed_passage.update_embedcode())});$("#embed").click(function(b){b.stopPropagation()});
$("li.embed a").click(function(b){b.stopPropagation();embed_passage.toggle($(this));embed_passage.coremetrics&&cmCreatePageElementTag("Embed","click");return!1});$("#embed-link, #embed-embed").bind("click",function(b){if(embed_passage.coremetrics){for(var b=$(b.target).attr("id").substr(6),a=["versenum","footnote","xref","heading"],c=0,d=embed_passage.options.length;c<d;c++)for(var f=0,h=a.length;f<h;f++)a[f]===$(embed_passage.options[c]).attr("id").substr(6)&&a.splice(f,1);0<a.length&&(b+=":"+a.join(","));
cmCreatePageElementTag("Embed",b)}$(this).select()});a()})}function embed_help_window(){window.open("/help/embed.html","BGEmbedHelp","width=400,height=500,resizeable=yes,scrollbars=yes,toolbar=no,status=yes");return!1}function redirect(a){window.location=a}
function AdPrefs(){this.data={};for(var a=document.cookie.split("; "),c=0;c<a.length;c++)if("BG_AD_PREFS"===a[c].substr(0,11)){this.data=JSON.parse(unescape(a[c].substr(12)));break}this.save=function(a,c){adPrefs.data[a]=c;var g=escape(JSON.stringify(adPrefs.data)),d=new Date;d.setTime(d.getTime()+864E5);document.cookie="BG_AD_PREFS="+g+"; expires="+d.toGMTString()+"; path=/"}}var adPrefs=new AdPrefs;
function setUpdatePrefs(a,c,b,e){prefs[a]=c;var g,d,f,h,c="";g=/^(pslookup|keysearch)_(search|version)(\d+)/;for(a in prefs)if("string"===typeof prefs[a])if(a.match(g)){var i=a.substring(0,a.length-1),j=i+"@"+prefs[a];switch(i){case "pslookup_search":f=f?f+(">"+prefs[a]):j;break;case "pslookup_version":d=d?d+(">"+prefs[a]):j;break;case "keysearch_search":c&&(c+="&");c+=i+"@"+prefs[a];break;case "keysearch_version":h=h?h+(">"+prefs[a]):j}}else c&&(c+="&"),c+=a+"@"+prefs[a];c+="&"+f+"&"+d+"&undefined&"+
h;a=new Date;a.setYear(a.getFullYear()+1);document.cookie="BG_PREFS="+c+";expires="+a.toGMTString()+"; path=/;";if(b)try{_gaq.push(b)}catch(k){}e&&setTimeout(window.location.reload,100)}
function changeFontSize(a,c,b){var e=["xsmall","small","medium","large","xlarge"],g=e.indexOf(a)+1,d=e.indexOf(c)+1;_gaq.push(["_trackEvent","font-size",d<g?"up":"down",d+"-"+g]);setUpdatePrefs("fontsize",a);window.setTimeout(function(){window.location.reload()},100);b&&cmCreatePageElementTag("Font Size",e.indexOf(c)+1+"-"+(e.indexOf(a)+1))}
function changeLanguages(a,c){_gaq.push(["_trackEvent","language",a]);setUpdatePrefs("language",a);setUpdatePrefs("keysearch_language1",a);var b=window.location.href;if(b.match("language=")){for(var e=b.split("?"),g=e[1].split("&"),d=[],f=0;f<g.length;f++)g[f].match("language=")||d.push(g[f]);b=0===d.length?e[0]:e[0]+"?"+d.join("&")}setTimeout(function(){window.location=b},100);c&&cmCreatePageElementTag("Language",a)}
function ExpandSection(a){document.getElementById(a+"-open").style.display="block";document.getElementById(a+"-closed").style.display="none";setUpdatePrefs(a,"open")}function CollapseSection(a){document.getElementById(a+"-open").style.display="none";document.getElementById(a+"-closed").style.display="block";setUpdatePrefs(a,"closed")}
function SetKeysearchWholewordsonly(a){"phrase"===a?(document.getElementById("wholewordsonly").disabled=!0,document.getElementById("wholewordsonlytext").style.color="#bbb"):(document.getElementById("wholewordsonly").disabled=!1,document.getElementById("wholewordsonlytext").style.color="#336")}
function SetKeysearchLimitoptions(a){"none"===a?($("#limit-bookset-dropdown").attr("disabled",!0),$("#limit-span-begin").attr("disabled",!0),$("#limit-span-end").attr("disabled",!0),$("#limit-none-label").css("color","#336"),$("#limit-bookset-label").css("color","#bbb"),$("#limit-span-label").css("color","#bbb")):"bookset"===a?($("#limit-bookset-dropdown").attr("disabled",!1),$("#limit-span-begin").attr("disabled",!0),$("#limit-span-end").attr("disabled",!0),$("#limit-none-label").css("color","#bbb"),
$("#limit-bookset-label").css("color","#336"),$("#limit-span-label").css("color","#bbb")):($("#limit-bookset-dropdown").attr("disabled",!0),$("#limit-span-begin").attr("disabled",!1),$("#limit-span-end").attr("disabled",!1),$("#limit-none-label").css("color","#bbb"),$("#limit-bookset-label").css("color","#bbb"),$("#limit-span-label").css("color","#336"))}
function InfoPopup(a){window.open(a,"Info","resizable=no, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, width=300, height=300");return!1}
function setLanguageOptsDisabledState(a){var c;"disabled"===a?(c="disabled",a="#ccc"):(c="",a="#336");for(var b=[],b=document.getElementsByTagName("input"),e=0;e<b.length;e++)"languageOpt"===b[e].className&&(b[e].disabled=c);c=[];c=document.getElementsByTagName("td");for(e=0;e<c.length;e++)"languageOpts"===c[e].className&&(c[e].style.color=a)}function enableOption(a){for(var c=0;c<a.length;c++)document.getElementsByID(a[c]).checked="checked"}
function init_newsletterform(){$(".newsletter-birthdate").bind("change blur",function(){var a=$("#newsletter-birthmonth").val()+"/"+$("#newsletter-birthday").val()+"/"+$("#newsletter-birthyear").val();$("#newsletter-birthdate").val(a)});$(".newsletter-email_address").bind("change keyup",function(){var a="",c=/^([^@<>\[\]\s])+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,b=$("#newsletter-email").val(),e=$("#newsletter-confirm").val();0<b.length&&0<e.length&&(b!==e?($("#newsletter-submit").attr("disabled",
!0),a="Email Addresses do not match."):$("#newsletter-submit").attr("disabled",!1),c.test(b)?$("#newsletter-submit").attr("disabled",!1):($("#newsletter-submit").attr("disabled",!0),a+=" Invalid Email Address."),$("#newsletter-email-error").html(a))})}Array.indexOf||(Array.prototype.indexOf=function(a,c){for(var b=c||0;b<this.length;b++)if(this[b]===a)return b;return-1});
function exbibFixupInternalLinks(){$(".internalref").each(function(){var a=$(this).attr("data-internalref"),c=$(".exbib-hidden-pub").text();$(this).attr("href","/resources/"+a+"/"+c)})}
function exbibEntryLinks(){$(".exbib-entry").click(function(a){a.preventDefault();a.stopPropagation();var a=$(this).attr("data-bg").split("#"),c="."+a[0].match(/passage\-class\-\d/),b=a[1];_gaq.push(["_trackEvent","sidebar","content",a[2]]);a=$(".passage-drawer"+c).position().top;($("html").scrollTop()>a||$("body").scrollTop()>a)&&$("html, body").animate({scrollTop:a},"slow");$(".exbib-content"+c).fadeOut(500,function(){$(".exbib-chunk"+c).fadeIn(500);$(".exbib-chunk-text"+c).html('<div class="exbib-spinner" style="display: block; "></div>');
$.ajax({url:b,cache:!0,dataType:"html",success:function(a){$(".exbib-chunk-text"+c).html(a);a=$(".exbib-chunk-text"+c+" .exbib-hidden-title").text();$(".exbib-back-title"+c).html(a);$(".exbib-chunk-merlink"+c).html($(".exbib-hidden-merlink").html());$(".exbib-chunk-footnote"+c).html($(".exbib-hidden-footnote").html());$(".exbib-chunk-text"+c).css("max-height",$(".passage-wrap").height()-150+"px");$(".exbib-chunk-text"+c).css("height","auto")},error:function(){},timeout:3E4})})})}
function positionDialogUnder(a,c){var c=$(c),b=c.offset(),e=a.parents(".ui-dialog");e.css("left",b.left);e.css("top",b.top+c.height()+15);e.css("width","auto");a.css("min-height","")}function resize_parallel_dropdowns(){var a=$(".passage-left, .multipassage-box").width(),c=$(".multipassage-box select, .passage-new-translation select"),a=a-70,a=325<a?325:a;c.parent().css("width",a);c.css("width",a);c.show()}
function get_versions_from_url(){var a=window.location.href.match(/version?=([a-z0-9;,\-]+)/i),c=[];if(null!==a)c=a[1].split(/[;,]/);else{for(a=0;5>a;a++){var b=window.location.href.match(RegExp("version"+a+"=([a-z0-9;,-]+)","i"));b&&c.push(b[1])}0===c.length&&(c=prefs.default_version.split())}return c}var bg=function(){return{zoomFix:function(){var a=1;window.screen.deviceXDPI&&(a=window.screen.deviceXDPI/96);2<a?$("body").addClass("large-zoom"):$("body").removeClass("large-zoom")}}}();
(function(){$().ready(function(){})}).call(this);