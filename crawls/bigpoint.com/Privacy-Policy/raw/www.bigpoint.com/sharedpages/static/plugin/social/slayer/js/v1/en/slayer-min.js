var inviteTemplateButton='<div class="slayer_overlayTrigger" style="display:none" >\n                                <a href="javascript:;" rel="#slayer_dialog" alt="invite-friends" title="{{buttonTooltip}}">\n                                    <span>{{formSend}}</span>\n                                </a>\n                            </div>',inviteTemplateItemAdd='<li><span>{{userName}} (ID: {{userId}})</span><a class="slayer_buddyAdd" value="{{userId}}" href="javascript:;" alt="add buddy"></a></li>',
inviteTemplateItemRemove='<li><span>{{userName}} (ID: {{userId}})</span><a class="slayer_buddyDel" value="{{userId}}" href="javascript:;" alt="remove buddy"></a></li>',inviteTemplate='<div id="slayer_dialogContainer" {{#renderPopup}}class="slayer_popup"{{/renderPopup}}>\n        <div id="slayer_dialog" style="display:none;">\n            {{#showTabs}}\n            <div id="slayer_tabs" style="display:none;">\n                <ul>\n                    {{#showFbTab}}\n                    <li class="slayer_tabsFacebook slayer_tabsCurrent"><a href="#">{{tabNameFb}}</a></li>\n                    {{/showFbTab}}\n                    <li class="slayer_tabsMail"><a href="#">{{tabNameMail}}</a></li>\n                    {{#showBuddyTab}}\n                    <li class="slayer_tabsBuddy"><a href="#">{{tabNameBuddy}}</a></li>\n                    {{/showBuddyTab}}\n                    {{#showAddressbookTab}}\n                    <li class="slayer_tabsAddressbook"><a href="#">{{tabNameAddressbook}}</a></li>\n                    {{/showAddressbookTab}}\n                </ul>\n            </div>{{/showTabs}}\n            <div id="slayer_dialogBg">\n                <a class="slayer_closeOverlay close"></a>\n                <div id="slayer_header">\n                    <div id="slayer_headerContent">\n                        <span>{{header}}</span>\n                        <div>{{desc}}</div>\n                    </div>\n                </div>\n                <div id="slayer_content">\n                    {{#showShareURL}}\n                    <div id="slayer_shareUrlContainer">\n                        <div class="slayer_title"><span>{{shareHeader}}</span></div>\n                        <div id="slayer_shareUrl">\n                            <a class="slayer_shareUrlIcons slayer_shareUrlIconFb" target="_blank" href="{{shareFacebookPostURL}}"></a>\n                            <a href="mailto:%20?subject={{shareMailSubject}}&body={{shareMsgMail}}" class="slayer_shareUrlIcons slayer_shareUrlIconMail" alt="share url via email"></a>\n                            <script type="text/javascript" src="http://platform.twitter.com/widgets.js"><\/script>\n                            <div id="custom-tweet-button"><a target="_blank" href="http://twitter.com/share?url={{inviteUrlTwitter}}&amp;text={{shareMsgTwitter}}&amp;count=none" class="slayer_shareUrlIcons slayer_shareUrlIconTwitter"></a></div>\n                            <span class="slayer_shareUrlText">{{inviteUrlWeb}}</span>\n                        </div>\n                    </div>\n                    {{/showShareURL}}\n                    <div id="slayer_mailInvite">\n                        <div class="slayer_title"><span>{{mailFormHeader}}</span></div>\n                        <div class="inner">\n                          <div class="slayer_mailInviteFrom">{{formInviter}}\n                              {{#isEditableUser}}\n                                  <input type="text" value="{{userName}}">\n                              {{/isEditableUser}} \n                              {{^isEditableUser}}\n                                  <span>{{userName}}</span>\n                              {{/isEditableUser}}</div>\n                          <div class="slayer_mailInviteInput slayer_mailInviteInputEmail">\n                              <label for="slayer_emails">{{formInvited}}</label>\n                              <textarea type="textarea" name="slayer_emails" rows="4"></textarea>\n                              <div class="slayer_mailInviteHelp">\n                                  <div class="slayer_mailInviteHelpText">{{formInvitedDesc}}</div>\n                              </div>\n                          </div>\n                          <div class="slayer_mailInviteInput slayer_mailInviteInputMessage">\n                              <label for="slayer_message">{{formMessage}}</label>\n                              {{#slideMessageInput}}\n                                  <div class="slayer_mailInviteSlideContent">\n                              {{/slideMessageInput}}\n                                  <textarea type="textarea" name="slayer_message" rows="4"></textarea>\n                                  <div class="slayer_mailInviteHelp">\n                                      <div class="slayer_mailInviteHelpText">{{formMessageDesc}}</div>\n                                  </div>\n                              {{#slideMessageInput}}\n                                  </div>\n                              {{/slideMessageInput}}\n                          </div>\n                      <div class="slayer_mailInviteFooter">\n                            <div class="slayer_mailInviteSendError"></div>\n                            <div class="slayer_mailInviteStatistics"></div>\n                           <a href="javascript:;" class="slayer_button" id="slayer_sendMailButton"><span><em>{{formSend}}</em>{{formAgreed}}</span></a>\n                       </div>\n                     </div>\n                </div>\n                <div id="slayer_mailInviteResult">\n                    <div class="slayer_mailInviteFooter">\n                        <a href="javascript:;" class="slayer_button" id="slayer_inviteNewButton"><span><em>{{formMoreFriendInvites}}</em></span></a>\n                    </div>\n                </div>\n                <div id="slayer_busy"></div>\n                {{#showFbTab}}\n                    <div id="slayer_friendSelect">\n                        <div class="slayer_title"><span>{{socialNetworkHeader}}</span></div>\n                        <div id="slayer_friendSelectFacebookFriends" class="inner">\n                          <script type="text/javascript"><\/script>\n                          <div id="connectComponentDiv"></div>\n                          <script type="text/javascript"><\/script>\n                          <div id="componentDiv"></div>\n                          <script type="text/javascript"><\/script>\n                          <div id="slayer_friendSelectFacebook"></div>\n                          <div id="slayer_friendSelectFacebookResponse"></div>\n                      </div>\n                      <div id="slayer_friendSelectFacebooFriendsButton"></div>\n                    </div>\n                {{/showFbTab}}\n                {{#showAddressbookTab}}\n                    <div id="slayer_addressbook">\n                    </div>\n                {{/showAddressbookTab}}\n                {{#showBuddyTab}}\n                    <div id="slayer_buddyList">\n                        <div class="slayer_title"><span>{{buddyHeader}}</span></div>\n                        <div class="inner">\n                          <div class="slayer_buddySearch">\n                              <input type="text" value="{{buddyInputValue}}" class="buddyId">\n                              <div id="slayer_buddyListSearch"><a href="javascript:;"><span><em>{{formSearch}}</em></span></a></div>\n                          </div>\n                          <div class="slayer_title"><span>{{buddyResultHeader}}</span></div>\n                          <div id="slayer_buddyListResult"></div>\n                        </div>\n                    </div>\n                {{/showBuddyTab}}\n                <div class="slayer_closeOverlayBottom"><a href="javascript:;">{{formClose}}</a></div>\n            </div>\n        </div>\n        <div id="slayer_footer"></div>\n        </div>\n    </div>',
SLAYER="undefined"==typeof SLAYER?{}:SLAYER;
SLAYER.SLAYER=function(c){function f(e){a("JQUERY: Loading jQuery, version "+e);var e=document.getElementsByTagName("head")[0],b=document.createElement("script");b.type="text/javascript";b.onreadystatechange=function(){"complete"==this.readyState&&(a("onreadystatechange"),a("jQuery Loaded!"),h())};"Microsoft Internet Explorer"==navigator.appName&&b.attachEvent("onreadystatechange",h);b.onload=function(){a("jQuery Loaded!");h()};b.src="/sharedpages/static/plugin/social/libs/jquery.min.js";e.appendChild(b)}
function h(){t="undefined"!=typeof jQuery?jQuery:t;t.getScript("/sharedpages/static/plugin/social/slayer/js/v1/slayer-libs.js",function(){a("Additional jQueryTools loaded");var b=[];"undefined"!=typeof e.facebook&&(e.facebook.language="undefined"==typeof e.facebook.language?"en_US":e.facebook.language,s(e.facebook.language)||(y.addLoader("facebook"),b.push("facebook")));"undefined"!=typeof e.google&&(e.google.language="undefined"==typeof e.google.language?"en":e.google.language,s(e.google.language)||
(y.addLoader("google"),b.push("google")));"undefined"!=typeof e.invite&&(y.addLoader("invite"),b.push("invite"));"undefined"!=typeof e.events&&(y.addLoader("events"),b.push("events"));"undefined"!=typeof e.friendship&&(y.addLoader("friendship"),b.push("friendship"));for(var d=0;d<b.length;d++){var t=!1;switch(b[d]){case "facebook":t=k();break;case "google":t=q();break;case "invite":t=j();break;case "events":t=m();break;case "friendship":t=r()}t&&y.updateLoader(b[d],"init",!0)}})}function a(b,e){o.push({message:"SLAYER-DEBUG: "+
b,type:e});if(u&&"undefined"!=typeof console){var a=p.getSettings();e==("undefined"==typeof a.debugFilter?"":a.debugFilter)&&console.log("SLAYER-DEBUG: "+b)}}function k(){if(null==v){if("undefined"!=typeof e.facebook){var b=e.facebook;b.core=p;b.invite=x;b.gameId="undefined"!=typeof e.gameId?e.gameId:0;b.affiliateId="undefined"!=typeof e.affiliateId?e.affiliateId:0;v=new SLAYER.FACEBOOK(b);return!0}a("ERROR: No settings for Facebook found","error");return!1}return!0}function q(){if(null==w){if("undefined"!=
typeof e.google){var b=e.google;b.core=p;b.gameId="undefined"!=typeof e.gameId?e.gameId:0;b.affiliateId="undefined"!=typeof e.affiliateId?e.affiliateId:0;w=new SLAYER.GOOGLE(b);return!0}a("ERROR: No settings for Google found","error");return!1}return!0}function j(){if(null==x){var b="undefined"==typeof e.invite?{}:e.invite;b.gameId="undefined"==typeof e.gameId?a("INVITE: ERROR: No gameId set for invite dialog!","error"):e.gameId;b.instanceId="undefined"==typeof e.instanceId?a("INVITE: ERROR: No instanceId set!",
"error"):e.instanceId;b.userId="undefined"==typeof e.userId?a("INVITE: ERROR: No userId set!","error"):e.userId;b.userKeyId="undefined"==typeof e.userKeyId?a("INVITE: ERROR: No userKeyId set!","error"):e.userKeyId;b.affiliateId="undefined"==typeof e.affiliateId?a("INVITE: ERROR: No affiliateId found!","error"):e.affiliateId;b.gameTitle="undefined"==typeof e.gameTitle?a("INVITE: ERROR: No game title found!","error"):e.gameTitle;b.dispatcherUrl="undefined"==typeof e.dispatcherUrl?a("INVITE: ERROR: No dispatcher url found!",
"error"):e.dispatcherUrl;b.cssDev="undefined"==typeof e.cssDev?!1:e.cssDev;b.core=p;b.queue=y;b.facebook={};"undefined"!=typeof e.facebook&&(b.facebook.appId="undefined"==typeof e.facebook.appId?a("INVITE: ERROR: No Facebook application id given!","error"):e.facebook.appId,b.facebook.language="undefined"==typeof e.facebook.language?a("INVITE: ERROR: No Facebook language given!","error"):e.facebook.language,b.facebook.message="undefined"==typeof e.facebook.message?a("INVITE: ERROR: No Facebook message for invite given!",
"error"):e.facebook.message,b.facebook.data="undefined"==typeof e.facebook.data?a("INVITE: WARNING: No data given.","warning"):e.facebook.data,b.facebook.filter="undefined"==typeof e.facebook.filter?a("INVITE: WARNING: No filter given, using default","warning"):e.facebook.filter,b.facebook.to="undefined"==typeof e.facebook.to?a("INVITE: WARNING:No assignee given. Dialog will show friendlist","warning"):e.facebook.to,"undefined"!=typeof e.facebook.callbacks?(b.facebook.callbacks={},b.facebook.callbacks.onDone=
"undefined"==typeof e.facebook.callbacks.onDone?a("INVITE: WARNING: No Facebook callback onDone given!","warning"):e.facebook.callbacks.onDone,b.facebook.callbacks.onSuccess="undefined"==typeof e.facebook.callbacks.onSuccess?a("INVITE: WARNING: No Facebook callback onSuccess given!","warning"):e.facebook.callbacks.onSuccess,b.facebook.callbacks.onFailed="undefined"==typeof e.facebook.callbacks.onFailed?a("INVITE: WARNING: No Facebook callback onFailed given!","warning"):e.facebook.callbacks.onFailed):
(a("INVITE: WARNING: No callbacks for Facebook given!","warning"),b.facebook.callbacks={onDone:function(){},onSuccess:function(){},onFailed:function(){}}));if("undefined"==typeof b.gameId&&"undefined"==typeof b.facebook.appId)b.facebookTab=!1;else if("undefined"==typeof b.facebook&&"undefined"==typeof b.facebook.appId){var d=-1==location.hostname.search("bigpoint.net")?new SLAYER.FBDEV:new SLAYER.FBLIVE;"undefined"==typeof d.getSettings()[b.gameId]?b.facebookTab=!1:b.facebook.appId=d.getSettings()[b.gameId]}x=
new SLAYER.INVITE(b)}return!0}function m(){if(null==n){if("undefined"!=typeof e.events){var b=e.events;b.core=p;b.gameId="undefined"!=typeof e.gameId?e.gameId:0;b.affiliateId="undefined"!=typeof e.affiliateId?e.affiliateId:0;b.dispatcherUrl="undefined"!=typeof e.dispatcherUrl?e.dispatcherUrl:a("ERROR: No Dispatcher URL found!","error");b.cssDev="undefined"==typeof e.cssDev?!1:e.cssDev;n=new SLAYER.EVENTS(b);return!0}a("ERROR: No settings for Game Event Service found!","error");return!1}return!0}function r(){if(null==
b){if("undefined"==typeof e.dispatcherUrl)return p.debug("ERROR: Dispatcher URL is required!","error"),!1;b=new SLAYER.FRIENDSHIP({core:p,dispatcherUrl:e.dispatcherUrl})}return!0}function g(){if("undefined"==typeof e.hideClient)return p.debug("WARNING: No hiding parameter found!","warning"),!1;if("undefined"==typeof e.hideClient.container)return p.debug("WARNING: No client container in hiding parameter found!","warning"),!1;return"undefined"==typeof e.hideClient.imageUrl?(p.debug("WARNING: No background image url in hiding parameter found!",
"warning"),!1):!0}function l(b){b.settings.renderPlaceholder=!1;var e=b.module;"google"==b.module?(b.settings.size="undefined"==typeof b.settings.size?"standard":b.settings.size,e+="_plusone_"+b.settings.size):"facebook"==b.module&&(b.settings.action="undefined"==typeof b.settings.action?"like":b.settings.action,e+="_like_"+b.settings.action);var e='<a href="javascript:;"><img src="/sharedpages/static/plugin/social/slayer/img/socialmedia/'+(e+".png")+'" border="0" title="Der Datenschutz ist uns wichtig! Ihre Daten werden nicht automatisch an die Social-Media Plattformen weitergeleitet. Bevor Sie diese Funktion nutzen k\u00f6nnen, klicken Sie bitte hier zur Aktivierung. Danach k\u00f6nnen Sie mit einem weiteren Klick den Beitrag auf Ihrer gew\u00fcnschten Social Media Plattform teilen." /></a>',
t=document.getElementById("undefined"==typeof b.settings.container?!1:b.settings.container);null!=t?(t.innerHTML=e,t.onclick=function(){t.innerHTML="Lade...";b.settings.forceRendering=!0;null==d(b.module)?(y.addCommand(b),y.addLoader(b.module),i(b.module),y.updateLoader(b.module,"init",!0)):p.run(b)}):a("WRAPPER: ERROR: "+b.module+": "+b.func+": No container found! May be DOM was not ready","error")}function s(b){var e=[];e.push("de");e.push("de_DE");e.push("de-DE");for(var a=0;a<e.length;a++)if(e[a]==
b)return!0;return!1}function i(b){switch(b){case "facebook":k();break;case "google":q();break;case "invite":j();break;case "events":m();break;case "friendship":r()}}function d(e){switch(e){case "facebook":return v;case "google":return w;case "invite":return x;case "events":return n;case "share":return z;case "friendship":return b}}var o=[],u=!1,v=null,w=null,x=null,n=null,z=null,b=null,t=null,e=null,p=this,y=null;p.isDevEnv=!1;p.instance=null;p.initModule=function(b){i(b)};p.getSettings=function(){return e};
p.run=function(b){var e=d(b.module),a=p.getSettings()[b.module],a="undefined"==typeof a?{}:a,t="undefined"==typeof b.settings.forceRendering?!1:b.settings.forceRendering;if(a=s("undefined"!=typeof a.language?a.language:"en_US")){a:{var a=b.func,n=[];n.push("renderLike");n.push("renderPlusOne");for(var g=0;g<n.length;g++)if(n[g]==a){a=!0;break a}a=!1}a=a&&!t}a?l(b):null!=e&&y.isLoadingComplete(b.module)?(e.setRunSettings(b.settings),e.run(b.func)):y.addCommand(b)};p.enableDevMode=function(){u=!0;p.debug("enabled development mode")};
p.disableDevMode=function(){u=!1;p.debug("disabled development mode")};p.debug=function(b,e){a(b,"undefined"==typeof e?"":e)};p.isDevMode=function(){return u};p.getJQuery=function(){return t};p.hideGameClient=function(){g()&&(p.debug("Hiding the game client!"),t("#"+e.hideClient.container).css("visibility","hidden"),t("#"+e.hideClient.container).parent().css("background-repeat","no-repeat"),t("#"+e.hideClient.container).parent().css("background-image",'url("'+e.hideClient.imageUrl+'")'))};p.unhideGameClient=
function(){g()&&(p.debug("Unhiding the game client!"),t("#"+e.hideClient.container).css("visibility","visible"),t("#"+e.hideClient.container).parent().css("background-image","none"))};p.ajax=function(b){a("Prepare Ajax call");var e=!0;"undefined"==typeof b.type&&(a("WARNING: No type set. Using POST as default","warning"),b.type="POST");"undefined"==typeof b.data&&(a("WARNING: No data to send found","warning"),b.data={});"undefined"==typeof b.dataType&&(a("WARNING: No dataType set. Using JSON as default",
"warning"),b.dataType="json");"undefined"==typeof b.url&&(a("ERROR:   No URL set. Cannot make ajax call","error"),e=!1);"undefined"==typeof b.success&&(a("WARNING: No success callback found","warning"),b.success=function(){});"undefined"==typeof b.error&&(a("WARNING: No error callback found","warning"),b.error=p.ajaxError);e?t.ajax(b):a("Cannot make ajax call, please check ERRORs/WARNINGs")};p.ajaxError=function(b,e,d){a("AJAX-ERROR: "+e,"error");a(d)};p.getInviteCode=function(b){return z.getInviteCode(b)};
p.updateLoader=function(b,e,a){y.updateLoader(b,e,a)};p.getShare=function(){return z};p.onReady=function(b,a){if("function"==typeof e[b].onReady)e[b].onReady(a)};p.getVersion=function(){return"Release-2012-13-Apollo_13"};p.printLog=function(b){console.log("- - - - - S L A Y E R - L O G - - - - -");for(var e=0;e<o.length;e++)(b==o[e].type||""==b)&&console.log(o[e].message);console.log("- - - - - S L A Y E R - E N D - - - - -")};(function(b){p.isDevEnv=-1==("undefined"!=typeof location?location.href:
"").search("bigpoint.net")?!1:!0;"undefined"!=typeof b.preDevMode&&b.preDevMode&&(u=!0);z=new SLAYER.SHARE;e=b;e.core=p;a("VERSION: Release-2012-13-Apollo_13");"undefined"!=typeof e.jQueryLibrary?(t=e.jQueryLibrary,window.jQuery=e.jQueryLibrary,h()):"undefined"!=typeof e.jQueryVersion?f(e.jQueryVersion):f("1.4.4");y=new SLAYER.QUEUE({dev:u,core:p})})(c)};SLAYER.init=function(c){"undefined"==typeof c&&(c={});SLAYER.instance=new SLAYER.SLAYER(c)};SLAYER.enableDevMode=function(){SLAYER.instance.enableDevMode()};
SLAYER.disableDevMode=function(){SLAYER.instance.disableDevMode()};SLAYER.printLog=function(c){SLAYER.instance.printLog("undefined"==typeof c?"":c)};SLAYER.getInviteCode=function(c){return SLAYER.instance.getInviteCode(c)};SLAYER.doWallPost=function(c){SLAYER.instance.run({module:"facebook",func:"doWallPost",settings:c})};SLAYER.renderLike=function(c){SLAYER.instance.run({module:"facebook",func:"renderLike",settings:c})};
SLAYER.sendAppInvite=function(c){c.type="invite";SLAYER.instance.run({module:"facebook",func:"sendRequest",settings:c})};SLAYER.sendAppGift=function(c){c.type="gift";c.filter="all";SLAYER.instance.run({module:"facebook",func:"sendRequest",settings:c})};SLAYER.renderPlusOne=function(c){SLAYER.instance.run({module:"google",func:"renderPlusOne",settings:c})};SLAYER.renderGoogleShare=function(c){SLAYER.instance.run({module:"google",func:"renderShare",settings:c})};
SLAYER.renderInviteDialog=function(){SLAYER.instance.run({module:"invite",func:"dialog",settings:{}})};SLAYER.renderInviteDialogButton=function(){SLAYER.instance.run({module:"invite",func:"button",settings:{}})};SLAYER.updateInviteSettings=function(c){SLAYER.instance.run({module:"invite",func:"settings",settings:c})};SLAYER.getShareUrl=function(c){SLAYER.instance.run({module:"invite",func:"shareUrl",settings:c})};SLAYER.renderGameTicker=function(){};SLAYER.renderUserTicker=function(){};
SLAYER.getGESFeed=function(c){SLAYER.instance.run({module:"events",func:"getFeed",settings:c})};SLAYER.getGameFriends=function(c){SLAYER.instance.run({module:"friendship",func:"getGameFriends",settings:c})};
SLAYER.QUEUE=function(c){function f(a,k){h.dev&&q.debug("QUEUE: "+a,k)}var h=null,a=[],k=this,q=null,j=[],m=!1,r=[];k.addLoader=function(a){j.push({identifier:a,init:!1,externals:!1})};k.removeLoader=function(a){for(var c=0;c<j.length;c++)if(j[c].identifier==a){j.splice(c,1);break}k.run(a)};k.updateLoader=function(a,c,h){for(var i=0;i<j.length;i++)j[i].identifier==a&&(j[i][c]=h,f("Updating "+a+": Set "+c+" to "+h),"undefined"!=typeof j[i]&&!0==j[i].init&&!0==j[i].externals&&(f("Removing "+a+" from queue"),
k.removeLoader(a)))};k.addCommand=function(g){var c=g.module;f("Added "+g.module+"->"+g.func);a.push(g);a:{for(g=0;g<j.length;g++)if(c==j[g]){g=!0;break a}g=!1}g||(f("Module "+c+" not found in loader list. Initialzing!"),q.getSettings(),k.addLoader(c),q.initModule(c),k.updateLoader(c,"init",!0))};k.run=function(g){if(m)r.push(g);else{m=!0;f("Locked Queue");var c=a,j=[];f("Run Queue commands for "+g);for(var i=0;i<c.length;i++)c[i].module==g?(f("Run "+c[i].module+"->"+c[i].func),q.run(c[i])):j.push(c[i]);
a=j;f("Queue run complete for "+g);m=!1;f("Unlocked Queue");"undefined"!=typeof r.shift()&&k.run(r.shift())}};k.isLoadingComplete=function(a){for(var c=0;c<j.length;c++)if(j.identifier==a)return!1;return!0};h=c;q=h.core};
SLAYER.SHARE=function(){function c(a,c){SLAYER.instance.debug("SHARE: "+a,c)}function f(a){for(var a=a+"",c="",h=0;h<a.length;h++)var j=parseInt(a.charAt(h),0)+97,c=c+String.fromCharCode(j);return c}function h(a){switch(a){case "invite":return"baa";case "facebook":return"b";case "google":return"d";case "twitter":return"c";case "web":return"bab"}}this.renderShareBar=function(){};this.getInviteCode=function(a){"undefined"==typeof a.instanceId&&c("INVITE-CODE: WARNING: No instance Id found!","warning");
"undefined"==typeof a.userId&&c("INVITE-CODE: WARNING: No user Id found!","warning");"undefined"==typeof a.userKeyId&&c("INVITE-CODE: WARNING: No user key Id found!","warning");"undefined"==typeof a.type&&c("INVITE-CODE: WARNING: No type found!","warning");"undefined"==typeof a.affiliateId&&(a.affiliateId=0);var k=Math.round((new Date).getTime()/1E3);return"x"+f(""+k)+"x"+f(a.userId)+"x"+f(a.userKeyId)+"x"+f(a.instanceId)+"x"+f(a.affiliateId)+"x"+h(a.type)}};
SLAYER.CSS=function(c){function f(g){if("undefined"==typeof a[j.gameId])return r.onReady("invite",{init:!1,message:"CSS file not found for given game ID"}),!1;var c=[];c.push(a[0][g][0]);k.each(a[j.gameId][g],function(a,g){-1<g.search("_ie")?"undefined"!=typeof navigator&&"undefined"!=typeof navigator.appName&&"Microsoft Internet Explorer"==navigator.appName&&c.push(g):c.push(g)});return c}function h(){if(0<q.length){var a=q.shift(),c=null!=a.match("000_slayer")?"000_slayer":"slayer_"+j.gameId,c=
-1<a.search("_ie")?c+"_ie":c;if("000_slayer"==c)0<k("#"+c).length&&k("#"+c).remove();else{var f=window.document.getElementsByTagName("link");k(f).each(function(){var a=k(this).attr("id"),g=k(this).attr("href");"undefined"!=typeof g&&-1<g.search("/plugin/social/slayer/css")&&"000_slayer"!=a&&k(this).remove()})}var f=document.getElementsByTagName("head")[0],i=document.createElement("link");i.rel="stylesheet";i.id=c;i.className="slayer_css";i.type="text/css";i.media="screen";i.href=a;"Microsoft Internet Explorer"==
navigator.appName||"Opera"==navigator.appName?i.onreadystatechange=function(){h()}:k.get(a,function(){h()});f.appendChild(i)}else SLAYER.instance.debug("CSS MAPPER: All CSS files were loaded!",void 0),m.CSSLoadingDone()}var a={"0":{invite:{"0":"000_slayer.css"}},14:{invite:{"0":"14_seafight.css"}},22:{invite:{"0":"22_darkorbit.css",1:"22_darkorbit_ie.css"}},171:{invite:{"0":"171_farmerama.css"}},525:{invite:{"0":"525_ramacity.css"}},696:{invite:{"0":"696_skyrama.css"}},481:{invite:{"0":"481_drakensang.css"},
ticker:{"0":"481_drakensang_ticker.css"}},824:{invite:{"0":"824_pizzaconnection.css"}}},k=null,q=[],j=null,m=null,r=null;this.loadCSSFiles=function(a){a=f(a.module);if(!a)return!1;var c="/sharedpages/static/plugin/social/slayer/css/";"undefined"!=typeof location&&"undefined"!=typeof location.href&&"undefined"!=typeof location.href.search&&-1!=location.href.search("bigpoint.net")&&(c="/plugin/social/services/slayer/css/");var j=[];k.each(a,function(a,d){j.push(c+d)});q=j;h()};(function(a){k=SLAYER.instance.getJQuery();
r=a.core;m=a.caller;j=m.getSettings()})(c)};
SLAYER.AFFILIATE=function(c){function f(c,j,f,k){f="live"==f?h:a;return"undefined"!=typeof f[c]&&"undefined"!=typeof f[c][j]&&"undefined"!=f[c][j][k]?f[c][j][k].visible:!0}var h=null,a=null,k=null;this.getAffiliateSettings=function(){return k.core.isDevEnv?a:h};this.isFacebookLikeAllowed=function(a,c,h){return f(a,c,"undefined"==typeof h?"live":h,"facebook_like")};this.isGooglePlusOneAllowed=function(a,c,h){return f(a,c,"undefined"==typeof h?"live":h,"google_plus_one")};k=c;h=(new SLAYER.LIVESETTINGS).getSettings();
a=(new SLAYER.DEVSETTINGS).getSettings()};
SLAYER.EVENTS=function(c){function f(){this.append=a;this.length=0;this.lastNode=this.firstNode=null;return!0}function h(a){this.text=a;this.next=null;return!0}function a(a){null==this.firstNode&&(this.firstNode=a);this.lastNode&&(this.lastNode.next=a);this.lastNode=a;this.length++}function k(){if(!w){var a=Math.round(Math.random()*(l-500)+500);u&&clearTimeout(u);u=setTimeout(q,a)}}function q(){m("#slayer_ticker div:first").animate({height:"0px",opacity:"toggle"},"slow",function(){m(this).remove();
m("#slayer_ticker div").length<=g&&("game"==v?r.getGameEventItems():"user"==v&&r.getUserEventItems());m("#slayer_ticker div:nth-child("+g+")").fadeIn("slow");k()})}function j(a){var b=!1;m.each(n,function(d,e){e==a&&(b=!0)});return b}var m=null,r=null,g=0,l=0,s="",i=this,d=null,o={},u=0,v="",w=!1,x=null,n=[];i.isDevEnv=!1;i.handleTickerData=function(a,b){if(null==a.data)i.debug("WARNING: No response data","warning");else if(a.data.itemCount){a.data.itemCount>=g&&(o=new f,v=b);var d=0;for(d in a.data.items)if(a.data.items[d].text){var e=
new h(a.data.items[d].text);o.append(e)}d=o.firstNode;e=0;if(d){do{var n=m("<div><span><span>"+d.text+"</span></span></div>");m("#slayer_ticker").append(n);n.index()>=g&&n.hide();d=d.next;e++}while(d)}k()}};i.debug=function(a,b){i.getSettings().core.debug("EVENTS: "+a,b)};i.getSettings=function(){return d};i.setSettings=function(a){d=a};i.run=function(a){i.debug("Call Handler");switch(a){case "renderGameTicker":r.getGameEventItems();break;case "renderUserTicker":r.getUserEventItems();break;case "getFeed":a=
x;a.feed="undefined"==typeof a.feed?"":a.feed;j(a.feed)?"undefined"==typeof a.callback?i.debug("FEED: WARNING: No callback found","warning"):(a={url:i.getSettings().core.getSettings().dispatcherUrl,type:"GET",dataType:"json",success:a.callback,error:i.getSettings().core.ajaxError,data:{slService:"event:get"+a.feed,slP:a.settings}},i.getSettings().core.ajax(a)):i.debug('FEED: ERROR: Feed "'+a.feed+'" not found',"error");break;default:i.debug("HANDLER: ERROR: No function found! ("+a+")","error")}};
i.setRunSettings=function(a){x=a};i.CSSLoadingDone=function(){d.core.removeLoader("events")};(function(a){n.push("UserGameFeed");n.push("GlobalUserFeed");n.push("GlobalUserGameFeed");n.push("BatchedGlobalUserGameFeed");n.push("GameFeed");n.push("BatchedGameFeed");n.push("GlobalFeed");m=SLAYER.instance.getJQuery();i.setSettings(a);new SLAYER.CSS({core:i.getSettings().core,caller:i});r=new SLAYER.EVENTSMODEL({events:i});i.isDevEnv=a.core.isDevEnv;a=i.getSettings();g="undefined"==typeof a.itemLimit?
4:a.itemLimit;l="undefined"==typeof a.itemSpeed?5E3:a.itemSpeed;s="undefined"==typeof a.renderTarget?!1:a.renderTarget;a.selectItems="undefined"==typeof a.selectItems?10:10<a.selectItems?10:a.selectItems;a.userKeyId="undefined"==typeof a.userKeyId?i.debug("No user key id found!"):a.userKeyId;s?m("#"+s).append('<div id="slayer_ticker"></div>'):i.debug("ERROR: No renderTarget in settings");o=new f;i.getSettings().core.updateLoader("events","externals",!0)})(c)};
SLAYER.EVENTSMODEL=function(c){var f=this,h=null;f.getGameEventItems=function(){var a=h.getSettings();f.ajax({type:"POST",data:{slService:"event:getGametickerFeed",slP:{offset:0,limit:a.selectItems}},dataType:"json",url:"undefined"==typeof a.dispatcherUrl?"undefined"==typeof a.actionUrl?"":a.actionUrl:a.dispatcherUrl,success:function(a){h.handleTickerData(a,"game")},error:function(a,c,f){h.getSettings().core.ajaxError(a,c,f)}})};f.getUserEventItems=function(){var a=h.getSettings();f.ajax({type:"POST",
data:{slService:"event:getUserFeed",slP:{offset:0,limit:a.selectItems}},dataType:"json",url:"undefined"==typeof a.dispatcherUrl?"undefined"==typeof a.actionUrl?"":a.actionUrl:a.dispatcherUrl,success:function(a){h.handleTickerData(a,"user")},error:function(a,c,f){h.getSettings().core.ajaxError(a,c,f)}})};f.ajax=function(a){h.getSettings().core.ajax(a)};h=c.events;SLAYER.instance.getJQuery()};
SLAYER.FACEBOOK=function(c){function f(){var b=!1,e="undefined"==typeof l.language?v:l.language,d;for(d in w)w[d]==e&&(b=!0);b||(a("WARNING: Given language is not provided by Facebook. Using default: "+v,"warning"),b=l,b.language=v,l=b)}function h(){if("undefined"==typeof FB){a("FB was undefined");var b=l;f();var b="http://connect.facebook.net/"+b.language+"/all.js",e=document.getElementsByTagName("head")[0],d=document.createElement("script");d.type="text/javascript";d.onreadystatechange=function(){"complete"==
this.readyState&&h()};"Microsoft Internet Explorer"==navigator.appName&&d.attachEvent("onreadystatechange",h);d.onload=function(){h()};d.src=b;e.appendChild(d)}else a("Facebook was already loaded"),null==FB._apiKey?window.fbAsyncInit():l.core.updateLoader("facebook","externals",!0)}function a(b,a){SLAYER.instance.debug("FACEBOOK: "+b,a)}function k(b){d.hideGameClient();FB.ui(b,function(e){if(null==typeof b.callbacks)a("WARNING: No callback for request found!","warning");else{if("undefined"==typeof b.callbacks.onDone)a("WARNING: No onDone callback found!",
"warning");else b.callbacks.onDone();if(e)"undefined"==typeof b.callbacks.onSuccess?a("WARNING: No onSuccess callback found!","warning"):(b.callbacks.onSuccess(e),j(e));else if("undefined"==typeof b.callbacks.onFailed)a("WARNING: No onFailed callback found!","warning");else b.callbacks.onFailed(e)}d.unhideGameClient()})}function q(){var b=i;FB.Event.subscribe("edge.create",function(e){"undefined"==typeof b.callback?a("WARNING: You did not registered any kind of callback!","warning"):b.callback(e)})}
function j(b){if(i.counter){var a=0;s.each(b.request_ids,function(){a++});i.invite.displayFacebookInviteCounter(a)}}function m(b){b="undefined"==typeof b?null:b;FB.getLoginStatus(function(e){if(b==e.status)a("Possible loop in login status: state: "+e.state+" | prevSate: "+b,"error");else switch(e.status){case "unknown":r(e.status);break;case "not_authorized":r(e.status);break;case "connected":FB.api("/me/friends?fields=name,picture",g)}})}function r(b){var a=l,d=a.core.getSettings();FB.login(function(a){a.authResponse&&
("not_authorized"===b&&l.core.ajax({dataType:"json",type:"POST",data:{slService:"connect:storeFacebookId",slP:{accessToken:FB._authResponse.accessToken,fbUserId:FB._userID,userId:d.userId,userKeyId:d.userKeyId}},url:"undefined"==typeof d.dispatcherUrl?d.actionUrl:d.dispatcherUrl,success:function(){},error:function(){}}),m(a.status))},{scope:a.permissions})}function g(b){var b=b.data,a="undefined"==typeof l.message?"":l.message;o.getView().renderContacts(b,{main:"slayer_friendSelect",table:"slayer_friendSelectFacebookFriends",
button:"slayer_friendSelectFacebooFriendsButton"},function(b){FB.ui({method:"apprequests",message:a,to:b},function(b){if("undefined"!=typeof b&&null!=b){var a={},e=function(b){if(0<b.length){var d=b.shift();FB.api("/"+d,function(d){a[d.name]=!0;e(b)})}else o.getView().showResult(a)};"undefined"!=typeof b.to&&e(b.to)}})})}var l=null,s=null,i=null,d=null,o=null,u=null,v="en_US",w={"0":"af_ZA",1:"ar_AR",2:"az_AZ",3:"be_BY",4:"bg_BG",5:"bn_IN",6:"bs_BA",7:"ca_ES",8:"cs_CZ",9:"cy_GB",10:"da_DK",11:"de_DE",
12:"el_GR",13:"en_GB",14:"en_PI",15:"en_UD",16:"en_US",17:"eo_EO",18:"es_ES",19:"es_LA",20:"et_EE",21:"eu_ES",22:"fa_IR",23:"fb_LT",24:"fi_FI",25:"fo_FO",26:"fr_CA",27:"fr_FR",28:"fy_NL",29:"ga_IE",30:"gl_ES",31:"he_IL",32:"hi_IN",33:"hr_HR",34:"hu_HU",35:"hy_AM",36:"id_ID",37:"is_IS",38:"it_IT",39:"ja_JP",40:"ka_GE",41:"ko_KR",42:"ku_TR",43:"la_VA",44:"lt_LT",45:"lv_LV",46:"mk_MK",47:"ml_IN",48:"ms_MY",49:"nb_NO",50:"ne_NP",51:"nl_NL",52:"nn_NO",53:"pa_IN",54:"pl_PL",55:"ps_AF",56:"pt_BR",57:"pt_PT",
58:"ro_RO",59:"ru_RU",60:"sk_SK",61:"sl_SI",62:"sq_AL",63:"sr_RS",64:"sv_SE",65:"sw_KE",66:"ta_IN",67:"te_IN",68:"th_TH",69:"tl_PH",70:"tr_TR",71:"uk_UA",72:"vi_VN",73:"zh_CN",74:"zh_HK",75:"zh_TW"},x=null,n=this,z=this,b=this;n.setRunSettings=function(b){i=b};n.run=function(b){a("Call Handler");switch(b){case "doWallPost":var e=i;"undefined"==typeof e.title&&a("WARNING: No title found!","warning");"undefined"==typeof e.userId&&a("WARNING: No userId found!","warning");"undefined"==typeof e.userKeyId&&
a("WARNING: No userKeyId found!","warning");"undefined"==typeof e.actionLink&&a("WARNING: No action link  found!","warning");"undefined"==typeof e.mediaItem&&a("WARNING: No media item found!","warning");"undefined"==typeof e.mediaItem.source&&a("WARNING: No media item source found!","warning");"undefined"==typeof e.mediaItem.type&&a("WARNING: No media item type found!","warning");"undefined"==typeof e.mediaItem.href&&a("WARNING: No media item href found!","warning");"undefined"==typeof e.actions&&
a("WARNING: No actions object found!","warning");"undefined"==typeof e.actions.name&&a("WARNING: No actions name found!","warning");"undefined"==typeof e.actions.link&&a("WARNING: No actions link found!","warning");"undefined"==typeof e.description&&a("WARNING: No description found!","warning");"undefined"==typeof e.userDefaultMessage&&a("WARNING: No user default message found!","warning");"undefined"==typeof e.caption&&a("WARNING: No caption found!","warning");"undefined"==typeof e.assignee&&(e.assignee=
null);"undefined"==typeof e.callbacks&&(e.callbacks=null);b=l;b={userId:e.userId,userKeyId:e.userKeyId,type:"b",instanceId:b.gameId,affiliateId:b.affiliateId};b="?inviteCode="+d.getShare().getInviteCode(b);e.actionLink+=b;e.mediaItem.href+=b;e.actions.link+=b;b={method:"feed",name:e.title,link:e.actionLink,picture:e.mediaItem.source,description:e.description,message:e.userDefaultMessage,to:e.assignee,caption:e.caption,callbacks:e.callbacks};"undefined"!=typeof e.actions&&(b.actions=e.actions);k(b);
break;case "renderLike":b=l;if(x.isFacebookLikeAllowed(b.affiliateId,b.gameId)){a("Preparing render settings");var b=i,n="<fb:like";for(e in b){var c=b[e];"container"!=e&&(n="ref"==e?n+' ref="2640"':n+(" "+e+'="'+c+'"'))}n+="></fb:like>";a("Render LIKE button");document.getElementById(b.container).innerHTML=n;q();FB.XFBML.parse(document.getElementById(b.container)[0])}else a("WARNING: Like button is blocked by Sales-Tool","warning");break;case "sendRequest":e={type:i.type,data:i.data};b=i;n="undefined"==
typeof i.filter?u._default:i.filter;n!=u._default&&"undefined"==typeof u[n]&&(a("WARNING: Filter is invalid! It will be set to default!","warning"),n=u._default);b.filter=n;"undefined"==typeof i.title&&a("WARNING: No title found!","warning");"undefined"==typeof i.message&&a("WARNING: No message found!","warning");"undefined"==typeof i.callbacks&&a("WARNING: No callbacks found!","warning");"undefined"==typeof i.data&&(i.data="");"undefined"==typeof i.to&&(i.to=null);k({method:"apprequests",title:i.title,
message:i.message,to:i.to,callbacks:i.callbacks,filters:[i.filter],data:e});break;case "renderFriends":m();break;case "init":a("FB Loading & Initiation done!");break;default:a("HANDLER: ERROR: No function found! ("+b+")","error")}};n.getLanguage=function(){return"undefined"==typeof l.language?"":l.language};n.getAppId=function(){var a=!1;if("undefined"!=typeof d.getSettings().gameId)if("undefined"!=typeof l.appId)a=l.AppId;else{var e=-1==location.hostname.search("bigpoint.net")?"live":"dev";"live"==
e&&(a=b.getSettings()[d.getSettings().gameId]);"dev"==e&&(a=z.getSettings()[d.getSettings().gameId])}return"undefined"==typeof a?!1:a};(function(c){d=SLAYER.instance;o=c.invite;z=new SLAYER.FBDEV;b=new SLAYER.FBLIVE;s=SLAYER.instance.getJQuery();if(null==document.getElementById("fb-root")){var e=document.getElementsByTagName("body")[0],g=document.createElement("div");e.appendChild(g)}"undefined"!=typeof c?l=c:a("ERROR: No initialization parameter found!","error");window.fbAsyncInit=function(){FB.init({appId:n.getAppId(),
status:!0,cookie:!0,xfbml:!0,oauth2:!1,frictionlessRequests:!0});a("FB initialized with AppId "+l.appId);l.core.updateLoader("facebook","externals",!0)};u={_default:"all",all:["all"],app_users:["app_users"],non_app_users:["non_app_users"]};h("init");x=new SLAYER.AFFILIATE(l.core)})(c)};
SLAYER.GOOGLE=function(c){function f(a,d){SLAYER.instance.debug("GOOGLE: "+a,d)}function h(){var a=!1,c="undefined"==typeof l.language?i:l.language;m.each(d,function(d,g){g==c&&(a=!0)});if(!a){f("WARNING: Given language is not provided by Google. Using default: "+i,"warning");var g=l;g.language=i;l=g}}function a(){if(0==s.length)f("All Google modules are loaded"),l.core.updateLoader("google","externals",!0);else{var d=s.shift();m.getScript(r+d,function(){f("Loaded module: "+d);a()})}}function k(){if(g.isGooglePlusOneAllowed(l.affiliateId,
l.gameId)){var a=j;if("undefined"==typeof a.container)f("PLUSONE: ERROR: No container found!","error");else{var d=a.container;a.container=void 0;"undefined"==typeof a.href&&(f("PLUSONE: WARNING: Parameter 'href' not found.","warning"),a.href="http://www.bigpoint.com");"undefined"==typeof a.size&&(f("PLUSONE: WARNING: Parameter 'size' not found.","warning"),a.size="standard");"undefined"==typeof a.annotation&&(f("PLUSONE: WARNING: Parameter 'annotation' not found.","warning"),a.annotation="none");
"undefined"==typeof a.width&&(f("PLUSONE: WARNING: Parameter 'width' not found.","warning"),a.width=0);"undefined"==typeof a.expandto&&(f("PLUSONE: WARNING: Parameter 'expandto' not found.","warning"),a.expandto="");"undefined"==typeof a.callback&&(f("PLUSONE: WARNING: Parameter 'callback' not found.","warning"),a.callback=function(){});"undefined"==typeof a.onstartinteraction&&(f("PLUSONE: WARNING: Parameter 'onstartinteraction' not found.","warning"),a.onstartinteraction=function(){});"undefined"==
typeof a.onendinteraction&&(f("PLUSONE: WARNING: Parameter 'onendinteraction' not found.","warning"),a.onendinteraction=function(){});gapi.plusone.render(d,a)}}else f("Plusone button is blocked by Sales-Tool")}function q(){if(171!=l.gameId&&311!=l.gameId)f("WARNING: Sharing is not available for your game","warning");else if(g.isGooglePlusOneAllowed(l.affiliateId,l.gameId)){var a=j;a.renderType="undefined"==typeof a.renderType?"direct":a.renderType;"undefined"==typeof a.type&&(f("SHARE: WARNING: Parameter 'type' not found!",
"warning"),a.type="http://www.bigpoint.com");"undefined"==typeof a.properties?f("SHARE: ERROR: No 'properties' object found!","error"):("undefined"==typeof a.properties.name&&(f("SHARE: WARNING: Parameter 'name' not found!","warning"),a.properties.name="Bigpoint"),"undefined"==typeof a.properties.description&&(f("SHARE: WARNING: Parameter 'description' not found!","warning"),a.properties.description="No description"),"undefined"==typeof a.properties.image&&(f("SHARE: WARNING: Parameter 'image' not found!",
"warning"),a.properties.image=""),"undefined"==typeof a.properties.url&&(f("SHARE: WARNING: Parameter 'url' not found!","warning"),a.properties.url="http://www.bigpoint.com"));var d={items:[a]},c={apiMode:"games"};if("container"==a.renderType){window.SLAYER_SHARE=function(){gapi.share.lightbox(d,c)};var h='<a href="javascript:SLAYER_SHARE();">'+("undefined"==typeof a.text?"Share with Google":a.text)+"</a>";m("#"+a.container).html(h)}else gapi.share.lightbox(d,c)}else f("WARNING: Plusone button is blocked by Sales-Tool",
"warning")}var j=null,m=null,r="https://apis.google.com/js/",g=null,l=null,s=[],i="en-US",d={"0":"ar",1:"bg",2:"ca",3:"zh-CN",4:"zh-TW",5:"hr",6:"cs",7:"da",8:"nl",9:"en-GB",10:"en-US",11:"et",12:"fil",13:"fi",14:"fr",15:"de",16:"el",17:"iw",18:"hi",19:"hu",20:"id",21:"it",22:"ja",23:"ko",24:"lv",25:"lt",26:"ms",27:"no",28:"fa",29:"pl",30:"pt-BR",31:"pt-PT",32:"ro",33:"ru",34:"sr",35:"sk",36:"sl",37:"es",38:"es-419",39:"sv",40:"th",41:"tr",42:"uk",43:"vi"};this.setRunSettings=function(a){j=a};this.run=
function(a){f("Call Handler");switch(a){case "renderPlusOne":k();break;case "renderShare":q();break;default:f("HANDLER: ERROR: Function not found("+a+")","error")}};this.getLanguage=function(){return"undefined"==typeof l.language?"":l.language};(function(d){l="undefined"!=typeof d?d:null;m=SLAYER.instance.getJQuery();h();window.___gcfg={lang:d.language,parsetags:"explicit"};g=new SLAYER.AFFILIATE(l.core);s.push("plusone.js");a()})(c)};
SLAYER.MAILHANDLER=function(){function c(a,c){SLAYER.instance.debug("MAILHANDLER: "+a,c)}var f=null,h=this;h.validateEmails=function(a){c("Validate emails...");if(a=h.prepareEmails(a)){var k=0!=a.length;f.each(a,function(a,f){c("Validate email: "+f);/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(f)||(k=!1)});return k}c("No valid mails after preparation!");return!1};h.prepareEmails=function(a){if(0==a.length)return c("WARNING: No raw data found!","warning"),!1;var a=a.replace(/;|\s|\x0B|\n\r/g,
",").split(","),h=[];f.each(a,function(a,c){0!=c&&(h[a++]=c)});return h};f=SLAYER.instance.getJQuery()};SLAYER.TOOLTIP=function(c){SLAYER.instance.getJQuery();0!=c.showTooltip&&(c.tooltipPosition="undefined"==typeof c.tooltipPosition?"bottom center":c.tooltipPosition,c.tooltipOffsetX="undefined"==typeof c.tooltipOffsetX?0:c.tooltipOffsetX,c.tooltipOffsetY="undefined"==typeof c.tooltipOffsetY?0:c.tooltipOffsetY)};
SLAYER.INVITE=function(c){function f(){var b=d.getSettings();b.renderTarget="undefined"==typeof b.renderTarget?"overlay":""==b.renderTarget?"overlay":b.renderTarget;b.dev="undefined"==typeof b.dev?!1:b.dev;b.language="undefined"==typeof b.language?"de_DE":b.language;b.iFrame="undefined"==typeof b.iFrame?!1:b.iFrame;b.editableUsername="undefined"==typeof b.editableUsername?!1:b.editableUsername;b.currentUsername="undefined"==typeof b.currentUsername?h("ERROR: No username found!","error"):b.currentUsername;
b.showTooltip="undefined"==typeof b.showTooltip?!0:b.showTooltip;b.facebookTab="undefined"==typeof b.facebookTab?!1:b.facebookTab;b.addressbookTab="undefined"==typeof b.addressbookTab?!1:b.addressbookTab;b.shareUrl="undefined"==typeof b.shareUrl?!0:b.shareUrl;b.defaultTab="undefined"==typeof b.defaultTab?"Facebook":b.defaultTab;b.showInviteInfo="undefined"==typeof b.showInviteInfo?!1:b.inviteInfo;b.buddyList="undefined"==typeof b.buddyList?!1:b.buddyList;b.additionalCssFile="undefined"==typeof b.additionalCssFile?
"":b.additionalCssFile;b.inviteTypes="undefined"==typeof b.inviteTypes?'{"facebook":"b","twitter":"c","google":"d","mail":"baa","web":"bab"}':b.inviteTypes;b.inviteUrl="undefined"==typeof b.inviteUrl?z:b.inviteUrl;b.onComplete="undefined"==typeof b.onComplete?function(){}:b.onComplete;b.friendSearch="undefined"==typeof b.friendSearch?{}:b.friendSearch;b.friendSearch.url="undefined"==typeof b.friendSearch.url?h("ERROR: No friend search url found","error"):b.friendSearch.url;var a=-1==location.href.search("bigpoint.net")?
new SLAYER.INVITESETTINGSLIVE:new SLAYER.INVITESETTINGSDEV;"undefined"!=typeof a.getSettings()[b.gameId]&&(a=a.getSettings()[b.gameId],b.facebookTab="undefined"==typeof a.facebook||!1!=b.facebookTab?b.facebookTab:a.facebook,b.shareUrl="undefined"==typeof a.shareUrl?b.shareUrl:a.shareUrl,b.defaultTab="undefined"==typeof a.defaultTab?b.defaultTab:a.defaultTab);d.setSettings(b)}function h(b,a){SLAYER.instance.debug("INVITE: "+b,a)}function a(){j("a#slayer_sendMailButton").unbind("click").bind("click",
function(){h("Handle email sending");var b=null,a=j(".slayer_mailInviteInputMessage textarea").val(),e=!0;m.clearErrorMessage();g.validateEmails(j(".slayer_mailInviteInputEmail textarea").val())?b=g.prepareEmails(j(".slayer_mailInviteInputEmail textarea").val()):(e=d.getText("gl.socialInvite.error.input.mails"),m.showEmailError(e),e=!1);h("Validate user message");a.length<=u||(e=[],e[0]=u,m.showUserMessageError(d.getText("gl.socialInvite.error.input.userMessage",e)),e=!1);e&&(m.showLoader(),e=d.getSettings(),
e=!j(".slayer_mailInviteFrom input").val()?e.currentUsername:j(".slayer_mailInviteFrom input").val(),r.send({emails:b,userMessage:a,username:e}))});j(".slayer_closeOverlayBottom").unbind("click").bind("click",function(){m.closeOverlay();k()});j(".slayer_closeOverlay").unbind("click").bind("click",function(){m.closeOverlay();k()});j("a#slayer_inviteNewButton").unbind("click").bind("click",function(){m.clearForm();d.setCurrentTab("Mail")});j("li.slayer_tabsFacebook").unbind("click").bind("click",function(){var b=
j("#slayer_friendSelectFacebookFriends").data("jsp");"undefined"!=typeof b&&(b.destroy(),j("#slayer_friendSelectFacebookFriends").html('<center><img src="/sharedpages/static/plugin/social/slayer/img/dialog/default/ajax-loader.gif" border="0" /></center>'));d.setCurrentTab("Facebook")});j("li.slayer_tabsAddressbook").unbind("click").bind("click",function(){d.setCurrentTab("Addressbook")});j("li.slayer_tabsMail").unbind("click").bind("click",function(){d.setCurrentTab("Mail")});j("#slayer_buddyList input").bind("click",
function(){j("#slayer_buddyList input").val("")});j("li.slayer_tabsBuddy").unbind("click").bind("click",function(){d.setCurrentTab("Buddy")});j("#slayer_buddyListSearch a").unbind("click").bind("click",function(){var b=d.getSettings(),a={search_str:j(".buddyId").val()};o.ajax({endpoint:b.friendSearch.endpoint,data:a,dataType:"json",url:b.friendSearch.url,success:m.displayFriendSearchResults,error:m.displayFriendSearchResults,type:"GET"})})}function k(){h("Reset tabs and hide content");m.hideContent()}
function q(){var b=d.getSettings();j.each(s,function(a,e){"object"==typeof e?j.each(e,function(a,e){b[a]="1"==e||"0"==e?"1"==e?!0:!1:e}):b[a]="1"==e||"0"==e?"1"==e?!0:!1:e});r=new SLAYER.INVITEMODEL(d);m=new SLAYER.INVITEVIEW(d);a();b.showInviteInfo&&(r.getUserLimits(),r.getUserInvites())}var j=null,m=null,r=null,g=null,l=null,s=null,i=null,d=this,o=null,u=140,v=null,w={},x="",n=[],z="http://"+window.location.host+"/";d.isDevEnv=!1;d.addObjectToLoad=function(b){n.push(b)};d.removeObjectToLoad=function(b){j.each(n,
function(a,e){b==e&&n.splice(a,1)});0==n.length&&d.getSettings().core.updateLoader("invite","externals",!0)};d.CSSLoadingDone=function(){d.removeObjectToLoad("css");o.onReady("invite",{init:!0,message:""})};d.getRunSettings=function(){return s};d.initTabs=function(){var b=d.getSettings();(b.facebookTab||b.buddyList||b.addressbookTab)&&j("#slayer_tabs").show();x=b.defaultTab?b.defaultTab:b.facebookTab?"Facebook":b.addressbookTab?"Addressbook":"Mail"};d.getCurrentTab=function(){return x};d.setCurrentTab=
function(b){x=b;m.switchTabs()};d.getSettings=function(){return l};d.setSettings=function(b){l=b};d.getText=function(b,a,e){b="undefined"==typeof e?b:e?b+".sing":b;e=[];e="undefined"==typeof a?{}:a;a=i[b];if("undefined"==typeof a)e=b;else{var b=a.split("%s"),d="",n=b.length;if(1<n){if(j.isArray(e))for(a=0;0<e.length&&a<n;)d=0!=a?d+(e.shift()+b[a]):d+b[a],a++;else d=b[0]+e+b[1];e=d}else e=a}return e};d.debug=function(b,a){h(b,a)};d.ajax=function(b){o.ajax(b)};d.ajaxError=function(b,a,e){o.ajaxError(b,
a,e)};d.getView=function(){return m};d.getModel=function(){return r};d.run=function(b){switch(b){case "dialog":m.renderInviteDialog();break;case "button":m.renderInviteDialogButton();break;case "settings":q();break;case "shareUrl":m.getShareUrl()}};d.addFriend=function(b){var a=d.getSettings();o.ajax({data:{slService:"friendship:invite",slP:{invitedID:b.data.userId,invitedKeyID:b.data.userKeyId}},type:"POST",dataType:"json",error:m.addFriendFailedCallback,url:a.dispatcherUrl,success:m.addFriendCallback})};
d.removeFriend=function(b){var a=d.getSettings();o.ajax({data:{slService:"friendship:cancel",slP:{userID:b.data.userId,userKeyID:b.data.userKeyId}},type:"POST",dataType:"json",error:m.removeFriendFailedCallback,url:a.dispatcherUrl,success:m.removeFriendCallback})};d.setRunSettings=function(a){s=a};d.displayFacebookInviteCounter=function(a){j("#slayer_friendSelectFacebookResponse").html(d.getText("gl.socialInvite.dialog.success.friendsInvited",""+a));j("#slayer_friendSelectFacebookResponse").attr("onmousedown",
null)};d.getStorage=function(){return w};d.setStorage=function(a){w=a};d.getCore=function(){return o};d.showFacebookFriendSelection=function(){var a=d.getSettings(),a={container:"slayer_friendSelectFacebook",title:a.gameTitle,message:a.facebook.message,data:a.facebook.data,filter:a.facebook.filter,to:a.facebook.to,callbacks:a.facebook.callbacks,counter:!0,invite:d};j("#"+a.container+"Response").html('<center><img src="/sharedpages/static/plugin/social/slayer/img/dialog/default/ajax-loader.gif" border="0" /></center>');
o.run({module:"facebook",func:"renderFriends",settings:a})};(function(b){d.addObjectToLoad("css");d.addObjectToLoad("view");d.addObjectToLoad("model");j=SLAYER.instance.getJQuery();l=b;o=l.core;d.isDevEnv=o.isDevEnv;i=new SLAYER.LANGUAGE;i=i.getLanguage();f();0==j("#slayer-root").length?(j("body").append('<div id="slayer-root"></div>'),h("Created SLAYER-ROOT")):(h("SLAYER-ROOT found"),j("#slayer-root").empty());0==j("#slayer-button").length?(j("body").append('<div id="slayer-button"></div>'),h("Created SLAYER-BUTTON")):
(h("SLAYER-BUTTON found"),j("#slayer-button").empty());v=new SLAYER.CSS({core:o,caller:d});g=new SLAYER.MAILHANDLER;r=new SLAYER.INVITEMODEL(d);m=new SLAYER.INVITEVIEW(d);d.initTabs();a();l.showInviteInfo&&(r.getUserLimits(),r.getUserInvites());v.loadCSSFiles({isDevEnv:d.isDevEnv,cssDev:l.cssDev,gameId:l.gameId,module:"invite"})})(c)};
SLAYER.INVITEVIEW=function(c){function f(a,d){i.debug("VIEW: "+a,d)}function h(){var n=d.getSettings(),c=d.getSettings(),b={buttonTooltip:d.getText("gl.socialInvite.button.tooltip",c.gameTitle),buddyHeader:d.getText("gl.socialInvite.dialog.buddy.header"),buddyInputValue:d.getText("gl.socialInvite.dialog.buddy.inputValue"),buddyResultHeader:d.getText("gl.socialInvite.dialog.buddy.resultHeader"),desc:d.getText("gl.socialInvite.dialog.desc"),formAgreed:d.getText("gl.socialInvite.dialog.form.agreed"),
formCancel:d.getText("gl.socialInvite.dialog.form.cancel"),formClose:d.getText("gl.socialInvite.dialog.form.close"),formInvited:d.getText("gl.socialInvite.dialog.form.invited"),formInvitedDesc:d.getText("gl.socialInvite.dialog.form.invited.desc"),formInviter:d.getText("gl.socialInvite.dialog.form.inviter"),formMessage:d.getText("gl.socialInvite.dialog.form.message"),formMessageDesc:d.getText("gl.socialInvite.dialog.form.message.desc"),formMoreFriendInvites:d.getText("gl.socialInvite.dialog.form.moreFriendInvites"),
formSearch:d.getText("gl.socialInvite.dialog.form.search"),formSend:d.getText("gl.socialInvite.dialog.form.send"),header:d.getText("gl.socialInvite.dialog.header"),socialNetworkHeader:d.getText("gl.socialInvite.dialog.socialNetworksHeader"),isEditableUser:c.editableUsername,showFbTab:c.facebookTab,showBuddyTab:c.buddyList,showAddressbookTab:c.addressbookTab,showTabs:c.facebook||c.buddyList||c.addressbookTab?!0:!1,showShareURL:c.shareUrl,tabNameBuddy:d.getText("gl.socialInvite.dialog.buddy.tabName"),
tabNameFb:d.getText("gl.socialInvite.dialog.gigya.tabName"),tabNameMail:d.getText("gl.socialInvite.dialog.mail.tabName"),tabNameAddressbook:d.getText("gl.socialInvite.dialog.addressbook.tabName"),userName:c.currentUsername,slideMessageInput:c.slideMessageInput?!0:!1,renderPopup:c.popup};c.shareUrl&&("undefined"==typeof c.shareImage&&(c.shareImage=o),b.shareMsgMail=encodeURIComponent(d.getText("gl.socialInvite.shareURL.message",c.gameTitle)+"\n")+a("mail",!0),b.shareMsg=d.getText("gl.socialInvite.shareURL.message",
c.gameTitle)+"\n"+c.inviteUrl,b.mailFormHeader=d.getText("gl.socialInvite.dialog.mailHeader"),b.shareHeader=d.getText("gl.socialInvite.dialog.shareHeader"),b.shareMsgGoogle=encodeURIComponent(d.getText("gl.socialInvite.shareURL.message",c.gameTitle)+"\n")+a("google",!0),b.shareMsgTwitter=encodeURIComponent(d.getText("gl.socialInvite.shareURL.message",c.gameTitle)),b.inviteUrlGoogle=a("google",!0),b.inviteUrlTwitter=a("twitter",!0),b.inviteUrlWeb=a("web",!1),b.shareMailSubject=d.getText("gl.socialInvite.shareURL.mailSubject",
c.gameTitle),b.shareFacebookPostURL="http://www.facebook.com/dialog/feed?app_id="+c.facebook.appId+"&link="+a("facebook",!0)+"&redirect_uri="+a("facebook",!0)+"&message="+encodeURIComponent(d.getText("gl.socialInvite.shareURL.message",c.gameTitle))+"&picture="+c.shareImage+"&caption="+d.getText("gl.socialInvite.fbCaption")+"&name={{shareMailSubject}}");c=[];c.button=v.toHTML(inviteTemplateButton,b);c.dialog=v.toHTML(inviteTemplate,b);g("#slayer-root").empty();g("#slayer-button").empty();g("#slayer-root").append(c.dialog);
b="undefined"==typeof n.hideButton?!1:n.hideButton;g("#slayer-button").append(c.button);jQuery("#slayer_dialog").addClass(n.language);b&&g(".social-invite a").hide();n.slideMessageInput&&k(!1);n.buddyList&&!w&&(g("#slayer-root").append('<div class="buddyFeedback" style="display:none;"><span></span></div>'),"undefined"!=typeof g(".buddyFeedback").overlay?w=g(".buddyFeedback").overlay({oneInstance:!1,fixed:!1,closeOnClick:!1,top:"center",left:"center"}):f("ERROR: Cannot create Overlay","error"))}function a(a,
c){var b=d.getSettings();g.parseJSON(b.inviteTypes);var f=b.inviteUrl+"?",f=f+i.getModel().getAIDUrlParam(a,"share");"undefined"!=typeof b.userId&&"undefined"!=typeof b.userKeyId&&"undefined"!=typeof b.instanceId&&"undefined"!=typeof b.affiliateId&&(f+="&invID="+i.getCore().getInviteCode({type:"invite",userId:b.userId,userKeyId:b.userKeyId,instanceId:b.instanceId,affiliateId:b.affiliateId}));return c?encodeURIComponent(f):f}function k(a){if("undefined"!=typeof a){var d=!0;g(".slayer_mailInviteInputMessage label").click(function(){d?
g(".slayer_mailInviteInputMessage .slideContent").slideDown():g(".slayer_mailInviteInputMessage .slideContent").slideUp();d=!d})}}function q(a){var c=d.getSettings(),a=g(a).overlay({mask:{color:"#333",loadSpeed:200,opacity:0.7},closeOnClick:!1,fixed:!1,oneInstance:!1,onBeforeLoad:function(){c.core.hideGameClient();s=""==s?g("#slayer_tabs li").not("li.slayer_tabsCurrent").css("margin-left"):s;i.initTabs();c.facebookTab||c.buddyList?""!=i.getCurrentTab()&&d.switchTabs(1):d.showForm()},onClose:function(){d.clearErrorMessage();
d.clearForm();c.core.unhideGameClient();var a=c.onComplete;if(a&&"function"==typeof a){var n=null==i.getStorage()?null:i.getStorage().responseData;a(n)}}});d.setOverlay(a)}function j(a){d.hideContent();g("#slayer_mailInviteResult").find("ul").remove();var c=g("#slayer_mailInviteResult").prepend("<ul></ul>").find("ul");g.each(a,function(a,n){c.append("<li>"+d.getText(n?"gl.socialInvite.dialog.success.user":"gl.socialInvite.dialog.success.failed",Array(a))+"</li>")});g("#slayer_mailInviteResult").fadeIn(500)}
function m(a){var a="gl.socialInvite.error."+("200.03"!=a&&"500"!=a?"500":a),c=d.getText(a);return c=c!=a?c:d.getText("gl.socialInvite.error.500")}function r(a){g("div.buddyFeedback span").empty().append(a);w&&(w.overlay().isOpened()&&(w.overlay().close(),null!=x&&clearTimeout(x)),w.overlay().load(),x=setTimeout("_feedbackOverlay.overlay().close()",3E3))}var g=null,l=null,s="",i=null,d=this,o="",u=[],v=null,w=null,x=null;d.getShareUrl=function(){var d=i.getRunSettings();d.encoded="undefined"==typeof d.encoded?
!1:d.encoded;var c=a(d.provider,d.encoded);d.callback(c)};d.switchTabs=function(a){"undefined"==typeof a&&(a="slow");var c="li.slayer_tabs"+i.getCurrentTab();g(c).animate({"margin-left":0},{duration:a,queue:!1,complete:function(){g(this).addClass("slayer_tabsCurrent")}});g("#slayer_tabs li").not(c).animate({"margin-left":d.getTabMargin()},{duration:a,queue:!1,complete:function(){g(this).removeClass("slayer_tabsCurrent")}});"li.slayer_tabsMail"==c?(d.showForm(500),i.getSettings().showInviteInfo&&(i.getModel().getUserInvites(),
i.getModel().getUserLimits())):"li.slayer_tabsFacebook"==c?d.showFriendSelection(500):"li.slayer_tabsAddressbook"==c?d.showAddressbook(500):"li.slayer_tabsBuddy"==c&&d.showBuddyList(500);g("#slayer_dialog").removeClass();a=c.substring(3)+"_active";g("#slayer_dialog").addClass(a)};d.clearForm=function(){g(".slayer_mailInviteInput textarea").val("");g("#slayer_mailInviteResult ul").val("");d.clearErrorMessage()};d.renderInviteDialog=function(){f("RenderInviteDialog");if("overlay"==d.getSettings().renderTarget)null==
d.getOverlay()&&(f("Preinitialize the Button"),d.renderInviteDialogButton()),d.getOverlay().overlay().load(),g("#slayer_dialog").show();else if("popup"==d.getSettings().renderTarget){f("Render dialog in popUp");var a=d.getSettings(),c="http://"+document.location.host,c=c+(a.dev?"/plugin/social/services/slayer/html/template.html":"/sharedpages/static/plugin/social/slayer/html/template.html"),c="undefined"!=typeof u[a.gameId]?u[a.gameId]:c,b;b=""+("gameTitle="+a.gameTitle+"&");b+="gameId="+a.gameId+
"&";b+="affiliateId="+a.affiliateId+"&";b+="dispatcherUrl="+a.dispatcherUrl+"&";b+="currentUsername="+a.currentUsername+"&";b+="editableUsername="+a.editableUsername+"&";b+="language="+a.language+"&";b+="shareUrl="+a.shareUrl+"&";b+="dev="+a.dev+"&";b=encodeURIComponent(b);window.open(c+"?"+b,a.gameTitle,"width=709,height=520").focus()}};d.renderInviteDialogButton=function(){f("RenderInviteDialogButton");d.getSettings().hideButton||g(".slayer_overlayTrigger").show();q(".slayer_overlayTrigger a")};
d.closeOverlay=function(){l.overlay().close()};d.getSettings=function(){return i.getSettings()};d.setSettings=function(a){i.setSettings(a)};d.getOverlay=function(){return l};d.setOverlay=function(a){l=a};d.getTabMargin=function(){return s?s:0};d.getText=function(a,d,b){return i.getText(a,d,b)};d.hideContent=function(){g("#slayer_busy").hide();g("#slayer_mailInvite").hide();g("#slayer_mailInviteResult").hide();g(".slayer_mailInviteSendError").hide();g("#slayer_friendSelect").hide();g("#slayer_friendSelectFacebookFriendsButton").hide();
g("#slayer_addressbook").hide();g("#slayer_buddyList").hide();g("#slayer_shareUrlContainer").hide();g("#slayer_tabs li").css("margin-left","");g("#slayer_buddyListResult").html("");w&&w.overlay().close()};d.showForm=function(a){a="undefined"==typeof a?0:a;d.hideContent();d.clearForm();g("#slayer_dialogContainer").fadeIn(a);g("#slayer_mailInvite").fadeIn(a);g("#slayer_shareUrlContainer").fadeIn(a)};d.showUserLimits=function(){};d.showUserInvites=function(){};d.showFriendSelection=function(a){a="undefined"==
typeof a?0:a;d.hideContent();g("#slayer_friendSelect").fadeIn(a);setTimeout(i.showFacebookFriendSelection,a)};d.showAddressbook=function(a){a="undefined"==typeof a?0:a;d.hideContent();g("#slayer_addressbook").fadeIn(a)};d.showBuddyList=function(a){a="undefined"==typeof a?0:a;d.hideContent();g("#slayer_buddyList").fadeIn(a)};d.addFriendCallback=function(a){var c=d.getText("gl.socialInvite.dialog.search.friendAddedFailed"),b=d.getText("gl.socialInvite.dialog.search.friendAdded");r("undefined"==typeof a||
null==typeof a?c:"undefined"==typeof a.meta?c:"undefined"==typeof a.meta.success?c:!1==a.meta.success?c:b)};d.addFriendFailedCallback=function(){f("ERROR: Adding a friend failed (Ajax Error)","error")};d.removeFriendCallback=function(a){var c=d.getText("gl.socialInvite.dialog.search.friendRemovedFailed"),b=d.getText("gl.socialInvite.dialog.search.friendRemoved");r("undefined"==typeof a||null==typeof a?c:"undefined"==typeof a.meta?c:"undefined"==typeof a.meta.success?c:!1==a.meta.success?c:b)};d.removeFriendFailedCallback=
function(){f("ERROR: Removing a friend failed (Ajax Error)","error")};d.clearErrorMessage=function(){g(".slayer_mailInviteInputMessage .slayer_mailInviteHelpText").html(d.getText("gl.socialInvite.dialog.form.message.desc"));g(".slayer_mailInviteInputEmail .slayer_mailInviteHelpText").html(d.getText("gl.socialInvite.dialog.form.invited.desc"));g(".slayer_mailInviteFooterError").html("");g(".slayer_mailInviteInput").removeClass("slayer_mailInviteInputError")};d.showLoader=function(){d.clearErrorMessage();
d.hideContent();g("#slayer_busy").fadeIn(500)};d.showSendError=function(a){a="undefined"==typeof a?"":a;g("#slayer_mailInvite").show();g("#slayer_busy").hide();g(".slayer_mailInviteSendError").html(a);g(".slayer_mailInviteSendError").fadeIn(500)};d.updateHTML=function(){h()};d.handleServiceResponse=function(a){a="undefined"==typeof a?null:a;d.clearErrorMessage();null==a?d.showSendError(m()):null==a.data?d.showSendError(m(a.meta.error)):j(a.data)};d.showEmailError=function(a){g(".slayer_mailInviteInputEmail .slayer_mailInviteHelpText").html(a);
g(".slayer_mailInviteInputEmail").addClass("slayer_mailInviteHelpError")};d.showUserMessageError=function(a){g(".slayer_mailInviteInputMessage .slayer_mailInviteHelpText").html(a);g(".slayer_mailInviteInputMessage").addClass("slayer_mailInviteHelpError")};d.displayFriendSearchResults=function(a){var a="undefined"==typeof a?"":"undefined"==typeof a.data?"":a.data,c="<ul>";if(0==a.length)c=d.getText("gl.socialInvite.dialog.search.nothingFound"),g("#slayer_buddyListResult").html(c);else{var b=[];g.each(a,
function(a,e){c=1==e.isFriend?c+v.toHTML(inviteTemplateItemRemove,e):c+v.toHTML(inviteTemplateItemAdd,e);b[e.userId]=e.userKeyId});c+="</ul>";g("#slayer_buddyListResult").html(c);g("#slayer_buddyListResult").jScrollPane();g(".slayer_buddyAdd").bind("click",function(){var a=g(this).attr("value"),e=b[a];g(this).css("backgroundPosition","bottom left");g(this).unbind("click");i.addFriend({data:{userId:a,userKeyId:e}})});g(".slayer_buddyDel").bind("click",function(){var a=g(this).attr("value"),e=b[a];
g(this).css("backgroundPosition","bottom left");g(this).unbind("click");i.removeFriend({data:{userId:a,userKeyId:e}})})}};d.renderContacts=function(a,c,b){var f='<table id="slayer_contacts"><tr>',e=0;g.each(a,function(a,b){4==e&&(f+="</tr><tr>",e=0);b.picture="no image"==b.picture?"":b.picture;var d=-1==b.id.search("@")?b.name:b.id;f+='<td><div class="slayer_contact" id="slayerContact-'+b.id+'">';f+='<img class="slayer_contactImage" src="'+b.picture+'" title="'+d+'" /><br />';f+="<b>"+b.name+"</b></div></td>";
e++});var f=f+"</table>",h='<a id="slayer_contactsInviteButton" class="slayer_button" href="javascript:;"><span><em>'+d.getText("gl.socialInvite.dialog.form.send")+"</em></span></a>";g("#"+c.table).empty().html(f);g("#"+c.button).empty().html(h);g("#"+c.table).jScrollPane();g.each(a,function(a,b){g("#slayerContact-"+b.id).bind("click",function(){g(this).hasClass("slayer_contactSelected")?g(this).removeClass("slayer_contactSelected"):g(this).addClass("slayer_contactSelected")})});g("#"+c.button).bind("click",
function(){var a=g("#"+c.table+" .slayer_contactSelected"),e=[];g.each(a,function(){var a=this.id.substring(14);e.push(a)});b(e)})};d.showResult=function(a){j(a)};(function(a){i=a;g=SLAYER.instance.getJQuery();v=new SL_Mustache;a=d.getSettings();"undefined"==typeof a.gameTitle&&(f("WARNING: You didnt set a game title. Tooltip will be disabled!","warning"),g(".slayer_overlayTrigger a").attr("title",""),a.showTooltip=0,d.setSettings(a));o="http://assets-575-www.bigpoint.net/marketingassets/bigpoint/bigpoint_logo_90x90.jpg";
h();a=d.getSettings();a.invite=i;new SLAYER.TOOLTIP(a);d.clearErrorMessage();i.removeObjectToLoad("view")})(c)};
SLAYER.INVITEMODEL=function(c){var f=null,h=this;h.getSettings=function(){return f.getSettings()};h.setSettings=function(a){f.setSettings(a)};h.getText=function(a,c,h){return f.getText(a,c,h)};h.getUserLimits=function(){var a=h.getSettings();h.ajax({type:"POST",data:{slService:"invite:getUserLmits"},dataType:"json",url:"undefined"==typeof a.dispatcherUrl?a.actionUrl:a.dispatcherUrl,success:function(a){h.showUserLimits(a.data)},error:function(a,c,h){f.ajaxError(a,c,h)}})};h.getUserInvites=function(){var a=
h.getSettings();h.ajax({type:"POST",data:{slService:"invite:getUserInvites"},dataType:"json",url:"undefined"==typeof a.dispatcherUrl?a.actionUrl:a.dispatcherUrl,success:function(a){h.showUserInvites(a.data)},error:function(a,c,h){f.ajaxError(a,c,h)}})};h.ajax=function(a){f.ajax(a)};h.ajaxError=function(a,c,h){f.ajaxError(a,c,h)};h.send=function(a){var c=h.getSettings(),q=null,j=null;"undefined"!=typeof c.dispatcherUrl?(q=c.dispatcherUrl,j={slService:"invite:sendinvite",slP:{emails:a.emails.join(","),
userMessage:a.userMessage,userName:a.username}},c.dev&&(j.slP.userID=c.userId,j.slP.userKeyID=c.userKeyId,j.slP.gameID=c.gameId,j.slP.instanceID=c.instanceId,j.slP.language=c.language)):(q=c.actionUrl,j={emails:a.emails.join(","),userMessage:a.userMessage,userName:a.username});h.ajax({url:q,data:j,success:function(a){var c=f.getStorage();c.responseData=null==a?a:null!=a.data?a.data:a;f.setStorage(c);f.getView().handleServiceResponse(a)},error:function(){f.getView().showSendError(h.getText("gl.socialInvite.error.500"))}})};
h.getAIDUrlParam=function(a,c){var f=[];f.facebook={share:3520,gigyaShare:3518,invite:2641};f.twitter={share:3521,gigyaShare:3519};f.email={share:2883};f.google={share:3547};f.web={share:3546};var h="";"undefined"!=typeof f[a]&&"undefined"!=typeof f[a][c]&&(h="&aid="+f[a][c]);return h};f=c;h.getSettings();SLAYER.instance.getJQuery();f.removeObjectToLoad("model")};
SLAYER.FRIENDSHIP=function(c){function f(){var c=h;c.callback="undefined"==typeof c.callback?function(){}:c.callback;a.core.ajax({url:a.dispatcherUrl,dataType:"json",type:"GET",data:{slService:"friendship:getGameFriends"},success:function(a){c.callback(a)},error:a.core.ajaxError})}var h=null,a=null,k=null;this.setRunSettings=function(a){h=a};this.run=function(a){switch(a){case "getGameFriends":f()}};(function(c){k=c.core;k.getJQuery();a=c;a.core.updateLoader("friendship","externals",!0)})(c)};
var cookieLib=function(c,f,h){if("undefined"!=typeof f||c&&"string"!=typeof c)if("string"==typeof c){h=h||{};null===f&&(f="",h.expires=-1);var a="";if(h.expires&&("number"==typeof h.expires||h.expires.toUTCString))"number"==typeof h.expires?(a=new Date,a.setTime(a.getTime()+864E5*h.expires)):a=h.expires,a="; expires="+a.toUTCString();var k=h.path?"; path="+h.path:"",q=h.domain?"; domain="+h.domain:"",h=h.secure?"; secure":"";document.cookie=c+"="+encodeURIComponent(f)+a+k+q+h}else for(a in c)jQuery.cookie(a,
c[a],f||h);else{f={};if(document.cookie){h=document.cookie.split(";");for(a=0;a<h.length;a++)if(k=jQuery.trim(h[a]),c){if(k.substr(0,c.length+1)==c+"="){f=decodeURIComponent(k.substr(c.length+1));break}}else q=k.indexOf("="),f[k.substr(0,q)]=decodeURIComponent(k.substr(q+1))}return f}},SL_Mustache=function(){this.toHTML=function(c,f,h,a){var k=new SL_MustacheRenderer;a&&k.setSendFun(a);k.render(c,f,h);if(!a)return k.buffer.join("\n")}},SL_MustacheRenderer=function(){function c(a){""!=a&&g.buffer.push(a)}
function f(a){return-1==a.indexOf(l+"%")?a:a.replace(RegExp(l+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+s),function(a,c,g){if(!d[c])throw{message:"This implementation of mustache doesn't understand the "+c+" pragma!"};i[c]={};g&&(a=g.split("="),i[c][a[0]]=a[1]);return""})}function h(a,c,d){return-1==a.indexOf(l+"#")&&-1==a.indexOf(l+"^")?a:a.replace(RegExp(l+"(\\^|\\#)\\s*(.+)\\s*"+s+"\n*([\\s\\S]+?)"+l+"\\/\\s*\\2\\s*"+s+"\\s*","mg"),function(a,f,h,b){a=q(h,c);if("^"==f)return!a||"object"==typeof a&&0===a.length?
g.render(b,c,d,!0):"";if("#"==f)return"object"==typeof a?r(a,function(a){return g.render(b,m(a),d,!0)}).join(""):"function"===typeof a?a.call(c,b,function(a){return g.render(a,c,d,!0)}):a?g.render(b,c,d,!0):""})}function a(a,d,f,h){for(var i=function(){return RegExp(l+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+s+"+","g")},m=i(),b=function(a,b,c){switch(b){case "!":return"";case "=":return a=c.split(" "),l=k(a[0]),s=k(a[1]),m=i(),"";case ">":a=c.replace(/^\s*|\s*$/g,"");if(!f||void 0===f[a])throw{message:"unknown partial "+
a};return"object"!=typeof d[a]?g.render(f[a],d,f,!0):g.render(f[a],d[a],f,!0);case "{":return q(c,d);default:return j(q(c,d))}},a=a.split("\n"),o=0;o<a.length;o++)a[o]=a[o].replace(m,b,this),h||c(a[o]);if(h)return a.join("\n")}function k(a){arguments.callee.sRE||(arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g"));return a.replace(arguments.callee.sRE,"\\$1")}function q(a,c){var a=a.replace(/^\s*|\s*$/g,""),d;!1===c[a]||0===c[a]||c[a]?d=c[a]:(!1===o[a]||0===
o[a]||o[a])&&(d=o[a]);return"function"===typeof d?d.apply(c):void 0!==d?d:""}function j(a){return(""+(null===a?"":a)).replace(/&(?!\w+;)|["'<>\\]/g,function(a){switch(a){case "&":return"&amp;";case "\\":return"\\\\";case '"':return"&quot;";case "'":return"&#39;";case "<":return"&lt;";case ">":return"&gt;";default:return a}})}function m(a){if(a&&"object"==typeof a)return a;var c=".",d={};i["IMPLICIT-ITERATOR"]&&(c=i["IMPLICIT-ITERATOR"]);d[c]=a;return d}function r(a,c){if("function"==typeof a.map)return a.map(c);
for(var d=[],f=a.length,g=0;g<f;g++)d.push(c(a[g]));return d}var g=this,l,s,i,d,o;g.setSendFun=function(){};g.render=function(d,i,j,k){k||(o=i,g.buffer=[]);if(-1==d.indexOf(l+"")){if(k)return d;c(d)}else{d=f(d);d=h(d,i,j);if(k)return a(d,i,j,k);a(d,i,j,k)}};l="{{";s="}}";o={};i={};d={"IMPLICIT-ITERATOR":!0};g.buffer=[]};
SLAYER.LIVESETTINGS=function(){var c={350:{481:{facebook_like:{visible:0},google_plus_one:{visible:0}},696:{facebook_like:{visible:0},google_plus_one:{visible:1}}},337:{14:{facebook_like:{visible:1},google_plus_one:{visible:1}},481:{facebook_like:{visible:0},google_plus_one:{visible:0}},721:{facebook_like:{visible:0},google_plus_one:{visible:0}}},573:{4:{facebook_like:{visible:0},google_plus_one:{visible:0}},7:{facebook_like:{visible:0},google_plus_one:{visible:0}},10:{facebook_like:{visible:0},google_plus_one:{visible:0}},
14:{facebook_like:{visible:0},google_plus_one:{visible:0}},22:{facebook_like:{visible:0},google_plus_one:{visible:0}},54:{facebook_like:{visible:0},google_plus_one:{visible:0}},56:{facebook_like:{visible:0},google_plus_one:{visible:0}},86:{facebook_like:{visible:0},google_plus_one:{visible:0}},171:{facebook_like:{visible:0},google_plus_one:{visible:0}},204:{facebook_like:{visible:0},google_plus_one:{visible:0}},311:{facebook_like:{visible:0},google_plus_one:{visible:0}},441:{facebook_like:{visible:0},
google_plus_one:{visible:0}},481:{facebook_like:{visible:0},google_plus_one:{visible:0}},696:{facebook_like:{visible:0},google_plus_one:{visible:0}}},964:[{facebook_like:{visible:0},google_plus_one:{visible:0}}],1417:{171:{facebook_like:{visible:0},google_plus_one:{visible:0}},311:{facebook_like:{visible:0},google_plus_one:{visible:0}},481:{facebook_like:{visible:0},google_plus_one:{visible:0}}},2043:[{facebook_like:{visible:0},google_plus_one:{visible:0}}],2682:{481:{facebook_like:{visible:1},google_plus_one:{visible:1}}},
3889:[{facebook_like:{visible:0},google_plus_one:{visible:0}}]};this.getSettings=function(){return c}};
SLAYER.DEVSETTINGS=function(){var c={333:{171:{facebook_like:{visible:0},google_plus_one:{visible:0}}},350:{522:{facebook_like:{visible:1},google_plus_one:{visible:0}}},1:[{facebook_like:{visible:1},google_plus_one:{visible:1}}],123:{623:{facebook_like:{visible:0},google_plus_one:{visible:1}}},337:{171:{facebook_like:{visible:0},google_plus_one:{visible:0}},481:{facebook_like:{visible:0},google_plus_one:{visible:1}}},1626:{467:{facebook_like:{visible:1},google_plus_one:{visible:1}}},2043:{522:{facebook_like:{visible:0},
google_plus_one:{visible:0}}}};this.getSettings=function(){return c}};SLAYER.FBLIVE=function(){var c={441:"172652859589",313:"161754880551771",1:"257629167586506",171:"349417181688",22:"364160817714",522:"201835296501572",525:"167358906661063",201:"230043510358380",826:"109974702426362",500:"",481:"197041727008151"};this.getSettings=function(){return c}};
SLAYER.FBDEV=function(){var c={441:"190714187640611",313:"105683159516902",1:"217541778262500",171:"144885742218767",22:"364160817714",522:"201835296501572",693:"167358906661063",201:"230043510358380",826:"171958362865555",500:""};this.getSettings=function(){return c}};
SLAYER.INVITESETTINGSLIVE=function(){var c={441:{shareUrl:!0,defaultTab:"Facebook",facebook:!1},313:{shareUrl:!0,defaultTab:"Facebook",facebook:!1},1:{shareUrl:!0,defaultTab:"Facebook",facebook:!0},171:{shareUrl:!0,defaultTab:"Facebook",facebook:!1},22:{shareUrl:!0,defaultTab:"Facebook",facebook:!1},522:{shareUrl:!0,defaultTab:"Facebook",facebook:!0},525:{shareUrl:!0,defaultTab:"Facebook",facebook:!1},201:{shareUrl:!0,defaultTab:"Facebook",facebook:!1},826:{shareUrl:!0,defaultTab:"Facebook",facebook:!1},
500:{shareUrl:!0,defaultTab:"Facebook",facebook:!1},481:{shareUrl:!0,defaultTab:"Facebook",facebook:!0}};this.getSettings=function(){return c}};
SLAYER.INVITESETTINGSDEV=function(){var c={441:{shareUrl:!0,defaultTab:"Facebook",facebook:!0},313:{shareUrl:!0,defaultTab:"Facebook",facebook:!0},1:{shareUrl:!0,defaultTab:"Facebook",facebook:!0},171:{shareUrl:!0,defaultTab:"Facebook",facebook:!0},22:{shareUrl:!0,defaultTab:"Facebook",facebook:!0},522:{shareUrl:!0,defaultTab:"Facebook",facebook:!0},693:{shareUrl:!0,defaultTab:"Facebook",facebook:!0},201:{shareUrl:!0,defaultTab:"Facebook",facebook:!0},826:{shareUrl:!0,defaultTab:"Facebook",facebook:!0},
500:{shareUrl:!0,defaultTab:"Facebook",facebook:!0}};this.getSettings=function(){return c}};SLAYER.LANGUAGE=function(){var c={"gl.socialInvite.dialog.buddy.header":"Add a player to your buddy list:","gl.socialInvite.dialog.buddy.inputValue":"Username / User ID","gl.socialInvite.dialog.buddy.tabName":"Buddy list","gl.socialInvite.dialog.buddy.resultHeader":"Search results","gl.socialInvite.dialog.desc":"Why play alone when you can play together? Invite friends to your game.","gl.socialInvite.dialog.failed.failed":"Invite failed","gl.socialInvite.dialog.form.inviter":"From:","gl.socialInvite.dialog.form.invited":"To:",
"gl.socialInvite.dialog.form.invited.desc":"(separate multiple e-mail addresses with commas)","gl.socialInvite.dialog.form.message":"Send message:","gl.socialInvite.dialog.form.message.desc":"(optional)","gl.socialInvite.dialog.form.agreed":"I know the person/people I'd like to invite.","gl.socialInvite.dialog.form.search":"Search","gl.socialInvite.dialog.form.send":"Invite friends","gl.socialInvite.dialog.form.cancel":"Cancel","gl.socialInvite.dialog.form.moreFriendInvites":"Invite more friends",
"gl.socialInvite.dialog.form.close":"Close","gl.socialInvite.dialog.gigya.tabName":"Facebook","gl.socialInvite.dialog.header":"Invite your friends!","gl.socialInvite.dialog.sendInfo.emailInvites.sing":"%s friend already registered.","gl.socialInvite.dialog.sendInfo.emailInvites":"%s friends already registered.","gl.socialInvite.dialog.sendInfo.emailsOpen":"You can still send %s e-mails today.","gl.socialInvite.dialog.sendInfo.emailsOpen.sing":"You can still send %s e-mail today.","gl.socialInvite.dialog.sendInfo.emailsSent":"You already sent %s e-mails today.",
"gl.socialInvite.dialog.sendInfo.emailsSent.sing":"You already sent %s e-mails today.","gl.socialInvite.dialog.success.user":"%s was successfully invited.","gl.socialInvite.dialog.success.failed":"Unable to invite %s.","gl.socialInvite.dialog.success.friendsInvited":"You invited %s friend(s).","gl.socialInvite.error.200.03":"You've invited the maximum number of friends for today. Invite more friends tomorrow!","gl.socialInvite.error.200.04":"Invalid e-mail address; please provide a valid e-mail address.",
"gl.socialInvite.error.500":"Oops, that didn't work. Please try again later.","gl.socialInvite.error.input.mails":"Please verify the e-mail address(es) you entered.","gl.socialInvite.error.input.agreed":"Please confirm that you are personally acquainted with the people you'd like to invite.","gl.socialInvite.error.input.userMessage":"Message may not contain more than %s characters.","gl.socialInvite.button.tooltip":"Don't wanna play alone? Invite friends to play %s.","gl.socialInvite.dialog.shareHeader":"Use your existing social networks:",
"gl.socialInvite.dialog.mailHeader":"Or send friends an e-mail invitation:","gl.socialInvite.dialog.mail.tabName":"E-mail","gl.socialInvite.dialog.socialNetworksHeader":"Invite friends from your social networks:","gl.socialInvite.notification.text.body":"Body:","gl.socialInvite.notification.text.subject":"Subject:","gl.socialInvite.notification.success":"Messages successfully sent: ","gl.socialInvite.shareURL.mailSubject":"Invitation to %s","gl.socialInvite.shareURL.message":"Players wanted! %s is a lot of fun and it's free. Join now at:",
"gl.socialInvite.fbCaption":"A bigpoint.com game","gl.socialInvite.dialog.search.nothingFound":"No player found","gl.socialInvite.dialog.search.friendRemovedFailed":"Friend couldn't be deleted.","gl.socialInvite.dialog.search.friendRemoved":"Friend was successfully deleted.","gl.socialInvite.dialog.search.friendAddedFailed":"Player couldn't be added.","gl.socialInvite.dialog.search.friendAdded":"Player was successfully added."};this.getLanguage=function(){return c}};