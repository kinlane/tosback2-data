var inviteTemplateButton='<div class="slayer_overlayTrigger" style="display:none" >\n                                <a href="javascript:;" rel="#slayer_dialog" alt="invite-friends" title="{{buttonTooltip}}">\n                                    <span>{{formSend}}</span>\n                                </a>\n                            </div>',inviteTemplateItemAdd='<li><span>{{userName}} (ID: {{userId}})</span><a class="slayer_buddyAdd" value="{{userId}}" href="javascript:;" alt="add buddy"></a></li>',
inviteTemplateItemRemove='<li><span>{{userName}} (ID: {{userId}})</span><a class="slayer_buddyDel" value="{{userId}}" href="javascript:;" alt="remove buddy"></a></li>',inviteTemplate='<div id="slayer_dialogContainer" {{#renderPopup}}class="slayer_popup"{{/renderPopup}}>\n        <div id="slayer_dialog" style="display:none;">\n            {{#showTabs}}\n            <div id="slayer_tabs" style="display:none;">\n                <ul>\n                    {{#showFbTab}}\n                    <li class="slayer_tabsFacebook slayer_tabsCurrent"><a href="#">{{tabNameFb}}</a></li>\n                    {{/showFbTab}}\n                    <li class="slayer_tabsMail"><a href="#">{{tabNameMail}}</a></li>\n                    {{#showBuddyTab}}\n                    <li class="slayer_tabsBuddy"><a href="#">{{tabNameBuddy}}</a></li>\n                    {{/showBuddyTab}}\n                    {{#showAddressbookTab}}\n                    <li class="slayer_tabsAddressbook"><a href="#">{{tabNameAddressbook}}</a></li>\n                    {{/showAddressbookTab}}\n                </ul>\n            </div>{{/showTabs}}\n            <div id="slayer_dialogBg">\n                <a class="slayer_closeOverlay close"></a>\n                <div id="slayer_header">\n                    <div id="slayer_headerContent">\n                        <span>{{header}}</span>\n                        <div>{{desc}}</div>\n                    </div>\n                </div>\n                <div id="slayer_content">\n                    {{#showShareURL}}\n                    <div id="slayer_shareUrlContainer">\n                        <div class="slayer_title"><span>{{shareHeader}}</span></div>\n                        <div id="slayer_shareUrl">\n                            <a class="slayer_shareUrlIcons slayer_shareUrlIconFb" target="_blank" href="{{shareFacebookPostURL}}"></a>\n                            <a href="mailto:%20?subject={{shareMailSubject}}&body={{shareMsgMail}}" class="slayer_shareUrlIcons slayer_shareUrlIconMail" alt="share url via email"></a>\n                            <script type="text/javascript" src="http://platform.twitter.com/widgets.js"><\/script>\n                            <div id="custom-tweet-button"><a target="_blank" href="http://twitter.com/share?url={{inviteUrlTwitter}}&amp;text={{shareMsgTwitter}}&amp;count=none" class="slayer_shareUrlIcons slayer_shareUrlIconTwitter"></a></div>\n                            <span class="slayer_shareUrlText">{{inviteUrlWeb}}</span>\n                        </div>\n                    </div>\n                    {{/showShareURL}}\n                    <div id="slayer_mailInvite">\n                        <div class="slayer_title"><span>{{mailFormHeader}}</span></div>\n                        <div class="inner">\n                          <div class="slayer_mailInviteFrom">{{formInviter}}\n                              {{#isEditableUser}}\n                                  <input type="text" value="{{userName}}">\n                              {{/isEditableUser}} \n                              {{^isEditableUser}}\n                                  <span>{{userName}}</span>\n                              {{/isEditableUser}}</div>\n                          <div class="slayer_mailInviteInput slayer_mailInviteInputEmail">\n                              <label for="slayer_emails">{{formInvited}}</label>\n                              <textarea type="textarea" name="slayer_emails" rows="4"></textarea>\n                              <div class="slayer_mailInviteHelp">\n                                  <div class="slayer_mailInviteHelpText">{{formInvitedDesc}}</div>\n                              </div>\n                          </div>\n                          <div class="slayer_mailInviteInput slayer_mailInviteInputMessage">\n                              <label for="slayer_message">{{formMessage}}</label>\n                              {{#slideMessageInput}}\n                                  <div class="slayer_mailInviteSlideContent">\n                              {{/slideMessageInput}}\n                                  <textarea type="textarea" name="slayer_message" rows="4"></textarea>\n                                  <div class="slayer_mailInviteHelp">\n                                      <div class="slayer_mailInviteHelpText">{{formMessageDesc}}</div>\n                                  </div>\n                              {{#slideMessageInput}}\n                                  </div>\n                              {{/slideMessageInput}}\n                          </div>\n                      <div class="slayer_mailInviteFooter">\n                            <div class="slayer_mailInviteSendError"></div>\n                            <div class="slayer_mailInviteStatistics"></div>\n                           <a href="javascript:;" class="slayer_button" id="slayer_sendMailButton"><span><em>{{formSend}}</em>{{formAgreed}}</span></a>\n                       </div>\n                     </div>\n                </div>\n                <div id="slayer_mailInviteResult">\n                    <div class="slayer_mailInviteFooter">\n                        <a href="javascript:;" class="slayer_button" id="slayer_inviteNewButton"><span><em>{{formMoreFriendInvites}}</em></span></a>\n                    </div>\n                </div>\n                <div id="slayer_busy"></div>\n                {{#showFbTab}}\n                    <div id="slayer_friendSelect">\n                        <div class="slayer_title"><span>{{socialNetworkHeader}}</span></div>\n                        <div id="slayer_fbContactInviteLimit"></div>\n                        <div id="slayer_fbContactSelectAll"></div>\n                        <div id="slayer_fbContactUnselectAll"></div>\n                        <div id="slayer_friendSelectFacebookFriends" class="inner">\n                          <script type="text/javascript"><\/script>\n                          <div id="connectComponentDiv"></div>\n                          <script type="text/javascript"><\/script>\n                          <div id="componentDiv"></div>\n                          <script type="text/javascript"><\/script>\n                          <div id="slayer_friendSelectFacebook"></div>\n                          <div id="slayer_friendSelectFacebookResponse"></div>\n                      </div>\n                      <div id="slayer_friendSelectFacebooFriendsButton"></div>\n                    </div>\n                {{/showFbTab}}\n                {{#showAddressbookTab}}\n                    <div id="slayer_addressbook">\n                        <div id="slayer_contactInviteLimit"></div>\n                        <div id="slayer_contactSelectAll"></div>\n                        <div id="slayer_contactUnselectAll"></div>\n                        <div id="slayer_contactTable"></div>\n                        <div id="slayer_contactInviteButton"></div>\n                    </div>\n                {{/showAddressbookTab}}\n                {{#showBuddyTab}}\n                    <div id="slayer_buddyList">\n                        <div class="slayer_title"><span>{{buddyHeader}}</span></div>\n                        <div class="inner">\n                          <div class="slayer_buddySearch">\n                              <input type="text" value="{{buddyInputValue}}" class="buddyId">\n                              <div id="slayer_buddyListSearch"><a href="javascript:;"><span><em>{{formSearch}}</em></span></a></div>\n                          </div>\n                          <div class="slayer_title"><span>{{buddyResultHeader}}</span></div>\n                          <div id="slayer_buddyListResult"></div>\n                        </div>\n                    </div>\n                {{/showBuddyTab}}\n                <div class="slayer_closeOverlayBottom"><a href="javascript:;">{{formClose}}</a></div>\n            </div>\n        </div>\n        <div id="slayer_footer"></div>\n        </div>\n    </div>',
SLAYER="undefined"==typeof SLAYER?{}:SLAYER;
SLAYER.SLAYER=function(d){function h(b){a("JQUERY: Loading jQuery, version "+b);var b=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript";e.onreadystatechange=function(){"complete"==this.readyState&&(a("onreadystatechange"),a("jQuery Loaded!"),i())};"Microsoft Internet Explorer"==navigator.appName&&e.attachEvent("onreadystatechange",i);e.onload=function(){a("jQuery Loaded!");i()};e.src="/sharedpages/static/plugin/social/libs/jquery.min.js";b.appendChild(e)}
function i(){e="undefined"!=typeof jQuery?jQuery:e;e.getScript("/sharedpages/static/plugin/social/slayer/js/v1/slayer-libs.js",function(){a("Additional jQueryTools loaded");var b=[];"undefined"!=typeof f.facebook&&(f.facebook.language="undefined"==typeof f.facebook.language?"en_US":f.facebook.language,p(f.facebook.language)||(z.addLoader("facebook"),b.push("facebook")));"undefined"!=typeof f.google&&(f.google.language="undefined"==typeof f.google.language?"en":f.google.language,p(f.google.language)||
(z.addLoader("google"),b.push("google")));"undefined"!=typeof f.invite&&(z.addLoader("invite"),b.push("invite"));"undefined"!=typeof f.events&&(z.addLoader("events"),b.push("events"));"undefined"!=typeof f.friendship&&(z.addLoader("friendship"),b.push("friendship"));for(var e=0;e<b.length;e++){var v=!1;switch(b[e]){case "facebook":v=k();break;case "google":v=o();break;case "invite":v=l();break;case "events":v=n();break;case "friendship":v=s()}v&&z.updateLoader(b[e],"init",!0)}})}function a(b,e){r.push({message:"SLAYER-DEBUG: "+
b,type:e});if(w&&"undefined"!=typeof console){var a=q.getSettings();e==("undefined"==typeof a.debugFilter?"":a.debugFilter)&&console.log("SLAYER-DEBUG: "+b)}}function k(){if(null==y){if("undefined"!=typeof f.facebook){var b=f.facebook;b.core=q;b.invite=u;b.gameId="undefined"!=typeof f.gameId?f.gameId:0;b.affiliateId="undefined"!=typeof f.affiliateId?f.affiliateId:0;y=new SLAYER.FACEBOOK(b);return!0}a("ERROR: No settings for Facebook found","error");return!1}return!0}function o(){if(null==x){if("undefined"!=
typeof f.google){var b=f.google;b.core=q;b.gameId="undefined"!=typeof f.gameId?f.gameId:0;b.affiliateId="undefined"!=typeof f.affiliateId?f.affiliateId:0;x=new SLAYER.GOOGLE(b);return!0}a("ERROR: No settings for Google found","error");return!1}return!0}function l(){if(null==u){var b="undefined"==typeof f.invite?{}:f.invite;b.gameId="undefined"==typeof f.gameId?a("INVITE: ERROR: No gameId set for invite dialog!","error"):f.gameId;b.instanceId="undefined"==typeof f.instanceId?a("INVITE: ERROR: No instanceId set!",
"error"):f.instanceId;b.userId="undefined"==typeof f.userId?a("INVITE: ERROR: No userId set!","error"):f.userId;b.userKeyId="undefined"==typeof f.userKeyId?a("INVITE: ERROR: No userKeyId set!","error"):f.userKeyId;b.affiliateId="undefined"==typeof f.affiliateId?a("INVITE: ERROR: No affiliateId found!","error"):f.affiliateId;b.gameTitle="undefined"==typeof f.gameTitle?a("INVITE: ERROR: No game title found!","error"):f.gameTitle;b.dispatcherUrl="undefined"==typeof f.dispatcherUrl?a("INVITE: ERROR: No dispatcher url found!",
"error"):f.dispatcherUrl;b.cssDev="undefined"==typeof f.cssDev?!1:f.cssDev;b.core=q;b.queue=z;b.facebook={};"undefined"!=typeof f.facebook&&(b.facebook.appId="undefined"==typeof f.facebook.appId?a("INVITE: ERROR: No Facebook application id given!","error"):f.facebook.appId,b.facebook.language="undefined"==typeof f.facebook.language?a("INVITE: ERROR: No Facebook language given!","error"):f.facebook.language,b.facebook.message="undefined"==typeof f.facebook.message?a("INVITE: ERROR: No Facebook message for invite given!",
"error"):f.facebook.message,b.facebook.data="undefined"==typeof f.facebook.data?a("INVITE: WARNING: No data given.","warning"):f.facebook.data,b.facebook.filter="undefined"==typeof f.facebook.filter?a("INVITE: WARNING: No filter given, using default","warning"):f.facebook.filter,b.facebook.to="undefined"==typeof f.facebook.to?a("INVITE: WARNING:No assignee given. Dialog will show friendlist","warning"):f.facebook.to,"undefined"!=typeof f.facebook.callbacks?(b.facebook.callbacks={},b.facebook.callbacks.onDone=
"undefined"==typeof f.facebook.callbacks.onDone?a("INVITE: WARNING: No Facebook callback onDone given!","warning"):f.facebook.callbacks.onDone,b.facebook.callbacks.onSuccess="undefined"==typeof f.facebook.callbacks.onSuccess?a("INVITE: WARNING: No Facebook callback onSuccess given!","warning"):f.facebook.callbacks.onSuccess,b.facebook.callbacks.onFailed="undefined"==typeof f.facebook.callbacks.onFailed?a("INVITE: WARNING: No Facebook callback onFailed given!","warning"):f.facebook.callbacks.onFailed):
(a("INVITE: WARNING: No callbacks for Facebook given!","warning"),b.facebook.callbacks={onDone:function(){},onSuccess:function(){},onFailed:function(){}}));if("undefined"==typeof b.gameId&&"undefined"==typeof b.facebook.appId)b.facebookTab=!1;else if("undefined"==typeof b.facebook&&"undefined"==typeof b.facebook.appId){var e=-1==location.hostname.search("bigpoint.net")?new SLAYER.FBDEV:new SLAYER.FBLIVE;"undefined"==typeof e.getSettings()[b.gameId]?b.facebookTab=!1:b.facebook.appId=e.getSettings()[b.gameId]}u=
new SLAYER.INVITE(b)}return!0}function n(){if(null==t){if("undefined"!=typeof f.events){var b=f.events;b.core=q;b.gameId="undefined"!=typeof f.gameId?f.gameId:0;b.affiliateId="undefined"!=typeof f.affiliateId?f.affiliateId:0;b.dispatcherUrl="undefined"!=typeof f.dispatcherUrl?f.dispatcherUrl:a("ERROR: No Dispatcher URL found!","error");b.cssDev="undefined"==typeof f.cssDev?!1:f.cssDev;t=new SLAYER.EVENTS(b);return!0}a("ERROR: No settings for Game Event Service found!","error");return!1}return!0}function s(){if(null==
b){if("undefined"==typeof f.dispatcherUrl)return q.debug("ERROR: Dispatcher URL is required!","error"),!1;b=new SLAYER.FRIENDSHIP({core:q,dispatcherUrl:f.dispatcherUrl})}return!0}function g(){if("undefined"==typeof f.hideClient)return q.debug("WARNING: No hiding parameter found!","warning"),!1;if("undefined"==typeof f.hideClient.container)return q.debug("WARNING: No client container in hiding parameter found!","warning"),!1;return"undefined"==typeof f.hideClient.imageUrl?(q.debug("WARNING: No background image url in hiding parameter found!",
"warning"),!1):!0}function m(b){b.settings.renderPlaceholder=!1;var e=b.module;"google"==b.module?(b.settings.size="undefined"==typeof b.settings.size?"standard":b.settings.size,e+="_plusone_"+b.settings.size):"facebook"==b.module&&(b.settings.action="undefined"==typeof b.settings.action?"like":b.settings.action,e+="_like_"+b.settings.action);var e='<a href="javascript:;"><img src="/sharedpages/static/plugin/social/slayer/img/socialmedia/'+(e+".png")+'" border="0" title="Der Datenschutz ist uns wichtig! Ihre Daten werden nicht automatisch an die Social-Media Plattformen weitergeleitet. Bevor Sie diese Funktion nutzen k\u00f6nnen, klicken Sie bitte hier zur Aktivierung. Danach k\u00f6nnen Sie mit einem weiteren Klick den Beitrag auf Ihrer gew\u00fcnschten Social Media Plattform teilen." /></a>',
f=document.getElementById("undefined"==typeof b.settings.container?!1:b.settings.container);null!=f?(f.innerHTML=e,f.onclick=function(){f.innerHTML="Lade...";b.settings.forceRendering=!0;null==c(b.module)?(z.addCommand(b),z.addLoader(b.module),j(b.module),z.updateLoader(b.module,"init",!0)):q.run(b)}):a("WRAPPER: ERROR: "+b.module+": "+b.func+": No container found! May be DOM was not ready","error")}function p(b){var e=[];e.push("de");e.push("de_DE");e.push("de-DE");for(var a=0;a<e.length;a++)if(e[a]==
b)return!0;return!1}function j(b){switch(b){case "facebook":k();break;case "google":o();break;case "invite":l();break;case "events":n();break;case "friendship":s()}}function c(e){switch(e){case "facebook":return y;case "google":return x;case "invite":return u;case "events":return t;case "share":return v;case "friendship":return b}}var r=[],w=!1,y=null,x=null,u=null,t=null,v=null,b=null,e=null,f=null,q=this,z=null;q.isDevEnv=!1;q.instance=null;q.initModule=function(b){j(b)};q.getSettings=function(){return f};
q.run=function(b){var e=c(b.module),a=q.getSettings()[b.module],a="undefined"==typeof a?{}:a,f="undefined"==typeof b.settings.forceRendering?!1:b.settings.forceRendering;if(a=p("undefined"!=typeof a.language?a.language:"en_US")){a:{var a=b.func,v=[];v.push("renderLike");v.push("renderPlusOne");for(var g=0;g<v.length;g++)if(v[g]==a){a=!0;break a}a=!1}a=a&&!f}a?m(b):null!=e&&z.isLoadingComplete(b.module)?(e.setRunSettings(b.settings),e.run(b.func)):z.addCommand(b)};q.enableDevMode=function(){w=!0;q.debug("enabled development mode")};
q.disableDevMode=function(){w=!1;q.debug("disabled development mode")};q.debug=function(b,e){a(b,"undefined"==typeof e?"":e)};q.isDevMode=function(){return w};q.getJQuery=function(){return e};q.hideGameClient=function(){g()&&(q.debug("Hiding the game client!"),e("#"+f.hideClient.container).css("visibility","hidden"),e("#"+f.hideClient.container).parent().css("background-repeat","no-repeat"),e("#"+f.hideClient.container).parent().css("background-image",'url("'+f.hideClient.imageUrl+'")'))};q.unhideGameClient=
function(){g()&&(q.debug("Unhiding the game client!"),e("#"+f.hideClient.container).css("visibility","visible"),e("#"+f.hideClient.container).parent().css("background-image","none"))};q.ajax=function(b){a("Prepare Ajax call");var f=!0;"undefined"==typeof b.type&&(a("WARNING: No type set. Using POST as default","warning"),b.type="POST");"undefined"==typeof b.data&&(a("WARNING: No data to send found","warning"),b.data={});"undefined"==typeof b.dataType&&(a("WARNING: No dataType set. Using JSON as default",
"warning"),b.dataType="json");"undefined"==typeof b.url&&(a("ERROR:   No URL set. Cannot make ajax call","error"),f=!1);"undefined"==typeof b.success&&(a("WARNING: No success callback found","warning"),b.success=function(){});"undefined"==typeof b.error&&(a("WARNING: No error callback found","warning"),b.error=q.ajaxError);f?e.ajax(b):a("Cannot make ajax call, please check ERRORs/WARNINGs")};q.ajaxError=function(b,e,f){a("AJAX-ERROR: "+e,"error");a(f)};q.getInviteCode=function(b){return v.getInviteCode(b)};
q.updateLoader=function(b,e,a){z.updateLoader(b,e,a)};q.getShare=function(){return v};q.getModule=function(b){return c(b)};q.onReady=function(b,e){if("function"==typeof f[b].onReady)f[b].onReady(e)};q.getVersion=function(){return"Release-2012-14: Invite_All_The_People | jQuery Queue Fix | Facebook Invite Pointer"};q.printLog=function(b){console.log("- - - - - S L A Y E R - L O G - - - - -");for(var e=0;e<r.length;e++)(b==r[e].type||""==b)&&console.log(r[e].message);console.log("- - - - - S L A Y E R - E N D - - - - -")};
(function(b){q.isDevEnv=-1==("undefined"!=typeof location?location.href:"").search("bigpoint.net")?!1:!0;"undefined"!=typeof b.preDevMode&&b.preDevMode&&(w=!0);v=new SLAYER.SHARE;f=b;f.core=q;a("VERSION: Release-2012-14: Invite_All_The_People | jQuery Queue Fix | Facebook Invite Pointer");"undefined"!=typeof f.jQueryLibrary?(e=f.jQueryLibrary,window.jQuery=f.jQueryLibrary,i()):"undefined"!=typeof f.jQueryVersion?h(f.jQueryVersion):h("1.4.4");z=new SLAYER.QUEUE({dev:w,core:q})})(d)};
SLAYER.init=function(d){"undefined"==typeof d&&(d={});SLAYER.instance=new SLAYER.SLAYER(d)};SLAYER.enableDevMode=function(){SLAYER.instance.enableDevMode()};SLAYER.disableDevMode=function(){SLAYER.instance.disableDevMode()};SLAYER.printLog=function(d){SLAYER.instance.printLog("undefined"==typeof d?"":d)};SLAYER.getInviteCode=function(d){return SLAYER.instance.getInviteCode(d)};SLAYER.doWallPost=function(d){SLAYER.instance.run({module:"facebook",func:"doWallPost",settings:d})};
SLAYER.renderLike=function(d){SLAYER.instance.run({module:"facebook",func:"renderLike",settings:d})};SLAYER.sendAppInvite=function(d){d.type="invite";SLAYER.instance.run({module:"facebook",func:"sendRequest",settings:d})};SLAYER.sendAppGift=function(d){d.type="gift";d.filter="all";SLAYER.instance.run({module:"facebook",func:"sendRequest",settings:d})};SLAYER.renderPlusOne=function(d){SLAYER.instance.run({module:"google",func:"renderPlusOne",settings:d})};
SLAYER.renderGoogleShare=function(d){SLAYER.instance.run({module:"google",func:"renderShare",settings:d})};SLAYER.renderInviteDialog=function(){SLAYER.instance.run({module:"invite",func:"dialog",settings:{}})};SLAYER.renderInviteDialogButton=function(){SLAYER.instance.run({module:"invite",func:"button",settings:{}})};SLAYER.updateInviteSettings=function(d){SLAYER.instance.run({module:"invite",func:"settings",settings:d})};
SLAYER.getShareUrl=function(d){SLAYER.instance.run({module:"invite",func:"shareUrl",settings:d})};SLAYER.renderGameTicker=function(){};SLAYER.renderUserTicker=function(){};SLAYER.getGESFeed=function(d){SLAYER.instance.run({module:"events",func:"getFeed",settings:d})};SLAYER.getGameFriends=function(d){SLAYER.instance.run({module:"friendship",func:"getGameFriends",settings:d})};
SLAYER.QUEUE=function(d){function h(a,g){k.debug("QUEUE: "+a,g)}var i=[],a=this,k=null,o=[],l=!1,n=[];a.addLoader=function(a){o.push({identifier:a,init:!1,externals:!1})};a.removeLoader=function(d){for(var g=0;g<o.length;g++)if(o[g].identifier==d){o.splice(g,1);break}a.run(d)};a.updateLoader=function(d,g,i){for(var k=0;k<o.length;k++)o[k].identifier==d&&(o[k][g]=i,h("Updating "+d+": Set "+g+" to "+i),"undefined"!=typeof o[k]&&!0==o[k].init&&!0==o[k].externals&&(h("Removing "+d+" from queue"),a.removeLoader(d)))};
a.addCommand=function(d){var g=d.module;h("Added "+d.module+"->"+d.func);i.push(d);a:{for(d=0;d<o.length;d++)if(g==o[d]){d=!0;break a}d=!1}!d&&null!=SLAYER.instance.getJQuery()&&(h("Module "+g+" not found in loader list. Initialzing!"),k.getSettings(),a.addLoader(g),k.initModule(g),a.updateLoader(g,"init",!0))};a.run=function(d){if(l)n.push(d);else{l=!0;h("Locked Queue");var g=i,o=[];h("Run Queue commands for "+d);for(var p=0;p<g.length;p++)g[p].module==d?(h("Run "+g[p].module+"->"+g[p].func),k.run(g[p])):
o.push(g[p]);i=o;h("Queue run complete for "+d);l=!1;h("Unlocked Queue");"undefined"!=typeof n.shift()&&a.run(n.shift())}};a.isLoadingComplete=function(a){for(var g=0;g<o.length;g++)if(o.identifier==a)return!1;return!0};k=d.core};
SLAYER.SHARE=function(){function d(a,d){SLAYER.instance.debug("SHARE: "+a,d)}function h(a){for(var a=a+"",d="",i=0;i<a.length;i++)var h=parseInt(a.charAt(i),0)+97,d=d+String.fromCharCode(h);return d}function i(a){switch(a){case "invite":return"baa";case "facebook":return"b";case "google":return"d";case "twitter":return"c";case "web":return"bab"}}this.renderShareBar=function(){};this.getInviteCode=function(a){"undefined"==typeof a.instanceId&&d("INVITE-CODE: WARNING: No instance Id found!","warning");
"undefined"==typeof a.userId&&d("INVITE-CODE: WARNING: No user Id found!","warning");"undefined"==typeof a.userKeyId&&d("INVITE-CODE: WARNING: No user key Id found!","warning");"undefined"==typeof a.type&&d("INVITE-CODE: WARNING: No type found!","warning");"undefined"==typeof a.affiliateId&&(a.affiliateId=0);var k=Math.round((new Date).getTime()/1E3);return"x"+h(""+k)+"x"+h(a.userId)+"x"+h(a.userKeyId)+"x"+h(a.instanceId)+"x"+h(a.affiliateId)+"x"+i(a.type)}};
SLAYER.CSS=function(d){function h(g){if("undefined"==typeof a[l.gameId])return s.onReady("invite",{init:!1,message:"CSS file not found for given game ID"}),!1;var d=[];d.push(a[0][g][0]);k.each(a[l.gameId][g],function(a,g){-1<g.search("_ie")?"undefined"!=typeof navigator&&"undefined"!=typeof navigator.appName&&"Microsoft Internet Explorer"==navigator.appName&&d.push(g):d.push(g)});return d}function i(){if(0<o.length){var a=o.shift(),d=null!=a.match("000_slayer")?"000_slayer":"slayer_"+l.gameId,d=
-1<a.search("_ie")?d+"_ie":d;if("000_slayer"==d)0<k("#"+d).length&&k("#"+d).remove();else{var h=window.document.getElementsByTagName("link");k(h).each(function(){var a=k(this).attr("id"),g=k(this).attr("href");"undefined"!=typeof g&&-1<g.search("/plugin/social/slayer/css")&&"000_slayer"!=a&&k(this).remove()})}var h=document.getElementsByTagName("head")[0],j=document.createElement("link");j.rel="stylesheet";j.id=d;j.className="slayer_css";j.type="text/css";j.media="screen";j.href=a;"Microsoft Internet Explorer"==
navigator.appName||"Opera"==navigator.appName?j.onreadystatechange=function(){i()}:k.get(a,function(){i()});h.appendChild(j)}else SLAYER.instance.debug("CSS MAPPER: All CSS files were loaded!",void 0),n.CSSLoadingDone()}var a={"0":{invite:{"0":"000_slayer.css"}},14:{invite:{"0":"14_seafight.css"}},22:{invite:{"0":"22_darkorbit.css",1:"22_darkorbit_ie.css"}},171:{invite:{"0":"171_farmerama.css"}},525:{invite:{"0":"525_ramacity.css"}},696:{invite:{"0":"696_skyrama.css"}},481:{invite:{"0":"481_drakensang.css"},
ticker:{"0":"481_drakensang_ticker.css"}},610:{invite:{"0":"481_drakensang.css"},ticker:{"0":"481_drakensang_ticker.css"}},824:{invite:{"0":"824_pizzaconnection.css"}}},k=null,o=[],l=null,n=null,s=null;this.loadCSSFiles=function(a){a=h(a.module);if(!a)return!1;var d=[];k.each(a,function(a,g){d.push("/sharedpages/static/plugin/social/slayer/css/"+g)});o=d;i()};(function(a){k=SLAYER.instance.getJQuery();s=a.core;n=a.caller;l=n.getSettings()})(d)};
SLAYER.AFFILIATE=function(d){function h(d,h,k,s){k="live"==k?i:a;return"undefined"!=typeof k[d]&&"undefined"!=typeof k[d][h]&&"undefined"!=k[d][h][s]?k[d][h][s].visible:!0}var i=null,a=null,k=null;this.getAffiliateSettings=function(){return k.core.isDevEnv?a:i};this.isFacebookLikeAllowed=function(a,d,k){return h(a,d,"undefined"==typeof k?"live":k,"facebook_like")};this.isGooglePlusOneAllowed=function(a,d,k){return h(a,d,"undefined"==typeof k?"live":k,"google_plus_one")};k=d;i=(new SLAYER.LIVESETTINGS).getSettings();
a=(new SLAYER.DEVSETTINGS).getSettings()};
SLAYER.EVENTS=function(d){function h(){this.append=a;this.length=0;this.lastNode=this.firstNode=null;return!0}function i(a){this.text=a;this.next=null;return!0}function a(a){null==this.firstNode&&(this.firstNode=a);this.lastNode&&(this.lastNode.next=a);this.lastNode=a;this.length++}function k(){if(!x){var a=Math.round(Math.random()*(m-500)+500);w&&clearTimeout(w);w=setTimeout(o,a)}}function o(){n("#slayer_ticker div:first").animate({height:"0px",opacity:"toggle"},"slow",function(){n(this).remove();
n("#slayer_ticker div").length<=g&&("game"==y?s.getGameEventItems():"user"==y&&s.getUserEventItems());n("#slayer_ticker div:nth-child("+g+")").fadeIn("slow");k()})}function l(a){var b=!1;n.each(t,function(e,f){f==a&&(b=!0)});return b}var n=null,s=null,g=0,m=0,p="",j=this,c=null,r={},w=0,y="",x=!1,u=null,t=[];j.isDevEnv=!1;j.handleTickerData=function(a,b){if(null==a.data)j.debug("WARNING: No response data","warning");else if(a.data.itemCount){a.data.itemCount>=g&&(r=new h,y=b);var e=0;for(e in a.data.items)if(a.data.items[e].text){var f=
new i(a.data.items[e].text);r.append(f)}e=r.firstNode;f=0;if(e){do{var c=n("<div><span><span>"+e.text+"</span></span></div>");n("#slayer_ticker").append(c);c.index()>=g&&c.hide();e=e.next;f++}while(e)}k()}};j.debug=function(a,b){j.getSettings().core.debug("EVENTS: "+a,b)};j.getSettings=function(){return c};j.setSettings=function(a){c=a};j.run=function(a){j.debug("Call Handler");switch(a){case "renderGameTicker":s.getGameEventItems();break;case "renderUserTicker":s.getUserEventItems();break;case "getFeed":a=
u;a.feed="undefined"==typeof a.feed?"":a.feed;l(a.feed)?"undefined"==typeof a.callback?j.debug("FEED: WARNING: No callback found","warning"):(a={url:j.getSettings().core.getSettings().dispatcherUrl,type:"GET",dataType:"json",success:a.callback,error:j.getSettings().core.ajaxError,data:{slService:"event:get"+a.feed,slP:a.settings}},j.getSettings().core.ajax(a)):j.debug('FEED: ERROR: Feed "'+a.feed+'" not found',"error");break;default:j.debug("HANDLER: ERROR: No function found! ("+a+")","error")}};
j.setRunSettings=function(a){u=a};j.CSSLoadingDone=function(){c.core.removeLoader("events")};(function(a){t.push("UserGameFeed");t.push("GlobalUserFeed");t.push("GlobalUserGameFeed");t.push("BatchedGlobalUserGameFeed");t.push("GameFeed");t.push("BatchedGameFeed");t.push("GlobalFeed");n=SLAYER.instance.getJQuery();j.setSettings(a);new SLAYER.CSS({core:j.getSettings().core,caller:j});s=new SLAYER.EVENTSMODEL({events:j});j.isDevEnv=a.core.isDevEnv;a=j.getSettings();g="undefined"==typeof a.itemLimit?
4:a.itemLimit;m="undefined"==typeof a.itemSpeed?5E3:a.itemSpeed;p="undefined"==typeof a.renderTarget?!1:a.renderTarget;a.selectItems="undefined"==typeof a.selectItems?10:10<a.selectItems?10:a.selectItems;a.userKeyId="undefined"==typeof a.userKeyId?j.debug("No user key id found!"):a.userKeyId;p?n("#"+p).append('<div id="slayer_ticker"></div>'):j.debug("ERROR: No renderTarget in settings");r=new h;j.getSettings().core.updateLoader("events","externals",!0)})(d)};
SLAYER.EVENTSMODEL=function(d){var h=this,i=null;h.getGameEventItems=function(){var a=i.getSettings();h.ajax({type:"POST",data:{slService:"event:getGametickerFeed",slP:{offset:0,limit:a.selectItems}},dataType:"json",url:"undefined"==typeof a.dispatcherUrl?"undefined"==typeof a.actionUrl?"":a.actionUrl:a.dispatcherUrl,success:function(a){i.handleTickerData(a,"game")},error:function(a,d,h){i.getSettings().core.ajaxError(a,d,h)}})};h.getUserEventItems=function(){var a=i.getSettings();h.ajax({type:"POST",
data:{slService:"event:getUserFeed",slP:{offset:0,limit:a.selectItems}},dataType:"json",url:"undefined"==typeof a.dispatcherUrl?"undefined"==typeof a.actionUrl?"":a.actionUrl:a.dispatcherUrl,success:function(a){i.handleTickerData(a,"user")},error:function(a,d,h){i.getSettings().core.ajaxError(a,d,h)}})};h.ajax=function(a){i.getSettings().core.ajax(a)};i=d.events;SLAYER.instance.getJQuery()};
SLAYER.FACEBOOK=function(d){function h(){var b=!1,e="undefined"==typeof m.language?w:m.language,f;for(f in y)y[f]==e&&(b=!0);b||(a("WARNING: Given language is not provided by Facebook. Using default: "+w,"warning"),b=m,b.language=w,m=b)}function i(){if("undefined"==typeof FB){a("FB was undefined");var b=m;h();var b="http://connect.facebook.net/"+b.language+"/all.js",e=document.getElementsByTagName("head")[0],f=document.createElement("script");f.type="text/javascript";f.onreadystatechange=function(){"complete"==
this.readyState&&i()};"Microsoft Internet Explorer"==navigator.appName&&f.attachEvent("onreadystatechange",i);f.onload=function(){i()};f.src=b;e.appendChild(f)}else a("Facebook was already loaded"),null==FB._apiKey?window.fbAsyncInit():m.core.updateLoader("facebook","externals",!0)}function a(b,a){SLAYER.instance.debug("FACEBOOK: "+b,a)}function k(b){c.hideGameClient();FB.ui(b,function(e){if(null==typeof b.callbacks)a("WARNING: No callback for request found!","warning");else{if("undefined"==typeof b.callbacks.onDone)a("WARNING: No onDone callback found!",
"warning");else b.callbacks.onDone();if(e)"undefined"==typeof b.callbacks.onSuccess?a("WARNING: No onSuccess callback found!","warning"):(b.callbacks.onSuccess(e),l(e));else if("undefined"==typeof b.callbacks.onFailed)a("WARNING: No onFailed callback found!","warning");else b.callbacks.onFailed(e)}c.unhideGameClient()})}function o(){var b=j;FB.Event.subscribe("edge.create",function(e){"undefined"==typeof b.callback?a("WARNING: You did not registered any kind of callback!","warning"):b.callback(e)})}
function l(b){if(j.counter){var a=0;p.each(b.request_ids,function(){a++});j.invite.displayFacebookInviteCounter(a)}}function n(b){b="undefined"==typeof b?null:b;"connected"==b?FB.api("/me/friends?fields=name,picture",g):FB.getLoginStatus(function(e){if(b==e.status)a("Possible loop in login status: state: "+e.state+" | prevSate: "+b,"error");else switch(e.status){case "unknown":s(e.status);break;case "not_authorized":s(e.status);break;case "connected":FB.api("/me/friends?fields=name,picture",g)}})}
function s(b){var a=m,f=a.core.getSettings();FB.login(function(a){a.authResponse&&("not_authorized"===b&&m.core.ajax({dataType:"json",type:"POST",data:{slService:"connect:storeFacebookId",slP:{accessToken:FB._authResponse.accessToken,fbUserId:FB._userID,userId:f.userId,userKeyId:f.userKeyId}},url:"undefined"==typeof f.dispatcherUrl?f.actionUrl:f.dispatcherUrl,success:function(){},error:function(){}}),n(a.status))},{scope:a.permissions})}function g(b){var a=b.data,f="undefined"==typeof m.message?"Play with me.":
m.message;c.getModule("invite").getView().renderContacts(a,{main:"slayer_friendSelect",table:"slayer_friendSelectFacebookFriends",button:"slayer_friendSelectFacebooFriendsButton",select:"slayer_fbContactSelectAll",unselect:"slayer_fbContactUnselectAll"},function(a){var e=c.getSettings();FB.ui({method:"apprequests",message:f,to:a,data:{inviteCode:SLAYER.getInviteCode({userId:e.userId,userKeyId:e.userKeyId,instanceId:e.instanceId,affiliateId:e.affiliateId,type:"facebook"})}},function(a){if("undefined"!=
typeof a&&null!=a){var e={},f=function(b,a){var e={};p.each(b.data,function(b,f){if(f.id==a)return e=f,!0});return e};p.each(a.to,function(a,c){var d=f(b,c);e[d.name]=!0});c.getModule("invite").getView().showResult(e)}})})}var m=null,p=null,j=null,c=null,r=null,w="en_US",y={"0":"af_ZA",1:"ar_AR",2:"az_AZ",3:"be_BY",4:"bg_BG",5:"bn_IN",6:"bs_BA",7:"ca_ES",8:"cs_CZ",9:"cy_GB",10:"da_DK",11:"de_DE",12:"el_GR",13:"en_GB",14:"en_PI",15:"en_UD",16:"en_US",17:"eo_EO",18:"es_ES",19:"es_LA",20:"et_EE",21:"eu_ES",
22:"fa_IR",23:"fb_LT",24:"fi_FI",25:"fo_FO",26:"fr_CA",27:"fr_FR",28:"fy_NL",29:"ga_IE",30:"gl_ES",31:"he_IL",32:"hi_IN",33:"hr_HR",34:"hu_HU",35:"hy_AM",36:"id_ID",37:"is_IS",38:"it_IT",39:"ja_JP",40:"ka_GE",41:"ko_KR",42:"ku_TR",43:"la_VA",44:"lt_LT",45:"lv_LV",46:"mk_MK",47:"ml_IN",48:"ms_MY",49:"nb_NO",50:"ne_NP",51:"nl_NL",52:"nn_NO",53:"pa_IN",54:"pl_PL",55:"ps_AF",56:"pt_BR",57:"pt_PT",58:"ro_RO",59:"ru_RU",60:"sk_SK",61:"sl_SI",62:"sq_AL",63:"sr_RS",64:"sv_SE",65:"sw_KE",66:"ta_IN",67:"te_IN",
68:"th_TH",69:"tl_PH",70:"tr_TR",71:"uk_UA",72:"vi_VN",73:"zh_CN",74:"zh_HK",75:"zh_TW"},x=null,u=this,t=this,v=this;u.setRunSettings=function(b){j=b};u.run=function(b){a("Call Handler");switch(b){case "doWallPost":var e=j;"undefined"==typeof e.title&&a("WARNING: No title found!","warning");"undefined"==typeof e.userId&&a("WARNING: No userId found!","warning");"undefined"==typeof e.userKeyId&&a("WARNING: No userKeyId found!","warning");"undefined"==typeof e.actionLink&&a("WARNING: No action link  found!",
"warning");"undefined"==typeof e.mediaItem&&a("WARNING: No media item found!","warning");"undefined"==typeof e.mediaItem.source&&a("WARNING: No media item source found!","warning");"undefined"==typeof e.mediaItem.type&&a("WARNING: No media item type found!","warning");"undefined"==typeof e.mediaItem.href&&a("WARNING: No media item href found!","warning");"undefined"==typeof e.actions&&a("WARNING: No actions object found!","warning");"undefined"==typeof e.actions.name&&a("WARNING: No actions name found!",
"warning");"undefined"==typeof e.actions.link&&a("WARNING: No actions link found!","warning");"undefined"==typeof e.description&&a("WARNING: No description found!","warning");"undefined"==typeof e.userDefaultMessage&&a("WARNING: No user default message found!","warning");"undefined"==typeof e.caption&&a("WARNING: No caption found!","warning");"undefined"==typeof e.assignee&&(e.assignee=null);"undefined"==typeof e.callbacks&&(e.callbacks=null);b=m;b={userId:e.userId,userKeyId:e.userKeyId,type:"b",
instanceId:b.gameId,affiliateId:b.affiliateId};b="?inviteCode="+c.getShare().getInviteCode(b);e.actionLink+=b;e.mediaItem.href+=b;e.actions.link+=b;b={method:"feed",name:e.title,link:e.actionLink,picture:e.mediaItem.source,description:e.description,message:e.userDefaultMessage,to:e.assignee,caption:e.caption,callbacks:e.callbacks};"undefined"!=typeof e.actions&&(b.actions=e.actions);k(b);break;case "renderLike":b=m;if(x.isFacebookLikeAllowed(b.affiliateId,b.gameId)){a("Preparing render settings");
var b=j,f="<fb:like";for(e in b){var d=b[e];"container"!=e&&(f="ref"==e?f+' ref="2640"':f+(" "+e+'="'+d+'"'))}f+="></fb:like>";a("Render LIKE button");document.getElementById(b.container).innerHTML=f;o();FB.XFBML.parse(document.getElementById(b.container)[0])}else a("WARNING: Like button is blocked by Sales-Tool","warning");break;case "sendRequest":e={type:j.type,data:j.data};b=j;f="undefined"==typeof j.filter?r._default:j.filter;f!=r._default&&"undefined"==typeof r[f]&&(a("WARNING: Filter is invalid! It will be set to default!",
"warning"),f=r._default);b.filter=f;"undefined"==typeof j.title&&a("WARNING: No title found!","warning");"undefined"==typeof j.message&&a("WARNING: No message found!","warning");"undefined"==typeof j.callbacks&&a("WARNING: No callbacks found!","warning");"undefined"==typeof j.data&&(j.data="");"undefined"==typeof j.to&&(j.to=null);k({method:"apprequests",title:j.title,message:j.message,to:j.to,callbacks:j.callbacks,filters:[j.filter],data:e});break;case "renderFriends":n();break;case "init":a("FB Loading & Initiation done!");
break;default:a("HANDLER: ERROR: No function found! ("+b+")","error")}};u.getLanguage=function(){return"undefined"==typeof m.language?"":m.language};u.getAppId=function(){var b=!1;if("undefined"!=typeof c.getSettings().gameId)if("undefined"!=typeof m.appId)b=m.appId;else{var a=-1==location.hostname.search("bigpoint.net")?"live":"dev";"live"==a&&(b=v.getSettings()[c.getSettings().gameId]);"dev"==a&&(b=t.getSettings()[c.getSettings().gameId])}return"undefined"==typeof b?!1:b};(function(b){c=SLAYER.instance;
t=new SLAYER.FBDEV;v=new SLAYER.FBLIVE;p=SLAYER.instance.getJQuery();if(null==document.getElementById("fb-root")){var e=document.getElementsByTagName("body")[0],f=document.createElement("div");e.appendChild(f)}"undefined"!=typeof b?m=b:a("ERROR: No initialization parameter found!","error");window.fbAsyncInit=function(){FB.init({appId:u.getAppId(),status:!0,cookie:!0,xfbml:!0,oauth2:!1,frictionlessRequests:!0});a("FB initialized with AppId "+m.appId);m.core.updateLoader("facebook","externals",!0)};
r={_default:"all",all:["all"],app_users:["app_users"],non_app_users:["non_app_users"]};i("init");x=new SLAYER.AFFILIATE(m.core)})(d)};
SLAYER.GOOGLE=function(d){function h(a,c){SLAYER.instance.debug("GOOGLE: "+a,c)}function i(){var a=!1,d="undefined"==typeof m.language?j:m.language;n.each(c,function(c,g){g==d&&(a=!0)});if(!a){h("WARNING: Given language is not provided by Google. Using default: "+j,"warning");var g=m;g.language=j;m=g}}function a(){if(0==p.length)h("All Google modules are loaded"),m.core.updateLoader("google","externals",!0);else{var c=p.shift();n.getScript(s+c,function(){h("Loaded module: "+c);a()})}}function k(){if(g.isGooglePlusOneAllowed(m.affiliateId,
m.gameId)){var a=l;if("undefined"==typeof a.container)h("PLUSONE: ERROR: No container found!","error");else{var c=a.container;a.container=void 0;"undefined"==typeof a.href&&(h("PLUSONE: WARNING: Parameter 'href' not found.","warning"),a.href="http://www.bigpoint.com");"undefined"==typeof a.size&&(h("PLUSONE: WARNING: Parameter 'size' not found.","warning"),a.size="standard");"undefined"==typeof a.annotation&&(h("PLUSONE: WARNING: Parameter 'annotation' not found.","warning"),a.annotation="none");
"undefined"==typeof a.width&&(h("PLUSONE: WARNING: Parameter 'width' not found.","warning"),a.width=0);"undefined"==typeof a.expandto&&(h("PLUSONE: WARNING: Parameter 'expandto' not found.","warning"),a.expandto="");"undefined"==typeof a.callback&&(h("PLUSONE: WARNING: Parameter 'callback' not found.","warning"),a.callback=function(){});"undefined"==typeof a.onstartinteraction&&(h("PLUSONE: WARNING: Parameter 'onstartinteraction' not found.","warning"),a.onstartinteraction=function(){});"undefined"==
typeof a.onendinteraction&&(h("PLUSONE: WARNING: Parameter 'onendinteraction' not found.","warning"),a.onendinteraction=function(){});gapi.plusone.render(c,a)}}else h("Plusone button is blocked by Sales-Tool")}function o(){if(171!=m.gameId&&311!=m.gameId)h("WARNING: Sharing is not available for your game","warning");else if(g.isGooglePlusOneAllowed(m.affiliateId,m.gameId)){var a=l;a.renderType="undefined"==typeof a.renderType?"direct":a.renderType;"undefined"==typeof a.type&&(h("SHARE: WARNING: Parameter 'type' not found!",
"warning"),a.type="http://www.bigpoint.com");"undefined"==typeof a.properties?h("SHARE: ERROR: No 'properties' object found!","error"):("undefined"==typeof a.properties.name&&(h("SHARE: WARNING: Parameter 'name' not found!","warning"),a.properties.name="Bigpoint"),"undefined"==typeof a.properties.description&&(h("SHARE: WARNING: Parameter 'description' not found!","warning"),a.properties.description="No description"),"undefined"==typeof a.properties.image&&(h("SHARE: WARNING: Parameter 'image' not found!",
"warning"),a.properties.image=""),"undefined"==typeof a.properties.url&&(h("SHARE: WARNING: Parameter 'url' not found!","warning"),a.properties.url="http://www.bigpoint.com"));var c={items:[a]},d={apiMode:"games"};if("container"==a.renderType){window.SLAYER_SHARE=function(){gapi.share.lightbox(c,d)};var i='<a href="javascript:SLAYER_SHARE();">'+("undefined"==typeof a.text?"Share with Google":a.text)+"</a>";n("#"+a.container).html(i)}else gapi.share.lightbox(c,d)}else h("WARNING: Plusone button is blocked by Sales-Tool",
"warning")}var l=null,n=null,s="https://apis.google.com/js/",g=null,m=null,p=[],j="en-US",c={"0":"ar",1:"bg",2:"ca",3:"zh-CN",4:"zh-TW",5:"hr",6:"cs",7:"da",8:"nl",9:"en-GB",10:"en-US",11:"et",12:"fil",13:"fi",14:"fr",15:"de",16:"el",17:"iw",18:"hi",19:"hu",20:"id",21:"it",22:"ja",23:"ko",24:"lv",25:"lt",26:"ms",27:"no",28:"fa",29:"pl",30:"pt-BR",31:"pt-PT",32:"ro",33:"ru",34:"sr",35:"sk",36:"sl",37:"es",38:"es-419",39:"sv",40:"th",41:"tr",42:"uk",43:"vi"};this.setRunSettings=function(a){l=a};this.run=
function(a){h("Call Handler");switch(a){case "renderPlusOne":k();break;case "renderShare":o();break;default:h("HANDLER: ERROR: Function not found("+a+")","error")}};this.getLanguage=function(){return"undefined"==typeof m.language?"":m.language};(function(c){m="undefined"!=typeof c?c:null;n=SLAYER.instance.getJQuery();i();window.___gcfg={lang:c.language,parsetags:"explicit"};g=new SLAYER.AFFILIATE(m.core);p.push("plusone.js");a()})(d)};
SLAYER.MAILHANDLER=function(){function d(a,d){SLAYER.instance.debug("MAILHANDLER: "+a,d)}var h=null,i=this;i.validateEmails=function(a){d("Validate emails...");if(a=i.prepareEmails(a)){var k=0!=a.length;h.each(a,function(a,h){d("Validate email: "+h);/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(h)||(k=!1)});return k}d("No valid mails after preparation!");return!1};i.prepareEmails=function(a){if(0==a.length)return d("WARNING: No raw data found!","warning"),!1;var a=a.replace(/;|\s|\x0B|\n\r/g,
",").split(","),i=[];h.each(a,function(a,d){0!=d&&(i[a++]=d)});return i};h=SLAYER.instance.getJQuery()};SLAYER.TOOLTIP=function(d){SLAYER.instance.getJQuery();0!=d.showTooltip&&(d.tooltipPosition="undefined"==typeof d.tooltipPosition?"bottom center":d.tooltipPosition,d.tooltipOffsetX="undefined"==typeof d.tooltipOffsetX?0:d.tooltipOffsetX,d.tooltipOffsetY="undefined"==typeof d.tooltipOffsetY?0:d.tooltipOffsetY)};
SLAYER.INVITE=function(d){function h(){var b=c.getSettings();b.renderTarget="undefined"==typeof b.renderTarget?"overlay":""==b.renderTarget?"overlay":b.renderTarget;b.dev="undefined"==typeof b.dev?!1:b.dev;b.language="undefined"==typeof b.language?"de_DE":b.language;b.iFrame="undefined"==typeof b.iFrame?!1:b.iFrame;b.editableUsername="undefined"==typeof b.editableUsername?!1:b.editableUsername;b.currentUsername="undefined"==typeof b.currentUsername?i("ERROR: No username found!","error"):b.currentUsername;
b.showTooltip="undefined"==typeof b.showTooltip?!0:b.showTooltip;b.facebookTab="undefined"==typeof b.facebookTab?!1:b.facebookTab;b.addressbookTab="undefined"==typeof b.addressbookTab?!1:b.addressbookTab;b.shareUrl="undefined"==typeof b.shareUrl?!0:b.shareUrl;b.defaultTab="undefined"==typeof b.defaultTab?"Facebook":b.defaultTab;b.showInviteInfo="undefined"==typeof b.showInviteInfo?!1:b.inviteInfo;b.buddyList="undefined"==typeof b.buddyList?!1:b.buddyList;b.additionalCssFile="undefined"==typeof b.additionalCssFile?
"":b.additionalCssFile;b.inviteTypes="undefined"==typeof b.inviteTypes?'{"facebook":"b","twitter":"c","google":"d","mail":"baa","web":"bab"}':b.inviteTypes;b.inviteUrl="undefined"==typeof b.inviteUrl?v:b.inviteUrl;b.onComplete="undefined"==typeof b.onComplete?function(){}:b.onComplete;b.contactInviteLimit=50;b.friendSearch="undefined"==typeof b.friendSearch?{}:b.friendSearch;b.friendSearch.url="undefined"==typeof b.friendSearch.url?i("ERROR: No friend search url found","error"):b.friendSearch.url;
var a=-1==location.href.search("bigpoint.net")?new SLAYER.INVITESETTINGSLIVE:new SLAYER.INVITESETTINGSDEV;"undefined"!=typeof a.getSettings()[b.gameId]&&(a=a.getSettings()[b.gameId],b.facebookTab="undefined"==typeof a.facebook||!1!=b.facebookTab?b.facebookTab:a.facebook,b.shareUrl="undefined"==typeof a.shareUrl?b.shareUrl:a.shareUrl,b.defaultTab="undefined"==typeof a.defaultTab?b.defaultTab:a.defaultTab,b.contactInviteLimit="undefined"==typeof a.limits.contactInvites?50:a.limits.contactInvites);c.setSettings(b)}
function i(b,a){SLAYER.instance.debug("INVITE: "+b,a)}function a(){l("a#slayer_sendMailButton").unbind("click").bind("click",function(){i("Handle email sending");var b=null,a=l(".slayer_mailInviteInputMessage textarea").val(),f=!0;n.clearErrorMessage();g.validateEmails(l(".slayer_mailInviteInputEmail textarea").val())?b=g.prepareEmails(l(".slayer_mailInviteInputEmail textarea").val()):(f=c.getText("gl.socialInvite.error.input.mails"),n.showEmailError(f),f=!1);i("Validate user message");a.length<=
w||(f=[],f[0]=w,n.showUserMessageError(c.getText("gl.socialInvite.error.input.userMessage",f)),f=!1);f&&(n.showLoader(),f=c.getSettings(),f=!l(".slayer_mailInviteFrom input").val()?f.currentUsername:l(".slayer_mailInviteFrom input").val(),s.send({emails:b,userMessage:a,username:f}))});l(".slayer_closeOverlayBottom").unbind("click").bind("click",function(){n.closeOverlay();k()});l(".slayer_closeOverlay").unbind("click").bind("click",function(){n.closeOverlay();k()});l("a#slayer_inviteNewButton").unbind("click").bind("click",
function(){n.clearForm();c.setCurrentTab("Mail")});l("li.slayer_tabsFacebook").unbind("click").bind("click",function(){var b=l("#slayer_friendSelectFacebookFriends").data("jsp");"undefined"!=typeof b&&(b.destroy(),l("#slayer_friendSelectFacebookFriends").html('<center><img src="/sharedpages/static/plugin/social/slayer/img/dialog/default/ajax-loader.gif" border="0" /></center>'));c.setCurrentTab("Facebook")});l("li.slayer_tabsAddressbook").unbind("click").bind("click",function(){c.setCurrentTab("Addressbook")});
l("li.slayer_tabsMail").unbind("click").bind("click",function(){c.setCurrentTab("Mail")});l("#slayer_buddyList input").bind("click",function(){l("#slayer_buddyList input").val("")});l("li.slayer_tabsBuddy").unbind("click").bind("click",function(){c.setCurrentTab("Buddy")});l("#slayer_buddyListSearch a").unbind("click").bind("click",function(){var b=c.getSettings(),a={search_str:l(".buddyId").val()};r.ajax({endpoint:b.friendSearch.endpoint,data:a,dataType:"json",url:b.friendSearch.url,success:n.displayFriendSearchResults,
error:n.displayFriendSearchResults,type:"GET"})})}function k(){i("Reset tabs and hide content");n.hideContent()}function o(){var b=c.getSettings();l.each(p,function(a,f){"object"==typeof f?l.each(f,function(a,e){b[a]="1"==e||"0"==e?"1"==e?!0:!1:e}):b[a]="1"==f||"0"==f?"1"==f?!0:!1:f});s=new SLAYER.INVITEMODEL(c);n=new SLAYER.INVITEVIEW(c);a();b.showInviteInfo&&(s.getUserLimits(),s.getUserInvites())}var l=null,n=null,s=null,g=null,m=null,p=null,j=null,c=this,r=null,w=140,y=null,x={},u="",t=[],v="http://"+
window.location.host+"/";c.isDevEnv=!1;c.addObjectToLoad=function(b){t.push(b)};c.removeObjectToLoad=function(b){l.each(t,function(a,f){b==f&&t.splice(a,1)});0==t.length&&c.getSettings().core.updateLoader("invite","externals",!0)};c.CSSLoadingDone=function(){c.removeObjectToLoad("css");r.onReady("invite",{init:!0,message:""})};c.getRunSettings=function(){return p};c.initTabs=function(){var b=c.getSettings();(b.facebookTab||b.buddyList||b.addressbookTab)&&l("#slayer_tabs").show();u=b.defaultTab?b.defaultTab:
b.facebookTab?"Facebook":b.addressbookTab?"Addressbook":"Mail"};c.getCurrentTab=function(){return u};c.setCurrentTab=function(b){u=b;n.switchTabs()};c.getSettings=function(){return m};c.setSettings=function(b){m=b};c.getText=function(b,a,f){b="undefined"==typeof f?b:f?b+".sing":b;f=[];f="undefined"==typeof a?{}:a;a=j[b];if("undefined"==typeof a)f=b;else{var b=a.split("%s"),c="",d=b.length;if(1<d){if(l.isArray(f))for(a=0;0<f.length&&a<d;)c=0!=a?c+(f.shift()+b[a]):c+b[a],a++;else c=b[0]+f+b[1];f=c}else f=
a}return f};c.debug=function(b,a){i(b,a)};c.ajax=function(b){r.ajax(b)};c.ajaxError=function(b,a,f){r.ajaxError(b,a,f)};c.getView=function(){return n};c.getModel=function(){return s};c.run=function(b){switch(b){case "dialog":n.renderInviteDialog();break;case "button":n.renderInviteDialogButton();break;case "settings":o();break;case "shareUrl":n.getShareUrl()}};c.addFriend=function(b){var a=c.getSettings();r.ajax({data:{slService:"friendship:invite",slP:{invitedID:b.data.userId,invitedKeyID:b.data.userKeyId}},
type:"POST",dataType:"json",error:n.addFriendFailedCallback,url:a.dispatcherUrl,success:n.addFriendCallback})};c.removeFriend=function(b){var a=c.getSettings();r.ajax({data:{slService:"friendship:cancel",slP:{userID:b.data.userId,userKeyID:b.data.userKeyId}},type:"POST",dataType:"json",error:n.removeFriendFailedCallback,url:a.dispatcherUrl,success:n.removeFriendCallback})};c.setRunSettings=function(b){p=b};c.displayFacebookInviteCounter=function(b){l("#slayer_friendSelectFacebookResponse").html(c.getText("gl.socialInvite.dialog.success.friendsInvited",
""+b));l("#slayer_friendSelectFacebookResponse").attr("onmousedown",null)};c.getStorage=function(){return x};c.setStorage=function(b){x=b};c.getCore=function(){return r};c.showFacebookFriendSelection=function(){var b=c.getSettings(),b={container:"slayer_friendSelectFacebook",title:b.gameTitle,message:b.facebook.message,data:b.facebook.data,filter:b.facebook.filter,to:b.facebook.to,callbacks:b.facebook.callbacks,counter:!0,invite:c};l("#"+b.container+"Response").html('<center><img src="/sharedpages/static/plugin/social/slayer/img/dialog/default/ajax-loader.gif" border="0" /></center>');
r.run({module:"facebook",func:"renderFriends",settings:b})};(function(b){c.addObjectToLoad("css");c.addObjectToLoad("view");c.addObjectToLoad("model");l=SLAYER.instance.getJQuery();m=b;r=m.core;c.isDevEnv=r.isDevEnv;j=new SLAYER.LANGUAGE;j=j.getLanguage();h();0==l("#slayer-root").length?(l("body").append('<div id="slayer-root"></div>'),i("Created SLAYER-ROOT")):(i("SLAYER-ROOT found"),l("#slayer-root").empty());0==l("#slayer-button").length?(l("body").append('<div id="slayer-button"></div>'),i("Created SLAYER-BUTTON")):
(i("SLAYER-BUTTON found"),l("#slayer-button").empty());y=new SLAYER.CSS({core:r,caller:c});g=new SLAYER.MAILHANDLER;s=new SLAYER.INVITEMODEL(c);n=new SLAYER.INVITEVIEW(c);c.initTabs();a();m.showInviteInfo&&(s.getUserLimits(),s.getUserInvites());y.loadCSSFiles({isDevEnv:c.isDevEnv,cssDev:m.cssDev,gameId:m.gameId,module:"invite"})})(d)};
SLAYER.INVITEVIEW=function(d){function h(a,b){j.debug("VIEW: "+a,b)}function i(){var d=c.getSettings(),b=c.getSettings(),e={buttonTooltip:c.getText("gl.socialInvite.button.tooltip",b.gameTitle),buddyHeader:c.getText("gl.socialInvite.dialog.buddy.header"),buddyInputValue:c.getText("gl.socialInvite.dialog.buddy.inputValue"),buddyResultHeader:c.getText("gl.socialInvite.dialog.buddy.resultHeader"),desc:c.getText("gl.socialInvite.dialog.desc"),formAgreed:c.getText("gl.socialInvite.dialog.form.agreed"),
formCancel:c.getText("gl.socialInvite.dialog.form.cancel"),formClose:c.getText("gl.socialInvite.dialog.form.close"),formInvited:c.getText("gl.socialInvite.dialog.form.invited"),formInvitedDesc:c.getText("gl.socialInvite.dialog.form.invited.desc"),formInviter:c.getText("gl.socialInvite.dialog.form.inviter"),formMessage:c.getText("gl.socialInvite.dialog.form.message"),formMessageDesc:c.getText("gl.socialInvite.dialog.form.message.desc"),formMoreFriendInvites:c.getText("gl.socialInvite.dialog.form.moreFriendInvites"),
formSearch:c.getText("gl.socialInvite.dialog.form.search"),formSend:c.getText("gl.socialInvite.dialog.form.send"),header:c.getText("gl.socialInvite.dialog.header"),socialNetworkHeader:c.getText("gl.socialInvite.dialog.socialNetworksHeader"),isEditableUser:b.editableUsername,showFbTab:b.facebookTab,showBuddyTab:b.buddyList,showAddressbookTab:b.addressbookTab,showTabs:b.facebook||b.buddyList||b.addressbookTab?!0:!1,showShareURL:b.shareUrl,tabNameBuddy:c.getText("gl.socialInvite.dialog.buddy.tabName"),
tabNameFb:c.getText("gl.socialInvite.dialog.gigya.tabName"),tabNameMail:c.getText("gl.socialInvite.dialog.mail.tabName"),tabNameAddressbook:c.getText("gl.socialInvite.dialog.addressbook.tabName"),userName:b.currentUsername,slideMessageInput:b.slideMessageInput?!0:!1,renderPopup:b.popup};b.shareUrl&&("undefined"==typeof b.shareImage&&(b.shareImage=r),e.shareMsgMail=encodeURIComponent(c.getText("gl.socialInvite.shareURL.message",b.gameTitle)+"\n")+a("mail",!0),e.shareMsg=c.getText("gl.socialInvite.shareURL.message",
b.gameTitle)+"\n"+b.inviteUrl,e.mailFormHeader=c.getText("gl.socialInvite.dialog.mailHeader"),e.shareHeader=c.getText("gl.socialInvite.dialog.shareHeader"),e.shareMsgGoogle=encodeURIComponent(c.getText("gl.socialInvite.shareURL.message",b.gameTitle)+"\n")+a("google",!0),e.shareMsgTwitter=encodeURIComponent(c.getText("gl.socialInvite.shareURL.message",b.gameTitle)),e.inviteUrlGoogle=a("google",!0),e.inviteUrlTwitter=a("twitter",!0),e.inviteUrlWeb=a("web",!1),e.shareMailSubject=c.getText("gl.socialInvite.shareURL.mailSubject",
b.gameTitle),e.shareFacebookPostURL="http://www.facebook.com/dialog/feed?app_id="+b.facebook.appId+"&link="+a("facebook",!0)+"&redirect_uri="+a("facebook",!0)+"&message="+encodeURIComponent(c.getText("gl.socialInvite.shareURL.message",b.gameTitle))+"&picture="+b.shareImage+"&caption="+c.getText("gl.socialInvite.fbCaption")+"&name={{shareMailSubject}}");b=[];b.button=y.toHTML(inviteTemplateButton,e);b.dialog=y.toHTML(inviteTemplate,e);g("#slayer-root").empty();g("#slayer-button").empty();g("#slayer-root").append(b.dialog);
e="undefined"==typeof d.hideButton?!1:d.hideButton;g("#slayer-button").append(b.button);jQuery("#slayer_dialog").addClass(d.language);e&&g(".social-invite a").hide();d.slideMessageInput&&k(!1);d.buddyList&&!x&&(g("#slayer-root").append('<div class="buddyFeedback" style="display:none;"><span></span></div>'),"undefined"!=typeof g(".buddyFeedback").overlay?x=g(".buddyFeedback").overlay({oneInstance:!1,fixed:!1,closeOnClick:!1,top:"center",left:"center"}):h("ERROR: Cannot create Overlay","error"))}function a(a,
b){var e=c.getSettings();g.parseJSON(e.inviteTypes);var f=e.inviteUrl+"?",f=f+j.getModel().getAIDUrlParam(a,"share");"undefined"!=typeof e.userId&&"undefined"!=typeof e.userKeyId&&"undefined"!=typeof e.instanceId&&"undefined"!=typeof e.affiliateId&&(f+="&invID="+j.getCore().getInviteCode({type:"invite",userId:e.userId,userKeyId:e.userKeyId,instanceId:e.instanceId,affiliateId:e.affiliateId}));return b?encodeURIComponent(f):f}function k(a){if("undefined"!=typeof a){var b=!0;g(".slayer_mailInviteInputMessage label").click(function(){b?
g(".slayer_mailInviteInputMessage .slideContent").slideDown():g(".slayer_mailInviteInputMessage .slideContent").slideUp();b=!b})}}function o(a){var b=c.getSettings(),a=g(a).overlay({mask:{color:"#333",loadSpeed:200,opacity:0.7},closeOnClick:!1,fixed:!1,oneInstance:!1,onBeforeLoad:function(){b.core.hideGameClient();p=""==p?g("#slayer_tabs li").not("li.slayer_tabsCurrent").css("margin-left"):p;j.initTabs();b.facebookTab||b.buddyList?""!=j.getCurrentTab()&&c.switchTabs(1):c.showForm()},onClose:function(){c.clearErrorMessage();
c.clearForm();b.core.unhideGameClient();var a=b.onComplete;if(a&&"function"==typeof a){var f=null==j.getStorage()?null:j.getStorage().responseData;a(f)}}});c.setOverlay(a)}function l(a){c.hideContent();g("#slayer_mailInviteResult").find("ul").remove();var b=g("#slayer_mailInviteResult").prepend("<ul></ul>").find("ul");g.each(a,function(a,f){b.append("<li>"+c.getText(f?"gl.socialInvite.dialog.success.user":"gl.socialInvite.dialog.success.failed",Array(a))+"</li>")});g("#slayer_mailInviteResult").fadeIn(500)}
function n(a){var a="gl.socialInvite.error."+("200.03"!=a&&"500"!=a?"500":a),b=c.getText(a);return b=b!=a?b:c.getText("gl.socialInvite.error.500")}function s(a){g("div.buddyFeedback span").empty().append(a);x&&(x.overlay().isOpened()&&(x.overlay().close(),null!=u&&clearTimeout(u)),x.overlay().load(),u=setTimeout("_feedbackOverlay.overlay().close()",3E3))}var g=null,m=null,p="",j=null,c=this,r="",w=[],y=null,x=null,u=null,t=0;c.getShareUrl=function(){var c=j.getRunSettings();c.encoded="undefined"==
typeof c.encoded?!1:c.encoded;var b=a(c.provider,c.encoded);c.callback(b)};c.switchTabs=function(a){"undefined"==typeof a&&(a="slow");var b="li.slayer_tabs"+j.getCurrentTab();g(b).animate({"margin-left":0},{duration:a,queue:!1,complete:function(){g(this).addClass("slayer_tabsCurrent")}});g("#slayer_tabs li").not(b).animate({"margin-left":c.getTabMargin()},{duration:a,queue:!1,complete:function(){g(this).removeClass("slayer_tabsCurrent")}});"li.slayer_tabsMail"==b?(c.showForm(500),j.getSettings().showInviteInfo&&
(j.getModel().getUserInvites(),j.getModel().getUserLimits())):"li.slayer_tabsFacebook"==b?c.showFriendSelection(500):"li.slayer_tabsAddressbook"==b?c.showAddressbook(500):"li.slayer_tabsBuddy"==b&&c.showBuddyList(500);g("#slayer_dialog").removeClass();a=b.substring(3)+"_active";g("#slayer_dialog").addClass(a)};c.clearForm=function(){g(".slayer_mailInviteInput textarea").val("");g("#slayer_mailInviteResult ul").val("");c.clearErrorMessage()};c.renderInviteDialog=function(){h("RenderInviteDialog");
if("overlay"==c.getSettings().renderTarget)null==c.getOverlay()&&(h("Preinitialize the Button"),c.renderInviteDialogButton()),c.getOverlay().overlay().load(),g("#slayer_dialog").show();else if("popup"==c.getSettings().renderTarget){h("Render dialog in popUp");var a=c.getSettings(),b="http://"+document.location.host,b=b+(a.dev?"/plugin/social/services/slayer/html/template.html":"/sharedpages/static/plugin/social/slayer/html/template.html"),b="undefined"!=typeof w[a.gameId]?w[a.gameId]:b,e;e=""+("gameTitle="+
a.gameTitle+"&");e+="gameId="+a.gameId+"&";e+="affiliateId="+a.affiliateId+"&";e+="dispatcherUrl="+a.dispatcherUrl+"&";e+="currentUsername="+a.currentUsername+"&";e+="editableUsername="+a.editableUsername+"&";e+="language="+a.language+"&";e+="shareUrl="+a.shareUrl+"&";e+="dev="+a.dev+"&";e=encodeURIComponent(e);window.open(b+"?"+e,a.gameTitle,"width=709,height=520").focus()}};c.renderInviteDialogButton=function(){h("RenderInviteDialogButton");c.getSettings().hideButton||g(".slayer_overlayTrigger").show();
o(".slayer_overlayTrigger a")};c.closeOverlay=function(){m.overlay().close()};c.getSettings=function(){return j.getSettings()};c.setSettings=function(a){j.setSettings(a)};c.getOverlay=function(){return m};c.setOverlay=function(a){m=a};c.getTabMargin=function(){return p?p:0};c.getText=function(a,b,c){return j.getText(a,b,c)};c.hideContent=function(){g("#slayer_busy").hide();g("#slayer_mailInvite").hide();g("#slayer_mailInviteResult").hide();g(".slayer_mailInviteSendError").hide();g("#slayer_friendSelect").hide();
g("#slayer_friendSelectFacebookFriendsButton").hide();g("#slayer_addressbook").hide();g("#slayer_buddyList").hide();g("#slayer_shareUrlContainer").hide();g("#slayer_tabs li").css("margin-left","");g("#slayer_buddyListResult").html("");x&&x.overlay().close()};c.showForm=function(a){a="undefined"==typeof a?0:a;c.hideContent();c.clearForm();g("#slayer_dialogContainer").fadeIn(a);g("#slayer_mailInvite").fadeIn(a);g("#slayer_shareUrlContainer").fadeIn(a)};c.showUserLimits=function(){};c.showUserInvites=
function(){};c.showFriendSelection=function(a){a="undefined"==typeof a?0:a;c.hideContent();g("#slayer_friendSelect").fadeIn(a);setTimeout(j.showFacebookFriendSelection,a)};c.showAddressbook=function(a){a="undefined"==typeof a?0:a;c.hideContent();g("#slayer_addressbook").fadeIn(a)};c.showBuddyList=function(a){a="undefined"==typeof a?0:a;c.hideContent();g("#slayer_buddyList").fadeIn(a)};c.addFriendCallback=function(a){var b=c.getText("gl.socialInvite.dialog.search.friendAddedFailed"),e=c.getText("gl.socialInvite.dialog.search.friendAdded");
s("undefined"==typeof a||null==typeof a?b:"undefined"==typeof a.meta?b:"undefined"==typeof a.meta.success?b:!1==a.meta.success?b:e)};c.addFriendFailedCallback=function(){h("ERROR: Adding a friend failed (Ajax Error)","error")};c.removeFriendCallback=function(a){var b=c.getText("gl.socialInvite.dialog.search.friendRemovedFailed"),e=c.getText("gl.socialInvite.dialog.search.friendRemoved");s("undefined"==typeof a||null==typeof a?b:"undefined"==typeof a.meta?b:"undefined"==typeof a.meta.success?b:!1==
a.meta.success?b:e)};c.removeFriendFailedCallback=function(){h("ERROR: Removing a friend failed (Ajax Error)","error")};c.clearErrorMessage=function(){g(".slayer_mailInviteInputMessage .slayer_mailInviteHelpText").html(c.getText("gl.socialInvite.dialog.form.message.desc"));g(".slayer_mailInviteInputEmail .slayer_mailInviteHelpText").html(c.getText("gl.socialInvite.dialog.form.invited.desc"));g(".slayer_mailInviteFooterError").html("");g(".slayer_mailInviteInput").removeClass("slayer_mailInviteInputError")};
c.showLoader=function(){c.clearErrorMessage();c.hideContent();g("#slayer_busy").fadeIn(500)};c.showSendError=function(a){a="undefined"==typeof a?"":a;g("#slayer_mailInvite").show();g("#slayer_busy").hide();g(".slayer_mailInviteSendError").html(a);g(".slayer_mailInviteSendError").fadeIn(500)};c.updateHTML=function(){i()};c.handleServiceResponse=function(a){a="undefined"==typeof a?null:a;c.clearErrorMessage();null==a?c.showSendError(n()):null==a.data?c.showSendError(n(a.meta.error)):l(a.data)};c.showEmailError=
function(a){g(".slayer_mailInviteInputEmail .slayer_mailInviteHelpText").html(a);g(".slayer_mailInviteInputEmail").addClass("slayer_mailInviteHelpError")};c.showUserMessageError=function(a){g(".slayer_mailInviteInputMessage .slayer_mailInviteHelpText").html(a);g(".slayer_mailInviteInputMessage").addClass("slayer_mailInviteHelpError")};c.displayFriendSearchResults=function(a){var a="undefined"==typeof a?"":"undefined"==typeof a.data?"":a.data,b="<ul>";if(0==a.length)b=c.getText("gl.socialInvite.dialog.search.nothingFound"),
g("#slayer_buddyListResult").html(b);else{var e=[];g.each(a,function(a,c){b=1==c.isFriend?b+y.toHTML(inviteTemplateItemRemove,c):b+y.toHTML(inviteTemplateItemAdd,c);e[c.userId]=c.userKeyId});b+="</ul>";g("#slayer_buddyListResult").html(b);g("#slayer_buddyListResult").jScrollPane();g(".slayer_buddyAdd").bind("click",function(){var a=g(this).attr("value"),b=e[a];g(this).css("backgroundPosition","bottom left");g(this).unbind("click");j.addFriend({data:{userId:a,userKeyId:b}})});g(".slayer_buddyDel").bind("click",
function(){var a=g(this).attr("value"),b=e[a];g(this).css("backgroundPosition","bottom left");g(this).unbind("click");j.removeFriend({data:{userId:a,userKeyId:b}})})}};c.renderContacts=function(a,b,e){a.sort(function(a,b){return a.name<b.name?-1:a.name==b.name?0:1});t=0;var f='<table id="slayer_contacts"><tr>',d=0;g.each(a,function(a,b){4==d&&(f+="</tr><tr>",d=0);b.picture="no image"==b.picture?"":b.picture;var c=-1==b.id.search("@")?b.name:b.id;f+='<td><div class="slayer_contact" id="slayerContact-'+
b.id+'">';f+='<img class="slayer_contactImage" src="'+b.picture+'" title="'+c+'" /><br />';f+="<b>"+b.name+"</b></div></td>";d++});var f=f+"</table>",h='<a id="slayer_contactsInviteButton" class="slayer_button" href="javascript:;"><span><em>'+c.getText("gl.socialInvite.dialog.form.send")+"</em></span></a>";g("#"+b.table).empty().html(f);g("#"+b.button).empty().html(h);g("#"+b.table).jScrollPane();g.each(a,function(a,b){g("#slayerContact-"+b.id).bind("click",function(){g(this).hasClass("slayer_contactSelected")?
(g(this).removeClass("slayer_contactSelected"),t--):t<c.getSettings().contactInviteLimit&&(g(this).addClass("slayer_contactSelected"),t++)})});g("#"+b.button).bind("click",function(){var a=g("#"+b.table+" .slayer_contactSelected"),c=[];g.each(a,function(){var a=this.id.substring(14);c.push(a)});e(c)})};c.showResult=function(a){l(a)};j=d;g=SLAYER.instance.getJQuery();y=new SL_Mustache;(function(){var a=c.getSettings();"undefined"==typeof a.gameTitle&&(h("WARNING: You didnt set a game title. Tooltip will be disabled!",
"warning"),g(".slayer_overlayTrigger a").attr("title",""),a.showTooltip=0,c.setSettings(a))})();r="http://assets-575-www.bigpoint.net/marketingassets/bigpoint/bigpoint_logo_90x90.jpg";i();c.getSettings().invite=j;c.clearErrorMessage();j.removeObjectToLoad("view")};
SLAYER.INVITEMODEL=function(d){var h=null,i=this;i.getSettings=function(){return h.getSettings()};i.setSettings=function(a){h.setSettings(a)};i.getText=function(a,d,i){return h.getText(a,d,i)};i.getUserLimits=function(){var a=i.getSettings();i.ajax({type:"POST",data:{slService:"invite:getUserLmits"},dataType:"json",url:"undefined"==typeof a.dispatcherUrl?a.actionUrl:a.dispatcherUrl,success:function(a){i.showUserLimits(a.data)},error:function(a,d,i){h.ajaxError(a,d,i)}})};i.getUserInvites=function(){var a=
i.getSettings();i.ajax({type:"POST",data:{slService:"invite:getUserInvites"},dataType:"json",url:"undefined"==typeof a.dispatcherUrl?a.actionUrl:a.dispatcherUrl,success:function(a){i.showUserInvites(a.data)},error:function(a,d,i){h.ajaxError(a,d,i)}})};i.ajax=function(a){h.ajax(a)};i.ajaxError=function(a,d,i){h.ajaxError(a,d,i)};i.send=function(a){var d=i.getSettings(),o=null,l=null;"undefined"!=typeof d.dispatcherUrl?(o=d.dispatcherUrl,l={slService:"invite:sendinvite",slP:{emails:a.emails.join(","),
userMessage:a.userMessage,userName:a.username}},d.dev&&(l.slP.userID=d.userId,l.slP.userKeyID=d.userKeyId,l.slP.gameID=d.gameId,l.slP.instanceID=d.instanceId,l.slP.language=d.language)):(o=d.actionUrl,l={emails:a.emails.join(","),userMessage:a.userMessage,userName:a.username});i.ajax({url:o,data:l,success:function(a){var d=h.getStorage();d.responseData=null==a?a:null!=a.data?a.data:a;h.setStorage(d);h.getView().handleServiceResponse(a)},error:function(){h.getView().showSendError(i.getText("gl.socialInvite.error.500"))}})};
i.getAIDUrlParam=function(a,d){var h=[];h.facebook={share:3520,gigyaShare:3518,invite:2641};h.twitter={share:3521,gigyaShare:3519};h.email={share:2883};h.google={share:3547};h.web={share:3546};var i="";"undefined"!=typeof h[a]&&"undefined"!=typeof h[a][d]&&(i="&aid="+h[a][d]);return i};h=d;i.getSettings();SLAYER.instance.getJQuery();h.removeObjectToLoad("model")};
SLAYER.FRIENDSHIP=function(d){function h(){var d=i;d.callback="undefined"==typeof d.callback?function(){}:d.callback;a.core.ajax({url:a.dispatcherUrl,dataType:"json",type:"GET",data:{slService:"friendship:getGameFriends"},success:function(a){d.callback(a)},error:a.core.ajaxError})}var i=null,a=null,k=null;this.setRunSettings=function(a){i=a};this.run=function(a){switch(a){case "getGameFriends":h()}};(function(d){k=d.core;k.getJQuery();a=d;a.core.updateLoader("friendship","externals",!0)})(d)};
var cookieLib=function(d,h,i){if("undefined"!=typeof h||d&&"string"!=typeof d)if("string"==typeof d){i=i||{};null===h&&(h="",i.expires=-1);var a="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString))"number"==typeof i.expires?(a=new Date,a.setTime(a.getTime()+864E5*i.expires)):a=i.expires,a="; expires="+a.toUTCString();var k=i.path?"; path="+i.path:"",o=i.domain?"; domain="+i.domain:"",i=i.secure?"; secure":"";document.cookie=d+"="+encodeURIComponent(h)+a+k+o+i}else for(a in d)jQuery.cookie(a,
d[a],h||i);else{h={};if(document.cookie){i=document.cookie.split(";");for(a=0;a<i.length;a++)if(k=jQuery.trim(i[a]),d){if(k.substr(0,d.length+1)==d+"="){h=decodeURIComponent(k.substr(d.length+1));break}}else o=k.indexOf("="),h[k.substr(0,o)]=decodeURIComponent(k.substr(o+1))}return h}},SL_Mustache=function(){this.toHTML=function(d,h,i,a){var k=new SL_MustacheRenderer;a&&k.setSendFun(a);k.render(d,h,i);if(!a)return k.buffer.join("\n")}},SL_MustacheRenderer=function(){function d(a){""!=a&&g.buffer.push(a)}
function h(a){return-1==a.indexOf(m+"%")?a:a.replace(RegExp(m+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+p),function(a,d,g){if(!c[d])throw{message:"This implementation of mustache doesn't understand the "+d+" pragma!"};j[d]={};g&&(a=g.split("="),j[d][a[0]]=a[1]);return""})}function i(a,c,d){return-1==a.indexOf(m+"#")&&-1==a.indexOf(m+"^")?a:a.replace(RegExp(m+"(\\^|\\#)\\s*(.+)\\s*"+p+"\n*([\\s\\S]+?)"+m+"\\/\\s*\\2\\s*"+p+"\\s*","mg"),function(a,h,i,b){a=o(i,c);if("^"==h)return!a||"object"==typeof a&&0===a.length?
g.render(b,c,d,!0):"";if("#"==h)return"object"==typeof a?s(a,function(a){return g.render(b,n(a),d,!0)}).join(""):"function"===typeof a?a.call(c,b,function(a){return g.render(a,c,d,!0)}):a?g.render(b,c,d,!0):""})}function a(a,c,h,i){for(var j=function(){return RegExp(m+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+p+"+","g")},n=j(),b=function(a,b,d){switch(b){case "!":return"";case "=":return a=d.split(" "),m=k(a[0]),p=k(a[1]),n=j(),"";case ">":a=d.replace(/^\s*|\s*$/g,"");if(!h||void 0===h[a])throw{message:"unknown partial "+
a};return"object"!=typeof c[a]?g.render(h[a],c,h,!0):g.render(h[a],c[a],h,!0);case "{":return o(d,c);default:return l(o(d,c))}},a=a.split("\n"),e=0;e<a.length;e++)a[e]=a[e].replace(n,b,this),i||d(a[e]);if(i)return a.join("\n")}function k(a){arguments.callee.sRE||(arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g"));return a.replace(arguments.callee.sRE,"\\$1")}function o(a,c){var a=a.replace(/^\s*|\s*$/g,""),d;!1===c[a]||0===c[a]||c[a]?d=c[a]:(!1===r[a]||0===
r[a]||r[a])&&(d=r[a]);return"function"===typeof d?d.apply(c):void 0!==d?d:""}function l(a){return(""+(null===a?"":a)).replace(/&(?!\w+;)|["'<>\\]/g,function(a){switch(a){case "&":return"&amp;";case "\\":return"\\\\";case '"':return"&quot;";case "'":return"&#39;";case "<":return"&lt;";case ">":return"&gt;";default:return a}})}function n(a){if(a&&"object"==typeof a)return a;var c=".",d={};j["IMPLICIT-ITERATOR"]&&(c=j["IMPLICIT-ITERATOR"]);d[c]=a;return d}function s(a,c){if("function"==typeof a.map)return a.map(c);
for(var d=[],g=a.length,h=0;h<g;h++)d.push(c(a[h]));return d}var g=this,m,p,j,c,r;g.setSendFun=function(){};g.render=function(c,j,k,l){l||(r=j,g.buffer=[]);if(-1==c.indexOf(m+"")){if(l)return c;d(c)}else{c=h(c);c=i(c,j,k);if(l)return a(c,j,k,l);a(c,j,k,l)}};m="{{";p="}}";r={};j={};c={"IMPLICIT-ITERATOR":!0};g.buffer=[]};
SLAYER.LIVESETTINGS=function(){var d={350:{481:{facebook_like:{visible:0},google_plus_one:{visible:0}},696:{facebook_like:{visible:0},google_plus_one:{visible:1}}},337:{14:{facebook_like:{visible:1},google_plus_one:{visible:1}},171:{facebook_like:{visible:0},google_plus_one:{visible:0}},481:{facebook_like:{visible:0},google_plus_one:{visible:0}},721:{facebook_like:{visible:0},google_plus_one:{visible:0}}},573:{4:{facebook_like:{visible:0},google_plus_one:{visible:0}},7:{facebook_like:{visible:0},
google_plus_one:{visible:0}},10:{facebook_like:{visible:0},google_plus_one:{visible:0}},14:{facebook_like:{visible:0},google_plus_one:{visible:0}},22:{facebook_like:{visible:0},google_plus_one:{visible:0}},54:{facebook_like:{visible:0},google_plus_one:{visible:0}},56:{facebook_like:{visible:0},google_plus_one:{visible:0}},86:{facebook_like:{visible:0},google_plus_one:{visible:0}},171:{facebook_like:{visible:0},google_plus_one:{visible:0}},204:{facebook_like:{visible:0},google_plus_one:{visible:0}},
311:{facebook_like:{visible:0},google_plus_one:{visible:0}},441:{facebook_like:{visible:0},google_plus_one:{visible:0}},481:{facebook_like:{visible:0},google_plus_one:{visible:0}},696:{facebook_like:{visible:0},google_plus_one:{visible:0}},721:{facebook_like:{visible:1},google_plus_one:{visible:0}}},964:[{facebook_like:{visible:0},google_plus_one:{visible:0}}],1417:{171:{facebook_like:{visible:0},google_plus_one:{visible:0}},311:{facebook_like:{visible:0},google_plus_one:{visible:0}},481:{facebook_like:{visible:0},
google_plus_one:{visible:0}}},2043:[{facebook_like:{visible:0},google_plus_one:{visible:0}}],2682:{481:{facebook_like:{visible:0},google_plus_one:{visible:0}}},3889:[{facebook_like:{visible:0},google_plus_one:{visible:0}}]};this.getSettings=function(){return d}};
SLAYER.DEVSETTINGS=function(){var d={333:{171:{facebook_like:{visible:0},google_plus_one:{visible:0}}},350:{522:{facebook_like:{visible:1},google_plus_one:{visible:0}}},1:[{facebook_like:{visible:1},google_plus_one:{visible:1}}],123:{623:{facebook_like:{visible:0},google_plus_one:{visible:1}}},337:{171:{facebook_like:{visible:0},google_plus_one:{visible:0}},481:{facebook_like:{visible:0},google_plus_one:{visible:1}}},1626:{467:{facebook_like:{visible:1},google_plus_one:{visible:1}}},2043:{522:{facebook_like:{visible:0},
google_plus_one:{visible:0}}}};this.getSettings=function(){return d}};SLAYER.FBLIVE=function(){var d={441:"172652859589",313:"161754880551771",1:"257629167586506",171:"349417181688",22:"364160817714",522:"201835296501572",525:"167358906661063",201:"230043510358380",826:"109974702426362",500:"",481:"197041727008151",610:"197041727008151"};this.getSettings=function(){return d}};
SLAYER.FBDEV=function(){var d={441:"190714187640611",313:"105683159516902",1:"217541778262500",171:"144885742218767",22:"364160817714",522:"201835296501572",693:"167358906661063",201:"230043510358380",826:"171958362865555",500:"",481:"217541778262500",610:"217541778262500"};this.getSettings=function(){return d}};
SLAYER.INVITESETTINGSLIVE=function(){var d={441:{shareUrl:!0,defaultTab:"Facebook",facebook:!1,limits:{contactInvites:50}},313:{shareUrl:!0,defaultTab:"Facebook",facebook:!1,limits:{contactInvites:50}},1:{shareUrl:!0,defaultTab:"Facebook",facebook:!1,limits:{contactInvites:50}},171:{shareUrl:!0,defaultTab:"Facebook",facebook:!1,limits:{contactInvites:50}},22:{shareUrl:!0,defaultTab:"Facebook",facebook:!1,limits:{contactInvites:50}},522:{shareUrl:!0,defaultTab:"Facebook",facebook:!0,limits:{contactInvites:50}},
525:{shareUrl:!0,defaultTab:"Facebook",facebook:!1,limits:{contactInvites:50}},201:{shareUrl:!0,defaultTab:"Facebook",facebook:!1,limits:{contactInvites:50}},826:{shareUrl:!0,defaultTab:"Facebook",facebook:!1,limits:{contactInvites:50}},500:{shareUrl:!0,defaultTab:"Facebook",facebook:!1,limits:{contactInvites:50}},481:{shareUrl:!0,defaultTab:"Mail",facebook:!0,limits:{contactInvites:50}},610:{shareUrl:!0,defaultTab:"Mail",facebook:!0,limits:{contactInvites:50}}};this.getSettings=function(){return d}};
SLAYER.INVITESETTINGSDEV=function(){var d={441:{shareUrl:!0,defaultTab:"Facebook",facebook:!0,limits:{contactInvites:50}},313:{shareUrl:!0,defaultTab:"Facebook",facebook:!0,limits:{contactInvites:50}},1:{shareUrl:!0,defaultTab:"Facebook",facebook:!0,limits:{contactInvites:50}},171:{shareUrl:!0,defaultTab:"Facebook",facebook:!0,limits:{contactInvites:50}},22:{shareUrl:!0,defaultTab:"Facebook",facebook:!0,limits:{contactInvites:50}},522:{shareUrl:!0,defaultTab:"Facebook",facebook:!0,limits:{contactInvites:50}},
693:{shareUrl:!0,defaultTab:"Facebook",facebook:!0,limits:{contactInvites:50}},201:{shareUrl:!0,defaultTab:"Facebook",facebook:!0,limits:{contactInvites:50}},826:{shareUrl:!0,defaultTab:"Facebook",facebook:!0,limits:{contactInvites:50}},500:{shareUrl:!0,defaultTab:"Facebook",facebook:!0,limits:{contactInvites:50}},481:{shareUrl:!0,defaultTab:"Mail",facebook:!0,limits:{contactInvites:50}},610:{shareUrl:!0,defaultTab:"Mail",facebook:!0,limits:{contactInvites:50}}};this.getSettings=function(){return d}};SLAYER.LANGUAGE=function(){var d={"gl.socialInvite.dialog.buddy.header":"Add a player to your buddy list:","gl.socialInvite.dialog.buddy.inputValue":"Username / User ID","gl.socialInvite.dialog.buddy.tabName":"Buddy list","gl.socialInvite.dialog.buddy.resultHeader":"Search results","gl.socialInvite.dialog.desc":"Why play alone when you can play together? Invite friends to your game.","gl.socialInvite.dialog.failed.failed":"Invite failed","gl.socialInvite.dialog.form.inviter":"From:","gl.socialInvite.dialog.form.invited":"To:",
"gl.socialInvite.dialog.form.invited.desc":"(separate multiple e-mail addresses with commas)","gl.socialInvite.dialog.form.message":"Send message:","gl.socialInvite.dialog.form.message.desc":"(optional)","gl.socialInvite.dialog.form.agreed":"I know the person/people I'd like to invite.","gl.socialInvite.dialog.form.search":"Search","gl.socialInvite.dialog.form.send":"Invite friends","gl.socialInvite.dialog.form.cancel":"Cancel","gl.socialInvite.dialog.form.moreFriendInvites":"Invite more friends",
"gl.socialInvite.dialog.form.close":"Close","gl.socialInvite.dialog.gigya.tabName":"Facebook","gl.socialInvite.dialog.header":"Invite your friends!","gl.socialInvite.dialog.sendInfo.emailInvites.sing":"%s friend already registered.","gl.socialInvite.dialog.sendInfo.emailInvites":"%s friends already registered.","gl.socialInvite.dialog.sendInfo.emailsOpen":"You can still send %s e-mails today.","gl.socialInvite.dialog.sendInfo.emailsOpen.sing":"You can still send %s e-mail today.","gl.socialInvite.dialog.sendInfo.emailsSent":"You already sent %s e-mails today.",
"gl.socialInvite.dialog.sendInfo.emailsSent.sing":"You already sent %s e-mails today.","gl.socialInvite.dialog.success.user":"%s was successfully invited.","gl.socialInvite.dialog.success.failed":"Unable to invite %s.","gl.socialInvite.dialog.success.friendsInvited":"You invited %s friend(s).","gl.socialInvite.error.200.03":"You've invited the maximum number of friends for today. Invite more friends tomorrow!","gl.socialInvite.error.200.04":"Invalid e-mail address; please provide a valid e-mail address.",
"gl.socialInvite.error.500":"Oops, that didn't work. Please try again later.","gl.socialInvite.error.input.mails":"Please verify the e-mail address(es) you entered.","gl.socialInvite.error.input.agreed":"Please confirm that you are personally acquainted with the people you'd like to invite.","gl.socialInvite.error.input.userMessage":"Message may not contain more than %s characters.","gl.socialInvite.button.tooltip":"Don't wanna play alone? Invite friends to play %s.","gl.socialInvite.dialog.shareHeader":"Use your existing social networks:",
"gl.socialInvite.dialog.mailHeader":"Or send friends an e-mail invitation:","gl.socialInvite.dialog.mail.tabName":"E-mail","gl.socialInvite.dialog.socialNetworksHeader":"Invite friends from your social networks:","gl.socialInvite.notification.text.body":"Body:","gl.socialInvite.notification.text.subject":"Subject:","gl.socialInvite.notification.success":"Messages successfully sent: ","gl.socialInvite.shareURL.mailSubject":"Invitation to %s","gl.socialInvite.shareURL.message":"Players wanted! %s is a lot of fun and it's free. Join now at:",
"gl.socialInvite.fbCaption":"A bigpoint.com game","gl.socialInvite.dialog.search.nothingFound":"No player found","gl.socialInvite.dialog.search.friendRemovedFailed":"Friend couldn't be deleted.","gl.socialInvite.dialog.search.friendRemoved":"Friend was successfully deleted.","gl.socialInvite.dialog.search.friendAddedFailed":"Player couldn't be added.","gl.socialInvite.dialog.search.friendAdded":"Player was successfully added."};this.getLanguage=function(){return d}};