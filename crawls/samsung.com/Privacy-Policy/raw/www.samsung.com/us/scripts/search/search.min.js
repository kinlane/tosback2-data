
var Class=(function(){function emptyFunction(){};function subclass(){};function create(){var parent=null,properties=Pprotype_$A(arguments);if(Object.isFunction(properties[0]))
parent=properties.shift();function klass(){this.initialize.apply(this,arguments);}
Object.extend(klass,Class.Methods);klass.superclass=parent;klass.subclasses=[];if(parent){subclass.prototype=parent.prototype;klass.prototype=new subclass;parent.subclasses.push(klass);}
for(var i=0;i<properties.length;i++)
klass.addMethods(properties[i]);if(!klass.prototype.initialize)
klass.prototype.initialize=emptyFunction;klass.prototype.constructor=klass;return klass;}
function addMethods(source){var ancestor=this.superclass&&this.superclass.prototype;var properties=Object.keys(source);if(!Object.keys({toString:true}).length){if(source.toString!=Object.prototype.toString)
properties.push("toString");if(source.valueOf!=Object.prototype.valueOf)
properties.push("valueOf");}
for(var i=0,length=properties.length;i<length;i++){var property=properties[i],value=source[property];if(ancestor&&Object.isFunction(value)&&value.argumentNames()[0]=="$super"){var method=value;value=(function(m){return function(){return ancestor[m].apply(this,arguments);};})(property).wrap(method);value.valueOf=method.valueOf.bind(method);value.toString=method.toString.bind(method);}
this.prototype[property]=value;}
return this;}
return{create:create,Methods:{addMethods:addMethods}};})();(function(){function getClass(object){return Object.prototype.toString.call(object).match(/^\[object\s(.*)\]$/)[1];}
function extend(destination,source){for(var property in source)
destination[property]=source[property];return destination;}
function keys(object){var results=[];for(var property in object)
results.push(property);return results;}
function isFunction(object){return typeof object==="function";}
function isString(object){return getClass(object)==="String";}
function isNumber(object){return getClass(object)==="Number";}
function isUndefined(object){return typeof object==="undefined";}
extend(Object,{extend:extend,keys:keys,isFunction:isFunction,isString:isString,isNumber:isNumber,isUndefined:isUndefined});})();Object.extend(Function.prototype,(function(){var slice=Array.prototype.slice;function update(array,args){var arrayLength=array.length,length=args.length;while(length--)array[arrayLength+length]=args[length];return array;}
function merge(array,args){array=slice.call(array,0);return update(array,args);}
function argumentNames(){var names=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,'').replace(/\s+/g,'').split(',');return names.length==1&&!names[0]?[]:names;}
function bind(context){if(arguments.length<2&&Object.isUndefined(arguments[0]))return this;var __method=this,args=slice.call(arguments,1);return function(){var a=merge(args,arguments);return __method.apply(context,a);}}
function bindAsEventListener(context){var __method=this,args=slice.call(arguments,1);return function(event){var a=update([event||window.event],args);return __method.apply(context,a);}}
function curry(){if(!arguments.length)return this;var __method=this,args=slice.call(arguments,0);return function(){var a=merge(args,arguments);return __method.apply(this,a);}}
function delay(timeout){var __method=this,args=slice.call(arguments,1);timeout=timeout*1000
return window.setTimeout(function(){return __method.apply(__method,args);},timeout);}
function defer(){var args=update([0.01],arguments);return this.delay.apply(this,args);}
function wrap(wrapper){var __method=this;return function(){var a=update([__method.bind(this)],arguments);return wrapper.apply(this,a);}}
function methodize(){if(this._methodized)return this._methodized;var __method=this;return this._methodized=function(){var a=update([this],arguments);return __method.apply(null,a);};}
return{argumentNames:argumentNames,bind:bind,bindAsEventListener:bindAsEventListener,curry:curry,delay:delay,defer:defer,wrap:wrap,methodize:methodize}})());function Pprotype_$A(iterable){if(!iterable)return[];if('toArray'in Object(iterable))return iterable.toArray();var length=iterable.length||0,results=new Array(length);while(length--)results[length]=iterable[length];return results;}
function EnKoTransformer(){this.__reg_h="["+this.__en_h+"]";this.__reg_exp=new RegExp("("+this.__reg_h+")("+this.__reg_b+")((?:"+this.__reg_f+")(?=(?:"+this.__reg_h+")(?:"+this.__reg_b+"))|(?:"+this.__reg_f+"))","g");}
EnKoTransformer.prototype.__en_h="rRseEfaqQtTdwWczxvg";EnKoTransformer.prototype.__reg_h=null;EnKoTransformer.prototype.__en_b={k:0,o:1,i:2,O:3,j:4,p:5,u:6,P:7,h:8,hk:9,ho:10,hl:11,y:12,n:13,nj:14,np:15,nl:16,b:17,m:18,ml:19,l:20};EnKoTransformer.prototype.__reg_b="hk|ho|hl|nj|np|nl|ml|k|o|i|O|j|p|u|P|h|y|n|b|m|l";EnKoTransformer.prototype.__en_f={"":0,r:1,R:2,rt:3,s:4,sw:5,sg:6,e:7,f:8,fr:9,fa:10,fq:11,ft:12,fx:13,fv:14,fg:15,a:16,q:17,qt:18,t:19,T:20,d:21,w:22,c:23,z:24,x:25,v:26,g:27};EnKoTransformer.prototype.__reg_f="rt|sw|sg|fr|fa|fq|ft|fx|fv|fg|qt|r|R|s|e|f|a|q|t|T|d|w|c|z|x|v|g|";EnKoTransformer.prototype.__reg_exp=null;EnKoTransformer.prototype.transform=function(str){var transfromStr="";if(this.__isAlphabet(str)){if(str.length>=4){transfromStr=this.__toKorean(str);}}else{transfromStr="";}
return transfromStr;};EnKoTransformer.prototype.__toKorean=function(str){return str.replace(this.__reg_exp,replace);};EnKoTransformer.prototype.__containsCharsOnly=function(str,chars){for(var inx=0;inx<str.length;inx++){if(chars.indexOf(str.charAt(inx))==-1)
return false;}
return true;};EnKoTransformer.prototype.__isAlphabet=function(str){var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";return this.__containsCharsOnly(str,chars);};var __en_h="rRseEfaqQtTdwWczxvg";var __en_b={k:0,o:1,i:2,O:3,j:4,p:5,u:6,P:7,h:8,hk:9,ho:10,hl:11,y:12,n:13,nj:14,np:15,nl:16,b:17,m:18,ml:19,l:20};var __en_f={"":0,r:1,R:2,rt:3,s:4,sw:5,sg:6,e:7,f:8,fr:9,fa:10,fq:11,ft:12,fx:13,fv:14,fg:15,a:16,q:17,qt:18,t:19,T:20,d:21,w:22,c:23,z:24,x:25,v:26,g:27};function replace(str,h,b,f){return String.fromCharCode(__en_h.indexOf(h)*21*28+__en_b[b]*28+__en_f[f]+44032);};function BackgroundLoader(){}
BackgroundLoader.prototype.__request=false;BackgroundLoader.prototype.__sequenceNumber=false;BackgroundLoader.prototype.__loadedCallback=function(content){};BackgroundLoader.prototype.__errorCallback=function(error){};BackgroundLoader.prototype.setSequenceNumber=function(sequenceNumber){this.__sequenceNumber=sequenceNumber;};BackgroundLoader.prototype.setLoadedCallback=function(loadedCallback){this.__loadedCallback=loadedCallback;};BackgroundLoader.prototype.setErrorCallback=function(errorCallback){this.__errorCallback=errorCallback;};BackgroundLoader.prototype.loadUrl=function(url){this.__request=this.__getXmlHttpRequest();if(this.__request){var loader=this;this.__request.onreadystatechange=function(){loader.__processReqChange();};this.__request.open("GET",(url),true);this.__request.send(null);}};BackgroundLoader.prototype.isEnabled=function(){return this.__getXmlHttpRequest()!=null;};BackgroundLoader.prototype.__processReqChange=function(){var request=this.__request;if(request.readyState==4){if(request.status==200){this.sequenceNumber==false?this.__loadedCallback(request.responseText):this.__loadedCallback(request.responseText,this.__sequenceNumber);}else{this.sequenceNumber==false?this.__errorCallback(request.status+": "+request.statusText):this.__errorCallback(request.status+": "+request.statusText,this.__sequenceNumber);}}};BackgroundLoader.prototype.__getXmlHttpRequest=function(){if(typeof XMLHttpRequest!="undefined"){return new XMLHttpRequest();}else{try{return new ActiveXObject("Msxml2.XMLHTTP");}catch(e1){try{return new ActiveXObject("Microsoft.XMLHTTP");}catch(e2){return null;}}}};var querySuggesters=new Array();var QuerySuggester=Class.create();QuerySuggester.prototype={initialize:function(suggestionUrl,tooltipId,queryId){this.id=querySuggesters.length;querySuggesters[this.id]=this;this.__suggestionUrl=false;this.__query=false;this.__queryId=false;this.__tooltip=false;this.__debugAreaBox=false;this.__timeout=false;this.__prev="";this.__original="";this.__index=-1;this.__focusIndex=-1;this.__terms=new Array();this.__cache=new Array();this.__enabled=false;this.__deletePressed=false;this.__trans=null;this.__submitFunc=function(content){};this.__queryString=null;this.__transQueryString=function(content){};this.useInlineSuggestion=false;this.clearInlineSuggestionBeforeSubmit=false;this.__showListenerFunc=function(showFlag){};this.__isTooltipAbsolutePosition=false;this.__checkQueryFunc=function(query){return true};this.__makeSuggestionsHtmlFunc=this.makeSuggestionsHtml;this.__recommendTerms=new Array();this.__focusClassNames=["","on"];this.__findTooltipFunc=null;this.__pageNo=null;this.__prePageNo=null;this.__displayMaxCount=4;this.__unexpectedKeywordClickCallbackFunc=null;this.__enabled=new BackgroundLoader().isEnabled();if(this.__enabled){this.__suggestionUrl=suggestionUrl;this.__trans=new EnKoTransformer();this.__tooltip=this.byId(tooltipId);this.__queryId=queryId;this.__query=this.byId(queryId);if(this.__query){$("#"+queryId).keydown(this.keyDown.bind(this));$("#"+queryId).keyup(this.keyUp.bind(this));}}else{this.debug("Unable to instantiate XMLHttpRequest, disabling.");}},setDebugAreaId:function(debugAreaId){if(debugAreaId){if(Object.isString(debugAreaId))
this.__debugAreaBox=this.byId(debugAreaId);else
this.__debugAreaBox=debugAreaId;}},setShowListenerFunc:function(showFunc){this.__showListenerFunc=showFunc;},setTooltipAbsolutePosition:function(isAbsolute){if(isAbsolute){this.__isTooltipAbsolutePosition=true;}},setCheckQueryFunc:function(checkQueryFunc){this.__checkQueryFunc=checkQueryFunc;},setMakeSuggestionsHtmlFunc:function(makeSuggestionsHtmlFunc){this.__makeSuggestionsHtmlFunc=makeSuggestionsHtmlFunc;},setFocusClassNames:function(focusClassNames){if(focusClassNames&&focusClassNames.length==2){this.__focusClassNames=focusClassNames;}},setFindTooltipFunc:function(findTooltipFunc){this.__findTooltipFunc=findTooltipFunc;},setDisplayMaxCount:function(displayMaxCount){this.__displayMaxCount=displayMaxCount;},setUnexpectedKeywordClickCallbackFunc:function(unexpectedKeywordClickCallbackFunc){this.__unexpectedKeywordClickCallbackFunc=unexpectedKeywordClickCallbackFunc;},keyDown:function(event){if(!this.__enabled)return;if(event&&event.keyCode){if(this.isDebug()){this.debug(this.id+":qs:keyDown:this.__index='"+this.__index+"'");}
switch(event.keyCode){case 9:this.hide();break;case 13:if(this.__index==-1)this.clearInlineSuggestion();break;case 38:if(this.__focusIndex>=0)this.updateSuggestions(this.__focusIndex-1,-1);break;case 40:if(this.__focusIndex<this.__terms.length-1)this.updateSuggestions(this.__focusIndex+1,-1);break;}}},keyUp:function(event){if(this.isDebug()){this.debug(this.id+":qs:keyUp"+((event)?":"+event.keyCode:""));}
if(!this.__enabled)return;if(event){if(this.__timeout){clearTimeout(this.__timeout);this.__timeout=false;}
if(event.ctrlKey||event.altKey){return;}
var timeout=100;this.__deletePressed=false;switch(event.keyCode){case 9:case 27:this.hide();return;case 8:case 46:this.__deletePressed=true;timeout=200;break;case 13:case 16:case 17:case 18:case 20:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 45:case 229:return;default:timeout=100;break;}
this.__index=-1;var qc=this;this.__timeout=setTimeout(function(){qc.fetchAndDisplaySuggestions();},timeout);}},byId:function(element){if(element){if(Object.isString(element))
element=document.getElementById(element);}
return element;},trim:function(str){if(str)
return str.replace(/^\s\s*/,'').replace(/\s\s*$/,'');return"";},moveSuggestion:function(index){if(index>=0&&index<this.__terms.length){this.updateSuggestions(index,-1);}},saveCache:function(key,value){var index=this.__cache.length;this.__cache[index]=[key,value];},getCache:function(key){for(var i=0;i<this.__cache.length;i++){if(this.__cache[i][0]==key)
return this.__cache[i][1];}
return null;}};QuerySuggester.prototype.getSuggestionUrl=function(query,query2,pageNo){return this.__suggestionUrl+query+"&transq="+query2+(pageNo?"&pageNo="+pageNo:"");};QuerySuggester.prototype.submitForm=function(index){this.__submitFunc(index);};QuerySuggester.prototype.mouseOver=function(index){if(!this.__enabled)return;this.updateSuggestions(-1,index);};QuerySuggester.prototype.mouseOut=function(index){if(!this.__enabled)return;};QuerySuggester.prototype.mouseClick=function(index){if(!this.__enabled)return;if(index>=0){this.__query.value=this.__terms[index];this.submitForm(index);}else{this.hide();}};QuerySuggester.prototype.unexpectedKeywordClick=function(index){if(!this.__enabled)return;if(index<this.__recommendTerms.length&&this.__unexpectedKeywordClickCallbackFunc){var keyword=this.__recommendTerms[index][1];this.__unexpectedKeywordClickCallbackFunc(keyword);}};QuerySuggester.prototype.fetchAndDisplaySuggestions=function(pageNo){if(this.isDebug()){this.debug(this.id+":qs:fetchAndDisplaySuggestions:"+this.__query.value);if(pageNo){this.debug(this.id+":qs:fetchAndDisplaySuggestions:pageNo='"+pageNo+"'");}}
if(pageNo){this.__pageNo=pageNo;}else{this.__pageNo=null;}
var val=this.__query.value;if(this.canHandleRanges()){val=val.substring(0,this.getCaretPosition());if(this.isDebug()){this.debug(this.id+":qs:fetchAndDisplaySuggestions:val: '"+val+"'");}}
if(val.length==0){this.hide();this.__prev=val;return;}else{val=val.replace(new RegExp("\\\\","g"),"\\\\");}
this.__prev=val;this.__prePageNo=this.__pageNo;this.__queryString=val;var transQuery=null;this.__transQueryString=this.__trans.transform(val);if(this.isDebug()){this.debug(this.id+":qs:fetchAndDisplaySuggestions:-trans query: '"+this.__transQueryString+"'");}
var cacheKey=val+(pageNo?"___pageno="+pageNo:"");var cacheValue=this.getCache(cacheKey);if(this.isDebug()){this.debug(this.id+":qs:fetchAndDisplaySuggestions:cacheKey: '"+cacheKey+"'");}
if(cacheValue){if(this.isDebug()){this.debug(this.id+":qs:fetchAndDisplaySuggestions:cacheValue: '"+cacheValue+"'");}
this.displaySuggestions(cacheValue,this.__prev,this.__prePageNo);}else{if(this.isDebug()){this.debug(this.id+":qs:fetchAndDisplaySuggestions:query: '"+val+"'");}
this.fetchSuggestion(val,pageNo);}};QuerySuggester.prototype.fetchSuggestion=function(query,pageNo){if(this.__checkQueryFunc(query)){var qc=this;var bl=new BackgroundLoader();bl.setLoadedCallback(function(content){qc.parseSuggestions(content);});bl.setErrorCallback(function(error){qc.debug("Couldn't get suggestions:\n"+error);});bl.loadUrl(this.getSuggestionUrl(encodeURIComponent(query),encodeURIComponent(this.__transQueryString),pageNo));}};QuerySuggester.prototype.parseSuggestions=function(matches){if(matches==""){this.hide();return;}
if(this.isDebug()){this.debug(this.id+":qs:parseSuggestions:matches: '"+matches+"'");}
var params;try{params=eval(matches);}catch(err){if(this.isDebug()){this.debug(this.id+":qs:parseSuggestions:err: '"+(err.description)+"'");}
params=[[this.__prev,""],["",""]];}
if(this.isDebug()){this.debug(this.id+":qs:parseSuggestions:result 1: "+params[0]);this.debug(this.id+":qs:parseSuggestions:result 2: "+params[1]);}
var cacheKey=params[0][0];if(this.isDebug()){this.debug(this.id+":qs:parseSuggestions:cacheKey: '"+cacheKey+"'");}
this.saveCache(cacheKey,params);this.displaySuggestions(params,params[0].length>2||params[1].length>2?params[0][0]:"");};QuerySuggester.prototype.displaySuggestions=function(matches,query){if(matches[0].length<=2&&matches[1].length<=2){this.noSuggestions();return;}
if(this.__prev!=query){return;}
if(this.__tooltip&&this.__query){this.buildSuggestionsHtml(matches);this.show();this.showInlineSuggestions(query);}};QuerySuggester.prototype.__updatePriceableTerms=function(terms,term){for(var i=0;i<terms.length;i++){if(terms[i][1]==term[1]){if(parseInt(term[0])>terms[i][0]){terms[i][0]=parseInt(term[0]);}
return true;}}
return false;};QuerySuggester.prototype.__addRecommendTerms=function(terms,_words){var foo=_words;var bar=foo.split("/");for(var i=0;i<bar.length;i++){if(bar[i].length>0){var bar2=bar[i].split(",");if(!this.__updatePriceableTerms(terms,bar[i])){terms[terms.length]=[parseInt(bar2[0]),bar2[1]];}}}};QuerySuggester.prototype.__sortPriceableTerms=function(terms){for(var i=0;i<terms.length-1;i++){for(var j=i+1;j<terms.length;j++){if(terms[j][0]>terms[i][0]){var tmp=terms[i];terms[i]=terms[j];terms[j]=tmp;}}}};QuerySuggester.prototype.__addPriceableTerms=function(terms,term){if(!this.__updatePriceableTerms(terms,term)){terms[terms.length]=[parseInt(term[0]),term[1]];}};QuerySuggester.prototype.buildSuggestionsHtml_old=function(matches){var length0=parseInt(matches[0].length/2)-1;var length1=parseInt(matches[1].length/2)-1
this.__terms=new Array();this.__index=-1;this.__focusIndex=-1;this.__recommendTerms=new Array();var terms0=new Array();var terms1=new Array();for(var i=0;i<length0;++i){this.__terms[i]=matches[0][i*2+2];terms0[i]=matches[0][i*2+2];this.__addRecommendTerms(this.__recommendTerms,matches[0][i*2+3]);}
for(var i=0;i<length1;++i){this.__terms[this.__terms.length]=matches[1][i*2+2];terms1[i]=matches[1][i*2+2];this.__addRecommendTerms(this.__recommendTerms,matches[1][i*2+3]);}
this.__sortPriceableTerms(this.__recommendTerms);this.__tooltip.innerHTML=this.__makeSuggestionsHtmlFunc(this.id,this.__queryString.toLowerCase(),terms0,this.__transQueryString.toLowerCase(),terms1,this.__recommendTerms);if(this.isDebug()){this.debug(this.id+":qs:buildSuggestionsHtml:__tooltip: '"+this.__tooltip.innerHTML+"'");}};QuerySuggester.prototype.buildSuggestionsHtml=function(matches){var length0=parseInt(matches[0].length/2)-1;var length1=parseInt(matches[1].length/2)-1
this.__terms=new Array();this.__index=-1;this.__focusIndex=-1;this.__recommendTerms=new Array();var priceableTerms0=new Array();var priceableTerms1=new Array();for(var i=0;i<length0;++i){match=matches[0][i*2+3];var bar=match.split("^");if(bar&&bar.length&&bar.length>=2){var price=bar[0];var q=bar[1];this.__addPriceableTerms(priceableTerms0,[price,q]);for(var j=2;j<bar.length;j++){this.__addPriceableTerms(this.__recommendTerms,[price,bar[j]]);}}}
for(var i=0;i<length1;++i){match=matches[1][i*2+3];var bar=match.split("^");if(bar&&bar.length&&bar.length>=2){var price=bar[0];var q=bar[1];this.__addPriceableTerms(priceableTerms1,[price,q]);for(var j=2;j<bar.length;j++){this.__addPriceableTerms(this.__recommendTerms,[price,bar[j]]);}}}
this.__sortPriceableTerms(priceableTerms0);this.__sortPriceableTerms(priceableTerms1);this.__sortPriceableTerms(this.__recommendTerms);var terms0=new Array();var terms1=new Array();var displayCount=0;for(var i=0;i<priceableTerms0.length&&displayCount<this.__displayMaxCount;i++,displayCount++){terms0[i]=priceableTerms0[i][1];this.__terms[this.__terms.length]=priceableTerms0[i][1];}
for(var i=0;i<priceableTerms1.length&&displayCount<this.__displayMaxCount;i++,displayCount++){terms0[i]=priceableTerms1[i][1];this.__terms[this.__terms.length]=priceableTerms1[i][1];}
this.__tooltip.innerHTML=this.__makeSuggestionsHtmlFunc(this.id,this.__queryString.toLowerCase(),terms0,this.__transQueryString.toLowerCase(),terms1,this.__recommendTerms);if(this.isDebug()){this.debug(this.id+":qs:buildSuggestionsHtml:__tooltip: '"+this.__tooltip.innerHTML+"'");}};QuerySuggester.prototype.makeSuggestionsHtml=function(id,queryString,terms0,transQueryString,terms1,recommendTerms){var text="";text+="<div class='listbox'><ul>";for(var i=0;i<terms0.length;i++){text+="<li onmouseover='mouseOver("+id+","+i+")'><a id='tooltip_"+i+"' href='javascript:mouseClick("+id+","+i+");'>"+terms0[i].replace(queryString,"<span>"+queryString+"</span>")+"</a></li>";}
for(var i=0;i<terms1.length;i++){var idx=terms0.length+i;text+="<li onmouseover='mouseOver("+id+","+idx+")'><a id='tooltip_"+idx+"' href='javascript:mouseClick("+id+","+idx+");'>"+terms1[i].replace(transQueryString,"<span>"+transQueryString+"</span>")+"</a></li>";}
text+="</ul></div>";if(recommendTerms.length>0){text+="<div class='listbox2'><ul>";for(var i=0;i<recommendTerms.length;i++){text+="<li><a href='javascript:unexpectedKeywordClick("+id+","+i+");'>"+recommendTerms[i][1]+"</a></li>";}
text+="</ul></div>";}
return text;};QuerySuggester.prototype.showInlineSuggestions=function(query){if(this.__terms.length>0&&this.__query.value==query&&!this.__deletePressed&&this.useInlineSuggestion){this.__original=this.__query.value;if(this.canHandleRanges()){this.__query.value=this.__terms[0];this.selectRange(this.__original.length,this.__query.value.length);}}};QuerySuggester.prototype.getTooltip=function(index){if(this.__findTooltipFunc!=null)
return this.__findTooltipFunc(index);return this.byId("tooltip_"+index);}
QuerySuggester.prototype.updateSuggestions=function(cursorIndex,focusIndex){if(this.isDebug()){this.debug(this.id+":qs:updateSuggestions:cursorIndex='"+cursorIndex+"'"+", focusIndex='"+focusIndex+"'"+", this.__index='"+this.__index+"'"+", this.__focusIndex='"+this.__focusIndex+"'");}
if(focusIndex>=0){var focusCurrent=this.getTooltip(focusIndex);if(focusCurrent){if(this.__focusIndex>=0){var previousFocus=this.getTooltip(this.__focusIndex);if(previousFocus){previousFocus.className=this.__focusClassNames[0];}}
focusCurrent.className=this.__focusClassNames[1];this.__focusIndex=focusIndex;}}
if(cursorIndex>=0&&cursorIndex<this.__terms.length&&this.__tooltip&&this.__tooltip.style.display=='block'){var current=this.getTooltip(cursorIndex);if(current){if(this.__focusIndex>=0){var previousFocus=this.getTooltip(this.__focusIndex);if(previousFocus){previousFocus.className=this.__focusClassNames[0];}}
current.focus();current.blur();current.className=this.__focusClassNames[1];this.__index=this.__focusIndex=cursorIndex;if(this.canHandleRanges()){this.__query.value=this.__terms[this.__index];this.__query.focus();}}}};QuerySuggester.prototype.noSuggestions=function(){this.hide();};QuerySuggester.prototype.show=function(){if(this.__tooltip&&this.__query){if(!this.__isTooltipAbsolutePosition){this.__tooltip.style.left=this.findPosX(this.__query)+"px";this.__tooltip.style.top=(this.findPosY(this.__query)+this.__query.offsetHeight+3)+"px";this.__tooltip.style.width=this.__query.offsetWidth+"px";}
this.__tooltip.style.display="block";this.__showListenerFunc(true);}};QuerySuggester.prototype.hide=function(){if(this.__tooltip){this.__tooltip.style.display='none';this.__showListenerFunc(false);}};QuerySuggester.prototype.canHandleRanges=function(){return this.__query.createTextRange||this.__query.setSelectionRange;};QuerySuggester.prototype.selectRange=function(from,to){if(this.isDebug()){this.debug(this.id+":qs:selectRange:form='"+from+"'  to='"+to+"'");}
this.__query.focus();};QuerySuggester.prototype.getCaretPosition=function(){if(document.selection){var range=document.selection.createRange().duplicate();range.collapse(true);range.moveStart("character",-1000);return range.text.length;}else if(this.__query.setSelectionRange){return this.__query.selectionStart;}else{this.debug("Couldn't find caret position.");return this.__query.value.length;}};QuerySuggester.prototype.clearInlineSuggestion=function(){if(this.__query&&this.canHandleRanges()&&this.clearInlineSuggestionBeforeSubmit){this.__query.value=this.__query.value.substring(0,this.getCaretPosition());}};QuerySuggester.prototype.findPosX=function(obj){var curleft=0;if(obj.offsetParent){while(obj.offsetParent&&obj.className!="pageContainer"){curleft+=obj.offsetLeft;obj=obj.offsetParent;}}else if(obj.x)
curleft+=obj.x;return curleft;};QuerySuggester.prototype.findPosY=function(obj){var curtop=0;if(obj.offsetParent){while(obj.offsetParent&&obj.className!="pageContainer"){curtop+=obj.offsetTop
obj=obj.offsetParent;}}else if(obj.y){curtop+=obj.y;}
return curtop;};QuerySuggester.prototype.isDebug=function(){return(this.__debugAreaBox)?true:false;};QuerySuggester.prototype.debug=function(message){if(this.__debugAreaBox){this.__debugAreaBox.value+=message+"\n";}};QuerySuggester.prototype.setSubmitFunc=function(submitFunc){this.__submitFunc=submitFunc;};function mouseOver(id,index){if(id>=0&&id<querySuggesters.length){querySuggesters[id].mouseOver(index);}}
function mouseOut(id,index){if(id>=0&&id<querySuggesters.length){querySuggesters[id].mouseOut(index);}}
function mouseClick(id,index){if(id>=0&&id<querySuggesters.length){querySuggesters[id].mouseClick(index);}else if(id==-1&&index==-1){for(var i=0;i<querySuggesters.length;++i){querySuggesters[i].mouseClick(index);}}}
function unexpectedKeywordClick(id,index){if(id>=0&&id<querySuggesters.length){querySuggesters[id].unexpectedKeywordClick(index);}}
var showListener1=function(showFlag){if(showFlag){document.getElementById('searchLayer').style.display='block';}else{document.getElementById('searchLayer').style.display='none';}};function fnClickRecenkKeyword(recentKeyword){document.getElementById("search_form").input_keyword.value=recentKeyword;doSubmit();}
var searchFired=false;function doSubmit(id){var val=document.search_form.input_keyword.value;if(id=='footer'){val=$("#"+id+"_search_input").val();$("#search_input").val(val);}
if(!searchFired){if(id=='general'||id=='footer'){ss_search_click(val,"general",0);}else{ss_search_click(val,"general",1);}
searchFired=true;}
$("#footer_keywords").val(val);document.search_form.keywords.value=val;document.search_form.submit();}
function hideSearchText(){$("#footer .search_input").attr("style","background-image:none");};var sqs=new QuerySuggester("/us/function/espsearch/autoComplete.do?c=querycompletions_us&q=",document.getElementById("search_layer_body"),"search_input");sqs.setSubmitFunc(doSubmit);sqs.setShowListenerFunc(showListener1);sqs.setTooltipAbsolutePosition(true);if(sqs.setUnexpectedKeywordClickCallbackFunc)
sqs.setUnexpectedKeywordClickCallbackFunc(fnClickRecenkKeyword);$('#search_input').keypress(function(event){if(event&&event.keyCode==13){doSubmit('general');}});$(window.document.body).click(function(){sqs.hide();});if(!isLogin()){$("#gnbLogOutArea").hide();$("#gnbLogInArea").show();}else{$("#gnbLogInArea").hide();$("#gnbLogOutArea").show();}