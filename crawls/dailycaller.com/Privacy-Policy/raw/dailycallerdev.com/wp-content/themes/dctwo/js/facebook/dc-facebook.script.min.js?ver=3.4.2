var UtilCookie={setCookie:function(b,l,j){if(j){var f=new Date;f.setTime(f.getTime()+864E5*j);j="; expires="+f.toGMTString()}else j="";document.cookie=b+"="+l+j+"; path=/"},getCookie:function(b){for(var b=b+"=",l=document.cookie.split(";"),j=0;j<l.length;j++){for(var f=l[j];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(b))return f.substring(b.length,f.length)}return null},deleteCookie:function(b){this.setCookie(b,"",-1)}};var DcUtilEllipser={truncate:function(b,l,j){var f=b.length>l,b=f?b.substr(0,l-1):b,b=j&&f?b.substr(0,b.lastIndexOf(" ")):b;return f?b+"...":b}};var UtilPosition={getRealTopByObj:function(b){yPos=0;if(b){yPos=b.offsetTop;for(tempEl=b.offsetParent;null!==tempEl;)yPos+=tempEl.offsetTop,tempEl=tempEl.offsetParent}return yPos},getRealTop:function(b){return yPos=getRealTopByObj(b)},getRealLeftByObj:function(b){xPos=0;if(b){xPos=b.offsetLeft;for(tempEl=b.offsetParent;null!==tempEl;)xPos+=tempEl.offsetLeft,tempEl=tempEl.offsetParent}return xPos},getRealLeft:function(b){return xPos=getRealLeftByObj(b)},getObjPos:function(b){var l=0,j=0,f=null;if(b){l=
b.offsetLeft;j=b.offsetTop;for(f=b.offsetParent;null!==f;)l+=f.offsetLeft,j+=f.offsetTop,f=f.offsetParent}return[l,j]}};var DcFacebookConnect=function(b){function l(a){if(a&&a.authResponse){var b=a.authResponse;d.userId||(d.userId=b.userID);d.accessToken||(d.accessToken=b.accessToken);d.status="connected"===a.status?2:"not_authorized"===a.status?1:0}}var j=this,f=null,a={scope:"user_birthday,user_actions.news,email,publish_actions,user_location"},d={userId:null,accessToken:null,status:0};this.getMetadata=function(){return d};this.connect=function(a){FB.getLoginStatus(function(b){(!b||b.error)&&console.log(b);l(b);
a&&"function"===typeof a&&a(d)})};this.initAuth=function(b,h){FB.login(function(a){l(a);b&&"function"===typeof b&&b(d)},h&&"object"===typeof h?h:a)};this.show=function(){$(f).css("display","block")};this.hide=function(a){$(f).fadeOut(600,a)};this.remove=function(){j.hide(function(){$(f).remove()})};this.getUserId=function(){return d.userId};this.getAccessToken=function(){return d.accessToken};this.getDefaultScope=function(){return a};(function(){if(FB&&b&&b.appId){b.target&&(f=b.target);for(var c=
{},d,q=/\+/g,m=/([^&=]+)=?([^&]*)/g,g=window.location.search.substring(1);d=m.exec(g);)c[decodeURIComponent(d[1].replace(q," "))]=decodeURIComponent(d[2].replace(q," "));"debug_scope"in c&&(a={scope:"user_birthday,email,user_location"})}})()};var DcFacebookEngage=function(b){function l(){$(f).find(".action-close").bind({click:j.remove});$(f).find(".disable-dc-se").bind("click",function(){if(b.onDisableSocialExp)b.onDisableSocialExp()})}var j=this,f=null;this.show=function(){$(f).css("display","block")};this.hide=function(a){$(f).fadeOut(600,a)};this.remove=function(){j.hide(function(){$(f).parents("#socialbar:eq(0)").remove()})};b&&(b.target&&(f=b.target),l())};var DcFacebookActivityFeed=function(b){function l(){$(a).find(".remove").bind("click",function(a){a.preventDefault();if(b.onDeleteCb)b.onDeleteCb(a)});$(d).bind("pager.prev",function(){var b=d.getCurrentPage()-1;$(a).find(".page").css("display","none");$(a).find(".page:eq("+b+")").css("display","block")});$(d).bind("pager.next",function(){var b=d.getCurrentPage()-1;$(a).find(".page").css("display","none");$(a).find(".page:eq("+b+")").css("display","block")})}var j=null,f=!1,a=$('<div class="feed"></div>'),
d;this.getHtml=function(){return $(a).get(0)};b.posts&&(j=b.posts);b.enableDelete&&(f=b.enableDelete);b.pager&&(d=b.pager);(function(){var b=$('<div class="arrow">&#xA0;</div>'),h=$("<ul></ul>"),q=d&&d.getItemsPerPage?d.getItemsPerPage():0;$(a).append(b);if(typeof d==="object"){b=d.getHtml();$(a).append(b)}if(d&&j.length>q){var h=d.getItemsPerPage(),m=d.getTotalPages();if(m>1)for(var g=0;g<m;g=g+1){var e=$('<div class="page"></div>'),i=$("<ul></ul>");g===0&&e.css("display","block");for(var k=0;k<
h;k=k+1)try{q=g*h+k;if(!j[q])break;var s=j[q];if(s&&s.data){var t=s.data;if(t&&t.article){var r=t.article,n=$("<li></li>"),p=$('<a class="article" href="'+r.url+'" title="'+r.title+'"><span class="icon article">&#xA0;</span><span>'+DcUtilEllipser.truncate(r.title,50,true)+"</span></a>");f&&$(n).append("<span"+(s&&s.id?' id="'+s.id+'"':"")+' class="remove">X</span>');$(n).append(p);$(i).append(n)}}}catch(o){}e.append(i);$(a).append(e)}}else{if(j.length)for(s=0;s<j.length;s=s+1)try{if((m=j[s])&&m.data)if((g=
m.data)&&g.article){e=g.article;i=$("<li></li>");k=$('<a class="article" href="'+e.url+'" title="'+e.title+'"><span class="icon article">&#xA0;</span><span>'+DcUtilEllipser.truncate(e.title,50,true)+"</span></a>");f&&$(i).append("<span"+(m&&m.id?' id="'+m.id+'"':"")+' class="remove">X</span>');$(i).append(k);$(h).append(i)}}catch(w){}else $(a).append('<p style="padding:10px;">There is no activity for this feed.</p>');$(a).append(h)}l()})()};var DcFacebookFriendsRecentActivity=function(b){function l(){r&&$(r).bind("click",g);$(n).bind("pager.prev",function(){var a=n.getCurrentPage();e(a)});$(n).bind("pager.next",function(){var a=n.getCurrentPage();e(a)});$(k).find(".profile").each(function(){$(this).bind("mouseenter",function(){if(!("block"===$("#dialog").css("display")||y)){var a=this.id,b=this;p&&p!==a&&i.hideFeedById(p);p=a;var d=$("#fb_feed_"+a),c=UtilPosition.getObjPos($(this).get(0)),e=!1;$(b).addClass("active");var o=UtilPosition.getObjPos($(k).get(0)),
g=c[0]<=o[0]+parseInt($(k).css("padding-left"))+2?!0:!1,o=c[0]+$(b).width()>o[0]+$(k).width()?!0:!1;g?$(b).addClass("left-flush"):o&&$(b).addClass("rgt-flush");d.css({left:c[0]+"px",top:c[1]+50+"px"});"BODY"!==$(d).parent().get(0).nodeName&&$(d).insertBefore($("body").children().eq(0));i.showFeedById(a,function(){$(d).one("mouseenter",function(){e=!0;$(this).bind("mouseleave",function(){i.hideFeedById(a);$(b).removeClass("active").removeClass("left-flush").removeClass("rgt-flush")})})});$(this).bind("mouseleave",
function(){setTimeout(function(){e||(i.hideFeedById(a),$(b).removeClass("active").removeClass("left-flush").removeClass("rgt-flush"))},200)})}})})}function j(){FB.api("/","post",{access_token:t,batch:[{method:"GET",name:"get-friends",omit_response_on_success:!1,relative_url:"method/fql.query?query=SELECT uid, name, pic_square FROM user WHERE is_app_user=1 AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me())"}]},function(e){if(!e||e.error)console.log(e);else{var e=e[0].body,o;try{u=$.parseJSON(e)}catch(g){console&&
console.log&&console.log(g)}if(u.length){o=u.length;if(50<o){e=Math.ceil(o/50);o=50;for(o=0;o<e;o+=1)v.push(f(50*o,u))}else v=f(0,u);e=v;v[0][0]&&(z=!0,e=v[0]);a(e,function(a){d(a);m(0);c()})}else if(l(),b.onLoad)b.onLoad()}})}function f(a,b){var d=[],e=b.length,c=Math.ceil(e/50);50<e&&(e=a/50+1===c?b.length:50);for(c=a;c<e;c+=1)d.push({method:"GET",omit_response_on_success:!1,relative_url:"/"+b[c].uid+"/"+s+":read?limit=20"});return d}function a(a,b){b&&"function"===typeof b&&FB.api("/","post",{batch:a},
b)}function d(a){var b=0;if(!a||a.error)console.log(a);else if(a.length){for(var b=a.length,d=0;d<b;d+=1){var c;try{c=$.parseJSON(a[d].body)}catch(e){console&&console.log&&console.log(e)}if(c&&c.data){var o;o=c.data;var g={uid:null,articles:[]};if(o.length)for(var f=o.length,h=0;h<f;h+=1)try{var q=o[h],i=q.data.article;if(i.title&&""!==i.title&&""!==i.href){var m={data:{article:{id:i.id,url:i.url,title:i.title}}};g.uid||(g.uid=q.from.id||"");g.articles.push(m)}}catch(w){console&&console.log(w)}if((o=
g)&&o.uid){f=g=void 0;if(o&&u){g=u.length;f=o.uid;for(h=0;h<g;h+=1){var k=u[h];if(f==k.uid){o.name=k.name;o.pic_square=k.pic_square;break}}}o.articles.length&&x.push(o)}}}a=x;b=a.length;if(0!=b)for(;--b;)d=Math.floor(Math.random()*(b+1)),c=a[b],a[b]=a[d],a[d]=c}}function c(){h();"#invite"===window.location.hash&&FB&&(window.onload=function(){$(r).trigger("click")});if(b.onLoad)b.onLoad();z&&q(1)}function h(){var a=x.length;10<a&&(n=new DcWidgetPager({pageSize:10,totalItems:a,onPageClick:e,enablePrevNext:!0,
disableNavByPage:!0}),$(k).find(".dc-widget-pager").remove(),$(k).find(".tools").append(n.getHtml()),$(".list",k).remove(".clear").append('<div class="clear">&#xA0;</div>').removeClass("hide"));l()}function q(b){a(v[b],function(a){d(a);m(50*b);v[b+1]?q(b++):h()})}function m(a){var b=x;$('<div class="dc-fb-friend-feed dropdown"></div>');if(b.length&&DcFacebookActivityFeed){for(var d=b.length;a<d;a+=1){var c=b[a],e=$('<div id="'+c.uid+'" class="profile"></div>'),c=$("<img></img>").attr({src:c.pic_square,
alt:c.name});$(e).append(c);$(o).append(e)}$(w).append(o);$(w).insertBefore(".list",k);for(a=0;a<d;a+=1)e=(new DcFacebookActivityFeed({posts:b[a].articles,pager:new DcWidgetPager({pageSize:4,totalItems:b[a].articles.length,enablePrevNext:!0,disableNavByPage:!0})})).getHtml(),$('<h3 class="dc-se-hdg"><span class="bkg">'+b[a].name+'</span><span class="corner">&#xA0;</span></h3>').insertBefore($(e).children().eq(0)),$(e).attr("id","fb_feed_"+b[a].uid).addClass("se-overlay"),$(".list",k).append(e)}}function g(a){a.preventDefault();
"block"!==$("#dialog").css("display")&&(y=!0,FB.ui({method:"apprequests",message:"Hey! I just added The DC Social Reader app so I can keep track of the latest news, features and videos with my friends. You should too! Click here to join:"},function(a){a&&DcFacebookSocialExp.showDialog("Join The Daily Caller Social Experience","Your invite request(s) have been sent.");y=!1}))}function e(a){var b=$(w).width(),d=-((a-1)*b),d=$(".profile:last",o);parseInt($(d).css("margin-left"));$(d).width();n&&(n.getTotalPages(),
d=-((a-1)*(b+14)),$(o).animate({left:d},500,function(){}))}var i=this,k=null,s=null,t=null,r=null,n=null,p=null,o=$('<div style="left:0px;" class="profiles"></div>'),w=$('<div class="wrapper"></div>'),u={},x=[],y=!1,v=[],z=!1;this.getHtml=function(){return k};this.show=function(){$(k).css("display","block")};this.hide=function(a){$(k).fadeOut(600,a)};this.showFeedById=function(a,b){a&&$("#fb_feed_"+a).show(0,function(){b&&b()})};this.hideFeedById=function(a){a&&$("#fb_feed_"+a).hide()};this.getUsersFeedList=
function(){return x};b&&(b.target&&(k=b.target),b.accessToken&&(t=b.accessToken),b.ns&&(s=b.ns),r=$(k).find(".dc-fb-find-friends"),j())};var DcFacebookMostRead=function(b){function l(a){if(a.length){d=a;for(var b=0;10>b;b+=1){var c=a[b];if(c&&!(0>=c.length)){var e=c[1]||"",f=c[2]||"";if(""!==(c[0]||"")&&""!==e)e=$("<li></li>"),c=$('<a href="'+c[0]+'" data-nr="'+f+' reads">'+c[1]+"</a>"),$(e).append(c),$(h).append(e)}}}}function j(a){var b=[],d=[];if(a.length){articles=a;for(var a=articles.length,c=0;c<a;c+=1){var h=articles[c],f=h[0],h=h[1];-1===$.inArray(f,b)&&b.push(f)}if(b.length){c=b.length;for(f=0;f<c;f+=1){for(var s=b[f],j=[s,
"",0],l=0;l<a;l+=1){var h=articles[l],n=h[0],h=h[1];s==n&&(""===j[1]&&(j[1]=h),j[2]++)}d.push(j)}}d.sort(function(a,b){return b[2]-a[2]})}return d}var f=this,a,d=[],c,h=$("<ul></ul>");this.getHtml=function(){return h.get(0)};this.show=function(){$(a).css("display","block")};this.hide=function(b){$(a).fadeOut(600,function(){"function"===typeof b&&b()})};this.getFeedHtml=function(){return $(a).find(".feed").html()};this.getContent=function(){return d};(function(){if(b&&b.appId){b.target&&(a=b.target);
b.data&&(c=b.data);var d;d=[];if(c&&c.length)for(var h=c.length,g=0;g<h;g+=1){var e=c[g];if(e.articles){var e=e.articles,i=0;if(e.length)for(var i=e.length,k=0;k<i;k+=1)d.push(e[k].data.article)}}h=[];if(g=d.length)for(e=0;e<g;e+=1)i=d[e],""!==i.url&&""!==i.title&&h.push([i.url,i.title,0]);d=h;d.length?(d=j(d),l(d)):l([]);if(b.onLoadCb&&"function"===typeof b.onLoadCb)b.onLoadCb(f)}})()};var DcFacebookProfile=function(b){function l(a){if(a||!a.length)a=a[0],k=a.first_name||"",s=a.last_name||"",t=a.pic_square||"","true"==p.isAppActive?($(e).find('.action-app-state[data-active="true"]').addClass("active"),$(e).find(".action-app-state-label").text("Active")):($(e).find('.action-app-state[data-active="false"]').addClass("active"),$(e).find(".action-app-state-label").text("Inactive")),a=g.getFirstName()+" "+g.getLastName(),$("h3 span:eq(0)",e).html(a),$(".fb-btn",e).remove(),$(".inline",
e).removeClass("hide"),$(".photo",e).html('<img src="'+t+'" alt="'+a+'"/>'),$("<p>You are logged into Facebook.</p>").insertAfter($(e).find(".photo")),$(e).css("display","block"),q(),$(window).trigger("facebook.profile.onload")}function j(){$(e).find(".action-invite-friends").bind("click",f);$(e).find(".action-logout").bind("click",a);$(e).find(".action-remove-app").bind("click",d);$(e).find(".action-app-state").bind("click",c);$(e).find(".dc-fb-se-profile-toolbar li.dropdown").each(function(){$(this).bind("mouseenter",
function(){var a=$("a",this).attr("id"),b=this;if(!("block"===$("#dialog").css("display")||n)){r&&r!==a&&g.hideOverlayById(r);r=a;var d=$("#overlay_"+a);UtilPosition.getObjPos($(this).get(0));var c=!1;$(b).addClass("active");g.showOverlayById(a,function(){$(d).bind("mouseenter",function(){c=!0;$(this).bind("mouseleave",function(){c=!1;setTimeout(function(){r!==a&&(g.hideOverlayById(a),$(b).removeClass("active"))},200)})})});$(this).bind("mouseleave",function(){setTimeout(function(){c||(g.hideOverlayById(a),
$(b).removeClass("active"))},200)})}})})}function f(a){a.preventDefault();"block"!==$("#dialog").css("display")&&(n=!0,g.hideOverlayById(r,function(){FB.ui({method:"apprequests",message:"Join The Daily Caller Social Reader"},function(a){a&&DcFacebookSocialExp.showDialog("Join The Daily Caller Social Reader","Your invite request(s) have been sent.");n=!1})}))}function a(a){a.preventDefault();FB.logout(function(){UtilCookie&&null!=UtilCookie.getCookie("dailycaller_logged_in")?$.ajax({url:"/wp-admin/admin-ajax.php",
type:"post",dataType:"json",data:"action=sr_logout",complete:function(){window.location.reload()}}):window.location.reload()})}function d(a){a.preventDefault();g.hideOverlayById(r,function(){window.confirm("Are you sure you would like to remove The Daily Caller Social Experience?")&&FB.api("/me/permissions","DELETE",function(a){(!a||a.error)&&console.log(a);window.location.reload()})})}function c(a){a.preventDefault();a=a.target;$(a).hasClass("active")||($(e).find(".action-app-state").removeClass("active"),
"true"===$(a).attr("data-active")?($(e).find(".action-app-state-label").text("Active"),h(!0),$(a).addClass("active")):($(a).addClass("active"),$(e).find(".action-app-state-label").text("Inactive"),h()))}function h(a){if(a)UtilCookie.setCookie("socialExpActive",!0,1E3),$.ajax({url:"/wp-admin/admin-ajax.php",type:"post",dataType:"json",data:"action=sr_cookie_set&userID="+p.fb.userId+"&accessToken="+p.fb.accessToken+"&active=true",complete:function(){window.location.reload()}});else if(UtilCookie.setCookie("socialExpActive",
!1,1E3),$.ajax({url:"/wp-admin/admin-ajax.php",type:"post",dataType:"json",data:"action=sr_cookie_set&userID="+p.fb.userId+"&accessToken="+p.fb.accessToken+"&active=false"}),b.onSetSocialExpAppState)b.onSetSocialExpAppState(a)}function q(){var a;FB.api("/me/"+i+":read?limit=20",function(b){b&&b.data&&(a=new DcFacebookActivityFeed({posts:b.data,enableDelete:!0,onDeleteCb:m,pager:new DcWidgetPager({pageSize:4,totalItems:b.data.length,enablePrevNext:!0,disableNavByPage:!0})}),$("#overlay_dc_fb_se_my_activity")&&
$("#overlay_dc_fb_se_my_activity").remove(),b=a.getHtml(),$(b).addClass("se-overlay").attr("id","overlay_dc_fb_se_my_activity"),$('<h3 class="dc-se-hdg"><span class="bkg">My Activity</span><span class="corner">&#xA0;</span></h3>').insertBefore($(b).children().eq(0)),$(b).insertAfter($(e).find(".dc-fb-se-activity:eq(0)")),j())})}function m(a){var a=a.target,b=a.id,d=$(a).parent();b&&($(d).css("display","block"),g.hideOverlayById(r,function(){window.confirm('Selecting "OK" will remove this post from your Facebook wall. Are you sure?')&&
FB.api("/"+b,"delete",function(a){!a||a.error?console.log(a):($(d).remove(),g.refreshActivityFeed())})}))}var g=this,e=null,i=null,k=null,s=null,t=null,r,n=!1,p=null;this.getTarget=function(){return null!==e&&e.get?e.get(0):e};this.show=function(){$(e).css("display","block")};this.getFirstName=function(){return k};this.getLastName=function(){return s};this.getUserId=function(){return p.fb.userId};this.getAvatarUrl=function(){return t};this.deleteFromWall=function(a){FB.api(a,"delete",function(a){!a||
a.error?alert("Error occured"):$(loginModule).find(".notice").remove()})};this.refreshActivityFeed=function(){q()};this.showOverlayById=function(a,b){a&&$("#overlay_"+a).show(0,function(){b&&b()})};this.hideOverlayById=function(a,b){a&&$("#overlay_"+a).hide(0,function(){b&&"function"===typeof b&&b()})};FB&&b&&b.appId&&(b.target&&(e=b.target),b.ns&&(i=b.ns),b.userSession&&(p=b.userSession),FB.api({method:"fql.query",query:"SELECT uid, first_name, last_name, pic_square FROM user WHERE uid = me()"},
l))};var DcFacebookSocialExp=function(b){function l(){if(UtilCookie){var b=UtilCookie.getCookie("disableSE");if("true"===b){p.disableSE=b;return}$("#socialbar").show();b=UtilCookie.getCookie("socialExpActive");p.isAppActive=b;if("all"!==n&&(b=UtilCookie.getCookie("dailycaller_user_level"),p.userLevel=b,"editor"!=b&&"editor"==n||"subscriber"!=b&&"editor"!=b&&"subscriber"==n))return}$(".dc-fb-social-exp.engage").length&&(s=new DcFacebookEngage({target:$(".dc-fb-social-exp.engage:eq(0)"),onDisableSocialExp:j}));
$(".dc-fb-connect").length&&(i=new DcFacebookConnect({appId:g,target:$(".dc-fb-connect:eq(0)")}))&&!p.disableSE&&i.connect(function(b){"object"===typeof b&&(p.fb=b);a(p)})}function j(){UtilCookie&&(UtilCookie.setCookie("disableSE",!0,r),s&&s.remove(),i&&i.remove())}function f(a){2==a.status&&q(!0,a.userId,a.accessToken)}function a(b){function h(n){if(0===j||1===j||!1===n){if(s){s.show();$(".dc-fb-login").bind("click",function(){i.initAuth(f,l)});return}}else if(null===p.isAppActive&&2===p.fb.status){q(!1,
p.fb.userId,p.fb.accessToken,function(){a(p)});return}if(DcFacebookProfile&&(k=new DcFacebookProfile({target:$(".dc-fb-connect"),userSession:b,appId:g,ns:e})))"true"===b.isAppActive&&d(),$(window).bind("facebook.profile.onload",function(){k.show();m=k.getUserId();$(".dc-fb-social-exp-wrapper").css("display","block");if($(".dc-fb-social-exp.friends-activity").length&&(t=new DcFacebookFriendsRecentActivity({target:$(".dc-fb-social-exp.friends-activity:eq(0)"),appId:g,accessToken:i.getAccessToken(),
ns:e,uid:m,onLoad:c})))t.getHtml(),t.show()})}var m=null,j=b&&b.fb?b.fb.status:0,l=null;FB.api("/me/permissions",function(a){var b=a&&a.data?a.data:null,a=!0;if(b&&"object"===typeof b[0]){var b=b[0],d=i.getDefaultScope().scope,d=d.split(",");if(d.length)for(var c=d.length,e=0;e<c;e+=1){var g=d[e];b.hasOwnProperty(g)||(a=!1,l||(l={scope:""}),l.scope+=g+(e<c-1?",":""))}}h(a)})}function d(){var a=!1,b=$('link[rel="canonical"]').attr("href"),b=b.replace("dailycaller.local","dailycaller.com");-1!==b.indexOf("?")&&
(b=b.split("?")[0]);-1!==b.indexOf("#")&&(b=b.split("#")[0]);FB.api("/me/"+e+":read",function(d){(!d||d.error)&&console.log(d);if((d=d.data)&&d.length)for(var c=d.length,h=0;h<c;h+=1)try{var g=d[h];if(g&&g.data){var f=g.data;if(f&&f.article&&(f.article.url||"")==b){a=!0;break}}}catch(i){console&&console.log&&console.log(i)}a||FB.api("/me/"+e+":read","post",{article:b},function(a){!a||a.error?console.log(a):k&&k.refreshActivityFeed()})})}function c(){var a=t.getUsersFeedList();6>=a.length&&$(t.getHtml()).animate({width:298},
300,function(){$(this).addClass("sm");$(".dc-fb-social-exp.most-read:eq(0)").find("a").each(function(){var a=$(this).html();$(this).html(DcUtilEllipser.truncate(a,50,!0))});$(".dc-fb-social-exp.most-read").css("display","block");$(".dc-module.dc-fb-social-exp.most-read").find(".more").bind("click",function(a){a.preventDefault();$("html, body").animate({scrollTop:$("#widget-popular").offset().top-30},2E3)})});$("#widget-fb-friends-most-read").length&&new DcFacebookMostRead({appId:g,target:$("#widget-fb-friends-most-read"),
data:a,onLoadCb:h})}function h(a){0<a.getContent().length&&($("#widget-fb-friends-most-read").find(".feed").append(a.getHtml()),$(".button-most-popular").removeClass("hilite"),$("#widget-most-popular").css("display","none"),$("#widget-popular .buttons").addClass("social-exp"),$(".button-fb-friends-most-read").css("display","inline"),a.show())}function q(a,b,d,c){(!b||!d)&&console&&console.log("Unable to store user credentials.");$.ajax({url:"/wp-admin/admin-ajax.php",type:"post",dataType:"json",data:"action=fb_login&userID="+
b+"&accessToken="+d,success:function(b){null==b&&a?window.location.reload():"true"==b.success?("true"==b.isActive?(UtilCookie.setCookie("socialExpActive",!0,1E3),p.isAppActive=!0):(UtilCookie.setCookie("socialExpActive",!1,1E3),p.isAppActive=!1),"true"==b.doRegistration?document.location.href="http://"+document.domain+"/wp-login.php?action=fblogin&fbUserID="+p.fb.userId+"&accessToken="+p.fb.accessToken+"&redirect_to="+window.location.href+"%23invite":a&&window.location.reload()):a&&window.location.reload();
c&&"function"===typeof c&&c()},error:function(){a&&window.location.reload()}})}var m=this,g=null,e=null,i,k,s,t,r=1E3,n="all",p={disableSE:!1,isAppActive:null,userLevel:null};this.closeDialog=function(){var a=$("#dialog");a&&a.fadeOut(200,function(){a.remove()})};this.showDialog=function(a,b){var d=$('<div id="dialog" class="se-overlay" style="padding:10px;text-align:left;width:360px;"></div>');if(b){a&&d.append('<h3 class="dc-se-hdg"><span class="bkg">'+a+'</span><span class="corner">&nbsp;</span></h3>');
d.append('<p style="margin:0 0 20px 0;">'+b+"</p>").append('<div class="button close" style="cursor:pointer;float: right;padding: 5px 29px;border-radius: 3px;color: #832921;border: 1px solid #832921;background-color: #CECFC8;">Close</div>');document.getElementById("dialog")&&$("#dialog").remove();$(d).insertBefore($("body").children().eq(0));var c=d.width(),e=d.height(),h=$(window).width(),g=$(window).height();d.css({left:h/2-c/2,top:g/2-e/2});d.fadeIn(300,function(){d.find(".close").bind("click",
m.closeDialog)})}};b&&FB&&b.appId&&(b.disableSocialExp&&"null"!==b.disableSocialExp&&(r=parseInt(b.disableSocialExp)),b.allowedUserLevel&&"null"!==b.allowedUserLevel&&(n=b.allowedUserLevel),g=b.appId,e=b.ns,l())};var DcWidgetPager=function(b){function l(){if(1<q){m&&($(e).append(i),1===d&&$(i).addClass("disabled"));if(!g)for(var a=0;a<q;a+=1){var b=a+1,b=$('<a class="page'+(b===d?" active":"")+'" data-page-num="'+b+'" href="#page/'+b+'"><span>'+b+"</span></a>");$(e).append(b)}m&&($(e).append(k),d===q&&$(i).addClass("disabled"))}}function j(){$(e).delegate("a.page","click",f);$(i).bind("click",function(b){b.preventDefault();1<d&&(d--,$(a).trigger("pager.prev"),$(this).removeClass("disabled"),$(k).hasClass("disabled")&&
$(k).removeClass("disabled"));1===d&&$(this).addClass("disabled")});$(k).bind("click",function(b){b.preventDefault();d<q&&(d++,$(a).trigger("pager.next"),$(this).removeClass("disabled"),$(i).hasClass("disabled")&&$(i).removeClass("disabled"));d===q&&$(this).addClass("disabled")})}function f(a){a.preventDefault();a.stopPropagation();a=$(this).attr("data-page-num");$(e).find(".page").removeClass("active");$(this).addClass("active");if(b.onPageClick)b.onPageClick(a);return!1}var a=this,d=1,c=null,h=
5,q=null,m=!1,g=!1,e=$('<div class="dc-widget-pager"></div>'),i=$('<a class="control prev" title="Previous" href="#previous">Previous</a>'),k=$('<a class="control next" title="Next" href="#next">Next</a>');this.getHtml=function(){return $(e).get(0)};this.getTotalPages=function(){return q};this.getCurrentPage=function(){return d};this.getItemsPerPage=function(){return h};b&&(b.currentPage&&(d=b.currentPage),b.pageSize&&(h=parseInt(b.pageSize)),b.totalItems&&(c=parseInt(b.totalItems)),null!==c&&"number"===
typeof c&&(q=Math.ceil(c/h)),b.enablePrevNext&&(m=b.enablePrevNext),!0===b.disableNavByPage&&(g=!0),l(),j())};(function(b){var l={vertical:!1,rtl:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",
buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},j=!1;b(window).bind("load.jcarousel",function(){j=!0});b.jcarousel=function(a,d){this.options=b.extend({},l,d||{});this.autoStopped=this.locked=!1;this.buttonPrevState=this.buttonNextState=this.buttonPrev=this.buttonNext=this.list=this.clip=this.container=null;if(!d||void 0===d.rtl)this.options.rtl="rtl"==(b(a).attr("dir")||b("html").attr("dir")||"").toLowerCase();this.wh=!this.options.vertical?"width":"height";this.lt=!this.options.vertical?
this.options.rtl?"right":"left":"top";for(var c="",h=a.className.split(" "),f=0;f<h.length;f++)if(-1!=h[f].indexOf("jcarousel-skin")){b(a).removeClass(h[f]);c=h[f];break}"UL"==a.nodeName.toUpperCase()||"OL"==a.nodeName.toUpperCase()?(this.list=b(a),this.clip=this.list.parents(".jcarousel-clip"),this.container=this.list.parents(".jcarousel-container")):(this.container=b(a),this.list=this.container.find("ul,ol").eq(0),this.clip=this.container.find(".jcarousel-clip"));0===this.clip.size()&&(this.clip=
this.list.wrap("<div></div>").parent());0===this.container.size()&&(this.container=this.clip.wrap("<div></div>").parent());""!==c&&-1==this.container.parent()[0].className.indexOf("jcarousel-skin")&&this.container.wrap('<div class=" '+c+'"></div>');this.buttonPrev=b(".jcarousel-prev",this.container);0===this.buttonPrev.size()&&null!==this.options.buttonPrevHTML&&(this.buttonPrev=b(this.options.buttonPrevHTML).appendTo(this.container));this.buttonPrev.addClass(this.className("jcarousel-prev"));this.buttonNext=
b(".jcarousel-next",this.container);0===this.buttonNext.size()&&null!==this.options.buttonNextHTML&&(this.buttonNext=b(this.options.buttonNextHTML).appendTo(this.container));this.buttonNext.addClass(this.className("jcarousel-next"));this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"});this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0);this.container.addClass(this.className("jcarousel-container")).css({position:"relative"});
!this.options.vertical&&this.options.rtl&&this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl");var m=null!==this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,c=this.list.children("li"),g=this;if(0<c.size()){var e=0,i=this.options.offset;c.each(function(){g.format(this,i++);e=e+g.dimension(this,m)});this.list.css(this.wh,e+100+"px");if(!d||void 0===d.size)this.options.size=c.size()}this.container.css("display","block");this.buttonNext.css("display","block");
this.buttonPrev.css("display","block");this.funcNext=function(){g.next()};this.funcPrev=function(){g.prev()};this.funcResize=function(){g.resizeTimer&&clearTimeout(g.resizeTimer);g.resizeTimer=setTimeout(function(){g.reload()},100)};null!==this.options.initCallback&&this.options.initCallback(this,"init");!j&&b.browser.safari?(this.buttons(!1,!1),b(window).bind("load.jcarousel",function(){g.setup()})):this.setup()};var f=b.jcarousel;f.fn=f.prototype={jcarousel:"0.2.8"};f.fn.extend=f.extend=b.extend;
f.fn.extend({setup:function(){this.prevLast=this.prevFirst=this.last=this.first=null;this.animating=!1;this.tail=this.resizeTimer=this.timer=null;this.inTail=!1;if(!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var a=this.pos(this.options.start,!0);this.prevFirst=this.prevLast=null;this.animate(a,!1);b(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize);null!==this.options.setupCallback&&this.options.setupCallback(this)}},reset:function(){this.list.empty();
this.list.css(this.lt,"0px");this.list.css(this.wh,"10px");null!==this.options.initCallback&&this.options.initCallback(this,"reset");this.setup()},reload:function(){null!==this.tail&&this.inTail&&this.list.css(this.lt,f.intval(this.list.css(this.lt))+this.tail);this.tail=null;this.inTail=!1;null!==this.options.reloadCallback&&this.options.reloadCallback(this);if(null!==this.options.visible){var a=this,b=Math.ceil(this.clipping()/this.options.visible),c=0,h=0;this.list.children("li").each(function(f){c+=
a.dimension(this,b);f+1<a.first&&(h=c)});this.list.css(this.wh,c+"px");this.list.css(this.lt,-h+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0;this.buttons()},unlock:function(){this.locked=!1;this.buttons()},size:function(a){void 0!==a&&(this.options.size=a,this.locked||this.buttons());return this.options.size},has:function(a,b){if(void 0===b||!b)b=a;null!==this.options.size&&b>this.options.size&&(b=this.options.size);for(var c=a;c<=b;c++){var h=this.get(c);if(!h.length||h.hasClass("jcarousel-item-placeholder"))return!1}return!0},
get:function(a){return b(">.jcarousel-item-"+a,this.list)},add:function(a,d){var c=this.get(a),h=0,j=b(d);if(0===c.length)for(var m,g=f.intval(a),c=this.create(a);;){if(m=this.get(--g),0>=g||m.length){0>=g?this.list.prepend(c):m.after(c);break}}else h=this.dimension(c);"LI"==j.get(0).nodeName.toUpperCase()?(c.replaceWith(j),c=j):c.empty().append(d);this.format(c.removeClass(this.className("jcarousel-item-placeholder")),a);j=null!==this.options.visible?Math.ceil(this.clipping()/this.options.visible):
null;h=this.dimension(c,j)-h;0<a&&a<this.first&&this.list.css(this.lt,f.intval(this.list.css(this.lt))-h+"px");this.list.css(this.wh,f.intval(this.list.css(this.wh))+h+"px");return c},remove:function(a){var b=this.get(a);if(b.length&&!(a>=this.first&&a<=this.last)){var c=this.dimension(b);a<this.first&&this.list.css(this.lt,f.intval(this.list.css(this.lt))+c+"px");b.remove();this.list.css(this.wh,f.intval(this.list.css(this.wh))-c+"px")}},next:function(){null!==this.tail&&!this.inTail?this.scrollTail(!1):
this.scroll(("both"==this.options.wrap||"last"==this.options.wrap)&&null!==this.options.size&&this.last==this.options.size?1:this.first+this.options.scroll)},prev:function(){null!==this.tail&&this.inTail?this.scrollTail(!0):this.scroll(("both"==this.options.wrap||"first"==this.options.wrap)&&null!==this.options.size&&1==this.first?this.options.size:this.first-this.options.scroll)},scrollTail:function(a){if(!this.locked&&!this.animating&&this.tail){this.pauseAuto();var b=f.intval(this.list.css(this.lt)),
b=!a?b-this.tail:b+this.tail;this.inTail=!a;this.prevFirst=this.first;this.prevLast=this.last;this.animate(b)}},scroll:function(a,b){!this.locked&&!this.animating&&(this.pauseAuto(),this.animate(this.pos(a),b))},pos:function(a,b){var c=f.intval(this.list.css(this.lt));if(this.locked||this.animating)return c;"circular"!=this.options.wrap&&(a=1>a?1:this.options.size&&a>this.options.size?this.options.size:a);for(var h=this.first>a,j="circular"!=this.options.wrap&&1>=this.first?1:this.first,m=h?this.get(j):
this.get(this.last),g=h?j:j-1,e=null,i=0,k=!1,l=0;h?--g>=a:++g<a;){e=this.get(g);k=!e.length;if(0===e.length&&(e=this.create(g).addClass(this.className("jcarousel-item-placeholder")),m[h?"before":"after"](e),null!==this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(0>=g||g>this.options.size)))m=this.get(this.index(g)),m.length&&(e=this.add(g,m.clone(!0)));m=e;l=this.dimension(e);k&&(i+=l);if(null!==this.first&&("circular"==this.options.wrap||1<=g&&(null===this.options.size||g<=
this.options.size)))c=h?c+l:c-l}for(var j=this.clipping(),t=[],r=0,n=0,m=this.get(a-1),g=a;++r;){e=this.get(g);k=!e.length;if(0===e.length){e=this.create(g).addClass(this.className("jcarousel-item-placeholder"));if(0===m.length)this.list.prepend(e);else m[h?"before":"after"](e);if(null!==this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(0>=g||g>this.options.size))m=this.get(this.index(g)),m.length&&(e=this.add(g,m.clone(!0)))}m=e;l=this.dimension(e);if(0===l)throw Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...");
"circular"!=this.options.wrap&&null!==this.options.size&&g>this.options.size?t.push(e):k&&(i+=l);n+=l;if(n>=j)break;g++}for(e=0;e<t.length;e++)t[e].remove();0<i&&(this.list.css(this.wh,this.dimension(this.list)+i+"px"),h&&(c-=i,this.list.css(this.lt,f.intval(this.list.css(this.lt))-i+"px")));i=a+r-1;"circular"!=this.options.wrap&&this.options.size&&i>this.options.size&&(i=this.options.size);if(g>i){r=0;g=i;for(n=0;++r;){e=this.get(g--);if(!e.length)break;n+=this.dimension(e);if(n>=j)break}}g=i-r+
1;"circular"!=this.options.wrap&&1>g&&(g=1);this.inTail&&h&&(c+=this.tail,this.inTail=!1);this.tail=null;"circular"!=this.options.wrap&&i==this.options.size&&1<=i-r+1&&(h=f.intval(this.get(i).css(!this.options.vertical?"marginRight":"marginBottom")),n-h>j&&(this.tail=n-j-h));b&&a===this.options.size&&this.tail&&(c-=this.tail,this.inTail=!0);for(;a-- >g;)c+=this.dimension(this.get(a));this.prevFirst=this.first;this.prevLast=this.last;this.first=g;this.last=i;return c},animate:function(a,d){if(!this.locked&&
!this.animating){this.animating=!0;var c=this,h=function(){c.animating=!1;0===a&&c.list.css(c.lt,0);!c.autoStopped&&("circular"==c.options.wrap||"both"==c.options.wrap||"last"==c.options.wrap||null===c.options.size||c.last<c.options.size||c.last==c.options.size&&null!==c.tail&&!c.inTail)&&c.startAuto();c.buttons();c.notify("onAfterAnimation");if("circular"==c.options.wrap&&null!==c.options.size)for(var b=c.prevFirst;b<=c.prevLast;b++)null!==b&&!(b>=c.first&&b<=c.last)&&(1>b||b>c.options.size)&&c.remove(b)};
this.notify("onBeforeAnimation");if(!this.options.animation||!1===d)this.list.css(this.lt,a+"px"),h();else{var f=!this.options.vertical?this.options.rtl?{right:a}:{left:a}:{top:a},h={duration:this.options.animation,easing:this.options.easing,complete:h};b.isFunction(this.options.animationStepCallback)&&(h.step=this.options.animationStepCallback);this.list.animate(f,h)}}},startAuto:function(a){void 0!==a&&(this.options.auto=a);if(0===this.options.auto)return this.stopAuto();if(null===this.timer){this.autoStopped=
!1;var b=this;this.timer=window.setTimeout(function(){b.next()},1E3*this.options.auto)}},stopAuto:function(){this.pauseAuto();this.autoStopped=!0},pauseAuto:function(){null!==this.timer&&(window.clearTimeout(this.timer),this.timer=null)},buttons:function(a,b){if(null==a&&(a=!this.locked&&0!==this.options.size&&(this.options.wrap&&"first"!=this.options.wrap||null===this.options.size||this.last<this.options.size),!this.locked&&(!this.options.wrap||"first"==this.options.wrap)&&null!==this.options.size&&
this.last>=this.options.size))a=null!==this.tail&&!this.inTail;if(null==b&&(b=!this.locked&&0!==this.options.size&&(this.options.wrap&&"last"!=this.options.wrap||1<this.first),!this.locked&&(!this.options.wrap||"last"==this.options.wrap)&&null!==this.options.size&&1==this.first))b=null!==this.tail&&this.inTail;var c=this;0<this.buttonNext.size()?(this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext),a&&this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext),
this.buttonNext[a?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",a?!1:!0),null!==this.options.buttonNextCallback&&this.buttonNext.data("jcarouselstate")!=a&&this.buttonNext.each(function(){c.options.buttonNextCallback(c,this,a)}).data("jcarouselstate",a)):null!==this.options.buttonNextCallback&&this.buttonNextState!=a&&this.options.buttonNextCallback(c,null,a);0<this.buttonPrev.size()?(this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),
b&&this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),this.buttonPrev[b?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",b?!1:!0),null!==this.options.buttonPrevCallback&&this.buttonPrev.data("jcarouselstate")!=b&&this.buttonPrev.each(function(){c.options.buttonPrevCallback(c,this,b)}).data("jcarouselstate",b)):null!==this.options.buttonPrevCallback&&this.buttonPrevState!=b&&this.options.buttonPrevCallback(c,null,b);this.buttonNextState=
a;this.buttonPrevState=b},notify:function(a){var b=null===this.prevFirst?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",a,b);this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",a,b,this.first),this.callback("itemFirstOutCallback",a,b,this.prevFirst));this.prevLast!==this.last&&(this.callback("itemLastInCallback",a,b,this.last),this.callback("itemLastOutCallback",a,b,this.prevLast));this.callback("itemVisibleInCallback",a,b,this.first,this.last,this.prevFirst,
this.prevLast);this.callback("itemVisibleOutCallback",a,b,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(a,d,c,h,f,j,g){if(!(null==this.options[a]||"object"!=typeof this.options[a]&&"onAfterAnimation"!=d)){var e="object"==typeof this.options[a]?this.options[a][d]:this.options[a];if(b.isFunction(e)){var i=this;if(void 0===h)e(i,c,d);else if(void 0===f)this.get(h).each(function(){e(i,this,h,c,d)});else for(var a=function(a){i.get(a).each(function(){e(i,this,a,c,d)})},k=h;k<=f;k++)null!==
k&&!(k>=j&&k<=g)&&a(k)}}},create:function(a){return this.format("<li></li>",a)},format:function(a,d){for(var a=b(a),c=a.get(0).className.split(" "),f=0;f<c.length;f++)-1!=c[f].indexOf("jcarousel-")&&a.removeClass(c[f]);a.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+d)).css({"float":this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",d);return a},className:function(a){return a+" "+a+(!this.options.vertical?"-horizontal":"-vertical")},
dimension:function(a,d){var c=b(a);if(null==d)return!this.options.vertical?c.outerWidth(!0)||f.intval(this.options.itemFallbackDimension):c.outerHeight(!0)||f.intval(this.options.itemFallbackDimension);var h=!this.options.vertical?d-f.intval(c.css("marginLeft"))-f.intval(c.css("marginRight")):d-f.intval(c.css("marginTop"))-f.intval(c.css("marginBottom"));b(c).css(this.wh,h+"px");return this.dimension(c)},clipping:function(){return!this.options.vertical?this.clip[0].offsetWidth-f.intval(this.clip.css("borderLeftWidth"))-
f.intval(this.clip.css("borderRightWidth")):this.clip[0].offsetHeight-f.intval(this.clip.css("borderTopWidth"))-f.intval(this.clip.css("borderBottomWidth"))},index:function(a,b){null==b&&(b=this.options.size);return Math.round(((a-1)/b-Math.floor((a-1)/b))*b)+1}});f.extend({defaults:function(a){return b.extend(l,a||{})},intval:function(a){a=parseInt(a,10);return isNaN(a)?0:a},windowLoaded:function(){j=!0}});b.fn.jcarousel=function(a){if("string"==typeof a){var d=b(this).data("jcarousel"),c=Array.prototype.slice.call(arguments,
1);return d[a].apply(d,c)}return this.each(function(){var c=b(this).data("jcarousel");c?(a&&b.extend(c.options,a),c.reload()):b(this).data("jcarousel",new f(this,a))})}})(jQuery);
