var UtilCookie={setCookie:function(a,m,i){if(i){var e=new Date;e.setTime(e.getTime()+864E5*i);i="; expires="+e.toGMTString()}else i="";document.cookie=a+"="+m+i+"; path=/"},getCookie:function(a){for(var a=a+"=",m=document.cookie.split(";"),i=0;i<m.length;i++){for(var e=m[i];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(a))return e.substring(a.length,e.length)}return null},deleteCookie:function(a){this.setCookie(a,"",-1)}};var DcUtilEllipser={truncate:function(a,m,i){var e=a.length>m,a=e?a.substr(0,m-1):a,a=i&&e?a.substr(0,a.lastIndexOf(" ")):a;return e?a+"...":a}};var UtilPosition={getRealTopByObj:function(a){yPos=0;if(a){yPos=a.offsetTop;for(tempEl=a.offsetParent;null!==tempEl;)yPos+=tempEl.offsetTop,tempEl=tempEl.offsetParent}return yPos},getRealTop:function(a){return yPos=getRealTopByObj(a)},getRealLeftByObj:function(a){xPos=0;if(a){xPos=a.offsetLeft;for(tempEl=a.offsetParent;null!==tempEl;)xPos+=tempEl.offsetLeft,tempEl=tempEl.offsetParent}return xPos},getRealLeft:function(a){return xPos=getRealLeftByObj(a)},getObjPos:function(a){var m=0,i=0,e=null;if(a){m=
a.offsetLeft;i=a.offsetTop;for(e=a.offsetParent;null!==e;)m+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent}return[m,i]}};var DcFacebookConnect=function(a){function m(c){if(c&&c.authResponse){var b=c.authResponse;d.userId||(d.userId=b.userID);d.accessToken||(d.accessToken=b.accessToken);d.status="connected"===c.status?2:"not_authorized"===c.status?1:0}}var i=this,e=null,b={scope:"user_birthday,user_actions.news,email,publish_actions,user_location"},d={userId:null,accessToken:null,status:0};this.getMetadata=function(){return d};this.connect=function(c){FB.getLoginStatus(function(b){(!b||b.error)&&console.log(b);m(b);
c&&"function"===typeof c&&c(d)})};this.initAuth=function(c,a){FB.login(function(b){m(b);c&&"function"===typeof c&&c(d)},a&&"object"===typeof a?a:b)};this.show=function(){$(e).css("display","block")};this.hide=function(b){$(e).fadeOut(600,b)};this.remove=function(){i.hide(function(){$(e).remove()})};this.getUserId=function(){return d.userId};this.getAccessToken=function(){return d.accessToken};this.getDefaultScope=function(){return b};(function(){if(FB&&a&&a.appId){a.target&&(e=a.target);for(var c=
{},d,j=/\+/g,l=/([^&=]+)=?([^&]*)/g,g=window.location.search.substring(1);d=l.exec(g);)c[decodeURIComponent(d[1].replace(j," "))]=decodeURIComponent(d[2].replace(j," "));"debug_scope"in c&&(b={scope:"user_birthday,email,user_location"})}})()};var DcFacebookEngage=function(a){function m(){$(e).find(".action-close").bind({click:i.remove});$(e).find(".disable-dc-se").bind("click",function(){if(a.onDisableSocialExp)a.onDisableSocialExp()})}var i=this,e=null;this.show=function(){$(e).css("display","block")};this.hide=function(b){$(e).fadeOut(600,b)};this.remove=function(){i.hide(function(){$(e).remove()})};a&&(a.target&&(e=a.target),m())};var DcFacebookActivityFeed=function(a){function m(){$(b).find(".remove").bind("click",function(b){b.preventDefault();if(a.onDeleteCb)a.onDeleteCb(b)});$(d).bind("pager.prev",function(){var c=d.getCurrentPage()-1;$(b).find(".page").css("display","none");$(b).find(".page:eq("+c+")").css("display","block")});$(d).bind("pager.next",function(){var c=d.getCurrentPage()-1;$(b).find(".page").css("display","none");$(b).find(".page:eq("+c+")").css("display","block")})}var i=null,e=!1,b=$('<div class="feed"></div>'),
d;this.getHtml=function(){return $(b).get(0)};a.posts&&(i=a.posts);a.enableDelete&&(e=a.enableDelete);a.pager&&(d=a.pager);(function(){var c=$('<div class="arrow">&#xA0;</div>'),a=$("<ul></ul>"),j=d&&d.getItemsPerPage?d.getItemsPerPage():0;$(b).append(c);if(typeof d==="object"){c=d.getHtml();$(b).append(c)}if(d&&i.length>j){a=d.getItemsPerPage();j=d.getTotalPages();if(j>1)for(c=0;c<j;c=c+1){var l=$('<div class="page"></div>'),g=$("<ul></ul>");c===0&&l.css("display","block");for(var f=0;f<a;f=f+1){var h=
c*a+f;if(!i[h])break;if((h=i[h])&&h.data){var n=h.data;if(n&&n.article){var p=n.article,n=$("<li></li>"),p=$('<a class="article" href="'+p.url+'" title="'+p.title+'"><span class="icon article">&#xA0;</span><span>'+DcUtilEllipser.truncate(p.title,50,true)+"</span></a>");e&&$(n).append("<span"+(h&&h.id?' id="'+h.id+'"':"")+' class="remove">X</span>');$(n).append(p);$(g).append(n)}}}l.append(g);$(b).append(l)}}else{if(i.length)for(j=0;j<i.length;j=j+1){if((c=i[j])&&c.data)if((l=c.data)&&l.article){g=
l.article;l=$("<li></li>");g=$('<a class="article" href="'+g.url+'" title="'+g.title+'"><span class="icon article">&#xA0;</span><span>'+DcUtilEllipser.truncate(g.title,50,true)+"</span></a>");e&&$(l).append("<span"+(c&&c.id?' id="'+c.id+'"':"")+' class="remove">X</span>');$(l).append(g);$(a).append(l)}}else $(b).append("<p>There is no activity for this feed.</p>");$(b).append(a)}m()})()};var DcFacebookFriendsRecentActivity=function(a){function m(){h&&$(h).bind("click",d);$(n).bind("pager.prev",function(){var b=n.getCurrentPage();k(b)});$(n).bind("pager.next",function(){var b=n.getCurrentPage();k(b)});$(l).find(".profile").each(function(){$(this).bind("mouseenter",function(){if("block"!==$("#dialog").css("display")){var b=this.id,a=this;p&&p!==b&&j.hideFeedById(p);p=b;var c=$("#fb_feed_"+b),d=UtilPosition.getObjPos($(this).get(0)),f=!1;$(a).addClass("active");var g=UtilPosition.getObjPos($(l).get(0)),
t=d[0]<=g[0]+parseInt($(l).css("padding-left"))+2?!0:!1,g=d[0]+$(a).width()>g[0]+$(l).width()?!0:!1;t?$(a).addClass("left-flush"):g&&$(a).addClass("rgt-flush");c.css({left:d[0]+"px",top:d[1]+50+"px"});"BODY"!==$(c).parent().get(0).nodeName&&$(c).insertBefore($("body").children().eq(0));j.showFeedById(b,function(){$(c).one("mouseenter",function(){f=!0;$(this).bind("mouseleave",function(){j.hideFeedById(b);$(a).removeClass("active").removeClass("left-flush").removeClass("rgt-flush")})})});$(this).bind("mouseleave",
function(){setTimeout(function(){f||(j.hideFeedById(b),$(a).removeClass("active").removeClass("left-flush").removeClass("rgt-flush"))},200)})}})})}function i(){FB.api("/","post",{access_token:f,batch:[{method:"GET",name:"get-friends",omit_response_on_success:!1,relative_url:"method/fql.query?query=SELECT uid, name, pic_square FROM user WHERE is_app_user=1 AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me())"}]},function(b){if(!b||b.error)console.log(b);else{var c=[];t=$.parseJSON(b[0].body);if(t.length){for(var b=
t.length,d=0;d<b;d+=1)c.push({method:"GET",omit_response_on_success:!1,relative_url:"/"+t[d].uid+"/"+g+":read?limit=20"});e&&"function"===typeof e&&FB.api("/","post",{batch:c},e)}else if(m(),a.onLoad)a.onLoad()}})}function e(a){var c=0;if(!a||a.error)console.log(a);else if(a.length){for(var c=a.length,d=0;d<c;d+=1){var f=$.parseJSON(a[d].body);if(f.data){var f=f.data,g={uid:null,articles:[]};if(f.length)for(var j=f.length,e=0;e<j;e+=1){var h=f[e],k=h.data.article;""!==k.name&&""!==k.href&&(k={data:{article:{id:k.id,
url:k.url,title:k.title}}},g.uid||(g.uid=h.from.id||""),g.articles.push(k))}if((f=g)&&f.uid){j=g=void 0;if(f&&t){g=t.length;j=f.uid;for(e=0;e<g;e+=1)if(h=t[e],j==h.uid){f.name=h.name;f.pic_square=h.pic_square;break}}f.articles.length&&u.push(f)}}}if(u.length&&(r=u.length,a=u,$('<div class="dc-fb-friend-feed dropdown"></div>'),a.length&&DcFacebookActivityFeed)){c=a.length;for(d=0;d<c;d+=1)g=a[d],f=$('<div id="'+g.uid+'" class="profile"></div>'),g=$("<img></img>").attr({src:g.pic_square,alt:g.name}),
$(f).append(g),$(q).append(f);$(o).append(q);$(o).insertBefore(".list",l);for(d=0;d<c;d+=1)f=(new DcFacebookActivityFeed({posts:a[d].articles,pager:new DcWidgetPager({pageSize:4,totalItems:a[d].articles.length,enablePrevNext:!0,disableNavByPage:!0})})).getHtml(),$('<h3 class="dc-se-hdg"><span class="bkg">'+a[d].name+'</span><span class="corner">&#xA0;</span></h3>').insertBefore($(f).children().eq(0)),$(f).attr("id","fb_feed_"+a[d].uid).addClass("se-overlay"),$(".list",l).append(f)}b()}}function b(){5>
r?c():(s=11,11<r&&(n=new DcWidgetPager({pageSize:s,totalItems:r,onPageClick:k,enablePrevNext:!0,disableNavByPage:!0}),$(l).find(".tools").append(n.getHtml())));m();$(".list",l).append('<div class="clear">&#xA0;</div>').removeClass("hide");"#invite"===window.location.hash&&FB&&(window.onload=function(){$(h).trigger("click")});if(a.onLoad)a.onLoad()}function d(b){b.preventDefault();"block"!==$("#dialog").css("display")&&FB.ui({method:"apprequests",message:"Hey! I just added The DC Social Reader app so I can keep track of the latest news, features and videos with my friends. You should too! Click here to join:"},
function(b){b&&DcFacebookSocialExp.showDialog("Join The Daily Caller Social Experience","Your invite request(s) have been sent.")})}function c(){h&&$([h,$(l).find(".promo")]).each(function(){$(this).removeClass("hide")})}function k(b){var a=$(o).width(),a=-((b-1)*a),c=$(".profile:last",q),d=parseInt($(c).css("margin-left")),c=$(c).width()+d;if(n){var f=n.getTotalPages(),g=$(".profile",q).length,e=f*s;b==f&&0<e%g&&(a=a+(e%g*c-d)+2);$(q).animate({left:a},500,function(){})}}var j=this,l=null,g=null,
f=null,h=null,n=null,p=null,s=6,q=$('<div style="left:0px;" class="profiles"></div>'),o=$('<div class="wrapper"></div>'),r=0,t={},u=[];this.getHtml=function(){return l};this.show=function(){$(l).css("display","block")};this.hide=function(b){$(l).fadeOut(600,b)};this.showFeedById=function(b,a){b&&$("#fb_feed_"+b).show(0,function(){a&&a()})};this.hideFeedById=function(b){b&&$("#fb_feed_"+b).hide()};this.getUsersFeedList=function(){return u};a&&(a.target&&(l=a.target),a.accessToken&&(f=a.accessToken),
a.ns&&(g=a.ns),h=$(l).find(".dc-fb-find-friends"),i())};var DcFacebookMostRead=function(a){function m(b){if(b.length){d=b;for(var a=0;10>a;a+=1){var c=b[a];if(c&&!(0>=c.length)){var f=c[1]||"",e=c[2]||"";if(""!==(c[0]||"")&&""!==f)f=$("<li></li>"),c=$('<a href="'+c[0]+'" data-nr="'+e+' reads">'+c[1]+"</a>"),$(f).append(c),$(k).append(f)}}}}function i(b){var a=[],c=[];if(b.length){articles=b;for(var b=articles.length,d=0;d<b;d+=1){var e=articles[d],k=e[0],e=e[1];-1===$.inArray(k,a)&&a.push(k)}if(a.length){d=a.length;for(k=0;k<d;k+=1){for(var p=a[k],i=[p,
"",0],m=0;m<b;m+=1){var e=articles[m],o=e[0],e=e[1];p==o&&(""===i[1]&&(i[1]=e),i[2]++)}c.push(i)}}c.sort(function(b,a){return a[2]-b[2]})}return c}var e=this,b,d=[],c,k=$("<ul></ul>");this.getHtml=function(){return k.get(0)};this.show=function(){$(b).css("display","block")};this.hide=function(a){$(b).fadeOut(600,function(){"function"===typeof a&&a()})};this.getFeedHtml=function(){return $(b).find(".feed").html()};this.getContent=function(){return d};(function(){if(a&&a.appId){a.target&&(b=a.target);
a.data&&(c=a.data);var d;d=[];if(c&&c.length)for(var k=c.length,g=0;g<k;g+=1){var f=c[g];if(f.articles){var f=f.articles,h=0;if(f.length)for(var h=f.length,n=0;n<h;n+=1)d.push(f[n].data.article)}}k=[];if(g=d.length)for(f=0;f<g;f+=1)h=d[f],""!==h.url&&""!==h.title&&k.push([h.url,h.title,0]);d=k;d.length?(d=i(d),m(d)):m([]);if(a.onLoadCb&&"function"===typeof a.onLoadCb)a.onLoadCb(e)}})()};var DcFacebookProfile=function(a){function m(b){if(b||!b.length)b=b[0],n=b.first_name||"",p=b.last_name||"",s=b.pic_square||"","true"==o.isAppActive?($(f).find('.action-app-state[data-active="true"]').addClass("active"),$(f).find(".action-app-state-label").text("Active")):($(f).find('.action-app-state[data-active="false"]').addClass("active"),$(f).find(".action-app-state-label").text("Inactive")),b=g.getFirstName()+" "+g.getLastName(),$("h3 span:eq(0)",f).html(b),$(".fb-btn",f).remove(),$(".inline",
f).removeClass("hide"),$(".photo",f).html('<img src="'+s+'" alt="'+b+'"/>'),$("<p>You are logged into Facebook.</p>").insertAfter($(f).find(".photo")),$(f).css("display","block"),j(),$(window).trigger("facebook.profile.onload")}function i(){$(f).find(".action-invite-friends").bind("click",e);$(f).find(".action-logout").bind("click",b);$(f).find(".action-remove-app").bind("click",d);$(f).find(".action-app-state").bind("click",c);$(f).find(".dc-fb-se-profile-toolbar li.dropdown").each(function(){$(this).bind("mouseenter",
function(){var b=$("a",this).attr("id"),a=this;if("block"!==$("#dialog").css("display")){q&&q!==b&&g.hideOverlayById(q);q=b;var c=$("#overlay_"+b);UtilPosition.getObjPos($(this).get(0));var d=!1;$(a).addClass("active");g.showOverlayById(b,function(){$(c).bind("mouseenter",function(){d=!0;$(this).bind("mouseleave",function(){d=!1;setTimeout(function(){q!==b&&(g.hideOverlayById(b),$(a).removeClass("active"))},200)})})});$(this).bind("mouseleave",function(){setTimeout(function(){d||(g.hideOverlayById(b),
$(a).removeClass("active"))},200)})}})})}function e(b){b.preventDefault();"block"!==$("#dialog").css("display")&&FB.ui({method:"apprequests",message:"Hey! I just added The DC Social Reader app so I can keep track of the latest news, features and videos with my friends. You should too! Click here to join:"},function(b){b&&DcFacebookSocialExp.showDialog("Join The Daily Caller Social Experience","Your invite request(s) have been sent.")})}function b(b){b.preventDefault();FB.logout(function(){UtilCookie&&
null!=UtilCookie.getCookie("dailycaller_logged_in")?$.ajax({url:"/wp-admin/admin-ajax.php",type:"post",dataType:"json",data:"action=sr_logout",complete:function(){window.location.reload()}}):window.location.reload()})}function d(b){b.preventDefault();window.confirm("Are you sure you would like to remove The Daily Caller Social Experience?")&&FB.api("/me/permissions","DELETE",function(b){(!b||b.error)&&console.log(b);window.location.reload()})}function c(b){b.preventDefault();b=b.target;$(b).hasClass("active")||
($(f).find(".action-app-state").removeClass("active"),"true"===$(b).attr("data-active")?($(f).find(".action-app-state-label").text("Active"),k(!0),$(b).addClass("active")):($(b).addClass("active"),$(f).find(".action-app-state-label").text("Inactive"),k()))}function k(b){if(b)UtilCookie.setCookie("socialExpActive",!0,1E3),$.ajax({url:"/wp-admin/admin-ajax.php",type:"post",dataType:"json",data:"action=sr_cookie_set&userID="+o.fb.userId+"&accessToken="+o.fb.accessToken+"&active=true",complete:function(){window.location.reload()}});
else if(UtilCookie.setCookie("socialExpActive",!1,1E3),$.ajax({url:"/wp-admin/admin-ajax.php",type:"post",dataType:"json",data:"action=sr_cookie_set&userID="+o.fb.userId+"&accessToken="+o.fb.accessToken+"&active=false"}),a.onSetSocialExpAppState)a.onSetSocialExpAppState(b)}function j(){var b;FB.api("/me/"+h+":read?limit=20",function(a){a&&a.data&&(b=new DcFacebookActivityFeed({posts:a.data,enableDelete:!0,onDeleteCb:l,pager:new DcWidgetPager({pageSize:4,totalItems:a.data.length,enablePrevNext:!0,
disableNavByPage:!0})}),a=b.getHtml(),$(a).addClass("se-overlay").attr("id","overlay_dc_fb_se_my_activity"),$('<h3 class="dc-se-hdg"><span class="bkg">My Activity</span><span class="corner">&#xA0;</span></h3>').insertBefore($(a).children().eq(0)),$(a).insertAfter($(f).find(".dc-fb-se-activity:eq(0)")),i())})}function l(b){var b=b.target,a=b.id,c=$(b).parent();a&&($(c).css("display","block"),window.confirm('Selecting "OK" will remove this post from your Facebook wall. Are you sure?')&&FB.api("/"+a,
"delete",function(b){!b||b.error?console.log(b):($(c).remove(),g.refreshActivityFeed())}))}var g=this,f=null,h=null,n=null,p=null,s=null,q,o=null;this.getTarget=function(){return null!==f&&f.get?f.get(0):f};this.show=function(){$(f).css("display","block")};this.getFirstName=function(){return n};this.getLastName=function(){return p};this.getUserId=function(){return o.fb.userId};this.getAvatarUrl=function(){return s};this.deleteFromWall=function(b){FB.api(b,"delete",function(b){!b||b.error?alert("Error occured"):
$(loginModule).find(".notice").remove()})};this.refreshActivityFeed=function(){$(f).find(".my-activity").empty();j()};this.showOverlayById=function(b,a){b&&$("#overlay_"+b).show(0,function(){a&&a()})};this.hideOverlayById=function(b){b&&$("#overlay_"+b).hide()};FB&&a&&a.appId&&(a.target&&(f=a.target),a.ns&&(h=a.ns),a.userSession&&(o=a.userSession),FB.api({method:"fql.query",query:"SELECT uid, first_name, last_name, pic_square FROM user WHERE uid = me()"},m))};var DcFacebookSocialExp=function(a){function m(){if(UtilCookie){var a=UtilCookie.getCookie("disableSE");if("true"===a){r.disableSE=a;return}a=UtilCookie.getCookie("socialExpActive");r.isAppActive=a;if("all"!==o&&(a=UtilCookie.getCookie("dailycaller_user_level"),r.userLevel=a,"editor"!=a&&"editor"==o||"subscriber"!=a&&"editor"!=a&&"subscriber"==o))return}$(".dc-fb-social-exp.engage").length&&(p=new DcFacebookEngage({target:$(".dc-fb-social-exp.engage:eq(0)"),onDisableSocialExp:i}));$(".dc-fb-connect").length&&
(h=new DcFacebookConnect({appId:g,target:$(".dc-fb-connect:eq(0)")}))&&!r.disableSE&&h.connect(function(a){"object"===typeof a&&(r.fb=a);b(r)})}function i(){UtilCookie&&(UtilCookie.setCookie("disableSE",!0,q),p&&p.remove(),h&&h.remove())}function e(b){2==b.status&&j(!0,b.userId,b.accessToken)}function b(a){function k(o){if(0===i||1===i||!1===o){if(p){p.show();$(".dc-fb-login").bind("click",function(){h.initAuth(e,m)});return}}else if(null===r.isAppActive&&2===r.fb.status){j(!1,r.fb.userId,r.fb.accessToken,
function(){b(r)});return}if(DcFacebookProfile&&(n=new DcFacebookProfile({target:$(".dc-fb-connect"),userSession:a,appId:g,ns:f})))"true"===a.isAppActive&&d(),$(window).bind("facebook.profile.onload",function(){n.show();l=n.getUserId();$(".dc-fb-social-exp-wrapper").css("display","block");if($(".dc-fb-social-exp.friends-activity").length&&(s=new DcFacebookFriendsRecentActivity({target:$(".dc-fb-social-exp.friends-activity:eq(0)"),appId:g,accessToken:h.getAccessToken(),ns:f,uid:l,onLoad:c})))s.getHtml(),
s.show()})}var l=null,i=a&&a.fb?a.fb.status:0,m=null;FB.api("/me/permissions",function(b){var a=b&&b.data?b.data:null,b=!0;if(a&&"object"===typeof a[0]){var a=a[0],c=h.getDefaultScope().scope,c=c.split(",");if(c.length)for(var d=c.length,f=0;f<d;f+=1){var g=c[f];a.hasOwnProperty(g)||(b=!1,m||(m={scope:""}),m.scope+=g+(f<d-1?",":""))}}k(b)})}function d(){var b=!1,a=window.location.href,a=a.replace("dailycaller.local","dailycaller.com");-1!==a.indexOf("?")&&(a=a.split("?")[0]);-1!==a.indexOf("#")&&
(a=a.split("#")[0]);FB.api("/me/"+f+":read",function(c){(!c||c.error)&&console.log(c);c=c.data;if(c.length)for(var d=c.length,g=0;g<d;g+=1){var e=c[g];if(e&&e.data&&(e=e.data)&&e.article&&(e.article.url||"")==a){b=!0;break}}b||FB.api("/me/"+f+":read","post",{article:a},function(b){!b||b.error?console.log(b):n&&n.refreshActivityFeed()})})}function c(){var b=s.getUsersFeedList();6>=b.length&&$(s.getHtml()).animate({width:298},300,function(){$(this).addClass("sm");$(".dc-fb-social-exp.most-read:eq(0)").find("a").each(function(){var b=
$(this).html();$(this).html(DcUtilEllipser.truncate(b,50,!0))});$(".dc-fb-social-exp.most-read").css("display","block");$(".dc-module.dc-fb-social-exp.most-read").find(".more").bind("click",function(b){b.preventDefault();$("html, body").animate({scrollTop:$("#widget-popular").offset().top-30},2E3)})});$("#widget-fb-friends-most-read").length&&new DcFacebookMostRead({appId:g,target:$("#widget-fb-friends-most-read"),data:b,onLoadCb:k})}function k(b){0<b.getContent().length&&($("#widget-fb-friends-most-read").find(".feed").append(b.getHtml()),
$(".button-most-popular").removeClass("hilite"),$("#widget-most-popular").css("display","none"),$("#widget-popular .buttons").addClass("social-exp"),$(".button-fb-friends-most-read").css("display","block"),b.show())}function j(b,a,c,d){(!a||!c)&&console&&console.log("Unable to store user credentials.");$.ajax({url:"/wp-admin/admin-ajax.php",type:"post",dataType:"json",data:"action=fb_login&userID="+a+"&accessToken="+c,success:function(a){null==a&&b?window.location.reload():"true"==a.success?("true"==
a.isActive?(UtilCookie.setCookie("socialExpActive",!0,1E3),r.isAppActive=!0):(UtilCookie.setCookie("socialExpActive",!1,1E3),r.isAppActive=!1),"true"==a.doRegistration?document.location.href="http://"+document.domain+"/wp-login.php?action=fblogin&fbUserID="+r.fb.userId+"&accessToken="+r.fb.accessToken+"&redirect_to="+window.location.href+"%23invite":b&&window.location.reload()):b&&window.location.reload();d&&"function"===typeof d&&d()},error:function(){b&&window.location.reload()}})}var l=this,g=
null,f=null,h,n,p,s,q=1E3,o="all",r={disableSE:!1,isAppActive:null,userLevel:null};this.closeDialog=function(){var b=$("#dialog");b&&b.fadeOut(200,function(){b.remove()})};this.showDialog=function(b,a){var c=$('<div id="dialog" class="se-overlay" style="padding:10px;text-align:left;width:360px;"></div>');if(a){b&&c.append('<h3 class="dc-se-hdg"><span class="bkg">'+b+'</span><span class="corner">&nbsp;</span></h3>');c.append('<p style="margin:0 0 20px 0;">'+a+"</p>").append('<div class="button close" style="cursor:pointer;float: right;padding: 5px 29px;border-radius: 3px;color: #832921;border: 1px solid #832921;background-color: #CECFC8;">Close</div>');
document.getElementById("dialog")&&$("#dialog").remove();$(c).insertBefore($("body").children().eq(0));var d=c.width(),f=c.height(),g=$(window).width(),e=$(window).height();c.css({left:g/2-d/2,top:e/2-f/2});c.fadeIn(300,function(){c.find(".close").bind("click",l.closeDialog)})}};a&&FB&&a.appId&&(a.disableSocialExp&&"null"!==a.disableSocialExp&&(q=parseInt(a.disableSocialExp)),a.allowedUserLevel&&"null"!==a.allowedUserLevel&&(o=a.allowedUserLevel),g=a.appId,f=a.ns,m())};var DcWidgetPager=function(a){function m(){if(1<j){l&&($(f).append(h),1===d&&$(h).addClass("disabled"));if(!g)for(var b=0;b<j;b+=1){var a=b+1,a=$('<a class="page'+(a===d?" active":"")+'" data-page-num="'+a+'" href="#page/'+a+'"><span>'+a+"</span></a>");$(f).append(a)}l&&($(f).append(n),d===j&&$(h).addClass("disabled"))}}function i(){$(f).delegate("a.page","click",e);$(h).bind("click",function(a){a.preventDefault();1<d&&(d--,$(b).trigger("pager.prev"),$(this).removeClass("disabled"),$(n).hasClass("disabled")&&
$(n).removeClass("disabled"));1===d&&$(this).addClass("disabled")});$(n).bind("click",function(a){a.preventDefault();d<j&&(d++,$(b).trigger("pager.next"),$(this).removeClass("disabled"),$(h).hasClass("disabled")&&$(h).removeClass("disabled"));d===j&&$(this).addClass("disabled")})}function e(b){b.preventDefault();b.stopPropagation();b=$(this).attr("data-page-num");$(f).find(".page").removeClass("active");$(this).addClass("active");if(a.onPageClick)a.onPageClick(b);return!1}var b=this,d=1,c=null,k=
5,j=null,l=!1,g=!1,f=$('<div class="dc-widget-pager"></div>'),h=$('<a class="control prev" title="Previous" href="#previous">Previous</a>'),n=$('<a class="control next" title="Next" href="#next">Next</a>');this.getHtml=function(){return $(f).get(0)};this.getTotalPages=function(){return j};this.getCurrentPage=function(){return d};this.getItemsPerPage=function(){return k};a&&(a.currentPage&&(d=a.currentPage),a.pageSize&&(k=parseInt(a.pageSize)),a.totalItems&&(c=parseInt(a.totalItems)),null!==c&&"number"===
typeof c&&(j=Math.ceil(c/k)),a.enablePrevNext&&(l=a.enablePrevNext),!0===a.disableNavByPage&&(g=!0),m(),i())};(function(a){var m={vertical:!1,rtl:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",
buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},i=!1;a(window).bind("load.jcarousel",function(){i=!0});a.jcarousel=function(b,d){this.options=a.extend({},m,d||{});this.autoStopped=this.locked=!1;this.buttonPrevState=this.buttonNextState=this.buttonPrev=this.buttonNext=this.list=this.clip=this.container=null;if(!d||void 0===d.rtl)this.options.rtl="rtl"==(a(b).attr("dir")||a("html").attr("dir")||"").toLowerCase();this.wh=!this.options.vertical?"width":"height";this.lt=!this.options.vertical?
this.options.rtl?"right":"left":"top";for(var c="",e=b.className.split(" "),j=0;j<e.length;j++)if(-1!=e[j].indexOf("jcarousel-skin")){a(b).removeClass(e[j]);c=e[j];break}"UL"==b.nodeName.toUpperCase()||"OL"==b.nodeName.toUpperCase()?(this.list=a(b),this.clip=this.list.parents(".jcarousel-clip"),this.container=this.list.parents(".jcarousel-container")):(this.container=a(b),this.list=this.container.find("ul,ol").eq(0),this.clip=this.container.find(".jcarousel-clip"));0===this.clip.size()&&(this.clip=
this.list.wrap("<div></div>").parent());0===this.container.size()&&(this.container=this.clip.wrap("<div></div>").parent());""!==c&&-1==this.container.parent()[0].className.indexOf("jcarousel-skin")&&this.container.wrap('<div class=" '+c+'"></div>');this.buttonPrev=a(".jcarousel-prev",this.container);0===this.buttonPrev.size()&&null!==this.options.buttonPrevHTML&&(this.buttonPrev=a(this.options.buttonPrevHTML).appendTo(this.container));this.buttonPrev.addClass(this.className("jcarousel-prev"));this.buttonNext=
a(".jcarousel-next",this.container);0===this.buttonNext.size()&&null!==this.options.buttonNextHTML&&(this.buttonNext=a(this.options.buttonNextHTML).appendTo(this.container));this.buttonNext.addClass(this.className("jcarousel-next"));this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"});this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0);this.container.addClass(this.className("jcarousel-container")).css({position:"relative"});
!this.options.vertical&&this.options.rtl&&this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl");var l=null!==this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,c=this.list.children("li"),g=this;if(0<c.size()){var f=0,h=this.options.offset;c.each(function(){g.format(this,h++);f=f+g.dimension(this,l)});this.list.css(this.wh,f+100+"px");if(!d||void 0===d.size)this.options.size=c.size()}this.container.css("display","block");this.buttonNext.css("display","block");
this.buttonPrev.css("display","block");this.funcNext=function(){g.next()};this.funcPrev=function(){g.prev()};this.funcResize=function(){g.resizeTimer&&clearTimeout(g.resizeTimer);g.resizeTimer=setTimeout(function(){g.reload()},100)};null!==this.options.initCallback&&this.options.initCallback(this,"init");!i&&a.browser.safari?(this.buttons(!1,!1),a(window).bind("load.jcarousel",function(){g.setup()})):this.setup()};var e=a.jcarousel;e.fn=e.prototype={jcarousel:"0.2.8"};e.fn.extend=e.extend=a.extend;
e.fn.extend({setup:function(){this.prevLast=this.prevFirst=this.last=this.first=null;this.animating=!1;this.tail=this.resizeTimer=this.timer=null;this.inTail=!1;if(!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var b=this.pos(this.options.start,!0);this.prevFirst=this.prevLast=null;this.animate(b,!1);a(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize);null!==this.options.setupCallback&&this.options.setupCallback(this)}},reset:function(){this.list.empty();
this.list.css(this.lt,"0px");this.list.css(this.wh,"10px");null!==this.options.initCallback&&this.options.initCallback(this,"reset");this.setup()},reload:function(){null!==this.tail&&this.inTail&&this.list.css(this.lt,e.intval(this.list.css(this.lt))+this.tail);this.tail=null;this.inTail=!1;null!==this.options.reloadCallback&&this.options.reloadCallback(this);if(null!==this.options.visible){var b=this,a=Math.ceil(this.clipping()/this.options.visible),c=0,k=0;this.list.children("li").each(function(e){c+=
b.dimension(this,a);e+1<b.first&&(k=c)});this.list.css(this.wh,c+"px");this.list.css(this.lt,-k+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0;this.buttons()},unlock:function(){this.locked=!1;this.buttons()},size:function(b){void 0!==b&&(this.options.size=b,this.locked||this.buttons());return this.options.size},has:function(b,a){if(void 0===a||!a)a=b;null!==this.options.size&&a>this.options.size&&(a=this.options.size);for(var c=b;c<=a;c++){var e=this.get(c);if(!e.length||e.hasClass("jcarousel-item-placeholder"))return!1}return!0},
get:function(b){return a(">.jcarousel-item-"+b,this.list)},add:function(b,d){var c=this.get(b),k=0,j=a(d);if(0===c.length)for(var l,g=e.intval(b),c=this.create(b);;){if(l=this.get(--g),0>=g||l.length){0>=g?this.list.prepend(c):l.after(c);break}}else k=this.dimension(c);"LI"==j.get(0).nodeName.toUpperCase()?(c.replaceWith(j),c=j):c.empty().append(d);this.format(c.removeClass(this.className("jcarousel-item-placeholder")),b);j=null!==this.options.visible?Math.ceil(this.clipping()/this.options.visible):
null;k=this.dimension(c,j)-k;0<b&&b<this.first&&this.list.css(this.lt,e.intval(this.list.css(this.lt))-k+"px");this.list.css(this.wh,e.intval(this.list.css(this.wh))+k+"px");return c},remove:function(b){var a=this.get(b);if(a.length&&!(b>=this.first&&b<=this.last)){var c=this.dimension(a);b<this.first&&this.list.css(this.lt,e.intval(this.list.css(this.lt))+c+"px");a.remove();this.list.css(this.wh,e.intval(this.list.css(this.wh))-c+"px")}},next:function(){null!==this.tail&&!this.inTail?this.scrollTail(!1):
this.scroll(("both"==this.options.wrap||"last"==this.options.wrap)&&null!==this.options.size&&this.last==this.options.size?1:this.first+this.options.scroll)},prev:function(){null!==this.tail&&this.inTail?this.scrollTail(!0):this.scroll(("both"==this.options.wrap||"first"==this.options.wrap)&&null!==this.options.size&&1==this.first?this.options.size:this.first-this.options.scroll)},scrollTail:function(b){if(!this.locked&&!this.animating&&this.tail){this.pauseAuto();var a=e.intval(this.list.css(this.lt)),
a=!b?a-this.tail:a+this.tail;this.inTail=!b;this.prevFirst=this.first;this.prevLast=this.last;this.animate(a)}},scroll:function(b,a){!this.locked&&!this.animating&&(this.pauseAuto(),this.animate(this.pos(b),a))},pos:function(b,a){var c=e.intval(this.list.css(this.lt));if(this.locked||this.animating)return c;"circular"!=this.options.wrap&&(b=1>b?1:this.options.size&&b>this.options.size?this.options.size:b);for(var k=this.first>b,j="circular"!=this.options.wrap&&1>=this.first?1:this.first,l=k?this.get(j):
this.get(this.last),g=k?j:j-1,f=null,h=0,i=!1,m=0;k?--g>=b:++g<b;){f=this.get(g);i=!f.length;if(0===f.length&&(f=this.create(g).addClass(this.className("jcarousel-item-placeholder")),l[k?"before":"after"](f),null!==this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(0>=g||g>this.options.size)))l=this.get(this.index(g)),l.length&&(f=this.add(g,l.clone(!0)));l=f;m=this.dimension(f);i&&(h+=m);if(null!==this.first&&("circular"==this.options.wrap||1<=g&&(null===this.options.size||g<=
this.options.size)))c=k?c+m:c-m}for(var j=this.clipping(),s=[],q=0,o=0,l=this.get(b-1),g=b;++q;){f=this.get(g);i=!f.length;if(0===f.length){f=this.create(g).addClass(this.className("jcarousel-item-placeholder"));if(0===l.length)this.list.prepend(f);else l[k?"before":"after"](f);if(null!==this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(0>=g||g>this.options.size))l=this.get(this.index(g)),l.length&&(f=this.add(g,l.clone(!0)))}l=f;m=this.dimension(f);if(0===m)throw Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...");
"circular"!=this.options.wrap&&null!==this.options.size&&g>this.options.size?s.push(f):i&&(h+=m);o+=m;if(o>=j)break;g++}for(f=0;f<s.length;f++)s[f].remove();0<h&&(this.list.css(this.wh,this.dimension(this.list)+h+"px"),k&&(c-=h,this.list.css(this.lt,e.intval(this.list.css(this.lt))-h+"px")));h=b+q-1;"circular"!=this.options.wrap&&this.options.size&&h>this.options.size&&(h=this.options.size);if(g>h){q=0;g=h;for(o=0;++q;){f=this.get(g--);if(!f.length)break;o+=this.dimension(f);if(o>=j)break}}g=h-q+
1;"circular"!=this.options.wrap&&1>g&&(g=1);this.inTail&&k&&(c+=this.tail,this.inTail=!1);this.tail=null;"circular"!=this.options.wrap&&h==this.options.size&&1<=h-q+1&&(k=e.intval(this.get(h).css(!this.options.vertical?"marginRight":"marginBottom")),o-k>j&&(this.tail=o-j-k));a&&b===this.options.size&&this.tail&&(c-=this.tail,this.inTail=!0);for(;b-- >g;)c+=this.dimension(this.get(b));this.prevFirst=this.first;this.prevLast=this.last;this.first=g;this.last=h;return c},animate:function(b,d){if(!this.locked&&
!this.animating){this.animating=!0;var c=this,e=function(){c.animating=!1;0===b&&c.list.css(c.lt,0);!c.autoStopped&&("circular"==c.options.wrap||"both"==c.options.wrap||"last"==c.options.wrap||null===c.options.size||c.last<c.options.size||c.last==c.options.size&&null!==c.tail&&!c.inTail)&&c.startAuto();c.buttons();c.notify("onAfterAnimation");if("circular"==c.options.wrap&&null!==c.options.size)for(var a=c.prevFirst;a<=c.prevLast;a++)null!==a&&!(a>=c.first&&a<=c.last)&&(1>a||a>c.options.size)&&c.remove(a)};
this.notify("onBeforeAnimation");if(!this.options.animation||!1===d)this.list.css(this.lt,b+"px"),e();else{var j=!this.options.vertical?this.options.rtl?{right:b}:{left:b}:{top:b},e={duration:this.options.animation,easing:this.options.easing,complete:e};a.isFunction(this.options.animationStepCallback)&&(e.step=this.options.animationStepCallback);this.list.animate(j,e)}}},startAuto:function(b){void 0!==b&&(this.options.auto=b);if(0===this.options.auto)return this.stopAuto();if(null===this.timer){this.autoStopped=
!1;var a=this;this.timer=window.setTimeout(function(){a.next()},1E3*this.options.auto)}},stopAuto:function(){this.pauseAuto();this.autoStopped=!0},pauseAuto:function(){null!==this.timer&&(window.clearTimeout(this.timer),this.timer=null)},buttons:function(b,a){if(null==b&&(b=!this.locked&&0!==this.options.size&&(this.options.wrap&&"first"!=this.options.wrap||null===this.options.size||this.last<this.options.size),!this.locked&&(!this.options.wrap||"first"==this.options.wrap)&&null!==this.options.size&&
this.last>=this.options.size))b=null!==this.tail&&!this.inTail;if(null==a&&(a=!this.locked&&0!==this.options.size&&(this.options.wrap&&"last"!=this.options.wrap||1<this.first),!this.locked&&(!this.options.wrap||"last"==this.options.wrap)&&null!==this.options.size&&1==this.first))a=null!==this.tail&&this.inTail;var c=this;0<this.buttonNext.size()?(this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext),b&&this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext),
this.buttonNext[b?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",b?!1:!0),null!==this.options.buttonNextCallback&&this.buttonNext.data("jcarouselstate")!=b&&this.buttonNext.each(function(){c.options.buttonNextCallback(c,this,b)}).data("jcarouselstate",b)):null!==this.options.buttonNextCallback&&this.buttonNextState!=b&&this.options.buttonNextCallback(c,null,b);0<this.buttonPrev.size()?(this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),
a&&this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),this.buttonPrev[a?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",a?!1:!0),null!==this.options.buttonPrevCallback&&this.buttonPrev.data("jcarouselstate")!=a&&this.buttonPrev.each(function(){c.options.buttonPrevCallback(c,this,a)}).data("jcarouselstate",a)):null!==this.options.buttonPrevCallback&&this.buttonPrevState!=a&&this.options.buttonPrevCallback(c,null,a);this.buttonNextState=
b;this.buttonPrevState=a},notify:function(b){var a=null===this.prevFirst?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",b,a);this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",b,a,this.first),this.callback("itemFirstOutCallback",b,a,this.prevFirst));this.prevLast!==this.last&&(this.callback("itemLastInCallback",b,a,this.last),this.callback("itemLastOutCallback",b,a,this.prevLast));this.callback("itemVisibleInCallback",b,a,this.first,this.last,this.prevFirst,
this.prevLast);this.callback("itemVisibleOutCallback",b,a,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(b,d,c,e,j,l,g){if(!(null==this.options[b]||"object"!=typeof this.options[b]&&"onAfterAnimation"!=d)){var f="object"==typeof this.options[b]?this.options[b][d]:this.options[b];if(a.isFunction(f)){var h=this;if(void 0===e)f(h,c,d);else if(void 0===j)this.get(e).each(function(){f(h,this,e,c,d)});else for(var b=function(a){h.get(a).each(function(){f(h,this,a,c,d)})},i=e;i<=j;i++)null!==
i&&!(i>=l&&i<=g)&&b(i)}}},create:function(a){return this.format("<li></li>",a)},format:function(b,d){for(var b=a(b),c=b.get(0).className.split(" "),e=0;e<c.length;e++)-1!=c[e].indexOf("jcarousel-")&&b.removeClass(c[e]);b.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+d)).css({"float":this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",d);return b},className:function(a){return a+" "+a+(!this.options.vertical?"-horizontal":"-vertical")},
dimension:function(b,d){var c=a(b);if(null==d)return!this.options.vertical?c.outerWidth(!0)||e.intval(this.options.itemFallbackDimension):c.outerHeight(!0)||e.intval(this.options.itemFallbackDimension);var k=!this.options.vertical?d-e.intval(c.css("marginLeft"))-e.intval(c.css("marginRight")):d-e.intval(c.css("marginTop"))-e.intval(c.css("marginBottom"));a(c).css(this.wh,k+"px");return this.dimension(c)},clipping:function(){return!this.options.vertical?this.clip[0].offsetWidth-e.intval(this.clip.css("borderLeftWidth"))-
e.intval(this.clip.css("borderRightWidth")):this.clip[0].offsetHeight-e.intval(this.clip.css("borderTopWidth"))-e.intval(this.clip.css("borderBottomWidth"))},index:function(a,d){null==d&&(d=this.options.size);return Math.round(((a-1)/d-Math.floor((a-1)/d))*d)+1}});e.extend({defaults:function(b){return a.extend(m,b||{})},intval:function(a){a=parseInt(a,10);return isNaN(a)?0:a},windowLoaded:function(){i=!0}});a.fn.jcarousel=function(b){if("string"==typeof b){var d=a(this).data("jcarousel"),c=Array.prototype.slice.call(arguments,
1);return d[b].apply(d,c)}return this.each(function(){var c=a(this).data("jcarousel");c?(b&&a.extend(c.options,b),c.reload()):a(this).data("jcarousel",new e(this,b))})}})(jQuery);
