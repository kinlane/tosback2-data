if(window.BrightTag==undefined){window.BrightTag={};BrightTag.module=function(a,g){for(var d=BrightTag,h=a.split("."),k=h.pop(),f=undefined,i=0,b=h.length;i<b;i++){f=h[i];d[f]||(d[f]={});d=d[f]}return d[k]||(d[k]=g)};BrightTag.each=function(a,g){if(a)if(BrightTag.Types.isArray(a)||a.length)for(var d=0,h=a.length;d<h;d++)g(a[d],d);else if(BrightTag.Types.isObject(a))for(d in a)a.hasOwnProperty(d)&&g(d,a[d])};BrightTag.pushIfDefined=function(a,g,d){if(a&&a.constructor==Array&&g!=null)a.push(d||g)};
BrightTag.extend=function(a,g){for(var d in g)if(g.hasOwnProperty(d))a[d]=g[d];return a};BrightTag.trim=function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};BrightTag.eval=function(a,g){try{return eval.call(undefined,a)}catch(d){g&&g(d)}};BrightTag.Types={isString:function(a){return Object.prototype.toString.call(a)==="[object String]"},isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"},isNumber:function(a){return Object.prototype.toString.call(a)==="[object Number]"},
isFunction:function(a){return Object.prototype.toString.call(a)==="[object Function]"},isObject:function(a){if(a===null||a===undefined)return false;return Object.prototype.toString.call(a)==="[object Object]"}};BrightTag.Escaper={cookie:function(a){if(!BrightTag.Types.isString(a))return a;return a.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&/g,"%26").replace(/'/g,"%27").replace(/;/g,"%3B").replace(/</g,"%3C").replace(/>/g,"%3E")},javascript:function(a){if(!BrightTag.Types.isString(a))return a;
return a.replace(/\\/g,"\\\\").replace(/'/g,"\\x27").replace(/"/g,"\\x22").replace(/\n/g,"\\n").replace(/\r/g,"\\r")}};BrightTag.Random={integer:function(a){return Math.floor(Math.random()*(a||1E8))}};BrightTag.defaultConfig=function(){return{loadOnly:false,window:window,document:document,host:"s.thebrighttag.com",parentReferrer:top!=self?self.window.location.href:null,docReferrer:document.referrer,data:{},errorManager:new BrightTag.ErrorManager(new BrightTag.HTTP.Cookie(document))}}}
BrightTag.module("Blab",{});
BrightTag.module("Blab.Engine",function(a){function g(){l=true;s=p.length;b("engine:off")}function d(){l=false;t=0;(p[s++]||g)()}function h(n){return function(){var u=false,m=a.createElement("script");m.onload=m.onreadystatechange=function(){var r;if(!(r=u)){a:{switch(m.readyState){case undefined:case "loaded":case "complete":r=true;break a}r=false}r=!r}if(!r){u=true;b("block:finish");d()}};m.src=n;b("block:start",n);var o=a.getElementsByTagName("script")[0];o.parentNode.insertBefore(m,o)}}function k(n){return function(){try{b("block:start",
n);if(n.constructor==String)if(a.defaultView)a.defaultView.eval.call(undefined,n);else a.parentWindow?a.parentWindow.execScript(n):b("block:error",{type:"wait",exception:"Could not evaluate wait block ["+n+"]"});else n()}catch(u){b("block:error",{type:"wait",exception:u})}finally{b("block:finish");d()}}}function f(n){p.push(n);l&&d();return c}function i(n){p.splice(s+t++,0,n);return c}function b(n){var u=Array.prototype.slice.call(arguments,1);BrightTag.each(j,function(m){var o=[c].concat(u);(m[n]||
e).apply(null,o)})}var c=this,e=function(){},j=[],l=false,q={},p=[],s=0,t=0;c.run=function(){b("engine:on");d()};c.options=function(n){BrightTag.extend(q,n);return c};c.option=function(n){return q[n]};c.script=function(n){return f(h(n))};c.wait=function(n){return f(k(n))};c.preemptScript=function(n){return i(h(n))};c.preemptWait=function(n){return i(k(n))};c.listen=function(n){j.push(n);(n["engine:listen"]||e).apply(null,[c]);return c}});
BrightTag.module("Blab.Group",function(){function a(b){k.push(b)}function g(b){b.run()}function d(){var b=k[f++];b?b.listen(i).run():h.doNotQueue()}var h=this,k=[],f=0,i={"engine:off":function(){d()}};h.doNotQueue=function(){a=g};h.push=function(b){a(b);return b};h.run=function(){d()};h.applyListener=function(b){for(var c=f,e=k.length;c<e;c++)k[c].listen(b)}});
BrightTag.module("Blab.Manager",function(a){function g(i){var b=new h.Engine(a);d.each(f,function(c){b.listen(c)});return(k[i]||(k[i]=new h.Group)).push(b)}var d=BrightTag,h=d.Blab,k={undefined:new h.Group},f=[];k[undefined].doNotQueue();this.addGlobalListener=function(i){f.push(i);d.each(k,function(b){k[b].applyListener(i)})};this.group=function(i){return g(i)};this.listen=function(){return g().listen.apply(null,arguments)};this.script=function(){return g().script.apply(null,arguments)};this.wait=
function(){return g().wait.apply(null,arguments)};this.run=function(i){(k[i]||(k[i]=new h.Group)).run()};this.setOptions=function(){return g()}});
BrightTag.module("Blab.SwapwriteListener",function(){var a,g=[],d=function(h){a.push(h)};return function(h){function k(c){c.src&&i.preemptScript(c.src);c.innerHTML&&i.preemptWait(c.innerHTML)}function f(c){try{h.body.appendChild(c.cloneNode(true))}catch(e){bt_handle_exception("BrightTag: error appending content to body: "+e)}}var i,b=h.createElement("div");this["block:start"]=function(){var c=h;g.push([a,c.write,c.writeln]);a=[];c.write=c.writeln=d};this["block:finish"]=function(){try{if(a.length!=
0){b.innerHTML="<br/>"+a.join("");for(var c=b.childNodes||[],e=1,j=c.length;e<j;e++)(c[e].tagName=="SCRIPT"?k:f)(c[e])}}finally{c=h;e=g.pop();a=e[0];c.write=e[1];c.writeln=e[2]}};this["engine:listen"]=function(c){i=c}}}());BrightTag.module("Blab.GlobalSwapwriteListener",function(a){var g=BrightTag.Blab;this["engine:listen"]=function(d){d.listen(new g.SwapwriteListener(a))}});
BrightTag.module("EventsManager",function(){function a(){}function g(b,c,e){i(b,c,function(){if(!e||e())BrightTag.EventListenerOverride(b,c)})}function d(b){b=b.documentElement.doScroll||function(){throw"No doScroll";};try{b("left")}catch(c){return false}return true}function h(b){var c=b.readyState;return c=="loading"?false:c=="complete"?true:b.addEventListener?c=="interactive":d(b)}function k(b,c,e){var j=this;setTimeout(function(){b()?c.call(j):k(b,c,e)},e)}var f=this,i=f.listen=function(b,c,e){if(b.addEventListener)b.addEventListener(c,
e,false);else b.attachEvent&&b.attachEvent("on"+c,e)};f.domReady=function(b,c){if(h(b))c.call(this);else b.addEventListener?i(b,"DOMContentLoaded",c):k(function(){return h(b)},c,1)};f.enablePageReadyOverrides=function(b,c){f.enablePageReadyOverrides=a;c.readyState=="complete"?BrightTag.EventListenerOverride(b,"load"):g(b,"load");if(c.addEventListener){var e=c.readyState;e=="complete"||e=="interactive"?BrightTag.EventListenerOverride(c,"DOMContentLoaded"):g(c,"DOMContentLoaded")}}});
BrightTag.module("EventListenerOverride",function(a,g){function d(f){var i=this;setTimeout(function(){try{f.call(i)}catch(b){bt_handle_exception("BrightTag error overriding "+g+" event: "+b)}},0)}var h=a.addEventListener?"addEventListener":"attachEvent",k=a[h];a[h]=function(f,i,b){if(typeof i=="function")if(f==g||f=="on"+g)d(i);else try{h=="addEventListener"?k.call(a,f,i,b):k(f,i)}catch(c){bt_handle_exception("BrightTag error proxying "+f+" event: "+c)}}});BrightTag.module("Events",new BrightTag.EventsManager);
BrightTag.module("EventBindingManager",function(a){var g={},d=[],h=BrightTag.jQueryLoader(a,"BrightTag.jQuery");g.Binder=function(i){var b=this,c=[];b.data=function(e,j){c.push({name:e,dbe:j});return b};b.bindData=function(e,j,l){BrightTag.each(c,function(q){try{BrightTag.instance.data(q.name,h.functionWithAccess(["eventObject","eventData"],"return "+q.dbe+";").call(e,j,l))}catch(p){bt_log("Error binding "+q+": "+p)}})};b.handler=function(e){var j=d[i];if(j){var l=Array.prototype.slice.call(arguments,
1);b.bindData(e.target,e,l);j.handler(e,l)}}};var k=function(){var i=this,b=[],c=[];i.execute=function(j){if(j.constructor==Function)b.push(j);else if(j.constructor==String)try{b.push(h.functionWithAccess(["eventObject","eventData"],j))}catch(l){bt_handle_exception("BrightTag could not execute action: "+l)}else bt_log("execute: bad action = "+j);return i};i.fire=function(j){j=new e(j);c.push(j);return j};i.handler=function(j,l){g.executeActions(b,j,l);g.fireTags(c)};var e=function(j){var l=this,q=
[];l.appendData=function(p){q.push(function(s){s.appendData(p)});return l};l.appendJs=function(p){q.push(function(s){s.appendJs(p)});return l};l.postProcess=function(p){BrightTag.each(q,function(s){s(p)})};l.tagId=j;l.execute=i.execute;l.fire=i.fire}},f=/^direct\//i;g.bind=function(i,b,c){var e=new g.Binder(i);h.ensureJQuery(function(){var j=h.getJQuery()(b);j.live&&b.constructor===String&&!f.test(c)?j.live(c,e.handler):j.bind(c.split(f).pop(),e.handler)});return e};g.when=function(i){return d[i]||
(d[i]=new k)};g.executeActions=function(i,b,c){BrightTag.each(i,function(e){try{e.call(b.target,b,c)}catch(j){bt_handle_exception(j)}})};g.fireTags=function(i){if(i.length>0){var b=BrightTag.instance.serverURL();BrightTag.each(i,function(c){b.cf(c.tagId);c.postProcess(b)});BrightTag.Blab.script(b.asString())}};return g});BrightTag.module("HTTP",{});
BrightTag.module("HTTP").Cookie=function(a){var g=this,d={};g.get=function(h){return d[h]};g.remove=function(h){g.set(h,"",{expires:0})};g.set=function(h,k,f){if(h){f=f||{};h=[h+"="+BrightTag.Escaper.cookie(k||"")];if((k=f.expires)||k===0){if(BrightTag.Types.isNumber(k))k=(new Date(k)).toGMTString();h.push("expires="+k)}(k=f.path)&&h.push("path="+k);(k=f.domain)&&h.push("domain="+k);f.secure===true&&h.push("Secure");f.httponly===true&&h.push("HttpOnly");a.cookie=h.join("; ")}};(function(h){var k,
f;h=h.split(/; ?/);for(var i=0,b=h.length;i<b;i++){f=h[i];k=f.indexOf("=");var c=d,e=f.slice(0,k);k=f.slice(k+1);k=unescape(k);c[e]=k}})(a.cookie)};
BrightTag.module("HTTP").QueryString=function(a){function g(f){if(f&&typeof f=="string"){var i=f.split("&");f={};h.each(i,function(b){b=b.split("=");b={key:decodeURIComponent(b[0]),value:b[1]&&decodeURIComponent(b[1].replace(/\+/g," "))};f[b.key]=b.value})}return f}var d=this,h=BrightTag,k={};h.extend(k,g(a));d.param=function(f){return k[f]||""};d.params=function(){return k};d.appendParam=function(f,i){if(f&&i!=undefined&&i!=="")k[f]=i;return this};d.appendParams=function(f){h.each(f,d.appendParam);
return this};d.alwaysAppendParam=function(f,i){if(f)k[f]=i!=undefined?i:"";return this};d.alwaysAppendParams=function(f){h.each(f,d.alwaysAppendParam);return this};d.appendPartialQueryString=function(f){f&&d.alwaysAppendParams(g(f));return this};d.deleteParam=function(f){delete k[f]};d.toString=function(){var f=[];for(var i in k){var b={key:encodeURIComponent(i),value:encodeURIComponent(k[i])};f.push(b.key+"="+b.value)}return f.join("&")}};
BrightTag.module("HTTP").URL=function(a){var g=this,d,h,k,f=a.indexOf("#");if(f>-1){k=a.substring(f+1);a=a.substring(0,f)}f=a.indexOf("?");if(f>-1){h=a.substring(f+1);a=a.substring(0,f)}d=a;a=new BrightTag.HTTP.QueryString(h);BrightTag.extend(g,a);g.queryString=a.toString;g.toString=function(){var i=g.queryString();return d+(i.length>0?"?"+i:"")};g.asString=g.toString;g.fragment=function(){return k}};
BrightTag.module("ServerURL",function(a){function g(e,j){return function(l){bt_handle_exception("Invalid "+e+" expression: "+j+", exception = "+l)}}var d=this,h=a.host,k=BrightTag,f=a.window,i=a.parentReferrer,b=a.referrer,c="";if(h.length>0)c=(h.match("^[a-z0-9+.-]+://.+")?"":"//")+h+"/tag";k.HTTP.URL.call(this,c);d.appendParams({site:a.site,referrer:b,docReferrer:a.docReferrer,mode:a.mode});b!==i&&d.appendParam("parentReferrer",i);d.appendData=function(e){var j=bt_data(e),l;a:switch(Object.prototype.toString.apply(j)){case "[object Array]":case "[object Object]":l=
true;break a;default:l=false;break a}j=l?f.JSON.stringify(j):j;return d.alwaysAppendParam("_cb_"+("bt_data('"+e+"')"),j)};d.appendJs=function(e){var j=g("inline JavaScript",e);return d.alwaysAppendParam("_cb_"+e,k.eval(e,j))};d.cf=function(e){if(e.constructor!=Array)e=[e];var j=d.param("cf");if(j)e=Array(j).concat(e);d.appendParam("cf",e.join());return d};d.addCf=function(e,j){if(!k.eval(j,g("conditional fire",j)))return false;var l=d.param("cf");d.appendParam("cf",l?l+","+e:e);return true}});
BrightTag.module("Page",function(a,g){function d(m){e.each(e.Types.isArray(m)?m:[m],function(o){e.Types.isFunction(o)?o():p.write('<script type="text/javascript" src="'+o+'"><\/script>')})}function h(m){var o=t.group();e.each(e.Types.isArray(m)?m:[m],function(r){(e.Types.isFunction(r)?o.wait:o.script)(r)})}function k(m){p.write(m)}function f(m,o){var r={};if(o&&o.tagId)r.tagId=o.tagId;t.group(!u?"domready":undefined).options(r).wait(function(){p.write(m)})}function i(m){c.writeScript=m?d:h;c.appendContent=
m?k:f}function b(m){var o={site:a.site,referrer:a.referrer||p.location.href};if(n.hasErrors()){m.appendParam("errors",n.toJSON());if(m.toString().length>2083){m.deleteParam("errors");n.reset(o);n.push({type:"runtime",message:"Too many errors"});m.appendParam("errors",n.toJSON())}}n.reset(o)}var c=this,e=BrightTag,j=undefined,l=a.data||{},q=undefined,p=a.document,s=a.window,t=a.blab||e.Blab,n=a.errorManager,u=false;c.referrer=a.referrer;c.parentReferrer=a.parentReferrer;c.docReferrer=a.docReferrer;
n&&t.addGlobalListener(n);i(a.mode==="sync");c.domReady=function(){u=true;t.addGlobalListener(new t.GlobalSwapwriteListener(p));a.mode==="sync"&&i(false);t.run("domready")};c.parameter=function(m){if(j==undefined)j=new e.HTTP.URL(p.location.href);return j.param(m)};c.meta=function(m){if(!q){q={};e.each(p.getElementsByTagName("meta"),function(o){q[o.getAttribute("name")]=o.getAttribute("content")})}return q[m]||""};c.data=function(m,o){if(o!==undefined)return l[m]=o;o=l[m];return o==undefined?"":o};
c.dbe=function(m,o,r){c.data(m,e.eval(o,function(v){if(n){var w=r||{};n.push({type:"dbe",message:v.toString(),"dbe.name":m,pageId:w.pageId||-1})}}))};c.errors=function(m){n.configure(m)};c.serverURL=function(){return new e.ServerURL(a)};c.defaultBaseUri=function(){return(p.location.protocol=="https:"?"https:":"http:")+"//s.btstatic.com/"};c.baseUri=function(){var m=/\btag(\.[^.]+|-n)?\.js(#.*)?$/;return g&&g.src&&g.src.replace(m,"")||c.defaultBaseUri()};c.primary=function(){function m(){var o=c.serverURL();
if(n){n.processStoredErrors();b(o)}c.writeScript(o.toString())}s.JSON?m():c.writeScript([c.baseUri()+"json2.js",m])};c.secondary=function(m){var o=c.serverURL(),r=o.toString();m(o);m=o.toString();if(m!=r){if(n){b(o);m=o.toString()}c.writeScript(m)}}});
BrightTag.module("ErrorManager",function(a){function g(j){var l=i.isObject(j)?f.extend({},j):{};l.type=l.type||"unknown";l.message=l.message||j.toString();l.timestamp=e;return l}if(!a)throw"ErrorManager requires a store";var d=this,h,k,f=BrightTag,i=f.Types,b=true,c=[],e=+new Date;d.configure=function(j){if(j.hasOwnProperty("enabled"))b=j.enabled;if(j.hasOwnProperty("timestamp"))e=j.timestamp};d.hasErrors=function(){return c.length>0};d.toArray=function(){return c};d.toJSON=function(){try{return JSON.stringify({site:h,
referrer:k,errors:c})}catch(j){bt_log("BrightTag: problem serializing errors: "+j.message)}};d.reset=function(j){h=j.site;k=j.referrer;c=[];a.remove("__bterr")};d.push=function(j){bt_log("BrightTag: error: "+JSON.stringify(j));if(b&&j){c.push(g(j));a.set("__bterr",d.toJSON())}};d["block:error"]=function(j,l){if(l){var q=l.type,p=l.exception||l,s=j.option("tagId")||-1;d.push({type:q,message:p.toString(),tagId:s})}};d.processStoredErrors=function(){var j=a.get("__bterr");if(j)try{var l=JSON.parse(j);
h=l.site;k=l.referrer;if(i.isArray(l.errors))c=c.concat(l.errors)}catch(q){bt_log("BrightTag: problem reading stored errors: "+q.message)}}});
BrightTag.module("CookieSyncEngine",function(a){var g={fn:function(b){b()},next:null},d=g,h=a.document,k=function(b){if(typeof b!="function")return false;b={fn:b,next:null};d=d.next=b;return true},f=function(){if(g){var b=g.fn;g=g.next;b(f)}},i=f;BrightTag.Events.listen(a,"load",i);return{sync:i,push:function(b){return k(b)},pushImage:function(b){return k(function(c){var e=new a.Image;e.onerror=e.onload=c;e.src=b})},pushIframe:function(b){return k(function(c){var e=h.createElement("iframe");e.onerror=
e.onload=c;e.width=0;e.height=0;e.style.border=0;e.src=b;h.body.appendChild(e)})}}});function bt_parameter(a){return BrightTag.instance.parameter(a)}function bt_meta(a){return BrightTag.instance.meta(a)}function bt_data(a,g){return BrightTag.instance.data(a,g)}function bt_data_escaped(a,g){return bt_data(a,g)}function bt_log(a){window.console&&console.log&&console.log(a)}var bt_handle_exception=bt_log,_bt_url_prefix,_bt_referrer,_bt_site,_bt_mode;
function btServe(a){if(BrightTag.instance==undefined){var g=BrightTag,d=g.extend({referrer:_bt_referrer,site:_bt_site,mode:_bt_mode},g.defaultConfig());if(_bt_url_prefix!=undefined)d.host=_bt_url_prefix;g.instance=g.Main(g.extend(d,a||{}))}}
BrightTag.module("jQueryLoader",function(a,g){return new (function(d,h){function k(j){e.wait(j)}function f(j){function l(){b=BrightTag.jQuery;k(j)}c="var $ = BrightTag.$; ";BrightTag.jQuery?l():e.script(BrightTag.instance.baseUri()+"BrightTag.jquery-1.5.1.js").wait(l)}var i={},b=d.jQuery,c="",e=BrightTag.Blab.group(h);i.getJQuery=function(){return b};i.functionWithAccess=function(j,l){return new Function(j,c+l)};i.ensureJQuery=function(j){i.ensureJQuery=k;(b?k:f)(j);BrightTag.Blab.run(h)};return i})(a,
g)});
BrightTag.module("Main",function(a){function g(b){(b=(new h.HTTP.URL(b.src)).fragment())&&h.extend(a,(new h.HTTP.QueryString(b)).params())}function d(b){b=h.trim(b.innerHTML);b.length!=0&&h.extend(a,h.eval("(\n"+b+"\n)",function(c){bt_handle_exception("BrightTag configuration error: "+c)}))}var h=BrightTag,k=function(){for(var b=/\/tag(\.[^.]+|-n)?\.js(#.*)?$/,c=a.document.getElementsByTagName("script"),e=c.length-1;e>-1;e--){var j=c[e];if(b.test(j.src))return j}}();if(k){g(k);d(k)}if(a.site!=undefined){h.Events.enablePageReadyOverrides(a.window,
a.document);try{var f=new h.Page(a,k);h.Events.domReady(a.document,function(){f.domReady()});a.loadOnly||f.primary();return f}catch(i){bt_handle_exception("BrightTag execution error: "+i)}}});(function(a){if(a.instance==undefined){a.extend(a.Blab,new a.Blab.Manager(document));a.$LAB=a.Blab;a.EventBinding=a.EventBindingManager(window);a.CookieSync=a.CookieSyncEngine(window);a.instance=a.Main(a.defaultConfig())}else bt_log("Tried to load tag.js again")})(window.BrightTag);
