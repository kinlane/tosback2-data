var dust={};function getGlobal(){return(function(){return this.dust}).call(null)}(function(dust){dust.cache={};dust.register=function(name,tmpl){if(!name){return}dust.cache[name]=tmpl};dust.render=function(name,context,callback){var chunk=new Stub(callback).head;dust.load(name,chunk,Context.wrap(context)).end()};dust.stream=function(name,context){var stream=new Stream();dust.nextTick(function(){dust.load(name,stream.head,Context.wrap(context)).end()});return stream};dust.renderSource=function(source,context,callback){return dust.compileFn(source)(context,callback)};dust.compileFn=function(source,name){var tmpl=dust.loadSource(dust.compile(source,name));return function(context,callback){var master=callback?new Stub(callback):new Stream();dust.nextTick(function(){tmpl(master.head,Context.wrap(context)).end()});return master}};dust.load=function(name,chunk,context){var tmpl=dust.cache[name];if(tmpl){return tmpl(chunk,context)}else{if(dust.onLoad){return chunk.map(function(chunk){dust.onLoad(name,function(err,src){if(err){return chunk.setError(err)}if(!dust.cache[name]){dust.loadSource(dust.compile(src,name))}dust.cache[name](chunk,context).end()})})}return chunk.setError(new Error("Template Not Found: "+name))}};dust.loadSource=function(source,path){return eval(source)};if(Array.isArray){dust.isArray=Array.isArray}else{dust.isArray=function(arr){return Object.prototype.toString.call(arr)=="[object Array]"}}dust.nextTick=(function(){if(typeof process!=="undefined"){return process.nextTick}else{return function(callback){setTimeout(callback,0)}}})();dust.isEmpty=function(value){if(dust.isArray(value)&&!value.length){return true}if(value===0){return false}return(!value)};dust.filter=function(string,auto,filters){if(filters){for(var i=0,len=filters.length;i<len;i++){var name=filters[i];if(name==="s"){auto=null}else{if(typeof dust.filters[name]==="function"){string=dust.filters[name](string)}}}}if(auto){string=dust.filters[auto](string)}return string};dust.filters={h:function(value){return dust.escapeHtml(value)},j:function(value){return dust.escapeJs(value)},u:encodeURI,uc:encodeURIComponent,js:function(value){if(!JSON){return value}return JSON.stringify(value)},jp:function(value){if(!JSON){return value}return JSON.parse(value)}};function Context(stack,global,blocks){this.stack=stack;this.global=global;this.blocks=blocks}dust.makeBase=function(global){return new Context(new Stack(),global)};Context.wrap=function(context){if(context instanceof Context){return context}return new Context(new Stack(context))};Context.prototype.get=function(key){var ctx=this.stack,value;while(ctx){if(ctx.isObject){value=ctx.head[key];if(!(value===undefined)){return value}}ctx=ctx.tail}return this.global?this.global[key]:undefined};Context.prototype.getPath=function(cur,down){var ctx=this.stack,len=down.length;if(cur&&len===0){return ctx.head}ctx=ctx.head;var i=0;while(ctx&&i<len){ctx=ctx[down[i]];i++}return ctx};Context.prototype.push=function(head,idx,len){return new Context(new Stack(head,this.stack,idx,len),this.global,this.blocks)};Context.prototype.rebase=function(head){return new Context(new Stack(head),this.global,this.blocks)};Context.prototype.current=function(){return this.stack.head};Context.prototype.getBlock=function(key,chk,ctx){if(typeof key==="function"){key=key(chk,ctx).data;chk.data=""}var blocks=this.blocks;if(!blocks){return}var len=blocks.length,fn;while(len--){fn=blocks[len][key];if(fn){return fn}}};Context.prototype.shiftBlocks=function(locals){var blocks=this.blocks,newBlocks;if(locals){if(!blocks){newBlocks=[locals]}else{newBlocks=blocks.concat([locals])}return new Context(this.stack,this.global,newBlocks)}return this};function Stack(head,tail,idx,len){this.tail=tail;this.isObject=!dust.isArray(head)&&head&&typeof head==="object";this.head=head;this.index=idx;this.of=len}function Stub(callback){this.head=new Chunk(this);this.callback=callback;this.out=""}Stub.prototype.flush=function(){var chunk=this.head;while(chunk){if(chunk.flushable){this.out+=chunk.data}else{if(chunk.error){this.callback(chunk.error);this.flush=function(){};return}else{return}}chunk=chunk.next;this.head=chunk}this.callback(null,this.out)};function Stream(){this.head=new Chunk(this)}Stream.prototype.flush=function(){var chunk=this.head;while(chunk){if(chunk.flushable){this.emit("data",chunk.data)}else{if(chunk.error){this.emit("error",chunk.error);this.flush=function(){};return}else{return}}chunk=chunk.next;this.head=chunk}this.emit("end")};Stream.prototype.emit=function(type,data){if(!this.events){return false}var handler=this.events[type];if(!handler){return false}if(typeof handler=="function"){handler(data)}else{var listeners=handler.slice(0);for(var i=0,l=listeners.length;i<l;i++){listeners[i](data)}}};Stream.prototype.on=function(type,callback){if(!this.events){this.events={}}if(!this.events[type]){this.events[type]=callback}else{if(typeof this.events[type]==="function"){this.events[type]=[this.events[type],callback]}else{this.events[type].push(callback)}}return this};Stream.prototype.pipe=function(stream){this.on("data",function(data){stream.write(data,"utf8")}).on("end",function(){stream.end()}).on("error",function(err){stream.error(err)});return this};function Chunk(root,next,taps){this.root=root;this.next=next;this.data="";this.flushable=false;this.taps=taps}Chunk.prototype.write=function(data){var taps=this.taps;if(taps){data=taps.go(data)}this.data+=data;return this};Chunk.prototype.end=function(data){if(data){this.write(data)}this.flushable=true;this.root.flush();return this};Chunk.prototype.map=function(callback){var cursor=new Chunk(this.root,this.next,this.taps),branch=new Chunk(this.root,cursor,this.taps);this.next=branch;this.flushable=true;callback(branch);return cursor};Chunk.prototype.tap=function(tap){var taps=this.taps;if(taps){this.taps=taps.push(tap)}else{this.taps=new Tap(tap)}return this};Chunk.prototype.untap=function(){this.taps=this.taps.tail;return this};Chunk.prototype.render=function(body,context){return body(this,context)};Chunk.prototype.reference=function(elem,context,auto,filters){if(typeof elem==="function"){elem.isFunction=true;elem=elem.apply(context.current(),[this,context,null,{auto:auto,filters:filters}]);if(elem instanceof Chunk){return elem}}if(!dust.isEmpty(elem)){return this.write(dust.filter(elem,auto,filters))}else{return this}};Chunk.prototype.section=function(elem,context,bodies,params){if(typeof elem==="function"){elem=elem.apply(context.current(),[this,context,bodies,params]);if(elem instanceof Chunk){return elem}}var body=bodies.block,skip=bodies["else"];if(params){context=context.push(params)}if(dust.isArray(elem)){if(body){var len=elem.length,chunk=this;if(len>0){if(context.stack.head){context.stack.head["$len"]=len}for(var i=0;i<len;i++){if(context.stack.head){context.stack.head["$idx"]=i}chunk=body(chunk,context.push(elem[i],i,len))}if(context.stack.head){context.stack.head["$idx"]=undefined;context.stack.head["$len"]=undefined}return chunk}else{if(skip){return skip(this,context)}}}}else{if(elem&&typeof elem=="object"){if(body){if(context.stack.head){context.stack.head["$idx"]=0;context.stack.head["$len"]=1}chunk=body(this,context.push(elem));if(context.stack.head){context.stack.head["$idx"]=undefined;context.stack.head["$len"]=undefined}return chunk}}else{if(elem===true||elem===0){if(body){return body(this,context)}}else{if(skip){return skip(this,context)}}}}return this};Chunk.prototype.exists=function(elem,context,bodies){var body=bodies.block,skip=bodies["else"];if(!dust.isEmpty(elem)){if(body){return body(this,context)}}else{if(skip){return skip(this,context)}}return this};Chunk.prototype.notexists=function(elem,context,bodies){var body=bodies.block,skip=bodies["else"];if(dust.isEmpty(elem)){if(body){return body(this,context)}}else{if(skip){return skip(this,context)}}return this};Chunk.prototype.block=function(elem,context,bodies){var body=bodies.block;if(elem){body=elem}if(body){return body(this,context)}return this};Chunk.prototype.partial=function(elem,context,params){var partialContext;if(params){partialContext=dust.makeBase(context.global);if(context.stack&&context.stack.tail){partialContext.stack=context.stack.tail}partialContext=partialContext.push(params);partialContext=partialContext.push(context.stack.head)}else{partialContext=context}if(typeof elem==="function"){return this.capture(elem,partialContext,function(name,chunk){dust.load(name,chunk,partialContext).end()})}return dust.load(elem,this,partialContext)};Chunk.prototype.helper=function(name,context,bodies,params){if(dust.helpers[name]){return dust.helpers[name](this,context,bodies,params)}};Chunk.prototype.capture=function(body,context,callback){return this.map(function(chunk){var stub=new Stub(function(err,out){if(err){chunk.setError(err)}else{callback(out,chunk)}});body(stub.head,context).end()})};Chunk.prototype.setError=function(err){this.error=err;this.root.flush();return this};function Tap(head,tail){this.head=head;this.tail=tail}Tap.prototype.push=function(tap){return new Tap(tap,this)};Tap.prototype.go=function(value){var tap=this;while(tap){value=tap.head(value);tap=tap.tail}return value};var HCHARS=new RegExp(/[&<>\"\']/),AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(s){if(typeof s==="string"){if(!HCHARS.test(s)){return s}return s.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;")}return s};var BS=/\\/g,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;dust.escapeJs=function(s){if(typeof s==="string"){return s.replace(BS,"\\\\").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t")}return s}})(dust);if(typeof exports!=="undefined"){dust.helpers=require("./dust-helpers").helpers;if(typeof process!=="undefined"){require("./server")(dust)}module.exports=dust}(function(dust){var _console=(typeof console!=="undefined")?console:{log:function(){}};function isSelect(context){var value=context.current();return typeof value==="object"&&value.isSelect===true}function filter(chunk,context,bodies,params,filter){var params=params||{},actual,expected;if(params.key){actual=helpers.tap(params.key,chunk,context)}else{if(isSelect(context)){actual=context.current().selectKey;if(context.current().isResolved){filter=function(){return false}}}else{throw"No key specified for filter and no key found in context from select statement"}}expected=helpers.tap(params.value,chunk,context);if(filter(expected,coerce(actual,params.type,context))){if(isSelect(context)){context.current().isResolved=true}return chunk.render(bodies.block,context)}else{if(bodies["else"]){return chunk.render(bodies["else"],context)}}return chunk.write("")}function coerce(value,type,context){if(value){switch(type||typeof(value)){case"number":return +value;case"string":return String(value);case"boolean":return Boolean(value);case"date":return new Date(value);case"context":return context.get(value)}}return value}var helpers={sep:function(chunk,context,bodies){if(context.stack.index===context.stack.of-1){return chunk}return bodies.block(chunk,context)},idx:function(chunk,context,bodies){return bodies.block(chunk,context.push(context.stack.index))},contextDump:function(chunk,context,bodies){_console.log(JSON.stringify(context.stack));return chunk},tap:function(input,chunk,context){var output=input;if(typeof input==="function"){if((typeof input.isFunction!=="undefined")&&(input.isFunction===true)){output=input()}else{output="";chunk.tap(function(data){output+=data;return""}).render(input,context).untap();if(output===""){output=false}}}return output},"if":function(chunk,context,bodies,params){if(params&&params.cond){var cond=params.cond;cond=this.tap(cond,chunk,context);if(eval(cond)){return chunk.render(bodies.block,context)}if(bodies["else"]){return chunk.render(bodies["else"],context)}}else{_console.log("No condition given in the if helper!")}return chunk},select:function(chunk,context,bodies,params){if(params&&params.key){var key=this.tap(params.key,chunk,context);return chunk.render(bodies.block,context.push({isSelect:true,isResolved:false,selectKey:key}))}else{_console.log("No key given in the select helper!")}return chunk},eq:function(chunk,context,bodies,params){return filter(chunk,context,bodies,params,function(expected,actual){return actual===expected})},lt:function(chunk,context,bodies,params){return filter(chunk,context,bodies,params,function(expected,actual){return actual<expected})},lte:function(chunk,context,bodies,params){return filter(chunk,context,bodies,params,function(expected,actual){return actual<=expected})},gt:function(chunk,context,bodies,params){return filter(chunk,context,bodies,params,function(expected,actual){return actual>expected})},gte:function(chunk,context,bodies,params){return filter(chunk,context,bodies,params,function(expected,actual){return actual>=expected})},"default":function(chunk,context,bodies,params){return filter(chunk,context,bodies,params,function(expected,actual){return true})},size:function(chunk,context,bodies,params){var subject=params.subject;var value=0;if(!subject){value=0}else{if(dust.isArray(subject)){value=subject.length}else{if(!isNaN(subject)){value=subject}else{if(Object(subject)===subject){var nr=0;for(var k in subject){if(Object.hasOwnProperty.call(subject,k)){nr++}}value=nr}else{value=(subject+"").length}}}}return chunk.write(value)}};dust.helpers=helpers})(typeof exports!=="undefined"?exports:getGlobal());(function(e){e.compile=function(r,p){try{var o=h(e.parse(r));return l(o,p)}catch(q){if(!q.line||!q.column){throw q}throw new SyntaxError(q.message+" At line : "+q.line+", column : "+q.column)}};function h(o){var p={};return e.filterNode(p,o)}e.filterNode=function(o,p){return e.optimizers[p[0]](o,p)};e.optimizers={body:a,buffer:m,special:d,format:b,reference:i,"#":i,"?":i,"^":i,"<":i,"+":i,"@":i,"%":i,partial:i,context:i,params:i,bodies:i,param:i,filters:m,key:m,path:m,literal:m,comment:b};e.pragmas={esc:function(s,r,p,t){var o=s.auto;if(!r){r="h"}s.auto=(r==="s")?"":r;var q=j(s,p.block);s.auto=o;return q}};function i(s,t){var p=[t[0]];for(var r=1,o=t.length;r<o;r++){var q=e.filterNode(s,t[r]);if(q){p.push(q)}}return p}function a(t,u){var q=[u[0]],p;for(var s=1,o=u.length;s<o;s++){var r=e.filterNode(t,u[s]);if(r){if(r[0]==="buffer"){if(p){p[1]+=r[1]}else{p=r;q.push(r)}}else{p=null;q.push(r)}}}return q}var c={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};function d(o,p){return["buffer",c[p[1]]]}function m(o,p){return p}function b(){}function l(o,p){var q={name:p,bodies:[],blocks:{},index:0,auto:"h"};return"(function(){dust.register("+(p?'"'+p+'"':"null")+","+e.compileNode(q,o)+");"+g(q)+f(q)+"return body_0;})();"}function g(q){var p=[],r=q.blocks;for(var o in r){p.push("'"+o+"':"+r[o])}if(p.length){q.blocks="ctx=ctx.shiftBlocks(blocks);";return"var blocks={"+p.join(",")+"};"}return q.blocks=""}function f(t){var r=[],q=t.bodies,p=t.blocks;for(var s=0,o=q.length;s<o;s++){r[s]="function body_"+s+"(chk,ctx){"+p+"return chk"+q[s]+";}"}return r.join("")}function j(r,p){var s="";for(var q=1,o=p.length;q<o;q++){s+=e.compileNode(r,p[q])}return s}e.compileNode=function(o,p){return e.nodes[p[0]](o,p)};e.nodes={body:function(p,q){var r=p.index++,o="body_"+r;p.bodies[r]=j(p,q);return o},buffer:function(o,p){return".write("+k(p[1])+")"},format:function(o,p){return".write("+k(p[1]+p[2])+")"},reference:function(o,p){return".reference("+e.compileNode(o,p[1])+",ctx,"+e.compileNode(o,p[2])+")"},"#":function(o,p){return n(o,p,"section")},"?":function(o,p){return n(o,p,"exists")},"^":function(o,p){return n(o,p,"notexists")},"<":function(r,t){var p=t[4];for(var q=1,o=p.length;q<o;q++){var u=p[q],s=u[1][1];if(s==="block"){r.blocks[t[1].text]=e.compileNode(r,u[2]);return""}}return""},"+":function(o,p){if(typeof(p[1].text)==="undefined"&&typeof(p[4])==="undefined"){return".block(ctx.getBlock("+e.compileNode(o,p[1])+",chk, ctx),"+e.compileNode(o,p[2])+", {},"+e.compileNode(o,p[3])+")"}else{return".block(ctx.getBlock("+k(p[1].text)+"),"+e.compileNode(o,p[2])+","+e.compileNode(o,p[4])+","+e.compileNode(o,p[3])+")"}},"@":function(o,p){return".helper("+k(p[1].text)+","+e.compileNode(o,p[2])+","+e.compileNode(o,p[4])+","+e.compileNode(o,p[3])+")"},"%":function(t,u){var r=u[1][1];if(!e.pragmas[r]){return""}var x=u[4];var o={};for(var w=1,y=x.length;w<y;w++){var z=x[w];o[z[1][1]]=z[2]}var q=u[3];var v={};for(var w=1,y=q.length;w<y;w++){var s=q[w];v[s[1][1]]=s[2][1]}var A=u[2][1]?u[2][1].text:null;return e.pragmas[r](t,A,o,v)},partial:function(o,p){return".partial("+e.compileNode(o,p[1])+","+e.compileNode(o,p[2])+","+e.compileNode(o,p[3])+")"},context:function(o,p){if(p[1]){return"ctx.rebase("+e.compileNode(o,p[1])+")"}return"ctx"},params:function(r,s){var p=[];for(var q=1,o=s.length;q<o;q++){p.push(e.compileNode(r,s[q]))}if(p.length){return"{"+p.join(",")+"}"}return"null"},bodies:function(r,s){var p=[];for(var q=1,o=s.length;q<o;q++){p.push(e.compileNode(r,s[q]))}return"{"+p.join(",")+"}"},param:function(o,p){return e.compileNode(o,p[1])+":"+e.compileNode(o,p[2])},filters:function(q,s){var t=[];for(var p=1,o=s.length;p<o;p++){var r=s[p];t.push('"'+r+'"')}return'"'+q.auto+'"'+(t.length?",["+t.join(",")+"]":"")},key:function(o,p){return'ctx.get("'+p[1]+'")'},path:function(q,s){var u=s[1],r=s[2],t=[];for(var p=0,o=r.length;p<o;p++){t.push('"'+r[p]+'"')}return"ctx.getPath("+u+",["+t.join(",")+"])"},literal:function(o,p){return k(p[1])}};function n(o,p,q){return"."+q+"("+e.compileNode(o,p[1])+","+e.compileNode(o,p[2])+","+e.compileNode(o,p[4])+","+e.compileNode(o,p[3])+")"}var k=(typeof JSON==="undefined")?function(o){return'"'+e.escapeJs(o)+'"'}:JSON.stringify})(typeof exports!=="undefined"?exports:getGlobal());(function(a){var b=(function(){function d(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var c={parse:function(i,n){var g={body:z,part:o,section:t,sec_tag_start:v,end_tag:x,context:V,params:I,bodies:A,reference:Y,partial:M,filters:u,special:f,identifier:U,number:E,frac:W,integer:H,path:N,key:L,array:e,array_part:p,inline:R,inline_part:O,buffer:X,literal:j,esc:h,comment:G,tag:l,ld:F,rd:J,eol:q,ws:Q};if(n!==undefined){if(g[n]===undefined){throw new Error("Invalid rule name: "+d(n)+".")}}else{n="body"}var K={offset:0,line:1,column:1,seenCR:false};var T=0;var k={offset:0,line:1,column:1,seenCR:false};var s=[];function Z(ab,af,ad){var aa=ab;var ae=ad-ab.length;for(var ac=0;ac<ae;ac++){aa=af+aa}return aa}function C(ac){var ab=ac.charCodeAt(0);var aa;var ad;if(ab<=255){aa="x";ad=2}else{aa="u";ad=4}return"\\"+aa+Z(ab.toString(16).toUpperCase(),"0",ad)}function B(ab){var aa={};for(var ac in ab){aa[ac]=ab[ac]}return aa}function r(ae,ad){var aa=ae.offset+ad;for(var ac=ae.offset;ac<aa;ac++){var ab=i.charAt(ac);if(ab==="\n"){if(!ae.seenCR){ae.line++}ae.column=1;ae.seenCR=false}else{if(ab==="\r"||ab==="\u2028"||ab==="\u2029"){ae.line++;ae.column=1;ae.seenCR=true}else{ae.column++;ae.seenCR=false}}}ae.offset+=ad}function w(aa){if(K.offset<k.offset){return}if(K.offset>k.offset){k=B(K);s=[]}s.push(aa)}function z(){var ab,aa;var ac;ac=B(K);ab=[];aa=o();while(aa!==null){ab.push(aa);aa=o()}if(ab!==null){ab=(function(ag,ad,ae,af){return["body"].concat(af)})(ac.offset,ac.line,ac.column,ab)}if(ab===null){K=B(ac)}return ab}function o(){var aa;aa=G();if(aa===null){aa=t();if(aa===null){aa=M();if(aa===null){aa=f();if(aa===null){aa=Y();if(aa===null){aa=X()}}}}}return aa}function t(){var ag,af,ae,ad,ac,ab,aa;var ai,ah;T++;ai=B(K);ah=B(K);ag=v();if(ag!==null){af=[];ae=Q();while(ae!==null){af.push(ae);ae=Q()}if(af!==null){ae=J();if(ae!==null){ad=z();if(ad!==null){ac=A();if(ac!==null){ab=x();if(ab!==null){aa=(function(ao,ak,am,al,aj,an,ap){return al[1].text===ap.text})(K.offset,K.line,K.column,ag,ad,ac,ab)?"":null;if(aa!==null){ag=[ag,af,ae,ad,ac,ab,aa]}else{ag=null;K=B(ah)}}else{ag=null;K=B(ah)}}else{ag=null;K=B(ah)}}else{ag=null;K=B(ah)}}else{ag=null;K=B(ah)}}else{ag=null;K=B(ah)}}else{ag=null;K=B(ah)}if(ag!==null){ag=(function(ao,ak,am,al,aj,an,ap){an.push(["param",["literal","block"],aj]);al.push(an);return al})(ai.offset,ai.line,ai.column,ag[0],ag[3],ag[4],ag[5])}if(ag===null){K=B(ai)}if(ag===null){ai=B(K);ah=B(K);ag=v();if(ag!==null){af=[];ae=Q();while(ae!==null){af.push(ae);ae=Q()}if(af!==null){if(i.charCodeAt(K.offset)===47){ae="/";r(K,1)}else{ae=null;if(T===0){w('"/"')}}if(ae!==null){ad=J();if(ad!==null){ag=[ag,af,ae,ad]}else{ag=null;K=B(ah)}}else{ag=null;K=B(ah)}}else{ag=null;K=B(ah)}}else{ag=null;K=B(ah)}if(ag!==null){ag=(function(am,aj,al,ak){ak.push(["bodies"]);return ak})(ai.offset,ai.line,ai.column,ag[0])}if(ag===null){K=B(ai)}}T--;if(T===0&&ag===null){w("section")}return ag}function v(){var ag,ae,ad,ac,ab,aa;var ah,af;ah=B(K);af=B(K);ag=F();if(ag!==null){if(/^[#?^<+@%]/.test(i.charAt(K.offset))){ae=i.charAt(K.offset);r(K,1)}else{ae=null;if(T===0){w("[#?^<+@%]")}}if(ae!==null){ad=[];ac=Q();while(ac!==null){ad.push(ac);ac=Q()}if(ad!==null){ac=U();if(ac!==null){ab=V();if(ab!==null){aa=I();if(aa!==null){ag=[ag,ae,ad,ac,ab,aa]}else{ag=null;K=B(af)}}else{ag=null;K=B(af)}}else{ag=null;K=B(af)}}else{ag=null;K=B(af)}}else{ag=null;K=B(af)}}else{ag=null;K=B(af)}if(ag!==null){ag=(function(am,ai,ak,aj,ao,an,al){return[aj,ao,an,al]})(ah.offset,ah.line,ah.column,ag[1],ag[3],ag[4],ag[5])}if(ag===null){K=B(ah)}return ag}function x(){var ag,ae,ad,ac,ab,aa;var ah,af;T++;ah=B(K);af=B(K);ag=F();if(ag!==null){if(i.charCodeAt(K.offset)===47){ae="/";r(K,1)}else{ae=null;if(T===0){w('"/"')}}if(ae!==null){ad=[];ac=Q();while(ac!==null){ad.push(ac);ac=Q()}if(ad!==null){ac=U();if(ac!==null){ab=[];aa=Q();while(aa!==null){ab.push(aa);aa=Q()}if(ab!==null){aa=J();if(aa!==null){ag=[ag,ae,ad,ac,ab,aa]}else{ag=null;K=B(af)}}else{ag=null;K=B(af)}}else{ag=null;K=B(af)}}else{ag=null;K=B(af)}}else{ag=null;K=B(af)}}else{ag=null;K=B(af)}if(ag!==null){ag=(function(ak,ai,aj,al){return al})(ah.offset,ah.line,ah.column,ag[3])}if(ag===null){K=B(ah)}T--;if(T===0&&ag===null){w("end tag")}return ag}function V(){var ad,ab;var ae,ac,aa;ae=B(K);ac=B(K);aa=B(K);if(i.charCodeAt(K.offset)===58){ad=":";r(K,1)}else{ad=null;if(T===0){w('":"')}}if(ad!==null){ab=U();if(ab!==null){ad=[ad,ab]}else{ad=null;K=B(aa)}}else{ad=null;K=B(aa)}if(ad!==null){ad=(function(ah,af,ag,ai){return ai})(ac.offset,ac.line,ac.column,ad[1])}if(ad===null){K=B(ac)}ad=ad!==null?ad:"";if(ad!==null){ad=(function(ah,af,ag,ai){return ai?["context",ai]:["context"]})(ae.offset,ae.line,ae.column,ad)}if(ad===null){K=B(ae)}return ad}function I(){var ag,ae,ac,ab,aa;var ah,af,ad;T++;ah=B(K);ag=[];af=B(K);ad=B(K);ac=Q();if(ac!==null){ae=[];while(ac!==null){ae.push(ac);ac=Q()}}else{ae=null}if(ae!==null){ac=L();if(ac!==null){if(i.charCodeAt(K.offset)===61){ab="=";r(K,1)}else{ab=null;if(T===0){w('"="')}}if(ab!==null){aa=E();if(aa===null){aa=U();if(aa===null){aa=R()}}if(aa!==null){ae=[ae,ac,ab,aa]}else{ae=null;K=B(ad)}}else{ae=null;K=B(ad)}}else{ae=null;K=B(ad)}}else{ae=null;K=B(ad)}if(ae!==null){ae=(function(am,ai,al,ak,aj){return["param",["literal",ak],aj]})(af.offset,af.line,af.column,ae[1],ae[3])}if(ae===null){K=B(af)}while(ae!==null){ag.push(ae);af=B(K);ad=B(K);ac=Q();if(ac!==null){ae=[];while(ac!==null){ae.push(ac);ac=Q()}}else{ae=null}if(ae!==null){ac=L();if(ac!==null){if(i.charCodeAt(K.offset)===61){ab="=";r(K,1)}else{ab=null;if(T===0){w('"="')}}if(ab!==null){aa=E();if(aa===null){aa=U();if(aa===null){aa=R()}}if(aa!==null){ae=[ae,ac,ab,aa]}else{ae=null;K=B(ad)}}else{ae=null;K=B(ad)}}else{ae=null;K=B(ad)}}else{ae=null;K=B(ad)}if(ae!==null){ae=(function(am,ai,al,ak,aj){return["param",["literal",ak],aj]})(af.offset,af.line,af.column,ae[1],ae[3])}if(ae===null){K=B(af)}}if(ag!==null){ag=(function(al,ai,aj,ak){return["params"].concat(ak)})(ah.offset,ah.line,ah.column,ag)}if(ag===null){K=B(ah)}T--;if(T===0&&ag===null){w("params")}return ag}function A(){var af,ae,ad,ac,ab,aa;var ai,ah,ag;T++;ai=B(K);af=[];ah=B(K);ag=B(K);ae=F();if(ae!==null){if(i.charCodeAt(K.offset)===58){ad=":";r(K,1)}else{ad=null;if(T===0){w('":"')}}if(ad!==null){ac=L();if(ac!==null){ab=J();if(ab!==null){aa=z();if(aa!==null){ae=[ae,ad,ac,ab,aa]}else{ae=null;K=B(ag)}}else{ae=null;K=B(ag)}}else{ae=null;K=B(ag)}}else{ae=null;K=B(ag)}}else{ae=null;K=B(ag)}if(ae!==null){ae=(function(an,aj,am,al,ak){return["param",["literal",al],ak]})(ah.offset,ah.line,ah.column,ae[2],ae[4])}if(ae===null){K=B(ah)}while(ae!==null){af.push(ae);ah=B(K);ag=B(K);ae=F();if(ae!==null){if(i.charCodeAt(K.offset)===58){ad=":";r(K,1)}else{ad=null;if(T===0){w('":"')}}if(ad!==null){ac=L();if(ac!==null){ab=J();if(ab!==null){aa=z();if(aa!==null){ae=[ae,ad,ac,ab,aa]}else{ae=null;K=B(ag)}}else{ae=null;K=B(ag)}}else{ae=null;K=B(ag)}}else{ae=null;K=B(ag)}}else{ae=null;K=B(ag)}if(ae!==null){ae=(function(an,aj,am,al,ak){return["param",["literal",al],ak]})(ah.offset,ah.line,ah.column,ae[2],ae[4])}if(ae===null){K=B(ah)}}if(af!==null){af=(function(am,aj,ak,al){return["bodies"].concat(al)})(ai.offset,ai.line,ai.column,af)}if(af===null){K=B(ai)}T--;if(T===0&&af===null){w("bodies")}return af}function Y(){var ae,ac,ab,aa;var af,ad;T++;af=B(K);ad=B(K);ae=F();if(ae!==null){ac=U();if(ac!==null){ab=u();if(ab!==null){aa=J();if(aa!==null){ae=[ae,ac,ab,aa]}else{ae=null;K=B(ad)}}else{ae=null;K=B(ad)}}else{ae=null;K=B(ad)}}else{ae=null;K=B(ad)}if(ae!==null){ae=(function(aj,ag,ah,ak,ai){return["reference",ak,ai]})(af.offset,af.line,af.column,ae[1],ae[2])}if(ae===null){K=B(af)}T--;if(T===0&&ae===null){w("reference")}return ae}function M(){var ah,ag,af,ae,ad,ac,ab,aa;var ak,aj,ai;T++;ak=B(K);aj=B(K);ah=F();if(ah!==null){if(i.charCodeAt(K.offset)===62){ag=">";r(K,1)}else{ag=null;if(T===0){w('">"')}}if(ag===null){if(i.charCodeAt(K.offset)===43){ag="+";r(K,1)}else{ag=null;if(T===0){w('"+"')}}}if(ag!==null){ai=B(K);af=L();if(af!==null){af=(function(ao,al,an,am){return["literal",am]})(ai.offset,ai.line,ai.column,af)}if(af===null){K=B(ai)}if(af===null){af=R()}if(af!==null){ae=V();if(ae!==null){ad=I();if(ad!==null){ac=[];ab=Q();while(ab!==null){ac.push(ab);ab=Q()}if(ac!==null){if(i.charCodeAt(K.offset)===47){ab="/";r(K,1)}else{ab=null;if(T===0){w('"/"')}}if(ab!==null){aa=J();if(aa!==null){ah=[ah,ag,af,ae,ad,ac,ab,aa]}else{ah=null;K=B(aj)}}else{ah=null;K=B(aj)}}else{ah=null;K=B(aj)}}else{ah=null;K=B(aj)}}else{ah=null;K=B(aj)}}else{ah=null;K=B(aj)}}else{ah=null;K=B(aj)}}else{ah=null;K=B(aj)}if(ah!==null){ah=(function(aq,al,ao,an,at,ar,ap){var am=(an===">")?"partial":an;return[am,at,ar,ap]})(ak.offset,ak.line,ak.column,ah[1],ah[2],ah[3],ah[4])}if(ah===null){K=B(ak)}T--;if(T===0&&ah===null){w("partial")}return ah}function u(){var ae,ac,aa;var af,ad,ab;T++;af=B(K);ae=[];ad=B(K);ab=B(K);if(i.charCodeAt(K.offset)===124){ac="|";r(K,1)}else{ac=null;if(T===0){w('"|"')}}if(ac!==null){aa=L();if(aa!==null){ac=[ac,aa]}else{ac=null;K=B(ab)}}else{ac=null;K=B(ab)}if(ac!==null){ac=(function(ai,ag,ah,aj){return aj})(ad.offset,ad.line,ad.column,ac[1])}if(ac===null){K=B(ad)}while(ac!==null){ae.push(ac);ad=B(K);ab=B(K);if(i.charCodeAt(K.offset)===124){ac="|";r(K,1)}else{ac=null;if(T===0){w('"|"')}}if(ac!==null){aa=L();if(aa!==null){ac=[ac,aa]}else{ac=null;K=B(ab)}}else{ac=null;K=B(ab)}if(ac!==null){ac=(function(ai,ag,ah,aj){return aj})(ad.offset,ad.line,ad.column,ac[1])}if(ac===null){K=B(ad)}}if(ae!==null){ae=(function(aj,ag,ah,ai){return["filters"].concat(ai)})(af.offset,af.line,af.column,ae)}if(ae===null){K=B(af)}T--;if(T===0&&ae===null){w("filters")}return ae}function f(){var ae,ac,ab,aa;var af,ad;T++;af=B(K);ad=B(K);ae=F();if(ae!==null){if(i.charCodeAt(K.offset)===126){ac="~";r(K,1)}else{ac=null;if(T===0){w('"~"')}}if(ac!==null){ab=L();if(ab!==null){aa=J();if(aa!==null){ae=[ae,ac,ab,aa]}else{ae=null;K=B(ad)}}else{ae=null;K=B(ad)}}else{ae=null;K=B(ad)}}else{ae=null;K=B(ad)}if(ae!==null){ae=(function(aj,ag,ai,ah){return["special",ah]})(af.offset,af.line,af.column,ae[2])}if(ae===null){K=B(af)}T--;if(T===0&&ae===null){w("special")}return ae}function U(){var aa;var ab;T++;ab=B(K);aa=N();if(aa!==null){aa=(function(ag,ad,ae,af){var ac=["path"].concat(af);ac.text=af[1].join(".");return ac})(ab.offset,ab.line,ab.column,aa)}if(aa===null){K=B(ab)}if(aa===null){ab=B(K);aa=L();if(aa!==null){aa=(function(ag,ad,af,ae){var ac=["key",ae];ac.text=ae;return ac})(ab.offset,ab.line,ab.column,aa)}if(aa===null){K=B(ab)}}T--;if(T===0&&aa===null){w("identifier")}return aa}function E(){var aa;var ab;T++;ab=B(K);aa=W();if(aa===null){aa=H()}if(aa!==null){aa=(function(ae,ac,ad,af){return["literal",af]})(ab.offset,ab.line,ab.column,aa)}if(aa===null){K=B(ab)}T--;if(T===0&&aa===null){w("number")}return aa}function W(){var ae,ac,ab,aa;var af,ad;T++;af=B(K);ad=B(K);ae=H();if(ae!==null){if(i.charCodeAt(K.offset)===46){ac=".";r(K,1)}else{ac=null;if(T===0){w('"."')}}if(ac!==null){aa=H();if(aa!==null){ab=[];while(aa!==null){ab.push(aa);aa=H()}}else{ab=null}if(ab!==null){ae=[ae,ac,ab]}else{ae=null;K=B(ad)}}else{ae=null;K=B(ad)}}else{ae=null;K=B(ad)}if(ae!==null){ae=(function(ak,ah,ai,ag,aj){return parseFloat(ag+"."+aj.join(""))})(af.offset,af.line,af.column,ae[0],ae[2])}if(ae===null){K=B(af)}T--;if(T===0&&ae===null){w("frac")}return ae}function H(){var ab,aa;var ac;T++;ac=B(K);if(/^[0-9]/.test(i.charAt(K.offset))){aa=i.charAt(K.offset);r(K,1)}else{aa=null;if(T===0){w("[0-9]")}}if(aa!==null){ab=[];while(aa!==null){ab.push(aa);if(/^[0-9]/.test(i.charAt(K.offset))){aa=i.charAt(K.offset);r(K,1)}else{aa=null;if(T===0){w("[0-9]")}}}}else{ab=null}if(ab!==null){ab=(function(ag,ad,ae,af){return parseInt(af.join(""),10)})(ac.offset,ac.line,ac.column,ab)}if(ab===null){K=B(ac)}T--;if(T===0&&ab===null){w("integer")}return ab}function N(){var ad,ab,aa;var ae,ac;T++;ae=B(K);ac=B(K);ad=L();ad=ad!==null?ad:"";if(ad!==null){aa=p();if(aa===null){aa=e()}if(aa!==null){ab=[];while(aa!==null){ab.push(aa);aa=p();if(aa===null){aa=e()}}}else{ab=null}if(ab!==null){ad=[ad,ab]}else{ad=null;K=B(ac)}}else{ad=null;K=B(ac)}if(ad!==null){ad=(function(aj,af,ah,ag,ai){ai=ai[0];if(ag&&ai){ai.unshift(ag);return[false,ai]}return[true,ai]})(ae.offset,ae.line,ae.column,ad[0],ad[1])}if(ad===null){K=B(ae)}if(ad===null){ae=B(K);ac=B(K);if(i.charCodeAt(K.offset)===46){ad=".";r(K,1)}else{ad=null;if(T===0){w('"."')}}if(ad!==null){ab=[];aa=p();if(aa===null){aa=e()}while(aa!==null){ab.push(aa);aa=p();if(aa===null){aa=e()}}if(ab!==null){ad=[ad,ab]}else{ad=null;K=B(ac)}}else{ad=null;K=B(ac)}if(ad!==null){ad=(function(ai,af,ag,ah){if(ah.length>0){return[true,ah[0]]}return[true,[]]})(ae.offset,ae.line,ae.column,ad[1])}if(ad===null){K=B(ae)}}T--;if(T===0&&ad===null){w("path")}return ad}function L(){var ad,ab,aa;var ae,ac;T++;ae=B(K);ac=B(K);if(/^[a-zA-Z_$]/.test(i.charAt(K.offset))){ad=i.charAt(K.offset);r(K,1)}else{ad=null;if(T===0){w("[a-zA-Z_$]")}}if(ad!==null){ab=[];if(/^[0-9a-zA-Z_$\-]/.test(i.charAt(K.offset))){aa=i.charAt(K.offset);r(K,1)}else{aa=null;if(T===0){w("[0-9a-zA-Z_$\\-]")}}while(aa!==null){ab.push(aa);if(/^[0-9a-zA-Z_$\-]/.test(i.charAt(K.offset))){aa=i.charAt(K.offset);r(K,1)}else{aa=null;if(T===0){w("[0-9a-zA-Z_$\\-]")}}}if(ab!==null){ad=[ad,ab]}else{ad=null;K=B(ac)}}else{ad=null;K=B(ac)}if(ad!==null){ad=(function(aj,af,ai,ah,ag){return ah+ag.join("")})(ae.offset,ae.line,ae.column,ad[0],ad[1])}if(ad===null){K=B(ae)}T--;if(T===0&&ad===null){w("key")}return ad}function e(){var af,ad,ab;var ag,ae,ac,aa;T++;ag=B(K);ae=B(K);ac=B(K);aa=B(K);if(i.charCodeAt(K.offset)===91){af="[";r(K,1)}else{af=null;if(T===0){w('"["')}}if(af!==null){if(/^[0-9]/.test(i.charAt(K.offset))){ab=i.charAt(K.offset);r(K,1)}else{ab=null;if(T===0){w("[0-9]")}}if(ab!==null){ad=[];while(ab!==null){ad.push(ab);if(/^[0-9]/.test(i.charAt(K.offset))){ab=i.charAt(K.offset);r(K,1)}else{ab=null;if(T===0){w("[0-9]")}}}}else{ad=null}if(ad!==null){if(i.charCodeAt(K.offset)===93){ab="]";r(K,1)}else{ab=null;if(T===0){w('"]"')}}if(ab!==null){af=[af,ad,ab]}else{af=null;K=B(aa)}}else{af=null;K=B(aa)}}else{af=null;K=B(aa)}if(af!==null){af=(function(ak,ai,aj,ah){return ah.join("")})(ac.offset,ac.line,ac.column,af[1])}if(af===null){K=B(ac)}if(af!==null){ad=p();ad=ad!==null?ad:"";if(ad!==null){af=[af,ad]}else{af=null;K=B(ae)}}else{af=null;K=B(ae)}if(af!==null){af=(function(al,ah,ak,aj,ai){if(ai){ai.unshift(aj)}else{ai=[aj]}return ai})(ag.offset,ag.line,ag.column,af[0],af[1])}if(af===null){K=B(ag)}T--;if(T===0&&af===null){w("array")}return af}function p(){var af,ad,ab;var ag,ae,ac,aa;T++;ag=B(K);ae=B(K);ac=B(K);aa=B(K);if(i.charCodeAt(K.offset)===46){ad=".";r(K,1)}else{ad=null;if(T===0){w('"."')}}if(ad!==null){ab=L();if(ab!==null){ad=[ad,ab]}else{ad=null;K=B(aa)}}else{ad=null;K=B(aa)}if(ad!==null){ad=(function(ak,ah,aj,ai){return ai})(ac.offset,ac.line,ac.column,ad[1])}if(ad===null){K=B(ac)}if(ad!==null){af=[];while(ad!==null){af.push(ad);ac=B(K);aa=B(K);if(i.charCodeAt(K.offset)===46){ad=".";r(K,1)}else{ad=null;if(T===0){w('"."')}}if(ad!==null){ab=L();if(ab!==null){ad=[ad,ab]}else{ad=null;K=B(aa)}}else{ad=null;K=B(aa)}if(ad!==null){ad=(function(ak,ah,aj,ai){return ai})(ac.offset,ac.line,ac.column,ad[1])}if(ad===null){K=B(ac)}}}else{af=null}if(af!==null){ad=e();ad=ad!==null?ad:"";if(ad!==null){af=[af,ad]}else{af=null;K=B(ae)}}else{af=null;K=B(ae)}if(af!==null){af=(function(al,ai,aj,ak,ah){if(ah){return ak.concat(ah)}else{return ak}})(ag.offset,ag.line,ag.column,af[0],af[1])}if(af===null){K=B(ag)}T--;if(T===0&&af===null){w("array_part")}return af}function R(){var ad,ab,aa;var ae,ac;T++;ae=B(K);ac=B(K);if(i.charCodeAt(K.offset)===34){ad='"';r(K,1)}else{ad=null;if(T===0){w('"\\""')}}if(ad!==null){if(i.charCodeAt(K.offset)===34){ab='"';r(K,1)}else{ab=null;if(T===0){w('"\\""')}}if(ab!==null){ad=[ad,ab]}else{ad=null;K=B(ac)}}else{ad=null;K=B(ac)}if(ad!==null){ad=(function(ah,af,ag){return["literal",""]})(ae.offset,ae.line,ae.column)}if(ad===null){K=B(ae)}if(ad===null){ae=B(K);ac=B(K);if(i.charCodeAt(K.offset)===34){ad='"';r(K,1)}else{ad=null;if(T===0){w('"\\""')}}if(ad!==null){ab=j();if(ab!==null){if(i.charCodeAt(K.offset)===34){aa='"';r(K,1)}else{aa=null;if(T===0){w('"\\""')}}if(aa!==null){ad=[ad,ab,aa]}else{ad=null;K=B(ac)}}else{ad=null;K=B(ac)}}else{ad=null;K=B(ac)}if(ad!==null){ad=(function(ai,ag,ah,af){return["literal",af]})(ae.offset,ae.line,ae.column,ad[1])}if(ad===null){K=B(ae)}if(ad===null){ae=B(K);ac=B(K);if(i.charCodeAt(K.offset)===34){ad='"';r(K,1)}else{ad=null;if(T===0){w('"\\""')}}if(ad!==null){aa=O();if(aa!==null){ab=[];while(aa!==null){ab.push(aa);aa=O()}}else{ab=null}if(ab!==null){if(i.charCodeAt(K.offset)===34){aa='"';r(K,1)}else{aa=null;if(T===0){w('"\\""')}}if(aa!==null){ad=[ad,ab,aa]}else{ad=null;K=B(ac)}}else{ad=null;K=B(ac)}}else{ad=null;K=B(ac)}if(ad!==null){ad=(function(ai,af,ag,ah){return["body"].concat(ah)})(ae.offset,ae.line,ae.column,ad[1])}if(ad===null){K=B(ae)}}}T--;if(T===0&&ad===null){w("inline")}return ad}function O(){var aa;var ab;aa=f();if(aa===null){aa=Y();if(aa===null){ab=B(K);aa=j();if(aa!==null){aa=(function(af,ad,ae,ac){return["buffer",ac]})(ab.offset,ab.line,ab.column,aa)}if(aa===null){K=B(ab)}}}return aa}function X(){var ae,ad,ac,ab,aa;var ai,ah,ag,af;T++;ai=B(K);ah=B(K);ae=q();if(ae!==null){ad=[];ac=Q();while(ac!==null){ad.push(ac);ac=Q()}if(ad!==null){ae=[ae,ad]}else{ae=null;K=B(ah)}}else{ae=null;K=B(ah)}if(ae!==null){ae=(function(an,ak,al,am,aj){return["format",am,aj.join("")]})(ai.offset,ai.line,ai.column,ae[0],ae[1])}if(ae===null){K=B(ai)}if(ae===null){ai=B(K);ah=B(K);ag=B(K);af=B(K);T++;ad=l();T--;if(ad===null){ad=""}else{ad=null;K=B(af)}if(ad!==null){af=B(K);T++;ac=q();T--;if(ac===null){ac=""}else{ac=null;K=B(af)}if(ac!==null){af=B(K);T++;ab=G();T--;if(ab===null){ab=""}else{ab=null;K=B(af)}if(ab!==null){if(i.length>K.offset){aa=i.charAt(K.offset);r(K,1)}else{aa=null;if(T===0){w("any character")}}if(aa!==null){ad=[ad,ac,ab,aa]}else{ad=null;K=B(ag)}}else{ad=null;K=B(ag)}}else{ad=null;K=B(ag)}}else{ad=null;K=B(ag)}if(ad!==null){ad=(function(al,aj,ak,am){return am})(ah.offset,ah.line,ah.column,ad[3])}if(ad===null){K=B(ah)}if(ad!==null){ae=[];while(ad!==null){ae.push(ad);ah=B(K);ag=B(K);af=B(K);T++;ad=l();T--;if(ad===null){ad=""}else{ad=null;K=B(af)}if(ad!==null){af=B(K);T++;ac=q();T--;if(ac===null){ac=""}else{ac=null;K=B(af)}if(ac!==null){af=B(K);T++;ab=G();T--;if(ab===null){ab=""}else{ab=null;K=B(af)}if(ab!==null){if(i.length>K.offset){aa=i.charAt(K.offset);r(K,1)}else{aa=null;if(T===0){w("any character")}}if(aa!==null){ad=[ad,ac,ab,aa]}else{ad=null;K=B(ag)}}else{ad=null;K=B(ag)}}else{ad=null;K=B(ag)}}else{ad=null;K=B(ag)}if(ad!==null){ad=(function(al,aj,ak,am){return am})(ah.offset,ah.line,ah.column,ad[3])}if(ad===null){K=B(ah)}}}else{ae=null}if(ae!==null){ae=(function(am,ak,al,aj){return["buffer",aj.join("")]})(ai.offset,ai.line,ai.column,ae)}if(ae===null){K=B(ai)}}T--;if(T===0&&ae===null){w("buffer")}return ae}function j(){var af,ad,ab;var ag,ae,ac,aa;T++;ag=B(K);ae=B(K);ac=B(K);aa=B(K);T++;ad=l();T--;if(ad===null){ad=""}else{ad=null;K=B(aa)}if(ad!==null){ab=h();if(ab===null){if(/^[^"]/.test(i.charAt(K.offset))){ab=i.charAt(K.offset);r(K,1)}else{ab=null;if(T===0){w('[^"]')}}}if(ab!==null){ad=[ad,ab]}else{ad=null;K=B(ac)}}else{ad=null;K=B(ac)}if(ad!==null){ad=(function(aj,ah,ai,ak){return ak})(ae.offset,ae.line,ae.column,ad[1])}if(ad===null){K=B(ae)}if(ad!==null){af=[];while(ad!==null){af.push(ad);ae=B(K);ac=B(K);aa=B(K);T++;ad=l();T--;if(ad===null){ad=""}else{ad=null;K=B(aa)}if(ad!==null){ab=h();if(ab===null){if(/^[^"]/.test(i.charAt(K.offset))){ab=i.charAt(K.offset);r(K,1)}else{ab=null;if(T===0){w('[^"]')}}}if(ab!==null){ad=[ad,ab]}else{ad=null;K=B(ac)}}else{ad=null;K=B(ac)}if(ad!==null){ad=(function(aj,ah,ai,ak){return ak})(ae.offset,ae.line,ae.column,ad[1])}if(ad===null){K=B(ae)}}}else{af=null}if(af!==null){af=(function(ak,ai,aj,ah){return ah.join("")})(ag.offset,ag.line,ag.column,af)}if(af===null){K=B(ag)}T--;if(T===0&&af===null){w("literal")}return af}function h(){var aa;var ab;ab=B(K);if(i.substr(K.offset,2)==='\\"'){aa='\\"';r(K,2)}else{aa=null;if(T===0){w('"\\\\\\""')}}if(aa!==null){aa=(function(ae,ac,ad){return'"'})(ab.offset,ab.line,ab.column)}if(aa===null){K=B(ab)}return aa}function G(){var ad,ac,ab,aa;var ai,ah,ag,af,ae;T++;ai=B(K);ah=B(K);if(i.substr(K.offset,2)==="{!"){ad="{!";r(K,2)}else{ad=null;if(T===0){w('"{!"')}}if(ad!==null){ac=[];ag=B(K);af=B(K);ae=B(K);T++;if(i.substr(K.offset,2)==="!}"){ab="!}";r(K,2)}else{ab=null;if(T===0){w('"!}"')}}T--;if(ab===null){ab=""}else{ab=null;K=B(ae)}if(ab!==null){if(i.length>K.offset){aa=i.charAt(K.offset);r(K,1)}else{aa=null;if(T===0){w("any character")}}if(aa!==null){ab=[ab,aa]}else{ab=null;K=B(af)}}else{ab=null;K=B(af)}if(ab!==null){ab=(function(al,aj,ak,am){return am})(ag.offset,ag.line,ag.column,ab[1])}if(ab===null){K=B(ag)}while(ab!==null){ac.push(ab);ag=B(K);af=B(K);ae=B(K);T++;if(i.substr(K.offset,2)==="!}"){ab="!}";r(K,2)}else{ab=null;if(T===0){w('"!}"')}}T--;if(ab===null){ab=""}else{ab=null;K=B(ae)}if(ab!==null){if(i.length>K.offset){aa=i.charAt(K.offset);r(K,1)}else{aa=null;if(T===0){w("any character")}}if(aa!==null){ab=[ab,aa]}else{ab=null;K=B(af)}}else{ab=null;K=B(af)}if(ab!==null){ab=(function(al,aj,ak,am){return am})(ag.offset,ag.line,ag.column,ab[1])}if(ab===null){K=B(ag)}}if(ac!==null){if(i.substr(K.offset,2)==="!}"){ab="!}";r(K,2)}else{ab=null;if(T===0){w('"!}"')}}if(ab!==null){ad=[ad,ac,ab]}else{ad=null;K=B(ah)}}else{ad=null;K=B(ah)}}else{ad=null;K=B(ah)}if(ad!==null){ad=(function(al,aj,ak,am){return["comment",am.join("")]})(ai.offset,ai.line,ai.column,ad[1])}if(ad===null){K=B(ai)}T--;if(T===0&&ad===null){w("comment")}return ad}function l(){var ag,af,ae,ad,ac,ab,aa;var aj,ai,ah;aj=B(K);ag=F();if(ag!==null){if(/^[#?^><+%:@\/~%]/.test(i.charAt(K.offset))){af=i.charAt(K.offset);r(K,1)}else{af=null;if(T===0){w("[#?^><+%:@\\/~%]")}}if(af!==null){ae=[];ad=Q();while(ad!==null){ae.push(ad);ad=Q()}if(ae!==null){ai=B(K);ah=B(K);T++;ac=J();T--;if(ac===null){ac=""}else{ac=null;K=B(ah)}if(ac!==null){ah=B(K);T++;ab=q();T--;if(ab===null){ab=""}else{ab=null;K=B(ah)}if(ab!==null){if(i.length>K.offset){aa=i.charAt(K.offset);r(K,1)}else{aa=null;if(T===0){w("any character")}}if(aa!==null){ac=[ac,ab,aa]}else{ac=null;K=B(ai)}}else{ac=null;K=B(ai)}}else{ac=null;K=B(ai)}if(ac!==null){ad=[];while(ac!==null){ad.push(ac);ai=B(K);ah=B(K);T++;ac=J();T--;if(ac===null){ac=""}else{ac=null;K=B(ah)}if(ac!==null){ah=B(K);T++;ab=q();T--;if(ab===null){ab=""}else{ab=null;K=B(ah)}if(ab!==null){if(i.length>K.offset){aa=i.charAt(K.offset);r(K,1)}else{aa=null;if(T===0){w("any character")}}if(aa!==null){ac=[ac,ab,aa]}else{ac=null;K=B(ai)}}else{ac=null;K=B(ai)}}else{ac=null;K=B(ai)}}}else{ad=null}if(ad!==null){ac=[];ab=Q();while(ab!==null){ac.push(ab);ab=Q()}if(ac!==null){ab=J();if(ab!==null){ag=[ag,af,ae,ad,ac,ab]}else{ag=null;K=B(aj)}}else{ag=null;K=B(aj)}}else{ag=null;K=B(aj)}}else{ag=null;K=B(aj)}}else{ag=null;K=B(aj)}}else{ag=null;K=B(aj)}if(ag===null){ag=Y()}return ag}function F(){var aa;if(i.charCodeAt(K.offset)===123){aa="{";r(K,1)}else{aa=null;if(T===0){w('"{"')}}return aa}function J(){var aa;if(i.charCodeAt(K.offset)===125){aa="}";r(K,1)}else{aa=null;if(T===0){w('"}"')}}return aa}function q(){var aa;if(i.charCodeAt(K.offset)===10){aa="\n";r(K,1)}else{aa=null;if(T===0){w('"\\n"')}}if(aa===null){if(i.substr(K.offset,2)==="\r\n"){aa="\r\n";r(K,2)}else{aa=null;if(T===0){w('"\\r\\n"')}}if(aa===null){if(i.charCodeAt(K.offset)===13){aa="\r";r(K,1)}else{aa=null;if(T===0){w('"\\r"')}}if(aa===null){if(i.charCodeAt(K.offset)===8232){aa="\u2028";r(K,1)}else{aa=null;if(T===0){w('"\\u2028"')}}if(aa===null){if(i.charCodeAt(K.offset)===8233){aa="\u2029";r(K,1)}else{aa=null;if(T===0){w('"\\u2029"')}}}}}}return aa}function Q(){var aa;if(/^[\t\x0B\f \xA0\uFEFF]/.test(i.charAt(K.offset))){aa=i.charAt(K.offset);r(K,1)}else{aa=null;if(T===0){w("[\\t\\x0B\\f \\xA0\\uFEFF]")}}if(aa===null){aa=q()}return aa}function D(ac){ac.sort();var ad=null;var ab=[];for(var aa=0;aa<ac.length;aa++){if(ac[aa]!==ad){ab.push(ac[aa]);ad=ac[aa]}}return ab}var y=g[n]();if(y===null||K.offset!==i.length){var P=Math.max(K.offset,k.offset);var m=P<i.length?i.charAt(P):null;var S=K.offset>k.offset?K:k;throw new b.SyntaxError(D(s),m,P,S.line,S.column)}return y},toSource:function(){return this._source}};c.SyntaxError=function(h,i,j,f,g){function e(m,n){var k,l;switch(m.length){case 0:k="end of input";break;case 1:k=m[0];break;default:k=m.slice(0,m.length-1).join(", ")+" or "+m[m.length-1]}l=n?d(n):"end of input";return"Expected "+k+" but "+l+" found."}this.name="SyntaxError";this.expected=h;this.found=i;this.message=e(h,i);this.offset=j;this.line=f;this.column=g};c.SyntaxError.prototype=Error.prototype;return c})();a.parse=b.parse})(typeof exports!=="undefined"?exports:getGlobal());(function(){if(typeof window.BB==="undefined"){window.BB={}}if(typeof window.BB.Util==="undefined"){window.BB.Util={}}window.BB.Util.Base64=(function(){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var b=function(g){g=g.replace(/\r\n/g,"\n");var f="",i=0;for(i=0;i<g.length;i++){var h=g.charCodeAt(i);if(h<128){f+=String.fromCharCode(h)}else{if((h>127)&&(h<2048)){f+=String.fromCharCode((h>>6)|192);f+=String.fromCharCode((h&63)|128)}else{f+=String.fromCharCode((h>>12)|224);f+=String.fromCharCode(((h>>6)&63)|128);f+=String.fromCharCode((h&63)|128)}}}return f};var d=function(f){var g="";var j=0;var l=0,k=0,h=0;while(j<f.length){l=f.charCodeAt(j);if(l<128){g+=String.fromCharCode(l);j++}else{if((l>191)&&(l<224)){h=f.charCodeAt(j+1);g+=String.fromCharCode(((l&31)<<6)|(h&63));j+=2}else{h=f.charCodeAt(j+1);c3=f.charCodeAt(j+2);g+=String.fromCharCode(((l&15)<<12)|((h&63)<<6)|(c3&63));j+=3}}}return g};var e=function(h){var f="";var p,n,l,o,m,k,j;var g=0;h=b(h);while(g<h.length){p=h.charCodeAt(g++);n=h.charCodeAt(g++);l=h.charCodeAt(g++);o=p>>2;m=((p&3)<<4)|(n>>4);k=((n&15)<<2)|(l>>6);j=l&63;if(isNaN(n)){k=j=64}else{if(isNaN(l)){j=64}}f=f+c.charAt(o)+c.charAt(m)+c.charAt(k)+c.charAt(j)}return f};var a=function(h){var f="";var p,n,l;var o,m,k,j;var g=0;h=h.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(g<h.length){o=c.indexOf(h.charAt(g++));m=c.indexOf(h.charAt(g++));k=c.indexOf(h.charAt(g++));j=c.indexOf(h.charAt(g++));p=(o<<2)|(m>>4);n=((m&15)<<4)|(k>>2);l=((k&3)<<6)|j;f=f+String.fromCharCode(p);if(k!==64){f=f+String.fromCharCode(n)}if(j!==64){f=f+String.fromCharCode(l)}}f=d(f);return f};return{encode:function(f){return e(f)},decode:function(f){return a(f)},e64:function(f){return e(f)},d64:function(f){return a(f)}}}());window.bbcomEncrypt=window.BB.Util.Base64}());var BB=window.BB||{};BB.Util=BB.Util||{};BB.Util.cookie=(function(){var a=function(e){e=e||{};try{if(e.name===undefined||e.value===undefined){throw"You must define an object when setting a cookie with at least a name and value parameter"}}catch(k){BB.Log.debug(k);return null}var g=new Date(),m=(e.expires!==undefined)?(g.setTime(g.getTime()))+(parseFloat(e.expires)*24*60*60*1000):"",f=(e.expires!==undefined)?"; expires="+new Date(m).toGMTString():"",o=(e.path!==undefined)?"; path="+e.path:"",h=(e.domain!==undefined)?"; domain="+e.domain:"",d=(e.secure!==undefined)?"; secure="+e.secure:"",n=e.name+"="+e.value,j=f+o+h+d+";",i=(e.overwrite===false)?false:true,l=c(e.name);if(l===null){document.cookie=n+j;return n+j}else{if(i===true){document.cookie=n+j;return n+j}}return l},c=function(f){try{if(f===undefined||typeof f!=="string"){throw"You must define a name as a string when searching for a cookie"}}catch(h){BB.Log.debug(h);return null}var j=document.cookie.split(";"),g,d=j.length,l={},e,k;for(g=0;g<d;g++){e=j[g].split("=");k=e[0].replace(/^\s+|\s+$/g,"");if(k===f){l.name=k;l.value=e[1].replace(/^\s+|\s+$/g,"");break}}return l},b=function(d){try{if(d===undefined||typeof d!=="string"){throw"You must define a name as a string when removing a cookie"}}catch(e){BB.Log.debug(e);return null}return a({name:d,value:"",expires:-1})};return{set:function(d){return a(d)},get:function(d){return c(d)},remove:function(d){return b(d)}}}());BB.createNamespace("BB.Data.Templates.RightSidebar");BB.Data.Templates.RightSidebar.Common={Feeds:{wrapper:'<div class="user-activity"><h5>{lang.BODYSPACE_ACTIVITY}</h5><div id="rs-feed-list">{@if cond="{feedEntityList.length} > 0"}{#feedEntityList}{>basicFeed /}{/feedEntityList}{:else}<div class="no-updates"><div class="no-updates-inner">{lang.NO_UPDATES}</div></div>{/if}</div></div>',noFeeds:"<div>No Feeds Items Found.</div>",basicFeed:'<div class="rs-feed"><div class="rs-feed-image"><a href="http://bodyspace.bodybuilding.com/{slug}"><img src="{profilePicUrl}" /></a></div><div class="rs-feed-text"><a href="http://bodyspace.bodybuilding.com/{slug}">{userName}</a> {>"{eventType}" /}</div></div>',MOTIVATION_LEVEL:'updated {gender} motivation level from {oldLevel}/10 to <a href="{linkURL}">{newLevel}/10</a>.',FITSTATUS:"{newStatus}",BODYFAT:'updated {gender} body fat {@if cond="{oldBodyFat} > 0"}from {oldBodyFat}% {/if}to <a href="{linkURL}">{newBodyFat}%</a>{@if cond="{oldBodyFat} > 0"}, {deltaVerb} in {deltaDays}{/if}.',WEIGHT_CHANGED:'updated {gender} weight {@if cond="{oldWeight} > 0"}from {oldWeight} {unit} {/if}to <a href="{linkURL}">{newWeight} {unit}</a>{@if cond="{oldWeight} > 0"}, {deltaVerb} in {deltaDays}{/if}.',PROGRESS_PHOTO:'added <a href="http://bodyspace.bodybuilding.com/{slug}/more.php?section=progresspics">{amount} new photo{plural}</a> to {gender} <a href="http://bodyspace.bodybuilding.com/{slug}/more.php?section=progresspics">progress photos</a>.',PROFILE_PHOTO:'added a new <a href="http://bodyspace.bodybuilding.com/{slug}">profile photo</a>.',FRIEND:'is now friends with {#spellout}{>FRIEND_SPELLOUT /}{/spellout}{@if cond="{amount} > 0"} and <a href="http://bodyspace.bodybuilding.com/friends/{slug}">{amount} other{plural}</a>{/if}.',FRIEND_SPELLOUT:'<a href="http://bodyspace.bodybuilding.com/{slug}">{userName}</a>{separator}',BLOG:'created a new blog entry "<a href="{postUrl}">{postTitle}</a>"',MOTIVATION_PROGRAM:'updated {gender} <a href="http://bodyspace.bodybuilding.com/programs/my-motivation/{slug}">motivation program</a>.',NUTRITION_PROGRAM:'updated {gender} <a href="http://bodyspace.bodybuilding.com/programs/my-nutrition/{slug}">nutrition program</a>.',SUPPLEMENTS_PROGRAM:'updated {gender} <a href="http://bodyspace.bodybuilding.com/programs/my-supplements/{slug}">supplements program</a>.',WORKOUT_PROGRAM:'updated {gender} <a href="http://bodyspace.bodybuilding.com/programs/my-workout/{slug}">workout program</a>.',PROGRAM_UPDATED:'updated {gender} <a href="http://bodyspace.bodybuilding.com/programs/my-motivation/{slug}">program</a>.',BODYSTAT:'measured {gender} {#spellout}{>MEASURE_UPDATE /}{/spellout}{@if cond="{amount} > 0"} and measured <a href="http://bodyspace.bodybuilding.com/{slug}/more.php?section=progress">{amount} other body part{plural}</a>{/if}.',MEASURE_UPDATE:'<span class="body-part">{statType}</span> at <a href="{linkURL}">{value} {unit}</a>{deltaVerb}',GROUP_JOIN:'joined the <a href="{groupUrl}">{groupName}</a> BodyGroup.',GALLERY_PHOTO:'added <a href="{photosAddedLink}">{amount} new photo{plural}</a> to {gender} <a href="http://bodyspace.bodybuilding.com/photos/view-user-photos/s/{slug}">photo gallery</a>.',GYM_JOIN:'joined the <a href="{linkURL}">{gymName}</a>.',GOAL_CHANGED:'updated {gender} <a href="{linkURL}">overall goal</a>.',CURRENT_SUPPLEMENT:'is taking {#spellout}{>SUPPLEMENT /}{/spellout}{@if cond="{amount} > 0"} and <a href="http://bodyspace.bodybuilding.com/{slug}/more.php?section=currentsupplements">{amount} other product{plural}</a>{/if} as part of {gender} current supplements.',SUPPLEMENT:' <a href="{productUrl}">{productName}</a>',REVIEWED_SUPPLEMENT:'rated{#spellout}{>SUPPLEMENT_R /}{/spellout}{@if cond="{amount} > 0"} and <a href="http://bodyspace.bodybuilding.com/{slug}/more.php?section=supplement_review">{amount} other product{plural}</a>{/if}.',SUPPLEMENT_R:' <a href="{reviewUrl}">{productName}</a> as a {rating}/10',INSPIREDBY:'is inspired by <a href="{userInspiredUrl}">{userInspiredName}</a>.',PERSONAL_VIDEO:'added the video <a href="{videoUrlBodySpace}">{videoTitle}</a>.',BODYGROUP:'created the <a href="{groupUrl}">{groupName}</a> BodyGroup.'},Modals:{statUpdate:'<div class="interactive-sidebar-update-stats-modal-popup" style="position: {@if cond="{quirks_mode}"}absolute{:else}fixed{/if};"><div class="interactive-sidebar-update-stats-modal"><div class="interactive-sidebar-modal-close">{lang.CLOSE}</div><div class="bodyspace-modal-content"><span class="bodyspace-modal-header">{message}:</span><div class="bodyspace-modal-input"><div class="input"><label for="data-input">{statName}:</label><input type="text" id="data-input" class="input-weight large" value="{defaultValue}" name="weightTextFieldContainer"><em>{unitOfWeight}</em><div class="standard-tooltip interactive-sidebar tooltip-validation-error-elements-quirks hide"><div class="text"></div></div><div class="standard-tooltip interactive-sidebar tooltip-validation-error-elements hide"><div class="text"></div></div><div class="standard-tooltip-arrow interactive-sidebar tooltip-validation-error-elements hide"></div></div><div class="bodyspace-modal-footer"><div class="cancel-link">{lang.CANCEL}</div><div class="button"><span id="submitStat" class="bb-button-v2 button-gradient-blue main-goal-save"><span>{lang.SAVE}</span></span></div></div></div></div></div><div class="standard-tooltip interactive-sidebar tooltip-close-confirm-elements hide"><div class="text">{lang.CONFIRM_CLOSE_UNSAVED_CHANGES}</div><div class="standard-tooltip-button confirm">{lang.YES}</div><div class="standard-tooltip-button">{lang.NO}</div></div><div class="standard-tooltip-arrow interactive-sidebar tooltip-close-confirm-elements hide"></div></div>',fitStatusInput:'<div class="container"><div class="right"><div class="motivation header">{lang.MOTIVATION_LEVEL}</div><div class="motivation-graph"><ul><li><div class="motiv-item motivation-10"></div><div class="motiv-number">10</div></li><li><div class="motiv-item motivation-9"></div><div class="motiv-number">9</div></li><li><div class="motiv-item motivation-8"></div><div class="motiv-number">8</div></li><li><div class="motiv-item motivation-7"></div><div class="motiv-number">7</div></li><li><div class="motiv-item motivation-6"></div><div class="motiv-number">6</div></li><li><div class="motiv-item motivation-5"></div><div class="motiv-number">5</div></li><li><div class="motiv-item motivation-4"></div><div class="motiv-number">4</div></li><li><div class="motiv-item motivation-3"></div><div class="motiv-number">3</div></li><li><div class="motiv-item motivation-2"></div><div class="motiv-number">2</div></li><li><div class="motiv-item motivation-1"></div><div class="motiv-number">1</div></li></ul><div class="clearFloatNoHeight"></div></div><div class="motivation-legend">{lastMotivationUpdate}<br/>{lastMotivationUpdateTimeStamp}</div></div><div class="left"><div class="fit-status header">{lang.FIT_STATUS}</div><span class="wmwrap fit-status-input-container" style="position:relative;display:block;"><label class="watermark">{lang.NO_FIT_STATUS}</label><textarea maxlength="140" id="data-input" class="fit-status"></textarea></span><div class="fit-status-counter counter"><span>140</span> {lang.CHARACTERS_REMAINING}</div></div></div>',heightInput:'<div class="container"><select id="data-input-long"></select><select id="data-input-short"></select><input type="hidden" id="data-input"/></div>'},Dynamic:{},loadTemplates:function(){dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.wrapper,"feedsWrapper"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.basicFeed,"basicFeed"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.MOTIVATION_LEVEL,"MOTIVATION_LEVEL"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.FITSTATUS,"FITSTATUS"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.BODYFAT,"BODYFAT"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.BODYSTAT,"BODYSTAT"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.WEIGHT_CHANGED,"WEIGHT_CHANGED"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.PROGRESS_PHOTO,"PROGRESS_PHOTO"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.PROFILE_PHOTO,"PROFILE_PHOTO"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.FRIEND,"FRIEND"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.FRIEND_SPELLOUT,"FRIEND_SPELLOUT"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.BLOG,"BLOG"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.MOTIVATION_PROGRAM,"MOTIVATION_PROGRAM"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.NUTRITION_PROGRAM,"NUTRITION_PROGRAM"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.SUPPLEMENTS_PROGRAM,"SUPPLEMENTS_PROGRAM"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.WORKOUT_PROGRAM,"WORKOUT_PROGRAM"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.PROGRAM_UPDATED,"PROGRAM_UPDATED"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.GROUP_JOIN,"GROUP_JOIN"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.GALLERY_PHOTO,"GALLERY_PHOTO"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.GYM_JOIN,"GYM_JOIN"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.GOAL_CHANGED,"GOAL_CHANGED"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.CURRENT_SUPPLEMENT,"CURRENT_SUPPLEMENT"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.SUPPLEMENT,"SUPPLEMENT"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.REVIEWED_SUPPLEMENT,"REVIEWED_SUPPLEMENT"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.INSPIREDBY,"INSPIREDBY"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.PERSONAL_VIDEO,"PERSONAL_VIDEO"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.BODYGROUP,"BODYGROUP"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.MEASURE_UPDATE,"MEASURE_UPDATE"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Feeds.SUPPLEMENT_R,"SUPPLEMENT_R"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Modals.statUpdate,"statUpdate"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Modals.fitStatusInput,"fitStatusInput"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Modals.heightInput,"heightInput"))}};BB.Data.Templates.RightSidebar.notLoggedIn={topSection:'<div class="free-signup"><div class="large-text"><div class="free"><div class="text">{lang.ADV_1}</div><div class="raquo">&raquo;</div></div><div class="join">{lang.ADV_2}</div></div><ul><li><span class="icon">&raquo;</span>{lang.ADV_3}</li><li><span class="icon">&raquo;</span>{lang.ADV_4}</li><li><span class="icon">&raquo;</span>{lang.ADV_5}</li></ul><div class="button-row"><a href="http://bodyspace.bodybuilding.com/community/signup?callback={callback}" class="bb-button-v2 small button-gradient-blue"><span>{lang.SIGN_UP}</span></a></div></div>',middleSection:'<div class="user-login"><form action="{login_action}" method="post"><input name="callback" value="{callback}" type="hidden"><h5>{lang.MEMBER_LOGIN}</h5><div class="login-inputs">{@if cond="\'{err_msg}\'.length > 0"} {>notLoggedError /} {/if}<span class="wmwrap" style="position:relative;display:block;"><label class="watermark">{lang.USERNAME_PLACEHOLDER}</label><input type="text" class="snifme" name="username" /></span><span class="wmwrap" style="position:relative;display:block;"><label class="watermark">{lang.PASSWORD_PLACEHOLDER}</label><input class="snifme enter-submit" type="password" name="password" /></span></div><div class="login-items"><div class="checkbox"><div class="input-checkbox-container"><input type="checkbox" name="rememberme" /></div><div class="text-item bb-gray7"><label for="rememberme" class="remember-me">{lang.REMEMBER_ME}</label></div></div><div class="right-item"><a href="#" class="bb-button-v2 small button-gradient-blue login-button"><span>{lang.LOG_IN}</span></a><div class="standard-tooltip interactive-sidebar tooltip-elements hide"><div class="text"></div><div class="standard-tooltip-button">OK</div></div><div class="standard-tooltip-arrow interactive-sidebar tooltip-elements hide"></div></div></div></form><ul class="user-tools"><li><a href="http://my.bodybuilding.com/login.php?do=lostpw">{lang.FORGOT_LOG_IN}</a></li></ul></div>',userActions:'<div class="user-actions"><ul><li><a href="http://bodyspace.bodybuilding.com">{lang.VIEW_ALL}</a></li></ul></div>',notLoggedError:'<div class="login-error">{err_msg}</div>',loadTemplates:function(){dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.notLoggedIn.topSection,"notLoggedTop"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.notLoggedIn.middleSection,"notLoggedMiddle"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.notLoggedIn.userActions,"notLoggedUserActions"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.notLoggedIn.notLoggedError,"notLoggedError"))}};BB.Data.Templates.RightSidebar.loggedIn={topSection:'{@if cond="{http}"}<div class="user-image"><a class="image" href="http://my.bodybuilding.com"><div class="image-fit"><img src="{profilePictureUrl}" alt="{userName}"></div></a><div class="edit">{lang.EDIT} &nbsp;<span></span></div><div class="menu hide">  <a href="http://my.bodybuilding.com/photos/view/type/profile" class="item">{lang.CHOOSE}</a><a href="http://my.bodybuilding.com/upload/agree/profile" class="item">{lang.UPLOAD_NEW}</a>{@if cond="{avatar_set}"}<a href="http://my.bodybuilding.com/upload/edit/details/type/profile/phid/{profilePic.photoId}" class="item">{lang.EDIT_INFO}</a><a href="http://my.bodybuilding.com/upload/edit/crop/type/profile/phid/{profilePic.photoId}" class="item">{lang.CROP_ROTATE}</a>{/if}    </div></div>{/if}',middleSection:'<div class="username"><a href="http://my.bodybuilding.com"><div class="text">{userName}</div></a></div><div class="stats"><div class="stat weight" data-update-key="weight"><span class="value bb-gray7 __dynamic-async-update__weight__">{stats.weight}</span> <span class="unit bb-gray6">{unitOfWeight}</span></div><div class="stat bodyfat" data-update-key="bodyfat"><span class="value bb-gray7 __dynamic-async-update__bodyfat__">{stats.bodyFatPercent}</span><span class="embed-unit bb-gray7">%</span> <span class="unit bb-gray6">{lang.BF}</span></div></div><div class="user-links"><ul><li><a href="http://my.bodybuilding.com"><span class="right-side-icon bodyspace"></span>{lang.MY_BODYSPACE}</a></li><li><a href="http://www.bodybuilding.com/store/orderstatus.htm"><span class="right-side-icon orders"></span>{lang.ORDERS}</a></li><li><a href="https://www.bodybuilding.com/store/account/wish-list.jsp"><span class="right-side-icon wish-list"></span>{lang.WISH_LIST}</a></li><li><a href="https://www.bodybuilding.com/store/commerce/cart.jsp"><span class="right-side-icon cart"></span>{lang.CART}</a></li><li class="last-item"><a href="http://bodyspace.bodybuilding.com/login/login.php?logout=true&callback={logoutcallback}"><span class="right-side-icon log-out"></span>{lang.LOG_OUT}</a></li></ul></div>',bottomSection:'<div class="user-links"><ul><li><a href="http://my.bodybuilding.com/alerts/{slug}?tab=notifications"><span class="right-side-icon notifications"></span>{lang.NOTIFICATIONS}{@if cond="\'{stats.unreadAlertsCount}\'.replace(\'+\',\'\') > 0"}<span class="number-badge">{stats.unreadAlertsCount}</span> {/if}</a></li><li><a href="http://my.bodybuilding.com/alerts/{slug}?tab=actionitems"><span class="right-side-icon action-items"></span>{lang.ACTION_ITEMS}{@if cond="\'{stats.actionItemCount}\'.replace(\'+\',\'\') > 0"}<span class="number-badge">{stats.actionItemCount}</span> {/if}</a></li><li><a href="http://my.bodybuilding.com/alerts/{slug}?tab=requests"><span class="right-side-icon requests"></span>{lang.REQUESTS}{@if cond="\'{stats.requestsCount}\'.replace(\'+\',\'\') > 0"}<span class="number-badge">{stats.requestsCount}</span> {/if}</a></li><li class="last-item"><a href="http://forum.bodybuilding.com/private.php"><span class="right-side-icon messages"></span>{lang.MESSAGES}{@if cond="\'{stats.unreadMessageCount}\'.replace(\'+\',\'\') > 0"}<span class="number-badge">{stats.unreadMessageCount}</span> {/if}</a></li></ul></div>',userActions:'<div class="user-actions">{@if cond="{http}"}<div class="right"><a href="http://my.bodybuilding.com">{lang.VIEW_ALL}</a></div>{/if}<div class="fit-status" data-update-key="fitStatus">{lang.UPDATE_FIT_STATUS}</div></div><div class="standard-tooltip interactive-sidebar user-tooltip-banned hide"><div class="text">{lang.ACCOUNT_BANNED}</div></div><div class="standard-tooltip-arrow interactive-sidebar user-tooltip-banned hide"></div><div class="standard-tooltip interactive-sidebar user-tooltip-inactive hide"><div class="text">{lang.ACCOUNT_NOT_ACTIVE}</div></div><div class="standard-tooltip-arrow interactive-sidebar user-tooltip-inactive hide"></div>',loadTemplates:function(){dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.loggedIn.topSection,"loggedInTop"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.loggedIn.middleSection,"loggedInMiddle"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.loggedIn.bottomSection,"loggedInBottom"));dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.loggedIn.userActions,"loggedUserActions"))}};BB.createNamespace("BB.UI.RightSidebar");BB.createNamespace("BB.Data.Strings.RightSidebar");BB.Data.Strings.RightSidebar={"en-us":{MONTH_0:"Jan",MONTH_1:"Feb",MONTH_2:"Mar",MONTH_3:"Apr",MONTH_4:"May",MONTH_5:"Jun",MONTH_6:"Jul",MONTH_7:"Aug",MONTH_8:"Sep",MONTH_9:"Oct",MONTH_10:"Nov",MONTH_11:"Dec",AM:"am",PM:"pm",LAST_UPDATE:"Last Update",LAST_UPDATE_MOTIVATION_LEVEL:"Last updated to {motivation_level} on",ADV_1:"Free",ADV_2:"Join Now",ADV_3:"Customized Content",ADV_4:"Massive Online Community",ADV_5:"Track Your Progress",ADV_6:"",YES:"Yes",NO:"No",CLOSE:"Close",CANCEL:"Cancel",SAVE:"Save",SIGN_UP:"Sign Up",MEMBER_LOGIN:"Member Login",USERNAME_PLACEHOLDER:"USERNAME / EMAIL",PASSWORD_PLACEHOLDER:"PASSWORD",REMEMBER_ME:"Remember Me",LOG_IN:"Log In",FORGOT_LOG_IN:"Forgot Login Info?",FAIL_LOGIN_NAME_AND_PASSWORD:"Please enter your Username / Email and Password.",FAIL_LOGIN_NAME:"Please enter your Username / Email.",FAIL_LOGIN_PASSWORD:"Please enter your Password.",FAIL_LOGIN_STRIKES:"Login incorrect, you have {STRIKES} tries remaining.",BODYSPACE_ACTIVITY:"BodySpace Activity",VIEW_ALL:"View All",EDIT:"Edit",NO_PHOTO:"No Photo",MY_BODYSPACE:"My BodySpace",ORDERS:"Orders",WISH_LIST:"Wish List",CART:"Cart",LOG_OUT:"Log Out",NOTIFICATIONS:"Notifications",ACTION_ITEMS:"Action Items",REQUESTS:"Requests",MESSAGES:"Messages",BODY_WEIGHT:"Body Weight",HEIGHT:"Height",UPDATE_FIT_STATUS:"Update Fit Status",CONFIRM_CLOSE_UNSAVED_CHANGES:"You have unsaved changes. Are you sure you want to close this form?",UPDATE_BODY_WEIGHT:"Update Your Body Weight",UPDATE_BODY_FAT:"Update Your Body Fat Percentage",UPDATE_HEIGHT:"Update Your Height",UPDATE_FIT_STATUS_AND_MOTIVATION:"Update Your Fit Status & Motivation Level",BODY_FAT:"Body Fat",BF:"BF",MOTIVATION_LEVEL:"Motivation Level",FIT_STATUS:"Fit Status",NO_FIT_STATUS:"You have not entered a Fit Status.",NO_MOTIVATION_LEVEL_00:"You have not entered a",NO_MOTIVATION_LEVEL_01:"Motivation Level.",PREVIOUS_MOTIVATION_LEVEL_SET:"Previous motivation level set",INVALID_VALUE_WEIGHT:"Weight may not be less than {MIN} {UNIT} or greater than {MAX} {UNIT}",INVALID_VALUE_FAT:"Body fat must be between 4% and 75%",CHARACTERS_REMAINING:"Characters remaining",LBS:"Lbs.",KG:"kg",CHOOSE:"Choose...",UPLOAD_NEW:"Upload New",EDIT_INFO:"Edit Info",CROP_ROTATE:"Crop & Rotate",ACCOUNT_BANNED:"Your account is banned",ACCOUNT_NOT_ACTIVE:"Your account is not activated",INVALID_CHARACTERS:'{stat} can only be numbers or "."',NO_UPDATES:"No Updates"}};BB.UI.RightSidebar=(function(){var z=jQuery,S=(window.location.protocol!=="https:"),d="en-us",I=0,k=(document.compatMode!=="CSS1Compat"&&/MSIE/.test(navigator.userAgent)&&(!(/MSIE 10\.0/.test(navigator.userAgent)))),A=(S)?"http:":"https:",V,J=A+"//api.bodybuilding.com/api-proxy/",c=J+"rightsidebar/getinfo?needsuser=1",P,O="#interactive-sidebar",Q,a,w="http://common.bbcomcdn.com/images/default-avatar/",s=function(X,ab){var aa,Z,Y;if(BB.Data.Strings.RightSidebar[d]){aa=BB.Data.Strings.RightSidebar[d][X]}else{aa=BB.Data.Strings.RightSidebar["en-us"][X]}if(typeof(ab)==="object"&&ab!==null){for(Y in ab){if(ab.hasOwnProperty(Y)){Z=new RegExp("{"+Y+"}","g");aa=aa.replace(Z,ab[Y])}}}return aa},H=function(X){return parseFloat(X).toString().replace(/\.([0-9]).*/,".$1").replace(/\.0/,"")},b=function(X){return(X*0.453592)},C=function(X){return(X*2.54)},W={initialized:false,options:null,renderTimer:null,userData:null,feedData:null,languageData:BB.Data.Strings.RightSidebar.en,submitStat:{weight:{message:function(){return s("UPDATE_BODY_WEIGHT")},statName:function(){return s("BODY_WEIGHT")},unitOfWeight:"Lbs.",urlSuffixSet:"stats/set",urlSuffixGet:"stats/get",type:"number",map_json_attr:"weight",self_refresh:true,default_save:true,validate:function(ad,Z){var ab,aa,X,Y,ac;if(Z===undefined){Z=ad.val()}ab=parseFloat(Z);if(P.user.unitOfMeasure==="metric"){aa=22.6;X=453.5;Y=s("KG")}else{aa=50;X=999.9;Y=s("LBS")}if(ab>=aa&&ab<=X){return true}else{if(k){alert(s("INVALID_VALUE_WEIGHT",{MIN:aa.toFixed(1),MAX:X.toFixed(1),UNIT:Y}))}else{ac=z(".tooltip-validation-error-elements");ac.find(".text").html(s("INVALID_VALUE_WEIGHT",{MIN:aa.toFixed(1),MAX:X.toFixed(1),UNIT:Y}));ac.removeClass("hide")}return false}}},bodyfat:{message:function(){return s("UPDATE_BODY_FAT")},statName:function(){return s("BODY_FAT")},unitOfWeight:"%",urlSuffixSet:"stats/set",urlSuffixGet:"stats/get",type:"number",map_json_attr:"bodyFatPercent",self_refresh:true,default_save:true,validate:function(ac,Y){var aa,Z=4,X=75,ab;if(Y===undefined){Y=ac.val()}aa=parseFloat(Y);if(aa>=Z&&aa<=X){return true}else{if(k){alert(s("INVALID_VALUE_FAT"))}else{ab=z(".tooltip-validation-error-elements");ab.find(".text").html(s("INVALID_VALUE_FAT"));ab.removeClass("hide")}return false}}},height:{message:function(){return s("UPDATE_HEIGHT")},statName:function(){return s("HEIGHT")},customCreate:"heightInput",customCreatePreProc:function(){},unitOfWeight:"",urlSuffixSet:"stats/set",urlSuffixGet:"stats/get",type:"select-height",map_json_attr:"height",self_refresh:true,default_save:true,validate:function(){return true}},fitStatus:{message:s("UPDATE_FIT_STATUS_AND_MOTIVATION"),customCreate:"fitStatusInput",customCreatePreProc:function(){if(P.user&&P.user.motivationLevel&&P.user.motivationLevel.level&&P.user.motivationLevel.level>0&&P.user.motivationLevel.timeStamp>0){this.lastMotivationUpdate=s("LAST_UPDATE_MOTIVATION_LEVEL",{motivation_level:(P.user.motivationLevel.level+"/10")});this.lastMotivationUpdateTimeStamp=N(G(P.user.motivationLevel.timeStamp))}else{this.lastMotivationUpdate="";this.lastMotivationUpdateTimeStamp=""}},map_json_attr:"fitStatus",urlSuffixSet:"fitstatus/set",urlSuffixGet:"fitstatus/get",type:"alpha",max:140,self_refresh:false,default_save:false,validate:function(){return true}},motivation:{urlSuffixSet:"motivation/set",urlSuffixGet:"motivation/get",self_refresh:false}},defaultOptions:{loggedIn:false},localStorageAvailable:false},e,F,l=1350588632516,v="//common.bbcomcdn.com/JSON/loc/",n=function(X){if(dust){if(!X){BB.Data.Templates.RightSidebar.notLoggedIn.loadTemplates()}else{BB.Data.Templates.RightSidebar.loggedIn.loadTemplates()}BB.Data.Templates.RightSidebar.Common.loadTemplates()}},K=function(){W.userData.login_action=V;dust.render("notLoggedTop",W.userData,function(Y,X){a.append(X)});dust.render("notLoggedMiddle",W.userData,function(Y,X){a.append(X)});if(S){dust.render("feedsWrapper",W.feedData,function(Y,X){a.append(X)})}dust.render("notLoggedUserActions",W.userData,function(Y,X){a.append(X);U()})},y=function(){dust.render("loggedInTop",W.userData,function(Y,X){a.append(X)});dust.render("loggedInMiddle",W.userData,function(Y,X){a.append(X)});dust.render("loggedInBottom",W.userData,function(Y,X){a.append(X)});if(S){dust.render("feedsWrapper",W.feedData,function(Y,X){a.append(X)})}dust.render("loggedUserActions",W.userData,function(Y,X){a.append(X);i()})},p=function(X){try{W.localStorageAvailable=("localStorage" in window&&window.localStorage!==null)}catch(Y){}W.options=z.extend({},W.defaultOptions,X);W.options.language=W.options.language||"en-us";x()},x=function(){var Y=(W.options.language==="en-us"),X;if(W.localStorageAvailable&&!Y){try{X=JSON.parse(window.localStorage.getItem("bb.rs-language-"+W.options.language));if(X){if(X.timeStamp===l){BB.Log.debug("Using stored language data");BB.Data.Strings.RightSidebar[W.options.language]=X;Y=true}else{BB.Log.debug("failed freshness test")}}}catch(Z){BB.Log.error(Z.message)}}if(Y){E();B()}else{BB.Log.debug("Querying server for language data");z.ajax({url:v+W.options.language+".js",dataType:"jsonp",success:z.noop})}},E=function(){W.languageData=BB.Data.Strings.RightSidebar[W.options.language]||BB.Data.Strings.RightSidebar["en-us"]},r=function(){var aa=window.location.search.substring(1).split("&"),Y,X=aa.length,Z,ab=0;for(Y=0;Y<X;Y++){Z=aa[Y].split("=");if(Z[0]==="s"&&Z[1]>ab){ab=parseInt(Z[1],10)}}return((ab>5)?5:ab)},g=function(){var X=window.location.href.split("?"),aa="",ac,Z,ab,Y;if(X.length>1&&X[1].length>0){ac=X[1].split("&");Z=ac.length;for(Y=0;Y<Z;Y++){ab=ac[Y].split("=");if(ab[0]!=="s"){if(aa===""){aa="?"+ac[Y]}else{aa=aa+"&"+ac[Y]}}}}return X[0]+aa},G=function(X){var Y=new Date(0);if(typeof(X)==="number"){Y.setUTCSeconds(X)}else{Y=X}return Y},N=function(Y){var aa=Y.getMinutes().toString(),X=Y.getHours(),Z=s("AM");if(aa.length===1){aa="0"+aa}if(X>=12){if(X!==12){X=X-12}Z=s("PM")}else{if(X===0){X=12}}return(s("MONTH_"+Y.getMonth())+" "+Y.getDate()+", "+Y.getFullYear()+" "+X+":"+aa+" "+Z)},f=function(){var Y=new RegExp("[\\?&]logout=([^&#]*)"),X=Y.exec(window.location.search);if(X!==null&&X!==undefined){z("body").append('<div style="display:none"><img src="//my.bodybuilding.com/login/my.php?a=true" alt="" height="0" width="0"/><img src="//www.teenbodybuilding.com/my.php?a=true" alt="" eight="0" width="0"/><img src="//www.bodybuilders.com/my.php?a=true" alt="" height="0" width="0"/></div>')}},B=function(){var af,aa,Z,ah,ae,ac,X,ag,ad,Y;P=P||{};W.userData=P.user||{};if(P.feed&&P.feed.feedEntityList){W.feedData=P.feed;ah=W.feedData.feedEntityList.length;try{for(aa=0;aa<ah;aa++){X=W.feedData.feedEntityList[aa];if(X!==undefined&&X!==null&&typeof(X.eventType)==="string"&&X.eventType.length>0){X.amount=0;switch(X.eventType){case"FITSTATUS":break;case"BODYFAT":if(X.oldBodyFat!==undefined&&X.oldBodyFat!==null){ac=H(X.oldBodyFat-X.newBodyFat);if(ac<0){ac=ac*-1;X.deltaVerb="a gain of "+ac+"%"}else{if(ac>0){X.deltaVerb="a loss of "+ac+"%"}else{X.deltaVerb="no change"}}X.deltaDays=Math.abs(Math.floor((G(X.newMeasurementDate)-G(X.oldMeasurementDate))/86400000).toString(10));if(X.deltaDays===1){X.deltaDays=X.deltaDays+" day"}else{X.deltaDays=X.deltaDays+" days"}X.oldBodyFat=H(X.oldBodyFat)}else{X.oldBodyFat=0;X.deltaVerb=""}X.newBodyFat=H(X.newBodyFat);if(typeof(X.permalink)==="string"&&X.permalink.length>0){X.linkURL=X.permalink}else{X.linkURL="http://bodyspace.bodybuilding.com/"+X.slug+"/more.php?section=progress"}break;case"PROGRESS_PHOTO":if(X.clazz==="com.bodybuilding.api.entity.feed.RollupEntity"){X.amount=X.events.length;X.plural="s"}else{X.amount="1";X.plural=""}break;case"PROFILE_PHOTO":break;case"WEIGHT_CHANGED":X.unit=(P.user&&P.user.unitOfMeasure==="metric")?"kg":"Lbs.";if(X.oldWeight!==undefined&&X.oldWeight!==null&&X.oldWeight>0&&X.oldMeasurementDate!==undefined&&X.oldMeasurementDate!==null&&X.oldMeasurementDate>0){ac=H(X.oldWeight-X.newWeight);if(ac<0){ac=ac*-1;if(X.unit==="kg"){Y=H(b(ac))+" kg"}else{Y=ac+((ac==1)?" Lb.":" Lbs.")}X.deltaVerb="a gain of "+Y}else{if(ac>0){if(X.unit==="kg"){Y=H(b(ac))+" kg"}else{Y=ac+((ac==1)?" Lb.":" Lbs.")}X.deltaVerb="a loss of "+Y}else{X.deltaVerb="no change"}}X.deltaDays=Math.abs(Math.floor((G(X.newMeasurementDate)-G(X.oldMeasurementDate))/86400000).toString(10));if(X.deltaDays===1){X.deltaDays=X.deltaDays+" day"}else{X.deltaDays=X.deltaDays+" days"}X.oldWeight=H(X.oldWeight)}else{X.oldWeight=0;X.deltaVerb=""}X.newWeight=H(X.newWeight);if(typeof(X.permalink)==="string"&&X.permalink.length>0){X.linkURL=X.permalink}else{X.linkURL="http://bodyspace.bodybuilding.com/"+X.slug+"/more.php?section=progress"}break;case"FRIEND":X.spellout=[];X.amount=0;if(X.clazz==="com.bodybuilding.api.entity.feed.RollupEntity"){ae=X.events.length;if(ae>2){X.amount=ae-2;if(X.amount>1){X.plural="s"}else{X.plural=""}}for(Z=0;Z<ae&&Z<2;Z++){X.spellout.push(X.events[Z].friendUser);if(ae>2){if(Z!==1){X.events[Z].friendUser.separator=", "}else{X.events[Z].friendUser.separator=""}}else{if(ae===2&&Z!==1){X.events[Z].friendUser.separator=" and "}else{X.events[Z].friendUser.separator=""}}}}else{X.friendUser.separator="";X.spellout.push(X.friendUser)}break;case"INSPIREDBY":break;case"BLOG":break;case"MOTIVATION_PROGRAM":case"PROGRAM_UPDATED":switch(X.programType){case"SUPPLEMENTS":X.eventType="SUPPLEMENTS_PROGRAM";break;case"NUTRITION":X.eventType="NUTRITION_PROGRAM";break;case"WORKOUT":X.eventType="WORKOUT_PROGRAM";break}case"NUTRITION_PROGRAM":case"SUPPLEMENTS_PROGRAM":case"WORKOUT_PROGRAM":break;case"BODYSTAT":X.spellout=[];X.amount=0;X.plural="";X.unit=(P.user&&P.user.unitOfMeasure==="metric")?"cm":"in.";if(X.clazz==="com.bodybuilding.api.entity.feed.RollupEntity"){ae=X.events.length;if(ae>1){X.amount=ae-1}if(X.amount>1){X.plural="s"}X.spellout.push(X.events[0])}else{X.spellout.push(X)}if(X.unit==="cm"){X.spellout[0].value=C(X.spellout[0].value)}X.spellout[0].value=H(X.spellout[0].value);if(X.spellout[0].oldValue&&X.spellout[0].oldValue>0&&X.spellout[0].oldMeasurementDate&&X.spellout[0].oldMeasurementDate>0){if(X.unit==="cm"){X.spellout[0].oldValue=C(X.spellout[0].oldValue)}Y=X.spellout[0].oldValue-X.spellout[0].value;ac=H(Y);if(ac<0){ac=ac*-1;X.spellout[0].deltaVerb=", a gain of "+ac+" "+X.unit}else{if(ac>0){X.spellout[0].deltaVerb=", a loss of "+ac+" "+X.unit}else{X.spellout[0].deltaVerb=" no change"}}if(typeof(X.spellout[0].permalink)==="string"&&X.spellout[0].permalink.length>0){X.spellout[0].linkURL=X.spellout[0].permalink}else{X.spellout[0].linkURL="http://bodyspace.bodybuilding.com/"+X.spellout[0].slug+"/more.php?section=progress"}X.spellout[0].deltaDays=Math.abs(Math.floor((G(X.spellout[0].measurementDate)-G(X.spellout[0].oldMeasurementDate))/86400000).toString(10));X.spellout[0].deltaDays=X.spellout[0].deltaDays+" day"+((X.spellout[0].deltaDays==1)?"":"s");X.spellout[0].deltaVerb=X.spellout[0].deltaVerb+" in "+X.spellout[0].deltaDays}break;case"GROUP_JOIN":if(typeof(X.permalink)==="string"&&X.permalink.length>0){X.groupUrl=X.permalink}break;case"GALLERY_PHOTO":X.plural="";X.amount=1;X.photosAddedLink="";if(X.clazz==="com.bodybuilding.api.entity.feed.RollupEntity"){ae=X.events.length;X.amount=ae;if(ae>1){X.plural="s";X.photosAddedLink="http://bodyspace.bodybuilding.com/photos/view-user-photos/s/"+X.slug}}if(X.photosAddedLink===""){if(typeof(X.permalink)==="string"&&X.permalink.length>0){X.photosAddedLink=X.permalink}else{X.photosAddedLink="http://bodyspace.bodybuilding.com/photos/view-user-photo/"+X.photoId}}break;case"GYM_JOIN":if(typeof(X.permalink)==="string"&&X.permalink.length>0){X.linkURL=X.permalink}else{X.linkURL="http://bodyspace.bodybuilding.com/networks/view/gym/"+X.gymId+"/name/"+X.gymName.toLowerCase().replace(/ /g,"-")+X.gymCity.toLowerCase().replace(/ /g,"-")+X.gymState.toLowerCase().replace(/ /g,"-")+X.gymCountry.toLowerCase().replace(/ /g,"-")}break;case"GOAL_CHANGED":if(typeof(X.permalink)==="string"&&X.permalink.length>0){X.linkURL=X.permalink}else{X.linkURL="http://bodyspace.bodybuilding.com/"+X.slug}break;case"CURRENT_SUPPLEMENT":case"REVIEWED_SUPPLEMENT":X.spellout=[];X.amount=0;if(X.clazz==="com.bodybuilding.api.entity.feed.RollupEntity"){ae=X.events.length;if(ae>1){X.amount=ae-1}if(X.amount>1){X.plural="s"}else{X.plural=""}X.spellout.push(X.events[0]);ag=X.events[0]}else{X.spellout.push(X);ag=X}if(typeof(ag.permalink)==="string"&&ag.permalink.length>0){ag.reviewUrl=ag.permalink}else{if(ag.productBrand&&ag.productName&&ag.productReviewId){ag.reviewUrl="http://reviews.bodybuilding.com/"+ag.productBrand.replace(/ /g,"_")+"/"+ag.productName.replace(/ /g,"_")+"/"+ag.slug+"/"+ag.productReviewId.toString()}else{ag.reviewUrl="http://reviews.bodybuilding.com"}}break;case"BODYGROUP":if(typeof(X.permalink)==="string"&&X.permalink.length>0){X.groupUrl=X.permalink}break;case"PERSONAL_VIDEO":if(typeof(X.permalink)==="string"&&X.permalink.length>0){X.videoUrlBodySpace=X.permalink}else{X.videoUrlBodySpace=X.profileUrl+"/more.php?section=videos&type=you&i="+X.videoId+"#"+X.videoId}break;case"MOTIVATION_LEVEL":if(typeof(X.permalink)==="string"&&X.permalink.length>0){X.linkURL=X.permalink}else{X.linkURL="http://bodyspace.bodybuilding.com/"+X.slug+"/motivationlevel.php"}break;default:}}}}catch(ab){BB.Log.error("Error Processing Feeds: "+ab.message);W.feedData={feedEntityList:[]}}}else{W.feedData={feedEntityList:[]}}af=r();if(af>0&&(P.user===undefined||P.user===null)){W.userData.err_msg=s("FAIL_LOGIN_STRIKES",{STRIKES:(5-af).toString(10)})}ad=R();if(typeof(ad)==="string"&&ad.length>0){W.userData.callback=ad}else{W.userData.callback=decodeURIComponent(BB.Util.Base64.encode(g()))}W.userData.lang=W.feedData.lang=W.languageData;W.initialized=true;n(W.options.loggedIn)},m=function(Z){var Y=z("#interactive-sidebar .standard-tooltip"),X=z("#interactive-sidebar .tooltip-elements .text");X.html(Z);e.removeClass("hide");Y.css({"margin-top":-(X.height()+87)})},j=function(ai){var ad=z(".user-login form"),Y=z("form#login-jsp-interactive-sidebar"),ak=z("form#login-jsp-interactive-sidebar input.login-field[type=text]"),af=z("form#login-jsp-interactive-sidebar input.login-field[type=password]"),Z=z("form#login-jsp-interactive-sidebar input[type=checkbox]"),ab=ad.find("input[name=username]"),ah=ad.find("input[name=password]"),ag=ad.find("input[name=rememberme]"),X=ah[0],ae=ad.find("input[name=password_md5]")[0],ac=ab.val().length,aa=ah.val().length,aj=null;if(ai!==null&&ai!==undefined){ai.preventDefault()}if(ac===0){if(aa===0){aj=s("FAIL_LOGIN_NAME_AND_PASSWORD")}else{aj=s("FAIL_LOGIN_NAME")}}else{if(aa===0){aj=s("FAIL_LOGIN_PASSWORD")}}if(aj!==null){if(k){alert(aj)}else{m(aj)}return}if(Y&&Y.length===1&&ak&&ak.length===1&&af&&af.length===1&&Z&&Z.length===1){ak.val(ab.val());af.val(ah.val());Z.attr("checked",ag.is(":checked"));Y.find("input[type=submit]").click()}else{BB.Util.md5.md5hashAuto(X,ae);ad.submit()}},U=function(){var Y=z(O+" form"),X=Y.find(".snifme");Y.append('<input name="do" value="login" type="hidden"><input name="password_md5" type="hidden" />');Y.find("a.login-button").bind("click",j);Y.find("input.enter-submit").bind("keyup",function(Z){if(Z.which===13){j();Z.preventDefault()}});e=z("#interactive-sidebar .tooltip-elements");F=z("#interactive-sidebar .tooltip-elements .standard-tooltip-button");F.bind("click",function(){e.addClass("hide")});Y.find("label.watermark").bind("click",function(){z(this).hide();z(this).parent().find("input").focus()});X.bind("blur",function(){if(z(this).val().length===0){z(this).parent().find("label").show()}});X.bind("focus",function(){z(this).parent().find("label").hide()})},u=function(Z,Y,X){z.ajax({url:J+Y.urlSuffixSet,data:Z,dataType:"jsonp",success:function(){if(Y.map_json_attr==="fitStatus"){P.user.fitStatus.content=Z.content;P.user.fitStatus.timeStamp=new Date()}else{P.user.stats[Y.map_json_attr]=Z.value}if(Y.self_refresh){X.removeClass("in-progress");X.html(H(Z.value))}},error:function(aa){if(Y.self_refresh){X.removeClass("in-progress");X.html(P.user.stats[Y.map_json_attr])}}})},h=false,M=function(X){var Y=z("body"),Z=z(window);if(P.user&&P.user.js_status==="active"){X.bind("click",function(an){if(z(".interactive-sidebar-update-stats-modal-popup").length>0){return}var au,am=z(this),ai=am.attr("data-update-key"),aj=W.submitStat[ai],ad=Z.scrollTop(),ab,at=550,ap=250,ar,aq,al,ae=function(){var aw=ar.val(),av=z(".__dynamic-async-update__"+ai+"__"),ax={userid:P.user.userId,token:BB.Util.cookie.get("v1guid").value};if(aj.validate(ar,aw)){au("void");if(av&&av.length>0){av.html("");av.addClass("in-progress");ax.needsuser=1;ax.stat=ai;ax.value=aw.replace(/^[0]+/,"");ax.unit=P.user.unitOfMeasure}else{if(aw&&aw.length>0){ax.needsuser=1;ax.content=aw}}if(ax.needsuser===1){u(ax,aj,av)}if(ai==="fitStatus"){aw=z(".interactive-sidebar-update-stats-modal-popup .motivation-graph").attr("data-set");if(aw!==undefined&&aw>0){ax={userid:P.user.userId,needsuser:1,level:parseInt(aw,10),token:BB.Util.cookie.get("v1guid").value};u(ax,W.submitStat.motivation);if(P.user.motivationLevel===undefined){P.user.motivationLevel={}}P.user.motivationLevel.level=parseInt(aw,10);P.user.motivationLevel.timeStamp=new Date()}}}else{ar.focus().select()}},ao,ac=function(av,aB){var ax=Z.width(),aw=Z.height(),az,aA,ay=z(".interactive-sidebar-update-stats-modal-popup");ao.height(aw+50);ao.width(ax);az=ax/2-(at/2);aA=aw/2-(ap/2);if(k){aA=z("body").scrollTop()+aA;ay.css({left:az,top:aA,width:at,height:ap});ay.fadeIn(aB)}else{if(av){ay.animate({left:az,top:aA},aB)}else{ay.animate({width:at,height:ap,left:az,top:aA},aB)}}},ah=true,af=function(){if(ah){setTimeout(function(){ac(true);ah=true},300);ah=false}},ak=function(aw,av){var az=z(".tooltip-close-confirm-elements"),ay=20,aA=-130,ax;if(ar!==undefined&&ar.length>0){ax=ar.val();if((ax.length>0&&aj.defaultValue.toString()!==ax)||(ai==="fitStatus"&&z(".motivation-graph").attr("data-set")!==undefined)){if(typeof(aw)==="string"||av===undefined){av=z(".interactive-sidebar-update-stats-modal .interactive-sidebar-modal-close")}else{if(av.hasClass("cancel-link")){ay=25;aA=-130}}if(k){return !confirm(s("CONFIRM_CLOSE_UNSAVED_CHANGES"))}else{az.css({top:av.position().top+ay,left:av.position().left+aA});az.removeClass("hide");h=true;return true}}else{return false}}else{return false}},ag=function(av){if(av.which===27){av.preventDefault();au("esc");h=false}},aa=function(){if(ar){ar.blur()}};an.stopPropagation();au=function(av){if(av!=="void"){if(!(z(".tooltip-close-confirm-elements").hasClass("hide"))||ak(av,z(this))){return}}z(window).unbind("resize",af);z("body").unbind("keydown",ag);z("body").unbind("click",aa);if(k){ab.fadeOut(function(){ab.remove();ab=undefined;ao.remove();ao=undefined})}else{ad=Z.scrollTop();z(".interactive-sidebar-update-stats-modal-popup").animate({width:1,height:1,left:am.offset().left+(am.width()/2),top:am.offset().top-ad+(am.height()/2)},function(){ab.remove();ab=undefined;ao.remove();ao=undefined})}};aj.defaultValue=P.user.stats[aj.map_json_attr]||0;aj.lang=W.languageData;aj.quirks_mode=k;dust.render("statUpdate",aj,function(aA,aB){var ay,ax,av,aw,aE,aD,aC=function(){ax.removeClass("button-gradient-grey").removeClass("inactive").addClass("button-gradient-blue").bind("click",ae)},az=function(){ax.addClass("button-gradient-grey").addClass("inactive").removeClass("button-gradient-blue").unbind("click",ae)};ab=z(aB);if(typeof(aj.customCreate)==="string"&&aj.customCreate.length>0){ay=ab.find(".input");ay.html("");aj.customCreatePreProc();dust.render(aj.customCreate,aj,function(aI,aG){var aK=z(aG),aF=10,aH=aK.find("li"),aJ=aK.find(".motivation-graph");switch(ai){case"fitStatus":ab.addClass("fit-status");ap=320;aK.appendTo(ay);aJ.bind("hover",null,function(){aH.removeClass("selected-candidate")});aH.each(function(aM,aL){z(aL).bind("hover",function(){var aN=z(this).find(".motiv-item").attr("class").replace("motiv-item motivation-",""),aO=10;aH.each(function(aQ,aP){if(aO<=aN){z(aP).addClass("selected-candidate")}else{z(aP).removeClass("selected-candidate")}aO--})});z(aL).bind("click",function(){var aN=z(this).find(".motiv-item").attr("class").replace("motiv-item motivation-",""),aO=10;aJ.attr("data-set",aN);if(ax.hasClass("inactive")){aC()}aH.each(function(aQ,aP){if(aO<=aN){z(aP).addClass("selected")}else{z(aP).removeClass("selected")}aO--})});aF--});break;case"height":aK.appendTo(ay);break;default:aK.appendTo(ay)}})}if(k){ab.addClass("hide")}else{ab.width(1);ab.height(1);ab.offset({left:am.offset().left+(am.width()/2),top:am.offset().top-ad+(am.height()/2)})}ao=z("<div/>",{id:"bodyspace-update-stats-modal-mask",style:"height:"+Y.height()+"px;width:"+Y.width()+"px;"}).appendTo(Y);ab.appendTo(Y);ar=z(".interactive-sidebar-update-stats-modal-popup .input #data-input");ax=z(".bodyspace-modal-footer .button span#submitStat");z(".interactive-sidebar.tooltip-close-confirm-elements .standard-tooltip-button.confirm").bind("click",function(){au("void")});if(ar!==undefined&&ar.length>0){if(aj.type==="number"){ar.focus().select();ar.bind("paste",function(aF){aF.preventDefault()});ar.bind("keyup",function(aH){var aF=ar.val(),aJ=aF.replace(/[^0-9\.]/g,""),aG=aF.replace(/[^\.]/g,""),aI;if(k){aI=z(".tooltip-validation-error-elements-quirks")}else{aI=z(".tooltip-validation-error-elements")}aI.addClass("hide");switch(aH.which){case 13:ae();break;case 27:aH.preventDefault();break;default:if(aJ.length<aF.length||aG.length>1){az();aI.find(".text").html(s("INVALID_CHARACTERS",{stat:aj.statName}));aI.removeClass("hide")}else{if(ax.hasClass("inactive")){aC();aI.addClass("hide")}}break}});ac()}else{if(aj.type==="alpha"){if(aj.max!==undefined&&aj.max>0){av=z(".interactive-sidebar-update-stats-modal-popup .input .counter span");aE=function(aH){var aG,aI=ar.val(),aF=aI.length;if(aF>aj.max){aF=aj.max;aG=aI.substring(0,aF);ar.val(aG)}av.html((aj.max-aF).toString(10));if(aF>0){if(ax.hasClass("inactive")){aC()}}else{if(z(".motivation-graph").attr("data-set")===undefined){az()}}};aD=ar.parent().find("label");if(typeof(P.user.fitStatus)==="object"&&P.user.fitStatus!==null&&P.user.fitStatus.timeStamp>0){aD.text(P.user.fitStatus.content);aD.html(aD.html()+"<br/>"+s("LAST_UPDATE")+": "+N(G(P.user.fitStatus.timeStamp)))}ar.bind("paste",function(){aC()});ar.bind("paste",aE);ar.bind("keyup",aE);ar.bind("blur",function(){if(ar.val().length===0){aD.show()}else{aD.hide()}});ar.bind("focus",function(){aD.hide()});aD.bind("click",function(aF){aD.hide();ar.focus();aF.stopPropagation()})}}ac(false,function(){ar.blur()})}}if(aj.default_save&&ar!==undefined&&ar.length>0&&parseInt(ar.val())>0){z("#submitStat").bind("click",ae)}else{az()}z(".interactive-sidebar-modal-close, .cancel-link").bind("click",au);z(window).bind("resize",af);z("body").bind("keydown",ag);z("body").bind("click",aa);ar.bind("click",function(aF){aF.stopPropagation()})})})}else{X.bind("click",function(){var af=z(this),ad,ac,aa=af.attr("data-update-key"),ae=W.submitStat[aa],ab;if(k){if(P.user&&P.user.js_status==="banned"){alert(s("ACCOUNT_BANNED"))}else{alert(s("ACCOUNT_NOT_ACTIVE"))}}else{if(P.user&&P.user.js_status==="banned"){ad=z(".interactive-sidebar.user-tooltip-banned");ac=z(".standard-tooltip-arrow.interactive-sidebar.user-tooltip-banned");ab=z(".standard-tooltip.interactive-sidebar.user-tooltip-banned")}else{ad=z(".interactive-sidebar.user-tooltip-inactive");ac=z(".standard-tooltip-arrow.interactive-sidebar.user-tooltip-inactive");ab=z(".standard-tooltip.interactive-sidebar.user-tooltip-inactive")}if(typeof(ad)==="object"&&ad!==null&&ad.length>0){if(aa==="fitStatus"){ad.addClass("standard-tooltip-top");ac.css({top:af.position().top+af.height()+7,left:1});ab.css({top:af.position().top-af.height()-ab.height()-5,left:1})}else{ad.removeClass("standard-tooltip-top");ad.css({top:af.position().top+af.height()+7,left:1})}ac.css({"margin-left":af.position().left+(af.width()/2)});ad.removeClass("hide");h=true}}})}},i=function(){var X=z(O+" .stat.weight, "+O+" .stat.bodyfat, "+O+" .fit-status"),ab=z(O+" .user-image .menu"),Z=ab.width(),aa=ab.height(),Y=false;X.each(function(){M(z(this))});z(O+" .user-image .edit").bind("click",function(){if(ab.hasClass("hide")){ab.height(1);ab.width(1);ab.removeClass("hide");ab.animate({width:Z,height:aa});Y=true}});z("body").bind("click",function(){var ad=z(".tooltip-close-confirm-elements, .user-tooltip-banned, .user-tooltip-inactive"),ac;if(h){h=false}else{if(ad&&ad.length>0){ad.addClass("hide");ac=z(".interactive-sidebar-update-stats-modal-popup .input #data-input");if(ac!==undefined&&ac!==null&&ac.length>0){ac.focus().select()}}}if(Y){Y=false}else{if(!ab.hasClass("hide")){ab.animate({width:1,height:1},function(){ab.addClass("hide")});Y=false}}})},D=function(X){if(W.options.loggedIn){y()}else{K()}},L=function(){var X=0;if(W.initialized){D()}else{W.renderTimer=setInterval(function(){if(W.initialized){clearInterval(W.renderTimer);D()}else{X++;if(X>40){clearInterval(W.renderTimer)}}},250)}},T,q=function(X){if(I<5){Q.addClass("in-progress");setTimeout(T,200);I++}else{Q.removeClass("in-progress");if(P!==null&&P!==undefined){P.user={};if(!(P.feed&&P.feed.feedEntityList)){P.feed={feedEntityList:[]}}}else{P={feed:{feedEntityList:[]},user:{}}}p({language:d,loggedIn:false});L()}},o=function(){var Y,ac,ab,X,Z,aa;if(BB.Util.cookie.get("v1guid").name!==undefined&&P!==null&&P!==undefined&&P.user!==undefined&&P.user!==null){Q.removeClass("in-progress");Y=(P.unreadAlertsCount>99)?"99+":P.unreadAlertsCount;ac=(P.actionItemCount>99)?"99+":P.actionItemCount;ab=(P.requestsCount>99)?"99+":P.requestsCount;X=(P.unreadMessageCount>99)?"99+":P.unreadMessageCount;if(P.weight===undefined||P.weight===null||P.weight<1){Z="--"}else{Z=H(P.weight)}if(P.bodyFatPercent===undefined||P.bodyFatPercent===null||P.bodyFatPercent<1){aa="--"}else{aa=H(P.bodyFatPercent)}if(window.location.host==="www.teenbodybuilding.com"||window.location.host==="www.bodybuilders.com"){P.user.logoutcallback=BB.Util.Base64.encode("http://www.bodybuilding.com")}else{P.user.logoutcallback=P.user.callback}if(P.user.profilePictureUrl===undefined||P.user.profilePictureUrl===null||P.user.profilePictureUrl.length<25){switch(P.user.gender){case"his":P.user.profilePictureUrl=w+"Avatar-Male-Default_145x145.jpg";break;case"her":P.user.profilePictureUrl=w+"Avatar-Female-Default_145x145.jpg";break;default:P.user.profilePictureUrl=w+"Avatar-Unisex-Default_145x145.jpg"}P.user.avatar_set=false}else{P.user.avatar_set=true}if(P.user.groupId===2){P.user.js_status="active"}else{if(P.user.groupId===8){P.user.js_status="banned"}else{if(P.user.groupId===3||P.user.groupId===4){P.user.js_status="inactive"}else{P.user.js_status="active"}}}P.user.stats={weight:Z,bodyFatPercent:aa,unreadAlertsCount:Y,actionItemCount:ac,requestsCount:ab,unreadMessageCount:X};P.user.unitOfWeight=(P.user.unitOfMeasure==="metric")?"kg":"Lbs.";P.user.unitOfLength=(P.user.unitOfMeasure==="metric")?"cm.":"in.";W.submitStat.weight.unitOfWeight=P.user.unitOfWeight;P.user.http=S;P.user.quirks_mode=k;p({language:d,loggedIn:true});L()}else{Q.removeClass("in-progress");p({language:d,loggedIn:false});L()}},t=function(X){var Y;if(typeof(X)==="string"){Y=JSON.parse(X)}else{Y=X}if(typeof(Y)==="object"&&Y!==null){P=Y.data;o()}else{q()}},R=function(){var Y="callback",X="[\\?&]"+Y+"=([^&#]*)",aa=new RegExp(X),Z=aa.exec(window.location.search);if(Z===null){return null}else{return decodeURIComponent(Z[1].replace(/\+/g," "))}};T=function(){if(/MSIE/.test(navigator.userAgent)){z.ajax({url:c,data:{token:BB.Util.cookie.get("v1guid").value},dataType:"jsonp",success:function(X){t(X)},error:q})}else{z.ajax({type:"POST",url:c,dataType:"json",data:{token:BB.Util.cookie.get("v1guid").value},success:function(X){t(X)},error:q})}};return{create:function(Y,aa,Z,X){V=X||"http://bodyspace.bodybuilding.com/login/login.php";Q=(typeof(Z)==="string"&&Z.length>0)?z(Z):z("#__interactive-sidebar");if(typeof(Q)==="object"&&Q!==null&&Q.length>0){Q.addClass("right-side-bar-global-container");Q.empty();if(!S){Q.addClass("right-side-bar-https")}a=z("<div/>",{id:"interactive-sidebar"});a.appendTo(Q);d=aa||"en-us";if(typeof(Y)==="object"&&Y!==null){P=Y.data;o()}else{I=0;T()}}},initializeLanguage:function(X,Y){d=Y;BB.Data.Strings.RightSidebar[Y]=X;if(W.localStorageAvailable){X.timeStamp=l;window.localStorage.setItem("bb.rs-language-"+Y,JSON.stringify(X))}E();o()},addStat:function(Y,X){if(W&&W.submitStat){W.submitStat[Y]=X}},addTemplate:function(X,Y){BB.Data.Templates.RightSidebar.Common.Dynamic[X]=Y;if(dust!==undefined&&dust!==null){dust.loadSource(dust.compile(BB.Data.Templates.RightSidebar.Common.Dynamic[X],X))}},bindModal:function(X){M(X)}}}());