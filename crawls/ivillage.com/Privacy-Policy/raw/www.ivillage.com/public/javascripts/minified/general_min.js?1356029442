(function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase();}},_create:function(){var d=this.options,b=this;this.running=0;this.element.addClass("ui-accordion ui-widget ui-helper-reset");if(this.element[0].nodeName=="UL"){this.element.children("li").addClass("ui-accordion-li-fix");}this.headers=this.element.find(d.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){a(this).addClass("ui-state-hover");}).bind("mouseleave.accordion",function(){a(this).removeClass("ui-state-hover");}).bind("focus.accordion",function(){a(this).addClass("ui-state-focus");}).bind("blur.accordion",function(){a(this).removeClass("ui-state-focus");});this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(d.navigation){var c=this.element.find("a").filter(d.navigationFilter);if(c.length){var e=c.closest(".ui-accordion-header");if(e.length){this.active=e;}else{this.active=c.closest(".ui-accordion-content").prev();}}}this.active=this._findActive(this.active||d.active).toggleClass("ui-state-default").toggleClass("ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");this.active.next().addClass("ui-accordion-content-active");this._createIcons();if(a.browser.msie){this.element.find("a").css("zoom","1");}this.resize();this.element.attr("role","tablist");this.headers.attr("role","tab").bind("keydown",function(f){return b._keydown(f);}).next().attr("role","tabpanel");this.headers.not(this.active||"").attr("aria-expanded","false").attr("tabIndex","-1").next().hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex","0");}else{this.active.attr("aria-expanded","true").attr("tabIndex","0");}if(!a.browser.safari){this.headers.find("a").attr("tabIndex","-1");}if(d.event){this.headers.bind((d.event)+".accordion",function(f){b._clickHandler.call(b,f,this);f.preventDefault();});}},_createIcons:function(){var b=this.options;if(b.icons){a("<span/>").addClass("ui-icon "+b.icons.header).prependTo(this.headers);this.active.find(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected);this.element.addClass("ui-accordion-icons");}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons");},destroy:function(){var c=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role").unbind(".accordion").removeData("accordion");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabindex");this.headers.find("a").removeAttr("tabindex");this._destroyIcons();var b=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active");if(c.autoHeight||c.fillHeight){b.css("height","");}return this;},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);if(b=="active"){this.activate(c);}if(b=="icons"){this._destroyIcons();if(c){this._createIcons();}}},_keydown:function(e){var g=this.options,f=a.ui.keyCode;if(g.disabled||e.altKey||e.ctrlKey){return;}var d=this.headers.length;var b=this.headers.index(e.target);var c=false;switch(e.keyCode){case f.RIGHT:case f.DOWN:c=this.headers[(b+1)%d];break;case f.LEFT:case f.UP:c=this.headers[(b-1+d)%d];break;case f.SPACE:case f.ENTER:this._clickHandler({target:e.target},e.target);e.preventDefault();}if(c){a(e.target).attr("tabIndex","-1");a(c).attr("tabIndex","0");c.focus();return false;}return true;},resize:function(){var d=this.options,c;if(d.fillSpace){if(a.browser.msie){var b=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden");}c=this.element.parent().height();if(a.browser.msie){this.element.parent().css("overflow",b);}this.headers.each(function(){c-=a(this).outerHeight(true);});this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()));}).css("overflow","auto");}else{if(d.autoHeight){c=0;this.headers.next().each(function(){c=Math.max(c,a(this).height());}).height(c);}}return this;},activate:function(b){this.options.active=b;var c=this._findActive(b)[0];this._clickHandler({target:c},c);return this;},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===false?a([]):this.headers.filter(":eq(0)");},_clickHandler:function(b,f){var d=this.options;if(d.disabled){return;}if(!b.target){if(!d.collapsible){return;}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header);this.active.next().addClass("ui-accordion-content-active");var h=this.active.next(),e={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:h},c=(this.active=a([]));this._toggle(c,h,e);return;}var g=a(b.currentTarget||f);var i=g[0]==this.active[0];d.active=d.collapsible&&i?false:a(".ui-accordion-header",this.element).index(g);if(this.running||(!d.collapsible&&i)){return;}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header);if(!i){g.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected);g.next().addClass("ui-accordion-content-active");}var c=g.next(),h=this.active.next(),e={options:d,newHeader:i&&d.collapsible?a([]):g,oldHeader:this.active,newContent:i&&d.collapsible?a([]):c,oldContent:h},j=this.headers.index(this.active[0])>this.headers.index(g[0]);this.active=i?a([]):g;this._toggle(c,h,e,i,j);return;},_toggle:function(b,i,g,j,k){var d=this.options,m=this;this.toShow=b;this.toHide=i;this.data=g;var c=function(){if(!m){return;}return m._completed.apply(m,arguments);};this._trigger("changestart",null,this.data);this.running=i.size()===0?b.size():i.size();if(d.animated){var f={};if(d.collapsible&&j){f={toShow:a([]),toHide:i,complete:c,down:k,autoHeight:d.autoHeight||d.fillSpace};}else{f={toShow:b,toHide:i,complete:c,down:k,autoHeight:d.autoHeight||d.fillSpace};}if(!d.proxied){d.proxied=d.animated;}if(!d.proxiedDuration){d.proxiedDuration=d.duration;}d.animated=a.isFunction(d.proxied)?d.proxied(f):d.proxied;d.duration=a.isFunction(d.proxiedDuration)?d.proxiedDuration(f):d.proxiedDuration;var l=a.ui.accordion.animations,e=d.duration,h=d.animated;if(h&&!l[h]&&!a.easing[h]){h="slide";}if(!l[h]){l[h]=function(n){this.slide(n,{easing:h,duration:e||700});};}l[h](f);}else{if(d.collapsible&&j){b.toggle();}else{i.hide();b.show();}c(true);}i.prev().attr("aria-expanded","false").attr("tabIndex","-1").blur();b.prev().attr("aria-expanded","true").attr("tabIndex","0").focus();},_completed:function(b){var c=this.options;this.running=b?0:--this.running;if(this.running){return;}if(c.clearStyle){this.toShow.add(this.toHide).css({height:"",overflow:""});}this.toHide.removeClass("ui-accordion-content-active");this._trigger("change",null,this.data);}});a.extend(a.ui.accordion,{version:"1.8rc3",animations:{slide:function(j,h){j=a.extend({easing:"swing",duration:300},j,h);if(!j.toHide.size()){j.toShow.animate({height:"show"},j);return;}if(!j.toShow.size()){j.toHide.animate({height:"hide"},j);return;}var c=j.toShow.css("overflow"),g=0,d={},f={},e=["height","paddingTop","paddingBottom"],b;var i=j.toShow;b=i[0].style.width;i.width(parseInt(i.parent().width(),10)-parseInt(i.css("paddingLeft"),10)-parseInt(i.css("paddingRight"),10)-(parseInt(i.css("borderLeftWidth"),10)||0)-(parseInt(i.css("borderRightWidth"),10)||0));a.each(e,function(k,m){f[m]="hide";var l=(""+a.css(j.toShow[0],m)).match(/^([\d+-.]+)(.*)$/);d[m]={value:l[1],unit:l[2]||"px"};});j.toShow.css({height:0,overflow:"hidden"}).show();j.toHide.filter(":hidden").each(j.complete).end().filter(":visible").animate(f,{step:function(k,l){if(l.prop=="height"){g=(l.end-l.start===0)?0:(l.now-l.start)/(l.end-l.start);}j.toShow[0].style[l.prop]=(g*d[l.prop].value)+d[l.prop].unit;},duration:j.duration,easing:j.easing,complete:function(){if(!j.autoHeight){j.toShow.css("height","");}j.toShow.css("width",b);j.toShow.css({overflow:c});j.complete();}});},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1000:200});}}});})(jQuery);(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(c){return b._mouseDown(c);}).bind("click."+this.widgetName,function(c){if(b._preventClickEvent){b._preventClickEvent=false;c.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);},_mouseDown:function(d){d.originalEvent=d.originalEvent||{};if(d.originalEvent.mouseHandled){return;}(this._mouseStarted&&this._mouseUp(d));this._mouseDownEvent=d;var c=this,e=(d.which==1),b=(typeof this.options.cancel=="string"?a(d.target).parents().add(d.target).filter(this.options.cancel).length:false);if(!e||b||!this._mouseCapture(d)){return true;}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true;},this.options.delay);}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=(this._mouseStart(d)!==false);if(!this._mouseStarted){d.preventDefault();return true;}}this._mouseMoveDelegate=function(f){return c._mouseMove(f);};this._mouseUpDelegate=function(f){return c._mouseUp(f);};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);(a.browser.safari||d.preventDefault());d.originalEvent.mouseHandled=true;return true;},_mouseMove:function(b){if(a.browser.msie&&!b.button){return this._mouseUp(b);}if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault();}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,b)!==false);(this._mouseStarted?this._mouseDrag(b):this._mouseUp(b));}return !this._mouseStarted;},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=(b.target==this._mouseDownEvent.target);this._mouseStop(b);}return false;},_mouseDistanceMet:function(b){return(Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance);},_mouseDelayMet:function(b){return this.mouseDelayMet;},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return true;}});})(jQuery);(function(b){var a=5;b.widget("ui.slider",b.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var c=this,d=this.options;this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");if(d.disabled){this.element.addClass("ui-slider-disabled ui-disabled");}this.range=b([]);if(d.range){if(d.range===true){this.range=b("<div></div>");if(!d.values){d.values=[this._valueMin(),this._valueMin()];}if(d.values.length&&d.values.length!=2){d.values=[d.values[0],d.values[0]];}}else{this.range=b("<div></div>");}this.range.appendTo(this.element).addClass("ui-slider-range");if(d.range=="min"||d.range=="max"){this.range.addClass("ui-slider-range-"+d.range);}this.range.addClass("ui-widget-header");}if(b(".ui-slider-handle",this.element).length==0){b('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle");}if(d.values&&d.values.length){while(b(".ui-slider-handle",this.element).length<d.values.length){b('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle");}}this.handles=b(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(e){e.preventDefault();}).hover(function(){if(!d.disabled){b(this).addClass("ui-state-hover");}},function(){b(this).removeClass("ui-state-hover");}).focus(function(){if(!d.disabled){b(".ui-slider .ui-state-focus").removeClass("ui-state-focus");b(this).addClass("ui-state-focus");}else{b(this).blur();}}).blur(function(){b(this).removeClass("ui-state-focus");});this.handles.each(function(e){b(this).data("index.ui-slider-handle",e);});this.handles.keydown(function(j){var g=true;var f=b(this).data("index.ui-slider-handle");if(c.options.disabled){return;}switch(j.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:g=false;if(!c._keySliding){c._keySliding=true;b(this).addClass("ui-state-active");c._start(j,f);}break;}var h,e,i=c._step();if(c.options.values&&c.options.values.length){h=e=c.values(f);}else{h=e=c.value();}switch(j.keyCode){case b.ui.keyCode.HOME:e=c._valueMin();break;case b.ui.keyCode.END:e=c._valueMax();break;case b.ui.keyCode.PAGE_UP:e=h+((c._valueMax()-c._valueMin())/a);break;case b.ui.keyCode.PAGE_DOWN:e=h-((c._valueMax()-c._valueMin())/a);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(h==c._valueMax()){return;}e=h+i;break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(h==c._valueMin()){return;}e=h-i;break;}c._slide(j,f,e);return g;}).keyup(function(f){var e=b(this).data("index.ui-slider-handle");if(c._keySliding){c._stop(f,e);c._change(f,e);c._keySliding=false;b(this).removeClass("ui-state-active");}});this._refreshValue();this._animateOff=false;},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this;},_mouseCapture:function(e){var f=this.options;if(f.disabled){return false;}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();var i={x:e.pageX,y:e.pageY};var k=this._normValueFromMouse(i);var d=this._valueMax()-this._valueMin()+1,g;var l=this,j;this.handles.each(function(m){var n=Math.abs(k-l.values(m));if(d>n){d=n;g=b(this);j=m;}});if(f.range==true&&this.values(1)==f.min){g=b(this.handles[++j]);}this._start(e,j);this._mouseSliding=true;l._handleIndex=j;g.addClass("ui-state-active").focus();var h=g.offset();var c=!b(e.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=c?{left:0,top:0}:{left:e.pageX-h.left-(g.width()/2),top:e.pageY-h.top-(g.height()/2)-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)};k=this._normValueFromMouse(i);this._slide(e,j,k);this._animateOff=true;return true;},_mouseStart:function(c){return true;},_mouseDrag:function(e){var c={x:e.pageX,y:e.pageY};var d=this._normValueFromMouse(c);this._slide(e,this._handleIndex,d);return false;},_mouseStop:function(c){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(c,this._handleIndex);this._change(c,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false;},_detectOrientation:function(){this.orientation=this.options.orientation=="vertical"?"vertical":"horizontal";},_normValueFromMouse:function(e){var d,i;if("horizontal"==this.orientation){d=this.elementSize.width;i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0);}else{d=this.elementSize.height;i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);}var g=(i/d);if(g>1){g=1;}if(g<0){g=0;}if("vertical"==this.orientation){g=1-g;}var f=this._valueMax()-this._valueMin(),j=g*f,c=j%this.options.step,h=this._valueMin()+j-c;if(c>(this.options.step/2)){h+=this.options.step;}return parseFloat(h.toFixed(5));},_start:function(e,d){var c={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(d);c.values=this.values();}this._trigger("start",e,c);},_slide:function(g,f,e){var h=this.handles[f];if(this.options.values&&this.options.values.length){var c=this.values(f?0:1);if((this.options.values.length==2&&this.options.range===true)&&((f==0&&e>c)||(f==1&&e<c))){e=c;}if(e!=this.values(f)){var d=this.values();d[f]=e;var i=this._trigger("slide",g,{handle:this.handles[f],value:e,values:d});var c=this.values(f?0:1);if(i!==false){this.values(f,e,true);}}}else{if(e!=this.value()){var i=this._trigger("slide",g,{handle:this.handles[f],value:e});if(i!==false){this.value(e);}}}},_stop:function(e,d){var c={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(d);c.values=this.values();}this._trigger("stop",e,c);},_change:function(e,d){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(d);c.values=this.values();}this._trigger("change",e,c);}},value:function(c){if(arguments.length){this.options.value=this._trimValue(c);this._refreshValue();this._change(null,0);}return this._value();},values:function(e,h){if(arguments.length>1){this.options.values[e]=this._trimValue(h);this._refreshValue();this._change(null,e);}if(arguments.length){if(b.isArray(arguments[0])){var g=this.options.values,d=arguments[0];for(var f=0,c=g.length;f<c;f++){g[f]=this._trimValue(d[f]);this._change(null,f);}this._refreshValue();}else{if(this.options.values&&this.options.values.length){return this._values(e);}else{return this.value();}}}else{return this._values();}},_setOption:function(c,d){b.Widget.prototype._setOption.apply(this,arguments);switch(c){case"disabled":if(d){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled");}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled");}case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();this._animateOff=false;break;}},_step:function(){var c=this.options.step;return c;},_value:function(){var c=this.options.value;c=this._trimValue(c);return c;},_values:function(d){if(arguments.length){var g=this.options.values[d];g=this._trimValue(g);return g;}else{var f=this.options.values.slice();for(var e=0,c=f.length;e<c;e++){f[e]=this._trimValue(f[e]);}return f;}},_trimValue:function(c){if(c<this._valueMin()){c=this._valueMin();}if(c>this._valueMax()){c=this._valueMax();}return c;},_valueMin:function(){var c=this.options.min;return c;},_valueMax:function(){var c=this.options.max;return c;},_refreshValue:function(){var g=this.options.range,e=this.options,m=this;var d=(!this._animateOff)?e.animate:false;if(this.options.values&&this.options.values.length){var j,i;this.handles.each(function(q,o){var p=(m.values(q)-m._valueMin())/(m._valueMax()-m._valueMin())*100;var n={};n[m.orientation=="horizontal"?"left":"bottom"]=p+"%";b(this).stop(1,1)[d?"animate":"css"](n,e.animate);if(m.options.range===true){if(m.orientation=="horizontal"){(q==0)&&m.range.stop(1,1)[d?"animate":"css"]({left:p+"%"},e.animate);(q==1)&&m.range[d?"animate":"css"]({width:(p-lastValPercent)+"%"},{queue:false,duration:e.animate});}else{(q==0)&&m.range.stop(1,1)[d?"animate":"css"]({bottom:(p)+"%"},e.animate);(q==1)&&m.range[d?"animate":"css"]({height:(p-lastValPercent)+"%"},{queue:false,duration:e.animate});}}lastValPercent=p;});}else{var k=this.value(),h=this._valueMin(),l=this._valueMax(),f=l!=h?(k-h)/(l-h)*100:0;var c={};c[m.orientation=="horizontal"?"left":"bottom"]=f+"%";this.handle.stop(1,1)[d?"animate":"css"](c,e.animate);(g=="min")&&(this.orientation=="horizontal")&&this.range.stop(1,1)[d?"animate":"css"]({width:f+"%"},e.animate);(g=="max")&&(this.orientation=="horizontal")&&this.range[d?"animate":"css"]({width:(100-f)+"%"},{queue:false,duration:e.animate});(g=="min")&&(this.orientation=="vertical")&&this.range.stop(1,1)[d?"animate":"css"]({height:f+"%"},e.animate);(g=="max")&&(this.orientation=="vertical")&&this.range[d?"animate":"css"]({height:(100-f)+"%"},{queue:false,duration:e.animate});}}});b.extend(b.ui.slider,{version:"1.8rc3"});})(jQuery);
(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var b=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?(/left|right/).test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit();},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--){this.items[b].item.removeData("sortable-item");}return this;},_mouseCapture:function(e,f){if(this.reverting){return false;}if(this.options.disabled||this.options.type=="static"){return false;}this._refreshItems(e);var d=null,c=this,b=a(e.target).parents().each(function(){if(a.data(this,"sortable-item")==c){d=a(this);return false;}});if(a.data(e.target,"sortable-item")==c){d=a(e.target);}if(!d){return false;}if(this.options.handle&&!f){var g=false;a(this.options.handle,d).find("*").andSelf().each(function(){if(this==e.target){g=true;}});if(!g){return false;}}this.currentItem=d;this._removeCurrentsFromItems();return true;},_mouseStart:function(e,f,b){var g=this.options,c=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(e);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(e);this.originalPageX=e.pageX;this.originalPageY=e.pageY;(g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0]){this.currentItem.hide();}this._createPlaceholder();if(g.containment){this._setContainment();}if(g.cursor){if(a("body").css("cursor")){this._storedCursor=a("body").css("cursor");}a("body").css("cursor",g.cursor);}if(g.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity");}this.helper.css("opacity",g.opacity);}if(g.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex");}this.helper.css("zIndex",g.zIndex);}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){this.overflowOffset=this.scrollParent.offset();}this._trigger("start",e,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions();}if(!b){for(var d=this.containers.length-1;d>=0;d--){this.containers[d]._trigger("activate",e,c._uiHash(this));}}if(a.ui.ddmanager){a.ui.ddmanager.current=this;}if(a.ui.ddmanager&&!g.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,e);}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(e);return true;},_mouseDrag:function(f){this.position=this._generatePosition(f);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs;}if(this.options.scroll){var g=this.options,b=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-f.pageY<g.scrollSensitivity){this.scrollParent[0].scrollTop=b=this.scrollParent[0].scrollTop+g.scrollSpeed;}else{if(f.pageY-this.overflowOffset.top<g.scrollSensitivity){this.scrollParent[0].scrollTop=b=this.scrollParent[0].scrollTop-g.scrollSpeed;}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-f.pageX<g.scrollSensitivity){this.scrollParent[0].scrollLeft=b=this.scrollParent[0].scrollLeft+g.scrollSpeed;}else{if(f.pageX-this.overflowOffset.left<g.scrollSensitivity){this.scrollParent[0].scrollLeft=b=this.scrollParent[0].scrollLeft-g.scrollSpeed;}}}else{if(f.pageY-a(document).scrollTop()<g.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed);}else{if(a(window).height()-(f.pageY-a(document).scrollTop())<g.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed);}}if(f.pageX-a(document).scrollLeft()<g.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed);}else{if(a(window).width()-(f.pageX-a(document).scrollLeft())<g.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed);}}}if(b!==false&&a.ui.ddmanager&&!g.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,f);}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px";}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px";}for(var d=this.items.length-1;d>=0;d--){var e=this.items[d],c=e.item[0],h=this._intersectsWithPointer(e);if(!h){continue;}if(c!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=c&&!a.ui.contains(this.placeholder[0],c)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],c):true)){this.direction=h==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(e)){this._rearrange(f,e);}else{break;}this._trigger("change",f,this._uiHash());break;}}this._contactContainers(f);if(a.ui.ddmanager){a.ui.ddmanager.drag(this,f);}this._trigger("sort",f,this._uiHash());this.lastPositionAbs=this.positionAbs;return false;},_mouseStop:function(c,d){if(!c){return;}if(a.ui.ddmanager&&!this.options.dropBehaviour){a.ui.ddmanager.drop(this,c);}if(this.options.revert){var b=this;var e=b.placeholder.offset();b.reverting=true;a(this.helper).animate({left:e.left-this.offset.parent.left-b.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-b.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){b._clear(c);});}else{this._clear(c,d);}return false;},cancel:function(){var b=this;if(this.dragging){this._mouseUp();if(this.options.helper=="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else{this.currentItem.show();}for(var c=this.containers.length-1;c>=0;c--){this.containers[c]._trigger("deactivate",null,b._uiHash(this));if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",null,b._uiHash(this));this.containers[c].containerCache.over=0;}}}if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0]);}if(this.options.helper!="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove();}a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){a(this.domPosition.prev).after(this.currentItem);}else{a(this.domPosition.parent).prepend(this.currentItem);}return this;},serialize:function(d){var b=this._getItemsAsjQuery(d&&d.connected);var c=[];d=d||{};a(b).each(function(){var e=(a(d.item||this).attr(d.attribute||"id")||"").match(d.expression||(/(.+)[-=_](.+)/));if(e){c.push((d.key||e[1]+"[]")+"="+(d.key&&d.expression?e[1]:e[2]));}});return c.join("&");},toArray:function(d){var b=this._getItemsAsjQuery(d&&d.connected);var c=[];d=d||{};b.each(function(){c.push(a(d.item||this).attr(d.attribute||"id")||"");});return c;},_intersectsWith:function(m){var e=this.positionAbs.left,d=e+this.helperProportions.width,k=this.positionAbs.top,j=k+this.helperProportions.height;var f=m.left,c=f+m.width,n=m.top,i=n+m.height;var o=this.offset.click.top,h=this.offset.click.left;var g=(k+o)>n&&(k+o)<i&&(e+h)>f&&(e+h)<c;if(this.options.tolerance=="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>m[this.floating?"width":"height"])){return g;}else{return(f<e+(this.helperProportions.width/2)&&d-(this.helperProportions.width/2)<c&&n<k+(this.helperProportions.height/2)&&j-(this.helperProportions.height/2)<i);}},_intersectsWithPointer:function(d){var e=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top,d.height),c=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left,d.width),g=e&&c,b=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();if(!g){return false;}return this.floating?(((f&&f=="right")||b=="down")?2:1):(b&&(b=="down"?2:1));},_intersectsWithSides:function(e){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+(e.height/2),e.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+(e.width/2),e.width),b=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();if(this.floating&&f){return((f=="right"&&d)||(f=="left"&&!d));}else{return b&&((b=="down"&&c)||(b=="up"&&!c));}},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up");},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left");},refresh:function(b){this._refreshItems(b);this.refreshPositions();return this;},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith;},_getItemsAsjQuery:function(b){var l=this;var g=[];var e=[];var h=this._connectWith();if(h&&b){for(var d=h.length-1;d>=0;d--){var k=a(h[d]);for(var c=k.length-1;c>=0;c--){var f=a.data(k[c],"sortable");if(f&&f!=this&&!f.options.disabled){e.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f]);
}}}}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var d=e.length-1;d>=0;d--){e[d][0].each(function(){g.push(this);});}return a(g);},_removeCurrentsFromItems:function(){var d=this.currentItem.find(":data(sortable-item)");for(var c=0;c<this.items.length;c++){for(var b=0;b<d.length;b++){if(d[b]==this.items[c].item[0]){this.items.splice(c,1);}}}},_refreshItems:function(b){this.items=[];this.containers=[this];var h=this.items;var p=this;var f=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]];var l=this._connectWith();if(l){for(var e=l.length-1;e>=0;e--){var m=a(l[e]);for(var d=m.length-1;d>=0;d--){var g=a.data(m[d],"sortable");if(g&&g!=this&&!g.options.disabled){f.push([a.isFunction(g.options.items)?g.options.items.call(g.element[0],b,{item:this.currentItem}):a(g.options.items,g.element),g]);this.containers.push(g);}}}}for(var e=f.length-1;e>=0;e--){var k=f[e][1];var c=f[e][0];for(var d=0,n=c.length;d<n;d++){var o=a(c[d]);o.data("sortable-item",k);h.push({item:o,instance:k,width:0,height:0,left:0,top:0});}}},refreshPositions:function(b){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset();}for(var d=this.items.length-1;d>=0;d--){var e=this.items[d];var c=this.options.toleranceElement?a(this.options.toleranceElement,e.item):e.item;if(!b){e.width=c.outerWidth();e.height=c.outerHeight();}var f=c.offset();e.left=f.left;e.top=f.top;}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this);}else{for(var d=this.containers.length-1;d>=0;d--){var f=this.containers[d].element.offset();this.containers[d].containerCache.left=f.left;this.containers[d].containerCache.top=f.top;this.containers[d].containerCache.width=this.containers[d].element.outerWidth();this.containers[d].containerCache.height=this.containers[d].element.outerHeight();}}return this;},_createPlaceholder:function(d){var b=d||this,e=b.options;if(!e.placeholder||e.placeholder.constructor==String){var c=e.placeholder;e.placeholder={element:function(){var f=a(document.createElement(b.currentItem[0].nodeName)).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!c){f.style.visibility="hidden";}return f;},update:function(f,g){if(c&&!e.forcePlaceholderSize){return;}if(!g.height()){g.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10));}if(!g.width()){g.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10));}}};}b.placeholder=a(e.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);e.placeholder.update(b,b.placeholder);},_contactContainers:function(b){var d=null,k=null;for(var f=this.containers.length-1;f>=0;f--){if(a.ui.contains(this.currentItem[0],this.containers[f].element[0])){continue;}if(this._intersectsWith(this.containers[f].containerCache)){if(d&&a.ui.contains(this.containers[f].element[0],d.element[0])){continue;}d=this.containers[f];k=f;}else{if(this.containers[f].containerCache.over){this.containers[f]._trigger("out",b,this._uiHash(this));this.containers[f].containerCache.over=0;}}}if(!d){return;}if(this.currentContainer!=this.containers[k]){var h=10000;var g=null;var c=this.positionAbs[this.containers[k].floating?"left":"top"];for(var e=this.items.length-1;e>=0;e--){if(!a.ui.contains(this.containers[k].element[0],this.items[e].item[0])){continue;}var l=this.items[e][this.containers[k].floating?"left":"top"];if(Math.abs(l-c)<h){h=Math.abs(l-c);g=this.items[e];}}if(!g&&!this.options.dropOnEmpty){return;}this.currentContainer=this.containers[k];g?this._rearrange(b,g,null,true):this._rearrange(b,null,this.containers[k].element,true);this._trigger("change",b,this._uiHash());this.containers[k]._trigger("change",b,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[k]._trigger("over",b,this._uiHash(this));this.containers[k].containerCache.over=1;}},_createHelper:function(c){var d=this.options;var b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[c,this.currentItem])):(d.helper=="clone"?this.currentItem.clone():this.currentItem);if(!b.parents("body").length){a(d.appendTo!="parent"?d.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);}if(b[0]==this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};}if(b[0].style.width==""||d.forceHelperSize){b.width(this.currentItem.width());}if(b[0].style.height==""||d.forceHelperSize){b.height(this.currentItem.height());}return b;},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ");}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0};}if("left" in b){this.offset.click.left=b.left+this.margins.left;}if("right" in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left;}if("top" in b){this.offset.click.top=b.top+this.margins.top;}if("bottom" in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop();}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)){b={top:0,left:0};}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var e=this.options;if(e.containment=="parent"){e.containment=this.helper[0].parentNode;}if(e.containment=="document"||e.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];}if(!(/^(document|window|parent)$/).test(e.containment)){var c=a(e.containment)[0];var d=a(e.containment).offset();var b=(a(c).css("overflow")!="hidden");this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(b?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(b?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top];}},_convertPositionTo:function(f,h){if(!h){h=this.position;}var c=f=="absolute"?1:-1;var e=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=(/(html|body)/i).test(b[0].tagName);return{top:(h.top+this.offset.relative.top*c+this.offset.parent.top*c-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(g?0:b.scrollTop()))*c)),left:(h.left+this.offset.relative.left*c+this.offset.parent.left*c-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:b.scrollLeft())*c))};},_generatePosition:function(e){var h=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=(/(html|body)/i).test(b[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset();}var d=e.pageX;var c=e.pageY;if(this.originalPosition){if(this.containment){if(e.pageX-this.offset.click.left<this.containment[0]){d=this.containment[0]+this.offset.click.left;}if(e.pageY-this.offset.click.top<this.containment[1]){c=this.containment[1]+this.offset.click.top;}if(e.pageX-this.offset.click.left>this.containment[2]){d=this.containment[2]+this.offset.click.left;}if(e.pageY-this.offset.click.top>this.containment[3]){c=this.containment[3]+this.offset.click.top;}}if(h.grid){var g=this.originalPageY+Math.round((c-this.originalPageY)/h.grid[1])*h.grid[1];c=this.containment?(!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:(!(g-this.offset.click.top<this.containment[1])?g-h.grid[1]:g+h.grid[1])):g;var f=this.originalPageX+Math.round((d-this.originalPageX)/h.grid[0])*h.grid[0];d=this.containment?(!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:(!(f-this.offset.click.left<this.containment[0])?f-h.grid[0]:f+h.grid[0])):f;
}}return{top:(c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(i?0:b.scrollTop())))),left:(d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:b.scrollLeft())))};},_rearrange:function(g,f,c,e){c?c[0].appendChild(this.placeholder[0]):f.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction=="down"?f.item[0]:f.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var d=this,b=this.counter;window.setTimeout(function(){if(b==d.counter){d.refreshPositions(!e);}},0);},_clear:function(d,e){this.reverting=false;var f=[],b=this;if(!this._noFinalSort&&this.currentItem[0].parentNode){this.placeholder.before(this.currentItem);}this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var c in this._storedCSS){if(this._storedCSS[c]=="auto"||this._storedCSS[c]=="static"){this._storedCSS[c]="";}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else{this.currentItem.show();}if(this.fromOutside&&!e){f.push(function(g){this._trigger("receive",g,this._uiHash(this.fromOutside));});}if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!e){f.push(function(g){this._trigger("update",g,this._uiHash());});}if(!a.ui.contains(this.element[0],this.currentItem[0])){if(!e){f.push(function(g){this._trigger("remove",g,this._uiHash());});}for(var c=this.containers.length-1;c>=0;c--){if(a.ui.contains(this.containers[c].element[0],this.currentItem[0])&&!e){f.push((function(g){return function(h){g._trigger("receive",h,this._uiHash(this));};}).call(this,this.containers[c]));f.push((function(g){return function(h){g._trigger("update",h,this._uiHash(this));};}).call(this,this.containers[c]));}}}for(var c=this.containers.length-1;c>=0;c--){if(!e){f.push((function(g){return function(h){g._trigger("deactivate",h,this._uiHash(this));};}).call(this,this.containers[c]));}if(this.containers[c].containerCache.over){f.push((function(g){return function(h){g._trigger("out",h,this._uiHash(this));};}).call(this,this.containers[c]));this.containers[c].containerCache.over=0;}}if(this._storedCursor){a("body").css("cursor",this._storedCursor);}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity);}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);}this.dragging=false;if(this.cancelHelperRemoval){if(!e){this._trigger("beforeStop",d,this._uiHash());for(var c=0;c<f.length;c++){f[c].call(this,d);}this._trigger("stop",d,this._uiHash());}return false;}if(!e){this._trigger("beforeStop",d,this._uiHash());}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!=this.currentItem[0]){this.helper.remove();}this.helper=null;if(!e){for(var c=0;c<f.length;c++){f[c].call(this,d);}this._trigger("stop",d,this._uiHash());}this.fromOutside=false;return true;},_trigger:function(){if(a.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel();}},_uiHash:function(c){var b=c||this;return{helper:b.helper,placeholder:b.placeholder||a([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:c?c.element:null};}});a.extend(a.ui.sortable,{version:"1.8rc3"});})(jQuery);(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative";}(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit();},destroy:function(){if(!this.element.data("draggable")){return;}this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this;},_mouseCapture:function(b){var c=this.options;if(this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")){return false;}this.handle=this._getHandle(b);if(!this.handle){return false;}return true;},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b);this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this;}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;(c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt));if(c.containment){this._setContainment();}if(this._trigger("start",b)===false){this._clear();return false;}this._cacheHelperProportions();if(a.ui.ddmanager&&!c.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,b);}this.helper.addClass("ui-draggable-dragging");this._mouseDrag(b,true);return true;},_mouseDrag:function(b,d){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!d){var c=this._uiHash();if(this._trigger("drag",b,c)===false){this._mouseUp({});return false;}this.position=c.position;}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px";}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px";}if(a.ui.ddmanager){a.ui.ddmanager.drag(this,b);}return false;},_mouseStop:function(c){var d=false;if(a.ui.ddmanager&&!this.options.dropBehaviour){d=a.ui.ddmanager.drop(this,c);}if(this.dropped){d=this.dropped;this.dropped=false;}if(!this.element[0]||!this.element[0].parentNode){return false;}if((this.options.revert=="invalid"&&!d)||(this.options.revert=="valid"&&d)||this.options.revert===true||(a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d))){var b=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(b._trigger("stop",c)!==false){b._clear();}});}else{if(this._trigger("stop",c)!==false){this._clear();}}return false;},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({});}else{this._clear();}return this;},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==b.target){c=true;}});return c;},_createHelper:function(c){var d=this.options;var b=a.isFunction(d.helper)?a(d.helper.apply(this.element[0],[c])):(d.helper=="clone"?this.element.clone():this.element);if(!b.parents("body").length){b.appendTo((d.appendTo=="parent"?this.element[0].parentNode:d.appendTo));}if(b[0]!=this.element[0]&&!(/(fixed|absolute)/).test(b.css("position"))){b.css("position","absolute");}return b;},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ");}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0};}if("left" in b){this.offset.click.left=b.left+this.margins.left;}if("right" in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left;}if("top" in b){this.offset.click.top=b.top+this.margins.top;}if("bottom" in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop();}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)){b={top:0,left:0};}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var e=this.options;if(e.containment=="parent"){e.containment=this.helper[0].parentNode;}if(e.containment=="document"||e.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(e.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(e.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];}if(!(/^(document|window|parent)$/).test(e.containment)&&e.containment.constructor!=Array){var c=a(e.containment)[0];if(!c){return;}var d=a(e.containment).offset();var b=(a(c).css("overflow")!="hidden");this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(b?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(b?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top];}else{if(e.containment.constructor==Array){this.containment=e.containment;}}},_convertPositionTo:function(f,h){if(!h){h=this.position;}var c=f=="absolute"?1:-1;var e=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=(/(html|body)/i).test(b[0].tagName);return{top:(h.top+this.offset.relative.top*c+this.offset.parent.top*c-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(g?0:b.scrollTop()))*c)),left:(h.left+this.offset.relative.left*c+this.offset.parent.left*c-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:b.scrollLeft())*c))};},_generatePosition:function(e){var h=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=(/(html|body)/i).test(b[0].tagName);var d=e.pageX;var c=e.pageY;if(this.originalPosition){if(this.containment){if(e.pageX-this.offset.click.left<this.containment[0]){d=this.containment[0]+this.offset.click.left;}if(e.pageY-this.offset.click.top<this.containment[1]){c=this.containment[1]+this.offset.click.top;}if(e.pageX-this.offset.click.left>this.containment[2]){d=this.containment[2]+this.offset.click.left;}if(e.pageY-this.offset.click.top>this.containment[3]){c=this.containment[3]+this.offset.click.top;}}if(h.grid){var g=this.originalPageY+Math.round((c-this.originalPageY)/h.grid[1])*h.grid[1];c=this.containment?(!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:(!(g-this.offset.click.top<this.containment[1])?g-h.grid[1]:g+h.grid[1])):g;var f=this.originalPageX+Math.round((d-this.originalPageX)/h.grid[0])*h.grid[0];d=this.containment?(!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:(!(f-this.offset.click.left<this.containment[0])?f-h.grid[0]:f+h.grid[0])):f;}}return{top:(c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(i?0:b.scrollTop())))),left:(d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:b.scrollLeft())))};},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval){this.helper.remove();}this.helper=null;this.cancelHelperRemoval=false;},_trigger:function(b,c,d){d=d||this._uiHash();a.ui.plugin.call(this,b,[c,d]);if(b=="drag"){this.positionAbs=this._convertPositionTo("absolute");
}return a.Widget.prototype._trigger.call(this,b,c,d);},plugins:{},_uiHash:function(b){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});a.extend(a.ui.draggable,{version:"1.8rc3"});a.ui.plugin.add("draggable","connectToSortable",{start:function(c,e){var d=a(this).data("draggable"),f=d.options,b=a.extend({},e,{item:d.element});d.sortables=[];a(f.connectToSortable).each(function(){var g=a.data(this,"sortable");if(g&&!g.options.disabled){d.sortables.push({instance:g,shouldRevert:g.options.revert});g._refreshItems();g._trigger("activate",c,b);}});},stop:function(c,e){var d=a(this).data("draggable"),b=a.extend({},e,{item:d.element});a.each(d.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;d.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true;}this.instance._mouseStop(c);this.instance.options.helper=this.instance.options._helper;if(d.options.helper=="original"){this.instance.currentItem.css({top:"auto",left:"auto"});}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",c,b);}});},drag:function(c,f){var e=a(this).data("draggable"),b=this;var d=function(i){var n=this.offset.click.top,m=this.offset.click.left;var g=this.positionAbs.top,k=this.positionAbs.left;var j=i.height,l=i.width;var p=i.top,h=i.left;return a.ui.isOver(g+n,k+m,p,h,j,l);};a.each(e.sortables,function(g){this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(b).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return f.helper[0];};c.target=this.instance.currentItem[0];this.instance._mouseCapture(c,true);this.instance._mouseStart(c,true,true);this.instance.offset.click.top=e.offset.click.top;this.instance.offset.click.left=e.offset.click.left;this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top;e._trigger("toSortable",c);e.dropped=this.instance.element;e.currentItem=e.element;this.instance.fromOutside=e;}if(this.instance.currentItem){this.instance._mouseDrag(c);}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",c,this.instance._uiHash(this.instance));this.instance._mouseStop(c,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove();}e._trigger("fromSortable",c);e.dropped=false;}}});}});a.ui.plugin.add("draggable","cursor",{start:function(c,d){var b=a("body"),e=a(this).data("draggable").options;if(b.css("cursor")){e._cursor=b.css("cursor");}b.css("cursor",e.cursor);},stop:function(b,c){var d=a(this).data("draggable").options;if(d._cursor){a("body").css("cursor",d._cursor);}}});a.ui.plugin.add("draggable","iframeFix",{start:function(b,c){var d=a(this).data("draggable").options;a(d.iframeFix===true?"iframe":d.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body");});},stop:function(b,c){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this);});}});a.ui.plugin.add("draggable","opacity",{start:function(c,d){var b=a(d.helper),e=a(this).data("draggable").options;if(b.css("opacity")){e._opacity=b.css("opacity");}b.css("opacity",e.opacity);},stop:function(b,c){var d=a(this).data("draggable").options;if(d._opacity){a(c.helper).css("opacity",d._opacity);}}});a.ui.plugin.add("draggable","scroll",{start:function(c,d){var b=a(this).data("draggable");if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){b.overflowOffset=b.scrollParent.offset();}},drag:function(d,e){var c=a(this).data("draggable"),f=c.options,b=false;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!f.axis||f.axis!="x"){if((c.overflowOffset.top+c.scrollParent[0].offsetHeight)-d.pageY<f.scrollSensitivity){c.scrollParent[0].scrollTop=b=c.scrollParent[0].scrollTop+f.scrollSpeed;}else{if(d.pageY-c.overflowOffset.top<f.scrollSensitivity){c.scrollParent[0].scrollTop=b=c.scrollParent[0].scrollTop-f.scrollSpeed;}}}if(!f.axis||f.axis!="y"){if((c.overflowOffset.left+c.scrollParent[0].offsetWidth)-d.pageX<f.scrollSensitivity){c.scrollParent[0].scrollLeft=b=c.scrollParent[0].scrollLeft+f.scrollSpeed;}else{if(d.pageX-c.overflowOffset.left<f.scrollSensitivity){c.scrollParent[0].scrollLeft=b=c.scrollParent[0].scrollLeft-f.scrollSpeed;}}}}else{if(!f.axis||f.axis!="x"){if(d.pageY-a(document).scrollTop()<f.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()-f.scrollSpeed);}else{if(a(window).height()-(d.pageY-a(document).scrollTop())<f.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()+f.scrollSpeed);}}}if(!f.axis||f.axis!="y"){if(d.pageX-a(document).scrollLeft()<f.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()-f.scrollSpeed);}else{if(a(window).width()-(d.pageX-a(document).scrollLeft())<f.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()+f.scrollSpeed);}}}}if(b!==false&&a.ui.ddmanager&&!f.dropBehaviour){a.ui.ddmanager.prepareOffsets(c,d);}}});a.ui.plugin.add("draggable","snap",{start:function(c,d){var b=a(this).data("draggable"),e=b.options;b.snapElements=[];a(e.snap.constructor!=String?(e.snap.items||":data(draggable)"):e.snap).each(function(){var g=a(this);var f=g.offset();if(this!=b.element[0]){b.snapElements.push({item:this,width:g.outerWidth(),height:g.outerHeight(),top:f.top,left:f.left});}});},drag:function(u,p){var g=a(this).data("draggable"),q=g.options;var y=q.snapTolerance;var x=p.offset.left,w=x+g.helperProportions.width,f=p.offset.top,e=f+g.helperProportions.height;for(var v=g.snapElements.length-1;v>=0;v--){var s=g.snapElements[v].left,n=s+g.snapElements[v].width,m=g.snapElements[v].top,A=m+g.snapElements[v].height;if(!((s-y<x&&x<n+y&&m-y<f&&f<A+y)||(s-y<x&&x<n+y&&m-y<e&&e<A+y)||(s-y<w&&w<n+y&&m-y<f&&f<A+y)||(s-y<w&&w<n+y&&m-y<e&&e<A+y))){if(g.snapElements[v].snapping){(g.options.snap.release&&g.options.snap.release.call(g.element,u,a.extend(g._uiHash(),{snapItem:g.snapElements[v].item})));}g.snapElements[v].snapping=false;continue;}if(q.snapMode!="inner"){var c=Math.abs(m-e)<=y;var z=Math.abs(A-f)<=y;var j=Math.abs(s-w)<=y;var k=Math.abs(n-x)<=y;if(c){p.position.top=g._convertPositionTo("relative",{top:m-g.helperProportions.height,left:0}).top-g.margins.top;}if(z){p.position.top=g._convertPositionTo("relative",{top:A,left:0}).top-g.margins.top;}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:s-g.helperProportions.width}).left-g.margins.left;}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n}).left-g.margins.left;}}var h=(c||z||j||k);if(q.snapMode!="outer"){var c=Math.abs(m-f)<=y;var z=Math.abs(A-e)<=y;var j=Math.abs(s-x)<=y;var k=Math.abs(n-w)<=y;if(c){p.position.top=g._convertPositionTo("relative",{top:m,left:0}).top-g.margins.top;}if(z){p.position.top=g._convertPositionTo("relative",{top:A-g.helperProportions.height,left:0}).top-g.margins.top;}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:s}).left-g.margins.left;}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n-g.helperProportions.width}).left-g.margins.left;}}if(!g.snapElements[v].snapping&&(c||z||j||k||h)){(g.options.snap.snap&&g.options.snap.snap.call(g.element,u,a.extend(g._uiHash(),{snapItem:g.snapElements[v].item})));}g.snapElements[v].snapping=(c||z||j||k||h);}}});a.ui.plugin.add("draggable","stack",{start:function(c,d){var f=a(this).data("draggable").options;var e=a.makeArray(a(f.stack)).sort(function(h,g){return(parseInt(a(h).css("zIndex"),10)||0)-(parseInt(a(g).css("zIndex"),10)||0);});if(!e.length){return;}var b=parseInt(e[0].style.zIndex)||0;a(e).each(function(g){this.style.zIndex=b+g;});this[0].style.zIndex=b+e.length;}});a.ui.plugin.add("draggable","zIndex",{start:function(c,d){var b=a(d.helper),e=a(this).data("draggable").options;if(b.css("zIndex")){e._zIndex=b.css("zIndex");}b.css("zIndex",e.zIndex);},stop:function(b,c){var d=a(this).data("draggable").options;if(d._zIndex){a(c.helper).css("zIndex",d._zIndex);}}});})(jQuery);(function(f){f.ui=f.ui||{};var c=/left|center|right/,e="center",d=/top|center|bottom/,g="center",a=f.fn.position;f.fn.position=function(i){if(!i||!i.of){return a.apply(this,arguments);}i=f.extend({},i);var l=f(i.of),n=(i.collision||"flip").split(" "),m=i.offset?i.offset.split(" "):[0,0],k,h,j;if(i.of.nodeType===9){k=l.width();h=l.height();j={top:0,left:0};}else{if(i.of.scrollTo&&i.of.document){k=l.width();h=l.height();j={top:l.scrollTop(),left:l.scrollLeft()};}else{if(i.of.preventDefault){i.at="left top";k=h=0;j={top:i.of.pageY,left:i.of.pageX};}else{k=l.outerWidth();h=l.outerHeight();j=l.offset();}}}f.each(["my","at"],function(){var o=(i[this]||"").split(" ");if(o.length===1){o=c.test(o[0])?o.concat([g]):d.test(o[0])?[e].concat(o):[e,g];}o[0]=c.test(o[0])?o[0]:e;o[1]=d.test(o[1])?o[1]:g;i[this]=o;});if(n.length===1){n[1]=n[0];}m[0]=parseInt(m[0],10)||0;if(m.length===1){m[1]=m[0];}m[1]=parseInt(m[1],10)||0;if(i.at[0]==="right"){j.left+=k;}else{if(i.at[0]===e){j.left+=k/2;}}if(i.at[1]==="bottom"){j.top+=h;}else{if(i.at[1]===g){j.top+=h/2;}}j.left+=m[0];j.top+=m[1];return this.each(function(){var t=f(this),s=t.outerWidth(),r=t.outerHeight(),p=f.extend({},j),u,o,q;if(i.my[0]==="right"){p.left-=s;}else{if(i.my[0]===e){p.left-=s/2;}}if(i.my[1]==="bottom"){p.top-=r;}else{if(i.my[1]===g){p.top-=r/2;}}f.each(["left","top"],function(w,v){if(f.ui.position[n[w]]){f.ui.position[n[w]][v](p,{targetWidth:k,targetHeight:h,elemWidth:s,elemHeight:r,offset:m,my:i.my,at:i.at});}});if(f.fn.bgiframe){t.bgiframe();}t.offset(f.extend(p,{using:i.using}));});};f.ui.position={fit:{left:function(h,i){var k=f(window),j=h.left+i.elemWidth-k.width()-k.scrollLeft();h.left=j>0?h.left-j:Math.max(0,h.left);},top:function(h,i){var k=f(window),j=h.top+i.elemHeight-k.height()-k.scrollTop();h.top=j>0?h.top-j:Math.max(0,h.top);}},flip:{left:function(i,j){if(j.at[0]==="center"){return;}var l=f(window),k=i.left+j.elemWidth-l.width()-l.scrollLeft(),h=j.my[0]==="left"?-j.elemWidth:j.my[0]==="right"?j.elemWidth:0,m=-2*j.offset[0];i.left+=i.left<0?h+j.targetWidth+m:k>0?h-j.targetWidth+m:0;},top:function(i,k){if(k.at[1]==="center"){return;}var m=f(window),l=i.top+k.elemHeight-m.height()-m.scrollTop(),h=k.my[1]==="top"?-k.elemHeight:k.my[1]==="bottom"?k.elemHeight:0,j=k.at[1]==="top"?k.targetHeight:-k.targetHeight,n=-2*k.offset[1];i.top+=i.top<0?h+k.targetHeight+n:l>0?h+j+n:0;}}};if(!f.offset.setOffset){f.offset.setOffset=function(l,i){if(/static/.test(jQuery.curCSS(l,"position"))){l.style.position="relative";}var k=jQuery(l),n=k.offset(),h=parseInt(jQuery.curCSS(l,"top",true),10)||0,m=parseInt(jQuery.curCSS(l,"left",true),10)||0,j={top:(i.top-n.top)+h,left:(i.left-n.left)+m};if("using" in i){i.using.call(l,j);}else{k.css(j);}};var b=f.fn.offset;f.fn.offset=function(h){var i=this[0];if(!i||!i.ownerDocument){return null;}if(h){return this.each(function(){f.offset.setOffset(this,h);});}return b.call(this);};}})(jQuery);(function(b){var a=b.fn.remove;b.fn.remove=function(c,d){return this.each(function(){if(!d){if(!c||b.filter(c,[this]).length){b("*",this).add(this).each(function(){b(this).triggerHandler("remove");});}}return a.call(b(this),c,d);});};b.widget=function(d,f,c){var e=d.split(".")[0],h;d=d.split(".")[1];h=e+"-"+d;if(!c){c=f;f=b.Widget;}b.expr[":"][h]=function(i){return !!b.data(i,d);};b[e]=b[e]||{};b[e][d]=function(i,j){if(arguments.length){this._createWidget(i,j);}};var g=new f();g.options=b.extend({},g.options);b[e][d].prototype=b.extend(true,g,{namespace:e,widgetName:d,widgetEventPrefix:b[e][d].prototype.widgetEventPrefix||d,widgetBaseClass:h},c);b.widget.bridge(d,b[e][d]);};b.widget.bridge=function(d,c){b.fn[d]=function(g){var e=typeof g==="string",f=Array.prototype.slice.call(arguments,1),h=this;g=!e&&f.length?b.extend.apply(null,[true,g].concat(f)):g;if(e&&g.substring(0,1)==="_"){return h;}if(e){this.each(function(){var i=b.data(this,d),j=i&&b.isFunction(i[g])?i[g].apply(i,f):i;if(j!==i&&j!==undefined){h=j;return false;}});}else{this.each(function(){var i=b.data(this,d);if(i){if(g){i.option(g);}i._init();}else{b.data(this,d,new c(g,this));}});}return h;};};b.Widget=function(c,d){if(arguments.length){this._createWidget(c,d);}};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(d,e){this.element=b(e).data(this.widgetName,this);this.options=b.extend(true,{},this.options,b.metadata&&b.metadata.get(e)[this.widgetName],d);var c=this;this.element.bind("remove."+this.widgetName,function(){c.destroy();});this._create();this._init();},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled");},widget:function(){return this.element;},option:function(e,f){var d=e,c=this;if(arguments.length===0){return b.extend({},c.options);}if(typeof e==="string"){if(f===undefined){return this.options[e];}d={};d[e]=f;}b.each(d,function(g,h){c._setOption(g,h);});return c;},_setOption:function(c,d){this.options[c]=d;if(c==="disabled"){this.widget()[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",d);}return this;},enable:function(){return this._setOption("disabled",false);},disable:function(){return this._setOption("disabled",true);},_trigger:function(d,e,f){var h=this.options[d];e=b.Event(e);e.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase();f=f||{};if(e.originalEvent){for(var c=b.event.props.length,g;c;){g=b.event.props[--c];e[g]=e.originalEvent[g];}}this.element.trigger(e,f);return !(b.isFunction(h)&&h.call(this.element[0],e,f)===false||e.isDefaultPrevented());}};})(jQuery);(function($){$.extend($.ui,{datepicker:{version:"1.8rc3"}});var PROP_NAME="datepicker";var dpuuid=new Date().getTime();function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"show",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"_default",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=$('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>');}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",log:function(){if(this.debug){console.log.apply("",arguments);}},_widgetDatepicker:function(){return this.dpDiv;},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this;},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue);}catch(err){inlineSettings[attrName]=attrValue;}}}var nodeName=target.nodeName.toLowerCase();var inline=(nodeName=="div"||nodeName=="span");if(!target.id){target.id="dp"+(++this.uuid);}var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input"){this._connectDatepicker(target,inst);}else{if(inline){this._inlineDatepicker(target,inst);}}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:$('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))};},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return;}this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value;}).bind("getData.datepicker",function(event,key){return this._get(inst,key);});this._autoSize(inst);$.data(target,PROP_NAME,inst);},_attachments:function(input,inst){var appendText=this._get(inst,"appendText");var isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove();}if(appendText){inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>");input[isRTL?"before":"after"](inst.append);}input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove();}var showOn=this._get(inst,"showOn");if(showOn=="focus"||showOn=="both"){input.focus(this._showDatepicker);}if(showOn=="button"||showOn=="both"){var buttonText=this._get(inst,"buttonText");var buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(buttonImage==""?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==input[0]){$.datepicker._hideDatepicker();}else{$.datepicker._showDatepicker(input[0]);}return false;});}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var date=new Date(2009,12-1,20);var dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){var findMax=function(names){var max=0;var maxI=0;for(var i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i;}}return maxI;};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay());}inst.input.attr("size",this._formatDate(inst,date).length);}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return;}divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value;}).bind("getData.datepicker",function(event,key){return this._get(inst,key);});$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);},_dialogDatepicker:function(input,date,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){var id="dp"+(++this.uuid);this._dialogInput=$('<input type="text" id="'+id+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst);}extendRemove(inst.settings,settings||{});date=(date&&date.constructor==Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var browserWidth=document.documentElement.clientWidth;var browserHeight=document.documentElement.clientHeight;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY];}this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv);}$.data(this._dialogInput[0],PROP_NAME,inst);return this;},_destroyDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName=="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp);}else{if(nodeName=="div"||nodeName=="span"){$target.removeClass(this.markerClassName).empty();}}},_enableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false;}).end().filter("img").css({opacity:"1.0",cursor:""});}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value);});},_disableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return;}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true;}).end().filter("img").css({opacity:"0.5",cursor:"default"});}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value);});this._disabledInputs[this._disabledInputs.length]=target;},_isDisabledDatepicker:function(target){if(!target){return false;}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target){return true;}}return false;},_getInst:function(target){try{return $.data(target,PROP_NAME);}catch(err){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=="string"){return(name=="defaults"?$.extend({},$.datepicker._defaults):(inst?(name=="all"?$.extend({},inst.settings):this._get(inst,name)):null));}var settings=name||{};if(typeof name=="string"){settings={};settings[name]=value;}if(inst){if(this._curInst==inst){this._hideDatepicker();}var date=this._getDateDatepicker(target,true);extendRemove(inst.settings,settings);
this._attachments($(target),inst);this._autoSize(inst);this._setDateDatepicker(target,date);this._updateDatepicker(inst);}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value);},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst);}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst);}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault);}return(inst?this._getDate(inst):null);},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target);var handled=true;var isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:var sel=$("td."+$.datepicker._dayOverClass,inst.dpDiv).add($("td."+$.datepicker._currentClass,inst.dpDiv));if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);}else{$.datepicker._hideDatepicker();}return false;break;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target);}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target);}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D");}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");}break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D");}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D");}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");}break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D");}handled=event.ctrlKey||event.metaKey;break;default:handled=false;}}else{if(event.keyCode==36&&event.ctrlKey){$.datepicker._showDatepicker(this);}else{handled=false;}}if(handled){event.preventDefault();event.stopPropagation();}},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){var chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));var chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<" "||!chars||chars.indexOf(chr)>-1);}},_doKeyUp:function(event){var inst=$.datepicker._getInst(event.target);if(inst.input.val()!=inst.lastVal){try{var date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst);}}catch(event){$.datepicker.log(event);}}return true;},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!="input"){input=$("input",input.parentNode)[0];}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input){return;}var inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!=inst){$.datepicker._curInst.dpDiv.stop(true,true);}var beforeShow=$.datepicker._get(inst,"beforeShow");extendRemove(inst.settings,(beforeShow?beforeShow.apply(input,[input,inst]):{}));inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value="";}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight;}var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")=="fixed";return !isFixed;});if(isFixed&&$.browser.opera){$.datepicker._pos[0]-=document.documentElement.scrollLeft;$.datepicker._pos[1]-=document.documentElement.scrollTop;}var offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){var showAnim=$.datepicker._get(inst,"showAnim");var duration=$.datepicker._get(inst,"duration");var postProcess=function(){$.datepicker._datepickerShowing=true;var borders=$.datepicker._getBorders(inst.dpDiv);inst.dpDiv.find("iframe.ui-datepicker-cover").css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()});};inst.dpDiv.zIndex($(input).zIndex()+1);if($.effects&&$.effects[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);}else{inst.dpDiv[showAnim||"show"]((showAnim?duration:null),postProcess);}if(!showAnim){postProcess();}if(inst.input.is(":visible")&&!inst.input.is(":disabled")){inst.input.focus();}$.datepicker._curInst=inst;}},_updateDatepicker:function(inst){var self=this;var borders=$.datepicker._getBorders(inst.dpDiv);inst.dpDiv.empty().append(this._generateHTML(inst)).find("iframe.ui-datepicker-cover").css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).removeClass("ui-datepicker-prev-hover");}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).removeClass("ui-datepicker-next-hover");}}).bind("mouseover",function(){if(!self._isDisabledDatepicker(inst.inline?inst.dpDiv.parent()[0]:inst.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).addClass("ui-datepicker-prev-hover");}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).addClass("ui-datepicker-next-hover");}}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();var numMonths=this._getNumberOfMonths(inst);var cols=numMonths[1];var width=17;if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em");}else{inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");}inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst==$.datepicker._curInst&&$.datepicker._datepickerShowing&&inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")){inst.input.focus();}},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value;};return[parseFloat(convert(elem.css("border-left-width"))),parseFloat(convert(elem.css("border-top-width")))];},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth();var dpHeight=inst.dpDiv.outerHeight();var inputWidth=inst.input?inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=document.documentElement.clientWidth+$(document).scrollLeft();var viewHeight=document.documentElement.clientHeight+$(document).scrollTop();offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left==inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top==(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset;},_findPos:function(obj){var inst=this._getInst(obj);var isRTL=this._get(inst,"isRTL");while(obj&&(obj.type=="hidden"||obj.nodeType!=1)){obj=obj[isRTL?"previousSibling":"nextSibling"];}var position=$(obj).offset();return[position.left,position.top];},_hideDatepicker:function(input){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME))){return;}if(this._datepickerShowing){var showAnim=this._get(inst,"showAnim");var duration=this._get(inst,"duration");var postProcess=function(){$.datepicker._tidyDialog(inst);this._curInst=null;};if($.effects&&$.effects[showAnim]){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);}else{inst.dpDiv[(showAnim=="slideDown"?"slideUp":(showAnim=="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess);}if(!showAnim){postProcess();}var onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst]);}this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv);}}this._inDialog=false;}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");},_checkExternalClick:function(event){if(!$.datepicker._curInst){return;
}var $target=$(event.target);if($target[0].id!=$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length==0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)){$.datepicker._hideDatepicker();}},_adjustDate:function(id,offset,period){var target=$(id);var inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return;}this._adjustInstDate(inst,offset+(period=="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst);},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear;}else{var date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();}this._notifyChange(inst);this._adjustDate(target);},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst._selectingMonthYear=false;inst["selected"+(period=="M"?"Month":"Year")]=inst["draw"+(period=="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target);},_clickMonthYear:function(id){var target=$(id);var inst=this._getInst(target[0]);if(inst.input&&inst._selectingMonthYear&&!$.browser.msie){inst.input.focus();}inst._selectingMonthYear=!inst._selectingMonthYear;},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return;}var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));},_clearDate:function(id){var target=$(id);var inst=this._getInst(target[0]);this._selectDate(target,"");},_selectDate:function(id,dateStr){var target=$(id);var inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr);}this._updateAlternate(inst);var onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst]);}else{if(inst.input){inst.input.trigger("change");}}if(inst.inline){this._updateDatepicker(inst);}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof(inst.input[0])!="object"){inst.input.focus();}this._lastInput=null;}},_updateAlternate:function(inst){var altField=this._get(inst,"altField");if(altField){var altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");var date=this._getDate(inst);var dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr);});}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""];},iso8601Week:function(date){var checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1;},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments";}value=(typeof value=="object"?value.toString():value+"");if(value==""){return null;}var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++;}return matches;};var getNumber=function(match){lookAhead(match);var size=(match=="@"?14:(match=="!"?20:(match=="y"?4:(match=="o"?3:2))));var digits=new RegExp("^\\d{1,"+size+"}");var num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue;}iValue+=num[0].length;return parseInt(num[0],10);};var getName=function(match,shortNames,longNames){var names=(lookAhead(match)?longNames:shortNames);for(var i=0;i<names.length;i++){if(value.substr(iValue,names[i].length)==names[i]){iValue+=names[i].length;return i+1;}}throw"Unknown name at position "+iValue;};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat)){throw"Unexpected literal at position "+iValue;}iValue++;};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false;}else{checkLiteral();}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":var date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":var date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral();}else{literal=true;}break;default:checkLiteral();}}}if(year==-1){year=new Date().getFullYear();}else{if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100);}}if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim){break;}month++;day-=dim;}while(true);}var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day){throw"Invalid date";}return date;},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return"";}var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++;}return matches;};var formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num;}}return num;};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value]);};var output="";var literal=false;if(date){for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false;}else{output+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",(date.getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000,3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'";}else{literal=true;}break;default:output+=format.charAt(iFormat);}}}}return output;},_possibleChars:function(format){var chars="";var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++;}return matches;};for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false;}else{chars+=format.charAt(iFormat);}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'";}else{literal=true;}break;default:chars+=format.charAt(iFormat);}}}return chars;},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name];},_setDateFromField:function(inst,noDefault){if(inst.input.val()==inst.lastVal){return;}var dateFormat=this._get(inst,"dateFormat");var dates=inst.lastVal=inst.input?inst.input.val():null;var date,defaultDate;date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate;}catch(event){this.log(event);dates=(noDefault?"":dates);}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst);},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()));},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date;};var offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst));
}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date();var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;}matches=pattern.exec(offset);}return new Date(year,month,day);};date=(date==null?defaultDate:(typeof date=="string"?offsetString(date):(typeof date=="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):date)));date=(date&&date.toString()=="Invalid Date"?defaultDate:date);if(date){date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0);}return this._daylightSavingAdjust(date);},_daylightSavingAdjust:function(date){if(!date){return null;}date.setHours(date.getHours()>12?date.getHours()+2:0);return date;},_setDate:function(inst,date,noChange){var clear=!(date);var origMonth=inst.selectedMonth;var origYear=inst.selectedYear;date=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=date.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=date.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=date.getFullYear();if((origMonth!=inst.selectedMonth||origYear!=inst.selectedYear)&&!noChange){this._notifyChange(inst);}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst));}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()=="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate;},_generateHTML:function(inst){var today=new Date();today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,"isRTL");var showButtonPanel=this._get(inst,"showButtonPanel");var hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext");var navigationAsDateFormat=this._get(inst,"navigationAsDateFormat");var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,"showCurrentAtPos");var stepMonths=this._get(inst,"stepMonths");var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--;}if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--;}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));var prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+inst.id+"', -"+stepMonths+", 'M');\" title=\""+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>"));var nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));var next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+inst.id+"', +"+stepMonths+", 'M');\" title=\""+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>"));var currentText=this._get(inst,"currentText");var gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));var controls=(!inst.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(inst,"closeText")+"</button>":"");var buttonPanel=(showButtonPanel)?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+inst.id+"');\">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";var firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);var showWeek=this._get(inst,"showWeek");var dayNames=this._get(inst,"dayNames");var dayNamesShort=this._get(inst,"dayNamesShort");var dayNamesMin=this._get(inst,"dayNamesMin");var monthNames=this._get(inst,"monthNames");var monthNamesShort=this._get(inst,"monthNamesShort");var beforeShowDay=this._get(inst,"beforeShowDay");var showOtherMonths=this._get(inst,"showOtherMonths");var selectOtherMonths=this._get(inst,"selectOtherMonths");var calculateWeek=this._get(inst,"calculateWeek")||this.iso8601Week;var defaultDate=this._getDefaultDate(inst);var html="";for(var row=0;row<numMonths[0];row++){var group="";for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));var cornerClass=" ui-corner-all";var calender="";if(isMultiMonth){calender+='<div class="ui-datepicker-group';if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break;}}calender+='">';}calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+(/all|left/.test(cornerClass)&&row==0?(isRTL?next:prev):"")+(/all|right/.test(cornerClass)&&row==0?(isRTL?prev:next):"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var thead=(showWeek?'<th class="ui-datepicker-week-col">'+this._get(inst,"weekHeader")+"</th>":"");for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+dayNames[day]+'">'+dayNamesMin[day]+"</span></th>";}calender+=thead+"</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);}var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var numRows=(isMultiMonth?6:Math.ceil((leadDays+daysInMonth)/7));var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+="<tr>";var tbody=(!showWeek?"":'<td class="ui-datepicker-week-col">'+this._get(inst,"calculateWeek")(printDate)+"</td>");for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+='<td class="'+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime())?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()==currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()==today.getTime()?" ui-datepicker-today":""))+'"'+((!otherMonth||showOtherMonths)&&daySettings[2]?' title="'+daySettings[2]+'"':"")+(unselectable?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+inst.id+"',"+printDate.getMonth()+","+printDate.getFullYear()+', this);return false;"')+">"+(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?'<span class="ui-state-default">'+printDate.getDate()+"</span>":'<a class="ui-state-default'+(printDate.getTime()==today.getTime()?" ui-state-highlight":"")+(printDate.getTime()==currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+'" href="#">'+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate);}calender+=tbody+"</tr>";}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++;}calender+="</tbody></table>"+(isMultiMonth?"</div>"+((numMonths[0]>0&&col==numMonths[1]-1)?'<div class="ui-datepicker-row-break"></div>':""):"");group+=calender;}html+=group;}html+=buttonPanel+($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");
inst._keyEvent=false;return html;},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var changeMonth=this._get(inst,"changeMonth");var changeYear=this._get(inst,"changeYear");var showMonthAfterYear=this._get(inst,"showMonthAfterYear");var html='<div class="ui-datepicker-title">';var monthHtml="";if(secondary||!changeMonth){monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+"</span>";}else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);monthHtml+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+inst.id+"', this, 'M');\" onclick=\"DP_jQuery_"+dpuuid+".datepicker._clickMonthYear('#"+inst.id+"');\">";for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNamesShort[month]+"</option>";}}monthHtml+="</select>";}if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"");}if(secondary||!changeYear){html+='<span class="ui-datepicker-year">'+drawYear+"</span>";}else{var years=this._get(inst,"yearRange").split(":");var thisYear=new Date().getFullYear();var determineYear=function(value){var year=(value.match(/c[+-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year);};var year=determineYear(years[0]);var endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);html+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+inst.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+dpuuid+".datepicker._clickMonthYear('#"+inst.id+"');\">";for(;year<=endYear;year++){html+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>";}html+="</select>";}html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml;}html+="</div>";return html;},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=="Y"?offset:0);var month=inst.drawMonth+(period=="M"?offset:0);var day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period=="D"?offset:0);var date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period=="M"||period=="Y"){this._notifyChange(inst);}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");date=(minDate&&date<minDate?minDate:date);date=(maxDate&&date>maxDate?maxDate:date);return date;},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst]);}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths=="number"?[1,numMonths]:numMonths));},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null);},_getDaysInMonth:function(year,month){return 32-new Date(year,month,32).getDate();},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay();},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));}return this._isInRange(inst,date);},_isInRange:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime()));},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")};},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear;}var date=(day?(typeof day=="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst));}});function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null||props[name]==undefined){target[name]=props[name];}}return target;}function isArray(a){return(a&&(($.browser.safari&&typeof a=="object"&&a.length)||(a.constructor&&a.constructor.toString().match(/\Array\(\)/))));}$.fn.datepicker=function(options){if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv);$.datepicker.initialized=true;}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&(options=="isDisabled"||options=="getDate"||options=="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}if(options=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));}return this.each(function(){typeof options=="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options);});};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.8rc3";window["DP_jQuery_"+dpuuid]=$;})(jQuery);jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return -c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b;}return -c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t+b;}return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return -c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t+b;}return -c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t*t+b;}return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return -c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return -c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0){return b;}if(t==d){return b+c;}if((t/=d/2)<1){return c/2*Math.pow(2,10*(t-1))+b;}return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return -c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1){return -c/2*(Math.sqrt(1-t*t)-1)+b;}return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b;}if((t/=d)==1){return b+c;}if(!p){p=d*0.3;}if(a<Math.abs(c)){a=c;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(c/a);}return -(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b;}if((t/=d)==1){return b+c;}if(!p){p=d*0.3;}if(a<Math.abs(c)){a=c;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(c/a);}return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0){return b;}if((t/=d/2)==2){return b+c;}if(!p){p=d*(0.3*1.5);}if(a<Math.abs(c)){a=c;var s=p/4;}else{var s=p/(2*Math.PI)*Math.asin(c/a);}if(t<1){return -0.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;}return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*0.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158;}return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158;}return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined){s=1.70158;}if((t/=d/2)<1){return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;}return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else{if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+0.75)+b;}else{if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+0.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+0.984375)+b;}}}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2){return jQuery.easing.easeInBounce(x,t*2,0,c,d)*0.5+b;}return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*0.5+c*0.5+b;}});(function($){var colorbox="colorbox",hover="hover",TRUE=true,FALSE=false,cboxPublic,isIE=$.browser.msie&&!$.support.opacity,isIE6=isIE&&$.browser.version<7,cbox_open="cbox_open",cbox_load="cbox_load",cbox_complete="cbox_complete",cbox_cleanup="cbox_cleanup",cbox_closed="cbox_closed",cbox_resize="resize.cbox_resize",$overlay,$cbox,$wrap,$content,$topBorder,$leftBorder,$rightBorder,$bottomBorder,$related,$window,$loaded,$loadingBay,$loadingOverlay,$loadingGraphic,$title,$current,$slideshow,$next,$prev,$close,interfaceHeight,interfaceWidth,loadedHeight,loadedWidth,element,bookmark,index,settings,open,active,defaults={transition:"elastic",speed:350,width:FALSE,height:FALSE,innerWidth:FALSE,innerHeight:FALSE,initialWidth:"400",initialHeight:"400",maxWidth:FALSE,maxHeight:FALSE,scalePhotos:TRUE,scrolling:TRUE,inline:FALSE,html:FALSE,iframe:FALSE,photo:FALSE,href:FALSE,title:FALSE,rel:FALSE,opacity:0.9,preloading:TRUE,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:FALSE,overlayClose:TRUE,slideshow:FALSE,slideshowAuto:TRUE,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:FALSE,onLoad:FALSE,onComplete:FALSE,onCleanup:FALSE,onClosed:FALSE,onResize:FALSE};function setSize(size,dimension){dimension=dimension==="x"?$window.width():$window.height();return(typeof size==="string")?Math.round((size.match(/%/)?(dimension/100)*parseInt(size,10):parseInt(size,10))):size;}function isImage(url){url=$.isFunction(url)?url.call(element):url;return settings.photo||url.match(/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i);}function process(){for(var i in settings){if($.isFunction(settings[i])&&i.substring(0,2)!=="on"){settings[i]=settings[i].call(element);}}settings.rel=settings.rel||element.rel;settings.href=settings.href||element.href;settings.title=settings.title||element.title;}function launch(elem){element=elem;settings=$.extend({},$(element).data(colorbox));process();if(settings.rel&&settings.rel!=="nofollow"){$related=$(".cboxElement").filter(function(){var relRelated=$(this).data(colorbox).rel||this.rel;return(relRelated===settings.rel);});index=$related.index(element);if(index<0){$related=$related.add(element);index=$related.length-1;}}else{$related=$(element);index=0;}if(!open){open=TRUE;active=TRUE;bookmark=element;bookmark.blur();$(document).bind("keydown.cbox_close",function(e){if(e.keyCode===27){e.preventDefault();cboxPublic.close();}}).bind("keydown.cbox_arrows",function(e){if($related.length>1){if(e.keyCode===37){e.preventDefault();$prev.click();}else{if(e.keyCode===39){e.preventDefault();$next.click();}}}});if(settings.overlayClose){$overlay.css({cursor:"pointer"}).one("click",cboxPublic.close);}$.event.trigger(cbox_open);if(settings.onOpen){settings.onOpen.call(element);}$overlay.css({opacity:settings.opacity}).show();settings.w=setSize(settings.initialWidth,"x");settings.h=setSize(settings.initialHeight,"y");cboxPublic.position(0);if(isIE6){$window.bind("resize.cboxie6 scroll.cboxie6",function(){$overlay.css({width:$window.width(),height:$window.height(),top:$window.scrollTop(),left:$window.scrollLeft()});}).trigger("scroll.cboxie6");}}$current.add($prev).add($next).add($slideshow).add($title).hide();$close.html(settings.close).show();cboxPublic.slideshow();cboxPublic.load();}cboxPublic=$.fn.colorbox=function(options,callback){var $this=this;if(!$this.length){if($this.selector===""){$this=$("<a/>");options.open=TRUE;}else{return this;}}$this.each(function(){var data=$.extend({},$(this).data(colorbox)?$(this).data(colorbox):defaults,options);$(this).data(colorbox,data).addClass("cboxElement");if(callback){$(this).data(colorbox).onComplete=callback;}});if(options&&options.open){launch($this);}return this;};cboxPublic.init=function(){function $div(id){return $('<div id="cbox'+id+'"/>');}$window=$(window);$cbox=$('<div id="colorbox"/>');$overlay=$div("Overlay").hide();$wrap=$div("Wrapper");$content=$div("Content").append($loaded=$div("LoadedContent").css({width:0,height:0}),$loadingOverlay=$div("LoadingOverlay"),$loadingGraphic=$div("LoadingGraphic"),$title=$div("Title"),$current=$div("Current"),$slideshow=$div("Slideshow"),$next=$div("Next"),$prev=$div("Previous"),$close=$div("Close"));$wrap.append($("<div/>").append($div("TopLeft"),$topBorder=$div("TopCenter"),$div("TopRight")),$("<div/>").append($leftBorder=$div("MiddleLeft"),$content,$rightBorder=$div("MiddleRight")),$("<div/>").append($div("BottomLeft"),$bottomBorder=$div("BottomCenter"),$div("BottomRight"))).children().children().css({"float":"left"});$loadingBay=$("<div style='position:absolute; top:0; left:0; width:9999px; height:0;'/>");$("body").prepend($overlay,$cbox.append($wrap,$loadingBay));if(isIE){$cbox.addClass("cboxIE");if(isIE6){$overlay.css("position","absolute");}}$content.children().bind("mouseover mouseout",function(){$(this).toggleClass(hover);}).addClass(hover);interfaceHeight=$topBorder.height()+$bottomBorder.height()+$content.outerHeight(TRUE)-$content.height();interfaceWidth=$leftBorder.width()+$rightBorder.width()+$content.outerWidth(TRUE)-$content.width();loadedHeight=$loaded.outerHeight(TRUE);loadedWidth=$loaded.outerWidth(TRUE);$cbox.css({"padding-bottom":interfaceHeight,"padding-right":interfaceWidth}).hide();$next.click(cboxPublic.next);$prev.click(cboxPublic.prev);$close.click(cboxPublic.close);$content.children().removeClass(hover);$(".cboxElement").live("click",function(e){if(e.button!==0&&typeof e.button!=="undefined"){return TRUE;}else{launch(this);return FALSE;}});};cboxPublic.position=function(speed,loadedCallback){var animate_speed,winHeight=$window.height(),posTop=Math.max(winHeight-settings.h-loadedHeight-interfaceHeight,0)/2+$window.scrollTop(),posLeft=Math.max(document.documentElement.clientWidth-settings.w-loadedWidth-interfaceWidth,0)/2+$window.scrollLeft();animate_speed=($cbox.width()===settings.w+loadedWidth&&$cbox.height()===settings.h+loadedHeight)?0:speed;$wrap[0].style.width=$wrap[0].style.height="9999px";function modalDimensions(that){$topBorder[0].style.width=$bottomBorder[0].style.width=$content[0].style.width=that.style.width;$loadingGraphic[0].style.height=$loadingOverlay[0].style.height=$content[0].style.height=$leftBorder[0].style.height=$rightBorder[0].style.height=that.style.height;}$cbox.dequeue().animate({width:settings.w+loadedWidth,height:settings.h+loadedHeight,top:posTop,left:posLeft},{duration:animate_speed,complete:function(){modalDimensions(this);active=FALSE;$wrap[0].style.width=(settings.w+loadedWidth+interfaceWidth)+"px";$wrap[0].style.height=(settings.h+loadedHeight+interfaceHeight)+"px";if(loadedCallback){loadedCallback();}},step:function(){modalDimensions(this);}});};cboxPublic.resize=function(object){if(!open){return;}var topMargin,prev,prevSrc,next,nextSrc,photo,timeout,speed=settings.transition==="none"?0:settings.speed;$window.unbind(cbox_resize);if(!object){timeout=setTimeout(function(){var $child=$loaded.wrapInner("<div style='overflow:auto'></div>").children();settings.h=$child.height();$loaded.css({height:settings.h});$child.replaceWith($child.children());cboxPublic.position(speed);},1);if(settings.onResize){settings.onResize.call(element);}return;}$loaded.remove();$loaded=$('<div id="cboxLoadedContent"/>').html(object);function getWidth(){settings.w=settings.w||$loaded.width();settings.w=settings.mw&&settings.mw<settings.w?settings.mw:settings.w;return settings.w;}function getHeight(){settings.h=settings.h||$loaded.height();settings.h=settings.mh&&settings.mh<settings.h?settings.mh:settings.h;return settings.h;}$loaded.hide().appendTo($loadingBay).css({width:getWidth(),overflow:settings.scrolling?"auto":"hidden"}).css({height:getHeight()}).prependTo($content);$("#cboxPhoto").css({cssFloat:"none"});if(isIE6){$("select:not(#colorbox select)").filter(function(){return this.style.visibility!=="hidden";}).css({visibility:"hidden"}).one(cbox_cleanup,function(){this.style.visibility="inherit";});}function setPosition(s){cboxPublic.position(s,function(){if(!open){return;}if(isIE){if(photo){$loaded.fadeIn(100);}$cbox[0].style.removeAttribute("filter");}if(settings.iframe){$loaded.append("<iframe id='cboxIframe'"+(settings.scrolling?" ":"scrolling='no'")+" name='iframe_"+new Date().getTime()+"' frameborder=0 src='"+settings.href+"' "+(isIE?"allowtransparency='true'":"")+" />");}$loaded.show();$title.show().html(settings.title);if($related.length>1){$current.html(settings.current.replace(/\{current\}/,index+1).replace(/\{total\}/,$related.length)).show();$next.html(settings.next).show();$prev.html(settings.previous).show();if(settings.slideshow){$slideshow.show();}}$loadingOverlay.hide();$loadingGraphic.hide();$.event.trigger(cbox_complete);if(settings.onComplete){settings.onComplete.call(element);}if(settings.transition==="fade"){$cbox.fadeTo(speed,1,function(){if(isIE){$cbox[0].style.removeAttribute("filter");}});}$window.bind(cbox_resize,function(){cboxPublic.position(0);});});}if((settings.transition==="fade"&&$cbox.fadeTo(speed,0,function(){setPosition(0);}))||setPosition(speed)){}if(settings.preloading&&$related.length>1){prev=index>0?$related[index-1]:$related[$related.length-1];next=index<$related.length-1?$related[index+1]:$related[0];nextSrc=$(next).data(colorbox).href||next.href;prevSrc=$(prev).data(colorbox).href||prev.href;if(isImage(nextSrc)){$("<img />").attr("src",nextSrc);}if(isImage(prevSrc)){$("<img />").attr("src",prevSrc);}}if(settings.onResize){settings.onResize.call(element);}};cboxPublic.load=function(){var href,img,setResize,resize=cboxPublic.resize;active=TRUE;element=$related[index];settings=$.extend({},$(element).data(colorbox));process();$.event.trigger(cbox_load);if(settings.onLoad){settings.onLoad.call(element);}settings.h=settings.height?setSize(settings.height,"y")-loadedHeight-interfaceHeight:settings.innerHeight?setSize(settings.innerHeight,"y"):FALSE;settings.w=settings.width?setSize(settings.width,"x")-loadedWidth-interfaceWidth:settings.innerWidth?setSize(settings.innerWidth,"x"):FALSE;
settings.mw=settings.w;settings.mh=settings.h;if(settings.maxWidth){settings.mw=setSize(settings.maxWidth,"x")-loadedWidth-interfaceWidth;settings.mw=settings.w&&settings.w<settings.mw?settings.w:settings.mw;}if(settings.maxHeight){settings.mh=setSize(settings.maxHeight,"y")-loadedHeight-interfaceHeight;settings.mh=settings.h&&settings.h<settings.mh?settings.h:settings.mh;}href=settings.href;$loadingOverlay.show();$loadingGraphic.show();if(settings.inline){$('<div id="cboxInlineTemp" />').hide().insertBefore($(href)[0]).bind(cbox_load+" "+cbox_cleanup,function(){$(this).replaceWith($loaded.children());});resize($(href));}else{if(settings.iframe){resize(" ");}else{if(settings.html){resize(settings.html);}else{if(isImage(href)){img=new Image();img.onload=function(){var percent;img.onload=null;img.id="cboxPhoto";$(img).css({margin:"auto",border:"none",display:"block",cssFloat:"left"});if(settings.scalePhotos){setResize=function(){img.height-=img.height*percent;img.width-=img.width*percent;};if(settings.mw&&img.width>settings.mw){percent=(img.width-settings.mw)/img.width;setResize();}if(settings.mh&&img.height>settings.mh){percent=(img.height-settings.mh)/img.height;setResize();}}if(settings.h){img.style.marginTop=Math.max(settings.h-img.height,0)/2+"px";}resize(img);if($related.length>1){$(img).css({cursor:"pointer"}).click(cboxPublic.next);}if(isIE){img.style.msInterpolationMode="bicubic";}};img.src=href;}else{$("<div />").appendTo($loadingBay).load(href,function(data,textStatus){if(textStatus==="success"){resize(this);}else{resize($("<p>Request unsuccessful.</p>"));}});}}}}};cboxPublic.next=function(){if(!active){index=index<$related.length-1?index+1:0;cboxPublic.load();}};cboxPublic.prev=function(){if(!active){index=index>0?index-1:$related.length-1;cboxPublic.load();}};cboxPublic.slideshow=function(){var stop,timeOut,className="cboxSlideshow_";$slideshow.bind(cbox_closed,function(){$slideshow.unbind();clearTimeout(timeOut);$cbox.removeClass(className+"off "+className+"on");});function start(){$slideshow.text(settings.slideshowStop).bind(cbox_complete,function(){timeOut=setTimeout(cboxPublic.next,settings.slideshowSpeed);}).bind(cbox_load,function(){clearTimeout(timeOut);}).one("click",function(){stop();$(this).removeClass(hover);});$cbox.removeClass(className+"off").addClass(className+"on");}stop=function(){clearTimeout(timeOut);$slideshow.text(settings.slideshowStart).unbind(cbox_complete+" "+cbox_load).one("click",function(){start();timeOut=setTimeout(cboxPublic.next,settings.slideshowSpeed);$(this).removeClass(hover);});$cbox.removeClass(className+"on").addClass(className+"off");};if(settings.slideshow&&$related.length>1){if(settings.slideshowAuto){start();}else{stop();}}};cboxPublic.close=function(){$.event.trigger(cbox_cleanup);if(settings.onCleanup){settings.onCleanup.call(element);}open=FALSE;$(document).unbind("keydown.cbox_close keydown.cbox_arrows");$window.unbind(cbox_resize+" resize.cboxie6 scroll.cboxie6");$overlay.css({cursor:"auto"}).fadeOut("fast");$cbox.stop(TRUE,FALSE).fadeOut("fast",function(){$("#colorbox iframe").attr("src","about:blank");$loaded.remove();$cbox.css({opacity:1});try{bookmark.focus();}catch(er){}$.event.trigger(cbox_closed);if(settings.onClosed){settings.onClosed.call(element);}});};cboxPublic.element=function(){return $(element);};cboxPublic.settings=defaults;$(cboxPublic.init);}(jQuery));(function($){$.fn.jCarouselLite=function(o){o=$.extend({btnPrev:null,btnNext:null,btnGo:null,mouseWheel:false,auto:null,speed:200,easing:null,vertical:false,circular:true,visible:3,start:0,scroll:1,beforeStart:null,afterEnd:null},o||{});return this.each(function(){var running=false,animCss=o.vertical?"top":"left",sizeCss=o.vertical?"height":"width";var div=$(this),ul=div.children("ul"),tLi=ul.children("li"),tl=tLi.size(),v=o.visible;if(o.circular){ul.prepend(tLi.slice(tl-v-1+1).clone()).append(tLi.slice(0,v).clone());o.start+=v;}var li=ul.children("li:visible"),itemLength=li.size(),curr=o.start;div.css("visibility","visible");li.css({overflow:"hidden","float":o.vertical?"none":"left"});ul.css({margin:"0",padding:"0",position:"relative","list-style-type":"none","z-index":"1"});div.css({overflow:"hidden",position:"relative","z-index":"2",left:"0px"});var liSize=o.vertical?height(li):width(li);var ulSize=liSize*itemLength;var divSize=liSize*v;li.css({width:li.width(),height:li.height()});ul.css(sizeCss,ulSize+"px").css(animCss,-(curr*liSize));div.css(sizeCss,divSize+"px");if(o.btnPrev){$(o.btnPrev).click(function(){return go(curr-o.scroll);});}if(o.btnNext){$(o.btnNext).click(function(){return go(curr+o.scroll);});}if(o.btnGo){$.each(o.btnGo,function(i,val){$(val).click(function(){return go(o.circular?o.visible+i:i);});});}if(o.mouseWheel&&div.mousewheel){div.mousewheel(function(e,d){return d>0?go(curr-o.scroll):go(curr+o.scroll);});}if(o.auto){setInterval(function(){go(curr+o.scroll);},o.auto+o.speed);}function vis(){return li.slice(curr).slice(0,v);}function go(to){if(!running){if(o.beforeStart){o.beforeStart.call(this,vis(),to);}if(o.circular){if(to<=o.start-v-1){ul.css(animCss,-((itemLength-(v*2))*liSize)+"px");curr=to==o.start-v-1?itemLength-(v*2)-1:itemLength-(v*2)-o.scroll;}else{if(to>=itemLength-v+1){ul.css(animCss,-((v)*liSize)+"px");curr=to==itemLength-v+1?v+1:v+o.scroll;}else{curr=to;}}}else{if(to<0||to>itemLength-v){return;}else{curr=to;}}running=true;ul.animate(animCss=="left"?{left:-(curr*liSize)}:{top:-(curr*liSize)},o.speed,o.easing,function(){if(o.afterEnd){o.afterEnd.call(this,vis());}running=false;});if(!o.circular){$(o.btnPrev+","+o.btnNext).removeClass("disabled");$((curr-o.scroll<0&&o.btnPrev)||(curr+o.scroll>itemLength-v&&o.btnNext)||[]).addClass("disabled");}}return false;}});};function css(el,prop){return parseInt($.css(el[0],prop))||0;}function width(el){return el[0].offsetWidth+css(el,"marginLeft")+css(el,"marginRight");}function height(el){return el[0].offsetHeight+css(el,"marginTop")+css(el,"marginBottom");}})(jQuery);(function($){$.ifixpng=function(customPixel){$.ifixpng.pixel=customPixel;};$.ifixpng.getPixel=function(){return $.ifixpng.pixel||"/public/images/pixel.gif";};var hack={ltie7:$.browser.msie&&$.browser.version<7,filter:function(src){return"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,sizingMethod=crop,src='"+src+"')";}};$.fn.ifixpng=hack.ltie7?function(){return this.each(function(){var $$=$(this);var base=$("base").attr("href");if(base){base=base.replace(/\/[^\/]+$/,"/");}if($$.is("img")||$$.is("input")){if($$.attr("src")){if($$.attr("src").match(/.*\.png([?].*)?$/i)){var source=(base&&$$.attr("src").search(/^(\/|http:)/i))?base+$$.attr("src"):$$.attr("src");$$.css({filter:hack.filter(source),width:$$.width(),height:$$.height()}).attr({src:$.ifixpng.getPixel()}).positionFix();}}}else{var image=$$.css("backgroundImage");if(image.match(/^url\(["']?(.*\.png([?].*)?)["']?\)$/i)){image=RegExp.$1;image=(base&&image.substring(0,1)!="/")?base+image:image;$$.css({backgroundImage:"none",filter:hack.filter(image)}).children().children().positionFix();}}});}:function(){return this;};$.fn.iunfixpng=hack.ltie7?function(){return this.each(function(){var $$=$(this);var src=$$.css("filter");if(src.match(/src=["']?(.*\.png([?].*)?)["']?/i)){src=RegExp.$1;if($$.is("img")||$$.is("input")){$$.attr({src:src}).css({filter:""});}else{$$.css({filter:"",background:"url("+src+")"});}}});}:function(){return this;};$.fn.positionFix=function(){return this.each(function(){var $$=$(this);var position=$$.css("position");if(position!="absolute"&&position!="relative"){$$.css({position:"relative"});}});};})(jQuery);(function($){var o,console_enabled;$.fn.charcounter=function(options){o=$.extend({},$.fn.charcounter.defaults,options);if(window.console&&window.console.log){console_enabled=true;}return this.each(function(){$this=$(this);_initialize($this);});};function _initialize($this){var input_length,chars_remaining;debug("info","jQ CC > plugin initializing...");debug("time","jQ CC > Initialization");var text_input=$(o.text_input,$this);if(!text_input.length||text_input.length>1){debug("warn","jQ CC > Invalid number of text inputs, should be 1.");return;}var chars_elem=$(o.chars_elem,$this);if(!chars_elem.length||chars_elem.length>1){debug("warn","jQ CC > Invalid number of elements to display remaining characters, should be 1.");return;}var crl=o.chars_rem_low_class;var cro=o.chars_rem_over_class;var iv_flag=false,ok_flag=false;text_input.live("focus",function(){setTimeout(function(){$(this).trigger("keyup");},50);});text_input.live("blur",function(){setTimeout(function(){$(this).trigger("keyup");},50);});text_input.bind("keyup",function(){input_length=$.trim(text_input.val()).length;chars_remaining=parseInt(o.char_limit-input_length);if(!chars_elem.hasClass(o.chars_rem_active_class)){chars_elem.addClass(o.chars_rem_active_class);}chars_elem.text(chars_remaining);if(chars_remaining==o.char_limit||chars_remaining<0){sendBroadcast($this,o.status_trigger,false);}else{sendBroadcast($this,o.status_trigger,true);}if(chars_remaining<0){chars_elem.removeClass(crl).addClass(cro);}else{if(chars_remaining<21&&chars_remaining>-1){chars_elem.removeClass(cro).addClass(crl);}else{chars_elem.removeClass(crl).removeClass(cro);}}});sendBroadcast($this,o.status_trigger,false);chars_elem.text(o.char_limit+" character limit");debug("timeEnd","jQ CC > Initialization");}function sendBroadcast(elem,msg,status){var listener_id=msg+"_"+elem.attr("id");$(document).trigger(listener_id,status);}function debug(state,msg){if(o.debug&&console_enabled){try{eval("window.console."+state)(msg);}catch(err){}}}$.fn.charcounter.defaults={debug:false,text_input:"textarea",char_limit:140,chars_elem:".chars-rem",chars_rem_active_class:"chars-rem-active",chars_rem_low_class:"chars-rem-low",chars_rem_over_class:"chars-rem-over",status_trigger:"CC_STATUS"};})(jQuery);(function($){$.fn.qa=function(options){var base=this;base.init=function(){base.options=$.extend({},$.fn.qa.defaults,options);};base.init();return base.each(function(){$(this).bind("click",function(e){e.preventDefault();var $this=$(this);var question=$this.parent();slider=$(this).next("div.slider");q_icon=$this.children("div.q");if(!question.hasClass("question-active")){question.addClass("question-active");(iVillage.msie6)?q_icon.css({width:"45px",opacity:1}):q_icon.css({width:"0",opacity:0}).animate({width:"45px",opacity:1},"slow");(iVillage.msie6)?slider.show():slider.slideDown("slow");}else{(iVillage.msie6)?q_icon.css({width:0,opacity:0}):q_icon.animate({width:0,opacity:0},"slow",function(){$(this).removeAttr("style");question.removeClass("question-active");});if(iVillage.msie6){$(this).removeAttr("style");question.removeClass("question-active");slider.hide();}else{slider.slideUp("slow");}}}).hover(function(){$(this).css("cursor","pointer");},function(){$(this).removeAttr("style");});});};$.fn.qa.defaults={};})(jQuery);(function($){$.fn.hulu_init=function(idTypeValue){var RelatedVideoObj=new RelatedVideo({parent:"related-links",videoCount:6,idType:idTypeValue});var PageLoader={init:function(){NewSite.videoPlayerComponent.playVideo(idTypeValue);NewSite.videoPlayerComponent.setSize(636,400);$(".related-links-header").html("more from ").addClass("hulu");}};if(NewSite.readyEventFired()){PageLoader.init();}else{NewSite.addListener("newsiteReady",PageLoader,"init");}NewSite.addListener("relatedVideos",RelatedVideoObj,"update");};})(jQuery);(function($){$.comments=function(el,options){var base=this;base.$el=$(el);base.id=base.$el.attr("id");base.el=el;base.$el.data("comments",base);base.init=function(){base.opts=$.extend({},$.comments.defaults,options);if(base.$el.attr("rev")){base.opts.limit=base.$el.attr("rev");}base.valid=true;base.text_input=base.$el.find(base.opts.text_input);base.title_input=base.$el.find(base.opts.title_input);base.bindSubmit();if(base.opts.content_type==="twists"){$(document).bind("sso.twist",base.ssoTwistListener);}else{$(document).bind("sso.chime",base.ssoChimeListener);}if(base.opts.valid_listener){base.invokeValidListener();}base.comments_container=base.$el.find(base.opts.comments_container);base.content_id=base.$el.attr("rel");base.comments_ul=base.$el.find(base.opts.comments_ul);if(base.comments_container.length==1&&!$("#comments").hasClass("do_not_load_comments_on_init")){base.invokeCall("receive");}};function ssoListener(type,params){if(params.type==="guest"){base.guest_name=params.guestName;base.guest_email=params.guestEmail;}if(params.dailyNews){}base.invokeCall("send","new");}base.ssoChimeListener=function(e,params){ssoListener("chime",params);};base.ssoTwistListener=function(e,params){ssoListener("twist",params);};base.invokeCall=function(method,status,elem){var call_type,call_file,call_data,call_content_type;if(method==="receive"){call_type="GET";call_file="list";process=true;call_data={id:base.content_id,type:base.opts.content_type,format:(base.opts.content_type!="twists")?"html":"json"};if(base.opts.limit){call_data.limit=base.opts.limit;}}else{if(method==="send"){call_type="POST";if(status==="new"){call_file="create";call_content_type="application/json";call_data={id:base.content_id,type:base.opts.content_type};process=false;if(base.title_input.length){call_data.title=(base.title_input.hasClass("active"))?$.stripHtml($.trim(base.title_input.val())):"";}call_data.comment=$.stripHtml($.trim(base.text_input.val()));if(!iV_SSO.isLoggedIn()){if(base.guest_name){call_data.guest_name=base.guest_name;}if(base.guest_email){call_data.guest_email=base.guest_email;}}call_data=$.toJSON(call_data);}else{if(status==="existing"){call_file="update";call_content_type="application/json";call_data=$.toJSON($.data(elem,"comment_data"));}}}}base.valid=false;if(base.title_input.length){base.title_input.val("").trigger("blur");}base.text_input.val("").trigger("blur");base.submit_btn.removeClass("hover").addClass("disabled");base.comments_container.find(".pagination-item").live("click",function(e){var url=$(this).children("a").attr("href");e.preventDefault();base.comments_container.load(url);});if(call_data){$.ajax({type:call_type,url:"/ajax/comments/"+call_file,dataType:call_data.format?call_data.format:"json",data:call_data,contentType:call_content_type,processData:process,success:function(json){if(method==="receive"){if(call_data.format=="html"){base.comments_container.html(json);base.comments_ul=$(base.opts.comments_ul,base.$el);base.comments_ul.find("li").each(function(i,e){base.attachCommentEvents($(this));});if(call_data.limit){$(".all-comments .mod-pagination").hide();}}else{base.renderComments(json);$(document).trigger("USER_RATING",base.user_rating);if(base.renderResult){base.truncateComments();}$(document).trigger("COMMENTS_UPDATED_"+base.id);}}else{if(method==="send"){if(status==="new"){base.renderComments(json);if(base.renderResult){base.truncateComments();}}$(document).trigger("COMMENTS_UPDATED_"+base.id);}}$("#comments").show();}});}};base.bindSubmit=function(e){base.submit_btn=base.$el.find(base.opts.submit_btn);if(iVillage.controller==="Entertainment_Controller"&&iVillage.action==="index"){base.submit_btn=$("#chime-in-form button");}if(!base.submit_btn.length||base.submit_btn.length>1){return false;}function handleClick(e){e.preventDefault();if(!$(this).hasClass("disabled")){iV_SSO.chime(e);}}function handleMouseover(e){var that=$(this);if(!that.hasClass("disabled")){that.addClass("hover");}}function handleMouseout(e){var that=$(this);if(!that.hasClass("disabled")){that.removeClass("hover");}}base.submit_btn.removeClass("hide").bind("click",handleClick).bind("mouseover",handleMouseover).bind("mouseout",handleMouseout);return true;};base.renderComments=function(data,source){var new_comments,new_comment,comment_array,i,the_comments;new_comments=[];the_comments=data[base.content_id]||data;$.each(the_comments,function(i,comment){comment_array={cid:comment.cid||"",author_id:comment.author_id||"",author:comment.author||"",author_rating:comment.author_rating||"",guest_name:comment.guest_name||"",guest_email:comment.guest_email||"",image:comment.image||"",date_posted_distance:comment.updated_distance_of_time_in_words||"",title:comment.title||"",message:comment.comment||""};if(base.opts.render_external){new_comment=base.opts.render_external(comment_array,comment);new_comments.push(base.attachCommentEvents(new_comment));}else{new_comment=base.buildComment(comment_array,comment);new_comments.push(base.attachCommentEvents(new_comment));}});for(i=0;i<new_comments.length;i++){base.comments_ul.prepend(new_comments[i]);}base.renderResult=the_comments.length;};base.attachCommentEvents=function(comment){var comment_data={flag:true,cid:comment.find("input[name=cid]").val(),id:comment.find("input[name=id]").val()};$.data(comment,"comment_data",comment_data);comment.find(".flag-link").bind("click",function(e){e.preventDefault();var that=$(this);base.invokeCall("send","existing",comment);comment.children().not(that.parent()).fadeTo("slow",0.2);that.fadeOut("fast",function(){that.text("Marked as inappropriate").fadeIn("fast");});});if($.data(comment,"comment_data").author!=null&&$.data(comment,"comment_data").author.user_id!=null){comment.find(".h5 a, .comment-img").bind("click",function(e){e.preventDefault();window.open(this.href,"profile","height=600,width=600,scrollbars=1");});}return comment;};base.buildComment=function(data,source_data){var rating="";var user,image,user_or_guest,comment;data.author_id=parseInt(data.author_id,10);data.image=data.image||iVillage.random_avatar();if(data.author_id){if(iV_SSO.isLoggedIn()&&iV_SSO.getUserId()===data.author_id){if(source_data.author_rating){base.user_rating=source_data.author_rating;}}}if(data.author_id){if(data.author!=null&&data.author!=""&&typeof(data.author)!="object"){profile_link="/profiles/user/"+data.author;}else{profile_link="/profiles/"+data.author_id;}image='<a href="'+profile_link+'" class="comment-img" title="View '+data.author+'&rsquo;s profile"><img src="'+data.image+'" width="60" height="60" alt="'+data.author+'" /></a>';user='<a href="'+profile_link+'" title="View '+data.author+'&rsquo;s profile">'+data.author+"</a>";}else{image='<div class="comment-img"><img src="'+data.image+'" width="60" height="60" alt="'+data.author+'" /></div>';user_or_guest=data.guest_name||"Anonymous";user="<span>"+user_or_guest+"</span>";}if(base.opts.rating&&source_data.author_rating!=null&&data.author_id!=null){rating='<div class="rating rating-'+source_data.author_rating+'"></div>';}comment=$("<li>"+rating+'<div class="h5">'+user+" replied about "+data.date_posted_distance+" ago</div>"+image+"<blockquote>"+data.message+'</blockquote><div class="flag-wrap"><a href="#" class="flag-link">Flag as Inappropriate</a></div></li>');if(source_data){$.data(comment,"comment_data",source_data);}else{$.data(comment,"comment_data",data);}return comment;};base.truncateComments=function(){if(base.opts.display_comments&&!base.opts.see_all_link){base.comments=base.comments_ul.children().not(".all");if(base.comments.length>base.opts.display_comments){base.comments.filter(":gt("+parseInt(base.opts.display_comments-1)+")").not(".all").hide();if(base.opts.show_all_link){var old_all_link=base.comments_ul.children(".all");if(old_all_link.length){old_all_link.remove();}$('<li class="all"><a href="#" class="more-link">Read All '+base.comments.length+" "+base.opts.comment_type+"</a></li>").appendTo(base.comments_ul).bind("click",function(e){e.preventDefault();base.comments.filter(":hidden").fadeIn("medium");$(this).remove();});}}}};base.invokeValidListener=function(){base.listener_id=base.opts.valid_listener+"_"+base.id;$(document).bind(base.listener_id,function(e,status){base.valid=status;base.updatePanel(status);});};base.updatePanel=function(status){switch(status){case true:base.submit_btn.removeClass("disabled");break;case false:base.submit_btn.addClass("disabled");break;}};base.init();};$.comments.defaults={rating:false,content_type:"comments",title_input:'input[type="text"]',text_input:"textarea",show_all_link:true,comments_container:".all-comments",comments_ul:"ul.comments",comment_type:"Comments",flag_inappropriate:false,submit_btn:".submit"};$.fn.comments=function(options){return this.each(function(){(new $.comments(this,options));});};})(jQuery);(function($){$.fn.appear=function(fn,options){var settings=$.extend({data:undefined,one:true},options);return this.each(function(){var t=$(this);t.appeared=false;if(!fn){t.trigger("appear",settings.data);return;}var w=$(window);var check=function(){if(!t.is(":visible")){t.appeared=false;return;}var a=w.scrollLeft();var b=w.scrollTop();var o=t.offset();var x=o.left;var y=o.top;if(y+t.height()>=b&&y<=b+w.height()&&x+t.width()>=a&&x<=a+w.width()){if(!t.appeared){t.trigger("appear",settings.data);}}else{t.appeared=false;}};var modifiedFn=function(){t.appeared=true;if(settings.one){w.unbind("scroll",check);var i=$.inArray(check,$.fn.appear.checks);if(i>=0){$.fn.appear.checks.splice(i,1);}}fn.apply(this,arguments);};if(settings.one){t.one("appear",settings.data,modifiedFn);}else{t.bind("appear",settings.data,modifiedFn);}w.scroll(check);$.fn.appear.checks.push(check);(check)();});};$.extend($.fn.appear,{checks:[],timeout:null,checkAll:function(){var length=$.fn.appear.checks.length;if(length>0){while(length--){($.fn.appear.checks[length])();}}},run:function(){if($.fn.appear.timeout){clearTimeout($.fn.appear.timeout);}$.fn.appear.timeout=setTimeout($.fn.appear.checkAll,20);}});$.each(["append","prepend","after","before","attr","removeAttr","addClass","removeClass","toggleClass","remove","css","show","hide"],function(i,n){var old=$.fn[n];if(old){$.fn[n]=function(){var r=old.apply(this,arguments);$.fn.appear.run();return r;};}});})(jQuery);(function($){$.fn.sweepstakes=function(options){var plugins=new Array(),defaults={},opts=$.extend(defaults,options);var error_messages=new Array();error_messages.sweeps_id='Oops! This sweepstakes has ended. So, what are you waiting for? Check out our <a href="/free-stuff/8-j-229685">Free &amp; Fun Stuff page</a> for more chances to win!';error_messages.inactive='Oops! This sweepstakes has ended. So, what are you waiting for? Check out our <a href="/free-stuff/8-j-229685">Free &amp; Fun Stuff page</a> for more chances to win!';error_messages["password_confirmation.match"]="Oops! Looks like your password don't match. Let's try that again!";error_messages["empty-password"]="Don't forget to enter a password!";error_messages["email.invalid"]="Can you double check that? It needs to ve a valid email address. Thanks!";error_messages["token.invalid"]="Oops! Please logout and log back in again before submitting your entry.";error_messages["person.invalid"]="Oops! Please logout and log back in again before submitting your entry.";error_messages["username.invalid_update"]="Oops! Looks like that username is taken. Please try again.";error_messages["interval-limit-reached"]="Sorry! You've reached your maximum number of entries for today. Be sure to come back later to enter again!";error_messages["total-limit-reached"]="Sorry! You've reached the maximum number of entries for this sweepstakes. Don't worry though - if you check out our <a href=\"/free-stuff/8-j-229685\">Free &amp; Fun Stuff page</a>, there are more chances to win!";error_messages["default"]="Oops! Our servers are having a little bit of trouble. Could you try again a little later? Thanks!.";var plugins_missing=false;for(var i=0;i<plugins.length;i++){if(!jQuery()[plugins[i]]){plugins_missing=true;console.warn("Missing Plugin: "+plugins[i]+"()");}}if(plugins_missing){return false;}var theErrorArrow='<span class="error-arrow"></span>';$.validator.addMethod("sweeps_field_required",function(value,element){if($(element).attr("type")=="checkbox"){return $(element).attr("checked");}else{return value!=="";}},theErrorArrow+"Oops! This field is required.");$.validator.addClassRules({sweeps_required:{sweeps_field_required:true}});$.validator.addMethod("zipcode",function(value,element){return this.optional(element)||value.match(/(^\d{5}(-\d{4})?$)|(^[ABCEGHJKLMNPRSTVXYabceghjklmnpstvxy]{1}\d{1}[A-Za-z]{1} ?\d{1}[A-Za-z]{1}\d{1})$/);},theErrorArrow+"Please specify a valid zip/postal code");$.validator.addMethod("not_default",function(value,element){return !$(element).hasClass("sweeps_required")||value!=="default";},theErrorArrow+"Please select an option.");var validation={landing:{rules:{user_email:{required:true,email:true}},messages:{user_email:{required:theErrorArrow+"Please enter your email address.",email:theErrorArrow+"Please enter a valid email address."}}},entry:{rules:{email:{required:true,email:true},zip:{zipcode:true},dob_month:{not_default:true},dob_day:{not_default:true},dob_year:{not_default:true},state:{not_default:true},phone1:{maxlength:3,minlength:3},phone2:{maxlength:3,minlength:3},phone3:{maxlength:4,minlength:4},mobile1:{maxlength:3,minlength:3},mobile2:{maxlength:3,minlength:3},mobile3:{maxlength:4,minlength:4}},groups:{phoneNumber:"phone1 phone2 phone3",mobileNumber:"mobile1 mobile2 mobile3"},messages:{email:{required:theErrorArrow+"Please enter your email address.",email:theErrorArrow+"Please enter a valid email address."},dob_month:{not_default:theErrorArrow+"Please select your birth month."},dob_day:{not_default:theErrorArrow+"Please select your birth day."},dob_year:{not_default:theErrorArrow+"Please select your birth year."},state:{not_default:theErrorArrow+"Please select a State."},phone1:{maxlength:theErrorArrow+"Maximum 3 digits are allowed.",minlength:theErrorArrow+"Entered number is not valid."},phone2:{maxlength:theErrorArrow+"Maximum 3 digits are allowed.",minlength:theErrorArrow+"Entered number is not valid."},phone3:{maxlength:theErrorArrow+"Maximum 4 digits are allowed.",minlength:theErrorArrow+"Entered number is not valid."},mobile1:{maxlength:theErrorArrow+"Maximum 3 digits are allowed.",minlength:theErrorArrow+"Entered number is not valid."},mobile2:{maxlength:theErrorArrow+"Maximum 3 digits are allowed.",minlength:theErrorArrow+"Entered number is not valid."},mobile3:{maxlength:theErrorArrow+"Maximum 4 digits are allowed.",minlength:theErrorArrow+"Entered number is not valid."}},errorPlacement:function(error,element){if(element.attr("name")=="phone1"||element.attr("name")=="phone2"||element.attr("name")=="phone3"){error.insertAfter("#phoneLast");}else{if(element.attr("name")=="mobile1"||element.attr("name")=="mobile2"||element.attr("name")=="mobile3"){error.insertAfter("#mobileLast");}else{error.insertAfter(element);}}}}};var init=function(){var container_div=$(".sweeps-container");var current_min_height=container_div.height();var inner_container_height=container_div.children("div.sweepstakes-background").height();if(current_min_height<inner_container_height){container_div.height(inner_container_height);}$("#sweepstakes-welcome-page a.sso-logout").live("click",function(event){var form=$("#sweepstakes-welcome-page");switchButtonToLoading(form);});bindSubmitForWelcome("#sweepstakes-welcome-page");bindSubmitForEntry("#sweepstakes-entry-page");showShareOnThankyou();},bindSubmitForWelcome=function(formID){$(formID).validate(validation.landing);$(formID).live("submit",function(event){var form=$(event.target);switchButtonToLoading(form);});$(formID).find("input[type=submit]").live("click",function(event){event.preventDefault();$(this).parents("form").submit();});bindFormSubmitOnEnter(formID);},bindSubmitForEntry=function(formID){$(formID).validate(validation.entry);$(formID).live("submit",function(event){doEntry(event);});$(formID).find("input[type=submit]").live("click",function(event){event.preventDefault();$(this).parents("form").submit();});bindFormSubmitOnEnter(formID);},bindFormSubmitOnEnter=function(formID){var theForm=$(formID);theForm.find("input").keypress(function(event){if((event.which&&event.which==13)||(event.keyCode&&event.keyCode==13)){theForm.find("input[type=submit]").click();return false;}else{return true;}});},showShareOnThankyou=function(){if($("#sweeps-related-content").length>0){$.fn.ssoColorbox({title:"Tell a friend",html:$("#sweeps-related-content").html(),scrolling:false,onComplete:function(){$("#sso-cbox .sweeps-share").append('<div class="sweepsShareToolsHeaderText"><table style="width: 100%;" cellpadding="0" cellspacing="0" width="100%"><tbody><td style="width: 52px;"></td><td style="width: 436px; height: 27px; background-color: rgb(110, 132, 181); border: 1px solid rgb(58, 90, 151);" height="27"><table style="height:100%; width: 100%;" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td style="font-family: Tahoma; font-size: 14px; font-weight: bold; color: rgb(255, 255, 255); padding-left: 6px; vertical-align: middle;">Share with your friends</td></tr></tbody></table></td></tbody></table></div>');$("#sso-cbox .sweeps-share").append('<div id="sweepsShareTools"></div>');if(typeof(iV_SocialLife)!="undefined"){iV_SocialLife.loadSweepsSharePlugin(function(){setTimeout(function(){$.fn.ssoColorbox.resize();},200);});}},overlayClose:false});$("#sso-cbox-close").live("click",function(event){event.preventDefault();});}},switchButtonToLoading=function(form){form.find("div.sweeps-button").hide().after('<div class="sweeps-ajax-load">Loading...</div>');},switchLoadingToButton=function(form){form.find("div.sweeps-button").show().next().remove();},doEntry=function(event){event.preventDefault();var form=$("#sweepstakes-entry-page");var submitData=form.serializeArray();switchButtonToLoading(form);hideSweepsError();if(typeof(iVillage)!="undefined"&&typeof(iVillage.arw_token)!="undefined"){submitData.push({name:"token",value:iVillage.arw_token});}$.ajax({type:"POST",url:"/ajax/sweepstakes/signup",cache:false,data:submitData,dataType:"json",success:function(data){if(typeof(data)=="undefined"){showSweepsError();}else{if(data.success){window.location.href=window.location.protocol+"//"+window.location.hostname+window.location.pathname+"?sweep_entry=1";}else{switchLoadingToButton(form);if(data.message){showSweepsError(data.message);}}}},error:function(){switchLoadingToButton(form);showSweepsError();}});},showSweepsError=function(messages){var return_message='<div class="sweeps_submission_errors"><ul>';if(messages instanceof Array&&messages.length>0){for(var count=0;count<messages.length;count++){if(messages[count] in error_messages){return_message+="<li>"+error_messages[messages[count]]+"</li>";}}}else{return_message+="<li>"+error_messages["default"]+"</li>";}return_message+="</ul></div>";$(".sweeps-entry-page").append(return_message);},hideSweepsError=function(){$(".sweeps_submission_errors").remove();};init();};})(jQuery);var railAdsReset=false;function updateiVRailAds(){var sitebody=$("body");if(!$("body").attr("id")){$("body").attr("id","iv_home_page_id");}if((typeof(railAdBg)!="undefined")&&(railAdBg)){$("#network-hat-wrap").css({width:"1000px",margin:"auto"});sitebody.css({"background-image":"url("+railAdBg+")"});}if((typeof(railAdBgColor)!="undefined")&&(railAdBgColor)){sitebody.css({"background-color":"#"+railAdBgColor});}if((typeof(railAdBgRepeat)!="undefined")&&(railAdBgRepeat)){sitebody.css({"background-repeat":railAdBgRepeat});}sitebody.css({"background-attachment":"scroll","background-position":"top center"});if((typeof(railAdBgClickthru)!="undefined")&&(railAdBgClickthru)){sitebody.click(function(e){evt=e||window.event;if(e.target){targ=e.target;}else{if(e.srcElement){targ=e.srcElement;}}if(targ.nodeType==3){targ=targ.parentNode;}if(targ.id==sitebody.attr("id")){window.open(railAdBgClickthru);}});$("#"+sitebody.attr("id")).bind("mouseenter",function(){$(this).css("cursor","default");});$("#"+sitebody.attr("id")).bind("mouseleave",function(){$(this).css("cursor","default");});}railAdsReset=false;}function resetiVRailAds(){if(railAdsReset){return;}var sitebody=$("body");var railNeedReset=false;if((typeof(railAdBg)!="undefined")){railAdBg=undefined;railNeedReset=true;}if((typeof(railAdBgColor)!="undefined")){railAdBgColor=undefined;railNeedReset=true;}if((typeof(railAdBgRepeat)!="undefined")){railAdBgRepeat=undefined;railNeedReset=true;}if((typeof(railAdBgClickthru)!="undefined")){railAdBgClickthru=undefined;railNeedReset=true;}if(railNeedReset){sitebody.css({"background-image":"url(/public/images/decorations/bg-diagonal-1.gif)"});sitebody.css({"background-color":"transparent"});sitebody.css({"background-repeat":"repeat"});}sitebody.unbind("click");railAdsReset=true;}/*
 * jQuery idleTimer plugin
 * version 0.9.100511
 * by Paul Irish. 
 *   http://github.com/paulirish/yui-misc/tree/
 * MIT license
 
 * adapted from YUI idle timer by nzakas:
 *   http://github.com/nzakas/yui-misc/
*/
(function($){$.idleTimer=function(newTimeout,elem){var idle=false,enabled=true,timeout=30000,events="mousemove keydown DOMMouseScroll mousewheel mousedown";elem=elem||document;var toggleIdleState=function(myelem){if(typeof myelem=="number"){myelem=undefined;}var obj=$.data(myelem||elem,"idleTimerObj");obj.idle=!obj.idle;obj.olddate=+new Date;var event=jQuery.Event($.data(elem,"idleTimer",obj.idle?"idle":"active")+".idleTimer");event.stopPropagation();$(elem).trigger(event);},stop=function(elem){var obj=$.data(elem,"idleTimerObj");obj.enabled=false;clearTimeout(obj.tId);$(elem).unbind(".idleTimer");},handleUserEvent=function(){var obj=$.data(this,"idleTimerObj");clearTimeout(obj.tId);if(obj.enabled){if(obj.idle){toggleIdleState(this);}obj.tId=setTimeout(toggleIdleState,obj.timeout);}};var obj=$.data(elem,"idleTimerObj")||new function(){};obj.olddate=obj.olddate||+new Date;if(typeof newTimeout=="number"){timeout=newTimeout;}else{if(newTimeout==="destroy"){stop(elem);return this;}else{if(newTimeout==="getElapsedTime"){return(+new Date)-obj.olddate;}}}$(elem).bind($.trim((events+" ").split(" ").join(".idleTimer ")),handleUserEvent);obj.idle=idle;obj.enabled=enabled;obj.timeout=timeout;obj.tId=setTimeout(toggleIdleState,obj.timeout);$.data(elem,"idleTimer","active");$.data(elem,"idleTimerObj",obj);};$.fn.idleTimer=function(newTimeout){this[0]&&$.idleTimer(newTimeout,this[0]);return this;};})(jQuery);if(jQuery){(function(jQuery){jQuery.extend(jQuery.fn,{uploadify:function(options){jQuery(this).each(function(){var settings=jQuery.extend({id:jQuery(this).attr("id"),uploader:"uploadify.swf",script:"uploadify.php",expressInstall:null,folder:"",height:30,width:120,cancelImg:"cancel.png",wmode:"opaque",scriptAccess:"sameDomain",fileDataName:"Filedata",method:"POST",queueSizeLimit:999,simUploadLimit:1,queueID:false,displayData:"percentage",removeCompleted:true,onInit:function(){},onSelect:function(){},onSelectOnce:function(){},onQueueFull:function(){},onCheck:function(){},onCancel:function(){},onClearQueue:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){}},options);jQuery(this).data("settings",settings);var pagePath=location.pathname;pagePath=pagePath.split("/");pagePath.pop();pagePath=pagePath.join("/")+"/";var data={};data.uploadifyID=settings.id;data.pagepath=pagePath;if(settings.buttonImg){data.buttonImg=escape(settings.buttonImg);}if(settings.buttonText){data.buttonText=escape(settings.buttonText);}if(settings.rollover){data.rollover=true;}data.script=settings.script;data.folder=escape(settings.folder);if(settings.scriptData){var scriptDataString="";for(var name in settings.scriptData){scriptDataString+="&"+name+"="+settings.scriptData[name];}data.scriptData=escape(scriptDataString.substr(1));}data.width=settings.width;data.height=settings.height;data.wmode=settings.wmode;data.method=settings.method;data.queueSizeLimit=settings.queueSizeLimit;data.simUploadLimit=settings.simUploadLimit;if(settings.hideButton){data.hideButton=true;}if(settings.fileDesc){data.fileDesc=settings.fileDesc;}if(settings.fileExt){data.fileExt=settings.fileExt;}if(settings.multi){data.multi=true;}if(settings.auto){data.auto=true;}if(settings.sizeLimit){data.sizeLimit=settings.sizeLimit;}if(settings.checkScript){data.checkScript=settings.checkScript;}if(settings.fileDataName){data.fileDataName=settings.fileDataName;}if(settings.queueID){data.queueID=settings.queueID;}if(settings.onInit()!==false){jQuery(this).css("display","none");jQuery(this).after('<div id="'+jQuery(this).attr("id")+'Uploader"></div>');swfobject.embedSWF(settings.uploader,settings.id+"Uploader",settings.width,settings.height,"9.0.24",settings.expressInstall,data,{quality:"high",wmode:settings.wmode,allowScriptAccess:settings.scriptAccess},{},function(event){if(typeof(settings.onSWFReady)=="function"&&event.success){settings.onSWFReady();}});if(settings.queueID==false){jQuery("#"+jQuery(this).attr("id")+"Uploader").after('<div id="'+jQuery(this).attr("id")+'Queue" class="uploadifyQueue"></div>');}else{jQuery("#"+settings.queueID).addClass("uploadifyQueue");}}if(typeof(settings.onOpen)=="function"){jQuery(this).bind("uploadifyOpen",settings.onOpen);}jQuery(this).bind("uploadifySelect",{action:settings.onSelect,queueID:settings.queueID},function(event,ID,fileObj){if(event.data.action(event,ID,fileObj)!==false){var byteSize=Math.round(fileObj.size/1024*100)*0.01;var suffix="KB";if(byteSize>1000){byteSize=Math.round(byteSize*0.001*100)*0.01;suffix="MB";}var sizeParts=byteSize.toString().split(".");if(sizeParts.length>1){byteSize=sizeParts[0]+"."+sizeParts[1].substr(0,2);}else{byteSize=sizeParts[0];}if(fileObj.name.length>20){fileName=fileObj.name.substr(0,20)+"...";}else{fileName=fileObj.name;}queue="#"+jQuery(this).attr("id")+"Queue";if(event.data.queueID){queue="#"+event.data.queueID;}jQuery(queue).append('<div id="'+jQuery(this).attr("id")+ID+'" class="uploadifyQueueItem">								<div class="cancel">									<a href="javascript:jQuery(\'#'+jQuery(this).attr("id")+"').uploadifyCancel('"+ID+'\')"><img src="'+settings.cancelImg+'" border="0" /></a>								</div>								<span class="fileName">'+fileName+" ("+byteSize+suffix+')</span><span class="percentage"></span>								<div class="uploadifyProgress">									<div id="'+jQuery(this).attr("id")+ID+'ProgressBar" class="uploadifyProgressBar"><!--Progress Bar--></div>								</div>							</div>');}});jQuery(this).bind("uploadifySelectOnce",{action:settings.onSelectOnce},function(event,data){event.data.action(event,data);if(settings.auto){if(settings.checkScript){jQuery(this).uploadifyUpload(null,false);}else{jQuery(this).uploadifyUpload(null,true);}}});jQuery(this).bind("uploadifyQueueFull",{action:settings.onQueueFull},function(event,queueSizeLimit){if(event.data.action(event,queueSizeLimit)!==false){alert("The queue is full.  The max size is "+queueSizeLimit+".");}});jQuery(this).bind("uploadifyCheckExist",{action:settings.onCheck},function(event,checkScript,fileQueueObj,folder,single){var postData=new Object();postData=fileQueueObj;postData.folder=(folder.substr(0,1)=="/")?folder:pagePath+folder;if(single){for(var ID in fileQueueObj){var singleFileID=ID;}}jQuery.post(checkScript,postData,function(data){for(var key in data){if(event.data.action(event,data,key)!==false){var replaceFile=confirm("Do you want to replace the file "+data[key]+"?");if(!replaceFile){document.getElementById(jQuery(event.target).attr("id")+"Uploader").cancelFileUpload(key,true,true);}}}if(single){document.getElementById(jQuery(event.target).attr("id")+"Uploader").startFileUpload(singleFileID,true);}else{document.getElementById(jQuery(event.target).attr("id")+"Uploader").startFileUpload(null,true);}},"json");});jQuery(this).bind("uploadifyCancel",{action:settings.onCancel},function(event,ID,fileObj,data,remove,clearFast){if(event.data.action(event,ID,fileObj,data,clearFast)!==false){if(remove){var fadeSpeed=(clearFast==true)?0:250;jQuery("#"+jQuery(this).attr("id")+ID).fadeOut(fadeSpeed,function(){jQuery(this).remove();});}}});jQuery(this).bind("uploadifyClearQueue",{action:settings.onClearQueue},function(event,clearFast){var queueID=(settings.queueID)?settings.queueID:jQuery(this).attr("id")+"Queue";if(clearFast){jQuery("#"+queueID).find(".uploadifyQueueItem").remove();}if(event.data.action(event,clearFast)!==false){jQuery("#"+queueID).find(".uploadifyQueueItem").each(function(){var index=jQuery(".uploadifyQueueItem").index(this);jQuery(this).delay(index*100).fadeOut(250,function(){jQuery(this).remove();});});}});var errorArray=[];jQuery(this).bind("uploadifyError",{action:settings.onError},function(event,ID,fileObj,errorObj){if(event.data.action(event,ID,fileObj,errorObj)!==false){var fileArray=new Array(ID,fileObj,errorObj);errorArray.push(fileArray);jQuery("#"+jQuery(this).attr("id")+ID).find(".percentage").text(" - "+errorObj.type+" Error");jQuery("#"+jQuery(this).attr("id")+ID).find(".uploadifyProgress").hide();jQuery("#"+jQuery(this).attr("id")+ID).addClass("uploadifyError");}});if(typeof(settings.onUpload)=="function"){jQuery(this).bind("uploadifyUpload",settings.onUpload);}jQuery(this).bind("uploadifyProgress",{action:settings.onProgress,toDisplay:settings.displayData},function(event,ID,fileObj,data){if(event.data.action(event,ID,fileObj,data)!==false){jQuery("#"+jQuery(this).attr("id")+ID+"ProgressBar").animate({width:data.percentage+"%"},250,function(){if(data.percentage==100){jQuery(this).closest(".uploadifyProgress").fadeOut(250,function(){jQuery(this).remove();});}});if(event.data.toDisplay=="percentage"){displayData=" - "+data.percentage+"%";}if(event.data.toDisplay=="speed"){displayData=" - "+data.speed+"KB/s";}if(event.data.toDisplay==null){displayData=" ";}jQuery("#"+jQuery(this).attr("id")+ID).find(".percentage").text(displayData);}});jQuery(this).bind("uploadifyComplete",{action:settings.onComplete},function(event,ID,fileObj,response,data){if(event.data.action(event,ID,fileObj,unescape(response),data)!==false){jQuery("#"+jQuery(this).attr("id")+ID).find(".percentage").text(" - Completed");if(settings.removeCompleted){jQuery("#"+jQuery(event.target).attr("id")+ID).fadeOut(250,function(){jQuery(this).remove();});}jQuery("#"+jQuery(event.target).attr("id")+ID).addClass("completed");}});if(typeof(settings.onAllComplete)=="function"){jQuery(this).bind("uploadifyAllComplete",{action:settings.onAllComplete},function(event,data){if(event.data.action(event,data)!==false){errorArray=[];}});}});},uploadifySettings:function(settingName,settingValue,resetObject){var returnValue=false;jQuery(this).each(function(){if(settingName=="scriptData"&&settingValue!=null){if(resetObject){var scriptData=settingValue;}else{var scriptData=jQuery.extend(jQuery(this).data("settings").scriptData,settingValue);}var scriptDataString="";for(var name in scriptData){scriptDataString+="&"+name+"="+scriptData[name];}settingValue=escape(scriptDataString.substr(1));}returnValue=document.getElementById(jQuery(this).attr("id")+"Uploader").updateSettings(settingName,settingValue);});if(settingValue==null){if(settingName=="scriptData"){var returnSplit=unescape(returnValue).split("&");var returnObj=new Object();for(var i=0;i<returnSplit.length;i++){var iSplit=returnSplit[i].split("=");returnObj[iSplit[0]]=iSplit[1];}returnValue=returnObj;}}return returnValue;},uploadifyUpload:function(ID,checkComplete){jQuery(this).each(function(){if(!checkComplete){checkComplete=false;}document.getElementById(jQuery(this).attr("id")+"Uploader").startFileUpload(ID,checkComplete);});},uploadifyCancel:function(ID){jQuery(this).each(function(){document.getElementById(jQuery(this).attr("id")+"Uploader").cancelFileUpload(ID,true,true,false);});},uploadifyClearQueue:function(){jQuery(this).each(function(){document.getElementById(jQuery(this).attr("id")+"Uploader").clearFileUploadQueue(false);});}});})(jQuery);}(function($){$.Jcrop=function(obj,opt){var obj=obj,opt=opt;if(typeof(obj)!=="object"){obj=$(obj)[0];}if(typeof(opt)!=="object"){opt={};}if(!("trackDocument" in opt)){opt.trackDocument=$.browser.msie?false:true;if($.browser.msie&&$.browser.version.split(".")[0]=="8"){opt.trackDocument=true;}}if(!("keySupport" in opt)){opt.keySupport=$.browser.msie?false:true;}var defaults={trackDocument:false,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,borderOpacity:0.4,handleOpacity:0.5,handlePad:5,handleSize:9,handleOffset:5,edgeMargin:14,aspectRatio:0,keySupport:true,cornerHandles:true,sideHandles:true,drawBorders:true,dragEdges:true,boxWidth:0,boxHeight:0,boundary:8,animationDelay:20,swingSpeed:3,allowSelect:true,allowMove:true,allowResize:true,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){}};var options=defaults;setOptions(opt);var $origimg=$(obj);var $img=$origimg.clone().removeAttr("id").css({position:"absolute"});$img.width($origimg.width());$img.height($origimg.height());$origimg.after($img).hide();presize($img,options.boxWidth,options.boxHeight);var boundx=$img.width(),boundy=$img.height(),$div=$("<div />").width(boundx).height(boundy).addClass(cssClass("holder")).css({position:"relative",backgroundColor:options.bgColor}).insertAfter($origimg).append($img);if(options.addClass){$div.addClass(options.addClass);}var $img2=$("<img />").attr("src",$img.attr("src")).css("position","absolute").width(boundx).height(boundy);var $img_holder=$("<div />").width(pct(100)).height(pct(100)).css({zIndex:310,position:"absolute",overflow:"hidden"}).append($img2);var $hdl_holder=$("<div />").width(pct(100)).height(pct(100)).css("zIndex",320);var $sel=$("<div />").css({position:"absolute",zIndex:300}).insertBefore($img).append($img_holder,$hdl_holder);var bound=options.boundary;var $trk=newTracker().width(boundx+(bound*2)).height(boundy+(bound*2)).css({position:"absolute",top:px(-bound),left:px(-bound),zIndex:290}).mousedown(newSelection);var xlimit,ylimit,xmin,ymin;var xscale,yscale,enabled=true;var docOffset=getPos($img),btndown,lastcurs,dimmed,animating,shift_down;var Coords=function(){var x1=0,y1=0,x2=0,y2=0,ox,oy;function setPressed(pos){var pos=rebound(pos);x2=x1=pos[0];y2=y1=pos[1];}function setCurrent(pos){var pos=rebound(pos);ox=pos[0]-x2;oy=pos[1]-y2;x2=pos[0];y2=pos[1];}function getOffset(){return[ox,oy];}function moveOffset(offset){var ox=offset[0],oy=offset[1];if(0>x1+ox){ox-=ox+x1;}if(0>y1+oy){oy-=oy+y1;}if(boundy<y2+oy){oy+=boundy-(y2+oy);}if(boundx<x2+ox){ox+=boundx-(x2+ox);}x1+=ox;x2+=ox;y1+=oy;y2+=oy;}function getCorner(ord){var c=getFixed();switch(ord){case"ne":return[c.x2,c.y];case"nw":return[c.x,c.y];case"se":return[c.x2,c.y2];case"sw":return[c.x,c.y2];}}function getFixed(){if(!options.aspectRatio){return getRect();}var aspect=options.aspectRatio,min_x=options.minSize[0]/xscale,min_y=options.minSize[1]/yscale,max_x=options.maxSize[0]/xscale,max_y=options.maxSize[1]/yscale,rw=x2-x1,rh=y2-y1,rwa=Math.abs(rw),rha=Math.abs(rh),real_ratio=rwa/rha,xx,yy;if(max_x==0){max_x=boundx*10;}if(max_y==0){max_y=boundy*10;}if(real_ratio<aspect){yy=y2;w=rha*aspect;xx=rw<0?x1-w:w+x1;if(xx<0){xx=0;h=Math.abs((xx-x1)/aspect);yy=rh<0?y1-h:h+y1;}else{if(xx>boundx){xx=boundx;h=Math.abs((xx-x1)/aspect);yy=rh<0?y1-h:h+y1;}}}else{xx=x2;h=rwa/aspect;yy=rh<0?y1-h:y1+h;if(yy<0){yy=0;w=Math.abs((yy-y1)*aspect);xx=rw<0?x1-w:w+x1;}else{if(yy>boundy){yy=boundy;w=Math.abs(yy-y1)*aspect;xx=rw<0?x1-w:w+x1;}}}if(xx>x1){if(xx-x1<min_x){xx=x1+min_x;}else{if(xx-x1>max_x){xx=x1+max_x;}}if(yy>y1){yy=y1+(xx-x1)/aspect;}else{yy=y1-(xx-x1)/aspect;}}else{if(xx<x1){if(x1-xx<min_x){xx=x1-min_x;}else{if(x1-xx>max_x){xx=x1-max_x;}}if(yy>y1){yy=y1+(x1-xx)/aspect;}else{yy=y1-(x1-xx)/aspect;}}}if(xx<0){x1-=xx;xx=0;}else{if(xx>boundx){x1-=xx-boundx;xx=boundx;}}if(yy<0){y1-=yy;yy=0;}else{if(yy>boundy){y1-=yy-boundy;yy=boundy;}}return last=makeObj(flipCoords(x1,y1,xx,yy));}function rebound(p){if(p[0]<0){p[0]=0;}if(p[1]<0){p[1]=0;}if(p[0]>boundx){p[0]=boundx;}if(p[1]>boundy){p[1]=boundy;}return[p[0],p[1]];}function flipCoords(x1,y1,x2,y2){var xa=x1,xb=x2,ya=y1,yb=y2;if(x2<x1){xa=x2;xb=x1;}if(y2<y1){ya=y2;yb=y1;}return[Math.round(xa),Math.round(ya),Math.round(xb),Math.round(yb)];}function getRect(){var xsize=x2-x1;var ysize=y2-y1;if(xlimit&&(Math.abs(xsize)>xlimit)){x2=(xsize>0)?(x1+xlimit):(x1-xlimit);}if(ylimit&&(Math.abs(ysize)>ylimit)){y2=(ysize>0)?(y1+ylimit):(y1-ylimit);}if(ymin&&(Math.abs(ysize)<ymin)){y2=(ysize>0)?(y1+ymin):(y1-ymin);}if(xmin&&(Math.abs(xsize)<xmin)){x2=(xsize>0)?(x1+xmin):(x1-xmin);}if(x1<0){x2-=x1;x1-=x1;}if(y1<0){y2-=y1;y1-=y1;}if(x2<0){x1-=x2;x2-=x2;}if(y2<0){y1-=y2;y2-=y2;}if(x2>boundx){var delta=x2-boundx;x1-=delta;x2-=delta;}if(y2>boundy){var delta=y2-boundy;y1-=delta;y2-=delta;}if(x1>boundx){var delta=x1-boundy;y2-=delta;y1-=delta;}if(y1>boundy){var delta=y1-boundy;y2-=delta;y1-=delta;}return makeObj(flipCoords(x1,y1,x2,y2));}function makeObj(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]};}return{flipCoords:flipCoords,setPressed:setPressed,setCurrent:setCurrent,getOffset:getOffset,moveOffset:moveOffset,getCorner:getCorner,getFixed:getFixed};}();var Selection=function(){var start,end,dragmode,awake,hdep=370;var borders={};var handle={};var seehandles=false;var hhs=options.handleOffset;if(options.drawBorders){borders={top:insertBorder("hline").css("top",$.browser.msie?px(-1):px(0)),bottom:insertBorder("hline"),left:insertBorder("vline"),right:insertBorder("vline")};}if(options.dragEdges){handle.t=insertDragbar("n");handle.b=insertDragbar("s");handle.r=insertDragbar("e");handle.l=insertDragbar("w");}options.sideHandles&&createHandles(["n","s","e","w"]);options.cornerHandles&&createHandles(["sw","nw","ne","se"]);function insertBorder(type){var jq=$("<div />").css({position:"absolute",opacity:options.borderOpacity}).addClass(cssClass(type));$img_holder.append(jq);return jq;}function dragDiv(ord,zi){var jq=$("<div />").mousedown(createDragger(ord)).css({cursor:ord+"-resize",position:"absolute",zIndex:zi});$hdl_holder.append(jq);return jq;}function insertHandle(ord){return dragDiv(ord,hdep++).css({top:px(-hhs+1),left:px(-hhs+1),opacity:options.handleOpacity}).addClass(cssClass("handle"));}function insertDragbar(ord){var s=options.handleSize,o=hhs,h=s,w=s,t=o,l=o;switch(ord){case"n":case"s":w=pct(100);break;case"e":case"w":h=pct(100);break;}return dragDiv(ord,hdep++).width(w).height(h).css({top:px(-t+1),left:px(-l+1)});}function createHandles(li){for(i in li){handle[li[i]]=insertHandle(li[i]);}}function moveHandles(c){var midvert=Math.round((c.h/2)-hhs),midhoriz=Math.round((c.w/2)-hhs),north=west=-hhs+1,east=c.w-hhs,south=c.h-hhs,x,y;"e" in handle&&handle.e.css({top:px(midvert),left:px(east)})&&handle.w.css({top:px(midvert)})&&handle.s.css({top:px(south),left:px(midhoriz)})&&handle.n.css({left:px(midhoriz)});"ne" in handle&&handle.ne.css({left:px(east)})&&handle.se.css({top:px(south),left:px(east)})&&handle.sw.css({top:px(south)});"b" in handle&&handle.b.css({top:px(south)})&&handle.r.css({left:px(east)});}function moveto(x,y){$img2.css({top:px(-y),left:px(-x)});$sel.css({top:px(y),left:px(x)});}function resize(w,h){$sel.width(w).height(h);}function refresh(){var c=Coords.getFixed();Coords.setPressed([c.x,c.y]);Coords.setCurrent([c.x2,c.y2]);updateVisible();}function updateVisible(){if(awake){return update();}}function update(){var c=Coords.getFixed();resize(c.w,c.h);moveto(c.x,c.y);options.drawBorders&&borders.right.css({left:px(c.w-1)})&&borders.bottom.css({top:px(c.h-1)});seehandles&&moveHandles(c);awake||show();options.onChange(unscale(c));}function show(){$sel.show();$img.css("opacity",options.bgOpacity);awake=true;}function release(){disableHandles();$sel.hide();$img.css("opacity",1);awake=false;}function showHandles(){if(seehandles){moveHandles(Coords.getFixed());$hdl_holder.show();}}function enableHandles(){seehandles=true;if(options.allowResize){moveHandles(Coords.getFixed());$hdl_holder.show();return true;}}function disableHandles(){seehandles=false;$hdl_holder.hide();}function animMode(v){(animating=v)?disableHandles():enableHandles();}function done(){animMode(false);refresh();}var $track=newTracker().mousedown(createDragger("move")).css({cursor:"move",position:"absolute",zIndex:360});$img_holder.append($track);disableHandles();return{updateVisible:updateVisible,update:update,release:release,refresh:refresh,setCursor:function(cursor){$track.css("cursor",cursor);},enableHandles:enableHandles,enableOnly:function(){seehandles=true;},showHandles:showHandles,disableHandles:disableHandles,animMode:animMode,done:done};}();var Tracker=function(){var onMove=function(){},onDone=function(){},trackDoc=options.trackDocument;if(!trackDoc){$trk.mousemove(trackMove).mouseup(trackUp).mouseout(trackUp);}function toFront(){$trk.css({zIndex:450});if(trackDoc){$(document).mousemove(trackMove).mouseup(trackUp);}}function toBack(){$trk.css({zIndex:290});if(trackDoc){$(document).unbind("mousemove",trackMove).unbind("mouseup",trackUp);}}function trackMove(e){onMove(mouseAbs(e));}function trackUp(e){e.preventDefault();e.stopPropagation();if(btndown){btndown=false;onDone(mouseAbs(e));options.onSelect(unscale(Coords.getFixed()));toBack();onMove=function(){};onDone=function(){};}return false;}function activateHandlers(move,done){btndown=true;onMove=move;onDone=done;toFront();return false;}function setCursor(t){$trk.css("cursor",t);}$img.before($trk);return{activateHandlers:activateHandlers,setCursor:setCursor};}();var KeyManager=function(){var $keymgr=$('<input type="radio" />').css({position:"absolute",left:"-30px"}).keypress(parseKey).blur(onBlur),$keywrap=$("<div />").css({position:"absolute",overflow:"hidden"}).append($keymgr);function watchKeys(){if(options.keySupport){$keymgr.show();$keymgr.focus();}}function onBlur(e){$keymgr.hide();}function doNudge(e,x,y){if(options.allowMove){Coords.moveOffset([x,y]);Selection.updateVisible();}e.preventDefault();e.stopPropagation();}function parseKey(e){if(e.ctrlKey){return true;
}shift_down=e.shiftKey?true:false;var nudge=shift_down?10:1;switch(e.keyCode){case 37:doNudge(e,-nudge,0);break;case 39:doNudge(e,nudge,0);break;case 38:doNudge(e,0,-nudge);break;case 40:doNudge(e,0,nudge);break;case 27:Selection.release();break;case 9:return true;}return nothing(e);}if(options.keySupport){$keywrap.insertBefore($img);}return{watchKeys:watchKeys};}();function px(n){return""+parseInt(n)+"px";}function pct(n){return""+parseInt(n)+"%";}function cssClass(cl){return options.baseClass+"-"+cl;}function getPos(obj){var pos=$(obj).offset();return[pos.left,pos.top];}function mouseAbs(e){return[(e.pageX-docOffset[0]),(e.pageY-docOffset[1])];}function myCursor(type){if(type!=lastcurs){Tracker.setCursor(type);lastcurs=type;}}function startDragMode(mode,pos){docOffset=getPos($img);Tracker.setCursor(mode=="move"?mode:mode+"-resize");if(mode=="move"){return Tracker.activateHandlers(createMover(pos),doneSelect);}var fc=Coords.getFixed();var opp=oppLockCorner(mode);var opc=Coords.getCorner(oppLockCorner(opp));Coords.setPressed(Coords.getCorner(opp));Coords.setCurrent(opc);Tracker.activateHandlers(dragmodeHandler(mode,fc),doneSelect);}function dragmodeHandler(mode,f){return function(pos){if(!options.aspectRatio){switch(mode){case"e":pos[1]=f.y2;break;case"w":pos[1]=f.y2;break;case"n":pos[0]=f.x2;break;case"s":pos[0]=f.x2;break;}}else{switch(mode){case"e":pos[1]=f.y+1;break;case"w":pos[1]=f.y+1;break;case"n":pos[0]=f.x+1;break;case"s":pos[0]=f.x+1;break;}}Coords.setCurrent(pos);Selection.update();};}function createMover(pos){var lloc=pos;KeyManager.watchKeys();return function(pos){Coords.moveOffset([pos[0]-lloc[0],pos[1]-lloc[1]]);lloc=pos;Selection.update();};}function oppLockCorner(ord){switch(ord){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne";}}function createDragger(ord){return function(e){if(options.disabled){return false;}if((ord=="move")&&!options.allowMove){return false;}btndown=true;startDragMode(ord,mouseAbs(e));e.stopPropagation();e.preventDefault();return false;};}function presize($obj,w,h){var nw=$obj.width(),nh=$obj.height();if((nw>w)&&w>0){nw=w;nh=(w/$obj.width())*$obj.height();}if((nh>h)&&h>0){nh=h;nw=(h/$obj.height())*$obj.width();}xscale=$obj.width()/nw;yscale=$obj.height()/nh;$obj.width(nw).height(nh);}function unscale(c){return{x:parseInt(c.x*xscale),y:parseInt(c.y*yscale),x2:parseInt(c.x2*xscale),y2:parseInt(c.y2*yscale),w:parseInt(c.w*xscale),h:parseInt(c.h*yscale)};}function doneSelect(pos){var c=Coords.getFixed();if(c.w>options.minSelect[0]&&c.h>options.minSelect[1]){Selection.enableHandles();Selection.done();}else{Selection.release();}Tracker.setCursor(options.allowSelect?"crosshair":"default");}function newSelection(e){if(options.disabled){return false;}if(!options.allowSelect){return false;}btndown=true;docOffset=getPos($img);Selection.disableHandles();myCursor("crosshair");var pos=mouseAbs(e);Coords.setPressed(pos);Tracker.activateHandlers(selectDrag,doneSelect);KeyManager.watchKeys();Selection.update();e.stopPropagation();e.preventDefault();return false;}function selectDrag(pos){Coords.setCurrent(pos);Selection.update();}function newTracker(){var trk=$("<div></div>").addClass(cssClass("tracker"));$.browser.msie&&trk.css({opacity:0,backgroundColor:"white"});return trk;}function animateTo(a){var x1=a[0]/xscale,y1=a[1]/yscale,x2=a[2]/xscale,y2=a[3]/yscale;if(animating){return;}var animto=Coords.flipCoords(x1,y1,x2,y2);var c=Coords.getFixed();var animat=initcr=[c.x,c.y,c.x2,c.y2];var interv=options.animationDelay;var x=animat[0];var y=animat[1];var x2=animat[2];var y2=animat[3];var ix1=animto[0]-initcr[0];var iy1=animto[1]-initcr[1];var ix2=animto[2]-initcr[2];var iy2=animto[3]-initcr[3];var pcent=0;var velocity=options.swingSpeed;Selection.animMode(true);var animator=function(){return function(){pcent+=(100-pcent)/velocity;animat[0]=x+((pcent/100)*ix1);animat[1]=y+((pcent/100)*iy1);animat[2]=x2+((pcent/100)*ix2);animat[3]=y2+((pcent/100)*iy2);if(pcent<100){animateStart();}else{Selection.done();}if(pcent>=99.8){pcent=100;}setSelectRaw(animat);};}();function animateStart(){window.setTimeout(animator,interv);}animateStart();}function setSelect(rect){setSelectRaw([rect[0]/xscale,rect[1]/yscale,rect[2]/xscale,rect[3]/yscale]);}function setSelectRaw(l){Coords.setPressed([l[0],l[1]]);Coords.setCurrent([l[2],l[3]]);Selection.update();}function setOptions(opt){if(typeof(opt)!="object"){opt={};}options=$.extend(options,opt);if(typeof(options.onChange)!=="function"){options.onChange=function(){};}if(typeof(options.onSelect)!=="function"){options.onSelect=function(){};}}function tellSelect(){return unscale(Coords.getFixed());}function tellScaled(){return Coords.getFixed();}function setOptionsNew(opt){setOptions(opt);interfaceUpdate();}function disableCrop(){options.disabled=true;Selection.disableHandles();Selection.setCursor("default");Tracker.setCursor("default");}function enableCrop(){options.disabled=false;interfaceUpdate();}function cancelCrop(){Selection.done();Tracker.activateHandlers(null,null);}function destroy(){$div.remove();$origimg.show();}function interfaceUpdate(alt){options.allowResize?alt?Selection.enableOnly():Selection.enableHandles():Selection.disableHandles();Tracker.setCursor(options.allowSelect?"crosshair":"default");Selection.setCursor(options.allowMove?"move":"default");$div.css("backgroundColor",options.bgColor);if("setSelect" in options){setSelect(opt.setSelect);Selection.done();delete (options.setSelect);}if("trueSize" in options){xscale=options.trueSize[0]/boundx;yscale=options.trueSize[1]/boundy;}xlimit=options.maxSize[0]||0;ylimit=options.maxSize[1]||0;xmin=options.minSize[0]||0;ymin=options.minSize[1]||0;if("outerImage" in options){$img.attr("src",options.outerImage);delete (options.outerImage);}Selection.refresh();}$hdl_holder.hide();interfaceUpdate(true);var api={animateTo:animateTo,setSelect:setSelect,setOptions:setOptionsNew,tellSelect:tellSelect,tellScaled:tellScaled,disable:disableCrop,enable:enableCrop,cancel:cancelCrop,focus:KeyManager.watchKeys,getBounds:function(){return[boundx*xscale,boundy*yscale];},getWidgetSize:function(){return[boundx,boundy];},release:Selection.release,destroy:destroy};$origimg.data("Jcrop",api);return api;};$.fn.Jcrop=function(options){function attachWhenDone(from){var loadsrc=options.useImg||from.src;var img=new Image();img.onload=function(){$.Jcrop(from,options);};img.src=loadsrc;}if(typeof(options)!=="object"){options={};}this.each(function(){if($(this).data("Jcrop")){if(options=="api"){return $(this).data("Jcrop");}else{$(this).data("Jcrop").setOptions(options);}}else{attachWhenDone(this);}});return this;};})(jQuery);(function($){$.fn.filestyle=function(options){var settings={width:250,padding:10,yoffset:0};if(options){$.extend(settings,options);}return this.each(function(){var self=this;var wrapper=$("<div>").css({width:(settings.imagewidth+settings.padding)+"px",height:settings.imageheight+"px",background:"url("+settings.image+") 0 0 no-repeat","background-position":"right",display:"inline",position:"absolute",overflow:"hidden",cursor:"pointer","margin-top":settings.yoffset});var filename=$('<input class="file">').addClass($(self).attr("class")).css({display:"inline",width:(settings.width-settings.padding)+"px"});$(self).before(filename);$(self).wrap(wrapper);$(self).css({position:"relative",height:settings.imageheight+"px",width:(settings.width-settings.padding)+"px",display:"inline",cursor:"pointer",opacity:"0.0"});if($.browser.mozilla){if(/Win/.test(navigator.platform)){$(self).css("margin-left","-142px");}else{$(self).css("margin-left","-168px");}}else{$(self).css("margin-left",settings.imagewidth-(settings.width+settings.padding)+"px");}$(self).bind("change",function(){filename.val($(self).val());});});};})(jQuery);(function(f){f.fn.qtip=function(B,u){var y,t,A,s,x,w,v,z;if(typeof B=="string"){if(typeof f(this).data("qtip")!=="object"){f.fn.qtip.log.error.call(self,1,f.fn.qtip.constants.NO_TOOLTIP_PRESENT,false);}if(B=="api"){return f(this).data("qtip").interfaces[f(this).data("qtip").current];}else{if(B=="interfaces"){return f(this).data("qtip").interfaces;}}}else{if(!B){B={};}if(typeof B.content!=="object"||(B.content.jquery&&B.content.length>0)){B.content={text:B.content};}if(typeof B.content.title!=="object"){B.content.title={text:B.content.title};}if(typeof B.position!=="object"){B.position={corner:B.position};}if(typeof B.position.corner!=="object"){B.position.corner={target:B.position.corner,tooltip:B.position.corner};}if(typeof B.show!=="object"){B.show={when:B.show};}if(typeof B.show.when!=="object"){B.show.when={event:B.show.when};}if(typeof B.show.effect!=="object"){B.show.effect={type:B.show.effect};}if(typeof B.hide!=="object"){B.hide={when:B.hide};}if(typeof B.hide.when!=="object"){B.hide.when={event:B.hide.when};}if(typeof B.hide.effect!=="object"){B.hide.effect={type:B.hide.effect};}if(typeof B.style!=="object"){B.style={name:B.style};}B.style=c(B.style);s=f.extend(true,{},f.fn.qtip.defaults,B);s.style=a.call({options:s},s.style);s.user=f.extend(true,{},B);}return f(this).each(function(){if(typeof B=="string"){w=B.toLowerCase();A=f(this).qtip("interfaces");if(typeof A=="object"){if(u===true&&w=="destroy"){while(A.length>0){A[A.length-1].destroy();}}else{if(u!==true){A=[f(this).qtip("api")];}for(y=0;y<A.length;y++){if(w=="destroy"){A[y].destroy();}else{if(A[y].status.rendered===true){if(w=="show"){A[y].show();}else{if(w=="hide"){A[y].hide();}else{if(w=="focus"){A[y].focus();}else{if(w=="disable"){A[y].disable(true);}else{if(w=="enable"){A[y].disable(false);}}}}}}}}}}}else{v=f.extend(true,{},s);v.hide.effect.length=s.hide.effect.length;v.show.effect.length=s.show.effect.length;if(v.position.container===false){v.position.container=f(document.body);}if(v.position.target===false){v.position.target=f(this);}if(v.show.when.target===false){v.show.when.target=f(this);}if(v.hide.when.target===false){v.hide.when.target=f(this);}t=f.fn.qtip.interfaces.length;for(y=0;y<t;y++){if(typeof f.fn.qtip.interfaces[y]=="undefined"){t=y;break;}}x=new d(f(this),v,t);f.fn.qtip.interfaces[t]=x;if(f(this).data("qtip")!=null&&typeof f(this).data("qtip")=="object"){if(typeof f(this).attr("qtip")==="undefined"){f(this).data("qtip").current=f(this).data("qtip").interfaces.length;}f(this).data("qtip").interfaces.push(x);}else{f(this).data("qtip",{current:0,interfaces:[x]});}if(v.content.prerender===false&&v.show.when.event!==false&&v.show.ready!==true){v.show.when.target.bind(v.show.when.event+".qtip-"+t+"-create",{qtip:t},function(C){z=f.fn.qtip.interfaces[C.data.qtip];z.options.show.when.target.unbind(z.options.show.when.event+".qtip-"+C.data.qtip+"-create");z.cache.mouse={x:C.pageX,y:C.pageY};p.call(z);z.options.show.when.target.trigger(z.options.show.when.event);});}else{x.cache.mouse={x:v.show.when.target.offset().left,y:v.show.when.target.offset().top};p.call(x);}}});};function d(u,t,v){var s=this;s.id=v;s.options=t;s.status={animated:false,rendered:false,disabled:false,focused:false};s.elements={target:u.addClass(s.options.style.classes.target),tooltip:null,wrapper:null,content:null,contentWrapper:null,title:null,button:null,tip:null,bgiframe:null};s.cache={mouse:{},position:{},toggle:0};s.timers={};f.extend(s,s.options.api,{show:function(y){var x,z;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"show");}if(s.elements.tooltip.css("display")!=="none"){return s;}s.elements.tooltip.stop(true,false);x=s.beforeShow.call(s,y);if(x===false){return s;}function w(){if(s.options.position.type!=="static"){s.focus();}s.onShow.call(s,y);if(f.browser.msie){s.elements.tooltip.get(0).style.removeAttribute("filter");}}s.cache.toggle=1;if(s.options.position.type!=="static"){s.updatePosition(y,(s.options.show.effect.length>0));}if(typeof s.options.show.solo=="object"){z=f(s.options.show.solo);}else{if(s.options.show.solo===true){z=f("div.qtip").not(s.elements.tooltip);}}if(z){z.each(function(){if(f(this).qtip("api").status.rendered===true){f(this).qtip("api").hide();}});}if(typeof s.options.show.effect.type=="function"){s.options.show.effect.type.call(s.elements.tooltip,s.options.show.effect.length);s.elements.tooltip.queue(function(){w();f(this).dequeue();});}else{switch(s.options.show.effect.type.toLowerCase()){case"fade":s.elements.tooltip.fadeIn(s.options.show.effect.length,w);break;case"slide":s.elements.tooltip.slideDown(s.options.show.effect.length,function(){w();if(s.options.position.type!=="static"){s.updatePosition(y,true);}});break;case"grow":s.elements.tooltip.show(s.options.show.effect.length,w);break;default:s.elements.tooltip.show(null,w);break;}s.elements.tooltip.addClass(s.options.style.classes.active);}return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_SHOWN,"show");},hide:function(y){var x;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"hide");}else{if(s.elements.tooltip.css("display")==="none"){return s;}}clearTimeout(s.timers.show);s.elements.tooltip.stop(true,false);x=s.beforeHide.call(s,y);if(x===false){return s;}function w(){s.onHide.call(s,y);}s.cache.toggle=0;if(typeof s.options.hide.effect.type=="function"){s.options.hide.effect.type.call(s.elements.tooltip,s.options.hide.effect.length);s.elements.tooltip.queue(function(){w();f(this).dequeue();});}else{switch(s.options.hide.effect.type.toLowerCase()){case"fade":s.elements.tooltip.fadeOut(s.options.hide.effect.length,w);break;case"slide":s.elements.tooltip.slideUp(s.options.hide.effect.length,w);break;case"grow":s.elements.tooltip.hide(s.options.hide.effect.length,w);break;default:s.elements.tooltip.hide(null,w);break;}s.elements.tooltip.removeClass(s.options.style.classes.active);}return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_HIDDEN,"hide");},updatePosition:function(w,x){var C,G,L,J,H,E,y,I,B,D,K,A,F,z;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updatePosition");}else{if(s.options.position.type=="static"){return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.CANNOT_POSITION_STATIC,"updatePosition");}}G={position:{left:0,top:0},dimensions:{height:0,width:0},corner:s.options.position.corner.target};L={position:s.getPosition(),dimensions:s.getDimensions(),corner:s.options.position.corner.tooltip};if(s.options.position.target!=="mouse"){if(s.options.position.target.get(0).nodeName.toLowerCase()=="area"){J=s.options.position.target.attr("coords").split(",");for(C=0;C<J.length;C++){J[C]=parseInt(J[C]);}H=s.options.position.target.parent("map").attr("name");E=f('img[usemap="#'+H+'"]:first').offset();G.position={left:Math.floor(E.left+J[0]),top:Math.floor(E.top+J[1])};switch(s.options.position.target.attr("shape").toLowerCase()){case"rect":G.dimensions={width:Math.ceil(Math.abs(J[2]-J[0])),height:Math.ceil(Math.abs(J[3]-J[1]))};break;case"circle":G.dimensions={width:J[2]+1,height:J[2]+1};break;case"poly":G.dimensions={width:J[0],height:J[1]};for(C=0;C<J.length;C++){if(C%2==0){if(J[C]>G.dimensions.width){G.dimensions.width=J[C];}if(J[C]<J[0]){G.position.left=Math.floor(E.left+J[C]);}}else{if(J[C]>G.dimensions.height){G.dimensions.height=J[C];}if(J[C]<J[1]){G.position.top=Math.floor(E.top+J[C]);}}}G.dimensions.width=G.dimensions.width-(G.position.left-E.left);G.dimensions.height=G.dimensions.height-(G.position.top-E.top);break;default:return f.fn.qtip.log.error.call(s,4,f.fn.qtip.constants.INVALID_AREA_SHAPE,"updatePosition");break;}G.dimensions.width-=2;G.dimensions.height-=2;}else{if(s.options.position.target.add(document.body).length===1){G.position={left:f(document).scrollLeft(),top:f(document).scrollTop()};G.dimensions={height:f(window).height(),width:f(window).width()};}else{if(typeof s.options.position.target.attr("qtip")!=="undefined"){G.position=s.options.position.target.qtip("api").cache.position;}else{G.position=s.options.position.target.offset();}G.dimensions={height:s.options.position.target.outerHeight(),width:s.options.position.target.outerWidth()};}}y=f.extend({},G.position);if(G.corner.search(/right/i)!==-1){y.left+=G.dimensions.width;}if(G.corner.search(/bottom/i)!==-1){y.top+=G.dimensions.height;}if(G.corner.search(/((top|bottom)Middle)|center/)!==-1){y.left+=(G.dimensions.width/2);}if(G.corner.search(/((left|right)Middle)|center/)!==-1){y.top+=(G.dimensions.height/2);}}else{G.position=y={left:s.cache.mouse.x,top:s.cache.mouse.y};G.dimensions={height:1,width:1};}if(L.corner.search(/right/i)!==-1){y.left-=L.dimensions.width;}if(L.corner.search(/bottom/i)!==-1){y.top-=L.dimensions.height;}if(L.corner.search(/((top|bottom)Middle)|center/)!==-1){y.left-=(L.dimensions.width/2);}if(L.corner.search(/((left|right)Middle)|center/)!==-1){y.top-=(L.dimensions.height/2);}I=(f.browser.msie)?1:0;B=(f.browser.msie&&parseInt(f.browser.version.charAt(0))===6)?1:0;if(s.options.style.border.radius>0){if(L.corner.search(/Left/)!==-1){y.left-=s.options.style.border.radius;}else{if(L.corner.search(/Right/)!==-1){y.left+=s.options.style.border.radius;}}if(L.corner.search(/Top/)!==-1){y.top-=s.options.style.border.radius;}else{if(L.corner.search(/Bottom/)!==-1){y.top+=s.options.style.border.radius;}}}if(I){if(L.corner.search(/top/)!==-1){y.top-=I;}else{if(L.corner.search(/bottom/)!==-1){y.top+=I;}}if(L.corner.search(/left/)!==-1){y.left-=I;}else{if(L.corner.search(/right/)!==-1){y.left+=I;}}if(L.corner.search(/leftMiddle|rightMiddle/)!==-1){y.top-=1;}}if(s.options.position.adjust.screen===true){y=o.call(s,y,G,L);}if(s.options.position.target==="mouse"&&s.options.position.adjust.mouse===true){if(s.options.position.adjust.screen===true&&s.elements.tip){K=s.elements.tip.attr("rel");}else{K=s.options.position.corner.tooltip;}y.left+=(K.search(/right/i)!==-1)?-6:6;y.top+=(K.search(/bottom/i)!==-1)?-6:6;
}if(!s.elements.bgiframe&&f.browser.msie&&parseInt(f.browser.version.charAt(0))==6){f("select, object").each(function(){A=f(this).offset();A.bottom=A.top+f(this).height();A.right=A.left+f(this).width();if(y.top+L.dimensions.height>=A.top&&y.left+L.dimensions.width>=A.left){k.call(s);}});}y.left+=s.options.position.adjust.x;y.top+=s.options.position.adjust.y;F=s.getPosition();if(y.left!=F.left||y.top!=F.top){z=s.beforePositionUpdate.call(s,w);if(z===false){return s;}s.cache.position=y;if(x===true){s.status.animated=true;s.elements.tooltip.animate(y,200,"swing",function(){s.status.animated=false;});}else{s.elements.tooltip.css(y);}s.onPositionUpdate.call(s,w);if(typeof w!=="undefined"&&w.type&&w.type!=="mousemove"){f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_POSITION_UPDATED,"updatePosition");}}return s;},updateWidth:function(w){var x;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateWidth");}else{if(w&&typeof w!=="number"){return f.fn.qtip.log.error.call(s,2,"newWidth must be of type number","updateWidth");}}x=s.elements.contentWrapper.siblings().add(s.elements.tip).add(s.elements.button);if(!w){if(typeof s.options.style.width.value=="number"){w=s.options.style.width.value;}else{s.elements.tooltip.css({width:"auto"});x.hide();if(f.browser.msie){s.elements.wrapper.add(s.elements.contentWrapper.children()).css({zoom:"normal"});}w=s.getDimensions().width+1;if(!s.options.style.width.value){if(w>s.options.style.width.max){w=s.options.style.width.max;}if(w<s.options.style.width.min){w=s.options.style.width.min;}}}}if(w%2!==0){w-=1;}s.elements.tooltip.width(w);x.show();if(s.options.style.border.radius){s.elements.tooltip.find(".qtip-betweenCorners").each(function(y){f(this).width(w-(s.options.style.border.radius*2));});}if(f.browser.msie){s.elements.wrapper.add(s.elements.contentWrapper.children()).css({zoom:"1"});s.elements.wrapper.width(w);if(s.elements.bgiframe){s.elements.bgiframe.width(w).height(s.getDimensions.height);}}return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_WIDTH_UPDATED,"updateWidth");},updateStyle:function(w){var z,A,x,y,B;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateStyle");}else{if(typeof w!=="string"||!f.fn.qtip.styles[w]){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.STYLE_NOT_DEFINED,"updateStyle");}}s.options.style=a.call(s,f.fn.qtip.styles[w],s.options.user.style);s.elements.content.css(q(s.options.style));if(s.options.content.title.text!==false){s.elements.title.css(q(s.options.style.title,true));}s.elements.contentWrapper.css({borderColor:s.options.style.border.color});if(s.options.style.tip.corner!==false){if(f("<canvas>").get(0).getContext){z=s.elements.tooltip.find(".qtip-tip canvas:first");x=z.get(0).getContext("2d");x.clearRect(0,0,300,300);y=z.parent("div[rel]:first").attr("rel");B=b(y,s.options.style.tip.size.width,s.options.style.tip.size.height);h.call(s,z,B,s.options.style.tip.color||s.options.style.border.color);}else{if(f.browser.msie){z=s.elements.tooltip.find('.qtip-tip [nodeName="shape"]');z.attr("fillcolor",s.options.style.tip.color||s.options.style.border.color);}}}if(s.options.style.border.radius>0){s.elements.tooltip.find(".qtip-betweenCorners").css({backgroundColor:s.options.style.border.color});if(f("<canvas>").get(0).getContext){A=g(s.options.style.border.radius);s.elements.tooltip.find(".qtip-wrapper canvas").each(function(){x=f(this).get(0).getContext("2d");x.clearRect(0,0,300,300);y=f(this).parent("div[rel]:first").attr("rel");r.call(s,f(this),A[y],s.options.style.border.radius,s.options.style.border.color);});}else{if(f.browser.msie){s.elements.tooltip.find('.qtip-wrapper [nodeName="arc"]').each(function(){f(this).attr("fillcolor",s.options.style.border.color);});}}}return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_STYLE_UPDATED,"updateStyle");},updateContent:function(A,y){var z,x,w;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateContent");}else{if(!A){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateContent");}}z=s.beforeContentUpdate.call(s,A);if(typeof z=="string"){A=z;}else{if(z===false){return;}}if(f.browser.msie){s.elements.contentWrapper.children().css({zoom:"normal"});}if(A.jquery&&A.length>0){A.clone(true).appendTo(s.elements.content).show();}else{s.elements.content.html(A);}x=s.elements.content.find("img[complete=false]");if(x.length>0){w=0;x.each(function(C){f('<img src="'+f(this).attr("src")+'" />').load(function(){if(++w==x.length){B();}});});}else{B();}function B(){s.updateWidth();if(y!==false){if(s.options.position.type!=="static"){s.updatePosition(s.elements.tooltip.is(":visible"),true);}if(s.options.style.tip.corner!==false){n.call(s);}}}s.onContentUpdate.call(s);return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_CONTENT_UPDATED,"loadContent");},loadContent:function(w,z,A){var y;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"loadContent");}y=s.beforeContentLoad.call(s);if(y===false){return s;}if(A=="post"){f.post(w,z,x);}else{f.get(w,z,x);}function x(B){s.onContentLoad.call(s);f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_CONTENT_LOADED,"loadContent");s.updateContent(B);}return s;},updateTitle:function(w){if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateTitle");}else{if(!w){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateTitle");}}returned=s.beforeTitleUpdate.call(s);if(returned===false){return s;}if(s.elements.button){s.elements.button=s.elements.button.clone(true);}s.elements.title.html(w);if(s.elements.button){s.elements.title.prepend(s.elements.button);}s.onTitleUpdate.call(s);return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_TITLE_UPDATED,"updateTitle");},focus:function(A){var y,x,w,z;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"focus");}else{if(s.options.position.type=="static"){return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.CANNOT_FOCUS_STATIC,"focus");}}y=parseInt(s.elements.tooltip.css("z-index"));x=6000+f("div.qtip[qtip]").length-1;if(!s.status.focused&&y!==x){z=s.beforeFocus.call(s,A);if(z===false){return s;}f("div.qtip[qtip]").not(s.elements.tooltip).each(function(){if(f(this).qtip("api").status.rendered===true){w=parseInt(f(this).css("z-index"));if(typeof w=="number"&&w>-1){f(this).css({zIndex:parseInt(f(this).css("z-index"))-1});}f(this).qtip("api").status.focused=false;}});s.elements.tooltip.css({zIndex:x});s.status.focused=true;s.onFocus.call(s,A);f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_FOCUSED,"focus");}return s;},disable:function(w){if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"disable");}if(w){if(!s.status.disabled){s.status.disabled=true;f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_DISABLED,"disable");}else{f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.TOOLTIP_ALREADY_DISABLED,"disable");}}else{if(s.status.disabled){s.status.disabled=false;f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_ENABLED,"disable");}else{f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.TOOLTIP_ALREADY_ENABLED,"disable");}}return s;},destroy:function(){var w,x,y;x=s.beforeDestroy.call(s);if(x===false){return s;}if(s.status.rendered){s.options.show.when.target.unbind("mousemove.qtip",s.updatePosition);s.options.show.when.target.unbind("mouseout.qtip",s.hide);s.options.show.when.target.unbind(s.options.show.when.event+".qtip");s.options.hide.when.target.unbind(s.options.hide.when.event+".qtip");s.elements.tooltip.unbind(s.options.hide.when.event+".qtip");s.elements.tooltip.unbind("mouseover.qtip",s.focus);s.elements.tooltip.remove();}else{s.options.show.when.target.unbind(s.options.show.when.event+".qtip-create");}if(typeof s.elements.target.data("qtip")=="object"){y=s.elements.target.data("qtip").interfaces;if(typeof y=="object"&&y.length>0){for(w=0;w<y.length-1;w++){if(y[w].id==s.id){y.splice(w,1);}}}}delete f.fn.qtip.interfaces[s.id];if(typeof y=="object"&&y.length>0){s.elements.target.data("qtip").current=y.length-1;}else{s.elements.target.removeData("qtip");}s.onDestroy.call(s);f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_DESTROYED,"destroy");return s.elements.target;},getPosition:function(){var w,x;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getPosition");}w=(s.elements.tooltip.css("display")!=="none")?false:true;if(w){s.elements.tooltip.css({visiblity:"hidden"}).show();}x=s.elements.tooltip.offset();if(w){s.elements.tooltip.css({visiblity:"visible"}).hide();}return x;},getDimensions:function(){var w,x;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getDimensions");}w=(!s.elements.tooltip.is(":visible"))?true:false;if(w){s.elements.tooltip.css({visiblity:"hidden"}).show();}x={height:s.elements.tooltip.outerHeight(),width:s.elements.tooltip.outerWidth()};if(w){s.elements.tooltip.css({visiblity:"visible"}).hide();}return x;}});}function p(){var s,w,u,t,v,y,x;s=this;s.beforeRender.call(s);s.status.rendered=true;s.elements.tooltip='<div qtip="'+s.id+'" class="qtip '+(s.options.style.classes.tooltip||s.options.style)+'"style="display:none; -moz-border-radius:0; -webkit-border-radius:0; border-radius:0;position:'+s.options.position.type+';">  <div class="qtip-wrapper" style="position:relative; overflow:hidden; text-align:left;">    <div class="qtip-contentWrapper" style="overflow:hidden;">       <div class="qtip-content '+s.options.style.classes.content+'"></div></div></div></div>';s.elements.tooltip=f(s.elements.tooltip);s.elements.tooltip.appendTo(s.options.position.container);s.elements.tooltip.data("qtip",{current:0,interfaces:[s]});s.elements.wrapper=s.elements.tooltip.children("div:first");
s.elements.contentWrapper=s.elements.wrapper.children("div:first").css({background:s.options.style.background});s.elements.content=s.elements.contentWrapper.children("div:first").css(q(s.options.style));if(f.browser.msie){s.elements.wrapper.add(s.elements.content).css({zoom:1});}if(s.options.hide.when.event=="unfocus"){s.elements.tooltip.attr("unfocus",true);}if(typeof s.options.style.width.value=="number"){s.updateWidth();}if(f("<canvas>").get(0).getContext||f.browser.msie){if(s.options.style.border.radius>0){m.call(s);}else{s.elements.contentWrapper.css({border:s.options.style.border.width+"px solid "+s.options.style.border.color});}if(s.options.style.tip.corner!==false){e.call(s);}}else{s.elements.contentWrapper.css({border:s.options.style.border.width+"px solid "+s.options.style.border.color});s.options.style.border.radius=0;s.options.style.tip.corner=false;f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.CANVAS_VML_NOT_SUPPORTED,"render");}if((typeof s.options.content.text=="string"&&s.options.content.text.length>0)||(s.options.content.text.jquery&&s.options.content.text.length>0)){u=s.options.content.text;}else{if(typeof s.elements.target.attr("title")=="string"&&s.elements.target.attr("title").length>0){u=s.elements.target.attr("title").replace("\\n","<br />");s.elements.target.attr("title","");}else{if(typeof s.elements.target.attr("alt")=="string"&&s.elements.target.attr("alt").length>0){u=s.elements.target.attr("alt").replace("\\n","<br />");s.elements.target.attr("alt","");}else{u=" ";f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.NO_VALID_CONTENT,"render");}}}if(s.options.content.title.text!==false){j.call(s);}s.updateContent(u);l.call(s);if(s.options.show.ready===true){s.show();}if(s.options.content.url!==false){t=s.options.content.url;v=s.options.content.data;y=s.options.content.method||"get";s.loadContent(t,v,y);}s.onRender.call(s);f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_RENDERED,"render");}function m(){var F,z,t,B,x,E,u,G,D,y,w,C,A,s,v;F=this;F.elements.wrapper.find(".qtip-borderBottom, .qtip-borderTop").remove();t=F.options.style.border.width;B=F.options.style.border.radius;x=F.options.style.border.color||F.options.style.tip.color;E=g(B);u={};for(z in E){u[z]='<div rel="'+z+'" style="'+((z.search(/Left/)!==-1)?"left":"right")+":0; position:absolute; height:"+B+"px; width:"+B+'px; overflow:hidden; line-height:0.1px; font-size:1px">';if(f("<canvas>").get(0).getContext){u[z]+='<canvas height="'+B+'" width="'+B+'" style="vertical-align: top"></canvas>';}else{if(f.browser.msie){G=B*2+3;u[z]+='<v:arc stroked="false" fillcolor="'+x+'" startangle="'+E[z][0]+'" endangle="'+E[z][1]+'" style="width:'+G+"px; height:"+G+"px; margin-top:"+((z.search(/bottom/)!==-1)?-2:-1)+"px; margin-left:"+((z.search(/Right/)!==-1)?E[z][2]-3.5:-1)+'px; vertical-align:top; display:inline-block; behavior:url(#default#VML)"></v:arc>';}}u[z]+="</div>";}D=F.getDimensions().width-(Math.max(t,B)*2);y='<div class="qtip-betweenCorners" style="height:'+B+"px; width:"+D+"px; overflow:hidden; background-color:"+x+'; line-height:0.1px; font-size:1px;">';w='<div class="qtip-borderTop" dir="ltr" style="height:'+B+"px; margin-left:"+B+'px; line-height:0.1px; font-size:1px; padding:0;">'+u.topLeft+u.topRight+y;F.elements.wrapper.prepend(w);C='<div class="qtip-borderBottom" dir="ltr" style="height:'+B+"px; margin-left:"+B+'px; line-height:0.1px; font-size:1px; padding:0;">'+u.bottomLeft+u.bottomRight+y;F.elements.wrapper.append(C);if(f("<canvas>").get(0).getContext){F.elements.wrapper.find("canvas").each(function(){A=E[f(this).parent("[rel]:first").attr("rel")];r.call(F,f(this),A,B,x);});}else{if(f.browser.msie){F.elements.tooltip.append('<v:image style="behavior:url(#default#VML);"></v:image>');}}s=Math.max(B,(B+(t-B)));v=Math.max(t-B,0);F.elements.contentWrapper.css({border:"0px solid "+x,borderWidth:v+"px "+s+"px"});}function r(u,w,s,t){var v=u.get(0).getContext("2d");v.fillStyle=t;v.beginPath();v.arc(w[0],w[1],s,0,Math.PI*2,false);v.fill();}function e(v){var t,s,x,u,w;t=this;if(t.elements.tip!==null){t.elements.tip.remove();}s=t.options.style.tip.color||t.options.style.border.color;if(t.options.style.tip.corner===false){return;}else{if(!v){v=t.options.style.tip.corner;}}x=b(v,t.options.style.tip.size.width,t.options.style.tip.size.height);t.elements.tip='<div class="'+t.options.style.classes.tip+'" dir="ltr" rel="'+v+'" style="position:absolute; height:'+t.options.style.tip.size.height+"px; width:"+t.options.style.tip.size.width+'px; margin:0 auto; line-height:0.1px; font-size:1px;">';if(f("<canvas>").get(0).getContext){t.elements.tip+='<canvas height="'+t.options.style.tip.size.height+'" width="'+t.options.style.tip.size.width+'"></canvas>';}else{if(f.browser.msie){u=t.options.style.tip.size.width+","+t.options.style.tip.size.height;w="m"+x[0][0]+","+x[0][1];w+=" l"+x[1][0]+","+x[1][1];w+=" "+x[2][0]+","+x[2][1];w+=" xe";t.elements.tip+='<v:shape fillcolor="'+s+'" stroked="false" filled="true" path="'+w+'" coordsize="'+u+'" style="width:'+t.options.style.tip.size.width+"px; height:"+t.options.style.tip.size.height+"px; line-height:0.1px; display:inline-block; behavior:url(#default#VML); vertical-align:"+((v.search(/top/)!==-1)?"bottom":"top")+'"></v:shape>';t.elements.tip+='<v:image style="behavior:url(#default#VML);"></v:image>';t.elements.contentWrapper.css("position","relative");}}t.elements.tooltip.prepend(t.elements.tip+"</div>");t.elements.tip=t.elements.tooltip.find("."+t.options.style.classes.tip).eq(0);if(f("<canvas>").get(0).getContext){h.call(t,t.elements.tip.find("canvas:first"),x,s);}if(v.search(/top/)!==-1&&f.browser.msie&&parseInt(f.browser.version.charAt(0))===6){t.elements.tip.css({marginTop:-4});}n.call(t,v);}function h(t,v,s){var u=t.get(0).getContext("2d");u.fillStyle=s;u.beginPath();u.moveTo(v[0][0],v[0][1]);u.lineTo(v[1][0],v[1][1]);u.lineTo(v[2][0],v[2][1]);u.fill();}function n(u){var t,w,s,x,v;t=this;if(t.options.style.tip.corner===false||!t.elements.tip){return;}if(!u){u=t.elements.tip.attr("rel");}w=positionAdjust=(f.browser.msie)?1:0;t.elements.tip.css(u.match(/left|right|top|bottom/)[0],0);if(u.search(/top|bottom/)!==-1){if(f.browser.msie){if(parseInt(f.browser.version.charAt(0))===6){positionAdjust=(u.search(/top/)!==-1)?-3:1;}else{positionAdjust=(u.search(/top/)!==-1)?1:2;}}if(u.search(/Middle/)!==-1){t.elements.tip.css({left:"50%",marginLeft:-(t.options.style.tip.size.width/2)});}else{if(u.search(/Left/)!==-1){t.elements.tip.css({left:t.options.style.border.radius-w});}else{if(u.search(/Right/)!==-1){t.elements.tip.css({right:t.options.style.border.radius+w});}}}if(u.search(/top/)!==-1){t.elements.tip.css({top:-positionAdjust});}else{t.elements.tip.css({bottom:positionAdjust});}}else{if(u.search(/left|right/)!==-1){if(f.browser.msie){positionAdjust=(parseInt(f.browser.version.charAt(0))===6)?1:((u.search(/left/)!==-1)?1:2);}if(u.search(/Middle/)!==-1){t.elements.tip.css({top:"50%",marginTop:-(t.options.style.tip.size.height/2)});}else{if(u.search(/Top/)!==-1){t.elements.tip.css({top:t.options.style.border.radius-w});}else{if(u.search(/Bottom/)!==-1){t.elements.tip.css({bottom:t.options.style.border.radius+w});}}}if(u.search(/left/)!==-1){t.elements.tip.css({left:-positionAdjust});}else{t.elements.tip.css({right:positionAdjust});}}}s="padding-"+u.match(/left|right|top|bottom/)[0];x=t.options.style.tip.size[(s.search(/left|right/)!==-1)?"width":"height"];t.elements.tooltip.css("padding",0);t.elements.tooltip.css(s,x);if(f.browser.msie&&parseInt(f.browser.version.charAt(0))==6){v=parseInt(t.elements.tip.css("margin-top"))||0;v+=parseInt(t.elements.content.css("margin-top"))||0;t.elements.tip.css({marginTop:v});}}function j(){var s=this;if(s.elements.title!==null){s.elements.title.remove();}s.elements.title=f('<div class="'+s.options.style.classes.title+'">').css(q(s.options.style.title,true)).css({zoom:(f.browser.msie)?1:0}).prependTo(s.elements.contentWrapper);if(s.options.content.title.text){s.updateTitle.call(s,s.options.content.title.text);}if(s.options.content.title.button!==false&&typeof s.options.content.title.button=="string"){s.elements.button=f('<a class="'+s.options.style.classes.button+'" style="float:right; position: relative"></a>').css(q(s.options.style.button,true)).html(s.options.content.title.button).prependTo(s.elements.title).click(function(t){if(!s.status.disabled){s.hide(t);}});}}function l(){var t,v,u,s;t=this;v=t.options.show.when.target;u=t.options.hide.when.target;if(t.options.hide.fixed){u=u.add(t.elements.tooltip);}if(t.options.hide.when.event=="inactive"){s=["click","dblclick","mousedown","mouseup","mousemove","mouseout","mouseenter","mouseleave","mouseover"];function y(z){if(t.status.disabled===true){return;}clearTimeout(t.timers.inactive);t.timers.inactive=setTimeout(function(){f(s).each(function(){u.unbind(this+".qtip-inactive");t.elements.content.unbind(this+".qtip-inactive");});t.hide(z);},t.options.hide.delay);}}else{if(t.options.hide.fixed===true){t.elements.tooltip.bind("mouseover.qtip",function(){if(t.status.disabled===true){return;}clearTimeout(t.timers.hide);});}}function x(z){if(t.status.disabled===true){return;}if(t.options.hide.when.event=="inactive"){f(s).each(function(){u.bind(this+".qtip-inactive",y);t.elements.content.bind(this+".qtip-inactive",y);});y();}clearTimeout(t.timers.show);clearTimeout(t.timers.hide);t.timers.show=setTimeout(function(){t.show(z);},t.options.show.delay);}function w(z){if(t.status.disabled===true){return;}if(t.options.hide.fixed===true&&t.options.hide.when.event.search(/mouse(out|leave)/i)!==-1&&f(z.relatedTarget).parents("div.qtip[qtip]").length>0){z.stopPropagation();z.preventDefault();clearTimeout(t.timers.hide);return false;}clearTimeout(t.timers.show);clearTimeout(t.timers.hide);t.elements.tooltip.stop(true,true);t.timers.hide=setTimeout(function(){t.hide(z);},t.options.hide.delay);}if((t.options.show.when.target.add(t.options.hide.when.target).length===1&&t.options.show.when.event==t.options.hide.when.event&&t.options.hide.when.event!=="inactive")||t.options.hide.when.event=="unfocus"){t.cache.toggle=0;
v.bind(t.options.show.when.event+".qtip",function(z){if(t.cache.toggle==0){x(z);}else{w(z);}});}else{v.bind(t.options.show.when.event+".qtip",x);if(t.options.hide.when.event!=="inactive"){u.bind(t.options.hide.when.event+".qtip",w);}}if(t.options.position.type.search(/(fixed|absolute)/)!==-1){t.elements.tooltip.bind("mouseover.qtip",t.focus);}if(t.options.position.target==="mouse"&&t.options.position.type!=="static"){v.bind("mousemove.qtip",function(z){t.cache.mouse={x:z.pageX,y:z.pageY};if(t.status.disabled===false&&t.options.position.adjust.mouse===true&&t.options.position.type!=="static"&&t.elements.tooltip.css("display")!=="none"){t.updatePosition(z);}});}}function o(u,v,A){var z,s,x,y,t,w;z=this;if(A.corner=="center"){return v.position;}s=f.extend({},u);y={x:false,y:false};t={left:(s.left<f.fn.qtip.cache.screen.scroll.left),right:(s.left+A.dimensions.width+2>=f.fn.qtip.cache.screen.width+f.fn.qtip.cache.screen.scroll.left),top:(s.top<f.fn.qtip.cache.screen.scroll.top),bottom:(s.top+A.dimensions.height+2>=f.fn.qtip.cache.screen.height+f.fn.qtip.cache.screen.scroll.top)};x={left:(t.left&&(A.corner.search(/right/i)!=-1||(A.corner.search(/right/i)==-1&&!t.right))),right:(t.right&&(A.corner.search(/left/i)!=-1||(A.corner.search(/left/i)==-1&&!t.left))),top:(t.top&&A.corner.search(/top/i)==-1),bottom:(t.bottom&&A.corner.search(/bottom/i)==-1)};if(x.left){if(z.options.position.target!=="mouse"){s.left=v.position.left+v.dimensions.width;}else{s.left=z.cache.mouse.x;}y.x="Left";}else{if(x.right){if(z.options.position.target!=="mouse"){s.left=v.position.left-A.dimensions.width;}else{s.left=z.cache.mouse.x-A.dimensions.width;}y.x="Right";}}if(x.top){if(z.options.position.target!=="mouse"){s.top=v.position.top+v.dimensions.height;}else{s.top=z.cache.mouse.y;}y.y="top";}else{if(x.bottom){if(z.options.position.target!=="mouse"){s.top=v.position.top-A.dimensions.height;}else{s.top=z.cache.mouse.y-A.dimensions.height;}y.y="bottom";}}if(s.left<0){s.left=u.left;y.x=false;}if(s.top<0){s.top=u.top;y.y=false;}if(z.options.style.tip.corner!==false){s.corner=new String(A.corner);if(y.x!==false){s.corner=s.corner.replace(/Left|Right|Middle/,y.x);}if(y.y!==false){s.corner=s.corner.replace(/top|bottom/,y.y);}if(s.corner!==z.elements.tip.attr("rel")){e.call(z,s.corner);}}return s;}function q(u,t){var v,s;v=f.extend(true,{},u);for(s in v){if(t===true&&s.search(/(tip|classes)/i)!==-1){delete v[s];}else{if(!t&&s.search(/(width|border|tip|title|classes|user)/i)!==-1){delete v[s];}}}return v;}function c(s){if(typeof s.tip!=="object"){s.tip={corner:s.tip};}if(typeof s.tip.size!=="object"){s.tip.size={width:s.tip.size,height:s.tip.size};}if(typeof s.border!=="object"){s.border={width:s.border};}if(typeof s.width!=="object"){s.width={value:s.width};}if(typeof s.width.max=="string"){s.width.max=parseInt(s.width.max.replace(/([0-9]+)/i,"$1"));}if(typeof s.width.min=="string"){s.width.min=parseInt(s.width.min.replace(/([0-9]+)/i,"$1"));}if(typeof s.tip.size.x=="number"){s.tip.size.width=s.tip.size.x;delete s.tip.size.x;}if(typeof s.tip.size.y=="number"){s.tip.size.height=s.tip.size.y;delete s.tip.size.y;}return s;}function a(){var s,t,u,x,v,w;s=this;u=[true,{}];for(t=0;t<arguments.length;t++){u.push(arguments[t]);}x=[f.extend.apply(f,u)];while(typeof x[0].name=="string"){x.unshift(c(f.fn.qtip.styles[x[0].name]));}x.unshift(true,{classes:{tooltip:"qtip-"+(arguments[0].name||"defaults")}},f.fn.qtip.styles.defaults);v=f.extend.apply(f,x);w=(f.browser.msie)?1:0;v.tip.size.width+=w;v.tip.size.height+=w;if(v.tip.size.width%2>0){v.tip.size.width+=1;}if(v.tip.size.height%2>0){v.tip.size.height+=1;}if(v.tip.corner===true){v.tip.corner=(s.options.position.corner.tooltip==="center")?false:s.options.position.corner.tooltip;}return v;}function b(v,u,t){var s={bottomRight:[[0,0],[u,t],[u,0]],bottomLeft:[[0,0],[u,0],[0,t]],topRight:[[0,t],[u,0],[u,t]],topLeft:[[0,0],[0,t],[u,t]],topMiddle:[[0,t],[u/2,0],[u,t]],bottomMiddle:[[0,0],[u,0],[u/2,t]],rightMiddle:[[0,0],[u,t/2],[0,t]],leftMiddle:[[u,0],[u,t],[0,t/2]]};s.leftTop=s.bottomRight;s.rightTop=s.bottomLeft;s.leftBottom=s.topRight;s.rightBottom=s.topLeft;return s[v];}function g(s){var t;if(f("<canvas>").get(0).getContext){t={topLeft:[s,s],topRight:[0,s],bottomLeft:[s,0],bottomRight:[0,0]};}else{if(f.browser.msie){t={topLeft:[-90,90,0],topRight:[-90,90,-s],bottomLeft:[90,270,0],bottomRight:[90,270,-s]};}}return t;}function k(){var s,t,u;s=this;u=s.getDimensions();t='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:false" style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=\'0\'); border: 1px solid red; height:'+u.height+"px; width:"+u.width+'px" />';s.elements.bgiframe=s.elements.wrapper.prepend(t).children(".qtip-bgiframe:first");}f(document).ready(function(){f.fn.qtip.cache={screen:{scroll:{left:f(window).scrollLeft(),top:f(window).scrollTop()},width:f(window).width(),height:f(window).height()}};var s;f(window).bind("resize scroll",function(t){clearTimeout(s);s=setTimeout(function(){if(t.type==="scroll"){f.fn.qtip.cache.screen.scroll={left:f(window).scrollLeft(),top:f(window).scrollTop()};}else{f.fn.qtip.cache.screen.width=f(window).width();f.fn.qtip.cache.screen.height=f(window).height();}for(i=0;i<f.fn.qtip.interfaces.length;i++){var u=f.fn.qtip.interfaces[i];if(u.status.rendered===true&&(u.options.position.type!=="static"||u.options.position.adjust.scroll&&t.type==="scroll"||u.options.position.adjust.resize&&t.type==="resize")){u.updatePosition(t,true);}}},100);});f(document).bind("mousedown.qtip",function(t){if(f(t.target).parents("div.qtip").length===0){f(".qtip[unfocus]").each(function(){var u=f(this).qtip("api");if(f(this).is(":visible")&&!u.status.disabled&&f(t.target).add(u.elements.target).length>1){u.hide(t);}});}});});f.fn.qtip.interfaces=[];f.fn.qtip.log={error:function(){return this;}};f.fn.qtip.constants={};f.fn.qtip.defaults={content:{prerender:false,text:false,url:false,data:null,title:{text:false,button:false}},position:{target:false,corner:{target:"bottomRight",tooltip:"topLeft"},adjust:{x:0,y:0,mouse:true,screen:false,scroll:true,resize:true},type:"absolute",container:false},show:{when:{target:false,event:"mouseover"},effect:{type:"fade",length:100},delay:140,solo:false,ready:false},hide:{when:{target:false,event:"mouseout"},effect:{type:"fade",length:100},delay:0,fixed:false},api:{beforeRender:function(){},onRender:function(){},beforePositionUpdate:function(){},onPositionUpdate:function(){},beforeShow:function(){},onShow:function(){},beforeHide:function(){},onHide:function(){},beforeContentUpdate:function(){},onContentUpdate:function(){},beforeContentLoad:function(){},onContentLoad:function(){},beforeTitleUpdate:function(){},onTitleUpdate:function(){},beforeDestroy:function(){},onDestroy:function(){},beforeFocus:function(){},onFocus:function(){}}};f.fn.qtip.styles={defaults:{background:"white",color:"#111",overflow:"hidden",textAlign:"left",width:{min:0,max:250},padding:"5px 9px",border:{width:1,radius:0,color:"#d3d3d3"},tip:{corner:false,color:false,size:{width:13,height:13},opacity:1},title:{background:"#e1e1e1",fontWeight:"bold",padding:"7px 12px"},button:{cursor:"pointer"},classes:{target:"",tip:"qtip-tip",title:"qtip-title",button:"qtip-button",content:"qtip-content",active:"qtip-active"}},cream:{border:{width:3,radius:0,color:"#F9E98E"},title:{background:"#F0DE7D",color:"#A27D35"},background:"#FBF7AA",color:"#A27D35",classes:{tooltip:"qtip-cream"}},light:{border:{width:3,radius:0,color:"#E2E2E2"},title:{background:"#f1f1f1",color:"#454545"},background:"white",color:"#454545",classes:{tooltip:"qtip-light"}},dark:{border:{width:3,radius:0,color:"#303030"},title:{background:"#404040",color:"#f3f3f3"},background:"#505050",color:"#f3f3f3",classes:{tooltip:"qtip-dark"}},red:{border:{width:3,radius:0,color:"#CE6F6F"},title:{background:"#f28279",color:"#9C2F2F"},background:"#F79992",color:"#9C2F2F",classes:{tooltip:"qtip-red"}},green:{border:{width:3,radius:0,color:"#A9DB66"},title:{background:"#b9db8c",color:"#58792E"},background:"#CDE6AC",color:"#58792E",classes:{tooltip:"qtip-green"}},blue:{border:{width:3,radius:0,color:"#ADD9ED"},title:{background:"#D0E9F5",color:"#5E99BD"},background:"#E5F6FE",color:"#4D9FBF",classes:{tooltip:"qtip-blue"}}};})(jQuery);(function($){$.toJSON=function(o){if(typeof(JSON)=="object"&&JSON.stringify){return JSON.stringify(o);}var type=typeof(o);if(o===null){return"null";}if(type=="undefined"){return undefined;}if(type=="number"||type=="boolean"){return o+"";}if(type=="string"){return $.quoteString(o);}if(type=="object"){if(typeof o.toJSON=="function"){return $.toJSON(o.toJSON());}if(o.constructor===Date){var month=o.getUTCMonth()+1;if(month<10){month="0"+month;}var day=o.getUTCDate();if(day<10){day="0"+day;}var year=o.getUTCFullYear();var hours=o.getUTCHours();if(hours<10){hours="0"+hours;}var minutes=o.getUTCMinutes();if(minutes<10){minutes="0"+minutes;}var seconds=o.getUTCSeconds();if(seconds<10){seconds="0"+seconds;}var milli=o.getUTCMilliseconds();if(milli<100){milli="0"+milli;}if(milli<10){milli="0"+milli;}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"';}if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||"null");}return"["+ret.join(",")+"]";}var pairs=[];for(var k in o){var name;var type=typeof k;if(type=="number"){name='"'+k+'"';}else{if(type=="string"){name=$.quoteString(k);}else{continue;}}if(typeof o[k]=="function"){continue;}var val=$.toJSON(o[k]);pairs.push(name+":"+val);}return"{"+pairs.join(", ")+"}";}};$.evalJSON=function(src){if(typeof(JSON)=="object"&&JSON.parse){return JSON.parse(src);}return eval("("+src+")");};$.secureEvalJSON=function(src){if(typeof(JSON)=="object"&&JSON.parse){return JSON.parse(src);}var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@");filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+src+")");}else{throw new SyntaxError("Error parsing JSON, source is not valid.");}};$.quoteString=function(string){if(string.match(_escapeable)){return'"'+string.replace(_escapeable,function(a){var c=_meta[a];if(typeof c==="string"){return c;}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"';}return'"'+string+'"';};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var _meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};})(jQuery);(function($){$.fn.extend({autocomplete:function(urlOrData,options){var isUrl=typeof urlOrData=="string";options=$.extend({},$.Autocompleter.defaults,{url:isUrl?urlOrData:null,data:isUrl?null:urlOrData,delay:isUrl?$.Autocompleter.defaults.delay:10,max:options&&!options.scroll?10:150},options);options.highlight=options.highlight||function(value){return value;};options.formatMatch=options.formatMatch||options.formatItem;return this.each(function(){new $.Autocompleter(this,options);});},result:function(handler){return this.bind("result",handler);},search:function(handler){return this.trigger("search",[handler]);},flushCache:function(){return this.trigger("flushCache");},setOptions:function(options){return this.trigger("setOptions",[options]);},unautocomplete:function(){return this.trigger("unautocomplete");}});$.Autocompleter=function(input,options){var KEY={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var $input=$(input).attr("autocomplete","off").addClass(options.inputClass);var timeout;var previousValue="";var cache=$.Autocompleter.Cache(options);var hasFocus=0;var lastKeyPressCode;var config={mouseDownOnSelect:false};var select=$.Autocompleter.Select(options,input,selectCurrent,config);var blockSubmit;$.browser.opera&&$(input.form).bind("submit.autocomplete",function(){if(blockSubmit){blockSubmit=false;return false;}});$input.bind(($.browser.opera?"keypress":"keydown")+".autocomplete",function(event){hasFocus=1;lastKeyPressCode=event.keyCode;switch(event.keyCode){case KEY.UP:event.preventDefault();if(select.visible()){select.prev();}else{onChange(0,true);}break;case KEY.DOWN:event.preventDefault();if(select.visible()){select.next();}else{onChange(0,true);}break;case KEY.PAGEUP:event.preventDefault();if(select.visible()){select.pageUp();}else{onChange(0,true);}break;case KEY.PAGEDOWN:event.preventDefault();if(select.visible()){select.pageDown();}else{onChange(0,true);}break;case options.multiple&&$.trim(options.multipleSeparator)==","&&KEY.COMMA:case KEY.TAB:case KEY.RETURN:if(selectCurrent()){event.preventDefault();blockSubmit=true;return false;}break;case KEY.ESC:select.hide();break;default:clearTimeout(timeout);timeout=setTimeout(onChange,options.delay);break;}}).focus(function(){hasFocus++;}).blur(function(){hasFocus=0;if(!config.mouseDownOnSelect){hideResults();}}).click(function(){if(hasFocus++>1&&!select.visible()){onChange(0,true);}}).bind("search",function(){var fn=(arguments.length>1)?arguments[1]:null;function findValueCallback(q,data){var result;if(data&&data.length){for(var i=0;i<data.length;i++){if(data[i].result.toLowerCase()==q.toLowerCase()){result=data[i];break;}}}if(typeof fn=="function"){fn(result);}else{$input.trigger("result",result&&[result.data,result.value]);}}$.each(trimWords($input.val()),function(i,value){request(value,findValueCallback,findValueCallback);});}).bind("flushCache",function(){cache.flush();}).bind("setOptions",function(){$.extend(options,arguments[1]);if("data" in arguments[1]){cache.populate();}}).bind("unautocomplete",function(){select.unbind();$input.unbind();$(input.form).unbind(".autocomplete");});function selectCurrent(){var selected=select.selected();if(!selected){return false;}var v=selected.result;previousValue=v;if(options.multiple){var words=trimWords($input.val());if(words.length>1){var seperator=options.multipleSeparator.length;var cursorAt=$(input).selection().start;var wordAt,progress=0;$.each(words,function(i,word){progress+=word.length;if(cursorAt<=progress){wordAt=i;return false;}progress+=seperator;});words[wordAt]=v;v=words.join(options.multipleSeparator);}v+=options.multipleSeparator;}$input.val(v);hideResultsNow();$input.trigger("result",[selected.data,selected.value]);return true;}function onChange(crap,skipPrevCheck){if(lastKeyPressCode==KEY.DEL){select.hide();return;}var currentValue=$input.val();if(!skipPrevCheck&&currentValue==previousValue){return;}previousValue=currentValue;currentValue=lastWord(currentValue);if(currentValue.length>=options.minChars){$input.addClass(options.loadingClass);if(!options.matchCase){currentValue=currentValue.toLowerCase();}request(currentValue,receiveData,hideResultsNow);}else{stopLoading();select.hide();}}function trimWords(value){if(!value){return[""];}if(!options.multiple){return[$.trim(value)];}return $.map(value.split(options.multipleSeparator),function(word){return $.trim(value).length?$.trim(word):null;});}function lastWord(value){if(!options.multiple){return value;}var words=trimWords(value);if(words.length==1){return words[0];}var cursorAt=$(input).selection().start;if(cursorAt==value.length){words=trimWords(value);}else{words=trimWords(value.replace(value.substring(cursorAt),""));}return words[words.length-1];}function autoFill(q,sValue){if(options.autoFill&&(lastWord($input.val()).toLowerCase()==q.toLowerCase())&&lastKeyPressCode!=KEY.BACKSPACE){$input.val($input.val()+sValue.substring(lastWord(previousValue).length));$(input).selection(previousValue.length,previousValue.length+sValue.length);}}function hideResults(){clearTimeout(timeout);timeout=setTimeout(hideResultsNow,200);}function hideResultsNow(){var wasVisible=select.visible();select.hide();clearTimeout(timeout);stopLoading();if(options.mustMatch){$input.search(function(result){if(!result){if(options.multiple){var words=trimWords($input.val()).slice(0,-1);$input.val(words.join(options.multipleSeparator)+(words.length?options.multipleSeparator:""));}else{$input.val("");$input.trigger("result",null);}}});}}function receiveData(q,data){if(data&&data.length&&hasFocus){stopLoading();select.display(data,q);autoFill(q,data[0].value);select.show();}else{hideResultsNow();}}function request(term,success,failure){if(!options.matchCase){term=term.toLowerCase();}var data=cache.load(term);if(data&&data.length){success(term,data);}else{if((typeof options.url=="string")&&(options.url.length>0)){var extraParams={timestamp:+new Date()};$.each(options.extraParams,function(key,param){extraParams[key]=typeof param=="function"?param():param;});$.ajax({mode:"abort",port:"autocomplete"+input.name,dataType:options.dataType,url:options.url,data:$.extend({q:lastWord(term),limit:options.max},extraParams),success:function(data){var parsed=options.parse&&options.parse(data)||parse(data);cache.add(term,parsed);success(term,parsed);}});}else{select.emptyList();failure(term);}}}function parse(data){var parsed=[];var rows=data.split("\n");for(var i=0;i<rows.length;i++){var row=$.trim(rows[i]);if(row){row=row.split("|");parsed[parsed.length]={data:row,value:row[0],result:options.formatResult&&options.formatResult(row,row[0])||row[0]};}}return parsed;}function stopLoading(){$input.removeClass(options.loadingClass);}};$.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(row){return row[0];},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(value,term){return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>");},scroll:true,scrollHeight:180};$.Autocompleter.Cache=function(options){var data={};var length=0;function matchSubset(s,sub){if(!options.matchCase){s=s.toLowerCase();}var i=s.indexOf(sub);if(options.matchContains=="word"){i=s.toLowerCase().search("\\b"+sub.toLowerCase());}if(i==-1){return false;}return i==0||options.matchContains;}function add(q,value){if(length>options.cacheLength){flush();}if(!data[q]){length++;}data[q]=value;}function populate(){if(!options.data){return false;}var stMatchSets={},nullData=0;if(!options.url){options.cacheLength=1;}stMatchSets[""]=[];for(var i=0,ol=options.data.length;i<ol;i++){var rawValue=options.data[i];rawValue=(typeof rawValue=="string")?[rawValue]:rawValue;var value=options.formatMatch(rawValue,i+1,options.data.length);if(value===false){continue;}var firstChar=value.charAt(0).toLowerCase();if(!stMatchSets[firstChar]){stMatchSets[firstChar]=[];}var row={value:value,data:rawValue,result:options.formatResult&&options.formatResult(rawValue)||value};stMatchSets[firstChar].push(row);if(nullData++<options.max){stMatchSets[""].push(row);}}$.each(stMatchSets,function(i,value){options.cacheLength++;add(i,value);});}setTimeout(populate,25);function flush(){data={};length=0;}return{flush:flush,add:add,populate:populate,load:function(q){if(!options.cacheLength||!length){return null;}if(!options.url&&options.matchContains){var csub=[];for(var k in data){if(k.length>0){var c=data[k];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub.push(x);}});}}return csub;}else{if(data[q]){return data[q];}else{if(options.matchSubset){for(var i=q.length-1;i>=options.minChars;i--){var c=data[q.substr(0,i)];if(c){var csub=[];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub[csub.length]=x;}});return csub;}}}}}return null;}};};$.Autocompleter.Select=function(options,input,select,config){var CLASSES={ACTIVE:"ac_over"};var listItems,active=-1,data,term="",needsInit=true,element,list;function init(){if(!needsInit){return;}element=$("<div/>").hide().addClass(options.resultsClass).css("position","absolute").appendTo(document.body);list=$("<ul/>").appendTo(element).mouseover(function(event){if(target(event).nodeName&&target(event).nodeName.toUpperCase()=="LI"){active=$("li",list).removeClass(CLASSES.ACTIVE).index(target(event));$(target(event)).addClass(CLASSES.ACTIVE);}}).click(function(event){$(target(event)).addClass(CLASSES.ACTIVE);select();input.focus();return false;}).mousedown(function(){config.mouseDownOnSelect=true;}).mouseup(function(){config.mouseDownOnSelect=false;});if(options.width>0){element.css("width",options.width);}needsInit=false;}function target(event){var element=event.target;while(element&&element.tagName!="LI"){element=element.parentNode;
}if(!element){return[];}return element;}function moveSelect(step){listItems.slice(active,active+1).removeClass(CLASSES.ACTIVE);movePosition(step);var activeItem=listItems.slice(active,active+1).addClass(CLASSES.ACTIVE);if(options.scroll){var offset=0;listItems.slice(0,active).each(function(){offset+=this.offsetHeight;});if((offset+activeItem[0].offsetHeight-list.scrollTop())>list[0].clientHeight){list.scrollTop(offset+activeItem[0].offsetHeight-list.innerHeight());}else{if(offset<list.scrollTop()){list.scrollTop(offset);}}}}function movePosition(step){active+=step;if(active<0){active=listItems.size()-1;}else{if(active>=listItems.size()){active=0;}}}function limitNumberOfItems(available){return options.max&&options.max<available?options.max:available;}function fillList(){list.empty();var max=limitNumberOfItems(data.length);for(var i=0;i<max;i++){if(!data[i]){continue;}var formatted=options.formatItem(data[i].data,i+1,max,data[i].value,term);if(formatted===false){continue;}var li=$("<li/>").html(options.highlight(formatted,term)).addClass(i%2==0?"ac_even":"ac_odd").appendTo(list)[0];$.data(li,"ac_data",data[i]);}listItems=list.find("li");if(options.selectFirst){listItems.slice(0,1).addClass(CLASSES.ACTIVE);active=0;}if($.fn.bgiframe){list.bgiframe();}}return{display:function(d,q){init();data=d;term=q;fillList();},next:function(){moveSelect(1);},prev:function(){moveSelect(-1);},pageUp:function(){if(active!=0&&active-8<0){moveSelect(-active);}else{moveSelect(-8);}},pageDown:function(){if(active!=listItems.size()-1&&active+8>listItems.size()){moveSelect(listItems.size()-1-active);}else{moveSelect(8);}},hide:function(){element&&element.hide();listItems&&listItems.removeClass(CLASSES.ACTIVE);active=-1;},visible:function(){return element&&element.is(":visible");},current:function(){return this.visible()&&(listItems.filter("."+CLASSES.ACTIVE)[0]||options.selectFirst&&listItems[0]);},show:function(){var offset=$(input).offset();element.css({width:typeof options.width=="string"||options.width>0?options.width:$(input).width(),top:offset.top+input.offsetHeight,left:offset.left}).show();if(options.scroll){list.scrollTop(0);list.css({maxHeight:options.scrollHeight,overflow:"auto"});if($.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var listHeight=0;listItems.each(function(){listHeight+=this.offsetHeight;});var scrollbarsVisible=listHeight>options.scrollHeight;list.css("height",scrollbarsVisible?options.scrollHeight:listHeight);if(!scrollbarsVisible){listItems.width(list.width()-parseInt(listItems.css("padding-left"))-parseInt(listItems.css("padding-right")));}}}},selected:function(){var selected=listItems&&listItems.filter("."+CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);return selected&&selected.length&&$.data(selected[0],"ac_data");},emptyList:function(){list&&list.empty();},unbind:function(){element&&element.remove();}};};$.fn.selection=function(start,end){if(start!==undefined){return this.each(function(){if(this.createTextRange){var selRange=this.createTextRange();if(end===undefined||start==end){selRange.move("character",start);selRange.select();}else{selRange.collapse(true);selRange.moveStart("character",start);selRange.moveEnd("character",end);selRange.select();}}else{if(this.setSelectionRange){this.setSelectionRange(start,end);}else{if(this.selectionStart){this.selectionStart=start;this.selectionEnd=end;}}}});}var field=this[0];if(field.createTextRange){var range=document.selection.createRange(),orig=field.value,teststring="<->",textLength=range.text.length;range.text=teststring;var caretAt=field.value.indexOf(teststring);field.value=orig;this.selection(caretAt,caretAt+textLength);return{start:caretAt,end:caretAt+textLength};}else{if(field.selectionStart!==undefined){return{start:field.selectionStart,end:field.selectionEnd};}}};})(jQuery);(function($){iVillage.runners.blocks.share_tools=function(){var st_wrap=$(".share-tools-sml, #share-tools-lrg");var st_save=st_wrap.find("a.save");var st_cc=st_wrap.find("a.care-circle");var st_share=st_wrap.find("a.share");var st_print=st_wrap.find("a.print");st_save.attr("href","/care_circle/add_save/"+st_save.attr("rel"));st_cc.attr("href","/care_circle/add_save/"+st_cc.attr("rel"));st_wrap.find("a").not(st_share).click(function(e){e.preventDefault();});st_save.bind("click",function(e){var node_id=$(this).attr("rel");var title=$(this).attr("title");$.ajax({type:"POST",url:"/care_circle/add_save",data:{save_type:"term",tid:node_id,save_name:title},success:function(data,textStatus){alert("This has been added to your Care Circle");},error:function(request,status,e){alert("There was an error adding this to your Care Circle. Please make sure you are logged in and try again.");},dataType:"json"});});st_cc.bind("click",function(e){var node_id=$(this).attr("rel");var title=$(this).attr("title");$.ajax({type:"POST",url:"/care_circle/add_save",data:{save_type:"node",nid:node_id,save_name:title},success:function(data,textStatus){alert("This has been added to your Care Circle");},error:function(request,status,e){alert("There was an error adding this to your Care Circle. Please make sure you are logged in and try again.");},dataType:"json"});});st_print.bind("click",function(){window.print();});var sendPageEvent=function(){if(page_item.id){jQuery.ajax({url:"/ajax/stats/shared/event",type:"POST",dataType:"json",data:{content_id:page_item.id,site_id:iVillage.siteName}});}};if(page_item){try{addthis.addEventListener("addthis.menu.share",sendPageEvent);}catch(e){}}};})(jQuery);function activateJsAds(){if(document.getElementById("ad_top_banner")!=null){document.getElementById("ad_top_banner").title=document.getElementById("ad_top_banner").src+"&ord="+randomOrd;}allowedAdTypes=["ad_flex_ad_first","ad_flex_ad_second","ad_box_ad_first","ad_box_ad_second","ad_bottom_banner","ad_ingrid"];for(var adCount=0;adCount<allowedAdTypes.length;adCount++){if(document.getElementById(allowedAdTypes[adCount])!=null&&document.getElementById(allowedAdTypes[adCount]).src!="about:blank"){var src=document.getElementById(allowedAdTypes[adCount]).src;frames[document.getElementById(allowedAdTypes[adCount]).name].location.replace(src+"&activateJs=1");document.getElementById(allowedAdTypes[adCount]).title=src+"&activateJs=1&ord="+randomOrd;}}}if(typeof $=="undefined"){window.onload=window.onload+"; activateJsAds();";}else{$(document).ready(activateJsAds);}var tmpAnswer=null;(function($){$.fn.refresh_ads_onclick=function(options,mode,AnswerValue){var defaults={allowedAdTypes:["ad_top_banner","ad_flex_ad_first","ad_flex_ad_second","ad_box_ad_first","ad_box_ad_second","ad_bottom_banner","ad_ingrid"]};randomOrd=Math.floor(Math.random()*10000000000);if(typeof mode=="undefined"){mode="loadTB";eTandomAd="waitingForTopBannerToLoad";}else{if(mode=="check"&&eTandomAd!="waitingForTopBannerToLoad"){mode="loadAll";}}if(typeof AnswerValue!="undefined"){randomOrd=AnswerValue;}var opts=$.extend(defaults,options);if(typeof resetiVRailAds=="function"&&opts.allowedAdTypes.length>0&&$("iframe#"+opts.allowedAdTypes[0]).length!=0){resetiVRailAds();}if($("iframe#ad_top_banner").length==0&&$("iframe#ad_ingrid").length!=0&&mode=="check"){mode="loadAll";eTandomAd="none";}for(var adCount=0;adCount<opts.allowedAdTypes.length;adCount++){if(mode=="loadTB"||mode=="loadAll"){if(mode=="loadAll"&&adCount==0&&opts.allowedAdTypes.length>1){adCount=1;}if($("iframe#"+opts.allowedAdTypes[adCount]).length!=0){var currentFrame=$("iframe#"+opts.allowedAdTypes[adCount]);var theSource=currentFrame.attr("src")+"&activateJs=1";frames[document.getElementById(opts.allowedAdTypes[adCount]).name].location.replace(theSource);document.getElementById(opts.allowedAdTypes[adCount]).title=theSource+"&ord="+randomOrd;if(currentFrame.css("height")==0||currentFrame.css("width")==0){currentFrame.css("height","");currentFrame.css("width","");}var currentFrameById=$("#"+$(currentFrame).attr("id"));bindLoadEvent(currentFrameById);}}if(mode=="loadTB"||mode=="check"){setTimeout(function(){$(this).refresh_ads_onclick(opts,"check",randomOrd);},300);return false;}}if(typeof updateiVRailAds=="function"&&opts.allowedAdTypes.length>0&&$("iframe#"+opts.allowedAdTypes[0]).length!=0){updateiVRailAds();}};})(jQuery);function bindLoadEvent(adById){adById.load(function(){fixAdDimensions(adById);});}function fixAdDimensions(ad){var iframeWidth,iframeHeight,object,embed,image;object=$(ad).contents().find("body object");embed=$(ad).contents().find("body embed");image=$(ad).contents().find("body img");iframe=$(ad).contents().find("body iframe");if(object.length>0||embed.length>0){if(object.length>0){object.each(function(){if($(this).height()>0){iframeHeight=$(this).height();}if($(this).width()>0){iframeWidth=$(this).width();}});}if(embed.length>0){embed.each(function(){if($(this).height()>0){iframeHeight=$(this).height();}if($(this).width()>0){iframeWidth=$(this).width();}});}}else{if(image.length>0&&image.parent()[0].nodeName==="A"){iframeHeight=image.height();iframeWidth=image.width();}else{if(iframe.length>0){iframeHeight=iframe.height();iframeWidth=iframe.width();}else{console.warn("Ad did not match any criteria");}}}image.each(function(){var id=$(this).attr("id");if(id&&id.substring(0,19)=="EXPANDO_PLACEHOLDER"){iframeHeight=$(this).attr("height");iframeWidth=$(this).attr("width");}if($(this).outerWidth()===1||$(this).outerHeight()===1||$(this).css("visibility")=="hidden"){$(this).css("display","none");}});$(ad).height(iframeHeight);$(ad).width(iframeWidth);$(ad).attr("data-height-update",iframeHeight);$(ad).attr("data-width-update",iframeWidth);}function refresh_ads_js_onclick(mode,AnswerValue){if(typeof resetiVRailAds=="function"){resetiVRailAds();}randomOrd=Math.floor(Math.random()*10000000000);if(typeof mode=="undefined"){mode="loadTB";eTandomAd="waitingForTopBannerToLoad";}else{if(mode=="check"&&eTandomAd!="waitingForTopBannerToLoad"){mode="loadAll";}}if(typeof AnswerValue!="undefined"){randomOrd=AnswerValue;}var allowedAdTypes=["ad_top_banner","ad_flex_ad_first","ad_flex_ad_second","ad_box_ad_first","ad_box_ad_second","ad_bottom_banner","ad_ingrid"];for(var adCount=0;adCount<allowedAdTypes.length;adCount++){if(mode=="loadTB"||mode=="loadAll"){if(mode=="loadAll"&&adCount==0&&allowedAdTypes.length>1){adCount=1;}if(document.getElementById(allowedAdTypes[adCount])!=null){var currentFrame=document.getElementById(allowedAdTypes[adCount]);var theSource=currentFrame.src+"&activateJs=1";document.getElementById(allowedAdTypes[adCount]).title=theSource+"&ord="+randomOrd;frames[document.getElementById(allowedAdTypes[adCount]).name].location.replace(theSource);if(currentFrame.height==0||currentFrame.width==0){currentFrame.height="";currentFrame.width="";}}}if(mode=="loadTB"||mode=="check"){setTimeout(function(){refresh_ads_js_onclick("check",randomOrd);},300);return false;}}if(typeof updateiVRailAds=="function"){updateiVRailAds();}}(function($){var polls={};polls.submit=function(){var $f=$(this);if($f.hasClass("poll-form-multi-image")){var $li=$("input:checked").parents("li");var idx=parseInt($li.attr("class").split("choice-")[1]);var $tab=$(".poll-results li:eq("+idx+") .tab");var n=parseInt($tab.html());$tab.html(n+1);polls.incrementTotal($f);}polls.assignWinner($f);polls.convertPercentages($f);var $p=$f.parents(".mod-poll");if($p.hasClass("mod-poll-of-two")||$p.hasClass("showdown")){$p.find(".content").addClass("show-results");}else{var this_poll=$f.parents(".poll");$(this).find(".poll-choices").hide();$(this).find(".poll-choices").next(".poll-results").css("display","none").removeClass("hide").fadeIn();}if($p.hasClass("mod-poll-of-two")){$p.find(".poll-title").hide();$p.find(".related").show();}$.ajax({type:"POST",url:$f.attr("action"),data:$f.serialize(),success:function(data,status){iVillage.loyalty.submitPollCredit();},error:function(req,status,err){}});return false;};polls.incrementTotal=function($f){var n=parseInt($f.find("input[name=total_votes]").val());var total=(isNaN(n))?0:n;$f.find("input[name=total_votes]").val(total+1);};polls.assignWinner=function($f){var pollNumbers=new Array();$f.find(".tab").each(function(){var n=parseInt($(this).html());pollNumbers.push(n);});var maxNum=Math.max.apply(Math,pollNumbers);var i=0;var winners=new Array();$f.find(".tab").each(function(){var n=parseInt($(this).html());if(n==maxNum){winners.push($(this));}$(this).ifixpng();});if(winners.length==1){winners[0].parents("li").append('<div class="winner"></div>');}};polls.convertPercentages=function($f){var total=parseInt($f.find("input[name=total_votes]").val(),10);$f.find(".tab").each(function(){var n=parseInt($(this).html(),10);var p=n/total;p=p*100;p=Math.round(p);$(this).html("<strong>"+Math.round((n*100)/total)+"</strong>%");});};polls.calculateStandardPoll=function(form,totalVotes){var total=(typeof totalVotes!="undfined")?totalVotes:parseInt(form.find("input[name=total_votes]").val(),10);form.find(".tab").each(function(){var n=parseInt($(this).html(),10);var p=n/total;p=p*100;p=Math.round(p);$(this).html("<strong>"+Math.round((n*100)/total)+"</strong>%");});form.find(".poll-choices").hide().next(".poll-results").css("display","none").removeClass("hide").fadeIn();};iVillage.runners.blocks.polls_beauty=function(){$("form[name=poll-form]").submit(polls.submit);$(".btn-poll").live("click",function(e){e.preventDefault();var $f=$(this).parents("form");var $t=$(this).siblings("p.choice").find(".tab");var n=parseInt($t.html());$t.ifixpng();$t.html(n+1);polls.incrementTotal($f);var choiceid=$(this).find("input").val();$("input[name$='choice_id']").val(choiceid);$(this).parents(".poll-form").submit();return false;});};iVillage.runners.blocks.polls_parenting=function(){$("form[name=poll-form]").submit(polls.submit);$(".btn-poll").live("click",function(e){e.preventDefault();var $f=$(this).parents("form");var choice_class=$(this).find(".find-choice").attr("id");var $t=$("."+choice_class).find(".tab");var n=parseInt($t.html());$t.html(n+1);polls.incrementTotal($f);$(this).find(".choice-id").attr("disabled",false);$(this).parents(".poll-form").submit();return false;});};iVillage.runners.blocks.polls_standard=function(){$("form[name=poll-form]").live("submit",function(event){var form=$(this);event.preventDefault();$.ajax({type:"POST",url:form.attr("action"),cache:false,data:form.serialize(),dataType:"json",error:function(result){polls.calculateStandardPoll(form);},success:function(result){var resultElement=form.find("ul.poll-results");var totalVotes=0;if(typeof result!="undefined"&&typeof result.data!="undefined"){for(var key in result.data){if(result.data.hasOwnProperty(key)){var choiceElement=$("#poll-result-"+key);totalVotes=totalVotes+parseInt(result.data[key]);if(choiceElement.length>0){choiceElement.find(".tab").html(result.data[key]+'<span class="percent">&lt;&gt;</span>');}}}}polls.calculateStandardPoll(form,totalVotes);iVillage.loyalty.submitPollCredit();}});});$(".btn-poll").live("click",function(e){e.preventDefault();var $f=$(this).parents("form");var choice_class=$(this).find(".find-choice").attr("id");var $t=$("."+choice_class).find(".tab");if($t.length===0){choice_class="poll-result-"+$(this).find(".choice-id").attr("id");var $t=$("#"+choice_class).find(".tab");}var n=parseInt($t.html(),10);$t.html(n+1);polls.incrementTotal($f);$(this).find(".choice-id").attr("disabled",false);$(this).parents(".poll-form").submit();return false;});};iVillage.runners.blocks.polls_multiple_choice=function(){$("form[name=poll-form]").submit(polls.submit);$(".submit-poll").live("click",function(e){e.preventDefault();var $f=$(this).parents("form");var selected_radio=$f.find(".choice-id:checked");var selected_li=selected_radio.closest("li");var choice_class=selected_li.find(".find-choice").attr("id");var $t=$("."+choice_class).find(".tab");var n=parseInt($t.html());$t.html(n+1);polls.incrementTotal($f);$f.submit();return false;});};})(jQuery);iVillage.runners.blocks.search_filter_highlight=function(){_iVillage_SEARCH={findActive:function(){var HREF,currentURL;currentURL=$.url.param("site");jQuery("div.mod-search-range ul li a, .result-cat-item a.cat-name, li.sub-parent a.active").each(function(){HREF=this.href;if(HREF===window.location.href&&$(this).attr("title")===$(".qa-totals .qa-search-term").text()){jQuery(this).parent().addClass("active");}});jQuery(".mod-search-container li.parent").each(function(){if(jQuery(this).find("ul.sub-category li.sub-parent ul li").hasClass("active")||jQuery(this).find("ul.sub-category li").hasClass("active")){jQuery(this).addClass("active");jQuery(this).find("ul.sub-category li.sub-parent:has(ul li.active)").addClass("active");}});jQuery(".category-and-results").equalizeChildHeights();},hoverCategories:function(jQuerySelector){var categoryParent=jQuery(jQuerySelector);var categoryParentAction=jQuery(categoryParent).find("a:eq(0)");var categoryParentPool=jQuery(categoryParent).find("ul:eq(0)");var parent;categoryParentAction.each(function(){jQuery(this).click(function(){parent=jQuery(this).parent();if(parent.hasClass("toggle")){parent.find("ul:eq(0)").slideUp("normal",function(){parent.removeClass("toggle active");});}else{jQuery(".mod-search-container ul li.sub-parent").removeClass("toggle");jQuery(categoryParentPool).slideUp("normal",function(){});parent.find("ul:eq(0)").slideDown("normal",function(){parent.addClass("toggle active");jQuery(".category-and-results").equalizeChildHeights();});}return false;});});}};var _iVillage_setSearchStates=new _iVillage_SEARCH.findActive();var _iVillage_hoverSubCategories=new _iVillage_SEARCH.hoverCategories("div.mod-search-range ul li.parent ul.sub-category li.sub-parent");};iVillage.runners.blocks.centered_title=function(){var centered_title=$(".mod-centered-title .centered-title");centered_title.centerHoriz();centered_title.css("visibility","visible");};var RelatedVideo=function(){return function(){this.initialize.apply(this,arguments);};}();RelatedVideo.prototype={initialize:function(options){this.container=document.createElement("DIV");this.container.id="RelatedVideoJSObj";this.listContainer=document.createElement("UL");this.listContainer.id="RelatedVideoJSObj_listContainer";this.container.appendChild(this.listContainer);this.options=options||{};this.render();},render:function(){var parent=null;if(this.options.parent){parent=document.getElementById(this.options.parent);}else{var body=document.getElementsByTagName("BODY");if(body){parent=body[0];}}if(parent){parent.appendChild(this.container);}},update:function(data){if(!data){return;}this.clear();var items=data;for(var x=0;x<items.length;x++){items[x].length=this.formatTime(items[x].length);}var len=this.options.videoCount||items.length;for(var i=0;i<len;i++){var li=this.getListItemDiv(items[i]);if(li){this.listContainer.appendChild(li);}}},clear:function(){var cn=this.listContainer;while(cn.firstChild){var el=cn.removeChild(cn.firstChild);delete el;}},formatTime:function(time){var seconds=Math.floor(time/1000);var min=Math.floor(seconds/60);var hours=Math.floor(min/60);seconds-=min*60;min-=hours*60;if(seconds<10){seconds="0"+seconds;}if(hours>0){if(min<10){min="0"+min;}return"("+hours+":"+min+":"+seconds+")";}else{return"("+min+":"+seconds+")";}},getListItemDiv:function(data){if(!data){return;}var listItem=document.createElement("DIV");listItem.className="hulu-related-item";var img=document.createElement("IMG");img.setAttribute("src",data.thumbnailURL);var clickFunc=this.options.onClickFunction;if(this.options.idType==="pid"){img.onclick=function(){try{if(clickFunc){clickFunc(qsObj.dpid,data.PID,qsObj.env,data.encodingProfile);}else{NewSite.videoPlayerComponent.playVideo(data.PID);}}catch(e){alert(e);}};}else{img.onclick=function(){try{if(clickFunc){clickFunc(qsObj.dpid,data.contentId,qsObj.env,data.encodingProfile);}else{NewSite.videoPlayerComponent.playVideo(data.contentId);}}catch(e){alert(e);}};}var ul_inner=document.createElement("ul");ul_inner.className="related-ul";var li_inner=document.createElement("li");li_inner.className="related-li";var title=document.createElement("span");title.innerHTML=data.title;title.className="related-title";title.onclick=img.onclick;li_inner.appendChild(title);ul_inner.appendChild(li_inner);listItem.appendChild(ul_inner);var listItem_outer=document.createElement("LI");try{if(data.Segments&&data.Segments.length>0){var multiple=data.Segments.match(/\,/g);if(multiple!=null&&multiple.length>=3){listItem_outer.className="Longform";}}}catch(e){}listItem_outer.appendChild(listItem);return listItem_outer;}};(function($){iVillage.runners.blocks.stripCarousel=function(){$(".pane-carousel-strip-boxed").each(function(){var split,expected,backfill,carousel,total,content,id=$(this).attr("id"),visible=4,scroll=4;if(id==""){id="Tab-Carousel-"+Math.floor(Math.random()*200)+new Date().getTime();$(this).attr("id",id);}else{id=$(this).attr("id");}content=$("#"+id).find(".content");carousel=content.find(".carousel");total=carousel.find("ul").children().length;function renderDots(total,visible){var dots=Math.ceil(total/visible),ul=$('<ul class="indicator" />');for(var i=0;i<dots;i++){var li=$('<li class="'+(i*visible)+'" />');if(i==0){li.addClass("current");}ul.append(li);}content.append(ul);ul.width((li.width()*dots));}function updateControls(current,total,visible){if(current==0){content.find(".prev").hide();}else{content.find(".prev").show();}if(current==(total-visible)){content.find(".next").hide();}else{content.find(".next").show();}}function backfill(num){for(var i=0;i<num;i++){carousel.find("ul").append($("<li />"));}}if(total>5){split=Math.ceil(total/scroll);expected=scroll*split;dummies=expected-total;backfill(dummies);total=carousel.find("ul").children().length;$('<a href="#" class="prev">Previous</a>').insertBefore(carousel);$('<a href="#" class="next">Next</a>').insertAfter(carousel);renderDots(expected,visible);$(this).find(".more").hide();carousel.css("width","90%");$(".prev").live("click",function(e){e.preventDefault();return false;});$(".next").live("click",function(e){e.preventDefault();return false;});carousel.jCarouselLite({btnNext:"#"+id+" .next",btnPrev:"#"+id+" .prev",scroll:scroll,visible:visible,circular:false,afterEnd:function(obj){var index=carousel.find("li").index(obj[0]);updateControls(index,total,visible);content.find(".indicator li").removeClass("current");content.find(".indicator li."+index+"").addClass("current");}});carousel.find("li").height("auto");updateControls(0,total,visible);}});};})(jQuery);iVillage.runners.blocks.rating=function(){$(document).bind("sso.ready",function(){if(!iV_SSO.isLoggedIn()){$("input.star").attr("disabled","true");$(".rating-text > a").bind("click",iV_SSO.login);}var tip=$(".rating-text");var selected=false;if($.isFunction($.fn.rating)){$("input.star").rating({focus:function(value,link){tip[0].data=tip[0].data||tip.html();tip.html(link.title||"value: "+value);},blur:function(value,link){$(".rating-text").html(tip[0].data||"");},callback:function(value,link){selected=true;tip[0].data=$(link).parents("form").find(".rating-response").html();tip.fadeOut("fast",function(){var rating_data={content_id:$("#comments").attr("rel"),author:iV_SSO.getUserId(),value:value};$(this).html(tip[0].data).fadeIn("fast",function(){$.ajax({type:"POST",url:"/rating/create/?format=json",dataType:"json",data:rating_data});});});}});}});};iVillage.runners.blocks.carousel_horizontal=function(){if($.fn.slideshow){$("#slideshow").slideshow({debug:"false"});}var mod_feat_slideshow=$(".mod-feat-slideshow .slideshow");if(mod_feat_slideshow.length){var slide_count=$(".mod-feat-slideshow .slide-count");var slide_count_curr=$(".curr",slide_count);var slide_count_total=$(".total",slide_count);var caro_elems=$(".feat",mod_feat_slideshow);var caro_items=caro_elems.length;slide_count_total.text(caro_items);var homepage_features=$(".feat",mod_feat_slideshow);homepage_features.hover(function(e){if($(e.target).hasClass("feat")){$(this).addClass("active").css("cursor","pointer");}},function(e){$(this).removeClass("active").css("cursor","default");}).bind("click",function(e){if($(e.target).hasClass("feat")){window.location.href=$(this).find("h2 > a").attr("href");}});var slide_ctrls=mod_feat_slideshow.next("ul.ctrls");if(caro_items>1){$.fn.updateSlideshowNav=function(action,index,controls){if(index==0){index=caro_items;}if(index>caro_items){index=1;}var focus=controls.children(":eq("+parseInt(index-1)+")");switch(action){case"before":focus.children().fadeIn("fast");break;case"after":focus.children().fadeOut("fast");break;}};var dot_ctrls=$('<ul class="dot-ctrls hide"></ul>');var dots_arr=[];for(var i=0;i<caro_items;i++){$('<li><a href="#" class="slide-'+i+'" title="'+caro_elems.filter(":eq("+i+")").find("span span").text()+'">View item '+i+"</a></li>").appendTo(dot_ctrls);dots_arr.push(".dot-ctrls .slide-"+i);}dot_ctrls.insertAfter(mod_feat_slideshow.parents("div.btm").children("ul.ctrls"));dot_ctrls.find("a:eq(0)").hide();mod_feat_slideshow.jCarouselLite({speed:750,visible:1,auto:3000,easing:"easeOutQuart",btnNext:".mod-feat-slideshow .next",btnPrev:".mod-feat-slideshow .prev",btnGo:dots_arr,beforeStart:function(slide){var slide_index=$("li.feat").index(slide);$.fn.updateSlideshowNav("before",slide_index,dot_ctrls);},afterEnd:function(slide){var slide_index=$("li.feat").index(slide);$.fn.updateSlideshowNav("after",slide_index,dot_ctrls);switch(slide_index){case parseInt($(this).children().length-1):slide_count_curr.text("1");break;case 0:slide_count_curr.text(caro_items);break;default:slide_count_curr.text($("li.feat").index(slide));break;}}});if($.browser.msie&&$.browser.version.substr(0,1)<7){mod_feat_slideshow.find("p.chimes").hide().show();}$.fn.noIEFade=function(speed){(!$.browser.msie)?$(this).hide().removeClass("hide").fadeIn(speed):$(this).removeClass("hide");};slide_ctrls.noIEFade("medium");slide_count.noIEFade("medium");dot_ctrls.centerHoriz();dot_ctrls.noIEFade("medium");}}$.fn.getImagesForIvBg=function(){var result=$(this);window.onload=function(){result.each(function(){var bgimage=$(this).attr("ivbgimg");$(this).attr("style","background-image:url("+bgimage+")");$(this).removeAttr("ivbgimg");});};};$("div.slideshow li.feat[ivbgimg]").getImagesForIvBg();};(function($){iVillage.runners.blocks.follow_save_share_print=function(){function changeLinks(str_old,str_new,rel){$("a.fssp-"+str_old+"[rel="+rel+"]").each(function(){var that=$(this);that.removeClass("fssp-"+str_old).addClass("fssp-"+str_new);if(that.hasClass("fssp-btn-"+str_old)){that.removeClass("fssp-btn-"+str_old).addClass("fssp-btn-"+str_new);}$.fn.tooltips.remove();});instantiateTooltips();}function instantiateTooltips(){if(typeof $.fn.tooltips==="function"){$("a.fssp-btn").tooltips({top_diff:-60,left_diff:function(that){if(that.hasClass("fssp-btn-save")){return -65;}else{if(that.hasClass("fssp-btn-unsave")){return -61;}else{if(that.hasClass("fssp-btn-follow")){return -69;}else{return -63;}}}},content:function(that){if(that.hasClass("fssp-btn-save")){return'<a href="#" rel="'+that.attr("rel")+'" class="fssp fssp-save save">Save</a>';}else{if(that.hasClass("fssp-btn-unsave")){return'<a href="#" rel="'+that.attr("rel")+'" class="fssp fssp-unsave unsave">Unsave</a>';}else{if(that.hasClass("fssp-btn-follow")){var type=that.attr("rel").split(":")[0];return'<a href="#" rel="'+that.attr("rel")+'" class="fssp fssp-follow follow-'+type.replace(" ","-")+'">Follow this '+type.replace(" ","-")+"</a>";}else{return'<a href="#" rel="'+that.attr("rel")+'" class="fssp fssp-unfollow unfollow">Unfollow</a>';}}}}});}}function save(e){var that=$(this);iV_SSO.save(e);that.unbind("saveChange").bind("saveChange",function(){changeLinks("save","unsave",that.attr("rel"));});}function unsave(e){var that=$(this);iV_SSO.deleteSave(e);that.unbind("saveChange").bind("saveChange",function(){changeLinks("unsave","save",that.attr("rel"));});}$("a.fssp-save").live("click",save);$("a.fssp-unsave").live("click",unsave);instantiateTooltips();};})(jQuery);(function($){iVillage.runners.blocks.follow_ivillage=function(){$(".follow-tab li a").bind("mouseover",function(){$(this).addClass("hover");});$(".follow-tab li a").bind("mouseout",function(){$(this).removeClass("hover");});$(".follow-tab li a").click(function(e){$(".follow-tab li a").each(function(){$(this).removeClass($(this).attr("id")+"-shift");$(this).bind("mouseover",function(){$(this).addClass("hover");});});$(".follow-method-input").each(function(){$(this).addClass("hide").hide();});switch($(this).attr("id")){case"newsletter-tab":e.preventDefault();$(this).addClass("newsletter-tab-shift").removeClass("hover").unbind("mouseover");$(".newsletter-pnl").css("display","none").removeClass("hide").fadeIn("slow");break;case"rss-tab":e.preventDefault();$(this).addClass("rss-tab-shift").removeClass("hover").unbind("mouseover");$(".rss-pnl").css("display","none").removeClass("hide").fadeIn("slow");break;default:}});};})(jQuery);iVillage.runners.blocks.sponsored=function(){if($(".mod-sponsored .tooltip").length){var sponsored_text=$(".mod-sponsored .sponsor span").text();var disclaimer_text=$(".mod-sponsored .sponsor a.partner-text").attr("rel");$(".mod-sponsored p.sponsored-text").text(sponsored_text);$(".mod-sponsored p.disclaimer").html(disclaimer_text);$(".mod-sponsored .tooltip").bgiframe();$(".mod-sponsored .sponsor a.partner-text").bind("mouseover",function(e){e.preventDefault();$(".mod-sponsored .tooltip").fadeIn("fast");});$(".mod-sponsored a.close").bind("click",function(e){e.preventDefault();$(".mod-sponsored .tooltip").fadeOut("fast");});}};iVillage.challenges=(function(window,$){var defaults={signupBoxDefaultValue:"Sign Up with Your Email Address",current_day:"",challenge_id:"",currAssignmentTitle:"",currAssignmentBody:"",currAssignmentRelatedContent:"",accountCreateCopy:"Create an account collect your rewards",signinCopy:"Sign in and collect your rewards",shareCopy:"Share This Now &amp; Earn More Rewards!",signupErrorMsg:"Oops! Our servers are having a little bit of trouble. Could you try again a little later?",shareData:"",goalMessage:"",goalMinutes:"",assignmentStatus:new Array(),type:""},options={},errorArrow='<span class="error-arrow"></span>',postURLs={newsletter_signup:"/ajax/newsletter/signup"},validations={signup:{rules:{email:{required:true,email:true}},messages:{email:{required:errorArrow+"Please enter your email",email:errorArrow+"Please enter a valid email."}}}},joinChallengeSignup=function(){log("joinChallengeSignup()");$(".join-challenge-form").each(function(index){var challengeForm=$(this),emailBox=challengeForm.find("input[name=email]"),signupBoxDefaultValue=emailBox.val();emailBox.live("focus",function(){if($(this).val()==options.signupBoxDefaultValue){$(this).val("");}}).live("blur",function(){if($(this).val()==""){$(this).val(options.signupBoxDefaultValue);}});trySettingUserEmail(emailBox);challengeForm.validate(validations.signup);challengeForm.submit(function(e){challengeSignupFormProcessor(e);});checkChallengeCookie();});},trySettingUserEmail=function(emailBox){if(typeof iVillage!="undefined"&&typeof iVillage.arw_email!="undefined"){emailBox.val(iVillage.arw_email);emailBox.hide().after($("<div class='user-email-container'>"+iVillage.arw_email+"</div>"));}},addShareFunctionality=function(wrapper){log("addShareFunctionality()");wrapper.find(".badge-action .share").live("click",function(){var container=$(this).parent().parent();container.find(".title").css("visibility","hidden");container.find(".message").empty().html("Share your new reward on");showShareUI($(this).parent());});},showShareUI=function(wrapper){log("showShareUI()");if(typeof gigya!="undefined"){var ua=new gigya.socialize.UserAction();var userMessage=(options.shareData!=""?options.shareData:"Score! I just earned the community badge on @iVillage #iVillageRewards");ua.setTitle(userMessage);ua.setLinkBack("http://www.ivillage.com");log("showShareUI() > User Action:",ua);var shareButtons=[{provider:"facebook",enableCount:false,iconOnly:true,iconImgUp:"/public/images/components/share/facebook-f.png",},{provider:"twitter",enableCount:false,iconOnly:true,iconImgUp:"/public/images/components/share/twitter-f.png"},{provider:"google-plusone",enableCount:false,iconOnly:true,iconImgUp:"/public/images/components/share/googleplus-f.png"},{provider:"email",enableCount:false,iconOnly:true,iconImgUp:"/public/images/components/share/email-f.png"}];var params={userAction:ua,shareButtons:shareButtons,containerID:wrapper.attr("id"),cid:"",onSendDone:function(eventObj){log("Data returned from Gigya for Challenge Badge share:",eventObj);setTimeout($.fn.ssoColorbox.close,4000);}};wrapper.empty();gigya.socialize.showShareBarUI(params);}},getChallengeAssignmentCompletionStatus=function(){var assignment_id=$(".pane-new-challenge-assignment .content .current .challenge-values .assignment_id").html();var submitData="challenge_id="+iVillage.challenges.challenge_id+"&assignment_id="+parseInt(assignment_id);if(assignment_id){$.ajax({type:"POST",url:"/ajax/get/challenge/status",cache:false,data:submitData,success:function(result){var data=eval("("+result+")");if(data!=null&&data!="undefined"){updateAssignmentNodeStatus(data.message);updateCurrentAssignmentStatus();}}});}},updateAssignmentNodeStatus=function(data){if(data!=null&&data!="undefined"){var kkey="";var kvalue="";for(var i=0;i<data.length;i++){kkey=data[i].key;kvalue=data[i].value;options.assignmentStatus[kkey]=kvalue;}}},updateCurrentAssignmentStatus=function(){var assignmentId=parseInt($(".pane-new-challenge-assignment .content .current .challenge-values .assignment_id").html());$("#challenge_completion_box").attr("checked",parseInt(options.assignmentStatus[assignmentId]));if(parseInt(options.assignmentStatus[assignmentId])){$(".pane-new-challenge-active-assignment-description .active-assignment-completion .progress").html("complete");$(".pane-new-challenge-active-assignment-description .active-assignment-grey-completion .progress").html("I had a GREAT hair day!");}else{$(".pane-new-challenge-active-assignment-description .active-assignment-completion .progress").html("in progress");$(".pane-new-challenge-active-assignment-description .active-assignment-grey-completion .progress").html("I am having a great hair day.");}},bindChallengeComplete=function(){setCurrentDay();updateAssignmentTitleAndBody(options.current_day);$("#challenge_completion_box").click(function(){if($("#challenge_completion_box").is(":checked")){markChallengeAsComplete();}else{markChallengeAsInComplete();}});},markChallengeAsComplete=function(){var assignment_id=$(".pane-new-challenge-assignment .content .current .challenge-values .assignment_id").html();var submitData="challenge_id="+iVillage.challenges.challenge_id+"&assignment_id="+parseInt(assignment_id);$.ajax({type:"POST",url:"/ajax/set/challenge/completion",cache:false,data:submitData,success:function(result){var data=eval("("+result+")");if(!data.success){if(data.message=="no_login"){$(".sso-sign-in").trigger("click");}else{$(".pane-new-challenge-active-assignment-description .content .completion-message").html("Cannot mark as complete now. Please try again later.");}}else{updateAssignmentNodeStatus(data.message);$(".pane-new-challenge-active-assignment-description .active-assignment-completion .progress").html("complete");$(".pane-new-challenge-active-assignment-description .active-assignment-grey-completion .progress").html("I had a GREAT hair day!");$(".pane-new-challenge-active-assignment-description .content .completion-message").html("");}}});},markChallengeAsInComplete=function(){var assignment_id=$(".pane-new-challenge-assignment .content .current .challenge-values .assignment_id").html();var submitData="challenge_id="+iVillage.challenges.challenge_id+"&assignment_id="+parseInt(assignment_id);$.ajax({type:"POST",url:"/ajax/get/challenge/completion",cache:false,data:submitData,success:function(result){var data=eval("("+result+")");if(!data.success){$(".pane-new-challenge-active-assignment-description .content .completion-message").html("Cannot mark as imcomplete now. Please try again later.");}else{updateAssignmentNodeStatus(data.message);$(".pane-new-challenge-active-assignment-description .active-assignment-completion .progress").html("in progress");$(".pane-new-challenge-active-assignment-description .active-assignment-grey-completion .progress").html("I am having a great hair day");$(".pane-new-challenge-active-assignment-description .content .completion-message").html("");}}});},newChallengeHandleFormSubmitter=function(e){log("newChallengeHandleFormSubmitter()");e.preventDefault();$(this).parents("form").submit();},challengeSignupFormProcessor=function(e){log("challengeSignupFormProcessor()");e.preventDefault();var form=$(e.target);submitChallengeSignupForm(form);},submitChallengeSignupForm=function(form){var news=form.find("#newsletter_id").val(),start_date=form.find("#start_date").val(),submitData=form.serialize(),thankyouTitle="",thankyouMsg="";submitData+="&newsletter[]="+news+"&newsletter_date["+news+"]="+start_date+"&is_challenge=true";$.ajax({type:"POST",url:postURLs.newsletter_signup,cache:false,data:submitData,success:function(data){if(typeof data.status!="undefined"&&data.status){var form_id=form.attr("id");var challenge_id=form_id.split("_")[1];if(typeof iVillage.challenges.group!="undefined"&&iVillage.challenges.group.length>0){if(typeof iVillage.challenges.group[parseInt(challenge_id)]!="undefined"){if(typeof iVillage.challenges.group[parseInt(challenge_id)].newChallengeThankyouTitle!="undefined"){thankyouTitle=iVillage.challenges.group[parseInt(challenge_id)].newChallengeThankyouTitle;}if(typeof iVillage.challenges.group[parseInt(challenge_id)].newChallengeThankyouMessage!="undefined"){thankyouMsg=iVillage.challenges.group[parseInt(challenge_id)].newChallengeThankyouMessage;}if(typeof iVillage.challenges.group[parseInt(challenge_id)].name!="undefined"){options.challenge_name=iVillage.challenges.group[parseInt(challenge_id)].name;}}}else{if(typeof iVillage.challenges.newChallengeThankyouTitle!="undefined"){thankyouTitle=iVillage.challenges.newChallengeThankyouTitle;}if(typeof iVillage.challenges.newChallengeThankyouMessage!="undefined"){thankyouMsg=iVillage.challenges.newChallengeThankyouMessage;}if(typeof iVillage.challenges.name!="undefined"){options.challenge_name=iVillage.challenges.name;}}var badgeInformation=getBadgeData(data,form_id),rightMessage="",leftMessage="";if(badgeInformation.length){rightMessage=$("<div class='right-message'></div>").append(badgeInformation);leftMessage=$("<div class='left-message'></div>");}else{leftMessage=$("<div class='left-message left-message-large'></div>");}leftMessage.append($("<div class='thankyou-title'>"+thankyouTitle+"</div>"));leftMessage.append($("<div class='thankyou-message'>"+thankyouMsg+"</div>"));getGoalData(form_id);userGoalMinutes=$("<div class='challenge-goal-content'></div>");if(options.goalMessage!=""){userGoalMinutes=$("<div class='challenge-reading-goal-content'></div>");userGoalMinutes.append($("<div class='title-text'>"+options.goalMessage+"</div>"));}if(options.goalMessage!=""&&options.goalMinutes!=""){if(data.is_loggedin){userGoalMinutes.append($("<div class='goal-minutes-container'><div class='goal-title-text'>"+options.goalMinutes+"</div><div class='goal-minutes'><input id='user-goal-minutes' type='textbox' length='75' /></div><div name='Challenges:SignUp:Saved Goal:"+options.challenge_name+"' id='goal-save-button' /></div><div class='skip-btn'><a name='Challenges:SignUp:Skipped Goal:"+options.challenge_name+"' class='sso-close' href='#'>Skip</a></div>"));
}else{if(data.is_registred){userGoalMinutes.append($("<div class='goal-minutes-container registered-in'><div class='goal-title-text'>Become an iVillage member or sign in to save your goal.</div><div class='buttons'><div class='signin'><img src='/public/images/buttons/btn_signin.png' value='Sign in' id='goal-signin-button'/></div><div class='join-ivillage'><img src='/public/images/buttons/btn-join-now.png' alt='Join Now!' id='goal-register-button'/></div></div></div><div class='skip-btn'><a name='Challenges:SignUp:Skipped Goal:"+options.challenge_name+"' class='sso-close' href='#'>Skip</a></div>"));setCookieForChallenge("showGoalSetupForm",form_id,1);}else{userGoalMinutes.append($("<div class='goal-minutes-container logged-in'><div class='goal-title-text'>Become an iVillage member or sign in to save your goal.</div><div class='buttons'><div class='join-ivillage'><img src='/public/images/buttons/btn-join-now.png' alt='Join Now!' id='goal-register-button'/></div><div class='signin'><img src='/public/images/buttons/btn_signin.png' value='Sign in' id='goal-signin-button'/></div></div></div><div class='skip-btn'><a name='Challenges:SignUp:Skipped Goal:"+options.challenge_name+"' class='sso-close' href='#'>Skip</a></div>"));setCookieForChallenge("showGoalSetupForm",form_id,1);}}}userGoalMinutes.html(userGoalMinutes.html());var newChallengeLayover=$("<div class='new-challenge-thankyou-overlay'></div>").append($("<div class='top-content'></div>").append(leftMessage,rightMessage,userGoalMinutes));$.fn.ssoColorbox({title:"CONGRATULATIONS!",html:newChallengeLayover,scrolling:false,overlayClose:false});goog_report_conversion();bindGoalButtons(challenge_id);form.parent("div").empty().append($("<div class='challenge-signup-success-message' />").html("Thanks for signing up!"));}else{if(typeof data.status!="undefined"&&!data.status){if(typeof data.error!="undefined"&&data.error=="You could not be subscribed to this newsletter."){showErrorOverlay(options.signupErrorMsg);}}else{}}},error:function(data){log("challengeSignupFormProcessor() > Returned error.",data);showErrorOverlay(options.signupErrorMsg);}});},setCookieForChallenge=function(c_name,value,exdays){var exdate=new Date();exdate.setDate(exdate.getDate()+exdays);var c_value=escape(value)+((exdays==null)?"":"; expires="+exdate.toUTCString());document.cookie=c_name+"="+c_value;},getChallengeCookie=function(c_name){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==c_name){return unescape(y);}}},checkChallengeCookie=function(){var fid=getChallengeCookie("showGoalSetupForm");var st=getChallengeCookie("userGoalFormClick");if(fid!=""&&st==1&&typeof iVillage!="undefined"&&typeof iVillage.arw_email!="undefined"){submitChallengeSignupForm($("#"+fid));}setCookieForChallenge("showGoalSetupForm","",-1);setCookieForChallenge("userGoalFormClick","",-1);},showErrorOverlay=function(msg){if(typeof msg=="undefined"){msg=options.signupErrorMsg;}var leftMessage=$("<div class='left-message left-message-large'></div>");leftMessage.append("<span class='error'>"+msg+"</span>");var relatedContent="";if($(".new-challenges-related-content-1477").length){relatedContent=$("<div class='challenge-related-content'></div>");relatedContent.append($("<div class='title-text'>Here are some things you might be interested in</div>"));relatedContent.html(relatedContent.html()+$(".new-challenges-related-content-1477").html());}var closeButton=$("<div class='close-btn'><a class='sso-close' href='#'><img src='/public/images/icons/close-btn.jpg'/></a></div>");var newChallengeLayover=$("<div class='new-challenge-thankyou-overlay'></div>").append($("<div class='top-content'></div>").append(leftMessage,relatedContent,closeButton));$.fn.ssoColorbox({title:"CONGRATULATIONS!",html:newChallengeLayover,scrolling:false,overlayClose:false});},getGoalData=function(form_id){var challenge_id=form_id.split("_")[1];if(typeof iVillage.challenges.group!="undefined"){if(typeof iVillage.challenges.group[parseInt(challenge_id)]!="undefined"&&typeof iVillage.challenges.group[parseInt(challenge_id)].goal_message!="undefined"){options.goalMessage=iVillage.challenges.group[parseInt(challenge_id)].goal_message;}if(typeof iVillage.challenges.group[parseInt(challenge_id)]!="undefined"&&typeof iVillage.challenges.group[parseInt(challenge_id)].goal_minutes!="undefined"){options.goalMinutes=iVillage.challenges.group[parseInt(challenge_id)].goal_minutes;}}else{if(typeof iVillage.challenges.goal_message!="undefined"){options.goalMessage=iVillage.challenges.goal_message;}if(typeof iVillage.challenges.goal_minutes!="undefined"){options.goalMinutes=iVillage.challenges.goal_minutes;}}},getBadgeData=function(data,form_id){log("getBadgeData()");var badgeImage="",badgeCopy="";if(typeof iVillage.challenges.group!="undefined"&&iVillage.challenges.group.length>0){var challenge_id=form_id.split("_")[1];if(typeof iVillage.challenges.group[parseInt(challenge_id)]!="undefined"){if(typeof iVillage.challenges.group[parseInt(challenge_id)].newChallengeBadgeImage!="undefined"){badgeImage=iVillage.challenges.group[parseInt(challenge_id)].newChallengeBadgeImage;}if(typeof iVillage.challenges.group[parseInt(challenge_id)].newChallengeBadgeCopy!="undefined"){badgeCopy=iVillage.challenges.group[parseInt(challenge_id)].newChallengeBadgeCopy;}if(typeof iVillage.challenges.group[parseInt(challenge_id)].newChallengeBadgeShareInfo!="undefined"){options.shareData=iVillage.challenges.group[parseInt(challenge_id)].newChallengeBadgeShareInfo;}}}else{if(typeof iVillage.challenges.newChallengeBadgeImage!="undefined"){badgeImage=iVillage.challenges.newChallengeBadgeImage;}if(typeof iVillage.challenges.newChallengeBadgeCopy!="undefined"){badgeCopy=iVillage.challenges.newChallengeBadgeCopy;}if(typeof iVillage.challenges.newChallengeBadgeShareInfo!="undefined"){options.shareData=iVillage.challenges.newChallengeBadgeShareInfo;}}if(badgeImage==""){log("getBadgeData() > No Badge Image.");return $("");}var badgetitle=$("<div class='title'>AND...</div>");if(badgeCopy==""){badgeCopy="You just earned a badge!";}var badgeMessage=$("<div class='message'>"+badgeCopy+"</div>");var badgeImageObj=$("<img class='badge-image' src='"+badgeImage+"' />");var badgeAction="";if(data.is_registred&&data.is_loggedin){badgeAction=$("<div class='badge-action' id='badge-share-container'><a class='share'>"+options.shareCopy+"</a></div>");}else{if(data.is_registred&&!data.is_loggedin){badgeAction=$("<div class='badge-action'><a class='sso-sign-in'>"+options.signinCopy+"</a></div>");}else{badgeAction=$("<div class='badge-action'><a class='sso-register'>"+options.accountCreateCopy+"</a></div>");}}return $("<div class='badge-data'></div>").append(badgeImageObj,badgeMessage,badgeAction);},updateYoutubeIfame=function(dayValue){var findIframe=$(".pane-new-challenge-assignment #day-"+dayValue+" .youtube-code").find("iframe");if(findIframe.length>0){var src=findIframe.attr("src");findIframe.attr("src",src);}},updateAssignmentTitleAndBody=function(currDay){options.currAssignmentTitle=$(".pane-new-challenge-assignment .content .current .challenge-values .title").html();options.currAssignmentBody=$(".pane-new-challenge-assignment .content .current .challenge-values .body").html();$(".pane-new-challenge-active-assignment-description .content h4").html(options.currAssignmentTitle);$(".pane-new-challenge-active-assignment-description .content .assignment-body").html(options.currAssignmentBody);if($(".pane-new-challenge-assignment .content .current").hasClass("congratulation")){$(".pane-new-challenge-active-assignment-description .content .active-assignment-completion .element").hide();$(".pane-new-challenge-active-assignment-description .content .active-assignment-completion .title-completion").show();$(".pane-new-challenge-active-assignment-description .content .active-assignment-completion .title").hide();$(".pane-new-challenges-goal-tracker").hide();}else{$(".pane-new-challenge-active-assignment-description .content .active-assignment-completion .element").show();$(".pane-new-challenge-active-assignment-description .content .active-assignment-completion .title-completion").hide();$(".pane-new-challenge-active-assignment-description .content .active-assignment-completion .title").show();}$(".pane-new-challenge-active-assignment-description .content .completion-message").html("");},setCurrentDay=function(){options.current_day=$(".pane-new-challenge-assignment .content .current").attr("day");$(".pane-new-challenge-active-assignment-description .content .active-assignment-completion .element .day").html(options.current_day);},showAssignment=function(hash){var day=$(".pane-new-challenge-assignment .content .current").attr("day");$("#day-"+day).removeClass("current").addClass("next");$(".pane-new-challenge-assignment .next-assignment").removeClass("hide-content");var newDay=parseInt($(hash).attr("day"));$("#day-"+newDay).removeClass("previous").removeClass("next").addClass("current");$(".pane-new-challenge-assignment .right-arrow img.enable-img").attr("src","/public/images/panels/global/new-right-arrow.png").removeClass("disabled").addClass("enabled");$(".new-challenges-related-content-overlay").hide();$(".pane-new-challenges-goal-tracker").show();if(newDay==1){$(".pane-new-challenge-assignment .previous-assignment").addClass("hide-content");}if($("#day-"+newDay).hasClass("last")){$(".pane-new-challenge-assignment .next-assignment").addClass("hide-content");}if($(".pane-new-challenge-assignment .current").hasClass("congratulation")){$(".new-challenges-related-content-overlay").show();$(".pane-new-challenges-goal-tracker").hide();updateUserCongratulationMinutes();}updateYoutubeIfame(day);updateAssignmentTitleAndBody(newDay);setCurrentDay();updateCurrentAssignmentStatus();scrollPositionTop();updateUserDailyGoalMinutes();},showPreviousAssignment=function(){var day=$(".pane-new-challenge-assignment .content .current").attr("day");
$("#day-"+day).removeClass("current").addClass("next");$(".pane-new-challenge-assignment .next-assignment").removeClass("hide-content");var previous=parseInt(day)-1;$("#day-"+previous).removeClass("previous").removeClass("next").addClass("current");$(".pane-new-challenge-assignment .right-arrow img.enable-img").attr("src","/public/images/panels/global/new-right-arrow.png").removeClass("disabled").addClass("enabled");$(".new-challenges-related-content-overlay").hide();$(".pane-new-challenges-goal-tracker").show();if(previous==1){$(".pane-new-challenge-assignment .previous-assignment").addClass("hide-content");}updateYoutubeIfame(day);updateAssignmentTitleAndBody(previous);setCurrentDay();updateCurrentAssignmentStatus();scrollPositionTop();updateUserDailyGoalMinutes();},showNextAssignment=function(){var day=$(".pane-new-challenge-assignment .content .current").attr("day");$("#day-"+day).removeClass("current").addClass("next");$(".pane-new-challenge-assignment .previous-assignment").removeClass("hide-content");var next=parseInt(day)+1;$("#day-"+next).removeClass("next").removeClass("previous").addClass("current");$(".pane-new-challenge-assignment .left-arrow img.enable-img").attr("src","/public/images/panels/global/new-left-arrow.png").removeClass("disabled").addClass("enabled");if($("#day-"+next).hasClass("last")){$(".pane-new-challenge-assignment .next-assignment").addClass("hide-content");}if($(".pane-new-challenge-assignment .current").hasClass("congratulation")){$(".new-challenges-related-content-overlay").show();$(".pane-new-challenges-goal-tracker").hide();updateUserCongratulationMinutes();}updateYoutubeIfame(day);updateAssignmentTitleAndBody(next);setCurrentDay();updateCurrentAssignmentStatus();scrollPositionTop();updateUserDailyGoalMinutes();},updateUserCongratulationMinutes=function(){if(parseInt(iVillage.challenges.userMinutes)>0){$(".challenge-completion-message .message").html(iVillage.challenges.total_goal_mins_message);}else{$(".challenge-completion-message .message").html(iVillage.challenges.empty_goal_message);}$("#final_total_user_minutes").html(iVillage.challenges.totalUserMinutes);$("#final_total_challenge_minutes").html(iVillage.challenges.totalChallengeMinutes);},updateUserDailyGoalMinutes=function(){$(".valid-user-time-error").hide();$(".valid-goal-time-error").hide();if(typeof(iVillage.challenges.userDailyMinutes)!="undefined"){var assignmentId=parseInt($(".pane-new-challenge-assignment .content .current .challenge-values .assignment_id").html());log("assignment id: "+assignmentId);if(typeof(iVillage.challenges.userDailyMinutes[assignmentId])=="undefined"){if(options.type=="diet"){iVillage.challenges.userDailyMinutes[assignmentId]="enter lbs.";}else{iVillage.challenges.userDailyMinutes[assignmentId]="enter mins.";}}if(options.type=="diet"){}else{$("#enter-daily-minutes").val(iVillage.challenges.userDailyMinutes[assignmentId]);}}},scrollPositionTop=function(){$(".assignment-body").scrollTop(0);},stopBrightcoveVideo=function(){videoId=$(".pane-new-challenge-assignment .content .current .container").find("object").attr("id");if(videoId){brightcovePlayer=brightcove.getExperience(videoId);videoBrightcovePlayer=brightcovePlayer.getModule(APIModules.VIDEO_PLAYER);videoBrightcovePlayer.pause();}},newChallengeAssignmentSlider=function(){var targetId=document.location.hash;if($(targetId).length>0){showAssignment(targetId);}else{console.error("target id not found. not showing assignment",targetId);}$("div.left-arrow a").live("click",function(){stopBrightcoveVideo();showPreviousAssignment();});$("div.right-arrow a").live("click",function(){stopBrightcoveVideo();showNextAssignment();});},buildRelatedVideosPlaylist=function(){$("#challenges-video-playlist .carousel").jCarouselLite({btnNext:"#challenges-video-playlist .next",btnPrev:"#challenges-video-playlist .prev",visible:4,scroll:4});$("#challenges-video-playlist .playlist .loadVideo").click(function(e){e.preventDefault();var video_id=$(this).closest("li").attr("id");var video_title=$(this).closest("li").find("h4 a").html();loadBrightcoveVideo(video_id,video_title);});},loadBrightcoveVideo=function(video_id,video_title){var challengePlayer=brightcove.getExperience("challengesMyPlayer");var videoChallengePlayer=challengePlayer.getModule(APIModules.VIDEO_PLAYER);videoChallengePlayer.loadVideo(video_id,"referenceId");$(".pane-new-challenges-related-videos .video-content h4").html(video_title);},showRelatedContentPane=function(){if($(".pane-new-challenge-assignment .current").hasClass("first")){$(".pane-new-challenge-assignment .previous-assignment").addClass("hide-content");}if($(".pane-new-challenge-assignment .current").hasClass("last")){$(".pane-new-challenge-assignment .next-assignment").addClass("hide-content");}if($(".pane-new-challenge-assignment .current").hasClass("congratulation")){$(".new-challenges-related-content-overlay").show();}else{$(".new-challenges-related-content-overlay").hide();}},bindGoalButtons=function(signup_id){$("#goal-save-button").click(function(){log("Omniture name for save goal: ",$(this).attr("name"));fireOmnitureClick($(this).attr("name"));var userMinutes=$("#user-goal-minutes").val();var signup_id=iVillage.challenges.signup_id;saveUserMinutes(signup_id,userMinutes,"signup_page");});$("#goal-signin-button").click(function(){setCookieForChallenge("userGoalFormClick",1,1);$(".sso-sign-in").trigger("click");});$("#goal-register-button").click(function(){setCookieForChallenge("userGoalFormClick",1,1);$(".sso-register").trigger("click");});},saveUserMinutes=function(signup_id,userMinutes,pageName){goalData="user_minutes="+userMinutes+"&signup_id="+signup_id;$.ajax({type:"POST",url:"/ajax/set/goal/minutes",cache:false,data:goalData,success:function(result){var data=eval("("+result+")");if(pageName=="challenge_page"){$(".pane-new-challenges-goal-tracker .daily-goal .text").show();getUserTrackerProgress();hideUserGoalForm(data.message);$(".goal-bottom-container .challenge-progress").show();$(".goal-bottom-container .logouttext").hide();}else{if(pageName=="signup_page"){$(".sso-close").trigger("click");}}}});},bindChallengeGoalTracker=function(){getUserTrackerProgress();updateUserDailyGoalMinutes();$("#enter-daily-minutes").focus(function(){var txt=$("#enter-daily-minutes").val();if(txt=="enter mins."){$("#enter-daily-minutes").val("");}});$("#enter-daily-minutes").blur(function(){var txt=$("#enter-daily-minutes").val();if(txt==""){$("#enter-daily-minutes").val("enter mins.");}});$("#edit-daily-goal").click(function(e){e.preventDefault();if(!$(this).hasClass("sso-sign-in")){showUserGoalForm();fireOmnitureClick("Challenges:Edit Daily Goals:"+options.challenge_name);}});$(".set-goal-text").click(function(e){log("inside set goal text");e.preventDefault();showUserGoalForm();});$("#set-user-goal").click(function(e){e.preventDefault();fireOmnitureClick("Challenges:Save Daily Goals:"+options.challenge_name);var signup_id=iVillage.challenges.signup_id;var userMinutes=$("#set-daily-goal").val();if(isNaN(userMinutes)||userMinutes==""){$(".valid-goal-time-error").show();return false;}$(".valid-goal-time-error").hide();saveUserMinutes(signup_id,userMinutes,"challenge_page");});$("#save-daily-minutes").click(function(e){fireOmnitureClick("Challenges:Daily Activity Saves:"+options.challenge_name);if(!$(this).hasClass("sso-sign-in")){e.preventDefault();var dailyMinutes=$("#enter-daily-minutes").val();if(isNaN(dailyMinutes)||dailyMinutes==""){$(".valid-user-time-error").show();return false;}$(".valid-user-time-error").hide();saveDailyMinutes(dailyMinutes);}else{$("#edit-daily-goal").trigger("click");}});},bindChallengeDietTracker=function(){getUserTrackerProgress();updateUserDailyGoalMinutes();$("#enter-daily-weight").focus(function(){var txt=$("#enter-daily-weight").val();if(txt=="enter mins."||txt=="enter lbs."){$("#enter-daily-weight").val("");}});$("#enter-daily-weight").blur(function(){var txt=$("#enter-daily-weight").val();if(txt==""){if(options.type=="diet"){$("#enter-daily-weight").val("enter lbs.");}else{$("#enter-daily-weight").val("enter mins.");}}});$("#edit-daily-weight").click(function(e){e.preventDefault();if(!$(this).hasClass("sso-sign-in")){showUserGoalForm();fireOmnitureClick("Challenges:Edit Daily Weight:"+options.challenge_name);}});$(".set-diet-text").click(function(e){log("inside set goal text");e.preventDefault();showUserGoalForm();});$("#set-user-diet-goal").click(function(e){e.preventDefault();fireOmnitureClick("Challenges:Save Daily Weight:"+options.challenge_name);var signup_id=iVillage.challenges.signup_id;var userMinutes=$("#set-daily-diet-goal").val();if(isNaN(userMinutes)||userMinutes==""){$(".valid-goal-time-error").show();return false;}$(".valid-goal-time-error").hide();saveUserMinutes(signup_id,userMinutes,"challenge_page");});$("#save-daily-weight").click(function(e){fireOmnitureClick("Challenges:Daily Diet Activity Saves:"+options.challenge_name);if(!$(this).hasClass("sso-sign-in")){e.preventDefault();var dailyMinutes=$("#enter-daily-weight").val();if(isNaN(dailyMinutes)||dailyMinutes==""){$(".valid-user-time-error").show();return false;}$(".valid-user-time-error").hide();saveDailyMinutes(dailyMinutes);}else{$("#edit-daily-weight").trigger("click");}});},saveDailyMinutes=function(dailyMinutes){var assignment_id=parseInt($(".pane-new-challenge-assignment .content .current .challenge-values .assignment_id").html());goalData="daily_minutes="+dailyMinutes+"&signup_id="+iVillage.challenges.signup_id+"&assignment_id="+assignment_id+"&type="+options.type;$.ajax({type:"POST",url:"/ajax/save/daily/minutes",cache:false,data:goalData,success:function(result){if(typeof(iVillage.challenges.userDailyMinutes)!="undefined"){iVillage.challenges.userDailyMinutes[assignment_id]=dailyMinutes;}getUserTrackerProgress();}});},getUserTrackerProgress=function(){goalData="signup_id="+iVillage.challenges.signup_id+"&assignment_count="+iVillage.challenges.total_assignment+"&current_node="+iVillage.challenges.current_node+"&type="+options.type;
$.ajax({type:"POST",url:"/ajax/get/tracker/progress",cache:false,data:goalData,success:function(result){var data=eval("("+result+")");updateTrackerProgress(data.message);}});},updateTrackerProgress=function(data){iVillage.challenges.userMinutes=data.user_minutes;iVillage.challenges.totalUserMinutes=data.total_progress_user_minutes;iVillage.challenges.totalChallengeMinutes=data.total_challenge_minutes;$("#enter-daily-weight").val();if(data.total_challenge_minutes!=0){var userProgress=(data.total_user_minutes/data.total_challenge_minutes)*230;}else{var userProgress=0;}$("#progress-bar-status").css("width",userProgress+"px");$("#percentage-track").html(data.percentage_complete+"%");$(".user-track-message").html(data.progress_message);if($(".pane-new-challenge-assignment .current").hasClass("congratulation")&&options.type=="diet"){updateUserCongratulationMinutes();}},getUserGoalStatus=function(){goalData="signup_id="+iVillage.challenges.signup_id;$.ajax({type:"POST",url:"/ajax/get/goal/minutes",cache:false,data:goalData,success:function(result){var data=eval("("+result+")");if(data.message){$(".pane-new-challenges-goal-tracker .goal-container .daily-goal .loggedintext span").html(data.message);$(".pane-new-challenges-goal-tracker .goal-container .daily-goal .loggedintext").show();$(".pane-new-challenges-goal-tracker .goal-container .daily-goal .logouttext").hide();}else{$(".pane-new-challenges-goal-tracker .goal-container .daily-goal .loggedintext").hide();$(".pane-new-challenges-goal-tracker .goal-container .daily-goal .logouttext").show();}}});},hideUserGoalForm=function(minutes){$(".set-user-goal-form").hide();$(".pane-new-challenges-goal-tracker .goal-container .daily-goal .text").show();$(".pane-new-challenges-goal-tracker .goal-container .daily-goal .loggedintext").show();$("#edit-daily-goal").show();$(".pane-new-challenges-goal-tracker .goal-container .daily-goal .loggedintext span").html(minutes);},showUserGoalForm=function(){$(".set-user-goal-form").show();$(".pane-new-challenges-goal-tracker .goal-container .daily-goal .logouttext").hide();$(".pane-new-challenges-goal-tracker .goal-container .daily-goal .text").hide();$("#edit-daily-goal").hide();},fireOmnitureClick=function(name,prop){if(typeof prop=="undefined"){prop="s_iv.eVar13";}iv_doTracking(name,"",prop);},challengeTimeline=function(){var progressTimelineHTML=$("#progress-timeline-hidden").html();$("#progress-timeline-hidden").html("");$("#progress-timeline").html(progressTimelineHTML);$(".pane-new-challenges-progress-timeline .previous-timeline .left-timeline-arrow a").live("click",function(){previousTimelineSlides();});$("div.right-timeline-arrow a").live("click",function(){nextTimelineSlides();});$("a.show-main-slide").live("click",function(e){e.preventDefault();var dayToShow=$(this).attr("day");log("day show:"+dayToShow);showMainSlide(dayToShow);});$("li.show-timeline-slider").live("click",function(){var pageToShow=$(this).attr("page");showTimelineSlider(pageToShow);});if($(".pane-new-challenges-progress-timeline .timeline-slider .timeline-slider-box.lbox").hasClass("previous")){$(".pane-new-challenges-progress-timeline .timeline-slider .timeline-slider-box.lbox").removeClass("previous").addClass("current");}if($(".pane-new-challenges-progress-timeline .timeline-slider .timeline-slider-box.fbox.no-next-box").hasClass("previous")){$(".pane-new-challenges-progress-timeline .timeline-slider .timeline-slider-box.fbox").removeClass("previous").addClass("current");}var buttonToShow=$(".pane-new-challenges-progress-timeline .timeline-slider .timeline-slider-box.current").attr("box");if($("#box-"+buttonToShow-1).hasClass("previous")){$(".pane-new-challenges-progress-timeline .previous-timeline").show();}if($(".pane-new-challenges-progress-timeline .timeline-slider .timeline-slider-box.current").hasClass("lbox")){$(".pane-new-challenges-progress-timeline .next-timeline").hide();$(".pane-new-challenges-progress-timeline .previous-timeline").show();}if($(".pane-new-challenges-progress-timeline .timeline-slider .timeline-slider-box.current").hasClass("fbox")){$(".pane-new-challenges-progress-timeline .previous-timeline").hide();$(".pane-new-challenges-progress-timeline .next-timeline").show();}if($(".pane-new-challenges-progress-timeline .timeline-slider .timeline-slider-box.current").hasClass("mbox")){$(".pane-new-challenges-progress-timeline .next-timeline").show();}if($(".pane-new-challenges-progress-timeline .timeline-slider .timeline-slider-box.current.fbox").hasClass("no-next-box")){$(".pane-new-challenges-progress-timeline .next-timeline").hide();}$(".show-timeline-slider").removeClass("on").addClass("off");$(".show-timeline-slider.current").removeClass("off").addClass("on");$(".show-timeline-slider.next").hide();var noNextBox=$(".pane-new-challenges-progress-timeline .timeline-slider .timeline-slider-box.no-next").attr("box");$("#page-"+noNextBox).show();noNextTimeline();},showMainSlide=function(dayToShow){$("#day-"+dayToShow).removeClass("previous").removeClass("next").addClass("current");$("#day-"+dayToShow).nextAll("div.top-content").removeClass("previous").removeClass("current").addClass("next");$("#day-"+dayToShow).prevAll("div.top-content").removeClass("next").removeClass("current").addClass("previous");$(".pane-new-challenge-assignment .content .previous-assignment").removeClass("next").removeClass("hide-content");$(".pane-new-challenge-assignment .content .next-assignment").removeClass("next").removeClass("hide-content");if($("#day-"+dayToShow).hasClass("first")){$(".pane-new-challenge-assignment .content .previous-assignment").removeClass("next").addClass("hide-content");}if($("#day-"+dayToShow).hasClass("congratulation")){$(".pane-new-challenge-assignment .content .next-assignment").removeClass("next").addClass("hide-content");}$(".new-challenges-related-content-overlay").addClass("overlay-slide");updateAssignmentTitleAndBody(dayToShow);showRelatedContentPane();},showTimelineSlider=function(pageToShow){$("#box-"+pageToShow).removeClass("previous").removeClass("next").addClass("current");$("#box-"+pageToShow).nextAll("div.timeline-slider-box").removeClass("previous").removeClass("current").addClass("next");$("#box-"+pageToShow).prevAll("div.timeline-slider-box").removeClass("next").removeClass("current").addClass("previous");if($("#box-"+pageToShow).hasClass("mbox")){$(".pane-new-challenges-progress-timeline .next-timeline").show();$(".pane-new-challenges-progress-timeline .previous-timeline").show();}if($("#box-"+pageToShow).hasClass("fbox")){$(".pane-new-challenges-progress-timeline .previous-timeline").hide();$(".pane-new-challenges-progress-timeline .next-timeline").show();}if($("#box-"+pageToShow).hasClass("lbox")){$(".pane-new-challenges-progress-timeline .next-timeline").hide();$(".pane-new-challenges-progress-timeline .previous-timeline").show();}$(".show-timeline-slider").removeClass("on").addClass("off");if($("#box-"+pageToShow).hasClass("current")){$("#page-"+pageToShow).removeClass("off").addClass("on");}noNextTimeline();},nextTimelineSlides=function(){var box=$(".pane-new-challenges-progress-timeline .timeline-slider .timeline-slider-box.current").attr("box");$("#box-"+box).removeClass("current").addClass("previous");var next=parseInt(box)+1;var lnext=parseInt(next)+1;$("#box-"+next).removeClass("next").addClass("current");if($("#box-"+next).hasClass("lbox")){$(".pane-new-challenges-progress-timeline .next-timeline").hide();}if($("#box-"+next).hasClass("lbox")){$(".pane-new-challenges-progress-timeline .previous-timeline").show();}if($("#box-"+next).hasClass("mbox")){$(".pane-new-challenges-progress-timeline .previous-timeline").show();}if($("#box-"+next).hasClass("current")){$("#page-"+next).removeClass("off").addClass("on");}if($("#box-"+(parseInt(next)-1)).hasClass("previous")){$("#page-"+(parseInt(next)-1)).removeClass("on").addClass("off");}if($("#box-"+(parseInt(next)+1)).hasClass("next")){$("#page-"+(parseInt(next)+1)).removeClass("on").addClass("off");}noNextTimeline();},previousTimelineSlides=function(){var box=$(".pane-new-challenges-progress-timeline .timeline-slider .timeline-slider-box.current").attr("box");$("#box-"+box).removeClass("current").addClass("next");var prev=parseInt(box)-1;$("#box-"+prev).removeClass("previous").addClass("current");if($("#box-"+prev).hasClass("fbox")){$(".pane-new-challenges-progress-timeline .previous-timeline").hide();}if($("#box-"+prev).hasClass("mbox")){$(".pane-new-challenges-progress-timeline .next-timeline").show();}if($("#box-"+prev).hasClass("fbox")){$(".pane-new-challenges-progress-timeline .next-timeline").show();}if($("#box-"+prev).hasClass("current")){$("#page-"+prev).removeClass("off").addClass("on");}if($("#box-"+(parseInt(prev)-1)).hasClass("previous")){$("#page-"+(parseInt(prev)-1)).removeClass("on").addClass("off");}if($("#box-"+(parseInt(prev)+1)).hasClass("next")){$("#page-"+(parseInt(prev)+1)).removeClass("on").addClass("off");}},noNextTimeline=function(){if($(".pane-new-challenges-progress-timeline .timeline-slider .timeline-slider-box.current").hasClass("no-next")){$(".pane-new-challenges-progress-timeline .next-timeline").hide();}},log=function(str,vars){if(typeof iVillage!="undefined"&&typeof iVillage.showLogs!="undefined"&&iVillage.showLogs){if(window.console&&window.console.log){var date=new Date();var hours=date.getHours().toString();var mins=date.getMinutes().toString();var secs=date.getSeconds().toString();var msecs=date.getMilliseconds().toString();hours=(hours.length===1)?"0"+hours:hours;mins=(mins.length===1)?"0"+mins:mins;secs=(secs.length===1)?"0"+secs:secs;msecs+=(msecs.length===1)?"    ":(msecs.length===2)?" ":"";str=hours+":"+mins+":"+secs+":"+msecs+" > Challenges > "+str;if(vars){console.log(str,vars);}else{console.log(str);}}}};return{init:function(params){log("init() > Plugin Initiated");if(typeof params=="undefined"){params={};}options=$.extend(defaults,params);if($(".pane-new-challenges-goal-tracker").hasClass("pane-new-challenges-diet-tool")){options.type="diet";
}if(typeof iVillage.challenges.name!="undefined"){options.challenge_name=iVillage.challenges.name;}joinChallengeSignup();addShareFunctionality($(".new-challenge-thankyou-overlay .badge-data"));getChallengeAssignmentCompletionStatus();bindChallengeComplete();newChallengeAssignmentSlider();buildRelatedVideosPlaylist();showRelatedContentPane();if(options.type=="diet"){bindChallengeDietTracker();}else{bindChallengeGoalTracker();}challengeTimeline();}};})(this,jQuery);iVillage.runners.blocks.join_challenge_signup_form=function(){iVillage.challenges.init({});};iVillage.runners.blocks.google_conversion=function(){goog_snippet_vars=function(){var w=window;w.google_conversion_id=966220740;w.google_conversion_label="niC9COyXzgMQxLfdzAM";w.google_conversion_value=0;};goog_report_conversion=function(url){goog_snippet_vars();window.google_conversion_format="3";window.google_is_call=true;var opt=new Object();opt.onload_callback=function(){if(typeof(url)!="undefined"){window.location=url;}};var conv_handler=window.google_trackConversion;if(typeof(conv_handler)=="function"){conv_handler(opt);}};};iVillage.runners.blocks.panel_tabbed_pane=function(){$(".panel-tabbed-pane").tabs({event:"mouseover",fx:[null,{opacity:"show"}],rotate:2000}).addClass("ui-tabs-vertical ui-helper-clearfix").each(function(i,elem){elem=$(elem);if(elem.children(".rotate").length){elem.tabs("rotate",4000);}});$(".panel-tabbed-pane .ui-tabs-panel").not(".no-link").each(function(i,elem){var hero_link=$(this).find(".no-meta a").attr("href");$(this).hover(function(){$(this).css("cursor","pointer");},function(){$(this).css("cursor","default");}).click(function(e){if($(e.target).parent().attr("id")==$(this).attr("id")){e.preventDefault();window.location=hero_link;}});$(".tabbed-side-nav a[href='#"+$(this).attr("id")+"']").click(function(e){if(window.event){CS_onClickHandler(e);}window.location=hero_link;});});};iVillage.runners.blocks.tabbed_home_hero=function(){if(iVillage.msie6){$("#home-hero").tabs({event:"mouseover"});}else{$("#home-hero").tabs({event:"mouseover",fx:{opacity:"toggle",duration:"medium"}});}var tabSelectedGlobal=$.cookie("iv-global-tab");if(tabSelectedGlobal=="cooking"){$("#home-hero").tabs("select",2);$.cookie("iv-global-tab","video");}else{$("#home-hero").tabs("select",1);$.cookie("iv-global-tab","cooking");}};iVillage.runners.blocks.challenge_signup_form=function(){var errorArrow='<span class="error-arrow"></span>';var challengeForm=$("form#sage-challenge-form");challengeForm.find("input#email").bind("focus",function(){if($(this).val()=="Your Email Address"){$(this).val("");}});challengeForm.find("input#email").bind("blur",function(){if($(this).val()==""){$(this).val("Your Email Address");}});$("form#sage-challenge-form").validate({rules:{email:{required:true,email:true}},messages:{email:{required:errorArrow+"Please enter your email",email:errorArrow+"Please enter a valid email."}}});$("a.challenge-form-submit").live("click",challengeHandleFormSubmitter);$("form#sage-challenge-form").live("submit",challengeFormProcessor);function challengeHandleFormSubmitter(e){e.preventDefault();$(this).parents("form").submit();}function challengeFormProcessor(e){e.preventDefault();var form=$(e.target);var news=$(".pane-challenge-signup #newsletter_id").val();var start_date=$(".pane-challenge-signup #start_date").val();var submitData=form.serialize();submitData+="&newsletter[]="+news+"&newsletter_date["+news+"]="+start_date+"&is_challenge=true";$.ajax({type:"POST",url:"/ajax/newsletter/signup",cache:false,data:submitData,success:function(data){if(!data.status){challenge_thankyou_message=data.error;}challenge_thankyou_style="<style>.challenge-thankyou-overlay{background-color:#fff;width:488px;height:175px;margin:auto;text-align:center;}.challenge-thankyou-overlay .thankyou-text{font:bold italic 16px Georgia;padding:20px 10px;}.challenge-thankyou-overlay .content{font:13px Arial;padding:0px 25px;}.challenge-thankyou-overlay .ok-btn{text-align:center;padding:0px 25px;}</style>";$.fn.ssoColorbox({title:"THANK YOU!",html:challenge_thankyou_style+challenge_thankyou_header+challenge_thankyou_message+challenge_thankyou_footer,scrolling:false,overlayClose:false});if(!data.status){$(".thankyou-title").hide();$(".thankyou-message").css("text-align","center");}}});}};iVillage.runners.blocks.challenge_assignment_slider=function(){$("div.left-arrow img.enabled").live("click",function(){var day=$(".pane-assignment-slider .content .current").attr("day");$("#day-"+day).removeClass("current").addClass("next");$(".pane-assignment-slider .bottom-content .next-assignment").removeClass("hide-content");var previous=parseInt(day)-1;$("#day-"+previous).removeClass("previous").removeClass("next").addClass("current");$(".pane-assignment-slider .bottom-content .right-arrow img.enable-img").attr("src","/public/images/panels/global/right-arrow-on.jpg").removeClass("disabled").addClass("enabled");var pre_day=previous-1;var pre_title=$("#day-"+pre_day+" .top-content-container h2").html();var curr_title=$("#day-"+day+" .top-content-container h2").html();$(".pane-assignment-slider .bottom-content .previous-content .desc").html(pre_title);$(".pane-assignment-slider .bottom-content .next-content .desc").html(curr_title);if(previous==1){$(".pane-assignment-slider .bottom-content .left-arrow img.enable-img").attr("src","/public/images/panels/global/left-arrow-off.jpg").removeClass("enabled").addClass("disabled");$(".pane-assignment-slider .bottom-content .previous-assignment").addClass("hide-content");}});$("div.right-arrow img.enabled").live("click",function(){var day=$(".pane-assignment-slider .content .current").attr("day");$("#day-"+day).removeClass("current").addClass("next");$(".pane-assignment-slider .bottom-content .previous-assignment").removeClass("hide-content");var next=parseInt(day)+1;$("#day-"+next).removeClass("next").removeClass("previous").addClass("current");$(".pane-assignment-slider .bottom-content .left-arrow img.enable-img").attr("src","/public/images/panels/global/left-arrow-on.jpg").removeClass("disabled").addClass("enabled");var post_title=next+1;var next_title=$("#day-"+post_title+" .top-content-container h2").html();var curr_title=$("#day-"+day+" .top-content-container h2").html();console.log(next);$(".pane-assignment-slider .bottom-content .previous-content .desc").html(curr_title);$(".pane-assignment-slider .bottom-content .next-content .desc").html(next_title);if($("#day-"+next).hasClass("last")){$(".pane-assignment-slider .bottom-content .right-arrow img.enable-img").attr("src","/public/images/panels/global/right-arrow-off.jpg").removeClass("enabled").addClass("disabled");if($(".pane-assignment-slider .bottom-content .next-assignment").hasClass("no-next")){$(".pane-assignment-slider .bottom-content .next-assignment").addClass("hide-content");}}});};(function($){iVillage.runners.blocks.quizzes=function(){var question_num;var allow_skipping;var QUIZ={start:function(){$("#qnum").val(1);$("#score").val(0);$("#type").val("question");$("#quiz_form").submit();},see_answer:function(){$("#type").val("answer");$("#quiz_form").submit();},see_current_question:function(){$("#type").val("question");$("#quiz_form").submit();},see_next_question:function(){question_num=parseInt($("#qnum").val());$("#qnum").val(question_num+1);$("#type").val("question");$("#quiz_form").submit();},see_result:function(){var random_number=rand(100000);$("#type").val("result");$("#quiz_form").submit();},can_continue:function(){allow_skipping=($("#allow_skipping").val()==true);if(!allow_skipping&&$("#type").val()=="question"){if($("button.boolean").length){return($("#answer").val()!=""&&($("#answer").val()==1||$("#answer").val()==0));}var checked=$("input:checked").length;return(checked>0||($("#answer").val()!=undefined&&$("#answer").val()!=false));}else{return true;}},show_error_message:function(){if($(".error-message").length==0){var error_message=$('<div class="error-message" style="display:none">Please make a selection above.</div>');$("button.next").before(error_message);}$(".error-message").slideDown("fast");}};function rand(n){return(Math.floor(Math.random()*n+1));}$("button.start-quiz").bind("click",function(e){QUIZ.start();});$("button.answer").bind("click",function(e){e.preventDefault();if(QUIZ.can_continue()){QUIZ.see_answer();}else{QUIZ.show_error_message();}});$("button.next-question").bind("click",function(e){e.preventDefault();if(QUIZ.can_continue()){QUIZ.see_next_question();}else{QUIZ.show_error_message();}});$("button.result").bind("click",function(e){e.preventDefault();if(QUIZ.can_continue()){QUIZ.see_result();}else{QUIZ.show_error_message();}});$("button.yes").bind("click",function(e){e.preventDefault();$(this).addClass("yes-active");$("button.no").removeClass("no-active");$("#answer").val(1);});$("button.no").bind("click",function(e){e.preventDefault();$(this).addClass("no-active");$("button.yes").removeClass("yes-active");$("#answer").val(0);});$("button.disabled").removeAttr("disabled");$("button.disabled").removeClass("disabled");};})(jQuery);if(typeof(selected_video_tab)=="undefined"){selected_video_tab=0;}(function($){iVillage.runners.blocks.videos=function(){$("#tabs").tabs({cache:true,selected:selected_video_tab});};$("li.featured-video").find("a.featured-video-link").live("click",function(e){e.preventDefault();var id=$(this).parent("li").attr("id");playClip(id);return false;});})(jQuery);function playClip(id){updateVideoInfo(id);var player=Outlet.getOutletExtension("embeddedPlayer");player.playVideo(id);}(function($){iVillage.runners.blocks.article=function(){var $mod_you_would_like=$(".mod_you_would_like");$(".article-content .copy").dropCap();$mod_you_would_like.show();$(".article-content .copy p:first").find("img:first").css("float","right");if($(".article-content .copy p").length>1){$mod_you_would_like.insertAfter($(".article-content:nth-child(1) .copy:nth-child(1) p:nth-child(2)"));}else{if($(".article-content .copy p:first br").length>0){$mod_you_would_like.insertAfter($(".article-content:nth-child(1) .copy:nth-child(1) p:first br:nth-child(2)"));}}};})(jQuery);function refresh_article_ads(){$(this).refresh_ads_onclick({way:"click"});}(function($){iVillage.runners.blocks.games=function(){var isAutoRefreshRequire="0";var allowedAdTypes=["iframe_ad_top_banner","iframe_ad_flex_ad_first","iframe_ad_flex_ad_second","iframe_ad_box_ad_first","iframe_ad_box_ad_second","iframe_ad_bottom_banner"];for(var adCount=0;adCount<allowedAdTypes.length;adCount++){if($("iframe#"+allowedAdTypes[adCount]).length!=0){isAutoRefreshRequire="1";break;}}if(isAutoRefreshRequire=="1"){adTimer=window.setInterval(function(){$(this).refresh_ads_onclick({way:"auto"});iv_setBusinessProps();},30000);var timeout=60000*60;$(document).bind("idle.idleTimer",function(){clearInterval(adTimer);});$(document).bind("active.idleTimer",function(){adTimer=window.setInterval(function(){$(this).refresh_ads_onclick({way:"auto"});},30000);});$.idleTimer(timeout);}if($.fn.slideshow){$(".slideshow #slideshow").slideshow({debug:"false"});$("#list-view").removeClass("hide");}};})(jQuery);function refresh_game_ads(){$(this).refresh_ads_onclick({way:"click"});}(function($){iVillage.runners.blocks.sweepstakes_runner=function(){if(jQuery()["sweepstakes"]){$(".sweeps-container").sweepstakes({});}};})(jQuery);$(document).ready(function(){iVillage.runners.blocks.height_equalize=function(){var defheight=2070;var leftHeight=$(".layout-flexible-holidaily-new .region-left").height();var rightHeight=$(".layout-flexible-holidaily-new .region-right").height();if(leftHeight>defheight&&leftHeight>rightHeight){$(".layout-flexible-holidaily-new .region-right").height(leftHeight);}else{if(rightHeight>defheight&&rightHeight>leftHeight){$(".layout-flexible-holidaily-new .region-left").height(rightHeight);}else{$(".layout-flexible-holidaily-new .region-left").height(defheight);$(".layout-flexible-holidaily-new .region-right").height(defheight);}}};});