
/*jquery:25424996.1*/

/*! jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement)cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close();d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck)}cj[a]=e}return cj[a]}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function cs(){cq=b}function cr(){setTimeout(cs,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&f.type(b)==="object")for(var e in b)b_(a+"["+e+"]",b[e],c,d);else d(a,b)}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g));return l}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border")for(;e<g;e+=2)c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0;return d+"px"}d=by(a,b);if(d<0||d==null)d=a.style[b];if(bt.test(d))return d;d=parseFloat(d)||0;if(c)for(;e<g;e+=2)d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0);return d+"px"}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c,i[c][d])}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c)return null;var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d)e.access(a,c,l,d[l],1,h,f);g=1}else if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c)for(;l<m;l++)c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i);g=1}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g)},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++)if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&p.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return!!i}};return p};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent)for(n in{submit:1,change:1,focusin:1})m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o;j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];!u||(m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div>"+"<table "+n+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++)h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]));f._data(j,"parsedAttrs",!0)}}return m}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!";return f.access(this,function(c){if(c===b){m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!="string"&&(c=a,a="fx",d--);if(arguments.length<d)return f.queue(this[0],a);return c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise(c)}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++)e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(
a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this)if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++)s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s);r.length&&j.push({elem:m,matches:r})}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace))c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}i.postDispatch&&i.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f
.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l)continue;if(typeof l=="string")if(!_.test(l))l=b.createTextNode(l);else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--)p=p.lastChild;if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i)f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}var u;if(!f.support.appendChecked)if(l[0]&&typeof (u=l.length)=="number")for(i=0;i<u;i++)bn(l[i]);else bn(l);l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return!a.type||be.test(a.type)};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type)))e.push(h.parentNode?h.parentNode.removeChild(h):h);else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(by)return by(a,c)},swap:function(a,b,c){var d={},e,f;for(f in b)d[f]=a.style[f],a.style[f]=b[f];e=c.call(a);for(f in b)a.style[f]=d[f];return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})},set:function(a,b){return bs.test(b)?b+"px":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+bx[d]+b]=e[d]||e[d-2]||e[0];return f}}});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR)return bR.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")}}):{name:b.name,value:c.replace(bE,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cb(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=bZ(bT,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)b_(g,a[g],c,e);return d.join("&").replace(bC,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg)cg[a](0,1)}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(ct("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(ct("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(ct("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand"in k){l=k.expand(a[g]),delete a[g];for(i in l)i in a||(a[i]=l[i])}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a))return d?{top:d.top,left:d.left}:{top:0,left:0};var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed")break;d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position==="relative"||j.position==="static")k+=h.offsetTop,l+=h.offsetLeft;f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l}},f.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)});var c=this[0],d=c&&c.ownerDocument;if(!d)return null;if(c===d.body)return f.offset.bodyOffset(c);return cv(c,d,d.documentElement)},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b)return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e];h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e])return i[d];return Math.max(a.body[e],i[e],a.body[g],i[g])}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k}f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);
/*jquery.json:25425006.1*/

(function($){var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};$.toJSON=typeof JSON==='object'&&JSON.stringify?JSON.stringify:function(o){if(o===null){return'null';}
var type=typeof o;if(type==='undefined'){return undefined;}
if(type==='number'||type==='boolean'){return''+o;}
if(type==='string'){return $.quoteString(o);}
if(type==='object'){if(typeof o.toJSON==='function'){return $.toJSON(o.toJSON());}
if(o.constructor===Date){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month='0'+month;}
if(day<10){day='0'+day;}
if(hours<10){hours='0'+hours;}
if(minutes<10){minutes='0'+minutes;}
if(seconds<10){seconds='0'+seconds;}
if(milli<100){milli='0'+milli;}
if(milli<10){milli='0'+milli;}
return'"'+year+'-'+month+'-'+day+'T'+
hours+':'+minutes+':'+seconds+'.'+milli+'Z"';}
if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||'null');}
return'['+ret.join(',')+']';}
var name,val,pairs=[];for(var k in o){type=typeof k;if(type==='number'){name='"'+k+'"';}else if(type==='string'){name=$.quoteString(k);}else{continue;}
type=typeof o[k];if(type==='function'||type==='undefined'){continue;}
val=$.toJSON(o[k]);pairs.push(name+':'+val);}
return'{'+pairs.join(',')+'}';}};$.evalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(src){return eval('('+src+')');};$.secureEvalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(src){var filtered=src.replace(/\\["\\\/bfnrtu]/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,'');if(/^[\],:{}\s]*$/.test(filtered)){return eval('('+src+')');}else{throw new SyntaxError('Error parsing JSON, source is not valid.');}};$.quoteString=function(string){if(string.match(escapeable)){return'"'+string.replace(escapeable,function(a){var c=meta[a];if(typeof c==='string'){return c;}
c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'"';}
return'"'+string+'"';};})(jQuery);
/*jquery.cookie:25424998.1*/

/**
 * jQuery Cookie plugin
 *
 * Copyright (c) 2010 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
jQuery.cookie = function (key, value, options) {

    // key and at least value given, set cookie...
    if (arguments.length > 1 && String(value) !== "[object Object]") {
        options = jQuery.extend({}, options);

        if (value === null || value === undefined) {
            options.expires = -1;
        }

        if (typeof options.expires === 'number') {
            var days = options.expires, t = options.expires = new Date();
            t.setDate(t.getDate() + days);
        }

        value = String(value);

        return (document.cookie = [
            encodeURIComponent(key), '=',
            options.raw ? value : encodeURIComponent(value),
            options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
            options.path ? '; path=' + options.path : '',
            options.domain ? '; domain=' + options.domain : '',
            options.secure ? '; secure' : ''
        ].join(''));
    }

    // key and possibly options given, get cookie...
    options = value || {};
    var result, decode = options.raw ? function (s) { return s; } : decodeURIComponent;
    return (result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie)) ? decode(result[1]) : null;
};

/*jquery.bildLightbox:25425004.3*/

(function($) {


    var supportsFixed = supportsPositionFixed(),
    isIOS = /(iPhone|iPod|iPad)/i.test(navigator.userAgent),
    isAndroid = /android/i.test(navigator.userAgent),
    android3plus = /android [3-9]/i.test(navigator.userAgent);
        
    /**
    * supportsPositionFixed - ob wir position:fixed oder :absolute verwenden sollten
    * @private
    * @return {Bool} 
    */ 
    function supportsPositionFixed(){
       
       if( isAndroid && !android3plus ) {
           
           return false;
           
       }
       
        /*if (navigator.userAgent.toLowerCase().match(/ipad/i) != null) {
            return false;
        }
        if ((navigator.userAgent.toLowerCase().match(/iphone/i) || navigator.userAgent.toLowerCase().match(/ipod/i)) != null) {
            return false;
        }   */   
        return true;    
    };
    
    /**
    * insertHTML - fakes an innerHTML with replaceWith so script tags are executed
    * @private
    * @param $el {$object} where does the HTML go
    * @param content {string} HTML to be injected
    */ 
	function insertHTML($el,content){
		// html()/innerHTML will not execute scripts
		if (content.indexOf('</script>') != -1) {
		    $el.html('<div id="lightbox-replaceme-div"/>');
		    de.lib.replaceWith($('#lightbox-replaceme-div'),content);
		} else {
		    $el.get(0).innerHTML = content;   
		}     
	};
    /**
    * getInnerDimensions - ob wir position:fixed oder :absolute verwenden sollten
    * @private
    * @return {Object} h:innerHeight, w:innerWidth 
    */ 
    function getInnerDimensions(){
               
       if (isIOS) {
             return {
                h : window.innerHeight,
                w : window.innerWidth
             }               
        }
        
        return {
            h :  (typeof document.documentElement != 'undefined' && typeof document.documentElement.clientHeight != 'undefined' && document.documentElement.clientHeight != 0) ? document.documentElement.clientHeight + ($(window).scrollTop()*2) : window.innerHeight,
            w : (typeof document.documentElement != 'undefined' && typeof document.documentElement.clientWidth != 'undefined' && document.documentElement.clientWidth != 0) ? document.documentElement.clientWidth : window.innerWidth
        }
    };

    /**
    * getContentPosition - berechnet den Mittelpunkt
    * @private
    * @param w {Num} Breite des Overlayinhaltcontainers
    * @param h {Num} Hoehe des Overlayinhaltcontainers
    * @return {object} 
    */      
    function getContentPosition(w,h){
        var wh, ww;
        
        if(isIOS || !supportsFixed) {
            var dimensions = getInnerDimensions();
            wh =  dimensions.h;
            ww = dimensions.w;
        } else if (supportsPositionFixed()) {
            wh = $(window).height();
            ww = $(window).width();

        } 
             
        return {        
            'y' : (wh - h) >> 1,
            'x' : (ww - w) >> 1
        }
    };
    /**
    * setContentPosition - gewaeherleistet, dass das Overlay im Mittelpunkt steht
    * @private
    * @param $el {$object} jQuery object
    */   
    function setContentPosition($el) {
        
        var pos = getContentPosition($el.outerWidth(),$el.outerHeight());
        
        $el.css({
            'left':pos.x,
            'top':pos.y
            });
    };


    
    /** 
    * bildLightbox erzeugt eine dynamische Lighbox. Der HTML-Code wird bei Schliessen vernichtet
    * @function
    * @name bildLightbox
    * @memberOf $.fn
    * @param  {object} options Parameter, um bildLightbox anzupassen
    * @param  {function} callback Funktion abzufeueren, nachdem das Overlay eingeblendet ist
    * @returns {obj[]} JQuery Objekt
    * @namespace Plugin bildLightbox
    * @author <a href="mailto:rdodd@bild.de">Ramon Dodd</a>
    */
    $.bildLightbox = function(element, options) {

        var defaults = {
            'closeOnEsc' : true,                    // Sollte ein Klick auf Esc das Overlay zumachen?
            'closeOnBodyClick' : true,
            'onClose' : function(){},
            'wrapperId'     : '',
            'wrapperClass' : 'overlayWrapper',      // Overlayklasse
            'contentClass' : 'innerBox',
            'loadingClass' : 'loading',              // Loadingsklasse
            'overlay' : true,                       //ob der Hintergrund da ist
            'showCloseButton' : true      // close button anzeigen?  
            //'overlayColor' : ''
            // X- und Y-Position (in Pixels), sonst wird sie in den Mittelpunkt gelegt
            //'left':'0px',
            //'top':'0px',
            // width : 640px,
            // height :480px,
            // Inhaltoptionen 
            //'ajax' : 'http://ajaxpath.overlayContentHTML/html/php',
            //'iframe' : 'http://iframepath.com/html/php',
            //'content' : 'html',
            //'callback' : function(){} // Scope = Lightbox und NICHT das Element, das die Funktion abfeuert
        };
        
        // this = plugin object
        var plugin = this;
        plugin.settings = {};

        // element = element to which plugin in attached
        var $element = $(element),
        element = element,
        overlay,
        $html = $('html'),
        $window = $(window),
        $doc = $(document),
        $body = $('body'),
        $overlayWrapper,
        $overlayContent,
        $close,
        $lightbox,
        isOpen = false,      
        overlayHTML = '<div id="bild-overlay" class="bild-overlay" style="height: 100%;left: 0;top: 0;position: fixed;width: 100%;opacity:0"></div>',
        overlayContentHTML = [],
        onWindowResize;
             
        // automatically triggered
        plugin.init = function() {
            plugin.settings = $.extend({}, defaults, options);

            overlayContentHTML.push('<div class="');
            overlayContentHTML.push(plugin.settings.contentClass);
			overlayContentHTML.push(' ');
			overlayContentHTML.push(plugin.settings.loadingClass);
			overlayContentHTML.push('"></div>');
			if (plugin.settings.showCloseButton) overlayContentHTML.push('<a href="#" class="close"></a>');
			
			
            // Overlay einblenden
            plugin.open();
            
            // html()/innerHTML will not execute scripts
            insertHTML($overlayContent, plugin.settings.content);    
            // set content width based on min-width or max-width
			if (plugin.settings.content.match(/\<\w+.*?class=\"(.*)\".*?\>/)) {
				var selector = "." + RegExp.$1.replace(/ /g, ".");
				var firstTag = jQuery(selector);
				if (firstTag.length) {
					var minWidth = firstTag.eq(0).css("min-width");
					if (typeof minWidth !== 'undefined' && minWidth != "0px") {
						firstTag.eq(0).width(minWidth);
					}
					else {
						var maxWidth = firstTag.eq(0).css("max-width");
						if (typeof maxWidth !== 'undefined' && maxWidth != "0px") {
							firstTag.eq(0).width(maxWidth);
						}
						
					}
				}
			}            
            
            // callback
            finish(); 
        };


        /**
        * open - Position berechen, Ereignisse anbinden, Overlay anzeigen
        * @function
        * @name open
        * @memberOf $.fn.bildLightbox.Overlay
        * @returns {object} this
        */  
        plugin.open = function(){

            if (isOpen) return false;
            // wir wollen direkten Zugriff aufs aktuelle Element
            // this.$lightbox ermoeglicht das
            $lightbox = $('<div id="'+plugin.settings.wrapperId+'" class="'+plugin.settings.wrapperClass+'" style="display:none;position:fixed;"/>');
            
            $content = $(overlayContentHTML.join(''));
            
            $lightbox.append($content);

            // eingebaut aber versteckt
            $body.append($lightbox);   
            
            // ob die Overlay-Ebene erforderlich ist
            plugin.settings.overlay && $body.append(overlayHTML);  

            var $overlay = $('#bild-overlay');
            if (plugin.settings.overlayColor) {
                $overlay.css({
                    'opacity' : 0.5,
                    'background-color' : plugin.settings.overlayColor
                });
            } 
            
            //neue Elemente sammeln
            $overlayContent = $lightbox.find('div.'+plugin.settings.contentClass);
			
			// your lightbox needs a content class!
			if ($overlayContent.length === 0) return false;
			
            if (plugin.settings.showCloseButton) $close = $lightbox.find('a.close');
        
            if (plugin.settings.closeOnBodyClick) {
                // shaded bg onClick schliesst overlay
                $overlay.click(function(e){
                    if (e.target.id === 'bild-overlay') 
                        plugin.close();
                });
            }
            
            //Closebutton
			if (plugin.settings.showCloseButton) {
				$close.click(function(e){
					e.preventDefault();
					plugin.close();
				});
			}
        
            // Tastatur::escape
            if (plugin.settings.closeOnEsc) { 
                $doc.bind('keydown', function(e) {
                    if (e.keyCode == 27) { 
                        plugin.close();   
                    }
                });         
            }                

            // mobile safari erkennt kein Position:fixed, wegen dem Viewport
            if (!supportsFixed) {
                $lightbox.css('position','absolute');          

                var dimensions = getInnerDimensions();
                $('#bild-overlay').css({
                    'position':'absolute',
                     'width' : dimensions.w,
                     'height' : dimensions.h
                });
                
            }

            isOpen = true;
        };

        /**
        * close - Ereignisse entbinden, Overlay loeschen
        * @function
        * @name close
        * @memberOf $.fn.bildLightbox.Overlay
        * @returns {object} this
        */
        plugin.close = function(){
            isOpen = false; 
            $('#bild-overlay').remove();
            
            // unbind the keyboard / clicking actions
            if (onWindowResize) $window.unbind('resize'); 
            $doc.unbind('keydown'); 
                        
			plugin.settings.onClose.apply(element);
            plugin.destroy();    
        };

        /*reset position manually*/
        plugin.setPos = function(){
            setContentPosition($lightbox);
        };

        /*get middle point position*/
        plugin.getPos = function(w,h){
            return getContentPosition(w,h);
        };


        /*destroy*/
        plugin.destroy = function(){
            $element.removeData('bildLightbox');
            $lightbox.fadeOut(200, function(){
                $lightbox.remove();
                $.publish("domNodeRemoved");
            });
        };


		   /**
            * finish - Nachdem der Overlayinhalt reingeladen worden ist
            * @function
            * @name finish
            * @memberOf $.fn.bildLightbox.Overlay
            */       
            function finish(){
                
                repositionAfterImgLoad();

                if (plugin.settings.width && plugin.settings.height) {
                    $lightbox.css({
                        'width':plugin.settings.width,
                        'height':plugin.settings.height
                    }); 
                }   
            
                // Default: in mitten der Seite
                if (plugin.settings.left && plugin.settings.top) {
                    $lightbox.css({
                        'left':plugin.settings.left,
                        'top':plugin.settings.top,
						'position':'absolute'
                    });
                } else {
                    // Position setzen
                    setContentPosition($lightbox);
                    // Position beim window resize behalten
                    $window.bind('resize', function(e) {
                        setContentPosition($lightbox);
                    });         
                    onWindowResize = true;
                }
                
                // die uebergegebene Funktion aufrufen  

                $overlayContent.removeClass(plugin.settings.loadingClass); 
                // die LB focus geben
                $overlayContent.attr('tabIndex',-1).focus();


                // show the lightbox
                // callback should done and ready 
                $lightbox.show();


                 // let's give the callback the scope of the original object plus lightbox param
                if (typeof plugin.settings.callback === 'function') plugin.settings.callback.apply(element);
 
            };
            
            
            function repositionAfterImgLoad(){
                
                $lightbox.find('img').on('load', function(){
                    setContentPosition($lightbox);
                });  
                
            };

        //init plugin
        plugin.init();

    };

    $.fn.bildLightbox = function(options) {

        return this.each(function() {
            if (undefined == $(this).data('bildLightbox')) {
                var plugin = new $.bildLightbox(this, options);
                $(this).data('bildLightbox', plugin);
            }
        });
    };
    
    $.fn.closeBildLightbox = function(options) {

        return this.each(function() {
            if (undefined != $(this).data('bildLightbox')) {
                $(this).data('bildLightbox').close();
            }
        });
    };
        
})(jQuery);





/*jquery.bildProgressBar:25425002.1*/


(function($) {





    /**
     * Works out the percentage value and return a number
     * @function
     * @name getPercent
     * @param {Int} current
     * @param {Int} total
     * @returns {Int} 
     * @private
     */ 
    function getPercent(current,total){
        return ~~(100 * parseInt(current) / parseInt(total));
    };
	
	
	
    $.bildProgressBar = function(element, options) {

        var defaults = {
			'animateStep' : 750,
			// when 100% is reached
			'complete' : function(){},
			// after the plugin is initiated
			'callback' : function(){}
        };
        
		// this = plugin object
        var plugin = this;
        plugin.settings = {};


         plugin.$progressBarInner = $('<span style="width:0px"></span>');
         /*
         //one day we'll have html5...
         this.$progressBarHTML5 = $('<progress value="0" max="100"></progress>');
         */
         plugin.$percentText = $('<em>0%</em>');

        // element = element to which plugin in attached
        plugin.$element = $(element);
        plugin.element = element;
		plugin.elemWidth = plugin.$element.width();
			 
        // automatically triggered
        plugin.init = function() {
            plugin.settings = $.extend({}, defaults, options);
			plugin.$element.append(plugin.$progressBarInner).after(plugin.$percentText);
			plugin.settings.callback.call(plugin.element);
        };


        /*update*/
        plugin.update = function(current,total){
            var percent = getPercent(current,total),
            newWidth = ~~(percent*plugin.elemWidth)/100;	
			plugin.grow(newWidth,percent);
        };

        /*complete - forces complete*/
        plugin.complete = function(){ 
            plugin.grow(plugin.elemWidth,100);
        };

        /*grow*/
        plugin.grow = function(newWidth,percent) {
			// if we've reached 100%
			if (percent === 100 || plugin.$progressBarInner.width() >= plugin.elemWidth) {
				plugin.settings.complete.call(element);
				plugin.destroy();
			}
			plugin.$progressBarInner.animate({
			'width' : newWidth
			}, plugin.settings.animateStep, function() {
			     
			});
	        plugin.$percentText.text(percent+'%');
        };

        /*destroy*/
		plugin.destroy = function(){
            plugin.$progressBarInner.width(0);
			plugin.$percentText.remove();
			plugin.$element.removeData('bildProgressBar');
			plugin.$element.remove();
		};

        //init plugin
        plugin.init();

    };

    $.fn.bildProgressBar = function(options) {

        return this.each(function() {
            if (undefined == $(this).data('bildProgressBar')) {
                var plugin = new $.bildProgressBar(this, options);
                $(this).data('bildProgressBar', plugin);
            }
        });

    }
})(jQuery);





/*jquery.draggable:15400986.22*/

/*!
 * jQuery UI 1.8.2
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI
 */
(function(c){c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:"1.8.2",plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,d[e]])}},call:function(a,b,d){if((b=a.plugins[b])&&a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if(c(a).css("overflow")==
"hidden")return false;b=b&&b=="left"?"scrollLeft":"scrollTop";var d=false;if(a[b]>0)return true;a[b]=1;d=a[b]>0;a[b]=0;return d},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,b,d,e,f,g){return c.ui.isOverAxis(a,d,f)&&c.ui.isOverAxis(b,e,g)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,
NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({_focus:c.fn.focus,focus:function(a,b){return typeof a==="number"?this.each(function(){var d=this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect",
"none")},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",
1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==undefined)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");if(b=="absolute"||b=="relative"||b=="fixed"){b=parseInt(a.css("zIndex"));if(!isNaN(b)&&b!=0)return b}a=a.parent()}}return 0}});c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){var b=a.nodeName.toLowerCase(),d=c.attr(a,"tabindex");return(/input|select|textarea|button|object/.test(b)?
!a.disabled:"a"==b||"area"==b?a.href||!isNaN(d):!isNaN(d))&&!c(a)["area"==b?"parents":"closest"](":hidden").length},tabbable:function(a){var b=c.attr(a,"tabindex");return(isNaN(b)||b>=0)&&c(a).is(":focusable")}})}})(jQuery);
;/*!
 * jQuery UI Widget 1.8.2
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b){var j=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add(this).each(function(){b(this).triggerHandler("remove")});return j.call(b(this),a,c)})};b.widget=function(a,c,d){var e=a.split(".")[0],f;a=a.split(".")[1];f=e+"-"+a;if(!d){d=c;c=b.Widget}b.expr[":"][f]=function(h){return!!b.data(h,a)};b[e]=b[e]||{};b[e][a]=function(h,g){arguments.length&&this._createWidget(h,g)};c=new c;c.options=b.extend({},c.options);b[e][a].prototype=
b.extend(true,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(a,c){b.fn[a]=function(d){var e=typeof d==="string",f=Array.prototype.slice.call(arguments,1),h=this;d=!e&&f.length?b.extend.apply(null,[true,d].concat(f)):d;if(e&&d.substring(0,1)==="_")return h;e?this.each(function(){var g=b.data(this,a),i=g&&b.isFunction(g[d])?g[d].apply(g,f):g;if(i!==g&&i!==undefined){h=i;return false}}):this.each(function(){var g=
b.data(this,a);if(g){d&&g.option(d);g._init()}else b.data(this,a,new c(d,this))});return h}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){this.element=b(c).data(this.widgetName,this);this.options=b.extend(true,{},this.options,b.metadata&&b.metadata.get(c)[this.widgetName],a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();
this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(a,c){var d=a,e=this;if(arguments.length===0)return b.extend({},e.options);if(typeof a==="string"){if(c===undefined)return this.options[a];d={};d[a]=c}b.each(d,function(f,
h){e._setOption(f,h)});return e},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,d){var e=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=
b.event.props.length;for(var f;a;){f=b.event.props[--a];c[f]=c.originalEvent[f]}}this.element.trigger(c,d);return!(b.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);
;/*!
 * jQuery UI Mouse 1.8.2
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 * jquery.ui.widget.js
 */
(function(c){c.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(a._preventClickEvent){a._preventClickEvent=false;b.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(a){a.originalEvent=a.originalEvent||{};if(!a.originalEvent.mouseHandled){this._mouseStarted&&
this._mouseUp(a);this._mouseDownEvent=a;var b=this,e=a.which==1,f=typeof this.options.cancel=="string"?c(a.target).parents().add(a.target).filter(this.options.cancel).length:false;if(!e||f||!this._mouseCapture(a))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){b.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=this._mouseStart(a)!==false;if(!this._mouseStarted){a.preventDefault();
return true}}this._mouseMoveDelegate=function(d){return b._mouseMove(d)};this._mouseUpDelegate=function(d){return b._mouseUp(d)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.browser.safari||a.preventDefault();return a.originalEvent.mouseHandled=true}},_mouseMove:function(a){if(c.browser.msie&&!a.button)return this._mouseUp(a);if(this._mouseStarted){this._mouseDrag(a);return a.preventDefault()}if(this._mouseDistanceMet(a)&&
this._mouseDelayMet(a))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==false)?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=a.target==this._mouseDownEvent.target;this._mouseStop(a)}return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-
a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
;/*
 * jQuery UI Draggable 1.8.2
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Draggables
 *
 * Depends:
 * jquery.ui.core.js
 * jquery.ui.mouse.js
 * jquery.ui.widget.js
 */
(function(d){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper==
"original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(a){var b=
this.options;if(this.helper||b.disabled||d(a.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(a);if(!this.handle)return false;return true},_mouseStart:function(a){var b=this.options;this.helper=this._createHelper(a);this._cacheHelperProportions();if(d.ui.ddmanager)d.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-
this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);b.containment&&this._setContainment();if(this._trigger("start",a)===false){this._clear();return false}this._cacheHelperProportions();
d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,true);return true},_mouseDrag:function(a,b){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!b){b=this._uiHash();if(this._trigger("drag",a,b)===false){this._mouseUp({});return false}this.position=b.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||
this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);return false},_mouseStop:function(a){var b=false;if(d.ui.ddmanager&&!this.options.dropBehaviour)b=d.ui.ddmanager.drop(this,a);if(this.dropped){b=this.dropped;this.dropped=false}if(!this.element[0]||!this.element[0].parentNode)return false;if(this.options.revert=="invalid"&&!b||this.options.revert=="valid"&&b||this.options.revert===true||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,
b)){var c=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",a)!==false&&c._clear()})}else this._trigger("stop",a)!==false&&this._clear();return false},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var b=!this.options.handle||!d(this.options.handle,this.element).length?true:false;d(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==
a.target)b=true});return b},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a])):b.helper=="clone"?this.element.clone():this.element;a.parents("body").length||a.appendTo(b.appendTo=="parent"?this.element[0].parentNode:b.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){if(typeof a=="string")a=a.split(" ");if(d.isArray(a))a={left:+a[0],top:+a[1]||
0};if("left"in a)this.offset.click.left=a.left+this.margins.left;if("right"in a)this.offset.click.left=this.helperProportions.width-a.right+this.margins.left;if("top"in a)this.offset.click.top=a.top+this.margins.top;if("bottom"in a)this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],
this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;if(a.containment==
"parent")a.containment=this.helper[0].parentNode;if(a.containment=="document"||a.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d(a.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(d(a.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&
a.containment.constructor!=Array){var b=d(a.containment)[0];if(b){a=d(a.containment).offset();var c=d(b).css("overflow")!="hidden";this.containment=[a.left+(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css("borderTopWidth"),10)||0)+(parseInt(d(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),10)||0)-(parseInt(d(b).css("paddingRight"),
10)||0)-this.helperProportions.width-this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}}else if(a.containment.constructor==Array)this.containment=a.containment},_convertPositionTo:function(a,b){if(!b)b=this.position;a=a=="absolute"?1:-1;var c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],
this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:c.scrollTop())*a),left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():
f?0:c.scrollLeft())*a)}},_generatePosition:function(a){var b=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(c[0].tagName),e=a.pageX,g=a.pageY;if(this.originalPosition){if(this.containment){if(a.pageX-this.offset.click.left<this.containment[0])e=this.containment[0]+this.offset.click.left;if(a.pageY-this.offset.click.top<this.containment[1])g=this.containment[1]+
this.offset.click.top;if(a.pageX-this.offset.click.left>this.containment[2])e=this.containment[2]+this.offset.click.left;if(a.pageY-this.offset.click.top>this.containment[3])g=this.containment[3]+this.offset.click.top}if(b.grid){g=this.originalPageY+Math.round((g-this.originalPageY)/b.grid[1])*b.grid[1];g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-b.grid[1]:g+b.grid[1]:g;e=this.originalPageX+
Math.round((e-this.originalPageX)/b.grid[0])*b.grid[0];e=this.containment?!(e-this.offset.click.left<this.containment[0]||e-this.offset.click.left>this.containment[2])?e:!(e-this.offset.click.left<this.containment[0])?e-b.grid[0]:e+b.grid[0]:e}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:c.scrollTop()),left:e-this.offset.click.left-
this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&d.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(a,b,c){c=c||this._uiHash();d.ui.plugin.call(this,a,[b,c]);if(a=="drag")this.positionAbs=
this._convertPositionTo("absolute");return d.Widget.prototype._trigger.call(this,a,b,c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.extend(d.ui.draggable,{version:"1.8.2"});d.ui.plugin.add("draggable","connectToSortable",{start:function(a,b){var c=d(this).data("draggable"),f=c.options,e=d.extend({},b,{item:c.element});c.sortables=[];d(f.connectToSortable).each(function(){var g=d.data(this,"sortable");
if(g&&!g.options.disabled){c.sortables.push({instance:g,shouldRevert:g.options.revert});g._refreshItems();g._trigger("activate",a,e)}})},stop:function(a,b){var c=d(this).data("draggable"),f=d.extend({},b,{item:c.element});d.each(c.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;c.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(a);this.instance.options.helper=this.instance.options._helper;
c.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",a,f)}})},drag:function(a,b){var c=d(this).data("draggable"),f=this;d.each(c.sortables,function(){this.instance.positionAbs=c.positionAbs;this.instance.helperProportions=c.helperProportions;this.instance.offset.click=c.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=
1;this.instance.currentItem=d(f).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return b.helper[0]};a.target=this.instance.currentItem[0];this.instance._mouseCapture(a,true);this.instance._mouseStart(a,true,true);this.instance.offset.click.top=c.offset.click.top;this.instance.offset.click.left=c.offset.click.left;this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left;
this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top;c._trigger("toSortable",a);c.dropped=this.instance.element;c.currentItem=c.element;this.instance.fromOutside=c}this.instance.currentItem&&this.instance._mouseDrag(a)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",a,this.instance._uiHash(this.instance));this.instance._mouseStop(a,true);this.instance.options.helper=
this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();c._trigger("fromSortable",a);c.dropped=false}})}});d.ui.plugin.add("draggable","cursor",{start:function(){var a=d("body"),b=d(this).data("draggable").options;if(a.css("cursor"))b._cursor=a.css("cursor");a.css("cursor",b.cursor)},stop:function(){var a=d(this).data("draggable").options;a._cursor&&d("body").css("cursor",a._cursor)}});d.ui.plugin.add("draggable","iframeFix",{start:function(){var a=
d(this).data("draggable").options;d(a.iframeFix===true?"iframe":a.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(d(this).offset()).appendTo("body")})},stop:function(){d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});d.ui.plugin.add("draggable","opacity",{start:function(a,b){a=d(b.helper);b=d(this).data("draggable").options;
if(a.css("opacity"))b._opacity=a.css("opacity");a.css("opacity",b.opacity)},stop:function(a,b){a=d(this).data("draggable").options;a._opacity&&d(b.helper).css("opacity",a._opacity)}});d.ui.plugin.add("draggable","scroll",{start:function(){var a=d(this).data("draggable");if(a.scrollParent[0]!=document&&a.scrollParent[0].tagName!="HTML")a.overflowOffset=a.scrollParent.offset()},drag:function(a){var b=d(this).data("draggable"),c=b.options,f=false;if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!=
"HTML"){if(!c.axis||c.axis!="x")if(b.overflowOffset.top+b.scrollParent[0].offsetHeight-a.pageY<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop+c.scrollSpeed;else if(a.pageY-b.overflowOffset.top<c.scrollSensitivity)b.scrollParent[0].scrollTop=f=b.scrollParent[0].scrollTop-c.scrollSpeed;if(!c.axis||c.axis!="y")if(b.overflowOffset.left+b.scrollParent[0].offsetWidth-a.pageX<c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft+c.scrollSpeed;else if(a.pageX-
b.overflowOffset.left<c.scrollSensitivity)b.scrollParent[0].scrollLeft=f=b.scrollParent[0].scrollLeft-c.scrollSpeed}else{if(!c.axis||c.axis!="x")if(a.pageY-d(document).scrollTop()<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()-c.scrollSpeed);else if(d(window).height()-(a.pageY-d(document).scrollTop())<c.scrollSensitivity)f=d(document).scrollTop(d(document).scrollTop()+c.scrollSpeed);if(!c.axis||c.axis!="y")if(a.pageX-d(document).scrollLeft()<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()-
c.scrollSpeed);else if(d(window).width()-(a.pageX-d(document).scrollLeft())<c.scrollSensitivity)f=d(document).scrollLeft(d(document).scrollLeft()+c.scrollSpeed)}f!==false&&d.ui.ddmanager&&!c.dropBehaviour&&d.ui.ddmanager.prepareOffsets(b,a)}});d.ui.plugin.add("draggable","snap",{start:function(){var a=d(this).data("draggable"),b=a.options;a.snapElements=[];d(b.snap.constructor!=String?b.snap.items||":data(draggable)":b.snap).each(function(){var c=d(this),f=c.offset();this!=a.element[0]&&a.snapElements.push({item:this,
width:c.outerWidth(),height:c.outerHeight(),top:f.top,left:f.left})})},drag:function(a,b){for(var c=d(this).data("draggable"),f=c.options,e=f.snapTolerance,g=b.offset.left,n=g+c.helperProportions.width,m=b.offset.top,o=m+c.helperProportions.height,h=c.snapElements.length-1;h>=0;h--){var i=c.snapElements[h].left,k=i+c.snapElements[h].width,j=c.snapElements[h].top,l=j+c.snapElements[h].height;if(i-e<g&&g<k+e&&j-e<m&&m<l+e||i-e<g&&g<k+e&&j-e<o&&o<l+e||i-e<n&&n<k+e&&j-e<m&&m<l+e||i-e<n&&n<k+e&&j-e<o&&
o<l+e){if(f.snapMode!="inner"){var p=Math.abs(j-o)<=e,q=Math.abs(l-m)<=e,r=Math.abs(i-n)<=e,s=Math.abs(k-g)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:j-c.helperProportions.height,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",{top:l,left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:i-c.helperProportions.width}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:k}).left-c.margins.left}var t=
p||q||r||s;if(f.snapMode!="outer"){p=Math.abs(j-m)<=e;q=Math.abs(l-o)<=e;r=Math.abs(i-g)<=e;s=Math.abs(k-n)<=e;if(p)b.position.top=c._convertPositionTo("relative",{top:j,left:0}).top-c.margins.top;if(q)b.position.top=c._convertPositionTo("relative",{top:l-c.helperProportions.height,left:0}).top-c.margins.top;if(r)b.position.left=c._convertPositionTo("relative",{top:0,left:i}).left-c.margins.left;if(s)b.position.left=c._convertPositionTo("relative",{top:0,left:k-c.helperProportions.width}).left-c.margins.left}if(!c.snapElements[h].snapping&&
(p||q||r||s||t))c.options.snap.snap&&c.options.snap.snap.call(c.element,a,d.extend(c._uiHash(),{snapItem:c.snapElements[h].item}));c.snapElements[h].snapping=p||q||r||s||t}else{c.snapElements[h].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,a,d.extend(c._uiHash(),{snapItem:c.snapElements[h].item}));c.snapElements[h].snapping=false}}}});d.ui.plugin.add("draggable","stack",{start:function(){var a=d(this).data("draggable").options;a=d.makeArray(d(a.stack)).sort(function(c,f){return(parseInt(d(c).css("zIndex"),
10)||0)-(parseInt(d(f).css("zIndex"),10)||0)});if(a.length){var b=parseInt(a[0].style.zIndex)||0;d(a).each(function(c){this.style.zIndex=b+c});this[0].style.zIndex=b+a.length}}});d.ui.plugin.add("draggable","zIndex",{start:function(a,b){a=d(b.helper);b=d(this).data("draggable").options;if(a.css("zIndex"))b._zIndex=a.css("zIndex");a.css("zIndex",b.zIndex)},stop:function(a,b){a=d(this).data("draggable").options;a._zIndex&&d(b.helper).css("zIndex",a._zIndex)}})})(jQuery);
;
/*jquery.pubsub:26045248.1*/

/* jQuery Tiny Pub/Sub - v0.7 - 10/27/2011
 * http://benalman.com/
 * Copyright (c) 2011 "Cowboy" Ben Alman; Licensed MIT, GPL */
(function(a){var b=a({});a.subscribe=function(){b.on.apply(b,arguments)},a.unsubscribe=function(){b.off.apply(b,arguments)},a.publish=function(){b.trigger.apply(b,arguments)}})(jQuery)
/*jquery.core:25425008.3*/


/*modernizr.custom.14937:25425024.1*/

/* Modernizr 2.5.3 (Custom Build) | MIT & BSD
 * Build: http://www.modernizr.com/download/#-fontface-backgroundsize-borderimage-borderradius-boxshadow-flexbox-flexbox_legacy-hsla-multiplebgs-opacity-rgba-textshadow-cssanimations-generatedcontent-cssgradients-csstransforms-csstransforms3d-csstransitions-applicationcache-canvas-canvastext-hashchange-history-audio-video-indexeddb-input-inputtypes-localstorage-postmessage-sessionstorage-websockets-websqldatabase-webworkers-geolocation-inlinesvg-svg-svgclippaths-touch-webgl-printshiv-mq-cssclasses-teststyles-testprop-testallprops-hasevent-prefixes-domprefixes
 */
;window.Modernizr=function(a,b,c){function D(a){j.cssText=a}function E(a,b){return D(n.join(a+";")+(b||""))}function F(a,b){return typeof a===b}function G(a,b){return!!~(""+a).indexOf(b)}function H(a,b){for(var d in a)if(j[a[d]]!==c)return b=="pfx"?a[d]:!0;return!1}function I(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:F(f,"function")?f.bind(d||b):f}return!1}function J(a,b,c){var d=a.charAt(0).toUpperCase()+a.substr(1),e=(a+" "+p.join(d+" ")+d).split(" ");return F(b,"string")||F(b,"undefined")?H(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),I(e,b,c))}function L(){e.input=function(c){for(var d=0,e=c.length;d<e;d++)u[c[d]]=c[d]in k;return u.list&&(u.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),u}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var d=0,e,f,h,i=a.length;d<i;d++)k.setAttribute("type",f=a[d]),e=k.type!=="text",e&&(k.value=l,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&k.style.WebkitAppearance!==c?(g.appendChild(k),h=b.defaultView,e=h.getComputedStyle&&h.getComputedStyle(k,null).WebkitAppearance!=="textfield"&&k.offsetHeight!==0,g.removeChild(k)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=k.checkValidity&&k.checkValidity()===!1:/^color$/.test(f)?(g.appendChild(k),g.offsetWidth,e=k.value!=l,g.removeChild(k)):e=k.value!=l)),t[a[d]]=!!e;return t}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d="2.5.3",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={svg:"http://www.w3.org/2000/svg"},s={},t={},u={},v=[],w=v.slice,x,y=function(a,c,d,e){var f,i,j,k=b.createElement("div"),l=b.body,m=l?l:b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),k.appendChild(j);return f=["&#173;","<style>",a,"</style>"].join(""),k.id=h,m.innerHTML+=f,m.appendChild(k),l||(m.style.background="",g.appendChild(m)),i=c(k,a),l?k.parentNode.removeChild(k):m.parentNode.removeChild(m),!!i},z=function(b){var c=a.matchMedia||a.msMatchMedia;if(c)return c(b).matches;var d;return y("@media "+b+" { #"+h+" { position: absolute; } }",function(b){d=(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle)["position"]=="absolute"}),d},A=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=F(e[d],"function"),F(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),B={}.hasOwnProperty,C;!F(B,"undefined")&&!F(B.call,"undefined")?C=function(a,b){return B.call(a,b)}:C=function(a,b){return b in a&&F(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=w.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(w.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(w.call(arguments)))};return e});var K=function(c,d){var f=c.join(""),g=d.length;y(f,function(c,d){var f=b.styleSheets[b.styleSheets.length-1],h=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"",i=c.childNodes,j={};while(g--)j[i[g].id]=i[g];e.touch="ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch||(j.touch&&j.touch.offsetTop)===9,e.csstransforms3d=(j.csstransforms3d&&j.csstransforms3d.offsetLeft)===9&&j.csstransforms3d.offsetHeight===3,e.generatedcontent=(j.generatedcontent&&j.generatedcontent.offsetHeight)>=1,e.fontface=/src/i.test(h)&&h.indexOf(d.split(" ")[0])===0},g,d)}(['@font-face {font-family:"font";src:url("https://")}',["@media (",n.join("touch-enabled),("),h,")","{#touch{top:9px;position:absolute}}"].join(""),["@media (",n.join("transform-3d),("),h,")","{#csstransforms3d{left:9px;position:absolute;height:3px;}}"].join(""),['#generatedcontent:after{content:"',l,'";visibility:hidden}'].join("")],["fontface","touch","csstransforms3d","generatedcontent"]);s.flexbox=function(){return J("flexOrder")},s["flexbox-legacy"]=function(){return J("boxDirection")},s.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},s.canvastext=function(){return!!e.canvas&&!!F(b.createElement("canvas").getContext("2d").fillText,"function")},s.webgl=function(){try{var d=b.createElement("canvas"),e;e=!(!a.WebGLRenderingContext||!d.getContext("experimental-webgl")&&!d.getContext("webgl")),d=c}catch(f){e=!1}return e},s.touch=function(){return e.touch},s.geolocation=function(){return!!navigator.geolocation},s.postmessage=function(){return!!a.postMessage},s.websqldatabase=function(){return!!a.openDatabase},s.indexedDB=function(){return!!J("indexedDB",a)},s.hashchange=function(){return A("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},s.history=function(){return!!a.history&&!!history.pushState},s.websockets=function(){for(var b=-1,c=p.length;++b<c;)if(a[p[b]+"WebSocket"])return!0;return"WebSocket"in a},s.rgba=function(){return D("background-color:rgba(150,255,150,.5)"),G(j.backgroundColor,"rgba")},s.hsla=function(){return D("background-color:hsla(120,40%,100%,.5)"),G(j.backgroundColor,"rgba")||G(j.backgroundColor,"hsla")},s.multiplebgs=function(){return D("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(j.background)},s.backgroundsize=function(){return J("backgroundSize")},s.borderimage=function(){return J("borderImage")},s.borderradius=function(){return J("borderRadius")},s.boxshadow=function(){return J("boxShadow")},s.textshadow=function(){return b.createElement("div").style.textShadow===""},s.opacity=function(){return E("opacity:.55"),/^0.55$/.test(j.opacity)},s.cssanimations=function(){return J("animationName")},s.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return D((a+"-webkit- ".split(" ").join(b+a)+n.join(c+a)).slice(0,-a.length)),G(j.backgroundImage,"gradient")},s.csstransforms=function(){return!!J("transform")},s.csstransforms3d=function(){var a=!!J("perspective");return a&&"webkitPerspective"in g.style&&(a=e.csstransforms3d),a},s.csstransitions=function(){return J("transition")},s.fontface=function(){return e.fontface},s.generatedcontent=function(){return e.generatedcontent},s.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(d){}return c},s.audio=function(){var a=b.createElement("audio"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(d){}return c},s.localstorage=function(){try{return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch(a){return!1}},s.sessionstorage=function(){try{return sessionStorage.setItem(h,h),sessionStorage.removeItem(h),!0}catch(a){return!1}},s.webworkers=function(){return!!a.Worker},s.applicationcache=function(){return!!a.applicationCache},s.svg=function(){return!!b.createElementNS&&!!b.createElementNS(r.svg,"svg").createSVGRect},s.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==r.svg},s.svgclippaths=function(){return!!b.createElementNS&&/SVGClipPath/.test(m.call(b.createElementNS(r.svg,"clipPath")))};for(var M in s)C(s,M)&&(x=M.toLowerCase(),e[x]=s[M](),v.push((e[x]?"":"no-")+x));return e.input||L(),D(""),i=k=null,e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.mq=z,e.hasEvent=A,e.testProp=function(a){return H([a])},e.testAllProps=J,e.testStyles=y,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+v.join(" "):""),e}(this,this.document),function(a,b){function g(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function h(){var a=k.elements;return typeof a=="string"?a.split(" "):a}function i(a){var b={},c=a.createElement,e=a.createDocumentFragment,f=e();a.createElement=function(a){var e=(b[a]||(b[a]=c(a))).cloneNode();return k.shivMethods&&e.canHaveChildren&&!d.test(a)?f.appendChild(e):e},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+h().join().replace(/\w+/g,function(a){return b[a]=c(a),f.createElement(a),'c("'+a+'")'})+");return n}")(k,f)}function j(a){var b;return a.documentShived?a:(k.shivCSS&&!e&&(b=!!g(a,"article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio{display:none}canvas,video{display:inline-block;*display:inline;*zoom:1}[hidden]{display:none}audio[controls]{display:inline-block;*display:inline;*zoom:1}mark{background:#FF0;color:#000}")),f||(b=!i(a)),b&&(a.documentShived=b),a)}function o(a){var b,c=a.getElementsByTagName("*"),d=c.length,e=RegExp("^(?:"+h().join("|")+")$","i"),f=[];while(d--)b=c[d],e.test(b.nodeName)&&f.push(b.applyElement(p(b)));return f}function p(a){var b,c=a.attributes,d=c.length,e=a.ownerDocument.createElement(m+":"+a.nodeName);while(d--)b=c[d],b.specified&&e.setAttribute(b.nodeName,b.nodeValue);return e.style.cssText=a.style.cssText,e}function q(a){var b,c=a.split("{"),d=c.length,e=RegExp("(^|[\\s,>+~])("+h().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),f="$1"+m+"\\:$2";while(d--)b=c[d]=c[d].split("}"),b[b.length-1]=b[b.length-1].replace(e,f),c[d]=b.join("}");return c.join("{")}function r(a){var b=a.length;while(b--)a[b].removeNode()}function s(a){var b,c,d=a.namespaces,e=a.parentWindow;return!n||a.printShived?a:(typeof d[m]=="undefined"&&d.add(m),e.attachEvent("onbeforeprint",function(){var d,e,f,h=a.styleSheets,i=[],j=h.length,k=Array(j);while(j--)k[j]=h[j];while(f=k.pop())if(!f.disabled&&l.test(f.media)){for(d=f.imports,j=0,e=d.length;j<e;j++)k.push(d[j]);try{i.push(f.cssText)}catch(m){}}i=q(i.reverse().join("")),c=o(a),b=g(a,i)}),e.attachEvent("onafterprint",function(){r(c),b.removeNode(!0)}),a.printShived=!0,a)}var c=a.html5||{},d=/^<|^(?:button|form|map|select|textarea)$/i,e,f;(function(){var a=b.createElement("a");a.innerHTML="<xyz></xyz>",e="hidden"in a,f=a.childNodes.length==1||function(){try{b.createElement("a")}catch(a){return!0}var c=b.createDocumentFragment();return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"}()})();var k={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:j};a.html5=k,j(b);var l=/^$|\b(?:all|print)\b/,m="html5shiv",n=!f&&function(){var c=b.documentElement;return typeof b.namespaces!="undefined"&&typeof b.parentWindow!="undefined"&&typeof c.applyElement!="undefined"&&typeof c.removeNode!="undefined"&&typeof a.attachEvent!="undefined"}();k.type+=" print",k.shivPrint=s,s(b)}(this,document);
/*de.bild.env:25425012.1*/

var de = de || {};
de.bild = de.bild || {};

de.bild.env = {

	// dev
	'base' : document.location.protocol + '//www.ka.bild-und-partner.de',
	// qa
	//'base' : document.location.protocol + '//www.kaqa.bild-und-partner.de',
	// live
	//'base' : document.location.protocol + '//www.bild.de',

	// dev
	'sslbase' : 'https://ka-ssl-dev.bild-und-partner.de',
	// qa
	//'sslbase' : 'https://ka-ssl-qa.bild-und-partner.de',
	// live
	//'sslbase' : 'https://ka-ssl.bild.de',


	// dev
	'facebookAppId' : '144384252320756'
	// live
	//'facebookAppId' : '78193590860'

};




/*de.bild.env:25219380.2*/

var de = de || {};
de.bild = de.bild || {};
de.bild.env = {
 // live
 'base' : document.location.protocol + '//www.bild.de',
 'domain' : 'bild.de',
 'sslbase' : 'https://ka-ssl.bild.de',
 'facebookAppId' : '78193590860'
};
/*de.bild.settings:22104336.41*/

var de = de || {};
de.bild = de.bild || {};
//CONSTANTS
de.bild.settings = (function(){
       // BILD GENERAL CONSTANTS

  var urls = {
   'base' : de.bild.env.base,
            'sslbase' : de.bild.env.sslbase
  },
  lang = {
    'more' : 'mehr...',
    'shut' : 'zuklappen'
  },
        facebookAppId = de.bild.env.facebookAppId;


       var videoSettings = {
        
            'videoStateManger' : function(){
             if ((window.project_objects !== null && window.project_objects !== undefined) && (window.project_objects.StateManger != null)) {
               return window.project_objects.StateManger;
             }
             return false;
         },
         'widgetCssFile' : '/code/xoz-bild-widget,24288058.3.bild.css',
         'cssFile' : '/code/xoz-bild,23582754.15.bild.css',
         'swfFile' : '/media/videoplayer2012-23583578/Flash/18.bild.swf' 
        
       };

 
       // COMMUNITY CONSTANTS
       var  community = {
        
            urls : {
                
                //Community Center Home
                'home' : '/ka/p/community',

                // number of comments in ugc comment forms             
                'getNumberOfComments' : '/ka/ajax/ugcelement/getNewComments/%UGCID%/',
                'showNewComments' : '#url=;/ka/ajax/ugcelement/getNewComments/%UGCID%/%NUMNEW%;', 
                'getNewComments' : '#url=;/ka/p/ugcelement/getNewCommentsHTML/%UGCID%/%TIME%/%NUMBEROFCOMMENTS%;',    
                
                // upload urls
                'uploadiframeTarget' : '/ka/cgi-bin/upload.cgi',
                'uploadiframePreload': '/ka/p/ugcelement/upload_iframe_preload',
                'uploadProgressBar' : '/ka/p/ugcelement/upload_progress_bar/',
                
                //uploadurls 1414               
               'uploadiframeTargetFF' : '/ka/cgi-bin/upload_receive.cgi',
                'uploadiframePreloadFF': '/ka/p/ugcelement/upload_iframe_preload',
                'uploadProgressBarFF' : '/ka/p/ugcelement/upload_progress_bar/',

                         
// teaser comments
                'commentsCSS' : '/code/ugcgroup,25424992.6.bild.css',       
                'articleComments'  : '/ka/ajax/numcoms/',
                
         //images
                'loadingIconBig': 'http://bilder.bild.de/fotos/loading-indicator-gross-21202360/Bild/1.bild.gif',
                'loadingIconSmall': 'http://bilder.bild.de/fotos/loading-indicator-21203142/Bild/1.bild.gif',
                'loadingIconSmallDark': 'http://bilder.bild.de/fotos/loading-indicator-ccc-21885334/Bild/1.bild.gif',
                'fbConnect' : 'http://bilder.bild.de/fotos/fbconnect-ico-15401520/Bild/2.bild.gif',

                'anonProfileImage' : 'http://www.bild.de/ka/img/icons/48X48.unisex.jpg',
                
                //sso
                'ssoLoginLightBox' : urls.base + '/ka/p/user/login_lb',                
                'ssoIsLoggedIn' : urls.base + '/ka/p/user/is_loggedin',
                'ssoRegister' : urls.base + '/ka/p/user/register',
                'ssoLogout' : urls.base + '/ka/p/user/logout',
                'ssoUserAttrib' : urls.base + '/ka/p/user/login/user_attributes',
    'ssoLoginGateway' : urls.base + '/ka/p/user/getSSOLoginGatewayURL',
                'ssoFBLogin' : '/ka/p/user/fblogin/facebook',
                'ssoFBAdd' : '/ka/p/user/fblogin/facebook/add',
                'ssoFBIframe' : urls.sslbase + '/ka/p/user/fbautologin',
    
    //user account
                'userSettings' : urls.base + '/ka/p/user/settings',
    'getuploadedprofilepicture' : '/ka/ajax/p/accountsettings/get_uploaded_profile_picture',
                'profilePage' : urls.base + '/ka/p/profile',
                'getUserInfo' : urls.sslbase + '/ka/p/private/userdata/jsonp/getUserDataJson/%USERID%/%TOKEN%',
                'getUserAbout' : urls.sslbase + '/ka/private/settings/about/view',
                //'getUserInfo' : 'https://ka-ssl-dev.bild-und-partner.de/ka/p/private/userdata/jsonp/getUserDataJson/%USERID%',
                // notifications for new features
                'newfeatureNotification' : '/ka/private/onnewfeature',
                
                // facebook API actions
                'fbPostCommentReply' : '/ka/p/fbtest/postcommenttofb',
                'fbPostPhoto' : '/ka/p/fbtest/postphoto',
                'fbPostVideo' : '/ka/p/fbtest/postvideo',
                
                // profile actions
                'deleteprofilephoto' : '/ka/ajax/p/user/delete_profile_photo',
                'removefb' : '/ka/ajax/p/accountsettings/removeFbId', 
                 // bcard
                'bcard' : '/ka/ajax/p/bcard/'
                                
            },

          
        /**
         * lang language strings used in community elements
         * @object
         * @name lang
         * @private
         */ 
  lang : {
   'closeall' : 'Alle Zuklappen',
   'openall' : 'Alle Aufklappen',
   'newComment' : '1 neuer Kommentar',
   'newComments' : '%COUNT% neue Kommentare',
   'thereAreNewComments' : 'Es gibt neue Kommentare',
   'thanksforComment' : 'Vielen Dank f√ºr Ihren Kommentar!',
   'commentsNo' : 'Kommentare (%COUNT%)',
   'more' : 'mehr',
   'showAllMessages' : 'Alle Mitteilungen anzeigen',
   'noNewMessages' : 'Sie haben keine neuen Nachrichten',
   'newMessages' : '%COUNT% neue Mitteilungen',
   'messages' : 'Mitteilungen',
   'newRequest' : '%COUNT% neue Anfragen',
   'requests' : 'Anfragen',
   'noNewRequests' : 'Derzeit liegen keine unbeantworteten Freundschafts-Anfragen vor',
   'register' : 'Neu registrieren',
   'login' : 'Login',
   'logout' : 'Logout',
   'loggedInFBC' : 'Eingeloggt mit Facebook Connect',
   'loggedInAs' : 'Eingeloggt als',
   'anonUser' : 'Anonymer user',
   'error' : 'Ein Fehler ist aufgetreten',
   'tryagain' : 'Bitte versuchen Sie es später noch einmal',
   'years' : ' Jahre',
   'notprovided' : 'nicht eingegeben',
   'newWindow' : 'Link öffnet eine neue Seite',
   'following' : 'Folge ich',
   'followingNo' : 'Folge ich (%COUNT%)',
   'followersNo' : 'Folgen mir (%COUNT%)',
   'blockingNo' : 'Blockierte User (%COUNT%)',
   'defollow' : 'Entfolgen',
   'loading' : 'Wird geladen',
   'closeLightbox' : 'Schließen'
  }         

    };  
        // this will one day refer to a global set of variables across the site
        return {
            // community settings
            'community' : community,
            'facebookAppId' : facebookAppId,
            
            // general bild 
            'lang' : lang,
            'urls' : urls,
            'videoSettings' : videoSettings   
            
        }   
        
})();

/*de.lib:22104208.2*/

/*
@ignore;
*/
var de = de || {};
/**
* Abtracts base library (jquery) functions
* @ignore
* @memberOf de
*/
de.lib = (function($){      
    
    // jquery is there? hallo!
    if (typeof $ === 'undefined'  || $ !== window.jQuery){
        throw(new Error({'name' : 'Fehlende Bibliothek', 'message':'jQuery nicht uebergeben oder vorhanden'}));
        return;
    }    
    /**
     * abstracts the jquery live function
     * @function
     * @name live
     * @memberOf de.lib
     * @param {$jQuery} $parentSelector 
     * @param {String|Object} events 
     * @param {String} selector 
     * @param {Function} handler 
     * @param {Object} data 
     * @private
     */
    // de.lib.live($parentSelector, events, selector, handler, data);
    function live($parentSelector, selector, events, handler, data){
        // as of 1.7 change to 'on'
        if ($parentSelector.length) {
            data = data || {};
            if (typeof events === 'string') {
                $parentSelector.on(events, selector, data, handler);
            } else {
                $parentSelector.on(events, selector);
            }
        }  
    };
    /**
     * replaceContent: extracts value from allowed object:attribute pairs
     * @param {$Object} $target - jQuery object which will be replaced
     * @param {String} response - HTML from the server
     * @name replaceContent
     * @function
     * @memberOf de.bild.httpFist
     * @private
     */
    function replaceWith($target,response) {
        if (arguments.length < 2) return false;
        // jQuery.support.leadingWhitespace === false in ie6-8 (jquery docs)
        if ($.support.leadingWhitespace === false) {
                var $temp = $('<div/>'),
                temp = $temp.get(0);
                temp.innerHTML = response;
                $target.replaceWith(temp.innerHTML);
        } else {
            $target.replaceWith(response);
        }
    };
    
    return {
        'live' : function($parentSelector, selector, events, handler, data){
            live($parentSelector, selector, events, handler, data);
        },
        'replaceWith' : function($target,response) {
            replaceWith($target,response);
            return $target;
        }
    };
}(jQuery));
/*de.bild.utils:22104220.15*/

var de = de || {};
de.bild = de.bild || {};
/**
* @function
* de.bild.utils - General utility functions
* @name utils
* @memberOf de.bild
* @param {object} $ jQuery Objekt
* @dependencies ['jQuery','jQuery.cookie']
*/
de.bild.utils = (function($){

   var uA = navigator.userAgent.toLowerCase();
    
    // function isHome(){
    //     // und nicht auf der Videobuehne
    //     if ($('body#video').length > 0) {
    //         return false;
    //     } else if ($('#lvl2 > li:first-child').hasClass(lib.styles.current) ) {
    //         return true;
    //     }
    //     return false;
    // };
    
    // function isArticle(){
    //     return ($('body').attr('id') === 'video') ? true : false;
    // };
    
    // function isVideo(){
    //     return ($('body').attr('id') === 'article') ? true : false;
    // };


    //

    /* check if window has loaded */ 
    var windowhasLoaded = false;
    $(window).load(function(){
        windowhasLoaded = true;
    });

    /* is local storage supported? */ 
    var supportsLocalStorage = function() {
      try {
        return !!localStorage.getItem;
      } catch(e) {
        return false;
      }
    },
    /* is session storage supported?*/
    supportsSessionStorage = function() {
        try {
          return !!sessionStorage.getItem;
        } catch(e){
          return false;
        }
    };
    /**
     * manages the state of the bar in a cookie (local/session storage if available)
     * @object
     * @name storage
     * @memberOf de.bild.utils
     * @private
     */
    var storage = {
        /**
         * sets value of storage/cookie
         * @function
         * @name set
         * @memberOf storage
         * @param {String} key name of data
         * @param {String} value data
         * @param {Bool} keep should we keep this data after the browser session?
         * @private
         */
        'set' : function(key,value,keep){
            if (!key && !value) return false;
            if (keep) {
                if (supportsLocalStorage()) {
                    window.localStorage.setItem(key, value);
                } else {
                    $.cookie(key, value, {
                       expires: 365,
                       path: '/'
                    });
                }
            } else {
                if (supportsSessionStorage()) {
                    window.sessionStorage.setItem(key, value);
                } else {
                    $.cookie(key, value, {path: '/'});
                }
            }
        },
        'get' : function(key){
            if (!key) return false;
            if (supportsSessionStorage() && window.sessionStorage.getItem(key)) {
                return window.sessionStorage.getItem(key);
            } else if (supportsLocalStorage() && window.localStorage.getItem(key)) {
                return window.localStorage.getItem(key);
            } else if ($.cookie(key)) {
                return $.cookie(key);
            } 
            return false;
        },       
        'remove' : function(key){
            if (!key) return false;
            if (supportsSessionStorage() && window.sessionStorage.getItem(key)) {
                 window.sessionStorage.removeItem(key);
                 return true;
            } else if (supportsLocalStorage() && window.localStorage.getItem(key)) {
               window.localStorage.removeItem(key);
                return true;
            } else if ($.cookie(key)) {
                $.cookie(key, null, {
                    path: '/'
                });
                return true;
            }
            return false;
        }
    };
    
    /**
     * returns current date based on a formatted pattern
     * @param {String} pattern - for an explanation, see function comments
     * @object
     * @name getTime
     * @memberOf de.bild.utils
     * @private
     */
    function getTime(pattern){

        /*
            String patterns:
            getTime('$d.$m.$Y $h:$i Uhr') => 17.02.2012 13:30 Uhr
            getTime('$d/$m/$y | $h:$i Uhr') => 17/02/12 | 13:30 Uhr
            getTime('$D, $M $d, $Y @ $h:$i') => Freitag, Februar 17, 2012 @ 13:30
            getTime('Heute ist $D der $d $M. Das Jahr ist $Y.') => Heute ist Freitag der 17 Februar. Das Jahr ist 2012.
        */

        pattern = pattern || '';

        // if a pattern has been passed and we have at least something to change
        if (pattern !== '' && pattern.indexOf('$') !== -1) {

            var exp = /(\${1}[a-zA-Z]{1})/gi,
            dict = ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag', 'Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
            d = new Date(),
            f = {

                // day number with 0
                '$d' : function(){
                    return (d.getDate() < 10) ? '0'+  d.getDate() : d.getDate()
                },
                // day number
                '$j' : function(){
                    return d.getDay()
                },
                // day name
                '$D' : function(){
                    return dict[f.$j()];
                },
                // month name
                '$M' : function(){
                    return dict[6+d.getMonth()+1];
                },
                // month number with 0
                '$m' : function(){
                    return (d.getMonth() < 10) ? '0' + (d.getMonth()+1) : (d.getMonth()+1)
                },
                // hour in 24hr format
                '$h' : function(){
                    return (d.getHours() < 10) ? '0'+ d.getHours() : d.getHours()
                },
                // minutes 
                '$i' : function(){
                    return (d.getMinutes() < 10) ? '0' + d.getMinutes() : d.getMinutes()
                },
                // seconds
                '$s' : function(){
                    return (d.getSeconds() < 10) ? '0' + d.getSeconds() : d.getSeconds()
                },
                // full year yyyy
                '$Y' : function(){
                    return d.getFullYear()
                },
                // last two numbers of full year
                '$y' : function(){
                    return d.getFullYear().toString().slice(2)
                }
            };

            var formatted = pattern.replace(exp, function (t) {            
                return f[t] ? f[t]() : '';
            });

            return formatted;
        }

        return pattern;

    };

    /**
     * jQuery Extension - Autogrow/shrink functionality for textareas
     * @param {Int} minHeight minimum shrink height of the textarea
     * @param {Int} maxHeight maximum growth height of the textarea
     * @function
     * @name $.fn.TextAreaExpander
     * @private
     * @return {Object} Object of plugin
     */
    $.fn.TextAreaExpander = function(minHeight, maxHeight){
        var hCheck = !($.browser.msie || $.browser.opera);
        // resize a textarea
        function ResizeTextarea(e){
            // event or initialize element?
            e = e.target || e;
            // find content length and box width
            var vlen = e.value.length, ewidth = e.offsetWidth;
            if (vlen != e.valLength || ewidth != e.boxWidth) {
                if (hCheck && (vlen < e.valLength || ewidth != e.boxWidth))
                    e.style.height = '0px';
                var h = Math.max(e.expandMin, Math.min(e.scrollHeight, e.expandMax));
                e.style.overflow = (e.scrollHeight > h ? 'auto' : 'hidden');
                e.style.height = h + 'px';
                e.valLength = vlen;
            }
            return true;
        };
        // initialize
        this.each(function(){
            // is a textarea?
            if (this.nodeName.toLowerCase() != 'textarea')
                return;
            // set height restrictions
            var p = this.className.match(/expand(\d+)\-*(\d+)*/i);
            this.expandMin = minHeight || (p ? parseInt('0' + p[1], 10) : 0);
            this.expandMax = maxHeight || (p ? parseInt('0' + p[2], 10) : 99999);
            // initial resize
            ResizeTextarea(this);
            //add events
            if (!this.Initialized) {
                this.Initialized = true;
                $(this).bind('keypress', ResizeTextarea).bind('keyup', ResizeTextarea).bind('focus', ResizeTextarea).bind('keydown', ResizeTextarea);
            }
        });
        return this;
    };

    /**
     * calculate the browser viewport
     * @function
     * @name getViewport
     * @memberOf de.bild.utils
     * @returns {object}  
     * @private
     */
    function getViewport() {
        var win = $(window),
            top = win.scrollTop(),
            left = win.scrollLeft();

        return {
            top: top,
            left: left,
            bottom: top + win.height(),
            right: left + win.width()
        }
    }
    /**
     * is a jquery object in the vertical viewport?
     * @object
     * @name inViewport
     * @memberOf de.bild.utils
     * @param {$jQuery} $elem 
     * @return {Number} visible 0 = not visible
     * @private
     */
    function inViewport($elem){
        if (!$elem || $elem.length === 0) return 0;
        var offset = $elem.offset(),
        viewport = getViewport();
        // invisible, if offset could not be calculated
        if (!offset) return 0;      
        
        var visible = 0, 
        top = offset.top;
        // chance for vertical visibility
        if (top < viewport.bottom) {
            var bottom = top + $elem.height();
            // flags
            //1 for top
            //4 for bottom
            if (top >= viewport.top) visible += 1;
            if (bottom < viewport.bottom && bottom >= viewport.top) visible += 4;
        }
        return visible;     
    };
    
    /**
     * scroll the page to a given y-point
     * @object
     * @name scrollTo
     * @memberOf de.bild.utils
     * @param {number} targetOffset y-position to where the window should scroll
     * @param {bool} animate the scroll (true) or not (false)
     * @private
     */
    function scrollTo(ypos, anim){
        if(anim) {
            $(window.opera ? 'html' : 'html, body').animate({scrollTop: ypos}, 400); 
        }
        else {
            $(window.opera ? 'html' : 'html, body').scrollTop(ypos);
        }
    }; 

    /**
    * ran - Zufallsgenerator - generiert eine Zufallszahl zwischen 0 und n. Standardwert = 101
    * @private
    * @param n {Number} Dachszahl
    * @return {Number} 
    */ 
    function ran(n){
        // the random number will be less than n
        n = n || 10001;
        return ~~(Math.random()*n);
    };
    /**
     * adds a stylesheet to the head elem
     * @object
     * @name addStyleSheet
     * @memberOf de.bild.utils
     * @param {String} url of the style sheet!
     * @param {String} id optional id for the link tag
     * @returns {Bool} whether the css tag is present on the page
     * @private
     */
    function addStyleSheet(url, id){
            var cssLoaded = false,
            id = id || 'newStyleSheet' + ran(7001),
            $link = $('<link id="' + id + '" href="' + url + '" rel="stylesheet" type="text/css" media="all" />').appendTo('head');

            // has to work in IE and opera so we do it the long way
            $link.attr({
                href : url,
                rel  : 'stylesheet',
                type : 'text/css',
                media : 'all'
            });

            if ($('link#'+id).length) cssLoaded = true;
            
            return cssLoaded;
    };

    /**
     * remove double carriage returns and jquery trims string
     * @function
     * @name trim
     * @param {String} str form value
     * @returns {String} form value
     * @memberOf de.bild.utils
     * @private
     */
    function trim(str) {
        if (str.length) {
            str = $.trim(str)
            str = str.replace(/[\n\r]{2,}/g, function(newLine){
                if (newLine.length >= 2) {
                 return '\n\n'
                } else {
                 return '\n'
                }
            }); 
            return str;
        }
        return '';      
    };
    

    return {
        'scrollTo' : function(ypos, anim){
            if (ypos) {
                scrollTo(ypos, anim);
            }
            return ypos;
        },
        'inViewport' : function($elem){
            return inViewport($elem);
        },
        'addStyleSheet' : function(url, id){
            addStyleSheet(url, id);
            return id;
        },
        'ran' : function(n){
            return ran(n);
        },
        'trim' : function(str){
            str = str || '';
            return trim(str);
        },
        'getTime' : function(pattern){
            pattern = pattern || '';
            return getTime(pattern);
        },
        'storage' : storage,
        'windowhasLoaded' : function(){
            return windowhasLoaded;
        },
        'isIPad': function(){
            return uA.match(/ipad/i) != null
        },
        'isIPhone': function(){
            return (uA.match(/iphone/i) || uA.match(/ipod/i)) != null
        },
        'isMobile' : function(){
            return uA.match(/android|blackberry|iphone|ipad|ipod|windowsce|windowsphoneos7/i) != null;
        }
    }

}(jQuery));
/*de.bild.utils:25424994.2*/


/*de.bild.mobile:26045250.2*/

var de = de || {};
de.bild = de.bild || {};
de.bild.mobile = (function($){

    var str = "http://www.bild.de\n\nNEU! BILD HD 3.0\n- Optimiert für das neue iPad\n\nTesten Sie jetzt die neue Version der preisgekrönten BILD HD App. Die besten Artikel, Bilder und Videos jetzt noch schärfer.\n\nKlicken Sie auf OK um die neue BILD HD 30 Tage kostenlos zu testen!";
    var localStoName = "iPadPopupWasShownThisMonthAtBILD";
    var url = "http://itunes.apple.com/de/app/bild-hd/id402698121?l=de&ls=1&mt=8";
   
    function iPadInfo() {
        var date = new Date();
        var locDateStr = localStorage.getItem(localStoName);
        var locDate = new Date(locDateStr);
       
        if (locDateStr == undefined || diffDays(date, locDate) > 30) {
            localStorage.setItem(localStoName, date.toString());
            if(confirm(str)) {
                window.location.href = url;
            }
        }
    }
   
    function diffDays(date1, date2) {
        if(!date1 || !date2) return null;
        var d1 = new Date(date1.getFullYear(), date1.getMonth(), date1.getDate());
        var d2 = new Date(date2.getFullYear(), date2.getMonth(), date2.getDate());
        return Math.abs(d1 - d2) / (1000 * 60 * 60 * 24);
    }
   
    function isBildDe() {
        return (/http:\/\/www\.bild\.de/i.test(document.location.href));
    }

    function isIPad(){
        return (/iPad/i.test(navigator.userAgent) && navigator.platform === "iPad");
    }
    
    function isBildApp(){
        return (/BildIPad/i.test(navigator.userAgent));
    }

    function hasLocalstrg() {
        try {
            return 'localStorage' in window && window['localStorage'] !== null;
        } catch (e) {
            return false;
        }
    }     
    
    function isIOS() {
    	return ( navigator.userAgent.match(/(iPad|iPhone|iPod)/i) ? true : false );
    }    
    
    function isWebkit() {
    	return (/WebKit/i.test(navigator.userAgent));
    }
    
    
    
    
    
    $(window).load(function(){
        if(isBildDe() && isIPad() && hasLocalstrg() && !isBildApp()) {
            iPadInfo();
        }
    });
   
    
    
    var mobileEvents = {
        'click' : 'touchstart',
        'fastclick' : 'mobileClick',
        'move' : 'touchmove',
        'mouseDown' : 'touchstart',
        'mouseUp' : 'touchend'
    };
    
    
    
    return {
    	'isIOS' : function() {
    		return isIOS();
    	},
    	'isIPad' : function() {
    		return isIPad();
    	},
    	'isWebkit' : function() {
    		return isWebkit();
    	},
    	'hasTouchSupport': function(){
            return 'ontouchstart' in document.documentElement;
        },
        'mobileEvents': function(event) {
            return mobileEvents[event];
        }
    }
       
})(jQuery);



/**
 * jQuery custom event for iOS Tap Events.
 *
 * @usage - Simply bind as any other event e.g. $('#foo').bind('mobileClick', function() { doSomething(); });
 *
 **/
(function($) {

    //tapEventData = {};
    //$tapTarget = null;

    $.event.special.mobileClick = {

        setup : function(data) {

            var $tapTarget = $(this);
            var tapEventData = {};
            
             $tapTarget.on('click', function(e) {
                 e.preventDefault();
                 e.stopPropagation();
             });
            
            $tapTarget.on('touchstart', function(e) {

                if(e.originalEvent.touches.length > 1) {
                    tapEventData.noTap = 1;
                    return false;
                }

                tapEventData = {
                    dateTime : new Date().getTime(),
                    startX : e.originalEvent.touches[0].pageX,
                    startY : e.originalEvent.touches[0].pageY,
                    xCoord : 0,
                    yCoord : 0,
                    touchMoved : 0
                };

                $tapTarget.on('touchmove', function(e) {
                    tapEventData.touchMoved = 1;
                    tapEventData.xCoord = e.originalEvent.touches[0].pageX;
                    tapEventData.yCoord = e.originalEvent.touches[0].pageY;
                });
            });
            // Maybe this should be on, only ontouchstart and otherwise off
            $tapTarget.on('touchend', function(e) {
                
                e.preventDefault();

                if(tapEventData.noTap) {
                    tapEventData.noTap = 0;
                    return false;
                }

                $tapTarget.off('touchmove');

                var newDate = new Date().getTime();

                // yes, this is heavy! use a single boolean variable instead for the second part of condition
                if( 
                    (newDate - tapEventData.dateTime) < 200 &&                                // check if time between touchstart and touchend is < 200ms
                        (!tapEventData.touchMoved ||                                          // did any movement take place?
                            (Math.abs(tapEventData.xCoord - tapEventData.startX) < 10       // movement occured, but less then 10px in the X-axis?
                            && Math.abs(tapEventData.yCoord - tapEventData.startY) < 10)    // same as above for the Y-Axis
                        )
                    ) {
                    $tapTarget.trigger('mobileClick');
                }

                tapEventData.touchMoved = 0;
            });
            return false;

        },
        teardown : function() {

            $(this).off('touchstart');
            $(this).off('touchend');

            tapEventData = {};

            return false;

        }
    };

})(jQuery);

/*de.bild.httpFist:25425028.1*/


/**
* @fileoverview Parses defined attributes of AJAX-enabled elements and creates HTTP GET request
* @author <a href="mailto:rdodd@bild.de">Ramon Dodd</a>
*/

/**
*
* .----.-----.-----.-----.
 /      \     \     \     \
|  \/    |     |   __L_____L__
|   |    |     |  (           \
|    \___/    /    \______/    |
|        \___/\___/\___/       |
 \      \     /               /
  |                        __/
   \_                   __/
    |        |         |
    |                  |
    | H T T P F I S T  |
   
  Fast Injection Snippet Templating 
*/

var de = de || {};
de.bild = de.bild || {};

/**
 * de.bild.httpFist
 * @param {$jQuery} jQuery - the jQuery namespace
 * @name httpFist
 * @function
 * @memberOf de.bild
 * @namespace Parses defined attributes of AJAX-enabled elements and creates HTTP GET request
 */
de.bild.httpFist = (function($){

        /* the separator character. used to split the variables*/
        var separator = ';',
        ajaxtimeout = 10000,
        contentparentClass = 'data-ajax-contentparent',
        badBrowser = $.browser.msie && $.browser.version.substr(0,1)<9,       
        /* will match the following pattern - abc=;abc123/_.&,-:;
         Example of expected string: #url=;friends-list001.snip;target=;pdemo1;contentparent=;true;data=;html;callback=;klasdasdflkjdf;*/
        regEx = /([a-zA-Z]+)?=\;([\w\d\_\-\.:%\/,=\&\?]+)\;/g;
        

    /**
     * jQuery Extension - queue for ajax requests It is a front-end for jQuery.ajax() and takes the same options/arguments as any standard ajax call, just makes sure that only one ajax call can be running at a time.
     * @function
     * @name $.fn.ajaxQueue
     * @private
     * @return {Object} Object of plugin
     */
        (function($) {
       
        /* jQuery on an empty object, we are going to use this as our Queue*/
        var ajaxQueue = $({});
       
        $.ajaxQueue = function( ajaxOpts ) {
            var jqXHR,
                dfd = $.Deferred(),
                promise = dfd.promise();
       
            /* queue our ajax request*/
            ajaxQueue.queue( doRequest );
       
            /* add the abort method*/
            promise.abort = function( statusText ) {
       
                /* proxy abort to the jqXHR if it is active*/
                if ( jqXHR ) {
                    return jqXHR.abort( statusText );
                }
       
                /* if there wasn't already a jqXHR we need to remove from queue*/
                var queue = ajaxQueue.queue(),
                    index = $.inArray( doRequest, queue );
       
                if ( index > -1 ) {
                    queue.splice( index, 1 );
                }
       
                /* and then reject the deferred*/
                dfd.rejectWith( ajaxOpts.context || ajaxOpts, [ promise, statusText, "" ] );
                return promise;
            };
       
            /* run the actual query*/
            function doRequest( next ) {
                jqXHR = $.ajax( ajaxOpts )
                    .then( next, next )
                    .done( dfd.resolve )
                    .fail( dfd.reject );
            }
       
            return promise;
        };
       
        })(jQuery);    

    /**
     * getValue: extracts value from allowed object:attribute pairs. Also checks for data attributes in HTML5 elements
     * @param {$Objekt} data - contains the object of the Event
     * @returns {String|Null}
     * @name getValue
     * @function
     * @memberOf de.bild.httpFist
     * @private
     */
      function getValue($obj){
        var nodeName = $obj[0].nodeName.toLowerCase(),
        value = null;

        switch (nodeName) {
            case ('a') : value = $obj.attr('href'); break;
            case ('select') : value = $obj.find('option:selected').val(); break;
            case ('input') : value = $obj.val(); break;
        }
        return value;
      };
    /**
     * buildFunction: turns a string into a function if it's available in the window object
     * @param {String} funcName - name of function. can be global name or dot notation syntax, eg. de.bild.community.myFunction
     * @returns {Function}
     * @name getValue
     * @function
     * @memberOf de.bild.httpFist
     * @private
     */
      function buildFunction(funcName){
            if (!funcName) {
               return null; 
            }
            /* if the function is directly available in the window object*/
            if (typeof window[funcName] === 'function') {
                return window[funcName];
            }
           
            /* split between the dots if we're looking for a namespaced func*/
            var objNames = funcName.split('.');
            /* get the parent object first
            tempObj = window[objNames[0]];
           
            /*loop through the child objects and get the final entry*/
            for(var i=1,j=objNames.length;i<j;i++){
                if (tempObj[objNames[i]]) {
                    tempObj = tempObj[objNames[i]];
                }
            }  
           
            return tempObj;
      };     
    /**
     * replaceContent: extracts value from allowed object:attribute pairs
     * @param {$Object} $target - jQuery object which will be replaced
     * @param {String} response - HTML from the server
     * @name replaceContent
     * @function
     * @memberOf de.bild.httpFist
     * @private
     */
    function replaceContent($target,response) {
        if (badBrowser) {
                var $temp = $('<div/>'),
                temp = $temp.get(0);
                temp.innerHTML = response;
                $target.replaceWith(temp.innerHTML);
        } else {
            $target.replaceWith(response);
        }
    }; 
      
   
    /**
     * parse: reads the attribute value of an object, parses it and assembles an HTTP Request.
     * Allowed objects [and their attributes]: a[href], select[options.value]
     * Takes one argument <strong>obj</strong> which is an object:
     * <ul>
     * <li>@property {object} <strong>obj</strong> The object with which the Event is bound</li>
     * <li>@property {replace} <strong>str</strong> Should the target be replaced instead of filled?</li>
     * <li>@property {$object} <strong>$target</strong> (optional) jQuery Object which represents the target for injected Ajax content</li>
     * <li>@property {string} <strong>url</strong> (optional) pass a url manually</li>
     * <li>@method {function} <strong>callback</strong> (optional) Function to be executed after a successful Ajax operation. It gets the scope of the original Element on which the Event was bound</li>
     * </ul>
     * @param {Objekt} data - contains the object of the Event (mandatory), a target jQuery object (optional) and a callback function (optional)
     * @returns {Bool} false
     * @name parse
     * @function
     * @memberOf de.bild.httpFist
     * @private
     */
      function parse(data){
         
        var temp = {}, $ob, s, m, i, o, target, url, method, callback, hasTarget= false, dataType, jhxr, $target,$context;

        if (typeof data.obj === 'object') {
            $obj = $(data.obj);
            //html5
            if ($obj.attr('data-ajax-href') && $obj.attr('data-ajax-href') !== '') {
                temp.url = $obj.attr('data-ajax-href');
                temp.target = ($obj.attr('data-ajax-target') && $obj.attr('data-ajax-target') !== '') ? $obj.attr('data-ajax-target') : null;
                temp.callback = $obj.attr('data-ajax-callback') ? $obj.attr('data-ajax-callback') : null;
            } else {

                s = getValue($obj);

                if (s && !data.url) {
                    /* here we pull out everything after the hash 
                    match our params and then extract the keys and values and store them in temp*/

                    s = s.substring(s.indexOf('#')+1,s.length);
                    m = s.match(regEx);
                    if (!m) {
                       return false; 
                    }
                    for (i=0,j=m.length;i<j;i++) {
                        o = m[i].replace(regEx,'$1'+separator+'$2').split(separator);
                        temp[o[0]]=o[1];
                    } 
                }
            }
        }


        target = (temp.target) ? temp.target : null;
        url = (data.url) ? data.url : temp.url;
        method = data.method ? data.method : 'GET';
        callback = (data.callback) ? data.callback : buildFunction(temp.callback ? temp.callback : false);
        dataType = (data.dataType) ? data.dataType : 'html';


        if (!url) return false;
        
        /* we can add a loading class if we want      
        //if (target) {$('#'+target).find('form.listsort').addClass('loading');} else if (data.$target) {data.$target.addClass('loading');}*/

        jhxr = $.ajaxQueue({
            'url': url,
            'dataType': dataType,
            'cache' : true,
            'type' : method,
            'timeout' : ajaxtimeout, 
            'success': function(response){

                /* recheck for targets in success to avoid DOM manipulation on targets that no longer exists because this one has been sitting in the queue*/
                if (target) {
                  // let's jquery that id
                  $target = $('#'+target);
                  hasTarget = true;
                }
                /* manual override: here, if a jquery object was passed to the function as $target, we want that to be the place where we inject the HTML
                // we will still pass whatever target we find in the url string as a parameter*/
                if (data.$target) {
                  $target = data.$target;
                  hasTarget = true;
                }
                /* if we have the ok to insert content, then do it*/
                
                    if (hasTarget && $target.length) {
                        $target.empty();
                        if (data.replace) {
                            $context = $target.parent();
                            de.lib.replaceWith($target,response);
                        } else {
                            // html() will not execute scripts
                            if (response.indexOf('</script>') != -1) {
                                $target.html('<div id="httpfist-replaceme-div"/>');
                                de.lib.replaceWith($('#httpfist-replaceme-div'),response);  
                            } else {
                                $target[0].innerHTML = response;
                            }             
                            $context = $target;
                        }
                    }

                /* let's give the callback the scope of the original object */  
                (typeof callback === 'function') && callback.apply(data.obj,[response,$context]);
               
            },
            'error': function(xhr, textStatus, errorThrown){
                $target = (target) ? $('#'+target) : data.$target;
                (typeof data.error === 'function') && data.error.apply(data.obj,[xhr, textStatus, $target]);
            }
        }); 
       
        return jhxr;
      };    

   /* public Interface*/
    return {
       'load' : function(data){
            if (data) {
                return parse(data);
            }
           return false; 
        }

   
    };
   
}(jQuery));
/*de.bild.sso:22104188.20*/


/**
* de.bild.sso - main SSO functionality
* @name sso
* @memberOf de.bild
* @param {object} $ JQuery
* @function
* @returns {Function} init - initalises all sso functionality
* @namespace SSO
* @dependencies ['de.bild.settings','jquery.bildLightbox.js', 'jQuery.cookie']
*/
de.bild.sso = (function($){

    // cookie names
    var avKeepUsr = 'avKeepUsr',
    avComUsr = 'avComUsr',
    // should we redirect to comm homepage after login (only for header)
    redirectToCommunityHome = false,
    //cookie generated by KA
    loggedInCookie = 'loggedin',
    //iframe id - this is dynamically generated
    ssoIframeId = 'SSOavKeepUsrFrame',
    
    //login iframe id for in-page login forms
    loginIframe = 'login_popup_accountsettings',

    // userinfo
    userInfo = null,
    
    // lightbox dimensions
    lbWidth = 752,
    lbHeight = 554,
    
    // templates
    templates = {
        //'userStrap' : '<img alt="%NAME%" src="%SRC%">&nbsp;%NAME%&nbsp;▼',
        'userStrap' : '%NAME%&nbsp;▼',
        'loggedout' : '<a href="#" id="comNewUser" onclick="de.bild.sso.register()">'+de.bild.settings.community.lang.register+'</a><span>|</span><a href="#" id="comLoginout" onclick="de.bild.sso.login({\'goHome\':true});return false;">' + de.bild.settings.community.lang.login + '</a>',
        'loggedinNoData' : '<a href="#" onclick="de.bild.sso.logout()">' + de.bild.settings.community.lang.logout + '</a>',
        //'loggedin' : '<p class="%CLASS%" id="comUsername">' + de.bild.settings.community.lang.loggedInAs + ' <a href="%PROFILEURL%">%NAME%</a></p><span>|</span><a href="#" id="comLoginout" onclick="de.bild.sso.logout()">' + de.bild.settings.community.lang.logout + '</a>'
        'loggedin' : '<p class="%CLASS%" id="comUsername">' + de.bild.settings.community.lang.loggedInAs + ' <a href="'+de.bild.settings.community.urls.profilePage+'">%NAME%</a></p><span>|</span><a href="#" id="comLoginout" onclick="de.bild.sso.logout();return false;">' + de.bild.settings.community.lang.logout + '</a>'
    },
    
    // let's keep a record of what the header bar is doing
    // we need this to record whether the page (tab) thinks the user is logged in 
    // since someone might log in/out in another tab
    isUserBarOn = false,

    // cache DOM elements
    $body,
    $contentWrapper,
    // login container selector and elem var
    comloginSelector = '#comlogin',
    $comlogin,

    //15 Spalten
    _15_spalten = false,
    $comloginLoggedInList,
    $comNewUser,
    $comLoginLink,
    $comUsername,
    $comLogoutLink;


    /* UTILS
    ///////////////////////////       */
    /**
     * launches a lightbox.
     * @function
     * @name lightBox
     * @param {String} content - content to be loaded in the lb
     * @param {Function} callback (optional) - Function called after the content has been loaded
     * @memberOf de.bild.community
     * @private
     */
    function lightBox(content,callback){
        if (!content) return false;
        var cb = (typeof callback === 'function') ? callback : function(){};
        $body.bildLightbox({
            'closeOnEsc' : true,
            'closeOnBodyClick' : false,
            'wrapperClass' : 'lightbox layer lb1',
            'wrapperId'     : 'sso-lightbox',
            'content' : content,
            'width' : lbWidth,
            'height' : lbHeight,
            'callback' : cb,
            'onClose' : function(){
                redirectToCommunityHome = false;
            }
        });
    };
    /**
     * closes lightbox window
     * @function
     * @name logout
     * @memberOf de.bild.sso
     * @private
     */
    function close(){
        if ($body.data('bildLightbox')) $body.data('bildLightbox').close();
    };
    /* COOKIES
    ///////////////////////////       */
    function getUserInfo() {
        var userInfo = null,
        _c = $.cookie(avComUsr);
        if (_c) {
            try {
                userInfo = $.parseJSON(decodeURIComponent(_c));
            } catch(e) {}
        }
        return userInfo;
    };
    function setUserInfo(data, callback) {
        if (data) {
            data = encodeURIComponent(data);
            // keep cookies only for the session
            $.cookie(avComUsr, data, {
                path: '/',
                domain: de.bild.env.domain
            });
        }
        if (typeof callback === 'function') callback();
    };
    function deleteUserInfo(){
        if ($.cookie(avComUsr)) {
            $.cookie(avComUsr, null);
        }   
    };
    /* sets the redirect var: if someone logs in via the link in the header, they will be redirected to the community homepage (de.bild.settings.community.urls.home) */
    function setGoHome() {
        redirectToCommunityHome = true;
    };
    /* checks if we should redirect!*/
    function getGoHome() {
        if (redirectToCommunityHome === true) {
            close();
            if (window.location.href.indexOf(de.bild.settings.community.urls.home) !== 1) {
                window.location.href = de.bild.settings.community.urls.home;
            } else {
                window.location.reload();
            }
            
            
        } else {
            return false;
        }
        
    };
    function isFbUser() {
        var userInfo = getUserInfo();
        return userInfo.isFbUser || false;
    };
    function isLoggedIn() {
        var isLoggedIn = false;
        if ($.cookie(loggedInCookie) && parseInt($.cookie(loggedInCookie)) === 1) {
            isLoggedIn = true;
        } 
        return isLoggedIn;
    };
    /* SETUP EVENTS
    ///////////////////////////       */
    /**
     * SSO events on BILD.de
     * @function
     * @name setupEvents
     * @memberOf de.bild.sso
     * @private
     */
    function setupEvents(){  

        if (_15_spalten === true) {

            $comNewUser.on('click', function(e){
                e.preventDefault();
                register();
            });

            $comLoginLink.on('click', function(e){
                e.preventDefault();
                login({'goHome':true});
            });

            $comLogoutLink.on('click', function(e){
                e.preventDefault();
                logout();
            });


        }

        de.lib.live($contentWrapper, 'a.login-lightbox, form.commentlogin input.btn-login', 'click', function(e){
            e.preventDefault();
            login();
        });

        de.lib.live($contentWrapper, 'a.com-fb-login, a.com-fb-login-button', 'click', function(e){
            e.preventDefault();
            var fbLoginWindow = window.open(de.bild.settings.community.urls.ssoFBLogin, 'fbLoginWindow', 'width='+lbWidth+',height='+lbHeight+',resizable=yes');
        });
       
        de.lib.live($contentWrapper, 'a.com-fb-add', 'click', function(e){
            e.preventDefault();
            var fbLoginWindow = window.open(de.bild.settings.community.urls.ssoFBAdd, 'fbLoginWindow', 'width='+lbWidth+',height='+lbHeight+',resizable=yes');
        }); 

        de.lib.live($contentWrapper, 'a.com-register', 'click', function(e){
            e.preventDefault();
            register();
        });
        
    };
    
    
    /* CALLBACKS
    ///////////////////////////       */
    /**
     * this function will be called after someones logs in.
     * @function
     * @name gatewayDefaultCallback
     * @memberOf de.bild.sso
     * @param {Object} data {'isLoggedIn' : true, 'userName' : '', 'isFbUser' : true}
     * @param {Bool} refresh
     * @private
     */
    function gatewayDefaultCallback(data, refresh) {
        if (data && data.isLoggedIn === true) {
                // set cookie here
                var jsonString = '{"isLoggedIn" : '+data.isLoggedIn+', "userName": "'+data.userName+'",  "isFbUser" :'+data.isFbUser+'}';
                // set the cookie
                var cb;
                if (!refresh) {
                    cb = function(){
                        renderUserBar(true);
                    };  
                } else {
                    cb = function(){
                        window.location.reload();
                    };
                }   
                setUserInfo(jsonString, function(){
                    cb();
                });
        }
    };  
    /**
     * this function will be called if someone lands on the page and been previously logged in. We have to check with the SSO if their session is still open
     * @function
     * @name gatewayAutoLoginCallback
     * @memberOf de.bild.sso
     * @param {Object} data 
     * @private
     */
    function gatewayAutoLoginCallback(data) {
        $.ajax(de.bild.settings.community.urls.ssoIsLoggedIn, {
            dataType: 'json',
            cache : true
        }).done(function(data) {
             // remove iframe
            $('#'+ssoIframeId).remove(); 
            if(data.isLoggedIn === true){
                window.location.reload();
            } else {
                $.cookie(avKeepUsr, null);
                deleteUserInfo();
            } 
        });
    };

    /* ACTIONS
    ///////////////////////////       */
     /**
     * always called on page refresh to check one's status with the SSO
     * @function
     * @name getStatus
     * @memberOf de.bild.sso
     * @private
     */
     function getStatus(){
        /* if the user wants to stay logged in , but the session isn't initiated yet ... */
        if ($.cookie(avKeepUsr) && $.cookie(avComUsr) == null) {
            $.ajax(de.bild.settings.community.urls.ssoLoginGateway, {
                dataType: 'json',
                cache : true,
                    data: {
                     gatewayCallback: 'de.bild.sso.gatewayAutoLoginCallback'
                    }           
            }).done(function(data) {
                    if(data && data.loginGatewayUrl && data.rememberCheck){
                        var url = data.loginGatewayUrl+encodeURIComponent(data.rememberCheck+window.location.href);
                        // dynamically generate iframe to check stay loggedin state so that we don't have to refresh the page twice
                        $body.append('<iframe id="'+ssoIframeId+'" src="'+url+'" style="position:absolute;height:0;width:0;border:0;" frameborder="0" onload="de.bild.sso.gatewayAutoLoginCallback()" />');
                    }   
              });
        } 
    };   
    /**
     * modfies nav depending on logged in / logged out status
     * @function
     * @name renderUserBar
     * @memberOf de.bild.sso
     * @param {Bool} whether this function is called as a result of an server action 
     * @private
     */
    function renderUserBar(calledByServer){
        if ($comlogin && $comlogin.length === 0) {
            $comlogin = $(comloginSelector);
        }
        calledByServer = calledByServer || false;
        if (isLoggedIn()) {
            renderUserBarLoggedIn(calledByServer);
        } else {
            renderUserBarLoggedOut(calledByServer);
        }
    };
    /**
     * modfies nav when logged in
     * @function
     * @name renderUserBarLoggedIn
     * @memberOf de.bild.sso
     * @param {Bool} whether this function is called as a result of an server action 
     * @private
     */
    function renderUserBarLoggedIn(calledByServer) {
        var getCookieInfo = getUserInfo();

        if ($comlogin && $comlogin.length) {
            calledByServer = calledByServer || false;
            if (getCookieInfo) {
                var userName = getCookieInfo.userName || de.bild.settings.community.lang.anonUser,
                userPicSrc = getCookieInfo.profileImage || de.bild.settings.community.urls.anonProfileImage,
                cssClass = isFbUser() ? 'fbConnect' : '';

                if (_15_spalten === true) {
                    $comlogin.addClass('logged-in')
                    $comloginLoggedInList.show();
                    $comUsername.html(templates.userStrap.replace('%SRC%',userPicSrc).replace(/%NAME%/g, userName));
                } else {
                    var html = templates.loggedin.replace('%CLASS%',cssClass).replace('%NAME%', userName);
                    $comlogin.html(html);
                }

                /* change on the profile page too but only if it is your page
                    this is generally used after an SSO gateway callback
                */
                 
                 if ($('#aboutyou').length > 0 && calledByServer === true) {
                    $('div.combox-profile h3 > a').text(userName);
                 }
                 
            } else {

                if (_15_spalten === true) {
                    $comlogin.addClass('logged-in')
                    $comloginLoggedInList.show();
                    $comUsername.html(templates.userStrap.replace('%SRC%',de.bild.settings.community.urls.anonProfileImage).replace(/%NAME%/g, de.bild.settings.community.lang.anonUser));
                } else {
                    $comlogin.html(templates.loggedinNoData);
                }

            }
        } 

        isUserBarOn = true;
    };
    /**
     * modfies nav when logged out
     * @function
     * @name renderUserBarLoggedOut
     * @memberOf de.bild.sso
     * @private
     */
    function renderUserBarLoggedOut() {
        if ($comlogin && $comlogin.length) {
          
                if (_15_spalten === true) {
                    $comloginLoggedInList.hide();
                    $comlogin.removeClass('logged-in');
                } else {
                    $comlogin.html(templates.loggedout);
                }

        } 
        isUserBarOn = false;
    };
    /**
     * opens register window
     * @function
     * @name register
     * @memberOf de.bild.sso
     * @private
     */
    function register(){
        // are we already logged in for some reason?
        if ($.cookie(avComUsr) && isLoggedIn()) {
            window.location.reload();
            return;
        }
        $.ajax(de.bild.settings.community.urls.ssoRegister, {
            dataType: 'json',
            cache : true
        }).done(function(data) {
            if (data && data.html && !isLoggedIn()) {
                lightBox(data.html);
            } else {
                window.location.reload();
            }
        });
    };
    /**
     * opens login window
     * @function
     * @name login
     * @memberOf de.bild.sso
     * @param {object} data this is a general and optional data object that we pass to the login function
     * @private
     */
    function login(data){
        

        data = data || {};

        /* are we already logged in for some reason?*/
        if ($.cookie(avComUsr) && isLoggedIn()) {
            window.location.reload();
            return;
        }
        $.ajax(de.bild.settings.community.urls.ssoLoginLightBox, {
            dataType: 'json',
            cache : true
        }).done(function(data) {
            if (data && data.html && !isLoggedIn()) {
                lightBox(data.html);
            } else {
                window.location.reload();
            }
        }).fail(function(xhr, textStatus) {
            if (xhr.status === 302) {
                window.location.href = xhr.getResponseHeader('Location');
            }
        });

        /* here we set the session cookie to tell the appage iframe to redirect to community homepage from header */
        if (data.goHome) {
            setGoHome();
        }

        return false;
    };
    /**
     * Log user in with FB
     * @function
     * @name login
     * @memberOf de.bild.sso
     * @private
     */
    function fblogin(){
        if (isLoggedIn()) {
            window.location.reload();
        }
        
        $.ajax(de.bild.settings.community.urls.ssoFBLogin, {
            dataType: 'json',
            cache : true
        }).done(function(data) {        	
            if (data && data.html && !isLoggedIn()) {
                lightBox(data.html);
            } else {
                window.location.reload();
            }
        }).fail(function(xhr, textStatus) {
            if (xhr.status === 302) {
                window.location.href = xhr.getResponseHeader('Location')
            }
        });
        return false;
    };
    /**
     * logs out
     * @function
     * @name logout
     * @memberOf de.bild.sso
     * @private
     */
    function logout(){
        deleteUserInfo();
        setTimeout(function(){
            window.location.href = de.bild.settings.community.urls.ssoLogout;
        },500);
        return false;
    };
    /**
     *
     * @function
     * @name init
     * @memberOf de.bild.sso
     * @private
     */
    function init(){
        
        $body = $('body');
        $contentWrapper = $('#outerWrapper');
        
        // new header
        $comlogin = $(comloginSelector);

        //15 Spalten
        $comloginLoggedInList = $comlogin.children('ul');

        if ($comloginLoggedInList.length) {
            _15_spalten = true;
            $comNewUser = $('#comNewUser');
            $comLoginLink = $('#comLoginLink');
            $comUsername = $('#comUsername');
            $comUsername.attr('href', de.bild.settings.community.urls.profilePage);
            $comLogoutLink = $('#comLogoutLink');
        }

        renderUserBar();

        //getStatus();

        setupEvents();

        return true;
    };

    //public methods
    return {
        'init' : function(){
            init();
            return this;
        },
        'login' : function(data){
            data = data || {};
            login(data);
            return this;
        },
        'logout' : function(){
            logout();
            return this;
        },
        'register' : function(){
            register();
            return this;
        },
        'close' : function(){
            close();
            return this;
        },
        'renderUserBar' : function(){
            renderUserBar();
            return this;
        },
        'isLoggedIn' : function(){
            return isLoggedIn();
        },
        'isUserBarOn' : function(){
            return isUserBarOn;
        },
        'gatewayDefaultCallback' : function(data, refresh){
            refresh = (refresh === false) ? false : true;
            gatewayDefaultCallback(data, refresh);
            return this;
        },
        'gatewayAutoLoginCallback' : function(data){
            gatewayAutoLoginCallback(data);
            return this;
        },
        'getUserInfo' : function(){
            return getUserInfo();
        },
        'issetRedirect' : function(){
            return getGoHome();
        }
    }

})(jQuery);
/*de.bild.sso:25798984.1*/


/*de.bild.social:22104236.72*/

var de = de || {};
de.bild = de.bild || {};
/**
* @function
* de.bild.social - Facebookfunktionalitaeten und Variablen, SDK, Buttons
* @name social
* @memberOf de.bild
* @param {object} $ jQuery Objekt
* @namespace Facebook Funktionen und Objekte
* @author <a href="mailto:rdodd@bild.de">Ramon Dodd</a>
* @dependencies ['jQuery', 'de.bild.sso', de.bild.settings']
*/
de.bild.social = (function($){

    var bodyTag = null,
    $body,
    insertScript = function(id,url){
        var d = document,
        s = 'script',
        js,
        fjs=d.getElementsByTagName(s)[0];

        if(!d.getElementById(id)) {
            js=d.createElement(s);
            js.id=id;
            js.src=url;
            fjs.parentNode.insertBefore(js,fjs);
        }
    },
    facebook = {
        like: 'like',
        recommend: 'recommend',
        lang: function(){
            return 'de_DE';
        },
        likeButtonClass: 'fb-like-small',
        /*
        fbButtonFrame : function(data){
            //{'url' : '', 'type' : '', 'layout' : ''}
            var url = data.url ? data.url : window.location.href,
            type = data.type ? data.type : 'like',
            layout = data.layout ?  data.layout :  'button_count';
            cssClass = data.cssClass ? data.cssClass : 'fb-like-small';
            return '<iframe  class="'+cssClass+'" src="' + document.location.protocol + '//www.facebook.com/plugins/like.php?href=' + url + '&amp;layout=' + layout + '&amp;show_faces=false&amp;width=450&amp;height=21&amp;action=' + type + '&amp;font&amp;colorscheme=light" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe>';
        },
        */
        buttonHTML: '<iframe class="%CLASS%" src="' + document.location.protocol + '//www.facebook.com/plugins/like.php?href=%URL%&amp;layout=button_count&amp;show_faces=false&amp;width=%WIDTH%&amp;height=%HEIGHT%&amp;action=%ACTION%&amp;colorscheme=light&amp;font=arial&amp;locale=%LANG%" scrolling="no" frameborder="0" allowTransparency="true" seamless="seamless"></iframe>',
        likeXFBML: '',
        sendXFBML: '',
        loginXFBML : '<fb:login-button max-rows="1" width="%WIDTH%" show-faces="false"></fb:login-button>',
        isLoggedIn : false,
        publishStream : false,
        userPhotos : false,
        getLoginStatus : function(){
            return false;
        },
        getPublishStatus : function(){
            return false;
        },
        getUserPhotosStatus : function(){
           return false;
        },
        initLogin : function (cb,opts){},
        /**
     * getLikeButton
     * @function
     * @name getLikeButton
     * @memberOf facebook
     * @param {string} url optional url
     * @private
     * @return {string} HTML fuer Facebook Like button
     */
        getLikeButton: function(data){
            var url = data.url ? data.url : getEncodedURL(),
            w = data.width ? data.width : '450',
            h = data.height ? data.height : '21';
            return facebook.buttonHTML.replace('%ACTION%', facebook.like).replace('%URL%', url).replace('%CLASS%', facebook.likeButtonClass).replace('%HEIGHT%', h).replace('%WIDTH%', w).replace('%LANG%', facebook.lang());
        },
         /**
         * getKlubUrlId - parses the doc id out of the url string (Expect: http://www.bild.de/sport/fussball/michael-rensing/fc-zahlt-200000-euro-an-leverkusen-25914172.bild.html)
         * @function
         * @memberOf facebook
         * @name getKlubUrlId
         * @private
         * @return {string} facebook club url + CMS doc id
         */
        getKlubUrlId : function(){
            var url = getEncodedURL(),
            results = url.match(/(\d+)(\.bild\.html){1,1}/g),
            arr = results[0].split('.');
            return 'https://facebook.meinklub.bild.de/news/article/' + arr[0];
        },
     /**
     * getRecommendButton
     * @function
     * @memberOf facebook
     * @name getRecommendButton
     * @param {string} url optional url
     * @private
     * @return {string} HTML fuer Facebook Recommend button
     */
        getRecommendButton: function(data){
            var url = data.url ? data.url : getEncodedURL(),
            w = data.width ? data.width : '450',
            h = data.height ? data.height : '21';
            return facebook.buttonHTML.replace('%ACTION%', facebook.recommend).replace('%URL%', url).replace('%CLASS%', facebook.likeButtonClass).replace('%HEIGHT%', h).replace('%WIDTH%', w).replace('%LANG%', facebook.lang());
        },
     /**
     * getLoginButton
     * @function
     * @memberOf facebook
     * @name getLoginButton
     * @param {string} width optional width default = 200
     * @private
     * @return {string} HTML fuer Facebook Login button
     */
        getLoginButton: function(width){
            width = width || '200';
            return facebook.loginXFBML.replace('%WIDTH%', width);
        },
        /**
     * insertLoginButton
     * @function
     * @memberOf facebook
     * @name insertLoginButton
     * @param {string} id id of element in which login button goes
     * @private
     */
        insertLoginButton: function(id){
            var el = document.getElementById(id);
            if (el) {
               el.innerHTML = facebook.getLoginButton(); 
            }
        },

        /**
     * postCommentToFeed - tests permissions in order to post a comment to facebook
     * @function
     * @memberOf facebook
     * @name postCommentToFeed
     * @param {string} commenttext required the text of the comment to post
     * @private
     */
        postCommentToFeed: function(params){
            if(facebook.publishStream !== true){
                facebook.initLogin(function(){

                }, {
                    scope: 'publish_stream'
                } );
            } 
            return facebook.publishStream;
        },
        /**
     * postPhoto - post a photo to facebook
     * @function
     * @memberOf facebook
     * @name postPhoto
     * @param {string} params - the title of image, filepath, and ugcid
     * @private
     */
        postPhoto: function(params){
            $.ajax({
                'url': de.bild.settings.community.urls.fbPostPhoto,
                'data': params,
                'type': 'post',
                'timeout' : 10000
            })
            .fail(function(jqXHR, textStatus){
                if (textStatus === 'timeout') {
                /*de.bild.social.postingPhototoFB(params);*/
                }
            });
            return true;
        },
        /**
     * postVideo - post a video to facebook
     * @function
     * @memberOf facebook
     * @name postVideo
     * @param {string} params - the title of video, filepath, and ugcid
     * @private
     */
        postVideo: function(params){
            /* we checked perms when the box was checked
            logged in and added perms, do AJAX*/
            FB.getLoginStatus(function(response) {
                if (response.authResponse) {
                    $.ajax({
                        'url': de.bild.settings.community.urls.fbPostVideo,
                        'data': params,
                        'type': 'post'
                    });
                }else{
                /* no login, just skip the upload*/
                }
            });
            return true;
        },

        /**
     * loadSDK - Facebook JavascriptSDK anfuegen
     * @function
     * @memberOf de.bild.facebook
     * @name loadSDK
     * @private
     * @param {function} callback - Was zu tun, nachdem alles geladen ist
     */
        loadSDK : function(callback){
            window.fbAsyncInit = function(){

                FB.init({
                    appId: de.bild.settings.facebookAppId,
                    /*status: true,*/
                    cookie: true,
                    xfbml: true,
                    oauth : true 
                });



                /*overwrite getLoginStatus*/
                facebook.getLoginStatus = function(){
                    FB.getLoginStatus(function(response){
                        if (!response.authResponse) {
                            facebook.isLoggedIn = false;
                        } else {
                            facebook.isLoggedIn = true;
                        }
                    });
                    return facebook.isLoggedIn;
                };



                /*check status right away*/
                FB.getLoginStatus(function(response){
                   
                    /*
                        auto login for when a user is logged into face book
                        if the user is not connected we do nothing
                    */
                    var fblogin;
                    if (response.status !== 'connected') {
                        fblogin = false;
                    }
         
                    if (fblogin !== false && de.bild.sso.isLoggedIn() === false) {
                        var facebookLoginId = 'facebookAutoLogin';
                        // Auto Login disabled
                        //$body.append('<iframe id="'+facebookLoginId+'" src="'+de.bild.settings.community.urls.ssoFBIframe+'" style="position:absolute;height:0;width:0;border:0;left:-9999px;" frameborder="0" />');
                    }
         

                    if (!response.authResponse) {

                    } else {
                        FB.api('/me/permissions', function(response) {
                            if(response.data && response.data[0]['publish_stream'] != 1){
                                facebook.publishStream = false;
                            }else{
                                facebook.publishStream = true;
                            }

                            if(response.data && response.data[0]['user_photos'] != 1){
                                facebook.userPhotos = false;
                            }else{
                                facebook.userPhotos = true;
                            }

                        });
                        /* we check if the user if logged into facebook
                        and then trigger an event attached to the body (in de.bild.social.init())*/
                        $body.trigger('facebookLoginStatus');
                    }

                });


                facebook.initLogin = function(cb,opts){
                    FB.login(cb,opts);
                };

                FB.Event.subscribe('auth.login', function(response) {
                    if (!response.authResponse) {
                        facebook.isLoggedIn = false;
                    } else {
                        facebook.isLoggedIn = true;
                    }
                });


            };

            /* FB Javaskript einbinden*/
            var container = document.createElement('div');
            container.setAttribute('id', 'fb-root');
            var e = document.createElement('script');
            e.async = true;
            e.src = document.location.protocol + '//connect.facebook.net/' + facebook.lang() + '/all.js';
            container.appendChild(e);
            if (bodyTag)  bodyTag.appendChild(container);
            if (typeof callback === 'function')  callback();

        }
    },

    google = {
        'widgetURL' : 'https://apis.google.com/js/plusone.js',
         'buttonHTML' : '<g:plusone size="%SIZE%" annotation="%ANNOTATION%"></g:plusone>',
         'badgeHTML' : '<g:plus href="https://plus.google.com/%PROFILEID%" rel="publisher" height="%HEIGHT%" width="%WIDTH%"  theme="light"></g:plus>',
         gbuttonFrame : '<iframe src="https://plusone.google.com/u/0/_/+1/fastbutton?url=%URL%&amp;size=%SIZE%&amp;count=true&amp;lang=de" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:90px; height:20px;" align="left"></iframe>',
         
         loadGoogleScript : function(){  
            window.___gcfg = {lang: 'de'};
            insertScript('bild-google-plus-script',google.widgetURL);
         },
        /* 
           button attrs: 
           size: small, medium,standard,tall
           annotation: none, bubble, inline 
           href: URL to +1
        */
         getPlusOneButton : function(data){
            var url = data.url ? data.url : getEncodedURL(),
            size = data.size ? data.size : 'medium',
            annotation = data.annotation ? data.annotation : 'bubble';
            return google.gbuttonFrame.replace('%URL%', url).replace('%SIZE%', size);

         }
    },


    twitter = {
        'widgetURL' : '//platform.twitter.com/widgets.js',
        'buttonHTML' : '<a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="BILD" data-related="%RELATED%">Tweet</a>',
        'buttonFollowHTML' : '<a href="https://twitter.com/%USER%" class="twitter-follow-button" data-show-count="true" data-lang="de">@%USER% folgen</a>',

        'getTwitterFollowButton' : function(user){
            return twitter.buttonFollowHTML.replace(/%USER%/g, user);
        },
        'renderButton' : function(id, related){
            related = (!related || related === '') ? 'bild' : related;
            var $elem = $('#'+id);
            if ($elem.length) {
                $elem.append(twitter.buttonHTML.replace('%RELATED%', related));
                
            }

        }
    };


    /*
        The social block is under the article in the left col and the channel block is in the right hand column.
        Buttons are loaded on window.load.
        Social block appears under the article
        Channel in the side bar
    */ 

    function setupSocialBlock(){

        var $socialBlock = $('div.socialBlock'),
        $channelBlock = $('#smbChannelBlock');


        if ($socialBlock.length) {  

             contributeLightBox(); 
            // bind only once
            $body.one('commentEventsSetup', function(e, data){
                if (data.ugcid) {
                    /*
                        this is the html we expect
                       <li><a href="#" class="add-comment">Kommentar</a></li>
                    */
                    $socialBlock.find('a.add-comment').attr('href', '#' + data.ugcid).parent('li').removeClass('hidden');
                }
            });

        }
            
        if ($channelBlock.length || $socialBlock.length) {

       
            $(window).load( function() {

                setTimeout(function(){

                    if ($socialBlock.length) {   
                        
                        /*$('#socialBlockGPlus').append(google.getPlusOneButton({'size' : 'medium'}));*/

                        google.loadGoogleScript();

                        twitter.renderButton('socialBlockTwitter');

                        var $fb = $('#socialBlockFb'),
                        url = ($fb.hasClass('meinklub')) ? facebook.getKlubUrlId() : getEncodedURL();



                        if ($fb.length && $fb.hasClass('smb-recommend')) {
                            $fb.append(facebook.getRecommendButton({
                                'url' : url,
                                'width' : '145',
                                'height' : '24'
                            }));  
                        } else {
                            $fb.append(facebook.getLikeButton({
                                'url' : url,
                                'width' : '145',
                                'height' : '24'
                            }));    
                        }      

                        
                    }     
                    if ($channelBlock.length) {

                        var $fbc_a = $('#smbChannelFbCont a'),
                        fbc_a_link = $fbc_a.attr('href');

                        $fbc_a.replaceWith(facebook.getLikeButton({'url':fbc_a_link})); 
                        
                        var $twc_a = $('#smbChannelTwCont a'),
                        twc_a_link = $twc_a.attr('href').split('#!/')[1];

                        $('#smbChannelTwCont a').replaceWith(twitter.getTwitterFollowButton(twc_a_link));
                        
                        google.loadGoogleScript();
             
                    }

                    insertScript('twitter-wjs',twitter.widgetURL);

                },500);
            });
        

        }




    };
  


	/**
	 * contributeLightBox
	 * @function
	 * @name contributeLightBox
	 * @private
	 * @memberOf de.bild.social
	 */
	function contributeLightBox() {
		var $contributeLink = $('div.socialBlock a.add-contribute');
		if($contributeLink.length) {

			$contributeLink.click(function(e) {
				/* this is for stage which needs the servlet. Shame really */
				var _href = (document.domain.indexOf('bild.de') !== -1) ? '/sendCorrectionForm' : '/servlet/sendCorrectionForm', posturl = _href + document.location.pathname, geturl = _href + '/-2952512,Url=' + document.location.pathname;

				/* this is for live which needs the view param. Shame really */
				geturl = geturl.replace('.bild.html', ',view=sendCorrectionForm.bild.html');

				e.preventDefault();

				de.bild.httpFist.load({
					'url' : geturl,
					'callback' : function(response) {
						$body.bildLightbox({
							'wrapperClass' : 'lightbox layer lb1 correct',
							'wrapperId' : 'contributeLightbox',
							'content' : response,
							'callback' : function() {
								/* set form*/
								var $innerBox = $('#contributeLightbox div.innerBox');

								de.lib.live($('#contributeLightbox'), 'form#formAddContribute', 'submit', function(e) {
									e.preventDefault();
									var $this = $(this), params = $this.serialize();
									params += '&url=' + encodeURI(posturl);
									$.ajax({
										'url' : $this.attr('action'),
										'dataType' : 'html',
										'data' : params,
										'type' : 'POST',
										'timeout' : 5000
									}).done(function(response) {
										$innerBox.html(response);
										var $form = $('form#hint-confirm');
										$form.attr('action', '');
										if($form.length) {
											$form.submit(function(e) {
												e.preventDefault();
												if($body.data('bildLightbox')) {
													$body.data('bildLightbox').close();
												}
											});
										}
									}).fail(function() {
										if($body.data('bildLightbox')) {
											$body.data('bildLightbox').close();
										}
									});
								});
							}
						});
					}
				})
				return false;
			});
		}
	};


   
    function init(){
        bodyTag = document.getElementsByTagName('body')[0];
        $body = $(bodyTag);
        /* bind only once*/
        $body.one('facebookLoginStatus', function(){
            de.bild.sso.renderUserBar();
        });
        facebook.loadSDK();
        setupSocialBlock();
        return true;
    };
    /**
     * getEncodedURL
     * @function
     * @name getEncodedURL
     * @private
     * @return {string} aktuelle URL-Adresse
     * @memberOf de.bild.social
     */
    function getEncodedURL(){
        return encodeURIComponent(document.location.href);
    };

    /* oeffentliches Interface*/
    return {
        /* facebook*/
        'getLikeButton' : function(data){
            data = data || {};
            return facebook.getLikeButton(data);
        },
        'getRecommendButton' : function(data){
            data = data || {};
            return facebook.getRecommendButton(url, data);
        },
        'getLoginButton' : function(width){
            return facebook.getLoginButton(width);
        },
        'insertLoginButton' : function(id) {
            if (id) {
                facebook.insertLoginButton(id);
            }
        },
        'getActivityFeed' : function() {
            return facebook.getActivityFeed();
        },

        'loginToFB' : function(cb,opts){
            cb = cb || function(){};
            opts = opts || {};
            facebook.initLogin(cb,opts);
            return this;
        },
        'loggedIntoFB' : function(){
            return facebook.getLoginStatus();
        },
        'postingCommentToFeed' : function(commenttext){
            facebook.postCommentToFeed(commenttext);
            return this;
        },
        'postingPhototoFB' : function(params){
            facebook.postPhoto(params);
            return this;
        },
        'postingVideotoFB' : function(params){
            facebook.postVideo(params);
            return this;
        },
        'userPhotos' : function(){
            return facebook.userPhotos;
        },
        'publishStream' : function(){
            return facebook.publishStream;
        },
        'setupSocialBlock' : function(){
            return setupSocialBlock();
        },

        /*  google */
        'getPlusOneButton' : function(data){
            data = data || {};
            return google.getPlusOneButton(data);
        },

        /*twitter*/
        'renderTwitterButton' : function(id, related){
            if (id) {
                related = related || '';
                twitter.renderButton(id, related);
            }
        },

        'getTwitterFollowButton' : function(user){
            if (user) {
               return twitter.getTwitterFollowButton(user);
            }
        },
        'init' : function(){
            return init();
        }
    };

}(jQuery));

/*de.bild.social:25798986.1*/


/*de.bild.community:22104118.40*/

var de = de || {};
de.bild = de.bild || {};
/**
* de.bild.community
* @name community
* @memberOf de.bild
* @param {object} $ JQuery
* @function
* @returns {Function} init - initalises all community functionality
* @returns {Object} user - user info
* @returns {Object} vars - public variables
* @namespace contains and initates all community related functions
* @dependencies ['de.bild.settings', 'de.bild.sso', 'de.bild.social', 'de.bild.httpFist', de.bild.utils, 'jQuery.cookie', 'jQuery.bildLightbox', 'jQuery.bildProgressBar']
*/
de.bild.community = (function($){
    /**
     * settings including images paths and community privates
     * @object
     * @name settings
     * @memberOf de.bild.community
     * @private
     */
    var settings = {
        'shrinkCommentLength' : 250,
        'startCheckCommentsDelay' : 3000,
        'fadeDelay' : 3000,
        'fadeSpeed' : 400,
        'layerDelay' : 500,
        'minCharacktersTyped' : 2,
        // classes
        'ajaxClass' : 'data-ajax',
        'ajaxClassReplace' : 'data-ajax-replace',
        'ajaxClassLightBox' : 'data-ajax-lb',
        'ajaxClassLoad' : 'data-ajax-load',
        //storage name for anon likes
        'anonLikes' : 'commAnonLikes', 
        // this is a manual override for live Comments in case we need to switch it on/off fast!
        'allowLiveComments' : false,
        'comCenterElems' :5,
        'comCenterSlideDelay' :4000 
    },
    /**
     * these values can be updates by the public function de.bild.community.update({});
     * @object
     * @name variables
     * @memberOf de.bild.community
     * @private
     */
    variables  = {
        'totalComments' : 0,
        'checkForNewCommentsDelay' : 10000,
        'commentRequestMaximum' : 10,
        'liveCommentsOn' : false,
        'oldestCommentCommitTimeSeenInBrowser' : 0,
        'ugcid' : '',
        'maxCommentLength': 1000,
        'uploadProgressSid' : '',
        'profileOwnerEncryptedUserId' : '',
        'ownEncryptedUserId':de.bild.sso.getUserInfo()!=null ?de.bild.sso.getUserInfo().encryptedUserId:'',
        'profileViewToken' : '',
        'defollow': de.bild.settings.community.lang.defollow,
        'follow':de.bild.settings.community.lang.following
    },
    // html templates
    templates = {
        moreHTML : '... <a class="more" href="#">' + de.bild.settings.community.lang.more + '</a>',
        threadedCommentItem : '<li class="threaded-comment-area">%CONTENT%</li>',
        threadedCommentList : '<ol class="threaded-comment-list"><li class="threaded-comment-area">%CONTENT%</li></ol>',
        loadingLayer : '<div id="loadingLayer"><img src="%IMG%"/></div>',
        message : '<p class="%CLASS%">%CONTENT%</p>',
        lbMessage : '<div class="section"><div class="header"><h2>%HEADING%</h2></div><form class="cform"><fieldset><p class="%CLASS%">%CONTENT%</p></fieldset></form></div>',
        lbMessageWithButton : '<div class="section"><div class="header"><h2>%HEADING%</h2></div><form class="cform safetyquery"><fieldset><p>%CONTENT%</p><div class="column clearfix"><div class="cbutton"><input type="submit" value="%BUTTON%" class="btn-submit" onclick="de.bild.community.closeLightBox(); return false;"></div></div></fieldset></form></div>',
        spanEl : '<span>%CONTENT%</span>',
        profileSeparator : ' • ',
        linkNewWindow : '<a href="%URL%" rel="external" target="_blank" title="'+de.bild.settings.community.lang.newWindow+'">%CONTENT%</a>',
        genericLink : '<a href="%URL%" class="%CLASS%">%CONTENT%</a>',
        bcard : '<div class="card loading" id="userProfileCard"></div>'

    },
    // cache DOM elements
    $contentWrapper,
    $doc,
    $body,

    //click handler var so we can use it across private functions
    docClickHandler,
    //for mobile devices,
    isMobile = de.bild.utils.isMobile(),
    mouseEnterEvent = (isMobile === true) ? 'touchstart' : 'mouseenter';

    /* ================================================================================================================ START COMMON UTILS */
    /**
     * public function to update editable values in the variables object
     * the variables must already exist and be of the same type as the incoming data
     * @function
     * @name updateSettings
     * @memberOf de.bild.community
     * @private
     * @param {Object} $elem jQuery Object
     * @returns {Object} variables
     */
    function updateVars(data){
        if (data) {
            // intialise runtime functions
            for (var key in data) {
                // the variable must already exist and be of the same type
                if (variables.hasOwnProperty(key) && typeof variables[key] === typeof data[key]) {
                    variables[key] = data[key];
                }
            }
        }
        return variables;
    };
    /**
     * helper function to launch lightbox
     * @function
     * @name showLightBox
     * @param {Object} params normal lightbox params (see jquery.lightbox.js)
     * @memberOf de.bild.community
     * @private
     */
    function showLightBox(params){
        if (params) {
            params.wrapperClass = 'lightbox layer lb1';
            return $body.bildLightbox(params);
        }
    }; 
    /**
     * closes window
     * @function
     * @name close
     * @param {objeckt} data delay:{number} ms callback:{function}
     * @memberOf de.bild.community
     * @private
     */
    function closeLightBox(data){
        var params = data || {},
        delay = params.delay ? params.delay : 0;
        setTimeout(function(){
            if ($body.data('bildLightbox')) {
                $body.data('bildLightbox').close();
            }
            if (typeof params.callback == 'function') params.callback();
        }, delay);
    };
    /**
     * fades object after settings.fadeDelay, then removes it from the DOM
     * @function
     * @name delayToFade
     * @memberOf de.bild.community
     * @param {$Object} $elem - jQuery object
     * @param {Function} callback- optional callback
     * @private
     */
    function delayToFade($elem, fadeDelay, callback){
        fadeDelay = fadeDelay || settings.fadeDelay;
        setTimeout(function(){
            $elem.fadeOut(settings.fadeSpeed, function(){
                $elem.remove();
                if (typeof callback === 'function') {
                    callback();
                }
            });
        }, fadeDelay);
    };

    /**
     * will loop through all elements with a class of .required
     * null values trigger the error
     * @function
     * @name validateForm
     * @param {$Object} $formElem Form element as a jquery object
     * @returns {Bool}
     * @memberOf de.bild.community
     * @private
     */
    function validateForm($formElem){
        var okToSubmit = true;
        if ($formElem.length) {
            $formElem.find('span.error').hide();
            var $requiredEls = $formElem.find('.required');
            $requiredEls.each(function(){
                var $this = $(this),
                thisVal = $this.val();
                if ($.trim(thisVal) == '' || thisVal == $this.attr('title') || ($this.attr('type') == 'checkbox' && !$this.attr('checked'))) {
                    $formElem.find('span.'+$this.attr('name')).show();
                    $this.parents('div').first().addClass('error');
                    okToSubmit = false;
                }
            });
        }
        return okToSubmit;
    };

    /**
     * from R2 onwards: checks requests for the presence of a json object and failure param
     * @function
     * @name screenForResponseErrors
     * @param {string} resp Response from an ajax call
     * @returns {Bool}
     * @memberOf de.bild.community
     * @private
     */
    function screenForResponseErrors(response){
        /*
            for this piece of code, i am sorry. we receive various responses (html and json) and the headers are not correctly set
            so we have to attempt to parse the response as json

        */
        var respObj;

            try {
                // normal json?
                if (response.status.length) {
                    respObj = response;
                } else {
                    respObj = $.parseJSON(response);
                }
               
            } catch(e) {
                respObj = null;
            }

        if (respObj !== null && respObj.status && respObj.status === 'failure') {
            var html = templates.lbMessageWithButton.replace('%CONTENT%', respObj.message).replace('%HEADING%', respObj.title).replace('%BUTTON%', de.bild.settings.community.lang.closeLightbox);
            closeLightBox({
                'callback' : function(){
                    showLightBox({
                        'content' : html
                    }); 
                }
            });
            return true;
        } else {
            return false;
        }
    };

    /**
     * clears textareas in a form so that default text is not sent
     * @function
     * @name clearTextareas
     * @param {$Object} $formElem Form element as a jquery object
     * @returns {$Object}
     * @memberOf de.bild.community
     * @private
     */
    function clearTextareas($formElem){
        $formElem.find('textarea').each(function(){
            var $this = $(this);
            if ($.trim($this.val()) === $this.attr('title')) {
                $this.val('');
            }
        });
        return $formElem;
    };

    /* LOADING LAYER
    ///////////////////////////       */
    /**
     * generates a layer with a loading icon
     * @function
     * @name loadingLayer
     * @memberOf de.bild.community
     * @param {$Object} $elem - jQuery object
     * @private
     */
    function loadingLayer($elem){
        var $parent = $elem.parent(),
        halfPic = 8,
        $span,
        marginLeft,
        $loadingLayer,
        isSubComment = ($elem.hasClass('hint') && $elem.parents('ol.threaded-comment-list').length > 0),
        isContactList = $elem.parents('#user-contact-list').length>0,
        imgsrc = (isSubComment || isContactList) ? de.bild.settings.community.urls.loadingIconSmallDark : de.bild.settings.community.urls.loadingIconSmall;
        if ($parent.height() > 36 && !isContactList) {
            imgsrc = de.bild.settings.community.urls.loadingIconBig;
            halfPic = 16;
        }
        $parent.css('position', 'relative');
        $parent.append(templates.loadingLayer.replace('%IMG%', imgsrc));

        $loadingLayer = $('#loadingLayer');
        //replace CSS declarations with a class here
        $loadingLayer.css({
            position: 'absolute',
            top: '0',
            left: '0',
            bottom: '0',
            right: '0'
        });

 //ContactList = 160, subComment = 10 else $loadingLayer.width() / 2 - halfPic;
        marginLeft = isSubComment ? 10 : isContactList ? 160 :$loadingLayer.width() / 2 - halfPic;
        $img = $('img', $loadingLayer);

        $img.css({
            marginLeft: (marginLeft),
            marginTop: isContactList? 15 :($loadingLayer.height() / 2 - halfPic)
        });
        //Kommentarformular Opacity runtersetzen
        /* this whole nastiness needs CSS declarations instead of JS*/
        if (!isSubComment) {
            $parent.css('opacity', '0.5');
        } else {
            $elem.addClass('active');
        }  
    };
    /**
     * removes the loadingLayer after a successful response
     * @function
     * @name removeLoadingLayer
     * @memberOf de.bild.community
     * @param {$Object} $elem - jQuery object
     * @private
     */
    function removeLoadingLayer($elem){
        if (!$elem) {
            $elem = $('#loadingLayer');
        }
        if ($elem.length) {
            var $parent = $elem.parent();
            $parent.css({
                opacity: '1',
                position: ''
            });
            $('#loadingLayer').remove();
        }
    };
    /**
     * cross domain get request
     * @function
     * @name jsonp
     * @memberOf de.bild.community
     * @param {string} url - url
     * @param {function} callback - success callback
     * @private
     */
    function jsonp(url, callback){
        if (arguments.length === 2) {
            $.ajax({
                dataType: 'jsonp',
                type : 'GET',
                crossDomain : true,
                cache : true,
                url: url
            })
            .done(callback);
        }
    };
    /**
     * update a static count in an element on the page (beitrag counts etc)
     * @function
     * @name updateCount
     * @memberOf de.bild.community
     * @param {$object} $elem - url
     * @param {Num} inc - the number which should be added (can be negative)
     * @private
     */
    function updateCount($elem, inc){
        if ($elem.length === 0) {
            return null;
        }
        var count = parseInt($.trim($elem.text())),
        newCount;
        if (typeof count === 'number') {
            newCount = count + inc;
            if (newCount < 0) {
                newCount = 0;
            }
            $elem.text(newCount);
            return newCount;
        }

        return null;
    };

/* ================================================================================================================ END COMMON UTILS */

/* ================================================================================================================ START COMMUNITY TRACKING

    dependencies:
    de.bild.settings
    jquery
    jquery.cookie
*/

    /**
     * this function returns logged in values stored in a cookie. it's used for webtrek tracking and called in the head of the page onload
     * @function
     * @name getCustomSessionParam
     * @memberOf de.bild.community
     * @private
     */
    function getCustomSessionParam(){
        var result = '',
        lastStatusCheckTime,
        loginStatus = $.cookie('avLoginStatus');
        if (loginStatus && loginStatus !== 'false') {
            var loginStatusParams = loginStatus.split('#'),
            nowTime = new Date();
            if (loginStatusParams.length>3) {
                lastStatusCheckTime = loginStatusParams[3];
            } else {
                //status wird zum Ersten mal hier gelesen deswegen liefern wir ihn fuer Webtrekk zurueck
                result = 'logged_in';
                if (loginStatusParams.length<3) {
                    //FacebookID ist auch nicht gesetzt deswegen ein leeres 3. Param
                    loginStatusParams.push('');
                }
                //lastStatusCheckTime an der 4. Position setzen
                loginStatusParams.push(escape(nowTime.toGMTString()));
            }
            if (lastStatusCheckTime && new Date(unescape(lastStatusCheckTime)).getTime() + (1000 * 60 * 20) < nowTime.getTime()) {
                //da lastStatusCheckTime > 20 minuten ist liefern wir den status fuer Webtrekk zurueck
                result = 'logged_in';
                //lastStatusCheckTime ersetzen
                loginStatusParams.splice(3,1,escape(nowTime.toGMTString()))
            }
            var newloginStatus = '';
            for(var i=0, j=loginStatusParams.length;i < j;i++) {
                newloginStatus = newloginStatus + loginStatusParams[i];
                if(i<loginStatusParams.length-1) {
                    newloginStatus = newloginStatus + '#';
                }
            }
            $.cookie('avLoginStatus', newloginStatus, {
                path: '/'
            });
        }
        return result;
    };
    /**
     * updates the contentId of the page for webtracking
     * @function
     * @name updateContentId
     * @param {String} contentId
     * @param {String} docType
     * @memberOf de.bild.community
     * @private
     */
    function updateContentId(contentId, docType){
        if (contentId) {
            docType = docType || '';
            var cp = contentId.split('/');
            if (cp[1] == 'projektor') {
                var dtp = docType.split('/');
                if (dtp.length == 2)
                {
                    cp[2] = dtp[1];
                } else {
                    cp[2] = docType;
                }
            } else {
                cp[1] = docType;
            }
            return cp.join('/');
        }
        return false;
    };

/* ================================================================================================================ END COMMUNITY TRACKING */

/* ================================================================================================================ START COMMUNITY CENTER */
    /**
     * if User is not logged in rotate the User activities
     * @function
     * @name setupCommunityCenter
     * @memberOf de.bild.community
     * @private
     */

 function setupCommunityCenter() {
 //only if logged Out
 if(de.bild.sso.isLoggedIn())
 return false;
 //init the two Lists
 var activityList = $('.latest-usr-feed .usr-feed>ol');
 var activities = activityList.children('li');
 //if not enough elements to rotate -> return
 if(activities.length <= settings.comCenterElems)
 return false;

 var hidden = activityList.children('li:gt(' + settings.comCenterElems + ')');
 var rotateElem = activityList.parent();
 rotateElem.css('top', 0);
 activities = activities.not(hidden);
 var rotationTimer = null;

 rotateOneItem();

 /**
  * Rotationfunction
  */

 function rotateOneItem() {
 //First clear Timeout and animation
 clearTimeout(rotationTimer);
 activityList.parent().stop();

 //Only do s.th if there is no bcard active
 if($card == null) {
 //Normal rotate
 if(parseInt(rotateElem.css('top')) == 0) {
 var $elem = hidden.first();
 $elem.removeClass('hide');
 activityList.prepend($elem);
 var height = $elem.height();
 //calculate a constant speed
 var speed = height * 20;
 rotateElem.css('top', -height - 20).animate({
 'top' : 0
 }, speed, 'linear', function() {
 rotationTimer = setTimeout(rotateOneItem, settings.comCenterSlideDelay);
 });
 hidden = hidden.not(hidden.first()).add(activities.last());
 activities = activities.not(activities.last()).add($elem);
 }
 //finish the rotation
 else {
 var speed = -1 * parseInt(rotateElem.css('top')) * 15;
 rotateElem.animate({
 'top' : 0
 }, speed, 'linear', function() {
 rotationTimer = setTimeout(rotateOneItem, settings.comCenterSlideDelay);
 });
 }
 }

 }

 //Start/Stop on Hover 
 rotateElem.parent().on('mouseenter.comCenter', function() {
 $(this).data('over',true);
 clearTimeout(rotationTimer);
 activityList.parent().stop();
 }).on('mouseleave.comCenter', function() {
 $(this).data('over',false);
 rotateOneItem();
 })

 rotateElem.parent().on('autorotate.comCenter',function(){
 if($(this).data('over')==false){
 rotateOneItem();
 }
 })

 }


/* ================================================================================================================ ENDE COMMUNITY CENTER */

/* ================================================================================================================ START PROFILE PAGE */

    var $profileHead,
    $profileSettings,
    isProfileHead,
    isProfileSettings;
    /**
     * initialises events for profile functionality
     * @function
     * @name setupProfileEvents
     * @memberOf de.bild.community
     * @private
     */
    function setupProfileEvents(){

        $profileHead = $('div.profileHead');
        $profileSettings = $('div.account.profile');
        isProfileHead = $profileHead.length;
        isProfileSettings = $profileSettings.length;

        /* Profilephoto Lightbox trigger  */
        de.lib.live($contentWrapper, 'div.usrProfileImg a.profilephoto, div.profileHead a.profilephoto, table.profTable a.edit', 'click', function(e){
            e.preventDefault();
            de.bild.httpFist.load({
              'obj': this,
              'callback': function(response, $target){
                showLightBox({
                  'content': response,
                  'onClose' : function(){
                    /* if success window has class of refresh...refresh! */
                    if($body.find('#success.refresh').length){
                      /* refresh on success so we can see result of change */
                      window.location.reload();
                    }                   
                  }
                });
              }
            });
        });

        /* change name form */
        de.lib.live($contentWrapper, 'form#account-name, form#privUnlocks, form#usrProfileSocial', 'submit.change', function(e){
            e.preventDefault();
            var $this = $(this),
            $parent = $this.closest('div.segment');
            submitForm($this.find('fieldset'),
             {
                'url' : $this.attr('action'),
                'params' : $this.serialize(),
                'callback' : function(response, type){
                    if (type === 'error') {
                    } else {
                        $parent.replaceWith(response);
                    }
                    $this.css('opacity', 1);
                }
             });
        });
        /* change name form reset */
        de.lib.live($contentWrapper, 'form#account-name, form#usrProfile, form#privUnlocks, form#usrProfileSocial', 'reset', function(e){
            e.preventDefault();
            var $this = $(this),
            $sibling = $this.prev('a.toggle');
            if ($sibling.length ) {
                $sibling.trigger('click');
            }
        });

       /*delete profilephoto link inside lightbox (global so it works in lightbox) */
        de.lib.live($body, 'form#profilePic a.delimage', 'click', function(e){
            e.preventDefault();
            $.ajax({
                url: de.bild.settings.community.urls.deleteprofilephoto
            })
            .done(function( data ) {
                /* refresh on success so we can see new photo */
                window.location.reload();
            });
        });

       /* delete facebook connection */
        de.lib.live($contentWrapper, 'a.removefb', 'click', function(e){
            e.preventDefault();
            $.ajax({
                url: de.bild.settings.community.urls.removefb
            })
            .done(function( data ) {
                /* refresh on success so we can see new account status */
                window.location.reload();
            });
        });

       /* report profile */
       var reportLayerTimeout;
        de.lib.live($contentWrapper, 'div.profileHead .fnc a.drop', {
            'mouseenter' : function(){
                clearTimeout(reportLayerTimeout);
                $(this).parent().addClass('active');
            },
            'mouseleave' : function(){
                var $this = $(this);
                reportLayerTimeout = setTimeout(function(){
                    $this.parent().removeClass('active');
                },settings.layerDelay);
            }
        });

        /*
            Paket 2 R1
        */
   
        var currentShowActivities = 1,
        className,
        $activityPage;
        de.lib.live($contentWrapper, 'div.usr-feed div.loadmore > a.hint', 'click', function(e){
            e.preventDefault();
            var $parent = $(this).parent('div.loadmore');

            className = $parent.attr('class');

            className = className.replace(/\s?loadmore\s?/g, '');
            /* if we are dealing with the main load more button at the bottom of the feed*/
            if (className === '') {
                $activityPage = $('.activityPage'+currentShowActivities);
                if ($activityPage.length) {
                    $('.activityPage'+currentShowActivities).fadeIn(settings.fadeSpeed);
                    currentShowActivities++;
                    if ($('.activityPage'+currentShowActivities).length === 0) {
                        $parent.parent('li').hide();
                    }

                } else {
                    $parent.parent('li').hide();
                }
               
            /* nested more buttons have more classes!*/   
            } else {
                $('div.usr-feed li.'+className+'.hide').fadeIn(settings.fadeSpeed);
            }

        });

       /* edit profile image */
       var uploadLayerTimeout,
       $ulUpload;

        if ($profileHead.length) {

            de.lib.live($profileHead, 'div.usrimg', mouseEnterEvent, function(e){

                if (!$ulUpload) {
                    $ulUpload = $profileHead.find('ul.usr-img-upload');
                }
               
                clearTimeout(uploadLayerTimeout);
                $ulUpload.removeClass('hide').data('imageActive', true);

               
                if (isMobile === true) {
                    $ulUpload.find('ul').show();
                    uploadLayerTimeout = setTimeout(function(){
                        $ulUpload.addClass('hide');
                    },5000); 
                }
            });

            de.lib.live($profileHead, 'div.usrimg', 'mouseleave', function(e){
                $ulUpload.data('imageActive', false);
                if (isMobile !== true) {
                    clearTimeout(uploadLayerTimeout);
                    uploadLayerTimeout = setTimeout(function(){
                        if (!$ulUpload.data('menuActive') || $ulUpload.data('menuActive') === false) {
                            $ulUpload.addClass('hide');
                        }
                    },settings.layerDelay); 
                }
            });

            de.lib.live($profileHead, 'ul.usr-img-upload', {
                'mouseenter' : function(){
                     clearTimeout(uploadLayerTimeout);  
                     $ulUpload.data('menuActive', true);
                },
                'mouseleave' : function(){
                    clearTimeout(uploadLayerTimeout);
                    $ulUpload.data('menuActive', false);
                    uploadLayerTimeout = setTimeout(function(){
                        if (!$ulUpload.data('imageActive') || $ulUpload.data('imageActive') === false) {
                            $ulUpload.addClass('hide');
                        }

                    },settings.layerDelay);
                }
            });
        }

    };

    /**
     * profile pages - getting user data via JSONP
     * @function
     * @name getProfileData
     * @memberOf de.bild.community
     * @private
     */

    var profileUrl,
    _separator = templates.profileSeparator,
    userData = {},
    profileString = [],
    notprovided = templates.message.replace('%CLASS%', 'disabled').replace('%CONTENT%', de.bild.settings.community.lang.notprovided),
    notpublished = templates.message.replace('%CLASS%', 'disabled').replace('%CONTENT%', de.bild.settings.community.lang.notpublished),
    profileYears = de.bild.settings.community.lang.years;    

     function getProfileData() {
        /* these vars are set in setupProfileEvents()*/
        if (isProfileHead || isProfileSettings) {
            if (variables.profileOwnerEncryptedUserId && variables.profileOwnerEncryptedUserId.length) {
                profileUrl = de.bild.settings.community.urls.getUserInfo.replace('%USERID%', variables.profileOwnerEncryptedUserId);
                profileUrl = profileUrl.replace('%TOKEN%', variables.profileViewToken);
            } else {
                return false;
            }
            if (isProfileSettings) {
                removeLoadingLayer();
                loadingLayer($('#aboutyou table.profTable tbody'));
            }
            /*get the JSONP response*/   
            if (isProfileHead) {
                jsonp(profileUrl,function (response) {
                    removeLoadingLayer();
                    if (response) {
                        userData['name'] = (response.name && response.name.length > 0) ? response.name : null;
                        userData['homepage'] = (response.homepage && response.homepage.length > 0) ? response.homepage : null;
                        userData['homepageView'] = (response.homepageView && response.homepageView.length > 0) ? response.homepageView : null;                   
                        userData['errors'] = (response.errors) ? response.errors : null;
                        userData['occupation'] = (response.occupation && response.occupation.length > 0) ? response.occupation : null;
                        userData['location'] = (response.location && response.location.length > 0) ? response.location : null;
                        userData['age'] = (response.age && parseInt(response.age) !== 0) ? response.age+profileYears : null;
                        userData['showLocation'] = response.showLocation;
                        userData['showAge'] = response.showAge;
                        /* let's build the string - we don't need the home page in the string for now */
                        if (userData['occupation']) {
                            profileString.push(_separator);
                            profileString.push(userData['occupation']);
                        }
                        if (userData['location'] && response.showLocation == 1) {
                            profileString.push(_separator);
                            profileString.push(userData['location']);
                        }
                        if (userData['age'] && response.showAge == 1) {
                            profileString.push(_separator);
                            profileString.push(userData['age']);    
                        }
                        /* remove the first dot if the strong tag has content (moderator etc)*/
                        if ($profileHead.find('p.userdata > strong')[0].innerHTML.length < 1) {
                            profileString.shift();
                        }
                        /* include the user data */
                        $profileHead.find('p.userdata').append(templates.spanEl.replace('%CONTENT%', profileString.join('')));
                        /* if there is a homepage include it*/
                        if (userData['homepageView'] && userData['homepage']) {
                        $profileHead.find('p.homepage').html(templates.linkNewWindow.replace('%URL%', userData['homepage']).replace('%CONTENT%', userData['homepageView']));
                        }
                        return response;
                    }
                });
            } else if (isProfileSettings) {
                // get user data through jsonp
                jsonp(de.bild.settings.community.urls.getUserAbout + '/' + variables.profileViewToken, function (response) {
                    removeLoadingLayer();
                    if (response) {
                        de.lib.replaceWith($('#aboutyou'), response);
                        return response;
                    }
                });

                de.lib.live($contentWrapper, '#aboutyou a.tooltip', 'click', function(e) {
                    e.preventDefault();
                    removeLoadingLayer();
                    loadingLayer($('#aboutyou table.profTable tbody'));
                    var url = $(this).attr('href');
                    url = url.substring(url.indexOf('#')+1,url.length)  + '/' + variables.profileViewToken;                   
                    jsonp(url, function (response) {
                        removeLoadingLayer();
                        if (response) {
                            de.lib.replaceWith($('#aboutyou'), response);
                            return response;
                        }
                    });
                });
                //
                // fix for PROCO-1152. this is work if form is sended
                // error handling in server side
                //
                de.lib.live($contentWrapper, '#usrProfile', 'submit', function(e) {
                    removeLoadingLayer();
                    loadingLayer($('#usrProfile fieldset'));
                    e.preventDefault();
                    var $this = $(this),
                    params = $this.serialize(),
                    url = $this.attr('action')  + '/' + variables.profileViewToken + '?' + params;
                    jsonp(url,function (response) {
                        removeLoadingLayer();
                        if(response.length){
                            de.lib.replaceWith($('#aboutyou'), response);
                        }
                        return false;
                    });
                }); 
            }
        }
     };

    /**
     * profile settings data loading - this is not schoen, but we have to reload the data every time
     * @function
     * @name insertProfileSettingsData
     * @memberOf de.bild.community
     * @private
     */
    function insertProfileSettingsData(){
        if ($profileSettings.length === 0) {
            return;
        }
        $profileSettings.find('td.homepage').html(userData['homepage'] ? userData['homepage'] : notprovided);
       
        $profileSettings.find('td.occupation').html(userData['occupation'] ? userData['occupation'] : notprovided);
       

        if (userData['location']) {
            $profileSettings.find('td.location').html((userData['showLocation'] == 1) ? userData['location'] : notpublished);
        } else {
            $profileSettings.find('td.location').html(notprovided);
        }

        if (userData['age']) {
            $profileSettings.find('td.age').html((userData['showAge'] == 1) ? userData['age'] : notpublished);    
        } else {
            $profileSettings.find('td.age').html(notprovided);
        }

    };
    /**
     * Setup lightbox trigger for security questions, eg: Profilephoto Lightbox trigger "do you want to delete this photo?"
     * @function
     * @name setupSecurityQuestions
     * @memberOf de.bild.community
     * @private
     */
    function setupSecurityQuestions(){
        /* Profilephoto Lightbox trigger  */
        de.lib.live($contentWrapper, 'a.secquestion', 'click', function(e){
            e.preventDefault();
            de.bild.httpFist.load({
                'obj': this,
                'callback': function(response, $target){
                    showLightBox({
                        'content': response,
                        'onClose' : function(){                       
                            /* if success window has class of refresh...refresh! */
                            if($body.find('div.lightbox #success').length) {                           
                                /* refresh on success so we can see result of change */
                                window.location.reload();
                            }
                        }                       
                    });
                },
                'error' : function(){
                    closeLightBox({
                        'callback' : function(){
                            showLightBox({
                                'content' : templates.lbMessage.replace('%CONTENT%', response.message).replace('%CLASS%', 'error').replace('%HEADING%', de.bild.settings.community.lang.error)
                            });
                        }
                    });
                }
            });
        });
    };

/* ================================================================================================================ END PROFILE PAGE */

/* ================================================================================================================ START BUSINESS CARD OVERLAY
*/
   
    var bcardTimeout,
    activeCardId = 'userProfileCardActive',
    $activeCardElement,
    pos,
    cardUrl,
    $parent,    
    $card,
    cardRequest;

   // userProfileCard

    /**
     * events for follow and block buttons  :)
     * @function
     * @name setupFollowButtons
     * @memberOf de.bild.community
     * @private
     */
    function setupBusinessCardOverlays(){
       
        de.lib.live($contentWrapper, 'div.comments p.post-meta a, div.comments img.usr-ico', {

            'mouseover' : function(e){
                e.preventDefault();
                clearTimeout(bcardTimeout);               

                $activeCardElement = $(this);

                /* we have to have a reference point. this is to catch links which have the same parent. */
                $parent = $activeCardElement.parents('li.post').first();
               
               
                /* get the url */
               
               //when there is a replier we have to find an other userid
               var userlink = $activeCardElement.get(0).nodeName.toUpperCase()=='IMG' ? $activeCardElement.parents('a').first().attr('href') : $activeCardElement.attr('href');
               var inputLink = $parent.find('input[name="encryptedUserId"]').val();
               
               
               if(userlink){
                userlink = userlink.split('/');
                userlink = userlink.length>0?userlink[userlink.length-1]:null;
               }
               
               
               var $userId = userlink; 
               
               var url;

                if ($userId && $userId.length && $userId != variables.ownEncryptedUserId) {

                    url = de.bild.settings.community.urls.bcard + $userId;
                    //url = 'snippets/JS-2-R1-12-profile-activities/' + $userId.val();

                    /* if the card is active and the url is the same then we're dealing with the same bubble */
                    if ($parent.data('isCardActive') === true && cardUrl === url) {
                    
                     //maybe the cursor changed to from profile pic to username so only adjust the card
                     pos = $activeCardElement.offset();
                     $card.css({
                        'top' : pos.top - $card.height() -30,
                        'left' : pos.left + 5
                    });
                    
                        return false;
                    }

                    cardUrl = url;
                    $parent.data('isCardActive', true);

                    /* remove the current bubble, get the position and set up/show the bubble */
                    $('#userProfileCard').remove();
                    pos = $activeCardElement.offset(),
                    $card = $(templates.bcard);
                    $card.hide()
                    $body.append($card);                  
                    
                    $card.css({
                        'top' : pos.top - $card.height() -30,
                        'left' : pos.left + 5
                    });
                 
                   
                   
                    $card.show();
 if(cardRequest){
                   cardRequest.abort();
                 }
                   
                  cardRequest=de.bild.httpFist.load({
                        'url' : cardUrl,
                        'cache':!$.browser.msie,
                        'callback' : function(response){
                            if (screenForResponseErrors(response) === false) {
                                if($card && $card!=null){                               
                                 $card.html(response).removeClass('loading');
                                }
                            }
                        },
                        'error' : function(){
                            $card.remove();
                            $parent.data('isCardActive', false);
                        }
                    });
                }
                else{
                 if($card){
                 $card.remove();
                 }
                    $parent.data('isCardActive', false);
                }
                                
            },

            'mouseout' : function(){
                bcardTimeout = setTimeout(function(){
                    if ($card && $card.length) {
                        $parent.data('isCardActive', false);
                        $card.remove();
                        $parent = null;
                        $card = null;
                        $activeCardElement = null;
                        //start Communitycenter Rotation
                   $('.latest-usr-feed').trigger('autorotate.comCenter');
                    }
                }, settings.layerDelay);
               
               
            }

        });

   
        de.lib.live($body, '#userProfileCard', {
            'mouseover' : function(e){
                clearTimeout(bcardTimeout);
                $parent.data('isCardActive', true);
            },

            'mouseout' : function(){
                bcardTimeout = setTimeout(function(){
                    if ($card && $card.length) {
                        $parent.data('isCardActive', false);
                        $card.remove();
                        $parent = null;
                        $card = null;
                        $activeCardElement = null;
                        //start Communitycenter Rotation
                   $('.latest-usr-feed').trigger('autorotate.comCenter');
                    }
                }, settings.layerDelay);
            }

        });

    };

/* ================================================================================================================ END BUSINESS CARD OVERLAY */

/* ================================================================================================================ START FOLLOWER LIST
*/
      

    /**
     * events for follow and block buttons  :)
     * @function
     * @name setupFollowButtons
     * @memberOf de.bild.community
     * @private
     */

    function setupFollowButtons(){

        var incVal = 1,
        $response;

        /* all buttons will make the ajax call to follow or unfollow */
         de.lib.live($body, 'a.follow-button, a.following-button', {
            'click' : function(e) {
                e.preventDefault();
                var $this = $(this);
                // prevent too many clicks
                if ($this.data('clicked') === true) {
                    return false;
                }
                $this.data('clicked', true);

                var isFollowing = $this.hasClass('following-button'),
                $followTab = $('div.tabs li.tab2 > a').first(),
                countVal = null;

                de.bild.httpFist.load({
                    'obj': this,
                    'cache':!$.browser.msie,
                    'dataType' : 'json',
                    'callback': function(response, $target){
                        if (screenForResponseErrors(response) === false) {

                            //if ne response is '' delete parent li element
                            if(response.html!=''){
                             /* here we including a nice fade in effect woooosh! */
                            $response = $(response.html);
                            $response.css('opacity',0);
                            $this.replaceWith($response);

                            $response.animate({'opacity' : 1}, settings.fadeSpeed, function(){
                                $response.data('clicked', false).css('opacity',1);
                            });
                            }
                            else{
                             $this.parent().remove();
                            }
                            
                            

                            /* set values depending on whether we are following or defollowing */
                            if (isFollowing) {
                                incVal = -1;
                            } else {
                                incVal = 1;
                            }
                           
                           
                            if($('.profileHead').length>0){
                             countVal = updateCount($('.profileHead em.count-followers'), incVal);
                            }
                           
                            if($('.combox-profile').length>0){
                             //Only Update Count if its your own profile
                             if($('.combox-profile #currentUser').val()==1)
                             {
                              countVal = updateCount($('.combox-profile em.count-followed'), incVal);
                             }
                            }

                            if (countVal !== null && $followTab.length) {
                                $followTab.text(de.bild.settings.community.lang.followingNo.replace('%COUNT%', countVal));
                            }
                           

                        }
                        //Error Screen appears, reset the click status
                        else{
                         $this.data('clicked', false);
                        }
                    },
                    'error' : function(){
                        $this.data('clicked', false).css('opacity',1);
                    }
                });
            }
         });

         /* this does nothing more than to replace the text */  
         de.lib.live($contentWrapper, 'a.following-button', {
            'mouseover' : function(e){
               // $(this).text(de.bild.settings.community.lang.defollow);
               //value from the variables
                $(this).text(variables.defollow);
            },
            'mouseleave' : function(e){            
                //$(this).text(de.bild.settings.community.lang.following);
                //value from the variables
                $(this).text(variables.follow);
            }
         });

         /* delete post popup from the privacy settings page  */
         de.lib.live($body, 'div.usrpagesList a.delpost', {
            'click' : function(e){
             var $this = $(this);
             //unblocking in lightbox
             var modifyBlockNumber = false;
             if($this.parents('.lightbox') && $this.attr('href').indexOf('/ka/p/private/unblock/')!=-1){
              modifyBlockNumber = true;
             }            
            
                e.preventDefault();
                var $this = $(this);
                de.bild.httpFist.load({
                    'obj': this,
                    'cache':!$.browser.msie,
                    'callback': function(response){
                        if (screenForResponseErrors(response) === false) {
                        
                         //decrase the number of blocked Users in Lightbox
                         if(modifyBlockNumber){
                         var count = $this.parents('.lightbox').find('.header h2');
                         if(count.length!=0)
                         var countVal = parseInt(count.text().match(/\d/)[0]);
                         if(typeof(countVal)=='number'){
                         count.text(de.bild.settings.community.lang.blockingNo.replace('%COUNT%',countVal-1));
                         }
                         }
                        
                            $this.parent('li').fadeOut(settings.fadeSpeed, function(){
                                $(this).remove();
                            });
                        }   
                    }
                });

            }
         });

        

         /* blocking users */

         de.lib.live($contentWrapper, 'ul.fnc a.block, ul.fnc a.unblock', {
            'click' : function(e){
                e.preventDefault();
                var $this = $(this);

                if ($this.data('clicked') === true) {
                    return false;
                }

                $this.data('clicked', true),
                isBlock = $this.hasClass('block');

                de.bild.httpFist.load({
                    'obj': this,
                    'callback': function(response, $target){
                           
                        if (screenForResponseErrors(response) === false) {

                            if (isBlock === true) {

                                $('#communityPendingUserBlock').attr('id', '');
                                $this.attr('id', 'communityPendingUserBlock');
                               
                                showLightBox({
                                    'content': response,
                                    'closeOnEsc' : false,
                                    'wrapperId' : 'communityBlockUser'                     
                                });
                            } else {

                                // unblock case 
                                var respObj = $.parseJSON(response);
                                if (respObj !== null) {

                                    var $parent = $this.parent('li');
                                    $parent.html(templates.genericLink.replace('%URL%', '#url=;' + respObj.button.link + ';').replace('%CLASS%', 'block').replace('%CONTENT%', respObj.button.text))
                                   
                                    var $followbutton = $parent.closest('ul.fnc').find('li:first > a.follow-button, li:first > a.following-button');

                                    if ($followbutton.length === 0) {
                                        $parent.closest('ul.fnc').prepend('<li>' + respObj['follow-button-html'] + '</li>');
                                    } else {
                                        $followButton.replaceWith(respObj['follow-button-html']);
                                    }

                                }

                            }
                        }

                        $this.data('clicked', false);
                    },

                    'error' : function(){
                        $this.data('clicked', false);
                    }
                   
                });

            }
         });
    };

     /**
     * this handles the case when the form in a lightbox is for a blocked user confirmation
     * it is an exception to the general rule that all forms in lightboxes should submit an AJAX request via post and inject the contents into the lightbox
     * see function setupLightboxForms()
     * @function
     * @name handleBlockUser
     * @memberOf de.bild.community
     * @param {$object} $form form in the lightbox
     * @private
     */
    function handleBlockUser($form) {
        loadingLayer($form.find('fieldset'));
        de.bild.httpFist.load({
        'url': $form.attr('action'),
        'method': $form.attr('method'),
        'dataType' : 'json',
        'callback': function(response, $target){
                if (screenForResponseErrors(response) === false) {
                    closeLightBox({
                        'callback' : function(){
                            var $pendingUserBlock = $('#communityPendingUserBlock'),
                            countVal,
                            $activeTab = $('div.tabs li.active > a').first(),
                            $followButton = $pendingUserBlock.closest('ul.fnc').find('li:first > a.follow-button, li:first > a.following-button');
                            $pendingUserBlock.data('clicked', false).attr('id', '').parent('li').html(templates.genericLink.replace('%URL%', '#url=;' + response.button.link + ';').replace('%CLASS%', 'unblock').replace('%CONTENT%', response.button.text));
                            $followButton.parent('li').fadeOut(settings.fadeSpeed, function(){
                                $(this).remove();
                            });


 /*Only if its your profile change the count */
 if($('.combox-profile #currentUser').val()==1)
                             {
                             /* if on folgen mir list*/
                             if ($('#follower-list').length) {
                                 countVal = updateCount($('em.count-followers'), -1);
                                 if (countVal !== null) {
                                     $activeTab.text(de.bild.settings.community.lang.followersNo.replace('%COUNT%', countVal));
                                 }
                             }

                             /* if on folge ich list*/
                             if ($('#following-list').length) {
                                 countVal = updateCount($('em.count-followed'), -1);
                                 if (countVal !== null) {                                
                                     $activeTab.text(de.bild.settings.community.lang.followingNo.replace('%COUNT%', countVal));
                                 }
                             }
         }

                        }
                    });
                }
            },
        'error' : function(){
            closeLightBox();
        }   
        });
    };

     /**
     * sets up events for followers lists P2 R2
     * @function
     * @name setupFollowerList
     * @memberOf de.bild.community
     * @param {$object} $el parent element
     * @private
     */
     function setupFollowerList($el){          

       
        $el = $el || $contentWrapper;
        var $followerlist = $el .find('div.followerlist');
        if ($followerlist.length === 0) {
            return false;
        }

        var $more,
        $response;
/*
        var scrollCallback = function($elem){
            $(window).off('scroll.showfollow');
            $(window).on('scroll.showfollow', function(e){
                if (de.bild.utils.inViewport($elem) > 4) {
                    setTimeout(function(){
                        $elem.find('a.hint').trigger('click');
                    },settings.fadeSpeed);
                }
            });
        };
*/

        $more = $followerlist.find('li.last');

        de.lib.live($followerlist, 'li.last a.hint', 'click', function(e) {
            e.preventDefault();
            loadingLayer($(this));
            de.bild.httpFist.load({
                'obj': this,
                'dataType' : 'json',
                'callback': function(response, $target){
                    if (screenForResponseErrors(response) === false) {
                        $more.remove();
                        $response = $(response.html);
                        $response.hide();
                        $followerlist.children('ul').first().append($response);
                        $response.fadeIn(settings.fadeSpeed, function(){
                            $more = $followerlist.find('li.last');
                            /*
                            $(window).off('scroll.showfollow'); 
                            if ($more.length) {
                              scrollCallback($more);
                            }
                            */
                        });
                   }
                }
            });
        });   

    /*
        if ($more.length && de.bild.utils.inViewport($more) === 0) {
            scrollCallback($more);
        }
*/
     };

/* ================================================================================================================ END FOLLOWER LIST */

/* ================================================================================================================ START LIKE BUTTONS

    dependencies:
    de.bild.settings
    jquery
    jquery.cookie
    de.bild.httpFist
    de.bild.sso.isLoggedIn
*/

     var likeClickTimeout,
     $loadObj;
      
     /**
     * checks for anon session and marks the like buttons according to stored data. done for caching reasons (PROCO-388)
     * @function
     * @name checkAnonLikes
     * @memberOf de.bild.community
     * @private
     */
     function checkAnonLikes(){          
        if (de.bild.sso.isLoggedIn() === false && $('.likebtn').length) {                       
            var likedata = $.cookie(settings.anonLikes);
            if (likedata) {               
                var likedataObj = $.parseJSON(likedata);               
                $.each(likedataObj, function(key, value){
                    var $key = $('#cmt-'+key);                                       
                    if ($key.length) {
                        if (value === 1){
                            $key.find('a.likebtn:first').parent().addClass('liked');
                        } else {
                            $key.find('a.likebtn:first').parent().removeClass('liked');
                        }
                    }
                });               
            }
        }      
    };
    /**
     * saves the like status so that we only send requests when the status has changed
     * @function
     * @name saveLikeStatus
     * @memberOf de.bild.community
     * @param {$object} $el parent element
     * @private
     */


    /**
     * sets up events for like buttons in the comments lists
     * @function
     * @name setupLikeButtonsEvents
     * @memberOf de.bild.community
     * @private
     */
   function saveLikeStatus($el) {
        if ($el.length) {
            $el.find('a.likebtn').each(function(){
                var $this = $(this),
                $parent = $this.parent();
                if ($parent.hasClass('liked')) {
                    $this.data('likeStatus', 1);
                    //to prevent liked comment to display a count from 0 
                    if($this.next('.likecnt').html()=='0 <span class="hidden">Usern gefällt das.</span>'){
                        $this.next('.likecnt').html('1 <span class="hidden">Usern gefällt das.</span>');
                    }
                    
                    
                } else {
                    $this.data('likeStatus', 0);
                }
            });
        }
   };



    function setupLikeButtonsEvents(){

        de.lib.live($contentWrapper, 'a.likebtn', 'click', function(e){
            e.preventDefault();
           
            var obj = this,
            $this = $(this);
            var $likecnt = $this.siblings('span.likecnt'),
            likeCount = parseInt($likecnt.text()),
            $parent = $this.parent();
           
            if (typeof $this.data('clickStatus')!== 'number') {
                $this.data('clickStatus', 0);
            }
            $this.data('clickStatus', $this.data('clickStatus')+1);
           
                // colour the thing before we get the response
                // insert new value
                if (typeof likeCount === 'number') {
                    if ($parent.hasClass('liked')) {
                        $parent.removeClass('liked');
                        $likecnt.text((likeCount === 0) ? 0 : likeCount - 1);
                    } else {
                        $parent.addClass('liked');
                        $likecnt.text(likeCount + 1);
                    }
                }

            if (typeof likeClickTimeout !== 'undefined' && likeClickTimeout !== null) {
                clearTimeout(likeClickTimeout);
            }
          
           $this.blur();
         
             likeClickTimeout = setTimeout(function(){
               
                if ($this.data('clickStatus')%2 === 1) {
                    $this.data('clickStatus',0);
                    $loadObj = de.bild.httpFist.load({
                        'obj': obj,
                        'method': 'POST',
                        'dataType': 'json'
                    });                    
                }  
             },500);
               
        });
        return false;
    };

/* ================================================================================================================ END LIKE BUTTONS */

/* ================================================================================================================ START UPLOAD

    dependencies:

    de.bild.settings
    jquery
    jquery.bildProgressBar
    de.bild.utils.ran
    de.bild.social.postingPhototoFB
    de.bild.social.postingVideotoFB

*/
   

    /* timer for progress bar ajax calls */
    var uploadProgressBarInterval,

    /* 1414 var to be thrown around */
    anonUpload = '1414';

    /**
     * handles the results of the upload handshake and publishes the output to the screen
     * @function
     * @name showUploadResults
     * @param {String} id id of the iframe where the success message comes from
     * @param {String} type what type of upload form are we dealing with... 1414 or lightbox?
     * @memberOf de.bild.community
     * @private
     */
    function showUploadResults(id,type) {
        var i = document.getElementById(id);
        clearInterval(uploadProgressBarInterval);
        if (i.contentDocument) {
            var d = i.contentDocument;
        } else if (i.contentWindow) {
            var d = i.contentWindow.document;
        } else {
            var d = window.frames[id].document;
        }
        if (d.location.href == 'about:blank') {
            return;
        }
        setTimeout(function(){
            if (type === anonUpload) {
                $('#upload-1414').replaceWith(d.body.innerHTML);
            } else {
                $('div.lightbox div.section').replaceWith(d.body.innerHTML);
                if($(d.body.innerHTML).find('#fotoUploadSuccess')){
                    // success! check for FB and do upload if needed
                    var $fotoUploadSuccess = $('#fotoUploadSuccess');
                    if($fotoUploadSuccess.find('input[name=dofbupload]').val() === 'on'){
                        // fb is checked, send to ajax
                        // photo or video?
                        if ($fotoUploadSuccess.find('input[name=phototitle]').length ){
                            de.bild.social.postingPhototoFB($fotoUploadSuccess.serialize());
                        } else if ($fotoUploadSuccess.find('input[name=videotitle]')){
                            de.bild.social.postingVideotoFB($fotoUploadSuccess.serialize());
                        }
                    }
                }
            } 
        }, 500);
    };

    /**
     * This function launches an upload progress bar. It will poll the url every 1000ms and update the bar accordingly.
     * When 100% is reached it will trigger another ajax call to fetch the success/failure message. The url for this comes from the form action attribute.
     * The response replaces the content of the Iframe
     * @function
     * @name uploadProgressBar
     * @param {String} id - id of the container (usually a form) that houses the upload bar (in this element we are looking for a child div: <div class="meter"></div>)
     * @param {String} url - url to the json that contains the upload info. This will be polled every 1000ms unless specified
     * @memberOf de.bild.community
     * @private
     */
    function uploadProgressBar(id,url){
        if (arguments.length !== 2) {
            return;
        }
        clearInterval(uploadProgressBarInterval);
        /* delay between api calls */
        var delay = 1000,
        /* initate progress bar */
        $meter = $('#'+id+' div.meter').bildProgressBar({
            /* when 100% is reached */
            'complete' : function(){
                /* this = DOM element on which the plugin acts */
                $meter.data('bildProgressBar') && $meter.data('bildProgressBar').destroy();
                clearInterval(uploadProgressBarInterval);
            }
        });
        if ($meter.length) {
            uploadProgressBarInterval = setInterval(function(){
                $.ajax({
                'url': url + de.bild.utils.ran(1000000000),
                'dataType': 'json',
                'cache' : true
                })
                .done(function(data){
                    if (data == null || data.uploadedbytes >= data.totalbytes) {
                        clearInterval(uploadProgressBarInterval);
                        $meter.data('bildProgressBar') && $meter.data('bildProgressBar').complete();
                        return;
                    }
                    if ($meter.length && $meter.data('bildProgressBar')) $meter.data('bildProgressBar').update(data.uploadedbytes, data.totalbytes);
                })
                .fail(function() {
                    clearInterval(uploadProgressBarInterval);
                    $meter.data('bildProgressBar') && $meter.data('bildProgressBar').destroy();
                });                     
            }, delay);
        }
    };

    /**
     * does the decision making in upload forms
     * @function
     * @name handleUpload
     * @param {$Object} jQuery form object
     * @param {String} formType the type of form 'lightbox' or '1414'
     * @memberOf de.bild.community
     * @private
     */
    function handleUpload($form, formType){
        formType = formType || '';
        var uploadiframeTargetURL = ((formType === anonUpload) ? de.bild.settings.community.urls.uploadiframeTargetFF : de.bild.settings.community.urls.uploadiframeTarget)  + '/sid=' + variables.uploadProgressSid,
        uploadProgressBarURL = (formType === anonUpload) ? de.bild.settings.community.urls.uploadProgressBarFF : de.bild.settings.community.urls.uploadProgressBar;
        uploadType = 'photo',
        $uploadMsg = $('#uploadMsg');
       
        /* crude - this should not really be done this way
            in upload forms
            remove default description text from textarea before submit */
         clearTextareas($form);
       
        if ($form.hasClass('videoUpload')) {
         uploadType = 'video';
        }    

        var $fileInput = $('input:file', $form),
        $fileInputLength = $fileInput.length,
        formElement = $form.get(0);

        if ($fileInputLength > 0 && $fileInput.val().length > 0) {
            /* onstart function here if needed
                submit over an iframe */
            var $commFormIOIframe = $('[id*=commFormIOIframe]');
               
            if ($commFormIOIframe.length === 0) {
                var id = 'commFormIOIframe'+de.bild.utils.ran(1000001);
                var $iframe = $('<iframe name="' + id + '" id="' + id + '" src="about:blank" onload="de.bild.community.upload(\''+id+'\',\''+formType+'\')" />');
                $iframe.css({
                    position: 'absolute',
                    top: '-9999px',
                    left: '-9999px'
                });
                $iframe.appendTo('body');
                formElement.setAttribute('target', id);
            } else {
                formElement.setAttribute('target', $commFormIOIframe.attr('id'));
            }
            formElement.setAttribute('action', uploadiframeTargetURL);
            formElement.submit();
            /* now replace the form with the "in progress" form */
            if (formType !== anonUpload) {
                $form.hide();
            }
            /* then start the progress.. */
            $uploadMsg.show();
           
            if ($uploadMsg.length > 0) {
                /* here we distinguish between a single upload and multiple upload (check the number of input[type="file"])
                  at the moment, only videos get a progress bar */
                if (($fileInputLength === 1 && uploadType === 'video') || formType === anonUpload) {
                    var id = $uploadMsg.find('form:first').attr('id');
                    uploadProgressBar(id,uploadProgressBarURL);
                } else {
                    $uploadMsg.find('form:first div.meter').get(0).className = 'loading';
                } 
            }              
        }
    };

    /**
     * upload form for 1414
     * @function
     * @name setup1414Form
     * @memberOf de.bild.community
     * @private
     */
    function setupFourteenFourteenForm(){
        /*  Lightbox Form  submit */
        var $form = $('#lruploadMedia');
        if ($form.length) {
            $form.submit(function(e){
                 e.preventDefault();
                /*  validate required fields */
                if (!validateForm($form)) {
                    return false;
                }
                 handleUpload($form, anonUpload);
            });

            /* for multiupload forms, get rid of the default value*/

            de.lib.live($contentWrapper, '#lruploadMultiDet', 'submit', function(e) {
                e.preventDefault();
                clearTextareas($(this));
                this.submit();
            }); 

        }

    };

/* ================================================================================================================ END UPLOAD */

/* ================================================================================================================ START TEASER OVERLAY COMMENTS

    dependencies:

    de.bild.settings
    jquery
    de.bild.utils.addStyleSheet

*/

    /* cache JSON data for article comments */
    var articleCommentsJSON = {},
    /* cache idMap data for article comments (get from inline call to loadTeaserComments() rendered by CMS) */
    articleCommentsMap = {},
    /* cache single ids of the article comments DOM elements */
    articleCommentsIds = [];

    /**
     * Loads JSON with the number of comments for each teaser.
     * Required CSS can be dynamically loaded
     * Using the Ids provided in the JSON, we insert in the element with the corresponding Id HTML containing the number of comments
     * @function
     * @param {Object} idMap contains UGC-IDs and their DOM-Ids
     * @param {String} url optional url to Server. UGC ids will be appended
     * @name loadTeaserComments
     * @memberOf de.bild.community
     * @private
     */
    /*
        Object expected from BILD:
        {'19565604': ['rating_19471642_59119364','rating_19471644_59119364'], '19572902': ['rating_19572902_12132434','rating_19572902_799672245'], '19584838': ['rating_19584838_45356346']}
         Object expected from KA: {"payload_type":"json","status":"1","error":"","numComments":[{"10000584":3577,"8819148":3406,"10414364":2746}]}
     */
    function loadTeaserComments(idMap,url){
        /* idMap has to be present */
        if (typeof idMap === 'object') {
            articleCommentsMap = idMap;            
            /*load css */
            de.bild.utils.addStyleSheet(de.bild.settings.community.urls.commentsCSS, 'comTeaserComments');
            /* option url */
            url = url || de.bild.settings.community.urls.articleComments;
            /* build parameter string to add to the URL */
            articleCommentsIds = [];
            for (var k in articleCommentsMap) {
               articleCommentsIds.push(k);  
            }
            url = url + articleCommentsIds.join(':');

            /* get JSON */
            $.ajax({
                url: url,
                type: 'GET',
                dataType: 'json',
                'cache' : true
            })
            .done(function(data){
                 articleCommentsJSON = data.numComments || {};
            })
            .always(function(){
                showTeaserComments();
            });
           
            /* ie is crippled */
            if (!$body.hasClass('modern')){
                $contentWrapper.find('div.hentry, .mtA, div.ateaser-content, div.slide-item')
                .mouseenter(function() {
                    var $this = $(this),
                    $ugc;
                    if ($this.hasClass('mtA')) {
                        $ugc = $this.closest('div.ugcGroup');
                    } else {
                        $ugc = $this.find('div.ugcGroup');
                    }
                    if ($ugc.length) {
                       $ugc.show();
                    }
                })
                .mouseleave(function () {
                    var $this = $(this),
                    $ugc;
                    if ($this.hasClass('mtA')) {
                        $ugc = $this.closest('div.ugcGroup');
                    } else {
                        $ugc = $this.find('div.ugcGroup');
                    }
                    if ($ugc.length) {
                       $ugc.hide();
                    }
                });
            }
        }
    };
    /**
     * shows Teaser comments on matching elements in the page
     * @function
     * @name showTeaserComments
     * @memberOf de.bild.community
     * @param {Array} ids - Array of DOM ids
     * @private
     */
    function showTeaserComments(){ 
        if (articleCommentsIds.length) {
            /* loop through the idMap and */
            for (var i = 0, l = articleCommentsIds.length; i < l; ++i) {
                var id = articleCommentsIds[i],
                value = (articleCommentsJSON[id]) ? parseInt(articleCommentsJSON[id]) : 0;
                /* get the dom element ids.. */
                var collection = articleCommentsMap[id];
                /* and loop through it */
                for (var n = 0, m = collection.length, $elem; n < m; ++n) {
                    var $elem = $('#' + collection[n]);
                    /* only if the element has more than 1 comments, otherwise delete it */
                    if ($elem.length && value > 0) {
                         $elem.text(value).parents('div.ugcGroup, li.comment-count').addClass('active');
                    }
                }
            }
        }
    };

/* ================================================================================================================ END TEASER OVERLAY COMMENTS */

/* ================================================================================================================ START ARTICLE COMMENTS FORMS, BUTTONS, EVENTS

    dependencies:
    de.bild.settings
    jquery
    jquery.TextAreaExpander
    de.bild.utils.scrollTo
    de.bild.utils.inViewport
    de.bild.utils.trim
    de.bild.sso.isLoggedIn
    de.bild.sso.login

*/

    /*save the ajax request in forms */
    var submitAjaxRequest,
    /* UGC comments */
    commentUpdateTimeout,
    commentRequestCount = 0,
    userCommentCount = 0;

    /**
     * handles the communication between server and form elements
     * @function
     * @name
     * @memberOf de.bild.community
     * @param {$Object} $elem jQuery Element over which the loading layer should be superimposed
     * @param {string} data.url URL where to load the snippet from
     * @param {obj} data.params an Array on Parameters posted to the server
     * @param {func} data.callback function called after content received
     * @param {string} data.dataType html or json
     * @param {string} data.method POST or GET
     * @private
     */
    function submitForm($elem,data){
        if (data.url) {
            if (submitAjaxRequest) {
                submitAjaxRequest.abort();
            }
            /* defaults */
            var datatype = data.dataType ? data.dataType : 'html',
            method = data.method ? data.method : 'POST',
            timeout = data.timeout ? data.timeout : '15000',
            params = (data.params &&  method.toLowerCase() === 'post') ? data.params : false;

            submitAjaxRequest = $.ajax({
                'url': data.url,
                'dataType': datatype,
                'data': params,
                'type': method,
                'timeout' : timeout,
                'beforeSend': function(){
                    removeLoadingLayer();
                    if ($elem) {
                        loadingLayer($elem);
                    }
                }
            })
            .done(function(response){
                    (typeof data.callback === 'function') && data.callback(response, 'success');
            })
            .fail(function(){
                    (typeof data.callback === 'function') && data.callback(null, 'error');
            })
            .always(function(){
                if ($elem) {
                    removeLoadingLayer($elem);
                }
            });
        }
    };

    /**
     * Handles form field states sets the default text and text colour when the feld gains and loses focus.
     * @function
     * @name setFormFieldState
     * @memberOf de.bild.community
     * @private
     * @param {$Object} $elem jQuery element - the focussed comment field
     * @param {Bool} focus whether the element should be focussed or blurred
     * @returns {Bool} false
     */
    function setFormFieldState($elem, focus){
 
        var $form = $elem.parents('form.cform'),
        nodeName = $elem[0].nodeName.toLowerCase();
       
        /* is the field active? */
        if (focus) {
            /* in the CSS, this active class shows the corresponding buttons and checkboxes  */
            if (!$form.hasClass('comment-nologin')) {
                $form.addClass('active');
            }
           
            /* make this element active and the text black */
            $elem.addClass('active').css({
                'color' : 'black'
            });
           
            /* remove default text */
            if ($elem.attr('title')) {
                if ($elem.val() == $elem.attr('title')) {
                    $elem.val('');
                }
            }
  
            if (nodeName === 'textarea') {
                if ($elem.attr('id') === 'usr-comment') {
                    $elem.TextAreaExpander('38');
                }  else {
                    $elem.TextAreaExpander($elem.height());
                }
            }
           
        /* else we are leaving the element */
        } else {
            setTimeout(function(){
                if ($elem.length) {
                    var isEmpty = ($.trim($elem.val()) === '') ? true : false;
                    /*
                        we no longer check if the facebook checkbox is active
                        $form.find('input[type=checkbox]:checked').length === 0 && $form.find('input[type=checkbox]:focus').length === 0
                    */
                    if (isEmpty) {
                        $elem.removeClass('active').css({
                            'color': ''
                        });
                       
                        /* put the default text back in */
                        if ($elem.attr('title')) {
                            $elem.val($elem.attr('title'));
                        }
                       
                        /* set textarea */
                        if (nodeName === 'textarea') {
                            $elem.css('height', '');
                            /* this is for the #usr-comment case */
                            $form.removeClass('active');
                        }
                    }
                }
            },150);
        }
        return false;
    };
    /**
     * reduce length of comments to  250 characters
     * @function
     * @name shrinkComments
     * @memberOf de.bild.community
     * @private
     * @param {Object} $elem jQuery Object
     */
    function shrinkComments($elem){
        var $comments = (!$elem) ? $('p.post-content , p.thread-body , div.userThread span.entry-content', $contentWrapper) : $elem.find('p.post-content');

        if (!$comments || $('div.comments').hasClass('comments-expanded')) {
            return;
        }

        $comments.each(function(){
            var $oneComment = $(this),
            $commentMore = $oneComment.find('span.comment-more a.more');

            /* PROCO-785 - comments truncated on the server for forum comments */
            if ($commentMore.length > 0) {
                $commentMore.click(function(e){
                    e.preventDefault();
                    $oneComment.addClass('expanded-comment');            
                });
                return true;
            }  

            if (!$oneComment.data('longTxt')) {
                var text = $.trim($oneComment.find('a.more').remove().end().html());
                $oneComment.data('longTxt', text);
                /*
                    Ab zeichen 195 nach einem Leerzeichen suchen und dann das Kommentar abschneiden
                    und wenn es kein Leerzeichen gibt
                    replace <br>
                */
                text = text.replace(/<br>|<br\/>/g, '|');
                if (text.length > 195) {
                    for (var i = 190; i <= 215; i++) {
                        if (text.charAt(i) === ' ') {
                            text = text.substring(0, i);
                            break;
                        } else if (i == 210){
                            /* if there are many spaces we can cut off at the end */
                            if (text.split(' ').length > 10) {
                                text = text.substring(0, 200) + ' ';
                            /* if there are many chars but not many line breaks */
                            } else {
                                text = text.substring(0, 50) + ' ';
                            }
                            break;
                        }
                    }
                }
                /* put the <br>s back */
                text = text.replace(/\|/g, '<br/>');
                /* Text einfuegen, mehr Button und shortText setzen */
                $oneComment.html(text).data('shortTxt', $oneComment.html());
                /* nur wenn ein mehr Button benoetigt wird
                if the character length is greater than 195, or number of line breaks (<br>) is more than 2 */
                if ($oneComment.data('longTxt').length > 195 || $oneComment.data('longTxt').split('<br').length > 2) {
                    $oneComment.append(templates.moreHTML);
                    $oneComment.data('expandable',true);
                }
                else {
                    $oneComment.data('expandable',false);
                }
                /*Falls der Text nun doch zu lang sein sollte. */
                if ($oneComment.height() > 45) {
                    text = text.split(' ');
                    for (var j = text.length - 1; j > 0; j--) {
                        text.splice(j, 1);
                        var tmpText = text.join(' ');
                        $oneComment.html(tmpText + '... ' + de.bild.settings.community.lang.more);
                        if ($oneComment.height() <= 45) {
                            $oneComment.html(tmpText).data('shortTxt', $oneComment.html()).append(templates.moreHTML);
                            break;
                        }
                    }
                }
            }

            $('a.more', $oneComment).click(function(e){
                e.preventDefault();
                expandComment($(this).parent());
            });
           
        });

        if ($elem) {
           return $elem;
        }
    };
    /**
     * Expands and collapses comment text
     * @function
     * @name expandComment
     * @memberOf de.bild.community
     * @param {$Object} $elem jQuery Object = the clicked button (a.more)
     * @private
     */
    function expandComment($elem){
        var $more;
        /* all comments expand/collapse
          if no element is passed, let's target all comments */
        if (!$elem) {
            var $elem = $('p.post-content');
            $elem.each(function(index){
                var $this = $(this);
                if (!$this.data('expandable')) return true;
                $more = $this.find('a.more');
                $more.remove();
                /* show short or long text
                  if uncollapsed: */
                if ($('div.comments a.collapse').length) {
                    /* lengthen */
                    if ($this.html() != $this.data('longTxt')) {
                       $this.html($this.data('longTxt')).hide().fadeIn(settings.fadeSpeed);
                    }
                } else {
                    /* shorten */
                    $this.html($this.data('shortTxt')).hide().fadeIn(settings.fadeSpeed).append(templates.moreHTML);
                }
                $this.find('a.more').click(function(e){
                    e.preventDefault();
                    expandComment($(this).parent());
                });
            });
        /* single comment expand (collapse is not executed) */
        } else {
            $more = $elem.find('a.more');
            if ($more.length > 0) {
                $more.remove();
                $elem.hide().html($elem.data('longTxt')).fadeIn(settings.fadeSpeed); 
                //In forums there are two spans with the long and the short text
                $elem.find('span.comment-start').hide();
                $elem.find('span.comment-end').show();
            }
        }
    };
    /**
     * Function called when someone comments on a comment 'Kommentieren'. A HTML snippet is loaded and placed under the last comment
     * @function
     * @name getCommentbox
     * @memberOf de.bild.community
     * @param {Object} elem The clicked object (li a.reply)
     * @private
     */
    function getCommentbox(elem){
        var $elem = $(elem);
   
        /* stop click if disallowed */
        if ($elem.data('clickOff')) {
            //if the facebook check button is out of screen, jump to element */
            var $fbcheckbox = $('#fb-threaded');
            if ($fbcheckbox.length && de.bild.utils.inViewport($fbcheckbox) === 0) {
                var targetOffset = ($fbcheckbox.offset().top - $(window).height() + 50);
                de.bild.utils.scrollTo(targetOffset);
            };
            return;
        } 
        /* no more clicky click until we say so */
        $elem.data('clickOff', true);
       
        /* get the parent */
        var $post = $elem.parents('li.post');
       
        /* if a form is already there */
        if ($post.find('ol.threaded-comment-list form').length === 0) {
            de.bild.httpFist.load({
                'obj': elem,
                'callback': function(html, $target){
                   
                    /* if threaded */
                    if ($post.find('ol').length) {
                        var $module = $post.find('ol:eq(0)').append(templates.threadedCommentItem.replace('%CONTENT%', $(html).html()));

                    /* this condition for profile pages*/   
                    } else if ($post.find('div.post-actions').length) {
                        $post.find('div.post-actions').after(templates.threadedCommentList.replace('%CONTENT%', $(html).html()));

                    } else {
                        $post.append(templates.threadedCommentList.replace('%CONTENT%', $(html).html()));
                    }
                    /* Scroll to comment field and focus */
                    var $threadField = $('#usr-comment-threaded');
                
                    /* if the facebook check button is out of screen, jump to element */
                    var $fbcheckbox = $('#fb-threaded');
                    if ($fbcheckbox.length && de.bild.utils.inViewport($fbcheckbox) === 0) {
                        var targetOffset = ($fbcheckbox.offset().top - $(window).height() + 50);
                        de.bild.utils.scrollTo(targetOffset);
                    };
                    $threadField.val('').focus();
                    /* Close socialbar popups when clicked somewhere on the page */
                    docClickHandler = function(e){
                        var $target = $(e.target);
                        /* don't catch clicks on the form area or on the reply button that opened it */
                        if ($target.parents('li.threaded-comment-area').length === 0) {
                            var $thread = $('#usr-comment-threaded'),
                            $firstOl = $thread.parents('ol:eq(0)');
                            /* already some comments or the default text in there? */
                            var threadVal = $thread.val();
                            if ($.trim(threadVal) !== '' && threadVal !== $thread.attr('title')) return false;
                            if ($firstOl.find('li').length < 2) {
                                $firstOl.remove();
                            } else {
                                $thread.parents('li:eq(0)').remove();
                            }
                            $doc.off('click', docClickHandler);
                            /* form is closed for the handler's object */
                            $target.data('clickOff', false);
                        }
                    };
                    setFormFieldState($threadField,true);
                    $doc.on('click', docClickHandler);
                    /* clicky click back on */
                    $elem.data('clickOff', false);
                }  
            });
           
        // just focus the exisiting form   
        } else {  
            $('#usr-comment-threaded').focus();
        }
       
        return false;
    };
    /**
     * Called when the send button in the comment field is clicked. If the comment field is empty, it will be closed and lose focus. A loading layer is positioned over the textfield after a click
     * upon submission the update comments timeout will be reset.
     * @function
     * @name
     * @memberOf de.bild.community
     * @param {Object} elem - submitted form
     * @private
     */
    function sendComment(elem){
        var $elem = $(elem);
        //validate
        //if (!validateForm($elem)) return false;
        // get comment field
        var $commentField = $('#usr-comment');
        //Hover Effekt vom Abschicken Button wegnehmen
        $elem.find('input[type=submit]').blur();
       
        // if we have a valid message send it off
        // trim the contents
        var commentFieldVal = de.bild.utils.trim($commentField.val());
       

        if (commentFieldVal !== '' && commentFieldVal !== $commentField.attr('title')) {
            // insert trimmed content in form
            $commentField.val(commentFieldVal);
            var dataType= 'json',
            callback;
            /*
                post moderation goes straight into the list unless liveComments are on
            */
            if ($elem.hasClass('postmoderation')) {
                callback = function(response, type){
                    removeLoadingLayer();
                    if (response) {

                        var $fieldset = $elem.find('fieldset');
                        if (response.form) {
                            $fieldset.remove();
                            $elem.append($(response.form));
                        }

                        if (response.status === 'error') {
                            if (response.message) {
                                showLightBox({
                                    'content' : templates.lbMessage.replace('%CONTENT%', response.message).replace('%CLASS%', 'error').replace('%HEADING%', de.bild.settings.community.lang.error)
                                });
                            }
                            return;
                        }

                        var $textArea = $('#usr-comment');
                        // successful message
                        if (response.status === 'success' && response.comments) {
                            // is box checked? if so, send to FB
                            var $newComs = $(response.comments);
                            $newComs.hide();                        
                            // first comment?
                            var $comments = $elem.parents('div.comments'), $ol = $comments.find('ol').eq(0);
                            // if this is the first comment that we are seeing
                            if ($ol.length === 0) {
                                //replace the add first comment message with an empty ol
                                $comments.find('div.sys-message').replaceWith('<ol/>');
                                $ol = $comments.find('ol').eq(0);
                                // no user icon in the orginal form?
                                if ($comments.find('img.usr-ico') == 0)
                                    $ol.addClass('no-icons');
                            }
                            $ol.prepend($newComs);
                            //fading new comment
                            $('li.post:hidden', $ol).fadeIn(settings.fadeSpeed);
                            // reset form
                            $elem.removeClass('active');
                            userCommentCount++;
                           
                            // update the tab number
                            updateCount($('#ugc-comment-count'), 1);

                            // we check for new comments
                            checkforNewComments(true);
                       
                        // error
                        } else {
                           setFormFieldState($textArea,true);

                        }
                   

                        if (response.form) {
                            var $textArea = $('#usr-comment');
                            /* success? */       
                            if (response.status === 'success') {
                                var $success = $elem.find('p.success');
                                if ($success.length) {
                                    delayToFade($success, settings.delayToFade, function(){
                                        $elem.removeClass('active').find('fieldset').show();
                                    });
                                }
                                /* reset form */
                                $elem.find('input[type!=submit][type!=hidden]').val('');
                                setFormFieldState($textArea, false);
                                checkforNewComments(true);
                               
                             /* no success :( */
                            } else {
                                 /* all fields should be be active*/
                                $elem.find('input[type!=submit]').addClass('active');
                                 /* adjust the height of the textarea to its content*/
                                setFormFieldState($textArea,true);
                            }
                        }
                    }    
                   
                };

            /* premoderation, just show success message  */
            } else {
                callback = function(response, type){
                    removeLoadingLayer();
                    if (response) {
                       
                        var $fieldset = $elem.find('fieldset');
                        if (response.form) {
                            $fieldset.hide();
                            $elem.html($(response.form));
                        }
                       
                        if (response.status === 'error') {
                            if (response.message) {
                                showLightBox({
                                    'content' : templates.lbMessage.replace('%CONTENT%', response.message).replace('%CLASS%', 'error').replace('%HEADING%', de.bild.settings.community.lang.error)
                                });
                            }
                            return;
                        }
                       
                        if (response.form) {
                            var $textArea = $('#usr-comment');
                            /* success?  */       
                            if (response.status === 'success') {
                                var $success = $elem.find('p.success');
                                if ($success.length) {
                                    delayToFade($success, settings.delayToFade, function(){
                                        $elem.removeClass('active').find('fieldset').show();
                                    });
                                }
                                /* reset form  */
                                $elem.find('input[type!=submit][type!=hidden]').val('');
                                setFormFieldState($textArea, false);
                                checkforNewComments(true);
                               
                            /* no success :(  */
                            } else {
                                /* all fields should be be active  */
                                $elem.find('input[type!=submit]').addClass('active');
                                /* adjust the height of the textarea to its content  */
                               setFormFieldState($textArea,true);
                            }
                        } 

                    /* no response? network fail */   
                    } else {
                        /*PROCO-994*/
                        $elem.find('fieldset')
                            .hide()
                            .end()
                            .append(templates.message.replace('%CONTENT%', de.bild.settings.community.lang.error + '. ' + de.bild.settings.community.lang.tryagain).replace('%CLASS%', 'error'));
                    }
                };
            }
            /* check to see if the user is logged into facebook if box ticked*/
            if ($elem.find('fieldset input#fb-cmt-post:checked').length || $elem.find('fieldset input#fb-threaded:checked').length){
                de.bild.social.postingCommentToFeed();
            }
            submitForm($elem.find('fieldset'), {
                'url' : $elem.attr('action'),
                'params' : $elem.serialize(),
                'callback' : callback,
                'dataType' : dataType,
                'method' : 'POST'
            });
        /*Wenn Kommentarfeld leer ist, klappt das Kommentarfeld zu*/
        } else {
            setFormFieldState($commentField, false);
        }
        return false;
    };
    /**
     * for threaded comments form: seralises form and sends data
     * @function
     * @name makeThread
     * @memberOf de.bild.community
     * @param {Object} elem - submitted form
     * @private
     */
    function makeThread(elem){       
        var $elem = $(elem),
        $text = $('#usr-comment-threaded'),
        /* the list element that houses the form*/
        $parent = $elem.closest('li.threaded-comment-area'),
        /* the ordered list element (only for direct comments, not threaded)*/
        $parentOl = $parent.parent('ol.threaded-comment-list');
        $elem.find('input[type=submit]').blur();
        /* remove extra whitespace and carriage returns*/
        var textVal = de.bild.utils.trim($text.val());
        /* if there is a message, send it off*/
        if (textVal !== '' && textVal !== $text.attr('title')) {
            /* insert trimmed content in form*/
            $text.val(textVal);
           
            var dataType = 'json',
            callback;
            /* post moderation goes straight into the list
              and returns JSON! */
            if ($elem.hasClass('postmoderation')) {
                callback = function(response, type){
                    removeLoadingLayer();
                    if (response) {     
                   
                        if (response.status === 'error') {
                            if (response.message) {
                                showLightBox({
                                    'content' : templates.lbMessage.replace('%CONTENT%', response.message).replace('%CLASS%', 'error').replace('%HEADING%', de.bild.settings.community.lang.error)
                                });
                            }
                            return;
                        }
                                     
                        $elem.remove();
                       

                        var $textArea = $('#usr-comment');
                        /*success message*/
                        if (response.status === 'success' && response.comments) {

                                var $newComs = $(response.comments);                                                       
                                $newComs.hide();
                                //remove threaded-comment-area
                             $parent.remove();                                                                                                              
                                $parentOl.append($newComs);                                                                                   
                                /*fading new comment*/
                                $('li.newComment:hidden', $parentOl).fadeIn(settings.fadeSpeed);
                                /* reset form*/
                                $elem.removeClass('active');
                                userCommentCount++;
                                /* update the tab number*/
     
                                updateCount($('#ugc-comment-count'), 1);

                            /* we check for new comments*/
                            checkforNewComments(true);
                            $doc.off('click', docClickHandler);

                        /* error*/
                        } else {
                            setFormFieldState($textArea,true);
                        }
                    }
                };
            } else { /* premoderation, just show success message */              
                callback = function(response, type){
                    if (response) {
                       
                        if (response.status === 'error') {
                            if (response.message) {
                                showLightBox({
                                    'content' : templates.lbMessage.replace('%CONTENT%', response.message).replace('%CLASS%', 'error').replace('%HEADING%', de.bild.settings.community.lang.error)
                                });
                            }
                            return;
                        }                      
                       
                        if(response.status === 'success' && response.form){
                            /*insert success message*/
                            $text.val($text.attr('title')).blur();
                            $parent.html(response.form);
                            /*take away the arrow if form has one on the OL*/
                            if ($parentOl.length) {
                                $parentOl.addClass('message');
                            }
                            /* remove from DOM*/
                            delayToFade($parent);
                            $doc.off('click', docClickHandler);
                        }
                    } else {
                        removeLoadingLayer();
                    }
                };
            }
           
            if ($elem.find('fieldset').find('input#fb-cmt-post:checked').length || $elem.find('fieldset').find('input#fb-threaded:checked').length){
                de.bild.social.postingCommentToFeed();
            }
                                   
            submitForm($elem.find('fieldset'), {
                'url' : $elem.attr('action'),
                'params' : $elem.serialize(),
                'dataType' : dataType,
                'timeout' : 15000,
                'method' : 'POST',
                'callback' : callback
            });
        }
        return false;
    };

    /* ============================================= START REAL-TIME COMMENTING */
    /**
     * kicks off the timeout to check for new comments after the specified delay
     * @function
     * @name checkforNewComments
     * @param {Bool} reset When true, commentRequestCount will be reset to 0 and the server will poll for new comments
     * @memberOf de.bild.community
     * @private
     */
    function checkforNewComments(reset) {
        if (variables.liveCommentsOn && settings.allowLiveComments) {
            if (reset === true) {
                commentRequestCount = 0;
            }   
            if (commentUpdateTimeout) {
                clearTimeout(commentUpdateTimeout);
            }
            /* check to see of we've exceed the maximum allowed requests  */
            if (commentRequestCount !== variables.commentRequestMaximum) {
                commentUpdateTimeout = setTimeout(updateComments, variables.checkForNewCommentsDelay);
            }   
        } else {
            if (commentUpdateTimeout) clearTimeout(commentUpdateTimeout);
        }
    };
    /**
     * checks for the presence of new comments via json
     * if new comments are available we fade in the new comments element and update the count in the html
     * @function
     * @name updateComments
     * @memberOf de.bild.community
     * @private
     */
    function updateComments(){
        if (commentUpdateTimeout) clearTimeout(commentUpdateTimeout);
        var $comments = $contentWrapper.find('div.comments');
        if ($comments.length < 1) {return;}
        var $hint = $comments.find('a.hint.new-comments');
        if ($hint.length === 0) {return;}

        var _url = de.bild.settings.community.urls.getNumberOfComments.replace('%UGCID%', variables.ugcid),
        jqxhr =  $.ajax({
            url: _url,
            dataType: 'json',
            cache: true
        })
        .done(function(data, textStatus, xhr){

            var lastModified = xhr.getResponseHeader('Last-Modified'),
            newComments = xhr.getResponseHeader('X-CommentCount'),
            newCommentsDelta;

            if (newComments > variables.totalComments) {
                /* the total of new comments minus those that the user has made */
                newCommentsDelta = (newComments - variables.totalComments) - userCommentCount;
                if (newCommentsDelta > 0) {
                $hint.fadeIn(settings.fadeSpeed)
                    .attr('href', de.bild.settings.community.urls.getNewComments.replace('%UGCID%/%TIME%/%NUMBEROFCOMMENTS%', variables.ugcid + '/' + variables.oldestCommentCommitTimeSeenInBrowser  + '/' + newCommentsDelta))
                    .data('newComments', newComments)
                    .data('lastModified', lastModified)
                    .get(0).innerHTML = (newCommentsDelta > 1) ? de.bild.settings.community.lang.newComments.replace('%COUNT%',newCommentsDelta) : de.bild.settings.community.lang.newComment;
                }   
            }

            /* bump up the count and do it again */
            commentRequestCount++;
            checkforNewComments();

        })
        .fail(function(){
            $hint.hide();
        });
    };
   
    /* ============================================= END REAL-TIME COMMENTING */

    /**
     * Sets up all the live functionality of buttons and forms for UGC comment fields
     * @function
     * @name setupCommentEvents
     * @memberOf de.bild.community
     * @private
     */
    function setupCommentEvents(){

        /* General function for textareas. Default text is deleted and the colour of the text changes to black. When the doc is clicked, everything will be reset. It used to be onBlur.  */
        de.lib.live($body, 'form.cform textarea:not(#usr-comment-threaded), form.cform input[type="text"], form.cform input[type="email"], form.cform input[type="tel"], div.comments input[type="text"]',  {
            focus: function(){
                var $this = $(this);
                setFormFieldState($this, true);
                docClickHandler = function(e){
                    var $target = $(e.target);
                    /* don't catch clicks on the form area */
                    if ($target.parents('form.cform').length === 0) {

                        setFormFieldState($this, false);
                        $doc.off('click', docClickHandler);
                    }
                };
                $doc.on('click', docClickHandler);
            },
            keyup: function(){
                /*  Maximale Kommentarlaenge ueberpruefen */
                var $this = $(this), comment = $this.val();
                var value = comment.length <= variables.maxCommentLength ? comment : comment.substring(0, variables.maxCommentLength);
                if (value.length == variables.maxCommentLength) {
                    $this.val(value);
                }
            }
        }); 

        /* Bei Klick auf Kommentieren Kommentarformular einblenden */
        de.lib.live($contentWrapper, 'div.comments li a.reply','click', function(e){
            e.preventDefault();
            getCommentbox(this);
        });
        /* captcha events */
        de.lib.live($contentWrapper, 'div.comments div.captcha a.reload','click', function(e){
            e.preventDefault();
            $(this).closest('form').trigger('submit');
        });
        /* Click on the send button  */
        de.lib.live($contentWrapper, 'form.commentform, form.comment-nologin','submit', function(e){
            e.preventDefault();
            var $parent = $(this).parent('div.comments');
            if ($parent.length > 0) {
                sendComment(this);
            } else {
                makeThread(this);
            }
            /* just in case */
            return false;
        });
        /* All comments expand and collapse */
        de.lib.live($contentWrapper, 'div.comments a.expand','click', function(e){
            e.preventDefault();
            var $this = $(this);
            if ($this.hasClass('collapse')) {
                $this.removeClass('collapse').html($this.html().replace(de.bild.settings.community.lang.closeall, de.bild.settings.community.lang.openall));
            }
            else {
                $this.addClass('collapse').html($this.html().replace(de.bild.settings.community.lang.openall, de.bild.settings.community.lang.closeall));
            }
            expandComment();
        });

        /* Loading new comments for real-time comments and sub-comments*/
        de.lib.live($contentWrapper, 'div.comments a.hint.new-comments, ol.threaded-comment-list li > a.hint','click', function(e){
           e.preventDefault();         
           var $this = $(this);
            /*add Loadinglayer */
            loadingLayer($(this));
            de.bild.httpFist.load({
                'obj': this,
                'callback': function(response){
                    var $newComs = $(response);
                    $newComs.hide();
                    var $this = $(this),
                    newComments = $this.hasClass('new-comments'),
                    $elem;

                    /* Replace for new comments, append for children*/
                    if(newComments){
                        $elem = $('ol', $this.parents('div.comments')).eq(0);
                        $elem.html($newComs);
                       
                        /* here we are setting the value of total comments loaded AFTER click*/
                        if ($this.data('newComments') > variables.totalComments){
                            variables.totalComments = $this.data('newComments');
                        }
                        $this.hide();
                        /* reset the usercomment count after the new comment alert has been click*/
                        userCommentCount = 0;

                    } else {
                    	//remove all comment except the last and append the new loaded
                        $elem = $this.parents('ol').eq(0); 
                        $elem.children('li:gt(0)').remove();
                        $elem.append($newComs);   
                    }

                    /*fading new comments*/
                    removeLoadingLayer();
                    $('li.post:hidden', $elem).fadeIn(settings.fadeSpeed);
                },
                'error' : function(){
                    removeLoadingLayer();
                }
            });
        });    
    };

/* ================================================================================================================ END ARTICLE COMMENTS FORMS, BUTTONS, EVENTS */

/* ================================================================================================================ START LIGHTBOX FORMS

    dependencies:
    de.bild.social.userPhotos
    de.bild.social.publishStream

*/

    /**
     * setups the ajax upload for upload forms
     * the event delays the submission until we've built in an iframe
     * @function
     * @name setupLightboxForms
     * @memberOf de.bild.community
     * @private
     */
    function setupLightboxForms() {
        /*  Lightbox Form  submit  - we capture upload forms here too ! :) */
      
        /* Avoiding accidental submit by pressing return */
        de.lib.live($body, 'div.lightbox form.cform input[type!=submit]','keypress', function(e){
            var code = (e.keyCode ? e.keyCode : e.which);
            if(code == 13) {                   
                return false;          
            }
        });
       
        de.lib.live($body, 'div.lightbox form.cform','submit', function(e){
            e.preventDefault();
            var $this = $(this);
            if ($this.attr('id') === 'blockinguser') {
                handleBlockUser($this);
            } else {
                submitLightBoxForm($this);
            }
           
        });

        /* Extra close button in lightbox form
         reset button in light box form - even though it's a reset button :) */
        de.lib.live($body, 'div.lightbox form.cform input.btn-close, div.lightbox form.cform input.btn-reset','click', function(e){
            closeLightBox();
        });
    };

    /**
     * does what the name says
     * @function
     * @name submitLightBoxForm
     * @param {$Object} jQuery form object
     * @memberOf de.bild.community
     * @private
     */
     function submitLightBoxForm($form) {
        /*validate required fields */
        if (!validateForm($form)) return false;

        /* crude - this should not really be done this way
            in upload forms
            remove default description text from textarea before submit */
        clearTextareas($form);

        /* don't submit upload forms via this method*/
        if (!$('input:file', $form).length) {
            /* check for fb box in multi upload */
            if($form.find('fieldset input.fbcheck:checked').length){
                var photoperm = de.bild.social.userPhotos(),
                streamperm = de.bild.social.publishStream();
                if( (photoperm === false) || (streamperm === false)  ){
                    /* gather permissions in popup */
                    de.bild.social.loginToFB(function(){
                        /* delay upload until facebook response so weird stuff doesnt happen! */
                        submitForm($form.find('fieldset'),
                            {
                            'url' : $form.attr('action'),
                            'params' : $form.serialize(),
                            'timeout' : '15000', /* increase timeout here because we are uploading to FB in background */
                            'method' : $form.attr('method'),
                            'callback' : function(response, type){
                                $form.css('opacity', 1).parents('div.section').replaceWith(response);
                            }
                        });
                    }, {
                        scope: 'publish_stream,user_photos'
                    });
                } else {
                    /* checked box, but has permissions, so carry on. */
                    submitForm($form.find('fieldset'),
                         {
                            'url' : $form.attr('action'),
                            'params' : $form.serialize(),
                            'method' : $form.attr('method'),
                            'timeout' : '15000', // increase timeout here because we are uploading to FB in background
                            'callback' : function(response, type){
                                $form.css('opacity', 1).parents('div.section').replaceWith(response);
                            }
                         });
                }
             /* there is no checked facebook thing, so just submit normally */
            } else {
                submitForm($form.find('fieldset'),
                 {
                    'url' : $form.attr('action'),
                    'params' : $form.serialize(),
                    'method' : $form.attr('method'),
                    'callback' : function(response, type){
                        if (type === 'error') {
                            closeLightBox({
                                'callback' : function(){
                                    showLightBox({
                                        'content' : templates.lbMessage.replace('%CONTENT%', de.bild.settings.community.lang.tryagain).replace('%CLASS%', 'error').replace('%HEADING%', de.bild.settings.community.lang.error)
                                    });
                                }
                            });
                            return;
                        }
                        $form.css('opacity', 1).parents('div.section').replaceWith(response);
                    }
                 });
            }
        /* upload form! */
        } else {
            /* check for fb */
            if($form.find('fieldset input#fb-threaded:checked').length){
                /* check upload permissions */
                var photoperm = de.bild.social.userPhotos(),
                streamperm = de.bild.social.publishStream();
                /* videos only need one perm */
                if($form.hasClass('videoUpload') == true && streamperm == false ){
                    de.bild.social.loginToFB(function(){
                        /* delay upload until facebook response! */
                        handleUpload($form, 'lightbox');
                    }, {
                        scope: 'publish_stream'
                    } );
                /* if either permission is false for a photo upload, get the permissions */
                } else if( (photoperm == false) || (streamperm == false)  ){
                    de.bild.social.loginToFB(function(){
                        /* delay upload until facebook response so weird stuff doesnt happen! */
                        handleUpload($form, 'lightbox');
                    }, {
                        scope: 'publish_stream,user_photos'
                    } );
                    
                /* user had permissions, upload that thang */
                }else{
                    handleUpload($form, 'lightbox');
                }
            /* FB not checked or not present, just do normal upload */
            } else {
                handleUpload($form, 'lightbox');
            }
        }
        return false;
     };

    /**
     * sets up the events to opensreport form in a lightbox
     * @function
     * @name setupReportFormEvents
     * @memberOf de.bild.community
     * @private
     */
     function setupReportFormEvents(){
        /* Report Lightbox trigger  */
        de.lib.live($contentWrapper, 'div.comments div.post-actions a.report, ul.fnc a.report','click', function(e){
            e.preventDefault();
            if (de.bild.sso.isLoggedIn() === false ) {
                de.bild.sso.login();
            } else {
                de.bild.httpFist.load({
                    'obj': this,
                    'callback': function(response, $target){
                        showLightBox({
                         'content': response
                        });
                    }
                });
            }
        });
     };

/* ================================================================================================================ END LIGHTBOX FORMS */

/* ================================================================================================================ START FORUMS */
   
    /* FORUM FORMS
    ///////////////////////////       */
    /**
     * Submits new thread data for the forums
     * @function
     * @name setupThreadForm
     * @memberOf de.bild.community
     * @private
     */
    function setupThreadForm(){
        /* don't need a live event because it's not an HTML snippet */
        var $elem = $('#create-forum-thread');
        if ($elem.length) {
            var $textfield = $('#thread-text');
            $textfield.TextAreaExpander($textfield.height());
            $elem.submit(function(e){
                e.preventDefault();
                $elem.find('input[type=submit]').blur();
                if (!validateForm($elem)) return false;
                var $fieldset = $elem.find('fieldset').first();
               
                submitForm($fieldset, {
                    'url': $elem.attr('action'),
                    'params': $elem.serialize(),
                    'method': 'POST',
                    'callback': function(response, type){
                   
                        if ($elem.find('input#fb-cmt-post:checked').length || $elem.find('input#fb-threaded:checked').length) {
                            de.bild.social.postingCommentToFeed($elem.serialize() + '&threadid=' + response);
                        }
                        $fieldset.html($('#success_content').html());
                        /* if no id is sent back */
                        if (response.length < 2) {
                            $fieldset.find('p.success').remove();
                            $fieldset.find('p.error').removeClass('hide');
                        } else {
                            $fieldset.find('p.error').remove();
                            $fieldset.find('p.success').removeClass('hide');
                        }
                    }
                });
                return false;
            });
        }
    };
   

/* ================================================================================================================ END FORUMS */

    /* NETWORK LAYER DROPDOWN
    ///////////////////////////       */

/* ================================================================================================================ START NETWORK BUTTONS + SEND TO A FRIEND */

    /**
     * Controlls the opening network layer and send to a friend lightbox
     * @function
     * @name setupNetworkLayer
     * @memberOf de.bild.community
     * @private
     */
    function setupNetworkLayer(){
       
        de.lib.live($body, '#networks', {
            mouseenter: function(){
                $(this).addClass('active').find('ul').show();
            },
            mouseleave: function(){
                $(this).removeClass('active').find('ul').hide();
            }
        });
       
        de.lib.live($('#networks'), 'a:first', 'click', function(e){
            e.preventDefault();
        });
        /* send to a friend */
        de.lib.live($body, '#tools #send a', 'click',function(e){
            e.preventDefault();
             de.bild.httpFist.load({
                /* on bild.de, the href is written in by the server, for the community not */
                'obj' : this,
                'callback': function(response, $target){
                    showLightBox({
                        'content': response,
                        'width' : 400,
                        'height' : 'auto',
                        'callback' : function(){
                            /* form submission
                                $('#safIM').val(window.document.location); */
                            var $messageField = $('#ssafMESSAGE');
                            if ($messageField.length) {
                                $messageField.keydown(function(){
                                    if ($messageField.val().length > 1500) {
                                        $messageField.val($messageField.val().substr(0, 1500));
                                    }
                                }).blur(function(){
                                    if ($messageField.val().length > 1500) {
                                        $messageField.val($messageField.val().substr(0, 1500));
                                    }
                                });
                            }
                        }
                    });
                }
            });
        });
    };

/* ================================================================================================================ END NETWORK BUTTONS + SEND TO A FRIEND */

/* ================================================================================================================ START NOTIFICATION POPUP */
   
    var notificationCookie = 'new_notification';
    /**
     * checks for cookie to see if new notification is there and triggers lightbox
     * @function
     * @name setupNotificationPopup
     * @memberOf de.bild.community
     * @private
     */

	function setupNotificationPopup() {
		if($.cookie(notificationCookie) && parseInt($.cookie(notificationCookie)) === 1) {
			var url = de.bild.settings.community.urls.newfeatureNotification;
			de.bild.httpFist.load({
				'url' : url,
				'callback' : function(response) {
					showLightBox({
						'content' : response,
						'callback' : function() {
							$.cookie(notificationCookie, null);
						},
						'onClose' : function() {

						}
					});

				}
			})
		}

	}

/* ================================================================================================================ END NOTIFICATION POPUP */

   

    /* AJAX LINKS FOR THE FIST
    ///////////////////////////       */
    /**
     * sets up events by which GET requests are fired
     * @function
     * @name setAjaxLinks
     * @memberOf de.bild.community
     * @private
     */
    function setAjaxLinks(){
        /* Initialise the load elements
         Loading passes a url direct from the href attribute*/
        $contentWrapper.find('a.' + settings.ajaxClassLoad).each(function(){
            var obj = this,
            $target = $(this).parent();
            de.bild.httpFist.load({
                'obj': obj,
                'replace' : true,
                '$target' : $target,
                'callback' : function(response,$target) {
                    initReattach($target);
                   
                    /* set up only when needed onload*/
                    if ($('div.comments').length) {
                        setTimeout(function(){
                            checkforNewComments();
                        }, settings.startCheckCommentsDelay);
                        /* tell the world about it and pass the ugc id of the article*/
                        $body.trigger('commentEventsSetup', {ugcid: 'ugc-' + variables.ugcid});
                    }
                   
                },
                'error' : function(xhr, textStatus, $target){
                    if ($target.length) {
                        /* if not live show the returned error */
                        if (de.bild.env.domain !== 'bild.de') {
                            $target.html(templates.lbMessage.replace('%CLASS%', 'error').replace('%HEADING%', de.bild.settings.community.lang.error).replace('%CONTENT%', xhr.status + ' : '+ textStatus));
                        }
                    }          
                 }
            });
        });
        /* Content will be loaded into the specified target via innerHTML
         global so that it works in lightboxes */
        de.lib.live($body, 'a.' + settings.ajaxClass, 'click', function(e){
            e.preventDefault();
            var obj = this;
            de.bild.httpFist.load({
                'obj': obj,
                'callback' : function(response,$target) {
                    initReattach($target);
                }
            });
        });
        /* Content will replace the specified target via replaceWith
         global so that it works in lightboxes */
        de.lib.live($body, 'a.' + settings.ajaxClassReplace+', input.' + settings.ajaxClassReplace, 'click', function(e){
            e.preventDefault();
            var obj = this;
            de.bild.httpFist.load({
                'obj': obj,
                'replace' : true,
                'callback' : function(response,$target) {
                    initReattach($target);
                    if ($(this).parents('div.pag').length) {
                        var targetOffset = ~~($target.offset().top);
                        de.bild.utils.scrollTo(targetOffset);
                    }
                }
            });
        });
 
        /* Onchange event for select boxes */
        de.lib.live($contentWrapper, 'select.' + settings.ajaxClassReplace, 'change', function(e){
            e.preventDefault();
            var obj = this,
            $form = $(this).parents('form.listsort');
            $form.addClass('loading');
            de.bild.httpFist.load({
                'obj': obj,
                'replace' : true,
                'callback' : function(response,$target) {
                    initReattach($target);
                    $form.removeClass('loading');
                }
            });
        });
        /* Onsubmit event for forms that open lightboxes (usually upload forms)
         we disable the esc/body click close for these to prevent people losing data */

  de.lib.live($contentWrapper, 'form.' + settings.ajaxClassLightBox, 'submit', function(e) {
   e.preventDefault();
   var $this = $(this), thisAction = $this.attr('action');
   if(thisAction.length) {
    de.bild.httpFist.load({
     'url' : thisAction,
     'callback' : function(response) {
      showLightBox({
       'closeOnEsc' : false,
       'closeOnBodyClick' : false,
       'content' : response
      });
     }
    });
   }
  });
  };

    /* INIT AND RE-INIT FUNCTIONS
    ///////////////////////////       */
    /**
     * a collection of functions that need to be fired after new content ist loaded. this is to make sure events and states are properly set up
     * @object
     * @name reattach
     * @memberOf de.bild.community
     * @private
     */
    var reattach = {
        /**
         * initiates comment functions after a new snippet has loaded
         * text shortening and checks if live comments update variable has been toggled
         * @function
         * @name comments
         * @memberOf reattach
         * @param {$object} $el option jQuery object which is the parent container of the snippet.
         * @private
         */
        comments : function($el){
            var $parent = ($el) ? $el : $contentWrapper;
            shrinkComments($el);
            if ($parent.hasClass('comments') || $parent.find('div.comments').size() > 0) {
                /* if live comments are switch on (usually declared in the snippet) */
                checkforNewComments();
                /* check for anon likes every load (pagination etc) */
                checkAnonLikes();
            }
        },
        /**
         * when a user is logged in in another tab for instance, loggedin content will be shown
         * let's update the bar if necessary
         * !! this should be moved to de.bild.sso and just triggered from here
         * @function
         * @name checkLogin
         * @memberOf reattach
         * @private
         */
        checkLogin : function(){
            if (de.bild.sso.isLoggedIn() && de.bild.sso.isUserBarOn() === false) {
                de.bild.sso.renderUserBar();
            } else if (de.bild.sso.isLoggedIn() === false && de.bild.sso.isUserBarOn()) {
                de.bild.sso.renderUserBar();
            }
        },

        like : function($el){
          var $parent = ($el) ? $el : $contentWrapper; 
          saveLikeStatus($el);
        },

        followerList : function($el){
          var $parent = ($el) ? $el : $contentWrapper; 
          setupFollowerList($el);
        }
       
    };
    /**
     * loops through the reattach object and executes its functions
     * @function
     * @name initReattach
     * @memberOf de.bild.community
     * @private
     */
    function initReattach(arg){
        arg = arg || false;
        /* init runtime Funktionen */
        for (var key in reattach) {
            if (reattach.hasOwnProperty(key) && typeof reattach[key] === 'function') {
                reattach[key](arg);
            }
        }
    };
    /**
     * initialise the requisite functions
     * @function
     * @name init
     * @param {function} callback optional callback once the community is loaded
     * @memberOf de.bild.community
     * @private
     */
    function init(callback){
        /* assign DOM vars */
        $contentWrapper = $('#innerWrapper');
        $body = $('body');
        $doc = $(document);

        /* set up all UGC events */
        setAjaxLinks();
       
        shrinkComments();

        /* community comments :) */
        setupCommentEvents();
       
        /* are comments already in the page? */
       
        if ($('div.comments').length) {
            checkforNewComments();
        }
       
        /* forum related */
        setupThreadForm();
       
        /* lightbox forms */
        setupLightboxForms();

        /* send to a friend list */
        setupNetworkLayer();
       
        /* security question lightboxes */
        setupSecurityQuestions();
       
        /* 1414 - no numbers in JS Functions, m'kay? */
        setupFourteenFourteenForm();
       
        /* i like! */
        setupLikeButtonsEvents();
       
        /* parse likes */
        saveLikeStatus($contentWrapper);
       
        /* check for anon comments (even when content not loaded by fist) */
        checkAnonLikes();
      
       /* profile pages */
        setupProfileEvents();
        getProfileData();

        setupReportFormEvents();

        /*
            Paket 2
        */

        setupNotificationPopup();
  		setupCommunityCenter();
        setupFollowerList();
        setupFollowButtons();
        setupBusinessCardOverlays();

        if (typeof callback === 'function') {
         callback();
        }
    };
    /* public methods */
    return {
        'init': function(callback){
            callback = callback || false;
            init(callback);
            return true;
        },
       
        'vars' : variables,
        'update' : function(data){
            return updateVars(data);
        },
        'upload' : function(id, type){
            type = type || '';
            showUploadResults(id,type);
        },
        'uploadProgressBar' : function(id,url){
            uploadProgressBar(id,url);
        },
        'loadTeaserComments' : function(idMap,url){
            /* if no params were passed, just try to reload the cached version */
            if (arguments.length === 0) {
                showTeaserComments();
            } else {
                loadTeaserComments(idMap,url);
            }
        },
        'getCustomSessionParam1' : function(){
            return getCustomSessionParam();
        },
        'updateContentId' : function(contentId, docType){
            return updateContentId(contentId, docType)
        },
        'closeLightBox' : function(data){
            data = data || {};
            closeLightBox(data);
        }
    }
})(jQuery);
/*de.bild.community:25798988.1*/


/*de.bild.conf:25425026.3*/



//Sofortige Ausführung von Anpassungen


//Globale Ajax Konfiguration
jQuery.ajaxSetup({ cache: true });

//Anpassungen, die vorgenommen werden, nachdem das Dokument geladen ist.
jQuery(document).ready(function($) {
	
    //Last Child Workaround für IE7/8
    $('ul.lead').last().addClass('leadLast');


    //Z-Index fix for Shift module
    $('.ie7 .shift').on("mouseenter mouseleave", function() {
        $(this).closest('section').toggleClass('fixit');
        $(this).closest('li').toggleClass('fixit');
        $(this).closest('div.hentry').toggleClass('fixit');
    });

    //zus. css-klasse f. ie7/8 bei tabellen
    $('.element tbody tr:nth-child(odd)').addClass('odd');
    
});

/*xoz-bild.min:23584092.19*/

(function(c,d){var a=c.document;(function(){var e=false,f=/xyz/.test(function(){xyz;})?/\b_super\b/:/.*/;this.JRClass=function(){};JRClass.extend=function(l){var j=this.prototype;e=true;var h=new this();e=false;for(var g in l){h[g]=typeof l[g]=="function"&&typeof j[g]=="function"&&f.test(l[g])?(function(m,n){return function(){var p=this._super;this._super=j[m];var o=n.apply(this,arguments);this._super=p;return o;};})(g,l[g]):l[g];}function k(){if(!e&&this.init){this.init.apply(this,arguments);}}k.prototype=h;k.constructor=k;k.extend=arguments.callee;return k;};})();var b=JRClass.extend({init:function(f,e){if(typeof f=="string"){this.video=a.getElementById(f);}else{this.video=f;}this.video.player=this;this.values={};this.elements={};this.options={autoplay:false,preload:true,useBuiltInControls:false,controlsBelow:false,controlsAtStart:false,controlsHiding:true,defaultVolume:0.85,playerFallbackOrder:["html5","flash","links"],flashPlayer:"htmlObject",flashPlayerVersion:false};if(typeof b.options=="object"){_V_.merge(this.options,b.options);
}if(typeof e=="object"){_V_.merge(this.options,e);}if(this.getPreloadAttribute()!==d){this.options.preload=this.getPreloadAttribute();}if(this.getAutoplayAttribute()!==d){this.options.autoplay=this.getAutoplayAttribute();}this.box=this.video.parentNode;this.linksFallback=this.getLinksFallback();this.hideLinksFallback();this.each(this.options.playerFallbackOrder,function(g){if(this[g+"Supported"]()){this[g+"Init"]();return true;}});this.activateElement(this,"player");this.activateElement(this.box,"box");},behaviors:{},newBehavior:function(e,f,g){this.behaviors[e]=f;this.extend(g);},activateElement:function(e,f){if(typeof e=="string"){e=a.getElementById(e);}this.behaviors[f].call(this,e);},errors:[],warnings:[],warning:function(e){this.warnings.push(e);this.log(e);},history:[],log:function(f){if(!f){return;}if(typeof f=="string"){f={type:f};}if(f.type){this.history.push(f.type);}if(this.history.length>=50){this.history.shift();}try{console.log(f.type);}catch(g){try{opera.postError(f.type);
}catch(g){}}},setLocalStorage:function(f,g){if(!localStorage){return;}try{localStorage[f]=g;}catch(h){if(h.code==22||h.code==1014){this.warning(b.warnings.localStorageFull);}}},getPreloadAttribute:function(){if(typeof this.video.hasAttribute=="function"&&this.video.hasAttribute("preload")){var e=this.video.getAttribute("preload");if(e===""||e==="true"){return"auto";}if(e==="false"){return"none";}return e;}},getAutoplayAttribute:function(){if(typeof this.video.hasAttribute=="function"&&this.video.hasAttribute("autoplay")){var e=this.video.getAttribute("autoplay");if(e==="false"){return false;}return true;}},bufferedPercent:function(){return(this.duration())?this.buffered()[1]/this.duration():0;},each:function(e,h){if(!e||e.length===0){return;}for(var g=0,f=e.length;g<f;g++){if(h.call(this,e[g],g)){break;}}},extend:function(f){for(var e in f){if(f.hasOwnProperty(e)){this[e]=f[e];}}}});b.player=b.prototype;b.player.extend({flashSupported:function(){if(!this.flashElement){this.flashElement=this.getFlashElement();
}if(this.flashElement&&this.flashPlayerVersionSupported()){return true;}else{return false;}},flashInit:function(){this.replaceWithFlash();this.element=this.flashElement;this.video.src="";var e=b.flashPlayers[this.options.flashPlayer];this.extend(b.flashPlayers[this.options.flashPlayer].api);(e.init.context(this))();},getFlashElement:function(){var g=this.video.children;for(var f=0,e=g.length;f<e;f++){if(g[f].className=="vjs-flash-fallback"){return g[f];}}},replaceWithFlash:function(){if(this.flashElement){this.box.insertBefore(this.flashElement,this.video);this.video.style.display="none";}},flashPlayerVersionSupported:function(){var e=(this.options.flashPlayerVersion)?this.options.flashPlayerVersion:b.flashPlayers[this.options.flashPlayer].flashPlayerVersion;return b.getFlashVersion()>=e;}});b.flashPlayers={};b.flashPlayers.htmlObject={flashPlayerVersion:9,init:function(){return true;},api:{width:function(e){if(e!==d){this.element.width=e;this.box.style.width=e+"px";this.triggerResizeListeners();
return this;}return this.element.width;},height:function(e){if(e!==d){this.element.height=e;this.box.style.height=e+"px";this.triggerResizeListeners();return this;}return this.element.height;}}};b.player.extend({linksSupported:function(){return true;},linksInit:function(){this.showLinksFallback();this.element=this.video;},getLinksFallback:function(){return this.box.getElementsByTagName("P")[0];},hideLinksFallback:function(){if(this.linksFallback){this.linksFallback.style.display="none";}},showLinksFallback:function(){if(this.linksFallback){this.linksFallback.style.display="block";}}});b.merge=function(h,g,f){for(var e in g){if(g.hasOwnProperty(e)&&(!f||!h.hasOwnProperty(e))){h[e]=g[e];}}return h;};b.extend=function(e){this.merge(this,e,true);};b.extend({setupAllWhenReady:function(e){b.options=e;b.DOMReady(b.setup);},DOMReady:function(e){b.addToDOMReady(e);},setup:function(g,e){var k=false,j=[],h;if(!g||g=="All"){g=b.getVideoJSTags();}else{if(typeof g!="object"||g.nodeType==1){g=[g];k=true;
}}for(var f=0;f<g.length;f++){if(typeof g[f]=="string"){h=a.getElementById(g[f]);}else{h=g[f];}j.push(new b(h,e));}return(k)?j[0]:j;},getVideoJSTags:function(){var g=a.getElementsByTagName("video"),e=[],k;for(var h=0,f=g.length;h<f;h++){k=g[h];if(k.className.indexOf("video-js")!=-1){e.push(k);}}return e;},browserSupportsVideo:function(){if(typeof b.videoSupport!="undefined"){return b.videoSupport;}b.videoSupport=!!a.createElement("video").canPlayType;return b.videoSupport;},getFlashVersion:function(){if(typeof b.flashVersion!="undefined"){return b.flashVersion;}var f=0,j;if(typeof navigator.plugins!="undefined"&&typeof navigator.plugins["Shockwave Flash"]=="object"){j=navigator.plugins["Shockwave Flash"].description;if(j&&!(typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-shockwave-flash"]&&!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)){f=parseInt(j.match(/^.*\s+([^\s]+)\.[^\s]+\s+[^\s]+$/)[1],10);}}else{if(typeof c.ActiveXObject!="undefined"){try{var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");
if(g){f=parseInt(g.GetVariable("$version").match(/^[^\s]+\s(\d+)/)[1],10);}}catch(h){}}}b.flashVersion=f;return b.flashVersion;},isIE:function(){return !+"\v1";},isIPad:function(){return navigator.userAgent.match(/iPad/i)!==null;},isIPhone:function(){return navigator.userAgent.match(/iPhone/i)!==null;},isIOS:function(){return b.isIPhone()||b.isIPad();},iOSVersion:function(){var e=navigator.userAgent.match(/OS (\d+)_/i);if(e&&e[1]){return e[1];}},isAndroid:function(){return navigator.userAgent.match(/Android/i)!==null;},androidVersion:function(){var e=navigator.userAgent.match(/Android (\d+)\./i);if(e&&e[1]){return e[1];}},warnings:{videoNotReady:"Video is not ready yet (try playing the video first).",localStorageFull:"Local Storage is Full"}});if(b.isIE()){a.createElement("video");}c.VideoJS=c._V_=b;b.player.extend({html5Supported:function(){if(b.browserSupportsVideo()&&this.canPlaySource()){return true;}else{return false;}},html5Init:function(){this.element=this.video;this.fixPreloading();
this.supportProgressEvents();this.volume((localStorage&&localStorage.volume)||this.options.defaultVolume);if(b.isIOS()){this.options.useBuiltInControls=true;this.iOSInterface();}else{if(b.isAndroid()){this.options.useBuiltInControls=true;this.androidInterface();}}if(!this.options.useBuiltInControls){this.video.controls=false;if(this.options.controlsBelow){_V_.addClass(this.box,"vjs-controls-below");}this.activateElement(this.video,"playToggle");this.buildStylesCheckDiv();this.buildAndActivatePoster();this.buildBigPlayButton();this.buildAndActivateControlBar();this.loadInterface();this.getSubtitles();}},canPlaySource:function(){if(this.canPlaySourceResult){return this.canPlaySourceResult;}var h=this.video.children;for(var g=0,f=h.length;g<f;g++){if(h[g].tagName.toUpperCase()=="SOURCE"){var e=this.video.canPlayType(h[g].type)||this.canPlayExt(h[g].src);if(e=="probably"||e=="maybe"){this.firstPlayableSource=h[g];this.canPlaySourceResult=true;return true;}}}this.canPlaySourceResult=false;return false;
},canPlayExt:function(g){if(!g){return"";}var e=g.match(/\.([^\.]+)$/);if(e&&e[1]){var f=e[1].toLowerCase();if(b.isAndroid()){if(f=="mp4"||f=="m4v"){return"maybe";}}else{if(b.isIOS()){if(f=="m3u8"){return"maybe";}}}}return"";},forceTheSource:function(){this.video.src=this.firstPlayableSource.src;this.video.load();},fixPreloading:function(){if(typeof this.video.hasAttribute=="function"&&this.video.hasAttribute("preload")&&this.video.preload!="none"){this.video.autobuffer=true;}else{this.video.autobuffer=false;this.video.preload="none";}},supportProgressEvents:function(f){_V_.addListener(this.video,"progress",this.playerOnVideoProgress.context(this));},playerOnVideoProgress:function(e){this.setBufferedFromProgress(e);},setBufferedFromProgress:function(f){if(f.total>0){var e=(f.loaded/f.total)*this.duration();if(e>this.values.bufferEnd){this.values.bufferEnd=e;}}},iOSInterface:function(){if(b.iOSVersion()<4){this.forceTheSource();}if(b.isIPad()){}},androidInterface:function(){this.forceTheSource();
_V_.addListener(this.video,"click",function(){this.play();});this.buildBigPlayButton();_V_.addListener(this.bigPlayButton,"click",function(){this.play();}.context(this));this.positionBox();this.showBigPlayButtons();},loadInterface:function(){if(!this.stylesHaveLoaded()){if(!this.positionRetries){this.positionRetries=1;}if(this.positionRetries++<100){setTimeout(this.loadInterface.context(this),10);return;}}this.hideStylesCheckDiv();this.showPoster();if(this.video.paused!==false){this.showBigPlayButtons();}if(this.options.controlsAtStart){this.showControlBars();}this.positionAll();},buildAndActivateControlBar:function(){this.controls=_V_.createElement("div",{className:"vjs-controls"});this.box.appendChild(this.controls);this.activateElement(this.controls,"controlBar");this.activateElement(this.controls,"mouseOverVideoReporter");this.playControl=_V_.createElement("div",{className:"vjs-play-control",innerHTML:"<span></span>"});this.controls.appendChild(this.playControl);this.activateElement(this.playControl,"playToggle");
this.progressControl=_V_.createElement("div",{className:"vjs-progress-control"});this.controls.appendChild(this.progressControl);this.progressHolder=_V_.createElement("div",{className:"vjs-progress-holder"});this.progressControl.appendChild(this.progressHolder);this.activateElement(this.progressHolder,"currentTimeScrubber");this.loadProgressBar=_V_.createElement("div",{className:"vjs-load-progress"});this.progressHolder.appendChild(this.loadProgressBar);this.activateElement(this.loadProgressBar,"loadProgressBar");this.playProgressBar=_V_.createElement("div",{className:"vjs-play-progress"});this.progressHolder.appendChild(this.playProgressBar);this.activateElement(this.playProgressBar,"playProgressBar");this.timeControl=_V_.createElement("div",{className:"vjs-time-control"});this.controls.appendChild(this.timeControl);this.currentTimeDisplay=_V_.createElement("span",{className:"vjs-current-time-display",innerHTML:"00:00"});this.timeControl.appendChild(this.currentTimeDisplay);this.activateElement(this.currentTimeDisplay,"currentTimeDisplay");
this.timeSeparator=_V_.createElement("span",{innerHTML:" / "});this.timeControl.appendChild(this.timeSeparator);this.durationDisplay=_V_.createElement("span",{className:"vjs-duration-display",innerHTML:"00:00"});this.timeControl.appendChild(this.durationDisplay);this.activateElement(this.durationDisplay,"durationDisplay");this.volumeControl=_V_.createElement("div",{className:"vjs-volume-control",innerHTML:"<div><span></span><span></span><span></span><span></span><span></span><span></span></div>"});this.controls.appendChild(this.volumeControl);this.activateElement(this.volumeControl,"volumeScrubber");this.volumeDisplay=this.volumeControl.children[0];this.activateElement(this.volumeDisplay,"volumeDisplay");this.fullscreenControl=_V_.createElement("div",{className:"vjs-fullscreen-control",innerHTML:"<div><span></span><span></span><span></span><span></span></div>"});this.controls.appendChild(this.fullscreenControl);this.activateElement(this.fullscreenControl,"fullscreenToggle");},buildAndActivatePoster:function(){this.updatePosterSource();
if(this.video.poster){this.poster=a.createElement("img");this.box.appendChild(this.poster);this.poster.src=this.video.poster;this.poster.className="vjs-poster";this.activateElement(this.poster,"poster");}else{this.poster=false;}},buildBigPlayButton:function(){},buildAndActivateSpinner:function(){},buildStylesCheckDiv:function(){this.stylesCheckDiv=_V_.createElement("div",{className:"vjs-styles-check"});this.stylesCheckDiv.style.position="absolute";this.box.appendChild(this.stylesCheckDiv);},hideStylesCheckDiv:function(){this.stylesCheckDiv.style.display="none";},stylesHaveLoaded:function(){if(this.stylesCheckDiv.offsetHeight!=5){return false;}else{return true;}},positionAll:function(){this.positionBox();this.positionControlBars();this.positionPoster();},positionBox:function(){if(this.videoIsFullScreen){this.element.style.height="";if(this.options.controlsBelow){this.box.style.height="";}}else{if(this.options.controlsBelow){this.element.style.height="";}}},getSubtitles:function(){var f=this.video.getElementsByTagName("TRACK");
for(var g=0,e=f.length;g<e;g++){if(f[g].getAttribute("kind")=="subtitles"&&f[g].getAttribute("src")){this.subtitlesSource=f[g].getAttribute("src");this.loadSubtitles();this.buildSubtitles();}}},loadSubtitles:function(){_V_.get(this.subtitlesSource,this.parseSubtitles.context(this));},parseSubtitles:function(g){var f=g.split("\n"),e="",k,m,n;this.subtitles=[];this.currentSubtitle=false;this.lastSubtitleIndex=0;for(var l=0;l<f.length;l++){e=_V_.trim(f[l]);if(e){k={id:e,index:this.subtitles.length};e=_V_.trim(f[++l]);m=e.split(" --> ");k.start=this.parseSubtitleTime(m[0]);k.end=this.parseSubtitleTime(m[1]);n=[];for(var h=l;h<f.length;h++){e=_V_.trim(f[++l]);if(!e){break;}n.push(e);}k.text=n.join("<br/>");this.subtitles.push(k);}}},parseSubtitleTime:function(e){var g=e.split(":"),f=0;f+=parseFloat(g[0])*60*60;f+=parseFloat(g[1])*60;var h=g[2].split(/\.|,/);f+=parseFloat(h[0]);ms=parseFloat(h[1]);if(ms){f+=ms/1000;}return f;},buildSubtitles:function(){this.subtitlesDisplay=_V_.createElement("div",{className:"vjs-subtitles"});
this.box.appendChild(this.subtitlesDisplay);this.activateElement(this.subtitlesDisplay,"subtitlesDisplay");},addVideoListener:function(f,e){_V_.addListener(this.video,f,e.rEvtContext(this));},play:function(){this.video.play();return this;},onPlay:function(e){this.addVideoListener("play",e);return this;},pause:function(){this.video.pause();return this;},onPause:function(e){this.addVideoListener("pause",e);return this;},paused:function(){return this.video.paused;},currentTime:function(g){if(g!==d){try{this.video.currentTime=g;}catch(f){this.warning(b.warnings.videoNotReady);}this.values.currentTime=g;return this;}return this.video.currentTime;},onCurrentTimeUpdate:function(e){this.currentTimeListeners.push(e);},duration:function(){return this.video.duration;},buffered:function(){if(this.values.bufferStart===d){this.values.bufferStart=0;this.values.bufferEnd=0;}if(this.video.buffered&&this.video.buffered.length>0){var e=this.video.buffered.end(0);if(e>this.values.bufferEnd){this.values.bufferEnd=e;
}}return[this.values.bufferStart,this.values.bufferEnd];},volume:function(e){if(e!==d){this.values.volume=Math.max(0,Math.min(1,parseFloat(e)));this.video.volume=this.values.volume;this.setLocalStorage("volume",this.values.volume);return this;}if(this.values.volume){return this.values.volume;}return this.video.volume;},onVolumeChange:function(e){_V_.addListener(this.video,"volumechange",e.rEvtContext(this));},width:function(e){if(e!==d){this.video.width=e;this.box.style.width=e+"px";this.triggerResizeListeners();return this;}return this.video.offsetWidth;},height:function(e){if(e!==d){this.video.height=e;this.box.style.height=e+"px";this.triggerResizeListeners();return this;}return this.video.offsetHeight;},supportsFullScreen:function(){if(typeof this.video.webkitEnterFullScreen=="function"){if(!navigator.userAgent.match("Chrome")&&!navigator.userAgent.match("Mac OS X 10.5")){return true;}}return false;},html5EnterNativeFullScreen:function(){try{this.video.webkitEnterFullScreen();}catch(f){if(f.code==11){this.warning(b.warnings.videoNotReady);
}}return this;},enterFullScreen:function(){if(this.supportsFullScreen()){this.html5EnterNativeFullScreen();}else{this.enterFullWindow();}},exitFullScreen:function(){if(this.supportsFullScreen()){}else{this.exitFullWindow();}},enterFullWindow:function(){this.videoIsFullScreen=true;this.docOrigOverflow=a.documentElement.style.overflow;_V_.addListener(a,"keydown",this.fullscreenOnEscKey.rEvtContext(this));_V_.addListener(c,"resize",this.fullscreenOnWindowResize.rEvtContext(this));a.documentElement.style.overflow="hidden";_V_.addClass(this.box,"vjs-fullscreen");this.positionAll();},exitFullWindow:function(){this.videoIsFullScreen=false;a.removeEventListener("keydown",this.fullscreenOnEscKey,false);c.removeEventListener("resize",this.fullscreenOnWindowResize,false);a.documentElement.style.overflow=this.docOrigOverflow;_V_.removeClass(this.box,"vjs-fullscreen");this.positionAll();},onError:function(e){this.addVideoListener("error",e);return this;},onEnded:function(e){this.addVideoListener("ended",e);
return this;}});b.player.newBehavior("player",function(e){this.onError(this.playerOnVideoError);this.onPlay(this.playerOnVideoPlay);this.onPlay(this.trackCurrentTime);this.onPause(this.playerOnVideoPause);this.onPause(this.stopTrackingCurrentTime);this.onEnded(this.playerOnVideoEnded);this.trackBuffered();this.onBufferedUpdate(this.isBufferFull);},{playerOnVideoError:function(e){var f=$(this.box).parent().attr("id");project_objects.StateManger.showErrorScreen("#"+f,"Dieses Video wird vom Player nicht unterstützt.");},playerOnVideoPlay:function(e){this.hasPlayed=true;},playerOnVideoPause:function(e){},playerOnVideoEnded:function(e){},trackBuffered:function(){this.bufferedInterval=setInterval(this.triggerBufferedListeners.context(this),500);},stopTrackingBuffered:function(){clearInterval(this.bufferedInterval);},bufferedListeners:[],onBufferedUpdate:function(e){this.bufferedListeners.push(e);},triggerBufferedListeners:function(){this.isBufferFull();this.each(this.bufferedListeners,function(e){(e.context(this))();
});},isBufferFull:function(){if(this.bufferedPercent()==1){this.stopTrackingBuffered();}},trackCurrentTime:function(){if(this.currentTimeInterval){clearInterval(this.currentTimeInterval);}this.currentTimeInterval=setInterval(this.triggerCurrentTimeListeners.context(this),100);this.trackingCurrentTime=true;},stopTrackingCurrentTime:function(){clearInterval(this.currentTimeInterval);this.trackingCurrentTime=false;},currentTimeListeners:[],triggerCurrentTimeListeners:function(e,f){this.each(this.currentTimeListeners,function(g){(g.context(this))(f||this.currentTime());});},resizeListeners:[],onResize:function(e){this.resizeListeners.push(e);},triggerResizeListeners:function(){this.each(this.resizeListeners,function(e){(e.context(this))();});}});b.player.newBehavior("mouseOverVideoReporter",function(e){_V_.addListener(e,"mousemove",this.mouseOverVideoReporterOnMouseMove.context(this));_V_.addListener(e,"mouseout",this.mouseOverVideoReporterOnMouseOut.context(this));},{mouseOverVideoReporterOnMouseMove:function(){this.showControlBars();
clearInterval(this.mouseMoveTimeout);this.mouseMoveTimeout=setTimeout(this.hideControlBars.context(this),4000);},mouseOverVideoReporterOnMouseOut:function(f){var e=f.relatedTarget;while(e&&e!==this.box){e=e.parentNode;}if(e!==this.box){this.hideControlBars();}}});b.player.newBehavior("box",function(e){this.positionBox();_V_.addClass(e,"vjs-paused");this.activateElement(e,"mouseOverVideoReporter");this.onPlay(this.boxOnVideoPlay);this.onPause(this.boxOnVideoPause);},{boxOnVideoPlay:function(){_V_.removeClass(this.box,"vjs-paused");_V_.addClass(this.box,"vjs-playing");},boxOnVideoPause:function(){_V_.removeClass(this.box,"vjs-playing");_V_.addClass(this.box,"vjs-paused");}});b.player.newBehavior("poster",function(e){this.activateElement(e,"mouseOverVideoReporter");this.activateElement(e,"playButton");this.onPlay(this.hidePoster);this.onEnded(this.showPoster);this.onResize(this.positionPoster);},{showPoster:function(){if(!this.poster){return;}this.poster.style.display="block";this.positionPoster();
},positionPoster:function(){if(!this.poster||this.poster.style.display=="none"){return;}this.poster.style.height=this.height()+"px";this.poster.style.width=this.width()+"px";},hidePoster:function(){if(!this.poster){return;}this.poster.style.display="none";},updatePosterSource:function(){if(!this.video.poster){var e=this.video.getElementsByTagName("img");if(e.length>0){this.video.poster=e[0].src;}}}});b.player.newBehavior("controlBar",function(e){if(!this.controlBars){this.controlBars=[];this.onResize(this.positionControlBars);}this.controlBars.push(e);_V_.addListener(e,"mousemove",this.onControlBarsMouseMove.context(this));_V_.addListener(e,"mouseout",this.onControlBarsMouseOut.context(this));},{showControlBars:function(){if(!this.options.controlsAtStart&&!this.hasPlayed){return;}this.each(this.controlBars,function(e){e.style.display="block";});},positionControlBars:function(){this.updatePlayProgressBars();this.updateLoadProgressBars();},hideControlBars:function(){if(this.options.controlsHiding&&!this.mouseIsOverControls){this.each(this.controlBars,function(e){e.style.display="none";
});}},onControlBarsMouseMove:function(){this.mouseIsOverControls=true;},onControlBarsMouseOut:function(e){this.mouseIsOverControls=false;}});b.player.newBehavior("playToggle",function(e){if(!this.elements.playToggles){this.elements.playToggles=[];this.onPlay(this.playTogglesOnPlay);this.onPause(this.playTogglesOnPause);}this.elements.playToggles.push(e);_V_.addListener(e,"click",this.onPlayToggleClick.context(this));},{onPlayToggleClick:function(e){if(this.paused()){this.play();}else{this.pause();}},playTogglesOnPlay:function(e){this.each(this.elements.playToggles,function(f){_V_.removeClass(f,"vjs-paused");_V_.addClass(f,"vjs-playing");});},playTogglesOnPause:function(e){this.each(this.elements.playToggles,function(f){_V_.removeClass(f,"vjs-playing");_V_.addClass(f,"vjs-paused");});}});b.player.newBehavior("playButton",function(e){_V_.addListener(e,"click",this.onPlayButtonClick.context(this));},{onPlayButtonClick:function(e){this.play();}});b.player.newBehavior("pauseButton",function(e){_V_.addListener(e,"click",this.onPauseButtonClick.context(this));
},{onPauseButtonClick:function(e){this.pause();}});b.player.newBehavior("playProgressBar",function(e){if(!this.playProgressBars){this.playProgressBars=[];this.onCurrentTimeUpdate(this.updatePlayProgressBars);}this.playProgressBars.push(e);},{updatePlayProgressBars:function(f){var e=(f!==d)?f/this.duration():this.currentTime()/this.duration();if(isNaN(e)){e=0;}this.each(this.playProgressBars,function(g){if(g.style){g.style.width=_V_.round(e*100,2)+"%";}});jQuery(".vjs-play-progress").trigger("change");}});b.player.newBehavior("loadProgressBar",function(e){if(!this.loadProgressBars){this.loadProgressBars=[];}this.loadProgressBars.push(e);this.onBufferedUpdate(this.updateLoadProgressBars);},{updateLoadProgressBars:function(){this.each(this.loadProgressBars,function(e){if(e.style){e.style.width=_V_.round(this.bufferedPercent()*100,2)+"%";}});}});b.player.newBehavior("currentTimeDisplay",function(e){if(!this.currentTimeDisplays){this.currentTimeDisplays=[];this.onCurrentTimeUpdate(this.updateCurrentTimeDisplays);
}this.currentTimeDisplays.push(e);},{updateCurrentTimeDisplays:function(e){if(!this.currentTimeDisplays){return;}var f=(e)?e:this.currentTime();this.each(this.currentTimeDisplays,function(g){g.innerHTML=_V_.formatTime(f);});}});b.player.newBehavior("durationDisplay",function(e){if(!this.durationDisplays){this.durationDisplays=[];this.onCurrentTimeUpdate(this.updateDurationDisplays);}this.durationDisplays.push(e);},{updateDurationDisplays:function(){if(!this.durationDisplays){return;}this.each(this.durationDisplays,function(e){if(this.duration()){e.innerHTML=_V_.formatTime(this.duration());}});}});b.player.newBehavior("currentTimeScrubber",function(e){_V_.addListener(e,"mousedown",this.onCurrentTimeScrubberMouseDown.rEvtContext(this));},{onCurrentTimeScrubberMouseDown:function(e,f){e.preventDefault();this.currentScrubber=f;this.stopTrackingCurrentTime();this.videoWasPlaying=!this.paused();this.pause();_V_.blockTextSelection();this.setCurrentTimeWithScrubber(e);_V_.addListener(a,"mousemove",this.onCurrentTimeScrubberMouseMove.rEvtContext(this));
_V_.addListener(a,"mouseup",this.onCurrentTimeScrubberMouseUp.rEvtContext(this));},onCurrentTimeScrubberMouseMove:function(e){this.setCurrentTimeWithScrubber(e);},onCurrentTimeScrubberMouseUp:function(e){_V_.unblockTextSelection();a.removeEventListener("mousemove",this.onCurrentTimeScrubberMouseMove,false);a.removeEventListener("mouseup",this.onCurrentTimeScrubberMouseUp,false);if(this.videoWasPlaying){this.play();this.trackCurrentTime();}},setCurrentTimeWithScrubber:function(f){var g=_V_.getRelativePosition(f.pageX,this.currentScrubber);var e=g*this.duration();this.triggerCurrentTimeListeners(0,e);if(e==this.duration()){e=e-0.1;}this.currentTime(e);}});b.player.newBehavior("volumeDisplay",function(e){if(!this.volumeDisplays){this.volumeDisplays=[];this.onVolumeChange(this.updateVolumeDisplays);}this.volumeDisplays.push(e);this.updateVolumeDisplay(e);},{updateVolumeDisplays:function(){if(!this.volumeDisplays){return;}this.each(this.volumeDisplays,function(e){this.updateVolumeDisplay(e);
});},updateVolumeDisplay:function(f){var e=Math.ceil(this.volume()*6);this.each(f.children,function(h,g){if(g<e){_V_.addClass(h,"vjs-volume-level-on");}else{_V_.removeClass(h,"vjs-volume-level-on");}});}});b.player.newBehavior("volumeScrubber",function(e){_V_.addListener(e,"mousedown",this.onVolumeScrubberMouseDown.rEvtContext(this));},{onVolumeScrubberMouseDown:function(e,f){_V_.blockTextSelection();this.currentScrubber=f;this.setVolumeWithScrubber(e);_V_.addListener(a,"mousemove",this.onVolumeScrubberMouseMove.rEvtContext(this));_V_.addListener(a,"mouseup",this.onVolumeScrubberMouseUp.rEvtContext(this));},onVolumeScrubberMouseMove:function(e){this.setVolumeWithScrubber(e);},onVolumeScrubberMouseUp:function(e){this.setVolumeWithScrubber(e);_V_.unblockTextSelection();a.removeEventListener("mousemove",this.onVolumeScrubberMouseMove,false);a.removeEventListener("mouseup",this.onVolumeScrubberMouseUp,false);},setVolumeWithScrubber:function(e){var f=_V_.getRelativePosition(e.pageX,this.currentScrubber);
this.volume(f);}});b.player.newBehavior("fullscreenToggle",function(e){_V_.addListener(e,"click",this.onFullscreenToggleClick.context(this));},{onFullscreenToggleClick:function(e){if(!this.videoIsFullScreen){this.enterFullScreen();}else{this.exitFullScreen();}},fullscreenOnWindowResize:function(e){this.positionControlBars();},fullscreenOnEscKey:function(e){if(e.keyCode==27){this.exitFullScreen();}}});b.player.newBehavior("bigPlayButton",function(e){if(!this.elements.bigPlayButtons){this.elements.bigPlayButtons=[];this.onPlay(this.bigPlayButtonsOnPlay);this.onEnded(this.bigPlayButtonsOnEnded);}this.elements.bigPlayButtons.push(e);this.activateElement(e,"playButton");},{bigPlayButtonsOnPlay:function(e){this.hideBigPlayButtons();},bigPlayButtonsOnEnded:function(e){this.showBigPlayButtons();},showBigPlayButtons:function(){this.each(this.elements.bigPlayButtons,function(e){e.style.display="block";});},hideBigPlayButtons:function(){this.each(this.elements.bigPlayButtons,function(e){e.style.display="none";
});}});b.player.newBehavior("spinner",function(e){if(!this.spinners){this.spinners=[];_V_.addListener(this.video,"loadeddata",this.spinnersOnVideoLoadedData.context(this));_V_.addListener(this.video,"loadstart",this.spinnersOnVideoLoadStart.context(this));_V_.addListener(this.video,"seeking",this.spinnersOnVideoSeeking.context(this));_V_.addListener(this.video,"seeked",this.spinnersOnVideoSeeked.context(this));_V_.addListener(this.video,"canplay",this.spinnersOnVideoCanPlay.context(this));_V_.addListener(this.video,"canplaythrough",this.spinnersOnVideoCanPlayThrough.context(this));_V_.addListener(this.video,"waiting",this.spinnersOnVideoWaiting.context(this));_V_.addListener(this.video,"stalled",this.spinnersOnVideoStalled.context(this));_V_.addListener(this.video,"suspend",this.spinnersOnVideoSuspend.context(this));_V_.addListener(this.video,"playing",this.spinnersOnVideoPlaying.context(this));_V_.addListener(this.video,"timeupdate",this.spinnersOnVideoTimeUpdate.context(this));}this.spinners.push(e);
},{showSpinners:function(){this.each(this.spinners,function(e){e.style.display="block";});clearInterval(this.spinnerInterval);this.spinnerInterval=setInterval(this.rotateSpinners.context(this),100);},hideSpinners:function(){this.each(this.spinners,function(e){e.style.display="none";});clearInterval(this.spinnerInterval);},spinnersRotated:0,rotateSpinners:function(){this.each(this.spinners,function(e){e.style.WebkitTransform="scale(0.5) rotate("+this.spinnersRotated+"deg)";e.style.MozTransform="scale(0.5) rotate("+this.spinnersRotated+"deg)";});if(this.spinnersRotated==360){this.spinnersRotated=0;}this.spinnersRotated+=45;},spinnersOnVideoLoadedData:function(e){this.hideSpinners();},spinnersOnVideoLoadStart:function(e){this.showSpinners();},spinnersOnVideoSeeking:function(e){},spinnersOnVideoSeeked:function(e){},spinnersOnVideoCanPlay:function(e){},spinnersOnVideoCanPlayThrough:function(e){this.hideSpinners();},spinnersOnVideoWaiting:function(e){this.showSpinners();},spinnersOnVideoStalled:function(e){},spinnersOnVideoSuspend:function(e){},spinnersOnVideoPlaying:function(e){this.hideSpinners();
},spinnersOnVideoTimeUpdate:function(e){if(this.spinner.style.display=="block"){this.hideSpinners();}}});b.player.newBehavior("subtitlesDisplay",function(e){if(!this.subtitleDisplays){this.subtitleDisplays=[];this.onCurrentTimeUpdate(this.subtitleDisplaysOnVideoTimeUpdate);this.onEnded(function(){this.lastSubtitleIndex=0;}.context(this));}this.subtitleDisplays.push(e);},{subtitleDisplaysOnVideoTimeUpdate:function(h){if(this.subtitles&&project_objects.StateManger.hasVideoSubtitles("#"+$(this.video).parent().parent().attr("id"))){if(!this.currentSubtitle||this.currentSubtitle.start>=h||this.currentSubtitle.end<h){var g=false,e=(this.subtitles[this.lastSubtitleIndex].start>h),f=this.lastSubtitleIndex-(e)?1:0;while(true){if(e){if(f<0||this.subtitles[f].end<h){break;}if(this.subtitles[f].start<h){g=f;break;}f--;}else{if(f>=this.subtitles.length||this.subtitles[f].start>h){break;}if(this.subtitles[f].end>h){g=f;break;}f++;}}if(g!==false){this.currentSubtitle=this.subtitles[g];this.lastSubtitleIndex=g;
this.updateSubtitleDisplays(this.currentSubtitle.text);}else{if(this.currentSubtitle){this.currentSubtitle=false;this.updateSubtitleDisplays("");}}}}},updateSubtitleDisplays:function(e){this.each(this.subtitleDisplays,function(f){f.innerHTML=e;});}});b.extend({addClass:function(e,f){if((" "+e.className+" ").indexOf(" "+f+" ")==-1){e.className=e.className===""?f:e.className+" "+f;}},removeClass:function(f,e){if(f.className.indexOf(e)==-1){return;}var g=f.className.split(/\s+/);g.splice(g.lastIndexOf(e),1);f.className=g.join(" ");},createElement:function(f,e){return this.merge(a.createElement(f),e);},blockTextSelection:function(){a.body.focus();a.onselectstart=function(){return false;};},unblockTextSelection:function(){a.onselectstart=function(){return true;};},formatTime:function(f){var g=Math.round(f);var e=Math.floor(g/60);e=(e>=10)?e:"0"+e;g=Math.floor(g%60);g=(g>=10)?g:"0"+g;return e+":"+g;},getRelativePosition:function(f,e){return Math.max(0,Math.min(1,(f-this.findPosX(e))/e.offsetWidth));
},findPosX:function(e){var f=e.offsetLeft;while(e=e.offsetParent){f+=e.offsetLeft;}return f;},getComputedStyleValue:function(e,f){return c.getComputedStyle(e,null).getPropertyValue(f);},round:function(e,f){if(!f){f=0;}return Math.round(e*Math.pow(10,f))/Math.pow(10,f);},addListener:function(e,g,f){if("undefined"===typeof e){return;}if(e.addEventListener){e.addEventListener(g,f,false);}else{if(e.attachEvent){e.attachEvent("on"+g,f);}}},removeListener:function(e,g,f){if(e.removeEventListener){e.removeEventListener(g,f,false);}else{if(e.attachEvent){e.detachEvent("on"+g,f);}}},get:function(e,g){if(typeof XMLHttpRequest=="undefined"){XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0");}catch(k){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0");}catch(j){}try{return new ActiveXObject("Msxml2.XMLHTTP");}catch(h){}throw new Error("This browser does not support XMLHttpRequest.");};}var f=new XMLHttpRequest();f.open("GET",e);f.onreadystatechange=function(){if(f.readyState==4&&f.status==200){g(f.responseText);
}}.context(this);f.send();},trim:function(e){return e.toString().replace(/^\s+/,"").replace(/\s+$/,"");},bindDOMReady:function(){if(a.readyState==="complete"){return b.onDOMReady();}if(a.addEventListener){a.addEventListener("DOMContentLoaded",b.DOMContentLoaded,false);c.addEventListener("load",b.onDOMReady,false);}else{if(a.attachEvent){a.attachEvent("onreadystatechange",b.DOMContentLoaded);c.attachEvent("onload",b.onDOMReady);}}},DOMContentLoaded:function(){if(a.addEventListener){a.removeEventListener("DOMContentLoaded",b.DOMContentLoaded,false);b.onDOMReady();}else{if(a.attachEvent){if(a.readyState==="complete"){a.detachEvent("onreadystatechange",b.DOMContentLoaded);b.onDOMReady();}}}},DOMReadyList:[],addToDOMReady:function(e){if(b.DOMIsReady){e.call(a);}else{b.DOMReadyList.push(e);}},DOMIsReady:false,onDOMReady:function(){if(b.DOMIsReady){return;}if(!a.body){return setTimeout(b.onDOMReady,13);}b.DOMIsReady=true;if(b.DOMReadyList){for(var e=0;e<b.DOMReadyList.length;e++){b.DOMReadyList[e].call(a);
}b.DOMReadyList=null;}}});b.bindDOMReady();Function.prototype.context=function(f){var g=this,e=function(){return g.apply(f,arguments);};return e;};Function.prototype.evtContext=function(f){var g=this,e=function(){var h=this;return g.call(f,arguments[0],h);};return e;};Function.prototype.rEvtContext=function(g,e){if(this.hasContext===true){return this;}if(!e){e=g;}for(var f in e){if(e[f]==this){e[f]=this.evtContext(g);e[f].hasContext=true;return e[f];}}return this.evtContext(g);};if(c.jQuery){(function(e){e.fn.VideoJS=function(f){this.each(function(){b.setup(this,f);});return this;};e.fn.player=function(){return this[0].player;};})(jQuery);}c.VideoJS=c._V_=b;})(window);window.project=window.project||{};window.project_objects=window.project_objects||{};function createStateManager(){project_objects.StateManger=new project.StateManager();}function registerAllVideoObjects(b,c,d){var a=jQuery("body");registerAllVideoObjectsForContext(a,b,c,d);}function registerAllVideoObjectsForContext(b,a,c,d){if(typeof b=="object"&&typeof b.jquery!=="undefined"){if(typeof registerAllVideoObjects.video_css_url!=="undefined"&&typeof a==="undefined"){a=registerAllVideoObjects.video_css_url;
}else{if(typeof a!=="undefined"){registerAllVideoObjects.video_css_url=a;}}if(typeof registerAllVideoObjects.width!=="undefined"&&typeof c==="undefined"){c=registerAllVideoObjects.width;}else{if(typeof c!=="undefined"){registerAllVideoObjects.width=c;}}if(typeof registerAllVideoObjects.flash_url!=="undefined"&&typeof d==="undefined"){d=registerAllVideoObjects.flash_url;}else{if(typeof d!=="undefined"){registerAllVideoObjects.flash_url=d;}}project_objects.StateManger=project_objects.StateManger||new project.StateManager();project_objects.StateManger.registerAllVideoObjects(b,a,c,d);}else{project_objects.StateManger=project_objects.StateManger||new project.StateManager();project_objects.StateManger.logger.error("context is not a jQuery Object");}}function showEndscreen(a){project_objects.StateManger.replay(a);setTimeout(function(){project_objects.StateManger.showEndscreen(a);},500);}(function($){project.StateManager=function(){var that=this;this.version_number="4.1 (ASVIDEO_HD_20121031_3)";
this.state_mananger=this;this.config=false;this.use_html5player=false;this.video_player=false;this.logger=new project.Logger();this.logger.setLogLevel(project.Logger.LEVEL.ERROR);this.browser_detection=new project.BrowserDetection(that);this.configloader=new project.ConfigLoader(that);this.video_objects={};$(window).resize(function(){that.resizeEndscreen();});};project.StateManager.prototype={getVersionNumber:function(){return this.version_number;},getInstance:function(){return this.state_mananger;},getLogger:function(){return this.logger;},registerAllVideoObjects:function(context,video_css_url,width,flash_url){this.logger.debug("Startparameter: "+video_css_url+" - "+width+" - "+flash_url);context.find(".video_js_proxy.exozet-css").each(function(index,object){var video_object=$(object);var video_id="#"+video_object.attr("id");if(typeof project_objects.StateManger.video_objects[video_id]==="undefined"||video_object.data("initialized")!="true"){var xml_url=false;video_object.find("img").each(function(image_index,img_object){var image_object=$(img_object);
if(typeof image_object.attr("longdesc")!=="undefined"){xml_url=image_object.attr("longdesc");}});if(xml_url!==false){project_objects.StateManger.registerVideoObject(video_id,xml_url,video_css_url,width,flash_url);}}});},registerVideoObject:function(html_element,video_xml_url,video_css_url,width,flash_url,adServerPageGroup,countRevolver,call_play,without_channel_xml){var that=this;$(html_element).find(".vjs-controls.dummy, .video-js-box").remove();this.logger.debug("Call RegisterVideoObject for "+html_element);if(typeof without_channel_xml!=="undefined"||without_channel_xml==null){var without_channel_xml=false;}this.video_objects[html_element]={};this.video_objects[html_element].video_xml_url=video_xml_url;this.video_objects[html_element].video_css_url=video_css_url;this.video_objects[html_element].html_element=html_element;if(flash_url==null){this.video_objects[html_element].flash_url="BildTvMain.swf";}else{this.video_objects[html_element].flash_url=flash_url;}this.logger.groupAndTime("Config Loader");
var data=this.configloader.loadVideoXml(video_xml_url,without_channel_xml);if(data==false){this.logger.error("Error: Can't play Video in HTML5 Modus because error while parsing the xml File");}else{this.video_objects[html_element].config=data;}this.logger.groupAndTimeEnd("Config Loader");if($(html_element).find("> img").length==0){var image=$('<img src="'+this.video_objects[html_element].config.img+'" alt="Video description" le="click to play video"/>');$(html_element).append(image);}else{var image=$(html_element).find("> img");if(image.attr("src")!==this.video_objects[html_element].config.img){image.attr("src",this.video_objects[html_element].config.img);}}this.logger.groupAndTime("Tracking");this.logger.debug("not yet implementet");this.logger.groupAndTimeEnd("Tracking");this.logger.groupAndTime("Browser Detection");this.video_objects[html_element].use_html5player=this.browser_detection.isHTML5Client();this.logger.groupAndTimeEnd("Browser Detection");this.logger.groupAndTime("Tracking");
this.video_objects[html_element].tracking=[];if(this.video_objects[html_element].config!=null&&this.video_objects[html_element].config.tracking=="true"){var index=0;if(typeof this.video_objects[html_element].config.ivw!=="undefined"){var ivw_tracker=new project.IVW_Tracker(this,this.video_objects[html_element]);this.video_objects[html_element].tracking[index]=ivw_tracker;index++;}if(typeof this.video_objects[html_element].config.track!=="undefined"){var webtrekk_tracker=new project.Webtrekk_Tracker(this,this.video_objects[html_element]);this.video_objects[html_element].tracking[index]=webtrekk_tracker;index++;}if(typeof this.video_objects[html_element].config.google_analytics!=="undefined"){var google_analytics_tracker=new project.GoogleAnalytics_Tracker(this,this.video_objects[html_element]);this.video_objects[html_element].tracking[index]=google_analytics_tracker;index++;}}this.logger.groupAndTimeEnd("Tracking");if(countRevolver!=null){this.video_objects[html_element].countRevolver=countRevolver;
}var controls=$('<div class="vjs-controls" style="display:none"></div>');$(this.video_objects[html_element].html_element).append(controls);var controls_height=0;if($(html_element).find(".vjs-controls").css("position")!=="absolute"){controls_height=$(controls).css("height").replace("px","");}controls.remove();if(adServerPageGroup!=null){this.video_objects[html_element].adType=adServerPageGroup;}this.video_objects[html_element].isEmbed=false;this.video_objects[html_element].use_old_channel_xml=false;this.video_objects[html_element].is_endscreen_showed=false;$(html_element).click(function(){that.clickPlayAction(html_element);});if(this.video_objects[html_element].config==null){this.showErrorScreen(html_element);return;}this.video_objects[html_element].player_type=this.getPlayerType(html_element);if($(html_element).find(".vjs-controls").css("position")!=="absolute"){this.showDummyControls(html_element,that.video_objects[html_element]);}if(this.browser_detection.isMobile()==true){$(html_element).addClass("mobile");
}$(html_element).addClass("loaded");$(html_element).data("initialized","true");if(false===this.browser_detection.isMobile()){if(call_play!==true&&that.video_objects[html_element].config!=null&&that.video_objects[html_element].config.autoplay=="true"){$(html_element).trigger("click");}}},showDummyControls:function(html_element,options){var video_js_box=$('<div class="video-js-box vim-css vjs-paused dummy"></div>');$(html_element).append(video_js_box);var type=this.getPlayerType(html_element);if(this.browser_detection.isMobile()==true){type+=" ios";}var controls=$('<div class="vjs-controls dummy '+type+'"></div>');video_js_box.append(controls);var video_controls=new project.VideoControls(this,null,options);video_controls.getControls();if($(html_element).find(".vjs-controls").css("position")=="absolute"){$(html_element).find(".video-js-box").remove();}},clickPlayAction:function(html_element){var page_element=$(html_element);page_element.find(".play").hide();page_element.find(".screens").hide();
this.logger.groupAndTime("Playing Video");page_element.unbind("click");if(typeof this.video_objects[html_element].config.src==="undefined"||this.video_objects[html_element].config.src==""){this.showErrorScreen(html_element,"Dieses Video ist nicht mehr gültig.");return;}var width=this.video_objects[html_element].width;var height=this.video_objects[html_element].height;var container_height=this.video_objects[html_element].container_height;if(this.video_objects[html_element].use_html5player==true){var control=$('<div class="vjs-controls"></div>');$(html_element).append(control);var position=$(".vjs-controls").css("position");control.remove();if(position=="absolute"){height=container_height;}this.logger.groupAndTime("Show HTML5 Player");this.showJSPlayer(page_element,html_element,width,height);this.logger.groupAndTimeEnd("Show HTML5 Player");}else{this.logger.groupAndTime("Show Flashplayer");this.showFlashPlayer(page_element,html_element,width,container_height);this.logger.groupAndTimeEnd("Show Flashplayer");
}},getPlayerHeight:function(width){return Math.ceil((width/16)*9);},getPlayerWidth:function(height){return Math.ceil((height/9)*16);},createFlashObject:function(html_element,width,height,adType,embed_channel_xml){var xml_url=this.video_objects[html_element].video_xml_url||embed_channel_xml||this.video_objects[html_element].flashvar_xmlurl;var css_url=this.video_objects[html_element].video_css_url||this.video_objects[html_element].flashvar_cssurl;var js_url="";if(typeof this.video_objects[html_element].flashvar_jsurl!=="undefined"){js_url="&jsurl= "+this.video_objects[html_element].flashvar_jsurl;}var movie_value="id="+html_element;movie_value+="&xmlurl="+xml_url;movie_value+="&cssurl="+css_url;movie_value+="&adType="+adType;movie_value+=js_url;movie_value+="&autoplay=true";var codebase="";if(this.browser_detection.isIE()){codebase='codeBase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,1,00,0"';}var flash_object='<object type="application/x-shockwave-flash" data="'+this.video_objects[html_element].flash_url+'" id="videoplayer_'+html_element.replace("#","")+'" '+codebase+">";
flash_object+='<param name="movie" value="'+this.video_objects[html_element].flash_url+'"/>';flash_object+='<param name="FlashVars" value="'+movie_value+'"/>';flash_object+='<param name="allowFullScreen" value="true"/>';flash_object+='<param name="quality" value="high"/>';flash_object+='<param name="allowScriptAccess" value="always" />';flash_object+='<param name="wmode" value="transparent" />';flash_object+="</object>";if(this.browser_detection.isIE7()){var image=$(html_element);height=parseInt(image.height())+parseInt($(html_element).css("padding-bottom").replace("px",""));$(html_element).css("width",image.width()+"px");$(html_element).css("height",height+"px");$(html_element).css("padding-bottom","0px");}$(html_element).append($(flash_object));if(this.browser_detection.isIE7()){setTimeout(function(){$(html_element).find("object").css("width",image.width()+"px");$(flash_object).find("object").css("height",height+"px");},500);}},showFlashPlayer:function(page_element,html_element,width,height){$(html_element).find(".video-js-box").remove();
if(false===this.browser_detection.hasUserFlash(this.video_objects[html_element].config)){this.showErrorScreen(html_element,'<a href="http://get.adobe.com/de/flashplayer/" target="_blank">Zum Download</a>',"Bitte installieren sie die neuste version des Flash Plugins.");return false;}var adType="";if(this.video_objects[html_element].adType!=null){adType=this.video_objects[html_element].adType;}var flashvars={xmlurl:this.video_objects[html_element].video_xml_url,cssurl:this.video_objects[html_element].video_css_url,id:html_element,adType:adType,autoplay:"true"};var params={allowFullScreen:"true",allowScriptAccess:"always",wmode:"opaque"};var attributes={};this.createFlashObject(html_element,width,height,adType);this.logger.groupAndTime("Player Events");},removeFlashPlayer:function(html_element){$(html_element+" embed").remove();$(html_element+" object").remove();},showJSPlayer:function(page_element,html_element,width,height){$(html_element).find(".video-js-box").remove();var that=this;var options=this.video_objects[html_element];
options.showVideoSubtitles=false;this.logger.debug("Set width:height to "+width+":"+height);options.playlist=new project.VideoPlaylist();if(options.config.config_type=="video"||options.config.config_type=="live"){if(options.config.bumper!=null&&options.config.bumper.preroll!=null){options.playlist.addVideo(options.config.bumper.preroll.src,"preroll");}var subtitle_src=null;if(typeof options.config.subtitle!=="undefined"&&options.config.subtitle.status=="true"&&options.config.subtitle.url!=null){subtitle_src=options.config.subtitle.url;}options.playlist.addVideo(options.config.src,"main",options.config.src2,subtitle_src);if(options.config.bumper!=null&&options.config.bumper.postroll!=null){options.playlist.addVideo(options.config.bumper.preroll.src,"postroll");}}else{if(options.config.config_type=="kino"){options.playlist.addVideo(options.config.item[0].enclosure.url,"main");}}options.video_wrapper=new project.VideoJSWrapper(this.getInstance(),html_element,options,{width:width,height:height});
this.logger.groupAndTimeEnd("Show Player");},removeJSPlayer:function(html_element){$(html_element).unbind("mouseover");$(html_element).unbind("mouseout");$(html_element+" span.play").addClass("pause");$(html_element+" span.play").unbind("click");$(html_element+" .video-js-box").remove();this.video_objects[html_element].video_wrapper=null;delete (this.video_objects[html_element].video_wrapper);},showEndscreen:function(html_element){$(html_element).trigger("video_ended");var that=this;var height=$(html_element).css("height");if($(html_element+" .screens").length==0){$(html_element).append('<div class="screens"></div>');$(html_element).css("height",height);}$(html_element+" span.play").hide();if(typeof this.video_objects[html_element]!=="undefined"&&this.video_objects[html_element].use_html5player==true){this.removeJSPlayer(html_element);}else{this.removeFlashPlayer(html_element);}this.video_objects[html_element].is_endscreen_showed=true;if(typeof this.video_objects[html_element].config!=="undefined"&&typeof this.video_objects[html_element].config.end!=="undefined"&&this.video_objects[html_element].config.end.status=="true"&&typeof this.video_objects[html_element].config.end.end_function!=="undefined"&&this.video_objects[html_element].config.end.end_function.length>0){var xml_file=that.video_objects[html_element].video_xml_url;
var video_xml=that.video_objects[html_element].video_xml_url;eval(that.video_objects[html_element].config.end.end_function);$(html_element+" span.play").hide();$(html_element+" div.screens").show();}else{if($.isFunction(project.BildEndscreen)&&typeof this.video_objects[html_element].config&&this.video_objects[html_element].config.config_type=="video"&&this.video_objects[html_element].config.end.status=="true"&&typeof this.video_objects[html_element].config.end!=="undefined"){var endscreen=new project.BildEndscreen(this,this.video_objects[html_element]);var endscreen_html=endscreen.getEndscreenHTML();if(endscreen_html!=null){$(html_element+" div.screens").html(endscreen_html);$(html_element+" div.screens").show();this.fixEndscreenImagesRatio(html_element);endscreen.renderGooglePlusButton();this.video_objects[html_element].endscreen=endscreen;}else{this.restorePlayerPreview(html_element);}}else{if(typeof this.video_objects[html_element].isEmbed!=="undefined"&&this.video_objects[html_element].isEmbed==true){if($(html_element+" div.screens").length==0){$(html_element).append($('<div class="screens"></div>'));
}var endscreen=new project.BildEndscreen(this,this.video_objects[html_element]);var endscreen_html=endscreen.getEndscreenHTML();$(html_element+" div.screens").html(endscreen_html);$(html_element+" div.screens").show();this.fixEndscreenImagesRatio(html_element);}else{this.restorePlayerPreview(html_element);}}}},fixEndscreenImagesRatio:function(html_element){var that=this;setTimeout(function(){$(html_element+" div.screens").find("img.video").each(function(index,object){var image_object=$(object);var height=image_object.height();var width=image_object.width();if(width==0||height==0){that.fixEndscreenImagesRatio(html_element);}else{if(Math.floor(width/4)==Math.floor(height/3)){image_object.addClass("d43");}else{image_object.addClass("d169");}}image_object.removeClass("hide");});},10);},restorePlayerPreview:function(html_element){var that=this;$(html_element+" .screens").hide();$(html_element+" span").show();$(html_element+" span.play.pause").removeClass("pause");this.showDummyControls(html_element,this.video_objects[html_element]);
$(html_element).click(function(){that.clickPlayAction(html_element);});},showErrorScreen:function(html_element,error_message,error_message_top,flash_error_type){$(html_element).trigger("video_ended");if("undefined"!==typeof this.video_objects[html_element].video_wrapper){if(true===this.video_objects[html_element].video_wrapper.isCommercial()){return;}}var that=this;var height=$(html_element).css("height");$(html_element).find(".video-js-box").remove();if($(html_element+" .screens").length==0){$(html_element).append('<div class="screens"></div>');$(html_element).css("height",height);}$(html_element+" span.play").hide();if(typeof this.video_objects[html_element]!=="undefined"&&this.video_objects[html_element].use_html5player==true){this.removeJSPlayer(html_element);}else{this.removeFlashPlayer(html_element);}this.video_objects[html_element].is_endscreen_showed=true;if(typeof flash_error_type!=="undefined"){if(flash_error_type==="GEO"){error_message_top="DIESES VIDEO IST IN IHRER REGION NICHT VERFÜGBAR.";
error_message="THIS VIDEO CAN NOT BE STREAMED IN YOUR REGION.";}}error_message=error_message||"Bitte laden Sie die Seite neu.";var endscreen=new project.BildEndscreen(this,this.video_objects[html_element],true,error_message,error_message_top);var endscreen_html=endscreen.getEndscreenHTML();if(endscreen_html!=null){$(html_element+" div.screens").html(endscreen_html);$(html_element+" div.screens").show();this.fixEndscreenImagesRatio(html_element);endscreen.renderGooglePlusButton();}else{this.restorePlayerPreview(html_element);}var endscreen_height=$(html_element).height();var hentry_height=$(html_element+" div.screens .endscreen").height();var difference_height=parseInt(endscreen_height)-parseInt(hentry_height);$(html_element+" div.screens .endscreen").css("padding-top",(difference_height/2));},checkIFVideoElementExists:function(video_objekt){if(typeof this.video_objects[video_objekt]==="undefined"||typeof this.video_objects[video_objekt].tracking==="undefined"){this.logger.warn("Video Object Config or Tracking Code not Found");
return false;}return true;},hasHDSource:function(video_object){if((typeof this.video_objects[video_object].config.src!=="undefined"&&this.video_objects[video_object].config.src.indexOf(".m3u8")>0)||(typeof this.video_objects[video_object].config.src2!=="undefined"&&this.video_objects[video_object].config.src2.indexOf(".m3u8")>0)){return true;}return false;},setQuality:function(video_object,type){this.video_objects[video_object].video_wrapper.switchBitrate(type);},trackVideoPlay:function(video_objekt,percent,duration){if(false===this.checkIFVideoElementExists(video_objekt)){return;}if($(video_objekt).length==0){this.logger.error("Video Object not found");}else{$(video_objekt).trigger("video_started");var tracking=this.video_objects[video_objekt].tracking;$(tracking).each(function(index,object){object.track_video_play(percent,duration);});}},trackVideoStart:function(video_objekt,percent,duration){if(false===this.checkIFVideoElementExists(video_objekt)){return;}if($(video_objekt).length==0){this.logger.error("Video Object not found");
}else{var tracking=this.video_objects[video_objekt].tracking;$(tracking).each(function(index,object){object.track_video_start(percent,duration);});}},trackVideoPause:function(video_objekt,percent,duration){if(false===this.checkIFVideoElementExists(video_objekt)){return;}if($(video_objekt).length==0){this.logger.error("Video Object not found");}else{$(video_objekt).trigger("video_paused");var tracking=this.video_objects[video_objekt].tracking;$(tracking).each(function(index,object){object.track_video_pause(percent,duration);});}},trackVideoResume:function(video_objekt,percent,duration){if(false===this.checkIFVideoElementExists(video_objekt)){return;}if($(video_objekt).length==0){this.logger.error("Video Object not found");}else{$(video_objekt).trigger("video_playing");var tracking=this.video_objects[video_objekt].tracking;$(tracking).each(function(index,object){object.track_video_resume(percent,duration);});}},trackVideoTimeupdate:function(video_objekt,percent,duration){if(false===this.checkIFVideoElementExists(video_objekt)){return;
}if($(video_objekt).length==0){this.logger.error("Video Object not found");}else{var tracking=this.video_objects[video_objekt].tracking;$(tracking).each(function(index,object){object.track_video_timeupdate(percent,duration);});}},trackNowtilusTimeupdate:function(video_objekt,time){ReportingCallback("TIMEUPDATE",Math.ceil(time));},trackNowtilusAdCount:function(video_objekt,ad_count){ReportingCallback("TIMEUPDATE",ad_count);},trackVideoPlayComplete:function(video_objekt,percent,duration){if(false===this.checkIFVideoElementExists(video_objekt)){return;}if($(video_objekt).length==0){this.logger.error("Video Object not found");}else{var tracking=this.video_objects[video_objekt].tracking;$(tracking).each(function(index,object){object.track_video_complete(percent,duration);});}},formatScreensElement:function(screen_element){screen_element.css("background-color","black");screen_element.css("display","block");screen_element.css("width","100%");screen_element.css("height","100%");screen_element.css("color","red");
},play:function(video_objekt,video_xml,adServerPageGroup,countRevolver,use_old_channel_xml){if(typeof use_old_channel_xml==="undefined"||use_old_channel_xml==null){use_old_channel_xml=false;}var jqVideoObject=$(video_objekt);if(typeof this.video_objects[video_objekt].isEmbed!=="undefined"&&this.video_objects[video_objekt].isEmbed==true){$(video_objekt).find(".screens").hide();var flashvars={xmlurl:video_xml,cssurl:this.video_objects[video_objekt].flashvar_cssurl,jsurl:this.video_objects[video_objekt].flashvar_jsurl,id:video_objekt,autoplay:"true"};var params={allowFullScreen:"true",allowScriptAccess:"always",wmode:"opaque"};var attributes={};this.createFlashObject(video_objekt,$(video_objekt).width(),$(video_objekt).height(),null,video_xml);}else{if(jqVideoObject.hasClass("video_js_proxy")){jqVideoObject.unbind("click");jqVideoObject.find(" .endscreen").remove();this.removeFlashPlayer(video_objekt);this.removeJSPlayer(video_objekt);if(jqVideoObject.data("initialized")=="true"&&video_xml==null){this.replay(video_objekt);
}else{var old_channel;var old_end;if(use_old_channel_xml==true){old_channel=this.video_objects[video_objekt].config.channel;old_end=this.video_objects[video_objekt].config.end;}this.registerVideoObject(video_objekt,video_xml,this.video_objects[video_objekt].video_css_url,$(video_objekt).width(),this.video_objects[video_objekt].flash_url,adServerPageGroup,countRevolver,true,use_old_channel_xml);if(use_old_channel_xml==true){this.video_objects[video_objekt].config.channel=old_channel;this.video_objects[video_objekt].config.end=old_end;this.video_objects[video_objekt].use_old_channel_xml=true;}jqVideoObject.find(" .video-js-box").remove();}jqVideoObject.trigger("click");}else{this.logger.error("Video Object "+video_objekt+" not found");}}return true;},replay:function(video_objekt){this.removeFlashPlayer(video_objekt);this.removeJSPlayer(video_objekt);if(typeof this.video_objects[video_objekt].isEmbed!=="undefined"&&this.video_objects[video_objekt].isEmbed==true){$(video_objekt).find(".screens").hide();
var flashvars={xmlurl:this.video_objects[video_objekt].flashvar_xmlurl,cssurl:this.video_objects[video_objekt].flashvar_cssurl,jsurl:this.video_objects[video_objekt].flashvar_jsurl,id:video_objekt,autoplay:"true"};var params={allowFullScreen:"true",allowScriptAccess:"always",wmode:"opaque"};var attributes={};var video_objekt_id=video_objekt.replace("#","");this.createFlashObject(video_objekt,$(video_objekt).width(),$(video_objekt).height());}else{if($(video_objekt).hasClass("video_js_proxy")){this.play(video_objekt,this.video_objects[video_objekt].video_xml_url);}else{this.logger.error("Video Object "+video_objekt+" not found");}}return true;},pause:function(video_objekt){var video_object=$(video_objekt);if(video_object.hasClass("video_js_proxy")){video_object.trigger("video_paused");if(this.video_objects[video_objekt].use_html5player===true){if(typeof this.video_objects[video_objekt].video_wrapper!=="undefined"){this.video_objects[video_objekt].video_wrapper.video_player.pause();}else{return false;
}}else{var flash_id=video_objekt.replace("#","");if(document.getElementById("videoplayer_"+flash_id)!==null&&typeof document.getElementById("videoplayer_"+flash_id).pausePlaying==="function"){document.getElementById("videoplayer_"+flash_id).pausePlaying();return true;}return false;}}else{this.logger.error("Video Object "+video_objekt+" not found");return false;}return true;},resume:function(video_objekt){var video_object=$(video_objekt);if(video_object.hasClass("video_js_proxy")){video_object.trigger("video_playing");if(this.video_objects[video_objekt].use_html5player===true){if(typeof this.video_objects[video_objekt].video_wrapper!=="undefined"){this.video_objects[video_objekt].video_wrapper.video_player.play();}else{return false;}}else{var flash_id=video_objekt.replace("#","");if(document.getElementById("videoplayer_"+flash_id)!==null&&typeof document.getElementById("videoplayer_"+flash_id).resumePlaying==="function"){document.getElementById("videoplayer_"+flash_id).resumePlaying();return true;
}return false;}}else{this.logger.error("Video Object "+video_objekt+" not found");return false;}return true;},stop:function(video_objekt){var video_object=$(video_objekt);if(video_object.hasClass("video_js_proxy")){video_object.trigger("video_ended");this.showEndscreen(video_objekt);}else{this.logger.error("Video Object "+video_objekt+" not found");return false;}return true;},showStartscreen:function(html_element){var video_object=$(html_element);if(video_object.hasClass("video_js_proxy")){$(html_element).find(".screens").hide();if(this.isPlaying((html_element))==true){video_object.trigger("video_ended");}if(typeof this.video_objects[html_element]!=="undefined"&&this.video_objects[html_element].use_html5player==true){this.removeJSPlayer(html_element);}else{this.removeFlashPlayer(html_element);}this.restorePlayerPreview(html_element);}else{this.logger.error("Video Object "+html_element+" not found");return false;}return true;},isPlaying:function(video_objekt){var video_object=$(video_objekt);
if(video_object.hasClass("video_js_proxy")){if(this.video_objects[video_objekt].use_html5player===true){if(typeof this.video_objects[video_objekt].video_wrapper!=="undefined"){if(!this.video_objects[video_objekt].video_wrapper.video_player.paused()){return true;}else{return false;}}}else{var flash_id=video_objekt.replace("#","");if(document.getElementById("videoplayer_"+flash_id)!==null&&typeof document.getElementById("videoplayer_"+flash_id).askForPlayingStatus==="function"){return document.getElementById("videoplayer_"+flash_id).askForPlayingStatus();}return false;}}else{this.logger.error("Video Object "+video_objekt+" not found");}return false;},showLikeOverlay:function(element_selector,share_url){this.logger.debug("show share_overlay for container "+element_selector+" with share_url "+share_url);if(typeof this.video_objects[element_selector]==="undefined"||typeof this.video_objects[element_selector].like_overlay==="undefined"){try{if(typeof share_url==="undefined"){share_url=this.video_objects[element_selector].config.share.bookmarks.Facebook.url;
}}catch(e){this.logger.error("share url missing in config");}this.video_objects[element_selector].like_overlay=new project.overlays.LikeOverlay(element_selector,share_url);}this.video_objects[element_selector].like_overlay.show();},hideLikeOverlay:function(element_selector){this.video_objects[element_selector].like_overlay.hideDelayed();},showOverlay:function(type,html_element){this.overlay.show(type,html_element);},setWidth:function(element_selector,width){this.logger.debug("setting "+element_selector+" width to: "+width);if(typeof this.video_objects[element_selector]==="undefined"){this.video_objects[element_selector]={};this.video_objects[element_selector].html_element=element_selector;}},setEndscreenInformation:function(element_selector,videos){var that=this;if(typeof that.video_objects[element_selector]==="undefined"){this.video_objects[element_selector]={};this.video_objects[element_selector].html_element=element_selector;}var flash_src="";if($(element_selector+" object embed").length>0){flash_src=$(element_selector+" object embed").attr("src");
var url_array=flash_src.split("?");if(url_array.length>1){var flash_url=url_array[0];that.video_objects[element_selector].flash_url=flash_url;flash_src=flash_src.replace(flash_url+"?","");}else{that.video_objects[element_selector].flash_url=$(element_selector+" object embed").attr("src");flash_src=$(element_selector+" object embed").attr("flashvars");}}if(flash_src==""){that.video_objects[element_selector].flash_url=$(element_selector+" object").attr("data");$(element_selector+" object param").each(function(index,object){if($(object).attr("name").toLowerCase()=="flashvars"){flash_src=$(object).attr("value");}});}var flash_src_array=flash_src.split("&");$(flash_src_array).each(function(index,object){if(object.indexOf("id=")>-1){that.video_objects[element_selector].flashvar_id=object.replace("id=","");}else{if(object.indexOf("xmlurl=")>-1){that.video_objects[element_selector].flashvar_xmlurl=object.replace("xmlurl=","");}else{if(object.indexOf("cssurl=")>-1){that.video_objects[element_selector].flashvar_cssurl=object.replace("cssurl=","");
}else{if(object.indexOf("jsurl=")>-1){that.video_objects[element_selector].flashvar_jsurl=object.replace("jsurl=","");}}}}});this.video_objects[element_selector].isEmbed=true;this.video_objects[element_selector].use_html5player=false;if(typeof this.video_objects[element_selector].config==="undefined"){this.video_objects[element_selector].config={};this.video_objects[element_selector].config.config_type="video";}if(typeof this.video_objects[element_selector].config.channel==="undefined"){this.video_objects[element_selector].config.channel={};}this.video_objects[element_selector].config.end={status:true};var video_object=[];$(videos).each(function(index,object){var http_index=object.thumb.indexOf("http://",1);object.thumb=object.thumb.substring(http_index);object.xml=object.xml.substring(http_index);object.img=object.thumb;object.time=that.getTimeStringFromSeconds(object.duration);video_object[index]=object;});$.extend(this.video_objects[element_selector].config.channel,{video:video_object});
},getPlayerType:function(html_element){var type="buehne";var video_width=$(html_element).width();if(video_width>=457&&video_width<658){type="artikel";}else{if(video_width>=350&&video_width<457){type="mini";}else{if(video_width<350){type="micro";}}}return type;},getTimeStringFromSeconds:function(seconds){seconds=Number(seconds);var hours=Math.floor(seconds/3600);var minutes=Math.floor(seconds%3600/60);seconds=Math.floor(seconds%3600%60);var string="";if(seconds<10){string="0"+seconds;}else{string=seconds;}if(minutes==0&&hours!=0){string="00:"+string;}else{if(minutes<10){string="0"+minutes+":"+string;}else{string=minutes+":"+string;}}if(hours!=0){string=hours+":"+string;}return string;},hasVideoSubtitles:function(html_element){if(typeof this.video_objects[html_element]!=="undefined"&&this.video_objects[html_element].showVideoSubtitles==true){return true;}return false;},resizeEndscreen:function(){var that=this;for(var video_id in this.video_objects){var item=that.video_objects[video_id];if(typeof item!=="undefined"&&typeof item.player_type!=="undefined"){var player_type=that.getPlayerType(item.html_element);
if(item.player_type!=player_type){that.video_objects[item.html_element].player_type=player_type;if(that.video_objects[item.html_element].is_endscreen_showed!==false){if(typeof that.video_objects[item.html_element].endscreen!=="undefined"){that.video_objects[item.html_element].endscreen.stopRevolverCountdown();}var player_element=$(item.html_element);var is_errorscreen=false;if(true===player_element.find(".screens .endscreen").hasClass("errorscreen")){is_errorscreen=true;}player_element.find(".screens .endscreen").remove();if(false===is_errorscreen){that.showEndscreen(item.html_element);}else{that.showErrorScreen(item.html_element);}}}}}},disableEndscreen:function(video_objekt){if(typeof this.video_objects[video_objekt]!=="undefined"){var config=this.video_objects[video_objekt].config;if(typeof config.end!=="undefined"&&typeof config.end.status!=="undefined"){this.video_objects[video_objekt].config.end.status="false";return true;}else{this.logger.warn("The Video Object "+video_objekt+" has no endscreen status flag");
}}else{this.logger.error("Video Object "+video_objekt+" not found");}return false;}};})(jQuery);window.project=window.project||{};(function(a){project.ConfigLoader=function(b){this.state_manager=b;this.logger=this.state_manager.getLogger();this.channel_data=[];};project.ConfigLoader.prototype={loadVideoXml:function(c,d){this.logger.groupAndTime("Video");if(typeof d==="undefined"||d==false){this.without_channel_xml=false;}else{this.without_channel_xml=true;}this.logger.debug("Call loadVideoXml for file "+c);var b=this.loadXMLFile(c,"video");this.logger.groupAndTimeEnd("Video");return b;},parseLiveVideoXml:function(d){this.logger.debug("Call parseLiveXml");var c=this;var b=false;a(d).find("live").each(function(){b={config_type:"live",src:a(this).attr("src"),src2:a(this).attr("src2"),track:a(this).attr("track")};a(d).find("video ad").each(function(){var e={text:a(this).attr("text"),adcall:a(this).attr("adcall"),midroll:a(this).attr("midroll"),preroll:a(this).attr("preroll"),overlay:a(this).attr("overlay"),postroll:a(this).attr("postroll")};
a.extend(b,{ad:e});});});this.logger.debug("parse finish for Live");return b;},parseKinoVideoXml:function(d){this.logger.debug("Call parseKinoXml");var c=this;var b=false;a(d).find("channel").each(function(){b={config_type:"kino",generator:a(this).find("generator").text(),pubDate:a(this).find("pubDate").text(),lastBuildDate:a(this).find("lastBuildDate").text(),title:a(this).find("title").text(),link:a(this).find("link").text(),description:a(this).find("description").text()};b.item=[];a(d).find("channel item").each(function(f,e){var g={title:a(this).find("title").text(),author:a(this).find("author").text(),description:a(this).find("description").text(),pubDate:a(this).find("pubDate").text()};a(this).find("enclosure").each(function(){var h={url:a(this).attr("url"),length:a(this).attr("length"),type:a(this).attr("type")};a.extend(g,{enclosure:h});});a(this).find("content").each(function(){var h={expression:a(this).attr("expression"),bitrate:a(this).attr("bitrate"),duration:a(this).attr("duration"),url:a(this).attr("url")};
a.extend(g,{content:h});});a(this).find("ad").each(function(){var h={text:a(this).attr("text"),adcall:a(this).attr("adcall")};a.extend(g,{ad:h});});a(this).find("description").each(function(){var h=a(this).text();a.extend(g,{description:h});});a(this).find("thumbnail").each(function(){var h=a(this).attr("url");a.extend(g,{thumbnail:h});});a(this).find("title").each(function(){var h=a(this).text();a.extend(g,{title:h});});a(this).find("chapterTime").each(function(){var h=a(this).text();a.extend(g,{chapterTime:h});});b.item[f]=g;});});this.logger.debug("parse finish for Kino");return b;},parseVideoXml:function(d){this.logger.debug("Call parseVideoXml");var c=this;var b=false;a(d).find("video").each(function(){b={config_type:"video",src:a(this).attr("src"),src2:a(this).attr("src2"),img:a(this).attr("img"),title:a(this).attr("title"),dachzeile:a(this).attr("dachzeile"),ueberschrift:a(this).attr("ueberschrift"),id:a(this).attr("id"),autoplay:a(this).attr("autoplay"),autorepeat:a(this).attr("autorepeat"),ivw:a(this).attr("ivw"),track:a(this).attr("track"),google_analytics:a(this).attr("googleanalytics"),tracking:a(this).attr("tracking"),date:a(this).attr("date"),duration:a(this).attr("duration"),text:a(this).attr("text"),hdDefault:a(this).attr("hdDefault")};
a(d).find("text").each(function(){a.extend(b,{text:a(this).text()});});a(d).find("video bumper").each(function(){var j={};if(a(this).attr("preroll")!=null&&a(this).attr("preroll").length>0){var k=c.loadBumperXml(a(this).attr("preroll"));if(k==false){c.logger.error("Error: Bumper Data is empty");k={error:true};}a.extend(j,{preroll:k});}if(a(this).attr("postroll")!=null&&a(this).attr("postroll").length>0){var k=c.loadBumperXml(a(this).attr("postroll"));if(k==false){c.logger.error("Error: Bumper Data is empty");k={error:true};}a.extend(j,{postroll:k});}a.extend(b,{bumper:j});});a(d).find("video share").each(function(){var k={status:a(this).attr("status"),deeplink:a(this).attr("deeplink"),embed:a(this).attr("embed"),bookmarks:{}};var j={};a(d).find("video share bookmark").each(function(l){var m={url:a(this).attr("url"),title:a(this).attr("title"),icon:a(this).attr("icon")};k.bookmarks[m.title]=m;});a.extend(b,{share:k});});a(d).find("video end").each(function(){var j={status:a(this).attr("status"),xml:a(this).attr("xml"),more:a(this).attr("more"),end_function:a(this).text(),revolver_time:a(this).attr("revolvertime")};
a.extend(b,{end:j});});a(d).find("comment").each(function(){var j={counterbde:a(this).attr("counterbde"),status:a(this).attr("status")};a.extend(b,{comment:j});});a(d).find("video subtitle").each(function(){var j={status:a(this).attr("status"),url:a(this).attr("url")};a.extend(b,{subtitle:j});});a(d).find("video geo").each(function(){var j={img:a(this).attr("img")};a.extend(b,{geo:j});});a(d).find("video restrict").each(function(){var j={age:a(this).attr("age")};a.extend(b,{restrict:j});});a(d).find("video mail").each(function(){var j={link:a(this).attr("link")};a.extend(b,{mail:j});});var f=a(d).find("flash_detection");if(f.length>0){a(d).find("flash_detection").each(function(){var j={enable:a(this).attr("enable"),version:a(this).attr("version")};a.extend(b,{flash_detection:j});});}else{var e={enable:"true",version:"10.1"};a.extend(b,{flash_detection:e});}if(c.without_channel_xml==false){if(b.end!=null&&b.end.xml!=null){var h=c.loadChannelXml(b.end.xml);var g=null;if(h==false){c.logger.error("Error: Channel Data is empty");
b.end.status="false";g={error:true};}else{g={more:h.more,video:h.videos};}a.extend(b,{channel:g});}c.channel_data.push(b);}});this.logger.debug("parse finish for video");return b;},loadChannelXml:function(c){this.logger.groupAndTime("Channel");this.logger.debug("Call loadVideoXml for file "+c);var b=this.loadXMLFile(c,"channel");this.logger.groupAndTimeEnd("Channel");return b;},parseChannelXml:function(e){this.logger.debug("Call parseChannelXml");var d=this;var c=false;a(e).find("channel").each(function(f){c=a(this).attr("more");});var b=[];a(e).find("video").each(function(f){var g={xml:a(this).attr("xml"),img:a(this).attr("img"),title:a(this).attr("title"),ueberschrift:a(this).attr("ueberschrift"),text:a(this).attr("text"),duration:a(this).attr("duration"),date:a(this).attr("date"),rating:a(this).attr("rating"),time:a(this).attr("time"),timestamp:a(this).attr("timestamp"),had_revolver:false};b[f]=g;});this.logger.debug("parse finish for channel");return{videos:b};},loadBumperXml:function(c){this.logger.groupAndTime("Bumper");
this.logger.debug("Call loadBumperXml for file "+c);var b=this.loadXMLFile(c,"bumper");this.logger.groupAndTimeEnd("Bumper");return b;},parseBumperXml:function(d){this.logger.debug("Call parseBumperXml");var c=this;var b={};a(d).find("video").each(function(){b={src:a(this).attr("src"),img:a(this).attr("img"),id:a(this).attr("id"),autoplay:a(this).attr("autoplay"),ivw:a(this).attr("ivw"),track:a(this).attr("track"),title:a(this).attr("title"),duration:a(this).attr("duration")};});this.logger.debug("parse finish for Bumper");return b;},loadXMLFile:function(b,c){var d=this;var e=false;d.logger.groupAndTime("Get XML File");a.ajax({type:"GET",url:b,async:false,dataType:"xml",success:function(f){d.logger.groupAndTimeEnd("Get XML File");if(c=="video"){if(a(f).find("video").length>0){e=d.parseVideoXml(f);}else{if(a(f).find("live").length>0){e=d.parseLiveVideoXml(f);}else{if(a(f).find("channel").length>0){e=d.parseKinoVideoXml(f);}}}if("undefined"!==typeof e){if("undefined"!==typeof e.duration&&(e.duration==1||e.duration==1000||e.duration==-1)){e.is_live_player=true;
}else{e.is_live_player=false;}}}else{if(c=="channel"){e=d.parseChannelXml(f);}else{if(c=="bumper"){e=d.parseBumperXml(f);}}}},error:function(f){d.logger.error("XML File '"+b+"' not found");d.logger.groupAndTimeEnd("Get XML File");}});return e;}};})(jQuery);window.project=window.project||{};(function(a){project.Logger=function(b){project.Logger.LEVEL={ALL:10,DEBUG:20,INFO:30,WARN:40,ERROR:50,OFF:60};this.is_log_enabled=true;this.log_level=b;if(typeof(console)==="undefined"){var c=function(){};console={};console.log=c;console.error=c;console.info=c;console.warn=c;console.debug=c;console.trace=c;console.time=c;console.timeEnd=c;console.profile=c;console.profileEnd=c;console.group=c;console.groupEnd=c;}else{if(typeof console.log==="object"){console.trace=function(){console.log(arguments);};console.debug=console.trace;console.time=console.trace;console.timeEnd=console.trace;console.profile=console.trace;console.profileEnd=console.trace;console.group=console.trace;console.groupEnd=console.trace;
}}};project.Logger.prototype={setLogLevel:function(b){this.log_level=b;},trace:function(){if(this.is_log_enabled==true&&this.log_level<=project.Logger.LEVEL.DEBUG){console.trace();}},debug:function(b){if(this.is_log_enabled==true&&this.log_level<=project.Logger.LEVEL.DEBUG){console.debug(b);}},info:function(b){if(this.is_log_enabled==true&&this.log_level<=project.Logger.LEVEL.INFO){console.info(b);}},warn:function(b){if(this.is_log_enabled==true&&this.log_level<=project.Logger.LEVEL.WARN){console.warn(b);}},error:function(b){if(this.is_log_enabled==true&&this.log_level<=project.Logger.LEVEL.ERROR){console.error(b);}},time:function(b){if(this.is_log_enabled==true&&this.log_level<=project.Logger.LEVEL.DEBUG){console.time(b);}},timeEnd:function(b){if(this.is_log_enabled==true&&this.log_level<=project.Logger.LEVEL.DEBUG){console.timeEnd(b);}},profile:function(b){if(this.is_log_enabled==true&&this.log_level<=project.Logger.LEVEL.DEBUG){console.profile(b);}},profileEnd:function(b){if(this.is_log_enabled==true&&this.log_level<=project.Logger.LEVEL.DEBUG){console.profileEnd();
}},group:function(b){if(this.is_log_enabled==true&&this.log_level<=project.Logger.LEVEL.DEBUG){console.group(b);}},groupEnd:function(){if(this.is_log_enabled==true&&this.log_level<=project.Logger.LEVEL.DEBUG){console.groupEnd();}},groupAndTime:function(b){this.group(b);this.time(b);},groupAndTimeEnd:function(b){this.timeEnd(b);this.groupEnd();}};})(jQuery);window.project=window.project||{};(function(a){project.BrowserDetection=function(b){this.state_manager=b;this.logger=this.state_manager.getLogger();this.state_manager=b;};project.BrowserDetection.prototype={hasUserFlash:function(e){if("true"===e.flash_detection.enable){var f=true;if(true===this.isIE()){f=this.getActiveXFlashObjectVersion();}else{f=this.getFlashPluginVersion();}if(false===f){return false;}else{var g=f.split(",");var d=e.flash_detection.version.split(".");var c=parseFloat(e.flash_detection.version);var b=parseFloat(g[0]+"."+g[1]);if(false===isNaN(c)&&false===isNaN(b)){if(b>=c){return true;}}}this.logger.error("Flash version not found or to old ! Found: "+b+" Require: "+c);
return false;}else{return true;}},getFlashPluginVersion:function(){if(navigator.plugins){for(var c=0;c<navigator.plugins.length;c++){var d=navigator.plugins[c];var b=d.name+d.description;if(b.indexOf("Shockwave")!=-1&&b.indexOf("Flash")!=-1){return b.replace(/\D+/g,",").match(/^,?(.+),?$/)[1];}}}return false;},getActiveXFlashObjectVersion:function(){try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(typeof c!=="undefined"){return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1];}}catch(b){return false;}return false;},isIE:function(){return navigator.userAgent.match(/MSIE (\d+\.\d+);/i)!==null;},isIE7:function(){return navigator.userAgent.match(/MSIE (7.\d+);/i)!==null;},isIE10:function(){return navigator.userAgent.match(/MSIE 10.[\d];/i)!==null;},isMobileIE10:function(){if(true===this.isIE10()){var b=this.getActiveXFlashObjectVersion();if(false===b){return true;}}return false;},isIPad:function(){return navigator.userAgent.match(/iPad/i)!==null;
},isIPhone:function(){return navigator.userAgent.match(/iPhone/i)!==null;},isIOS:function(){return this.isIPhone()||this.isIPad();},isMobile:function(){return this.isIOS()||this.isAndroid()||this.isMobileIE10();},isChrome:function(){return navigator.userAgent.match(/Chrome/i)!==null;},isAndroid:function(){return navigator.userAgent.match(/Android/i)!==null;},isHTML5Client:function(){if(true===this.isMobile()){return true;}return false;}};})(jQuery);window.project=window.project||{};(function(a){project.VideoControls=function(d,b,c){this.state_manager=d;this.video_player=b;this.logger=d.logger;this.options=c;};project.VideoControls.prototype={getControls:function(){var d="buehne";var b=a(this.options.html_element).width();if(b>=457&&b<570){d="artikel";}else{if(b>=350&&b<457){d="mini";}else{if(b<350){d="micro";}}}var e=this;this.mouseDownEvent=false;this.removeVerticalControlStatus=true;if(this.video_player!=null){this.video_player.controls=_V_.createElement("div",{className:"vjs-controls "+d});
this.video_player.box.appendChild(this.video_player.controls);this.video_player.activateElement(this.video_player.controls,"controlBar");this.video_player.activateElement(this.video_player.controls,"mouseOverVideoReporter");}a(e.options.html_element).removeClass("live");if(true===e.options.config.is_live_player){a(e.options.html_element).addClass("live");}this.buttons={};this.buttons.playToggle=new project.buttons.PlayToggle(this);this.buttons.fullscreen=new project.buttons.Fullscreen(this);this.buttons.progressBar=new project.buttons.ProgressBar(this);this.buttons.dynamicTimeDisplay=new project.buttons.DynamicTimeDisplay(this);this.buttons.timeDisplay=new project.buttons.TimeDisplay(this);this.buttons.volumeDown=new project.buttons.VolumeControll(this,"down",-0.1);this.buttons.volumeUp=new project.buttons.VolumeControll(this,"up",0.1);this.buttons.volumeBarHorizontal=new project.buttons.VolumeBarHorizontal(this);this.buttons.volumeBarVertical=new project.buttons.VolumeBarVertical(this);
this.buttons.mute=new project.buttons.Mute(this);this.buttons.separator_left=new project.buttons.Separator(this,"left");this.buttons.separator_right=new project.buttons.Separator(this,"right");if(typeof this.options.config.subtitle!=="undefined"&&this.options.config.subtitle.status=="true"&&this.options.config.subtitle.url!=null&&(this.options.player_type=="buehne"||this.options.player_type=="artikel")&&this.state_manager.browser_detection.isMobile()==false){this.buttons.subtitle=new project.buttons.Subtitle(this);}if(this.state_manager.browser_detection.isMobile()==false){if(this.options.config.share!=null&&this.options.config.share.bookmarks!=null&&this.options.config.share.bookmarks.Facebook!=null){this.buttons.share=new project.buttons.Share(this,this.options.config.share.bookmarks.Facebook.url);}else{this.buttons.share=new project.buttons.Share(this,false);}}if(this.state_manager.hasHDSource(this.options.html_element)&&this.state_manager.browser_detection.isMobile()==false){this.buttons.hd=new project.buttons.HD(this);
}var c=4;if(a(".exozet-css .vjs-controls > div.vjs-hd-control").css("display")=="none"){c--;}if(a(".exozet-css .vjs-controls > div.vjs-share-control").css("display")=="none"){c--;}this.buttons.background=new project.buttons.Background(this,c);a(this.options.html_element+".exozet-css").mouseup(function(g){if(e.mouseDownEvent==true&&e.removeVerticalControlStatus==true){e.removeVerticalControl(e);e.removeVerticalControlStatus=false;}e.mouseDownEvent=false;});a(".vjs-big-play-button").find("span").remove();a(e.options.html_element+" .vjs-controls > div").each(function(h,g){if(a(g).css("display")=="none"){a(g).remove();}});if(a(e.options.html_element+" .vjs-controls").css("position")=="absolutea"){var f=null;a(e.options.html_element).mousemove(function(){if(a(e.options.html_element+" .vjs-controls").css("display")=="none"){a(e.options.html_element+" .vjs-controls").show();}else{if(f!=null){clearTimeout(f);}f=setTimeout(function(){a(e.options.html_element+" .vjs-controls").hide();},2000);}});
}},hideControls:function(b){a(b.options.html_element+" .vjs-controls").hide();},mouseInVerticalControlHandler:function(b){a(b.options.html_element+" .vjs-mute-control").stop(true,true);a(b.options.html_element+" .vjs-volume-vertical-hide").stop(true,true);a(b.options.html_element+" .vjs-volume-vertical-hide").css("opacity",1);},showVerticalControl:function(e){var c=a(this.options.html_element+" .vertical_volume_container");if(c.length==0){c='<div class="vertical_volume_container"></div>';a(this.options.html_element+" .video-js-box").append(c);c=a(".vertical_volume_container");var b=a('<div class="vjs-volume-vertical-hide"></div>');var d=this;b.slider({orientation:"vertical",range:"min",min:0,max:100,value:(d.video_player.volume()*100),slide:function(f,g){d.placeVerticalSlider();if(g.value==0){d.video_player.volume(0);}else{d.video_player.volume(g.value/100);}}});b.bind("slidestart",function(f,g){a(d.options.html_element+" .exozet-css .verticalVolumeSlider a").addClass("active_handler");
});b.bind("slidestop",function(f,g){a(d.options.html_element+" .exozet-css .verticalVolumeSlider a").removeClass("active_handler");});a(this.options.html_element+" .vertical_volume_container").mousedown(function(f){d.mouseDownEvent=true;});a(this.options.html_element+" .vertical_volume_container").hover(function(f){if(f.type=="mouseenter"){d.mouseInVerticalControlHandler(d);}else{if(f.type=="mouseleave"){if(d.mouseDownEvent){d.removeVerticalControlStatus=true;}else{d.removeVerticalControl(d);}}}});c.append(b);d.placeVerticalVolumeContainer(c);d.placeVerticalSlider();}},removeVerticalControl:function(b){a(b.options.html_element+" .vjs-volume-vertical-hide").delay(300).fadeOut(100,function(){a(b.options.html_element+" .screens").removeClass("verticalVolumeSlider");a(b.options.html_element+" .vertical_volume_control").remove();a(b.options.html_element+" .vertical_volume_container").remove();});},placeVerticalVolumeContainer:function(b){var f=a(this.options.html_element+" .vjs-controls");var d=a(this.options.html_element+" .vjs-mute-control");
var g=f.height();var j=d.css("top").replace("px","");b.css("bottom",(g-j)+"px");var k=d.css("left").replace("px","");var l=d.css("right").replace("px","");var m=d.width();var c=b.width();var e=0;if(c>m){e=Math.round((c-m)/2);}else{e=Math.round((m-c)/2);}var h="";if(k!="auto"){h={from:"left",position:(parseInt(k)+e)+"px"};}else{h={from:"right",position:(parseInt(l)-e)+"px"};}b.css(h.from,h.position);},placeVerticalSlider:function(){var c=a(this.options.html_element+" .vjs-volume-vertical-hide");var g=-0;var d=a(this.options.html_element+" .ui-slider-range");var e=d.height();var f=c.height();var b=parseInt(g)-(f-e);d.css("background-position-y",b+"px");d.css("background-position-x","-156px");}};})(jQuery);window.project=window.project||{};(function(a){project.VideoJSWrapper=function(k,g,o,n){var j=this;this.options=o;this.state_manager=k;this.playlist=o.playlist;this.logger=k.getLogger();this.onEnded=false;this.first_play=true;this.is_playing=true;this.playlist_index=0;this.playlist_video=c;
var h=o.html_element.replace("#","");var d=a('<div class="video-js-box vim-css"></div>');this.video_element=a('<video id="'+h+'_videoplayer" class="video-js" controls autoplay></video>');var c=o.playlist.getVideo(this.playlist_index,false);var m=this.getVideoSrc(c);var b=a('<source id="'+h+'_src" src="'+m+'"  type="'+c.type.filetype+'"/>');this.video_element.attr("src",m);if(typeof c.subtitle_src!=="undefined"){this.addSubtitle(this.video_element,c.subtitle_src);}d.append(this.video_element);a(g).append(d);this.video_element=this.video_src_element=a("#"+h+"_videoplayer").get(0);this.video_src_element=a("#"+h+"_src").get(0);this.video_player=VideoJS.setup(h+"_videoplayer",{controlsBelow:false,controlsHiding:false,controlsHideInit:false,defaultVolume:0.5,flashVersion:9,linksHiding:true,flashIsDominant:false,useBrowserControls:false,controlsAtStart:true});if(!this.state_manager.browser_detection.isMobile()){var e=new project.VideoControls(this.state_manager,this.video_player,o);a(o.html_element+".exozet-css .vjs-controls > div.vjs-fullscreen-control").html("");
a(o.html_element+".exozet-css .vjs-controls > div.vjs-volume-control").html("");a(o.html_element+".exozet-css .vjs-controls > div.vjs-play-control").html("");a(o.html_element+".exozet-css .vjs-controls").remove();a(o.html_element+".exozet-css").append(e.getControls());}else{d.addClass("ios");}if(this.options.config.config_type=="kino"){this.kinoOverlay=new project.overlays.KinoOverlay(this);}this.video_player.volume(0.5);this.video_player.onCurrentTimeUpdate(function(q){if(false==j.options.config.is_live_player){if(q>=j.lastcall+10&&q<=j.lastcall+11){j.lastcall=q;if(j.is_playing==true){var p=j.getVideoPlayerTimes(j.video_player,o);project_objects.StateManger.trackVideoTimeupdate(o.html_element,p.percent,p.duration);}}}});if(this.options.config.config_type=="kino"){this.video_player.onCurrentTimeUpdate(function(p){if(p>=j.lastcall_nowtilus+5&&p<=j.lastcall_nowtilus+6){j.lastcall_nowtilus=p;if(j.is_playing==true){project_objects.StateManger.trackNowtilusTimeupdate(o.html_element,j.lastcall_nowtilus);
}}});}var l=new project.Spinner(this.options.html_element,this.video_player);this.video_player.onEnded(function(){j.logger.debug("onEnded <start>");if(false===j.isCommercial()){j.doEndAction();}else{}j.logger.debug("onEnded <finish>");});this.video_player.onPlay(function(){j.logger.debug("onPlay <start>");if(false===j.isCommercial()){j.doPlayAction();}j.logger.debug("onPlay <finish>");});this.video_player.onPause(function(){if(a(o.html_element+" video").length>0){j.logger.debug("onPause <start>");if(false===j.isCommercial()){j.doPauseAction();}j.logger.debug("onPause <finish>");}});this.video_player.onError(function(p,q){project_objects.StateManger.showErrorScreen(j.options.html_element);});if("undefined"!==typeof sasvideo&&true===a.isFunction(sasvideo)){var f=h+"_videoplayer";sasvideo(window.sas_pageid,window.sas_formatid,window.sas_target,f);}else{}if(false===project_objects.StateManger.browser_detection.isMobile()){a(o.html_element).mouseover(function(){a(o.html_element).find("span.play").show();
});a(o.html_element).mouseout(function(){a(o.html_element).find("span.play").hide();});}if(c.type.isHDPossible===false){a(this.options.html_element).find(".vjs-hd-control").addClass("deactive");}};project.VideoJSWrapper.prototype={doPlayAction:function(){var b=this;a(this.options.html_element+" span.play").addClass("pause");a(this.options.html_element+" span.play").unbind("click");a(this.options.html_element+" span.play").click(function(){b.video_player.pause();});a(this.options.html_element+" span.play").hide();this.lastcall=b.video_player.currentTime();this.lastcall_nowtilus=b.video_player.currentTime();this.is_playing=true;var c=this.getVideoPlayerTimes(this.video_player,this.options);if(this.first_play==true){project_objects.StateManger.trackVideoPlay(this.options.html_element,c.percent,c.duration);project_objects.StateManger.trackVideoStart(this.options.html_element,c.percent,c.duration);this.first_play=false;}else{project_objects.StateManger.trackVideoResume(this.options.html_element,c.percent,c.duration);
}},doPauseAction:function(){var b=this;this.is_playing=false;if(!this.state_manager.browser_detection.isMobile()){a(this.options.html_element+" span.play").removeClass("pause");a(this.options.html_element+" span.play").unbind("click");a(this.options.html_element+" span.play").click(function(){b.video_player.play();});a(this.options.html_element+" span.play").show();}var c=this.getVideoPlayerTimes(this.video_player,this.options);project_objects.StateManger.trackVideoPause(this.options.html_element,c.percent,c.duration);},doEndAction:function(){var c=this.getVideoPlayerTimes(this.video_player,this.options);project_objects.StateManger.trackVideoPlayComplete(this.options.html_element,c.percent,c.duration);if(this.playlist_index>=(this.playlist.getLength()-1)){project_objects.StateManger.showEndscreen(this.options.html_element);}else{var b=this.options.playlist.getVideo(this.playlist_index);if(this.options.config.autorepeat=="true"&&b.type=="main"){this.playNewVideo(this,this.playlist_index);
}else{this.playlist_index++;this.playNewVideo(this,this.playlist_index);}}},isCommercial:function(){var b=this.video_player.video.src;var c=true;a(this.options.playlist.video_srcs).each(function(e,d){if(d===b){c=false;}});return c;},playNewVideo:function(e,c){var d=e.options.playlist.getVideo(c);var b=this.getVideoSrc(d);if(d.src==""){project_objects.StateManger.showErrorScreen(e.options.html_element,"Dieses Video wird vom Player nicht unterstützt.");}else{this.removeSubtitle();if(typeof d.subtitle_src!=="undefined"){this.addSubtitle(this.video_element,d.subtitle_src);}e.video_player.pause();e.video_player.video.src=b;e.video_player.video.load();e.video_player.play();}},switchBitrate:function(c){var d=this.options.playlist.getVideo(this.playlist_index);var b=this.getVideoSrc(d,c);var e=this.video_player.currentTime();this.video_player.pause();this.video_player.video.src=b;this.video_player.video.load();this.video_player.play();this.jumpToPosition(e);},jumpToPosition:function(b){var c=this;
setTimeout(function(){if(c.video_player.currentTime()<b){c.video_player.currentTime(b);c.jumpToPosition(b);}},100);},addSubtitle:function(c,b){if(typeof b!=="undefined"&&b!==null){a(c).append(a('<track kind="subtitles" src="'+b+'" srclang="en" label="English">'));if(typeof this.video_player!=="undefined"){this.video_player.getSubtitles();}}},removeSubtitle:function(){a(this.options.html_element).find("video track").remove();},getVideoPlayerTimes:function(b,c){var d={};a.extend(d,{percent:Math.round(this.getCurrentTimeAsPercent(b))});a.extend(d,{duration:Math.round(b.duration())});if(isNaN(d.percent)){d.percent=0;}if(isNaN(d.duration)){d.duration=parseInt(c.config.duration)/1000;}return d;},getCurrentTimeAsPercent:function(b){return Math.round((b.currentTime()/b.duration())*100);},getVideoPlayer:function(b){return this.video_player;},getVideoSrc:function(d,c){var e=false;if((typeof c!=="undefined"&&c=="hd")||(typeof this.options.config.hdDefault!=="undefined"&&this.options.config.hdDefault=="true")){e=true;
}var b=d.src;if(d.type.isHDPossible===true){a(this.options.html_element).find(".vjs-hd-control").removeClass("deactive");if(e){b=d.hdsrc.hd_src;}else{b=d.hdsrc.sd_src;}}else{a(this.options.html_element).find(".vjs-hd-control").addClass("deactive");}return b;}};})(jQuery);window.project=window.project||{};(function(a){project.VideoPlaylist=function(b){this.playlist=[];this.video_srcs=[];this.video_index=0;this.bitrates={sd:300,hd:1000};};project.VideoPlaylist.prototype={addVideo:function(c,d,f,b){var e={src:c,alternativ_src:f,type:d,subtitle_src:b};this.playlist.push(e);this.video_srcs.push(c,f);},getVideo:function(c,f){this.video_index=c;var e=this.playlist[c];var g=this.getVideoSrcForIndex(e);var d=this.getVideoType(g);var b={};if(d.isHDPossible===true){b.sd_src=g+this.getQualityString("sd");b.hd_src=g+this.getQualityString("hd");}return{src:g,hdsrc:b,type:d,subtitle_src:e.subtitle_src};},getVideoSrcForIndex:function(d){var b=this.getVideoType(d.src);var c=this.getVideoType(d.alternativ_src);
if(b==false&&c==false){return false;}else{if(b!=false&&c==false){return d.src;}else{if(b==false&&c!=false){return d.alternativ_src;}else{if(b.isHDPossible==false&&c.isHDPossible==true){return d.alternativ_src;}else{return d.src;}}}}},getVideoType:function(d){if(!d){return false;}var b=d.match(/\.([^\.]+)$/);if(b&&b[1]){var c=b[1].toLowerCase();if(c=="ogv"){return{filetype:"video/ogg",isHDPossible:false};}else{if(c=="mp4"){return{filetype:"video/mp4",isHDPossible:false};}else{if(c=="m3u8"||c=="smil"){return{filetype:"video/mp4",isHDPossible:true};}else{if(c=="webm"){return{filetype:"video/webm",isHDPossible:false};}}}}}return false;},getQualityString:function(b){return"";if(b=="hd"){return"?b="+this.bitrates.hd+"-";}else{return"?b=-"+this.bitrates.sd;}},getLength:function(){return this.playlist.length;},getNextVideo:function(){this.video_index++;return this.playlist[this.video_index];}};})(jQuery);window.project=window.project||{};window.project.overlays=window.project.overlays||{};(function(a){project.overlays.KinoOverlay=function(d){var e=this;
this.parent=d;this.film_overlay=a('<div class="film_overlay"><div>');a(this.parent.options.html_element+" .video-js-box").append(this.film_overlay);this.last_showed_teaser_count=Math.floor((this.film_overlay.width()-100)/66);this.teaser_list=a('<div class="film_teaser_list"></div>');a(this.parent.options.config.item).each(function(j,h){var g=h.chapterTime;var k=a('<div class="film_teaser"><img width="64" height="48" src="'+h.thumbnail+'"/></dvi>');a(e.teaser_list).append(k);k.click(function(){if(g==null){g=0;}e.parent.video_player.pause();e.parent.video_player.currentTime(g);e.parent.video_player.play();});if(j>=e.last_showed_teaser_count){k.hide();}else{e.last_showed_teaser_index=j;}if(j==0){k.addClass("active");e.active_index=0;}else{if(j==1){e.next_chapter_time=g;}}});var c=a('<div class="film_teaser_button_forward"></div>');a(e.film_overlay).append(c);c.click(function(){e.forwardAction();});var b=a('<div class="film_teaser_button_back"></div>');a(e.film_overlay).append(b);b.click(function(){e.backAction();
});a(e.film_overlay).append(e.teaser_list);var f=this.teaser_list.width();this.teaser_list.css("margin-left","-"+Math.ceil(f/2)+"px");this.teaser_list.css("left","50%");e.parent.video_player.onCurrentTimeUpdate(function(g){e.onCurrentTimeUpdate(g);});a(this.parent.options.html_element+" .video-js-box").mousemove(function(){if(e.timer!=null){clearTimeout(e.timer);}e.film_overlay.show();e.timer=setTimeout(function(){e.film_overlay.hide();},4000);});};project.overlays.KinoOverlay.prototype={forwardAction:function(){if((this.last_showed_teaser_index+1)<a(this.parent.options.html_element+" .film_teaser").length){this.last_showed_teaser_index+=1;var b=a(this.parent.options.html_element+" .film_teaser").get(this.last_showed_teaser_index);a(b).show();var c=a(this.parent.options.html_element+" .film_teaser").get(this.last_showed_teaser_index-this.last_showed_teaser_count);a(c).hide();}},backAction:function(){if((this.last_showed_teaser_index-this.last_showed_teaser_count)>=0){var b=a(this.parent.options.html_element+" .film_teaser").get(this.last_showed_teaser_index);
a(b).hide();var c=a(this.parent.options.html_element+" .film_teaser").get(this.last_showed_teaser_index-this.last_showed_teaser_count);a(c).show();this.last_showed_teaser_index-=1;}},onCurrentTimeUpdate:function(e){var d=this;var b=0;var c=0;a(this.parent.options.config.item).each(function(f,g){if(b==null){b=0;}var h=g.chapterTime;if(b<e&&e<h){d.setNextChapterActive(c);return;}else{c=f;b=h;}});},setNextChapterActive:function(b){a(this.parent.options.html_element+" .film_teaser").removeClass("active");this.active_index+=1;var d=a(this.parent.options.html_element+" .film_teaser").get(b);a(d).addClass("active");var c=a(this.parent.options.config.item).get(b+1);this.next_chapter_time=c.chapterTime;}};})(jQuery);window.project=window.project||{};window.project.overlays=window.project.overlays||{};(function(a){project.overlays.LikeOverlay=function(f,e){var d=this;this.timer=0;this.element=a(f+" .xoz_share_container");if(this.element.length==0&&e){this.element=a('<div class="xoz_share_container"></div>');
this.element.hide();var c=a('<div class="xoz_share_inner_container"></div>');this.element.append(c);var b=a('<iframe src="'+e+'" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:130px; height:21px;" allowTransparency="true"></iframe>');c.append(b);var g=a('<div class="xoz_share_container_background"></div>');c.append(g);a(f).append(this.element);this.element.mouseleave(function(h){d.hide();});this.element.mouseenter(function(h){clearTimeout(d.timer);});this.show();}else{if(this.element.css("display")=="none"){this.show();}}};project.overlays.LikeOverlay.prototype={show:function(){clearTimeout(this.timer);this.element.show();},hide:function(){this.element.hide();},hideDelayed:function(){var b=this;this.timer=setTimeout(function(){b.element.hide();},2000);}};})(jQuery);window.project=window.project||{};(function(a){project.BildEndscreen=function(d,c,b,f,g){var e=this;this.top_message=g||"Ein Fehler ist Aufgetreten.";this.message=f;this.is_error_screen=false;if(b==true){this.is_error_screen=true;
}this.state_manager=d;this.logger=this.state_manager.getLogger();this.option=c;this.revolver_count=0;this.revolver_load_enable=false;if(typeof c!=="undefined"&&typeof c.config!=="undefined"){this.channels=c.config.channel;if(this.is_error_screen==false&&c.isEmbed==false&&!isNaN(c.config.end.revolver_time)&&a(c.config.channel.video).get(0).had_revolver==false){this.revolver_count=parseInt(c.config.end.revolver_time);}}this.element=a(this.option.html_element);if(this.revolver_count>0){this.logger.debug("RevolerLoad ENABLE");this.revolver_load_enable=true;a(window).bind("focus",function(){if(e.revolver_load_enable===true){e.resumeRevolverCountdown();}}).bind("blur",function(){if(e.revolver_load_enable===true){e.pauseRevolverCountdown();}});this.countdown_timeout=setTimeout(function(){e.revolverTickAction();},1000);}};project.BildEndscreen.prototype={revolverTickAction:function(){var b=this;this.revolver_count-=1;if(this.revolver_count>0){this.logger.debug("RevolverLoad TICK "+this.option.html_element+" "+this.revolver_count);
a(this.option.html_element).find(".revolver_time").html(this.revolver_count);this.countdown_timeout=setTimeout(function(){b.revolverTickAction();},1000);}else{this.revolverFinishAction();}},revolverFinishAction:function(){var d=this;this.revolver_load_enable=false;var e=this.option.config.channel.video.shift();var c=e.xml;e.had_revolver=true;this.option.config.channel.video.push(e);var b=parseInt(this.option.countRevolver)+1||1;project_objects.StateManger.play(d.option.html_element,c,null,b,true);this.logger.debug("RevolverLoad FINISH");},resumeRevolverCountdown:function(){var b=this;this.logger.debug("RevolverLoad RESUME");if(this.countdown_timeout==null){this.countdown_timeout=setTimeout(function(){b.revolverTickAction();},1000);}},pauseRevolverCountdown:function(){this.logger.debug("RevolverLoad PAUSE");clearTimeout(this.countdown_timeout);this.countdown_timeout=null;},stopRevolverCountdown:function(){this.logger.debug("RevolverLoad KILL");this.pauseRevolverCountdown();this.revolver_count=null;
this.revolver_load_enable=false;},getPlayerType:function(){var c=null;var b=a(this.option.html_element).width();if(b>=658){c="buehne";}else{if(b>=457&&b<658){c="artikel";}else{if(b>=350&&b<457){c="mini";}}}return c;},channelForwardAction:function(){if(this.back_button.hasClass("hide_channel_button")){this.showButton(this.back_button);}this.element.find(".hentry_container").addClass("hide");this.active_channel_block++;if(this.active_channel_block==this.channel_blocks_count-1){this.hideButton(this.forward_button);}var d=this.active_channel_block*this.channel_column_count;var b=(this.active_channel_block+1)*this.channel_column_count;for(var c=d;c<b;c++){a(this.element.find(".hentry_container").get(c)).removeClass("hide");}},channelBackAction:function(){if(this.forward_button.hasClass("hide_channel_button")){this.showButton(this.forward_button);}this.element.find(".hentry_container").addClass("hide");this.active_channel_block--;if(this.active_channel_block==0){this.hideButton(this.back_button);
}var d=this.active_channel_block*this.channel_column_count;var b=(this.active_channel_block+1)*this.channel_column_count;for(var c=d;c<b;c++){a(this.element.find(".hentry_container").get(c)).removeClass("hide");}},getSocialBookmarks:function(){var d={};var c=0;if(typeof this.option.config.share!=="undefined"&&typeof this.option.config.share.bookmarks!=="undefined"){if(typeof this.option.config.share.bookmarks.Facebook!=="undefined"){var b=this.option.config.share.bookmarks.Facebook.url;d.facebook=a('<div class="facebook"><iframe src="'+b+'" scrolling="no" frameborder="0" style="border:none;" allowTransparency="true"></iframe></div>');c++;}if(typeof this.option.config.share.bookmarks.Twitter!=="undefined"){var b=this.option.config.share.bookmarks.Twitter.url;d.twitter=a('<div class="twitter"><iframe allowtransparency="true" frameborder="0" scrolling="no"  src="'+b+'" style="width:108px; height:20px;"></iframe></div>');c++;}if(typeof this.option.config.share.bookmarks.Googleplus!=="undefined"){var b=this.option.config.share.bookmarks.Googleplus.url;
d.googleplus=a('<div class="googleplus"><div class="g-plusone" data-size="medium" data-href="'+b+'"></div></div>');c++;}}d.count=c;return d;},getCommentObject:function(c){var d=null;if(typeof this.option.isEmbed!=="undefined"&&this.option.isEmbed==true){if(typeof this.option.config.comment!=="undefined"&&typeof this.option.config.comment.status!=="undefined"&&this.option.config.comment.status==="true"){d=a('<span class="comment"><span class="comment_logo"></span>Kommentieren</span>');}}else{var b=this.getCommentCount();if(c=="mini"){d=a('<span class="comment"><span class="comment_logo"></span></span>');}else{d=a('<span class="comment">Kommentieren</span>');}if(b!=null){d.append(a('<span class="comment_icon"></span><span class="comment_count">'+b+"</span>"));}else{d=null;}}return d;},getCommentCount:function(){var b=null;var c=this;if(typeof this.option.config.comment!=="undefined"&&typeof this.option.config.comment.counterbde!=="undefined"&&typeof this.option.config.comment.status!=="undefined"&&this.option.config.comment.status==="true"){a.ajax({type:"GET",url:this.option.config.comment.counterbde,async:false,dataType:"json",success:function(d){a.each(d.numComments,function(e,f){if(c.option.config.comment.counterbde.indexOf("/"+e)){b=f;
}});}});}return b;},playEntry:function(d,b,c){if(c.parent().hasClass("revolver_load")){d.stopRevolverCountdown();d.revolverFinishAction();}else{project_objects.StateManger.play(d.option.html_element,b.xml);}},getChannelEntry:function(h,d){var e=this;var j=a('<div class="hentry clearfix"></div>');if(h=="mini"||h=="artikel"){j.addClass("small");}if(typeof d.img!=="undefined"){var f=a('<span class="playerIcon"></span>');var c=a('<img border="0" src="'+d.img+'" class="video classic hide" alt="'+d.ueberschrift+'" />');j.append(f);j.append(c);a(c).bind("click",function(){e.playEntry(e,d,j);});a(f).bind("click",function(){e.playEntry(e,d,j);});}var k=a('<h3 class="entry-title"></h3>');a(k).bind("click",function(){e.playEntry(e,d,j);});if(typeof d.title!=="undefined"){var b=a('<span class="kicker">'+d.title+"</span>");k.append(b);}j.append(k);if(typeof d.text!=="undefined"){j.append(a('<p class="entry-content">'+d.text+"</p>"));}var g=a('<div class="published"></div>');if(typeof d.time!=="undefined"){g.append(a('<span class="value">'+d.time+"</span>"));
}if(typeof d.date!=="undefined"){g.append(a('<span class="duration">'+d.date+"</span>"));}j.append(g);return j;},getEndscreenHTML:function(o){var g=this;var d=false;if(typeof g.option.isEmbed!=="undefined"&&g.option.isEmbed==true){d=true;}var j=this.getPlayerType();if(this.is_error_screen==false&&(j===null||j==="mini")){this.stopRevolverCountdown();}if(j===null){if(this.is_error_screen==true){var b=a('<div class="endscreen errorscreen '+j+(d?" embed":"")+'"></div>');var l=a('<div class="error_msg '+j+' first">'+this.top_message+"</div>");b.append(l);var n=a('<div class="error_msg '+j+' last">'+this.message+"</div>");b.append(n);return b;}return null;}var b=a('<div class="endscreen '+j+(d?" embed":"")+'"></div>');var k=a('<div class="hentries '+j+' clearfix"></div>');if(typeof this.message!=="undefined"){b.addClass("errorscreen");var l=a('<div class="error_msg '+j+' first">'+this.top_message+"</div>");b.append(l);var n=a('<div class="error_msg '+j+' last">'+this.message+"</div>");b.append(n);
}else{var c=a('<div class="actions '+j+'"></div>');var e=a('<span class="replay"><span class="replay16"></span>Wiederholen</span>');var f=this.getCommentObject(j);e.hover(function(){e.find("span.replay16").toggleClass("active");});e.click(function(){g.stopRevolverCountdown();project_objects.StateManger.replay(g.option.html_element);});var h=this.getSocialBookmarks();if(typeof g.option.isEmbed!=="undefined"&&g.option.isEmbed==true){c.append(e);c.append(f);b.append(c);}else{if(j=="mini"){c.append(e);if(typeof h.facebook!=="undefined"){c.append(a('<div class="delimiter"></div>'));c.append(h.facebook);}if(f!=null){c.append(a('<div class="delimiter"></div>'));c.append(f);}b.append(c);}else{c.append(e);c.append(f);b.append(c);if(typeof h.count!=="undefined"&&h.count>0){var m=a('<div class="community clearfix"></div>');if(typeof h.facebook!=="undefined"){m.append(h.facebook);}if(typeof h.twitter!=="undefined"){m.append(a('<div class="delimiter"></div>'));m.append(h.twitter);}if(typeof h.googleplus!=="undefined"){m.append(a('<div class="delimiter"></div>'));
m.append(h.googleplus);}b.append(m);}}}if(f!=null){f.hover(function(){f.find(".comment_icon").toggleClass("active");f.find(".comment_count").toggleClass("active");f.find(".comment_logo").toggleClass("active");});f.click(function(){window.location.href=g.option.config.share.deeplink;});}}b.append(k);if(j=="buehne"){this.channel_column_count=3;}else{this.channel_column_count=2;}if(d!=true&&this.option.config.end.more=="true"&&a(this.channels.video).length>3){k.addClass("channel_list");this.channel_blocks_count=Math.ceil(a(this.channels.video).length/this.channel_column_count);this.active_channel_block=0;this.forward_button=a('<div class="endscreen_button_forward"></div>');k.append(this.forward_button);this.back_button=a('<div class="endscreen_button_back"></div>');k.append(this.back_button);this.hideButton(this.back_button);this.showButton(this.forward_button);}a(this.channels.video).each(function(r,q){var t=a('<div class="hentry_container"></div>');if(((j=="mini"||j=="artikel")&&r>=2)||(j=="buehne"&&r>=3)){t.addClass("hide");
}else{t.addClass("active");}if(r%g.channel_column_count==0){t.addClass("first_entry");}revolver_text=a('<div class="revolver_text"></div>');if(r==0){if(g.revolver_load_enable==true&&j!=="mini"){t.addClass("revolver_load");var p=a('<div class="left_text">Start in <span class="revolver_time">'+g.revolver_count+"</span> sek.</div>");revolver_text.append(p);var s=a('<div class="right_text">[Stop]</div>');revolver_text.append(s);s.click(function(){g.stopRevolverCountdown();s.html("");p.html("");t.removeClass("revolver_load");});}}t.append(revolver_text);t.append(g.getChannelEntry(j,q));k.append(t);});return b;},hideButton:function(b){b.addClass("hide_channel_button");b.unbind("click");},showButton:function(b){var c=this;b.removeClass("hide_channel_button");b.click(function(){if(b.hasClass("endscreen_button_forward")){c.channelForwardAction();}else{c.channelBackAction();}});},renderGooglePlusButton:function(){window.___gcfg={lang:"de"};var b=document.createElement("script");b.type="text/javascript";
b.async=true;b.src="https://apis.google.com/js/plusone.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);}};})(jQuery);window.project=window.project||{};(function($){project.Webtrekk_Tracker=function(state_manager,options){var that=this;var replace_values=[";","%20","javascript:void%","javascript:void"];this.state_manager=state_manager;this.logger=this.state_manager.getLogger();this.options=options;this.function_name=null;this.logger.debug("init webtrekk tracking");this.track_function=this.options.config.track;$(replace_values).each(function(index,value){that.track_function=that.track_function.replace(value,"");});this.track_function=this.track_function.replace("%COOKIE%","''");this.track_function=this.track_function.replace("%SEARCH%","''");if(typeof this.options.countRevolver!=="undefined"){this.track_function=this.track_function.replace("%revolverloadautoplay%",this.options.countRevolver);}else{this.track_function=this.track_function.replace("%revolverloadautoplay%","''");
}if(typeof options.config.autoplay!=="undefined"){this.track_function=this.track_function.replace("%AUTOPLAY%","'"+options.config.autoplay+"'");}else{this.track_function=this.track_function.replace("%AUTOPLAY%","'false'");}};project.Webtrekk_Tracker.prototype={track_event:function(event,percent,duration){try{var position=Math.round((duration/100)*percent);var track_function=this.track_function;track_function=track_function.replace("%EVENT%",event);track_function=track_function.replace("%PERCENT%",percent);track_function=track_function.replace("%DURATION%",position);if(this.options.countRevolver!=null){track_function=track_function.replace("%REVOLVER%",this.options.countRevolver);}else{track_function=track_function.replace("%REVOLVER%",0);}this.function_name=this.function_name||track_function.substr(0,track_function.indexOf("("));if(eval("typeof "+this.function_name+" == 'function'")){eval(track_function);}}catch(error){this.logger.warn("Error while tracking");}},track_video_play:function(percent,duration){if(typeof this.options.countRevolver!=="undefined"){this.track_event("'PlayAutoRev'",percent,duration);
}else{this.track_event("'PLAY'",percent,duration);}},track_video_start:function(percent,duration){this.track_event("'START'",percent,duration);},track_video_pause:function(percent,duration){this.track_event("'PAUSE'",percent,duration);},track_video_resume:function(percent,duration){this.track_event("'RESUME'",percent,duration);},track_video_timeupdate:function(percent,duration){this.track_event("'TIMEUPDATE'",percent,duration);},track_video_complete:function(percent,duration){this.track_event("'COMPLETE'",percent,duration);}};})(jQuery);window.project=window.project||{};(function($){project.IVW_Tracker=function(state_manager,options){var that=this;var replace_values=[";","%20","javascript:void%","javascript:void","%20"];this.state_manager=state_manager;this.logger=this.state_manager.getLogger();this.options=options;this.function_name=null;this.logger.debug("init ivw tracking");this.track_function=this.options.config.ivw;$(replace_values).each(function(index,value){that.track_function=that.track_function.replace(value,"");
});this.track_function=this.track_function.replace("%COOKIE%","''");this.track_function=this.track_function.replace("%SEARCH%","''");};project.IVW_Tracker.prototype={track_video_play:function(percent,duration){try{this.function_name=this.function_name||this.track_function.substr(0,this.track_function.indexOf("("));if(eval("typeof "+this.function_name+" == 'function'")){eval(this.track_function);}}catch(error){this.logger.warn("Error while tracking");}},track_video_start:function(percent,duration){},track_video_pause:function(percent,duration){try{this.function_name=this.function_name||this.track_function.substr(0,this.track_function.indexOf("("));if(eval("typeof "+this.function_name+" == 'function'")){eval(this.track_function);}}catch(error){this.logger.warn("Error while tracking");}},track_video_resume:function(percent,duration){},track_video_timeupdate:function(percent,duration){},track_video_complete:function(percent,duration){}};})(jQuery);window.project=window.project||{};(function($){project.GoogleAnalytics_Tracker=function(state_manager,options){var that=this;
var replace_values=[";","%20","javascript:void%","javascript:void"];this.state_manager=state_manager;this.logger=this.state_manager.getLogger();this.options=options;this.function_name=null;this.logger.debug("init GoogleAnalytics tracking");this.track_function=this.options.config.google_analytics;$(replace_values).each(function(index,value){that.track_function=that.track_function.replace(value,"");});this.track_function=this.track_function.replace("%COOKIE%","''");this.track_function=this.track_function.replace("%SEARCH%","''");if(typeof this.options.countRevolver!=="undefined"){this.track_function=this.track_function.replace("%revolverloadautoplay%",this.options.countRevolver);}else{this.track_function=this.track_function.replace("%revolverloadautoplay%","''");}};project.GoogleAnalytics_Tracker.prototype={track_event:function(event,percent,duration){var track_function=this.track_function;track_function=track_function.replace("%EVENT%",event);track_function=track_function.replace("%PERCENT%",percent);
track_function=track_function.replace("%DURATION%",duration);if(this.options.countRevolver!=null){track_function=track_function.replace("%REVOLVER%",this.options.countRevolver);}else{track_function=track_function.replace("%REVOLVER%",0);}this.function_name=this.function_name||this.track_function.substr(0,this.track_function.indexOf("("));if(eval("typeof "+this.function_name+" == 'function'")){eval(track_function);}},track_video_play:function(percent,duration){if(typeof this.options.countRevolver!=="undefined"){this.track_event("'PlayAutoRev'",percent,duration);}else{this.track_event("'PLAY'",percent,duration);}},track_video_start:function(percent,duration){this.track_event("'START'",percent,duration);},track_video_pause:function(percent,duration){this.track_event("'PAUSE'",percent,duration);},track_video_resume:function(percent,duration){this.track_event("'RESUME'",percent,duration);},track_video_timeupdate:function(percent,duration){this.track_event("'TIMEUPDATE'",percent,duration);},track_video_complete:function(percent,duration){this.track_event("'COMPLETE'",percent,duration);
}};})(jQuery);window.project=window.project||{};(function(a){project.Spinner=function(b,d){var c=this;this.html_element=b;this.is_running=false;this.placeSpinner();_V_.addListener(d,"loadstart",this.start(c));_V_.addListener(d,"waiting",this.start(c));_V_.addListener(d,"loadeddata",this.stop());_V_.addListener(d,"canplaythrough",this.stop());_V_.addListener(d,"playing",this.stop());_V_.addListener(d,"timeupdate",this.stop());};project.Spinner.prototype={placeSpinner:function(){var b=18;var e=a('<div class="spinner"></div>');for(i=1;i<=b;i++){var d=a('<div class="bar'+i+'"></div>');var c=a('<div class="inner"></div>');a(d).append(c);a(e).append(d);}a(this.html_element).append(e);a(e).hide();this.spinner=a(e);},start:function(b){b.is_running=true;a(b.html_element+" .spinner").show();b.run(b,0);},stop:function(){var b=this;this.is_running=false;a(b.html_element+" .spinner").hide();},run:function(d,c){var b=0;if(c==360){b=0;}else{b=c+20;}a(d.html_element+" .spinner").animate({height:a(d.html_element+" .spinner").css("height")},100,function(){if(d.is_running==true){a(d.html_element+" .spinner").css("-webkit-transform","scale(0.5) rotate("+c+"deg)");
d.run(d,b);}});}};})(jQuery);window.project=window.project||{};window.project.buttons=window.project.buttons||{};(function(a){project.buttons.Share=function(b,d){var c=this;this.share_url=d;this.timer=0;this.parent=b;a(b.options.html_element).find("div.vjs-mute-control, div.vjs-separator-right, div.vjs-volume-up, div.vjs-volume-down, div.vjs-volume-horizontal, div.vjs-subtitle-control").addClass("with_like");if(b.video_player!=null){b.video_player.shareControl=_V_.createElement("div",{className:"vjs-share-control"});b.video_player.controls.appendChild(b.video_player.shareControl);this.element=a(b.options.html_element+" .vjs-share-control");}else{this.element=a('<div class="vjs-share-control"></div>');a(b.options.html_element).find(".vjs-controls").append(this.element);}if(d==false){this.element.hide();}else{this.element.mouseenter(function(e){c.showShareFrame();});this.element.mouseleave(function(e){c.removeShareFrame();});}};project.buttons.Share.prototype={showShareFrame:function(h){var e=this;
var g=a(this.parent.options.html_element+" .xoz_share_container");if(g.length==0){var b=a('<div class="xoz_share_container"></div>');a(this.parent.options.html_element+" .video-js-box").append(b);var d=a('<div class="xoz_share_inner_container"></div>');b.append(d);var c=a('<iframe src="'+this.share_url+'" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe>');d.append(c);var f=a('<div class="xoz_share_container_background"></div>');d.append(f);g.append(b);this.share_container=b;b.mouseleave(function(j){e.share_container.hide();});b.mouseenter(function(j){e.cancelRemoveFrame();});}else{this.cancelRemoveFrame();g.show();}},removeShareFrame:function(c){var b=this;this.timer=setTimeout(function(){b.share_container.hide();},3000);},cancelRemoveFrame:function(b){clearTimeout(this.timer);}};})(jQuery);window.project=window.project||{};window.project.buttons=window.project.buttons||{};(function(a){project.buttons.Mute=function(b){var c=this;
this.parent=b;if(b.video_player!=null){b.video_player.volumeControlVertical=_V_.createElement("div",{className:"vjs-mute-control"});b.video_player.controls.appendChild(b.video_player.volumeControlVertical);this.element=a(b.options.html_element+" .vjs-mute-control");this.element.click(function(d){c.onClick(d);});a(b.options.html_element+" .vjs-mute-control").hover(function(d){if(a(b.options.html_element+" .vjs-volume-horizontal").length==0&&a(b.options.html_element+" .vjs-volume-vertical").length==0){if(d.type=="mouseenter"){b.showVerticalControl();}else{if(d.type=="mouseleave"){b.removeVerticalControl(b);}}}});}else{a(b.options.html_element).find(".vjs-controls").append(a('<div class="vjs-mute-control"></div>'));}};project.buttons.Mute.prototype={onClick:function(b){if(this.element.hasClass("mute")){this.element.removeClass("mute");this.parent.video_player.volume(this.volume*100);this.parent.buttons.volumeBarVertical.placeVerticalSlider(this.volume*100);this.parent.logger.debug("Setting Volume to "+this.volume);
}else{this.volume=this.parent.video_player.volume();this.element.addClass("mute");this.parent.video_player.volume(0);this.parent.buttons.volumeBarVertical.placeVerticalSlider(0);this.parent.logger.debug("Setting Volume to 0");}}};})(jQuery);window.project=window.project||{};window.project.buttons=window.project.buttons||{};(function(a){project.buttons.Fullscreen=function(b){var c=this;this.parent=b;if(b.video_player!=null){b.video_player.fullscreenControl=_V_.createElement("div",{className:"vjs-fullscreen-control",innerHTML:"<div></div>"});b.video_player.controls.appendChild(b.video_player.fullscreenControl);b.video_player.activateElement(b.video_player.fullscreenControl,"fullscreenToggle");this.element=a(b.options.html_element+" .vjs-fullscreen-control");this.element.bind("click",function(d){c.onClick();});}else{a(b.options.html_element).find(".vjs-controls").append(a('<div class="vjs-fullscreen-control"></div>'));}a(b.options.html_element).mousemove(function(){if(a(c.parent.options.html_element+" .vjs-controls").hasClass("fullscreen")){a(c.parent.options.html_element+" .vjs-controls").show();
if(typeof c.timeout!=="undefined"){clearTimeout(c.timeout);}c.timeout=setTimeout(function(){c.hideControlls();},3000);}});};project.buttons.Fullscreen.prototype={onClick:function(b){if(a(this.parent.options.html_element+" .vjs-controls").hasClass("fullscreen")){a(this.parent.options.html_element+" .vjs-controls").removeClass("fullscreen");this.element.removeClass("active");a(this.parent.options.html_element+" .vjs-controls").show();}else{a(this.parent.options.html_element+" .vjs-controls").addClass("fullscreen");this.element.addClass("active");}},hideControlls:function(b){a(this.parent.options.html_element+" .vjs-controls").hide();}};})(jQuery);window.project=window.project||{};window.project.buttons=window.project.buttons||{};(function(a){project.buttons.PlayToggle=function(b){var c=this;this.parent=b;if(b.video_player!=null){b.video_player.playControl=_V_.createElement("div",{className:"vjs-play-control"});b.video_player.controls.appendChild(b.video_player.playControl);b.video_player.activateElement(b.video_player.playControl,"playToggle");
this.element=a(b.options.html_element+" .vjs-play-control");}else{a(b.options.html_element).find(".vjs-controls").append(a('<div class="vjs-play-control vjs-paused"></div>'));}};project.buttons.PlayToggle.prototype={};})(jQuery);window.project=window.project||{};window.project.buttons=window.project.buttons||{};(function(a){project.buttons.ProgressBar=function(d){var e=this;this.parent=d;if(d.video_player!=null){d.video_player.progressControl=_V_.createElement("div",{className:"vjs-progress-control"});d.video_player.controls.appendChild(d.video_player.progressControl);d.video_player.progressHolder=_V_.createElement("div",{className:"vjs-progress-holder"});d.video_player.progressControl.appendChild(d.video_player.progressHolder);d.video_player.activateElement(d.video_player.progressHolder,"currentTimeScrubber");d.video_player.barProgressBar=_V_.createElement("div",{className:"vjs-bar-progress"});d.video_player.progressHolder.appendChild(d.video_player.barProgressBar);d.video_player.backgroundProgressBar=_V_.createElement("div",{className:"vjs-background-progress"});
d.video_player.barProgressBar.appendChild(d.video_player.backgroundProgressBar);d.video_player.loadProgressBar=_V_.createElement("div",{className:"vjs-load-progress"});d.video_player.barProgressBar.appendChild(d.video_player.loadProgressBar);d.video_player.activateElement(d.video_player.loadProgressBar,"loadProgressBar");d.video_player.playProgressBar=_V_.createElement("div",{className:"vjs-play-progress"});d.video_player.barProgressBar.appendChild(d.video_player.playProgressBar);d.video_player.activateElement(d.video_player.playProgressBar,"playProgressBar");d.video_player.playProgressBarSlider=_V_.createElement("div",{className:"vjs-play-progress-slider"});d.video_player.progressHolder.appendChild(d.video_player.playProgressBarSlider);this.element=a(d.options.html_element+" .vjs-play-control");this.element_progress=a(d.options.html_element+" .vjs-play-progress");this.element_slider=a(d.options.html_element+" .vjs-play-progress-slider");if(false===d.options.config.is_live_player){this.element_progress.change(function(g){});
}else{a(d.options.html_element).find(".vjs-load-progress").hide();a(d.options.html_element).find(".vjs-play-progress").hide();}}else{var b=a('<div class="vjs-progress-control"></div>');var f=a('<div class="vjs-progress-holder"></div>');var c=a('<div class="vjs-bar-progress"></div>');c.append('<div class="vjs-background-progress"></div>');c.append('<div class="vjs-load-progress" style="width: 100%; "></div>');c.append('<div class="vjs-play-progress" style="width: 0%; "></div>');f.append(c);f.append('<div class="vjs-play-progress-slider" style="left: 10px; "></div>');b.append(f);a(d.options.html_element).find(".vjs-controls").append(b);}};project.buttons.ProgressBar.prototype={onChange:function(b){this.element_slider.css("left",this.element_progress.css("width"));}};})(jQuery);window.project=window.project||{};window.project.buttons=window.project.buttons||{};(function(a){project.buttons.DynamicTimeDisplay=function(b){var c=this;this.parent=b;if(b.video_player!=null){b.video_player.timeControl=_V_.createElement("div",{className:"vjs-dynamic-time-control"});
b.video_player.controls.appendChild(b.video_player.timeControl);b.video_player.currentTimeDisplay=_V_.createElement("div",{className:"vjs-current-dynamic-time-display",innerHTML:"00:00"});b.video_player.timeControl.appendChild(b.video_player.currentTimeDisplay);b.video_player.activateElement(b.video_player.currentTimeDisplay,"currentTimeDisplay");b.video_player.timePointer=_V_.createElement("div",{className:"vjs-time-pointer"});b.video_player.timeControl.appendChild(b.video_player.timePointer);this.element=a(b.options.html_element+" .vjs-dynamic-time-control");this.element_progress_bar=a(b.options.html_element+" .vjs-progress-control");this.element_progress=a(b.options.html_element+" .vjs-play-progress");this.element_current_time=a(b.options.html_element+" .vjs-current-dynamic-time-display");if(false===b.options.config.is_live_player){this.element_progress.change(function(d){c.onChange(d);});}else{this.element.hide();}}else{a(b.options.html_element).find(".vjs-controls").append(a('<div class="vjs-dynamic-time-control"></div>'));
}};project.buttons.DynamicTimeDisplay.prototype={onChange:function(e){var c=this.element_progress_bar.css("left").replace("px","");var d=this.element_progress.css("width").replace("px","");var b=this.element_current_time.css("padding-left").replace("px","");this.element.css("left",(parseInt(c)+parseInt(d)-b)+"px");}};})(jQuery);window.project=window.project||{};window.project.buttons=window.project.buttons||{};(function(a){project.buttons.TimeDisplay=function(b){var c=this;this.parent=b;if(b.video_player!=null){b.video_player.timeControl=_V_.createElement("div",{className:"vjs-time-control"});b.video_player.controls.appendChild(b.video_player.timeControl);b.video_player.currentTimeDisplay=_V_.createElement("div",{className:"vjs-current-time-display",innerHTML:"00:00"});b.video_player.timeControl.appendChild(b.video_player.currentTimeDisplay);b.video_player.timeSeparator=_V_.createElement("div",{className:"vjs-time-separator",innerHTML:" | "});b.video_player.timeControl.appendChild(b.video_player.timeSeparator);
b.video_player.durationDisplay=_V_.createElement("div",{className:"vjs-duration-display",innerHTML:"00:00"});b.video_player.timeControl.appendChild(b.video_player.durationDisplay);this.element=a(b.options.html_element+" .vjs-time-control");if(b.options.config.config_type!="live"){b.video_player.activateElement(b.video_player.currentTimeDisplay,"currentTimeDisplay");b.video_player.activateElement(b.video_player.durationDisplay,"durationDisplay");}else{a(b.video_player.durationDisplay).html("");a(b.video_player.timeSeparator).addClass("hide");a(b.video_player.currentTimeDisplay).html("Live");}}else{var e="00:00";if(typeof b.options.config.duration!=="undefined"&&!isNaN(b.options.config.duration)){e=project_objects.StateManger.getTimeStringFromSeconds(b.options.config.duration/1000);}var d=a('<div class="vjs-time-control"></div>');d.append(a('<div class="vjs-current-time-display">00:00</div>'));d.append(a('<div class="vjs-time-separator"> | </div>'));d.append(a('<div class="vjs-duration-display"> '+e+"</div>"));
a(b.options.html_element).find(".vjs-controls").append(d);}};project.buttons.TimeDisplay.prototype={};})(jQuery);window.project=window.project||{};window.project.buttons=window.project.buttons||{};(function(a){project.buttons.VolumeControll=function(d,b,f){var e=this;this.value=f;this.name=b;this.parent=d;if(d.video_player!=null){var c=_V_.createElement("div",{className:"vjs-volume-"+b});d.video_player.controls.appendChild(c);a(d.options.html_element+" .vjs-volume-"+b).click(function(g){e.onClick(e.value);});this.element=a(d.options.html_element+" .vjs-volume-"+b);}else{a(d.options.html_element).find(".vjs-controls").append(a('<div class="vjs-volume-'+b+'"></div>'));}};project.buttons.VolumeControll.prototype={onClick:function(c){var b=this.parent.video_player.volume();var d=Math.round((b+c)*100)/100;if(d>1){d=1;}else{if(b<0){d=0;}}a(this.parent.options.html_element+" div.vjs-volume-horizontal .ui-slider-range").css("width",(d*100)+"%");this.parent.video_player.volume(d);}};})(jQuery);window.project=window.project||{};
window.project.buttons=window.project.buttons||{};(function(a){project.buttons.VolumeBarHorizontal=function(b){var c=this;this.parent=b;if(b.video_player!=null){b.video_player.volume_horizontal=_V_.createElement("div",{className:"vjs-volume-horizontal"});b.video_player.controls.appendChild(b.video_player.volume_horizontal);a(b.options.html_element+" .vjs-volume-horizontal").slider({range:"min",min:0,max:100,value:(this.parent.video_player.volume()*100),slide:function(d,e){c.onSlide(d,e);}});this.element=a(b.options.html_element+" .vjs-volume-horizontal");}else{a(b.options.html_element).find(".vjs-controls").append(a('<div class="vjs-volume-horizontal"></div>'));a(b.options.html_element+" .vjs-volume-horizontal").slider({range:"min",min:0,max:100,value:50,slide:function(d,e){a(b.options.html_element).click();}});}};project.buttons.VolumeBarHorizontal.prototype={onSlide:function(b,c){if(c.value==0){this.parent.video_player.volume(0);}else{this.parent.video_player.volume(c.value/100);}}};})(jQuery);
window.project=window.project||{};window.project.buttons=window.project.buttons||{};(function(a){project.buttons.VolumeBarVertical=function(b){var c=this;this.parent=b;if(b.video_player!=null){b.video_player.volume_vertical=_V_.createElement("div",{className:"vjs-volume-vertical"});b.video_player.controls.appendChild(b.video_player.volume_vertical);this.addVerticalContainer();this.element=a(b.options.html_element+" .vjs-volume-vertical");this.placeVerticalSlider(this.parent.video_player.volume()*100);}else{a(b.options.html_element).find(".vjs-controls").append(a('<div class="vjs-volume-vertical"></div>'));}};project.buttons.VolumeBarVertical.prototype={onSlide:function(b,c){if(c.value==0){this.parent.video_player.volume(0);}else{this.parent.video_player.volume(c.value/100);}},addVerticalContainer:function(){var b=a(this.parent.options.html_element+" .vjs-volume-vertical");container=a('<div class="vertical_volume_container"></div>');b.append(container);container=a('<div class="vertical_volume_background_container"></div>');
b.append(container);container=a(".vertical_volume_container");var c=this;container.slider({orientation:"vertical",range:"min",min:0,max:100,value:(c.parent.video_player.volume()*100),slide:function(d,e){if(e.value==0){c.parent.video_player.volume(0);}else{c.parent.video_player.volume(e.value/100);}c.placeVerticalSlider(e.value);}});},placeVerticalSlider:function(f){var d=this;var b=a(d.parent.options.html_element+" .vjs-controls > div.vjs-volume-vertical .vertical_volume_container").height();var e=Math.ceil((parseInt(b)/100)*f);var c=b-e;a(d.parent.options.html_element+" .vjs-controls > div.vjs-volume-vertical .ui-slider-range").css("height",e+"px");a(d.parent.options.html_element+" .vjs-controls > div.vjs-volume-vertical .ui-slider-range").css("background-position-y","-"+c+"px");}};})(jQuery);window.project=window.project||{};window.project.buttons=window.project.buttons||{};(function(a){project.buttons.Separator=function(c,b){var d=this;this.parent=c;if(c.video_player!=null){c.video_player.seperator=_V_.createElement("div",{className:"vjs-separator-"+b});
c.video_player.controls.appendChild(c.video_player.seperator);this.element=a(c.options.html_element+" .vjs-separator-"+b);}else{a(c.options.html_element).find(".vjs-controls").append(a('<div class="vjs-separator-'+b+'"></div>'));}};project.buttons.PlayToggle.Separator={};})(jQuery);window.project=window.project||{};window.project.buttons=window.project.buttons||{};(function(a){project.buttons.Background=function(b,e){var c=this;this.parent=b;var d="vjs-widget-background-large";if(e==2){d="vjs-widget-background-small";}else{if(e==3){d="vjs-widget-background-middle";}}if(b.video_player!=null){b.video_player.background=_V_.createElement("div",{className:d});b.video_player.controls.appendChild(b.video_player.background);this.element=a(b.options.html_element+" ."+d);b.video_player.background_left=_V_.createElement("div",{className:"vjs-widget-background-left"});b.video_player.controls.appendChild(b.video_player.background_left);}else{this.element=a('<div class="vjs-widget-background-left"></div>');
a(b.options.html_element).find(".vjs-controls").append(this.element);this.element=a('<div class="'+d+'"></div>');a(b.options.html_element).find(".vjs-controls").append(this.element);}};project.buttons.Background.prototype={};})(jQuery);window.project=window.project||{};window.project.buttons=window.project.buttons||{};(function(a){project.buttons.HD=function(b){var c=this;this.remove_like_frame=false;this.parent=b;a(b.options.html_element).find("div.vjs-mute-control, div.vjs-separator-right, div.vjs-volume-up, div.vjs-volume-down, div.vjs-volume-horizontal, div.vjs-subtitle-control, div.vjs-share-control").addClass("with_hd");if(b.video_player!=null){b.video_player.hdControll=_V_.createElement("div",{className:"vjs-hd-control"});b.video_player.controls.appendChild(b.video_player.hdControll);this.element=a(b.options.html_element+" .vjs-hd-control");this.element.click(function(d){c.onClick(d);});}else{this.element=a('<div class="vjs-hd-control"></div>');a(b.options.html_element).find(".vjs-controls").append(this.element);
}if(typeof b.options.config.hdDefault!=="undefined"&&b.options.config.hdDefault=="true"){this.element.addClass("active");}};project.buttons.HD.prototype={onClick:function(b){if(!this.element.hasClass("deactive")){if(this.element.hasClass("active")){this.element.removeClass("active");this.parent.state_manager.setQuality(this.parent.options.html_element,"sd");}else{this.element.addClass("active");this.parent.state_manager.setQuality(this.parent.options.html_element,"hd");}}}};})(jQuery);window.project=window.project||{};window.project.buttons=window.project.buttons||{};(function(a){project.buttons.Subtitle=function(b){var c=this;this.parent=b;a(b.options.html_element).find("div.vjs-mute-control, div.vjs-separator-right, div.vjs-volume-up, div.vjs-volume-down, div.vjs-volume-horizontal").addClass("with_subtitle");if(b.video_player!=null){b.video_player.volumeControlVertical=_V_.createElement("div",{className:"vjs-subtitle-control"});b.video_player.controls.appendChild(b.video_player.volumeControlVertical);
this.element=a(b.options.html_element+" .vjs-subtitle-control");this.element.click(function(d){c.onClick(d);});}else{a(b.options.html_element).find(".vjs-controls").append(a('<div class="vjs-subtitle-control"></div>'));}};project.buttons.Subtitle.prototype={onClick:function(b){if(this.element.hasClass("show")){this.parent.options.showVideoSubtitles=false;this.element.removeClass("show");a(this.parent.options.html_element).find(".video-js-box .vjs-subtitles").addClass("hide");this.parent.logger.debug("Disable Subtitles");}else{this.parent.options.showVideoSubtitles=true;this.element.addClass("show");a(this.parent.options.html_element).find(".video-js-box .vjs-subtitles").removeClass("hide");this.parent.logger.debug("Enable Subtitles");}}};})(jQuery);
/*bild.min:25425016.7*/


/*jquery-ui:25425018.1*/

/*!
 * jQuery UI 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(c,j){function k(a,b){var d=a.nodeName.toLowerCase();if("area"===d){b=a.parentNode;d=b.name;if(!a.href||!d||b.nodeName.toLowerCase()!=="map")return false;a=c("img[usemap=#"+d+"]")[0];return!!a&&l(a)}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||b:b)&&l(a)}function l(a){return!c(a).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:"1.8.16",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({propAttr:c.fn.prop||c.fn.attr,_focus:c.fn.focus,focus:function(a,b){return typeof a==="number"?this.each(function(){var d=
this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,
"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==j)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");if(b==="absolute"||b==="relative"||b==="fixed"){b=parseInt(a.css("zIndex"),10);if(!isNaN(b)&&b!==0)return b}a=a.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":
"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(a,b){function d(f,g,m,n){c.each(e,function(){g-=parseFloat(c.curCSS(f,"padding"+this,true))||0;if(m)g-=parseFloat(c.curCSS(f,"border"+this+"Width",true))||0;if(n)g-=parseFloat(c.curCSS(f,"margin"+this,true))||0});return g}var e=b==="Width"?["Left","Right"]:["Top","Bottom"],h=b.toLowerCase(),i={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,
outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+b]=function(f){if(f===j)return i["inner"+b].call(this);return this.each(function(){c(this).css(h,d(this,f)+"px")})};c.fn["outer"+b]=function(f,g){if(typeof f!=="number")return i["outer"+b].call(this,f);return this.each(function(){c(this).css(h,d(this,f,true,g)+"px")})}});c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){return k(a,!isNaN(c.attr(a,"tabindex")))},tabbable:function(a){var b=c.attr(a,
"tabindex"),d=isNaN(b);return(d||b>=0)&&k(a,!d)}});c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=b.offsetHeight===100;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"});c.extend(c.ui,{plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,d[e]])}},call:function(a,b,d){if((b=a.plugins[b])&&
a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if(c(a).css("overflow")==="hidden")return false;b=b&&b==="left"?"scrollLeft":"scrollTop";var d=false;if(a[b]>0)return true;a[b]=1;d=a[b]>0;a[b]=0;return d},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,b,d,e,h,i){return c.ui.isOverAxis(a,d,h)&&
c.ui.isOverAxis(b,e,i)}})}})(jQuery);
;/*!
 * jQuery UI Widget 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,j){if(b.cleanData){var k=b.cleanData;b.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)try{b(d).triggerHandler("remove")}catch(e){}k(a)}}else{var l=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(d){}});return l.call(b(this),a,c)})}}b.widget=function(a,c,d){var e=a.split(".")[0],f;a=a.split(".")[1];f=e+"-"+a;if(!d){d=c;c=b.Widget}b.expr[":"][f]=
function(h){return!!b.data(h,a)};b[e]=b[e]||{};b[e][a]=function(h,g){arguments.length&&this._createWidget(h,g)};c=new c;c.options=b.extend(true,{},c.options);b[e][a].prototype=b.extend(true,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(a,c){b.fn[a]=function(d){var e=typeof d==="string",f=Array.prototype.slice.call(arguments,1),h=this;d=!e&&f.length?b.extend.apply(null,[true,d].concat(f)):
d;if(e&&d.charAt(0)==="_")return h;e?this.each(function(){var g=b.data(this,a),i=g&&b.isFunction(g[d])?g[d].apply(g,f):g;if(i!==g&&i!==j){h=i;return false}}):this.each(function(){var g=b.data(this,a);g?g.option(d||{})._init():b.data(this,a,new c(d,this))});return h}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=
b.extend(true,{},this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(a,c){var d=a;if(arguments.length===0)return b.extend({},this.options);if(typeof a==="string"){if(c===j)return this.options[a];d={};d[a]=c}this._setOptions(d);return this},_setOptions:function(a){var c=this;b.each(a,function(d,e){c._setOption(d,e)});return this},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
c);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,d){var e=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=b.event.props.length;for(var f;a;){f=b.event.props[--a];c[f]=c.originalEvent[f]}}this.element.trigger(c,d);return!(b.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);
;/*!
 * jQuery UI Mouse 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(b){var d=false;b(document).mouseup(function(){d=false});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(c){return a._mouseDown(c)}).bind("click."+this.widgetName,function(c){if(true===b.data(c.target,a.widgetName+".preventClickEvent")){b.removeData(c.target,a.widgetName+".preventClickEvent");c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName)},_mouseDown:function(a){if(!d){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var c=this,f=a.which==1,g=typeof this.options.cancel=="string"&&a.target.nodeName?b(a.target).closest(this.options.cancel).length:false;if(!f||g||!this._mouseCapture(a))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=
this._mouseStart(a)!==false;if(!this._mouseStarted){a.preventDefault();return true}}true===b.data(a.target,this.widgetName+".preventClickEvent")&&b.removeData(a.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(e){return c._mouseMove(e)};this._mouseUpDelegate=function(e){return c._mouseUp(e)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.preventDefault();return d=true}},_mouseMove:function(a){if(b.browser.msie&&
!(document.documentMode>=9)&&!a.button)return this._mouseUp(a);if(this._mouseStarted){this._mouseDrag(a);return a.preventDefault()}if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==false)?this._mouseDrag(a):this._mouseUp(a);return!this._mouseStarted},_mouseUp:function(a){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=
false;a.target==this._mouseDownEvent.target&&b.data(a.target,this.widgetName+".preventClickEvent",true);this._mouseStop(a)}return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
;/*
 * jQuery UI Slider 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Slider
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(d){d.widget("ui.slider",d.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var a=this,b=this.options,c=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f=b.values&&b.values.length||1,e=[];this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(b.disabled?" ui-slider-disabled ui-disabled":""));this.range=d([]);if(b.range){if(b.range===true){if(!b.values)b.values=[this._valueMin(),this._valueMin()];if(b.values.length&&b.values.length!==2)b.values=[b.values[0],b.values[0]]}this.range=d("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(b.range==="min"||b.range==="max"?" ui-slider-range-"+b.range:""))}for(var j=c.length;j<f;j+=1)e.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=c.add(d(e.join("")).appendTo(a.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(g){g.preventDefault()}).hover(function(){b.disabled||d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")}).focus(function(){if(b.disabled)d(this).blur();else{d(".ui-slider .ui-state-focus").removeClass("ui-state-focus");d(this).addClass("ui-state-focus")}}).blur(function(){d(this).removeClass("ui-state-focus")});this.handles.each(function(g){d(this).data("index.ui-slider-handle",
g)});this.handles.keydown(function(g){var k=true,l=d(this).data("index.ui-slider-handle"),i,h,m;if(!a.options.disabled){switch(g.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:k=false;if(!a._keySliding){a._keySliding=true;d(this).addClass("ui-state-active");i=a._start(g,l);if(i===false)return}break}m=a.options.step;i=a.options.values&&a.options.values.length?
(h=a.values(l)):(h=a.value());switch(g.keyCode){case d.ui.keyCode.HOME:h=a._valueMin();break;case d.ui.keyCode.END:h=a._valueMax();break;case d.ui.keyCode.PAGE_UP:h=a._trimAlignValue(i+(a._valueMax()-a._valueMin())/5);break;case d.ui.keyCode.PAGE_DOWN:h=a._trimAlignValue(i-(a._valueMax()-a._valueMin())/5);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(i===a._valueMax())return;h=a._trimAlignValue(i+m);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(i===a._valueMin())return;h=a._trimAlignValue(i-
m);break}a._slide(g,l,h);return k}}).keyup(function(g){var k=d(this).data("index.ui-slider-handle");if(a._keySliding){a._keySliding=false;a._stop(g,k);a._change(g,k);d(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();
return this},_mouseCapture:function(a){var b=this.options,c,f,e,j,g;if(b.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();c=this._normValueFromMouse({x:a.pageX,y:a.pageY});f=this._valueMax()-this._valueMin()+1;j=this;this.handles.each(function(k){var l=Math.abs(c-j.values(k));if(f>l){f=l;e=d(this);g=k}});if(b.range===true&&this.values(1)===b.min){g+=1;e=d(this.handles[g])}if(this._start(a,g)===false)return false;
this._mouseSliding=true;j._handleIndex=g;e.addClass("ui-state-active").focus();b=e.offset();this._clickOffset=!d(a.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:a.pageX-b.left-e.width()/2,top:a.pageY-b.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(a,g,c);return this._animateOff=true},_mouseStart:function(){return true},_mouseDrag:function(a){var b=
this._normValueFromMouse({x:a.pageX,y:a.pageY});this._slide(a,this._handleIndex,b);return false},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(a){var b;if(this.orientation==="horizontal"){b=
this.elementSize.width;a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{b=this.elementSize.height;a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}b=a/b;if(b>1)b=1;if(b<0)b=0;if(this.orientation==="vertical")b=1-b;a=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+b*a)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);
c.values=this.values()}return this._trigger("start",a,c)},_slide:function(a,b,c){var f;if(this.options.values&&this.options.values.length){f=this.values(b?0:1);if(this.options.values.length===2&&this.options.range===true&&(b===0&&c>f||b===1&&c<f))c=f;if(c!==this.values(b)){f=this.values();f[b]=c;a=this._trigger("slide",a,{handle:this.handles[b],value:c,values:f});this.values(b?0:1);a!==false&&this.values(b,c,true)}}else if(c!==this.value()){a=this._trigger("slide",a,{handle:this.handles[b],value:c});
a!==false&&this.value(c)}},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);c.values=this.values()}this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(b);c.values=this.values()}this._trigger("change",a,c)}},value:function(a){if(arguments.length){this.options.value=
this._trimAlignValue(a);this._refreshValue();this._change(null,0)}else return this._value()},values:function(a,b){var c,f,e;if(arguments.length>1){this.options.values[a]=this._trimAlignValue(b);this._refreshValue();this._change(null,a)}else if(arguments.length)if(d.isArray(arguments[0])){c=this.options.values;f=arguments[0];for(e=0;e<c.length;e+=1){c[e]=this._trimAlignValue(f[e]);this._change(null,e)}this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(a):
this.value();else return this._values()},_setOption:function(a,b){var c,f=0;if(d.isArray(this.options.values))f=this.options.values.length;d.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":if(b){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.propAttr("disabled",true);this.element.addClass("ui-disabled")}else{this.handles.propAttr("disabled",false);this.element.removeClass("ui-disabled")}break;case "orientation":this._detectOrientation();
this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();for(c=0;c<f;c+=1)this._change(null,c);this._animateOff=false;break}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c;if(arguments.length){b=this.options.values[a];
return b=this._trimAlignValue(b)}else{b=this.options.values.slice();for(c=0;c<b.length;c+=1)b[c]=this._trimAlignValue(b[c]);return b}},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b;a=a-c;if(Math.abs(c)*2>=b)a+=c>0?b:-b;return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var a=
this.options.range,b=this.options,c=this,f=!this._animateOff?b.animate:false,e,j={},g,k,l,i;if(this.options.values&&this.options.values.length)this.handles.each(function(h){e=(c.values(h)-c._valueMin())/(c._valueMax()-c._valueMin())*100;j[c.orientation==="horizontal"?"left":"bottom"]=e+"%";d(this).stop(1,1)[f?"animate":"css"](j,b.animate);if(c.options.range===true)if(c.orientation==="horizontal"){if(h===0)c.range.stop(1,1)[f?"animate":"css"]({left:e+"%"},b.animate);if(h===1)c.range[f?"animate":"css"]({width:e-
g+"%"},{queue:false,duration:b.animate})}else{if(h===0)c.range.stop(1,1)[f?"animate":"css"]({bottom:e+"%"},b.animate);if(h===1)c.range[f?"animate":"css"]({height:e-g+"%"},{queue:false,duration:b.animate})}g=e});else{k=this.value();l=this._valueMin();i=this._valueMax();e=i!==l?(k-l)/(i-l)*100:0;j[c.orientation==="horizontal"?"left":"bottom"]=e+"%";this.handle.stop(1,1)[f?"animate":"css"](j,b.animate);if(a==="min"&&this.orientation==="horizontal")this.range.stop(1,1)[f?"animate":"css"]({width:e+"%"},
b.animate);if(a==="max"&&this.orientation==="horizontal")this.range[f?"animate":"css"]({width:100-e+"%"},{queue:false,duration:b.animate});if(a==="min"&&this.orientation==="vertical")this.range.stop(1,1)[f?"animate":"css"]({height:e+"%"},b.animate);if(a==="max"&&this.orientation==="vertical")this.range[f?"animate":"css"]({height:100-e+"%"},{queue:false,duration:b.animate})}}});d.extend(d.ui.slider,{version:"1.8.16"})})(jQuery);
;
/*de.bild.onDemand:23480840.4*/

var de = de || {};
de.bild = de.bild || {};
de.bild.onDemand = (function($) {
    var settings = {
        areaSize : 500, // Bilder in diesem Bereich werden in die gleiche "Schublade" gepackt
        margin : 500 // Wie weit unter- und oberhalb des Sichtbereichs soll geladen werden
    },
    $window = $(window),
    picCont = [],
    picCountLength = 0,
    countLoaded = 0,
    allLoad = false,
    $imgsToLoad;
    function init($context) {
        if ($context.length) {
            // Bilder mit der Klasse "ondemand"
            $imgsToLoad = $context.find('img.ondemand');
            if ($imgsToLoad.length) {
                $imgsToLoad.each(function(){
                    var $this = $(this),
                    top = $this.offset().top,
                    bottom = top + (this.offsetHeight),
                    indexFrom = ~~(top / settings.areaSize),
                    indexTo = ~~(bottom / settings.areaSize),
                    i = indexFrom;
                    for(; i <= indexTo; i++) {
                        if(typeof picCont[i] === 'undefined' || picCont[i] === null) {
                            picCont[i] = [];
                        }
                        picCont[i].push($this);
                    }
                    picCountLength = picCont.length;
                });
                
                // Alle Bilder am Seitenanfang laden, die im Sichtbereich liegen
                var index = Math.floor($window.height() / settings.areaSize),
                i=0;
                for(; i < index; i++) {
                    loadImgs(i);
                }
                
                // Namespace ".onDemand" um nicht andere handler von window zu löschen
                $window.on('scroll.onDemand touchend.onDemand', function() {
                    checkCurrent();
                });
                // do it
                checkCurrent();
            }
        }
        return picCont;
    };
    
    // Alle Schubladen im aktuellen Sichtbereich (+- margin) werden berechnet
    function checkCurrent() {
        var scrollTop = $window.scrollTop(),
        wHeight = $window.height(),
        topPos = scrollTop - settings.margin,
        bottomPos = scrollTop + wHeight + settings.margin,
        startInd = Math.floor(topPos / settings.areaSize),
        endInd = Math.floor(bottomPos / settings.areaSize);
        
        startInd = startInd < 0 ? 0 : startInd;
        endInd = endInd < 0 ? 0 : endInd;
        
        for(var i = startInd; i < endInd; i++) {
            if(typeof picCont[i] !== 'undefined' && picCont[i] !== null) {
                loadImgs(i);
            }
        }
    };
    
    // Alle Bilder in einer Schublade werden geladen
    function loadImgs(index) {
        if (typeof index === 'number') {
            var $imgs = $(picCont[index]),
            imgsLeng = $imgs.length;
            $imgs.each(function(_index){
                var $this = $(this),
                _imgSrc = $.trim($this.attr('data-img-src'));
                
                /* FALLBACK */
                if(typeof _imgSrc === 'undefined' || _imgSrc === null || _imgSrc === '') {
                    _imgSrc = $.trim($this.attr('longdesc'));
                }
                /* FALLBACK ENDE */
                
                if(typeof _imgSrc !== 'undefined' && _imgSrc !== null) {
                    $this.attr("src", _imgSrc); 
                }
                // we are doing to prevent race conditions
                if (_index >= imgsLeng-1) {
                    setTimeout(function(){
                        $imgs.attr('data-img-src','').attr('longdesc','');
                    },1500);
                }
            });
            delete picCont[index];
            countLoaded++;
            if(countLoaded >= picCountLength) {
                $window.off('scroll.onDemand touchend.onDemand');
                // aufraeumen
                picCont = [];
            }
            return $imgs;    
       } 
    };
    
    // document.ready => run!
    $(function(){
       init($('#contentWrapper'));
    });
    
    // Interface
    return {
        'init' : function($context){
            $context = $context || $('body');
            return init($context);
        }
    };
    
})(jQuery);
/*adreplace:15400952.22*/

var de=de || {};
de.bild = de.bild || {};
 
de.bild.AdReplace=function(to){
    var adRand=Math.random()*100;
    var adSum=0;
 
    for (var i=1;i<arguments.length;i+=2){
        adSum+=(typeof arguments[i+1]=== 'number')?arguments[i+1]:100;
        if(adRand<adSum)
        {
            document.getElementById(to).className = "show";
            var http=(window.ActiveXObject)?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest();
            if(http.overrideMimeType){http.overrideMimeType('text/html');}
            http.onreadystatechange=function()
            {
                if(http.readyState=="complete"||http.readyState==4)
                {
var _text = http.responseText;
if (_text.indexOf('document.write') != -1) {
return;
}

                    jQuery("#"+to).replaceWith(_text);
                }
            };
            http.open("GET",arguments[i],true);
            http.send(null);
            return false;
        }
        else
        {
           document.getElementById(to).className = "hide";
        }
    }

};

/*epro:15400958.22*/

if (window.location.href.indexOf("src=epro") >= 0){  var expires = new Date(new Date().getTime() + 1000 * 60 * 60 * 24 * 30);  document.cookie = "epro=1; path=/; expires=" + expires.toGMTString() +";";}
/*timestamp-replace:15400962.22*/

var de = de || {};
de.bild = de.bild || {};
de.bild.timestampReplace = de.bild.timestampReplace || {};
de.bild.timestampReplace.replaceTimestamp = function(link){ 
 var href = jQuery(link);
    href.attr('href',href.attr('href').replace("[timestamp]", (Math.floor(Math.random() * 100000000000))));
}
/*google-csa:18304084.1*/

if (!window['google']) {window['google'] = {};}if (!window['google']['loader']) {window['google']['loader'] = {};google.loader.ServiceBase = 'http://www.google.com/uds';google.loader.GoogleApisBase = 'http://ajax.googleapis.com/ajax';google.loader.ApiKey = 'notsupplied';google.loader.KeyVerified = true;google.loader.LoadFailure = false;google.loader.Secure = false;google.loader.GoogleLocale = 'www.google.com';google.loader.ClientLocation = {"latitude":52.517,"longitude":13.4,"address":{"city":"Berlin","region":"Berlin","country":"Germany","country_code":"DE"}};google.loader.AdditionalParams = '';(function() {var d=void 0,g=null,h=encodeURIComponent,j=window,k=document;function l(a,b){return a.load=b}var m="push",o="replace",p="charAt",r="indexOf",s="ServiceBase",t="name",u="getTime",v="length",w="prototype",x="setTimeout",y="loader",z="substring",A="join",B="toLowerCase";function C(a){if(a in D)return D[a];return D[a]=navigator.userAgent[B]()[r](a)!=-1}var D={};function E(a,b){var c=function(){};c.prototype=b[w];a.S=b[w];a.prototype=new c}function F(a,b){var c=Array[w].slice.call(arguments,2)||[];return function(){var e=c.concat(Array[w].slice.call(arguments));return a.apply(b,e)}}function G(a){a=Error(a);a.toString=function(){return this.message};return a}function H(a,b){for(var c=a.split(/\./),e=j,f=0;f<c[v]-1;f++)e[c[f]]||(e[c[f]]={}),e=e[c[f]];e[c[c[v]-1]]=b}function I(a,b,c){a[b]=c}if(!J)var J=H;if(!K)var K=I;google[y].v={};J("google.loader.callbacks",google[y].v);var L={},M={};google[y].eval={};J("google.loader.eval",google[y].eval);l(google,function(a,b,c){function e(a){var b=a.split(".");if(b[v]>2)throw G("Module: '"+a+"' not found!");else if(typeof b[1]!="undefined")f=b[0],c.packages=c.packages||[],c.packages[m](b[1])}var f=a,c=c||{};if(a instanceof Array||a&&typeof a=="object"&&typeof a[A]=="function"&&typeof a.reverse=="function")for(var i=0;i<a[v];i++)e(a[i]);else e(a);if(a=L[":"+f]){c&&!c.language&&c.locale&&(c.language=c.locale);if(c&&typeof c.callback=="string"&&(i=c.callback,i.match(/^[[\]A-Za-z0-9._]+$/)))i=j.eval(i),c.callback=i;if((i=c&&c.callback!=g)&&!a.s(b))throw G("Module: '"+f+"' must be loaded before DOM onLoad!");else i?a.m(b,c)?j[x](c.callback,0):a.load(b,c):a.m(b,c)||a.load(b,c)}else throw G("Module: '"+f+"' not found!");});J("google.load",google.load);google.R=function(a,b){b?(N[v]==0&&(O(j,"load",P),!C("msie")&&!C("safari")&&!C("konqueror")&&C("mozilla")||j.opera?j.addEventListener("DOMContentLoaded",P,!1):C("msie")?k.write("<script defer onreadystatechange='google.loader.domReady()' src=//:><\/script>"):(C("safari")||C("konqueror"))&&j[x](R,10)),N[m](a)):O(j,"load",a)};J("google.setOnLoadCallback",google.R);function O(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var e=a["on"+b];a["on"+b]=e!=g?aa([c,e]):c}}function aa(a){return function(){for(var b=0;b<a[v];b++)a[b]()}}var N=[];google[y].N=function(){var a=j.event.srcElement;if(a.readyState=="complete")a.onreadystatechange=g,a.parentNode.removeChild(a),P()};J("google.loader.domReady",google[y].N);var ba={loaded:!0,complete:!0};function R(){ba[k.readyState]?P():N[v]>0&&j[x](R,10)}function P(){for(var a=0;a<N[v];a++)N[a]();N.length=0}google[y].d=function(a,b,c){if(c){var e;if(a=="script")e=k.createElement("script"),e.type="text/javascript",e.src=b;else if(a=="css")e=k.createElement("link"),e.type="text/css",e.href=b,e.rel="stylesheet";(a=k.getElementsByTagName("head")[0])||(a=k.body.parentNode.appendChild(k.createElement("head")));a.appendChild(e)}else a=="script"?k.write('<script src="'+b+'" type="text/javascript"><\/script>'):a=="css"&&k.write('<link href="'+b+'" type="text/css" rel="stylesheet"></link>')};J("google.loader.writeLoadTag",google[y].d);google[y].O=function(a){M=a};J("google.loader.rfm",google[y].O);google[y].Q=function(a){for(var b in a)typeof b=="string"&&b&&b[p](0)==":"&&!L[b]&&(L[b]=new S(b[z](1),a[b]))};J("google.loader.rpl",google[y].Q);google[y].P=function(a){if((a=a.specs)&&a[v])for(var b=0;b<a[v];++b){var c=a[b];typeof c=="string"?L[":"+c]=new T(c):(c=new U(c[t],c.baseSpec,c.customSpecs),L[":"+c[t]]=c)}};J("google.loader.rm",google[y].P);google[y].loaded=function(a){L[":"+a.module].l(a)};J("google.loader.loaded",google[y].loaded);google[y].M=function(){return"qid="+((new Date)[u]().toString(16)+Math.floor(Math.random()*1E7).toString(16))};J("google.loader.createGuidArg_",google[y].M);H("google_exportSymbol",H);H("google_exportProperty",I);google[y].b={};J("google.loader.themes",google[y].b);google[y].b.H="//www.google.com/cse/style/look/bubblegum.css";K(google[y].b,"BUBBLEGUM",google[y].b.H);google[y].b.J="//www.google.com/cse/style/look/greensky.css";K(google[y].b,"GREENSKY",google[y].b.J);google[y].b.I="//www.google.com/cse/style/look/espresso.css";K(google[y].b,"ESPRESSO",google[y].b.I);google[y].b.L="//www.google.com/cse/style/look/shiny.css";K(google[y].b,"SHINY",google[y].b.L);google[y].b.K="//www.google.com/cse/style/look/minimalist.css";K(google[y].b,"MINIMALIST",google[y].b.K);function T(a){this.a=a;this.o=[];this.n={};this.e={};this.f={};this.j=!0;this.c=-1}T[w].g=function(a,b){var c="";b!=d&&(b.language!=d&&(c+="&hl="+h(b.language)),b.nocss!=d&&(c+="&output="+h("nocss="+b.nocss)),b.nooldnames!=d&&(c+="&nooldnames="+h(b.nooldnames)),b.packages!=d&&(c+="&packages="+h(b.packages)),b.callback!=g&&(c+="&async=2"),b.style!=d&&(c+="&style="+h(b.style)),b.other_params!=d&&(c+="&"+b.other_params));if(!this.j){google[this.a]&&google[this.a].JSHash&&(c+="&sig="+h(google[this.a].JSHash));var e=[],f;for(f in this.n)f[p](0)==":"&&e[m](f[z](1));for(f in this.e)f[p](0)==":"&&this.e[f]&&e[m](f[z](1));c+="&have="+h(e[A](","))}return google[y][s]+"/?file="+this.a+"&v="+a+google[y].AdditionalParams+c};T[w].t=function(a){var b=g;a&&(b=a.packages);var c=g;if(b)if(typeof b=="string")c=[a.packages];else if(b[v]){c=[];for(a=0;a<b[v];a++)typeof b[a]=="string"&&c[m](b[a][o](/^\s*|\s*$/,"")[B]())}c||(c=["default"]);b=[];for(a=0;a<c[v];a++)this.n[":"+c[a]]||b[m](c[a]);return b};l(T[w],function(a,b){var c=this.t(b),e=b&&b.callback!=g;if(e)var f=new V(b.callback);for(var i=[],n=c[v]-1;n>=0;n--){var q=c[n];e&&f.A(q);if(this.e[":"+q])c.splice(n,1),e&&this.f[":"+q][m](f);else i[m](q)}if(c[v]){b&&b.packages&&(b.packages=c.sort()[A](","));for(n=0;n<i[v];n++)q=i[n],this.f[":"+q]=[],e&&this.f[":"+q][m](f);if(!b&&M[":"+this.a]!=g&&M[":"+this.a].versions[":"+a]!=g&&!google[y].AdditionalParams&&this.j){c=M[":"+this.a];google[this.a]=google[this.a]||{};for(var Q in c.properties)Q&&Q[p](0)==":"&&(google[this.a][Q[z](1)]=c.properties[Q]);google[y].d("script",google[y][s]+c.path+c.js,e);c.css&&google[y].d("css",google[y][s]+c.path+c.css,e)}else(!b||!b.autoloaded)&&google[y].d("script",this.g(a,b),e);if(this.j&&(this.j=!1,this.c=(new Date)[u](),this.c%100!=1))this.c=-1;for(n=0;n<i[v];n++)q=i[n],this.e[":"+q]=!0}});T[w].l=function(a){if(this.c!=-1)W("al_"+this.a,"jl."+((new Date)[u]()-this.c),!0),this.c=-1;this.o=this.o.concat(a.components);google[y][this.a]||(google[y][this.a]={});google[y][this.a].packages=this.o.slice(0);for(var b=0;b<a.components[v];b++){this.n[":"+a.components[b]]=!0;this.e[":"+a.components[b]]=!1;var c=this.f[":"+a.components[b]];if(c){for(var e=0;e<c[v];e++)c[e].B(a.components[b]);delete this.f[":"+a.components[b]]}}};T[w].m=function(a,b){return this.t(b)[v]==0};T[w].s=function(){return!0};function V(a){this.D=a;this.q={};this.r=0}V[w].A=function(a){this.r++;this.q[":"+a]=!0};V[w].B=function(a){this.q[":"+a]&&(this.q[":"+a]=!1,this.r--,this.r==0&&j[x](this.D,0))};function U(a,b,c){this.name=a;this.C=b;this.p=c;this.u=this.h=!1;this.k=[];google[y].v[this[t]]=F(this.l,this)}E(U,T);l(U[w],function(a,b){var c=b&&b.callback!=g;c?(this.k[m](b.callback),b.callback="google.loader.callbacks."+this[t]):this.h=!0;(!b||!b.autoloaded)&&google[y].d("script",this.g(a,b),c)});U[w].m=function(a,b){return b&&b.callback!=g?this.u:this.h};U[w].l=function(){this.u=!0;for(var a=0;a<this.k[v];a++)j[x](this.k[a],0);this.k=[]};var X=function(a,b){return a.string?h(a.string)+"="+h(b):a.regex?b[o](/(^.*$)/,a.regex):""};U[w].g=function(a,b){return this.F(this.w(a),a,b)};U[w].F=function(a,b,c){var e="";a.key&&(e+="&"+X(a.key,google[y].ApiKey));a.version&&(e+="&"+X(a.version,b));b=google[y].Secure&&a.ssl?a.ssl:a.uri;if(c!=g)for(var f in c)a.params[f]?e+="&"+X(a.params[f],c[f]):f=="other_params"?e+="&"+c[f]:f=="base_domain"&&(b="http://"+c[f]+a.uri[z](a.uri[r]("/",7)));google[this[t]]={};b[r]("?")==-1&&e&&(e="?"+e[z](1));return b+e};U[w].s=function(a){return this.w(a).deferred};U[w].w=function(a){if(this.p)for(var b=0;b<this.p[v];++b){var c=this.p[b];if(RegExp(c.pattern).test(a))return c}return this.C};function S(a,b){this.a=a;this.i=b;this.h=!1}E(S,T);l(S[w],function(a,b){this.h=!0;google[y].d("script",this.g(a,b),!1)});S[w].m=function(){return this.h};S[w].l=function(){};S[w].g=function(a,b){if(!this.i.versions[":"+a]){if(this.i.aliases){var c=this.i.aliases[":"+a];c&&(a=c)}if(!this.i.versions[":"+a])throw G("Module: '"+this.a+"' with version '"+a+"' not found!");}return google[y].GoogleApisBase+"/libs/"+this.a+"/"+a+"/"+this.i.versions[":"+a][b&&b.uncompressed?"uncompressed":"compressed"]};S[w].s=function(){return!1};var Y=!1,Z=[],ca=(new Date)[u](),W=function(a,b,c){Y||(O(j,"unload",da),Y=!0);if(c){if(!google[y].Secure&&(!google[y].Options||google[y].Options.csi===!1))a=a[B]()[o](/[^a-z0-9_.]+/g,"_"),b=b[B]()[o](/[^a-z0-9_.]+/g,"_"),j[x](F($,g,"//gg.google.com/csi?s=uds&v=2&action="+h(a)+"&it="+h(b)),1E4)}else Z[m]("r"+Z[v]+"="+h(a+(b?"|"+b:""))),j[x](da,Z[v]>5?0:15E3)},da=function(){if(Z[v]){var a=google[y][s];a[r]("http:")==0&&(a=a[o](/^http:/,"https:"));$(a+"/stats?"+Z[A]("&")+"&nc="+(new Date)[u]()+"_"+((new Date)[u]()-ca));Z.length=0}},$=function(a){var b=new Image,c=$.G++;$.z[c]=b;b.onload=b.onerror=function(){delete $.z[c]};b.src=a;b=g};$.z={};$.G=0;H("google.loader.recordStat",W);H("google.loader.createImageForLogging",$);}) ();google.loader.rm({"specs":["feeds","spreadsheets","gdata","visualization",{"name":"sharing","baseSpec":{"uri":"http://www.google.com/s2/sharing/js","ssl":null,"key":{"string":"key"},"version":{"string":"v"},"deferred":false,"params":{"language":{"string":"hl"}}}},"search","orkut","ads","elements",{"name":"books","baseSpec":{"uri":"http://books.google.com/books/api.js","ssl":null,"key":{"string":"key"},"version":{"string":"v"},"deferred":true,"params":{"callback":{"string":"callback"},"language":{"string":"hl"}}}},{"name":"friendconnect","baseSpec":{"uri":"http://www.google.com/friendconnect/script/friendconnect.js","ssl":null,"key":{"string":"key"},"version":{"string":"v"},"deferred":false,"params":{}}},"identitytoolkit",{"name":"maps","baseSpec":{"uri":"http://maps.google.com/maps?file\u003dgoogleapi","ssl":"https://maps-api-ssl.google.com/maps?file\u003dgoogleapi","key":{"string":"key"},"version":{"string":"v"},"deferred":true,"params":{"callback":{"regex":"callback\u003d$1\u0026async\u003d2"},"language":{"string":"hl"}}},"customSpecs":[{"uri":"http://maps.google.com/maps/api/js","ssl":"https://maps-api-ssl.google.com/maps/api/js","key":{"string":"key"},"version":{"string":"v"},"deferred":true,"params":{"callback":{"string":"callback"},"language":{"string":"hl"}},"pattern":"^(3|3..*)$"}]},"payments","wave","annotations_v2","earth","language",{"name":"annotations","baseSpec":{"uri":"http://www.google.com/reviews/scripts/annotations_bootstrap.js","ssl":null,"key":{"string":"key"},"version":{"string":"v"},"deferred":true,"params":{"callback":{"string":"callback"},"language":{"string":"hl"},"country":{"string":"gl"}}}}]});google.loader.rfm({":search":{"versions":{":1":"1",":1.0":"1"},"path":"/api/search/1.0/a19382024b10b17b3768f1ddbff9273a/","js":"default+de.I.js","css":"default+de.css","properties":{":JSHash":"a19382024b10b17b3768f1ddbff9273a",":NoOldNames":false,":Version":"1.0"}},":language":{"versions":{":1":"1",":1.0":"1"},"path":"/api/language/1.0/6740d6abfbd20a6a85bf7c0679800f75/","js":"default+de.I.js","properties":{":JSHash":"6740d6abfbd20a6a85bf7c0679800f75",":Version":"1.0"}},":feeds":{"versions":{":1":"1",":1.0":"1"},"path":"/api/feeds/1.0/9985b8868e3ae9a5aa2c2d37ab8ff230/","js":"default+de.I.js","css":"default+de.css","properties":{":JSHash":"9985b8868e3ae9a5aa2c2d37ab8ff230",":Version":"1.0"}},":spreadsheets":{"versions":{":0":"1",":0.4":"1"},"path":"/api/spreadsheets/0.4/87ff7219e9f8a8164006cbf28d5e911a/","js":"default.I.js","properties":{":JSHash":"87ff7219e9f8a8164006cbf28d5e911a",":Version":"0.4"}},":wave":{"versions":{":1":"1",":1.0":"1"},"path":"/api/wave/1.0/3b6f7573ff78da6602dda5e09c9025bf/","js":"default.I.js","properties":{":JSHash":"3b6f7573ff78da6602dda5e09c9025bf",":Version":"1.0"}},":annotations":{"versions":{":1":"1",":1.0":"1"},"path":"/api/annotations/1.0/e885a7c3bd3841744c9a4d7cde970cb5/","js":"default+de.I.js","properties":{":JSHash":"e885a7c3bd3841744c9a4d7cde970cb5",":Version":"1.0"}},":earth":{"versions":{":1":"1",":1.0":"1"},"path":"/api/earth/1.0/a53f4e87830de2a72937039b5507ebdc/","js":"default.I.js","properties":{":JSHash":"a53f4e87830de2a72937039b5507ebdc",":Version":"1.0"}},":picker":{"versions":{":1":"1",":1.0":"1"},"path":"/api/picker/1.0/77d23be1d9a7f6c7632cb056f3de7c8a/","js":"default.I.js","css":"default.css","properties":{":JSHash":"77d23be1d9a7f6c7632cb056f3de7c8a",":Version":"1.0"}}});google.loader.rpl({":scriptaculous":{"versions":{":1.8.3":{"uncompressed":"scriptaculous.js","compressed":"scriptaculous.js"},":1.8.2":{"uncompressed":"scriptaculous.js","compressed":"scriptaculous.js"},":1.8.1":{"uncompressed":"scriptaculous.js","compressed":"scriptaculous.js"}},"aliases":{":1.8":"1.8.3",":1":"1.8.3"}},":yui":{"versions":{":2.6.0":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.9.0":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.7.0":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.8.0r4":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.8.2r1":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":2.8.1":{"uncompressed":"build/yuiloader/yuiloader.js","compressed":"build/yuiloader/yuiloader-min.js"},":3.3.0":{"uncompressed":"build/yui/yui.js","compressed":"build/yui/yui-min.js"}},"aliases":{":3":"3.3.0",":2":"2.9.0",":2.7":"2.7.0",":2.8.2":"2.8.2r1",":2.6":"2.6.0",":2.9":"2.9.0",":2.8":"2.8.2r1",":2.8.0":"2.8.0r4",":3.3":"3.3.0"}},":swfobject":{"versions":{":2.1":{"uncompressed":"swfobject_src.js","compressed":"swfobject.js"},":2.2":{"uncompressed":"swfobject_src.js","compressed":"swfobject.js"}},"aliases":{":2":"2.2"}},":webfont":{"versions":{":1.0.2":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.1":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.0":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.6":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.19":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.5":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.18":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.17":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.4":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.16":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.3":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.9":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.12":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.13":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.14":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.15":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.10":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"},":1.0.11":{"uncompressed":"webfont_debug.js","compressed":"webfont.js"}},"aliases":{":1":"1.0.19",":1.0":"1.0.19"}},":ext-core":{"versions":{":3.1.0":{"uncompressed":"ext-core-debug.js","compressed":"ext-core.js"},":3.0.0":{"uncompressed":"ext-core-debug.js","compressed":"ext-core.js"}},"aliases":{":3":"3.1.0",":3.0":"3.0.0",":3.1":"3.1.0"}},":mootools":{"versions":{":1.2.3":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.3.1":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.1.1":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.2.4":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.3.0":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.2.1":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.2.2":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.3.2":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.2.5":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"},":1.1.2":{"uncompressed":"mootools.js","compressed":"mootools-yui-compressed.js"}},"aliases":{":1":"1.1.2",":1.11":"1.1.1",":1.3":"1.3.2",":1.2":"1.2.5",":1.1":"1.1.2"}},":jqueryui":{"versions":{":1.6.0":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.0":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.2":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.1":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.9":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.7":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.13":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.8":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.12":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.5":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.11":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.7.2":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.7.3":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.10":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.6":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.7.0":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.7.1":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.8.4":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.5.3":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"},":1.5.2":{"uncompressed":"jquery-ui.js","compressed":"jquery-ui.min.js"}},"aliases":{":1.8":"1.8.13",":1.7":"1.7.3",":1.6":"1.6.0",":1":"1.8.13",":1.5":"1.5.3",":1.8.3":"1.8.4"}},":chrome-frame":{"versions":{":1.0.2":{"uncompressed":"CFInstall.js","compressed":"CFInstall.min.js"},":1.0.1":{"uncompressed":"CFInstall.js","compressed":"CFInstall.min.js"},":1.0.0":{"uncompressed":"CFInstall.js","compressed":"CFInstall.min.js"}},"aliases":{":1":"1.0.2",":1.0":"1.0.2"}},":jquery":{"versions":{":1.3.1":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.3.0":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.6.1":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.3.2":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.6.0":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.2.3":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.2.6":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.3":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.4":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.5.1":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.5.0":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.0":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.5.2":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.1":{"uncompressed":"jquery.js","compressed":"jquery.min.js"},":1.4.2":{"uncompressed":"jquery.js","compressed":"jquery.min.js"}},"aliases":{":1":"1.6.1",":1.6":"1.6.1",":1.5":"1.5.2",":1.4":"1.4.4",":1.3":"1.3.2",":1.2":"1.2.6"}},":prototype":{"versions":{":1.7.0.0":{"uncompressed":"prototype.js","compressed":"prototype.js"},":1.6.0.2":{"uncompressed":"prototype.js","compressed":"prototype.js"},":1.6.1.0":{"uncompressed":"prototype.js","compressed":"prototype.js"},":1.6.0.3":{"uncompressed":"prototype.js","compressed":"prototype.js"}},"aliases":{":1.7":"1.7.0.0",":1.6.1":"1.6.1.0",":1":"1.7.0.0",":1.6":"1.6.1.0",":1.7.0":"1.7.0.0",":1.6.0":"1.6.0.3"}},":dojo":{"versions":{":1.2.3":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.3.1":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.1.1":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.3.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.3.2":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.6.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.4.3":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.5.1":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.5.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.2.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.4.0":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"},":1.4.1":{"uncompressed":"dojo/dojo.xd.js.uncompressed.js","compressed":"dojo/dojo.xd.js"}},"aliases":{":1":"1.6.0",":1.6":"1.6.0",":1.5":"1.5.1",":1.4":"1.4.3",":1.3":"1.3.2",":1.2":"1.2.3",":1.1":"1.1.1"}}});}

google.load('ads.search', '2');

/*jquery.insight:22506022.4*/

/**
 * User: l.bilharz@global-communication.de
 * Date: 18.10.11
 * Time: 14:28
 */
(function(){
    /**
     * @class inSightHandler
     * @param {Event} e
     * @param {int} visible bitmask of visible edges (1: top, 2: right, 4: bottom, 8: left)
     * @param {int} previousVisible bitmask of previously visible edges (1: top, 2: right, 4: bottom, 8: left)
     * @returns {Boolean} false if event should be cancelled
     */
    function inSightHandler(e, visible, previousVisible){return true}
})();
(function($) {
    "use strict";
    var FLAG_TOP = 1,
        FLAG_RIGHT = 2,
        FLAG_BOTTOM = 4,
        FLAG_LEFT = 8,
        EVENT_NAME = "inSight",
        CHECK_EVENT_NAME = "inSightCheck",
        LAZY_MILLIS = 2000, // ms interval while idling
        EAGER_MILLIS = 50, //  ms to wait before triggering windowEventHandlers, 0 = directly
        // store the timeout id (and serve as handler-is-setup-marker)
        _timeout = 0;
    $.fn.inSight = function() {
        return this.length ? getVisibility.call(this.get(0), getViewport()) : 0;
    };
    // we bind an additional event, which will be triggered globally, so it's up to jQuery to track references to DOM Elements
    $.event.special.inSight = {
        setup: function(){
            $(this).bind(CHECK_EVENT_NAME, {visible: 0}, checkInView);
            if (!_timeout) setupHandlers();
        },
        teardown: function(){
            $(this).unbind(CHECK_EVENT_NAME, checkInView);
        }
    };
    // bind to window's modification and additionally use an interval, i.e. if elements appear in viewport programmatically
    function setupHandlers(){
        $(window).bind("scroll resize click", windowEventHandler);
        _timeout = window.setTimeout(triggerCheckInView, LAZY_MILLIS);
    }
    function teardownHandlers(){
        $(window).unbind(false, windowEventHandler);
        window.clearTimeout(_timeout);
        _timeout = 0;
    }
    
    function windowEventHandler() {
        window.clearTimeout(_timeout);
        if (EAGER_MILLIS == 0) {
            triggerCheckInView();
        } else {
            _timeout = window.setTimeout(triggerCheckInView, EAGER_MILLIS);
        }
    }
    // trigger global event, which will call the element-local checks
    // if no handlers set e.hasHandlers to true, i.e. there are none left, teardown interval and window-event-handler
    function triggerCheckInView() {
        var e = $.Event(CHECK_EVENT_NAME);
        try {
            $.event.trigger(e);
        } finally {
            if (e.hasHandlers) {
                _timeout = window.setTimeout(triggerCheckInView, LAZY_MILLIS);
            } else {
                teardownHandlers();
            }
        }
    }
    /**
     * check one elements visibility and trigger handlers on change
     * @this {Element} DOM Element
     * @param {Event} e
     */
    function checkInView(e) {
        var viewport = e.viewport || (e.viewport = getViewport());
        e.hasHandlers = true;
        var visible = getVisibility.call(this, viewport);
        // trigger handlers if visibility changed
        if (e.data.visible != visible) {
            $(this).trigger(EVENT_NAME, [ visible, e.data.visible ]);
            e.data.visible = visible;
        }
    }
    function getVisibility(viewport) {
        var $$ = $(this);
        // invisible, if element is not in dom
        if (!$$.closest("html").length) return 0;
        var offset = $$.offset();
        // invisible, if offset could not be calculated
        if (!offset) return 0;
        var visible = 0, top = offset.top, left = offset.left;
        // chance for vertical visibility
        if (top < viewport.bottom) {
            var bottom = top + $$.height();
            if (top >= viewport.top) visible += FLAG_TOP;
            if (bottom < viewport.bottom && bottom >= viewport.top) visible += FLAG_BOTTOM;
        }
        // invisible, above or below viewport
        if (!visible) return 0;
        // vertical visible and chance for horizontal visibility
        if (left < viewport.right) {
            var right = left + $$.width();
            if (left >= viewport.left) visible += FLAG_LEFT;
            if (right < viewport.right && right >= viewport.left) visible += FLAG_RIGHT;
            // invisible, clear out vertical visibility if horizontal invisible
            if (!(visible & (FLAG_LEFT | FLAG_RIGHT))) return 0;
        }
        // jQuery-check visibility only if in viewport (might be cost-intensive)
        if (!visible || !$$.is(":visible")) return 0;
        return visible;
    }
    // calculate the browser viewport
    function getViewport() {
        var win = $(window),
            top = win.scrollTop(),
            left = win.scrollLeft();
        return {
            top: top,
            left: left,
            bottom: top + win.height(),
            right: left + win.width()
        }
    }
})(jQuery);
/*jquery.adloader:22506006.21*/

/**
 * User: l.bilharz@global-communication.de
 * Date: 18.10.11
 * Time: 13:12
 */
(function($){
    "use strict";
    var INSIGHT_CHECK_EVENT = "inSight",
        FLAG_TOP = 1,
        FLAG_RIGHT = 2,
        FLAG_BOTTOM = 4,
        FLAG_LEFT = 8,
        FLAG_ALL = 15;
    //on document ready: take given array of iframeData and bind handlers
    $(function() {
        if (!window.de || !window.de.bild) return;
        var data = window.de.bild.iframeData;
        if (!$.isArray(data)) return;
        
        var isOldIE = ($.browser.msie && parseInt($.browser.version) < 9);
        
        for (var i = 0, l = data.length; i < l; i++) {
            var o = data[i],
                $$ = $("#" + o.id + " iframe");
            $$.css("visibility", "hidden");
            // IE < 9 Transparenz setzen
            if(isOldIE) {
                $$.attr("allowtransparency", "true");
                var d = $$.contents().get(0);
                if(d){
                    d.open();
                    d.write('<html><body style="background:transparent;"></body></html>');
                    d.close();
                }
                //$$.css("visibility", "visible");
            }
            
            if ($$.inSight() != 0) {
                // element is already in viewport: load script
                loadJavaScript.call($$.get(0), o.url, o.arParams);
            } else {
                // bind handler triggered when element enters viewport
                $$.bind(INSIGHT_CHECK_EVENT, {url: o.url, arParams: o.arParams}, handleInSight);
            }
        }
    });
    /**
     * @extends inSightHandler
     * load javascript in iframe first time that at least one pixel enters browser viewport.
     */
    function handleInSight(e, visible) {
        if (visible != 0) {
            loadJavaScript.call(this, e.data.url, e.data.arParams);
            $(this).unbind(INSIGHT_CHECK_EVENT, handleInSight);
        }
        return false;
    }
    /**
     * load javascript in iframe
     * @this {Element} iframe
     * @param url
     */
    function loadJavaScript(url, arParams) {
        // add a random number to the ad request url
        //url = urlAppend(url, Math.round(Math.random() * new Date().getTime()));
      
        // iframe mit load belegen
        var iframe = $(this);
        iframe.load(function() {
            check();
        });
      
        function check() {
            if(iframe.data("isLoaded") != "true") {
                if(!checkNOAD()) {
                    // Klasse bei Id #ressortSuperBanner_ setzten
                    var $dv = iframe.parent();
                    var cls = $dv.attr("id");
                    if(cls.indexOf("ressortSuperBanner_") != -1) {
                        $dv.addClass("slh");
                        $("body, html").css("background", "#E2E2E2");
                    }
                    // Sichtbar machen
                    iframe.css("visibility", "visible");
                    iframe.unbind("load");
                    iframe.data("isLoaded", "true")
                }
                else if(arParams != undefined) {
                    de.bild.AdReplace.apply("", arParams);
                    iframe.unbind("load");
                    iframe.data("isLoaded", "true")
                }
            }
        }
      
        function checkNOAD() {
            if(iframe[0].contentWindow["sas_noad"] == true) {
                return true;
            }
            else {
                return false
            }
        }
      
        // find iframe document
        var doc = iframe.contents().get(0);
        doc.open();
        doc.write('<html><body style="background:transparent; margin:0;"><scr' + 'ipt type="text/javascr' + 'ipt" sr' + 'c="' + url + '"></scr' + 'ipt></body></html>');
        if (!($.browser.msie || $.browser.opera)) {
            doc.close();
        }
        else {
            setTimeout(function() {
                doc.close();
            }, 10000);
        }
    }
    /**
     * Appends suffix to url and separates with param delimeter ? or & as needed.
     * @param url {String} base url
     * @param toAppend {String} suffix to append to base URL
     */
    function urlAppend(url, toAppend) {
        var i = url.indexOf("?");
        if (i < 0) return url + "?" + toAppend;
        if (i == url.length - 1) return url + toAppend;
        var a = url.indexOf("&");
        return a == url.length - 1 ? url + toAppend : url + "&" + toAppend;
    }
})(jQuery);
/*core:25425030.8*/

var google_adnum=0;

var de = de || {};
de.bild = de.bild || {};

de.bild.iframeData = [];