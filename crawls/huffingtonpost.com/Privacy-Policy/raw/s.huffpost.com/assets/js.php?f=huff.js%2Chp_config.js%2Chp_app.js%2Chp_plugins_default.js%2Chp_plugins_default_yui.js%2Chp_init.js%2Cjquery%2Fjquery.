/* From: wfe3-ewr : 31336 */
(function(a,k){a.huff=({init:function(){this.jquery=k?jQuery:jQuery.noConflict();this.jquery.ajaxSetup({cache:true});this.events={};this.versions=undefined;this.styles={};this.units={};this.unit("dom/ready",this.jquery);this.unit("jquery",this.jquery,true);var c=this;window.onerror=function(l,i,e){c.error(l?new Error(l,i,e):window.error)};this.beta=(location.host.toLowerCase().indexOf("beta")>0||location.host.toLowerCase().indexOf("amazon")>0);this.blogger=location.host.toLowerCase().indexOf("blogger")===0;this.editorial=location.host.toLowerCase().indexOf("editorial")===0;this.nonminified=location.search.indexOf("no-min=")>0?"no-min=1&":"";this.host=this.beta||this.editorial||this.blogger?location.host:"s.huffpost.com";this.path={js:location.protocol+"//"+this.host+"/assets/js.php?"+this.nonminified+"f=",css:location.protocol+"//"+this.host+"/assets/css.php?"+this.nonminified+"f="};this.env={async:document.createElement("script").async===true};(this.env.webkit=/AppleWebKit\//.test(navigator.userAgent))||(this.env.ie=/MSIE/.test(navigator.userAgent))||(this.env.opera=/Opera/.test(navigator.userAgent))||(this.env.gecko=/Gecko\//.test(navigator.userAgent))||(this.env.unknown=true);this.console=true;this.waiting={};return this},run:function(c){try{"function"===typeof c&&c.call(this)}catch(i){this.error(i)}},ready:function(e){this.run(function(){this.jquery(e)})},log:function(){this.pass("log",arguments)},debug:function(){this.pass("debug",arguments)},error:function(c){this.pass("error",arguments)},unit:function(c,m,l){var i=this,n=function(e){i.units[c]=e;i.fire("load/"+c+".js");i.emit("unit",c,e)};try{i.units[c]=false;if("function"===typeof m){l?n(m):new m(n)}else{l||"function"!==typeof m.init?n(m):m.init(n)}}catch(o){i.error(o);n()}},use:function(){var l=this,c=[],e=Array.prototype.slice.call(arguments,0),o="function"===typeof e[e.length-1]?e.pop():null,m=e.length,n=[],i=function(p,q){c[p]=q;if(--m===0){try{"function"===typeof o&&o.apply(l,c)}catch(s){l.error(s)}}};setTimeout(function(){for(var p=0;p<e.length;p++){(function(q,r){if(q in l.units){if(false===l.units[q]){l.waiting[q]=true;l.on("load/"+q+".js",function(){delete l.waiting[q];i(r,l.units[q])})}else{i(r,l.units[q])}}else{n.push("_"+q+".js");l.units[q]=false;l.waiting[q]=true;l.on("load/"+q+".js",function(){delete l.waiting[q];i(r,l.units[q])})}})(e[p],p)}if(n.length){l.vers(n,function(q){l.jquery.getScript(l.path.js+n.join(",")+q)})}},0)},js:function(){var i=this,e=Array.prototype.slice.call(arguments,0),l="function"===typeof e[e.length-1]&&e.pop();i.vers(e,function(c){"object"===typeof e&&(e=e.join(","));i.jquery.getScript(i.path.js+e+c,l)})},css:function(){arguments=Array.prototype.slice.call(arguments,0);var m=this,o=[],p="function"===typeof arguments[arguments.length-1]?arguments.pop():null,n=arguments.length,e=function(){if(--n===0){try{for(var q=0;q<o.length;q++){m.styles[o[q]]=true;m.fire("load/"+o[q]+".css")}"function"===typeof p&&p()}catch(r){m.error(r)}}};for(var l=0;l<arguments.length;l++){var c=arguments[l];switch(m.styles[c]){case true:e();break;case false:m.on("load/"+c+".css",e);break;default:o.push(c);m.styles[c]=false;m.on("load/"+c+".css",e)}}if(o.length===0){return}m.vers(o,".css",function(q){var s,i=0,r=m.path.css+o.join(".css,")+".css"+q;s=m.jquery("<link>").attr({href:r,rel:"stylesheet",charset:"utf-8"});if(m.env.webkit||m.env.gecko){(function(){for(var u=document.styleSheets,t=u.length;--t>=0;){if(u[t].href===r){return e()}}++i<200?setTimeout(arguments.callee,50):e()})()}else{s[0].onload=s[0].onerror=e}s.appendTo("head")})},on:function(c,e){this.events[c]=this.events[c]||(this.events[c]=[]);this.events[c].push(e);return this},once:function(e,i){this.events[e]=this.events[e]||(this.events[e]=[]);var c=this.events.length;this.events[e].push(function(){i();this.events[e].splice(c,1);if(this.events[e].length===0){delete this.events[e]}})},emit:function(){arguments=Array.prototype.slice.call(arguments,0);var l=arguments.shift();if(undefined===this.events[l]){return}for(var c=0;c<this.events[l].length;c++){try{this.events[l][c].apply(this,arguments)}catch(m){this.error(m)}}},pass:function(e,c){c=Array.prototype.slice.call(c,0);c.unshift(e);this.emit.apply(this,c)},fire:function(){this.emit.apply(this,arguments);delete this.events[name]},v:function(c){if(undefined===c){this.versions=false;return}if("object"===typeof this.versions){for(var e in c){if(c.hasOwnProperty(e)){this.versions[e]=c[e]}}}else{this.versions=c;this.fire("load/deploy_config.json")}},vers:function(n,m,o){var l=this,e=arguments,c=+new Date();if(l.beta){return(o||m||function(p){return p})("&r"+c)}if(undefined===l.versions){l.versions=false;l.jquery.ajax({url:"/deploy_config.json?"+(l.vv?"v"+l.vv:"r"+c),success:function(p){l.v(p);e.callee.apply(l,e)}})}else{if(l.versions===false){l.on("load/deploy_config.json",function(){e.callee.apply(l,e)})}else{if(undefined===o){o=m,m=undefined}var i="&v="+l.versions.deploy_seq;return"function"===typeof o?o(i):i}}}}).init();if(!k){try{var j=a.console,g=function(){};if(a.console){a.console=undefined;g.prototype=j}var f=a.console=new g;var b=["assert","debug","error","info","log","warn"];for(var d=b.length;d--;){(function(c){a.console[c]=function(){try{a.console=j;a.huff.console&&j&&c in j&&j[c].apply(j,arguments);a.huff.pass(c,arguments);a.console=f}catch(i){}}})(b[d])}}catch(h){a.huff.error(h)}}})(window,window.IS_CHROMEAPP||window.IS_NEWSGLIDE||window.KEEP_$);
var _port=document.location.port;var HPConfig={current_vertical_name:"",current_web_domain:document.location.hostname+((!_port||_port==""||_port==80)?"":":"+_port),current_web_address:"http://"+document.location.hostname+((!_port||_port==""||_port==80)?"":":"+_port),timestamp_for_clearing_js:0,slideshow_mode:0,blog_id:0,comments_update_interval:0,comments_update_for_all_users:false,wide_format:false,enable_fb_widgets:false,page_data:{},entry_design:"",ipad_application:false,entry_design:"",hp_static_domain:"",display_domain:"",load_big_slideshow_from:0,current_vertical_color:"#058B7B",current_vertical_color_light:"#005F4C",site:false,huffsite:"",terms_link:"",privacy_link:""};
H={};H.namespace=function(g,b,f){if(typeof g!=="string"){throw new TypeError("@namespace param should be a string")}var j=g.split("."),h=b||window;for(var e=0,a=j.length;e<a;e++){var c=j[e];if(typeof h[c]==="undefined"){h[c]=(e==(a-1)&&typeof f!="undefined")?f:{}}h=h[c]}return h};H.log=function(){if(typeof console!=="undefined"&&typeof console.log==="function"){console.log.apply(console,arguments)}};H.err=function(a){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error.apply(console,arguments)}return false};H.template=function(a){if(typeof a!=="string"){throw new TypeError("@template param should be string")}var b=[];return{render:function(h){var f,e=a;if(!b.length){var j=/%{(\w+)}/g;while(f=j.exec(a)){b.push(f[1])}}var c=b.length;for(var g=c;g--;){var d=b[g];if(typeof h[d]=="undefined"){continue}e=e.replace("%{"+d+"}",h[d])}return e}}};H.namespace("H.App");H.App.instance=function(){this.components={};this.fn=H.App.Plugins.loadDefault();this.data={};if(typeof WWW_DOMAIN!=="undefined"){this.data.baseUrl=WWW_DOMAIN;this}else{if(HPConfig.current_web_address!==""){this.data.baseUrl="http://"+HPConfig.current_web_address}}this.JS_LOADER_URL=this.data.baseUrl+"/assets/js.php?f=";this.loadPluginsQueue=[];this.loadPluginsQueueNames=[]};H.App.instance.prototype={registerComponent:function(a,b){if(typeof b!=="function"||typeof a!=="string"){throw new TypeError("Unable to register component")}this.components[a]=b(this.fn,this.data)},unregisterComponent:function(a){if(typeof a!=="string"){throw new TypeError("@name param should be string")}if(typeof this.components[a]==="undefined"){return H.err("Could not find component "+a)}if(typeof this.components[a].unload==="function"){this.components[a].unload()}delete this.components[a];return true},use:function(b){if(typeof b==="string"){b=b.split(/,\s*/)}if({}.toString.call(b)!=="[object Array]"){throw new TypeError("@name param suppose to be an array or string")}var e,d,a=b.length;for(var c=a;c--;){e=b[c];d=H.App.Plugins.get(e);if(d){H.namespace(e,this.fn,d)}else{this.loadPluginsQueue.push(e);this.loadPluginsQueueNames.push("hp_plugins_"+e+".js")}}},appendScript:function(d,e,a){var a=a||document.getElementsByTagName("head")[0],b=document.createElement("script");var c=this;if(typeof e==="function"){b.onreadystatechange=function(){if(this.readyState=="complete"){e(c)}};b.onload=function(){e(c)}}b.type="text/javascript";b.src=d;a.appendChild(b)},getLib:function(){return this.fn},getPlugin:function(a){return H.App.Plugins.get(a)},load:function(a){this._checkSync(function(b){if(typeof b.components[a]!=="undefined"){b.components[a].load()}})},loadAll:function(){this._checkSync(function(a){for(name in a.components){a.components[name].load()}})},_checkSync:function(b){if(typeof b!=="function"){throw new TypeError("@callback param suppose to be function")}if(this.loadPluginsQueue.length>0){var a=this.loadPluginsQueueNames.join(",");this.appendScript(this.JS_LOADER_URL+a,function(f){var d,c=f.loadPluginsQueue.length;for(var e=c;e--;){d=f.loadPluginsQueue[e];if(handler=H.App.Plugins.get(d)){H.namespace(d,f.fn,handler)}else{H.err("Failed to load plugin: "+d)}}f.loadPluginsQueueNames=[];f.loadPluginsQueue=[];b(f)})}else{b(this)}},lazyLoad:{UA:false,pending:null,queue:[],load:function(e,h,a,j){var f=document.getElementsByTagName("head")[0],c,g;if(e){e=(typeof(e)==="string")?[e]:e;for(c=0;c<e.length;++c){this.queue.push({url:e[c],callback:c===e.length-1?h:null,argument:a,scope:j})}}if(this.pending||!(this.pending=this.queue.shift())){return}if(!this.UA){this.UA={gecko:0,ie:0,webkit:0};var k=navigator.userAgent,b=k.match(/AppleWebKit\/(\S*)/);if(b&&b[1]){this.UA.webkit=parseFloat(b[1])}else{b=k.match(/MSIE\s([^;]*)/);if(b&&b[1]){this.UA.ie=parseFloat(b[1])}else{if((/Gecko\/(\S*)/).test(k)){this.UA.gecko=1;b=k.match(/rv:([^\s\)]*)/);if(b&&b[1]){this.UA.gecko=parseFloat(b[1])}}}}}g=document.createElement("script");g.type="text/javascript";g.src=this.pending.url;if(this.UA.ie){var d=this;g.onreadystatechange=function(){if(this.readyState==="loaded"||this.readyState==="complete"){d.requestComplete()}}}else{if(this.UA.gecko||this.UA.webkit>=420){g.onload=this.requestComplete;g.onerror=this.requestComplete}}f.appendChild(g)},loadOnce:function(h,k,b,l){var c=[],d=document.getElementsByTagName("script"),g,e,f,a;h=(typeof(h)==="string")?[h]:h;for(g=0;g<h.length;++g){f=false;a=h[g];for(e=0;e<d.length;++e){if(a===d[e].src||(window.location.protocol+"//"+HPConfig.current_web_domain+a)===d[e].src){f=true;break}}if(!f){c.push(a)}}if(c.length>0){this.load(c,k,b,l);return}if(!k){return}k.call(l||window,b)},requestComplete:function(){var a=HuffApp.lazyLoad;if(a.pending.callback){a.pending.callback.call(a.pending.scope||window,a.pending.argument)}a.pending=null;if(a.queue.length){a.load()}}}};
H.namespace("H.App.Plugins");H.App.Plugins.fn={};H.App.Plugins.add=function(b,c,a){if(typeof c!="function"){return false}var d=H.namespace(b,this.fn,c)};H.App.Plugins.get=function(b){var d=b.split("."),c=this.fn,a;for(i in d){if(!d.hasOwnProperty(i)){continue}a=d[i];if(typeof(c[a])=="undefined"){return false}c=c[a]}return c};H.App.Plugins.loadDefault=function(){var a=["event","dom","ajax","css"];res={};for(key=0;key<a.length;key++){if(!a.hasOwnProperty(key)){continue}H.namespace(a[key],res,this.get(a[key]))}return res};
H.App.Plugins.add("event.notify",function(a,b,c){});H.App.Plugins.add("event.listen",function(b,e,d,a,c){if(typeof(b)==="string"){b=b.replace("#","")}YAHOO.util.Event.addListener(b,e,d,a,c)});H.App.Plugins.add("event.remove",function(a,c,b){if(typeof(a)==="string"){a=a.replace("#","")}YAHOO.util.Event.removeListener(a,c,b)});H.App.Plugins.add("event.ready",function(a){YAHOO.util.Event.onDOMReady(a)});H.App.Plugins.add("event.load",function(b,d,a,c){if(typeof(b)==="string"){b=b.replace("#","")}YAHOO.util.Event.onContentReady(b,d,a,c)});H.App.Plugins.add("event.on_avaliable",function(d,c,a,b){d=d.replace("#","");YAHOO.util.Event.onAvailable(d,c,a,b)});H.App.Plugins.add("css",function(b,a,c){if(c===null){return YAHOO.util.Dom.getStyle(b,a)}return YAHOO.util.Dom.setStyle(b,a,c)});H.App.Plugins.add("css.hasClass",function(a,b){return YAHOO.util.Dom.hasClass(a,b)});H.App.Plugins.add("css.addClass",function(a,b){return YAHOO.util.Dom.addClass(a,b)});H.App.Plugins.add("css.removeClass",function(a,b){return YAHOO.util.Dom.removeClass(a,b)});H.App.Plugins.add("dom.get",function(a){return YAHOO.util.Selector.query(a)},true);H.App.Plugins.add("dom.getNode",function(a){var b=YAHOO.util.Selector.query(a);if(b.length>1){return b}if(b.length==1){return b[0]}return false},true);H.App.Plugins.add("dom.getNodes",function(a){return YAHOO.util.Selector.query(a)},true);H.App.Plugins.add("dom.add",function(a,b){},true);H.App.Plugins.add("dom.documentHeight",function(){return YAHOO.util.Dom.getDocumentHeight()});H.App.Plugins.add("dom.documentWidth",function(){return YAHOO.util.Dom.getDocumentWidth()});H.App.Plugins.add("dom.getXY",function(a){if(typeof(a)==="string"){a=a.replace("#","")}var b=YAHOO.util.Dom.getXY(a);return{left:b[0],top:b[1]}});H.App.Plugins.add("dom.scrollTop",function(){return self.pageYOffset||(document.documentElement&&document.documentElement.scrollTop)||(document.body&&document.body.scrollTop)});H.App.Plugins.add("ajax.post",function(){var a;if(typeof(arguments[0])==="object"){var a=arguments[0];a.method="GET"}else{a={method:"GET",url:arguments[0],success:arguments[1]||null,argument:arguments[2]||null,scope:arguments[3]||null};if(!a.scope&&a.argument){a.scope=a.argument;a.argument=null}}var b=null;if(a.success){b=function(e){a.success.apply(a.scope,[e.responseText,e.statusText,e.argument])}}var c=null;if(a.failure){c=function(e){a.failure.apply(a.scope,[e.statusText,e.argument])}}post_data=a.request_data||"";var d={success:b,failure:c,argument:a.argument||null,scope:a.scope||null,timeout:a.timeout||null};return YAHOO.util.Connect.asyncRequest("POST",a.url,d,post_data)});H.App.Plugins.add("ajax.get",function(){var a;if(typeof(arguments[0])==="object"){var a=arguments[0];a.method="GET"}else{a={method:"GET",url:arguments[0],success:arguments[1]||null,argument:arguments[2]||null,scope:arguments[3]||null};if(!a.scope&&a.argument){a.scope=a.argument;a.argument=null}}var b=null;if(a.success){b=function(e){a.success.apply(a.scope,[e.responseText,e.statusText,e.argument])}}var c=null;if(a.failure){c=function(e){a.failure.apply(a.scope,[e.statusText,e.argument])}}var d={success:b,failure:c,argument:a.argument||null,scope:a.scope||null,timeout:a.timeout||null};YAHOO.util.Connect.asyncRequest("GET",a.url,d)});H.App.Plugins.add("ajax.ping",function(a){YAHOO.util.Connect.asyncRequest("GET",a)});
var HuffApp=new H.App.instance();var HAL=HuffApp.getLib();
(function(b){if(!document.defaultView||!document.defaultView.getComputedStyle){var d=jQuery.curCSS;jQuery.curCSS=function(g,e,h){if(e==="background-position"){e="backgroundPosition"}if(e!=="backgroundPosition"||!g.currentStyle||g.currentStyle[e]){return d.apply(this,arguments)}var f=g.style;if(!h&&f&&f[e]){return f[e]}return d(g,"backgroundPositionX",h)+" "+d(g,"backgroundPositionY",h)}}var c=b.fn.animate;b.fn.animate=function(e){if("background-position" in e){e.backgroundPosition=e["background-position"];delete e["background-position"]}if("backgroundPosition" in e){e.backgroundPosition="("+e.backgroundPosition}return c.apply(this,arguments)};function a(f){f=f.replace(/left|top/g,"0px");f=f.replace(/right|bottom/g,"100%");f=f.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");var e=f.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);return[parseFloat(e[1],10),e[2],parseFloat(e[3],10),e[4]]}b.fx.step.backgroundPosition=function(f){if(!f.bgPosReady){var h=b.curCSS(f.elem,"backgroundPosition");if(!h){h="0px 0px"}h=a(h);f.start=[h[0],h[2]];var e=a(f.options.curAnim.backgroundPosition);f.end=[e[0],e[2]];f.unit=[e[1],e[3]];f.bgPosReady=true}var g=[];g[0]=((f.end[0]-f.start[0])*f.pos)+f.start[0]+f.unit[0];g[1]=((f.end[1]-f.start[1])*f.pos)+f.start[1]+f.unit[1];f.elem.style.backgroundPosition=g[0]+" "+g[1]}})(jQuery);
(function(d){function g(a){var b=a||window.event,i=[].slice.call(arguments,1),c=0,h=0,e=0;a=d.event.fix(b);a.type="mousewheel";if(a.wheelDelta)c=a.wheelDelta/120;if(a.detail)c=-a.detail/3;e=c;if(b.axis!==undefined&&b.axis===b.HORIZONTAL_AXIS){e=0;h=-1*c}if(b.wheelDeltaY!==undefined)e=b.wheelDeltaY/120;if(b.wheelDeltaX!==undefined)h=-1*b.wheelDeltaX/120;i.unshift(a,c,h,e);return d.event.handle.apply(this,i)}var f=["DOMMouseScroll","mousewheel"];d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=
f.length;a;)this.addEventListener(f[--a],g,false);else this.onmousewheel=g},teardown:function(){if(this.removeEventListener)for(var a=f.length;a;)this.removeEventListener(f[--a],g,false);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);

(function(c,j){function k(a){return!c(a).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};if(!c.ui.version){c.extend(c.ui,{version:"@VERSION",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,
NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({_focus:c.fn.focus,focus:function(a,b){return typeof a==="number"?this.each(function(){var d=this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;a=c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,
"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==j)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var b;a.length&&a[0]!==document;){b=a.css("position");
if(b==="absolute"||b==="relative"||b==="fixed"){b=parseInt(a.css("zIndex"),10);if(!isNaN(b)&&b!==0)return b}a=a.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(a,b){function d(f,g,l,m){c.each(e,function(){g-=parseFloat(c.curCSS(f,"padding"+this,true))||0;if(l)g-=parseFloat(c.curCSS(f,
"border"+this+"Width",true))||0;if(m)g-=parseFloat(c.curCSS(f,"margin"+this,true))||0});return g}var e=b==="Width"?["Left","Right"]:["Top","Bottom"],h=b.toLowerCase(),i={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+b]=function(f){if(f===j)return i["inner"+b].call(this);return this.each(function(){c(this).css(h,d(this,f)+"px")})};c.fn["outer"+b]=function(f,g){if(typeof f!=="number")return i["outer"+b].call(this,f);return this.each(function(){c(this).css(h,
d(this,f,true,g)+"px")})}});c.extend(c.expr[":"],{data:function(a,b,d){return!!c.data(a,d[3])},focusable:function(a){var b=a.nodeName.toLowerCase(),d=c.attr(a,"tabindex");if("area"===b){b=a.parentNode;d=b.name;if(!a.href||!d||b.nodeName.toLowerCase()!=="map")return false;a=c("img[usemap=#"+d+"]")[0];return!!a&&k(a)}return(/input|select|textarea|button|object/.test(b)?!a.disabled:"a"==b?a.href||!isNaN(d):!isNaN(d))&&k(a)},tabbable:function(a){var b=c.attr(a,"tabindex");return(isNaN(b)||b>=0)&&c(a).is(":focusable")}});
c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=b.offsetHeight===100;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"});c.extend(c.ui,{plugin:{add:function(a,b,d){a=c.ui[a].prototype;for(var e in d){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,d[e]])}},call:function(a,b,d){if((b=a.plugins[b])&&a.element[0].parentNode)for(var e=0;e<b.length;e++)a.options[b[e][0]]&&
b[e][1].apply(a.element,d)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if(c(a).css("overflow")==="hidden")return false;var d=b&&b==="left"?"scrollLeft":"scrollTop",e=false;if(a[d]>0)return true;a[d]=1;e=a[d]>0;a[d]=0;return e},isOverAxis:function(a,b,d){return a>b&&a<b+d},isOver:function(a,b,d,e,h,i){return c.ui.isOverAxis(a,d,h)&&c.ui.isOverAxis(b,e,i)}})}})(jQuery);

(function(b,j){if(b.cleanData){var k=b.cleanData;b.cleanData=function(a){for(var c=0,d;(d=a[c])!=null;c++)b(d).triggerHandler("remove");k(a)}}else{var l=b.fn.remove;b.fn.remove=function(a,c){return this.each(function(){if(!c)if(!a||b.filter(a,[this]).length)b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")});return l.call(b(this),a,c)})}}b.widget=function(a,c,d){var e=a.split(".")[0],f;a=a.split(".")[1];f=e+"-"+a;if(!d){d=c;c=b.Widget}b.expr[":"][f]=function(h){return!!b.data(h,
a)};b[e]=b[e]||{};b[e][a]=function(h,g){arguments.length&&this._createWidget(h,g)};c=new c;c.options=b.extend(true,{},c.options);b[e][a].prototype=b.extend(true,c,{namespace:e,widgetName:a,widgetEventPrefix:b[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);b.widget.bridge(a,b[e][a])};b.widget.bridge=function(a,c){b.fn[a]=function(d){var e=typeof d==="string",f=Array.prototype.slice.call(arguments,1),h=this;d=!e&&f.length?b.extend.apply(null,[true,d].concat(f)):d;if(e&&d.charAt(0)==="_")return h;
e?this.each(function(){var g=b.data(this,a),i=g&&b.isFunction(g[d])?g[d].apply(g,f):g;if(i!==g&&i!==j){h=i;return false}}):this.each(function(){var g=b.data(this,a);g?g.option(d||{})._init():b.data(this,a,new c(d,this))});return h}};b.Widget=function(a,c){arguments.length&&this._createWidget(a,c)};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(a,c){b.data(c,this.widgetName,this);this.element=b(c);this.options=b.extend(true,{},this.options,
this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},
widget:function(){return this.element},option:function(a,c){var d=a;if(arguments.length===0)return b.extend({},this.options);if(typeof a==="string"){if(c===j)return this.options[a];d={};d[a]=c}this._setOptions(d);return this},_setOptions:function(a){var c=this;b.each(a,function(d,e){c._setOption(d,e)});return this},_setOption:function(a,c){this.options[a]=c;if(a==="disabled")this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},
enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(a,c,d){var e=this.options[a];c=b.Event(c);c.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d=d||{};if(c.originalEvent){a=b.event.props.length;for(var f;a;){f=b.event.props[--a];c[f]=c.originalEvent[f]}}this.element.trigger(c,d);return!(b.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);

(function(c){c.ui=c.ui||{};var n=/left|center|right/,o=/top|center|bottom/,t=c.fn.position,u=c.fn.offset;c.fn.position=function(b){if(!b||!b.of)return t.apply(this,arguments);b=c.extend({},b);var a=c(b.of),d=a[0],g=(b.collision||"flip").split(" "),e=b.offset?b.offset.split(" "):[0,0],h,k,j;if(d.nodeType===9){h=a.width();k=a.height();j={top:0,left:0}}else if(d.setTimeout){h=a.width();k=a.height();j={top:a.scrollTop(),left:a.scrollLeft()}}else if(d.preventDefault){b.at="left top";h=k=0;j={top:b.of.pageY,
left:b.of.pageX}}else{h=a.outerWidth();k=a.outerHeight();j=a.offset()}c.each(["my","at"],function(){var f=(b[this]||"").split(" ");if(f.length===1)f=n.test(f[0])?f.concat(["center"]):o.test(f[0])?["center"].concat(f):["center","center"];f[0]=n.test(f[0])?f[0]:"center";f[1]=o.test(f[1])?f[1]:"center";b[this]=f});if(g.length===1)g[1]=g[0];e[0]=parseInt(e[0],10)||0;if(e.length===1)e[1]=e[0];e[1]=parseInt(e[1],10)||0;if(b.at[0]==="right")j.left+=h;else if(b.at[0]==="center")j.left+=h/2;if(b.at[1]==="bottom")j.top+=
k;else if(b.at[1]==="center")j.top+=k/2;j.left+=e[0];j.top+=e[1];return this.each(function(){var f=c(this),l=f.outerWidth(),m=f.outerHeight(),p=parseInt(c.curCSS(this,"marginLeft",true))||0,q=parseInt(c.curCSS(this,"marginTop",true))||0,v=l+p+(parseInt(c.curCSS(this,"marginRight",true))||0),w=m+q+(parseInt(c.curCSS(this,"marginBottom",true))||0),i=c.extend({},j),r;if(b.my[0]==="right")i.left-=l;else if(b.my[0]==="center")i.left-=l/2;if(b.my[1]==="bottom")i.top-=m;else if(b.my[1]==="center")i.top-=
m/2;i.left=Math.round(i.left);i.top=Math.round(i.top);r={left:i.left-p,top:i.top-q};c.each(["left","top"],function(s,x){c.ui.position[g[s]]&&c.ui.position[g[s]][x](i,{targetWidth:h,targetHeight:k,elemWidth:l,elemHeight:m,collisionPosition:r,collisionWidth:v,collisionHeight:w,offset:e,my:b.my,at:b.at})});c.fn.bgiframe&&f.bgiframe();f.offset(c.extend(i,{using:b.using}))})};c.ui.position={fit:{left:function(b,a){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();b.left=
d>0?b.left-d:Math.max(b.left-a.collisionPosition.left,b.left)},top:function(b,a){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();b.top=d>0?b.top-d:Math.max(b.top-a.collisionPosition.top,b.top)}},flip:{left:function(b,a){if(a.at[0]!=="center"){var d=c(window);d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();var g=a.my[0]==="left"?-a.elemWidth:a.my[0]==="right"?a.elemWidth:0,e=a.at[0]==="left"?a.targetWidth:-a.targetWidth,h=-2*a.offset[0];b.left+=
a.collisionPosition.left<0?g+e+h:d>0?g+e+h:0}},top:function(b,a){if(a.at[1]!=="center"){var d=c(window);d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();var g=a.my[1]==="top"?-a.elemHeight:a.my[1]==="bottom"?a.elemHeight:0,e=a.at[1]==="top"?a.targetHeight:-a.targetHeight,h=-2*a.offset[1];b.top+=a.collisionPosition.top<0?g+e+h:d>0?g+e+h:0}}}};if(!c.offset.setOffset){c.offset.setOffset=function(b,a){if(/static/.test(c.curCSS(b,"position")))b.style.position="relative";var d=c(b),
g=d.offset(),e=parseInt(c.curCSS(b,"top",true),10)||0,h=parseInt(c.curCSS(b,"left",true),10)||0;g={top:a.top-g.top+e,left:a.left-g.left+h};"using"in a?a.using.call(b,g):d.css(g)};c.fn.offset=function(b){var a=this[0];if(!a||!a.ownerDocument)return null;if(b)return this.each(function(){c.offset.setOffset(this,b)});return u.call(this)}}})(jQuery);

(function(d){d.widget("ui.autocomplete",{options:{appendTo:"body",delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var a=this,b=this.element[0].ownerDocument,f;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(!(a.options.disabled||a.element.attr("readonly"))){f=false;var e=d.ui.keyCode;
switch(c.keyCode){case e.PAGE_UP:a._move("previousPage",c);break;case e.PAGE_DOWN:a._move("nextPage",c);break;case e.UP:a._move("previous",c);c.preventDefault();break;case e.DOWN:a._move("next",c);c.preventDefault();break;case e.ENTER:case e.NUMPAD_ENTER:if(a.menu.active){f=true;c.preventDefault()}case e.TAB:if(!a.menu.active)return;a.menu.select(c);break;case e.ESCAPE:a.element.val(a.term);a.close(c);break;default:clearTimeout(a.searching);a.searching=setTimeout(function(){if(a.term!=a.element.val()){a.selectedItem=
null;a.search(null,c)}},a.options.delay);break}}}).bind("keypress.autocomplete",function(c){if(f){f=false;c.preventDefault()}}).bind("focus.autocomplete",function(){if(!a.options.disabled){a.selectedItem=null;a.previous=a.element.val()}}).bind("blur.autocomplete",function(c){if(!a.options.disabled){clearTimeout(a.searching);a.closing=setTimeout(function(){a.close(c);a._change(c)},150)}});this._initSource();this.response=function(){return a._response.apply(a,arguments)};this.menu=d("<ul></ul>").addClass("ui-autocomplete").appendTo(d(this.options.appendTo||
"body",b)[0]).mousedown(function(c){var e=a.menu.element[0];d(c.target).closest(".ui-menu-item").length||setTimeout(function(){d(document).one("mousedown",function(g){g.target!==a.element[0]&&g.target!==e&&!d.ui.contains(e,g.target)&&a.close()})},1);setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(c,e){var g=e.item.data("item.autocomplete");false!==a._trigger("focus",c,{item:g})&&/^key/.test(c.originalEvent.type)&&a.element.val(g.value)},selected:function(c,e){var g=e.item.data("item.autocomplete"),
h=a.previous;if(a.element[0]!==b.activeElement){a.element.focus();a.previous=h;setTimeout(function(){a.previous=h;a.selectedItem=g},1)}false!==a._trigger("select",c,{item:g})&&a.element.val(g.value);a.term=a.element.val();a.close(c);a.selectedItem=g},blur:function(){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");d.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");
this.menu.element.remove();d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);a==="source"&&this._initSource();if(a==="appendTo")this.menu.element.appendTo(d(b||"body",this.element[0].ownerDocument)[0]);a==="disabled"&&b&&this.xhr&&this.xhr.abort()},_initSource:function(){var a=this,b,f;if(d.isArray(this.options.source)){b=this.options.source;this.source=function(c,e){e(d.ui.autocomplete.filter(b,c.term))}}else if(typeof this.options.source===
"string"){f=this.options.source;this.source=function(c,e){a.xhr&&a.xhr.abort();a.xhr=d.ajax({url:f,data:c,dataType:"json",success:function(g,h,i){i===a.xhr&&e(g);a.xhr=null},error:function(g){g===a.xhr&&e([]);a.xhr=null}})}}else this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)!==false)return this._search(a)},_search:function(a){this.pending++;
this.element.addClass("ui-autocomplete-loading");this.source({term:a},this.response)},_response:function(a){if(!this.options.disabled&&a&&a.length){a=this._normalize(a);this._suggest(a);this._trigger("open")}else this.close();this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",a)}},_change:function(a){this.previous!==
this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){if(a.length&&a[0].label&&a[0].value)return a;return d.map(a,function(b){if(typeof b==="string")return{label:b,value:b};return d.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(a){var b=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(b,a);this.menu.deactivate();this.menu.refresh();b.show();this._resizeMenu();b.position(d.extend({of:this.element},this.options.position))},
_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(a,b){var f=this;d.each(b,function(c,e){f._renderItem(a,e)})},_renderItem:function(a,b){return d("<li></li>").data("item.autocomplete",b).append(d("<a></a>").text(b.label)).appendTo(a)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term);this.menu.deactivate()}else this.menu[a](b);
else this.search(null,b)},widget:function(){return this.menu.element}});d.extend(d.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(a,b){var f=RegExp(d.ui.autocomplete.escapeRegex(b),"i");return d.grep(a,function(c){return f.test(c.label||c.value||c)})}})})(jQuery);
(function(d){d.widget("ui.menu",{_create:function(){var a=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(b){if(d(b.target).closest(".ui-menu-item a").length){b.preventDefault();a.select(b)}});this.refresh()},refresh:function(){var a=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(b){a.activate(b,d(this).parent())}).mouseleave(function(){a.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var f=b.offset().top-this.element.offset().top,c=this.element.attr("scrollTop"),e=this.element.height();if(f<0)this.element.attr("scrollTop",c+f);else f>=e&&this.element.attr("scrollTop",c+f-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",a,{item:b})},
deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null}},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,f){if(this.active){a=this.active[a+"All"](".ui-menu-item").eq(0);
a.length?this.activate(f,a):this.activate(f,this.element.children(b))}else this.activate(f,this.element.children(b))},nextPage:function(a){if(this.hasScroll())if(!this.active||this.last())this.activate(a,this.element.children(".ui-menu-item:first"));else{var b=this.active.offset().top,f=this.element.height(),c=this.element.children(".ui-menu-item").filter(function(){var e=d(this).offset().top-b-f+d(this).height();return e<10&&e>-10});c.length||(c=this.element.children(".ui-menu-item:last"));this.activate(a,
c)}else this.activate(a,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(a){if(this.hasScroll())if(!this.active||this.first())this.activate(a,this.element.children(".ui-menu-item:last"));else{var b=this.active.offset().top,f=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-b+f-d(this).height();return c<10&&c>-10});result.length||(result=this.element.children(".ui-menu-item:first"));
this.activate(a,result)}else this.activate(a,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})})(jQuery);

var jimAuld=window.jimAuld||{};jimAuld.utils=jimAuld.utils||{};jimAuld.utils.cookies={get:function(e){var c,b,a,d;c=document.cookie.indexOf(e+"=");if(c<0){return null}b=document.cookie.indexOf(e+"=")+e.length+1;a=document.cookie.indexOf(";",b);if(a==-1){a=document.cookie.length}d=document.cookie.substring(b,a);d=unescape(d);if(d==""){return null}return d},set:function(j,l,g,n,d,a,f){var e,h,m,c,k,i,b;if(!g||typeof g!="number"||parseInt(g)=="NaN"){e=""}else{h=new Date();g=parseInt(g);if(!(f)){g=g*60*60}h.setTime(h.getTime()+g*1000);m=h.toGMTString();e="; expires="+m}c="; path=";(!n||n=="")?c+="/":c+=n;k="; domain=";(!d||d=="")?k+=window.location.hostname.replace(/www\./,""):k+=d;(a===true)?i="; secure":i="";l=escape(l);b=j+"="+l+e+c+k+i;document.cookie=b},del:function(c,b,a){(!b||!b.length)?b="":b=b;(!a||!a.length)?a="":a=a;jimAuld.utils.cookies.set(c,"",-8760,b,a)},test:function(){jimAuld.utils.cookies.set("cT","acc");var a=jimAuld.utils.cookies.get("cT");if(a=="acc"){jimAuld.utils.cookies.del("cT");testStatus=true}else{testStatus=false}return testStatus}};var HuffCookies=jimAuld.utils.cookies;HuffCookies.getCookiePrefix=function(){var a=location.hostname;if(HPConfig.site){a=HPConfig.huffsite}var b="";b=(""==location.port)?"80":location.port;if((/\.beta\./.test(a))||(/\.beta2\./.test(a))){return"beta"+b+"_"}else{return""}};HuffCookies.getUserName=function(){var a=this.get(this.getCookiePrefix()+"huffpost_user");if(a){a=HPUtil.utf8_decode(a)}return a};HuffCookies.getUserGuid=function(){return this.get(this.getCookiePrefix()+"huffpost_user_guid")};HuffCookies.getLastLogin=function(){return};HuffCookies.getSNPstatus=function(){if(this.getUserName()){return 1}else{return 0}};HuffCookies.getUserInfluence=function(){HPUtil.removeEmptyInfluence();var b=this.get(this.getCookiePrefix()+"huffpost_influence_"+HuffCookies.getUserId());if(!b||b==""){b=HuffCookies.userInfluence;HPUtil.setInfluenceCookie(JSON.stringify(b))}else{b=JSON.parse(b);var a=new Date();a.setDate(a.getDate()-30);a=Date.parse(a.toString());b.bages=HuffCookies.getLevels();if(b.blogged.check_date<a){b.blogged.value=0;b.blogged.check_date=Date.parse(new Date().toString())}if(b.emailed.check_date<a){b.emailed.value=0;b.emailed.check_date=Date.parse(new Date().toString())}if(b.shared.check_date<a){b.shared.value=0;b.shared.check_date=Date.parse(new Date().toString())}if(b.commented.check_date<a){b.commented.value=0;b.commented.check_date=Date.parse(new Date().toString())}}return b};HuffCookies.setCookie=function(d,c,a){var b=this.getCookiePrefix();if(!a){a=336}else{if(a==-1){a=0}}huff.use("conf",function(e){e.get("cookie/domain",function(g){var f=g||HuffCookies.domainCookie();HuffCookies.set(b+d,c,a,"/","."+f)})});return true};HuffCookies.getCookie=function(a){return this.get(HuffCookies.getCookiePrefix()+a)};HuffCookies.domainCookie=function(){var a=location.hostname;a=a.replace(/www\./,"");return a};HuffCookies.getUserId=function(){return this.get(this.getCookiePrefix()+"huffpost_user_id")};HuffCookies.getLevels=function(){return this.get(this.getCookiePrefix()+"huffpost_levels")};HuffCookies.destroyCookie=function(a){var b=this.getCookiePrefix();return this.del(b+a,"/","."+HuffCookies.domainCookie())};HuffCookies.userInfluence={commented:{value:0,check_date:Date.parse(new Date().toString())},blogged:{value:0,check_date:Date.parse(new Date().toString())},shared:{value:0,check_date:Date.parse(new Date().toString())},emailed:{value:0,check_date:Date.parse(new Date().toString())},bages:HuffCookies.getLevels()};HuffCookies.userPrefs={pending:false,subvalues:{facebook:0,twitter:1,read_tracking:2,gfc:3,yahoo:4,google:5,linkedin:6,aol:7,winlive:8},subvalues_abbr:{0:"fb",1:"tw",2:"rt",3:"gfc",4:"yh",5:"gfc",6:"linkedin",7:"aol",8:"winlive"},charmap:{facebook:"F",twitter:"T",read_tracking:"R",gfc:"G",yahoo:"Y",google:"L",registered:"H",anonymous:"A"},cookie_name:"huffpost_prefs",get:function(a){if(!HuffCookies.getUserId()){return false}if(this.pending){return null}var b=this._getFromOffset(this.subvalues[a]);if(b=="y"){return true}else{if(b=="n"){return false}}return null},to_string:function(b){var a="";for(var c in this.subvalues){if(this.get(c+"")){if(b){a+=this.charmap[c+""]}else{if(a){a+=","}a+=c}}}return a},_getFromOffset:function(b){var a=this._getPrefsValues();if(a[b]&&(a[b]=="y"||a[b]=="n")){return a[b]}else{this.pending=true;jQuery.ajax({type:"POST",url:"/users/login/reauthenticate.php",success:function(){huff.log("Reauthenticated");HuffCookies.userPrefs.pending=false},error:function(){huff.log("Error reauthenticating");HuffCookies.userPrefs.pending=false}});return null}},_getPrefsValues:function(){var a=HuffCookies.getCookie(this.cookie_name);this.values=(a&&a.split(""))||[];return this.values}};HuffPrefs=HuffCookies.userPrefs;HuffCookies.getCurrentUserPhotoUrl=function(){var d=HuffCookies.getUserId()||false;if(!d){return false}var c="http://s.huffpost.com/images/profile/user_placeholder.gif";var b=HuffCookies.getCookie("huffpost_photo_mode")||false;switch(b){case"facebook":var e=HuffCookies.getCookie("fb_uid")||false;if(e){c="http://graph.facebook.com/"+e+"/picture?type=square"}break;case"twitter":case"yahoo":case"google":case"linkedin":case"aol":case"winlive":c="http://"+HPConfig.display_domain+"/"+b+"_profile_img/"+d+".png";break;case"huffpo":c="http://"+HPConfig.display_domain+"/profiles/"+d+".png";break;case"huffpo2":c="http://"+HPConfig.display_domain+"/profiles/"+d+"-2.png";break}if(b=="default"||!b){var a=HuffCookies.getCookie("huffpost_bigphoto")||HuffCookies.getCookie("huffpost_smallphoto")||false;if(a){var c=a}}return c};
var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
var HPTrack={async:false,pageTracker:null,prod_account:"UA-71081-1",dev_account:"UA-71081-7",trackedShares:[],trackedVideos:{},custom_vars:{vertical:{scope:3,slot:1,display:"Vertical"},blog:{scope:3,slot:2,display:"Blog"},news:{scope:3,slot:2,display:"News"},page:{scope:3,slot:2,display:"Page"},tpage:{scope:3,slot:2,display:"TPage"},user:{scope:1,slot:3,display:"User"},joined:{scope:1,slot:4,display:"JoinedOn"},special:{scope:1,slot:5,display:"Special"}},Nielsen:function(a){var c=new Image(1,1);c.onerror=c.onload=function(){c.onerror=c.onload=null};var b="ts=compact";if(a&&a=="ajax"){b="c0=usergen,1"}c.src=["//secure-us.imrworldwide.com/cgi-bin/m?ci=us-703240h&cg=0&cc=1&si=",escape(window.location.href),"&rp=",escape(document.referrer),"&",b,"&rnd=",(new Date()).getTime()].join("")},Services:{options:{},setOptions:function(a,b){if(!b){return}HPTrack.Services.options[a]=b},COMMON:["GA","Quantcast","Comscore","DataLayer","Omniture","Nielsen"],trackTo:function(b,c){if(!b){return false}var e={Quantcast:function(i){var h=HPTrack.Services;if(!h.qc_loaded){window._qevents=window._qevents||[];h.qc_loaded=true;(function(){var k=document.createElement("script");k.src=(document.location.protocol=="https:"?"https://secure":"http://edge")+".quantserve.com/quant.js";k.async=true;k.type="text/javascript";var j=document.getElementsByTagName("script")[0];j.parentNode.insertBefore(k,j)})()}var g=h.options.Quantcast||{};if(i.ajax){g.event="refresh"}_qevents.push(g)},Comscore:function(g){if(window.COMSCORE){COMSCORE.beacon(comscore_data);if(COMSCORE.newBeacon){COMSCORE.newBeacon()}}},Omniture:function(g){window.s_265&&s_265.t()},Nielsen:function(h){var g=h.ajax?"ajax":false;HPTrack.Nielsen(g)},GA:function(g){HPTrack.trackPageview()},DataLayer:function(g){if(window.bN&&window.bN_cfg){g.gallery&&bN.set("dL_sDpt","gallery");bN.view()}}};c=c||{};for(var d=0,a=b.length;d<a;d++){var f=b[d];if(e[f]){e[f](c)}}}},getTracker:function(d){var c=this.dev_account;!huff.beta&&(c=d||this.prod_account);if(this.async){_gaq.push(["_setAccount",c])}else{if(typeof _gat!=="undefined"){this.pageTracker=_gat._getTracker(c)}}if(typeof(HuffPrefs)!=="undefined"&&HuffPrefs.to_string){var a="A";if(HuffCookies.getUserId()){var b=HuffPrefs.to_string(true);a="H"+b}else{this.setCustomVar("joined","0")}this.setCustomVar("user",a)}if(window.SiteMode){this.setCustomVar("special","sitemode")}},setCustomVar:function(c,b){var a=this.custom_vars[c+""];if(!(a&&b)){return}if(b.length&&b.length>8){b=b.substr(0,8)}if(this.async){_gaq.push(["_setCustomVar",a.slot,a.display,b,a.scope])}else{if(this.pageTracker){this.pageTracker._setCustomVar(a.slot,a.display,b,a.scope)}}},trackPageview:function(a){if(this.async){var b=["_trackPageview"];a&&b.push(a);_gaq.push(b);huff.use("cookies",function(f){var e=f.get("__utmc")||0;if(e){e=parseInt(e.substr(0,2))}var d=false;if(!a&&window.SiteMode){d="yes"}else{if(!a&&(e==22)){d="no"}}d&&_gaq.push(["_trackPageview","/t/i/sitemode/"+d])})}else{!this.pageTracker&&this.getTracker();this.pageTracker._trackPageview(a||undefined)}},trackEvent:function(b,d,a,c){if(this.async){_gaq.push(["_trackEvent",b,d,a,c])}else{if(this.pageTracker!=null){this.pageTracker._trackEvent(b,d,a,c)}}try{if(-1===jQuery.inArray(a,Badges.trackedShares)&&("Reddit"===a||"Stumbleupon"===a)){if("Stumbleupon"===a){jQuery.post("/include/social_track.php",{t:"stumble",entry:HPUtil.GetEntryID(window.location.href),banners:HPAds.get_banners_str()})}HPTrack.trackedShares.push(a);bN.set("dL_shareType",a.toLowerCase(),1);bN.set("dL_shareURL",escape(window.location.href),1);bN.ping("aol-share")}}catch(f){}},trackSocial:function(d,a,b,c){this.async&&_gaq.push(["_trackSocial",d,a,b,c])},navigateAfterTrack:function(f,b,a,d){var c=(typeof d=="undefined")?100:d;if(f.ctrlKey){window.open(b,"_blank")}else{if(a){window.open(b,a)}else{setTimeout(function(){document.location=b},c)}}}};HPTrack.Module=function(c,a){var b=HPTrack.Module,d;c=b.Impressions.clean(c);if(d=b.modules[c]){return d}b.modules[c]={huff_tracker:1,impression:function(e){if(e){e="-"+b.Impressions.clean(e)}else{e=""}b.Impressions.queue(c+e);return},click:function(e){return this.event("Click",e)},event:function(f,e){HPTrack.trackEvent(a,f,e);return},trackLink:function(h,f){var g=h.currentTarget;if(!(g&&g.tagName.toLowerCase()=="a")){return}h.preventDefault();this.click(f);HPTrack.navigateAfterTrack(h,g.href,g.target)}};return b.modules[c]};HPTrack.Module.modules={};HPTrack.Module.Impressions={to_track:[],to_track_separate:[],fired:false,MAX_LENGTH:712,PREFIX:"/t/m/",clean:function(a){return a.replace(/[ \-]/g,"_").toLowerCase()},queueSingle:function(a){this.queue(a,true)},queue:function(a,b){if(a.length>this.MAX_LENGTH/3){return}a=this.clean(a);if(b){this.to_track_separate.push(a)}else{this.to_track.push(a)}if(this.fired){this.fire()}},sendRequest:function(a){a=a.substr(0,a.length-1);HPTrack.trackPageview(a)},fire:function(){this.fired=true;var f=this.to_track;var c=this.to_track_separate;var g=this.PREFIX;if(!(f.length||c.length)){return}if(f.length){var b=g;for(var e=0,a=f.length;e<a;e++){var d=b+f[e]+",";if(d.length>this.MAX_LENGTH){this.sendRequest(b);this.to_track=f.slice(e);this.fire();return}else{b=d}}this.sendRequest(b);this.to_track=[]}var a=c.length;if(!a){return}for(var e=0;e<a;e++){this.sendRequest(g+c[e]+",")}this.to_track_separate=[]}};HPTrack.Module.getTrackingPrefix=function(a){var c="";var d=Dom.getAncestorByClassName(a,"module_section");if(d){var b=d.className.match(/track_childs_([^ ]+)/);if(b){c=b[1]+" - "}}return c};HPTrack.Module.DelegatedHandler=function(a,b){return function(h){var d=HPTrack;var i=E.getTarget(h);if(i&&(i.tagName=="IMG"||i.tagName=="SPAN")){i=i.parentNode||false}if(i&&i.tagName=="A"){var c="";var k="";if(i.className){var m=i.className;if(m.indexOf("TRACKED")>=0){return}var g=m.match(/track_([^_]+)_?([^ ]*)/);if(g){var c=g[1];if(g[2]){k=g[2]}}i.className+=" TRACKED";k=d.Module.getTrackingPrefix(i)+k}var f={page:"Clickthrough",lightbox:"Lightbox Open",action:"Action"};if(!f[c+""]){return}var j=false;if(c=="page"&&(!(i.target&&(!window.name||window.name!=i.target)))){j=true;E.preventDefault(h)}var l=f[c+""];if(a.huff_tracker){a.event(l,k)}else{a.call((b||this),l,k)}if(j){d.navigateAfterTrack(h,i.href)}}}};HPTrack.Vid={DL:function(b){if(typeof(bN)=="undefined"){return}var a={};a.d=b;a.t=(new Date()).getTime();a.q=-1;HPTrack.trackedVideos[b.videoId]=a;bN.set("vidId",a.d.videoId,1);bN.set("vidTime",a.t,1);bN.set("vidAdViewed",0,1);bN.ping("video5min")},TC:function(c){if(typeof(bN)=="undefined"){return}var b;if(typeof(b=HPTrack.trackedVideos[c.videoId])=="undefined"){return}if(typeof(c.playheadTime)=="undefined"||typeof(b.d)=="undefined"||b.d.duration<=0){return}var a=Math.floor(c.playheadTime/b.d.duration*4)*25;if(b.q<a){b.q=a;bN.set("vidId",c.videoId,1);bN.set("vidTime",b.t,1);bN.set("vidAdViewed",1,1);bN.set("vidState",a,1);bN.ping("video5min")}}};HPTrack.TwitterEvents={__initialized:false,__placement:document.title,__network:"twitter",track:function(){if(this.__initialized){return}var a=this;twttr.ready(function(b){b.events.bind("click",a.__trackEvent);b.events.bind("tweet",a.__trackEvent);b.events.bind("retweet",a.__trackEvent);b.events.bind("favorite",a.__trackEvent);b.events.bind("follow",a.__trackEvent)});this.__initialized=true},__trackEvent:function(d){if(!d){return}var f=HPTrack.TwitterEvents,b=f.__getGATarget(d),a=d.hasOwnProperty("region")?d.region:null,c=b;a&&(c="["+a+"] - "+b);HPTrack.trackSocial(f.__network,d.type,c)},__getGATarget:function(f){var d=HPTrack.TwitterEvents.__placement,c=jQuery(f.target),b=c.parent(),a=b.data("placement");return a?a:d}};
var HuffPoUtil={entry_comments_for_ajax:[],commenter_name:"",images_preload:[],vote_results:{},vote_results_text:{},url_hashes:[],body_element:document.documentElement?document.documentElement:document.body,uniq_counter:0,init:function(){this.trackLinks();E.on("top_nav","click",function(g){var d=E.getTarget(g),e="Click";if(!(d&&d.tagName&&d.tagName=="A")){return}var c="Top Nav";if(d.className&&d.className.match(/subnav_link/)){if(HPConfig&&HPConfig.local_nav){c="Local Nav"}else{if(HPConfig&&HPConfig.vertical_nav){c="Vertical Nav"}}}else{if(!(d.parentNode.className&&d.parentNode.className.match(/(^n_| n_)/))){return}}E.preventDefault(g);if(HPConfig&&HPConfig.current_vertical_name){e+=" from "+HPConfig.current_vertical_name}var f=d.title||d.innerHTML;var b=HPTrack;b.trackEvent(c,e,f);b.navigateAfterTrack(g,d.href)});if(this.GetEntryID()){E.on("chicklets","click",function(f){var d=f.target||f.srcElement;if(!(d&&d.target&&d.target=="chicklet"&&d.title)){return true}E.preventDefault(f);var g="/"+_("Share on")+" (.*)/";var b=new RegExp(g);var c=b.test(d.title);if(c[1]){HPTrack.trackEvent("Chicklets","Click",c[1])}window.open(d.href,"chicklet","width=642,height=436,left=0,top=0,resizable,scrollbars=yes")})}if(window.SiteMode){SiteMode.init()}if("undefined"!==typeof HuffCookies&&HuffCookies.getUserName()&&jQuery("#header_connect_button").length){jQuery("#header_connect_button").css("display","none")}},trackLinks:function(){E.addListener(window.document,"click",function(l){var m=E.getTarget(l);if(!(m.tagName&&m.tagName.toUpperCase()=="A")){m=m.parentNode||m}if(!(m.tagName&&m.tagName.toUpperCase()=="A")){return}var f=m.href;if(m.rel=="popup"){E.stopEvent(l);var r=430;var c=450;if(m.className=="commentpop"){r=430}if(m.className=="biolink"){c=450}var o=Math.ceil(screen.height/2)-Math.ceil(r/2);var g=Math.ceil(screen.width/2)-Math.ceil(c/2);window.open(m.href,"bio","toolbar=0,scrollbars=1,location=0,statusbar=1,menubar=1,resizable=1,width="+c+",height="+r+",top="+o+",left="+g);return false}if(!f||(f.indexOf(window.location.href)==0)||(f.indexOf("javascript:")>-1)){return}if(f.indexOf("ffingtonpost.com")>-1&&typeof HPTrack!="undefined"){if(m.onclick){return}if(l.ctrlKey){return}var d=HPTrack._furthest_scrolled||0;var q=Dom.getDocumentHeight();var b=Dom.getViewportHeight();var n=d+b;var k=Math.round((n/q)*100);if(k>100){k=100}var j=125;var h="";if(!d){h="Left w/o scrolling"}else{if(n>q-j){h="Left after scrolling to bottom"}else{h="Left w/o scrolling to bottom"}}var p="non-b-page";if(HPUtil.GetEntryID()){p="b-page"}HPTrack.trackEvent("Scrolling",h,p,k);return}else{if(typeof HPTrack!="undefined"){HPTrack.trackPageview("/out/?u="+f)}}})},guid:function(){this.uniq_counter++;return"HP_uniq_"+this.uniq_counter},isArray:function(b){return Object.prototype.toString.call(b)==="[object Array]"},bind:function(f,e,d,b,c){if(!c&&b){c=b}var f=jQuery(f);f.bind(e,b,function(){d.apply(c,arguments)});return f},getTarget:function(b){var d=b.target||b.srcElement;try{if(d&&3==d.nodeType){return d.parentNode}}catch(c){}return d},getRegion:function(c){var b={top:0,left:0,bottom:0,right:0};c=jQuery(c);if(!c.length){return b}var d=c.offset();return{top:d.top,left:d.left,bottom:d.top+c.height(),right:d.left+c.width()}},onAvailable:function(e,h,b,f){this.__onAvailable_stack=this.__onAvailable_stack||{};var j=e+HuffPoUtil.guid();var g=this;var c=function(){if(jQuery(e).length>0||g.__onAvailable_stack[j].counter>40){g.__onAvailable_stack[j].cancel&&g.__onAvailable_stack[j].cancel();return true}g.__onAvailable_stack[j].counter++;return false};var d=function(){h.apply(b,[f])};this.__onAvailable_stack[j]={counter:0};var k=HuffPoUtil.WaitForCondition(d,500,c);this.__onAvailable_stack[j].cancel=function(){clearInterval(k)}},EvalScript:function(b){huff.use("util/util",function(c){c.evalScript(b)})},getNode:function(b){var c=[];jQuery(b).each(function(){c.push(this)});if(c.length>1){return c}if(c.length==1){return c[0]}return false},insertAfter:function(c,d,b){if(b.nextSibling){c.insertBefore(d,b.nextSibling)}else{c.appendChild(d)}},appendScript:function(c){var d=document.getElementsByTagName("head")[0];var b=document.createElement("script");b.type="text/javascript";b.src=c;d.appendChild(b)},getReadableTime:function(j,m){if(!m){m=2}var b=["1-second","60-minute","3600-hour","86400-day","604800-week","2592000-month","31536000-year"];var k=new Date;var l=k.getTime();var c=parseInt(l/1000);var g=c-j;var h=0;var e="";for(var f=7;f--;){data=b[f].split("-");key=data[0];value=data[1];if(g>=key&&value!="second"){var n="";e+=""+Math.floor(g/key).toString();if((Math.floor(g/key)!=1)){n="s"}e+=" "+value+n;h++;g=g%key;if(h>m-1||g==0){break}else{if(value!="minute"){e+=", "}}}}return e},AddStringToQueryString:function(c,b){var e=false,d=(new RegExp(/(#.*)/)).exec(c);c=d?c.replace(d[1],""):c;if(-1===c.indexOf("?")){e=true;c+="?"}c+=(e?"":"&")+b+(d?d[1]:"");return c},ShowNearElement:function(d,e,c,h,b,g){var f=undefined===g?Dom.getXY(e):g;h=h||[0,0];switch(d){case"right-middle":f[0]+=e.offsetWidth;f[1]+=e.offsetHeight/2;break;case"right-top":f[0]+=e.offsetWidth;break}if(b){b()}c.style.top=parseInt(parseInt(f[1])+h[1])+"px";c.style.left=parseInt(parseInt(f[0])+h[0])+"px";c.style.display="block"},getUrlVar:function(e){if(!this.url_hashes.length){var d;var b=window.location.href.slice(window.location.href.indexOf("?")+1).replace(/\#.*$/,"").split("&");for(var c=0;c<b.length;c++){d=b[c].split("=");this.url_hashes[d[0]]=d[1]}}if(typeof(this.url_hashes[e])=="undefined"){return null}else{return this.url_hashes[e]}},ScrollTo:function(b,d,c){b=typeof(b)=="string"?Dom.get(b):b;if(!b){return}if(typeof(c)=="undefined"||c==null){c=HuffPoUtil.body_element}if(typeof(d)=="undefined"){d=0.5}var e=jQuery("#"+b).offset();jQuery("#"+c).scrollTop(e.top)},CopyListeners:function(e,d){var c=E.getListeners(e);if(c){for(var b=0;b<c.length;++b){E.addListener(d,c[b].type,c[b].fn,c[b].obj)}}},AddSlashes:function(d){var f="",e="";for(var b=0;b<d.length;++b){switch(d.charAt(b)){case"<":f+="\\x3C";break;case">":f+="\\x3E";break;case"'":f+="\\'";break;case"\\":f+="\\\\";break;case'"':f+='\\"';break;case"\n":f+="\\n";break;case"\r":f+="\\r";break;default:f+=d.charAt(b);break}}return f},getHostName:function(){var b=document.location.port;if(!b||b==""||b==80){b=""}else{b=":"+b}return"http://"+document.location.hostname+b},GetAmazonS3Location:function(){return -1!==location.href.toLowerCase().indexOf("beta.huffingtonpost.com")?"dev.assets.huffingtonpost.com":"i.huffpost.com"},LinkifyTextLinks:function(b){return b.replace(/[a-z]+:\/\/[a-z0-9-_]+\.[a-z0-9-_:~%&\?\/.=]+[^:\.,\)\s*$]/ig,function(c){return'<a href="'+c+'">'+((c.length>25)?c.substr(0,24)+"...":c)+"</a>"})},GetEntryID:function(c){if("object"===typeof HPConfig&&HPConfig.entry_id){return HPConfig.entry_id}var b=null;if(!c){c=document.location.href}if((b=(new RegExp(/.*_(\d+)\.html/)).exec(c))){return b[1]}return false},isWWW:function(b){if(!b){b=window.location.href+""}if(b.indexOf("www")==7){return true}return false},hide:function(b){if(typeof(b)==="string"){b=document.getElementById(b)}if(!b){return}b.style.display="none"},show:function(c,b){if(typeof(c)==="string"){c=document.getElementById(c)}if(!c){return}c.style.display=b||"block"},show_inline:function(b){if(typeof(b)==="string"){var b=document.getElementById(b)}if(!b){return}b.style.display="inline"},trim:function(c,b){return this.ltrim(this.rtrim(c,b),b)},ltrim:function(c,b){b=b||"\\s";return c.replace(new RegExp("^["+b+"]+","g"),"")},rtrim:function(c,b){b=b||"\\s";return c.replace(new RegExp("["+b+"]+$","g"),"")},toggleVis:function(b){Dom.batch(b,function(c){if(c.style.display=="none"){c.style.display="block"}else{c.style.display="none"}})},toggleReply:function(b){Dom.batch("reply_"+b,function(c){if(c.style.display=="none"){c.style.display="block"}else{c.style.display="none"}})},toggleTopPosts:function(b){if(!Dom.hasClass(b,"active")){HuffPoUtil.toggleVis(["top_news_links","top_blog_links"]);HuffPoUtil.tradeClass("tab_top_news","tab_top_blogs","active")}},tradeClass:function(c,b,d){var c=jQuery("#"+c);var b=jQuery("#"+b);if(c.hasClass(d)){b.addClass(d);c.removeClass(d)}else{c.addClass(d);b.removeClass(d)}},WaitForCondition:function(c,b,e){if(!e.apply(this)){var d=this;return setTimeout(function(){HPUtil.WaitForCondition.apply(d,[c,b,e])},b)}else{c.apply(this)}},AnimRequestFinished:function(c,d,b){if(!c){return}d=d||"#F9E801";b=b||"#FFFFFF";for(i=0;i<c.length;i++){jQuery(c[i]).css("background-color",d);jQuery(c[i]).animate({backgroundColor:b},{duration:1000,complete:function(){jQuery(this).css("background-color","transparent")}})}},AnimPagination:function(c){if(undefined===c){c=[]}if(0==c.length){return}var d=[];for(var b=0;b<c.length;++b){d[d.length]=new YAHOO.util.Anim(c[b],{opacity:{from:0.2,to:1}});if(HPBrowser.isIEOld()){d[d.length-1].onComplete.subscribe(function(){Dom.setStyle(this.getEl(),"zoom","normal")})}d[d.length-1].animate()}},getCookie:function(d){var f=d+"=";var h=document.cookie;var b="";var e=h.indexOf(f);if(e==-1){return b}var g=h.indexOf(";",e+f.length);if(g==-1){g=h.length}return unescape(h.substring(e+f.length,g))},loadAndRun:function(c,e,d,b){LazyLoad.load(c,e,d,b);return false},trackerImg:function(c,d){c=c.replace(/%n/,ord);if(d){var b=new Image();b.src=c;b.width=b.height=1;b.style.display="none";try{d.appendChild(b)}catch(f){return}return}document.write('<img src="'+c+'" width="1" height="1" style="display:none"/>')},scriptTag:function(b,c){if(document.createElement&&((script=document.createElement("script")))){script.type="text/javascript";script.src=b;if(c){}else{var d=document.getElementsByTagName("head");if(d[0]){c=d[0]}}try{c.appendChild(script);return}catch(f){}}document.write('<script type="text/javascript" src="'+b+'"><\/script>')},checkEmail:function(b){if(b&&((b.indexOf("@")>0)&&(b.indexOf(".")>0))&&(b.indexOf(".")!=b.length-1)){return true}return false},getDisplayName:function(d){if("undefined"===typeof d||!d){d=HuffCookies.getUserName()||""}var b=d.replace(/[\+_]/g," ");var c=b.replace("hp blogger ","");return c},flash:function(c,b){var d=b||"#ff0000";jQuery(c).css("background-color",d).animate({opacity:"-=0.5"},300,function(){jQuery(this).css("background-color","#FFFFFF");jQuery(this).css("opacity","1")})},yellowFlash:function(b){this.flash(b,"#F9E801")},enforceTextAreaLimit:function(c,b){if(!b||!b.chars){b={chars:100}}if(this.value.length>b.chars){HuffPoUtil.flash(this);this.value=this.value.substring(0,b.chars);this.scrollTop=this.scrollHeight}},enforceTextAreaLimit_v2:function(c){var b=100;if(c.data&&c.data.chars){b=c.data.chars}if(jQuery(this).attr("value").length>b){HuffPoUtil.flash(this);this.value=this.value.substring(0,b);this.scrollTop=this.scrollHeight}return},initLogout:function(){if((typeof HuffCookies=="undefined")||!(HPUtil.isWWW()||HPConfig.site)){return}jQuery("#wendybird_user_name").html("");jQuery("#wendybird_user").hide();jQuery("#not_logged_user").show();return},initUserNavStatus:function(b){huff.use("util/user",function(c){c.updateAuthStatus()});return},reinit:function(){HPUtil.initUserNavStatus()},isIE6:function(){return HPBrowser.isIE6()},getCorrectVideoContentForIE6:function(b){return b},onPageReady:function(b){jQuery(window).ready(b)},getQueryVariables:function(){var d=window.location.search.substring(1);var e=d.split("&");var c=new Array();for(var b=0;b<e.length;b++){var f=e[b].split("=");c[f[0]]=f[1]}return c},region_contains:function(b,c){return(c.left>=b.left&&c.right<=b.right&&c.top>=b.top&&c.bottom<=b.bottom)},resize:function(){if(window.innerWidth<970){re=new RegExp(/.*?Netscape.(.*)/);matches=re.exec(navigator.userAgent);if(matches&&matches.length>=2&&matches[1]<7.2){document.body.style.margin="0"}}},showad:function(){this.show("rightad");this.show("frontmidad")},SharePollToFacebook:function(c,b){huff.use("util/util",function(d){d.sharePollOnFacebook(c,b)})},vote:function(b){huff.use("util/util",function(c){c.voteOnPoll(b)})},UpdateEntriesComments:function(){huff.use("util/util",function(b){b.updateEntriesComments()})},number_format:function(g,d,j,f){var c=!isFinite(+g)?0:+g,b=!isFinite(+d)?0:Math.abs(d),l=(typeof f==="undefined")?",":f,e=(typeof j==="undefined")?".":j,k="",h=function(p,o){var m=Math.pow(10,o);return""+Math.round(p*m)/m};k=(b?h(c,b):""+Math.round(c)).split(".");if(k[0].length>3){k[0]=k[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,l)}if((k[1]||"").length<b){k[1]=k[1]||"";k[1]+=new Array(b-k[1].length+1).join("0")}return k.join(e)},int2size:function(f,c){var e=1000;var b=e*1000;var d=b*1000;if(typeof c=="undefined"){c=1}if((f>=0)&&(f<e)){return f}else{if((f>=e)&&(f<b)){return(f/e).toFixed(c)+"K"}else{if((f>=b)&&(f<d)){return(f/b).toFixed(c)+"M"}else{return f}}}},updateContent:function(c,d,e,b){huff.use("util/util",function(f){f.fadeOutfadeInContent(c,d,e,b)})},addCSS:function(b){huff.use("util/util",function(c){c.addCSSFile(b)});return},render_video:function(b){huff.use("util/util",function(c){c.renderVideo(b)})},cleanup_cookies:function(){huff.use("util/util",function(b){b.cleanupCookies()})},migrate_cookies:function(){huff.use("util/util",function(b){b.migrateCookies()})},PeriodicalExecute:function(c,d,b,f){if(undefined===b||(undefined!==b&&b())){c.apply(this)}var e=this;if(undefined!==d&&(undefined===f||(undefined!==f&&!f()))){window.setTimeout(function(){HuffPoUtil.PeriodicalExecute.apply(e,[c,d,b,f])},d)}},Strip_Tags:function(h,j){var n="",l=false;var g=[];var b=[];var m="";var e=0;var d="";var f="";var c=function(o,k,p){return p.split(o).join(k)};if(j){b=j.match(/([a-zA-Z]+)/gi)}h+="";g=h.match(/(<\/?[\S][^>]*>)/gi);for(n in g){if(isNaN(n)){continue}f=g[n].toString();l=false;for(d in b){m=b[d];e=-1;if(e!=0){e=f.toLowerCase().indexOf("<"+m+">")}if(e!=0){e=f.toLowerCase().indexOf("<"+m+" ")}if(e!=0){e=f.toLowerCase().indexOf("</"+m)}if(e==0){l=true;break}}if(!l){h=c(f,"",h)}}return h},PreloadImages:function(b){if(Y.lang.isArray(b)){for(var c=0;c<b.length;++c){this.images_preload[this.images_preload.length]=new Image();this.images_preload[this.images_preload.length-1].src=b[c]}}else{for(var d in b){this.images_preload[this.images_preload.length]=new Image();if(b[d].callback){this.images_preload[this.images_preload.length-1].onload=b[d].callback}this.images_preload[this.images_preload.length-1].src=d}}},bitly_url:function(c,b){huff.use("util/util",function(d){d.bitlyUrl(c,b)})},checkUserInfluence:function(){huff.use("util/user",function(b){b.updateUserInfluence()})},setInfluenceCookie:function(b){huff.use("util/user",function(c){c.setInfluenceCookie(b)})},updateInfluenceCookie:function(c,b){huff.use("util/user",function(d){d.updateInfluenceCookie(c,b)})},removeEmptyInfluence:function(){if(HuffCookies.getCookie("huffpost_influence_null")){HuffCookies.destroyCookie("huffpost_influence_null")}},updateNavByReferrer:function(){huff.use("util/user",function(b){b.updateNavByReferrer()})},providerOverview:function(b){huff.use("util/user",function(c){c.providerOverview(b)})},utf8_decode:function(b){var d=[],f=0,h=0,g=0,e=0,c=0;b+="";while(f<b.length){g=b.charCodeAt(f);if(g<128){d[h++]=String.fromCharCode(g);f++}else{if(g>191&&g<224){e=b.charCodeAt(f+1);d[h++]=String.fromCharCode(((g&31)<<6)|(e&63));f+=2}else{e=b.charCodeAt(f+1);c=b.charCodeAt(f+2);d[h++]=String.fromCharCode(((g&15)<<12)|((e&63)<<6)|(c&63));f+=3}}}return d.join("")},isUSAVersion:function(){var b=window.location.hostname;if(!huff.beta&&/huffingtonpost.com/.test(b)){return true}else{if(huff.beta&&/www.beta(\d*).huffingtonpost.com/.test(b)){return true}}return false},isWallpaperAd:function(){var b=false;for(var c in adsDevilAd){b=adsDevilAd[c].hasOwnProperty("aolFormat")&&adsDevilAd[c].aolFormat=="Wallpaper";if(b){break}}return b}};var HPUtil=HuffPoUtil;HuffPoUtil.WEDGJE=function(){ad_store={};WEDGJE_ord=Math.random();WEDGJE_ord=WEDGJE_ord*10000000000000000000;isIE=(true||(navigator.userAgent&&navigator.userAgent.match(/MSIE/)));getIframe=function(b){innerH='<iframe width="'+b.width+'" height="'+b.height+'" ';innerH+='src="'+getSource(b)+'"';innerH+=' marginheight="0" marginwidth="0" frameborder="0" scrolling="no"></iframe>';if(this.isIE){return innerH}else{i=document.createElement("span");i.innerHTML=innerH;return i}};getScript=function(b){if(this.isIE){b.prefix="http://ad.doubleclick.net/adj/";innerH='<script type="text/javascript" src="'+getSource(b)+'"><\/script>';return innerH}else{b.prefix="http://ad.doubleclick.net/adj/";s=document.createElement("script");s.type="text/javascript";s.src=getSource(b);return s}};getQCSegs=function(){a=HuffPoUtil.getCookie("__qseg");return(a)?a.replace(/\|{0,1}Q_/gi,";qcs=").replace(/^;/,"")+";":""};getSource=function(b){if(b.prefix){adSource=b.prefix}else{adSource="http://ad.doubleclick.net/adi/"}adSource+=b.zone_info+";global=1;";adSource+=getQCSegs();if(b.interstitial&&(typeof ads_page_type!="undefined"&&ads_page_type!="big_news")&&!(document.referrer&&document.referrer.match(/.*(yahoo|aol)\.com.*/))){adSource+="dcopt=ist;"}adSource+=(test_kws=location.href.match(/dc_kw\=[^\&]*/gi))?"kw="+test_kws.toString().replace(/dc_kw\=/gi,"").replace(/\,/gi,";kw=")+";":"";adSource+=(location.href.match(/beta\./))?"kw=beta;":"";adSource+=(document.referrer.match("google.com/cse"))?"utm_hp_ref=hp_search;":"";adSource+=(document.referrer.match("google.com/search"))?"utm_hp_ref=google;":"";adSource+=(navigator.userAgent.toLowerCase().match("chrome/"))?"brsr=chrome;":"";adSource+=(typeof ads_page_type!="undefined")?"page_type="+ads_page_type+";":"";adSource+=(b.kv)?b.kv:"postload=0;";adSource+="tile="+b.tile+";";adSource+="sz="+(b.sizes||(b.width+"x"+b.height))+";";adSource+="ord="+WEDGJE_ord+"?";return adSource};getBareScript=function(b){if(this.isIE){innerH='<script type="text/javascript" src="'+b.src+'"><\/script>';return innerH}else{s=document.createElement("script");s.type="text/javascript";s.src=b.src;return s}};return{double_adsense:false,ads:function(b){return ad_store[b]},ord:function(b){return WEDGJE_ord},debug_ad_code:function(b){return(location.href.toLowerCase().match("debugadcode"))?'<div style="position:relative;z-index:1000"><div style="z-index:10000;position:absolute;top:0px;left:0px;padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px">'+getSource(b).replace(/\;/gi,";<br/>")+'<br/><a style="font-weight:bold;font-size:12px" target="_blank" href="/ads/test/ad_isolator.html?'+escape('<script type="text/javascript" src="'+getSource(b)+'"><\/script>')+'">See Ad In New Page</a></div></div>':""},inline_ad:function(b){b.prefix="http://ad.doubleclick.net/adj/";document.write('<script type="text/javascript" src="'+getSource(b)+'"><\/script>'+this.debug_ad_code(b))},postload_ad:function(b,d){var e="height: "+b.height+"px; ";var c="width: "+b.width+"px; ";if(b.no_container){e="";c=""}if(b.type=="iframe"){ad_store[b.el_id]=getIframe(b)}else{if(b.type=="script"){ad_store[b.el_id]=getScript(b)}else{if(b.type=="bare"){ad_store[b.el_id]=getBareScript(b)}}}if(isIE){if(typeof(d)=="undefined"){document.write('<div style="'+c+e+'" class="'+b.class_name+'" id="'+b.el_id+'">'+ad_store[b.el_id]+"</div>"+this.debug_ad_code(b))}else{document.getElementById(d).innerHTML='<div style="'+c+e+'" class="'+b.class_name+'" id="'+b.el_id+'">'+ad_store[b.el_id]+"</div>"+this.debug_ad_code(b)}}else{if(typeof(d)=="undefined"){document.write('<div style="'+c+e+'" class="'+b.class_name+'" id="'+b.el_id+'"></div>'+this.debug_ad_code(b))}else{document.getElementById(d).innerHTML='<div style="'+c+e+'" class="'+b.class_name+'" id="'+b.el_id+'"></div>'+this.debug_ad_code(b)}setTimeout("document.getElementById('"+b.el_id+"').appendChild(HuffPoUtil.WEDGJE.ads('"+b.el_id+"'));",(b.tile*200)+1)}},interstitial:true,tile:1,write:function(b,c){if(!HPBrowser.isIEOld()&&b.width!="234"&&c!="ad_advertisement"&&!(typeof ads_page_type!="undefined"&&ads_page_type=="front"&&(b.zone_info.match("comedy")||b.zone_info.match("world")))||location.href.match("postload_test")){b.interstitial=this.interstitial;this.interstitial=false;this.deferred_write(b,c);return}b.tile=this.tile++;if(location.href.match("no_ads")||location.href.match("nsup")){return}if(c){this.postload_ad(b,c)}else{b.interstitial=this.interstitial;this.interstitial=false;this.inline_ad(b)}},google_ads:{primed:false,counter:0,vars:{ad_client:"pub-3264687723376607",ad_output:"js",max_num_ads:"4",ad_type:"text",feedback:"on"},init:function(){if(!HuffPoUtil.WEDGJE.google_ads.primed){HuffPoUtil.WEDGJE.google_ads.primed=true}HuffPoUtil.WEDGJE.google_ads.executions=HuffPoUtil.WEDGJE.google_ads.executions||[];var c=HuffPoUtil.WEDGJE.google_ads.executions.length;HuffPoUtil.WEDGJE.google_ads.executions[c]=[];for(var b in HuffPoUtil.WEDGJE.google_ads.vars){HuffPoUtil.WEDGJE.google_ads.executions[c][b]=HuffPoUtil.WEDGJE.google_ads.vars[b]}for(var b in arguments[0]){HuffPoUtil.WEDGJE.google_ads.executions[c][b]=arguments[0][b]}},exec:function(){if(!HuffPoUtil.WEDGJE.google_ads.executions||!HuffPoUtil.WEDGJE.google_ads.executions[0]){return}var b=0;for(z=0;HuffPoUtil.WEDGJE.google_ads.executions[z];z++){var c="page_url---"+document.location.href+"*";for(_var in HuffPoUtil.WEDGJE.google_ads.executions[z]){if(typeof HuffPoUtil.WEDGJE.google_ads.executions[z][_var]=="string"){c+=_var+"---"+HuffPoUtil.WEDGJE.google_ads.executions[z][_var]+"*"}}c=c.replace(/\*$/gi,"");iframe=document.createElement("iframe");iframe.src="/ads/google_ads_iframe_loader.html#"+escape(escape(c));iframe.style.marginBottom="10px";iframe.frameBorder="0";iframe.id="iframe_"+HuffPoUtil.WEDGJE.google_ads.executions[z]["hp_dest_id"];iframe.height=1;iframe.scrolling="no";iframe.width="100%";iframe.name="adsense_iframe_"+Math.round(Math.random()*100000);adloc=document.getElementById(HuffPoUtil.WEDGJE.google_ads.executions[z]["hp_dest_id"].replace(/\"/gi,""));adloc.innerHTML="";adloc.appendChild(iframe)}},render:function(c){var e=document.getElementById(google_hp_dest_id);if(c.length==0||!e){return}var d='<div class="adsense_left">';d+='<div class="google_links_header"><a target="_blank" href="'+google_info.feedback_url+'" ><span>Ads by Google</span></a></div>';for(var b=0;b<c.length;++b){d+=HuffPoUtil.WEDGJE.google_ads.make_link(c[b])}d+="</div>";e.innerHTML=d;HuffPoUtil.WEDGJE.google_ads.contextual_ad_unit++;HuffPoUtil.WEDGJE.google_ads.counter+=c.length;HuffPoUtil.WEDGJE.google_ads.executions.splice(0,1);HuffPoUtil.WEDGJE.google_ads.exec()},make_link:function(e){var f=(arguments[1])?arguments[1]:["header","description","visible_url"];var c={header:'<div class="link_header"><a target="_blank" href="'+e.url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\'go to '+e.visible_url+"';return true\">"+e.line1+"</a></div>",description:'<div class="link_description"><span class="line2">'+e.line2+'</span><span class="spacer">&nbsp;</span><span class="line3">'+e.line3+"</span></div>",visible_url:'<div class="link_visible_url"><a target="_blank" href="'+e.url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\'go to '+e.visible_url+"';return true\"><span>"+e.visible_url+"</a></span></div>"};var b='<div class="adsense_block">';for(var d=0;d<f.length;d++){b+=c[f[d]]}b+="</div>";return b}}}}();HuffPoUtil.WEDGJE.deferred_write=function(b,d){b.tile=this.tile++;if(location.href.match("no_ads")||location.href.match("nsup")){return}var e="height: "+b.height+"px; ";var c="width: "+b.width+"px; ";if(b.no_container){e="";c=""}b.type="script";b.kv="postload=1;";isIE=true;if(b.type=="iframe"){ad_store[b.el_id]=getIframe(b)}else{if(b.type=="script"){ad_store[b.el_id]=getScript(b)}else{if(b.type=="bare"){ad_store[b.el_id]=getBareScript(b)}}}if(typeof(d)=="undefined"){document.write('<div style="'+c+e+'" class="'+b.class_name+'" id="'+b.el_id+'"></div>'+this.debug_ad_code(b))}else{document.getElementById(d).innerHTML='<div style="'+c+e+'" class="'+b.class_name+'" id="'+b.el_id+'"></div>'+this.debug_ad_code(b)}HuffPoUtil.WEDGJE.ad_renders.push(function(){document.write('<div id="defer-'+b.el_id+'">'+ad_store[b.el_id]+"</div>");(function(){var f=$("defer-"+b.el_id);if(!f){setTimeout(arguments.callee,100);return}f.parentNode.removeChild(f);$(b.el_id).appendChild(f)})()})};HuffPoUtil.WEDGJE.ad_renders=[];HuffPoUtil.ImageLoader={foldCheck:function(d,b,c,e){huff.beta&&console.error("HuffPoUtil.ImageLoader is DEPRECATED")}};HuffPoUtil.AvatarLoader={loadAvatar:function(b){huff.beta&&console.error("HuffPoUtil.AvatarLoader is DEPRECATED")},loadAvatarHomeStyle:function(b){huff.beta&&console.error("HuffPoUtil.AvatarLoader is DEPRECATED")},loadAvatarArticleStyle:function(){huff.beta&&console.error("HuffPoUtil.AvatarLoader is DEPRECATED")}};HPConnect={Login:function(){huff.use("user","connect/auth","connect/modal",function(b,d,c){if(b.logged){return}d.Login.init()});return},Signup:function(){huff.use("user","connect/auth","connect/modal",function(b,d,c){if(b.logged){return}d.Signup.init()})},Forgot:function(){huff.use("user","connect/auth","connect/modal",function(b,d,c){if(b.logged){return}d.ResetPassword.init()})}};var HPError={DEFAULT_ERROR:"Sorry, an error occurred.  Please check your internet connection",DEBUG:0,is_error:0,setDebug:function(b){if(b){HuffCookies.setCookie("debug_mode","1","1");HPError.DEBUG=1;window.onbeforeunload=function(d){var c="Your debug cookie is set, please confirm you want to leave the page";d=d||window.event;if(d){d.returnValue=c}return c}}else{HuffCookies.destroyCookie("debug_mode");HPError.DEBUG=0;window.onbeforeunload=function(){}}},throwError:function(b,c){c=c||false;if(b&&typeof b!=="object"){b={msg:b}}if(!b){b=new Array()}if(!(b.show===0)){b.show=1}if(!b.msg||b.msg==this.DEFAULT_ERROR){b.msg=this.DEFAULT_ERROR;b.show=0}this.is_error=1;if(this.DEBUG){try{throw ("Err")}catch(b){if(b.stack){console.log("Stack:",b.stack)}}console.log("Msg: ",b.msg);if(b.obj){console.log(b.obj)}}if(b.show){if(c){alert(b.msg)}}},debugMessage:function(c,b){if(!this.DEBUG){return false}if(!b){b={}}if(!c){c=""}HPError.e({show:0,msg:c,obj:b})}};if(typeof HuffCookies!="undefined"&&HuffCookies.getCookie("debug_mode")){HPError.setDebug(true)}HPError.e=HPError.throwError;HPError.d=HPError.debugMessage;String.prototype.format=function(){return String.format(this,arguments.length==1?arguments[0]:arguments)};String.format=function(b,d){var c=function(j,h){var g=function(k){if(typeof k=="number"){return Number}else{if(typeof k=="boolean"){return Boolean}else{if(typeof k=="string"){return String}else{return k.constructor}}}}(j);var f=g.prototype;var e=typeof j!="string"?f?f.format||f.toString:j.format||j.toString:j.toString;if(e){if(typeof h=="undefined"||h==""){return e.call(j)}else{return e.call(j,h)}}else{return""}};if(arguments.length==1){return function(){return String.format.apply(null,[b].concat(Array.prototype.slice.call(arguments,0)))}}if(arguments.length==2&&typeof d!="object"&&typeof d!="array"){d=[d]}if(arguments.length>2){d=Array.prototype.slice.call(arguments,1)}b=b.replace(/\{\{|\}\}|\{([^}: ]+?)(?::([^}]*?))?\}/g,function(f,e,g){if(f=="{{"){return"{"}if(f=="}}"){return"}"}if(typeof d[e]!="undefined"&&d[e]!==null){return c(d[e],g)}else{return""}});return b};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};(function(b){b.fn.disable_inputs=function(){return this.each(function(){jQuery(this).find("input,select,textarea").attr("disabled","disabled")})};b.fn.enable_inputs=function(){return this.each(function(){jQuery(this).find("input,select,textarea").removeAttr("disabled")})};b.fn.set_iframe_height=function(){return this.filter("iframe").each(function(){if(this.contentDocument){this.height=this.contentDocument.body.offsetHeight+35}else{this.height=this.contentWindow.document.body.scrollHeight+40}})}})(jQuery);
var HPBrowser={};HPBrowser.isAppleFirefox=function(){if(navigator&&navigator.userAgent){return jQuery.browser.mozilla&&(-1!==navigator.userAgent.toLowerCase().indexOf("macintosh"))}return false};HPBrowser.isFirefox=function(){if(navigator&&navigator.userAgent){return jQuery.browser.mozilla&&(-1!==navigator.userAgent.toLowerCase().indexOf("mozilla"))}return false};HPBrowser.isAppleSafari=function(){if(navigator&&navigator.userAgent){return jQuery.browser.webkit&&(-1!==navigator.userAgent.toLowerCase().indexOf("macintosh"))}return false};HPBrowser.isSafari=function(){var a=navigator.userAgent.toString().toLowerCase();if((a.indexOf("safari")!=-1)&&!(a.indexOf("chrome")!=-1)){return true}else{return false}};HPBrowser.isChrome=function(){if(navigator&&navigator.vendor){return -1!==navigator.vendor.toLowerCase().indexOf("google")}return false};HPBrowser.isIE6=function(){if(navigator&&navigator.userAgent){return jQuery.browser.msie&&/MSIE 6.0/i.test(navigator.userAgent)}return false};HPBrowser.isIE7=function(){if(navigator&&navigator.userAgent){return jQuery.browser.msie&&/MSIE 7./i.test(navigator.userAgent)}return false};HPBrowser.isIE8=function(){var c=-1;var a=navigator.userAgent;var b=new RegExp("Trident/([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}return(c==4)};HPBrowser.isIEOld=function(){return HPBrowser.isIE6()||HPBrowser.isIE7()||HPBrowser.isIE8()};HPBrowser.isIE=HPBrowser.isIEOld;HPBrowser.isWebkit=function(){return HPBrowser.isChrome()||HPBrowser.isAppleFirefox()||HPBrowser.isAppleSafari()};HPBrowser.nameBrowser=function(){if(HPBrowser.isChrome()){return"Chrome"}else{if(jQuery.browser.msie){return"Explorer"}else{if(HPBrowser.isFirefox()||HPBrowser.isAppleFirefox()){return"Firefox"}else{if(HPBrowser.isAppleSafari()){return"Safari"}else{if(HPBrowser.isWebkit()){return"Webkit"}else{if(jQuery.browser.opera){return"Opera"}else{if(jQuery.browser.camino){return"Camino"}else{if(jQuery.browser.konqueror){return"Konqueror"}else{if(jQuery.browser.omniweb){return"OmniWeb"}else{if(/netscape/.test(navigator.userAgent)){return"Netscape"}else{return"An unknown browser"}}}}}}}}}}};HPBrowser.browser_class=function(){var a=HPBrowser.nameBrowser();return a.replace(" ","_")};HPBrowser.version=function(){var a=HPBrowser.nameBrowser();if(a=="Explorer"){a="MSIE"}if(a=="OmniWeb"){a="OmniWeb/"}if(a=="Netscape"){a="Mozilla"}var b=navigator.userAgent.indexOf(a);if(b==-1){b=navigator.appVersion.indexOf(a);if(b==-1){return"an unknown version"}else{return parseFloat(navigator.appVersion.substring(b+a.length+1))}}else{return parseFloat(navigator.userAgent.substring(b+a.length+1))}};HPBrowser.major_version=function(){return parseInt(HPBrowser.version())};HPBrowser.minor_version=function(){var b=HPBrowser.version();var a=HPBrowser.major_version();return(b+"").substring((a+"").length+1)||0};HPBrowser.version_class=function(){var a=HPBrowser.version();return(""+a).replace(" ","_").replace(".","_")};HPBrowser.OS=function(){var a={name:(/(win|mac|linux|sunos|solaris|iphone|ipad)/.exec(navigator.platform.toLowerCase())||["unknown"])[0].replace("sunos","solaris")};if(a.name=="win"){return"Windows"}if(a.name=="mac"){return"Mac"}if(a.name=="linux"){return"Linux"}return a.name};HPBrowser.OS_class=function(){var a=HPBrowser.OS();return a.replace(" ","_")};
(function(h){var b,c,e=document.documentElement,f={},g=0;var d=function(o,m){var m=m||{},r=m.callback,k=m.pollDelay||100,p=m.timeout||10000,l,n=e;if(!b){b=j('<div style="position:absolute;top:-999em;left:-999em;width:auto;font-size:200px;font-family:serif">fONT TeST</div>')}function q(s){function t(){n.insertBefore(s,n.firstChild);i(function(){return b.offsetWidth!==s.offsetWidth},function(u){n.removeChild(s);n.removeChild(b);if(r){r(o,u)}},k,p)}if(c===2){t()}else{i(function(){return c===2},t,k)}}if(!c){e.insertBefore(b,e.firstChild);c=1;if(b.offsetWidth===0){i(function(){return document.body},function(){n=document.body;n.insertBefore(b,n.firstChild);c=2},k)}else{c=2}}l=b.cloneNode(true);l.style.fontFamily="'"+o+"',serif";q(l)};h.getFont=d;function j(k){var l=document.createElement("div");l.innerHTML=k;return l.firstChild}function a(){return new Date().getTime()}function i(m,r,l,o){var n=g++,q=a(),p,k=false;l=l||1;f[n]=setInterval(function(){p=a()-q;if(m()||(o&&(k=p>o))){r.call(h,k,p);clearInterval(f[n])}},l)}}(this));
huff.use("conf",function(a){a.set("topnav/font-load-status",-1);getFont("OpenSansCondensed",{callback:function(c,b){a.set("topnav/font-load-status",(b?0:1))}})});
var Y=YAHOO;var E=Y.util.Event;var R=Y.util.Region;var Dom=Y.util.Dom;var C=Y.util.Connect;var $=Dom.get;var addEvent=E.addListener;var addListener=E.addListener;var axel=Math.random()+"";var ord=axel*1000000000000000000;var HpSupport={script_eval:null};var TrackingData=new Object;if("undefined"===typeof Array.prototype.inArray){Array.prototype.inArray=function(b){var a;for(a=0;a<this.length;a++){if(this[a]===b){return true}}return false}}if("undefined"===typeof Array.prototype.arrayPos){Array.prototype.arrayPos=function(b){for(var a=0;a<this.length;a++){if(this[a]===b){return a}}return -1}}function extend(b,c){for(var a in c){if(!c.hasOwnProperty(a)){continue}b[a]=c[a]}}function form_to_iframe_callback(b){try{b()}catch(a){}}function isset(a){if(typeof(window[a])!="undefined"){return true}else{return false}}function simulateClick(a){jQuery("#"+a).click()}function supress_keyvalues(a,b){jQuery.each(a,function(d,c){r=new RegExp(c+"=[^;]+;","g");b=b.replace(r,"")});return b}HPUtil.onPageReady(function(){HuffPoUtil.init();var f=(ClickTracker.sample==1)?1:(Math.round(Math.random()*(ClickTracker.sample-1))==1);ClickTracker.trackClicks=(f||ClickTracker.debug)&&(Dom.hasClass(document.body,"frontpage")||Dom.hasClass(document.body,"big_news_class")||document.getElementById("partner_box")||((typeof(bN_cfg)!="undefined")&&(typeof(bN_cfg.p)!="undefined")&&(bN_cfg.p.dL_dpt=="front")));if(ClickTracker.trackClicks){ClickTracker.init()}Dom.batch(document.getElementsByTagName("UL"),function(h){if(h&&h.getElementsByTagName){lis=h.getElementsByTagName("LI");if(lis[0]){Dom.addClass(lis[0],"first");Dom.addClass(lis[lis.length-1],"last")}}});lists=Dom.getElementsByClassName("widget_children","div");for(var e=0;e<lists.length;e++){els=lists[e].getElementsByTagName("div");wi_els=new Array();for(var c=0;c<els.length;c++){o=els[c];if(Dom.hasClass(o,"widget_item")){wi_els.push(o)}}for(var b=0;b<wi_els.length;b++){o=wi_els[b];if(b==0){Dom.addClass(o,"first_child")}if(b==wi_els.length-1){Dom.addClass(o,"last_child")}}}setInterval(HuffPoUtil.UpdateEntriesComments,1000*300);var g=document.getElementById("loggedin_user");if(g){if(HuffCookies.getUserName()){g.innerHTML='<a href="/users/logout/?referer='+encodeURIComponent(HPConfig.current_uri)+'" onclick="QuickLogin.SocialLogout(\'http://'+HPConfig.current_web_address+"/users/logout/?referer="+encodeURIComponent(HPConfig.current_uri)+"'); return false;\">"+_("Logout")+'</a> <span class="sign_bar">|</span> '}else{g.innerHTML='<a href="http://'+HPConfig.current_web_address+'/users/login/" onclick="HPConnect.Login(); return false;">'+_("Log In")+'</a> <span class="sign_bar">|</span> '}}if(HPBrowser.isIE8()){var d=Dom.getElementsByClassName("webslice_icons");for(var a=d.length;a--;){d[a].style.display="inline"}}});
var FloatingPrompt={type:"bottom",embed_id:null,container:null,html_or_url:"",default_class:"prompting_overlay",embed:function(o,l,d,c,t){if(!this.container){this.container=document.createElement("div");Dom.addClass(this.container,this.default_class);this.embed_id=Dom.generateId(this.container);document.body.appendChild(this.container)}else{this.container.className=this.default_class}if(!o.id){Dom.generateId(o)}this.type=c||this.type;t=t||{};var p=t.after_cb||function(){},g=t.arrow_style||"",m=t.timeout_remove||100,f=t.fp_intersects,i=t.pre_cb||function(){},j=t.ignore_arrow||false,s=t.class_name||"",k=t.forget_intersect,n=t.base_coords||undefined;if(f){o.setAttribute("on_hover","yes")}if(t.width){this.container.style.width=t.width+"px"}if(s){Dom.addClass(this.container,s)}this.container.setAttribute("embedded_to",o.id);var r=function(){o.removeAttribute("on_hover");var w=this,x=function(){if(w.parentNode&&!o.getAttribute("on_hover")){p();if(w.getAttribute("embedded_to")==o.id){E.removeListener(w,"mouseout");E.removeListener(w,"mouseover");w.style.display="none"}o.removeAttribute("floating_id")}};if(o.getAttribute("fp_intersects")){setTimeout(x,m)}else{x()}};o.setAttribute("floating_id",this.embed_id);E.on(o,"mouseout",function(){this.removeAttribute("on_hover");var w=this,x=function(){if(Dom.get(w.getAttribute("floating_id"))&&!w.getAttribute("on_hover")){p();if(Dom.get(w.getAttribute("floating_id")).getAttribute("embedded_to")==o.id){E.removeListener(w.getAttribute("floating_id"),"mouseout");E.removeListener(w.getAttribute("floating_id"),"mouseover");Dom.get(w.getAttribute("floating_id")).style.display="none"}w.removeAttribute("floating_id")}};if(o.getAttribute("fp_intersects")){setTimeout(x,m)}else{x()}});var h="",b="",e=t.add_xy||[0,0];switch(this.type){case"bottom":h=' style="top:-5px;left:-14px;" ';b="right-top";break;case"top":h="";b="left-top";break;case"top-right":h="";b="right-top";break}h=g||h;if(undefined===f&&!k){var v=Y.util.Region.getRegion(o);v.left-=1;v.right+=1;v.top-=1;v.bottom+=1}if(""!=l){this.container.innerHTML=!j?this._GetContent(h,l):l;this.container.style.display="block";var q=this;HPUtil.ShowNearElement(b,o,this.container,e,function(){i(q,r)},n);if(undefined===f&&!k){var a=Y.util.Region.getRegion(this.container).intersect(v)?1:0;o.setAttribute("fp_intersects",a);if(a){o.setAttribute("on_hover","yes");E.on(this.container,"mouseout",r);E.on([this.container,o],"mouseover",function(){o.setAttribute("on_hover","yes");return false})}}else{if(!k){o.setAttribute("fp_intersects",f.toString());if(f){E.on(this.container,"mouseout",r);E.on([this.container,o],"mouseover",function(){o.setAttribute("on_hover","yes");return false})}}}}else{var u=this;C.asyncRequest("GET",d,{success:function(x){u.container.innerHTML=!j?u._GetContent(h,x.responseText):x.responseText;u.container.style.display="block";HPUtil.ShowNearElement(b,o,u.container,e,function(){i(u,r)},n);if(undefined===f&&!k){var w=Y.util.Region.getRegion(u.contaner).intersect(v)?1:0;o.setAttribute("fp_intersects",w);if(w){o.setAttribute("on_hover","yes");E.on(u.container,"mouseout",r);E.on(u.container,"mouseover",function(){o.setAttribute("on_hover","yes");return false})}}else{if(!k){o.setAttribute("fp_intersects",f.toString());if(f){E.on(u.container,"mouseout",r);E.on(u.container,"mouseover",function(){o.setAttribute("on_hover","yes");return false})}}}},failure:function(){HPError.e()}})}},_GetContent:function(b,a){switch(this.type){case"bottom":return'<div class="btm_embed_arrow" '+b+"></div>"+a;break;case"top":case"top-right":return a+'<div class="top_embed_arrow" '+b+"></div>";break}}};huff.unit("tmp/floating_promt",function(a){a(FloatingPrompt)});
var HPEventModule={js_main_modules_loaded:{},js_events_loaded:{},yui_version_default:"2.7.0",events_dependencies:{slideshow_participate:{immediately:{our:["quickslideshowparticipate"]},delayed:{yui:{button:"default"}}},quiz_share:{immediately:{our:["comments"]}}},modules_loaded:{},yui_modules_loaded:{},Load:function(d,e,b,a){b=b||this;a=a||[];e=e||(function(){});if(this.js_events_loaded[d]){e.apply(b,a)}else{var c=this;this._LoadModules(d,function(){e.apply(b,a)})}},Wait:function(d,f,e,a,b){if(e){e()}a=(undefined===a)?true:a;b=b||this;var c=this;HPUtil.WaitForCondition.apply(b,[function(){setTimeout(function(){f.apply(b)},100)},1,function(){return !a?c.js_main_modules_loaded[d]:c.js_events_loaded[d]}])},_LoadModules:function(f,k,j){k=k||(function(){});j=j||"immediately";var c=this.events_dependencies[f][j];var b="/assets/js.php?"+HPConfig.timestamp_for_clearing_js+"&f=";var a=[],h="";if(c.our){for(var d=0;d<c.our.length;++d){h=c.our[d];if(this.modules_loaded[h]){continue}a[a.length]="modules/"+h+".js"}}if(c.yui){for(var h in c.yui){if(this.yui_modules_loaded[h]){continue}a[a.length]="yui_"+("default"!==c.yui[h]?c.yui[h]:this.yui_version_default)+"/"+h+"/"+h+"-min.js"}}if(a.length){a=a.sort();b+=a.join("%2C");var g=this;var e=function(){var m="";for(var l=0;l<a.length;++l){m=(new RegExp(/\/(.*?)\.js$/)).exec(a[l]);if(-1!==a[l].indexOf("yui_")){g.yui_modules_loaded[m[1]]=true}else{g.modules_loaded[m[1]]=true}}k();if("immediately"==j&&g.events_dependencies[f]["delayed"]){g.js_main_modules_loaded[f]=1;g._LoadModules(f,null,"delayed")}else{g.js_events_loaded[f]=1}};HPUtil.loadAndRun(b,e)}}};huff.unit("tmp/event_module.js",function(a){a(HPEventModule)});
YAHOO.namespace("HPDocStatus");var HPDocStatus=YAHOO.HPDocStatus;HPDocStatus.on_focus=true;HPDocStatus.setFocusHandler=function(a){if(!a){hpcallback=function(){HPDocStatus.on_focus=true}}else{hpcallback=function(){a();HPDocStatus.on_focus=true}}if(HPBrowser.isIEOld()){window.onfocusin=hpcallback}else{YAHOO.util.Event.addListener(window,"focus",hpcallback)}};HPDocStatus.setBlurHandler=function(a){if(!a){hpcallback=function(){HPDocStatus.on_focus=false}}else{hpcallback=function(){a();HPDocStatus.on_focus=false}}if(HPBrowser.isIEOld()){window.onfocusout=hpcallback}else{YAHOO.util.Event.addListener(window,"blur",hpcallback)}};huff.unit("tmp/doc_status",function(a){a(HPDocStatus)});
var ViewTracker={VerticalType:-1,VerticalTypeViews:null,AddView:function(b,a){if(!this.VerticalTypeViews){this.Init()}if(!b){b=this.VerticalType}if(!a){a=1}if(this.VerticalTypeViews[b]){this.VerticalTypeViews[b]+=a}else{this.VerticalTypeViews[b]=a}HuffCookies.set("huffpo_type_views",JSON.stringify(this.VerticalTypeViews),30*24)},Init:function(){var a=HuffCookies.get("huffpo_type_views");if(a){this.VerticalTypeViews=JSON.parse(a)}if(!this.VerticalTypeViews){this.VerticalTypeViews={}}},GetMostViewedVertical:function(){var a=0;var b=-1;for(var c in this.VerticalTypeViews){if(parseInt(c)=="NaN"){continue}if(a<this.VerticalTypeViews[c]){a=this.VerticalTypeViews[c];b=c}}return b}};huff.unit("tmp/view_tracker",function(a){a(ViewTracker)});
var ClickTracker={debug:false,disabled:false,trackerImg:{},blogRecentRanking:0,trackMe:function(c){if(ClickTracker.disabled){return 1}if(ClickTracker.debug){c.preventDefault()}var a;var b=this;for(i=0;i<6;i++){if(b.id&&b.id.match(/(entry|blog|recent|href)_\d+/)){a=b;break}if(b.parentNode){b=b.parentNode}}this.trackerImg=new Image();this.trackerImg.onload=function(){HPTrack.navigateAfterTrack(c,this.href,this.target,0)};if(a){var d=a.id.match(/href_(\d+)/);var e=(d)?TrackingData["entry_"+d[1]]:TrackingData[a.id];if(!e){e={type:"popular",id:this.href.match(/(\d+).html/).pop(),blog_id:this.href.match(/_n_/)?2:3}}e.url=escape(this.href);if(!e.type){if(this.innerHTML.match(/read post/i)){e.type="read%20post"}else{if(this.innerHTML.match(/quick read/i)){e.type="in%20brief"}else{if(this.innerHTML.match(/Related/)){e.type="related"}else{if(this.innerHTML.match(/Comment/)){e.type="comments"}else{if(this.innerHTML.match(/bio/i)){e.type="bio"}else{if(Dom.hasClass(this.parentNode,"tag_wrap")){e.type="tag"}else{if(this.parentNode.className=="author"||this.parentNode.className=="byline"){e.type="author"}else{if(e.blog_id==2&&this.firstChild&&this.firstChild.tagName=="IMG"){e.type="image"}else{if(e.blog_id==2){e.type="headline"}else{if(e.blog_id==3&&this.parentNode.tagName&&this.parentNode.tagName=="H2"){e.type="headline"}else{if(e.blog_id==3&&this.parentNode.tagName&&this.parentNode.tagName=="P"){e.type="entry%20body"}else{if(e.zone_id==30){e.type="from-partners"}else{e.type="other"}}}}}}}}}}}}}e.sample=ClickTracker.sample;this.trackerImg.src="/clicktracking/front.php?"+JSON.stringify(e)}else{if(!Dom.hasClass(document.body,"big_news_class")){b=this;for(i=0;i<6;i++){if(b.id&&!Dom.hasClass(b,"ignore_id")&&!b.id.match(/yuievtautoid/)){a=b;break}b=b.parentNode}var e={url:"",type:"",id:-1,blog_id:-1,rank:-1,zone:-1,sample:ClickTracker.sample,vertical:ClickTracker.vertical_id};e.url=escape(this.href);a&&(e.type=escape(a.id));this.trackerImg.src="/clicktracking/front.php?"+JSON.stringify(e)}}c.preventDefault();if(ClickTracker.debug){console.log(this.trackerImg.src);console.log(e)}else{HPTrack.navigateAfterTrack(c,this.href,this.target,400)}},trackTicker:function(a){if(ClickTracker.trackClicks){if(!(url_chunks=a.match(/_([nb])_(\d+)\.html/))){window.location.href=a}blog_id=(url_chunks[1]=="n")?2:3;var b={url:escape(a),type:"ticker_flash",id:-1,blog_id:blog_id,rank:-1,zone:-1,vertical:ClickTracker.vertical_id};this.trackerImg=new Image();this.trackerImg.src="/clicktracking/front.php?"+JSON.stringify(b)}if(Dom.hasClass(document.body,"frontpage")){if(Dom.hasClass(document.body,"homepage")){ticker_area="front"}else{ticker_area=document.body.id}}else{ticker_area="secondary"}HPTrack.trackPageview("/t/a/ticker/"+ticker_area);window.location.href=a},trackComment:function(b,a){this.trackerImg=new Image();this.trackerImg.src="/clicktracking/best-of.php?comment_id="+b+"&entry_id="+a},deprecated_flagComment:function(b,a){this.trackerImg=new Image();this.trackerImg.src="/huff-send-comment.cgi?id="+b+"&entry_id="+a;Dom.addClass("flag_"+b,"flagged");$("flag_"+b).innerHTML="Flagged"},flagComment:function(c,a,b){var e=$("flag_"+c);if(e.innerHTML.indexOf("Flagged")==-1){this.trackerImg=new Image();this.trackerImg.src="/include/flagComment.php?type=abuse&blog_id="+b+"&cmt_id="+c+"&entry_id="+a;var d=parseInt(/\((\d+)\)/.exec(e.innerHTML)[1])+1;e.innerHTML="Flagged ("+d+")"}},favComment:function(c,a,b){var e=$("best_"+c);if(e.innerHTML.indexOf("Marked")==-1){this.trackerImg=new Image();this.trackerImg.src="/include/flagComment.php?type=best&blog_id="+b+"&cmt_id="+c+"&entry_id="+a;var d=parseInt(/\((\d+)\)/.exec(e.innerHTML)[1])+1;e.innerHTML="Marked as favorite ("+d+")";SNProject.track(c,"comment_favored",a)}},initRelatedTracker:function(){lists=Dom.getElementsByClassName("relatedposts","ul");for(var a=0;a<lists.length;a++){Dom.batch(lists[a].getElementsByTagName("a"),function(b){b.href="http://www.huffingtonpost.com/include/lib/RelatedTracker.php?type=related&utm_hp_ref="+document.URL+"&dest="+b.href})}lists=Dom.getElementsByClassName("topposts","ul");for(var a=0;a<lists.length;a++){Dom.batch(lists[a].getElementsByTagName("a"),function(b){b.href="http://www.huffingtonpost.com/include/lib/RelatedTracker.php?type=top&utm_hp_ref="+document.URL+"&dest="+b.href})}},init:function(){var a=ClickTracker.type=="from-partners"?"#partner_box a":"a";jQuery(document).delegate(a,"click",ClickTracker.trackMe)}};huff.unit("tmp/click_tracker",function(a){a(ClickTracker)});
var Slider={Next:function(a){if(Slider.Positions[a]<Slider.Lengths[a]-1){Slider.Positions[a]++}else{return false}Slider.LoadImage(a);Dom.setStyle(Dom.getElementsByClassName("slider_slide","div","slider_"+a),"display","none");Dom.setStyle("slider_"+a+"_slide_"+Slider.Positions[a],"display","block");if(Slider.Positions[a]==Slider.Lengths[a]-1){Dom.addClass("slider_right_"+a,"slider_off")}Dom.removeClass("slider_left_"+a,"slider_off")},Previous:function(a){if(Slider.Positions[a]>0){Slider.Positions[a]--}else{return false}Slider.LoadImage(a);Dom.setStyle(Dom.getElementsByClassName("slider_slide","div","slider_"+a),"display","none");Dom.setStyle("slider_"+a+"_slide_"+Slider.Positions[a],"display","block");if(Slider.Positions[a]==0){Dom.addClass("slider_left_"+a,"slider_off")}Dom.removeClass("slider_right_"+a,"slider_off")},LoadImage:function(a){this_slide=$("slider_"+a+"_img_"+Slider.Positions[a]);if(this_slide&&!this_slide.src<2&&this_slide.alt){this_slide.src=this_slide.alt}},Positions:new Array(),Lengths:new Array()};huff.unit("tmp/slider",function(a){a(Slider)});
StructuredImage=function(a){if(!(decon=/<HH--(DEV--)?PHOTO--([A-Z\-_0-9]*)--(\d+)--HH>/.exec(a))){return false}this.keywords=decon[2];this.id=decon[3];this.domain=(decon[1])?"dev.assets.huffingtonpost.com":"i.huffpost.com";this.path="http://"+this.domain+"/gen/"+this.id+"/thumbs/"};StructuredImage.prototype.Url=function(a,b){return this.path+a+"-"+this.keywords+"-"+b+".jpg"};huff.unit("tmp/structured_image.js",function(a){a(StructuredImage)});
function CommonPaginator(){this.init.apply(this,arguments)}CommonPaginator.prototype={init:function(a){this.currentPage=1;this.currentCustomPage=0;this.startPage=1;this.to_hide=0;this.lock=false;var b=this;huff.use("common_paginator",function(c){c.init(b,a)})},Previous:function(){var a=this;huff.use("common_paginator",function(b){b.Previous(a)})},Goto:function(a){var b=this;huff.use("common_paginator",function(c){c.Goto(b,a)})},Next:function(){var a=this;huff.use("common_paginator",function(b){b.Next(a)})}};huff.unit("tmp/common_paginator",function(a){a(CommonPaginator)});
var CurtainModule={collapse:function(){$("main_container").style.display="none";HuffCookies.set("huffpost_curtain",1)}};huff.unit("tmp/curtain",function(a){a(CurtainModule)});
function Paginator(d){if(!d.hasOwnProperty("paginator_id")){return}if(!d.hasOwnProperty("name")){return}if(!d.hasOwnProperty("entry_class")){return}if(!d.hasOwnProperty("entries_id")){return}if(!d.hasOwnProperty("entries_per_page")){this.entries_per_page=5}this.entries_id=d.entries_id;this.paginator_id=d.paginator_id;this.name=d.name;this.entry_class=d.entry_class;this.entries_per_page=this.entries_per_page?this.entries_per_page:d.entries_per_page;this.entries=Dom.getElementsByClassName(this.entry_class);this.entries_tmp=[];var f=document.createElement("div");for(var e=0;e<this.entries.length;e++){if(this.entries[e]){var f=document.createElement("div");f.appendChild(this.entries[e]);this.entries_tmp.push(f.innerHTML)}}this.BuildPaginator=a;this.RenderPage=c;this.UpdateFadeInOut=b;this.RenderPage(1);Dom.setStyle(this.entries_id,"display","block");function c(i){var g=(i-1)*this.entries_per_page;var l=g+this.entries_per_page-1;var h="";for(var k=g;k<=l;k++){if(this.entries_tmp[k]){h+=this.entries_tmp[k]}}this.UpdateFadeInOut(this.entries_id,h);var j=this.BuildPaginator(i);Dom.get(this.paginator_id).innerHTML=j}function a(m){var r="Pages: ";var q=5;var h=this.entries_per_page;var n=this.entries_tmp.length;if(1<(m-q)){r+='<a href="javascript:'+this.name+'.RenderPage(1);">1</a> ';if(1<(m-q-1)){r+="... "}}var j=Math.ceil(n/h);var l=m-q;if(l<1){l=1}var o=m+q;if(o>j){o=j}for(var k=l;k<=o;k++){var g=(k-1)*4;if(k==m){r+=k+" "}else{r+='<a href="javascript:'+this.name+".RenderPage("+k+');">'+k+"</a> "}}if((m+q)<j){if((m+q+1)<j){r+="... "}r+='<a href="javascript:'+this.name+".RenderPage("+j+');">'+j+"</a> "}return r}function b(j,i){var h=new YAHOO.util.Anim($(j),{opacity:{to:0}},0.5);var g=function(m,l){$(j).innerHTML=i;var k=new YAHOO.util.Anim($(j),{opacity:{to:1}},0.5);k.animate()};h.onComplete.subscribe(g);h.animate()}}huff.unit("tmp/paginator",function(a){a()});
var OnFocusTimer=function(){var active=true;var _functionProxy=function(code){if(typeof(code)=="string"){return function(){if(active){eval(code)}}}else{if(typeof(code)=="function"){return function(){if(active){code()}}}}return function(){}};var _onFocus=function(){active=true};var _onBlur=function(){active=false};YAHOO.util.Event.on(window,"focus",_onFocus);YAHOO.util.Event.on(window,"blur",_onBlur);return{setTimeout:function(code,timeout){return setTimeout(_functionProxy(code),timeout)},setInterval:function(code,interval){return setInterval(_functionProxy(code),interval)}}}();huff.unit("tmp/on_focus_timer",function(a){a(OnFocusTimer)});
/*
    ADs - rendering, positioning 
 */
 jQuery(document).ready(function(){
 setTimeout('HPAds.ugc_suppress_check()',3000);
 })

var HPAds = {

    ad_timezone_store: [],
    ad_store : [],
    iframe_ads_queue : [],
    iframe_ads_callback : [],
    iframe_ads_timeout : 4000, //miliseconds
    iframe_ads_queue_running : false,
    ad_capchecked   : false,
    ad_cap   : 'n',
    snpmodule_skin : false,
    
    homepage_trailer : {},
    spot_rendered: {},
    page_spots: [],

    curr_page_config : false,
    full_page_config : false,
    
    revsplit:
    { 
        getAdId: function(spot, backup) { 
            if (typeof io_c3sd != 'undefined' && typeof io_c3sd.ads != "undefined" && typeof io_c3sd.ads[spot] != 'undefined') {
                var magic_number = io_c3sd.ads[spot];
                return magic_number.replace(/\s/g, "");
	        } else {
	        	return backup;
	        }
        }
    },
    
	hide_ugc_ads: function()
	{
		if(HPAds.ugc_ads_hidden) return;
		var iframe_collection = jQuery('iframe[src*="adpage.html"]');
		for(x=0;iframe_collection[x];x++)
		{
			if(iframe_collection[x].contentWindow.document.body.innerHTML.indexOf('ugc_flag')>1)
			{
				jQuery(iframe_collection[x]).closest('.ad_728_90b_fix,.ad_wrapper_top, .ad_wrapper_, .ad_wrapper').css('display','none');
				HPAds.ugc_ads_hidden = true;
			}
		}
	},
	
	ugc_suppress_check: function () {
		if( 'undefined' != typeof(twitter_suppress) && twitter_suppress ) {
		   jQuery('#twitter_block_holder').css('display','none');
		   jQuery('#show_twitter_block').css('display','block');
		   jQuery('#show_twitter_block').click(function(){
				jQuery('#twitter_block_holder').css('display','block');
				jQuery('#show_twitter_block').css('display','none');
				HPAds.hide_ugc_ads();
				return false;
			});
		} else {
			   jQuery('#show_twitter_block').css('display','none');
			   jQuery('#twitter_block_holder').css('display','block');
		};
		if( 'undefined' != typeof(comments_suppress) && comments_suppress ) {
			jQuery('.comments_block_holder').css('display','none');
			jQuery('#show_comments_block').css('display','block');
			jQuery('#show_comments_block').click(function(){
				jQuery('.comments_block_holder').css('display','block');
				jQuery('#show_comments_block').css('display','none');
				HPAds.hide_ugc_ads();
				return false;
			});
		} else {
			jQuery('#show_comments_block').css('display','none');
			jQuery('.comments_block_holder').css('display','block');
		}
	},

    iframe_ads_queue_callback : function (callback)   //  iframe_ads_queue_callback(function())
    {
        if (callback) {
            this.iframe_ads_callback.push(callback);
            if (this.iframe_ads_queue_running) return;
        }

        if ( (this.iframe_ads_queue.length == 0) || (this.iframe_ads_timeout <= 0) ) {
            this.iframe_ads_queue_running = false;
            if (this.iframe_ads_callback.length > 0) {
                for(var i = 0; i < this.iframe_ads_callback.length; i++) {
                   this.iframe_ads_callback[i].call();
                   this.iframe_ads_callback.slice(i,1);
                }
            }
        } else {
            this.iframe_ads_timeout = this.iframe_ads_timeout - 200;
            this.iframe_ads_queue_running = true;
            setTimeout("HPAds.iframe_ads_queue_callback(null)", 200);
        }

    },


	adSonar: function (plid,pid,w,h)
	{
	document.write('<s'+'cript type="text/javascript">adsonar_placementId='+plid+';adsonar_pid='+pid+';adsonar_ps=-1;adsonar_zw='+w+';adsonar_zh='+h+';adsonar_jv="ads.tw.adsonar.com";</s'+'cript><s'+'cript language="JavaScript" src="http://js.adsonar.com/js/tw_dfp_adsonar.js"></s'+'cript>')
	if(location.href.match('debugadcode'))
	{
		document.write('<div style="padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px">');
		document.write('<b>ADSONAR PLACEMENT</b>');
		document.write('<br />plid: '+plid);
		document.write('<br />pid: '+pid);
		document.write('<br />width: ' +w);
		document.write('<br />height: ' + h);
		document.write('</div>');
	}
	},
	
    iframe_ads_queue_remove: function (ad_spot_rm)
    {
        for(var i = 0; i < this.iframe_ads_queue.length; i++) {
            if (this.iframe_ads_queue[i] == ad_spot_rm) {
                this.iframe_ads_queue.splice(i,1);
                break;
            }
        }
    },

    ad_check_savecookie : function ()
    {
        var cn='huffpost_adssale';

        if (this.ad_capchecked)
        {
            return;
        }

        var cval = HuffCookies.getCookie(cn);

        if (cval == 'y')
        {
           HuffCookies.setCookie(cn, 'n', 12);
           this.ad_cap = 'y';
        }
        else if (cval == 'n')
        {
           this.ad_cap = 'n';
        }
        else
        {
            HuffCookies.setCookie(cn, 'y', -1);
        }
        this.ad_capchecked = true;
    },

    ad_store_push : function(ad_position_name, ad_type, ad_container_width, ad_content, defer, ad_positioned_callback, slug, refresh_rate)
    {
		var r_rate = refresh_rate || false;
		HPAds.ad_store[ad_position_name] = {
			'ad_type' : ad_type,
			'ad_container_width' : ad_container_width,
			'ad_content' : ad_content,
			'defer': defer,
			'positioned_callback' : ad_positioned_callback,
			'slug' : slug,
			'refresh_rate' : r_rate
        };
    },

    homepage_trailer_add : function (id, video_params, caller, exec)
    {
        if(HPAds.homepage_trailer[id])      
        {
            HPAds.homepage_trailer[id].video_params = video_params;
        }
        if(exec) {QV.popHomepageTrailer (id, caller)}

},

    ads_ord : function()
    {
        return ord;
    },

    ads_client_info : function()
    {

        var src_param = '';
        var os_param = 'null';
        var browser_param = 'null';

        if (HPBrowser.OS() == 'Windows')    os_param = 'win';
        else if (HPBrowser.OS() == 'Linux') os_param = 'lin';
        else if (HPBrowser.OS() == 'Mac')   os_param = 'mac';
        
        var _browser = HPBrowser.nameBrowser();
        if (_browser == 'Explorer')       browser_param = 'ie';
        else if (_browser == 'Firefox')   browser_param = 'ff';
        else if (_browser == 'Chrome')    browser_param = 'ch';
        else if (_browser == 'Opera')     browser_param = 'op';
        else if (_browser == 'Safari')    browser_param = 'sa';
        else if (_browser == 'Konqueror') browser_param = 'ko';
        else if (_browser == 'Camino')    browser_param = 'ca';
        else if (_browser == 'OmniWeb')   browser_param = 'om';

        var query = HPUtil.getQueryVariables();
        var no_keyvalue = new Array();
        if (typeof(query.no_keyvalue) != 'undefined')  no_keyvalue = query.no_keyvalue.split(",");

        if (no_keyvalue.inArray("plat") === false) {
            src_param += 'plat='+os_param+';';
        }
        if (no_keyvalue.inArray("br") === false) {
            src_param += 'br='+browser_param+';';
        }
        if (no_keyvalue.inArray("bv") === false) {
            src_param += 'bv='+HPBrowser.major_version() +';';
        }
        if (no_keyvalue.inArray("subbv") === false) {
            src_param += 'subbv='+HPBrowser.minor_version();
        }

        return src_param;
    },


    ads_u_value : function()
    {
        var src_params = HuffCookies.getSNPstatus() == '1' ? 'y|' : '|';
        var c = document.cookie;
        var cn='__qseg=';
        var csi = c.indexOf(cn);
        if(csi != -1)
        {
            if((cei = c.indexOf(';', csi + cn.length)) == -1)
            {
                cei = c.length;
            }
            a = unescape(c.substring(csi + cn.length, cei));
            src_params += a.replace(/\|{0,1}Q_/gi,',').replace(/^,/,'');
        }
        return src_params; 
    },

    ads_inf_value : function()
    {

        var inf = HuffCookies.getUserInfluence();

        var src_params = inf.commented.value == 1
                         || inf.shared.value == 1
                         || inf.emailed.value ==1
                         || inf.blogged.value == 1
                         || inf.blogged.value == 1
                         ? 'y' : ''
        return src_params;
    },

    adtech_client_side_inf : function()
    {
        var query = HPUtil.getQueryVariables();
        var no_keyvalue = new Array();
        if (typeof(query.no_keyvalue) != 'undefined')  no_keyvalue = query.no_keyvalue.split(",");

        var inf = HuffCookies.getUserInfluence();
        if (
             (inf.commented.value == 1
              || inf.shared.value == 1
              || inf.emailed.value ==1
              || inf.blogged.value == 1
              || inf.blogged.value == 1
             ) &&
             (no_keyvalue.inArray('inf') === false)
            )
        {
            return 'kvinf=y;';
        }
        return '';
    },

    ads_client_side_qvs : function()
    {
        //quantcast segments
        var src_params = '';
        var a = false;
        var cn='__qseg=';
        var c = document.cookie;
        var csi = c.indexOf(cn);

        var query = HPUtil.getQueryVariables();
        var no_keyvalue = new Array();
        if (typeof(query.no_keyvalue) != 'undefined')  no_keyvalue = query.no_keyvalue.split(",");

        if(csi != -1)
        {
            if((cei = c.indexOf(';', csi + cn.length)) == -1)
            {
                cei = c.length;
            }
            a = unescape(c.substring(csi + cn.length, cei));
        }
        //adding SNN keyword
        if( (HuffCookies.getSNPstatus() == '1') && (no_keyvalue.inArray('snn') === false) )
        {
            src_params += 'snn=y;';
        }

        var inf = HuffCookies.getUserInfluence();
        if (
             (inf.commented.value == 1
              || inf.shared.value == 1
              || inf.emailed.value ==1
              || inf.blogged.value == 1
              || inf.blogged.value == 1
             ) &&
             (no_keyvalue.inArray('inf') === false)
            )
        {
            src_params += 'inf=y;';
        }
       
        //adding cap_12 keyword;
        this.ad_check_savecookie();

        if (no_keyvalue.inArray("cap_12") === false) {
            src_params += 'cap_12='+this.ad_cap+';';
        }

        //adding ref/s/
        if (no_keyvalue.inArray("ref") === false) {
            var rexp = /ref=([^&]+)/ig;
            var match;
            while ((match = rexp.exec(location.search)) != null) {
                src_params += 'utm_hp_ref='+match[1]+';';
            }
        }

        if (no_keyvalue.inArray("qcs") === false) {
	    src_params += (a ? a.replace(/\|{0,1}Q_/gi,';qcs=').replace(/^;/,'') + ';' : '');
        }
        
        //end of quantcast segments
        return src_params;
    },

    timeout_store: {},
	
    ad_move_to_place : function(spot_name,post_load)
    {
        
		var spot = HPAds.ad_store[spot_name];
        var type = spot.ad_type;
		
        var width = spot.ad_container_width;
        if( 'by_request' == type && !post_load && !spot.defer)
        {
	    setTimeout(function(){HPAds.ad_reload(spot_name)},2000);
        }
        else if( 'dom_move' == type && !post_load && !('pushdown' == spot_name && 'Explorer' == HPBrowser.nameBrowser()) )
        {
            //console.log('moving by DOM: ' + spot_name);
			document.getElementById('ad_' + spot_name).innerHTML = '';
            document.getElementById('ad_' + spot_name).appendChild(document.getElementById('ad_store_' + spot_name));
            YAHOO.util.Dom.removeClass('ad_store_' + spot_name, 'ad_store');
        }
        else if('css_positioned' == type)
        {
            
			var adCont = document.getElementById('ad_store_' + spot_name);
			  //console.log(spot_name + ': ' + adCont.clientWidth + 'x' + adCont.clientHeight);
			  if (adCont.clientHeight > 59)
			  {
				  var im = document.createElement('IMG');
				  im.src = '/images/spacer.gif';
				  im.width = adCont.clientWidth;
				  im.height = adCont.clientHeight;
				  Dom.setStyle(im, 'margin', '0');
				  Dom.setStyle(im, 'padding', '0');
				  var posCont = document.getElementById('ad_' + spot_name);
				  if (posCont.hasChildNodes()) {posCont.removeChild(posCont.firstChild);}
				  document.getElementById('ad_' + spot_name).appendChild(im);
				  var placeholder_position = YAHOO.util.Dom.getXY(im);
				  var wrapper_horiz_offset = YAHOO.util.Dom.getXY(document.getElementById('wrapper'))[0];
				  var wrapper_vert_offset = YAHOO.util.Dom.getXY(document.getElementById('wrapper'))[1];
				  adCont.style.top = parseInt(parseInt(placeholder_position[1]) - wrapper_vert_offset) + 'px';
				  adCont.style.left = parseInt(parseInt(placeholder_position[0] - wrapper_horiz_offset)) + 'px';
				  YAHOO.util.Dom.removeClass(adCont, 'ad_store');
				  adCont.style.visibility = 'visible';
				  adCont.style.position = 'absolute';
				  //console.log('moving by CSS: ' + spot_name + ' height: ' + adCont.clientHeight);
				  if(HPAds.timeout_store[spot_name])
				  {
					  clearInterval(HPAds.timeout_store[spot_name].interval);
				  }
				  if(spot.positioned_callback && typeof(spot.positioned_callback)=='function') spot.positioned_callback();
			  }
			  else if (!HPAds.timeout_store[spot_name] )
			   {
					 //console.log('setting interval for attempt 1 of ' + spot_name);
					 HPAds.timeout_store[spot_name] = {'interval':setInterval(function(){HPAds.ad_move_to_place(spot_name);}, 200),'attempt':1}
			  }
			  else if (HPAds.timeout_store[spot_name].attempt < 12)
			  {
				  HPAds.timeout_store[spot_name].attempt++;
				  //console.log('setting interval for attempt ' + HPAds.timeout_store[spot_name].attempt + ' of ' + spot_name);
			  }
			  else
			  {
				  clearInterval(HPAds.timeout_store[spot_name].interval);
				  HPAds.timeout_store[spot_name] = null;
				  HPAds.ad_store[spot_name] = null;
				  var store_to_clear = document.getElementById('ad_store_' + spot_name);
				  var x = store_to_clear.parentNode;
				  x.removeChild(store_to_clear);
				  
				  //console.log( spot_name + ' ran out of time');
			  }
			  
        }
    },
    
    ad_store_move_to_place: function(post_load)
    {
        var AS = HPAds.ad_store;
        for (i in AS)
        {
        	if(AS[i] && typeof(AS[i]) == 'object') {
                HPAds.ad_move_to_place(i,post_load);
        	}
        }
        if(location.href.match('debugadcode')) {
        	jQuery('script[src*="PlayerSeed.js"]').each(function(index){
        		var _isComm = jQuery(this).attr('src').match('&siteSection=');
        		var _debugBox = '<div style="padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px;clear:both">' +
        		'Player: 5min ' + (_isComm ? 'commercial' : 'classic');
						var _sc = commercial_video.site_and_category !== "" ? commercial_video.site_and_category : "N/A";
						if(_isComm && typeof(commercial_video) == "object") _debugBox += "<br />Site Section: " +_sc;
						var _vp = commercial_video.package !== "" ? commercial_video.package : "N/A";
        		if(_isComm && typeof(commercial_video) == "object") _debugBox += '<br />Sponsorship: ' + _vp;
        		_debugBox += '</div>';
                jQuery(this).parent().append(_debugBox);
        	});
        	jQuery('script[src*="videoplayer/loader.js"]').each(function(index){
        		var _debugBox = '<div style="padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px;clear:both">' +
        		'Player: Brightcove' +
        		'<br />Sponsorship: ' + AOLVP_cfg[index].sponsorship +
        		'</div>';
        		jQuery('#' + AOLVP_cfg[index].id).after(_debugBox);
        	});
        }
    },
    
    ad_reload: function(spot_name, ad_holder_id, replace_el)
    {
        if(!HPAds.ad_check_page_config(spot_name))
        {
            return false;
        }

        var holder_el;
	    if(!ad_holder_id || ad_holder_id==''){
	        if('slideshow_300x250_req' === spot_name) {
                holder_el = jQuery('.ad_wrapper[id^="ad_slideshow_"]:visible');
            } else if('slideshow_728x90_req' === spot_name) {
                holder_el = jQuery('.ad_wrapper[id^="ad_slideshow_"]:visible');
            } else {
                holder_el = jQuery('#ad_' + spot_name);
	        }
	    } else {
            holder_el = jQuery('#' + ad_holder_id);
        }
        holder_el = holder_el[0]; // casting jquery object to javascript object

        if(holder_el && HPAds.ad_store[spot_name]) {
            // refresh rate checking, mostly for load_mode=by_request, re:#10643
            if(
               HPAds.ad_store[spot_name].reload_count
               && HPAds.ad_store[spot_name].refresh_rate
               && (HPAds.ad_store[spot_name].reload_count % Math.round(100 / HPAds.ad_store[spot_name].refresh_rate))
            ) {
                HPAds.ad_store[spot_name].reload_count++;
                return false;
            }
            //------------------------------------------------------------------
            var ad_content = HPAds.ad_store[spot_name].ad_content;
            try {
                var adtech_data = jQuery.parseJSON(ad_content);
                if ( "undefined" != typeof(adtech_data.adRealMediaPos) ) {
                	realmedia_url = '/ads/ads_realmedia.php?ad_pos='+adtech_data.adRealMediaPos+'&ad_name='+spot_name+'&site='+HPConfig.site;
                	holder_el.innerHTML = '<iframe id="'+ad_holder_id+'_proxy" src="'+realmedia_url+'" scrolling="no" frameborder="no" border="0" width="300" height="250" style="width:300px;height:250px;"></iframe>';
                	if(location.href.match('debugadcode')) {
	                    var debugadcode = jQuery('<div style="position:relative;z-index:800"><div style="z-index:800;position:absolute;top:0px;left:0px;padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px"><div style="width:250px;font-size:11px;font-weight:bold">RealMedia</div>Position: ' + adtech_data.adRealMediaPos + '</div></div>');
	                    jQuery(holder_el).after(debugadcode);
	                }
                }
                else {
	                adtech_data.magic_number = HPAds.revsplit.getAdId(spot_name, adtech_data.magic_number);
	                
	                if (adtech_data.height == 'RR') {
	                    htmlAdWHDyn(adtech_data.magic_number, adtech_data.sizes, adtech_data.call_type, holder_el);
	                } else {
	                    htmlAdWH(adtech_data.magic_number, adtech_data.width, adtech_data.height, adtech_data.call_type, holder_el);
	                }
	                
	                if("undefined" != typeof(adtech_data.debugadcode) && adtech_data.debugadcode) {
	                    var debugadcode = jQuery('<div style="position:relative;z-index:800"><div style="z-index:800;position:absolute;top:0px;left:0px;padding:5px;background-color:#e8d4f4;font-family:arial,helvetica,sans-serif;font-size:9px"><div style="width:250px;font-size:11px;font-weight:bold">AdTech</div>' + adtech_data.debugadcode.replace('customAdId', adtech_data.magic_number) + '</div></div>');
	                    jQuery(holder_el).after(debugadcode);
	                }
                }
                
            } catch (e) {
                var ord = parseInt(Math.random() * 1000000000000000);
                if(/ajax_ord=/i.test(ad_content)) {
                    ad_content = ad_content.replace(/ajax_ord=\d*;/ig, 'ajax_ord=' + ord + ';');
                }
                else {
                    ad_content = ad_content.replace(/ord=/ig, 'ajax_ord=' + ord + ';ord=');
                }
                if (HPAds.ad_store[spot_name].slug) {
                    holder_el.className = holder_el.className + ' ad_wrapper_' + HPAds.ad_store[spot_name].slug;
                }
                if (typeof replace_el !== 'undefined') jQuery(holder_el).replaceWith(ad_content);
				else holder_el.innerHTML = ad_content;
            }
            
            if(HPAds.ad_store[spot_name].reload_count) HPAds.ad_store[spot_name].reload_count++; else HPAds.ad_store[spot_name].reload_count = 1;
            
            if (spot_name == 'quickread') { 
                HPAds.ad_html_wh(HPConfig.current_vertical_name, 'quickread');
            }

            if ( (spot_name == 'slideshow_300x250_req') && (jQuery.isArray(HPConfig.entry_tags)) ) {
                var current_vertical_name = HPConfig.entry_tags.inArray('healthy-living-health-news') ? 'healthy-living-health-news' : HPConfig.current_vertical_name
                HPAds.ad_html_wh(current_vertical_name, 'slideshow');
            }
        }
    },

    ad_html_wh: function (vert, placement)
    {
        HPUtil.appendScript('/ads/ad_html_wh.php?vert='+vert+'&placement='+placement);
    },

    ad_check_handlers:
    {
        referer: function(params)
        {
		   return (document.referrer.search(params) >= 0  );
        }
    },
    
    ad_check_wrapper: function(handler, params)
    {
        if(typeof(this.ad_check_handlers[handler]) != 'undefined')
        {
		   return this.ad_check_handlers[handler](params);
        }
        else
            return true;
    },
    
    trackSponsorContent: function(urlTmpl, sponsorName)
    {
        if (sponsorName && sponsorName.length)
        {
            HPTrack.trackPageview(urlTmpl.replace(/__SPONSOR__/g, sponsorName));
        }
    },
	
	ad_flight_to_store: function(ad_position_name, ad_content, date_start, date_end)
	{
		if("undefined" == typeof(HPAds.ad_timezone_store[ad_position_name])) {
			HPAds.ad_timezone_store[ad_position_name] = new Array();
		}
		
		HPAds.ad_timezone_store[ad_position_name].push({
			'content': ad_content,
			'date_start': date_start,
			'date_end': date_end
		});
	},
	
	time_check: function(ad_position_name)
	{
        var d = new Date();
        var date_for_compare = '';
        date_for_compare += d.getFullYear();
        
        var month = d.getMonth() + 1;
        month += '';
        if(1 == month.length) {
            date_for_compare += '0';
        }
        date_for_compare += month;

        var day = d.getDate() + '';
        if(1 == day.length) {
            date_for_compare += '0';
        }
        date_for_compare += day;
        
        var hours = d.getHours() + '';
        if(1 == hours.length) {
            date_for_compare += '0';
        }
        date_for_compare += hours;
        
        var minutes = d.getMinutes() + '';
        if(1 == minutes.length) {
            date_for_compare += '0';
        }
        date_for_compare += minutes;
        date_for_compare = parseInt(date_for_compare);
		
        jQuery(HPAds.ad_timezone_store[ad_position_name]).each(function(i, element){
			try{
				if(element.date_start >= date_for_compare || element.date_end <= date_for_compare) {
					HPAds.ad_timezone_store[ad_position_name].splice(i, 1);
				}
			}catch(e) {
				HPAds.ad_timezone_store[ad_position_name].splice(i, 1);
			}
        });
	},
	
	ad_flight_store_render: function(ad_position_name, execute_all)
	{
		try {
			if (!execute_all) {
				HPAds.ad_timezone_store[ad_position_name] = new Array(HPAds.ad_timezone_store[ad_position_name].pop());
			}
			
			jQuery(HPAds.ad_timezone_store[ad_position_name]).each(function(i, element){
				document.write(element.content);
			});
		} catch(e){}
	},
	
	page_config_set: function(name)
	{
		if (typeof HPAds.full_page_config.flights != 'undefined') {
			for (var i = 0; i < HPAds.full_page_config.flights.length; i++) {
				if (HPAds.full_page_config.flights[i].name == name) {
					HPAds.curr_page_config = HPAds.full_page_config.flights[i];
					break;
				}
			}
		}
	},
	
	ad_check_page_config: function (ad_position)
	{
		var result = (typeof ad_overrides == 'undefined' || (ad_overrides.spots && jQuery.inArray(ad_position,ad_overrides.spots) > -1) );

		if (!HPAds.curr_page_config && (typeof aol_devil_flag !== "undefined") && aol_devil_flag ) {
		    HPAds.page_config_set("devil");
		}
		
		if (HPAds.curr_page_config) {
			if (HPAds.curr_page_config.mode == 'all_but') {
				result = (jQuery.inArray(ad_position, HPAds.curr_page_config.spots) == -1);
			} else {
				result = (jQuery.inArray(ad_position, HPAds.curr_page_config.spots) > -1);
			}
		}
		
		return result;
	},
	
	ad_onload: function(e,fn){
		jQuery(e).bind('load',function(){
			eval(fn)
		});
	},

	ad_uac_onload_handler: function(selector_to_check_on_page_ready, ad_wrapper_selector, css_class_to_add, calls_count)
	{
		var ad_wrapper_selector = "#"+jQuery(ad_wrapper_selector).parent().parent().attr("id");
		var selector_to_check_on_page_ready = typeof selector_to_check_on_page_ready!=="undefined"?ad_wrapper_selector + selector_to_check_on_page_ready:ad_wrapper_selector;
		var _calls_count = calls_count || 3;
		var interval_counter = 1;
		var interval_handle = setInterval(function(){
			if(jQuery(selector_to_check_on_page_ready).length){
				jQuery(ad_wrapper_selector).addClass(css_class_to_add);
			}
			if(_calls_count == interval_counter)
				clearInterval(interval_handle);
			interval_counter++;
		},300);
	},
	
	get_banner_ids: function()
	{
	    var result = new Array();
	    try {
            jQuery('iframe[title="Ad"]').each(function(i, el){
                var banId = jQuery(el).attr('banid').split('|');
                if('undefined' != typeof(banId[0]) && banId[0].length) {
                   result.push(banId[0]);
               }
            });
	    } catch(e){}

	    return result;
	},
    
	get_banners_str: function() {
	    try {
	        var banners = HPAds.get_banner_ids();
	        
	        return banners.join();
	    } catch(e){
	        return '';
	    }
	},
	
	lookbook : {
		click_track : function(el){
				if(typeof HPAds.lookbook.href !== "undefined"){
					jQuery(el).each(function(){ 
					  this.href = HPAds.lookbook.href + this.href;
					});
				}
			},
			imp_track : {
				init : function(el){
					if(typeof HPAds.lookbook.src!=="undefined"){
						this.setup(el)
					}
				},
				rand : function() {
					return Math.floor(Math.random()*10000000);
				},
				setup : function(el){ 
					if(jQuery("div.hp-lookbook-tracking").length==0){
						jQuery(el).append('<div class="hp-lookbook-tracking" style="display:none;"></div>');
					}
					this.exec();
				},
				exec : function(){
					jQuery("div.hp-lookbook-tracking").append('<img src="'+HPAds.lookbook.src+'?'+this.rand()+'" alt="" border="0" height="1" width="1"/>');
				}
		  }
	},

    ad_sharebox_260x60_fix : function()
    {
        jQuery(document).ready(function(){
            setTimeout(function(){
                if(jQuery('#ad_sharebox_260x60 iframe').height() > 10){
                    jQuery('#ad_sharebox_260x60').parent().addClass('padding_bottom_5 margin_right_20 block');
                }
                if (jQuery.browser.msie){
                    jQuery('.ad_share_box').addClass('block');
                }
            },2000);
        });
    }
}

huff.unit('tmp/hp_ads', function(ready){ ready(HPAds) });

window.sprintf||(window.sprintf=function(a){return a});window._||(window._=function(a){return a});var TwitterUtil={elapsedTime:function(e,c){var b=e;var a;var f;f=new Date(e).getTime();if(c){b=this.fixDate(b);a=(new Date().getTime()-new Date(b).getTime())/1000;if(isNaN(a)){a=(new Date().getTime()-f)/1000}}else{a=(new Date().getTime()-f)/1000}var d=function(h){return h==1};if(a<60){return _("less than a minute ago")}if(a<60*60){var g=Math.floor(a/60);return d(g)?sprintf(_("%s minute ago"),g):sprintf(_("%s minutes ago"),g)}if(a<60*60*24){var g=Math.floor(a/60/60);return d(g)?sprintf(_("%s hour ago"),g):sprintf(_("%s hours ago"),g)}if(a<60*60*24*7){var g=Math.floor(a/60/60/24);return d(g)?sprintf(_("%s day ago"),g):sprintf(_("%s days ago"),g)}if(a<60*60*24*31){var g=Math.floor(a/60/60/24/7);return d(g)?sprintf(_("%s week ago"),g):sprintf(_("%s weeks ago"),g)}if(a<60*60*24*365){var g=Math.floor(a/60/60/24/31);return d(g)?sprintf(_("%s month ago"),g):sprintf(_("%s months ago"),g)}var g=Math.floor(a/60/60/24/365);return d(g)?sprintf(_("%s year ago"),g):sprintf(_("%s years ago"),g)},fixDate:function(e){if(HPBrowser.isIEOld()){var b=e.split(" ");var c=b.pop();return b.slice(0,3).concat([c]).concat(b.slice(3)).join(" ")}else{return e}},linkifyTextLinks:function(a){return a.replace(/[a-z]+:\/\/[a-z0-9-_]+\.[a-z0-9-_:~%&\?\/.=]+[^:\.,\)\s*$]/ig,function(b){return'<a href="'+b+'" target="_blank">'+((b.length>25)?b.substr(0,24)+"...":b)+"</a>"})},twittify:function(b){var a=function(d){return d.replace(/(^|[^\w]+)\@([a-zA-Z0-9_]{1,15})/g,function(e,g,f){return g+'<a href="http://twitter.com/'+f+'" target="_blank" class="twitter-anywhere-user">@'+f+"</a>"})};var c=function(d){return d.replace(/(^|[^\w'"]+)\#([a-zA-Z0-9_]+)/g,function(e,g,f){return g+'#<a href="http://search.twitter.com/search?q=%23'+f+'" target="_blank">'+f+"</a>"})};return c(a(this.linkifyTextLinks(b)))},arrayChunk:function(c,e){e=parseInt(e,10);e=isNaN(e)||!e?1:e;var d=[];var a=c.length;for(var b=0;b<a;b+=e){d.push(c.slice(b,b+e))}return d},ucwords:function(a){a=a||"";return a.toLowerCase().replace(/\w+/g,function(b){return b.charAt(0).toUpperCase()+b.substr(1)})}};huff.unit("tmp/twitter_util",function(a){a(TwitterUtil)});
huff.unit("tmp/aol_search",function(a){(function(b){a(window.AOLSearch={changeTab:function(d,c){if(c=="news"){b("#aol-web-search").hide();b("#aol-news-search").show();if(HPConfig.page_type=="frontpage"){b(".aol-tabs > li > a").removeClass("vertical_color");b(d).addClass("vertical_color")}else{b(".aol-tabs > li > a").removeClass("active");b(d).addClass("active")}}else{if(c=="web"){b("#aol-news-search").hide();b("#aol-web-search").show();if(HPConfig.page_type=="frontpage"){b(".aol-tabs > li > a").removeClass("vertical_color");b(d).addClass("vertical_color")}else{b(".aol-tabs > li > a").removeClass("active");b(d).addClass("active")}}}},focusInput:function(c){if(c.value=="Search News and Topics"||c.value=="Search the Web"||c.value=="*Please add search phrase"||c.value=="Search the Huffington Post"||c.value=="Search AOL Healthy Living"){b("#"+c.id).attr("value","").removeClass("red").removeClass("color_a1a1a1").addClass("color_111111")}},blurInput:function(c){if(c.value==""){if(c.id[0]=="w"){b("#"+c.id).attr("value","Search the Web").removeClass("red").addClass("color_a1a1a1")}else{if(HPConfig.current_vertical_name=="healthy-living"){b("#"+c.id).attr("value","Search AOL Healthy Living").removeClass("red").addClass("color_a1a1a1")}else{if(c.id[0]=="h"){b("#"+c.id).attr("value","Search the Huffington Post").removeClass("red").addClass("color_a1a1a1")}else{b("#"+c.id).attr("value","Search News and Topics").removeClass("red").addClass("color_a1a1a1")}}}}},submitForm:function(d,c){if(b(d).attr("value")==""||b(d).attr("value")=="Search News and Topics"||b(d).attr("value")=="Search the Web"||b(d).attr("value")=="Search the Huffington Post"||b(d).attr("value")=="Search AOL Healthy Living"||b(d).attr("value")=="*Please add search phrase"){b(d).attr("value","*Please add search phrase").removeClass("color_a1a1a1").addClass("red");return false}else{c.submit()}}})})(jQuery)});
var ElectionWidgets={per_page:1,pages:4,cur_page:1,showed_pages:[],goState:function(c){var d=c.options.length;for(var b=0;b<d;b++){if(c.options[b].selected){var a="http://www.pollster.com/polls/"+c.options[b].value.toLowerCase();window.location.href=a;break}}},changeTab:function(b,d,f,c){if(typeof b=="undefined"||typeof d=="undefined"||typeof f=="undefined"||typeof c=="undefined"){return false}var f=f.childNodes;for(var e=0;e<f.length;e++){if(f[e].nodeType==1){if(f[e].id==b){Dom.removeClass(b,"election-nonactive-tab");Dom.addClass(b,"election-active-tab")}else{Dom.removeClass(f[e].id,"election-active-tab");Dom.addClass(f[e].id,"election-nonactive-tab")}}}var a=c.childNodes;for(e=0;e<a.length;e++){if(a[e].nodeType==1){if(a[e].id==d){Dom.setStyle(d,"display","block")}else{Dom.setStyle(a[e].id,"display","none")}}}}};huff.unit("tmp/election_widgets",function(a){a(ElectionWidgets)});
function getSlide(b,a){if(a=="INPUT"||a=="TEXTAREA"){return false}if(HPConfig.slideshow_type=="pollajax"){switch(b){case"prev":window["oSlideshowPollAjax_"+HPConfig.slideshow_id].prev();break;case"next":window["oSlideshowPollAjax_"+HPConfig.slideshow_id].next();break}return false}else{if(HPConfig.slideshow_type=="fullscreen"){switch(b){case"prev":if(!window.slideshow_fullscreen){window["FullScreen_"+HPConfig.slideshow_id].openSlideShow();return false}window["FullScreen_"+HPConfig.slideshow_id].prevPhoto();break;case"next":if(!window.slideshow_fullscreen){window["FullScreen_"+HPConfig.slideshow_id].openSlideShow();return false}window["FullScreen_"+HPConfig.slideshow_id].nextPhoto();break;case"esc":if(window.slideshow_fullscreen){window["FullScreen_"+HPConfig.slideshow_id].closeSlideShow();return}break;case"fullscreen":if(!window.slideshow_fullscreen){window["FullScreen_"+HPConfig.slideshow_id].openSlideShow();return}break;case"up":E.removeListener(window,"mousemove");HPUtil.show("fs_page_layout_"+HPConfig.slideshow_id);break;case"down":E.on(window,"mousemove",window["FullScreen_"+HPConfig.slideshow_id].showPageLayout,null,window["FullScreen_"+HPConfig.slideshow_id]);HPUtil.hide("fs_page_layout_"+HPConfig.slideshow_id);break}return false}else{if(HPConfig.slideshow_type=="adbigshot"){switch(b){case"prev":if(!window.slideshow_fullscreen){window["BigShot_"+HPConfig.slideshow_id].showBigShot();return false}window["BigShot_"+HPConfig.slideshow_id].prevPhoto();break;case"next":if(!window.slideshow_fullscreen){window["BigShot_"+HPConfig.slideshow_id].showBigShot();return false}window["BigShot_"+HPConfig.slideshow_id].nextPhoto();break;case"esc":if(window.slideshow_fullscreen){window["BigShot_"+HPConfig.slideshow_id].closeSlideShow();return}break;case"fullscreen":if(!window.slideshow_fullscreen){window["BigShot_"+HPConfig.slideshow_id].openSlideShow();return}break}return false}}}}var HPHotKeys={init:function(){var f=new YAHOO.util.KeyListener(document,{ctrl:false,keys:37},function(h,g){getSlide("prev",(g[1].srcElement||g[1].target).nodeName)});var e=new YAHOO.util.KeyListener(document,{ctrl:false,keys:39},function(h,g){getSlide("next",(g[1].srcElement||g[1].target).nodeName)});f.enable();e.enable();if(HPConfig.slideshow_type=="fullscreen"){var d=new YAHOO.util.KeyListener(document,{ctrl:false,keys:27},function(h,g){getSlide("esc",(g[1].srcElement||g[1].target).nodeName)});var c=new YAHOO.util.KeyListener(document,{ctrl:false,keys:38},function(h,g){getSlide("up",(g[1].srcElement||g[1].target).nodeName)});var a=new YAHOO.util.KeyListener(document,{ctrl:false,keys:40},function(h,g){getSlide("down",(g[1].srcElement||g[1].target).nodeName)});d.enable();c.enable();a.enable();if(!HPBrowser.isIEOld()){var b=new YAHOO.util.KeyListener(document,{ctrl:false,keys:70},function(h,g){getSlide("fullscreen",(g[1].srcElement||g[1].target).nodeName)});b.enable()}}}};huff.unit("tmp/hot_keys",function(a){a(HPHotKeys)});
var Modal={};Modal.hideMaskCustom=new Array();Modal.showMaskCustom=new Array();Modal.ShowCommonHpLightbox=function(a){E.onAvailable("hp_vertical_common_lightbox",function(b){b=b.data||{};if(b.title){Dom.getElementsByClassName("hp_common_message","div","hp_vertical_common_lightbox")[0].getElementsByTagName("span")[0].innerHTML=b.title}if(b.vertical){Dom.getElementsByClassName("close_modal","a","hp_vertical_common_lightbox")[0].getElementsByTagName("img")[0].src="/images/modal/close-"+b.vertical+".gif";Dom.addClass(Dom.getElementsByClassName("modal_inner","div","hp_vertical_common_lightbox")[0],b.vertical+"_modal_inner")}Modal.id="hp_vertical_common_lightbox";Modal.setPosition();Modal.showMask(Modal.id)},{data:a},true,true)};Modal.SetWideFormat=function(){jQuery(".modal_inner").first().addClass("wide_popup")};Modal.SetHtml=function(a,b){E.onAvailable("hp_vertical_common_lightbox",function(d){var c=Dom.getElementsByClassName("content","div",Modal.id);if(c.length){c[0].innerHTML='<div id="sf_ad_block_'+Modal.id+'" class="ad_block ad_wide_top floatright"></div>'+d.html;if(typeof(b)=="function"){b(c[0])}}else{HPError.e("There's no container with class content")}},{html:a},true,true)};Modal.buildMask=function(){if(!this.mask){this.mask=document.createElement("DIV");this.mask.id="wrapper_mask";this.mask.className="mask";this.mask.style.zIndex="887";this.mask.innerHTML="&nbsp;";var a=document.body.firstChild;if(a){document.body.insertBefore(this.mask,document.body.firstChild)}else{document.body.appendChild(this.mask)}}};Modal.hideMask=function(e){e=e||false;var d=false;var a=false;if(e){d=e.show_qr_ad||false;a=e.show_mask||false}if(Modal.mask){if(Modal.hideMaskCustom.length){for(var b=0;b<Modal.hideMaskCustom.length;b++){Modal.hideMaskCustom[b]()}}this.mask=Modal.mask;var c="huff_modal";if(typeof(Modal.id)!="undefined"){c=Modal.id;delete Modal.id}YAHOO.util.Dom.setStyle(c,"visibility","hidden");if(!a){Modal.mask.style.display="none";YAHOO.util.Dom.removeClass(document.body,"masked")}}jQuery("#qr_ad")&&!d&&jQuery("#qr_ad").html("");jQuery("#snn_qr_ad")&&jQuery("#snn_qr_ad").hide();jQuery("#qr_frame")&&jQuery("#qr_frame").attr("src","");jQuery("#ad_im")&&jQuery("#ad_im").html();jQuery("#ad_email")&&jQuery("#ad_email").html("");jQuery("#ad_300_250_1")&&HuffPoUtil.show("ad_300_250_1");Modal.HideEmbed();!a&&Modal.ShowEmbed("object:not(div.content object), embed:not(div.content embed)");Modal.restoreDefaults()};Modal.setWidth=function(c){var b=document.getElementById(Modal.id);if(b){b.style.width=c+"px";b.style.marginLeft="-"+(c/2)+"px"}var a=document.getElementById("huff_snn_modal_common_inner");if(a){a.style.width=c+"px"}};Modal.restoreDefaults=function(a){a=a||400;el=document.getElementById("huff_modal_common_inner");if(el){el.innerHTML='<img src="/images/lightbox/loading.gif" class="block margin_auto" width="24" height="24" alt="">'}Modal.setWidth(a)};Modal.setMaskListener=function(b){var a=((typeof(b)=="function")?b:Modal.hideMask);E.removeListener("wrapper_mask","click");E.addListener("wrapper_mask","click",a)};Modal.showMask=function(c){if(!this.mask){Modal.buildMask();Modal.movePanel()}if(this.mask){var b="huff_modal";if(typeof(c)!="undefined"){Modal.id=c;b=c}if(Modal.showMaskCustom.length){for(var a=0;a<Modal.showMaskCustom.length;a++){Modal.showMaskCustom[a]()}}YAHOO.util.Dom.addClass(document.body,"masked");this.sizeMask();Modal.setMaskListener();this.mask.style.display="block";YAHOO.util.Dom.setStyle(this.mask,"opacity",".7");Modal.setPosition();YAHOO.util.Dom.setStyle(b,"visibility","visible");if(null!==$("ticker_flash")){HuffPoUtil.hide("ticker_flash")}if(null!==$("ew_FlashDiv")){HuffPoUtil.hide("ew_FlashDiv")}if(null!==$("ad_300_250_1")){HuffPoUtil.hide("ad_300_250_1")}Modal.HideEmbed();Modal.ShowIframe()}};Modal.sizeMask=function(){if(Modal.mask){Modal.mask.style.height=YAHOO.util.Dom.getDocumentHeight()+"px";Modal.mask.style.width=YAHOO.util.Dom.getViewportWidth()+"px"}};Modal.extraEmbeds=["curtainunit","ad_leaderboard_top","ad_store_leaderboard_top"];Modal.ShowEmbed=function(a){Modal.ChangeEmbedState("visible",a)};Modal.HideEmbed=function(a){Modal.ChangeEmbedState("hidden",a)};Modal.ChangeEmbedState=function(e,a){if(typeof a=="undefined"){var d=document.getElementsByTagName("object");var c=document.getElementsByTagName("embed");for(var b=0;b<c.length;b++){c[b].style.visibility=e;if(c[b].getAttribute("belongs_modal")){c[b].style.display="visible"==e?"block":"none"}}}else{d=jQuery(a)}jQuery(d).each(function(){jQuery(this)[jQuery(this).attr("belongs_modal")?"show":"hide"]()});for(b=0;b<Modal.extraEmbeds.length;b++){if(Modal.extraEmbeds[b].length){var f=jQuery("#"+Modal.extraEmbeds[b]);f.css("visibility",e);if(f.attr("belongs_modal")){f[e==="visible"?"show":"hide"]()}}}};Modal.ShowIframe=function(){var a=$("huff_modal_common");YAHOO.util.Dom.removeClass(a,"hide_iframe");YAHOO.util.Dom.addClass(a,"show_iframe")};Modal.HideIframe=function(){var a=$("huff_modal_common");YAHOO.util.Dom.removeClass(a,"show_iframe");YAHOO.util.Dom.addClass(a,"hide_iframe")};Modal.applyDefault=function(){el=getElementById("modal_inner");el.style.width="652px";el.className="";Modal.HideIframe()};Modal.setPosition=function(){var a="huff_modal";if(typeof(Modal.id)!="undefined"){a=Modal.id}currentHeight=(document.body&&document.body.scrollTop)?document.body.scrollTop:document.documentElement.scrollTop;YAHOO.util.Dom.setStyle(a,"top",(currentHeight+20)+"px")};Modal.movePanel=function(){if(!Modal.mask){return}var a="huff_modal";if(typeof(Modal.id)!="undefined"){a=Modal.id}if(!Dom.hasClass(document.body,"masked")){currentHeight=(document.body&&document.body.scrollTop)?document.body.scrollTop:document.documentElement.scrollTop;YAHOO.util.Dom.setStyle(a,"top",(currentHeight+20)+"px")}};huff.unit("tmp/modal",function(a){a(Modal)});
var UserPoll={};UserPoll.entry_id=false;UserPoll.createPoll=function(){return false};huff.unit("tmp/user_poll",function(a){a(UserPoll)});
var QuickSNProject={};QuickSNProject.isLoadedDialog=false;QuickSNProject.followingPaging=false;QuickSNProject.userString=false;QuickSNProject.hideMask_cb=new Array();QuickSNProject.hideMask=function(a){HuffConnect.hideModal()};QuickSNProject.returnModalContainer=function(){return"huff_snn_modal_common_inner"};QuickSNProject.modalCache=[];QuickSNProject.showJoinDialog=function(){if(!this.isLoadedDialog){HuffConnect.showLoader()}else{this.isLoadedDialog=false}return false};QuickSNProject.GetDialogSuccess=function(a){HuffConnect.socialModal({inner_html:a.responseText});QuickSNProject.isLoadedDialog=true};QuickSNProject.GetDialogFail=function(a){HPError.e();HuffConnect.hideModal()};huff.unit("tmp/quick_snp",function(a){a(QuickSNProject)});
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var QuickLogin={};QuickLogin.SocialLogout=function(a){HuffConnect.SocialLogout(a);return};QuickLogin.FacebookLogout=function(a){HuffConnect.FacebookLogout(a);return};QuickLogin.pop=function(){HPConnect.Login();return};QuickLogin.onLoginSuccess=function(){HuffConnect.Login.onLoginSuccess();return};QuickLogin.googleAdsExec=function(a){_google_vertical_name=(typeof _google_vertical_name!="undefined")?_google_vertical_name:"";_google_hints=(typeof _google_hints!="undefined")?_google_hints:"";_google_test_channel=(typeof _google_test_channel!="undefined")?_google_test_channel:"";if(document.getElementById("contextual_ad_unit_1")){HuffPoUtil.WEDGJE.google_ads.init({ad_channel:"8073093451,"+_google_vertical_name+",9299244974,"+_google_test_channel,hints:_google_hints+" "+a,hp_dest_id:"contextual_ad_unit_1"})}if(document.getElementById("contextual_ad_unit_2")){HuffPoUtil.WEDGJE.google_ads.init({ad_channel:"8073093451,"+_google_vertical_name+",4661083346,"+_google_test_channel,hints:_google_hints+" "+a,max_num_ads:"1",hp_dest_id:"contextual_ad_unit_2"})}HuffPoUtil.WEDGJE.google_ads.exec()};huff.unit("tmp/quick_login",function(a){a(QuickLogin)});
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var QuickFacebookInvite={invitationContentConfirmLink:_("http://www.huffingtonpost.com/"),lock:false,init:function(a){QuickFacebookInvite.invitationContent=sprintf(_("Please join me at %sHuffington Post%s"),"&lt;a href=&quot;"+_("http://www.huffingtonpost.com/")+"&quot;&gt;","&lt;/a&gt;!&lt;fb:req-choice url=&quot;");if(a){QuickFacebookInvite.invitationContent+=a}else{QuickFacebookInvite.invitationContent+=QuickFacebookInvite.invitationContentConfirmLink}QuickFacebookInvite.invitationContent+="&quot; label=&quot;"+_("Confirm")+"&quot;/&gt;"},pop:function(a){if(!HPFB.authResponse){return false}jQuery.ajax({url:"/include/facebook.php",type:"POST",data:"app_friends="+HPFB.authResponse.userID+"&"+HPFB.getSessionForServer(),success:function(d,c,b){if(b.status!=200){return}if(d=="all"){if(typeof(a)=="function"){a()}else{HuffConnect.hideModal();HuffConnect.Login.onLoginSuccess()}}else{HuffConnect.hideModal();if("function"==typeof ConnectOverview.onSuccess){setTimeout(function(){ConnectOverview.onSuccess();ConnectOverview.onSuccess=false},100);return}else{QuickFacebookInvite.showInviteForm(d)}}},error:function(){HPError.e();return},timeout:7000})},showInviteForm:function(c){var a=575+((c!="")?(c.split(",").length/4*20):0);var b='<fb:request-form style="width:575px; height:580px;" action="';b+=window.location.href+'" method="POST" type="HuffingtonPost" invite="true" ';b+='content="'+QuickFacebookInvite.invitationContent+'">';if(c!=""){uids=c.split(",");b+='<div style="padding:20px"><h2>'+sprintf(_("%s of your friends are already here!"),uids.length)+"</h2>";j=0;for(i in uids){if(uids[i]==parseInt(uids[i])){b+='<div style="float:left;width:150px;padding-top:4px"><fb:name linked="false" uid="'+uids[i]+'"></fb:name></div>';j++;if(j==4){j=0;b+='<div style="clear:both"></div>'}}}b+="</div>"}b+='<div style="margin: 0 auto; width: 466px;"><fb:multi-friend-selector showborder="false" exclude_ids="'+c+'" ';b+='actiontext="'+_("Invite your friends to HuffPost")+'" rows="3" cols="3" bypass="cancel" showborder="false">';b+="</fb:multi-friend-selector></div>";b+="</fb:request-form>";FB.ui({method:"fbml.dialog",fbml:b,display:"iframe",width:1,height:1});return}};huff.unit("tmp/quick_facebook_invite",function(a){a(QuickFacebookInvite)});
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var FanAction={send_action:function(a,b){YAHOO.util.Connect.asyncRequest("POST","/users/favorite-bloggers/fan_action.php",this,"fan="+a+"&action="+b)},success:function(d){resp=d.responseText;action=resp.substring(0,3);var b=resp.split("::");if(action=="add"){var a=b[2];SNProject.track(a,"user_follow")}fan=b[1];var c=document.getElementsByName(""+fan+"");if(action=="add"){for(i=0;i<c.length;i++){c[i].innerHTML="<B>"+_("added")+"</B>"}}else{if(action=="mov"){for(i=0;i<c.length;i++){c[i].innerHTML="<B>"+_("removed")+"</B>"}}else{HPError.e()}}},failure:function(a){HPError.e()}};huff.unit("tmp/fan_action",function(a){a(FanAction)});
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var QuickSubscribeUser={user_connected:false,pop:function(c,b,g,j){var d=c.split("_");c=d[0];g=g||1;if(!j){j="subscribe_user_email"}if(jQuery("#"+j).val()==""){alert(_("Please enter your email address."));$(j).focus();return false}if(!HPUtil.checkEmail(jQuery("#"+j).val())){alert(_("Please specify a valid e-mail."));$(j).focus();return false}HuffConnect.showLoader();var i=jQuery("#"+j).val();var a="/users/favorite-bloggers/get_subscribe_user.php";var f=b+"=1&daily=1&fid="+b+"&vertical="+c+"&ajax=1&update=1&mode=add";if(g){var e={post_data:f+"&third_party_user=1",url:a};f+="&email="+encodeURIComponent(i);jQuery.ajax({url:a,type:"POST",data:f,success:function(m,l,k){QuickSubscribeUser.Success(m,l,k,e);return},error:QuickSubscribeUser.Fail})}else{jQuery("#huff_modal_common_inner").html("<iframe id='alert_email_iframe' frameborder=no src='http://www.huffingtonpost.com/users/favorite-bloggers/get_subscribe_user.php?email="+encodeURIComponent(i)+"&iframe=1&fid="+b+"' style='width:544px; height:110px; visibility:hidden; overflow:hidden;' onload='QuickSubscribeUser.setIframeSize()'></iframe>")}return false},checkAll:function(){var b=false;if($("check_all").checked==true){b=true}var c=$("unsub_form");for(var a=0;a<c.length;a++){if(c.elements[a].type=="checkbox"){c.elements[a].checked=b}}},checkInput:function(a){if(a.value==_("Enter email address")){a.value="";jQuery(a).removeClass("color_ACACAC")}},Success:function(e,d,c,f){var a=HuffConnect.Login;if(c.status!=200){if(QuickSubscribeUser.user_connected){a.onLoginSuccess()}return}var b=function(){};if(QuickSubscribeUser.user_connected){b=function(){a.onLoginSuccess()}}HuffConnect.socialModal({inner_html:e,onclose:b});return},Fail:function(){HuffConnect.hideModal();var a=HuffConnect.Login;if(QuickSubscribeUser.user_connected){a.onLoginSuccess()}return},Subscribe:function(b){jQuery("#subscribe_loader").css("display","block");var g=jQuery("#unsub_form").get(0);var d=new Array();var a=0;for(var c=0;c<g.length;c++){if(g.elements[c].type=="checkbox"){d[a]=g.elements[c].name;a+=1;if(g.elements[c].checked==true){g.elements[c].value=1}else{g.elements[c].value=0}}}var f="update=1&email="+encodeURIComponent(b);for(c=0;c<d.length;c++){var e=$(d[c]+"");if(e!=null){f+="&"+escape(e.name)+"="+escape(e.value)}}jQuery.ajax({url:"/subscription/get_email_alerts.php",type:"POST",data:f,success:QuickSubscribeUser.SubscribeSuccessEmail,error:QuickSubscribeUser.SubscribeFailEmail});return false},SubscribeSuccessEmail:function(e,d,c){if(c.status!=200){return}var b=jQuery("#subscribe_alerts_div");var a="<div class='center' style='text-align:left;padding-left:159px;padding-top:10px;background-color:#FAFAFA;border-bottom:1px solid #EDEDED;border-top:1px solid #EDEDED;'><h3 style='font-size:18px;padding-bottom:5px;'>"+_("Thank You")+"</h3><p class='note padding_5'>"+_("Your subscription settings have been updated")+"</p></div><p class='privacy' style='margin-top:10px;'><a href='/privacy'>"+_("Privacy Policy")+"</a></p>";if(b.length){b.html(a)}else{if(QuickSubscribeUser.user_connected){HCL.onLoginSuccess()}HuffConnect.hideModal()}return},SubscribeFailEmail:function(){if(QuickSubscribeUser.user_connected){HCL.onLoginSuccess()}HPError.e()},setIframeSize:function(){h=document.getElementById("alert_email_iframe").myheight||770;try{document.getElementById("alert_email_iframe").style.height=document.getElementById("alert_email_iframe").contentDocument.body.clientHeight+"px"}catch(a){document.getElementById("alert_email_iframe").style.height=h+"px"}document.getElementById("alert_email_iframe").style.visibility="visible"},pop2:function(a,d){d=d||"";var c="";var e="f32=1&"+d+"=1";var b="/users/alerts/signup.php?"+e;HuffConnect.socialModal({url:b,modal_head_image:"",modal_subhead_image:"",width:595})},getAlerts:function(b,c,a,d){d=d||false;if(b.email.value==""){alert(_("Please enter your email address."));b.email.focus();return false}if(!(b.email&&HPUtil.checkEmail(b.email.value))){alert(_("Please specify a valid e-mail."));b.email.focus();return false}if(d){HuffConnect.showLoader()}post_data="email="+encodeURIComponent(b.email.value);if(c){post_data+="&hide_close_button=1"}if(a){post_data+="&daily_brief=1"}YAHOO.util.Connect.asyncRequest("POST","/subscription/get_email_alerts.php",{success:QuickSubscribeUser.SubscribeSuccess,failure:QuickSubscribeUser.SubscribeFail},post_data)},SubscribeSuccess:function(a){HuffConnect.socialModal({inner_html:a.responseText})},SubscribeFail:function(a){HuffConnect.hideModal();HPError.e()}};huff.unit("tmp/quick_subscribe_user",function(a){a(QuickSubscribeUser)});
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var QuickSignup={checkSingupForm:function(b){if(undefined===b){b=""}var a={F_USERNAME:_("User Name"),F_ZIPCODE:_("Zip code"),F_EMAIL:_("Email"),F_OPTIN:_("Check Box"),F_PASSWORD:_("Password"),F_PASSWORDAGAIN:_("Confirm Password")};var e=$("signup_subscribe_form");var d="";$("form_signup_result").innerHTML="";for(var c=0;c<e.length;c++){if(e.elements[c].name=="F_EMAIL"&&e.elements[c].value!==""){if(!HPUtil.checkEmail(e.elements[c].value)){alert(_("Please specify a valid e-mail"));e.elements[c].value="";e.elements[c].focus();return false}}if(e.elements[c].name=="F_PASSWORDAGAIN"&&e.elements[c].value!==""){if(e.elements[c].value!==e.elements[c-1].value){alert(_("Please confirm your password"));e.elements[c].value="";e.elements[c].focus();return false}}if(e.elements[c].name=="F_OPTIN"&&e.elements[c].checked==true){e.elements[c].value=1}if(e.elements[c].value==""){alert("Fill in the field - "+a[e.elements[c].name]);e.elements[c].focus();return false}d=d+(escape(e.elements[c].name)+"="+encodeURIComponent(e.elements[c].value)+"&")}YAHOO.util.Connect.asyncRequest("POST",$("signup_subscribe_form").action,{success:function(f){QuickSignup.FormSuccess(f,b)},failure:QuickSignup.FormFail},d);return false},FormSuccess:function(b,a){if(b.responseText=="ok"){if($("creating_user")){$("creating_user").innerHTML="";$("creating_user").style.display="none"}if($("user_created")){$("user_created").style.display="block"}post_data="email="+encodeURIComponent(a);YAHOO.util.Connect.asyncRequest("POST","/subscription/get_email_alerts.php",{success:QuickSignup.SubscribeSuccess,failure:QuickSignup.SubscribeFail},post_data)}else{$("form_signup_result").innerHTML=b.responseText}},FormFail:function(a){alert(a.responseText)},SubscribeSuccess:function(a){if($("creating_user")){$("creating_user").style.display="block"}if($("user_created")){$("user_created").style.display="none"}if($("creating_user")){$("creating_user").innerHTML=a.responseText}else{HuffConnect.socialModal({inner_html:a.responseText})}},SubscribeFail:function(a){HuffConnect.hideModal();HPError.e()},Subscribe:function(b){jQuery("#subscribe_loader").css("display","block");var g=jQuery("#unsub_form").get(0);var d=new Array();var a=0;for(var c=0;c<g.length;c++){if(g.elements[c].type=="checkbox"){d[a]=g.elements[c].name;a+=1;if(g.elements[c].checked==true){g.elements[c].value=1}else{g.elements[c].value=0}}}var f="update=1&email="+encodeURIComponent(b);for(c=0;c<d.length;c++){var e=$(d[c]+"");if(e!=null){f+="&"+escape(e.name)+"="+escape(e.value)}}jQuery.ajax({url:"/subscription/get_email_alerts.php",type:"POST",data:f,success:QuickSignup.SubscribeSuccessEmail,error:QuickSignup.SubscribeFailEmail});return false},SubscribeSuccessEmail:function(e,d,c){if(c.status!=200){return}var b=jQuery("#subscribe_alerts_div");var a="<div class='center'><h3>"+_("Thank You")+"</h3><p class='note padding_5'>"+_("Your subscription settings have been updated")+"</p></div>";if(b.length){b.html(a)}else{if(QuickSubscribeUser.user_connected){HCL.onLoginSuccess()}HuffConnect.hideModal()}return},SubscribeFailEmail:function(){if(QuickSubscribeUser.user_connected){HCL.onLoginSuccess()}HPError.e()},CheckUsername:function(a){if(a!=""){$("ajax_uname").innerHTML='<img width="32" height="32" src="http://s.huffpost.com/images/loader.gif" />';var b="uname="+a+"&verify=username";YAHOO.util.Connect.asyncRequest("POST","/users/signup/inline_verify.php",{success:QuickSignup.UsernameVerifyResponse,failure:QuickSignup.UsernameVerifyFailed},b);return false}else{return false}},UsernameVerifyResponse:function(a){$("ajax_uname").innerHTML=a.responseText},UsernameVerifyFailed:function(){HPError.e()},CheckEmail:function(a){if(a!=""){$("ajax_email").innerHTML='<img width="32" height="32" src="http://s.huffpost.com/images/loader.gif" />';var b="email="+a+"&verify=email";YAHOO.util.Connect.asyncRequest("POST","/users/signup/inline_verify.php",{success:QuickSignup.EmailVerifyResponse,failure:QuickSignup.EmailVerifyFailed},b)}else{return false}},EmailVerifyResponse:function(a){$("ajax_email").innerHTML=a.responseText},EmailVerifyFailed:function(){HPError.e()},TwitterOauth:function(a){Provider.SignUp(a);return},TwitterUnconnect:function(){var a=QuickSignup;a.connected[a.selectedService]=false;a.toggleOverlays("twitter");a.fadeForm(true)}};huff.unit("tmp/quick_signup",function(a){a(QuickSignup)});
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var QuickFan={fan_timeout:null,pop_similar:function(a){HPTrack.trackPageview("/t/a/similar_bloggers");YAHOO.util.Connect.asyncRequest("GET","/users/favorite-bloggers/get_similar_bloggers.php?author="+a,{success:QuickFan.GetSimilarSuccess,failure:QuickFan.GetSimilarFail},{});return false},GetSimilarSuccess:function(a){HuffConnect.socialModal({inner_html:a.responseText,modal_subhead_image:"",modal_head_image:"",width:600})},GetSimilarFail:function(a){HPError.e();HuffConnect.hideModal()},pop:function(a){if(HuffCookies.getUserName()){QuickFan.becomeFan(a)}else{HPConnect.Login()}},become_fan_mouseover:function(){if(QuickFan.fan_timeout){clearTimeout(QuickFan.fan_timeout)}},become_fan_hovercard:function(c,e,b,g,a,d){a=a||27;g=g||[0,0];var c=c||window.event;var f=c.target||c.srcElement;var h=c.type.toLowerCase();d=d||e;if(f.getAttribute("floating_id")){return false}QuickFan.fan_timeout=setTimeout(function(){f.setAttribute("on_hover","yes");var i="";if(!HuffCookies.getUserName()){i='<div class="become_fan_tooltip"><div class="float_left bold"><img src="/contributors/'+b+'/headshot.jpg" class="float_left margin_right_5" /><div class="float_left become_fan_text">'+d.charAt(0).toUpperCase()+d.substr(1,d.length-1)+'<div class="margin_top_5"><img onclick="return QuickFan.hovercard_handle(this, \'hp_blogger_'+e.replace(/'/g,"\\'")+'\');" class="cursor_pointer social fan-bloger" src="/images/blank.gif"></div></div></div><div class="clear_first"></div><div class="become_fan_corner"><div class="first"></div><div class="second"></div></div></div>'}else{i='<div class="become_fan_tooltip"><div class="fp_loader">'+_("Loading...")+'</div><div class="become_fan_corner"><div class="first"></div><div class="second"></div></div></div>'}FloatingPrompt.embed(f,i,undefined,"top",{ignore_arrow:true,width:180,add_xy:[-72+g[0],g[1]+(HuffCookies.getUserName()?-50:-72)],class_name:"clear-overlay",fp_intersects:1});if(HuffCookies.getUserName()){var j="author_name=hp_blogger_"+encodeURIComponent(e);C.asyncRequest("POST","/web-services/author/friendship.php",{success:function(n){var k=JSON.parse(n.responseText);var l=k.friendship?"unfan-bloger":"fan-bloger";var m='<div class="become_fan_tooltip"><div class="float_left bold"><img src="/contributors/'+b+'/headshot.jpg" class="float_left margin_right_5" /><div class="float_left become_fan_text">'+d.charAt(0).toUpperCase()+d.substr(1,d.length-1)+'<div class="margin_top_5"><img onclick="return QuickFan.hovercard_handle(this, \'hp_blogger_'+e.replace(/'/g,"\\'")+'\');" class="cursor_pointer social '+l+'" src="/images/blank.gif"></div></div></div><div class="clear_first"></div><div class="become_fan_corner"><div class="first"></div><div class="second"></div></div></div>';FloatingPrompt.container.style.top=(parseInt(FloatingPrompt.container.style.top)-a).toString()+"px";FloatingPrompt.container.innerHTML=m},failure:function(){HPError.e()},timeout:10000},j)}},1000);return false},hovercard_handle:function(b,c){if(!HuffCookies.getUserName()){ConnectOverview.showBenefits({provider:"signup"});return false}var a=!jQuery(b).hasClass("fan-bloger");jQuery.ajax({url:"/users/favorite-bloggers/fan_action.php",data:"fan="+c+"&action="+(a?"delete":"add"),type:"POST",success:function(d){if(-1!==d.indexOf("::")){if(!a){jQuery(b).removeClass("fan-bloger").addClass("unfan-bloger")}else{jQuery(b).removeClass("unfan-bloger").addClass("fan-bloger")}}},error:function(){HPError.e()}});return false},becomeFan:function(a){jQuery.ajax({url:"/users/favorite-bloggers/fan_action.php",data:"fan="+a+"&action=add",type:"POST",success:QuickFan.Success,error:QuickFan.Fail});return},Success:function(e,d,c){if(c.status!=200){HuffConnect.hideModal();return}resp=e;action=resp.substring(0,3);if(action=="add"){var b=resp.split("::");SNProject.track(b[2],"user_follow");var f=b[3];var a=b[4];QuickFan.pop_email_alerts(b[1],f,a)}else{if(resp=="notificationsaved"){jQuery("#quick_alert_div").html("<div style='margin:30px 0;' class='arial_16 bold center color_444444'>"+_("Social preferences successfully saved")+"</div>");setTimeout(function(){HuffConnect.hideModal()},4000)}else{if(action!="mov"){return QuickFan.Fail()}}}return false},Fail:function(){HPError.e();HuffConnect.hideModal();return},emailAlerts:function(b,c,d,a){d=d||false;a=a||false;QuickFan.pop_email_alerts(b,d,a,c);return},pop_email_alerts:function(c,e,a,d){e=e||false;a=a||false;d=d||c;if(HuffCookies.getUserName()){var b="/users/favorite-bloggers/qet_email_alerts.php?blogger="+c+"&blogger_name="+d;if(e){b+="&fan_success="+e}if(a){b+="&fan_reason="+a}HuffConnect.showLoader();jQuery.ajax({type:"GET",url:b,success:QuickFan.GetEmailAlertsSuccess,error:QuickFan.GetEmailAlertsFail})}else{ConnectOverview.showBenefits({provider:"signup",message:_("You must be logged in to subscribe."),onSuccess:function(){QuickFan.user_connected=true;QuickFan.pop_email_alerts(c,e,a)}})}},GetEmailAlertsSuccess:function(e,d,c){if(c.status!=200){HuffConnect.hideModal();return}var a={inner_html:e,width:670,modal_head_image:"",modal_subhead_image:""};if(QuickFan.user_connected){a.onclose=function(){HuffConnect.Login.onLoginSuccess()}}HuffConnect.socialModal(a);if(HPConfig.current_vertical_name&&!(/homepage/.test(HPConfig.current_vertical_name))){var b=HuffPoUtil.trim(HPConfig.current_vertical_name);b=b.replace("-"," ");b=b.toLowerCase().replace(/\w+/g,function(f){return f.charAt(0).toUpperCase()+f.substr(1)});jQuery("#quick_vertical_alert").html('<input type="checkbox" name="'+b+' Brief" value="1" checked /><span class="">&nbsp;'+sprintf(_("Sign me up for the HuffPost %s Newsletter"),b)+"</span>").removeClass("hidden")}return;if(typeof(QuickFan._HeaderText)!="undefined"){$("header_id").innerHTML=QuickFan._HeaderText;delete QuickFan._HeaderText}},GetEmailAlertsFail:function(){HPError.e();HuffConnect.hideModal();return},sendForm:function(b){var e=jQuery("#quick_email_alerts_form").get(0);var b=b||false;if(!b){if(!HPUtil.checkEmail(e.blogger_alert_email.value)){jQuery("#qa_error_notify").html(_("Please submit a valid email address"));jQuery("#qa_error_notify").removeClass("hidden");e.blogger_alert_email.value="";e.blogger_alert_email.focus();return false}}var d="";d+=jQuery("#save").attr("name")+"="+jQuery("#save").val()+"&";d+=e.blogger_alert_email.name+"="+e.blogger_alert_email.value+"&";d+=document.getElementById("notify[blogger]").name+"="+document.getElementById("notify[blogger]").value+"&";d+=document.getElementById("blogger_name").name+"="+document.getElementById("blogger_name").value+"&";for(var a=0;a<e.length;a++){if(e[a].type=="checkbox"){var c=(e[a].checked)?1:0;d+="&"+e[a].name+"="+c}}jQuery("#quick_alert_button").addClass("hidden");jQuery("#quick_alert_loader").removeClass("hidden");jQuery.ajax({url:e.action,type:"POST",data:d,success:QuickFan.Success,error:QuickFan.Fail});return false},focusOnBox:function(a){if(jQuery(a).val()==_("Type your email address here...")){jQuery(a).val("")}return},blurOnBox:function(a){if(jQuery(a).val()==""){jQuery(a).val(_("Type your email address here..."))}return}};huff.unit("tmp/quick_fan",function(a){a(QuickFan)});
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var SayIt={pop_email_form:function(){YAHOO.util.Connect.asyncRequest("POST","/users/get_say_it_form.php",{success:SayIt.Success,failure:SayIt.Fail})},Success:function(b){var a={inner_html:b.responseText,width:595};HuffConnect.socialModal(a);if(typeof(SayIt._HeaderText)!="undefined"){$("header_id").innerHTML=SayIt._HeaderText;delete SayIt._HeaderText}},Fail:function(a){HPError.e();HuffConnect.hideModal()},validateForm:function(){var c=$("name").value;var e=$("short_bio").value;var b=$("email").value;var g=$("blog_pitch").value;var a=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;var h=a.test(b);var d=4000;var f;if(c==""&&e==""&&b==""&&g==""){alertText=_("All fields are required.");f=true}else{if(c==""){alertText=_("Please enter your name.");f=true}else{if(e==""){alertText=_("Please enter your short bio.");f=true}else{if(b==""){alertText=_("Please enter your email.");f=true}else{if(!h){alertText=_("Please enter a valid email.");f=true}else{if(g==""){alertText=_("Please enter your blog pitch.");f=true}else{if(g.length>d){alertText=_("You have exceeded the maximum blog pitch characters.");f=true}}}}}}}if(f){$("say_error_message").style.display="block";$("say_error_message").innerHTML=alertText}else{$("say_error_message").innerHTML="";$("say_error_message").style.display="none";SayIt.sendForm()}},sendForm:function(){post_body="";post_body=escape($("save").name)+"="+escape($("save").value)+"&"+escape($("name").name)+"="+encodeURIComponent($("name").value)+"&"+escape($("short_bio").name)+"="+escape($("short_bio").value)+"&"+escape($("email").name)+"="+escape($("email").value)+"&"+escape($("blog_pitch").name)+"="+escape($("blog_pitch").value)+"&";YAHOO.util.Connect.asyncRequest("POST","/users/notifications/say_it_notification.php",{success:SayIt.Success,failure:SayIt.Fail},post_body)}};huff.unit("tmp/say_it",function(a){a(SayIt)});
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});QuickHuffListContribute={};QuickHuffListContribute=function(){this.init.apply(this,arguments)};QuickHuffListContribute.prototype={listId:0,isFormLoaded:false,currentMap:null,currentMarker:null,authStatus:null,init:function(a,b){HuffConnect.hideModal();this.listId=a;this.authStatus=b||null},show:function(){if(!this.isFormLoaded){var a=this;YAHOO.util.Connect.asyncRequest("POST","/hufflists/webservice.php?action=get_contribute_form_html&"+Math.random(),{success:function(b){a.onFormLoadSuccess(b)},failure:function(b){a.onFormLoadFail(b)}},"list_id="+a.listId)}},close:function(){HuffConnect.hideModal()},onFormLoadSuccess:function(c){var b=this;var a=function(){b.isFormLoaded=true;b.show();b.loadMap();Y.util.Event.addListener("hufflist_contribute_close","click",function(d){Y.util.Event.preventDefault(d);b.close()});Y.util.Event.addListener("hufflist_contribute_form","submit",function(d){this.action+="&"+Math.random();b.onFormSubmit(d)});Y.util.Event.addListener("hufflist_contribute_map_search","keypress",function(d){if(d.keyCode==13){Y.util.Event.preventDefault(d);b.onMapSearch(this.value)}})};HuffConnect.socialModal({inner_html:c.responseText,modal_subhead_image:"",modal_head_image:"",width:600,onshow:a,onclose:function(){if(b.authStatus=="loggedout"){b.authStatus=null;huff.use("connect/auth",function(d){d.Login.updateLoginStatus()})}}})},loadMap:function(){var a=this;Y.util.Event.addListener("body","unload",function(){a.currentMap.dispose()});Y.util.Event.addListener("hufflist_contribute_map_search_button","click",function(){a.onMapSearch($("hufflist_contribute_map_search").value)});this.currentMap=new MQA.TileMap({elt:$("hufflist_contribute_map")});MQA.withModule("largezoom","viewoptions","geocoder",function(){a.currentMap.addControl(new MQA.LargeZoom(),new MQA.MapCornerPlacement(MQA.MapCorner.TOP_LEFT,new MQA.Size(10,10)));a.currentMap.addControl(new MQA.ViewOptions(),new MQA.MapCornerPlacement(MQA.MapCorner.TOP_RIGHT))});MQA.EventManager.addListener(this.currentMap,"click",function(b){a.currentMap.removeAllShapes();a.currentMap.addShape(new MQA.Poi(b.ll));$("hufflist_contribute_lat").value=b.ll.lat;$("hufflist_contribute_lng").value=b.ll.lng})},onMapSearch:function(a){var b=this;if($("hufflist_contribute_map_search").value==""){alert(_("Please enter some address."));return}this.currentMap.removeAllShapes();this.currentMap.geocodeAndAddLocations(a,function(d){try{if(d.info.statuscode>0){throw"Search error."}if(!d.results.length||!d.results[0].locations.length){throw"Sorry, address hasn't been found."}if(d.results.length>1||d.results[0].locations.length>1){throw"Too many places have been found.\nPlease enter more precise address."}var c=d.results[0].locations[0];if(c.geocodeQuality=="COUNTRY"||c.geocodeQuality=="COUNTY"||c.geocodeQuality=="STATE"){throw"Location based on address you entered is detected as a "+c.geocodeQuality.toLowerCase()+".\nPlease enter more precise address."}$("hufflist_contribute_lat").value=c.latLng.lat;$("hufflist_contribute_lng").value=c.latLng.lng}catch(e){$("hufflist_contribute_lat").value="";$("hufflist_contribute_lng").value="";$("hufflist_contribute_map_search").value="";b.currentMap.removeAllShapes();b.currentMap.setZoomLevel(3);alert(e);return}})},onFormLoadFail:function(a){HPError.e();this.hideMask()},onFormSubmit:function(d){var c=this,h=parseInt($("hufflist_contribute_list_id").value),g=$("hufflist_contribute_title").value,a=$("hufflist_contribute_body").value,f=$("hufflist_contribute_image").value,e=parseFloat($("hufflist_contribute_lat").value),b=parseFloat($("hufflist_contribute_lng").value);if(g.length<3){alert(_("Please enter title"));E.preventDefault(d);return false}if(a.length<3){alert(_("Please enter body"));E.preventDefault(d);return false}if(list_needed_photo&&f==""){alert(_("Please select image"));E.preventDefault(d);return false}if(!e||!b){alert(_("Please choose location"));E.preventDefault(d);return false}this.onFormSubmitStart();return true},onFormSubmitStart:function(){$("hufflist_contribute_submit_loader").style.display="inline";$("hufflist_contribute_submit").disabled=true},onFormSubmitEnd:function(c){$("hufflist_contribute_submit_loader").style.display="none";$("hufflist_contribute_submit").disabled=false;try{var a=c;if(a.error!==""){this.onFormSubmitFail(a.error)}else{SNProject.track(parseInt(a.item_id),"hufflist_item_added",parseInt(HPUtil.GetEntryID(location.href)));this.onFormSubmitSuccess(c)}}catch(b){this.onFormSubmitFail(c)}},onFormSubmitSuccess:function(a){alert(_("Thank you for your contribution!"));this.close();if(HPFB.user_just_login){location.href=location.href}},onFormSubmitFail:function(a){HPError.e(a,true)}};huff.unit("tmp/quick_contribute",function(a){a(QuickHuffListContribute)});
var LightboxSearch={TabClick:function(c){var b=new Array("ap_images","youtube","flickr","google");for(var a=0;a<b.length;a++){el_cont=$("modal_"+b[a]+"_content");if(el_cont){el_cont.style.display=(b[a]==c?"block":"none");HPUtil.show(b[a]+"_search")}else{return false}el_link=$("modal_tab_"+b[a]+"_link");if(el_link){el_cell=el_link.parentNode;if(b[a]==c&&!Dom.hasClass(el_cell,"active")){Dom.addClass(el_cell,"active");Dom.replaceClass(el_link,"","active")}else{if(b[a]!=c&&Dom.hasClass(el_cell,"active")){Dom.removeClass(el_cell,"active");Dom.replaceClass(el_link,"active","")}}}}return false}};huff.unit("tmp/lightbox_search",function(a){a(LightboxSearch)});
var GetEmailAlerts={array_default:[],u_old:0,Unsubscribe:function(){var b=document.getElementById("unsub_form");if(this.u_old==2){for(var a=0;a<b.length;a++){if(b[a].name!="status"){b[a].disabled=false}}}else{if(this.u_old==1){for(var a=0;a<b.length;a++){if(this.array_default[a]&&b[a].name!="status"){b[a].checked=true}b[a].disabled=false}}}this.u_old=document.getElementById("sub_status").selectedIndex;if(this.u_old==2){for(var a=0;a<b.length;a++){if(b[a].name!="status"&&b[a].name!="sub_button"&&b[a].type!="hidden"&&b[a].type!="submit"){b[a].disabled=true}}}else{if(this.u_old==1){this.array_default=[];for(var a=0;a<b.length;a++){if(b[a].name!="status"&&b[a].name!="sub_button"&&b[a].type!="hidden"&&b[a].type!="submit"){this.array_default[a]=b[a].checked;b[a].checked=false;b[a].disabled=true}}}}}};huff.unit("tmp/email_alerts",function(a){a(GetEmailAlerts)});
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});HPConfig.current_web_address=HPConfig.current_web_address.replace(/^http:\/\//i,"");HPConfig.current_web_domain=HPConfig.current_web_domain.replace(/^http:\/\//i,"");var Provider={auto_link_email:true,force_login:false,user_provider_info:{facebook:{},twitter:{},yahoo:{},google:{},"google-plus":{},linkedin:{},aol:{},winlive:{}},login_config:{facebook:{},twitter:{w:800,h:680},yahoo:{w:500,h:500},google:{w:850,h:600},"google-plus":{w:520,h:600},linkedin:{w:600,h:500},aol:{w:520,h:500},winlive:{w:500,h:500}},SignUp:function(e,h){var d="";if("object"==typeof e){for(var c in e){d="&"+c+"="+e[c]+","}d=d.substr(0,d.length-1)}var g=HPConfig.current_web_address;var b="";if(HPConfig.site){g=HPConfig.huffsite;b="&multid="+HPConfig.site}var f="";if(Provider.force_login){f="&force_login=true"}var a="http://"+g+"/users/signup/provider/index.php?type="+h+d+"&"+Math.random()+b+f;PopupManager.open(a,Provider.login_config[h].w,Provider.login_config[h].h);PopupManager.onClose=function(){Provider.Connect(h)}},Connect:function(a){if("undefined"!=typeof(Provider.user_provider_info[a].id)){HuffConnect.loadConnectModal({provider:a})}return},QuickLogin:function(f){var a=linkSocialAccount;if("undefined"==typeof f){f="yahoo"}var e=HPConfig.current_web_address;var c="";if(HPConfig.site){e=HPConfig.huffsite;c="&multid="+HPConfig.site}var d="";if(Provider.force_login){d="&force_login=true"}var b="http://"+e+"/users/login/provider/index.php?type="+f+"&"+Math.random()+c+d;if(a.linkOptions.disable_connect){b+="&disable_connect=1"}if("new_user"==Provider.user_provider_info[f].Status){Provider.LoginConnect(f);return}PopupManager.open(b,Provider.login_config[f].w,Provider.login_config[f].h);PopupManager.onClose=function(){Provider.LoginConnect(f)}},resetProviderStatus:function(a){Provider.user_provider_info[a]={}},LoginConnect:function(c){var b=HuffConnect.Login;var a=linkSocialAccount;if("undefined"!=typeof(Provider.user_provider_info[c].Status)){if(!a.linkOptions.disable_connect){if(Provider.user_provider_info[c].Status=="existed_user"){huff.use("connect/auth",function(d){d.Login.loginSuccess()})}else{if(Provider.user_provider_info[c].Status=="new_user"){huff.use("connect/provider",function(d){d.loadModal(c)})}else{if(Provider.user_provider_info[c].Status=="self_closed_user"){huff.use("connect/provider",function(d){d.loadModal(c)})}else{HPError.e("something went wrong")}}}}else{if(typeof a.linkOptions.callback=="function"){a.linkOptions.callback(Provider.user_provider_info[c].Status)}}}else{HPError.e("something else went wrong")}}};var linkSocialAccount={provider:"",facebookInfo:{},gfcInfo:{},onLinkSuccess:false,onLinkFailed:false,linkOptions:{},check_fans:true,checkLoginStatus:function(e,b,d,a){huff.use("connect/auth","connect/modal","connect/provider");this.linkOptions=d||{};a=a||false;if("function"==typeof(a)){a()}else{HPFB.force_login=false;HPFB.overridden_permissions=false;HPFB.onAuthenticateRequestSuccess=false}var c=SNProject;if("undefined"===typeof e){return false}if(b&&typeof b.onLinkSuccess=="function"){this.onLinkSuccess=b.onLinkSuccess}this.onLinkFailed=false;if(b&&typeof b.onLinkFailed=="function"){this.onLinkFailed=b.onLinkFailed}if(HuffCookies.getUserName()){if(HuffPrefs.get(e+"")&&!this.linkOptions.reauth){if(b&&typeof b.linked==="function"){b.linked()}return false}if("facebook"===e){this.provider="facebook";linkSocialAccount.FacebookPromtLogin()}else{if("undefined"!=typeof Provider.login_config[e]){this.provider=e;linkSocialAccount.PromptLogin()}}}else{if("facebook"===e){HPFB.login(c._tryToJoinUser)}else{if("undefined"!=typeof Provider.login_config[e]){Provider.QuickLogin(e)}}}},FacebookPromtLogin:function(){var a=HuffConnect.Login;HPFB.waitForSession(function(){if("connected"==HPFB.user_status){var b=new Date().getTime();var c=HPFB.getSessionForServer();jQuery.ajax({url:"/users/login/provider/check_user_status.php",type:"POST",data:"provider=facebook"+(c?"&"+c:""),success:linkSocialAccount.FacebookSuccess,error:a.FacebookFail})}else{if("notConnected"==HPFB.user_status){return false}}})},FacebookSuccess:function(e,d,c){var b=HuffConnect.Login;var a=JSON.parse(e);switch(a.msg){case"existed_user":case"new_user":linkSocialAccount.facebookInfo.fb_id=a.fb_id||"";linkSocialAccount.facebookInfo.user_id=a.user_id||"";linkSocialAccount.facebookInfo.user_name=a.user_name||"";linkSocialAccount.facebookInfo.Status=a.msg;HuffConnect.hideModal();if(linkSocialAccount.linkOptions.disable_connect===true){linkSocialAccount.linkOptions.callback("facebook",a.msg)}else{linkSocialAccount.PromptForConnectPop()}break;case"current_user":HuffConnect.hideModal();if(linkSocialAccount.linkOptions.disable_connect===true){linkSocialAccount.linkOptions.callback("facebook","current_user")}break;default:b.FacebookFail(a);break}return},PromptLogin:function(){var c=HPConfig.current_web_address;var b="";if(HPConfig.site){c=HPConfig.huffsite;b="&multid="+HPConfig.site}var a="http://"+c+"/users/login/provider/link_login.php?provider="+linkSocialAccount.provider+"&"+Math.random()+b;if(this.linkOptions.reauth){a+="&reauth=1"}else{if(this.linkOptions.disable_connect){a+="&disable_connect=1"}}if(!this.linkOptions.popup){if(Provider.user_provider_info[linkSocialAccount.provider]&&Provider.user_provider_info[linkSocialAccount.provider].Status){linkSocialAccount.PromptLoginConnect()}else{if("undefined"!=typeof Provider.login_config[linkSocialAccount.provider]){PopupManager.open(a,Provider.login_config[linkSocialAccount.provider].w,Provider.login_config[linkSocialAccount.provider].h);PopupManager.onClose=function(){linkSocialAccount.PromptLoginConnect()}}}}else{setTimeout(function(){linkSocialAccount.linkOptions.popup.location=a;if("twitter"==linkSocialAccount.provider){linkSocialAccount.linkOptions.popup.resizeTo(800,550)}PopupManager.onClose=function(){linkSocialAccount.PromptLoginConnect()}},100)}},PromptLoginConnect:function(){var a=linkSocialAccount;if(Provider.user_provider_info[a.provider].Status&&"undefined"!=typeof(Provider.user_provider_info[a.provider])){if(a.linkOptions.disable_connect){if(typeof a.linkOptions.callback=="function"){a.linkOptions.callback();return}}else{linkSocialAccount.PromptForConnectPop()}}else{HuffConnect.hideModal();HPError.e("something went wrong")}return},PromptForConnectPop:function(){HuffConnect.hideModal();if(linkSocialAccount.provider=="facebook"){var a=linkSocialAccount.facebookInfo.Status}else{var a=Provider.user_provider_info[linkSocialAccount.provider].Status}var c=this.getPromptPopHtml(a);if(c!=""){var d={inner_html:c,width:550};if(/existed_user/.test(a)){d.cb=linkSocialAccount.callback;if(linkSocialAccount.provider=="facebook"){var b=linkSocialAccount.facebookInfo.user_id}else{var b=Provider.user_provider_info[linkSocialAccount.provider].user_id}if(b==HPUser.user_id()&&!this.linkOptions.reauth){alert("You are already linked to this "+linkSocialAccount.provider.charAt(0).toUpperCase()+linkSocialAccount.provider.substr(1,linkSocialAccount.provider.length)+" account!");return}}if(this.linkOptions.reauth){linkSocialAccount.ConnectProvider();return}HuffConnect.socialModal(d)}else{HuffConnect.hideModal();HPError.e("something went wrong")}return},getPromptPopHtml:function(a){var b="";var c=HuffCookies.getUserName().replace("hp_blogger_","").replace("_"," ");var d=linkSocialAccount.provider.charAt(0).toUpperCase()+linkSocialAccount.provider.substr(1);if(/new_user/.test(a)){b+='<div class="align_left modal_link_your_social_account"><div class="connect_pop_head">'+sprintf(_("Link your %s account?"),d)+'</div><p class="connect_pop_name">'+sprintf(_("Hi %s"),c)+',</p><br /><p class="connect_pop_main_text">'+_("Would you like to link your account to your Huffington Post account?")+'</p><br /><p class="connect_pop_sub_text">'+sprintf(_("By linking your %s account to your Huffington Post account, you will be able to log in to Huffpost using your %s credentials. You will also gain access to new features and be able to more easily see what your %s friends are up to on this site.</p>"),d,d,d)+'<br /><div id="user_link_reaction"><div class="connect_pop_yes" onclick="linkSocialAccount.ConnectProvider(); return false;">'+_("Yes")+'</div><div class="connect_pop_no" onclick="linkSocialAccount.closePromptPop(); return false;">'+_("No")+'</div></div><div class="clear"></div><br /><br /><p class="connect_pop_notyou">'+sprintf(_("Not %s? Please %sclick here%s to log out, then log back in with your correct account."),c,'<a href="/users/logout/" onclick="QuickLogin.SocialLogout(\'/users/logout/\'); return false;">',"</a>")+"</p></div></div><br />"}else{if(/existed_user/.test(a)){if("facebook"==linkSocialAccount.provider){oldUserName=linkSocialAccount.facebookInfo.user_name}else{oldUserName=Provider.user_provider_info[linkSocialAccount.provider].user_name}b+='<div class="align_left modal_link_your_social_account"><div class="connect_pop_head">'+sprintf(_("Do you wish to re-link your %s account?"),d)+'</div><p class="connect_pop_name">'+sprintf(_("Hi %s"),c)+',</p><br /><p class="connect_pop_sub_text">'+sprintf(_("This %s account is already linked to the Huffington Post username '%s'. Would you like to instead associate it with your current account '%s'?"),d,oldUserName,c)+'</p><br /><div id="user_link_reaction"><div class="connect_pop_yes" onclick="linkSocialAccount.ConnectProvider(); return false;">'+_("Yes")+'</div><div class="connect_pop_no" onclick="linkSocialAccount.closePromptPop(); return false;">'+_("No")+'</div></div><div class="clear"></div></div><br /><br /></div>'}}return b},closePromptPop:function(){HuffConnect.hideModal(linkSocialAccount.onLinkFailed);return},ConnectProvider:function(){var i=HuffConnect.Login;var d=linkSocialAccount;var a=jQuery("#huffpo_snn_is_loading");var e=jQuery("#user_link_reaction");if(a.length){a.css("display","block")}if(e.length){e.css("display","none")}var b=0;var h=0;var j="";var k="";var g="";var f="";var c=new Date().getTime();switch(d.provider){case"facebook":b=d.facebookInfo.fb_id;f=d.facebookInfo.Status;h=d.facebookInfo.user_id||"";j=d.facebookInfo.user_name||"";k="&"+HPFB.getSessionForServer();break;case"twitter":b=Provider.user_provider_info[d.provider].id;f=Provider.user_provider_info[d.provider].Status;h=Provider.user_provider_info[d.provider].user_id||"";j=Provider.user_provider_info[d.provider].user_name||"";k="&name="+Provider.user_provider_info.twitter.screen_name+"&t="+encodeURIComponent(Provider.user_provider_info.twitter.oauth_token)+"&s="+encodeURIComponent(Provider.user_provider_info.twitter.oauth_token_secret)+"&img="+escape(Provider.user_provider_info.twitter.profile_image);break;case"yahoo":case"google":case"google-plus":case"linkedin":b=Provider.user_provider_info[d.provider].id;f=Provider.user_provider_info[d.provider].Status;h=Provider.user_provider_info[d.provider].user_id||"";j=Provider.user_provider_info[d.provider].user_name||"";k="&access_token="+encodeURIComponent(Provider.user_provider_info[d.provider].access_token)+"&img="+escape(Provider.user_provider_info[d.provider].profile_image);break;case"aol":b=Provider.user_provider_info[d.provider].id;h=Provider.user_provider_info[d.provider].user_id||"";j=Provider.user_provider_info[d.provider].user_name||"";f=Provider.user_provider_info[d.provider].Status+"&img="+escape(Provider.user_provider_info.aol.profile_image);break;case"winlive":b=Provider.user_provider_info[d.provider].WinliveId;f=Provider.user_provider_info[d.provider].Status;h=Provider.user_provider_info[d.provider].user_id||"";j=Provider.user_provider_info[d.provider].user_name||"";k="&WinliveAccessToken="+encodeURIComponent(Provider.user_provider_info[d.provider].WinliveAccessToken)+"&WinliveAccessTokenExpiresAt="+encodeURIComponent(Provider.user_provider_info[d.provider].WinliveAccessTokenExpiresAt)+"&WinliveRefreshToken="+encodeURIComponent(Provider.user_provider_info[d.provider].WinliveRefreshToken)+"&img="+escape(Provider.user_provider_info[d.provider].profile_image);break;default:HuffConnect.hideModal();HPError.e(_("something went wrong"));return}g="provider="+d.provider+"&puid="+b+k+"&r="+c;g+="&status="+f+"&uid="+h+"&uname="+j;if(b!="0"){jQuery.ajax({url:"/users/login/provider/link_provider.php",type:"POST",data:g,success:linkSocialAccount.LinkSuccess,error:i.FacebookFail})}else{if(d.linkOptions.reauth&&b=="0"){if(typeof linkSocialAccount.onLinkSuccess=="function"){linkSocialAccount.onLinkSuccess()}}}return},LinkSuccess:function(c,b,a){if(jQuery("#huffpo_snn_is_loading").length){jQuery("#huffpo_snn_is_loading").css("display","none")}if(jQuery("#user_link_reaction").length){jQuery("#user_link_reaction").html(c)}if(jQuery("#user_relink_reaction").length){jQuery("#user_relink_reaction").css("display","block")}switch(c){case"success":if(!linkSocialAccount.linkOptions.reauth){HuffConnect.hideModal()}if(linkSocialAccount.check_fans){HuffCookies.setCookie("check_for_fans",1)}if(typeof linkSocialAccount.onLinkSuccess=="function"){return linkSocialAccount.onLinkSuccess()}else{if(typeof IS_NEWSGLIDE==="boolean"&&IS_NEWSGLIDE){$(document).trigger("userlogedin");HuffConnect.hideModal()}else{location.href=location.href}}break;case"error":linkSocialAccount.closePromptPop();break;default:linkSocialAccount.closePromptPop();break}},callback:function(){HuffConnect.hideModal();if(typeof IS_NEWSGLIDE==="boolean"&&IS_NEWSGLIDE){$(document).trigger("userlogedin");HuffConnect.hideModal()}else{location.href=location.href}}};
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});PlaceTools=function(a,c,b){ps=c.getElementsByTagName("P");id=a.id;if(ps.length>2){ps[2].parentNode.insertBefore(a,ps[2]);HuffPoUtil.show(a.id)}else{if(ps.length>1){ps[1].parentNode.insertBefore(a,ps[1]);HuffPoUtil.show(a.id)}else{if(ps.length==1&&ps[0].innerHTML.match(/(<br.?>\s*?<br.?>)/)){outerHTML='<div class="'+a.className+'" id="'+a.id+'">'+a.innerHTML+"</div>";a.parentNode.removeChild(a);ps[0].innerHTML=ps[0].innerHTML.replace(/(<br.?>\s*?<br.?>)/,"<br><br>"+outerHTML);HuffPoUtil.show(a.id)}}}y1=HuffPoUtil.getRegion(id).top;y2=HuffPoUtil.getRegion(b).top;if(y1&&y2&&(y1+150)>=y2){HuffPoUtil.hide(id)}};function addBookmark(a,b){b=b||_("HuffingtonPost");a=(!a)?location.href:a;b=(!b)?document.title:b;if((typeof window.sidebar=="object")&&(typeof window.sidebar.addPanel=="function")){}else{if(typeof window.external=="object"){window.external.AddFavorite(a,b)}else{if(window.opera&&document.createElement){return true}else{return false}}}return false}function addBookmark_mac(a,b){if(document.all){window.external.AddFavorite(a,b)}else{window.sidebar.addPanel(a,b)}}SharePost={share_form_ajax_response:false,cache:{},contacts:{yahoo:{},google:{},aol:{},winlive:{}},process_type:"regular",files_loaded:false,contacts_details:new Array(),pop:function(c,b,a){this.trackingPixelOnShareAction();this.emailForm(c,b,a);return},fill_me:function(f,d){var a=document.forms.email_share_form.your_name.value;var b=a.split(" ");var c="";var e=0;for(z=0;(z<b.length&&e++<3);z++){c=c+" "+b[z].replace(/[^a-zA-Z]/g,"")}a=c.replace(/^\s+|\s+$/g,"")},emailForm:function(c,b,a){this.trackingPixelOnShareAction();this.share_id=c;this.big_news_title=a;HPTrack.trackPageview("/t/a/initiate_share");if(typeof Badges!="undefined"){Badges.trackShare({eid:c,badge:"email"})}var d={share_id:c||"",vertical:b||"",title:this.big_news_title||""};this.loadModal(d);return},loadModal:function(b){this.config=b;if(this.cache[this.config.share_id]){var a={width:650,inner_html:this.cache[this.config.share_id].html,modal_head_image:"",modal_subhead_image:"",onshow:function(){HuffPoUtil.EvalScript(SharePost.cache[SharePost.config.share_id].html);FB.XFBML.parse(jQuery(".email_share_block").get(0),function(){})}};HuffConnect.socialModal(a)}else{HuffConnect.showLoader();this.loadForm()}this.process_type="regular";return},loadForm:function(){var a="/social/entry_share_v2.php";var b=this;jQuery.ajax({url:a,type:"GET",data:"share_id="+this.config.share_id,success:function(e,d,c){if(c.status!=200){HuffConnect.hideModal();return}b.loadFormSuccess(e)},error:function(){HuffConnect.hideModal();HPError.e();return}});return},loadFormSuccess:function(b){oResp=JSON.parse(b);if(oResp.status&&/success/.test(oResp.status)&&oResp.html){oResp.html="<div class='align_left'>"+oResp.html+"</div>";var a=function(){var c=jQuery("#email_share_title");var e=jQuery("#email_share_title_success");if(c.length){var d="";if(SharePost.config&&SharePost.config.title){d=SharePost.config.title}else{if(d==""&&jQuery("#title_permalink")){d=jQuery("#title_permalink").html()}else{if(jQuery("#title_permalink_bold")){d=jQuery("#title_permalink_bold").html()}}}c.html(d);e.html('"'+d+'"')}FB.XFBML.parse(jQuery(".email_share_block").get(0),function(){});HuffPoUtil.EvalScript(oResp.html);SharePost.cache[SharePost.config.share_id]={html:oResp.html};return};HuffConnect.socialModal({width:650,inner_html:oResp.html,modal_head_image:"",modal_subhead_image:"",onshow:a})}else{HuffConnect.hideModal()}return},selectOption:function(f){var h=["gmail","yahoo","aol","winlive"];var d=document.getElementById("email_share_radio_"+f);var j=jQuery("#single_box_"+f);var g=jQuery("#mailbox_arrow_"+f);HPTrack.trackEvent("Email Share","Select Import Provider",f);for(var e=0;e<h.length;e++){var c=jQuery("#single_box_"+h[e]);var b=jQuery("#mailbox_arrow_"+h[e]);var a=jQuery("#email_share_radio_"+h[e]);if(c){jQuery(c).removeClass("selected_box")}if(b){jQuery(b).addClass("hidden")}if(a){a.checked=false}}if(d){d.checked=true}if(j.length){j.addClass("selected_box")}if(g.length){g.removeClass("hidden")}if(f){this.importContacts(f)}this.hideMessage();return},send:function(){var c=this.validateForm();if(typeof c=="object"){jQuery("#es_send_button").addClass("hidden");jQuery("#es_send_status").removeClass("hidden");var b="/send/send.php",f=escape(c.id);var d="id="+f+"&your_name="+encodeURIComponent(c.your_name.substr(0,30))+"&your_email="+encodeURIComponent(c.your_email.substr(0,320))+"&email_list="+encodeURIComponent(c.email_list);if(f==-1){d+="&url="+encodeURIComponent(window.location.href)+"&title="+encodeURIComponent(document.title)}if((typeof social_campaign!=="undefined")&&(typeof social_campaign_creative!=="undefined")&&(typeof social_campaign_creative.email!=="undefined")){var a="";if((typeof social_campaign_creative.email.link!=="undefined")&&(typeof social_campaign_creative.email.link!=="function")&&(social_campaign_creative.email.link!="")){a+=(typeof social_campaign_creative.email.pre_link!=="undefined")?encodeURIComponent(social_campaign_creative.email.pre_link.replace(/\\+"/g,'"')):"";a+='<a href="'+social_campaign_creative.email.link+'">'+((typeof social_campaign_creative.email.text!=="undefined")?encodeURIComponent(social_campaign_creative.email.text.replace(/\\+"/g,'"')):"")+"</a>";a+=(typeof social_campaign_creative.email.post_link!=="undefined")?encodeURIComponent(social_campaign_creative.email.post_link.replace(/\\+"/g,'"')):""}else{a+=encodeURIComponent(social_campaign_creative.email.replace(/\\+"/g,'"'))}d+="&share_ad_text="+a;d+="&share_link_ref="+encodeURIComponent(social_campaign)}else{if((typeof social_campaign!="undefined")&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]&&HPAds.social_campaigns[social_campaign].email_message){d+="&share_ad_text="+encodeURIComponent(HPAds.social_campaigns[social_campaign].email_message.replace(/\\+"/g,'"'));d+="&share_link_ref="+encodeURIComponent(social_campaign)}else{if(SharePost.share_email_comm_text){d+="&share_ad_text="+encodeURIComponent(SharePost.share_email_comm_text)}}}d+="&send_this=1";var e=jQuery(location).attr("search")||"";e=decodeURIComponent(e);e=e.replace(/\s/g,"");e=e.substr(0,255);if(e!==""){d+="&get="+encodeURIComponent(e)}d+="&banners="+HPAds.get_banners_str();jQuery.ajax({type:"POST",url:b,data:d,dataType:"json",error:function(){SharePost.sendFailure()},success:SharePost.sendSuccess})}return},sendSuccess:function(a){if(a&&a.status&&/success/.test(a.status)){jQuery("#es_share_started").addClass("hidden");jQuery("#es_share_ended").removeClass("hidden");jQuery("#es_send_status").addClass("hidden");jQuery("#es_send_button").removeClass("hidden");jQuery("#es_error_dialogue").addClass("hidden");var d=jQuery("#es_share_ended .title");if(d.html()=='""'){d.html('"'+document.title+'"')}var b=window.document.email_share_form;if(b.email_list){b.email_list.value=""}if(b.your_name){b.your_name.value=""}if(b.your_email){b.your_email.value=""}SharePost.selectAll(false);window.location.hash="#es_share_ended"}else{var c=a.message||false;SharePost.sendFailure(c)}return},sendFailure:function(a){jQuery("#es_send_status").addClass("hidden");jQuery("#es_send_button").removeClass("hidden");SharePost.displayMessage(a);return},validateForm:function(){var b=window.document.email_share_form;if(this.process_type=="regular"){if(b.email_list.value==""){SharePost.displayMessage(_("Send to email(s) box cannot be empty"));b.email_list.focus();return}else{if(b.your_name.value==""){SharePost.displayMessage(_("Please enter your name"));b.your_name.focus();return}else{if(b.your_email.value==""){SharePost.displayMessage(_("Please enter your email"));b.your_email.focus();return}}}var a={id:b.email_share_id.value,your_name:b.your_name.value,your_email:b.your_email.value,email_list:b.email_list.value}}else{if(this.process_type=="import"){if(b.email_list.value==""){var d=_("Please enter the email addresses");if(this.total_contacts_found==0){d=_("No contacts found")}SharePost.displayMessage(d);return}var c=(this.contacts[this.current_option]);var a={id:b.email_share_id.value,your_name:c.name,your_email:c.email,email_list:b.email_list.value}}}return a},displayMessage:function(b){if(b){var a=b}else{var a=_("Unable to process!")}jQuery("#es_error_dialogue").html(a);jQuery("#es_error_dialogue").removeClass("hidden");return},hideMessage:function(){jQuery("#es_error_dialogue").addClass("hidden");return},importContacts:function(d){if(d=="gmail"){d="google"}if(this.contacts[d].linked){this.importContactsSuccess(d)}else{if(HPConfig.site){domain="http://"+HPConfig.huffsite;multid="&multid="+HPConfig.site}else{domain=HuffPoUtil.getHostName();multid=""}var b=domain+"/users/contacts/index.php?provider="+d+"&nofilter=1"+multid;var a=500,c=500;if(d=="gmail"){a=860,c=550}PopupManager.open(b,a,c);PopupManager.onClose=function(){SharePost.importContactsSuccess(d);huff.use("provider/logout",function(e){e.OnAfterContactsImport(d)})}}return},importContactsSuccess:function(f){jQuery("#es_share_started").removeClass("hidden");jQuery("#es_share_ended").addClass("hidden");if(this.contacts[f].linked){var d=f;if(d=="google"){d="gmail"}var c=jQuery("#es_mailbox_rad_"+d);var g=jQuery("#email_form_left_section");var b=jQuery("#es_provider");var l=jQuery("#es_pic");var j=jQuery("#es_user_data");var k=(this.contacts[f]);c.html("").addClass("selected_mailbox email_share_pixie");b.html(f.charAt(0).toUpperCase()+f.substr(1));if(k.avatar){l.html('<div class="mailbox_avatar float_left" style="margin-right:2px;"><img width="27" height="27" src="'+k.avatar+'" /></div>')}else{l.html('<div class="email_share_pixie mailbox_avatar float_left avatar_pic_'+f+'"></div>')}j.html(k.name+" ("+k.email+")");if("string"===typeof k.contacts){k.contacts=JSON.parse(k.contacts)}if(k.contacts&&k.contacts.length){var h="";h+='<div class="es_margins">';h+='	<div class="es_form_label uppercase float_left">'+_("SEND TO EMAIL(S)")+"</div>";h+='	<div class="email_share_pixie es_required_ico float_left"></div>';h+='	<div class="clear"></div>';h+='	<div class="es_input_box"><input type="text" class="email_share_box email_listing_box" name="email_list" id="cbox_email_listing" /></div>';h+='<input type="hidden" id="project-id" />';h+='	<div class="es_form_small_text float_left es_helper_text">'+_("Separate multiple addresses with comma")+"</div>";h+='	<div class="clear"></div>';h+="</div>";h+="<div class='contact_list'>";this.contacts_details=new Array();for(var e=0;e<k.contacts.length;e++){var a=cropped_email="";if(k.contacts[e].name){a=k.contacts[e].name}if(a.length>12){a=a.substr(0,9)+"..."}if(k.contacts[e].email){cropped_email=k.contacts[e].email}if(cropped_email.length>22){cropped_email=cropped_email.substr(0,19)+"..."}this.contacts_details.push(k.contacts[e].email);h+="<div class='es_single_contact'>";h+="<div class='es_contact_names float_left'>";h+="<span class='es_username' title='"+k.contacts[e].name+"'>"+a+"</span>&nbsp;&nbsp;<span class='es_email' title='"+k.contacts[e].email+"'>"+cropped_email+"</span>";h+="</div>";h+="<div class='es_contact_cbox float_right'>";h+="<input type='checkbox' name='"+k.contacts[e].email+"' value='"+k.contacts[e].email+"' onclick='SharePost.selectOne(this)' />";h+="</div>";h+="</div>";h+="<div class='clear es_contacts_border'></div>"}h+="</div>";h+="<div class='es_selectall'><input type='checkbox' name='select_all_contacts' value='all' onclick='SharePost.selectAll(this.checked);' />&nbsp;"+_("Select All")+"</div>";g.html(h);this.total_contacts_found=k.contacts.length;this.loadFiles()}else{if(""!=typeof this.contacts[f].error&&""!==this.contacts[f].error){g.html("<div class='es_provider_err'>"+this.contacts[f].error+"</div>");this.total_contacts_found=0}else{g.html("<div class='es_list_empty'>"+_("No contacts found!")+"</div>");this.total_contacts_found=0}}this.process_type="import";this.current_option=f}else{this.selectOption()}return},loadFiles:function(){if(!this.files_loaded){var b=["/include/lib/jquery/jquery.ui.core.min.js","/include/lib/jquery/jquery.ui.widget.min.js","/include/lib/jquery/jquery.ui.position.min.js","/include/lib/jquery/jquery.ui.autocomplete.min.js"];var a=function(){SharePost.files_loaded=true;SharePost.showOptions()};if(HuffPoUtil&&typeof(HuffPoUtil.loadAndRun)=="function"){HuffPoUtil.loadAndRun(b,a)}}else{this.showOptions()}return},showOptions:function(){if(!this.files_loaded){return}jQuery.noConflict();(function(a){a(function(){var b=SharePost.contacts_details;function c(e){return e.split(/,\s*/)}function d(e){return c(e).pop()}a("#cbox_email_listing").bind("keydown",function(e){if(e.keyCode===a.ui.keyCode.TAB&&a(this).data("autocomplete").menu.active){e.preventDefault()}}).autocomplete({minLength:0,source:function(f,e){e(a.ui.autocomplete.filter(b,d(f.term)))},focus:function(){return false},select:function(f,g){var e=c(this.value);e.pop();e.push(g.item.value);SharePost.checkOption(g.item.value);e.push("");this.value=e.join(", ");return false},open:function(e,f){a(".ui-autocomplete").css("z-index",900);return}})})})(jQuery);return},checkOption:function(b){var a=window.document.email_share_form;if(a[b]&&a[b].type=="checkbox"){a[b].checked=true}return},selectOne:function(b){var d=jQuery("#cbox_email_listing");var c=b.value+", ";if(b.checked){var a=d.val();d.val(a+c)}else{d.val(d.val().replace(c,""))}d.focus();this.setCursorPostion();return},selectAll:function(e){var d=window.document.email_share_form;var f=jQuery("#cbox_email_listing");var b=new Array();for(var c=0;c<d.length;c++){if(d[c].type=="checkbox"&&d[c].value!="all"){d[c].checked=e;b.push(d[c].value)}}if(d.select_all_contacts){d.select_all_contacts.checked=e}if(e){var a=f.val();a+=b.join(", ")+", ";f.val(a)}else{f.val("")}f.focus();this.setCursorPostion();return},setCursorPostion:function(){return},trackingPixelOnShareAction:function(){if(typeof social_campaign_tracking!="undefined"&&social_campaign_tracking.email_share_action){if(typeof social_campaign_tracking.email_share_action=="object"){for(tracking_url in social_campaign_tracking.email_share_action){if((typeof social_campaign_tracking.email_share_action[tracking_url]=="string")&&(social_campaign_tracking.email_share_action[tracking_url]!="")){HPUtil.trackerImg(social_campaign_tracking.email_share_action[tracking_url],document.body)}}}else{HPUtil.trackerImg(social_campaign_tracking.email_share_action,document.body)}if(social_campaign&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]){HPUtil.trackerImg("http://pixel.quantserve.com/pixel/p-4azu6n0QT1rbs.gif?labels=social_action."+social_campaign+".email",document.body)}else{if(this.tracking_flight_name){HPUtil.trackerImg("http://pixel.quantserve.com/pixel/p-4azu6n0QT1rbs.gif?labels=social_action."+this.tracking_flight_name+".email",document.body)}}}HPUtil.updateInfluenceCookie("emailed",1)}};function prepare_and_show_blogs_table_new(m){if(blogs_amount==0){return}var s="";var o="";var r=0;var c=0;var h=0;m--;var d=rows_in_the_blogs_table*tds_in_the_blogs_table;var a=m*d+1;d=d+a-1;if(m>1&&null==document.getElementById("related_blogs_"+a)&&typeof prepare_and_show_blogs_table_new.pagination_requested=="undefined"){prepare_and_show_blogs_table_new.pagination_requested=true;var e=document.getElementById("related_blogs");e.innerHTML="";e.style.background="transparent url('http://s.huffpost.com/images/loader.gif') no-repeat center top";e.style.height="60px";var n="/entries/pagination_load.php?module=linked_entries&entry_id="+HPUtil.GetEntryID()+"&blog_id=3&load_from="+loaded_blogs_amount+"&showed_expanded_blogs_amount="+showed_expanded_blogs_amount;jQuery.ajax({type:"GET",url:n,dataType:"text",error:function(){},success:function(t){if(t){var j=document.getElementById("related_blogs");j.style.background="transparent";j.style.height="auto";document.getElementById("related_blogs_ajax_loaded").innerHTML=t;prepare_and_show_blogs_table_new(m+1)}}});return}for(i=a;i<=d;i++){var l=i>blogs_amount?"":document.getElementById("related_blogs_"+i).innerHTML;if("undefined"!==typeof html&&(html.search("div onclick=")>-1)&&(r==0)){r=1;o+='<div class="sponsored_preview"><div class="commercial_title commercial_title_'+HPConfig.current_vertical_name+'">SPONSORED FEATURE</div><div style="clear: both; line-height: 10px; height: 10px;"></div>'}if("undefined"!==typeof html&&(html.search("div onclick=")==-1)&&(r==1)&&(c==0)){c=1;o+="</div>"}o+=l;if((0==i%2)&&(i!=a)){o+='<div class="clear"></div>'}if(i>blogs_amount){break}}h=0;document.getElementById("related_blogs").innerHTML=o;o="";if(blogs_amount<=(rows_in_the_blogs_table*tds_in_the_blogs_table)){return}i--;var q="";if(m>0){q=q+'&nbsp;<a href="#" onclick="prepare_and_show_blogs_table_new('+1+'); return false;">&laquo;&nbsp;'+_("First")+"</a>&nbsp;";var f=m;q=q+'&nbsp;<a href="#" onclick="prepare_and_show_blogs_table_new('+f+'); return false;">&nbsp;'+_("Prev")+"</a>&nbsp;"}else{q=q+"&nbsp;&laquo;&nbsp;"+_("First")+"&nbsp;&nbsp;&nbsp;"+("Prev")+"&nbsp;"}var b=m+1;var g;var p=show_pages_amount/2;a=b-p+1;if(a<1){a=1}d=a+p;if((d-a+1)<show_pages_amount){d=d+show_pages_amount-(d-a+1)}if(d>pages_amount){d=pages_amount}if((d-a+1)<show_pages_amount){a=a-(show_pages_amount-(d-a+1))}if(a<1){a=1}for(g=a;g<=d;g++){if(g>pages_amount){break}if(g==b){q=q+"&nbsp;"+g+"&nbsp;"}else{q=q+'&nbsp;<a href="#" onclick="prepare_and_show_blogs_table_new('+g+'); return false;">'+g+"</a>&nbsp;"}}if(i<blogs_amount){var k=m+2;q=q+'&nbsp;<a href="#" onclick="prepare_and_show_blogs_table_new('+k+'); return false;">'+_("Next")+"&nbsp;</a>&nbsp;";q=q+'&nbsp;<a href="#" onclick="prepare_and_show_blogs_table_new('+pages_amount+'); return false;">'+_("Last")+"&nbsp;&raquo;</a>&nbsp"}else{q=q+"&nbsp;"+_("Next")+"&nbsp;&nbsp;&nbsp;"+_("Last")+"&nbsp;&raquo;&nbsp"}document.getElementById("blogs_pages").innerHTML=_("More Blog Posts:")+"&nbsp;"+q+"<br />"}function prepare_and_show_news_table_original(m){if(news_amount==0){return}var s="";var o="";var h=0;var r=0;var c=0;m--;var d=rows_in_the_news_table*tds_in_the_news_table;var a=m*d+1;d=d+a-1;if(m>1&&null==document.getElementById("related_news_"+a)&&typeof prepare_and_show_news_table_original.pagination_requested=="undefined"){prepare_and_show_news_table_original.pagination_requested=true;var e=document.getElementById("related_news");e.innerHTML="";e.style.background="transparent url('http://s.huffpost.com/images/loader.gif') no-repeat center top";e.style.height="60px";var n="/entries/pagination_load.php?module=linked_entries&entry_id="+HPUtil.GetEntryID()+"&blog_id=2&load_from="+loaded_news_amount;jQuery.ajax({type:"GET",url:n,dataType:"text",error:function(){},success:function(t){if(t){var j=document.getElementById("related_news");j.style.background="transparent";j.style.height="auto";document.getElementById("related_news_ajax_loaded").innerHTML=t;prepare_and_show_news_table_original(m+1)}}});return}for(i=a;i<=d;i++){var k=i>news_amount?"":document.getElementById("related_news_"+i).innerHTML;k=k.split("height: 10px;").join("height: 0;");if((k.indexOf('onclick="HPAds')>-1)&&(r==0)){r=1;o+='<div class="sponsored_preview"><div class="commercial_title commercial_title_'+HPConfig.current_vertical_name+'">SPONSORED FEATURE</div><div style="clear: both; line-height: 10px; height: 10px;"></div>'}if((k.indexOf('onclick="HPAds')==-1)&&(r==1)&&(c==0)){c=1;o+="</div>"}o+=k;if(i>news_amount){break}}document.getElementById("related_news").innerHTML=o;o="";h=0;if(news_amount<=(rows_in_the_news_table*tds_in_the_news_table)){return}i--;var q="";if(m>0){q=q+'&nbsp;<a href="#" onclick="prepare_and_show_news_table_original('+1+'); return false;">&laquo;&nbsp;'+_("First")+"</a>&nbsp;";var f=m;q=q+'&nbsp;<a href="#" onclick="prepare_and_show_news_table_original('+f+'); return false;">&nbsp;'+_("Prev")+"</a>&nbsp;"}else{q=q+"&nbsp;&laquo;&nbsp;"+_("First")+"&nbsp;&nbsp;&nbsp;"+_("Prev")+"&nbsp;"}var b=m+1;var g;var p=show_pages_amount/2;a=b-p+1;if(a<1){a=1}d=a+p;if((d-a+1)<show_pages_amount){d=d+show_pages_amount-(d-a+1)}if(d>news_pages_amount){d=news_pages_amount}if((d-a+1)<show_pages_amount){a=a-(show_pages_amount-(d-a+1))}if(a<1){a=1}for(g=a;g<=d;g++){if(g>news_pages_amount){break}if(g==b){q=q+"&nbsp;"+g+"&nbsp;"}else{q=q+'&nbsp;<a href="#" onclick="prepare_and_show_news_table_original('+g+'); return false;">'+g+"</a>&nbsp;"}}if(i<news_amount){var l=m+2;q=q+'&nbsp;<a href="#" onclick="prepare_and_show_news_table_original('+l+'); return false;">'+_("Next")+"&nbsp;</a>&nbsp;";q=q+'&nbsp;<a href="#" onclick="prepare_and_show_news_table_original('+news_pages_amount+'); return false;">'+_("Last")+"&nbsp;&raquo;</a>&nbsp"}else{q=q+"&nbsp;"+_("Next")+"&nbsp;&nbsp;&nbsp;"+_("Last")+"&nbsp;&raquo;&nbsp"}document.getElementById("news_pages").innerHTML=_("More News Posts:")+"&nbsp;"+q+"<br />"};
var ShareBox={submitFlag:false,checkMail:false,count:false,chooseShareVia:function(a){a=(a==undefined)?"email":a;if(a=="email"){ShareBox.set_email_class();this.ad("ad_email");jQuery("#all_email").show();jQuery("#all_im").hide();if(jQuery("#ad_im").length==0){return}jQuery("#ad_im").attr("class","");jQuery("#ad_email").attr("class","show_flash_mask")}else{ShareBox.set_im_class();this.ad("ad_im");jQuery("#all_im").show();jQuery("#all_email").hide();jQuery("#ad_email").attr("class","");jQuery("#ad_im").attr("class","show_flash_mask")}},triggerStepFourIM:function(){if(jQuery("#share_screen_name").val()!=""&&jQuery("#share_im_service").val()!=""){jQuery.remove("#share_im_option_blank");this.submitFlag=true;return true}},triggerStepThreeEmail:function(b,d,a){var c=jQuery("#login");if(c.val()==""){alert(sprintf(_("Please enter your login for %s."),a));c.focus();return false}c=jQuery("#pass");if(c.val()==""){alert(_("Please enter your password."));c.focus();return false}jQuery("#share_email_spinner").show();jQuery.ajax({url:"/_share_email.php?login="+b+"&pass="+d+"&service="+a,success:function(e){jQuery("#share_email_spinner").hide();jQuery("#share_email_inner").html(e);finishLoading()}})},triggerStepFourEmail:function(){var b=document.getElementsByName("more_friends[]");for(var a=0;a<b.length;a++){if(b[a].value==""){continue}if(!HPUtil.checkEmail(b[a].value)){alert(_("Please specify a valid e-mail."));b[a].focus();return false}this.count=true}this.triggerStepFour();this.showSend();return true},triggerImport:function(){if(jQuery("#login").val()!=""&&jQuery("#pass").val()!=""){jQuery("#importButton").css("display","inline")}else{jQuery("#importButton").hide()}return true},triggerStepFour:function(){jQuery("#share_note").show();this.submitFlag=true},showSend:function(){jQuery("#share_send").show()},doDebug:function(){alert(jQuery("#im_message_share").val());alert(jQuery("#entry_id_share").val())},checkSubmit:function(a,h,k){var b=false;var g=false;var f=false;var j=false;if(h=="email"){var c=jQuery("#share_your_name");if(c.val()==""){alert(_("Please enter your name"));c.focus();return false}c=jQuery("#share_your_email");if(c.val()==""){alert(_("Please enter your email"));c.focus();return false}else{if(!(jQuery("#share_your_email").length&&HPUtil.checkEmail(jQuery("#share_your_email").val()))){alert("Please specify a valid e-mail.");jQuery("#share_your_email").focus();return false}}if(jQuery("#share_friends_email").val()!=""){b=true}var d=document.getElementsByName("more_friends[]");for(var e=0;e<d.length;e++){if(d[e].value!=""){g=true;break}}if(!b&&!g){alert(_("Please enter or import email(s)"));return false}if(g&&!this.triggerStepFourEmail()){g=0;return false}if((a==0)&&jQuery("#quickread_entry_id").length>0){a=jQuery("#quickread_entry_id").html()}postBoby="id="+escape(a)+"&mode=submit_form&type=email";if(k!=""){postBoby+="&p=big_news"}if(social_campaign&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]&&HPAds.social_campaigns[social_campaign].email_message){postBoby+="&share_ad_text="+encodeURIComponent(HPAds.social_campaigns[social_campaign].email_message.replace(/\\+"/g,'"'));postBoby+="&share_link_ref="+social_campaign}else{if(SharePost.share_email_comm_text){postBoby+="&share_ad_text="+encodeURIComponent(SharePost.share_email_comm_text)}}jQuery.ajax({type:"POST",url:"/_share_email.php?"+jQuery("#share_tool_form").serialize(),success:function(l){jQuery("#message_sent").show();jQuery("#menu_title_share").html(l);if(jQuery("#share_tool_form").length>0){jQuery("#share_friends_email_1").val("");jQuery("#share_friends_email_2").val("");jQuery("#login").val("");jQuery("#pass").val("");jQuery("#share_note").val("")}}});return false}else{if(h=="im"){jQuery.ajax({type:"POST",url:"/_share_email.php?mode=submit_form&type=im&"+jQuery("#share_tool_form").serialize(),success:function(l){jQuery("#share_tool_form").html(l);jQuery("#menu_im_email").hide()}})}}jQuery("#bottom_notes").hide();return false},set_im_class:function(){document.getElementById("email_b_page").className="im_b_page";document.getElementById("im_b_page").className="email_b_page"},set_email_class:function(){if(jQuery("#email_b_page").length>0){jQuery("#email_b_page").attr("class","email_b_page")}if(jQuery("#im_b_page").length>0){jQuery("#im_b_page").attr("class","im_b_page")}}};function getCheckboxes(b,c){var d="";for(var a=0;a<getElementsByName_iefix("input",c).length;a++){if(getElementsByName_iefix("input",c)[a].checked){d+=getElementsByName_iefix("input",c)[a].value+", "}}document.getElementById("share_friends_email_1").value=d;ShareBox.triggerStepFourEmail()}function checkAll(b,c){for(var a=0;a<getElementsByName_iefix("input",c).length;a++){getElementsByName_iefix("input",c)[a].checked="false";getElementsByName_iefix("input",c)[a].checked=getElementsByName_iefix("input","checkall")[0].checked}}function getElementsByName_iefix(b,c){var d=document.getElementsByTagName(b);var a=new Array();for(i=0,iarr=0;i<d.length;i++){att=d[i].getAttribute("name");if(att==c){a[iarr]=d[i];iarr++}}return a}function clearAdressBook(b,c,d){for(var a=0;a<document.forms[b].elements[c].length;a++){document.forms[b].elements[c][a].checked="false"}jQuery(d).html("")}function startLoading(){if(jQuery("#login").val()==""&&jQuery("#pass").val()==""){return false}if(jQuery("#adressBookMails").length>0){jQuery("#adressBookMails").html("")}jQuery("#load_contacts").show();jQuery("#load").html('<img src="/images/ajax-loader.gif" /><em>'+_("Loading...")+"</em>")}function finishLoading(){jQuery("#load").html(getElementsByName_iefix("input","checkmail").length>=1?("<em><strong>"+_("success")+"</strong></em>"):("<em><strong>"+_("none")+"</strong></em>"))};
var HuffPromo={placeholder:"huff_promo_space",placeholder_el:false,promo_displayed:false,ny_promo:false,is_on:true,init:function(){if(this.placeholder_el){return true}var a=$(this.placeholder);if(a){this.placeholder_el=a}else{return false}return true},ieUpgradePromo:function(){var a=HPBrowser.version();if(!this.init()||this.promo_displayed==true||a!=6){return}var d=HuffCookies.getCookie("ieupgrade_promo");if(d!="1"){var c="			<div>				<div class='close_promo_link'><a href='javascript:HuffPromo.closePromo(\"ie_upgrade\");'><img src='/images/close-black.png' /></a></div>				<div class='float_left ie_icon'></div>				<div class='float_left ie_icon_text'><span class='ie_promo_bold'>Enhance your web experience!</span>&nbsp;HuffPost recommends that users&nbsp;<a href='http://www.microsoft.com/nz/windows/internet-explorer/default.aspx' target='_blank'>upgrade to the latest version of Internet Explorer.</a></div>				<div class='ie_icon_link'></div>				<div class='clear'></div>			</div>			";var b=document.createElement("div");b.id="ieupgrade_promo";b.className="ieupgrade_promo_main promo_blue";b.innerHTML=c;this.displayPromo("ieupgrade_promo",b)}return},displayPromo:function(b,a){if($("service_bottom_bar")){return}if(a&&this.placeholder_el){this.placeholder_el.appendChild(a);this.promo_displayed=true;switch(b){case"gbuzz_promo":var c=24;HuffCookies.setCookie(b,1,c);break;default:break}}return},closePromo:function(a){if(a=="ie_upgrade"){el=$("ieupgrade_promo");var b="ieupgrade_promo"}if(el&&this.placeholder_el){this.placeholder_el.removeChild(el);HuffCookies.setCookie(b,1)}return},chromeExtensionPromo:function(){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&typeof(localStorage)!="undefined"&&localStorage["show-chromeapp-popup"]!="0"){var g=HPTrack.Module("top promo","Top Promo");g.impression("chrome");var f="https://chrome.google.com/webstore/detail/khjialelnkjdomiblmnpcpjongleegef?hl=en-US";var e=function(){$("chrome_extension_promo").style.display="none";localStorage["show-chromeapp-popup"]=0};var h=function(){g.click("Chrome App");e()};var a=document.createElement("div");a.id="chrome_extension_promo";var c=document.createElement("span");c.innerHTML='Check out <a id="goog_newsglide_ch" href="'+f+'" target="_blank">NewsGlide</a>, our <a id="goog_ch" href="'+f+'" target="_blank">Google Chrome App</a>. The fastest news experience on the web...';a.appendChild(c);var d=document.createElement("a");d.href=f;d.id="install_button";d.target="_blank";d.onclick=h;a.appendChild(d);var b=document.createElement("a");b.href="#";b.id="close_button";b.onclick=e;a.appendChild(b);document.body.insertBefore(a,document.body.firstChild);$("goog_ch").onclick=h;$("goog_newsglide_ch").onclick=h;HuffPromo.animateHuffPromo("chrome_extension_promo")}},verticalPromo:function(e){var c=true,d="";e=e.toLowerCase();if(c&&HPConfig.current_vertical_name!=e&&typeof(localStorage)!="undefined"&&localStorage["show-vertical-popup"]!="0"){var i=HPTrack.Module("top promo","Top Promo");i.impression(e);var b="http://www.huffingtonpost.com/"+e;switch(e){case"new-york":d='<a id="vertical_ch" href="'+b+'" target="_blank">HuffPost New York</a>: Your news and city guide from the inside out.';break;default:d='Have you checked out <a id="vertical_ch" href="'+b+'" target="_blank">HuffPost Divorce</a>? It\'s everything you need to know to conquer the Big D.';break}var g=function(){$("vertical_promo").style.display="none";localStorage["show-vertical-popup"]=0};var a=document.createElement("div");a.id="vertical_promo";var h=document.createElement("span");h.innerHTML=d;a.appendChild(h);var f=document.createElement("a");f.href="#";f.id="close_button";f.onclick=g;a.appendChild(f);document.body.insertBefore(a,document.body.firstChild);$("vertical_ch").onclick=function(){i.click(e);g();return};HuffPromo.animateHuffPromo("vertical_promo",{to:26})}},eventPromo:function(f){var d=true;var h={};h.a="HuffPost Spotlight: Live Interview At 3:00 PM EST With <a href='http://www.huffingtonpost.com/2010/11/17/ok-go-video_n_777868.html' id='vertical_ch'>OK GO</a>.";h.b="HuffPost Spotlight: Live Interview At 4:00 PM EST With <a href='http://www.huffingtonpost.com/2010/11/17/perry-chen-kickstarter_n_777870.html' id='vertical_ch'>Perry Chen</a>.";if(d&&typeof(localStorage)!="undefined"&&localStorage["show-event-popup"]!="0"&&typeof(h[f])!=="undefined"){var g=HPTrack.Module("top promo","Top Promo");g.impression("event"+f);var e=function(){$("vertical_promo").style.display="none";localStorage["show-event-popup"]=0};var a=document.createElement("div");a.id="vertical_promo";var c=document.createElement("span");c.innerHTML=h[f];a.appendChild(c);var b=document.createElement("a");b.href="#";b.id="close_button";b.onclick=e;a.appendChild(b);document.body.insertBefore(a,document.body.firstChild);$("vertical_ch").onclick=function(){g.click("event"+f);e();return};HuffPromo.animateHuffPromo("vertical_promo",{to:26})}},adPromo:function(){return false},customPromo:function(e){if(typeof(e)==="undefined"){return false}var c=true;var j={};j.Blackberry="Check out HuffPost's NEW BlackBerry app. Click <a href='http://appworld.blackberry.com/webstore/content/19143' id='vertical_ch' target='_blank'>here</a> to download.";j.Prediction="Polish off your crystal ball. Play HuffPost's <a href='http://www.huffingtonpost.com/predict-the-news/' id='vertical_ch' target='_blank'>Predict the News</a>.";j.Facebook="Breaking news sent directly to your News Feed. Get <a href='http://facebook.com/huffingtonpost' id='vertical_ch' target='_blank'>HuffPost on Facebook</a>.";j.Twitter="Real-time updates from the Internet Newspaper. Follow <a href='http://twitter.com/huffingtonpost' id='vertical_ch' target='_blank'>HuffPost on Twitter</a>.";j.facebook_twitter="The Internet Newspaper &mdash; at your doorstep. Follow HuffPost on <a href='http://facebook.com/huffingtonpost' id='vertical_chf' target='_blank'>Facebook</a> and <a href='http://twitter.com/huffingtonpost' id='vertical_cht' target='_blank'>Twitter</a>.";j.DailyBrief="<a href='http://www.huffingtonpost.com/huffingtonpost/new-daily-brief_b_811083.html' target='_blank'><img src='/images/chrome_extension/H_logo_2ox20.png' height='20' width='20' align='top' /> Sign Up for HuffPost's Newly Redesigned Daily Brief</a>";j.commercial=HuffPromo.adPromo();j.SiteModeA="<img src='/images/promo/huff_promo_icon.png' height='20' width='20' align='top' class='msPinSite' />&nbsp;&nbsp;Unlock the hidden powers of The Huffington Post with a click and a drag. <a href='javascript:void(0);' onclick='HuffPromo.siteModeModal();'>Learn more</a>";j.SiteModeB="<img src='/images/promo/huff_promo_icon.png' height='20' width='20' align='top' class='msPinSite' />&nbsp;&nbsp;Experience Huffington Post as a Pinned Site.  Drag the icon to your Windows Taskbar to pin.";j.SiteModeC="";var b=(typeof(localStorage)!="undefined")?true:false;if(b&&/SiteMode/.test(e)){localStorage["show-custom-popup"]=1}if(c&&b&&localStorage["show-custom-popup"]!="0"&&j[e]){var i=HPTrack.Module("top promo","Top Promo");i.impression(e.toLowerCase());var g=function(){$("custom_promo").style.display="none";localStorage["show-custom-popup"]=0};var a=document.createElement("div");a.id="custom_promo";var h=document.createElement("span");if(/SiteMode/.test(e)){localStorage.siteModePromoType=e;if(e=="SiteModeC"){return}h.className="promo-sitemode"}else{h.className="promo-"+e.toLowerCase()}h.innerHTML=j[e];a.appendChild(h);var d=document.createElement("a");d.href="#";d.id="close_button";d.onclick=g;a.appendChild(d);document.body.insertBefore(a,document.body.firstChild);if("facebook_twitter"==e){$("vertical_chf").onclick=function(){i.click("Facebook via twitter/fb");g();return};$("vertical_cht").onclick=function(){i.click("Twitter via twitter/fb");g();return}}else{var f=$("vertical_ch");if(f){f.onclick=function(){i.click(e);g();return}}}HuffPromo.animateHuffPromo("custom_promo",{to:26})}},siteModeModal:function(){HuffConnect.showLoader();HPUtil.addCSS("huff_promo_sitemode.css");HPUtil.loadAndRun(["/include/lib/modules/sitemode_promo.js"],function(){HPTrack.Module("top promo").click("Show SiteMode Details");PromoSiteMode.LoadModal();return});return},NY:function(){if(HuffPromo.adPromo()){return}if(HPConfig.current_vertical_name!=="homepage"){return false}var a=HuffCookies.get("geostate");if(a=="New+York"||a=="New+Jersey"||a=="Connecticut"){$("promo_ny").innerHTML='<a href="/new-york/"><img src="/images/promo/geolocal_promo_ny.jpg" alt="The Huffington Post: New York City" width="224" height="29" onload="HPUtil.show(\'promo_ny\');" /></a>';this.ny_promo=true}},NewsGlide:function(){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&typeof(localStorage)!="undefined"&&localStorage["show-newsglide-popup"]!="0"&&!this.ny_promo&&$("promo_ny")){if(HPConfig.current_vertical_name=="homepage"){$("promo_ny").innerHTML='<a href="https://chrome.google.com/webstore/detail/khjialelnkjdomiblmnpcpjongleegef?hl=en-US" target="_blank"><img src="/images/promo/geolocal_promo_newsglide.png" width="282" height="28" alt="The Huffington Post -- NewsGlide" onload="HPUtil.show(\'promo_ny\');" /></a>'}else{$("promo_ny").innerHTML='<a href="http://www.huffingtonpost.com/NewsGlide/#'+HPConfig.current_vertical_id+"/"+HPConfig.current_vertical_name+'" target="_blank"><img src="/images/promo/geolocal_promo_newsglide.png" width="282" height="28" alt="The Huffington Post -- NewsGlide" onload="HPUtil.show(\'promo_ny\');" /></a>'}}else{if(HPConfig.current_vertical_name!=="homepage"&&HPConfig.current_vertical_name!=="new-york"&&$("promo_ny")){$("promo_ny").innerHTML='<a href="/'+HPConfig.current_vertical_name+'/twitter/"><img src="http://s.huffpost.com/images/v/logos/twitter/promo.png" width="224" height="29" alt="The Huffington Post -- Twitter Edition" onload="HPUtil.show(\'promo_ny\');" /></a>'}}},animateHuffPromo:function(e,d){if(!e){return false}d=d||{};var c=d.to||37;$(e).style.display="block";var b=new Y.util.Anim(e,{height:{to:c}},1,Y.util.Easing.easeOut);b.animate()},rotation:function(){if(typeof(skin_driver)!=="undefined"){return false}if(HuffPromo.adPromo()!=false){HuffPromo.customPromo("commercial");return false}if(HuffPromo.is_on==false){return false}var b=["Chrome","Prediction","Facebook","Twitter","facebook_twitter","Blackberry","DailyBrief"];if((navigator.userAgent.indexOf("Trident/5.")>-1&&!window.SiteMode)){var d=Math.floor(Math.random()*3);var a="C";if(d==1){a="A"}else{if(d==2){a="B"}}HuffPromo.customPromo("SiteMode"+a)}else{if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var b=["Chrome","Prediction","Facebook","Twitter","facebook_twitter","Blackberry","DailyBrief"];var c=b[Math.floor(Math.random()*b.length)];if(c==="Chrome"){HuffPromo.chromeExtensionPromo()}else{HuffPromo.customPromo(c)}}else{b.splice(0,1);HuffPromo.customPromo(b[Math.floor(Math.random()*b.length)])}}}};HuffPoUtil.onPageReady(function(){if(location.hash&&location.hash.indexOf("sitemode")!=-1){HuffPromo.siteModeModal()}});
(function(d){d.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(f,e){d.fx.step[e]=function(g){if(g.state==0||g.start.constructor!=Array||g.end.constructor!=Array){g.start=c(g.elem,e);g.end=b(g.end)}g.elem.style[e]="rgb("+[Math.max(Math.min(parseInt((g.pos*(g.end[0]-g.start[0]))+g.start[0]),255),0),Math.max(Math.min(parseInt((g.pos*(g.end[1]-g.start[1]))+g.start[1]),255),0),Math.max(Math.min(parseInt((g.pos*(g.end[2]-g.start[2]))+g.start[2]),255),0)].join(",")+")"}});function b(f){var e;if(f&&f.constructor==Array&&f.length==3){return f}if(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(f)){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}if(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(f)){return[parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55]}if(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(f)){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}if(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(f)){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}return a[d.trim(f).toLowerCase()]}function c(g,e){var f;do{f=d.curCSS(g,e);if(f!=""&&f!="transparent"||d.nodeName(g,"body")){break}e="backgroundColor"}while(g=g.parentNode);return b(f)}var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,e=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(e),j=c?/mac/.test(c):/mac/.test(e),g=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",f=[0,0,0],k=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){k=aB.plugins[ab].description;if(k&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;k=k.replace(/^.*\s+(\S+\s+\S+$)/,"$1");f[0]=parseInt(k.replace(/^(.*)\..*$/,"$1"),10);f[1]=parseInt(k.replace(/^.*\.(.*)\s.*$/,"$1"),10);f[2]=/[a-zA-Z]/.test(k)?parseInt(k.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var i=new ActiveXObject(X);if(i){k=i.GetVariable("$version");if(k){d=true;k=k.split(" ")[1].split(",");f=[parseInt(k[0],10),parseInt(k[1],10),parseInt(k[2],10)]}}}catch(b){}}}return{w3:a,pv:f,wk:g,ie:d,win:h,mac:j}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b)}catch(a){return}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var e=a.GetVariable("$version");if(e){e=e.split(" ")[1].split(",");ah.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}d.removeChild(b);a=null;am()})()}else{am()}}function am(){var g=aG.length;if(g>0){for(var h=0;h<g;h++){var c=aG[h].id;var l=aG[h].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var i=aS(c);if(i){if(ao(aG[h].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(l){a.success=true;a.ref=av(c);l(a)}}else{if(aG[h].expressInstall&&au()){var e={};e.data=aG[h].expressInstall;e.width=i.getAttribute("width")||"0";e.height=i.getAttribute("height")||"0";if(i.getAttribute("class")){e.styleclass=i.getAttribute("class")}if(i.getAttribute("align")){e.align=i.getAttribute("align")}var f={};var d=i.getElementsByTagName("param");var k=d.length;for(var j=0;j<k;j++){if(d[j].getAttribute("name").toLowerCase()!="movie"){f[d[j].getAttribute("name")]=d[j].getAttribute("value")}}ae(e,f,c,l)}else{aF(i);if(l){l(a)}}}}}else{ay(c,true);if(l){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}l(a)}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a}}}return d}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(f,d,h,e){aU=true;ap=e||null;at={success:false,id:h};var a=aS(h);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=h}f.id=ac;if(typeof f.width==aq||(!/%$/.test(f.width)&&parseInt(f.width,10)<310)){f.width="310"}if(typeof f.height==aq||(!/%$/.test(f.height)&&parseInt(f.height,10)<137)){f.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c}else{d.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var g=ar("div");h+="SWFObjectNew";g.setAttribute("id",h);a.parentNode.insertBefore(g,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(f,d,h)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML}else{var e=b.getElementsByTagName(aD)[0];if(e){var a=e.childNodes;if(a){var f=a.length;for(var c=0;c<f;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))}}}}}return d}function aA(e,g,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d}if(a){if(typeof e.id==aq){e.id=c}if(ah.ie&&ah.win){var f="";for(var i in e){if(e[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){g.movie=e[i]}else{if(i.toLowerCase()=="styleclass"){f+=' class="'+e[i]+'"'}else{if(i.toLowerCase()!="classid"){f+=" "+i+'="'+e[i]+'"'}}}}}var h="";for(var j in g){if(g[j]!=Object.prototype[j]){h+='<param name="'+j+'" value="'+g[j]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>";ag[ag.length]=e.id;d=aS(e.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var k in e){if(e[k]!=Object.prototype[k]){if(k.toLowerCase()=="styleclass"){b.setAttribute("class",e[k])}else{if(k.toLowerCase()!="classid"){b.setAttribute(k,e[k])}}}}for(var l in g){if(g[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"){aQ(b,l,g[l])}}a.parentNode.replaceChild(b,a);d=b}}return d}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,f,a,c){if(ah.ie&&ah.mac){return}var e=aL.getElementsByTagName("head")[0];if(!e){return}var g=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=g){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",g);aH=e.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=g}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,f)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+f+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c])}for(var e in ah){ah[e]=null}ah=null;for(var f in swfobject){swfobject[f]=null}swfobject=null})}}();return{registerObject:function(a,e,c,b){if(ah.w3&&a&&e){var d={};d.id=a;d.swfVersion=e;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(k,e,h,f,c,a,b,i,g,j){var d={success:false,id:e};if(ah.w3&&!(ah.wk&&ah.wk<312)&&k&&e&&h&&f&&c){ay(e,false);aj(function(){h+="";f+="";var q={};if(g&&typeof g===aD){for(var o in g){q[o]=g[o]}}q.data=k;q.width=h;q.height=f;var n={};if(i&&typeof i===aD){for(var p in i){n[p]=i[p]}}if(b&&typeof b===aD){for(var l in b){if(typeof n.flashvars!=aq){n.flashvars+="&"+l+"="+b[l]}else{n.flashvars=l+"="+b[l]}}}if(ao(c)){var m=aA(q,n,e);if(q.id==e){ay(e,true)}d.success=true;d.ref=m}else{if(a&&au()){q.data=a;ae(q,n,e,j);return}else{ay(e,true)}}if(j){j(d)}})}else{if(j){j(d)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}();var FlashObject=swfobject;
/*
Copyright (c) 2008 Ryan Grove <ryan@wonko.com>. All rights reserved.
Licensed under the BSD License:
http://www.opensource.org/licenses/bsd-license.html
Version: 1.0.4
*/
var LazyLoad=function(){var E=document,D=null,A=[],C;function B(){if(C){return }var G=navigator.userAgent,F;C={gecko:0,ie:0,webkit:0};F=G.match(/AppleWebKit\/(\S*)/);if(F&&F[1]){C.webkit=parseFloat(F[1])}else{F=G.match(/MSIE\s([^;]*)/);if(F&&F[1]){C.ie=parseFloat(F[1])}else{if((/Gecko\/(\S*)/).test(G)){C.gecko=1;F=G.match(/rv:([^\s\)]*)/);if(F&&F[1]){C.gecko=parseFloat(F[1])}}}}}return{load:function(K,L,J,I){var H=E.getElementsByTagName("head")[0],G,F;if(K){K=K.constructor===Array?K:[K];for(G=0;G<K.length;++G){A.push({url:K[G],callback:G===K.length-1?L:null,obj:J,scope:I})}}if(D||!(D=A.shift())){return }B();F=E.createElement("script");F.src=D.url;if(C.ie){F.onreadystatechange=function(){if(this.readyState==="loaded"||this.readyState==="complete"){LazyLoad.requestComplete()}}}else{if(C.gecko||C.webkit>=420){F.onload=LazyLoad.requestComplete;F.onerror=LazyLoad.requestComplete}}H.appendChild(F);if(!C.ie&&!C.gecko&&!(C.webkit>=420)){F=E.createElement("script");F.appendChild(E.createTextNode("LazyLoad.requestComplete();"));H.appendChild(F)}},loadOnce:function(N,O,L,P,G){var H=[],I=E.getElementsByTagName("script"),M,J,K,F;N=N.constructor===Array?N:[N];for(M=0;M<N.length;++M){K=false;F=N[M];for(J=0;J<I.length;++J){if(F===I[J].src){K=true;break}}if(!K){H.push(F)}}if(H.length>0){LazyLoad.load(H,O,L,P)}else{if(G){if(L){if(P){O.call(L)}else{O.call(window,L)}}else{O.call()}}}},requestComplete:function(){if(D.callback){if(D.obj){if(D.scope){D.callback.call(D.obj)}else{D.callback.call(window,D.obj)}}else{D.callback.call()}}D=null;if(A.length){LazyLoad.load()}}}}();
HPFB={_redirect:"",enabled:true,session:false,authResponse:false,api_key:false,app_id:false,app_namespace:false,initialized:false,is_logged_in_on_huffpost:false,user_status:"unknown",user_just_login:false,callback_init:null,initialized_session:false,force_login:false,maybeFacebookConnected:function(){var a=/(fbcdn|facebook\.com)/;if(HPFB.authResponse||HuffCookies.getCookie("fb_uid")){return true}return false},init:function(a){if(!a){el=document.getElementById("fConnect_img_container");if(el){el.style.display="block"}}if("undefined"!==typeof FB){HPFB.initUser()}else{window.fbAsyncInit=function(){var b={appId:HPFB.app_id,cookies:false,xfbml:true,oauth:true};if(window.HPConfig&&HPConfig.current_web_address){b.channelUrl="http://"+HPConfig.current_web_address+"/facebook/channel.html"}if("undefined"!==typeof HPUtil&&HPUtil.getUrlVar("fb_no_channel")==="1"){delete (b.channelUrl)}FB.init(b);HPFB.initEvents();HPFB.initUser()};(function(b){var c=jQuery.I18N.getLocale()||"en_US";c=(c=="es_US")?"es_LA":c;c=(c=="fr_MB")?"fr_FR":c;b("<script>",{type:"text/javascript",src:"//connect.facebook.net/"+c+"/all.js",async:true}).appendTo("#fb-root")})(jQuery)}},initEvents:function(){FB.Event.subscribe("auth.login",HPFB.handleStateChange);HPFB.Tracking.Subscribe(["Liked","Unliked","Recommended","Unrecommended"],[],false,HPFB.trackFBAction);HPFB.Tracking.Init()},trackFBAction:function(f,a,d){var b=d.getAttribute("author_nickname");if(b&&"Liked"==f){jQuery.ajax({url:"/users/favorite-bloggers/fan_action.php",data:"fan="+b+"&action=add",type:"POST",success:function(){},error:function(){}})}var e={};if(d.getAttribute("entry_id")){e.entity_type=2;e.entity_id=parseInt(d.getAttribute("entry_id"))}else{if(d.getAttribute("entity_type")){e.entity_type=parseInt(d.getAttribute("entity_type"));e.entity_id=parseInt(d.getAttribute("entity_id"))}}if(e.entity_type){if("Liked"==f||"Recommended"==f){e.action=1}else{if("Unliked"==f||"Unrecommended"==f){e.action=2}else{return{}}}}if(![0,1,2].inArray(e.entity_type)){return{}}if(isNaN(e.entity_id)||(e.reference_id&&isNaN(e.reference_id))){return{}}if(![1,2].inArray(e.action)){return{}}if(window.HPConfig&&HPConfig.inst_type=="dev"){return{}}if(!HPFB.authResponse||"undefined"===typeof(HPFB.authResponse.userID)){return{}}var c=function(){var g="http://fb-stats.huffpost.com/";var h=g+"?"+HPFB.authResponse.userID+"&"+Math.random().toString(16).replace("0.","")+"&"+escape(e.entity_type)+"&"+escape(e.entity_id)+"&"+escape(e.action)+"&"+(e.reference_id||0);my_img=document.createElement("img");my_img.setAttribute("src",h);my_img.setAttribute("style","height:1px; line-height:1px; overflow:hidden");var i=document.getElementById("_snp_tracking");i&&i.appendChild(my_img);var j=d.getAttribute("hp_track")||"Unknown";HPTrack.trackSocial("facebook",f,"["+HPTrack.Module.getTrackingPrefix(d)+"] - "+j)};c();return{}},handleStateChange:function(a){HPFB.authResponse=a.authResponse;HPFB.user_status=a.status;if(typeof HuffZodiac1!=="undefined"&&document.getElementById("zodiac_container")&&"connected"==HPFB.user_status){HuffZodiac1.buildHtml()}},initUser:function(a,b){this.initialized=true;var c=function(e,d){if(typeof(HPFB.mobileAuthFacebookCallback)!=="undefined"){HPFB.mobileAuthFacebookCallback(e.status)}var f=HuffCookies;if(typeof(SNProject)!=="undefined"){SNProject.fanCheck()}HPFB.user_status=e.status;if(e.status=="notConnected"&&!f.getUserName()){HPFB.initialized_session=true;if(!window.IS_NEWSGLIDE&&!window.IS_CHROMEAPP&&!/twitter\.com/.test(document.referrer)){HPUtil.addCSS("hp_modules/module.facebook_promo.css");HuffPoUtil.onAvailable("#facebook_promo",function(){$("fb_facepile").innerHTML='<fb:facepile max_rows="2" width="264px"/>';var g=HPTrack.Module("fb_promo","Facebook Promo");g.impression();jQuery("#facebook_promo_link").click(function(h){h.preventDefault();g.click("Connect with Facebook");linkSocialAccount.checkLoginStatus("facebook")})});setTimeout(function(){HPFB.loadFacePilePromo()},1000)}}else{if(e.status=="connected"){HPFB.authResponse=e.authResponse;if(typeof SNPModule!=="undefined"&&typeof Recommendations!=="undefined"){Recommendations.load({fb_session:HPFB.authResponse,status:HPFB.user_status})}HuffCookies.setCookie("fb_uid",HPFB.authResponse.userID,86400*14);HuffCookies.setCookie("fb_access_token",HPFB.authResponse.accessToken);HPFB.initialized_session=true;if(typeof HuffConnect!=="undefined"&&!f.getUserName()&&(d||!f.getCookie("autologin"))){if(HPUtil.GetEntryID()){HuffConnect.Login.onLoginSuccessCallback=function(){var g=HPFB.callback_init||function(){if(HPFB.user_just_login){if(window.IS_NEWSGLIDE){$(document).trigger("userlogedin");HuffConnect.hideModal()}else{if(window.IS_CHROMEAPP){ChromeApp.Login&&ChromeApp.Login.Collection.Instance.fireEvent("userlogedin");HuffConnect.hideModal()}else{location.href=location.href}}return}if(-1===window.location.href.indexOf("just_reloaded")){if(window.IS_NEWSGLIDE){$(document).trigger("userlogedin");HuffConnect.hideModal()}else{if(window.IS_CHROMEAPP){ChromeApp.Login&&ChromeApp.Login.Collection.Instance.fireEvent("userlogedin");HuffConnect.hideModal()}else{window.location.href=HPUtil.AddStringToQueryString(window.location.href,"just_reloaded=2")}}}};g();if(HPFB.callback_init){HPFB.callback_init=null}}}else{HuffConnect.Login.onLoginSuccessCallback=function(){HPUtil.reinit();if(HPFB.callback_init){HPFB.callback_init();HPFB.callback_init=null}}}HPFB.authenticate(!!!d,b)}else{if(f.getUserName()){HPFB.is_logged_in_on_huffpost=true;if(HPFB.callback_init){HPFB.callback_init();HPFB.callback_init=null}}}}else{HPFB.initialized_session=true}}return};if(a){c(a,true)}else{FB.getLoginStatus(c)}},loadFacePilePromo:function(){var d="hp_disable_fb_promo";var c=HuffCookies;if(c.getCookie(d)){return}var a="cookie_test";c.setCookie(a,"1");if(c.getCookie(a)){c.destroyCookie(a)}else{return}if(-1!==location.href.indexOf("stylelist.com")){return}var b=function(){FB.XFBML.parse(document.getElementById("facebook_promo_lb_friends"));var e=HPTrack.Module("fb_promo_lb","Facebook Promo Lightbox");e.impression();jQuery("#facebook_promo_lb_connect,#facebook_promo_lb_mock").bind("click",function(){e.click("Connect with Facebook");linkSocialAccount.checkLoginStatus("facebook");return})};HuffConnect.socialModal({inner_html:'<div class="facebook_promo_lb"><div class="facebook_promo_lb_head facebook_promo_text">'+_("Check out stories you might like,<br/>and see what your friends are sharing!")+'</div><div class="facebook_promo_lb_friends float_left" id="facebook_promo_lb_friends"><fb:facepile app_id="46744042133" width="264" style="display:block" max_rows="4"></fb:facepile></div><div id="facebook_promo_lb_mock" class="facebook_promo_lb_sprite facebook_promo_lb_screens float_right cursor_pointer" title="'+_("Connect with Facebook")+'"></div><div class="facebook_promo_lb_connect clear_first"><img class="cursor_pointer" id="facebook_promo_lb_connect" src="/images/facebook_promo_connect.png?3" /></div></div>',modal_head_image:"",modal_subhead_image:"",onclose:function(){c.setCookie(d,1,(24*60))},onshow:b});return}};HPFB.overridden_permissions=false;HPFB.login=function(h,g,d,f,i){var c=d||{};f=f||false;i=i||false;if(!HPFB.enabled){HPFB.showErrorLightbox();return}var b=new Array();b[0]={attempt_key:"/t/a/facebook/perms-test/lots/attempt",success_key:"/t/a/facebook/perms-test/lots/success",permissions:"user_about_me,user_birthday,user_interests,user_likes,user_location,read_stream,email"};b[1]={attempt_key:"/t/a/facebook/perms-test/some/attempt",success_key:"/t/a/facebook/perms-test/some/success",permissions:"user_birthday,user_location,email"};HPFB.ab_set=b[0];var e=HPFB.ab_set.permissions;if(HPFB.overridden_permissions!==false){e=HPFB.overridden_permissions}if("string"===typeof f&&f!==""){e=e+","+f}g=undefined===g?true:g;HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;h="function"==typeof h?h:undefined;var a=HuffConnect.Login;if(!HPFB.authResponse||HPFB.force_login||i){FB.login(function(k){if(h){HPFB.callback_init=h;a.registerCallback("after_facebook_login",h,"facebook")}var j=function(m){HPFB.initUser(m,c);FB.Event.unsubscribe("auth.authResponseChange",arguments.callee)};if(k.authResponse){j(k)}else{if(k.status==="connected"){FB.Event.subscribe("auth.authResponseChange",j);var l={appId:HPFB.app_id,cookies:false,status:true,xfbml:true,oauth:true};if(window.HPConfig&&HPConfig.current_web_address){l.channelUrl="http://"+HPConfig.current_web_address+"/facebook/channel.html"}if("undefined"!==typeof HPUtil&&HPUtil.getUrlVar("fb_no_channel")==="1"){delete (l.channelUrl)}FB.init(l)}}},{scope:e})}else{if(!HPFB.is_logged_in_on_huffpost&&g){if(h){a.registerCallback("after_facebook_login",h,"facebook")}HPFB.authenticate(false,c)}else{if(h&&g){h()}else{if(HPFB.user_just_login){if(window.IS_NEWSGLIDE){$(document).trigger("userlogedin");HuffConnect.hideModal()}else{if(window.IS_CHROMEAPP){ChromeApp.Login&&ChromeApp.Login.Collection.Instance.fireEvent("userlogedin");HuffConnect.hideModal()}else{location.href=location.href}}}else{linkSocialAccount.provider="facebook";linkSocialAccount.FacebookPromtLogin()}}}}};HPFB.authenticate=function(e,h){var d=h||{};var b=HuffConnect.Login;if(!HPFB.enabled){HPFB.showErrorLightbox();return}HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;var g=window.QuickLogin||false;if(!HPFB.authResponse){return false}if(HPFB.is_logged_in_on_huffpost){b.callback("after_facebook_login");return false}if(g&&e){g._auto_login=true}var a="";var c={};var f=HPFB.getSessionForServer();if(g&&g._auto_login){f+="&autologin=1";c.autologin=true}if(d&&d.fb_signup){f+="&not_login_to_huff=1"}if(g){delete (g._auto_login)}jQuery.ajax({type:"post",url:"/commentsv3/_facebookLogin.php",data:f,error:b.FacebookFail,success:function(j,k){var i=JSON.parse(j);switch(i.msg){case"success":case"new_user":HPFB.user_just_login=true;break;default:HPFB.user_just_login=false;break}if("function"===typeof(HPFB.onAuthenticateRequestSuccess)){HPFB.onAuthenticateRequestSuccess(i,c);return}b.FacebookSuccess(i,c)}})};HPFB.getSessionForServer=function(d){if(!HPFB.enabled){HPFB.showErrorLightbox();return}var a=HPFB.authResponse;if(!a){return""}var e="fb_sig";var g="";var f={};for(var c in a){if(!(a&&a.hasOwnProperty(c))){continue}var b=e+"_"+c;if(g&&d!="obj"){g+="&"}if(c=="sig"){b=e}if(d!="obj"){g+=encodeURIComponent(b)+"="+encodeURIComponent(a[c])}else{if(d=="obj"){f[b]=a[c]}}}if(d=="obj"){return f}else{return g}};HPFB.authenticate.setCallback=function(){};HPFB.showErrorLightbox=function(){var a="hpfb_tmp_tech_issue",b=HuffCookies;if(!b.get(a)){b.set(a,1,24);HuffConnect.socialModal({inner_html:_("Sorry, This feature is temporarily disabled due to technical difficulties.  Please check back soon!"),inner_wrapper_class:"padding_10_0"})}};HPFB.markFBDisabled=function(){HPFB.ensureInit=HPFB.showErrorLightbox;if(typeof(FB)=="undefined"){FB={}}FB.ensureInit=HPFB.showErrorLightbox;HPFB.enabled=false};HPFB.ensureInit=function(c,b){if(!HPFB.enabled){HPFB.showErrorLightbox();return}HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;var a=this;HPUtil.WaitForCondition.apply(this,[c,10,function(){return a.initialized}])};HPFB.ensureUserSessionStarted=function(b){if(!HPFB.enabled){HPFB.showErrorLightbox();return}HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;var a=this;HPUtil.WaitForCondition.apply(this,[b,10,function(){return a.initialized_session}])};HPFB.waitForSession=function(c,b){var a=b||{};if(!HPFB.enabled){HPFB.showErrorLightbox();return}HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;if(HPFB.authResponse){c();return}HPFB.login(c,false,a)};HPFB.getFBInfo=function(e,b){if(!HPFB.enabled){HPFB.showErrorLightbox();return}e=e||function(){};b=b||function(){};if(!HPFB.authResponse){return false}var c=HPFB.authResponse.userID;var d=FB.Data.query("SELECT name, email, pic_square, pic_square_with_logo, uid FROM user WHERE uid = {0}",c);function a(h,f){function g(i){if(i&&i[0]){h(i)}else{f(i)}}return g}d.wait(a(e,b))};HPFB.chrome_fix={stage:0,top:false,handler:false,time_to_stop:false};HPFB.streamPublish=function(c,h,i,k,g,j,a,d){if(!HPFB.enabled){HPFB.showErrorLightbox();return}HuffConnect.hideModal();if(h&&h.description&&h.description.length>422){h.description=h.description.substr(0,420)+"..."}if(c&&c.length>422){c=c.substr(0,420)+"..."}if(h&&h.media&&h.media[0]&&!h.media[0].src){h.media=[]}HPFB.is_logged_in_on_huffpost=HuffCookies.getUserName()?true:false;var f={method:"stream.publish",message:c,attachment:h,action_links:i,target_id:k,user_message_prompt:g,actor_id:d};var l;if(jQuery.browser.safari){l=jQuery("body")}else{l=jQuery("html,body")}var b=l.scrollTop();var e=function(m){l.scrollTop(b);if(j){j(m)}if(m&&m.post_id&&console&&console.log){console.log(m.post_id)}};if(HPFB.authResponse){FB.ui(f,e);return}else{HPFB.login(function(){FB.ui(f,e)},false)}};HPFacebookVoteV2={status:0,status_limit:0,vote_status:[],lock:false,init_done:false,init:function(e,h,b,g,a,f,d,c){if(this.init_done===true){return}this.init_done=true;this.userLoggedIn=HuffCookies.getUserName();this.voteUpCalled=false;this.entryId=e;this.entryTitle=h;this.entryBrief=b;this.permalink=g;this.entryImgSrc=a;this.inviteContent=f;this.userDefaultComment="";if("undefined"!=typeof(d)){this.bpage=d}else{this.bpage=""}if("undefined"!=typeof(c)){this.vote_status=c}else{this.vote_status=["Amazing","Inspiring","Funny","Scary","Hot","Crazy","Important","Weird"]}this.status_limit=this.vote_status.length;if(HuffCookies.get("facebook_user_has_voted")&&null==HuffCookies.get("facebook_user_is_voting")){this.status=HuffCookies.get("facebook_user_has_voted");HuffCookies.del("facebook_user_has_voted");HuffPoUtil.onPageReady(HPFacebookVoteV2.postVote());return}if(this.userLoggedIn&&null!=HuffCookies.get("facebook_user_is_voting")){this.status=HuffCookies.get("facebook_user_is_voting");HuffCookies.del("facebook_user_is_voting");HPFacebookVoteV2.onFacebookVote()}},postVoteCallback:function(data){try{eval("oVoteData = "+data)}catch(err){return}if(oVoteData.error){HPError.e(oVoteData.error);return}if(oVoteData.total_votes){if("news"==HPFacebookVoteV2.bpage||"blog"==HPFacebookVoteV2.bpage){if(jQuery("#link_vote_0").length>0){for(var i=0;i<HPFacebookVoteV2.status_limit;i++){if("undefined"!=typeof(oVoteData[i])){jQuery("#link_vote_"+oVoteData[i].status).html(HPFacebookVoteV2.vote_status[oVoteData[i].status]+"<br/> ("+oVoteData[i].count+")")}else{jQuery("#link_vote_"+i).html(HPFacebookVoteV2.vote_status[i])}}}if(jQuery("#bottom_link_vote_0").length>0){for(i=0;i<HPFacebookVoteV2.status_limit;i++){if("undefined"!=typeof(oVoteData[i])){jQuery("#bottom_link_vote_"+oVoteData[i].status).html(HPFacebookVoteV2.vote_status[oVoteData[i].status]+"<br/> ("+oVoteData[i].count+")")}else{jQuery("#bottom_link_vote_"+i).html(HPFacebookVoteV2.vote_status[i])}}}}}},postVote:function(c){var b="/include/vote.php?entry_id=";b+=this.entryId;b+="&vote_status="+this.status;b+=("undefined"!=typeof(c))?"&update=1":"";b+="&v=2";var a=jQuery.ajax({url:b,timeout:7000,success:HPFacebookVoteV2.postVoteCallback})},onFeedDialogClosed:function(a){if(a&&a.post_id){HuffCookies.set("facebook_user_has_voted",HPFacebookVoteV2.status);HuffCookies.del("facebook_user_is_voting");HPFacebookVoteV2.voteUpCalled=false;HPFacebookVoteV2.lock=false}else{HPFacebookVoteV2.lock=false;if(HPFB.user_just_login){location.href=location.href}}},onFacebookVote:function(){HuffCookies.del("snn_popup_needed");HuffCookies.del("facebook_user_is_voting");if(HPFacebookVoteV2.voteUpCalled){return}HPFacebookVoteV2.postVote(true);HPFB.ensureInit(function(){HPFB.waitForSession(function(){if("connected"==HPFB.user_status){HPFacebookVoteV2.voteUpCalled=true;feedData={name:HPFacebookVoteV2.entryTitle,description:HPFacebookVoteV2.entryBrief,href:HPFacebookVoteV2.permalink,media:[{type:"image",src:HPFacebookVoteV2.entryImgSrc,href:HPFacebookVoteV2.permalink}]};HPFB.streamPublish(HPFacebookVoteV2.vote_status[HPFacebookVoteV2.status]+"... "+HPFacebookVoteV2.userDefaultComment,feedData,null,null,_("Your comment is here"),HPFacebookVoteV2.onFeedDialogClosed)}else{alert(_("You're not connected to Facebook. Please try again."));FB.logout(function(){})}})})},onVote:function(b){if(this.lock){return}this.lock=true;HPFacebookVoteV2.voteUpCalled=false;this.status=b;if(this.status>this.status_limit){return}if(HPFB.authResponse){HuffCookies.set("facebook_user_is_voting",this.status);HPFB.ensureInit(function(){HPFB.waitForSession(function(){HPFacebookVoteV2.onFacebookVote()})})}else{if(this.userLoggedIn){HPFacebookVoteV2.postVote(true);this.lock=false}else{var a=this;HPFB.ensureInit(function(){HPFB.waitForSession(function(){a.lock=false;HPFacebookVoteV2.onFacebookVote()})})}}}};HPFB.likeButton=function(e,b,d,g,a,h){a=(typeof a==="undefined")?false:a;if(HPBrowser.isIEOld()&&a){jQuery(e).unbind("mouseover");return false}var c="";if("undefined"!=typeof h){c+=' hp_track="'+h+'" '}var f=jQuery("#"+g);if(f.length){if(f.attr("author_nickname")){c+=' author_nickname="'+f.attr("author_nickname")+'" '}f.html("<fb:like "+c+' width="180" href="'+b+'" action="'+d+'" layout="button_count" show_faces="false" colorscheme="light" locale="en_US"></fb:like>');FB.XFBML.parse(document.getElementById(g),function(){jQuery("#"+g).prev().addClass("visibility_hidden")})}jQuery(e).unbind("mouseover")};HPFB.likeButton_v2=function(c,b,a){if(HPBrowser.isIEOld()&&a){jQuery(c).attr("onmouseover",null);return false}b=b||"like";var e=jQuery(c).hasClass("i_v_fb_like")?c:jQuery(c).find(".i_v_fb_like")[0];if(!e){return}jQuery(c).get(0).onmouseover="";var d=jQuery(c).find(".fb_like_xml")[0];jQuery(d).html(HPFB.GetHtmlLikeWidget(JSON.parse(e.getAttribute("fblike_params")),b));FB.XFBML.parse(d,function(){jQuery(d).prev().addClass("visibility_hidden")});jQuery(e).addClass("i_v_with_count");jQuery(e).get(0).onmouseover=""};HPFB.parseLikeButton=function(a){jQuery(a).addClass("fb-like").removeAttr("onmouseover").empty();FB.XFBML.parse(a.parentNode)};HPFB.GetHtmlLikeWidget=function(b,a){return'<fb:like action="'+a.toLowerCase()+'" '+HPFB.__construct_params_for_widget(b).join(" ")+"></fb:"+a+">"};HPFB.__construct_params_for_widget=function(c){var b=[];for(var a in c){if(c.hasOwnProperty(a)){b[b.length]=a+'="'+c[a]+'"'}}return b};HPFB.handleTwitterFollowClick=function(b,a){if(jQuery(b).hasClass("tw-follow-btn")){jQuery(b).removeClass("tw-follow-btn");jQuery(b).addClass("tw-unfollow-btn")}else{jQuery(b).removeClass("tw-unfollow-btn");jQuery(b).addClass("tw-follow-btn")}};HPFB.Tracking={};HPFB.Tracking._subscribers=new Array();HPFB.Tracking.Subscribe=function(a,f,b,e){if("string"!=typeof a&&!jQuery.isArray(a)){return false}if("string"!=typeof f&&!jQuery.isArray(f)){return false}if("boolean"!=typeof b){return false}if("function"!=typeof e){return false}var d={};if("string"==typeof a){a=[a]}for(var c=0;c<a.length;c++){a[c]=a[c].toLowerCase()}d.fb_events=a;if("string"==typeof f){f=[f]}for(var c=0;c<f.length;c++){f[c]=f[c].toLowerCase()}d.hptrack_codes=f;d.is_tracking=b;d.callback=e;HPFB.Tracking._subscribers.push(d);return true};HPFB.Tracking.Init=function(){FB.Event.subscribe("edge.create",HPFB.Tracking._onEdgeCreate);FB.Event.subscribe("edge.remove",HPFB.Tracking._onEdgeRemove)};HPFB.Tracking._onEdgeCreate=function(a,b){HPFB.Tracking._processEvent("edge.create",a,b)};HPFB.Tracking._onEdgeRemove=function(a,b){HPFB.Tracking._processEvent("edge.remove",a,b)};HPFB.Tracking._processEvent=function(c,b,f){if("edge.create"==c&&("like"==f.dom.getAttribute("action")||null===f.dom.getAttribute("action"))){c="Liked"}else{if("edge.create"==c&&"recommend"==f.dom.getAttribute("action")){c="Recommended"}else{if("edge.remove"==c&&("like"==f.dom.getAttribute("action")||null===f.dom.getAttribute("action"))){c="Unliked"}else{if("edge.remove"==c&&"recommend"==f.dom.getAttribute("action")){c="Unrecommended"}}}}var i=false;var d="";if(null!==f.dom.getAttribute("hp_track")){hptrack=f.dom.getAttribute("hp_track")}else{hptrack="Unknown"}d=decodeURIComponent(b);d=d.split("?")[0].split("/").slice(3).join("/");if(d.length>0){d="/"+d}if("Unknown"==hptrack&&null!==f.dom.getAttribute("entity_id")&&null!==f.dom.getAttribute("author_nickname")&&1==f.dom.getAttribute("entity_type")){hptrack="Author Info"}for(var h=0;h<HPFB.Tracking._subscribers.length;h++){var e=HPFB.Tracking._subscribers[h];var l={};var g={};g.module=hptrack;g.action=c;g.label=HPTrack.Module.getTrackingPrefix(f)+"Facebook";if("Unknown"==hptrack){g.label+=" v2 "+d}g.localy_tracked=false;if(!e.is_tracking){e.callback(c,b,f);continue}else{if(e.is_tracking&&!i){if((0==e.fb_events.length||e.fb_events.inArray(c.toLowerCase()))&&(0==e.hptrack_codes.length||(null!==hptrack&&e.hptrack_codes.inArray(hptrack.toLowerCase())))){l=e.callback(c,b,f);if("object"==typeof l&&("undefined"!=typeof l.module||"undefined"!=typeof g.localy_tracked)){for(var a in l){g[a]=l[a]}if("undefined"!=typeof g.localy_tracked&&true!==g.localy_tracked){HPTrack.trackEvent(g.module,g.action,g.label);HPTrack.trackSocial("facebook",g.action,"["+HPTrack.Module.getTrackingPrefix(f)+"] - "+hptrack);if(huff.beta||location.search.indexOf("debug")>0){console.log("Tracking: "+g.module+" | "+g.action+" | "+g.label)}}else{if(true!==g.localy_tracked){if(huff.beta||location.search.indexOf("debug")>0){console.log("Localy tracked")}}}i=true;f.dom.setAttribute("hp_tracked",1)}}continue}}}if(!i){if("mostpop_entry"==g.module){var k="";if(f&&f.dom&&f.dom.className){k=" | "+f.dom.className+" | "}g.label+=k+d}HPTrack.trackEvent(g.module,g.action,g.label);i=true;f.dom.setAttribute("hp_tracked",1);if(huff.beta||location.search.indexOf("debug")>0){console.log("Tracking: "+g.module+" | "+g.action+" | "+g.label)}}};HPFB.saveTokens=function(a,e){a=a||false;e=e||false;if("connected"==HPFB.user_status&&HPUser.is_logged_in()){var c="/users/refresh_facebook_tokens.php";var b=HPFB.getSessionForServer();var d=(b?""+b:"");jQuery.ajax({url:c,type:"POST",data:d,success:function(i,h,g){try{var f=JSON.parse(i)}catch(j){var f={status:"failure",msg:"Some error occured"}}if(/success/.test(f.status)){if("function"==typeof(a)){a()}}else{if("function"==typeof(e)){e()}}return},error:function(){HPError.e();return}})}};HPFB.removeSocialReading=function(){HPFB.ensureInit(function(){FB.getLoginStatus(function(a){if(a&&"connected"==a.status){FB.api("/me/permissions",function(b){if(b&&b.data[0]&&b.data[0].publish_actions&&b.data[0].publish_actions==1){jQuery("#readedge_removal").show();jQuery("#re_removal_big").click(function(){jQuery("#re_removal_buttons").show()});jQuery("#re_removal_revert").click(function(){jQuery("#re_removal_buttons").hide()});jQuery("#re_removal_confirm").click(function(){jQuery("#re_removal_buttons").html("Removing reads...");var c=HPFB.getSessionForServer("obj");jQuery.ajax({url:"/users/read_edge/v2/remove_social_reading.php",type:"post",data:c,dataType:"json",success:function(h,f,e){if(/success/.test(h.status)){if(h.action_ids&&h.action_ids.length){var g=h.action_ids.length;for(var d=0;d<g;d++){FB.api("/"+h.action_ids[d],"delete",function(i){})}}FB.api({method:"auth.revokeExtendedPermission",perm:"publish_actions"},function(i){if(i===true){jQuery("#readedge_removal").html('<div class="color_444444 bold arial_14">Social reading experience has been removed.</div>');setTimeout(function(){jQuery("#readedge_removal").fadeOut()},5000)}})}else{jQuery("#readedge_removal").html('<div class="color_444444 bold arial_14">Some error occurred.</div>')}},error:function(){jQuery("#readedge_removal").html('<div class="color_444444 bold arial_14">Some error occurred.</div>');HPUtil.error()}})})}})}})})};HPFB.facebookAppCenterCallback=function(){var b=false;var a=false;var d={};var c=function(){if(document.loading_info_modal){return}document.loading_info_modal=true;var e=function(){var h="";switch(HPConfig.site){case"france":h="/images/facebook/fr/";break;default:h="/images/facebook/";break}return h};var g=function(){var h="";h+='<div id="readedge_modal">';h+='	<div class="center readedge_slides" id="slideshow_div">';h+='		<div id="readedge_slide1" class="readedge_slide"> <h2>'+_("Welcome")+" "+d.first_name+", "+_("See what your friends are reading")+'</h2><img src="'+e()+'facebook_readedge1.jpg" alt="'+_("See what your friends are reading")+'" /> </div>';h+='		<div id="readedge_slide2" class="hidden readedge_slide"> <h2>'+_("Share only the stories you want")+'</h2><img src="'+e()+'facebook_readedge2.jpg" alt="'+_("Share only the stories you want")+'" /> </div>';h+='		<div id="readedge_slide3" class="hidden readedge_slide"> <h2>'+_("Full control over what you share")+'</h2><img src="'+e()+'facebook_readedge3.jpg" alt="'+_("Full control over what you share")+'" /> </div> ';h+='		<div id="readedge_slide4" class="hidden readedge_slide"> <h2>'+_("Access your reading history on Facebook timeline")+'</h2><img src="'+e()+'facebook_readedge4.jpg" alt="'+_("Access your reading history on Facebook timeline")+'" /> </div> ';h+="	</div>";h+='	<div class="readedge_bg readedge_left_arr"></div>';h+='	<div class="readedge_bg readedge_right_arr"></div>';h+='	<div class="readedge_paging" style="text-align:center"></div>';h+='	<ul class="re-fb-modal-actions">';h+='		<li id="re-start-share" style="height:12px;"><a href="javascript:void(0);" id="re-fb-button"><img src="https://graph.facebook.com/'+d.id+'/picture" style="position:absolute; top:0; left:-10px; height:28px;" />'+_("Start Sharing")+" </a></li>";h+='		<li><a id="re-modal-faq" href="/faq/#socialnews" target="_blank">'+_("Learn More")+"</a></li>";h+="	</ul>";h+='	<div class="clear"></div>';h+="</div>";return h};var f=function(){if(document.loading_info_modal_plugin){return}document.loading_info_modal_plugin=true;jQuery.getScript("/include/lib/jquery/jquery.cycles.all.min.js",function(){jQuery("div.readedge_slides").cycle({fx:"scrollHorz",pager:".readedge_paging",next:".readedge_right_arr",prev:".readedge_left_arr",width:635,speed:250,cleartype:1});jQuery("div.readedge_slides").cycle("pause");jQuery("#re-fb-button").bind("click",function(){huff.use("modal",function(h){h.hide()})});return});return};onmodalshow=function(){f()};onmodalclose=function(){delete (document.loading_info_modal);delete (document.loading_info_modal_plugin);if(document.loading_info_modal2){delete (document.loading_info_modal2)}};huff.use("connect/modal","modal",function(i,h){i.init(function(){if(document.loading_info_modal2){return}document.loading_info_modal2=true;h.show({theme:"connect_modal",width:750,position:"fixed",onshow:onmodalshow,onclose:onmodalclose,content:g()})})});return};jQuery(document).ready(function(){if("undefined"!==typeof HPUtil&&"appcenter"===HPUtil.getUrlVar("fb_source")){HPFB.ensureInit(function(){FB.getLoginStatus(function(e){e=e||{};if("connected"===e.status){b=true;FB.api("/me",function(f){d=f;FB.api("/me/permissions",function(h){h=h||{};var g=h.data[0].publish_actions||0;if(1===g){a=true;c()}})})}})})}});return};HPFB.facebookAppCenterCallback();
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var SNProject={join_max_tries:5,facebook_join_retried:0,popup_needed:HuffCookies.get("snn_popup_needed"),init:function(){this.user_logged_in=!!HuffCookies.getUserName();this.maybe_facebook=HPFB.maybeFacebookConnected();this.snp_cookie=HuffCookies.getSNPstatus();this.read_tracking_enabled=HuffPrefs.get("read_tracking")},_tryToJoinUser:function(){var a=SNProject;var b=HuffCookies;HPError.d("snn join callback");if(a.join_max_tries>0){if(b.getUserId()){huff.use("connect/auth",function(c){c.Login.loginSuccess()})}else{a.join_max_tries--;setTimeout(a._tryToJoinUser,200)}}else{if(typeof IS_NEWSGLIDE==="boolean"&&IS_NEWSGLIDE){$(document).trigger("userlogedin");HuffConnect.hideModal()}else{window.location="/social/join.html?autojoin=1"}}},joinCheckingUserStatus:function(e){var c=SNProject;var d=QuickLogin;var b=HuffConnect.Login;e=e||{};var a=e.service||false;if(HuffCookies.getSNPstatus()==1&&HuffCookies.getUserName()&&!HuffPrefs.get("yahoo")&&HPUtil.getUrlVar("just_reloaded")!=="3"){location.href=HPUtil.AddStringToQueryString(location.href,"just_reloaded=3");return false}if(!a){HuffConnect.loadConnectModal();return false}d.calledBySNN=true;if(HuffCookies.getUserName()){if(a=="facebook"){d.FacebookLoginCallback=c._tryToJoinUser;HPFB.login()}else{c._join()}}else{if(a=="facebook"){d.FacebookLoginCallback=c._tryToJoinUser;HPFB.login()}else{b.onLoginSuccessCallback=c._tryToJoinUser;HuffConnect.loadConnectModal()}}return false},installYApp:function(){var a="http://apps.yahoo.com/-AIjuiA4o";PopupManager.open(a,800,600);HuffConnect.hideModal();return},checkFriendsFansOnJoin:function(){var c=false;var a={facebook:"",twitter:"",google:"",linkedin:"",aol:"",winlive:""};for(var b in a){if(HuffPrefs.get(b)){c=true;break}}if(!c){return}jQuery.ajax({url:"/users/social_news_project/make_friends_fans.php",type:"POST",data:HPFB.getSessionForServer()+"&showall=1"||"showall=1",success:function(g,f,e){return;if(e.status!=200){return}if(HuffPoUtil.trim(g)!=""){var h=g.split(":::::");var d='<div id="auto_friends_modal" class="padding_10">'+h[0]+"</div>";huff.use("modal",function(i){i.show({content:d,width:680,position:"absolute",onshow:function(){if("undefined"!=typeof(FB)){setTimeout(function(){FB.XFBML.parse(jQuery("#auto_friends_modal").get(0))},500)}SocialFriends.init();return}})})}},error:function(){HPError.e();return},timeout:30000})},checkFriendsFansOnLogin:function(){SNProject.checkFriendsFansOnJoin()},track:function(f,d,a){var e=SNProject;var b="http://user-stats.huffpost.com/";if(window.location.host!="www.huffingtonpost.com"){if(window.HPConfig&&HPConfig.inst_type=="dev"){b="/FAKE_SNProject.track_FROM_BETA/"}else{return true}}if(!f||f==""){f=0}if(!a||a==""){a=0}if(/[^\d+]/.test(f)||/[^\d+]/.test(a)||(d!="delete_entry_view"&&d!="entry_view"&&d!="entry_like"&&d!="entry_unlike"&&d!="comment_comment"&&d!="entry_vote"&&d!="slideshow_poll_vote"&&d!="slideshow_poll_facebook_share"&&d!="user_snp_join"&&d!="hufflist_item_added"&&d!="comment_favored"&&d!="user_log_in"&&d!="user_log_out"&&d!="user_follow"&&d!="poll_vote"&&d!="prediction_vote"&&d!="entry_facebook_share"&&d!="entry_twitter_share")){return false}can_track=true;if(d=="entry_view"){can_track=HuffPrefs.get("read_tracking")}can_track=can_track?1:0;if(HuffCookies.getUserId()){var c=function(){var g=b+"?"+HuffCookies.getUserId()+"&"+Math.random().toString(16).replace("0.","")+"&"+escape(f)+"&"+escape(d)+"&"+escape(a)+"&"+can_track;my_img=document.createElement("img");my_img.setAttribute("src",g);my_img.setAttribute("style","height:1px; line-height:1px; overflow:hidden");var h=document.getElementById("_snp_tracking");if(h){document.getElementById("_snp_tracking").appendChild(my_img)}};if(d=="entry_view"){setTimeout(c,1000)}else{c()}}return true},fanCheck:function(){if(SNProject.user_logged_in&&1==HuffCookies.getCookie("check_for_fans")){SNProject.checkFriendsFansOnLogin()}else{if(SNProject.user_logged_in&&SNProject.snp_cookie==1&&HuffCookies.get("snn_popup_needed")){HPFB.ensureInit(function(){if("connected"==HPFB.user_status){setTimeout(function(){SNProject.checkFriendsFansOnLogin()},3000)}})}}HuffCookies.del("snn_popup_needed");HuffCookies.destroyCookie("check_for_fans")},initModal:function(a){a=a||"tweet";huff.use("modal",function(b){var c="";c+="<div class='"+a+"_modal_frame'>";c+="<div class='border_top'></div>";c+="<div class='"+a+"_modal_close close_button'></div>";c+="<div style='clear:both;'></div>";c+="<div class='main_container'>";c+="<div class='head_image'></div>";c+="<div class='content'>";c+="</div>";c+="</div>";c+="<div style='clear:both;'></div>";c+="<div class='border_bottom'></div>";c+="</div>";c+="<div class='"+a+"_modal_close' style='position:fixed; z-index:900; left:0px; top:0px; width:100%; height:100%; background:#000; opacity:0.7; filter:alpha(opacity=70);'></div>";b.theme(a+"_modal",{frame:c,window:"div:first",content:"div.content",closer:"."+a+"_modal_close",init:function(e,d){e.width(d.width||"").height(d.height||"").css("margin-left","-"+(e.width()/2)+"px")}})});return}};SNProject.init();(function(c,b){var a={config:{ajax:true},CONSTANTS:{updateInterval:1000*60*3,countNotificationsUrl:"/users/social/notifications/action.php?count"},setCounter:function(f){var e=this.getCounter();var d=function(h){var g=e.text();if(g!=""&&h==g){return}var j=100,i=h;h>100&&(i="100+");h>=0&&e.animate({top:20},j,"linear",function(){e.html(i).css({top:-20}).animate({top:0},j,"linear")})};e.length&&typeof f=="undefined"&&c.ajax({url:this.CONSTANTS.countNotificationsUrl,success:d});f>=0&&d(f);return;b.clearTimeout(this.counter_timer);this.counter_timer=b.setTimeout(function(){a.setCounter()},this.CONSTANTS.updateInterval)},getCounter:function(){return c(".notifications .counter-box .value")},clearVisited:function(){var e=c("#social-nav-bar iframe").contents(),d=e.find(".notification.visited");d.length>0&&d.remove();return true},clearAll:function(){c.ajax({url:"/users/social_news_project/profile/notifications/clear.php",success:function(){b.location=b.location}})},setEvents:function(){c(document).ready(function(){var e='<iframe id="notifications-window" frameborder="0" title="Notifications" src="/users/social/notifications/frame.php" width="350" height="480"></iframe>';var d=function(g){return g.css("visibility")=="visible"};var f=function(){var h=jQuery("#social-nav-bar"),l=jQuery("#wendybird_user"),m=l.find(".dropdown"),i=l.find(".notifications-link"),g=l.find(".wendybird_user_data"),k=h.find(".popup"),j=a;d(h)&&h.css({visibility:"hidden"})&&i.removeClass("active")&&j.clearVisited()&&k.html(e)&&j.setCounter();m.is(":visible")&&m.slideUp(200,function(){g.removeClass("active")})};c("#wendybird_user .notifications-link").click(function(i){HPTrack.trackEvent("Social/Notifications","Click","Popup");i.stopPropagation();i.preventDefault();var h=jQuery("#social-nav-bar"),m=jQuery("#wendybird_user"),g=m.find(".wendybird_user_data"),j=m.find(".notifications-link"),l=h.find(".popup"),k=a;m.find(".dropdown").hide()&&g.removeClass("active");if(d(h)){h.css({visibility:"hidden"})&&j.removeClass("active")&&k.clearVisited()&&l.html(e)}else{jQuery(this).addClass("active");if(!l.find("iframe").length||k.getCounter().text()>0){l.html(e)}h.css({visibility:"visible"})}});jQuery("#wendybird_user .wendybird_user_data").unbind().click(function(j){j.stopPropagation();var i=jQuery("#social-nav-bar"),l=jQuery("#wendybird_user"),m=l.find(".dropdown"),k=l.find(".notifications-link"),h=jQuery(this),g=jQuery(j.target);!g.closest(m).length&&j.preventDefault();d(i)&&i.css({visibility:"hidden"})&&k.removeClass("active");if(m.is(":visible")){m.slideUp(200,function(){h.removeClass("active")})}else{m.slideDown(200)&&h.addClass("active")}});jQuery("body").click(f)})}};b.SocialNotifications=a})(jQuery,window);
window._ || (window._ = function (str) { return str; });
window.ngettext || (window.ngettext = function (str) { return str; });
window.sprintf || (window.sprintf = function (str) { return str; });
/*
    Code related to SNP module / Most Popular Module
*/

YAHOO.namespace('SNP');
YAHOO.SNP.SNPBlock = function(params)
{
	params = params || {};
	extend(this,params);
	this.load();
}
YAHOO.SNP.SNPBlock.prototype = {
	url: '',
	id: '',
	cur_obj: null,
	paginator: null,
	paginated: true,
	update_max_page: false,
	is_circle: true,
	next: function() {},
	prev: function() {},
	load: function() {
		if (this.cur_obj)
		{
			this.cur_obj.loadSNPBlock();
		}
	},
	goto: function() {},
	init_pagination: function(page, maxPage, url, passed_params)
	{
		if (this.paginated)
		{
			var params = {
				moduleName: this.id,
				update_max_page: this.update_max_page,
				maxPage: maxPage,
				is_circle: this.is_circle,
				is_ajax_update: true,
				update_images: true,
				url: url
			};
			extend(params, passed_params);
			this.paginator = new CommonPaginator(params);
		}
	}
}
YAHOO.SNP.RecommendBlock = function(params)
{
	YAHOO.SNP.SNPBlock.call(this, params);
}

YAHOO.extend(YAHOO.SNP.RecommendBlock, YAHOO.SNP.SNPBlock);
/*
    SNPModule manages right-hand sidebar of the page.

    Specifically, it powers the part of sidebar that shows
    either:
        * Most Popular module only (to logged-out users
    and other some other conditions)
        * The full "Social Module" (aka "SNN module" aka "SNP module"...)

   To prevent loading of Social Module, please set:
    * HPConfig.no_social_module = true;
   (but continue to call SNPModule.load)
*/
var SNPModule = {
        current_notSNN_vertical     :'',
	loaded: false,
    arr_pages: Array(),
    arr_current_page: Array(),
    arr_max_page: Array(),
    arr_lock_status: Array(),
	
    // used in not_snn_init
    arr_non_snn_modules: ['not_signed_mp', 'not_signed_mbc', 'not_signed_mbf', 'not_signed_mbt', 'not_signed_mpr', 'not_signed_dm'],
    non_snn_made_init: 0,
	
    // used in init
    arr_snn_modules: ['comment', 'friends', 'mp', 'mp_bn', 'mp_hp', 'follower', 'dm_hp', 'mbc', 'mbf', 'mbt', 'mbt', 'act', 'mpr', 'entry_inside_comment', 'twitter_friends', 'twitter_influencers'],
	
    snn_made_init: 0,
    animation: null,
    url_user_id: '',
    isFormLoaded: false,
    mpTimeout: null,
    ms: 24000,
    twitter_timeline_type: 'home',
    tweetout_module_div: 'hidden_twitter_module',
    skin: null,
    hide_hp_module: true,

    load: function (trends_mode)
	{
        if (!HPConfig.no_social_module && HuffCookies.getUserName() && document.domain !== 'preview.huffingtonpost.com')
		{
                var get_data = '';
				
                get_data = '?v=' + HPConfig.current_vertical_name;
			
            var path = window.location.pathname.split('/');
			
                if( typeof path[1] !== "undefined" && path[1] == 'big-news' ) {
			get_data += '&page_type=big_news_list';
		} else if( typeof path[1] !== "undefined" && path[1] == 'social' ) {
			get_data += '&page_type=profile_page';
		} else if( typeof path[1] !== "undefined" && path[1] == 'theblog' ) {
			get_data += '&page_type=theblog';
		}
			
                if (trends_mode) get_data += '&hot_trends_mode=' + trends_mode;
                if (HuffPoUtil.getUrlVar("level")) get_data += '&level=1';
				if (HuffPoUtil.getUrlVar("snp")) get_data += '&snp=v2';
			
            get_data += '&includefbrecom=1';
			
            location.href.match(/[?&]external=1/) && (get_data += '&external=1');
			
            C.asyncRequest('GET', '/users/social_news_project/snp_module.php' + get_data, {
                success: function (o) {
                    if (o.responseText != '') {
                        var display_module_arr = o.responseText.split('::module_to_disp::');    //set in snp_module.php to display module based upon number of friends and twitter linked
                        var display_module = display_module_arr[1];
                        var response = o.responseText.replace('::module_to_disp::' + display_module, '');
						
						if (display_module == "snn") {
							//snn module
							if ("undefined" != typeof (response)) {
								var ffu = Dom.get('facebook_friends_unit_wrapper');
								if (ffu) {
									ffu.innerHTML = response;
								}
							}
						}
                        else if (display_module == "twitter_popular") {
							//twitter and most popular on huffpost module
                            SNPModule.hide_hp_module = false;
                            SNPModule.tweetout_module_div = "hidden_twitter_module_frontpage";
                        }
                        else if (display_module == "popular") {
							//most popular on huffpost module
                            SNPModule.hide_hp_module = false;
                        }
						
                        SNPModule.snn_made_init = false;
                        SNPModule.init();
						
                        if (typeof HPAds.page_spots["most_popular_edit_promo"] !== "undefined") {
                            var mp_adv_items = jQuery("#snp_mp_hp_page_0 div[id^='snp_mp_hp_subpage_']");
                            var mp_adv_item;
                            if (mp_adv_items.length > 3) mp_adv_item = jQuery(mp_adv_items[2]);
                            else if (mp_adv_items.length) mp_adv_item = jQuery(mp_adv_items[mp_adv_items.length - 1]);
                            if (mp_adv_item.length) {
                                HPAds.ad_reload('most_popular_edit_promo',mp_adv_item.attr('id'), true);
                            }
                        }
						
                        if (SNPModule.skin) {
                            setTimeout("SNPModule.show_skinned_module()", 1000);
                            setTimeout("HPAds.ad_reload('snn_234x60_req','ad_snn_234x60_req')", 3000);
                            return;
                        }
						
                        setTimeout("HPAds.ad_reload('snn_234x60_req','ad_snn_234x60_req')", 2000);
                        SNPModule.loaded = true;
					
						//if facebook api is enabled load recommendations
						if ( HPFB.enabled ) {
							var recom_interval = window.setInterval(function() {
								if ( typeof Recommendations !== "undefined" ) {
									HPFB.ensureInit( function() {
										if ( HPFB.initialized ) {
											if (huff.beta)
												console.log('Trying to load recommendations...');
											clearInterval(recom_interval);
											if ( HPFB.authResponse ) {
												Recommendations.load({ 
													fb_session: HPFB.authResponse, 
													status: HPFB.user_status 
												});
											}
										}
									} );
								}
							}, 500);
						}
					}
                    },
                    failure: function(o) {
                    if ($('hidden_snp_body')) {
                            HuffPoUtil.hide('hidden_snp_body');
                            HPError.e();
                        }
                    },
					timeout: 20000
                });
        } else {  // user is not logged in, SNP module not initializing
			
            jQuery(document).ready(function(){
                if (typeof HPAds.page_spots["most_popular_edit_promo"] !== "undefined") {
                    var mp_adv_items = jQuery("#snp_not_signed_mp_page_0 div[id^='snp_mp_hp_subpage_']");
                    var mp_adv_item;
                    if (mp_adv_items.length > 3) mp_adv_item = jQuery(mp_adv_items[2]);
                    else if (mp_adv_items.length) mp_adv_item = jQuery(mp_adv_items[mp_adv_items.length - 1]);
                    if (mp_adv_item.length) {
                        HPAds.ad_reload('most_popular_edit_promo',mp_adv_item.attr('id'), true);
                    }
                }
            });
            this.trackLoaded();
        }
        if (HuffCookies.getSNPstatus() == 1) {
                HuffPoUtil.hide('snn_fb_promo_box');
            }
    },

	/*
	 * TODO: Ads team to confirm whether we'll use the skinned snp module
	 * It is safe to comment out this block of code till we enable skinned snp module
    skin_click_handler_flag: false,
    skin_click_handler: function (check_flag) {
        if (check_flag && this.skin_click_handler_flag) {
				this.skin_click_handler_flag = false;
				return;
			}
            if((typeof(HPAds.snpmodule_skinhref) != "undefined") && (HPAds.snpmodule_skinhref != ''))
                location.href = HPAds.snpmodule_skinhref;
        },
	
    show_skinned_module: function () {
            var skin = this.skin;
            var is_bpage = HuffPoUtil.GetEntryID(location.href);
        this.animatePage(0, 'facebook_friends_unit_wrapper');
        // -----------------
        var module_body_el = Dom.get('snp_friends_module');
        var module_logo_top = document.createElement('div');
        var module_top_wrap = document.createElement('div');
        var module_body_wrap = document.createElement('div');
        var module_bottom_wrap = document.createElement('div');
        var head_stealth_mode_sw = document.createElement('div');
        var mp_copy = document.createElement('div');
        mp_copy.id = 'mp_module_copy_holder';
        Dom.addClass(mp_copy, 'mp_module_copy_holder');
        Dom.addClass(module_logo_top, skin + '-logo-top');
        Dom.addClass(module_top_wrap, skin + '-top-wrap');
        Dom.addClass(module_body_wrap, skin + '-body-wrap');
        Dom.addClass(module_bottom_wrap, skin + '-bottom-wrap');
        Dom.addClass(module_body_el, skin);
        var ffu = Dom.get('facebook_friends_unit_wrapper');
        ffu.appendChild(mp_copy);
        ffu.appendChild(module_logo_top);
        ffu.appendChild(module_top_wrap);
        ffu.appendChild(module_body_wrap);
        ffu.appendChild(module_bottom_wrap);
        module_body_wrap.appendChild(module_body_el);
        module_body_el.insertBefore(head_stealth_mode_sw, module_body_el.firstChild);
        head_stealth_mode_sw.id = skin + '_stealth_mode_switcher';
        Dom.addClass(head_stealth_mode_sw, 'border_bottom_ccc');
        module_logo_top.innerHTML = '&nbsp;';
        module_top_wrap.innerHTML = '&nbsp;';
        module_bottom_wrap.innerHTML = '&nbsp;';
        // add onclick handlers 
        E.on(module_top_wrap, "click", function () { this.skin_click_handler(); }, null, this);
        E.on(module_bottom_wrap, "click", function () { this.skin_click_handler(); }, null, this);
        E.on(module_body_wrap, "click", function (e, param) { this.skin_click_handler(param); }, true, this);
        E.on(module_body_el, "click", function () { this.skin_click_handler_flag = true; }, null, this);
        // hide blocks in SNP module
        HPUtil.hide('snn_frontpage_widget_make_home');
        HPUtil.hide('snp_title');
        HPUtil.hide('snp_module_header');
        HPUtil.hide('snp_huffpo_bloggers_module_here');
        HPUtil.hide('snn_frontpage_widget_sub_footer');
        // move huffpo_mp_module to it's copy holder
        mp_copy.appendChild(Dom.get('huffpo_mp_module_here'));
		
        // we should display it only for b-n-pages
        if (is_bpage) {
            this.animatePage(0, 'all_frontpage_widgets');
            HPUtil.show('all_frontpage_widgets');
			
            // hide blocks in MP module
            var hide_it = Dom.getElementsByClassName('unique_identifier_for_mp');
            if (hide_it[0])
                hide_it[0].style.display = 'none';
				
            // move most popular on huffpo to MP module
            //var htm = Dom.get('hidden_twitter_module_frontpage');

            //	htm.parentNode.insertBefore(Dom.get('huffpo_mp_module_here'), htm);
            }
			
            // ------------------------------
            this.animatePage(1,'facebook_friends_unit_wrapper');
		
        // ------------------------------
        this.animatePage(1, 'facebook_friends_unit_wrapper');
		
        this.skinned_module_stealth.init();
        if ((typeof (HPAds.snpmodule_trackingpixel) != "undefined") && (HPAds.snpmodule_trackingpixel != ''))
            HPUtil.onPageReady(function () { HPUtil.trackerImg(HPAds.snpmodule_trackingpixel, document.body); });
        },

        skinned_module_stealth:
	{
		id: null,
		
		init: function () {
			var skin = SNPModule.skin;
			if (Dom.get(skin + '_stealth_mode_switcher')) {
				this.id = skin + '_stealth_mode_switcher';
				if (HuffPrefs.get('read_tracking') === true) {
					Dom.get(this.id).innerHTML = '<div class="moto-head-stealth-off" onclick="SNPModule.stealth.update(); return false;">' + _("Stealth Mode (Off)") + '</div>';
				}
				else {
					Dom.get(this.id).innerHTML = '<div class="moto-head-stealth-on" onclick="SNPModule.stealth.update(); return false;">' + _("Stealth Mode (On)") + '</div>';
				}
			}
		},
		
		onUpdated: function () {
			if (Dom.get(this.id)) {
				if ('on' == SNPModule.stealth.current_status) {
					Dom.get(this.id).innerHTML = '<div class="moto-head-stealth-off" onclick="SNPModule.stealth.update(); return false;">' + _("Stealth Mode (Off)") + '</div>';
				}
				else {
					Dom.get(this.id).innerHTML = '<div class="moto-head-stealth-on" onclick="SNPModule.stealth.update(); return false;">' + _("Stealth Mode (On)") + '</div>';
				}
			}
		}
	},
	
    show_skinned_twitter_module: function () {
            // trim twitter name in the head of the twitter module
        if (Dom.get('main_snn_twitter_module')) {
            anch_to_find = Dom.get('main_snn_twitter_module').getElementsByTagName('a');
            for (var j = 0; j < anch_to_find.length; j++) {
                if (Dom.hasClass(anch_to_find[j], 'twitter_snn_name')) {
                    var tname = anch_to_find[j].innerHTML;
                    if(tname.length > 18)  anch_to_find[j].innerHTML = tname.slice(0,17) + '&hellip;';
                    break;
	                }
                }
            }
        },
    */


    init_module: function (mod_name, force_reinit) {
        // if arr_max_page is not defined probably the this.arr_pages for the same module is not defined
        if ('undefined' == typeof (this.arr_pages[mod_name])) {
            this.arr_pages[mod_name] = new Array();
            }
		
        if ('undefined' == typeof (this.arr_current_page[mod_name])) {
            this.arr_current_page[mod_name] = 0;
            }
		
        if ($('snp_' + mod_name + '_max_page_counter')) {
            this.arr_max_page[mod_name] = parseInt($('snp_' + mod_name + '_max_page_counter').innerHTML) - 1;
			
            // check if there are pages, some modules doesn't provide such
            // first page is enough to indicate there are such
            if ($('snp_' + mod_name + '_page_ids_0')) {
                for (var pg_num = 0; pg_num <= this.arr_max_page[mod_name]; pg_num++) {
                    this.arr_pages[mod_name][pg_num] = $('snp_' + mod_name + '_page_ids_' + pg_num).innerHTML;
                }
			}			
        }
        else {
            this.arr_max_page[mod_name] = 0;
        }
    },

    init: function () {
        if (this.snn_made_init) return false;

        if (HPAds.snpmodule_skin == 'motorola' && Dom.get('snp_friends_pages')) {
            this.skin = 'moto';
        }

        if (!this.url_user_id && $('snp_module_user_id')) {
            this.url_user_id = $('snp_module_user_id').innerHTML;
        }

        this.lightbox.init();
        this.stealth.init();

        for (i = 0; i < this.arr_snn_modules.length; i++) {
            this.init_module(this.arr_snn_modules[i]);
        }

            //add current entry to activity?
            var entry_id = HuffPoUtil.GetEntryID(window.location.href);
        if (SNProject.read_tracking_enabled == 1 && entry_id && !$('snp_activity_read_entry_' + entry_id) && $('snp_current_reading_entry_title')) {
                //yes, we should add it
                this.current_reading_entry_id = entry_id;
                $('snp_current_reading_entry_title').innerHTML = document.title;
                $('snp_current_reading_entry').style.display = 'block';
            }

        this.snn_made_init = 1;

            this.hideHpModules();

        if ($('most_popular_ad_stub') && HuffPoUtil.trim($('most_popular_ad_stub').innerHTML) == '') {
                    $('most_popular_ad_stub').innerHTML = '<iframe src="http://ad.doubleclick.net/adi/huffpost.socialnews;tile=1;sz=234x60;ord='+ HuffPoUtil.WEDGJE.ord() +'?" width="234" height="60" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" name="social_news_234x60" id="social_news_234x60"></iframe>';
                }

            //Display button in module depending upon service first Facebook then Twitter
            this.networkToLink();

        if (HuffPrefs.get('twitter') && !HPConfig.no_twitter) {
                SNPModule.twitterModule(
                    function () {
                        SNPModule.init_module('twitter_friends');
                        SNPModule.init_module('twitter_influencers');


                        E.on('tweet_status', 'keyup', HPUtil.enforceTextAreaLimit, {chars: 140});
                        E.on('tweet_status', 'change', HPUtil.enforceTextAreaLimit, {chars: 140});
                    }
                    );

            }

            this.trackLoaded();

		// user levels code - new level SNN notification
		if (HuffPoUtil.getUrlVar("level") || HPConfig.user_show_levels_and_badges_disabled == false) {
			var my_level = $("snn_module_my_level");
			if (my_level) {
				my_level = my_level.innerHTML;
				Y.util.Event.onDOMReady(SNPModule.show_user_level_box);
			}
		}

        for (i = 0; i < this.arr_snn_modules.length; i++) {
            var page_0 = 'snp_' + this.arr_snn_modules[i] + '_page_0'
            if ($(page_0))
                huff.emit('content/update', '#' + page_0);
        }

		//rebalance columns now that module has loaded
		huff.emit('content/update');
    },

    not_snn_init: function () {
        if (this.non_snn_made_init) return false;

        for (i = 0; i < this.arr_non_snn_modules.length; i++) {
            this.init_module(this.arr_non_snn_modules[i]);
        }

        this.non_snn_made_init = 1;
        },

        /*
            Track SNP or Most Popular module events
        */
    trackEvent: function (action, label) {
            this.tracker.event(action, label);
        },

        trackLoaded: function() // call once SNN module has initialized (or not initialized, and is Most Pop)
        {
            if (typeof HPTrack == 'undefined')
                return;

            // Set module name
            var long_name = 'Sidebar - ';
            var short_name = 'sb-';
        if (this.snn_made_init) // social mode
            {
                short_name += 'social';
                long_name += 'Social';
            }
            else // most popular mode
            {
            	var preffix = ( HPConfig.most_popular_version > 1 )? '-viralsort':'-hpsort';

                short_name += 'mostpop'+preffix;
                long_name += 'non-Social'+preffix;
            }

            var HPM = HPTrack.Module;
            this.tracker = HPM(short_name, long_name);
            this.tracker.impression();

            /*
                Fire impression tracking here to send first batched
                module impression tracking because this is usually the "last"
                module to load on the page

                TODO: clearer placement of this - maybe a timer that happens
                irrespective of social module loading or not loading
            */
            HPM.Impressions.fire();

            var event_handler = new HPTrack.Module.DelegatedHandler(this.trackEvent, this);

            // initialize click tracking
            E.on('snp_friends_module', 'click', event_handler, this, true);

			// track like/recommend buttons
			this.initLikeTracking(this.tracker);

        },

    networkToLink: function () {
        if (HuffPrefs.get('facebook') === false) {
            if ($('sidebar_service_connect')) {
                    $('sidebar_service_connect').innerHTML = "<div style=\"text-align:center\"><a href=\"/social/join.html?autojoin=1\" onclick=\"HPFB.login(QuickLogin.FacebookLoginCallback);return false;\" target=\"_blank\"><img border=\"0\" src=\"" + _("/images/fb-large.gif") + "\" alt=\"" + _("Connect with Facebook") + "\" style=\"padding: 16px;\"/></a></div>";
                }
            }
        else if (HuffPrefs.get('twitter') === false) {
            if ($('sidebar_service_connect')) {
				$('sidebar_service_connect').innerHTML = "<div style=\"text-align:center\"><a href=\"javascript:void(0);\" onclick=\"linkSocialAccount.checkLoginStatus('twitter'); return false;\" target=\"_blank\"><img border=\"0\" src=\"" + _("/images/Sign-in-with-Twitter-darker.png") + "\" alt=\"" + _("Connect with Twitter") + "\" style=\"padding: 16px;\"/></a></div>";
                }
            }
            else
                if($('sidebar_service_connect')) $('sidebar_service_connect').style.display = "none";
            return;
        },


    hideHpModules: function () {
        if (this.hide_hp_module) //hide frontpage module when true 
            HuffPoUtil.hide('all_frontpage_widgets');
        return;
    },

    showHpModules: function () {
        HuffPoUtil.show('all_frontpage_widgets');
    },

    refreshPagination: function (page, type) {
        if ($('snp_' + type + '_page_counter')) {
            $('snp_' + type + '_page_counter').innerHTML = page + 1;
        }

        this.arr_current_page[type] = page;
    },

    get_url_to_call: function (page, type) {
            var get_data = '';
        if ('' != HuffPoUtil.trim(this.current_notSNN_vertical) || false == HuffPoUtil.GetEntryID(location.href))
                get_data = '&is_frontpage=1';

        switch (type) {
            case 'friends':
                return '/users/social_news_project/snp_module_page.php?page=' + page + '&page_ids=' + this.arr_pages[type][page] + '&user_id=' + this.url_user_id;
                break;
            case 'mp':
				return '/users/social_news_project/snp_module_page.php?type=mp&page=' + page + '&page_ids=' + this.arr_pages[type][page] + '&user_id=' + this.url_user_id;
				break;
            case 'act':
                return '/users/social_news_project/snp_module_page.php?type=act&page='+page+'&user_id='+this.url_user_id;
                break;
            case 'comment':
                return '/users/social_news_project/snp_module_page.php?type=comment&page=' + page + '&page_ids=' + this.arr_pages[type][page] + '&user_id=' + this.url_user_id;
                break;
            case 'mpr':
                return '/widget/frontpage/frontpage_widgets_update.php?type=mpr&page=' + page + '&entry_ids=' + this.arr_pages[type][page] + '&status=snp' + get_data;
                break;
                /* entry inside */
            case 'entry_inside_comment':
                return '/users/social_news_project/snp_module_page.php?type=entry_inside_comment&page=' + page + '&page_ids=' + this.arr_pages[type][page] + '&user_id=' + this.url_user_id;
                break;
                /* not signed users */
            case 'mp_bn':
                return '/widget/big_news_mp_update.php?type=mp&page=' + page + '&entry_ids=' + this.arr_pages[type][page] + get_data;
                break;
            case 'not_signed_mp':
                return '/widget/frontpage/frontpage_widgets_update.php?type=mp&page=' + page + '&entry_ids=' + this.arr_pages[type][page] + get_data;
                break;
            case 'not_signed_dm':
                return '/widget/frontpage/frontpage_widgets_update.php?type=dm&page=' + page + '&entry_ids=' + this.arr_pages[type][page] + get_data;
                break;
            case 'not_signed_mpr':
                return '/widget/frontpage/frontpage_widgets_update.php?type=mpr&page=' + page + '&entry_ids=' + this.arr_pages[type][page] + get_data;
                break;
            case 'twitter_friends':
                	return '/users/social_news_project/twitter/snn_twitter_page.php?page=' + page + "&type=" + this.twitter_timeline_type ;
                break;
				/* hot on comments */
            case 'not_signed_mbc':
					var notSNN_mbc_shifted_ids = '';
                if ($('snp_not_signed_mbc_shifted_ids')) {
						notSNN_mbc_shifted_ids = '&mbc_shifted_ids=' + $('snp_not_signed_mbc_shifted_ids').innerHTML;
					}
                return '/ajax/common/hot_on.php?type=mbc&page=' + page + notSNN_mbc_shifted_ids +
                			(this.current_notSNN_vertical != '' ? '&v='+this.current_notSNN_vertical : '');
				break;
				/* hot on facebook */
            case 'not_signed_mbf':
					var notSNN_mbf_shifted_ids = '';
                if ($('snp_not_signed_mbf_shifted_ids')) {
						notSNN_mbf_shifted_ids = '&mbf_shifted_ids=' + $('snp_not_signed_mbf_shifted_ids').innerHTML;
					}
                return '/ajax/common/hot_on.php?type=mbf&page=' + page + notSNN_mbf_shifted_ids +
                			(this.current_notSNN_vertical != '' ? '&v='+this.current_notSNN_vertical : '');
				break;
				/* hot on twitter */
            case 'not_signed_mbt':
                return '/ajax/common/hot_on.php?type=mbt&page=' + page;
				break;
			case 'mp_hp':
				return '/widget/frontpage/frontpage_widgets_update.php?status=snp&type=mp_hp&page=' + page + '&entry_ids=' + this.arr_pages[type][page] + get_data;
                break;
            }
        },

        get_current_page:function(page, type){
        if (page == this.arr_current_page[type]) return false;
        return this.arr_current_page[type];
    },

    get_max_page: function (type) {
        return this.arr_max_page[type];
    },

    setPage: function (page, type) {
			
            var current_page = this.get_current_page(page, type);
            if(current_page===false){
            	return false;
            }
            if (this.isLocked(type)) return false;

        this.animatePage(0, 'snp_' + type + '_module_all_pages_here');
            //show selected if it exists
        if ($('snp_' + type + '_page_' + page)) {
                //hide current page
            HuffPoUtil.hide('snp_' + type + '_page_' + current_page);

                //show new page
            HuffPoUtil.show('snp_' + type + '_page_' + page);

                //refresh arrows
                this.refreshPagination(page, type);
            this.animatePage(1, 'snp_' + type + '_module_all_pages_here');

            if ($('snp_' + type + '_page_' + page))
                huff.emit('content/update', '#snp_' + type + '_page_' + page);
        } else {
                this.setLock(type);

                var url_to_call = this.get_url_to_call(page,type);
				
                if(typeof (url_to_call)!="string"){
                	return url_to_call;
                }

            if (SNPModule.skin) {
                    url_to_call += '&skin=' + SNPModule.skin;
                }
                //loads
            if (null != $("snp_twitter_friends_left_arrow")) {
                    $("snp_twitter_friends_left_arrow").style.visibility = "hidden";
                }
            if (null != $("snp_twitter_friends_act_right_arrow")) {
                    $("snp_twitter_friends_act_right_arrow").style.visibility = "hidden";
                }

            var content_container = $('snp_' + type + '_module_all_pages_here').parentNode;
                YAHOO.util.Dom.addClass(content_container,"mp-ajax-notify");
                C.asyncRequest('GET', url_to_call, {
                success: function (o) {
                	YAHOO.util.Dom.removeClass(content_container,"mp-ajax-notify");
                    if (o.responseText != '') {
                            //hide current page
                        HuffPoUtil.hide('snp_' + type + '_page_' + current_page);
                            //write new html
                        $('snp_' + type + '_module_all_pages_here').innerHTML += o.responseText;

                        SNPModule.animatePage(1, 'snp_' + type + '_module_all_pages_here');

                            //refresh arrows
                            SNPModule.refreshPagination(page, type);
                            SNPModule.releaseLock(type);
                        if (null != $("snp_twitter_friends_left_arrow")) {
                                $("snp_twitter_friends_act_right_arrow").style.visibility = "visible";
                            }
                        if (null != $("snp_twitter_friends_act_right_arrow")) {
                                $("snp_twitter_friends_left_arrow").style.visibility = "visible";
                            }

                        if ($('snp_' + type + '_page_' + page))
                            huff.emit('content/update', '#snp_' + type + '_page_' + page);

                    } else {
                            HPError.e();
                        SNPModule.animatePage(1, 'snp_' + type + '_module_all_pages_here');
                            SNPModule.releaseLock(type);
                        }
                    },
                failure: function (o) {
                    	YAHOO.util.Dom.removeClass(content_container,"mp-ajax-notify");
                        //HPError.e();
                    if (SNPModule.mpTimeout) {
                            clearTimeout(SNPModule.mpTimeout);
                        }
                    SNPModule.animatePage(1, 'snp_' + type + '_module_all_pages_here');
                        SNPModule.releaseLock(type);
                    },
                    timeout: 5000
                });

                setTimeout('SNPModule.checkTwitterPage()', 5000);
            }

            return true;
        },

    checkTwitterPage: function () {
        if ($("snp_twitter_friends_left_arrow") && $("snp_twitter_friends_left_arrow").style.visibility == "hidden") {
                    $("snp_twitter_friends_left_arrow").style.visibility = "visible";
            }
        if ($("snp_twitter_friends_act_right_arrow") && $("snp_twitter_friends_act_right_arrow").style.visibility == "hidden") {
                $("snp_twitter_friends_act_right_arrow").style.visibility = "visible";
            }
            return;
        },

    animatePage: function (enable, id, callback, set_time) {
            if(id == "snp_twitter_friends_module_all_pages_here" && HPBrowser.isIEOld())
            {
                return;
        } else {
            if (this.animation) {
                    this.animation.stop(true);
                }
                var direction = {from: 0, to: 1};
                var time = 0.5;

            if (!enable) {
                    direction = {from: 1, to: 0};
                    time = 0.9;
                }

            if ("undefined" != set_time) {
                    time = set_time;
                }

                this.animation = new Y.util.Anim($(id), {opacity: direction}, time, Y.util.Easing.easeOut);

            if (typeof (callback) == 'function') {
                    this.animation.onComplete.subscribe(callback);
                }
                this.animation.animate();
            }

        },

    setLock: function (type) {
        this.arr_lock_status[type] = 1;
        },

    releaseLock: function (type) {
        this.arr_lock_status[type] = 0;
        },

    isLocked: function (type) {
        if ('undefined' == typeof (this.arr_lock_status[type])) {

            return false;
        } else if (this.arr_lock_status[type]) {
            return true;
        } else {
            return false;
            }
    },

    getModuleType: function (type) {

        for (var j = 0; j < this.arr_non_snn_modules.length; j++) {
            if (this.arr_non_snn_modules[j] == type) return "non_snn";
        }

        for (var i = 0; i < this.arr_snn_modules.length; i++) {
            if (this.arr_snn_modules[i] == type) return "snn";
        }

        return '';
        },


    nextPage: function (type, vertical) {
        if ("undefined" != typeof (vertical))
            this.current_notSNN_vertical = vertical;

        var mod_type = this.getModuleType(type);

        if ("snn" == mod_type) {
            this.init();
        } else if ("non_snn" == mod_type) {
            this.not_snn_init();
        }

        var next_index = this.arr_current_page[type] + 1;
        if (next_index > this.arr_max_page[type]) {
            if ("snn" == mod_type) {
                next_index = this.arr_max_page[type];
            } else {
                next_index = 0;
            }
        }
        this.setPage(next_index, type);
    },

    prevPage: function (type, vertical) {
        if ("undefined" != typeof (vertical))
            this.current_notSNN_vertical = vertical;

        var mod_type = this.getModuleType(type);

        if ("snn" == mod_type) {
            this.init();
        } else if ("non_snn" == mod_type) {
            this.not_snn_init();
        }


        var prev_index = this.arr_current_page[type] - 1;
        if (prev_index < 0) {
            if ("snn" == mod_type) {
                prev_index = 0;
            } else {
                prev_index = this.arr_max_page[type];
            }
        }
        this.setPage(prev_index, type);
    },

    /*************************************************************************
    * Not SNN Section
    */
    /*
    * Auto click for Most Popular
    */
    initAutoClickMpPage: function () {
        this.nextNotSnnMpPage();
        this.mpTimeout = setTimeout("SNPModule.initAutoClickMpPage()", this.ms);
    },

    /*
    * Most popular
    */
    nextNotSnnMpPage: function (vertical, user_click) {
        this.nextPage('not_signed_mp', vertical);
    },

    prevNotSnnMpPage: function (vertical, user_click) {
        this.prevPage('not_signed_mp', vertical);
    },
    /*
    * Auto click for Most Popular
    */
    initAutoClickMBCPage: function () {
        this.nextNotSnnMBCommentsPage();
        this.mpTimeout = setTimeout("SNPModule.initAutoClickMBCPage()", this.ms);
    },
    /*
    * Most by Comments
    */
    nextNotSnnMBCommentsPage: function (vertical, user_click) {
        this.nextPage('not_signed_mbc', vertical);
    },

    prevNotSnnMBCommentsPage: function (vertical, user_click) {
        this.prevPage('not_signed_mbc', vertical);
    },
    /*
    * Auto click for Most By Facebook
    */
    initAutoClickMBFPage: function () {
        this.nextNotSnnMBFacebookPage();
        this.mpTimeout = setTimeout("SNPModule.initAutoClickMBFPage()", this.ms);
    },
    /*
    * Most by Facebook
    */
    nextNotSnnMBFacebookPage: function (vertical, user_click) {
        this.nextPage('not_signed_mbf', vertical);
    },

    prevNotSnnMBFacebookPage: function (vertical, user_click) {
        this.prevPage('not_signed_mbf', vertical);
    },
    /*
    * Auto click for Most By Twitter
    */
    initAutoClickMBTPage: function () {
        this.nextNotSnnMBTwitterPage();
        this.mpTimeout = setTimeout("SNPModule.initAutoClickMBTPage()", this.ms);
    },
    /*
    * Most by Twitter
    */
    nextNotSnnMBTwitterPage: function (vertical, user_click) {
        this.nextPage('not_signed_mbt', vertical);
    },

    prevNotSnnMBTwitterPage: function (vertical, user_click) {
        this.prevPage('not_signed_mbt', vertical);
    },

    /*
    * Most reporters
    */
    nextNotSnnMpReportersPage: function (vertical) {
        this.nextPage('not_signed_mpr', vertical);
    },

    prevNotSnnMpReportersPage: function (vertical) {
        this.prevPage('not_signed_mpr', vertical);
    },
    /*
    * Don't miss
    */
    nextNotSnnDontMissPage: function () {
        this.nextPage('not_signed_dm');
    },

    prevNotSnnDontMissPage: function () {
        this.prevPage('not_signed_dm');
    },

    /* END OF NON SNN */

    nextFriendsPage: function () {
        this.nextPage('friends');
    },

    prevFriendsPage: function () {
        this.prevPage('friends');
    },

    nextMpPage: function () {
        this.nextPage('mp');
    },

    prevMpPage: function () {
        this.prevPage('mp');
    },

    nextMpReportersPage: function () {
        this.nextPage('mpr');
    },

    prevMpReportersPage: function () {
        this.prevPage('mpr');
    },
    /*
    * Most Popular in Big News
    */
    nextMpBNPage: function () {
        this.nextPage('mp_bn');
    },

    prevMpBNPage: function () {
        this.prevPage('mp_bn');
    },
    /*
    * Most Popular in Social News
    */
    nextMpHPPage: function () {
        this.nextPage('mp_hp');
    },

    prevMpHPPage: function () {
        this.prevPage('mp_hp');
    },

    /*
    * Most by Comments in Social News
    */
    nextMBCPage: function () {
        this.nextPage('mbc');
    },

    prevMBCPage: function () {
        this.prevPage('mbc');
    },
    /*
    * Most on Facebook in Social News
    */
    nextMBFPage: function () {
        this.nextPage('mbf');
    },

    prevMBFPage: function () {
        this.prevPage('mbf');
    },
    /*
    * Most on Twitter in Social News
    */
    nextMBTPage: function () {
        this.nextPage('mbt');
    },

    prevMBTPage: function () {
        this.prevPage('mbt');
    },

    nextDMPage: function () {
        this.nextPage('dm_hp');
    },

    prevDMPage: function () {
        this.prevPage('dm_hp');
    },


    nextActPage: function () {
        this.nextPage('act');
    },

    prevActPage: function () {
        this.prevPage('act');
    },

    nextCommentPage: function () {
        this.nextPage('comment');
    },

    prevCommentPage: function () {
        this.prevPage('comment');
    },

    /*
    * New Follower in Social News
    */
    nextFollowerPage: function () {
        this.nextPage('follower');
    },

    prevFollowerPage: function () {
        this.prevPage('follower');
    },

    removeCurrentFollower: function () {
        if (this.arr_max_page['follower'] == 0) {
            // just 1 follower - hide module
            HuffPoUtil.hide('snp_follower');
        } else {
            // remove current page after switching to other
            var page = $('snp_follower_page_' + this.arr_current_page['follower']);
            if (this.arr_max_page['follower'] != this.arr_current_page['follower']) {
                SNPModule.nextFollowerPage();
                this.arr_current_page['follower']--;
            } else SNPModule.prevFollowerPage();
            this.arr_max_page['follower']--;

            var parent = page.parentNode;
            parent.removeChild(page);

            // change pages id's
            for (var i = 0, j = 0; i < parent.childNodes.length; i++) if (parent.childNodes[i].nodeName == 'DIV')
                parent.childNodes[i].id = 'snp_follower_page_' + j++;

            if (this.arr_max_page['follower'] == 0) {
                // if just 1 page remaining - remove pagination,
                HuffPoUtil.hide('snp_follower_pagination');
            } else {
                // change page counter
                $('snp_follower_max_page_counter').innerHTML = this.arr_max_page['follower'] + 1;
                $('snp_follower_page_counter').innerHTML = this.arr_current_page['follower'] + 1;
            }
        }
    },

    acceptFollower: function (e, userid) {
        SocialFriends.acceptFollower(userid, function () {
            // on success
            SNPModule.removeCurrentFollower();
        }, function () {
            // on error

        });
    },

    declineFollower: function (e, userid) {
        SocialFriends.declineFollower(userid, function () {
            // on success
            SNPModule.removeCurrentFollower();
        }, function () {
            // on error

        });
    },


    nextTwitterPage: function () {
        this.nextPage('twitter_friends');
    },

    prevTwitterPage: function () {
        this.prevPage('twitter_friends');
    },

    nextInfluencersPage: function () {
        this.nextPage('twitter_influencers');
    },

    prevInfluencersPage: function () {
        this.prevPage('twitter_influencers');
    },

    removeRecentActivity: function (id, is_first) {
            this.init();
            var o_id = 'snp_recent_activity_' + id;
        var get_url = '/users/social_news_project/snp_module_action.php?action=delete&id=' + id + '&user_id=' + this.url_user_id + '&page=' + this.arr_current_page['act'];
        if (is_first) {
                o_id = 'snp_current_reading_entry';
                get_url += '&type=entry';
                //send track request to not write this entry
                SNProject.track(id, 'delete_entry_view');
            }

            SNPModule.animatePage(0, o_id);

            //send remove request
            C.asyncRequest('GET', get_url, {
            success: function (o) {
                if (o.responseText != '') {
                    if (SNPModule.animation) {
                                SNPModule.animation.stop();
                            }
                            var obj = $(o_id);
                            var p = obj.parentNode;
                            p.removeChild(obj);

                    if (o.responseText != 'ok') {
                                p.innerHTML += o.responseText;
                                SNPModule.animatePage(1, p.lastChild.id);

                                //clear all cached next pages
                        for (var i = SNPModule.arr_current_page['act'] + 1; i <= SNPModule.arr_max_page['act']; i++) {
                                    var tmp = '';
                            if (tmp = $('snp_act_page_' + i)) {
                                        var parent = tmp.parentNode;
                                        parent.removeChild(tmp);
                                    }
                                }
                            }
                    else {
                                //we're in the last 3 records
                                var last_child = Dom.getLastChild(p);
                        if (!last_child || last_child.id == 'snp_current_reading_entry') {
                                    p.innerHTML = 'You have no recorded activities';
                                }
                            }
                        }
                else {
                            HPError.e();
                            SNPModule.animatePage(1, o_id);
                        }
                    },
            failure: function (o) {
                        HPError.e();
                        SNPModule.animatePage(1, o_id);
                    },
                    timeout: 5000
                });
        },

	show_user_level_box: function() {
		// sometimes, with Moto design we need to use more taller box
		var height = 173;
		/*
		if ($("snp_friends_module").className == "moto") {
			height = 180;
		}
		*/
		var animation = new Y.util.Anim($("snn_module_user_badge"), {height: { to: height }}, 1, Y.util.Easing.easeOut);
		animation.animate();
	},

	hide_user_level_box: function(my_level) {
		var animation = new Y.util.Anim($("snn_module_user_badge"), {height: { to: 0 }}, 1, Y.util.Easing.bounceOut);
		HuffCookies.setCookie("level_knowledge", my_level);
		animation.animate();
	},

        /* lightbox methods */
    // region
        lightbox: {

            isFormLoaded: false,
            zone_info: '',

            init:function() {
                //get from global variable
                if (typeof(zone_info) != "undefined")
                    this.zone_info = zone_info;
                else if (typeof(QV) != "undefined" && typeof(QV.ad_zone) != "undefined")
                    this.zone_info = QV.ad_zone;
                else
                    this.zone_info = 'huffpost.general/general';
            },

            show: function(ltype, entry_id, entity_id, friend_user_id, identification) {
            if (!this.isFormLoaded) {
                    var me = this;
                    //default for 'entry_details' type
                    var url = '/users/social_news_project/snp_module_lightbox.php?type=entry_details&entry_id='+entry_id + '&user_id=' + SNPModule.url_user_id;
                switch (ltype) {
                        case 'comment_details':
                            url = '/users/social_news_project/snp_module_lightbox.php?type=comment_details&entry_id='+entry_id + '&user_id=' + SNPModule.url_user_id + '&comment_id=' + entity_id;
                        break;

                        case 'vote_details':
                            url = '/users/social_news_project/snp_module_lightbox.php?type=vote_details&entry_id='+entry_id + '&user_id=' + SNPModule.url_user_id + '&friend_user_id=' + friend_user_id + '&slideshow_id=' + entity_id;
                        break;

                        case 'poll_vote_details':
                            url = '/users/social_news_project/snp_module_lightbox.php?type=poll_vote_details&entry_id='+entry_id + '&user_id=' + SNPModule.url_user_id + '&friend_user_id=' + friend_user_id + '&user_answer_id=' + entity_id;
                        break;

                        case 'comment_activity_details':
                            url = '/users/social_news_project/snp_module_lightbox.php?type=comment_activity_details&entry_id='+entry_id + '&user_id=' + SNPModule.url_user_id + '&parent_id=' + entity_id + '&reply_user_id=' + friend_user_id + '&comment_id=' + identification ;
                        break;

                        case 'contribute_details':
                            url = '/users/social_news_project/snp_module_lightbox.php?type=contribute_details&entry_id='+entry_id + '&user_id=' + SNPModule.url_user_id + '&contribute_id=' + entity_id + '&friend_user_id=' + friend_user_id;
                        break;

                    }
                    HuffConnect.showLoader();
                    YAHOO.util.Connect.asyncRequest(
                        'GET',
                        url, {
                            success: function(o) {
                                me.onLoadSuccess(o);
                            },
                            failure: function(o) {
                                me.onLoadFail(o);
                            }
                        }
                    );
                }
            },

            onLoadSuccess: function(o) {
				HuffConnect.hideModal();
				HuffConnect.socialModal({
					inner_html: o.responseText,
                    onclose: this.close
				});
                this.isFormLoaded = true;
				if(jQuery('#snn_qr_ad').length)
				{
					if (HuffPoUtil.trim(jQuery('#snn_qr_ad').html()) == "")
					{
						$('snn_qr_ad').innerHTML = '<div class="visible_frame"><iframe src="http://ad.doubleclick.net/adi/' + this.zone_info + ';ptile=4;sz=300x250;ord=' + HuffPoUtil.WEDGJE.ord() + '?" width="300" height="250" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" name="social_news_300x250" id="social_news_300x250"></iframe></div>';
					} else {
						$('snn_qr_ad').style.display = "block";
					}
				}
            },

            onLoadFail: function(o) {
                HPError.e();
				HuffConnect.hideModal();
            },

            close: function() {
                SNPModule.lightbox.isFormLoaded = false;
            }

    }, /* end of lightbox object */
    // endregion

    /* stealth */

        stealth:  {

            current_status:'',
            hidden: false,

            init: function() {

            if (jQuery('#snp_friends_module .stealth-mode')) {
                    jQuery('#snp_friends_module .stealth-mode .switcher').click(function() { SNPModule.stealth.update(); });
                if (HuffPrefs.get('read_tracking') === true) {
                        this.disableStealthMode();
                    }
                else {
                        this.enableStealthMode();
                    }
                }

            },

            update: function() {

                var url = '';

            switch (this.current_status) {
                    case 'on':
                        url = '/users/social_news_project/snp_module_action.php?action=change_stealth&user_id=' + SNPModule.url_user_id + '&value=' + 1;
                    break;

                    // off
                    default:
                        url = '/users/social_news_project/snp_module_action.php?action=change_stealth&user_id=' + SNPModule.url_user_id + '&value=' + 0;
                    break;
                }

                var me = this;

                YAHOO.util.Connect.asyncRequest(
                    'GET',
                    url, {
                        success: function(o) {
                            me.onSuccess(o);
                        },
                        failure: function(o) {
                            me.onFail(o);
                        }
                    }
                );

            },

			onSuccess: function(o) {

            if ('ok' == o.responseText) {
                	if(SNPModule.skin)

                    	SNPModule.skinned_module_stealth.onUpdated();

                if ('on' == SNPModule.stealth.current_status) {
                                        this.disableStealthMode();
			        }
			        else // off
			        {
                                        this.enableStealthMode();
			        }
			}
            else {
			   HPError.e();
			}

			},

			onFail: function(o) {

			    //SNPModule.animatePage(1, $('stealth_mode'));

			},

			close: function() {

			    HuffPoUtil.hide('snp_stealth_bubble');
			    this.hidden = true;
			},

            disableStealthMode: function() {
                jQuery('#snp_friends_module .stealth-mode .on').removeClass('active');
                jQuery('#snp_friends_module .stealth-mode .off').addClass('active');
                SNPModule.stealth.current_status = 'off';
            },

            enableStealthMode: function() {
                jQuery('#snp_friends_module .stealth-mode .off').removeClass('active');
                jQuery('#snp_friends_module .stealth-mode .on').addClass('active');
                SNPModule.stealth.current_status = 'on';
            }
    }, /* end of stealth */

    /* entryInside */

    entryInside:  {

        loading: function(responseText) {

            if ($('huffpost_snn_entry_inside')) {
                var removed = $('huffpost_snn_entry_inside').parentNode.removeChild($('huffpost_snn_entry_inside'));
            }

            var div = document.createElement('div');

            div.setAttribute('id','huffpost_snn_entry_inside');
            div.innerHTML = '<br/>' + responseText + '<br/>';
            if (HPConfig.wide_format) {
                if (2 == HPConfig.blog_id) {
			var news_content = Dom.get('news_content');
			var news_content_first_child = Dom.getFirstChild(news_content);

			if (HPConfig.entry_expanded > 0){
				var element = Dom.getElementsByClassName('link_entries', 'DIV', news_content_first_child)[0];
				if (element) news_content_first_child.insertBefore(div, element.nextSibling);
				else news_content.insertBefore(div, news_content_first_child);
			} else {
				news_content.insertBefore(div, news_content_first_child);
			}
                } else if (3 == HPConfig.blog_id) {
                    Dom.get('blog_content').insertBefore(div, Dom.get('blog_content').firstChild);
                }
            } else if ($('entry_12345')) { // for news
                $('entry_12345').appendChild(div);

            } else if ($('entry_body')) { // for blog posts
                var added = $('entry_body').appendChild(div);
            }

            var tabView = new YAHOO.widget.TabView('snn_entry_inside');
            this.init();

        },

        init: function() {
            SNPModule.init_module('entry_inside_comment');

            if (SNPModule.arr_max_page['entry_inside_comment'] > 9) {
                $('entry_inside_all_pages').style.width = "140px";
            }

        },

        next: function() {

            this.set_page(SNPModule.arr_current_page['entry_inside_comment'] + 1);
        },

        prev: function() {

            this.set_page(SNPModule.arr_current_page['entry_inside_comment'] - 1);

        },

        set_page: function(page) {
            if (SNPModule.isLocked('entry_inside_comment')) return false;
            if (page == SNPModule.arr_current_page['entry_inside_comment']) {
                return false;
            } else if (page < 0) { // loop is disabled
                return false;
            } else if (page > SNPModule.arr_max_page['entry_inside_comment']) {  // loop is disabled
                return false;
            }

            $("count_comment_" + SNPModule.arr_current_page['entry_inside_comment']).className = "";
            $("count_comment_" + page).className = "entry_inside_current_page";

            SNPModule.setPage(page, 'entry_inside_comment');

            if ("none" == $('count_comment_' + page).style.display) {
                HuffPoUtil.hide('count_comment_' + (page + 9));
                $('count_comment_' + page).style.display = "inline-block";
            }

            if (page > 8) {
                HuffPoUtil.hide('count_comment_' + (page - 9));
                $('count_comment_' + page).style.display = "inline-block";
            }
        }

    }, /* end of entryInside */


    /* snnTwitterStatus */
    snnTwitterStatus: function(params){
        var url_to_short = (params && params.url_to_short) || false;

        var status = $('tweet_status').value;
        status = status.replace( /^\s+/g, "" );
        status = status.replace( /\s+$/g, "" );
        if (status.length <= 140 && status != '') {
            status = encodeURIComponent(status);
            var get_data = "?tweet=" + status + "&eid=" + HuffPoUtil.GetEntryID();
            if (url_to_short) {
                get_data += "&url_to_short=" + encodeURIComponent(url_to_short);
            }
            $('snn_resp_tweet').innerHTML = "<div style=\"text-align:center\"><img src=\"/images/ajax-loader.gif\" /></div>";
            C.asyncRequest('GET', '/users/social_news_project/twitter/post_to_twitter.php' + get_data, {
                success: function(o){
					var response_obj = eval( " ( " + o.responseText + " ) " );
                    if (response_obj && response_obj.response_code == "200") {
                        $('snn_resp_tweet').innerHTML = _("Twitter status set!");
                        HuffPoUtil.flash($('snn_resp_tweet'));
                        $('tweet_status').value = "";
                        SNPModule.textCounter();
                    }
                    else {
                        $('snn_resp_tweet').innerHTML = _("Unable to process!");
                        HuffPoUtil.hide('hidden_snp_body');
                    }
                },
                failure: function(o) {
                    if ($('hidden_snp_body')) {
                        HuffPoUtil.hide('hidden_snp_body');
                        HPError.e();
                    }
                },
                timeout: 20000
            });
        }
        else if (status.length > 140) {
            $('snn_resp_tweet').innerHTML = _("Tweet limit exceeded!");
            $('tweet_status').focus();
        }
        else {
            $('snn_resp_tweet').innerHTML = _("Please enter some text!");
            $('tweet_status').focus();
        }
        if($('snn_resp_tweet'))
            setTimeout("$('snn_resp_tweet').innerHTML='';", 5000);

        return false;
    }, /* end of snnTwitterStatus */

    twitterModule: function (callback) {
        // user-facing error message
        // if available, an error code will also be returned, and will log to console if HPError.setDebug(true) is set
        this.error_msg = _("Sorry, we had some trouble getting your Tweets. Please check back soon!");

        var entry = HuffPoUtil.GetEntryID();
        this.twitter_timeline_type  = 'home';
        var mod_el = $(this.tweetout_module_div);
        if (mod_el) {
            mod_el.style.display = "block";
            mod_el.innerHTML = '<div style="text-align:center; padding:20px 0;"><div class="snn_twitter_loading">' + _("Loading Twitter module...") + '</div><div class="snn_twitter_loading_img"><img width="32" height="32" src="http://s.huffpost.com/images/loader.gif" alt="" /></div></div>';
            var callback = {
            argument:[callback],
            success: function(o) {
                    var callback = o.argument[0];
                    SNPModule.TwitterCallbacks(o, callback);
                },
               failure: function(o) {
                    if ($('hidden_snp_body')) {
                        HuffPoUtil.hide('hidden_snp_body');
                        HPError.e();
                    }
                }
            };
            var fb_session = HPFB.getSessionForServer();
            var url = '/users/social_news_project/twitter/show_twitter_module.php?' + (entry ? 'entry_id=' + entry : '') + '&' + fb_session;
            if ( SNPModule.skin )
                url += ((/\?/.test(url)) ? '&' : '?') + 'skin=' + SNPModule.skin;
            var co = YAHOO.util.Connect.asyncRequest('GET', url, callback);
        }
    },

    TwitterCallbacks: function (o, callback) {
        var callback_type = typeof(callback);
        var response = o.responseText;
        var error_msg = SNPModule.twitterModule.error_msg;

        if (response != "") {
            var js_resp = JSON.parse(response);
            var resp = js_resp.html;
            var resp_code = js_resp.response_code;
            var mod_el = $(this.tweetout_module_div);

            if (resp && resp_code == 200) {
                if (mod_el) {
                    mod_el.innerHTML = resp;

                    //Hiding twitter related elements
                    if($('top_twitter_info'))
                        Dom.setStyle($('top_twitter_info'), 'display', 'none');
                    if($('service_bottom_bar') && SNProject.service_bar=='twitter')
                        Dom.setStyle($('service_bottom_bar'), 'display', 'none');

                    //Call callback function if specified
                    if(callback_type == 'function')
                        callback();

                    //Init module paging vars
                    SNPModule.init_module('twitter_friends');

                    //Flashing module when loads and adding textarea events 
                    HuffPoUtil.yellowFlash(this.tweetout_module_div);
                    E.on($('tweet_status'), 'keyup', HPUtil.enforceTextAreaLimit, {chars: 140});
                    E.on($('tweet_status'), 'change', HPUtil.enforceTextAreaLimit, {chars: 140});

                    //Check twitter linked status when the module loads and call networkToLink() if not linked
                    if ($('twitter_linked_status')) {
                        if (parseInt($('twitter_linked_status').innerHTML) == 0) {
                            mod_el.innerHTML = "";
                            Dom.setStyle(mod_el, 'display', 'none');
                            SNPModule.networkToLink();
                            HuffCookies.setCookie('twitter_linked', '0');
                        }
                    }

                    //Reseting other module vars
                    SNPModule.resetTwitterModuleValues();

					//rebalance columns on front pages now that twitter module has rendered right column longer
					huff.emit('content/update');

                    //Call check for new tweets 
                    if($('max_tweet_id'))
                        SNPModule.max_tweet_id = parseInt($('max_tweet_id').innerHTML);

                    if (SNPModule.check_new_tweets_flag)
					{
						if(SNPModule.interval_id) {
							clearInterval(SNPModule.interval_id);
							SNPModule.interval_id = false;
						}
						SNPModule.interval_id = setInterval(function(){SNPModule.checkNewTweets();}, SNPModule.check_tweets_rate);
					}

                    SNPModule.new_tweets_found = false;

                    if (SNPModule.skin) {
                        SNPModule.show_skinned_twitter_module();
                    }

                    //Processing comm hash tag
                    if (HPAds.tweet_comm_info && $('tweet_status')) {
                        $('tweet_status').value += ' ' + HPAds.tweet_comm_info.hash;
                        $('snn_twitter_comm_text').innerHTML = HPAds.tweet_comm_info.text;
                        $('snn_twitter_comm_text_cb').checked = true;
                        Dom.removeClass('snn_twitter_comm_text_wrapper', 'hidden');
                        E.on('snn_twitter_comm_text_cb', 'click', function(){
                            if ($('snn_twitter_comm_text_cb').checked) {
                                if(!$('tweet_status').value.match(HPAds.tweet_comm_info.hash)) $('tweet_status').value += ' ' + HPAds.tweet_comm_info.hash;
                            }
                            else {
                                $('tweet_status').value = $('tweet_status').value.replace(' ' + HPAds.tweet_comm_info.hash, '');
                            }
                            SNPModule.textCounter();
                        });
                    }
                }
            }
            else {
                mod_el.innerHTML = "<div class='module_error_response' style='text-align:center; padding:5px 0; color:#444;'><div class='error_message'>" + _("Unable to load the Twitter module") +"</div></div>";
                HPError.e({msg:error_msg,obj:response});
            }
        }
        else {
			HPError.e(error_msg);
        }
    },

    /*------------ Check new tweets for module function ----------------*/

    check_new_tweets_flag: true,
    max_tweet_id: 0,
    check_tweets_rate: 300000,
    new_tweets_found: false,
    new_tweet_call_status: false,
    times: 1,
	interval_id: false,

    checkNewTweets: function()
	{
        if (HPConfig && HPConfig.no_twitter_refresh) {
            return false;
        }

        if (this.max_tweet_id && !this.new_tweet_call_status)
		{
            var url = "/users/social_news_project/twitter/check_new_tweets.php";
            url += "?since_id=" + this.max_tweet_id + "&type=" + this.twitter_timeline_type;
            var cObj = C.asyncRequest('GET', url, {
                success: function (o)
				{
					var resp = JSON.parse(o.responseText);
                    var new_tweets = parseInt(resp.total_new_tweets);
                    var check_tweets = resp.check_new_tweets;
					
					//no more calls if tweets found exceeds 20
					if (new_tweets >= 20) {
						check_tweets = 0;
					}
					
					//If check_tweets is 0 we'll clear the interval and avoid any further calls to the twitter api
					if(check_tweets == 0)
					{
						clearInterval(SNPModule.interval_id);
						if (window.HPConfig) {
							window.HPConfig.no_twitter_refresh = true;
						}
					}

					if (new_tweets && SNPModule.max_tweet_id)
					{
                        SNPModule.new_tweets_found = true;
                        if ($("more_friend_tweets"))
						{
                            if (SNPModule.twitter_timeline_type == 'home')
							{
                                var ttext = _("New tweets!");
                                if (new_tweets == 1) {
                                    ttext = _("New tweet!");
                                }
                            }
                            else if (SNPModule.twitter_timeline_type == 'mentions')
							{
                                var ttext = _("New mentions!");
                                if (new_tweets == 1) {
                                    ttext = _("New mention!");
                                }
                            }
                            $('more_friend_tweets').innerHTML = "<a style=\"color:#222;\" href=\"javascript:void(0);\" onclick=\"SNPModule.twitterTimeline('" + SNPModule.twitter_timeline_type + "')\"><div class=\"some_new_tweets\">" + new_tweets + " " + ttext + "</div></a>";
                        }
                    }
                    SNPModule.new_tweet_call_status = false;
                },
                failure: function (o) {
                    if ($('hidden_snp_body')) {
                        HuffPoUtil.hide('hidden_snp_body');
                        HPError.e();
                        SNPModule.new_tweet_call_status = false;
                    }
                },
                timeout: 10000
            });

            this.new_tweet_call_status = true;
		}
        return false;
    },
    /*---------------------------------------------------------*/

    textCounter: function(input, countField){
        var maxlimit = 140;
        var field = input || $('tweet_status');
        countField = countField || $('tweet_char_limit');
        if (field) {
            if (field.value.length > maxlimit) {
                countField.innerHTML = 0;
                new YAHOO.util.ColorAnim(field, {backgroundColor: { from: '#26CFCC', to: '#FFFFFF' } });
            }
            else
                countField.innerHTML = maxlimit - field.value.length;
        }
    },


    favoriteTweet: function(status_id, cb){
        if(cb == null) cb = function() {};

        var get_data = "?status_id=" + status_id;
        var el = $('fav_span_'+status_id);
        C.asyncRequest('GET', '/users/social_news_project/twitter/favorite_tweet.php' + get_data, {
        success: function(o){
                if (o.responseText && /success_favorited/.test(o.responseText)){
                    if(el) el.innerHTML = "<img src=\"/images/tfaved.gif\" />";
                    $('snn_resp_tweet').innerHTML = _("Already a favorite!");
                    HuffPoUtil.flash($('snn_resp_tweet'));
                }
                else if (o.responseText && /success/.test(o.responseText)){
                    if(el) el.innerHTML = "<img src=\"/images/tfaved.gif\" />";
                    $('snn_resp_tweet').innerHTML = _("Tweet added to Favorites");
                    HuffPoUtil.flash($('snn_resp_tweet'));
                }
                else{
                    $('snn_resp_tweet').innerHTML = _("Unable to process!");
                    HuffPoUtil.hide('hidden_snp_body');
                }
                cb(o.responseText);
                if($('snn_resp_tweet'))
                    setTimeout("if($('snn_resp_tweet')){$('snn_resp_tweet').innerHTML='';}", 5000);
            },
            failure: function(o) {
                if ($('hidden_snp_body')) {
                    HuffPoUtil.hide('hidden_snp_body');
                    HPError.e();
                }
                cb('failure');
            },
            timeout: 20000
        });
    },

    reTweet: function (status_id) {
        var screen_name = $('username_' + status_id).innerHTML;
        var tweet = $('plain_tweet_' + status_id).innerHTML;

        var el = $('tweet_status');

        if (tweet && screen_name) {
            el.value = "RT @" + screen_name + " " + tweet;
            if (el.value.length > 140) {
                el.value = el.value.substr(0, 137) + "...";
            }
            this.textCounter();
            el.focus();
        }
        HPTrack.trackEvent('twitter_snn', 'click', 'retweet');
        return;
    },

    replyTweet: function (status_id) {
        var screen_name = $('username_' + status_id).innerHTML;
        var el = $('tweet_status');

        if (el && screen_name) {
            el.value = "@" + screen_name + " ";
            var end = el.value.length;
            if(el.setSelectionRange)
                el.setSelectionRange(end, end);
        }
        return false;
    },

    twitterTimeline: function (type) {
        if(type == this.twitter_timeline_type && !this.new_tweets_found)
            return;
        else if (this.new_tweets_found) {
            if($("more_friend_tweets")) $("more_friend_tweets").innerHTML= "";
        }

        var error_msg = SNPModule.twitterModule.error_msg;
        this.max_tweet_id = 0;
        if (type == 'mentions') {
            //$('ttop_links').innerHTML = "<a href=\"javascript:void(0);\" id=\"tmore_links\" style=\"color:#FFF;\" onclick=\"SNPModule.twitterTimeline('home');\"><span class=\"small_ttext\">(Friends)</span></a>";
            $('ttop_links').innerHTML = "<a href=\"javascript:void(0);\" id=\"tmore_links\" onclick=\"SNPModule.twitterTimeline('home');\"><span class=\"small_ttext\">" + _("Get Back") + "</span></a>";
        }
        else if (type == 'home') {
            //$('ttop_links').innerHTML = "<a href=\"javascript:void(0);\" id=\"tmore_links\" style=\"color:#FFF;\" onclick=\"SNPModule.twitterTimeline('mentions');\"><span class=\"small_ttext\">(Mentions)</span></a>";
            $('ttop_links').innerHTML = "";
        }

        var entry = HuffPoUtil.GetEntryID();
        var fb_session = HPFB.getSessionForServer();
        var get_data = "?type=" + type + "&new_tweets_found=" + this.new_tweets_found + (entry ? '&entry_id=' + entry : '') + '&get_updates=1&' + fb_session;
        this.twitter_timeline_type = type;
        $('snp_twitter_friends_module_all_pages_here').innerHTML = '<div style="text-align:center; padding:15px 0;"><div class="snn_twitter_loading_img"><img width="32" height="32" src="http://s.huffpost.com/images/loader.gif" alt="" /></div></div>';
        HuffPoUtil.hide('tmodpaging');
        C.asyncRequest('GET', '/users/social_news_project/twitter/show_twitter_module.php' + get_data, {
            success: function (o)
			{
                var response = o.responseText;
                if (response != "")
				{
                    var js_resp = JSON.parse(response);
                    var resp = js_resp.html;
                    var resp_code = js_resp.response_code;

                    if (resp_code == 200)
					{
                        jQuery('#snp_twitter_friends_module_all_pages_here').html(resp);
                        jQuery('#snp_twitter_friends_page_counter').html(1);
                        SNPModule.arr_max_page['twitter'] = parseInt(jQuery('#snp_twitter_max_page_counter').text()) - 1;
                        SNPModule.arr_current_page['twitter'] = 0;

						HuffPoUtil.show('tmodpaging');

                        SNPModule.new_tweets_found = false;
                        SNPModule.max_tweet_id = js_resp.max_friend_tweet_id;
                    }
                    else
					{
                        HPError.e({ msg: error_msg, obj: response });
                    }
                }
                else {
                    HPError.e(error_msg);
                }
            },
            failure: function(o) {
                    HPError.e();
            },
            timeout: 20000
        });
    },

    /*-------------- #3254 --------------- */

    replyToUser: function (status_id) {
        var screen_name = $('username_' + status_id).innerHTML;
        var el = $('tweet_status');
        if (screen_name) {
            el.value = "@" + screen_name + " ";
            this.textCounter();
            el.focus();
        }
        HPTrack.trackEvent('twitter_snn','click','reply');
        return;
    },


    user_profile_open        : false,
    twitter_id_opened        : 0,
    user_profile_call_status : false,
    show_user_bio            : false,

    resetTwitterModuleValues: function () {
        this.user_profile_open  = false;
        this.twitter_id_opened  = 0;
        this.user_profile_call_status = false;
        this.show_user_bio      = false;
    },


    facebook_like_button: function (id, url, type, obj) {
		if(HPBrowser.isIEOld()) {
			Dom.setAttribute($('snp_mp_hp_subpage_' + id), 'onmouseover', null);
			return false;
		}

		if($('fb_like_button_iframe_'+id)) {
			$('fb_like_button_iframe_'+id).src = 'http://www.facebook.com/plugins/like.php?locale=en_US&href='+url+'&layout=button_count&amp;show_faces=true&width=165&action='+type+'&colorscheme=light&height=21';
			$('fb_like_button_iframe_'+id).onload = function() { $('fb_like_button_iframe_'+id).className += ' white_bg'; };
		}

		if($('snp_mp_hp_subpage_' + id)) {
			Dom.setAttribute($('snp_mp_hp_subpage_' + id), 'onmouseover', null);
		}
		else if (obj) {
			Dom.setAttribute(obj, 'onmouseover', null);
		}
	}
};

/*
    "Hot On" version of Most Popular module
*/
SNPModule.HotOn = {

    init: function()
    {
        var tracker = HPTrack.Module('hot_on', 'Hot On');
        tracker.impression();
        var event_handler = new HPTrack.Module.DelegatedHandler(tracker);

        // initialize click tracking
        E.on('most_popular_social', 'click', event_handler, this, true);
    }
};

/*
    Initialize tracking on FB buttons hp_track attribure is required: example mostpop_entry
*/
SNPModule.initLikeTracking = function(tracker) 
{
    HPFB.ensureInit(function() 
    { 
        var callback = function(action, href, elem)
        {
            var label = 'Facebook';
            label = HPTrack.Module.getTrackingPrefix(elem.dom) + label;

            tracker.event(action, label);

            return { localy_tracked: true };
        }

        HPFB.Tracking.Subscribe(['Liked','Unliked', 'Recommended', 'Unrecommended'], ['mostpop_entry'], true, callback);
    }); 
};

SNPModule.addEntriesInside = function(html) {
	html = html || '';
	HPUtil.loadAndRun('/assets/js.php?f=yui_2.7.0/build/tabview/tabview-min.js', function() {
		HPUtil.onPageReady(function() {
			SNPModule.entryInside.loading(html);
		});
	}, null, this);
	return;
};

var HPUser={is_logged_in:function(){if(HuffCookies.getCookie("huffpost_user")&&HuffCookies.getCookie("huffpost_user_id")){return true}return false},user_id:function(){return HuffCookies.getUserId()},username:HuffCookies.getUserName(),user_guid:HuffCookies.getUserGuid(),logout:function(d,b){SNProject.track(HuffCookies.getUserId(),"user_log_out",1);if($("avatar_logged_in")){$("avatar_logged_in").style.display="none"}if($("wendybird_user")){$("wendybird_user").style.display="none"}if($("not_logged_user")){$("not_logged_user").style.display="block"}var a=document.getElementById("fbook_main_text_notloggedin");if(a){a.style.display="block"}a=document.getElementById("join_login_fbook_notloggedin");if(a){a.style.display="block"}a=document.getElementById("fConnect_img_container");if(a){a.style.display="block"}a=document.getElementById("fbook_main_text_loggedin");if(a){a.style.display="none"}a=document.getElementById("join_login_fbook_loggedin");if(a){a.style.display="none"}a=document.getElementById("fbook_main_text_name");if(a){a.innerHTML=HuffCookies.getUserName().replace(/[\+_]/g," ")}a=document.getElementById("fConnect_img_container");if(a){a.style.display="block"}var f=new Array("huffpost_user","huffpost_photo_mode","huffpost_snp_status","huffpost_user_id","huffpost_user_guid");for(var e=0;e<f.length;e++){HuffCookies.destroyCookie(f[e])}a=$("facebook_friends_unit_wrapper");if(a){HuffPoUtil.hide("facebook_friends_unit_wrapper")}a=$("snn_entry_inside_module");if(a){HuffPoUtil.hide(a)}SNPModule.showHpModules();return true},getUserCookies:function(a){a=a||false;var b={huffpost_user_guid:false,huffpost_user_id:false,huffpost_user:false,huffpost_levels:false,huffpost_prefs:false,huffpost_photo_mode:false};if(a){return b}var c=HuffCookies;b.huffpost_user_guid=HuffCookies.getUserGuid()||false;b.huffpost_user_id=HuffCookies.getUserId()||false;b.huffpost_user=HuffCookies.getUserName()||false;b.huffpost_levels=c.getCookie("huffpost_levels")||false;b.huffpost_prefs=c.getCookie("huffpost_prefs")||false;b.huffpost_photo_mode=c.getCookie("huffpost_photo_mode")||false;return b}};
var HpMessage={message_ids:Array(),contacts:Array(),my_id:0,reply_id:0,reply_type:null,reply_all_str:"",first_unread:0,Init:function(){if($("hp_message_ids")){if(!HuffPoUtil.getUrlVar("dm")&&!$("hp_message_ids").innerHTML.length){HuffPoUtil.hide("snp_message_notice");return false}var a=$("hp_message_ids");if(a){this.InitNotice(a.innerHTML)}this.lightbox.init();this.my_id=HuffCookies.getUserId()}},InitNotice:function(a){if(!a.length){HuffPoUtil.hide("snp_message_notice_a");this.message_ids=new Array()}else{this.message_ids=a.split(",");$("snp_message_notice_a").innerHTML=(this.message_ids.length>1)?sprintf(_("read %s new messages"),this.message_ids.length):sprintf(_("read %s new message"),this.message_ids.length);HuffPoUtil.show("snp_message_notice_a","inline")}},ReadNext:function(){if(!this.message_ids.length){return false}this.lightbox.show(this.message_ids[0])},ReplyBoxEdited:function(){HpMessage.reply_type="custom"},ShowReplyBox:function(h){var d=$("hp_message_reply_box");var f=$("hpm_message_"+h);if(!d){return false}if(f){d.parentNode.removeChild(d);f.appendChild(d)}HuffPoUtil.show("hp_message_reply_box");$("hpm_reply_box").focus();if(h>0){$("hpm_reply_box_subject").value="Re: "+HuffPoUtil.trim($("hpm_subject_text").innerHTML);var a=Dom.getY("hpm_btn_submit");var c=Dom.getY("hpm_message_"+h);var b=Dom.getDocumentScrollTop();var g=Dom.getViewportHeight();var e=b+g;if(a>e-20){if(a-c>g){HuffPoUtil.ScrollTo("hp_message_reply_box")}else{HuffPoUtil.ScrollTo("hpm_message_"+h)}}else{if(c<b&&g<c-a){console.log("scroll (2) to hpm_message_"+h);HuffPoUtil.ScrollTo("hpm_message_"+h)}}}(function(){var k=new YAHOO.util.LocalDataSource(HpMessage.contacts);k.responseSchema={fields:["name"]};var j=new YAHOO.widget.AutoComplete("hpm_reply_box_to","hpm_reply_box_to_container",k);j.prehighlightClassName="yui-ac-prehighlight";j.delimChar=[","];j.animSpeed=0.2;j.autoHighlight=true;j.useIFrame=true;j.queryMatchContains=true;j.animVert=false;j.queryDelay=0;j.resultTypeList=false;var i=function(l,n,m){return l.substring(0,m)+"<span style='font-weight:bold;'>"+l.substr(m,n.length)+"</span>"+l.substring(m+n.length)};j.formatResult=function(n,q,m){var o=n.name;var p="";var l=o.toLowerCase().indexOf(q);if(l>-1){p=i(o,q,l)}else{p=o}return p};return{oDS:k,oAC:j}})()},EmptyMessageForm:function(b){if(!this.reply_id||this.reply_id==b){return true}var a=$("hpm_reply_box");if(HuffPoUtil.trim(a.value)!=""){if(confirm(_("You have not sent a message, do you want to discard it?"))){a.value="";return true}else{a.focus();return false}}return true},WriteNew:function(a){if(!a){this.lightbox.show(0)}else{if(!this.LoadContacts(1,null,0)){HpMessage.ShowReplyBox(0);HpMessage.reply_type="custom";HpMessage.reply_id=0}}},Reply:function(a){if(!this.EmptyMessageForm(a)){return false}if(!this.LoadContacts(1,function(){HpMessage.FillReplyToBox(0,a)},a)){HpMessage.ShowReplyBox(a);HpMessage.FillReplyToBox(0,a)}this.reply_id=a;this.reply_type="reply_to_author";if(HuffPoUtil.trim($("hpm_reply_box_to").value)==this.reply_all_str){this.reply_type="reply_to_all"}},ReplyAll:function(a){if(!this.EmptyMessageForm(a)){return false}if(!this.LoadContacts(1,function(){HpMessage.FillReplyToBox(1,a)},a)){HpMessage.ShowReplyBox(a);HpMessage.FillReplyToBox(1,a)}this.reply_id=a;this.reply_type="reply_to_all"},Send:function(){var a=HuffPoUtil.trim($("hpm_reply_box_to").value);if(!a.length){HPError.e(_("Please set recipients (Tip: try to type any of your friends and you get a list of matched names)"),1);return false}a=HuffPoUtil.trim($("hpm_reply_box_subject").value);if(!a.length){HPError.e(_("Please write a subject"),1);return false}a=HuffPoUtil.trim($("hpm_reply_box").value);if(!a.length){HPError.e(_("Please write a message"),1);return false}if(a.length>1000){HPError.e(sprintf(_("Your message is too long. Please remove %s characters"),(a.length-1000)),1);return false}$("hpm_btn_submit").src=_("/images/v/btn_submit.png");var d=this;var c="/users/direct_message/send.php?user_id="+this.lightbox.url_user_id;var b="reply_id="+encodeURIComponent(this.reply_id)+"&reply_type="+encodeURIComponent(this.reply_type)+"&to="+encodeURIComponent($("hpm_reply_box_to").value)+"&text="+encodeURIComponent($("hpm_reply_box").value)+"&subject="+encodeURIComponent($("hpm_reply_box_subject").value);YAHOO.util.Connect.asyncRequest("POST",c,{success:function(e){d.sendSuccess(e)},failure:function(e){d.sendFail(e)}},b)},sendSuccess:function(d){$("hpm_btn_submit").src=_("/images/v/btn_submit-blue.png");var a=JSON.parse(d.responseText);if(!a){HPError.e(d.responseText,1)}else{if(typeof(a.message_id)=="undefined"||a.message_id<=0){HPError.e(a.error_message,1)}else{HuffPoUtil.hide("hp_message_reply_box");$("hpm_reply_box").value="";if(a.parent_id){var c=$("hpm_message_"+a.parent_id);var b=document.createElement("p");b.className="comment-posted";b.innerHTML="";if(HpMessage.reply_type=="reply_to_all"){b.innerHTML+=_("You just replied to all")}else{b.innerHTML+=sprintf(_("You just replied to %s"),$("hpm_reply_box_to").value)}b.innerHTML+=": "+a.message;c.appendChild(b)}else{HuffConnect.hideModal()}}}},sendFail:function(a){HPError.e(null,1);$("hpm_btn_submit").src=_("/images/v/btn_submit-blue.png")},FillReplyToBox:function(a,b){if(a==0){$("hpm_reply_box_to").value=$("hpm_user_from_"+b).innerHTML}else{$("hpm_reply_box_to").value=this.reply_all_str}},LoadContacts:function(g,f,e){if(this.contacts.length){HuffPoUtil.hide("hp_message_contacts_loading");return false}if(this.contacts==-1){return false}if(g){var d=$("hp_message_contacts_loading");var c=$("hpm_message_"+e);if(d&&c){d.parentNode.removeChild(d);c.appendChild(d);HuffPoUtil.show("hp_message_contacts_loading")}}this.contacts=-1;var b=this;var a="/users/direct_message/get_contacts.php?user_id="+this.lightbox.url_user_id;YAHOO.util.Connect.asyncRequest("GET",a,{success:function(h){b.contactsLoadSuccess(h,g,f,e)},failure:function(h){b.contactsLoadFail(h,g,f,e)}});return true},contactsLoadSuccess:function(b,d,c,a){HpMessage.contacts=JSON.parse(b.responseText);HuffPoUtil.hide("hp_message_contacts_loading");if(d){HpMessage.ShowReplyBox(a)}if(typeof(c)=="function"){c()}},contactsLoadFail:function(b,d,c,a){HPError.e(_("Sorry, can't get your contacts list"),1);HuffPoUtil.hide("hp_message_contacts_loading");if(d){HpMessage.ShowReplyBox(a)}if(typeof(c)=="function"){c()}},ScrollToUnread:function(){if(!this.first_unread){return false}HuffPoUtil.ScrollTo("hpm_message_"+this.first_unread)},lightbox:{isFormLoaded:false,zone_info:"",url_user_id:"",init:function(){if(typeof(zone_info)!="undefined"){this.zone_info=zone_info}else{if(typeof(QV)!="undefined"&&typeof(QV.ad_zone)!="undefined"){this.zone_info=QV.ad_zone}else{this.zone_info="huffpost.general/general"}}this.url_user_id=SNPModule.url_user_id},show:function(c){if(HpMessage.contacts!=0){}HuffConnect.showLoader();if(!this.isFormLoaded){var b=this;var a="/users/direct_message/show_message.php?id="+c+"&user_id="+this.url_user_id+(new Date()).getTime();HuffPoUtil.show("huffpo_snn_is_loading");$("huff_snn_modal_common_inner").innerHTML="";YAHOO.util.Connect.asyncRequest("GET",a,{success:function(d){b.onLoadSuccess(d,c)},failure:function(d){b.onLoadFail(d)}})}},onLoadSuccess:function(e,d){HuffConnect.hideModal();HuffConnect.socialModal({inner_html:e.responseText});var a=$("hpm_all_other_users");if(a){HpMessage.reply_all_str=HuffPoUtil.trim(a.innerHTML)}this.isFormLoaded=true;this.show();var b=$("snn_qr_ad");if(HuffPoUtil.trim(b.innerHTML)==""){b.innerHTML='<div class="visible_frame"><iframe src="http://ad.doubleclick.net/adi/'+this.zone_info+";ptile=4;sz=300x250;ord="+HuffPoUtil.WEDGJE.ord()+'?" width="300" height="250" marginwidth="0" marginheight="0" frameborder="0" scrolling="no"></iframe></div>'}else{b.style.display="block"}var c=$("_hp_message_ids_update");if(c){var f=HuffPoUtil.trim(c.innerHTML);if(!f.length){HuffPoUtil.hide("snp_message_notice_a","inline")}else{HpMessage.InitNotice(f)}}if(d){E.addListener("hpm_reply_box_to","change",HpMessage.ReplyBoxEdited);HpMessage.first_unread=d}else{HpMessage.WriteNew(1)}},onLoadFail:function(a){HPError.e(null,1);HuffConnect.hideModal()},close:function(){HpMessage.lightbox.isFormLoaded=false}}};
var SocialFriends={page_config:{current_page:{mutual:0,favored:0,fans:0},total_pages:{mutual:0,favored:0,fans:0}},user_ids:"",ignore_ids:"",happy_join:false,init:function(){this.page_config.total_pages.mutual=parseInt(jQuery("#sf_mutual_total_pages").html())||0;this.page_config.total_pages.favored=parseInt(jQuery("#sf_favored_total_pages").html())||0;this.page_config.total_pages.fans=parseInt(jQuery("#sf_fans_total_pages").html())||0;this.user_ids=jQuery("#sf_fan_uids").html()||"";return},previous_page:function(b){var c=this.page_config.current_page[b]-1;var a="#social_friends_"+b+"_page_";if(jQuery(a+c).length){jQuery(a+this.page_config.current_page[b]).addClass("hidden");jQuery(a+c).removeClass("hidden");this.page_config.current_page[b]=c}this.setPage(b);return},next_page:function(b){var c=this.page_config.current_page[b]+1;var a="#social_friends_"+b+"_page_";if(jQuery(a+c).length){jQuery(a+this.page_config.current_page[b]).addClass("hidden");jQuery(a+c).removeClass("hidden");this.page_config.current_page[b]=c}this.setPage(b);return},setPage:function(b){var a=this.page_config.current_page[b]+1;if(a==1){jQuery(".sf_"+b+"_prev").addClass("sf_prev_disabled").removeClass("sf_prev_enabled");jQuery(".sf_"+b+"_next").addClass("sf_next_enabled").removeClass("sf_next_disabled")}else{if(a==this.page_config.total_pages[b]){jQuery(".sf_"+b+"_next").addClass("sf_next_disabled").removeClass("sf_next_enabled");jQuery(".sf_"+b+"_prev").addClass("sf_prev_enabled").removeClass("sf_prev_disabled")}else{jQuery(".sf_"+b+"_prev").addClass("sf_prev_enabled").removeClass("sf_prev_disabled");jQuery(".sf_"+b+"_next").addClass("sf_next_enabled").removeClass("sf_next_disabled")}}jQuery("#sf_"+b+"_current_page").html(a);return},selectFriends:function(a){var c=jQuery("#follower_"+a);var b=!(jQuery(c).hasClass("friend_to_fan_checked"));jQuery(c).toggleClass("friend_to_fan_checked",b);if(!b){this.user_ids=this.user_ids.replace(a+",","");this.ignore_ids+=a+","}else{this.user_ids+=a+",";this.ignore_ids=this.ignore_ids.replace(a+",","")}return},saveFriends:function(){if(this.user_ids==""&&this.ignore_ids==""){return}var b={user_ids:this.user_ids,ignore_ids:this.ignore_ids};var a="/users/social_news_project/followers_to_friends.php";jQuery(".sf_save_friends_button").addClass("hidden");jQuery(".sf_save_friends_loader").removeClass("hidden");jQuery.ajax({url:a,data:b,type:"POST",success:function(e,d,c){if(c.status!=200){return}var g=JSON.parse(e);if(/success/.test(g.status)){SocialFriends.user_ids=SocialFriends.ignore_ids="";var f=g.friends_message+""+g.ignored_message;jQuery(".sf_fans_block").html(f)}},error:function(){HPError.e()}})},acceptFollower:function(c,b,a){jQuery.ajax({url:"/users/friend_relations.php",data:{fan_id:c,action:"accept"},type:"POST",success:function(f,e,d){if(/failure/.test(f)){HPError.e()}if(b){b(c)}},error:function(){if(a){b(a)}}})},declineFollower:function(c,b,a){jQuery.ajax({url:"/users/friend_relations.php",data:{fan_id:c,action:"ignore"},type:"POST",success:function(f,e,d){if(b){b(c)}},error:function(){if(a){b(a)}}})}};var ProviderFriends={inited:false,init:function(a){if(this.inited){return}if(jQuery("#su2_total_mutual_pages").length){this.total_mutual_pages=parseInt(jQuery("#su2_total_mutual_pages").html())}if(jQuery("#su2_total_following_pages").length){this.total_following_pages=parseInt(jQuery("#su2_total_following_pages").html())}if(jQuery("#su2_total_followers_pages").length){this.total_followers_pages=parseInt(jQuery("#su2_total_followers_pages").html())}this.current_mutual_page=this.current_following_page=this.current_followers_page=1;this.inited=true;return},nextMutualPage:function(){this.init();var a=this.current_mutual_page+1;if(a>this.total_mutual_pages){return}this.showPage("mutual",a);this.setMutualPagination(a);return},prevMutualPage:function(){this.init();var a=this.current_mutual_page-1;if(a<1){return}this.showPage("mutual",a);this.setMutualPagination(a);return},setMutualPagination:function(b){var a=jQuery("#su_modal2_prev_link_mutual");var c=jQuery("#su_modal2_next_link_mutual");if(b<=1){a.addClass("su_modal2_prev_disabled").removeClass("su_modal2_prev_enabled");c.addClass("su_modal2_next_enabled").removeClass("su_modal2_next_disabled");this.current_mutual_page=1}if(b>1&&b<this.total_mutual_pages){a.addClass("su_modal2_prev_enabled").removeClass("su_modal2_prev_disabled");c.addClass("su_modal2_next_enabled").removeClass("su_modal2_next_disabled");this.current_mutual_page=b}if(b>=this.total_mutual_pages){a.addClass("su_modal2_prev_enabled").removeClass("su_modal2_prev_disabled");c.addClass("su_modal2_next_disabled").removeClass("su_modal2_next_enabled");this.current_mutual_page=this.total_mutual_pages}return},nextFollowingPage:function(){this.init();var a=this.current_following_page+1;if(a>this.total_following_pages){return}this.showPage("following",a);this.setFollowingPagination(a);return},prevFollowingPage:function(){this.init();var a=this.current_following_page-1;if(a<1){return}this.showPage("following",a);this.setFollowingPagination(a);return},setFollowingPagination:function(b){var a=jQuery("#su_modal2_prev_link_following");var c=jQuery("#su_modal2_next_link_following");if(b<=1){a.addClass("su_modal2_prev_disabled").removeClass("su_modal2_prev_enabled");c.addClass("su_modal2_next_enabled").removeClass("su_modal2_next_disabled");this.current_following_page=1}if(b>1&&b<this.total_following_pages){a.addClass("su_modal2_prev_enabled").removeClass("su_modal2_prev_disabled");c.addClass("su_modal2_next_enabled").removeClass("su_modal2_next_disabled");this.current_following_page=b}if(b>=this.total_following_pages){a.addClass("su_modal2_prev_enabled").removeClass("su_modal2_prev_disabled");c.addClass("su_modal2_next_disabled").removeClass("su_modal2_next_enabled");this.current_following_page=this.total_following_pages}return},nextFollowersPage:function(){this.init();var a=this.current_followers_page+1;if(a>this.total_followers_pages){return}this.showPage("followers",a);this.setFollowersPagination(a);return},prevFollowersPage:function(){this.init();var a=this.current_followers_page-1;if(a<1){return}this.showPage("followers",a);this.setFollowersPagination(a);return},setFollowersPagination:function(b){var a=jQuery("#su_modal2_prev_link_followers");var c=jQuery("#su_modal2_next_link_followers");if(b<=1){a.addClass("su_modal2_prev_disabled").removeClass("su_modal2_prev_enabled");c.addClass("su_modal2_next_enabled").removeClass("su_modal2_next_disabled");this.current_followers_page=1}if(b>1&&b<this.total_followers_pages){a.addClass("su_modal2_prev_enabled").removeClass("su_modal2_prev_disabled");c.addClass("su_modal2_next_enabled").removeClass("su_modal2_next_disabled");this.current_followers_page=b}if(b>=this.total_followers_pages){a.addClass("su_modal2_prev_enabled").removeClass("su_modal2_prev_disabled");c.addClass("su_modal2_next_disabled").removeClass("su_modal2_next_enabled");this.current_followers_page=this.total_followers_pages}return},showPage:function(b,c){if(b=="mutual"){total=this.total_mutual_pages}if(b=="following"){total=this.total_following_pages}if(b=="followers"){total=this.total_followers_pages}for(var a=1;a<=total;a++){if(a==c){jQuery("#su2_"+b+"_page_"+a).css("display","block")}else{jQuery("#su2_"+b+"_page_"+a).css("display","none")}}},setFollowersToFans:function(b,d){var a=d.firstChild;var f=jQuery("#followers_to_fans_box");var e=b+"|";if(f.length){var c=f.attr("value")}if(jQuery(a).hasClass("friend_to_fan_checked_small")){jQuery(a).addClass("friend_to_fan_checked_small_disabled").removeClass("friend_to_fan_checked_small");f.attr("value",c.replace(e,""))}else{jQuery(a).addClass("friend_to_fan_checked_small").removeClass("friend_to_fan_checked_small_disabled");f.attr("value",f.attr("value")+e)}this.updateTwitterFriendCount();return},checkAllTwitterFollower:function(e){var d=jQuery("#followers_to_fans_box");d.attr("value",e);this.updateTwitterFriendCount();var c=e.split("|");for(var a=0;a<c.length;a++){var b=jQuery("#twitter_check_"+c[a]);if(b.length){if(b.hasClass("friend_to_fan_checked_small_disabled")){b.addClass("friend_to_fan_checked_small").removeClass("friend_to_fan_checked_small_disabled")}}}return},unCheckAllTwitterFollower:function(e){var d=jQuery("#followers_to_fans_box");d.attr("value","");this.updateTwitterFriendCount();var c=e.split("|");for(var a=0;a<c.length;a++){var b=jQuery("#twitter_check_"+c[a]);if(b.length){if(b.hasClass("friend_to_fan_checked_small")){b.addClass("friend_to_fan_checked_small_disabled").removeClass("friend_to_fan_checked_small")}}}return},updateTwitterFriendCount:function(){var d=jQuery("#followers_to_fans_box");var c=d.attr("value");var a=c.split("|");var b=a.length-1;jQuery("twitter_selected_count").html(b);return},setCustomFans:function(b,d){var a=d.firstChild;var f=jQuery("#custom_friends_box");var e=b+"|";if(f.length){var c=f.attr("value")}if(jQuery(a).hasClass("friend_to_fan_checked_small")){jQuery(a).addClass("friend_to_fan_checked_small_disabled").removeClass("friend_to_fan_checked_small");f.attr("value",c.replace(e,""))}else{jQuery(a).addClass("friend_to_fan_checked_small").removeClass("friend_to_fan_checked_small_disabled");f.attr("value",f.attr("value")+e)}this.updateGooleFriendCount();return},checkAllCustom:function(e){var d=jQuery("#custom_friends_box");d.attr("value",e);this.updateGooleFriendCount();var c=e.split("|");for(var a=0;a<c.length;a++){var b=jQuery("#google_check_"+c[a]);if(b.length){if(b.hasClass("friend_to_fan_checked_small_disabled")){b.addClass("friend_to_fan_checked_small").removeClass("friend_to_fan_checked_small_disabled")}}}return},unCheckAllCustom:function(e){var d=jQuery("#custom_friends_box");d.attr("value","");this.updateGooleFriendCount();var c=e.split("|");for(var a=0;a<c.length;a++){var b=jQuery("#google_check_"+c[a]);if(b.length){if(b.hasClass("friend_to_fan_checked_small")){b.addClass("friend_to_fan_checked_small_disabled").removeClass("friend_to_fan_checked_small")}}}return},updateGooleFriendCount:function(){var d=jQuery("#custom_friends_box");var c=d.attr("value");var a=c.split("|");var b=a.length-1;jQuery("google_selected_count").html(b);return}};
window._||(window._=new Function("return arguments[0]"));window.ngettext||(window.ngettext=new Function("return arguments[0]"));window.sprintf||(window.sprintf=new Function("return arguments[0]"));var Recommendations={page_entries_loading:false,entries_loaded:false,max_page:1,loaded:false,fb_session:null,is_inited:false,load:function(b){if(this.loaded){return}if("undefined"!==typeof b.session){console.log("Someone called Recommendations.load() with session param instead of fb_session which is the new style")}this.fb_session=b.fb_session;if("unknown"!=b.status&&(-1!==location.href.indexOf("SNN=fb_recommendations")||-1!==location.href.indexOf("snn=2")||"fb_recommendations"==HuffCookies.getCookie("snn_version")||(b.fb_session&&b.fb_session.userID&&!isNaN(b.fb_session.userID)))&&b.fb_session&&b.fb_session.userID&&!isNaN(b.fb_session.userID)){HuffCookies.setCookie("snn_version","fb_recommendations",2000);E.onAvailable("facebook_friends_unit_wrapper_fb",function(){Dom.get("facebook_friends_unit_wrapper_fb").style.display="block";huff.emit("content/update","#facebook_friends_unit_wrapper_fb")});E.onAvailable("fb_recommendations_cont_loaded",function(){E.on("fb_recom_help","mouseover",function(){if(!this.getAttribute("floating_id")){var c='<div class="relative">'+_('We\'re using Facebook to personalize your experience. The stories below reflect what you like on Facebook and around the web.Send us feedback at <a href="mailto:beta@huffingtonpost.com">beta@huffingtonpost.com</a>')+'<div class="bottom_bg relative"></div></div>';var d=[-156,-118];FloatingPrompt.embed(this,c,undefined,"top",{fp_intersects:1,timeout_remove:2000,ignore_arrow:true,width:251,add_xy:d,class_name:"fp_fb_recom"})}});Recommendations.init();Recommendations.loaded=true})}else{var a=this;if($("avatar_logged_in_snn")&&typeof FB!=="undefined"&&this.fb_session.userID&&HuffCookies.getUserName()){$("avatar_logged_in_snn").innerHTML=sprintf('<a href="/social/%s/"><img src="http://graph.facebook.com/%s/picture" width="20"></a>',HuffCookies.getUserName(),this.fb_session.userID);FB.api({method:"fql.query",query:"SELECT name FROM user WHERE uid="+this.fb_session.userID},function(c){if(c[0]&&c[0].name){$("wendybird_user_name_snn").innerHTML=sprintf(_('Welcome, <a href="/social/%s/">%s</a>'),HuffCookies.getUserName(),c[0].name)}})}}},init:function(){if(this.is_inited){return}this.is_inited=true;this.snp_block=new YAHOO.SNP.RecommendBlock({cur_obj:this,id:"snp_recom_block",update_max_page:true})},buildHtml:function(f){var e="";var a=this.snp_block.paginator.currentPage;e+='<div id="hp_snp_recom_block_page_'+a+'"  data-beacon=\'{"p":{"lnid":"page'+a+"\"}}'>";var b=0;var c=HPUtil.GetEntryID();for(var d=0;d<f.entries.length;++d){if(c===f.entries[d].entry_id||b===3){continue}var g=f.entries[d];if("dev"==HPConfig.inst_type){g.entry_link=g.entry_link.replace(/beta.*?\//,"www.huffingtonpost.com/")}e+='<div class="float_left hp_snp_recom_entry" id="tag_fb_recom_'+g.specified_tag+'"                 onmouseover="HPFB.likeButton_v2(this, \''+g.fb_button+'\', false);" style="'+(b!=0?"padding-top:7px;":"")+"                "+(2>b?"padding-bottom:7px;border-bottom:1px dotted #afafaf;":"")+'"  data-beacon=\'{"p":{"mpid":'+b+', "plid":'+g.entry_id+"}}'>";e+='<div class="snp_most_popular_entry_image">';if(g.image){e+='<a href="'+g.entry_link+'" class="track_page_article white_bg">                     <img style="margin-right:5px;" class="img_border" src="'+g.image+'"/></a>'}e+="</div>";e+='<div class="snp_most_popular_entry_desc">';e+='<a class="track_page_article white_bg black bold arial_13" href="'+g.entry_link+'">                 '+g.entry_title+'</a> <br class="clear_first" />';e+=g.fb_like_html;if("undefined"!==g._tag_data){e+='<div class="floatright relative hp_fb_tag_cont">';e+='<div class="hp_fb_recom_tag_name float_left relative overflow_hidden margin_right_5 overflow_hidden                     align_right hp_fb_recom_fblike_'+g.fb_button+'">';e+='<a class="capitalize track_page_tag white_bg bold underline line_height_22 hp_fb_recom_tag_link" href="/tag/'+g._tag_data.tag_name+'">'+g._tag_data.tag_name+"</a>";e+="</div>";e+='<div class="float_left margin_top_5 relative" style="z-index:102;">';e+='<a title="'+_("Remove this entry from my likes")+'" class="track_action_remove" href="#fb_recommendations" onclick="                     Recommendations.removeTag('+g.specified_tag+", "+g.entry_id+')"><img                     src="/images/facebook/recommendations/delete-icon.png" width="13" height="13" /></a>';e+="</div>";e+="</div>"}e+="</div>";e+="</div>";++b}e+="</div>";return e},loadSNPBlock:function(){var b=this;if($("avatar_logged_in_snn")&&typeof FB!=="undefined"&&this.fb_session.userID&&HuffCookies.getUserName()){$("avatar_logged_in_snn").innerHTML=sprintf('<a href="/social/%s/"><img src="http://graph.facebook.com/%s/picture" width="20"></a>',HuffCookies.getUserName(),this.fb_session.userID);FB.api({method:"fql.query",query:"SELECT name FROM user WHERE uid="+this.fb_session.userID},function(h){if(h[0]&&h[0].name){$("wendybird_user_name_snn").innerHTML=sprintf(_('Welcome, <a href="/social/%s/">%s</a>'),HuffCookies.getUserName(),h[0].name)}})}var g="&uid="+this.fb_session.userID+"&access_token="+encodeURIComponent(this.fb_session.accessToken);var a=0,d=false,f=HPUtil.getUrlVar("username"),b=this;var e=HuffCookies.getUserName()?"&logged_username="+HuffCookies.getUserName():"";var c=function(){if(d){return}d=true;C.asyncRequest("GET","/ajax/users/recommendations/load_entries.php?"+g+"&try="+a,{success:function(j){d=false;var i=jQuery.parseJSON(j.responseText);if("undefined"!==typeof i.loading){++a;if(5<=a){clearInterval(b.pollingID);Dom.get("facebook_friends_unit_wrapper_fb").style.display="none";Dom.get("hp_snp_recom_block_all_pages").innerHTML="<h4>"+jQuery.I18N.gettext("There are no stories for you")+"</h4>";Dom.get("hp_snp_recom_block_all_pages").style.textAlign="center";Dom.get("hp_snp_recom_block_main").style.background="transparent"}return}if("undefined"!==typeof i.cmd&&"hide_block"===i.cmd&&$("facebook_friends_unit_wrapper_fb")){$("facebook_friends_unit_wrapper_fb").style.display="none"}clearInterval(b.pollingID);var h="/ajax/users/recommendations/load_entries.php?"+g;b.max_page=i.c_pages;if(b.max_page>1){b.snp_block.init_pagination(1,b.max_page,h,{is_loaded_callback:function(k){return"undefined"===typeof k.loading},main_block_to_hide:$("facebook_friends_unit_wrapper_fb"),render_content_after_requested:function(k){return b.buildHtml(k)},recognize_cmd:function(k){return"undefined"!==typeof k.cmd?k.cmd:""},cPages:function(k){return k.c_pages},dataType:"json"});Dom.removeClass("snp_recom_block_pagination","hidden")}Dom.get("hp_snp_recom_block_all_pages").innerHTML=b.buildHtml(i);HPUtil.ImageLoader.foldCheck("hp_snp_recom_block_page_1");Dom.get("hp_snp_recom_block_main").style.background="transparent";Dom.get("hp_snp_recom_block_main").style.height="auto";HPUtil.ImageLoader.foldCheck("hp_snp_recom_block_page_1");HPTrack.Module.Impressions.queue("recommend")},failure:function(){d=false;clearInterval(b.pollingID);Dom.get("facebook_friends_unit_wrapper_fb").style.display="none";Dom.get("hp_snp_recom_block_all_pages").innerHTML="<h4>"+jQuery.I18N.gettext("There are no stories for you")+"</h4>";Dom.get("hp_snp_recom_block_all_pages").style.textAlign="center";Dom.get("hp_snp_recom_block_main").style.background="transparent";HPError.e()},timeout:10000})};c();b.pollingID=window.setInterval(c,5000)},removeTag:function(a,b){var c=this;var d="entry_id="+b;var e="&uid="+c.fb_session.userID+"&access_token="+encodeURIComponent(c.fb_session.accessToken);C.asyncRequest("POST","/users/recommendations/remove_tag.php?"+d+e+"&tag="+a,{success:function(i){var j=c.snp_block.paginator;var g=j.currentPage;var f=Dom.get("tag_fb_recom_"+a).parentNode;var h=false;while(1){if(Dom.get("hp_snp_recom_block_page_"+(++g).toString())){Dom.get(Dom.get("hp_snp_recom_block_page_"+g)).parentNode.removeChild(Dom.get("hp_snp_recom_block_page_"+g));continue}break}Dom.get(Dom.get("hp_snp_recom_block_page_"+j.currentPage)).parentNode.removeChild(Dom.get("hp_snp_recom_block_page_"+j.currentPage));j.Goto(j.currentPage)},failure:function(){HPError.e()}})}};
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var Submissions={init_time:0,saved_data:{},init:function(){var a=new Date();Submissions.init_time=a.getTime();jQuery("#submissions_shortcuts .sbm_send").bind("click",function(){var b=this.id.match(/submissions_send_(.+)/);if(b){Submissions.Form.init(b[1])}});jQuery.getScript("/include/lib/pop-contact.js",function(){var b=jQuery("#submission_contact_us");if(b.length==0){return}if(typeof(b.pop_contact)!=="undefined"){b.pop_contact()}})},toggleForm:function(){var d=document.getElementById("submission_anonymous").checked?"hide":"show";var c=["fname","lname","email","phone","author"];for(var a=0;a<c.length;a++){var b=jQuery("#submission_"+c[a]);if(!b){continue}if(d=="hide"){this.saved_data[c[a]]=b.val();b.attr("disabled","disabled").val("")}else{b.attr("disabled","").val(this.saved_data[c[a]])}}},radioButtonClick:function(){var a=jQuery(this);if(a.hasClass("sbm_video")){jQuery("#submission_upload").hide();jQuery("#submission_web_source").hide();jQuery("#submission_video_code").show();jQuery("#submission_rights_block").hide()}else{jQuery("#submission_upload").show();jQuery("#submission_web_source").show();jQuery("#submission_video_code").hide();jQuery("#submission_rights_block").show()}},Form:{init:function(a){this.type=a;this.prep_message_holder_init=false;jQuery.ajax({cache:false,url:"/submissions/get_form_content.php?type="+this.type,context:this,success:this.display})},check_completeness:function(){var f;this.req_reason=false;if(jQuery("#submission_name").val()==""||jQuery("#submission_name").val()==_("Name")){this.req_reason=_("Please, enter your name");return false}var d=jQuery("#submission_email").val();if(d==""||d==_("Email address")){this.req_reason=_("Please, enter your email");return false}if(d!=_("Email address")){if(!(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,4}$/.test(d))){this.req_reason=_("Wrong email address");return false}}if(this.type=="tip"){if(jQuery("#submission_title").val()==""){this.req_reason=_("Please, enter the Subject Line");return false}if(jQuery("#submission_body").val()==""||jQuery("#submission_body").val()==_("Enter Message here (1,000 character limit)")){this.req_reason=_("Please, enter the Message Content");return false}}else{if(this.type=="correction"){if(jQuery("#submission_error_kind").val()==""){this.req_reason=_("Please, select the kind of error");return false}if(jQuery("#submission_body").val()==""||jQuery("#submission_body").val()==_("Describe the error here (1,000 character limit)")){this.req_reason=_("Please, enter the Correction");return false}}else{if(this.type=="link"){var b=jQuery("#submission_url").val();if(b==""){this.req_reason=_("Please, enter the URL");return false}var g=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(!g.test(b)){this.req_reason=_("Please, enter a valid URL");return false}if(jQuery("#submission_body").val()==""||jQuery("#submission_body").val()==_("(1,000 character limit)")){this.req_reason=_("Please, enter a correction");return false}}else{if(this.type=="media"){if(jQuery("#submission_radio_group input:checked").hasClass("sbm_video")){if(jQuery("#submission_embed").val()==""||jQuery("#submission_embed").val()==_("Enter embed code")){this.req_reason=_("Please, enter a link");return false}if(jQuery("#submission_title").val()==""){this.req_reason=_("Please, enter a title");return false}if(jQuery("#submission_caption").val()==""){this.req_reason=_("Please, enter a caption");return false}}else{if((jQuery("#submission_url").val()==""||jQuery("#submission_url").val()==_("Enter link"))&&jQuery("#submission_file_to_upload").val()==""){this.req_reason=_("Please, enter a link or choose a photo");return false}if(jQuery("#submission_file_to_upload").val()!=""){var e=["png","jpg","jpeg","gif","bmp"];var a=jQuery("#submission_file_to_upload").val();var c=a.split(".").pop();if("function"!==typeof(e.inArray)){e.inArray=function(j){var h;for(h=0;h<this.length;h++){if(this[h]===j){return true}}return false}}if("function"===typeof(e.inArray)&&!e.inArray(c)){this.req_reason=_("Please, choose a valid photo");return false}}if(jQuery("#submission_title").val()==""){this.req_reason=_("Please, enter a title");return false}if(jQuery("#submission_caption").val()==""){this.req_reason=_("Please, enter a caption");return false}if(jQuery("#submission_file_to_upload").val()!=""&&!jQuery("#submission_rights:checked").val()){this.req_reason=_("Please verify that you have the rights to use this photo");return false}}}}}}return true},display:function(a){var b=this;HuffConnect.socialModal({onclose:function(){b.UploadButton.stop()},inner_html:a,width:650,onshow:function(){b.onshow()}})},onshow:function(){if(HPAds.page_spots.submissions_captcha){jQuery.ajax({url:"http://"+HPConfig.current_web_domain+"/ads/adyoulike/adyoulike.php",dataType:"html"}).done(function(b){jQuery("#submissions_form").append(b)})}else{jQuery.getScript("http://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){Recaptcha.create(HPConfig.recaptcha_key,"submission_recaptcha",{theme:"red",callback:Recaptcha.focus_response_field})})}jQuery("#submission_title, #submission_embed, #submission_body").each(function(){jQuery(this).focus(function(){jQuery(this).unbind("focus").addClass("black").val("")})});jQuery("#submission_name, #submission_email, #submission_url").bind("focus blur",function(d){var b=jQuery(this);var h=b.attr("id");var f=jQuery.trim(b.val());var g=d.type;var c="";switch(h){case"submission_name":c=_("Name");break;case"submission_email":c=_("Email address");break;case"submission_url":c=_("Enter link");break;default:return}if("focus"==g&&c==f){b.val("").addClass("black")}else{if("blur"==g&&""==f){b.val(c).removeClass("black")}}return});jQuery("#submission_url, #submission_file_to_upload").bind("change keyup",function(){var b=jQuery("#submission_url");var d=jQuery("#submission_file_to_upload");var c=jQuery("#submission_rights_block");if(""!==d.val()){c.show();return}if(""===b.val()||_("Enter link")==b.val()){c.show()}else{c.hide()}return});var a=this;this.counter=jQuery("#sbm_counter");this.message_body=jQuery("#submission_body");this.message_body_content="";this.message_body.keyup(function(){var b=1000;var c=a.message_body.val().length;if(c>b){a.counter.html(sprintf(_("%s count"),b));a.message_body.val(a.message_body_content)}else{a.counter.html(sprintf(_("%s count"),c));a.message_body_content=a.message_body.val()}if(c>=b){a.counter.addClass("red")}else{a.counter.removeClass("red")}});if(this.type==="media"){this.UploadButton.init()}jQuery("#submission_submit").click(function(){var b="/submissions/post.php?type="+a.type+"&entry_id="+HPConfig.entry_id;var f=jQuery("#submission_radio_group input:checked");if(f.val()=="Photo"){var c=(jQuery("#submission_file_to_upload").val()!=="")?true:false;if(c){var e=document.createElement("input");e.setAttribute("type","hidden");e.setAttribute("name","APC_UPLOAD_PROGRESS");e.setAttribute("value",Submissions.ProgressBar.get_salt());jQuery("#submissions_form").prepend(e)}}a.clear_failure();if(!a.check_completeness()){a.show_requirement();return false}var d;d=jQuery("#submission_name");if(d.val()==_("Name")){d.val("")}d=jQuery("#submission_email");if(d.val()==_("Email address")){d.val("")}d=jQuery("#submission_url");if(d.length!==0){if(d.val()==_("Enter link")){d.val("")}}if(c){Submissions.ProgressBar.init(f.val())}if(f.val()=="Photo"){if(c){jQuery.ajax({type:"POST",url:"/upload_progress.php?progress_key=init_key"})}else{jQuery("#submission_ajax_loader").show();jQuery("#submissions_bottom_area").hide()}jQuery.getScript("/include/lib/jquery/jquery.form.js",function(){jQuery("#submissions_form").ajaxSubmit({type:"post",url:b,success:function(i){if(c){Submissions.ProgressBar.finish()}try{var g=JSON.parse(i)}catch(j){var g={status:false,reason:"Some error occurred"};return}if(g.status){if(c){HuffConnect.hideModal();var h=HpImageCrop;HpImageCrop.init(g.image_id_crypted,"submission");h.Load(this.show,a.onImageCropper,this)}else{a.show_success()}}else{a.show_requirement(g.reason);if(g.sub_reason&&/incorrect-captcha-sol/.test(g.sub_reason)){if(HPAds.page_spots.submissions_captcha&&typeof(Adyoulike)!=="undefined"){jQuery("#submission_recaptcha").empty();Adyoulike.create(adyoulike_options)}else{Recaptcha.create(HPConfig.recaptcha_key,"submission_recaptcha",{theme:"red",callback:Recaptcha.focus_response_field})}}jQuery("#submission_ajax_loader, #submission_progress_bar").hide();jQuery("#submissions_bottom_area").show()}return}})});return false}jQuery("#submission_ajax_loader").show();jQuery("#submissions_bottom_area").hide();b+="&"+jQuery("#submissions_form").serialize();jQuery.ajax({type:"POST",url:b,context:a,success:a.read_response});return false});jQuery("#submission_anonymous").change(function(){Submissions.toggleForm()});if(this.type==="media"){jQuery("#submission_radio_group input").change(Submissions.radioButtonClick)}},onImageCropper:function(a){HuffConnect.hideModal();if(!a.error){var c="<div class='sm_submission_msg'>Thank you for your contribution</div>"}else{var b=(sprintf(_("Error crop image in reason : %s"),a.reason));var c="<div class='sm_submission_msg'>"+b+"</div>"}HuffConnect.socialModal({inner_html:c,width:450,modal_head_image:"",modal_subhead_image:"",position:"fixed"});setTimeout(function(){HuffConnect.hideModal()},3000);return},read_response:function(d,c,b){Submissions.ProgressBar.finish();var a=JSON.parse(d);if(!a){this.show_failure();return}if(a.status===true){this.show_success()}else{this.show_failure(a.reason,a)}},prep_message_holder_init:false,prep_message_holder:function(){if(this.prep_message_holder_init==false){jQuery("#submission_header").hide();jQuery("#submission_notify").css("visibility","hidden").show()}this.prep_message_holder_init=true},show_requirement:function(a){this.prep_message_holder();var b=a||(this.req_reason||_("Please, fill the form!"));jQuery("#submission_notify").html(b).css("visibility","visible").show();setTimeout("Submissions.Form.hide_requirement();",5000)},hide_requirement:function(){jQuery("#submission_notify").css("visibility","hidden")},show_failure:function(b,a){this.prep_message_holder();if(typeof(a.capthca_failed)!=="undefined"){jQuery("#submission_recaptcha").empty();if(HPAds.page_spots.submissions_captcha&&typeof(Adyoulike)!=="undefined"){Adyoulike.create(adyoulike_options)}else{Recaptcha.create(HPConfig.recaptcha_key,"submission_recaptcha",{theme:"red",callback:Recaptcha.focus_response_field})}}jQuery("#submission_ajax_loader").hide();jQuery("#submission_progress_bar").hide();jQuery("#submissions_bottom_area").show();b=(b?sprintf(_("Failed to submit: %s"),b):_("Failed to submit"));jQuery("#submission_notify").html(b).css("visibility","visible")},clear_failure:function(a){jQuery("#submission_notify").css("visibility","hidden")},show_success:function(){jQuery("#submission_submit").remove();jQuery("#submission_progress_bar").remove();jQuery("#submission_ajax_loader").remove();jQuery("#submission_thanks").show();setTimeout(function(){HuffConnect.hideModal()},3000)},UploadButton:{state:false,box:false,justClicked:false,getMouseCoords:function(d){if(!d.pageX&&d.clientX){var c=1;var a=document.body;if(a.getBoundingClientRect){var b=a.getBoundingClientRect();c=(b.right-b.left)/a.clientWidth}return{x:d.clientX/c+document.body.scrollLeft+document.documentElement.scrollLeft,y:d.clientY/c+document.body.scrollTop+document.documentElement.scrollTop}}return{x:d.pageX,y:d.pageY}},getBox:function(c){var e,b,d,a;var f=jQuery(c).offset();e=f.left;d=f.top;b=e+c.offsetWidth;a=d+c.offsetHeight;return{left:e,right:b,top:d,bottom:a}},init:function(){var a=this;jQuery(document).ready(function(){var b=jQuery("#submission_file_to_upload"),c=false;a.box=a.getBox(document.getElementById("submission_upload_button"));a.box_interval=setInterval(function(){a.box=a.getBox(document.getElementById("submission_upload_button"))},100);a.mouse_handler_event=function(g){var h=a.getMouseCoords(g);if((h.x>=a.box.left)&&(h.x<=a.box.right)&&(h.y>=a.box.top)&&(h.y<=a.box.bottom)){c=true;var f=b.offset();b.show();b.offset({top:h.y-5,left:h.x-185})}else{c=false;var d=setInterval(function(){if(a.justClicked){return}if(!c){b.hide()}clearInterval(d)},25)}};jQuery(document).mousemove(a.mouse_handler_event);b.change(function(){jQuery("#submission_upload_button").html(_("Selected!")).css("color","#2f7e03")});b.click(function(){a.justClicked=true;setTimeout(function(){a.justClicked=false},2500)})});this.state=true},stop:function(){if(!this.state){return}clearInterval(this.box_interval);this.box_interval=false;jQuery(document).unbind("mousemove",self.mouse_handler_event);this.state=false}}},ProgressBar:{enabled:true,salt:false,stop_flag:false,init:function(a){if(!this.enabled||a!=="Photo"){jQuery("#submissions_bottom_area").hide();jQuery("#submission_ajax_loader").show();return}jQuery("#submissions_bottom_area").hide();jQuery("#submission_progress_bar").show();this.set_progress(0);this.stop_flag=false;setTimeout("Submissions.ProgressBar.get_progress()",500)},get_salt:function(){if(!this.salt){var a=new Date();this.salt=Submissions.init_time+"|"+a.getTime()}return this.salt},get_progress:function(){jQuery.ajax({type:"POST",url:"/upload_progress.php?progress_key="+this.get_salt(),context:this,success:this.display_progress})},display_progress:function(a){if(!this.stop_flag){setTimeout("Submissions.ProgressBar.get_progress()",500)}if(!a){return}a=JSON.parse(a);if(!a){return}this.set_progress(parseInt(a.current/a.total*100))},set_progress:function(a){a=parseInt(a);if(a>100){a=100}jQuery("#submission_progress_bar_number").html(a+"%");jQuery("#submission_progress_bar_line").css("width",parseInt(a*220/100))},cancel:function(){this.stop_flag=true;this.set_progress(0)},stop:function(){this.stop_flag=true},finish:function(){this.stop_flag=true;this.set_progress(100)}},Box:{current_sid_num:false,display_sid:function(g){var h=this;if(this.current_sid_num!==false){jQuery("#submission_box_content_"+this.sids[this.current_sid_num]).hide()}if(typeof(this.sids[g])==="undefined"){return}var b=this.sids[g];if(typeof(this.data[b])==="undefined"){return}var a=this.data[b];jQuery("#submission_box_title").html(a.title);jQuery("#submission_box_title2").html(a.title2);jQuery("#submission_box_message").html(a.message);jQuery("#submission_box_content_"+b).show().css("marginTop",(a.type==1?45:0)+"px").css("marginBottom",(a.type==1?5:0)+"px");if(typeof(a.no_user)!=="undefined"){jQuery("#submission_box_user_info").hide()}else{jQuery("#submission_box_user_info").show();jQuery("#submission_box_user_photo").attr("src",a.userPic);jQuery("#submission_box_username").html("<a href='/social/"+a.userName+"'>"+a.userDisplayName+"</a>");jQuery("#submission_box_user_badge").html(a.user_badge_title);if(a.user_facebook_id){jQuery("#submission_box_facebook").html(sprintf(_("%s on Facebook"),("<a href='http://www.facebook.com/profile.php?id="+a.user_facebook_id+"' target='_blank'>"+a.userDisplayName+"</a>")))}else{jQuery("#submission_box_facebook").html("")}if(a.user_twitter){jQuery("#submission_box_twitter").html(sprintf(_("%s on Twitter"),("@<a class='twitter-anywhere-user' href='http://twitter.com/"+a.user_twitter+"' target='_hplink'>"+a.user_twitter+"</a>")))}else{jQuery("#submission_box_twitter").html("")}}var c="",k;for(k in a.user_badges){if(!a.user_badges.hasOwnProperty(k)){continue}k=a.user_badges[k];c+="<div class='user-level-icon "+k.user_type+" level-"+k.user_subtype_index+"'></div>"}jQuery("#submission_box_user_badges").html(c);this.current_sid_num=g;var d=jQuery("#submission_box_prev");if(g>0){d.show()}else{d.hide()}var f=jQuery("#submission_box_next");if(g<(this.sids.length-1)){f.show()}else{f.hide()}TwitterAnywhere.anywhere("submission_box_twitter");try{var j=this.current_sid_num;FB.api({method:"fql.query",query:"SELECT name, username FROM user WHERE uid="+a.user_facebook_id},function(e){if(h.current_sid_num!==j){return}if(e[0]&&e[0].username){jQuery("#submission_box_facebook").html(sprintf(_("%s on Facebook"),("<a href='http://www.facebook.com/"+e[0].username+"' target='_blank'>"+e[0].name+"</a>")))}})}catch(i){}},show_prev:function(){this.display_sid(this.current_sid_num-1)},show_next:function(){this.display_sid(this.current_sid_num+1)},start:function(a){this.data=a.data;this.amount_of_subs=0;this.sids=[];for(var c in a.data){if(a.data.hasOwnProperty(c)){this.amount_of_subs++;this.sids.push(c)}}var b=this;jQuery("#submission_box_prev").click(function(){b.show_prev()});jQuery("#submission_box_next").click(function(){b.show_next()});jQuery("#submission_box").show();this.display_sid(0)}}};
(function(e,n){function a(){return Math.floor(+new Date/1000)}var k,f,g=1,s,i,p=false,l=null;var m=function(){e(function(){k=e("#liveblog_container");s=k.children().length;i=h();q.call(j);b();c();d();o();p=true;if(jQuery.I18N.getLocale()=="es_ES"){e("#liveblog_heading .twttr-fw-btn").remove();e(".twitter_share").remove()}})};var j;n.HPLiveBlog=j={init:function(w,v,u){if(typeof(w/1)!="number"){throw TypeError("liveblogId param suppose to be a number")}this["blog_id"]=w;this["title"]=v||"";f=u?Math.floor(u.getTime()/1000):a();e(function(){var x="liveblog_"+w;huff.use("ws/websocket","jquery",function(y,z){y.subscribe(x)});huff.on("websocket/"+x,function(z){if(z){z=JSON.parse(z);var A=z.entry.id;var y=e("#entry_"+A);if(y.length){y.replaceWith(z.entry.html)}else{if(j.order!=="older"){e(z.entry.html).hide().prependTo("#liveblog_container").fadeIn(500)}else{e(z.entry.html).hide().appendTo("#liveblog_container").fadeIn(500)}}b();f=z.ts}});huff.on("websocket/close",function(){j.periodicalUpdate()});huff.on("websocket/error",function(){j.periodicalUpdate()})})},periodicalUpdate:function(){j.update();var u=60;setTimeout(HPLiveBlog.periodicalUpdate,u*1000)},update:function(){var u="http://"+HPConfig.current_web_address+"/ajax/liveblog/index.php?last_updated="+f+"&id="+this["blog_id"],w,v;e.getJSON(u,function(z){if(typeof z!=="object"){return false}w=z.data||[];v=z.ts||a();if(!e.isArray(w)||!w.length){return false}for(var y=w.length,x;y--;){x=k.find("#entry_"+w[y][0]);if(x.length){t.replaceWith(x,w[y][1])}else{x=t[!j.order||j.order!=="older"?"prepend":"append"](k,w[y][1])}x.hide().fadeIn(500)}b(jQuery);j.scrollContainer.length&&j.scrollbar.update();i=h();f=v;if(l){l()}typeof twttr==="object"&&twttr.widgets.load()})},loadPoll:function(u){e(function(){var v=e("#sidebar_right"),x=e("<div>",{id:"poll"}).appendTo(v);pollInner=e("div",{id:"poll-inner"});var w="http://"+HPConfig.current_web_address+"/ajax/liveblog/get_poll.php?id="+u;pollInner.appendTo(x).load(w)})},setEntriesLoadedCallback:function(u){l=u}};function h(){if(!(k&&k.children()[0])){return}return +k.children()[0].id.split("_")[1]}function d(){var u=function(x){var w=this.id.split(/_/)[1],v="http://"+HPConfig.current_web_address+"/ajax/liveblog/get_entries.php?id="+j.blog_id+"&type="+w;e("#liveblog_heading .selected").removeClass("selected");e(this).addClass("selected");e.get(v,[],function(y){t.html(k,y);j.order=w;g=1;b();if(l){l()}});return false};e("#view_new, #view_older").click(u)}function q(){this.scrollContainer=e("#liveblog_splash_scrollbar");if(this.scrollContainer.length){this.scrollbar=new HPScrollbar(k[0],this.scrollContainer[0],240)}}var t=(function(){function u(x,w,v){v=v.replace(/(<script.*?type=['"])([^'"]+)?(['"][^>]+><\/script>)/g,function(y,B,A,z){return B.replace(/<script/,"<span")+"to_insert"+z.replace(/<\/script/,"</span")});e(w).each(function(z,A){var y=A=e(A);if(x=="append"){A.append(v)}else{if(x=="prepend"){A.prepend(v)}else{if(x=="html"){A.html(v)}else{if(x=="replaceWith"){y=A.parent().get(0);A.replaceWith(v)}}}}e(y).find("span[type='to_insert']").each(function(C,D){var B=document.createElement("script");B.type="text/javascript";B.src=e(D).attr("src");e(D).parent().get(0).insertBefore(B,D);e(D).remove()})});return e(w)}return{html:function(w,v){return u("html",w,v)},append:function(w,v){return u("append",w,v)},prepend:function(w,v){return u("prepend",w,v)},replaceWith:function(w,v){return u("replaceWith",w,v)}}})();var b=(function(){var u=new Date();u.setHours(0);u.setMinutes(0);u.setSeconds(0);u.setMilliseconds(0);return function(){huff.use("strftime",function(v){e(".liveblog_entry .lb_heading").each(function(){var z=e(this),y=+(z.find("input[type=hidden]").val()/1000);var w=" "+v(__("%l:%M %p"),y);var x=(y*1000>u)?__("Today"):v(__("%m/%e/%Y"),y);z.find(".time").html('<span class="hours">'+w+'</span>&nbsp;&ndash;&nbsp;<span class="day">'+x+"</span>")})})}})();var r=function(x,w){if(typeof x!=="function"){throw TypeError("first param should be a function")}var u="http://"+n.location.host+"/ajax/liveblog/get_entries.php",v={id:j.blog_id,type:HPLiveBlog.order||"new",page:w||g};e.get(u,v,function(z){try{z=e.parseJSON(z);typeof z==="object"&&z.error&&x.call(this,false)}catch(y){x.call(this,z);w&&(g=w)||g++}})};function o(){e("#more").click(function(){var u=e(this);r(function(v){!v&&u.hide()||t.append(k,v)&&b();if(l){l()}});return false})}var c=function(){var y="scrollbars=yes,resizable=yes,toolbar=no,location=yes",v=550,K=420,C=n.screen.height,A=n.screen.width,z=Math.round((A/2)-(v/2)),J=C>K?Math.round((C/2)-(K/2)):0;urlsCache={};function B(M,N){var M=M.replace(/\/mobileweb/,"");if(urlsCache[M]){N(urlsCache[M]);return}var L={login:HPConfig.bit_ly_key.user_name,apiKey:HPConfig.bit_ly_key.user_key,longUrl:M};e.getJSON("http://api.bit.ly/v3/shorten?callback=?",L,function(P){var O="";if(P&&P.status_code&&P.status_code==200){O=P.data.url}else{O=M}N(O);urlsCache[M]=O})}function x(L){n.open(L,"intent",y+",width="+v+",height="+K+",left="+z+",top="+J)}function G(){var M=this.alt;function L(O){var P=e(".liveblog_entry.liveblog_permalink .lb_heading .lb_title").html(),U=(M?M+"—":"")+(P||""),N=HPConfig.twitter_signature||"@huffingtonpost",T=__("%1$s live updates on %2$s %3$s",U,N,O),S=new RegExp(N+"*","i");T.length>140&&(T=T.replace(S,""));var R=jQuery.I18N.getLocale().substr(0,2);var Q=(R=="en")?"com":R;x("http://twitter.com/intent/tweet/?lang="+R+"&text="+encodeURIComponent(T))}B(this.href,L);return false}function I(){var M=e(".liveblog_entry.liveblog_permalink .lb_heading .lb_title").html();var N="http://"+HPConfig.current_web_domain+"/hpfb/?r=false&link_to=permalink&object=article&id="+HPConfig.entry_id+"&t="+encodeURIComponent(M)+"&u="+encodeURIComponent(this.href);var L={method:"stream.share",u:this.href,name:M,display:"popup"};function O(P){location.href=location.href}FB.ui(L,O)}function E(){id=e(this).attr("entity_id");var P="quote",R=e(".liveblog_entry.liveblog_permalink"),S=this.href,Q=encodeURIComponent('<a href="'+S+'">'+e(".lb_heading .lb_title",R).html()+"</a>"),O=encodeURIComponent(e(".lb_body",R).html()),L=encodeURIComponent('<a href="'+S+'">'+e(".lb_heading .lb_title",R).html()+"</a>"),M=encodeURIComponent(e(".lb_body",R).html()),T=encodeURIComponent(e("#liveblog_container").data("tags"));tweet=encodeURIComponent(S);var N="http://www.tumblr.com/share?type="+(P?P:"")+"&source="+(L?L:"")+"&quote="+(M?M:"")+"&tags="+(T?T:"")+"&language="+jQuery.I18N.getLocale()+"&tweet="+(tweet?tweet:"");PopupManager.open(N,500,450);return}k.delegate(".twitter_share","click",G).delegate(".facebook_share","click",I).delegate(".tumblr_share","click",E);function H(M){var M=M||location.hash;M=M.replace(/[^a-zA-Z0-9=_-]/g,"");var L=e('a[name="'+M+'"]');L.attr("name",M+"-tmp");window.location.hash=M;L.attr("name",M)}var u="liveblog_permalink",w=(function(){var L=e("body"),Q=e(document),N,R,P,O;function M(){O.removeClass(u);e(".share_marker",O).removeClass("selected").show();R.remove();P.remove();N.fadeOut(700,function(){e(this).remove();e(".topnav_first_row > ul").css("position","relative")});return false}return function(U,T){U=e(U);T=typeof T==="undefined"?true:T;H(U.attr("name"));if((!U.length||isNaN(parseInt(U.attr("name"))))){return false}O=U.parents(".liveblog_entry").addClass(u).removeClass("selected");e(".share_marker",O).hide();N=e("<div>").addClass("liveblog_overlay").hide().appendTo("#liveblog_container").fadeIn(300).click(M);e(".topnav_first_row > ul").css("position","static");P=e("<a>").attr("href","#").appendTo(O).addClass("permalink_close").click(M);var V=e('<input type="text" class="liveblog_permalink" readonly id="permalink_'+U[0].name+'"/>'),S=e("<label>").attr("for","permalink_"+U[0].name).html("<span>"+jQuery.I18N.gettext("Link to this")+":</span>").append(V).appendTo(O);R=S.wrap('<div class="permalinks">');B(U[0].href,function(X){V.val(X).click(function(){this.select()})});L.one("keyup",function W(X){X.keyCode===27?M():L.one("keyup",W)});T&&e("body,html").animate({scrollTop:U.offset().top-50},"slow");return true}}());function F(M){matches=/^\d+/.exec(M);var L=matches!==null?matches[0]:-1;if(L<=1){return false}var N=Math.ceil((i-L)/s);N>1&&r(function(O){t.append(k,O);b();w(e("a[name = "+M+"]"));if(l){l()}},N-1)}var D=n.location.hash.substr(1).replace(/[^a-zA-Z0-9_-]/g,"");if(D.length&&D!=="liveblog"){if(!w("a[name="+D+"]")){F(D)}}k.delegate(".liveblog_entry","click",function(L){if(e.inArray(L.target.tagName.toLowerCase(),["a","object","embbed"])!==-1){return true}var M=e(this);M.hasClass(u)||w(M.find("a[name]")[0],false);return false});k.delegate(".liveblog_entry","mouseenter",function(){var L=e(this);L.hasClass(u)||e(".share_marker",L).addClass("selected")&&L.addClass("selected")});k.delegate(".liveblog_entry","mouseleave",function(){var L=e(this);L.hasClass(u)||e(".share_marker",L).removeClass("selected")&&L.removeClass("selected")})};!p&&m()})(jQuery,window);
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var HpImageCrop=function(a,b){this.item_id_crypted=null;this.type="slideshow";this.back_callback=undefined;this.end_callback=undefined;this.scope=undefined;this.image_width=0;this.image_height=0};HpImageCrop.init=function(a,b){this.item_id_crypted=a;this.type=b||"slideshow"};HpImageCrop.RemoveReuploadCallback=function(){jQuery("#imagecrop_reupload_submit_loader1").css("display","none")};HpImageCrop.Reload=function(){this.RemoveReuploadCallback();this.Load(this.back_callback,this.end_callback,this.scope)};HpImageCrop.Load=function(a,d,b){var c=this;this.back_callback=a;this.end_callback=d;b=b||this;this.scope=b;if(HuffCookies.getUserName()){HuffConnect.socialModal({url:"/imagecrop_front/index.php?item_id_crypted="+this.item_id_crypted+"&"+Math.random(),onshow:function(e){jQuery(document.body).addClass("yui-skin-sam");c.onLoadSuccess(e,a,d,b)},width:840,inner_wrapper_class:"snn_slideshow_participation align_left"})}else{QuickLogin.onLoginSuccess=function(){c.Load()};QuickLogin.pop();return}};HpImageCrop.Close=function(){HuffConnect.hideModal()};HpImageCrop.EndCropping=function(b){jQuery("#imagecrop_submit_loader1").css("display","none");if(this.end_callback){var a=JSON.parse(b.responseText);end_callback.apply(this.scope,[a])}};HpImageCrop.onLoadSuccess=function(g,b,e,d){if(this.type=="submission"){jQuery("#back_button2").css("display","none");jQuery("#reupload_image").css("display","none");jQuery("#submit_photo").addClass("button medium white")}var c=this;jQuery("#back_button2, #reupload_image, #submit_photo, #reupload_image2").bind("click",function(n){switch(this.id){case"back_button2":if(b){b.apply(d,[{item_id_crypted:c.item_id_crypted}])}break;case"reupload_image":case"reupload_image2":jQuery("#yui_reupload_form").css("display","block");return false;break;case"submit_photo":jQuery("yui_reupload_form").css("display","none");jQuery("#imagecrop_submit_loader1").css("display","inline");var j=jQuery("#w").val();var m=jQuery("#scale").val().replace(",",".");var l=j>0?parseInt(jQuery("#w").val()/m):jQuery("#image_width").val();var o=j>0?parseInt(jQuery("#h").val()/m):jQuery("#image_height").val();var i=j>0?parseInt(jQuery("#t").val()/m):0;var p=j>0?parseInt(jQuery("#l").val()/m):0;var k="&h="+o+"&step="+jQuery("#step").val()+"&w="+l+"&t="+i+"&l="+p;jQuery.ajax({url:"/imagecrop_front/index.php?item_id_crypted="+c.item_id_crypted+k+"&"+Math.random(),type:"POST",success:function(r){jQuery("#imagecrop_submit_loader1").css("display","none");if(e){var q=JSON.parse(r);e.apply(d,[q])}},failure:function(q){jQuery("#imagecrop_submit_loader1").css("display","none");c.Close();HPError.e()},timeout:10000});break}});if(b){jQuery("back_button2").css("display","inline")}jQuery("#yui_cropper").bind("submit",function(i){this.action+="&"+Math.random();jQuery("yui_reupload_form").css("display","none");jQuery("#imagecrop_submit_loader1").css("display","inline");return false});jQuery("#yui_reupload").bind("submit",function(i){if(""==jQuery("#yui_file_reupload").val()){alert(_("Please select file for uploading"));return false}this.action+="&"+Math.random();jQuery("#imagecrop_reupload_submit_loader1").css("display","inline")});var f=jQuery("#scale").val();var h=parseInt(550*f);var a=parseInt(400*f);huff.css("jquery/jquery.Jcrop");jQuery.getScript("/include/lib/jquery/jquery.Jcrop.min.js",function(){jQuery("#yui_img").Jcrop({onSelect:c.showCoords,onChange:c.showCoords,bgColor:"black",bgOpacity:0.4,setSelect:[0,0,h,a],minSize:[h,a],aspectRatio:1.375})})};HpImageCrop.showCoords=function(a){jQuery("#t").val(a.y);jQuery("#l").val(a.x);jQuery("#h").val(a.h);jQuery("#w").val(a.w)};HpImageCrop.onLoadFail=function(a){HPError.e();this.hideMask()};
(function(c){function j(){var a,e={height:window.innerHeight,width:window.innerWidth};if(!e.height)if((a=document.compatMode)||!c.support.boxModel){a=a=="CSS1Compat"?document.documentElement:document.body;e={height:a.clientHeight,width:a.clientWidth}}return e}setInterval(function(){var a=[],e,g=0;c.each(c.cache,function(){if(this.events&&this.events.inview)if(this.events.live){var k=c(this.handle.elem);c.each(this.events.live,function(){a=a.concat(k.find(this.selector).toArray())})}else a.push(this.handle.elem)});
if(e=a.length){viewportSize=j();for(viewportOffset={top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft};g<e;g++)if(c.contains(document.documentElement,a[g])){var f=c(a[g]),d={height:f.height(),width:f.width()},b=f.offset(),h=f.data("inview"),i;if(b.top+d.height>b.top&&b.top<viewportOffset.top+viewportSize.height&&b.left+d.width>viewportOffset.left&&b.left<viewportOffset.left+viewportSize.width){i=
viewportOffset.left>b.left?"right":viewportOffset.left+viewportSize.width<b.left+d.width?"left":"both";d=viewportOffset.top>b.top?"bottom":viewportOffset.top+viewportSize.height<b.top+d.height?"top":"both";b=i+"-"+d;if(!h||h!==b)f.data("inview",b).trigger("inview",[true,i,d])}else h&&f.data("inview",false).trigger("inview",[false])}}},250)})(jQuery);
(function(c){var b=function(f){var e=f.match(/(\d+).html$/);if(e&&e.length>1){return e[1]}return null};var a=function(e){if(e){return document.URL}return[location.protocol,"//",location.host,location.pathname].join("")};var d=function(){var f=null;var e=document.activeElement;if(window.getSelection&&e){if(c.inArray(e.nodeName,["TEXTAREA","INPUT"])!=-1){f=e.value.substring(e.selectionStart,e.selectionEnd)}else{f=window.getSelection().toString()}}else{f=document.getSelection?document.getSelection().toString():document.selection.createRange().text}return f};c.fn.quoteable=function(f){var i=function(k,o,m){if(!f.service){return}var l=a(true);var j=b(l);if(!j){return}var n=c.get(f.service,{"snippet[entity]":j,"snippet[text]":k,"snippet[referer]":l,"snippet[explicit]":false},function(q,p){if(q.success){o(q)}else{m(q)}},"jsonp");n.fail(function(){m(false)})};var e=function(){};var g=function(j){};var h=function(j){j=c.trim(j);if(f.minlength!==null&&j.length<f.minlength){return null}if(f.maxlength!==null&&j.length>f.maxlength){return null}return j};f=c.extend({service:null,handler:i,success:e,failure:g,prepare:h,minlength:null,maxlength:null,sample:null},f);this.each(function(){var j=c(this);j.bind("copy",function(l){if(f.sample!==null&&Math.random()>f.sample){return true}var k=f.prepare(d());if(!k){return true}f.handler(k,f.success,f.failure)})});return this}})(jQuery);
huff.unit("highlights",function(a){huff.use("jquery",function(b){b.fn.HPhighlight=function(f,j,h){patternFound=false;function k(q,l){var p=[],o=/^\s*$/;function m(u){if(u.nodeType==3){if(l||!o.test(u.nodeValue)){p.push(u)}}else{for(var s=0,r=u.childNodes.length;s<r;++s){m(u.childNodes[s])}}}m(q);return p}function d(l){return(l.length>0)}function e(o,l){if(patternFound){return}txtNodes=k(o);allTokens=[];for(i=0;i<txtNodes.length;i++){txt=txtNodes[i].data;tokens=txt.replace(/\s\s+/g," ").split(" ").filter(d);idx=0;for(t=0;t<tokens.length;t++){startIdx=txt.indexOf(tokens[t],idx);allTokens.push({value:tokens[t].toUpperCase(),nodeIdx:i,startIdx:startIdx});idx=startIdx+tokens[t].length+1}}patTokens=l.split(" ").filter(d);firstToken=patTokens[0].replace(/[^a-zA-Z0-9]+/g,"").toUpperCase();lastToken=patTokens[patTokens.length-1].replace(/[^a-zA-Z 0-9]+/g,"").toUpperCase();for(t=0;t<allTokens.length;t++){if(allTokens[t].value.replace(/[^a-zA-Z 0-9]+/g,"")==firstToken){estLastTokenIdx=t+patTokens.length-1;for(v=-1;v<=1;v+=2){for(i=0;i<=5;i++){idx=estLastTokenIdx+(i*v);if(idx>=0&&idx<allTokens.length&&allTokens[idx].value.replace(/[^a-zA-Z 0-9]+/g,"")==lastToken){patternFound=true;startToken=allTokens[t];endToken=allTokens[idx];break}}if(patternFound){break}}if(patternFound){break}}}if(patternFound){for(i=startToken.nodeIdx;i<=endToken.nodeIdx;i++){n=txtNodes[i];start=(i==startToken.nodeIdx)?startToken.startIdx:0;end=(i==endToken.nodeIdx)?endToken.startIdx+endToken.value.length:n.data.length;var q=document.createElement("span");q.className="hl_text";q.setAttribute("data-id",j);q.setAttribute("data-score",h);var p=n.splitText(start);var m=p.splitText(end-start);var r=p.cloneNode(true);q.appendChild(r);n.parentNode.replaceChild(q,p)}}}try{return this.each(function(){e(this,f)})}catch(g){}};var c=this;c.constants={highlights_limit:5,vertical_id:"",vertical_name:"",vertical_color:"#0088C3",entry_id:"",rotation_speed:10000,min_highlight_size:50,highlight_this_timeout:8000,entry_text_classname:".articleBody",enable_hl:0};c.highlights=new Array();c.entry_highlights=new Array();c.urls={entry:"",author:"",home:"http://labs.huffingtonpost.com/highlights/#list/verticals/",api_endpoint:"http://labs.huffingtonpost.com/highlights/processed_snippets/index.json",send_api_endpoint:"http://labs.huffingtonpost.com/highlights/snippets/create.json"};c.current=0;c.selection="";c.init=function(d){if(b(this.constants.entry_text_classname).length==0){this.constants.entry_text_classname=".entry_body_text"}this.constants.entry_id=HPConfig.entry_id;this.constants.vertical_id=HPConfig.current_vertical_id;this.constants.vertical_name=HPConfig.current_vertical_name;this.constants.enable_hl=d;this.get_highlights(false);this.get_entry_highlights();b("#huffhighlights_logo, .hl_flyout .btn").click(function(){location.href=c.urls.home});b("#huffhighlights_text").click(function(){if(c.urls.entry!=undefined){location.href=c.urls.entry}});b("#huffhighlights_author").click(function(){if(c.urls.author!=undefined){location.href=c.urls.author}});b(".huffhighlights_control").live("click",function(){var e=b(this).data("id")-1;c.show(e)});b(".hl_flyout").appendTo("body");b(".highlight_this").appendTo("body");b(".hl_text").live("click",function(f){var g=b(this).data("score");b("#huffhighlights_popup_score").html(g);b(".highlight_thank_you").css("display","none");if(g>=8){b(".highlight_score").css("display","block")}else{b(".highlight_score").css("display","none")}c.show_popup(f)});b(".hl_flyout").mouseleave(function(){b(this).fadeOut("fast")});b(".close-flyout").click(function(){b(".hl_flyout").fadeOut("fast")});b(".highlight_this button").click(function(f){b(".highlight_this").hide();c.add_highlight();b(".highlight_score").css("display","none");b(".highlight_thank_you").css("display","block");c.show_popup(f)});b("#huffhighlights").hover(function(){c.rotation=clearInterval(c.rotation)},function(){c.rotation=setInterval(c.show,c.constants.rotation_speed)})};c.show=function(e){if(e==undefined){e=(c.current==c.highlights.length-1)?0:c.current+1}var d=c.highlights[e];b("#huffhighlights_main").fadeOut("slow",function(){b("#huffhighlights_text").html(d.text);b("#huffhighlights_author").html(d.entity.authors[0].name);if(d.text.length>120){b("#huffhighlights_text").addClass("huffhighlights_long")}else{b("#huffhighlights_text").removeClass("huffhighlights_long")}b("#huffhighlights_main").fadeIn("slow")});c.urls.entry=d.url;c.urls.author=d.entity.authors[0].url;c.current=e;b(".huffhighlights_control").removeClass("active");b("#huffhighlights_controls").find("[data-id='"+(e+1)+"']").addClass("active")};c.apply_highlights=function(){var e=c.entry_highlights;for(var d=0;d<e.length;d++){var h=e[d]._id;var g=e[d].text;var f=e[d].n_highlights;b(c.constants.entry_text_classname).HPhighlight(g,h,f)}};c.get_selected=function(){var h="";var k="";var e="";var f="top";if(window.getSelection){h=window.getSelection();k=h.toString()}else{if(document.getSelection){h=document.getSelection();k=h.toString()}else{if(document.selection){h=document.selection.createRange();k=h.text}}}if(k==""){return false}e=(e=="")?h.getRangeAt(0):e;var g=document.createElement("span");var j=b.trim(k);if(b.browser.mozilla){f="top"}else{if((j==k)&&(e.endOffset>0)&&(e.startOffset>0)){e.collapse(false);f="bottom"}}e.insertNode(g);var d=b(g).offset();g.parentNode.removeChild(g);return{position:d,text:j,mode:f}};c.show_popup=function(g){var f=g.pageY-b(".hl_flyout").height()+30;var d=b(window).scrollTop()+10;b(".hl_flyout").css("top",Math.max(f,d)+"px");b(".hl_flyout").css("left",g.pageX-b(".hl_flyout").width()/2+"px");b(".hl_flyout").fadeIn("fast")};c.get_highlights=function(d){var e={length_max:240,limit:c.constants.highlights_limit,use_moderated:"true",score_wilson_min:0.001};if(!d){e.verticals=c.constants.vertical_id}b.ajax({url:c.urls.api_endpoint,data:e,dataType:"jsonp",cache:true,jsonpCallback:"hlVertical",success:function(g){if(g.success){if(g.count<c.constants.highlights_limit){if(!d){c.get_highlights(true)}else{return false}}c.highlights=g.snippets;var f=g.snippets[0]["entity"]["vertical_color"];if(f==""){f=c.constants.vertical_color}b("#huffhighlights_more_vertical").html(c.constants.vertical_name);b("#huffhighlights_more a").attr("href",c.urls.home+c.constants.vertical_id);b("#huffhighlights_author").css("color",f);b("#huffhighlights_more").css("background",f);c.show(0);b("#huffhighlights").show();c.rotation=setInterval(function(){c.show()},c.constants.rotation_speed)}}})};c.get_entry_highlights=function(){var d={length_max:240,limit:c.constants.highlights_limit,entities:c.constants.entry_id,use_moderated:"true",score_wilson_min:0.001};b.ajax({url:c.urls.api_endpoint,data:d,dataType:"jsonp",cache:true,jsonpCallback:"hlEntry",success:function(e){if(e.success&&e.count>0){c.entry_highlights=e.snippets;if(c.constants.enable_hl){c.apply_highlights()}}}})};c.add_highlight=function(){if(c.selection.length==0){return false}var d={"snippet[entity]":c.constants.entry_id,"snippet[text]":c.selection,"snippet[referer]":HPConfig.current_web_domain+HPConfig.current_uri,"snippet[explicit]":"true"};b.ajax({url:c.urls.send_api_endpoint,data:d,dataType:"jsonp",success:function(e){console.log("Message sent successfully!")}})};a(c)})});
jQuery(function(b){var c={el:".mod-follow form.subscribe",init:function(){this.$el=b(this.el);this.$el.submit(b.proxy(this.subscribe,this));b(".mod-follow .tabs-control > li").append('<div class="icon-pointer">')},subscribe:function(d){d.preventDefault();if(!this.validate()){return false}var e={email:this.$el.find('[name="email"]').val()};this.$el.find('input.list[type="checkbox"]').each(function(g,h){var f=b(h).attr("name");e[f]=b(h).is(":checked")?1:0});this.$el.find('input[type="hidden"]').each(function(g,h){var f=b(h).attr("name");e[f]=b(h).val()});b.ajax({url:"/ajax/newsletter/rightrail/subscribe.php",type:"POST",data:e,dataType:"json",success:b.proxy(this.success,this),failure:b.proxy(this.failure,this)})},validate:function(){var d=this.$el.find('[name="email"]');if(!d.val()||d.val()==d.attr("placeholder")){d.focus();return false}return true},success:function(d){if(d.error){return}this.$el.html(d.message)},failure:function(){this.$el.html(_("An error occurred, please try in few minutes")+".")}};var a={init:function(){b(".tabs").unbind().each(function(){b(".tabs-control",this).delegate(".tabs-control > li","click",function(d){b(this).addClass("active").siblings().removeClass("active");b(".tabs-content > li",b(this).parents(".tabs:first")).hide().eq(b(d.currentTarget).index()).show();return false})});b(".tabs .tabs-control li:first-child").trigger("click")}};a.init();c.init()});
var PopupManager={popup_window:null,interval:null,interval_time:80,onClose:null,onCloseParams:null,waitForPopupClose:function(){if(PopupManager.isPopupClosed()){PopupManager.destroyPopup();if("function"==typeof(PopupManager.onClose)){PopupManager.onClose(PopupManager.onCloseParams);PopupManager.onClose=null}}},destroyPopup:function(){this.popup_window=null;window.clearInterval(this.interval);this.interval=null;this.callback=null},isPopupClosed:function(){return(!this.popup_window||(this.popup_window.closed===true||typeof(this.popup_window.closed)==="undefined"))},open:function(b,c,a){b=HuffPoUtil.trim(b);this.popup_window=window.open(b,"_blank",this.getWindowParams(c,a));this.popup_window.name="hp_popup_"+new Date().getTime();this.interval=window.setInterval(this.waitForPopupClose,this.interval_time);if(!this.popup_window||this.popup_window.closed){alert("Please accept the pop-up for this, check your pop-up blocker");return false}return this.popup_window},getWindowParams:function(c,b){var a=this.getCenterCoords(c,b);return"width="+c+",height="+b+",status=1,location=1,resizable=yes,left="+a.x+",top="+a.y},getCenterCoords:function(b,a){var f=this.getParentCoords();var e=this.getWindowInnerSize();var d=f.width+Math.max(0,Math.floor((e.width-b)/2));var c=f.height+Math.max(0,Math.floor((e.height-a)/2));return{x:d,y:c}},getWindowInnerSize:function(){var a=0;var b=0;if("innerWidth" in window){a=window.innerWidth;b=window.innerHeight}else{var c=null;if(("BackCompat"===window.document.compatMode)&&("body" in window.document)){c=window.document.body}else{if("documentElement" in window.document){c=window.document.documentElement}}if(c!==null){a=c.offsetWidth;b=c.offsetHeight}}return{width:a,height:b}},getParentCoords:function(){var a=0;var b=0;if("screenLeft" in window){a=window.screenLeft;b=window.screenTop}else{if("screenX" in window){a=window.screenX;b=window.screenY}}return{width:a,height:b}}};
var social_campaign=false;var social_campaign_ref_param="comm_ref";var social_creative_ref_param="comm_crv";function Badges(a){this.unique_id="";if(a.unique_id){this.unique_id=a.unique_id}this.lazy_slices=[];this.holders={};this.holder_id="";this.holder=false;if(a.holder_id){this.holder_id=a.holder_id;this.holder=document.getElementById(this.holder_id);if(!this.holder){this.holder=false}}document.getElementById(this.holder_id);this.entry_params={};if(a.entry_params){this.entry_params=a.entry_params}if(!this.entry_params.hasOwnProperty("url")){this.entry_params.url=window.location.href}this.comment_params={};if(a.comment_params){this.comment_params=a.comment_params}this.global_object_name="";if(a.global_name){this.global_object_name=a.global_name}this.force_link_to_share=false;if(a.force_link_to_share){this.force_link_to_share=a.force_link_to_share}this.complete_callback_func_name=false;if(a.complete_callback_func_name){this.complete_callback_func_name=a.complete_callback_func_name}this.complete_callback=false;if(a.complete_callback){this.complete_callback=a.complete_callback}this.share_details_callback=false;if(a.share_details_callback){this.share_details_callback=a.share_details_callback}this.additional_panel_classes="";if(a.additional_panel_classes){this.additional_panel_classes=a.additional_panel_classes}this.panel_layout=1;if(a.panel_layout){this.panel_layout=a.panel_layout}this.human_readable=0;if(a.human_readable){this.human_readable=1}this.slices={};this.slice_params={};this.panel_border_style="standard";this.redirect_domains=[];this.redirect_domains.push("www.aol.com");this.slices_id=[];this.prev_amounts=[];this.current_amounts=[];this.current_delta=[0,0,0,0];if(HPConfig.inst_type==="dev"){this.share_badges_test=0}this.layout_bottom=false;if(a.hasOwnProperty("layout_bottom")){this.layout_bottom=a.layout_bottom}HPFB.ensureInit(function(){var b=function(f,d,e){var c=HPUtil.GetEntryID(d);if("Liked"==f||"Recommended"==f){Badges.trackShare({eid:c,badge:"fblike"});SNProject.track(c,"entry_like")}else{if("Uniked"==f||"Unecommended"==f){SNProject.track(c,"entry_unlike")}}return{module:Badges.getModuleName()}};HPFB.Tracking.Subscribe(["Liked","Unliked","Recommended","Unrecommended"],["badges"],true,b)})}Badges.getModuleName=function(a){var b="Badges";if("undefined"!==typeof a&&"undefined"!==typeof a.badge_version&&2==a.badge_version){b="Badges v2"}if(a&&a.hasOwnProperty("layout_bottom")&&a.layout_bottom){b+=" - Bottom"}return b};Badges.trackEvent=function(a){var b=Badges.getModuleName(a);HPTrack.trackEvent(b,a.action,a.label)};Badges.trackedShares=[];Badges.trackShare=function(c){var a=c.badge;var b=c.eid;if(!(a&&b)){return}if(-1===jQuery.inArray(a,Badges.trackedShares)){var g="";if("undefined"!=typeof(HPAds)){g=HPAds.get_banners_str()}jQuery.getJSON("/include/share_track.php?a=post&eid="+b+"&b="+a+"&banners="+g);Badges.trackedShares.push(a);try{var d="";if("facebook"===a){d="fb_share"}else{if("fblike"===a){d="fb_like"}else{if("twitter"===a){d=a}else{if("email"===a){d=a}else{if("meneame"===a){d=a}else{if("hatena"===a){d=a}}}}}}if(d){bN.set("dL_shareType",d,1);bN.set("dL_shareURL",escape(window.location.href),1);bN.ping("aol-share")}}catch(f){}}};Badges.getUniqName=function(){if(typeof(this.last_uniq_id)==="undefined"){this.last_uniq_id=0}this.last_uniq_id++;var c=new Date();var b={};var a=Math.floor((c.getTime()/(6000*12*5)));b.unique_id=a+"_"+this.last_uniq_id;b.obj_name="Badges_"+b.unique_id;return b};Badges.getInstance=function(a){if(!a){return false}if(!a.badge_div_id){return false}a.force_class=a.use_glamorous||false;var d=Badges.getUniqName();a.is_glamorous=a.is_glamorous||false;window[d.obj_name]=new Badges({unique_id:d.unique_id,holder_id:a.badge_div_id,complete_callback_func_name:"",share_details_callback:false,additional_panel_classes:"",entry_params:{id:a.entry_id,url:a.entry_url,title:a.entry_title,vertical_name:a.vertical_name},global_name:"window."+d.obj_name});var c={1:"facebook_glamorous",2:"retweet_glamorous",3:"email_glamorous",4:"google_plusone_glamorous",5:"linkedin_glamorous",6:"pinterest_glamorous",7:"meneame_glamorous",8:"hatena_glamorous"};if(jQuery.browser.mozilla&&(jQuery.browser.version<="1.9.2")||(jQuery.browser.safari&&(jQuery.browser.version<="526.12.2"))){c[4]="comment_glamorous"}if(typeof(a.active_badges)!=="undefined"){c={};for(var b=0;b<a.active_badges.length;b++){c[b+1]=a.active_badges[b]}}window[d.obj_name].setPanelBorderStyle(a.force_class||"glamorous_4");window[d.obj_name].setSlices(c);window[d.obj_name].panel_layout=8;Badges.launch(a.badge_div_id,d)};Badges.launch=function(a,b){jQuery("#"+a).ready(function(){window[b.obj_name].start()})};Badges.prototype={};Badges.prototype.setPanelBorderStyle=function(a){this.panel_border_style=a};Badges.prototype.setSlices=function(a){this.slices=a};Badges.prototype.getSlices=function(){return this.slices};Badges.prototype.applyHolderStyle=function(){var a=jQuery(this.holder);a.addClass("badges_v2 "+this.panel_border_style+" "+this.additional_panel_classes);this.entry_params.force_fb_like&&a.addClass("fb_like_contain");a.addClass("badge_layout_"+this.panel_layout);HPConfig.blog_id==3&&this.panel_layout==10&&a.addClass("v2")};Badges.prototype.getShareArticleTitle=function(){var a=this.entry_params.title;return escape(a)};Badges.prototype.getArticleLink=function(c,d){var b=this.entry_params.url;if(c){b=HuffPoUtil.AddStringToQueryString(b,c)}if(typeof social_campaign!=="undefined"){b=HuffPoUtil.AddStringToQueryString(b,social_campaign_ref_param+"="+social_campaign);if((typeof social_campaign_creative!=="undefined")&&(typeof social_campaign_creative.facebook!=="undefined")){b=HuffPoUtil.AddStringToQueryString(b,social_creative_ref_param+"="+social_campaign_creative.facebook)}}var a=HuffCookies.getUserId();if(a&&d){b+="#sb="+a+",b="+d}return escape(b)};Badges.prototype.getCommentLink=function(c,d){var b=this.comment_params.url;if(c){b=HuffPoUtil.AddStringToQueryString(b,c)}var a=HuffCookies.getUserId();if(a&&d){b+="#sb="+a+",b="+d}return escape(b)};Badges.prototype.getShareArticleLink=function(a,b){if(this.force_link_to_share){return this.force_link_to_share}return this.getArticleLink(a,b)};Badges.prototype.getShareCommentLink=function(a,b){if(this.force_link_to_share){return this.force_link_to_share}return this.getCommentLink(a,b)};Badges.prototype.getShareCommentData=function(){var a={title:"",link:""};if(!this.share_details_callback){return a}var b=window[this.share_details_callback](a);if(!b){return a}return b};Badges.prototype.slicesCallback=function(cb_params){var me,func_name,slice_holder_id,i,slice_name;if(typeof(cb_params)!=="object"){return}me=eval(cb_params.global_name);for(i=0;i<cb_params.slice_names.length;i++){slice_name=cb_params.slice_names[i];func_name="sliceHandler_"+slice_name;if(typeof(me[func_name])=="function"&&cb_params.slice_params[slice_name]){slice_holder_id=me.slice_params[slice_name].slice_holder_id;me[func_name](slice_holder_id,cb_params.slice_params[slice_name])}}if(me.comment_params&&me.comment_params.id){jQuery(".hp_network_badge").html("");jQuery(".hp_network_badge").each(function(){var className=jQuery(this).attr("class");if(className.indexOf("facebook")!==-1){jQuery(this).addClass("no_count_facebook_badge comment_share_badge")}else{if(className.indexOf("retweet")!==-1){jQuery(this).addClass("no_count_retweet_badge comment_share_badge")}else{if(className.indexOf("stumble")!==-1){jQuery(this).addClass("no_count_stumble_badge comment_share_badge")}}}});return}};Badges.prototype.start=function(){if(!this.holder){return false}this.applyHolderStyle();var c,o,v,l,u,h,n,s,j=[];for(c in this.slices){if(this.slices.hasOwnProperty(c)){v=this.slices[c];l=this.holder_id+"_slice_"+c;this.slice_params[v]={slice_holder_id:l};o=document.createElement("div");o.setAttribute("id",l);jQuery(o).addClass("slice slice_"+c);this.holder.appendChild(o);h="sliceHandler_"+v+"_needParams";if(typeof(this[h])!=="undefined"){this.lazy_slices.push(v)}else{n="sliceHandler_"+v;if(typeof(this[n])=="function"){this[n](l,false)}}j.push(v.substr(0,2))}}var f="";if(this.lazy_slices.length>0){var r="";for(s=0;s<this.lazy_slices.length;s++){if(r!==""){r+=","}r+=this.lazy_slices[s]}u=document.createElement("script");u.setAttribute("type","text/javascript");this.holder.appendChild(u);f="/badge/badges_json_v2.php?sn="+r+"&gn="+this.global_object_name+"&eu="+this.getArticleLink()+"&id="+this.entry_params.id+"&ebi"+HPConfig.blog_id+"&entry_design="+HPConfig.entry_design+"&cb="+this.global_object_name+".slicesCallback&ng="+((HPConfig.ipad_application===true)?1:0);if(typeof(this.comment_params.id)!=="undefined"){f+="&cd="+this.comment_params.id+"&cu="+this.comment_params.url}for(s=0;s<this.redirect_domains.length;s++){if(this.redirect_domains[s]==HPConfig.current_web_domain){f="http://www.huffingtonpost.com"+f;break}}u.setAttribute("src",f)}if(this.complete_callback_func_name){window[this.complete_callback_func_name]({badge_object:this,badge_holder_id:this.holder_id})}if(this.complete_callback){this.complete_callback({badge_object:this,badge_holder_id:this.holder_id})}var b="badges_v1";if(this.panel_layout==8){b="badges_v2"}HPTrack.Module.Impressions.queue(b+"/"+j.join("_"));if(this.comment_params&&this.comment_params.id){return}if(f.length>0&&false){var t=".slicesCallback";var d=".slicesAmount_badges_glamorous";f=f.replace(new RegExp(t,"g"),d);var p=0,k=0;slices_id=this.slices_id;var q=this;var m=function(w,y){p+=1;if(typeof w!=="undefined"){for(s=0;s<w.length;s++){var i=y[s];if(isNaN(i)){i=0}i+=Math.floor(p*w[s]);jQuery("#"+slices_id[s]).html(HuffPoUtil.number_format(i))}}};var e=function(i){if(HPConfig.inst_type==="dev"){this.share_badges_test=getEmulData()}jQuery.getScript(f);p=0;if(typeof i!=="undefined"){clearTimeout(a)}var y=function(){clearInterval(k);k=setInterval(m,1000,this.current_delta,this.current_amounts)};var w=this;var z=function(){y.apply(w,[])};setTimeout(z,2000)};var g=function(){e.apply(q,[])};var a=setTimeout(g,30000);setInterval(g,60000,true)}return true};Badges.prototype.HpBuildIfr=function(b,c,d){var a=document.createElement("iframe");a.height=c;a.width=b;a.src=d;a.frameBorder="0";a.scrolling="no";a.style.border="0px";a.setAttribute("frameBorder","0");return a};Badges.prototype.newWindow=function(c,d,a,b,g){d=d||750;a=a||325;b=b||(screen.width/2)-(d/2);g=g||(screen.height/2)-(a/2)-150;var e="scrollbars=0,width="+d+",height="+a+",top="+g+",left="+b;var f=window.open(c,"badge_v2_share_window",e);f.focus();return f};Badges.prototype.trackBadgeClick=function(c){var f=c.slice_name;if(typeof(c.badge_version)==="undefined"){c.badge_version=1}var e=function(g){g=g.charAt(0).toUpperCase()+g.substr(1);if(g=="retweet"){g="Twitter"}else{if(g=="retweet_glamorous"){g="Twitter"}else{if(g=="pinterest"){g="Pinterest"}else{if(g=="pinterest_glamorous"){g="Pinterest"}else{if(g=="meneame"){g="Meneame"}else{if(g=="meneame_glamorous"){g="Meneame"}else{if(g=="hatena_glamorous"){g="Hatena"}}}}}}}return g};var b=function(g){if(g=="retweet"){return"twitter"}else{if(g=="retweet_glamorous"){return"twitter"}else{if(g=="facebook"){return"fb"}else{if(g=="facebook_glamorous"){return"fb"}else{if(g=="pinterest"){g="pinterest"}else{if(g=="pinterest_glamorous"){g="pinterest"}else{if(g=="meneame"){g="Meneame"}else{if(g=="meneame_glamorous"){g="Meneame"}else{if(g=="hatena_glamorous"){g="Hatena"}}}}}}}}}return false};var d=function(g){if(g=="retweet"){return"twitter"}else{if(g=="retweet_glamorous"){return"twitter"}else{if(g=="facebook"){return"facebook"}else{if(g=="facebook_glamorous"){return"facebook"}else{if(g=="pinterest"){g="pinterest"}else{if(g=="pinterest_glamorous"){g="pinterest"}else{if(g=="meneame"){g="Meneame"}else{if(g=="meneame_glamorous"){g="Meneame"}else{if(g=="hatena_glamorous"){g="Hatena"}}}}}}}}}return false};if(f){Badges.trackEvent({badge_version:c.badge_version,action:"Click",label:e(f),layout_bottom:this.layout_bottom});var a=d(f);if(a){if((f=="retweet")&&(typeof social_campaign_tracking!=="undefined")&&social_campaign_tracking.twitter_share_action){if(typeof social_campaign_tracking.twitter_share_action=="object"){for(tracking_url in social_campaign_tracking.twitter_share_action){if((typeof social_campaign_tracking.twitter_share_action[tracking_url]=="string")&&(social_campaign_tracking.twitter_share_action[tracking_url]!="")){HPUtil.trackerImg(social_campaign_tracking.twitter_share_action[tracking_url],document.body)}}}else{if(social_campaign_tracking.twitter_share_action!=""){HPUtil.trackerImg(social_campaign_tracking.twitter_share_action,document.body)}}if((typeof social_campaign!="undefined")&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]){a=b(f);HPUtil.trackerImg("http://pixel.quantserve.com/pixel/p-4azu6n0QT1rbs.gif?labels=social_action."+social_campaign+"."+a,document.body)}else{if(this.tracking_flight_name){a=b(f);HPUtil.trackerImg("http://pixel.quantserve.com/pixel/p-4azu6n0QT1rbs.gif?labels=social_action."+this.tracking_flight_name+"."+a,document.body)}}}else{if((f=="facebook")&&(typeof social_campaign_tracking!=="undefined")&&social_campaign_tracking.facebook_share_action){if(typeof social_campaign_tracking.facebook_share_action=="object"){for(tracking_url in social_campaign_tracking.facebook_share_action){if((typeof social_campaign_tracking.facebook_share_action[tracking_url]=="string")&&(social_campaign_tracking.facebook_share_action[tracking_url]!="")){HPUtil.trackerImg(social_campaign_tracking.facebook_share_action[tracking_url],document.body)}}}else{if(social_campaign_tracking.facebook_share_action!=""){HPUtil.trackerImg(social_campaign_tracking.facebook_share_action,document.body)}}}}}}HPUtil.updateInfluenceCookie("shared",1)};Badges.prototype.getPinterestCounts=function(d,a){var c=document.createElement("script");var b=document.getElementsByTagName("head")[0];c.setAttribute("async","true");var e="http://api.pinterest.com/v1/urls/count.json";c.setAttribute("src",e+"?callback="+a+"&url="+d);b.appendChild(c)};window.pinterestGetCounts=function(b){if(b.error){return}var c=b.url;var a=b.count;if(a>999&&a<=999999){a=Math.floor(a/1000)+"K+"}else{if(a>999999&&a<=999999999){a=Math.floor(a/1000000)+"M+"}else{if(a>999999999){a="++"}}}jQuery("#badges_v2_1 .badge_v2_pinterest").html(a)};Badges.prototype.sliceHandler_pinterest_glamorous=function(e,d){this.slices_id.push("badge_v2_pinterest_"+this.unique_id);var b=jQuery(document.createElement("a"));b.attr("id","badge_v2_pinterest_"+this.unique_id);b.attr("href","javascript:void(0);");b.addClass("badge_v2_pinterest hp_network_badge");b.html(0).appendTo(document.getElementById(e));this.getPinterestCounts(this.entry_params.url,"pinterestGetCounts");var c=this;b.click({scope:this,handler:this.userFunc_pinterest_share},function(a){a.data.handler.apply(a.data.scope)}).click({handler:this.trackBadgeClick},function(a){a.data.handler({badge_version:d.badge_version,slice_name:"pinterest"});return false})};Badges.prototype.userFunc_pinterest_share=function(k){var p="",d=jQuery("img.pinit").attr("src"),n=this.unique_id,q=document.getElementsByTagName("meta"),m=q.length,h=this.entry_params.url.replace(/\?.*/,"");if(!d){jQuery("#blog_author_info").find("img").each(function(c){d=jQuery(this).attr("src")});jQuery("meta").each(function(c){var i=jQuery(this).attr("content");if(i&&i.indexOf("i.huffpost.com")>=0){var e=jQuery(this).attr("content");if(e){d=e}}})}if(jQuery(".pinitdesc").length==0){for(var b=0;b<m;b++){if(!q[b].name){continue}if(q[b].name=="description"){p=q[b].content}}}else{p=jQuery(".pinitdesc").html()}if(jQuery(".piniturl").length>0){h=encodeURIComponent(jQuery(".piniturl").attr("href"))}var a=500;var j=encodeURIComponent(p);if(j.length>a){j=j.substr(0,a-3)+"..."}var l="http://pinterest.com/pin/create/button/?url="+h+"&media="+d+"&description="+j;var o=this.newWindow(l,665,600),g=this;var f=function(){setTimeout(function(){if(o==null){return}if(o.closed){g.getPinterestCounts(h,"pinterestGetCounts")}else{f()}},25)};f();return false};Badges.prototype.sliceHandler_linkedin_glamorous_needParams=true;Badges.prototype.sliceHandler_linkedin_glamorous=function(h,g){var d=parseInt(g.linkedin_amount);if(isNaN(d)){d=0}this.slices_id.push("badge_v2_retweet_"+this.unique_id);this.current_amounts.push(d);this.prev_amounts.push(d);var c=jQuery(document.createElement("a"));c.attr("id","badge_v2_linkedin_"+this.unique_id);c.attr("href","javascript:void(0);");c.addClass("badge_v2_linkedin hp_network_badge");c.html(HuffPoUtil.number_format(d)).appendTo(document.getElementById(h));g.badge_version=8;var f=function(a,i){Badges.trackShare({eid:i.eid,badge:"linkedin"})};var b={eid:this.entry_params.id};var e=this;c.click(function(){f(e,b)}).click({scope:this,handler:this.userFunc_linkedin_share},function(a){a.data.handler.apply(a.data.scope)}).click({handler:this.trackBadgeClick},function(a){a.data.handler({badge_version:g.badge_version,slice_name:"linkedin"});return false})};Badges.prototype.userFunc_linkedin_share=function(j){var n="";var a=(HPConfig&&HPConfig.image)?HPConfig.image:"";var o=document.getElementsByTagName("meta");var l=o.length;for(var g=0;g<l;g++){if(!o[g].name){continue}if(o[g].name=="description"){n=o[g].content}}var d=256;var k=encodeURIComponent(n);!k&&(k=jQuery(".qr_entry_content").text());if(k.length>d){k=k.substr(0,d-3)+"..."}var h=$("badge_v2_linkedin"+this.unique_id);var f=parseInt(jQuery("#badge_v2_linkedin_"+this.unique_id).html())+1;jQuery("#badge_v2_linkedin_"+this.unique_id).html(f);var m=this.getShareArticleTitle();if(m.length>d){m=m.substr(0,d-3)+"..."}var b={comment:"",entry_id:this.entry_params.id,url:this.getShareArticleLink(),title:m,content:k,thumbnail:a,badge_divel:h,on_success:function(){}};if(!(HuffCookies.getUserId()&&HuffPrefs.get("linkedin"))){b.on_success=this.userFunc_linkedin_show_modal;b.on_success_params=this.holder_id;b.on_success_timeout=1000}Sharer.Linkedin.share(b);return false};Badges.prototype.sliceHandler_facebook_glamorous_needParams=true;Badges.prototype.sliceHandler_facebook_glamorous=function(e,d){var b=document.createElement("a");b.setAttribute("id","badge_v2_facebook_"+this.unique_id);b.setAttribute("href","javascript:void(0);");jQuery(b).addClass("badge_v2_facebook_ipad_app hp_network_badge");var c=parseInt(d.share_amount);if(isNaN(c)){c=0}if(this.human_readable){b.innerHTML=HuffPoUtil.int2size(c)}else{b.innerHTML=HuffPoUtil.number_format(c)}this.slices_id.push("badge_v2_facebook_"+this.unique_id);this.current_amounts.push(c);this.prev_amounts.push(c);document.getElementById(e).appendChild(b);this.userFunc_facebook_add_click_listener(b,d)};Badges.prototype.sliceHandler_facebook_techcrunch_needParams=true;Badges.prototype.sliceHandler_facebook_techcrunch=function(d,c){var a=document.createElement("li");var b=document.createElement("a");b.setAttribute("id","badge_v2_facebook_"+this.unique_id);jQuery(b).addClass("facebook");b.innerHTML=HuffPoUtil.number_format(c.share_amount);a.appendChild(b);document.getElementById(d).appendChild(a);this.userFunc_facebook_add_click_listener(b,c)};Badges.prototype.userFunc_facebook_add_click_listener=function(c,e){var a=this;var d="facebook";var b=this.getShareArticleLink("utm_hp_ref=fb&src=sp",d);jQuery(c).bind("click",function(){a.userFunc_facebook_share_url(b);a.trackBadgeClick({badge_version:9,slice_name:d});var f=HPUtil.GetEntryID(b);if(typeof(SNProject)==="object"){SNProject.track(f,"entry_facebook_share")}return false})};Badges.prototype.userFunc_facebook_share_url=function(a){this.userFunc_facebook_show_sharer(a);if(HuffCookies.getUserId()&&!HuffPrefs.get("facebook")){this.userFunc_facebook_show_promo_connect_window()}return false};Badges.prototype.userFunc_facebook_show_sharer=function(a){if(social_campaign&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]&&HPAds.social_campaigns[social_campaign].fb_100x20){var b=document.getElementsByTagName("link");for(x in b){if(b[x].rel&&b[x].rel=="image_src"){b[x].href="http://www.huffingtonpost.com/ads/creative/image_compositor.php?overlay="+escape(HPAds.social_campaigns[social_campaign].fb_100x20)+"&image="+escape(b[x].href)}}}FB.ui({method:"feed",name:document.title,link:decodeURIComponent(a)});Badges.trackShare({eid:this.entry_params.id,badge:"facebook"})};Badges.prototype.userFunc_facebook_show_promo_connect_window=function(){var b=HuffConnect;b.hideModal();var a='<div style="font-size: 14pt; font-weight: bold">'+_("Do you want to connect to HuffPost using Facebook?")+"</div>";a+='<a class="login_light_link" ';a+='href="/social/join.html?autojoin=1" ';a+="onclick=\"linkSocialAccount.checkLoginStatus('facebook'); return false;\"";a+='target="_blank">';a+='<img border="0" src="'+_("/images/fb-large.gif")+'" alt="'+_("Connect with Facebook")+'" style="padding: 16px;"/>';a+="</a>";b.socialModal({inner_html:a,modal_head_image:"",modal_subhead_image:"",position:"fixed"})};Badges.prototype.sliceHandler_retweet_glamorous_needParams=true;Badges.prototype.sliceHandler_retweet_glamorous=function(g,d){var e=parseInt(d.views_amount)||0;this.slices_id.push("badge_v2_retweet_"+this.unique_id);this.current_amounts.push(e);this.prev_amounts.push(e);var h=e;if(this.human_readable){h=HuffPoUtil.int2size(e)}else{h=HuffPoUtil.number_format(e)}var f=jQuery("<a />").attr("id","badge_v2_retweet_"+this.unique_id).addClass("badge_v2_retweet_ipad_app hp_network_badge").html(h).appendTo(document.getElementById(g));var i=this.entry_params.custom_tweet_text||this.entry_params.title||"";var c=function(q){var t=this.entry_params.custom_tweet_text||this.entry_params.title||"";var p,r=window.social_campaign,n=window.social_campaign_creative,l=HPAds.social_campaigns;if((typeof(n)!=="undefined")&&(typeof(n.constructor)=="function")&&n.twitter&&t.search(n.twitter)==-1){var k=n.twitter_optout_language?n.twitter_optout_language:"";p={text:k,hash:n.twitter}}else{if(r&&l&&l[r]&&l[r].hashtag&&t.search(l[r].hashtag)==-1){p={text:l[r].twitter_optout_language,hash:l[r].hashtag}}else{if(this.entry_params.tweet_comm_hash&&t.search(this.entry_params.tweet_comm_hash)==-1){p={text:this.entry_params.tweet_comm_text,hash:this.entry_params.tweet_comm_hash}}}}var o=(HPConfig.twitter_signature?HPConfig.twitter_signature:"@HuffingtonPost").replace("@","");var s=" "+q;if(t.length>140-s.length){t=t.substring(0,140-s.length-3)+"..."}else{t+=s}if(p){t=p.text?p.text:t;t+=" "+p.hash}var m="en";if(typeof jQuery.I18N!=="undefined"){m=jQuery.I18N.getLocale().substr(0,2)}t=t.replace(/<[^>]+>/ig,"").replace(/\s+/," ");f.attr("href","https://twitter.com/intent/tweet?text="+encodeURIComponent(t)+"&via="+o+"&lang="+m)};var j=this,b=this.entry_params.id;var a=d.short_url||decodeURIComponent(this.getShareArticleLink("utm_hp_ref=twitter"))||"";if(a&&a.length>30){HPUtil.bitly_url(a,function(k){j.short_url=k})}else{this.short_url=a}f.click(function(){c.call(j,j.short_url);Badges.trackShare({eid:b,badge:"twitter"});j.trackBadgeClick({badge_version:d.badge_version,slice_name:"retweet"})})};Badges.prototype.sliceHandler_retweet_techcrunch_needParams=true;Badges.prototype.sliceHandler_retweet_techcrunch=function(d,c){var a=document.createElement("li");var b=jQuery(document.createElement("a"));b.attr("id","badge_v2_retweet_"+this.unique_id).addClass("twitter").html(HuffPoUtil.number_format(c.views_amount)).appendTo(a).parent().appendTo(document.getElementById(d));c.badge_version=9;this.userFunc_retweet_prepare_button(b,c)};Badges.prototype.userFunc_retweet_prepare_button=function(c,g){var b=140;var f=this.entry_params.custom_tweet_text||this.entry_params.title||"";if(f.length>b){f=f.substr(0,b-3)+"..."}this.tweet_descr={is_ready:false,maxLimit:b,shortUrl:g.short_url||"",tweet_text:f};var e=function(h,i){Badges.trackShare({eid:i.eid,badge:"twitter"})};var a={eid:this.entry_params.id};var d=this;c.click(function(){e(d,a)}).click({scope:this,handler:this.userFunc_post_tweet},function(h){h.data.handler.apply(h.data.scope)}).click({handler:this.trackBadgeClick},function(h){h.data.handler({badge_version:g.badge_version,slice_name:"retweet"});return false})};Badges.prototype.userFunc_post_tweet=function(){var d=false,i;if((typeof social_campaign!="undefined")&&(typeof social_campaign_creative=="object")&&(typeof social_campaign_creative.twitter!=="undefined")&&(this.tweet_descr.tweet_text.search(social_campaign_creative.twitter)==-1)){var e=(typeof social_campaign_creative.twitter_optout_language!="undefined")?social_campaign_creative.twitter_optout_language:"";d={text:e,hash:social_campaign_creative.twitter}}else{if(social_campaign&&HPAds.social_campaigns&&HPAds.social_campaigns[social_campaign]&&HPAds.social_campaigns[social_campaign].hashtag&&(this.tweet_descr.tweet_text.search(HPAds.social_campaigns[social_campaign].hashtag)==-1)){d={text:HPAds.social_campaigns[social_campaign].twitter_optout_language,hash:HPAds.social_campaigns[social_campaign].hashtag}}else{if(this.entry_params.tweet_comm_hash&&(this.tweet_descr.tweet_text.search(this.entry_params.tweet_comm_hash)==-1)){d={text:this.entry_params.tweet_comm_text,hash:this.entry_params.tweet_comm_hash}}}}var g="";switch(this.tweet_descr.url_mode){case"comment_share":var c=this.getShareCommentData();g=c.link;break;case"comment":g=this.getShareCommentLink();break;default:g=this.getShareArticleLink("utm_hp_ref=twitter");break}var f=false;if(this.tweet_descr.shortUrl===""||social_campaign){i=[{insert_type:"add_to_end",make_short:true,url:g}]}else{i=[{insert_type:"add_to_end",url:this.tweet_descr.shortUrl}];f=this.tweet_descr.shortUrl}var b=function(){Badges.trackEvent({action:"Shared",label:"Twitter"})};var a=25;var h="";if(HuffCookies.getUserId()&&!HuffPrefs.get("twitter")){b=Badges.prototype.userFunc_twitter_show_promo_modal_window;a=1000;h=this.holder_id}Sharer.Twitter.share({tweet_text:this.tweet_descr.tweet_text,commercial_info:d,links:i,on_success_callback:b,on_success_timeout:a,on_success_callback_params:h,badge_holder_id:this.holder_id,entry_url:this.entry_params.url,entry_short_url:f});return false};Badges.prototype.userFunc_twitter_show_promo_modal_window=function(c){HuffConnect.hideModal();var b='<div style="font-size: 14pt; font-weight: bold">'+_("Do you want to connect to HuffPost using Twitter?")+"</div>";b+='<a class="login_light_link" ';b+='href="/social/join.html?autojoin=1" ';b+="onclick=\"linkSocialAccount.checkLoginStatus('twitter'); return false;\"";b+='target="_blank">';b+='<img border="0" src="'+_("/images/Sign-in-with-Twitter-darker.png")+'" alt="'+_("Connect with Twitter")+'" style="padding: 16px;"/>';b+="</a>";var a={inner_html:b,modal_head_image:"",modal_subhead_image:"",position:"fixed"};if(c&&"quickread_badges"==c){a.onclose=function(){HPAds.ad_reload("quickread","qr_ad");return};HuffConnect.socialModal(a)}else{HuffConnect.socialModal(a)}return};Badges.prototype.sliceHandler_comment_glamorous_needParams=true;Badges.prototype.sliceHandler_comment_glamorous=function(e,d){var b=document.createElement("a");jQuery(b).addClass("badge_v2_comments");b.setAttribute("href","javascript:void(0);");b.setAttribute("id","badge_v2_comments_"+this.unique_id);jQuery(b).addClass("badge_v2_comments_ipad_app");var c=parseInt(d.comments_amount);if(isNaN(c)){c=0}if(this.human_readable){b.innerHTML=HuffPoUtil.int2size(c)}else{b.innerHTML=HuffPoUtil.number_format(c)}b.innerHTML=c;this.slices_id.push("badge_v2_comments_"+this.unique_id);this.current_amounts.push(c);this.prev_amounts.push(c);if(HPConfig.ipad_application===true){jQuery(b).bind("click",function(){var g=jQuery("a[name=comments]");var a=jQuery("div#container-for-entry");if(!g||!a){return}var f="slow";var h=-45;a.animate({scrollTop:g.offset().top+h},f)})}else{jQuery(b).bind("click",function(){jQuery("html,body").animate({scrollTop:jQuery("a[name=comments]").offset().top},1700)})}document.getElementById(e).appendChild(b);if(typeof(document.badgeCommentAmountIncrease)==="undefined"){document.badge_comment_panels=[];document.badgeCommentRegisterPanel=function(a){document.badge_comment_panels.push(a)};document.badgeCommentAmountIncrease=function(g){var a,f;for(f in document.badge_comment_panels){if(document.badge_comment_panels.hasOwnProperty(f)){a=document.badge_comment_panels[f];a.userFunc_set_comments_amount(g)}}}}document.badgeCommentRegisterPanel(this);jQuery(b).click(jQuery.proxy(function(){this.trackBadgeClick({badge_version:2,slice_name:"comments"})},this));this.userFunc_set_comments_amount=function(f){var a=document.getElementById("badge_v2_comments_"+this.unique_id);if(!a){return}while(a.childNodes.length>=1){a.removeChild(a.firstChild)}a.appendChild(document.createTextNode(f))}};Badges.prototype.sliceHandler_digg_small=function(c,b){var a=HuffPoUtil.getNode("#"+c);this._innerHandler_digg_small(a,b,{});return};Badges.prototype._innerHandler_digg_small=function(c,e,b){var a=b||{};var d={url:this.entry_params.url,title:this.entry_params.title};this._createDiggButton(c,d,a);this._digg_track(c);return};Badges.prototype._createDiggButton=function(c,e,b){var d=document.createElement("a");d.href="http://digg.com/submit?url="+escape(e.url)+"&title="+encodeURIComponent(e.title);d.className="DiggThisButton DiggThisButtonMedium";if(b&&b.class_name){var a=document.createElement("div");a.className=b.class_name;a.appendChild(d);c.appendChild(a)}else{c.appendChild(d)}HPUtil.loadAndRun("http://widgets.digg.com/buttons.js")};Badges.prototype._digg_track=function(a){jQuery(a).bind("click",function(d){var b=HuffPoUtil.GetEntryID();if(!b){return}var c=d.target||d.srcElement;if(c.className&&c.className.indexOf("db-")===0){this.trackEvent("Click","Digg")}Badges.trackShare({eid:b,badge:"digg"})})};Badges.prototype.sliceHandler_stumble_needParams=true;Badges.prototype.sliceHandler_stumble=function(d,a){var c=document.createElement("div");if(a.stumble_views>9){jQuery(c).addClass("badge_v2_stumble_count_div");c.innerHTML=a.stumble_views}else{jQuery(c).addClass("badge_v2_stumble_no_count_div")}var b=this;jQuery(c).bind("click",{url:"http://www.stumbleupon.com/toolbar/badge_click.php?r="+this.getShareArticleLink(null,"stumble"),eid:this.entry_params.id},function(f){Badges.trackEvent({action:"Click",label:"Stumble",layout_bottom:b.layout_bottom});Badges.trackShare({eid:f.data.eid,badge:"stumble"});b.newWindow(f.data.url,830,500);return false});HuffPoUtil.getNode("#"+d+"").appendChild(c)};Badges.prototype.sliceHandler_stumble_comment_needParams=true;Badges.prototype.sliceHandler_stumble_comment=function(d,a){var c=document.createElement("div");if(a.stumble_views>9){jQuery(c).addClass("badge_v2_stumble_count_div");c.innerHTML=a.stumble_views}else{jQuery(c).addClass("badge_v2_stumble_no_count_div")}var b=this;jQuery(c).bind("click",{url:"http://www.stumbleupon.com/toolbar/badge_click.php?r="+this.getShareCommentLink(null,"stumble")},function(f){Badges.trackEvent({action:"Click",label:"Stumble",layout_bottom:b.layout_bottom});b.newWindow(f.data.url);return false});HuffPoUtil.getNode("#"+d+"").appendChild(c)};Badges.prototype.sliceHandler_email_glamorous_needParams=true;Badges.prototype.sliceHandler_email_glamorous=function(e,d){var b=document.createElement("a"),a=parseInt(d.emails_amount);if(isNaN(a)){a=0}b.setAttribute("id","badge_v2_email_"+this.unique_id);jQuery(b).addClass("badge_v2_email_ipad_app");if(this.human_readable){b.innerHTML=HuffPoUtil.int2size(a)}else{b.innerHTML=HuffPoUtil.number_format(a)}this.slices_id.push("badge_v2_email_"+this.unique_id);this.current_amounts.push(a);this.prev_amounts.push(a);var c=this.layout_bottom;if(HPConfig.ipad_application===true){b.href="mailto:?subject="+escape(this.entry_params.title)+"&body="+this.entry_params.url;jQuery(b).bind("click",{eid:this.entry_params.id,human_readable:this.human_readable},function(f){if(f.data.human_readable){b.innerHTML=HuffPoUtil.int2size(a+1)}else{b.innerHTML=HuffPoUtil.number_format(a+1)}Badges.trackEvent({badge_version:2,action:"Click",label:"Email",layout_bottom:c});Badges.trackShare({eid:f.data.eid,badge:"email"});return false})}else{b.href="javascript:void(0)";jQuery(b).bind("click",{eid:this.entry_params.id,human_readable:this.human_readable},function(f){if(f.data.human_readable){b.innerHTML=HuffPoUtil.int2size(a+1)}else{b.innerHTML=HuffPoUtil.number_format(a+1)}SharePost.emailForm(f.data.eid,"","");Badges.trackEvent({badge_version:8,action:"Click",label:"Email",layout_bottom:c});return false})}document.getElementById(e).appendChild(b)};Badges.prototype.sliceHandler_comments_techcrunch_needParams=true;Badges.prototype.sliceHandler_comments_techcrunch=function(d,c){var a=document.createElement("li");var b=document.createElement("a");b.setAttribute("id","badge_v2_comments_"+this.unique_id);b.setAttribute("href",this.entry_params.url+"#comments");jQuery(b).addClass("message");b.innerHTML=HuffPoUtil.number_format(c.comments_amount);a.appendChild(b);document.getElementById(d).appendChild(a)};Badges.prototype.sliceHandler_meneame_glamorous_needParams=true;Badges.prototype.sliceHandler_meneame_glamorous=function(h,f){var b=window.location.href,e=document.title,d="badge_v2_meneame",a=d+"_"+this.unique_id,g=this,c=f.meneame_amount;isNaN(c)&&(c=0);if(this.human_readable){c=HuffPoUtil.int2size(c)}else{c=HuffPoUtil.number_format(c)}this.slices_id.push(a);this.current_amounts.push(f.share_amount);this.prev_amounts.push(f.share_amount);huff.use("jquery",function(j){var i=j('<a href="http://www.meneame.net/submit.php?url='+encodeURIComponent(b)+"&title="+encodeURIComponent(e)+'"></a>');i.addClass(d).attr("id",a).html(c);h=j("#"+h);h.append(i);i.click(function(k){k.preventDefault();g.newWindow(j(this).attr("href"),790,600);Badges.trackShare({eid:HPUtil.GetEntryID(b),badge:"meneame"});i.html(++c)}).click({handler:g.trackBadgeClick},function(k){k.data.handler({badge_version:f.badge_version,slice_name:"meneame"})})})};Badges.prototype.sliceHandler_hatena_glamorous_needParams=true;Badges.prototype.sliceHandler_hatena_glamorous=function(d,b){var e=this.entry_params.url.split("?",1)[0]||window.location.href;e=e.split("#",1)[0];var i=this.entry_params.title||document.title;var a=e,f=i,g="badge_v2_hatena",h=g+"_"+this.unique_id,c=this;huff.use("jquery",function(k){var j=function(){var l=k('<div><a href="http://b.hatena.ne.jp/entry/'+a+'" class="hatena-bookmark-button" data-hatena-bookmark-title="'+f+'" data-hatena-bookmark-layout="vertical-balloon" title="'+f+'"><img src="http://b.st-hatena.com/images/entry-button/button-only.gif" alt="'+f+'" width="20" height="20" style="border: none;" /></a></div>');l.addClass(g).attr("id",h);d=k("#"+d);d.append(l);l.parent().addClass("hatena_glamorous");return};HPUtil.loadAndRun("http://b.st-hatena.com/js/bookmark_button.js",function(){j()})})};Badges.prototype.sliceHandler_google_plusone_glamorous_needParams=true;Badges.prototype.sliceHandler_google_plusone_glamorous=function(c,a){var b=this.entry_params.url.split("?",1)[0];(window.IS_NEWSGLIDE||window.IS_CHROMEAPP)&&!window.huff&&(window.huff={});if(window.IS_NEWSGLIDE||window.IS_CHROMEAPP){(function(d){c=d("#"+c);d.getScript("https://apis.google.com/js/plusone.js?lang=en-US",function(e){if(!(window.gapi&&gapi.plusone)){return}c.html('<div id="plusone-div"></div>').parent().addClass("google_plus1_badge");gapi.plusone.render("plusone-div",{size:"tall",href:b})})}(jQuery))}else{huff.use("jquery",function(d){c=d("#"+c);var e="en-US";if(typeof jQuery.I18N!=="undefined"){e=jQuery.I18N.getLocale().replace("_","-")}window.___gcfg={lang:e};d.getScript("https://apis.google.com/js/plusone.js",function(f){if(!(window.gapi&&gapi.plusone)){return}c.html('<div id="plusone-div"></div>').parent().addClass("google_plus1_badge");jQuery("#plusone-div").parent().addClass("google-plusone");gapi.plusone.render("plusone-div",{size:"tall",href:b,callback:function(g){try{if("on"===g.state){bN.set("dL_shareType","google+",1);bN.set("dL_shareURL",escape(g.href),1);bN.ping("dL_share")}}catch(h){}}})})})}};Badges.prototype.slicesAmount_badges_glamorous=function(cb_params){var me,func_name,i,slice_name;if(typeof(cb_params)!=="object"){return}this.prev_amounts=this.current_amounts;this.current_amounts=[];this.current_delta=[];me=eval(cb_params.global_name);for(i=0;i<cb_params.slice_names.length;i++){slice_name=cb_params.slice_names[i];func_name="sliceAmount_"+slice_name;if(typeof(me[func_name])=="function"&&cb_params.slice_params[slice_name]){me[func_name](cb_params.slice_params[slice_name])}}for(i=0;i<this.current_amounts.length;i++){if(this.current_amounts[i]>0){var delta=(this.current_amounts[i]-this.prev_amounts[i])/60;this.current_delta[i]=(delta>0?delta:0)}else{this.current_delta[i]=0}}};Badges.prototype.sliceAmount_facebook_glamorous_needParams=true;Badges.prototype.sliceAmount_facebook_glamorous=function(a){if(HPConfig.inst_type==="dev"){count_amount=(a.share_amount)?share_badges_test:0}else{count_amount=parseInt(a.share_amount)}if(isNaN(count_amount)){count_amount=0}jQuery("#"+this.slices_id[0]).html(HuffPoUtil.number_format(count_amount));this.current_amounts.push(count_amount)};Badges.prototype.sliceAmount_retweet_glamorous_needParams=true;Badges.prototype.sliceAmount_retweet_glamorous=function(a){count_amount=parseInt(a.views_amount);if(isNaN(count_amount)){count_amount=0}jQuery("#"+this.slices_id[1]).html(HuffPoUtil.number_format(count_amount));this.current_amounts.push(count_amount)};Badges.prototype.sliceAmount_email_glamorous_needParams=true;Badges.prototype.sliceAmount_email_glamorous=function(a){count_amount=parseInt(a.emails_amount);if(isNaN(count_amount)){count_amount=0}jQuery("#"+this.slices_id[2]).html(HuffPoUtil.number_format(count_amount));this.current_amounts.push(count_amount)};Badges.prototype.sliceAmount_comment_glamorous_needParams=true;Badges.prototype.sliceAmount_comment_glamorous=function(a){count_amount=parseInt(a.comments_amount);if(isNaN(count_amount)){count_amount=0}jQuery("#"+this.slices_id[3]).html(HuffPoUtil.number_format(count_amount));this.current_amounts.push(count_amount)};function getEmulData(){var a=new Date();var b=a.getTime().toString();share_badges_test=Math.floor(b.substr(10));return share_badges_test};
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var Sharer={check_incomplete_sessions:function(){this.Twitter.check_incomplete_session()},Facebook:{links:[],facebook_post:{message:"",attachment:{name:"",description:"",href:""},action_links:[{text:_("Join HuffPost Social News now!"),href:HuffPoUtil.getHostName()+"/social/?r="+escape(HuffCookies.getUserGuid())}],target_id:null,user_message_prompt:null,callback:null,auto_publish:false,actor_id:null},share:function(b){for(var a in b.facebook_post){if(b.facebook_post.hasOwnProperty(a)){this.facebook_post[a]=b.facebook_post[a]}}if(b.links){Sharer.Links.process(b.links,Sharer.Facebook.real_share,Sharer.Facebook);return false}this.real_share()},real_share:function(){HPFB.ensureInit(function(){HPFB.waitForSession(function(){if(Sharer.Facebook.facebook_post.attachment.description){var a=Sharer.Facebook.facebook_post.attachment.description;a=Sharer.Links.expand_text_with_links(a);Sharer.Facebook.facebook_post.attachment.description=a}HPFB.streamPublish(Sharer.Facebook.facebook_post.message,Sharer.Facebook.facebook_post.attachment,Sharer.Facebook.facebook_post.action_links,Sharer.Facebook.facebook_post.target_id,Sharer.Facebook.facebook_post.user_message_prompt,Sharer.Facebook.facebook_post.callback,Sharer.Facebook.facebook_post.auto_publish,Sharer.Facebook.facebook_post.actor_id)})})}},Twitter:{hp_cookie_continue:"hp_sharer_twitter_sharing",hp_cookie_continue_obj:"hp_sharer_twitter_share_text",twitter_messg_limit:140,modal_element_ids:{},oauthInfo:{},user_supply_vars:["tweet_text","commercial_info","links","callbacks","badge_holder_id","entry_url","entry_short_url","add_via","on_success_callback","on_success_callback_params","on_success_timeout"],tweet_text:"",links:[],add_via:true,commercial_info:false,callbacks:false,badge_holder_id:null,entry_url:null,entry_short_url:false,check_incomplete_session:function(){if(HuffCookies.getCookie(this.hp_cookie_continue)){this.load_last_share_session();HuffCookies.destroyCookie(this.hp_cookie_continue);if(HuffCookies.getUserId()&&HuffPrefs.get("twitter")){this.check_credentials()}}},load_last_share_session:function(){var d=HuffCookies.getCookie(this.hp_cookie_continue_obj);if(!d){return}var b=JSON.parse(d);if(!b){return}var c,a;for(a=0;a<this.user_supply_vars.length;a++){c=this.user_supply_vars[a];if(b[c]){this[c]=b[c]}}HuffCookies.destroyCookie(this.hp_cookie_continue_obj)},save_session:function(){HuffCookies.setCookie(this.hp_cookie_continue,1,2);var a={},c,b;for(b=0;b<this.user_supply_vars.length;b++){c=this.user_supply_vars[b];if(this[c]){a[c]=this[c]}}HuffCookies.setCookie(this.hp_cookie_continue_obj,JSON.stringify(a),2)},get_theme_descr:function(c){var b={ids:{},html:""};if(c=="basic_twitter"||c=="basic_twitter_frontpage"){SNProject.initModal("tweet");b.ids={error_msg:c+"_modal_window_error_msg",comm_text:c+"_modal_window_comm_text",comm_checkbox:c+"_modal_window_share_checkbox",textarea:c+"_modal_window_text_area",chars_left_title:c+"_modal_window_chars_left",close_button:c+"_modal_window_close_button",submit_button:c+"_modal_window_submit_button",submit_button_hider:c+"_modal_window_submit_button_hider",loader_icon:c+"_modal_window_loader_icon",status_text:c+"_modal_window_status_text",comm_block:c+"_modal_window_comm_block"};var a=this.oauthInfo.twitter_pic||HuffCookies.getCurrentUserPhotoUrl();b.html="						<div id='"+b.ids.chars_left_title+"' class='counter_container float_right'></div>                            <div class='clear'></div>						    <div class='avatar'"+(a?" style='background: url(\""+a+"\") no-repeat scroll 0pt 0pt transparent;'></div>":"></div>")+"<div class='textarea_container'><textarea id='"+b.ids.textarea+"' class='textarea'></textarea></div>						<div style='clear: both;'></div>						<div id='"+b.ids.comm_block+"' style='display: none;'>							<div class='checkbox_container'>							<input id='"+b.ids.comm_checkbox+"' type='checkbox'>							</div>							<div id='"+b.ids.comm_text+"' class='checkbox_label_container'></div>							<div style='clear: both;'></div>						</div>						<div class='submit_container'>							<div id='"+b.ids.loader_icon+"' class='loader_icon'></div>							<div id='"+b.ids.error_msg+"' class='error_msg'></div>							<div id='"+b.ids.submit_button+"' class='submit_button'>&nbsp;</div>							<div id='"+b.ids.status_text+"' class='status_text'></div>						</div>"}return b},share:function(d){var b,a;var c=this.user_supply_vars.length;for(a=0;a<c;a++){b=this.user_supply_vars[a];if(d.hasOwnProperty(b)){this[b]=d[b]}}if(this.callbacks!==false){if(!this.callbacks.scope){this.callbacks.scope=null}if(!this.callbacks.timeout){this.callbacks.timeout=25}if(!this.callbacks.params){this.callbacks.params=null}if(!this.callbacks.success){this.callbacks.success=null}if(!this.callbacks.failure){this.callbacks.failure=null}}Sharer.Twitter.check_credentials()},check_credentials:function(){if((HuffCookies.getUserId()&&HuffPrefs.get("twitter"))||this.oauthInfo.token){if(this.links){Sharer.Links.process(this.links,Sharer.Twitter.show_modal_window,Sharer.Twitter);return false}this.show_modal_window()}else{linkSocialAccount.checkLoginStatus("twitter",false,{disable_connect:true,callback:function(){var a=Sharer.Twitter;if(Provider.user_provider_info.twitter.oauth_token&&Provider.user_provider_info.twitter.oauth_token_secret){a.oauthInfo={token:Provider.user_provider_info.twitter.oauth_token,secret:Provider.user_provider_info.twitter.oauth_token_secret,twitter_pic:Provider.user_provider_info.twitter.profile_image||"http://s.huffpost.com/images/profile/user_placeholder.gif"};a.check_credentials()}else{a.connect_modal()}return false}})}},connect_modal:function(){if(HPConfig.ipad_application===false){if(HuffCookies.getUserId()&&!HuffPrefs.get("twitter")){Badges.prototype.userFunc_twitter_show_promo_modal_window(this.badge_holder_id)}else{if(HuffCookies.getUserId()==null){setTimeout(function(){ConnectOverview.showBenefits({provider:"twitter"})},200)}}}return},show_modal_window:function(){var a=this.twitter_messg_limit;if(this.commercial_info){a-=(this.commercial_info.hash.length+1)}this.tweet_text=Sharer.Links.expand_text_with_links(this.tweet_text,a);if(this.commercial_info){this.tweet_text=this.tweet_text+" "+this.commercial_info.hash}var b="";if(HuffPoUtil.GetEntryID(location.href)){b="basic_twitter"}else{b="basic_twitter_frontpage"}var d=this.get_theme_descr(b);var c=this;huff.use("modal",function(e){e.show({theme:"tweet_modal",content:d.html,onclose:Sharer.Twitter.connect_modal,onshow:function(){c.modal_element_ids=d.ids;c.setTwitterModal()}})});return},setTwitterModal:function(){var c=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);if(c){c.value=this.tweet_text;if(this.add_via){c.value+=" via "+HPConfig.twitter_signature}HuffPoUtil.bind(c,"keyup",this.key_up_handler,null,this);HuffPoUtil.bind(c,"change",this.key_up_handler,null,this);HuffPoUtil.bind(c,"keydown",this.key_up_handler,null,this);HuffPoUtil.bind(c,"keypress",this.key_up_handler,null,this)}this.key_up_handler();var b=HuffPoUtil.getNode("#"+this.modal_element_ids.submit_button);if(b){HuffPoUtil.bind(b,"click",this.submit_handler,null,this);if(typeof(HPBrowser)!=="undefined"){if(HPBrowser.isIE6()||HPBrowser.isIE7()){jQuery(b).css("left","220px")}}}if(this.commercial_info){jQuery(this.modal_element_ids.comm_block).css("display","block");var a=HuffPoUtil.getNode("#"+this.modal_element_ids.comm_text);if(a){a.innerHTML=this.commercial_info.text;var d=HuffPoUtil.getNode("#"+this.modal_element_ids.comm_checkbox);d.checked=true;HuffPoUtil.bind(a,"click",this.commercial_checkbox_handler,null,this);HuffPoUtil.bind(d,"click",this.commercial_checkbox_handler,null,this)}}},commercial_checkbox_handler:function(d){var a=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var b=HuffPoUtil.getNode("#"+this.modal_element_ids.comm_checkbox);var c=this.commercial_info.hash;if(b.disabled){return}var f=(d.srcElement||d.target).nodeName.toLowerCase();if(f!="input"){if(HPBrowser.isIE6()||HPBrowser.isIE7()){if(b.checked){b.setAttribute("checked",false)}else{b.setAttribute("checked",true)}}else{if(b.checked){b.checked=false}else{b.checked=true}}}if(b.checked){a.value+=" "+c}else{a.value=a.value.replace(" "+c,"")}},key_up_handler:function(){var d=this.twitter_messg_limit;var b=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var c=HuffPoUtil.getNode("#"+this.modal_element_ids.chars_left_title);var a=d-b.value.length;c.innerHTML=a;c.style.color=a<0?"#D40D12":"#999999"},submit_handler:function(){var c=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var f=HuffPoUtil.getNode("#"+this.modal_element_ids.error_msg);var e=c.value;if(e==""){f.innerHTML=_("Please enter some text!");c.focus();return false}if(e.length>this.twitter_messg_limit){f.innerHTML=_("Tweet limit exceeded!");c.focus();return false}this.show_sibmitting_proccess();var d="tweet="+encodeURIComponent(e);if(this.oauthInfo.token){d+="&user_ot="+this.oauthInfo.token+"&user_os="+this.oauthInfo.secret}var b=this.modal_element_ids;var a={onLinkSuccess:function(){Sharer.Twitter.oauthInfo={token:Provider.user_provider_info.twitter.oauth_token,secret:Provider.user_provider_info.twitter.oauth_token_secret};Sharer.Twitter.no_popup=true;Sharer.Twitter.modal_element_ids=b;Sharer.Twitter.submit_handler();return false}};d+="&eid="+HPUtil.GetEntryID(window.location.href);d+="&banners="+HPAds.get_banners_str();jQuery.ajax({type:"POST",url:"/badge/post_to_twitter.php",data:d,dataType:"json",error:function(g){Sharer.Twitter.show_failure_final();HPError.e()},success:function(g){if(g.status&&g.message){if(/success/.test(g.status)){Sharer.Twitter.show_successfull_final()}else{if(/duplicate/.test(g.message)){Sharer.Twitter.show_duplicate_final()}else{if(/invalid_token/.test(g.message)){}else{Sharer.Twitter.show_failure_final()}}}return}}});return false},show_sibmitting_proccess:function(){var b=HuffPoUtil.getNode("#"+this.modal_element_ids.submit_button);var c=HuffPoUtil.getNode("#"+this.modal_element_ids.loader_icon);var a=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var d=HuffPoUtil.getNode("#"+this.modal_element_ids.comm_checkbox);var e=HuffPoUtil.getNode("#"+this.modal_element_ids.status_text);if(HPBrowser.isIE6()||HPBrowser.isIE7()){c.style.display="block"}e.innerHTML="";HuffPoUtil.getNode("#"+this.modal_element_ids.error_msg).innerHTML="";b.style.display="none";c.style.display="block";a.disabled=true;if(d){d.disabled=true}},show_successfull_final:function(){var a=HuffPoUtil.getNode("#"+this.modal_element_ids.loader_icon);var b=HuffPoUtil.getNode("#"+this.modal_element_ids.status_text);if(HPBrowser.isIE6()||HPBrowser.isIE7()){a.style.display="none"}a.style.display="none";b.innerHTML=_("Posted to Twitter!");b.style.display="block";if(typeof this.on_success_callback=="function"){setTimeout(function(){Sharer.Twitter.on_success_callback(Sharer.Twitter.on_success_callback_params)},Sharer.Twitter.on_success_timeout)}else{HuffConnect.hideModal();setTimeout(function(){Sharer.Twitter.connect_modal()},1000)}},show_duplicate_final:function(){var b=HuffPoUtil.getNode("#"+this.modal_element_ids.submit_button);var a=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var d=HuffPoUtil.getNode("#"+this.modal_element_ids.comm_checkbox);var c=HuffPoUtil.getNode("#"+this.modal_element_ids.loader_icon);var e=HuffPoUtil.getNode("#"+this.modal_element_ids.status_text);if(HPBrowser.isIE6()||HPBrowser.isIE7()){c.style.display="none"}c.style.display="none";e.innerHTML=_("You already shared this Tweet");e.style.display="block";b.style.display="block";a.disabled=false;if(d){d.disabled=false}},show_failure_final:function(){var a=HuffPoUtil.getNode("#"+this.modal_element_ids.loader_icon);var b=HuffPoUtil.getNode("#"+this.modal_element_ids.status_text);if(HPBrowser.isIE6()||HPBrowser.isIE7()){a.style.display="none"}a.style.display="none";b.innerHTML=_("Unable to process your request!");b.style.display="block"}},Links:{links:[],not_completed:true,need_to_short:0,shorten:0,check_for_complete:function(){if(this.shorten==this.need_to_short){this.not_completed=false;return true}return false},bitly_shorten_complete:function(d){var j="",a,e,h,b,c,f="",g;for(a in d.results){b=d.results[a];c=a;break}for(h in b){j+=h+":"+b[h].toString()+"\n";if(h=="shortUrl"){f=b[h].toString()}}for(e=0;e<Sharer.Links.links.length;e++){g=Sharer.Links.links[e];if(unescape(g.url)==c){g.long_url=unescape(g.url);g.url=f;Sharer.Links.shorten++;break}}},process:function(c,a,g){var f,b,e,d,h;if(c){this.links=c}for(f=0;f<this.links.length;f++){b=this.links[f];if(b.make_short&&b.url){d="http://api.bit.ly/shorten?version=2.0.1&longUrl="+((b.url==unescape(b.url))?escape(b.url):b.url)+"&login="+HPConfig.bit_ly_key.user_name+"&apiKey="+HPConfig.bit_ly_key.user_key+"&callback=Sharer.Links.bitly_shorten_complete";h=document.createElement("script");h.setAttribute("type","text/javascript");document.getElementsByTagName("head")[0].appendChild(h);h.setAttribute("src",d);this.need_to_short++}}this.wait_for_completed(a,g,10)},wait_for_completed:function(a,c,b){if(this.check_for_complete()){a.call(c);return}var d=this;setTimeout(function(){d.wait_for_completed(a,c,b)},b)},expand_text_with_links:function(e,c){var b=e,d,a;if(!e){return""}c=c||false;for(d=0;d<this.links.length;d++){a=this.links[d];if(a.insert_type=="add_to_end"){if(c&&(b.length>(c-(a.url.length+1)))){b=b.substr(0,(c-(a.url.length+1))-3)+"..."}b=b+" "+a.url}else{if(a.insert_type=="replace_mock"){b=b.replace(a.mock,a.url);if(c&&(b.length>c)){b=b.substr(0,c-3)+"..."}}else{if(a.insert_type=="add_to_begining"){b=a.url+" "+b;if(c&&(b.length>c)){b=b.substr(0,c-3)+"..."}}}}}return b}},trackedShares:[],Digg:{digg_it:function(a,f){var b="http://digg.com/submit?phase=2&title="+a+"&url="+(f?escape(f):escape(window.location));window.open(b,"digg_window","width=650,height=520,status=yes,location=no,left=0,top=0");try{if(-1===jQuery.inArray("digg",Badges.trackedShares)){var c=f?f:window.location.href;jQuery.post("/include/social_track.php",{t:"digg",entry:HPUtil.GetEntryID(c),banners:HPAds.get_banners_str()});Sharer.trackedShares.push("digg");bN.set("dL_shareType","digg",1);bN.set("dL_shareURL",escape(c),1);bN.ping("aol-share")}}catch(d){}}},Linkedin:{UserData:null,AccessTokens:null,modal_element_ids:{},linkedin_messg_limit:700,share:function(a){this.entry_id=a.entry_id||null;this.title=a.title||null;this.url=a.url||null;this.content=a.content||null;this.thumbnail=a.thumbnail||null;this.on_success=a.on_success||null;this.on_success_params=a.on_success_params||null;this.on_success_timeout=a.on_success_timeout||25;this.badge_div_el=a.badge_div_el||null;this.comment=a.comment||"";this.holder_id=a.holder_id||"";this.startShare();return},startShare:function(){if(this.entry_id&&this.title&&this.url&&this.content){if((HuffCookies.getUserId()&&HuffPrefs.get("linkedin"))||(this.AccessTokens&&this.AccessTokens.oauth_token)){this.showShareModal()}else{var a=HuffPoUtil.getHostName()+"/users/linkedin/index.php?action=auth&step=1";PopupManager.open(a,750,325);PopupManager.onCloseParams=this;PopupManager.onClose=function(b){if(QuickLogin.LinkedinData){b.UserData=JSON.parse(QuickLogin.LinkedinData.UserData);b.AccessTokens=JSON.parse(QuickLogin.LinkedinData.AccessTokens);if(b.UserData&&b.AccessTokens){b.showShareModal()}}return}}}else{return false}},showShareModal:function(){var a="";if(HuffPoUtil.GetEntryID(location.href)){a="basic_linkedin"}else{a="basic_linkedin_frontpage"}var c=this.get_theme_descr(a);var b=this;huff.use("modal",function(d){d.show({theme:"tweet_modal",content:c.html,onshow:function(){b.modal_element_ids=c.ids;var f=HuffPoUtil.getNode("#"+b.modal_element_ids.textarea);if(f){f.value=b.comment;HuffPoUtil.bind(f,"keyup",b.key_up_handler,null,b);HuffPoUtil.bind(f,"change",b.key_up_handler,null,b)}var g=HuffPoUtil.getNode("#"+b.modal_element_ids.chars_left_title);if(g){g.innerHTML=b.linkedin_messg_limit-b.comment.length}var e=HuffPoUtil.getNode("#"+b.modal_element_ids.submit_button);if(e){HuffPoUtil.bind(e,"click",b.submit_handler,null,b)}var i=HuffPoUtil.getNode("#"+b.modal_element_ids.preview_block);if(i){var h="";if(b.thumbnail&&b.thumbnail!=""){h+="<div class='lin_share_pic float_left'><img src='"+b.thumbnail+"' /></div>"}h+="									<div class='align_left'>										<div class='lin_share_top'>											<span class='lin_share_title'>"+unescape(b.title)+"</span>											<span class='lin_share_small'>"+unescape(document.location.hostname)+"</span>										</div>										<div class='lin_share_text'>"+unescape(b.content)+"</div>										<div style='clear: both;'></div>									</div>";i.innerHTML=h}if(b.holder_id){HuffPoUtil.bind(HuffPoUtil.getNode("#"+b.modal_element_ids.close_button),"click",function(j,k){k.connect_modal()},b)}}})});return},connect_modal:function(){if(!(HuffCookies.getUserId()&&HuffPrefs.get("linkedin"))){Badges.prototype.userFunc_linkedin_show_modal(this.badge_holder_id)}return},get_theme_descr:function(c){var b={ids:{},html:""};if(c=="basic_linkedin"||c=="basic_linkedin_frontpage"){SNProject.initModal("tweet");b.ids={error_msg:c+"_modal_window_error_msg",comm_text:c+"_modal_window_comm_text",comm_checkbox:c+"_modal_window_share_checkbox",textarea:c+"_modal_window_text_area",chars_left_title:c+"_modal_window_chars_left",close_button:c+"_modal_window_close_button",submit_button:c+"_modal_window_submit_button",submit_button_hider:c+"_modal_window_submit_button_hider",loader_icon:c+"_modal_window_loader_icon",status_text:c+"_modal_window_status_text",comm_block:c+"_modal_window_comm_block",preview_block:c+"_modal_window_preview_block"};b.close_button_id=b.ids.close_button;var a=(this.UserData&&this.UserData.profile_picture)?this.UserData.profile_picture:HuffCookies.getCurrentUserPhotoUrl();b.html="						<div id='"+b.ids.chars_left_title+"' class='counter_container'></div>						<div class='avatar' style='margin-right:1px;'><img style='border:1px solid #ccc;' src='"+a+"' width='48' height='48' /></div><div class='textarea_container'><textarea id='"+b.ids.textarea+"' class='textarea'></textarea></div>						<div style='clear: both;'></div>						<div class='preview_separator'></div>						<div class='linkedin_share_preview' id='"+b.ids.preview_block+"'></div>						<div id='"+b.ids.comm_block+"' style='display: none;'>							<div class='checkbox_container'>							<input id='"+b.ids.comm_checkbox+"' type='checkbox'>							</div>							<div id='"+b.ids.comm_text+"' class='checkbox_label_container'></div>							<div style='clear: both;'></div>						</div>						<div class='submit_container'>						<div id='"+b.ids.loader_icon+"' class='loader_icon'></div>						<div id='"+b.ids.error_msg+"' class='error_msg'></div>						<div id='"+b.ids.submit_button+"' class='linkedin_submit_button'>&nbsp;</div>						<div id='"+b.ids.status_text+"' class='status_text'></div>						</div>"}return b},key_up_handler:function(){var c=this.linkedin_messg_limit;var a=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var b=HuffPoUtil.getNode("#"+this.modal_element_ids.chars_left_title);if(a.value.length>c){b.innerHTML=0}else{b.innerHTML=c-a.value.length}},submit_handler:function(){var c=null;var a=null;if(this.AccessTokens){c=this.AccessTokens.oauth_token;a=this.AccessTokens.oauth_token_secret}var b=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var f=HuffPoUtil.getNode("#"+this.modal_element_ids.error_msg);var e=b.value;if(e.length>this.linkedin_messg_limit){f.innerHTML="Please shorten your comment text";b.focus();return false}this.show_sibmitting_proccess();var d="1=1";if(e){d+="&comment="+encodeURIComponent(e)}d+="&eid="+this.entry_id;if(this.url){d+="&url="+this.url}if(this.title){d+="&title="+this.title}if(this.content){d+="&content="+this.content}if(this.thumbnail){d+="&thumbnail="+this.thumbnail}if(c&&a){d+="&user_ot="+c+"&user_os="+a}jQuery.ajax({type:"POST",url:"/badge/post_to_linkedin.php",data:d,success:function(g){if(g&&/success/.test(g)){Sharer.Linkedin.show_successfull_final()}else{Sharer.Linkedin.show_failure_final()}},error:function(g){Sharer.Linkedin.show_failure_final();HPError.e()},timeout:20000})},show_sibmitting_proccess:function(){var b=HuffPoUtil.getNode("#"+this.modal_element_ids.submit_button);var c=HuffPoUtil.getNode("#"+this.modal_element_ids.loader_icon);var a=HuffPoUtil.getNode("#"+this.modal_element_ids.textarea);var d=HuffPoUtil.getNode("#"+this.modal_element_ids.comm_checkbox);if(HPBrowser.isIE6()||HPBrowser.isIE7()){c.style.display="block"}HuffPoUtil.getNode("#"+this.modal_element_ids.error_msg).innerHTML="";b.style.display="none";c.style.display="block";a.disabled=true;return},show_successfull_final:function(){var a=HuffPoUtil.getNode("#"+this.modal_element_ids.loader_icon);var b=HuffPoUtil.getNode("#"+this.modal_element_ids.status_text);if(HPBrowser.isIE6()||HPBrowser.isIE7()){a.style.display="none"}a.style.display="none";b.innerHTML=_("Posted to LinkedIn!");b.style.display="block";Sharer.Linkedin.AccessTokens=null;if(typeof Sharer.Linkedin.on_success=="function"){setTimeout(function(){Sharer.Linkedin.on_success(Sharer.Linkedin.on_success_params)},Sharer.Linkedin.on_success_timeout)}},show_failure_final:function(){var a=HuffPoUtil.getNode("#"+this.modal_element_ids.loader_icon);var b=HuffPoUtil.getNode("#"+this.modal_element_ids.status_text);if(HPBrowser.isIE6()||HPBrowser.isIE7()){a.style.display="none"}a.style.display="none";b.innerHTML=_("Unable to process your request!");b.style.display="block";Sharer.Linkedin.UserData="";Sharer.Linkedin.AccessTokens=""}}};Sharer.hp_amazing_video_module_fb_share=function(d,b,c,a,e){Sharer.Facebook.share({facebook_post:{message:d,attachment:{name:b,description:c,href:a,media:[{type:"image",src:e,href:a}]},callback:function(){}},links:[]})};jQuery(function(){Sharer.check_incomplete_sessions()});
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var UserLevels={BadgePopup:{timeout:0,badge_popup_timer_id:0,showBadgePopup:function(d){if(HPConfig.ipad_application){this.leftside_popup=true}badge_el=d.badge_el||false;badge_el_offset_x=d.badge_el_offset_x||(this.leftside_popup?-312:28);badge_el_offset_y=d.badge_el_offset_y||55;user_name=d.user_name||false;user_type=d.user_type||false;user_level=d.user_level||0;gift_points=d.gift_points||0;gift_name=d.gift_name||"";comments_cnt=d.comments_cnt||0;fans_cnt=d.fans_cnt||0;friends_cnt=d.friends_cnt||0;following_cnt=d.following_cnt||0;shares_cnt=d.shares_cnt||0;twitter_id=d.twitter_id||0;facebook_id=d.facebook_id||0;level_aquired=d.level_aquired===false?false:true;hide_learn_more=d.hide_learn_more||false;sponsor_display_name=d.sponsor_display_name||"";author_created_on=d.author_created_on||"";author_nickname=d.author_nickname||"";if(this.badge_popup_timer_id){clearTimeout(this.badge_popup_timer_id);this.badge_popup_timer_id=0}var j=document.getElementById("badge_popup");var g=document.getElementById("badge_popup_text");var i=jQuery("#badge_popup .badge_popup_top");if(!j||!badge_el){return}var m="",k="";if(user_type=="sponsor"){level_aquired=false}if(level_aquired){k='<span class="'+user_type+'_title title">'+user_name}var e='<span class="'+user_type+'_name"><b>'+user_name+"</b></span>";switch(user_type){case"networker":if(level_aquired){k+=" "+sprintf(_("is a Level %s Networker!"),user_level)+"</span>";switch(user_level){case 1:m+=sprintf(_("%s has earned the Level 1 Networker Badge! %s has <b>%s friends and %s followers</b>."),e,e,friends_cnt,fans_cnt);m+="<br/><br/>"+_("Networkers with a Level 1 Badge are very socially connected users on the site—with lots of friends and followers.");break;case 2:var c="";if((twitter_id>0)&&(facebook_id>0)){c="Twitter "+_("and")+" Facebook"}else{if(twitter_id>0){c="Twitter"}else{if(facebook_id>0){c="Facebook"}}}m+=sprintf(_("%s has earned the Level 2 Networker Badge! With <b>%s friends and %s followers</b>, %s has comments featured in red. %s has created a HuffPost account using %s."),e,friends_cnt,fans_cnt,e,e,c);m+="<br/><br/>"+_("Networkers with a Level 2 Badge are among the most socially connected users on the site—with tons of friends and followers. They have also created a HuffPost account using Twitter or Facebook, and their comments are featured in red.");break}}else{m+=_("Networkers are very socially connected users on the site—with lots of friends and followers! Users who connect with Facebook and Twitter can earn higher levels of this badge.")}break;case"superuser":if(level_aquired){k+=" "+sprintf(_("is a Level %s Superuser!"),user_level)+"</span>";switch(user_level){case 1:m+=sprintf(_("%s has earned the Level 1 Superuser Badge! %s has <b>%s comments</b> and <b>%s shares</b> to a social network."),e,e,comments_cnt,shares_cnt);break;case 2:var c="";if((twitter_id>0)&&(facebook_id>0)){c="Twitter "+_("and")+" Facebook"}else{if(twitter_id>0){c="Twitter"}else{if(facebook_id>0){c="Facebook"}}}m+=sprintf(_("%s has earned the Level 2 Superuser Badge! With <b>%s comments</b> and <b>%s shares</b> to a social network, %s has comments featured in purple. %s has created a HuffPost account using %s."),e,comments_cnt,shares_cnt,e,e,c);break}}else{m+=_("Superusers are very engaged users on the site-with lots of comments and shares! Users who connect with Facebook and Twitter can earn higher levels of this badge.")}break;case"moderator":if(level_aquired){k+=" "+sprintf(_("is a Level %s Community Moderator!"),user_level)+"</span>";switch(user_level){case 1:m+=sprintf(_("%s has earned the Level 1 Community Moderator Badge! %s flagged at least 20 comments that we deleted and has a high ratio of good flags to mistaken flags, so <span class='%s_name'>%s's</span> flags carry five times the weight as standard flags."),e,e,user_type,user_name);break;case 2:m+=sprintf(_("%s has earned the Level 2 Community Moderator Badge! %s flagged at least <b>100 comments</b> that we deleted and has a very high ratio of good flags to mistaken flags, so %s is trusted to delete inappropriate comments from the site. %s has maintained the ability to delete inappropriate comments by handling it responsibly."),e,e,e,e);break}}else{m+=_("Moderators have flagged at least 20 comments that we deleted and have a strong ratio of good flags to mistaken flags. Their flags carry five times the weight as standard flags. Users who earn higher levels of the Moderator badge can directly delete comments.")}break;case"expert":if(level_aquired){k='<span class="'+user_type+'_title title">';k+=sprintf(_("%s is a Politics Pundit!"),e)+"</span>";m+=sprintf(_("%s has earned a Politics Pundit Badge. HuffPost Pundits are our most engaged and thought-provoking commenters. Pundit Badges are awarded based on a strong history of insightful comments."),e)}break;case"predictor":if(level_aquired){switch(user_level){case 1:k='<span class="'+user_type+'_title title">';k+=sprintf(_("%s is a Predictor!"),e)+"</span>";m+=sprintf(_("%s has an amazing track record predicting the future on HuffPost's Predict the News -- play now!"),e);break;case 11:k='<span class="'+user_type+'_title title">';k+=sprintf(_("%s is a Level 1 Olympics Predictor!"),e)+"</span>";break;case 12:k='<span class="'+user_type+'_title title">';k+=sprintf(_("%s is a Level 2 Olympics Predictor!"),e)+"</span>";break;case 13:k='<span class="'+user_type+'_title title">';k+=sprintf(_("%s is a Level 3 Olympics Predictor!"),e)+"</span>";break;case 14:k='<span class="'+user_type+'_title title">';k+=sprintf(_("%s is a Level 1 Olympics Predictor Winner!"),e)+"</span>";break;case 15:k='<span class="'+user_type+'_title title">';k+=sprintf(_("%s is a Level 2 Olympics Predictor Winner!"),e)+"</span>";break;case 16:k='<span class="'+user_type+'_title title">';k+=sprintf(_("%s is a Level 3 Olympics Predictor Winner!"),e)+"</span>";break}}break;case"pledge":if(level_aquired){switch(user_level){case 1:k='<span class="'+user_type+'_title title">';k+=sprintf(_("%s has taken the Third World America pledge!"),e)+"</span>";m+=sprintf(_("%s pledges to rebuild the American Dream and prevent a Third World America."),e);break}}break;case"sponsor":k='<span class="sponsor_badge_title title">'+_("Sponsor Badge")+"</span>";m+='<span class="arial_16 bold">'+_("What is this?")+"</span><br/>"+sprintf(_("This comments thread is brought to you by <span class='sponsor_name'>%s</span>."),sponsor_display_name)+" <br/><br/>"+_("We offer our advertisers the opportunity to facilitate meaningful discussion around issues that are relevant to them and our community.<br/><br/>All sponsored comments are clearly marked as such and solely reflect the views of the advertiser. If you have feedback about sponsored comments, please <a href='#' class='sponsor_link'>contact us</a>.");break;case"betatester":k='<span class="'+user_type+'_title title">';k+=sprintf(_("%s is a Beta Tester!"),e)+"</span>";m+=e+" ... "+_("Need a correction");break;case"blogger":k='<span class="'+user_type+'_title title">';k+=sprintf(_("%s has been a HuffPost Blogger since %s."),e,author_created_on)+"</span>";if(author_nickname){m+=sprintf(_("Click %shere%s to see all of %s's articles."),'<a target="_hplink" class="'+user_type+'_link" href="http://www.huffingtonpost.com/'+author_nickname+'">',"</a>",e)}break;case"staff":k='<span class="'+user_type+'_title title">';k+=sprintf(_("%s has been a HuffPost employee since %s."),e,author_created_on)+"</span>";if(author_nickname){m+=sprintf(_("Click %shere%s to see all of %s's articles."),'<a target="_hplink" class="'+user_type+'_link" href="http://www.huffingtonpost.com/'+author_nickname+'">',"</a>",e)}break;case"crimesolver":if(level_aquired){if(user_level<=12){k='<span class="crimesolver_badge_title title">';k+=sprintf(_("%s is a Level %s Crime Solver!"),e,user_level)+"</span>";if("undefined"!=typeof(badge_promo_ad)&&badge_promo_ad["crime-solver"]){var l=badge_promo_ad["crime-solver"];m=k+"<br/><br/>";if(l.commercial_text!=""){m+=l.commercial_text+"<br/><br/>"}k='</td><td align="right" width="100%">'+l.custom_html}m+=sprintf(_("%s has taken one or more Crime quizzes and earned the Crime Solver badge."),e);m+="<br/><br/>"+sprintf(_("Find crime quizzes to win this badge %shere%s."),'<a href="/news/tnt-quizzes" class="bold underline">',"</a>")}}break}if(gift_name.length>0){k+=sprintf(_("'s comments have received a total of <b>%s</b> %s gift badges."),gift_points,gift_name)+"</span>"}if(!hide_learn_more){m+='<br/><br/><a target="_hplink" class="'+user_type+'_link" href="http://www.huffingtonpost.com/p/frequently-asked-question.html#socialnews">'+_("Learn more about Badges")+"</a>"}i.html('<table><tr><td width="64px"><div class="badge_sprite float_left big_badge_'+user_type+user_level+'"></div></td><td valign="middle">'+k+"</td></tr></table>");g.innerHTML=m;var b=jQuery(badge_el).offset();var h=b.left-parseInt(jQuery(".badge_popup_corner.bottom").css("margin-left"))+jQuery(badge_el).width()/2;var f=b.top-jQuery(j).height();if(jQuery(window).scrollTop()<f){jQuery(".badge_popup_corner.bottom").show().css({visibility:"visible"});jQuery(".badge_popup_corner.top").hide().css({visibility:"hidden"})}else{f=b.top+jQuery(badge_el).height();jQuery(".badge_popup_corner.top").show().css({visibility:"visible"});jQuery(".badge_popup_corner.bottom").hide().css({visibility:"hidden"})}j.style.display="block";var a=jQuery(j);a.offset({left:h,top:f});HuffPoUtil.bind(a,"mouseover",this.onMouseOverBadgePopup,null,this);HuffPoUtil.bind(a,"mouseout",this.onMouseOutBadgePopup,null,this)},getActivePopupDiv:function(){var a=document.getElementById("badge_popup");if(!a||(a.style.display=="none")){return null}return a},hideBadgePopup:function(){UserLevels.BadgePopup.badge_popup_timer_id=0;var a=this.getActivePopupDiv();if(!a){return}jQuery(a).unbind();a.style.display="none";jQuery(a).offset({left:-1000,top:-1000})},cancelBadgePopupHiding:function(){if(this.badge_popup_timer_id){clearTimeout(this.badge_popup_timer_id);this.badge_popup_timer_id=0}},onMouseOutBadge:function(){this.cancelBadgePopupHiding();this.badge_popup_timer_id=setTimeout("UserLevels.BadgePopup.hideBadgePopup()",this.timeout)},onMouseOverBadgePopup:function(a){this.cancelBadgePopupHiding()},onMouseOutBadgePopup:function(a){this.cancelBadgePopupHiding();this.badge_popup_timer_id=setTimeout("UserLevels.BadgePopup.hideBadgePopup()",this.timeout)},onBadgeClick:function(a){new_window=window.open(_("http://www.huffingtonpost.com/p/frequently-asked-question.html#socialnews"),"");new_window.focus()}},GiftBadgePopup:{timeout:100,gift_badge_popup_timer_id:0,badge_allowance:0,badge_types:[],inited:false,setTypes:function(a,b){this.badge_allowance=a;this.badge_types=b;if(this.badge_types.length==0){this.badge_allowance=0}},init:function(){if(!this.inited){try{var a=jQuery.parseJSON(jQuery("#gift_badge_allowance").attr("allowance"));var c=jQuery.parseJSON(jQuery("#gift_badge_types").attr("types"));this.setTypes(a,c);this.inited=true}catch(b){this.setTypes(0,[])}}},showBadgePopup:function(c){this.init();this.leftside_popup=c.leftside_popup||false;if(HPConfig.ipad_application){this.leftside_popup=true}is_own_comment=c.is_own_comment||false;badge_el=c.badge_el||false;comment_icons_id=c.comment_icons_id||false;user_name=c.user_name||false;user_id=c.user_id||0;entry_id=c.entry_id||0;comment_id=c.comment_id||0;current_user_name=c.current_user_name||"";current_user_id=c.current_user_id||0;vertical=c.vertical||"";if(is_own_comment||UserLevels.GiftBadgePopup.badge_allowance==0){return}if(this.gift_badge_popup_timer_id){clearTimeout(this.gift_badge_popup_timer_id);this.gift_badge_popup_timer_id=0}var k=document.getElementById("gift_badge_popup");var f=document.getElementById("gift_badge_popup_text");var j=document.getElementById("gift_badge_popup_top");if(!k||!badge_el){return}var l="";l+="<p>"+sprintf(_("You can give <b>%s</b> the following badges"),user_name)+":</p>";common_params="'"+comment_icons_id+"',"+current_user_id+",'"+vertical+"',"+comment_id+","+entry_id+","+user_id+",'"+user_name+"'";var m="";m+='<div class="gift_badge_icons">';var h=UserLevels.GiftBadgePopup.badge_types.length;for(var d=0;d<h;d++){m+='<div class="gift_badge" onclick="UserLevels.GiftBadgePopup.giftBadgeAction('+common_params+","+d+');return false;">';m+='<div class="badge_sprite badge_'+UserLevels.GiftBadgePopup.badge_types[d]["badge_name"].toLowerCase()+'0"></div>';m+=UserLevels.GiftBadgePopup.badge_types[d]["display_name"];m+="</div>"}m+="</div>";l+=m;if(UserLevels.GiftBadgePopup.badge_allowance==1){l+="<p>"+_("You can only give one badge a day, so give it to the best comment you see.")+"</p>"}else{l+="<p>"+sprintf(_("You have %s badges left to give, so give them to the best comments you see."),UserLevels.GiftBadgePopup.badge_allowance)+"</p>"}l+='<p class="gift_badge_learn_more"><a target="_hplink" href="http://www.huffingtonpost.com/macgregor-thomson/gift-badges_b_927585.html">'+_("Learn more about these badges")+"</a></p>";f.innerHTML=l;badge_el_offset_x=(this.leftside_popup?jQuery(badge_el).width()+5:5);badge_el_offset_y=(this.leftside_popup?0:jQuery(k).height()+10);var b=jQuery(badge_el).offset();var g=b.left+badge_el_offset_x;var e=b.top-badge_el_offset_y;k.style.display="block";var a=jQuery(k);a.offset({left:g,top:e});HuffPoUtil.bind(a,"mouseover",this.onMouseOverBadgePopup,null,this);HuffPoUtil.bind(a,"mouseout",this.onMouseOutBadgePopup,null,this)},getActivePopupDiv:function(){var a=document.getElementById("gift_badge_popup");if(!a||(a.style.display=="none")){return null}return a},hideBadgePopup:function(){UserLevels.GiftBadgePopup.timer_id=0;var a=this.getActivePopupDiv();if(!a){return}jQuery(a).unbind();a.style.display="none";jQuery(a).offset({left:-1000,top:-1000})},cancelBadgePopupHiding:function(){if(this.gift_badge_popup_timer_id){clearTimeout(this.gift_badge_popup_timer_id);this.gift_badge_popup_timer_id=0}},onMouseOutBadge:function(){this.cancelBadgePopupHiding();this.gift_badge_popup_timer_id=setTimeout("UserLevels.GiftBadgePopup.hideBadgePopup()",this.timeout)},onMouseOverBadgePopup:function(a){this.cancelBadgePopupHiding()},onMouseOutBadgePopup:function(a){this.cancelBadgePopupHiding();this.gift_badge_popup_timer_id=setTimeout("UserLevels.GiftBadgePopup.hideBadgePopup()",this.timeout)},onBadgeClick:function(a){new_window=window.open("http://www.huffingtonpost.com/p/frequently-asked-question.html#socialnews","");new_window.focus()},giftBadgeAction:function(j,b,d,c,g,k,i,e){var a=UserLevels.GiftBadgePopup.badge_types[e]["badge_id"];var f=UserLevels.GiftBadgePopup.badge_types[e]["badge_name"].toLowerCase();var h=UserLevels.GiftBadgePopup.badge_types[e]["display_name"];if(typeof Comments!=="undefined"){Comments.trackEvent("GiftBadgeAction")}jQuery.ajax({url:"/commentsv3/giftBadgeAction.php?badge_id="+a+"&entry_id="+g+"&comment_id="+c+"&user_id="+b+"&comment_user_id="+k,success:function(q){var p=document.getElementById("gift_badge_popup_text");result=parseInt(q);if(isNaN(result)){return}if(result<0){p.innerHTML=_("Error occurred while trying to award gift badge, please try again later.")}else{if(result==0){p.innerHTML=sprintf(_("You have already awarded the %s badge to this comment."),h)}else{UserLevels.GiftBadgePopup.badge_allowance--;var m=document.getElementById(j);var t=m?m.innerHTML:"";if(m&&t.indexOf(f)<0){newInnerHTML='<div class="badge_sprite badge_'+f+'0" ';newInnerHTML+='onmouseout="UserLevels.BadgePopup.onMouseOutBadge();" ';newInnerHTML+='onmouseover="UserLevels.BadgePopup.showBadgePopup({ ';newInnerHTML+="badge_el: this, ";newInnerHTML+="user_name: '"+i+"', ";newInnerHTML+="user_type: '"+f+"', ";newInnerHTML+="user_level: 0, ";newInnerHTML+="gift_points: 1, ";newInnerHTML+="gift_name: '"+h+"', ";newInnerHTML+='});" ';newInnerHTML+="onclick=\"UserLevels.BadgePopup.onBadgeClick('"+i+"');\">";newInnerHTML+="</div>";var r=jQuery(m).children(".badge_sprite").length;if(r%4==0&&r!=0){newInnerHTML="<br/>"+newInnerHTML}m.innerHTML=m.innerHTML+newInnerHTML}var n="<p>"+sprintf(_("You have awarded <b>%s</b>'s comment the <b>%s</b> gift badge"),i,h)+"</p>";var o=HuffPrefs;var l=o.get("twitter");var s=o.get("facebook");if(l||s){n+="<br/><br/><p>"+_("Share your action with your friends on")+":</p><br/><br/>";if(s){n+='<div class="gift-badge-share-button gift-badge-share-fb" onclick="UserLevels.Share.facebook('+c+",'"+i+"','"+h+"');return false\"></div>"}if(l){n+='<div class="gift-badge-share-button gift-badge-share-tw" onclick="UserLevels.Share.twitter('+c+",'"+i+"','"+h+"');return false\"></div>"}n+='<div class="clear"></div>'}p.innerHTML=n}}},failure:function(){HPError.throwError("giftBadgeAction ajax error")}})}},Share:{facebook:function(b,h,e){var d=sprintf(_("%s's Comment On Huffington Post"),h);var f="";var a=sprintf(_("I just gave %s a %s gift badge for their comment on The Huffington Post. Check out their comment. It's awesome!"),h,e);var g="#comment_share_"+b+"_data_link";var i=jQuery(g).text();var c=jQuery("#comment_"+b).children(".comment_top").children(".comment_top_inner").children(".author_photo").children("img").attr("src");if(c.indexOf("facebook.com")!=-1){c=HPConfig.image}Sharer.Facebook.share({facebook_post:{message:a,attachment:{name:d,description:f,href:i,media:[{type:"image",src:c,href:i}]},callback:function(j){}},links:[]});return false},twitter:function(a,e,d){var c="#comment_share_"+a+"_data_link";var b=jQuery(c).text();var f=sprintf(_("I just gave @%s a %s gift badge on @huffingtonpost "),e,d);Sharer.Twitter.share({tweet_text:f,links:[{url:b,make_short:true,insert_type:"add_to_end"}],on_success_callback:function(){HuffConnect.hideModal();Sharer.Twitter.connect_modal()},on_success_callback_params:0,on_success_timeout:1000,add_via:false});return false}},Agreement:{participation:false,badges_box_enabled:false,box_animation:false,activate:function(a){if(!HuffCookies.getUserId()){return}if(HPConfig.user_badges_participation){this.participation=true}if(a.slider==true){this.Slider.activate(this)}if(a.checkbox){this.Checkbox.activate(this,a.checkbox.listen_on_id,a.checkbox.input_id)}},set_participation:function(a){this.participation=a;this.update_badges_box()},flip_participation:function(){this.set_participation(!this.get_participation())},get_participation:function(){return this.participation},update_badges_box:function(){var c=document.getElementById("all_user_levels");if(!c){return}var b={height:0,marginBottom:0};if(this.get_participation()){c.style.height="0px";c.style.display="block";var a=134+Math.floor(jQuery(".data .item",c).length/4)*50;b={height:a,marginBottom:15}}if(!this.box_animation){jQuery(c).animate(b,{duration:500,complete:function(){if(parseInt(jQuery(this).css("height"))<10){this.style.display="none"}}})}},update_server_side:function(){jQuery.ajax({url:"/users/user_level_json.php?action=badges_participate&state="+(this.participation==true?"true":"false"),cache:false})},Checkbox:{A:false,activated:false,checkbox:false,nodeName:false,activate:function(a,b,c){this.A=a;if(!HuffCookies.getUserId()){return}this.checkbox=document.getElementById(c);if(!this.checkbox){return}if(HPBrowser.isIE6()||HPBrowser.isIE7()){if(!this.A.get_participation()){this.checkbox.setAttribute("checked",false)}else{this.checkbox.setAttribute("checked",true)}}else{if(!this.A.get_participation()){this.checkbox.checked=false}else{this.checkbox.checked=true}}HuffPoUtil.bind("#"+b,"click",this.catch_click,null,this);this.activated=true},catch_click:function(a){console.log("click");this.nodeName=(a.srcElement||a.target).nodeName.toLowerCase();this.A.flip_participation();this.Hint.show();this.change_state();this.A.Slider.change_state();this.A.update_server_side()},change_state:function(){if(!this.activated||!this.checkbox){return}if(this.nodeName!="input"){if(HPBrowser.isIE6()||HPBrowser.isIE7()){if(!this.A.get_participation()){this.checkbox.setAttribute("checked",false)}else{this.checkbox.setAttribute("checked",true)}}else{if(!this.A.get_participation()){this.checkbox.checked=false}else{this.checkbox.checked=true}}}},Hint:{activated:false,hint:false,animation:false,animation_attributes:{},hint_timer:false,activate:function(){if(this.activated){return}if(!this.hint){this.hint=document.getElementById("badge_participating_updated");if(!this.hint){return}}this.activated=true},animate:function(){jQuery(this.hint).animate(this.animation_attributes,{duration:1500,complete:function(){if(parseInt(jQuery(this).css("opacity"))<0.5){this.style.display="none"}}})},show:function(){this.activate();if(!this.activated){return}this.animation_attributes={opacity:1};this.animate();this.hint.style.display="block";clearTimeout(this.hint_timer);this.hint_timer=setTimeout("UserLevels.Agreement.Checkbox.Hint.hide()",3000)},hide:function(){this.activate();if(!this.activated){return}clearTimeout(this.hint_timer);this.animation_attributes={opacity:0};this.animate()}}},Slider:{A:false,activated:false,slider_holder:false,amination:false,animation_attributes:{},activate:function(a){this.A=a;this.slider_holder=document.getElementById("badges_participate_slider");if(this.A.get_participation()){this.slider_holder.style.backgroundPosition="left 0"}else{this.slider_holder.style.backgroundPosition="right 0"}this.Tip.activate();HuffPoUtil.bind("#badges_participate_slider","click",this.catch_click,null,this);document.getElementById("badges_participate_switcher").style.display="block";this.activated=true},catch_click:function(){this.A.flip_participation();if(!this.A.get_participation()){this.Tip.show()}else{this.Tip.quickly_hide()}this.change_state();this.A.Checkbox.change_state();this.A.update_server_side()},change_state:function(){if(!this.activated||!this.slider_holder){return}if(this.A.get_participation()){jQuery(this.slider_holder).css("backgroundPosition","left 0")}else{jQuery(this.slider_holder).css("backgroundPosition","right 0")}},animate:function(){},Tip:{state:false,activated:false,tip:false,triangle:false,close_button:false,animation:false,tri_animation:false,animation_attributes:{},tri_animation_attributes:{},tip_timer:false,activate:function(){if(this.activated){return}if(!this.tip){this.tip=document.getElementById("badges_participate_tip");if(!this.tip){return}}if(!this.close_button){this.close_button=document.getElementById("badges_participate_tip_close");if(!this.close_button){return}}if(!this.triangle){this.triangle=document.getElementById("badges_participate_tip_triangle");if(!this.triangle){return}}this.tip.style.display="none";this.triangle.style.display="none";HuffPoUtil.bind(this.close_button,"click",this.quickly_hide,null,this);this.activated=true},animate:function(){jQuery(this.tip).animate(this.animation_attributes,{duration:1500,complete:function(){if(parseInt(jQuery(this).css("opacity"))<0.5){this.style.display="none"}}});jQuery(this.triangle).animate(this.tri_animation_attributes,{duration:1500,complete:function(){if(parseInt(jQuery(this).css("opacity"))<0.5){this.style.display="none"}}})},show:function(){this.activate();if(!this.activated){return}jQuery(this.tip).css("display","block").css("opacity","0");jQuery(this.triangle).css("display","block").css("opacity","0");this.animation_attributes={opacity:1};this.tri_animation_attributes={opacity:1};this.animate();clearTimeout(this.tip_timer);this.tip_timer=setTimeout("UserLevels.Agreement.Slider.Tip.hide()",5000)},quickly_hide:function(){this.tip.style.display="none";this.triangle.style.display="none"},hide:function(){this.activate();if(!this.activated){return}clearTimeout(this.tip_timer);this.animation_attributes={opacity:0};this.tri_animation_attributes={opacity:0};this.animate()}}}},update_beta_tester_mode:function(){jQuery.ajax({url:"/users/user_level_json.php?action=badges_betatester&state="+(isBT?"false":"true"),cache:false,dataType:"html",success:function(a,b){isBT=(a==="true")?true:false}})}};var AwardCommentBadge={badges:"",giftBadges:"",ieResized:{},init:function(){this.fansystem();this.pagination();this.bindEventsToGiftBadges();this.ieFix(1);jQuery("#more_badges").live("click",function(){if(jQuery("div.comments-badges-single-badge-hidden:visible").length){jQuery("div.comments-badges-single-badge-hidden").hide(200);jQuery("#more_badges").text("more..")}else{jQuery("div.comments-badges-single-badge-hidden").show(200);jQuery("#more_badges").text("less..")}})},favComment:function(c,a,b){var d=document.getElementById("best_"+c);if(d&&(d.innerHTML.indexOf("Marked")==-1)&&(d.innerHTML.indexOf("Favorited")==-1)){this.trackEvent("Favorite");jQuery.ajax({url:"/include/flagComment.php?type=best&blog_id="+b+"&cmt_id="+c+"&entry_id="+a,success:function(e){result=parseInt(e);if(isNaN(result)){return}if(result<0){d.innerHTML="Already Favorited ("+(-result)+")"}else{d.innerHTML="Favorited ("+result+")"}},failure:function(){}})}},fansystem:function(){huff.use("fansystem",function(a){jQuery(document).delegate(".become_fan_link","click",function(b){b.preventDefault();if(!jQuery(this).length){return}var c=jQuery.trim(jQuery(this).attr("id").replace("become_fan_of_",""))||"";a.becomeFan(c);return});jQuery(document).delegate(".remove_fan_link","click",function(d){d.preventDefault();if(!jQuery(this).length){return}var b=jQuery.trim(jQuery(this).attr("id").replace("remove_fan_of_",""))||"";var c=b.split("_");a.removeFan(c[0],c[1]);return})})},pagination:function(){if(!jQuery("div.comments-badges-arrow-right")||!jQuery("div.comments-badges-arrow-left")){return false}jQuery("div.comments-badges-arrow-right").live("click",function(){var a=jQuery("div.comments-badges-tread").children("div[class!='clear']:visible");var c=a.next("div[class!='clear']");var b=jQuery("div.comments-badges-pages-counter").children().first();if(!c.length){var c=jQuery("div.comments-badges-tread").children("div[class!='clear']").first();b.text(1)}else{b.text(b.text()*1+1)}a.hide();c.show();AwardCommentBadge.ieFix(b.text()*1)});jQuery("div.comments-badges-arrow-left").live("click",function(c){var a=jQuery("div.comments-badges-tread").children("div[class!='clear']:visible");var b=a.prev("div[class!='clear']");var d=jQuery("div.comments-badges-pages-counter").children().first();if(!b.length){var b=jQuery("div.comments-badges-tread").children("div[class!='clear']").last();d.text(jQuery("div.comments-badges-pages-counter").children().last().text()*1)}else{d.text(d.text()*1-1)}a.hide();b.show();AwardCommentBadge.ieFix(d.text()*1)})},bindEventsToGiftBadges:function(){if(!jQuery("a.share_favorite_comment_popup_trigger")){return false}jQuery.each(jQuery("a.share_favorite_comment_popup_trigger"),function(a,d){var b=jQuery(d);if(AwardCommentBadge.giftBadges[b.attr("comment_id")]&&!b.attr("isGiftBadgeBinded")){var c=AwardCommentBadge.giftBadges[b.attr("comment_id")];b.bind("click",function(){UserLevels.BadgePopup.onBadgeClick(c.comment_user_name)});b.bind("mouseout",function(){UserLevels.GiftBadgePopup.onMouseOutBadge()});b.bind("mouseover",function(){c.badge_el=b;UserLevels.GiftBadgePopup.showBadgePopup(c)});b.attr("isGiftBadgeBinded",true)}})},ieFix:function(b){if(!this.ieResized[b]&&jQuery.browser.version<=7&&jQuery.browser.msie){this.ieResized[b]=true;var a=(jQuery(".comments-badges-tread:visible").height()/2)-(jQuery(".comments-badges-right-block:visible").height()/2)-12;jQuery(".comments-badges-right-block:visible").css("margin-top",a+"px");jQuery(".comments-badges-monster-badge:visible").css("margin-top",a+"px")}}};
function PopUp(d){this.activated=false;this.wrong_params=false;this.opts={};this.holders={};var b=["display_mode","lazy_init","place_type","offset","position","showcase_timeout","timeout","popup_event_callback","type"];var c=b.length,j;for(var h=0;h<c;h++){j=b[h];if(d[j]){this.opts[j]=d[j]}}if(!this.opts.place_type){this.wrong_params=true;return false}var g=jQuery(d.target);if(g.length===0){this.opts.lazy_init=true}else{this.holders.target_id=d.target;this.holders.target=g}if(!d.trigger){d.trigger=[]}else{if(!HuffPoUtil.isArray(d.trigger)){d.trigger=[d.trigger]}}this.holders.triggers={};this.holders.trigger_selectors=[];var i=d.trigger.length,f;for(var e=0;e<i;e++){f=jQuery(d.trigger[e]);if(f.length!==0){this.holders.triggers[d.trigger[e]]=f;this.holders.trigger_selectors.push(d.trigger[e])}}if(!this.opts.timeout){this.opts.timeout=500}if(!this.opts.showcase_timeout){this.opts.showcase_timeout=500}if(this.opts.display_mode){this.opts.display_mode="advanced"}if(!this.opts.type){this.opts.type="common"}switch(this.opts.place_type){case"at_position":if(!d.position){this.wrong_params=true;return false}this.opts.position=d.position;break;case"near_trigger":if(!d.offset){this.wrong_params=true;return false}this.opts.offset=d.offset;break}if(!this.opts.lazy_init){this.activate()}}PopUp.prototype={};PopUp.prototype.activate=function(){if(this.activated){return true}if(this.wrong_params){return false}var e="popup_"+this.holders.target_id;var c=document.createElement("div");this.holders.holder_id=e;this.holders.holder=c;c.setAttribute("id",e);jQuery(c).css("display","none");jQuery(c).css("zIndex","4");switch(this.opts.place_type){case"at_position":jQuery(c).css("position","absolute");jQuery(c).offset({left:this.opts.position.x,top:this.opts.position.y});break;case"near_trigger":jQuery(c).css("position","absolute");break}if(this.opts.display_mode=="advanced"){}if(this.opts.type=="left_side"){jQuery(this.holders.target).addClass("left_side")}this.holders.target.parentNode.appendChild(c);this.holders.target.parentNode.removeChild(this.holders.target);c.appendChild(this.holders.target);HuffPoUtil.bind(c,"mouseover",this.showcaseCountdown,{esource:"holder"},this);HuffPoUtil.bind(c,"mouseout",this.start_hide,{esource:"holder"},this);var a=this.holders.trigger_selectors.length,b;for(var d=0;d<a;d++){HuffPoUtil.bind(this.holders.triggers[this.holders.trigger_selectors[d]],"mouseover",this.showcaseCountdown,{esource:"trigger",trigger_selector:this.holders.trigger_selectors[d]},this);HuffPoUtil.bind(this.holders.triggers[this.holders.trigger_selectors[d]],"mouseout",this.start_hide,{esource:"trigger",trigger_selector:this.holders.trigger_selectors[d]},this)}this.activated=true};PopUp.prototype.addTrigger=function(b){var a=jQuery(b);if(a.length===0){return false}this.holders.trigger_selectors.push(b);this.holders.triggers[b]=a;HuffPoUtil.bind(a,"mouseover",this.showcaseCountdown,{esource:"trigger",trigger_selector:b},this);HuffPoUtil.bind(a,"mouseout",this.start_hide,{esource:"trigger",trigger_selector:b},this)};PopUp.prototype.setTarget=function(b){var a=document.getElementById(b);if(!a){return false}this.holders.target_id=b;this.holders.target=a;this.activate()};PopUp.prototype.showcaseCountdown=function(a){var b=this;this.cancelHiding();this.showcase_timeout_id=setTimeout(function(){b.show(a.data)},this.opts.showcase_timeout)};PopUp.prototype.cancelShow=function(){if(this.showcase_timeout_id){clearTimeout(this.showcase_timeout_id);this.showcase_timeout_id=0}},PopUp.prototype.show=function(c){this.cancelHiding();this.cancelShow();jQuery(this.holders.holder).css("display","block");if(this.opts.place_type=="near_trigger"&&c.esource=="trigger"){var b=this.holders.triggers[c.trigger_selector];var a=b.offset();jQuery(this.holders.holder).offset({top:parseInt(a.top)+parseInt(this.opts.offset.y),left:parseInt(a.left)+parseInt(this.opts.offset.x)});if(this.opts.display_mode=="advanced"){jQuery(this.holders.target).css("display","block")}if(this.opts.popup_event_callback){this.opts.popup_event_callback.funct.apply(this.opts.popup_event_callback.scope,[{trigger_selector:c.trigger_selector},this.opts.popup_event_callback.params])}}clearTimeout(this.timeout_id)};PopUp.prototype.cancelHiding=function(){if(this.timeout_id){clearTimeout(this.timeout_id);this.timeout_id=0}},PopUp.prototype.start_hide=function(a){this.cancelHiding();this.cancelShow();var b=this;this.timeout_id=setTimeout(function(){b.hide()},this.opts.timeout)};PopUp.prototype.hide=function(){jQuery(this.holders.holder).css("display","none");if(this.opts.display_mode=="advanced"){jQuery(this.holders.target).css("display","none")}clearTimeout(this.timeout_id)};
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});var HuffConnect={loadConnectModal:function(a){HPConnect.Login();return},SignUp:{Facebook:function(a){setTimeout(function(){HPFB.ensureInit(function(){HPFB.waitForSession(function(){HPFB.getFBInfo(function(b){Provider.user_provider_info.facebook={};Provider.user_provider_info.facebook.profile_image=b[0].pic_square;Provider.user_provider_info.facebook.screen_name=b[0].name;Provider.user_provider_info.facebook.id=b[0].uid;Provider.user_provider_info.facebook.email=b[0].email||"";if(/proxymail.facebook.com/.test(Provider.user_provider_info.facebook.email)){Provider.user_provider_info.facebook.email=""}Provider.user_provider_info.facebook.Status="new_user";setTimeout(function(){huff.use("connect/auth","connect/modal","connect/provider",function(d,e,c){c.loadModal("facebook")})},500);return})},{fb_signup:true})})},1000)}},Login:{is_become_fan:false,callbacks:{},onLoginSuccess:function(){huff.use("connect/auth",function(a){a.Login.updateLoginStatus()})},FacebookSuccess:function(a,b){document.cookie=document.cookie;var d=HuffCookies;if(b&&b.autologin){d.setCookie("autologin","1",2)}switch(a.msg){case"success":d.destroyCookie("autologin");d.set("snn_popup_needed","1","1");var c=window.QuickLogin||false;if(c&&"function"==typeof c.FacebookLoginCallback){this.registerCallback("after_facebook_login",c.FacebookLoginCallback,"facebook")}this.callback("after_facebook_login");break;case"self_closed_user":case"new_user":if(linkSocialAccount.linkOptions.disable_connect===true){linkSocialAccount.linkOptions.callback("facebook","new_user")}else{HuffConnect.SignUp.Facebook(a.msg)}break;case"prompt_for_connect":HuffConnect.hideModal();linkSocialAccount.provider="facebook";linkSocialAccount.FacebookPromtLogin();break;default:this.FacebookFail(a);break}return},FacebookFail:function(b){var a=HuffConnect.Login;if(b.argument&&b.argument.autologin){HuffCookies.setCookie("autologin","1",2)}if(b.tld!=null){HPError.d("ServiceLoginFail",b)}else{if(b.is_error){HPError.d("ServiceLoginFail2",b)}}if(typeof(a.is_become_fan)!="undefined"){a.is_become_fan=false}return},registerCallback:function(a,c,b){if("undefined"==typeof(b)){b=false}if(a&&"function"==typeof c){this.callbacks[a]={Func:c,ProviderName:b}}return},callback:function(a){if(a&&"undefined"!=typeof this.callbacks[a]&&"function"==typeof this.callbacks[a].Func){if(!HPUtil.isUSAVersion()){window.XDAuth&&XDAuth.syncRemoteWithLocal("login",[{args:[],on_success:HuffConnect.Login.callbacks[a].Func}])}else{this.callbacks[a].Func()}return}else{if(!HPUtil.isUSAVersion()){var b=function(){HuffConnect.hideModal();HuffConnect.Login.onLoginSuccess();return};if("after_facebook_login"==a){window.XDAuth&&XDAuth.syncRemoteWithLocal("login",[{args:[],on_success:b}])}else{window.XDAuth&&XDAuth.syncRemoteWithLocal("login",[{args:[],on_success:b}])}}else{HuffConnect.hideModal();this.onLoginSuccess()}return}}},SocialLogout:function(c,a,b){if("undefined"!=typeof b){b=false}if(a!==false){a=true}if(!c){c=""}SNProject.track(HuffCookies.getUserId(),"user_log_out");huff.use("provider/logout",function(d){d.Main(c,a,b)});return},loader_active:false,socialModal:function(c){if(HuffConnect.loader_active){HuffConnect.loader_active=false;HuffConnect.hideModal()}c=c||{};if(c.modal_head_image||""==c.modal_head_image){c.modal_head_image=c.modal_head_image}else{c.modal_head_image='<img width="500" height="40" alt="" src="'+_("/images/social-profile/lightbox/huffpo_logo_lightbox.png")+'"/>';if(HPConfig&&HPConfig.site){switch(HPConfig.site){case"stylelist":c.modal_head_image='<img class="margin_5_0" height="42" alt="" src="'+_("/images/social-profile/lightbox/stylelist_logo_lightbox.png")+'"/>';break;case"france":c.modal_head_image='<img width="500" height="40" alt="" src="'+_("/images/v/france/social-profile/lightbox/social-news-lightbox.png")+'"/>';break;case"canada-quebec":c.modal_head_image='<img width="500" height="40" alt="" src="'+_("/images/v/canada-quebec/social-profile/lightbox/social-news-lightbox.png")+'"/>';break;case"spain":case"voces":c.modal_head_image='<img width="500" height="50" alt="" src="'+_("/images/v/spain/social-profile/lightbox/social-news-lightbox.png")+'"/>';break;case"italy":c.modal_head_image='<img width="500" height="50" alt="" src="'+_("/images/v/italy/social-profile/lightbox/social-news-lightbox.png")+'"/>';break}}}if(c.modal_subhead_image||""==c.modal_subhead_image){c.modal_subhead_image=c.modal_subhead_image}else{c.modal_subhead_image='<img height="22" alt="" src="'+_("/images/social/benefits/social_logo_inner.png")+'"/>';if(HPConfig&&HPConfig.site){switch(HPConfig.site){case"canada-quebec":c.modal_subhead_image="";break;case"stylelist":case"spain":c.modal_subhead_image="";break;case"voces":c.modal_subhead_image="";break;case"italy":c.modal_subhead_image="";break}}}c.inner_wrapper_class=(c.inner_wrapper_class)?c.inner_wrapper_class:"";c.width=(c.width)?c.width:680;c.onshow=("function"==typeof c.onshow)?c.onshow:false;c.onclose=("function"==typeof c.onclose)?c.onclose:false;c.inner_html=c.inner_html||"";c.url=c.url||"";c.type=c.type||"GET";c.cache=(c.cache===false)?false:true;c.position=c.position||"absolute";c.content="";var a="";var b="";if((c.modal_head_image||c.modal_subhead_image)&&HPConfig.current_vertical_id!=43){a+='<div class="hp_blue_lb_head_image">'+c.modal_head_image+"</div>";if("france"!=HPConfig.site&&HPConfig.current_vertical_name!="canada-quebec"){a+='<div class="hp_blue_lb_head_subimage margin_top_5">'+c.modal_subhead_image+"</div>"}a+='<div class="hp_blue_lb_hr"></div>'}b+='<div><div class="'+c.inner_wrapper_class+'">';b+=a;b+='<div class="social_modal_content">'+c.inner_html+"</div>";b+="</div></div>";c.content+=b;if(!c.inner_html&&c.url){if(HuffConnect.socialModalCache&&HuffConnect.socialModalCache[c.url]){c.inner_html=HuffConnect.socialModalCache[c.url];delete (c.url);HuffConnect.socialModal(c);return}else{c.content='<div style="width:32px; height:32px; background:url(http://s.huffpost.com/images/loader.gif);margin:33px auto;"></div>';jQuery.ajax({url:c.url,type:c.type,success:function(f,e,d){HuffConnect.hideModal();if(d.status!=200){return}if(c.cache){HuffConnect.socialModalCache={};HuffConnect.socialModalCache[c.url]=f}c.inner_html=f;delete (c.url);HuffConnect.socialModal(c);return},error:function(){HPError.e();return}})}}huff.use("modal",function(d){var e={content:c.content,width:(c.url)?300:c.width,onshow:(!c.url)?c.onshow:false,onclose:(!c.url)?c.onclose:false,position:(!c.url)?c.position:"fixed"};d.show(e)});return},hideModal:function(a){a=a||false;huff.use("modal",function(b){b.hide();if("function"==typeof(a)){a()}return})},showLoader:function(){huff.use("modal",function(a){a.show({content:'<div style="width:32px; height:32px;margin:33px auto;"><img src="http://s.huffpost.com/images/loader.gif"></div>',width:300});return});HuffConnect.loader_active=true;return},showMask:function(){jQuery('<div id="hp_modal_mask" style="position:fixed; z-index: 800; left:0px; top:0px;width:100%; height:100%; background:#000; opacity:0.7; filter:alpha(opacity=70);"></div>').prependTo("body");return},hideMask:function(){jQuery("#hp_modal_mask").remove();return},ShowEmbed:function(){this.ChangeEmbedState("visible",selector)},HideEmbed:function(){this.ChangeEmbedState("hidden",selector)},ChangeEmbedState:function(g,b){if(typeof b=="undefined"){var f=document.getElementsByTagName("object");var e=document.getElementsByTagName("embed");for(var d=0;d<e.length;d++){e[d].style.visibility=g;if(e[d].getAttribute("belongs_modal")){e[d].style.display="visible"==g?"block":"none"}}}else{f=jQuery(b)}for(d=0;d<f.length;d++){f[d].style.visibility=g;if(f[d].getAttribute("belongs_modal")){f[d].style.display="visible"==g?"block":"none"}}var c=["curtainunit","ad_leaderboard_top","ad_store_leaderboard_top"];for(d=0;d<c.length;d++){var a=jQuery("#"+c[d]);if(a.length){a.css("visibility",g);if(a.attr("belongs_modal")){a.css("display","visible"==g?"block":"none")}}}}};
var ConnectOverview={config:null,current_page:null,interval_id:null,auto_paging_timeout_id:null,showBenefits:function(c){HuffConnect.hideModal();var a=c.provider||null;var b="";this.configureModal(a);this.clearIntervals();return},configureModal:function(e,c){var d=_("/images/social/benefits/")+e+"/";huff.use("user","connect/auth","connect/modal");switch(e){case"facebook":var a={type:"facebook",text:_("Connect to the Huffington Post through Facebook"),slides:[d+"facebook_benefit1.jpg",d+"facebook_benefit2.jpg",d+"facebook_benefit3.jpg"]};break;case"twitter":var a={type:"twitter",text:_("Connect to the Huffington Post through Twitter"),slides:[d+"twitter_benefit1.jpg",d+"twitter_benefit2.jpg",d+"twitter_benefit3.jpg",d+"twitter_benefit4.jpg"]};break;default:HPConnect.Login();return;break}return;if(a){this.config=a;var b=this.getHtml(c);this.showLightbox(b)}return},showLightbox:function(c){c='<div class="social_benefit_modal">'+c+"</div>";var b=function(){ConnectOverview.auto_paging_timeout_id=setTimeout(function(){ConnectOverview.startAutoPaging()},5000)};var d=false;var a="fixed";HuffConnect.socialModal({inner_html:c,width:680,onclose:d,onshow:b,position:a});return},closeLightbox:function(){HuffConnect.hideModal()},showPage:function(e){for(var b=0,d=this.config.slides.length;b<d;b++){var c=jQuery("#benefit_page_"+b);var a=jQuery("#benefit_slide_"+b);if(b==e){a.removeClass("display_none");c.removeClass("active_page_link").addClass("passive_page_link").unbind("click");this.current_page=e}else{a.addClass("display_none");c.removeClass("passive_page_link").addClass("active_page_link").unbind("click").click({page:b},function(f){ConnectOverview.showPage(f.data.page)})}}return},prevPage:function(){var a=this.current_page-1;if(a<0){a=(this.config.slides.length-1)}this.showPage(a)},nextPage:function(){var a=this.current_page+1;if(a>=this.config.slides.length){a=0}this.showPage(a)},autoPaging:function(){this.nextPage();return},getHtml:function(j){var b=this.config;var e="";var f="";var c="";var a=1;var h=_("/images/social/benefits/")+b.type+"_button_big.png";c+='<div class="float_left benefit_bg benft_left_arr" onclick="ConnectOverview.prevPage();"></div>';for(var d=0;d<b.slides.length;d++){var g=(d===0)?"":"display_none";c+='<div class="'+g+' single_slide float_left" id="benefit_slide_'+d+'"><img id="benefit_img_src_'+d+'" src="'+b.slides[d]+'" /></div>';f+='<span class="benefit_pages '+(d==0?"passive":"active")+'_page_link" id="benefit_page_'+d+'">'+a+"</span>";this.current_page=d;a++}c+='<div class="float_left benefit_bg benft_right_arr" onclick="ConnectOverview.nextPage();"></div>';c+='<div class="clear" style="clear:both;"></div>';e+='<div class="social_benefits social_benefits_lightbox" id="benefits_lb">';e+='<div class="social_link_text center">'+b.text+"</div>";e+='<div class="center"><a href="javascript:void(0);" onclick="linkSocialAccount.checkLoginStatus(\''+b.type+'\')"><img src="'+h+'" /></a></div>';e+='<div class="benefit_paging" style="text-align:right">'+f+'<div class="clear"></div></div>';e+='<div class="benefit_slides" id="slideshow_div">'+c+"</div>";e+='<div class="clear"></div><br class="clear" />';e+="</div>";return e},startAutoPaging:function(){this.interval_id=self.setInterval(function(){ConnectOverview.autoPaging()},5000)},clearIntervals:function(b){var a=b||this;if(a.auto_paging_timeout_id){clearTimeout(a.auto_paging_timeout_id)}if(a.interval_id){clearInterval(a.interval_id)}},showQuickModal:function(d){var c=d.charAt(0).toUpperCase()+d.substr(1,d.length-1);var b="";var a="";switch(d){case"facebook":a=_("/images/fb-large.gif");break;case"twitter":a=_("/images/Sign-in-with-Twitter-darker.png");break;default:return}b+='<div style="font-size: 14pt; font-weight: bold">'+sprintf(_("Do you want to connect to HuffPost using %s"),c)+"?</div>";b+='<a class="login_light_link" ';b+='href="/social/join.html?autojoin=1" ';b+="onclick=\"linkSocialAccount.checkLoginStatus('"+d+"'); return false;\"";b+='target="_blank">';b+='<img border="0" src="'+a+'" alt="'+sprintf(_("Connect with %s"),c)+'" style="padding: 16px;"/>';b+="</a>";HuffConnect.socialModal({inner_html:b,modal_subhead_image:""});return}};
BingPageModule={app_id:"6AE728F21E27915214035B81C99B54592DE4D651",offset:0,limit:{Video:4,Image:3,Web:2},count_image:3,count_web:2,search_type:"",search_text:"",bing_container:"",search_url:"",web_url:"",videos_url:"",images_url:"",hp_url:"",atdm_imp_pixel:"",imr_imp_pixel:"",bing_df_tag:"",interclick_url:"http://idcs.interclick.com/Segment.aspx?sid=697a8088-0d41-4f72-9fb6-5bc7ecc099e8",version:"",ord:"",track_click:function(){HPTrack.trackPageview("/t/a/bing/2/out/"+escape(BingPageModule.search_text));jQuery.ajax({type:"post",url:"/ajax/bing/clicks_tracking.php",data:"keyword="+escape(this.bingText.value)+"&vertical_id="+HPConfig.current_vertical_id})},entry_extra_sort_bing:"",bing_metrics_bing_qtr_click_video:"",bingText:null,bingButton:null,bing_logo:null,bing_hp:null,bing_search_script:null,bing_item_web:null,bing_item_video:null,bing_item_image:null,entries:null,a_bing_videos:null,a_bing_web:null,a_bing_images:null,head:null};BingPageModule.setBingListeners=function(){E.removeListener(BingPageModule.bingButton);E.removeListener(BingPageModule.bing_logo);E.removeListener(BingPageModule.see_more);E.removeListener(BingPageModule.bing_hp);E.addListener(BingPageModule.bing_hp,"click",function(){this.track_click();window.open(BingPageModule.hp_url)},this,true);E.addListener(BingPageModule.bing_logo,"click",function(){this.track_click();window.open(this.search_url+"?q="+escape(BingPageModule.bingText.value))},this,true);E.addListener(BingPageModule.bingButton,"click",function(){this.track_click();BingPageModule.bingSearch();window.open(this.search_url+"?q="+escape(BingPageModule.bingText.value))},this,true);E.addListener(BingPageModule.see_more,"click",function(){switch(BingPageModule.search_type){case"Video":imr=BingPageModule.imr_videos_url;s_url=this.videos_url+"?q="+escape(BingPageModule.bingText.value);break;case"Image":imr=BingPageModule.imr_images_url;s_url=this.images_url+"?q="+escape(BingPageModule.bingText.value);break;case"Web":imr=BingPageModule.imr_web_url;s_url=this.web_url+"?q="+escape(BingPageModule.bingText.value);break}this.track_click();window.open(s_url)},this,true)};BingPageModule.bingStart=function(){BingPageModule.bing_container=$("bing_container");BingPageModule.bingText=$("sb_form_q");BingPageModule.bingButton=$("sb_form_go");BingPageModule.bing_logo=$("bing_logo");BingPageModule.bing_search_script=$("bing_search_script");BingPageModule.bing_item_web=$("bingItemWeb");BingPageModule.bing_item_video=$("bingItemVideo");BingPageModule.bing_item_image=$("bingItemImage");BingPageModule.entries=$("entries");BingPageModule.a_bing_videos=$("a_bing_videos");BingPageModule.a_bing_web=$("a_bing_web");BingPageModule.a_bing_images=$("a_bing_images");BingPageModule.head=document.getElementsByTagName("head");BingPageModule.search_type="Video";var b=Math.random()*100;var a=new Date();b4_june_30_2011=a.getMonth()<6&&a.getYear()<2012;if(b4_june_30_2011&&b<=80){BingPageModule.initVersion();this.bingSearch();HPTrack.trackPageview("/t/a/bing/2/impression/"+escape(this.search_text))}};BingPageModule.initVersion=function(){BingPageModule.version=Math.random()*100;if(BingPageModule.version<50){BingPageModule.version="v0";BingPageModule.search_url=BingPageModule.search_url.v0+BingPageModule.ord;BingPageModule.web_url=BingPageModule.web_url.v0+BingPageModule.ord;BingPageModule.videos_url=BingPageModule.videos_url.v0+BingPageModule.ord;BingPageModule.images_url=BingPageModule.images_url.v0+BingPageModule.ord;BingPageModule.hp_url=BingPageModule.hp_url.v0+BingPageModule.ord;BingPageModule.bing_metrics_bing_qtr_click_video=BingPageModule.bing_metrics_bing_qtr_click_video.v0+BingPageModule.ord;BingPageModule.atdm_imp_pixel=BingPageModule.atdm_imp_pixel.v0;BingPageModule.imr_imp_pixel=BingPageModule.imr_imp_pixel.v0;document.getElementById("bing_bottom").innerHTML='<div style="padding: 12px 0px 0px 445px;"><a id="see_more" href="javascript: void();" ><img id="see_more_image" border="0" src="/images/bing_new/see_more_v.gif" alt="See more" /></a></div>'}else{if((BingPageModule.version>=50)&&(BingPageModule.version<75)){BingPageModule.version="v1";BingPageModule.search_url=BingPageModule.search_url.v1+BingPageModule.ord;BingPageModule.web_url=BingPageModule.web_url.v1+BingPageModule.ord;BingPageModule.videos_url=BingPageModule.videos_url.v1+BingPageModule.ord;BingPageModule.images_url=BingPageModule.images_url.v1+BingPageModule.ord;BingPageModule.hp_url=BingPageModule.hp_url.v1+BingPageModule.ord;BingPageModule.bing_metrics_bing_qtr_click_video=BingPageModule.bing_metrics_bing_qtr_click_video.v1+BingPageModule.ord;BingPageModule.atdm_imp_pixel=BingPageModule.atdm_imp_pixel.v1;BingPageModule.imr_imp_pixel=BingPageModule.imr_imp_pixel.v1;var a=document.createElement("a");a.id="bing_hp";a.style.cursor="pointer";a.href="javascript: void();";a.innerHTML='<div class="HomepageTop"></div>';document.getElementById("bing_header").appendChild(a);document.getElementById("bing_bottom").innerHTML='<div style="padding: 12px 0px 0px 445px;"><a id="see_more" href="javascript: void();" ><img id="see_more_image" border="0" src="/images/bing_new/see_more_v.gif" alt="See more" /></a></div>'}else{BingPageModule.version="v2";BingPageModule.search_url=BingPageModule.search_url.v2+BingPageModule.ord;BingPageModule.web_url=BingPageModule.web_url.v2+BingPageModule.ord;BingPageModule.videos_url=BingPageModule.videos_url.v2+BingPageModule.ord;BingPageModule.images_url=BingPageModule.images_url.v2+BingPageModule.ord;BingPageModule.hp_url=BingPageModule.hp_url.v2+BingPageModule.ord;BingPageModule.bing_metrics_bing_qtr_click_video=BingPageModule.bing_metrics_bing_qtr_click_video.v2+BingPageModule.ord;BingPageModule.atdm_imp_pixel=BingPageModule.atdm_imp_pixel.v2;BingPageModule.imr_imp_pixel=BingPageModule.imr_imp_pixel.v2;document.getElementById("bing_bottom").innerHTML='<div style="padding: 6px 0px 0px 340px;">                                                                <a  id="bing_hp" style="cursor: pointer;" href="javascript: void();" ><img border="0" src="/images/bing_new/homepage_bottom.gif" alt="See more" /></a>                                                                <a id="see_more" href="javascript: void();" ><img id="see_more_image" border="0" src="/images/bing_new/se_more_new.gif" alt="See more" /></a>                                                            </div>'}}BingPageModule.bing_hp=$("bing_hp");BingPageModule.see_more=$("see_more");BingPageModule.see_more_image=$("see_more_image")};BingPageModule.bingSearch=function(){$("bingItemWeb").className="WebPassive";$("bingItemVideo").className="VideoPassive";$("bingItemImage").className="ImagePassive";$("bingItem"+BingPageModule.search_type).className=BingPageModule.search_type+"Active";BingPageModule.setBingListeners();BingPageModule.entries.innerHTML="<i>Loading...</i>";if(BingPageModule.bingText.value==""){BingPageModule.entries.innerHTML="There is no result..."}else{BingPageModule.bingText.value=BingPageModule.bingText.value.replace(/\&FORM\=SOAPGN/,"");this.search_text=BingPageModule.bingText.value;var b="/images/bing_new/see_more_";switch(BingPageModule.search_type){case"Video":b=b+"v.gif";break;case"Image":b=b+"i.gif";break;case"Web":b=b+"r.gif";break}if(BingPageModule.version!="v2"){BingPageModule.see_more_image.src=b}var c="http://api.search.live.net/json.aspx?Appid="+BingPageModule.app_id+"&Query="+escape(BingPageModule.bingText.value);searchString=c+"&Sources="+BingPageModule.search_type+"&"+BingPageModule.search_type+".count="+BingPageModule.limit[BingPageModule.search_type]+"&"+BingPageModule.search_type+".offset="+BingPageModule.offset+"&Version=2.1&"+BingPageModule.search_type+".SortBy="+BingPageModule.entry_extra_sort_bing+"&JsonType=callback&SafeSearch=Strict&JsonCallback=BingPageModule.Search"+BingPageModule.search_type+"Completed";if(BingPageModule.bing_search_script!=null){BingPageModule.head[0].removeChild(BingPageModule.bing_search_script)}var a=document.createElement("script");a.id="bing_search_script";a.src=searchString;BingPageModule.head[0].appendChild(a);BingPageModule.bing_search_script=document.getElementById("bing_search_script")}};BingPageModule.TabClick=function(b){var a;switch(b){case"Video":a=BingPageModule.videos_url+"?q="+escape(BingPageModule.bingText.value);break;case"Image":a=BingPageModule.images_url+"?q="+escape(BingPageModule.bingText.value);break;case"Web":a=BingPageModule.web_url+"?q="+escape(BingPageModule.bingText.value);break}BingPageModule.track_click();window.open(a,"bing_web_popup");return false};BingPageModule.SearchImageCompleted=function(c){resultHTML="<div>";var e=c&&c.SearchResponse&&c.SearchResponse.Image&&c.SearchResponse.Image.Results||[];if(!e.length){BingPageModule.entries.innerHTML="There is no result...";return}else{BingPageModule.bing_container.style.display="block";if(BingPageModule.atdm_imp_pixel!=""){HPUtil.trackerImg(BingPageModule.atdm_imp_pixel,BingPageModule.bing_container);BingPageModule.atdm_imp_pixel=""}if(BingPageModule.imr_imp_pixel!=""){HPUtil.trackerImg(BingPageModule.imr_imp_pixel,BingPageModule.bing_container);BingPageModule.imr_imp_pixel=""}if(BingPageModule.bing_df_tag!=""){HPUtil.scriptTag(BingPageModule.bing_df_tag,BingPageModule.bing_container);BingPageModule.bing_df_tag=""}if(BingPageModule.interclick_url!=""){HPUtil.trackerImg(BingPageModule.interclick_url,BingPageModule.bing_container);BingPageModule.interclick_url=""}}var j=new Array();var a=new Array();var d=0;for(var f=0;f<BingPageModule.limit.Image;++f){j[f]=e[f].Thumbnail.Width;a[f]=e[f].Thumbnail.Height;d=d+e[f].Thumbnail.Height}d=Math.ceil(d/BingPageModule.limit.Image);var k=0;for(f=0;f<BingPageModule.limit.Image;++f){j[f]=Math.ceil(j[f]/(a[f]/d));a[f]=d;k=k+j[f]}var b=495;var h="margin-right: 10px;";if(k<(b-50)){h="margin-left: 15px; margin-right: 15px;";b=435}if(k<(b-100)){h="margin-left: 25px; margin-right: 25px;";b=375}var g=b/k;for(f=0;f<BingPageModule.limit.Image;++f){resultHTML=resultHTML+'<div class="imageItem" style="'+h+'"><a href="'+BingPageModule.images_url+"?q="+escape(BingPageModule.bingText.value)+'" target="blank" onclick="BingPageModule.track_click(); HPUtil.trackerImg(BingPageModule.imr_images_url, document.body); window.open(this.href, \'bing_image_popup\'); return false;"><img src="'+e[f].Thumbnail.Url+'" border="0" width="'+Math.ceil(j[f]*g)+'" height="'+Math.ceil(a[f]*g)+'" /></a></div>'}resultHTML=resultHTML+'<div style="clear: both;"></div></div>';BingPageModule.entries.innerHTML=resultHTML};BingPageModule.SearchWebCompleted=function(a){resultHTML="";var c=a&&a.SearchResponse&&a.SearchResponse.Web&&a.SearchResponse.Web.Results||[];if(!c.length){BingPageModule.entries.innerHTML="There is no result...";return}else{BingPageModule.bing_container.style.display="block";if(BingPageModule.imp_pixel_common!=""){HPUtil.trackerImg(BingPageModule.imp_pixel_common,BingPageModule.bing_container);BingPageModule.imp_pixel_common=""}if(BingPageModule.imp_pixel!=""){HPUtil.trackerImg(BingPageModule.imp_pixel,BingPageModule.bing_container);BingPageModule.imp_pixel=""}if(BingPageModule.bing_df_tag!=""){HPUtil.scriptTag(BingPageModule.bing_df_tag,BingPageModule.bing_container);BingPageModule.bing_df_tag=""}if(BingPageModule.interclick_url!=""){HPUtil.trackerImg(BingPageModule.interclick_url,BingPageModule.bing_container);BingPageModule.interclick_url=""}}for(var b=0;b<BingPageModule.limit.Web;++b){if("undefined"==typeof(c[b])){break}resultHTML=resultHTML+'<div><a style="text-decoration: underline; font-weight: bold; color: #5462c3;" href="'+BingPageModule.web_url+"?q="+escape(BingPageModule.bingText.value)+'" target="blank" onclick="BingPageModule.track_click(); HPUtil.trackerImg(BingPageModule.imr_web_url, document.body); window.open(this.href, \'bing_web_popup\'); return false;">'+c[b].Title+'</a><br /><div style="width: 520px; margin-bottom:3px;">'+c[b].Description+'&nbsp</div><span style="color: #688156">'+c[b].DisplayUrl+'</span>&nbsp;<span style="color: #4e7cc0;">-</span>&nbsp;<a style="color: #4e7cc0;" href="'+BingPageModule.web_url+"?q="+escape(BingPageModule.bingText.value)+'" target="blank" onclick="BingPageModule.track_click(); HPUtil.trackerImg(BingPageModule.imr_web_url, document.body); window.open(this.href, \'bing_web2_popup\'); return false;">Cached page</a><div style="height: 10px;"></div></div>'}BingPageModule.entries.innerHTML=resultHTML};BingPageModule.SearchVideoCompleted=function(a){resultHTML="<div>";var c=a&&a.SearchResponse&&a.SearchResponse.Video&&a.SearchResponse.Video.Results||[];if(!c.length){BingPageModule.entries.innerHTML="There is no result...";return}else{if(c.length>=BingPageModule.limit.Video){BingPageModule.bing_container.style.display="block";if(BingPageModule.atdm_imp_pixel!=""){HPUtil.trackerImg(BingPageModule.atdm_imp_pixel,BingPageModule.bing_container);BingPageModule.atdm_imp_pixel=""}if(BingPageModule.imr_imp_pixel!=""){HPUtil.trackerImg(BingPageModule.imr_imp_pixel,BingPageModule.bing_container);BingPageModule.imr_imp_pixel=""}if(BingPageModule.bing_df_tag!=""){HPUtil.scriptTag(BingPageModule.bing_df_tag,BingPageModule.bing_container);BingPageModule.bing_df_tag=""}if(BingPageModule.interclick_url!=""){HPUtil.trackerImg(BingPageModule.interclick_url,BingPageModule.bing_container);BingPageModule.interclick_url=""}}}for(var b=0;b<BingPageModule.limit.Video;++b){if("undefined"==typeof(c[b])){break}var d="";if(c[b].ClickThroughPageUrl==null){d=c[b].PlayUrl}else{d=c[b].ClickThroughPageUrl}d=d.toString().replace(/http:\/\/www\.bing\.com\/videos/gi,BingPageModule.bing_metrics_bing_qtr_click_video);d=d.replace(/\&FORM\=SOAPGN/gi,"");d=d.replace(/\&scope\=video/gi,"");resultHTML=resultHTML+'<div class="videoItem'+((b==(BingPageModule.count_video-1))?"":" viRightMargin")+'"><a href="'+d+'" target="blank" onclick="BingPageModule.track_click(); HPUtil.trackerImg(BingPageModule.imr_videos_url, document.body);"><div><div class="bingImage" style="margin-bottom: 3px; width:123px; height: 92px;   background: url(\''+c[b].StaticThumbnail.Url+'\') no-repeat center black;"><img src="http://s.huffpost.com/images/bing/icon-play.png" style="position: relative; top: 80%; left: 40%" width="16" height="16" alt="Play" /></div></div><div class="bing_video_title">';if(c[b].SourceTitle==null){}else{resultHTML=resultHTML+'<div><b style="color:#5462c3;">'+c[b].Title+"</b></div>"}resultHTML=resultHTML+'<div style="margin-top: 3px;"><b>'+c[b].SourceTitle+"</b></div></div></a></div>"}resultHTML=resultHTML+'<div style="clear: both;"></div></div>';BingPageModule.entries.innerHTML=resultHTML};BingPageModule.clearString=function(){BingPageModule.search_text=BingPageModule.bingText.value;BingPageModule.bingText.value=""};BingPageModule.setString=function(){if(BingPageModule.bingText.value==""){BingPageModule.bingText.value=this.search_text}BingPageModule.setBingListeners()};BingPageModule.setStartPage=function(a){if(document.all){a.setHomePage("http://www.bing.com")}return false};
window._||(window._=function(a){return a});window.ngettext||(window.ngettext=function(a){return a});window.sprintf||(window.sprintf=function(a){return a});(function(e){var c={};var d={ANYWHERE_URL:"/ajax/twitter/anywhere/anywhere.php",ANYWHERE_URL_V2:"/ajax/twitter/anywhere/anywhere_v2.php"};var b={};b.anywhereWnd={hideTimeout:undefined,version:1,config:{window_delay:250}};b.anywhere=function(g,j){if(!g){g=e("body")}var k=typeof(g)==="string"?e("#"+g):g;if(k.length==0){return}e.proxy(this.setConfig(j),this);if(e("#hp_anywhere_wnd").length==0){this.anywhereWnd.loadCSS();var i=document.createElement("div");i.id="hp_anywhere_wnd";i.style.cssText="position:absolute;left:0;top:-999px;";i.innerHTML='<div id="aw_content" class="round"></div><div id="aw_triangle"></div>';var h=e("#anywhere_block").length>0?e("#anywhere_block"):(/BODY|HTML/.test(k.parent().attr("tag"))?e("body"):k);h.append(i);e("#hp_anywhere_wnd").mouseenter(e.proxy(this.anywhereWnd.onMouseOver,this.anywhereWnd));e("#hp_anywhere_wnd").mouseleave(e.proxy(this.anywhereWnd.onMouseOut,this.anywhereWnd))}this.anywhereWnd.wnd=e("#hp_anywhere_wnd");this.anywhereWnd.content=e("#aw_content");this.anywhereWnd.triangle=e("#aw_triangle");a();k.mouseover(e.proxy(this.anywhereWnd.show,this.anywhereWnd));k.mouseout(e.proxy(function(p){var q=p.target;var l=q.className;if(!l||typeof(l.indexOf)!="function"){return}else{return}var n=l.indexOf("twitter-anywhere-user")>-1;var o=l.indexOf("twitter-anywhere-user-v2")>-1;if(!n&&!o){return}var m=this;clearTimeout(this.mouseoverTimeout);b.anywhereWnd.timeoutHide()},this.anywhereWnd))};b.setConfig=function(g){if(g){if(g.hasOwnProperty("window_delay")){this.anywhereWnd.config.window_delay=g.window_delay}}};b.anywhereWnd.loadCSS=function(){var g=document.createElement("link");g.setAttribute("rel","stylesheet");g.setAttribute("href","http://s.huffpost.com/assets/css.php?f=hptwitter_anywhere.css&9");g.setAttribute("type","text/css");g.setAttribute("media","screen");e("head").append(g)};b.anywhereWnd.show=function(g){var l=g.target;var o=l.className;if(!o||typeof(o.indexOf)!="function"){return}var m=o.indexOf("twitter-anywhere-user")>-1;var k=o.indexOf("twitter-anywhere-user-v2")>-1;if(!m&&!k){return}if(k){this.version=2;this.wnd.addClass("v2")}else{this.version=1;this.wnd.removeClass("v2")}var h=l.nodeName==="IMG"?l.parentNode:l;var j=this.getUsernameFromTarget(h);var i=this.getTweetIdFromTarget(l);var n=this;this.mouseoverTimeout=window.setTimeout(function(){if(n.request&&f(n.request)){n.request.abort()}n.target=l;clearTimeout(n.hideTimeout);n.setContent(j,i,{author_nickname:n.target&&e(n.target).attr("author_nickname")?e(n.target).attr("author_nickname").toString():""});e.proxy(n.setPosition(),n)},this.config.window_delay)};b.anywhereWnd.hide=function(){this.request.abort();this.wnd.offset({top:-999})};b.anywhereWnd.timeoutHide=function(){var g=this;this.hideTimeout=setTimeout(function(){g.hide()},500)};b.anywhereWnd.cancelHiding=function(){if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}};b.anywhereWnd.getUsernameFromTarget=function(g){if(g.href){return g.href.replace(/.+\//,"")}else{return e.trim(g.innerHTML).replace("@","")}};b.anywhereWnd.getTweetIdFromTarget=function(g){return e(g).attr("tid")};b.anywhereWnd.onMouseOver=function(h){var j={left:h.pageX,top:h.pageY};var g=e("#hp_anywhere_wnd");var i={top:g.offset().top,right:g.offset().left+g.width(),bottom:g.offset().top+g.height()+13,left:g.offset().left};this.cancelHiding()};b.anywhereWnd.onMouseOut=function(h){var j={left:h.pageX,top:h.pageY};var g=e("#hp_anywhere_wnd");var i={top:g.offset().top,right:g.offset().left+g.width(),bottom:g.offset().top+g.height(),left:g.offset().left};if(!(j.left>=i.left&&j.left<=i.right&&j.top>=i.top&&j.top<=i.bottom)){this.timeoutHide()}};b.anywhereWnd.setPosition=function(){var h=e(this.target).offset();var g=h.left+(e(this.target).width()/2-(20+19/2));var i=h.top-e(this.wnd).height()+3;e(this.wnd).offset({left:g,top:i})};b.anywhereWnd.setContent=function(h,l,j){var k={author_nickname:""};extend(k,j);if(c.hasOwnProperty(h)){this.content.removeClass("smallwidth");this.content.html(c[h]);e.proxy(this.setMoreEvent(),this);return}else{a()}var g="";if(l>0){g="&tid="+l}var i;if(this.version==2){i=d.ANYWHERE_URL_V2+"?user="+h+g}else{i=d.ANYWHERE_URL+"?user="+h}i+="&author_nickname="+k.author_nickname;this.request=e.ajax({context:this,url:i,dataType:"json",success:function(m,n){if(m.status=="error"){this.showError(_("Sorry, this does not appear to be an active Twitter account"));e.proxy(this.setPosition(),this);return}this.content.removeClass("smallwidth");this.content.html(m.userinfo_html);this.setMoreEvent();c[h]=m.userinfo_html;e.proxy(this.setPosition(),this)}})};b.anywhereWnd.setMoreEvent=function(){e("#aw_more").click(e.proxy(function(g){e(g.target).remove();e("#aw_more_details").removeClass("force_hidden");e.proxy(this.setPosition(),this)},this))};b.anywhereWnd.showError=function(g){this.content.removeClass("smallwidth");this.content.html('<div style="padding:3px;">'+g+"</div>")};function a(){b.anywhereWnd.content.addClass("smallwidth");b.anywhereWnd.content.html('<div class="aw_loader">'+_("Loading...")+"</div>")}function f(g){if(g){return g.readyState!==4&&g.readyState!==0}else{return false}}window.TwitterAnywhere=b})(jQuery);
var Constant={GET_LISTS_TWEETS_URL:"/ajax/twitter/list_tweets.php",GET_TWEETS_URL:"http://search.twitter.com/search.json",GET_USER_TIMELINES:"/twitter/get_user_timelines.php",FRIENDSHIP_EXISTS_URL:"/twitter/friendship_exists.php",RETWEET_TWEET_URL:"/twitter/retweet_tweet.php",FOLLOW_LIST_URL:"/twitter/ajax_follow_tlist.php",FRIENDSHIP_URL:"/twitter/friendship.php",PUBLIC_INFO_URL:"/twitter/public_info.php",IS_USER_LISTS_SUBSCRIBER_URL:"/twitter/is_user_lists_subscriber.php"};var HPTwitter={lists:[],getListsTweets:function(e,g,h,c,d){if(!e||!e.length){return}if(typeof(e)=="string"){e=[e]}if(!g){g={}}var a=e.length;for(var b=a;b--;){if(!g[e[b]]){g[e[b]]={}}g[e[b]].since_id=g[e[b]].since_id||1}var f="lists="+JSON.stringify(g);if(d){f+=d}this._sendRequest("GET",Constant.GET_LISTS_TWEETS_URL,f,h,c)},followList:function(d,c,a,b){this._sendFollowUnfollowRequest(true,d,c,a,b)},unfollowList:function(d,c,a,b){this._sendFollowUnfollowRequest(false,d,c,a,b)},getTweets:function(d,e){d=d||"";var b=[];if(e){if(e.lang){b.push("lang="+e.lang)}if(e.callback){b.push("callback="+e.callback)}if(e.locale){b.push("locale="+e.locale)}if(e.rpp){b.push("rpp="+e.rpp)}if(e.page){b.push("page="+e.page)}if(e.since_id){b.push("since_id="+e.since_id)}if(e.geocode){b.push("geocode="+e.geocode)}if(e.show_user){b.push("show_user="+e.show_user)}}var c="?q="+escape(d);if(b.length){c+="&"+b.join("&")}var a=Constant.GET_TWEETS_URL+c;HuffPoUtil.loadAndRun(a)},retweetTweet:function(a,c,d){if(!a){d();return false}var b="tweet_id="+a;C.asyncRequest("POST",Constant.RETWEET_TWEET_URL,{success:c,failure:d},b);return true},favorTweet:function(a,b,c){if(!a){c();return false}},getUserTimelines:function(d,e,f,b){d=d||"";e=parseInt(e,10);var a=isNaN(e)?0:e;var c="screen_name="+d+"&chunk_size="+a;this._sendRequest("GET",Constant.GET_USER_TIMELINES,c,f,b)},_sendFollowUnfollowRequest:function(c,f,e,a,b){var d="list="+f+"&action="+(c?"post":"delete");this._sendRequest("GET",Constant.FOLLOW_LIST_URL,d,e,b,a,false)},getFollowStatus:function(b,d,a){if(!b){return}var c="user_b="+b;this._sendRequest("GET",Constant.FRIENDSHIP_EXISTS_URL,c,d,a,undefined,false)},createFriendship:function(d,e,b,a){if(!d){return}var c="id="+d+"&action=create";this._sendRequest("POST",Constant.FRIENDSHIP_URL,c,e,b,a)},destroyFriendship:function(d,e,b,a){if(!d){return}var c="id="+d+"&action=destroy";this._sendRequest("POST",Constant.FRIENDSHIP_URL,c,e,b,a)},getPublicInfo:function(d,e,b,a){if(!d){return}var c="id="+d;this._sendRequest("GET",Constant.PUBLIC_INFO_URL,c,e,b,a)},isUserListsSubscriber:function(a,d,b){if(!a){return}if(!YAHOO.lang.isArray(a)){a=[a]}var c="lists="+JSON.stringify(a);this._sendRequest("POST",Constant.IS_USER_LISTS_SUBSCRIBER_URL,c,d,b,undefined,false)},_sendRequest:function(d,a,g,h,c,j,e){if(!d){d=d.toUpperCase()}var i=c||this;var b;var f={success:function(n){var k=n.argument[0];var m=n.argument[1];var l=[n.responseText];if(m){l.push(m)}if(typeof(k)==="function"){k.apply(i,l)}},argument:[h,j],scope:i};if(d=="POST"){b=g}else{if(d=="GET"){a=a+"?"+g;if(e===false||e===true){f.cache=e}}}C.asyncRequest(d,a,f,b)}};HPTwitter.Widgets={};(function(a,b){a.Widgets.activateFollowButton=function(d){var c=b("#"+d.node_id+" .container");var e=b("#frame-"+d.node_id);e.html('<iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/follow_button.html?'+d.query+'" '+d.style+"></iframe>");e.find("iframe").bind("load",function(){b(this).parent().removeClass("hidden");c.remove()})};(function(i){if(window.__twitterIntentHandler){return}var g=/twitter\.com(\:\d{2,4})?\/intent\/(\w+)/,j="scrollbars=yes,resizable=yes,toolbar=no,location=yes",h=550,d=520,f=screen.height,e=screen.width;var c=function(p){var o=b(p.target),k,n,l;while(o.get(0)&&o.get(0).nodeName.toLowerCase()!=="a"){o=o.parent()}if(o.get(0)&&o.get(0).nodeName.toLowerCase()==="a"&&o.attr("href")!==undefined){k=o.attr("href").match(g);if(k){n=Math.round((e/2)-(h/2));l=0;if(f>d){l=Math.round((f/2)-(d/2))}window.open(o.attr("href"),"intent",j+",width="+h+",height="+d+",left="+n+",top="+l);p.preventDefault()}}};i.click(c);window.__twitterIntentHandler=true})(b(document))})(HPTwitter,jQuery);
function AddSiteMode(){window.SiteMode={buttons_to_names:{},UPDATE_ICON_FRAMES:3,notification_showing:false,simulateUpdate:function(){Refresh.loadingStartUI();Refresh.update("news_col_1.html?45435&vertical="+Refresh.vertical+(HPAds.doubleclick?"&doubleclick="+escape(HPAds.doubleclick):""))},verticalIsPinned:function(){if(typeof HPConfig=="undefined"){return false}if(!window.sessionStorage.pinMode){window.sessionStorage.pinMode=HPConfig.current_vertical_name}if(window.sessionStorage.pinMode==HPConfig.current_vertical_name){return true}return false},init:function(){try{if(window.external.msIsSiteMode()){var h=window.external.msIsSiteModeFirstRun(false);if(h){var c=window.localStorage;var k=c.siteModePromoType||"SiteModeC";c.removeItem("siteModePromoType");var a="NA";if(h==1){a="Drag-drop"}else{if(h==2){a="Shortcut Icon"}}HPTrack.trackEvent("Sitemode",a,"Via promo "+k)}E.addListener(window,"focus",this.replayUpdate,this);E.addListener(window,"focus",this.hideNotification,this);this.updateButtons();if(!this.verticalIsPinned()){return}var n=[];var g=Dom.getElementsByClassName("big_news_item","a","topnav_big_news_module");for(var b=0,f=g.length;b<f;b++){var m=g[b].innerHTML||"";var d=g[b].className.match(/bn_v_([\w\-_]+)/);var l={text:m,href:g[b].href};if(d&&d.length>1){l.vert=d[1]}if(m){n.push(l)}}this.updateJumpList(n)}}catch(j){}},modalStyle:function(){},buttonHandlers:{twitter:function(){window.open("http://twitter.com/share?url="+encodeURIComponent(window.location),"twitter_share","width=500,height=350")},facebook:function(){window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(window.location),"facebook_share","width=500,height=350")}},updateButtons:function(){var a=window.external.msSiteModeAddThumbBarButton("/images/sitemode/facebook.ico","Facebook");var c=window.external.msSiteModeAddThumbBarButton("/images/sitemode/twitter.ico","Twitter");this.buttons_to_names[a]="facebook";this.buttons_to_names[c]="twitter";function b(f){var h=SiteMode;var g=f.buttonID;var d=h.buttons_to_names[g]||false;if(!d){return}h.buttonHandlers[d]()}if(document.addEventListener){document.addEventListener("msthumbnailclick",b,false)}else{if(document.attachEvent){document.attachEvent("onmsthumbnailclick",b)}}window.external.msSiteModeShowThumbBar()},updateJumpList:function(d){if(d&&d.length){var a=new Date();window.external.msSiteModeCreateJumplist("Big News - "+(parseInt(a.getMonth())+1)+"/"+a.getDate()+"/"+a.getFullYear());for(var c=d.length-1;c>=0;c--){var b="/images/sitemode/verts/"+(d[c].vert||"homepage")+".ico";window.external.msSiteModeAddJumpListItem(d[c].text,d[c].href,b)}window.external.msSiteModeShowJumplist()}else{window.external.msSiteModeClearJumplist()}},notifyUser:function(b){try{if(window.external.msIsSiteMode()){var c="New headlines!";if(b.is_splash){c="New top story!"}SiteMode.animator=window.setInterval(function(){SiteMode.cycleNotification(c)},500);this.notification_showing=true}}catch(a){}},cycleNotification:function(a){var b=SiteMode;if(!b.icon_index||b.icon_index==b.UPDATE_ICON_FRAMES){b.icon_index=1}else{b.icon_index++}window.external.msSiteModeSetIconOverlay("/images/sitemode/update"+b.icon_index+".ico",a)},hideNotification:function(){try{if(window.external.msIsSiteMode()){if(SiteMode.animator){window.clearInterval(SiteMode.animator)}window.external.msSiteModeClearIconOverlay()}}catch(a){}},replayUpdate:function(){if(!(window.Refresh&&Refresh.last_block)){return}Refresh.animateBlock(Refresh.last_block);HPUtil.ScrollTo(Refresh.last_block);Refresh.last_block=false}}}try{if(window.external.msIsSiteMode()){AddSiteMode()}}catch(e){};
jQuery(document).ready(function(a){a(".search-huffpost form").submit(function(){if(a(".search-huffpost form .inp-text").val()=="Search the Huffington Post"){a(".search-huffpost form .inp-text").focus();return false}})});
huff.on("topnav/load-start",function(a){a.className+=" nav_repositioning"});huff.on("topnav/loaded",function(a){huff.use("jquery","conf","user",function(h,B,o){var C=h(a),x=C.find("> ul > li"),z=x.children("div"),f=C.next().find("div.featured ul"),b=C.next().find("ul.subnav_list"),d=x.slice(1),k=C.outerWidth(),l=k-x.first().outerWidth(),D=(x.hasClass("n_live"))?true:false,p=(x.last().hasClass("n_all_sections"))?true:false,i=125,q=500,r,t,j=(jQuery.browser.msie&&(jQuery.browser.version<="7.0"))?true:false,g=150,A=(!!("ontouchstart" in window)?1:0);i=HPUtil.getUrlVar("onDelay")||i;q=HPUtil.getUrlVar("offDelay")||q;if(p){l-=d.last().outerWidth();d=d.slice(0,-1)}if(D){l-=d.filter("li.n_live").outerWidth();d=d.not("li.n_live")}var e=function(){if(x.parent().outerWidth()>k){for(var G=1,K=0;G<x.length;G++){K+=x.eq(G).outerWidth();if(K>l){d.slice(G-1).remove();break}}}else{if(x.length<=6){var E=Math.floor(l/d.length);d.css({"min-width":E+"px","padding-left":0,"padding-right":0});d.slice(0,-1).css({"border-right-width":1,"border-right-style":"solid"});if(j){var I=(D?(E-1):(E-(d.length-1)))+"px";d.last().css({"min-width":I,width:I})}}else{if(!j){var F=d.find("div.relative > a"),u=F.first(),c=u.html(),H=u.text(),M=8;u.html("<u>"+H+"</u>");var L=Math.floor(u.find("u").position().left);if(L<M){L=M}u.html(c);var J=function(N){F.css({"padding-right":N+"px","padding-left":N+"px"})};do{J(L--)}while(L>M&&x.parent().outerWidth()>k)}}}};var n=setInterval(function(){var c=B.get("topnav/font-load-status");if(typeof c!=="number"||c>-1){try{e()}catch(u){}C.removeClass("nav_repositioning");clearInterval(n)}},100);var y=function(){var c,u=0,G,F=0,E=x;c=l;if(p){E=D?E.slice(1,-2):E.slice(1,-1)}else{E=D?E.slice(1,-1):E.slice(1)}E.each(function(){u+=h(this).outerWidth()});G=u/c;u=0;E.each(function(H){if(H<E.length-1){F=Math.floor(h(this).outerWidth()/G);h(this).css("width",F);u+=F}else{h(this).css("width",c-u)}})};if(j){C.removeClass("nav_repositioning");y();x.first().closest("ul").css({visibility:"visible"})}if(x.length>=4){x.slice(x.length/2).find("div.menu").addClass("right_align")}if(A){z.bind("click",function(c){var u=h(this);if(c.target.parentNode!==this&&!u.find("a").is(c.target.parentNode)){return}if(!u.children(".menu").length){return}if(!u.hasClass("hover")){z.removeClass("hover");u.addClass("hover");c.preventDefault()}else{if(p&&u.parent().is(":last-child")){u.removeClass("hover");c.preventDefault()}}});h("body").bind("click",function(c){var u=h(this);if(z.find(h(c.target)).length===0){z.removeClass("hover")}})}else{var v={show:function(u){var E=this,c=u.delay||200;this.clear_timer();r=setTimeout(function(){E.clear_hover();u.el.addClass("hover")},c)},hide:function(u){var E=this,c=u.delay||200;this.clear_timer();if(u.el.hasClass("hover")){r=setTimeout(function(){u.el.removeClass("hover")},c)}else{r=setTimeout(function(){E.clear_hover()},c)}},clear_hover:function(){z.each(function(){h(this).removeClass("hover")})},clear_timer:function(){clearTimeout(r)}};z.bind({mouseenter:function(c){v.show({el:h(this)})},mouseleave:function(c){v.hide({el:h(this),delay:700})}})}x.find("a").unbind("click").bind("click",function(G){var E=h(this).parent();var F=A&&E.parent().parent().hasClass("jd_menu");var H=A&&F&&(E.children(".menu").length);if(F&&H&&A&&!E.hasClass("hover")){return}else{if(F&&H&&A&&E.hasClass("hover")&&p&&E.parent().is(":last-child")){return}}var I=h(this).parent().attr("id");if((I!=undefined)&&(I!=null)&&I.indexOf("id_trending")===0){var u=!h(G.target).is(this);if(u){this.href+=h(this).children(".comments").data("anchor")}G.target=this;huff.emit("topnavnew_trending/click",G)}else{var c=h(this).parent().parent().attr("class");if((c!=undefined)&&(c!=undefined)&&c==="vertical_list"){G.target=this;huff.emit("topnavnew_vertical_list/click",G)}else{if((c!=undefined)&&(c!=undefined)&&c==="like_list"){G.target=this;huff.emit("topnavnew_like_list/click",G)}else{if((c!=undefined)&&(c!=undefined)&&c==="all_sections_section"){G.target=this;huff.emit("topnavnew_all_sections/click",G)}else{if((c!=undefined)&&(c!=undefined)&&c==="topnav_blogs"){G.target=this;huff.emit("topnavnew_blogs/click",G)}else{G.target=this;huff.emit("topnavnew/click",G)}}}}}});h(".new-topnav_second_row a").unbind("click").bind("click",function(c){c.target=this;huff.emit("topnavnew_subnav/click",c)});C.addClass("topnav_first_row_squre_right");h("#li_local").removeClass("rounded_top_right_4");var w=h("#fb_social"),s=h("#tw_social");if(!o.logged){w.addClass("fb_social_btn").removeClass("display_none");s.addClass("tw_social_btn").removeClass("display_none")}else{o.pref("facebook","twitter",function(u,c){if(!u&&!c){w.addClass("fb_social_btn").removeClass("display_none");s.addClass("tw_social_btn").removeClass("display_none")}else{if(!u){h("#not_logged_user, #wendybird_user").css("right","125px");w.addClass("fb_social_btn_only").removeClass("display_none")}else{if(!c){h("#not_logged_user, #wendybird_user").css("right","125px");s.addClass("tw_social_btn_only").removeClass("display_none")}}}})}w.bind("click",function(){huff.emit("topnav/signup","Facebook");return false});s.bind("click",function(){huff.emit("topnav/signup","Twitter");return false});var m=function(u,c){h.each(u.find("li"),function(F,E){if((F!==0)&&(h(E).position().left<=12)&&c.find("li").length){c.find("li:first-child").remove();return m(u,c)}})};b.length&&m(f,b);b.css({visibility:"visible"})})});

/* From: wfe3-ewr : 31336 *//* 060d4d807760c958285d41cef53480c2f10dff06 */