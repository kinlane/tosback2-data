/**
 * Synacor Syndication Bootloader
 * @author Portal <CSE-Portal@synacor.com>
 * @author Michael Collins <mcollins@synacor.com>
 * @copyright Copyright (c), Synacor, Inc., 2011-12, All Rights Reserved
 */

if (!window.SynS9nQueue)
{
	window.SynS9nQueue = [];
}

//Begin Scopespacing
(function() {
var s9nloader = function()
{

var s9nloader = arguments.callee;

function getSynConfig()
{
	var Syn;
//<![CDATA[
function Syn(){}
Syn.Config={"Domain":"suddenlink","PortalRoot":"\/","WebservicesUrl":"\/webservices\/index\x2ephp","Username":"","ProxyHostGeneralUrl":"http:\/\/appserv\x2eemerald\x2esynacor\x2ecom\/"};
Syn.Config.Framework={"LoggedIn":false,"Session":"426532cfd3a4182ab27d992305f5290648ef65e9-1361625407","UserId":"","AuthToken":"","Client":"suddenlink","Site":"suddenlink","Page":"page:\/\/Synacor\/Portal\/Pages\/Syndication\/","Locale":"en_US","AssetsRoot":"http:\/\/static\x2eemerald\x2esynacor\x2ecom\/assets\/","ConsolidatorUrl":"http:\/\/static\x2eemerald\x2esynacor\x2ecom\/assets\/res\x2ephp","ApiRoot":"http:\/\/api\x2eemerald\x2esynacor\x2ecom\/api\/","PortalRoot":"http:\/\/home\x2esuddenlink\x2enet\/","AppServer":"http:\/\/appserv\x2eemerald\x2esynacor\x2ecom\/","Javascripts":{"en_US\/globals\/javascripts\/3rdparty\/jquery\/jquery-1\x2e4\x2e2\x2emin\x2ejs":true,"en_US\/globals\/javascripts\/3rdparty\/jquery\/plugins\/jquery\x2ejsonp-2\x2e1\x2e4\x2ejs":true,"en_US\/globals\/javascripts\/3rdparty\/jquery\/plugins\/jquery\x2ecookie\x2ejs":true,"en_US\/globals\/javascripts\/3rdparty\/jquery\/plugins\/jquery\x2eba-tinypubsub\x2ejs":true,"en_US\/globals\/javascripts\/3rdparty\/jquery\/class\x2ejs":true,"en_US\/globals\/javascripts\/3rdparty\/json\/json\x2ejs":true,"en_US\/globals\/javascripts\/framework\/synjquery\x2ejs":true,"en_US\/globals\/javascripts\/framework\/synuifilemgr\x2ejs":true,"en_US\/globals\/javascripts\/framework\/syncomponent\x2ejs":true,"en_US\/globals\/javascripts\/framework\/syncomponentutils\x2ejs":true,"en_US\/globals\/javascripts\/framework\/syncomponentmgr\x2ejs":true,"en_US\/globals\/javascripts\/framework\/syntrack\x2ejs":true,"en_US\/globals\/javascripts\/framework\/synjsextensions\x2ejs":true,"en_US\/globals\/javascripts\/framework\/synimageloader\x2ejs":true,"en_US\/globals\/javascripts\/framework\/synads\x2ejs":true,"en_US\/globals\/javascripts\/framework\/synhelpers\x2ejs":true,"en_US\/components\/locatable\/javascripts\/locatable\x2ejs":true,"en_US\/components\/weather\/javascripts\/weather\x2ejs":true},"Stylesheets":{"en_US\/globals\/styles\/global_s9n\x2ecss":true,"en_US\/components\/header\/header_main\/weather\/styles\/weather\x2ecss":true},"DefaultTrackingModule":"Image","ModTag":"66009710"};
//]]>

	return Syn;
}

// List of rescon scripts
var scripts = ["http:\/\/static.emerald.synacor.com\/assets\/res.php?j;suddenlink;en_US;66009710;javascripts!locatable~weather*json@en_US(globals(!(3rdparty(jquery(jquery-1.4.2.min;plugins(jquery.jsonp-2.1.4;jquery.cookie;jquery.ba-tinypubsub)class)@(@))framework(synjquery;synuifilemgr;syncomponent;syncomponentutils;syncomponentmgr;syntrack;synjsextensions;synimageloader;synads;synhelpers)))components(~(!(~))*(!(*"];
// List of rescon styles
var styles = ["http:\/\/static.emerald.synacor.com\/assets\/res.php?s;suddenlink;en_US;66009710;weather!styles~en_US(globals(~(global_s9n))components(header(header_main(!(~(!"];

// List of zones contents as urlencoded strings
var zones = [];

zones.push('<div class=\"weather_header\" id=\"zone-3a-2f-2fSynacor-2fPortal-2fPages-2fSyndication-2fZones-2fHeader_Weather-2f-7ccomponent-3a-2f-2fSynacor-2fPortal-2fComponents-2fHeader-2fHeaderMain-2fWeather-2f\">\x0a\x09<div class=\"wh_current\">Light Rain\x0a\x09\x09<div class=\"wh_more_weather\"><a href=\"http://home.suddenlink.net/weather_channel/?zip=94110&amp;unit=F\" alt=\"\" class=\"more\">More Weather</a></div>\x0a\x09</div>\x0a\x09<div class=\"wh_temp\">\x0a\x09\x0950<span class=\"temp_unit_select\">&deg;F <span>| &deg;<a href=\"#\">C</a></span></span>\x0a\x09</div>\x0a\x09<div class=\"wh_weather_img\"><img src=\"http://static.emerald.synacor.com/assets/en_US/components/weather/images/large/11.png\" alt=\"\" /></div>\x0a\x09<div class=\"wh_location_display\" id=\"ws_location_display_zone-3a-2f-2fSynacor-2fPortal-2fPages-2fSyndication-2fZones-2fHeader_Weather-2f-7ccomponent-3a-2f-2fSynacor-2fPortal-2fComponents-2fHeader-2fHeaderMain-2fWeather-2f\">\x0a\x09\x09<h4 class=\"wh_location\">San Francisco, CA</h4>\x0a\x09\x09<a class=\"ws_edit_toggle change_location_toggle\" href=\"#\">Edit</a>\x0a\x09</div>\x0a\x09<div id=\"ws_location_edit_zone-3a-2f-2fSynacor-2fPortal-2fPages-2fSyndication-2fZones-2fHeader_Weather-2f-7ccomponent-3a-2f-2fSynacor-2fPortal-2fComponents-2fHeader-2fHeaderMain-2fWeather-2f\" class=\"change_location_edit\">\x0a\x09\x09<form id=\"ws_location_edit_form_zone-3a-2f-2fSynacor-2fPortal-2fPages-2fSyndication-2fZones-2fHeader_Weather-2f-7ccomponent-3a-2f-2fSynacor-2fPortal-2fComponents-2fHeader-2fHeaderMain-2fWeather-2f\" method=\"get\" action=\"\">\x0a\x09\x09\x09<fieldset>\x0a\x09\x09\x09\x09<div class=\"edit_location_wrap clearfix\">\x0a\x09\x09\x09\x09\x09<input id=\"ws_location_edit_input_zone-3a-2f-2fSynacor-2fPortal-2fPages-2fSyndication-2fZones-2fHeader_Weather-2f-7ccomponent-3a-2f-2fSynacor-2fPortal-2fComponents-2fHeader-2fHeaderMain-2fWeather-2f\" type=\"text\" value=\"Enter Zip or City & State\" />\x0a\x09\x09\x09\x09\x09<button id=\"ws_location_edit_submit_zone-3a-2f-2fSynacor-2fPortal-2fPages-2fSyndication-2fZones-2fHeader_Weather-2f-7ccomponent-3a-2f-2fSynacor-2fPortal-2fComponents-2fHeader-2fHeaderMain-2fWeather-2f\" class=\"btn\" type=\"submit\"><span>Go</span></button>\x0a\x09\x09\x09\x09</div>\x0a\x09\x09\x09\x09<a class=\"ws_edit_toggle\" href=\"#\" id=\"ws_location_cancel_link_zone-3a-2f-2fSynacor-2fPortal-2fPages-2fSyndication-2fZones-2fHeader_Weather-2f-7ccomponent-3a-2f-2fSynacor-2fPortal-2fComponents-2fHeader-2fHeaderMain-2fWeather-2f\">Cancel</a>\x0a\x09\x09\x09</fieldset>\x0a\x09\x09</form>\x0a\x09</div>\x0a</div>\x0a<script type=\"text/javascript\">if(Syn&&Syn.ComponentMgr){Syn.ComponentMgr.instantiate({\"class_name\":\"Syn.WeatherComponent\",\"action\":\"expanded\",\"__i18n\":{\"ADD_LOCATION_PROMPT\":\"Enter Zip or City & State\",\"NO_LOCATION_PROMPT\":\"No results found.\"},\"tracking_area\":\"weather\",\"keep_three_day\":false,\"uri\":\"component:\\/\\/Synacor\\/Portal\\/Components\\/Header\\/HeaderMain\\/Weather\\/\",\"parent_uri\":\"zone:\\/\\/Synacor\\/Portal\\/Pages\\/Syndication\\/Zones\\/Header_Weather\\/\",\"event_id\":\"zone-3a-2f-2fSynacor-2fPortal-2fPages-2fSyndication-2fZones-2fHeader_Weather-2f-7ccomponent-3a-2f-2fSynacor-2fPortal-2fComponents-2fHeader-2fHeaderMain-2fWeather-2f\",\"target_action\":null,\"delayed_load\":false,\"use_appserv\":false});}</script>');


// List of identifiers to place the content into
var idmap = ["weather_component"];

// No bootstrap needed. Load scripts/styles with Syn.UIFileMgr and append to the DOM, return.
if (window.Syn)
{
	//New scope
	(function()
	{
		var newsyn = getSynConfig();

		Syn.$.each( newsyn.Config.Framework.Stylesheets, function(k,v){ styles.push(k);  });
		Syn.$.each( newsyn.Config.Framework.Javascripts, function(k,v){ scripts.push(k); });

		Syn.UIFileMgr.loadStyleSheets( styles );
		Syn.UIFileMgr.loadJavaScripts( scripts, function()
		{
			Syn.$(idmap).each( function(i)
			{
				if (this)
				{
					Syn.$('#'+this).html( zones[i] );
				}
			});
		});

	})();

	s9nloader.oncomplete();
	return;
}
else
{
	Syn = getSynConfig();
	Syn.Config.Framework.Syndicated = true;

	// We don't have jQuery yet, so we need a script bootstraper the hard way
	Syn.BootstrapScript = function(src,callback)
	{
		var head = document.getElementsByTagName("head")[0] || document.documentElement;
		var script = document.createElement("script");
		script.src = src;
		var done = false;
		// Attach handlers for all browsers
		script.onload = script.onreadystatechange = function()
		{
			if ( !done && (!this.readyState || this.readyState === "loaded" || this.readyState === "complete") )
			{
				done = true;
				callback();

				// Handle memory leak in IE
				script.onload = script.onreadystatechange = null;
				if ( head && script.parentNode ) {
					head.removeChild( script );
				}
			}
		};

		head.insertBefore( script, head.firstChild );
	}
	window.Syn = Syn;
}

// Final loading stage: Load Stylesheets and append the content to the DOM
var bootstrap_ready = function()
{
	Syn.$(document).ready( function()
	{
		var i,
			p = 0,
			max_polls = 10,
			f = function() {
				p++;
				return (p === max_polls) || (Syn.$('div.s9n_style_load').css('display') === 'inline-block');
			};

		// Load empty divs with load testing class
		Syn.$(window).trigger('s9n_rescon_loaded');
		for (i=0;i<idmap.length;i++)
		{
			Syn.$('#'+idmap[i]).html( '<div class="s9n_style_load"></div>' );
		}

		// Load styles into the head tag
		for (i=0;i<styles.length;i++)
		{
			if (styles[i])
			{
				Syn.$.getStyle(styles[i]);
			}
		}

		// Poll our containers to see if the stylesheets have loaded
		// before injecting components into the dom.
		(function timer() {
			setTimeout(function() {
				var res = f();
				if (!res)
				{
					timer();
				}
				else
				{
					for (i=0;i<idmap.length;i++)
					{
						Syn.$('#'+idmap[i]).html( zones[i] );
					}
					Syn.$('pre.scroll_loader:in-viewport').showComment();
					s9nloader.oncomplete();
				}
			}, 100);
		})();
	});
};

// Recurse over rescon scripts and load in succession to avoid dependency errors
var bootstrap_script_callback = function()
{
	var src = scripts.shift();
	if (Syn && !src)
	{
		bootstrap_ready();
		return;
	}
	Syn.BootstrapScript( src, bootstrap_script_callback );
}

// Start the bootstrap process
bootstrap_script_callback();

};// End s9nloader function

var SynS9nQueue = window.SynS9nQueue;
s9nloader.oncomplete = function()
{
	SynS9nQueue.shift();

	if (!SynS9nQueue.length)
	{
		Syn.$(window).trigger('s9n_loaded');
		return;
	}

	SynS9nQueue[0]();
};

SynS9nQueue.push( s9nloader );
if (SynS9nQueue[0] == s9nloader )
{
	s9nloader();
}

})(); //End Scopespacing and execute

/**
 * SERVER: (no cutename) web02.emerald.synacor.com
 * VHOST: home.suddenlink.net on 10.50.4.21
 */
