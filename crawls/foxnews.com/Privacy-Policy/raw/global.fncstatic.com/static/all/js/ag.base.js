(function(F){var A=function(){this.site=new G(this);this.utils=new J(this);this.widgets=new I(this);};var L={reserved:"Add|OnPageReady|OnDocReady",pageReadyFunction:"bottomInit"};A.prototype={Add:function(N,M){return D(this,N,M);}};function D(S,O,N){O=B(O);var T=function(X){var W=(L.reserved.indexOf(X)>-1)?true:false;if(W){E("[AddConstructor] Error: Reserved word '"+X+"'");}return W;};if(O.indexOf(".")>-1){O=(O.charAt(0)===".")?O.slice(1,O.length):O;var R,U=O.split("."),Q=U.length,M=true;for(R=0;R<Q;R++){var V=U[R];if(P===0&&T(V)){return false;}if(!S[V]){if(R!==Q-1){S[V]={};}else{if(typeof N!=="function"){S[V]={};}else{S[V]=N;}}}S=S[V];}}else{if(O.length>0&&!S[O]){if(T(O)){return false;}if(typeof N!=="function"){S[O]={};S=S[O];}else{S[O]=N;S=S[O];}}else{if(T(O)){return false;}S=S[O];}}if(typeof N==="object"&&!H(N)){var P;for(P in N){if(S[P]){E("[AddConstructor] Warning: Overwriting '"+P+"' "+typeof S[P]+". (constructor:"+O+" )");}S[P]=N[P];}}return S;}function G(M){var N=this;this.Add=function(P,O){return D(N,P,O);};this.OnPageReady=(function(){var O=new C(N,M);return O.callback;}());this.OnDocReady=(function(){var O=new K(N,M);return O.callback;}());}function I(){var M=this;this.Add=function(O,N){return D(M,O,N);};}function J(){var M=this;this.Add=function(O,N){return D(M,O,N);};}J.prototype={queryStr:{get:function(S){var N,R=false,O=window.location.search.substr(1),Q=O.split("&"),M=Q.length;for(N=0;N<M;N++){var P=Q[N].split("=");if(P[0]===S){R=""+decodeURIComponent(P[1]);break;}}return R;}},debug:function(N){if(FOX.utils.queryStr.get("stc")==="y"){try{FOX.utils.console(N);}catch(M){FOX.utils.console("[DEBUG] "+M);}}},console:function(M){if(typeof window.console==="object"&&M){console.log(M);}},resizeIFrame:function(N){if(!N){return false;}var M=F(N.target),O=N.src;F("iframe").each(function(){var P=F(this);if(typeof P.attr("src")!=="undefined"){if(P.attr("src").indexOf(O)>-1&&!P.data("resized")){P.css({height:M.outerHeight(true),width:P.parent().innerWidth()});P.data("resized",true);}}});}};J.prototype.pageRefresh={enable:function(){if(typeof ew_enableRefresh==="function"){ew_enableRefresh();}},disable:function(){if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}};J.prototype.environment={get:function(){return(this.isProd(document.location.hostname))?"prod":"dev";},getHostByDesc:function(N){if(typeof window.FOX_pagedescriptor==="undefined"){return false;}var M=window.FOX_pagedescriptor;switch(M){case"fn2":M="foxnews.com";break;case"fb":M="smallbusiness.foxbusiness.com";break;case"fb2":M="foxbusiness.com";break;case"fn-latino":M="latino.foxnews.com";break;default:return false;}if(loc.hostname.indexOf(M)===-1){return false;}if(N){return M;}return loc.protocol+"//"+(loc.hostname.substr(0,M.indexOf))+M;},getDomainHost:function(P,N){var S=window.location,O=S.hostname,R=S.protocol,M=O.split("."),Q=[];if(P){Q.push(R+"//");if(!N){return R+"//"+O;}}if(O.indexOf("latino")>-1){Q.push("latino.");}else{if(O.indexOf("smallbusiness.")>-1){Q.push("smallbusiness.");}else{if(N){Q.push("www.");}}}return Q.join("")+M[(M.length-2)]+"."+M[(M.length-1)];},check:function(S,R){S=S.toLowerCase();var N,P=false,O=false,Q=["smallbusiness.","latino.foxnews.","origin-latino.foxnews.","v8-pvw.","v8-staging.","v8-origin.","v8-origin-www.","www.","origin.","origin-prod.","origin-drupal.","origin-www.","origin-www2.","origin-vignette.","preprod.","preprod2.","pvw.","pvw2.","staging.","staging2."],M=Q.length;for(N=0;N<M;N++){if(S.indexOf(Q[N])===0){O=true;break;}}if(R==="prod"){P=O;}else{if(!O){P=true;}}return P;},isProd:function(M){M=M||document.location.hostname;return this.check(M,"prod");},isDev:function(M){M=M||document.location.hostname;return this.check(M,"dev");}};J.prototype.datetime={format:function(O,N){N=N||null;var T={month:O.getUTCMonth(),day:O.getDay(),year:O.getFullYear(),date:O.getDate(),hour:O.getHours(),minutes:O.getMinutes(),seconds:O.getSeconds(),ampm:((O.getHours()<12)?"am":"pm"),fullStr:O.toString()};var Q={"${mm}":(T.month+1),"${month}":this.getUTCMonthString(T.month),"${month:short}":this.getUTCMonthString(T.month,"short"),"${day}":this.getDayString(T.day),"${day:short}":this.getDayString(T.day,"short"),"${yr}":T.year,"${dd}":((T.date<10)?"0"+T.date:T.date),"${ddTH}":this.oldEnglish(T.date),"${hr}":((T.hour>12)?T.hour-12:T.hour),"${hr:mil}":T.hour,"${min}":((T.minutes<10)?"0"+T.minutes:T.minutes),"${sec}":((T.seconds<10)?"0"+T.seconds:T.seconds),"${ampm}":T.ampm,"${AMPM}":(T.ampm).toUpperCase(),"${AmPm}":((T.ampm).charAt(0)).toUpperCase()+(T.ampm).charAt(1)};if(N===null){var S=this.getUTCMonthString(T.month),R=O.toDateString();return S+" "+R.substr(8).replace(" ",", ");}else{var P;for(P in Q){var M=N.indexOf(P);while(M!==-1){N=N.replace(P,Q[P]);M=N.indexOf(P);}}return N;}},oldEnglish:function(M){M+="";var N=parseInt(M.charAt(M.length-1),10);switch(N){case 1:M+="st";break;case 2:M+="nd";break;case 3:M+="rd";break;default:M+="th";break;}return M;},formatUTCDate:function(N,M){return FOX.utils.datetime.format(N,M);},getUTCMonthString:function(O,M){M=M||"full";var N;switch(M){case"short":N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];break;default:N=["January","February","March","April","May","June","July","August","September","October","November","December"];break;}return N[O];},getDayString:function(O,N){N=N||"full";var M;switch(N){case"short":M=["Sun","Mon","Tue","Wed","Thur","Fri","Sat"];break;default:M=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];break;}return M[O];}};J.prototype.extLink={set:function(R,P,O,N){R=R||F("a[rel*='external']");var M=this,Q="ext-linked";R.each(function(){var T=F(this),S=F.trim(T.attr("rel")||""),U=(P&&typeof P==="string")?P:(F.trim(T.attr("href")||"")),W=(O)?(!M.confirmLink(U)):true;if((S.toLowerCase()).indexOf(Q)<0&&U.length>0&&U!=="#"&&W){S=(S.indexOf("external")>-1)?S:[S,"external"].join(" ");S=F.trim([S,Q].join(" "));T.attr("rel",S);T.click(function(){window.open(U,"_blank");return false;});if(!T.attr("target")){T.attr("target","_blank");}if(N){var V=(window.FOX_DomainPath||"")+"/static/v/all/img/external-link.png";T.after('<img src="'+V+'" />');}}});},confirmLink:function(P){var M,N=false,O=[".foxnews.com",".foxbusiness.com"];for(M=0;M<O.length;M+=1){if(P.indexOf(O[M])>-1){N=true;break;}}return N;}};function C(M){this.callback=function(){var P=arguments,R=(P.length===1)?"":P[0],Q=(P.length===1)?P[0]:P[1];var O=(R.length>0)?M.Add(R,Q):Q,N=M[L.pageReadyFunction]||function(){};if(typeof O==="function"){M[L.pageReadyFunction]=function(){N();O();};}else{if(typeof O==="object"&&O.init){M[L.pageReadyFunction]=function(){N();O.init();};}}};}function K(M){this.callback=function(){var O=arguments,Q=(O.length===1)?"":O[0],P=(O.length===1)?O[0]:O[1];var N=(Q.length>0)?M.Add(Q,P):P;if(typeof N==="function"){F(document).ready(function(){N();});}else{if(typeof N==="object"&&N.init){F(document).ready(function(){N.init();});}}};}function H(M){M=M||false;return Object.prototype.toString.call(M)==="[object Array]";}function B(M){return(!M)?"":M.toString().replace(/^\s+/,"").replace(/\s+$/,"");}function E(M){if(typeof window.console==="object"&&M){console.log(M);}}window.FOX=window.fox=new A();}(jQuery));(function($){window.FOX_DomainPath=(function(){var ret="",loc=window.location,host=loc.hostname,domainHost=FOX.utils.environment.getDomainHost();var idx=function(val){return(host.indexOf(val)>-1)?true:false;};if(FOX.utils.environment.isProd()){var sub=(idx("staging."))?"staging":"www";if(sub==="staging"){ret="http://staging.fbnstatic.com";}else{ret="http://global.fncstatic.com";}}else{if(idx("-qa.")){ret="http://qa.global.fncstatic.com";}}return ret;}());FOX.Add("site",{topInit:function(){FOX.site.ads.init();FOX.site.metaDescriptor.init();},bottomInit:function(){FOX.site.tracking.init();FOX.utils.extLink.set($("a[rel*='external']",null,true));}});FOX.Add("site.tracking",{init:function(){}});FOX.Add("site.ads",{init:function(){$(document).ready(function(){$.ad.init();});},writeInline:function(id,type){if("dc"===type){$.ad.dc.inline(id);}else{fox.utils.debug("[global.js] inline ads are not enabled");}}});FOX.Add("site.metaDescriptor",{init:function(){var obj={};$("meta").each(function(){var item=$(this),nameAttr=item.attr("name"),propAttr=item.attr("property"),val=item.attr("content");if(nameAttr){if(!obj.name){obj.name={};}obj.name[nameAttr]=(val)?val:false;}else{if(propAttr){if(!obj.property){obj.property={};}obj.property[propAttr]=(val)?val:false;}}});window.FOX_metadescriptor=obj;}});FOX.Add("site.mediaIconOverlay",{set:function(obj){var self=this;if(!obj){return false;}obj.type=(function(type){var ret=false;if(obj.elm.hasClass("video-ct")){ret="video";}else{if(obj.elm.hasClass("slideshow-ct")){ret="slideshow";}else{if(obj.elm.hasClass("interactive-ct")||obj.elm.hasClass("freeform-ct")){ret="interactive";}else{if(obj.elm.hasClass("magnify-ct")){ret="magnify";}}}}return(ret)?ret:type;}(obj.type||false));if(!obj.type){return false;}obj.elm.find("span.type").hide();obj.container=obj.elm;obj.elm=obj.elm.find(".m");var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var isVideoAlt=function(elm){return(elm.hasClass("m-controller"))?true:false;};obj.elm.each(function(){var item=$(this),imgElm=item.find("img"),pObj=obj,img=new Image();pObj.elm=item;if(!isVideoAlt(item)){var trigger=function(){img.onload=function(){pObj.dim=[img.width,img.height];self.setOverlay(pObj);};img.src=imgElm.attr("src");};if(pObj.dim){self.setOverlay(pObj);}else{if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){trigger();clearInterval(interval);}},650);}else{trigger();}}}});},useAbsImg:function(dim,check){var x,map=["118","96","64","48","32","24","16"],ret=false;if(!isNaN(dim)){if(dim>=map[0]){ret=map[0];}if(dim<=20){ret=map[map.length-1];}else{for(x=0;x<map.length;x++){var val=map[x],nVal=(map[x+1])?map[x+1]:0,diffH=Math.abs(val-dim),diffL=Math.abs(val-nVal);if(dim<=val&&dim>nVal){ret=(diffH>diffL)?nVal:val;break;}}}}return(ret)?ret:false;},setOverlay:function(obj){var FS=this,elm=obj.elm,path="",ratio=obj.ratio||0.35,dim=obj.dim,position=obj.position||"center",size=obj.size||118,useAltImg=obj.useAltImg,altHover=obj.altHover||false,noClick=obj.noClick||false,useAbsImg=true,absDim=false,type=obj.type||"video";switch(type){case"slideshow":path="/static/v/all/img/ss-overlay_${dim}.png";break;case"interactive":path="/static/v/all/img/ia-overlay_${dim}.png";break;case"magnify":path="/static/v/all/img/mg-overlay_${dim}.png";break;default:path="/static/v/all/img/vd-overlay_${dim}.png";}function mFloor(val){return Math.floor(val);}function px(val){return val+"px";}function set(){var resizeVal=(dim[1]<dim[0])?dim[1]:dim[0],resize=resizeVal*ratio;resize=(resize>size)?size:resize;var imgW=resize,imgH=imgW,ovrL=false,ovrR=false,ovrT=false,ovrB=false,edgeW=0.03,edgeH=0.05;edgeW=mFloor(dim[0]*edgeW);edgeH=mFloor(dim[1]*edgeH);switch(position){case"top right":ovrR=edgeW;ovrT=edgeH;break;case"bottom right":ovrR=edgeW;ovrB=edgeH;break;case"top left":ovrL=edgeW;ovrT=edgeH;break;case"bottom left":ovrL=edgeW;ovrB=edgeH;break;default:ovrL=Math.floor((dim[0]*0.5)-(imgW*0.5));ovrT=Math.floor((dim[1]*0.5)-(imgH*0.5));}var css={};if(ovrR){css.right=px(ovrR);}if(ovrL){css.left=px(ovrL);}if(ovrT){css.top=px(ovrT);}if(ovrB){css.bottom=px(ovrB);}if(useAbsImg&&FS.useAbsImg(imgW)){imgW=FS.useAbsImg(imgW);imgH=imgW;absDim=imgW;}var overlaySrc=(function(){var dim,ret=(window.FOX_DomainPath||"")+path;if(useAbsImg&&absDim){dim=absDim;}dim=(dim)?dim:"";return ret.replace("${dim}",dim);}());var hoverImg=new Image();hoverImg.src=overlaySrc;css.width=px(imgW);css.minHeight=px(imgH);css.background='url("'+overlaySrc+'") no-repeat 0px 0px';var overlay=$('<div class="media-overlay" style="position:absolute;"></div>'),titleLink=elm.parent().find("> h3:first");overlay.css(css);elm.find("a").css({position:"relative"});elm.find("img").each(function(){var item=$(this),parent=item.parent(),isHover=false;parent.css({display:"block",padding:"0"}).prepend(overlay);if(!noClick){parent.click(function(){var el=$(this),onclick=el.attr("onclick"),href=el.attr("href");useEvent=(onclick)?onclick:href;if(onclick){eval(onclick);}else{window.location.href=href;}return false;});}var overlayElm=parent.find(".media-overlay");function hoverOver(over){if(over&&!isHover){isHover=true;overlayElm.css("background-position","0px "+px("-"+imgH));}else{if(isHover){isHover=false;overlayElm.css("background-position","0px 0px");}}}if(parent.parent().find("> .credit").size()>0){overlayElm.css({bottom:"21px"});}titleLink.hover(function(){hoverOver(true);},function(){hoverOver();});parent.hover(function(){hoverOver(true);},function(){hoverOver();});});}set();}});FOX.Add("site.mediaOverlay",{set:function(elm){var MO=this;function set(type){elm.find(".m > a").each(function(){MO.render.common(elm,$(this),type);});}if(elm.hasClass("slideshow-ct")){set("slideshow");}else{if(elm.hasClass("interactive-ct")||elm.hasClass("freeform-ct")){set("interactive");}}},render:{common:function(parent,elm,type){var MO=this,imgElm=elm.find("img");function trigger(img){var dim=[img.width,img.height],overlay=MO.useOverlay(dim[0],type);if(!overlay){return false;}if(dim[0]<156){return false;}parent.find("h3 span.type-"+type).hide();elm.css({position:"relative",display:"block"});var html=$('<span class="m-img-overlay"><img src="'+overlay+'" /></span>');html.css({position:"absolute",top:"0px",left:"0px",width:dim[0],height:dim[1]});html.find("img").css({width:dim[0],height:dim[1]});elm.append(html);parent.find(".m > .credit").hide();var openWin=function(){window.open(elm.attr("href"),"_self");};parent.children(":not(.related):not(.m)").find("a").click(function(){openWin();return false;});parent.find("> .m").click(function(){openWin();return false;});}var img=new Image();var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var setUp=function(){img.onload=function(){trigger(img);};img.src=imgElm.attr("src");};if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){setUp();clearInterval(interval);}},650);}else{setUp();}},useOverlay:function(width,type){var src=(window.FOX_DomainPath||"")+"/static/v/all/img/"+type+"_${width}x${height}.png";var types={slideshow:[132,156,190,228,259,267,328,397,604],interactive:[132,156,190,228,259,267,328,397,604],video:[132,156,190,228,259,267,328],_hVar:[74,88,107,128,146,151,185,224,341]};if(!types[type]){return false;}var X,arr=types[type],idx=0,sel=arr[0];for(x=0;x<arr.length;x++){if(width<=arr[x]){idx=x;sel=arr[x];break;}}var srcW=sel,srcH=types._hVar[idx];switch(type){case"slideshow":if(width===180){srcW=180;srcH=101;}break;}return src.replace("${width}",srcW).replace("${height}",srcH);}}});FOX.Add("site.videoIconOverlay",{set:function(){var x,i,FS=this,args=arguments,obj={elm:false,ratio:false,dim:false,position:false,size:false,hover:true};if(args.length===1&&typeof args[0]==="object"){for(i in args[0]){obj[i]=args[0][i];}}else{for(x=0;x<args.length;x++){switch(x){case 0:obj.elm=args[0];break;case 1:obj.ratio=args[1];break;case 2:obj.dim=args[2];break;case 3:obj.position=args[3];break;case 4:obj.size=args[4];break;case 5:obj.useAltImg=args[5];break;case 6:obj.altHover=args[6];break;case 7:obj.noClick=args[7];break;}}}var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var isVideoAlt=function(elm){return(elm.hasClass("m-controller"))?true:false;};obj.elm.each(function(){var item=$(this),imgElm=item.find("img"),pObj=obj,img=new Image();pObj.elm=item;if(!isVideoAlt(item)){var trigger=function(){img.onload=function(){pObj.dim=[img.width,img.height];FS.setOverlay(pObj);};img.src=imgElm.attr("src");};if(pObj.dim){FS.setOverlay(pObj);}else{if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){trigger();clearInterval(interval);}},650);}else{trigger();}}}});},useAbsImg:function(dim,check){var x,map=["118","96","64","48","32","24","16"],ret=false;if(!isNaN(dim)){if(dim>=map[0]){ret=map[0];}if(dim<=20){ret=map[map.length-1];}else{for(x=0;x<map.length;x++){var val=map[x],nVal=(map[x+1])?map[x+1]:0,diffH=Math.abs(val-dim),diffL=Math.abs(val-nVal);if(dim<=val&&dim>nVal){ret=(diffH>diffL)?nVal:val;break;}}}}return(ret)?ret:false;},setOverlay:function(obj){var FS=this,elm=obj.elm,ratio=obj.ratio||0.35,dim=obj.dim,position=obj.position||"center",size=obj.size||118,useAltImg=obj.useAltImg,altHover=obj.altHover||false,noClick=obj.noClick||false,useAbsImg=true,absDim=false;var overlaySrc=(window.FOX_DomainPath||"")+"/static/v/all/img/vp-overlay${dim}${hover}.png";function mFloor(val){return Math.floor(val);}function px(val){return val+"px";}function hover(over){over=(altHover)?((over)?false:true):over;var dim;if(useAbsImg&&absDim){dim=absDim;}dim=(dim)?("-"+dim):"";return overlaySrc.replace("${dim}",dim).replace("${hover}",(over)?"-hover":"");}function set(){var resizeVal=(dim[1]<dim[0])?dim[1]:dim[0],resize=resizeVal*ratio;resize=(resize>size)?size:resize;var imgW=resize,imgH=imgW,ovrL=false,ovrR=false,ovrT=false,ovrB=false,edgeW=0.03,edgeH=0.05;edgeW=mFloor(dim[0]*edgeW);edgeH=mFloor(dim[1]*edgeH);switch(position){case"top right":ovrR=edgeW;ovrT=edgeH;break;case"bottom right":ovrR=edgeW;ovrB=edgeH;break;case"top left":ovrL=edgeW;ovrT=edgeH;break;case"bottom left":ovrL=edgeW;ovrB=edgeH;break;default:ovrL=Math.floor((dim[0]*0.5)-(imgW*0.5));ovrT=Math.floor((dim[1]*0.5)-(imgH*0.5));}var css={};if(ovrR){css.right=px(ovrR);}if(ovrL){css.left=px(ovrL);}if(ovrT){css.top=px(ovrT);}if(ovrB){css.bottom=px(ovrB);}if(useAbsImg&&FS.useAbsImg(imgW)){imgW=FS.useAbsImg(imgW);imgH=imgW;absDim=imgW;}css.width=px(imgW);css.minHeight=px(imgH);var overlay=$('<span class="vid-overlay"><img style="position:absolute; display:inline;" src="'+hover()+'"/></span>'),titleLink=elm.parent().find("> h3:first");overlay.find("img").css(css);elm.find("a").css({position:"relative"});elm.find("img").each(function(){var item=$(this),parent=item.parent(),isHover=false,prevOverlay=parent.find("> .vid-overlay:visible");if(prevOverlay.size()>0){prevOverlay.css("display","none");}parent.css({display:"block",padding:"0"}).prepend(overlay);if(!noClick){parent.click(function(){var el=$(this),onclick=el.attr("onclick"),href=el.attr("href");useEvent=(onclick)?onclick:href;if(onclick){eval(onclick);}else{window.location.href=href;}return false;});}var overlayElm=parent.find(".vid-overlay"),overlayImg=overlayElm.find("img");function hoverOver(over){if(over&&!isHover){isHover=true;overlayImg.attr("src",hover(true));}else{if(isHover){isHover=false;overlayImg.attr("src",hover());}}}titleLink.hover(function(){hoverOver(true);},function(){hoverOver();});parent.hover(function(){hoverOver(true);},function(){hoverOver();});});}var hoverImg=new Image();hoverImg.src=hover(true);set();}});var formatNumber=window.formatNumber=function(num,dec,thou,pnt,curr1,curr2,n1,n2){var i,x=Math.round(num*Math.pow(10,dec));if(x>=0){n1=n2="";}var y=(""+Math.abs(x)).split(""),z=y.length-dec;if(z<0){z--;}for(i=z;i<0;i++){y.unshift("0");}if(z<0){z=1;}y.splice(z,0,pnt);if(y[0]==pnt){y.unshift("0");}while(z>3){z-=3;y.splice(z,0,thou);}var r=curr1+n1+y.join("")+n2+curr2;return r;};window.AjaxGetEvent=function(event_data,callback){var GE=this;GE.mydata=event_data;GE.mycallback=callback;GE.get=function(url,params,type){$.get(url,params,$.context(this).callback("eventcallback"),type);};GE.eventcallback=function(ajaxdata){GE.mycallback(ajaxdata,GE.mydata);};};}(jQuery));(function(A){A(document).ready(function(){loadAttempt(5,500,function(){return(typeof A.ad!="undefined"&&typeof A.ad._meta.raw.genre!="undefined")?true:false;},function(){if(typeof ew_disableRefresh==="function"&&A.ad._meta.raw.genre!="homePage"){ew_disableRefresh();}else{if(typeof ew_enableRefresh==="function"&&A.ad._meta.raw.genre=="homePage"){ew_enableRefresh();}}});});}(jQuery));function ew_enableRefresh(){var A=600;try{ew_disableRefresh();}catch(B){}window.refreshInterval=setInterval(function(){location.reload(false);},A*1000);}function ew_disableRefresh(){clearInterval(window.refreshInterval);}(function($){var CONST={US_States:{AK:"Alaska",AL:"Alabama",AR:"Arkansas",AS:"American Samoa",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",FM:"Federated States of Micronesia",GA:"Georgia",GU:"Guam",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MH:"Marshall Islands",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MP:"Northern Mariana Islands",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",PW:"Palau",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VI:"Virgin Islands",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"}};function WeatherService(namespace){this.namespace=namespace;var initVars={weatherCityData:[],ACListener:{},currentLocId:"",currentCityString:"",serviceTriggered:false,UPDATE_HEADER_ACTION:"UPDATE_HEADER",SERVICE_URL_WEATHER_JSONP:"/weather/feed/getWeatherJsonP",SERVICE_URL_LOCATION_JSONP:"/weather/feed/getLocationIdJsonP",SERVICE_URL_WEATHER_HTML:"/weather/feed/getWeatherHtml",SERVICE_URL_LOCATION_REGION_JSON:"/weather/feed/getLocationRegionCodeJson",SERVICE_URL_CITY_DATA:"/weather/feed/getWeatherCityData",SERVICE_URL_MARINE_JSON:"/weather/feed/getMarineLocationsJson",SERVICE_URL_SKI_RESORTS_JSON:"/weather/feed/getSkiResortsJson",SERVICE_URL_SKI_COND_JSON:"/weather/feed/getSkiConditionJson",SERVICE_URL_AIRPORT_LOCATION_JSON:"/weather/feed/getAirportLocationIdJson",SERVICE_URL_AIRPORT_DELAY_JSON:"/weather/feed/getAirportDelayJson",PAGE_URL_YOUR_WEATHER:"/weather/your-weather/index.html",PAGE_URL_SEARCH_RESULTS:"/weather/search-results/index.html",PATH_WEATHER_ICON_IMAGE:(window.FOX_DomainPath||"")+"/static/all/img/weather/icons_60x60/",PATH_WEATHER_ICON_IMAGE_LARGE:(window.FOX_DomainPath||"")+"/static/all/img/weather/icons_96x96/",WEATHER_ICON_IMAGE_EXT:".png",WEATHER_DEFAULT_LOCATION:"USNY0996",WEATHER_COOKIE_DOMAIN:"foxnews.com",MSG_DEFAULT_ERROR:"Data unavailable. Please check back again soon.",MSG_AIRPORT_CODE_ERROR:"Please enter a valid 3- or 4-digit airport code.",MSG_AIRPORT_NOT_FOUND_ERROR:"No airport results found.  Please try again.",TXT_DEFAULT_SEARCH_FIELD:"Enter city or zip code",TXT_HEADER_SEARCH_FIELD:"Enter city or zip",TXT_AIRPORT_SEARCH_FIELD:"Enter airport code (IATA or ICAO)",LIST_SKI_CONDITIONS_ENABLED:"AK|AL|AZ|CA|CO|CT|IA|ID|IL|IN|MA|MD|ME|MI|MN|MO|MT|NC|ND|NH|NJ|NM|NV|NY|OH|OR|PA|RI|SD|TN|UT|VA|VT|WA|WI|WV|WY",LIST_MARINE_FORECAST_ENABLED:"AK|AL|AS|AZ|CA|CT|DC|DE|FL|FM|GA|GU|HI|LA|MA|MD|ME|MH|MS|NC|NJ|NY|OR|PA|PR|PW|RI|SC|TX|VA|VI|VT|WA"};var i;for(i in initVars){this[i]=initVars[i];}this.extService=new ExternalServices(this);}WeatherService.prototype={init:function(fn){var ws=this,initData='{"location":[{"loc_id":"USNY0996","zip":"10108","city":"New York","state":"NY"}]}';var trigger=function(data){ws.createWeatherLocationCookie(data);ws.renderWidget();if(typeof fn==="function"){fn();}};if(ws.weatherCookie("weatherloc")){var cookie=ws.weatherCookie("weatherloc"),weatherlocObj=this.createObjFromJSON(cookie);if(!weatherlocObj||!weatherlocObj.location||!weatherlocObj.location[0].loc_id){trigger(initData);}else{trigger(cookie);}}else{if(window.CONST_Akamai_GEO&&CONST_Akamai_GEO.countryCode==="US"){ws.getGeoLocation(function(data){trigger(data||initData);});}else{trigger(initData);}}},getGeoLocation:function(fn){var ws=this,callbackFn="location_searchresults_callback_geo";var ret=function(info){if(typeof fn==="function"){fn(info);}};var zip=(function(){var obj=window.CONST_Akamai_GEO,range=obj.zipRange,zip=range.substring(0,5);return(!isNaN(zip))?zip:false;}());if(zip){ws.location_searchresults_callback_geo=function(data){ret(data);};$.ajax({url:weather_service.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:zip,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:true,cache:true});}else{ret(false);}},setExtData:function(location,info){this.extService._DataObj={location:location,info:this.createObjFromJSON(info)};this.extService.reloadWidgets();},weatherCookie:function(name,value,options){if(typeof value!=="undefined"){options=options||{};if(value===null){value="";options.expires=-1;}var expires="";if(options.expires&&(typeof options.expires==="number"||options.expires.toUTCString)){var date;if(typeof options.expires==="number"){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}expires="; expires="+date.toUTCString();}var path=options.path?"; path="+(options.path):"",domain=options.domain?"; domain="+(options.domain):"",secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("");}else{var cookieValue=null;if(document.cookie&&document.cookie!==""){var i,cookies=document.cookie.split(";");for(i=0;i<cookies.length;i++){var cookie=$.trim(cookies[i]);if(cookie.substring(0,name.length+1)===(name+"=")){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}},createWeatherDataCookie:function(locId,jsonString){var validateWeatherObj=this.createObjFromJSON(jsonString),weatherJSObj=validateWeatherObj.weatherData,city=weatherJSObj.cityName,country=weatherJSObj.country,tempHi=weatherJSObj.days[0].hi,tempLo=weatherJSObj.days[0].lo;if(validateWeatherObj&&city!==""&&country!==""){var expDate=new Date();if(tempHi===""||tempLo===""){expDate.setTime(expDate.getTime()+(60*1000));}else{expDate.setTime(expDate.getTime()+(3*60*60*1000));}this.weatherCookie("weatherdata__"+locId,jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});this.renderFavorites();}},createWeatherLocationCookie:function(jsonString){var expDate=new Date();expDate.setTime(expDate.getTime()+(1000*24*60*60*1000));this.weatherCookie("weatherloc",jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});},createWeatherFavoritesCookie:function(favArray){var favLocCookieString=favArray.join("|");if(favLocCookieString!==""){var expDate=new Date();expDate.setTime(expDate.getTime()+(1000*24*60*60*1000));this.weatherCookie("weatherfavlocs",favLocCookieString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});}else{this.weatherCookie("weatherfavlocs","",{expires:-1,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});}},getWeatherDataCookie:function(locId){return this.weatherCookie("weatherdata__"+locId);},createObjFromJSON:function(jsonString){if(jsonString!==""){return eval("("+unescape(jsonString).replace(/\s+/g," ")+")");}else{return null;}},createLocJSObj:function(data){if(!data.loc_id){return null;}var i,obj={loc_id:"",city:"",zip:"",state:"",country:""};for(i in data){var val=data[i];if(i==="city"){val=val.replace("`","'");}obj[i]=val;}var fullArr=[];fullArr.push(obj.city||"");fullArr.push((obj.loc_id.substr(0,2).toUpperCase()!=="US"&&(obj.country||obj.state))?obj.country:obj.state);obj.fullCityString=fullArr.join(", ");return obj;},displayHeader:function(serviceDomain,config){var i,self=this;if(this.serviceTriggered){return false;}else{this.serviceTriggered=true;}config=(typeof config==="object")?config:{};if(typeof serviceDomain!=="undefined"){this.PAGE_URL_SEARCH_RESULTS=serviceDomain+this.PAGE_URL_SEARCH_RESULTS;this.PAGE_URL_YOUR_WEATHER=serviceDomain+this.PAGE_URL_YOUR_WEATHER;this.SERVICE_URL_LOCATION_JSONP=serviceDomain+this.SERVICE_URL_LOCATION_JSONP;this.SERVICE_URL_WEATHER_JSONP=serviceDomain+this.SERVICE_URL_WEATHER_JSONP;if(document.location.hostname.lastIndexOf(this.WEATHER_COOKIE_DOMAIN)==-1){this.WEATHER_COOKIE_DOMAIN=document.location.hostname;}}if(config){for(i in config){var val=config[i];switch(i){case"icons":if(val===24){self.PATH_WEATHER_ICON_IMAGE=self.PATH_WEATHER_ICON_IMAGE.replace("icons_60x60","icons_24x24");}break;}}}this.init();},renderWidget:function(){$("body").data("weather-rendered",true);var ws=this;ws.serviceTriggered=true;setTimeout(function(){ws.renderHeaderWeather();ws.renderHeaderLocationChange();},500);},renderHeaderWeather:function(){var ws=this;var trigger=function(){var requestedLocationObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));$(".portlet .weather.current-conditions").each(function(){ws.renderYourWeather(this,requestedLocationObj.location[0].loc_id,"weather_current");});};if(this.weatherCookie("weatherloc")){var weatherlocObj=this.createObjFromJSON(this.weatherCookie("weatherloc"));var locObject=this.createLocJSObj(weatherlocObj.location[0]);if(this.getWeatherDataCookie(locObject.loc_id)){this.headerDisplayAction(locObject.loc_id);ws.setExtData(locObject,this.getWeatherDataCookie(locObject.loc_id));ws.renderWeatherWidget(locObject.loc_id);}else{this.fetchAndSaveWeatherJSONCookie(locObject.loc_id);}trigger();}else{this.init(function(){var weatherlocObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));ws.fetchAndSaveWeatherJSONCookie(weatherlocObj.location[0].loc_id);trigger();});}},renderRightRailSearch:function(){var topRightRailHtml="<ul>"+this.generateRightRailSearch("yourweather")+"</ul>";document.write(topRightRailHtml);},generateRightRailSearch:function(ac_results_css_appendix){var ws=this,searchField="weatherInput_"+ac_results_css_appendix,rightRailHTML='<li><form method="get" action="'+ws.PAGE_URL_SEARCH_RESULTS+'" id="weather_search_form" class="form_1" onsubmit="weather_service.locationSearchAction(this,\'#'+searchField+'\');"><fieldset class="text_box"><div class="search-input-holder"><div class="preloader-img"></div><input type="text" name="searchTerm" id="'+searchField+'" onfocus="weather_service.searchFieldOnFocus(this);" onblur="weather_service.searchFieldOnBlur(this, \''+ws.TXT_DEFAULT_SEARCH_FIELD+'\');" class="weather_city_autocomplete_'+ac_results_css_appendix+' search_input no_spon" size="50" value="'+ws.TXT_DEFAULT_SEARCH_FIELD+'" name="keys"/></div><input type="submit" class="go" value=""/></fieldset></form></li>';return rightRailHTML;},renderWeatherWidget:function(locationId){var widgetElm=$("#weather-widget");if(widgetElm.size()===0){return false;}var ws=this,headerDataCookie=this.getWeatherDataCookie(locationId),useLgIcons=(widgetElm.hasClass("use-lg-icons"))?true:false,useImgSrc=(useLgIcons)?ws.PATH_WEATHER_ICON_IMAGE_LARGE:ws.PATH_WEATHER_ICON_IMAGE;var imgDim=(function(){var sp=useImgSrc.split("/"),val=sp[sp.length-1];val=val.replace("icons_","").split("x");return val;}());if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie);var wdObj=headerDataObj.weatherData;var form=widgetElm.find("form:first");form.find("label, p.state").html(wdObj.cityName+((wdObj.stateShort.length>0)?", "+wdObj.stateShort:"")).unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);});var listElm=widgetElm.children("ul:first");listElm.children("li.section").each(function(i){var item=$(this);if(wdObj.days[i]){var dataSource=wdObj.days[i];var imgSrc=useImgSrc+dataSource.image+ws.WEATHER_ICON_IMAGE_EXT;var hiTemp=dataSource.hi;var lowTemp=dataSource.lo;if(i===0){item.find(".current").html(wdObj.currentTemp+"&#176;");}if(item.find(".media img").size()===0){item.find(".media").html("<img />");}item.find(".media img").css({width:imgDim[0]+"px",height:imgDim[1]+"px"}).each(function(){var elm=$(this);elm.css({opacity:"0",display:"inline"});if(!$.browser.opera){var img=new Image();img.onload=function(){elm.attr("src",imgSrc);animateFn.show(elm,{speed:300,type:"swing"});};img.src=imgSrc;}else{elm.css({backgroundImage:"none",display:"inline",opacity:"0"});elm.attr({src:imgSrc});animateFn.show(elm,{speed:300,type:"linear"});}});var hiLow="Hi "+((hiTemp.length>0)?hiTemp+"&#176;":"-")+" | Lo "+((lowTemp.length>0)?lowTemp+"&#176;":"-");item.children("div:first").children("span").html(hiLow);item.unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);});}});}if(widgetElm.data("setListeners")){return false;}widgetElm.data("setListeners",true);widgetElm.find("form:first").each(function(){var form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value"),overSearch=true;search.focus(function(){var elm=$(this),val=elm.val();elm.data("currVal",val);elm.val("");}).blur(function(){var elm=$(this),val=elm.attr("value");elm.val((val==="")?elm.data("currVal"):val);});form.hover(function(){overSearch=true;},function(){overSearch=false;});$(document).bind("click",function(){if(!overSearch){var val=search.attr("value"),curr=search.data("currVal");if(val!==curr&&val!==txt){form.submit();}}});form.submit(function(){search.data("currVal",search.val());ws.locationSearchAction(this,"#weather_widgetInput",ws.UPDATE_HEADER_ACTION);return false;});});},searchFieldOnFocus:function(inputField){if(inputField.value===this.TXT_DEFAULT_SEARCH_FIELD||inputField.value===this.TXT_HEADER_SEARCH_FIELD){inputField.value="";}},searchFieldOnBlur:function(inputField,message){if(inputField.value===""){inputField.value=message;}},airportSearchAction:function(airportForm,airportLocId){var ws=this,regexp=new RegExp("^[a-zA-Z]{3,4}$"),reqAC=$("#airportCode").val();if(!reqAC.match(regexp)){showToConsole(ws.MSG_AIRPORT_CODE_ERROR);return false;}$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_AIRPORT_LOCATION_JSON,data:{airportCode:reqAC,cb:cacheBuster()},success:function(data){var parsed=ws.createObjFromJSON(data);if(parsed){if(parsed.location.length>0){var airportLocObj=ws.createLocJSObj(parsed.location[0]);$(airportForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(airportLocId).attr("value",airportLocObj.loc_id);}else{showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR);return false;}}},error:function(){showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR);return false;}});},getSetLocationAction:function(location,callback){if(!location){return false;}var ws=this;var locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$");var upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(location)&&typeof callback==="function"){ws.fetchAndSaveWeatherJSONCookie(location,false,function(data){callback(ws.createObjFromJSON(data));});}},locationSearchAction:function(locationForm,searchInputId,action){var ws=this,locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$"),upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(ws.currentLocId)){$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(searchInputId).attr("name","locId");$(searchInputId).attr("value",ws.currentLocId);if(action===ws.UPDATE_HEADER_ACTION){ws.fetchLocationJSON(ws.currentLocId,function(){ws.renderWidget();});}}else{var locSearchTerm=upToCommaEx.exec($(searchInputId).attr("value")),callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){$(locationForm).attr("action",ws.PAGE_URL_SEARCH_RESULTS);var qStr,locationJson=ws.createObjFromJSON(data);if(locationJson){if(locationJson.location.length===1){var exactMatchObj=ws.createLocJSObj(locationJson.location[0]);if(action===ws.UPDATE_HEADER_ACTION){ws.fetchLocationJSON(exactMatchObj.loc_id,function(){ws.renderWidget();});}else{$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(searchInputId).attr("name","locId");$(searchInputId).attr("value",exactMatchObj.loc_id);}}else{qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+");window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;}}else{qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+");window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;}};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:locSearchTerm[0],callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:true,cache:true});}},gotoYourWeatherPage:function(locId,city,state,country){var ws=this,yourWeatherURL=ws.PAGE_URL_YOUR_WEATHER+"?locId="+locId;window.location.href=yourWeatherURL;},renderYourWeather:function(divClass,locationId,weatherView){var ws=this,feedHolder=$(divClass);if(!locationId||locationId===""){locationId=ws.WEATHER_DEFAULT_LOCATION;}$.get(ws.SERVICE_URL_WEATHER_HTML,{locationId:locationId,weatherView:weatherView},function(data){feedHolder.html(data);var weather_dayly=feedHolder.find(".weather-daily"),weather_hourly=feedHolder.find(".weather-hourly"),average_records=$(".weather.average-and-records h1"),text=average_records.text();text=text.replace("&","& ");feedHolder.find(".weather-current h1").replaceWith('<h2 class="title">Current Conditions</h2>');weather_dayly.find("h1").replaceWith('<h2 class="title">10 Day Forecast</h2>');weather_dayly.addClass("c");weather_hourly.find("h1").replaceWith('<h2 class="title">Hourly Forecast</h2>');weather_hourly.addClass("c");average_records.replaceWith('<h2 class="title">'+text+"</h2>");});},renderSearchResults:function(divClass,searchTerm){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){var searchResultsHtml="";if(data){var resultsIndex,locationJson=ws.createObjFromJSON(data);if(locationJson){if(locationJson.location.length>1){searchResultsHtml+='<p class="results">Your search for <span class="city">'+searchTerm+'</span> returned multiple locations</p><p>Please click on the location you are looking for:</p><p class="sorted">Sorted alphabetically by city, state, country<span/></p><table>';for(resultsIndex=0;resultsIndex<locationJson.location.length;resultsIndex++){var matchingLocObj=ws.createLocJSObj(locationJson.location[resultsIndex]),locationLink=ws.PAGE_URL_YOUR_WEATHER+"?locId="+matchingLocObj.loc_id;if(resultsIndex%2===0){searchResultsHtml+='<tr class="even">';}else{searchResultsHtml+="<tr>";}searchResultsHtml+='<td><a href="'+locationLink+'">'+matchingLocObj.city+"</a></td><td>"+matchingLocObj.state+"</td><td>"+matchingLocObj.country+"</td></tr>";}searchResultsHtml+="</table>";}else{if(locationJson.location.length===1){var locObj=ws.createLocJSObj(locationJson.location[0]);ws.gotoYourWeatherPage(locObj.loc_id,locObj.city,locObj.state,locObj.country);}else{searchResultsHtml+='<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>";}}}else{searchResultsHtml+=ws.MSG_DEFAULT_ERROR;}}else{searchResultsHtml+=ws.MSG_DEFAULT_ERROR;}$(divClass).html(searchResultsHtml);};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:({zipOrLocation:searchTerm,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true,error:function(){$(divClass).html('<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>");}});},renderAirportDelayInfo:function(divClass,airportCode){var ws=this,aCode=airportCode.toUpperCase();$.get(ws.SERVICE_URL_AIRPORT_DELAY_JSON,{airportCode:aCode},function(data){if(data){var delayIndex,delayJson=ws.createObjFromJSON(data),airportDelayHtml="";if(delayJson.delayList.length){airportDelayHtml+='<div class="delay">';for(delayIndex=0;delayIndex<delayJson.delayList.length;delayIndex++){var delayInfo=delayJson.delayList[delayIndex].delayInfo,delayReason=delayJson.delayList[delayIndex].delayReason;airportDelayHtml+='<p><img alt="Exclamation" src="'+(window.FOX_DomainPath||"")+'/static/all/img/exclamation.png"/>Delay Information</p><p class="information">'+delayInfo+'</p><p class="reason">Delay Reason</p><p class="information">'+delayReason+"</p>";}airportDelayHtml+="</div>";}else{airportDelayHtml+='<div class="no-delay"><p><img alt="Exclamation" src="'+(widow.FOX_DomainPath||"")+'/static/all/img/exclamation.png"/>Delay Information</p><p class="information">No delays at '+aCode+" reported.</p></div>";}$(divClass).html(airportDelayHtml);}});},renderMarineForecast:function(divClass){var ws=this,marineHtml="";marineHtml+='<div class="marine-search"><h2 class="title">Marine Forecast</h2><div class="location"><form action="" class="form_1" id="search_form4" method="get"><div id="marine-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="marineState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_MARINE_FORECAST_ENABLED)+'</ul></div><div class="clear"></div></div><div id="marine-cities-dropdown" class="list-type-dropdown"><p class="text title">Choose Marine Location</p><div class="drop_container holder"><input type="hidden" name="marineLocation" value="" /><p id="tide-cities-p" class="weather_dropdown current-value disabled">- select -</p><ul id="tide-cities-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="marine-result"></div>';$(divClass).html(marineHtml);$(".weather .marine-result").each(function(){ws.renderYourWeather(this,"USCA0638","weather_marine");});try{FOX.site.channel.listDropdown.init("marineState");}catch(err){}},renderTideLocationsDropdown:function(stateAbbr){var ws=this;if(stateAbbr!==""){$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_MARINE_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data,textStatus){var marineLocJson=ws.createObjFromJSON(data);if(marineLocJson){if(marineLocJson.marineLocations.length>0){ws.generateTideLocationsList(marineLocJson.marineLocations);}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}});}},generateTideLocationsList:function(locArrayObj){var i,tideLocDropdown="";if(locArrayObj!==null){for(i=0;i<locArrayObj.length;i++){var marineLocId=locArrayObj[i].loc_id,marineCity=locArrayObj[i].city;tideLocDropdown+='<li lang="'+marineLocId+'">'+marineCity+"</li>";}$("#tide-cities-list").html(tideLocDropdown);$("#tide-cities-p").removeClass("disabled");}else{tideLocDropdown+='<li lang=""></li>';$("#tide-cities-list").html(tideLocDropdown);$("#tide-cities-p").html("- select -");$("#tide-cities-p").addClass("disabled");}try{FOX.site.channel.listDropdown.init("marineCities");}catch(err){}},generateStatesList:function(statesList){var i,ws=this,listHtml="",states=statesList.split("|");for(i=0;i<states.length;i++){listHtml+='<li lang="'+states[i]+'">'+CONST.US_States[states[i]]+"</li>";}return listHtml;},renderSkiConditions:function(divClass){var ws=this,skiHtml="";skiHtml+='<div class="ski-search"><h2 class="title">Ski Conditions</h2><div class="location"><form action="" class="form_1" id="search_form5" method="get"><div id="ski-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="skiState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_SKI_CONDITIONS_ENABLED)+'</ul></div><div class="clear"></div></div><div id="ski-resorts-dropdown" class="list-type-dropdown"><p class="text title">Choose Ski Location</p><div class="drop_container holder"><input type="hidden" name="skiLocation" value="" /><p id="ski-resorts-p" class="weather_dropdown current-value disabled">- select -</p><ul id="ski-resorts-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="ski-result"></div>';$(divClass).html(skiHtml);$(".weather .ski-result").each(function(){ws.renderSkiCondResult(this,"303003");});try{FOX.site.channel.listDropdown.init("skiState");}catch(err){}},renderSkiResortsDropdown:function(stateAbbr){var ws=this;if(stateAbbr!==""){$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_SKI_RESORTS_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data,textStatus){var skiResortJson=ws.createObjFromJSON(data);if(skiResortJson){if(skiResortJson.skiResorts!==null&&skiResortJson.skiResorts.length>0){var newSkiReportHolder=[],skiArray=skiResortJson.skiResorts;for(var x=0;x<skiArray.length;x+=1){if(x===0){newSkiReportHolder.push(skiArray[0]);}else{if(newSkiReportHolder[newSkiReportHolder.length-1]["resort_name"]!==skiArray[x]["resort_name"]){newSkiReportHolder.push(skiArray[x]);}}}ws.generateSkiResortsList(newSkiReportHolder);}else{return false;}}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}});}},generateSkiResortsList:function(locArrayObj){var i,skiResortsDropdown="";if(locArrayObj!==null){for(i=0;i<locArrayObj.length;i++){var skiResortId=locArrayObj[i].resort_id,skiResortName=locArrayObj[i].resort_name;skiResortsDropdown+='<li lang="'+skiResortId+'">'+skiResortName+"</li>";}$("#ski-resorts-list").html(skiResortsDropdown);$("#ski-resorts-p").removeClass("disabled");}else{skiResortsDropdown+='<li lang=""></li>';$("#ski-resorts-list").html(skiResortsDropdown);$("#ski-resorts-p").html("- select -");$("#ski-resorts-p").addClass("disabled");}try{FOX.site.channel.listDropdown.init("skiResorts");}catch(err){}},renderSkiCondResult:function(divClass,resortId){var ws=this;$.get(ws.SERVICE_URL_SKI_COND_JSON,{resortId:resortId},function(data){var skiCondJson=ws.createObjFromJSON(data),skiResultHtml=ws.generateSkiCondHtml(skiCondJson);$(divClass).html(skiResultHtml);});},generateSkiCondHtml:function(skiCondJson){var skiObj=skiCondJson.skiConditions,snowMin=skiObj.new_snow_min?skiObj.new_snow_min+" in":"N/A",surface=skiObj.surface_condition?skiObj.surface_condition:"N/A",lastSnowfall=skiObj.last_snow?skiObj.last_snow+"in":"N/A",prevSnowfall=skiObj.prev_snow?skiObj.prev_snow:"N/A",baseDepth="N/A";if(skiObj.base_min&&skiObj.base_max){baseDepth=skiObj.base_min+" of "+skiObj.base_max;}var skiHtml='<ul><li><p class="city-name">'+skiObj.resort_name+", "+skiObj.state+' Ski Report</p><div class="four-half"><table><tbody><tr><td class="first">Operating Status</td><td>'+skiObj.open_status+'</td></tr><tr class="even"><td class="first">Surface</td><td>'+surface+'</td></tr><tr><td class="first">Temperature</td><td>'+skiObj.temperature+' F</td></tr><tr class="even"><td class="first">New Snowfall</td><td>'+snowMin+'</td></tr><tr><td class="first">Last Snowfall</td><td>'+lastSnowfall+'</td></tr><tr class="even"><td class="first">Previous Snowfall</td><td>'+prevSnowfall+'</td></tr><tr><td class="first">Lifts Open</td><td>'+skiObj.lifts_open+" of "+skiObj.lifts_total+'</td></tr><tr class="even"><td class="first">Trails Open</td><td>'+skiObj.trails_open+" of "+skiObj.trails_total+'</td></tr><tr><td class="first">Grooming Trails</td><td>'+skiObj.groom_trails+" of "+skiObj.trails_total+'</td></tr><tr class="even"><td class="first">Base Depth</td><td>'+baseDepth+'</td></tr><tr><td class="first">Terrain</td><td>'+skiObj.terrain+'&#37;</td></tr><tr class="even"><td class="first">Snow Made</td><td>'+skiObj.snow_made+'&#37;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr class="even"><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div></li></ul>';return skiHtml;},addToFavorites:function(locId){if(this.weatherCookie("weatherfavlocs")){var favLocationArray=(this.weatherCookie("weatherfavlocs")).split("|");if(favLocationArray.length<5){var favIndex,saveFavorite=true;for(favIndex=0;favIndex<favLocationArray.length;favIndex++){if(favLocationArray[favIndex]===locId){alert("You have already saved this location to My Favorites.");saveFavorite=false;}}if(saveFavorite){favLocationArray.push(locId);this.createWeatherFavoritesCookie(favLocationArray);this.renderFavorites();}}else{alert("You have 5 saved locations in My Favorites. Please remove one from My Favorites to save this location.");}}else{var newFavCookieArray=new Array(locId);this.createWeatherFavoritesCookie(newFavCookieArray);this.renderFavorites();}},removeFavorite:function(locId){if(this.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=(this.weatherCookie("weatherfavlocs")).split("|");for(favIndex=0;favIndex<favLocationArray.length;favIndex++){if(favLocationArray[favIndex]===locId){favLocationArray.splice(favIndex,1);break;}}this.createWeatherFavoritesCookie(favLocationArray);}$("#li_"+locId).remove();},generateFavoritesHtml:function(weatherObj){var dataObj=weatherObj.weatherData,stateToDisplay=dataObj.stateShort;if(dataObj.locationId.substr(0,2)!=="US"){stateToDisplay=dataObj.country;}var favHtml='<li id="li_'+dataObj.locationId+'"><div class="weather-img"><a href="#" onclick="weather_service.gotoYourWeatherPage(\''+dataObj.locationId+"','"+dataObj.cityName+"','"+dataObj.stateShort+"','"+dataObj.country+'\');return false;"><img alt="Weather" src="'+weather_service.PATH_WEATHER_ICON_IMAGE+dataObj.days[0].image+weather_service.WEATHER_ICON_IMAGE_EXT+'"/></a></div><div class="city-container"><h3>'+unescape(dataObj.cityName)+", "+stateToDisplay+'</h3><div class="desc"><p>'+dataObj.forecast+'</p></div></div><div class="degrees"><p>'+dataObj.days[0].hi+'&deg;&nbsp;<span class="low">'+dataObj.days[0].lo+'&deg;</span></p><a class="close" href="#" onclick="weather_service.removeFavorite(\''+dataObj.locationId+"');return false;\"/></div></li>";return favHtml;},renderFavorites:function(){var ws=this,favoritesHtml="<ul>";if(ws.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=(ws.weatherCookie("weatherfavlocs")).split("|");favoritesHtml+='<li><ul class="favorites">';for(favIndex=0;favIndex<favLocationArray.length;favIndex++){var favDataObj,favLocationId=favLocationArray[favIndex],favDataCookie=this.getWeatherDataCookie(favLocationId);if(favDataCookie){favDataObj=ws.createObjFromJSON(favDataCookie);favoritesHtml+=ws.generateFavoritesHtml(favDataObj);}else{var callbackFn="location_renderfavorites_callback";ws[callbackFn]=function(data){if(data){ws.createWeatherDataCookie(favLocationId,data);favDataObj=ws.createObjFromJSON(data);favoritesHtml+=ws.generateFavoritesHtml(favDataObj);}};$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:({locationId:favLocationId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});}}favoritesHtml+="</ul></li><li>&nbsp;</li>";}favoritesHtml+=this.generateRightRailSearch("myfav")+"</ul>";var favoritesObj=$(".component, .c").find(" .weather.favorites");favoritesObj.html(favoritesHtml);$("ul.favorites li:last-child",favoritesObj).addClass("last");$("input[class*=weather_city_autocomplete_myfav]",favoritesObj).keyup(function(){ws.weatherCityAutoComplete(this);});},renderAirportSearch:function(){var airportHtml='<div class="weather airport-search"><h1><strong>Airport</strong> Delays</h1><ul><li><div><span class="text">'+this.TXT_AIRPORT_SEARCH_FIELD+'</span><form method="get" id="aiport_search" class="form_1" action="" onsubmit="return weather_service.airportSearchAction(this,\'#airportLocId\');"><fieldset class="text_box"><input type="text" id="airportCode" class="airport_input no_airport" size="50" value="" name="airportCode"/><input type="hidden" id="airportLocId" value="" name="locId"/><input type="submit" class="airport" value=""/></fieldset></form></div></li></ul></div>';document.write(airportHtml);},fetchAndSaveWeatherJSONCookie:function(locId,setAsCookie,callback){setAsCookie=(typeof setAsCookie==="boolean")?setAsCookie:true;var ws=this,callbackFn="location_weatherjsoncookie_callback";ws[callbackFn]=function(data){if(setAsCookie){ws.createWeatherDataCookie(locId,data);ws.renderWidget();}else{if(typeof callback==="function"){callback(data);}}};$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:({locationId:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});},fetchLocationJSON:function(locId,fn){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){ws.createWeatherLocationCookie(data);if(typeof fn==="function"){fn();}};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:({zipOrLocation:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});},fetchLocationRegionCode:function(locId,callback){var ws=this,regionCode="";$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_LOCATION_REGION_JSON,data:{locationId:locId,cb:cacheBuster()},success:function(data,textStatus){if(data){var regionJson=ws.createObjFromJSON(data);callback(regionJson.regionCode);}},error:function(XMLHttpRequest,textStatus,errorThrown){showToConsole(ws.MSG_DEFAULT_ERROR);}});return regionCode;},weatherCityAutoComplete:function(element){var ws=this;ws.currentCityString="";var ACElementId=$(element).attr("id"),preloaderObj=$(element).parent().find(".preloader-img:first"),inputValue=$.trim($(element).val());if(inputValue.length<1){return ;}var cssValue=$(element).attr("class"),prefix="weather_city_autocomplete_",tempIndex=cssValue.indexOf(prefix)+prefix.length,appendix=cssValue.substr(tempIndex);tempIndex=appendix.indexOf(" ");if(tempIndex>0){appendix=appendix.substr(0,tempIndex);}var initial=inputValue.charAt(0).toLowerCase();if(initial.match(/[a-z]/)===null){return ;}if(typeof ws.weatherCityData[initial]==="undefined"){if(typeof ClientStorageManager==="undefined"){triggerAjaxCall(false);}else{var restrict=["cookie","msiestorage"];if(restrict.join("|").indexOf(ClientStorageManager.type.toLowerCase())===-1){ClientStorageManager.getItem(prefix+initial,function(storageData){if(storageData){var cities=eval(storageData);ws.weatherCityData[initial]=cities;triggerAutoComplete(cities);}else{triggerAjaxCall(true);}});}else{triggerAjaxCall(false);}}}else{triggerAutoComplete(ws.weatherCityData[initial]);}function triggerAjaxCall(useCSM){if(typeof ws.ACListener[ACElementId]==="undefined"){ws.ACListener[ACElementId]={init:false,fchar:initial,ajaxReady:true};}if(!ws.ACListener[ACElementId].ajaxReady){return ;}ws.ACListener[ACElementId].ajaxReady=false;$(preloaderObj).show();$.ajax({type:"GET",url:ws.SERVICE_URL_CITY_DATA,data:({cityNameInitial:initial,cb:cacheBuster()}),dataType:"text",cache:true,success:function(data,textStatus){if(data){var cities=data.replace(/var cities\=/,"");if(useCSM){ClientStorageManager.saveItem({key:prefix+initial,value:cities,expire:7,success:function(returnObj){ws.weatherCityData[initial]=returnObj.value;},error:function(err){}});if(typeof ws.weatherCityData[initial]==="undefined"){ws.weatherCityData[initial]=cities;}triggerAutoComplete(ws.weatherCityData[initial]);}else{ws.weatherCityData[initial]=cities;triggerAutoComplete(ws.weatherCityData[initial]);}$(preloaderObj).fadeOut("slow");ws.ACListener[ACElementId].ajaxReady=true;}else{$(preloaderObj).hide();ws.ACListener[ACElementId].ajaxReady=true;showToConsole(ws.MSG_DEFAULT_ERROR);}},error:function(XMLHttpRequest,textStatus,errorThrown){$(preloaderObj).hide();ws.ACListener[ACElementId].ajaxReady=true;showToConsole(ws.MSG_DEFAULT_ERROR);}});}function triggerAutoComplete(cities){cities=eval(cities);if(typeof ws.ACListener[ACElementId]==="undefined"){ws.ACListener[ACElementId]={init:false,fchar:initial,ajaxReady:true};}else{if(ws.ACListener[ACElementId].fchar!==initial){ws.ACListener[ACElementId].init=false;}}if(!ws.ACListener[ACElementId].init){$(element).autocomplete(cities,{max:20,width:193,selectFirst:false,resultsClass:"ac_results ac_results_"+appendix,formatItem:function(item){return item.t;}}).result(function(event,item){ws.currentLocId=item.id;ws.currentCityString=item.t;});ws.ACListener[ACElementId].init=true;ws.ACListener[ACElementId].fchar=initial;}}},renderHeaderLocationChange:function(){var ws=this,htmlArr=[],formTimeout=false;htmlArr.push('<div id="weather_loc_change" style="display:none;"><form action="#" method="get"><fieldset><legend>Weather</legend>');htmlArr.push('<input id="weather_headInput" type="text" name="searchTerm" value="Enter city or zip" />&nbsp;<input type="submit" name="submit" class="btn-smll" value="Go" />');htmlArr.push("</fieldset></form></div>");var htmlElm=$(htmlArr.join(""));htmlElm.find("form").each(function(){var elm=$(this),search=elm.find("#weather_headInput");search.focus(function(){ws.searchFieldOnFocus(this);clearTimeout(formTimeout);}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val==="")?ws.TXT_HEADER_SEARCH_FIELD:val);formTimeout=setTimeout(function(){ws.changeHeaderLocation();},3000);});elm.submit(function(){clearTimeout(formTimeout);ws.locationSearchAction(elm,"#weather_headInput",ws.UPDATE_HEADER_ACTION);return false;});});$(".weather-search, #weather_corner").append(htmlElm);},changeHeaderLocation:function(){var info=$("#weather_cur_loc"),search=$("#weather_loc_change");if(info.is(":hidden")){search.css("display","none");info.css({opacity:"0",display:"inline"});animateFn.show(info,{speed:300,type:"swing"});}else{info.css("display","none");search.css({opacity:"0",display:"inline"});animateFn.show(search,{speed:300,type:"swing"});}},headerDisplayAction:function(locationId){var ws=this;var headerDataCookie=this.getWeatherDataCookie(locationId);if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie),wdObj=headerDataObj.weatherData,htmlArr=[],imgSrc=this.PATH_WEATHER_ICON_IMAGE+wdObj.days[0].image+this.WEATHER_ICON_IMAGE_EXT;htmlArr.push('<div id="weather_cur_loc"><p><a href="#">Forecast:</a> <span class="degree">'+wdObj.currentTemp+'&#176; <img src="http://www.foxnews.com/static/all/img/clear.gif" style="width:24px; height:24px;"/></span> ');htmlArr.push('<span class="location">'+wdObj.cityName+'</span> <a href="#">edit</a></p></div>');var htmlElm=$(htmlArr.join(""));htmlElm.find("span.degree img").each(function(){var elm=$(this);elm.css({opacity:"0",display:"inline"});if(wdObj.days[0].image.length===0){elm.css("display","none");}else{if(!$.browser.opera){var img=new Image();img.onload=function(){elm.attr("src",imgSrc);animateFn.show(elm,{speed:300,type:"swing"});};img.src=imgSrc;}else{elm.css({backgroundImage:"none",display:"inline",opacity:"0"});elm.attr({src:imgSrc});animateFn.show(elm,{speed:300,type:"linear"});}}});htmlElm.find("a").each(function(){var aTag=$(this);var text=aTag.text().toLowerCase();aTag.click(function(){if(text.indexOf("forecast")>-1){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);}if(text.indexOf("edit")>-1){ws.changeHeaderLocation();}return false;});});$(".weather-search, #weather_corner").html(htmlElm);}}};function ExternalServices(root){this.root=root;this._DataObj=false;this._ExtWidgets=[];}ExternalServices.prototype={reloadWidgets:function(){var x,widgets=this._ExtWidgets,len=widgets.length;for(x=0;x<len;x++){var fn=widgets[x];if(typeof fn==="function"){fn();}}},setWidget:function(fn,execute){var EX=this;if(typeof fn==="function"){EX._ExtWidgets.push(fn);if(execute){fn();}}},getCurrentWeatherData:function(){},createForm:function(formElm){if(!formElm){return false;}var EX=this,root=this.root;formElm.each(function(){var form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value");search.focus(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val===txt)?"":val);}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val==="")?txt:val);});form.submit(function(){root.locationSearchAction(this,"#weather_widgetInput",root.UPDATE_HEADER_ACTION);return false;});});}};function showToConsole(str){if(typeof (console)==="object"){console.log(str);}}function cacheBuster(freq){freq=freq||false;var date=new Date(),str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString();switch(freq){case"h":str+=(date.getHours()+1).toString();break;case"30m":str+=(date.getHours()+1).toString()+((date.getMinutes()%30===0)?"1":"0");break;default:str+=(date.getHours()+1).toString();}return str;}var weather_service=window.weather_service=new WeatherService("weather_service");var animateFn={isIE:function(){return $.browser.msie;},animate:function(elm,cfg){if(!this.isIE()){if(!cfg.speed){cfg.speed=300;}if(!cfg.type){cfg.type="swing";}elm.animate(cfg.css,cfg.speed,cfg.type,function(){if(cfg.callback){cfg.callback();}});}else{elm.css(cfg.css);elm.css("opacity","");if(cfg.callback){cfg.callback();}}},hide:function(elm,cfg){if(!elm){return false;}var i,cssObj={opacity:"0"};if(cfg.css){for(i in cfg.css){cssObj[i]=cfg.css[i];}}cfg.css=cssObj;this.animate(elm,cfg);},show:function(elm,cfg){if(!elm){return false;}var i,cssObj={opacity:"1"};if(cfg.css){for(i in cfg.css){cssObj[i]=cfg.css[i];}}cfg.css=cssObj;this.animate(elm,cfg);}};}(jQuery));(function($){var _cbStr=(typeof _cbVarStr!=="undefined")?_cbVarStr:"b1002";var CONST={thirdParty:{recaptcha:{url:"/ajax/authentication/recaptcha.jsp",elmId:"recaptcha_div",id:"6LcspgwAAAAAAPIfJ3yUt1aUl_Thr8TQfQmR1oRP",settings:{theme:"clean"}},disqus:{widget:"DQIntegrationService",cookie:{name:"p_DQS",expires:14},hash:{empty:"e30=",expires:60}},idms:{cookie:{name:"p_IDMS",expires:14},hash:{empty:"e30=",expires:"5"},callback:{login:"FOX_IDMS_auth_logged_in",logout:"FOX_IDMS_auth_logged_in"}},fm:{cookie:{name:"SABRE_ID",expires:14},hash:{empty:"e30=",expires:"5"},callback:{login:"FOX_FM_auth_logged_in",logout:"FOX_FM_auth_logged_in"}}}};var AuthService=window.AuthService=function(initVars){this.validationUrl="/authentication/registration/validate/";this.getRegistrationDataUrl="/authentication/registration/get";this.loginSubmitUrl="/authentication/login/submit";this.logoutSubmitUrl="/authentication/logout/submit";this.requestLogoutUrl="/authentication/logout/submit";this.refreshAuthUrl="/authentication/login/refresh?"+_cbStr+"=t";this.forgottenPasswordSubmitUrl="/authentication/forgotten_password/submit";this.registrationSubmitUrl="/authentication/registration/submit";this.ajaxRetrieveHtmlUrl="/ajax/authentication/includes.jsp";this.newsAlertSubscriptionUrl="/portal/newsalertsubscribe";this.defaultDomain="foxnews.com";var i;for(i in initVars){this[i]=initVars[i];}};AuthService.prototype={init:function(config){var i,as=this;for(i in config){this[i]=config[i];}if(window.FOX_isMnt&&FOX_isMnt()){$("#account, #authentication").hide();}this.thirdPartyAPI=new ThirdPartyAPI(this);},extend:function(obj){var i,self=this;for(i in obj){this[i]=obj[i];}},createObjFromJSON:function(jsonString){if(typeof jsonString==="string"){if(($.trim(jsonString)).length>0){return eval("("+unescape(jsonString).replace(/\s+/g," ")+")");}}return false;},isLoggedIn:function(){return($.cookie("p_UN")&&$.cookie("p_UN")!=="")?true:false;},isThirdParty:function(){return($.cookie("p_Thirdparty"))?true:false;},getDisplayName:function(){var as=this;function pipeCheck(str){var separator="|id:",idx=str.lastIndexOf(separator);if(idx<1){return str;}return str.substr(0,idx);}if(as.isLoggedIn()){var displayName=false;if(typeof $.cookie("p_DN")==="string"){var dn=$.cookie("p_DN");if(dn.length>0){dn=pipeCheck(dn);displayName=dn.replace(/\+/g," ").replace(/\"/g,"");}}return(displayName)?displayName:as.getUsername();}return"";},getUsername:function(){if(this.isLoggedIn()){return $.cookie("p_UN");}},getUserEmail:function(){return(this.isLoggedIn())?$.cookie("p_EM"):"";},getUserLocation:function(){return(this.isLoggedIn())?$.cookie("p_UL"):"";},getOverlayHtml:function(overlayView,origDomain,callbackFn){callbackFn=callbackFn||false;var as=this;if(!origDomain){origDomain=as.defaultDomain;}$.ajax({type:"GET",async:false,url:as.ajaxRetrieveHtmlUrl,data:({view:overlayView,authDomain:origDomain,cb:_cbStr}),success:function(data,textStatus){$("body").append(data);if(typeof callbackFn==="function"){callbackFn();}}});},closeOverlay:function(elementId){var as=this,elm=$("#"+elementId);elm.find("input[type*=text], input[type*=password]").val("");elm.find("input:checkbox:checked").attr("checked","");elm.find("input[type*=text]").removeClass("error");as.overlay.hide(elm);},providerOverlay:function(authDomain,callbackFn){var as=this;if(!as.isLoggedIn()){if($("#login-provider").size()===0){as.getOverlayHtml("login-provider",authDomain,callbackFn);}as.initProviderOverlay();as.overlay.show("#login-provider");$("#user-login-form-overlay").find("input[name*=username]").focus();return false;}return true;},initProviderOverlay:function(){var as=this;var login_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){elm.find(".error-box-login").html("User name and password are required.").show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.login(elm);return false;}};$("#user-login-form-overlay").validate(login_validation_options);$(".thirdparty a img").hover(function(){var thirdPartyTooltip=$(this).parent().parent().siblings(0);thirdPartyTooltip.find(".icon-desc-bg p").html($(this).attr("alt"));thirdPartyTooltip.addClass($(this).attr("name")).css("visibility","visible");},function(){var thirdPartyTooltip=$(this).parent().parent().siblings(0);thirdPartyTooltip.find(".icon-desc-bg p").html("");thirdPartyTooltip.removeClass($(this).attr("name")).css("visibility","hidden");});var reset_password_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){elm.find(".error-box-login").html("The email address you entered is invalid.").show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.forgotPassword(elm);return false;}};$("#reset-password .user-email-reset-form").validate(reset_password_validation_options);$("#forgot-password-overlay").unbind("click").click(function(){$("#reset-password.reset").toggle();});},registrationOverlay:function(authDomain,callbackFn){var as=this;if(!as.isLoggedIn()){if($("#registration-overlay").length===0){as.getOverlayHtml("registration-overlay",authDomain,callbackFn);}increaseRefresh();$("#reg_user_name").removeAttr("readonly");$("#reg_user_name").next(".validate").next(".validate").children(".sprites").show();as.initRegistrationOverlay();as.overlay.show("#registration-overlay");return false;}return true;},initRegistrationOverlay:function(){var as=this;var registration_validation_options={submitHandler:function(form){as.register($(form));return false;},errorElement:"p",errorPlacement:function(err,elm){var errMsg=err.text(),id=elm.attr("id");if(elm.data("_errMsg")===errMsg){return false;}elm.data("_errMsg",errMsg);var parent=elm.parent(),marker=parent.find("> .validate:first .sprites"),msgAlert=parent.find("> .error-tip p.err-msg"),errMsg=err.text(),reqTxt=parent.find("> .req-text");var css={valid:"check",invalid:"red-exclamation"};reqTxt.hide();var noMsg="reg_birth_year";var noMarker="reg_zip_code|reg_location";if(msgAlert.size()===0&&noMsg.indexOf(id)===-1){var validate=parent.find("> .validate:first");if(id==="agreement"){validate=elm;}msgAlert=$('<div class="error-tip"><span class="form-note"><p class="err-msg"></p></span></div>').insertAfter(validate);msgAlert=parent.find("> .error-tip p.err-msg");if(id==="agreement"){parent.find("> .error-tip").css({position:"absolute",width:"220px",right:"0",top:"0"});}}msgAlert.css("padding-top","0px");if(errMsg.length===0){if(noMarker.indexOf(id)===-1){marker.removeClass(css.invalid).addClass(css.valid);}msgAlert.html("&nbsp;");}else{if(noMarker.indexOf(id)===-1){marker.removeClass(css.valid).addClass(css.invalid);}msgAlert.html(errMsg);}if(marker.is(":hidden")&&noMarker.indexOf(id)===-1){marker.css("display","block");}},success:function(){},rules:{propID_username:{required:true,minlength:5,maxlength:15,validChars:true,remote:{url:as.validationUrl,type:"post"}},propID_email:{required:true,email:true,maxlength:250,strictEmail:true,remote:{url:as.validationUrl,type:"post"}},propID_pass1:{required:true,noSpaces:true,minlength:5,maxlength:12},propID_pass2:{required:true,noSpaces:true,minlength:5,maxlength:12,equalTo:"#reg_password"},propID_country:{required:true},propID_zip:{digits:true,maxlength:5,minlength:5,zipRequired:true,zipCheck:true,remote:{url:as.validationUrl,type:"post"}},propID_birthyear:{required:true,min:1900,isMaxYear:true},propID_terms:{required:true}},messages:{propID_username:{required:"Please enter a username",minlength:"Your username must consist of at least 5 characters",maxlength:"Your username is too long",validChars:"please supply valid characters only.",remote:"This username is already in use."},propID_email:{required:"Please enter an email address.",email:"Your email address must be valid.",maxlength:"Your email address is too long.",remote:"A user is already registered with this email."},propID_pass1:{required:"Please enter a password.",minlength:"Your password must be at least 5 characters.",maxlength:"Your password is too long."},propID_pass2:{required:"Please confirm your password.",equalTo:"Your passwords do not match."},propID_terms:{required:"In order to join Fox News community you must agree to our terms and conditions. Please review and check the box to join."},propID_country:{required:"Please select your country of residence."},propID_zip:{digits:"Please enter a valid zip code.",maxlength:"A valid zip code is five digits.",minlength:"A valid zip code is five digits.",required:"Please enter a zip code.",remote:"Please enter a valid United States zip code."},propID_birthyear:{required:"Please select your birth year."}}};as.instantiateValidators();$("#registration").validate(registration_validation_options);as.showRecaptcha();},initOpxLogin:function(){var as=this;var reset_password_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){var message="The email address you entered is invalid.";elm.find(".error-box-login").html(message).show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.forgotPassword(elm);return false;}};$("#reset-password .user-email-reset-form").validate(reset_password_validation_options);},initEditProfile:function(){var as=this;var edit_profile_validation_options={debug:false,submitHandler:function(form){if($("#reg_email").val()===""&&$("#reg_email2").val()===""){$("#reg_email").val($("#reg_curemail").val());$("#reg_email2").val($("#reg_curemail").val());}form.submit();return false;},errorElement:"p",errorPlacement:function(error,element){var elm=$(element),elem_pos=elm.position(),error_message=$(error[0]).html(),error_name=elm.attr("id").replace("reg","err");error_html=[];error_html.push('<div class="regoverlay_container error-tip" id="'+error_name+'">');error_html.push('<div class="overlaytip_top"></div><div class="form-note"><img src="/static/v/all/img/alert-yellow.gif" alt="" />');error_html.push('<p class="err-msg">'+error_message+'</p></div><div class="overlaytip_btm"></div></div>');error_html.join("");$("div.regoverlay_container.error-tip").hide();var errorElm=$("div#"+error_name);if(errorElm.size()>0){if(error_message!==""){errorElm.find("p.err-msg").html(error_message).show();}}else{elm.after(error_html);errorElm.hide();}errorElm.css({top:(elem_pos.top-80)+"px",left:(elem_pos.left+50)+"px"});errorElm.next(".validate > .sprites").removeClass("check").addClass("red-exclamation").show();},success:function(label){var errDiv=$("div#"+$(label).attr("htmlfor").replace("reg","err"));errDiv.hide();errDiv.next(".validate > .sprites").removeClass("red-exclamation").addClass("check");},rules:{propID_email:{required:false,email:true,maxlength:250,strictEmail:true},propID_email2:{equalTo:"#reg_email"},propID_pass1:{noSpaces:true,minlength:5,maxlength:12},propID_pass2:{noSpaces:true,minlength:5,maxlength:12,equalTo:"#reg_password"},propID_country:{required:true},propID_zip:{digits:true,maxlength:5,minlength:5,zipRequired:true,zipCheck:true},propID_gender:{required:true},propID_birthyear:{required:true,min:1900,isMaxYear:true}},messages:{propID_email:{required:"Please enter an email address.",email:"Your email address must be valid.",maxlength:"Your email address is too long.",remote:"A user is already registered with this email."},propID_email2:{required:"Please confirm your email address.",equalTo:"Please double check your email. They do not match."},propID_pass1:{required:"Please enter a password.",minlength:"Your password must be at least 5 characters.",maxlength:"Your password is too long."},propID_pass2:{required:"Please confirm your password.",equalTo:"Your passwords do not match."},propID_country:{required:"Please select your country of residence."},propID_zip:{digits:"Please enter a valid zip code.",maxlength:"A valid zip code is five digits.",minlength:"A valid zip code is five digits.",required:"Please enter a zip code."},propID_gender:{required:"Please submit your gender."},propID_birthyear:{required:"Please select your birth year."}}};as.instantiateValidators();$("#reg_profile").validate(edit_profile_validation_options);},forgotPasswordOverlay:function(obj){var as=this;if(!as.isLoggedIn()){if($("#forgot-password-overlay").size()===0){as.getOverlayHtml("forgot-password-overlay");}var offset=$(obj).offset();var leftPos=offset.left-$("#forgot-password-overlay").width();as.overlay.show("#forgot-password-overlay");return false;}return true;},login:function(formObj){formObj=$(formObj);var as=this,user=formObj.find("input[name*=username]").val(),pass=formObj.find("input[name*=password]").val(),rememberMe=(formObj.find("input[name*=rememberMe]:checked").size()>0)?true:false,numOfDays=(rememberMe)?365:0;$.ajax({type:"POST",url:as.loginSubmitUrl,data:({username:user,password:pass,authDomain:as.domain,rememberMe:rememberMe}),dataType:"text",success:function(data,textStatus){var loginResponse=as.createObjFromJSON(data);var messageArr=loginResponse.authentication.message.split(" ");if(!loginResponse){showToConsole("[authSrv.login] No data returned from request.",true);return false;}if(loginResponse.authentication.status==="ok"){if(typeof $.ad!="undefined"){$.ad.track({login:{userid:"fox login - id: "+as.getDisplayName()+" email:"+as.getUserEmail()}});}as.onSuccessLogin();as.thirdPartyAPI.disqus.login(loginResponse);as.thirdPartyAPI.idms.login(loginResponse);as.thirdPartyAPI.fileMobile.login(loginResponse);as.closeOverlay("login-provider");if(as.domain==="foxnews.com"&&window.location.pathname.indexOf("/community/user/")>-1){window.location.reload();}}else{formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".login-error").html("We are sorry, please try again.").show();}},error:function(XMLHttpRequest,textStatus,errorThrown){formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".login-error").html("We are sorry, please try again later.").show();}});},logout:function(origDomain){var as=this;origDomain=origDomain||as.defaultDomain;$.ajax({type:"POST",url:as.logoutSubmitUrl,data:({authDomain:origDomain}),success:function(data,textStatus){if(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.logout] No data returned from request.",true);return false;}if(authObj.authentication.status==="ok"){as.thirdPartyAPI.disqus.logout(authObj,function(){as.thirdPartyAPI.idms.logout(authObj,function(){as.thirdPartyAPI.fileMobile.logout(authObj,function(){if(window.location.pathname.indexOf("/community/user/profile")>-1){window.location.href="http://www.foxnews.com/index.html";}else{window.location.reload();}});});});}}},error:function(XMLHttpRequest,textStatus,errorThrown){}});},requestLogOut:function(config){config=config||{};var as=this;$.ajax({type:"GET",url:as.requestLogoutUrl,success:function(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.requestLoginInfo] No data returned from request.",true);return false;}if(typeof config.callback==="function"){config.callback(authObj);}}});},requestLoginInfo:function(config){config=config||{};var as=this;$.ajax({type:"POST",url:as.refreshAuthUrl,success:function(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.requestLoginInfo] No data returned from request.",true);return false;}if(typeof config.callback==="function"){config.callback(authObj);}}});},forgotPassword:function(formObj){formObj=$(formObj);var as=this,email=formObj.find("input[name*=emailResetField]").val();$.ajax({type:"POST",url:as.forgottenPasswordSubmitUrl,data:({email:email}),dataType:"text",success:function(data,textStatus){var forgotPasswordResponse=as.createObjFromJSON(data);if(!forgotPasswordResponse){showToConsole("[authSrv.forgotPassword] No data returned from request.",true);return false;}if(forgotPasswordResponse.authentication.status==="ok"){formObj.find(".error-box-login").hide();formObj.find(".reset-input-container").hide();formObj.find(".confirm-box-login").html("A reset link has been sent to the email provided.").show();}else{formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".error-box-login").html("The email address you entered is invalid").show();}},error:function(XMLHttpRequest,textStatus,errorThrown){formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".error-box-login").html("We're sorry your password cannot be reset at this time. Please try again later.").show();}});},register:function(formObj){var as=this,privacy=(formObj.find("#reg_location_confirm:checked").size()>0)?"hide":"",challenge=as.thirdPartyAPI.recaptcha.getChallenge(),response=as.thirdPartyAPI.recaptcha.getResponse();var slids=[];if(formObj.find("#fnbreaking:checked").size()>0){slids.push("C2F278094FACCEA62391025B7A52D8EB");}if(formObj.find("#fbbreaking:checked").size()>0){slids.push("5C84B893BD6D939E84FAE1A8E6E9525A");}if(slids.length>0){$.ajax({type:"GET",url:as.newsAlertSubscriptionUrl,data:({slids:slids.join(","),email:$("#reg_email").val()}),dataType:"text"});}$.ajax({type:"POST",url:as.registrationSubmitUrl,data:{authDomain:as.domain,realm:"realm1",username:formObj.find("#reg_user_name").val(),password:formObj.find("#reg_password").val(),email:formObj.find("#reg_email").val(),zip:formObj.find("#reg_zip_code").val(),country:formObj.find("#reg_country").val(),location_privacy:privacy,birth_year:formObj.find("#reg_birth_year").val(),recaptcha_challenge_field:challenge,recaptcha_response_field:response},dataType:"text",success:function(data,textStatus){var registrationResponse=as.createObjFromJSON(data);var message=registrationResponse.authentication.message;if(message.indexOf("successful registration")>-1&&typeof $.ad!=="undefined"){$.ad.track({registration:{userid:"fox registration - id:"+as.getDisplayName()+" - email:"+as.getUserEmail()}});}if(!registrationResponse){showToConsole("[authSrv.register] No data returned from request.",true);return false;}if(registrationResponse.authentication.status==="ok"){$("#registration-error").hide();$("#registration-overlay").hide();as.getOverlayHtml("registration-thankyou-overlay");decreaseRefresh();authentication_service.onSuccessLogin();as.thirdPartyAPI.disqus.login(registrationResponse);as.thirdPartyAPI.idms.login(registrationResponse);as.thirdPartyAPI.fileMobile.login(registrationResponse);as.overlay.show("#registration-thankyou-overlay");$.scrollTo("#registration-thankyou-overlay");$("#clickToClose").focus();}else{var errorMsg=registrationResponse.authentication.message;as.showRecaptcha();$("#registration-error").html("We are sorry, we could not complete your registration. Please fix the error and try again. <br/> *"+errorMsg).show();$.scrollTo("#registration-error");}},error:function(XMLHttpRequest,message,errorThrown){as.showRecaptcha();$("#registration-error").html("We are sorry, we could not complete your registration. Please try again. <br> *"+message).show();$.scrollTo("#registration-error");}});},overlay:{init:function(action,target){target=$((target||"#registration-overlay"));var as=this;$(action).each(function(){$(action).unbind("click").click(function(){as.show(target);});});},show:function(target){target=$(target);var as=this;if(typeof increaseRefresh!=="undefined"){increaseRefresh();}target.find(".validate a.sprites").unbind("click");if($(".overlay-layer").size()===0){$("body").prepend('<div class="overlay-layer"></div>');}$(".overlay-layer").show();target.each(function(){var elm=$(this);elm.show().fixedBox();if($(window).height()<elm.height()){var scrollTop=$(document).scrollTop();var overlayTop=(target.css("top")).replace(/[a-z]/g,"");var abs=Math.abs(overlayTop)+scrollTop;elm.css({top:abs+"px",position:"absolute"});}elm.find(".field input").removeClass("error").attr("value","");elm.find(".validate a.sprites,.error-tip").hide();var usr=elm.find("#reg_user_name"),usrParent=usr.parent(),pwd=elm.find("#reg_password"),pwdParent=pwd.parent();if(usrParent.find("span.req-text").size()===0){usr.after('<span class="req-text req-user">5-15 characters, cannot be changed</span>');usrParent.focus(function(){elm.find(".req-user").remove();});}if(pwdParent.find("span.req-text").size()===0){pwd.after('<span class="req-text req-password">5-12 characters, no space, case-insensitive</span>');pwdParent.focus(function(){elm.find(".req-password").remove();});}});var close=target.find(".close").parent(),signUpReg=$(".sign_up_registration");close.unbind("click").removeAttr("onclick").click(function(){as.hide(target);return false;});target.find(".buttons input[type='reset']").click(function(){as.hide(target);return false;});signUpReg.click(function(){$(".overlay-layer").show();});},hide:function(target){if(typeof decreaseRefresh!=="undefined"){decreaseRefresh();}$(".overlay-layer").hide();$(target).hide();}},instantiateValidators:function(){var as=this;$.validator.addMethod("validChars",function(value){var i,result=true,iChars="!@#$%^&*()+=-[]\\';,./{}|\":<>?";for(i=0;i<value.length;i++){if(iChars.indexOf(value.charAt(i))!==-1){return false;}}return result;},"Please supply valid characters only.");$.validator.addMethod("strictEmail",function(value){return(value.match(/^([a-zA-Z0-9_.\-\+])+@([a-zA-Z0-9_.\-])+\.([a-zA-Z])+([a-zA-Z])+/)!==null)||(value==="");},"Please supply valid email characters only.");$.validator.addMethod("noSpaces",function(value){var result=true,strArr=[];if(typeof value==="string"&&value.split(" ").length>1){return false;}return result;},"Please remove the blank spaces.");$.validator.addMethod("validCharsName",function(value){var i,resultName=true,iChars='!@#$%^&*()\\+=[];,./{}|":<>?',iCharshp="-",iCharsap="'",counterhp=0,counterap=0;for(i=0;i<value.length;i++){if(iChars.indexOf(value.charAt(i))!==-1){return false;}if(iCharshp.indexOf(value.charAt(i))!==-1){counterhp=counterhp+1;}if(iCharsap.indexOf(value.charAt(i))!==-1){counterap=counterap+1;}}if(counterhp>1){return false;}if(counterap>1){return false;}return resultName;},"Please supply valid characters only.");$.validator.addMethod("isMaxYear",function(value){var result=true,d=new Date(),curr_year=d.getFullYear();if($("#reg_birth_year").val()>(curr_year-13)){return false;}return result;},"You must be at least 13 years old to register for this site.");$.validator.addMethod("zipRequired",function(value){var result=true;country=$("#reg_country").val();if(country==="United States"&&value===""){return false;}return result;},"Zip Code is required.");$.validator.addMethod("zipCheck",function(value){var result=true,regLocation=$("#reg_location");if($("#reg_country").val()==="United States"){regLocation.show();$.ajax({type:"GET",url:as.getRegistrationDataUrl,async:false,data:({zip:$("#reg_zip_code").val()}),dataType:"text",success:function(data,textStatus){if(data){var stateObj=as.createObjFromJSON(data);if(!stateObj){showToConsole("[authSrv.validator] No data returned from request.",true);return false;}var state=stateObj.state_for_zip;regLocation.val((state!=="")?state:"");result=false;}else{regLocation.val("");result=false;}},error:function(XMLHttpRequest,textStatus,errorThrown){regLocation.val("");}});result=(regLocation.val()!=="")?true:false;}else{regLocation.hide();}return result;},"Please enter a valid United States zip code.");},showRecaptcha:function(){var as=this;as.thirdPartyAPI.recaptcha.create();}};var ThirdPartyAPI=(function(){API=function(root){this.root=root;this.recaptcha=new RecaptchaAPI(this);this.disqus=new Disqus(this);this.idms=new IDMS(this);this.fileMobile=new FileMobile(this);};var RecaptchaAPI=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.recaptcha;};RecaptchaAPI.prototype={set:function(fn){var self=this,root=this.root,cfg=this._config;if(typeof Recaptcha!=="undefined"){if(typeof fn==="function"){fn();}}else{window.Recaptcha_Create_Instance=function(){$.loadAttempt(30,500,function(){return(typeof Recaptcha!=="undefined")?true:false;},function(){if(typeof fn==="function"){fn();}});};(function(){var e=document.createElement("script");e.src=cfg.url;e.type="text/javascript";e.async=true;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e);}());}},create:function(){var self=this,cfg=this._config,recaptcha_id=cfg.id,divId=cfg.elmId,settings=cfg.settings;self.set(function(){Recaptcha.create(recaptcha_id,divId,settings);});},getChallenge:function(){if(typeof Recaptcha!=="undefined"){return Recaptcha.get_challenge();}return false;},getResponse:function(){if(typeof Recaptcha!=="undefined"){return Recaptcha.get_response();}return false;}};var Disqus=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.disqus;this.set();};Disqus.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;if(cookieVal){unescape(cookieVal);}var trigger=function(){var data={dqs:cookieVal};root.requestLoginInfo({data:data,callback:function(obj){if(!obj){log("[api.disqus] Refresh service returned no hash value.");return false;}try{var hash=obj.authentication.dqs;self.cookie("set",hash);if(typeof fn==="function"){fn(hash);log("[api.disqus] Hash Refresh Initiated");}}catch(err){log("[api.disqus] Refresh service: "+err);}}});};var loggedOutCookie=function(){root.requestLogOut({callback:function(obj){if(!obj){log("[api.disqus] logout hash service returned no value.");return false;}try{var hash=obj.authentication.dqs;self.cookie("set",hash);fn(hash);}catch(err){log("[api.disqus] Refresh service: "+err);return false;}}});};var hasExpired=function(hasExpiredFn){var cDate=new Date();var curr={time:cDate,epoch:Math.round(cDate.getTime()/1000),expire:new Date(cDate.getTime()+(cfg.hash.expires*60*1000))};curr.expireEpoch=Math.round(curr.expire/1000);var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0],timestamp=arr[2];if(typeof timestamp==="undefined"){return getLoggedOut();}if(isNaN(timestamp)){return getLoggedOut();}if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}timestamp=parseInt(timestamp,10);var tDate=new Date(timestamp*1000);var ts={time:new Date(tDate),epoch:timestamp,expire:new Date(tDate.getTime()+(cfg.hash.expires*60*1000))};ts.expireEpoch=Math.round(ts.expire/1000);if(curr.epoch>=ts.expireEpoch){if(arr[0]!==cfg.hash.empty){return"yes";}}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;case"yes":log("[api.disqus] Hash Expired");trigger();break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var message=data.authentication.message;if(message.indexOf("|")>-1&&typeof $.ad!=="undefined"){regExpId=/([\w]+)[=]([\w,\s]+)$/;var idArr=message.match(regExpId);$.ad.track({login:{userid:"third party login - id:"+idArr[2].replace(/\s/,"")+", service:"+idArr[1]+".com"}});}var self=this;if(data.authentication.dqs){log("[api.disqus] Logging In");self.cookie("set",data.authentication.dqs);self.integrate({token:data.authentication.dqs,usr:self.cookie("get","p_UN")});}if(typeof fn==="function"){fn();}},logout:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.dqs){log("[api.disqus] Logging Out");self.cookie("set",data.authentication.dqs);self.integrate({token:data.authentication.dqs,usr:self.cookie("get","p_UN")});}if(typeof fn==="function"){fn();}},integrate:function(config){config=config||{};var cfg=this._config;var trigger=function(){$.loadAttempt(50,500,function(){return((window.fox&&fox.widgets&&typeof fox.widgets[cfg.widget]==="function")||(typeof window["FOX_"+cfg.widget]==="function"))?true:false;},function(){if(window.fox&&fox.widgets&&typeof fox.widgets[cfg.widget]==="function"){log("[api.disqus] Integrating ");fox.widgets[cfg.widget](config);}else{if(typeof window["FOX_"+cfg.widget]==="function"){log("[api.disqus] Integrating ");window["FOX_"+cfg.widget](config);}}});};$(document).ready(function(){trigger();});},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host="*."+root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",host:host,expires:exp,domain:root.domain};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":$.cookie(cName,null);break;case"get":cName=(data)?data:cName;return($.cookie(cName))?$.cookie(cName):false;}}};var IDMS=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.idms;this.set();};IDMS.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},integrate:function(config){config=config||{};var cfg=this._config,fnName=cfg.callback.login;if(typeof window[fnName]==="function"){window[fnName](config);}},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;var loggedOutCookie=function(){self.cookie("remove");fn(false);};var hasExpired=function(hasExpiredFn){var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0];if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.idms){log("[api.idms] Logging In");self.cookie("set",data.authentication.idms);self.integrate({token:data.authentication.idms,usr:self.cookie("get","p_UN")});}else{log("[api.idms] No IDMS authentication found.");}if(typeof fn==="function"){fn();}},logout:function(data,fn){var self=this,cfg=this._config,fnName=cfg.callback.logout;self.cookie("remove-full");if(typeof window[fnName]==="function"){window[fnName](cfg);}if(typeof fn==="function"){fn();}},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host=root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",expires:exp,domain:host};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":options={path:"/",domain:host};$.cookie(cName,null,options);break;case"remove-full":options={path:"/",domain:host};$.cookie(cName,null,options);$.cookie(cName,"BLAH");$.cookie(cName,null);break;case"get":cName=(data)?data:cName;var val=($.cookie(cName))?$.cookie(cName):false;return val;}}};var FileMobile=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.fm;this.set();};FileMobile.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},integrate:function(config){config=config||{};var cfg=this._config,fnName=cfg.callback.login;if(typeof window[fnName]==="function"){window[fnName](config);}},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;var loggedOutCookie=function(){self.cookie("remove");fn(false);};var hasExpired=function(hasExpiredFn){var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0];if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.fm){log("[api.idms] Logging In");self.cookie("set",data.authentication.fm);self.integrate({token:data.authentication.fm,usr:self.cookie("get","p_UN")});}else{log("[api.idms] No IDMS authentication found.");}if(typeof fn==="function"){fn();}},logout:function(data,fn){var self=this,cfg=this._config,fnName=cfg.callback.logout;self.cookie("remove-full");if(typeof window[fnName]==="function"){window[fnName](cfg);}if(typeof fn==="function"){fn();}},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host=root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",expires:exp,domain:host};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":options={path:"/",domain:host};$.cookie(cName,null,options);break;case"remove-full":options={path:"/",domain:host};$.cookie(cName,null,options);$.cookie(cName,"BLAH");$.cookie(cName,null);break;case"get":cName=(data)?data:cName;var val=($.cookie(cName))?$.cookie(cName):false;return val;}}};return API;}());var disablezip=window.disablezip=function(value){var zip=$("#reg_zip_code"),loc=$("#reg_location");if(value==="United States"){zip.removeAttr("readonly").css("background","#fff");zip.next(".validate").children(".sprites").hide();loc.val("");}else{zip.attr("readonly",true).css("background","#ddd").val("");loc.val(value);}};var formatField=window.formatField=function(id,value){var elm=$("#"+id);switch(id){case"reg_first_name":elm.val(value.join(""));break;case"reg_last_name":elm.val(value.join(""));break;default:elm.val(value.toLowerCase().replace(/\s+/gi,""));}};var formatTrim=window.formatTrim=function(id,value){$("#"+id).val(value.replace(/\s+/gi,""));};var isNumberKey=window.isNumberKey=function(evt){var charCode=(evt.which)?evt.which:evt.keyCode;return(charCode>31&&(charCode<48||charCode>57))?false:true;};var increaseRefresh=window.increaseRefresh=function(){if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}else{$("meta[name='refresh'],meta[http-equiv='refresh']").each(function(){var item=$(this),refresh=item.attr("content"),orig=(typeof item.attr("content")!=="undefined")?refresh:false;item.data("RefreshOrig",orig);item.attr("content","7200");});}};var decreaseRefresh=window.decreaseRefresh=function(){if(typeof ew_disableRefresh==="function"){ew_enableRefresh();}else{$("meta[name='refresh'],meta[http-equiv='refresh']").each(function(){var item=$(this),orig=item.data("RefreshOrig");if(orig){item.attr("content",orig);}});}};var showToConsole=function(str,force){force=force||false;var search=(window.location.search).substr(1);if(search.length>0){var x,pairs=search.split("&"),valuePair={};for(x=0;x<pairs.length;x++){var split=pairs[x].split("=");valuePair[split[0]]=split[1];}if(valuePair.stc==="y"||force){if(typeof window.console==="object"){console.log(str);}}}};var log=showToConsole;(function(){function d(c){return typeof c==="function"?!0:!1;}var f=function(){var c,b=arguments;if(b.length===0){return !1;}var a={attempt:0,timeout:500};if(b.length===1&&typeof b[0]==="object"){for(c in b[0]){a[c]=b[0][c];}if(a.callback){c=a.callback;}else{return !1;}if(!c.check||!c.success){return !1;}else{a._check=c.check,a._success=c.success;}if(c.timedOut){a._timeout=c.timedOut;}}else{if(!isNaN(b[0])&&!isNaN(b[1])&&d(b[2])&&d(b[3])){a.attempt=b[0];a.timeout=b[1];a._check=b[2];a._success=b[3];if(b[4]){a._timeout=b[4];}if(b[5]){a._abort=b[5];}}else{if(d(b[0])&&d(b[1])){a._check=b[0];a._success=b[1];if(b[2]){a._timeout=b[2];}if(b[3]){a._abort=b[3];}}else{return !1;}}}if(!d(a._check)||!d(a._success)){return !1;}if(!d(a._timeout)){a._timeout=function(){};}if(isNaN(a.timeout)){return !1;}else{a.timeout=parseInt(a.timeout,10);}if(isNaN(a.attempt)){return !1;}else{a.attempt=parseInt(a.attempt,10);}var e=!1,g=!1;if(a.attempt&&a.timeout){var f=function(){g?clearTimeout(e):a._check()?(a._success(),clearTimeout(e)):a.attempt>0?e=setTimeout(function(){f();},a.timeout):a._timeout();a.attempt--;};f();}else{e=setInterval(function(){g?clearInterval(e):a._check()&&(a._success(),clearInterval(e));},a.timeout);}return{abort:function(){g=!0;}};};if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:f});}else{if(!window.loadAttempt){window.loadAttempt=f;}}})();}(jQuery));(function(I){var P=(typeof _cbVarStr!=="undefined")?_cbVarStr:"b1020";(function(){var R=function(V){V=V||false;var S=new Date(),W=S.getFullYear().toString()+(S.getMonth()+1).toString()+S.getDate().toString(),U=S.getHours()+1,T=S.getMinutes();W+=U.toString()+((V&&!isNaN(V))?(Math.floor(T/parseInt(V,10))).toString():"");return W;};document.write('<script type="text/javascript" src="http://global.fncstatic.com/static/v/all/js/geo.js?cb='+R(1)+'"><\/script>');}());var M=(function(){var S="fn",U=window.location,T=U.host||U.hostname;var R=function(V){return(T.indexOf(V)>-1)?true:false;};if(R("foxnews.com")){if(R("latino.foxnews.com")){S="fn-latino";}else{S="fn";}}else{if(R("foxbusiness.com")){if(R("smallbusiness.foxbusiness.com")){S="sbc";}else{S="fb";}}}return S;}());var Q={feed:{whatsHotLive:{feedFunction:"FeedSource_WhatsHotWatchLive",url:"http://www.foxnews.com/js/whatshot.js",rotate:3,show:{hot:false,live:2},fade:{use:true,delay:900}},onAir:{feedFunction:"FeedSource_FNCTV",url:"http://www.foxnews.com/js/onair.js",descCharLimit:35,imageDomainLoc:""},onAirCarousel:{feedFunction:"FOX_FN_OnAir_Data",url:"http://global.fncstatic.com/static/managed/json/onair-feed-data.js"}},onAir:{hideDelay:200},authentication:{use:"render",domain:"foxnews.com",check:"/authentication/registration/validate/"}};var J=function(){this.headObj={};};J.prototype={init:function(S){var R=this;if(I("body").data("HasHeaderInit")){return false;}I("body").data("HasHeaderInit",true);var T;for(T in S){if(S.hasOwnProperty(T)){this["_"+T]=S[T];}}this.setHolders();this.authentication=new H(this);this.feeds=new O(this);this.onAir=new A(this);switch(M){case"fn":R.whatsHot=new F(this);break;case"fb":R.whatsHot=new E(this);break;}this.searchAutocomplete=new L(this);},setHolders:function(){this.headObj={headlines:I("#headlines-primary"),primaryNav:I("#nav-primary"),onAir:I("#section-head .slide.slide-1"),authentication:I("#account")};this.setListeners();},setListeners:function(){var R=function(X){var V=false,U=X.split("/")[2]||false,W=window.location.hostname||window.location.host;if(U&&U.length>1){U=U.replace("www.","");if(W.indexOf(U)>-1){V=true;}}return V;};var S=I("#util dl dd");var T=function(){S.find("> a").removeClass("active");};S.each(function(){var W=I(this),U=W.find("> a"),V=U.attr("href");if(R(V)){T();U.addClass("active");}});}};var H=(function(){var R=function(S){this.root=S;this.set();};R.prototype={set:function(){var U=this,T=this.root;if(T.headObj.authentication.size()===0){return false;}function S(){var Z=document.location.hostname,Y=Z.split("."),W=Y.length,X=Y[W-2]+"."+Y[W-1];Q.authentication.domain=X;}function V(){S();if(typeof U[Q.authentication.use]==="function"){U[Q.authentication.use]();}else{U.render();}}if(typeof AuthService!=="undefined"){V();}else{I(document).ready(function(){if(typeof AuthService!=="undefined"){V();}else{G("[head.authentication] Authentication Service not found.");}});}this.setHolders();},setHolders:function(){var S=this.root.helper.getQueryStr("usr");if(S){I(".login-fields > .field > input[name='userName']").attr("value",S);}},render:function(){var X=this.root,V=X.headObj.authentication,U=(V.hasClass("alt-style"))?true:false,Z=false,T=false;if(!U){Z=V.find(".user-options > p:first");T=V.find("> .username > .encapsulate");var S=V.find("> .username"),a=I("body");T.hover(function(){I(this).addClass("hover");},function(){I(this).removeClass("hover");});T.click(function(){if(V.hasClass("active")){V.addClass("inactive").removeClass("active");}else{V.addClass("active").removeClass("inactive");}});S.hover(function(){window.FXAuthClickIsOver=true;},function(){if(window.FXAuthClickIsOver){window.FXAuthClickIsOver=false;}});if(!a.data("FXAuthClick")){a.data("FXAuthClick",true);a.mousedown(function(){if(!window.FXAuthClickIsOver&&V.hasClass("active")){V.removeClass("active").addClass("inactive");}});}}else{V=I("#authentication").parent();Z=V.find(".username");}function W(d){d=d||"Profile";var b="",c="";if(Q.authentication.domain!=="foxnews.com"){b=' target="_blank"';if(typeof I.cookie!=="undefined"&&I.cookie("p_DN")){c="?usr="+I.cookie("p_DN");}}return"<a"+b+' href="http://www.foxnews.com/community/user/profile'+c+'">'+d+"</a>";}var Y=window.authentication_service=new AuthService({domain:Q.authentication.domain});Y.extend({createLoginLogout:function(f){var c=this,e=[],d=V.find("#authentication");if(c.isLoggedIn()){if(U){d=d.children(":first");d.each(function(){if(!c.isThirdParty()){I(this).html(W());}else{I(this).css({display:"none"});}});d.next().each(function(){var g=I('<a href="#">Log Out</a>');g.click(function(){try{c.logout(c.domain);}catch(h){G("[head.authentication] Logout - An error occured: "+h);}return false;});I(this).html(g);});Z.html('<img src="http://global.fncstatic.com/static/v/all/img/head/profile.png" alt="" /> Welcome, <strong>'+c.getDisplayName()+"</strong>");Z.css({display:"inline"});}else{d=V.find(".user-options > ul").children(":first");d.each(function(){if(!c.isThirdParty()){I(this).html(W(I(this).text()));}else{d.css({display:"none"});}});d.next().find("a").click(function(){try{c.logout(c.domain);}catch(g){G("[head.authentication] Logout - An error occured: "+g);}return false;});V.addClass("inactive");var b=(function(){var i=c.getDisplayName(),h=i,j="",g="<span${title}>${name}</span>";if(i.length>13){h=i.slice(0,13)+"...";j=' title="'+i+'"';}return g.replace("${title}",j).replace("${name}",h);}());Z.html("You're logged in as "+b);}}else{d.children().find("a").each(function(){var g=I(this),h=g.text().toLowerCase();if(h.indexOf("register")>-1){g.click(function(){try{c.registrationOverlay(c.domain);if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}}catch(i){G("[head.authentication] Register - An error occured: "+i);}return false;});}else{if(h.indexOf("login")>-1){g.click(function(){try{c.providerOverlay(c.domain);if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}}catch(i){G("[head.authentication] Login - An error occured: "+i);}return false;});}}});if(U){d.css({display:"inline"});}else{Z.html("Please login.");}}},onSuccessLogin:function(){var b=this;b.createLoginLogout();b.closeOverlay("login-provider");},callback:function(b){var c=this,d=c.createObjFromJSON(b);if(d.authentication.status==="ok"){if(c.thirdPartyAPI){c.thirdPartyAPI.disqus.login(d,function(){c.thirdPartyAPI.idms.login(d,function(){c.thirdPartyAPI.fileMobile.login(d,function(){window.FOX_TP_Reload=setTimeout(function(){window.location.reload();},1000);});});});}}c.closeOverlay("login-provider");}});Y.init();Y.createLoginLogout();}};return R;}());var A=(function(){var R=function(S){this.root=S;this.set();};R.prototype={set:function(){var T=this,S=this.root;if(S.headObj.onAir.size()===0){return false;}window[Q.feed.onAir.feedFunction]=function(U){T.renderOnAirNow(U);};window[Q.feed.onAirCarousel.feedFunction]=function(U){T.renderOnAirCarousel(U,function(){T.carousel();T.setCarouselListeners();});};S.feeds.onAir();S.feeds.onAirCarousel();},renderOnAirNow:function(n){var b=this,j=this.root,Y=n.schedules.today,V=n.schedules.tomorrow,c=I("#show-data"),k=c.children("ul:first");if(c.size()===0){return false;}function g(o){o=I.trim(o);return(o.split(":"))[0]+o.charAt(o.length-2)+"<span>et</span>";}function e(p){var o=Q.feed.onAir.descCharLimit;return(p.length>o)?p.substring(0,o)+"...":p;}function T(r,v){v=v||false;var p,o=[],q=(v)?r:r+1,t=I("#section-head").hasClass("header-update");var s=function(w){if(t){o.push("<li"+((p===0)?' class="first"':"")+">");o.push('<p class="media"><a href="'+w.link+'"><img src="'+Q.feed.onAir.imageDomainLoc+w.img+'" alt="" /></a></p>');o.push('<p class="time">'+g(w.time)+"</p>");o.push('<div class="info">');o.push('<p class="summary"><a href="'+w.link+'" title="'+w.dek+'">'+w.title+"</a></p>");o.push('<p class="relation">'+e(w.dek)+"</p>");o.push("</li>");}else{o.push("<li"+((p===0)?' class="first"':"")+">");o.push('<p class="media"><a href="'+w.link+'"><img src="'+Q.feed.onAir.imageDomainLoc+w.img+'" alt="" /></a></p>');o.push('<div class="info">');o.push('<p class="relation">'+w.title+"</p>");o.push('<p class="summary"><a href="'+w.link+'" title="'+w.dek+'">'+e(w.dek)+"</a></p></div>");o.push('<p class="time">'+g(w.time)+"</p></li>");}};for(p=r;p<=q;p++){var u=Y[p];s(u);}if(v&&V[0]){s(V[0]);}k.html(o.join(""));}var f,i=new Date(n.now.date+" "+n.now.time),d=parseInt(i.getHours()+""+((i.getMinutes()<10)?"0"+i.getMinutes():i.getMinutes()),10);for(f=0;f<Y.length;f++){var l=Y[f],h=(Y[f+1])?Y[f+1]:false;try{var W=I.trim(l.time).toLowerCase();W=(W.charAt(W.indexOf("m")-2)!==" ")?W.replace("pm"," pm").replace("am"," am"):W;var Z=new Date(n.now.date+" "+W),m=parseInt(Z.getHours()+""+((Z.getMinutes()<10)?"0"+Z.getMinutes():Z.getMinutes()),10);if(h){var X=I.trim(h.time).toLowerCase();X=(X.charAt(X.indexOf("m")-2)!==" ")?X.replace("pm"," pm").replace("am"," am"):X;var U=new Date(n.now.date+" "+X),S=parseInt(U.getHours()+""+((U.getMinutes()<10)?"0"+U.getMinutes():U.getMinutes()),10);if(d>=m&&d<S){T(f);break;}}else{T(f,true);break;}}catch(a){G("[head.onAir] Error: "+a);}}},renderOnAirCarousel:function(X,W){var T=this,S=this.root,U=X;var V=function(){var f=S.headObj.onAir.find("> .content > .slideshow");var b=[],a=U.length;for(var Z=0;Z<a;Z++){var e=U[Z],Y=(Z===0)?true:false,d=(Z+1===a)?true:false,c=(Y)?" section-first":(d)?" section-last":"";b.push('<li class="section'+c+'">');b.push('<p class="media"><a href="'+e.link+'"><img alt="'+e.title+'" pre-src="'+e.img+'" src="http://global.fncstatic.com/static/v/all/img/clear.gif"></a></p>');b.push('<h3><a href="'+e.link+'">'+e.title+"</a></h3>");b.push('<p class="time"><span>'+e.day+"</span> "+e.time+"</p></li>");}f.html("<ul>"+b.join("")+"</ul>");};V();if(typeof W==="function"){W();}},carousel:function(){var T=this.root,U=T.headObj.onAir.children(".content");var S={elm:U,slide:"horizontal",scroll:5,speed:1200,show:5,rotate:false};function V(Y){var W,X=[];for(W=1;W<=Y.batch.max;W++){X.push('<li><a href="#">&nbsp;</a></li>');}return X.join("");}S.elm.each(function(Y){var X=0,a=I(this);if(a.data("carousel_initialized")){return false;}var Z=a.find("ol");var b={prev:a.find(".prev"),next:a.find(".next"),first:a.find(".first-page"),last:a.find(".last-page")};var W={auto:{set:false,speed:3000},slide:S.slide,scroll:S.scroll,show:S.show,speed:S.speed,rotate:S.rotate,eventCallback:function(c){if(c.event==="init"){X=c.batch.max;Z.html(V(c));Z.children(":first").addClass("active");a.data("carousel_initialized",true);}else{Z.children().each(function(d){I(this).toggleClass("active",function(){return(d+1===c.batch.current)?true:false;});});}if(c.batch.current===1){b.prev.addClass("inactive-prev");b.first.addClass("inactive-first");}else{b.prev.removeClass("inactive-prev");b.first.removeClass("inactive-first");}if(c.batch.current===c.batch.max){b.next.addClass("inactive-next");b.last.addClass("inactive-last");}else{b.next.removeClass("inactive-next");b.last.removeClass("inactive-last");}},controlsCallback:function(c){Z.children().find("a").each(function(d){I(this).click(function(){c.stopAutoScroll();c.scrollToBatch(d+1);return false;});});b.first.click(function(){c.stopAutoScroll();c.scrollToItem(1);return false;});b.prev.click(function(){c.stopAutoScroll();c.slide("prev");return false;});b.next.click(function(){c.stopAutoScroll();c.slide("next");return false;});b.last.click(function(){c.stopAutoScroll();c.scrollToItem(X);return false;});}};if(typeof I.fn.jfoxCarousel!=="undefined"){a.jfoxCarousel(W);}else{I(document).ready(function(){a.jfoxCarousel(W);});}});},setCarouselListeners:function(){var Z=this.root,T=Z.headObj.primaryNav,S=T.children("ul:first").children("li.on-air"),V=Z.headObj.onAir,b=V.css("height").replace("px",""),U=Q.onAir.hideDelay;var Y={close:S.find("img").filter(function(){return(I(this).attr("src").indexOf("close.png")>-1)?true:false;}),open:S.find("img").filter(function(){return(I(this).attr("src").indexOf("plus.png")>-1)?true:false;})};function X(){var c=V.find(".slideshow > ul > li");c.each(function(){var e=I(this),g=e.find("> .media img"),f=g.attr("pre-src"),d=new Image();if(f&&!g.data("preloaded")){d.onload=function(){g.attr("src",f);};d.src=f;g.data("preloaded",true);}});}function W(){V.data("isRendering",true);V.data("hidden",true);V.animate({height:"0px",opacity:"0"},U,"swing",function(){V.css({display:"none"}).data("isRendering",false);});Y.close.hide();Y.open.show();S.removeClass("active");}function a(){if(!V.data("initToFirst")){V.data("initToFirst",true);V.find("p.controls > a.prev").click();}V.data("isRendering",true);V.data("hidden",false);V.css("display","block");V.animate({height:b,opacity:"1"},U,"swing",function(){V.data("isRendering",false);});Y.close.show();Y.open.hide();S.addClass("active");}Y.close.hide();V.css({height:"0px",opacity:"0"}).data("hidden",true);S.find("a").click(function(){X();if(V.data("isRendering")){return false;}if(V.data("hidden")){a();}else{W();}return false;});}};return R;}());var F=(function(){var R=function(T){this.root=T;this.render=new S(this);this.set();};R.prototype={set:function(){var U=this,T=this.root;if(T.headObj.headlines.size()===0){return false;}window[Q.feed.whatsHotLive.feedFunction]=function(V){U.render.set(V);};T.feeds.whatsHotLive();}};var S=function(T){this.main=this;this.root=T.root;};S.prototype={set:function(Z){var V=this.root,U=V.headObj.headlines;var X=this.hot({title:"Full Coverage",feed:Z.whatshot,len:Q.feed.whatsHotLive.show.hot});var a=this.live({title:"Watch Live",feed:Z.watchlive,len:Q.feed.whatsHotLive.show.live});if(typeof Z.whatshot!=="undefined"){if(Z.whatshot.length===0){return false;}var W=I('<dl class="first"></dl>');W.append(X).children("dd:first").addClass("first");U.html(W);}if(typeof Z.watchlive!=="undefined"){if(Z.watchlive.length===0){return false;}var Y=I("<dl></dl>");Y.append(a).children("dd:first").addClass("first");U.append(Y);var T=U.children("dl:nth-child(2)");if(Z.watchlive.length>Q.feed.whatsHotLive.show.live){this.rotate(T);}else{T.children("dd").css("display","inline");}}},hot:function(V){if(typeof V.feed==="undefined"){return false;}V.len=V.len||V.feed.length;var U,T=[];if(V.len>0){T.push("<dt>"+V.title+"</dt>");for(U=0;U<V.feed.length;U++){var X=V.feed[U],W=(U>=V.len)?' style="display:none;"':"";T.push("<dd"+W+'><a href="'+X.link+'">'+X.title+"</a></dd>");}}return I(T.join(""));},live:function(V){if(typeof V.feed==="undefined"){return false;}V.len=V.len||V.feed.length;var U,T=[];if(V.len>0){T.push("<dt>"+V.title+"</dt>");for(U=0;U<V.feed.length;U++){var X=V.feed[U],W=(U>=V.len)?' style="display:none;"':"";T.push("<dd"+W+'><a href="'+X.link+'">'+X.title+"</a></dd>");}}return I(T.join(""));},rotate:function(Y){var Z=Y.children("dd"),a=Y.children("dt:first"),U=Z.size(),X=Q.feed.whatsHotLive.fade;if(U===0){return false;}var T=Q.feed.whatsHotLive.rotate*1000;if(X.use){T=T+X.delay;}var V=false;Z.each(function(c){var d=I(this);d.addClass("first");d.css("display",(c===0)?"inline":"none");if(c===0){d.data("rotateNumber",c+1);}});if(!Y.data("rotateNumber")){Y.data("rotateNumber",1);}function W(d){d=d||false;var c=Y.data("rotateNumber")+1;c=(c>U)?1:c;Y.data("rotateNumber",c);Z.each(function(e){var g=I(this),f=e+1;if(!X.use||d==="click"){g.css("display",(f===c)?"inline":"none");}else{if(f===c){g.fadeIn(X.delay);}else{g.hide();}}});}function b(){clearInterval(V);V=setInterval(function(){W();},T);}b();a.css("cursor","pointer").click(function(){W("click");});Y.hover(function(){clearInterval(V);},function(){b();});}};return R;}());var E=(function(){var R=function(S){this.root;this.set();};R.prototype={set:function(){var S=this;I("#headlines .dv-list:first").each(function(){S.trigger(I(this));});},trigger:function(V){var S=this,U="fox_header_whatshot",T="http://global.fncstatic.com/static/all/generated/js/fb2-whatshot.js";window[U]=function(W){S.render(W,V);};(function(){var X=document,W=X.createElement("script");W.src=T;W.async=true;(X.getElementsByTagName("head")[0]||X.getElementsByTagName("body")[0]).appendChild(W);}());},render:function(X,Y){if(!X&&!X.length){return false;}var U,T=[],S=X.length;T.push("<h2>What's Hot</h2><ul>");for(U=0;U<S;U++){var W=X[U],V=(U===0)?" dv-item-first":(U===S-1)?" dv-item-last":"";T.push('<li class="dv-item'+V+'">');T.push('<a href="'+W.link+'">'+W.title+"</a>");T.push("</li>");}T.push("</ul>");Y.html(T.join(""));}};return R;}());var O=(function(){var R=function(S){this.root=S;};R.prototype={whatsHotLive:function(){this.get.append({url:Q.feed.whatsHotLive.url});},onAir:function(){this.get.append({url:Q.feed.onAir.url});},onAirCarousel:function(){this.get.append({url:Q.feed.onAirCarousel.url});},get:{append:function(S){(function(){var T=document.createElement("script");T.src=S.url;T.async=true;I("head").get(0).appendChild(T);}());},json:function(S){I.ajax({type:"GET",url:S.url,data:S.query,success:function(T){if(S.callback){S.callback(T);}}});}}};return R;}());var L=(function(){var T=function(U){this.root=U;this.set();};T.prototype={set:function(){var U=this;switch(M){case"fn":S();break;case"fb":R();break;}}};var S=function(){I("#search-site").each(function(){RAMP_AutoComplete.init();I("#box1").focus(function(){if(I(this).val()!==""){I(this).val("");}});});};var R=function(){var U=I("form#searchArea");if(U.size()===0){U=I("#search-site").parent();}U.each(function(){var X=I(this);var V=X.find("input[type='text']");var Y=X.find("input[type='image'],input[type='submit']");var W=V.attr("value");V.attr({name:"q",onblur:"",onfocus:"",autocomplete:"off"}).blur(function(){var Z=I(this);var a=(Z.attr("value").length>0)?Z.attr("value"):W;Z.attr("value",a);}).focus(function(){var Z=I(this);var a=(Z.attr("value").indexOf(W)>-1)?"":Z.attr("value");Z.attr("value",a);});IDC_quoteComplete.init();});};return T;}());J.prototype.helper={getQueryStr:function(W){var U=(window.location.search).substr(1);if(U.length>0){var R,V=U.split("&"),S={};for(R=0;R<V.length;R++){var T=V[R].split("=");S[T[0]]=T[1];}return(S[W])?S[W]:false;}return false;}};var G=function(R){if(window.console&&window.console.log){console.log(R);}};var N={isIE:function(){return I.browser.msie;},animate:function(S,R){if(!this.isIE()){if(!R.speed){R.speed=300;}if(!R.type){R.type="swing";}S.animate(R.css,R.speed,R.type,function(){if(R.callback){R.callback();}});}else{S.css(R.css);S.css("opacity","");if(R.callback){R.callback();}}},hide:function(U,R){if(!U){return false;}var S,T={opacity:"0"};if(R.css){for(S in R.css){if(R.css.hasOwnProperty(S)){T[S]=R.css[S];}}}R.css=T;this.animate(U,R);},show:function(U,R){if(!U){return false;}var S,T={opacity:"1"};if(R.css){for(S in R.css){if(R.css.hasOwnProperty(S)){T[S]=R.css[S];}}}R.css=T;this.animate(U,R);}};var D=new J();(function(){var S=function(){I(document).ready(function(){D.init();});};try{if(window.FOX&&FOX.site&&typeof FOX.site.bottomInit==="function"){var R=FOX.site.bottomInit;FOX.site.bottomInit=function(){D.init();R();};}else{if(window.FOX_HP&&FOX_HP.site.OnPageReady){FOX_HP.site.OnPageReady(function(){D.init();});}else{S();}}}catch(T){S();}}());var K=window.siteStreamFlashPlayer=function(S,R){var a=(typeof S==="undefined")?1:S,X=(typeof R==="undefined")?"foxnews":R,Z=850,V=506,T=(screen.width-Z)/2,Y=(screen.height-V)/2,U="height="+V+",width="+Z+",top="+Y+",left="+T+",toolbar=no,location=no,scrollbars=no,status=no,resizable=no,fullscreen=no",W=window.open("http://interactive."+X+".com/livestream/live.html?chanId="+a+"&openAIR=true","livePlayer",U);W.focus();};var B=window.siteStreamLivePlayer=function(W){var R=914,S=419,V=(screen.width-R)/2,U=(screen.height-S)/2;url="http://video.foxnews.com/video-live-streaming.html",settings="height="+S+",width="+R+",top="+U+",left="+V+",toolbar=no,location=no,scrollbars=no,status=no,resizable=no,fullscreen=no",url=url+((W&&!isNaN(W))?"?video_id="+W:"");var T=window.open(url,"LivePlayer",settings);T.focus();};var C=window.FOX_isMnt=function(){var R=false,T=window.CONST_Akamai_TIME||false;try{if(T.yr==="2011"&&T.mm==="11"&&(T.dd==="05"||T.dd==="06")){R=true;}else{if(T.yr==="2011"&&T.mm==="11"&&T.dd==="04"&&parseInt(T.hr,10)>=17){R=true;}}}catch(S){}return R;};}(jQuery));(function(A){A(document).ready(function(){var B=A("#section-footer a[rel*='external']");if(window.FOX&&FOX.utils&&FOX.utils.extLink){FOX.utils.extLink.set(B);}else{B.each(function(){var D=A(this),E=A.trim(D.attr("href")||""),C=A.trim(D.attr("rel")||"");if(E.length>0&&E!=="#"){C=(C.indexOf("external")>-1)?C:[C,"external"].join(" ");C=A.trim([C,"ext-linked"].join(" "));D.attr("rel",C);D.click(function(){window.open(E,"_blank");return false;});if(!D.attr("target")){D.attr("target","_blank");}}});}});}(jQuery));window.RAMP_AutoComplete=(function(A){window.RampAutoComplete=function(){var B=this;B._serviceUrl="http://www.foxnews.com/search-results/autocomplete/foxnews";B._searchUrl="http://www.foxnews.com/search-results/search/?";B._searchTimer=null;B._fetchData=function(){var C="FOX_handleRamp";var D=(function(){var E=A.trim(B._searchBox[0].value||"");E=E.replace(/\s+/gi," ");return E;}());if(D.length===0||B._prevInputStr===D){return false;}B._prevInputStr=D;if(!window[C]){window[C]=function(E){B.handleRampFox(E);};}A.ajax({type:"GET",url:B._serviceUrl,data:{q:encodeURIComponent(D),callbackName:C},dataType:"script",async:true,cache:true});};};RampAutoComplete.prototype={init:function(){var B=this;B._searchBox=A("input#box1");B._listBox=A("div#list1");B.handleInput();},handleRampFox:function(D){var J=this,F=D.ac.q;var G='<div class="search-drop">';G+="<ul>";if(F.length>0){J._listBox.css("display","block");}else{J._listBox.css("display","none");}for(var E=0;E<F.length;E+=1){var C=J._searchBox[0].value.toLowerCase();var B=(E%2)==0?'class="odd"':"";var H=J._searchUrl+"q="+encodeURIComponent(F[E]).replace(/\s/g,"+").replace(/%20/g,"+");var I=F[E].replace(C,C.bold());G+="<li "+B+'><a href="'+H+'">'+I+"</a></li>";}G+="</ul>";G+="</div>";J._listBox.each(function(){this.innerHTML=G;});},handleInput:function(){var B=this;B._searchBox.attr("autocomplete","off");var C=false;B._listBox.hover(function(){C=true;},function(){C=false;});A("body").click(function(){if(!C){B._listBox.hide();}});B._listBox.mouseover(function(){A("li").removeClass("selectedRamp");});B._searchBox.bind("keydown",function(D){var N=A("li.selectedRamp",B._listBox)||null,G=N.index()||0,E=A("div.search-drop li:last-child")||null,F=A("div.search-drop").height()||0,I=N?N.height():0,K=E?E.height():0,M=N?N.position():0,L=E?E.position():0,H=function(P){return parseInt(P,10);};var O=38,J=40;if(D.keyCode==O||D.keyCode==J){if(N.length>0){if(D.keyCode==O){N=N.prev();N.focus();if(M.top>0&&M.top<=100){A("div.search-drop").scrollTop(0);}if(M.top===0){A("div.search-drop").scrollTop(H(L.top));}}else{N=N.next();N.focus();if((M.top+I)>=176&&M.top<=H(L.top)){A("div.search-drop").scrollTop(H(M.top)+H(I));}if(M.top>=H(L.top)){A("div.search-drop").scrollTop(0);}}}if(N.length===0){if(D.keyCode==O){N=A("li:last-child",B._listBox);A("div.search-drop").scrollTop(H(L.top));}else{N=A("li:first-child",B._listBox);A("div.search-drop").scrollTop(0);}}B._listBox.css("display","block");N.addClass("selectedRamp").siblings().removeClass("selectedRamp");B._searchBox[0].value=A(N[0]).text();}else{if(B._searchTimer!==null){clearTimeout(B._searchTimer);}B._searchTimer=setTimeout(B._fetchData,300);}});}};return(new RampAutoComplete());}(jQuery));window.IDC_quoteComplete=(function(B){var A={index:-1,totalResults:0,results:false,resultsDiv:"search-results",field:"#search",url:"http://interactive.foxbusiness.com/projects/autocomplete/autocomplete.json",action:"http://interactive.foxbusiness.com/projects/autocomplete/intercept.html?q=",quoteUrl:"http://quote.foxbusiness.com/?searchString=",defaultText:"Search quotes, news and video",reset:function(){B("."+A.resultsDiv).html("");A.results=false;A.index=-1;},init:function(){B(A.field).focus(function(){if(B(this).val()===A.defaultText){B(this).val("");}A.reset();});B(A.field).blur(function(D){if(B(this).val()===""){B(this).val(A.defaultText);}setTimeout(function(){A.reset();},500);});B(A.field).parents("form").submit(function(){if(A.index>-1){B(A.field).val(B("#search_drop_overlay ul li:eq("+A.index+") a span.ticker").text());}if(A.index>-1){A.action=A.quoteUrl;}A.action+=encodeURIComponent(B(A.field).val());if(A.index>-1){A.reset();}document.location=A.action;return false;});var C="FOX_IDC_QuoteResponse";window[C]=function(D){A.response(D);};B(A.field).keyup(function(D){if((D.keyCode>=65&&D.keyCode<=90)||(D.keyCode>=97&&D.keyCode<=122)||D.keyCode===8){A.index=-1;var E=B(A.field).val();B("."+A.resultsDiv).html("");if(E!==""){B.getJSON(A.url+"?q="+E+"&callback="+C+"&jsonp=?");A.results=true;}else{A.results=false;}}else{if(D.keyCode===40||D.keyCode===38){if(A.results){B("#search_drop_overlay ul li:eq("+A.index+")").removeClass("selected");B("#search_drop_overlay ul li a:eq("+A.index+")").removeClass("selected");if(D.keyCode===40){if(A.index<(A.totalResults-1)){A.index++;}else{A.index=0;}}else{if(A.index>0){A.index--;}else{A.index=A.totalResults-1;}}B("#search_drop_overlay ul li:eq("+A.index+")").addClass("selected");B("#search_drop_overlay ul li a:eq("+A.index+")").addClass("selected");}}else{if(D.keyCode===27){A.reset();}}}});B(A.field).parents("form").after('<div class="'+A.resultsDiv+'"></div>');},response:function(D){var C="";var E=B(A.field).val();if(D!==""){A.totalResults=B(D).size();C+="<ul>";B.each(D,function(I,M){var J=new RegExp(E,"i");var L=this.s.search(J);var F=this.n.search(J);var G=L>-1?this.s.replace(J,"<strong>"+this.s.slice(L,(L+E.length))+"</strong>"):this.s;var H=F>-1?this.n.replace(J,"<strong>"+this.n.slice(F,(F+E.length))+"</strong>"):this.n;var K=this.s;C+='<li><a href="'+A.quoteUrl+K+'"><span class="ticker">'+G+'</span><span class="corporation">'+H+"</span></a></li>";});C+="</ul>";}else{A.totalResults=0;C="<p>No suggestions available</p>";}B("."+A.resultsDiv).html('<div id="search_drop_overlay" class="search_drop_overlay"><div class="search_drop_top">&nbsp;</div><div class="search_drop_list">'+C+'<div class="clearflatgray"></div><div class="search_drop_link1"><a href="'+A.action+E+'">Search for News &amp; Videos "<strong>'+E.toUpperCase()+'</strong>"</a></div></div><div class="search_drop_bottom"></div></div>');A.initMouseEvents();},initMouseEvents:function(){B("."+A.resultsDiv+" ul li").mouseover(function(){if(A.index>-1){B("."+A.resultsDiv+" ul li:eq("+A.index+")").removeClass("selected");}B(this).addClass("selected");});B("."+A.resultsDiv+" ul li").mouseout(function(){B(this).removeClass("selected");});B("."+A.resultsDiv+" ul li a").mouseover(function(){if(A.index>-1){B("."+A.resultsDiv+" ul li a:eq("+A.index+")").removeClass("selected");}B(this).addClass("selected");});B("."+A.resultsDiv+" ul li a").mouseout(function(){B(this).removeClass("selected");});}};return A;})(jQuery);var swfobject=window.swfobject=function(){var AQ="undefined",Ac="object",AB="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",Ad="application/x-shockwave-flash",AC="SWFObjectExprInst",AW="onreadystatechange",AF=window,Ak=document,Aa=navigator,AA=false,Z=[Am],Af=[],AG=[],AL=[],Ai,AD,AP,AS,AK=false,At=false,Ag,AN,Ah=true,AH=function(){var A=typeof Ak.getElementById!=AQ&&typeof Ak.getElementsByTagName!=AQ&&typeof Ak.createElement!=AQ,E=Aa.userAgent.toLowerCase(),C=Aa.platform.toLowerCase(),H=C?/win/.test(C):/win/.test(E),J=C?/mac/.test(C):/mac/.test(E),G=/webkit/.test(E)?parseFloat(E.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,D=!+"\v1",F=[0,0,0],K=null;if(typeof Aa.plugins!=AQ&&typeof Aa.plugins[AB]==Ac){K=Aa.plugins[AB].description;if(K&&!(typeof Aa.mimeTypes!=AQ&&Aa.mimeTypes[Ad]&&!Aa.mimeTypes[Ad].enabledPlugin)){AA=true;D=false;K=K.replace(/^.*\s+(\S+\s+\S+$)/,"$1");F[0]=parseInt(K.replace(/^(.*)\..*$/,"$1"),10);F[1]=parseInt(K.replace(/^.*\.(.*)\s.*$/,"$1"),10);F[2]=/[a-zA-Z]/.test(K)?parseInt(K.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof AF.ActiveXObject!=AQ){try{var I=new ActiveXObject(X);if(I){K=I.GetVariable("$version");if(K){D=true;K=K.split(" ")[1].split(",");F=[parseInt(K[0],10),parseInt(K[1],10),parseInt(K[2],10)];}}}catch(B){}}}return{w3:A,pv:F,wk:G,ie:D,win:H,mac:J};}(),Aj=function(){if(!AH.w3){return ;}if((typeof Ak.readyState!=AQ&&Ak.readyState=="complete")||(typeof Ak.readyState==AQ&&(Ak.getElementsByTagName("body")[0]||Ak.body))){Ao();}if(!AK){if(typeof Ak.addEventListener!=AQ){Ak.addEventListener("DOMContentLoaded",Ao,false);}if(AH.ie&&AH.win){Ak.attachEvent(AW,function(){if(Ak.readyState=="complete"){Ak.detachEvent(AW,arguments.callee);Ao();}});if(AF==top){(function(){if(AK){return ;}try{Ak.documentElement.doScroll("left");}catch(A){setTimeout(arguments.callee,0);return ;}Ao();})();}}if(AH.wk){(function(){if(AK){return ;}if(!/loaded|complete/.test(Ak.readyState)){setTimeout(arguments.callee,0);return ;}Ao();})();}Ab(Ao);}}();function Ao(){if(AK){return ;}try{var B=Ak.getElementsByTagName("body")[0].appendChild(AR("span"));B.parentNode.removeChild(B);}catch(A){return ;}AK=true;var D=Z.length;for(var C=0;C<D;C++){Z[C]();}}function AJ(A){if(AK){A();}else{Z[Z.length]=A;}}function Ab(A){if(typeof AF.addEventListener!=AQ){AF.addEventListener("load",A,false);}else{if(typeof Ak.addEventListener!=AQ){Ak.addEventListener("load",A,false);}else{if(typeof AF.attachEvent!=AQ){Al(AF,"onload",A);}else{if(typeof AF.onload=="function"){var B=AF.onload;AF.onload=function(){B();A();};}else{AF.onload=A;}}}}}function Am(){if(AA){Y();}else{AM();}}function Y(){var D=Ak.getElementsByTagName("body")[0];var B=AR(Ac);B.setAttribute("type",Ad);var A=D.appendChild(B);if(A){var C=0;(function(){if(typeof A.GetVariable!=AQ){var E=A.GetVariable("$version");if(E){E=E.split(" ")[1].split(",");AH.pv=[parseInt(E[0],10),parseInt(E[1],10),parseInt(E[2],10)];}}else{if(C<10){C++;setTimeout(arguments.callee,10);return ;}}D.removeChild(B);A=null;AM();})();}else{AM();}}function AM(){var G=Af.length;if(G>0){for(var H=0;H<G;H++){var C=Af[H].id;var L=Af[H].callbackFn;var A={success:false,id:C};if(AH.pv[0]>0){var I=Ar(C);if(I){if(AO(Af[H].swfVersion)&&!(AH.wk&&AH.wk<312)){AX(C,true);if(L){A.success=true;A.ref=AU(C);L(A);}}else{if(Af[H].expressInstall&&AT()){var E={};E.data=Af[H].expressInstall;E.width=I.getAttribute("width")||"0";E.height=I.getAttribute("height")||"0";if(I.getAttribute("class")){E.styleclass=I.getAttribute("class");}if(I.getAttribute("align")){E.align=I.getAttribute("align");}var F={};var D=I.getElementsByTagName("param");var K=D.length;for(var J=0;J<K;J++){if(D[J].getAttribute("name").toLowerCase()!="movie"){F[D[J].getAttribute("name")]=D[J].getAttribute("value");}}AE(E,F,C,L);}else{Ae(I);if(L){L(A);}}}}}else{AX(C,true);if(L){var B=AU(C);if(B&&typeof B.SetVariable!=AQ){A.success=true;A.ref=B;}L(A);}}}}}function AU(B){var D=null;var C=Ar(B);if(C&&C.nodeName=="OBJECT"){if(typeof C.SetVariable!=AQ){D=C;}else{var A=C.getElementsByTagName(Ac)[0];if(A){D=A;}}}return D;}function AT(){return !At&&AO("6.0.65")&&(AH.win||AH.mac)&&!(AH.wk&&AH.wk<312);}function AE(F,D,H,E){At=true;AP=E||null;AS={success:false,id:H};var A=Ar(H);if(A){if(A.nodeName=="OBJECT"){Ai=An(A);AD=null;}else{Ai=A;AD=H;}F.id=AC;if(typeof F.width==AQ||(!/%$/.test(F.width)&&parseInt(F.width,10)<310)){F.width="310";}if(typeof F.height==AQ||(!/%$/.test(F.height)&&parseInt(F.height,10)<137)){F.height="137";}Ak.title=Ak.title.slice(0,47)+" - Flash Player Installation";var B=AH.ie&&AH.win?"ActiveX":"PlugIn",C="MMredirectURL="+AF.location.toString().replace(/&/g,"%26")+"&MMplayerType="+B+"&MMdoctitle="+Ak.title;if(typeof D.flashvars!=AQ){D.flashvars+="&"+C;}else{D.flashvars=C;}if(AH.ie&&AH.win&&A.readyState!=4){var G=AR("div");H+="SWFObjectNew";G.setAttribute("id",H);A.parentNode.insertBefore(G,A);A.style.display="none";(function(){if(A.readyState==4){A.parentNode.removeChild(A);}else{setTimeout(arguments.callee,10);}})();}AZ(F,D,H);}}function Ae(A){if(AH.ie&&AH.win&&A.readyState!=4){var B=AR("div");A.parentNode.insertBefore(B,A);B.parentNode.replaceChild(An(A),B);A.style.display="none";(function(){if(A.readyState==4){A.parentNode.removeChild(A);}else{setTimeout(arguments.callee,10);}})();}else{A.parentNode.replaceChild(An(A),A);}}function An(B){var D=AR("div");if(AH.win&&AH.ie){D.innerHTML=B.innerHTML;}else{var E=B.getElementsByTagName(Ac)[0];if(E){var A=E.childNodes;if(A){var F=A.length;for(var C=0;C<F;C++){if(!(A[C].nodeType==1&&A[C].nodeName=="PARAM")&&!(A[C].nodeType==8)){D.appendChild(A[C].cloneNode(true));}}}}}return D;}function AZ(E,G,C){var D,A=Ar(C);if(AH.wk&&AH.wk<312){return D;}if(A){if(typeof E.id==AQ){E.id=C;}if(AH.ie&&AH.win){var F="";for(var I in E){if(E[I]!=Object.prototype[I]){if(I.toLowerCase()=="data"){G.movie=E[I];}else{if(I.toLowerCase()=="styleclass"){F+=' class="'+E[I]+'"';}else{if(I.toLowerCase()!="classid"){F+=" "+I+'="'+E[I]+'"';}}}}}var H="";for(var J in G){if(G[J]!=Object.prototype[J]){H+='<param name="'+J+'" value="'+G[J]+'" />';}}A.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+F+">"+H+"</object>";AG[AG.length]=E.id;D=Ar(E.id);}else{var B=AR(Ac);B.setAttribute("type",Ad);for(var K in E){if(E[K]!=Object.prototype[K]){if(K.toLowerCase()=="styleclass"){B.setAttribute("class",E[K]);}else{if(K.toLowerCase()!="classid"){B.setAttribute(K,E[K]);}}}}for(var L in G){if(G[L]!=Object.prototype[L]&&L.toLowerCase()!="movie"){Ap(B,L,G[L]);}}A.parentNode.replaceChild(B,A);D=B;}}return D;}function Ap(B,D,C){var A=AR("param");A.setAttribute("name",D);A.setAttribute("value",C);B.appendChild(A);}function AV(A){var B=Ar(A);if(B&&B.nodeName=="OBJECT"){if(AH.ie&&AH.win){B.style.display="none";(function(){if(B.readyState==4){As(A);}else{setTimeout(arguments.callee,10);}})();}else{B.parentNode.removeChild(B);}}}function As(A){var B=Ar(A);if(B){for(var C in B){if(typeof B[C]=="function"){B[C]=null;}}B.parentNode.removeChild(B);}}function Ar(A){var C=null;try{C=Ak.getElementById(A);}catch(B){}return C;}function AR(A){return Ak.createElement(A);}function Al(A,C,B){A.attachEvent(C,B);AL[AL.length]=[A,C,B];}function AO(A){var B=AH.pv,C=A.split(".");C[0]=parseInt(C[0],10);C[1]=parseInt(C[1],10)||0;C[2]=parseInt(C[2],10)||0;return(B[0]>C[0]||(B[0]==C[0]&&B[1]>C[1])||(B[0]==C[0]&&B[1]==C[1]&&B[2]>=C[2]))?true:false;}function AY(B,F,A,C){if(AH.ie&&AH.mac){return ;}var E=Ak.getElementsByTagName("head")[0];if(!E){return ;}var G=(A&&typeof A=="string")?A:"screen";if(C){Ag=null;AN=null;}if(!Ag||AN!=G){var D=AR("style");D.setAttribute("type","text/css");D.setAttribute("media",G);Ag=E.appendChild(D);if(AH.ie&&AH.win&&typeof Ak.styleSheets!=AQ&&Ak.styleSheets.length>0){Ag=Ak.styleSheets[Ak.styleSheets.length-1];}AN=G;}if(AH.ie&&AH.win){if(Ag&&typeof Ag.addRule==Ac){Ag.addRule(B,F);}}else{if(Ag&&typeof Ak.createTextNode!=AQ){Ag.appendChild(Ak.createTextNode(B+" {"+F+"}"));}}}function AX(A,C){if(!Ah){return ;}var B=C?"visible":"hidden";if(AK&&Ar(A)){Ar(A).style.visibility=B;}else{AY("#"+A,"visibility:"+B);}}function AI(B){var A=/[\\\"<>\.;]/;var C=A.exec(B)!=null;return C&&typeof encodeURIComponent!=AQ?encodeURIComponent(B):B;}var Aq=function(){if(AH.ie&&AH.win){window.attachEvent("onunload",function(){var A=AL.length;for(var B=0;B<A;B++){AL[B][0].detachEvent(AL[B][1],AL[B][2]);}var D=AG.length;for(var C=0;C<D;C++){AV(AG[C]);}for(var E in AH){AH[E]=null;}AH=null;for(var F in swfobject){swfobject[F]=null;}swfobject=null;});}}();return{registerObject:function(A,E,C,B){if(AH.w3&&A&&E){var D={};D.id=A;D.swfVersion=E;D.expressInstall=C;D.callbackFn=B;Af[Af.length]=D;AX(A,false);}else{if(B){B({success:false,id:A});}}},getObjectById:function(A){if(AH.w3){return AU(A);}},embedSWF:function(K,E,H,F,C,A,B,I,G,J){var D={success:false,id:E};if(AH.w3&&!(AH.wk&&AH.wk<312)&&K&&E&&H&&F&&C){AX(E,false);AJ(function(){H+="";F+="";var Q={};if(G&&typeof G===Ac){for(var O in G){Q[O]=G[O];}}Q.data=K;Q.width=H;Q.height=F;var N={};if(I&&typeof I===Ac){for(var P in I){N[P]=I[P];}}if(B&&typeof B===Ac){for(var L in B){if(typeof N.flashvars!=AQ){N.flashvars+="&"+L+"="+B[L];}else{N.flashvars=L+"="+B[L];}}}if(AO(C)){var M=AZ(Q,N,E);if(Q.id==E){AX(E,true);}D.success=true;D.ref=M;}else{if(A&&AT()){Q.data=A;AE(Q,N,E,J);return ;}else{AX(E,true);}}if(J){J(D);}});}else{if(J){J(D);}}},switchOffAutoHideShow:function(){Ah=false;},ua:AH,getFlashPlayerVersion:function(){return{major:AH.pv[0],minor:AH.pv[1],release:AH.pv[2]};},hasFlashPlayerVersion:AO,createSWF:function(A,B,C){if(AH.w3){return AZ(A,B,C);}else{return undefined;}},showExpressInstall:function(B,A,D,C){if(AH.w3&&AT()){AE(B,A,D,C);}},removeSWF:function(A){if(AH.w3){AV(A);}},createCSS:function(B,A,C,D){if(AH.w3){AY(B,A,C,D);}},addDomLoadEvent:AJ,addLoadEvent:Ab,getQueryParamValue:function(B){var A=Ak.location.search||Ak.location.hash;if(A){if(/\?/.test(A)){A=A.split("?")[1];}if(B==null){return AI(A);}var C=A.split("&");for(var D=0;D<C.length;D++){if(C[D].substring(0,C[D].indexOf("="))==B){return AI(C[D].substring((C[D].indexOf("=")+1)));}}}return"";},expressInstallCallback:function(){if(At){var A=Ar(AC);if(A&&Ai){A.parentNode.replaceChild(Ai,A);if(AD){AX(AD,true);if(AH.ie&&AH.win){Ai.style.display="block";}}if(AP){AP(AS);}}At=false;}}};}();(function(C){var J={yume_ad_domain_code:{fn2:"109RXfmeHtS",fb2:"109DLWefYRt",fb:"109RXfmeHtS","fn-latino":"109RXfmeHtS"},settings_url:{fn2:"http://video.foxnews.com/assets/akamai/resources/conf/config.xml",fb2:"http://video.foxbusiness.com/assets/akamai/resources/conf/config-fb.xml",fb:"http://video.foxbusiness.com/assets/akamai/resources/conf/config-sbc.xml","fn-latino":"http://video.foxnews.com/assets/akamai/resources/conf/config-latino.xml"},auditude_code:{defaultAssetId:"fnd_default_asset",adDomain:"auditude.com",zoneId:{fn2:"52522",fb2:"52523",fb:"52526","fn-latino":"52522"}}};window.MvPlayer=function(){this.version="1.2.6.2";this._namespace=null;this._config={};this._videoDomain="video.foxnews.com";this._callbacksObj={};this._autoEmbed=true;this.holder={};this.playerIds=[];this.playerMap={};this.idSeparator=":";this.instanceId=["videoid","videolink","playlistid"];this.feedFolder={video:"/v/feed/video/",playlist:"/v/feed/playlist/"};this.itemType={videoid:"video",playlistid:"playlist"};this.feedQueryString={template:"fox"};this.playTimeout={};this.dataObj={};this.holderObj={};this.overlayObj={defaultImg:"http://global.fncstatic.com/static/v/all/img/vp-overlay.png",blankImg:"http://global.fncstatic.com/static/v/all/img/clear.gif"};};MvPlayer.prototype={init:function(M){var N,Q,O=this;for(N in M){O["_"+N]=M[N];}O.embed.root=O.feed.root=O.video.root=O.format.root=O.controls.root=O.thirdParty.root=O.feedParser.root=O._helper.root=this;var P={},K=O._config;if(K.player.feedSettings){if(K.player.feedSettings.videoFolder){P.video=K.player.feedSettings.videoFolder;}if(K.player.feedSettings.playlistFolder){P.playlist=K.player.feedSettings.playlistFolder;}}if(K.player.isLivePlayer){this.itemType.videoid="live";P.video=P.video.replace("/video/","/live/");}if(M.callbacks){if(typeof M.callbacks==="object"&&!D(M.callbacks)){for(Q in M.callbacks){if(O._callbacksObj[Q]){for(N in M.callbacks){O._callbacksObj[Q][N]=M.callbacks[Q][N];}}else{O._callbacksObj[Q]=M.callbacks[Q];}}}}this.videoTypeLinks={videoid:"http://"+O._videoDomain+((P.video)?P.video:O.feedFolder.video),playlistid:"http://"+O._videoDomain+((P.playlist)?P.playlist:O.feedFolder.playlist)};if(typeof G!=="undefined"){var L=new G(O);if(L.init()){O.pandora=L;O.pandora.init();}}if(!O._autoEmbed){return false;}O.holder.videoObj=C(".video,.video-ct");O.embed.players();},render:function(O){if(!O){return false;}if(!O.id||!O.holder){return false;}var Q,S=this,R=S.idSeparator,K=O.id,M=S._helper;if(O.callbacks){if(S._callbacksObj[K]){for(Q in O.callbacks){S._callbacksObj[K][Q]=O.callbacks[Q];}}else{S._callbacksObj[K]=O.callbacks;}}if(!O.autoplay||typeof O.autoplay!=="boolean"){O.autoplay=false;}if(O.holder.data("currentId")===K){return false;}function N(){var U=false;if(O.holder.find("[id^='videoHolder:']").size()>0){var T=O.holder.find("[id^='videoHolder:']:first").attr("id");S.setPlayerMap({type:"set",vId:K,domId:T});U=S.setPlayerMap({type:"get",vId:K});}else{U=S.setPlayerMap({type:"create",vId:K});}var V=C("<div></div>").attr({id:U});if(O.cssClass){V.addClass(O.cssClass);}if(S.pandora){V.data("pandora",true);V.data("autoplay",O.autoplay);}O.holder.html(V);}var L=O.holder.find("> object");if(L.size()>0){try{if(M.isPlayFileReady(L.get(0))){S.setPlayerMap({type:"set",vId:K,domId:L.attr("id")});if(O.cssClass){L.addClass(O.cssClass);}}else{N();}}catch(P){N();}}else{N();}if(S.embed.validate(O.holder,O.holder.children().filter(":first"),K.substring(0,K.indexOf(R)),R)){O.holder.data("currentId",K);if(O.holder.children().filter(":first").data("pandora")){S.pandora.load(K,O.autoplay);}else{S.feed.get({id:K,autoplay:O.autoplay,method:"render"});}}},getFeed:function(K){if(!K){return false;}if(!K.id||!K.callback){return false;}var L=this;L.feed.get({id:K.id,method:"getFeed",raw:true,processed:(!K.processed)?false:true,callback:K.callback});},setPlayerMap:function(Q){if(!Q){return false;}var N=this,M="videoHolder:";switch(Q.type){case"create":function P(){return M+A();}var O=P();while(N.playerMap[O]){O=P();}N.playerMap[O]=Q.vId;N.playerMap[Q.vId]=O;return O;case"set":var L,K=false;for(L in N.playerMap){if(L===Q.domId){K=N.playerMap[L];break;}}if(!K){delete N.playerMap[K];}N.playerMap[Q.domId]=Q.vId;N.playerMap[Q.vId]=Q.domId;break;case"get":if(Q.vId){return(N.playerMap[Q.vId])?N.playerMap[Q.vId]:false;}else{if(Q.domId){return(N.playerMap[Q.domId])?N.playerMap[Q.domId]:false;}}return false;}},setCustomFlashVars:function(P,N){var M=this;if(M._config.display.customFlashVars){var L=M._config.display.customFlashVars;if(L[N]){var K,O={};for(K in L[N]){O[K]=L[N][K];}M.holderObj[P].customFlashVars=O;}}}};MvPlayer.prototype.controls={pause:function(N){if(!this.validate()){return false;}var K=this.root,L=K.holderObj[N];try{if(!L.data("pandora")){document.getElementById(N).pause();}else{K.pandora.CONTROLS.pause(N);}}catch(M){B("[videoPlayer.controls.pause] Error caught:"+M);}},play:function(N){if(!this.validate()){return false;}var K=this.root,L=K.holderObj[N];try{if(!L.data("pandora")){document.getElementById(N).unpause();}else{K.pandora.CONTROLS.play(N);}}catch(M){B("[videoPlayer.controls.play] Error caught:"+M);}},validate:function(K){if(!K){return false;}if(!this.root.dataObj[K]){return false;}return true;}};MvPlayer.prototype.embed={validate:function(S,T,O,N){var P,Q=this,R=this.root,K=R._config.display.allow;if(typeof R.format[O]==="undefined"){return false;}for(P in K){if(T.hasClass(P)){var U=R.format[O](T,O,N),M=K[P];var L=(function(){var V,Z=false,X=T.attr("class").split(" ");for(V=0;V<X.length;V++){var W=X[V];if(W.indexOf("vid-")===0){var Y=W.split("-");Y.shift();switch(Y.join("-")){case"fn2":Z="video.foxnews.com";break;case"fb2":Z="video.foxbusiness.com";break;case"fb":Z="video.foxbusiness.com";break;case"fn-latino":Z="video.latino.foxnews.com";break;}}}return{domain:Z,site:Y};}());R.holderObj[U]={id:U,parentElm:S,elm:T,dim:K[P],format:P};if(L.domain){R.holderObj[U].domain=L.domain;R.holderObj[U].xSite=L.site;R.holderObj[U].xDomain=true;}else{R.holderObj[U].domain=R._videoDomain;}R.setCustomFlashVars(U,P);if(R.pandora){R.holderObj[U].elm.data("pandora",true);}return U;}}return false;},players:function(){var M=this,K=this.root,L=(typeof K._config.display.clickThruImage==="undefined")?false:(typeof K._config.display.clickThruImage!=="object")?K._config.display.clickThruImage:K._config.display.clickThruImage.render,N=K.idSeparator;K.holder.videoObj.each(function(){var O,Q=C(this),P=false;function R(T){Q.find("div[id^='"+T+N+"']").each(function(){var U=C(this),V=K.setPlayerMap({type:"create",vId:U.attr("id")});U.attr("id",V);P=M.validate(Q,U,T,N);});}for(O=0;O<K.instanceId.length;O++){var S=K.instanceId[O];R(S);}if(P){if(K.holderObj[P].elm.data("pandora")){K.pandora.load(P);}else{K.feed.get(P);}Q.children().filter("div.img").hide();}});},player:function(T){if(!T){return false;}var P=this,W=this.root,R=W.holderObj[T],K=W._helper,b=W._config.player;if(R.elm.data("videoLoaded")){return false;}W.playerIds.push(T);if(R.elm.data("pandora")){if(!R.elm.data("pandoraLoaded")){var U={id:T,format:R.format,width:R.dim[0]+"px",height:R.dim[1]+"px"};if(W._config.player.flashVars.autoplay==="true"){U.autoplay=true;}R.elm.data("pandora",true);R.elm.data("pandoraLoaded",true);R.elm.data("videoLoaded",true);W.holderObj[T].vAttr=U;}W.pandora.load(T);}else{if(typeof swfobject==="undefined"){B("[videoPlayer.embed.player] swfobject not found.");return false;}var O=function(){W.video.load(T);};if(!R.elm.data("swfLoaded")){var N=W.setPlayerMap({type:"get",vId:T});if(!K.isPlayFileReady(document.getElementById(N))){W.thirdParty.akamai(T,true);var X,a=W._config.player.flashVars,L={};for(X in a){L[X]=a[X];}if(R.customFlashVars){for(X in R.customFlashVars){L[X]=R.customFlashVars[X];}}var Z=R.domain,V=R.xDomain,S=R.xSite,Y=(!b.environment)?"":(window.location.search.indexOf("venv=prod")>-1)?"":(b.environment==="beta")?"beta.":"";currentDomain=(a.location)?a.location:L.settings_url.split("/")[2];if(currentDomain==="video.latino.foxnews.com"&&Z==="video.foxnews.com"){Z="video.latino.foxnews.com";S=["fn-latino"];}var M=function(c){var e=(Y.length>0&&c.indexOf(Y)<0)?Y+Z:Z;return c.replace(c.split("/")[2],e);};if(V){if(J.yume_ad_domain_code[S]){L.yume_ad_domain_code=J.yume_ad_domain_code[S];}if(J.settings_url[S]){L.settings_url=J.settings_url[S];}}L.settings_url=M(L.settings_url);L.core_yume_ad_library_url=M(L.core_yume_ad_library_url);L.core_yume_player_url=M(L.core_yume_player_url);L.data_feed_url=M(L.data_feed_url);b.location=M(b.location);if(W._config.player.tokenCallback){W._config.player.tokenCallback(N);}if(W._config.player.pip){var Q=P.setPinP(b,L);L=Q.flashVars;b=Q.info;}swfobject.embedSWF(b.location,N,R.dim[0],R.dim[1],b.flashVersion,b.expressInstall,L,W._config.player.params);R.elm.data("swfLoaded",true);R.elm.data("videoLoaded",true);if(W._config.player.token){W.dataObj[T]=W.feedParser.setToken(W.dataObj[T],W._config.player.token);C.loadAttempt(50,800,function(){return K.isPlayFileReady(document.getElementById(N));},function(){setTimeout(function(){O();B("[videoPlayer.player] Token: "+W._config.player.token);},500);});}}else{O();}}else{O();}}},setPinP:function(L,M){if(L.location&&M.settings_url){L.location=L.location.replace("FoxNewsPlayer.swf","FoxNewsPlayerMulti.swf");var K=M.settings_url;M.settings_url=(function(O){var P=O.split("/"),N=P.length-1;if(P[N].indexOf("config-multi")===-1){P[N]="config-multi.xml";}return P.join("/");}(K));}return{info:L,flashVars:M};},clickthru:function(Q,R){var P=this,K=this.root,N=K.holderObj[R],O=K.overlayObj.blankImg;N.elm.parent().css({width:N.dim[0]+"px",minHeight:N.dim[1]+"px"});N.elm.html('<a href="#"><img src="'+O+'" /></a>');var M=N.elm.find("img");M.css({width:N.dim[0]+"px",height:N.dim[1]+"px",opacity:"0"});(function(){var V=function(b){M.attr("src",b).animate({opacity:"1"},400,"swing");};var S=function(f){var d=f.split("/"),c=d.length,e=d[c-3],b=d[c-2];d[c-3]=(!isNaN(e))?N.dim[0]:e;d[c-2]=(!isNaN(b))?N.dim[1]:b;return d.join("/");};var a=false,W=N.parentElm;var Z=W.children("div.img"),Y=W.find(".m-controller img:first"),X=W.parent().children("div.m-controller img:first");if(Z.attr("src")&&C.trim(Z.attr("src")).length>0){V(C.trim(Z.attr("src")));E.set({elm:N.elm,dim:N.dim,position:"bottom right"});}else{if(Y.attr("src")&&C.trim(Y.attr("src")).length>0){V(C.trim(Y.attr("src")));E.set({elm:N.elm,dim:N.dim,position:"bottom right"});}else{if(X.attr("src")&&C.trim(X.attr("src")).length>0){V(C.trim(X.attr("src")));E.set({elm:N.elm,dim:N.dim,position:"bottom right"});}else{var U=new Image(),T=S(Q.thumbnail);U.onload=function(){V(T);E.set({elm:N.elm,dim:N.dim,position:"bottom right"});};U.src=T;}}}}());var L=N.elm.find("a");L.css({display:"block",visibility:"visible",padding:"0"}).click(function(){var S=function(){if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}P.player(R);};try{K._config.display.clickThruImage.callbackFn({runPlayer:S});return false;}catch(T){}S();return false;});}};MvPlayer.prototype.thirdParty={akamaiMediaAnalytics:function(L){if(!L||typeof AKAMAI_MEDIA_ANALYTICS_JS_SRC==="undefined"||typeof AKAMAI_MEDIA_ANALYTICS_CALLBACK==="undefined"){return false;}if(!C(document).data("AkamaiH5Analytics")){var K=document.createElement("script");K.type="text/javascript";K.async=true;K.src=AKAMAI_MEDIA_ANALYTICS_JS_SRC;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(K);}C.loadAttempt({maxAttempts:30,timeout:500,callback:{check:function(){return(typeof setAkamaiMediaAnalyticsData!=="undefined")?true:false;},success:function(){AKAMAI_MEDIA_ANALYTICS_CALLBACK(L);}}});},akamai:function(L){var S=this,U=this.root,N=U._config.player,T=U.holderObj[L],W=L.split(":")[1].replace(/[a-zA-z]/gi,""),R=U.itemType[U.dataObj[L].itemType];if(U.dataObj[L]&&U.dataObj[L].isMavenFeed){W=U.dataObj[L].guid;}U._config.player.flashVars.video_id=W;U._config.player.flashVars.data_feed_url="http://"+U._videoDomain+"/v/feed/"+R+"/"+W+".js?template=fox";function K(Y,Z){var X;for(X=0;X<Y.length;X++){if(T.elm.hasClass(Y[X])){switch(Z){case"share":U._config.player.flashVars.show_sharing_overlay="false";break;case"email":U._config.player.flashVars.show_email_overlay="false";break;}return true;}}return false;}if(typeof U._config.display!=="undefined"){var V=U._config.display;if(typeof V.restrict!=="undefined"){if(V.restrict.sharingOverlay){K(V.restrict.sharingOverlay,"share");}if(V.restrict.emailOverlay){K(V.restrict.emailOverlay,"email");}}}if(R.toLowerCase().indexOf("playlist")>-1){try{var Q=U.dataObj[L].PLVideos,M=Q[0]["media-content"],P=M["mvn-assetUUID"];U._config.player.flashVars.video_id=P;U._config.player.flashVars.data_feed_url="http://"+U._videoDomain+"/v/feed/video/"+P+".js?template=fox";}catch(O){B("[videoPlayer.thirdparty.akamai] Failed to load first video from playlist feed: "+O,true);}}},baynote:function(K){var S=this,U=this.root,V=U.dataObj[K],T=U.holderObj[K],L=U._helper,M=(V.thumbnail)?V.thumbnail:false,N=(V.title)?V.title:false;var O=(function(){var Z=(V.duration)?V.duration:false;if(!Z&&isNaN(Z)){return false;}return Z;}());var W=(function(){var a=L.cleanTitle(V.title),b="http://"+U._videoDomain,Z=V.guid;b+="/v/"+Z+"/"+a+"/";return b;}());function R(){if(typeof baynote_track_video_attribute!=="undefined"){if(M&&O&&N&&W){baynote_track_video_attribute(M,O,N,W);B("[videoPlayer.thirdparty.baynote] Successful baynote call: baynote_track_video_attribute(thumbnailUrl,duration,linkText)");B("[videoPlayer.thirdparty.baynote] thumbnailUrl = "+M);B("[videoPlayer.thirdparty.baynote] duration = "+O);B("[videoPlayer.thirdparty.baynote] linkText = "+N);B("[videoPlayer.thirdparty.baynote] url = "+W);return true;}B("[videoPlayer.thirdparty.baynote] Baynote track function not triggered. insufficient video data for: thumbnail url / duration / link text / url.");return true;}B("[videoPlayer.thirdparty.baynote] Baynote track function not defined.");return false;}var Y=30,X=0,Q=false;function P(){if(typeof baynote_track_video_attribute!=="undefined"){R();clearTimeout(Q);}else{if(X>Y){B("[videoPlayer.thirdparty.baynote] Baynote track function call attempts maxed out... ");R();clearTimeout(Q);}else{X++;Q=setTimeout(function(){B("[videoPlayer.thirdparty.baynote] Attempting to call Baynote track function... attempt: "+X);P();},500);}}}if(typeof baynote_track_video_attribute!=="undefined"){R();}else{C(document).ready(function(){P();});}}};MvPlayer.prototype.video={load:function(R){var P=this,L=this.root,N=L._helper,O=L._config.player.flashVars.autoplay,Q=L.setPlayerMap({type:"get",vId:R}),K=document.getElementById(Q);if(N.isPlayFileReady(K)){var M=(typeof L._config.display.clickThruImage==="undefined")?false:(typeof L._config.display.clickThruImage!=="object")?L._config.display.clickThruImage:L._config.display.clickThruImage.render;if(L.dataObj[R]){O=(M)?true:(L._config.player.flashVars.autoplay)?true:false;if(!L._config.player.pip){K.playFile(L.dataObj[R].rawData,O);}else{B("[videoPlayer.load] PlayFile disabled for PIP.");}}else{L.feed.get({id:R,autoplay:O});}clearTimeout(L.playTimeout[R]);}else{L.playTimeout[R]=setTimeout(function(){P.load(R);},100);}}};MvPlayer.prototype.feed={get:function(){var T,d,U=this,c=this.root,M=c.idSeparator,L=arguments[0],X={},R=false;if(typeof L==="object"){for(d in L){X[d]=L[d];}}else{X.id=L;}if(!X.id){B("[videoPlayer.feed.get] Error: no id passed");return false;}var Z="parse_"+c._helper.formatVideoId(X.id,true,true)+((X.raw)?"_getraw":""),Q=c._namespace+".feed."+Z,f=false;f=(function(){var g;for(g in c.videoTypeLinks){if(X.id.indexOf(g)>-1){return{prefix:c.videoTypeLinks[g],type:g};}}return false;}());if(!f){B("[videoPlayer.feed.get] Error: no feed link: "+X.id);return false;}function K(){return(f.type==="playlistid")?true:false;}var Y=X.id.substr(f.type.length+M.length),P=f.prefix;if(Y.charAt(0).toLowerCase()!=="g"){if(f.type==="videoid"){P=P.replace("/v/","/");R=true;}}else{Y=Y.substr(1);}var N=P+Y+".js",S=[],e={};S.push("callback="+Q);if(c.feedQueryString){var b=c.feedQueryString;for(d in b){if(d==="template"){if(!K()){S.push(d+"="+b[d]);}}else{S.push(d+"="+b[d]);}}}for(T=0;T<S.length;T++){var a=S[T].split("=");e[a[0]]=a[1];}S.push("jsonp=?");var O="?"+S.join("&"),V=(X.method)?((X.method==="render")?true:false):false;if(!c.feed[Z]||V){c.feed[Z]=function(j){if(c.holderObj[X.id]){c.holderObj[X.id].ajaxComplete=true;}var g=(K())?c.feedParser.legacy(j):c.feedParser.fox(j);if(X.raw){if(X.callback){X.callback((X.processed)?g:j);}}else{var i=c.holderObj[X.id],h=(typeof c._config.display.clickThruImage==="undefined")?false:(typeof c._config.display.clickThruImage!=="object")?c._config.display.clickThruImage:c._config.display.clickThruImage.render;c.dataObj[X.id]=g;c.dataObj[X.id].rawData=j;c.dataObj[X.id].itemType=f.type;c.dataObj[X.id].isMavenFeed=R;if(X.autoplay){c._config.player.flashVars.autoplay="true";}if(g){if(h&&!X.autoplay){c.embed.clickthru(g,X.id);}else{c.embed.player(X.id);}if(c._callbacksObj[X.id]){if(c._callbacksObj[X.id].feedLoaded){c._callbacksObj[X.id].feedLoaded(g);}}}else{B("[videoPlayer.feed.get] Warning: no data found!");}}};}e.cb=c._helper.cacheBuster();function W(){N=(function(i){var h=i,g=c.holderObj[X.id].domain||false;if(c.holderObj[X.id]&&g){var k=i.split("http://"),j=k[1].split("/");if(j[0]!==g){j[0]=g;}k[1]=j.join("/");h=k.join("http://");}return h;}(N));C.ajax({url:N,data:e,dataType:"script",async:true,cache:true});}W();}};MvPlayer.prototype.format={videoid:function(O,L,N){var K=this.root,M=K.setPlayerMap({type:"get",domId:O.attr("id")});if(!M){return false;}var P=M.substr(L.length+1);return"videoid"+N+P;},videolink:function(P,R,Q){var U=this.root,N=P.attr("id"),L=U.setPlayerMap({type:"get",domId:N}),M="playlist",W="playlistid"+Q;if(L.indexOf("?"+M)===-1){return false;}var V,T=L.substr(L.indexOf("?")+1),S=T.split("&");for(V=0;V<S.length;V++){var O=S[V].split("=");if(O[0].toLowerCase()==="playlist_id"){var K=W+O[1];U.setPlayerMap({type:"set",vId:K,domId:N});return K;}}},playlistid:function(O,M,N){var K=this.root,L=K.setPlayerMap({type:"get",domId:O.attr("id")});if(!L){return false;}var P=L.substr(M.length+1);return"playlistid"+N+P;}};MvPlayer.prototype.feedParser={setToken:function(O,M){var K,L=this.root,N=L._helper;return O;},fox:function(Z){var P,U=this.root,K=U._helper;if(typeof Z.channel.item==="undefined"){return false;}var f=Z.channel,a=Z.channel.item,O=[];if(a instanceof Array){for(P=0;P<a.length;P++){O.push(a[P]);}a=Z.channel.item[0];}if(!a["media-group"]){return false;}var Y=a["media-group"];function T(){var c=Y["media-thumbnail"]||false;if(!c){return"";}if(D(c)&&c[0]&&c[0]["@attributes"]){return c[0]["@attributes"].url||"";}else{if(c&&c["@attributes"]){return c["@attributes"].url||"";}}return"";}function e(){try{return Y["media-content"][0]["@attributes"].duration;}catch(c){B("[videoPlayer.feedParser.grab] Get Duration error: "+c);return"0";}}var Q={url:a.link,title:a.title,description:a.description,shortDescription:a.description,keywords:"",thumbnail:T(),guid:a.guid,channel:"",playlist:"",personality:"",format:"",show:"",category:f.category,creationDate:K.convertGrabDate(a.pubDate),loc:"http://"+window.location.host+window.location.pathname,duration:e()};var L=Y["media-content"]||false;if(L){var W,S,V={},X=false,d=false,N=false;var R=function(g,c){return(g.indexOf(c)>-1)?true:false;};for(P=0;P<L.length;P++){var b=L[P]["@attributes"],M=b.url;if(b.type==="video/mp4"){if(!X){X=true;N=b;}if(R(M,"_LOW")){V.LOW=b;d=b;}else{if(R(M,"_MED")){V.MED=b;}else{if(R(M,"_HIGH")){V.HI=b;}}}}else{if(b.type==="application/x-mpegURL"&&R(M,".m3u8")){V.STREAM=b;}}}if(X){if(!V.LOW){V.LOW=(V.MED)?V.MED:(V.HI)?V.HI:N;}if(!V.MED){V.MED=(V.LOW)?V.LOW:(V.HI)?V.HI:N;}if(!V.HI){V.HI=(V.LOW)?V.LOW:(V.MED)?V.MED:N;}}S=0;for(W in V){S++;break;}V=(S>0)?V:false;Q.htmlFive=V;}if(O.length>0){Q.PLVideos=O;}return Q;},grab:function(T){var Q,P=this.root,L=P._helper;if(typeof T.channel.item==="undefined"){return false;}var S=T.channel.item,M=[];if(S instanceof Array){for(Q=0;Q<S.length;Q++){M.push(S[Q]);}S=T.channel.item[0];}if(!S["media-group"]){return false;}var K=S["media-group"];function O(){if(typeof K["media-thumbnail"][0]!=="undefined"){var U=K["media-thumbnail"][0];return(U["@attributes"].url)?U["@attributes"].url:"";}return"";}function R(){try{return K["media-content"][0]["@attributes"].duration;}catch(U){B("[videoPlayer.feedParser.grab] Get Duration error: "+U);return"0";}}var N={url:S.link,title:S.title,description:S.description,shortDescription:S["grab-short_description"],keywords:K["media-keywords"],thumbnail:O(),guid:S.guid,channel:S["grab-channel"],playlist:S["grab-playlist"],personality:S["grab-personality"],format:S["grab-format"],show:S["grab-show"],category:K["media-category"],creationDate:L.convertGrabDate(S.pubDate),loc:"http://"+window.location.host+window.location.pathname,duration:R()};if(M.length>0){N.PLVideos=M;}return N;},legacy:function(S){var Q,P=this.root,L=P._helper;if(typeof S.channel.item==="undefined"){return false;}var R=S.channel.item,N=[];if(R instanceof Array){for(Q=0;Q<R.length;Q++){N.push(R[Q]);}R=S.channel.item[0];}if(!R["media-content"]){return false;}var K=R["media-content"];if(!K["media-credit"]){return false;}var M=K["media-credit"];var O={url:K["@attributes"].url,title:R.title,description:K["media-description"],keywords:K["media-keywords"],thumbnail:K["media-thumbnail"],guid:K["mvn-assetUUID"],mavenid:K["mvn-mavenId"],channel:(K["mvn-fnc_channel"])?K["mvn-fnc_channel"]:K["mvn-fbn_channel"],playlist:K["mvn-fnc_default_playlist"],personality:(K["mvn-fnc_personality"])?K["mvn-fnc_personality"]:K["mvn-fbn_personality"],format:(K["mvn-fnc_format"])?K["mvn-fnc_format"]:K["mvn-fbn_format"],show:(K["mvn-fnc_show"])?K["mvn-fnc_show"]:K["mvn-fbn_show"],category:(K["mvn-fnc_category"])?K["mvn-fnc_category"]:K["mvn-fbn_category"],creationDate:L.convertDate(K["mvn-creationDate"]),shortDescription:K["mvn-shortDescription"],loc:"http://"+window.location.host+window.location.pathname,duration:(K["mvn-duration"])?K["mvn-duration"]:(K["mvn-videoSeconds"])?K["mvn-videoSeconds"]:0};if(N.length>0){O.PLVideos=N;}return O;}};MvPlayer.prototype._helper={cacheBuster:function(L){L=L||false;var K=new Date(),M=K.getFullYear().toString()+(K.getMonth()+1).toString()+K.getDate().toString();switch(L){case"h":M+=(K.getHours()+1).toString();break;case"30m":M+=(K.getHours()+1).toString()+((K.getMinutes()%30===0)?"1":"0");break;default:M+=(K.getHours()+1).toString();}return M;},isPlayFileReady:function(K){K=K||false;if(!K){return false;}return(typeof K.playFile!=="undefined")?true:false;},formatVideoId:function(M,K,L){K=K||false;L=L||false;if(L){M=M.split("").reverse().join("");}if(K){return M.replace(/\:/gi,"_");}else{return M.replace(/\_/gi,":");}},convertGrabDate:function(M){M=M||false;if(!M){return"";}var L=new Date(M),K=["January","February","March","April","May","June","July","August","September","October","November","December"];if(isNaN(L.getTime())){return"";}return K[L.getMonth()]+" "+L.getDate()+", "+L.getFullYear();},convertDate:function(M){if(typeof M!=="undefined"){var K=["January","February","March","April","May","June","July","August","September","October","November","December"],L=M.toString().split("T");L=L[0].split("-");L=new Date(L[0],(L[1]-1),L[2]);return K[L.getMonth()]+" "+L.getDate()+", "+L.getFullYear();}else{return"";}},extractVideoId:function(L){var K=L.replace(/^(http:\/\/)?[a-zA-Z0-9\.]+/,"");K=(K.indexOf("#")===0)?K.substring(2):K.substring(1);return K.substring(0,K.indexOf("/"));},extractCategoryId:function(K){return K.split("category_id=")[1];},cleanTitle:function(K){K=K.replace(/\s+/g,"-").toLowerCase();return K.replace(/[^a-z0-9\-]/g,"");},cleanHref:function(K){return K.replace(/^(http:\/\/)?[a-zA-Z0-9\.]+/,"");},cleanImageUrl:function(K){return K.replace("http://media2.foxnews.com","");},convertTime:function(L){var M=Math.floor(L/60),K=Math.floor(L%60);K=(K<10)?"0"+K:K;return M+":"+K;},videoObjectJSON:function(K){return this.root.feedParser.legacy(K);}};function A(L,N){L=L||999999;N=N||25;function M(){return(Math.floor(Math.random()*L)%2===1)?true:false;}function P(){var R=(M())?97:65;return String.fromCharCode(R+Math.round(Math.random()*25));}function O(){return Math.floor(Math.random()*10);}function Q(){return(M())?P():O();}function K(){var S,R=[];for(S=0;S<(N-1);S++){R.push(Q());}R.sort(function(){return 0.5-Math.random();});return P()+R.join("");}return K();}var G=(function(){var L={dm:"Agent",vcm:"i",ox:"vt"};var P=function(T){this.main=T;this.video={};this.prefix={controls:"player-controls-",playPause:"playpause-",fullScreen:"fullscreen-",loadPct:"load-counter-"};this.prefix.time={current:"time-current",duration:"time-duration"};this.controlsHTML='<strong>listeners:</strong>  <a id="'+this.prefix.playPause+'${id}" href="#">${playState}</a> | Current Time: <span id="'+this.prefix.time.current+'${id}">00:00</span> | Duration Time: <span id="'+this.prefix.time.duration+'${id}">00:00</span>';L.ol={arg:"P",lmp:"COM",rd:"USER"};this.listeners=new Q(this);this.TYPE=new O(this);this.EVENTS=new N(this);this.PROPERTIES=new S(this);this.STATES=new R(this);this.CONTROLS=new K(this);this.ADS=new M(this);};P.prototype={init:function(T){T=T||false;if(T){var U;for(U in T){this["_"+U]=T[U];}}if(!this.compatible()){return false;}return true;},compatible:function(){function U(){var W=window.location.hostname,V=W.indexOf("."),X=W.substring(0,V);return(X.toLowerCase()["indexOf"]("pvw")>-1)?true:false;}function T(){return I();}if(this.helper.getQuery("_"+L.ox+L.ol.lmp.toLowerCase()+L.ol.arg.toLowerCase())==="y"){return I();}else{return(I()&&F())?true:false;}},check:function(T){return this.compatible();},create:function(T){},load:function(a,X){var V=this,T=this.main;if(!this.check(a)){return false;}var U=function(){T.holderObj[a].elm.data("pandora",false);T.holderObj[a].elm.data("pandoraLoaded",false);if(F()){if(T._callbacksObj[a]){if(T._callbacksObj[a].deviceRenderFailed){T._callbacksObj[a].deviceRenderFailed();}}}else{T.embed.player(a);}};if(T.dataObj[a]){var W=T.dataObj[a],Z=T.holderObj[a];X=(typeof X==="undefined")?Z.vAttr.autoplay:X;if(!W.htmlFive){U();}else{var Y=(function(){var b=false;if(W.htmlFive.STREAM){b=W.htmlFive.STREAM.url;}else{if(W.htmlFive.LOW){b=W.htmlFive.LOW.url;}else{if(W.htmlFive.MED){b=W.htmlFive.MED.url;}else{if(W.htmlFive.HI){b=W.htmlFive.HI.url;}}}}return b;}());if(!Y){U();return false;}if(window.useAkamaiHTML5){V.TYPE.AKAMAI(W,a,Y,X);}else{V.TYPE.LEGACY(W,a,Y,X);}}}else{T.feed.get({id:a,autoplay:X});}}};P.prototype.helper={replaceStr:function(W,U,V){var T=W.indexOf(U);while(T!==-1){W=W.replace(U,V);T=W.indexOf(U);}return W;},formatTime:function(W){W=parseInt(W,10);var V=Math.floor(W/360),U=Math.floor(W/60),T=W%60;function X(Y){return(Y<10)?"0"+Y:Y;}return((V>0)?X(V):"")+X(U)+":"+X(T);},getQuery:function(W){var T,V=(window.location.search).substr(1),X=V.split("&");for(T=0;T<X.length;T++){var U=X[T].split("=");if(U[0]===W){return U[1];}}return false;}};var O=(function(){var T=function(U){this.root=U;};T.prototype.LEGACY=function(Z,U,c,W){var d=this,a=this.root,X=a.main,Y=X.holderObj[U].elm,V=(typeof X._config.display.clickThruImage==="undefined")?false:(typeof X._config.display.clickThruImage!=="object")?X._config.display.clickThruImage:X._config.display.clickThruImage.render;if(!Y.data("pandoraLoaded")){X.embed.player(U);}else{var b=function(){var g,e=X.holderObj[U],n=(e.elm.data("autoplay"))?true:false,j=e.elm.parent(),k=[],m=[],h="width|height";for(g in e.vAttr){if(g==="format"){k.push('class="'+e.vAttr[g]+' pandora-player"');}else{if(g==="id"){var f=X.setPlayerMap({type:"get",vId:e.vAttr[g]});X.setPlayerMap({type:"set",vId:U,domId:f});k.push('id="'+f+'"');}else{if(h.indexOf(g)>-1){m.push(g+":"+e.vAttr[g]+";");}}}}var l=m.join(" ");newVideo='<video controls="" '+k.join(" ")+' src="'+c+'" style="'+l+'"></video>';j.get(0).innerHTML=newVideo;j.find("video:first").each(function(){var i=C(this);i.data("pandora",true);i.data("pandoraLoaded",true);i.data("autoplay",n);a.video[U]={elm:i,nativeElm:i.get(0)};a.listeners.init(U);if(X._callbacksObj[U]){if(X._callbacksObj[U].dataChanged){X._callbacksObj[U].dataChanged(Z);}}if(V||n){a.CONTROLS.play(U);}X.thirdParty.akamaiMediaAnalytics(i.attr("id"));a.ADS.set({id:U,elm:j,url:c,dim:e.dim});});};a.ADS.load(function(){b();});}};T.prototype.AKAMAI=function(o,g,W,b){var d=this,k=d.root,Y=k.main;var Z=function(p){return p.replace(/[^0-9]/gi,"");};var m=Y.holderObj[g],a=Z(g),X=(m.elm.data("autoplay"))?true:false,f=m.elm.parent(),j=m.vAttr,h=Z(j.width),e=Z(j.height),U=Y._config.player,l=(!U.environment)?"":(window.location.search.indexOf("venv=prod")>-1)?"":(U.environment==="beta")?"beta.":"",n=l+Y._videoDomain,i="http://"+n,V=[];if(b){V.push("autoplay=true");}V=(V.length>0)?"&"+V.join("&"):"";var c='<iframe src="'+i+"/v/html5-embed.html?video_id="+Z(g)+"&w="+h+"&h="+e+V+'" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="'+h+'" height="'+e+'" style="border:0;width:'+j.width+";height:"+j.height+'"></iframe>';f.get(0).innerHTML=c;};return T;}());var M=(function(){var T=function(U){this.root=U;this.zoneIdVal=(function(){var W=J.auditude_code.zoneId,V=W.fn2;switch(U._videoDomain){case"video.foxnews.com":V=W.fn2;break;case"video.foxbusiness.com":V=W.fb2;break;case"video.foxbusiness.com":V=W.fb;break;}return V;}());};T.prototype={set:function(m){if(!m){return false;}var c=this,e=this.root,d=(e.main.dataObj[m.id]&&e.main.dataObj[m.id].guid)?e.main.dataObj[m.id].guid:false,W=m.elm,g=m.url,h=m.dim,V=(m.userData)?m.userData:{};var j,X,Z,Y,f=window.FN_AUDITUDE||{};j=(f.adVideoId)?f.adVideoId:d;X=(f.adDomain)?f.adDomain:J.auditude_code.adDomain;Z=(f.zoneId)?f.zoneId:c.zoneIdVal;Y=(f.defaultAssetId)?f.defaultAssetId:J.auditude_code.defaultAssetId;j=(j)?[j,Y]:Y;V.mobile=(function(){var n=H();return(n)?n.dev:"false";}());B("mobile platform:"+V.mobile);V=(function(){var n=[];for(var o in V){n.push(o+"="+V[o]);}return n.join(";");}());var a=W.get(0),l=W.find("video:first"),k=l.get(0),U=false;var b={controls:true,style:{backgroundColor:"#000",width:l.width(),height:l.height()},handlers:{}};var i=aud.html5.AdPlayer(k,a,X,Z,b);i.subscribe(aud.events.init_complete,function(o,n){n.publish(aud.notifications.break_begin);}).subscribe(aud.events.break_begin,function(o,n){}).subscribe(aud.events.break_end,function(o,n){if(!U){k.src=g;k.load();k.play();}}).subscribe(aud.events.linear_ad_begin,function(p,o,n){}).subscribe(aud.events.linear_ad_end,function(p,o,n){}).subscribe(aud.events.non_linear_ad_begin,function(p,o,n){}).subscribe(aud.events.non_linear_ad_end,function(p,o,n){}).subscribe(aud.events.pause_playback,function(p,o,n){k.pause();}).subscribe(aud.events.resume_playback,function(p,o,n){k.play();}).init(j,{userData:V});},load:function(W){var V=this;if(!window.aud){var U=document.createElement("script");U.type="text/javascript";U.async=true;U.src="http://adunit.cdn.auditude.com:80/player/js/lib/plugin/1.2/aud.html5player.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(U);}C.loadAttempt(50,250,function(){return(window.aud&&aud.html5)?true:false;},function(){if(typeof W==="function"){W();}});}};return T;}());var Q=(function(){var T=function(U){this.root=U;};T.prototype={init:function(U){this.events(U);this.custom(U);},events:function(W){var V=this.root,U=V.main;V.video[W].elm.bind("loadstart",function(){if(U._callbacksObj[W]){if(U._callbacksObj[W].videoLoadStart){U._callbacksObj[W].videoLoadStart();}}C.removeData(V.video[W].elm,"Event_ended");V.EVENTS.loadStart(W);});V.video[W].elm.bind("progress",function(){V.EVENTS.progress(W);});V.video[W].elm.bind("loadedmetadata",function(){if(U._callbacksObj[W]){if(U._callbacksObj[W].videoMedaLoaded){U._callbacksObj[W].videoMetaLoaded();}}V.EVENTS.loadedMetaData(W);});V.video[W].elm.bind("ended",function(){if(U._callbacksObj[W]){if(U._callbacksObj[W].videoEnded){U._callbacksObj[W].videoEnded(V.CONTROLS);}}V.video[W].elm.data("Event_ended",true);V.EVENTS.ended(W);});V.video[W].elm.bind("playing",function(){if(U._callbacksObj[W]){if(U._callbacksObj[W].videoPlaying){U._callbacksObj[W].videoPlaying();}}V.EVENTS.playing(W);});V.video[W].elm.bind("pause",function(){if(U._callbacksObj[W]){if(U._callbacksObj[W].videoPause){U._callbacksObj[W].videoPause();}}V.EVENTS.pause(W);});V.video[W].elm.bind("timeupdate",function(){if(U._callbacksObj[W]){if(U._callbacksObj[W].videoTimeUpdate){U._callbacksObj[W].videoTimeUpdate();}}V.EVENTS.timeUpdate(W);});},custom:function(U){}};return T;}());var K=(function(){var T=function(U){this.root=U;};T.prototype={play:function(X){var V=this.root,U=V.main,W=U.setPlayerMap({type:"get",vId:X});if(typeof document.getElementById(W)!=="undefined"){document.getElementById(W).play();}},pause:function(X){var V=this.root,U=V.main,W=U.setPlayerMap({type:"get",vId:X});if(typeof document.getElementById(W)!=="undefined"){document.getElementById(W).pause();}},load:function(U){},canPlayType:function(U){},jumpTo:function(Y,X){if(isNaN(X)){return false;}var V=this.root,U=V.main,W=U.setPlayerMap({type:"get",vId:Y});if(typeof document.getElementById(W)!=="undefined"){document.getElementById(W).currentTime=X;}}};return T;}());var N=(function(){var T=function(U){this.root=U;};T.prototype={loadStart:function(X){var V=this.root,U=V.main,W=U.setPlayerMap({type:"get",vId:X});},progress:function(X){var U=this.root,W=U.STATES.buffered(X,{range:"end",val:0}),V=parseInt((W/U.STATES.duration(X))*100,10);},loadedMetaData:function(U){},timeUpdate:function(U){},ended:function(U){},playing:function(U){},pause:function(U){}};return T;}());var S=(function(){var T=function(U){this.root=U;};T.prototype={currentTime:function(Z,V){V=V||false;var U=this.root,Y=Math.round(U.video[Z].nativeElm.currentTime);if(!V){var X=U.helper.formatTime(Y),W=U.STATES.duration(Z,true);return(X>W)?W:X;}return Y;}};return T;}());var R=(function(){var T=function(U){this.root=U;};T.prototype={duration:function(Z,W){W=W||false;var V=this.root,U=V.main,Y=U.setPlayerMap({type:"get",vId:Z});if(typeof document.getElementById(Y)==="undefined"){return 0;}var X=Math.round(document.getElementById(Y).duration);if(!W){return V.helper.formatTime(X);}return X;},buffered:function(Y,W){W=W||false;if(!W){return false;}var V=this.root,U=V.main,X=U.setPlayerMap({type:"get",vId:Y});if(typeof document.getElementById(X)!=="undefined"){switch(W.range){case"length":return document.getElementById(X).buffered.length;case"start":return document.getElementById(X).buffered.start(W.val);case"end":return document.getElementById(X).buffered.end(W.val);}}return false;}};return T;}());return P;}());var E={set:function(){var K,N,L=this,M=arguments,O={elm:false,ratio:false,dim:false,position:false,size:false,hover:true};if(M.length===1&&typeof M[0]==="object"){for(N in M[0]){O[N]=M[0][N];}}else{for(K=0;K<M.length;K++){switch(K){case 0:O.elm=M[0];break;case 1:O.ratio=M[1];break;case 2:O.dim=M[2];break;case 3:O.position=M[3];break;case 4:O.size=M[4];break;case 5:O.useAltImg=M[5];break;case 6:O.altHover=M[6];break;}}}O.elm.each(function(){var Q=C(this),P=new Image(),R=O;R.elm=Q;if(R.dim){L.setOverlay(R);}else{P.onload=function(){R.dim=[P.width,P.height];L.setOverlay(R);};P.src=Q.find("img").attr("src");}});},useAbsImg:function(O,L){var S,K=["118","96","64","48","32","24","16"],R=false;if(!isNaN(O)){if(O>=K[0]){R=K[0];}else{for(S=0;S<K.length;S++){var M=K[S],Q=(K[S+1])?K[S+1]:0,P=Math.abs(M-O),N=Math.abs(M-Q);if(O<=M&&O>Q){R=(P>N)?Q:M;break;}}}}return(R)?R:false;},setOverlay:function(L){var K=this,S=L.elm,T=L.ratio||0.35,M=L.dim,N=L.position||"center",a=L.size||118,O=L.useAltImg,Z=L.altHover||false,R=true,W=false;var U="http://global.fncstatic.com/static/v/all/img/vp-overlay${dim}${hover}.png";function V(b){return Math.floor(b);}function Y(b){return b+"px";}function P(c){c=(Z)?((c)?false:true):c;var b;if(R&&W){b=W;}b=(b)?("-"+b):"";return U.replace("${dim}",b).replace("${hover}",(c)?"-hover":"");}function X(){var n=(M[1]<M[0])?M[1]:M[0],c=n*T;c=(c>a)?a:c;var k=c,e=k,l=false,h=false,g=false,b=false,j=0.03,d=0.05;j=V(M[0]*j);d=V(M[1]*d);switch(N){case"top right":h=j;g=d;break;case"bottom right":h=j;b=d;break;case"top left":l=j;g=d;break;case"bottom left":l=j;b=d;break;default:l=Math.floor((M[0]*0.5)-(k*0.5));g=Math.floor((M[1]*0.5)-(e*0.5));}var i={};if(h){i.right=Y(h);}if(l){i.left=Y(l);}if(g){i.top=Y(g);}if(b){i.bottom=Y(b);}if(R&&K.useAbsImg(k)){k=K.useAbsImg(k);e=k;W=k;}i.width=Y(k);i.minHeight=Y(e);var f=C('<span class="vid-overlay"><img style="position:absolute; display:inline;" src="'+P()+'"/></span>'),m=S.parent().find("> h3:first");f.find("img").css(i);S.find("a").css({position:"relative"});S.find("img").each(function(){var p=C(this),o=p.parent(),s=false;o.css({display:"block",padding:"0"}).prepend(f);var r=o.find(".vid-overlay"),t=r.find("img");function q(u){if(u&&!s){s=true;t.attr("src",P(true));}else{if(s){s=false;t.attr("src",P());}}}m.hover(function(){q(true);},function(){q();});o.hover(function(){q(true);},function(){q();});});}var Q=new Image();Q.src=P(true);X();}};function F(){return("createTouch" in document)?true:false;}function I(){var K=document.createElement("video");return(K.play)?true:false;}function D(K){K=K||false;return Object.prototype.toString.call(K)==="[object Array]";}function H(){var K={};if(navigator.userAgent.match(/iPhone/i)){K.mobile="ios";K.dev="iPhone";}else{if(navigator.userAgent.match(/iPod/i)){K.mobile="ios";K.dev="iPod";}else{if(navigator.userAgent.match(/iPad/i)){K.mobile="ios";K.dev="iPad";}else{K=false;}}}return K;}function B(L){try{FOX.utils.debug(L);}catch(K){if(typeof window.console==="object"&&window.location.search.indexOf("stc=y")>-1){console.log(L);}}}(function(){var L=function(){var T,N,Q=this,R=arguments;if(R.length===0){return false;}var P={attempt:0,timeout:500};if(R.length===1&&typeof R[0]==="object"){for(T in R[0]){P[T]=R[0][T];}if(!P.callback){return false;}else{N=P.callback;}if(!N.check||!N.success){return false;}else{P._check=N.check;P._success=N.success;}if(N.timedOut){P._timeout=N.timedOut;}}else{if(!isNaN(R[0])&&!isNaN(R[1])&&K(R[2])&&K(R[3])){P.attempt=R[0];P.timeout=R[1];P._check=R[2];P._success=R[3];if(R[4]){P._timeout=R[4];}if(R[5]){P._abort=R[5];}}else{if(K(R[0])&&K(R[1])){P._check=R[0];P._success=R[1];if(R[2]){P._timeout=R[2];}if(R[3]){P._abort=R[3];}}else{return false;}}}if(!K(P._check)||!K(P._success)){return false;}if(!K(P._timeout)){P._timeout=function(){};}if(isNaN(P.timeout)){return false;}else{P.timeout=M(P.timeout);}if(isNaN(P.attempt)){return false;}else{P.attempt=M(P.attempt);}var U=false,O=false;if(P.attempt&&P.timeout){var S=function(){if(O){clearTimeout(U);}else{if(P._check()){P._success();clearTimeout(U);}else{if(P.attempt>0){U=setTimeout(function(){S();},P.timeout);}else{P._timeout();}}}P.attempt--;};S();}else{U=setInterval(function(){if(O){clearInterval(U);}else{if(P._check()){P._success();clearInterval(U);}}},P.timeout);}return{abort:function(){O=true;}};};function M(N){return parseInt(N,10);}function K(N){return(typeof N==="function")?true:false;}if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:L});}else{if(!window.loadAttempt){window.loadAttempt=L;}}}());}(jQuery));(function(D){function E(){this.listenersArr=[];this.version="03.31.2010";}E.prototype={append:function(H){H=H||false;if(!H||!H.elm){return false;}var I=this,J=new G();J.init(H);this.listenersArr.push({fn:J,config:H});this.trigger(J);},trigger:function(I){I=I||false;var K=this;if(I){I.trigger();}else{var H;for(H=0;H<K.listenersArr.length;H++){var J=K.listenersArr[H].fn;K.helper.removeListener(J._elm,I.thisEventList);J.trigger();}}},reTriggerListener:function(){var H=this;D(document).ready(function(){var M=500,I=10000,K=0,L=D("iframe").size();function J(){if(L!==K){K=L;}else{M=Math.floor(M/3)+M;}if(M<I){H.trigger();setTimeout(function(){J();},M);}}J();});}};E.prototype.helper={removeListener:function(I,H){I.each(function(){var J,K=D(this);if(A(H)){for(J=0;J<H.length;J++){K.unbind(H[J]);}}else{K.unbind(H);}});}};function G(){this._elm=false;this._eventsCallback={};this._moveSensitivity=15;this.properties={scale:{},move:{origin:{},current:{},diff:{}}};this.thisEventList=["touchstart","touchend","touchmove","gesturestart","gestureend"];}G.prototype={init:function(H){var I;for(I in H){this["_"+I]=H[I];}this.testElm={coords:D("#coords"),start:D("#start"),diff:D("#diff")};this.logger=new B();this.logger.init();},trigger:function(){var H=this;this._elm.each(function(){H.setListeners(D(this));});},setListeners:function(I){I=I||false;if(!I){return false;}var H=this,K=I.get(0);I.bind("touchstart",function(L){var M=L.originalEvent;H._elm.data("EVENT_touchstart.trigger",true);H._elm.data("EVENT_touchmove.setOrigin",false);H._elm.data("EVENT_touchmove.directionalOnce",false);if(H._eventsCallback.touchstart){H._eventsCallback.touchstart(M);}});I.bind("touchend",function(L){var M=L.originalEvent;H._elm.data("EVENT_touchstart.trigger",false);H._elm.data("EVENT_touchmove.directionalOnce",false);if(H._eventsCallback.touchend){H._eventsCallback.touchend(M);}});I.bind("touchmove",function(N){var Q=N.originalEvent,P=Q.touches[0].pageX,O=Q.touches[0].pageY;H.properties.move.current={x:P,y:O};if(!H._elm.data("EVENT_touchmove.setOrigin")){H.properties.move.origin.x=P;H.properties.move.origin.y=O;H._elm.data("EVENT_touchmove.setOrigin",true);}var L={x:H.properties.move.origin.x,y:H.properties.move.origin.y};H.properties.move.diff={x:P-L.x,y:O-L.y};if(H._eventsCallback.touchmoveRaw){H._eventsCallback.touchmoveRaw(H.properties.move,Q);}function M(){var S=H._moveSensitivity,T=[];function R(){H._elm.data("EVENT_touchmove.directionalOnce",true);}if(P>=L.x+S){T.push("right");H.logger.log("going right");}else{if(P<=L.x-S){T.push("left");H.logger.log("going left");}}if(O<=L.y-S){T.push("up");H.logger.log("going up");}else{if(O>=L.y+S){T.push("down");H.logger.log("going down");}}if(H._eventsCallback.touchmoveMoveOnce){H._eventsCallback.touchmoveMoveOnce(T,H.properties.move,Q);}if(T.length>0){R();}}if(!H._elm.data("EVENT_touchmove.directionalOnce")){M();}});I.bind("gesturestart",function(L){var M=L.originalEvent,N=H.helper.setScale(M.scale);H.properties.scale.current=H.properties.scale.current||N;if(H._eventsCallback.gesturestart){H._eventsCallback.gesturestart(M);}H.properties.scale.changed=false;});I.bind("gestureend",function(L){var M=L.originalEvent,N=H.helper.setScale(M.scale);if(H._eventsCallback.gestureend){H._eventsCallback.gestureend(M);}if(H.properties.scale.current!==N){H.properties.scale.current=N;H.properties.scale.changed=true;H.logger.log("Scale changed to: "+N);if(H._eventsCallback.scaleChange){H._eventsCallback.scaleChange(N,M);}}});var J=D(window);if(!J.data("EVENT_orientationchange")){J.bind("orientationchange",function(L){var M=L.originalEvent;H.logger.log("Orientation change: "+H.helper.orientation(window.orientation,M));});J.data("EVENT_orientationchange",true);}if(H._eventsCallback.orientationchange){J.bind("orientationchange",function(L){var M=L.originalEvent;H._eventsCallback.orientationchange(H.helper.orientation(window.orientation,M));});}}};G.prototype.helper={setScale:function(H){if(!isNaN(H)){return Math.round(H*100)/100;}},orientation:function(I){if(!isNaN(I)){var H=Math.abs(I);return(H===0||H===180)?"vertical":"horizontal";}}};function C(H){if(typeof window.console==="object"){console.log(H);}}function A(H){H=H||false;return Object.prototype.toString.call(H)==="[object Array]";}var B=function(){};B.prototype={init:function(){this.elm=D("#console ul:first");},log:function(H){if(this.getQuery("log")!=="y"){return false;}if(this.elm.size()>0){H="<li>"+H+"</li>";this.elm.append(H);}else{C(H);}},getQuery:function(L){var H,J=(window.location.search).substr(1),K=J.split("&");for(H=0;H<K.length;H++){var I=K[H].split("=");if(I[0]===L){return I[1];}}return false;}};var F=window.touchEventListener=new E();}(jQuery));window.ClientStorageManager=(function(F){var C={},K={_namespace:"ClientStorageManager",_prefix:"FoxCSM_",_cookiePrefix:"FXcsm",_cookiePersistence:30,_showConsole:false,_frameSrc:"/static/v/all/html/IEStore.html",_splitVars:"|#|"};var E=function(){this.dataObj=null;this.initialized=false;this.type=null;this.customType=false;this.control=new B(this);this.init();};E.prototype={init:function(){var L=this,M=A();L.setProperties();L.storageInstance=new H(L,{namespace:K._namespace,prefix:K._prefix,type:M});L.type=M;L.initialized=true;D("[init] Initialized: "+L.type);if(L.type.toLowerCase().indexOf("cookie")>-1){D("[init] Warning: cookie storage maxes out at 4kb only!");}},setProperties:function(){var M,P=(F.location.search).substr(1),Q=P.split("&"),L=Q.length,N={};for(M=0;M<L;M++){var O=Q[M].split("=");N[O[0]]=decodeURIComponent(O[1]);}if(N.showConsole){K._showConsole=true;}},set:function(){var N,L=this,M=arguments,O;var P=function(T){switch(T.key){case"type":var S=T.value;switch(S){case"session":S=(F.sessionStorage)?"sessionStorage":"sessionCookie";break;case"cookie":S="cookie";break;case"sessionCookie":S="sessionCookie";break;default:D("[set] Getting default storage..");S=A();}if(S===L.type){D("[set] Type already: "+S);break;}if(L.type==="MSIEStorage"){L.MSIEStorageInstance=L.storageInstance;}var R={namespace:K._namespace,prefix:K._prefix,type:S,prevType:L.type};var Q=(R.type==="MSIEStorage")?L.MSIEStorageInstance:new H(L,R);if(Q.initialized){G();I(CS,{customType:true,storageInstance:Q,type:R.type});L.control.root=CS;D("[set] Storage changed: "+R.prevType+" -> "+R.type);if(L.type.toLowerCase().indexOf("cookie")>-1){D("[set] Warning: cookie storage maxes out at 4kb only!");}}else{D("[set] Error setting type: "+S);}break;default:D("[set] Invalid property key: "+T.key);}};if(typeof M[0]==="object"){for(N in M[0]){P({key:N,value:M[0][N]});}}else{P({key:M[0],value:M[1]});}},saveItem:function(){var L=arguments,M=(L.length===1&&typeof L[0]==="object")?L[0]:{key:L[0],value:L[1]};this.control.saveItem(M);},deleteItem:function(L,M){var N={key:L};if(M){N.fn=M;}this.control.deleteItem(N);},getItem:function(M,N,L){this.control.getItem({key:M,fn:N,raw:L||false});},getAll:function(L){this.control.getAllItems(L);},clearAll:function(L){this.control.clearAll(L);}};var B=(function(){var M=function(N){this.root=N;};M.prototype={saveItem:function(P){var O=this,N=this.root;if(P.key&&P.value){var Q=L.formatValue(P.value);if(Q&&Q.length>0){N.storageInstance.save({key:O.setPrefix(P.key),value:Q,expire:(P.expire)?P.expire:0});if(typeof P.success!=="undefined"){O.attempts=0;O.checkData(P);}}}else{if(P.error){P.error("No Key or Value entered");}}},deleteItem:function(Q){var O=this,N=this.root,P=this.setPrefix(Q.key);var R=function(){N.storageInstance.deleteItem(P);D("[control] Storage Event: Delete");};if(Q.fn){Q.fn(R());}else{R();}},getItem:function(N){N.key=this.setPrefix(N.key);this.root.storageInstance.load(N);},getAllItems:function(N){this.root.storageInstance.getAll(N);},clearAll:function(P){var O=this,N=this.root;N.storageInstance.clearAll();D("[control] Storage Event: Clear All");if(typeof P==="function"){P();}},checkData:function(P){var O=this,N=this.root;O.getItem({key:P.key,raw:false,fn:function(R){if(R!==null){P.success({key:P.key,value:R,type:N.storageInstance.type});D("[control] Storage Event: Save");}else{var Q="[control] Error saving key: "+P.key;P.success=false;P.error(Q);D(Q);return null;}}});},setPrefix:function(N){var O="MSIEStorage|cookie|sessionCookie";return(O.indexOf(this.root.type)>-1)?N:L.addPrefix(K._prefix,N);}};var L={addPrefix:function(O,N){return O+this.trim(N);},removePrefix:function(O,N){return N.substr(O.length);},formatValue:function(N){return this.trim(N.toString());},trim:function(N){return N.replace(/^\s+|\s+$/g,"");}};return M;}());var H=(function(){var L=function(R,S){this.root=R;this.sessionStorage=new Q(this);this.localStorage=new N(this);this.globalStorage=new O(this);this.MSIEStorage=new M(this);this.cookieStorage=new P(this);return(this.init(S));};L.prototype={init:function(S){var R=this,T;R.initialzed=true;switch(S.type){case"MSIEStorage":I(S,{div:{id:"IEStorageSource",store:"xmldomstore"},frame:{src:K._frameSrc,id:"IEStorageSource",name:"DOMPersistentSource",store:"xmldomstore"}});T="MSIEStorage";break;case"cookie":I(S,{cookieName:K._cookiePrefix,sessionCookie:false});T="cookieStorage";break;case"sessionCookie":I(S,{cookieName:K._cookiePrefix+"s",sessionCookie:true});T="cookieStorage";break;default:T=S.type;}R[T].init(S);return R[T];}};var Q=function(R){this.root=R.root;this.main=R;};Q.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.initialized=true;},save:function(S){try{F.sessionStorage.setItem(S.key,S.value);}catch(R){D("[sessionStorage save] Error Saving: "+R);}},load:function(){var R=arguments;function S(T){return F.sessionStorage.getItem(T);}if(R.length===1&&typeof R[0]==="object"){R[0].fn(S(R[0].key));}else{return S(R[0]);}},deleteItem:function(R){F.sessionStorage.removeItem(R);},getAll:function(V){var S,T={},W=0,X=F.sessionStorage,R=X.length;for(S=0;S<R;S++){var U=X.key(S);if(U.indexOf(this.prefix)===0){T[U.substr(this.prefix.length)]=this.load(U);W++;}}V((W>0)?T:null);},clearAll:function(){var S,U,W=[],X=F.sessionStorage,R=X.length;for(S=0;S<R;S++){var V=X.key(S);if(V.indexOf(this.prefix)===0){W.push(X.key(S));}}var T=W.length;for(U=0;U<T;U++){this.deleteItem(W[U]);}return true;}};var N=function(R){this.root=R.root;this.main=R;};N.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.expire=new J();this.initialized=true;this.removeExpired();},save:function(T){var R="";if(T.expire){R=(this.expire.setToExpire(T.expire))?this.expire.set(T.expire):"";}try{F.localStorage.setItem(T.key,T.value.toString()+R);}catch(S){D("[localStorage save] Error Saving: "+S);}},load:function(){var R=this,S=arguments;function T(V,U){var W=F.localStorage.getItem(V);if(W){if(R.expire.isStale(W)){R.deleteItem(V);}else{return(!U)?R.expire.removeExpireStr(W):W;}}return null;}if(S.length===1&&typeof S[0]==="object"){S[0].fn(T(S[0].key,S[0].raw||false));}else{return T(S[0],S[1]||false);}},deleteItem:function(R){F.localStorage.removeItem(R);},getAll:function(V){var S,T={},W=0,X=F.localStorage,R=X.length;for(S=0;S<R;S++){var U=X.key(S);if(U.indexOf(this.prefix)===0){T[U.substr(this.prefix.length)]=this.load(U);W++;}}V((W>0)?T:null);},clearAll:function(){var S,U,W=[],X=F.localStorage,R=X.length;for(S=0;S<R;S++){var V=X.key(S);if(V.indexOf(this.prefix)===0){W.push(X.key(S));}}var T=W.length;for(U=0;U<T;U++){this.deleteItem(W[U]);}return true;},removeExpired:function(){var S,U,V=[],W=F.localStorage,R=W.length;for(S=0;S<R;S++){V.push(W.key(S));}var T=V.length;for(U=0;U<T;U++){if(V[U].indexOf(this.prefix)===0&&this.expire.isStale(W[V[U]])){this.deleteItem(V[U]);}}}};var O=function(R){this.root=R.root;this.main=R;};O.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.expire=new J();this.initialized=true;this.removeExpired();},save:function(T){var R="";if(T.expire){R=(this.expire.setToExpire(T.expire))?this.expire.set(T.expire):"";}try{F.globalStorage[document.domain][T.key]=T.value.toString()+R;}catch(S){D("[globalStorage save] Error Saving: "+S);}},load:function(){var R=this,S=arguments;function T(V,U){if(typeof F.globalStorage[document.domain][V]==="undefined"){return null;}var W=F.globalStorage[document.domain][V].value;if(R.expire.isStale(W)){R.deleteItem(V);}else{return(!U)?R.expire.removeExpireStr(W):W;}return null;}if(S.length===1&&typeof S[0]==="object"){S[0].fn(T(S[0].key,S[0].raw||false));}else{return T(S[0],S[1]||false);}},deleteItem:function(R){delete F.globalStorage[document.domain][R];},getAll:function(V){var S,T={},W=0,X=F.globalStorage[document.domain],R=X.length;for(S=0;S<R;S++){var U=X.key(S);if(U.indexOf(this.prefix)===0){T[U.substr(this.prefix.length)]=this.load(U);W++;}}return V((W>0)?T:null);},clearAll:function(){var S,U,W=[],X=F.globalStorage[document.domain],R=X.length;for(S=0;S<R;S++){var V=X.key(S);if(V.indexOf(this.prefix)===0){W.push(X.key(S));}}var T=W.length;for(U=0;U<T;U++){this.deleteItem(W[U]);}return true;},removeExpired:function(){var R;for(R in globalStorage[document.domain]){if(R.indexOf(this.prefix)===0&&this.expire.isStale(globalStorage[document.domain][R].value)){this.deleteItem(R);}}}};var M=function(R){this.root=R.root;this.main=R;};M.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.expire=new J();this.initialized=false;this.isDocReady=false;var T=document.createElement("iframe");T.setAttribute("src",this.frame.src+"?n="+R.namespace+"&s="+this.frame.store);T.setAttribute("id",this.frame.id);T.setAttribute("name",this.frame.name);T.setAttribute("width","5");T.setAttribute("height","5");T.setAttribute("style","visibility:hidden;position:absolute;top:0px;left:-9999px;");this.iframe=T;this.setFrame();},save:function(T){if(!this.initialized){return false;}if(!this.dataObj){this.dataObj={};}var R="";if(typeof T.expire!=="undefined"){R=(this.expire.setToExpire(T.expire))?this.expire.set(T.expire):"";}this.dataObj[T.key]=T.value.toString()+R;try{this.dataStorage.reloadIEStorage();return true;}catch(S){D("[IEStorage save] Error Saving: "+S);return false;}},load:function(){var R=this,S=arguments;function W(Y,X){if(!R.initialized){return null;}var a=R.dataObj;if(a[Y]){var Z=a[Y];if(R.expire.isStale(Z)){R.deleteItem(Y);}else{return(!X)?R.expire.removeExpireStr(Z):Z;}}return null;}if(S.length===1&&typeof S[0]==="object"){var U=0,V=S[0];var T=function(){if(R.initialized){clearTimeout(C.IELoad);if(R.dataObj){var X=V.raw||false;V.fn(W(V.key,X));}else{V.fn(null);}}else{C.IELoad=setTimeout(function(){T();},50);}};T();}else{return W(S[0],S[1]||false);}},deleteItem:function(R){if(this.initialized){delete this.dataObj[R];this.dataStorage.reloadIEStorage();}},getAll:function(T){var R=this,U=0;function S(){if(R.initialized){clearTimeout(C.IEGetAll);if(typeof R.dataObj!=="undefined"){var V,Y={},W=0;for(V in R.dataObj){var X=R.load(V);if(X){Y[V]=X;W++;}}return T((W>0)?Y:null);}return T(null);}else{if(U>=2){clearTimeout(C.IEGetAll);return T(null);}else{U++;C.IEGetAll=setTimeout(function(){S();},50);}}}S();},clearAll:function(){if(this.initialized){delete this.dataObj;this.dataStorage.reloadIEStorage();}},removeExpired:function(){if(this.initialized){var R,S=this.dataObj;for(R in S){if(this.expire.isStale(S[R])){delete S[R];}}this.dataObj=S;this.dataStorage.reloadIEStorage();}},loadClientData:function(R){this.dataObj=this.processStrToObj(R);},processStrToObj:function(V){var S,W={},U=V.split(K._splitVars),R=U.length;for(S=0;S<R;S++){var T=U[S].split("=");W[T[0]]=decodeURIComponent(T[1]);}return W;},processObjToStr:function(T){var R,S=[];if(T){for(R in T){S.push(R+"="+encodeURIComponent(T[R]));}}return(S.length>0)?S.join(K._splitVars):"";},setFrame:function(){var R=this;document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);S();}});if(document.documentElement.doScroll&&F===F.top){(function(){if(R.isDocReady){return ;}try{document.documentElement.doScroll("left");}catch(T){setTimeout(arguments.callee,50);return ;}S();}());}function S(){if(!document.getElementById(R.frameId)){document.documentElement.appendChild(thisObj.iframe);}thisObj.isDocReady=true;thisObj.removeExpired();}}};var P=function(R){this.root=R.root;this.main=R;};P.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.expire=new J();this.initialized=true;this.removeExpired();},save:function(S){var W=this.getStorageCookie(),U,R="";if(S.expire&&!this.sessionCookie){if(this.expire.setToExpire(S.expire)){R=this.expire.set(S.expire,"cookieValue");}}var T=encodeURIComponent(S.value.toString())+R;if(W){var V=this.processStrToObj(W);V[S.key]=T;U=this.processObjToStr(V);}else{U=S.key+"="+T;}if(U){this.saveCookie(U);return true;}},saveCookie:function(U){var R=(!this.sessionCookie)?("; expires="+this.expire.set(K._cookiePersistence,"cookie")):"",S=this.cookieName+"="+K._splitVars+U+R+"; path=/";try{document.cookie=S;}catch(T){D("[Cookie save] Error Saving: "+T);}},load:function(){var R=this,S=arguments;function T(W,V){var U=R.getStorageCookie();if(U){var Y=R.processStrToObj(U);if(Y[W]){var X=Y[W];if(R.expire.isStale(X)){R.deleteItem(W);}return(!V)?R.expire.removeExpireStr(X):X;}}return null;}if(S.length===1&&typeof S[0]==="object"){S[0].fn(T(S[0].key,S[0].raw||false));}else{return T(S[0],S[1]||false);}},deleteItem:function(S){var R=this.getStorageCookie();if(R){var T=this.processStrToObj(R);if(T[S]){delete T[S];}this.saveCookie(this.processObjToStr(T));}},getAll:function(T){var R=this.getStorageCookie(),V={},U=0;if(R){var S,W=this.processStrToObj(R);for(S in W){if(W[S]){if(this.expire.isStale(W[S])){delete W[S];}else{V[S]=W[S];U++;}}}return T((U>0)?V:null);}return T(null);},clearAll:function(){this.saveCookie("");},removeExpired:function(){var R=this.getStorageCookie();if(R){var S,T=this.processStrToObj(R);for(S in T){if(T[S]){if(this.expire.isStale(T[S])){delete T[S];}}}this.saveCookie(this.processObjToStr(T));}},getStorageCookie:function(){var S,V,U=document.cookie.split(";"),R=U.length;for(S=0;S<R;S++){var T=U[S].replace(/^\s+|\s+$/g,"");if(T.substring(0,this.cookieName.length+1)===this.cookieName+"="){return decodeURIComponent(T.substring(this.cookieName.length+1));}}return null;},processStrToObj:function(V){var S,W={},U=V.split(K._splitVars),R=U.length;for(S=0;S<R;S++){var T=U[S].split("=");if(T[1]){W[T[0]]=T[1];}}return W;},processObjToStr:function(T){var R,S=[];for(R in T){if(R.length>0){S.push(R+"="+T[R]);}}return S.join(K._splitVars);}};return L;}());var A=function(){if(F.localStorage){return"localStorage";}else{if(F.globalStorage){return"globalStorage";}else{return"cookie";}}};var I=function(N,L){var M;for(M in L){N[M]=L[M];}return N;};var G=function(){var L;for(L in C){clearTimeout(C[L]);}};var D=function(L){if(typeof F.console==="object"&&K._showConsole){console.log(L);}};var J=function(){this.defaultExpire=14;this.expireStr="<!#[${value}]>";this.expireRegex=/\<!#\[(.+)\]>/;};J.prototype={now:function(){return(new Date());},set:function(L,M){L=L||this.defaultExpire;M=M||null;addTime=(L*24*3600000);var N=new Date(this.now().getTime()+addTime);switch(M){case"cookie":L=N.toUTCString();break;default:L=this.expireToStr(this.simpleDateStr(N));}return L;},simpleDateStr:function(L){var N=(L.getUTCMonth()+1)+"/"+L.getUTCDate()+"/"+L.getUTCFullYear(),M=L.getHours()+":"+L.getMinutes();return N+" "+M;},setToExpire:function(L){L=L||0;if(typeof L==="number"&&L>0){return true;}return false;},getExpire:function(N,M){var L=N.match(this.expireRegex);if(L){return(M)?L[0]:L[1];}return false;},isStale:function(M){var L=this.getExpire(M);if(L){return(this.hasExpired(L))?true:false;}return false;},hasExpired:function(M){var L=this.convert(M);return(this.now()>L)?true:false;},convert:function(M){var L=new Date(M);if(typeof M==="string"&&L.toString()==="Invalid Date"){L=new Date(parseInt(M,10));}return(L);},expireToStr:function(L){return this.expireStr.replace("${value}",L);},removeExpireStr:function(L){return L.replace(this.expireRegex,"");}};return(new E());}(window));(function(B){window.FoxISATracker=function(){this.dataObj={trigger:{pageLoad:false}};this.initialized=false;};FoxISATracker.prototype={init:function(C){if(!C){return false;}if(this.initialized){A("[ISA Tracker] Already Initialized");return false;}this.initialized=true;this.control.root=this;this.set(C);},set:function(E){if(!E){return false;}if(!this.initialized){this.init(E);}var D;for(D in E){var F,C=E[D];for(F in C){if(!this.dataObj.trigger[F]){this.dataObj.trigger[F]={};}this.dataObj.trigger[F][D]=C[F];}}},track:function(F,G){this.control.count(F);var C=this.dataObj.trigger;if(!C[F]){A("[ISA Tracker] No event specified for: "+F);return false;}var D,E=C[F];for(D in E){this.control.execTrigger({event:F,trigger:E[D],data:G,count:E._count});}}};FoxISATracker.prototype.control={count:function(F){F=F||false;if(!F){return false;}var C=this.root,D=C.dataObj.trigger;if(!D[F]){return false;}var E=((!isNaN(D[F]._count))?D[F]._count:0)+1;C.dataObj.trigger[F]._count=E;},execTrigger:function(F){if(typeof F!=="object"){return false;}if(!F.trigger){return false;}var C=F.event||false,D=F.trigger.frequency||false,J=F.trigger.callback||false,G=F.data||false,E=F.trigger||false,H=F.count||false;if(!C||isNaN(D)||!E){return false;}var K=this,I=this.root;if(typeof J==="function"){if(C==="pageLoad"&&H===1){J(G);}else{if(C.indexOf("click")===0){J(G);}else{if(H>1&&H%D===0){J(G);}}}}}};function A(D){try{FOX.utils.debug(D);}catch(C){if(typeof window.console==="object"&&window.location.search.indexOf("stc=y")){console.log(D);}}}}(jQuery));window.LocationLookup=(function(){var A={map:[{z:99500,s:"AK"},{z:98000,s:"WA"},{z:97000,s:"OR"},{z:96900,s:"XX"},{z:96700,s:"HI"},{z:96200,s:"AP"},{z:90000,s:"CA"},{z:89000,s:"NV"},{z:88500,s:"TX"},{z:87000,s:"NM"},{z:85000,s:"AZ"},{z:84000,s:"UT"},{z:83200,s:"ID"},{z:82000,s:"WY"},{z:80000,s:"CO"},{z:75000,s:"TX"},{z:73000,s:"OK"},{z:71600,s:"AR"},{z:70000,s:"LA"},{z:68000,s:"NE"},{z:66000,s:"KS"},{z:63000,s:"MO"},{z:60000,s:"IL"},{z:59000,s:"MT"},{z:58000,s:"ND"},{z:57000,s:"SD"},{z:56900,s:"DC"},{z:55000,s:"MN"},{z:53000,s:"WI"},{z:50000,s:"IA"},{z:48000,s:"MI"},{z:46000,s:"IN"},{z:43000,s:"OH"},{z:40000,s:"KY"},{z:38600,s:"MS"},{z:37000,s:"TN"},{z:35000,s:"AL"},{z:34000,s:"AA"},{z:32000,s:"FL"},{z:30000,s:"GA"},{z:29000,s:"SC"},{z:27000,s:"NC"},{z:24700,s:"WV"},{z:22000,s:"VA"},{z:20600,s:"MD"},{z:20000,s:"DC"},{z:19700,s:"DE"},{z:15000,s:"PA"},{z:10000,s:"NY"},{z:7000,s:"NJ"},{z:6000,s:"CT"},{z:5000,s:"VT"},{z:3900,s:"ME"},{z:3000,s:"NH"},{z:2800,s:"RI"},{z:1000,s:"MA"},{z:600,s:"PR"},{z:500,s:"NY"}],mapOneOff:{AK:98791,NY:6390,TN:42223,AM:96799},region:{Mountain:"AZ,CO,ID,MT,NM,NV,UT,WY",Northeast:"CT,DE,DC,MA,ME,MD,NJ,NH,NY,VT,PA,RI",West:"CA,AK,HI,OR,WA",Midwest:"IA,IL,IN,KS,MI,MN,ND,NE,OH,WI,SD,KY",South:"MO,AL,AR,LA,KT,MS,TN,TX,OK",Southeast:"VA,NC,SC,GA,FL,WV"},dma:{feed:"/feeds/json/zip-dma/Get_AFFDMA/${zip}/all",cb:"Get_AFFDMA"}};var C=function(F){if(typeof F==="object"&&F.region){A.region=F.region;}};C.prototype={getByZip:function(G){var F=G;G=(/(^\d{5}$)/.test(G))?parseInt(G,10):false;if(!G){return false;}var H=B(G),I=E(H);return({zip:F,state:H,region:I});},getByState:function(G){if(typeof G!=="string"){return false;}G=G.toUpperCase();var F,H=false;for(F in A.region){if(A.region[F].indexOf(G)>-1){H=E(G);break;}}return(H)?({state:G,region:H}):false;},getByDMA:function(H,G){if(typeof G!=="function"){return false;}var F=H;H=(/(^\d{5}$)/.test(H))?H:false;if(!H){return false;}D(H,function(I){if(!I){G(false);}G((I.dma&&I.region&&I.city)?({zip:F,state:I.region,region:I.city,dma:I.dma}):false);});}};var B=function(H){var G,J=A.map,F=A.mapOneOff;for(G in F){if(H===F[G]){return G;}}for(G=0;G<J.length;G++){var I=J[G];if(H>=I.z){return I.s;}}return false;};var E=function(G){var F,H=A.region;for(F in H){if(H[F].indexOf(G)>-1){return F;}}return false;};var D=function(H,G){window[A.dma.cb]=G;var F=A.dma.feed;F=F.replace("${zip}",H);$.ajax({url:F,dataType:"script",async:true,cache:true});};return C;}());
/*Thu Aug 16 10:07:51 EDT 2012*/
