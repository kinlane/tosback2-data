(function(F){var A=function(){this.site=new G(this);this.utils=new J(this);this.widgets=new I(this);};var L={reserved:"Add|OnPageReady|OnDocReady",pageReadyFunction:"bottomInit"};A.prototype={Add:function(N,M){return D(this,N,M);}};function D(S,O,N){O=B(O);var T=function(X){var W=(L.reserved.indexOf(X)>-1)?true:false;if(W){E("[AddConstructor] Error: Reserved word '"+X+"'");}return W;};if(O.indexOf(".")>-1){O=(O.charAt(0)===".")?O.slice(1,O.length):O;var R,U=O.split("."),Q=U.length,M=true;for(R=0;R<Q;R++){var V=U[R];if(P===0&&T(V)){return false;}if(!S[V]){if(R!==Q-1){S[V]={};}else{if(typeof N!=="function"){S[V]={};}else{S[V]=N;}}}S=S[V];}}else{if(O.length>0&&!S[O]){if(T(O)){return false;}if(typeof N!=="function"){S[O]={};S=S[O];}else{S[O]=N;S=S[O];}}else{if(T(O)){return false;}S=S[O];}}if(typeof N==="object"&&!H(N)){var P;for(P in N){if(S[P]){E("[AddConstructor] Warning: Overwriting '"+P+"' "+typeof S[P]+". (constructor:"+O+" )");}S[P]=N[P];}}return S;}function G(M){var N=this;this.Add=function(P,O){return D(N,P,O);};this.OnPageReady=(function(){var O=new C(N,M);return O.callback;}());this.OnDocReady=(function(){var O=new K(N,M);return O.callback;}());}function I(){var M=this;this.Add=function(O,N){return D(M,O,N);};}function J(){var M=this;this.Add=function(O,N){return D(M,O,N);};}J.prototype={queryStr:{get:function(S){var N,R=false,O=window.location.search.substr(1),Q=O.split("&"),M=Q.length;for(N=0;N<M;N++){var P=Q[N].split("=");if(P[0]===S){R=""+decodeURIComponent(P[1]);break;}}return R;}},debug:function(N){if(FOX.utils.queryStr.get("stc")==="y"){try{FOX.utils.console(N);}catch(M){FOX.utils.console("[DEBUG] "+M);}}},console:function(M){if(typeof window.console==="object"&&M){console.log(M);}},resizeIFrame:function(N){if(!N){return false;}var M=F(N.target),O=N.src;F("iframe").each(function(){var P=F(this);if(typeof P.attr("src")!=="undefined"){if(P.attr("src").indexOf(O)>-1&&!P.data("resized")){P.css({height:M.outerHeight(true),width:P.parent().innerWidth()});P.data("resized",true);}}});}};J.prototype.pageRefresh={enable:function(){if(typeof ew_enableRefresh==="function"){ew_enableRefresh();}},disable:function(){if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}};J.prototype.environment={get:function(){return(this.isProd(document.location.hostname))?"prod":"dev";},getHostByDesc:function(N){if(typeof window.FOX_pagedescriptor==="undefined"){return false;}var M=window.FOX_pagedescriptor;switch(M){case"fn2":M="foxnews.com";break;case"fb":M="smallbusiness.foxbusiness.com";break;case"fb2":M="foxbusiness.com";break;case"fn-latino":M="latino.foxnews.com";break;default:return false;}if(loc.hostname.indexOf(M)===-1){return false;}if(N){return M;}return loc.protocol+"//"+(loc.hostname.substr(0,M.indexOf))+M;},getDomainHost:function(P,N){var S=window.location,O=S.hostname,R=S.protocol,M=O.split("."),Q=[];if(P){Q.push(R+"//");if(!N){return R+"//"+O;}}if(O.indexOf("latino")>-1){Q.push("latino.");}else{if(O.indexOf("smallbusiness.")>-1){Q.push("smallbusiness.");}else{if(N){Q.push("www.");}}}return Q.join("")+M[(M.length-2)]+"."+M[(M.length-1)];},check:function(S,R){S=S.toLowerCase();var N,P=false,O=false,Q=["smallbusiness.","latino.foxnews.","origin-latino.foxnews.","v8-pvw.","v8-staging.","v8-origin.","v8-origin-www.","www.","origin.","origin-prod.","origin-drupal.","origin-www.","origin-www2.","origin-vignette.","preprod.","preprod2.","pvw.","pvw2.","staging.","staging2."],M=Q.length;for(N=0;N<M;N++){if(S.indexOf(Q[N])===0){O=true;break;}}if(R==="prod"){P=O;}else{if(!O){P=true;}}return P;},isProd:function(M){M=M||document.location.hostname;return this.check(M,"prod");},isDev:function(M){M=M||document.location.hostname;return this.check(M,"dev");}};J.prototype.datetime={format:function(O,N){N=N||null;var T={month:O.getUTCMonth(),day:O.getDay(),year:O.getFullYear(),date:O.getDate(),hour:O.getHours(),minutes:O.getMinutes(),seconds:O.getSeconds(),ampm:((O.getHours()<12)?"am":"pm"),fullStr:O.toString()};var Q={"${mm}":(T.month+1),"${month}":this.getUTCMonthString(T.month),"${month:short}":this.getUTCMonthString(T.month,"short"),"${day}":this.getDayString(T.day),"${day:short}":this.getDayString(T.day,"short"),"${yr}":T.year,"${dd}":((T.date<10)?"0"+T.date:T.date),"${ddTH}":this.oldEnglish(T.date),"${hr}":((T.hour>12)?T.hour-12:T.hour),"${hr:mil}":T.hour,"${min}":((T.minutes<10)?"0"+T.minutes:T.minutes),"${sec}":((T.seconds<10)?"0"+T.seconds:T.seconds),"${ampm}":T.ampm,"${AMPM}":(T.ampm).toUpperCase(),"${AmPm}":((T.ampm).charAt(0)).toUpperCase()+(T.ampm).charAt(1)};if(N===null){var S=this.getUTCMonthString(T.month),R=O.toDateString();return S+" "+R.substr(8).replace(" ",", ");}else{var P;for(P in Q){var M=N.indexOf(P);while(M!==-1){N=N.replace(P,Q[P]);M=N.indexOf(P);}}return N;}},oldEnglish:function(M){M+="";var N=parseInt(M.charAt(M.length-1),10);switch(N){case 1:M+="st";break;case 2:M+="nd";break;case 3:M+="rd";break;default:M+="th";break;}return M;},formatUTCDate:function(N,M){return FOX.utils.datetime.format(N,M);},getUTCMonthString:function(O,M){M=M||"full";var N;switch(M){case"short":N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];break;default:N=["January","February","March","April","May","June","July","August","September","October","November","December"];break;}return N[O];},getDayString:function(O,N){N=N||"full";var M;switch(N){case"short":M=["Sun","Mon","Tue","Wed","Thur","Fri","Sat"];break;default:M=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];break;}return M[O];}};J.prototype.extLink={set:function(R,P,O,N){R=R||F("a[rel*='external']");var M=this,Q="ext-linked";R.each(function(){var T=F(this),S=F.trim(T.attr("rel")||""),U=(P&&typeof P==="string")?P:(F.trim(T.attr("href")||"")),W=(O)?(!M.confirmLink(U)):true;if((S.toLowerCase()).indexOf(Q)<0&&U.length>0&&U!=="#"&&W){S=(S.indexOf("external")>-1)?S:[S,"external"].join(" ");S=F.trim([S,Q].join(" "));T.attr("rel",S);T.click(function(){window.open(U,"_blank");return false;});if(!T.attr("target")){T.attr("target","_blank");}if(N){var V=(window.FOX_DomainPath||"")+"/static/v/all/img/external-link.png";T.after('<img src="'+V+'" />');}}});},confirmLink:function(P){var M,N=false,O=[".foxnews.com",".foxbusiness.com"];for(M=0;M<O.length;M+=1){if(P.indexOf(O[M])>-1){N=true;break;}}return N;}};function C(M){this.callback=function(){var P=arguments,R=(P.length===1)?"":P[0],Q=(P.length===1)?P[0]:P[1];var O=(R.length>0)?M.Add(R,Q):Q,N=M[L.pageReadyFunction]||function(){};if(typeof O==="function"){M[L.pageReadyFunction]=function(){N();O();};}else{if(typeof O==="object"&&O.init){M[L.pageReadyFunction]=function(){N();O.init();};}}};}function K(M){this.callback=function(){var O=arguments,Q=(O.length===1)?"":O[0],P=(O.length===1)?O[0]:O[1];var N=(Q.length>0)?M.Add(Q,P):P;if(typeof N==="function"){F(document).ready(function(){N();});}else{if(typeof N==="object"&&N.init){F(document).ready(function(){N.init();});}}};}function H(M){M=M||false;return Object.prototype.toString.call(M)==="[object Array]";}function B(M){return(!M)?"":M.toString().replace(/^\s+/,"").replace(/\s+$/,"");}function E(M){if(typeof window.console==="object"&&M){console.log(M);}}window.FOX=window.fox=new A();}(jQuery));(function($){window.FOX_DomainPath=(function(){var ret="",loc=window.location,host=loc.hostname,domainHost=FOX.utils.environment.getDomainHost();var idx=function(val){return(host.indexOf(val)>-1)?true:false;};if(FOX.utils.environment.isProd()){var sub=(idx("staging."))?"staging":"www";if(sub==="staging"){ret="http://staging.fbnstatic.com";}else{ret="http://global.fncstatic.com";}}else{if(idx("-qa.")){ret="http://qa.global.fncstatic.com";}}return ret;}());FOX.Add("site",{topInit:function(){FOX.site.ads.init();FOX.site.metaDescriptor.init();},bottomInit:function(){FOX.site.tracking.init();FOX.utils.extLink.set($("a[rel*='external']",null,true));}});FOX.Add("site.tracking",{init:function(){}});FOX.Add("site.ads",{init:function(){$(document).ready(function(){$.ad.init();});},writeInline:function(id,type){if("dc"===type){$.ad.dc.inline(id);}else{fox.utils.debug("[global.js] inline ads are not enabled");}}});FOX.Add("site.metaDescriptor",{init:function(){var obj={};$("meta").each(function(){var item=$(this),nameAttr=item.attr("name"),propAttr=item.attr("property"),val=item.attr("content");if(nameAttr){if(!obj.name){obj.name={};}obj.name[nameAttr]=(val)?val:false;}else{if(propAttr){if(!obj.property){obj.property={};}obj.property[propAttr]=(val)?val:false;}}});window.FOX_metadescriptor=obj;}});FOX.Add("site.mediaIconOverlay",{set:function(obj){var self=this;if(!obj){return false;}obj.type=(function(type){var ret=false;if(obj.elm.hasClass("video-ct")){ret="video";}else{if(obj.elm.hasClass("slideshow-ct")){ret="slideshow";}else{if(obj.elm.hasClass("interactive-ct")||obj.elm.hasClass("freeform-ct")){ret="interactive";}else{if(obj.elm.hasClass("magnify-ct")){ret="magnify";}}}}return(ret)?ret:type;}(obj.type||false));if(!obj.type){return false;}obj.elm.find("span.type").hide();obj.container=obj.elm;obj.elm=obj.elm.find(".m");var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var isVideoAlt=function(elm){return(elm.hasClass("m-controller"))?true:false;};obj.elm.each(function(){var item=$(this),imgElm=item.find("img"),pObj=obj,img=new Image();pObj.elm=item;if(!isVideoAlt(item)){var trigger=function(){img.onload=function(){pObj.dim=[img.width,img.height];self.setOverlay(pObj);};img.src=imgElm.attr("src");};if(pObj.dim){self.setOverlay(pObj);}else{if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){trigger();clearInterval(interval);}},650);}else{trigger();}}}});},useAbsImg:function(dim,check){var x,map=["118","96","64","48","32","24","16"],ret=false;if(!isNaN(dim)){if(dim>=map[0]){ret=map[0];}if(dim<=20){ret=map[map.length-1];}else{for(x=0;x<map.length;x++){var val=map[x],nVal=(map[x+1])?map[x+1]:0,diffH=Math.abs(val-dim),diffL=Math.abs(val-nVal);if(dim<=val&&dim>nVal){ret=(diffH>diffL)?nVal:val;break;}}}}return(ret)?ret:false;},setOverlay:function(obj){var FS=this,elm=obj.elm,path="",ratio=obj.ratio||0.35,dim=obj.dim,position=obj.position||"center",size=obj.size||118,useAltImg=obj.useAltImg,altHover=obj.altHover||false,noClick=obj.noClick||false,useAbsImg=true,absDim=false,type=obj.type||"video";switch(type){case"slideshow":path="/static/v/all/img/ss-overlay_${dim}.png";break;case"interactive":path="/static/v/all/img/ia-overlay_${dim}.png";break;case"magnify":path="/static/v/all/img/mg-overlay_${dim}.png";break;default:path="/static/v/all/img/vd-overlay_${dim}.png";}function mFloor(val){return Math.floor(val);}function px(val){return val+"px";}function set(){var resizeVal=(dim[1]<dim[0])?dim[1]:dim[0],resize=resizeVal*ratio;resize=(resize>size)?size:resize;var imgW=resize,imgH=imgW,ovrL=false,ovrR=false,ovrT=false,ovrB=false,edgeW=0.03,edgeH=0.05;edgeW=mFloor(dim[0]*edgeW);edgeH=mFloor(dim[1]*edgeH);switch(position){case"top right":ovrR=edgeW;ovrT=edgeH;break;case"bottom right":ovrR=edgeW;ovrB=edgeH;break;case"top left":ovrL=edgeW;ovrT=edgeH;break;case"bottom left":ovrL=edgeW;ovrB=edgeH;break;default:ovrL=Math.floor((dim[0]*0.5)-(imgW*0.5));ovrT=Math.floor((dim[1]*0.5)-(imgH*0.5));}var css={};if(ovrR){css.right=px(ovrR);}if(ovrL){css.left=px(ovrL);}if(ovrT){css.top=px(ovrT);}if(ovrB){css.bottom=px(ovrB);}if(useAbsImg&&FS.useAbsImg(imgW)){imgW=FS.useAbsImg(imgW);imgH=imgW;absDim=imgW;}var overlaySrc=(function(){var dim,ret=(window.FOX_DomainPath||"")+path;if(useAbsImg&&absDim){dim=absDim;}dim=(dim)?dim:"";return ret.replace("${dim}",dim);}());var hoverImg=new Image();hoverImg.src=overlaySrc;css.width=px(imgW);css.minHeight=px(imgH);css.background='url("'+overlaySrc+'") no-repeat 0px 0px';var overlay=$('<div class="media-overlay" style="position:absolute;"></div>'),titleLink=elm.parent().find("> h3:first");overlay.css(css);elm.find("a").css({position:"relative"});elm.find("img").each(function(){var item=$(this),parent=item.parent(),isHover=false;parent.css({display:"block",padding:"0"}).prepend(overlay);if(!noClick){parent.click(function(){var el=$(this),onclick=el.attr("onclick"),href=el.attr("href");useEvent=(onclick)?onclick:href;if(onclick){eval(onclick);}else{window.location.href=href;}return false;});}var overlayElm=parent.find(".media-overlay");function hoverOver(over){if(over&&!isHover){isHover=true;overlayElm.css("background-position","0px "+px("-"+imgH));}else{if(isHover){isHover=false;overlayElm.css("background-position","0px 0px");}}}if(parent.parent().find("> .credit").size()>0){overlayElm.css({bottom:"21px"});}titleLink.hover(function(){hoverOver(true);},function(){hoverOver();});parent.hover(function(){hoverOver(true);},function(){hoverOver();});});}set();}});FOX.Add("site.mediaOverlay",{set:function(elm){var MO=this;function set(type){elm.find(".m > a").each(function(){MO.render.common(elm,$(this),type);});}if(elm.hasClass("slideshow-ct")){set("slideshow");}else{if(elm.hasClass("interactive-ct")||elm.hasClass("freeform-ct")){set("interactive");}}},render:{common:function(parent,elm,type){var MO=this,imgElm=elm.find("img");function trigger(img){var dim=[img.width,img.height],overlay=MO.useOverlay(dim[0],type);if(!overlay){return false;}if(dim[0]<156){return false;}parent.find("h3 span.type-"+type).hide();elm.css({position:"relative",display:"block"});var html=$('<span class="m-img-overlay"><img src="'+overlay+'" /></span>');html.css({position:"absolute",top:"0px",left:"0px",width:dim[0],height:dim[1]});html.find("img").css({width:dim[0],height:dim[1]});elm.append(html);parent.find(".m > .credit").hide();var openWin=function(){window.open(elm.attr("href"),"_self");};parent.children(":not(.related):not(.m)").find("a").click(function(){openWin();return false;});parent.find("> .m").click(function(){openWin();return false;});}var img=new Image();var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var setUp=function(){img.onload=function(){trigger(img);};img.src=imgElm.attr("src");};if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){setUp();clearInterval(interval);}},650);}else{setUp();}},useOverlay:function(width,type){var src=(window.FOX_DomainPath||"")+"/static/v/all/img/"+type+"_${width}x${height}.png";var types={slideshow:[132,156,190,228,259,267,328,397,604],interactive:[132,156,190,228,259,267,328,397,604],video:[132,156,190,228,259,267,328],_hVar:[74,88,107,128,146,151,185,224,341]};if(!types[type]){return false;}var X,arr=types[type],idx=0,sel=arr[0];for(x=0;x<arr.length;x++){if(width<=arr[x]){idx=x;sel=arr[x];break;}}var srcW=sel,srcH=types._hVar[idx];switch(type){case"slideshow":if(width===180){srcW=180;srcH=101;}break;}return src.replace("${width}",srcW).replace("${height}",srcH);}}});FOX.Add("site.videoIconOverlay",{set:function(){var x,i,FS=this,args=arguments,obj={elm:false,ratio:false,dim:false,position:false,size:false,hover:true};if(args.length===1&&typeof args[0]==="object"){for(i in args[0]){obj[i]=args[0][i];}}else{for(x=0;x<args.length;x++){switch(x){case 0:obj.elm=args[0];break;case 1:obj.ratio=args[1];break;case 2:obj.dim=args[2];break;case 3:obj.position=args[3];break;case 4:obj.size=args[4];break;case 5:obj.useAltImg=args[5];break;case 6:obj.altHover=args[6];break;case 7:obj.noClick=args[7];break;}}}var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var isVideoAlt=function(elm){return(elm.hasClass("m-controller"))?true:false;};obj.elm.each(function(){var item=$(this),imgElm=item.find("img"),pObj=obj,img=new Image();pObj.elm=item;if(!isVideoAlt(item)){var trigger=function(){img.onload=function(){pObj.dim=[img.width,img.height];FS.setOverlay(pObj);};img.src=imgElm.attr("src");};if(pObj.dim){FS.setOverlay(pObj);}else{if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){trigger();clearInterval(interval);}},650);}else{trigger();}}}});},useAbsImg:function(dim,check){var x,map=["118","96","64","48","32","24","16"],ret=false;if(!isNaN(dim)){if(dim>=map[0]){ret=map[0];}if(dim<=20){ret=map[map.length-1];}else{for(x=0;x<map.length;x++){var val=map[x],nVal=(map[x+1])?map[x+1]:0,diffH=Math.abs(val-dim),diffL=Math.abs(val-nVal);if(dim<=val&&dim>nVal){ret=(diffH>diffL)?nVal:val;break;}}}}return(ret)?ret:false;},setOverlay:function(obj){var FS=this,elm=obj.elm,ratio=obj.ratio||0.35,dim=obj.dim,position=obj.position||"center",size=obj.size||118,useAltImg=obj.useAltImg,altHover=obj.altHover||false,noClick=obj.noClick||false,useAbsImg=true,absDim=false;var overlaySrc=(window.FOX_DomainPath||"")+"/static/v/all/img/vp-overlay${dim}${hover}.png";function mFloor(val){return Math.floor(val);}function px(val){return val+"px";}function hover(over){over=(altHover)?((over)?false:true):over;var dim;if(useAbsImg&&absDim){dim=absDim;}dim=(dim)?("-"+dim):"";return overlaySrc.replace("${dim}",dim).replace("${hover}",(over)?"-hover":"");}function set(){var resizeVal=(dim[1]<dim[0])?dim[1]:dim[0],resize=resizeVal*ratio;resize=(resize>size)?size:resize;var imgW=resize,imgH=imgW,ovrL=false,ovrR=false,ovrT=false,ovrB=false,edgeW=0.03,edgeH=0.05;edgeW=mFloor(dim[0]*edgeW);edgeH=mFloor(dim[1]*edgeH);switch(position){case"top right":ovrR=edgeW;ovrT=edgeH;break;case"bottom right":ovrR=edgeW;ovrB=edgeH;break;case"top left":ovrL=edgeW;ovrT=edgeH;break;case"bottom left":ovrL=edgeW;ovrB=edgeH;break;default:ovrL=Math.floor((dim[0]*0.5)-(imgW*0.5));ovrT=Math.floor((dim[1]*0.5)-(imgH*0.5));}var css={};if(ovrR){css.right=px(ovrR);}if(ovrL){css.left=px(ovrL);}if(ovrT){css.top=px(ovrT);}if(ovrB){css.bottom=px(ovrB);}if(useAbsImg&&FS.useAbsImg(imgW)){imgW=FS.useAbsImg(imgW);imgH=imgW;absDim=imgW;}css.width=px(imgW);css.minHeight=px(imgH);var overlay=$('<span class="vid-overlay"><img style="position:absolute; display:inline;" src="'+hover()+'"/></span>'),titleLink=elm.parent().find("> h3:first");overlay.find("img").css(css);elm.find("a").css({position:"relative"});elm.find("img").each(function(){var item=$(this),parent=item.parent(),isHover=false,prevOverlay=parent.find("> .vid-overlay:visible");if(prevOverlay.size()>0){prevOverlay.css("display","none");}parent.css({display:"block",padding:"0"}).prepend(overlay);if(!noClick){parent.click(function(){var el=$(this),onclick=el.attr("onclick"),href=el.attr("href");useEvent=(onclick)?onclick:href;if(onclick){eval(onclick);}else{window.location.href=href;}return false;});}var overlayElm=parent.find(".vid-overlay"),overlayImg=overlayElm.find("img");function hoverOver(over){if(over&&!isHover){isHover=true;overlayImg.attr("src",hover(true));}else{if(isHover){isHover=false;overlayImg.attr("src",hover());}}}titleLink.hover(function(){hoverOver(true);},function(){hoverOver();});parent.hover(function(){hoverOver(true);},function(){hoverOver();});});}var hoverImg=new Image();hoverImg.src=hover(true);set();}});var formatNumber=window.formatNumber=function(num,dec,thou,pnt,curr1,curr2,n1,n2){var i,x=Math.round(num*Math.pow(10,dec));if(x>=0){n1=n2="";}var y=(""+Math.abs(x)).split(""),z=y.length-dec;if(z<0){z--;}for(i=z;i<0;i++){y.unshift("0");}if(z<0){z=1;}y.splice(z,0,pnt);if(y[0]==pnt){y.unshift("0");}while(z>3){z-=3;y.splice(z,0,thou);}var r=curr1+n1+y.join("")+n2+curr2;return r;};window.AjaxGetEvent=function(event_data,callback){var GE=this;GE.mydata=event_data;GE.mycallback=callback;GE.get=function(url,params,type){$.get(url,params,$.context(this).callback("eventcallback"),type);};GE.eventcallback=function(ajaxdata){GE.mycallback(ajaxdata,GE.mydata);};};}(jQuery));(function(A){A(document).ready(function(){loadAttempt(5,500,function(){return(typeof A.ad!="undefined"&&typeof A.ad._meta.raw.genre!="undefined")?true:false;},function(){if(typeof ew_disableRefresh==="function"&&A.ad._meta.raw.genre!="homePage"){ew_disableRefresh();}else{if(typeof ew_enableRefresh==="function"&&A.ad._meta.raw.genre=="homePage"){ew_enableRefresh();}}});});}(jQuery));function ew_enableRefresh(){var A=600;try{ew_disableRefresh();}catch(B){}window.refreshInterval=setInterval(function(){location.reload(false);},A*1000);}function ew_disableRefresh(){clearInterval(window.refreshInterval);}(function($){var CONST={US_States:{AK:"Alaska",AL:"Alabama",AR:"Arkansas",AS:"American Samoa",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",FM:"Federated States of Micronesia",GA:"Georgia",GU:"Guam",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MH:"Marshall Islands",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MP:"Northern Mariana Islands",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",PW:"Palau",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VI:"Virgin Islands",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"}};function WeatherService(namespace){this.namespace=namespace;var initVars={weatherCityData:[],ACListener:{},currentLocId:"",currentCityString:"",serviceTriggered:false,UPDATE_HEADER_ACTION:"UPDATE_HEADER",SERVICE_URL_WEATHER_JSONP:"/weather/feed/getWeatherJsonP",SERVICE_URL_LOCATION_JSONP:"/weather/feed/getLocationIdJsonP",SERVICE_URL_WEATHER_HTML:"/weather/feed/getWeatherHtml",SERVICE_URL_LOCATION_REGION_JSON:"/weather/feed/getLocationRegionCodeJson",SERVICE_URL_CITY_DATA:"/weather/feed/getWeatherCityData",SERVICE_URL_MARINE_JSON:"/weather/feed/getMarineLocationsJson",SERVICE_URL_SKI_RESORTS_JSON:"/weather/feed/getSkiResortsJson",SERVICE_URL_SKI_COND_JSON:"/weather/feed/getSkiConditionJson",SERVICE_URL_AIRPORT_LOCATION_JSON:"/weather/feed/getAirportLocationIdJson",SERVICE_URL_AIRPORT_DELAY_JSON:"/weather/feed/getAirportDelayJson",PAGE_URL_YOUR_WEATHER:"/weather/your-weather/index.html",PAGE_URL_SEARCH_RESULTS:"/weather/search-results/index.html",PATH_WEATHER_ICON_IMAGE:(window.FOX_DomainPath||"")+"/static/all/img/weather/icons_60x60/",PATH_WEATHER_ICON_IMAGE_LARGE:(window.FOX_DomainPath||"")+"/static/all/img/weather/icons_96x96/",WEATHER_ICON_IMAGE_EXT:".png",WEATHER_DEFAULT_LOCATION:"USNY0996",WEATHER_COOKIE_DOMAIN:"foxnews.com",MSG_DEFAULT_ERROR:"Data unavailable. Please check back again soon.",MSG_AIRPORT_CODE_ERROR:"Please enter a valid 3- or 4-digit airport code.",MSG_AIRPORT_NOT_FOUND_ERROR:"No airport results found.  Please try again.",TXT_DEFAULT_SEARCH_FIELD:"Enter city or zip code",TXT_HEADER_SEARCH_FIELD:"Enter city or zip",TXT_AIRPORT_SEARCH_FIELD:"Enter airport code (IATA or ICAO)",LIST_SKI_CONDITIONS_ENABLED:"AK|AL|AZ|CA|CO|CT|IA|ID|IL|IN|MA|MD|ME|MI|MN|MO|MT|NC|ND|NH|NJ|NM|NV|NY|OH|OR|PA|RI|SD|TN|UT|VA|VT|WA|WI|WV|WY",LIST_MARINE_FORECAST_ENABLED:"AK|AL|AS|AZ|CA|CT|DC|DE|FL|FM|GA|GU|HI|LA|MA|MD|ME|MH|MS|NC|NJ|NY|OR|PA|PR|PW|RI|SC|TX|VA|VI|VT|WA"};var i;for(i in initVars){this[i]=initVars[i];}this.extService=new ExternalServices(this);}WeatherService.prototype={init:function(fn){var ws=this,initData='{"location":[{"loc_id":"USNY0996","zip":"10108","city":"New York","state":"NY"}]}';var trigger=function(data){ws.createWeatherLocationCookie(data);ws.renderWidget();if(typeof fn==="function"){fn();}};if(ws.weatherCookie("weatherloc")){var cookie=ws.weatherCookie("weatherloc"),weatherlocObj=this.createObjFromJSON(cookie);if(!weatherlocObj||!weatherlocObj.location||!weatherlocObj.location[0].loc_id){trigger(initData);}else{trigger(cookie);}}else{if(window.CONST_Akamai_GEO&&CONST_Akamai_GEO.countryCode==="US"){ws.getGeoLocation(function(data){trigger(data||initData);});}else{trigger(initData);}}},getGeoLocation:function(fn){var ws=this,callbackFn="location_searchresults_callback_geo";var ret=function(info){if(typeof fn==="function"){fn(info);}};var zip=(function(){var obj=window.CONST_Akamai_GEO,range=obj.zipRange,zip=range.substring(0,5);return(!isNaN(zip))?zip:false;}());if(zip){ws.location_searchresults_callback_geo=function(data){ret(data);};$.ajax({url:weather_service.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:zip,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:true,cache:true});}else{ret(false);}},setExtData:function(location,info){this.extService._DataObj={location:location,info:this.createObjFromJSON(info)};this.extService.reloadWidgets();},weatherCookie:function(name,value,options){if(typeof value!=="undefined"){options=options||{};if(value===null){value="";options.expires=-1;}var expires="";if(options.expires&&(typeof options.expires==="number"||options.expires.toUTCString)){var date;if(typeof options.expires==="number"){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}expires="; expires="+date.toUTCString();}var path=options.path?"; path="+(options.path):"",domain=options.domain?"; domain="+(options.domain):"",secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("");}else{var cookieValue=null;if(document.cookie&&document.cookie!==""){var i,cookies=document.cookie.split(";");for(i=0;i<cookies.length;i++){var cookie=$.trim(cookies[i]);if(cookie.substring(0,name.length+1)===(name+"=")){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}},createWeatherDataCookie:function(locId,jsonString){var validateWeatherObj=this.createObjFromJSON(jsonString),weatherJSObj=validateWeatherObj.weatherData,city=weatherJSObj.cityName,country=weatherJSObj.country,tempHi=weatherJSObj.days[0].hi,tempLo=weatherJSObj.days[0].lo;if(validateWeatherObj&&city!==""&&country!==""){var expDate=new Date();if(tempHi===""||tempLo===""){expDate.setTime(expDate.getTime()+(60*1000));}else{expDate.setTime(expDate.getTime()+(3*60*60*1000));}this.weatherCookie("weatherdata__"+locId,jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});this.renderFavorites();}},createWeatherLocationCookie:function(jsonString){var expDate=new Date();expDate.setTime(expDate.getTime()+(1000*24*60*60*1000));this.weatherCookie("weatherloc",jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});},createWeatherFavoritesCookie:function(favArray){var favLocCookieString=favArray.join("|");if(favLocCookieString!==""){var expDate=new Date();expDate.setTime(expDate.getTime()+(1000*24*60*60*1000));this.weatherCookie("weatherfavlocs",favLocCookieString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});}else{this.weatherCookie("weatherfavlocs","",{expires:-1,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});}},getWeatherDataCookie:function(locId){return this.weatherCookie("weatherdata__"+locId);},createObjFromJSON:function(jsonString){if(jsonString!==""){return eval("("+unescape(jsonString).replace(/\s+/g," ")+")");}else{return null;}},createLocJSObj:function(data){if(!data.loc_id){return null;}var i,obj={loc_id:"",city:"",zip:"",state:"",country:""};for(i in data){var val=data[i];if(i==="city"){val=val.replace("`","'");}obj[i]=val;}var fullArr=[];fullArr.push(obj.city||"");fullArr.push((obj.loc_id.substr(0,2).toUpperCase()!=="US"&&(obj.country||obj.state))?obj.country:obj.state);obj.fullCityString=fullArr.join(", ");return obj;},displayHeader:function(serviceDomain,config){var i,self=this;if(this.serviceTriggered){return false;}else{this.serviceTriggered=true;}config=(typeof config==="object")?config:{};if(typeof serviceDomain!=="undefined"){this.PAGE_URL_SEARCH_RESULTS=serviceDomain+this.PAGE_URL_SEARCH_RESULTS;this.PAGE_URL_YOUR_WEATHER=serviceDomain+this.PAGE_URL_YOUR_WEATHER;this.SERVICE_URL_LOCATION_JSONP=serviceDomain+this.SERVICE_URL_LOCATION_JSONP;this.SERVICE_URL_WEATHER_JSONP=serviceDomain+this.SERVICE_URL_WEATHER_JSONP;if(document.location.hostname.lastIndexOf(this.WEATHER_COOKIE_DOMAIN)==-1){this.WEATHER_COOKIE_DOMAIN=document.location.hostname;}}if(config){for(i in config){var val=config[i];switch(i){case"icons":if(val===24){self.PATH_WEATHER_ICON_IMAGE=self.PATH_WEATHER_ICON_IMAGE.replace("icons_60x60","icons_24x24");}break;}}}this.init();},renderWidget:function(){$("body").data("weather-rendered",true);var ws=this;ws.serviceTriggered=true;setTimeout(function(){ws.renderHeaderWeather();ws.renderHeaderLocationChange();},500);},renderHeaderWeather:function(){var ws=this;var trigger=function(){var requestedLocationObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));$(".portlet .weather.current-conditions").each(function(){ws.renderYourWeather(this,requestedLocationObj.location[0].loc_id,"weather_current");});};if(this.weatherCookie("weatherloc")){var weatherlocObj=this.createObjFromJSON(this.weatherCookie("weatherloc"));var locObject=this.createLocJSObj(weatherlocObj.location[0]);if(this.getWeatherDataCookie(locObject.loc_id)){this.headerDisplayAction(locObject.loc_id);ws.setExtData(locObject,this.getWeatherDataCookie(locObject.loc_id));ws.renderWeatherWidget(locObject.loc_id);}else{this.fetchAndSaveWeatherJSONCookie(locObject.loc_id);}trigger();}else{this.init(function(){var weatherlocObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));ws.fetchAndSaveWeatherJSONCookie(weatherlocObj.location[0].loc_id);trigger();});}},renderRightRailSearch:function(){var topRightRailHtml="<ul>"+this.generateRightRailSearch("yourweather")+"</ul>";document.write(topRightRailHtml);},generateRightRailSearch:function(ac_results_css_appendix){var ws=this,searchField="weatherInput_"+ac_results_css_appendix,rightRailHTML='<li><form method="get" action="'+ws.PAGE_URL_SEARCH_RESULTS+'" id="weather_search_form" class="form_1" onsubmit="weather_service.locationSearchAction(this,\'#'+searchField+'\');"><fieldset class="text_box"><div class="search-input-holder"><div class="preloader-img"></div><input type="text" name="searchTerm" id="'+searchField+'" onfocus="weather_service.searchFieldOnFocus(this);" onblur="weather_service.searchFieldOnBlur(this, \''+ws.TXT_DEFAULT_SEARCH_FIELD+'\');" class="weather_city_autocomplete_'+ac_results_css_appendix+' search_input no_spon" size="50" value="'+ws.TXT_DEFAULT_SEARCH_FIELD+'" name="keys"/></div><input type="submit" class="go" value=""/></fieldset></form></li>';return rightRailHTML;},renderWeatherWidget:function(locationId){var widgetElm=$("#weather-widget");if(widgetElm.size()===0){return false;}var ws=this,headerDataCookie=this.getWeatherDataCookie(locationId),useLgIcons=(widgetElm.hasClass("use-lg-icons"))?true:false,useImgSrc=(useLgIcons)?ws.PATH_WEATHER_ICON_IMAGE_LARGE:ws.PATH_WEATHER_ICON_IMAGE;var imgDim=(function(){var sp=useImgSrc.split("/"),val=sp[sp.length-1];val=val.replace("icons_","").split("x");return val;}());if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie);var wdObj=headerDataObj.weatherData;var form=widgetElm.find("form:first");form.find("label, p.state").html(wdObj.cityName+((wdObj.stateShort.length>0)?", "+wdObj.stateShort:"")).unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);});var listElm=widgetElm.children("ul:first");listElm.children("li.section").each(function(i){var item=$(this);if(wdObj.days[i]){var dataSource=wdObj.days[i];var imgSrc=useImgSrc+dataSource.image+ws.WEATHER_ICON_IMAGE_EXT;var hiTemp=dataSource.hi;var lowTemp=dataSource.lo;if(i===0){item.find(".current").html(wdObj.currentTemp+"&#176;");}if(item.find(".media img").size()===0){item.find(".media").html("<img />");}item.find(".media img").css({width:imgDim[0]+"px",height:imgDim[1]+"px"}).each(function(){var elm=$(this);elm.css({opacity:"0",display:"inline"});if(!$.browser.opera){var img=new Image();img.onload=function(){elm.attr("src",imgSrc);animateFn.show(elm,{speed:300,type:"swing"});};img.src=imgSrc;}else{elm.css({backgroundImage:"none",display:"inline",opacity:"0"});elm.attr({src:imgSrc});animateFn.show(elm,{speed:300,type:"linear"});}});var hiLow="Hi "+((hiTemp.length>0)?hiTemp+"&#176;":"-")+" | Lo "+((lowTemp.length>0)?lowTemp+"&#176;":"-");item.children("div:first").children("span").html(hiLow);item.unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);});}});}if(widgetElm.data("setListeners")){return false;}widgetElm.data("setListeners",true);widgetElm.find("form:first").each(function(){var form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value"),overSearch=true;search.focus(function(){var elm=$(this),val=elm.val();elm.data("currVal",val);elm.val("");}).blur(function(){var elm=$(this),val=elm.attr("value");elm.val((val==="")?elm.data("currVal"):val);});form.hover(function(){overSearch=true;},function(){overSearch=false;});$(document).bind("click",function(){if(!overSearch){var val=search.attr("value"),curr=search.data("currVal");if(val!==curr&&val!==txt){form.submit();}}});form.submit(function(){search.data("currVal",search.val());ws.locationSearchAction(this,"#weather_widgetInput",ws.UPDATE_HEADER_ACTION);return false;});});},searchFieldOnFocus:function(inputField){if(inputField.value===this.TXT_DEFAULT_SEARCH_FIELD||inputField.value===this.TXT_HEADER_SEARCH_FIELD){inputField.value="";}},searchFieldOnBlur:function(inputField,message){if(inputField.value===""){inputField.value=message;}},airportSearchAction:function(airportForm,airportLocId){var ws=this,regexp=new RegExp("^[a-zA-Z]{3,4}$"),reqAC=$("#airportCode").val();if(!reqAC.match(regexp)){showToConsole(ws.MSG_AIRPORT_CODE_ERROR);return false;}$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_AIRPORT_LOCATION_JSON,data:{airportCode:reqAC,cb:cacheBuster()},success:function(data){var parsed=ws.createObjFromJSON(data);if(parsed){if(parsed.location.length>0){var airportLocObj=ws.createLocJSObj(parsed.location[0]);$(airportForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(airportLocId).attr("value",airportLocObj.loc_id);}else{showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR);return false;}}},error:function(){showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR);return false;}});},getSetLocationAction:function(location,callback){if(!location){return false;}var ws=this;var locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$");var upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(location)&&typeof callback==="function"){ws.fetchAndSaveWeatherJSONCookie(location,false,function(data){callback(ws.createObjFromJSON(data));});}},locationSearchAction:function(locationForm,searchInputId,action){var ws=this,locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$"),upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(ws.currentLocId)){$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(searchInputId).attr("name","locId");$(searchInputId).attr("value",ws.currentLocId);if(action===ws.UPDATE_HEADER_ACTION){ws.fetchLocationJSON(ws.currentLocId,function(){ws.renderWidget();});}}else{var locSearchTerm=upToCommaEx.exec($(searchInputId).attr("value")),callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){$(locationForm).attr("action",ws.PAGE_URL_SEARCH_RESULTS);var qStr,locationJson=ws.createObjFromJSON(data);if(locationJson){if(locationJson.location.length===1){var exactMatchObj=ws.createLocJSObj(locationJson.location[0]);if(action===ws.UPDATE_HEADER_ACTION){ws.fetchLocationJSON(exactMatchObj.loc_id,function(){ws.renderWidget();});}else{$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(searchInputId).attr("name","locId");$(searchInputId).attr("value",exactMatchObj.loc_id);}}else{qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+");window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;}}else{qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+");window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;}};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:locSearchTerm[0],callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:true,cache:true});}},gotoYourWeatherPage:function(locId,city,state,country){var ws=this,yourWeatherURL=ws.PAGE_URL_YOUR_WEATHER+"?locId="+locId;window.location.href=yourWeatherURL;},renderYourWeather:function(divClass,locationId,weatherView){var ws=this,feedHolder=$(divClass);if(!locationId||locationId===""){locationId=ws.WEATHER_DEFAULT_LOCATION;}$.get(ws.SERVICE_URL_WEATHER_HTML,{locationId:locationId,weatherView:weatherView},function(data){feedHolder.html(data);var weather_dayly=feedHolder.find(".weather-daily"),weather_hourly=feedHolder.find(".weather-hourly"),average_records=$(".weather.average-and-records h1"),text=average_records.text();text=text.replace("&","& ");feedHolder.find(".weather-current h1").replaceWith('<h2 class="title">Current Conditions</h2>');weather_dayly.find("h1").replaceWith('<h2 class="title">10 Day Forecast</h2>');weather_dayly.addClass("c");weather_hourly.find("h1").replaceWith('<h2 class="title">Hourly Forecast</h2>');weather_hourly.addClass("c");average_records.replaceWith('<h2 class="title">'+text+"</h2>");});},renderSearchResults:function(divClass,searchTerm){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){var searchResultsHtml="";if(data){var resultsIndex,locationJson=ws.createObjFromJSON(data);if(locationJson){if(locationJson.location.length>1){searchResultsHtml+='<p class="results">Your search for <span class="city">'+searchTerm+'</span> returned multiple locations</p><p>Please click on the location you are looking for:</p><p class="sorted">Sorted alphabetically by city, state, country<span/></p><table>';for(resultsIndex=0;resultsIndex<locationJson.location.length;resultsIndex++){var matchingLocObj=ws.createLocJSObj(locationJson.location[resultsIndex]),locationLink=ws.PAGE_URL_YOUR_WEATHER+"?locId="+matchingLocObj.loc_id;if(resultsIndex%2===0){searchResultsHtml+='<tr class="even">';}else{searchResultsHtml+="<tr>";}searchResultsHtml+='<td><a href="'+locationLink+'">'+matchingLocObj.city+"</a></td><td>"+matchingLocObj.state+"</td><td>"+matchingLocObj.country+"</td></tr>";}searchResultsHtml+="</table>";}else{if(locationJson.location.length===1){var locObj=ws.createLocJSObj(locationJson.location[0]);ws.gotoYourWeatherPage(locObj.loc_id,locObj.city,locObj.state,locObj.country);}else{searchResultsHtml+='<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>";}}}else{searchResultsHtml+=ws.MSG_DEFAULT_ERROR;}}else{searchResultsHtml+=ws.MSG_DEFAULT_ERROR;}$(divClass).html(searchResultsHtml);};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:({zipOrLocation:searchTerm,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true,error:function(){$(divClass).html('<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>");}});},renderAirportDelayInfo:function(divClass,airportCode){var ws=this,aCode=airportCode.toUpperCase();$.get(ws.SERVICE_URL_AIRPORT_DELAY_JSON,{airportCode:aCode},function(data){if(data){var delayIndex,delayJson=ws.createObjFromJSON(data),airportDelayHtml="";if(delayJson.delayList.length){airportDelayHtml+='<div class="delay">';for(delayIndex=0;delayIndex<delayJson.delayList.length;delayIndex++){var delayInfo=delayJson.delayList[delayIndex].delayInfo,delayReason=delayJson.delayList[delayIndex].delayReason;airportDelayHtml+='<p><img alt="Exclamation" src="'+(window.FOX_DomainPath||"")+'/static/all/img/exclamation.png"/>Delay Information</p><p class="information">'+delayInfo+'</p><p class="reason">Delay Reason</p><p class="information">'+delayReason+"</p>";}airportDelayHtml+="</div>";}else{airportDelayHtml+='<div class="no-delay"><p><img alt="Exclamation" src="'+(widow.FOX_DomainPath||"")+'/static/all/img/exclamation.png"/>Delay Information</p><p class="information">No delays at '+aCode+" reported.</p></div>";}$(divClass).html(airportDelayHtml);}});},renderMarineForecast:function(divClass){var ws=this,marineHtml="";marineHtml+='<div class="marine-search"><h2 class="title">Marine Forecast</h2><div class="location"><form action="" class="form_1" id="search_form4" method="get"><div id="marine-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="marineState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_MARINE_FORECAST_ENABLED)+'</ul></div><div class="clear"></div></div><div id="marine-cities-dropdown" class="list-type-dropdown"><p class="text title">Choose Marine Location</p><div class="drop_container holder"><input type="hidden" name="marineLocation" value="" /><p id="tide-cities-p" class="weather_dropdown current-value disabled">- select -</p><ul id="tide-cities-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="marine-result"></div>';$(divClass).html(marineHtml);$(".weather .marine-result").each(function(){ws.renderYourWeather(this,"USCA0638","weather_marine");});try{FOX.site.channel.listDropdown.init("marineState");}catch(err){}},renderTideLocationsDropdown:function(stateAbbr){var ws=this;if(stateAbbr!==""){$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_MARINE_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data,textStatus){var marineLocJson=ws.createObjFromJSON(data);if(marineLocJson){if(marineLocJson.marineLocations.length>0){ws.generateTideLocationsList(marineLocJson.marineLocations);}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}});}},generateTideLocationsList:function(locArrayObj){var i,tideLocDropdown="";if(locArrayObj!==null){for(i=0;i<locArrayObj.length;i++){var marineLocId=locArrayObj[i].loc_id,marineCity=locArrayObj[i].city;tideLocDropdown+='<li lang="'+marineLocId+'">'+marineCity+"</li>";}$("#tide-cities-list").html(tideLocDropdown);$("#tide-cities-p").removeClass("disabled");}else{tideLocDropdown+='<li lang=""></li>';$("#tide-cities-list").html(tideLocDropdown);$("#tide-cities-p").html("- select -");$("#tide-cities-p").addClass("disabled");}try{FOX.site.channel.listDropdown.init("marineCities");}catch(err){}},generateStatesList:function(statesList){var i,ws=this,listHtml="",states=statesList.split("|");for(i=0;i<states.length;i++){listHtml+='<li lang="'+states[i]+'">'+CONST.US_States[states[i]]+"</li>";}return listHtml;},renderSkiConditions:function(divClass){var ws=this,skiHtml="";skiHtml+='<div class="ski-search"><h2 class="title">Ski Conditions</h2><div class="location"><form action="" class="form_1" id="search_form5" method="get"><div id="ski-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="skiState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_SKI_CONDITIONS_ENABLED)+'</ul></div><div class="clear"></div></div><div id="ski-resorts-dropdown" class="list-type-dropdown"><p class="text title">Choose Ski Location</p><div class="drop_container holder"><input type="hidden" name="skiLocation" value="" /><p id="ski-resorts-p" class="weather_dropdown current-value disabled">- select -</p><ul id="ski-resorts-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="ski-result"></div>';$(divClass).html(skiHtml);$(".weather .ski-result").each(function(){ws.renderSkiCondResult(this,"303003");});try{FOX.site.channel.listDropdown.init("skiState");}catch(err){}},renderSkiResortsDropdown:function(stateAbbr){var ws=this;if(stateAbbr!==""){$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_SKI_RESORTS_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data,textStatus){var skiResortJson=ws.createObjFromJSON(data);if(skiResortJson){if(skiResortJson.skiResorts!==null&&skiResortJson.skiResorts.length>0){var newSkiReportHolder=[],skiArray=skiResortJson.skiResorts;for(var x=0;x<skiArray.length;x+=1){if(x===0){newSkiReportHolder.push(skiArray[0]);}else{if(newSkiReportHolder[newSkiReportHolder.length-1]["resort_name"]!==skiArray[x]["resort_name"]){newSkiReportHolder.push(skiArray[x]);}}}ws.generateSkiResortsList(newSkiReportHolder);}else{return false;}}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}});}},generateSkiResortsList:function(locArrayObj){var i,skiResortsDropdown="";if(locArrayObj!==null){for(i=0;i<locArrayObj.length;i++){var skiResortId=locArrayObj[i].resort_id,skiResortName=locArrayObj[i].resort_name;skiResortsDropdown+='<li lang="'+skiResortId+'">'+skiResortName+"</li>";}$("#ski-resorts-list").html(skiResortsDropdown);$("#ski-resorts-p").removeClass("disabled");}else{skiResortsDropdown+='<li lang=""></li>';$("#ski-resorts-list").html(skiResortsDropdown);$("#ski-resorts-p").html("- select -");$("#ski-resorts-p").addClass("disabled");}try{FOX.site.channel.listDropdown.init("skiResorts");}catch(err){}},renderSkiCondResult:function(divClass,resortId){var ws=this;$.get(ws.SERVICE_URL_SKI_COND_JSON,{resortId:resortId},function(data){var skiCondJson=ws.createObjFromJSON(data),skiResultHtml=ws.generateSkiCondHtml(skiCondJson);$(divClass).html(skiResultHtml);});},generateSkiCondHtml:function(skiCondJson){var skiObj=skiCondJson.skiConditions,snowMin=skiObj.new_snow_min?skiObj.new_snow_min+" in":"N/A",surface=skiObj.surface_condition?skiObj.surface_condition:"N/A",lastSnowfall=skiObj.last_snow?skiObj.last_snow+"in":"N/A",prevSnowfall=skiObj.prev_snow?skiObj.prev_snow:"N/A",baseDepth="N/A";if(skiObj.base_min&&skiObj.base_max){baseDepth=skiObj.base_min+" of "+skiObj.base_max;}var skiHtml='<ul><li><p class="city-name">'+skiObj.resort_name+", "+skiObj.state+' Ski Report</p><div class="four-half"><table><tbody><tr><td class="first">Operating Status</td><td>'+skiObj.open_status+'</td></tr><tr class="even"><td class="first">Surface</td><td>'+surface+'</td></tr><tr><td class="first">Temperature</td><td>'+skiObj.temperature+' F</td></tr><tr class="even"><td class="first">New Snowfall</td><td>'+snowMin+'</td></tr><tr><td class="first">Last Snowfall</td><td>'+lastSnowfall+'</td></tr><tr class="even"><td class="first">Previous Snowfall</td><td>'+prevSnowfall+'</td></tr><tr><td class="first">Lifts Open</td><td>'+skiObj.lifts_open+" of "+skiObj.lifts_total+'</td></tr><tr class="even"><td class="first">Trails Open</td><td>'+skiObj.trails_open+" of "+skiObj.trails_total+'</td></tr><tr><td class="first">Grooming Trails</td><td>'+skiObj.groom_trails+" of "+skiObj.trails_total+'</td></tr><tr class="even"><td class="first">Base Depth</td><td>'+baseDepth+'</td></tr><tr><td class="first">Terrain</td><td>'+skiObj.terrain+'&#37;</td></tr><tr class="even"><td class="first">Snow Made</td><td>'+skiObj.snow_made+'&#37;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr class="even"><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div></li></ul>';return skiHtml;},addToFavorites:function(locId){if(this.weatherCookie("weatherfavlocs")){var favLocationArray=(this.weatherCookie("weatherfavlocs")).split("|");if(favLocationArray.length<5){var favIndex,saveFavorite=true;for(favIndex=0;favIndex<favLocationArray.length;favIndex++){if(favLocationArray[favIndex]===locId){alert("You have already saved this location to My Favorites.");saveFavorite=false;}}if(saveFavorite){favLocationArray.push(locId);this.createWeatherFavoritesCookie(favLocationArray);this.renderFavorites();}}else{alert("You have 5 saved locations in My Favorites. Please remove one from My Favorites to save this location.");}}else{var newFavCookieArray=new Array(locId);this.createWeatherFavoritesCookie(newFavCookieArray);this.renderFavorites();}},removeFavorite:function(locId){if(this.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=(this.weatherCookie("weatherfavlocs")).split("|");for(favIndex=0;favIndex<favLocationArray.length;favIndex++){if(favLocationArray[favIndex]===locId){favLocationArray.splice(favIndex,1);break;}}this.createWeatherFavoritesCookie(favLocationArray);}$("#li_"+locId).remove();},generateFavoritesHtml:function(weatherObj){var dataObj=weatherObj.weatherData,stateToDisplay=dataObj.stateShort;if(dataObj.locationId.substr(0,2)!=="US"){stateToDisplay=dataObj.country;}var favHtml='<li id="li_'+dataObj.locationId+'"><div class="weather-img"><a href="#" onclick="weather_service.gotoYourWeatherPage(\''+dataObj.locationId+"','"+dataObj.cityName+"','"+dataObj.stateShort+"','"+dataObj.country+'\');return false;"><img alt="Weather" src="'+weather_service.PATH_WEATHER_ICON_IMAGE+dataObj.days[0].image+weather_service.WEATHER_ICON_IMAGE_EXT+'"/></a></div><div class="city-container"><h3>'+unescape(dataObj.cityName)+", "+stateToDisplay+'</h3><div class="desc"><p>'+dataObj.forecast+'</p></div></div><div class="degrees"><p>'+dataObj.days[0].hi+'&deg;&nbsp;<span class="low">'+dataObj.days[0].lo+'&deg;</span></p><a class="close" href="#" onclick="weather_service.removeFavorite(\''+dataObj.locationId+"');return false;\"/></div></li>";return favHtml;},renderFavorites:function(){var ws=this,favoritesHtml="<ul>";if(ws.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=(ws.weatherCookie("weatherfavlocs")).split("|");favoritesHtml+='<li><ul class="favorites">';for(favIndex=0;favIndex<favLocationArray.length;favIndex++){var favDataObj,favLocationId=favLocationArray[favIndex],favDataCookie=this.getWeatherDataCookie(favLocationId);if(favDataCookie){favDataObj=ws.createObjFromJSON(favDataCookie);favoritesHtml+=ws.generateFavoritesHtml(favDataObj);}else{var callbackFn="location_renderfavorites_callback";ws[callbackFn]=function(data){if(data){ws.createWeatherDataCookie(favLocationId,data);favDataObj=ws.createObjFromJSON(data);favoritesHtml+=ws.generateFavoritesHtml(favDataObj);}};$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:({locationId:favLocationId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});}}favoritesHtml+="</ul></li><li>&nbsp;</li>";}favoritesHtml+=this.generateRightRailSearch("myfav")+"</ul>";var favoritesObj=$(".component, .c").find(" .weather.favorites");favoritesObj.html(favoritesHtml);$("ul.favorites li:last-child",favoritesObj).addClass("last");$("input[class*=weather_city_autocomplete_myfav]",favoritesObj).keyup(function(){ws.weatherCityAutoComplete(this);});},renderAirportSearch:function(){var airportHtml='<div class="weather airport-search"><h1><strong>Airport</strong> Delays</h1><ul><li><div><span class="text">'+this.TXT_AIRPORT_SEARCH_FIELD+'</span><form method="get" id="aiport_search" class="form_1" action="" onsubmit="return weather_service.airportSearchAction(this,\'#airportLocId\');"><fieldset class="text_box"><input type="text" id="airportCode" class="airport_input no_airport" size="50" value="" name="airportCode"/><input type="hidden" id="airportLocId" value="" name="locId"/><input type="submit" class="airport" value=""/></fieldset></form></div></li></ul></div>';document.write(airportHtml);},fetchAndSaveWeatherJSONCookie:function(locId,setAsCookie,callback){setAsCookie=(typeof setAsCookie==="boolean")?setAsCookie:true;var ws=this,callbackFn="location_weatherjsoncookie_callback";ws[callbackFn]=function(data){if(setAsCookie){ws.createWeatherDataCookie(locId,data);ws.renderWidget();}else{if(typeof callback==="function"){callback(data);}}};$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:({locationId:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});},fetchLocationJSON:function(locId,fn){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){ws.createWeatherLocationCookie(data);if(typeof fn==="function"){fn();}};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:({zipOrLocation:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});},fetchLocationRegionCode:function(locId,callback){var ws=this,regionCode="";$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_LOCATION_REGION_JSON,data:{locationId:locId,cb:cacheBuster()},success:function(data,textStatus){if(data){var regionJson=ws.createObjFromJSON(data);callback(regionJson.regionCode);}},error:function(XMLHttpRequest,textStatus,errorThrown){showToConsole(ws.MSG_DEFAULT_ERROR);}});return regionCode;},weatherCityAutoComplete:function(element){var ws=this;ws.currentCityString="";var ACElementId=$(element).attr("id"),preloaderObj=$(element).parent().find(".preloader-img:first"),inputValue=$.trim($(element).val());if(inputValue.length<1){return ;}var cssValue=$(element).attr("class"),prefix="weather_city_autocomplete_",tempIndex=cssValue.indexOf(prefix)+prefix.length,appendix=cssValue.substr(tempIndex);tempIndex=appendix.indexOf(" ");if(tempIndex>0){appendix=appendix.substr(0,tempIndex);}var initial=inputValue.charAt(0).toLowerCase();if(initial.match(/[a-z]/)===null){return ;}if(typeof ws.weatherCityData[initial]==="undefined"){if(typeof ClientStorageManager==="undefined"){triggerAjaxCall(false);}else{var restrict=["cookie","msiestorage"];if(restrict.join("|").indexOf(ClientStorageManager.type.toLowerCase())===-1){ClientStorageManager.getItem(prefix+initial,function(storageData){if(storageData){var cities=eval(storageData);ws.weatherCityData[initial]=cities;triggerAutoComplete(cities);}else{triggerAjaxCall(true);}});}else{triggerAjaxCall(false);}}}else{triggerAutoComplete(ws.weatherCityData[initial]);}function triggerAjaxCall(useCSM){if(typeof ws.ACListener[ACElementId]==="undefined"){ws.ACListener[ACElementId]={init:false,fchar:initial,ajaxReady:true};}if(!ws.ACListener[ACElementId].ajaxReady){return ;}ws.ACListener[ACElementId].ajaxReady=false;$(preloaderObj).show();$.ajax({type:"GET",url:ws.SERVICE_URL_CITY_DATA,data:({cityNameInitial:initial,cb:cacheBuster()}),dataType:"text",cache:true,success:function(data,textStatus){if(data){var cities=data.replace(/var cities\=/,"");if(useCSM){ClientStorageManager.saveItem({key:prefix+initial,value:cities,expire:7,success:function(returnObj){ws.weatherCityData[initial]=returnObj.value;},error:function(err){}});if(typeof ws.weatherCityData[initial]==="undefined"){ws.weatherCityData[initial]=cities;}triggerAutoComplete(ws.weatherCityData[initial]);}else{ws.weatherCityData[initial]=cities;triggerAutoComplete(ws.weatherCityData[initial]);}$(preloaderObj).fadeOut("slow");ws.ACListener[ACElementId].ajaxReady=true;}else{$(preloaderObj).hide();ws.ACListener[ACElementId].ajaxReady=true;showToConsole(ws.MSG_DEFAULT_ERROR);}},error:function(XMLHttpRequest,textStatus,errorThrown){$(preloaderObj).hide();ws.ACListener[ACElementId].ajaxReady=true;showToConsole(ws.MSG_DEFAULT_ERROR);}});}function triggerAutoComplete(cities){cities=eval(cities);if(typeof ws.ACListener[ACElementId]==="undefined"){ws.ACListener[ACElementId]={init:false,fchar:initial,ajaxReady:true};}else{if(ws.ACListener[ACElementId].fchar!==initial){ws.ACListener[ACElementId].init=false;}}if(!ws.ACListener[ACElementId].init){$(element).autocomplete(cities,{max:20,width:193,selectFirst:false,resultsClass:"ac_results ac_results_"+appendix,formatItem:function(item){return item.t;}}).result(function(event,item){ws.currentLocId=item.id;ws.currentCityString=item.t;});ws.ACListener[ACElementId].init=true;ws.ACListener[ACElementId].fchar=initial;}}},renderHeaderLocationChange:function(){var ws=this,htmlArr=[],formTimeout=false;htmlArr.push('<div id="weather_loc_change" style="display:none;"><form action="#" method="get"><fieldset><legend>Weather</legend>');htmlArr.push('<input id="weather_headInput" type="text" name="searchTerm" value="Enter city or zip" />&nbsp;<input type="submit" name="submit" class="btn-smll" value="Go" />');htmlArr.push("</fieldset></form></div>");var htmlElm=$(htmlArr.join(""));htmlElm.find("form").each(function(){var elm=$(this),search=elm.find("#weather_headInput");search.focus(function(){ws.searchFieldOnFocus(this);clearTimeout(formTimeout);}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val==="")?ws.TXT_HEADER_SEARCH_FIELD:val);formTimeout=setTimeout(function(){ws.changeHeaderLocation();},3000);});elm.submit(function(){clearTimeout(formTimeout);ws.locationSearchAction(elm,"#weather_headInput",ws.UPDATE_HEADER_ACTION);return false;});});$(".weather-search, #weather_corner").append(htmlElm);},changeHeaderLocation:function(){var info=$("#weather_cur_loc"),search=$("#weather_loc_change");if(info.is(":hidden")){search.css("display","none");info.css({opacity:"0",display:"inline"});animateFn.show(info,{speed:300,type:"swing"});}else{info.css("display","none");search.css({opacity:"0",display:"inline"});animateFn.show(search,{speed:300,type:"swing"});}},headerDisplayAction:function(locationId){var ws=this;var headerDataCookie=this.getWeatherDataCookie(locationId);if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie),wdObj=headerDataObj.weatherData,htmlArr=[],imgSrc=this.PATH_WEATHER_ICON_IMAGE+wdObj.days[0].image+this.WEATHER_ICON_IMAGE_EXT;htmlArr.push('<div id="weather_cur_loc"><p><a href="#">Forecast:</a> <span class="degree">'+wdObj.currentTemp+'&#176; <img src="http://www.foxnews.com/static/all/img/clear.gif" style="width:24px; height:24px;"/></span> ');htmlArr.push('<span class="location">'+wdObj.cityName+'</span> <a href="#">edit</a></p></div>');var htmlElm=$(htmlArr.join(""));htmlElm.find("span.degree img").each(function(){var elm=$(this);elm.css({opacity:"0",display:"inline"});if(wdObj.days[0].image.length===0){elm.css("display","none");}else{if(!$.browser.opera){var img=new Image();img.onload=function(){elm.attr("src",imgSrc);animateFn.show(elm,{speed:300,type:"swing"});};img.src=imgSrc;}else{elm.css({backgroundImage:"none",display:"inline",opacity:"0"});elm.attr({src:imgSrc});animateFn.show(elm,{speed:300,type:"linear"});}}});htmlElm.find("a").each(function(){var aTag=$(this);var text=aTag.text().toLowerCase();aTag.click(function(){if(text.indexOf("forecast")>-1){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);}if(text.indexOf("edit")>-1){ws.changeHeaderLocation();}return false;});});$(".weather-search, #weather_corner").html(htmlElm);}}};function ExternalServices(root){this.root=root;this._DataObj=false;this._ExtWidgets=[];}ExternalServices.prototype={reloadWidgets:function(){var x,widgets=this._ExtWidgets,len=widgets.length;for(x=0;x<len;x++){var fn=widgets[x];if(typeof fn==="function"){fn();}}},setWidget:function(fn,execute){var EX=this;if(typeof fn==="function"){EX._ExtWidgets.push(fn);if(execute){fn();}}},getCurrentWeatherData:function(){},createForm:function(formElm){if(!formElm){return false;}var EX=this,root=this.root;formElm.each(function(){var form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value");search.focus(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val===txt)?"":val);}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val==="")?txt:val);});form.submit(function(){root.locationSearchAction(this,"#weather_widgetInput",root.UPDATE_HEADER_ACTION);return false;});});}};function showToConsole(str){if(typeof (console)==="object"){console.log(str);}}function cacheBuster(freq){freq=freq||false;var date=new Date(),str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString();switch(freq){case"h":str+=(date.getHours()+1).toString();break;case"30m":str+=(date.getHours()+1).toString()+((date.getMinutes()%30===0)?"1":"0");break;default:str+=(date.getHours()+1).toString();}return str;}var weather_service=window.weather_service=new WeatherService("weather_service");var animateFn={isIE:function(){return $.browser.msie;},animate:function(elm,cfg){if(!this.isIE()){if(!cfg.speed){cfg.speed=300;}if(!cfg.type){cfg.type="swing";}elm.animate(cfg.css,cfg.speed,cfg.type,function(){if(cfg.callback){cfg.callback();}});}else{elm.css(cfg.css);elm.css("opacity","");if(cfg.callback){cfg.callback();}}},hide:function(elm,cfg){if(!elm){return false;}var i,cssObj={opacity:"0"};if(cfg.css){for(i in cfg.css){cssObj[i]=cfg.css[i];}}cfg.css=cssObj;this.animate(elm,cfg);},show:function(elm,cfg){if(!elm){return false;}var i,cssObj={opacity:"1"};if(cfg.css){for(i in cfg.css){cssObj[i]=cfg.css[i];}}cfg.css=cssObj;this.animate(elm,cfg);}};}(jQuery));(function($){var _cbStr=(typeof _cbVarStr!=="undefined")?_cbVarStr:"b1002";var CONST={thirdParty:{recaptcha:{url:"/ajax/authentication/recaptcha.jsp",elmId:"recaptcha_div",id:"6LcspgwAAAAAAPIfJ3yUt1aUl_Thr8TQfQmR1oRP",settings:{theme:"clean"}},disqus:{widget:"DQIntegrationService",cookie:{name:"p_DQS",expires:14},hash:{empty:"e30=",expires:60}},idms:{cookie:{name:"p_IDMS",expires:14},hash:{empty:"e30=",expires:"5"},callback:{login:"FOX_IDMS_auth_logged_in",logout:"FOX_IDMS_auth_logged_in"}},fm:{cookie:{name:"SABRE_ID",expires:14},hash:{empty:"e30=",expires:"5"},callback:{login:"FOX_FM_auth_logged_in",logout:"FOX_FM_auth_logged_in"}}}};var AuthService=window.AuthService=function(initVars){this.validationUrl="/authentication/registration/validate/";this.getRegistrationDataUrl="/authentication/registration/get";this.loginSubmitUrl="/authentication/login/submit";this.logoutSubmitUrl="/authentication/logout/submit";this.requestLogoutUrl="/authentication/logout/submit";this.refreshAuthUrl="/authentication/login/refresh?"+_cbStr+"=t";this.forgottenPasswordSubmitUrl="/authentication/forgotten_password/submit";this.registrationSubmitUrl="/authentication/registration/submit";this.ajaxRetrieveHtmlUrl="/ajax/authentication/includes.jsp";this.newsAlertSubscriptionUrl="/portal/newsalertsubscribe";this.defaultDomain="foxnews.com";var i;for(i in initVars){this[i]=initVars[i];}};AuthService.prototype={init:function(config){var i,as=this;for(i in config){this[i]=config[i];}if(window.FOX_isMnt&&FOX_isMnt()){$("#account, #authentication").hide();}this.thirdPartyAPI=new ThirdPartyAPI(this);},extend:function(obj){var i,self=this;for(i in obj){this[i]=obj[i];}},createObjFromJSON:function(jsonString){if(typeof jsonString==="string"){if(($.trim(jsonString)).length>0){return eval("("+unescape(jsonString).replace(/\s+/g," ")+")");}}return false;},isLoggedIn:function(){return($.cookie("p_UN")&&$.cookie("p_UN")!=="")?true:false;},isThirdParty:function(){return($.cookie("p_Thirdparty"))?true:false;},getDisplayName:function(){var as=this;function pipeCheck(str){var separator="|id:",idx=str.lastIndexOf(separator);if(idx<1){return str;}return str.substr(0,idx);}if(as.isLoggedIn()){var displayName=false;if(typeof $.cookie("p_DN")==="string"){var dn=$.cookie("p_DN");if(dn.length>0){dn=pipeCheck(dn);displayName=dn.replace(/\+/g," ").replace(/\"/g,"");}}return(displayName)?displayName:as.getUsername();}return"";},getUsername:function(){if(this.isLoggedIn()){return $.cookie("p_UN");}},getUserEmail:function(){return(this.isLoggedIn())?$.cookie("p_EM"):"";},getUserLocation:function(){return(this.isLoggedIn())?$.cookie("p_UL"):"";},getOverlayHtml:function(overlayView,origDomain,callbackFn){callbackFn=callbackFn||false;var as=this;if(!origDomain){origDomain=as.defaultDomain;}$.ajax({type:"GET",async:false,url:as.ajaxRetrieveHtmlUrl,data:({view:overlayView,authDomain:origDomain,cb:_cbStr}),success:function(data,textStatus){$("body").append(data);if(typeof callbackFn==="function"){callbackFn();}}});},closeOverlay:function(elementId){var as=this,elm=$("#"+elementId);elm.find("input[type*=text], input[type*=password]").val("");elm.find("input:checkbox:checked").attr("checked","");elm.find("input[type*=text]").removeClass("error");as.overlay.hide(elm);},providerOverlay:function(authDomain,callbackFn){var as=this;if(!as.isLoggedIn()){if($("#login-provider").size()===0){as.getOverlayHtml("login-provider",authDomain,callbackFn);}as.initProviderOverlay();as.overlay.show("#login-provider");$("#user-login-form-overlay").find("input[name*=username]").focus();return false;}return true;},initProviderOverlay:function(){var as=this;var login_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){elm.find(".error-box-login").html("User name and password are required.").show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.login(elm);return false;}};$("#user-login-form-overlay").validate(login_validation_options);$(".thirdparty a img").hover(function(){var thirdPartyTooltip=$(this).parent().parent().siblings(0);thirdPartyTooltip.find(".icon-desc-bg p").html($(this).attr("alt"));thirdPartyTooltip.addClass($(this).attr("name")).css("visibility","visible");},function(){var thirdPartyTooltip=$(this).parent().parent().siblings(0);thirdPartyTooltip.find(".icon-desc-bg p").html("");thirdPartyTooltip.removeClass($(this).attr("name")).css("visibility","hidden");});var reset_password_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){elm.find(".error-box-login").html("The email address you entered is invalid.").show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.forgotPassword(elm);return false;}};$("#reset-password .user-email-reset-form").validate(reset_password_validation_options);$("#forgot-password-overlay").unbind("click").click(function(){$("#reset-password.reset").toggle();});},registrationOverlay:function(authDomain,callbackFn){var as=this;if(!as.isLoggedIn()){if($("#registration-overlay").length===0){as.getOverlayHtml("registration-overlay",authDomain,callbackFn);}increaseRefresh();$("#reg_user_name").removeAttr("readonly");$("#reg_user_name").next(".validate").next(".validate").children(".sprites").show();as.initRegistrationOverlay();as.overlay.show("#registration-overlay");return false;}return true;},initRegistrationOverlay:function(){var as=this;var registration_validation_options={submitHandler:function(form){as.register($(form));return false;},errorElement:"p",errorPlacement:function(err,elm){var errMsg=err.text(),id=elm.attr("id");if(elm.data("_errMsg")===errMsg){return false;}elm.data("_errMsg",errMsg);var parent=elm.parent(),marker=parent.find("> .validate:first .sprites"),msgAlert=parent.find("> .error-tip p.err-msg"),errMsg=err.text(),reqTxt=parent.find("> .req-text");var css={valid:"check",invalid:"red-exclamation"};reqTxt.hide();var noMsg="reg_birth_year";var noMarker="reg_zip_code|reg_location";if(msgAlert.size()===0&&noMsg.indexOf(id)===-1){var validate=parent.find("> .validate:first");if(id==="agreement"){validate=elm;}msgAlert=$('<div class="error-tip"><span class="form-note"><p class="err-msg"></p></span></div>').insertAfter(validate);msgAlert=parent.find("> .error-tip p.err-msg");if(id==="agreement"){parent.find("> .error-tip").css({position:"absolute",width:"220px",right:"0",top:"0"});}}msgAlert.css("padding-top","0px");if(errMsg.length===0){if(noMarker.indexOf(id)===-1){marker.removeClass(css.invalid).addClass(css.valid);}msgAlert.html("&nbsp;");}else{if(noMarker.indexOf(id)===-1){marker.removeClass(css.valid).addClass(css.invalid);}msgAlert.html(errMsg);}if(marker.is(":hidden")&&noMarker.indexOf(id)===-1){marker.css("display","block");}},success:function(){},rules:{propID_username:{required:true,minlength:5,maxlength:15,validChars:true,remote:{url:as.validationUrl,type:"post"}},propID_email:{required:true,email:true,maxlength:250,strictEmail:true,remote:{url:as.validationUrl,type:"post"}},propID_pass1:{required:true,noSpaces:true,minlength:5,maxlength:12},propID_pass2:{required:true,noSpaces:true,minlength:5,maxlength:12,equalTo:"#reg_password"},propID_country:{required:true},propID_zip:{digits:true,maxlength:5,minlength:5,zipRequired:true,zipCheck:true,remote:{url:as.validationUrl,type:"post"}},propID_birthyear:{required:true,min:1900,isMaxYear:true},propID_terms:{required:true}},messages:{propID_username:{required:"Please enter a username",minlength:"Your username must consist of at least 5 characters",maxlength:"Your username is too long",validChars:"please supply valid characters only.",remote:"This username is already in use."},propID_email:{required:"Please enter an email address.",email:"Your email address must be valid.",maxlength:"Your email address is too long.",remote:"A user is already registered with this email."},propID_pass1:{required:"Please enter a password.",minlength:"Your password must be at least 5 characters.",maxlength:"Your password is too long."},propID_pass2:{required:"Please confirm your password.",equalTo:"Your passwords do not match."},propID_terms:{required:"In order to join Fox News community you must agree to our terms and conditions. Please review and check the box to join."},propID_country:{required:"Please select your country of residence."},propID_zip:{digits:"Please enter a valid zip code.",maxlength:"A valid zip code is five digits.",minlength:"A valid zip code is five digits.",required:"Please enter a zip code.",remote:"Please enter a valid United States zip code."},propID_birthyear:{required:"Please select your birth year."}}};as.instantiateValidators();$("#registration").validate(registration_validation_options);as.showRecaptcha();},initOpxLogin:function(){var as=this;var reset_password_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){var message="The email address you entered is invalid.";elm.find(".error-box-login").html(message).show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.forgotPassword(elm);return false;}};$("#reset-password .user-email-reset-form").validate(reset_password_validation_options);},initEditProfile:function(){var as=this;var edit_profile_validation_options={debug:false,submitHandler:function(form){if($("#reg_email").val()===""&&$("#reg_email2").val()===""){$("#reg_email").val($("#reg_curemail").val());$("#reg_email2").val($("#reg_curemail").val());}form.submit();return false;},errorElement:"p",errorPlacement:function(error,element){var elm=$(element),elem_pos=elm.position(),error_message=$(error[0]).html(),error_name=elm.attr("id").replace("reg","err");error_html=[];error_html.push('<div class="regoverlay_container error-tip" id="'+error_name+'">');error_html.push('<div class="overlaytip_top"></div><div class="form-note"><img src="/static/v/all/img/alert-yellow.gif" alt="" />');error_html.push('<p class="err-msg">'+error_message+'</p></div><div class="overlaytip_btm"></div></div>');error_html.join("");$("div.regoverlay_container.error-tip").hide();var errorElm=$("div#"+error_name);if(errorElm.size()>0){if(error_message!==""){errorElm.find("p.err-msg").html(error_message).show();}}else{elm.after(error_html);errorElm.hide();}errorElm.css({top:(elem_pos.top-80)+"px",left:(elem_pos.left+50)+"px"});errorElm.next(".validate > .sprites").removeClass("check").addClass("red-exclamation").show();},success:function(label){var errDiv=$("div#"+$(label).attr("htmlfor").replace("reg","err"));errDiv.hide();errDiv.next(".validate > .sprites").removeClass("red-exclamation").addClass("check");},rules:{propID_email:{required:false,email:true,maxlength:250,strictEmail:true},propID_email2:{equalTo:"#reg_email"},propID_pass1:{noSpaces:true,minlength:5,maxlength:12},propID_pass2:{noSpaces:true,minlength:5,maxlength:12,equalTo:"#reg_password"},propID_country:{required:true},propID_zip:{digits:true,maxlength:5,minlength:5,zipRequired:true,zipCheck:true},propID_gender:{required:true},propID_birthyear:{required:true,min:1900,isMaxYear:true}},messages:{propID_email:{required:"Please enter an email address.",email:"Your email address must be valid.",maxlength:"Your email address is too long.",remote:"A user is already registered with this email."},propID_email2:{required:"Please confirm your email address.",equalTo:"Please double check your email. They do not match."},propID_pass1:{required:"Please enter a password.",minlength:"Your password must be at least 5 characters.",maxlength:"Your password is too long."},propID_pass2:{required:"Please confirm your password.",equalTo:"Your passwords do not match."},propID_country:{required:"Please select your country of residence."},propID_zip:{digits:"Please enter a valid zip code.",maxlength:"A valid zip code is five digits.",minlength:"A valid zip code is five digits.",required:"Please enter a zip code."},propID_gender:{required:"Please submit your gender."},propID_birthyear:{required:"Please select your birth year."}}};as.instantiateValidators();$("#reg_profile").validate(edit_profile_validation_options);},forgotPasswordOverlay:function(obj){var as=this;if(!as.isLoggedIn()){if($("#forgot-password-overlay").size()===0){as.getOverlayHtml("forgot-password-overlay");}var offset=$(obj).offset();var leftPos=offset.left-$("#forgot-password-overlay").width();as.overlay.show("#forgot-password-overlay");return false;}return true;},login:function(formObj){formObj=$(formObj);var as=this,user=formObj.find("input[name*=username]").val(),pass=formObj.find("input[name*=password]").val(),rememberMe=(formObj.find("input[name*=rememberMe]:checked").size()>0)?true:false,numOfDays=(rememberMe)?365:0;$.ajax({type:"POST",url:as.loginSubmitUrl,data:({username:user,password:pass,authDomain:as.domain,rememberMe:rememberMe}),dataType:"text",success:function(data,textStatus){var loginResponse=as.createObjFromJSON(data);var messageArr=loginResponse.authentication.message.split(" ");if(!loginResponse){showToConsole("[authSrv.login] No data returned from request.",true);return false;}if(loginResponse.authentication.status==="ok"){if(typeof $.ad!="undefined"){$.ad.track({login:{userid:"fox login - id: "+as.getDisplayName()+" email:"+as.getUserEmail()}});}as.onSuccessLogin();as.thirdPartyAPI.disqus.login(loginResponse);as.thirdPartyAPI.idms.login(loginResponse);as.thirdPartyAPI.fileMobile.login(loginResponse);as.closeOverlay("login-provider");if(as.domain==="foxnews.com"&&window.location.pathname.indexOf("/community/user/")>-1){window.location.reload();}}else{formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".login-error").html("We are sorry, please try again.").show();}},error:function(XMLHttpRequest,textStatus,errorThrown){formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".login-error").html("We are sorry, please try again later.").show();}});},logout:function(origDomain){var as=this;origDomain=origDomain||as.defaultDomain;$.ajax({type:"POST",url:as.logoutSubmitUrl,data:({authDomain:origDomain}),success:function(data,textStatus){if(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.logout] No data returned from request.",true);return false;}if(authObj.authentication.status==="ok"){as.thirdPartyAPI.disqus.logout(authObj,function(){as.thirdPartyAPI.idms.logout(authObj,function(){as.thirdPartyAPI.fileMobile.logout(authObj,function(){if(window.location.pathname.indexOf("/community/user/profile")>-1){window.location.href="http://www.foxnews.com/index.html";}else{window.location.reload();}});});});}}},error:function(XMLHttpRequest,textStatus,errorThrown){}});},requestLogOut:function(config){config=config||{};var as=this;$.ajax({type:"GET",url:as.requestLogoutUrl,success:function(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.requestLoginInfo] No data returned from request.",true);return false;}if(typeof config.callback==="function"){config.callback(authObj);}}});},requestLoginInfo:function(config){config=config||{};var as=this;$.ajax({type:"POST",url:as.refreshAuthUrl,success:function(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.requestLoginInfo] No data returned from request.",true);return false;}if(typeof config.callback==="function"){config.callback(authObj);}}});},forgotPassword:function(formObj){formObj=$(formObj);var as=this,email=formObj.find("input[name*=emailResetField]").val();$.ajax({type:"POST",url:as.forgottenPasswordSubmitUrl,data:({email:email}),dataType:"text",success:function(data,textStatus){var forgotPasswordResponse=as.createObjFromJSON(data);if(!forgotPasswordResponse){showToConsole("[authSrv.forgotPassword] No data returned from request.",true);return false;}if(forgotPasswordResponse.authentication.status==="ok"){formObj.find(".error-box-login").hide();formObj.find(".reset-input-container").hide();formObj.find(".confirm-box-login").html("A reset link has been sent to the email provided.").show();}else{formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".error-box-login").html("The email address you entered is invalid").show();}},error:function(XMLHttpRequest,textStatus,errorThrown){formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".error-box-login").html("We're sorry your password cannot be reset at this time. Please try again later.").show();}});},register:function(formObj){var as=this,privacy=(formObj.find("#reg_location_confirm:checked").size()>0)?"hide":"",challenge=as.thirdPartyAPI.recaptcha.getChallenge(),response=as.thirdPartyAPI.recaptcha.getResponse();var slids=[];if(formObj.find("#fnbreaking:checked").size()>0){slids.push("C2F278094FACCEA62391025B7A52D8EB");}if(formObj.find("#fbbreaking:checked").size()>0){slids.push("5C84B893BD6D939E84FAE1A8E6E9525A");}if(slids.length>0){$.ajax({type:"GET",url:as.newsAlertSubscriptionUrl,data:({slids:slids.join(","),email:$("#reg_email").val()}),dataType:"text"});}$.ajax({type:"POST",url:as.registrationSubmitUrl,data:{authDomain:as.domain,realm:"realm1",username:formObj.find("#reg_user_name").val(),password:formObj.find("#reg_password").val(),email:formObj.find("#reg_email").val(),zip:formObj.find("#reg_zip_code").val(),country:formObj.find("#reg_country").val(),location_privacy:privacy,birth_year:formObj.find("#reg_birth_year").val(),recaptcha_challenge_field:challenge,recaptcha_response_field:response},dataType:"text",success:function(data,textStatus){var registrationResponse=as.createObjFromJSON(data);var message=registrationResponse.authentication.message;if(message.indexOf("successful registration")>-1&&typeof $.ad!=="undefined"){$.ad.track({registration:{userid:"fox registration - id:"+as.getDisplayName()+" - email:"+as.getUserEmail()}});}if(!registrationResponse){showToConsole("[authSrv.register] No data returned from request.",true);return false;}if(registrationResponse.authentication.status==="ok"){$("#registration-error").hide();$("#registration-overlay").hide();as.getOverlayHtml("registration-thankyou-overlay");decreaseRefresh();authentication_service.onSuccessLogin();as.thirdPartyAPI.disqus.login(registrationResponse);as.thirdPartyAPI.idms.login(registrationResponse);as.thirdPartyAPI.fileMobile.login(registrationResponse);as.overlay.show("#registration-thankyou-overlay");$.scrollTo("#registration-thankyou-overlay");$("#clickToClose").focus();}else{var errorMsg=registrationResponse.authentication.message;as.showRecaptcha();$("#registration-error").html("We are sorry, we could not complete your registration. Please fix the error and try again. <br/> *"+errorMsg).show();$.scrollTo("#registration-error");}},error:function(XMLHttpRequest,message,errorThrown){as.showRecaptcha();$("#registration-error").html("We are sorry, we could not complete your registration. Please try again. <br> *"+message).show();$.scrollTo("#registration-error");}});},overlay:{init:function(action,target){target=$((target||"#registration-overlay"));var as=this;$(action).each(function(){$(action).unbind("click").click(function(){as.show(target);});});},show:function(target){target=$(target);var as=this;if(typeof increaseRefresh!=="undefined"){increaseRefresh();}target.find(".validate a.sprites").unbind("click");if($(".overlay-layer").size()===0){$("body").prepend('<div class="overlay-layer"></div>');}$(".overlay-layer").show();target.each(function(){var elm=$(this);elm.show().fixedBox();if($(window).height()<elm.height()){var scrollTop=$(document).scrollTop();var overlayTop=(target.css("top")).replace(/[a-z]/g,"");var abs=Math.abs(overlayTop)+scrollTop;elm.css({top:abs+"px",position:"absolute"});}elm.find(".field input").removeClass("error").attr("value","");elm.find(".validate a.sprites,.error-tip").hide();var usr=elm.find("#reg_user_name"),usrParent=usr.parent(),pwd=elm.find("#reg_password"),pwdParent=pwd.parent();if(usrParent.find("span.req-text").size()===0){usr.after('<span class="req-text req-user">5-15 characters, cannot be changed</span>');usrParent.focus(function(){elm.find(".req-user").remove();});}if(pwdParent.find("span.req-text").size()===0){pwd.after('<span class="req-text req-password">5-12 characters, no space, case-insensitive</span>');pwdParent.focus(function(){elm.find(".req-password").remove();});}});var close=target.find(".close").parent(),signUpReg=$(".sign_up_registration");close.unbind("click").removeAttr("onclick").click(function(){as.hide(target);return false;});target.find(".buttons input[type='reset']").click(function(){as.hide(target);return false;});signUpReg.click(function(){$(".overlay-layer").show();});},hide:function(target){if(typeof decreaseRefresh!=="undefined"){decreaseRefresh();}$(".overlay-layer").hide();$(target).hide();}},instantiateValidators:function(){var as=this;$.validator.addMethod("validChars",function(value){var i,result=true,iChars="!@#$%^&*()+=-[]\\';,./{}|\":<>?";for(i=0;i<value.length;i++){if(iChars.indexOf(value.charAt(i))!==-1){return false;}}return result;},"Please supply valid characters only.");$.validator.addMethod("strictEmail",function(value){return(value.match(/^([a-zA-Z0-9_.\-\+])+@([a-zA-Z0-9_.\-])+\.([a-zA-Z])+([a-zA-Z])+/)!==null)||(value==="");},"Please supply valid email characters only.");$.validator.addMethod("noSpaces",function(value){var result=true,strArr=[];if(typeof value==="string"&&value.split(" ").length>1){return false;}return result;},"Please remove the blank spaces.");$.validator.addMethod("validCharsName",function(value){var i,resultName=true,iChars='!@#$%^&*()\\+=[];,./{}|":<>?',iCharshp="-",iCharsap="'",counterhp=0,counterap=0;for(i=0;i<value.length;i++){if(iChars.indexOf(value.charAt(i))!==-1){return false;}if(iCharshp.indexOf(value.charAt(i))!==-1){counterhp=counterhp+1;}if(iCharsap.indexOf(value.charAt(i))!==-1){counterap=counterap+1;}}if(counterhp>1){return false;}if(counterap>1){return false;}return resultName;},"Please supply valid characters only.");$.validator.addMethod("isMaxYear",function(value){var result=true,d=new Date(),curr_year=d.getFullYear();if($("#reg_birth_year").val()>(curr_year-13)){return false;}return result;},"You must be at least 13 years old to register for this site.");$.validator.addMethod("zipRequired",function(value){var result=true;country=$("#reg_country").val();if(country==="United States"&&value===""){return false;}return result;},"Zip Code is required.");$.validator.addMethod("zipCheck",function(value){var result=true,regLocation=$("#reg_location");if($("#reg_country").val()==="United States"){regLocation.show();$.ajax({type:"GET",url:as.getRegistrationDataUrl,async:false,data:({zip:$("#reg_zip_code").val()}),dataType:"text",success:function(data,textStatus){if(data){var stateObj=as.createObjFromJSON(data);if(!stateObj){showToConsole("[authSrv.validator] No data returned from request.",true);return false;}var state=stateObj.state_for_zip;regLocation.val((state!=="")?state:"");result=false;}else{regLocation.val("");result=false;}},error:function(XMLHttpRequest,textStatus,errorThrown){regLocation.val("");}});result=(regLocation.val()!=="")?true:false;}else{regLocation.hide();}return result;},"Please enter a valid United States zip code.");},showRecaptcha:function(){var as=this;as.thirdPartyAPI.recaptcha.create();}};var ThirdPartyAPI=(function(){API=function(root){this.root=root;this.recaptcha=new RecaptchaAPI(this);this.disqus=new Disqus(this);this.idms=new IDMS(this);this.fileMobile=new FileMobile(this);};var RecaptchaAPI=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.recaptcha;};RecaptchaAPI.prototype={set:function(fn){var self=this,root=this.root,cfg=this._config;if(typeof Recaptcha!=="undefined"){if(typeof fn==="function"){fn();}}else{window.Recaptcha_Create_Instance=function(){$.loadAttempt(30,500,function(){return(typeof Recaptcha!=="undefined")?true:false;},function(){if(typeof fn==="function"){fn();}});};(function(){var e=document.createElement("script");e.src=cfg.url;e.type="text/javascript";e.async=true;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e);}());}},create:function(){var self=this,cfg=this._config,recaptcha_id=cfg.id,divId=cfg.elmId,settings=cfg.settings;self.set(function(){Recaptcha.create(recaptcha_id,divId,settings);});},getChallenge:function(){if(typeof Recaptcha!=="undefined"){return Recaptcha.get_challenge();}return false;},getResponse:function(){if(typeof Recaptcha!=="undefined"){return Recaptcha.get_response();}return false;}};var Disqus=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.disqus;this.set();};Disqus.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;if(cookieVal){unescape(cookieVal);}var trigger=function(){var data={dqs:cookieVal};root.requestLoginInfo({data:data,callback:function(obj){if(!obj){log("[api.disqus] Refresh service returned no hash value.");return false;}try{var hash=obj.authentication.dqs;self.cookie("set",hash);if(typeof fn==="function"){fn(hash);log("[api.disqus] Hash Refresh Initiated");}}catch(err){log("[api.disqus] Refresh service: "+err);}}});};var loggedOutCookie=function(){root.requestLogOut({callback:function(obj){if(!obj){log("[api.disqus] logout hash service returned no value.");return false;}try{var hash=obj.authentication.dqs;self.cookie("set",hash);fn(hash);}catch(err){log("[api.disqus] Refresh service: "+err);return false;}}});};var hasExpired=function(hasExpiredFn){var cDate=new Date();var curr={time:cDate,epoch:Math.round(cDate.getTime()/1000),expire:new Date(cDate.getTime()+(cfg.hash.expires*60*1000))};curr.expireEpoch=Math.round(curr.expire/1000);var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0],timestamp=arr[2];if(typeof timestamp==="undefined"){return getLoggedOut();}if(isNaN(timestamp)){return getLoggedOut();}if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}timestamp=parseInt(timestamp,10);var tDate=new Date(timestamp*1000);var ts={time:new Date(tDate),epoch:timestamp,expire:new Date(tDate.getTime()+(cfg.hash.expires*60*1000))};ts.expireEpoch=Math.round(ts.expire/1000);if(curr.epoch>=ts.expireEpoch){if(arr[0]!==cfg.hash.empty){return"yes";}}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;case"yes":log("[api.disqus] Hash Expired");trigger();break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var message=data.authentication.message;if(message.indexOf("|")>-1&&typeof $.ad!=="undefined"){regExpId=/([\w]+)[=]([\w,\s]+)$/;var idArr=message.match(regExpId);$.ad.track({login:{userid:"third party login - id:"+idArr[2].replace(/\s/,"")+", service:"+idArr[1]+".com"}});}var self=this;if(data.authentication.dqs){log("[api.disqus] Logging In");self.cookie("set",data.authentication.dqs);self.integrate({token:data.authentication.dqs,usr:self.cookie("get","p_UN")});}if(typeof fn==="function"){fn();}},logout:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.dqs){log("[api.disqus] Logging Out");self.cookie("set",data.authentication.dqs);self.integrate({token:data.authentication.dqs,usr:self.cookie("get","p_UN")});}if(typeof fn==="function"){fn();}},integrate:function(config){config=config||{};var cfg=this._config;var trigger=function(){$.loadAttempt(50,500,function(){return((window.fox&&fox.widgets&&typeof fox.widgets[cfg.widget]==="function")||(typeof window["FOX_"+cfg.widget]==="function"))?true:false;},function(){if(window.fox&&fox.widgets&&typeof fox.widgets[cfg.widget]==="function"){log("[api.disqus] Integrating ");fox.widgets[cfg.widget](config);}else{if(typeof window["FOX_"+cfg.widget]==="function"){log("[api.disqus] Integrating ");window["FOX_"+cfg.widget](config);}}});};$(document).ready(function(){trigger();});},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host="*."+root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",host:host,expires:exp,domain:root.domain};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":$.cookie(cName,null);break;case"get":cName=(data)?data:cName;return($.cookie(cName))?$.cookie(cName):false;}}};var IDMS=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.idms;this.set();};IDMS.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},integrate:function(config){config=config||{};var cfg=this._config,fnName=cfg.callback.login;if(typeof window[fnName]==="function"){window[fnName](config);}},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;var loggedOutCookie=function(){self.cookie("remove");fn(false);};var hasExpired=function(hasExpiredFn){var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0];if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.idms){log("[api.idms] Logging In");self.cookie("set",data.authentication.idms);self.integrate({token:data.authentication.idms,usr:self.cookie("get","p_UN")});}else{log("[api.idms] No IDMS authentication found.");}if(typeof fn==="function"){fn();}},logout:function(data,fn){var self=this,cfg=this._config,fnName=cfg.callback.logout;self.cookie("remove-full");if(typeof window[fnName]==="function"){window[fnName](cfg);}if(typeof fn==="function"){fn();}},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host=root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",expires:exp,domain:host};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":options={path:"/",domain:host};$.cookie(cName,null,options);break;case"remove-full":options={path:"/",domain:host};$.cookie(cName,null,options);$.cookie(cName,"BLAH");$.cookie(cName,null);break;case"get":cName=(data)?data:cName;var val=($.cookie(cName))?$.cookie(cName):false;return val;}}};var FileMobile=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.fm;this.set();};FileMobile.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},integrate:function(config){config=config||{};var cfg=this._config,fnName=cfg.callback.login;if(typeof window[fnName]==="function"){window[fnName](config);}},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;var loggedOutCookie=function(){self.cookie("remove");fn(false);};var hasExpired=function(hasExpiredFn){var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0];if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.fm){log("[api.idms] Logging In");self.cookie("set",data.authentication.fm);self.integrate({token:data.authentication.fm,usr:self.cookie("get","p_UN")});}else{log("[api.idms] No IDMS authentication found.");}if(typeof fn==="function"){fn();}},logout:function(data,fn){var self=this,cfg=this._config,fnName=cfg.callback.logout;self.cookie("remove-full");if(typeof window[fnName]==="function"){window[fnName](cfg);}if(typeof fn==="function"){fn();}},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host=root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",expires:exp,domain:host};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":options={path:"/",domain:host};$.cookie(cName,null,options);break;case"remove-full":options={path:"/",domain:host};$.cookie(cName,null,options);$.cookie(cName,"BLAH");$.cookie(cName,null);break;case"get":cName=(data)?data:cName;var val=($.cookie(cName))?$.cookie(cName):false;return val;}}};return API;}());var disablezip=window.disablezip=function(value){var zip=$("#reg_zip_code"),loc=$("#reg_location");if(value==="United States"){zip.removeAttr("readonly").css("background","#fff");zip.next(".validate").children(".sprites").hide();loc.val("");}else{zip.attr("readonly",true).css("background","#ddd").val("");loc.val(value);}};var formatField=window.formatField=function(id,value){var elm=$("#"+id);switch(id){case"reg_first_name":elm.val(value.join(""));break;case"reg_last_name":elm.val(value.join(""));break;default:elm.val(value.toLowerCase().replace(/\s+/gi,""));}};var formatTrim=window.formatTrim=function(id,value){$("#"+id).val(value.replace(/\s+/gi,""));};var isNumberKey=window.isNumberKey=function(evt){var charCode=(evt.which)?evt.which:evt.keyCode;return(charCode>31&&(charCode<48||charCode>57))?false:true;};var increaseRefresh=window.increaseRefresh=function(){if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}else{$("meta[name='refresh'],meta[http-equiv='refresh']").each(function(){var item=$(this),refresh=item.attr("content"),orig=(typeof item.attr("content")!=="undefined")?refresh:false;item.data("RefreshOrig",orig);item.attr("content","7200");});}};var decreaseRefresh=window.decreaseRefresh=function(){if(typeof ew_disableRefresh==="function"){ew_enableRefresh();}else{$("meta[name='refresh'],meta[http-equiv='refresh']").each(function(){var item=$(this),orig=item.data("RefreshOrig");if(orig){item.attr("content",orig);}});}};var showToConsole=function(str,force){force=force||false;var search=(window.location.search).substr(1);if(search.length>0){var x,pairs=search.split("&"),valuePair={};for(x=0;x<pairs.length;x++){var split=pairs[x].split("=");valuePair[split[0]]=split[1];}if(valuePair.stc==="y"||force){if(typeof window.console==="object"){console.log(str);}}}};var log=showToConsole;(function(){function d(c){return typeof c==="function"?!0:!1;}var f=function(){var c,b=arguments;if(b.length===0){return !1;}var a={attempt:0,timeout:500};if(b.length===1&&typeof b[0]==="object"){for(c in b[0]){a[c]=b[0][c];}if(a.callback){c=a.callback;}else{return !1;}if(!c.check||!c.success){return !1;}else{a._check=c.check,a._success=c.success;}if(c.timedOut){a._timeout=c.timedOut;}}else{if(!isNaN(b[0])&&!isNaN(b[1])&&d(b[2])&&d(b[3])){a.attempt=b[0];a.timeout=b[1];a._check=b[2];a._success=b[3];if(b[4]){a._timeout=b[4];}if(b[5]){a._abort=b[5];}}else{if(d(b[0])&&d(b[1])){a._check=b[0];a._success=b[1];if(b[2]){a._timeout=b[2];}if(b[3]){a._abort=b[3];}}else{return !1;}}}if(!d(a._check)||!d(a._success)){return !1;}if(!d(a._timeout)){a._timeout=function(){};}if(isNaN(a.timeout)){return !1;}else{a.timeout=parseInt(a.timeout,10);}if(isNaN(a.attempt)){return !1;}else{a.attempt=parseInt(a.attempt,10);}var e=!1,g=!1;if(a.attempt&&a.timeout){var f=function(){g?clearTimeout(e):a._check()?(a._success(),clearTimeout(e)):a.attempt>0?e=setTimeout(function(){f();},a.timeout):a._timeout();a.attempt--;};f();}else{e=setInterval(function(){g?clearInterval(e):a._check()&&(a._success(),clearInterval(e));},a.timeout);}return{abort:function(){g=!0;}};};if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:f});}else{if(!window.loadAttempt){window.loadAttempt=f;}}})();}(jQuery));var FOX_Janrain_Auth_TPL=(function(){var A='<div style="display:none;" id="resendVerification">    <h1>Resend Email Verification</h1>    <div class="hr"></div>    <p>To sign in you must verify your email address. Fill out the form below and we\'ll send you an email to verify.</p>    {* #resendVerificationForm *}        {* resendVerification_emailAddress *}        <div class="capture_fox_buttoncol">            {* newPasswordFormButton *}        </div>     {* /resendVerificationForm *}</div><div style="display:none;" id="resendVerificationSuccess">    <h1>Your Verification Email Has Been Sent</h1>    <div class="hr"></div>    <p>Check your email for a link to reset your password.</p>    <a href="#" data-capturescreen="signIn" class="capture_btn capture_primary">Sign in</a></div><div style="display:none;" id="resetPasswordUserSuccess">            <h1>Your password has been changed</h1>            <div class="hr"></div>           <p>Password has been successfully updated.</p>            <div class="capture_textRight">                <p><a href="#" data-capturescreen="signIn" class="capture_btn capture_primary">Sign in</a></p>            </div>        </div><div style="display:none;" id="resetPassword">    <h1>Please enter your email address and we\'ll send you a new password.</h1>    <div class="hr"></div>    {* #forgotPasswordForm *}        {* forgotPassword_emailAddress *}        {* errorMessages *}        {* forgotPassword_sendButton *}    {* /forgotPasswordForm *}</div><div style="display:none;" id="resetPasswordSuccess">    <h1>Reset your password</h1>     <div class="hr"></div>    <p>Please reset your password.</p>    {* #resetPasswordForm *}        {* newpassword *}        {* newpasswordConfirm *}          <div class="capture_textRight">             {* newPasswordFormButton *}           </div>    {* /resetPasswordForm *}</div><div style="display: none" id="registrationVerify">            <h2>Sorry we could not verify that email address.</h2>            <p>Please resend verification.</p>        </div><div style="display: none" id="registrationVerified">    <h2>Thanks for verifying your email address</h2></div><div style="display:none;" id="editProfile">           <div id="accounts-header">              <ul>                 <li class="active"><a href="#">Account</a></li>                 <li><a href="#">uReports</a></li>                 <li><a href="#">Activity</a></li>              </ul>           </div>                {* savedProfileMessage *}                {* #photoManager {"custom": true} *}                    {| mainDiv |}                         {| profileImage |}                        <div class="capture_fox_photoLinks">                          <h1>{* public_displayName *}</h1>                          <div id="capture_profile_saved" style="display:none;"><span class="capture_fox_profile_saved"></span>Your profile was last saved <span class="capture_fox_alert_callout" id="capture_alert_callout">just now</span></div>                        {| photoLinks |}                        <span class="janrain_traditional_account_only">                          <a href="#" data-capturescreen="changepassword" class="capture_fox_change_password">Change Password</a>                        </span>                        <div class="cancel-button"><span></span>Back</div>                      </div>                    {| closeDiv |}                    <!-- hidden crop form -->                    <div style="display: none;">                    {| editFormOpen |}                    <div class="capture_footer">                    {| editSubmitButton |}                      <p>or</p>                    {| chooseDifferentPhotoLink |}                    </div>                    {| editFormClose |}                    </div>                    <!-- hidden upload form -->                    <div style="display: none;">                    {| uploadFormOpen |}                    {| uploadFileField |}                    {| uploadSubmitButton |}                    {| photoChooserErrors |}                    {| uploadFormClose |}                    </div>                    <!-- hidden upload screen -->                    <div style="display: none;">                        <div id="{| uploadPhotoScreenId |}" class="janrain-capture-ui capture-ui-content">                            <div class="capture_header">                                <h1>Change Avatar</h1>                            </div>                            <div id="{| prefixFieldName |}_profile_pic_upload" class="{| profilePicClass |}capture_profile_pic_upload capture_default">                                {| uploadImage |}                            </div>                            <div id="{| prefixFieldName |}_profile_pic_uploadform_container" class="capture_uploadPhoto_container">                            </div>                        </div>                    </div>                    <!-- hidden edit photo screen -->                    <div style="display: none;">                        <div id="{| editPhotoScreenId |}" class="janrain-capture-ui capture-ui-content">                            <div class="capture_header">                                <h1>Change Avatar</h1>                            </div>                            <div class="capture_fox_clearfix">                                <div id="{| prefixFieldName |}_profile_pic_editPhoto_container" class="capture_editPhoto_container">                                    <h2><span class="capture_fox_crop_icon"></span>Crop your avatar</h2>                                    <div class="janrainCrop_container_dashed">{| cropImage |}</div>                                </div>                                 <div class="{| profilePicClass |}profile_pic_edit_container">                                    <h2><span class="capture_fox_preview_icon"></span>Avatar Preview</h2>                                    <div id="{| prefixFieldName |}_profile_pic_edit" class="{| profilePicClass |}capture_profile_pic_edit capture_default">                                        {| editImage |}                                    </div>                                </div>                              </div>                       </div>                    </div>                {* /photoManager *}                {* publicProfileLink *}                <h2>Profile</h2>                <div class="hr"></div>                    <div class="capture_fox_editProfile">                    {* editProfileForm *}                        {* edit_firstName *}                        {* edit_lastName *}                        {* edit_email *}                        {* edit_country *}                        {* edit_address1 *}                        {* edit_address2 *}                        {* edit_city *}                        {* edit_state *}                        {* edit_zip *}                        {* edit_birthdate *}                        {* edit_gender *}                      <div class="newsletter-container">                         <h2>Newsletter Subscriptions</h2>                         <div class="hr"></div>                         <div class="news-sub-form">                            <label for="auto-report"><input type="checkbox" name="" id="foxnewsletterIDList_172" value="" />Auto Report</a></label>                            <label for="top-headline"><input type="checkbox" name="" id="foxnewsletterIDList_71" value="" />Top Headlines</a></label>                            <label for="greta-wire"><input type="checkbox" name="" id="foxpromosIDList_139" value="" />GetaWire Alerts</a></label>                            <label for="fn-breaking-alerts"><input type="checkbox" name="" id="foxnewsIDList_35" value="" />Fox News Breaking News Alerts</a></label>                            <label for="bo-opinion"><input type="checkbox" name="" id="foxnewsletterIDList_96" value="" />Best of Opinion</a></label>                            <label for="fb-breaking-alerts"><input type="checkbox" name="" id="foxpromosIDList_32" value="" />Fox Business Breaking News Alerts</a></label>                            <label for="food-drink"><input type="checkbox" name="" id="foxnewsletterIDList_166" value="" />Food & Drink</a></label>                            <label for="pow-pol"><input type="checkbox" name="" id="foxnewsletterIDList_173"  value="" />Power & Politics</a></label>                            <label for="ceo-news"><input type="checkbox" name="" id="foxnewsletterIDList_90" value="" />CEO Newsbrief</a></label>                            <label for="fox-411"><input type="checkbox" name="" id="foxnewsletterIDList_106" value="" />Fox 411</a></label>                            <label for="scitech-geek"><input type="checkbox" name="" id="foxnewsletterIDList_153" value="" />SciTech Geek Sheet</a></label>                            <label for="fb-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_151" value="" />Fox Business Morning Headlines</a></label>                            <label for="health-weekly"><input type="checkbox" name="" id="foxnewsletterIDList_160" value="" />Health Weekly Dose</a></label>                            <label for="week-pass"><input type="checkbox" name="" id="foxnewsletterIDList_171" value="" />Weekly Travel Pass</a></label>                            <label for="most-pop"><input type="checkbox" name="" id="foxnewsletterIDList_69" value="" />Most Popular</a></label>                            <label for="latino-rep"><input type="checkbox" name="" id="foxnewsletterIDList_178" value="" />Latino Report</a></label>                            <label for="urep-mon"><input type="checkbox" name="" id="foxnewsletterIDList_133" value="" />uReport Monthly</a></label>                            <label for="sbc-week"><input type="checkbox" name="" id="foxnewsletterIDList_108" value="" />Small Business Center Weekly Report</a></label>                            <label for="mon-pol-up"><input type="checkbox" name="" id="foxnewsletterIDList_76" value="" />Monthly Politics Update</a></label>                            <label for="fn-mag"><input type="checkbox" name="" id="foxpromosIDList_35" value="" />Fox News Magazine</a></label>                            <label for="pers-finance"><input type="checkbox" name="" id="foxnewsletterIDList_122" value="" />Personal Finance</a></label>                            <label for="fn-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_144" value="" />Fox News Morning Headlines</a></label>                            <label for="fan-scoop"><input type="checkbox" name="" id="foxpromosIDList_42" value="" />Fox Fan Scoop</a></label>                            <label for="fn-fired"><input type="checkbox" name="" id="foxnewsletterIDList_99" value="" />Fox Nation Fired Up</a></label>                         </div>                      </div>                      <h2>Commenting Notifications</h2>                      <div class="hr"></div>                      {* table *}                      <div class="capture_fox_clearfix">                        <div class="capture_right capture_checkbox">                          {* autofollow_conversations *}                        </div>                      </div>                      <div class="hr"></div>                                            <h2>Linked Accounts</h2>                      <div class="hr"></div>                          {* linkedAccounts *}                          {* linkAccountContainer *}                              <h1>Linked Accounts</h1>                              <div class="hr"></div>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'facebook\')" class="capture_secondary capture_fox_social_btn capture_facebook"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Facebook" height="24" width="24" /></span>&nbsp;&nbsp;Facebook</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'google\')" class="capture_secondary capture_fox_social_btn capture_google"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Google" height="24" width="24" /></span>&nbsp;&nbsp;Google</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'twitter\')" class="capture_secondary capture_fox_social_btn capture_twitter"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Twitter" height="24" width="24" /></span>&nbsp;&nbsp;Twitter</a>                               <a href="#" onclick="janrain.engage.signin.triggerFlow(\'yahoo\')" class="capture_secondary capture_fox_social_btn capture_yahoo"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Yahoo" height="24" width="24" /></span>&nbsp;&nbsp;Yahoo</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'linkedin\')" class="capture_secondary capture_fox_social_btn capture_linkedin"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="LinkedIn" height="24" width="24" /></span>&nbsp;&nbsp;Linkedin</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'aol\')" class="capture_secondary capture_fox_social_btn capture_aol"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="AOL" height="24" width="24" /></span>&nbsp;&nbsp;AOL</a>                          {* /linkAccountContainer *}                      <div class="hr"></div>                        <div class="capture_form_item">                          {* submitButton *}                        </div>                    {* /editProfileForm *}                      </div>                      <div class="profile-footer">                         <div class="fox-logo">                         </div>                         <p>&copy;2012 FOX News Network, LLC. All rights reserved.</p>                         <p>This material may not be published, broadcast, rewritten, or redistributed.</p>                         <p>All market data delayed 20 minutes.</p>                         <p><a href="http://www.foxnews.com/about/privacy-policy" target="_blank">Privacy</a> - <a href="http://www.foxnews.com/about/terms-of-use" target="_blank">Terms</a> - <a href="http://help.foxnews.com/index.html" target="_blank">FAQ</a></p>                      </div>              </div>        <div style="display:none;" id="newPasswordSuccess" class="capture_med_footer">              <h1>You did it!</h1>              <div class="hr"></div>              <p>Your password has been successfully changed.</p>            <div class="capture_footer">                <a href="#" class="capture_btn capture_secondary">Close</a>            </div>        </div>        <div style="display:none;" id="changepassword">            <h1>Change Your Password</h1>            <div class="hr"></div>            {* newPasswordForm *}                  {* oldpassword *}                  {* newpassword *}                  {* newpasswordConfirm *}                  <div class="capture_textRight">                     <a href="#" data-capturescreen="forgotPassword">I forgot my password</a>                     {* newPasswordFormButton *}                   </div>            {* /newPasswordForm *}        </div><div style="display: none;" id="publicProfile">        <h1>Member Profile</h1><div class="make-acc">Don\'t have an account? <a onclick="window.janrain.capture.ui.renderScreen(\'signIn\')">Create One Now</a></div>        <div class="capture_profile_section">            <div class="capture_profile_pic capture_default inline">                <div id="profile_pic" class="capture_default">                    {* profilePhotoCustom *}                </div>            </div>        </div>        <div class="capture_profile_section">             <h1 class="capture_display_name">{* public_displayName *}</h1>            {* created *}            {* public_city *}            {* public_state *}            {* public_country *}            {* public_birthdate *}            {* public_gender *}        </div>        <h2>User Stats</h2>        <div class="hr"></div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left"><a href="#">Comments</a></h3>            <h2 class="capture_right">{* public_comments *}</h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left"><a href="#">uReports</a></h3>            <h2 class="capture_right">value</h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left">Likes</h3>            <h2 class="capture_right">{* public_likes *}</h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left">Shares</h3>            <h2 class="capture_right">value</h2>        </div></div><div style="display:none;" id="signIn">            <h1>Sign In</h1>            <div class="capture_signin">                <h2>With your existing account</h2>                <div class="hr"></div>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'facebook\')" class="capture_secondary capture_fox_social_btn capture_facebook"><span class="janrain-provider-icon-24 janrain-provider-icon-facebook-custom"></span>&nbsp;&nbsp;Facebook</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'google\')" class="capture_secondary capture_fox_social_btn capture_google"><span class="janrain-provider-icon-24 janrain-provider-icon-google-custom"></span>&nbsp;&nbsp;Google</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'twitter\')" class="capture_secondary capture_fox_social_btn capture_twitter"><span class="janrain-provider-icon-24 janrain-provider-icon-twitter-custom"></span>&nbsp;&nbsp;Twitter</a>                         <a href="#" onclick="janrain.engage.signin.triggerFlow(\'yahoo\')" class="capture_secondary capture_fox_social_btn capture_yahoo"><span class="janrain-provider-icon-24 janrain-provider-icon-yahoo-custom"></span>&nbsp;&nbsp;Yahoo</a>                       <a href="#" onclick="janrain.engage.signin.triggerFlow(\'linkedin\')" class="capture_secondary capture_fox_social_btn capture_linkedin"><span class="janrain-provider-icon-24 janrain-provider-icon-linkedin-custom"></span>&nbsp;&nbsp;Linkedin</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'aol\')" class="capture_secondary capture_fox_social_btn capture_aol"><span class="janrain-provider-icon-24 janrain-provider-icon-aol-custom"></span>&nbsp;&nbsp;AOL</a>                <div class="capture_fox_clearfix">                    <h2 class="capture_left">With a Fox News account</h2>                     <a href="#" data-capturescreen="traditionalRegistration" class="capture_right capture_fox_marginTop">Sign Up &rarr;</a>                </div>                <div class="hr"></div>                    {* #userInformationForm *}                        {* traditionalSignIn_emailAddress *}                        {* traditionalSignIn_password *}                        <div class="capture_fox_buttoncol">                             <a href="#" data-capturescreen="forgotPassword">I forgot my password</a>                            {* traditionalSignIn_signInButton *}                        </div>                    {* /userInformationForm *}                    <p>Find answers to your questions about the Fox News Community in our <a href="http://help.foxnews.com/index.html" target="_blank">FAQs</a>.</p>            </div>        </div>        <div style="display:none;" id="returnSocial">                <h1>Sign In</h1>                <div class="hr"></div>                <h2>Welcome back, {* welcomeName *} (<a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">not you?</a>)</h2>                <div class="capture_fox_clearfix">                    <h2 class="capture_left">Sign In with your account</h2>                     <div class="capture_right capture_fox_marginTop"><a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">Use another account &rarr;</a></div>            </div>                <div class="hr"></div>                    <a href="#" onclick="janrain.engage.signin.triggerFlow(\'{* returnProvider *}\')" class="capture_secondary capture_fox_social_btn capture_{* returnProvider *}"><span class="janrain-provider-icon-24 janrain-provider-icon-{* returnProvider *}-custom"></span>&nbsp;&nbsp;{* returnProvider *}</a>                <div class="capture_fox_clearfix">                    <a href="http://www.foxnews.com/about/privacy-policy" target="_blank" class="capture_right">Privacy Policy</a>            </div>            </div>                <div style="display:none;" id="returnTraditional">            <h1>Sign In</h1>            <div class="hr"></div>            <h2>Welcome back, <span id="displayNameData"></span>  (<a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">not you?</a>)</h2>            <div class="capture_fox_clearfix">                <h2 class="capture_left">Sign in with your account</h2>                <div class="capture_right capture_fox_marginTop"><a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">Use another account &rarr;</a></div>            </div>            <div class="hr"></div>                        {* #userInformationForm *}                            {* traditionalSignIn_emailAddress *}                            {* traditionalSignIn_password *}                <div class="capture_fox_buttoncol">                                {* traditionalSignIn_signInButton *}                            </div>                        {* /userInformationForm *}<div class="capture_fox_clearfix">                    <a href="http://www.foxnews.com/about/privacy-policy" target="_blank" class="capture_right">Privacy Policy</a>            </div>                    </div>        <div style="display:none;" id="socialRegistration">                <h1>You\'re Almost Done!</h1>                <p>Complete the following form to submit your registration.</p>                <div class="hr"></div>                {* #socialRegistrationForm *}                    {* socialRegistration_firstName *}                    {* socialRegistration_lastName *}                    {* socialRegistration_displayName *}                    {* socialRegistration_emailAddress *}                    {* registration_birthday *}                    <h2>Terms of Service</h2>                    <div class="hr"></div>                    {* agreeToTerms *}                    <div class="capture_textRight">                        {* socialRegistration_button *}                </div>                {* /socialRegistrationForm *}        </div>        <div style="display:none;" id="traditionalRegistration">                <h1>Create a Fox News Account</h1>                <p>Already have an account? <a href="#" data-capturescreen="signIn">Sign In &rarr;</a></p>                <div class="hr"></div>                {* #registrationForm *}                    {* traditionalRegistration_firstName *}                    {* traditionalRegistration_lastName *}                    {* traditionalRegistration_displayName *}                    {* traditionalRegistration_emailAddress *}                    {* traditionalRegistration_password *}                    {* traditionalRegistration_passwordConfirm *}                    {* registration_birthday *}                    <div class="capture_fox_clearfix">                        <h2 class="capture_left">Subscribe to Fox News Email Newsletters</h2>                         <div class="capture_right capture_fox_marginTop">Optional</div>                    </div>                    <h2>Security Check</h2>                    <div class="hr"></div>                    {* captcha *}                    {* agreeToTerms *}                    <div class="capture_textRight">                    {* createAccountButton *}                    </div>                {* /registrationForm *}        </div>                <div style="display:none;" id="registrationSuccess">                <h1>Thank you for registering!</h1>                <div class="hr"></div>                <p>Once you confirm your email address you will be able to access commenting and exclusive content on all the Fox News Digital websites!</p>                <h2>Verify your email</h2>                <div class="hr"></div>                <p>We just sent an email to your account to verify your email address. Check your inbox and click on the link to confirm your account.</p>                <!--                 <p>You are also signed up for the following newsletters:</p>                <ul>                    <li>FPO</li>                    <li>FPO</li>                </ul>                -->                <div class="capture_textRight">                    <a href="#" onclick="janrain.capture.ui.modal.close()" class="capture_btn capture_primary">Close</a>                </div>        </div>        <div style="display:none;" id="forgotPassword">            <h1>Forgot My Password</h1>            <div class="hr"></div>            <h2>Enter your current email address, and we\'ll send you instructions to create a new password.</h2>            {* #forgotPasswordForm *}                {* forgotPassword_emailAddress *}                <div class="capture_textRight">                    {* forgotPassword_sendButton *}                </div>            {* /forgotPasswordForm *}        </div>        <div style="display:none;" id="forgotPasswordSuccess">            <h1>Forgot My Password</h1>            <div class="hr"></div>            <div class="capture_fox_clearfix">              <h2 class="capture_left">Success! You should receive an email shortly with instructions to change your password.</h2>              <a href="#" class="capture_btn capture_primary capture_right" onclick="janrain.capture.ui.modal.close()">Close</a>            </div>            </div>        <div style="display:none;" id="mergeAccounts">            {* mergeAccounts {"custom": true} *}            <h1>Create a Fox News Account</h1>            <div class="hr"></div>            <h2>It looks like you\'ve been here before.<br /><br>            We already have an account for: <br />            <span class="capture_fox_alert">{| current_emailAddress |}</span>            </h2>            <h2>Connect this session with your existing account</h2>            <div class="hr"></div>                <button id="capture_mergeAccounts_mergeAccounts_connectButton" name="mergeAccounts_connectButton" data-capturefield="mergeAccounts_connectButton" type="button" class="capture_secondary capture_fox_social_btn">                    <span class="janrain-provider-icon-24 janrain-provider-icon-{| existing_provider_lowerCase |}-custom"></span>                    <span class="janrain-provider-icon-24 janrain-provider-icon-{| current_provider_lowerCase |}-custom"></span>&nbsp;&nbsp; Connect                </button>        </div>        <div style="display:none;" id="traditionalAuthenticateMerge">            <h1>Sign in to complete account merge</h1>            <div class="hr"></div>            {* #tradAuthenticateMergeForm *}                {* traditionalSignIn_emailAddress *}                {* traditionalSignIn_password *}                <div class="capture_fox_buttoncol">                    {* traditionalSignIn_signInButton *}        </div>             {* /tradAuthenticateMergeForm *}        </div>';return A;}());window.AuthenticationService_Janrain=(function(X,g){function Q(p){return !!(g.location.hostname.indexOf(p)>-1);}if(!g.console){g.console={log:function(){},error:function(){}};}var G=function(){var q=false;if(q&&g.console){try{return console.log.apply(console,arguments);}catch(p){console.log(arguments);}}};var c=(function(){var p=function(r){var q,s,t={},u=this;for(q=0,s=r.length;q<s;q+=1){r[q][2].prototype=r[q][1];t[r[q][0]]=new r[q][2];}for(var v in t){p.prototype[v]=t[v];}};return p;})();var V=function(){},J=function(){},k=function(){},Y=function(){},l=function(){},a=function(){},D=function(){},H=function(){},e=function(){},B=function(){},I=function(){},C=function(){},i={},U={},E={},S={},m={},F={},n={},P={},o={},N={},T={},O;var W=true,K={},d,R,Z,h,f,L,b,M,j=g.location.hash;if(W){K={livefyre:{network:"foxnewsprod.fyre.co",domain:"zor.livefyre.com",jsURL:"zor.livefyre.com/wjs/v3.0/javascripts/livefyre.js",siteid:"310256",siteURL:"http://www.foxnews.com/",el:"livefyre_comment_stream"},janrain:{appUrl:"https://login.foxnews.com",apiURL:"https://signin.foxnews.com/",jsURL:"d16s8pqtk4uodx.cloudfront.net/foxnews-prod/load.js",appId:"macbnjrmzryj7utchqmtukf3se",clientId:"t6emets785a92rr2zc5wkbnrsy59kyny",captureServer:"https://signin.foxnews.com",federateServer:"https://sso.foxnews.com",recaptchaPublicKey:"6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP",backplaneBusName:"fox-news"},ureport:{url:"http://www.foxnews.com/auth/info?callback="}};R=["http://global.fncstatic.com/static/v/all/css/janrain.css"];f="http://www.foxnews.com/community/user/profile/edit";}d="/static/v/all/html/auth-tpl.html";if(g.location.host.indexOf("ureport")>-1){Z=g.location.protocol+"//"+location.host+"/xdcomm.html";M=g.location.protocol+"//"+location.host+"/logout.html";}else{Z=g.location.protocol+"//"+location.host+"/static/v/all/html/xdcomm.html";M=g.location.protocol+"//"+location.host+"/static/v/all/html/logout.html";}l=function(){G("tool Constructor Loaded");};F={loadExtJs:function(u,w,v,r){G("Loading External JS",v,typeof v);var t=document.createElement("script"),p;t.type="text/javascript";t.id=w||"";t.async=true;t.setAttribute("type","text/javascript");if(r==="share"){t.src="http://widget-cdn.rpxnow.com/js/lib/fox-news/widget.js";}else{t.src=document.location.protocol+"//"+((r==="www")?"www.":"")+u;}if(typeof v==="function"){t.onload=t.onerror=t.onreadystatechange=function(s){G(">> !! event",s);if((!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){v();}};}var q=document.getElementsByTagName("script")[0];q.parentNode.insertBefore(t,q);},assert:function(p,q){return(typeof p===q)?true:false;},domTest:function(p){return(p.length!=0)?true:false;},getDomain:function(){var s=g.location,q=s.hostname,r=s.protocol,p=q.split(".");return"www."+p[(p.length-2)]+"."+p[(p.length-1)];}};C=function(){G("DOM Constructor Loaded");};O={setDomReady:function(q){var s=X("#authentication"),t=X("#account"),u=t.find(".user-options"),p=X("body"),r=X("#section-content");var v={acc:t,body:p,user:t.find(".username"),login:s.find(">li:last-child"),authen:s,name:u.find("span"),register:s.find(".first"),noAccount:s,userOptions:u,accountNav:t.find(".encapsulate"),profile:u.find("ul > li.first"),logout:u.find("ul > li:last-child"),hasAccount:t.find(".username"),publicProfile:function(){return{likes:X("#fox_lf_likes"),shares:X("#fox_jr_shares"),ureport:X("#fox_ur_reports"),comments:X("#fox_lf_comments")};},whatCounts:function(){return X(".news-sub-form");},uReport:function(){var w=X("#account");return{acc:w,redBtn:X("#main").find(".red-butt ")};},sectionContent:r};AUTH_Manager.onReady("capture",function(){});q(v);}};H=function(){G("RequireConst Loaded");};S={token:null,template:null,getToken:function(){var p=this;G("$.cookie",typeof X.cookie);try{if(g.localStorage){p.token=localStorage.getItem("janrainCaptureToken");}else{}}catch(q){G(q);}},classLogin:"capture_modal_open",janrainFlow:false,state:{janrain:false,ureport:false,livefyre:false,template:false,backplane:false,badgeville:false},dataConfig:{janrain:{clientId:"c5dr2na59wh3bmna2aqgdnbzapeffy7q"},livefyre:{},ureport:{},whatcounts:{}},loadTemplate:function(){var AD=this,q,u,w,AA=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","registrationVerify","registrationVerified","editProfile"],p=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","registrationVerify","registrationVerified"],t=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","signIn","registrationVerify","registrationVerified","returnTraditional","returnSocial","forgotPasswordSuccess"];u=document.createElement("div");u.id="templateHolder";w=(g.FOX_Janrain_Auth_TPL)?true:false;G("Template INline",w);if(w){var AB=X(FOX_Janrain_Auth_TPL);if(AD.janrainFlow==="profileFlow"){O.setDomReady.sectionContent.append(u);for(var y=0,s=AB.length;y<s;y+=1){for(var v=0,r=p.length;v<r;v+=1){if(AA[v]===AB[y].id){AB[y].innerHTML="";AB[y].id="";}}}X(u).html(AB);U.init();}else{if(AD.janrainFlow==="authFlow"){O.setDomReady.body.append(u);for(y=0,s=AB.length;y<s;y+=1){for(v=0,r=AA.length;v<r;v+=1){if(AA[v]===AB[y].id){AB[y].innerHTML="";AB[y].id="";}}}X(u).html(AB);U.init();}else{G("TEMPLAE",AB,"!",AB[0].id==="resetPasswordUserSuccess");O.setDomReady.sectionContent.append(u);var AC=[];for(y=0,s=AB.length;y<s;y+=1){var AE=false;for(v=0,r=t.length;v<r;v+=1){if(t[v]===AB[y].id){AE=true;}}if(!AE){AB[y].innerHTML="";AB[y].id="";}}G("temp.push(z);",AC);G("TEMPLAE!!",AB);X(u).html(AB);U.init();}}S.state.template=true;}else{X.ajax({type:"GET",url:d,dataType:"html",beforeSend:function(){G("getting Template  beforeSend");},success:function(AG){G("TYPEOF DATA",typeof AG);G("head",X("head").length,"body",X("body").length);if(AD.janrainFlow==="profileFlow"){O.setDomReady.sectionContent.append(z);z=X(z).html(AG);}else{var AF=AG.replace(/\'/gi,"'");O.setDomReady.body.append(z);var z=O.setDomReady.body.find("#templateHolder");z.html(AF);z.find("#editProfile").remove();G("tpl",z.find("#editProfile"));G("tpl",z.find("#editProfile"),z);}S.state.template=true;U.init();}});}}};V=function(){G("Not in Use! > Backplane Constructor Loaded, ");};i={};J=function(){G("JanrainConstructor Loaded");if(typeof g.janrain!=="object"){g.janrain={};}g.janrain.settings={};g.janrain.settings.capture={};g.janrain.settings.share={};janrain.settings.appUrl=K.janrain.appUrl;janrain.settings.custom=true;janrain.settings.capture.flowVersion="HEAD";janrain.settings.capture.responseType="token";janrain.settings.capture.flowName="foxNewsFlow";janrain.settings.capture.stylesheets=R;janrain.settings.tokenUrl=g.location.protocol+"//"+g.location.host+"/";janrain.settings.capture.appId=K.janrain.appId;janrain.settings.capture.redirectUri=g.location.protocol+"//"+g.location.host;janrain.settings.capture.clientId=K.janrain.clientId;janrain.settings.capture.captureServer=K.janrain.captureServer;janrain.settings.capture.recaptchaPublicKey="6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP";janrain.settings.type="embed";janrain.settings.tokenAction="event";janrain.settings.format="two column";janrain.settings.capture.modalBorderOpacity=0;janrain.settings.capture.modalBorderWidth=0;janrain.settings.capture.modalBorderRadius=2;janrain.settings.capture.modalCloseHtml='<span class="janrain-icon-16 janrain-icon-ex"></span>';janrain.settings.capture.modalBorderColor="transparent";janrain.settings.language="en";janrain.settings.capture.setProfileCookie=true;janrain.settings.capture.keepProfileCookieAfterLogout=true;janrain.settings.capture.hideSavedProfileMessageDelay=15000;switch(S.janrainFlow){case"authFlow":janrain.settings.capture.setProfileData="true";janrain.settings.capture.registerFlow="socialRegistration";break;case"profileFlow":janrain.settings.autoSave=true;janrain.settings.screenToRender="editProfile";break;case"emailFlow":janrain.settings.screenToRender="registrationVerify";janrain.settings.capture.registerFlow="socialRegistration";break;case"passwordFlow":janrain.settings.screenToRender="resetPassword";janrain.settings.capture.setProfileData="true";janrain.settings.capture.registerFlow="socialRegistration";break;}janrain.settings.capture.backplane=true;janrain.settings.capture.backplaneBusName=K.janrain.backplaneBusName;janrain.settings.capture.federate=true;janrain.settings.capture.federateServer=K.janrain.federateServer;janrain.settings.capture.federateXdReceiver=Z;janrain.settings.capture.federateLogoutUri=M;janrain.settings.share.providers=["facebook","twitter","linkedin","email"];janrain.settings.share.providersEmail=["google","yahoo"];janrain.settings.share.modes=["broadcast","contact"];janrain.settings.share.attributionDisplay=false;janrain.settings.share.previewMode=0;janrain.settings.share.modalBackgroundColor="#000000";janrain.settings.share.modalBorderRadius="2";janrain.settings.share.modalOpacity="0";janrain.settings.share.modalWidth="0";janrain.settings.share.bodyBackgroundColor="#F3F3F3";janrain.settings.share.bodyBackgroundColorOverride=true;janrain.settings.share.bodyColor="#333";janrain.settings.share.bodyContentBackgroundColor="#ffffff";janrain.settings.share.bodyFontFamily="Helvetica";janrain.settings.share.bodyTabBackgroundColor="#F3F3F3";janrain.settings.share.bodyTabColor="#424242";janrain.settings.share.elementBackgroundColor="#f3f3f3";janrain.settings.share.elementBorderColor="#ccc";janrain.settings.share.elementBorderRadius="3";janrain.settings.share.elementButtonBorderRadius="3";janrain.settings.share.elementButtonBoxShadow="0";janrain.settings.share.elementColor="#333333";janrain.settings.share.elementHoverBackgroundColor="#333333";janrain.settings.share.elementLinkColor="#173951";if(S.janrainFlow==="profileFlow"){janrain.settings.packages=["login","capture"];}else{janrain.settings.packages=["login","capture","share"];}janrain.ready=true;};U={config:{capture:{url:K.janrain.jsURL,id:"janrainAuthWidget"},share:{url:"default",id:"janrainWidgets",type:"share"}},session:false,reset:false,init:function(){var p=this;G("loading Janrain");G("template: init",S.template);p.widgetOnload();p.captureWidgetOnLoad();F.loadExtJs(p.config.capture.url,p.config.capture.id,p.loadedJS.loadJan);return this;},API:{requestSent:false,url:K.janrain.apiURL,token:"",updateAPI:function(p,r){var q=this;if(p==="livefyre"){return{type_name:"user",access_token:q.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+o.userLivefyre.id+'"}}}'};}else{if(p==="livefyre_temp"){return{type_name:"user",access_token:q.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+o.uuid+'@foxnewsprod.fyre.co"}}}'};}else{if(p=="test"){return{type_name:"user",access_token:q.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+r+'"}}}'};}}}},execute:function(q,p){var s=this,r="FOX_Janrain_EXEC";p.jsonp=r;if(typeof g[r]!=="function"){g[r]=function(t){G("Janrain API Executed",t);if(t.code==414){n.janrain.tokenRefreshed();n.janrain.signOut();G("414 Error,token expired");n.domEvents.logoutSuccess();return false;}else{if(t.code==310){n.domEvents.logoutSuccess();n.janrain.signOut();G("310 Error,token expired");return false;}else{if(!t.code&&!t.stat){n.domEvents.logoutSuccess();n.janrain.signOut();G("No Code Error and No Stat response");return false;}else{if(t.stat==="ok"){s.requestSent=true;o.uuid=t.result.uuid;o.email=t.result.email;o.userJanrain=t.result;o.displayName=t.result.displayName;n.displayName();if(X("#authentication").css("display")==="block"){n.domEvents.loginSuccess();}if(O.setDomReady.acc.hasClass("alt-style")){n.displayShowsProfile();}P.uLogin(U.API.token,o.email,o.uuid);if(t.result.externalServices.livefyre.livefyre_id==null||t.result.externalServices.livefyre.livefyre_id==="null"||t.result.externalServices.livefyre.livefyre_id===""){s.update("entity.update",s.updateAPI("livefyre_temp"));}}}}}};}X.ajax({data:p,url:s.url+q,dataType:"script",async:true,cache:true});},update:function(q,p){var s=this,r="FOX_Janrain_UPD";p.jsonp=r;if(typeof g[r]!=="function"){g[r]=function(t){G("Janrain API Updated",t);};}X.ajax({data:p,url:s.url+q,dataType:"script",async:true,cache:true});}},loadedJS:{loadJan:function(){if(typeof janrain==="object"){G("Janrain Loaded",(g.janrain));S.state.janrain=true;}},loadShare:function(){G("Share Widget Loader",(g.janrain),janrain);}},widgetOnload:function(){g.janrainWidgetOnload=function(){AUTH_Manager.fireReady("janrain");G("janrainWidgetOnload Executed");G("is backplane object",(typeof g.Backplane==="object")?true:false);};return this;},captureWidgetOnLoad:function(){G("captureWidgetOnload Fired");g.janrainCaptureWidgetOnLoad=function(){var p=janrain.events;G("janrainCaptureWidgetOnLoad is Executed by Janrain");AUTH_Manager.fireReady("capture");p.onCaptureSuccessfulLogin.addHandler(n.janrain.successfulLogin);p.onCaptureSuccessfulRegistration.addHandler(n.janrain.successfulRegistration);p.onCaptureStartRegistration.addHandler(n.janrain.registrationStart);p.onCaptureAccessDenied.addHandler(n.janrain.accessDenied);p.onAuthWidgetLoad.addHandler(n.janrain.onAuthWidgetLoad);p.onModalClose.addHandler(n.janrain.onModalClose);p.onCaptureValidationSuccess.addHandler(n.janrain.validation.onValidationSuccess);var q=F.domTest(X("#livefyre_comment_stream")),s=X("#disqus_thread");G("livefyreDOm",q);if(!q){var r=document.createElement("div");r.id="livefyre_comment_stream";if(s.length>0){s.attr("id","livefyre_comment_stream");s.empty();q=true;}S.livefyreSet=true;}else{s.remove();S.livefyreSet=false;}if(q&&S.janrainFlow==="authFlow"){p.onCaptureBackplaneReady.addHandler(n.janrain.backplaneReady);}p.onCaptureRenderComplete.addHandler(n.janrain.screen.onRenderComplete);p.onCaptureSuccessfulProfileSave.addHandler(n.janrain.screen.editProfile.onProfileUpdate);p.onCaptureAutoSaveUpdate.addHandler(n.janrain.screen.editProfile.onProfileAutoSave);p.onCaptureScreenShow.addHandler(n.janrain.screen.onScreenShow);p.onCaptureModalReady.addHandler(n.janrain.screen.uiReady);p.onCaptureSessionFound.addHandler(n.janrain.sessionFound);p.onCaptureSessionNotFound.addHandler(n.janrain.sessionNotFound);p.onCaptureSessionEnded.addHandler(n.janrain.sessionEnded);p.onCaptureExpiredToken.addHandler(n.janrain.tokenExpired);p.onCaptureFederateRefreshedToken.addHandler(n.janrain.onRefreshToken);if(S.janrainFlow==="authFlow"){}p.onCaptureError.addHandler(n.janrain.errorEvent);g.janrain.capture.ui.start();};return this;}};Y=function(){G("BadgeVille Constructor Loaded");};m={config:{id:"badgeville",domain:"foxnews.com",username:"@user.foxnews.com",key:"5302cf0355a5410f0beacdf2de891c52",url:"sandbox.v2.badgeville.com/v3/badgeville-current.js?key=5302cf0355a5410f0beacdf2de891c52&domain=foxnews.com&debugInit=false"},setUp:function(){var p=this;g.BadgevilleAsynchInit=function(){G("BadgevilleAsynchInit Executed!",p);G(o.uuid+p.config.username);Badgeville.setPlayer({email:o.uuid+p.config.username,display_name:o.userJanrain.displayName});G("Step1");Badgeville.extend(Badgeville.Lang,{activitiesHeader:"Activities"});G("Step2");Badgeville.crouton=function(){};Badgeville.Settings.showToast=0;Badgeville.Settings.showWaffle=false;G("Step3");Badgeville.ready(function(){G("working test");X("body").bind("click",function(){Badgeville.credit("chat",function(q){G("data",q);});});});G("Step4");};G("window.BadgevilleAsynchInit",(typeof g.BadgevilleAsynchInit));p.loadBadgeville();},loadBadgeville:function(){var p=this;F.loadExtJs(p.config.url,p.config.id,p.badgeLoaded);},badgeLoaded:function(){if(typeof Badgeville==="function"){S.state.badgeville=true;G("Badgeville Loaded",Badgeville);}}};k=function(){G("Livefyre Constructor Loaded");};E={conv:null,url:K.livefyre.jsURL,config:[],network:K.livefyre.network,eventsDelegate:null,commentsNumber:0,customStrings:{sortLabel:"SORT BY"},init:function(p){var q=this;if(typeof fyre!=="object"){F.loadExtJs(E.url,"",E.lfLoaded);}},lfLoaded:function(){G("fyre loaded!",fyre,typeof fyre);G("Testing BACKPLANE",typeof Backplane,typeof g.Backplane);E.eventsDelegate=new fyre.conv.BackplaneAuthDelegate(g.Backplane);E.events.eventsDelegate();E.grabMetaData();},grabMetaData:function(r){var s=this,q={},p=[],v=X('meta[name="livefyreconfig"]'),u=false,t;G("META whatsup!",v,v.attr("collectionmeta"));if(v.attr("siteId")){t=v.attr("siteId");}else{t=K.livefyre.siteid;}if(v.length>0){q={el:K.livefyre.el,siteId:t,checksum:v.attr("checksum"),articleId:v.attr("articleId"),collectionMeta:v.attr("collectionmeta")};}else{q={collectionMeta:"eyJ0eXAiOiJqd3QiLCJhbGciOiJIUzI1NiJ9.eyJ0aXRsZSI6Iih0ZXN0aW5nIDMgMiAxKSBUaGlzIGlzIGFuIG90aGVyIHRlc3QgdGl0bGUuIiwidXJsIjoiaHR0cDpcL1wvZXhhbXBsZS5jYnMuY29tXC9leGFtcGxlMi5odG1sIiwidGFncyI6IiIsImFydGljbGVJZCI6InRlc3RpbmcxMjM0IiwiY2hlY2tzdW0iOiJlNzI0YjFkMGRjOTZmZjQ4NjcxN2EwNzkyOGU2YjU4MCJ9.3ywwCkxPrLxt0fzCTg6yqNlr79jep6IOaSJYS_jNEUk",checksum:"e724b1d0dc96ff486717a07928e6b580",siteId:"303683",articleId:"testing1234",el:"livefyre_comment_stream"};u=true;}if(!u){E.config.push(q);G("Livery Config",E.config);s.setUpLiveFyre();}},setUpLiveFyre:function(){var q=this;var p=q.customStrings;q.conv=fyre.conv.load({strings:p,network:q.network,authDelegate:E.eventsDelegate},q.config,E.events.doLivefyreAuth);},events:{eventsDelegate:function(q){G("arguments",q);var p=E.eventsDelegate;p.login=function(s){G("LOGIN",s);var r=function(){s.success();janrain.events.onCaptureLoginSuccess.removeHandler(r);janrain.events.onModalClose.removeHandler(t);};var t=function(){s.failure();janrain.events.onModalClose.removeHandler(t);janrain.events.onCaptureLoginSuccess.removeHandler(r);};n.janrain.signin();g.Backplane.expectMessages("identity/login");janrain.events.onCaptureLoginSuccess.addHandler(r);janrain.events.onModalClose.addHandler(t);};p.logout=function(r){G("Delegate livefyreLogout",r);n.janrain.signOut();fyre.conv.BackplaneAuthDelegate.prototype.logout.call(p,r);g.livefyreLogout=function(){G("Livefyre Internal Logout Executed!",r);fyre.conv.BackplaneAuthDelegate.prototype.logout.call(p,r);};janrain.events.onCaptureSessionEnded.addHandler(livefyreLogout);};p.viewProfile=function(r,s,t){G(this,"view1",r,"user",s,s.id.split("@")[0],t);var u=s.id.split("@")[0];};p.editProfile=function(r){G("edit",r);n.editProfile();};p.share=function(r){G("share!");r.success();};},doLivefyreAuth:function(p){G("doLiveFyreAuth Fired",p,typeof p.on);G("livefyreProto.commentsNumber",E.commentsNumber);p.on("commentShared",function(q){G("SHARE",q);q.success();});p.on("commentPosted",function(q){G("commentPosted",q);N.commentPost();E.publicProfile();});p.on("commentLiked",function(q){G("commentLiked",q);});p.on("commentFlagged",function(q){G("commentFlagged",q);});p.on("commentCountUpdated",function(r){G("commentCountUpdated",r);E.commentsNumber=r;var q=X(".user-interaction > li.comments");q=(q.size()>0)?q:X(".post-footer .comments");G("COMMENTS",q);if(q.size()>0){if(q.css("display")==="none"){if(q.find("span").size()==0){q.find("a").html("<span></span> "+r+" Comments");}else{q.find("a").html(r+" Comments");}q.css({display:"list-item"});}else{if(q.find("a > span").size()>0){q.find("a").html("<span></span> "+r+" Comments");}else{q.find("a").html(r+" Comments");}}}E.publicProfile();});p.on("initialRenderComplete",function(r){G("initialRenderComplete",r);if(g.FOX_LivefyreIntegrationService){FOX_LivefyreIntegrationService.isReady();}n.livefyre.displayLogo();n.livefyre.hashComment();var q=X(".user-interaction > li.comments");G("COMMENTS",q);if(q.size()>0){if(q.css("display")==="none"){if(q.find("a > span").size()>0){q.find("a").html("<span></span> "+E.commentsNumber+" Comments");}else{q.find("a").html(E.commentsNumber+" Comments");}q.css({display:"list-item"});}else{if(q.find("span").size()==0){q.find("a").html("<span></span> "+E.commentsNumber+" Comments");}else{q.find("a").html(E.commentsNumber+" Comments");}q.css({display:"list-item"});}}E.publicProfile();setInterval(E.publicProfile,15000);});}},API:{url:"http://quill.foxnews-1.fyre.co/profile/",config:{callback:"FOX_Livefyre_API",actor_token:"eyJhbGciOiAiSFMyNTYiLCAidHlwIjogIkpXVCJ9.eyJkb21haW4iOiAiZm94bmV3c3Byb2QuZnlyZS5jbyIsICJleHBpcmVzIjogMTM1MDc3NjkxOC41MzcxNjIsICJ1c2VyX2lkIjogInN5c3RlbSJ9.2NW1RIfpX98NF7491fYzneWDq1Ar1soJZBZjFhmAFYg"},execute:function(q){var p=this;g[p.config.callback]=function(r){G("Livefyre API executed",r);o.userLivefyre=r.data;o.userLivefyre.id=o.uuid+"@"+E.network;o.commentCount=r.data.user_comment_count;o.likeCount=r.data.user_liked_count;q();};X.ajax({url:p.url+o.uuid+"/",data:p.config,dataType:"script",async:true,cache:true});},onProfileUpdate:function(){var q="http://foxnews-1.fyre.co/api/v1.1/private/capture/profile_updated/?jrtoken=",p="FOX_livefyreProfileUpdate";g[p]=function(r){G("Profile Update to LF",r);};X.ajax({url:q+U.API.token+"&callback="+p,dataType:"script",async:true,cache:true});},onLoginSuccessFromJanrain:function(){var r=X("#livefyre_comment_stream");var q=r.find(".fyre-widget .fyre-auth .fyre-login-bar .fyre-user-loggedout"),p="Signing In...";X.loadAttempt(250,150,function(){return(q&&q.text()!==p)?true:false;},function(){q.text(p);});}},publicProfile:function(){var q=X(".fyre-stream-content"),r=q.find("article"),p=X(".fyre-user-loggedin");if(p.size()&&!p.attr("profileSet")){p.attr("data-capturescreen","publicProfile").attr("data-captureuseruuid",o.uuid).attr("profileSet","true");}q.find(".fyre-comment-article").each(function(y){var z=X(this),s=z.find(".fyre-comment-user:eq(0)"),u=s.find("a:eq(0)"),w=z.find("header:eq(0)");if(s.attr("data-author-id")){var t=s.attr("data-author-id").split("@")[0];if(u.hasClass("fyre-comment-author")&&!u.attr("profileSet")){u.attr("data-capturescreen","publicProfile").attr("data-captureuseruuid",t).attr("profileSet","true");if(w.size()>0){var v=w.find("a");if(v.hasClass("fyre-comment-username")&&!v.attr("profileSet")){v.attr("data-capturescreen","publicProfile").attr("data-captureuseruuid",t).attr("profileSet","true");}}}}});}};D=function(){G("uReport Constructor Loaded");var p=P;p.cookieSet=function(){return(X.cookie("SABRE_ID"))?true:false;};p.ureportHost=(function(){return(g.location.host.indexOf("ureport")>-1)?true:false;})();};P={config:{url:K.ureport.url,token:"&token=",email:"&email=",user:"&username="},uLogin:function(s,r,u){G("ureport Login",s,r,u);if(!Q("ureport")){return false;}var t=this,p="FOX_ureport_SABRE",q=t.config;G("_t.cookieSet()",t,K.ureport);g[p]=function(v){G("respone from UREPORT LOGIN",v,"cookies set?",t.cookieSet());if(t.ureportHost){G("Cookie Created");X.cookie("SABRE_ID",v.fm,{path:"/"});var w=O.setDomReady.uReport().acc;G("acc",w,w.hasClass("action"));if(!w.hasClass("action")&&typeof g.Backplane==="function"){if(g.location.pathname==="/assignment"){setTimeout(function(){g.location.pathname="/submitreport";},500);}else{setTimeout(function(){g.location.reload(true);},500);}}}};X.ajax({url:q.url+p+q.token+s+q.email+r+q.user+u,async:true,cache:true,dataType:"script"});},uLogout:function(){var q=this,p=O.setDomReady.uReport().acc;if(q.cookieSet()&&q.ureportHost&&p.hasClass("action")){G("ureport Logout");X.cookie("SABRE_ID",null,{path:"/"});X.cookie("SABRE_ID",null,{path:"/"});setTimeout(function(){g.location.reload(true);},3000);}},clearCookies:function(){G("clearing Sabre Cookies");var q=0,p=0;X.cookie("SABRE_ID",null,{path:"/"});},docReady:(function(){if(!Q("ureport")){return false;}G("DOCREADY U REPORT SET UP");var q=$tartup.site.OnDocReady;function p(r){X.cookie(r,null,{path:"/"});X.cookie("SABRE_ID",null,{path:"/"});X.cookie("p_UN",null,{path:"/"});setTimeout(function(){g.location.reload(true);},3000);}q("slideShowCarousel",{init:function(){var r=this;r.setSlideshow();},setSlideshow:function(){function r(v,u){var t=[];for(var s=1;s<=u.batch.max;s++){t.push('<li><a href="#"></a></li>');}v.html(t.join(""));}X(".c-slide").each(function(u){var y=X(this),v=y.find("div.controls"),w=y.find("ul.sectioning");controlsObj=false;var t=function(z){z.each(function(AA){X(this).click(function(){controlsObj.stopAutoScroll();controlsObj.scrollToBatch(AA+1);return false;});});};var s={auto:{set:true,speed:5000,resume:true},slide:"horizontal",scroll:1,show:1,speed:"slow",rotate:true,eventCallback:function(AA){var AB=AA.start,z=AA.end;if(AA.event==="init"){r(w,AA);t(w.find("> li a"));}w.find("> li").each(function(AC){X(this).toggleClass("active",(AC+1===AA.batch.current));});},controlsCallback:function(z){v.find(".prev").click(function(){z.stopAutoScroll();z.slide("prev");return false;});v.find(".next").click(function(){z.stopAutoScroll();z.slide("next");return false;});controlsObj=z;}};y.jACarousel(s);});}});q("emailSubmit",{init:function(){var r=this;X("#signupSubmit").click(function(){var s=X("#signupEmail").val();r.validate(s);return false;});X("#signupEmail").attr("value","Enter Your Email").blur(function(){var t=X(this),s=t.attr("value");t.attr("value",(s==="")?"Enter Your Email":s);}).focus(function(){var t=X(this),s=t.attr("value");t.attr("value",(s==="Enter Your Email")?"":s);});},validate:function(r){var t=this,s=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(s.test(r)==false){X(".newsletter-module form .error").text("Please enter a valid email address.").css("display","block");}else{t.postEmail(r);X(".newsletter-module form .error").text("Thank you for subscribing to uReport.").css("display","block");X("#signupEmail").val("");}},postEmail:function(r){X.ajax({url:"http://www.foxnews.com/portal/newsalertsubscribe",data:"slids=3DC725E303A24F8D41CEA8699C0FE71E&email="+r});G(r);}});q("SSOModule",{init:function(){var s=this;},attachEvents:function(){var u=this,t;X("#authentication li:nth-child(1)").click(function(r){u.loadIframe("register");r.preventDefault();});X("#authentication li:nth-child(2)").click(function(r){u.loadIframe("login");r.preventDefault();});var y=X("#log-in");if(y.length>0&&!X.cookie("p_Thirdparty")){y.click(function(z){var r=y.attr("href");u.submitreport=(r.split("?")[1]).split("=")[1];u.loadIframe("login");z.preventDefault();});}X(g).resize(function(){var z=X("#foxFrame"),r=X(g);if(z.length){z.width(r.width());z.height(r.height());}});g.location.hash="";var w=X("#account"),s=X.cookie("p_UN"),v=X.cookie("p_Thirdparty");if(w.hasClass("inactive")){s=X.trim(X.cookie("p_UN").replace("."," "));w.prop("onmouseout",null);w.click(function(z){var r=z.currentTarget;X(r).toggleClass("active");});X(".user-options").prepend("<p>You're logged in as <span>"+truncate(s,13)+"</span></p>");if(v==="true"){w.find("li.first").hide();}}else{if(v){s=X.trim(X.cookie("p_UN").replace("."," "));w.addClass("inactive").html('<div class="username"><div class="encapsulate"><img width="13" height="13" alt=" " src="http://www.foxnews.com/static/all/img/head/profile.png"/><span>Account</span></div><div class="user-options"><p>You\'re logged in as <span>'+truncate(s,13)+'</span></p><ul><li class="first"><li><a onclick="killCookie(\'SABRE_ID\');" href="#">Logout</a></li></ul></div></div>');w.hover(function(z){var r=z.currentTarget;X(r).toggleClass("active");},function(z){var r=z.currentTarget;X(r).toggleClass("active");});}}w.find("li:first a").attr("href","https://secure.foxnews.com/community/user/profile").attr("target","_blank");},loadIframe:function(u){var v=this,w,t,s=X("#login");t=encodeURIComponent(g.location.href);w=X("<iframe />",{id:"foxFrame",src:"http://www.foxnews.com/static/v/all/html/ureport-login-ifr-2.html#"+u+"&url="+t,width:X(g).width(),height:X(g).height(),allowTransparency:true,scrolling:"no"});s.show().css("visibility","hidden");w.load(function(){s.css("visibility","visible");}).appendTo(s);},setHashListener:function(){var t=this;X(g).bind("hashchange",X.proxy(t.hashChange,t));if(X.browser.msie&&(X.browser.version==="7.0")){var s=g.location.hash;g.setInterval(function(){if(g.location.hash!==s){X.proxy(t.hashChange(),t);}},100);}},hashChange:function(){var v=this,y=g.location.hash,s,w,t;X('<link href="http://www.foxnews.com/i/redes/foxnews.ico" rel="shortcut icon" type="image/x-icon" />').appendTo("head");if(y.replace("#","")===""){return ;}try{y=y.replace("#","").split("&");s=y[0].split("=")[1];w=y[1].split("=")[1];t=y[2].split("=")[1];}catch(u){}if(s==="true"){X.cookie("SABRE_ID",w);X(g).unbind("hashchange");g.location.hash="";if(v.submitreport!==null){g.location.pathname="/submitreport";}setTimeout(function(){g.location.reload(true);},1000);}if(t==="true"){g.location.hash="";X("#login").html("").hide();}}});}())};I=function(){G("What Counts Constructor Loaded");this.url="";};T={config:{url:"http://"+location.host+"/feeds/app/newsletters/",sub:"?c=sub",unsub:"?c=unsub",find:"?c=find",email:"&email=",r:"&r=",listId:"&list_id=",unsubURL:"http://www.foxnews.com/foxnewsletter/unsubscribe.json",token:"?token=",subRList:"&",callback:"&callback=FOX_whatcounts_UNSUB",cb:"FOX_whatcounts_UNSUB",realms:["foxnews","foxpromos","foxnewsletter","foxbusiness"],janrainHost:"&host=fox-news.dev",Realms:{foxnews:"foxnewsIDList",foxpromos:"foxpromosIDList",foxbusiness:"foxbusinessIDList",foxnewsletter:"foxnewsletterIDList"},idRealms:{foxnewsIDList:"foxnews",foxpromosIDList:"foxpromos",foxbusinessIDList:"foxbusiness",foxnewsletterIDList:"foxnewsletter"},List:{foxnewsIDList:[],foxpromosIDList:[],foxbusinessIDList:[],foxnewsletterIDList:[]},subscribeList:{foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]},unsubscribeList:{foxnewsIDList:[],foxpromosIDList:[],foxbusinessIDList:[],foxnewsletterIDList:[]}},dom:{email:null,newsList:null,load:function(){var p=this;p.newsList=X(".news-sub-form").find("label");p.email=X("#capture_editProfile_edit_email");}},gatherData:function(){},lookUpUser:function(){G("Looking-up USEr on What counts");var t=this,q=t.config;t.dom.load();G("DOM",t.dom.email);if(t.dom.email.length>0){var r=function(u){var v=[q.url,q.find,q.r+q.realms[u],q.email+t.dom.email.attr("value")].join("");G("url",v);X.ajax({url:v,dataType:"html",type:"GET",success:function(AB){G("DATA!! from Whatcounts list",AB);if(AB){var AA=X(AB);AA=AA.find("lists").html();AA=AA.split(",");G("response",AA);var y=function(AD){G("z",AD);G("cfg.realms[x]",q.realms[u],q,u);G("_t.Realms[cfg.realms[x]]",q.Realms[q.realms[u]]);G("_t.List[_t.Realms[cfg.realms[x]]]",q.List[q.Realms[q.realms[u]]]);q.List[q.Realms[q.realms[u]]].push(AA[AD]);};for(var AC=0,w=AA.length;AC<w;AC+=1){y(AC);}}if(u===q.realms.length-1){s();}},error:function(w){G("Error",data,w);}});};for(var p=0;p<q.realms.length;p+=1){r(p);}function s(){G("LIST IS READY",t.config.List);t.checkNewsLetters();X(document).ready(function(){t.checkNewsLetters();});}}else{G("dom not ready!");}},checkNewsLetters:function(){var r=this,q=r.dom.newsList,p=r.config;G("CHECKING news Letters",p.List);G("newletter Dom ready",q.size());q.each(function(){var v=X(this).find("input"),u;u=v.attr("id").split("_");G("el ID",v,v.attr("id"),u[0],u[1]);if(p.List[u[0]].length!=0){for(var t=0,s=p.List[u[0]].length;t<s;t+=1){if(u[1]==p.List[u[0]][t]){G("el[0]",X(v[0]).size());v[0].checked=true;G("temp[1]",u[1],"cfg.List[temp[0]][x]",p.List[u[0]][t]);}}}});},subscribe:function(){G("Subscribe Newsletters!");var u=this,t=u.dom.newsList,q=u.config;t.each(function(){var w=X(this).find("input"),v;v=w.attr("id").split("_");G("el ID",w,w.attr("id"),v[0],v[1]);if(w[0].checked==true){q.subscribeList[q.idRealms[v[0]]].push(v[1]);}});for(var p in q.subscribeList){G("realm",p);if(q.subscribeList[p].length!=0){var s=q.subscribeList[p].join(","),r=[q.url,q.sub,q.email+u.dom.email.attr("value"),q.listId+s,q.r+p].join("");G("idList",s,"url",r);X.ajax({url:r,dataType:"html",type:"POST",success:function(v){G("Subscribing WhatCounts",v);},error:function(v){G("Error",data,v);}});}}},unsubscribe:function(){G("Unsubscribe Newsletters!");var u=this,t=u.dom.newsList,q=u.config;t.each(function(){var w=X(this).find("input"),v;v=w.attr("id").split("_");G("el ID",w,w.attr("id"),v[0],v[1]);if(w[0].checked==false){q.unsubscribeList[v[0]].push(v[1]);}});for(var p in q.unsubscribeList){G("realm",p);if(q.unsubscribeList[p].length!=0){var s=q.unsubscribeList[p].join(","),r=[q.unsubURL,q.token+U.API.token,q.email+u.dom.email.attr("value"),q.subRList+p+"="+s,q.janrainHost,q.callback].join("");G("idList",s,"url",r);g[q.cb]=function(v){G("UNSUB WAS EXECUTED",v);};X.ajax({url:r,dataType:"script",async:true,cache:true});}}}};B=function(){G("Omniture Constructor Loaded");};N={networkShareSuccess:function(){X.ad.track({"network-share-success":{}});},emailShareSuccess:function(){X.ad.track({"email-share-success":{}});},networkShareStart:function(){X.ad.track({"network-share-start":{}});},emailShareStart:function(){X.ad.track({"email-share-start":{}});},registrationStart:function(){X.ad.track({"registration-start":{}});},registrationComplete:function(){X.ad.track({"registration-complete":{}});},logins:function(){X.ad.track({logins:{}});},profileUpdates:function(){X.ad.track({"profile-updates":{}});},commentPost:function(){X.ad.track({"comment-post":{}});},fbShare:function(){X.ad.track({"fb-share":{}});},twttrFollow:function(){X.ad.track({"twttr-follow":{}});}};a=function(){};n={data:{body:{listener:null}},domEvents:{loginSuccess:function(){var p=O.setDomReady;AUTH_Manager.onReady("livefyre",function(){setTimeout(function(){E.API.onLoginSuccessFromJanrain();},500);});p.acc.css({visibility:"visible",display:"block"});p.acc.removeClass("none");p.hasAccount.css({display:"block"});p.noAccount.css({display:"none"});},logoutSuccess:function(){var p=O.setDomReady;p.acc.css({visibility:"visible",display:"block"});p.acc.removeClass("none");p.acc.removeClass("inactive");p.acc.removeClass("active");p.hasAccount.hide();p.noAccount.show();},editProfile:function(){var p=O.setDomReady;p.profile.bind("click",function(q){n.editProfile(q);});}},accountDisplayBehaviour:function(r){var s=O.setDomReady,p;if(!s.acc.hasClass("alt-style")){s.acc.hover(function(){s.accountNav.addClass("hover");p="over;";},function(){s.accountNav.removeClass("hover");p="out";});s.accountNav.click(function(t){if(s.acc.hasClass("active")){s.acc.removeClass("active").addClass("inactive");}else{s.acc.addClass("active").removeClass("inactive");}});s.body.mousedown(function(t){if(p==="out"){if(s.acc.hasClass("active")){s.acc.removeClass("active").addClass("inactive");}}});}else{var q=s.acc.find(".user-options >ul>li:eq(0) > a");if(q.size()>0){q.click(function(){n.editProfile();});}}s.uReport().redBtn.bind("click",function(t){if(U.API.token===""){n.janrain.signin();return false;}});n.domEvents.editProfile();},janrain:{signin:function(){g.janrain.capture.ui.renderScreen("signIn");return false;},traditionalSigin:function(){janrain.capture.ui.modal.open("traditionalRegistration");return false;},traditionalDisplayName:function(p){var q=p.displayName,r=document.getElementById("displayNameData");if(q&&r){r.innerHTML=q;}},getJanrainUserAPI:function(q,p){U.API.execute(q,p);},signOut:function(){G("Janrain signOut fired>>EndCaptureSession");janrain.capture.ui.endCaptureSession();g.Backplane.expectMessages("identity/logout");},registrationStart:function(){G("registration Start Triggered");N.registrationStart();},successfulRegistration:function(q){G("SuccessfulRegistration Triggered");U.API.token=q.accessToken;if(q&&q.action==="socialRegister"){var p="JANRAIN_socialAvatarUpdate",r="https://signin.foxnews.com/entity.update?type_name=user&access_token="+q.accessToken+"&attribute_name=photo_approval_status&value=%22approved%22&jsonp="+p;if(typeof g[p]!=="function"){g[p]=function(s){G("Social Avatar Approve Engaged",s);if(s.stat==="ok"){E.API.onProfileUpdate();G("Janrain avatar is updated");}else{G("janrain Avatar Update failed");}};}X.ajax({url:r,dataType:"script",async:true,cache:true});}janrain.capture.ui.createCaptureSession(q.accessToken);g.Backplane.expectMessages("identity/login");U.session=true;n.domEvents.loginSuccess();n.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:q.accessToken});N.registrationComplete();},successfulLogin:function(p){G("access token login",p.accessToken,p);janrain.capture.ui.modal.close();janrain.capture.ui.createCaptureSession(p.accessToken);g.Backplane.expectMessages("identity/login");U.session=true;n.janrain.screen.editProfile.reloadProfile();n.domEvents.loginSuccess();U.API.token=p.accessToken;n.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:p.accessToken});G("window.FOX_Janrain_Page_Type",g.FOX_Janrain_Page_Type);if(g.FOX_Janrain_Page_Type==="password-reset"){setTimeout(function(){g.location="http://www.foxnews.com/community/user/profile/edit";},10000);}N.logins();},sessionFound:function(p){if(!U.API.requestSent){G("sessionfound",p);janrain.capture.ui.createCaptureSession(p.accessToken);n.domEvents.loginSuccess();U.API.token=p.accessToken;g.Backplane.expectMessages("identity/login");n.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:p.accessToken});U.session=true;}},sessionNotFound:function(p){G("sessionnotfound",p);n.domEvents.logoutSuccess();U.session=false;if(Q("ureport")){P.uLogout();}},sessionEnded:function(){G("Session ENDED!");if(Q("ureport")){P.uLogout();}U.session=false;try{if(fyre!=="undefined"&&fyre!=null){fyre.conv.BackplaneAuthDelegate.prototype.logout();}}catch(p){}n.domEvents.logoutSuccess();},sessionCreated:function(p){G("Session Created, ",p);},tokenRefreshed:function(){G("REFRESH TOKEN Do Something hee");},tokenExpired:function(p){G("TOKEN Expired!",p);n.janrain.signOut();},accessDenied:function(){setTimeout(function(){janrain.capture.ui.renderScreen("signIn");},1000);G("ACCESS D1ENIED!!",typeof janrain.capture.ui.renderScreen);},onAuthWidgetLoad:function(p){G("onAuthWidgetLoad",onAuthWidgetLoad,p);},onRefreshToken:function(p){G("Token Refreshed?",p);janrain.capture.ui.createCaptureSession(p.accessToken);janrain.API.token=p.accessToken;},backplaneReady:function(p){G("!backplaneready!",p);AUTH_Manager.fireReady("backplane");if(X.browser.msie&&parseInt(X.browser.version,10)<=7){var q=X(".comments");if(q.size()>0){q.remove();}X("#livefyre_comment_stream").html("<p>To participate in commenting, please use Internet Explorer 8 or above.</p>");}else{E.init();}X(g).trigger("janrainShareInit");},screen:{currentScreen:null,editProfile:{reloadProfile:function(){if(S.janrainFlow==="profileFlow"){G("reloadProfile Fired");X("#captureAccessDeniedBuiltIn").remove();janrain.capture.ui.renderScreen("editProfile");}},onProfileUpdate:function(p){G("Profile Updated",p);g.scrollTo(0,0);E.API.onProfileUpdate();N.profileUpdates();},onProfileAutoSave:function(p){G("Auto Save",p);if("durationSinceLastUpdate" in p){document.getElementById("capture_profile_saved").style.display="block";document.getElementById("capture_alert_callout").innerHTML=p.durationSinceLastUpdate;}}},registration:{clearInput:function(){}},uiReady:function(){if(S.janrainFlow==="profileFlow"){janrain.capture.ui.renderScreen("editProfile");}else{if(S.janrainFlow==="emailFlow"){janrain.capture.ui.renderScreen("registrationVerify");}else{if(S.janrainFlow==="passwordFlow"){janrain.capture.ui.renderScreen("resetPassword");}}}},onScreenShow:function(q){G("onScreenShow",q);var t=n.janrain.screen;switch(q.screen){case"editProfile":t.currentScreen="editProfile";X("#captureRetrievingUserDataBuiltIn").hide();var p=false;setTimeout(function(){X(".cancel-button").click(function(){if(g.location.href.indexOf("#")>1){g.history.go(-2);}else{g.history.go(-1);}});function AG(AH,AI,AJ){if(AH==null){return false;}if(typeof g.attachEvent==="object"){AH.attachEvent("on"+AI,AJ);}else{AH.addEventListener(AI,AJ,false);}}var z=document.getElementById("capture_editProfile_edit_country"),AA=X("#capture_editProfile_edit_state"),AF=X("#capture_editProfile_display_indicator_public_edit_state"),y=X("#capture_editProfile_display_indicator_private_edit_state"),AC=X("#capture_editProfile_display_option_public_edit_state"),AE=X("#capture_editProfile_display_option_private_edit_state"),AB=X("#capture_editProfile_form_item_edit_state").find("input");function AD(){if(!z||!AA){return false;}var AH=AA.find("option:selected").attr("value");if(z.options[z.selectedIndex].value==="United States"){if(AA){if(AA.attr("disabled")&&AH!=="state"){AF.removeClass("capture_toggled");y.addClass("capture_toggled");AC.removeClass("capture_checked");AE.addClass("capture_checked");AB.attr("value","private");AA.attr("disabled",false);AA.css({color:"black"});}else{if(AA.attr("disabled")&&AH==="state"){AA.attr("disabled",false);AA.css({color:"black"});}}}}else{if(AA){AB.attr("value","private");AA.attr("disabled",true);AA.css({color:"lightgrey"});AF.removeClass("capture_toggled");y.addClass("capture_toggled");AC.removeClass("capture_checked");AE.addClass("capture_checked");}}}if(z&&!p){p=true;AG(z,"change",AD);}AD();},100);try{var w,s=X(".janrain_traditional_account_only");if(typeof g.localStorage!=="undefined"){w=localStorage.getItem("janrainLastAuthMethod");v();}else{w=X.cookie("janrainLastAuthMethod");v();}function v(){console.log("loginMethod",w,"EL",s,s.size());if(w==="socialSignin"&&s.size()>0){s.remove();}}}catch(u){}break;case"publicProfile":G("publicProfile");var r=X(".make-acc");if(!U.session){r.show();}else{r.hide();}break;case"forgotPasswordSuccess":if(g.FOX_Janrain_Page_Type==="password-reset"){setTimeout(function(){g.location="http://www.foxnews.com";},5000);}break;case"returnTraditional":G("traditional fired");setTimeout(function(){var y=janrain.capture.ui.getProfileCookieData("displayName"),z=document.getElementById("displayNameData");G("displayName",y);if(y&&z){z.innerHTML=y;}},500);break;case"registrationVerified":setTimeout(function(){g.location="http://www.foxnews.com/community/user/profile/edit";},10000);break;default:break;}},onRenderComplete:function(){G("On Render Complete Executed");var p=n.janrain.screen;switch(p.currentScreen){case"editProfile":break;}var q=document.getElementById("forgotPassword");if(q&&q.style.display==="block"){if(U.reset){document.getElementById("capture_forgotPassword_forgotPassword_emailAddress").value="";document.getElementById("capture_forgotPassword_forgotPasswordForm_errorMessages").style.display="none";}}}},share:{shareSendComplete:function(p){G("share Sent!",p);N.emailShareSuccess();}},errorEvent:function(p){G("error Registered",p.result);try{switch(p.stat){case"error":break;default:G("some Error Has occured");break;}}catch(q){}},onModalClose:function(){U.reset=true;},validation:{onValidationSuccess:function(){var p=document.getElementById("forgotPassword");if(p&&p.style.display==="block"){U.reset=false;}}}},livefyre:{displayLogo:function(){X("#livefyre_comment_stream").append('<div id="powered_by_livefyre_new"><a href="http://livefyre.com" target="_blank">Powered by Livefyre</a></div> ');},hashComment:function(){X("#livefyre_comment_stream").prepend('<div id="disqus_thread"></div>');},logOut:function(){X.loadAttempt(60,250,function(){return(X("#livefyre_comment_stream").find(".fyre-user-loggedin").size()>0)?true:false;},function(){G("1livefyre Manual Logout",X("#livefyre_comment_stream").find(".fyre-user-loggedin"));fyre.conv.BackplaneAuthDelegate.prototype.logout();g.Backplane.expectMessages("identity/logout");});}},displayName:function(){var p=this,q=O.setDomReady;G("Display Name",q.name,o.displayName);if(q.acc.hasClass("alt-style")){q.user.find(".encapsulate p").html("Welcome, <strong>"+o.displayName+"</strong>");}else{if(q.name.size()>0){q.name.text(o.displayName);}else{if(auth_fox.dom.setDomReady.userOptions.find("p").size()>0){auth_fox.dom.setDomReady.userOptions.find("p").html("You're logged in as<span>"+o.displayName+"</span>");}}}n.domEvents.loginSuccess();},accountFuncBehaviour:function(){var q=O.setDomReady,p=this;G("logout",q.logout,"register",q.register,q.login);q.login.addClass(S.classLogin);q.login.bind("click",n.janrain.signin);q.register.bind("click",n.janrain.traditionalSigin);q.logout.bind("click",n.janrain.signOut);},editProfile:function(p){G("editProfile  called");g.location=f;},displayShowsProfile:function(){var p=O.setDomReady.acc.find("strong");p.css("cursor","pointer");p.click(function(){n.editProfile();return false;});},populatePublicProfile:function(){var p=O.setDomReady.publicProfile();E.API.execute(function(){G("dom",p,p.comments);p.comments.text(o.commentCount);p.likes.text(o.likeCount);});}};e=function(){G("User Constructor Loaded");};o={uuid:null,email:"",likeCount:0,commentCount:0,displayName:"",userJanrain:{},userLivefyre:{}};var A=(function(){var p=function(){G("AUTH_int");this.setDependencies();this.set();};p.prototype.set=function(){G("AUTH_int_set");S.janrainFlow=(function(){var v="authFlow",u=(g.FOX_Janrain_Page_Type)?g.FOX_Janrain_Page_Type:false;switch(u){case"logout":v="logoutFlow";break;case"email-verification":v="emailFlow";break;case"edit-profile":v="profileFlow";break;case"password-reset":v="passwordFlow";break;default:v="authFlow";break;}G("JANRAIN FLOW !!>>> ",v);return v;}());var q=[["tools",F,l],["dom",O,C],["require",S,H],["backplane",i,V],["janrain",U,J],["livefyre",E,k],["badgevill",m,Y],["events",n,a],["ureport",P,D],["user",o,e],["omniture",N,B],["whatcounts",T,I]];var s=new c(q),t;g.auth_fox=s;G("DOCUMENT READY FIRING",s.dom,s.require,s.events);var r=function(){s.require.loadTemplate();s.events.accountDisplayBehaviour();s.events.accountFuncBehaviour();};if(typeof s.dom.setDomReady==="object"){t=s.dom.setDomReady;r();}else{t=s.dom.setDomReady(function(u){O.setDomReady=u;r();});}};p.prototype.setDependencies=function(){g.AUTH_Manager=new FOX_DependencyManager();AUTH_Manager.addInstance("janrain",["janrain"]);AUTH_Manager.addInstance("capture",["janrain","capture"]);AUTH_Manager.addInstance("livefyre",["janrain","backplane","livefyre"]);AUTH_Manager.addInstance("backplane",["backplane"]);X.loadAttempt(60,500,function(){return(g.fyre&&X("#livefyre_comment_stream .fyre-widget").size()>0)?true:false;},function(){AUTH_Manager.fireReady("livefyre");});AUTH_Manager.onReady("livefyre",function(){G("********** LIVEFYRE IS READY !!! **********");});AUTH_Manager.onReady("janrain",function(){G("********** JANRAIN IS READY !!! **********");});AUTH_Manager.onReady("backplane",function(){G("********** BACKPLANE IS READY !!! **********");});AUTH_Manager.onReady("capture",function(){G("********** CAPTURE IS READY !!! **********");});};return p;}());if(!X.loadAttempt){(function(){function q(r){return typeof r==="function"?!0:!1;}var p=function(){var w,r=arguments;if(r.length===0){return !1;}var s={attempt:0,timeout:500};if(r.length===1&&typeof r[0]==="object"){for(w in r[0]){s[w]=r[0][w];}if(s.callback){w=s.callback;}else{return !1;}if(!w.check||!w.success){return !1;}else{s._check=w.check,s._success=w.success;}if(w.timedOut){s._timeout=w.timedOut;}}else{if(!isNaN(r[0])&&!isNaN(r[1])&&q(r[2])&&q(r[3])){s.attempt=r[0];s.timeout=r[1];s._check=r[2];s._success=r[3];if(r[4]){s._timeout=r[4];}if(r[5]){s._abort=r[5];}}else{if(q(r[0])&&q(r[1])){s._check=r[0];s._success=r[1];if(r[2]){s._timeout=r[2];}if(r[3]){s._abort=r[3];}}else{return !1;}}}if(!q(s._check)||!q(s._success)){return !1;}if(!q(s._timeout)){s._timeout=function(){};}if(isNaN(s.timeout)){return !1;}else{s.timeout=parseInt(s.timeout,10);}if(isNaN(s.attempt)){return !1;}else{s.attempt=parseInt(s.attempt,10);}var v=!1,t=!1;if(s.attempt&&s.timeout){var u=function(){t?clearTimeout(v):s._check()?(s._success(),clearTimeout(v)):s.attempt>0?v=setTimeout(function(){u();},s.timeout):s._timeout();s.attempt--;};u();}else{v=setInterval(function(){t?clearInterval(v):s._check()&&(s._success(),clearInterval(v));},s.timeout);}return{abort:function(){t=!0;}};};if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:p});}else{if(!g.loadAttempt){g.loadAttempt=p;}}})();}return A;})(jQuery,window);(function(D,C){var F,A,E;C.janrainShareOnload=function(){C.janrainShareLoaded=true;D(C).trigger("janrainShareModuleInit");};var B={domain:function(){return false;},meta:function(G,H){if(H==="prop"){H="property";}return D("meta["+H+'="'+G+'"]').attr("content");},metadata:function(K){var G=K.split("::"),I=G[0],J=G[1],H=G[2];return(B.meta(J,I)===H)?true:false;},trim:function(H,G){if(H.length>G){H=H.substring(0,G)+" ...";}return H;},isDevice:function(){var G=false;G=("createTouch" in document)?true:false;G=(!G&&navigator.userAgent.match(/BlackBerry/i))?true:G;return G;}};A=function(){var G=this;this.ready=false;if(C.janrainShareLoaded){this.init();}else{D(C).bind("janrainShareModuleInit",function(){G.init();});}};A.prototype={init:function(){this.ready=true;this.janrain=C.janrain;this.setCallbacks();this.setTemplates();},setCallbacks:function(){var H=this.janrain,G=this.resetEmail;H.events.onShareLoginStart.addHandler(G);H.events.onShareLoginCancel.addHandler(G);H.events.onShareLoginError.addHandler(G);H.events.onShareSendStart.addHandler(function(I){if(C.auth_fox){if(I.provider==="facebook"){C.auth_fox.omniture.networkShareSuccess();}else{if(I.mode!=="email"){C.auth_fox.omniture.networkShareSuccess();}else{if(I.mode==="email"){C.auth_fox.omniture.emailShareSuccess();}}}}});},setTemplates:function(){D(".janrain-share-input").attr("placeholder","Write your message");D(".janrain-share-contactadd-input-placeholder").attr("placeholder","Add a contact");D(".janrain-share-contact-input-placeholder").attr("placeholder","Type contact name");D(".janrain-share-bubble").remove();D(".janrain-share-login-prefs-name").remove();D(".janrain_modal_closebutton").attr("href","javascript:;");this.resetEmail();},show:function(J,I,G){var L=this.janrain;var H=I.provider;var K=I.data;L.engage.share.show();L.engage.share.setOrientation("landscape");L.engage.share.setTitle(K.title);L.engage.share.setUrl(K.linkBack);L.engage.share.setActionLink({name:"Read more",link:K.actLink});L.engage.share.setImage(K.image);L.engage.share.setDescription(K.desc);L.engage.share.showProvider(H);this.formatPreviewText({title:K.title,desc:K.desc,url:K.actLink});},resetEmail:function(){D(".janrain-share-login-messageemail, .janrain-share-login-messageemailshort").remove();D("#janrain-share-login-button-contact-email-yahoo .janrain-share-login-button-text").text("Yahoo");D("#janrain-share-login-button-contact-email-google .janrain-share-login-button-text").text("Google");},formatPreviewText:function(G){D(".janrain-share-preview-title").text(B.trim(G.title,70));D(".janrain-share-preview-url").text(B.trim(G.url,40));D(".janrain-share-preview-description").text(B.trim(G.desc,130));}};F=function(G){this.cfg=G;this.plugin=G.plugin;};F.prototype={set:function(J,I,G){var H=this,J=D(J);if(B.isDevice()){return J.hide();}J.unbind("click").bind("click",function(K){H.show(K,I,G);return false;});},reset:function(K,J,H){var I=this,K=D(K),G=J.data;if(B.isDevice()){return K.hide();}K.unbind("click").bind("click",function(L){J.data=G(L);I.show(L,J,H);return false;});},setLive:function(K,J,H){var I=this,K=D(K),G=J.data;if(B.isDevice()){return K.hide();}K.unbind("click").live("click",function(L){J.data=G(L);I.show(L,J,H);return false;});},show:function(J,I,G){var H=this.plugin;if(I.provider==="email"){C.auth_fox.omniture.emailShareStart();}else{C.auth_fox.omniture.networkShareStart();}H.show(J,I,G);return false;},hide:function(I,H,G){}};E=function(){var I={},H=B.meta,G=function(J,K){I[J]=K;};G("v8-article",function(){var M=D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var K=D("link[rel='image_src']").attr("href")||H("og:image","prop")||parsers.defaultImg.v8Article;var L=D((C.vcmArticleInfo&&vcmArticleInfo.summary)?vcmArticleInfo.summary:"<div></div>").text()||H("description","name")||H("dc.description","name");var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N;}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("recipe-article",function(){var M=D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var K=D("link[rel='image_src']").attr("href")||H("og:image","prop")||parsers.defaultImg.v8Article;var L=H("description","name")||H("dc.description","name");var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N;}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("nation-article",function(){var M=D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var K=D("link[rel='image_src']").attr("href")||H("og:image","prop")||parsers.defaultImg.v8Article;var L=H("description","name")||H("dc.description","name");var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N;}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("nation-front",function(){return function(K){var P,N,O,L,M;var J=D(K.currentTarget).parentsUntil("li");J.find("img.m-1").each(function(){N=("http://"+C.location.host+D(this).attr("src"))||H("og:image","prop");});J.find(".a-3").each(function(){var Q=D(this);P=D(this).text();O="America's Talking - All Opinions Welcome. Let your voice be heard @ FoxNation.com.";L=M=Q.attr("href");});return{title:P,image:unescape(N),desc:O,userMessage:"",actLink:L,linkBack:M};};});G("drupal6-shows-article",function(){var M=D("#content-main h3 a").text()||H("dc.title","name")||H("og:title","name");var L=(function(){var N="";var O=D("#content-main .deck > p, #content-main .transcript > p").each(function(){var P=D(this);if(P.html().indexOf("<script")<0&&P.html().indexOf("<object")<0){if(N.length<360){N+=P.text();}}});if(N.length>360){N=N.substring(0,357)+"...";}return N;}());var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N||H("og:url","prop");}());var K=(function(){var N=D("#content-main .photo > img, #content-main img.alignleft, #content-main img.alignright").attr("src");return(N?("http://"+C.location.host+N):H("og:image","prop"));}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("drupal7-shows-blog",function(){return function(L){var O=D(L.currentTarget),K=O,J=K.parentsUntil(".content",".post");var Q=J.find(".twitter-tweet-rendered .entry-title").text()||J.find("h2").text()||J.find(".post-content > p").text()||J.find("#twtr-widget > p").text()||J.find("p:first").text()||D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var P=J.find(".twitter-tweet-rendered .entry-title").text()||J.find(".post-content > p").text()||H("description","name")||H("dc.description","name");var M=linkBack=(function(){var R=J.find("h2");var S=J.find(".comments");if(D("#recommendations-mod").length>0){return H("og:url","prop");}if(R.length>0){return"http://"+C.location.host+R.find("a").attr("href");}if(J.length>0){return S.find("a").attr("href");}})();var N=D("link[rel='image_src']").attr("href")||H("og:image","prop");return{title:Q,image:unescape(N),desc:P,userMessage:"",actLink:M,linkBack:linkBack};};});return function(J){return I[J]();};};D(function(){var N=new A();var O=new F({plugin:N});var H=new E();var K=B.metadata;var G,M,L,I;var J=function(P){var Q=H(P+"-article");O.set(".share",{provider:"facebook",data:Q});O.set(".email",{provider:"email",data:Q});};G=function(){if(K("name::prism.section::nation")){var P=K;if(P("name::prism.aggregationType::root")||P("name::prism.aggregationType::front")){var Q=H("nation-front");O.setLive(".fbook-1",{provider:"facebook",data:Q});O.setLive(".twtr-1",{provider:"twitter",data:Q});}else{if(P("name::prism.aggregationType::subsection")){var Q=H("nation-article");O.set(".fbook-1",{provider:"facebook",data:Q});O.set(".twtr-1",{provider:"twitter",data:Q});}}}else{if(K("name::prism.section::shows")){if(K("property::og:type::article")&&(!K("name::prism.subsection1::specialreport")&&!K("name::prism.subsection1::foxnewssunday"))){var Q=H("drupal6-shows-article");O.set(".share",{provider:"facebook",data:Q});O.set(".email",{provider:"email",data:Q});}if(K("name::prism.subsection1::specialreport")||K("name::prism.subsection1::foxnewssunday")){var Q=H("drupal7-shows-blog");O.reset(".date li a.facebook",{provider:"facebook",data:Q});O.reset(".date li a.twitter",{provider:"twitter",data:Q});}if((K("name::prism.subsection1::specialreport")||K("name::prism.subsection1::foxnewssunday"))&&K("name::prism.subsection2::transcript")){J("v8");}}else{if(K("name::prism.section::community")&&K("name::prism.subsection1::newsletter")){C.excludeNewsletterShare=true;}else{if(K("name::prism.section::politics")&&K("name::prism.subsection1::blogs")){J("v8");}else{if(K("property::og:type::article")){J("v8");}else{if(K("name::prism.aggregationType::recipe")){J("recipe");}}}}}}};M=function(){if(K("property::og:type::article")&&(!K("name::prism.subsection1::willisreport"))){var P=H("drupal6-shows-article");O.set(".share",{provider:"facebook",data:P});O.set(".email",{provider:"email",data:P});}if(K("name::prism.subsection1::willisreport")){var P=H("drupal7-shows-blog");O.reset(".date li a.facebook",{provider:"facebook",data:P});O.reset(".date li a.twitter",{provider:"twitter",data:P});}else{if(K("property::og:type::article")){J("v8");}}};L=function(){if(K("property::og:type::article")){J("v8");}};I=function(){if(K("property::og:type::article")){J("v8");}};if(K("name::prism.channel::fnc")){G();}if(K("name::prism.channel::fbn")){M();}if(K("name::prism.channel::fnl")){L();}if(K("name::prism.channel::fsb")){I();}});})(jQuery,window);(function(E){var D=(typeof _cbVarStr!=="undefined")?_cbVarStr:"b1020";(function(){var S=function(W){W=W||false;var T=new Date(),X=T.getFullYear().toString()+(T.getMonth()+1).toString()+T.getDate().toString(),V=T.getHours()+1,U=T.getMinutes();X+=V.toString()+((W&&!isNaN(W))?(Math.floor(U/parseInt(W,10))).toString():"");return X;};document.write('<script type="text/javascript" src="http://global.fncstatic.com/static/v/all/js/geo.js?cb='+S(1)+'"><\/script>');}());var Q=(function(){var T="fn",V=window.location,U=V.host||V.hostname;var S=function(W){return(U.indexOf(W)>-1)?true:false;};if(S("foxnews.com")){if(S("latino.foxnews.com")){T="fn-latino";}else{T="fn";}}else{if(S("foxbusiness.com")){if(S("smallbusiness.foxbusiness.com")){T="sbc";}else{T="fb";}}}return T;}());var P={feed:{whatsHotLive:{feedFunction:"FeedSource_WhatsHotWatchLive",url:"http://www.foxnews.com/js/whatshot.js",rotate:3,show:{hot:false,live:2},fade:{use:true,delay:900}},onAir:{feedFunction:"FeedSource_FNCTV",url:"http://www.foxnews.com/js/onair.js",descCharLimit:35,imageDomainLoc:""},onAirCarousel:{feedFunction:"FOX_FN_OnAir_Data",url:"http://global.fncstatic.com/static/managed/json/onair-feed-data.js"}},onAir:{hideDelay:200},authentication:{use:"render",domain:"foxnews.com",check:"/authentication/registration/validate/"}};window.FOX_Auth_Use_Janrain=(function(){var S=true;S=(window.location.search.indexOf("_authj=n")>-1)?false:S;return S;}());var B=function(){this.headObj={};};B.prototype={init:function(U){var S=this;if(E("body").data("HasHeaderInit")){return false;}E("body").data("HasHeaderInit",true);var V;for(V in U){if(U.hasOwnProperty(V)){this["_"+V]=U[V];}}this.setHolders();var T=function(){var W=false;W=("createTouch" in document)?true:false;W=(!W&&navigator.userAgent.match(/BlackBerry/i))?true:W;return W;};if(T()||!window.FOX_Auth_Use_Janrain||!window.AuthenticationService_Janrain){window.FOX_Auth_Use_Janrain=false;if(T()){E("#account").css("visibility","hidden");}else{this.authentication=new R(this);}}else{this.authentication=new I(this);}this.feeds=new O(this);this.onAir=new J(this);switch(Q){case"fn":S.whatsHot=new K(this);break;case"fb":S.whatsHot=new G(this);break;}this.searchAutocomplete=new A(this);},setHolders:function(){this.headObj={headlines:E("#headlines-primary"),primaryNav:E("#nav-primary"),onAir:E("#section-head .slide.slide-1"),authentication:E("#account")};this.setListeners();},setListeners:function(){var S=function(Y){var W=false,V=Y.split("/")[2]||false,X=window.location.hostname||window.location.host;if(V&&V.length>1){V=V.replace("www.","");if(X.indexOf(V)>-1){W=true;}}return W;};var T=E("#util dl dd");var U=function(){T.find("> a").removeClass("active");};T.each(function(){var X=E(this),V=X.find("> a"),W=V.attr("href");if(S(W)){U();V.addClass("active");}});}};var R=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){var V=this,U=this.root;if(U.headObj.authentication.size()===0){return false;}function T(){var a=document.location.hostname,Z=a.split("."),X=Z.length,Y=Z[X-2]+"."+Z[X-1];P.authentication.domain=Y;}function W(){T();if(typeof V[P.authentication.use]==="function"){V[P.authentication.use]();}else{V.render();}}if(typeof AuthService!=="undefined"){W();}else{E(document).ready(function(){if(typeof AuthService!=="undefined"){W();}else{H("[head.authentication] Authentication Service not found.");}});}this.setHolders();},setHolders:function(){var T=this.root.helper.getQueryStr("usr");if(T){E(".login-fields > .field > input[name='userName']").attr("value",T);}},render:function(){var Y=this.root,W=Y.headObj.authentication,V=(W.hasClass("alt-style"))?true:false,a=false,U=false;W.show();if(!V){a=W.find(".user-options > p:first");U=W.find("> .username > .encapsulate");var T=W.find("> .username"),b=E("body");U.hover(function(){E(this).addClass("hover");},function(){E(this).removeClass("hover");});U.click(function(){if(W.hasClass("active")){W.addClass("inactive").removeClass("active");}else{W.addClass("active").removeClass("inactive");}});T.hover(function(){window.FXAuthClickIsOver=true;},function(){if(window.FXAuthClickIsOver){window.FXAuthClickIsOver=false;}});if(!b.data("FXAuthClick")){b.data("FXAuthClick",true);b.mousedown(function(){if(!window.FXAuthClickIsOver&&W.hasClass("active")){W.removeClass("active").addClass("inactive");}});}}else{W=E("#authentication").parent();a=W.find(".username");}function X(e){e=e||"Profile";var c="",d="";if(P.authentication.domain!=="foxnews.com"){c=' target="_blank"';if(typeof E.cookie!=="undefined"&&E.cookie("p_DN")){d="?usr="+E.cookie("p_DN");}}return"<a"+c+' href="http://www.foxnews.com/community/user/profile'+d+'">'+e+"</a>";}var Z=window.authentication_service=new AuthService({domain:P.authentication.domain});Z.extend({createLoginLogout:function(g){var d=this,f=[],e=W.find("#authentication");if(d.isLoggedIn()){if(V){e=e.children(":first");e.each(function(){if(!d.isThirdParty()){E(this).html(X());}else{E(this).css({display:"none"});}});e.next().each(function(){var h=E('<a href="#">Log Out</a>');h.click(function(){try{d.logout(d.domain);}catch(i){H("[head.authentication] Logout - An error occured: "+i);}return false;});E(this).html(h);});a.html('<img src="http://global.fncstatic.com/static/v/all/img/head/profile.png" alt="" /> Welcome, <strong>'+d.getDisplayName()+"</strong>");a.css({display:"inline"});}else{e=W.find(".user-options > ul").children(":first");e.each(function(){if(!d.isThirdParty()){E(this).html(X(E(this).text()));}else{e.css({display:"none"});}});e.next().find("a").click(function(){try{d.logout(d.domain);}catch(h){H("[head.authentication] Logout - An error occured: "+h);}return false;});W.addClass("inactive");var c=(function(){var j=d.getDisplayName(),i=j,k="",h="<span${title}>${name}</span>";if(j.length>13){i=j.slice(0,13)+"...";k=' title="'+j+'"';}return h.replace("${title}",k).replace("${name}",i);}());a.html("You're logged in as "+c);}}else{e.children().find("a").each(function(){var h=E(this),i=h.text().toLowerCase();if(i.indexOf("register")>-1){h.click(function(){try{d.registrationOverlay(d.domain);if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}}catch(j){H("[head.authentication] Register - An error occured: "+j);}return false;});}else{if(i.indexOf("login")>-1){h.click(function(){try{d.providerOverlay(d.domain);if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}}catch(j){H("[head.authentication] Login - An error occured: "+j);}return false;});}}});if(V){e.css({display:"inline"});}else{a.html("Please login.");}}},onSuccessLogin:function(){var c=this;c.createLoginLogout();c.closeOverlay("login-provider");},callback:function(c){var d=this,e=d.createObjFromJSON(c);if(e.authentication.status==="ok"){if(d.thirdPartyAPI){d.thirdPartyAPI.disqus.login(e,function(){d.thirdPartyAPI.idms.login(e,function(){d.thirdPartyAPI.fileMobile.login(e,function(){window.FOX_TP_Reload=setTimeout(function(){window.location.reload();},1000);});});});}}d.closeOverlay("login-provider");}});Z.init();Z.createLoginLogout();}};return S;}());var I=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){if(window.AuthenticationService_Janrain){E("p.login-link").hide();var T=window.authentication_service_v3=new AuthenticationService_Janrain();}else{H("[head.Authentication] Fatal Error: Janrain service not found.");}}};return S;}());var J=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){var U=this,T=this.root;if(T.headObj.onAir.size()===0){return false;}window[P.feed.onAir.feedFunction]=function(V){U.renderOnAirNow(V);};window[P.feed.onAirCarousel.feedFunction]=function(V){U.renderOnAirCarousel(V,function(){U.carousel();U.setCarouselListeners();});};T.feeds.onAir();T.feeds.onAirCarousel();},renderOnAirNow:function(o){var c=this,k=this.root,Z=o.schedules.today,W=o.schedules.tomorrow,d=E("#show-data"),l=d.children("ul:first");if(d.size()===0){return false;}function h(p){p=E.trim(p);return(p.split(":"))[0]+p.charAt(p.length-2)+"<span>et</span>";}function f(q){var p=P.feed.onAir.descCharLimit;return(q.length>p)?q.substring(0,p)+"...":q;}function U(s,t){t=t||false;var v,w=[],r=(t)?s:s+1,p=E("#section-head").hasClass("header-update"),u=0;var y=function(z){u++;if(p){w.push("<li"+((u===1)?' class="first"':"")+">");w.push('<p class="media"><a href="'+z.link+'"><img src="'+P.feed.onAir.imageDomainLoc+z.img+'" alt="" /></a></p>');w.push('<p class="time">'+h(z.time)+"</p>");w.push('<div class="info">');w.push('<p class="summary"><a href="'+z.link+'" title="'+z.dek+'">'+z.title+"</a></p>");w.push('<p class="relation">'+f(z.dek)+"</p>");if(u===1){w.push('<a class="watch-now-link" href="http://watch.foxnews.com/"><img src="http://global.fncstatic.com/static/all/img/watch-icon.gif"></a>');}w.push("</div>");w.push("</li>");}else{w.push("<li"+((u===1)?' class="first"':"")+">");w.push('<p class="media"><a href="'+z.link+'"><img src="'+P.feed.onAir.imageDomainLoc+z.img+'" alt="" /></a></p>');w.push('<div class="info">');w.push('<p class="relation">'+z.title+"</p>");w.push('<p class="summary"><a href="'+z.link+'" title="'+z.dek+'">'+f(z.dek)+"</a></p></div>");w.push('<p class="time">'+h(z.time)+"</p></li>");}};for(v=s;v<=r;v++){var q=Z[v];y(q);}if(t&&W[0]){y(W[0]);}l.html(w.join(""));}var g,j=new Date(o.now.date+" "+o.now.time),e=parseInt(j.getHours()+""+((j.getMinutes()<10)?"0"+j.getMinutes():j.getMinutes()),10);for(g=0;g<Z.length;g++){var m=Z[g],i=(Z[g+1])?Z[g+1]:false;try{var X=E.trim(m.time).toLowerCase();X=(X.charAt(X.indexOf("m")-2)!==" ")?X.replace("pm"," pm").replace("am"," am"):X;var a=new Date(o.now.date+" "+X),n=parseInt(a.getHours()+""+((a.getMinutes()<10)?"0"+a.getMinutes():a.getMinutes()),10);if(i){var Y=E.trim(i.time).toLowerCase();Y=(Y.charAt(Y.indexOf("m")-2)!==" ")?Y.replace("pm"," pm").replace("am"," am"):Y;var V=new Date(o.now.date+" "+Y),T=parseInt(V.getHours()+""+((V.getMinutes()<10)?"0"+V.getMinutes():V.getMinutes()),10);if(e>=n&&e<T){U(g);break;}}else{U(g,true);break;}}catch(b){H("[head.onAir] Error: "+b);}}},renderOnAirCarousel:function(Y,X){var U=this,T=this.root,V=Y;var W=function(){var g=T.headObj.onAir.find("> .content > .slideshow");var c=[],b=V.length;for(var a=0;a<b;a++){var f=V[a],Z=(a===0)?true:false,e=(a+1===b)?true:false,d=(Z)?" section-first":(e)?" section-last":"";c.push('<li class="section'+d+'">');c.push('<p class="media"><a href="'+f.link+'"><img alt="'+f.title+'" pre-src="'+f.img+'" src="http://global.fncstatic.com/static/v/all/img/clear.gif"></a></p>');c.push('<h3><a href="'+f.link+'">'+f.title+"</a></h3>");c.push('<p class="time"><span>'+f.day+"</span> "+f.time+"</p></li>");}g.html("<ul>"+c.join("")+"</ul>");};W();if(typeof X==="function"){X();}},carousel:function(){var U=this.root,V=U.headObj.onAir.children(".content");var T={elm:V,slide:"horizontal",scroll:5,speed:1200,show:5,rotate:false};function W(Z){var X,Y=[];for(X=1;X<=Z.batch.max;X++){Y.push('<li><a href="#">&nbsp;</a></li>');}return Y.join("");}T.elm.each(function(Z){var Y=0,b=E(this);if(b.data("carousel_initialized")){return false;}var a=b.find("ol");var c={prev:b.find(".prev"),next:b.find(".next"),first:b.find(".first-page"),last:b.find(".last-page")};var X={auto:{set:false,speed:3000},slide:T.slide,scroll:T.scroll,show:T.show,speed:T.speed,rotate:T.rotate,eventCallback:function(d){if(d.event==="init"){Y=d.batch.max;a.html(W(d));a.children(":first").addClass("active");b.data("carousel_initialized",true);}else{a.children().each(function(e){E(this).toggleClass("active",function(){return(e+1===d.batch.current)?true:false;});});}if(d.batch.current===1){c.prev.addClass("inactive-prev");c.first.addClass("inactive-first");}else{c.prev.removeClass("inactive-prev");c.first.removeClass("inactive-first");}if(d.batch.current===d.batch.max){c.next.addClass("inactive-next");c.last.addClass("inactive-last");}else{c.next.removeClass("inactive-next");c.last.removeClass("inactive-last");}},controlsCallback:function(d){a.children().find("a").each(function(e){E(this).click(function(){d.stopAutoScroll();d.scrollToBatch(e+1);return false;});});c.first.click(function(){d.stopAutoScroll();d.scrollToItem(1);return false;});c.prev.click(function(){d.stopAutoScroll();d.slide("prev");return false;});c.next.click(function(){d.stopAutoScroll();d.slide("next");return false;});c.last.click(function(){d.stopAutoScroll();d.scrollToItem(Y);return false;});}};if(typeof E.fn.jfoxCarousel!=="undefined"){b.jfoxCarousel(X);}else{E(document).ready(function(){b.jfoxCarousel(X);});}});},setCarouselListeners:function(){var a=this.root,U=a.headObj.primaryNav,T=U.children("ul:first").children("li.on-air"),W=a.headObj.onAir,c=W.css("height").replace("px",""),V=P.onAir.hideDelay;var Z={close:T.find("img").filter(function(){return(E(this).attr("src").indexOf("close.png")>-1)?true:false;}),open:T.find("img").filter(function(){return(E(this).attr("src").indexOf("plus.png")>-1)?true:false;})};function Y(){var d=W.find(".slideshow > ul > li");d.each(function(){var f=E(this),h=f.find("> .media img"),g=h.attr("pre-src"),e=new Image();if(g&&!h.data("preloaded")){e.onload=function(){h.attr("src",g);};e.src=g;h.data("preloaded",true);}});}function X(){W.data("isRendering",true);W.data("hidden",true);W.animate({height:"0px",opacity:"0"},V,"swing",function(){W.css({display:"none"}).data("isRendering",false);});Z.close.hide();Z.open.show();T.removeClass("active");}function b(){if(!W.data("initToFirst")){W.data("initToFirst",true);W.find("p.controls > a.prev").click();}W.data("isRendering",true);W.data("hidden",false);W.css("display","block");W.animate({height:c,opacity:"1"},V,"swing",function(){W.data("isRendering",false);});Z.close.show();Z.open.hide();T.addClass("active");}Z.close.hide();W.css({height:"0px",opacity:"0"}).data("hidden",true);T.find("a").click(function(){Y();if(W.data("isRendering")){return false;}if(W.data("hidden")){b();}else{X();}return false;});}};return S;}());var K=(function(){var S=function(U){this.root=U;this.render=new T(this);this.set();};S.prototype={set:function(){var V=this,U=this.root;if(U.headObj.headlines.size()===0){return false;}window[P.feed.whatsHotLive.feedFunction]=function(W){V.render.set(W);};U.feeds.whatsHotLive();}};var T=function(U){this.main=this;this.root=U.root;};T.prototype={set:function(a){var W=this.root,V=W.headObj.headlines;var Y=this.hot({title:"Full Coverage",feed:a.whatshot,len:P.feed.whatsHotLive.show.hot});var b=this.live({title:"Watch Live",feed:a.watchlive,len:P.feed.whatsHotLive.show.live});if(typeof a.whatshot!=="undefined"){if(a.whatshot.length===0){return false;}var X=E('<dl class="first"></dl>');X.append(Y).children("dd:first").addClass("first");V.html(X);}if(typeof a.watchlive!=="undefined"){if(a.watchlive.length===0){return false;}var Z=E("<dl></dl>");Z.append(b).children("dd:first").addClass("first");V.append(Z);var U=V.children("dl:nth-child(2)");if(a.watchlive.length>P.feed.whatsHotLive.show.live){this.rotate(U);}else{U.children("dd").css("display","inline");}}},hot:function(W){if(typeof W.feed==="undefined"){return false;}W.len=W.len||W.feed.length;var V,U=[];if(W.len>0){U.push("<dt>"+W.title+"</dt>");for(V=0;V<W.feed.length;V++){var Y=W.feed[V],X=(V>=W.len)?' style="display:none;"':"";U.push("<dd"+X+'><a href="'+Y.link+'">'+Y.title+"</a></dd>");}}return E(U.join(""));},live:function(W){if(typeof W.feed==="undefined"){return false;}W.len=W.len||W.feed.length;var V,U=[];if(W.len>0){U.push("<dt>"+W.title+"</dt>");for(V=0;V<W.feed.length;V++){var Y=W.feed[V],X=(V>=W.len)?' style="display:none;"':"";U.push("<dd"+X+'><a href="'+Y.link+'">'+Y.title+"</a></dd>");}}return E(U.join(""));},rotate:function(Z){var a=Z.children("dd"),b=Z.children("dt:first"),V=a.size(),Y=P.feed.whatsHotLive.fade;if(V===0){return false;}var U=P.feed.whatsHotLive.rotate*1000;if(Y.use){U=U+Y.delay;}var W=false;a.each(function(d){var e=E(this);e.addClass("first");e.css("display",(d===0)?"inline":"none");if(d===0){e.data("rotateNumber",d+1);}});if(!Z.data("rotateNumber")){Z.data("rotateNumber",1);}function X(e){e=e||false;var d=Z.data("rotateNumber")+1;d=(d>V)?1:d;Z.data("rotateNumber",d);a.each(function(f){var h=E(this),g=f+1;if(!Y.use||e==="click"){h.css("display",(g===d)?"inline":"none");}else{if(g===d){h.fadeIn(Y.delay);}else{h.hide();}}});}function c(){clearInterval(W);W=setInterval(function(){X();},U);}c();b.css("cursor","pointer").click(function(){X("click");});Z.hover(function(){clearInterval(W);},function(){c();});}};return S;}());var G=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){var T=this;E("#headlines .dv-list:first").each(function(){T.trigger(E(this));});},trigger:function(W){var T=this,V="fox_header_whatshot",U="http://global.fncstatic.com/static/all/generated/js/fb2-whatshot.js";window[V]=function(X){T.render(X,W);};(function(){var Y=document,X=Y.createElement("script");X.src=U;X.async=true;(Y.getElementsByTagName("head")[0]||Y.getElementsByTagName("body")[0]).appendChild(X);}());},render:function(Y,Z){if(!Y&&!Y.length){return false;}var V,U=[],T=Y.length;U.push("<h2>What's Hot</h2><ul>");for(V=0;V<T;V++){var X=Y[V],W=(V===0)?" dv-item-first":(V===T-1)?" dv-item-last":"";U.push('<li class="dv-item'+W+'">');U.push('<a href="'+X.link+'">'+X.title+"</a>");U.push("</li>");}U.push("</ul>");Z.html(U.join(""));}};return S;}());var O=(function(){var S=function(T){this.root=T;};S.prototype={whatsHotLive:function(){this.get.append({url:P.feed.whatsHotLive.url});},onAir:function(){this.get.append({url:P.feed.onAir.url});},onAirCarousel:function(){this.get.append({url:P.feed.onAirCarousel.url});},get:{append:function(T){(function(){var U=document.createElement("script");U.src=T.url;U.async=true;E("head").get(0).appendChild(U);}());},json:function(T){E.ajax({type:"GET",url:T.url,data:T.query,success:function(U){if(T.callback){T.callback(U);}}});}}};return S;}());var A=(function(){var U=function(V){this.root=V;this.set();};U.prototype={set:function(){var V=this;switch(Q){case"fn":T();break;case"fb":S();break;}}};var T=function(){E("#search-site").each(function(){RAMP_AutoComplete.init();E("#box1").focus(function(){if(E(this).val()!==""){E(this).val("");}});});};var S=function(){var V=E("form#searchArea");if(V.size()===0){V=E("#search-site").parent();}V.each(function(){var Y=E(this);var W=Y.find("input[type='text']");var Z=Y.find("input[type='image'],input[type='submit']");var X=W.attr("value");W.attr({name:"q",onblur:"",onfocus:"",autocomplete:"off"}).blur(function(){var a=E(this);var b=(a.attr("value").length>0)?a.attr("value"):X;a.attr("value",b);}).focus(function(){var a=E(this);var b=(a.attr("value").indexOf(X)>-1)?"":a.attr("value");a.attr("value",b);});IDC_quoteComplete.init();});};return U;}());B.prototype.helper={getQueryStr:function(X){var V=(window.location.search).substr(1);if(V.length>0){var S,W=V.split("&"),T={};for(S=0;S<W.length;S++){var U=W[S].split("=");T[U[0]]=U[1];}return(T[X])?T[X]:false;}return false;}};var H=function(S){if(window.console&&window.console.log){console.log(S);}};var M={isIE:function(){return E.browser.msie;},animate:function(T,S){if(!this.isIE()){if(!S.speed){S.speed=300;}if(!S.type){S.type="swing";}T.animate(S.css,S.speed,S.type,function(){if(S.callback){S.callback();}});}else{T.css(S.css);T.css("opacity","");if(S.callback){S.callback();}}},hide:function(V,S){if(!V){return false;}var T,U={opacity:"0"};if(S.css){for(T in S.css){if(S.css.hasOwnProperty(T)){U[T]=S.css[T];}}}S.css=U;this.animate(V,S);},show:function(V,S){if(!V){return false;}var T,U={opacity:"1"};if(S.css){for(T in S.css){if(S.css.hasOwnProperty(T)){U[T]=S.css[T];}}}S.css=U;this.animate(V,S);}};var C=new B();(function(){var T=function(){E(document).ready(function(){C.init();});};try{if(window.FOX&&FOX.site&&typeof FOX.site.bottomInit==="function"){var S=FOX.site.bottomInit;FOX.site.bottomInit=function(){C.init();S();};}else{if(window.FOX_HP&&FOX_HP.site.OnPageReady){FOX_HP.site.OnPageReady(function(){C.init();});}else{T();}}}catch(U){T();}}());var N=window.siteStreamFlashPlayer=function(T,S){var b=(typeof T==="undefined")?1:T,Y=(typeof S==="undefined")?"foxnews":S,a=850,W=506,U=(screen.width-a)/2,Z=(screen.height-W)/2,V="height="+W+",width="+a+",top="+Z+",left="+U+",toolbar=no,location=no,scrollbars=no,status=no,resizable=no,fullscreen=no",X=window.open("http://interactive."+Y+".com/livestream/live.html?chanId="+b+"&openAIR=true","livePlayer",V);X.focus();};var F=window.siteStreamLivePlayer=function(X){var S=914,T=419,W=(screen.width-S)/2,V=(screen.height-T)/2;url="http://video.foxnews.com/video-live-streaming.html",settings="height="+T+",width="+S+",top="+V+",left="+W+",toolbar=no,location=no,scrollbars=no,status=no,resizable=no,fullscreen=no",url=url+((X&&!isNaN(X))?"?video_id="+X:"");var U=window.open(url,"LivePlayer",settings);U.focus();};var L=window.FOX_isMnt=function(){var S=false,U=window.CONST_Akamai_TIME||false;try{if(U.yr==="2011"&&U.mm==="11"&&(U.dd==="05"||U.dd==="06")){S=true;}else{if(U.yr==="2011"&&U.mm==="11"&&U.dd==="04"&&parseInt(U.hr,10)>=17){S=true;}}}catch(T){}return S;};}(jQuery));(function(A){A(document).ready(function(){var B=A("#section-footer a[rel*='external']");if(window.FOX&&FOX.utils&&FOX.utils.extLink){FOX.utils.extLink.set(B);}else{B.each(function(){var D=A(this),E=A.trim(D.attr("href")||""),C=A.trim(D.attr("rel")||"");if(E.length>0&&E!=="#"){C=(C.indexOf("external")>-1)?C:[C,"external"].join(" ");C=A.trim([C,"ext-linked"].join(" "));D.attr("rel",C);D.click(function(){window.open(E,"_blank");return false;});if(!D.attr("target")){D.attr("target","_blank");}}});}});}(jQuery));window.RAMP_AutoComplete=(function(A){window.RampAutoComplete=function(){var B=this;B._serviceUrl="http://www.foxnews.com/search-results/autocomplete/foxnews";B._searchUrl="http://www.foxnews.com/search-results/search/?";B._searchTimer=null;B._fetchData=function(){var C="FOX_handleRamp";var D=(function(){var E=A.trim(B._searchBox[0].value||"");E=E.replace(/\s+/gi," ");return E;}());if(D.length===0||B._prevInputStr===D){return false;}B._prevInputStr=D;if(!window[C]){window[C]=function(E){B.handleRampFox(E);};}A.ajax({type:"GET",url:B._serviceUrl,data:{q:encodeURIComponent(D),callbackName:C},dataType:"script",async:true,cache:true});};};RampAutoComplete.prototype={init:function(){var B=this;B._searchBox=A("input#box1");B._listBox=A("div#list1");B.handleInput();},handleRampFox:function(D){var J=this,F=D.ac.q;var G='<div class="search-drop">';G+="<ul>";if(F.length>0){J._listBox.css("display","block");}else{J._listBox.css("display","none");}for(var E=0;E<F.length;E+=1){var C=J._searchBox[0].value.toLowerCase();var B=(E%2)==0?'class="odd"':"";var H=J._searchUrl+"q="+encodeURIComponent(F[E]).replace(/\s/g,"+").replace(/%20/g,"+");var I=F[E].replace(C,C.bold());G+="<li "+B+'><a href="'+H+'">'+I+"</a></li>";}G+="</ul>";G+="</div>";J._listBox.each(function(){this.innerHTML=G;});},handleInput:function(){var B=this;B._searchBox.attr("autocomplete","off");var C=false;B._listBox.hover(function(){C=true;},function(){C=false;});A("body").click(function(){if(!C){B._listBox.hide();}});B._listBox.mouseover(function(){A("li").removeClass("selectedRamp");});B._searchBox.bind("keydown",function(D){var N=A("li.selectedRamp",B._listBox)||null,G=N.index()||0,E=A("div.search-drop li:last-child")||null,F=A("div.search-drop").height()||0,I=N?N.height():0,K=E?E.height():0,M=N?N.position():0,L=E?E.position():0,H=function(P){return parseInt(P,10);};var O=38,J=40;if(D.keyCode==O||D.keyCode==J){if(N.length>0){if(D.keyCode==O){N=N.prev();N.focus();if(M.top>0&&M.top<=100){A("div.search-drop").scrollTop(0);}if(M.top===0){A("div.search-drop").scrollTop(H(L.top));}}else{N=N.next();N.focus();if((M.top+I)>=176&&M.top<=H(L.top)){A("div.search-drop").scrollTop(H(M.top)+H(I));}if(M.top>=H(L.top)){A("div.search-drop").scrollTop(0);}}}if(N.length===0){if(D.keyCode==O){N=A("li:last-child",B._listBox);A("div.search-drop").scrollTop(H(L.top));}else{N=A("li:first-child",B._listBox);A("div.search-drop").scrollTop(0);}}B._listBox.css("display","block");N.addClass("selectedRamp").siblings().removeClass("selectedRamp");B._searchBox[0].value=A(N[0]).text();}else{if(B._searchTimer!==null){clearTimeout(B._searchTimer);}B._searchTimer=setTimeout(B._fetchData,300);}});}};return(new RampAutoComplete());}(jQuery));window.IDC_quoteComplete=(function(B){var A={index:-1,totalResults:0,results:false,resultsDiv:"search-results",field:"#search",url:"http://interactive.foxbusiness.com/projects/autocomplete/autocomplete.json",action:"http://interactive.foxbusiness.com/projects/autocomplete/intercept.html?q=",quoteUrl:"http://quote.foxbusiness.com/?searchString=",defaultText:"Search quotes, news and video",reset:function(){B("."+A.resultsDiv).html("");A.results=false;A.index=-1;},init:function(){B(A.field).focus(function(){if(B(this).val()===A.defaultText){B(this).val("");}A.reset();});B(A.field).blur(function(D){if(B(this).val()===""){B(this).val(A.defaultText);}setTimeout(function(){A.reset();},500);});B(A.field).parents("form").submit(function(){if(A.index>-1){B(A.field).val(B("#search_drop_overlay ul li:eq("+A.index+") a span.ticker").text());}if(A.index>-1){A.action=A.quoteUrl;}A.action+=encodeURIComponent(B(A.field).val());if(A.index>-1){A.reset();}document.location=A.action;return false;});var C="FOX_IDC_QuoteResponse";window[C]=function(D){A.response(D);};B(A.field).keyup(function(D){if((D.keyCode>=65&&D.keyCode<=90)||(D.keyCode>=97&&D.keyCode<=122)||D.keyCode===8){A.index=-1;var E=B(A.field).val();B("."+A.resultsDiv).html("");if(E!==""){B.getJSON(A.url+"?q="+E+"&callback="+C+"&jsonp=?");A.results=true;}else{A.results=false;}}else{if(D.keyCode===40||D.keyCode===38){if(A.results){B("#search_drop_overlay ul li:eq("+A.index+")").removeClass("selected");B("#search_drop_overlay ul li a:eq("+A.index+")").removeClass("selected");if(D.keyCode===40){if(A.index<(A.totalResults-1)){A.index++;}else{A.index=0;}}else{if(A.index>0){A.index--;}else{A.index=A.totalResults-1;}}B("#search_drop_overlay ul li:eq("+A.index+")").addClass("selected");B("#search_drop_overlay ul li a:eq("+A.index+")").addClass("selected");}}else{if(D.keyCode===27){A.reset();}}}});B(A.field).parents("form").after('<div class="'+A.resultsDiv+'"></div>');},response:function(D){var C="";var E=B(A.field).val();if(D!==""){A.totalResults=B(D).size();C+="<ul>";B.each(D,function(I,M){var J=new RegExp(E,"i");var L=this.s.search(J);var F=this.n.search(J);var G=L>-1?this.s.replace(J,"<strong>"+this.s.slice(L,(L+E.length))+"</strong>"):this.s;var H=F>-1?this.n.replace(J,"<strong>"+this.n.slice(F,(F+E.length))+"</strong>"):this.n;var K=this.s;C+='<li><a href="'+A.quoteUrl+K+'"><span class="ticker">'+G+'</span><span class="corporation">'+H+"</span></a></li>";});C+="</ul>";}else{A.totalResults=0;C="<p>No suggestions available</p>";}B("."+A.resultsDiv).html('<div id="search_drop_overlay" class="search_drop_overlay"><div class="search_drop_top">&nbsp;</div><div class="search_drop_list">'+C+'<div class="clearflatgray"></div><div class="search_drop_link1"><a href="'+A.action+E+'">Search for News &amp; Videos "<strong>'+E.toUpperCase()+'</strong>"</a></div></div><div class="search_drop_bottom"></div></div>');A.initMouseEvents();},initMouseEvents:function(){B("."+A.resultsDiv+" ul li").mouseover(function(){if(A.index>-1){B("."+A.resultsDiv+" ul li:eq("+A.index+")").removeClass("selected");}B(this).addClass("selected");});B("."+A.resultsDiv+" ul li").mouseout(function(){B(this).removeClass("selected");});B("."+A.resultsDiv+" ul li a").mouseover(function(){if(A.index>-1){B("."+A.resultsDiv+" ul li a:eq("+A.index+")").removeClass("selected");}B(this).addClass("selected");});B("."+A.resultsDiv+" ul li a").mouseout(function(){B(this).removeClass("selected");});}};return A;})(jQuery);
/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){var d="undefined",R="object",s="Shockwave Flash",w="ShockwaveFlash.ShockwaveFlash",Q="application/x-shockwave-flash",r="SWFObjectExprInst",X="onreadystatechange",o=window,J=document,T=navigator,t=false,u=[H],O=[],n=[],i=[],L,q,e,b,j=false,A=false,N,g,M=true,m=function(){var AB=typeof J.getElementById!=d&&typeof J.getElementsByTagName!=d&&typeof J.createElement!=d,AI=T.userAgent.toLowerCase(),z=T.platform.toLowerCase(),AF=z?/win/.test(z):/win/.test(AI),AD=z?/mac/.test(z):/mac/.test(AI),AG=/webkit/.test(AI)?parseFloat(AI.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,y=!+"\v1",AH=[0,0,0],AC=null;if(typeof T.plugins!=d&&typeof T.plugins[s]==R){AC=T.plugins[s].description;if(AC&&!(typeof T.mimeTypes!=d&&T.mimeTypes[Q]&&!T.mimeTypes[Q].enabledPlugin)){t=true;y=false;AC=AC.replace(/^.*\s+(\S+\s+\S+$)/,"$1");AH[0]=parseInt(AC.replace(/^(.*)\..*$/,"$1"),10);AH[1]=parseInt(AC.replace(/^.*\.(.*)\s.*$/,"$1"),10);AH[2]=/[a-zA-Z]/.test(AC)?parseInt(AC.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof o.ActiveXObject!=d){try{var AE=new ActiveXObject(w);if(AE){AC=AE.GetVariable("$version");if(AC){y=true;AC=AC.split(" ")[1].split(",");AH=[parseInt(AC[0],10),parseInt(AC[1],10),parseInt(AC[2],10)];}}}catch(AA){}}}return{w3:AB,pv:AH,wk:AG,ie:y,win:AF,mac:AD};}(),K=function(){if(!m.w3){return ;}if((typeof J.readyState!=d&&J.readyState=="complete")||(typeof J.readyState==d&&(J.getElementsByTagName("body")[0]||J.body))){F();}if(!j){if(typeof J.addEventListener!=d){J.addEventListener("DOMContentLoaded",F,false);}if(m.ie&&m.win){J.attachEvent(X,function(){if(J.readyState=="complete"){J.detachEvent(X,arguments.callee);F();}});if(o==top){(function(){if(j){return ;}try{J.documentElement.doScroll("left");}catch(y){setTimeout(arguments.callee,0);return ;}F();})();}}if(m.wk){(function(){if(j){return ;}if(!/loaded|complete/.test(J.readyState)){setTimeout(arguments.callee,0);return ;}F();})();}S(F);}}();function F(){if(j){return ;}try{var AA=J.getElementsByTagName("body")[0].appendChild(c("span"));AA.parentNode.removeChild(AA);}catch(AB){return ;}j=true;var y=u.length;for(var z=0;z<y;z++){u[z]();}}function k(y){if(j){y();}else{u[u.length]=y;}}function S(z){if(typeof o.addEventListener!=d){o.addEventListener("load",z,false);}else{if(typeof J.addEventListener!=d){J.addEventListener("load",z,false);}else{if(typeof o.attachEvent!=d){I(o,"onload",z);}else{if(typeof o.onload=="function"){var y=o.onload;o.onload=function(){y();z();};}else{o.onload=z;}}}}}function H(){if(t){v();}else{h();}}function v(){var y=J.getElementsByTagName("body")[0];var AB=c(R);AB.setAttribute("type",Q);var AA=y.appendChild(AB);if(AA){var z=0;(function(){if(typeof AA.GetVariable!=d){var AC=AA.GetVariable("$version");if(AC){AC=AC.split(" ")[1].split(",");m.pv=[parseInt(AC[0],10),parseInt(AC[1],10),parseInt(AC[2],10)];}}else{if(z<10){z++;setTimeout(arguments.callee,10);return ;}}y.removeChild(AB);AA=null;h();})();}else{h();}}function h(){var AH=O.length;if(AH>0){for(var AG=0;AG<AH;AG++){var z=O[AG].id;var AC=O[AG].callbackFn;var AB={success:false,id:z};if(m.pv[0]>0){var AF=C(z);if(AF){if(f(O[AG].swfVersion)&&!(m.wk&&m.wk<312)){W(z,true);if(AC){AB.success=true;AB.ref=Z(z);AC(AB);}}else{if(O[AG].expressInstall&&a()){var AJ={};AJ.data=O[AG].expressInstall;AJ.width=AF.getAttribute("width")||"0";AJ.height=AF.getAttribute("height")||"0";if(AF.getAttribute("class")){AJ.styleclass=AF.getAttribute("class");}if(AF.getAttribute("align")){AJ.align=AF.getAttribute("align");}var AI={};var y=AF.getElementsByTagName("param");var AD=y.length;for(var AE=0;AE<AD;AE++){if(y[AE].getAttribute("name").toLowerCase()!="movie"){AI[y[AE].getAttribute("name")]=y[AE].getAttribute("value");}}p(AJ,AI,z,AC);}else{P(AF);if(AC){AC(AB);}}}}}else{W(z,true);if(AC){var AA=Z(z);if(AA&&typeof AA.SetVariable!=d){AB.success=true;AB.ref=AA;}AC(AB);}}}}}function Z(AB){var y=null;var z=C(AB);if(z&&z.nodeName=="OBJECT"){if(typeof z.SetVariable!=d){y=z;}else{var AA=z.getElementsByTagName(R)[0];if(AA){y=AA;}}}return y;}function a(){return !A&&f("6.0.65")&&(m.win||m.mac)&&!(m.wk&&m.wk<312);}function p(AB,AC,y,AA){A=true;e=AA||null;b={success:false,id:y};var AF=C(y);if(AF){if(AF.nodeName=="OBJECT"){L=G(AF);q=null;}else{L=AF;q=y;}AB.id=r;if(typeof AB.width==d||(!/%$/.test(AB.width)&&parseInt(AB.width,10)<310)){AB.width="310";}if(typeof AB.height==d||(!/%$/.test(AB.height)&&parseInt(AB.height,10)<137)){AB.height="137";}J.title=J.title.slice(0,47)+" - Flash Player Installation";var AE=m.ie&&m.win?"ActiveX":"PlugIn",AD="MMredirectURL="+o.location.toString().replace(/&/g,"%26")+"&MMplayerType="+AE+"&MMdoctitle="+J.title;if(typeof AC.flashvars!=d){AC.flashvars+="&"+AD;}else{AC.flashvars=AD;}if(m.ie&&m.win&&AF.readyState!=4){var z=c("div");y+="SWFObjectNew";z.setAttribute("id",y);AF.parentNode.insertBefore(z,AF);AF.style.display="none";(function(){if(AF.readyState==4){AF.parentNode.removeChild(AF);}else{setTimeout(arguments.callee,10);}})();}U(AB,AC,y);}}function P(z){if(m.ie&&m.win&&z.readyState!=4){var y=c("div");z.parentNode.insertBefore(y,z);y.parentNode.replaceChild(G(z),y);z.style.display="none";(function(){if(z.readyState==4){z.parentNode.removeChild(z);}else{setTimeout(arguments.callee,10);}})();}else{z.parentNode.replaceChild(G(z),z);}}function G(AC){var AB=c("div");if(m.win&&m.ie){AB.innerHTML=AC.innerHTML;}else{var z=AC.getElementsByTagName(R)[0];if(z){var AD=z.childNodes;if(AD){var y=AD.length;for(var AA=0;AA<y;AA++){if(!(AD[AA].nodeType==1&&AD[AA].nodeName=="PARAM")&&!(AD[AA].nodeType==8)){AB.appendChild(AD[AA].cloneNode(true));}}}}}return AB;}function U(AJ,AH,z){var y,AB=C(z);if(m.wk&&m.wk<312){return y;}if(AB){if(typeof AJ.id==d){AJ.id=z;}if(m.ie&&m.win){var AI="";for(var AF in AJ){if(AJ[AF]!=Object.prototype[AF]){if(AF.toLowerCase()=="data"){AH.movie=AJ[AF];}else{if(AF.toLowerCase()=="styleclass"){AI+=' class="'+AJ[AF]+'"';}else{if(AF.toLowerCase()!="classid"){AI+=" "+AF+'="'+AJ[AF]+'"';}}}}}var AG="";for(var AE in AH){if(AH[AE]!=Object.prototype[AE]){AG+='<param name="'+AE+'" value="'+AH[AE]+'" />';}}AB.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+AI+">"+AG+"</object>";n[n.length]=AJ.id;y=C(AJ.id);}else{var AA=c(R);AA.setAttribute("type",Q);for(var AD in AJ){if(AJ[AD]!=Object.prototype[AD]){if(AD.toLowerCase()=="styleclass"){AA.setAttribute("class",AJ[AD]);}else{if(AD.toLowerCase()!="classid"){AA.setAttribute(AD,AJ[AD]);}}}}for(var AC in AH){if(AH[AC]!=Object.prototype[AC]&&AC.toLowerCase()!="movie"){E(AA,AC,AH[AC]);}}AB.parentNode.replaceChild(AA,AB);y=AA;}}return y;}function E(AA,y,z){var AB=c("param");AB.setAttribute("name",y);AB.setAttribute("value",z);AA.appendChild(AB);}function Y(z){var y=C(z);if(y&&y.nodeName=="OBJECT"){if(m.ie&&m.win){y.style.display="none";(function(){if(y.readyState==4){B(z);}else{setTimeout(arguments.callee,10);}})();}else{y.parentNode.removeChild(y);}}}function B(AA){var z=C(AA);if(z){for(var y in z){if(typeof z[y]=="function"){z[y]=null;}}z.parentNode.removeChild(z);}}function C(AA){var y=null;try{y=J.getElementById(AA);}catch(z){}return y;}function c(y){return J.createElement(y);}function I(AA,y,z){AA.attachEvent(y,z);i[i.length]=[AA,y,z];}function f(AA){var z=m.pv,y=AA.split(".");y[0]=parseInt(y[0],10);y[1]=parseInt(y[1],10)||0;y[2]=parseInt(y[2],10)||0;return(z[0]>y[0]||(z[0]==y[0]&&z[1]>y[1])||(z[0]==y[0]&&z[1]==y[1]&&z[2]>=y[2]))?true:false;}function V(AE,z,AF,AD){if(m.ie&&m.mac){return ;}var AB=J.getElementsByTagName("head")[0];if(!AB){return ;}var y=(AF&&typeof AF=="string")?AF:"screen";if(AD){N=null;g=null;}if(!N||g!=y){var AA=c("style");AA.setAttribute("type","text/css");AA.setAttribute("media",y);N=AB.appendChild(AA);if(m.ie&&m.win&&typeof J.styleSheets!=d&&J.styleSheets.length>0){N=J.styleSheets[J.styleSheets.length-1];}g=y;}if(m.ie&&m.win){try{AE=AE.replace(/\:/g,"\\:");N.addRule(AE,z);}catch(AC){try{N.addRule(AE,z);}catch(AC){}}}else{if(N&&typeof J.createTextNode!=d){N.appendChild(J.createTextNode(AE+" {"+z+"}"));}}}function W(AA,y){if(!M){return ;}var z=y?"visible":"hidden";if(j&&C(AA)){C(AA).style.visibility=z;}else{V("#"+AA,"visibility:"+z);}}function l(z){var AA=/[\\\"<>\.;]/;var y=AA.exec(z)!=null;return y&&typeof encodeURIComponent!=d?encodeURIComponent(z):z;}var D=function(){if(m.ie&&m.win){window.attachEvent("onunload",function(){var AD=i.length;for(var AC=0;AC<AD;AC++){i[AC][0].detachEvent(i[AC][1],i[AC][2]);}var AA=n.length;for(var AB=0;AB<AA;AB++){Y(n[AB]);}for(var z in m){m[z]=null;}m=null;for(var y in swfobject){swfobject[y]=null;}swfobject=null;});}}();return{registerObject:function(AC,y,AB,AA){if(m.w3&&AC&&y){var z={};z.id=AC;z.swfVersion=y;z.expressInstall=AB;z.callbackFn=AA;O[O.length]=z;W(AC,false);}else{if(AA){AA({success:false,id:AC});}}},getObjectById:function(y){if(m.w3){return Z(y);}},embedSWF:function(AC,AI,AF,AH,z,AB,AA,AE,AG,AD){var y={success:false,id:AI};if(m.w3&&!(m.wk&&m.wk<312)&&AC&&AI&&AF&&AH&&z){W(AI,false);k(function(){AF+="";AH+="";var AK={};if(AG&&typeof AG===R){for(var AM in AG){AK[AM]=AG[AM];}}AK.data=AC;AK.width=AF;AK.height=AH;var AN={};if(AE&&typeof AE===R){for(var AL in AE){AN[AL]=AE[AL];}}if(AA&&typeof AA===R){for(var AJ in AA){if(typeof AN.flashvars!=d){AN.flashvars+="&"+AJ+"="+AA[AJ];}else{AN.flashvars=AJ+"="+AA[AJ];}}}if(f(z)){var AO=U(AK,AN,AI);if(AK.id==AI){W(AI,true);}y.success=true;y.ref=AO;}else{if(AB&&a()){AK.data=AB;p(AK,AN,AI,AD);return ;}else{W(AI,true);}}if(AD){AD(y);}});}else{if(AD){AD(y);}}},switchOffAutoHideShow:function(){M=false;},ua:m,getFlashPlayerVersion:function(){return{major:m.pv[0],minor:m.pv[1],release:m.pv[2]};},hasFlashPlayerVersion:f,createSWF:function(AA,z,y){if(m.w3){return U(AA,z,y);}else{return undefined;}},showExpressInstall:function(AA,AB,y,z){if(m.w3&&a()){p(AA,AB,y,z);}},removeSWF:function(y){if(m.w3){Y(y);}},createCSS:function(AB,AA,z,y){if(m.w3){V(AB,AA,z,y);}},addDomLoadEvent:k,addLoadEvent:S,getQueryParamValue:function(AB){var AA=J.location.search||J.location.hash;if(AA){if(/\?/.test(AA)){AA=AA.split("?")[1];}if(AB==null){return l(AA);}var z=AA.split("&");for(var y=0;y<z.length;y++){if(z[y].substring(0,z[y].indexOf("="))==AB){return l(z[y].substring((z[y].indexOf("=")+1)));}}}return"";},expressInstallCallback:function(){if(A){var y=C(r);if(y&&L){y.parentNode.replaceChild(L,y);if(q){W(q,true);if(m.ie&&m.win){L.style.display="block";}}if(e){e(b);}}A=false;}}};}();(function(D){var K={yume_ad_domain_code:{fn2:"109RXfmeHtS",fb2:"109DLWefYRt",fb:"109RXfmeHtS","fn-latino":"109RXfmeHtS"},settings_url:{fn2:"http://video.foxnews.com/assets/akamai/resources/conf/config.xml",fb2:"http://video.foxbusiness.com/assets/akamai/resources/conf/config-fb.xml",fb:"http://video.foxbusiness.com/assets/akamai/resources/conf/config-sbc.xml","fn-latino":"http://video.foxnews.com/assets/akamai/resources/conf/config-latino.xml"},auditude_code:{defaultAssetId:"fnd_default_asset",adDomain:"auditude.com",zoneId:{fn2:"52522",fb2:"52523",fb:"52526","fn-latino":"52522"}}};window.MvPlayer=function(){this.version="1.2.9.3";this._namespace=null;this._config={};this._videoDomain="video.foxnews.com";this._callbacksObj={};this._autoEmbed=true;this.holder={};this.playerIds=[];this.playerMap={};this.idSeparator=":";this.instanceId=["videoid","videolink","playlistid"];this.feedFolder={video:"/v/feed/video/",playlist:"/v/feed/playlist/"};this.itemType={videoid:"video",playlistid:"playlist"};this.feedQueryString={template:"fox"};this.playTimeout={};this.dataObj={};this.holderObj={};this.overlayObj={defaultImg:"http://global.fncstatic.com/static/v/all/img/vp-overlay.png",blankImg:"http://global.fncstatic.com/static/v/all/img/clear.gif"};};MvPlayer.prototype={init:function(N){var O,R,P=this;for(O in N){P["_"+O]=N[O];}P.embed.root=P.feed.root=P.video.root=P.format.root=P.controls.root=P.thirdParty.root=P.feedParser.root=P._helper.root=this;var Q={},L=P._config;if(L.player.feedSettings){if(L.player.feedSettings.videoFolder){Q.video=L.player.feedSettings.videoFolder;}if(L.player.feedSettings.playlistFolder){Q.playlist=L.player.feedSettings.playlistFolder;}}if(L.player.isLivePlayer){this.itemType.videoid="live";Q.video=Q.video.replace("/video/","/live/");}if(N.callbacks){if(typeof N.callbacks==="object"&&!E(N.callbacks)){for(R in N.callbacks){if(P._callbacksObj[R]){for(O in N.callbacks){P._callbacksObj[R][O]=N.callbacks[R][O];}}else{P._callbacksObj[R]=N.callbacks[R];}}}}this.videoTypeLinks={videoid:"http://"+P._videoDomain+((Q.video)?Q.video:P.feedFolder.video),playlistid:"http://"+P._videoDomain+((Q.playlist)?Q.playlist:P.feedFolder.playlist)};P._isPandora=false;if(typeof H!=="undefined"){var M=new H(P);if(M.init()){P._isPandora=true;C("[videoPlayer.init] Using Pandora.");P.pandora=M;P.pandora.init();}}if(typeof N.onInit==="function"){N.onInit(P);}if(!P._autoEmbed){return false;}P.holder.videoObj=D(".video,.video-ct");P.embed.players();},render:function(P){if(!P){return false;}if(!P.id||!P.holder){return false;}var R,T=this,S=T.idSeparator,L=P.id,N=T._helper;if(P.callbacks){if(T._callbacksObj[L]){for(R in P.callbacks){T._callbacksObj[L][R]=P.callbacks[R];}}else{T._callbacksObj[L]=P.callbacks;}}C("[videoPlayer.render] Render function executed... ");if(!P.autoplay||typeof P.autoplay!=="boolean"){P.autoplay=false;}if(P.holder.data("currentId")===L){return false;}function O(){var V=false;if(P.holder.find("[id^='videoHolder:']").size()>0){var U=P.holder.find("[id^='videoHolder:']:first").attr("id");T.setPlayerMap({type:"set",vId:L,domId:U});V=T.setPlayerMap({type:"get",vId:L});}else{V=T.setPlayerMap({type:"create",vId:L});}var W=D("<div></div>").attr({id:V});if(P.cssClass){W.addClass(P.cssClass);}if(T.pandora){W.data("pandora",true);W.data("autoplay",P.autoplay);}P.holder.html(W);}var M=P.holder.find("> object");if(M.size()>0){try{if(N.isPlayFileReady(M.get(0))){T.setPlayerMap({type:"set",vId:L,domId:M.attr("id")});if(P.cssClass){M.addClass(P.cssClass);}}else{O();}}catch(Q){O();}}else{O();}if(T.embed.validate(P.holder,P.holder.children().filter(":first"),L.substring(0,L.indexOf(S)),S)){P.holder.data("currentId",L);T.feed.get({id:L,autoplay:P.autoplay,method:"render"});}},getFeed:function(L){if(!L){return false;}if(!L.id||!L.callback){return false;}var M=this;M.feed.get({id:L.id,method:"getFeed",raw:true,processed:(!L.processed)?false:true,callback:L.callback});},setPlayerMap:function(R){if(!R){return false;}var O=this,N="videoHolder:";switch(R.type){case"create":function Q(){return N+A();}var P=Q();while(O.playerMap[P]){P=Q();}O.playerMap[P]=R.vId;O.playerMap[R.vId]=P;return P;case"set":var M,L=false;for(M in O.playerMap){if(M===R.domId){L=O.playerMap[M];break;}}if(!L){delete O.playerMap[L];}O.playerMap[R.domId]=R.vId;O.playerMap[R.vId]=R.domId;break;case"get":if(R.vId){return(O.playerMap[R.vId])?O.playerMap[R.vId]:false;}else{if(R.domId){return(O.playerMap[R.domId])?O.playerMap[R.domId]:false;}}return false;}},setCustomFlashVars:function(Q,O){var N=this;if(N._config.display.customFlashVars){var M=N._config.display.customFlashVars;if(M[O]){var L,P={};for(L in M[O]){P[L]=M[O][L];}N.holderObj[Q].customFlashVars=P;}}}};MvPlayer.prototype.controls={pause:function(O){if(!this.validate(O)){return false;}var L=this.root,M=L.holderObj[O];try{if(!M.data("pandora")){document.getElementById(O).pause();}else{L.pandora.CONTROLS.pause(O);}}catch(N){B("[videoPlayer.controls.pause] Error caught:"+N);}},play:function(O){if(!this.validate(O)){return false;}var L=this.root,M=L.holderObj[O];try{if(!M.data("pandora")){document.getElementById(O).unpause();}else{L.pandora.CONTROLS.play(O);}}catch(N){B("[videoPlayer.controls.play] Error caught:"+N);}},jumpToTime:function(P,O){if(!this.validate(P)){return false;}var L=this.root,N=L.holderObj[P].elm,M=L.playerMap[P]||false;if(!M){return false;}if(!N.data("pandora")){document.getElementById(M).jumpToTime(O);}else{L.pandora.CONTROLS.jumpTo(M,O);}},validate:function(M){if(!M){return false;}var L=this.root;M="videoid"+L.idSeparator+"g"+M;if(!L.dataObj[M]){return false;}return true;}};MvPlayer.prototype.embed={validate:function(T,U,P,O){var Q,R=this,S=this.root,L=S._config.display.allow;if(typeof S.format[P]==="undefined"){return false;}for(Q in L){if(U.hasClass(Q)){var V=S.format[P](U,P,O),N=L[Q];var M=(function(){var W,a=false,Y=U.attr("class").split(" ");for(W=0;W<Y.length;W++){var X=Y[W];if(X.indexOf("vid-")===0){var Z=X.split("-");Z.shift();switch(Z.join("-")){case"fn2":a="video.foxnews.com";break;case"fb2":a="video.foxbusiness.com";break;case"fb":a="video.foxbusiness.com";break;case"fn-latino":a="video.latino.foxnews.com";break;}}}return{domain:a,site:Z};}());S.holderObj[V]={id:V,parentElm:T,elm:U,dim:L[Q],format:Q};if(M.domain){S.holderObj[V].domain=M.domain;S.holderObj[V].xSite=M.site;S.holderObj[V].xDomain=true;}else{S.holderObj[V].domain=S._videoDomain;}S.setCustomFlashVars(V,Q);if(S.pandora){S.holderObj[V].elm.data("pandora",true);}return V;}}return false;},players:function(){var N=this,L=this.root,M=(typeof L._config.display.clickThruImage==="undefined")?false:(typeof L._config.display.clickThruImage!=="object")?L._config.display.clickThruImage:L._config.display.clickThruImage.render,O=L.idSeparator;if(M&&L._isPandora&&!window.useLegacyHTML5){M=false;}L.holder.videoObj.each(function(){var P,R=D(this),Q=false;function S(U){R.find("div[id^='"+U+O+"']").each(function(){var V=D(this),W=L.setPlayerMap({type:"create",vId:V.attr("id")});V.attr("id",W);Q=N.validate(R,V,U,O);});}for(P=0;P<L.instanceId.length;P++){var T=L.instanceId[P];S(T);}if(Q){if(L.holderObj[Q].elm.data("pandora")){C("[videoPlayer.players] Loading via Pandora.");L.pandora.load(Q);}else{L.feed.get(Q);}R.children().filter("div.img").hide();}});},player:function(U){if(!U){return false;}var Q=this,X=this.root,S=X.holderObj[U],L=X._helper,c=X._config.player;if(S.elm.data("videoLoaded")){return false;}X.playerIds.push(U);if(S.elm.data("pandora")){if(!S.elm.data("pandoraLoaded")){var V={id:U,format:S.format,width:S.dim[0]+"px",height:S.dim[1]+"px"};if(X._config.player.flashVars.autoplay==="true"){V.autoplay=true;}S.elm.data("pandora",true);S.elm.data("pandoraLoaded",true);S.elm.data("videoLoaded",true);X.holderObj[U].vAttr=V;}X.pandora.load(U);}else{if(typeof swfobject==="undefined"){B("[videoPlayer.embed.player] swfobject not found.");return false;}var P=function(d){if(X._callbacksObj[U]&&X._callbacksObj[U].videoLoadStart){X._callbacksObj[U].videoLoadStart({data:X.dataObj[U]});}if(!d){X.video.load(U);}};if(!S.elm.data("swfLoaded")){var O=X.setPlayerMap({type:"get",vId:U});if(!L.isPlayFileReady(document.getElementById(O))){X.thirdParty.akamai(U,true);var Y,b=X._config.player.flashVars,M={};for(Y in b){M[Y]=b[Y];}if(S.customFlashVars){for(Y in S.customFlashVars){M[Y]=S.customFlashVars[Y];}}var a=S.domain,W=S.xDomain,T=S.xSite,Z=(!c.environment)?"":(window.location.search.indexOf("venv=prod")>-1)?"":(c.environment==="beta")?"beta.":"";currentDomain=(b.location)?b.location:M.settings_url.split("/")[2];if(currentDomain==="video.latino.foxnews.com"&&a==="video.foxnews.com"){a="video.latino.foxnews.com";T=["fn-latino"];}var N=function(e){var f=(Z.length>0&&e.indexOf(Z)<0)?Z+a:a;return e.replace(e.split("/")[2],f);};if(W){if(K.yume_ad_domain_code[T]){M.yume_ad_domain_code=K.yume_ad_domain_code[T];}if(K.settings_url[T]){M.settings_url=K.settings_url[T];}}M.settings_url=N(M.settings_url);M.core_yume_ad_library_url=N(M.core_yume_ad_library_url);M.core_yume_player_url=N(M.core_yume_player_url);M.data_feed_url=N(M.data_feed_url);c.location=N(c.location);if(X._config.player.tokenCallback){X._config.player.tokenCallback(O);}if(X._config.player.pip){var R=Q.setPinP(c,M);M=R.flashVars;c=R.info;}swfobject.embedSWF(c.location,O,S.dim[0],S.dim[1],c.flashVersion,c.expressInstall,M,X._config.player.params);S.elm.data("swfLoaded",true);S.elm.data("videoLoaded",true);if(X._config.player.token){X.dataObj[U]=X.feedParser.setToken(X.dataObj[U],X._config.player.token);D.loadAttempt(50,800,function(){return L.isPlayFileReady(document.getElementById(O));},function(){setTimeout(function(){P();B("[videoPlayer.player] Token: "+X._config.player.token);},500);});}else{P(true);}}else{P();}}else{P();}}},setPinP:function(M,N){if(M.location&&N.settings_url){M.location=M.location.replace("FoxNewsPlayer.swf","FoxNewsPlayerMulti.swf");var L=N.settings_url;N.settings_url=(function(P){var Q=P.split("/"),O=Q.length-1;if(Q[O].indexOf("config-multi")===-1){Q[O]="config-multi.xml";}return Q.join("/");}(L));}return{info:M,flashVars:N};},clickthru:function(R,S){var Q=this,L=this.root,O=L.holderObj[S],P=L.overlayObj.blankImg;O.elm.parent().css({width:O.dim[0]+"px",minHeight:O.dim[1]+"px"});O.elm.html('<a href="#"><img src="'+P+'" /></a>');var N=O.elm.find("img");N.css({width:O.dim[0]+"px",height:O.dim[1]+"px",opacity:"0"});(function(){var W=function(c){N.attr("src",c).animate({opacity:"1"},400,"swing");};var T=function(g){var e=g.split("/"),d=e.length,f=e[d-3],c=e[d-2];e[d-3]=(!isNaN(f))?O.dim[0]:f;e[d-2]=(!isNaN(c))?O.dim[1]:c;return e.join("/");};var b=false,X=O.parentElm;var a=X.children("div.img"),Z=X.find(".m-controller img:first"),Y=X.parent().children("div.m-controller img:first");if(a.attr("src")&&D.trim(a.attr("src")).length>0){W(D.trim(a.attr("src")));F.set({elm:O.elm,dim:O.dim,position:"bottom right"});}else{if(Z.attr("src")&&D.trim(Z.attr("src")).length>0){W(D.trim(Z.attr("src")));F.set({elm:O.elm,dim:O.dim,position:"bottom right"});}else{if(Y.attr("src")&&D.trim(Y.attr("src")).length>0){W(D.trim(Y.attr("src")));F.set({elm:O.elm,dim:O.dim,position:"bottom right"});}else{var V=new Image(),U=T(R.thumbnail);V.onload=function(){W(U);F.set({elm:O.elm,dim:O.dim,position:"bottom right"});};V.src=U;}}}}());var M=O.elm.find("a");M.css({display:"block",visibility:"visible",padding:"0"}).click(function(){var T=function(){if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}Q.player(S);};try{L._config.display.clickThruImage.callbackFn({runPlayer:T});return false;}catch(U){}T();return false;});}};MvPlayer.prototype.thirdParty={akamaiMediaAnalytics:function(M){if(!M||typeof AKAMAI_MEDIA_ANALYTICS_JS_SRC==="undefined"||typeof AKAMAI_MEDIA_ANALYTICS_CALLBACK==="undefined"){return false;}if(!D(document).data("AkamaiH5Analytics")){var L=document.createElement("script");L.type="text/javascript";L.async=true;L.src=AKAMAI_MEDIA_ANALYTICS_JS_SRC;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(L);}D.loadAttempt({maxAttempts:30,timeout:500,callback:{check:function(){return(typeof setAkamaiMediaAnalyticsData!=="undefined")?true:false;},success:function(){AKAMAI_MEDIA_ANALYTICS_CALLBACK(M);}}});},akamai:function(M){var T=this,V=this.root,O=V._config.player,U=V.holderObj[M],X=M.split(":")[1].replace(/[a-zA-z]/gi,""),S=V.itemType[V.dataObj[M].itemType];if(V.dataObj[M]&&V.dataObj[M].isMavenFeed){X=V.dataObj[M].guid;}V._config.player.flashVars.video_id=X;V._config.player.flashVars.data_feed_url="http://"+V._videoDomain+"/v/feed/"+S+"/"+X+".js?template=fox";function L(Z,a){var Y;for(Y=0;Y<Z.length;Y++){if(U.elm.hasClass(Z[Y])){switch(a){case"share":V._config.player.flashVars.show_sharing_overlay="false";break;case"email":V._config.player.flashVars.show_email_overlay="false";break;}return true;}}return false;}if(typeof V._config.display!=="undefined"){var W=V._config.display;if(typeof W.restrict!=="undefined"){if(W.restrict.sharingOverlay){L(W.restrict.sharingOverlay,"share");}if(W.restrict.emailOverlay){L(W.restrict.emailOverlay,"email");}}}if(S.toLowerCase().indexOf("playlist")>-1){try{var R=V.dataObj[M].PLVideos,N=R[0]["media-content"],Q=N["mvn-assetUUID"];V._config.player.flashVars.video_id=Q;V._config.player.flashVars.data_feed_url="http://"+V._videoDomain+"/v/feed/video/"+Q+".js?template=fox";}catch(P){B("[videoPlayer.thirdparty.akamai] Failed to load first video from playlist feed: "+P,true);}}},baynote:function(L){var T=this,V=this.root,W=V.dataObj[L],U=V.holderObj[L],M=V._helper,N=(W.thumbnail)?W.thumbnail:false,O=(W.title)?W.title:false;var P=(function(){var a=(W.duration)?W.duration:false;if(!a&&isNaN(a)){return false;}return a;}());var X=(function(){var b=M.cleanTitle(W.title),c="http://"+V._videoDomain,a=W.guid;c+="/v/"+a+"/"+b+"/";return c;}());function S(){if(typeof baynote_track_video_attribute!=="undefined"){if(N&&P&&O&&X){baynote_track_video_attribute(N,P,O,X);B("[videoPlayer.thirdparty.baynote] Successful baynote call: baynote_track_video_attribute(thumbnailUrl,duration,linkText)");B("[videoPlayer.thirdparty.baynote] thumbnailUrl = "+N);B("[videoPlayer.thirdparty.baynote] duration = "+P);B("[videoPlayer.thirdparty.baynote] linkText = "+O);B("[videoPlayer.thirdparty.baynote] url = "+X);return true;}B("[videoPlayer.thirdparty.baynote] Baynote track function not triggered. insufficient video data for: thumbnail url / duration / link text / url.");return true;}B("[videoPlayer.thirdparty.baynote] Baynote track function not defined.");return false;}var Z=30,Y=0,R=false;function Q(){if(typeof baynote_track_video_attribute!=="undefined"){S();clearTimeout(R);}else{if(Y>Z){B("[videoPlayer.thirdparty.baynote] Baynote track function call attempts maxed out... ");S();clearTimeout(R);}else{Y++;R=setTimeout(function(){B("[videoPlayer.thirdparty.baynote] Attempting to call Baynote track function... attempt: "+Y);Q();},500);}}}if(typeof baynote_track_video_attribute!=="undefined"){S();}else{D(document).ready(function(){Q();});}}};MvPlayer.prototype.video={load:function(S){var Q=this,M=this.root,O=M._helper,P=M._config.player.flashVars.autoplay,R=M.setPlayerMap({type:"get",vId:S}),L=document.getElementById(R);C("[videoPlayer.load] Loading player...");if(O.isPlayFileReady(L)){var N=(typeof M._config.display.clickThruImage==="undefined")?false:(typeof M._config.display.clickThruImage!=="object")?M._config.display.clickThruImage:M._config.display.clickThruImage.render;if(N&&M._isPandora&&!window.useLegacyHTML5){N=false;}if(M.dataObj[S]){P=(N)?true:(M._config.player.flashVars.autoplay)?true:false;if(!M._config.player.pip){L.playFile(M.dataObj[S].rawData,P);}else{B("[videoPlayer.load] PlayFile disabled for PIP.");}}else{M.feed.get({id:S,autoplay:P});}clearTimeout(M.playTimeout[S]);}else{M.playTimeout[S]=setTimeout(function(){Q.load(S);},100);}}};MvPlayer.prototype.feed={get:function(){var U,e,V=this,d=this.root,N=d.idSeparator,M=arguments[0],Y={},S=false;if(typeof M==="object"){for(e in M){Y[e]=M[e];}}else{Y.id=M;}if(!Y.id){B("[videoPlayer.feed.get] Error: no id passed");return false;}var a="parse_"+d._helper.formatVideoId(Y.id,true,true)+((Y.raw)?"_getraw":""),R=d._namespace+".feed."+a,g=false;g=(function(){var h;for(h in d.videoTypeLinks){if(Y.id.indexOf(h)>-1){return{prefix:d.videoTypeLinks[h],type:h};}}return false;}());if(!g){B("[videoPlayer.feed.get] Error: no feed link: "+Y.id);return false;}function L(){return(g.type==="playlistid")?true:false;}var Z=Y.id.substr(g.type.length+N.length),Q=g.prefix;if(Z.charAt(0).toLowerCase()!=="g"){if(g.type==="videoid"){Q=Q.replace("/v/","/");S=true;}}else{Z=Z.substr(1);}var O=Q+Z+".js",T=[],f={};T.push("callback="+R);if(d.feedQueryString){var c=d.feedQueryString;for(e in c){if(e==="template"){if(!L()){T.push(e+"="+c[e]);}}else{T.push(e+"="+c[e]);}}}for(U=0;U<T.length;U++){var b=T[U].split("=");f[b[0]]=b[1];}T.push("jsonp=?");var P="?"+T.join("&"),W=(Y.method)?((Y.method==="render")?true:false):false;if(!d.feed[a]||W){d.feed[a]=function(k){if(d.holderObj[Y.id]){d.holderObj[Y.id].ajaxComplete=true;}var h=(L())?d.feedParser.legacy(k):d.feedParser.fox(k);if(Y.raw){if(Y.callback){Y.callback((Y.processed)?h:k);}}else{var j=d.holderObj[Y.id],i=(typeof d._config.display.clickThruImage==="undefined")?false:(typeof d._config.display.clickThruImage!=="object")?d._config.display.clickThruImage:d._config.display.clickThruImage.render;if(i&&d._isPandora&&!window.useLegacyHTML5){i=false;}d.dataObj[Y.id]=h;d.dataObj[Y.id].rawData=k;d.dataObj[Y.id].itemType=g.type;d.dataObj[Y.id].isMavenFeed=S;if(Y.autoplay){d._config.player.flashVars.autoplay="true";}if(h){if(i&&!Y.autoplay){d.embed.clickthru(h,Y.id);}else{d.embed.player(Y.id);}if(d._callbacksObj[Y.id]){if(d._callbacksObj[Y.id].feedLoaded){d._callbacksObj[Y.id].feedLoaded(h);}}}else{B("[videoPlayer.feed.get] Warning: no data found!");}}};}f.cb=d._helper.cacheBuster();function X(){O=(function(j){var i=j;if(d.holderObj[Y.id]&&d.holderObj[Y.id].domain){var h=d.holderObj[Y.id].domain,l=j.split("http://"),k=l[1].split("/");if(k[0]!==h){k[0]=h;}l[1]=k.join("/");i=l.join("http://");}return i;}(O));D.ajax({url:O,data:f,dataType:"script",async:true,cache:true});}X();}};MvPlayer.prototype.format={videoid:function(P,M,O){var L=this.root,N=L.setPlayerMap({type:"get",domId:P.attr("id")});if(!N){return false;}var Q=N.substr(M.length+1);return"videoid"+O+Q;},videolink:function(Q,S,R){var V=this.root,O=Q.attr("id"),M=V.setPlayerMap({type:"get",domId:O}),N="playlist",X="playlistid"+R;if(M.indexOf("?"+N)===-1){return false;}var W,U=M.substr(M.indexOf("?")+1),T=U.split("&");for(W=0;W<T.length;W++){var P=T[W].split("=");if(P[0].toLowerCase()==="playlist_id"){var L=X+P[1];V.setPlayerMap({type:"set",vId:L,domId:O});return L;}}},playlistid:function(P,N,O){var L=this.root,M=L.setPlayerMap({type:"get",domId:P.attr("id")});if(!M){return false;}var Q=M.substr(N.length+1);return"playlistid"+O+Q;}};MvPlayer.prototype.feedParser={setToken:function(P,N){var L,M=this.root,O=M._helper;return P;},fox:function(a){var Q,V=this.root,L=V._helper;if(typeof a.channel.item==="undefined"){return false;}var g=a.channel,b=a.channel.item,P=[];if(b instanceof Array){for(Q=0;Q<b.length;Q++){P.push(b[Q]);}b=a.channel.item[0];}if(!b["media-group"]){return false;}var Z=b["media-group"];function U(){var c=Z["media-thumbnail"]||false;if(!c){return"";}if(E(c)&&c[0]&&c[0]["@attributes"]){return c[0]["@attributes"].url||"";}else{if(c&&c["@attributes"]){return c["@attributes"].url||"";}}return"";}function f(){try{return Z["media-content"][0]["@attributes"].duration;}catch(c){B("[videoPlayer.feedParser.grab] Get Duration error: "+c);return"0";}}var R={url:b.link,title:b.title,description:b.description,shortDescription:b.description,keywords:"",thumbnail:U(),guid:b.guid,channel:"",playlist:"",personality:"",format:"",show:"",category:g.category,creationDate:L.convertGrabDate(b.pubDate),loc:"http://"+window.location.host+window.location.pathname,duration:f()};var M=Z["media-content"]||false;if(M){var X,T,W={},Y=false,e=false,O=false;var S=function(h,c){return(h.indexOf(c)>-1)?true:false;};for(Q=0;Q<M.length;Q++){var d=M[Q]["@attributes"],N=d.url;if(d.type==="video/mp4"){if(!Y){Y=true;O=d;}if(S(N,"_LOW")){W.LOW=d;e=d;}else{if(S(N,"_MED")){W.MED=d;}else{if(S(N,"_HIGH")){W.HI=d;}}}}else{if(d.type==="application/x-mpegURL"&&S(N,".m3u8")){W.STREAM=d;}}}if(Y){if(!W.LOW){W.LOW=(W.MED)?W.MED:(W.HI)?W.HI:O;}if(!W.MED){W.MED=(W.LOW)?W.LOW:(W.HI)?W.HI:O;}if(!W.HI){W.HI=(W.LOW)?W.LOW:(W.MED)?W.MED:O;}}T=0;for(X in W){T++;break;}W=(T>0)?W:false;R.htmlFive=W;}if(P.length>0){R.PLVideos=P;}return R;},grab:function(U){var R,Q=this.root,M=Q._helper;if(typeof U.channel.item==="undefined"){return false;}var T=U.channel.item,N=[];if(T instanceof Array){for(R=0;R<T.length;R++){N.push(T[R]);}T=U.channel.item[0];}if(!T["media-group"]){return false;}var L=T["media-group"];function P(){if(typeof L["media-thumbnail"][0]!=="undefined"){var V=L["media-thumbnail"][0];return(V["@attributes"].url)?V["@attributes"].url:"";}return"";}function S(){try{return L["media-content"][0]["@attributes"].duration;}catch(V){B("[videoPlayer.feedParser.grab] Get Duration error: "+V);return"0";}}var O={url:T.link,title:T.title,description:T.description,shortDescription:T["grab-short_description"],keywords:L["media-keywords"],thumbnail:P(),guid:T.guid,channel:T["grab-channel"],playlist:T["grab-playlist"],personality:T["grab-personality"],format:T["grab-format"],show:T["grab-show"],category:L["media-category"],creationDate:M.convertGrabDate(T.pubDate),loc:"http://"+window.location.host+window.location.pathname,duration:S()};if(N.length>0){O.PLVideos=N;}return O;},legacy:function(T){var R,Q=this.root,M=Q._helper;if(typeof T.channel.item==="undefined"){return false;}var S=T.channel.item,O=[];if(S instanceof Array){for(R=0;R<S.length;R++){O.push(S[R]);}S=T.channel.item[0];}if(!S["media-content"]){return false;}var L=S["media-content"];if(!L["media-credit"]){return false;}var N=L["media-credit"];var P={url:L["@attributes"].url,title:S.title,description:L["media-description"],keywords:L["media-keywords"],thumbnail:L["media-thumbnail"],guid:L["mvn-assetUUID"],mavenid:L["mvn-mavenId"],channel:(L["mvn-fnc_channel"])?L["mvn-fnc_channel"]:L["mvn-fbn_channel"],playlist:L["mvn-fnc_default_playlist"],personality:(L["mvn-fnc_personality"])?L["mvn-fnc_personality"]:L["mvn-fbn_personality"],format:(L["mvn-fnc_format"])?L["mvn-fnc_format"]:L["mvn-fbn_format"],show:(L["mvn-fnc_show"])?L["mvn-fnc_show"]:L["mvn-fbn_show"],category:(L["mvn-fnc_category"])?L["mvn-fnc_category"]:L["mvn-fbn_category"],creationDate:M.convertDate(L["mvn-creationDate"]),shortDescription:L["mvn-shortDescription"],loc:"http://"+window.location.host+window.location.pathname,duration:(L["mvn-duration"])?L["mvn-duration"]:(L["mvn-videoSeconds"])?L["mvn-videoSeconds"]:0};if(O.length>0){P.PLVideos=O;}return P;}};MvPlayer.prototype._helper={cacheBuster:function(M){M=M||false;var L=new Date(),N=L.getFullYear().toString()+(L.getMonth()+1).toString()+L.getDate().toString();switch(M){case"h":N+=(L.getHours()+1).toString();break;case"30m":N+=(L.getHours()+1).toString()+((L.getMinutes()%30===0)?"1":"0");break;default:N+=(L.getHours()+1).toString();}return N;},isPlayFileReady:function(L){L=L||false;if(!L){return false;}return(typeof L.playFile!=="undefined")?true:false;},formatVideoId:function(N,L,M){L=L||false;M=M||false;if(M){N=N.split("").reverse().join("");}if(L){return N.replace(/\:/gi,"_");}else{return N.replace(/\_/gi,":");}},convertGrabDate:function(N){N=N||false;if(!N){return"";}var M=new Date(N),L=["January","February","March","April","May","June","July","August","September","October","November","December"];if(isNaN(M.getTime())){return"";}return L[M.getMonth()]+" "+M.getDate()+", "+M.getFullYear();},convertDate:function(N){if(typeof N!=="undefined"){var L=["January","February","March","April","May","June","July","August","September","October","November","December"],M=N.toString().split("T");M=M[0].split("-");M=new Date(M[0],(M[1]-1),M[2]);return L[M.getMonth()]+" "+M.getDate()+", "+M.getFullYear();}else{return"";}},extractVideoId:function(M){var L=M.replace(/^(http:\/\/)?[a-zA-Z0-9\.]+/,"");L=(L.indexOf("#")===0)?L.substring(2):L.substring(1);return L.substring(0,L.indexOf("/"));},extractCategoryId:function(L){return L.split("category_id=")[1];},cleanTitle:function(L){L=L.replace(/\s+/g,"-").toLowerCase();return L.replace(/[^a-z0-9\-]/g,"");},cleanHref:function(L){return L.replace(/^(http:\/\/)?[a-zA-Z0-9\.]+/,"");},cleanImageUrl:function(L){return L.replace("http://media2.foxnews.com","");},convertTime:function(M){var N=Math.floor(M/60),L=Math.floor(M%60);L=(L<10)?"0"+L:L;return N+":"+L;},videoObjectJSON:function(L){return this.root.feedParser.legacy(L);}};function A(M,O){M=M||999999;O=O||25;function N(){return(Math.floor(Math.random()*M)%2===1)?true:false;}function Q(){var S=(N())?97:65;return String.fromCharCode(S+Math.round(Math.random()*25));}function P(){return Math.floor(Math.random()*10);}function R(){return(N())?Q():P();}function L(){var T,S=[];for(T=0;T<(O-1);T++){S.push(R());}S.sort(function(){return 0.5-Math.random();});return Q()+S.join("");}return L();}var H=(function(){var M={dm:"Agent",vcm:"i",ox:"vt"};var Q=function(U){this.main=U;this.video={};this.prefix={controls:"player-controls-",playPause:"playpause-",fullScreen:"fullscreen-",loadPct:"load-counter-"};this.prefix.time={current:"time-current",duration:"time-duration"};this.controlsHTML='<strong>listeners:</strong>  <a id="'+this.prefix.playPause+'${id}" href="#">${playState}</a> | Current Time: <span id="'+this.prefix.time.current+'${id}">00:00</span> | Duration Time: <span id="'+this.prefix.time.duration+'${id}">00:00</span>';M.ol={arg:"P",lmp:"COM",rd:"USER"};this.listeners=new R(this);this.TYPE=new P(this);this.EVENTS=new O(this);this.PROPERTIES=new T(this);this.STATES=new S(this);this.CONTROLS=new L(this);this.ADS=new N(this);};Q.prototype={init:function(U){U=U||false;if(U){var V;for(V in U){this["_"+V]=U[V];}}if(!this.compatible()){return false;}if(this.helper.getQuery("html5")==="legacy"){window.useLegacyHTML5=true;}return true;},compatible:function(){var U=false;if(this.helper.getQuery("_"+M.ox+M.ol.lmp.toLowerCase()+M.ol.arg.toLowerCase())==="y"){this._forced=true;U=J();}else{U=(J()&&G())?true:false;}return U;},check:function(U){return this.compatible();},create:function(U){},load:function(U,W){var d=this,Z=this.main;if(!this.check(U)){return false;}C("[videoPlayer.pandora] Loading....");var b=function(){Z.holderObj[U].elm.data("pandora",false);Z.holderObj[U].elm.data("pandoraLoaded",false);if(G()){if(Z._callbacksObj[U]){if(Z._callbacksObj[U].deviceRenderFailed){Z._callbacksObj[U].deviceRenderFailed();}}}else{Z.embed.player(U);}};if(Z.dataObj[U]){var a=Z.dataObj[U],X=Z.holderObj[U];W=(typeof W==="undefined")?X.vAttr.autoplay:W;if(!a.htmlFive){b();}else{var V=G(),Y=(typeof V==="string"&&V==="legacy")?true:false;var c=(function(){var e=false;if(a.htmlFive.STREAM&&!d._forced&&!Y){e=a.htmlFive.STREAM.url;}else{if(a.htmlFive.LOW){e=a.htmlFive.LOW.url;}else{if(a.htmlFive.MED){e=a.htmlFive.MED.url;}else{if(a.htmlFive.HI){e=a.htmlFive.HI.url;}}}}return e;}());if(!c){b();return false;}C("[videoPlayer.pandora] Loading HTML5 video player...");C("[videoPlayer.pandora] Choosing HTML5 Player... legacy? "+((Y)?"yes":"no"));if(window.useAkamaiHTML5){d.TYPE.AKAMAI(a,U,c,W);}else{if(Y||window.useLegacyHTML5){d.TYPE.LEGACY(a,U,c,W);}else{d.TYPE.AKAMAI(a,U,c,W);}}}}else{Z.feed.get({id:U,autoplay:W});}}};Q.prototype.helper={replaceStr:function(X,V,W){var U=X.indexOf(V);while(U!==-1){X=X.replace(V,W);U=X.indexOf(V);}return X;},formatTime:function(X){X=parseInt(X,10);var W=Math.floor(X/360),V=Math.floor(X/60),U=X%60;function Y(Z){return(Z<10)?"0"+Z:Z;}return((W>0)?Y(W):"")+Y(V)+":"+Y(U);},getQuery:function(X){var U,W=(window.location.search).substr(1),Y=W.split("&");for(U=0;U<Y.length;U++){var V=Y[U].split("=");if(V[0]===X){return V[1];}}return false;}};var P=(function(){var U=function(V){this.root=V;};U.prototype.LEGACY=function(c,W,f,Y){var g=this,d=this.root,a=d.main,Z=a.holderObj[W],b=Z.elm,X=(typeof a._config.display.clickThruImage==="undefined")?false:(typeof a._config.display.clickThruImage!=="object")?a._config.display.clickThruImage:a._config.display.clickThruImage.render;if(X&&d._isPandora&&!window.useLegacyHTML5){X=false;}C("[videoPlayer.pandora] Using Legacy HTML5 video player.");if(!b.data("pandoraLoaded")){a.embed.player(W);}else{var V=(function(){var h=true,j=(a._config.player.flashVars&&a._config.player.flashVars.core_ads_enabled!=="undefined")?a._config.player.flashVars.core_ads_enabled:false,k=(Z.customFlashVars&&typeof Z.customFlashVars.core_ads_enabled!=="undefined")?Z.customFlashVars.core_ads_enabled:false;var i=function(m){var l;if(typeof m==="string"&&m.toLowerCase()==="true"){l=true;}else{if(typeof m==="boolean"){l=true;}else{l=false;}}return l;};if(d.helper.getQuery("_vtads")==="n"){h=false;}else{if(k){h=i(k);}else{if(j){h=i(j);}}}return h;}());var e=function(){var k,l=(Z.elm.data("autoplay"))?true:false,j=Z.elm.parent(),h=[],m=[],p="width|height";for(k in Z.vAttr){if(k==="format"){h.push('class="'+Z.vAttr[k]+' pandora-player"');}else{if(k==="id"){var o=a.setPlayerMap({type:"get",vId:Z.vAttr[k]});a.setPlayerMap({type:"set",vId:W,domId:o});h.push('id="'+o+'"');}else{if(p.indexOf(k)>-1){m.push(k+":"+Z.vAttr[k]+";");}}}}C("[videoPlayer.pandora.LEGACY] Video Source: "+f);var n=m.join(" ");newVideo='<video controls="" '+h.join(" ")+' src="'+f+'" style="'+n+'"></video>';j.get(0).innerHTML=newVideo;j.find("video:first").each(function(){var i=D(this);i.data("pandora",true);i.data("pandoraLoaded",true);i.data("autoplay",l);d.video[W]={elm:i,nativeElm:i.get(0)};d.listeners.init(W);if(a._callbacksObj[W]){if(a._callbacksObj[W].dataChanged){a._callbacksObj[W].dataChanged(c);}}if(X||l){d.CONTROLS.play(W);}a.thirdParty.akamaiMediaAnalytics(i.attr("id"));C("[videoPlayer.pandora.LEGACY] Legacy Player: Play ads = "+((V)?"TRUE":"FALSE"));if(V){d.ADS.set({id:W,elm:j,url:f,dim:Z.dim});}});};C("[videoPlayer.pandora.LEGACY] Legacy Player: Play ads = "+((V)?"TRUE":"FALSE"));if(V){d.ADS.load(function(){e();});}else{e();}}};U.prototype.AKAMAI=function(r,i,X,d){var f=this,m=f.root,Z=m.main;var a=function(s){return s.replace(/[^0-9]/gi,"");};var o=Z.holderObj[i],b=a(i),Y=(o.elm.data("autoplay"))?true:false,c=(Z._config.player.variable)?true:false,h=o.elm.parent(),l=o.vAttr,j=a(l.width),g=a(l.height),V=Z._config.player,n=(!V.environment)?"":(window.location.search.indexOf("venv=prod")>-1)?"":(V.environment==="beta")?"beta.":"",q=(m.helper.getQuery("_"+M.ox+M.ol.lmp.toLowerCase()+M.ol.arg.toLowerCase())==="y")?true:false,p=n+Z._videoDomain,k="http://"+p,W=[];C("[videoPlayer.pandora] Using AKAMAI HTML5 video player.");if(d){W.push("autoplay=true");}if(q){W.push("_vtcomp=y");}W=(W.length>0)?"&"+W.join("&"):"";var e;if(!c){e='<iframe src="'+k+"/v/html5-embed.html?video_id="+a(i)+"&w="+j+"&h="+g+W+'" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="'+j+'" height="'+g+'" style="border:0;width:'+l.width+";height:"+l.height+'"></iframe>';}else{e='<iframe src="'+k+"/v/html5-embed.html?video_id="+a(i)+'&w=1&h=1" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="100%" height="100%" style="border:0;width:100%;height:100%"></iframe>';e='<div id="fox-html5-frame" style="width:'+l.width+";height:"+l.height+'">'+e+"</div>";}h.get(0).innerHTML=e;};return U;}());var N=(function(){var U=function(V){this.root=V;this.zoneIdVal=(function(){var X=K.auditude_code.zoneId,W=X.fn2;switch(V._videoDomain){case"video.foxnews.com":W=X.fn2;break;case"video.foxbusiness.com":W=X.fb2;break;case"video.foxbusiness.com":W=X.fb;break;}return W;}());};U.prototype={set:function(o){if(!o){return false;}var d=this,g=this.root,e=(g.main.dataObj[o.id]&&g.main.dataObj[o.id].guid)?g.main.dataObj[o.id].guid:false,X=o.elm,i=o.url,j=o.dim,W=(o.userData)?o.userData:{};var f=function(r){var p="p-click-"+e;try{D("body").append('<a href="#" id="'+p+'" style="display:none;">Click Me</a>');D("#"+p).click(function(){r.play();return false;});setTimeout(function(){D("#"+p).click().remove();},250);}catch(q){C("[videoPlayer.auditude] No play() function for html5 video element. (Err: "+q+")");}};var l,Y,a,Z,h=window.FN_AUDITUDE||{};l=(h.adVideoId)?h.adVideoId:e;Y=(h.adDomain)?h.adDomain:K.auditude_code.adDomain;a=(h.zoneId)?h.zoneId:d.zoneIdVal;Z=(h.defaultAssetId)?h.defaultAssetId:K.auditude_code.defaultAssetId;l=(l)?[l,Z]:Z;W.mobile=(function(){var p=I();return(p)?p.dev:"false";}());B("mobile platform:"+W.mobile);W=(function(){var p=[];for(var q in W){p.push(q+"="+W[q]);}return p.join(";");}());var b=X.get(0),n=X.find("video:first"),m=n.get(0),V=false;var c={controls:true,style:{backgroundColor:"#000",width:n.width(),height:n.height()},handlers:{}};var k=aud.html5.AdPlayer(m,b,Y,a,c);k.subscribe(aud.events.init_complete,function(q,p){C("[videoPlayer.auditude] Init Complete event");p.publish(aud.notifications.break_begin);}).subscribe(aud.events.break_begin,function(q,p){C("[videoPlayer.auditude] Break Begin event");}).subscribe(aud.events.break_end,function(q,p){C("[videoPlayer.auditude] Break End event");if(!V){m.src=i;m.load();f(m);}}).subscribe(aud.events.linear_ad_begin,function(r,q,p){C("[videoPlayer.auditude] Linear Ad Begin event");}).subscribe(aud.events.linear_ad_end,function(r,q,p){C("[videoPlayer.auditude] Linear Ad End event");}).subscribe(aud.events.non_linear_ad_begin,function(r,q,p){C("[videoPlayer.auditude] Non-Linear Ad Begin event");}).subscribe(aud.events.non_linear_ad_end,function(r,q,p){C("[videoPlayer.auditude] Non-Linear Ad End event");}).subscribe(aud.events.pause_playback,function(r,q,p){C("[videoPlayer.auditude] Pause playback event");m.pause();}).subscribe(aud.events.resume_playback,function(r,q,p){C("[videoPlayer.auditude] Resume playback event");f(m);}).init(l,{userData:W});},load:function(X){var W=this;if(!window.aud){var V=document.createElement("script");V.type="text/javascript";V.async=true;V.src="http://adunit.cdn.auditude.com:80/player/js/lib/plugin/1.2/aud.html5player.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(V);}D.loadAttempt(50,250,function(){return(window.aud&&aud.html5)?true:false;},function(){if(typeof X==="function"){X();}});}};return U;}());var R=(function(){var U=function(V){this.root=V;};U.prototype={init:function(V){this.events(V);this.custom(V);},events:function(X){var W=this.root,V=W.main;W.video[X].elm.bind("loadstart",function(){if(V._callbacksObj[X]){if(V._callbacksObj[X].videoLoadStart){V._callbacksObj[X].videoLoadStart();}}D.removeData(W.video[X].elm,"Event_ended");W.EVENTS.loadStart(X);});W.video[X].elm.bind("progress",function(){W.EVENTS.progress(X);});W.video[X].elm.bind("loadedmetadata",function(){if(V._callbacksObj[X]){if(V._callbacksObj[X].videoMedaLoaded){V._callbacksObj[X].videoMetaLoaded();}}W.EVENTS.loadedMetaData(X);});W.video[X].elm.bind("ended",function(){if(V._callbacksObj[X]){if(V._callbacksObj[X].videoEnded){V._callbacksObj[X].videoEnded(W.CONTROLS);}}W.video[X].elm.data("Event_ended",true);W.EVENTS.ended(X);});W.video[X].elm.bind("playing",function(){if(V._callbacksObj[X]){if(V._callbacksObj[X].videoPlaying){V._callbacksObj[X].videoPlaying();}}W.EVENTS.playing(X);});W.video[X].elm.bind("pause",function(){if(V._callbacksObj[X]){if(V._callbacksObj[X].videoPause){V._callbacksObj[X].videoPause();}}W.EVENTS.pause(X);});W.video[X].elm.bind("timeupdate",function(){if(V._callbacksObj[X]){if(V._callbacksObj[X].videoTimeUpdate){V._callbacksObj[X].videoTimeUpdate();}}W.EVENTS.timeUpdate(X);});},custom:function(V){}};return U;}());var L=(function(){var U=function(V){this.root=V;};U.prototype={play:function(Y){var W=this.root,V=W.main,X=V.setPlayerMap({type:"get",vId:Y});if(typeof document.getElementById(X)!=="undefined"){document.getElementById(X).play();}},pause:function(Y){var W=this.root,V=W.main,X=V.setPlayerMap({type:"get",vId:Y});if(typeof document.getElementById(X)!=="undefined"){document.getElementById(X).pause();}},load:function(V){},canPlayType:function(V){},jumpTo:function(Z,Y){if(isNaN(Y)){return false;}var W=this.root,V=W.main,X=V.setPlayerMap({type:"get",vId:Z});if(typeof document.getElementById(X)!=="undefined"){document.getElementById(X).currentTime=Y;}}};return U;}());var O=(function(){var U=function(V){this.root=V;};U.prototype={loadStart:function(Y){var W=this.root,V=W.main,X=V.setPlayerMap({type:"get",vId:Y});},progress:function(Y){var V=this.root,X=V.STATES.buffered(Y,{range:"end",val:0}),W=parseInt((X/V.STATES.duration(Y))*100,10);},loadedMetaData:function(V){},timeUpdate:function(V){},ended:function(V){},playing:function(V){},pause:function(V){}};return U;}());var T=(function(){var U=function(V){this.root=V;};U.prototype={currentTime:function(a,W){W=W||false;var V=this.root,Z=Math.round(V.video[a].nativeElm.currentTime);if(!W){var Y=V.helper.formatTime(Z),X=V.STATES.duration(a,true);return(Y>X)?X:Y;}return Z;}};return U;}());var S=(function(){var U=function(V){this.root=V;};U.prototype={duration:function(a,X){X=X||false;var W=this.root,V=W.main,Z=V.setPlayerMap({type:"get",vId:a});if(typeof document.getElementById(Z)==="undefined"){return 0;}var Y=Math.round(document.getElementById(Z).duration);if(!X){return W.helper.formatTime(Y);}return Y;},buffered:function(a,X){X=X||false;if(!X){return false;}var W=this.root,V=W.main,Z=V.setPlayerMap({type:"get",vId:a});if(typeof document.getElementById(Z)!=="undefined"){try{switch(X.range){case"length":return document.getElementById(Z).buffered.length;case"start":return document.getElementById(Z).buffered.start(X.val);case"end":return document.getElementById(Z).buffered.end(X.val);}}catch(Y){C("[videoPlayer.pandora.states] Warning: "+Y);}}return false;}};return U;}());return Q;}());var F={set:function(){var L,O,M=this,N=arguments,P={elm:false,ratio:false,dim:false,position:false,size:false,hover:true};if(N.length===1&&typeof N[0]==="object"){for(O in N[0]){P[O]=N[0][O];}}else{for(L=0;L<N.length;L++){switch(L){case 0:P.elm=N[0];break;case 1:P.ratio=N[1];break;case 2:P.dim=N[2];break;case 3:P.position=N[3];break;case 4:P.size=N[4];break;case 5:P.useAltImg=N[5];break;case 6:P.altHover=N[6];break;}}}P.elm.each(function(){var R=D(this),Q=new Image(),S=P;S.elm=R;if(S.dim){M.setOverlay(S);}else{Q.onload=function(){S.dim=[Q.width,Q.height];M.setOverlay(S);};Q.src=R.find("img").attr("src");}});},useAbsImg:function(P,M){var T,L=["118","96","64","48","32","24","16"],S=false;if(!isNaN(P)){if(P>=L[0]){S=L[0];}else{for(T=0;T<L.length;T++){var N=L[T],R=(L[T+1])?L[T+1]:0,Q=Math.abs(N-P),O=Math.abs(N-R);if(P<=N&&P>R){S=(Q>O)?R:N;break;}}}}return(S)?S:false;},setOverlay:function(M){var L=this,T=M.elm,U=M.ratio||0.35,N=M.dim,O=M.position||"center",b=M.size||118,P=M.useAltImg,a=M.altHover||false,S=true,X=false;var V="http://global.fncstatic.com/static/v/all/img/vp-overlay${dim}${hover}.png";function W(c){return Math.floor(c);}function Z(c){return c+"px";}function Q(d){d=(a)?((d)?false:true):d;var c;if(S&&X){c=X;}c=(c)?("-"+c):"";return V.replace("${dim}",c).replace("${hover}",(d)?"-hover":"");}function Y(){var o=(N[1]<N[0])?N[1]:N[0],d=o*U;d=(d>b)?b:d;var l=d,f=l,m=false,i=false,h=false,c=false,k=0.03,e=0.05;k=W(N[0]*k);e=W(N[1]*e);switch(O){case"top right":i=k;h=e;break;case"bottom right":i=k;c=e;break;case"top left":m=k;h=e;break;case"bottom left":m=k;c=e;break;default:m=Math.floor((N[0]*0.5)-(l*0.5));h=Math.floor((N[1]*0.5)-(f*0.5));}var j={};if(i){j.right=Z(i);}if(m){j.left=Z(m);}if(h){j.top=Z(h);}if(c){j.bottom=Z(c);}if(S&&L.useAbsImg(l)){l=L.useAbsImg(l);f=l;X=l;}j.width=Z(l);j.minHeight=Z(f);var g=D('<span class="vid-overlay"><img style="position:absolute; display:inline;" src="'+Q()+'"/></span>'),n=T.parent().find("> h3:first");g.find("img").css(j);T.find("a").css({position:"relative"});T.find("img").each(function(){var q=D(this),p=q.parent(),t=false;p.css({display:"block",padding:"0"}).prepend(g);var s=p.find(".vid-overlay"),u=s.find("img");function r(v){if(v&&!t){t=true;u.attr("src",Q(true));}else{if(t){t=false;u.attr("src",Q());}}}n.hover(function(){r(true);},function(){r();});p.hover(function(){r(true);},function(){r();});});}var R=new Image();R.src=Q(true);Y();}};function G(){var L=false,M=navigator.userAgent;var N=function(O){return(M.toLowerCase().indexOf(O)>-1)?true:false;};if(N("silk")&&!N("silk/1.0")){L="legacy";}else{if(N("android")&&!N("silk")){L="legacy";}else{if(N("blackberry")){L=true;}else{if("createTouch" in document){L=true;}}}}return L;}function J(){var L=document.createElement("video");return(L.play)?true:false;}function E(L){L=L||false;return Object.prototype.toString.call(L)==="[object Array]";}function I(){var L={};if(navigator.userAgent.match(/iPhone/i)){L.mobile="ios";L.dev="iPhone";}else{if(navigator.userAgent.match(/iPod/i)){L.mobile="ios";L.dev="iPod";}else{if(navigator.userAgent.match(/iPad/i)){L.mobile="ios";L.dev="iPad";}else{if(navigator.userAgent.match(/Silk/i)){L.mobile="android";L.dev="Kindle";}else{L=false;}}}}return L;}if(!window.console){window.console={log:function(){},error:function(){}};}function C(){var M=false;M=(!M&&(window.location.search.indexOf("stc=y")>-1))?true:M;if(!window.console){window.console={log:function(){},error:function(){}};}if(M&&window.console){try{return console.log.apply(console,arguments);}catch(L){console.log(arguments);}}}var B=C;(function(){var M=function(){var U,O,R=this,S=arguments;if(S.length===0){return false;}var Q={attempt:0,timeout:500};if(S.length===1&&typeof S[0]==="object"){for(U in S[0]){Q[U]=S[0][U];}if(!Q.callback){return false;}else{O=Q.callback;}if(!O.check||!O.success){return false;}else{Q._check=O.check;Q._success=O.success;}if(O.timedOut){Q._timeout=O.timedOut;}}else{if(!isNaN(S[0])&&!isNaN(S[1])&&L(S[2])&&L(S[3])){Q.attempt=S[0];Q.timeout=S[1];Q._check=S[2];Q._success=S[3];if(S[4]){Q._timeout=S[4];}if(S[5]){Q._abort=S[5];}}else{if(L(S[0])&&L(S[1])){Q._check=S[0];Q._success=S[1];if(S[2]){Q._timeout=S[2];}if(S[3]){Q._abort=S[3];}}else{return false;}}}if(!L(Q._check)||!L(Q._success)){return false;}if(!L(Q._timeout)){Q._timeout=function(){};}if(isNaN(Q.timeout)){return false;}else{Q.timeout=N(Q.timeout);}if(isNaN(Q.attempt)){return false;}else{Q.attempt=N(Q.attempt);}var V=false,P=false;if(Q.attempt&&Q.timeout){var T=function(){if(P){clearTimeout(V);}else{if(Q._check()){Q._success();clearTimeout(V);}else{if(Q.attempt>0){V=setTimeout(function(){T();},Q.timeout);}else{Q._timeout();}}}Q.attempt--;};T();}else{V=setInterval(function(){if(P){clearInterval(V);}else{if(Q._check()){Q._success();clearInterval(V);}}},Q.timeout);}return{abort:function(){P=true;}};};function N(O){return parseInt(O,10);}function L(O){return(typeof O==="function")?true:false;}if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:M});}else{if(!window.loadAttempt){window.loadAttempt=M;}}}());}(jQuery));(function(D){function E(){this.listenersArr=[];this.version="03.31.2010";}E.prototype={append:function(H){H=H||false;if(!H||!H.elm){return false;}var I=this,J=new G();J.init(H);this.listenersArr.push({fn:J,config:H});this.trigger(J);},trigger:function(I){I=I||false;var K=this;if(I){I.trigger();}else{var H;for(H=0;H<K.listenersArr.length;H++){var J=K.listenersArr[H].fn;K.helper.removeListener(J._elm,I.thisEventList);J.trigger();}}},reTriggerListener:function(){var H=this;D(document).ready(function(){var M=500,I=10000,K=0,L=D("iframe").size();function J(){if(L!==K){K=L;}else{M=Math.floor(M/3)+M;}if(M<I){H.trigger();setTimeout(function(){J();},M);}}J();});}};E.prototype.helper={removeListener:function(I,H){I.each(function(){var J,K=D(this);if(A(H)){for(J=0;J<H.length;J++){K.unbind(H[J]);}}else{K.unbind(H);}});}};function G(){this._elm=false;this._eventsCallback={};this._moveSensitivity=15;this.properties={scale:{},move:{origin:{},current:{},diff:{}}};this.thisEventList=["touchstart","touchend","touchmove","gesturestart","gestureend"];}G.prototype={init:function(H){var I;for(I in H){this["_"+I]=H[I];}this.testElm={coords:D("#coords"),start:D("#start"),diff:D("#diff")};this.logger=new B();this.logger.init();},trigger:function(){var H=this;this._elm.each(function(){H.setListeners(D(this));});},setListeners:function(I){I=I||false;if(!I){return false;}var H=this,K=I.get(0);I.bind("touchstart",function(L){var M=L.originalEvent;H._elm.data("EVENT_touchstart.trigger",true);H._elm.data("EVENT_touchmove.setOrigin",false);H._elm.data("EVENT_touchmove.directionalOnce",false);if(H._eventsCallback.touchstart){H._eventsCallback.touchstart(M);}});I.bind("touchend",function(L){var M=L.originalEvent;H._elm.data("EVENT_touchstart.trigger",false);H._elm.data("EVENT_touchmove.directionalOnce",false);if(H._eventsCallback.touchend){H._eventsCallback.touchend(M);}});I.bind("touchmove",function(N){var Q=N.originalEvent,P=Q.touches[0].pageX,O=Q.touches[0].pageY;H.properties.move.current={x:P,y:O};if(!H._elm.data("EVENT_touchmove.setOrigin")){H.properties.move.origin.x=P;H.properties.move.origin.y=O;H._elm.data("EVENT_touchmove.setOrigin",true);}var L={x:H.properties.move.origin.x,y:H.properties.move.origin.y};H.properties.move.diff={x:P-L.x,y:O-L.y};if(H._eventsCallback.touchmoveRaw){H._eventsCallback.touchmoveRaw(H.properties.move,Q);}function M(){var S=H._moveSensitivity,T=[];function R(){H._elm.data("EVENT_touchmove.directionalOnce",true);}if(P>=L.x+S){T.push("right");H.logger.log("going right");}else{if(P<=L.x-S){T.push("left");H.logger.log("going left");}}if(O<=L.y-S){T.push("up");H.logger.log("going up");}else{if(O>=L.y+S){T.push("down");H.logger.log("going down");}}if(H._eventsCallback.touchmoveMoveOnce){H._eventsCallback.touchmoveMoveOnce(T,H.properties.move,Q);}if(T.length>0){R();}}if(!H._elm.data("EVENT_touchmove.directionalOnce")){M();}});I.bind("gesturestart",function(L){var M=L.originalEvent,N=H.helper.setScale(M.scale);H.properties.scale.current=H.properties.scale.current||N;if(H._eventsCallback.gesturestart){H._eventsCallback.gesturestart(M);}H.properties.scale.changed=false;});I.bind("gestureend",function(L){var M=L.originalEvent,N=H.helper.setScale(M.scale);if(H._eventsCallback.gestureend){H._eventsCallback.gestureend(M);}if(H.properties.scale.current!==N){H.properties.scale.current=N;H.properties.scale.changed=true;H.logger.log("Scale changed to: "+N);if(H._eventsCallback.scaleChange){H._eventsCallback.scaleChange(N,M);}}});var J=D(window);if(!J.data("EVENT_orientationchange")){J.bind("orientationchange",function(L){var M=L.originalEvent;H.logger.log("Orientation change: "+H.helper.orientation(window.orientation,M));});J.data("EVENT_orientationchange",true);}if(H._eventsCallback.orientationchange){J.bind("orientationchange",function(L){var M=L.originalEvent;H._eventsCallback.orientationchange(H.helper.orientation(window.orientation,M));});}}};G.prototype.helper={setScale:function(H){if(!isNaN(H)){return Math.round(H*100)/100;}},orientation:function(I){if(!isNaN(I)){var H=Math.abs(I);return(H===0||H===180)?"vertical":"horizontal";}}};function C(H){if(typeof window.console==="object"){console.log(H);}}function A(H){H=H||false;return Object.prototype.toString.call(H)==="[object Array]";}var B=function(){};B.prototype={init:function(){this.elm=D("#console ul:first");},log:function(H){if(this.getQuery("log")!=="y"){return false;}if(this.elm.size()>0){H="<li>"+H+"</li>";this.elm.append(H);}else{C(H);}},getQuery:function(L){var H,J=(window.location.search).substr(1),K=J.split("&");for(H=0;H<K.length;H++){var I=K[H].split("=");if(I[0]===L){return I[1];}}return false;}};var F=window.touchEventListener=new E();}(jQuery));window.ClientStorageManager=(function(F){var C={},K={_namespace:"ClientStorageManager",_prefix:"FoxCSM_",_cookiePrefix:"FXcsm",_cookiePersistence:30,_showConsole:false,_frameSrc:"/static/v/all/html/IEStore.html",_splitVars:"|#|"};var E=function(){this.dataObj=null;this.initialized=false;this.type=null;this.customType=false;this.control=new B(this);this.init();};E.prototype={init:function(){var L=this,M=A();L.setProperties();L.storageInstance=new H(L,{namespace:K._namespace,prefix:K._prefix,type:M});L.type=M;L.initialized=true;D("[init] Initialized: "+L.type);if(L.type.toLowerCase().indexOf("cookie")>-1){D("[init] Warning: cookie storage maxes out at 4kb only!");}},setProperties:function(){var M,P=(F.location.search).substr(1),Q=P.split("&"),L=Q.length,N={};for(M=0;M<L;M++){var O=Q[M].split("=");N[O[0]]=decodeURIComponent(O[1]);}if(N.showConsole){K._showConsole=true;}},set:function(){var N,L=this,M=arguments,O;var P=function(T){switch(T.key){case"type":var S=T.value;switch(S){case"session":S=(F.sessionStorage)?"sessionStorage":"sessionCookie";break;case"cookie":S="cookie";break;case"sessionCookie":S="sessionCookie";break;default:D("[set] Getting default storage..");S=A();}if(S===L.type){D("[set] Type already: "+S);break;}if(L.type==="MSIEStorage"){L.MSIEStorageInstance=L.storageInstance;}var R={namespace:K._namespace,prefix:K._prefix,type:S,prevType:L.type};var Q=(R.type==="MSIEStorage")?L.MSIEStorageInstance:new H(L,R);if(Q.initialized){G();I(CS,{customType:true,storageInstance:Q,type:R.type});L.control.root=CS;D("[set] Storage changed: "+R.prevType+" -> "+R.type);if(L.type.toLowerCase().indexOf("cookie")>-1){D("[set] Warning: cookie storage maxes out at 4kb only!");}}else{D("[set] Error setting type: "+S);}break;default:D("[set] Invalid property key: "+T.key);}};if(typeof M[0]==="object"){for(N in M[0]){P({key:N,value:M[0][N]});}}else{P({key:M[0],value:M[1]});}},saveItem:function(){var L=arguments,M=(L.length===1&&typeof L[0]==="object")?L[0]:{key:L[0],value:L[1]};this.control.saveItem(M);},deleteItem:function(L,M){var N={key:L};if(M){N.fn=M;}this.control.deleteItem(N);},getItem:function(M,N,L){this.control.getItem({key:M,fn:N,raw:L||false});},getAll:function(L){this.control.getAllItems(L);},clearAll:function(L){this.control.clearAll(L);}};var B=(function(){var M=function(N){this.root=N;};M.prototype={saveItem:function(P){var O=this,N=this.root;if(P.key&&P.value){var Q=L.formatValue(P.value);if(Q&&Q.length>0){N.storageInstance.save({key:O.setPrefix(P.key),value:Q,expire:(P.expire)?P.expire:0});if(typeof P.success!=="undefined"){O.attempts=0;O.checkData(P);}}}else{if(P.error){P.error("No Key or Value entered");}}},deleteItem:function(Q){var O=this,N=this.root,P=this.setPrefix(Q.key);var R=function(){N.storageInstance.deleteItem(P);D("[control] Storage Event: Delete");};if(Q.fn){Q.fn(R());}else{R();}},getItem:function(N){N.key=this.setPrefix(N.key);this.root.storageInstance.load(N);},getAllItems:function(N){this.root.storageInstance.getAll(N);},clearAll:function(P){var O=this,N=this.root;N.storageInstance.clearAll();D("[control] Storage Event: Clear All");if(typeof P==="function"){P();}},checkData:function(P){var O=this,N=this.root;O.getItem({key:P.key,raw:false,fn:function(R){if(R!==null){P.success({key:P.key,value:R,type:N.storageInstance.type});D("[control] Storage Event: Save");}else{var Q="[control] Error saving key: "+P.key;P.success=false;P.error(Q);D(Q);return null;}}});},setPrefix:function(N){var O="MSIEStorage|cookie|sessionCookie";return(O.indexOf(this.root.type)>-1)?N:L.addPrefix(K._prefix,N);}};var L={addPrefix:function(O,N){return O+this.trim(N);},removePrefix:function(O,N){return N.substr(O.length);},formatValue:function(N){return this.trim(N.toString());},trim:function(N){return N.replace(/^\s+|\s+$/g,"");}};return M;}());var H=(function(){var L=function(R,S){this.root=R;this.sessionStorage=new Q(this);this.localStorage=new N(this);this.globalStorage=new O(this);this.MSIEStorage=new M(this);this.cookieStorage=new P(this);return(this.init(S));};L.prototype={init:function(S){var R=this,T;R.initialzed=true;switch(S.type){case"MSIEStorage":I(S,{div:{id:"IEStorageSource",store:"xmldomstore"},frame:{src:K._frameSrc,id:"IEStorageSource",name:"DOMPersistentSource",store:"xmldomstore"}});T="MSIEStorage";break;case"cookie":I(S,{cookieName:K._cookiePrefix,sessionCookie:false});T="cookieStorage";break;case"sessionCookie":I(S,{cookieName:K._cookiePrefix+"s",sessionCookie:true});T="cookieStorage";break;default:T=S.type;}R[T].init(S);return R[T];}};var Q=function(R){this.root=R.root;this.main=R;};Q.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.initialized=true;},save:function(S){try{F.sessionStorage.setItem(S.key,S.value);}catch(R){D("[sessionStorage save] Error Saving: "+R);}},load:function(){var R=arguments;function S(T){return F.sessionStorage.getItem(T);}if(R.length===1&&typeof R[0]==="object"){R[0].fn(S(R[0].key));}else{return S(R[0]);}},deleteItem:function(R){F.sessionStorage.removeItem(R);},getAll:function(V){var S,T={},W=0,X=F.sessionStorage,R=X.length;for(S=0;S<R;S++){var U=X.key(S);if(U.indexOf(this.prefix)===0){T[U.substr(this.prefix.length)]=this.load(U);W++;}}V((W>0)?T:null);},clearAll:function(){var S,U,W=[],X=F.sessionStorage,R=X.length;for(S=0;S<R;S++){var V=X.key(S);if(V.indexOf(this.prefix)===0){W.push(X.key(S));}}var T=W.length;for(U=0;U<T;U++){this.deleteItem(W[U]);}return true;}};var N=function(R){this.root=R.root;this.main=R;};N.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.expire=new J();this.initialized=true;this.removeExpired();},save:function(T){var R="";if(T.expire){R=(this.expire.setToExpire(T.expire))?this.expire.set(T.expire):"";}try{F.localStorage.setItem(T.key,T.value.toString()+R);}catch(S){D("[localStorage save] Error Saving: "+S);}},load:function(){var R=this,S=arguments;function T(V,U){var W=F.localStorage.getItem(V);if(W){if(R.expire.isStale(W)){R.deleteItem(V);}else{return(!U)?R.expire.removeExpireStr(W):W;}}return null;}if(S.length===1&&typeof S[0]==="object"){S[0].fn(T(S[0].key,S[0].raw||false));}else{return T(S[0],S[1]||false);}},deleteItem:function(R){F.localStorage.removeItem(R);},getAll:function(V){var S,T={},W=0,X=F.localStorage,R=X.length;for(S=0;S<R;S++){var U=X.key(S);if(U.indexOf(this.prefix)===0){T[U.substr(this.prefix.length)]=this.load(U);W++;}}V((W>0)?T:null);},clearAll:function(){var S,U,W=[],X=F.localStorage,R=X.length;for(S=0;S<R;S++){var V=X.key(S);if(V.indexOf(this.prefix)===0){W.push(X.key(S));}}var T=W.length;for(U=0;U<T;U++){this.deleteItem(W[U]);}return true;},removeExpired:function(){var S,U,V=[],W=F.localStorage,R=W.length;for(S=0;S<R;S++){V.push(W.key(S));}var T=V.length;for(U=0;U<T;U++){if(V[U].indexOf(this.prefix)===0&&this.expire.isStale(W[V[U]])){this.deleteItem(V[U]);}}}};var O=function(R){this.root=R.root;this.main=R;};O.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.expire=new J();this.initialized=true;this.removeExpired();},save:function(T){var R="";if(T.expire){R=(this.expire.setToExpire(T.expire))?this.expire.set(T.expire):"";}try{F.globalStorage[document.domain][T.key]=T.value.toString()+R;}catch(S){D("[globalStorage save] Error Saving: "+S);}},load:function(){var R=this,S=arguments;function T(V,U){if(typeof F.globalStorage[document.domain][V]==="undefined"){return null;}var W=F.globalStorage[document.domain][V].value;if(R.expire.isStale(W)){R.deleteItem(V);}else{return(!U)?R.expire.removeExpireStr(W):W;}return null;}if(S.length===1&&typeof S[0]==="object"){S[0].fn(T(S[0].key,S[0].raw||false));}else{return T(S[0],S[1]||false);}},deleteItem:function(R){delete F.globalStorage[document.domain][R];},getAll:function(V){var S,T={},W=0,X=F.globalStorage[document.domain],R=X.length;for(S=0;S<R;S++){var U=X.key(S);if(U.indexOf(this.prefix)===0){T[U.substr(this.prefix.length)]=this.load(U);W++;}}return V((W>0)?T:null);},clearAll:function(){var S,U,W=[],X=F.globalStorage[document.domain],R=X.length;for(S=0;S<R;S++){var V=X.key(S);if(V.indexOf(this.prefix)===0){W.push(X.key(S));}}var T=W.length;for(U=0;U<T;U++){this.deleteItem(W[U]);}return true;},removeExpired:function(){var R;for(R in globalStorage[document.domain]){if(R.indexOf(this.prefix)===0&&this.expire.isStale(globalStorage[document.domain][R].value)){this.deleteItem(R);}}}};var M=function(R){this.root=R.root;this.main=R;};M.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.expire=new J();this.initialized=false;this.isDocReady=false;var T=document.createElement("iframe");T.setAttribute("src",this.frame.src+"?n="+R.namespace+"&s="+this.frame.store);T.setAttribute("id",this.frame.id);T.setAttribute("name",this.frame.name);T.setAttribute("width","5");T.setAttribute("height","5");T.setAttribute("style","visibility:hidden;position:absolute;top:0px;left:-9999px;");this.iframe=T;this.setFrame();},save:function(T){if(!this.initialized){return false;}if(!this.dataObj){this.dataObj={};}var R="";if(typeof T.expire!=="undefined"){R=(this.expire.setToExpire(T.expire))?this.expire.set(T.expire):"";}this.dataObj[T.key]=T.value.toString()+R;try{this.dataStorage.reloadIEStorage();return true;}catch(S){D("[IEStorage save] Error Saving: "+S);return false;}},load:function(){var R=this,S=arguments;function W(Y,X){if(!R.initialized){return null;}var a=R.dataObj;if(a[Y]){var Z=a[Y];if(R.expire.isStale(Z)){R.deleteItem(Y);}else{return(!X)?R.expire.removeExpireStr(Z):Z;}}return null;}if(S.length===1&&typeof S[0]==="object"){var U=0,V=S[0];var T=function(){if(R.initialized){clearTimeout(C.IELoad);if(R.dataObj){var X=V.raw||false;V.fn(W(V.key,X));}else{V.fn(null);}}else{C.IELoad=setTimeout(function(){T();},50);}};T();}else{return W(S[0],S[1]||false);}},deleteItem:function(R){if(this.initialized){delete this.dataObj[R];this.dataStorage.reloadIEStorage();}},getAll:function(T){var R=this,U=0;function S(){if(R.initialized){clearTimeout(C.IEGetAll);if(typeof R.dataObj!=="undefined"){var V,Y={},W=0;for(V in R.dataObj){var X=R.load(V);if(X){Y[V]=X;W++;}}return T((W>0)?Y:null);}return T(null);}else{if(U>=2){clearTimeout(C.IEGetAll);return T(null);}else{U++;C.IEGetAll=setTimeout(function(){S();},50);}}}S();},clearAll:function(){if(this.initialized){delete this.dataObj;this.dataStorage.reloadIEStorage();}},removeExpired:function(){if(this.initialized){var R,S=this.dataObj;for(R in S){if(this.expire.isStale(S[R])){delete S[R];}}this.dataObj=S;this.dataStorage.reloadIEStorage();}},loadClientData:function(R){this.dataObj=this.processStrToObj(R);},processStrToObj:function(V){var S,W={},U=V.split(K._splitVars),R=U.length;for(S=0;S<R;S++){var T=U[S].split("=");W[T[0]]=decodeURIComponent(T[1]);}return W;},processObjToStr:function(T){var R,S=[];if(T){for(R in T){S.push(R+"="+encodeURIComponent(T[R]));}}return(S.length>0)?S.join(K._splitVars):"";},setFrame:function(){var R=this;document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);S();}});if(document.documentElement.doScroll&&F===F.top){(function(){if(R.isDocReady){return ;}try{document.documentElement.doScroll("left");}catch(T){setTimeout(arguments.callee,50);return ;}S();}());}function S(){if(!document.getElementById(R.frameId)){document.documentElement.appendChild(thisObj.iframe);}thisObj.isDocReady=true;thisObj.removeExpired();}}};var P=function(R){this.root=R.root;this.main=R;};P.prototype={init:function(R){var S;for(S in R){this[S]=R[S];}this.expire=new J();this.initialized=true;this.removeExpired();},save:function(S){var W=this.getStorageCookie(),U,R="";if(S.expire&&!this.sessionCookie){if(this.expire.setToExpire(S.expire)){R=this.expire.set(S.expire,"cookieValue");}}var T=encodeURIComponent(S.value.toString())+R;if(W){var V=this.processStrToObj(W);V[S.key]=T;U=this.processObjToStr(V);}else{U=S.key+"="+T;}if(U){this.saveCookie(U);return true;}},saveCookie:function(U){var R=(!this.sessionCookie)?("; expires="+this.expire.set(K._cookiePersistence,"cookie")):"",S=this.cookieName+"="+K._splitVars+U+R+"; path=/";try{document.cookie=S;}catch(T){D("[Cookie save] Error Saving: "+T);}},load:function(){var R=this,S=arguments;function T(W,V){var U=R.getStorageCookie();if(U){var Y=R.processStrToObj(U);if(Y[W]){var X=Y[W];if(R.expire.isStale(X)){R.deleteItem(W);}return(!V)?R.expire.removeExpireStr(X):X;}}return null;}if(S.length===1&&typeof S[0]==="object"){S[0].fn(T(S[0].key,S[0].raw||false));}else{return T(S[0],S[1]||false);}},deleteItem:function(S){var R=this.getStorageCookie();if(R){var T=this.processStrToObj(R);if(T[S]){delete T[S];}this.saveCookie(this.processObjToStr(T));}},getAll:function(T){var R=this.getStorageCookie(),V={},U=0;if(R){var S,W=this.processStrToObj(R);for(S in W){if(W[S]){if(this.expire.isStale(W[S])){delete W[S];}else{V[S]=W[S];U++;}}}return T((U>0)?V:null);}return T(null);},clearAll:function(){this.saveCookie("");},removeExpired:function(){var R=this.getStorageCookie();if(R){var S,T=this.processStrToObj(R);for(S in T){if(T[S]){if(this.expire.isStale(T[S])){delete T[S];}}}this.saveCookie(this.processObjToStr(T));}},getStorageCookie:function(){var S,V,U=document.cookie.split(";"),R=U.length;for(S=0;S<R;S++){var T=U[S].replace(/^\s+|\s+$/g,"");if(T.substring(0,this.cookieName.length+1)===this.cookieName+"="){return decodeURIComponent(T.substring(this.cookieName.length+1));}}return null;},processStrToObj:function(V){var S,W={},U=V.split(K._splitVars),R=U.length;for(S=0;S<R;S++){var T=U[S].split("=");if(T[1]){W[T[0]]=T[1];}}return W;},processObjToStr:function(T){var R,S=[];for(R in T){if(R.length>0){S.push(R+"="+T[R]);}}return S.join(K._splitVars);}};return L;}());var A=function(){if(F.localStorage){return"localStorage";}else{if(F.globalStorage){return"globalStorage";}else{return"cookie";}}};var I=function(N,L){var M;for(M in L){N[M]=L[M];}return N;};var G=function(){var L;for(L in C){clearTimeout(C[L]);}};var D=function(L){if(typeof F.console==="object"&&K._showConsole){console.log(L);}};var J=function(){this.defaultExpire=14;this.expireStr="<!#[${value}]>";this.expireRegex=/\<!#\[(.+)\]>/;};J.prototype={now:function(){return(new Date());},set:function(L,M){L=L||this.defaultExpire;M=M||null;addTime=(L*24*3600000);var N=new Date(this.now().getTime()+addTime);switch(M){case"cookie":L=N.toUTCString();break;default:L=this.expireToStr(this.simpleDateStr(N));}return L;},simpleDateStr:function(L){var N=(L.getUTCMonth()+1)+"/"+L.getUTCDate()+"/"+L.getUTCFullYear(),M=L.getHours()+":"+L.getMinutes();return N+" "+M;},setToExpire:function(L){L=L||0;if(typeof L==="number"&&L>0){return true;}return false;},getExpire:function(N,M){var L=N.match(this.expireRegex);if(L){return(M)?L[0]:L[1];}return false;},isStale:function(M){var L=this.getExpire(M);if(L){return(this.hasExpired(L))?true:false;}return false;},hasExpired:function(M){var L=this.convert(M);return(this.now()>L)?true:false;},convert:function(M){var L=new Date(M);if(typeof M==="string"&&L.toString()==="Invalid Date"){L=new Date(parseInt(M,10));}return(L);},expireToStr:function(L){return this.expireStr.replace("${value}",L);},removeExpireStr:function(L){return L.replace(this.expireRegex,"");}};return(new E());}(window));(function(B){window.FoxISATracker=function(){this.dataObj={trigger:{pageLoad:false}};this.initialized=false;};FoxISATracker.prototype={init:function(C){if(!C){return false;}if(this.initialized){A("[ISA Tracker] Already Initialized");return false;}this.initialized=true;this.control.root=this;this.set(C);},set:function(E){if(!E){return false;}if(!this.initialized){this.init(E);}var D;for(D in E){var F,C=E[D];for(F in C){if(!this.dataObj.trigger[F]){this.dataObj.trigger[F]={};}this.dataObj.trigger[F][D]=C[F];}}},track:function(F,G){this.control.count(F);var C=this.dataObj.trigger;if(!C[F]){A("[ISA Tracker] No event specified for: "+F);return false;}var D,E=C[F];for(D in E){this.control.execTrigger({event:F,trigger:E[D],data:G,count:E._count});}}};FoxISATracker.prototype.control={count:function(F){F=F||false;if(!F){return false;}var C=this.root,D=C.dataObj.trigger;if(!D[F]){return false;}var E=((!isNaN(D[F]._count))?D[F]._count:0)+1;C.dataObj.trigger[F]._count=E;},execTrigger:function(F){if(typeof F!=="object"){return false;}if(!F.trigger){return false;}var C=F.event||false,D=F.trigger.frequency||false,J=F.trigger.callback||false,G=F.data||false,E=F.trigger||false,H=F.count||false;if(!C||isNaN(D)||!E){return false;}var K=this,I=this.root;if(typeof J==="function"){if(C==="pageLoad"&&H===1){J(G);}else{if(C.indexOf("click")===0){J(G);}else{if(H>1&&H%D===0){J(G);}}}}}};function A(D){try{FOX.utils.debug(D);}catch(C){if(typeof window.console==="object"&&window.location.search.indexOf("stc=y")){console.log(D);}}}}(jQuery));window.LocationLookup=(function(){var A={map:[{z:99500,s:"AK"},{z:98000,s:"WA"},{z:97000,s:"OR"},{z:96900,s:"XX"},{z:96700,s:"HI"},{z:96200,s:"AP"},{z:90000,s:"CA"},{z:89000,s:"NV"},{z:88500,s:"TX"},{z:87000,s:"NM"},{z:85000,s:"AZ"},{z:84000,s:"UT"},{z:83200,s:"ID"},{z:82000,s:"WY"},{z:80000,s:"CO"},{z:75000,s:"TX"},{z:73000,s:"OK"},{z:71600,s:"AR"},{z:70000,s:"LA"},{z:68000,s:"NE"},{z:66000,s:"KS"},{z:63000,s:"MO"},{z:60000,s:"IL"},{z:59000,s:"MT"},{z:58000,s:"ND"},{z:57000,s:"SD"},{z:56900,s:"DC"},{z:55000,s:"MN"},{z:53000,s:"WI"},{z:50000,s:"IA"},{z:48000,s:"MI"},{z:46000,s:"IN"},{z:43000,s:"OH"},{z:40000,s:"KY"},{z:38600,s:"MS"},{z:37000,s:"TN"},{z:35000,s:"AL"},{z:34000,s:"AA"},{z:32000,s:"FL"},{z:30000,s:"GA"},{z:29000,s:"SC"},{z:27000,s:"NC"},{z:24700,s:"WV"},{z:22000,s:"VA"},{z:20600,s:"MD"},{z:20000,s:"DC"},{z:19700,s:"DE"},{z:15000,s:"PA"},{z:10000,s:"NY"},{z:7000,s:"NJ"},{z:6000,s:"CT"},{z:5000,s:"VT"},{z:3900,s:"ME"},{z:3000,s:"NH"},{z:2800,s:"RI"},{z:1000,s:"MA"},{z:600,s:"PR"},{z:500,s:"NY"}],mapOneOff:{AK:98791,NY:6390,TN:42223,AM:96799},region:{Mountain:"AZ,CO,ID,MT,NM,NV,UT,WY",Northeast:"CT,DE,DC,MA,ME,MD,NJ,NH,NY,VT,PA,RI",West:"CA,AK,HI,OR,WA",Midwest:"IA,IL,IN,KS,MI,MN,ND,NE,OH,WI,SD,KY",South:"MO,AL,AR,LA,KT,MS,TN,TX,OK",Southeast:"VA,NC,SC,GA,FL,WV"},dma:{feed:"/feeds/json/zip-dma/Get_AFFDMA/${zip}/all",cb:"Get_AFFDMA"}};var C=function(F){if(typeof F==="object"&&F.region){A.region=F.region;}};C.prototype={getByZip:function(G){var F=G;G=(/(^\d{5}$)/.test(G))?parseInt(G,10):false;if(!G){return false;}var H=B(G),I=E(H);return({zip:F,state:H,region:I});},getByState:function(G){if(typeof G!=="string"){return false;}G=G.toUpperCase();var F,H=false;for(F in A.region){if(A.region[F].indexOf(G)>-1){H=E(G);break;}}return(H)?({state:G,region:H}):false;},getByDMA:function(H,G){if(typeof G!=="function"){return false;}var F=H;H=(/(^\d{5}$)/.test(H))?H:false;if(!H){return false;}D(H,function(I){if(!I){G(false);}G((I.dma&&I.region&&I.city)?({zip:F,state:I.region,region:I.city,dma:I.dma}):false);});}};var B=function(H){var G,J=A.map,F=A.mapOneOff;for(G in F){if(H===F[G]){return G;}}for(G=0;G<J.length;G++){var I=J[G];if(H>=I.z){return I.s;}}return false;};var E=function(G){var F,H=A.region;for(F in H){if(H[F].indexOf(G)>-1){return F;}}return false;};var D=function(H,G){window[A.dma.cb]=G;var F=A.dma.feed;F=F.replace("${zip}",H);$.ajax({url:F,dataType:"script",async:true,cache:true});};return C;}());window.FOX_DependencyManager=(function(G){var B={prefix:"___"};var E=function(){this._TYPES=[];};E.prototype.addInstance=function(I,J){if(typeof I!=="string"&&I.length<1){return false;}var H=this;if(!H[A(I)]){H._TYPES.push(I);H[A(I)]=new C(I,this);if(G.isArray(J)){H.setDependency(I,J);}}else{D("[DependencyManager.addDependency] '"+I+"' already exists.");}};E.prototype.onReady=function(I,J){if(typeof I!=="string"||typeof J!=="function"){return false;}var H=this;G.loadAttempt(60,500,function(){return(H[A(I)])?true:false;},function(){H[A(I)].onReady(function(K){J(K);});},function(){D("[DependencyManager.onReady] Max attempts to check for the instance of '"+I+"' reached.");});};E.prototype.setDependency=function(I,J){if(typeof I!=="string"||!G.isArray(J)){return false;}var H=this,I=A(I);if(!H[I]){return false;}H[I].setDependency(J);};E.prototype.fireReady=function(I,J){if(typeof I!=="string"){return false;}var H=this,I=A(I);if(H[I]){H[I].EVENT.fireReady(J);}};var C=(function(){var H=function(K,J){this.root=J;this._TYPE=K;this._DEPENDENCY=false;this._IS_READY=false;this._pooler={};this.EVENT=new F(this);};H.prototype.setDependency=function(K){var J=this;if(J._DEPENDENCY){return false;}if(G.isArray(K)&&I(K)){J._DEPENDENCY=K;J.isReady();D("[DependencyManager."+J._TYPE+".setDependency] Dependency set.");}else{D("[DependencyManager."+J._TYPE+".setDependency] Invalid setting.");}};H.prototype.isReady=function(){var M=this,L=this.root;if(!M._DEPENDENCY){return false;}if(M._IS_READY&&!M._pooler.isReady){return M._IS_READY;}M._pooler.isReady=true;var K=function(){var Q,R=M._DEPENDENCY,T=true;for(Q=0;Q<R.length;Q++){var S=A(R[Q]);if(L[S]&&!L[S].EVENT.inquire()){T=false;break;}}return T;};var O=false,N=0,J=360;var P=function(){N++;if(!O){O=K();}if(!O){if(N>J){D("[DependencyManager."+M._TYPE+".isReady] Max attempts reached to check ready state.");}else{setTimeout(function(){P();},500);}}else{M._IS_READY=true;M._pooler.isReady=false;}};P();};H.prototype.onReady=function(K){if(typeof K!=="function"){return false;}var J=this;G.loadAttempt(360,500,function(){return(J._IS_READY)?true:false;},function(){K(J._READY_DATA);});};var I=function(J){return true;};return H;}());var F=(function(){var H=function(I){this.root=I.root;this.main=I;this._IS_READY=false;this._READY_DATA=null;};H.prototype.fireReady=function(J){var I=this;if(!I._IS_READY){I._IS_READY=true;if(J){I._READY_DATA=J;}}};H.prototype.inquire=function(){var I=this;return I._IS_READY;};return H;}());var D=function(H){if(window.console&&window.console.log){console.log(H);}};var A=function(H){return(B.prefix+H);};return E;}(jQuery));
/*Wed Oct 10 11:27:44 EDT 2012*/
