(function(f){var a=function(){this.site=new g(this);this.utils=new j(this);this.widgets=new i(this);};var l={reserved:"Add|OnPageReady|OnDocReady",pageReadyFunction:"bottomInit"};a.prototype={Add:function(n,m){return d(this,n,m);}};function d(s,o,n){o=b(o);var t=function(y){var w=(l.reserved.indexOf(y)>-1)?true:false;if(w){e("[AddConstructor] Error: Reserved word '"+y+"'");}return w;};if(o.indexOf(".")>-1){o=(o.charAt(0)===".")?o.slice(1,o.length):o;var r,u=o.split("."),q=u.length,m=true;for(r=0;r<q;r++){var v=u[r];if(p===0&&t(v)){return false;}if(!s[v]){if(r!==q-1){s[v]={};}else{if(typeof n!=="function"){s[v]={};}else{s[v]=n;}}}s=s[v];}}else{if(o.length>0&&!s[o]){if(t(o)){return false;}if(typeof n!=="function"){s[o]={};s=s[o];}else{s[o]=n;s=s[o];}}else{if(t(o)){return false;}s=s[o];}}if(typeof n==="object"&&!h(n)){var p;for(p in n){if(s[p]){e("[AddConstructor] Warning: Overwriting '"+p+"' "+typeof s[p]+". (constructor:"+o+" )");}s[p]=n[p];}}return s;}function g(m){var n=this;this.Add=function(p,o){return d(n,p,o);};this.OnPageReady=(function(){var o=new c(n,m);return o.callback;}());this.OnDocReady=(function(){var o=new k(n,m);return o.callback;}());}function i(){var m=this;this.Add=function(o,n){return d(m,o,n);};}function j(){var m=this;this.Add=function(o,n){return d(m,o,n);};}j.prototype={queryStr:{get:function(s){var n,r=false,o=window.location.search.substr(1),q=o.split("&"),m=q.length;for(n=0;n<m;n++){var p=q[n].split("=");if(p[0]===s){r=""+decodeURIComponent(p[1]);break;}}return r;}},debug:function(n){if(FOX.utils.queryStr.get("stc")==="y"){try{FOX.utils.console(n);}catch(m){FOX.utils.console("[DEBUG] "+m);}}},console:function(m){if(typeof window.console==="object"&&m){console.log(m);}},resizeIFrame:function(n){if(!n){return false;}var m=f(n.target),o=n.src;f("iframe").each(function(){var p=f(this);if(typeof p.attr("src")!=="undefined"){if(p.attr("src").indexOf(o)>-1&&!p.data("resized")){p.css({height:m.outerHeight(true),width:p.parent().innerWidth()});p.data("resized",true);}}});}};j.prototype.pageRefresh={enable:function(){if(typeof ew_enableRefresh==="function"){ew_enableRefresh();}},disable:function(){if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}};j.prototype.environment={get:function(){return(this.isProd(document.location.hostname))?"prod":"dev";},getHostByDesc:function(n){if(typeof window.FOX_pagedescriptor==="undefined"){return false;}var m=window.FOX_pagedescriptor;switch(m){case"fn2":m="foxnews.com";break;case"fb":m="smallbusiness.foxbusiness.com";break;case"fb2":m="foxbusiness.com";break;case"fn-latino":m="latino.foxnews.com";break;default:return false;}if(loc.hostname.indexOf(m)===-1){return false;}if(n){return m;}return loc.protocol+"//"+(loc.hostname.substr(0,m.indexOf))+m;},getDomainHost:function(p,n){var s=window.location,o=s.hostname,r=s.protocol,m=o.split("."),q=[];if(p){q.push(r+"//");if(!n){return r+"//"+o;}}if(o.indexOf("latino")>-1){q.push("latino.");}else{if(o.indexOf("smallbusiness.")>-1){q.push("smallbusiness.");}else{if(n){q.push("www.");}}}return q.join("")+m[(m.length-2)]+"."+m[(m.length-1)];},check:function(s,r){s=s.toLowerCase();var n,p=false,o=false,q=["smallbusiness.","latino.foxnews.","origin-latino.foxnews.","v8-pvw.","v8-staging.","v8-origin.","v8-origin-www.","www.","origin.","origin-prod.","origin-drupal.","origin-www.","origin-www2.","origin-vignette.","preprod.","preprod2.","pvw.","pvw2.","staging.","staging2."],m=q.length;for(n=0;n<m;n++){if(s.indexOf(q[n])===0){o=true;break;}}if(r==="prod"){p=o;}else{if(!o){p=true;}}return p;},isProd:function(m){m=m||document.location.hostname;return this.check(m,"prod");},isDev:function(m){m=m||document.location.hostname;return this.check(m,"dev");}};j.prototype.datetime={format:function(o,n){n=n||null;var t={month:o.getUTCMonth(),day:o.getDay(),year:o.getFullYear(),date:o.getDate(),hour:o.getHours(),minutes:o.getMinutes(),seconds:o.getSeconds(),ampm:((o.getHours()<12)?"am":"pm"),fullStr:o.toString()};var q={"${mm}":(t.month+1),"${month}":this.getUTCMonthString(t.month),"${month:short}":this.getUTCMonthString(t.month,"short"),"${day}":this.getDayString(t.day),"${day:short}":this.getDayString(t.day,"short"),"${yr}":t.year,"${dd}":((t.date<10)?"0"+t.date:t.date),"${ddTH}":this.oldEnglish(t.date),"${hr}":((t.hour>12)?t.hour-12:t.hour),"${hr:mil}":t.hour,"${min}":((t.minutes<10)?"0"+t.minutes:t.minutes),"${sec}":((t.seconds<10)?"0"+t.seconds:t.seconds),"${ampm}":t.ampm,"${AMPM}":(t.ampm).toUpperCase(),"${AmPm}":((t.ampm).charAt(0)).toUpperCase()+(t.ampm).charAt(1)};if(n===null){var s=this.getUTCMonthString(t.month),r=o.toDateString();return s+" "+r.substr(8).replace(" ",", ");}else{var p;for(p in q){var m=n.indexOf(p);while(m!==-1){n=n.replace(p,q[p]);m=n.indexOf(p);}}return n;}},oldEnglish:function(m){m+="";var n=parseInt(m.charAt(m.length-1),10);switch(n){case 1:m+="st";break;case 2:m+="nd";break;case 3:m+="rd";break;default:m+="th";break;}return m;},formatUTCDate:function(n,m){return FOX.utils.datetime.format(n,m);},getUTCMonthString:function(o,m){m=m||"full";var n;switch(m){case"short":n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];break;default:n=["January","February","March","April","May","June","July","August","September","October","November","December"];break;}return n[o];},getDayString:function(o,n){n=n||"full";var m;switch(n){case"short":m=["Sun","Mon","Tue","Wed","Thur","Fri","Sat"];break;default:m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];break;}return m[o];}};j.prototype.extLink={set:function(r,p,o,n){r=r||f("a[rel*='external']");var m=this,q="ext-linked";r.each(function(){var t=f(this),s=f.trim(t.attr("rel")||""),u=(p&&typeof p==="string")?p:(f.trim(t.attr("href")||"")),w=(o)?(!m.confirmLink(u)):true;if((s.toLowerCase()).indexOf(q)<0&&u.length>0&&u!=="#"&&w){s=(s.indexOf("external")>-1)?s:[s,"external"].join(" ");s=f.trim([s,q].join(" "));t.attr("rel",s);t.click(function(){window.open(u,"_blank");return false;});if(!t.attr("target")){t.attr("target","_blank");}if(n){var v=(window.FOX_DomainPath||"")+"/static/v/all/img/external-link.png";t.after('<img src="'+v+'" />');}}});},confirmLink:function(p){var m,n=false,o=[".foxnews.com",".foxbusiness.com"];for(m=0;m<o.length;m+=1){if(p.indexOf(o[m])>-1){n=true;break;}}return n;}};function c(m){this.callback=function(){var p=arguments,r=(p.length===1)?"":p[0],q=(p.length===1)?p[0]:p[1];var o=(r.length>0)?m.Add(r,q):q,n=m[l.pageReadyFunction]||function(){};if(typeof o==="function"){m[l.pageReadyFunction]=function(){n();o();};}else{if(typeof o==="object"&&o.init){m[l.pageReadyFunction]=function(){n();o.init();};}}};}function k(m){this.callback=function(){var o=arguments,q=(o.length===1)?"":o[0],p=(o.length===1)?o[0]:o[1];var n=(q.length>0)?m.Add(q,p):p;if(typeof n==="function"){f(document).ready(function(){n();});}else{if(typeof n==="object"&&n.init){f(document).ready(function(){n.init();});}}};}function h(m){m=m||false;return Object.prototype.toString.call(m)==="[object Array]";}function b(m){return(!m)?"":m.toString().replace(/^\s+/,"").replace(/\s+$/,"");}function e(m){if(typeof window.console==="object"&&m){console.log(m);}}window.FOX=window.fox=new a();}(jQuery));(function($){window.FOX_DomainPath=(function(){var ret="",loc=window.location,host=loc.hostname,domainHost=FOX.utils.environment.getDomainHost();var idx=function(val){return(host.indexOf(val)>-1)?true:false;};if(FOX.utils.environment.isProd()){var sub=(idx("staging."))?"staging":"www";if(sub==="staging"){ret="http://staging.fbnstatic.com";}else{ret="http://global.fncstatic.com";}}else{if(idx("-qa.")){ret="http://qa.global.fncstatic.com";}}return ret;}());FOX.Add("site",{topInit:function(){FOX.site.ads.init();FOX.site.metaDescriptor.init();FOX.site.linkDescriptor.init();FOX.Add("site.mediaIconOverlay",FOX_MediaIconOverlay);},bottomInit:function(){FOX.site.tracking.init();FOX.utils.extLink.set($("a[rel*='external']",null,true));FOX.site.pageRefresh();}});FOX.Add("site.tracking",{init:function(){}});FOX.Add("site.pageRefresh",function(){if(window.FOX_metadescriptor&&window.FOX_metadescriptor.name&&window.FOX_metadescriptor.name["prism.genre"]==="homePage"){FOX.utils.pageRefresh.enable();}else{FOX.utils.pageRefresh.disable();}});FOX.Add("site.ads",{init:function(){$(document).ready(function(){$.ad.init();});},writeInline:function(id,type){if("dc"===type){$.ad.dc.inline(id);}else{fox.utils.debug("[global.js] inline ads are not enabled");}}});FOX.Add("site.metaDescriptor",{init:function(){var obj={};$("meta").each(function(){var item=$(this),nameAttr=item.attr("name"),propAttr=item.attr("property"),val=item.attr("content");if(nameAttr){if(!obj.name){obj.name={};}obj.name[nameAttr]=(val)?val:false;}else{if(propAttr){if(!obj.property){obj.property={};}obj.property[propAttr]=(val)?val:false;}}});window.FOX_metadescriptor=obj;}});FOX.Add("site.linkDescriptor",{init:function(){var obj={};$("link").each(function(){var item=$(this),relAttr=item.attr("rel"),val=item.attr("href");if(relAttr){if(!obj.rel){obj.rel={};}obj.rel[relAttr]=(val)?val:false;}});window.FOX_linkdescriptor=obj;}});FOX.Add("site.mediaOverlay",{set:function(elm){var MO=this;function set(type){elm.find(".m > a").each(function(){MO.render.common(elm,$(this),type);});}if(elm.hasClass("slideshow-ct")){set("slideshow");}else{if(elm.hasClass("interactive-ct")||elm.hasClass("freeform-ct")){set("interactive");}}},render:{common:function(parent,elm,type){var MO=this,imgElm=elm.find("img");function trigger(img){var dim=[img.width,img.height],overlay=MO.useOverlay(dim[0],type);if(!overlay){return false;}if(dim[0]<156){return false;}parent.find("h3 span.type-"+type).hide();elm.css({position:"relative",display:"block"});var html=$('<span class="m-img-overlay"><img src="'+overlay+'" /></span>');html.css({position:"absolute",top:"0px",left:"0px",width:dim[0],height:dim[1]});html.find("img").css({width:dim[0],height:dim[1]});elm.append(html);parent.find(".m > .credit").hide();var openWin=function(){window.open(elm.attr("href"),"_self");};parent.children(":not(.related):not(.m)").find("a").click(function(){openWin();return false;});parent.find("> .m").click(function(){openWin();return false;});}var img=new Image();var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var setUp=function(){img.onload=function(){trigger(img);};img.src=imgElm.attr("src");};if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){setUp();clearInterval(interval);}},650);}else{setUp();}},useOverlay:function(width,type){var src=(window.FOX_DomainPath||"")+"/static/v/all/img/"+type+"_${width}x${height}.png";var types={slideshow:[132,156,190,228,259,267,328,397,604],interactive:[132,156,190,228,259,267,328,397,604],video:[132,156,190,228,259,267,328],_hVar:[74,88,107,128,146,151,185,224,341]};if(!types[type]){return false;}var X,arr=types[type],idx=0,sel=arr[0];for(x=0;x<arr.length;x++){if(width<=arr[x]){idx=x;sel=arr[x];break;}}var srcW=sel,srcH=types._hVar[idx];switch(type){case"slideshow":if(width===180){srcW=180;srcH=101;}break;}return src.replace("${width}",srcW).replace("${height}",srcH);}}});FOX.Add("site.videoIconOverlay",{set:function(){var x,i,FS=this,args=arguments,obj={elm:false,ratio:false,dim:false,position:false,size:false,hover:true};if(args.length===1&&typeof args[0]==="object"){for(i in args[0]){obj[i]=args[0][i];}}else{for(x=0;x<args.length;x++){switch(x){case 0:obj.elm=args[0];break;case 1:obj.ratio=args[1];break;case 2:obj.dim=args[2];break;case 3:obj.position=args[3];break;case 4:obj.size=args[4];break;case 5:obj.useAltImg=args[5];break;case 6:obj.altHover=args[6];break;case 7:obj.noClick=args[7];break;}}}var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var isVideoAlt=function(elm){return(elm.hasClass("m-controller"))?true:false;};obj.elm.each(function(){var item=$(this),imgElm=item.find("img"),pObj=obj,img=new Image();pObj.elm=item;if(!isVideoAlt(item)){var trigger=function(){img.onload=function(){pObj.dim=[img.width,img.height];FS.setOverlay(pObj);};img.src=imgElm.attr("src");};if(pObj.dim){FS.setOverlay(pObj);}else{if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){trigger();clearInterval(interval);}},650);}else{trigger();}}}});},useAbsImg:function(dim,check){var x,map=["118","96","64","48","32","24","16"],ret=false;if(!isNaN(dim)){if(dim>=map[0]){ret=map[0];}if(dim<=20){ret=map[map.length-1];}else{for(x=0;x<map.length;x++){var val=map[x],nVal=(map[x+1])?map[x+1]:0,diffH=Math.abs(val-dim),diffL=Math.abs(val-nVal);if(dim<=val&&dim>nVal){ret=(diffH>diffL)?nVal:val;break;}}}}return(ret)?ret:false;},setOverlay:function(obj){var FS=this,elm=obj.elm,ratio=obj.ratio||0.35,dim=obj.dim,position=obj.position||"center",size=obj.size||118,useAltImg=obj.useAltImg,altHover=obj.altHover||false,noClick=obj.noClick||false,useAbsImg=true,absDim=false;var overlaySrc=(window.FOX_DomainPath||"")+"/static/v/all/img/vp-overlay${dim}${hover}.png";function mFloor(val){return Math.floor(val);}function px(val){return val+"px";}function hover(over){over=(altHover)?((over)?false:true):over;var dim;if(useAbsImg&&absDim){dim=absDim;}dim=(dim)?("-"+dim):"";return overlaySrc.replace("${dim}",dim).replace("${hover}",(over)?"-hover":"");}function set(){var resizeVal=(dim[1]<dim[0])?dim[1]:dim[0],resize=resizeVal*ratio;resize=(resize>size)?size:resize;var imgW=resize,imgH=imgW,ovrL=false,ovrR=false,ovrT=false,ovrB=false,edgeW=0.03,edgeH=0.05;edgeW=mFloor(dim[0]*edgeW);edgeH=mFloor(dim[1]*edgeH);switch(position){case"top right":ovrR=edgeW;ovrT=edgeH;break;case"bottom right":ovrR=edgeW;ovrB=edgeH;break;case"top left":ovrL=edgeW;ovrT=edgeH;break;case"bottom left":ovrL=edgeW;ovrB=edgeH;break;default:ovrL=Math.floor((dim[0]*0.5)-(imgW*0.5));ovrT=Math.floor((dim[1]*0.5)-(imgH*0.5));}var css={};if(ovrR){css.right=px(ovrR);}if(ovrL){css.left=px(ovrL);}if(ovrT){css.top=px(ovrT);}if(ovrB){css.bottom=px(ovrB);}if(useAbsImg&&FS.useAbsImg(imgW)){imgW=FS.useAbsImg(imgW);imgH=imgW;absDim=imgW;}css.width=px(imgW);css.minHeight=px(imgH);var overlay=$('<span class="vid-overlay"><img style="position:absolute; display:inline;" src="'+hover()+'"/></span>'),titleLink=elm.parent().find("> h3:first");overlay.find("img").css(css);elm.find("a").css({position:"relative"});elm.find("img").each(function(){var item=$(this),parent=item.parent(),isHover=false,prevOverlay=parent.find("> .vid-overlay:visible");if(prevOverlay.size()>0){prevOverlay.css("display","none");}parent.css({display:"block",padding:"0"}).prepend(overlay);if(!noClick){parent.click(function(){var el=$(this),onclick=el.attr("onclick"),href=el.attr("href");useEvent=(onclick)?onclick:href;if(onclick){eval(onclick);}else{window.location.href=href;}return false;});}var overlayElm=parent.find(".vid-overlay"),overlayImg=overlayElm.find("img");function hoverOver(over){if(over&&!isHover){isHover=true;overlayImg.attr("src",hover(true));}else{if(isHover){isHover=false;overlayImg.attr("src",hover());}}}titleLink.hover(function(){hoverOver(true);},function(){hoverOver();});parent.hover(function(){hoverOver(true);},function(){hoverOver();});});}var hoverImg=new Image();hoverImg.src=hover(true);set();}});var formatNumber=window.formatNumber=function(num,dec,thou,pnt,curr1,curr2,n1,n2){var i,x=Math.round(num*Math.pow(10,dec));if(x>=0){n1=n2="";}var y=(""+Math.abs(x)).split(""),z=y.length-dec;if(z<0){z--;}for(i=z;i<0;i++){y.unshift("0");}if(z<0){z=1;}y.splice(z,0,pnt);if(y[0]==pnt){y.unshift("0");}while(z>3){z-=3;y.splice(z,0,thou);}var r=curr1+n1+y.join("")+n2+curr2;return r;};window.AjaxGetEvent=function(event_data,callback){var GE=this;GE.mydata=event_data;GE.mycallback=callback;GE.get=function(url,params,type){$.get(url,params,$.context(this).callback("eventcallback"),type);};GE.eventcallback=function(ajaxdata){GE.mycallback(ajaxdata,GE.mydata);};};}(jQuery));function ew_enableRefresh(){var a=600;try{ew_disableRefresh();}catch(b){}window.refreshInterval=setInterval(function(){location.reload(false);},a*1000);}function ew_disableRefresh(){clearInterval(window.refreshInterval);}(function($){var CONST={US_States:{AK:"Alaska",AL:"Alabama",AR:"Arkansas",AS:"American Samoa",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",FM:"Federated States of Micronesia",GA:"Georgia",GU:"Guam",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MH:"Marshall Islands",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MP:"Northern Mariana Islands",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",PW:"Palau",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VI:"Virgin Islands",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"}};function WeatherService(namespace){this.namespace=namespace;var initVars={weatherCityData:[],ACListener:{},currentLocId:"",currentCityString:"",serviceTriggered:false,UPDATE_HEADER_ACTION:"UPDATE_HEADER",SERVICE_HEALTH_CHECK:"http://www.foxnews.com/feeds/web/status/wsi/json/",SERVICE_URL_WEATHER_JSONP:"/weather/feed/getWeatherJsonP",SERVICE_URL_LOCATION_JSONP:"/weather/feed/getLocationIdJsonP",SERVICE_URL_WEATHER_HTML:"/weather/feed/getWeatherHtml",SERVICE_URL_LOCATION_REGION_JSON:"/weather/feed/getLocationRegionCodeJson",SERVICE_URL_CITY_DATA:"/weather/feed/getWeatherCityData",SERVICE_URL_MARINE_JSON:"/weather/feed/getMarineLocationsJson",SERVICE_URL_SKI_RESORTS_JSON:"/weather/feed/getSkiResortsJson",SERVICE_URL_SKI_COND_JSON:"/weather/feed/getSkiConditionJson",SERVICE_URL_AIRPORT_LOCATION_JSON:"/weather/feed/getAirportLocationIdJson",SERVICE_URL_AIRPORT_DELAY_JSON:"/weather/feed/getAirportDelayJson",PAGE_URL_YOUR_WEATHER:"/weather/your-weather/index.html",PAGE_URL_SEARCH_RESULTS:"/weather/search-results/index.html",PATH_WEATHER_ICON_IMAGE:(window.FOX_DomainPath||"")+"/static/v/all/img/weather/icons_60x60/",PATH_WEATHER_ICON_IMAGE_LARGE:(window.FOX_DomainPath||"")+"/static/v/all/img/weather/icons_96x96/",WEATHER_ICON_IMAGE_EXT:".png",WEATHER_DEFAULT_LOCATION:"USNY0996",WEATHER_COOKIE_DOMAIN:"foxnews.com",MSG_DEFAULT_ERROR:"Data unavailable. Please check back again soon.",MSG_AIRPORT_CODE_ERROR:"Please enter a valid 3- or 4-digit airport code.",MSG_AIRPORT_NOT_FOUND_ERROR:"No airport results found.  Please try again.",TXT_DEFAULT_SEARCH_FIELD:"Enter city or zip code",TXT_HEADER_SEARCH_FIELD:"Enter city or zip",TXT_AIRPORT_SEARCH_FIELD:"Enter airport code (IATA or ICAO)",LIST_SKI_CONDITIONS_ENABLED:"AK|AL|AZ|CA|CO|CT|IA|ID|IL|IN|MA|MD|ME|MI|MN|MO|MT|NC|ND|NH|NJ|NM|NV|NY|OH|OR|PA|RI|SD|TN|UT|VA|VT|WA|WI|WV|WY",LIST_MARINE_FORECAST_ENABLED:"AK|AL|AS|AZ|CA|CT|DC|DE|FL|FM|GA|GU|HI|LA|MA|MD|ME|MH|MS|NC|NJ|NY|OR|PA|PR|PW|RI|SC|TX|VA|VI|VT|WA"};var i;for(i in initVars){this[i]=initVars[i];}this.extService=new ExternalServices(this);}WeatherService.prototype={init:function(fn){var ws=this;ws.getCurrentLocation(function(data){ws.createWeatherLocationCookie(data);ws.renderWidget();if(typeof fn==="function"){fn();}});},getCurrentLocation:function(){var args=arguments,fn=false,compiled=false;if(args.length===0){return false;}else{if(args.length===1){fn=args[0];}else{compiled=(typeof args[0]==="boolean")?args[0]:false;fn=args[1];}}if(typeof fn!=="function"){return false;}var ws=this,initData='{"location":[{"loc_id":"USNY0996","zip":"10108","city":"New York","state":"NY"}]}';var trigger=function(val){val=(compiled)?ws.createObjFromJSON(val):val;fn(val);};if(ws.weatherCookie("weatherloc")){var cookie=ws.weatherCookie("weatherloc"),weatherlocObj=this.createObjFromJSON(cookie);if(!weatherlocObj||!weatherlocObj.location||!weatherlocObj.location[0].loc_id){trigger(initData);}else{trigger(cookie);}}else{if(window.CONST_Akamai_GEO&&CONST_Akamai_GEO.countryCode==="US"){ws.getGeoLocation(function(data){trigger(data||initData);});}else{trigger(initData);}}},getGeoLocation:function(fn){var ws=this,callbackFn="location_searchresults_callback_geo";var ret=function(info){if(typeof fn==="function"){fn(info);}};var zip=(function(){var obj=window.CONST_Akamai_GEO,range=obj.zipRange,zip=range.substring(0,5);return(!isNaN(zip))?zip:false;}());if(zip){ws.location_searchresults_callback_geo=function(data){ret(data);};$.ajax({url:weather_service.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:zip,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:true,cache:true});}else{ret(false);}},setExtData:function(location,info){this.extService._DataObj={location:location,info:this.createObjFromJSON(info)};this.extService.reloadWidgets();},weatherCookie:function(name,value,options){if(typeof value!=="undefined"){options=options||{};if(value===null){value="";options.expires=-1;}var expires="";if(options.expires&&(typeof options.expires==="number"||options.expires.toUTCString)){var date;if(typeof options.expires==="number"){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}expires="; expires="+date.toUTCString();}var path=options.path?"; path="+(options.path):"",domain=options.domain?"; domain="+(options.domain):"",secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("");}else{var cookieValue=null;if(document.cookie&&document.cookie!==""){var i,cookies=document.cookie.split(";");for(i=0;i<cookies.length;i++){var cookie=$.trim(cookies[i]);if(cookie.substring(0,name.length+1)===(name+"=")){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}},createWeatherDataCookie:function(locId,jsonString){var validateWeatherObj=this.createObjFromJSON(jsonString),weatherJSObj=validateWeatherObj.weatherData,city=weatherJSObj.cityName,country=weatherJSObj.country,tempHi=weatherJSObj.days[0].hi,tempLo=weatherJSObj.days[0].lo;if(validateWeatherObj&&city!==""&&country!==""){var expDate=new Date();if(tempHi===""||tempLo===""){expDate.setTime(expDate.getTime()+(60*1000));}else{expDate.setTime(expDate.getTime()+(3*60*60*1000));}this.weatherCookie("weatherdata__"+locId,jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});this.renderFavorites();}},createWeatherLocationCookie:function(jsonString){var expDate=new Date();expDate.setTime(expDate.getTime()+(1000*24*60*60*1000));this.weatherCookie("weatherloc",jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});},createWeatherFavoritesCookie:function(favArray){var favLocCookieString=favArray.join("|");if(favLocCookieString!==""){var expDate=new Date();expDate.setTime(expDate.getTime()+(1000*24*60*60*1000));this.weatherCookie("weatherfavlocs",favLocCookieString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});}else{this.weatherCookie("weatherfavlocs","",{expires:-1,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});}},getWeatherDataCookie:function(locId){return this.weatherCookie("weatherdata__"+locId);},createObjFromJSON:function(jsonString){if(jsonString!==""){return eval("("+unescape(jsonString).replace(/\s+/g," ")+")");}else{return null;}},createLocJSObj:function(data){if(!data.loc_id){return null;}var i,obj={loc_id:"",city:"",zip:"",state:"",country:""};for(i in data){var val=data[i];if(i==="city"){val=val.replace("`","'");}obj[i]=val;}var fullArr=[];fullArr.push(obj.city||"");fullArr.push((obj.loc_id.substr(0,2).toUpperCase()!=="US"&&(obj.country||obj.state))?obj.country:obj.state);obj.fullCityString=fullArr.join(", ");return obj;},displayHeader:function(serviceDomain,config){var i,self=this;if(this.serviceTriggered){return false;}else{this.serviceTriggered=true;}config=(typeof config==="object")?config:{};if(typeof serviceDomain!=="undefined"){this.PAGE_URL_SEARCH_RESULTS=serviceDomain+this.PAGE_URL_SEARCH_RESULTS;this.PAGE_URL_YOUR_WEATHER=serviceDomain+this.PAGE_URL_YOUR_WEATHER;this.SERVICE_URL_LOCATION_JSONP=serviceDomain+this.SERVICE_URL_LOCATION_JSONP;this.SERVICE_URL_WEATHER_JSONP=serviceDomain+this.SERVICE_URL_WEATHER_JSONP;if(document.location.hostname.lastIndexOf(this.WEATHER_COOKIE_DOMAIN)==-1){this.WEATHER_COOKIE_DOMAIN=document.location.hostname;}}if(config){for(i in config){var val=config[i];switch(i){case"icons":if(val===24){self.PATH_WEATHER_ICON_IMAGE=self.PATH_WEATHER_ICON_IMAGE.replace("icons_60x60","icons_24x24");}break;}}}this.init();},renderWidget:function(){$("body").data("weather-rendered",true);var ws=this;ws.serviceTriggered=true;setTimeout(function(){ws.renderHeaderWeather();ws.renderHeaderLocationChange();},500);},renderHeaderWeather:function(){var ws=this;var trigger=function(){var requestedLocationObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));$(".portlet .weather.current-conditions").each(function(){ws.renderYourWeather(this,requestedLocationObj.location[0].loc_id,"weather_current");});};if(this.weatherCookie("weatherloc")){var weatherlocObj=this.createObjFromJSON(this.weatherCookie("weatherloc"));var locObject=this.createLocJSObj(weatherlocObj.location[0]);if(this.getWeatherDataCookie(locObject.loc_id)){this.headerDisplayAction(locObject.loc_id);ws.setExtData(locObject,this.getWeatherDataCookie(locObject.loc_id));ws.renderWeatherWidget(locObject.loc_id);}else{this.fetchAndSaveWeatherJSONCookie(locObject.loc_id);}trigger();}else{this.init(function(){var weatherlocObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));ws.fetchAndSaveWeatherJSONCookie(weatherlocObj.location[0].loc_id);trigger();});}},renderRightRailSearch:function(){var topRightRailHtml="<ul>"+this.generateRightRailSearch("yourweather")+"</ul>";document.write(topRightRailHtml);},generateRightRailSearch:function(ac_results_css_appendix){var ws=this,searchField="weatherInput_"+ac_results_css_appendix,rightRailHTML='<li><form method="get" action="'+ws.PAGE_URL_SEARCH_RESULTS+'" id="weather_search_form" class="form_1" onsubmit="weather_service.locationSearchAction(this,\'#'+searchField+'\');"><fieldset class="text_box"><div class="search-input-holder"><div class="preloader-img"></div><input type="text" name="searchTerm" id="'+searchField+'" onfocus="weather_service.searchFieldOnFocus(this);" onblur="weather_service.searchFieldOnBlur(this, \''+ws.TXT_DEFAULT_SEARCH_FIELD+'\');" class="weather_city_autocomplete_'+ac_results_css_appendix+' search_input no_spon" size="50" value="'+ws.TXT_DEFAULT_SEARCH_FIELD+'" name="keys"/></div><input type="submit" class="go" value=""/></fieldset></form></li>';return rightRailHTML;},renderWeatherWidget:function(locationId){var widgetElm=$("#weather-widget");if(widgetElm.size()===0){return false;}var ws=this,headerDataCookie=this.getWeatherDataCookie(locationId),useLgIcons=(widgetElm.hasClass("use-lg-icons"))?true:false,useImgSrc=(useLgIcons)?ws.PATH_WEATHER_ICON_IMAGE_LARGE:ws.PATH_WEATHER_ICON_IMAGE;var imgDim=(function(){var sp=useImgSrc.split("/"),val=sp[sp.length-1];val=val.replace("icons_","").split("x");return val;}());if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie);var wdObj=headerDataObj.weatherData;var form=widgetElm.find("form:first");form.find("label, p.state").html(wdObj.cityName+((wdObj.stateShort.length>0)?", "+wdObj.stateShort:"")).unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);});var listElm=widgetElm.children("ul:first");listElm.children("li.section").each(function(i){var item=$(this);if(wdObj.days[i]){var dataSource=wdObj.days[i];var imgSrc=useImgSrc+dataSource.image+ws.WEATHER_ICON_IMAGE_EXT;var hiTemp=dataSource.hi;var lowTemp=dataSource.lo;if(i===0){item.find(".current").html(wdObj.currentTemp+"&#176;");}if(item.find(".media img").size()===0){item.find(".media").html("<img />");}item.find(".media img").css({width:imgDim[0]+"px",height:imgDim[1]+"px"}).each(function(){var elm=$(this);elm.css({opacity:"0",display:"inline"});if(!$.browser.opera){var img=new Image();img.onload=function(){elm.attr("src",imgSrc);animateFn.show(elm,{speed:300,type:"swing"});};img.src=imgSrc;}else{elm.css({backgroundImage:"none",display:"inline",opacity:"0"});elm.attr({src:imgSrc});animateFn.show(elm,{speed:300,type:"linear"});}});var hiLow="Hi "+((hiTemp.length>0)?hiTemp+"&#176;":"-")+" | Lo "+((lowTemp.length>0)?lowTemp+"&#176;":"-");item.children("div:first").children("span").html(hiLow);item.unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);});}});}widgetElm.addClass("active");if(widgetElm.data("setListeners")){return false;}widgetElm.data("setListeners",true);widgetElm.find("form:first").each(function(){var timeout,form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value"),overSearch=true;search.focus(function(){var elm=$(this),val=elm.val();elm.data("currVal",val);elm.val("");}).blur(function(){var elm=$(this),val=elm.attr("value");elm.val((val==="")?elm.data("currVal"):val);});form.hover(function(){overSearch=true;},function(){overSearch=false;});$(document).bind("click",function(){if(!overSearch){var val=search.attr("value"),curr=search.data("currVal");if(val!==curr&&val!==txt){form.submit();}}});form.submit(function(){ws.weathetStatusCheck(function(){search.data("currVal",search.val());ws.locationSearchAction(this,"#weather_widgetInput",ws.UPDATE_HEADER_ACTION);},function(){search.data("currVal",search.val());widgetElm.addClass("na");if(form.find("> fieldset > legend").size()>0){widgetElm.addClass("w-mod-1");}if(widgetElm.find("p.notice").size()===0){$('<p class="notice">Sorry, cannot update location at this time.</p>').insertBefore(form);}clearTimeout(timeout);timeout=setTimeout(function(){widgetElm.removeClass("na");widgetElm.removeClass("active");search.val(txt);ws.renderWidget();},10000);});return false;});});},weathetStatusCheck:function(successFN,failFN){var self=this,callbackFN="FOX_WeatherServ";if(!window[callbackFN]){window[callbackFN]=function(data){if(!data){failFN();}else{if(data.online&&data.online==="true"){successFN();}else{failFN();}}};}$.ajax({type:"GET",url:self.SERVICE_HEALTH_CHECK,data:{cb:cacheBuster(10)},dataType:"script",async:true,cache:true});},searchFieldOnFocus:function(inputField){if(inputField.value===this.TXT_DEFAULT_SEARCH_FIELD||inputField.value===this.TXT_HEADER_SEARCH_FIELD){inputField.value="";}},searchFieldOnBlur:function(inputField,message){if(inputField.value===""){inputField.value=message;}},airportSearchAction:function(airportForm,airportLocId){var ws=this,regexp=new RegExp("^[a-zA-Z]{3,4}$"),reqAC=$("#airportCode").val();if(!reqAC.match(regexp)){showToConsole(ws.MSG_AIRPORT_CODE_ERROR);return false;}$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_AIRPORT_LOCATION_JSON,data:{airportCode:reqAC,cb:cacheBuster()},success:function(data){var parsed=ws.createObjFromJSON(data);if(parsed){if(parsed.location.length>0){var airportLocObj=ws.createLocJSObj(parsed.location[0]);$(airportForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(airportLocId).attr("value",airportLocObj.loc_id);}else{showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR);return false;}}},error:function(){showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR);return false;}});},getSetLocationAction:function(location,callback){if(!location){return false;}var ws=this;var locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$");var upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(location)&&typeof callback==="function"){ws.fetchAndSaveWeatherJSONCookie(location,false,function(data){callback(ws.createObjFromJSON(data));});}},locationSearchAction:function(locationForm,searchInputId,action){var ws=this,locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$"),upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(ws.currentLocId)){$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(searchInputId).attr("name","locId");$(searchInputId).attr("value",ws.currentLocId);if(action===ws.UPDATE_HEADER_ACTION){ws.fetchLocationJSON(ws.currentLocId,function(){ws.renderWidget();});}}else{var locSearchTerm=upToCommaEx.exec($(searchInputId).attr("value")),callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){$(locationForm).attr("action",ws.PAGE_URL_SEARCH_RESULTS);var qStr,locationJson=ws.createObjFromJSON(data);if(locationJson){if(locationJson.location.length===1){var exactMatchObj=ws.createLocJSObj(locationJson.location[0]);if(action===ws.UPDATE_HEADER_ACTION){ws.fetchLocationJSON(exactMatchObj.loc_id,function(){ws.renderWidget();});}else{$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(searchInputId).attr("name","locId");$(searchInputId).attr("value",exactMatchObj.loc_id);}}else{qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+");window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;}}else{qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+");window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;}};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:locSearchTerm[0],callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:true,cache:true});}},gotoYourWeatherPage:function(locId,city,state,country){var ws=this,yourWeatherURL=ws.PAGE_URL_YOUR_WEATHER+"?locId="+locId;window.location.href=yourWeatherURL;},renderYourWeather:function(divClass,locationId,weatherView){var ws=this,feedHolder=$(divClass);if(!locationId||locationId===""){locationId=ws.WEATHER_DEFAULT_LOCATION;}$.get(ws.SERVICE_URL_WEATHER_HTML,{locationId:locationId,weatherView:weatherView},function(data){feedHolder.html(data);var weather_dayly=feedHolder.find(".weather-daily"),weather_hourly=feedHolder.find(".weather-hourly"),average_records=$(".weather.average-and-records h1"),text=average_records.text();text=text.replace("&","& ");feedHolder.find(".weather-current h1").replaceWith('<h2 class="title">Current Conditions</h2>');weather_dayly.find("h1").replaceWith('<h2 class="title">10 Day Forecast</h2>');weather_dayly.addClass("c");weather_hourly.find("h1").replaceWith('<h2 class="title">Hourly Forecast</h2>');weather_hourly.addClass("c");average_records.replaceWith('<h2 class="title">'+text+"</h2>");});},renderSearchResults:function(divClass,searchTerm){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){var searchResultsHtml="";if(data){var resultsIndex,locationJson=ws.createObjFromJSON(data);if(locationJson){if(locationJson.location.length>1){searchResultsHtml+='<p class="results">Your search for <span class="city">'+searchTerm+'</span> returned multiple locations</p><p>Please click on the location you are looking for:</p><p class="sorted">Sorted alphabetically by city, state, country<span/></p><table>';for(resultsIndex=0;resultsIndex<locationJson.location.length;resultsIndex++){var matchingLocObj=ws.createLocJSObj(locationJson.location[resultsIndex]),locationLink=ws.PAGE_URL_YOUR_WEATHER+"?locId="+matchingLocObj.loc_id;if(resultsIndex%2===0){searchResultsHtml+='<tr class="even">';}else{searchResultsHtml+="<tr>";}searchResultsHtml+='<td><a href="'+locationLink+'">'+matchingLocObj.city+"</a></td><td>"+matchingLocObj.state+"</td><td>"+matchingLocObj.country+"</td></tr>";}searchResultsHtml+="</table>";}else{if(locationJson.location.length===1){var locObj=ws.createLocJSObj(locationJson.location[0]);ws.gotoYourWeatherPage(locObj.loc_id,locObj.city,locObj.state,locObj.country);}else{searchResultsHtml+='<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>";}}}else{searchResultsHtml+=ws.MSG_DEFAULT_ERROR;}}else{searchResultsHtml+=ws.MSG_DEFAULT_ERROR;}$(divClass).html(searchResultsHtml);};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:({zipOrLocation:searchTerm,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true,error:function(){$(divClass).html('<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>");}});},renderAirportDelayInfo:function(divClass,airportCode){var ws=this,aCode=airportCode.toUpperCase();$.get(ws.SERVICE_URL_AIRPORT_DELAY_JSON,{airportCode:aCode},function(data){if(data){var delayIndex,delayJson=ws.createObjFromJSON(data),airportDelayHtml="";if(delayJson.delayList.length){airportDelayHtml+='<div class="delay">';for(delayIndex=0;delayIndex<delayJson.delayList.length;delayIndex++){var delayInfo=delayJson.delayList[delayIndex].delayInfo,delayReason=delayJson.delayList[delayIndex].delayReason;airportDelayHtml+='<p><img alt="Exclamation" src="'+(window.FOX_DomainPath||"")+'/static/v/all/img/exclamation.png"/>Delay Information</p><p class="information">'+delayInfo+'</p><p class="reason">Delay Reason</p><p class="information">'+delayReason+"</p>";}airportDelayHtml+="</div>";}else{airportDelayHtml+='<div class="no-delay"><p><img alt="Exclamation" src="'+(widow.FOX_DomainPath||"")+'/static/v/all/img/exclamation.png"/>Delay Information</p><p class="information">No delays at '+aCode+" reported.</p></div>";}$(divClass).html(airportDelayHtml);}});},renderMarineForecast:function(divClass){var ws=this,marineHtml="";marineHtml+='<div class="marine-search"><h2 class="title">Marine Forecast</h2><div class="location"><form action="" class="form_1" id="search_form4" method="get"><div id="marine-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="marineState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_MARINE_FORECAST_ENABLED)+'</ul></div><div class="clear"></div></div><div id="marine-cities-dropdown" class="list-type-dropdown"><p class="text title">Choose Marine Location</p><div class="drop_container holder"><input type="hidden" name="marineLocation" value="" /><p id="tide-cities-p" class="weather_dropdown current-value disabled">- select -</p><ul id="tide-cities-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="marine-result"></div>';$(divClass).html(marineHtml);$(".weather .marine-result").each(function(){ws.renderYourWeather(this,"USCA0638","weather_marine");});try{FOX.site.channel.listDropdown.init("marineState");}catch(err){}},renderTideLocationsDropdown:function(stateAbbr){var ws=this;if(stateAbbr!==""){$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_MARINE_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data,textStatus){var marineLocJson=ws.createObjFromJSON(data);if(marineLocJson){if(marineLocJson.marineLocations.length>0){ws.generateTideLocationsList(marineLocJson.marineLocations);}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}});}},generateTideLocationsList:function(locArrayObj){var i,tideLocDropdown="";if(locArrayObj!==null){for(i=0;i<locArrayObj.length;i++){var marineLocId=locArrayObj[i].loc_id,marineCity=locArrayObj[i].city;tideLocDropdown+='<li lang="'+marineLocId+'">'+marineCity+"</li>";}$("#tide-cities-list").html(tideLocDropdown);$("#tide-cities-p").removeClass("disabled");}else{tideLocDropdown+='<li lang=""></li>';$("#tide-cities-list").html(tideLocDropdown);$("#tide-cities-p").html("- select -");$("#tide-cities-p").addClass("disabled");}try{FOX.site.channel.listDropdown.init("marineCities");}catch(err){}},generateStatesList:function(statesList){var i,ws=this,listHtml="",states=statesList.split("|");for(i=0;i<states.length;i++){listHtml+='<li lang="'+states[i]+'">'+CONST.US_States[states[i]]+"</li>";}return listHtml;},renderSkiConditions:function(divClass){var ws=this,skiHtml="";skiHtml+='<div class="ski-search"><h2 class="title">Ski Conditions</h2><div class="location"><form action="" class="form_1" id="search_form5" method="get"><div id="ski-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="skiState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_SKI_CONDITIONS_ENABLED)+'</ul></div><div class="clear"></div></div><div id="ski-resorts-dropdown" class="list-type-dropdown"><p class="text title">Choose Ski Location</p><div class="drop_container holder"><input type="hidden" name="skiLocation" value="" /><p id="ski-resorts-p" class="weather_dropdown current-value disabled">- select -</p><ul id="ski-resorts-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="ski-result"></div>';$(divClass).html(skiHtml);$(".weather .ski-result").each(function(){ws.renderSkiCondResult(this,"303003");});try{FOX.site.channel.listDropdown.init("skiState");}catch(err){}},renderSkiResortsDropdown:function(stateAbbr){var ws=this;if(stateAbbr!==""){$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_SKI_RESORTS_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data,textStatus){var skiResortJson=ws.createObjFromJSON(data);if(skiResortJson){if(skiResortJson.skiResorts!==null&&skiResortJson.skiResorts.length>0){var newSkiReportHolder=[],skiArray=skiResortJson.skiResorts;for(var x=0;x<skiArray.length;x+=1){if(x===0){newSkiReportHolder.push(skiArray[0]);}else{if(newSkiReportHolder[newSkiReportHolder.length-1]["resort_name"]!==skiArray[x]["resort_name"]){newSkiReportHolder.push(skiArray[x]);}}}ws.generateSkiResortsList(newSkiReportHolder);}else{return false;}}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}});}},generateSkiResortsList:function(locArrayObj){var i,skiResortsDropdown="";if(locArrayObj!==null){for(i=0;i<locArrayObj.length;i++){var skiResortId=locArrayObj[i].resort_id,skiResortName=locArrayObj[i].resort_name;skiResortsDropdown+='<li lang="'+skiResortId+'">'+skiResortName+"</li>";}$("#ski-resorts-list").html(skiResortsDropdown);$("#ski-resorts-p").removeClass("disabled");}else{skiResortsDropdown+='<li lang=""></li>';$("#ski-resorts-list").html(skiResortsDropdown);$("#ski-resorts-p").html("- select -");$("#ski-resorts-p").addClass("disabled");}try{FOX.site.channel.listDropdown.init("skiResorts");}catch(err){}},renderSkiCondResult:function(divClass,resortId){var ws=this;$.get(ws.SERVICE_URL_SKI_COND_JSON,{resortId:resortId},function(data){var skiCondJson=ws.createObjFromJSON(data),skiResultHtml=ws.generateSkiCondHtml(skiCondJson);$(divClass).html(skiResultHtml);});},generateSkiCondHtml:function(skiCondJson){var skiObj=skiCondJson.skiConditions,snowMin=skiObj.new_snow_min?skiObj.new_snow_min+" in":"N/A",surface=skiObj.surface_condition?skiObj.surface_condition:"N/A",lastSnowfall=skiObj.last_snow?skiObj.last_snow+"in":"N/A",prevSnowfall=skiObj.prev_snow?skiObj.prev_snow:"N/A",baseDepth="N/A";if(skiObj.base_min&&skiObj.base_max){baseDepth=skiObj.base_min+" of "+skiObj.base_max;}var skiHtml='<ul><li><p class="city-name">'+skiObj.resort_name+", "+skiObj.state+' Ski Report</p><div class="four-half"><table><tbody><tr><td class="first">Operating Status</td><td>'+skiObj.open_status+'</td></tr><tr class="even"><td class="first">Surface</td><td>'+surface+'</td></tr><tr><td class="first">Temperature</td><td>'+skiObj.temperature+' F</td></tr><tr class="even"><td class="first">New Snowfall</td><td>'+snowMin+'</td></tr><tr><td class="first">Last Snowfall</td><td>'+lastSnowfall+'</td></tr><tr class="even"><td class="first">Previous Snowfall</td><td>'+prevSnowfall+'</td></tr><tr><td class="first">Lifts Open</td><td>'+skiObj.lifts_open+" of "+skiObj.lifts_total+'</td></tr><tr class="even"><td class="first">Trails Open</td><td>'+skiObj.trails_open+" of "+skiObj.trails_total+'</td></tr><tr><td class="first">Grooming Trails</td><td>'+skiObj.groom_trails+" of "+skiObj.trails_total+'</td></tr><tr class="even"><td class="first">Base Depth</td><td>'+baseDepth+'</td></tr><tr><td class="first">Terrain</td><td>'+skiObj.terrain+'&#37;</td></tr><tr class="even"><td class="first">Snow Made</td><td>'+skiObj.snow_made+'&#37;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr class="even"><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div></li></ul>';return skiHtml;},addToFavorites:function(locId){if(this.weatherCookie("weatherfavlocs")){var favLocationArray=(this.weatherCookie("weatherfavlocs")).split("|");if(favLocationArray.length<5){var favIndex,saveFavorite=true;for(favIndex=0;favIndex<favLocationArray.length;favIndex++){if(favLocationArray[favIndex]===locId){alert("You have already saved this location to My Favorites.");saveFavorite=false;}}if(saveFavorite){favLocationArray.push(locId);this.createWeatherFavoritesCookie(favLocationArray);this.renderFavorites();}}else{alert("You have 5 saved locations in My Favorites. Please remove one from My Favorites to save this location.");}}else{var newFavCookieArray=new Array(locId);this.createWeatherFavoritesCookie(newFavCookieArray);this.renderFavorites();}},removeFavorite:function(locId){if(this.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=(this.weatherCookie("weatherfavlocs")).split("|");for(favIndex=0;favIndex<favLocationArray.length;favIndex++){if(favLocationArray[favIndex]===locId){favLocationArray.splice(favIndex,1);break;}}this.createWeatherFavoritesCookie(favLocationArray);}var li=$("#li_"+locId),ul=li.closest("ul.favorites");li.remove();if(ul.children().size()===0){ul.closest(".weather.favorites > ul").children(":not(:last-child)").remove();}},generateFavoritesHtml:function(weatherObj){var dataObj=weatherObj.weatherData,stateToDisplay=dataObj.stateShort;if(dataObj.locationId.substr(0,2)!=="US"){stateToDisplay=dataObj.country;}var favHtml='<li id="li_'+dataObj.locationId+'"><div class="weather-img"><a href="#" onclick="weather_service.gotoYourWeatherPage(\''+dataObj.locationId+"','"+dataObj.cityName+"','"+dataObj.stateShort+"','"+dataObj.country+'\');return false;"><img alt="Weather" src="'+weather_service.PATH_WEATHER_ICON_IMAGE+dataObj.days[0].image+weather_service.WEATHER_ICON_IMAGE_EXT+'"/></a></div><div class="city-container"><h3>'+unescape(dataObj.cityName)+", "+stateToDisplay+'</h3><div class="desc"><p>'+dataObj.forecast+'</p></div></div><div class="degrees"><p>'+dataObj.days[0].hi+'&deg;&nbsp;<span class="low">'+dataObj.days[0].lo+'&deg;</span></p><a class="close" href="#" onclick="weather_service.removeFavorite(\''+dataObj.locationId+"');return false;\"/></div></li>";return favHtml;},renderFavorites:function(){var ws=this,favoritesHtml="<ul>";if(ws.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=(ws.weatherCookie("weatherfavlocs")).split("|");favoritesHtml+='<li><ul class="favorites">';for(favIndex=0;favIndex<favLocationArray.length;favIndex++){var favDataObj,favLocationId=favLocationArray[favIndex],favDataCookie=this.getWeatherDataCookie(favLocationId);if(favDataCookie){favDataObj=ws.createObjFromJSON(favDataCookie);favoritesHtml+=ws.generateFavoritesHtml(favDataObj);}else{var callbackFn="location_renderfavorites_callback";ws[callbackFn]=function(data){if(data){ws.createWeatherDataCookie(favLocationId,data);favDataObj=ws.createObjFromJSON(data);favoritesHtml+=ws.generateFavoritesHtml(favDataObj);}};$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:({locationId:favLocationId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});}}favoritesHtml+="</ul></li><li>&nbsp;</li>";}favoritesHtml+=this.generateRightRailSearch("myfav")+"</ul>";var favoritesObj=$(".component, .c").find(" .weather.favorites");favoritesObj.html(favoritesHtml);$("ul.favorites li:last-child",favoritesObj).addClass("last");$("input[class*=weather_city_autocomplete_myfav]",favoritesObj).keyup(function(){ws.weatherCityAutoComplete(this);});},renderAirportSearch:function(){var airportHtml='<div class="weather airport-search"><h1><strong>Airport</strong> Delays</h1><ul><li><div><span class="text">'+this.TXT_AIRPORT_SEARCH_FIELD+'</span><form method="get" id="aiport_search" class="form_1" action="" onsubmit="return weather_service.airportSearchAction(this,\'#airportLocId\');"><fieldset class="text_box"><input type="text" id="airportCode" class="airport_input no_airport" size="50" value="" name="airportCode"/><input type="hidden" id="airportLocId" value="" name="locId"/><input type="submit" class="airport" value=""/></fieldset></form></div></li></ul></div>';document.write(airportHtml);},fetchAndSaveWeatherJSONCookie:function(locId,setAsCookie,callback){setAsCookie=(typeof setAsCookie==="boolean")?setAsCookie:true;var ws=this,callbackFn="location_weatherjsoncookie_callback";ws[callbackFn]=function(data){if(setAsCookie){ws.createWeatherDataCookie(locId,data);ws.renderWidget();}else{if(typeof callback==="function"){callback(data);}}};$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:({locationId:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});},fetchLocationJSON:function(locId,fn){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){ws.createWeatherLocationCookie(data);if(typeof fn==="function"){fn();}};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:({zipOrLocation:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});},fetchLocationRegionCode:function(locId,callback){var ws=this,regionCode="";$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_LOCATION_REGION_JSON,data:{locationId:locId,cb:cacheBuster()},success:function(data,textStatus){if(data){var regionJson=ws.createObjFromJSON(data);callback(regionJson.regionCode);}},error:function(XMLHttpRequest,textStatus,errorThrown){showToConsole(ws.MSG_DEFAULT_ERROR);}});return regionCode;},weatherCityAutoComplete:function(element){var ws=this;ws.currentCityString="";var ACElementId=$(element).attr("id"),preloaderObj=$(element).parent().find(".preloader-img:first"),inputValue=$.trim($(element).val());if(inputValue.length<1){return;}var cssValue=$(element).attr("class"),prefix="weather_city_autocomplete_",tempIndex=cssValue.indexOf(prefix)+prefix.length,appendix=cssValue.substr(tempIndex);tempIndex=appendix.indexOf(" ");if(tempIndex>0){appendix=appendix.substr(0,tempIndex);}var initial=inputValue.charAt(0).toLowerCase();if(initial.match(/[a-z]/)===null){return;}if(typeof ws.weatherCityData[initial]==="undefined"){if(typeof ClientStorageManager==="undefined"){triggerAjaxCall(false);}else{var restrict=["cookie","msiestorage"];if(restrict.join("|").indexOf(ClientStorageManager.type.toLowerCase())===-1){ClientStorageManager.getItem(prefix+initial,function(storageData){if(storageData){var cities=eval(storageData);ws.weatherCityData[initial]=cities;triggerAutoComplete(cities);}else{triggerAjaxCall(true);}});}else{triggerAjaxCall(false);}}}else{triggerAutoComplete(ws.weatherCityData[initial]);}function triggerAjaxCall(useCSM){if(typeof ws.ACListener[ACElementId]==="undefined"){ws.ACListener[ACElementId]={init:false,fchar:initial,ajaxReady:true};}if(!ws.ACListener[ACElementId].ajaxReady){return;}ws.ACListener[ACElementId].ajaxReady=false;$(preloaderObj).show();$.ajax({type:"GET",url:ws.SERVICE_URL_CITY_DATA,data:({cityNameInitial:initial,cb:cacheBuster()}),dataType:"text",cache:true,success:function(data,textStatus){if(data){var cities=data.replace(/var cities\=/,"");if(useCSM){ClientStorageManager.saveItem({key:prefix+initial,value:cities,expire:7,success:function(returnObj){ws.weatherCityData[initial]=returnObj.value;},error:function(err){}});if(typeof ws.weatherCityData[initial]==="undefined"){ws.weatherCityData[initial]=cities;}triggerAutoComplete(ws.weatherCityData[initial]);}else{ws.weatherCityData[initial]=cities;triggerAutoComplete(ws.weatherCityData[initial]);}$(preloaderObj).fadeOut("slow");ws.ACListener[ACElementId].ajaxReady=true;}else{$(preloaderObj).hide();ws.ACListener[ACElementId].ajaxReady=true;showToConsole(ws.MSG_DEFAULT_ERROR);}},error:function(XMLHttpRequest,textStatus,errorThrown){$(preloaderObj).hide();ws.ACListener[ACElementId].ajaxReady=true;showToConsole(ws.MSG_DEFAULT_ERROR);}});}function triggerAutoComplete(cities){cities=eval(cities);if(typeof ws.ACListener[ACElementId]==="undefined"){ws.ACListener[ACElementId]={init:false,fchar:initial,ajaxReady:true};}else{if(ws.ACListener[ACElementId].fchar!==initial){ws.ACListener[ACElementId].init=false;}}if(!ws.ACListener[ACElementId].init){$(element).autocomplete(cities,{max:20,width:193,selectFirst:false,resultsClass:"ac_results ac_results_"+appendix,formatItem:function(item){return item.t;}}).result(function(event,item){ws.currentLocId=item.id;ws.currentCityString=item.t;});ws.ACListener[ACElementId].init=true;ws.ACListener[ACElementId].fchar=initial;}}},renderHeaderLocationChange:function(){var ws=this,htmlArr=[],formTimeout=false;htmlArr.push('<div id="weather_loc_change" style="display:none;"><form action="#" method="get"><fieldset><legend>Weather</legend>');htmlArr.push('<input id="weather_headInput" type="text" name="searchTerm" value="Enter city or zip" />&nbsp;<input type="submit" name="submit" class="btn-smll" value="Go" />');htmlArr.push("</fieldset></form></div>");var htmlElm=$(htmlArr.join(""));htmlElm.find("form").each(function(){var elm=$(this),search=elm.find("#weather_headInput");search.focus(function(){ws.searchFieldOnFocus(this);clearTimeout(formTimeout);}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val==="")?ws.TXT_HEADER_SEARCH_FIELD:val);formTimeout=setTimeout(function(){ws.changeHeaderLocation();},3000);});elm.submit(function(){clearTimeout(formTimeout);ws.locationSearchAction(elm,"#weather_headInput",ws.UPDATE_HEADER_ACTION);return false;});});$(".weather-search, #weather_corner").append(htmlElm);},changeHeaderLocation:function(){var info=$("#weather_cur_loc"),search=$("#weather_loc_change");if(info.is(":hidden")){search.css("display","none");info.css({opacity:"0",display:"inline"});animateFn.show(info,{speed:300,type:"swing"});}else{info.css("display","none");search.css({opacity:"0",display:"inline"});animateFn.show(search,{speed:300,type:"swing"});}},headerDisplayAction:function(locationId){var ws=this;var headerDataCookie=this.getWeatherDataCookie(locationId);if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie),wdObj=headerDataObj.weatherData,htmlArr=[],imgSrc=this.PATH_WEATHER_ICON_IMAGE+wdObj.days[0].image+this.WEATHER_ICON_IMAGE_EXT;htmlArr.push('<div id="weather_cur_loc"><p><a href="#">Forecast:</a> <span class="degree">'+wdObj.currentTemp+'&#176; <img src="http://global.fncstatic.com/static/v/all/img/clear.gif" style="width:24px; height:24px;"/></span> ');htmlArr.push('<span class="location">'+wdObj.cityName+'</span> <a href="#">edit</a></p></div>');var htmlElm=$(htmlArr.join(""));htmlElm.find("span.degree img").each(function(){var elm=$(this);elm.css({opacity:"0",display:"inline"});if(wdObj.days[0].image.length===0){elm.css("display","none");}else{if(!$.browser.opera){var img=new Image();img.onload=function(){elm.attr("src",imgSrc);animateFn.show(elm,{speed:300,type:"swing"});};img.src=imgSrc;}else{elm.css({backgroundImage:"none",display:"inline",opacity:"0"});elm.attr({src:imgSrc});animateFn.show(elm,{speed:300,type:"linear"});}}});htmlElm.find("a").each(function(){var aTag=$(this);var text=aTag.text().toLowerCase();aTag.click(function(){if(text.indexOf("forecast")>-1){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);}if(text.indexOf("edit")>-1){ws.changeHeaderLocation();}return false;});});$(".weather-search, #weather_corner").html(htmlElm);}}};function ExternalServices(root){this.root=root;this._DataObj=false;this._ExtWidgets=[];}ExternalServices.prototype={reloadWidgets:function(){var x,widgets=this._ExtWidgets,len=widgets.length;for(x=0;x<len;x++){var fn=widgets[x];if(typeof fn==="function"){fn();}}},setWidget:function(fn,execute){var EX=this;if(typeof fn==="function"){EX._ExtWidgets.push(fn);if(execute){fn();}}},getCurrentWeatherData:function(){},createForm:function(formElm){if(!formElm){return false;}var EX=this,root=this.root;formElm.each(function(){var form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value");search.focus(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val===txt)?"":val);}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val==="")?txt:val);});form.submit(function(){root.locationSearchAction(this,"#weather_widgetInput",root.UPDATE_HEADER_ACTION);return false;});});}};function showToConsole(str){if(typeof(console)==="object"){console.log(str);}}function cacheBuster(freq){freq=freq||false;var date=new Date(),str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString(),hr=date.getHours()+1,min=date.getMinutes();str+=hr.toString()+((freq&&!isNaN(freq))?(Math.floor(min/parseFloat(freq))).toString():"");return str;}var weather_service=window.weather_service=new WeatherService("weather_service");var animateFn={isIE:function(){return $.browser.msie;},animate:function(elm,cfg){if(!this.isIE()){if(!cfg.speed){cfg.speed=300;}if(!cfg.type){cfg.type="swing";}elm.animate(cfg.css,cfg.speed,cfg.type,function(){if(cfg.callback){cfg.callback();}});}else{elm.css(cfg.css);elm.css("opacity","");if(cfg.callback){cfg.callback();}}},hide:function(elm,cfg){if(!elm){return false;}var i,cssObj={opacity:"0"};if(cfg.css){for(i in cfg.css){cssObj[i]=cfg.css[i];}}cfg.css=cssObj;this.animate(elm,cfg);},show:function(elm,cfg){if(!elm){return false;}var i,cssObj={opacity:"1"};if(cfg.css){for(i in cfg.css){cssObj[i]=cfg.css[i];}}cfg.css=cssObj;this.animate(elm,cfg);}};}(jQuery));var FOX_WeatherService=(function(e){var o={};o.protocol=window.location.protocol;o.feed={info:o.protocol+"//www.foxnews.com/feeds/web/weather/conditions/${type}/${zip}.json",airport:o.protocol+"//www.foxnews.com/feeds/web/weather/airport/${type}/${code}.json",marine:o.protocol+"//www.foxnews.com/feeds/web/weather/marine/${type}/${id}.json",details:o.protocol+"//www.foxnews.com/feeds/web/weather/details/zip/${zip}.json"};o.state={id:"USNY0996",zip:"10108",city:"New York",state:"NY"};o.cookies={};o.cookies.domain="foxnews.com";o.cookies.location={name:"FXN_w_locinfo",expires:(60*24*365)};o.cookies.info={name:"FXN_w_stinfo",expires:30};var n=function(){this.__vars={};var s=this.__vars;s._INVALID_ZIPS=[];s._CALL_STACK={};this.render=new m(this);this.event=new j(this);this.init();};n.prototype.init=function(){var s=this,t=o.cookies.location;(function(){var v="FXN_w_ckbt_2";if(!i.get(v)){i.set(v,1,365);i.set("FXN_w_ckbt",1,(new Date()));e.cookie(o.cookies.location.name,o.state.zip,{expires:(new Date()),path:"/"});}}());if(!i.get(t.name)){i.set(t.name,o.state.zip,t.expires);s.__vars._CURRENT_ZIP=o.state.zip;}else{s.__vars._CURRENT_ZIP=i.get(t.name);}try{this.init=function(){};}catch(u){}};n.prototype.getWeatherInfo=function(v,C,G){var F=this,A=this.__vars,y=A._CALL_STACK,t="FOX_Weather_getWeatherInfo_${zip}",D=o.cookies.info,s=q.getItem(D.name),z=o.cookies.location;if(typeof C!=="function"){return false;}var w=function(M,J,I,H,L){var K={};if(!I){K.data=J;K.zip=M;}else{K=J;}if(H&&!I){A._CURRENT_ZIP=M;i.set(z.name,M,z.expires);q.setItem(D.name,K,D.expires);}if(H){h.trigger("Weather.Event.onWidgetUpdate",K);}if(I){C(K);}else{r.execStack(y,L,K);}};var E=(!v)?true:(e.inArray(v,A._INVALID_ZIPS)===-1)?true:false;if(s&&(s.zip===v||(!v&&G))){var B=((v)?v:s.zip);g("[Weather.Service] Storage: Getting data for "+B);w(B,s,true,G);}else{if(E){if(!v){if(G){v=F.getCurrentZip();}else{g("[Weather.Service] Error: No ZIP Code passed.");return false;}}t=t.replace("${zip}",v);if(r.inStack(y,t)){r.setStack(y,t,C);}else{r.setStack(y,t,C);var u=(function(){var H=o.feed.info;H=H.replace("${type}","zip");H=H.replace("${zip}",v);H+="?callback="+t;return H;}());window[t]=function(H){var I=(H&&H.weatherData&&H.weatherData.locationId&&H.weatherData.locationId.length>0)?H.weatherData:false;if(I){w(v,I,false,G,t);}else{if(e.inArray(v,A._INVALID_ZIPS)===-1){A._INVALID_ZIPS.push(v);}g("[Weather.Service] Invalid: "+v);C(I);}r.killStack(y,t);};g("[Weather.Service] Request: Getting data for "+v);p(u);}}else{g("[Weather.Service] Invalid: "+v);C(false);}}};n.prototype.getWeatherDetails=function(u,A){var C=this,z=C.__vars,w=z._CALL_STACK,s="FOX_Weather_getWeatherDetails_${zip}",y=o.cookies.location;if(typeof A!=="function"){return false;}if(!u){u=c()||root.__vars._CURRENT_ZIP;}var v=function(D,F){var E={};E.zip=D.zipCode;E.data=D;r.execStack(w,F,E);};var B=(e.inArray(u,z._INVALID_ZIPS)===-1)?true:false;if(B){s=s.replace("${zip}",u);if(r.inStack(w,s)){r.setStack(w,s,A);}else{r.setStack(w,s,A);var t=(function(){var D=o.feed.details;D=D.replace("${zip}",u);D+="?callback="+s;return D;}());window[s]=function(D){var E=(D&&D.weatherData&&D.weatherData.locationId&&D.weatherData.locationId.length>0)?D.weatherData:false;if(E){v(E,s);}else{if(e.inArray(u,z._INVALID_ZIPS)===-1){z._INVALID_ZIPS.push(u);}g("[Weather.Service] Invalid: "+u);A(E);}r.killStack(w,s);};g("[Weather.Service] Request: Getting 'Your Weather' data for "+u);p(t);}}else{A(false);}};n.prototype.updateWidget=function(t,u){var s=this;b(s.render.__vars._widgetStack,t);if(typeof u==="function"){s.event.onWidgetUpdate(u);}};n.prototype.loadImage=function(u,t,s){d(u,t,s);};n.prototype.getCurrentZip=function(){var s=this,u=o.cookies.location,t=i.get(u.name);if(!t){t=o.state.zip;}return t;};var j=(function(){var s=function(t){this.__vars={};var u=this.__vars;u._root=t;};s.prototype.onWidgetUpdate=function(u){var t=this;if(typeof u!=="function"){return false;}h.bind("Weather.Event.onWidgetUpdate",u);};s.prototype.onWeatherInfoUpdate=function(v,y){var u=this,w=this.__vars,t=w._root;if(typeof y!=="function"){return false;}if(e.inArray(v,t.__vars._INVALID_ZIPS)===-1){h.bind("Weather.Event.onWeatherInfoUpdate_"+v);}};return s;}());var m=(function(){var s=function(t){this.__vars={};var u=this.__vars;u._root=t;u._widgetStack=[];};s.prototype.WeatherWidget=function(A){var H=this,B=H.__vars,E=B._root;if(!A){return false;}var u=A.find("form"),F=u.find("#weather_widgetInput"),C=A.find("form fieldset > .region"),D=A.find("form fieldset > div:first"),z=A.find("> ul li"),G="Enter Zip Code";var v=function(K){var J=K.data;z.each(function(O){var S=e(this),P=S.find(".section-pr span"),M=J.day[O],R;if(O===0){R=J.currentImage;}else{R=M.image;}var Q=S.find(".media img");if(Q.size()===0){S.find(".media").html('<img src="'+o.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" style="width:60px;width:60px;display:inline;" />');Q=S.find(".media img");}d(Q,R,[60,60]);if(O===0){S.find(".current").html(J.currentTemp+"&#176;");}var N="Hi "+M.hi+"&#176; | Lo "+M.lo+"&#176;";P.html(N);var L="/weather/your-weather/index.html";S.unbind("click").bind("click",function(){window.open(L,"_self");});});D.hide();F.val(G);var I=[J.cityName,J.stateShort].join(", ");C.find("label").html(I);C.show();A.addClass("active");};var y=function(I){F[(!I)?"removeClass":"addClass"]("error");};var t=function(I){if(I){e("input").attr("disabled","disabled");u.addClass("loading");}else{e("input").removeAttr("disabled");u.removeClass("loading");}};var w=function(K){if(A.data("_weatherInitialized")){return false;}A.data("_weatherInitialized");C.find(".close").bind("click",function(){C.hide();D.show();return false;});var L=false;A.hover(function(){L=true;},function(){L=false;});F.focus(function(){var N=e(this),M=N.val();N.data("currVal",M);N.val("");}).blur(function(){var N=e(this),M=N.attr("value");N.val((M==="")?N.data("currVal"):M);if(!L){C.show();D.hide();y(false);N.val(G);}});var J=false;var I=function(M){if(J){return false;}J=true;M=M||f(F.val());y(false);if(!M){y("zip");J=false;}else{t(true);E.getWeatherInfo(M,function(N){t(false);if(N&&N.data){y(false);v(N);}else{y(K);}J=false;},true);}};u.submit(function(){I();return false;});B._widgetStack.push(I);e("html, body").bind("mouseup",function(){if(!L&&!J){C.show();D.hide();y(false);F.val(G);}});};E.getWeatherInfo(null,function(I){if(I&&I.data){v(I);w(I);}},true);};s.prototype.HomeWeatherWidget=function(B){var I=this,C=I.__vars,F=C._root;if(!B){return false;}var v=B.find("form"),G=v.find("#weather_widgetInput"),D=B.find("form fieldset > .region"),E=B.find("form fieldset > div:first"),u=B.find("p.details"),A=B.find("ul .section-pr"),H="Enter Zip Code";var w=function(N){var L=N.data;A.find(".current").html(L.currentTemp+"&#176;");A.find(".day").html("Today");var M=A.find(".media img");if(M.size()===0){A.find(".media").html('<img src="'+o.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" style="width:24px;width:24px;display:inline;" />');M=A.find(".media img");}d(M,L.currentImage,[24,24]);E.hide();G.val(H);var K=[L.cityName,L.stateShort].join(", ");D.find("label").html(K);D.show();var J="/weather/your-weather/index.html";u.find("a").attr("href",J);A.bind("click",function(){window.open(J,"_self");return false;});u.show();B.addClass("active");e(document).trigger("FOX.Events.FormWeatherUpdate");};var z=function(L){var J=u.find("a"),K=u.find("span");if(!L){J.show();K.html("&nbsp;&rsaquo;");}else{var M=false;if(L==="zip"){M="Invalid ZIP Code";}else{if(L="data"){M="Invalid ZIP Code";}}if(M){J.hide();K.html(M);}}u.show();};var t=function(J){if(J){e("input").attr("disabled","disabled");v.addClass("loading");}else{e("input").removeAttr("disabled");v.removeClass("loading");}};var y=function(L){if(B.data("_weatherInitialized")){return false;}B.data("_weatherInitialized");D.find(".close").bind("click",function(){D.hide();E.show();u.hide();return false;});var M=false;B.hover(function(){M=true;},function(){M=false;});G.focus(function(){var O=e(this),N=O.val();O.data("currVal",N);O.val("");}).blur(function(){var O=e(this),N=O.attr("value");O.val((N==="")?O.data("currVal"):N);if(!M){D.show();E.hide();z(false);u.show();O.val(H);}});var K=false;var J=function(N){if(K){return false;}K=true;N=N||f(G.val());z(false);if(!N){z("zip");K=false;}else{t(true);F.getWeatherInfo(N,function(O){t(false);if(O&&O.data){z(false);w(O);}else{z(L);}K=false;},true);}};v.submit(function(){J();return false;});C._widgetStack.push(J);e("html, body").bind("mouseup",function(){if(!M&&!K){D.show();E.hide();z(false);u.show();G.val(H);}});};F.getWeatherInfo(null,function(J){if(J&&J.data){w(J);y(J);}},true);};s.prototype.LatinoWeatherWidget=function(A){var G=this,B=G.__vars,C=B._root;if(!A){return false;}var u=A.find("form"),E=u.find("#weather_widgetInput"),D=A.find("p.state"),z=A.find("> ul li"),F="Enter Zip Code";var v=function(J){var I=J.data;var H=[I.cityName,I.stateShort].join(", ");D.html(H);z.each(function(N){var R=e(this),O=R.find(".section-pr span"),L=I.day[N],Q;if(N===0){Q=I.currentImage;}else{Q=L.image;}var P=R.find(".media img");if(P.size()===0){R.find(".media").html('<img src="'+o.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" style="width:60px;width:60px;display:inline;" />');P=R.find(".media img");}d(P,Q,[60,60]);if(N===0){R.find(".current").html(I.currentTemp+"&#176;");}var M="Hi "+L.hi+"&#176; | Lo "+L.lo+"&#176;";O.html(M);var K="/weather/your-weather/index.html";R.unbind("click").bind("click",function(){window.open(K,"_self");});});A.addClass("active");};var y=function(H){E[(!H)?"removeClass":"addClass"]("error");};var t=function(H){if(H){e("input").attr("disabled","disabled");u.addClass("loading");}else{e("input").removeAttr("disabled");u.removeClass("loading");}};var w=function(J){if(A.data("_weatherInitialized")){return false;}A.data("_weatherInitialized");var K=false;u.hover(function(){K=true;},function(){K=false;});E.focus(function(){var M=e(this),L=M.val();M.data("currVal",L);M.val("");y(false);}).blur(function(){var M=e(this),L=M.attr("value");M.val((L==="")?F:L);y(false);});var I=false;var H=function(L){if(I){return false;}I=true;L=L||f(E.val());y(false);if(!L){y("zip");I=false;}else{t(true);C.getWeatherInfo(L,function(M){t(false);if(M&&M.data){y(false);v(M);}else{y(J);}I=false;},true);}};u.submit(function(){H();return false;});B._widgetStack.push(H);e("html, body").bind("mouseup",function(){if(!K&&!I){y(false);E.val(F);}});};C.getWeatherInfo(null,function(H){if(H&&H.data){v(H);w(H);}else{A.hide();}},true);};s.prototype.YourWeatherLocationWidget=function(B){var I=this,C=I.__vars,F=C._root;if(!B){return false;}var v=B.find("form"),G=v.find("#weather_widgetInput"),D=B.find("form fieldset > .region"),E=B.find("form fieldset > div:first"),u=B.find("p.error"),H="Enter Zip Code";var y=function(){A(false);E.hide();D.show();};var A=function(J){if(J){u.show();}else{if(u.not(":hidden")){u.hide();}}};var t=function(J){if(J){G.attr("disabled","disabled");v.addClass("loading");}else{G.removeAttr("disabled");v.removeClass("loading");}};var w=false;B.find("> div:first").hover(function(){w=true;},function(){w=false;});var z=function(){if(B.data("_weatherInitialized")){return false;}B.data("_weatherInitialized");D.find("a").bind("click",function(){D.hide();E.show();u.hide();return false;});G.focus(function(){var M=e(this),L=M.val();M.data("currVal",L);M.val("");A(false);}).blur(function(){var M=e(this),L=M.attr("value");M.val((L==="")?H:L);A(false);if(!w){D.show();E.hide();A(false);M.val(H);}});var K=false;var J=function(L){if(K){return false;}K=true;L=L||f(G.val());A(false);if(!L){A("zip");K=false;}else{t(true);F.getWeatherInfo(L,function(M){t(false);if(M&&M.data){A(false);y(M);}else{A("data error");}K=false;},true);}};v.submit(function(){J();return false;});C._widgetStack.push(J);e("html, body").bind("mouseup",function(){if(!w&&!K){D.show();E.hide();A(false);G.val(H);}});};z();};return s;}());var a=(function(){var s={};s.LocationInfo=function(t){var u={};u.city=t.cityName;u.state=t.stateShort;u.country=t.country;u.current=t.currentTemp;u.forecast=t.forecast;u.id=t.locationId;u.region=t.regionImage;};return s;}());var r=(function(){var s=function(){};s.prototype.inStack=function(t,z,y){var u=this,w,v=false;for(w in t){if(w===z&&t[w]){v=(y)?t[w]:true;break;}}return v;};s.prototype.execStack=function(v,A,z){var w=this,u=w.getStack(v,A);if(u){for(var t=0;t<u.length;t++){var y=u[t];if(typeof y==="function"){y(z);}}}};s.prototype.getStack=function(t,w){var u=this,v=u.inStack(t,w,true);return v;};s.prototype.setStack=function(t,y,w){var v=this,u=v.inStack(t,y);if(u){t[y].push(w);}else{t[y]=[w];}};s.prototype.killStack=function(t,v){if(t[v]){try{delete t[v];}catch(u){t[v]=null;}}};s=new s();return s;}());var h=(function(){var s={};s.bind=function(t,u){if(typeof u!=="function"){return false;}e(document).bind(t,function(v,w){u(w);});};s.trigger=function(t,u){e(document).trigger(t,[u]);};return s;}());var q=(function(){var s={};s.setItem=function(u,w,t){var v=(window.JSON&&window.JSON.stringify)?true:false;if(!v){return false;}w=encodeURIComponent(JSON.stringify(w));i.set(u,w,t);};s.getItem=function(u){var w=i.get(u),t=(w)?w:false;try{if(t&&window.JSON&&window.JSON.parse){t=JSON.parse(decodeURIComponent(t));}}catch(v){t=false;}return t;};s.removeItem=function(t){i.set(t,null);};return s;}());var i=(function(){var s={};s.set=function(v,w,t){var y={};y.path="/";y.domain=o.cookies.domain;if(typeof t==="number"){var u=new Date();y.expires=new Date(u.setTime(u.getTime()+(t*60*1000)));}else{y.expires=t;}e.cookie(v,w,y);};s.get=function(t){var u=e.cookie(t);return u;};return s;}());var f=function(u){var t=/^\d{5}([\-]\d{4})?$/,s=t.test(u);return(s)?u.slice(0,5):false;};var k=function(u){var t=/^[a-zA-Z]{4}[0-9]{4}$/,s=t.test(u);return(s)?u:false;};var d=function(v,w,u){var t=o.protocol+"//global.fncstatic.com/static/v/all/img/weather/icons_"+u.join("x")+"/"+w+".png",s=new Image();if(t!==v.attr("src")){v.css("opacity","0");s.onload=function(){v.attr("src",t);v.animate({opacity:1},400,"linear");};s.src=t;}};var p=function(s){e.ajax({url:s,data:{cb:l(30)},dataType:"script",async:true,cache:true});};var c=function(){var s,t=false,y=window.location,w=y.search.substr(1)||"";if(w.length>0){var v=w.split("&");for(s=0;s<v.length;s++){var u=v[s].split("=");if(u[0]==="zip"){t=u[1];break;}}}return t;};var b=function(t,u){if(!e.isArray(t)){return false;}for(var s=0;s<t.length;s++){if(typeof t[s]==="function"){t[s](u);}}};var l=function(v){v=v||false;var s=new Date(),w=s.getFullYear().toString()+(s.getMonth()+1).toString()+s.getDate().toString(),u=s.getHours()+1,t=s.getMinutes();w+=u.toString()+((v&&!isNaN(v))?(Math.floor(t/parseFloat(v))).toString():"");return w;};var g=function(){var t=true;if(t&&window.console){try{return console.log.apply(console,arguments);}catch(s){console.log(arguments);}}};return(new n());}(jQuery));(function($){var _cbStr=(typeof _cbVarStr!=="undefined")?_cbVarStr:"b1002";var CONST={thirdParty:{recaptcha:{url:"/ajax/authentication/recaptcha.jsp",elmId:"recaptcha_div",id:"6LcspgwAAAAAAPIfJ3yUt1aUl_Thr8TQfQmR1oRP",settings:{theme:"clean"}},disqus:{widget:"DQIntegrationService",cookie:{name:"p_DQS",expires:14},hash:{empty:"e30=",expires:60}},idms:{cookie:{name:"p_IDMS",expires:14},hash:{empty:"e30=",expires:"5"},callback:{login:"FOX_IDMS_auth_logged_in",logout:"FOX_IDMS_auth_logged_in"}},fm:{cookie:{name:"SABRE_ID",expires:14},hash:{empty:"e30=",expires:"5"},callback:{login:"FOX_FM_auth_logged_in",logout:"FOX_FM_auth_logged_in"}}}};var AuthService=window.AuthService=function(initVars){this.validationUrl="/authentication/registration/validate/";this.getRegistrationDataUrl="/authentication/registration/get";this.loginSubmitUrl="/authentication/login/submit";this.logoutSubmitUrl="/authentication/logout/submit";this.requestLogoutUrl="/authentication/logout/submit";this.refreshAuthUrl="/authentication/login/refresh?"+_cbStr+"=t";this.forgottenPasswordSubmitUrl="/authentication/forgotten_password/submit";this.registrationSubmitUrl="/authentication/registration/submit";this.ajaxRetrieveHtmlUrl="/ajax/authentication/includes.jsp";this.newsAlertSubscriptionUrl="/portal/newsalertsubscribe";this.defaultDomain="foxnews.com";var i;for(i in initVars){this[i]=initVars[i];}};AuthService.prototype={init:function(config){var i,as=this;for(i in config){this[i]=config[i];}if(window.FOX_isMnt&&FOX_isMnt()){$("#account, #authentication").hide();}this.thirdPartyAPI=new ThirdPartyAPI(this);},extend:function(obj){var i,self=this;for(i in obj){this[i]=obj[i];}},createObjFromJSON:function(jsonString){if(typeof jsonString==="string"){if(($.trim(jsonString)).length>0){return eval("("+unescape(jsonString).replace(/\s+/g," ")+")");}}return false;},isLoggedIn:function(){return($.cookie("p_UN")&&$.cookie("p_UN")!=="")?true:false;},isThirdParty:function(){return($.cookie("p_Thirdparty"))?true:false;},getDisplayName:function(){var as=this;function pipeCheck(str){var separator="|id:",idx=str.lastIndexOf(separator);if(idx<1){return str;}return str.substr(0,idx);}if(as.isLoggedIn()){var displayName=false;if(typeof $.cookie("p_DN")==="string"){var dn=$.cookie("p_DN");if(dn.length>0){dn=pipeCheck(dn);displayName=dn.replace(/\+/g," ").replace(/\"/g,"");}}return(displayName)?displayName:as.getUsername();}return"";},getUsername:function(){if(this.isLoggedIn()){return $.cookie("p_UN");}},getUserEmail:function(){return(this.isLoggedIn())?$.cookie("p_EM"):"";},getUserLocation:function(){return(this.isLoggedIn())?$.cookie("p_UL"):"";},getOverlayHtml:function(overlayView,origDomain,callbackFn){callbackFn=callbackFn||false;var as=this;if(!origDomain){origDomain=as.defaultDomain;}$.ajax({type:"GET",async:false,url:as.ajaxRetrieveHtmlUrl,data:({view:overlayView,authDomain:origDomain,cb:_cbStr}),success:function(data,textStatus){$("body").append(data);if(typeof callbackFn==="function"){callbackFn();}}});},closeOverlay:function(elementId){var as=this,elm=$("#"+elementId);elm.find("input[type*=text], input[type*=password]").val("");elm.find("input:checkbox:checked").attr("checked","");elm.find("input[type*=text]").removeClass("error");as.overlay.hide(elm);},providerOverlay:function(authDomain,callbackFn){var as=this;if(!as.isLoggedIn()){if($("#login-provider").size()===0){as.getOverlayHtml("login-provider",authDomain,callbackFn);}as.initProviderOverlay();as.overlay.show("#login-provider");$("#user-login-form-overlay").find("input[name*=username]").focus();return false;}return true;},initProviderOverlay:function(){var as=this;var login_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){elm.find(".error-box-login").html("User name and password are required.").show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.login(elm);return false;}};$("#user-login-form-overlay").validate(login_validation_options);$(".thirdparty a img").hover(function(){var thirdPartyTooltip=$(this).parent().parent().siblings(0);thirdPartyTooltip.find(".icon-desc-bg p").html($(this).attr("alt"));thirdPartyTooltip.addClass($(this).attr("name")).css("visibility","visible");},function(){var thirdPartyTooltip=$(this).parent().parent().siblings(0);thirdPartyTooltip.find(".icon-desc-bg p").html("");thirdPartyTooltip.removeClass($(this).attr("name")).css("visibility","hidden");});var reset_password_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){elm.find(".error-box-login").html("The email address you entered is invalid.").show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.forgotPassword(elm);return false;}};$("#reset-password .user-email-reset-form").validate(reset_password_validation_options);$("#forgot-password-overlay").unbind("click").click(function(){$("#reset-password.reset").toggle();});},registrationOverlay:function(authDomain,callbackFn){var as=this;if(!as.isLoggedIn()){if($("#registration-overlay").length===0){as.getOverlayHtml("registration-overlay",authDomain,callbackFn);}increaseRefresh();$("#reg_user_name").removeAttr("readonly");$("#reg_user_name").next(".validate").next(".validate").children(".sprites").show();as.initRegistrationOverlay();as.overlay.show("#registration-overlay");return false;}return true;},initRegistrationOverlay:function(){var as=this;var registration_validation_options={submitHandler:function(form){as.register($(form));return false;},errorElement:"p",errorPlacement:function(err,elm){var errMsg=err.text(),id=elm.attr("id");if(elm.data("_errMsg")===errMsg){return false;}elm.data("_errMsg",errMsg);var parent=elm.parent(),marker=parent.find("> .validate:first .sprites"),msgAlert=parent.find("> .error-tip p.err-msg"),errMsg=err.text(),reqTxt=parent.find("> .req-text");var css={valid:"check",invalid:"red-exclamation"};reqTxt.hide();var noMsg="reg_birth_year";var noMarker="reg_zip_code|reg_location";if(msgAlert.size()===0&&noMsg.indexOf(id)===-1){var validate=parent.find("> .validate:first");if(id==="agreement"){validate=elm;}msgAlert=$('<div class="error-tip"><span class="form-note"><p class="err-msg"></p></span></div>').insertAfter(validate);msgAlert=parent.find("> .error-tip p.err-msg");if(id==="agreement"){parent.find("> .error-tip").css({position:"absolute",width:"220px",right:"0",top:"0"});}}msgAlert.css("padding-top","0px");if(errMsg.length===0){if(noMarker.indexOf(id)===-1){marker.removeClass(css.invalid).addClass(css.valid);}msgAlert.html("&nbsp;");}else{if(noMarker.indexOf(id)===-1){marker.removeClass(css.valid).addClass(css.invalid);}msgAlert.html(errMsg);}if(marker.is(":hidden")&&noMarker.indexOf(id)===-1){marker.css("display","block");}},success:function(){},rules:{propID_username:{required:true,minlength:5,maxlength:15,validChars:true,remote:{url:as.validationUrl,type:"post"}},propID_email:{required:true,email:true,maxlength:250,strictEmail:true,remote:{url:as.validationUrl,type:"post"}},propID_pass1:{required:true,noSpaces:true,minlength:5,maxlength:12},propID_pass2:{required:true,noSpaces:true,minlength:5,maxlength:12,equalTo:"#reg_password"},propID_country:{required:true},propID_zip:{digits:true,maxlength:5,minlength:5,zipRequired:true,zipCheck:true,remote:{url:as.validationUrl,type:"post"}},propID_birthyear:{required:true,min:1900,isMaxYear:true},propID_terms:{required:true}},messages:{propID_username:{required:"Please enter a username",minlength:"Your username must consist of at least 5 characters",maxlength:"Your username is too long",validChars:"please supply valid characters only.",remote:"This username is already in use."},propID_email:{required:"Please enter an email address.",email:"Your email address must be valid.",maxlength:"Your email address is too long.",remote:"A user is already registered with this email."},propID_pass1:{required:"Please enter a password.",minlength:"Your password must be at least 5 characters.",maxlength:"Your password is too long."},propID_pass2:{required:"Please confirm your password.",equalTo:"Your passwords do not match."},propID_terms:{required:"In order to join Fox News community you must agree to our terms and conditions. Please review and check the box to join."},propID_country:{required:"Please select your country of residence."},propID_zip:{digits:"Please enter a valid zip code.",maxlength:"A valid zip code is five digits.",minlength:"A valid zip code is five digits.",required:"Please enter a zip code.",remote:"Please enter a valid United States zip code."},propID_birthyear:{required:"Please select your birth year."}}};as.instantiateValidators();$("#registration").validate(registration_validation_options);as.showRecaptcha();},initOpxLogin:function(){var as=this;var reset_password_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){var message="The email address you entered is invalid.";elm.find(".error-box-login").html(message).show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.forgotPassword(elm);return false;}};$("#reset-password .user-email-reset-form").validate(reset_password_validation_options);},initEditProfile:function(){var as=this;var edit_profile_validation_options={debug:false,submitHandler:function(form){if($("#reg_email").val()===""&&$("#reg_email2").val()===""){$("#reg_email").val($("#reg_curemail").val());$("#reg_email2").val($("#reg_curemail").val());}form.submit();return false;},errorElement:"p",errorPlacement:function(error,element){var elm=$(element),elem_pos=elm.position(),error_message=$(error[0]).html(),error_name=elm.attr("id").replace("reg","err");error_html=[];error_html.push('<div class="regoverlay_container error-tip" id="'+error_name+'">');error_html.push('<div class="overlaytip_top"></div><div class="form-note"><img src="/static/v/all/img/alert-yellow.gif" alt="" />');error_html.push('<p class="err-msg">'+error_message+'</p></div><div class="overlaytip_btm"></div></div>');error_html.join("");$("div.regoverlay_container.error-tip").hide();var errorElm=$("div#"+error_name);if(errorElm.size()>0){if(error_message!==""){errorElm.find("p.err-msg").html(error_message).show();}}else{elm.after(error_html);errorElm.hide();}errorElm.css({top:(elem_pos.top-80)+"px",left:(elem_pos.left+50)+"px"});errorElm.next(".validate > .sprites").removeClass("check").addClass("red-exclamation").show();},success:function(label){var errDiv=$("div#"+$(label).attr("htmlfor").replace("reg","err"));errDiv.hide();errDiv.next(".validate > .sprites").removeClass("red-exclamation").addClass("check");},rules:{propID_email:{required:false,email:true,maxlength:250,strictEmail:true},propID_email2:{equalTo:"#reg_email"},propID_pass1:{noSpaces:true,minlength:5,maxlength:12},propID_pass2:{noSpaces:true,minlength:5,maxlength:12,equalTo:"#reg_password"},propID_country:{required:true},propID_zip:{digits:true,maxlength:5,minlength:5,zipRequired:true,zipCheck:true},propID_gender:{required:true},propID_birthyear:{required:true,min:1900,isMaxYear:true}},messages:{propID_email:{required:"Please enter an email address.",email:"Your email address must be valid.",maxlength:"Your email address is too long.",remote:"A user is already registered with this email."},propID_email2:{required:"Please confirm your email address.",equalTo:"Please double check your email. They do not match."},propID_pass1:{required:"Please enter a password.",minlength:"Your password must be at least 5 characters.",maxlength:"Your password is too long."},propID_pass2:{required:"Please confirm your password.",equalTo:"Your passwords do not match."},propID_country:{required:"Please select your country of residence."},propID_zip:{digits:"Please enter a valid zip code.",maxlength:"A valid zip code is five digits.",minlength:"A valid zip code is five digits.",required:"Please enter a zip code."},propID_gender:{required:"Please submit your gender."},propID_birthyear:{required:"Please select your birth year."}}};as.instantiateValidators();$("#reg_profile").validate(edit_profile_validation_options);},forgotPasswordOverlay:function(obj){var as=this;if(!as.isLoggedIn()){if($("#forgot-password-overlay").size()===0){as.getOverlayHtml("forgot-password-overlay");}var offset=$(obj).offset();var leftPos=offset.left-$("#forgot-password-overlay").width();as.overlay.show("#forgot-password-overlay");return false;}return true;},login:function(formObj){formObj=$(formObj);var as=this,user=formObj.find("input[name*=username]").val(),pass=formObj.find("input[name*=password]").val(),rememberMe=(formObj.find("input[name*=rememberMe]:checked").size()>0)?true:false,numOfDays=(rememberMe)?365:0;$.ajax({type:"POST",url:as.loginSubmitUrl,data:({username:user,password:pass,authDomain:as.domain,rememberMe:rememberMe}),dataType:"text",success:function(data,textStatus){var loginResponse=as.createObjFromJSON(data);var messageArr=loginResponse.authentication.message.split(" ");if(!loginResponse){showToConsole("[authSrv.login] No data returned from request.",true);return false;}if(loginResponse.authentication.status==="ok"){if(typeof $.ad!="undefined"){$.ad.track({login:{userid:"fox login - id: "+as.getDisplayName()+" email:"+as.getUserEmail()}});}as.onSuccessLogin();as.thirdPartyAPI.disqus.login(loginResponse);as.thirdPartyAPI.idms.login(loginResponse);as.thirdPartyAPI.fileMobile.login(loginResponse);as.closeOverlay("login-provider");if(as.domain==="foxnews.com"&&window.location.pathname.indexOf("/community/user/")>-1){window.location.reload();}}else{formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".login-error").html("We are sorry, please try again.").show();}},error:function(XMLHttpRequest,textStatus,errorThrown){formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".login-error").html("We are sorry, please try again later.").show();}});},logout:function(origDomain){var as=this;origDomain=origDomain||as.defaultDomain;$.ajax({type:"POST",url:as.logoutSubmitUrl,data:({authDomain:origDomain}),success:function(data,textStatus){if(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.logout] No data returned from request.",true);return false;}if(authObj.authentication.status==="ok"){as.thirdPartyAPI.disqus.logout(authObj,function(){as.thirdPartyAPI.idms.logout(authObj,function(){as.thirdPartyAPI.fileMobile.logout(authObj,function(){if(window.location.pathname.indexOf("/community/user/profile")>-1){window.location.href="http://www.foxnews.com/index.html";}else{window.location.reload();}});});});}}},error:function(XMLHttpRequest,textStatus,errorThrown){}});},requestLogOut:function(config){config=config||{};var as=this;$.ajax({type:"GET",url:as.requestLogoutUrl,success:function(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.requestLoginInfo] No data returned from request.",true);return false;}if(typeof config.callback==="function"){config.callback(authObj);}}});},requestLoginInfo:function(config){config=config||{};var as=this;$.ajax({type:"POST",url:as.refreshAuthUrl,success:function(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.requestLoginInfo] No data returned from request.",true);return false;}if(typeof config.callback==="function"){config.callback(authObj);}}});},forgotPassword:function(formObj){formObj=$(formObj);var as=this,email=formObj.find("input[name*=emailResetField]").val();$.ajax({type:"POST",url:as.forgottenPasswordSubmitUrl,data:({email:email}),dataType:"text",success:function(data,textStatus){var forgotPasswordResponse=as.createObjFromJSON(data);if(!forgotPasswordResponse){showToConsole("[authSrv.forgotPassword] No data returned from request.",true);return false;}if(forgotPasswordResponse.authentication.status==="ok"){formObj.find(".error-box-login").hide();formObj.find(".reset-input-container").hide();formObj.find(".confirm-box-login").html("A reset link has been sent to the email provided.").show();}else{formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".error-box-login").html("The email address you entered is invalid").show();}},error:function(XMLHttpRequest,textStatus,errorThrown){formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".error-box-login").html("We're sorry your password cannot be reset at this time. Please try again later.").show();}});},register:function(formObj){var as=this,privacy=(formObj.find("#reg_location_confirm:checked").size()>0)?"hide":"",challenge=as.thirdPartyAPI.recaptcha.getChallenge(),response=as.thirdPartyAPI.recaptcha.getResponse();var slids=[];if(formObj.find("#fnbreaking:checked").size()>0){slids.push("C2F278094FACCEA62391025B7A52D8EB");}if(formObj.find("#fbbreaking:checked").size()>0){slids.push("5C84B893BD6D939E84FAE1A8E6E9525A");}if(slids.length>0){$.ajax({type:"GET",url:as.newsAlertSubscriptionUrl,data:({slids:slids.join(","),email:$("#reg_email").val()}),dataType:"text"});}$.ajax({type:"POST",url:as.registrationSubmitUrl,data:{authDomain:as.domain,realm:"realm1",username:formObj.find("#reg_user_name").val(),password:formObj.find("#reg_password").val(),email:formObj.find("#reg_email").val(),zip:formObj.find("#reg_zip_code").val(),country:formObj.find("#reg_country").val(),location_privacy:privacy,birth_year:formObj.find("#reg_birth_year").val(),recaptcha_challenge_field:challenge,recaptcha_response_field:response},dataType:"text",success:function(data,textStatus){var registrationResponse=as.createObjFromJSON(data);var message=registrationResponse.authentication.message;if(message.indexOf("successful registration")>-1&&typeof $.ad!=="undefined"){$.ad.track({registration:{userid:"fox registration - id:"+as.getDisplayName()+" - email:"+as.getUserEmail()}});}if(!registrationResponse){showToConsole("[authSrv.register] No data returned from request.",true);return false;}if(registrationResponse.authentication.status==="ok"){$("#registration-error").hide();$("#registration-overlay").hide();as.getOverlayHtml("registration-thankyou-overlay");decreaseRefresh();authentication_service.onSuccessLogin();as.thirdPartyAPI.disqus.login(registrationResponse);as.thirdPartyAPI.idms.login(registrationResponse);as.thirdPartyAPI.fileMobile.login(registrationResponse);as.overlay.show("#registration-thankyou-overlay");$.scrollTo("#registration-thankyou-overlay");$("#clickToClose").focus();}else{var errorMsg=registrationResponse.authentication.message;as.showRecaptcha();$("#registration-error").html("We are sorry, we could not complete your registration. Please fix the error and try again. <br/> *"+errorMsg).show();$.scrollTo("#registration-error");}},error:function(XMLHttpRequest,message,errorThrown){as.showRecaptcha();$("#registration-error").html("We are sorry, we could not complete your registration. Please try again. <br> *"+message).show();$.scrollTo("#registration-error");}});},overlay:{init:function(action,target){target=$((target||"#registration-overlay"));var as=this;$(action).each(function(){$(action).unbind("click").click(function(){as.show(target);});});},show:function(target){target=$(target);var as=this;if(typeof increaseRefresh!=="undefined"){increaseRefresh();}target.find(".validate a.sprites").unbind("click");if($(".overlay-layer").size()===0){$("body").prepend('<div class="overlay-layer"></div>');}$(".overlay-layer").show();target.each(function(){var elm=$(this);elm.show().fixedBox();if($(window).height()<elm.height()){var scrollTop=$(document).scrollTop();var overlayTop=(target.css("top")).replace(/[a-z]/g,"");var abs=Math.abs(overlayTop)+scrollTop;elm.css({top:abs+"px",position:"absolute"});}elm.find(".field input").removeClass("error").attr("value","");elm.find(".validate a.sprites,.error-tip").hide();var usr=elm.find("#reg_user_name"),usrParent=usr.parent(),pwd=elm.find("#reg_password"),pwdParent=pwd.parent();if(usrParent.find("span.req-text").size()===0){usr.after('<span class="req-text req-user">5-15 characters, cannot be changed</span>');usrParent.focus(function(){elm.find(".req-user").remove();});}if(pwdParent.find("span.req-text").size()===0){pwd.after('<span class="req-text req-password">5-12 characters, no space, case-insensitive</span>');pwdParent.focus(function(){elm.find(".req-password").remove();});}});var close=target.find(".close").parent(),signUpReg=$(".sign_up_registration");close.unbind("click").removeAttr("onclick").click(function(){as.hide(target);return false;});target.find(".buttons input[type='reset']").click(function(){as.hide(target);return false;});signUpReg.click(function(){$(".overlay-layer").show();});},hide:function(target){if(typeof decreaseRefresh!=="undefined"){decreaseRefresh();}$(".overlay-layer").hide();$(target).hide();}},instantiateValidators:function(){var as=this;$.validator.addMethod("validChars",function(value){var i,result=true,iChars="!@#$%^&*()+=-[]\\';,./{}|\":<>?";for(i=0;i<value.length;i++){if(iChars.indexOf(value.charAt(i))!==-1){return false;}}return result;},"Please supply valid characters only.");$.validator.addMethod("strictEmail",function(value){return(value.match(/^([a-zA-Z0-9_.\-\+])+@([a-zA-Z0-9_.\-])+\.([a-zA-Z])+([a-zA-Z])+/)!==null)||(value==="");},"Please supply valid email characters only.");$.validator.addMethod("noSpaces",function(value){var result=true,strArr=[];if(typeof value==="string"&&value.split(" ").length>1){return false;}return result;},"Please remove the blank spaces.");$.validator.addMethod("validCharsName",function(value){var i,resultName=true,iChars='!@#$%^&*()\\+=[];,./{}|":<>?',iCharshp="-",iCharsap="'",counterhp=0,counterap=0;for(i=0;i<value.length;i++){if(iChars.indexOf(value.charAt(i))!==-1){return false;}if(iCharshp.indexOf(value.charAt(i))!==-1){counterhp=counterhp+1;}if(iCharsap.indexOf(value.charAt(i))!==-1){counterap=counterap+1;}}if(counterhp>1){return false;}if(counterap>1){return false;}return resultName;},"Please supply valid characters only.");$.validator.addMethod("isMaxYear",function(value){var result=true,d=new Date(),curr_year=d.getFullYear();if($("#reg_birth_year").val()>(curr_year-13)){return false;}return result;},"You must be at least 13 years old to register for this site.");$.validator.addMethod("zipRequired",function(value){var result=true;country=$("#reg_country").val();if(country==="United States"&&value===""){return false;}return result;},"Zip Code is required.");$.validator.addMethod("zipCheck",function(value){var result=true,regLocation=$("#reg_location");if($("#reg_country").val()==="United States"){regLocation.show();$.ajax({type:"GET",url:as.getRegistrationDataUrl,async:false,data:({zip:$("#reg_zip_code").val()}),dataType:"text",success:function(data,textStatus){if(data){var stateObj=as.createObjFromJSON(data);if(!stateObj){showToConsole("[authSrv.validator] No data returned from request.",true);return false;}var state=stateObj.state_for_zip;regLocation.val((state!=="")?state:"");result=false;}else{regLocation.val("");result=false;}},error:function(XMLHttpRequest,textStatus,errorThrown){regLocation.val("");}});result=(regLocation.val()!=="")?true:false;}else{regLocation.hide();}return result;},"Please enter a valid United States zip code.");},showRecaptcha:function(){var as=this;as.thirdPartyAPI.recaptcha.create();}};var ThirdPartyAPI=(function(){API=function(root){this.root=root;this.recaptcha=new RecaptchaAPI(this);this.disqus=new Disqus(this);this.idms=new IDMS(this);this.fileMobile=new FileMobile(this);};var RecaptchaAPI=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.recaptcha;};RecaptchaAPI.prototype={set:function(fn){var self=this,root=this.root,cfg=this._config;if(typeof Recaptcha!=="undefined"){if(typeof fn==="function"){fn();}}else{window.Recaptcha_Create_Instance=function(){$.loadAttempt(30,500,function(){return(typeof Recaptcha!=="undefined")?true:false;},function(){if(typeof fn==="function"){fn();}});};(function(){var e=document.createElement("script");e.src=cfg.url;e.type="text/javascript";e.async=true;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e);}());}},create:function(){var self=this,cfg=this._config,recaptcha_id=cfg.id,divId=cfg.elmId,settings=cfg.settings;self.set(function(){Recaptcha.create(recaptcha_id,divId,settings);});},getChallenge:function(){if(typeof Recaptcha!=="undefined"){return Recaptcha.get_challenge();}return false;},getResponse:function(){if(typeof Recaptcha!=="undefined"){return Recaptcha.get_response();}return false;}};var Disqus=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.disqus;this.set();};Disqus.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;if(cookieVal){unescape(cookieVal);}var trigger=function(){var data={dqs:cookieVal};root.requestLoginInfo({data:data,callback:function(obj){if(!obj){log("[api.disqus] Refresh service returned no hash value.");return false;}try{var hash=obj.authentication.dqs;self.cookie("set",hash);if(typeof fn==="function"){fn(hash);log("[api.disqus] Hash Refresh Initiated");}}catch(err){log("[api.disqus] Refresh service: "+err);}}});};var loggedOutCookie=function(){root.requestLogOut({callback:function(obj){if(!obj){log("[api.disqus] logout hash service returned no value.");return false;}try{var hash=obj.authentication.dqs;self.cookie("set",hash);fn(hash);}catch(err){log("[api.disqus] Refresh service: "+err);return false;}}});};var hasExpired=function(hasExpiredFn){var cDate=new Date();var curr={time:cDate,epoch:Math.round(cDate.getTime()/1000),expire:new Date(cDate.getTime()+(cfg.hash.expires*60*1000))};curr.expireEpoch=Math.round(curr.expire/1000);var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0],timestamp=arr[2];if(typeof timestamp==="undefined"){return getLoggedOut();}if(isNaN(timestamp)){return getLoggedOut();}if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}timestamp=parseInt(timestamp,10);var tDate=new Date(timestamp*1000);var ts={time:new Date(tDate),epoch:timestamp,expire:new Date(tDate.getTime()+(cfg.hash.expires*60*1000))};ts.expireEpoch=Math.round(ts.expire/1000);if(curr.epoch>=ts.expireEpoch){if(arr[0]!==cfg.hash.empty){return"yes";}}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;case"yes":log("[api.disqus] Hash Expired");trigger();break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var message=data.authentication.message;if(message.indexOf("|")>-1&&typeof $.ad!=="undefined"){regExpId=/([\w]+)[=]([\w,\s]+)$/;var idArr=message.match(regExpId);$.ad.track({login:{userid:"third party login - id:"+idArr[2].replace(/\s/,"")+", service:"+idArr[1]+".com"}});}var self=this;if(data.authentication.dqs){log("[api.disqus] Logging In");self.cookie("set",data.authentication.dqs);self.integrate({token:data.authentication.dqs,usr:self.cookie("get","p_UN")});}if(typeof fn==="function"){fn();}},logout:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.dqs){log("[api.disqus] Logging Out");self.cookie("set",data.authentication.dqs);self.integrate({token:data.authentication.dqs,usr:self.cookie("get","p_UN")});}if(typeof fn==="function"){fn();}},integrate:function(config){config=config||{};var cfg=this._config;var trigger=function(){$.loadAttempt(50,500,function(){return((window.fox&&fox.widgets&&typeof fox.widgets[cfg.widget]==="function")||(typeof window["FOX_"+cfg.widget]==="function"))?true:false;},function(){if(window.fox&&fox.widgets&&typeof fox.widgets[cfg.widget]==="function"){log("[api.disqus] Integrating ");fox.widgets[cfg.widget](config);}else{if(typeof window["FOX_"+cfg.widget]==="function"){log("[api.disqus] Integrating ");window["FOX_"+cfg.widget](config);}}});};$(document).ready(function(){trigger();});},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host="*."+root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",host:host,expires:exp,domain:root.domain};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":$.cookie(cName,null);break;case"get":cName=(data)?data:cName;return($.cookie(cName))?$.cookie(cName):false;}}};var IDMS=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.idms;this.set();};IDMS.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},integrate:function(config){config=config||{};var cfg=this._config,fnName=cfg.callback.login;if(typeof window[fnName]==="function"){window[fnName](config);}},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;var loggedOutCookie=function(){self.cookie("remove");fn(false);};var hasExpired=function(hasExpiredFn){var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0];if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.idms){log("[api.idms] Logging In");self.cookie("set",data.authentication.idms);self.integrate({token:data.authentication.idms,usr:self.cookie("get","p_UN")});}else{log("[api.idms] No IDMS authentication found.");}if(typeof fn==="function"){fn();}},logout:function(data,fn){var self=this,cfg=this._config,fnName=cfg.callback.logout;self.cookie("remove-full");if(typeof window[fnName]==="function"){window[fnName](cfg);}if(typeof fn==="function"){fn();}},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host=root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",expires:exp,domain:host};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":options={path:"/",domain:host};$.cookie(cName,null,options);break;case"remove-full":options={path:"/",domain:host};$.cookie(cName,null,options);$.cookie(cName,"BLAH");$.cookie(cName,null);break;case"get":cName=(data)?data:cName;var val=($.cookie(cName))?$.cookie(cName):false;return val;}}};var FileMobile=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.fm;this.set();};FileMobile.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},integrate:function(config){config=config||{};var cfg=this._config,fnName=cfg.callback.login;if(typeof window[fnName]==="function"){window[fnName](config);}},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;var loggedOutCookie=function(){self.cookie("remove");fn(false);};var hasExpired=function(hasExpiredFn){var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0];if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.fm){log("[api.idms] Logging In");self.cookie("set",data.authentication.fm);self.integrate({token:data.authentication.fm,usr:self.cookie("get","p_UN")});}else{log("[api.idms] No IDMS authentication found.");}if(typeof fn==="function"){fn();}},logout:function(data,fn){var self=this,cfg=this._config,fnName=cfg.callback.logout;self.cookie("remove-full");if(typeof window[fnName]==="function"){window[fnName](cfg);}if(typeof fn==="function"){fn();}},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host=root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",expires:exp,domain:host};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":options={path:"/",domain:host};$.cookie(cName,null,options);break;case"remove-full":options={path:"/",domain:host};$.cookie(cName,null,options);$.cookie(cName,"BLAH");$.cookie(cName,null);break;case"get":cName=(data)?data:cName;var val=($.cookie(cName))?$.cookie(cName):false;return val;}}};return API;}());var disablezip=window.disablezip=function(value){var zip=$("#reg_zip_code"),loc=$("#reg_location");if(value==="United States"){zip.removeAttr("readonly").css("background","#fff");zip.next(".validate").children(".sprites").hide();loc.val("");}else{zip.attr("readonly",true).css("background","#ddd").val("");loc.val(value);}};var formatField=window.formatField=function(id,value){var elm=$("#"+id);switch(id){case"reg_first_name":elm.val(value.join(""));break;case"reg_last_name":elm.val(value.join(""));break;default:elm.val(value.toLowerCase().replace(/\s+/gi,""));}};var formatTrim=window.formatTrim=function(id,value){$("#"+id).val(value.replace(/\s+/gi,""));};var isNumberKey=window.isNumberKey=function(evt){var charCode=(evt.which)?evt.which:evt.keyCode;return(charCode>31&&(charCode<48||charCode>57))?false:true;};var increaseRefresh=window.increaseRefresh=function(){if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}else{$("meta[name='refresh'],meta[http-equiv='refresh']").each(function(){var item=$(this),refresh=item.attr("content"),orig=(typeof item.attr("content")!=="undefined")?refresh:false;item.data("RefreshOrig",orig);item.attr("content","7200");});}};var decreaseRefresh=window.decreaseRefresh=function(){if(typeof ew_disableRefresh==="function"){ew_enableRefresh();}else{$("meta[name='refresh'],meta[http-equiv='refresh']").each(function(){var item=$(this),orig=item.data("RefreshOrig");if(orig){item.attr("content",orig);}});}};var showToConsole=function(str,force){force=force||false;var search=(window.location.search).substr(1);if(search.length>0){var x,pairs=search.split("&"),valuePair={};for(x=0;x<pairs.length;x++){var split=pairs[x].split("=");valuePair[split[0]]=split[1];}if(valuePair.stc==="y"||force){if(typeof window.console==="object"){console.log(str);}}}};var log=showToConsole;(function(){function d(c){return typeof c==="function"?!0:!1;}var f=function(){var c,b=arguments;if(b.length===0){return !1;}var a={attempt:0,timeout:500};if(b.length===1&&typeof b[0]==="object"){for(c in b[0]){a[c]=b[0][c];}if(a.callback){c=a.callback;}else{return !1;}if(!c.check||!c.success){return !1;}else{a._check=c.check,a._success=c.success;}if(c.timedOut){a._timeout=c.timedOut;}}else{if(!isNaN(b[0])&&!isNaN(b[1])&&d(b[2])&&d(b[3])){a.attempt=b[0];a.timeout=b[1];a._check=b[2];a._success=b[3];if(b[4]){a._timeout=b[4];}if(b[5]){a._abort=b[5];}}else{if(d(b[0])&&d(b[1])){a._check=b[0];a._success=b[1];if(b[2]){a._timeout=b[2];}if(b[3]){a._abort=b[3];}}else{return !1;}}}if(!d(a._check)||!d(a._success)){return !1;}if(!d(a._timeout)){a._timeout=function(){};}if(isNaN(a.timeout)){return !1;}else{a.timeout=parseInt(a.timeout,10);}if(isNaN(a.attempt)){return !1;}else{a.attempt=parseInt(a.attempt,10);}var e=!1,g=!1;if(a.attempt&&a.timeout){var f=function(){g?clearTimeout(e):a._check()?(a._success(),clearTimeout(e)):a.attempt>0?e=setTimeout(function(){f();},a.timeout):a._timeout();a.attempt--;};f();}else{e=setInterval(function(){g?clearInterval(e):a._check()&&(a._success(),clearInterval(e));},a.timeout);}return{abort:function(){g=!0;}};};if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:f});}else{if(!window.loadAttempt){window.loadAttempt=f;}}})();}(jQuery));var FOX_Janrain_Auth_TPL=(function(){var a='<div style="display:none;" id="resendVerification">    <h1>Resend Email Verification</h1>    <div class="hr"></div>    <p>To sign in you must verify your email address. Fill out the form below and we\'ll send you an email to verify.</p>    {* #resendVerificationForm *}        {* resendVerification_emailAddress *}        <div class="capture_fox_buttoncol">            {* newPasswordFormButton *}        </div>     {* /resendVerificationForm *}</div><div style="display:none;" id="resendVerificationSuccess">  <div style="display:none;" id="postLoginScreen1">      <h1>Please change your display name.</h1>      <p>Your Display Name is unavailable.</p>      {* #postLoginForm1 *}      {*postLogin_displayName *}      <div align="right">{* postLogin_acceptButton *}</div>      {* /postLoginForm1 *}  </div>    <h1>Your Verification Email Has Been Sent</h1>    <div class="hr"></div>    <p>Check your email for a link to reset your password.</p>    <a href="#" data-capturescreen="signIn" class="capture_btn capture_primary">Sign in</a></div><div style="display:none;" id="resetPasswordUserSuccess">            <h1>Your password has been changed</h1>            <div class="hr"></div>           <p>Password has been successfully updated.</p>            <div class="capture_textRight">                <p><a href="#" data-capturescreen="signIn" class="capture_btn capture_primary">Sign in</a></p>            </div>        </div><div style="display:none;" id="resetPassword">    <h1>Please enter your email address and we\'ll send you a new password.</h1>    <div class="hr"></div>    {* #forgotPasswordForm *}        {* forgotPassword_emailAddress *}        {* errorMessages *}        {* forgotPassword_sendButton *}    {* /forgotPasswordForm *}</div><div style="display:none;" id="resetPasswordSuccess">    <h1>Reset your password</h1>     <div class="hr"></div>    <p>Please reset your password.</p>    {* #resetPasswordForm *}        {* newpassword *}        {* newpasswordConfirm *}          <div class="capture_textRight">             {* newPasswordFormButton *}           </div>    {* /resetPasswordForm *}</div><div style="display: none" id="registrationVerify">            <h2>Sorry we could not verify that email address.</h2>            <p>Please resend verification.</p>        </div><div style="display: none" id="registrationVerified">    <h2>Thanks for verifying your email address</h2>    <p>You will be redirected to your new user profile in <span id="redirectTime">10 seconds</span></p></div><div style="display:none;" id="editProfile">           <div id="accounts-header">              <ul>                 <li id="account-tab" class="active tabs"><a href="#">Account</a></li>                 <li id="ureport-pro-tab" class="tabs"><a href="#">uReport</a></li>                 <li id="ureport-act-tab" class="tabs"><a href="#">Activity</a></li>              </ul>           </div>           <div id="account-wrap" class="wrap">                {* savedProfileMessage *}                {* #photoManager {"custom": true} *}                    {| mainDiv |}                         {| profileImage |}                        <div class="capture_fox_photoLinks">                          <h1>{* public_displayName *}</h1>                          <div id="capture_profile_saved" style="display:none;"><span class="capture_fox_profile_saved"></span>Your profile was last saved <span class="capture_fox_alert_callout" id="capture_alert_callout">just now</span></div>                        {| photoLinks |}                        <span class="janrain_traditional_account_only">                          <a href="#" data-capturescreen="changepassword" class="capture_fox_change_password">Change Password</a>                        </span>                        <div class="cancel-button"><span></span>Back</div>                      </div><div class="badge-stats"><div></div><div class="stats"><ul><li><span>My Status</span><span></span></li><li><span>Current Points</span><span></span></li><li><span>Next Level</span><span></span><span class="next-level"></span></li></ul><div class="bar-cont"><div class="bar"><span></span></div><span></span><a href="#">How does it work?</a></div></div></div>                    {| closeDiv |}                    <!-- hidden crop form -->                    <div style="display: none;">                    {| editFormOpen |}                    <div class="capture_footer">                    {| editSubmitButton |}                      <p>or</p>                    {| chooseDifferentPhotoLink |}                    </div>                    {| editFormClose |}                    </div>                    <!-- hidden upload form -->                    <div style="display: none;">                    {| uploadFormOpen |}                    {| uploadFileField |}                    {| uploadSubmitButton |}                    {| photoChooserErrors |}                    {| uploadFormClose |}                    </div>                    <!-- hidden upload screen -->                    <div style="display: none;">                        <div id="{| uploadPhotoScreenId |}" class="janrain-capture-ui capture-ui-content">                            <div class="capture_header">                                <h1>Change Avatar</h1>                            </div>                            <div id="{| prefixFieldName |}_profile_pic_upload" class="{| profilePicClass |}capture_profile_pic_upload capture_default">                                {| uploadImage |}                            </div>                            <div id="{| prefixFieldName |}_profile_pic_uploadform_container" class="capture_uploadPhoto_container">                            </div>                        </div>                    </div>                    <!-- hidden edit photo screen -->                    <div style="display: none;">                        <div id="{| editPhotoScreenId |}" class="janrain-capture-ui capture-ui-content">                            <div class="capture_header">                                <h1>Change Avatar</h1>                            </div>                            <div class="capture_fox_clearfix">                                <div id="{| prefixFieldName |}_profile_pic_editPhoto_container" class="capture_editPhoto_container">                                    <h2><span class="capture_fox_crop_icon"></span>Crop your avatar</h2>                                    <div class="janrainCrop_container_dashed">{| cropImage |}</div>                                </div>                                 <div class="{| profilePicClass |}profile_pic_edit_container">                                    <h2><span class="capture_fox_preview_icon"></span>Avatar Preview</h2>                                    <div id="{| prefixFieldName |}_profile_pic_edit" class="{| profilePicClass |}capture_profile_pic_edit capture_default">                                        {| editImage |}                                    </div>                                </div>                              </div>                       </div>                    </div>                {* /photoManager *}                {* publicProfileLink *}                <h2>Profile</h2>                <div class="hr"></div>                    <div class="capture_fox_editProfile">                    {* editProfileForm *}                        {* edit_firstName *}                        {* edit_lastName *}                        {* edit_email *}                        {* edit_country *}                        {* edit_address1 *}                        {* edit_address2 *}                        {* edit_city *}                        {* edit_state *}                        {* edit_zip *}                        {* edit_birthdate *}                        {* edit_gender *}                        {* politicalViews *}                      <div class="newsletter-container">                         <h2>Newsletter Subscriptions</h2>                         <div class="hr"></div>                         <div class="news-sub-form">                            <label for="top-headline"><input type="checkbox" name="" id="foxnewsletterIDList_71" value="" />Fox News Top Headlines</a></label>                            <label for="greta-wire"><input type="checkbox" name="" id="foxpromosIDList_139" value="" />GetaWire Alerts</a></label>                            <label for="fn-breaking-alerts"><input type="checkbox" name="" id="foxnewsIDList_35" value="" />Fox News Breaking News Alerts</a></label>                            <label for="bo-opinion"><input type="checkbox" name="" id="foxnewsletterIDList_96" value="" />Best of Opinion</a></label>                            <label for="fb-breaking-alerts"><input type="checkbox" name="" id="foxbusinessIDList_32" value="" />Fox Business Breaking News Alerts</a></label>                            <label for="pow-pol"><input type="checkbox" name="" id="foxnewsletterIDList_173"  value="" />Daily Politics</a></label>                            <label for="ceo-news"><input type="checkbox" name="" id="foxnewsletterIDList_90" value="" />CEO Newsbrief</a></label>                            <label for="fox-411"><input type="checkbox" name="" id="foxnewsletterIDList_106" value="" />Fox 411</a></label>                            <label for="scitech-geek"><input type="checkbox" name="" id="foxnewsletterIDList_153" value="" />SciTech Geek Sheet</a></label>                            <label for="fb-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_151" value="" />Fox Business Morning Headlines</a></label>                            <label for="health-weekly"><input type="checkbox" name="" id="foxnewsletterIDList_160" value="" />Health Weekly Dose</a></label>                            <label for="most-pop"><input type="checkbox" name="" id="foxnewsletterIDList_69" value="" />Fox Business Most Popular</a></label>                            <label for="latino-rep"><input type="checkbox" name="" id="foxnewsletterIDList_178" value="" />Latino Report</a></label>                            <label for="sbc-week"><input type="checkbox" name="" id="foxnewsletterIDList_108" value="" />Small Business Center Weekly Report</a></label>                            <label for="fn-mag"><input type="checkbox" name="" id="foxpromosIDList_174" value="" />Fox News Magazine</a></label>                            <label for="fn-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_144" value="" />Fox News Morning Headlines</a></label>                            <label for="fan-scoop"><input type="checkbox" name="" id="foxpromosIDList_43" value="" />Fox Fan Scoop</a></label>                            <label for="fn-fired"><input type="checkbox" name="" id="foxnewsletterIDList_99" value="" />Fox Nation Fired Up</a></label>                         </div>                      </div>                      <h2>Commenting Notifications</h2>                      <div class="hr"></div>                      {* table *}                      <div class="capture_fox_clearfix">                        <div class="capture_right capture_checkbox">                          {* autofollow_conversations *}                        </div>                      </div>                      <div class="hr"></div>                                            <h2>Linked Accounts</h2>                      <div class="hr"></div>                          {* linkedAccounts *}                          {* linkAccountContainer *}                              <h1>Linked Accounts</h1>                              <div class="hr"></div>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'facebook\')" class="capture_secondary capture_fox_social_btn capture_facebook"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Facebook" height="24" width="24" /></span>&nbsp;&nbsp;Facebook</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'google\')" class="capture_secondary capture_fox_social_btn capture_google"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Google" height="24" width="24" /></span>&nbsp;&nbsp;Google</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'twitter\')" class="capture_secondary capture_fox_social_btn capture_twitter"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Twitter" height="24" width="24" /></span>&nbsp;&nbsp;Twitter</a>                               <a href="#" onclick="janrain.engage.signin.triggerFlow(\'yahoo\')" class="capture_secondary capture_fox_social_btn capture_yahoo"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Yahoo" height="24" width="24" /></span>&nbsp;&nbsp;Yahoo</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'linkedin\')" class="capture_secondary capture_fox_social_btn capture_linkedin"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="LinkedIn" height="24" width="24" /></span>&nbsp;&nbsp;Linkedin</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'aol\')" class="capture_secondary capture_fox_social_btn capture_aol"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="AOL" height="24" width="24" /></span>&nbsp;&nbsp;AOL</a>                          {* /linkAccountContainer *}                      <div class="hr"></div>                        <div class="capture_form_item">                          {* submitButton *}                        </div>                    {* /editProfileForm *}                      </div>                  </div>                      <div class="profile-footer">                         <div class="fox-logo">                         </div>                         <p>&copy;2012 FOX News Network, LLC. All rights reserved.</p>                         <p>This material may not be published, broadcast, rewritten, or redistributed.</p>                         <p>All market data delayed 20 minutes.</p>                         <p><a href="http://www.foxnews.com/about/privacy-policy" target="_blank">Privacy</a> - <a href="http://www.foxnews.com/about/terms-of-use" target="_blank">Terms</a> - <a href="http://help.foxnews.com/index.html" target="_blank">FAQ</a></p>                      </div><div id="how-to" ><h1>How does it work?</h1><p>With the points you earn you will be rewarded with increases in rank and recognition within the Fox News community.</p><div class="key"><span>Levels</span><span>Points required</span><span>Get more points:</span></div><div class="col"><ul><li> <div></div> <span>Rookie</span> <strong>0</strong> </li><li> <div></div> <span>Apprentice</span> <strong>250</strong> </li><li> <div></div> <span>Specialist</span> <strong>1,500</strong> </li><li> <div></div> <span>Commentator</span> <strong>5,000</strong> </li><li> <div></div> <span>Pundit</span> <strong>10,000</strong> </li><li> <div></div> <span>Analyst</span> <strong>30,000</strong> </li><li> <div></div> <span>Advisor</span> <strong>60,000</strong> </li><li> <div></div> <span>Captain</span> <strong>1,000,000</strong> </li></ul></div><div class="col"><a href="http://www.foxnews.com/alerts/subscribe.html" target="_blank">Subscribe to our newsletters</a><a href="http://ureport.foxnews.com/" target="_blank">Submit a uReport</a><a href="http://video.foxnews.com/" target="_blank">Watch the latest videos</a></div><a style="position: absolute; cursor: pointer; z-index: 1000;" href="#" class="janrain_modal_closebutton"></a></div>              </div>        <div style="display:none;" id="newPasswordSuccess" class="capture_med_footer">              <h1>You did it!</h1>              <div class="hr"></div>              <p>Your password has been successfully changed.</p>            <div class="capture_footer">                <a href="#" class="capture_btn capture_secondary">Close</a>            </div>        </div>        <div style="display:none;" id="changepassword">            <h1>Change Your Password</h1>            <div class="hr"></div>            {* newPasswordForm *}                  {* oldpassword *}                  {* newpassword *}                  {* newpasswordConfirm *}                  <div class="capture_textRight">                     <a href="#" data-capturescreen="forgotPassword">I forgot my password</a>                     {* newPasswordFormButton *}                   </div>            {* /newPasswordForm *}        </div><div style="display: none;" id="publicProfile">        <h1>Member Profile</h1><div class="make-acc">Don\'t have an account? <a onclick="window.janrain.capture.ui.renderScreen(\'signIn\')">Create One Now</a></div>        <div class="capture_profile_section">            <div class="capture_profile_pic capture_default inline">                <div id="profile_pic" class="capture_default">                    {* profilePhotoCustom *}                </div>            </div>        </div>        <div class="capture_profile_section">             <h1 class="capture_display_name">{* public_displayName *}</h1>            {* created *}            {* public_city *}            {* public_state *}            {* public_country *}            {* public_birthdate *}            {* public_gender *}        </div>        <div class="capture_data_item">          {* slider_public *}        </div><div class="rank"><h2>Rank</h2><div></div><span>advisor</span><img src="//global.fncstatic.com/static/v/all/img/loader-trans-3.gif" /></div>        <div class="user-stats">        <h2>User Stats</h2>        <div class="hr"></div>		  <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left"><a href="http://www.foxnews.com/community/user/profile/public#{* public_displayName *}">Comments</a></h3>            <h2 class="capture_right" id="fox_lf_comments" ><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left"><a href="http://www.foxnews.com/community/user/profile/public?tab=ureport#{* public_displayName *}">uReports</a></h3>            <h2 class="capture_right" id="fox_ur_reports"><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left">Likes</h3>            <h2 class="capture_right" id="fox_lf_likes" ><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left">Shares</h3>            <h2 class="capture_right" id="fox_jr_shares" >{* public_shares *} </h2>        </div>        </div></div><div style="display:none;" id="signIn">            <h1>Sign In</h1>            <div class="capture_signin">                <h2>With your existing account</h2>                <div class="hr"></div>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'facebook\')" class="capture_secondary capture_fox_social_btn capture_facebook"><span class="janrain-provider-icon-24 janrain-provider-icon-facebook-custom"></span>&nbsp;&nbsp;Facebook</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'google\')" class="capture_secondary capture_fox_social_btn capture_google"><span class="janrain-provider-icon-24 janrain-provider-icon-google-custom"></span>&nbsp;&nbsp;Google</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'twitter\')" class="capture_secondary capture_fox_social_btn capture_twitter"><span class="janrain-provider-icon-24 janrain-provider-icon-twitter-custom"></span>&nbsp;&nbsp;Twitter</a>                         <a href="#" onclick="janrain.engage.signin.triggerFlow(\'yahoo\')" class="capture_secondary capture_fox_social_btn capture_yahoo"><span class="janrain-provider-icon-24 janrain-provider-icon-yahoo-custom"></span>&nbsp;&nbsp;Yahoo</a>                       <a href="#" onclick="janrain.engage.signin.triggerFlow(\'linkedin\')" class="capture_secondary capture_fox_social_btn capture_linkedin"><span class="janrain-provider-icon-24 janrain-provider-icon-linkedin-custom"></span>&nbsp;&nbsp;Linkedin</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'aol\')" class="capture_secondary capture_fox_social_btn capture_aol"><span class="janrain-provider-icon-24 janrain-provider-icon-aol-custom"></span>&nbsp;&nbsp;AOL</a>                <div class="capture_fox_clearfix">                    <h2 class="capture_left">With a Fox News account</h2>                     <a href="#" data-capturescreen="traditionalRegistration" class="capture_right capture_fox_marginTop">Sign Up &rarr;</a>                </div>                <div class="hr"></div>                    {* #userInformationForm *}                        {* traditionalSignIn_emailAddress *}                        {* traditionalSignIn_password *}                        <div class="capture_fox_buttoncol">                             <a href="#" data-capturescreen="forgotPassword">I forgot my password</a>                            {* traditionalSignIn_signInButton *}                        </div>                    {* /userInformationForm *}                    <p>Find answers to your questions about the Fox News Community in our <a href="http://help.foxnews.com/index.html" target="_blank">FAQs</a>.</p>            </div>        </div>        <div style="display:none;" id="returnSocial">                <h1>Sign In</h1>                <div class="hr"></div>                <h2>Welcome back, {* welcomeName *} (<a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">not you?</a>)</h2>                <div class="capture_fox_clearfix">                    <h2 class="capture_left">Sign In with your account</h2>                     <div class="capture_right capture_fox_marginTop"><a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">Use another account &rarr;</a></div>            </div>                <div class="hr"></div>                    <a href="#" onclick="janrain.engage.signin.triggerFlow(\'{* returnProvider *}\')" class="capture_secondary capture_fox_social_btn capture_{* returnProvider *}"><span class="janrain-provider-icon-24 janrain-provider-icon-{* returnProvider *}-custom"></span>&nbsp;&nbsp;{* returnProvider *}</a>                <div class="capture_fox_clearfix">                    <a href="http://www.foxnews.com/about/privacy-policy" target="_blank" class="capture_right">Privacy Policy</a>            </div>            </div>                <div style="display:none;" id="returnTraditional">            <h1>Sign In</h1>            <div class="hr"></div>            <h2>Welcome back, <span id="displayNameData"></span>  (<a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">not you?</a>)</h2>            <div class="capture_fox_clearfix">                <h2 class="capture_left">Sign in with your account</h2>                <div class="capture_right capture_fox_marginTop"><a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">Use another account &rarr;</a></div>            </div>            <div class="hr"></div>                        {* #userInformationForm *}                            {* traditionalSignIn_emailAddress *}                            {* traditionalSignIn_password *}                <div class="capture_fox_buttoncol">                                {* traditionalSignIn_signInButton *}                            </div>                        {* /userInformationForm *}<div class="capture_fox_clearfix">                    <a href="http://www.foxnews.com/about/privacy-policy" target="_blank" class="capture_right">Privacy Policy</a>            </div>                    </div>        <div style="display:none;" id="socialRegistration">                <h1>You\'re Almost Done!</h1>                <p>Complete the following form to submit your registration.</p>                <div class="hr"></div>                {* #socialRegistrationForm *}                    {* socialRegistration_firstName *}                    {* socialRegistration_lastName *}                    {* socialRegistration_displayName *}                    {* socialRegistration_emailAddress *}                    {* registration_birthday *}                    <h2>Terms of Service</h2>                    <div class="hr"></div>                    {* agreeToTerms *}                    <div class="capture_textRight">                        {* socialRegistration_button *}                </div>                {* /socialRegistrationForm *}        </div>        <div style="display:none;" id="traditionalRegistration">                <h1>Create a Fox News Account</h1>                <p>Already have an account? <a href="#" data-capturescreen="signIn">Sign In &rarr;</a></p>                <div class="hr"></div>                {* #registrationForm *}                    {* traditionalRegistration_firstName *}                    {* traditionalRegistration_lastName *}                    {* traditionalRegistration_displayName *}                    {* traditionalRegistration_emailAddress *}                    {* traditionalRegistration_password *}                    {* traditionalRegistration_passwordConfirm *}                    {* registration_birthday *}                    <div class="capture_fox_clearfix">                        <h2 class="capture_left">Subscribe to Fox News Email Newsletters</h2>                         <div class="capture_right capture_fox_marginTop">Optional</div>                    </div>                    <div class="hr"></div>                          <div class="news-sub-form-reg">                            <label for="fn-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_144" value="" />Fox News Morning Headlines</a></label>                            <label for="top-headline"><input type="checkbox" name="" id="foxnewsletterIDList_71" value="" />Fox News Top Headlines</a></label>                            <label for="fb-breaking-alerts"><input type="checkbox" name="" id="foxpromosIDList_32" value="" />Fox Business Breaking Alerts</a></label>                            <label for="fn-breaking-alerts"><input type="checkbox" name="" id="foxnewsIDList_35" value="" />Fox News Breaking Alerts</a></label>                          </div>                    <h2>Security Check</h2>                    <div class="hr"></div>                    {* captcha *}                    {* agreeToTerms *}                    <div class="capture_textRight">                    {* createAccountButton *}                    </div>                {* /registrationForm *}        </div>                <div style="display:none;" id="registrationSuccess">                <h1>Thank you for registering!</h1>                <div class="hr"></div>                <p>Once you confirm your email address you will be able to access commenting and exclusive content on all the Fox News Digital websites!</p>                <h2>Verify your email</h2>                <div class="hr"></div>                <p>We just sent an email to your account to verify your email address. Check your inbox and click on the link to confirm your account.</p>                <!--                 <p>You are also signed up for the following newsletters:</p>                <ul>                    <li>FPO</li>                    <li>FPO</li>                </ul>                -->                <div class="capture_textRight">                    <a href="#" onclick="janrain.capture.ui.modal.close()" class="capture_btn capture_primary">Close</a>                </div>        </div>        <div style="display:none;" id="forgotPassword">            <h1>Forgot My Password</h1>            <div class="hr"></div>            <h2>Enter your current email address, and we\'ll send you instructions to create a new password.</h2>            {* #forgotPasswordForm *}                {* forgotPassword_emailAddress *}                <div class="capture_textRight">                    {* forgotPassword_sendButton *}                </div>            {* /forgotPasswordForm *}        </div>        <div style="display:none;" id="forgotPasswordSuccess">            <h1>Forgot My Password</h1>            <div class="hr"></div>            <div class="capture_fox_clearfix">              <h2 class="capture_left">Success! You should receive an email shortly with instructions to change your password.</h2>              <a href="#" class="capture_btn capture_primary capture_right" onclick="janrain.capture.ui.modal.close()">Close</a>            </div>            </div><div style="display:none;" id="mergeAccounts">{* mergeAccounts {"custom": true} *} <h1>Create a Fox News Account</h1><div class="hr"></div><h2>It looks like you\'ve been here before.<br /><br>We already have an account for: <br /><span class="capture_fox_alert">{| current_emailAddress |}</span></h2><h2>Connect this session with your existing account</h2><div class="hr"></div><button id="capture_mergeAccounts_mergeAccounts_connectButton" name="mergeAccounts_connectButton" data-capturefield="mergeAccounts_connectButton" type="button" class="capture_secondary capture_fox_social_btn"><span class="janrain-provider-icon-24 janrain-provider-icon-{| existing_provider_lowerCase |}-custom"></span><span class="janrain-provider-icon-24 janrain-provider-icon-{| current_provider_lowerCase |}-custom"></span>&nbsp;&nbsp; Connect</button><a href="#" data-capturescreen="forgotPassword">Forgot Password?</a><br><h2>Not You? Continue creating a new account</h2><div class="hr"></div><button name="mergeAccounts_createButton" data-capturefield="mergeAccounts_createButton" type="submit" class="capture_secondary capture_fox_social_btn capture_{| current_provider_lowerCase |}" id="capture_mergeAccounts_mergeAccounts_createButton" style="display:none"><span class="janrain-provider-icon-24 janrain-provider-icon-{| current_provider_lowerCase |}-custom"></span>&nbsp;&nbsp;{| current_provider |}</button></div>        <div style="display:none;" id="traditionalAuthenticateMerge">            <h1>Sign in to complete account merge</h1>            <div class="hr"></div>            {* #tradAuthenticateMergeForm *}                {* traditionalSignIn_emailAddress *}                {* traditionalSignIn_password *}                <div class="capture_fox_buttoncol">                    {* traditionalSignIn_signInButton *}					  <a href="#" data-capturescreen="forgotPassword">Forgot Password?</a><br>        		  </div>             {* /tradAuthenticateMergeForm *}        </div>';return a;}());window.FOX_AuthJanrain_CONFIG=(function(d){function b(f){return !!(d.location.hostname.indexOf(f)>-1);}var c=true,a={},e=d.location.hash;d.FOX_Auth_live_settings=(typeof d.FOX_Auth_live_settings==="undefined")?false:d.FOX_Auth_live_settings;if(!c&&(e.indexOf("live")>-1||d.FOX_Auth_Live_Settings)){c=true;}else{if(e.indexOf("dev")>-1){c=false;}else{if(b("pvw-dev")){c=false;}}}a.live=c;if(c){a={livefyre:{network:"foxnewsprod.fyre.co",domain:"zor.livefyre.com",jsURL:"zor.livefyre.com/wjs/v3.0/javascripts/livefyre.js",siteid:"310256",siteURL:"http://www.foxnews.com/",profile:"http://quill.foxnews-1.fyre.co/profile/",activityAPI:"http://www.foxnews.com/feeds/app/user/comments?callback={cb}&uuid={uuid}",activityActiveAPI:"http://www.foxnews.com/feeds/app/user/comments/active?callback={cb}&uuid={uuid}",activityPublicRequestAPI:"http://www.foxnews.com/feeds/app/user/comments?callback={cb}&uuid={uuid}&userInfoFormat=true",apiProfile:"http://foxnews-1.fyre.co/api/v1.1/private/capture/profile_updated/?jrtoken=",el:"livefyre_comment_stream"},janrain:{appUrl:"https://login.foxnews.com",apiURL:"https://signin.foxnews.com/",jsURL:"d16s8pqtk4uodx.cloudfront.net/foxnews-prod/load.js",appId:"macbnjrmzryj7utchqmtukf3se",clientId:"t6emets785a92rr2zc5wkbnrsy59kyny",captureServer:"https://signin.foxnews.com",federateServer:"https://sso.foxnews.com",recaptchaPublicKey:"6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP",backplaneBusName:"fox-news",publicRequestAPI:"http://www.foxnews.com/feeds/app/user/photos?username="},ureport:{ureportURL:"http://ureportcustomfeed.projects.fm/ureport_activity?uid=[UREPORT_USER_ID]",idLookup:"http://www.foxnews.com/feeds/app/ureport?callback=userNameLookup&username=[UREPORT_USER_ID]",url:"http://www.foxnews.com/auth/info?callback="},whatcounts:{subdomain:"www",subscribe:"http://www.foxnews.com/feeds/app/newsletters/",unsubscribe:"http://www.foxnews.com/feeds/app/newsletters/"}};a.styleUrl=["http://global.fncstatic.com/static/v/all/css/janrain.orig.css"];a.editProfile="http://www.foxnews.com/community/user/profile/edit";}else{a={livefyre:{network:"foxnewsprod.fyre.co",domain:"zor.livefyre.com",jsURL:"zor.livefyre.com/wjs/v3.0/javascripts/livefyre.js",siteid:"310256",profile:"http://quill.foxnews-1.fyre.co/profile/",siteURL:"http://www.foxnews.com/",activityAPI:"http://v8-qa.foxnews.com/feed/apps/user/comments/{uuid}.json?callback={cb}",apiProfile:"http://foxnews-1.fyre.co/api/v1.1/private/capture/profile_updated/?jrtoken=",el:"livefyre_comment_stream"},janrain:{appUrl:"https://fox-news-dev.rpxnow.com",apiURL:"https://fox-news.dev.janraincapture.com/",jsURL:"d16s8pqtk4uodx.cloudfront.net/foxnews/load.js",appId:"n49qmf6h6ssvuvnevbxgj88h97",clientId:"c5dr2na59wh3bmna2aqgdnbzapeffy7q",captureServer:"https://fox-news.dev.janraincapture.com",federateServer:"https://fox-news-dev.janrainsso.com",recaptchaPublicKey:"6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP",backplaneBusName:"fox-news-dev",publicRequestAPI:"http://www.foxnews.com/feeds/app/user/photos?username="},ureport:{ureportURL:"http://ureportcustomfeed.projects.fm/ureport_activity?uid=[UREPORT_USER_ID]",idLookup:"http://www.foxnews.com/feeds/app/ureport?callback=userNameLookup&username=[UREPORT_USER_ID]",url:"http://www.foxnews.com/auth/info?callback="},whatcounts:{subdomain:"v8-qa",subscribe:"http://v8-qa.foxnews.com/feeds/app/newsletters/",unsubscribe:"http://v8-qaportala.lan.vig.tpa.foxnews.com:8080/foxnewsletter/unsubscribe.json"}};a.styleUrl=["http://global.fncstatic.com/static/v/all/css/janrain.orig.css"];a.editProfile="http://global.fncstatic.com/static/v/all/html/edit-profile.html";}if(d.location.host.indexOf("ureport")>-1){a.xdcomm=d.location.protocol+"//"+location.host+"/xdcomm.html";a.logout=d.location.protocol+"//"+location.host+"/logout.html";}else{a.xdcomm=d.location.protocol+"//"+location.host+"/static/v/all/html/xdcomm.html";a.logout=d.location.protocol+"//"+location.host+"/static/v/all/html/logout.html";}a.templateUrl="/static/v/all/html/auth-tpl.html";return a;})(window);window.AuthenticationService_Janrain=(function(g,n){function F(J){return !!(n.location.hostname.indexOf(J)>-1);}if(!n.console){n.console={log:function(){},error:function(){}};}var l=function(){var K=false;if(K&&n.console){try{console.log.apply(console,arguments);}catch(J){console.log("err",J,arguments);}}};var y=(function(){var J=function(L){var K,M,N={},O=this;for(K=0,M=L.length;K<M;K+=1){L[K][2].prototype=L[K][1];N[L[K][0]]=new L[K][2];}for(var P in N){J.prototype[P]=N[P];}};return J;})();var D=function(){},m=function(){},q=function(){},B=function(){},f=function(){},A=function(){},H=function(){},k=function(){},d=function(){},e=function(){},u=function(){},c=function(){},p=function(){},j={},C={},G={},z={},i={},w={},h={},o={},s={},t={},b={},r={},E={};var I=n.FOX_AuthJanrain_CONFIG;f=function(){};w={loadExtJs:function(N,P,O,L){var M=document.createElement("script"),J;M.type="text/javascript";M.id=P||"";M.async=true;M.setAttribute("type","text/javascript");if(L==="share"){M.src="http://widget-cdn.rpxnow.com/js/lib/fox-news/widget.js";}else{M.src=document.location.protocol+"//"+((L==="www")?"www.":"")+N;}if(typeof O==="function"){M.onload=M.onerror=M.onreadystatechange=function(Q){if((!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){O();}};}var K=document.getElementsByTagName("script")[0];K.parentNode.insertBefore(M,K);},assert:function(J,K){return(typeof J===K)?true:false;},domTest:function(J){return(J.length!=0)?true:false;},getDomain:function(){var M=n.location,K=M.hostname,L=M.protocol,J=K.split(".");return"www."+J[(J.length-2)]+"."+J[(J.length-1)];}};c=function(){};r={setDomReady:function(K){var M=g("#authentication"),N=g("#account"),O=N.find(".user-options"),J=g("body"),L=g("#section-content");var P={acc:N,body:J,user:N.find(".username"),login:M.find(">li:last-child"),authen:M,name:O.find("span"),register:M.find(".first"),noAccount:M,userOptions:O,accountNav:N.find(".encapsulate"),profile:O.find("ul > li.first"),logout:O.find("ul > li:last-child"),hasAccount:N.find(".username"),publicProfile:function(){return{likes:g("#fox_lf_likes"),shares:g("#fox_jr_shares"),ureport:g("#fox_ur_reports"),comments:g("#fox_lf_comments")};},whatCounts:function(){return g(".news-sub-form");},uReport:function(){var Q=g("#account");return{acc:Q,redBtn:g("#main").find(".red-butt ")};},sectionContent:L};AUTH_Manager.onReady("capture",function(){});K(P);}};k=function(){};z={token:null,template:null,getToken:function(){var J=this;try{if(n.localStorage){J.token=localStorage.getItem("janrainCaptureToken");}else{}}catch(K){l(K);}},classLogin:"capture_modal_open",janrainFlow:false,state:{janrain:false,ureport:false,livefyre:false,template:false,backplane:false,badgeville:false},dataConfig:{janrain:{clientId:"c5dr2na59wh3bmna2aqgdnbzapeffy7q"},livefyre:{},ureport:{},whatcounts:{}},loadTemplate:function(){var V=this,K,O,Q,S=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","registrationVerify","registrationVerified","editProfile"],J=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess"],N=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","signIn","registrationVerify","registrationVerified","returnTraditional","returnSocial","forgotPasswordSuccess"];O=document.createElement("div");O.id="templateHolder";Q=(n.FOX_Janrain_Auth_TPL)?true:false;if(Q){var T=g(FOX_Janrain_Auth_TPL);if(V.janrainFlow==="profileFlow"||V.janrainFlow==="publicFlow"){r.setDomReady.sectionContent.append(O);for(var R=0,M=T.length;R<M;R+=1){for(var P=0,L=J.length;P<L;P+=1){if(S[P]===T[R].id){T[R].innerHTML="";T[R].id="";}}}g(O).html(T);C.init();}else{if(V.janrainFlow==="authFlow"){r.setDomReady.body.append(O);for(R=0,M=T.length;R<M;R+=1){for(P=0,L=S.length;P<L;P+=1){if(S[P]===T[R].id){T[R].innerHTML="";T[R].id="";}}}g(O).html(T);C.init();}else{r.setDomReady.sectionContent.append(O);var U=[];for(R=0,M=T.length;R<M;R+=1){var W=false;for(P=0,L=N.length;P<L;P+=1){if(N[P]===T[R].id){W=true;}}if(!W){T[R].innerHTML="";T[R].id="";}}g(O).html(T);C.init();}}z.state.template=true;}else{g.ajax({type:"GET",url:I.templateUrl,dataType:"html",beforeSend:function(){},success:function(Z){if(V.janrainFlow==="profileFlow"){r.setDomReady.sectionContent.append(X);X=g(X).html(Z);}else{var Y=Z.replace(/\'/gi,"'");r.setDomReady.body.append(X);var X=r.setDomReady.body.find("#templateHolder");X.html(Y);X.find("#editProfile").remove();}z.state.template=true;C.init();}});}}};D=function(){};j={};m=function(){if(typeof n.janrain!=="object"){n.janrain={};}n.janrain.settings={};n.janrain.settings.capture={};n.janrain.settings.share={};janrain.settings.appUrl=I.janrain.appUrl;janrain.settings.custom=true;janrain.settings.capture.flowVersion="HEAD";janrain.settings.capture.responseType="token";janrain.settings.capture.flowName="foxNewsFlow";janrain.settings.capture.stylesheets=I.styleUrl;janrain.settings.tokenUrl=n.location.protocol+"//"+n.location.host+"/";janrain.settings.capture.appId=I.janrain.appId;janrain.settings.capture.redirectUri=n.location.protocol+"//"+n.location.host;janrain.settings.capture.clientId=I.janrain.clientId;janrain.settings.capture.captureServer=I.janrain.captureServer;janrain.settings.capture.recaptchaPublicKey="6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP";janrain.settings.capture.editPhotoAfterUpload=true;janrain.settings.type="embed";janrain.settings.tokenAction="event";janrain.settings.format="two column";janrain.settings.capture.modalBorderOpacity=0;janrain.settings.capture.modalBorderWidth=0;janrain.settings.capture.modalBorderRadius=2;janrain.settings.capture.modalCloseHtml='<span class="janrain-icon-16 janrain-icon-ex"></span>';janrain.settings.capture.modalBorderColor="transparent";janrain.settings.language="en";janrain.settings.capture.setProfileCookie=true;janrain.settings.capture.keepProfileCookieAfterLogout=true;janrain.settings.capture.hideSavedProfileMessageDelay=15000;switch(z.janrainFlow){case"authFlow":janrain.settings.capture.setProfileData="true";janrain.settings.capture.registerFlow="socialRegistration";break;case"profileFlow":janrain.settings.autoSave=true;janrain.settings.screenToRender="editProfile";break;case"emailFlow":janrain.settings.screenToRender="registrationVerify";janrain.settings.capture.registerFlow="socialRegistration";break;case"passwordFlow":janrain.settings.screenToRender="resetPassword";janrain.settings.capture.setProfileData="true";janrain.settings.capture.registerFlow="socialRegistration";break;}janrain.settings.capture.backplane=true;janrain.settings.capture.backplaneBusName=I.janrain.backplaneBusName;janrain.settings.capture.federate=true;janrain.settings.capture.federateServer=I.janrain.federateServer;janrain.settings.capture.federateXdReceiver=I.xdcomm;janrain.settings.capture.federateLogoutUri=I.logout;janrain.settings.share.providers=["facebook","twitter","linkedin","email"];janrain.settings.share.providersEmail=["google","yahoo"];janrain.settings.share.modes=["broadcast","contact"];janrain.settings.share.attributionDisplay=false;janrain.settings.share.previewMode=0;janrain.settings.capture.mobileStylesheets=[I.janrain.mobileCSS];janrain.settings.share.modalBackgroundColor="#000000";janrain.settings.share.modalBorderRadius="2";janrain.settings.share.modalOpacity="0";janrain.settings.share.modalWidth="0";janrain.settings.share.bodyBackgroundColor="#F3F3F3";janrain.settings.share.bodyBackgroundColorOverride=true;janrain.settings.share.bodyColor="#333";janrain.settings.share.bodyContentBackgroundColor="#ffffff";janrain.settings.share.bodyFontFamily="Helvetica";janrain.settings.share.bodyTabBackgroundColor="#F3F3F3";janrain.settings.share.bodyTabColor="#424242";janrain.settings.share.elementBackgroundColor="#f3f3f3";janrain.settings.share.elementBorderColor="#ccc";janrain.settings.share.elementBorderRadius="3";janrain.settings.share.elementButtonBorderRadius="3";janrain.settings.share.elementButtonBoxShadow="0";janrain.settings.share.elementColor="#333333";janrain.settings.share.elementHoverBackgroundColor="#333333";janrain.settings.share.elementLinkColor="#173951";if(z.janrainFlow==="profileFlow"){janrain.settings.packages=["login","capture"];}else{if(z.janrainFlow==="publicFlow"){janrain.settings.packages=["login","capture"];janrain.settings.capture.stylesheets=[];}else{janrain.settings.packages=["login","capture","share"];}}janrain.ready=true;};C={config:{capture:{url:I.janrain.jsURL,id:"janrainAuthWidget"},share:{url:"default",id:"janrainWidgets",type:"share"}},session:null,sessionType:"",reset:false,init:function(){var J=this;J.widgetOnload();J.captureWidgetOnLoad();w.loadExtJs(J.config.capture.url,J.config.capture.id,J.loadedJS.loadJan);return this;},API:{requestSent:false,url:I.janrain.apiURL,token:"",updateAPI:function(J,L){var K=this;if(J==="livefyre"){return{type_name:"user",access_token:K.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+s.userLivefyre.id+'"}}}'};}else{if(J==="livefyre_temp"){return{type_name:"user",access_token:K.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+s.uuid+'@foxnewsprod.fyre.co"}}}'};}else{if(J==="badgeville_id"){return{type_name:"user",access_token:K.token,attributes:'{"externalServices":{"badgeville_id":"'+s.uuid+'@user.foxnews.com"}}'};}else{if(J==="share"){if(s.userJanrain.shares==null){s.userJanrain.shares=0;}s.userJanrain.shares+=1;return{type_name:"user",access_token:K.token,attributes:'{"shares" : '+s.userJanrain.shares+"}"};}else{if(J==="test"){return{type_name:"user",access_token:K.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+L+'"}}}'};}}}}}},execute:function(K,J){var M=this,L="FOX_Janrain_EXEC";J.jsonp=L;if(typeof n[L]!=="function"){n[L]=function(N){if(N.code==414){h.janrain.tokenRefreshed();h.janrain.signOut();h.domEvents.logoutSuccess();return false;}else{if(N.code==310){h.domEvents.logoutSuccess();h.janrain.signOut();return false;}else{if(!N.code&&!N.stat){h.domEvents.logoutSuccess();h.janrain.signOut();return false;}else{if(N.stat==="ok"){M.requestSent=true;s.uuid=N.result.uuid;s.email=N.result.email;s.userJanrain=N.result;s.displayName=N.result.displayName;h.displayName();if(g("#authentication").css("display")==="block"){h.domEvents.loginSuccess();}if(r.setDomReady.acc.hasClass("alt-style")){h.displayShowsProfile();}o.uLogin(C.API.token,s.email,s.uuid);E.idmsLogin(C.API.token,s.email,s.uuid);if(N.result.externalServices.livefyre.livefyre_id==null||N.result.externalServices.livefyre.livefyre_id==="null"||N.result.externalServices.livefyre.livefyre_id===""){M.update("entity.update",M.updateAPI("livefyre_temp"));}if(N.result.externalServices.badgeville_id==null||N.result.externalServices.badgeville_id==="null"||N.result.externalServices.badgeville_id===""){M.update("entity.update",M.updateAPI("badgeville_id"));}i.setUp();}}}}};}g.ajax({data:J,url:M.url+K,dataType:"script",async:true,cache:true});},update:function(K,J){var M=this,L="FOX_Janrain_UPD";J.jsonp=L;if(typeof n[L]!=="function"){n[L]=function(N){};}g.ajax({data:J,url:M.url+K,dataType:"script",async:true,cache:true});}},loadedJS:{loadJan:function(){if(typeof janrain==="object"){z.state.janrain=true;}},loadShare:function(){}},widgetOnload:function(){n.janrainWidgetOnload=function(){AUTH_Manager.fireReady("janrain");};return this;},captureWidgetOnLoad:function(){n.janrainCaptureWidgetOnLoad=function(){var J=janrain.events;AUTH_Manager.fireReady("capture");J.onCaptureLoginSuccess.addHandler(h.janrain.successfulLogin);J.onCaptureRegistrationSuccess.addHandler(h.janrain.successfulRegistration);J.onCaptureRegistrationStart.addHandler(h.janrain.registrationStart);J.onCaptureAccessDenied.addHandler(h.janrain.accessDenied);J.onAuthWidgetLoad.addHandler(h.janrain.onAuthWidgetLoad);J.onModalClose.addHandler(h.janrain.onModalClose);J.onCaptureValidationSuccess.addHandler(h.janrain.validation.onValidationSuccess);var K=w.domTest(g("#livefyre_comment_stream")),M=g("#disqus_thread");if(!K){var L=document.createElement("div");L.id="livefyre_comment_stream";if(M.length>0){M.attr("id","livefyre_comment_stream");M.empty();K=true;}z.livefyreSet=true;}else{M.remove();z.livefyreSet=false;}if(K&&z.janrainFlow==="authFlow"){J.onCaptureBackplaneReady.addHandler(h.janrain.backplaneReady);}J.onCaptureRenderComplete.addHandler(h.janrain.screen.onRenderComplete);J.onCaptureProfileSaveSuccess.addHandler(h.janrain.screen.editProfile.onProfileUpdate);J.onCaptureAutoSaveUpdate.addHandler(h.janrain.screen.editProfile.onProfileAutoSave);J.onCaptureProfileSaveFailed.addHandler(h.janrain.screen.editProfile.onProfileFailedSave);J.onCaptureScreenShow.addHandler(h.janrain.screen.onScreenShow);J.onCaptureModalReady.addHandler(h.janrain.screen.uiReady);J.onCaptureSessionFound.addHandler(h.janrain.sessionFound);J.onCaptureSessionNotFound.addHandler(h.janrain.sessionNotFound);J.onCaptureSessionEnded.addHandler(h.janrain.sessionEnded);J.onCaptureLoginSuccess.addHandler(C.isLoggedIn.masterTrigger);J.onCaptureRegistrationSuccess.addHandler(C.isLoggedIn.masterTrigger);J.onCaptureSessionFound.addHandler(C.isLoggedIn.masterTrigger);J.onCaptureSessionNotFound.addHandler(C.isLoggedIn.masterTrigger);J.onCaptureSessionEnded.addHandler(C.isLoggedIn.masterTrigger);J.onCaptureExpiredToken.addHandler(h.janrain.tokenExpired);J.onCaptureFederateRefreshedToken.addHandler(h.janrain.onRefreshToken);if(z.janrainFlow==="authFlow"){}J.onCaptureError.addHandler(h.janrain.errorEvent);J.onCaptureEmailSent.addHandler(h.janrain.emailSent);n.janrain.capture.ui.start();};return this;},extend:function(J,K){janrain.events[J].addHandler(K);},isLoggedIn:{buffer:[],hasActiveSession:function(J){J(janrain.capture.ui.hasActiveSession());},eventDriven:function(J,K){var L=this;L.buffer.push([J,K]);},masterTrigger:function(L){var N=C.isLoggedIn;if(N.buffer.length==0){return false;}var O=janrain.capture.ui.hasActiveSession(),M=false;for(var J=0,K=N.buffer.length;J<K;J+=1){switch(N.buffer[J][0]){case"found":if(O&&C.sessionType==="found"){N.buffer[J][1](O);M=true;}break;case"notfound":if(!O&&C.sessionType==="notfound"){N.buffer[J][1](O);M=true;}break;case"logout":if(!O&&C.sessionType==="logout"){N.buffer[J][1](O);M=true;}break;case"signin":if(O&&(C.sessionType==="signin")){N.buffer[J][1](O);M=true;}break;case"register":if(O&&(C.sessionType==="register")){N.buffer[J][1](O);M=true;}break;default:N.buffer[J][1](O);break;}if(M){break;}}}},publicProfileLinkUUID:function(){}};B=function(){var J=i;n.BadgevilleAsynchInit=function(){var K=false;n.Badgeville.BackplaneSubscription=n.Backplane.subscribe(function(M){var L;try{if(!M.message.payload.identities.entry){l("Something is wrong with backplane");return false;}else{l("Something is right with backplane");return false;L=M.message.payload.identities.entry;}}catch(S){l(S,"Backplane message has a problem");L=M.payload.identities.entry;}var R=L,O=/uuid=(\S+)/gi,N;if(M.type=="identity/login"&&n.Badgeville.Settings.player==null){var Q;K=true;try{Q=s.userJanrain.photos[0].value;}catch(S){Q=i.config.avatar;}try{N=R.id.match(O)[0];N=N.replace("uuid=","");}catch(P){}s.userBadgeville={email:N+i.config.username,display_name:R.displayName,picture_url:Q};n.Badgeville.setPlayer(s.userBadgeville);}});if(!K&&typeof s.userJanrain.uuid!=="undefined"){J.events.playerSignIn();}else{}n.Badgeville.Settings.backplaneLink=false;n.Badgeville.Settings.showToast=1;n.Badgeville.Settings.showWaffle=true;n.Badgeville.Settings.croutonShow=0;n.Badgeville.Settings.signIn=function(){};n.Badgeville.Settings.signOut=function(){};n.Badgeville.afterSetPlayer=function(L,M){if(i.buffer.length>0){i.events.useBuffer();}if(!J.afterPlayerSet){J.afterPlayerSet=true;J.socialNetworkingIntegration();}i.getBadgeFromSelf.gatherUserInfo();};n.Badgeville.ready(function(){var L=n.bpReady;J.getBadgesFromOthers.getPlayer(J.getBadgesFromOthers.email);});};};i={config:{id:"badgeville",domain:"foxnews.com",username:"@user.foxnews.com",key:"5302cf0355a5410f0beacdf2de891c52",url:"api.badgeville.com/v4/badgeville-current.js?key=5302cf0355a5410f0beacdf2de891c52&domain=foxnews.com&debugInit=false",avatar:"http://livefyre-avatar.s3.amazonaws.com/a/anon/50.jpg"},afterPlayerSet:false,buffer:[],setUp:function(){var J=this;if(typeof n.Badgeville==="undefined"){J.loadBadgeville();}else{}},loadBadgeville:function(){var J=this;w.loadExtJs(J.config.url,J.config.id,J.badgeLoaded);},badgeLoaded:function(){if(typeof Badgeville==="function"){z.state.badgeville=true;}},credit:function(J){if(typeof J!=="object"){n.Badgeville.credit(J,function(K){});}else{n.Badgeville.credit(J);}},creditOther:function(J){n.Badgeville.creditOther(J[0],J[1],J[2]);},trigger:function(K,M,J){try{l("Checking",K,(typeof n.Badgeville),C.session,(typeof n.Badgeville.ready));}catch(L){}if(typeof n.Badgeville==="undefined"&&!C.session){try{if(typeof n.Badgeville.ready!=="function"){return false;}}catch(L){}}else{try{if(K in i.events.tracking){if(C.session){i.events.tracking[K](M,J);}}else{l("Wrong Parameter is passed to Badgeville Credit Trigger!");}}catch(L){l("e",L);}}},socialNetworkingIntegration:function(){var K=this,J=K.social;for(var L in J){J[L]();}},events:{unsubscribe:function(){if(typeof Backplane!=="undefined"){n.Badgeville.setPlayer();}},playerSignIn:function(){var K,J=this;try{K=s.userJanrain.photos[0].value;}catch(L){K=i.config.avatar;}s.userBadgeville={email:s.userJanrain.uuid+i.config.username,display_name:s.userJanrain.displayName,picture_url:K};n.Badgeville.setPlayer(s.userBadgeville);},useBuffer:function(){try{if(typeof n.Badgeville.ready==="function"){for(var K=0,L=i.buffer.length;K<L;K+=1){if(i.buffer[K]==="newsletterSub"){for(var J in b.config.subscribeList){if(b.config.subscribeList[J].length>0){for(var O=0,L=b.config.subscribeList[J].length;O<L;O+=1){var M=b.config.subscribeList[J][O];i.trigger(i.buffer[K],J+M);}}}}else{i.trigger(i.buffer[K]);}}i.buffer=[];}}catch(N){setTimeout(i.events.useBuffer,500);}},playerSignOut:function(J){},playerUpdate:function(J,K){},tracking:{newUser:function(J){var J=J||s.uuid;i.credit({verb:"new user",NewUserId:J});},chat:function(){i.credit({verb:"chat",siteID:n.location.href});return this;},viewVideo:function(J){i.credit({verb:"view videos on the site",videoID:J});return this;},completeProfile:function(J){i.credit({verb:"completed profile",uuid:J});return this;},friendTag:function(){i.credit({verb:"friend tag"});return this;},spank:function(J){i.creditOther(J);return this;},commentLike:function(J){i.creditOther(J);return this;},contentShare:function(J){i.credit({verb:"share",articleid_type:J});return this;},newsletterSub:function(Q,N){if(typeof Q==="object"){try{if(N&&N!==s.userJanrain.email){return false;}}catch(O){}for(var K in Q){var L=Q[K].length;if(L>0){for(var P=0;P<L;P+=1){var M=setTimeout;M(J(K,Q[K][P],M),100);}}}function J(R,T,S){i.credit({verb:"newsletter subscription",newsletterID:R+T});clearTimeout(S);}}else{if(typeof N==="undefined"){i.credit({verb:"newsletter subscription",newsletterID:Q});return this;}else{try{if(N===s.userJanrain.email){i.credit({verb:"newsletter subscription",newsletterID:Q});return this;}}catch(O){}}}return this;},ureportApproved:function(J){i.credit({verb:"ureport approved",uReportMediaID:J});return this;},returnEightPerMonth:function(){i.credit("visits");return this;}},chatCheck:function(){if((n.location.host.indexOf("live")>-1)||(n.location.href.indexOf("/live-event")>-1)||(n.location.href.indexOf("/sunday-housecall")>-1)){i.buffer.push("chat");}}},social:{facebook:function(){try{FB.Event.subscribe("edge.create",function(K){i.trigger("contentShare",n.location.href+"#facebook");C.API.update("entity.update",C.API.updateAPI("share"));});}catch(J){}},twitter:function(){try{twttr.events.bind("tweet",function(K){i.trigger("contentShare",n.location.href+"#twitter");C.API.update("entity.update",C.API.updateAPI("share"));});}catch(J){}},google:function(){},linkedIn:function(){}},getBadgesFromOthers:{tempUser:{},email:"",turnIdToEmail:function(J){this.email=J+i.config.username;},getPlayer:function(J){var K=this,L=g(".rank");n.Badgeville.getPlayer(J,function(M){console.log("playerOBject Executed!",M);var O=L.find("div"),N=L.find("span"),P=(typeof M.level.name==="undefined")?"rookie":M.level.name.toLocaleLowerCase();L.find("img").remove();L.addClass(P);P=P.charAt(0).toUpperCase()+P.slice(1);N.text(P);O.show();N.show();K.tempUser=M;});}},getBadgeFromSelf:{user:{},domElements:{},getDom:function(){var V=this,S=g(".badge-stats"),J=S.find("> div:eq(0)"),N=S.find(".stats"),M=N.find("ul > li:eq(0) > span:last-child"),T=N.find("ul > li:eq(1) > span:last-child"),X=N.find("ul > li:eq(2) > span:eq(1)"),U=N.find("ul > li:eq(2) > .next-level"),L=S.find(".bar-cont"),Q=L.find(".bar"),K=Q.find("span"),P=L.find("> span:eq(0)"),W=L.find("> a:eq(0)"),O=g("#how-to"),R=O.find("> a");V.domElements={badgeStat:S,iconBadge:J,stats:N,rank:M,points:T,nextLevel:X,nextLevelIcon:U,barCount:L,bar:Q,percntBar:K,percent:P,howItWork:W,howModal:O,howClose:R};V.editProfileBehaviors.domElements=V.domElements;V.editProfileBehaviors.self=V;V.editProfileBehaviors.howItWorksBehaviors.domElements=V.domElements;V.editProfileBehaviors.howItWorksBehaviors.self=V;return V;},gatherUserInfo:function(){var J=this;J.getDom();J.user=Badgeville.Settings.player;J.updateEditPrivateProfile();},updateEditPrivateProfile:function(){var K=this,L=K.domElements,J=K.user;if(J.points_all===0){L.badgeStat.addClass("rookie");L.rank.html("Rookie");L.points.html("0");L.nextLevel.html("Apprentice");L.percntBar.css({width:0+"%"});L.percent.html(0+"%");K.editProfileBehaviors.getModal();K.editProfileBehaviors.howItWorksBehaviors.close();}else{L.badgeStat.addClass(J.level.name.toLowerCase());L.rank.html(J.level.name);L.points.html(J.points_all);L.nextLevel.html(J.next_level.name);K.editProfileBehaviors.calculatePercentage();K.editProfileBehaviors.getModal();K.editProfileBehaviors.howItWorksBehaviors.close();}L.badgeStat.addClass(J.level.name.toLowerCase());L.rank.html(J.level.name);L.points.html(J.points_all);L.nextLevel.html(J.next_level.name);K.editProfileBehaviors.calculatePercentage();K.editProfileBehaviors.getModal();K.editProfileBehaviors.howItWorksBehaviors.close();},editProfileBehaviors:{calculatePercentage:function(){var M=this,N=M.domElements,K=M.self.user,J;var L={Apprentice:250,Specialist:1500,Commentator:5000,Pundit:10000,Analyst:30000,Adviser:60000,Captain:1000000};switch(K.level.name){case"Rookie":J=(((K.points_all)*100)/L.Apprentice).toFixed(2);break;case"Apprentice":J=(((K.points_all-L.Apprentice)*100)/(L.Specialist-L.Apprentice)).toFixed(2);break;case"Specialist":J=(((K.points_all-L.Specialist)*100)/(L.Commentator-L.Specialist)).toFixed(2);break;case"Commentator":J=(((K.points_all-L.Commentator)*100)/(L.Pundit-L.Commentator)).toFixed(2);break;case"Pundit":J=(((K.points_all-L.Pundit)*100)/(L.Analyst-L.Pundit)).toFixed(2);break;case"Analyst":J=(((K.points_all-L.Analyst)*100)/(L.Adviser-L.Analyst)).toFixed(2);break;case"Advisor":J=(((K.points_all-L.Adviser)*100)/(L.Captain-L.Adviser)).toFixed(2);break;case"Captain":J=100;break;}N.percntBar.css({width:J+"%"});N.percent.html(J+"%");},getModal:function(){var K=this,L=K.domElements,J=K.self.user;L.howItWork.bind("click",function(){L.howModal.css("display","block");return false;});},howItWorksBehaviors:{close:function(){var K=this,L=K.domElements,J=K.self.user;L.howClose.bind("click",function(){L.howModal.hide();return false;});},getHowManyPlayersInRank:function(){}}}}};q=function(){if(typeof LF!=="undefined"){G.commentsCount(true);}else{G.commentsCount(false);}};G={conv:null,url:I.livefyre.jsURL,config:[],network:I.livefyre.network,eventsDelegate:null,commentsNumber:0,customStrings:{sortLabel:"SORT BY"},init:function(J){var K=this;if(typeof fyre!=="object"){w.loadExtJs(G.url,"",G.lfLoaded);}},lfLoaded:function(){G.eventsDelegate=new fyre.conv.BackplaneAuthDelegate(n.Backplane);G.events.eventsDelegate();G.grabMetaData();},grabMetaData:function(L){var M=this,K={},J=[],P=g('meta[name="livefyreconfig"]'),O=false,N;if(P.attr("siteId")){N=P.attr("siteId");}else{N=I.livefyre.siteid;}if(P.length>0){K={el:I.livefyre.el,siteId:N,checksum:P.attr("checksum"),articleId:P.attr("articleId"),collectionMeta:P.attr("collectionmeta")};}else{K={collectionMeta:"eyJ0eXAiOiJqd3QiLCJhbGciOiJIUzI1NiJ9.eyJ0aXRsZSI6Iih0ZXN0aW5nIDMgMiAxKSBUaGlzIGlzIGFuIG90aGVyIHRlc3QgdGl0bGUuIiwidXJsIjoiaHR0cDpcL1wvZXhhbXBsZS5jYnMuY29tXC9leGFtcGxlMi5odG1sIiwidGFncyI6IiIsImFydGljbGVJZCI6InRlc3RpbmcxMjM0IiwiY2hlY2tzdW0iOiJlNzI0YjFkMGRjOTZmZjQ4NjcxN2EwNzkyOGU2YjU4MCJ9.3ywwCkxPrLxt0fzCTg6yqNlr79jep6IOaSJYS_jNEUk",checksum:"e724b1d0dc96ff486717a07928e6b580",siteId:"303683",articleId:"testing1234",el:"livefyre_comment_stream"};O=true;}if(!O){G.config.push(K);M.setUpLiveFyre();}},setUpLiveFyre:function(){var K=this;var J=K.customStrings;K.conv=fyre.conv.load({strings:J,network:K.network,authDelegate:G.eventsDelegate},K.config,G.events.doLivefyreAuth);},commentsCount:function(L){var K=g("span.livefyre-commentcount"),J=function(){if("LF" in n){try{if(n.FOX_metadescriptor.name["prism.section"]==="nation"){n.LF.CommentCount({replacer:function(O,P){O.innerHTML=P;}});}else{n.LF.CommentCount({replacer:function(O,P){O.innerHTML=P+" Comment"+(P===1?"":"s");}});}}catch(N){console.log("error occured in comments number",N);}}};if(K.size()>0){if(L){try{if(n.FOX_metadescriptor.name["prism.section"]==="nation"){n.LF.CommentCount({replacer:function(N,O){N.innerHTML=O;}});}else{n.LF.CommentCount({replacer:function(N,O){N.innerHTML=O+" Comment"+(O===1?"":"s");}});}}catch(M){console.log("error occured in comments number",M);}}else{w.loadExtJs("zor.livefyre.com/wjs/v1.0/javascripts/CommentCount.js","lfExtCom",J);}}},events:{eventsDelegate:function(K){var J=G.eventsDelegate;J.login=function(M){var L=function(){M.success();janrain.events.onCaptureLoginSuccess.removeHandler(L);janrain.events.onModalClose.removeHandler(N);};var N=function(){M.failure();janrain.events.onModalClose.removeHandler(N);janrain.events.onCaptureLoginSuccess.removeHandler(L);};h.janrain.signin();n.Backplane.expectMessages("identity/login");janrain.events.onCaptureLoginSuccess.addHandler(L);janrain.events.onModalClose.addHandler(N);};J.logout=function(L){h.janrain.signOut();fyre.conv.BackplaneAuthDelegate.prototype.logout.call(J,L);n.livefyreLogout=function(){fyre.conv.BackplaneAuthDelegate.prototype.logout.call(J,L);};janrain.events.onCaptureSessionEnded.addHandler(livefyreLogout);};J.viewProfile=function(L,M,N){if(M.id.indexOf("twitter")>-1||M.id.indexOf("facebook")>-1){return false;}var O=M.id.split("@")[0];h.janrain.displayPublicProfile(O);};J.editProfile=function(L){h.editProfile();};J.share=function(L){L.success();};},doLivefyreAuth:function(J){J.on("commentShared",function(K){i.trigger("contentShare",K.targetId);C.API.update("entity.update",C.API.updateAPI("share"));});J.on("commentPosted",function(K){t.commentPost();if(K.bodyHtml.indexOf("fyre-mention-twitter")>-1||K.bodyHtml.indexOf("fyre-mention-facebook")>-1){g.loadAttempt(60,200,function(){return g(".fyre-modal").size()>0?true:false;},function(){var L=g(".fyre-modal");L.find(".goog-buttonset-default").click(function(){i.trigger("friendTag");});});}});J.on("commentLiked",function(N){var Q=N.targetAuthorId.split("@")[0],K=Q+"@user.foxnews.com",L=N.targetId,P=Q+L,O={verb:"comment like",comment_id:P},M=function(R){l("DO WE HAVE CONNECTION?",R);};i.trigger("commentLike",[K,O,M]);});J.on("commentFlagged",function(M){var O=g("#fyre-message-"+M.targetId).find(".fyre-comment-user").attr("data-author-id").split("@")[0],K=O+"@user.foxnews.com",N={verb:"spank"},L=function(P){l("DO WE HAVE CONNECTION?",P);};i.trigger("spank",[K,N,L]);});J.on("commentCountUpdated",function(L){G.commentsNumber=L;var K=g(".user-interaction > li.comments");K=(K.size()>0)?K:g(".post-footer .comments");if(K.size()>0){if(K.css("display")==="none"){if(K.find("span").size()==0){K.find("a").html("<span></span> "+L+" Comments");}else{K.find("a").html(L+" Comments");}K.css({display:"block"});}else{if(K.find("a > span").size()>0){K.find("a").html("<span></span> "+L+" Comments");}else{K.find("a").html(L+" Comments");}}}else{try{if(n.FOX_metadescriptor.name["prism.subsection1"]==="willisreport"){K=g(".post-footer > .comments");if(K.size()>0){K.find("a").html(G.commentsNumber+" Comments");}}}catch(M){}}});J.on("initialRenderComplete",function(L){if(n.FOX_LivefyreIntegrationService){FOX_LivefyreIntegrationService.isReady();}h.livefyre.displayLogo();h.livefyre.hashComment();G.events.omniture();var K=g(".user-interaction > li.comments");if(K.size()>0){if(K.css("display")==="none"){if(K.find("a > span").size()>0){K.find("a").html("<span></span> "+G.commentsNumber+" Comments");}else{K.find("a").html(G.commentsNumber+" Comments");}K.css({display:"block"});}else{if(K.find("span").size()==0){K.find("a").html("<span></span> "+G.commentsNumber+" Comments");}else{K.find("a").html(G.commentsNumber+" Comments");}K.css({display:"block"});}}else{try{if(n.FOX_metadescriptor.name["prism.subsection1"]==="willisreport"){K=g(".post-footer > .comments");if(K.size()>0){K.find("a").html(G.commentsNumber+" Comments");}}}catch(M){}}});},omniture:function(){var J={showMore:g(".fyre-stream-more-container"),displayComments:g(".comments")};J.showMore.bind("click",function(){t.commentLoad();});J.displayComments.bind("click",function(){t.commentLoad();});}},API:{configUrl:function(L,J){var K=I.livefyre.activityAPI;return K.replace("{uuid}",L).replace("{cb}",J);},displayDataToPublicProfile:function(J){var L=this,K="FOX_Livefyre_PublicRequest";n[K]=n[K]||function(M){s.commentCount=M.data.user_comment_count;s.likeCount=M.data.user_liked_count;s.rating=M.data.user_rating;h.livefyre.populatePublicProfile();};g.ajax({url:L.configUrl(J,K)+"&userInfoFormat=true",dataType:"script",data:{cb:v(5)},async:true,cache:true});},onProfileUpdate:function(){var K=I.livefyre.apiProfile,J="FOX_livefyreProfileUpdate";n[J]=function(L){};g.ajax({url:K+C.API.token+"&callback="+J,dataType:"script",async:true,cache:true});},onLoginSuccessFromJanrain:function(){var L=g("#livefyre_comment_stream");var K=L.find(".fyre-widget .fyre-auth .fyre-login-bar .fyre-user-loggedout"),J="Signing In...";g.loadAttempt(250,150,function(){return(K&&K.text()!==J)?true:false;},function(){K.text(J);});}},activityTab:{configUrl:function(L,J){var K=(z.janrainFlow==="profileFlow")?I.livefyre.activityAPI:I.livefyre.activityActiveAPI;return K.replace("{uuid}",L).replace("{cb}",J);},uuid:null,location:null,activityWraper:null,domStorage:null,ajaxRequestsTries:3,currentNumberAttempts:0,maxCommentsGrab:10,curTime:function(){return n.AKAMAI_TIME_HELPER.getCurrent();},backup:null,user:{name:null,image:null},initCallFromJanrain:function(){var J=this;J.cloneMarkUp();},cloneMarkUp:function(){var L=this;var K=g("#livefyre-wrap"),J=K.clone();L.activityWraper=J;K.remove();g("#account-wrap").before(J);L.tabActivity();L.gatherData();},tabActivity:function(){h.domEvents.tabControlsForActivityPages();},assessDom:function(){var L=this;if(L.dom==null){var J=g("#livefyre-Activity").find(".livefyre-pro-activity"),K=J.find("ul");L.dom={image:g("#livefyre-pro-image").find("> img"),ul:K,name:J.find("h1"),body_plain:"comment",url:"link",created_at:"time",conv_title:"whereTitle",structure:J};}return L.dom;},dom:null,manageDomCopy:function(){var K=this,M=K.activityWraper,L=M.find(".livefyre-pro-activity"),J=L.find(".prof-activity ul");return{image:M.find("#livefyre-pro-image").find("> img"),ul:J,name:L.find("h1")};},gatherData:function(K,J){var M=this,L="FOX_liveFYRE_Activity",K=K||s.uuid,N=J||"private";M.uuid=K;M.location=N;if(typeof K==="undefined"){return false;}M.location=J||"private";if(M.location==="private"){M.gatherNameAndImage();}if(!n[L]){n[L]=function(O){M.populateMarkup(O);};}g.ajax({url:M.configUrl(K,L),dataType:"script",data:{cb:v(5)},async:true,cache:true});},hashTagGatherer:function(){var J=this,K=n.location.hash;if(K===""){return J;}J.user.name=K.replace("#","");return J;},hachChanged:function(){},getPhotosAndId:function(){var J=this;if(J.user.name===""||J.user.name==null){J.populateResponce({response:{status:"fail"}});return false;}g.ajax({url:I.janrain.publicRequestAPI+J.user.name,dataType:"json",data:{cb:v(5)},async:true,cache:true,success:function(K){J.populateResponce(K);}});},populateResponce:function(J){var K=G.activityTab;if(J.status!=="ok"){var L=K.assessDom();L.image.parent().hide();L.structure.html("User not found! Please make sure that the user is correct");return false;}if(J.result.photos.length>0){K.user.image=J.result.photos[2].value;}else{K.user.image="http://cdn.quilt.janrain.com/2.1.2/profile_default.png";}K.uuid=J.result.uuid;K.gatherData(K.uuid,"public");},gatherNameAndImage:function(){var J=this;switch(J.location){case"private":J.user.name=s.userJanrain.displayName;if(s.userJanrain.photos.length>0){J.user.image=s.userJanrain.photos[2]["value"];}else{J.user.image="http://cdn.quilt.janrain.com/2.1.2/profile_default.png";}break;case"public":J.obtainDataFromExternalJanrain();break;default:break;}},obtainDataFromExternalJanrain:function(){},populateMarkup:function(M){var S=G.activityTab,J=[],L=S.curTime();if(M.code===404){var N=S.assessDom();N.image.parent().hide();N.structure.html("User not found! Please make sure that the user is correct");return false;}else{if(M.code!==200){S.gatherData(S.uuid,S.location);}}if(M.data.length==0){var N=S.assessDom();N.image.parent().hide();N.structure.html("User has no comments");return false;}if(M.code===200&&z.janrainFlow){var O=M.data,Q=10,P=O.length;P=(P>Q)?Q:P;var T=function(X){var U=[],W=new Date(S.correctingCommentTime(X.created_at)),V=S.createdSinceTime(W,L);U.push("<li><div>");U.push("<p>"+Y(X.body_html)+"</p>");U.push("<span>"+V.str+' <a href="'+X.url+'" >'+X.conv_title+"</a></span>");U.push('</div><a href="'+X.url+'" >View</a></li>');function Y(aa){var Z=g("<div/>").html(aa);if(Z.find("span").length>0){Z.find("span").each(function(){var ac=g(this),ab=ac.text();ac.text("@"+ab);ac.wrap("a");if(ac.attr("provider")!=="livefyre"){var ad=ac.attr("profile_url");ac.parent().attr("target","_blank");ac.parent().attr("href",ad);}else{ac.parent("a").removeAttr("href");}});return Z.html();}else{return aa;}}return(U.join(""));};for(var R=0;R<P;R+=1){J.push(T(O[R]));}J=J.join("");if(S.location==="private"){var K=S.manageDomCopy();K.ul.html(J);S.insertNewMarkupIntoTab();}else{var N=S.assessDom();N.ul.html(J);S.insertNewMarkupIntoTab();}}},parseThroughSpan:function(){g(".prof-activity > ul").find("li").each(function(){var J=g(this);J.find("span").each(function(){var L=g(this);if(L.attr("provider")==="livefyre"){var K=L.attr("jid").split("@")[0];L.parent("a").removeAttr("href");L.bind("click",function(){janrain.capture.ui.getPublicProfile("publicProfile",K);});}});});},insertNewMarkupIntoTab:function(){var J=this;if(J.location==="public"){var L=J.assessDom();L.name.html(J.user.name);L.image.attr("src",J.user.image);}else{var K=J.manageDomCopy();K.name.html(J.user.name);K.image.attr("src",J.user.image);}J.parseThroughSpan();},correctingCommentTime:function(L){var M=n.AKAMAI_TIME_HELPER.isDST(),O="GMT"+((M.val)?"+100":"-000");var N=L.split("T"),J=N[0],P=N[1];J=J.split("-");J=[J[1],J[2],J[0]].join("/");var K=new Date([J,P,O].join(" "));return K;},createdSinceTime:function(K,J){var T=this,L=K,O=false;if(!L){return{str:"",val:false};}var R=T.dayDifferences(J,L),U=[];var Q=function(X,W){var V=" "+X+((W>1)?"s":"");return V;};var P=function(V){return V<0?V*-1:V;};if(R.s<0){O="Just Now on";}else{if(R.m==0&&R.d==0&&R.h==0){U.push(R.s+Q("second",R.s));}else{if(R.m<60&&R.h==0&&R.d==0){U.push(R.m+Q("minute",R.m));if(R.s>0){U.push(R.s+Q("second",R.s));}}else{if(R.h>=1&&R.d==0){U.push(R.h+Q("hour",R.h));if(R.m>0){U.push(R.m+Q("minute",R.m));}}else{if(R.d>=1&&R.d<=30){U.push(R.d+Q("day",R.d));if(R.h>0){U.push(R.h+Q("hour",R.h));}}else{if(R.d>30&&R.d<=365){var N=Math.floor(R.d/30),S=R.d%30;U.push(N+Q("month",N));if(S>0){U.push(S+Q("day",S));}}else{if(R.d>365){O="1 year ago on";}else{if(R.d>730){O="Many years ago on";}}}}}}}}O=(O)?O:(U.join(", ")+" ago on");var M={str:O,val:K};return M;},dayDifferences:function(J,K){var L=Date.parse(J)-Date.parse(K);return isNaN(L)?NaN:{diff:L,ms:Math.floor(L%1000),s:Math.floor(L/1000%60),m:Math.floor(L/60000%60),h:Math.floor(L/3600000%24),d:Math.floor(L/86400000)};},displayDiffenceTime:function(J){return""+J.ms+" Months"+J.d+" Days "+J.m+" Minutes";},loadDataWhenFailed:function(){var J=this;J.copyToCopy();},copyToCopy:function(){var J=this;g("#account-wrap").before(g(J.activityWraper));J.activityTab();}}};H=function(){var J=o;J.cookieSet=function(){return(g.cookie("SABRE_ID"))?true:false;};J.ureportHost=(function(){return(n.location.host.indexOf("ureport")>-1)?true:false;})();};o={config:{url:I.ureport.url,token:"&token=",email:"&email=",user:"&username="},uReportIdLookupAndDisplay:function(N,L){var J=this,M=(I&&I.ureport&&I.ureport.idLookup)?true:false;if(!M){return false;}n.userNameLookup=function(O){if(L){var P=(O.approvedFiles)?O.approvedFiles:"0";g("#fox_ur_reports").html(P);}else{J.uReportTab(O.id);}};var K=I.ureport.idLookup.replace("[UREPORT_USER_ID]",N);g.ajax({url:K,dataType:"script"});},uReportTab:function(R){var S=this,P=false;var L={acctWrap:g("#account-wrap"),ureportWrap:g("#ureport-pro-wrap"),activityWrap:g("#livefyre-wrap"),tabs:g(".tabs"),wraps:g(".wrap"),lastestUrep:g(".latest-urep"),noSub:g(".no-subs")};if(R){var N=R;}else{L.lastestUrep.hide();L.noSub.show();if(typeof auth_fox.user.userJanrain.externalServices==="undefined"){var K=0;var Q=setInterval(function(){var U=g("#livefyre-pro-image img").attr("src");if(U.indexOf("static/v/all")===-1){g("#ureport-avatar").prepend('<img src="'+U+'" width="139" height="139"/>');var T=g(".livefyre-pro-activity h1").text();g("#ureport-pro-wrap h1").text(T);g(".sub-ur-banner a").attr("href","http://ureport.foxnews.com/assignments?f=treeleft&o=ASC");clearInterval(Q);}else{if(K===5){clearInterval(Q);}K++;}},1000);return;}else{var N=auth_fox.user.userJanrain.externalServices.uReport_id;}}if(typeof R!=="undefined"){var P=true;}if(!P){var O=L.ureportWrap.clone();L.ureportWrap.remove();L.acctWrap.after(O);}(function(){var T=g("#ureport-pro-wrap"),U=g(".wrap");L.tabs.click(function(){var V=g(this),W=V.attr("id");U.css("display","none");L.tabs.removeClass("active");V.addClass("active");if(W=="account-tab"){L.acctWrap.css("display","block");}if(W=="ureport-pro-tab"){T.css("display","block");}if(W=="ureport-act-tab"){L.activityWrap.css("display","block");}});})();var M={approvedUploadsELM:g("#ureport-pro-wrap .prof-urep-stats ul li:eq(0) span"),asSeenOnFoxChannelELM:g("#ureport-pro-wrap .prof-urep-stats ul li:eq(1) span"),featureduReportsELM:g("#ureport-pro-wrap .prof-urep-stats ul li:eq(2) span"),assignmentsELM:g("#ureport-pro-wrap .prof-urep-stats ul li:eq(3) span"),latestReport:g("#ureport-pro-wrap .prof-urep-latest"),noSubs:g("#ureport-pro-wrap .no-subs"),latestReportLink:g("#ureport-pro-wrap .latest-urep a"),photoELM:g("#ureport-pro-wrap .latest-urep a img"),title:g("#ureport-pro-wrap .latest-urep div h2 a"),message:g("#ureport-pro-wrap .latest-urep div p"),userName:g("#ureport-pro-name h1"),publicURL:g("#ureport-pro-wrap .sub-ur-banner a"),userName:g("#ureport-pro-name h1"),avatar:g("#ureport-avatar"),accountWrap:g("#account-wrap"),lastestUrep:g(".latest-urep"),noSub:g(".no-subs")};if(P){M.userName.text(location.href.split("#")[1]);var J=auth_fox.livefyre.activityTab.user.image;M.avatar.html('<img src="'+J+'" style="height:139px;width:139px" />');}else{M.userName.text(auth_fox.user.userJanrain.displayName);var J=(typeof auth_fox.user.userJanrain.photos[2]!=="undefined")?auth_fox.user.userJanrain.photos[2]["value"]:false;if(J){M.avatar.html('<img src="'+J+'" style="height:139px;width:139px" />');}}M.publicURL.attr("href","http://ureport.foxnews.com/assignments?f=treeleft&o=ASC");n.ureportActivity=ureportActivity=function(U){var U=U.result,T=U.seenOnFNC.match(/,/g),V=U.featuredUreports.match(/,/g);T=T?T.length:0;V=V?V.length:0;if(U.approvedUploads!=="0"&&!P){g(".sub-ur-banner").css("visibility","hidden");}M.approvedUploadsELM.text(U.approvedUploads);M.asSeenOnFoxChannelELM.text(T);M.featureduReportsELM.text(V);M.assignmentsELM.text(U.assignments);if(typeof U.publicUrl!=="undefined"&&U.publicUrl!==""){M.photoELM.attr("src",U.publicUrl);M.lastestUrep.show();M.noSub.hide();}else{M.latestReportLink.hide();M.noSubs.show();}M.latestReportLink.attr("href",U.viewUreport);M.title.text(U.title);M.message.text(U.description);if(typeof n.ureportInitialized==="undefined"){n.ureportWrapClone=g("#ureport-pro-wrap").clone();n.ureportInitialized=true;n.refreshUR=refreshUR=function(){g("#account-wrap").after(n.ureportWrapClone);};}};(function(){g.ajax({url:I.ureport.ureportURL.replace("[UREPORT_USER_ID]",N),dataType:"script"});})();},uLogin:function(M,L,P){if(!F("ureport")){return false;}var N=this,J="FOX_ureport_SABRE",K=N.config;var O=encodeURIComponent(L);O=O.replace("%40","@");n[J]=function(Q){if(N.ureportHost){g.cookie("SABRE_ID",Q.fm,{path:"/"});var R=r.setDomReady.uReport().acc;if(!R.hasClass("action")&&typeof n.Backplane==="function"&&Q.fm!==""){if(n.location.pathname==="/assignment"){setTimeout(function(){var S=n.location.href;S=S.replace("/assignment","/submitreport");n.open(S,"_self");},500);}else{setTimeout(function(){n.location.reload(true);},500);}}}};g.ajax({url:K.url+J+K.token+M+K.email+O+K.user+P,async:true,cache:true,dataType:"script"});},uLogout:function(){var K=this,J=r.setDomReady.uReport().acc;if(K.cookieSet()&&K.ureportHost&&J.hasClass("action")){g.cookie("SABRE_ID",null,{path:"/"});g.cookie("SABRE_ID",null,{path:"/"});setTimeout(function(){n.location.reload(true);},3000);}},clearCookies:function(){var K=0,J=0;g.cookie("SABRE_ID",null,{path:"/"});},docReady:(function(){if(!F("ureport")){return false;}var K=$tartup.site.OnDocReady;function J(L){g.cookie(L,null,{path:"/"});g.cookie("SABRE_ID",null,{path:"/"});g.cookie("p_UN",null,{path:"/"});setTimeout(function(){n.location.reload(true);},3000);}K("slideShowCarousel",{init:function(){var L=this;L.setSlideshow();},setSlideshow:function(){function L(P,O){var N=[];for(var M=1;M<=O.batch.max;M++){N.push('<li><a href="#"></a></li>');}P.html(N.join(""));}g(".c-slide").each(function(O){var S=g(this),P=S.find("div.controls"),R=S.find("ul.sectioning"),Q=false;var N=function(T){T.each(function(U){g(this).click(function(){Q.stopAutoScroll();Q.scrollToBatch(U+1);return false;});});};var M={auto:{set:true,speed:5000,resume:true},slide:"horizontal",scroll:1,show:1,speed:"slow",rotate:true,eventCallback:function(U){var V=U.start,T=U.end;if(U.event==="init"){L(R,U);N(R.find("> li a"));}R.find("> li").each(function(W){g(this).toggleClass("active",(W+1===U.batch.current));});},controlsCallback:function(T){P.find(".prev").click(function(){T.stopAutoScroll();T.slide("prev");return false;});P.find(".next").click(function(){T.stopAutoScroll();T.slide("next");return false;});Q=T;}};S.jACarousel(M);});}});K("emailSubmit",{init:function(){var L=this;g("#signupSubmit").click(function(){var M=g("#signupEmail").val();L.validate(M);return false;});g("#signupEmail").attr("value","Enter Your Email").blur(function(){var N=g(this),M=N.attr("value");N.attr("value",(M==="")?"Enter Your Email":M);}).focus(function(){var N=g(this),M=N.attr("value");N.attr("value",(M==="Enter Your Email")?"":M);});},validate:function(L){var N=this,M=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(M.test(L)==false){g(".newsletter-module form .error").text("Please enter a valid email address.").css("display","block");}else{N.postEmail(L);g(".newsletter-module form .error").text("Thank you for subscribing to uReport.").css("display","block");g("#signupEmail").val("");}},postEmail:function(L){g.ajax({url:"http://www.foxnews.com/portal/newsalertsubscribe",data:"slids=3DC725E303A24F8D41CEA8699C0FE71E&email="+L});l(L);}});K("SSOModule",{init:function(){var L=this;},attachEvents:function(){var N=this,M;g("#authentication li:nth-child(1)").click(function(R){N.loadIframe("register");R.preventDefault();});g("#authentication li:nth-child(2)").click(function(R){N.loadIframe("login");R.preventDefault();});var Q=g("#log-in");if(Q.length>0&&!g.cookie("p_Thirdparty")){Q.click(function(S){var R=Q.attr("href");N.submitreport=(R.split("?")[1]).split("=")[1];N.loadIframe("login");S.preventDefault();});}g(n).resize(function(){var S=g("#foxFrame"),R=g(n);if(S.length){S.width(R.width());S.height(R.height());}});n.location.hash="";var P=g("#account"),L=g.cookie("p_UN"),O=g.cookie("p_Thirdparty");if(P.hasClass("inactive")){L=g.trim(g.cookie("p_UN").replace("."," "));P.prop("onmouseout",null);P.click(function(S){var R=S.currentTarget;g(R).toggleClass("active");});g(".user-options").prepend("<p>You're logged in as <span>"+truncate(L,13)+"</span></p>");if(O==="true"){P.find("li.first").hide();}}else{if(O){L=g.trim(g.cookie("p_UN").replace("."," "));P.addClass("inactive").html('<div class="username"><div class="encapsulate"><img width="13" height="13" alt=" " src="http://www.foxnews.com/static/all/img/head/profile.png"/><span>Account</span></div><div class="user-options"><p>You\'re logged in as <span>'+truncate(L,13)+'</span></p><ul><li class="first"><li><a onclick="killCookie(\'SABRE_ID\');" href="#">Logout</a></li></ul></div></div>');P.hover(function(S){var R=S.currentTarget;g(R).toggleClass("active");},function(S){var R=S.currentTarget;g(R).toggleClass("active");});}}P.find("li:first a").attr("href","https://secure.foxnews.com/community/user/profile").attr("target","_blank");},loadIframe:function(N){var O=this,P,M,L=g("#login");M=encodeURIComponent(n.location.href);P=g("<iframe />",{id:"foxFrame",src:"http://www.foxnews.com/static/v/all/html/ureport-login-ifr-2.html#"+N+"&url="+M,width:g(n).width(),height:g(n).height(),allowTransparency:true,scrolling:"no"});L.show().css("visibility","hidden");P.load(function(){L.css("visibility","visible");}).appendTo(L);},setHashListener:function(){var M=this;g(n).bind("hashchange",g.proxy(M.hashChange,M));if(g.browser.msie&&(g.browser.version==="7.0")){var L=n.location.hash;n.setInterval(function(){if(n.location.hash!==L){g.proxy(M.hashChange(),M);}},100);}},hashChange:function(){var O=this,Q=n.location.hash,L,P,M;g('<link href="http://www.foxnews.com/i/redes/foxnews.ico" rel="shortcut icon" type="image/x-icon" />').appendTo("head");if(Q.replace("#","")===""){return;}try{Q=Q.replace("#","").split("&");L=Q[0].split("=")[1];P=Q[1].split("=")[1];M=Q[2].split("=")[1];}catch(N){}if(L==="true"){g.cookie("SABRE_ID",P);g(n).unbind("hashchange");n.location.hash="";if(O.submitreport!==null){n.location.pathname="/submitreport";}setTimeout(function(){n.location.reload(true);},1000);}if(M==="true"){n.location.hash="";g("#login").html("").hide();}}});}())};u=function(){this.url="";};b={config:{url:I.whatcounts.subscribe,iframeUrl:"http://$.foxnews.com/feeds/app/newsletters/",sub:"?c=sub",unsub:"?c=unsub",find:"?c=find",email:"&email=",r:"&r=",listId:"&list_id=",cbust:"&cb=",unsubURL:I.whatcounts.unsubscribe,token:"?token=",subRList:"&",callback:"&callback=FOX_whatcounts_UNSUB",cb:"FOX_whatcounts_UNSUB",realms:["foxnews","foxpromos","foxbusiness","foxnewsletter"],janrainHost:"&host=fox-news",Realms:{foxnews:"foxnewsIDList",foxpromos:"foxpromosIDList",foxbusiness:"foxbusinessIDList",foxnewsletter:"foxnewsletterIDList"},idRealms:{foxnewsIDList:"foxnews",foxpromosIDList:"foxpromos",foxbusinessIDList:"foxbusiness",foxnewsletterIDList:"foxnewsletter"},List:{foxnewsIDList:[],foxpromosIDList:[],foxbusinessIDList:[],foxnewsletterIDList:[]},subscribeList:{foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]}},dom:{email:null,newsList:null,load:function(){var J=this;J.email=g("#capture_editProfile_edit_email");J.newsList=g(".news-sub-form").find("label");J.signInform=g("#capture_traditionalRegistration_registrationForm");J.signInEmail=J.signInform.find("#capture_traditionalRegistration_form_item_traditionalRegistration_emailAddress input");J.signInLabels=J.signInform.find(".news-sub-form-reg label");J.signInIframeTarget=g("body");}},gatherData:function(){},janrainNewsAlerts:function(P,O){var N,J;var R={"3DC725E303A24F8D197DA3C8590F80E2":["foxnewsletter","172"],"3DC725E303A24F8D1C12D1E24CDEA25E":["foxnewsletter","166"],"3DC725E303A24F8D9C92271F5026F381":["foxnewsletter","106"],"3DC725E303A24F8D555BC7C7F3FD748B":["foxnewsletter","178"],"3DC725E303A24F8D836CEAE9B885C87D":["foxnewsletter","76"],"3DC725E303A24F8DCF015F07C61BABFD":["foxnewsletter","144"],"3DC725E303A24F8DA5DBC7FFD49BC2B8":["foxnewsletter","160"],C2F278094FACCEA62391025B7A52D8EB:["foxnews","35"],"3DC725E303A24F8DE5C63D14EAB8EF63":["foxnewsletter","162"],"3DC725E303A24F8D95ACD1C9C0564C20":["foxnewsletter","96"],"3DC725E303A24F8DA102192D9D5143D9":["foxnewsletter","173"],"3DC725E303A24F8DAB69E1C048904762":["foxnewsletter","153"],"3DC725E303A24F8DB05092D232355E43":["foxnewsletter","71"],"3DC725E303A24F8DE5173CCC4F027046":["foxnewsletter","171"],"3DC725E303A24F8D41CEA8699C0FE71E":["foxnewsletter","133"],D98A625593049BD2AC0F412BA1AF913A:["foxpromos","174"],D98A625593049BD2CBFB283F5508AF71:["foxpromos","43"],"3DC725E303A24F8D64B4C05965F09E1A":["foxnewsletter","99"],"5C84B893BD6D939E84FAE1A8E6E9525A":["foxbusiness","32"],"3DC725E303A24F8D870B96401050B31F":["foxnewsletter","90"],"3DC725E303A24F8D518A0FB222399489":["foxnewsletter","151"],"3DC725E303A24F8D39740C7B45D15F45":["foxnewsletter","69"],"3DC725E303A24F8D3540B4B6FB335FC8":["foxnewsletter","108"],"3DC725E303A24F8D5E4CD875B68955A6":["foxnewsletter","141"],"3DC725E303A24F8D7E5F3A553E2E6154":["foxnewsletter","122"],"3DC725E303A24F8D883169054890DC1B":["foxnewsletter","183"],"3DC725E303A24F8D02B1F9D9AAF16982":["foxnewsletter","97"],D98A625593049BD23B5BE4FDF9C2351F:["foxpromos","139"]},K={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]},L=[];if(typeof P!="undefined"){if(P instanceof Array){for(var Q=0;Q<P.length;Q++){N=R[P[Q]][0];J=R[P[Q]][1];L.push(J);K[N].push(J);}}else{N=R[P][0];J=R[P][1];L.push(J);K[N].push(J);}}else{N="foxbusiness";J="32";L="32";}var M={listIds:L.join(","),email:O,cb:v(),callback:"badgevilleSubscribeSuccess"};n.badgevilleSubscribeSuccess=function(){};l("badgeville request:",M);g.ajax({url:"http://"+I.whatcounts.subdomain+".foxnews.com/feeds/app/badgeville/newsletters/subscribe.json",data:M,dataType:"script"});},lookUpUser:function(){var M=this,J=M.config;M.dom.load();if(M.dom.email.length>0){var N=0;var K=function(){var O=[J.url,J.find,J.r+J.realms[N],J.email+M.dom.email.attr("value"),J.cbust+v(2,"milliseconds")].join("");g.ajax({url:O,dataType:"text",type:"GET",success:function(T){if(T){if(g.browser.msie){T=T.replace(/\s+/g,"");var S=new ActiveXObject("Microsoft.XMLDOM");S.loadXML(T);var R=g(S).find("lists").text();}else{var R=g(T).find("lists").text();}if(R){R=R.split(",");var Q=function(V){if(R[V]!==""){J.List[J.Realms[J.realms[N]]].push(R[V]);}};for(var U=0,P=R.length;U<P;U+=1){Q(U);}}}if(N<3){N++;K();}else{L();}},error:function(P){l("Error",P);}});};K();function L(){g(document).ready(function(){M.checkNewsLetters();});}}else{l("dom not ready!");}},checkNewsLetters:function(){this.dom.load();var O=this,N=O.dom.newsList,J=O.config;for(var L in J.List){if(J.List[L]!=0){for(var K=0;K<J.List[L].length;K++){var M=g("#"+L+"_"+J.List[L][K]);g(M).checked=true;g(M[0]).attr("checked","checked");}}}O.setEventListener();h.janrain.screen.stateLookUp=false;},onFail:function(){n.scrollTo(0,1070);this.dom.load();var L=this,K=L.dom.newsList,J=L.config;K.each(function(){var N=g(this).find("input"),M;M=N.attr("id").split("_");if(n._NewsletterBindings.subscribe[J.idRealms[M[0]]].indexOf(M[1])>-1){N[0].checked=true;}if(n._NewsletterBindings.original[J.idRealms[M[0]]].indexOf(M[1])>-1&&n._NewsletterBindings.unsubscribe[J.idRealms[M[0]]].indexOf(M[1])===-1){N[0].checked=true;}});L.setEventListener();},updateSub:function(){var S=this,J=S.dom.newsList,N=S.config,Q={},R={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]},O={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]};J.each(function(){var U=g(this).find("input"),T;T=U.attr("id").split("_");if(U.is(":checked")){R[N.idRealms[T[0]]].push(T[1]);}else{if(!h.janrain.screen.postAjaxInit){if(N.List[T[0]].indexOf(T[1])>-1){O[N.idRealms[T[0]]].push(T[1]);}}else{if(N.subscribeList[N.idRealms[T[0]]].indexOf(T[1])>-1){O[N.idRealms[T[0]]].push(T[1]);}}}});N.subscribeList=R;for(var M in n._NewsletterBindings.subscribe){if(n._NewsletterBindings.subscribe[M].length!=0){var L=n._NewsletterBindings.subscribe[M].join(","),K=[N.url,N.sub,N.email+S.dom.email.attr("value"),N.listId+L,N.r+M,N.cbust+v(2,"milliseconds")].join("");for(var P=0;P<n._NewsletterBindings.subscribe[M].length;P++){i.credit({verb:"newsletter subscription",newsletterID:M+n._NewsletterBindings.subscribe[M][P]});}g.ajax({url:K,dataType:"html",type:"POST",success:function(T){},error:function(T){l("Error",data,T);}});}}for(var M in n._NewsletterBindings.unsubscribe){if(n._NewsletterBindings.unsubscribe[M].length!=0){var L=n._NewsletterBindings.unsubscribe[M].join(","),K=[N.unsubURL,N.unsub,N.email+S.dom.email.attr("value"),N.listId+L,N.r+M,N.cbust+v(2,"milliseconds")].join("");n[N.cb]=function(T){};g.ajax({url:K,dataType:"script",async:true,cache:true});}}h.janrain.screen.postAjaxInit=true;},subscribeOnSignIn:function(){var R=this;R.dom.load();var S=R.dom.signInLabels,Q=R.dom.signInEmail.val(),K=R.dom.signInIframeTarget,P=R.config;for(var M in P.subscribeList){P.subscribeList[M]=[];}g(".subIframe").remove();S.each(function(){var U=g(this).find("input"),T;T=U.attr("id").split("_");if(U[0].checked==true){P.subscribeList[P.idRealms[T[0]]].push(T[1]);}});var L=(function(){var T=location.host.split(".");T.pop();T.pop();return T.join(".");})();for(var O in P.subscribeList){if(P.subscribeList[O].length!=0){var N=P.subscribeList[O].join(","),J=[P.iframeUrl.replace("$",L),P.sub,P.email+Q,P.listId+N,P.r+O,P.cbust+v()].join("");K.append('<iframe height=0 width=0 class="subIframe" src="'+J+'"></iframe>');}}i.buffer.push("newsletterSub");},updateSubscribeState:function(){var L=this;this.dom.load();var L=this,K=L.dom.newsList,J=L.config;K.each(function(){var Q=g(this).find("input"),P;P=Q.attr("id").split("_");var O=J.idRealms[P[0]];if(J.subscribeList[O].length!=0){for(var N=0,M=J.subscribeList[O].length;N<M;N+=1){if(P[1]==J.subscribeList[O][N]){Q[0].checked=true;}}}});L.setEventListener(true);},setEventListener:function(O){var P=this,L=P.dom.newsList,J=P.config,N;if(O||!n._NewsletterBindings){N=n._NewsletterBindings={original:{},subscribe:{},unsubscribe:{}};}else{N=n._NewsletterBindings;}var M=function(T,R){var S=[];for(var Q=0;Q<R.length;Q++){if(R[Q]!==T){S.push(R[Q]);}}return S;};var K=function(X,U,S){var V=X.split("_"),R=V[0],W=V[1],Q=(J.idRealms[R])?J.idRealms[R]:false;if(Q){if(!N.subscribe[Q]){N.original[Q]=[];N.subscribe[Q]=[];N.unsubscribe[Q]=[];}if(!S&&U){if(U&&N.subscribe[Q].indexOf(W)===-1){N.original[Q].push(W);}}else{if(S){var T=(N.original[Q].indexOf(W)>-1)?true:false;if(U){if(!T){N.subscribe[Q].push(W);}else{if(N.unsubscribe[Q].indexOf(W)>-1){N.unsubscribe[Q]=M(W,N.unsubscribe[Q]);}}}else{if(T){if(N.subscribe[Q].indexOf(W)>-1){N.subscribe[Q]=M(W,N.subscribe[Q]);}if(N.unsubscribe[Q].indexOf(W)===-1){N.unsubscribe[Q].push(W);}}else{if(N.subscribe[Q].indexOf(W)>-1){N.subscribe[Q]=M(W,N.subscribe[Q]);}}}}}}};L.each(function(){var R=g(this),Q=R.find("input"),S=Q.attr("id");if(!R.data("_bindings")||O){R.data("_bindings",true);K(S,(Q.is(":checked"))?true:false);Q.unbind("change").bind("change",function(){K(S,(Q.is(":checked"))?true:false,true);});}});}};p=function(){var J=this;J.defaultDom();};E={config:{url:I.ureport.url,token:"&token=",email:"&email=",user:"&username=",logout:"http://quote.foxbusiness.com/loggedout",watchList:"http://www.foxbusiness.com/investing/tools/stock-watchlist",portFolio:"http://www.foxbusiness.com/investing/tools/stock-portfolio"},domSet:function(){var L=g("#mod-portfolio-watchlist"),K=g(".section-mod").find(".authentication"),J=K.find(".auth-new"),M=L.find("li:eq(0) > .photo "),Q=L.find("li:eq(1) > .photo "),S=g("#investment-tracker"),O=S.find(".auth-new"),P=g(".dv-feature-9.m-14"),N=P.find("li:eq(0)"),R=P.find("li:eq(1)");return{wAndP:L,auth:K,theW:M,theP:Q,authM:S,aW:N,aP:R,lCNA:J,mCNA:O};},domBehaviorLogin:function(){var J=this;var K=J.domSet();K.auth.hide();K.authM.hide();g("#mod-portfolio-watchlist .content > ul > li .photo a").unbind("click");if(K.theW.size()>0){K.theW.unbind("click").bind("click",function(L){n.location.href=J.config.watchList;L.preventDefault();});K.theP.unbind("click").bind("click",function(L){n.location.href=J.config.portFolio;L.preventDefault();});}if(K.aW.size()>0){K.aW.unbind("click").bind("click",function(L){n.location.href=J.config.watchList;L.preventDefault();});K.aP.unbind("click").bind("click",function(L){n.location.href=J.config.portFolio;L.preventDefault();});}},domBehaviorLogout:function(){var J=this;var K=J.domSet();K.auth.show();K.authM.show();if(K.theW.size()>0){K.theW.unbind("click").bind("click",function(L){janrain.capture.ui.renderScreen("signIn");L.preventDefault();});K.theP.unbind("click").bind("click",function(L){janrain.capture.ui.renderScreen("signIn");L.preventDefault();});}if(K.aW.size()>0){K.aW.unbind("click").bind("click",function(L){janrain.capture.ui.renderScreen("signIn");L.preventDefault();});K.aP.unbind("click").bind("click",function(L){janrain.capture.ui.renderScreen("signIn");L.preventDefault();});}},defaultDom:function(){var J=this;var K=J.domSet();K.lCNA.unbind("click").bind("click",function(L){janrain.capture.ui.renderScreen("signIn");L.preventDefault();});K.mCNA.unbind("click").bind("click",function(L){janrain.capture.ui.renderScreen("signIn");L.preventDefault();});},idmsLogin:function(M,L,O){if(!F("foxbusiness")){return false;}var N=this,J="FOX_ureport_SABRE",K=N.config;if(g.cookie("p_IDMS")!=null){N.domBehaviorLogin();return false;}n[J]=function(P){g.cookie("p_IDMS",P.idms,{path:"/",domain:"foxbusiness.com"});N.domBehaviorLogin();};g.ajax({url:K.url+J+K.token+M+K.email+L+K.user+O,async:true,cache:true,dataType:"script"});},idmsLogout:function(){var J=this;if(g.cookie("p_IDMS")!=null){J.clearIdmsCookie();J.domBehaviorLogout();if(n.location.pathname.indexOf("stock-watchlist")>1||n.location.pathname.indexOf("stock-portfolio")>1){setTimeout(function(){n.location.reload();},3000);}}},clearIdmsCookie:function(){g.cookie("p_IDMS",null);g.cookie("p_IDMS",null,{path:"/"});g.cookie("p_IDMS",null,{path:"/",domain:"foxbusiness.com"});}};e=function(){};t={networkShareSuccess:function(){g.ad.track({"network-share-success":{}});},emailShareSuccess:function(){g.ad.track({"email-share-success":{}});},networkShareStart:function(){g.ad.track({"network-share-start":{}});},emailShareStart:function(){g.ad.track({"email-share-start":{}});},registrationStart:function(){g.ad.track({"registration-start":{}});},registrationComplete:function(){g.ad.track({"registration-complete":{}});},logins:function(){g.ad.track({logins:{}});},profileUpdates:function(){g.ad.track({"profile-updates":{}});},fbShare:function(){g.ad.track({"fb-share":{}});},twttrFollow:function(){g.ad.track({"twttr-follow":{}});},commentPost:function(){g.ad.track({"comment-post":{}});},commentLoad:function(){g.ad.track({"comment-load":{}});},commentRead:function(){g.ad.track({"comment-read":{}});}};A=function(){};h={data:{body:{listener:null}},domEvents:{loginSuccess:function(){var J=r.setDomReady;AUTH_Manager.onReady("livefyre",function(){setTimeout(function(){G.API.onLoginSuccessFromJanrain();},500);});if(n.AUTH_LoginState){AUTH_LoginState.trigger("onLogin");}J.acc.css({display:"block"});J.acc.removeClass("none");J.hasAccount.css({display:"block"});J.noAccount.css({display:"none"});},logoutSuccess:function(){var J=r.setDomReady;if(n.AUTH_LoginState){AUTH_LoginState.trigger("onLogout");}J.acc.css({display:"block"});J.acc.removeClass("none");J.acc.removeClass("inactive");J.acc.removeClass("active");J.hasAccount.hide();J.noAccount.show();},editProfile:function(){var J=r.setDomReady;J.profile.bind("click",function(K){h.editProfile(K);});},tabControlsForActivityPages:function(){if(typeof n.refreshUR=="function"){n.refreshUR();}if(location.href.indexOf("tab=ureport")>-1){g(".tabs").removeClass("active");g("#ureport-pro-tab").addClass("active");g("#ureport-pro-wrap").css("display","block");g("#livefyre-wrap").css("display","none");}g("#accounts-header").find(".tabs").unbind("click");g("#accounts-header").find(".tabs").click(function(){var K=g(this),L=K.attr("id"),J=g(".wrap");J.css("display","none");g(".tabs").removeClass("active");K.addClass("active");if(L=="account-tab"){g("#account-wrap").css("display","block");}if(L=="ureport-pro-tab"){g("#ureport-pro-wrap").css("display","block");}if(L=="ureport-act-tab"){g("#livefyre-wrap").css("display","block");}});}},onLoginState:function(J){if(n.AUTH_LoginState){AUTH_LoginState.bind("onLogin",J);}},onLogoutState:function(J){if(n.AUTH_LoginState){AUTH_LoginState.bind("onLogout",J);}},accountDisplayBehaviour:function(L){var M=r.setDomReady,J;if(!M.acc.hasClass("alt-style")){M.acc.hover(function(){M.accountNav.addClass("hover");J="over;";},function(){M.accountNav.removeClass("hover");J="out";});M.accountNav.click(function(N){if(M.acc.hasClass("active")){M.acc.removeClass("active").addClass("inactive");}else{M.acc.addClass("active").removeClass("inactive");}});M.body.mousedown(function(N){if(J==="out"){if(M.acc.hasClass("active")){M.acc.removeClass("active").addClass("inactive");}}});}else{var K=M.acc.find(".user-options >ul>li:eq(0) > a");if(K.size()>0){K.click(function(){h.editProfile();});}}M.uReport().redBtn.bind("click",function(N){if(C.API.token===""){h.janrain.signin();return false;}});h.domEvents.editProfile();},janrain:{signin:function(){n.janrain.capture.ui.renderScreen("signIn");return false;},traditionalSigin:function(){janrain.capture.ui.modal.open("traditionalRegistration");return false;},traditionalDisplayName:function(J){var K=J.displayName,L=document.getElementById("displayNameData");if(K&&L){L.innerHTML=K;}},getJanrainUserAPI:function(K,J){C.API.execute(K,J);},signOut:function(){janrain.capture.ui.endCaptureSession();n.Backplane.expectMessages("identity/logout");},registrationStart:function(){t.registrationStart();},successfulRegistration:function(K){b.subscribeOnSignIn();C.API.token=K.accessToken;if(K&&K.action==="socialRegister"){var J="JANRAIN_socialAvatarUpdate",L="https://signin.foxnews.com/entity.update?type_name=user&access_token="+K.accessToken+"&attribute_name=photo_approval_status&value=%22approved%22&jsonp="+J;if(typeof n[J]!=="function"){n[J]=function(M){if(M.stat==="ok"){G.API.onProfileUpdate();}else{}};}g.ajax({url:L,dataType:"script",async:true,cache:true});}janrain.capture.ui.createCaptureSession(K.accessToken);n.Backplane.expectMessages("identity/login");C.session=true;C.sessionType="register";h.domEvents.loginSuccess();h.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:K.accessToken});i.events.chatCheck();t.registrationComplete();if(!K.renders){janrain.capture.ui.modal.close();}},successfulLogin:function(J){janrain.capture.ui.modal.close();janrain.capture.ui.createCaptureSession(J.accessToken);n.Backplane.expectMessages("identity/login");C.session=true;C.sessionType="signin";h.janrain.screen.editProfile.reloadProfile();h.domEvents.loginSuccess();C.API.token=J.accessToken;h.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:J.accessToken});if(n.FOX_Janrain_Page_Type==="password-reset"){setTimeout(function(){n.location="http://www.foxnews.com/community/user/profile/edit";},10000);}t.logins();i.buffer.push("returnEightPerMonth");i.events.chatCheck();},sessionFound:function(J){if(!C.API.requestSent){janrain.capture.ui.createCaptureSession(J.accessToken);h.domEvents.loginSuccess();C.API.token=J.accessToken;n.Backplane.expectMessages("identity/login");h.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:J.accessToken});C.session=true;C.sessionType="found";i.events.chatCheck();}},sessionNotFound:function(J){h.domEvents.logoutSuccess();C.session=false;C.sessionType="notfound";if(F("ureport")){o.uLogout();}if(F("foxbusiness")){E.idmsLogout();}},sessionEnded:function(){if(F("ureport")){o.uLogout();}C.session=false;C.sessionType="logout";try{if(fyre!=="undefined"&&fyre!=null){fyre.conv.BackplaneAuthDelegate.prototype.logout();}}catch(J){}i.events.unsubscribe();h.domEvents.logoutSuccess();E.idmsLogout();},sessionCreated:function(J){},tokenRefreshed:function(){if(z.janrainFlow==="profileFlow"){setTimeout(function(){janrain.capture.ui.renderScreen("signIn");},1000);}},tokenExpired:function(J){h.janrain.signOut();},accessDenied:function(){setTimeout(function(){janrain.capture.ui.renderScreen("signIn");},1000);},onAuthWidgetLoad:function(J){},onRefreshToken:function(J){janrain.capture.ui.createCaptureSession(J.accessToken);C.API.token=J.accessToken;},backplaneReady:function(J){AUTH_Manager.fireReady("backplane");if(g.browser.msie&&parseInt(g.browser.version,10)<=7){var K=g(".comments");if(K.size()>0){K.remove();}g("#livefyre_comment_stream").html("<p>To participate in commenting, please use Internet Explorer 8 or above.</p>");}else{G.init();}g(n).trigger("janrainShareInit");},displayPublicProfile:function(J){s.userLivefyre.lookUpUUID=J;i.getBadgesFromOthers.turnIdToEmail(J);janrain.capture.ui.getPublicProfile("publicProfile",J);},screen:{currentScreen:null,stateLookUp:true,postAjaxInit:false,failedToUpdate:null,stateOfEditProfile:false,editProfile:{reloadProfile:function(){if(z.janrainFlow==="profileFlow"){g("#captureAccessDeniedBuiltIn").remove();janrain.capture.ui.renderScreen("editProfile");}},onProfileUpdate:function(J){n.scrollTo(0,0);G.API.onProfileUpdate();b.updateSub();h.janrain.screen.failedToUpdate=false;t.profileUpdates();h.janrain.screen.editProfile.completedProfileCheck();},onProfileAutoSave:function(J){if("durationSinceLastUpdate" in J){document.getElementById("capture_profile_saved").style.display="block";document.getElementById("capture_alert_callout").innerHTML=J.durationSinceLastUpdate;}},completedProfileCheck:function(){var L=false,J=g("#capture_editProfile_edit_zip").attr("value"),M=g("#capture_editProfile_edit_city").attr("value"),N=g("#capture_editProfile_edit_firstName").attr("value"),P=g("#capture_editProfile_edit_email").attr("value"),Q=g("#capture_editProfile_edit_gender").attr("value"),K=g("#capture_editProfile_edit_country").find("option:selected").attr("value"),R=g("#capture_editProfile_edit_address1").attr("value"),O=g("#capture_editProfile_edit_lastName").attr("value");if(N!==""&&O!==""&&P!==""&&K!==""&&R!==""&&M!==""&&J!==""&&Q!=="default"&&N!==" "&&O!==" "&&P!==" "&&R!==" "&&M!==" "&&J!==" "){i.trigger("completeProfile",s.uuid);}else{}},onProfileFailedSave:function(){h.janrain.screen.failedToUpdate=true;}},registration:{clearInput:function(){}},uiReady:function(){if(z.janrainFlow==="profileFlow"){janrain.capture.ui.renderScreen("editProfile");}else{if(z.janrainFlow==="emailFlow"){janrain.capture.ui.renderScreen("registrationVerify");}else{if(z.janrainFlow==="passwordFlow"){janrain.capture.ui.renderScreen("resetPassword");}}}},onScreenShow:function(L){var S=h.janrain.screen;switch(L.screen){case"editProfile":S.currentScreen="editProfile";g("#captureRetrievingUserDataBuiltIn").hide();var M=false;setTimeout(function(){g(".cancel-button").click(function(){if(n.location.href.indexOf("#")>1){n.history.go(-2);}else{n.history.go(-1);}});function ac(ad,ae,af){if(ad==null){return false;}if(typeof n.attachEvent==="object"){ad.attachEvent("on"+ae,af);}else{ad.addEventListener(ae,af,false);}}var V=document.getElementById("capture_editProfile_edit_country"),W=g("#capture_editProfile_edit_state"),ab=g("#capture_editProfile_display_indicator_public_edit_state"),U=g("#capture_editProfile_display_indicator_private_edit_state"),Y=g("#capture_editProfile_display_option_public_edit_state"),aa=g("#capture_editProfile_display_option_private_edit_state"),X=g("#capture_editProfile_form_item_edit_state").find("input");function Z(){if(!V||!W){return false;}var ad=W.find("option:selected").attr("value");if(V.options[V.selectedIndex].value==="United States"){if(W){if(W.attr("disabled")&&ad!=="state"){ab.removeClass("capture_toggled");U.addClass("capture_toggled");Y.removeClass("capture_checked");aa.addClass("capture_checked");X.attr("value","private");W.attr("disabled",false);W.css({color:"black"});}else{if(W.attr("disabled")&&ad==="state"){W.attr("disabled",false);W.css({color:"black"});}}}}else{if(W){X.attr("value","private");W.attr("disabled",true);W.css({color:"lightgrey"});ab.removeClass("capture_toggled");U.addClass("capture_toggled");Y.removeClass("capture_checked");aa.addClass("capture_checked");}}}if(V&&!M){M=true;ac(V,"change",Z);}Z();},100);try{var R,J=g(".janrain_traditional_account_only");if(typeof n.localStorage!=="undefined"){R=localStorage.getItem("janrainLastAuthMethod");Q();}else{R=g.cookie("janrainLastAuthMethod");Q();}function Q(){if(R==="socialSignin"&&J.size()>0){J.remove();}}}catch(O){}break;case"publicProfile":var T=g(".make-acc");if(!C.session){T.show();}else{T.hide();}i.setUp();break;case"forgotPasswordSuccess":if(n.FOX_Janrain_Page_Type==="password-reset"){setTimeout(function(){n.location="http://www.foxnews.com";},5000);}break;case"returnTraditional":setTimeout(function(){var U=janrain.capture.ui.getProfileCookieData("displayName"),V=document.getElementById("displayNameData");if(U&&V){V.innerHTML=U;}},500);break;case"registrationVerified":var K=g("#redirectTime"),N=9;P();function P(){setTimeout(function(){if(N===0){n.location="http://www.foxnews.com/community/user/profile/edit";}K.html(" "+N+((N<=1)?" second":" seconds"));N-=1;P();},1000);}break;default:break;}},onRenderComplete:function(K){var M=h.janrain.screen;switch(K.screen){case"editProfile":if(M.stateLookUp){b.lookUpUser();}else{if(M.failedToUpdate){b.onFail();}else{b.updateSubscribeState();}}var J=setTimeout(function(){try{if(K.builtInScreenRendered==="retrievingUserData"&&K.renderingBuiltInScreen){h.janrain.screen.stateOfEditProfile=true;}else{if(h.janrain.screen.stateOfEditProfile&&M.failedToUpdate==null){o.uReportTab();G.activityTab.initCallFromJanrain();}else{if(h.janrain.screen.stateOfEditProfile&&!M.failedToUpdate){o.uReportTab();G.activityTab.loadDataWhenFailed();i.getBadgeFromSelf.gatherUserInfo();}else{if(h.janrain.screen.stateOfEditProfile&&M.failedToUpdate){G.activityTab.loadDataWhenFailed();i.getBadgeFromSelf.gatherUserInfo();}}}}}catch(O){if(h.janrain.screen.stateOfEditProfile){o.uReportTab();G.activityTab.initCallFromJanrain();i.getBadgeFromSelf.gatherUserInfo();}}clearTimeout(J);},100);break;case"publicProfile":if(!K.renderingBuiltInScreen){C.publicProfileLinkUUID();if("lookUpUUID" in s.userLivefyre){G.API.displayDataToPublicProfile(s.userLivefyre.lookUpUUID);}else{G.API.displayDataToPublicProfile(s.uuid);}auth_fox.ureport.uReportIdLookupAndDisplay(g(".capture_display_name").text(),true);if(typeof Badgeville!=="underfined"){if(z.janrainFlow==="profileFlow"){i.getBadgesFromOthers.turnIdToEmail(K.flow.userUUID);}i.getBadgesFromOthers.getPlayer(i.getBadgesFromOthers.email);}}break;}var L=document.getElementById("capture_editProfile_resendLink");if(L){L.hasBeenClicked=false;g(L).click(function(){L.hasBeenClicked=true;});}var N=document.getElementById("forgotPassword");if(N&&N.style.display==="block"){if(C.reset){document.getElementById("capture_forgotPassword_forgotPassword_emailAddress").value="";document.getElementById("capture_forgotPassword_forgotPasswordForm_errorMessages").style.display="none";}}}},share:{shareSendComplete:function(J){t.emailShareSuccess();}},errorEvent:function(J){try{switch(J.stat){case"error":break;default:break;}}catch(K){}},onModalClose:function(){C.reset=true;},validation:{onValidationSuccess:function(){var J=document.getElementById("forgotPassword");if(J&&J.style.display==="block"){C.reset=false;}}},emailSent:function(J){var K=document.getElementById("capture_editProfile_resendLink"),L=g(K).parent();if(K){if(K.hasBeenClicked){L[0].removeChild(K);L.append('<a style="cursor: default; ">Email Sent</a>');}}}},livefyre:{displayLogo:function(){g("#livefyre_comment_stream").append('<div id="powered_by_livefyre_new"><a href="http://livefyre.com" target="_blank">Powered by Livefyre</a></div> ');},hashComment:function(){var L;try{if(n.FOX_metadescriptor&&n.FOX_metadescriptor.name["prism.subsection1"]==="willisreport"){g("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>');}else{if(n.location.host.indexOf("nation")>-1||g('meta[name="dc.type"]').attr("content")==="Text.Article"){var M=g(".dv-util > .dv-util-1 > a:eq(1)"),K=M.attr("href");K=K.replace("#disqus_thread","#commentsthread");M.attr("href",K);g("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>');}else{g("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>');}}}catch(J){}},logOut:function(){g.loadAttempt(60,250,function(){return(g("#livefyre_comment_stream").find(".fyre-user-loggedin").size()>0)?true:false;},function(){fyre.conv.BackplaneAuthDelegate.prototype.logout();n.Backplane.expectMessages("identity/logout");});},populatePublicProfile:function(){var J=r.setDomReady.publicProfile();J.comments.text(s.commentCount);J.likes.text(s.likeCount);s.commentCount=0;s.likeCount=0;}},badgeVille:{backplane:function(){}},displayName:function(){var J=this,K=r.setDomReady;if(K.acc.hasClass("alt-style")){K.user.find(".encapsulate p").html("Welcome, <strong>"+s.displayName+"</strong>");}else{if(K.name.size()>0){K.name.text(s.displayName);}else{if(auth_fox.dom.setDomReady.userOptions.find("p").size()>0){auth_fox.dom.setDomReady.userOptions.find("p").html("You're logged in as<span>"+s.displayName+"</span>");}}}h.domEvents.loginSuccess();},accountFuncBehaviour:function(){var K=r.setDomReady,J=this;K.login.addClass(z.classLogin);K.login.bind("click",h.janrain.signin);K.register.bind("click",h.janrain.traditionalSigin);K.logout.bind("click",h.janrain.signOut);},editProfile:function(J){n.location=I.editProfile;},displayShowsProfile:function(){var J=r.setDomReady.acc.find("strong");J.css("cursor","pointer");J.click(function(){h.editProfile();return false;});}};d=function(){};s={uuid:null,email:"",likeCount:0,commentCount:0,displayName:"",userJanrain:{},userLivefyre:{},userBadgeville:{}};var a=(function(){var J=function(){this.setDependencies();this.set();};J.prototype.set=function(){z.janrainFlow=(function(){var P="authFlow",O=(n.FOX_Janrain_Page_Type)?n.FOX_Janrain_Page_Type:false;switch(O){case"logout":P="logoutFlow";break;case"email-verification":P="emailFlow";break;case"edit-profile":P="profileFlow";break;case"password-reset":P="passwordFlow";break;case"public-profile":P="publicFlow";break;default:P="authFlow";break;}return P;}());var K=[["tools",w,f],["dom",r,c],["require",z,k],["backplane",j,D],["janrain",C,m],["livefyre",G,q],["badgeville",i,B],["events",h,A],["ureport",o,H],["user",s,d],["omniture",t,e],["whatcounts",b,u],["idms",E,p]];var M=new y(K),N;n.auth_fox=M;var L=function(){M.require.loadTemplate();M.events.accountDisplayBehaviour();M.events.accountFuncBehaviour();};if(typeof M.dom.setDomReady==="object"){N=M.dom.setDomReady;L();}else{N=M.dom.setDomReady(function(O){r.setDomReady=O;L();});}if(M.require.janrainFlow==="publicFlow"){M.livefyre.activityTab.tabActivity();auth_fox.livefyre.activityTab.hashTagGatherer().getPhotosAndId();auth_fox.ureport.uReportIdLookupAndDisplay(location.href.split("#")[1]);}};J.prototype.setDependencies=function(){n.AUTH_Manager=new FOX_DependencyManager();AUTH_Manager.addInstance("janrain",["janrain"]);AUTH_Manager.addInstance("capture",["janrain","capture"]);AUTH_Manager.addInstance("livefyre",["janrain","backplane","livefyre"]);AUTH_Manager.addInstance("backplane",["backplane"]);g.loadAttempt(60,500,function(){return(n.fyre&&g("#livefyre_comment_stream .fyre-widget").size()>0)?true:false;},function(){AUTH_Manager.fireReady("livefyre");});AUTH_Manager.onReady("livefyre",function(){l("********** LIVEFYRE IS READY !!! **********");});AUTH_Manager.onReady("janrain",function(){l("********** JANRAIN IS READY !!! **********");});AUTH_Manager.onReady("backplane",function(){l("********** BACKPLANE IS READY !!! **********");});AUTH_Manager.onReady("capture",function(){l("********** CAPTURE IS READY !!! **********");});if(n.CallStackTrigger){n.AUTH_LoginState=new CallStackTrigger();AUTH_LoginState.bind("onLogin",function(){l("[AUTH_LoginState] 'onLogin' triggered.");});AUTH_LoginState.bind("onLogout",function(){l("[AUTH_LoginState] 'onLogout' triggered.");});}};return J;}());if(!g.loadAttempt){(function(){function K(L){return typeof L==="function"?!0:!1;}var J=function(){var Q,L=arguments;if(L.length===0){return !1;}var M={attempt:0,timeout:500};if(L.length===1&&typeof L[0]==="object"){for(Q in L[0]){M[Q]=L[0][Q];}if(M.callback){Q=M.callback;}else{return !1;}if(!Q.check||!Q.success){return !1;}else{M._check=Q.check,M._success=Q.success;}if(Q.timedOut){M._timeout=Q.timedOut;}}else{if(!isNaN(L[0])&&!isNaN(L[1])&&K(L[2])&&K(L[3])){M.attempt=L[0];M.timeout=L[1];M._check=L[2];M._success=L[3];if(L[4]){M._timeout=L[4];}if(L[5]){M._abort=L[5];}}else{if(K(L[0])&&K(L[1])){M._check=L[0];M._success=L[1];if(L[2]){M._timeout=L[2];}if(L[3]){M._abort=L[3];}}else{return !1;}}}if(!K(M._check)||!K(M._success)){return !1;}if(!K(M._timeout)){M._timeout=function(){};}if(isNaN(M.timeout)){return !1;}else{M.timeout=parseInt(M.timeout,10);}if(isNaN(M.attempt)){return !1;}else{M.attempt=parseInt(M.attempt,10);}var P=!1,N=!1;if(M.attempt&&M.timeout){var O=function(){N?clearTimeout(P):M._check()?(M._success(),clearTimeout(P)):M.attempt>0?P=setTimeout(function(){O();},M.timeout):M._timeout();M.attempt--;};O();}else{P=setInterval(function(){N?clearInterval(P):M._check()&&(M._success(),clearInterval(P));},M.timeout);}return{abort:function(){N=!0;}};};if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:J});}else{if(!n.loadAttempt){n.loadAttempt=J;}}})();}function v(N,M){N=N||2;var J=new Date();M=J.getMilliseconds()||"";var O=J.getFullYear().toString()+(J.getMonth()+1).toString()+J.getDate().toString()+M,L=J.getHours()+1,K=J.getMinutes();O+=L.toString()+((N&&!isNaN(N))?(Math.floor(K/parseInt(N,10))).toString():"");return O;}return a;})(jQuery,window);(function(d,c){d(document).ready(function(){var g=(c.auth_fox&&c.auth_fox.whatcounts&&c.auth_fox.whatcounts.janrainNewsAlerts)?true:false;if(!g){return false;}d("#newsletter_form, #rss_newsletter_form").each(function(){var h=d(this);h.find('input[name="submit"]').click(function(){var j=(h.find("#newsletter_input").size()>-1)?h.find("#newsletter_input").val():h.find("#newsletter_email").val();if(d('input:[name="propID_terms"]').size()>0){var i=[];h.find(".option").each(function(){if(d(this).find('input:[name="propID_terms"]').is(":checked")){i.push(d(this).find('input:[name="slid"]').val());}});}else{var i=h.find("#newsletter_slid").val(),j=h.find("#newsletter_email").val();}auth_fox.whatcounts.janrainNewsAlerts(i,j);});});d(function(){d("#newsAlertsEmailSignup.component").each(function(){var h=d(this);FNHPtoSLIDS={BreakingNews:"C2F278094FACCEA62391025B7A52D8EB",BusinessNews:"5C84B893BD6D939E84FAE1A8E6E9525A",GretaWire:"D98A625593049BD23B5BE4FDF9C2351F",DailyNewsletter:"3DC725E303A24F8DA102192D9D5143D9",BestOfBusiness:"3DC725E303A24F8D39740C7B45D15F45",TopHeadlines:"3DC725E303A24F8DB05092D232355E43",MonthlyPolitics:"3DC725E303A24F8D836CEAE9B885C87D",LeisureLedger:"3DC725E303A24F8D02B1F9D9AAF16982",Fox411:"3DC725E303A24F8D9C92271F5026F381",BestOfOpinion:"3DC725E303A24F8D39740C7B45D15F45",SciTechGeekSheet:"3DC725E303A24F8DAB69E1C048904762"},h.find('input[name="submit"]').click(function(){var j=h.find('input:[name="email"]').val();if(d('input:[name="propID_terms"]').size()>-1){var i=[];h.find(".option").each(function(){var k=d(this).find('input:[name="propID_terms"]');if(k.is(":checked")){i.push(FNHPtoSLIDS[k.attr("id")]);}});}auth_fox.whatcounts.janrainNewsAlerts(i,j);});});});});var f,a,e;c.janrainShareOnload=function(){c.janrainShareLoaded=true;d(c).trigger("janrainShareModuleInit");};var b={domain:function(){return false;},meta:function(g,h){if(h==="prop"){h="property";}return d("meta["+h+'="'+g+'"]').attr("content");},metadata:function(k){var g=k.split("::"),i=g[0],j=g[1],h=g[2];return(b.meta(j,i)===h)?true:false;},trim:function(h,g){if(!h){return"";}if(h.length>g){h=h.substring(0,g)+" ...";}return h;},isDevice:function(){var g=false;g=("createTouch" in document)?true:false;g=(!g&&navigator.userAgent.match(/BlackBerry/i))?true:g;return g;}};a=function(){var g=this;this.ready=false;if(c.janrainShareLoaded){this.init();}else{d(c).bind("janrainShareModuleInit",function(){g.init();});}};a.prototype={init:function(){this.ready=true;this.janrain=c.janrain;this.setCallbacks();this.setTemplates();this.articleObj={};},setCallbacks:function(){var i=this.janrain,h=this.resetEmail,g=this;g.responseProvider=null;i.events.onShareLoginStart.addHandler(h);i.events.onShareLoginCancel.addHandler(h);i.events.onShareLoginError.addHandler(h);i.events.onShareSendStart.addHandler(function(j){if(c.auth_fox){if(j.provider==="facebook"){c.auth_fox.omniture.networkShareSuccess();g.responseProvider="facebook";}else{if(j.provider==="twitter"){c.auth_fox.omniture.networkShareSuccess();g.responseProvider="twitter";}else{if(j.provider==="linkedin"){c.auth_fox.omniture.networkShareSuccess();g.responseProvider="linkedin";}else{if(j.mode!=="email"){c.auth_fox.omniture.networkShareSuccess();}else{if(j.mode==="email"){c.auth_fox.omniture.emailShareSuccess();g.responseProvider="email";}}}}}}});i.events.onShareSendComplete.addHandler(function(j){switch(g.responseProvider){case"facebook":d("#janrain-share-providerpage-facebook").find("span.janrain-share-login-button-text").text("Shared on Facebook");break;case"twitter":d("#janrain-share-providerpage-twitter").find("span.janrain-share-login-button-text").text("Shared on Twitter");break;case"linkedin":d("#janrain-share-providerpage-linkedin").find("span.janrain-share-login-button-text").text("Shared on LinkedIn");break;default:d("#janrain-share-providerpage-email").find("span.janrain-share-login-button-text").text("Shared by Email");break;}auth_fox.badgeville.trigger("contentShare",g.articleObj.title);auth_fox.janrain.API.update("entity.update",auth_fox.janrain.API.updateAPI("share"));});},setTemplates:function(){d(".janrain-share-input").attr("placeholder","Write your message");d(".janrain-share-contactadd-input-placeholder").attr("placeholder","Add a contact");d(".janrain-share-contact-input-placeholder").attr("placeholder","Type contact name");d(".janrain-share-bubble").remove();d(".janrain-share-login-prefs-name").remove();d(".janrain_modal_closebutton").attr("href","javascript:;");this.resetEmail();},show:function(j,i,g){var l=this.janrain;var h=i.provider;var k=i.data;this.articleObj=i.data;l.engage.share.show();l.engage.share.setOrientation("landscape");l.engage.share.setTitle(k.title);l.engage.share.setUrl(k.linkBack);l.engage.share.setActionLink({name:"Read more",link:k.actLink});l.engage.share.setImage(k.image);l.engage.share.setDescription(k.desc);l.engage.share.showProvider(h);this.formatPreviewText({title:k.title,desc:k.desc,url:k.actLink});},resetEmail:function(){d(".janrain-share-login-messageemail, .janrain-share-login-messageemailshort").remove();d("#janrain-share-login-button-contact-email-yahoo .janrain-share-login-button-text").text("Yahoo");d("#janrain-share-login-button-contact-email-google .janrain-share-login-button-text").text("Google");},formatPreviewText:function(g){d(".janrain-share-preview-title").text(b.trim(g.title,70));d(".janrain-share-preview-url").text(b.trim(g.url,40));d(".janrain-share-preview-description").text(b.trim(g.desc,130));}};f=function(g){this.cfg=g;this.plugin=g.plugin;};f.prototype={set:function(j,i,g){var h=this,j=d(j);if(b.isDevice()){return j.hide();}j.unbind("click").bind("click",function(k){h.show(k,i,g);return false;});},reset:function(k,j,h){var i=this,k=d(k),g=j.data;if(b.isDevice()){return k.hide();}k.unbind("click").bind("click",function(l){j.data=g(l);i.show(l,j,h);return false;});},setLive:function(k,j,h){var i=this,k=d(k),g=j.data;if(b.isDevice()){return k.hide();}k.unbind("click").live("click",function(l){j.data=g(l);i.show(l,j,h);return false;});},show:function(j,i,g){var h=this.plugin;if(i.provider==="email"){c.auth_fox.omniture.emailShareStart();}else{c.auth_fox.omniture.networkShareStart();}h.show(j,i,g);return false;},showShare:function(h){var g=this.plugin;if(h.provider==="email"){c.auth_fox.omniture.emailShareStart();}else{c.auth_fox.omniture.networkShareStart();}g.show(null,h,null);return false;},hide:function(i,h,g){}};e=function(){var i={},h=b.meta,g=function(j,k){i[j]=k;};g("v8-article",function(){var n=d("#article-title").text()||h("og:title","prop")||h("dc.title","name");var l=d("link[rel='image_src']").attr("href")||h("og:image","prop")||parsers.defaultImg.v8Article;var m=d((c.vcmArticleInfo&&vcmArticleInfo.summary)?vcmArticleInfo.summary:"<div></div>").text()||h("description","name")||h("dc.description","name");var j,k;j=k=(function(){var r=c.location,p,o=d('link[rel="shorturl"]'),q=d('link[rel="canonical"]');if(o.size()>0){p=o.attr("href");}else{if(q.size()>0){p=q.attr("href");}else{p=r.protocol+"//"+r.hostname+r.pathname;}}return p;}());return{title:n,image:unescape(l),desc:m,userMessage:"",actLink:j,linkBack:k};});g("recipe-article",function(){var n=d("#article-title").text()||h("og:title","prop")||h("dc.title","name");var l=d("link[rel='image_src']").attr("href")||h("og:image","prop")||parsers.defaultImg.v8Article;var m=h("description","name")||h("dc.description","name");var j,k;j=k=(function(){var r=c.location,p,o=d('link[rel="shorturl"]'),q=d('link[rel="canonical"]');if(o.size()>0){p=o.attr("href");}else{if(q.size()>0){p=q.attr("href");}else{p=r.protocol+"//"+r.hostname+r.pathname;}}return p;}());return{title:n,image:unescape(l),desc:m,userMessage:"",actLink:j,linkBack:k};});g("nation-article",function(){var n=d("#article-title").text()||h("og:title","prop")||h("dc.title","name");var l=d("link[rel='image_src']").attr("href")||h("og:image","prop")||parsers.defaultImg.v8Article;var m=h("description","name")||h("dc.description","name");var j,k;j=k=(function(){var r=c.location,p,o=d('link[rel="shorturl"]'),q=d('link[rel="canonical"]');if(o.size()>0){p=o.attr("href");}else{if(q.size()>0){p=q.attr("href");}else{p=r.protocol+"//"+r.hostname+r.pathname;}}return p;}());return{title:n,image:unescape(l),desc:m,userMessage:"",actLink:j,linkBack:k};});g("live-event-article",function(){var o=d("#article-title").text()||h("og:title","prop")||h("dc.title","name");var m=d("link[rel='image_src']").attr("href")||h("og:image","prop")||parsers.defaultImg.v8Article;var n=h("description","name")||h("dc.description","name");var j,l;j=l=(function(){var s=c.location,q,p=d('link[rel="shorturl"]'),r=d('link[rel="canonical"]');if(p.size()>0){q=p.attr("href");}else{if(r.size()>0){q=r.attr("href");}else{q=s.protocol+"//"+s.hostname+s.pathname;}}return q;}());var k={title:o,image:unescape(m),desc:n,userMessage:"",actLink:j,linkBack:l};return{title:o,image:unescape(m),desc:n,userMessage:"",actLink:j,linkBack:l};});g("nation-front",function(){return function(k){var p,n,o,l,m;var j=d(k.currentTarget).parentsUntil("li");j.find("img.m-1").each(function(){n=("http://"+c.location.host+d(this).attr("src"))||h("og:image","prop");});j.find(".a-3").each(function(){var q=d(this);p=d(this).text();o="America's Talking - All Opinions Welcome. Let your voice be heard @ FoxNation.com.";l=m=q.attr("href");});return{title:p,image:unescape(n),desc:o,userMessage:"",actLink:l,linkBack:m};};});g("drupal6-shows-article",function(){var n=d("#content-main h3 a").text()||h("dc.title","name")||h("og:title","name");var m=(function(){var o="";var p=d("#content-main .deck > p, #content-main .transcript > p").each(function(){var q=d(this);if(q.html().indexOf("<script")<0&&q.html().indexOf("<object")<0){if(o.length<360){o+=q.text();}}});if(o.length>360){o=o.substring(0,357)+"...";}return o;}());var j,l;j=l=(function(){var r=c.location,p,o=d('link[rel="shorturl"]'),q=d('link[rel="canonical"]');if(o.size()>0){p=o.attr("href");}else{if(q.size()>0){p=q.attr("href");}else{p=r.protocol+"//"+r.hostname+r.pathname;}}return p||h("og:url","prop");}());var k=(function(){var o=d("#content-main .photo > img, #content-main img.alignleft, #content-main img.alignright").attr("src");return(o?("http://"+c.location.host+o):h("og:image","prop"));}());return{title:n,image:unescape(k),desc:m,userMessage:"",actLink:j,linkBack:l};});g("drupal7-shows-blog",function(){var k=function(l){return(l.indexOf("http")>-1)?l:"http://"+c.location.host+l;};var j=function(){var o=c.location,m=null,l=d('link[rel="shorturl"]'),n=d('link[rel="canonical"]');if(l.size()>0&&l){m=l.attr("href");}else{if(n.size()>0&&n){m=n.attr("href");}else{m=o.protocol+"//"+o.hostname+o.pathname;}}return m||h("og:url","prop");};return function(q){var p=d(q.currentTarget),r=p,l=(d(".post").size()>0)?".post":"#post-detail",u=r.parentsUntil(".content",l);var t=u.find(".twitter-tweet-rendered .entry-title").text()||u.find("h2").text()||u.find(".post-content > p").text()||u.find("#twtr-widget > p").text()||u.find("p:first").text()||d("#article-title").text()||h("og:title","prop")||h("dc.title","name");var o=u.find(".twitter-tweet-rendered .entry-title").text()||u.find(".post-content > p").text()||h("description","name")||h("dc.description","name");var v,s;v=s=(function(){var y=u.find("h2");var z=u.find(".comments");var w=h("dc.type","name");if(w&&(w==="Text.Article"||w==="InteractiveResource"||w==="MovingImage")){return h("og:url","prop");}if(h("prism.subsection1","name")==="fox-files"||h("prism.subsection1","name")==="foxfriendsfirst"){return h("og:url","prop");}if(y.find("a").length>0&&h("prism.subsection1","name")==="willisreport"){return y.find("a").attr("href");}if(h("prism.subsection1","name")==="willisreport"&&h("prism.subsection2","name")==="topfive"){return j();}if(y.length>0){return y.find("a").attr("href");}if(u.length>0){return z.find("a").attr("href");}})();var m=d("link[rel='image_src']").attr("href")||h("og:image","prop");try{v=s=k(v);}catch(n){console.log("err",n);}return{title:t,image:unescape(m),desc:o,userMessage:"",actLink:v,linkBack:s};};});g("trending-fbn",function(){return function(m){var j=d(m.currentTarget),l=j.find("span"),k=l.attr("data-url"),n=l.attr("data-title");return{title:n,image:unescape("http://global.fncstatic.com/static/v/all/img/fb_128x128.png"),desc:n,userMessage:"",actLink:k,linkBack:k};};});g("trending-fnc",function(){return function(m){var j=d(m.currentTarget),l=j.find("span"),k=l.attr("data-url"),n=l.attr("data-title");return{title:n,image:unescape("http://global.fncstatic.com/static/v/all/img/fn_128x128.png"),desc:n,userMessage:"",actLink:k,linkBack:k};};});g("classification-front",function(){return function(k){var p,n,o,l,m;var j=d(k.currentTarget).parentsUntil("ul");n=j.find(".m img").attr("src")||"";p=j.find("h3").text()||"";o=j.find(".summary").text()||"";l=m=j.find("h3 a").attr("href")||"";return{title:p,image:unescape(n),desc:o,userMessage:"",actLink:l,linkBack:m};};});return function(k){var j={};try{j=i[k]();}catch(l){}return j;};};d(function(){var n=new a();var o=new f({plugin:n});var h=new e();var k=b.metadata;c.FOX_ShareMedia=o;var g,m,l,i;var j=function(p){var q=h(p+"-article");o.set(".share",{provider:"facebook",data:q});o.set(".email",{provider:"email",data:q});};g=function(){if(k("name::prism.section::nation")){var p=k;if(p("name::prism.aggregationType::root")||p("name::prism.aggregationType::front")){var s=h("nation-front");o.setLive(".fbook-1",{provider:"facebook",data:s});o.setLive(".twtr-1",{provider:"twitter",data:s});}else{if(p("name::prism.aggregationType::subsection")){var s=h("nation-article");o.set(".fbook-1",{provider:"facebook",data:s});o.set(".twtr-1",{provider:"twitter",data:s});}}}else{if(k("name::prism.aggregationType::topics")){var s=h("classification-front");o.setLive(".trending-fbk",{provider:"facebook",data:s});o.setLive(".trending-twt",{provider:"twitter",data:s});}else{if(k("name::prism.section::topics")&&k("name::prism.aggregationType::subsection")){var s=h("live-event-article");o.set(".facebook",{provider:"facebook",data:s});o.set(".twitter",{provider:"twitter",data:s});}else{if(k("name::dc.type::Text.Article",true)&&k("name::prism.genre::transcript")){var s=h("drupal7-shows-blog");o.reset(".user-interaction .recommend a",{provider:"facebook",data:s});o.reset(".user-interaction .tweet a",{provider:"twitter",data:s});}else{if(k("name::prism.section::shows")){if(k("property::og:type::article")&&(!k("name::prism.subsection1::specialreport")&&!k("name::prism.subsection1::foxnewssunday")&&!k("name::prism.subsection1::fox-files")&&!k("name::prism.subsection1::foxfriendsfirst"))){var s=h("drupal6-shows-article");o.set(".share",{provider:"facebook",data:s});}if(k("name::prism.subsection1::specialreport")||k("name::prism.subsection1::foxnewssunday")||k("name::prism.subsection1::fox-files")||k("name::prism.subsection1::foxfriendsfirst")){var s=h("drupal7-shows-blog");o.reset(".date li a.facebook",{provider:"facebook",data:s});o.reset(".date li a.twitter",{provider:"twitter",data:s});if(k("name::prism.subsection1::fox-files")){o.reset("#post-detail a.share",{provider:"facebook",data:s});}}if(k("name::prism.subsection1::foxfriendsfirst")){o.reset(".post-detail a.trending-fbk",{provider:"facebook",data:s});o.reset(".post-detail a.trending-twt",{provider:"twitter",data:s});}if((k("name::prism.subsection1::specialreport")||k("name::prism.subsection1::foxnewssunday"))&&k("name::prism.subsection2::transcript")){j("v8");}}else{if(k("name::prism.subsection1::trend")){var q=function(){d(".fbkshares").css("visibility","hidden");d(".twtshares").css("visibility","hidden");var t=h("trending-fnc");o.reset(".fbkshares",{provider:"facebook",data:t});o.reset(".twtshares",{provider:"twitter",data:t});setTimeout(function(){d(".fbkshares").css("visibility","visible").hide().fadeIn(120);d(".twtshares").css("visibility","visible").hide().fadeIn(120);},2000);};c.setupSharingLinks=function(){try{q();}catch(t){}};try{q();}catch(r){}}else{if(k("name::prism.section::community")&&k("name::prism.subsection1::newsletter")){c.excludeNewsletterShare=true;}else{if(k("name::prism.section::politics")&&k("name::prism.subsection1::blogs")){j("v8");}else{if(k("property::og:type::article")){j("v8");}else{if(k("name::prism.aggregationType::recipe")){j("recipe");}}}}}}}}}}};m=function(){if(k("property::og:type::article")&&(!k("name::prism.subsection1::willisreport"))){var r=h("drupal6-shows-article");o.set(".share",{provider:"facebook",data:r});o.set(".email",{provider:"email",data:r});}if(k("name::prism.subsection1::willisreport")){var r=h("drupal7-shows-blog");o.reset(".date li a.facebook",{provider:"facebook",data:r});o.reset(".date li a.twitter",{provider:"twitter",data:r});}else{if(k("name::prism.subsection1::trend")){var p=function(){d(".fbkshares").css("visibility","hidden");d(".twtshares").css("visibility","hidden");var s=h("trending-fbn");o.reset(".fbkshares",{provider:"facebook",data:s});o.reset(".twtshares",{provider:"twitter",data:s});setTimeout(function(){d(".fbkshares").css("visibility","visible").hide().fadeIn(120);d(".twtshares").css("visibility","visible").hide().fadeIn(120);},2000);};c.setupSharingLinks=function(){try{p();}catch(s){}};try{p();}catch(q){}}else{if(k("property::og:type::article")){j("v8");}}}};l=function(){if(k("property::og:type::article")){j("v8");}};i=function(){if(k("property::og:type::article")){j("v8");}};if(k("name::prism.channel::fnc")){g();}if(k("name::prism.channel::fbn")){m();}if(k("name::prism.channel::fnl")){l();}if(k("name::prism.channel::fsb")){i();}});})(jQuery,window);(function(e){var d=(typeof _cbVarStr!=="undefined")?_cbVarStr:"b1020";(function(){var s=function(w){w=w||false;var t=new Date(),y=t.getFullYear().toString()+(t.getMonth()+1).toString()+t.getDate().toString(),v=t.getHours()+1,u=t.getMinutes();y+=v.toString()+((w&&!isNaN(w))?(Math.floor(u/parseInt(w,10))).toString():"");return y;};document.write('<script type="text/javascript" src="'+window.location.protocol+"//global.fncstatic.com/static/v/all/js/geo.js?cb="+s(1)+'"><\/script>');}());e(document).ready(function(){window.FOX_metadescriptor=(function(){var s={};e("meta").each(function(){var v=e(this),t=v.attr("name"),u=v.attr("property"),w=v.attr("content");if(t){if(!s.name){s.name={};}s.name[t]=(w)?w:false;}else{if(u){if(!s.property){s.property={};}s.property[u]=(w)?w:false;}}});return s;}());});var q=(function(){var t="fn",v=window.location,u=v.host||v.hostname;var s=function(w){return(u.indexOf(w)>-1)?true:false;};if(s("foxnews.com")){if(s("latino.foxnews.com")){t="fn-latino";}else{t="fn";}}else{if(s("foxbusiness.com")){if(s("smallbusiness.foxbusiness.com")){t="sbc";}else{t="fb";}}}return t;}());var p={feed:{whatsHotLive:{feedFunction:"FeedSource_WhatsHotWatchLive",url:"http://www.foxnews.com/js/whatshot.js",rotate:3,show:{hot:false,live:2},fade:{use:true,delay:900}},onAir:{feedFunction:"FeedSource_FNCTV",url:"http://www.foxnews.com/js/onair.js",descCharLimit:35,imageDomainLoc:""},onAirCarousel:{feedFunction:"FOX_FN_OnAir_Data",url:"http://global.fncstatic.com/static/managed/json/onair-feed-data.js"}},onAir:{hideDelay:200},authentication:{use:"render",domain:"foxnews.com",check:"/authentication/registration/validate/"}};window.FOX_Auth_Use_Janrain=(function(){var s=true;s=(window.location.search.indexOf("_authj=n")>-1)?false:s;return s;}());var b=function(){this.headObj={};};b.prototype={init:function(u){var s=this;if(e("body").data("HasHeaderInit")){return false;}e("body").data("HasHeaderInit",true);var v;for(v in u){if(u.hasOwnProperty(v)){this["_"+v]=u[v];}}this.setHolders();var t=function(){var y=false;y=("createTouch" in document)?true:false;y=(!y&&navigator.userAgent.match(/BlackBerry/i))?true:y;return y;};var w=function(){var y=t(),z=e.cookie("FNMT8431"),A=window.location.hash;if(z){return true;}else{if(y&&!z&&A.indexOf("#?fxM")>-1){e.cookie("FNMT8431","8431",{path:"/"});return true;}else{if(!y){return true;}else{return false;}}}};if(!window.FOX_Auth_Use_Janrain||!window.AuthenticationService_Janrain){window.FOX_Auth_Use_Janrain=false;if(t()){e("#account").css("visibility","hidden");}else{e("#account").css("visibility","visible");this.authentication=new r(this);}}else{e("#account").css("visibility","visible");this.authentication=new i(this);}this.feeds=new o(this);this.onAir=new j(this);switch(q){case"fn":s.whatsHot=new k(this);break;case"fb":s.whatsHot=new g(this);break;}this.searchAutocomplete=new a(this);},setHolders:function(){this.headObj={headlines:e("#headlines-primary"),primaryNav:e("#nav-primary"),onAir:e("#section-head .slide.slide-1"),authentication:e("#account")};this.setListeners();},setListeners:function(){var s=function(z){var w=false,v=z.split("/")[2]||false,y=window.location.hostname||window.location.host;if(v&&v.length>1){v=v.replace("www.","");if(y.indexOf(v)>-1){w=true;}}return w;};var t=e("#util dl dd");var u=function(){t.find("> a").removeClass("active");};t.each(function(){var y=e(this),v=y.find("> a"),w=v.attr("href");if(s(w)){u();v.addClass("active");}});}};var r=(function(){var s=function(t){this.root=t;this.set();};s.prototype={set:function(){var v=this,u=this.root;if(u.headObj.authentication.size()===0){return false;}function t(){var B=document.location.hostname,A=B.split("."),y=A.length,z=A[y-2]+"."+A[y-1];p.authentication.domain=z;}function w(){t();if(typeof v[p.authentication.use]==="function"){v[p.authentication.use]();}else{v.render();}}if(typeof AuthService!=="undefined"){w();}else{e(document).ready(function(){if(typeof AuthService!=="undefined"){w();}else{h("[head.authentication] Authentication Service not found.");}});}this.setHolders();},setHolders:function(){var t=this.root.helper.getQueryStr("usr");if(t){e(".login-fields > .field > input[name='userName']").attr("value",t);}},render:function(){var z=this.root,w=z.headObj.authentication,v=(w.hasClass("alt-style"))?true:false,B=false,u=false;w.show();if(!v){B=w.find(".user-options > p:first");u=w.find("> .username > .encapsulate");var t=w.find("> .username"),C=e("body");u.hover(function(){e(this).addClass("hover");},function(){e(this).removeClass("hover");});u.click(function(){if(w.hasClass("active")){w.addClass("inactive").removeClass("active");}else{w.addClass("active").removeClass("inactive");}});t.hover(function(){window.FXAuthClickIsOver=true;},function(){if(window.FXAuthClickIsOver){window.FXAuthClickIsOver=false;}});if(!C.data("FXAuthClick")){C.data("FXAuthClick",true);C.mousedown(function(){if(!window.FXAuthClickIsOver&&w.hasClass("active")){w.removeClass("active").addClass("inactive");}});}}else{w=e("#authentication").parent();B=w.find(".username");}function y(F){F=F||"Profile";var D="",E="";if(p.authentication.domain!=="foxnews.com"){D=' target="_blank"';if(typeof e.cookie!=="undefined"&&e.cookie("p_DN")){E="?usr="+e.cookie("p_DN");}}return"<a"+D+' href="http://www.foxnews.com/community/user/profile'+E+'">'+F+"</a>";}var A=window.authentication_service=new AuthService({domain:p.authentication.domain});A.extend({createLoginLogout:function(H){var E=this,G=[],F=w.find("#authentication");if(E.isLoggedIn()){if(v){F=F.children(":first");F.each(function(){if(!E.isThirdParty()){e(this).html(y());}else{e(this).css({display:"none"});}});F.next().each(function(){var I=e('<a href="#">Log Out</a>');I.click(function(){try{E.logout(E.domain);}catch(J){h("[head.authentication] Logout - An error occured: "+J);}return false;});e(this).html(I);});B.html('<img src="http://global.fncstatic.com/static/v/all/img/head/profile.png" alt="" /> Welcome, <strong>'+E.getDisplayName()+"</strong>");B.css({display:"inline"});}else{F=w.find(".user-options > ul").children(":first");F.each(function(){if(!E.isThirdParty()){e(this).html(y(e(this).text()));}else{F.css({display:"none"});}});F.next().find("a").click(function(){try{E.logout(E.domain);}catch(I){h("[head.authentication] Logout - An error occured: "+I);}return false;});w.addClass("inactive");var D=(function(){var K=E.getDisplayName(),J=K,L="",I="<span${title}>${name}</span>";if(K.length>13){J=K.slice(0,13)+"...";L=' title="'+K+'"';}return I.replace("${title}",L).replace("${name}",J);}());B.html("You're logged in as "+D);}}else{F.children().find("a").each(function(){var I=e(this),J=I.text().toLowerCase();if(J.indexOf("register")>-1){I.click(function(){try{E.registrationOverlay(E.domain);if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}}catch(K){h("[head.authentication] Register - An error occured: "+K);}return false;});}else{if(J.indexOf("login")>-1){I.click(function(){try{E.providerOverlay(E.domain);if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}}catch(K){h("[head.authentication] Login - An error occured: "+K);}return false;});}}});if(v){F.css({display:"inline"});}else{B.html("Please login.");}}},onSuccessLogin:function(){var D=this;D.createLoginLogout();D.closeOverlay("login-provider");},callback:function(D){var E=this,F=E.createObjFromJSON(D);if(F.authentication.status==="ok"){if(E.thirdPartyAPI){E.thirdPartyAPI.disqus.login(F,function(){E.thirdPartyAPI.idms.login(F,function(){E.thirdPartyAPI.fileMobile.login(F,function(){window.FOX_TP_Reload=setTimeout(function(){window.location.reload();},1000);});});});}}E.closeOverlay("login-provider");}});A.init();A.createLoginLogout();}};return s;}());var i=(function(){var s=function(t){this.root=t;this.set();};s.prototype={set:function(){if(window.AuthenticationService_Janrain){e("p.login-link").hide();var t=window.authentication_service_v3=new AuthenticationService_Janrain();}else{h("[head.Authentication] Fatal Error: Janrain service not found.");}}};return s;}());var j=(function(){var s=function(t){this.root=t;this.set();};s.prototype={set:function(){var u=this,t=this.root;if(t.headObj.onAir.size()===0){return false;}window[p.feed.onAir.feedFunction]=function(v){u.renderOnAirNow(v);};window[p.feed.onAirCarousel.feedFunction]=function(v){u.renderOnAirCarousel(v,function(){u.carousel();u.setCarouselListeners();});};t.feeds.onAir();t.feeds.onAirCarousel();},renderOnAirNow:function(P){var D=this,L=this.root,A=P.schedules.today,w=P.schedules.tomorrow,E=e("#show-data"),M=E.children("ul:first");if(E.size()===0){return false;}function I(Q){Q=e.trim(Q);return(Q.split(":"))[0]+Q.charAt(Q.length-2)+"<span>et</span>";}function G(R){var Q=p.feed.onAir.descCharLimit;return(R.length>Q)?R.substring(0,Q)+"...":R;}function u(T,U){U=U||false;var W,X=[],S=(U)?T:T+1,Q=e("#section-head").hasClass("fn"),V=0;var Y=function(Z){V++;if(Q){X.push("<li"+((V===1)?' class="first"':"")+">");X.push('<p class="media"><a href="'+Z.link+'"><img src="'+p.feed.onAir.imageDomainLoc+Z.img+'" alt="" /></a></p>');X.push('<p class="time">'+I(Z.time)+"</p>");X.push('<div class="info">');X.push('<p class="summary"><a href="'+Z.link+'" title="'+Z.dek+'">'+Z.title+"</a></p>");X.push('<p class="relation">'+G(Z.dek)+"</p>");if(V===1){X.push('<a class="watch-now-link" href="http://watch.foxnews.com/"><img src="http://global.fncstatic.com/static/all/img/watch-icon.gif"></a>');}X.push("</div>");X.push("</li>");}else{X.push("<li"+((V===1)?' class="first"':"")+">");X.push('<p class="media"><a href="'+Z.link+'"><img src="'+p.feed.onAir.imageDomainLoc+Z.img+'" alt="" /></a></p>');X.push('<div class="info">');X.push('<p class="relation">'+Z.title+"</p>");X.push('<p class="summary"><a href="'+Z.link+'" title="'+Z.dek+'">'+G(Z.dek)+"</a></p></div>");X.push('<p class="time">'+I(Z.time)+"</p></li>");}};for(W=T;W<=S;W++){var R=A[W];Y(R);}if(U&&w[0]){Y(w[0]);}M.html(X.join(""));}var H,K=new Date(P.now.date+" "+P.now.time),F=parseInt(K.getHours()+""+((K.getMinutes()<10)?"0"+K.getMinutes():K.getMinutes()),10);for(H=0;H<A.length;H++){var N=A[H],J=(A[H+1])?A[H+1]:false;try{var y=e.trim(N.time).toLowerCase();y=(y.charAt(y.indexOf("m")-2)!==" ")?y.replace("pm"," pm").replace("am"," am"):y;var B=new Date(P.now.date+" "+y),O=parseInt(B.getHours()+""+((B.getMinutes()<10)?"0"+B.getMinutes():B.getMinutes()),10);if(J){var z=e.trim(J.time).toLowerCase();z=(z.charAt(z.indexOf("m")-2)!==" ")?z.replace("pm"," pm").replace("am"," am"):z;var v=new Date(P.now.date+" "+z),t=parseInt(v.getHours()+""+((v.getMinutes()<10)?"0"+v.getMinutes():v.getMinutes()),10);if(F>=O&&F<t){u(H);break;}}else{u(H,true);break;}}catch(C){h("[head.onAir] Error: "+C);}}},renderOnAirCarousel:function(z,y){var u=this,t=this.root,v=z;var w=function(){var H=t.headObj.onAir.find("> .content > .slideshow");var D=[],C=v.length;for(var B=0;B<C;B++){var G=v[B],A=(B===0)?true:false,F=(B+1===C)?true:false,E=(A)?" section-first":(F)?" section-last":"";D.push('<li class="section'+E+'">');D.push('<p class="media"><a href="'+G.link+'"><img alt="'+G.title+'" pre-src="'+G.img+'" src="http://global.fncstatic.com/static/v/all/img/clear.gif"></a></p>');D.push('<h3><a href="'+G.link+'">'+G.title+"</a></h3>");D.push('<p class="time"><span>'+G.day+"</span> "+G.time+"</p></li>");}H.html("<ul>"+D.join("")+"</ul>");};w();if(typeof y==="function"){y();}},carousel:function(){var u=this.root,v=u.headObj.onAir.children(".content");var t={elm:v,slide:"horizontal",scroll:5,speed:1200,show:5,rotate:false};function w(A){var y,z=[];for(y=1;y<=A.batch.max;y++){z.push('<li><a href="#">&nbsp;</a></li>');}return z.join("");}t.elm.each(function(A){var z=0,C=e(this);if(C.data("carousel_initialized")){return false;}var B=C.find("ol");var D={prev:C.find(".prev"),next:C.find(".next"),first:C.find(".first-page"),last:C.find(".last-page")};var y={auto:{set:false,speed:3000},slide:t.slide,scroll:t.scroll,show:t.show,speed:t.speed,rotate:t.rotate,eventCallback:function(E){if(E.event==="init"){z=E.batch.max;B.html(w(E));B.children(":first").addClass("active");C.data("carousel_initialized",true);}else{B.children().each(function(F){e(this).toggleClass("active",function(){return(F+1===E.batch.current)?true:false;});});}if(E.batch.current===1){D.prev.addClass("inactive-prev");D.first.addClass("inactive-first");}else{D.prev.removeClass("inactive-prev");D.first.removeClass("inactive-first");}if(E.batch.current===E.batch.max){D.next.addClass("inactive-next");D.last.addClass("inactive-last");}else{D.next.removeClass("inactive-next");D.last.removeClass("inactive-last");}},controlsCallback:function(E){B.children().find("a").each(function(F){e(this).click(function(){E.stopAutoScroll();E.scrollToBatch(F+1);return false;});});D.first.click(function(){E.stopAutoScroll();E.scrollToItem(1);return false;});D.prev.click(function(){E.stopAutoScroll();E.slide("prev");return false;});D.next.click(function(){E.stopAutoScroll();E.slide("next");return false;});D.last.click(function(){E.stopAutoScroll();E.scrollToItem(z);return false;});}};if(typeof e.fn.jfoxCarousel!=="undefined"){C.jfoxCarousel(y);}else{e(document).ready(function(){C.jfoxCarousel(y);});}});},setCarouselListeners:function(){var B=this.root,u=B.headObj.primaryNav,t=u.children("ul:first").children("li.on-air"),w=B.headObj.onAir,D=w.css("height").replace("px",""),v=p.onAir.hideDelay;var A={close:t.find("img").filter(function(){return(e(this).attr("src").indexOf("close.png")>-1)?true:false;}),open:t.find("img").filter(function(){return(e(this).attr("src").indexOf("plus.png")>-1)?true:false;})};function z(){var E=w.find(".slideshow > ul > li");E.each(function(){var G=e(this),I=G.find("> .media img"),H=I.attr("pre-src"),F=new Image();if(H&&!I.data("preloaded")){F.onload=function(){I.attr("src",H);};F.src=H;I.data("preloaded",true);}});}function y(){w.data("isRendering",true);w.data("hidden",true);w.animate({height:"0px",opacity:"0"},v,"swing",function(){w.css({display:"none"}).data("isRendering",false);});A.close.hide();A.open.show();t.removeClass("active");}function C(){if(!w.data("initToFirst")){w.data("initToFirst",true);w.find("p.controls > a.prev").click();}w.data("isRendering",true);w.data("hidden",false);w.css("display","block");w.animate({height:D,opacity:"1"},v,"swing",function(){w.data("isRendering",false);});A.close.show();A.open.hide();t.addClass("active");}A.close.hide();w.css({height:"0px",opacity:"0"}).data("hidden",true);t.find("a").click(function(){z();if(w.data("isRendering")){return false;}if(w.data("hidden")){C();}else{y();}return false;});}};return s;}());var k=(function(){var s=function(u){this.root=u;this.render=new t(this);this.set();};s.prototype={set:function(){var v=this,u=this.root;if(u.headObj.headlines.size()===0){return false;}window[p.feed.whatsHotLive.feedFunction]=function(w){v.render.set(w);};u.feeds.whatsHotLive();}};var t=function(u){this.main=this;this.root=u.root;};t.prototype={set:function(B){var w=this.root,v=w.headObj.headlines;var z=this.hot({title:"Full Coverage",feed:B.whatshot,len:p.feed.whatsHotLive.show.hot});var C=this.live({title:"Watch Live",feed:B.watchlive,len:p.feed.whatsHotLive.show.live});if(typeof B.whatshot!=="undefined"){if(B.whatshot.length===0){return false;}var y=e('<dl class="first"></dl>');y.append(z).children("dd:first").addClass("first");v.html(y);}if(typeof B.watchlive!=="undefined"){if(B.watchlive.length===0){return false;}var A=e("<dl></dl>");A.append(C).children("dd:first").addClass("first");v.append(A);var u=v.children("dl:nth-child(2)");if(B.watchlive.length>p.feed.whatsHotLive.show.live){this.rotate(u);}else{u.children("dd").css("display","inline");}}},hot:function(w){if(typeof w.feed==="undefined"){return false;}w.len=w.len||w.feed.length;var v,u=[];if(w.len>0){u.push("<dt>"+w.title+"</dt>");for(v=0;v<w.feed.length;v++){var z=w.feed[v],y=(v>=w.len)?' style="display:none;"':"";u.push("<dd"+y+'><a href="'+z.link+'">'+z.title+"</a></dd>");}}return e(u.join(""));},live:function(w){if(typeof w.feed==="undefined"){return false;}w.len=w.len||w.feed.length;var v,u=[];if(w.len>0){u.push("<dt>"+w.title+"</dt>");for(v=0;v<w.feed.length;v++){var z=w.feed[v],y=(v>=w.len)?' style="display:none;"':"";u.push("<dd"+y+'><a href="'+z.link+'">'+z.title+"</a></dd>");}}return e(u.join(""));},rotate:function(A){var B=A.children("dd"),C=A.children("dt:first"),v=B.size(),z=p.feed.whatsHotLive.fade;if(v===0){return false;}var u=p.feed.whatsHotLive.rotate*1000;if(z.use){u=u+z.delay;}var w=false;B.each(function(E){var F=e(this);F.addClass("first");F.css("display",(E===0)?"inline":"none");if(E===0){F.data("rotateNumber",E+1);}});if(!A.data("rotateNumber")){A.data("rotateNumber",1);}function y(F){F=F||false;var E=A.data("rotateNumber")+1;E=(E>v)?1:E;A.data("rotateNumber",E);B.each(function(G){var I=e(this),H=G+1;if(!z.use||F==="click"){I.css("display",(H===E)?"inline":"none");}else{if(H===E){I.fadeIn(z.delay);}else{I.hide();}}});}function D(){clearInterval(w);w=setInterval(function(){y();},u);}D();C.css("cursor","pointer").click(function(){y("click");});A.hover(function(){clearInterval(w);},function(){D();});}};return s;}());var g=(function(){var s=function(t){this.root=t;this.set();};s.prototype={set:function(){var t=this;e("#headlines .dv-list:first").each(function(){t.trigger(e(this));});},trigger:function(w){var t=this,v="fox_header_whatshot",u="http://global.fncstatic.com/static/all/generated/js/fb2-whatshot.js";window[v]=function(y){t.render(y,w);};(function(){var z=document,y=z.createElement("script");y.src=u;y.async=true;(z.getElementsByTagName("head")[0]||z.getElementsByTagName("body")[0]).appendChild(y);}());},render:function(z,A){if(!z&&!z.length){return false;}var v,u=[],t=z.length;u.push("<h2>What's Hot</h2><ul>");for(v=0;v<t;v++){var y=z[v],w=(v===0)?" dv-item-first":(v===t-1)?" dv-item-last":"";u.push('<li class="dv-item'+w+'">');u.push('<a href="'+y.link+'">'+y.title+"</a>");u.push("</li>");}u.push("</ul>");A.html(u.join(""));}};return s;}());var o=(function(){var s=function(t){this.root=t;};s.prototype={whatsHotLive:function(){this.get.append({url:p.feed.whatsHotLive.url});},onAir:function(){this.get.append({url:p.feed.onAir.url});},onAirCarousel:function(){this.get.append({url:p.feed.onAirCarousel.url});},get:{append:function(t){(function(){var u=document.createElement("script");u.src=t.url;u.async=true;e("head").get(0).appendChild(u);}());},json:function(t){e.ajax({type:"GET",url:t.url,data:t.query,success:function(u){if(t.callback){t.callback(u);}}});}}};return s;}());var a=(function(){var t=function(u){this.root=u;this.set();};t.prototype={set:function(){var u=this;switch(q){case"fb":s();break;}}};var s=function(){var u=e("form#searchArea");if(u.size()===0){u=e("#search-site").parent();}u.each(function(){var y=e(this);var v=y.find("input[type='text']");var z=y.find("input[type='image'],input[type='submit']");var w=v.attr("value");v.attr({name:"q",onblur:"",onfocus:"",autocomplete:"off"}).blur(function(){var A=e(this);var B=(A.attr("value").length>0)?A.attr("value"):w;A.attr("value",B);}).focus(function(){var A=e(this);var B=(A.attr("value").indexOf(w)>-1)?"":A.attr("value");A.attr("value",B);});IDC_quoteComplete.init();});};return t;}());b.prototype.helper={getQueryStr:function(y){var v=(window.location.search).substr(1);if(v.length>0){var s,w=v.split("&"),t={};for(s=0;s<w.length;s++){var u=w[s].split("=");t[u[0]]=u[1];}return(t[y])?t[y]:false;}return false;}};var h=function(s){if(window.console&&window.console.log){console.log(s);}};var m={isIE:function(){return e.browser.msie;},animate:function(t,s){if(!this.isIE()){if(!s.speed){s.speed=300;}if(!s.type){s.type="swing";}t.animate(s.css,s.speed,s.type,function(){if(s.callback){s.callback();}});}else{t.css(s.css);t.css("opacity","");if(s.callback){s.callback();}}},hide:function(v,s){if(!v){return false;}var t,u={opacity:"0"};if(s.css){for(t in s.css){if(s.css.hasOwnProperty(t)){u[t]=s.css[t];}}}s.css=u;this.animate(v,s);},show:function(v,s){if(!v){return false;}var t,u={opacity:"1"};if(s.css){for(t in s.css){if(s.css.hasOwnProperty(t)){u[t]=s.css[t];}}}s.css=u;this.animate(v,s);}};var c=new b();(function(){var t=function(){e(document).ready(function(){c.init();});};try{if(window.FOX&&FOX.site&&typeof FOX.site.bottomInit==="function"){var s=FOX.site.bottomInit;FOX.site.bottomInit=function(){c.init();s();};}else{if(window.FOX_HP&&FOX_HP.site.OnPageReady){FOX_HP.site.OnPageReady(function(){c.init();});}else{t();}}}catch(u){t();}}());var n=window.siteStreamFlashPlayer=function(u,t){var E=(typeof u==="undefined")?1:u,B=(typeof t==="undefined")?"foxnews":t,D=850,z=506,v=(screen.width-D)/2,C=(screen.height-z)/2,y="height="+z+",width="+D+",top="+C+",left="+v+",toolbar=no,location=no,scrollbars=no,status=no,resizable=no,fullscreen=no",A=window.open("http://interactive."+B+".com/livestream/live.html?chanId="+E+"&openAIR=true","livePlayer",y);A.focus();};var f=window.siteStreamLivePlayer=function(u,s){var t="http://live.foxnews.com/#/"+u;window.open(t,"_blank");};var l=window.FOX_isMnt=function(){var s=false,u=window.CONST_Akamai_TIME||false;try{if(u.yr==="2011"&&u.mm==="11"&&(u.dd==="05"||u.dd==="06")){s=true;}else{if(u.yr==="2011"&&u.mm==="11"&&u.dd==="04"&&parseInt(u.hr,10)>=17){s=true;}}}catch(t){}return s;};}(jQuery));(function(a){a(document).ready(function(){var b=a("#section-footer a[rel*='external']");if(window.FOX&&FOX.utils&&FOX.utils.extLink){FOX.utils.extLink.set(b);}else{b.each(function(){var d=a(this),e=a.trim(d.attr("href")||""),c=a.trim(d.attr("rel")||"");if(e.length>0&&e!=="#"){c=(c.indexOf("external")>-1)?c:[c,"external"].join(" ");c=a.trim([c,"ext-linked"].join(" "));d.attr("rel",c);d.click(function(){window.open(e,"_blank");return false;});if(!d.attr("target")){d.attr("target","_blank");}}});}});}(jQuery));window.IDC_quoteComplete=(function(b){var a={index:-1,totalResults:0,results:false,resultsDiv:"search-results",field:"#search",url:"http://interactive.foxbusiness.com/projects/autocomplete/autocomplete.json",action:"http://interactive.foxbusiness.com/projects/autocomplete/intercept.html?q=",quoteUrl:"http://quote.foxbusiness.com/?searchString=",defaultText:"Search quotes, news and video",reset:function(){b("."+a.resultsDiv).html("");a.results=false;a.index=-1;},init:function(){b(a.field).focus(function(){if(b(this).val()===a.defaultText){b(this).val("");}a.reset();});b(a.field).blur(function(d){if(b(this).val()===""){b(this).val(a.defaultText);}setTimeout(function(){a.reset();},500);});b(a.field).parents("form").submit(function(){if(a.index>-1){b(a.field).val(b("#search_drop_overlay ul li:eq("+a.index+") a span.ticker").text());}if(a.index>-1){a.action=a.quoteUrl;}a.action+=encodeURIComponent(b(a.field).val());if(a.index>-1){a.reset();}document.location=a.action;return false;});var c="FOX_IDC_QuoteResponse";window[c]=function(d){a.response(d);};b(a.field).keyup(function(d){if((d.keyCode>=65&&d.keyCode<=90)||(d.keyCode>=97&&d.keyCode<=122)||d.keyCode===8){a.index=-1;var e=b(a.field).val();b("."+a.resultsDiv).html("");if(e!==""){b.getJSON(a.url+"?q="+e+"&callback="+c+"&jsonp=?");a.results=true;}else{a.results=false;}}else{if(d.keyCode===40||d.keyCode===38){if(a.results){b("#search_drop_overlay ul li:eq("+a.index+")").removeClass("selected");b("#search_drop_overlay ul li a:eq("+a.index+")").removeClass("selected");if(d.keyCode===40){if(a.index<(a.totalResults-1)){a.index++;}else{a.index=0;}}else{if(a.index>0){a.index--;}else{a.index=a.totalResults-1;}}b("#search_drop_overlay ul li:eq("+a.index+")").addClass("selected");b("#search_drop_overlay ul li a:eq("+a.index+")").addClass("selected");}}else{if(d.keyCode===27){a.reset();}}}});b(a.field).parents("form").after('<div class="'+a.resultsDiv+'"></div>');},response:function(d){var c="";var e=b(a.field).val();if(d!==""){a.totalResults=b(d).size();c+="<ul>";b.each(d,function(j,n){var k=new RegExp(e,"i");var m=this.s.search(k);var f=this.n.search(k);var g=m>-1?this.s.replace(k,"<strong>"+this.s.slice(m,(m+e.length))+"</strong>"):this.s;var h=f>-1?this.n.replace(k,"<strong>"+this.n.slice(f,(f+e.length))+"</strong>"):this.n;var l=this.s;c+='<li><a href="'+a.quoteUrl+l+'"><span class="ticker">'+g+'</span><span class="corporation">'+h+"</span></a></li>";});c+="</ul>";}else{a.totalResults=0;c="<p>No suggestions available</p>";}b("."+a.resultsDiv).html('<div id="search_drop_overlay" class="search_drop_overlay"><div class="search_drop_top">&nbsp;</div><div class="search_drop_list">'+c+'<div class="clearflatgray"></div><div class="search_drop_link1"><a href="'+a.action+e+'">Search for News &amp; Videos "<strong>'+e.toUpperCase()+'</strong>"</a></div></div><div class="search_drop_bottom"></div></div>');a.initMouseEvents();},initMouseEvents:function(){b("."+a.resultsDiv+" ul li").mouseover(function(){if(a.index>-1){b("."+a.resultsDiv+" ul li:eq("+a.index+")").removeClass("selected");}b(this).addClass("selected");});b("."+a.resultsDiv+" ul li").mouseout(function(){b(this).removeClass("selected");});b("."+a.resultsDiv+" ul li a").mouseover(function(){if(a.index>-1){b("."+a.resultsDiv+" ul li a:eq("+a.index+")").removeClass("selected");}b(this).addClass("selected");});b("."+a.resultsDiv+" ul li a").mouseout(function(){b(this).removeClass("selected");});}};return a;})(jQuery);
/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){var E="undefined",r="object",T="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",S="SWFObjectExprInst",y="onreadystatechange",P=window,j=document,t=navigator,U=false,V=[h],o=[],O=[],J=[],l,R,F,C,K=false,a=false,n,H,m=true,N=function(){var ab=typeof j.getElementById!=E&&typeof j.getElementsByTagName!=E&&typeof j.createElement!=E,ai=t.userAgent.toLowerCase(),Z=t.platform.toLowerCase(),af=Z?/win/.test(Z):/win/.test(ai),ad=Z?/mac/.test(Z):/mac/.test(ai),ag=/webkit/.test(ai)?parseFloat(ai.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,Y=!+"\v1",ah=[0,0,0],ac=null;if(typeof t.plugins!=E&&typeof t.plugins[T]==r){ac=t.plugins[T].description;if(ac&&!(typeof t.mimeTypes!=E&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){U=true;Y=false;ac=ac.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ah[0]=parseInt(ac.replace(/^(.*)\..*$/,"$1"),10);ah[1]=parseInt(ac.replace(/^.*\.(.*)\s.*$/,"$1"),10);ah[2]=/[a-zA-Z]/.test(ac)?parseInt(ac.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else{if(typeof P.ActiveXObject!=E){try{var ae=new ActiveXObject(X);if(ae){ac=ae.GetVariable("$version");if(ac){Y=true;ac=ac.split(" ")[1].split(",");ah=[parseInt(ac[0],10),parseInt(ac[1],10),parseInt(ac[2],10)];}}}catch(aa){}}}return{w3:ab,pv:ah,wk:ag,ie:Y,win:af,mac:ad};}(),k=function(){if(!N.w3){return;}if((typeof j.readyState!=E&&j.readyState=="complete")||(typeof j.readyState==E&&(j.getElementsByTagName("body")[0]||j.body))){f();}if(!K){if(typeof j.addEventListener!=E){j.addEventListener("DOMContentLoaded",f,false);}if(N.ie&&N.win){j.attachEvent(y,function(){if(j.readyState=="complete"){j.detachEvent(y,arguments.callee);f();}});if(P==top){(function(){if(K){return;}try{j.documentElement.doScroll("left");}catch(Y){setTimeout(arguments.callee,0);return;}f();})();}}if(N.wk){(function(){if(K){return;}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return;}f();})();}s(f);}}();function f(){if(K){return;}try{var aa=j.getElementsByTagName("body")[0].appendChild(D("span"));aa.parentNode.removeChild(aa);}catch(ab){return;}K=true;var Y=V.length;for(var Z=0;Z<Y;Z++){V[Z]();}}function L(Y){if(K){Y();}else{V[V.length]=Y;}}function s(Z){if(typeof P.addEventListener!=E){P.addEventListener("load",Z,false);}else{if(typeof j.addEventListener!=E){j.addEventListener("load",Z,false);}else{if(typeof P.attachEvent!=E){i(P,"onload",Z);}else{if(typeof P.onload=="function"){var Y=P.onload;P.onload=function(){Y();Z();};}else{P.onload=Z;}}}}}function h(){if(U){W();}else{I();}}function W(){var Y=j.getElementsByTagName("body")[0];var ab=D(r);ab.setAttribute("type",q);var aa=Y.appendChild(ab);if(aa){var Z=0;(function(){if(typeof aa.GetVariable!=E){var ac=aa.GetVariable("$version");if(ac){ac=ac.split(" ")[1].split(",");N.pv=[parseInt(ac[0],10),parseInt(ac[1],10),parseInt(ac[2],10)];}}else{if(Z<10){Z++;setTimeout(arguments.callee,10);return;}}Y.removeChild(ab);aa=null;I();})();}else{I();}}function I(){var ah=o.length;if(ah>0){for(var ag=0;ag<ah;ag++){var Z=o[ag].id;var ac=o[ag].callbackFn;var ab={success:false,id:Z};if(N.pv[0]>0){var af=c(Z);if(af){if(G(o[ag].swfVersion)&&!(N.wk&&N.wk<312)){w(Z,true);if(ac){ab.success=true;ab.ref=A(Z);ac(ab);}}else{if(o[ag].expressInstall&&B()){var aj={};aj.data=o[ag].expressInstall;aj.width=af.getAttribute("width")||"0";aj.height=af.getAttribute("height")||"0";if(af.getAttribute("class")){aj.styleclass=af.getAttribute("class");}if(af.getAttribute("align")){aj.align=af.getAttribute("align");}var ai={};var Y=af.getElementsByTagName("param");var ad=Y.length;for(var ae=0;ae<ad;ae++){if(Y[ae].getAttribute("name").toLowerCase()!="movie"){ai[Y[ae].getAttribute("name")]=Y[ae].getAttribute("value");}}Q(aj,ai,Z,ac);}else{p(af);if(ac){ac(ab);}}}}}else{w(Z,true);if(ac){var aa=A(Z);if(aa&&typeof aa.SetVariable!=E){ab.success=true;ab.ref=aa;}ac(ab);}}}}}function A(ab){var Y=null;var Z=c(ab);if(Z&&Z.nodeName=="OBJECT"){if(typeof Z.SetVariable!=E){Y=Z;}else{var aa=Z.getElementsByTagName(r)[0];if(aa){Y=aa;}}}return Y;}function B(){return !a&&G("6.0.65")&&(N.win||N.mac)&&!(N.wk&&N.wk<312);}function Q(ab,ac,Y,aa){a=true;F=aa||null;C={success:false,id:Y};var af=c(Y);if(af){if(af.nodeName=="OBJECT"){l=g(af);R=null;}else{l=af;R=Y;}ab.id=S;if(typeof ab.width==E||(!/%$/.test(ab.width)&&parseInt(ab.width,10)<310)){ab.width="310";}if(typeof ab.height==E||(!/%$/.test(ab.height)&&parseInt(ab.height,10)<137)){ab.height="137";}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ae=N.ie&&N.win?"ActiveX":"PlugIn",ad="MMredirectURL="+P.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ae+"&MMdoctitle="+j.title;if(typeof ac.flashvars!=E){ac.flashvars+="&"+ad;}else{ac.flashvars=ad;}if(N.ie&&N.win&&af.readyState!=4){var Z=D("div");Y+="SWFObjectNew";Z.setAttribute("id",Y);af.parentNode.insertBefore(Z,af);af.style.display="none";(function(){if(af.readyState==4){af.parentNode.removeChild(af);}else{setTimeout(arguments.callee,10);}})();}u(ab,ac,Y);}}function p(Z){if(N.ie&&N.win&&Z.readyState!=4){var Y=D("div");Z.parentNode.insertBefore(Y,Z);Y.parentNode.replaceChild(g(Z),Y);Z.style.display="none";(function(){if(Z.readyState==4){Z.parentNode.removeChild(Z);}else{setTimeout(arguments.callee,10);}})();}else{Z.parentNode.replaceChild(g(Z),Z);}}function g(ad){var ab=D("div");if(N.win&&N.ie){ab.innerHTML=ad.innerHTML;}else{var Z=ad.getElementsByTagName(r)[0];if(Z){var ae=Z.childNodes;if(ae){var Y=ae.length;for(var aa=0;aa<Y;aa++){if(!(ae[aa].nodeType==1&&ae[aa].nodeName=="PARAM")&&!(ae[aa].nodeType==8)){ab.appendChild(ae[aa].cloneNode(true));}}}}}return ab;}function u(aj,ah,Z){var Y,ab=c(Z);if(N.wk&&N.wk<312){return Y;}if(ab){if(typeof aj.id==E){aj.id=Z;}if(N.ie&&N.win){var ai="";for(var af in aj){if(aj[af]!=Object.prototype[af]){if(af.toLowerCase()=="data"){ah.movie=aj[af];}else{if(af.toLowerCase()=="styleclass"){ai+=' class="'+aj[af]+'"';}else{if(af.toLowerCase()!="classid"){ai+=" "+af+'="'+aj[af]+'"';}}}}}var ag="";for(var ae in ah){if(ah[ae]!=Object.prototype[ae]){ag+='<param name="'+ae+'" value="'+ah[ae]+'" />';}}ab.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ai+">"+ag+"</object>";O[O.length]=aj.id;Y=c(aj.id);}else{var aa=D(r);aa.setAttribute("type",q);for(var ad in aj){if(aj[ad]!=Object.prototype[ad]){if(ad.toLowerCase()=="styleclass"){aa.setAttribute("class",aj[ad]);}else{if(ad.toLowerCase()!="classid"){aa.setAttribute(ad,aj[ad]);}}}}for(var ac in ah){if(ah[ac]!=Object.prototype[ac]&&ac.toLowerCase()!="movie"){e(aa,ac,ah[ac]);}}ab.parentNode.replaceChild(aa,ab);Y=aa;}}return Y;}function e(aa,Y,Z){var ab=D("param");ab.setAttribute("name",Y);ab.setAttribute("value",Z);aa.appendChild(ab);}function z(Z){var Y=c(Z);if(Y&&Y.nodeName=="OBJECT"){if(N.ie&&N.win){Y.style.display="none";(function(){if(Y.readyState==4){b(Z);}else{setTimeout(arguments.callee,10);}})();}else{Y.parentNode.removeChild(Y);}}}function b(aa){var Z=c(aa);if(Z){for(var Y in Z){if(typeof Z[Y]=="function"){Z[Y]=null;}}Z.parentNode.removeChild(Z);}}function c(aa){var Y=null;try{Y=j.getElementById(aa);}catch(Z){}return Y;}function D(Y){return j.createElement(Y);}function i(aa,Y,Z){aa.attachEvent(Y,Z);J[J.length]=[aa,Y,Z];}function G(aa){var Z=N.pv,Y=aa.split(".");Y[0]=parseInt(Y[0],10);Y[1]=parseInt(Y[1],10)||0;Y[2]=parseInt(Y[2],10)||0;return(Z[0]>Y[0]||(Z[0]==Y[0]&&Z[1]>Y[1])||(Z[0]==Y[0]&&Z[1]==Y[1]&&Z[2]>=Y[2]))?true:false;}function v(ae,Z,af,ad){if(N.ie&&N.mac){return;}var ab=j.getElementsByTagName("head")[0];if(!ab){return;}var Y=(af&&typeof af=="string")?af:"screen";if(ad){n=null;H=null;}if(!n||H!=Y){var aa=D("style");aa.setAttribute("type","text/css");aa.setAttribute("media",Y);n=ab.appendChild(aa);if(N.ie&&N.win&&typeof j.styleSheets!=E&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1];}H=Y;}if(N.ie&&N.win){try{ae=ae.replace(/\:/g,"\\:");n.addRule(ae,Z);}catch(ac){try{n.addRule(ae,Z);}catch(ac){}}}else{if(n&&typeof j.createTextNode!=E){n.appendChild(j.createTextNode(ae+" {"+Z+"}"));}}}function w(aa,Y){if(!m){return;}var Z=Y?"visible":"hidden";if(K&&c(aa)){c(aa).style.visibility=Z;}else{v("#"+aa,"visibility:"+Z);}}function M(Z){var aa=/[\\\"<>\.;]/;var Y=aa.exec(Z)!=null;return Y&&typeof encodeURIComponent!=E?encodeURIComponent(Z):Z;}var d=function(){if(N.ie&&N.win){window.attachEvent("onunload",function(){var ad=J.length;for(var ac=0;ac<ad;ac++){J[ac][0].detachEvent(J[ac][1],J[ac][2]);}var aa=O.length;for(var ab=0;ab<aa;ab++){z(O[ab]);}for(var Z in N){N[Z]=null;}N=null;for(var Y in swfobject){swfobject[Y]=null;}swfobject=null;});}}();return{registerObject:function(ac,Y,ab,aa){if(N.w3&&ac&&Y){var Z={};Z.id=ac;Z.swfVersion=Y;Z.expressInstall=ab;Z.callbackFn=aa;o[o.length]=Z;w(ac,false);}else{if(aa){aa({success:false,id:ac});}}},getObjectById:function(Y){if(N.w3){return A(Y);}},embedSWF:function(ac,ai,af,ah,Z,ab,aa,ae,ag,ad){var Y={success:false,id:ai};if(N.w3&&!(N.wk&&N.wk<312)&&ac&&ai&&af&&ah&&Z){w(ai,false);L(function(){af+="";ah+="";var ak={};if(ag&&typeof ag===r){for(var am in ag){ak[am]=ag[am];}}ak.data=ac;ak.width=af;ak.height=ah;var an={};if(ae&&typeof ae===r){for(var al in ae){an[al]=ae[al];}}if(aa&&typeof aa===r){for(var aj in aa){if(typeof an.flashvars!=E){an.flashvars+="&"+aj+"="+aa[aj];}else{an.flashvars=aj+"="+aa[aj];}}}if(G(Z)){var ao=u(ak,an,ai);if(ak.id==ai){w(ai,true);}Y.success=true;Y.ref=ao;}else{if(ab&&B()){ak.data=ab;Q(ak,an,ai,ad);return;}else{w(ai,true);}}if(ad){ad(Y);}});}else{if(ad){ad(Y);}}},switchOffAutoHideShow:function(){m=false;},ua:N,getFlashPlayerVersion:function(){return{major:N.pv[0],minor:N.pv[1],release:N.pv[2]};},hasFlashPlayerVersion:G,createSWF:function(aa,Z,Y){if(N.w3){return u(aa,Z,Y);}else{return undefined;}},showExpressInstall:function(aa,ab,Y,Z){if(N.w3&&B()){Q(aa,ab,Y,Z);}},removeSWF:function(Y){if(N.w3){z(Y);}},createCSS:function(ab,aa,Z,Y){if(N.w3){v(ab,aa,Z,Y);}},addDomLoadEvent:L,addLoadEvent:s,getQueryParamValue:function(ab){var aa=j.location.search||j.location.hash;if(aa){if(/\?/.test(aa)){aa=aa.split("?")[1];}if(ab==null){return M(aa);}var Z=aa.split("&");for(var Y=0;Y<Z.length;Y++){if(Z[Y].substring(0,Z[Y].indexOf("="))==ab){return M(Z[Y].substring((Z[Y].indexOf("=")+1)));}}}return"";},expressInstallCallback:function(){if(a){var Y=c(S);if(Y&&l){Y.parentNode.replaceChild(l,Y);if(R){w(R,true);if(N.ie&&N.win){l.style.display="block";}}if(F){F(C);}}a=false;}}};}();(function(d){var l={};l.PROTOCOL=window.location.protocol;l.yume_ad_domain_code={fn2:"109RXfmeHtS",fb2:"109DLWefYRt",fb:"109RXfmeHtS","fn-latino":"109RXfmeHtS"};l.settings_url={fn2:l.PROTOCOL+"//video.foxnews.com/assets/akamai/resources/conf/config.xml",fb2:l.PROTOCOL+"//video.foxbusiness.com/assets/akamai/resources/conf/config-fb.xml",fb:l.PROTOCOL+"//video.foxbusiness.com/assets/akamai/resources/conf/config-sbc.xml","fn-latino":l.PROTOCOL+"//video.foxnews.com/assets/akamai/resources/conf/config-latino.xml"};l.auditude_code={defaultAssetId:"fnd_default_asset",adDomain:"auditude.com",zoneId:{fn2:"52522",fb2:"52523",fb:"52526","fn-latino":"52522"}};window.MvPlayer=function(){this.version="1.3.0.2";this._namespace=null;this._config={};this._videoDomain="video.foxnews.com";this._callbacksObj={};this._autoEmbed=true;this.holder={};this.playerIds=[];this.playerMap={};this.idSeparator=":";this.instanceId=["videoid","videolink","playlistid"];this.feedFolder={video:"/v/feed/video/",playlist:"/v/feed/playlist/"};this.itemType={videoid:"video",playlistid:"playlist"};this.feedQueryString={template:"fox"};this.playTimeout={};this.dataObj={};this.holderObj={};this.overlayObj={defaultImg:l.PROTOCOL+"//global.fncstatic.com/static/v/all/img/vp-overlay.png",blankImg:l.PROTOCOL+"//global.fncstatic.com/static/v/all/img/clear.gif"};};MvPlayer.prototype={init:function(o){var p,s,q=this;for(p in o){q["_"+p]=o[p];}q.embed.root=q.feed.root=q.video.root=q.format.root=q.controls.root=q.thirdParty.root=q.feedParser.root=q._helper.root=this;var r={},m=q._config;if(m.player.feedSettings){if(m.player.feedSettings.videoFolder){r.video=m.player.feedSettings.videoFolder;}if(m.player.feedSettings.playlistFolder){r.playlist=m.player.feedSettings.playlistFolder;}}if(m.player.isLivePlayer){this.itemType.videoid="live";r.video=r.video.replace("/video/","/live/");}if(o.callbacks){if(typeof o.callbacks==="object"&&!e(o.callbacks)){for(s in o.callbacks){if(q._callbacksObj[s]){for(p in o.callbacks){q._callbacksObj[s][p]=o.callbacks[s][p];}}else{q._callbacksObj[s]=o.callbacks[s];}}}}this.videoTypeLinks={videoid:l.PROTOCOL+"//"+q._videoDomain+((r.video)?r.video:q.feedFolder.video),playlistid:l.PROTOCOL+"//"+q._videoDomain+((r.playlist)?r.playlist:q.feedFolder.playlist)};q._isPandora=false;if(typeof i!=="undefined"){var n=new i(q);if(n.init()){q._isPandora=true;c("[videoPlayer.init] Using Pandora.");q.pandora=n;q.pandora.init();}}if(typeof o.onInit==="function"){o.onInit(q);}if(!q._autoEmbed){return false;}q.holder.videoObj=d(".video,.video-ct");q.embed.players();},render:function(q){if(!q){return false;}if(!q.id||!q.holder){return false;}var s,u=this,t=u.idSeparator,m=q.id,o=u._helper;if(q.callbacks){if(u._callbacksObj[m]){for(s in q.callbacks){u._callbacksObj[m][s]=q.callbacks[s];}}else{u._callbacksObj[m]=q.callbacks;}}c("[videoPlayer.render] Render function executed... ");if(!q.autoplay||typeof q.autoplay!=="boolean"){q.autoplay=false;}if(q.holder.data("currentId")===m){return false;}function p(){var w=false;if(q.holder.find("[id^='videoHolder:']").size()>0){var v=q.holder.find("[id^='videoHolder:']:first").attr("id");u.setPlayerMap({type:"set",vId:m,domId:v});w=u.setPlayerMap({type:"get",vId:m});}else{w=u.setPlayerMap({type:"create",vId:m});}var y=d("<div></div>").attr({id:w});if(q.cssClass){y.addClass(q.cssClass);}if(u.pandora){y.data("pandora",true);y.data("autoplay",q.autoplay);}q.holder.html(y);}var n=q.holder.find("> object");if(n.size()>0){try{if(o.isPlayFileReady(n.get(0))){u.setPlayerMap({type:"set",vId:m,domId:n.attr("id")});if(q.cssClass){n.addClass(q.cssClass);}}else{p();}}catch(r){p();}}else{p();}if(u.embed.validate(q.holder,q.holder.children().filter(":first"),m.substring(0,m.indexOf(t)),t)){q.holder.data("currentId",m);u.feed.get({id:m,autoplay:q.autoplay,method:"render"});}},getFeed:function(m){if(!m){return false;}if(!m.id||!m.callback){return false;}var n=this;n.feed.get({id:m.id,method:"getFeed",raw:true,processed:(!m.processed)?false:true,callback:m.callback});},setPlayerMap:function(s){if(!s){return false;}var p=this,o="videoHolder:";switch(s.type){case"create":function r(){return o+a();}var q=r();while(p.playerMap[q]){q=r();}p.playerMap[q]=s.vId;p.playerMap[s.vId]=q;return q;case"set":var n,m=false;for(n in p.playerMap){if(n===s.domId){m=p.playerMap[n];break;}}if(!m){delete p.playerMap[m];}p.playerMap[s.domId]=s.vId;p.playerMap[s.vId]=s.domId;break;case"get":if(s.vId){return(p.playerMap[s.vId])?p.playerMap[s.vId]:false;}else{if(s.domId){return(p.playerMap[s.domId])?p.playerMap[s.domId]:false;}}return false;}},setCustomFlashVars:function(r,p){var o=this;if(o._config.display.customFlashVars){var n=o._config.display.customFlashVars;if(n[p]){var m,q={};for(m in n[p]){q[m]=n[p][m];}o.holderObj[r].customFlashVars=q;}}}};MvPlayer.prototype.controls={pause:function(p){if(!this.validate(p)){return false;}var m=this.root,n=m.holderObj[p];try{if(!n.data("pandora")){document.getElementById(p).pause();}else{m.pandora.CONTROLS.pause(p);}}catch(o){b("[videoPlayer.controls.pause] Error caught:"+o);}},play:function(p){if(!this.validate(p)){return false;}var m=this.root,n=m.holderObj[p];try{if(!n.data("pandora")){document.getElementById(p).unpause();}else{m.pandora.CONTROLS.play(p);}}catch(o){b("[videoPlayer.controls.play] Error caught:"+o);}},jumpToTime:function(q,p){if(!this.validate(q)){return false;}var m=this.root,o=m.holderObj[q].elm,n=m.playerMap[q]||false;if(!n){return false;}if(!o.data("pandora")){document.getElementById(n).jumpToTime(p);}else{m.pandora.CONTROLS.jumpTo(n,p);}},validate:function(n){if(!n){return false;}var m=this.root;n="videoid"+m.idSeparator+"g"+n;if(!m.dataObj[n]){return false;}return true;}};MvPlayer.prototype.embed={validate:function(u,v,q,p){var r,s=this,t=this.root,m=t._config.display.allow;if(typeof t.format[q]==="undefined"){return false;}for(r in m){if(v.hasClass(r)){var w=t.format[q](v,q,p),o=m[r];var n=(function(){var y,C=false,A=v.attr("class").split(" ");for(y=0;y<A.length;y++){var z=A[y];if(z.indexOf("vid-")===0){var B=z.split("-");B.shift();switch(B.join("-")){case"fn2":C="video.foxnews.com";break;case"fb2":C="video.foxbusiness.com";break;case"fb":C="video.foxbusiness.com";break;case"fn-latino":C="video.latino.foxnews.com";break;}}}return{domain:C,site:B};}());t.holderObj[w]={id:w,parentElm:u,elm:v,dim:m[r],format:r};if(n.domain){t.holderObj[w].domain=n.domain;t.holderObj[w].xSite=n.site;t.holderObj[w].xDomain=true;}else{t.holderObj[w].domain=t._videoDomain;}t.setCustomFlashVars(w,r);if(t.pandora){t.holderObj[w].elm.data("pandora",true);}return w;}}return false;},players:function(){var o=this,m=this.root,n=(typeof m._config.display.clickThruImage==="undefined")?false:(typeof m._config.display.clickThruImage!=="object")?m._config.display.clickThruImage:m._config.display.clickThruImage.render,p=m.idSeparator;if(n&&m._isPandora&&!window.useLegacyHTML5){n=false;}m.holder.videoObj.each(function(){var q,s=d(this),r=false;function t(v){s.find("div[id^='"+v+p+"']").each(function(){var w=d(this),y=m.setPlayerMap({type:"create",vId:w.attr("id")});w.attr("id",y);r=o.validate(s,w,v,p);});}for(q=0;q<m.instanceId.length;q++){var u=m.instanceId[q];t(u);}if(r){if(m.holderObj[r].elm.data("pandora")){c("[videoPlayer.players] Loading via Pandora.");m.pandora.load(r);}else{m.feed.get(r);}s.children().filter("div.img").hide();}});},player:function(v){if(!v){return false;}var r=this,z=this.root,t=z.holderObj[v],m=z._helper,E=z._config.player;if(t.elm.data("videoLoaded")){return false;}z.playerIds.push(v);if(t.elm.data("pandora")){if(!t.elm.data("pandoraLoaded")){var w={id:v,format:t.format,width:h(t.dim[0])?t.dim[0]:t.dim[0]+"px",height:h(t.dim[1])?t.dim[1]:t.dim[1]+"px"};if(z._config.player.flashVars.autoplay==="true"){w.autoplay=true;}t.elm.data("pandora",true);t.elm.data("pandoraLoaded",true);t.elm.data("videoLoaded",true);z.holderObj[v].vAttr=w;}z.pandora.load(v);}else{if(typeof swfobject==="undefined"){b("[videoPlayer.embed.player] swfobject not found.");return false;}var q=function(F){if(z._callbacksObj[v]&&z._callbacksObj[v].videoLoadStart){z._callbacksObj[v].videoLoadStart({data:z.dataObj[v]});}if(!F){z.video.load(v);}};if(!t.elm.data("swfLoaded")){var p=z.setPlayerMap({type:"get",vId:v});if(!m.isPlayFileReady(document.getElementById(p))){z.thirdParty.akamai(v,true);var A,D=z._config.player.flashVars,n={};for(A in D){n[A]=D[A];}if(t.customFlashVars){for(A in t.customFlashVars){n[A]=t.customFlashVars[A];}}var C=t.domain,y=t.xDomain,u=t.xSite,B=(!E.environment)?"":(window.location.search.indexOf("venv=prod")>-1)?"":(E.environment==="beta")?"beta.":"";currentDomain=(D.location)?D.location:n.settings_url.split("/")[2];if(currentDomain==="video.latino.foxnews.com"&&C==="video.foxnews.com"){C="video.latino.foxnews.com";u=["fn-latino"];}var o=function(F){var G=(B.length>0&&F.indexOf(B)<0)?B+C:C;return F.replace(F.split("/")[2],G);};if(y){if(l.yume_ad_domain_code[u]){n.yume_ad_domain_code=l.yume_ad_domain_code[u];}if(l.settings_url[u]){n.settings_url=l.settings_url[u];}}n.settings_url=o(n.settings_url);n.core_yume_ad_library_url=o(n.core_yume_ad_library_url);n.core_yume_player_url=o(n.core_yume_player_url);n.data_feed_url=o(n.data_feed_url);E.location=o(E.location);if(z._config.player.tokenCallback){z._config.player.tokenCallback(p);}if(z._config.player.pip){var s=r.setPinP(E,n);n=s.flashVars;E=s.info;}swfobject.embedSWF(E.location,p,t.dim[0],t.dim[1],E.flashVersion,E.expressInstall,n,z._config.player.params);t.elm.data("swfLoaded",true);t.elm.data("videoLoaded",true);if(z._config.player.token){z.dataObj[v]=z.feedParser.setToken(z.dataObj[v],z._config.player.token);d.loadAttempt(50,800,function(){return m.isPlayFileReady(document.getElementById(p));},function(){setTimeout(function(){q();b("[videoPlayer.player] Token: "+z._config.player.token);},500);});}else{q(true);}}else{q();}}else{q();}}},setPinP:function(n,o){if(n.location&&o.settings_url){n.location=n.location.replace("FoxNewsPlayer.swf","FoxNewsPlayerMulti.swf");var m=o.settings_url;o.settings_url=(function(q){var r=q.split("/"),p=r.length-1;if(r[p].indexOf("config-multi")===-1){r[p]="config-multi.xml";}return r.join("/");}(m));}return{info:n,flashVars:o};},clickthru:function(s,t){var r=this,m=this.root,p=m.holderObj[t],q=m.overlayObj.blankImg;p.elm.parent().css({width:h(p.dim[0])?p.dim[0]:p.dim[0]+"px",minHeight:h(p.dim[1])?p.dim[1]:p.dim[1]+"px"});p.elm.html('<a href="#"><img src="'+q+'" /></a>');var o=p.elm.find("img");o.css({width:h(p.dim[0])?p.dim[0]:p.dim[0]+"px",height:h(p.dim[1])?p.dim[1]:p.dim[1]+"px",opacity:"0"});(function(){var y=function(E){o.attr("src",E).animate({opacity:"1"},400,"swing");};var u=function(I){var G=I.split("/"),F=G.length,H=G[F-3],E=G[F-2];G[F-3]=(!isNaN(H))?p.dim[0]:H;G[F-2]=(!isNaN(E))?p.dim[1]:E;return G.join("/");};var D=false,z=p.parentElm;var C=z.children("div.img"),B=z.find(".m-controller img:first"),A=z.parent().children("div.m-controller img:first");if(C.attr("src")&&d.trim(C.attr("src")).length>0){y(d.trim(C.attr("src")));f.set({elm:p.elm,dim:p.dim,position:"bottom right"});}else{if(B.attr("src")&&d.trim(B.attr("src")).length>0){y(d.trim(B.attr("src")));f.set({elm:p.elm,dim:p.dim,position:"bottom right"});}else{if(A.attr("src")&&d.trim(A.attr("src")).length>0){y(d.trim(A.attr("src")));f.set({elm:p.elm,dim:p.dim,position:"bottom right"});}else{var w=new Image(),v=u(s.thumbnail);w.onload=function(){y(v);f.set({elm:p.elm,dim:p.dim,position:"bottom right"});};w.src=v;}}}}());var n=p.elm.find("a");n.css({display:"block",visibility:"visible",padding:"0"}).click(function(){var u=function(){if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}r.player(t);};try{m._config.display.clickThruImage.callbackFn({runPlayer:u});return false;}catch(v){}u();return false;});}};MvPlayer.prototype.thirdParty={akamaiMediaAnalytics:function(n){if(!n||typeof AKAMAI_MEDIA_ANALYTICS_JS_SRC==="undefined"||typeof AKAMAI_MEDIA_ANALYTICS_CALLBACK==="undefined"){return false;}if(!d(document).data("AkamaiH5Analytics")){var m=document.createElement("script");m.type="text/javascript";m.async=true;m.src=AKAMAI_MEDIA_ANALYTICS_JS_SRC;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(m);}d.loadAttempt({maxAttempts:30,timeout:500,callback:{check:function(){return(typeof setAkamaiMediaAnalyticsData!=="undefined")?true:false;},success:function(){AKAMAI_MEDIA_ANALYTICS_CALLBACK(n);}}});},akamai:function(n){var u=this,w=this.root,p=w._config.player,v=w.holderObj[n],z=n.split(":")[1].replace(/[a-zA-z]/gi,""),t=w.itemType[w.dataObj[n].itemType];if(w.dataObj[n]&&w.dataObj[n].isMavenFeed){z=w.dataObj[n].guid;}w._config.player.flashVars.video_id=z;w._config.player.flashVars.data_feed_url=l.PROTOCOL+"//"+w._videoDomain+"/v/feed/"+t+"/"+z+".js?template=fox";function m(B,C){var A;for(A=0;A<B.length;A++){if(v.elm.hasClass(B[A])){switch(C){case"share":w._config.player.flashVars.show_sharing_overlay="false";break;case"email":w._config.player.flashVars.show_email_overlay="false";break;}return true;}}return false;}if(typeof w._config.display!=="undefined"){var y=w._config.display;if(typeof y.restrict!=="undefined"){if(y.restrict.sharingOverlay){m(y.restrict.sharingOverlay,"share");}if(y.restrict.emailOverlay){m(y.restrict.emailOverlay,"email");}}}if(t.toLowerCase().indexOf("playlist")>-1){try{var s=w.dataObj[n].PLVideos,o=s[0]["media-content"],r=o["mvn-assetUUID"];w._config.player.flashVars.video_id=r;w._config.player.flashVars.data_feed_url=l.PROTOCOL+"//"+w._videoDomain+"/v/feed/video/"+r+".js?template=fox";}catch(q){b("[videoPlayer.thirdparty.akamai] Failed to load first video from playlist feed: "+q,true);}}},baynote:function(m){var u=this,w=this.root,y=w.dataObj[m],v=w.holderObj[m],n=w._helper,o=(y.thumbnail)?y.thumbnail:false,p=(y.title)?y.title:false;var q=(function(){var C=(y.duration)?y.duration:false;if(!C&&isNaN(C)){return false;}return C;}());var z=(function(){var D=n.cleanTitle(y.title),E=l.PROTOCOL+"//"+w._videoDomain,C=y.guid;E+="/v/"+C+"/"+D+"/";return E;}());function t(){if(typeof baynote_track_video_attribute!=="undefined"){if(o&&q&&p&&z){baynote_track_video_attribute(o,q,p,z);b("[videoPlayer.thirdparty.baynote] Successful baynote call: baynote_track_video_attribute(thumbnailUrl,duration,linkText)");b("[videoPlayer.thirdparty.baynote] thumbnailUrl = "+o);b("[videoPlayer.thirdparty.baynote] duration = "+q);b("[videoPlayer.thirdparty.baynote] linkText = "+p);b("[videoPlayer.thirdparty.baynote] url = "+z);return true;}b("[videoPlayer.thirdparty.baynote] Baynote track function not triggered. insufficient video data for: thumbnail url / duration / link text / url.");return true;}b("[videoPlayer.thirdparty.baynote] Baynote track function not defined.");return false;}var B=30,A=0,s=false;function r(){if(typeof baynote_track_video_attribute!=="undefined"){t();clearTimeout(s);}else{if(A>B){b("[videoPlayer.thirdparty.baynote] Baynote track function call attempts maxed out... ");t();clearTimeout(s);}else{A++;s=setTimeout(function(){b("[videoPlayer.thirdparty.baynote] Attempting to call Baynote track function... attempt: "+A);r();},500);}}}if(typeof baynote_track_video_attribute!=="undefined"){t();}else{d(document).ready(function(){r();});}}};MvPlayer.prototype.video={load:function(t){var r=this,n=this.root,p=n._helper,q=n._config.player.flashVars.autoplay,s=n.setPlayerMap({type:"get",vId:t}),m=document.getElementById(s);c("[videoPlayer.load] Loading player...");if(p.isPlayFileReady(m)){var o=(typeof n._config.display.clickThruImage==="undefined")?false:(typeof n._config.display.clickThruImage!=="object")?n._config.display.clickThruImage:n._config.display.clickThruImage.render;if(o&&n._isPandora&&!window.useLegacyHTML5){o=false;}if(n.dataObj[t]){q=(o)?true:(n._config.player.flashVars.autoplay)?true:false;if(!n._config.player.pip){m.playFile(n.dataObj[t].rawData,q);}else{b("[videoPlayer.load] PlayFile disabled for PIP.");}}else{n.feed.get({id:t,autoplay:q});}clearTimeout(n.playTimeout[t]);}else{n.playTimeout[t]=setTimeout(function(){r.load(t);},100);}}};MvPlayer.prototype.feed={get:function(){var v,G,w=this,F=this.root,o=F.idSeparator,n=arguments[0],A={},t=false;if(typeof n==="object"){for(G in n){A[G]=n[G];}}else{A.id=n;}if(!A.id){b("[videoPlayer.feed.get] Error: no id passed");return false;}var C="parse_"+F._helper.formatVideoId(A.id,true,true)+((A.raw)?"_getraw":""),s=F._namespace+".feed."+C,I=false;I=(function(){var J;for(J in F.videoTypeLinks){if(A.id.indexOf(J)>-1){return{prefix:F.videoTypeLinks[J],type:J};}}return false;}());if(!I){b("[videoPlayer.feed.get] Error: no feed link: "+A.id);return false;}function m(){return(I.type==="playlistid")?true:false;}var B=A.id.substr(I.type.length+o.length),r=I.prefix;if(B.charAt(0).toLowerCase()!=="g"){if(I.type==="videoid"){r=r.replace("/v/","/");t=true;}}else{B=B.substr(1);}var p=r+B+".js",u=[],H={};u.push("callback="+s);if(F.feedQueryString){var E=F.feedQueryString;for(G in E){if(G==="template"){if(!m()){u.push(G+"="+E[G]);}}else{u.push(G+"="+E[G]);}}}for(v=0;v<u.length;v++){var D=u[v].split("=");H[D[0]]=D[1];}u.push("jsonp=?");var q="?"+u.join("&"),y=(A.method)?((A.method==="render")?true:false):false;if(!F.feed[C]||y){F.feed[C]=function(M){if(F.holderObj[A.id]){F.holderObj[A.id].ajaxComplete=true;}var J=(m())?F.feedParser.legacy(M):F.feedParser.fox(M);if(A.raw){if(A.callback){A.callback((A.processed)?J:M);}}else{var L=F.holderObj[A.id],K=(typeof F._config.display.clickThruImage==="undefined")?false:(typeof F._config.display.clickThruImage!=="object")?F._config.display.clickThruImage:F._config.display.clickThruImage.render;if(K&&F._isPandora&&!window.useLegacyHTML5){K=false;}F.dataObj[A.id]=J;F.dataObj[A.id].rawData=M;F.dataObj[A.id].itemType=I.type;F.dataObj[A.id].isMavenFeed=t;if(A.autoplay){F._config.player.flashVars.autoplay="true";}if(J){if(K&&!A.autoplay){F.embed.clickthru(J,A.id);}else{F.embed.player(A.id);}if(F._callbacksObj[A.id]){if(F._callbacksObj[A.id].feedLoaded){F._callbacksObj[A.id].feedLoaded(J);}}}else{b("[videoPlayer.feed.get] Warning: no data found!");}}};}H.cb=F._helper.cacheBuster();function z(){p=(function(L){var K=L;if(F.holderObj[A.id]&&F.holderObj[A.id].domain){var J=F.holderObj[A.id].domain,N=L.split(l.PROTOCOL+"//"),M=N[1].split("/");if(M[0]!==J){M[0]=J;}N[1]=M.join("/");K=N.join(l.PROTOCOL+"//");}return K;}(p));d.ajax({url:p,data:H,dataType:"script",async:true,cache:true});}z();}};MvPlayer.prototype.format={videoid:function(q,n,p){var m=this.root,o=m.setPlayerMap({type:"get",domId:q.attr("id")});if(!o){return false;}var r=o.substr(n.length+1);return"videoid"+p+r;},videolink:function(r,t,s){var w=this.root,p=r.attr("id"),n=w.setPlayerMap({type:"get",domId:p}),o="playlist",z="playlistid"+s;if(n.indexOf("?"+o)===-1){return false;}var y,v=n.substr(n.indexOf("?")+1),u=v.split("&");for(y=0;y<u.length;y++){var q=u[y].split("=");if(q[0].toLowerCase()==="playlist_id"){var m=z+q[1];w.setPlayerMap({type:"set",vId:m,domId:p});return m;}}},playlistid:function(q,o,p){var m=this.root,n=m.setPlayerMap({type:"get",domId:q.attr("id")});if(!n){return false;}var r=n.substr(o.length+1);return"playlistid"+p+r;}};MvPlayer.prototype.feedParser={setToken:function(q,o){var m,n=this.root,p=n._helper;return q;},fox:function(C){var r,w=this.root,m=w._helper;if(typeof C.channel.item==="undefined"){return false;}var H=C.channel,D=C.channel.item,q=[];if(D instanceof Array){for(r=0;r<D.length;r++){q.push(D[r]);}D=C.channel.item[0];}if(!D["media-group"]){return false;}var B=D["media-group"];function v(){var I=B["media-thumbnail"]||false;if(!I){return"";}if(e(I)&&I[0]&&I[0]["@attributes"]){return I[0]["@attributes"].url||"";}else{if(I&&I["@attributes"]){return I["@attributes"].url||"";}}return"";}function G(){try{return B["media-content"][0]["@attributes"].duration;}catch(I){b("[videoPlayer.feedParser.grab] Get Duration error: "+I);return"0";}}var s={url:D.link,title:D.title,description:D.description,shortDescription:D.description,keywords:"",thumbnail:v(),guid:D.guid,channel:"",playlist:"",personality:"",format:"",show:"",category:H.category,creationDate:m.convertGrabDate(D.pubDate),loc:l.PROTOCOL+"//"+window.location.host+window.location.pathname,duration:G()};var n=B["media-content"]||false;if(n){var z,u,y={},A=false,F=false,p=false;var t=function(J,I){return(J.indexOf(I)>-1)?true:false;};for(r=0;r<n.length;r++){var E=n[r]["@attributes"],o=E.url;if(E.type==="video/mp4"){if(!A){A=true;p=E;}if(t(o,"_LOW")){y.LOW=E;F=E;}else{if(t(o,"_MED")){y.MED=E;}else{if(t(o,"_HIGH")){y.HI=E;}}}}else{if(E.type==="application/x-mpegURL"&&t(o,".m3u8")){y.STREAM=E;}}}if(A){if(!y.LOW){y.LOW=(y.MED)?y.MED:(y.HI)?y.HI:p;}if(!y.MED){y.MED=(y.LOW)?y.LOW:(y.HI)?y.HI:p;}if(!y.HI){y.HI=(y.LOW)?y.LOW:(y.MED)?y.MED:p;}}u=0;for(z in y){u++;break;}y=(u>0)?y:false;s.htmlFive=y;}if(q.length>0){s.PLVideos=q;}return s;},grab:function(v){var s,r=this.root,n=r._helper;if(typeof v.channel.item==="undefined"){return false;}var u=v.channel.item,o=[];if(u instanceof Array){for(s=0;s<u.length;s++){o.push(u[s]);}u=v.channel.item[0];}if(!u["media-group"]){return false;}var m=u["media-group"];function q(){if(typeof m["media-thumbnail"][0]!=="undefined"){var w=m["media-thumbnail"][0];return(w["@attributes"].url)?w["@attributes"].url:"";}return"";}function t(){try{return m["media-content"][0]["@attributes"].duration;}catch(w){b("[videoPlayer.feedParser.grab] Get Duration error: "+w);return"0";}}var p={url:u.link,title:u.title,description:u.description,shortDescription:u["grab-short_description"],keywords:m["media-keywords"],thumbnail:q(),guid:u.guid,channel:u["grab-channel"],playlist:u["grab-playlist"],personality:u["grab-personality"],format:u["grab-format"],show:u["grab-show"],category:m["media-category"],creationDate:n.convertGrabDate(u.pubDate),loc:l.PROTOCOL+"//"+window.location.host+window.location.pathname,duration:t()};if(o.length>0){p.PLVideos=o;}return p;},legacy:function(u){var s,r=this.root,n=r._helper;if(typeof u.channel.item==="undefined"){return false;}var t=u.channel.item,p=[];if(t instanceof Array){for(s=0;s<t.length;s++){p.push(t[s]);}t=u.channel.item[0];}if(!t["media-content"]){return false;}var m=t["media-content"];if(!m["media-credit"]){return false;}var o=m["media-credit"];var q={url:m["@attributes"].url,title:t.title,description:m["media-description"],keywords:m["media-keywords"],thumbnail:m["media-thumbnail"],guid:m["mvn-assetUUID"],mavenid:m["mvn-mavenId"],channel:(m["mvn-fnc_channel"])?m["mvn-fnc_channel"]:m["mvn-fbn_channel"],playlist:m["mvn-fnc_default_playlist"],personality:(m["mvn-fnc_personality"])?m["mvn-fnc_personality"]:m["mvn-fbn_personality"],format:(m["mvn-fnc_format"])?m["mvn-fnc_format"]:m["mvn-fbn_format"],show:(m["mvn-fnc_show"])?m["mvn-fnc_show"]:m["mvn-fbn_show"],category:(m["mvn-fnc_category"])?m["mvn-fnc_category"]:m["mvn-fbn_category"],creationDate:n.convertDate(m["mvn-creationDate"]),shortDescription:m["mvn-shortDescription"],loc:l.PROTOCOL+"//"+window.location.host+window.location.pathname,duration:(m["mvn-duration"])?m["mvn-duration"]:(m["mvn-videoSeconds"])?m["mvn-videoSeconds"]:0};if(p.length>0){q.PLVideos=p;}return q;}};MvPlayer.prototype._helper={cacheBuster:function(n){n=n||false;var m=new Date(),o=m.getFullYear().toString()+(m.getMonth()+1).toString()+m.getDate().toString();switch(n){case"h":o+=(m.getHours()+1).toString();break;case"30m":o+=(m.getHours()+1).toString()+((m.getMinutes()%30===0)?"1":"0");break;default:o+=(m.getHours()+1).toString();}return o;},isPlayFileReady:function(m){m=m||false;if(!m){return false;}return(typeof m.playFile!=="undefined")?true:false;},formatVideoId:function(o,m,n){m=m||false;n=n||false;if(n){o=o.split("").reverse().join("");}if(m){return o.replace(/\:/gi,"_");}else{return o.replace(/\_/gi,":");}},convertGrabDate:function(o){o=o||false;if(!o){return"";}var n=new Date(o),m=["January","February","March","April","May","June","July","August","September","October","November","December"];if(isNaN(n.getTime())){return"";}return m[n.getMonth()]+" "+n.getDate()+", "+n.getFullYear();},convertDate:function(o){if(typeof o!=="undefined"){var m=["January","February","March","April","May","June","July","August","September","October","November","December"],n=o.toString().split("T");n=n[0].split("-");n=new Date(n[0],(n[1]-1),n[2]);return m[n.getMonth()]+" "+n.getDate()+", "+n.getFullYear();}else{return"";}},extractVideoId:function(n){var m=n.replace(/^(http|https):\/\/?[a-zA-Z0-9\.]+/,"");m=(m.indexOf("#")===0)?m.substring(2):m.substring(1);return m.substring(0,m.indexOf("/"));},extractCategoryId:function(m){return m.split("category_id=")[1];},cleanTitle:function(m){m=m.replace(/\s+/g,"-").toLowerCase();return m.replace(/[^a-z0-9\-]/g,"");},cleanHref:function(m){return m.replace(/^(http|https):\/\/?[a-zA-Z0-9\.]+/,"");},cleanImageUrl:function(m){return m.replace(l.PROTOCOL+"//media2.foxnews.com","");},convertTime:function(n){var o=Math.floor(n/60),m=Math.floor(n%60);m=(m<10)?"0"+m:m;return o+":"+m;},videoObjectJSON:function(m){return this.root.feedParser.legacy(m);}};function a(n,p){n=n||999999;p=p||25;function o(){return(Math.floor(Math.random()*n)%2===1)?true:false;}function r(){var t=(o())?97:65;return String.fromCharCode(t+Math.round(Math.random()*25));}function q(){return Math.floor(Math.random()*10);}function s(){return(o())?r():q();}function m(){var u,t=[];for(u=0;u<(p-1);u++){t.push(s());}t.sort(function(){return 0.5-Math.random();});return r()+t.join("");}return m();}var i=(function(){var n={dm:"Agent",vcm:"i",ox:"vt"};var r=function(v){this.main=v;this.video={};this.prefix={controls:"player-controls-",playPause:"playpause-",fullScreen:"fullscreen-",loadPct:"load-counter-"};this.prefix.time={current:"time-current",duration:"time-duration"};this.controlsHTML='<strong>listeners:</strong>  <a id="'+this.prefix.playPause+'${id}" href="#">${playState}</a> | Current Time: <span id="'+this.prefix.time.current+'${id}">00:00</span> | Duration Time: <span id="'+this.prefix.time.duration+'${id}">00:00</span>';n.ol={arg:"P",lmp:"COM",rd:"USER"};this.listeners=new s(this);this.TYPE=new q(this);this.EVENTS=new p(this);this.PROPERTIES=new u(this);this.STATES=new t(this);this.CONTROLS=new m(this);this.ADS=new o(this);};r.prototype={init:function(v){v=v||false;if(v){var w;for(w in v){this["_"+w]=v[w];}}if(!this.compatible()){return false;}if(this.helper.getQuery("html5")==="legacy"){window.useLegacyHTML5=true;}return true;},compatible:function(){var v=false;if(this.helper.getQuery("_"+n.ox+n.ol.lmp.toLowerCase()+n.ol.arg.toLowerCase())==="y"){this._forced=true;v=k();}else{v=(k()&&g())?true:false;}return v;},check:function(v){return this.compatible();},create:function(v){},load:function(v,y){var G=this,B=this.main,w=g(),A=(typeof w==="string"&&w==="legacy")?true:false;if(!this.check(v)){return false;}c("[videoPlayer.pandora] Loading....");var E=function(){B.holderObj[v].elm.data("pandora",false);B.holderObj[v].elm.data("pandoraLoaded",false);if(g()){if(B._callbacksObj[v]){if(B._callbacksObj[v].deviceRenderFailed){B._callbacksObj[v].deviceRenderFailed();}}}else{B.embed.player(v);}};if(B.dataObj[v]){var D=B.dataObj[v],z=B.holderObj[v];y=(typeof y==="undefined")?z.vAttr.autoplay:y;var C=(A||window.useLegacyHTML5)?false:true;if(C){c("[videoPlayer.pandora] Loading HTML5 Akamai video player...");G.TYPE.AKAMAI(D,v,false,y);}else{if(!D.htmlFive){c("[videoPlayer.pandora] Rendering failed. No html5 data.");E();}else{var F=(function(){var H=false;if(D.htmlFive.STREAM&&!G._forced&&!A){H=D.htmlFive.STREAM.url;}else{if(D.htmlFive.LOW){H=D.htmlFive.LOW.url;}else{if(D.htmlFive.MED){H=D.htmlFive.MED.url;}else{if(D.htmlFive.HI){H=D.htmlFive.HI.url;}}}}return H;}());if(!F){c("[videoPlayer.pandora] Rendering failed. no html5 video url.");E();return false;}c("[videoPlayer.pandora] Loading HTML5 Legacy video player...");G.TYPE.LEGACY(D,v,F,y);}}}else{B.feed.get({id:v,autoplay:y});}}};r.prototype.helper={replaceStr:function(z,w,y){var v=z.indexOf(w);while(v!==-1){z=z.replace(w,y);v=z.indexOf(w);}return z;},formatTime:function(z){z=parseInt(z,10);var y=Math.floor(z/360),w=Math.floor(z/60),v=z%60;function A(B){return(B<10)?"0"+B:B;}return((y>0)?A(y):"")+A(w)+":"+A(v);},getQuery:function(z){var v,y=(window.location.search).substr(1),A=y.split("&");for(v=0;v<A.length;v++){var w=A[v].split("=");if(w[0]===z){return w[1];}}return false;}};var q=(function(){var v=function(w){this.root=w;};v.prototype.LEGACY=function(E,y,H,A){var I=this,F=this.root,C=F.main,B=C.holderObj[y],D=B.elm,z=(typeof C._config.display.clickThruImage==="undefined")?false:(typeof C._config.display.clickThruImage!=="object")?C._config.display.clickThruImage:C._config.display.clickThruImage.render;if(z&&F._isPandora&&!window.useLegacyHTML5){z=false;}c("[videoPlayer.pandora] Using Legacy HTML5 video player.");if(!D.data("pandoraLoaded")){C.embed.player(y);}else{var w=(function(){var J=true,L=(C._config.player.flashVars&&C._config.player.flashVars.core_ads_enabled!=="undefined")?C._config.player.flashVars.core_ads_enabled:false,M=(B.customFlashVars&&typeof B.customFlashVars.core_ads_enabled!=="undefined")?B.customFlashVars.core_ads_enabled:false;var K=function(O){var N;if(typeof O==="string"&&O.toLowerCase()==="true"){N=true;}else{if(typeof O==="boolean"){N=true;}else{N=false;}}return N;};if(F.helper.getQuery("_vtads")==="n"){J=false;}else{if(M){J=K(M);}else{if(L){J=K(L);}}}return J;}());var G=function(){var L,M=(B.elm.data("autoplay"))?true:false,K=B.elm.parent(),J=[],N=[],Q="width|height";for(L in B.vAttr){if(L==="format"){J.push('class="'+B.vAttr[L]+' pandora-player"');}else{if(L==="id"){var P=C.setPlayerMap({type:"get",vId:B.vAttr[L]});C.setPlayerMap({type:"set",vId:y,domId:P});J.push('id="'+P+'"');}else{if(Q.indexOf(L)>-1){N.push(L+":"+B.vAttr[L]+";");}}}}c("[videoPlayer.pandora.LEGACY] Video Source: "+H);var O=N.join(" ");newVideo='<video controls="" '+J.join(" ")+' src="'+H+'" style="'+O+'"></video>';K.get(0).innerHTML=newVideo;K.find("video:first").each(function(){var R=d(this);R.data("pandora",true);R.data("pandoraLoaded",true);R.data("autoplay",M);F.video[y]={elm:R,nativeElm:R.get(0)};F.listeners.init(y);if(C._callbacksObj[y]){if(C._callbacksObj[y].dataChanged){C._callbacksObj[y].dataChanged(E);}}if(z||M){F.CONTROLS.play(y);}C.thirdParty.akamaiMediaAnalytics(R.attr("id"));c("[videoPlayer.pandora.LEGACY] Legacy Player: Play ads = "+((w)?"TRUE":"FALSE"));if(w){F.ADS.set({id:y,elm:K,url:H,dim:B.dim});}});};c("[videoPlayer.pandora.LEGACY] Legacy Player: Play ads = "+((w)?"TRUE":"FALSE"));if(w){F.ADS.load(function(){G();});}else{G();}}};v.prototype.AKAMAI=function(W,M,A,G){var I=this,Q=I.root,C=Q.main;var D=function(X){return X.replace(/[^0-9]/gi,"");};var S=C.holderObj[M],E=D(M),B=(S.elm.data("autoplay"))?true:false,F=(C._config.player.variable)?true:false,L=S.elm.parent(),P=S.vAttr,N=h(P.width)?P.width:D(P.width),J=h(P.height)?P.height:D(P.height),w=C._config.player,R=(!w.environment)?"":(window.location.search.indexOf("venv=prod")>-1)?"":(w.environment==="beta")?"beta.":"",V=(Q.helper.getQuery("_"+n.ox+n.ol.lmp.toLowerCase()+n.ol.arg.toLowerCase())==="y")?true:false,T=R+C._videoDomain,O=l.PROTOCOL+"//"+T,y=[];c("[videoPlayer.pandora] Using AKAMAI HTML5 video player.");if(G){y.push("autoplay=true");}y.push("_vtcomp=y");var H;var K=O+"/static/p/video/app/embed.html",z=Q.helper.getQuery("_ver")||false,U=["video_id="+D(M)].concat(y);if(z){U.push("_ver="+z);}if(!F){U.push("w="+N,"h="+J);K+="?"+U.join("&");H='<iframe src="'+K+'" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="'+N+'" height="'+J+'" style="border:0;width:'+P.width+";height:"+P.height+'"></iframe>';}else{U.push("w=1","h=1");K+="?"+U.join("&");H='<iframe src="'+K+'" marginwidth="0" marginheight="0" frameborder="0" scrolling="no" width="100%" height="100%" style="border:0;width:100%;height:100%"></iframe>';H='<div id="fox-html5-frame" style="width:'+P.width+";height:"+P.height+'">'+H+"</div>";}L.get(0).innerHTML=H;};return v;}());var o=(function(){var v=function(w){this.root=w;this.zoneIdVal=(function(){var z=l.auditude_code.zoneId,y=z.fn2;switch(w._videoDomain){case"video.foxnews.com":y=z.fn2;break;case"video.foxbusiness.com":y=z.fb2;break;case"video.foxbusiness.com":y=z.fb;break;}return y;}());};v.prototype={set:function(Q){if(!Q){return false;}var F=this,I=this.root,G=(I.main.dataObj[Q.id]&&I.main.dataObj[Q.id].guid)?I.main.dataObj[Q.id].guid:false,z=Q.elm,K=Q.url,L=Q.dim,y=(Q.userData)?Q.userData:{};var H=function(T){var R="p-click-"+G;try{d("body").append('<a href="#" id="'+R+'" style="display:none;">Click Me</a>');d("#"+R).click(function(){T.play();return false;});setTimeout(function(){d("#"+R).click().remove();},250);}catch(S){c("[videoPlayer.auditude] No play() function for html5 video element. (Err: "+S+")");}};var N,A,C,B,J=window.FN_AUDITUDE||{};N=(J.adVideoId)?J.adVideoId:G;A=(J.adDomain)?J.adDomain:l.auditude_code.adDomain;C=(J.zoneId)?J.zoneId:F.zoneIdVal;B=(J.defaultAssetId)?J.defaultAssetId:l.auditude_code.defaultAssetId;N=(N)?[N,B]:B;y.mobile=(function(){var R=j();return(R)?R.dev:"false";}());b("mobile platform:"+y.mobile);y=(function(){var R=[];for(var S in y){R.push(S+"="+y[S]);}return R.join(";");}());var D=z.get(0),P=z.find("video:first"),O=P.get(0),w=false;var E={controls:true,style:{backgroundColor:"#000",width:P.width(),height:P.height()},handlers:{}};var M=aud.html5.AdPlayer(O,D,A,C,E);M.subscribe(aud.events.init_complete,function(S,R){c("[videoPlayer.auditude] Init Complete event");R.publish(aud.notifications.break_begin);}).subscribe(aud.events.break_begin,function(S,R){c("[videoPlayer.auditude] Break Begin event");}).subscribe(aud.events.break_end,function(S,R){c("[videoPlayer.auditude] Break End event");if(!w){O.src=K;O.load();H(O);}}).subscribe(aud.events.linear_ad_begin,function(T,S,R){c("[videoPlayer.auditude] Linear Ad Begin event");}).subscribe(aud.events.linear_ad_end,function(T,S,R){c("[videoPlayer.auditude] Linear Ad End event");}).subscribe(aud.events.non_linear_ad_begin,function(T,S,R){c("[videoPlayer.auditude] Non-Linear Ad Begin event");}).subscribe(aud.events.non_linear_ad_end,function(T,S,R){c("[videoPlayer.auditude] Non-Linear Ad End event");}).subscribe(aud.events.pause_playback,function(T,S,R){c("[videoPlayer.auditude] Pause playback event");O.pause();}).subscribe(aud.events.resume_playback,function(T,S,R){c("[videoPlayer.auditude] Resume playback event");H(O);}).init(N,{userData:y});},load:function(z){var y=this;if(!window.aud){var w=document.createElement("script");w.type="text/javascript";w.async=true;w.src=l.PROTOCOL+"//adunit.cdn.auditude.com:80/player/js/lib/plugin/1.2/aud.html5player.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(w);}d.loadAttempt(50,250,function(){return(window.aud&&aud.html5)?true:false;},function(){if(typeof z==="function"){z();}});}};return v;}());var s=(function(){var v=function(w){this.root=w;};v.prototype={init:function(w){this.events(w);this.custom(w);},events:function(z){var y=this.root,w=y.main;y.video[z].elm.bind("loadstart",function(){if(w._callbacksObj[z]){if(w._callbacksObj[z].videoLoadStart){w._callbacksObj[z].videoLoadStart();}}d.removeData(y.video[z].elm,"Event_ended");y.EVENTS.loadStart(z);});y.video[z].elm.bind("progress",function(){y.EVENTS.progress(z);});y.video[z].elm.bind("loadedmetadata",function(){if(w._callbacksObj[z]){if(w._callbacksObj[z].videoMedaLoaded){w._callbacksObj[z].videoMetaLoaded();}}y.EVENTS.loadedMetaData(z);});y.video[z].elm.bind("ended",function(){if(w._callbacksObj[z]){if(w._callbacksObj[z].videoEnded){w._callbacksObj[z].videoEnded(y.CONTROLS);}}y.video[z].elm.data("Event_ended",true);y.EVENTS.ended(z);});y.video[z].elm.bind("playing",function(){if(w._callbacksObj[z]){if(w._callbacksObj[z].videoPlaying){w._callbacksObj[z].videoPlaying();}}y.EVENTS.playing(z);});y.video[z].elm.bind("pause",function(){if(w._callbacksObj[z]){if(w._callbacksObj[z].videoPause){w._callbacksObj[z].videoPause();}}y.EVENTS.pause(z);});y.video[z].elm.bind("timeupdate",function(){if(w._callbacksObj[z]){if(w._callbacksObj[z].videoTimeUpdate){w._callbacksObj[z].videoTimeUpdate();}}y.EVENTS.timeUpdate(z);});},custom:function(w){}};return v;}());var m=(function(){var v=function(w){this.root=w;};v.prototype={play:function(A){var y=this.root,w=y.main,z=w.setPlayerMap({type:"get",vId:A});if(typeof document.getElementById(z)!=="undefined"){document.getElementById(z).play();}},pause:function(A){var y=this.root,w=y.main,z=w.setPlayerMap({type:"get",vId:A});if(typeof document.getElementById(z)!=="undefined"){document.getElementById(z).pause();}},load:function(w){},canPlayType:function(w){},jumpTo:function(B,A){if(isNaN(A)){return false;}var y=this.root,w=y.main,z=w.setPlayerMap({type:"get",vId:B});if(typeof document.getElementById(z)!=="undefined"){document.getElementById(z).currentTime=A;}}};return v;}());var p=(function(){var v=function(w){this.root=w;};v.prototype={loadStart:function(A){var y=this.root,w=y.main,z=w.setPlayerMap({type:"get",vId:A});},progress:function(A){var w=this.root,z=w.STATES.buffered(A,{range:"end",val:0}),y=parseInt((z/w.STATES.duration(A))*100,10);},loadedMetaData:function(w){},timeUpdate:function(w){},ended:function(w){},playing:function(w){},pause:function(w){}};return v;}());var u=(function(){var v=function(w){this.root=w;};v.prototype={currentTime:function(C,y){y=y||false;var w=this.root,B=Math.round(w.video[C].nativeElm.currentTime);if(!y){var A=w.helper.formatTime(B),z=w.STATES.duration(C,true);return(A>z)?z:A;}return B;}};return v;}());var t=(function(){var v=function(w){this.root=w;};v.prototype={duration:function(C,z){z=z||false;var y=this.root,w=y.main,B=w.setPlayerMap({type:"get",vId:C});if(typeof document.getElementById(B)==="undefined"){return 0;}var A=Math.round(document.getElementById(B).duration);if(!z){return y.helper.formatTime(A);}return A;},buffered:function(C,z){z=z||false;if(!z){return false;}var y=this.root,w=y.main,B=w.setPlayerMap({type:"get",vId:C});if(typeof document.getElementById(B)!=="undefined"){try{switch(z.range){case"length":return document.getElementById(B).buffered.length;case"start":return document.getElementById(B).buffered.start(z.val);case"end":return document.getElementById(B).buffered.end(z.val);}}catch(A){c("[videoPlayer.pandora.states] Warning: "+A);}}return false;}};return v;}());return r;}());var f={set:function(){var m,p,n=this,o=arguments,q={elm:false,ratio:false,dim:false,position:false,size:false,hover:true};if(o.length===1&&typeof o[0]==="object"){for(p in o[0]){q[p]=o[0][p];}}else{for(m=0;m<o.length;m++){switch(m){case 0:q.elm=o[0];break;case 1:q.ratio=o[1];break;case 2:q.dim=o[2];break;case 3:q.position=o[3];break;case 4:q.size=o[4];break;case 5:q.useAltImg=o[5];break;case 6:q.altHover=o[6];break;}}}q.elm.each(function(){var s=d(this),r=new Image(),t=q;t.elm=s;if(t.dim){n.setOverlay(t);}else{r.onload=function(){t.dim=[r.width,r.height];n.setOverlay(t);};r.src=s.find("img").attr("src");}});},useAbsImg:function(q,n){var u,m=["118","96","64","48","32","24","16"],t=false;if(!isNaN(q)){if(q>=m[0]){t=m[0];}else{for(u=0;u<m.length;u++){var o=m[u],s=(m[u+1])?m[u+1]:0,r=Math.abs(o-q),p=Math.abs(o-s);if(q<=o&&q>s){t=(r>p)?s:o;break;}}}}return(t)?t:false;},setOverlay:function(n){var m=this,u=n.elm,v=n.ratio||0.35,o=n.dim,p=n.position||"center",D=n.size||118,q=n.useAltImg,C=n.altHover||false,t=true,z=false;var w=l.PROTOCOL+"//global.fncstatic.com/static/v/all/img/vp-overlay${dim}${hover}.png";function y(E){return Math.floor(E);}function B(E){return E+"px";}function r(F){F=(C)?((F)?false:true):F;var E;if(t&&z){E=z;}E=(E)?("-"+E):"";return w.replace("${dim}",E).replace("${hover}",(F)?"-hover":"");}function A(){var Q=(o[1]<o[0])?o[1]:o[0],F=Q*v;F=(F>D)?D:F;var N=F,H=N,O=false,K=false,J=false,E=false,M=0.03,G=0.05;M=y(o[0]*M);G=y(o[1]*G);switch(p){case"top right":K=M;J=G;break;case"bottom right":K=M;E=G;break;case"top left":O=M;J=G;break;case"bottom left":O=M;E=G;break;default:O=Math.floor((o[0]*0.5)-(N*0.5));J=Math.floor((o[1]*0.5)-(H*0.5));}var L={};if(K){L.right=B(K);}if(O){L.left=B(O);}if(J){L.top=B(J);}if(E){L.bottom=B(E);}if(t&&m.useAbsImg(N)){N=m.useAbsImg(N);H=N;z=N;}L.width=B(N);L.minHeight=B(H);var I=d('<span class="vid-overlay"><img style="position:absolute; display:inline;" src="'+r()+'"/></span>'),P=u.parent().find("> h3:first");I.find("img").css(L);u.find("a").css({position:"relative"});u.find("img").each(function(){var S=d(this),R=S.parent(),V=false;R.css({display:"block",padding:"0"}).prepend(I);var U=R.find(".vid-overlay"),W=U.find("img");function T(X){if(X&&!V){V=true;W.attr("src",r(true));}else{if(V){V=false;W.attr("src",r());}}}P.hover(function(){T(true);},function(){T();});R.hover(function(){T(true);},function(){T();});});}var s=new Image();s.src=r(true);A();}};function g(){var m=false,n=navigator.userAgent;var o=function(p){return(n.toLowerCase().indexOf(p)>-1)?true:false;};if(o("silk/1.0")){m=false;}else{if(o("android")&&!o("silk")){m="legacy";}else{if(o("blackberry")){m=true;}else{if(o("iemobile")){m="legacy";}else{if("createTouch" in document){m=true;}}}}}return m;}function k(){var m=document.createElement("video");return(m.play)?true:false;}function e(m){m=m||false;return Object.prototype.toString.call(m)==="[object Array]";}function j(){var m={};if(navigator.userAgent.match(/iPhone/i)){m.mobile="ios";m.dev="iPhone";}else{if(navigator.userAgent.match(/iPod/i)){m.mobile="ios";m.dev="iPod";}else{if(navigator.userAgent.match(/iPad/i)){m.mobile="ios";m.dev="iPad";}else{if(navigator.userAgent.match(/Silk/i)){m.mobile="android";m.dev="Kindle";}else{m=false;}}}}return m;}function h(m){return(typeof m==="string"&&m.indexOf("%")===m.length-1)?true:false;}if(!window.console){window.console={log:function(){},error:function(){}};}function c(){var n=false;n=(!n&&(window.location.search.indexOf("stc=y")>-1))?true:n;if(!window.console){window.console={log:function(){},error:function(){}};}if(n&&window.console){try{return console.log.apply(console,arguments);}catch(m){console.log(arguments);}}}var b=c;(function(){var n=function(){var v,p,s=this,t=arguments;if(t.length===0){return false;}var r={attempt:0,timeout:500};if(t.length===1&&typeof t[0]==="object"){for(v in t[0]){r[v]=t[0][v];}if(!r.callback){return false;}else{p=r.callback;}if(!p.check||!p.success){return false;}else{r._check=p.check;r._success=p.success;}if(p.timedOut){r._timeout=p.timedOut;}}else{if(!isNaN(t[0])&&!isNaN(t[1])&&m(t[2])&&m(t[3])){r.attempt=t[0];r.timeout=t[1];r._check=t[2];r._success=t[3];if(t[4]){r._timeout=t[4];}if(t[5]){r._abort=t[5];}}else{if(m(t[0])&&m(t[1])){r._check=t[0];r._success=t[1];if(t[2]){r._timeout=t[2];}if(t[3]){r._abort=t[3];}}else{return false;}}}if(!m(r._check)||!m(r._success)){return false;}if(!m(r._timeout)){r._timeout=function(){};}if(isNaN(r.timeout)){return false;}else{r.timeout=o(r.timeout);}if(isNaN(r.attempt)){return false;}else{r.attempt=o(r.attempt);}var w=false,q=false;if(r.attempt&&r.timeout){var u=function(){if(q){clearTimeout(w);}else{if(r._check()){r._success();clearTimeout(w);}else{if(r.attempt>0){w=setTimeout(function(){u();},r.timeout);}else{r._timeout();}}}r.attempt--;};u();}else{w=setInterval(function(){if(q){clearInterval(w);}else{if(r._check()){r._success();clearInterval(w);}}},r.timeout);}return{abort:function(){q=true;}};};function o(p){return parseInt(p,10);}function m(p){return(typeof p==="function")?true:false;}if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:n});}else{if(!window.loadAttempt){window.loadAttempt=n;}}}());}(jQuery));(function(d){function e(){this.listenersArr=[];this.version="03.31.2010";}e.prototype={append:function(h){h=h||false;if(!h||!h.elm){return false;}var i=this,j=new g();j.init(h);this.listenersArr.push({fn:j,config:h});this.trigger(j);},trigger:function(i){i=i||false;var k=this;if(i){i.trigger();}else{var h;for(h=0;h<k.listenersArr.length;h++){var j=k.listenersArr[h].fn;k.helper.removeListener(j._elm,i.thisEventList);j.trigger();}}},reTriggerListener:function(){var h=this;d(document).ready(function(){var m=500,i=10000,k=0,l=d("iframe").size();function j(){if(l!==k){k=l;}else{m=Math.floor(m/3)+m;}if(m<i){h.trigger();setTimeout(function(){j();},m);}}j();});}};e.prototype.helper={removeListener:function(i,h){i.each(function(){var j,k=d(this);if(a(h)){for(j=0;j<h.length;j++){k.unbind(h[j]);}}else{k.unbind(h);}});}};function g(){this._elm=false;this._eventsCallback={};this._moveSensitivity=15;this.properties={scale:{},move:{origin:{},current:{},diff:{}}};this.thisEventList=["touchstart","touchend","touchmove","gesturestart","gestureend"];}g.prototype={init:function(h){var j;for(j in h){this["_"+j]=h[j];}this.testElm={coords:d("#coords"),start:d("#start"),diff:d("#diff")};this.logger=new b();this.logger.init();},trigger:function(){var h=this;this._elm.each(function(){h.setListeners(d(this));});},setListeners:function(i){i=i||false;if(!i){return false;}var h=this,k=i.get(0);i.bind("touchstart",function(l){var m=l.originalEvent;h._elm.data("EVENT_touchstart.trigger",true);h._elm.data("EVENT_touchmove.setOrigin",false);h._elm.data("EVENT_touchmove.directionalOnce",false);if(h._eventsCallback.touchstart){h._eventsCallback.touchstart(m);}});i.bind("touchend",function(l){var m=l.originalEvent;h._elm.data("EVENT_touchstart.trigger",false);h._elm.data("EVENT_touchmove.directionalOnce",false);if(h._eventsCallback.touchend){h._eventsCallback.touchend(m);}});i.bind("touchmove",function(n){var q=n.originalEvent,p=q.touches[0].pageX,o=q.touches[0].pageY;h.properties.move.current={x:p,y:o};if(!h._elm.data("EVENT_touchmove.setOrigin")){h.properties.move.origin.x=p;h.properties.move.origin.y=o;h._elm.data("EVENT_touchmove.setOrigin",true);}var l={x:h.properties.move.origin.x,y:h.properties.move.origin.y};h.properties.move.diff={x:p-l.x,y:o-l.y};if(h._eventsCallback.touchmoveRaw){h._eventsCallback.touchmoveRaw(h.properties.move,q);}function m(){var s=h._moveSensitivity,t=[];function r(){h._elm.data("EVENT_touchmove.directionalOnce",true);}if(p>=l.x+s){t.push("right");h.logger.log("going right");}else{if(p<=l.x-s){t.push("left");h.logger.log("going left");}}if(o<=l.y-s){t.push("up");h.logger.log("going up");}else{if(o>=l.y+s){t.push("down");h.logger.log("going down");}}if(h._eventsCallback.touchmoveMoveOnce){h._eventsCallback.touchmoveMoveOnce(t,h.properties.move,q);}if(t.length>0){r();}}if(!h._elm.data("EVENT_touchmove.directionalOnce")){m();}});i.bind("gesturestart",function(l){var m=l.originalEvent,n=h.helper.setScale(m.scale);h.properties.scale.current=h.properties.scale.current||n;if(h._eventsCallback.gesturestart){h._eventsCallback.gesturestart(m);}h.properties.scale.changed=false;});i.bind("gestureend",function(l){var m=l.originalEvent,n=h.helper.setScale(m.scale);if(h._eventsCallback.gestureend){h._eventsCallback.gestureend(m);}if(h.properties.scale.current!==n){h.properties.scale.current=n;h.properties.scale.changed=true;h.logger.log("Scale changed to: "+n);if(h._eventsCallback.scaleChange){h._eventsCallback.scaleChange(n,m);}}});var j=d(window);if(!j.data("EVENT_orientationchange")){j.bind("orientationchange",function(l){var m=l.originalEvent;h.logger.log("Orientation change: "+h.helper.orientation(window.orientation,m));});j.data("EVENT_orientationchange",true);}if(h._eventsCallback.orientationchange){j.bind("orientationchange",function(l){var m=l.originalEvent;h._eventsCallback.orientationchange(h.helper.orientation(window.orientation,m));});}}};g.prototype.helper={setScale:function(h){if(!isNaN(h)){return Math.round(h*100)/100;}},orientation:function(i){if(!isNaN(i)){var h=Math.abs(i);return(h===0||h===180)?"vertical":"horizontal";}}};function c(h){if(typeof window.console==="object"){console.log(h);}}function a(h){h=h||false;return Object.prototype.toString.call(h)==="[object Array]";}var b=function(){};b.prototype={init:function(){this.elm=d("#console ul:first");},log:function(h){if(this.getQuery("log")!=="y"){return false;}if(this.elm.size()>0){h="<li>"+h+"</li>";this.elm.append(h);}else{c(h);}},getQuery:function(l){var h,j=(window.location.search).substr(1),k=j.split("&");for(h=0;h<k.length;h++){var i=k[h].split("=");if(i[0]===l){return i[1];}}return false;}};var f=window.touchEventListener=new e();}(jQuery));window.ClientStorageManager=(function(f){var c={},k={_namespace:"ClientStorageManager",_prefix:"FoxCSM_",_cookiePrefix:"FXcsm",_cookiePersistence:30,_showConsole:false,_frameSrc:"/static/v/all/html/IEStore.html",_splitVars:"|#|"};var e=function(){this.dataObj=null;this.initialized=false;this.type=null;this.customType=false;this.control=new b(this);this.init();};e.prototype={init:function(){var l=this,m=a();l.setProperties();l.storageInstance=new h(l,{namespace:k._namespace,prefix:k._prefix,type:m});l.type=m;l.initialized=true;d("[init] Initialized: "+l.type);if(l.type.toLowerCase().indexOf("cookie")>-1){d("[init] Warning: cookie storage maxes out at 4kb only!");}},setProperties:function(){var m,p=(f.location.search).substr(1),q=p.split("&"),l=q.length,n={};for(m=0;m<l;m++){var o=q[m].split("=");n[o[0]]=decodeURIComponent(o[1]);}if(n.showConsole){k._showConsole=true;}},set:function(){var n,l=this,m=arguments,o;var p=function(t){switch(t.key){case"type":var s=t.value;switch(s){case"session":s=(f.sessionStorage)?"sessionStorage":"sessionCookie";break;case"cookie":s="cookie";break;case"sessionCookie":s="sessionCookie";break;default:d("[set] Getting default storage..");s=a();}if(s===l.type){d("[set] Type already: "+s);break;}if(l.type==="MSIEStorage"){l.MSIEStorageInstance=l.storageInstance;}var r={namespace:k._namespace,prefix:k._prefix,type:s,prevType:l.type};var q=(r.type==="MSIEStorage")?l.MSIEStorageInstance:new h(l,r);if(q.initialized){g();i(CS,{customType:true,storageInstance:q,type:r.type});l.control.root=CS;d("[set] Storage changed: "+r.prevType+" -> "+r.type);if(l.type.toLowerCase().indexOf("cookie")>-1){d("[set] Warning: cookie storage maxes out at 4kb only!");}}else{d("[set] Error setting type: "+s);}break;default:d("[set] Invalid property key: "+t.key);}};if(typeof m[0]==="object"){for(n in m[0]){p({key:n,value:m[0][n]});}}else{p({key:m[0],value:m[1]});}},saveItem:function(){var l=arguments,m=(l.length===1&&typeof l[0]==="object")?l[0]:{key:l[0],value:l[1]};this.control.saveItem(m);},deleteItem:function(l,m){var n={key:l};if(m){n.fn=m;}this.control.deleteItem(n);},getItem:function(m,n,l){this.control.getItem({key:m,fn:n,raw:l||false});},getAll:function(l){this.control.getAllItems(l);},clearAll:function(l){this.control.clearAll(l);}};var b=(function(){var m=function(n){this.root=n;};m.prototype={saveItem:function(p){var o=this,n=this.root;if(p.key&&p.value){var q=l.formatValue(p.value);if(q&&q.length>0){n.storageInstance.save({key:o.setPrefix(p.key),value:q,expire:(p.expire)?p.expire:0});if(typeof p.success!=="undefined"){o.attempts=0;o.checkData(p);}}}else{if(p.error){p.error("No Key or Value entered");}}},deleteItem:function(q){var o=this,n=this.root,p=this.setPrefix(q.key);var r=function(){n.storageInstance.deleteItem(p);d("[control] Storage Event: Delete");};if(q.fn){q.fn(r());}else{r();}},getItem:function(n){n.key=this.setPrefix(n.key);this.root.storageInstance.load(n);},getAllItems:function(n){this.root.storageInstance.getAll(n);},clearAll:function(p){var o=this,n=this.root;n.storageInstance.clearAll();d("[control] Storage Event: Clear All");if(typeof p==="function"){p();}},checkData:function(p){var o=this,n=this.root;o.getItem({key:p.key,raw:false,fn:function(r){if(r!==null){p.success({key:p.key,value:r,type:n.storageInstance.type});d("[control] Storage Event: Save");}else{var q="[control] Error saving key: "+p.key;p.success=false;p.error(q);d(q);return null;}}});},setPrefix:function(n){var o="MSIEStorage|cookie|sessionCookie";return(o.indexOf(this.root.type)>-1)?n:l.addPrefix(k._prefix,n);}};var l={addPrefix:function(o,n){return o+this.trim(n);},removePrefix:function(o,n){return n.substr(o.length);},formatValue:function(n){return this.trim(n.toString());},trim:function(n){return n.replace(/^\s+|\s+$/g,"");}};return m;}());var h=(function(){var l=function(r,s){this.root=r;this.sessionStorage=new q(this);this.localStorage=new n(this);this.globalStorage=new o(this);this.MSIEStorage=new m(this);this.cookieStorage=new p(this);return(this.init(s));};l.prototype={init:function(s){var r=this,t;r.initialzed=true;switch(s.type){case"MSIEStorage":i(s,{div:{id:"IEStorageSource",store:"xmldomstore"},frame:{src:k._frameSrc,id:"IEStorageSource",name:"DOMPersistentSource",store:"xmldomstore"}});t="MSIEStorage";break;case"cookie":i(s,{cookieName:k._cookiePrefix,sessionCookie:false});t="cookieStorage";break;case"sessionCookie":i(s,{cookieName:k._cookiePrefix+"s",sessionCookie:true});t="cookieStorage";break;default:t=s.type;}r[t].init(s);return r[t];}};var q=function(r){this.root=r.root;this.main=r;};q.prototype={init:function(r){var s;for(s in r){this[s]=r[s];}this.initialized=true;},save:function(s){try{f.sessionStorage.setItem(s.key,s.value);}catch(r){d("[sessionStorage save] Error Saving: "+r);}},load:function(){var r=arguments;function s(t){return f.sessionStorage.getItem(t);}if(r.length===1&&typeof r[0]==="object"){r[0].fn(s(r[0].key));}else{return s(r[0]);}},deleteItem:function(r){f.sessionStorage.removeItem(r);},getAll:function(v){var s,t={},w=0,y=f.sessionStorage,r=y.length;for(s=0;s<r;s++){var u=y.key(s);if(u.indexOf(this.prefix)===0){t[u.substr(this.prefix.length)]=this.load(u);w++;}}v((w>0)?t:null);},clearAll:function(){var s,u,w=[],y=f.sessionStorage,r=y.length;for(s=0;s<r;s++){var v=y.key(s);if(v.indexOf(this.prefix)===0){w.push(y.key(s));}}var t=w.length;for(u=0;u<t;u++){this.deleteItem(w[u]);}return true;}};var n=function(r){this.root=r.root;this.main=r;};n.prototype={init:function(r){var s;for(s in r){this[s]=r[s];}this.expire=new j();this.initialized=true;this.removeExpired();},save:function(t){var r="";if(t.expire){r=(this.expire.setToExpire(t.expire))?this.expire.set(t.expire):"";}try{f.localStorage.setItem(t.key,t.value.toString()+r);}catch(s){d("[localStorage save] Error Saving: "+s);}},load:function(){var r=this,s=arguments;function t(v,u){var w=f.localStorage.getItem(v);if(w){if(r.expire.isStale(w)){r.deleteItem(v);}else{return(!u)?r.expire.removeExpireStr(w):w;}}return null;}if(s.length===1&&typeof s[0]==="object"){s[0].fn(t(s[0].key,s[0].raw||false));}else{return t(s[0],s[1]||false);}},deleteItem:function(r){f.localStorage.removeItem(r);},getAll:function(v){var s,t={},w=0,y=f.localStorage,r=y.length;for(s=0;s<r;s++){var u=y.key(s);if(u.indexOf(this.prefix)===0){t[u.substr(this.prefix.length)]=this.load(u);w++;}}v((w>0)?t:null);},clearAll:function(){var s,u,w=[],y=f.localStorage,r=y.length;for(s=0;s<r;s++){var v=y.key(s);if(v.indexOf(this.prefix)===0){w.push(y.key(s));}}var t=w.length;for(u=0;u<t;u++){this.deleteItem(w[u]);}return true;},removeExpired:function(){var s,u,v=[],w=f.localStorage,r=w.length;for(s=0;s<r;s++){v.push(w.key(s));}var t=v.length;for(u=0;u<t;u++){if(v[u].indexOf(this.prefix)===0&&this.expire.isStale(w[v[u]])){this.deleteItem(v[u]);}}}};var o=function(r){this.root=r.root;this.main=r;};o.prototype={init:function(r){var s;for(s in r){this[s]=r[s];}this.expire=new j();this.initialized=true;this.removeExpired();},save:function(t){var r="";if(t.expire){r=(this.expire.setToExpire(t.expire))?this.expire.set(t.expire):"";}try{f.globalStorage[document.domain][t.key]=t.value.toString()+r;}catch(s){d("[globalStorage save] Error Saving: "+s);}},load:function(){var r=this,s=arguments;function t(v,u){if(typeof f.globalStorage[document.domain][v]==="undefined"){return null;}var w=f.globalStorage[document.domain][v].value;if(r.expire.isStale(w)){r.deleteItem(v);}else{return(!u)?r.expire.removeExpireStr(w):w;}return null;}if(s.length===1&&typeof s[0]==="object"){s[0].fn(t(s[0].key,s[0].raw||false));}else{return t(s[0],s[1]||false);}},deleteItem:function(r){delete f.globalStorage[document.domain][r];},getAll:function(v){var s,t={},w=0,y=f.globalStorage[document.domain],r=y.length;for(s=0;s<r;s++){var u=y.key(s);if(u.indexOf(this.prefix)===0){t[u.substr(this.prefix.length)]=this.load(u);w++;}}return v((w>0)?t:null);},clearAll:function(){var s,u,w=[],y=f.globalStorage[document.domain],r=y.length;for(s=0;s<r;s++){var v=y.key(s);if(v.indexOf(this.prefix)===0){w.push(y.key(s));}}var t=w.length;for(u=0;u<t;u++){this.deleteItem(w[u]);}return true;},removeExpired:function(){var r;for(r in globalStorage[document.domain]){if(r.indexOf(this.prefix)===0&&this.expire.isStale(globalStorage[document.domain][r].value)){this.deleteItem(r);}}}};var m=function(r){this.root=r.root;this.main=r;};m.prototype={init:function(r){var s;for(s in r){this[s]=r[s];}this.expire=new j();this.initialized=false;this.isDocReady=false;var t=document.createElement("iframe");t.setAttribute("src",this.frame.src+"?n="+r.namespace+"&s="+this.frame.store);t.setAttribute("id",this.frame.id);t.setAttribute("name",this.frame.name);t.setAttribute("width","5");t.setAttribute("height","5");t.setAttribute("style","visibility:hidden;position:absolute;top:0px;left:-9999px;");this.iframe=t;this.setFrame();},save:function(t){if(!this.initialized){return false;}if(!this.dataObj){this.dataObj={};}var r="";if(typeof t.expire!=="undefined"){r=(this.expire.setToExpire(t.expire))?this.expire.set(t.expire):"";}this.dataObj[t.key]=t.value.toString()+r;try{this.dataStorage.reloadIEStorage();return true;}catch(s){d("[IEStorage save] Error Saving: "+s);return false;}},load:function(){var r=this,s=arguments;function w(z,y){if(!r.initialized){return null;}var B=r.dataObj;if(B[z]){var A=B[z];if(r.expire.isStale(A)){r.deleteItem(z);}else{return(!y)?r.expire.removeExpireStr(A):A;}}return null;}if(s.length===1&&typeof s[0]==="object"){var u=0,v=s[0];var t=function(){if(r.initialized){clearTimeout(c.IELoad);if(r.dataObj){var y=v.raw||false;v.fn(w(v.key,y));}else{v.fn(null);}}else{c.IELoad=setTimeout(function(){t();},50);}};t();}else{return w(s[0],s[1]||false);}},deleteItem:function(r){if(this.initialized){delete this.dataObj[r];this.dataStorage.reloadIEStorage();}},getAll:function(t){var r=this,u=0;function s(){if(r.initialized){clearTimeout(c.IEGetAll);if(typeof r.dataObj!=="undefined"){var v,z={},w=0;for(v in r.dataObj){var y=r.load(v);if(y){z[v]=y;w++;}}return t((w>0)?z:null);}return t(null);}else{if(u>=2){clearTimeout(c.IEGetAll);return t(null);}else{u++;c.IEGetAll=setTimeout(function(){s();},50);}}}s();},clearAll:function(){if(this.initialized){delete this.dataObj;this.dataStorage.reloadIEStorage();}},removeExpired:function(){if(this.initialized){var r,s=this.dataObj;for(r in s){if(this.expire.isStale(s[r])){delete s[r];}}this.dataObj=s;this.dataStorage.reloadIEStorage();}},loadClientData:function(r){this.dataObj=this.processStrToObj(r);},processStrToObj:function(v){var s,w={},u=v.split(k._splitVars),r=u.length;for(s=0;s<r;s++){var t=u[s].split("=");w[t[0]]=decodeURIComponent(t[1]);}return w;},processObjToStr:function(t){var r,s=[];if(t){for(r in t){s.push(r+"="+encodeURIComponent(t[r]));}}return(s.length>0)?s.join(k._splitVars):"";},setFrame:function(){var r=this;document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);s();}});if(document.documentElement.doScroll&&f===f.top){(function(){if(r.isDocReady){return;}try{document.documentElement.doScroll("left");}catch(t){setTimeout(arguments.callee,50);return;}s();}());}function s(){if(!document.getElementById(r.frameId)){document.documentElement.appendChild(thisObj.iframe);}thisObj.isDocReady=true;thisObj.removeExpired();}}};var p=function(r){this.root=r.root;this.main=r;};p.prototype={init:function(r){var s;for(s in r){this[s]=r[s];}this.expire=new j();this.initialized=true;this.removeExpired();},save:function(s){var w=this.getStorageCookie(),u,r="";if(s.expire&&!this.sessionCookie){if(this.expire.setToExpire(s.expire)){r=this.expire.set(s.expire,"cookieValue");}}var t=encodeURIComponent(s.value.toString())+r;if(w){var v=this.processStrToObj(w);v[s.key]=t;u=this.processObjToStr(v);}else{u=s.key+"="+t;}if(u){this.saveCookie(u);return true;}},saveCookie:function(u){var r=(!this.sessionCookie)?("; expires="+this.expire.set(k._cookiePersistence,"cookie")):"",s=this.cookieName+"="+k._splitVars+u+r+"; path=/";try{document.cookie=s;}catch(t){d("[Cookie save] Error Saving: "+t);}},load:function(){var r=this,s=arguments;function t(w,v){var u=r.getStorageCookie();if(u){var z=r.processStrToObj(u);if(z[w]){var y=z[w];if(r.expire.isStale(y)){r.deleteItem(w);}return(!v)?r.expire.removeExpireStr(y):y;}}return null;}if(s.length===1&&typeof s[0]==="object"){s[0].fn(t(s[0].key,s[0].raw||false));}else{return t(s[0],s[1]||false);}},deleteItem:function(s){var r=this.getStorageCookie();if(r){var t=this.processStrToObj(r);if(t[s]){delete t[s];}this.saveCookie(this.processObjToStr(t));}},getAll:function(t){var r=this.getStorageCookie(),v={},u=0;if(r){var s,w=this.processStrToObj(r);for(s in w){if(w[s]){if(this.expire.isStale(w[s])){delete w[s];}else{v[s]=w[s];u++;}}}return t((u>0)?v:null);}return t(null);},clearAll:function(){this.saveCookie("");},removeExpired:function(){var r=this.getStorageCookie();if(r){var s,t=this.processStrToObj(r);for(s in t){if(t[s]){if(this.expire.isStale(t[s])){delete t[s];}}}this.saveCookie(this.processObjToStr(t));}},getStorageCookie:function(){var s,v,u=document.cookie.split(";"),r=u.length;for(s=0;s<r;s++){var t=u[s].replace(/^\s+|\s+$/g,"");if(t.substring(0,this.cookieName.length+1)===this.cookieName+"="){return decodeURIComponent(t.substring(this.cookieName.length+1));}}return null;},processStrToObj:function(v){var s,w={},u=v.split(k._splitVars),r=u.length;for(s=0;s<r;s++){var t=u[s].split("=");if(t[1]){w[t[0]]=t[1];}}return w;},processObjToStr:function(t){var r,s=[];for(r in t){if(r.length>0){s.push(r+"="+t[r]);}}return s.join(k._splitVars);}};return l;}());var a=function(){if(f.localStorage){return"localStorage";}else{if(f.globalStorage){return"globalStorage";}else{return"cookie";}}};var i=function(n,l){var m;for(m in l){n[m]=l[m];}return n;};var g=function(){var l;for(l in c){clearTimeout(c[l]);}};var d=function(l){if(typeof f.console==="object"&&k._showConsole){console.log(l);}};var j=function(){this.defaultExpire=14;this.expireStr="<!#[${value}]>";this.expireRegex=/\<!#\[(.+)\]>/;};j.prototype={now:function(){return(new Date());},set:function(l,m){l=l||this.defaultExpire;m=m||null;addTime=(l*24*3600000);var n=new Date(this.now().getTime()+addTime);switch(m){case"cookie":l=n.toUTCString();break;default:l=this.expireToStr(this.simpleDateStr(n));}return l;},simpleDateStr:function(l){var n=(l.getUTCMonth()+1)+"/"+l.getUTCDate()+"/"+l.getUTCFullYear(),m=l.getHours()+":"+l.getMinutes();return n+" "+m;},setToExpire:function(l){l=l||0;if(typeof l==="number"&&l>0){return true;}return false;},getExpire:function(n,m){var l=n.match(this.expireRegex);if(l){return(m)?l[0]:l[1];}return false;},isStale:function(m){var l=this.getExpire(m);if(l){return(this.hasExpired(l))?true:false;}return false;},hasExpired:function(m){var l=this.convert(m);return(this.now()>l)?true:false;},convert:function(m){var l=new Date(m);if(typeof m==="string"&&l.toString()==="Invalid Date"){l=new Date(parseInt(m,10));}return(l);},expireToStr:function(l){return this.expireStr.replace("${value}",l);},removeExpireStr:function(l){return l.replace(this.expireRegex,"");}};return(new e());}(window));(function(b){window.FoxISATracker=function(){this.dataObj={trigger:{pageLoad:false}};this.initialized=false;};FoxISATracker.prototype={init:function(c){if(!c){return false;}if(this.initialized){a("[ISA Tracker] Already Initialized");return false;}this.initialized=true;this.control.root=this;this.set(c);},set:function(e){if(!e){return false;}if(!this.initialized){this.init(e);}var d;for(d in e){var f,c=e[d];for(f in c){if(!this.dataObj.trigger[f]){this.dataObj.trigger[f]={};}this.dataObj.trigger[f][d]=c[f];}}},track:function(f,g){this.control.count(f);var c=this.dataObj.trigger;if(!c[f]){a("[ISA Tracker] No event specified for: "+f);return false;}var d,e=c[f];for(d in e){this.control.execTrigger({event:f,trigger:e[d],data:g,count:e._count});}}};FoxISATracker.prototype.control={count:function(f){f=f||false;if(!f){return false;}var c=this.root,d=c.dataObj.trigger;if(!d[f]){return false;}var e=((!isNaN(d[f]._count))?d[f]._count:0)+1;c.dataObj.trigger[f]._count=e;},execTrigger:function(f){if(typeof f!=="object"){return false;}if(!f.trigger){return false;}var c=f.event||false,d=f.trigger.frequency||false,j=f.trigger.callback||false,g=f.data||false,e=f.trigger||false,h=f.count||false;if(!c||isNaN(d)||!e){return false;}var k=this,i=this.root;if(typeof j==="function"){if(c==="pageLoad"&&h===1){j(g);}else{if(c.indexOf("click")===0){j(g);}else{if(h>1&&h%d===0){j(g);}}}}}};function a(d){try{FOX.utils.debug(d);}catch(c){if(typeof window.console==="object"&&window.location.search.indexOf("stc=y")){console.log(d);}}}}(jQuery));window.LocationLookup=(function(){var a={map:[{z:99500,s:"AK"},{z:98000,s:"WA"},{z:97000,s:"OR"},{z:96900,s:"XX"},{z:96700,s:"HI"},{z:96200,s:"AP"},{z:90000,s:"CA"},{z:89000,s:"NV"},{z:88500,s:"TX"},{z:87000,s:"NM"},{z:85000,s:"AZ"},{z:84000,s:"UT"},{z:83200,s:"ID"},{z:82000,s:"WY"},{z:80000,s:"CO"},{z:75000,s:"TX"},{z:73000,s:"OK"},{z:71600,s:"AR"},{z:70000,s:"LA"},{z:68000,s:"NE"},{z:66000,s:"KS"},{z:63000,s:"MO"},{z:60000,s:"IL"},{z:59000,s:"MT"},{z:58000,s:"ND"},{z:57000,s:"SD"},{z:56900,s:"DC"},{z:55000,s:"MN"},{z:53000,s:"WI"},{z:50000,s:"IA"},{z:48000,s:"MI"},{z:46000,s:"IN"},{z:43000,s:"OH"},{z:40000,s:"KY"},{z:38600,s:"MS"},{z:37000,s:"TN"},{z:35000,s:"AL"},{z:34000,s:"AA"},{z:32000,s:"FL"},{z:30000,s:"GA"},{z:29000,s:"SC"},{z:27000,s:"NC"},{z:24700,s:"WV"},{z:22000,s:"VA"},{z:20600,s:"MD"},{z:20000,s:"DC"},{z:19700,s:"DE"},{z:15000,s:"PA"},{z:10000,s:"NY"},{z:7000,s:"NJ"},{z:6000,s:"CT"},{z:5000,s:"VT"},{z:3900,s:"ME"},{z:3000,s:"NH"},{z:2800,s:"RI"},{z:1000,s:"MA"},{z:600,s:"PR"},{z:500,s:"NY"}],mapOneOff:{AK:98791,NY:6390,TN:42223,AM:96799},region:{Mountain:"AZ,CO,ID,MT,NM,NV,UT,WY",Northeast:"CT,DE,DC,MA,ME,MD,NJ,NH,NY,VT,PA,RI",West:"CA,AK,HI,OR,WA",Midwest:"IA,IL,IN,KS,MI,MN,ND,NE,OH,WI,SD,KY",South:"MO,AL,AR,LA,KT,MS,TN,TX,OK",Southeast:"VA,NC,SC,GA,FL,WV"},dma:{feed:"/feeds/json/zip-dma/Get_AFFDMA/${zip}/all",cb:"Get_AFFDMA"}};var c=function(f){if(typeof f==="object"&&f.region){a.region=f.region;}};c.prototype={getByZip:function(g){var f=g;g=(/(^\d{5}$)/.test(g))?parseInt(g,10):false;if(!g){return false;}var h=b(g),i=e(h);return({zip:f,state:h,region:i});},getByState:function(g){if(typeof g!=="string"){return false;}g=g.toUpperCase();var f,h=false;for(f in a.region){if(a.region[f].indexOf(g)>-1){h=e(g);break;}}return(h)?({state:g,region:h}):false;},getByDMA:function(h,g){if(typeof g!=="function"){return false;}var f=h;h=(/(^\d{5}$)/.test(h))?h:false;if(!h){return false;}d(h,function(i){if(!i){g(false);}g((i.dma&&i.region&&i.city)?({zip:f,state:i.region,region:i.city,dma:i.dma}):false);});}};var b=function(h){var g,k=a.map,f=a.mapOneOff;for(g in f){if(h===f[g]){return g;}}for(g=0;g<k.length;g++){var j=k[g];if(h>=j.z){return j.s;}}return false;};var e=function(g){var f,h=a.region;for(f in h){if(h[f].indexOf(g)>-1){return f;}}return false;};var d=function(h,g){window[a.dma.cb]=g;var f=a.dma.feed;f=f.replace("${zip}",h);$.ajax({url:f,dataType:"script",async:true,cache:true});};return c;}());window.FOX_DependencyManager=(function(g){var b={prefix:"___"};var e=function(){this._TYPES=[];};e.prototype.addInstance=function(i,j){if(typeof i!=="string"&&i.length<1){return false;}var h=this;if(!h[a(i)]){h._TYPES.push(i);h[a(i)]=new c(i,this);if(g.isArray(j)){h.setDependency(i,j);}}else{d("[DependencyManager.addDependency] '"+i+"' already exists.");}};e.prototype.onReady=function(i,j){if(typeof i!=="string"||typeof j!=="function"){return false;}var h=this;g.loadAttempt(60,500,function(){return(h[a(i)])?true:false;},function(){h[a(i)].onReady(function(k){j(k);});},function(){d("[DependencyManager.onReady] Max attempts to check for the instance of '"+i+"' reached.");});};e.prototype.setDependency=function(i,j){if(typeof i!=="string"||!g.isArray(j)){return false;}var h=this,i=a(i);if(!h[i]){return false;}h[i].setDependency(j);};e.prototype.fireReady=function(i,j){if(typeof i!=="string"){return false;}var h=this,i=a(i);if(h[i]){h[i].EVENT.fireReady(j);}};var c=(function(){var h=function(k,j){this.root=j;this._TYPE=k;this._DEPENDENCY=false;this._IS_READY=false;this._pooler={};this.EVENT=new f(this);};h.prototype.setDependency=function(k){var j=this;if(j._DEPENDENCY){return false;}if(g.isArray(k)&&i(k)){j._DEPENDENCY=k;j.isReady();d("[DependencyManager."+j._TYPE+".setDependency] Dependency set.");}else{d("[DependencyManager."+j._TYPE+".setDependency] Invalid setting.");}};h.prototype.isReady=function(){var m=this,l=this.root;if(!m._DEPENDENCY){return false;}if(m._IS_READY&&!m._pooler.isReady){return m._IS_READY;}m._pooler.isReady=true;var k=function(){var q,r=m._DEPENDENCY,t=true;for(q=0;q<r.length;q++){var s=a(r[q]);if(l[s]&&!l[s].EVENT.inquire()){t=false;break;}}return t;};var o=false,n=0,j=360;var p=function(){n++;if(!o){o=k();}if(!o){if(n>j){d("[DependencyManager."+m._TYPE+".isReady] Max attempts reached to check ready state.");}else{setTimeout(function(){p();},500);}}else{m._IS_READY=true;m._pooler.isReady=false;}};p();};h.prototype.onReady=function(k){if(typeof k!=="function"){return false;}var j=this;g.loadAttempt(360,500,function(){return(j._IS_READY)?true:false;},function(){k(j._READY_DATA);});};var i=function(j){return true;};return h;}());var f=(function(){var h=function(i){this.root=i.root;this.main=i;this._IS_READY=false;this._READY_DATA=null;};h.prototype.fireReady=function(j){var i=this;if(!i._IS_READY){i._IS_READY=true;if(j){i._READY_DATA=j;}}};h.prototype.inquire=function(){var i=this;return i._IS_READY;};return h;}());var d=function(h){if(window.console&&window.console.log){console.log(h);}};var a=function(h){return(b.prefix+h);};return e;}(jQuery));window.MultiFeedParser=(function(i){var o={logName:"[Feed Parser]",jsonpParam:"callback",minRefreshRate:0.5};var g=function(t){t=t||{};var s=this;s.__vars={};var r=s.__vars;r._config=t;r._fn={};r._data={};r._xhr={};r._callStack={};r._initExe={};r._refreshObj={};s.event=new m(s);r._fn.log=(r._config.logging)?h:function(){};var w=(typeof r._config.initOnLoad==="boolean"&&!r._config.initOnLoad)?false:true;var u,q=(r._config&&r._config.feeds)?r._config.feeds:false;if(w&&q){for(u in q){p(r,u);if(q[u].refresh){b(s,u,q[u]);}}}};var m=(function(){var q=function(r){this.__vars={};var s=this.__vars;s.root=r;};q.prototype.reload=function(w){var s,z,t=false,B=this,y=B.__vars.root,A=y.__vars,C=(A._config&&A._config.feeds)?A._config.feeds:false,u=[];if(!C){return false;}var r=function(v){if(!A._refreshObj[v]){b(y,v,C[v]);}};if(typeof w==="string"){w=(a(w)).replace(/\s+/g," ");u=w.split(" ");}if(u.length>0){for(z=0;z<u.length;z++){if(C[u[z]]){A._fn.log(o.logName+" Reloading {type}: '"+u[z]+"'");p(A,u[z]);r(u[z]);t=true;}}}else{A._fn.log(o.logName+" Reloading all feed {type}");for(s in C){p(A,s);r(s);}t=true;}};q.prototype.addFeed=function(){var w=this,t=w.__vars.root,u=t.__vars,r=(u._config&&u._config.feeds)?u._config.feeds:{},z=arguments;var y={type:false,url:false};if(typeof z[0]==="string"&&typeof z[1]==="string"){y.type=z[0];y.url=z[1];}else{if(typeof z[0]==="object"&&z[0].type&&z[0].url){y=z[0];}}if(!y.type||!y.url){u._fn.log(o.logName+" Cannot fire event.addFeed(). Missing config {type} or {url}.");return false;}else{if(r[y.type]){u._fn.log(o.logName+" Cannot fire event.addFeed() for {type}: '"+y.type+"'. This type already exists.");return false;}}var A,s={};for(A in y){if(A!=="type"){s[A]=y[A];}}t.__vars._config.feeds[y.type]=s;p(u,y.type);if(y.refresh){b(t,y.type,s);}};q.prototype.removeFeed=function(w){var u=this,s=u.__vars.root,t=s.__vars,A=(s.__vars._config&&s.__vars._config.feeds)?true:false;if(!A||typeof w!=="string"){return false;}var z=function(B){if(!s.__vars._config.feeds[B]){return false;}s.__vars._config.feeds[B]=null;s.__vars._initExe[B]=null;s.__vars._callStack[B]=null;s.__vars._refreshObj[B]=null;try{delete s.__vars._config.feeds[B];delete s.__vars._initExe[B];delete s.__vars._callStack[B];delete s.__vars._refreshObj[B];}catch(v){}t._fn.log(o.logName+" Notice: Feed removed for {type}: '"+B+"'");};w=(a(w)).replace(/\s+/g," ");var r=[],y=w.split(" ");};q.prototype.onLoad=function(){var u=this,s=u.__vars.root,t=s.__vars,r=(t._config&&t._config.feeds)?t._config.feeds:{},w=c(arguments);if(!w.type||!w.callback||!r[w.type]){return false;}var y=w.type,z=w.callback;if(!t._callStack[y]){t._callStack[y]=[];}t._callStack[y].push(z);if(t._initExe[y]){z(t._data[y]);}};q.prototype.getData=function(){var C=this,y=C.__vars.root,A=y.__vars,D=(A._config&&A._config.feeds)?A._config.feeds:{},t=c(arguments);if(!t.type||!t.callback){return false;}var u=t.type,B=t.callback;var z=0,w=20,r;var s=function(){if(typeof A._data[u]!=="undefined"){B(A._data[u]);}else{if(z<=w){clearTimeout(r);r=setTimeout(function(){s();},250);z++;}}};s();};return q;}());var b=function(q,s,t){var r=(!isNaN(t.refresh)&&parseFloat(t.refresh)>=o.minRefreshRate)?(t.refresh).toFixed(2):false;if(!r){h(o.logName+" Warning: Cannot set refresh for {type}: '"+s+"' refresh rate less than minimum rate allowed.");return false;}r=r*60000;clearInterval(q.__vars._refreshObj[s]);q.__vars._refreshObj[s]=setInterval(function(){if(q.event&&typeof q.event.reload==="function"){q.event.reload(s);}else{h(o.logName+" Warning: Cannot find event.reload(). Reload for {type}: '"+s+"' not fired.");}},r);};var p=function(t,v){var B=t._config.feeds,r=B[v]||false;if(!r){return false;}var q=(function(){var C=false;if(typeof r==="string"){C=r;}else{if(r.url){C=r.url;}}return C;}());if(!q){h(o.logName+" URL not defined for feed {type}: '"+v+"'");return false;}var y=(function(){var C="json",D=e(q);if(typeof r.jsonpCallback==="string"||D){C="jsonp";}else{if(r.type&&f(r.type)){C=r.type;}}C=C.toLowerCase();return C;}());var z={};switch(y){case"json":z={dataType:"json",cache:true,async:true,success:function(C){w(C);}};break;case"jsonp":var u=e(q),A=l(v,((typeof r.jsonpCallback==="string")?r.jsonpCallback:false),u);window[A.name]=function(C){w(C);};z={dataType:"script",async:true,cache:true};if(!u){z.data={};z.data[A.param]=A.name;}break;case"xml":break;case"script":break;case"text":break;}z.url=q;(function(){var C=(t._config.cacheTime&&!isNaN(t._config.cacheTime))?parseFloat(t._config.cacheTime):false;if(C){if(!z.data){z.data={};}z.data.cb=d(C);}}());if(y!=="jsonp"&&t._xhr[v]){try{if(typeof t._xhr[v].abort==="function"){t._xhr[v].abort();}}catch(s){}}t._xhr[v]=i.ajax(z);function w(D){var C=n(r.normalize,B),E=(C)?C(D):D;t._data[v]=E;if(!t._initExe[v]){t._initExe[v]=true;}j(t._callStack[v],t._data[v]);}};var j=function(r,s){if(!k(r)){return false;}for(var q=0;q<r.length;q++){if(typeof r[q]==="function"){r[q](s);}}};var c=function(r){var s=false,q=false;if(typeof r[0]==="string"){s=r[0];}else{if(typeof r[0]==="object"&&!k(r[0])){s=(r[0].type)?r[0].type:false;}}if(typeof r[1]==="function"){q=r[1];}var t={type:s,callback:q};return t;};var n=function(t,q){var s,r=false;if(typeof t==="function"){r=t;}else{if(typeof t==="string"){for(s in q){if(t===s&&typeof q[s].normalize==="function"){r=q[s].normalize;break;}}}}return r;};var l=function(s,t,r){var q={param:"callback"};if(t&&t.split("=").length===2){var u=t.split("=");q.param=u[0];q.name=u[1];}else{if(t){q.name=t;}else{if(r){q.name=r;}else{q.name="jsonp"+s;}}}return q;};var f=function(t){var q,r=false,s=["jsonp","json","xml","html","text","script"];for(q=0;q<s.length;q++){if(s[q]===t.toLowerCase()){r=true;break;}}};var e=function(t){var r,s=false,v=t.split("?"),u=v[1];if(u){var q=((u.toLowerCase()).indexOf(o.jsonpParam+"=")>-1)?u.split("&"):[];for(r=0;r<q.length;r++){var w=q[r].split("=");if(w[0].toLowerCase()===o.jsonpParam){s=decodeURI(w[1]);break;}}}return s;};var h=function(){var r=true;if(r&&window.console){try{return console.log.apply(console,arguments);}catch(q){console.log(arguments);}}};var d=function(t){t=t||false;var q=new Date(),u=q.getFullYear().toString()+(q.getMonth()+1).toString()+q.getDate().toString(),s=q.getHours()+1,r=q.getMinutes();u+=s.toString()+((t&&!isNaN(t))?(Math.floor(r/parseFloat(t))).toString():"");return u;};var k=function(q){q=q||false;return Object.prototype.toString.call(q)==="[object Array]";};var a=function(q){q=(q||"").replace(/^\s+|\s+$/g,"");return q;};return g;}(jQuery));var CallStackTrigger=(function(){var b=function(){this.__vars={};var c=this.__vars;c._stack={};c._trigger=false;c._data=null;};b.prototype.trigger=function(e,f){var d=this,c=d.__vars;c._trigger=e;c._data=(typeof f!=="undefined")?f:null;if(c._stack[e]){a(d,e);}};b.prototype.bind=function(f,g){var e=this,d=e.__vars,c=d._stack;if(typeof g!=="function"){return false;}if(!c[f]){c[f]=[];}c[f].push(g);if(f===d._trigger){if(d._data===null){g();}else{g(d._data);}}};var a=function(f,g){var e=f.__vars,d=e._stack,h=e._data;if(d[g]){var c=d[g];for(x=0;x<c.length;x++){if(typeof c[x]==="function"){c[x](h);}}}};return b;}());window.FOX_MediaIconOverlay=(function($){var CONST={classType:{"video-ct":{type:"video",image:"/static/v/all/img/vd-overlay_${dim}.png"},"slideshow-ct":{type:"slideshow",image:"/static/v/all/img/ss-overlay_${dim}.png"},"interactive-ct":{type:"interactive",image:"/static/v/all/img/ia-overlay_${dim}.png"},"freeform-ct":{type:"interactive",image:"/static/v/all/img/ia-overlay_${dim}.png"},"magnify-ct":{type:"magnify",image:"/static/v/all/img/mg-overlay_${dim}.png"},"listpage-ct":{type:"listpage",image:"/static/v/all/img/lp-overlay_${dim}.png"}}};var App=function(){};App.prototype.set=function(obj){var self=this;if(!obj){return false;}obj.type=(function(type){var ret=false;ret=self.getMediaType(obj.elm);return(ret)?ret:type;}(obj.type||false));if(!obj.type){return false;}obj.elm.find("span.type").hide();obj.container=obj.elm;obj.elm=obj.elm.find(".m");var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var isVideoAlt=function(elm){return(elm.hasClass("m-controller"))?true:false;};obj.elm.each(function(){var item=$(this),imgElm=item.find("img"),pObj=obj,img=new Image();pObj.elm=item;if(!isVideoAlt(item)){var trigger=function(){img.onload=function(){pObj.dim=[img.width,img.height];setOverlay(pObj);};img.src=imgElm.attr("src");};if(pObj.dim){setOverlay(pObj);}else{if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){trigger();clearInterval(interval);}},650);}else{trigger();}}}});};App.prototype.getMediaType=function(elm){var i,ret=false,type=CONST.classType;for(i in type){if(elm.hasClass(i)){ret=type[i].type;break;}}return ret;};var setAbsImg=function(dim,check){var x,map=["118","96","64","48","32","24","16"],ret=false;if(!isNaN(dim)){if(dim>=map[0]){ret=map[0];}if(dim<=20){ret=map[map.length-1];}else{for(x=0;x<map.length;x++){var val=map[x],nVal=(map[x+1])?map[x+1]:0,diffH=Math.abs(val-dim),diffL=Math.abs(val-nVal);if(dim<=val&&dim>nVal){ret=(diffH>diffL)?nVal:val;break;}}}}return(ret)?ret:false;};var setOverlay=function(obj){var elm=obj.elm,path="",ratio=obj.ratio||0.35,dim=obj.dim,position=obj.position||"center",edge=obj.edge||[0.03,0.05],size=obj.size||118,useAltImg=obj.useAltImg,altHover=obj.altHover||false,noClick=obj.noClick||false,useLink=obj.useLink||false,useAbsImg=true,absDim=false,type=obj.type||"video",hoverElm=obj.hoverElm||false;for(var i in CONST.classType){if(CONST.classType[i].type===type){path=CONST.classType[i].image;break;}}elm.find(".media-overlay").remove();var resizeVal=(dim[1]<dim[0])?dim[1]:dim[0],resize=resizeVal*ratio;resize=(resize>size)?size:resize;var imgW=resize,imgH=imgW,ovrL=false,ovrR=false,ovrT=false,ovrB=false,edgeW=edge[0],edgeH=edge[1];edgeW=mFloor(dim[0]*edgeW);edgeH=mFloor(dim[1]*edgeH);switch(position){case"top right":ovrR=edgeW;ovrT=edgeH;break;case"bottom right":ovrR=edgeW;ovrB=edgeH;break;case"top left":ovrL=edgeW;ovrT=edgeH;break;case"bottom left":ovrL=edgeW;ovrB=edgeH;break;default:ovrL=Math.floor((dim[0]*0.5)-(imgW*0.5));ovrT=Math.floor((dim[1]*0.5)-(imgH*0.5));}var css={};if(ovrR){css.right=px(ovrR);}if(ovrL){css.left=px(ovrL);}if(ovrT){css.top=px(ovrT);}if(ovrB){css.bottom=px(ovrB);}if(useAbsImg&&setAbsImg(imgW)){imgW=setAbsImg(imgW);imgH=imgW;absDim=imgW;}var overlaySrc=(function(){var dim,ret=window.location.protocol+"//global.fncstatic.com"+path;if(useAbsImg&&absDim){dim=absDim;}dim=(dim)?dim:"";return ret.replace("${dim}",dim);}());var hoverImg=new Image();hoverImg.src=overlaySrc;css.width=px(imgW);css.minHeight=px(imgH);css.background='url("'+overlaySrc+'") no-repeat 0px 0px';var overlay=$('<div class="media-overlay" style="position:absolute;"></div>'),titleLink=elm.parent().find("> h3:first");overlay.css(css);elm.find("a").css({position:"relative"});elm.find("img").each(function(){var item=$(this),parent=item.parent(),isHover=false;parent.css({display:"block",padding:"0"}).prepend(overlay);if(!noClick){parent.click(function(){var el=$(this),onclick=el.attr("onclick"),href=(useLink)?useLink:el.attr("href");if(onclick){eval(onclick);}else{if(href){window.location.href=href;}}return false;});}var overlayElm=parent.find(".media-overlay");function hoverOver(over){if(over&&!isHover){isHover=true;overlayElm.css("background-position","0px "+px("-"+imgH));}else{if(isHover){isHover=false;overlayElm.css("background-position","0px 0px");}}}if(parent.parent().find("> .credit").size()>0){overlayElm.css({bottom:"21px"});}if(hoverElm){hoverElm.hover(function(){hoverOver(true);},function(){hoverOver();});}titleLink.hover(function(){hoverOver(true);},function(){hoverOver();});parent.hover(function(){hoverOver(true);},function(){hoverOver();});});};var mFloor=function(val){var ret=Math.floor(val);return ret;};var px=function(val){var ret=val+"px";return ret;};return(new App());}(jQuery));window.OutbrainWidgetConnector=(function(g){var a={OBVar:"OB_elements",src:"http://widgets.outbrain.com/outbrain.js",legacySrc:"http://widgets.outbrain.com/outbrainWidget.js"};var e=function(h){if(!h){return false;}this.addWidget(h);};e.prototype.addWidget=function(k,m){var h,i=this;if(!k){return false;}if(!window[a.OBVar]){window[a.OBVar]=[];}var j=d(k);for(h=0;h<j.length;h++){var l=j[h];if(l.addWidgetType&&l.addWidgetType==="data-widget"){}else{if(l.containerId){c(l.containerId);}window[a.OBVar].push(l);}}f(m);};e.prototype.refreshWidgets=function(h){if(!window.OBR){return;}h=h||window.location.href;try{OBR.extern.refreshWidget(h);}catch(i){}};e.prototype.addWidgetLegacy=function(h,i){h=(b(h))?h[0]:h;if(h.containerId){c(h.containerId);}window.OB_permalink=h.permalink;window.OB_widgetId=h.widgetId;window.OB_Template=h.Template;window.OB_langJS=h.langJS;window.OB_isLateStarter=true;f(i,true);};var f=function(l,h){l=(typeof l==="function")?l:function(){};if(window.OB_Script&&window.OutbrainStart){try{window.OutbrainStart();l();}catch(k){log("[Outbrain.Connector] Error: "+k);}}else{var j=document.getElementsByTagName("script")[0],i=document.createElement("script");i.type="text/javascript";i.onreadystatechange=i.onload=function(){window.OB_Script=true;l();};i.async=true;i.src=(h)?a.legacySrc:a.src;j.parentNode.insertBefore(i,j);}};var c=function(h){g("#"+h).addClass("OBR");};var d=function(h){if(h&&!b(h)){h=[h];}return h;};var b=function(h){h=h||false;return Object.prototype.toString.call(h)==="[object Array]";};return e;}(jQuery));window.CrowdIgniteWidgetConnector=(function(f){var a={};a.globalVar="_CI";a.widgetId={};a.widgetId["crowd-ignite"]={"fnc/entertainment/style":"28567","fnc/entertainment/movies":"28543"};a.widgetId["crowd-ignite-rail"]={"fnc/entertainment/style":"28569","fnc/entertainment/movies":"28545"};var d=function(j){var i=this;i.__vars={};var h=i.__vars;h._widget={};if(!window[a.globalVar]){window[a.globalVar]={};}if(!j){return false;}this.addWidget(j);};d.prototype.addWidget=function(k,n){var h,i=this,m=i.__vars;if(!k){return false;}if(!window[a.OBVar]){window[a.OBVar]=[];}var j=c(k);for(h=0;h<j.length;h++){var l=j[h];e(l);}if(typeof n==="function"){n();}};var e=function(n){var m=(a.widgetId[n.container]&&a.widgetId[n.container][n.section])?a.widgetId[n.container][n.section]:false;if(!m){return false;}var l=g();var h="_CI_widget_"+l,i="//widget.crowdignite.com/widgets/"+m+"?_ci_wid="+h;var j=n.holder;j.attr("id",h);var k=document.createElement("script");k.type="text/javascript";k.async=true;k.src=i;(document.getElementsByTagName("head")||document.getElementsByTagName("body"))[0].appendChild(k);};var g=function(){window[a.globalVar].counter=(window[a.globalVar].counter)?window[a.globalVar].counter+1:1;return window[a.globalVar].counter;};var c=function(h){if(h&&!b(h)){h=[h];}return h;};var b=function(h){h=h||false;return Object.prototype.toString.call(h)==="[object Array]";};return d;}(jQuery));var DateTime=(function(){var a=function(c,f){f=f||null;var e;var d={month:c.getUTCMonth(),day:c.getDay(),year:c.getFullYear(),date:c.getDate(),hour:c.getHours(),minutes:c.getMinutes(),seconds:c.getSeconds(),ampm:((c.getHours()<12)?"am":"pm"),fullStr:c.toString()};var l=function(o){o=o||"";o=o.toString();if(o.length<1){return o;}var i="",m=parseInt(o.charAt(o.length-1),10);switch(m){case 1:i="st";break;case 2:i="nd";break;case 3:i="rd";break;default:i="th";break;}return(o+i);};var j=function(p,m){m=m||"full";var o=["January","February","March","April","May","June","July","August","September","October","November","December"],i=o[p]||"";if(m==="short"){i=i.slice(0,3);}return i;};var g=function(i){i=(!isNaN(i))?i:"";return i.toString();};var h=function(p,o){o=o||"full";var i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=i[p];if(o==="short"){m=m.slice(0,3);}return m;};var b={"${mm}":(d.month+1),"${month}":j(d.month),"${month:short}":j(d.month,"short"),"${day}":h(d.day),"${day:short}":h(d.day,"short"),"${yr}":d.year,"${yr:short}":g(d.year).substr(2),"${dd}":((d.date<10)?("0"+g(d.date)):g(d.date)),"${ddTH}":l(d.date),"${hr}":((d.hour>12)?d.hour-12:d.hour),"${hr:mil}":((d.hour<10)?("0"+g(d.hour)):g(d.hour)),"${min}":((d.minutes<10)?("0"+g(d.minutes)):g(d.minutes)),"${sec}":((d.seconds<10)?("0"+g(d.seconds)):g(d.seconds)),"${ampm}":d.ampm,"${AMPM}":(d.ampm).toUpperCase(),"${AmPm}":((d.ampm).charAt(0)).toUpperCase()+(d.ampm).charAt(1)};for(e in b){var k=f.indexOf(e);while(k!==-1){f=f.replace(e,b[e]);k=f.indexOf(e);}}return f;};return a;}());window.WatchNow=(function(h){var m={feeds:{FN:{"sched-tool":"http://www.foxnews.com/feeds/schedule/channel/foxnewscom-live/feed/json",playlist:"http://video.foxnews.com/v/feed/playlist/1621774019001.js?template=fox"},FB:{"sched-tool":"http://www.foxbusiness.com/feeds/watch/show-schedule/feed/json/",playlist:"http://video.foxbusiness.com/v/feed/playlist/87187.js?template=fox"}},imageDimension:[132,74]};var c=function(p){if(!window.MultiFeedParser||!window.AKAMAI_TIME_HELPER){return false;}var o=this;o.__vars={};var n=o.__vars;n.data={};p=(typeof p==="object"&&!h.isArray(p))?p:{};n._config=p;var s=m.feeds.FN;if(p.site==="foxbusiness"){s=m.feeds.FB;}var q=false;if(p.refresh&&!isNaN(p.refresh)){q=parseInt(p.refresh,10);}var r={};r.feeds={};r.logging=true;r.initOnLoad=true;if(q){r.cacheTime=q;}r.feeds.playlist={url:s.playlist,jsonpCallback:"FOX_WatchNowPlaylist",normalize:function(u){var t=u;if(u){t=b(p,u);}return t;}};r.feeds["sched-tool"]={url:s["sched-tool"],jsonpCallback:"FOX_WatchNowSchedTool",normalize:function(v){var t=v,u=(p.fullSchedule)?true:false;if(v){t=i(p,v,u);}return t;}};n._parser=new MultiFeedParser(r);};c.prototype.getData=function(n){var p=this,o=p.__vars;if(typeof n!=="function"){return false;}o._parser.event.onLoad("sched-tool",function(q){o.data["sched-tool"]=q;o._parser.event.getData("playlist",function(r){o.data.playlist=r;var s=a(q,r);n(s);});});};c.prototype.getScheduleFeed=function(n){var p=this,o=p.__vars;if(typeof n!=="function"){return false;}o._parser.event.onLoad("sched-tool",function(q){o.data["sched-tool"]=q;n(q);});};c.prototype.getPlaylistFeed=function(n){var p=this,o=p.__vars;if(typeof n!=="function"){return false;}o._parser.event.onLoad("playlist",function(q){o.data.playlist=q;n(q);});};var a=function(q,s){var p=999,o=(s.length>p)?p:s.length,n=[];if(q){o--;n.push(q);}var r=0,t=[];while(r<s.length){if(s[r]&&s[r].isLive){t.push(s[r]);s.splice(r,1);}else{r+=1;}}s.reverse();t.reverse();s=s.concat(t);s.reverse();for(x=0;x<o;x+=1){n.push(s[x]);}return n;};var b=function(o,p){var n=(p&&p.channel&&p.channel.item)?p.channel.item:false;if(!n){return false;}n=((!h.isArray(n))?[n]:n);var u,r=[],s=n.length,q=(o.imageDimension)?o.imageDimension:m.imageDimension;var t=function(z){var w=false;if(z){z=(!h.isArray(z))?[z]:z;for(var y=0;y<z.length;y+=1){if(z[y].indexOf("live_stream")>-1){w=true;break;}}}return w;};var v=function(y){var w=j(y["media-group"]["media-thumbnail"]["@attributes"].url,q);var z={isLive:t(y.category),title:y.title,link:y.link,guid:y.guid,img:w,raw:y};return z;};for(u=0;u<s;u+=1){r.push(v(n[u]));}return r;};var i=function(o,q,t){var z,u,s=[],p=[],y=false,v=q.day,A=window.AKAMAI_TIME_HELPER.getCurrent();var w=function(D,B,C){C=C||false;p.push({current:C,show:D,index:B});};var r=function(D){var E,C=D.show||[];C=(h.isArray(C))?C:[C];for(E=0;E<C.length;E+=1){var B=C[E];B.start=g(B.start);B.end=g(B.end);B.description=(typeof B.description!=="string")?"":h(B.description).text();B.showImg=(function(J,I){J=(typeof J==="string")?h.trim(J):"";var H="http://global.fncstatic.com/static/v/all/img/clear.gif",K=(o.imageDimension)?o.imageDimension:m.imageDimension;if(I){H=l(I,K);}else{if(J.length>0){var F="http://global.fncstatic.com";if(o.imagePattern){var G=o.imagePattern;G=G.replace("${machineTitle}",J);F+=G;}else{F+="/static/p/live.foxnews.com/img/schedule/144x81-live-"+J+".jpg";}H=l(F,K);}}return H;}(B["machine-title"],B.image));s.push(B);B.start_early=new Date(B.start.getTime()-(60000*5));if(!y&&B.start_early<=A&&B.end>=A){p=[];w(B,(s.length-1),true);y=true;}else{if(p.length<3&&y){w(B,(s.length-1));}else{if(p.length<3&&B.start>=A){w(B,(s.length-1));}}}}};for(z=0;z<v.length;z+=1){r(v[z]);}u={latest:p,normalized:s,raw:q};var n={},p=(u&&u.latest[0]&&u.latest[0].current)?u.latest[0].show:false;if(p){n={title:p.title,img:p.showImg,isLive:true,link:p.link,guid:p["machine-title"],webShow:true,raw:p,rawDump:u};u=n;}else{if(t){n={rawDump:u};u=n;}else{u=p;}}return u;};var j=function(q,s){if(!s){return q;}var p=q.split("/"),o=p.length,r=p[o-3],n=p[o-2];p[o-3]=(!isNaN(r))?s[0]:r;p[o-2]=(!isNaN(n))?s[1]:n;return p.join("/");};var l=function(q,r){if(!r){return q;}var t="http://a57.foxnews.com/",s=q.replace("http://",""),o=s.split("/"),n=o.length;o[n-1]=r.join("/")+"/"+o[n-1];var p=t+o.join("/");return p;};var d=function(r,n){r=new Date(r);n=new Date(n);var q=[],p=DateTime(r,"${hr}:${min}"),o=DateTime(n,"${hr}:${min} ${ampm}");q=[p,o].join(" - ");return q;};var g=function(r){var o,p=r.split("T"),n=p[0],q=p[1].split("-")[0];n=n.split("-");n=[n[1],n[2],n[0]].join("/");o=new Date([n,q].join(" "));return o;};var f=function(r){r=new Date(r);if(Object.prototype.toString.call(r)==="[object Date]"&&!isNaN(r.getTime())){var n=r.getDay(),p=r.getHours(),o=r.getMinutes(),q=(p*100)+o;return(n===3&&q>=1500&&q<=1930)?true:false;}else{return false;}};var k=function(s){s=new Date(s);var o=false;if(Object.prototype.toString.call(s)==="[object Date]"&&!isNaN(s.getTime())){var n=s.getDay(),q=s.getHours(),p=s.getMinutes(),r=(q*100)+p;if(n>=1&&n<=5&&r>=2000&&r<=2359){o=true;}else{if(n>=2&&n<=6&&r===0){o=true;}}}else{o=false;}return o;};var e=function(n){if(typeof window.console==="object"&&console.log){console.log(n);}};return c;}(jQuery));window.HashListener=(function(){var a={timer:500};var c=function(){this.__vars={};var e=this.__vars;e._callStack=[];e._stackReady=true;e._hashData={curr:false,stored:false};this.event=new b(this);d(this,function(h){if(e._callStack.length<1){return false;}if(e._stackReady){e._stackReady=false;var g={str:h.curr};for(var f=0;f<e._callStack.length;f++){e._callStack[f](g);}e._stackReady=true;}});};c.prototype.getValue=function(){var f=this,e=f.__vars;return e._hashData.curr;};var b=(function(){var e=function(f){this.__vars={};var g=this.__vars;g.root=f;};e.prototype.onChange=function(h){var g=this,f=g.__vars.root;if(typeof h!=="function"){return false;}f.__vars._callStack.push(h);};return e;}());var d=function(i,k){var f,j=a.timer,e=i.__vars,h=e._hashData;var g=function(){h.curr=window.location.hash;if(typeof h.stored!=="string"&&h.curr.length>0){h.stored=h.curr;k(h);}else{if(h.curr!==h.stored&&e._stackReady){h.stored=h.curr;k(h);}}};g();if("onhashchange" in window){if(window.attachEvent){window.attachEvent("onhashchange",function(){g();});}else{window.addEventListener("hashchange",function(){g();},false);}}else{setInterval(function(){g();},j);}};return c;}());window.NewslettersForm=(function(f){var a={};a.SLID={FB_Breaking_Alerts:"5C84B893BD6D939E84FAE1A8E6E9525A",FB_CEO_Newsbrief:"3DC725E303A24F8D870B96401050B31F",FB_Morning_Headlines:"3DC725E303A24F8D518A0FB222399489",FB_Most_Popular_Content:"3DC725E303A24F8D39740C7B45D15F45",FB_Small_Business_Weekly_Report:"3DC725E303A24F8D3540B4B6FB335FC8",FB_Stock_Alerts:"",FB_The_Willis_Report_Promotional:"3DC725E303A24F8D5E4CD875B68955A6",FB_Weekly_Personal_Finance:"3DC725E303A24F8D7E5F3A553E2E6154",FN_Autos:"3DC725E303A24F8D197DA3C8590F80E2",FN_Breaking_Alerts:"C2F278094FACCEA62391025B7A52D8EB",FN_Food_And_Drink:"3DC725E303A24F8D1C12D1E24CDEA25E",FN_FOX_411_Newsletter:"3DC725E303A24F8D9C92271F5026F381",FN_FOX_411_Partner_Pitch_Email:"3DC725E303A24F8DD2821C1AF73D49D4",FN_Health_Newsletter:"3DC725E303A24F8DA5DBC7FFD49BC2B8",FN_Leisure_Headlines:"3DC725E303A24F8D02B1F9D9AAF16982",FN_Monthly_Politics_Update:"3DC725E303A24F8D836CEAE9B885C87D",FN_Morning_Headlines:"3DC725E303A24F8DCF015F07C61BABFD",FN_Most_Popular:"3DC725E303A24F8DB05092D232355E43",FN_Opinion_Headlines:"3DC725E303A24F8D95ACD1C9C0564C20",FN_Politics:"3DC725E303A24F8DA102192D9D5143D9",FN_Promotional_Emails:"3DC725E303A24F8D41CEA8699C0FE71E",FN_Science_And_Technology:"3DC725E303A24F8DAB69E1C048904762",FN_Weekly_Travel:"3DC725E303A24F8DE5173CCC4F027046",Fox_Nation_Fired_Up:"3DC725E303A24F8D64B4C05965F09E1A",uReport_Launch_Email:"3DC725E303A24F8D41CEA8699C0FE71E",uReport_Monthly:"3DC725E303A24F8D41CEA8699C0FE71E",FN_Latino_Morning_Headlines:"3DC725E303A24F8D555BC7C7F3FD748B"};a.defaultStr="Enter Email Address";var c=function(h){var g=this,i=h.elm;g._elm=i;g._SLID=(h.SLID)?h.SLID:i.find("input[type='hidden'][name='slid']").val();g._INPUT=i.find("input[type='text'][name='signup']");g._onSuccess=(typeof h.onSuccess==="function")?h.onSuccess:function(){};g._onError=(typeof h.onError==="function")?h.onError:function(){};g._onFocus=(typeof h.onFocus==="function")?h.onFocus:function(){};g._INPUT.val(a.defaultStr);b(g._INPUT,g._onFocus);i.submit(function(){g.submit();return false;});};c.prototype.submit=function(){var g=this,l=g._elm,h=g._INPUT.val(),k=g._SLID,j=d(h);if(j&&k){g._onSuccess();e(h,k);}else{var i=(!j)?"email":"slid";g._onError(i);}return false;};var b=function(g,h){var i=a.defaultStr;g.focus(function(){var j=f(this).val();if(f.trim(j.toLowerCase())===i.toLowerCase()){f(this).val("");}h();});g.blur(function(){var j=f(this).val();if(f.trim(j.toLowerCase())===""){f(this).val(i);}});};var e=function(g,h){f.ajax({type:"GET",url:"/portal/newsalertsubscribe",data:({slids:h,email:g,format:"html"}),dataType:"text"});};var d=function(g){var h=/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/;return(h.test(g))?true:false;};return c;}(jQuery));if(typeof JSON!=="object"){JSON={};}(function(){function f(n){return n<10?"0"+n:n;}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);}if(typeof rep==="function"){value=rep.call(holder,key,value);}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null";}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null";}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v;}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v;}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" ";}}else{if(typeof space==="string"){indent=space;}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");}return str("",{"":value});};}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j;}throw new SyntaxError("JSON.parse");};}}());window.LoadMore=(function(e){var m={};m.protocol=window.location.protocol;m.config={};m.config.type="current";m.config.itemsOnLoad=10;m.config.showStr="Showing ${show} Results";m.config.btnStr="Show More";m.config.renderer="SectionFronts";m.feed="/feeds/web/${sectionType}/component/latest-news/feed/json/?rows=10&callback=${callback}&max_date=${timestamp}";var a=function(r,p){if(!r){return false;}var o=this;o.__vars={};var n=o.__vars;p=(typeof p==="object"&&!e.isArray(p))?p:{};for(var q in m.config){if(typeof p[q]==="undefined"){p[q]=m.config[q];}}n._config=p||{};n._elm=r;n._fn=new g(o);n._renderer=new d(o);o.event=new k(o);n._elm.find("ul.dv-encap:first > li").addClass("show");n._fn.setButton();n._fn.setButtonBindings();if(window.FOX&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}};var k=(function(){var n=function(o){this.root=o;};n.prototype.onLoadMore=function(){var p=this,o=this.root,q=o.__vars;};return n;}());var d=(function(){var n=function(o){this.root=o;};n.prototype.SectionFronts=function(r){var A,C=this,z=this.root,v=z.__vars,u=v._elm,q=v._config,s=u.find("ul.dv-encap:first"),w=s.children(".dv-item:first").clone(),y=e('<ul id="temp"></ul>'),B=h();var t=r.items,o=(r.numFound)?r.numFound:false;if(!e.isArray(t)){t=[t];}var p=function(R){var U=R.use_title,T=R.image_url,I=R.url,G=R.content_type,S=R.authors,F=(typeof q.maxAuthors==="number")?q.maxAuthors:3,K=R.date,M=R.eyebrow,J=w.clone();var Q=function(X,W){var V=new Image();V.onload=function(){W(X);};V.src=X;};var P=(function(){var V=R.description||"&nbsp;",W=e("<span>"+R.description+"</span>");if(W.find("span > p").size()===0){var X=e.trim(W.text());X=e.strTruncate(X,200,true,true);V="<p>"+X+"</p>";}return V;}());J.attr("class","dv-item show new-ajax-item");if(G){J.addClass(G);}J.find("> h3 a").text(U);J.find("> h3 a").attr("href",I);J.find("> .summary").html(P);J.find("> .m:first").remove();J.find(".author-headshot").remove();J.find("p.author").remove();if(S&&B==="opinion"){J.find("h3").append('<p class="author">by </p>');var O=(S.length>F)?F:S.length,D=[];for(var N=0;N<O;N++){var H=S[N],L=H.headshot_image_url;D.push(H.display_name);if(N===0&&L){var E=i(L,48,48);J.find("> h3").before('<img class="author-headshot" data-src="'+E+'" src="'+m.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" width="48" height="48" />');}}J.find("p.author").append(D.join(", "));}if(T){T=i(T,252,142);T+="?ve=1";J.prepend('<div class="m"><a href="'+I+'"><img data-src="'+T+'" src="'+m.protocol+'//global.fncstatic.com/static/v/all/img/clear.gif" width="252" height="142"/></a></div>');if(e.browser.msie&&parseInt(e.browser.version,10)<8){J.addClass("ie7-m");}}J.find("> meta[itemprop='datePublished']:first").attr("content",K);if(M){J.find("> .cat-name").html(M);}else{J.find("> .cat-name").remove();}y.append(J);};for(A=0;A<t.length;A++){p(t[A]);}e(y.children()).insertBefore(s.children(":last-child"));s.children().removeClass("dv-item-last");s.children(":last-child").prev().addClass("dv-item-last");s.find("> .dv-item").each(function(){var D=e(this);D.find("img[data-src]").each(function(){var F=e(this),E=new Image(),G=F.attr("data-src");D.addClass("loading");F.removeAttr("data-src").css("opacity",0);E.onload=function(){F.attr("src",G).animate({opacity:1},200,"linear");F.removeAttr("width").removeAttr("height");D.removeClass("loading");};E.src=G;});});if(FOX&&FOX.site&&FOX.site.mediaIconOverlay){s.children(":not(:last-child)").each(function(){var D=e(this);FOX.site.mediaIconOverlay.set({elm:D,position:"bottom right",size:48,dim:[252,142]});});}else{c("[LoadMore] No Media Overlay script found!");}if(FOX&&FOX.site&&FOX.site.SocialMediaCount){s.children(".new-ajax-item").each(function(){var D=e(this);FOX.site.SocialMediaCount.set(D.find(".social-count"));D.removeClass("new-ajax-item");});}else{c("[LoadMore] No Social Media script found!");}v._fn.setButton(o);};return n;}());var g=(function(){var n=function(o){this.root=o;};n.prototype.loadFeed=function(){var A=this,y=this.root,v=y.__vars,u=v._elm,r=v._config,t=u.find("ul.dv-encap:first"),s=t.find("> .more-btn .btn-smll"),o="FX_LM";if(v._loading){return false;}v._loading=true;s.addClass("off");var z=h(),q=j();if(!z){c("[LoadMore] No Section found for this page.");return false;}var w=z+((q)?("/"+q):"");var p=(function(){var B=r.feed||false;if(r.type==="legacy"){B=B.replace("${callback}",o);B=B.replace("${sectionType}",w);B=B.replace("${startVal}",l(t,false,r.addToResultsCount||0));}else{B=B||m.feed;B=B.replace("${callback}",o);B=B.replace("${sectionType}",w);B=B.replace("${timestamp}",A.getMaxDate());}return B;}());if(r.domain){p=r.domain+p;}window[o]=function(D){if(D){var C=f.normalize(D,r);if(!C){return false;}var B=r.renderer||m.config.renderer;v._renderer[B](C);}else{c("[LoadMore] No Data!");}setTimeout(function(){v._loading=false;},500);};e.ajax({url:p,dataType:"script",async:true,cache:true});};n.prototype.setButton=function(p,t){var D=this,A=this.root,y=A.__vars,w=y._elm,r=y._config,v=w.find("ul.dv-encap:first"),s=r.addToResultsCount||0;t=(typeof t==="boolean")?t:null;var q=r.showStr||m.config.showStr,o=r.btnStr||m.config.btnStr,C='<li class="show more-btn"><span class="showing-num">${showStr}</span><a href="#" class="btn-smll">${btnStr}</a></li>';var u=v.find("> .more-btn");if(u.size()===0){C=C.replace("${showStr}",l(v,q,s));C=C.replace("${btnStr}",o);v.append(C);}else{var B=u.find(".showing-num"),z=B.html();u.find(".showing-num").html(l(v,q,s));}D.setButtonState(t,p);};n.prototype.setButtonState=function(t,p){var B=this,A=this.root,z=A.__vars,y=z._elm,r=z._config||{},v=y.find("ul.dv-encap:first"),w=v.find("> .more-btn"),u=r.itemsOnLoad,s=r.addToResultsCount||0;t=(typeof t==="boolean")?t:null;p=(typeof p==="number")?p:false;var o=function(){w.removeClass("off");w.find(".btn-smll").removeClass("off");};var q=function(){w.addClass("off");w.find(".btn-smll").addClass("off");};if(r.type==="legacy"){if((t!==null&&t)||(p&&p<r.itemsOnLoad)||l(v,false,r.addToResultsCount||0)>39){q();}else{o();}}else{if((t!==null&&t)||l(v,false,s)<u||(p&&p<r.itemsOnLoad)){q();}else{o();}}};n.prototype.setButtonBindings=function(){var p=this,o=this.root,t=o.__vars,u=t._elm,q=t._config||{},s=u.find("ul.dv-encap:first"),r=s.find("> .more-btn");if(r.size()===0){return false;}r.find("a").bind("click",function(){if(!r.hasClass("off")){p.loadFeed(p);e.ad.track({"show-more":{}});}return false;});};n.prototype.getMaxDate=function(){var q="",p=this,o=this.root,s=o.__vars,t=s._elm,r=t.find("ul.dv-encap:first");r.find("> li.dv-item:last meta[itemprop='datePublished']:first").each(function(){q=e(this).attr("content")||"";});return q;};return n;}());var f=(function(){f={};f.normalize=function(r,q){var p=(r&&r.response&&e.isArray(r.response.docs))?r.response.docs:false,t=(r&&r.response&&r.response.numFound)?r.response.numFound:false;if(!p){return false;}p=p.slice(0,q.itemsOnLoad);var u=function(w){var v=w.taxonomy_path||false,z=w.section||false,y=(typeof w.content_type==="string"&&w.content_type.indexOf("video")>-1)?true:false;w.eyebrow=b(v,z);if(y){w.use_title=w.title||w.export_headline;}else{w.use_title=w.export_headline||w.title;}w.url=e.trim((e.isArray(w.url))?w.url[0]:w.url);w.image_url=(w.image_url)?((e.isArray(w.image_url))?w.image_url[0]:w.image_url):false;w.authors=n(w.authors);switch(w.content_type){case"video":w.content_type="video-ct";break;case"slideshow":w.content_type="slideshow-ct";break;case"article":w.content_type="article-ct";break;case"listpage":w.content_type="listpage-ct";break;}return w;};for(var o=0;o<p.length;o++){p[o]=u(p[o]);}var s={items:p};if(t){s.numFound=t;}return s;};f.legacy=function(r,q){var p=(r&&r.response&&e.isArray(r.response.docs))?r.response.docs:false,t=(r&&r.response&&r.response.numFound)?r.response.numFound:false;if(!p){return false;}p=p.slice(0,q.itemsOnLoad);var u=function(w){var v=w.taxonomy_path||false,y=w.section||false;w.eyebrow=b(v,y);w.use_title=w.export_headline||w.title;w.url=e.trim((e.isArray(w.url))?w.url[0]:w.url);w.authors=n(w.authors);w.image_url=(w.image_url)?((e.isArray(w.image_url))?w.image_url[0]:w.image_url):false;w.content_type=w.content_type||(function(){var z="article-ct";if(w.url.indexOf("http://video.")===0){z="video-ct";}else{if(val.indexOf("/slideshow/")>-1){z="slideshow-ct";}}return z;}());return w;};for(var o=0;o<p.length;o++){p[o]=u(p[o]);}var s={items:p};if(t){s.numFound=t;}return s;};var n=function(r){var p,s=false,o=(r&&e.isArray(r)&&r.length>0)?r:false;if(o){s=o;for(p=0;p<s.length;p++){var t=s[p],q=[];if(t.last_name){q.push(e.trim(t.last_name));}if(t.first_name){q.push(e.trim(t.first_name));}s[p].display_name=q.join(" ");s[p].headshot_image_url=t.headshot_image_url||false;}}return s;};return f;}());var l=function(q,r,n){var p=q.children(".show:not(.more-btn)").size();p=(typeof n==="number")?(p+parseInt(n,10)):p;var o=(r)?r.replace("${show}",p):p;return o;};var b=function(n,q){var o=false;if(n){n=(e.isArray(n)&&typeof n[0]==="string")?n[0]:(typeof n==="string"&&n.length>0)?n:false;if(n){var p=n.split("|");p=e.trim(p[0]||"");if(p.length>0){p=p.split("/");p=e.trim(p[p.length-1]||"");if(p.length>0){o=p;}}}}if(!o&&q){if(e.isArray(q)&&q[0]&&q[0].title){o=q[0].title;}}return o;};var h=function(){var n=e("head meta[name='prism.section']").attr("content")||false;return n;};var j=function(){var n=false,o=[];e("head meta[name^='prism.subsection']").each(function(){var p=e.trim(e(this).attr("content")||"");if(p.length>0){o.push(p);}});if(o.length>0){n=o.join("/");}return n;};var i=function(p,n,q){if(isNaN(n)||isNaN(q)){return p;}var o=p.split("/"),r="/"+n+"/"+q+"/";o.splice(0,2);o.unshift("http://a57.foxnews.com");o=o.slice(0,o.length-1).join("/")+r+o.slice(o.length-1);return o;};var c=function(){var o=true;if(o&&window.console){try{return console.log.apply(console,arguments);}catch(n){console.log(arguments);}}};return a;}(jQuery));window.Akamai_ExtCallbackHandler=(function(d){var a={callbackName:"jsCallbackHandler"};var c=function(){this.__vars={};var f=this,e=f.__vars;e._callStack={};if(window.AEP&&typeof window.AEP[a.callbackName]==="function"){var g=window.AEP[a.callbackName];window.AEP[a.callbackName]=function(){b(f,arguments);g.apply(this,arguments);};}else{if(window.AEP){window.AEP[a.callbackName]=function(){b(f,arguments);};}else{window.AEP={};window.AEP[a.callbackName]=function(){b(f,arguments);};}}};c.prototype.onEvent=function(g,h){var f=this,e=f.__vars;if(!e._callStack[g]){e._callStack[g]=[];}e._callStack[g].push(h);};var b=function(j,k){var g,i=j.__vars,l=k[0],h=k[1],f=k[2];if(h&&i._callStack[h]){var e=i._callStack[h];for(g=0;g<e.length;g++){e[g]({id:l,eventName:h,body:f,raw:k});}}};return c;}(jQuery));
/*Tue Apr 30 14:24:14 EDT 2013*/
