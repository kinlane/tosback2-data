(function(E){var D=(typeof _cbVarStr!=="undefined")?_cbVarStr:"b1020";(function(){var S=function(W){W=W||false;var T=new Date(),X=T.getFullYear().toString()+(T.getMonth()+1).toString()+T.getDate().toString(),V=T.getHours()+1,U=T.getMinutes();X+=V.toString()+((W&&!isNaN(W))?(Math.floor(U/parseInt(W,10))).toString():"");return X;};document.write('<script type="text/javascript" src="http://global.fncstatic.com/static/v/all/js/geo.js?cb='+S(1)+'"><\/script>');}());var Q=(function(){var T="fn",V=window.location,U=V.host||V.hostname;var S=function(W){return(U.indexOf(W)>-1)?true:false;};if(S("foxnews.com")){if(S("latino.foxnews.com")){T="fn-latino";}else{T="fn";}}else{if(S("foxbusiness.com")){if(S("smallbusiness.foxbusiness.com")){T="sbc";}else{T="fb";}}}return T;}());var P={feed:{whatsHotLive:{feedFunction:"FeedSource_WhatsHotWatchLive",url:"http://www.foxnews.com/js/whatshot.js",rotate:3,show:{hot:false,live:2},fade:{use:true,delay:900}},onAir:{feedFunction:"FeedSource_FNCTV",url:"http://www.foxnews.com/js/onair.js",descCharLimit:35,imageDomainLoc:""},onAirCarousel:{feedFunction:"FOX_FN_OnAir_Data",url:"http://global.fncstatic.com/static/managed/json/onair-feed-data.js"}},onAir:{hideDelay:200},authentication:{use:"render",domain:"foxnews.com",check:"/authentication/registration/validate/"}};window.FOX_Auth_Use_Janrain=(function(){var S=true;S=(window.location.search.indexOf("_authj=n")>-1)?false:S;return S;}());var B=function(){this.headObj={};};B.prototype={init:function(U){var S=this;if(E("body").data("HasHeaderInit")){return false;}E("body").data("HasHeaderInit",true);var V;for(V in U){if(U.hasOwnProperty(V)){this["_"+V]=U[V];}}this.setHolders();var T=function(){var W=false;W=("createTouch" in document)?true:false;W=(!W&&navigator.userAgent.match(/BlackBerry/i))?true:W;return W;};if(T()||!window.FOX_Auth_Use_Janrain||!window.AuthenticationService_Janrain){window.FOX_Auth_Use_Janrain=false;if(T()){E("#account").css("visibility","hidden");}else{this.authentication=new R(this);}}else{this.authentication=new I(this);}this.feeds=new O(this);this.onAir=new J(this);switch(Q){case"fn":S.whatsHot=new K(this);break;case"fb":S.whatsHot=new G(this);break;}this.searchAutocomplete=new A(this);},setHolders:function(){this.headObj={headlines:E("#headlines-primary"),primaryNav:E("#nav-primary"),onAir:E("#section-head .slide.slide-1"),authentication:E("#account")};this.setListeners();},setListeners:function(){var S=function(Y){var W=false,V=Y.split("/")[2]||false,X=window.location.hostname||window.location.host;if(V&&V.length>1){V=V.replace("www.","");if(X.indexOf(V)>-1){W=true;}}return W;};var T=E("#util dl dd");var U=function(){T.find("> a").removeClass("active");};T.each(function(){var X=E(this),V=X.find("> a"),W=V.attr("href");if(S(W)){U();V.addClass("active");}});}};var R=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){var V=this,U=this.root;if(U.headObj.authentication.size()===0){return false;}function T(){var a=document.location.hostname,Z=a.split("."),X=Z.length,Y=Z[X-2]+"."+Z[X-1];P.authentication.domain=Y;}function W(){T();if(typeof V[P.authentication.use]==="function"){V[P.authentication.use]();}else{V.render();}}if(typeof AuthService!=="undefined"){W();}else{E(document).ready(function(){if(typeof AuthService!=="undefined"){W();}else{H("[head.authentication] Authentication Service not found.");}});}this.setHolders();},setHolders:function(){var T=this.root.helper.getQueryStr("usr");if(T){E(".login-fields > .field > input[name='userName']").attr("value",T);}},render:function(){var Y=this.root,W=Y.headObj.authentication,V=(W.hasClass("alt-style"))?true:false,a=false,U=false;W.show();if(!V){a=W.find(".user-options > p:first");U=W.find("> .username > .encapsulate");var T=W.find("> .username"),b=E("body");U.hover(function(){E(this).addClass("hover");},function(){E(this).removeClass("hover");});U.click(function(){if(W.hasClass("active")){W.addClass("inactive").removeClass("active");}else{W.addClass("active").removeClass("inactive");}});T.hover(function(){window.FXAuthClickIsOver=true;},function(){if(window.FXAuthClickIsOver){window.FXAuthClickIsOver=false;}});if(!b.data("FXAuthClick")){b.data("FXAuthClick",true);b.mousedown(function(){if(!window.FXAuthClickIsOver&&W.hasClass("active")){W.removeClass("active").addClass("inactive");}});}}else{W=E("#authentication").parent();a=W.find(".username");}function X(f){f=f||"Profile";var d="",e="";if(P.authentication.domain!=="foxnews.com"){d=' target="_blank"';if(typeof E.cookie!=="undefined"&&E.cookie("p_DN")){e="?usr="+E.cookie("p_DN");}}return"<a"+d+' href="http://www.foxnews.com/community/user/profile'+e+'">'+f+"</a>";}var Z=window.authentication_service=new AuthService({domain:P.authentication.domain});Z.extend({createLoginLogout:function(h){var e=this,g=[],f=W.find("#authentication");if(e.isLoggedIn()){if(V){f=f.children(":first");f.each(function(){if(!e.isThirdParty()){E(this).html(X());}else{E(this).css({display:"none"});}});f.next().each(function(){var j=E('<a href="#">Log Out</a>');j.click(function(){try{e.logout(e.domain);}catch(k){H("[head.authentication] Logout - An error occured: "+k);}return false;});E(this).html(j);});a.html('<img src="http://global.fncstatic.com/static/v/all/img/head/profile.png" alt="" /> Welcome, <strong>'+e.getDisplayName()+"</strong>");a.css({display:"inline"});}else{f=W.find(".user-options > ul").children(":first");f.each(function(){if(!e.isThirdParty()){E(this).html(X(E(this).text()));}else{f.css({display:"none"});}});f.next().find("a").click(function(){try{e.logout(e.domain);}catch(j){H("[head.authentication] Logout - An error occured: "+j);}return false;});W.addClass("inactive");var d=(function(){var l=e.getDisplayName(),k=l,m="",j="<span${title}>${name}</span>";if(l.length>13){k=l.slice(0,13)+"...";m=' title="'+l+'"';}return j.replace("${title}",m).replace("${name}",k);}());a.html("You're logged in as "+d);}}else{f.children().find("a").each(function(){var j=E(this),k=j.text().toLowerCase();if(k.indexOf("register")>-1){j.click(function(){try{e.registrationOverlay(e.domain);if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}}catch(l){H("[head.authentication] Register - An error occured: "+l);}return false;});}else{if(k.indexOf("login")>-1){j.click(function(){try{e.providerOverlay(e.domain);if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}}catch(l){H("[head.authentication] Login - An error occured: "+l);}return false;});}}});if(V){f.css({display:"inline"});}else{a.html("Please login.");}}},onSuccessLogin:function(){var d=this;d.createLoginLogout();d.closeOverlay("login-provider");},callback:function(d){var e=this,f=e.createObjFromJSON(d);if(f.authentication.status==="ok"){if(e.thirdPartyAPI){e.thirdPartyAPI.disqus.login(f,function(){e.thirdPartyAPI.idms.login(f,function(){e.thirdPartyAPI.fileMobile.login(f,function(){window.FOX_TP_Reload=setTimeout(function(){window.location.reload();},1000);});});});}}e.closeOverlay("login-provider");}});Z.init();Z.createLoginLogout();}};return S;}());var I=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){if(window.AuthenticationService_Janrain){E("p.login-link").hide();var T=window.authentication_service_v3=new AuthenticationService_Janrain();}else{H("[head.Authentication] Fatal Error: Janrain service not found.");}}};return S;}());var J=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){var U=this,T=this.root;if(T.headObj.onAir.size()===0){return false;}window[P.feed.onAir.feedFunction]=function(V){U.renderOnAirNow(V);};window[P.feed.onAirCarousel.feedFunction]=function(V){U.renderOnAirCarousel(V,function(){U.carousel();U.setCarouselListeners();});};T.feeds.onAir();T.feeds.onAirCarousel();},renderOnAirNow:function(s){var d=this,m=this.root,Z=s.schedules.today,W=s.schedules.tomorrow,e=E("#show-data"),o=e.children("ul:first");if(e.size()===0){return false;}function j(t){t=E.trim(t);return(t.split(":"))[0]+t.charAt(t.length-2)+"<span>et</span>";}function g(u){var t=P.feed.onAir.descCharLimit;return(u.length>t)?u.substring(0,t)+"...":u;}function U(w,z){z=z||false;var AB,AC=[],v=(z)?w:w+1,t=E("#section-head").hasClass("header-update"),AA=0;var AD=function(x){AA++;if(t){AC.push("<li"+((AA===1)?' class="first"':"")+">");AC.push('<p class="media"><a href="'+x.link+'"><img src="'+P.feed.onAir.imageDomainLoc+x.img+'" alt="" /></a></p>');AC.push('<p class="time">'+j(x.time)+"</p>");AC.push('<div class="info">');AC.push('<p class="summary"><a href="'+x.link+'" title="'+x.dek+'">'+x.title+"</a></p>");AC.push('<p class="relation">'+g(x.dek)+"</p>");if(AA===1){AC.push('<a class="watch-now-link" href="http://watch.foxnews.com/"><img src="http://global.fncstatic.com/static/all/img/watch-icon.gif"></a>');}AC.push("</div>");AC.push("</li>");}else{AC.push("<li"+((AA===1)?' class="first"':"")+">");AC.push('<p class="media"><a href="'+x.link+'"><img src="'+P.feed.onAir.imageDomainLoc+x.img+'" alt="" /></a></p>');AC.push('<div class="info">');AC.push('<p class="relation">'+x.title+"</p>");AC.push('<p class="summary"><a href="'+x.link+'" title="'+x.dek+'">'+g(x.dek)+"</a></p></div>");AC.push('<p class="time">'+j(x.time)+"</p></li>");}};for(AB=w;AB<=v;AB++){var u=Z[AB];AD(u);}if(z&&W[0]){AD(W[0]);}o.html(AC.join(""));}var h,l=new Date(s.now.date+" "+s.now.time),f=parseInt(l.getHours()+""+((l.getMinutes()<10)?"0"+l.getMinutes():l.getMinutes()),10);for(h=0;h<Z.length;h++){var q=Z[h],k=(Z[h+1])?Z[h+1]:false;try{var X=E.trim(q.time).toLowerCase();X=(X.charAt(X.indexOf("m")-2)!==" ")?X.replace("pm"," pm").replace("am"," am"):X;var a=new Date(s.now.date+" "+X),r=parseInt(a.getHours()+""+((a.getMinutes()<10)?"0"+a.getMinutes():a.getMinutes()),10);if(k){var Y=E.trim(k.time).toLowerCase();Y=(Y.charAt(Y.indexOf("m")-2)!==" ")?Y.replace("pm"," pm").replace("am"," am"):Y;var V=new Date(s.now.date+" "+Y),T=parseInt(V.getHours()+""+((V.getMinutes()<10)?"0"+V.getMinutes():V.getMinutes()),10);if(f>=r&&f<T){U(h);break;}}else{U(h,true);break;}}catch(b){H("[head.onAir] Error: "+b);}}},renderOnAirCarousel:function(Y,X){var U=this,T=this.root,V=Y;var W=function(){var h=T.headObj.onAir.find("> .content > .slideshow");var d=[],b=V.length;for(var a=0;a<b;a++){var g=V[a],Z=(a===0)?true:false,f=(a+1===b)?true:false,e=(Z)?" section-first":(f)?" section-last":"";d.push('<li class="section'+e+'">');d.push('<p class="media"><a href="'+g.link+'"><img alt="'+g.title+'" pre-src="'+g.img+'" src="http://global.fncstatic.com/static/v/all/img/clear.gif"></a></p>');d.push('<h3><a href="'+g.link+'">'+g.title+"</a></h3>");d.push('<p class="time"><span>'+g.day+"</span> "+g.time+"</p></li>");}h.html("<ul>"+d.join("")+"</ul>");};W();if(typeof X==="function"){X();}},carousel:function(){var U=this.root,V=U.headObj.onAir.children(".content");var T={elm:V,slide:"horizontal",scroll:5,speed:1200,show:5,rotate:false};function W(Z){var X,Y=[];for(X=1;X<=Z.batch.max;X++){Y.push('<li><a href="#">&nbsp;</a></li>');}return Y.join("");}T.elm.each(function(Z){var Y=0,b=E(this);if(b.data("carousel_initialized")){return false;}var a=b.find("ol");var d={prev:b.find(".prev"),next:b.find(".next"),first:b.find(".first-page"),last:b.find(".last-page")};var X={auto:{set:false,speed:3000},slide:T.slide,scroll:T.scroll,show:T.show,speed:T.speed,rotate:T.rotate,eventCallback:function(e){if(e.event==="init"){Y=e.batch.max;a.html(W(e));a.children(":first").addClass("active");b.data("carousel_initialized",true);}else{a.children().each(function(f){E(this).toggleClass("active",function(){return(f+1===e.batch.current)?true:false;});});}if(e.batch.current===1){d.prev.addClass("inactive-prev");d.first.addClass("inactive-first");}else{d.prev.removeClass("inactive-prev");d.first.removeClass("inactive-first");}if(e.batch.current===e.batch.max){d.next.addClass("inactive-next");d.last.addClass("inactive-last");}else{d.next.removeClass("inactive-next");d.last.removeClass("inactive-last");}},controlsCallback:function(e){a.children().find("a").each(function(f){E(this).click(function(){e.stopAutoScroll();e.scrollToBatch(f+1);return false;});});d.first.click(function(){e.stopAutoScroll();e.scrollToItem(1);return false;});d.prev.click(function(){e.stopAutoScroll();e.slide("prev");return false;});d.next.click(function(){e.stopAutoScroll();e.slide("next");return false;});d.last.click(function(){e.stopAutoScroll();e.scrollToItem(Y);return false;});}};if(typeof E.fn.jfoxCarousel!=="undefined"){b.jfoxCarousel(X);}else{E(document).ready(function(){b.jfoxCarousel(X);});}});},setCarouselListeners:function(){var a=this.root,U=a.headObj.primaryNav,T=U.children("ul:first").children("li.on-air"),W=a.headObj.onAir,d=W.css("height").replace("px",""),V=P.onAir.hideDelay;var Z={close:T.find("img").filter(function(){return(E(this).attr("src").indexOf("close.png")>-1)?true:false;}),open:T.find("img").filter(function(){return(E(this).attr("src").indexOf("plus.png")>-1)?true:false;})};function Y(){var e=W.find(".slideshow > ul > li");e.each(function(){var g=E(this),j=g.find("> .media img"),h=j.attr("pre-src"),f=new Image();if(h&&!j.data("preloaded")){f.onload=function(){j.attr("src",h);};f.src=h;j.data("preloaded",true);}});}function X(){W.data("isRendering",true);W.data("hidden",true);W.animate({height:"0px",opacity:"0"},V,"swing",function(){W.css({display:"none"}).data("isRendering",false);});Z.close.hide();Z.open.show();T.removeClass("active");}function b(){if(!W.data("initToFirst")){W.data("initToFirst",true);W.find("p.controls > a.prev").click();}W.data("isRendering",true);W.data("hidden",false);W.css("display","block");W.animate({height:d,opacity:"1"},V,"swing",function(){W.data("isRendering",false);});Z.close.show();Z.open.hide();T.addClass("active");}Z.close.hide();W.css({height:"0px",opacity:"0"}).data("hidden",true);T.find("a").click(function(){Y();if(W.data("isRendering")){return false;}if(W.data("hidden")){b();}else{X();}return false;});}};return S;}());var K=(function(){var S=function(U){this.root=U;this.render=new T(this);this.set();};S.prototype={set:function(){var V=this,U=this.root;if(U.headObj.headlines.size()===0){return false;}window[P.feed.whatsHotLive.feedFunction]=function(W){V.render.set(W);};U.feeds.whatsHotLive();}};var T=function(U){this.main=this;this.root=U.root;};T.prototype={set:function(a){var W=this.root,V=W.headObj.headlines;var Y=this.hot({title:"Full Coverage",feed:a.whatshot,len:P.feed.whatsHotLive.show.hot});var b=this.live({title:"Watch Live",feed:a.watchlive,len:P.feed.whatsHotLive.show.live});if(typeof a.whatshot!=="undefined"){if(a.whatshot.length===0){return false;}var X=E('<dl class="first"></dl>');X.append(Y).children("dd:first").addClass("first");V.html(X);}if(typeof a.watchlive!=="undefined"){if(a.watchlive.length===0){return false;}var Z=E("<dl></dl>");Z.append(b).children("dd:first").addClass("first");V.append(Z);var U=V.children("dl:nth-child(2)");if(a.watchlive.length>P.feed.whatsHotLive.show.live){this.rotate(U);}else{U.children("dd").css("display","inline");}}},hot:function(W){if(typeof W.feed==="undefined"){return false;}W.len=W.len||W.feed.length;var V,U=[];if(W.len>0){U.push("<dt>"+W.title+"</dt>");for(V=0;V<W.feed.length;V++){var Y=W.feed[V],X=(V>=W.len)?' style="display:none;"':"";U.push("<dd"+X+'><a href="'+Y.link+'">'+Y.title+"</a></dd>");}}return E(U.join(""));},live:function(W){if(typeof W.feed==="undefined"){return false;}W.len=W.len||W.feed.length;var V,U=[];if(W.len>0){U.push("<dt>"+W.title+"</dt>");for(V=0;V<W.feed.length;V++){var Y=W.feed[V],X=(V>=W.len)?' style="display:none;"':"";U.push("<dd"+X+'><a href="'+Y.link+'">'+Y.title+"</a></dd>");}}return E(U.join(""));},rotate:function(Z){var a=Z.children("dd"),b=Z.children("dt:first"),V=a.size(),Y=P.feed.whatsHotLive.fade;if(V===0){return false;}var U=P.feed.whatsHotLive.rotate*1000;if(Y.use){U=U+Y.delay;}var W=false;a.each(function(e){var f=E(this);f.addClass("first");f.css("display",(e===0)?"inline":"none");if(e===0){f.data("rotateNumber",e+1);}});if(!Z.data("rotateNumber")){Z.data("rotateNumber",1);}function X(f){f=f||false;var e=Z.data("rotateNumber")+1;e=(e>V)?1:e;Z.data("rotateNumber",e);a.each(function(g){var j=E(this),h=g+1;if(!Y.use||f==="click"){j.css("display",(h===e)?"inline":"none");}else{if(h===e){j.fadeIn(Y.delay);}else{j.hide();}}});}function d(){clearInterval(W);W=setInterval(function(){X();},U);}d();b.css("cursor","pointer").click(function(){X("click");});Z.hover(function(){clearInterval(W);},function(){d();});}};return S;}());var G=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){var T=this;E("#headlines .dv-list:first").each(function(){T.trigger(E(this));});},trigger:function(W){var T=this,V="fox_header_whatshot",U="http://global.fncstatic.com/static/all/generated/js/fb2-whatshot.js";window[V]=function(X){T.render(X,W);};(function(){var Y=document,X=Y.createElement("script");X.src=U;X.async=true;(Y.getElementsByTagName("head")[0]||Y.getElementsByTagName("body")[0]).appendChild(X);}());},render:function(Y,Z){if(!Y&&!Y.length){return false;}var V,U=[],T=Y.length;U.push("<h2>What's Hot</h2><ul>");for(V=0;V<T;V++){var X=Y[V],W=(V===0)?" dv-item-first":(V===T-1)?" dv-item-last":"";U.push('<li class="dv-item'+W+'">');U.push('<a href="'+X.link+'">'+X.title+"</a>");U.push("</li>");}U.push("</ul>");Z.html(U.join(""));}};return S;}());var O=(function(){var S=function(T){this.root=T;};S.prototype={whatsHotLive:function(){this.get.append({url:P.feed.whatsHotLive.url});},onAir:function(){this.get.append({url:P.feed.onAir.url});},onAirCarousel:function(){this.get.append({url:P.feed.onAirCarousel.url});},get:{append:function(T){(function(){var U=document.createElement("script");U.src=T.url;U.async=true;E("head").get(0).appendChild(U);}());},json:function(T){E.ajax({type:"GET",url:T.url,data:T.query,success:function(U){if(T.callback){T.callback(U);}}});}}};return S;}());var A=(function(){var U=function(V){this.root=V;this.set();};U.prototype={set:function(){var V=this;switch(Q){case"fn":T();break;case"fb":S();break;}}};var T=function(){E("#search-site").each(function(){RAMP_AutoComplete.init();E("#box1").focus(function(){if(E(this).val()!==""){E(this).val("");}});});};var S=function(){var V=E("form#searchArea");if(V.size()===0){V=E("#search-site").parent();}V.each(function(){var Y=E(this);var W=Y.find("input[type='text']");var Z=Y.find("input[type='image'],input[type='submit']");var X=W.attr("value");W.attr({name:"q",onblur:"",onfocus:"",autocomplete:"off"}).blur(function(){var a=E(this);var b=(a.attr("value").length>0)?a.attr("value"):X;a.attr("value",b);}).focus(function(){var a=E(this);var b=(a.attr("value").indexOf(X)>-1)?"":a.attr("value");a.attr("value",b);});IDC_quoteComplete.init();});};return U;}());B.prototype.helper={getQueryStr:function(X){var V=(window.location.search).substr(1);if(V.length>0){var S,W=V.split("&"),T={};for(S=0;S<W.length;S++){var U=W[S].split("=");T[U[0]]=U[1];}return(T[X])?T[X]:false;}return false;}};var H=function(S){if(window.console&&window.console.log){console.log(S);}};var M={isIE:function(){return E.browser.msie;},animate:function(T,S){if(!this.isIE()){if(!S.speed){S.speed=300;}if(!S.type){S.type="swing";}T.animate(S.css,S.speed,S.type,function(){if(S.callback){S.callback();}});}else{T.css(S.css);T.css("opacity","");if(S.callback){S.callback();}}},hide:function(V,S){if(!V){return false;}var T,U={opacity:"0"};if(S.css){for(T in S.css){if(S.css.hasOwnProperty(T)){U[T]=S.css[T];}}}S.css=U;this.animate(V,S);},show:function(V,S){if(!V){return false;}var T,U={opacity:"1"};if(S.css){for(T in S.css){if(S.css.hasOwnProperty(T)){U[T]=S.css[T];}}}S.css=U;this.animate(V,S);}};var C=new B();(function(){var T=function(){E(document).ready(function(){C.init();});};try{if(window.FOX&&FOX.site&&typeof FOX.site.bottomInit==="function"){var S=FOX.site.bottomInit;FOX.site.bottomInit=function(){C.init();S();};}else{if(window.FOX_HP&&FOX_HP.site.OnPageReady){FOX_HP.site.OnPageReady(function(){C.init();});}else{T();}}}catch(U){T();}}());var N=window.siteStreamFlashPlayer=function(T,S){var b=(typeof T==="undefined")?1:T,Y=(typeof S==="undefined")?"foxnews":S,a=850,W=506,U=(screen.width-a)/2,Z=(screen.height-W)/2,V="height="+W+",width="+a+",top="+Z+",left="+U+",toolbar=no,location=no,scrollbars=no,status=no,resizable=no,fullscreen=no",X=window.open("http://interactive."+Y+".com/livestream/live.html?chanId="+b+"&openAIR=true","livePlayer",V);X.focus();};var F=window.siteStreamLivePlayer=function(X){var S=914,T=419,W=(screen.width-S)/2,V=(screen.height-T)/2;url="http://video.foxnews.com/video-live-streaming.html",settings="height="+T+",width="+S+",top="+V+",left="+W+",toolbar=no,location=no,scrollbars=no,status=no,resizable=no,fullscreen=no",url=url+((X&&!isNaN(X))?"?video_id="+X:"");var U=window.open(url,"LivePlayer",settings);U.focus();};var L=window.FOX_isMnt=function(){var S=false,U=window.CONST_Akamai_TIME||false;try{if(U.yr==="2011"&&U.mm==="11"&&(U.dd==="05"||U.dd==="06")){S=true;}else{if(U.yr==="2011"&&U.mm==="11"&&U.dd==="04"&&parseInt(U.hr,10)>=17){S=true;}}}catch(T){}return S;};}(jQuery));(function(A){A(document).ready(function(){var B=A("#section-footer a[rel*='external']");if(window.FOX&&FOX.utils&&FOX.utils.extLink){FOX.utils.extLink.set(B);}else{B.each(function(){var D=A(this),E=A.trim(D.attr("href")||""),C=A.trim(D.attr("rel")||"");if(E.length>0&&E!=="#"){C=(C.indexOf("external")>-1)?C:[C,"external"].join(" ");C=A.trim([C,"ext-linked"].join(" "));D.attr("rel",C);D.click(function(){window.open(E,"_blank");return false;});if(!D.attr("target")){D.attr("target","_blank");}}});}});}(jQuery));window.RAMP_AutoComplete=(function(A){window.RampAutoComplete=function(){var B=this;B._serviceUrl="http://www.foxnews.com/search-results/autocomplete/foxnews";B._searchUrl="http://www.foxnews.com/search-results/search/?";B._searchTimer=null;B._fetchData=function(){var C="FOX_handleRamp";var D=(function(){var E=A.trim(B._searchBox[0].value||"");E=E.replace(/\s+/gi," ");return E;}());if(D.length===0||B._prevInputStr===D){return false;}B._prevInputStr=D;if(!window[C]){window[C]=function(E){B.handleRampFox(E);};}A.ajax({type:"GET",url:B._serviceUrl,data:{q:encodeURIComponent(D),callbackName:C},dataType:"script",async:true,cache:true});};};RampAutoComplete.prototype={init:function(){var B=this;B._searchBox=A("input#box1");B._listBox=A("div#list1");B.handleInput();},handleRampFox:function(D){var J=this,F=D.ac.q;var G='<div class="search-drop">';G+="<ul>";if(F.length>0){J._listBox.css("display","block");}else{J._listBox.css("display","none");}for(var E=0;E<F.length;E+=1){var C=J._searchBox[0].value.toLowerCase();var B=(E%2)==0?'class="odd"':"";var H=J._searchUrl+"q="+encodeURIComponent(F[E]).replace(/\s/g,"+").replace(/%20/g,"+");var I=F[E].replace(C,C.bold());G+="<li "+B+'><a href="'+H+'">'+I+"</a></li>";}G+="</ul>";G+="</div>";J._listBox.each(function(){this.innerHTML=G;});},handleInput:function(){var B=this;B._searchBox.attr("autocomplete","off");var C=false;B._listBox.hover(function(){C=true;},function(){C=false;});A("body").click(function(){if(!C){B._listBox.hide();}});B._listBox.mouseover(function(){A("li").removeClass("selectedRamp");});B._searchBox.bind("keydown",function(D){var N=A("li.selectedRamp",B._listBox)||null,G=N.index()||0,E=A("div.search-drop li:last-child")||null,F=A("div.search-drop").height()||0,I=N?N.height():0,K=E?E.height():0,M=N?N.position():0,L=E?E.position():0,H=function(P){return parseInt(P,10);};var O=38,J=40;if(D.keyCode==O||D.keyCode==J){if(N.length>0){if(D.keyCode==O){N=N.prev();N.focus();if(M.top>0&&M.top<=100){A("div.search-drop").scrollTop(0);}if(M.top===0){A("div.search-drop").scrollTop(H(L.top));}}else{N=N.next();N.focus();if((M.top+I)>=176&&M.top<=H(L.top)){A("div.search-drop").scrollTop(H(M.top)+H(I));}if(M.top>=H(L.top)){A("div.search-drop").scrollTop(0);}}}if(N.length===0){if(D.keyCode==O){N=A("li:last-child",B._listBox);A("div.search-drop").scrollTop(H(L.top));}else{N=A("li:first-child",B._listBox);A("div.search-drop").scrollTop(0);}}B._listBox.css("display","block");N.addClass("selectedRamp").siblings().removeClass("selectedRamp");B._searchBox[0].value=A(N[0]).text();}else{if(B._searchTimer!==null){clearTimeout(B._searchTimer);}B._searchTimer=setTimeout(B._fetchData,300);}});}};return(new RampAutoComplete());}(jQuery));window.IDC_quoteComplete=(function(B){var A={index:-1,totalResults:0,results:false,resultsDiv:"search-results",field:"#search",url:"http://interactive.foxbusiness.com/projects/autocomplete/autocomplete.json",action:"http://interactive.foxbusiness.com/projects/autocomplete/intercept.html?q=",quoteUrl:"http://quote.foxbusiness.com/?searchString=",defaultText:"Search quotes, news and video",reset:function(){B("."+A.resultsDiv).html("");A.results=false;A.index=-1;},init:function(){B(A.field).focus(function(){if(B(this).val()===A.defaultText){B(this).val("");}A.reset();});B(A.field).blur(function(D){if(B(this).val()===""){B(this).val(A.defaultText);}setTimeout(function(){A.reset();},500);});B(A.field).parents("form").submit(function(){if(A.index>-1){B(A.field).val(B("#search_drop_overlay ul li:eq("+A.index+") a span.ticker").text());}if(A.index>-1){A.action=A.quoteUrl;}A.action+=encodeURIComponent(B(A.field).val());if(A.index>-1){A.reset();}document.location=A.action;return false;});var C="FOX_IDC_QuoteResponse";window[C]=function(D){A.response(D);};B(A.field).keyup(function(D){if((D.keyCode>=65&&D.keyCode<=90)||(D.keyCode>=97&&D.keyCode<=122)||D.keyCode===8){A.index=-1;var E=B(A.field).val();B("."+A.resultsDiv).html("");if(E!==""){B.getJSON(A.url+"?q="+E+"&callback="+C+"&jsonp=?");A.results=true;}else{A.results=false;}}else{if(D.keyCode===40||D.keyCode===38){if(A.results){B("#search_drop_overlay ul li:eq("+A.index+")").removeClass("selected");B("#search_drop_overlay ul li a:eq("+A.index+")").removeClass("selected");if(D.keyCode===40){if(A.index<(A.totalResults-1)){A.index++;}else{A.index=0;}}else{if(A.index>0){A.index--;}else{A.index=A.totalResults-1;}}B("#search_drop_overlay ul li:eq("+A.index+")").addClass("selected");B("#search_drop_overlay ul li a:eq("+A.index+")").addClass("selected");}}else{if(D.keyCode===27){A.reset();}}}});B(A.field).parents("form").after('<div class="'+A.resultsDiv+'"></div>');},response:function(D){var C="";var E=B(A.field).val();if(D!==""){A.totalResults=B(D).size();C+="<ul>";B.each(D,function(I,M){var J=new RegExp(E,"i");var L=this.s.search(J);var F=this.n.search(J);var G=L>-1?this.s.replace(J,"<strong>"+this.s.slice(L,(L+E.length))+"</strong>"):this.s;var H=F>-1?this.n.replace(J,"<strong>"+this.n.slice(F,(F+E.length))+"</strong>"):this.n;var K=this.s;C+='<li><a href="'+A.quoteUrl+K+'"><span class="ticker">'+G+'</span><span class="corporation">'+H+"</span></a></li>";});C+="</ul>";}else{A.totalResults=0;C="<p>No suggestions available</p>";}B("."+A.resultsDiv).html('<div id="search_drop_overlay" class="search_drop_overlay"><div class="search_drop_top">&nbsp;</div><div class="search_drop_list">'+C+'<div class="clearflatgray"></div><div class="search_drop_link1"><a href="'+A.action+E+'">Search for News &amp; Videos "<strong>'+E.toUpperCase()+'</strong>"</a></div></div><div class="search_drop_bottom"></div></div>');A.initMouseEvents();},initMouseEvents:function(){B("."+A.resultsDiv+" ul li").mouseover(function(){if(A.index>-1){B("."+A.resultsDiv+" ul li:eq("+A.index+")").removeClass("selected");}B(this).addClass("selected");});B("."+A.resultsDiv+" ul li").mouseout(function(){B(this).removeClass("selected");});B("."+A.resultsDiv+" ul li a").mouseover(function(){if(A.index>-1){B("."+A.resultsDiv+" ul li a:eq("+A.index+")").removeClass("selected");}B(this).addClass("selected");});B("."+A.resultsDiv+" ul li a").mouseout(function(){B(this).removeClass("selected");});}};return A;})(jQuery);(function(F){function I(){this._speed="slow";this._scrollTo=this._scroll=1;this._scrollType="relative";this._rotate=true;this._auto={set:false,resume:false,speed:5000};this._focus={item:0,animate:false};this._slide=this._show=null;this.cloneClass="item-clone";this.isAutoScroll=this._auto.set;this.isAutoScrollResume=this._auto.resume;this.autoSpeed=this._auto.speed;this.minAutoSpeed=3000;this.targetItem=this.currentCount=0;this.scrollBatch=1;this.timeout=null;this.triggered=this.isItemCountOK=this.isLastBatch=false;this._eventCallback=function(){};this.carouselInfoObj={};}function E(){}function J(A){typeof window.console==="object"&&console.log(A);}function H(){J("[init] error initializing carousel.");return false;}if(typeof jQuery.fn.jfoxCarousel!=="undefined"){J("[jfoxCarousel] Already initialized.");return false;}jQuery.fn.jfoxCarousel=function(A){if(!A){return false;}if(!A.slide||!A.show){return false;}return this.each(function(){var B=new I;B.init(F(this),A);return B;});};var D={holder:"slideshow",control:"controls"};I.prototype={init:function(C,A){function B(N){var T,P,Q,S,O,R=0;K.find("ul:first").children().each(function(){var X=F(this),W=G.getCSSDimension("margin",this,true),U=G.getCSSDimension("padding",this,true),V=G.getCSSDimension("border",this,true);T=G.format(G.getCSSDimension(N,this));if(N==="width"){P=W.Left+W.Right;Q=U.Left+U.Right;S=V.Left+V.Right;O=X.outerWidth(true);}else{P=W.Top+W.Bottom;Q=U.Top+U.Bottom;S=V.Top+V.Bottom;O=X.outerHeight(true);}X=T+P+Q+S;X=O>X?O:X;if(X>R){R=X;}});return R;}for(i in A){if(i==="auto"||i==="focus"){var M=A[i];for(p in this["_"+i]){if(M[p]){this["_"+i][p]=M[p];}}}else{if(i==="identifier"){for(c in D){if(A[i][c]){D[c]=A[i][c];}}}else{this["_"+i]=A[i];}}}this.obj=C;this.slideshowObj=F(this.obj).find("div."+D.holder);this.controlObj=F(this.obj).find("[class*='"+D.control+"']");var K=this.slideshowObj;if(F(this.slideshowObj).size()<1||this._slide!=="vertical"&&this._slide!=="horizontal"){H();return false;}K.scrollLeft(0).scrollTop(0);this.holder={width:G.format(K.css("width")),height:G.format(K.css("height")),item:{count:K.find("ul:first").children().size(),width:B("width"),height:B("height")}};if(this.holder.item.count===0||this._slide==="horizontal"&&this.holder.item.width<=0||this._slide==="vertical"&&this.holder.item.height<=0){H();return false;}else{this.isItemCountOK=true;}if(this._scrollType==="absolute"){M=this.holder.item.count%this._scroll;if(M>0){var L=this._scroll-M;this.holder.item.count+=L;K.find("ul:first").each(function(){for(var N=[],P=F("<span></span>"),O=0;O<L;O++){N.push("<li>&nbsp;</li>");}P.append(N.join(""));P.children().each(function(){F(this).css("visibility","hidden");});F(this).append(P.children());});}}M=Math.ceil((this.holder.item.count-this._show)/this._scroll)+(this.holder.item.count-this._show%this._scroll>0?1:0);this.maxBatch=M<1?1:M;if(typeof this._speed==="string"){this._speed=F.fx.speeds[this._speed]?F.fx.speeds[this._speed]:F.fx.speeds.slow;}if(this._auto.set){this.isAutoScroll=G.checkBoolean(this._auto.set);}if(this._auto.resume){this.isAutoScrollResume=G.checkBoolean(this._auto.resume);}if(!isNaN(this._auto.speed)){this.autoSpeed=this._auto.speed<this.minAutoSpeed?this.minAutoSpeed:this._auto.speed;}this.autoSpeed+=this._speed;this._focus.item>0&&this.slide("scrollToItem",this._focus.item,this._focus.animate);this.setListeners();},setListeners:function(){var A=this;this._eventCallback(this.carouselInfoObj={event:"init",items:this.holder.item.count,target:0,scroll:this._scroll,start:1,end:this._show>this.holder.item.count?this.holder.item.count:this._show,batch:{current:1,max:this.maxBatch}});if(this._controlsCallback){this.externalControls=new E;this.externalControls.init(this);this._controlsCallback(this.externalControls);}else{this.isAutoScroll=this._auto.set?this._auto.set:true;this.isAutoScrollResume=this._auto.resume?this._auto.resume:true;}this.externalControls.scrollToItem(1);if(this.isAutoScroll&&this.isItemCountOK){this.slideshowObj.hover(function(){if(A.isAutoScroll){A.autoScroll.stop(A.timeout);A.isAutoScroll=false;A.carouselInfoObj.event="autoScrollStop";A._eventCallback(A.carouselInfoObj);}},function(){if(A.isAutoScrollResume){A.autoScroll.play(A);A.isAutoScroll=true;A.carouselInfoObj.event="autoScrollPlay";A._eventCallback(A.carouselInfoObj);}});this.autoScroll.play(A);}},slide:function(U,T,M){function C(){B.find("> li:last").each(function(){var X=F(this),Y=B.find("> li:first").clone().addClass(K).removeClass("first");F("<ul></ul>").html(Y).each(function(){for(var Z=2;Z<=O;Z++){F(this).append(B.find("> li:nth-child("+Z+")").clone().addClass(K));}X.after(F(this).children());});});var W=S._slide==="vertical"?{scrollTop:N.scrollTop()+O*R.height}:{scrollLeft:N.scrollLeft()+O*R.width};N.animate(W,S._speed,"swing",function(){S._slide==="vertical"?N.scrollTop(0):N.scrollLeft(0);B.find("[class*='"+K+"']").remove();S.triggered=false;});S.currentCount=0;S.scrollBatch=1;S.isLastBatch=false;S._eventCallback(S.carouselInfoObj={event:"scrollToFirst",items:R.count,target:0,scroll:S._scroll,start:1,end:S._show>R.count?R.count:S._show,batch:{current:1,max:S.maxBatch}});}function A(){B.find("> li:first").removeClass("first").each(function(){var W=F(this),X=R.count-S._show+1,Y=B.find("> li:nth-child("+X+")").clone().addClass(K+" first");F("<ul></ul>").html(Y).each(function(){for(var Z=X+1;Z<=R.count;Z++){F(this).append(B.find("> li:nth-child("+Z+")").clone().addClass("item-clone"));}W.before(F(this).children());S._slide==="vertical"?N.scrollTop(O*R.height):N.scrollLeft(O*R.width);});});N.animate(S._slide==="vertical"?{scrollTop:0}:{scrollLeft:0},S._speed,"swing",function(){B.find("[class*='"+K+"']").remove();B.find(":first").addClass("first");S._slide==="vertical"?N.scrollTop((R.count-O)*R.height):N.scrollLeft((R.count-O)*R.width);S.triggered=false;});S.currentCount=R.count-O;S.scrollBatch=S.maxBatch;S.isLastBatch=true;S._eventCallback(S.carouselInfoObj={event:"scrollToLast",items:R.count,target:0,scroll:S._scroll,start:R.count-O,end:R.count,batch:{current:S.maxBatch,max:S.maxBatch}});}T=T||false;M=typeof M==="undefined"||M===null?true:M;this.triggered=true;var S=this,L=this._scroll,R=this.holder.item,O=this._show,P=this.currentCount,Q=this.scrollBatch,N=this.slideshowObj,B=F("ul:first",N),K=this.cloneClass,V=0;if(U==="scrollToBatch"){if(!T||isNaN(T)){return ;}if(T<=1){Q=1;P=0;this.isLastBatch=false;}else{if(T>=this.maxBatch){Q=this.maxBatch;P=R.count-O;this.isLastBatch=true;}else{Q=T;P=L*(T-1);}}if(P===this.currentCount&&Q===this.scrollBatch){return ;}}else{if(U==="scrollToItem"){if(!T||isNaN(T)){return ;}if(T<=1){Q=1;P=0;V=1;this.isLastBatch=false;}else{if(T>=R.count){Q=this.maxBatch;P=R.count-O;V=R.count;this.isLastBatch=true;}else{Q=Math.ceil(T/L);if(Q>=this.maxBatch){Q=this.maxBatch;P=R.count-O;this.isLastBatch=true;}else{Q=Q;P=L*(Q-1);}V=T;}}if(P===this.currentCount&&Q===this.scrollBatch&&this.carouselInfoObj.target===T){return ;}}else{if(U==="next"){T=P+L;if(T+O>R.count){if(P+O===R.count&&this._rotate){C();return ;}P=R.count-O;this.isLastBatch=true;Q++;Q=Q>this.maxBatch?this.maxBatch:Q;}else{P=T;Q++;}}else{if(U==="prev"){T=P-L;if(T<0){P=0;Q--;if(Q<1&&this._rotate){A();return ;}else{if(Q<1){Q=1;}}}else{P=T;Q--;}}}}}this.scrollBatch=Q;this.currentCount=P;this._eventCallback(this.carouselInfoObj={event:U,items:R.count,target:V,scroll:this._scroll,start:P+1,end:P+O>R.count?R.count:P+O,batch:{current:this.scrollBatch,max:this.maxBatch}});U=P*(this._slide==="vertical"?R.height:R.width);if(M){N.animate(this._slide==="vertical"?{scrollTop:U}:{scrollLeft:U},S._speed,"swing",function(){S.triggered=false;});}else{this._slide==="vertical"?N.scrollTop(U):N.scrollLeft(U);S.triggered=false;}},autoScroll:{play:function(A){A.timeout=setInterval(function(){A.slide("next");},A.autoSpeed);},stop:function(A){clearInterval(A);}}};E.prototype={init:function(A){this.root=A;},scrollToBatch:function(){var C=arguments,A,B=true;if(typeof C[0]==="object"){A=C[0].batch;B=C[0].animate;}else{A=C[0];}this.root.slide("scrollToBatch",A,B);},scrollToItem:function(){var C=arguments,A,B=true;if(typeof C[0]==="object"){A=C[0].item;B=C[0].animate;}else{A=C[0];}this.root.slide("scrollToItem",A,B);},slide:function(A){if(this.root.isItemCountOK){this.root.triggered||this.root.slide(A);}},stopAutoScroll:function(){this.root.isAutoScrollResume=false;this.root.autoScroll.stop(this.root.timeout);},startAutoScroll:function(){this.root.autoScroll.play(this.root);}};var G={format:function(A){A=parseInt(A.replace(/[a-zA-z]/gi,""),10);return isNaN(A)?0:A;},checkBoolean:function(B){var A=false;if(typeof B==="string"&&B==="true"){A=true;}else{if(typeof B==="boolean"){A=B;}}return A;},getCSSDimension:function(K,B,C){if(!K){return false;}var N=["Top","Right","Bottom","Left"],L={};if(K==="margin"||K==="padding"||K==="border"){for(var M=0;M<N.length;M++){var A=F(B).css(K+N[M]);L[N[M]]=typeof A!=="undefined"?C?this.format(A):A:0;}return L;}return F(B).css(K);}};})(jQuery);jQuery.cookie=function(E,F,B){if(typeof F!="undefined"){B=B||{};if(F===null){F="";B.expires=-1;}var A="";if(B.expires&&(typeof B.expires=="number"||B.expires.toUTCString)){if(typeof B.expires=="number"){A=new Date;A.setTime(A.getTime()+B.expires*24*60*60*1000);}else{A=B.expires;}A="; expires="+A.toUTCString();}var D=B.path?"; path="+B.path:"",C=B.domain?"; domain="+B.domain:"";B=B.secure?"; secure":"";document.cookie=[E,"=",encodeURIComponent(F),A,D,C,B].join("");}else{F=null;if(document.cookie&&document.cookie!=""){B=document.cookie.split(";");for(A=0;A<B.length;A++){D=jQuery.trim(B[A]);if(D.substring(0,E.length+1)==E+"="){F=decodeURIComponent(D.substring(E.length+1));break;}}}return F;}};(function(A){A.extend(A.fn,{validate:function(B){if(!this.length){B&&B.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return ;}var C=A.data(this[0],"validator");if(C){return C;}C=new A.validator(B,this[0]);A.data(this[0],"validator",C);if(C.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){C.cancelSubmit=true;});this.submit(function(D){if(C.settings.debug){D.preventDefault();}function E(){if(C.settings.submitHandler){C.settings.submitHandler.call(C,C.currentForm);return false;}return true;}if(C.cancelSubmit){C.cancelSubmit=false;return E();}if(C.form()){if(C.pendingRequest){C.formSubmitted=true;return false;}return E();}else{C.focusInvalid();return false;}});}return C;},valid:function(){if(A(this[0]).is("form")){return this.validate().form();}else{var C=false;var B=A(this[0].form).validate();this.each(function(){C|=B.element(this);});return C;}},removeAttrs:function(D){var B={},C=this;A.each(D.split(/\s/),function(E,F){B[F]=C.attr(F);C.removeAttr(F);});return B;},rules:function(E,B){var G=this[0];if(E){var D=A.data(G.form,"validator").settings;var I=D.rules;var J=A.validator.staticRules(G);switch(E){case"add":A.extend(J,A.validator.normalizeRule(B));I[G.name]=J;if(B.messages){D.messages[G.name]=A.extend(D.messages[G.name],B.messages);}break;case"remove":if(!B){delete I[G.name];return J;}var H={};A.each(B.split(/\s/),function(K,L){H[L]=J[L];delete J[L];});return H;}}var F=A.validator.normalizeRules(A.extend({},A.validator.metadataRules(G),A.validator.classRules(G),A.validator.attributeRules(G),A.validator.staticRules(G)),G);if(F.required){var C=F.required;delete F.required;F=A.extend({required:C},F);}return F;}});A.extend(A.expr[":"],{blank:function(B){return !A.trim(B.value);},filled:function(B){return !!A.trim(B.value);},unchecked:function(B){return !B.checked;}});A.format=function(B,C){if(arguments.length==1){return function(){var D=A.makeArray(arguments);D.unshift(B);return A.format.apply(this,D);};}if(arguments.length>2&&C.constructor!=Array){C=A.makeArray(arguments).slice(1);}if(C.constructor!=Array){C=[C];}A.each(C,function(D,E){B=B.replace(new RegExp("\\{"+D+"\\}","g"),E);});return B;};A.validator=function(B,C){this.settings=A.extend({},A.validator.defaults,B);this.currentForm=C;this.init();};A.extend(A.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",errorElement:"label",focusInvalid:true,errorContainer:A([]),errorLabelContainer:A([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(B){this.lastActive=B;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,B,this.settings.errorClass);this.errorsFor(B).hide();}},onfocusout:function(B){if(!this.checkable(B)&&(B.name in this.submitted||!this.optional(B))){this.element(B);}},onkeyup:function(B){if(B.name in this.submitted||B==this.lastElement){this.element(B);}},onclick:function(B){if(B.name in this.submitted){this.element(B);}},highlight:function(C,B){A(C).addClass(B);},unhighlight:function(C,B){A(C).removeClass(B);}},setDefaults:function(B){A.extend(A.validator.defaults,B);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",dateDE:"Bitte geben Sie ein gültiges Datum ein.",number:"Please enter a valid number.",numberDE:"Bitte geben Sie eine Nummer ein.",digits:"Please enter only digits",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:A.format("Please enter no more than {0} characters."),minlength:A.format("Please enter at least {0} characters."),rangelength:A.format("Please enter a value between {0} and {1} characters long."),range:A.format("Please enter a value between {0} and {1}."),max:A.format("Please enter a value less than or equal to {0}."),min:A.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=A(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||A(this.currentForm);this.containers=A(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var B=(this.groups={});A.each(this.settings.groups,function(E,F){A.each(F.split(/\s/),function(H,G){B[G]=E;});});var D=this.settings.rules;A.each(D,function(E,F){D[E]=A.validator.normalizeRule(F);});function C(F){var E=A.data(this[0].form,"validator");E.settings["on"+F.type]&&E.settings["on"+F.type].call(E,this[0]);}A(this.currentForm).delegate("focusin focusout keyup",":text, :password, :file, select, textarea",C).delegate("click",":radio, :checkbox",C);if(this.settings.invalidHandler){A(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);}},form:function(){this.checkForm();A.extend(this.submitted,this.errorMap);this.invalid=A.extend({},this.errorMap);if(!this.valid()){A(this.currentForm).triggerHandler("invalid-form",[this]);}this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var B=0,C=(this.currentElements=this.elements());C[B];B++){this.check(C[B]);}return this.valid();},element:function(C){C=this.clean(C);this.lastElement=C;this.prepareElement(C);this.currentElements=A(C);var B=this.check(C);if(B){delete this.invalid[C.name];}else{this.invalid[C.name]=true;}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}this.showErrors();return B;},showErrors:function(C){if(C){A.extend(this.errorMap,C);this.errorList=[];for(var B in C){this.errorList.push({message:C[B],element:this.findByName(B)[0]});}this.successList=A.grep(this.successList,function(D){return !(D.name in C);});}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if(A.fn.resetForm){A(this.currentForm).resetForm();}this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(D){var C=0;for(var B in D){C++;}return C;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{A(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus();}catch(B){}}},findLastActive:function(){var B=this.lastActive;return B&&A.grep(this.errorList,function(C){return C.element.name==B.name;}).length==1&&B;},elements:function(){var C=this,B={};return A([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&C.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in B||!C.objectLength(A(this).rules())){return false;}B[this.name]=true;return true;});},clean:function(B){return A(B)[0];},errors:function(){return A(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=A([]);this.toHide=A([]);this.formSubmitted=false;this.currentElements=A([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(B){this.reset();this.toHide=this.errorsFor(B);},check:function(C){C=this.clean(C);if(this.checkable(C)){C=this.findByName(C.name)[0];}var G=A(C).rules();var D=false;for(method in G){var F={method:method,parameters:G[method]};try{var B=A.validator.methods[method].call(this,C.value.replace(/\r/g,""),C,F.parameters);if(B=="dependency-mismatch"){D=true;continue;}D=false;if(B=="pending"){this.toHide=this.toHide.not(this.errorsFor(C));return ;}if(!B){this.formatAndAdd(C,F);return false;}}catch(E){this.settings.debug&&window.console&&console.log("exception occured when checking element "+C.id+", check the '"+F.method+"' method");throw E;}}if(D){return ;}if(this.objectLength(G)){this.successList.push(C);}return true;},customMetaMessage:function(B,D){if(!A.metadata){return ;}var C=this.settings.meta?A(B).metadata()[this.settings.meta]:A(B).metadata();return C&&C.messages&&C.messages[D];},customMessage:function(C,D){var B=this.settings.messages[C];return B&&(B.constructor==String?B:B[D]);},findDefined:function(){for(var B=0;B<arguments.length;B++){if(arguments[B]!==undefined){return arguments[B];}}return undefined;},defaultMessage:function(B,C){return this.findDefined(this.customMessage(B.name,C),this.customMetaMessage(B,C),!this.settings.ignoreTitle&&B.title||undefined,A.validator.messages[C],"<strong>Warning: No message defined for "+B.name+"</strong>");},formatAndAdd:function(B,D){var C=this.defaultMessage(B,D.method);if(typeof C=="function"){C=C.call(this,D.parameters,B);}this.errorList.push({message:C,element:B});this.errorMap[B.name]=C;this.submitted[B.name]=C;},addWrapper:function(B){if(this.settings.wrapper){B=B.add(B.parents(this.settings.wrapper));}return B;},defaultShowErrors:function(){for(var C=0;this.errorList[C];C++){var B=this.errorList[C];this.settings.highlight&&this.settings.highlight.call(this,B.element,this.settings.errorClass);this.showLabel(B.element,B.message);}if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}if(this.settings.success){for(var C=0;this.successList[C];C++){this.showLabel(this.successList[C]);}}if(this.settings.unhighlight){for(var C=0,D=this.validElements();D[C];C++){this.settings.unhighlight.call(this,D[C],this.settings.errorClass);}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return A(this.errorList).map(function(){return this.element;});},showLabel:function(C,D){var B=this.errorsFor(C);if(B.length){B.removeClass().addClass(this.settings.errorClass);B.attr("generated")&&B.html(D);}else{B=A("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(C),generated:true}).addClass(this.settings.errorClass).html(D||"");if(this.settings.wrapper){B=B.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}if(!this.labelContainer.append(B).length){this.settings.errorPlacement?this.settings.errorPlacement(B,A(C)):B.insertAfter(C);}}if(!D&&this.settings.success){B.text("");typeof this.settings.success=="string"?B.addClass(this.settings.success):this.settings.success(B);}this.toShow=this.toShow.add(B);},errorsFor:function(B){return this.errors().filter("[for='"+this.idOrName(B)+"']");},idOrName:function(B){return this.groups[B.name]||(this.checkable(B)?B.name:B.id||B.name);},checkable:function(B){return/radio|checkbox/i.test(B.type);},findByName:function(B){var C=this.currentForm;return A(document.getElementsByName(B)).map(function(D,E){return E.form==C&&E.name==B&&E||null;});},getLength:function(C,B){switch(B.nodeName.toLowerCase()){case"select":return A("option:selected",B).length;case"input":if(this.checkable(B)){return this.findByName(B.name).filter(":checked").length;}}return C.length;},depend:function(C,B){return this.dependTypes[typeof C]?this.dependTypes[typeof C](C,B):true;},dependTypes:{"boolean":function(C,B){return C;},string:function(C,B){return !!A(C,B.form).length;},"function":function(C,B){return C(B);}},optional:function(B){return !A.validator.methods.required.call(this,A.trim(B.value),B)&&"dependency-mismatch";},startRequest:function(B){if(!this.pending[B.name]){this.pendingRequest++;this.pending[B.name]=true;}},stopRequest:function(B,C){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0;}delete this.pending[B.name];if(C&&this.pendingRequest==0&&this.formSubmitted&&this.form()){A(this.currentForm).submit();}else{if(!C&&this.pendingRequest==0&&this.formSubmitted){A(this.currentForm).triggerHandler("invalid-form",[this]);}}},previousValue:function(B){return A.data(B,"previousValue")||A.data(B,"previousValue",previous={old:null,valid:true,message:this.defaultMessage(B,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(B,C){B.constructor==String?this.classRuleSettings[B]=C:A.extend(this.classRuleSettings,B);},classRules:function(C){var D={};var B=A(C).attr("class");B&&A.each(B.split(" "),function(){if(this in A.validator.classRuleSettings){A.extend(D,A.validator.classRuleSettings[this]);}});return D;},attributeRules:function(C){var E={};var B=A(C);for(method in A.validator.methods){var D=B.attr(method);if(D){E[method]=D;}}if(E.maxlength&&/-1|2147483647|524288/.test(E.maxlength)){delete E.maxlength;}return E;},metadataRules:function(B){if(!A.metadata){return{};}var C=A.data(B.form,"validator").settings.meta;return C?A(B).metadata()[C]:A(B).metadata();},staticRules:function(C){var D={};var B=A.data(C.form,"validator");if(B.settings.rules){D=A.validator.normalizeRule(B.settings.rules[C.name])||{};}return D;},normalizeRules:function(C,B){A.each(C,function(F,E){if(E===false){delete C[F];return ;}if(E.param||E.depends){var D=true;switch(typeof E.depends){case"string":D=!!A(E.depends,B.form).length;break;case"function":D=E.depends.call(B,B);break;}if(D){C[F]=E.param!==undefined?E.param:true;}else{delete C[F];}}});A.each(C,function(D,E){C[D]=A.isFunction(E)?E(B):E;});A.each(["minlength","maxlength","min","max"],function(){if(C[this]){C[this]=Number(C[this]);}});A.each(["rangelength","range"],function(){if(C[this]){C[this]=[Number(C[this][0]),Number(C[this][1])];}});if(A.validator.autoCreateRanges){if(C.min&&C.max){C.range=[C.min,C.max];delete C.min;delete C.max;}if(C.minlength&&C.maxlength){C.rangelength=[C.minlength,C.maxlength];delete C.minlength;delete C.maxlength;}}if(C.messages){delete C.messages;}return C;},normalizeRule:function(C){if(typeof C=="string"){var B={};A.each(C.split(/\s/),function(){B[this]=true;});C=B;}return C;},addMethod:function(B,D,C){A.validator.methods[B]=D;A.validator.messages[B]=C;if(D.length<3){A.validator.addClassRules(B,A.validator.normalizeRule(B));}},methods:{required:function(D,C,E){if(!this.depend(E,C)){return"dependency-mismatch";}switch(C.nodeName.toLowerCase()){case"select":var B=A("option:selected",C);return B.length>0&&(C.type=="select-multiple"||(A.browser.msie&&!(B[0].attributes.value.specified)?B[0].text:B[0].value).length>0);case"input":if(this.checkable(C)){return this.getLength(D,C)>0;}default:return A.trim(D).length>0;}},remote:function(F,C,G){if(this.optional(C)){return"dependency-mismatch";}var D=this.previousValue(C);if(!this.settings.messages[C.name]){this.settings.messages[C.name]={};}this.settings.messages[C.name].remote=typeof D.message=="function"?D.message(F):D.message;G=typeof G=="string"&&{url:G}||G;if(D.old!==F){D.old=F;var B=this;this.startRequest(C);var E={};E[C.name]=F;A.ajax(A.extend(true,{url:G,mode:"abort",port:"validate"+C.name,dataType:"json",data:E,success:function(I){if(I){var H=B.formSubmitted;B.prepareElement(C);B.formSubmitted=H;B.successList.push(C);B.showErrors();}else{var J={};J[C.name]=I||B.defaultMessage(C,"remote");B.showErrors(J);}D.valid=I;B.stopRequest(C,I);}},G));return"pending";}else{if(this.pending[C.name]){return"pending";}}return D.valid;},minlength:function(C,B,D){return this.optional(B)||this.getLength(A.trim(C),B)>=D;},maxlength:function(C,B,D){return this.optional(B)||this.getLength(A.trim(C),B)<=D;},rangelength:function(D,B,E){var C=this.getLength(A.trim(D),B);return this.optional(B)||(C>=E[0]&&C<=E[1]);},min:function(C,B,D){return this.optional(B)||C>=D;},max:function(C,B,D){return this.optional(B)||C<=D;},range:function(C,B,D){return this.optional(B)||(C>=D[0]&&C<=D[1]);},email:function(C,B){return this.optional(B)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(C);},url:function(C,B){return this.optional(B)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(C);},date:function(C,B){return this.optional(B)||!/Invalid|NaN/.test(new Date(C));},dateISO:function(C,B){return this.optional(B)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(C);},dateDE:function(C,B){return this.optional(B)||/^\d\d?\.\d\d?\.\d\d\d?\d?$/.test(C);},number:function(C,B){return this.optional(B)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(C);},numberDE:function(C,B){return this.optional(B)||/^-?(?:\d+|\d{1,3}(?:\.\d{3})+)(?:,\d+)?$/.test(C);},digits:function(C,B){return this.optional(B)||/^\d+$/.test(C);},creditcard:function(F,C){if(this.optional(C)){return"dependency-mismatch";}if(/[^0-9-]+/.test(F)){return false;}var G=0,E=0,B=false;F=F.replace(/\D/g,"");for(n=F.length-1;n>=0;n--){var D=F.charAt(n);var E=parseInt(D,10);if(B){if((E*=2)>9){E-=9;}}G+=E;B=!B;}return(G%10)==0;},accept:function(C,B,D){D=typeof D=="string"?D:"png|jpe?g|gif";return this.optional(B)||C.match(new RegExp(".("+D+")$","i"));},equalTo:function(C,B,D){return C==A(D).val();}}});})(jQuery);(function(A){A.each({focus:"focusin",blur:"focusout"},function(C,B){A.event.special[B]={setup:function(){if(A.browser.msie){return false;}this.addEventListener(C,A.event.special[B].handler,true);},teardown:function(){if(A.browser.msie){return false;}this.removeEventListener(C,A.event.special[B].handler,true);},handler:function(D){arguments[0]=A.event.fix(D);arguments[0].type=B;return A.event.handle.apply(this,arguments);}};});A.extend(A.fn,{delegate:function(D,C,B){return this.bind(D,function(E){var F=A(E.target);if(F.is(C)){return B.apply(F,arguments);}});},triggerEvent:function(B,C){return this.triggerHandler(B,[A.event.fix({type:B,target:C})]);}});})(jQuery);jQuery.fn.fixedBox=function(A){A=jQuery.extend({x:false,y:false},A);return this.each(function(){var B=y=0;if(!A.x||!A.y){B=document.documentElement.clientWidth||document.body.clientWidth;var G=document.documentElement.clientHeight||document.body.clientHeight;if(jQuery.browser.opera){G=document.body.clientHeight;}var D=jQuery(this).width(),C=jQuery(this).height(),F=jQuery(this).css("padding-left");F=parseInt(F.substring(0,F.length-2));var E=jQuery(this).css("padding-top");E=parseInt(E.substring(0,E.length-2));var I=jQuery(this).css("border-left-width");(I=parseInt(I.substring(0,I.length-2)))||(I=0);var H=jQuery(this).css("border-top-width");(H=parseInt(H.substring(0,H.length-2)))||(H=0);B=Math.round((B-D-2*F-2*I)/2);y=Math.round((G-C-2*E-2*H)/2);}if(A.x){B=parseInt(A.x);}if(A.y){y=parseInt(A.y);}if(jQuery.browser.msie&&jQuery.browser.version=="6.0"){G="( "+y+" + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px'";jQuery(this).get(0).style.setExpression("top",G);jQuery(this).css({position:"absolute",left:B+"px"});}else{jQuery(this).css({position:"fixed",top:y+"px",left:B+"px"});}});};(function(E){var B={},K,M,O,J=E.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),A=false;E.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){E.tooltip.blocked=!E.tooltip.blocked;}};E.fn.extend({tooltip:function(P){P=E.extend({},E.tooltip.defaults,P);H(P);return this.each(function(){E.data(this,"tooltip",P);this.tOpacity=B.parent.css("opacity");this.tooltipText=this.title;E(this).removeAttr("title");this.alt="";}).mouseover(L).mouseout(F).click(F);},fixPNG:J?function(){return this.each(function(){var P=E(this).css("backgroundImage");if(P.match(/^url\(["']?(.*\.png)["']?\)$/i)){P=RegExp.$1;E(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+P+"')"}).each(function(){var Q=E(this).css("position");if(Q!="absolute"&&Q!="relative"){E(this).css("position","relative");}});}});}:function(){return this;},unfixPNG:J?function(){return this.each(function(){E(this).css({filter:"",backgroundImage:""});});}:function(){return this;},hideWhenEmpty:function(){return this.each(function(){E(this)[E(this).html()?"show":"hide"]();});},url:function(){return this.attr("href")||this.attr("src");}});function H(P){if(B.parent){return ;}B.parent=E('<div id="'+P.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(E.fn.bgiframe){B.parent.bgiframe();}B.title=E("h3",B.parent);B.body=E("div.body",B.parent);B.url=E("div.url",B.parent);}function C(P){return E.data(P,"tooltip");}function G(P){if(C(this).delay){O=setTimeout(N,C(this).delay);}else{N();}A=!!C(this).track;E(document.body).bind("mousemove",D);D(P);}function L(){if(E.tooltip.blocked||this==K||(!this.tooltipText&&!C(this).bodyHandler)){return ;}K=this;M=this.tooltipText;if(C(this).bodyHandler){B.title.hide();var S=C(this).bodyHandler.call(this);if(S.nodeType||S.jquery){B.body.empty().append(S);}else{B.body.html(S);}B.body.show();}else{if(C(this).showBody){var R=M.split(C(this).showBody);B.title.html(R.shift()).show();B.body.empty();for(var Q=0,P;(P=R[Q]);Q++){if(Q>0){B.body.append("<br/>");}B.body.append(P);}B.body.hideWhenEmpty();}else{B.title.html(M).show();B.body.hide();}}if(C(this).showURL&&E(this).url()){B.url.html(E(this).url().replace("http://","")).show();}else{B.url.hide();}B.parent.addClass(C(this).extraClass);if(C(this).fixPNG){B.parent.fixPNG();}G.apply(this,arguments);}function N(){O=null;if((!J||!E.fn.bgiframe)&&C(K).fade){if(B.parent.is(":animated")){B.parent.stop().show().fadeTo(C(K).fade,K.tOpacity);}else{B.parent.is(":visible")?B.parent.fadeTo(C(K).fade,K.tOpacity):B.parent.fadeIn(C(K).fade);}}else{B.parent.show();}D();}function D(S){if(E.tooltip.blocked){return ;}if(S&&S.target.tagName=="OPTION"){return ;}if(!A&&B.parent.is(":visible")){E(document.body).unbind("mousemove",D);}if(K==null){E(document.body).unbind("mousemove",D);return ;}B.parent.removeClass("viewport-right").removeClass("viewport-bottom");var U=B.parent[0].offsetLeft;var T=B.parent[0].offsetTop;if(S){U=S.pageX+C(K).left;T=S.pageY+C(K).top;var Q="auto";if(C(K).positionLeft){Q=E(window).width()-U;U="auto";}B.parent.css({left:U,right:Q,top:T});}var P=I(),R=B.parent[0];if(P.x+P.cx<R.offsetLeft+R.offsetWidth){U-=R.offsetWidth+20+C(K).left;B.parent.css({left:U+"px"}).addClass("viewport-right");}if(P.y+P.cy<R.offsetTop+R.offsetHeight){T-=R.offsetHeight+20+C(K).top;B.parent.css({top:T+"px"}).addClass("viewport-bottom");}}function I(){return{x:E(window).scrollLeft(),y:E(window).scrollTop(),cx:E(window).width(),cy:E(window).height()};}function F(R){if(E.tooltip.blocked){return ;}if(O){clearTimeout(O);}K=null;var Q=C(this);function P(){B.parent.removeClass(Q.extraClass).hide().css("opacity","");}if((!J||!E.fn.bgiframe)&&Q.fade){if(B.parent.is(":animated")){B.parent.stop().fadeTo(Q.fade,0,P);}else{B.parent.stop().fadeOut(Q.fade,P);}}else{P();}if(C(this).fixPNG){B.parent.unfixPNG();}}})(jQuery);(function(B){var C=B.scrollTo=function(E,D,F){C.window().scrollTo(E,D,F);};C.defaults={axis:"y",duration:1};C.window=function(){return B(B.browser.safari?"body":"html");};B.fn.scrollTo=function(E,D,F){if(typeof D=="object"){F=D;D=0;}F=B.extend({},C.defaults,F);D=D||F.speed||F.duration;F.queue=F.queue&&F.axis.length>1;if(F.queue){D/=2;}F.offset=A(F.offset);F.over=A(F.over);return this.each(function(){var I=this,G=B(I),J=E,N,M={},H=G.is("html,body");switch(typeof J){case"number":case"string":if(/^([+-]=)?\d+(px)?$/.test(J)){J=A(J);break;}J=B(J,this);case"object":if(J.is||J.style){N=(J=B(J)).offset();}}B.each(F.axis.split(""),function(Q,S){var R=S=="x"?"Left":"Top",V=R.toLowerCase(),O="scroll"+R,U=I[O],T=S=="x"?"Width":"Height";if(N){M[O]=N[V]+(H?0:U-G.offset()[V]);if(F.margin){M[O]-=parseInt(J.css("margin"+R))||0;M[O]-=parseInt(J.css("border"+R+"Width"))||0;}M[O]+=F.offset[V]||0;if(F.over[V]){M[O]+=J[T.toLowerCase()]()*F.over[V];}}else{M[O]=J[V];}if(/^\d+$/.test(M[O])){M[O]=M[O]<=0?0:Math.min(M[O],K(T));}if(!Q&&F.queue){if(U!=M[O]){L(F.onAfterFirst);}delete M[O];}});L(F.onAfter);function L(O){G.animate(M,D,F.easing,O&&function(){O.call(this,E);});}function K(P){var O=H?B.browser.opera?document.body:document.documentElement:I;return O["scroll"+P]-O["client"+P];}});};function A(D){return typeof D=="object"?D:{top:D,left:D};}})(jQuery);(function($){var _cbStr=(typeof _cbVarStr!=="undefined")?_cbVarStr:"b1002";var CONST={thirdParty:{recaptcha:{url:"/ajax/authentication/recaptcha.jsp",elmId:"recaptcha_div",id:"6LcspgwAAAAAAPIfJ3yUt1aUl_Thr8TQfQmR1oRP",settings:{theme:"clean"}},disqus:{widget:"DQIntegrationService",cookie:{name:"p_DQS",expires:14},hash:{empty:"e30=",expires:60}},idms:{cookie:{name:"p_IDMS",expires:14},hash:{empty:"e30=",expires:"5"},callback:{login:"FOX_IDMS_auth_logged_in",logout:"FOX_IDMS_auth_logged_in"}},fm:{cookie:{name:"SABRE_ID",expires:14},hash:{empty:"e30=",expires:"5"},callback:{login:"FOX_FM_auth_logged_in",logout:"FOX_FM_auth_logged_in"}}}};var AuthService=window.AuthService=function(initVars){this.validationUrl="/authentication/registration/validate/";this.getRegistrationDataUrl="/authentication/registration/get";this.loginSubmitUrl="/authentication/login/submit";this.logoutSubmitUrl="/authentication/logout/submit";this.requestLogoutUrl="/authentication/logout/submit";this.refreshAuthUrl="/authentication/login/refresh?"+_cbStr+"=t";this.forgottenPasswordSubmitUrl="/authentication/forgotten_password/submit";this.registrationSubmitUrl="/authentication/registration/submit";this.ajaxRetrieveHtmlUrl="/ajax/authentication/includes.jsp";this.newsAlertSubscriptionUrl="/portal/newsalertsubscribe";this.defaultDomain="foxnews.com";var i;for(i in initVars){this[i]=initVars[i];}};AuthService.prototype={init:function(config){var i,as=this;for(i in config){this[i]=config[i];}if(window.FOX_isMnt&&FOX_isMnt()){$("#account, #authentication").hide();}this.thirdPartyAPI=new ThirdPartyAPI(this);},extend:function(obj){var i,self=this;for(i in obj){this[i]=obj[i];}},createObjFromJSON:function(jsonString){if(typeof jsonString==="string"){if(($.trim(jsonString)).length>0){return eval("("+unescape(jsonString).replace(/\s+/g," ")+")");}}return false;},isLoggedIn:function(){return($.cookie("p_UN")&&$.cookie("p_UN")!=="")?true:false;},isThirdParty:function(){return($.cookie("p_Thirdparty"))?true:false;},getDisplayName:function(){var as=this;function pipeCheck(str){var separator="|id:",idx=str.lastIndexOf(separator);if(idx<1){return str;}return str.substr(0,idx);}if(as.isLoggedIn()){var displayName=false;if(typeof $.cookie("p_DN")==="string"){var dn=$.cookie("p_DN");if(dn.length>0){dn=pipeCheck(dn);displayName=dn.replace(/\+/g," ").replace(/\"/g,"");}}return(displayName)?displayName:as.getUsername();}return"";},getUsername:function(){if(this.isLoggedIn()){return $.cookie("p_UN");}},getUserEmail:function(){return(this.isLoggedIn())?$.cookie("p_EM"):"";},getUserLocation:function(){return(this.isLoggedIn())?$.cookie("p_UL"):"";},getOverlayHtml:function(overlayView,origDomain,callbackFn){callbackFn=callbackFn||false;var as=this;if(!origDomain){origDomain=as.defaultDomain;}$.ajax({type:"GET",async:false,url:as.ajaxRetrieveHtmlUrl,data:({view:overlayView,authDomain:origDomain,cb:_cbStr}),success:function(data,textStatus){$("body").append(data);if(typeof callbackFn==="function"){callbackFn();}}});},closeOverlay:function(elementId){var as=this,elm=$("#"+elementId);elm.find("input[type*=text], input[type*=password]").val("");elm.find("input:checkbox:checked").attr("checked","");elm.find("input[type*=text]").removeClass("error");as.overlay.hide(elm);},providerOverlay:function(authDomain,callbackFn){var as=this;if(!as.isLoggedIn()){if($("#login-provider").size()===0){as.getOverlayHtml("login-provider",authDomain,callbackFn);}as.initProviderOverlay();as.overlay.show("#login-provider");$("#user-login-form-overlay").find("input[name*=username]").focus();return false;}return true;},initProviderOverlay:function(){var as=this;var login_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){elm.find(".error-box-login").html("User name and password are required.").show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.login(elm);return false;}};$("#user-login-form-overlay").validate(login_validation_options);$(".thirdparty a img").hover(function(){var thirdPartyTooltip=$(this).parent().parent().siblings(0);thirdPartyTooltip.find(".icon-desc-bg p").html($(this).attr("alt"));thirdPartyTooltip.addClass($(this).attr("name")).css("visibility","visible");},function(){var thirdPartyTooltip=$(this).parent().parent().siblings(0);thirdPartyTooltip.find(".icon-desc-bg p").html("");thirdPartyTooltip.removeClass($(this).attr("name")).css("visibility","hidden");});var reset_password_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){elm.find(".error-box-login").html("The email address you entered is invalid.").show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.forgotPassword(elm);return false;}};$("#reset-password .user-email-reset-form").validate(reset_password_validation_options);$("#forgot-password-overlay").unbind("click").click(function(){$("#reset-password.reset").toggle();});},registrationOverlay:function(authDomain,callbackFn){var as=this;if(!as.isLoggedIn()){if($("#registration-overlay").length===0){as.getOverlayHtml("registration-overlay",authDomain,callbackFn);}increaseRefresh();$("#reg_user_name").removeAttr("readonly");$("#reg_user_name").next(".validate").next(".validate").children(".sprites").show();as.initRegistrationOverlay();as.overlay.show("#registration-overlay");return false;}return true;},initRegistrationOverlay:function(){var as=this;var registration_validation_options={submitHandler:function(form){as.register($(form));return false;},errorElement:"p",errorPlacement:function(err,elm){var errMsg=err.text(),id=elm.attr("id");if(elm.data("_errMsg")===errMsg){return false;}elm.data("_errMsg",errMsg);var parent=elm.parent(),marker=parent.find("> .validate:first .sprites"),msgAlert=parent.find("> .error-tip p.err-msg"),errMsg=err.text(),reqTxt=parent.find("> .req-text");var css={valid:"check",invalid:"red-exclamation"};reqTxt.hide();var noMsg="reg_birth_year";var noMarker="reg_zip_code|reg_location";if(msgAlert.size()===0&&noMsg.indexOf(id)===-1){var validate=parent.find("> .validate:first");if(id==="agreement"){validate=elm;}msgAlert=$('<div class="error-tip"><span class="form-note"><p class="err-msg"></p></span></div>').insertAfter(validate);msgAlert=parent.find("> .error-tip p.err-msg");if(id==="agreement"){parent.find("> .error-tip").css({position:"absolute",width:"220px",right:"0",top:"0"});}}msgAlert.css("padding-top","0px");if(errMsg.length===0){if(noMarker.indexOf(id)===-1){marker.removeClass(css.invalid).addClass(css.valid);}msgAlert.html("&nbsp;");}else{if(noMarker.indexOf(id)===-1){marker.removeClass(css.valid).addClass(css.invalid);}msgAlert.html(errMsg);}if(marker.is(":hidden")&&noMarker.indexOf(id)===-1){marker.css("display","block");}},success:function(){},rules:{propID_username:{required:true,minlength:5,maxlength:15,validChars:true,remote:{url:as.validationUrl,type:"post"}},propID_email:{required:true,email:true,maxlength:250,strictEmail:true,remote:{url:as.validationUrl,type:"post"}},propID_pass1:{required:true,noSpaces:true,minlength:5,maxlength:12},propID_pass2:{required:true,noSpaces:true,minlength:5,maxlength:12,equalTo:"#reg_password"},propID_country:{required:true},propID_zip:{digits:true,maxlength:5,minlength:5,zipRequired:true,zipCheck:true,remote:{url:as.validationUrl,type:"post"}},propID_birthyear:{required:true,min:1900,isMaxYear:true},propID_terms:{required:true}},messages:{propID_username:{required:"Please enter a username",minlength:"Your username must consist of at least 5 characters",maxlength:"Your username is too long",validChars:"please supply valid characters only.",remote:"This username is already in use."},propID_email:{required:"Please enter an email address.",email:"Your email address must be valid.",maxlength:"Your email address is too long.",remote:"A user is already registered with this email."},propID_pass1:{required:"Please enter a password.",minlength:"Your password must be at least 5 characters.",maxlength:"Your password is too long."},propID_pass2:{required:"Please confirm your password.",equalTo:"Your passwords do not match."},propID_terms:{required:"In order to join Fox News community you must agree to our terms and conditions. Please review and check the box to join."},propID_country:{required:"Please select your country of residence."},propID_zip:{digits:"Please enter a valid zip code.",maxlength:"A valid zip code is five digits.",minlength:"A valid zip code is five digits.",required:"Please enter a zip code.",remote:"Please enter a valid United States zip code."},propID_birthyear:{required:"Please select your birth year."}}};as.instantiateValidators();$("#registration").validate(registration_validation_options);as.showRecaptcha();},initOpxLogin:function(){var as=this;var reset_password_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){var message="The email address you entered is invalid.";elm.find(".error-box-login").html(message).show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.forgotPassword(elm);return false;}};$("#reset-password .user-email-reset-form").validate(reset_password_validation_options);},initEditProfile:function(){var as=this;var edit_profile_validation_options={debug:false,submitHandler:function(form){if($("#reg_email").val()===""&&$("#reg_email2").val()===""){$("#reg_email").val($("#reg_curemail").val());$("#reg_email2").val($("#reg_curemail").val());}form.submit();return false;},errorElement:"p",errorPlacement:function(error,element){var elm=$(element),elem_pos=elm.position(),error_message=$(error[0]).html(),error_name=elm.attr("id").replace("reg","err");error_html=[];error_html.push('<div class="regoverlay_container error-tip" id="'+error_name+'">');error_html.push('<div class="overlaytip_top"></div><div class="form-note"><img src="/static/v/all/img/alert-yellow.gif" alt="" />');error_html.push('<p class="err-msg">'+error_message+'</p></div><div class="overlaytip_btm"></div></div>');error_html.join("");$("div.regoverlay_container.error-tip").hide();var errorElm=$("div#"+error_name);if(errorElm.size()>0){if(error_message!==""){errorElm.find("p.err-msg").html(error_message).show();}}else{elm.after(error_html);errorElm.hide();}errorElm.css({top:(elem_pos.top-80)+"px",left:(elem_pos.left+50)+"px"});errorElm.next(".validate > .sprites").removeClass("check").addClass("red-exclamation").show();},success:function(label){var errDiv=$("div#"+$(label).attr("htmlfor").replace("reg","err"));errDiv.hide();errDiv.next(".validate > .sprites").removeClass("red-exclamation").addClass("check");},rules:{propID_email:{required:false,email:true,maxlength:250,strictEmail:true},propID_email2:{equalTo:"#reg_email"},propID_pass1:{noSpaces:true,minlength:5,maxlength:12},propID_pass2:{noSpaces:true,minlength:5,maxlength:12,equalTo:"#reg_password"},propID_country:{required:true},propID_zip:{digits:true,maxlength:5,minlength:5,zipRequired:true,zipCheck:true},propID_gender:{required:true},propID_birthyear:{required:true,min:1900,isMaxYear:true}},messages:{propID_email:{required:"Please enter an email address.",email:"Your email address must be valid.",maxlength:"Your email address is too long.",remote:"A user is already registered with this email."},propID_email2:{required:"Please confirm your email address.",equalTo:"Please double check your email. They do not match."},propID_pass1:{required:"Please enter a password.",minlength:"Your password must be at least 5 characters.",maxlength:"Your password is too long."},propID_pass2:{required:"Please confirm your password.",equalTo:"Your passwords do not match."},propID_country:{required:"Please select your country of residence."},propID_zip:{digits:"Please enter a valid zip code.",maxlength:"A valid zip code is five digits.",minlength:"A valid zip code is five digits.",required:"Please enter a zip code."},propID_gender:{required:"Please submit your gender."},propID_birthyear:{required:"Please select your birth year."}}};as.instantiateValidators();$("#reg_profile").validate(edit_profile_validation_options);},forgotPasswordOverlay:function(obj){var as=this;if(!as.isLoggedIn()){if($("#forgot-password-overlay").size()===0){as.getOverlayHtml("forgot-password-overlay");}var offset=$(obj).offset();var leftPos=offset.left-$("#forgot-password-overlay").width();as.overlay.show("#forgot-password-overlay");return false;}return true;},login:function(formObj){formObj=$(formObj);var as=this,user=formObj.find("input[name*=username]").val(),pass=formObj.find("input[name*=password]").val(),rememberMe=(formObj.find("input[name*=rememberMe]:checked").size()>0)?true:false,numOfDays=(rememberMe)?365:0;$.ajax({type:"POST",url:as.loginSubmitUrl,data:({username:user,password:pass,authDomain:as.domain,rememberMe:rememberMe}),dataType:"text",success:function(data,textStatus){var loginResponse=as.createObjFromJSON(data);var messageArr=loginResponse.authentication.message.split(" ");if(!loginResponse){showToConsole("[authSrv.login] No data returned from request.",true);return false;}if(loginResponse.authentication.status==="ok"){if(typeof $.ad!="undefined"){$.ad.track({login:{userid:"fox login - id: "+as.getDisplayName()+" email:"+as.getUserEmail()}});}as.onSuccessLogin();as.thirdPartyAPI.disqus.login(loginResponse);as.thirdPartyAPI.idms.login(loginResponse);as.thirdPartyAPI.fileMobile.login(loginResponse);as.closeOverlay("login-provider");if(as.domain==="foxnews.com"&&window.location.pathname.indexOf("/community/user/")>-1){window.location.reload();}}else{formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".login-error").html("We are sorry, please try again.").show();}},error:function(XMLHttpRequest,textStatus,errorThrown){formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".login-error").html("We are sorry, please try again later.").show();}});},logout:function(origDomain){var as=this;origDomain=origDomain||as.defaultDomain;$.ajax({type:"POST",url:as.logoutSubmitUrl,data:({authDomain:origDomain}),success:function(data,textStatus){if(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.logout] No data returned from request.",true);return false;}if(authObj.authentication.status==="ok"){as.thirdPartyAPI.disqus.logout(authObj,function(){as.thirdPartyAPI.idms.logout(authObj,function(){as.thirdPartyAPI.fileMobile.logout(authObj,function(){if(window.location.pathname.indexOf("/community/user/profile")>-1){window.location.href="http://www.foxnews.com/index.html";}else{window.location.reload();}});});});}}},error:function(XMLHttpRequest,textStatus,errorThrown){}});},requestLogOut:function(config){config=config||{};var as=this;$.ajax({type:"GET",url:as.requestLogoutUrl,success:function(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.requestLoginInfo] No data returned from request.",true);return false;}if(typeof config.callback==="function"){config.callback(authObj);}}});},requestLoginInfo:function(config){config=config||{};var as=this;$.ajax({type:"POST",url:as.refreshAuthUrl,success:function(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.requestLoginInfo] No data returned from request.",true);return false;}if(typeof config.callback==="function"){config.callback(authObj);}}});},forgotPassword:function(formObj){formObj=$(formObj);var as=this,email=formObj.find("input[name*=emailResetField]").val();$.ajax({type:"POST",url:as.forgottenPasswordSubmitUrl,data:({email:email}),dataType:"text",success:function(data,textStatus){var forgotPasswordResponse=as.createObjFromJSON(data);if(!forgotPasswordResponse){showToConsole("[authSrv.forgotPassword] No data returned from request.",true);return false;}if(forgotPasswordResponse.authentication.status==="ok"){formObj.find(".error-box-login").hide();formObj.find(".reset-input-container").hide();formObj.find(".confirm-box-login").html("A reset link has been sent to the email provided.").show();}else{formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".error-box-login").html("The email address you entered is invalid").show();}},error:function(XMLHttpRequest,textStatus,errorThrown){formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".error-box-login").html("We're sorry your password cannot be reset at this time. Please try again later.").show();}});},register:function(formObj){var as=this,privacy=(formObj.find("#reg_location_confirm:checked").size()>0)?"hide":"",challenge=as.thirdPartyAPI.recaptcha.getChallenge(),response=as.thirdPartyAPI.recaptcha.getResponse();var slids=[];if(formObj.find("#fnbreaking:checked").size()>0){slids.push("C2F278094FACCEA62391025B7A52D8EB");}if(formObj.find("#fbbreaking:checked").size()>0){slids.push("5C84B893BD6D939E84FAE1A8E6E9525A");}if(slids.length>0){$.ajax({type:"GET",url:as.newsAlertSubscriptionUrl,data:({slids:slids.join(","),email:$("#reg_email").val()}),dataType:"text"});}$.ajax({type:"POST",url:as.registrationSubmitUrl,data:{authDomain:as.domain,realm:"realm1",username:formObj.find("#reg_user_name").val(),password:formObj.find("#reg_password").val(),email:formObj.find("#reg_email").val(),zip:formObj.find("#reg_zip_code").val(),country:formObj.find("#reg_country").val(),location_privacy:privacy,birth_year:formObj.find("#reg_birth_year").val(),recaptcha_challenge_field:challenge,recaptcha_response_field:response},dataType:"text",success:function(data,textStatus){var registrationResponse=as.createObjFromJSON(data);var message=registrationResponse.authentication.message;if(message.indexOf("successful registration")>-1&&typeof $.ad!=="undefined"){$.ad.track({registration:{userid:"fox registration - id:"+as.getDisplayName()+" - email:"+as.getUserEmail()}});}if(!registrationResponse){showToConsole("[authSrv.register] No data returned from request.",true);return false;}if(registrationResponse.authentication.status==="ok"){$("#registration-error").hide();$("#registration-overlay").hide();as.getOverlayHtml("registration-thankyou-overlay");decreaseRefresh();authentication_service.onSuccessLogin();as.thirdPartyAPI.disqus.login(registrationResponse);as.thirdPartyAPI.idms.login(registrationResponse);as.thirdPartyAPI.fileMobile.login(registrationResponse);as.overlay.show("#registration-thankyou-overlay");$.scrollTo("#registration-thankyou-overlay");$("#clickToClose").focus();}else{var errorMsg=registrationResponse.authentication.message;as.showRecaptcha();$("#registration-error").html("We are sorry, we could not complete your registration. Please fix the error and try again. <br/> *"+errorMsg).show();$.scrollTo("#registration-error");}},error:function(XMLHttpRequest,message,errorThrown){as.showRecaptcha();$("#registration-error").html("We are sorry, we could not complete your registration. Please try again. <br> *"+message).show();$.scrollTo("#registration-error");}});},overlay:{init:function(action,target){target=$((target||"#registration-overlay"));var as=this;$(action).each(function(){$(action).unbind("click").click(function(){as.show(target);});});},show:function(target){target=$(target);var as=this;if(typeof increaseRefresh!=="undefined"){increaseRefresh();}target.find(".validate a.sprites").unbind("click");if($(".overlay-layer").size()===0){$("body").prepend('<div class="overlay-layer"></div>');}$(".overlay-layer").show();target.each(function(){var elm=$(this);elm.show().fixedBox();if($(window).height()<elm.height()){var scrollTop=$(document).scrollTop();var overlayTop=(target.css("top")).replace(/[a-z]/g,"");var abs=Math.abs(overlayTop)+scrollTop;elm.css({top:abs+"px",position:"absolute"});}elm.find(".field input").removeClass("error").attr("value","");elm.find(".validate a.sprites,.error-tip").hide();var usr=elm.find("#reg_user_name"),usrParent=usr.parent(),pwd=elm.find("#reg_password"),pwdParent=pwd.parent();if(usrParent.find("span.req-text").size()===0){usr.after('<span class="req-text req-user">5-15 characters, cannot be changed</span>');usrParent.focus(function(){elm.find(".req-user").remove();});}if(pwdParent.find("span.req-text").size()===0){pwd.after('<span class="req-text req-password">5-12 characters, no space, case-insensitive</span>');pwdParent.focus(function(){elm.find(".req-password").remove();});}});var close=target.find(".close").parent(),signUpReg=$(".sign_up_registration");close.unbind("click").removeAttr("onclick").click(function(){as.hide(target);return false;});target.find(".buttons input[type='reset']").click(function(){as.hide(target);return false;});signUpReg.click(function(){$(".overlay-layer").show();});},hide:function(target){if(typeof decreaseRefresh!=="undefined"){decreaseRefresh();}$(".overlay-layer").hide();$(target).hide();}},instantiateValidators:function(){var as=this;$.validator.addMethod("validChars",function(value){var i,result=true,iChars="!@#$%^&*()+=-[]\\';,./{}|\":<>?";for(i=0;i<value.length;i++){if(iChars.indexOf(value.charAt(i))!==-1){return false;}}return result;},"Please supply valid characters only.");$.validator.addMethod("strictEmail",function(value){return(value.match(/^([a-zA-Z0-9_.\-\+])+@([a-zA-Z0-9_.\-])+\.([a-zA-Z])+([a-zA-Z])+/)!==null)||(value==="");},"Please supply valid email characters only.");$.validator.addMethod("noSpaces",function(value){var result=true,strArr=[];if(typeof value==="string"&&value.split(" ").length>1){return false;}return result;},"Please remove the blank spaces.");$.validator.addMethod("validCharsName",function(value){var i,resultName=true,iChars='!@#$%^&*()\\+=[];,./{}|":<>?',iCharshp="-",iCharsap="'",counterhp=0,counterap=0;for(i=0;i<value.length;i++){if(iChars.indexOf(value.charAt(i))!==-1){return false;}if(iCharshp.indexOf(value.charAt(i))!==-1){counterhp=counterhp+1;}if(iCharsap.indexOf(value.charAt(i))!==-1){counterap=counterap+1;}}if(counterhp>1){return false;}if(counterap>1){return false;}return resultName;},"Please supply valid characters only.");$.validator.addMethod("isMaxYear",function(value){var result=true,d=new Date(),curr_year=d.getFullYear();if($("#reg_birth_year").val()>(curr_year-13)){return false;}return result;},"You must be at least 13 years old to register for this site.");$.validator.addMethod("zipRequired",function(value){var result=true;country=$("#reg_country").val();if(country==="United States"&&value===""){return false;}return result;},"Zip Code is required.");$.validator.addMethod("zipCheck",function(value){var result=true,regLocation=$("#reg_location");if($("#reg_country").val()==="United States"){regLocation.show();$.ajax({type:"GET",url:as.getRegistrationDataUrl,async:false,data:({zip:$("#reg_zip_code").val()}),dataType:"text",success:function(data,textStatus){if(data){var stateObj=as.createObjFromJSON(data);if(!stateObj){showToConsole("[authSrv.validator] No data returned from request.",true);return false;}var state=stateObj.state_for_zip;regLocation.val((state!=="")?state:"");result=false;}else{regLocation.val("");result=false;}},error:function(XMLHttpRequest,textStatus,errorThrown){regLocation.val("");}});result=(regLocation.val()!=="")?true:false;}else{regLocation.hide();}return result;},"Please enter a valid United States zip code.");},showRecaptcha:function(){var as=this;as.thirdPartyAPI.recaptcha.create();}};var ThirdPartyAPI=(function(){API=function(root){this.root=root;this.recaptcha=new RecaptchaAPI(this);this.disqus=new Disqus(this);this.idms=new IDMS(this);this.fileMobile=new FileMobile(this);};var RecaptchaAPI=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.recaptcha;};RecaptchaAPI.prototype={set:function(fn){var self=this,root=this.root,cfg=this._config;if(typeof Recaptcha!=="undefined"){if(typeof fn==="function"){fn();}}else{window.Recaptcha_Create_Instance=function(){$.loadAttempt(30,500,function(){return(typeof Recaptcha!=="undefined")?true:false;},function(){if(typeof fn==="function"){fn();}});};(function(){var e=document.createElement("script");e.src=cfg.url;e.type="text/javascript";e.async=true;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e);}());}},create:function(){var self=this,cfg=this._config,recaptcha_id=cfg.id,divId=cfg.elmId,settings=cfg.settings;self.set(function(){Recaptcha.create(recaptcha_id,divId,settings);});},getChallenge:function(){if(typeof Recaptcha!=="undefined"){return Recaptcha.get_challenge();}return false;},getResponse:function(){if(typeof Recaptcha!=="undefined"){return Recaptcha.get_response();}return false;}};var Disqus=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.disqus;this.set();};Disqus.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;if(cookieVal){unescape(cookieVal);}var trigger=function(){var data={dqs:cookieVal};root.requestLoginInfo({data:data,callback:function(obj){if(!obj){log("[api.disqus] Refresh service returned no hash value.");return false;}try{var hash=obj.authentication.dqs;self.cookie("set",hash);if(typeof fn==="function"){fn(hash);log("[api.disqus] Hash Refresh Initiated");}}catch(err){log("[api.disqus] Refresh service: "+err);}}});};var loggedOutCookie=function(){root.requestLogOut({callback:function(obj){if(!obj){log("[api.disqus] logout hash service returned no value.");return false;}try{var hash=obj.authentication.dqs;self.cookie("set",hash);fn(hash);}catch(err){log("[api.disqus] Refresh service: "+err);return false;}}});};var hasExpired=function(hasExpiredFn){var cDate=new Date();var curr={time:cDate,epoch:Math.round(cDate.getTime()/1000),expire:new Date(cDate.getTime()+(cfg.hash.expires*60*1000))};curr.expireEpoch=Math.round(curr.expire/1000);var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0],timestamp=arr[2];if(typeof timestamp==="undefined"){return getLoggedOut();}if(isNaN(timestamp)){return getLoggedOut();}if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}timestamp=parseInt(timestamp,10);var tDate=new Date(timestamp*1000);var ts={time:new Date(tDate),epoch:timestamp,expire:new Date(tDate.getTime()+(cfg.hash.expires*60*1000))};ts.expireEpoch=Math.round(ts.expire/1000);if(curr.epoch>=ts.expireEpoch){if(arr[0]!==cfg.hash.empty){return"yes";}}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;case"yes":log("[api.disqus] Hash Expired");trigger();break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var message=data.authentication.message;if(message.indexOf("|")>-1&&typeof $.ad!=="undefined"){regExpId=/([\w]+)[=]([\w,\s]+)$/;var idArr=message.match(regExpId);$.ad.track({login:{userid:"third party login - id:"+idArr[2].replace(/\s/,"")+", service:"+idArr[1]+".com"}});}var self=this;if(data.authentication.dqs){log("[api.disqus] Logging In");self.cookie("set",data.authentication.dqs);self.integrate({token:data.authentication.dqs,usr:self.cookie("get","p_UN")});}if(typeof fn==="function"){fn();}},logout:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.dqs){log("[api.disqus] Logging Out");self.cookie("set",data.authentication.dqs);self.integrate({token:data.authentication.dqs,usr:self.cookie("get","p_UN")});}if(typeof fn==="function"){fn();}},integrate:function(config){config=config||{};var cfg=this._config;var trigger=function(){$.loadAttempt(50,500,function(){return((window.fox&&fox.widgets&&typeof fox.widgets[cfg.widget]==="function")||(typeof window["FOX_"+cfg.widget]==="function"))?true:false;},function(){if(window.fox&&fox.widgets&&typeof fox.widgets[cfg.widget]==="function"){log("[api.disqus] Integrating ");fox.widgets[cfg.widget](config);}else{if(typeof window["FOX_"+cfg.widget]==="function"){log("[api.disqus] Integrating ");window["FOX_"+cfg.widget](config);}}});};$(document).ready(function(){trigger();});},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host="*."+root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",host:host,expires:exp,domain:root.domain};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":$.cookie(cName,null);break;case"get":cName=(data)?data:cName;return($.cookie(cName))?$.cookie(cName):false;}}};var IDMS=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.idms;this.set();};IDMS.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},integrate:function(config){config=config||{};var cfg=this._config,fnName=cfg.callback.login;if(typeof window[fnName]==="function"){window[fnName](config);}},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;var loggedOutCookie=function(){self.cookie("remove");fn(false);};var hasExpired=function(hasExpiredFn){var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0];if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.idms){log("[api.idms] Logging In");self.cookie("set",data.authentication.idms);self.integrate({token:data.authentication.idms,usr:self.cookie("get","p_UN")});}else{log("[api.idms] No IDMS authentication found.");}if(typeof fn==="function"){fn();}},logout:function(data,fn){var self=this,cfg=this._config,fnName=cfg.callback.logout;self.cookie("remove-full");if(typeof window[fnName]==="function"){window[fnName](cfg);}if(typeof fn==="function"){fn();}},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host=root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",expires:exp,domain:host};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":options={path:"/",domain:host};$.cookie(cName,null,options);break;case"remove-full":options={path:"/",domain:host};$.cookie(cName,null,options);$.cookie(cName,"BLAH");$.cookie(cName,null);break;case"get":cName=(data)?data:cName;var val=($.cookie(cName))?$.cookie(cName):false;return val;}}};var FileMobile=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.fm;this.set();};FileMobile.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},integrate:function(config){config=config||{};var cfg=this._config,fnName=cfg.callback.login;if(typeof window[fnName]==="function"){window[fnName](config);}},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;var loggedOutCookie=function(){self.cookie("remove");fn(false);};var hasExpired=function(hasExpiredFn){var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0];if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.fm){log("[api.idms] Logging In");self.cookie("set",data.authentication.fm);self.integrate({token:data.authentication.fm,usr:self.cookie("get","p_UN")});}else{log("[api.idms] No IDMS authentication found.");}if(typeof fn==="function"){fn();}},logout:function(data,fn){var self=this,cfg=this._config,fnName=cfg.callback.logout;self.cookie("remove-full");if(typeof window[fnName]==="function"){window[fnName](cfg);}if(typeof fn==="function"){fn();}},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host=root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",expires:exp,domain:host};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":options={path:"/",domain:host};$.cookie(cName,null,options);break;case"remove-full":options={path:"/",domain:host};$.cookie(cName,null,options);$.cookie(cName,"BLAH");$.cookie(cName,null);break;case"get":cName=(data)?data:cName;var val=($.cookie(cName))?$.cookie(cName):false;return val;}}};return API;}());var disablezip=window.disablezip=function(value){var zip=$("#reg_zip_code"),loc=$("#reg_location");if(value==="United States"){zip.removeAttr("readonly").css("background","#fff");zip.next(".validate").children(".sprites").hide();loc.val("");}else{zip.attr("readonly",true).css("background","#ddd").val("");loc.val(value);}};var formatField=window.formatField=function(id,value){var elm=$("#"+id);switch(id){case"reg_first_name":elm.val(value.join(""));break;case"reg_last_name":elm.val(value.join(""));break;default:elm.val(value.toLowerCase().replace(/\s+/gi,""));}};var formatTrim=window.formatTrim=function(id,value){$("#"+id).val(value.replace(/\s+/gi,""));};var isNumberKey=window.isNumberKey=function(evt){var charCode=(evt.which)?evt.which:evt.keyCode;return(charCode>31&&(charCode<48||charCode>57))?false:true;};var increaseRefresh=window.increaseRefresh=function(){if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}else{$("meta[name='refresh'],meta[http-equiv='refresh']").each(function(){var item=$(this),refresh=item.attr("content"),orig=(typeof item.attr("content")!=="undefined")?refresh:false;item.data("RefreshOrig",orig);item.attr("content","7200");});}};var decreaseRefresh=window.decreaseRefresh=function(){if(typeof ew_disableRefresh==="function"){ew_enableRefresh();}else{$("meta[name='refresh'],meta[http-equiv='refresh']").each(function(){var item=$(this),orig=item.data("RefreshOrig");if(orig){item.attr("content",orig);}});}};var showToConsole=function(str,force){force=force||false;var search=(window.location.search).substr(1);if(search.length>0){var x,pairs=search.split("&"),valuePair={};for(x=0;x<pairs.length;x++){var split=pairs[x].split("=");valuePair[split[0]]=split[1];}if(valuePair.stc==="y"||force){if(typeof window.console==="object"){console.log(str);}}}};var log=showToConsole;(function(){function d(c){return typeof c==="function"?!0:!1;}var f=function(){var c,b=arguments;if(b.length===0){return !1;}var a={attempt:0,timeout:500};if(b.length===1&&typeof b[0]==="object"){for(c in b[0]){a[c]=b[0][c];}if(a.callback){c=a.callback;}else{return !1;}if(!c.check||!c.success){return !1;}else{a._check=c.check,a._success=c.success;}if(c.timedOut){a._timeout=c.timedOut;}}else{if(!isNaN(b[0])&&!isNaN(b[1])&&d(b[2])&&d(b[3])){a.attempt=b[0];a.timeout=b[1];a._check=b[2];a._success=b[3];if(b[4]){a._timeout=b[4];}if(b[5]){a._abort=b[5];}}else{if(d(b[0])&&d(b[1])){a._check=b[0];a._success=b[1];if(b[2]){a._timeout=b[2];}if(b[3]){a._abort=b[3];}}else{return !1;}}}if(!d(a._check)||!d(a._success)){return !1;}if(!d(a._timeout)){a._timeout=function(){};}if(isNaN(a.timeout)){return !1;}else{a.timeout=parseInt(a.timeout,10);}if(isNaN(a.attempt)){return !1;}else{a.attempt=parseInt(a.attempt,10);}var e=!1,g=!1;if(a.attempt&&a.timeout){var f=function(){g?clearTimeout(e):a._check()?(a._success(),clearTimeout(e)):a.attempt>0?e=setTimeout(function(){f();},a.timeout):a._timeout();a.attempt--;};f();}else{e=setInterval(function(){g?clearInterval(e):a._check()&&(a._success(),clearInterval(e));},a.timeout);}return{abort:function(){g=!0;}};};if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:f});}else{if(!window.loadAttempt){window.loadAttempt=f;}}})();}(jQuery));var FOX_Janrain_Auth_TPL=(function(){var A='<div style="display:none;" id="resendVerification">    <h1>Resend Email Verification</h1>    <div class="hr"></div>    <p>To sign in you must verify your email address. Fill out the form below and we\'ll send you an email to verify.</p>    {* #resendVerificationForm *}        {* resendVerification_emailAddress *}        <div class="capture_fox_buttoncol">            {* newPasswordFormButton *}        </div>     {* /resendVerificationForm *}</div><div style="display:none;" id="resendVerificationSuccess">    <h1>Your Verification Email Has Been Sent</h1>    <div class="hr"></div>    <p>Check your email for a link to reset your password.</p>    <a href="#" data-capturescreen="signIn" class="capture_btn capture_primary">Sign in</a></div><div style="display:none;" id="resetPasswordUserSuccess">            <h1>Your password has been changed</h1>            <div class="hr"></div>           <p>Password has been successfully updated.</p>            <div class="capture_textRight">                <p><a href="#" data-capturescreen="signIn" class="capture_btn capture_primary">Sign in</a></p>            </div>        </div><div style="display:none;" id="resetPassword">    <h1>Please enter your email address and we\'ll send you a new password.</h1>    <div class="hr"></div>    {* #forgotPasswordForm *}        {* forgotPassword_emailAddress *}        {* errorMessages *}        {* forgotPassword_sendButton *}    {* /forgotPasswordForm *}</div><div style="display:none;" id="resetPasswordSuccess">    <h1>Reset your password</h1>     <div class="hr"></div>    <p>Please reset your password.</p>    {* #resetPasswordForm *}        {* newpassword *}        {* newpasswordConfirm *}          <div class="capture_textRight">             {* newPasswordFormButton *}           </div>    {* /resetPasswordForm *}</div><div style="display: none" id="registrationVerify">            <h2>Sorry we could not verify that email address.</h2>            <p>Please resend verification.</p>        </div><div style="display: none" id="registrationVerified">    <h2>Thanks for verifying your email address</h2></div><div style="display:none;" id="editProfile">           <div id="accounts-header">              <ul>                 <li class="active"><a href="#">Account</a></li>                 <li><a href="#">uReports</a></li>                 <li><a href="#">Activity</a></li>              </ul>           </div>                {* savedProfileMessage *}                {* #photoManager {"custom": true} *}                    {| mainDiv |}                         {| profileImage |}                        <div class="capture_fox_photoLinks">                          <h1>{* public_displayName *}</h1>                          <div id="capture_profile_saved" style="display:none;"><span class="capture_fox_profile_saved"></span>Your profile was last saved <span class="capture_fox_alert_callout" id="capture_alert_callout">just now</span></div>                        {| photoLinks |}                        <span class="janrain_traditional_account_only">                          <a href="#" data-capturescreen="changepassword" class="capture_fox_change_password">Change Password</a>                        </span>                        <div class="cancel-button"><span></span>Back</div>                      </div>                    {| closeDiv |}                    <!-- hidden crop form -->                    <div style="display: none;">                    {| editFormOpen |}                    <div class="capture_footer">                    {| editSubmitButton |}                      <p>or</p>                    {| chooseDifferentPhotoLink |}                    </div>                    {| editFormClose |}                    </div>                    <!-- hidden upload form -->                    <div style="display: none;">                    {| uploadFormOpen |}                    {| uploadFileField |}                    {| uploadSubmitButton |}                    {| photoChooserErrors |}                    {| uploadFormClose |}                    </div>                    <!-- hidden upload screen -->                    <div style="display: none;">                        <div id="{| uploadPhotoScreenId |}" class="janrain-capture-ui capture-ui-content">                            <div class="capture_header">                                <h1>Change Avatar</h1>                            </div>                            <div id="{| prefixFieldName |}_profile_pic_upload" class="{| profilePicClass |}capture_profile_pic_upload capture_default">                                {| uploadImage |}                            </div>                            <div id="{| prefixFieldName |}_profile_pic_uploadform_container" class="capture_uploadPhoto_container">                            </div>                        </div>                    </div>                    <!-- hidden edit photo screen -->                    <div style="display: none;">                        <div id="{| editPhotoScreenId |}" class="janrain-capture-ui capture-ui-content">                            <div class="capture_header">                                <h1>Change Avatar</h1>                            </div>                            <div class="capture_fox_clearfix">                                <div id="{| prefixFieldName |}_profile_pic_editPhoto_container" class="capture_editPhoto_container">                                    <h2><span class="capture_fox_crop_icon"></span>Crop your avatar</h2>                                    <div class="janrainCrop_container_dashed">{| cropImage |}</div>                                </div>                                 <div class="{| profilePicClass |}profile_pic_edit_container">                                    <h2><span class="capture_fox_preview_icon"></span>Avatar Preview</h2>                                    <div id="{| prefixFieldName |}_profile_pic_edit" class="{| profilePicClass |}capture_profile_pic_edit capture_default">                                        {| editImage |}                                    </div>                                </div>                              </div>                       </div>                    </div>                {* /photoManager *}                {* publicProfileLink *}                <h2>Profile</h2>                <div class="hr"></div>                    <div class="capture_fox_editProfile">                    {* editProfileForm *}                        {* edit_firstName *}                        {* edit_lastName *}                        {* edit_email *}                        {* edit_country *}                        {* edit_address1 *}                        {* edit_address2 *}                        {* edit_city *}                        {* edit_state *}                        {* edit_zip *}                        {* edit_birthdate *}                        {* edit_gender *}                      <div class="newsletter-container">                         <h2>Newsletter Subscriptions</h2>                         <div class="hr"></div>                         <div class="news-sub-form">                            <label for="auto-report"><input type="checkbox" name="" id="foxnewsletterIDList_172" value="" />Auto Report</a></label>                            <label for="top-headline"><input type="checkbox" name="" id="foxnewsletterIDList_71" value="" />Top Headlines</a></label>                            <label for="greta-wire"><input type="checkbox" name="" id="foxpromosIDList_139" value="" />GetaWire Alerts</a></label>                            <label for="fn-breaking-alerts"><input type="checkbox" name="" id="foxnewsIDList_35" value="" />Fox News Breaking News Alerts</a></label>                            <label for="bo-opinion"><input type="checkbox" name="" id="foxnewsletterIDList_96" value="" />Best of Opinion</a></label>                            <label for="fb-breaking-alerts"><input type="checkbox" name="" id="foxpromosIDList_32" value="" />Fox Business Breaking News Alerts</a></label>                            <label for="food-drink"><input type="checkbox" name="" id="foxnewsletterIDList_166" value="" />Food & Drink</a></label>                            <label for="pow-pol"><input type="checkbox" name="" id="foxnewsletterIDList_173"  value="" />Power & Politics</a></label>                            <label for="ceo-news"><input type="checkbox" name="" id="foxnewsletterIDList_90" value="" />CEO Newsbrief</a></label>                            <label for="fox-411"><input type="checkbox" name="" id="foxnewsletterIDList_106" value="" />Fox 411</a></label>                            <label for="scitech-geek"><input type="checkbox" name="" id="foxnewsletterIDList_153" value="" />SciTech Geek Sheet</a></label>                            <label for="fb-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_151" value="" />Fox Business Morning Headlines</a></label>                            <label for="health-weekly"><input type="checkbox" name="" id="foxnewsletterIDList_160" value="" />Health Weekly Dose</a></label>                            <label for="week-pass"><input type="checkbox" name="" id="foxnewsletterIDList_171" value="" />Weekly Travel Pass</a></label>                            <label for="most-pop"><input type="checkbox" name="" id="foxnewsletterIDList_69" value="" />Most Popular</a></label>                            <label for="latino-rep"><input type="checkbox" name="" id="foxnewsletterIDList_178" value="" />Latino Report</a></label>                            <label for="urep-mon"><input type="checkbox" name="" id="foxnewsletterIDList_133" value="" />uReport Monthly</a></label>                            <label for="sbc-week"><input type="checkbox" name="" id="foxnewsletterIDList_108" value="" />Small Business Center Weekly Report</a></label>                            <label for="mon-pol-up"><input type="checkbox" name="" id="foxnewsletterIDList_76" value="" />Monthly Politics Update</a></label>                            <label for="fn-mag"><input type="checkbox" name="" id="foxpromosIDList_35" value="" />Fox News Magazine</a></label>                            <label for="pers-finance"><input type="checkbox" name="" id="foxnewsletterIDList_122" value="" />Personal Finance</a></label>                            <label for="fn-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_144" value="" />Fox News Morning Headlines</a></label>                            <label for="fan-scoop"><input type="checkbox" name="" id="foxpromosIDList_42" value="" />Fox Fan Scoop</a></label>                            <label for="fn-fired"><input type="checkbox" name="" id="foxnewsletterIDList_99" value="" />Fox Nation Fired Up</a></label>                         </div>                      </div>                      <h2>Commenting Notifications</h2>                      <div class="hr"></div>                      {* table *}                      <div class="capture_fox_clearfix">                        <div class="capture_right capture_checkbox">                          {* autofollow_conversations *}                        </div>                      </div>                      <div class="hr"></div>                                            <h2>Linked Accounts</h2>                      <div class="hr"></div>                          {* linkedAccounts *}                          {* linkAccountContainer *}                              <h1>Linked Accounts</h1>                              <div class="hr"></div>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'facebook\')" class="capture_secondary capture_fox_social_btn capture_facebook"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Facebook" height="24" width="24" /></span>&nbsp;&nbsp;Facebook</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'google\')" class="capture_secondary capture_fox_social_btn capture_google"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Google" height="24" width="24" /></span>&nbsp;&nbsp;Google</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'twitter\')" class="capture_secondary capture_fox_social_btn capture_twitter"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Twitter" height="24" width="24" /></span>&nbsp;&nbsp;Twitter</a>                               <a href="#" onclick="janrain.engage.signin.triggerFlow(\'yahoo\')" class="capture_secondary capture_fox_social_btn capture_yahoo"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Yahoo" height="24" width="24" /></span>&nbsp;&nbsp;Yahoo</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'linkedin\')" class="capture_secondary capture_fox_social_btn capture_linkedin"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="LinkedIn" height="24" width="24" /></span>&nbsp;&nbsp;Linkedin</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'aol\')" class="capture_secondary capture_fox_social_btn capture_aol"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="AOL" height="24" width="24" /></span>&nbsp;&nbsp;AOL</a>                          {* /linkAccountContainer *}                      <div class="hr"></div>                        <div class="capture_form_item">                          {* submitButton *}                        </div>                    {* /editProfileForm *}                      </div>                      <div class="profile-footer">                         <div class="fox-logo">                         </div>                         <p>&copy;2012 FOX News Network, LLC. All rights reserved.</p>                         <p>This material may not be published, broadcast, rewritten, or redistributed.</p>                         <p>All market data delayed 20 minutes.</p>                         <p><a href="http://www.foxnews.com/about/privacy-policy" target="_blank">Privacy</a> - <a href="http://www.foxnews.com/about/terms-of-use" target="_blank">Terms</a> - <a href="http://help.foxnews.com/index.html" target="_blank">FAQ</a></p>                      </div>              </div>        <div style="display:none;" id="newPasswordSuccess" class="capture_med_footer">              <h1>You did it!</h1>              <div class="hr"></div>              <p>Your password has been successfully changed.</p>            <div class="capture_footer">                <a href="#" class="capture_btn capture_secondary">Close</a>            </div>        </div>        <div style="display:none;" id="changepassword">            <h1>Change Your Password</h1>            <div class="hr"></div>            {* newPasswordForm *}                  {* oldpassword *}                  {* newpassword *}                  {* newpasswordConfirm *}                  <div class="capture_textRight">                     <a href="#" data-capturescreen="forgotPassword">I forgot my password</a>                     {* newPasswordFormButton *}                   </div>            {* /newPasswordForm *}        </div><div style="display: none;" id="publicProfile">        <h1>Member Profile</h1><div class="make-acc">Don\'t have an account? <a onclick="window.janrain.capture.ui.renderScreen(\'signIn\')">Create One Now</a></div>        <div class="capture_profile_section">            <div class="capture_profile_pic capture_default inline">                <div id="profile_pic" class="capture_default">                    {* profilePhotoCustom *}                </div>            </div>        </div>        <div class="capture_profile_section">             <h1 class="capture_display_name">{* public_displayName *}</h1>            {* created *}            {* public_city *}            {* public_state *}            {* public_country *}            {* public_birthdate *}            {* public_gender *}        </div>        <h2>User Stats</h2>        <div class="hr"></div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left"><a href="#">Comments</a></h3>            <h2 class="capture_right">{* public_comments *}</h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left"><a href="#">uReports</a></h3>            <h2 class="capture_right">value</h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left">Likes</h3>            <h2 class="capture_right">{* public_likes *}</h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left">Shares</h3>            <h2 class="capture_right">value</h2>        </div></div><div style="display:none;" id="signIn">            <h1>Sign In</h1>            <div class="capture_signin">                <h2>With your existing account</h2>                <div class="hr"></div>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'facebook\')" class="capture_secondary capture_fox_social_btn capture_facebook"><span class="janrain-provider-icon-24 janrain-provider-icon-facebook-custom"></span>&nbsp;&nbsp;Facebook</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'google\')" class="capture_secondary capture_fox_social_btn capture_google"><span class="janrain-provider-icon-24 janrain-provider-icon-google-custom"></span>&nbsp;&nbsp;Google</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'twitter\')" class="capture_secondary capture_fox_social_btn capture_twitter"><span class="janrain-provider-icon-24 janrain-provider-icon-twitter-custom"></span>&nbsp;&nbsp;Twitter</a>                         <a href="#" onclick="janrain.engage.signin.triggerFlow(\'yahoo\')" class="capture_secondary capture_fox_social_btn capture_yahoo"><span class="janrain-provider-icon-24 janrain-provider-icon-yahoo-custom"></span>&nbsp;&nbsp;Yahoo</a>                       <a href="#" onclick="janrain.engage.signin.triggerFlow(\'linkedin\')" class="capture_secondary capture_fox_social_btn capture_linkedin"><span class="janrain-provider-icon-24 janrain-provider-icon-linkedin-custom"></span>&nbsp;&nbsp;Linkedin</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'aol\')" class="capture_secondary capture_fox_social_btn capture_aol"><span class="janrain-provider-icon-24 janrain-provider-icon-aol-custom"></span>&nbsp;&nbsp;AOL</a>                <div class="capture_fox_clearfix">                    <h2 class="capture_left">With a Fox News account</h2>                     <a href="#" data-capturescreen="traditionalRegistration" class="capture_right capture_fox_marginTop">Sign Up &rarr;</a>                </div>                <div class="hr"></div>                    {* #userInformationForm *}                        {* traditionalSignIn_emailAddress *}                        {* traditionalSignIn_password *}                        <div class="capture_fox_buttoncol">                             <a href="#" data-capturescreen="forgotPassword">I forgot my password</a>                            {* traditionalSignIn_signInButton *}                        </div>                    {* /userInformationForm *}                    <p>Find answers to your questions about the Fox News Community in our <a href="http://help.foxnews.com/index.html" target="_blank">FAQs</a>.</p>            </div>        </div>        <div style="display:none;" id="returnSocial">                <h1>Sign In</h1>                <div class="hr"></div>                <h2>Welcome back, {* welcomeName *} (<a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">not you?</a>)</h2>                <div class="capture_fox_clearfix">                    <h2 class="capture_left">Sign In with your account</h2>                     <div class="capture_right capture_fox_marginTop"><a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">Use another account &rarr;</a></div>            </div>                <div class="hr"></div>                    <a href="#" onclick="janrain.engage.signin.triggerFlow(\'{* returnProvider *}\')" class="capture_secondary capture_fox_social_btn capture_{* returnProvider *}"><span class="janrain-provider-icon-24 janrain-provider-icon-{* returnProvider *}-custom"></span>&nbsp;&nbsp;{* returnProvider *}</a>                <div class="capture_fox_clearfix">                    <a href="http://www.foxnews.com/about/privacy-policy" target="_blank" class="capture_right">Privacy Policy</a>            </div>            </div>                <div style="display:none;" id="returnTraditional">            <h1>Sign In</h1>            <div class="hr"></div>            <h2>Welcome back, <span id="displayNameData"></span>  (<a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">not you?</a>)</h2>            <div class="capture_fox_clearfix">                <h2 class="capture_left">Sign in with your account</h2>                <div class="capture_right capture_fox_marginTop"><a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">Use another account &rarr;</a></div>            </div>            <div class="hr"></div>                        {* #userInformationForm *}                            {* traditionalSignIn_emailAddress *}                            {* traditionalSignIn_password *}                <div class="capture_fox_buttoncol">                                {* traditionalSignIn_signInButton *}                            </div>                        {* /userInformationForm *}<div class="capture_fox_clearfix">                    <a href="http://www.foxnews.com/about/privacy-policy" target="_blank" class="capture_right">Privacy Policy</a>            </div>                    </div>        <div style="display:none;" id="socialRegistration">                <h1>You\'re Almost Done!</h1>                <p>Complete the following form to submit your registration.</p>                <div class="hr"></div>                {* #socialRegistrationForm *}                    {* socialRegistration_firstName *}                    {* socialRegistration_lastName *}                    {* socialRegistration_displayName *}                    {* socialRegistration_emailAddress *}                    {* registration_birthday *}                    <h2>Terms of Service</h2>                    <div class="hr"></div>                    {* agreeToTerms *}                    <div class="capture_textRight">                        {* socialRegistration_button *}                </div>                {* /socialRegistrationForm *}        </div>        <div style="display:none;" id="traditionalRegistration">                <h1>Create a Fox News Account</h1>                <p>Already have an account? <a href="#" data-capturescreen="signIn">Sign In &rarr;</a></p>                <div class="hr"></div>                {* #registrationForm *}                    {* traditionalRegistration_firstName *}                    {* traditionalRegistration_lastName *}                    {* traditionalRegistration_displayName *}                    {* traditionalRegistration_emailAddress *}                    {* traditionalRegistration_password *}                    {* traditionalRegistration_passwordConfirm *}                    {* registration_birthday *}                    <div class="capture_fox_clearfix">                        <h2 class="capture_left">Subscribe to Fox News Email Newsletters</h2>                         <div class="capture_right capture_fox_marginTop">Optional</div>                    </div>                    <h2>Security Check</h2>                    <div class="hr"></div>                    {* captcha *}                    {* agreeToTerms *}                    <div class="capture_textRight">                    {* createAccountButton *}                    </div>                {* /registrationForm *}        </div>                <div style="display:none;" id="registrationSuccess">                <h1>Thank you for registering!</h1>                <div class="hr"></div>                <p>Once you confirm your email address you will be able to access commenting and exclusive content on all the Fox News Digital websites!</p>                <h2>Verify your email</h2>                <div class="hr"></div>                <p>We just sent an email to your account to verify your email address. Check your inbox and click on the link to confirm your account.</p>                <!--                 <p>You are also signed up for the following newsletters:</p>                <ul>                    <li>FPO</li>                    <li>FPO</li>                </ul>                -->                <div class="capture_textRight">                    <a href="#" onclick="janrain.capture.ui.modal.close()" class="capture_btn capture_primary">Close</a>                </div>        </div>        <div style="display:none;" id="forgotPassword">            <h1>Forgot My Password</h1>            <div class="hr"></div>            <h2>Enter your current email address, and we\'ll send you instructions to create a new password.</h2>            {* #forgotPasswordForm *}                {* forgotPassword_emailAddress *}                <div class="capture_textRight">                    {* forgotPassword_sendButton *}                </div>            {* /forgotPasswordForm *}        </div>        <div style="display:none;" id="forgotPasswordSuccess">            <h1>Forgot My Password</h1>            <div class="hr"></div>            <div class="capture_fox_clearfix">              <h2 class="capture_left">Success! You should receive an email shortly with instructions to change your password.</h2>              <a href="#" class="capture_btn capture_primary capture_right" onclick="janrain.capture.ui.modal.close()">Close</a>            </div>            </div>        <div style="display:none;" id="mergeAccounts">            {* mergeAccounts {"custom": true} *}            <h1>Create a Fox News Account</h1>            <div class="hr"></div>            <h2>It looks like you\'ve been here before.<br /><br>            We already have an account for: <br />            <span class="capture_fox_alert">{| current_emailAddress |}</span>            </h2>            <h2>Connect this session with your existing account</h2>            <div class="hr"></div>                <button id="capture_mergeAccounts_mergeAccounts_connectButton" name="mergeAccounts_connectButton" data-capturefield="mergeAccounts_connectButton" type="button" class="capture_secondary capture_fox_social_btn">                    <span class="janrain-provider-icon-24 janrain-provider-icon-{| existing_provider_lowerCase |}-custom"></span>                    <span class="janrain-provider-icon-24 janrain-provider-icon-{| current_provider_lowerCase |}-custom"></span>&nbsp;&nbsp; Connect                </button>        </div>        <div style="display:none;" id="traditionalAuthenticateMerge">            <h1>Sign in to complete account merge</h1>            <div class="hr"></div>            {* #tradAuthenticateMergeForm *}                {* traditionalSignIn_emailAddress *}                {* traditionalSignIn_password *}                <div class="capture_fox_buttoncol">                    {* traditionalSignIn_signInButton *}        </div>             {* /tradAuthenticateMergeForm *}        </div>';return A;}());window.AuthenticationService_Janrain=(function(Y,j){function R(v){return !!(j.location.hostname.indexOf(v)>-1);}if(!j.console){j.console={log:function(){},error:function(){}};}var G=function(){var w=false;if(w&&j.console){try{return console.log.apply(console,arguments);}catch(v){console.log(arguments);}}};var e=(function(){var v=function(z){var w,AA,AB={},AC=this;for(w=0,AA=z.length;w<AA;w+=1){z[w][2].prototype=z[w][1];AB[z[w][0]]=new z[w][2];}for(var AD in AB){v.prototype[AD]=AB[AD];}};return v;})();var W=function(){},K=function(){},o=function(){},a=function(){},q=function(){},b=function(){},D=function(){},I=function(){},g=function(){},B=function(){},J=function(){},C=function(){},t=function(){},l={},V={},E={},T={},r={},F={},s={},Q={},u={},O={},U={},P={},H={};var X=true,L={},f,S,Z,k,h,M,d,N,m=j.location.hash;if(X){L={livefyre:{network:"foxnewsprod.fyre.co",domain:"zor.livefyre.com",jsURL:"zor.livefyre.com/wjs/v3.0/javascripts/livefyre.js",siteid:"310256",siteURL:"http://www.foxnews.com/",el:"livefyre_comment_stream"},janrain:{appUrl:"https://login.foxnews.com",apiURL:"https://signin.foxnews.com/",jsURL:"d16s8pqtk4uodx.cloudfront.net/foxnews-prod/load.js",appId:"macbnjrmzryj7utchqmtukf3se",clientId:"t6emets785a92rr2zc5wkbnrsy59kyny",captureServer:"https://signin.foxnews.com",federateServer:"https://sso.foxnews.com",recaptchaPublicKey:"6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP",backplaneBusName:"fox-news"},ureport:{url:"http://www.foxnews.com/auth/info?callback="}};S=["http://global.fncstatic.com/static/v/all/css/janrain.css"];h="http://www.foxnews.com/community/user/profile/edit";}f="/static/v/all/html/auth-tpl.html";if(j.location.host.indexOf("ureport")>-1){Z=j.location.protocol+"//"+location.host+"/xdcomm.html";N=j.location.protocol+"//"+location.host+"/logout.html";}else{Z=j.location.protocol+"//"+location.host+"/static/v/all/html/xdcomm.html";N=j.location.protocol+"//"+location.host+"/static/v/all/html/logout.html";}q=function(){G("tool Constructor Loaded");};F={loadExtJs:function(AA,AC,AB,x){G("Loading External JS",AB,typeof AB);var z=document.createElement("script"),v;z.type="text/javascript";z.id=AC||"";z.async=true;z.setAttribute("type","text/javascript");if(x==="share"){z.src="http://widget-cdn.rpxnow.com/js/lib/fox-news/widget.js";}else{z.src=document.location.protocol+"//"+((x==="www")?"www.":"")+AA;}if(typeof AB==="function"){z.onload=z.onerror=z.onreadystatechange=function(AD){G(">> !! event",AD);if((!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){AB();}};}var w=document.getElementsByTagName("script")[0];w.parentNode.insertBefore(z,w);},assert:function(v,w){return(typeof v===w)?true:false;},domTest:function(v){return(v.length!=0)?true:false;},getDomain:function(){var z=j.location,w=z.hostname,x=z.protocol,v=w.split(".");return"www."+v[(v.length-2)]+"."+v[(v.length-1)];}};C=function(){G("DOM Constructor Loaded");};P={setDomReady:function(w){var z=Y("#authentication"),AA=Y("#account"),AB=AA.find(".user-options"),v=Y("body"),x=Y("#section-content");var AC={acc:AA,body:v,user:AA.find(".username"),login:z.find(">li:last-child"),authen:z,name:AB.find("span"),register:z.find(".first"),noAccount:z,userOptions:AB,accountNav:AA.find(".encapsulate"),profile:AB.find("ul > li.first"),logout:AB.find("ul > li:last-child"),hasAccount:AA.find(".username"),publicProfile:function(){return{likes:Y("#fox_lf_likes"),shares:Y("#fox_jr_shares"),ureport:Y("#fox_ur_reports"),comments:Y("#fox_lf_comments")};},whatCounts:function(){return Y(".news-sub-form");},uReport:function(){var AD=Y("#account");return{acc:AD,redBtn:Y("#main").find(".red-butt ")};},sectionContent:x};AUTH_Manager.onReady("capture",function(){});w(AC);}};I=function(){G("RequireConst Loaded");};T={token:null,template:null,getToken:function(){var v=this;G("$.cookie",typeof Y.cookie);try{if(j.localStorage){v.token=localStorage.getItem("janrainCaptureToken");}else{}}catch(w){G(w);}},classLogin:"capture_modal_open",janrainFlow:false,state:{janrain:false,ureport:false,livefyre:false,template:false,backplane:false,badgeville:false},dataConfig:{janrain:{clientId:"c5dr2na59wh3bmna2aqgdnbzapeffy7q"},livefyre:{},ureport:{},whatcounts:{}},loadTemplate:function(){var AJ=this,w,AC,AE,AG=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","registrationVerify","registrationVerified","editProfile"],v=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","registrationVerify","registrationVerified"],AB=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","signIn","registrationVerify","registrationVerified","returnTraditional","returnSocial","forgotPasswordSuccess"];AC=document.createElement("div");AC.id="templateHolder";AE=(j.FOX_Janrain_Auth_TPL)?true:false;G("Template INline",AE);if(AE){var AH=Y(FOX_Janrain_Auth_TPL);if(AJ.janrainFlow==="profileFlow"){P.setDomReady.sectionContent.append(AC);for(var AF=0,AA=AH.length;AF<AA;AF+=1){for(var AD=0,x=v.length;AD<x;AD+=1){if(AG[AD]===AH[AF].id){AH[AF].innerHTML="";AH[AF].id="";}}}Y(AC).html(AH);V.init();}else{if(AJ.janrainFlow==="authFlow"){P.setDomReady.body.append(AC);for(AF=0,AA=AH.length;AF<AA;AF+=1){for(AD=0,x=AG.length;AD<x;AD+=1){if(AG[AD]===AH[AF].id){AH[AF].innerHTML="";AH[AF].id="";}}}Y(AC).html(AH);V.init();}else{G("TEMPLAE",AH,"!",AH[0].id==="resetPasswordUserSuccess");P.setDomReady.sectionContent.append(AC);var AI=[];for(AF=0,AA=AH.length;AF<AA;AF+=1){var AK=false;for(AD=0,x=AB.length;AD<x;AD+=1){if(AB[AD]===AH[AF].id){AK=true;}}if(!AK){AH[AF].innerHTML="";AH[AF].id="";}}G("temp.push(z);",AI);G("TEMPLAE!!",AH);Y(AC).html(AH);V.init();}}T.state.template=true;}else{Y.ajax({type:"GET",url:f,dataType:"html",beforeSend:function(){G("getting Template  beforeSend");},success:function(AM){G("TYPEOF DATA",typeof AM);G("head",Y("head").length,"body",Y("body").length);if(AJ.janrainFlow==="profileFlow"){P.setDomReady.sectionContent.append(z);z=Y(z).html(AM);}else{var AL=AM.replace(/\'/gi,"'");P.setDomReady.body.append(z);var z=P.setDomReady.body.find("#templateHolder");z.html(AL);z.find("#editProfile").remove();G("tpl",z.find("#editProfile"));G("tpl",z.find("#editProfile"),z);}T.state.template=true;V.init();}});}}};W=function(){G("Not in Use! > Backplane Constructor Loaded, ");};l={};K=function(){G("JanrainConstructor Loaded");if(typeof j.janrain!=="object"){j.janrain={};}j.janrain.settings={};j.janrain.settings.capture={};j.janrain.settings.share={};janrain.settings.appUrl=L.janrain.appUrl;janrain.settings.custom=true;janrain.settings.capture.flowVersion="HEAD";janrain.settings.capture.responseType="token";janrain.settings.capture.flowName="foxNewsFlow";janrain.settings.capture.stylesheets=S;janrain.settings.tokenUrl=j.location.protocol+"//"+j.location.host+"/";janrain.settings.capture.appId=L.janrain.appId;janrain.settings.capture.redirectUri=j.location.protocol+"//"+j.location.host;janrain.settings.capture.clientId=L.janrain.clientId;janrain.settings.capture.captureServer=L.janrain.captureServer;janrain.settings.capture.recaptchaPublicKey="6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP";janrain.settings.type="embed";janrain.settings.tokenAction="event";janrain.settings.format="two column";janrain.settings.capture.modalBorderOpacity=0;janrain.settings.capture.modalBorderWidth=0;janrain.settings.capture.modalBorderRadius=2;janrain.settings.capture.modalCloseHtml='<span class="janrain-icon-16 janrain-icon-ex"></span>';janrain.settings.capture.modalBorderColor="transparent";janrain.settings.language="en";janrain.settings.capture.setProfileCookie=true;janrain.settings.capture.keepProfileCookieAfterLogout=true;janrain.settings.capture.hideSavedProfileMessageDelay=15000;switch(T.janrainFlow){case"authFlow":janrain.settings.capture.setProfileData="true";janrain.settings.capture.registerFlow="socialRegistration";break;case"profileFlow":janrain.settings.autoSave=true;janrain.settings.screenToRender="editProfile";break;case"emailFlow":janrain.settings.screenToRender="registrationVerify";janrain.settings.capture.registerFlow="socialRegistration";break;case"passwordFlow":janrain.settings.screenToRender="resetPassword";janrain.settings.capture.setProfileData="true";janrain.settings.capture.registerFlow="socialRegistration";break;}janrain.settings.capture.backplane=true;janrain.settings.capture.backplaneBusName=L.janrain.backplaneBusName;janrain.settings.capture.federate=true;janrain.settings.capture.federateServer=L.janrain.federateServer;janrain.settings.capture.federateXdReceiver=Z;janrain.settings.capture.federateLogoutUri=N;janrain.settings.share.providers=["facebook","twitter","linkedin","email"];janrain.settings.share.providersEmail=["google","yahoo"];janrain.settings.share.modes=["broadcast","contact"];janrain.settings.share.attributionDisplay=false;janrain.settings.share.previewMode=0;janrain.settings.share.modalBackgroundColor="#000000";janrain.settings.share.modalBorderRadius="2";janrain.settings.share.modalOpacity="0";janrain.settings.share.modalWidth="0";janrain.settings.share.bodyBackgroundColor="#F3F3F3";janrain.settings.share.bodyBackgroundColorOverride=true;janrain.settings.share.bodyColor="#333";janrain.settings.share.bodyContentBackgroundColor="#ffffff";janrain.settings.share.bodyFontFamily="Helvetica";janrain.settings.share.bodyTabBackgroundColor="#F3F3F3";janrain.settings.share.bodyTabColor="#424242";janrain.settings.share.elementBackgroundColor="#f3f3f3";janrain.settings.share.elementBorderColor="#ccc";janrain.settings.share.elementBorderRadius="3";janrain.settings.share.elementButtonBorderRadius="3";janrain.settings.share.elementButtonBoxShadow="0";janrain.settings.share.elementColor="#333333";janrain.settings.share.elementHoverBackgroundColor="#333333";janrain.settings.share.elementLinkColor="#173951";if(T.janrainFlow==="profileFlow"){janrain.settings.packages=["login","capture"];}else{janrain.settings.packages=["login","capture","share"];}janrain.ready=true;};V={config:{capture:{url:L.janrain.jsURL,id:"janrainAuthWidget"},share:{url:"default",id:"janrainWidgets",type:"share"}},session:false,reset:false,init:function(){var v=this;G("loading Janrain");G("template: init",T.template);v.widgetOnload();v.captureWidgetOnLoad();F.loadExtJs(v.config.capture.url,v.config.capture.id,v.loadedJS.loadJan);return this;},API:{requestSent:false,url:L.janrain.apiURL,token:"",updateAPI:function(v,x){var w=this;if(v==="livefyre"){return{type_name:"user",access_token:w.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+u.userLivefyre.id+'"}}}'};}else{if(v==="livefyre_temp"){return{type_name:"user",access_token:w.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+u.uuid+'@foxnewsprod.fyre.co"}}}'};}else{if(v=="test"){return{type_name:"user",access_token:w.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+x+'"}}}'};}}}},execute:function(w,v){var z=this,x="FOX_Janrain_EXEC";v.jsonp=x;if(typeof j[x]!=="function"){j[x]=function(AA){G("Janrain API Executed",AA);if(AA.code==414){s.janrain.tokenRefreshed();s.janrain.signOut();G("414 Error,token expired");s.domEvents.logoutSuccess();return false;}else{if(AA.code==310){s.domEvents.logoutSuccess();s.janrain.signOut();G("310 Error,token expired");return false;}else{if(!AA.code&&!AA.stat){s.domEvents.logoutSuccess();s.janrain.signOut();G("No Code Error and No Stat response");return false;}else{if(AA.stat==="ok"){z.requestSent=true;u.uuid=AA.result.uuid;u.email=AA.result.email;u.userJanrain=AA.result;u.displayName=AA.result.displayName;s.displayName();if(Y("#authentication").css("display")==="block"){s.domEvents.loginSuccess();}if(P.setDomReady.acc.hasClass("alt-style")){s.displayShowsProfile();}Q.uLogin(V.API.token,u.email,u.uuid);H.idmsLogin(V.API.token,u.email,u.uuid);if(AA.result.externalServices.livefyre.livefyre_id==null||AA.result.externalServices.livefyre.livefyre_id==="null"||AA.result.externalServices.livefyre.livefyre_id===""){z.update("entity.update",z.updateAPI("livefyre_temp"));}}}}}};}Y.ajax({data:v,url:z.url+w,dataType:"script",async:true,cache:true});},update:function(w,v){var z=this,x="FOX_Janrain_UPD";v.jsonp=x;if(typeof j[x]!=="function"){j[x]=function(AA){G("Janrain API Updated",AA);};}Y.ajax({data:v,url:z.url+w,dataType:"script",async:true,cache:true});}},loadedJS:{loadJan:function(){if(typeof janrain==="object"){G("Janrain Loaded",(j.janrain));T.state.janrain=true;}},loadShare:function(){G("Share Widget Loader",(j.janrain),janrain);}},widgetOnload:function(){j.janrainWidgetOnload=function(){AUTH_Manager.fireReady("janrain");G("janrainWidgetOnload Executed");G("is backplane object",(typeof j.Backplane==="object")?true:false);};return this;},captureWidgetOnLoad:function(){G("captureWidgetOnload Fired");j.janrainCaptureWidgetOnLoad=function(){var v=janrain.events;G("janrainCaptureWidgetOnLoad is Executed by Janrain");AUTH_Manager.fireReady("capture");v.onCaptureSuccessfulLogin.addHandler(s.janrain.successfulLogin);v.onCaptureSuccessfulRegistration.addHandler(s.janrain.successfulRegistration);v.onCaptureStartRegistration.addHandler(s.janrain.registrationStart);v.onCaptureAccessDenied.addHandler(s.janrain.accessDenied);v.onAuthWidgetLoad.addHandler(s.janrain.onAuthWidgetLoad);v.onModalClose.addHandler(s.janrain.onModalClose);v.onCaptureValidationSuccess.addHandler(s.janrain.validation.onValidationSuccess);var w=F.domTest(Y("#livefyre_comment_stream")),z=Y("#disqus_thread");G("livefyreDOm",w);if(!w){var x=document.createElement("div");x.id="livefyre_comment_stream";if(z.length>0){z.attr("id","livefyre_comment_stream");z.empty();w=true;}T.livefyreSet=true;}else{z.remove();T.livefyreSet=false;}if(w&&T.janrainFlow==="authFlow"){v.onCaptureBackplaneReady.addHandler(s.janrain.backplaneReady);}v.onCaptureRenderComplete.addHandler(s.janrain.screen.onRenderComplete);v.onCaptureSuccessfulProfileSave.addHandler(s.janrain.screen.editProfile.onProfileUpdate);v.onCaptureAutoSaveUpdate.addHandler(s.janrain.screen.editProfile.onProfileAutoSave);v.onCaptureScreenShow.addHandler(s.janrain.screen.onScreenShow);v.onCaptureModalReady.addHandler(s.janrain.screen.uiReady);v.onCaptureSessionFound.addHandler(s.janrain.sessionFound);v.onCaptureSessionNotFound.addHandler(s.janrain.sessionNotFound);v.onCaptureSessionEnded.addHandler(s.janrain.sessionEnded);v.onCaptureExpiredToken.addHandler(s.janrain.tokenExpired);v.onCaptureFederateRefreshedToken.addHandler(s.janrain.onRefreshToken);if(T.janrainFlow==="authFlow"){}v.onCaptureError.addHandler(s.janrain.errorEvent);j.janrain.capture.ui.start();};return this;}};a=function(){G("BadgeVille Constructor Loaded");};r={config:{id:"badgeville",domain:"foxnews.com",username:"@user.foxnews.com",key:"5302cf0355a5410f0beacdf2de891c52",url:"sandbox.v2.badgeville.com/v3/badgeville-current.js?key=5302cf0355a5410f0beacdf2de891c52&domain=foxnews.com&debugInit=false"},setUp:function(){var v=this;j.BadgevilleAsynchInit=function(){G("BadgevilleAsynchInit Executed!",v);G(u.uuid+v.config.username);Badgeville.setPlayer({email:u.uuid+v.config.username,display_name:u.userJanrain.displayName});G("Step1");Badgeville.extend(Badgeville.Lang,{activitiesHeader:"Activities"});G("Step2");Badgeville.crouton=function(){};Badgeville.Settings.showToast=0;Badgeville.Settings.showWaffle=false;G("Step3");Badgeville.ready(function(){G("working test");Y("body").bind("click",function(){Badgeville.credit("chat",function(w){G("data",w);});});});G("Step4");};G("window.BadgevilleAsynchInit",(typeof j.BadgevilleAsynchInit));v.loadBadgeville();},loadBadgeville:function(){var v=this;F.loadExtJs(v.config.url,v.config.id,v.badgeLoaded);},badgeLoaded:function(){if(typeof Badgeville==="function"){T.state.badgeville=true;G("Badgeville Loaded",Badgeville);}}};o=function(){G("Livefyre Constructor Loaded");};E={conv:null,url:L.livefyre.jsURL,config:[],network:L.livefyre.network,eventsDelegate:null,commentsNumber:0,customStrings:{sortLabel:"SORT BY"},init:function(v){var w=this;if(typeof fyre!=="object"){F.loadExtJs(E.url,"",E.lfLoaded);}},lfLoaded:function(){G("fyre loaded!",fyre,typeof fyre);G("Testing BACKPLANE",typeof Backplane,typeof j.Backplane);E.eventsDelegate=new fyre.conv.BackplaneAuthDelegate(j.Backplane);E.events.eventsDelegate();E.grabMetaData();},grabMetaData:function(x){var z=this,w={},v=[],AC=Y('meta[name="livefyreconfig"]'),AB=false,AA;G("META whatsup!",AC,AC.attr("collectionmeta"));if(AC.attr("siteId")){AA=AC.attr("siteId");}else{AA=L.livefyre.siteid;}if(AC.length>0){w={el:L.livefyre.el,siteId:AA,checksum:AC.attr("checksum"),articleId:AC.attr("articleId"),collectionMeta:AC.attr("collectionmeta")};}else{w={collectionMeta:"eyJ0eXAiOiJqd3QiLCJhbGciOiJIUzI1NiJ9.eyJ0aXRsZSI6Iih0ZXN0aW5nIDMgMiAxKSBUaGlzIGlzIGFuIG90aGVyIHRlc3QgdGl0bGUuIiwidXJsIjoiaHR0cDpcL1wvZXhhbXBsZS5jYnMuY29tXC9leGFtcGxlMi5odG1sIiwidGFncyI6IiIsImFydGljbGVJZCI6InRlc3RpbmcxMjM0IiwiY2hlY2tzdW0iOiJlNzI0YjFkMGRjOTZmZjQ4NjcxN2EwNzkyOGU2YjU4MCJ9.3ywwCkxPrLxt0fzCTg6yqNlr79jep6IOaSJYS_jNEUk",checksum:"e724b1d0dc96ff486717a07928e6b580",siteId:"303683",articleId:"testing1234",el:"livefyre_comment_stream"};AB=true;}if(!AB){E.config.push(w);G("Livery Config",E.config);z.setUpLiveFyre();}},setUpLiveFyre:function(){var w=this;var v=w.customStrings;w.conv=fyre.conv.load({strings:v,network:w.network,authDelegate:E.eventsDelegate},w.config,E.events.doLivefyreAuth);},events:{eventsDelegate:function(w){G("arguments",w);var v=E.eventsDelegate;v.login=function(z){G("LOGIN",z);var x=function(){z.success();janrain.events.onCaptureLoginSuccess.removeHandler(x);janrain.events.onModalClose.removeHandler(AA);};var AA=function(){z.failure();janrain.events.onModalClose.removeHandler(AA);janrain.events.onCaptureLoginSuccess.removeHandler(x);};s.janrain.signin();j.Backplane.expectMessages("identity/login");janrain.events.onCaptureLoginSuccess.addHandler(x);janrain.events.onModalClose.addHandler(AA);};v.logout=function(x){G("Delegate livefyreLogout",x);s.janrain.signOut();fyre.conv.BackplaneAuthDelegate.prototype.logout.call(v,x);j.livefyreLogout=function(){G("Livefyre Internal Logout Executed!",x);fyre.conv.BackplaneAuthDelegate.prototype.logout.call(v,x);};janrain.events.onCaptureSessionEnded.addHandler(livefyreLogout);};v.viewProfile=function(z,AA,AE){G(this,"view1",z,"user",AA,AA.id.split("@")[0],AE);var AF=AA.id.split("@")[0];var AC='<a id="'+AF+'" style="display: none;" data-capturescreen="publicProfile" data-captureuseruuid="'+AF+'">public profile</a>';Y("body").append(AC);function x(AG){G("Fired on Public Profile");}var AD=Y("#"+AF);AB(AD[0]);Y("#"+AF).remove();function AB(AH){if(document.createEvent){var AG=document.createEvent("MouseEvents");AG.initEvent("click",true,false);AH.dispatchEvent(AG);}else{if(document.createEventObject){AH.fireEvent("onclick");}else{if(typeof AH.onclick==="function"){AH.onclick();}}}}};v.editProfile=function(x){G("edit",x);s.editProfile();};v.share=function(x){G("share!");x.success();};},doLivefyreAuth:function(v){G("doLiveFyreAuth Fired",v,typeof v.on);G("livefyreProto.commentsNumber",E.commentsNumber);v.on("commentShared",function(w){G("SHARE",w);w.success();});v.on("commentPosted",function(w){G("commentPosted",w);O.commentPost();});v.on("commentLiked",function(w){G("commentLiked",w);});v.on("commentFlagged",function(w){G("commentFlagged",w);});v.on("commentCountUpdated",function(x){G("commentCountUpdated",x);E.commentsNumber=x;var w=Y(".user-interaction > li.comments");w=(w.size()>0)?w:Y(".post-footer .comments");G("COMMENTS",w);if(w.size()>0){if(w.css("display")==="none"){if(w.find("span").size()==0){w.find("a").html("<span></span> "+x+" Comments");}else{w.find("a").html(x+" Comments");}w.css({display:"list-item"});}else{if(w.find("a > span").size()>0){w.find("a").html("<span></span> "+x+" Comments");}else{w.find("a").html(x+" Comments");}}}});v.on("initialRenderComplete",function(x){G("initialRenderComplete",x);if(j.FOX_LivefyreIntegrationService){FOX_LivefyreIntegrationService.isReady();}s.livefyre.displayLogo();s.livefyre.hashComment();var w=Y(".user-interaction > li.comments");G("COMMENTS",w);if(w.size()>0){if(w.css("display")==="none"){if(w.find("a > span").size()>0){w.find("a").html("<span></span> "+E.commentsNumber+" Comments");}else{w.find("a").html(E.commentsNumber+" Comments");}w.css({display:"list-item"});}else{if(w.find("span").size()==0){w.find("a").html("<span></span> "+E.commentsNumber+" Comments");}else{w.find("a").html(E.commentsNumber+" Comments");}w.css({display:"list-item"});}}});}},API:{url:"http://quill.foxnews-1.fyre.co/profile/",config:{callback:"FOX_Livefyre_API",actor_token:"eyJhbGciOiAiSFMyNTYiLCAidHlwIjogIkpXVCJ9.eyJkb21haW4iOiAiZm94bmV3c3Byb2QuZnlyZS5jbyIsICJleHBpcmVzIjogMTM1MDc3NjkxOC41MzcxNjIsICJ1c2VyX2lkIjogInN5c3RlbSJ9.2NW1RIfpX98NF7491fYzneWDq1Ar1soJZBZjFhmAFYg"},execute:function(w){var v=this;j[v.config.callback]=function(x){G("Livefyre API executed",x);u.userLivefyre=x.data;u.userLivefyre.id=u.uuid+"@"+E.network;u.commentCount=x.data.user_comment_count;u.likeCount=x.data.user_liked_count;w();};Y.ajax({url:v.url+u.uuid+"/",data:v.config,dataType:"script",async:true,cache:true});},onProfileUpdate:function(){var w="http://foxnews-1.fyre.co/api/v1.1/private/capture/profile_updated/?jrtoken=",v="FOX_livefyreProfileUpdate";j[v]=function(x){G("Profile Update to LF",x);};Y.ajax({url:w+V.API.token+"&callback="+v,dataType:"script",async:true,cache:true});},onLoginSuccessFromJanrain:function(){var x=Y("#livefyre_comment_stream");var w=x.find(".fyre-widget .fyre-auth .fyre-login-bar .fyre-user-loggedout"),v="Signing In...";Y.loadAttempt(250,150,function(){return(w&&w.text()!==v)?true:false;},function(){w.text(v);});}},publicProfile:function(){var w=Y(".fyre-stream-content"),x=w.find("article"),v=Y(".fyre-user-loggedin");if(v.size()&&!v.attr("profileSet")){v.attr("data-capturescreen","publicProfile").attr("data-captureuseruuid",u.uuid).attr("profileSet","true");}w.find(".fyre-comment-article").each(function(AE){var AF=Y(this),z=AF.find(".fyre-comment-user:eq(0)"),AB=z.find("a:eq(0)"),AD=AF.find("header:eq(0)");if(z.attr("data-author-id")){var AA=z.attr("data-author-id").split("@")[0];if(AB.hasClass("fyre-comment-author")&&!AB.attr("profileSet")){AB.attr("data-capturescreen","publicProfile").attr("data-captureuseruuid",AA).attr("profileSet","true");if(AD.size()>0){var AC=AD.find("a");if(AC.hasClass("fyre-comment-username")&&!AC.attr("profileSet")){AC.attr("data-capturescreen","publicProfile").attr("data-captureuseruuid",AA).attr("profileSet","true");}}}}});}};D=function(){G("uReport Constructor Loaded");var v=Q;v.cookieSet=function(){return(Y.cookie("SABRE_ID"))?true:false;};v.ureportHost=(function(){return(j.location.host.indexOf("ureport")>-1)?true:false;})();};Q={config:{url:L.ureport.url,token:"&token=",email:"&email=",user:"&username="},uLogin:function(z,x,AB){G("ureport Login",z,x,AB);if(!R("ureport")){return false;}var AA=this,v="FOX_ureport_SABRE",w=AA.config;G("_t.cookieSet()",AA,L.ureport);j[v]=function(AC){G("respone from UREPORT LOGIN",AC,"cookies set?",AA.cookieSet());if(AA.ureportHost){G("Cookie Created");Y.cookie("SABRE_ID",AC.fm,{path:"/"});var AD=P.setDomReady.uReport().acc;G("acc",AD,AD.hasClass("action"));if(!AD.hasClass("action")&&typeof j.Backplane==="function"){if(j.location.pathname==="/assignment"){setTimeout(function(){j.location.pathname="/submitreport";},500);}else{setTimeout(function(){j.location.reload(true);},500);}}}};Y.ajax({url:w.url+v+w.token+z+w.email+x+w.user+AB,async:true,cache:true,dataType:"script"});},uLogout:function(){var w=this,v=P.setDomReady.uReport().acc;if(w.cookieSet()&&w.ureportHost&&v.hasClass("action")){G("ureport Logout");Y.cookie("SABRE_ID",null,{path:"/"});Y.cookie("SABRE_ID",null,{path:"/"});setTimeout(function(){j.location.reload(true);},3000);}},clearCookies:function(){G("clearing Sabre Cookies");var w=0,v=0;Y.cookie("SABRE_ID",null,{path:"/"});},docReady:(function(){if(!R("ureport")){return false;}G("DOCREADY U REPORT SET UP");var w=$tartup.site.OnDocReady;function v(x){Y.cookie(x,null,{path:"/"});Y.cookie("SABRE_ID",null,{path:"/"});Y.cookie("p_UN",null,{path:"/"});setTimeout(function(){j.location.reload(true);},3000);}w("slideShowCarousel",{init:function(){var x=this;x.setSlideshow();},setSlideshow:function(){function x(AC,AB){var AA=[];for(var z=1;z<=AB.batch.max;z++){AA.push('<li><a href="#"></a></li>');}AC.html(AA.join(""));}Y(".c-slide").each(function(AB){var AE=Y(this),AC=AE.find("div.controls"),AD=AE.find("ul.sectioning");controlsObj=false;var AA=function(AF){AF.each(function(AG){Y(this).click(function(){controlsObj.stopAutoScroll();controlsObj.scrollToBatch(AG+1);return false;});});};var z={auto:{set:true,speed:5000,resume:true},slide:"horizontal",scroll:1,show:1,speed:"slow",rotate:true,eventCallback:function(AG){var AH=AG.start,AF=AG.end;if(AG.event==="init"){x(AD,AG);AA(AD.find("> li a"));}AD.find("> li").each(function(AI){Y(this).toggleClass("active",(AI+1===AG.batch.current));});},controlsCallback:function(AF){AC.find(".prev").click(function(){AF.stopAutoScroll();AF.slide("prev");return false;});AC.find(".next").click(function(){AF.stopAutoScroll();AF.slide("next");return false;});controlsObj=AF;}};AE.jACarousel(z);});}});w("emailSubmit",{init:function(){var x=this;Y("#signupSubmit").click(function(){var z=Y("#signupEmail").val();x.validate(z);return false;});Y("#signupEmail").attr("value","Enter Your Email").blur(function(){var AA=Y(this),z=AA.attr("value");AA.attr("value",(z==="")?"Enter Your Email":z);}).focus(function(){var AA=Y(this),z=AA.attr("value");AA.attr("value",(z==="Enter Your Email")?"":z);});},validate:function(x){var AA=this,z=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(z.test(x)==false){Y(".newsletter-module form .error").text("Please enter a valid email address.").css("display","block");}else{AA.postEmail(x);Y(".newsletter-module form .error").text("Thank you for subscribing to uReport.").css("display","block");Y("#signupEmail").val("");}},postEmail:function(x){Y.ajax({url:"http://www.foxnews.com/portal/newsalertsubscribe",data:"slids=3DC725E303A24F8D41CEA8699C0FE71E&email="+x});G(x);}});w("SSOModule",{init:function(){var x=this;},attachEvents:function(){var AA=this,z;Y("#authentication li:nth-child(1)").click(function(AE){AA.loadIframe("register");AE.preventDefault();});Y("#authentication li:nth-child(2)").click(function(AE){AA.loadIframe("login");AE.preventDefault();});var AD=Y("#log-in");if(AD.length>0&&!Y.cookie("p_Thirdparty")){AD.click(function(AF){var AE=AD.attr("href");AA.submitreport=(AE.split("?")[1]).split("=")[1];AA.loadIframe("login");AF.preventDefault();});}Y(j).resize(function(){var AF=Y("#foxFrame"),AE=Y(j);if(AF.length){AF.width(AE.width());AF.height(AE.height());}});j.location.hash="";var AC=Y("#account"),x=Y.cookie("p_UN"),AB=Y.cookie("p_Thirdparty");if(AC.hasClass("inactive")){x=Y.trim(Y.cookie("p_UN").replace("."," "));AC.prop("onmouseout",null);AC.click(function(AF){var AE=AF.currentTarget;Y(AE).toggleClass("active");});Y(".user-options").prepend("<p>You're logged in as <span>"+truncate(x,13)+"</span></p>");if(AB==="true"){AC.find("li.first").hide();}}else{if(AB){x=Y.trim(Y.cookie("p_UN").replace("."," "));AC.addClass("inactive").html('<div class="username"><div class="encapsulate"><img width="13" height="13" alt=" " src="http://www.foxnews.com/static/all/img/head/profile.png"/><span>Account</span></div><div class="user-options"><p>You\'re logged in as <span>'+truncate(x,13)+'</span></p><ul><li class="first"><li><a onclick="killCookie(\'SABRE_ID\');" href="#">Logout</a></li></ul></div></div>');AC.hover(function(AF){var AE=AF.currentTarget;Y(AE).toggleClass("active");},function(AF){var AE=AF.currentTarget;Y(AE).toggleClass("active");});}}AC.find("li:first a").attr("href","https://secure.foxnews.com/community/user/profile").attr("target","_blank");},loadIframe:function(AA){var AB=this,AC,z,x=Y("#login");z=encodeURIComponent(j.location.href);AC=Y("<iframe />",{id:"foxFrame",src:"http://www.foxnews.com/static/v/all/html/ureport-login-ifr-2.html#"+AA+"&url="+z,width:Y(j).width(),height:Y(j).height(),allowTransparency:true,scrolling:"no"});x.show().css("visibility","hidden");AC.load(function(){x.css("visibility","visible");}).appendTo(x);},setHashListener:function(){var z=this;Y(j).bind("hashchange",Y.proxy(z.hashChange,z));if(Y.browser.msie&&(Y.browser.version==="7.0")){var x=j.location.hash;j.setInterval(function(){if(j.location.hash!==x){Y.proxy(z.hashChange(),z);}},100);}},hashChange:function(){var AB=this,AD=j.location.hash,x,AC,z;Y('<link href="http://www.foxnews.com/i/redes/foxnews.ico" rel="shortcut icon" type="image/x-icon" />').appendTo("head");if(AD.replace("#","")===""){return ;}try{AD=AD.replace("#","").split("&");x=AD[0].split("=")[1];AC=AD[1].split("=")[1];z=AD[2].split("=")[1];}catch(AA){}if(x==="true"){Y.cookie("SABRE_ID",AC);Y(j).unbind("hashchange");j.location.hash="";if(AB.submitreport!==null){j.location.pathname="/submitreport";}setTimeout(function(){j.location.reload(true);},1000);}if(z==="true"){j.location.hash="";Y("#login").html("").hide();}}});}())};J=function(){G("What Counts Constructor Loaded");this.url="";};U={config:{url:"http://"+location.host+"/feeds/app/newsletters/",sub:"?c=sub",unsub:"?c=unsub",find:"?c=find",email:"&email=",r:"&r=",listId:"&list_id=",unsubURL:"http://www.foxnews.com/foxnewsletter/unsubscribe.json",token:"?token=",subRList:"&",callback:"&callback=FOX_whatcounts_UNSUB",cb:"FOX_whatcounts_UNSUB",realms:["foxnews","foxpromos","foxnewsletter","foxbusiness"],janrainHost:"&host=fox-news.dev",Realms:{foxnews:"foxnewsIDList",foxpromos:"foxpromosIDList",foxbusiness:"foxbusinessIDList",foxnewsletter:"foxnewsletterIDList"},idRealms:{foxnewsIDList:"foxnews",foxpromosIDList:"foxpromos",foxbusinessIDList:"foxbusiness",foxnewsletterIDList:"foxnewsletter"},List:{foxnewsIDList:[],foxpromosIDList:[],foxbusinessIDList:[],foxnewsletterIDList:[]},subscribeList:{foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]},unsubscribeList:{foxnewsIDList:[],foxpromosIDList:[],foxbusinessIDList:[],foxnewsletterIDList:[]}},dom:{email:null,newsList:null,load:function(){var v=this;v.newsList=Y(".news-sub-form").find("label");v.email=Y("#capture_editProfile_edit_email");}},gatherData:function(){},lookUpUser:function(){G("Looking-up USEr on What counts");var AB=this,w=AB.config;AB.dom.load();G("DOM",AB.dom.email);if(AB.dom.email.length>0){var z=function(AC){var AD=[w.url,w.find,w.r+w.realms[AC],w.email+AB.dom.email.attr("value")].join("");G("url",AD);Y.ajax({url:AD,dataType:"html",type:"GET",success:function(AG){G("DATA!! from Whatcounts list",AG);if(AG){var AF=Y(AG);AF=AF.find("lists").html();AF=AF.split(",");G("response",AF);var AE=function(AI){G("z",AI);G("cfg.realms[x]",w.realms[AC],w,AC);G("_t.Realms[cfg.realms[x]]",w.Realms[w.realms[AC]]);G("_t.List[_t.Realms[cfg.realms[x]]]",w.List[w.Realms[w.realms[AC]]]);w.List[w.Realms[w.realms[AC]]].push(AF[AI]);};for(var AH=0,x=AF.length;AH<x;AH+=1){AE(AH);}}if(AC===w.realms.length-1){AA();}},error:function(x){G("Error",data,x);}});};for(var v=0;v<w.realms.length;v+=1){z(v);}function AA(){G("LIST IS READY",AB.config.List);AB.checkNewsLetters();Y(document).ready(function(){AB.checkNewsLetters();});}}else{G("dom not ready!");}},checkNewsLetters:function(){var x=this,w=x.dom.newsList,v=x.config;G("CHECKING news Letters",v.List);G("newletter Dom ready",w.size());w.each(function(){var AC=Y(this).find("input"),AB;AB=AC.attr("id").split("_");G("el ID",AC,AC.attr("id"),AB[0],AB[1]);if(v.List[AB[0]].length!=0){for(var AA=0,z=v.List[AB[0]].length;AA<z;AA+=1){if(AB[1]==v.List[AB[0]][AA]){G("el[0]",Y(AC[0]).size());AC[0].checked=true;G("temp[1]",AB[1],"cfg.List[temp[0]][x]",v.List[AB[0]][AA]);}}}});},subscribe:function(){G("Subscribe Newsletters!");var AB=this,AA=AB.dom.newsList,w=AB.config;AA.each(function(){var AD=Y(this).find("input"),AC;AC=AD.attr("id").split("_");G("el ID",AD,AD.attr("id"),AC[0],AC[1]);if(AD[0].checked==true){w.subscribeList[w.idRealms[AC[0]]].push(AC[1]);}});for(var v in w.subscribeList){G("realm",v);if(w.subscribeList[v].length!=0){var z=w.subscribeList[v].join(","),x=[w.url,w.sub,w.email+AB.dom.email.attr("value"),w.listId+z,w.r+v].join("");G("idList",z,"url",x);Y.ajax({url:x,dataType:"html",type:"POST",success:function(AC){G("Subscribing WhatCounts",AC);},error:function(AC){G("Error",data,AC);}});}}},unsubscribe:function(){G("Unsubscribe Newsletters!");var AB=this,AA=AB.dom.newsList,w=AB.config;AA.each(function(){var AD=Y(this).find("input"),AC;AC=AD.attr("id").split("_");G("el ID",AD,AD.attr("id"),AC[0],AC[1]);if(AD[0].checked==false){w.unsubscribeList[AC[0]].push(AC[1]);}});for(var v in w.unsubscribeList){G("realm",v);if(w.unsubscribeList[v].length!=0){var z=w.unsubscribeList[v].join(","),x=[w.unsubURL,w.token+V.API.token,w.email+AB.dom.email.attr("value"),w.subRList+v+"="+z,w.janrainHost,w.callback].join("");G("idList",z,"url",x);j[w.cb]=function(AC){G("UNSUB WAS EXECUTED",AC);};Y.ajax({url:x,dataType:"script",async:true,cache:true});}}}};t=function(){var v=this;v.defaultDom();};H={config:{url:L.ureport.url,token:"&token=",email:"&email=",user:"&username=",logout:"http://quote.foxbusiness.com/loggedout",watchList:"http://www.foxbusiness.com/investing/tools/stock-watchlist",portFolio:"http://www.foxbusiness.com/investing/tools/stock-portfolio"},domSet:function(){var x=Y("#mod-portfolio-watchlist"),w=Y(".section-mod").find(".authentication"),v=w.find(".auth-new"),z=x.find("li:eq(0) > .photo "),AD=x.find("li:eq(1) > .photo "),AF=Y("#investment-tracker"),AB=AF.find(".auth-new"),AC=Y(".dv-feature-9.m-14"),AA=AC.find("li:eq(0)"),AE=AC.find("li:eq(1)");return{wAndP:x,auth:w,theW:z,theP:AD,authM:AF,aW:AA,aP:AE,lCNA:v,mCNA:AB};},domBehaviorLogin:function(){var v=this;var w=v.domSet();G("dom",w);w.auth.hide();w.authM.hide();Y("#mod-portfolio-watchlist .content > ul > li .photo a").unbind("click");if(w.theW.size()>0){w.theW.unbind("click").bind("click",function(x){j.location.href=v.config.watchList;x.preventDefault();});w.theP.unbind("click").bind("click",function(x){j.location.href=v.config.portFolio;x.preventDefault();});}if(w.aW.size()>0){w.aW.unbind("click").bind("click",function(x){j.location.href=v.config.watchList;x.preventDefault();});w.aP.unbind("click").bind("click",function(x){j.location.href=v.config.portFolio;x.preventDefault();});}},domBehaviorLogout:function(){var v=this;var w=v.domSet();G("dom",w);w.auth.show();w.authM.show();if(w.theW.size()>0){w.theW.unbind("click").bind("click",function(x){janrain.capture.ui.renderScreen("signIn");x.preventDefault();});w.theP.unbind("click").bind("click",function(x){janrain.capture.ui.renderScreen("signIn");x.preventDefault();});}if(w.aW.size()>0){w.aW.unbind("click").bind("click",function(x){janrain.capture.ui.renderScreen("signIn");x.preventDefault();});w.aP.unbind("click").bind("click",function(x){janrain.capture.ui.renderScreen("signIn");x.preventDefault();});}},defaultDom:function(){var v=this;var w=v.domSet();w.lCNA.unbind("click").bind("click",function(x){janrain.capture.ui.renderScreen("signIn");x.preventDefault();});w.mCNA.unbind("click").bind("click",function(x){janrain.capture.ui.renderScreen("signIn");x.preventDefault();});},idmsLogin:function(z,x,AB){if(!R("foxbusiness")){return false;}var AA=this,v="FOX_ureport_SABRE",w=AA.config;G("_t.cookieSet()!!! FOXBUSINSSS",AA,L.ureport,"USER",u.userJanrain,Y.cookie("p_IDMS"));if(Y.cookie("p_IDMS")!=null){AA.domBehaviorLogin();return false;}j[v]=function(AC){G("respone from BUSINESS LOGIN",AC,"cookies set?",Y.cookie("p_IDMS"));G("Cookie Created");Y.cookie("p_IDMS",AC.idms,{path:"/",domain:"foxbusiness.com"});AA.domBehaviorLogin();};Y.ajax({url:w.url+v+w.token+z+w.email+x+w.user+AB,async:true,cache:true,dataType:"script"});},idmsLogout:function(){G("idms Logout");var v=this;if(Y.cookie("p_IDMS")!=null){v.clearIdmsCookie();v.domBehaviorLogout();if(j.location.pathname.indexOf("stock-watchlist")>1||j.location.pathname.indexOf("stock-portfolio")>1){setTimeout(function(){G("$.cookie(p_IDMS)",Y.cookie("p_IDMS"));j.location.reload();},3000);}}},clearIdmsCookie:function(){G("Clearing idmCookies");Y.cookie("p_IDMS",null);Y.cookie("p_IDMS",null,{path:"/"});Y.cookie("p_IDMS",null,{path:"/",domain:"foxbusiness.com"});}};B=function(){G("Omniture Constructor Loaded");};O={networkShareSuccess:function(){Y.ad.track({"network-share-success":{}});},emailShareSuccess:function(){Y.ad.track({"email-share-success":{}});},networkShareStart:function(){Y.ad.track({"network-share-start":{}});},emailShareStart:function(){Y.ad.track({"email-share-start":{}});},registrationStart:function(){Y.ad.track({"registration-start":{}});},registrationComplete:function(){Y.ad.track({"registration-complete":{}});},logins:function(){Y.ad.track({logins:{}});},profileUpdates:function(){Y.ad.track({"profile-updates":{}});},commentPost:function(){Y.ad.track({"comment-post":{}});},fbShare:function(){Y.ad.track({"fb-share":{}});},twttrFollow:function(){Y.ad.track({"twttr-follow":{}});}};b=function(){};s={data:{body:{listener:null}},domEvents:{loginSuccess:function(){var v=P.setDomReady;AUTH_Manager.onReady("livefyre",function(){setTimeout(function(){E.API.onLoginSuccessFromJanrain();},500);});v.acc.css({visibility:"visible",display:"block"});v.acc.removeClass("none");v.hasAccount.css({display:"block"});v.noAccount.css({display:"none"});},logoutSuccess:function(){var v=P.setDomReady;v.acc.css({visibility:"visible",display:"block"});v.acc.removeClass("none");v.acc.removeClass("inactive");v.acc.removeClass("active");v.hasAccount.hide();v.noAccount.show();},editProfile:function(){var v=P.setDomReady;v.profile.bind("click",function(w){s.editProfile(w);});}},accountDisplayBehaviour:function(x){var z=P.setDomReady,v;if(!z.acc.hasClass("alt-style")){z.acc.hover(function(){z.accountNav.addClass("hover");v="over;";},function(){z.accountNav.removeClass("hover");v="out";});z.accountNav.click(function(AA){if(z.acc.hasClass("active")){z.acc.removeClass("active").addClass("inactive");}else{z.acc.addClass("active").removeClass("inactive");}});z.body.mousedown(function(AA){if(v==="out"){if(z.acc.hasClass("active")){z.acc.removeClass("active").addClass("inactive");}}});}else{var w=z.acc.find(".user-options >ul>li:eq(0) > a");if(w.size()>0){w.click(function(){s.editProfile();});}}z.uReport().redBtn.bind("click",function(AA){if(V.API.token===""){s.janrain.signin();return false;}});s.domEvents.editProfile();},janrain:{signin:function(){j.janrain.capture.ui.renderScreen("signIn");return false;},traditionalSigin:function(){janrain.capture.ui.modal.open("traditionalRegistration");return false;},traditionalDisplayName:function(v){var w=v.displayName,x=document.getElementById("displayNameData");if(w&&x){x.innerHTML=w;}},getJanrainUserAPI:function(w,v){V.API.execute(w,v);},signOut:function(){G("Janrain signOut fired>>EndCaptureSession");janrain.capture.ui.endCaptureSession();j.Backplane.expectMessages("identity/logout");},registrationStart:function(){G("registration Start Triggered");O.registrationStart();},successfulRegistration:function(w){G("SuccessfulRegistration Triggered");V.API.token=w.accessToken;if(w&&w.action==="socialRegister"){var v="JANRAIN_socialAvatarUpdate",x="https://signin.foxnews.com/entity.update?type_name=user&access_token="+w.accessToken+"&attribute_name=photo_approval_status&value=%22approved%22&jsonp="+v;if(typeof j[v]!=="function"){j[v]=function(z){G("Social Avatar Approve Engaged",z);if(z.stat==="ok"){E.API.onProfileUpdate();G("Janrain avatar is updated");}else{G("janrain Avatar Update failed");}};}Y.ajax({url:x,dataType:"script",async:true,cache:true});}janrain.capture.ui.createCaptureSession(w.accessToken);j.Backplane.expectMessages("identity/login");V.session=true;s.domEvents.loginSuccess();s.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:w.accessToken});O.registrationComplete();},successfulLogin:function(v){G("access token login",v.accessToken,v);janrain.capture.ui.modal.close();janrain.capture.ui.createCaptureSession(v.accessToken);j.Backplane.expectMessages("identity/login");V.session=true;s.janrain.screen.editProfile.reloadProfile();s.domEvents.loginSuccess();V.API.token=v.accessToken;s.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:v.accessToken});G("window.FOX_Janrain_Page_Type",j.FOX_Janrain_Page_Type);if(j.FOX_Janrain_Page_Type==="password-reset"){setTimeout(function(){j.location="http://www.foxnews.com/community/user/profile/edit";},10000);}O.logins();},sessionFound:function(v){if(!V.API.requestSent){G("sessionfound",v);janrain.capture.ui.createCaptureSession(v.accessToken);s.domEvents.loginSuccess();V.API.token=v.accessToken;j.Backplane.expectMessages("identity/login");s.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:v.accessToken});V.session=true;}},sessionNotFound:function(v){G("sessionnotfound",v);s.domEvents.logoutSuccess();V.session=false;if(R("ureport")){Q.uLogout();}if(R("foxbusiness")){H.idmsLogout();}},sessionEnded:function(){G("Session ENDED!");if(R("ureport")){Q.uLogout();}V.session=false;try{if(fyre!=="undefined"&&fyre!=null){fyre.conv.BackplaneAuthDelegate.prototype.logout();}}catch(v){}s.domEvents.logoutSuccess();H.idmsLogout();},sessionCreated:function(v){G("Session Created, ",v);},tokenRefreshed:function(){G("REFRESH TOKEN Do Something hee");},tokenExpired:function(v){G("TOKEN Expired!",v);s.janrain.signOut();},accessDenied:function(){setTimeout(function(){janrain.capture.ui.renderScreen("signIn");},1000);G("ACCESS D1ENIED!!",typeof janrain.capture.ui.renderScreen);},onAuthWidgetLoad:function(v){G("onAuthWidgetLoad",onAuthWidgetLoad,v);},onRefreshToken:function(v){G("Token Refreshed?",v);janrain.capture.ui.createCaptureSession(v.accessToken);janrain.API.token=v.accessToken;},backplaneReady:function(v){G("!backplaneready!",v);AUTH_Manager.fireReady("backplane");if(Y.browser.msie&&parseInt(Y.browser.version,10)<=7){var w=Y(".comments");if(w.size()>0){w.remove();}Y("#livefyre_comment_stream").html("<p>To participate in commenting, please use Internet Explorer 8 or above.</p>");}else{E.init();}Y(j).trigger("janrainShareInit");},screen:{currentScreen:null,editProfile:{reloadProfile:function(){if(T.janrainFlow==="profileFlow"){G("reloadProfile Fired");Y("#captureAccessDeniedBuiltIn").remove();janrain.capture.ui.renderScreen("editProfile");}},onProfileUpdate:function(v){G("Profile Updated",v);j.scrollTo(0,0);E.API.onProfileUpdate();O.profileUpdates();},onProfileAutoSave:function(v){G("Auto Save",v);if("durationSinceLastUpdate" in v){document.getElementById("capture_profile_saved").style.display="block";document.getElementById("capture_alert_callout").innerHTML=v.durationSinceLastUpdate;}}},registration:{clearInput:function(){}},uiReady:function(){if(T.janrainFlow==="profileFlow"){janrain.capture.ui.renderScreen("editProfile");}else{if(T.janrainFlow==="emailFlow"){janrain.capture.ui.renderScreen("registrationVerify");}else{if(T.janrainFlow==="passwordFlow"){janrain.capture.ui.renderScreen("resetPassword");}}}},onScreenShow:function(w){G("onScreenShow",w);var AA=s.janrain.screen;switch(w.screen){case"editProfile":AA.currentScreen="editProfile";Y("#captureRetrievingUserDataBuiltIn").hide();var v=false;setTimeout(function(){Y(".cancel-button").click(function(){if(j.location.href.indexOf("#")>1){j.history.go(-2);}else{j.history.go(-1);}});function AM(AN,AO,AP){if(AN==null){return false;}if(typeof j.attachEvent==="object"){AN.attachEvent("on"+AO,AP);}else{AN.addEventListener(AO,AP,false);}}var AF=document.getElementById("capture_editProfile_edit_country"),AG=Y("#capture_editProfile_edit_state"),AL=Y("#capture_editProfile_display_indicator_public_edit_state"),AE=Y("#capture_editProfile_display_indicator_private_edit_state"),AI=Y("#capture_editProfile_display_option_public_edit_state"),AK=Y("#capture_editProfile_display_option_private_edit_state"),AH=Y("#capture_editProfile_form_item_edit_state").find("input");function AJ(){if(!AF||!AG){return false;}var AN=AG.find("option:selected").attr("value");if(AF.options[AF.selectedIndex].value==="United States"){if(AG){if(AG.attr("disabled")&&AN!=="state"){AL.removeClass("capture_toggled");AE.addClass("capture_toggled");AI.removeClass("capture_checked");AK.addClass("capture_checked");AH.attr("value","private");AG.attr("disabled",false);AG.css({color:"black"});}else{if(AG.attr("disabled")&&AN==="state"){AG.attr("disabled",false);AG.css({color:"black"});}}}}else{if(AG){AH.attr("value","private");AG.attr("disabled",true);AG.css({color:"lightgrey"});AL.removeClass("capture_toggled");AE.addClass("capture_toggled");AI.removeClass("capture_checked");AK.addClass("capture_checked");}}}if(AF&&!v){v=true;AM(AF,"change",AJ);}AJ();},100);try{var AD,z=Y(".janrain_traditional_account_only");if(typeof j.localStorage!=="undefined"){AD=localStorage.getItem("janrainLastAuthMethod");AC();}else{AD=Y.cookie("janrainLastAuthMethod");AC();}function AC(){console.log("loginMethod",AD,"EL",z,z.size());if(AD==="socialSignin"&&z.size()>0){z.remove();}}}catch(AB){}break;case"publicProfile":G("publicProfile");var x=Y(".make-acc");if(!V.session){x.show();}else{x.hide();}break;case"forgotPasswordSuccess":if(j.FOX_Janrain_Page_Type==="password-reset"){setTimeout(function(){j.location="http://www.foxnews.com";},5000);}break;case"returnTraditional":G("traditional fired");setTimeout(function(){var AE=janrain.capture.ui.getProfileCookieData("displayName"),AF=document.getElementById("displayNameData");G("displayName",AE);if(AE&&AF){AF.innerHTML=AE;}},500);break;case"registrationVerified":setTimeout(function(){j.location="http://www.foxnews.com/community/user/profile/edit";},10000);break;default:break;}},onRenderComplete:function(){G("On Render Complete Executed");var v=s.janrain.screen;switch(v.currentScreen){case"editProfile":break;}var w=document.getElementById("forgotPassword");if(w&&w.style.display==="block"){if(V.reset){document.getElementById("capture_forgotPassword_forgotPassword_emailAddress").value="";document.getElementById("capture_forgotPassword_forgotPasswordForm_errorMessages").style.display="none";}}}},share:{shareSendComplete:function(v){G("share Sent!",v);O.emailShareSuccess();}},errorEvent:function(v){G("error Registered",v.result);try{switch(v.stat){case"error":break;default:G("some Error Has occured");break;}}catch(w){}},onModalClose:function(){V.reset=true;},validation:{onValidationSuccess:function(){var v=document.getElementById("forgotPassword");if(v&&v.style.display==="block"){V.reset=false;}}}},livefyre:{displayLogo:function(){Y("#livefyre_comment_stream").append('<div id="powered_by_livefyre_new"><a href="http://livefyre.com" target="_blank">Powered by Livefyre</a></div> ');},hashComment:function(){Y("#livefyre_comment_stream").prepend('<div id="disqus_thread"></div>');},logOut:function(){Y.loadAttempt(60,250,function(){return(Y("#livefyre_comment_stream").find(".fyre-user-loggedin").size()>0)?true:false;},function(){G("1livefyre Manual Logout",Y("#livefyre_comment_stream").find(".fyre-user-loggedin"));fyre.conv.BackplaneAuthDelegate.prototype.logout();j.Backplane.expectMessages("identity/logout");});}},displayName:function(){var v=this,w=P.setDomReady;G("Display Name",w.name,u.displayName);if(w.acc.hasClass("alt-style")){w.user.find(".encapsulate p").html("Welcome, <strong>"+u.displayName+"</strong>");}else{if(w.name.size()>0){w.name.text(u.displayName);}else{if(auth_fox.dom.setDomReady.userOptions.find("p").size()>0){auth_fox.dom.setDomReady.userOptions.find("p").html("You're logged in as<span>"+u.displayName+"</span>");}}}s.domEvents.loginSuccess();},accountFuncBehaviour:function(){var w=P.setDomReady,v=this;G("logout",w.logout,"register",w.register,w.login);w.login.addClass(T.classLogin);w.login.bind("click",s.janrain.signin);w.register.bind("click",s.janrain.traditionalSigin);w.logout.bind("click",s.janrain.signOut);},editProfile:function(v){G("editProfile  called");j.location=h;},displayShowsProfile:function(){var v=P.setDomReady.acc.find("strong");v.css("cursor","pointer");v.click(function(){s.editProfile();return false;});},populatePublicProfile:function(){var v=P.setDomReady.publicProfile();E.API.execute(function(){G("dom",v,v.comments);v.comments.text(u.commentCount);v.likes.text(u.likeCount);});}};g=function(){G("User Constructor Loaded");};u={uuid:null,email:"",likeCount:0,commentCount:0,displayName:"",userJanrain:{},userLivefyre:{}};var A=(function(){var v=function(){G("AUTH_int");this.setDependencies();this.set();};v.prototype.set=function(){G("AUTH_int_set");T.janrainFlow=(function(){var AC="authFlow",AB=(j.FOX_Janrain_Page_Type)?j.FOX_Janrain_Page_Type:false;switch(AB){case"logout":AC="logoutFlow";break;case"email-verification":AC="emailFlow";break;case"edit-profile":AC="profileFlow";break;case"password-reset":AC="passwordFlow";break;default:AC="authFlow";break;}G("JANRAIN FLOW !!>>> ",AC);return AC;}());var w=[["tools",F,q],["dom",P,C],["require",T,I],["backplane",l,W],["janrain",V,K],["livefyre",E,o],["badgevill",r,a],["events",s,b],["ureport",Q,D],["user",u,g],["omniture",O,B],["whatcounts",U,J],["idms",H,t]];var z=new e(w),AA;j.auth_fox=z;G("DOCUMENT READY FIRING",z.dom,z.require,z.events);var x=function(){z.require.loadTemplate();z.events.accountDisplayBehaviour();z.events.accountFuncBehaviour();};if(typeof z.dom.setDomReady==="object"){AA=z.dom.setDomReady;x();}else{AA=z.dom.setDomReady(function(AB){P.setDomReady=AB;x();});}};v.prototype.setDependencies=function(){j.AUTH_Manager=new FOX_DependencyManager();AUTH_Manager.addInstance("janrain",["janrain"]);AUTH_Manager.addInstance("capture",["janrain","capture"]);AUTH_Manager.addInstance("livefyre",["janrain","backplane","livefyre"]);AUTH_Manager.addInstance("backplane",["backplane"]);Y.loadAttempt(60,500,function(){return(j.fyre&&Y("#livefyre_comment_stream .fyre-widget").size()>0)?true:false;},function(){AUTH_Manager.fireReady("livefyre");});AUTH_Manager.onReady("livefyre",function(){G("********** LIVEFYRE IS READY !!! **********");});AUTH_Manager.onReady("janrain",function(){G("********** JANRAIN IS READY !!! **********");});AUTH_Manager.onReady("backplane",function(){G("********** BACKPLANE IS READY !!! **********");});AUTH_Manager.onReady("capture",function(){G("********** CAPTURE IS READY !!! **********");});};return v;}());if(!Y.loadAttempt){(function(){function w(x){return typeof x==="function"?!0:!1;}var v=function(){var AD,x=arguments;if(x.length===0){return !1;}var z={attempt:0,timeout:500};if(x.length===1&&typeof x[0]==="object"){for(AD in x[0]){z[AD]=x[0][AD];}if(z.callback){AD=z.callback;}else{return !1;}if(!AD.check||!AD.success){return !1;}else{z._check=AD.check,z._success=AD.success;}if(AD.timedOut){z._timeout=AD.timedOut;}}else{if(!isNaN(x[0])&&!isNaN(x[1])&&w(x[2])&&w(x[3])){z.attempt=x[0];z.timeout=x[1];z._check=x[2];z._success=x[3];if(x[4]){z._timeout=x[4];}if(x[5]){z._abort=x[5];}}else{if(w(x[0])&&w(x[1])){z._check=x[0];z._success=x[1];if(x[2]){z._timeout=x[2];}if(x[3]){z._abort=x[3];}}else{return !1;}}}if(!w(z._check)||!w(z._success)){return !1;}if(!w(z._timeout)){z._timeout=function(){};}if(isNaN(z.timeout)){return !1;}else{z.timeout=parseInt(z.timeout,10);}if(isNaN(z.attempt)){return !1;}else{z.attempt=parseInt(z.attempt,10);}var AC=!1,AA=!1;if(z.attempt&&z.timeout){var AB=function(){AA?clearTimeout(AC):z._check()?(z._success(),clearTimeout(AC)):z.attempt>0?AC=setTimeout(function(){AB();},z.timeout):z._timeout();z.attempt--;};AB();}else{AC=setInterval(function(){AA?clearInterval(AC):z._check()&&(z._success(),clearInterval(AC));},z.timeout);}return{abort:function(){AA=!0;}};};if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:v});}else{if(!j.loadAttempt){j.loadAttempt=v;}}})();}return A;})(jQuery,window);(function(D,C){var F,A,E;C.janrainShareOnload=function(){C.janrainShareLoaded=true;D(C).trigger("janrainShareModuleInit");};var B={domain:function(){return false;},meta:function(G,H){if(H==="prop"){H="property";}return D("meta["+H+'="'+G+'"]').attr("content");},metadata:function(K){var G=K.split("::"),I=G[0],J=G[1],H=G[2];return(B.meta(J,I)===H)?true:false;},trim:function(H,G){if(H.length>G){H=H.substring(0,G)+" ...";}return H;},isDevice:function(){var G=false;G=("createTouch" in document)?true:false;G=(!G&&navigator.userAgent.match(/BlackBerry/i))?true:G;return G;}};A=function(){var G=this;this.ready=false;if(C.janrainShareLoaded){this.init();}else{D(C).bind("janrainShareModuleInit",function(){G.init();});}};A.prototype={init:function(){this.ready=true;this.janrain=C.janrain;this.setCallbacks();this.setTemplates();},setCallbacks:function(){var H=this.janrain,G=this.resetEmail;H.events.onShareLoginStart.addHandler(G);H.events.onShareLoginCancel.addHandler(G);H.events.onShareLoginError.addHandler(G);H.events.onShareSendStart.addHandler(function(I){if(C.auth_fox){if(I.provider==="facebook"){C.auth_fox.omniture.networkShareSuccess();}else{if(I.mode!=="email"){C.auth_fox.omniture.networkShareSuccess();}else{if(I.mode==="email"){C.auth_fox.omniture.emailShareSuccess();}}}}});},setTemplates:function(){D(".janrain-share-input").attr("placeholder","Write your message");D(".janrain-share-contactadd-input-placeholder").attr("placeholder","Add a contact");D(".janrain-share-contact-input-placeholder").attr("placeholder","Type contact name");D(".janrain-share-bubble").remove();D(".janrain-share-login-prefs-name").remove();D(".janrain_modal_closebutton").attr("href","javascript:;");this.resetEmail();},show:function(J,I,G){var L=this.janrain;var H=I.provider;var K=I.data;L.engage.share.show();L.engage.share.setOrientation("landscape");L.engage.share.setTitle(K.title);L.engage.share.setUrl(K.linkBack);L.engage.share.setActionLink({name:"Read more",link:K.actLink});L.engage.share.setImage(K.image);L.engage.share.setDescription(K.desc);L.engage.share.showProvider(H);this.formatPreviewText({title:K.title,desc:K.desc,url:K.actLink});},resetEmail:function(){D(".janrain-share-login-messageemail, .janrain-share-login-messageemailshort").remove();D("#janrain-share-login-button-contact-email-yahoo .janrain-share-login-button-text").text("Yahoo");D("#janrain-share-login-button-contact-email-google .janrain-share-login-button-text").text("Google");},formatPreviewText:function(G){D(".janrain-share-preview-title").text(B.trim(G.title,70));D(".janrain-share-preview-url").text(B.trim(G.url,40));D(".janrain-share-preview-description").text(B.trim(G.desc,130));}};F=function(G){this.cfg=G;this.plugin=G.plugin;};F.prototype={set:function(J,I,G){var H=this,J=D(J);if(B.isDevice()){return J.hide();}J.unbind("click").bind("click",function(K){H.show(K,I,G);return false;});},reset:function(K,J,H){var I=this,K=D(K),G=J.data;if(B.isDevice()){return K.hide();}K.unbind("click").bind("click",function(L){J.data=G(L);I.show(L,J,H);return false;});},setLive:function(K,J,H){var I=this,K=D(K),G=J.data;if(B.isDevice()){return K.hide();}K.unbind("click").live("click",function(L){J.data=G(L);I.show(L,J,H);return false;});},show:function(J,I,G){var H=this.plugin;if(I.provider==="email"){C.auth_fox.omniture.emailShareStart();}else{C.auth_fox.omniture.networkShareStart();}H.show(J,I,G);return false;},hide:function(I,H,G){}};E=function(){var I={},H=B.meta,G=function(J,K){I[J]=K;};G("v8-article",function(){var M=D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var K=D("link[rel='image_src']").attr("href")||H("og:image","prop")||parsers.defaultImg.v8Article;var L=D((C.vcmArticleInfo&&vcmArticleInfo.summary)?vcmArticleInfo.summary:"<div></div>").text()||H("description","name")||H("dc.description","name");var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N;}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("recipe-article",function(){var M=D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var K=D("link[rel='image_src']").attr("href")||H("og:image","prop")||parsers.defaultImg.v8Article;var L=H("description","name")||H("dc.description","name");var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N;}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("nation-article",function(){var M=D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var K=D("link[rel='image_src']").attr("href")||H("og:image","prop")||parsers.defaultImg.v8Article;var L=H("description","name")||H("dc.description","name");var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N;}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("nation-front",function(){return function(K){var P,N,O,L,M;var J=D(K.currentTarget).parentsUntil("li");J.find("img.m-1").each(function(){N=("http://"+C.location.host+D(this).attr("src"))||H("og:image","prop");});J.find(".a-3").each(function(){var Q=D(this);P=D(this).text();O="America's Talking - All Opinions Welcome. Let your voice be heard @ FoxNation.com.";L=M=Q.attr("href");});return{title:P,image:unescape(N),desc:O,userMessage:"",actLink:L,linkBack:M};};});G("drupal6-shows-article",function(){var M=D("#content-main h3 a").text()||H("dc.title","name")||H("og:title","name");var L=(function(){var N="";var O=D("#content-main .deck > p, #content-main .transcript > p").each(function(){var P=D(this);if(P.html().indexOf("<script")<0&&P.html().indexOf("<object")<0){if(N.length<360){N+=P.text();}}});if(N.length>360){N=N.substring(0,357)+"...";}return N;}());var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N||H("og:url","prop");}());var K=(function(){var N=D("#content-main .photo > img, #content-main img.alignleft, #content-main img.alignright").attr("src");return(N?("http://"+C.location.host+N):H("og:image","prop"));}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("drupal7-shows-blog",function(){return function(L){var O=D(L.currentTarget),K=O,J=K.parentsUntil(".content",".post");var Q=J.find(".twitter-tweet-rendered .entry-title").text()||J.find("h2").text()||J.find(".post-content > p").text()||J.find("#twtr-widget > p").text()||J.find("p:first").text()||D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var P=J.find(".twitter-tweet-rendered .entry-title").text()||J.find(".post-content > p").text()||H("description","name")||H("dc.description","name");var M=linkBack=(function(){var R=J.find("h2");var S=J.find(".comments");if(D("#recommendations-mod").length>0){return H("og:url","prop");}if(R.length>0){return"http://"+C.location.host+R.find("a").attr("href");}if(J.length>0){return S.find("a").attr("href");}})();var N=D("link[rel='image_src']").attr("href")||H("og:image","prop");return{title:Q,image:unescape(N),desc:P,userMessage:"",actLink:M,linkBack:linkBack};};});return function(J){return I[J]();};};D(function(){var N=new A();var O=new F({plugin:N});var H=new E();var K=B.metadata;var G,M,L,I;var J=function(P){var Q=H(P+"-article");O.set(".share",{provider:"facebook",data:Q});O.set(".email",{provider:"email",data:Q});};G=function(){if(K("name::prism.section::nation")){var P=K;if(P("name::prism.aggregationType::root")||P("name::prism.aggregationType::front")){var Q=H("nation-front");O.setLive(".fbook-1",{provider:"facebook",data:Q});O.setLive(".twtr-1",{provider:"twitter",data:Q});}else{if(P("name::prism.aggregationType::subsection")){var Q=H("nation-article");O.set(".fbook-1",{provider:"facebook",data:Q});O.set(".twtr-1",{provider:"twitter",data:Q});}}}else{if(K("name::prism.section::shows")){if(K("property::og:type::article")&&(!K("name::prism.subsection1::specialreport")&&!K("name::prism.subsection1::foxnewssunday")&&!K("name::prism.subsection1::fox-files"))){var Q=H("drupal6-shows-article");O.set(".share",{provider:"facebook",data:Q});O.set(".email",{provider:"email",data:Q});}if(K("name::prism.subsection1::specialreport")||K("name::prism.subsection1::foxnewssunday")||K("name::prism.subsection1::fox-files")){var Q=H("drupal7-shows-blog");O.reset(".date li a.facebook",{provider:"facebook",data:Q});O.reset(".date li a.twitter",{provider:"twitter",data:Q});if(K("name::prism.subsection1::fox-files")){O.reset("#post-detail a.share",{provider:"facebook",data:Q});}}if((K("name::prism.subsection1::specialreport")||K("name::prism.subsection1::foxnewssunday"))&&K("name::prism.subsection2::transcript")){J("v8");}}else{if(K("name::prism.section::community")&&K("name::prism.subsection1::newsletter")){C.excludeNewsletterShare=true;}else{if(K("name::prism.section::politics")&&K("name::prism.subsection1::blogs")){J("v8");}else{if(K("property::og:type::article")){J("v8");}else{if(K("name::prism.aggregationType::recipe")){J("recipe");}}}}}}};M=function(){if(K("property::og:type::article")&&(!K("name::prism.subsection1::willisreport"))){var P=H("drupal6-shows-article");O.set(".share",{provider:"facebook",data:P});O.set(".email",{provider:"email",data:P});}if(K("name::prism.subsection1::willisreport")){var P=H("drupal7-shows-blog");O.reset(".date li a.facebook",{provider:"facebook",data:P});O.reset(".date li a.twitter",{provider:"twitter",data:P});}else{if(K("property::og:type::article")){J("v8");}}};L=function(){if(K("property::og:type::article")){J("v8");}};I=function(){if(K("property::og:type::article")){J("v8");}};if(K("name::prism.channel::fnc")){G();}if(K("name::prism.channel::fbn")){M();}if(K("name::prism.channel::fnl")){L();}if(K("name::prism.channel::fsb")){I();}});})(jQuery,window);(function($){var CONST={US_States:{AK:"Alaska",AL:"Alabama",AR:"Arkansas",AS:"American Samoa",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",FM:"Federated States of Micronesia",GA:"Georgia",GU:"Guam",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MH:"Marshall Islands",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MP:"Northern Mariana Islands",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",PW:"Palau",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VI:"Virgin Islands",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"}};function WeatherService(namespace){this.namespace=namespace;var initVars={weatherCityData:[],ACListener:{},currentLocId:"",currentCityString:"",serviceTriggered:false,UPDATE_HEADER_ACTION:"UPDATE_HEADER",SERVICE_URL_WEATHER_JSONP:"/weather/feed/getWeatherJsonP",SERVICE_URL_LOCATION_JSONP:"/weather/feed/getLocationIdJsonP",SERVICE_URL_WEATHER_HTML:"/weather/feed/getWeatherHtml",SERVICE_URL_LOCATION_REGION_JSON:"/weather/feed/getLocationRegionCodeJson",SERVICE_URL_CITY_DATA:"/weather/feed/getWeatherCityData",SERVICE_URL_MARINE_JSON:"/weather/feed/getMarineLocationsJson",SERVICE_URL_SKI_RESORTS_JSON:"/weather/feed/getSkiResortsJson",SERVICE_URL_SKI_COND_JSON:"/weather/feed/getSkiConditionJson",SERVICE_URL_AIRPORT_LOCATION_JSON:"/weather/feed/getAirportLocationIdJson",SERVICE_URL_AIRPORT_DELAY_JSON:"/weather/feed/getAirportDelayJson",PAGE_URL_YOUR_WEATHER:"/weather/your-weather/index.html",PAGE_URL_SEARCH_RESULTS:"/weather/search-results/index.html",PATH_WEATHER_ICON_IMAGE:(window.FOX_DomainPath||"")+"/static/all/img/weather/icons_60x60/",PATH_WEATHER_ICON_IMAGE_LARGE:(window.FOX_DomainPath||"")+"/static/all/img/weather/icons_96x96/",WEATHER_ICON_IMAGE_EXT:".png",WEATHER_DEFAULT_LOCATION:"USNY0996",WEATHER_COOKIE_DOMAIN:"foxnews.com",MSG_DEFAULT_ERROR:"Data unavailable. Please check back again soon.",MSG_AIRPORT_CODE_ERROR:"Please enter a valid 3- or 4-digit airport code.",MSG_AIRPORT_NOT_FOUND_ERROR:"No airport results found.  Please try again.",TXT_DEFAULT_SEARCH_FIELD:"Enter city or zip code",TXT_HEADER_SEARCH_FIELD:"Enter city or zip",TXT_AIRPORT_SEARCH_FIELD:"Enter airport code (IATA or ICAO)",LIST_SKI_CONDITIONS_ENABLED:"AK|AL|AZ|CA|CO|CT|IA|ID|IL|IN|MA|MD|ME|MI|MN|MO|MT|NC|ND|NH|NJ|NM|NV|NY|OH|OR|PA|RI|SD|TN|UT|VA|VT|WA|WI|WV|WY",LIST_MARINE_FORECAST_ENABLED:"AK|AL|AS|AZ|CA|CT|DC|DE|FL|FM|GA|GU|HI|LA|MA|MD|ME|MH|MS|NC|NJ|NY|OR|PA|PR|PW|RI|SC|TX|VA|VI|VT|WA"};var i;for(i in initVars){this[i]=initVars[i];}this.extService=new ExternalServices(this);}WeatherService.prototype={init:function(fn){var ws=this,initData='{"location":[{"loc_id":"USNY0996","zip":"10108","city":"New York","state":"NY"}]}';var trigger=function(data){ws.createWeatherLocationCookie(data);ws.renderWidget();if(typeof fn==="function"){fn();}};if(ws.weatherCookie("weatherloc")){var cookie=ws.weatherCookie("weatherloc"),weatherlocObj=this.createObjFromJSON(cookie);if(!weatherlocObj||!weatherlocObj.location||!weatherlocObj.location[0].loc_id){trigger(initData);}else{trigger(cookie);}}else{if(window.CONST_Akamai_GEO&&CONST_Akamai_GEO.countryCode==="US"){ws.getGeoLocation(function(data){trigger(data||initData);});}else{trigger(initData);}}},getGeoLocation:function(fn){var ws=this,callbackFn="location_searchresults_callback_geo";var ret=function(info){if(typeof fn==="function"){fn(info);}};var zip=(function(){var obj=window.CONST_Akamai_GEO,range=obj.zipRange,zip=range.substring(0,5);return(!isNaN(zip))?zip:false;}());if(zip){ws.location_searchresults_callback_geo=function(data){ret(data);};$.ajax({url:weather_service.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:zip,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:true,cache:true});}else{ret(false);}},setExtData:function(location,info){this.extService._DataObj={location:location,info:this.createObjFromJSON(info)};this.extService.reloadWidgets();},weatherCookie:function(name,value,options){if(typeof value!=="undefined"){options=options||{};if(value===null){value="";options.expires=-1;}var expires="";if(options.expires&&(typeof options.expires==="number"||options.expires.toUTCString)){var date;if(typeof options.expires==="number"){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}expires="; expires="+date.toUTCString();}var path=options.path?"; path="+(options.path):"",domain=options.domain?"; domain="+(options.domain):"",secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("");}else{var cookieValue=null;if(document.cookie&&document.cookie!==""){var i,cookies=document.cookie.split(";");for(i=0;i<cookies.length;i++){var cookie=$.trim(cookies[i]);if(cookie.substring(0,name.length+1)===(name+"=")){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}},createWeatherDataCookie:function(locId,jsonString){var validateWeatherObj=this.createObjFromJSON(jsonString),weatherJSObj=validateWeatherObj.weatherData,city=weatherJSObj.cityName,country=weatherJSObj.country,tempHi=weatherJSObj.days[0].hi,tempLo=weatherJSObj.days[0].lo;if(validateWeatherObj&&city!==""&&country!==""){var expDate=new Date();if(tempHi===""||tempLo===""){expDate.setTime(expDate.getTime()+(60*1000));}else{expDate.setTime(expDate.getTime()+(3*60*60*1000));}this.weatherCookie("weatherdata__"+locId,jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});this.renderFavorites();}},createWeatherLocationCookie:function(jsonString){var expDate=new Date();expDate.setTime(expDate.getTime()+(1000*24*60*60*1000));this.weatherCookie("weatherloc",jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});},createWeatherFavoritesCookie:function(favArray){var favLocCookieString=favArray.join("|");if(favLocCookieString!==""){var expDate=new Date();expDate.setTime(expDate.getTime()+(1000*24*60*60*1000));this.weatherCookie("weatherfavlocs",favLocCookieString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});}else{this.weatherCookie("weatherfavlocs","",{expires:-1,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});}},getWeatherDataCookie:function(locId){return this.weatherCookie("weatherdata__"+locId);},createObjFromJSON:function(jsonString){if(jsonString!==""){return eval("("+unescape(jsonString).replace(/\s+/g," ")+")");}else{return null;}},createLocJSObj:function(data){if(!data.loc_id){return null;}var i,obj={loc_id:"",city:"",zip:"",state:"",country:""};for(i in data){var val=data[i];if(i==="city"){val=val.replace("`","'");}obj[i]=val;}var fullArr=[];fullArr.push(obj.city||"");fullArr.push((obj.loc_id.substr(0,2).toUpperCase()!=="US"&&(obj.country||obj.state))?obj.country:obj.state);obj.fullCityString=fullArr.join(", ");return obj;},displayHeader:function(serviceDomain,config){var i,self=this;if(this.serviceTriggered){return false;}else{this.serviceTriggered=true;}config=(typeof config==="object")?config:{};if(typeof serviceDomain!=="undefined"){this.PAGE_URL_SEARCH_RESULTS=serviceDomain+this.PAGE_URL_SEARCH_RESULTS;this.PAGE_URL_YOUR_WEATHER=serviceDomain+this.PAGE_URL_YOUR_WEATHER;this.SERVICE_URL_LOCATION_JSONP=serviceDomain+this.SERVICE_URL_LOCATION_JSONP;this.SERVICE_URL_WEATHER_JSONP=serviceDomain+this.SERVICE_URL_WEATHER_JSONP;if(document.location.hostname.lastIndexOf(this.WEATHER_COOKIE_DOMAIN)==-1){this.WEATHER_COOKIE_DOMAIN=document.location.hostname;}}if(config){for(i in config){var val=config[i];switch(i){case"icons":if(val===24){self.PATH_WEATHER_ICON_IMAGE=self.PATH_WEATHER_ICON_IMAGE.replace("icons_60x60","icons_24x24");}break;}}}this.init();},renderWidget:function(){$("body").data("weather-rendered",true);var ws=this;ws.serviceTriggered=true;setTimeout(function(){ws.renderHeaderWeather();ws.renderHeaderLocationChange();},500);},renderHeaderWeather:function(){var ws=this;var trigger=function(){var requestedLocationObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));$(".portlet .weather.current-conditions").each(function(){ws.renderYourWeather(this,requestedLocationObj.location[0].loc_id,"weather_current");});};if(this.weatherCookie("weatherloc")){var weatherlocObj=this.createObjFromJSON(this.weatherCookie("weatherloc"));var locObject=this.createLocJSObj(weatherlocObj.location[0]);if(this.getWeatherDataCookie(locObject.loc_id)){this.headerDisplayAction(locObject.loc_id);ws.setExtData(locObject,this.getWeatherDataCookie(locObject.loc_id));ws.renderWeatherWidget(locObject.loc_id);}else{this.fetchAndSaveWeatherJSONCookie(locObject.loc_id);}trigger();}else{this.init(function(){var weatherlocObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));ws.fetchAndSaveWeatherJSONCookie(weatherlocObj.location[0].loc_id);trigger();});}},renderRightRailSearch:function(){var topRightRailHtml="<ul>"+this.generateRightRailSearch("yourweather")+"</ul>";document.write(topRightRailHtml);},generateRightRailSearch:function(ac_results_css_appendix){var ws=this,searchField="weatherInput_"+ac_results_css_appendix,rightRailHTML='<li><form method="get" action="'+ws.PAGE_URL_SEARCH_RESULTS+'" id="weather_search_form" class="form_1" onsubmit="weather_service.locationSearchAction(this,\'#'+searchField+'\');"><fieldset class="text_box"><div class="search-input-holder"><div class="preloader-img"></div><input type="text" name="searchTerm" id="'+searchField+'" onfocus="weather_service.searchFieldOnFocus(this);" onblur="weather_service.searchFieldOnBlur(this, \''+ws.TXT_DEFAULT_SEARCH_FIELD+'\');" class="weather_city_autocomplete_'+ac_results_css_appendix+' search_input no_spon" size="50" value="'+ws.TXT_DEFAULT_SEARCH_FIELD+'" name="keys"/></div><input type="submit" class="go" value=""/></fieldset></form></li>';return rightRailHTML;},renderWeatherWidget:function(locationId){var widgetElm=$("#weather-widget");if(widgetElm.size()===0){return false;}var ws=this,headerDataCookie=this.getWeatherDataCookie(locationId),useLgIcons=(widgetElm.hasClass("use-lg-icons"))?true:false,useImgSrc=(useLgIcons)?ws.PATH_WEATHER_ICON_IMAGE_LARGE:ws.PATH_WEATHER_ICON_IMAGE;var imgDim=(function(){var sp=useImgSrc.split("/"),val=sp[sp.length-1];val=val.replace("icons_","").split("x");return val;}());if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie);var wdObj=headerDataObj.weatherData;var form=widgetElm.find("form:first");form.find("label, p.state").html(wdObj.cityName+((wdObj.stateShort.length>0)?", "+wdObj.stateShort:"")).unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);});var listElm=widgetElm.children("ul:first");listElm.children("li.section").each(function(i){var item=$(this);if(wdObj.days[i]){var dataSource=wdObj.days[i];var imgSrc=useImgSrc+dataSource.image+ws.WEATHER_ICON_IMAGE_EXT;var hiTemp=dataSource.hi;var lowTemp=dataSource.lo;if(i===0){item.find(".current").html(wdObj.currentTemp+"&#176;");}if(item.find(".media img").size()===0){item.find(".media").html("<img />");}item.find(".media img").css({width:imgDim[0]+"px",height:imgDim[1]+"px"}).each(function(){var elm=$(this);elm.css({opacity:"0",display:"inline"});if(!$.browser.opera){var img=new Image();img.onload=function(){elm.attr("src",imgSrc);animateFn.show(elm,{speed:300,type:"swing"});};img.src=imgSrc;}else{elm.css({backgroundImage:"none",display:"inline",opacity:"0"});elm.attr({src:imgSrc});animateFn.show(elm,{speed:300,type:"linear"});}});var hiLow="Hi "+((hiTemp.length>0)?hiTemp+"&#176;":"-")+" | Lo "+((lowTemp.length>0)?lowTemp+"&#176;":"-");item.children("div:first").children("span").html(hiLow);item.unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);});}});}if(widgetElm.data("setListeners")){return false;}widgetElm.data("setListeners",true);widgetElm.find("form:first").each(function(){var form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value"),overSearch=true;search.focus(function(){var elm=$(this),val=elm.val();elm.data("currVal",val);elm.val("");}).blur(function(){var elm=$(this),val=elm.attr("value");elm.val((val==="")?elm.data("currVal"):val);});form.hover(function(){overSearch=true;},function(){overSearch=false;});$(document).bind("click",function(){if(!overSearch){var val=search.attr("value"),curr=search.data("currVal");if(val!==curr&&val!==txt){form.submit();}}});form.submit(function(){search.data("currVal",search.val());ws.locationSearchAction(this,"#weather_widgetInput",ws.UPDATE_HEADER_ACTION);return false;});});},searchFieldOnFocus:function(inputField){if(inputField.value===this.TXT_DEFAULT_SEARCH_FIELD||inputField.value===this.TXT_HEADER_SEARCH_FIELD){inputField.value="";}},searchFieldOnBlur:function(inputField,message){if(inputField.value===""){inputField.value=message;}},airportSearchAction:function(airportForm,airportLocId){var ws=this,regexp=new RegExp("^[a-zA-Z]{3,4}$"),reqAC=$("#airportCode").val();if(!reqAC.match(regexp)){showToConsole(ws.MSG_AIRPORT_CODE_ERROR);return false;}$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_AIRPORT_LOCATION_JSON,data:{airportCode:reqAC,cb:cacheBuster()},success:function(data){var parsed=ws.createObjFromJSON(data);if(parsed){if(parsed.location.length>0){var airportLocObj=ws.createLocJSObj(parsed.location[0]);$(airportForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(airportLocId).attr("value",airportLocObj.loc_id);}else{showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR);return false;}}},error:function(){showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR);return false;}});},getSetLocationAction:function(location,callback){if(!location){return false;}var ws=this;var locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$");var upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(location)&&typeof callback==="function"){ws.fetchAndSaveWeatherJSONCookie(location,false,function(data){callback(ws.createObjFromJSON(data));});}},locationSearchAction:function(locationForm,searchInputId,action){var ws=this,locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$"),upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(ws.currentLocId)){$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(searchInputId).attr("name","locId");$(searchInputId).attr("value",ws.currentLocId);if(action===ws.UPDATE_HEADER_ACTION){ws.fetchLocationJSON(ws.currentLocId,function(){ws.renderWidget();});}}else{var locSearchTerm=upToCommaEx.exec($(searchInputId).attr("value")),callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){$(locationForm).attr("action",ws.PAGE_URL_SEARCH_RESULTS);var qStr,locationJson=ws.createObjFromJSON(data);if(locationJson){if(locationJson.location.length===1){var exactMatchObj=ws.createLocJSObj(locationJson.location[0]);if(action===ws.UPDATE_HEADER_ACTION){ws.fetchLocationJSON(exactMatchObj.loc_id,function(){ws.renderWidget();});}else{$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(searchInputId).attr("name","locId");$(searchInputId).attr("value",exactMatchObj.loc_id);}}else{qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+");window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;}}else{qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+");window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;}};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:locSearchTerm[0],callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:true,cache:true});}},gotoYourWeatherPage:function(locId,city,state,country){var ws=this,yourWeatherURL=ws.PAGE_URL_YOUR_WEATHER+"?locId="+locId;window.location.href=yourWeatherURL;},renderYourWeather:function(divClass,locationId,weatherView){var ws=this,feedHolder=$(divClass);if(!locationId||locationId===""){locationId=ws.WEATHER_DEFAULT_LOCATION;}$.get(ws.SERVICE_URL_WEATHER_HTML,{locationId:locationId,weatherView:weatherView},function(data){feedHolder.html(data);var weather_dayly=feedHolder.find(".weather-daily"),weather_hourly=feedHolder.find(".weather-hourly"),average_records=$(".weather.average-and-records h1"),text=average_records.text();text=text.replace("&","& ");feedHolder.find(".weather-current h1").replaceWith('<h2 class="title">Current Conditions</h2>');weather_dayly.find("h1").replaceWith('<h2 class="title">10 Day Forecast</h2>');weather_dayly.addClass("c");weather_hourly.find("h1").replaceWith('<h2 class="title">Hourly Forecast</h2>');weather_hourly.addClass("c");average_records.replaceWith('<h2 class="title">'+text+"</h2>");});},renderSearchResults:function(divClass,searchTerm){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){var searchResultsHtml="";if(data){var resultsIndex,locationJson=ws.createObjFromJSON(data);if(locationJson){if(locationJson.location.length>1){searchResultsHtml+='<p class="results">Your search for <span class="city">'+searchTerm+'</span> returned multiple locations</p><p>Please click on the location you are looking for:</p><p class="sorted">Sorted alphabetically by city, state, country<span/></p><table>';for(resultsIndex=0;resultsIndex<locationJson.location.length;resultsIndex++){var matchingLocObj=ws.createLocJSObj(locationJson.location[resultsIndex]),locationLink=ws.PAGE_URL_YOUR_WEATHER+"?locId="+matchingLocObj.loc_id;if(resultsIndex%2===0){searchResultsHtml+='<tr class="even">';}else{searchResultsHtml+="<tr>";}searchResultsHtml+='<td><a href="'+locationLink+'">'+matchingLocObj.city+"</a></td><td>"+matchingLocObj.state+"</td><td>"+matchingLocObj.country+"</td></tr>";}searchResultsHtml+="</table>";}else{if(locationJson.location.length===1){var locObj=ws.createLocJSObj(locationJson.location[0]);ws.gotoYourWeatherPage(locObj.loc_id,locObj.city,locObj.state,locObj.country);}else{searchResultsHtml+='<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>";}}}else{searchResultsHtml+=ws.MSG_DEFAULT_ERROR;}}else{searchResultsHtml+=ws.MSG_DEFAULT_ERROR;}$(divClass).html(searchResultsHtml);};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:({zipOrLocation:searchTerm,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true,error:function(){$(divClass).html('<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>");}});},renderAirportDelayInfo:function(divClass,airportCode){var ws=this,aCode=airportCode.toUpperCase();$.get(ws.SERVICE_URL_AIRPORT_DELAY_JSON,{airportCode:aCode},function(data){if(data){var delayIndex,delayJson=ws.createObjFromJSON(data),airportDelayHtml="";if(delayJson.delayList.length){airportDelayHtml+='<div class="delay">';for(delayIndex=0;delayIndex<delayJson.delayList.length;delayIndex++){var delayInfo=delayJson.delayList[delayIndex].delayInfo,delayReason=delayJson.delayList[delayIndex].delayReason;airportDelayHtml+='<p><img alt="Exclamation" src="'+(window.FOX_DomainPath||"")+'/static/all/img/exclamation.png"/>Delay Information</p><p class="information">'+delayInfo+'</p><p class="reason">Delay Reason</p><p class="information">'+delayReason+"</p>";}airportDelayHtml+="</div>";}else{airportDelayHtml+='<div class="no-delay"><p><img alt="Exclamation" src="'+(widow.FOX_DomainPath||"")+'/static/all/img/exclamation.png"/>Delay Information</p><p class="information">No delays at '+aCode+" reported.</p></div>";}$(divClass).html(airportDelayHtml);}});},renderMarineForecast:function(divClass){var ws=this,marineHtml="";marineHtml+='<div class="marine-search"><h2 class="title">Marine Forecast</h2><div class="location"><form action="" class="form_1" id="search_form4" method="get"><div id="marine-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="marineState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_MARINE_FORECAST_ENABLED)+'</ul></div><div class="clear"></div></div><div id="marine-cities-dropdown" class="list-type-dropdown"><p class="text title">Choose Marine Location</p><div class="drop_container holder"><input type="hidden" name="marineLocation" value="" /><p id="tide-cities-p" class="weather_dropdown current-value disabled">- select -</p><ul id="tide-cities-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="marine-result"></div>';$(divClass).html(marineHtml);$(".weather .marine-result").each(function(){ws.renderYourWeather(this,"USCA0638","weather_marine");});try{FOX.site.channel.listDropdown.init("marineState");}catch(err){}},renderTideLocationsDropdown:function(stateAbbr){var ws=this;if(stateAbbr!==""){$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_MARINE_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data,textStatus){var marineLocJson=ws.createObjFromJSON(data);if(marineLocJson){if(marineLocJson.marineLocations.length>0){ws.generateTideLocationsList(marineLocJson.marineLocations);}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}});}},generateTideLocationsList:function(locArrayObj){var i,tideLocDropdown="";if(locArrayObj!==null){for(i=0;i<locArrayObj.length;i++){var marineLocId=locArrayObj[i].loc_id,marineCity=locArrayObj[i].city;tideLocDropdown+='<li lang="'+marineLocId+'">'+marineCity+"</li>";}$("#tide-cities-list").html(tideLocDropdown);$("#tide-cities-p").removeClass("disabled");}else{tideLocDropdown+='<li lang=""></li>';$("#tide-cities-list").html(tideLocDropdown);$("#tide-cities-p").html("- select -");$("#tide-cities-p").addClass("disabled");}try{FOX.site.channel.listDropdown.init("marineCities");}catch(err){}},generateStatesList:function(statesList){var i,ws=this,listHtml="",states=statesList.split("|");for(i=0;i<states.length;i++){listHtml+='<li lang="'+states[i]+'">'+CONST.US_States[states[i]]+"</li>";}return listHtml;},renderSkiConditions:function(divClass){var ws=this,skiHtml="";skiHtml+='<div class="ski-search"><h2 class="title">Ski Conditions</h2><div class="location"><form action="" class="form_1" id="search_form5" method="get"><div id="ski-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="skiState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_SKI_CONDITIONS_ENABLED)+'</ul></div><div class="clear"></div></div><div id="ski-resorts-dropdown" class="list-type-dropdown"><p class="text title">Choose Ski Location</p><div class="drop_container holder"><input type="hidden" name="skiLocation" value="" /><p id="ski-resorts-p" class="weather_dropdown current-value disabled">- select -</p><ul id="ski-resorts-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="ski-result"></div>';$(divClass).html(skiHtml);$(".weather .ski-result").each(function(){ws.renderSkiCondResult(this,"303003");});try{FOX.site.channel.listDropdown.init("skiState");}catch(err){}},renderSkiResortsDropdown:function(stateAbbr){var ws=this;if(stateAbbr!==""){$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_SKI_RESORTS_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data,textStatus){var skiResortJson=ws.createObjFromJSON(data);if(skiResortJson){if(skiResortJson.skiResorts!==null&&skiResortJson.skiResorts.length>0){var newSkiReportHolder=[],skiArray=skiResortJson.skiResorts;for(var x=0;x<skiArray.length;x+=1){if(x===0){newSkiReportHolder.push(skiArray[0]);}else{if(newSkiReportHolder[newSkiReportHolder.length-1]["resort_name"]!==skiArray[x]["resort_name"]){newSkiReportHolder.push(skiArray[x]);}}}ws.generateSkiResortsList(newSkiReportHolder);}else{return false;}}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}});}},generateSkiResortsList:function(locArrayObj){var i,skiResortsDropdown="";if(locArrayObj!==null){for(i=0;i<locArrayObj.length;i++){var skiResortId=locArrayObj[i].resort_id,skiResortName=locArrayObj[i].resort_name;skiResortsDropdown+='<li lang="'+skiResortId+'">'+skiResortName+"</li>";}$("#ski-resorts-list").html(skiResortsDropdown);$("#ski-resorts-p").removeClass("disabled");}else{skiResortsDropdown+='<li lang=""></li>';$("#ski-resorts-list").html(skiResortsDropdown);$("#ski-resorts-p").html("- select -");$("#ski-resorts-p").addClass("disabled");}try{FOX.site.channel.listDropdown.init("skiResorts");}catch(err){}},renderSkiCondResult:function(divClass,resortId){var ws=this;$.get(ws.SERVICE_URL_SKI_COND_JSON,{resortId:resortId},function(data){var skiCondJson=ws.createObjFromJSON(data),skiResultHtml=ws.generateSkiCondHtml(skiCondJson);$(divClass).html(skiResultHtml);});},generateSkiCondHtml:function(skiCondJson){var skiObj=skiCondJson.skiConditions,snowMin=skiObj.new_snow_min?skiObj.new_snow_min+" in":"N/A",surface=skiObj.surface_condition?skiObj.surface_condition:"N/A",lastSnowfall=skiObj.last_snow?skiObj.last_snow+"in":"N/A",prevSnowfall=skiObj.prev_snow?skiObj.prev_snow:"N/A",baseDepth="N/A";if(skiObj.base_min&&skiObj.base_max){baseDepth=skiObj.base_min+" of "+skiObj.base_max;}var skiHtml='<ul><li><p class="city-name">'+skiObj.resort_name+", "+skiObj.state+' Ski Report</p><div class="four-half"><table><tbody><tr><td class="first">Operating Status</td><td>'+skiObj.open_status+'</td></tr><tr class="even"><td class="first">Surface</td><td>'+surface+'</td></tr><tr><td class="first">Temperature</td><td>'+skiObj.temperature+' F</td></tr><tr class="even"><td class="first">New Snowfall</td><td>'+snowMin+'</td></tr><tr><td class="first">Last Snowfall</td><td>'+lastSnowfall+'</td></tr><tr class="even"><td class="first">Previous Snowfall</td><td>'+prevSnowfall+'</td></tr><tr><td class="first">Lifts Open</td><td>'+skiObj.lifts_open+" of "+skiObj.lifts_total+'</td></tr><tr class="even"><td class="first">Trails Open</td><td>'+skiObj.trails_open+" of "+skiObj.trails_total+'</td></tr><tr><td class="first">Grooming Trails</td><td>'+skiObj.groom_trails+" of "+skiObj.trails_total+'</td></tr><tr class="even"><td class="first">Base Depth</td><td>'+baseDepth+'</td></tr><tr><td class="first">Terrain</td><td>'+skiObj.terrain+'&#37;</td></tr><tr class="even"><td class="first">Snow Made</td><td>'+skiObj.snow_made+'&#37;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr class="even"><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div></li></ul>';return skiHtml;},addToFavorites:function(locId){if(this.weatherCookie("weatherfavlocs")){var favLocationArray=(this.weatherCookie("weatherfavlocs")).split("|");if(favLocationArray.length<5){var favIndex,saveFavorite=true;for(favIndex=0;favIndex<favLocationArray.length;favIndex++){if(favLocationArray[favIndex]===locId){alert("You have already saved this location to My Favorites.");saveFavorite=false;}}if(saveFavorite){favLocationArray.push(locId);this.createWeatherFavoritesCookie(favLocationArray);this.renderFavorites();}}else{alert("You have 5 saved locations in My Favorites. Please remove one from My Favorites to save this location.");}}else{var newFavCookieArray=new Array(locId);this.createWeatherFavoritesCookie(newFavCookieArray);this.renderFavorites();}},removeFavorite:function(locId){if(this.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=(this.weatherCookie("weatherfavlocs")).split("|");for(favIndex=0;favIndex<favLocationArray.length;favIndex++){if(favLocationArray[favIndex]===locId){favLocationArray.splice(favIndex,1);break;}}this.createWeatherFavoritesCookie(favLocationArray);}$("#li_"+locId).remove();},generateFavoritesHtml:function(weatherObj){var dataObj=weatherObj.weatherData,stateToDisplay=dataObj.stateShort;if(dataObj.locationId.substr(0,2)!=="US"){stateToDisplay=dataObj.country;}var favHtml='<li id="li_'+dataObj.locationId+'"><div class="weather-img"><a href="#" onclick="weather_service.gotoYourWeatherPage(\''+dataObj.locationId+"','"+dataObj.cityName+"','"+dataObj.stateShort+"','"+dataObj.country+'\');return false;"><img alt="Weather" src="'+weather_service.PATH_WEATHER_ICON_IMAGE+dataObj.days[0].image+weather_service.WEATHER_ICON_IMAGE_EXT+'"/></a></div><div class="city-container"><h3>'+unescape(dataObj.cityName)+", "+stateToDisplay+'</h3><div class="desc"><p>'+dataObj.forecast+'</p></div></div><div class="degrees"><p>'+dataObj.days[0].hi+'&deg;&nbsp;<span class="low">'+dataObj.days[0].lo+'&deg;</span></p><a class="close" href="#" onclick="weather_service.removeFavorite(\''+dataObj.locationId+"');return false;\"/></div></li>";return favHtml;},renderFavorites:function(){var ws=this,favoritesHtml="<ul>";if(ws.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=(ws.weatherCookie("weatherfavlocs")).split("|");favoritesHtml+='<li><ul class="favorites">';for(favIndex=0;favIndex<favLocationArray.length;favIndex++){var favDataObj,favLocationId=favLocationArray[favIndex],favDataCookie=this.getWeatherDataCookie(favLocationId);if(favDataCookie){favDataObj=ws.createObjFromJSON(favDataCookie);favoritesHtml+=ws.generateFavoritesHtml(favDataObj);}else{var callbackFn="location_renderfavorites_callback";ws[callbackFn]=function(data){if(data){ws.createWeatherDataCookie(favLocationId,data);favDataObj=ws.createObjFromJSON(data);favoritesHtml+=ws.generateFavoritesHtml(favDataObj);}};$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:({locationId:favLocationId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});}}favoritesHtml+="</ul></li><li>&nbsp;</li>";}favoritesHtml+=this.generateRightRailSearch("myfav")+"</ul>";var favoritesObj=$(".component, .c").find(" .weather.favorites");favoritesObj.html(favoritesHtml);$("ul.favorites li:last-child",favoritesObj).addClass("last");$("input[class*=weather_city_autocomplete_myfav]",favoritesObj).keyup(function(){ws.weatherCityAutoComplete(this);});},renderAirportSearch:function(){var airportHtml='<div class="weather airport-search"><h1><strong>Airport</strong> Delays</h1><ul><li><div><span class="text">'+this.TXT_AIRPORT_SEARCH_FIELD+'</span><form method="get" id="aiport_search" class="form_1" action="" onsubmit="return weather_service.airportSearchAction(this,\'#airportLocId\');"><fieldset class="text_box"><input type="text" id="airportCode" class="airport_input no_airport" size="50" value="" name="airportCode"/><input type="hidden" id="airportLocId" value="" name="locId"/><input type="submit" class="airport" value=""/></fieldset></form></div></li></ul></div>';document.write(airportHtml);},fetchAndSaveWeatherJSONCookie:function(locId,setAsCookie,callback){setAsCookie=(typeof setAsCookie==="boolean")?setAsCookie:true;var ws=this,callbackFn="location_weatherjsoncookie_callback";ws[callbackFn]=function(data){if(setAsCookie){ws.createWeatherDataCookie(locId,data);ws.renderWidget();}else{if(typeof callback==="function"){callback(data);}}};$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:({locationId:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});},fetchLocationJSON:function(locId,fn){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){ws.createWeatherLocationCookie(data);if(typeof fn==="function"){fn();}};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:({zipOrLocation:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});},fetchLocationRegionCode:function(locId,callback){var ws=this,regionCode="";$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_LOCATION_REGION_JSON,data:{locationId:locId,cb:cacheBuster()},success:function(data,textStatus){if(data){var regionJson=ws.createObjFromJSON(data);callback(regionJson.regionCode);}},error:function(XMLHttpRequest,textStatus,errorThrown){showToConsole(ws.MSG_DEFAULT_ERROR);}});return regionCode;},weatherCityAutoComplete:function(element){var ws=this;ws.currentCityString="";var ACElementId=$(element).attr("id"),preloaderObj=$(element).parent().find(".preloader-img:first"),inputValue=$.trim($(element).val());if(inputValue.length<1){return ;}var cssValue=$(element).attr("class"),prefix="weather_city_autocomplete_",tempIndex=cssValue.indexOf(prefix)+prefix.length,appendix=cssValue.substr(tempIndex);tempIndex=appendix.indexOf(" ");if(tempIndex>0){appendix=appendix.substr(0,tempIndex);}var initial=inputValue.charAt(0).toLowerCase();if(initial.match(/[a-z]/)===null){return ;}if(typeof ws.weatherCityData[initial]==="undefined"){if(typeof ClientStorageManager==="undefined"){triggerAjaxCall(false);}else{var restrict=["cookie","msiestorage"];if(restrict.join("|").indexOf(ClientStorageManager.type.toLowerCase())===-1){ClientStorageManager.getItem(prefix+initial,function(storageData){if(storageData){var cities=eval(storageData);ws.weatherCityData[initial]=cities;triggerAutoComplete(cities);}else{triggerAjaxCall(true);}});}else{triggerAjaxCall(false);}}}else{triggerAutoComplete(ws.weatherCityData[initial]);}function triggerAjaxCall(useCSM){if(typeof ws.ACListener[ACElementId]==="undefined"){ws.ACListener[ACElementId]={init:false,fchar:initial,ajaxReady:true};}if(!ws.ACListener[ACElementId].ajaxReady){return ;}ws.ACListener[ACElementId].ajaxReady=false;$(preloaderObj).show();$.ajax({type:"GET",url:ws.SERVICE_URL_CITY_DATA,data:({cityNameInitial:initial,cb:cacheBuster()}),dataType:"text",cache:true,success:function(data,textStatus){if(data){var cities=data.replace(/var cities\=/,"");if(useCSM){ClientStorageManager.saveItem({key:prefix+initial,value:cities,expire:7,success:function(returnObj){ws.weatherCityData[initial]=returnObj.value;},error:function(err){}});if(typeof ws.weatherCityData[initial]==="undefined"){ws.weatherCityData[initial]=cities;}triggerAutoComplete(ws.weatherCityData[initial]);}else{ws.weatherCityData[initial]=cities;triggerAutoComplete(ws.weatherCityData[initial]);}$(preloaderObj).fadeOut("slow");ws.ACListener[ACElementId].ajaxReady=true;}else{$(preloaderObj).hide();ws.ACListener[ACElementId].ajaxReady=true;showToConsole(ws.MSG_DEFAULT_ERROR);}},error:function(XMLHttpRequest,textStatus,errorThrown){$(preloaderObj).hide();ws.ACListener[ACElementId].ajaxReady=true;showToConsole(ws.MSG_DEFAULT_ERROR);}});}function triggerAutoComplete(cities){cities=eval(cities);if(typeof ws.ACListener[ACElementId]==="undefined"){ws.ACListener[ACElementId]={init:false,fchar:initial,ajaxReady:true};}else{if(ws.ACListener[ACElementId].fchar!==initial){ws.ACListener[ACElementId].init=false;}}if(!ws.ACListener[ACElementId].init){$(element).autocomplete(cities,{max:20,width:193,selectFirst:false,resultsClass:"ac_results ac_results_"+appendix,formatItem:function(item){return item.t;}}).result(function(event,item){ws.currentLocId=item.id;ws.currentCityString=item.t;});ws.ACListener[ACElementId].init=true;ws.ACListener[ACElementId].fchar=initial;}}},renderHeaderLocationChange:function(){var ws=this,htmlArr=[],formTimeout=false;htmlArr.push('<div id="weather_loc_change" style="display:none;"><form action="#" method="get"><fieldset><legend>Weather</legend>');htmlArr.push('<input id="weather_headInput" type="text" name="searchTerm" value="Enter city or zip" />&nbsp;<input type="submit" name="submit" class="btn-smll" value="Go" />');htmlArr.push("</fieldset></form></div>");var htmlElm=$(htmlArr.join(""));htmlElm.find("form").each(function(){var elm=$(this),search=elm.find("#weather_headInput");search.focus(function(){ws.searchFieldOnFocus(this);clearTimeout(formTimeout);}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val==="")?ws.TXT_HEADER_SEARCH_FIELD:val);formTimeout=setTimeout(function(){ws.changeHeaderLocation();},3000);});elm.submit(function(){clearTimeout(formTimeout);ws.locationSearchAction(elm,"#weather_headInput",ws.UPDATE_HEADER_ACTION);return false;});});$(".weather-search, #weather_corner").append(htmlElm);},changeHeaderLocation:function(){var info=$("#weather_cur_loc"),search=$("#weather_loc_change");if(info.is(":hidden")){search.css("display","none");info.css({opacity:"0",display:"inline"});animateFn.show(info,{speed:300,type:"swing"});}else{info.css("display","none");search.css({opacity:"0",display:"inline"});animateFn.show(search,{speed:300,type:"swing"});}},headerDisplayAction:function(locationId){var ws=this;var headerDataCookie=this.getWeatherDataCookie(locationId);if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie),wdObj=headerDataObj.weatherData,htmlArr=[],imgSrc=this.PATH_WEATHER_ICON_IMAGE+wdObj.days[0].image+this.WEATHER_ICON_IMAGE_EXT;htmlArr.push('<div id="weather_cur_loc"><p><a href="#">Forecast:</a> <span class="degree">'+wdObj.currentTemp+'&#176; <img src="http://www.foxnews.com/static/all/img/clear.gif" style="width:24px; height:24px;"/></span> ');htmlArr.push('<span class="location">'+wdObj.cityName+'</span> <a href="#">edit</a></p></div>');var htmlElm=$(htmlArr.join(""));htmlElm.find("span.degree img").each(function(){var elm=$(this);elm.css({opacity:"0",display:"inline"});if(wdObj.days[0].image.length===0){elm.css("display","none");}else{if(!$.browser.opera){var img=new Image();img.onload=function(){elm.attr("src",imgSrc);animateFn.show(elm,{speed:300,type:"swing"});};img.src=imgSrc;}else{elm.css({backgroundImage:"none",display:"inline",opacity:"0"});elm.attr({src:imgSrc});animateFn.show(elm,{speed:300,type:"linear"});}}});htmlElm.find("a").each(function(){var aTag=$(this);var text=aTag.text().toLowerCase();aTag.click(function(){if(text.indexOf("forecast")>-1){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);}if(text.indexOf("edit")>-1){ws.changeHeaderLocation();}return false;});});$(".weather-search, #weather_corner").html(htmlElm);}}};function ExternalServices(root){this.root=root;this._DataObj=false;this._ExtWidgets=[];}ExternalServices.prototype={reloadWidgets:function(){var x,widgets=this._ExtWidgets,len=widgets.length;for(x=0;x<len;x++){var fn=widgets[x];if(typeof fn==="function"){fn();}}},setWidget:function(fn,execute){var EX=this;if(typeof fn==="function"){EX._ExtWidgets.push(fn);if(execute){fn();}}},getCurrentWeatherData:function(){},createForm:function(formElm){if(!formElm){return false;}var EX=this,root=this.root;formElm.each(function(){var form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value");search.focus(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val===txt)?"":val);}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val==="")?txt:val);});form.submit(function(){root.locationSearchAction(this,"#weather_widgetInput",root.UPDATE_HEADER_ACTION);return false;});});}};function showToConsole(str){if(typeof (console)==="object"){console.log(str);}}function cacheBuster(freq){freq=freq||false;var date=new Date(),str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString();switch(freq){case"h":str+=(date.getHours()+1).toString();break;case"30m":str+=(date.getHours()+1).toString()+((date.getMinutes()%30===0)?"1":"0");break;default:str+=(date.getHours()+1).toString();}return str;}var weather_service=window.weather_service=new WeatherService("weather_service");var animateFn={isIE:function(){return $.browser.msie;},animate:function(elm,cfg){if(!this.isIE()){if(!cfg.speed){cfg.speed=300;}if(!cfg.type){cfg.type="swing";}elm.animate(cfg.css,cfg.speed,cfg.type,function(){if(cfg.callback){cfg.callback();}});}else{elm.css(cfg.css);elm.css("opacity","");if(cfg.callback){cfg.callback();}}},hide:function(elm,cfg){if(!elm){return false;}var i,cssObj={opacity:"0"};if(cfg.css){for(i in cfg.css){cssObj[i]=cfg.css[i];}}cfg.css=cssObj;this.animate(elm,cfg);},show:function(elm,cfg){if(!elm){return false;}var i,cssObj={opacity:"1"};if(cfg.css){for(i in cfg.css){cssObj[i]=cfg.css[i];}}cfg.css=cssObj;this.animate(elm,cfg);}};}(jQuery));window.FOX_DependencyManager=(function(G){var B={prefix:"___"};var E=function(){this._TYPES=[];};E.prototype.addInstance=function(I,J){if(typeof I!=="string"&&I.length<1){return false;}var H=this;if(!H[A(I)]){H._TYPES.push(I);H[A(I)]=new C(I,this);if(G.isArray(J)){H.setDependency(I,J);}}else{D("[DependencyManager.addDependency] '"+I+"' already exists.");}};E.prototype.onReady=function(I,J){if(typeof I!=="string"||typeof J!=="function"){return false;}var H=this;G.loadAttempt(60,500,function(){return(H[A(I)])?true:false;},function(){H[A(I)].onReady(function(K){J(K);});},function(){D("[DependencyManager.onReady] Max attempts to check for the instance of '"+I+"' reached.");});};E.prototype.setDependency=function(I,J){if(typeof I!=="string"||!G.isArray(J)){return false;}var H=this,I=A(I);if(!H[I]){return false;}H[I].setDependency(J);};E.prototype.fireReady=function(I,J){if(typeof I!=="string"){return false;}var H=this,I=A(I);if(H[I]){H[I].EVENT.fireReady(J);}};var C=(function(){var H=function(K,J){this.root=J;this._TYPE=K;this._DEPENDENCY=false;this._IS_READY=false;this._pooler={};this.EVENT=new F(this);};H.prototype.setDependency=function(K){var J=this;if(J._DEPENDENCY){return false;}if(G.isArray(K)&&I(K)){J._DEPENDENCY=K;J.isReady();D("[DependencyManager."+J._TYPE+".setDependency] Dependency set.");}else{D("[DependencyManager."+J._TYPE+".setDependency] Invalid setting.");}};H.prototype.isReady=function(){var M=this,L=this.root;if(!M._DEPENDENCY){return false;}if(M._IS_READY&&!M._pooler.isReady){return M._IS_READY;}M._pooler.isReady=true;var K=function(){var Q,R=M._DEPENDENCY,T=true;for(Q=0;Q<R.length;Q++){var S=A(R[Q]);if(L[S]&&!L[S].EVENT.inquire()){T=false;break;}}return T;};var O=false,N=0,J=360;var P=function(){N++;if(!O){O=K();}if(!O){if(N>J){D("[DependencyManager."+M._TYPE+".isReady] Max attempts reached to check ready state.");}else{setTimeout(function(){P();},500);}}else{M._IS_READY=true;M._pooler.isReady=false;}};P();};H.prototype.onReady=function(K){if(typeof K!=="function"){return false;}var J=this;G.loadAttempt(360,500,function(){return(J._IS_READY)?true:false;},function(){K(J._READY_DATA);});};var I=function(J){return true;};return H;}());var F=(function(){var H=function(I){this.root=I.root;this.main=I;this._IS_READY=false;this._READY_DATA=null;};H.prototype.fireReady=function(J){var I=this;if(!I._IS_READY){I._IS_READY=true;if(J){I._READY_DATA=J;}}};H.prototype.inquire=function(){var I=this;return I._IS_READY;};return H;}());var D=function(H){if(window.console&&window.console.log){console.log(H);}};var A=function(H){return(B.prefix+H);};return E;}(jQuery));
/*Sun Nov 04 15:15:35 EST 2012*/
