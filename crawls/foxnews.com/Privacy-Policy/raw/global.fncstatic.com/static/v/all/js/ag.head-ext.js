(function(E){var D=(typeof _cbVarStr!=="undefined")?_cbVarStr:"b1020";(function(){var S=function(W){W=W||false;var T=new Date(),X=T.getFullYear().toString()+(T.getMonth()+1).toString()+T.getDate().toString(),V=T.getHours()+1,U=T.getMinutes();X+=V.toString()+((W&&!isNaN(W))?(Math.floor(U/parseInt(W,10))).toString():"");return X;};document.write('<script type="text/javascript" src="http://global.fncstatic.com/static/v/all/js/geo.js?cb='+S(1)+'"><\/script>');}());var Q=(function(){var T="fn",V=window.location,U=V.host||V.hostname;var S=function(W){return(U.indexOf(W)>-1)?true:false;};if(S("foxnews.com")){if(S("latino.foxnews.com")){T="fn-latino";}else{T="fn";}}else{if(S("foxbusiness.com")){if(S("smallbusiness.foxbusiness.com")){T="sbc";}else{T="fb";}}}return T;}());var P={feed:{whatsHotLive:{feedFunction:"FeedSource_WhatsHotWatchLive",url:"http://www.foxnews.com/js/whatshot.js",rotate:3,show:{hot:false,live:2},fade:{use:true,delay:900}},onAir:{feedFunction:"FeedSource_FNCTV",url:"http://www.foxnews.com/js/onair.js",descCharLimit:35,imageDomainLoc:""},onAirCarousel:{feedFunction:"FOX_FN_OnAir_Data",url:"http://global.fncstatic.com/static/managed/json/onair-feed-data.js"}},onAir:{hideDelay:200},authentication:{use:"render",domain:"foxnews.com",check:"/authentication/registration/validate/"}};window.FOX_Auth_Use_Janrain=(function(){var S=true;S=(window.location.search.indexOf("_authj=n")>-1)?false:S;return S;}());var B=function(){this.headObj={};};B.prototype={init:function(U){var S=this;if(E("body").data("HasHeaderInit")){return false;}E("body").data("HasHeaderInit",true);var V;for(V in U){if(U.hasOwnProperty(V)){this["_"+V]=U[V];}}this.setHolders();var T=function(){var W=false;W=("createTouch" in document)?true:false;W=(!W&&navigator.userAgent.match(/BlackBerry/i))?true:W;return W;};if(T()||!window.FOX_Auth_Use_Janrain||!window.AuthenticationService_Janrain){window.FOX_Auth_Use_Janrain=false;if(T()){E("#account").css("visibility","hidden");}else{this.authentication=new R(this);}}else{this.authentication=new I(this);}this.feeds=new O(this);this.onAir=new J(this);switch(Q){case"fn":S.whatsHot=new K(this);break;case"fb":S.whatsHot=new G(this);break;}this.searchAutocomplete=new A(this);},setHolders:function(){this.headObj={headlines:E("#headlines-primary"),primaryNav:E("#nav-primary"),onAir:E("#section-head .slide.slide-1"),authentication:E("#account")};this.setListeners();},setListeners:function(){var S=function(Y){var W=false,V=Y.split("/")[2]||false,X=window.location.hostname||window.location.host;if(V&&V.length>1){V=V.replace("www.","");if(X.indexOf(V)>-1){W=true;}}return W;};var T=E("#util dl dd");var U=function(){T.find("> a").removeClass("active");};T.each(function(){var X=E(this),V=X.find("> a"),W=V.attr("href");if(S(W)){U();V.addClass("active");}});}};var R=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){var V=this,U=this.root;if(U.headObj.authentication.size()===0){return false;}function T(){var a=document.location.hostname,Z=a.split("."),X=Z.length,Y=Z[X-2]+"."+Z[X-1];P.authentication.domain=Y;}function W(){T();if(typeof V[P.authentication.use]==="function"){V[P.authentication.use]();}else{V.render();}}if(typeof AuthService!=="undefined"){W();}else{E(document).ready(function(){if(typeof AuthService!=="undefined"){W();}else{H("[head.authentication] Authentication Service not found.");}});}this.setHolders();},setHolders:function(){var T=this.root.helper.getQueryStr("usr");if(T){E(".login-fields > .field > input[name='userName']").attr("value",T);}},render:function(){var Y=this.root,W=Y.headObj.authentication,V=(W.hasClass("alt-style"))?true:false,a=false,U=false;W.show();if(!V){a=W.find(".user-options > p:first");U=W.find("> .username > .encapsulate");var T=W.find("> .username"),b=E("body");U.hover(function(){E(this).addClass("hover");},function(){E(this).removeClass("hover");});U.click(function(){if(W.hasClass("active")){W.addClass("inactive").removeClass("active");}else{W.addClass("active").removeClass("inactive");}});T.hover(function(){window.FXAuthClickIsOver=true;},function(){if(window.FXAuthClickIsOver){window.FXAuthClickIsOver=false;}});if(!b.data("FXAuthClick")){b.data("FXAuthClick",true);b.mousedown(function(){if(!window.FXAuthClickIsOver&&W.hasClass("active")){W.removeClass("active").addClass("inactive");}});}}else{W=E("#authentication").parent();a=W.find(".username");}function X(f){f=f||"Profile";var d="",e="";if(P.authentication.domain!=="foxnews.com"){d=' target="_blank"';if(typeof E.cookie!=="undefined"&&E.cookie("p_DN")){e="?usr="+E.cookie("p_DN");}}return"<a"+d+' href="http://www.foxnews.com/community/user/profile'+e+'">'+f+"</a>";}var Z=window.authentication_service=new AuthService({domain:P.authentication.domain});Z.extend({createLoginLogout:function(h){var e=this,g=[],f=W.find("#authentication");if(e.isLoggedIn()){if(V){f=f.children(":first");f.each(function(){if(!e.isThirdParty()){E(this).html(X());}else{E(this).css({display:"none"});}});f.next().each(function(){var j=E('<a href="#">Log Out</a>');j.click(function(){try{e.logout(e.domain);}catch(k){H("[head.authentication] Logout - An error occured: "+k);}return false;});E(this).html(j);});a.html('<img src="http://global.fncstatic.com/static/v/all/img/head/profile.png" alt="" /> Welcome, <strong>'+e.getDisplayName()+"</strong>");a.css({display:"inline"});}else{f=W.find(".user-options > ul").children(":first");f.each(function(){if(!e.isThirdParty()){E(this).html(X(E(this).text()));}else{f.css({display:"none"});}});f.next().find("a").click(function(){try{e.logout(e.domain);}catch(j){H("[head.authentication] Logout - An error occured: "+j);}return false;});W.addClass("inactive");var d=(function(){var l=e.getDisplayName(),k=l,m="",j="<span${title}>${name}</span>";if(l.length>13){k=l.slice(0,13)+"...";m=' title="'+l+'"';}return j.replace("${title}",m).replace("${name}",k);}());a.html("You're logged in as "+d);}}else{f.children().find("a").each(function(){var j=E(this),k=j.text().toLowerCase();if(k.indexOf("register")>-1){j.click(function(){try{e.registrationOverlay(e.domain);if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}}catch(l){H("[head.authentication] Register - An error occured: "+l);}return false;});}else{if(k.indexOf("login")>-1){j.click(function(){try{e.providerOverlay(e.domain);if(typeof FOX!=="undefined"&&FOX.utils&&FOX.utils.pageRefresh){FOX.utils.pageRefresh.disable();}else{if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}}}catch(l){H("[head.authentication] Login - An error occured: "+l);}return false;});}}});if(V){f.css({display:"inline"});}else{a.html("Please login.");}}},onSuccessLogin:function(){var d=this;d.createLoginLogout();d.closeOverlay("login-provider");},callback:function(d){var e=this,f=e.createObjFromJSON(d);if(f.authentication.status==="ok"){if(e.thirdPartyAPI){e.thirdPartyAPI.disqus.login(f,function(){e.thirdPartyAPI.idms.login(f,function(){e.thirdPartyAPI.fileMobile.login(f,function(){window.FOX_TP_Reload=setTimeout(function(){window.location.reload();},1000);});});});}}e.closeOverlay("login-provider");}});Z.init();Z.createLoginLogout();}};return S;}());var I=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){if(window.AuthenticationService_Janrain){E("p.login-link").hide();var T=window.authentication_service_v3=new AuthenticationService_Janrain();}else{H("[head.Authentication] Fatal Error: Janrain service not found.");}}};return S;}());var J=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){var U=this,T=this.root;if(T.headObj.onAir.size()===0){return false;}window[P.feed.onAir.feedFunction]=function(V){U.renderOnAirNow(V);};window[P.feed.onAirCarousel.feedFunction]=function(V){U.renderOnAirCarousel(V,function(){U.carousel();U.setCarouselListeners();});};T.feeds.onAir();T.feeds.onAirCarousel();},renderOnAirNow:function(s){var d=this,m=this.root,Z=s.schedules.today,W=s.schedules.tomorrow,e=E("#show-data"),o=e.children("ul:first");if(e.size()===0){return false;}function j(t){t=E.trim(t);return(t.split(":"))[0]+t.charAt(t.length-2)+"<span>et</span>";}function g(u){var t=P.feed.onAir.descCharLimit;return(u.length>t)?u.substring(0,t)+"...":u;}function U(w,z){z=z||false;var AB,AC=[],v=(z)?w:w+1,t=E("#section-head").hasClass("fn"),AA=0;var AD=function(AE){AA++;if(t){AC.push("<li"+((AA===1)?' class="first"':"")+">");AC.push('<p class="media"><a href="'+AE.link+'"><img src="'+P.feed.onAir.imageDomainLoc+AE.img+'" alt="" /></a></p>');AC.push('<p class="time">'+j(AE.time)+"</p>");AC.push('<div class="info">');AC.push('<p class="summary"><a href="'+AE.link+'" title="'+AE.dek+'">'+AE.title+"</a></p>");AC.push('<p class="relation">'+g(AE.dek)+"</p>");if(AA===1){AC.push('<a class="watch-now-link" href="http://watch.foxnews.com/"><img src="http://global.fncstatic.com/static/all/img/watch-icon.gif"></a>');}AC.push("</div>");AC.push("</li>");}else{AC.push("<li"+((AA===1)?' class="first"':"")+">");AC.push('<p class="media"><a href="'+AE.link+'"><img src="'+P.feed.onAir.imageDomainLoc+AE.img+'" alt="" /></a></p>');AC.push('<div class="info">');AC.push('<p class="relation">'+AE.title+"</p>");AC.push('<p class="summary"><a href="'+AE.link+'" title="'+AE.dek+'">'+g(AE.dek)+"</a></p></div>");AC.push('<p class="time">'+j(AE.time)+"</p></li>");}};for(AB=w;AB<=v;AB++){var u=Z[AB];AD(u);}if(z&&W[0]){AD(W[0]);}o.html(AC.join(""));}var h,l=new Date(s.now.date+" "+s.now.time),f=parseInt(l.getHours()+""+((l.getMinutes()<10)?"0"+l.getMinutes():l.getMinutes()),10);for(h=0;h<Z.length;h++){var q=Z[h],k=(Z[h+1])?Z[h+1]:false;try{var X=E.trim(q.time).toLowerCase();X=(X.charAt(X.indexOf("m")-2)!==" ")?X.replace("pm"," pm").replace("am"," am"):X;var a=new Date(s.now.date+" "+X),r=parseInt(a.getHours()+""+((a.getMinutes()<10)?"0"+a.getMinutes():a.getMinutes()),10);if(k){var Y=E.trim(k.time).toLowerCase();Y=(Y.charAt(Y.indexOf("m")-2)!==" ")?Y.replace("pm"," pm").replace("am"," am"):Y;var V=new Date(s.now.date+" "+Y),T=parseInt(V.getHours()+""+((V.getMinutes()<10)?"0"+V.getMinutes():V.getMinutes()),10);if(f>=r&&f<T){U(h);break;}}else{U(h,true);break;}}catch(b){H("[head.onAir] Error: "+b);}}},renderOnAirCarousel:function(Y,X){var U=this,T=this.root,V=Y;var W=function(){var h=T.headObj.onAir.find("> .content > .slideshow");var d=[],b=V.length;for(var a=0;a<b;a++){var g=V[a],Z=(a===0)?true:false,f=(a+1===b)?true:false,e=(Z)?" section-first":(f)?" section-last":"";d.push('<li class="section'+e+'">');d.push('<p class="media"><a href="'+g.link+'"><img alt="'+g.title+'" pre-src="'+g.img+'" src="http://global.fncstatic.com/static/v/all/img/clear.gif"></a></p>');d.push('<h3><a href="'+g.link+'">'+g.title+"</a></h3>");d.push('<p class="time"><span>'+g.day+"</span> "+g.time+"</p></li>");}h.html("<ul>"+d.join("")+"</ul>");};W();if(typeof X==="function"){X();}},carousel:function(){var U=this.root,V=U.headObj.onAir.children(".content");var T={elm:V,slide:"horizontal",scroll:5,speed:1200,show:5,rotate:false};function W(Z){var X,Y=[];for(X=1;X<=Z.batch.max;X++){Y.push('<li><a href="#">&nbsp;</a></li>');}return Y.join("");}T.elm.each(function(Z){var Y=0,b=E(this);if(b.data("carousel_initialized")){return false;}var a=b.find("ol");var d={prev:b.find(".prev"),next:b.find(".next"),first:b.find(".first-page"),last:b.find(".last-page")};var X={auto:{set:false,speed:3000},slide:T.slide,scroll:T.scroll,show:T.show,speed:T.speed,rotate:T.rotate,eventCallback:function(e){if(e.event==="init"){Y=e.batch.max;a.html(W(e));a.children(":first").addClass("active");b.data("carousel_initialized",true);}else{a.children().each(function(f){E(this).toggleClass("active",function(){return(f+1===e.batch.current)?true:false;});});}if(e.batch.current===1){d.prev.addClass("inactive-prev");d.first.addClass("inactive-first");}else{d.prev.removeClass("inactive-prev");d.first.removeClass("inactive-first");}if(e.batch.current===e.batch.max){d.next.addClass("inactive-next");d.last.addClass("inactive-last");}else{d.next.removeClass("inactive-next");d.last.removeClass("inactive-last");}},controlsCallback:function(e){a.children().find("a").each(function(f){E(this).click(function(){e.stopAutoScroll();e.scrollToBatch(f+1);return false;});});d.first.click(function(){e.stopAutoScroll();e.scrollToItem(1);return false;});d.prev.click(function(){e.stopAutoScroll();e.slide("prev");return false;});d.next.click(function(){e.stopAutoScroll();e.slide("next");return false;});d.last.click(function(){e.stopAutoScroll();e.scrollToItem(Y);return false;});}};if(typeof E.fn.jfoxCarousel!=="undefined"){b.jfoxCarousel(X);}else{E(document).ready(function(){b.jfoxCarousel(X);});}});},setCarouselListeners:function(){var a=this.root,U=a.headObj.primaryNav,T=U.children("ul:first").children("li.on-air"),W=a.headObj.onAir,d=W.css("height").replace("px",""),V=P.onAir.hideDelay;var Z={close:T.find("img").filter(function(){return(E(this).attr("src").indexOf("close.png")>-1)?true:false;}),open:T.find("img").filter(function(){return(E(this).attr("src").indexOf("plus.png")>-1)?true:false;})};function Y(){var e=W.find(".slideshow > ul > li");e.each(function(){var g=E(this),j=g.find("> .media img"),h=j.attr("pre-src"),f=new Image();if(h&&!j.data("preloaded")){f.onload=function(){j.attr("src",h);};f.src=h;j.data("preloaded",true);}});}function X(){W.data("isRendering",true);W.data("hidden",true);W.animate({height:"0px",opacity:"0"},V,"swing",function(){W.css({display:"none"}).data("isRendering",false);});Z.close.hide();Z.open.show();T.removeClass("active");}function b(){if(!W.data("initToFirst")){W.data("initToFirst",true);W.find("p.controls > a.prev").click();}W.data("isRendering",true);W.data("hidden",false);W.css("display","block");W.animate({height:d,opacity:"1"},V,"swing",function(){W.data("isRendering",false);});Z.close.show();Z.open.hide();T.addClass("active");}Z.close.hide();W.css({height:"0px",opacity:"0"}).data("hidden",true);T.find("a").click(function(){Y();if(W.data("isRendering")){return false;}if(W.data("hidden")){b();}else{X();}return false;});}};return S;}());var K=(function(){var S=function(U){this.root=U;this.render=new T(this);this.set();};S.prototype={set:function(){var V=this,U=this.root;if(U.headObj.headlines.size()===0){return false;}window[P.feed.whatsHotLive.feedFunction]=function(W){V.render.set(W);};U.feeds.whatsHotLive();}};var T=function(U){this.main=this;this.root=U.root;};T.prototype={set:function(a){var W=this.root,V=W.headObj.headlines;var Y=this.hot({title:"Full Coverage",feed:a.whatshot,len:P.feed.whatsHotLive.show.hot});var b=this.live({title:"Watch Live",feed:a.watchlive,len:P.feed.whatsHotLive.show.live});if(typeof a.whatshot!=="undefined"){if(a.whatshot.length===0){return false;}var X=E('<dl class="first"></dl>');X.append(Y).children("dd:first").addClass("first");V.html(X);}if(typeof a.watchlive!=="undefined"){if(a.watchlive.length===0){return false;}var Z=E("<dl></dl>");Z.append(b).children("dd:first").addClass("first");V.append(Z);var U=V.children("dl:nth-child(2)");if(a.watchlive.length>P.feed.whatsHotLive.show.live){this.rotate(U);}else{U.children("dd").css("display","inline");}}},hot:function(W){if(typeof W.feed==="undefined"){return false;}W.len=W.len||W.feed.length;var V,U=[];if(W.len>0){U.push("<dt>"+W.title+"</dt>");for(V=0;V<W.feed.length;V++){var Y=W.feed[V],X=(V>=W.len)?' style="display:none;"':"";U.push("<dd"+X+'><a href="'+Y.link+'">'+Y.title+"</a></dd>");}}return E(U.join(""));},live:function(W){if(typeof W.feed==="undefined"){return false;}W.len=W.len||W.feed.length;var V,U=[];if(W.len>0){U.push("<dt>"+W.title+"</dt>");for(V=0;V<W.feed.length;V++){var Y=W.feed[V],X=(V>=W.len)?' style="display:none;"':"";U.push("<dd"+X+'><a href="'+Y.link+'">'+Y.title+"</a></dd>");}}return E(U.join(""));},rotate:function(Z){var a=Z.children("dd"),b=Z.children("dt:first"),V=a.size(),Y=P.feed.whatsHotLive.fade;if(V===0){return false;}var U=P.feed.whatsHotLive.rotate*1000;if(Y.use){U=U+Y.delay;}var W=false;a.each(function(e){var f=E(this);f.addClass("first");f.css("display",(e===0)?"inline":"none");if(e===0){f.data("rotateNumber",e+1);}});if(!Z.data("rotateNumber")){Z.data("rotateNumber",1);}function X(f){f=f||false;var e=Z.data("rotateNumber")+1;e=(e>V)?1:e;Z.data("rotateNumber",e);a.each(function(g){var j=E(this),h=g+1;if(!Y.use||f==="click"){j.css("display",(h===e)?"inline":"none");}else{if(h===e){j.fadeIn(Y.delay);}else{j.hide();}}});}function d(){clearInterval(W);W=setInterval(function(){X();},U);}d();b.css("cursor","pointer").click(function(){X("click");});Z.hover(function(){clearInterval(W);},function(){d();});}};return S;}());var G=(function(){var S=function(T){this.root=T;this.set();};S.prototype={set:function(){var T=this;E("#headlines .dv-list:first").each(function(){T.trigger(E(this));});},trigger:function(W){var T=this,V="fox_header_whatshot",U="http://global.fncstatic.com/static/all/generated/js/fb2-whatshot.js";window[V]=function(X){T.render(X,W);};(function(){var Y=document,X=Y.createElement("script");X.src=U;X.async=true;(Y.getElementsByTagName("head")[0]||Y.getElementsByTagName("body")[0]).appendChild(X);}());},render:function(Y,Z){if(!Y&&!Y.length){return false;}var V,U=[],T=Y.length;U.push("<h2>What's Hot</h2><ul>");for(V=0;V<T;V++){var X=Y[V],W=(V===0)?" dv-item-first":(V===T-1)?" dv-item-last":"";U.push('<li class="dv-item'+W+'">');U.push('<a href="'+X.link+'">'+X.title+"</a>");U.push("</li>");}U.push("</ul>");Z.html(U.join(""));}};return S;}());var O=(function(){var S=function(T){this.root=T;};S.prototype={whatsHotLive:function(){this.get.append({url:P.feed.whatsHotLive.url});},onAir:function(){this.get.append({url:P.feed.onAir.url});},onAirCarousel:function(){this.get.append({url:P.feed.onAirCarousel.url});},get:{append:function(T){(function(){var U=document.createElement("script");U.src=T.url;U.async=true;E("head").get(0).appendChild(U);}());},json:function(T){E.ajax({type:"GET",url:T.url,data:T.query,success:function(U){if(T.callback){T.callback(U);}}});}}};return S;}());var A=(function(){var T=function(U){this.root=U;this.set();};T.prototype={set:function(){var U=this;switch(Q){case"fb":S();break;}}};var S=function(){var U=E("form#searchArea");if(U.size()===0){U=E("#search-site").parent();}U.each(function(){var X=E(this);var V=X.find("input[type='text']");var Y=X.find("input[type='image'],input[type='submit']");var W=V.attr("value");V.attr({name:"q",onblur:"",onfocus:"",autocomplete:"off"}).blur(function(){var Z=E(this);var a=(Z.attr("value").length>0)?Z.attr("value"):W;Z.attr("value",a);}).focus(function(){var Z=E(this);var a=(Z.attr("value").indexOf(W)>-1)?"":Z.attr("value");Z.attr("value",a);});IDC_quoteComplete.init();});};return T;}());B.prototype.helper={getQueryStr:function(X){var V=(window.location.search).substr(1);if(V.length>0){var S,W=V.split("&"),T={};for(S=0;S<W.length;S++){var U=W[S].split("=");T[U[0]]=U[1];}return(T[X])?T[X]:false;}return false;}};var H=function(S){if(window.console&&window.console.log){console.log(S);}};var M={isIE:function(){return E.browser.msie;},animate:function(T,S){if(!this.isIE()){if(!S.speed){S.speed=300;}if(!S.type){S.type="swing";}T.animate(S.css,S.speed,S.type,function(){if(S.callback){S.callback();}});}else{T.css(S.css);T.css("opacity","");if(S.callback){S.callback();}}},hide:function(V,S){if(!V){return false;}var T,U={opacity:"0"};if(S.css){for(T in S.css){if(S.css.hasOwnProperty(T)){U[T]=S.css[T];}}}S.css=U;this.animate(V,S);},show:function(V,S){if(!V){return false;}var T,U={opacity:"1"};if(S.css){for(T in S.css){if(S.css.hasOwnProperty(T)){U[T]=S.css[T];}}}S.css=U;this.animate(V,S);}};var C=new B();(function(){var T=function(){E(document).ready(function(){C.init();});};try{if(window.FOX&&FOX.site&&typeof FOX.site.bottomInit==="function"){var S=FOX.site.bottomInit;FOX.site.bottomInit=function(){C.init();S();};}else{if(window.FOX_HP&&FOX_HP.site.OnPageReady){FOX_HP.site.OnPageReady(function(){C.init();});}else{T();}}}catch(U){T();}}());var N=window.siteStreamFlashPlayer=function(T,S){var b=(typeof T==="undefined")?1:T,Y=(typeof S==="undefined")?"foxnews":S,a=850,W=506,U=(screen.width-a)/2,Z=(screen.height-W)/2,V="height="+W+",width="+a+",top="+Z+",left="+U+",toolbar=no,location=no,scrollbars=no,status=no,resizable=no,fullscreen=no",X=window.open("http://interactive."+Y+".com/livestream/live.html?chanId="+b+"&openAIR=true","livePlayer",V);X.focus();};var F=window.siteStreamLivePlayer=function(X){var S=914,T=419,W=(screen.width-S)/2,V=(screen.height-T)/2;url="http://video.foxnews.com/video-live-streaming.html",settings="height="+T+",width="+S+",top="+V+",left="+W+",toolbar=no,location=no,scrollbars=no,status=no,resizable=no,fullscreen=no",url=url+((X&&!isNaN(X))?"?video_id="+X:"");var U=window.open(url,"LivePlayer",settings);U.focus();};var L=window.FOX_isMnt=function(){var S=false,U=window.CONST_Akamai_TIME||false;try{if(U.yr==="2011"&&U.mm==="11"&&(U.dd==="05"||U.dd==="06")){S=true;}else{if(U.yr==="2011"&&U.mm==="11"&&U.dd==="04"&&parseInt(U.hr,10)>=17){S=true;}}}catch(T){}return S;};}(jQuery));(function(A){A(document).ready(function(){var B=A("#section-footer a[rel*='external']");if(window.FOX&&FOX.utils&&FOX.utils.extLink){FOX.utils.extLink.set(B);}else{B.each(function(){var D=A(this),E=A.trim(D.attr("href")||""),C=A.trim(D.attr("rel")||"");if(E.length>0&&E!=="#"){C=(C.indexOf("external")>-1)?C:[C,"external"].join(" ");C=A.trim([C,"ext-linked"].join(" "));D.attr("rel",C);D.click(function(){window.open(E,"_blank");return false;});if(!D.attr("target")){D.attr("target","_blank");}}});}});}(jQuery));window.IDC_quoteComplete=(function(B){var A={index:-1,totalResults:0,results:false,resultsDiv:"search-results",field:"#search",url:"http://interactive.foxbusiness.com/projects/autocomplete/autocomplete.json",action:"http://interactive.foxbusiness.com/projects/autocomplete/intercept.html?q=",quoteUrl:"http://quote.foxbusiness.com/?searchString=",defaultText:"Search quotes, news and video",reset:function(){B("."+A.resultsDiv).html("");A.results=false;A.index=-1;},init:function(){B(A.field).focus(function(){if(B(this).val()===A.defaultText){B(this).val("");}A.reset();});B(A.field).blur(function(D){if(B(this).val()===""){B(this).val(A.defaultText);}setTimeout(function(){A.reset();},500);});B(A.field).parents("form").submit(function(){if(A.index>-1){B(A.field).val(B("#search_drop_overlay ul li:eq("+A.index+") a span.ticker").text());}if(A.index>-1){A.action=A.quoteUrl;}A.action+=encodeURIComponent(B(A.field).val());if(A.index>-1){A.reset();}document.location=A.action;return false;});var C="FOX_IDC_QuoteResponse";window[C]=function(D){A.response(D);};B(A.field).keyup(function(D){if((D.keyCode>=65&&D.keyCode<=90)||(D.keyCode>=97&&D.keyCode<=122)||D.keyCode===8){A.index=-1;var E=B(A.field).val();B("."+A.resultsDiv).html("");if(E!==""){B.getJSON(A.url+"?q="+E+"&callback="+C+"&jsonp=?");A.results=true;}else{A.results=false;}}else{if(D.keyCode===40||D.keyCode===38){if(A.results){B("#search_drop_overlay ul li:eq("+A.index+")").removeClass("selected");B("#search_drop_overlay ul li a:eq("+A.index+")").removeClass("selected");if(D.keyCode===40){if(A.index<(A.totalResults-1)){A.index++;}else{A.index=0;}}else{if(A.index>0){A.index--;}else{A.index=A.totalResults-1;}}B("#search_drop_overlay ul li:eq("+A.index+")").addClass("selected");B("#search_drop_overlay ul li a:eq("+A.index+")").addClass("selected");}}else{if(D.keyCode===27){A.reset();}}}});B(A.field).parents("form").after('<div class="'+A.resultsDiv+'"></div>');},response:function(D){var C="";var E=B(A.field).val();if(D!==""){A.totalResults=B(D).size();C+="<ul>";B.each(D,function(I,M){var J=new RegExp(E,"i");var L=this.s.search(J);var F=this.n.search(J);var G=L>-1?this.s.replace(J,"<strong>"+this.s.slice(L,(L+E.length))+"</strong>"):this.s;var H=F>-1?this.n.replace(J,"<strong>"+this.n.slice(F,(F+E.length))+"</strong>"):this.n;var K=this.s;C+='<li><a href="'+A.quoteUrl+K+'"><span class="ticker">'+G+'</span><span class="corporation">'+H+"</span></a></li>";});C+="</ul>";}else{A.totalResults=0;C="<p>No suggestions available</p>";}B("."+A.resultsDiv).html('<div id="search_drop_overlay" class="search_drop_overlay"><div class="search_drop_top">&nbsp;</div><div class="search_drop_list">'+C+'<div class="clearflatgray"></div><div class="search_drop_link1"><a href="'+A.action+E+'">Search for News &amp; Videos "<strong>'+E.toUpperCase()+'</strong>"</a></div></div><div class="search_drop_bottom"></div></div>');A.initMouseEvents();},initMouseEvents:function(){B("."+A.resultsDiv+" ul li").mouseover(function(){if(A.index>-1){B("."+A.resultsDiv+" ul li:eq("+A.index+")").removeClass("selected");}B(this).addClass("selected");});B("."+A.resultsDiv+" ul li").mouseout(function(){B(this).removeClass("selected");});B("."+A.resultsDiv+" ul li a").mouseover(function(){if(A.index>-1){B("."+A.resultsDiv+" ul li a:eq("+A.index+")").removeClass("selected");}B(this).addClass("selected");});B("."+A.resultsDiv+" ul li a").mouseout(function(){B(this).removeClass("selected");});}};return A;})(jQuery);(function(F){function I(){this._speed="slow";this._scrollTo=this._scroll=1;this._scrollType="relative";this._rotate=true;this._auto={set:false,resume:false,speed:5000};this._focus={item:0,animate:false};this._slide=this._show=null;this.cloneClass="item-clone";this.isAutoScroll=this._auto.set;this.isAutoScrollResume=this._auto.resume;this.autoSpeed=this._auto.speed;this.minAutoSpeed=3000;this.targetItem=this.currentCount=0;this.scrollBatch=1;this.timeout=null;this.triggered=this.isItemCountOK=this.isLastBatch=false;this._eventCallback=function(){};this.carouselInfoObj={};}function E(){}function J(A){typeof window.console==="object"&&console.log(A);}function H(){J("[init] error initializing carousel.");return false;}if(typeof jQuery.fn.jfoxCarousel!=="undefined"){J("[jfoxCarousel] Already initialized.");return false;}jQuery.fn.jfoxCarousel=function(A){if(!A){return false;}if(!A.slide||!A.show){return false;}return this.each(function(){var B=new I;B.init(F(this),A);return B;});};var D={holder:"slideshow",control:"controls"};I.prototype={init:function(C,A){function B(N){var T,P,Q,S,O,R=0;K.find("ul:first").children().each(function(){var X=F(this),W=G.getCSSDimension("margin",this,true),U=G.getCSSDimension("padding",this,true),V=G.getCSSDimension("border",this,true);T=G.format(G.getCSSDimension(N,this));if(N==="width"){P=W.Left+W.Right;Q=U.Left+U.Right;S=V.Left+V.Right;O=X.outerWidth(true);}else{P=W.Top+W.Bottom;Q=U.Top+U.Bottom;S=V.Top+V.Bottom;O=X.outerHeight(true);}X=T+P+Q+S;X=O>X?O:X;if(X>R){R=X;}});return R;}for(i in A){if(i==="auto"||i==="focus"){var M=A[i];for(p in this["_"+i]){if(M[p]){this["_"+i][p]=M[p];}}}else{if(i==="identifier"){for(c in D){if(A[i][c]){D[c]=A[i][c];}}}else{this["_"+i]=A[i];}}}this.obj=C;this.slideshowObj=F(this.obj).find("div."+D.holder);this.controlObj=F(this.obj).find("[class*='"+D.control+"']");var K=this.slideshowObj;if(F(this.slideshowObj).size()<1||this._slide!=="vertical"&&this._slide!=="horizontal"){H();return false;}K.scrollLeft(0).scrollTop(0);this.holder={width:G.format(K.css("width")),height:G.format(K.css("height")),item:{count:K.find("ul:first").children().size(),width:B("width"),height:B("height")}};if(this.holder.item.count===0||this._slide==="horizontal"&&this.holder.item.width<=0||this._slide==="vertical"&&this.holder.item.height<=0){H();return false;}else{this.isItemCountOK=true;}if(this._scrollType==="absolute"){M=this.holder.item.count%this._scroll;if(M>0){var L=this._scroll-M;this.holder.item.count+=L;K.find("ul:first").each(function(){for(var N=[],P=F("<span></span>"),O=0;O<L;O++){N.push("<li>&nbsp;</li>");}P.append(N.join(""));P.children().each(function(){F(this).css("visibility","hidden");});F(this).append(P.children());});}}M=Math.ceil((this.holder.item.count-this._show)/this._scroll)+(this.holder.item.count-this._show%this._scroll>0?1:0);this.maxBatch=M<1?1:M;if(typeof this._speed==="string"){this._speed=F.fx.speeds[this._speed]?F.fx.speeds[this._speed]:F.fx.speeds.slow;}if(this._auto.set){this.isAutoScroll=G.checkBoolean(this._auto.set);}if(this._auto.resume){this.isAutoScrollResume=G.checkBoolean(this._auto.resume);}if(!isNaN(this._auto.speed)){this.autoSpeed=this._auto.speed<this.minAutoSpeed?this.minAutoSpeed:this._auto.speed;}this.autoSpeed+=this._speed;this._focus.item>0&&this.slide("scrollToItem",this._focus.item,this._focus.animate);this.setListeners();},setListeners:function(){var A=this;this._eventCallback(this.carouselInfoObj={event:"init",items:this.holder.item.count,target:0,scroll:this._scroll,start:1,end:this._show>this.holder.item.count?this.holder.item.count:this._show,batch:{current:1,max:this.maxBatch}});if(this._controlsCallback){this.externalControls=new E;this.externalControls.init(this);this._controlsCallback(this.externalControls);}else{this.isAutoScroll=this._auto.set?this._auto.set:true;this.isAutoScrollResume=this._auto.resume?this._auto.resume:true;}this.externalControls.scrollToItem(1);if(this.isAutoScroll&&this.isItemCountOK){this.slideshowObj.hover(function(){if(A.isAutoScroll){A.autoScroll.stop(A.timeout);A.isAutoScroll=false;A.carouselInfoObj.event="autoScrollStop";A._eventCallback(A.carouselInfoObj);}},function(){if(A.isAutoScrollResume){A.autoScroll.play(A);A.isAutoScroll=true;A.carouselInfoObj.event="autoScrollPlay";A._eventCallback(A.carouselInfoObj);}});this.autoScroll.play(A);}},slide:function(U,T,M){function C(){B.find("> li:last").each(function(){var X=F(this),Y=B.find("> li:first").clone().addClass(K).removeClass("first");F("<ul></ul>").html(Y).each(function(){for(var Z=2;Z<=O;Z++){F(this).append(B.find("> li:nth-child("+Z+")").clone().addClass(K));}X.after(F(this).children());});});var W=S._slide==="vertical"?{scrollTop:N.scrollTop()+O*R.height}:{scrollLeft:N.scrollLeft()+O*R.width};N.animate(W,S._speed,"swing",function(){S._slide==="vertical"?N.scrollTop(0):N.scrollLeft(0);B.find("[class*='"+K+"']").remove();S.triggered=false;});S.currentCount=0;S.scrollBatch=1;S.isLastBatch=false;S._eventCallback(S.carouselInfoObj={event:"scrollToFirst",items:R.count,target:0,scroll:S._scroll,start:1,end:S._show>R.count?R.count:S._show,batch:{current:1,max:S.maxBatch}});}function A(){B.find("> li:first").removeClass("first").each(function(){var W=F(this),X=R.count-S._show+1,Y=B.find("> li:nth-child("+X+")").clone().addClass(K+" first");F("<ul></ul>").html(Y).each(function(){for(var Z=X+1;Z<=R.count;Z++){F(this).append(B.find("> li:nth-child("+Z+")").clone().addClass("item-clone"));}W.before(F(this).children());S._slide==="vertical"?N.scrollTop(O*R.height):N.scrollLeft(O*R.width);});});N.animate(S._slide==="vertical"?{scrollTop:0}:{scrollLeft:0},S._speed,"swing",function(){B.find("[class*='"+K+"']").remove();B.find(":first").addClass("first");S._slide==="vertical"?N.scrollTop((R.count-O)*R.height):N.scrollLeft((R.count-O)*R.width);S.triggered=false;});S.currentCount=R.count-O;S.scrollBatch=S.maxBatch;S.isLastBatch=true;S._eventCallback(S.carouselInfoObj={event:"scrollToLast",items:R.count,target:0,scroll:S._scroll,start:R.count-O,end:R.count,batch:{current:S.maxBatch,max:S.maxBatch}});}T=T||false;M=typeof M==="undefined"||M===null?true:M;this.triggered=true;var S=this,L=this._scroll,R=this.holder.item,O=this._show,P=this.currentCount,Q=this.scrollBatch,N=this.slideshowObj,B=F("ul:first",N),K=this.cloneClass,V=0;if(U==="scrollToBatch"){if(!T||isNaN(T)){return ;}if(T<=1){Q=1;P=0;this.isLastBatch=false;}else{if(T>=this.maxBatch){Q=this.maxBatch;P=R.count-O;this.isLastBatch=true;}else{Q=T;P=L*(T-1);}}if(P===this.currentCount&&Q===this.scrollBatch){return ;}}else{if(U==="scrollToItem"){if(!T||isNaN(T)){return ;}if(T<=1){Q=1;P=0;V=1;this.isLastBatch=false;}else{if(T>=R.count){Q=this.maxBatch;P=R.count-O;V=R.count;this.isLastBatch=true;}else{Q=Math.ceil(T/L);if(Q>=this.maxBatch){Q=this.maxBatch;P=R.count-O;this.isLastBatch=true;}else{Q=Q;P=L*(Q-1);}V=T;}}if(P===this.currentCount&&Q===this.scrollBatch&&this.carouselInfoObj.target===T){return ;}}else{if(U==="next"){T=P+L;if(T+O>R.count){if(P+O===R.count&&this._rotate){C();return ;}P=R.count-O;this.isLastBatch=true;Q++;Q=Q>this.maxBatch?this.maxBatch:Q;}else{P=T;Q++;}}else{if(U==="prev"){T=P-L;if(T<0){P=0;Q--;if(Q<1&&this._rotate){A();return ;}else{if(Q<1){Q=1;}}}else{P=T;Q--;}}}}}this.scrollBatch=Q;this.currentCount=P;this._eventCallback(this.carouselInfoObj={event:U,items:R.count,target:V,scroll:this._scroll,start:P+1,end:P+O>R.count?R.count:P+O,batch:{current:this.scrollBatch,max:this.maxBatch}});U=P*(this._slide==="vertical"?R.height:R.width);if(M){N.animate(this._slide==="vertical"?{scrollTop:U}:{scrollLeft:U},S._speed,"swing",function(){S.triggered=false;});}else{this._slide==="vertical"?N.scrollTop(U):N.scrollLeft(U);S.triggered=false;}},autoScroll:{play:function(A){A.timeout=setInterval(function(){A.slide("next");},A.autoSpeed);},stop:function(A){clearInterval(A);}}};E.prototype={init:function(A){this.root=A;},scrollToBatch:function(){var C=arguments,A,B=true;if(typeof C[0]==="object"){A=C[0].batch;B=C[0].animate;}else{A=C[0];}this.root.slide("scrollToBatch",A,B);},scrollToItem:function(){var C=arguments,A,B=true;if(typeof C[0]==="object"){A=C[0].item;B=C[0].animate;}else{A=C[0];}this.root.slide("scrollToItem",A,B);},slide:function(A){if(this.root.isItemCountOK){this.root.triggered||this.root.slide(A);}},stopAutoScroll:function(){this.root.isAutoScrollResume=false;this.root.autoScroll.stop(this.root.timeout);},startAutoScroll:function(){this.root.autoScroll.play(this.root);}};var G={format:function(A){A=parseInt(A.replace(/[a-zA-z]/gi,""),10);return isNaN(A)?0:A;},checkBoolean:function(B){var A=false;if(typeof B==="string"&&B==="true"){A=true;}else{if(typeof B==="boolean"){A=B;}}return A;},getCSSDimension:function(K,B,C){if(!K){return false;}var N=["Top","Right","Bottom","Left"],L={};if(K==="margin"||K==="padding"||K==="border"){for(var M=0;M<N.length;M++){var A=F(B).css(K+N[M]);L[N[M]]=typeof A!=="undefined"?C?this.format(A):A:0;}return L;}return F(B).css(K);}};})(jQuery);jQuery.cookie=function(E,F,B){if(typeof F!="undefined"){B=B||{};if(F===null){F="";B.expires=-1;}var A="";if(B.expires&&(typeof B.expires=="number"||B.expires.toUTCString)){if(typeof B.expires=="number"){A=new Date;A.setTime(A.getTime()+B.expires*24*60*60*1000);}else{A=B.expires;}A="; expires="+A.toUTCString();}var D=B.path?"; path="+B.path:"",C=B.domain?"; domain="+B.domain:"";B=B.secure?"; secure":"";document.cookie=[E,"=",encodeURIComponent(F),A,D,C,B].join("");}else{F=null;if(document.cookie&&document.cookie!=""){B=document.cookie.split(";");for(A=0;A<B.length;A++){D=jQuery.trim(B[A]);if(D.substring(0,E.length+1)==E+"="){F=decodeURIComponent(D.substring(E.length+1));break;}}}return F;}};(function(A){A.extend(A.fn,{validate:function(B){if(!this.length){B&&B.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return ;}var C=A.data(this[0],"validator");if(C){return C;}C=new A.validator(B,this[0]);A.data(this[0],"validator",C);if(C.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){C.cancelSubmit=true;});this.submit(function(D){if(C.settings.debug){D.preventDefault();}function E(){if(C.settings.submitHandler){C.settings.submitHandler.call(C,C.currentForm);return false;}return true;}if(C.cancelSubmit){C.cancelSubmit=false;return E();}if(C.form()){if(C.pendingRequest){C.formSubmitted=true;return false;}return E();}else{C.focusInvalid();return false;}});}return C;},valid:function(){if(A(this[0]).is("form")){return this.validate().form();}else{var C=false;var B=A(this[0].form).validate();this.each(function(){C|=B.element(this);});return C;}},removeAttrs:function(D){var B={},C=this;A.each(D.split(/\s/),function(E,F){B[F]=C.attr(F);C.removeAttr(F);});return B;},rules:function(E,B){var G=this[0];if(E){var D=A.data(G.form,"validator").settings;var I=D.rules;var J=A.validator.staticRules(G);switch(E){case"add":A.extend(J,A.validator.normalizeRule(B));I[G.name]=J;if(B.messages){D.messages[G.name]=A.extend(D.messages[G.name],B.messages);}break;case"remove":if(!B){delete I[G.name];return J;}var H={};A.each(B.split(/\s/),function(K,L){H[L]=J[L];delete J[L];});return H;}}var F=A.validator.normalizeRules(A.extend({},A.validator.metadataRules(G),A.validator.classRules(G),A.validator.attributeRules(G),A.validator.staticRules(G)),G);if(F.required){var C=F.required;delete F.required;F=A.extend({required:C},F);}return F;}});A.extend(A.expr[":"],{blank:function(B){return !A.trim(B.value);},filled:function(B){return !!A.trim(B.value);},unchecked:function(B){return !B.checked;}});A.format=function(B,C){if(arguments.length==1){return function(){var D=A.makeArray(arguments);D.unshift(B);return A.format.apply(this,D);};}if(arguments.length>2&&C.constructor!=Array){C=A.makeArray(arguments).slice(1);}if(C.constructor!=Array){C=[C];}A.each(C,function(D,E){B=B.replace(new RegExp("\\{"+D+"\\}","g"),E);});return B;};A.validator=function(B,C){this.settings=A.extend({},A.validator.defaults,B);this.currentForm=C;this.init();};A.extend(A.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",errorElement:"label",focusInvalid:true,errorContainer:A([]),errorLabelContainer:A([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(B){this.lastActive=B;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,B,this.settings.errorClass);this.errorsFor(B).hide();}},onfocusout:function(B){if(!this.checkable(B)&&(B.name in this.submitted||!this.optional(B))){this.element(B);}},onkeyup:function(B){if(B.name in this.submitted||B==this.lastElement){this.element(B);}},onclick:function(B){if(B.name in this.submitted){this.element(B);}},highlight:function(C,B){A(C).addClass(B);},unhighlight:function(C,B){A(C).removeClass(B);}},setDefaults:function(B){A.extend(A.validator.defaults,B);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",dateDE:"Bitte geben Sie ein gültiges Datum ein.",number:"Please enter a valid number.",numberDE:"Bitte geben Sie eine Nummer ein.",digits:"Please enter only digits",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:A.format("Please enter no more than {0} characters."),minlength:A.format("Please enter at least {0} characters."),rangelength:A.format("Please enter a value between {0} and {1} characters long."),range:A.format("Please enter a value between {0} and {1}."),max:A.format("Please enter a value less than or equal to {0}."),min:A.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=A(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||A(this.currentForm);this.containers=A(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var B=(this.groups={});A.each(this.settings.groups,function(E,F){A.each(F.split(/\s/),function(H,G){B[G]=E;});});var D=this.settings.rules;A.each(D,function(E,F){D[E]=A.validator.normalizeRule(F);});function C(F){var E=A.data(this[0].form,"validator");E.settings["on"+F.type]&&E.settings["on"+F.type].call(E,this[0]);}A(this.currentForm).delegate("focusin focusout keyup",":text, :password, :file, select, textarea",C).delegate("click",":radio, :checkbox",C);if(this.settings.invalidHandler){A(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);}},form:function(){this.checkForm();A.extend(this.submitted,this.errorMap);this.invalid=A.extend({},this.errorMap);if(!this.valid()){A(this.currentForm).triggerHandler("invalid-form",[this]);}this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var B=0,C=(this.currentElements=this.elements());C[B];B++){this.check(C[B]);}return this.valid();},element:function(C){C=this.clean(C);this.lastElement=C;this.prepareElement(C);this.currentElements=A(C);var B=this.check(C);if(B){delete this.invalid[C.name];}else{this.invalid[C.name]=true;}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}this.showErrors();return B;},showErrors:function(C){if(C){A.extend(this.errorMap,C);this.errorList=[];for(var B in C){this.errorList.push({message:C[B],element:this.findByName(B)[0]});}this.successList=A.grep(this.successList,function(D){return !(D.name in C);});}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if(A.fn.resetForm){A(this.currentForm).resetForm();}this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(D){var C=0;for(var B in D){C++;}return C;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{A(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus();}catch(B){}}},findLastActive:function(){var B=this.lastActive;return B&&A.grep(this.errorList,function(C){return C.element.name==B.name;}).length==1&&B;},elements:function(){var C=this,B={};return A([]).add(this.currentForm.elements).filter(":input").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&C.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in B||!C.objectLength(A(this).rules())){return false;}B[this.name]=true;return true;});},clean:function(B){return A(B)[0];},errors:function(){return A(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=A([]);this.toHide=A([]);this.formSubmitted=false;this.currentElements=A([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(B){this.reset();this.toHide=this.errorsFor(B);},check:function(C){C=this.clean(C);if(this.checkable(C)){C=this.findByName(C.name)[0];}var G=A(C).rules();var D=false;for(method in G){var F={method:method,parameters:G[method]};try{var B=A.validator.methods[method].call(this,C.value.replace(/\r/g,""),C,F.parameters);if(B=="dependency-mismatch"){D=true;continue;}D=false;if(B=="pending"){this.toHide=this.toHide.not(this.errorsFor(C));return ;}if(!B){this.formatAndAdd(C,F);return false;}}catch(E){this.settings.debug&&window.console&&console.log("exception occured when checking element "+C.id+", check the '"+F.method+"' method");throw E;}}if(D){return ;}if(this.objectLength(G)){this.successList.push(C);}return true;},customMetaMessage:function(B,D){if(!A.metadata){return ;}var C=this.settings.meta?A(B).metadata()[this.settings.meta]:A(B).metadata();return C&&C.messages&&C.messages[D];},customMessage:function(C,D){var B=this.settings.messages[C];return B&&(B.constructor==String?B:B[D]);},findDefined:function(){for(var B=0;B<arguments.length;B++){if(arguments[B]!==undefined){return arguments[B];}}return undefined;},defaultMessage:function(B,C){return this.findDefined(this.customMessage(B.name,C),this.customMetaMessage(B,C),!this.settings.ignoreTitle&&B.title||undefined,A.validator.messages[C],"<strong>Warning: No message defined for "+B.name+"</strong>");},formatAndAdd:function(B,D){var C=this.defaultMessage(B,D.method);if(typeof C=="function"){C=C.call(this,D.parameters,B);}this.errorList.push({message:C,element:B});this.errorMap[B.name]=C;this.submitted[B.name]=C;},addWrapper:function(B){if(this.settings.wrapper){B=B.add(B.parents(this.settings.wrapper));}return B;},defaultShowErrors:function(){for(var C=0;this.errorList[C];C++){var B=this.errorList[C];this.settings.highlight&&this.settings.highlight.call(this,B.element,this.settings.errorClass);this.showLabel(B.element,B.message);}if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}if(this.settings.success){for(var C=0;this.successList[C];C++){this.showLabel(this.successList[C]);}}if(this.settings.unhighlight){for(var C=0,D=this.validElements();D[C];C++){this.settings.unhighlight.call(this,D[C],this.settings.errorClass);}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return A(this.errorList).map(function(){return this.element;});},showLabel:function(C,D){var B=this.errorsFor(C);if(B.length){B.removeClass().addClass(this.settings.errorClass);B.attr("generated")&&B.html(D);}else{B=A("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(C),generated:true}).addClass(this.settings.errorClass).html(D||"");if(this.settings.wrapper){B=B.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}if(!this.labelContainer.append(B).length){this.settings.errorPlacement?this.settings.errorPlacement(B,A(C)):B.insertAfter(C);}}if(!D&&this.settings.success){B.text("");typeof this.settings.success=="string"?B.addClass(this.settings.success):this.settings.success(B);}this.toShow=this.toShow.add(B);},errorsFor:function(B){return this.errors().filter("[for='"+this.idOrName(B)+"']");},idOrName:function(B){return this.groups[B.name]||(this.checkable(B)?B.name:B.id||B.name);},checkable:function(B){return/radio|checkbox/i.test(B.type);},findByName:function(B){var C=this.currentForm;return A(document.getElementsByName(B)).map(function(D,E){return E.form==C&&E.name==B&&E||null;});},getLength:function(C,B){switch(B.nodeName.toLowerCase()){case"select":return A("option:selected",B).length;case"input":if(this.checkable(B)){return this.findByName(B.name).filter(":checked").length;}}return C.length;},depend:function(C,B){return this.dependTypes[typeof C]?this.dependTypes[typeof C](C,B):true;},dependTypes:{"boolean":function(C,B){return C;},string:function(C,B){return !!A(C,B.form).length;},"function":function(C,B){return C(B);}},optional:function(B){return !A.validator.methods.required.call(this,A.trim(B.value),B)&&"dependency-mismatch";},startRequest:function(B){if(!this.pending[B.name]){this.pendingRequest++;this.pending[B.name]=true;}},stopRequest:function(B,C){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0;}delete this.pending[B.name];if(C&&this.pendingRequest==0&&this.formSubmitted&&this.form()){A(this.currentForm).submit();}else{if(!C&&this.pendingRequest==0&&this.formSubmitted){A(this.currentForm).triggerHandler("invalid-form",[this]);}}},previousValue:function(B){return A.data(B,"previousValue")||A.data(B,"previousValue",previous={old:null,valid:true,message:this.defaultMessage(B,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(B,C){B.constructor==String?this.classRuleSettings[B]=C:A.extend(this.classRuleSettings,B);},classRules:function(C){var D={};var B=A(C).attr("class");B&&A.each(B.split(" "),function(){if(this in A.validator.classRuleSettings){A.extend(D,A.validator.classRuleSettings[this]);}});return D;},attributeRules:function(C){var E={};var B=A(C);for(method in A.validator.methods){var D=B.attr(method);if(D){E[method]=D;}}if(E.maxlength&&/-1|2147483647|524288/.test(E.maxlength)){delete E.maxlength;}return E;},metadataRules:function(B){if(!A.metadata){return{};}var C=A.data(B.form,"validator").settings.meta;return C?A(B).metadata()[C]:A(B).metadata();},staticRules:function(C){var D={};var B=A.data(C.form,"validator");if(B.settings.rules){D=A.validator.normalizeRule(B.settings.rules[C.name])||{};}return D;},normalizeRules:function(C,B){A.each(C,function(F,E){if(E===false){delete C[F];return ;}if(E.param||E.depends){var D=true;switch(typeof E.depends){case"string":D=!!A(E.depends,B.form).length;break;case"function":D=E.depends.call(B,B);break;}if(D){C[F]=E.param!==undefined?E.param:true;}else{delete C[F];}}});A.each(C,function(D,E){C[D]=A.isFunction(E)?E(B):E;});A.each(["minlength","maxlength","min","max"],function(){if(C[this]){C[this]=Number(C[this]);}});A.each(["rangelength","range"],function(){if(C[this]){C[this]=[Number(C[this][0]),Number(C[this][1])];}});if(A.validator.autoCreateRanges){if(C.min&&C.max){C.range=[C.min,C.max];delete C.min;delete C.max;}if(C.minlength&&C.maxlength){C.rangelength=[C.minlength,C.maxlength];delete C.minlength;delete C.maxlength;}}if(C.messages){delete C.messages;}return C;},normalizeRule:function(C){if(typeof C=="string"){var B={};A.each(C.split(/\s/),function(){B[this]=true;});C=B;}return C;},addMethod:function(B,D,C){A.validator.methods[B]=D;A.validator.messages[B]=C;if(D.length<3){A.validator.addClassRules(B,A.validator.normalizeRule(B));}},methods:{required:function(D,C,E){if(!this.depend(E,C)){return"dependency-mismatch";}switch(C.nodeName.toLowerCase()){case"select":var B=A("option:selected",C);return B.length>0&&(C.type=="select-multiple"||(A.browser.msie&&!(B[0].attributes.value.specified)?B[0].text:B[0].value).length>0);case"input":if(this.checkable(C)){return this.getLength(D,C)>0;}default:return A.trim(D).length>0;}},remote:function(F,C,G){if(this.optional(C)){return"dependency-mismatch";}var D=this.previousValue(C);if(!this.settings.messages[C.name]){this.settings.messages[C.name]={};}this.settings.messages[C.name].remote=typeof D.message=="function"?D.message(F):D.message;G=typeof G=="string"&&{url:G}||G;if(D.old!==F){D.old=F;var B=this;this.startRequest(C);var E={};E[C.name]=F;A.ajax(A.extend(true,{url:G,mode:"abort",port:"validate"+C.name,dataType:"json",data:E,success:function(I){if(I){var H=B.formSubmitted;B.prepareElement(C);B.formSubmitted=H;B.successList.push(C);B.showErrors();}else{var J={};J[C.name]=I||B.defaultMessage(C,"remote");B.showErrors(J);}D.valid=I;B.stopRequest(C,I);}},G));return"pending";}else{if(this.pending[C.name]){return"pending";}}return D.valid;},minlength:function(C,B,D){return this.optional(B)||this.getLength(A.trim(C),B)>=D;},maxlength:function(C,B,D){return this.optional(B)||this.getLength(A.trim(C),B)<=D;},rangelength:function(D,B,E){var C=this.getLength(A.trim(D),B);return this.optional(B)||(C>=E[0]&&C<=E[1]);},min:function(C,B,D){return this.optional(B)||C>=D;},max:function(C,B,D){return this.optional(B)||C<=D;},range:function(C,B,D){return this.optional(B)||(C>=D[0]&&C<=D[1]);},email:function(C,B){return this.optional(B)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(C);},url:function(C,B){return this.optional(B)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(C);},date:function(C,B){return this.optional(B)||!/Invalid|NaN/.test(new Date(C));},dateISO:function(C,B){return this.optional(B)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(C);},dateDE:function(C,B){return this.optional(B)||/^\d\d?\.\d\d?\.\d\d\d?\d?$/.test(C);},number:function(C,B){return this.optional(B)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(C);},numberDE:function(C,B){return this.optional(B)||/^-?(?:\d+|\d{1,3}(?:\.\d{3})+)(?:,\d+)?$/.test(C);},digits:function(C,B){return this.optional(B)||/^\d+$/.test(C);},creditcard:function(F,C){if(this.optional(C)){return"dependency-mismatch";}if(/[^0-9-]+/.test(F)){return false;}var G=0,E=0,B=false;F=F.replace(/\D/g,"");for(n=F.length-1;n>=0;n--){var D=F.charAt(n);var E=parseInt(D,10);if(B){if((E*=2)>9){E-=9;}}G+=E;B=!B;}return(G%10)==0;},accept:function(C,B,D){D=typeof D=="string"?D:"png|jpe?g|gif";return this.optional(B)||C.match(new RegExp(".("+D+")$","i"));},equalTo:function(C,B,D){return C==A(D).val();}}});})(jQuery);(function(A){A.each({focus:"focusin",blur:"focusout"},function(C,B){A.event.special[B]={setup:function(){if(A.browser.msie){return false;}this.addEventListener(C,A.event.special[B].handler,true);},teardown:function(){if(A.browser.msie){return false;}this.removeEventListener(C,A.event.special[B].handler,true);},handler:function(D){arguments[0]=A.event.fix(D);arguments[0].type=B;return A.event.handle.apply(this,arguments);}};});A.extend(A.fn,{delegate:function(D,C,B){return this.bind(D,function(E){var F=A(E.target);if(F.is(C)){return B.apply(F,arguments);}});},triggerEvent:function(B,C){return this.triggerHandler(B,[A.event.fix({type:B,target:C})]);}});})(jQuery);jQuery.fn.fixedBox=function(A){A=jQuery.extend({x:false,y:false},A);return this.each(function(){var B=y=0;if(!A.x||!A.y){B=document.documentElement.clientWidth||document.body.clientWidth;var G=document.documentElement.clientHeight||document.body.clientHeight;if(jQuery.browser.opera){G=document.body.clientHeight;}var D=jQuery(this).width(),C=jQuery(this).height(),F=jQuery(this).css("padding-left");F=parseInt(F.substring(0,F.length-2));var E=jQuery(this).css("padding-top");E=parseInt(E.substring(0,E.length-2));var I=jQuery(this).css("border-left-width");(I=parseInt(I.substring(0,I.length-2)))||(I=0);var H=jQuery(this).css("border-top-width");(H=parseInt(H.substring(0,H.length-2)))||(H=0);B=Math.round((B-D-2*F-2*I)/2);y=Math.round((G-C-2*E-2*H)/2);}if(A.x){B=parseInt(A.x);}if(A.y){y=parseInt(A.y);}if(jQuery.browser.msie&&jQuery.browser.version=="6.0"){G="( "+y+" + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px'";jQuery(this).get(0).style.setExpression("top",G);jQuery(this).css({position:"absolute",left:B+"px"});}else{jQuery(this).css({position:"fixed",top:y+"px",left:B+"px"});}});};(function(E){var B={},K,M,O,J=E.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),A=false;E.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){E.tooltip.blocked=!E.tooltip.blocked;}};E.fn.extend({tooltip:function(P){P=E.extend({},E.tooltip.defaults,P);H(P);return this.each(function(){E.data(this,"tooltip",P);this.tOpacity=B.parent.css("opacity");this.tooltipText=this.title;E(this).removeAttr("title");this.alt="";}).mouseover(L).mouseout(F).click(F);},fixPNG:J?function(){return this.each(function(){var P=E(this).css("backgroundImage");if(P.match(/^url\(["']?(.*\.png)["']?\)$/i)){P=RegExp.$1;E(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+P+"')"}).each(function(){var Q=E(this).css("position");if(Q!="absolute"&&Q!="relative"){E(this).css("position","relative");}});}});}:function(){return this;},unfixPNG:J?function(){return this.each(function(){E(this).css({filter:"",backgroundImage:""});});}:function(){return this;},hideWhenEmpty:function(){return this.each(function(){E(this)[E(this).html()?"show":"hide"]();});},url:function(){return this.attr("href")||this.attr("src");}});function H(P){if(B.parent){return ;}B.parent=E('<div id="'+P.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(E.fn.bgiframe){B.parent.bgiframe();}B.title=E("h3",B.parent);B.body=E("div.body",B.parent);B.url=E("div.url",B.parent);}function C(P){return E.data(P,"tooltip");}function G(P){if(C(this).delay){O=setTimeout(N,C(this).delay);}else{N();}A=!!C(this).track;E(document.body).bind("mousemove",D);D(P);}function L(){if(E.tooltip.blocked||this==K||(!this.tooltipText&&!C(this).bodyHandler)){return ;}K=this;M=this.tooltipText;if(C(this).bodyHandler){B.title.hide();var S=C(this).bodyHandler.call(this);if(S.nodeType||S.jquery){B.body.empty().append(S);}else{B.body.html(S);}B.body.show();}else{if(C(this).showBody){var R=M.split(C(this).showBody);B.title.html(R.shift()).show();B.body.empty();for(var Q=0,P;(P=R[Q]);Q++){if(Q>0){B.body.append("<br/>");}B.body.append(P);}B.body.hideWhenEmpty();}else{B.title.html(M).show();B.body.hide();}}if(C(this).showURL&&E(this).url()){B.url.html(E(this).url().replace("http://","")).show();}else{B.url.hide();}B.parent.addClass(C(this).extraClass);if(C(this).fixPNG){B.parent.fixPNG();}G.apply(this,arguments);}function N(){O=null;if((!J||!E.fn.bgiframe)&&C(K).fade){if(B.parent.is(":animated")){B.parent.stop().show().fadeTo(C(K).fade,K.tOpacity);}else{B.parent.is(":visible")?B.parent.fadeTo(C(K).fade,K.tOpacity):B.parent.fadeIn(C(K).fade);}}else{B.parent.show();}D();}function D(S){if(E.tooltip.blocked){return ;}if(S&&S.target.tagName=="OPTION"){return ;}if(!A&&B.parent.is(":visible")){E(document.body).unbind("mousemove",D);}if(K==null){E(document.body).unbind("mousemove",D);return ;}B.parent.removeClass("viewport-right").removeClass("viewport-bottom");var U=B.parent[0].offsetLeft;var T=B.parent[0].offsetTop;if(S){U=S.pageX+C(K).left;T=S.pageY+C(K).top;var Q="auto";if(C(K).positionLeft){Q=E(window).width()-U;U="auto";}B.parent.css({left:U,right:Q,top:T});}var P=I(),R=B.parent[0];if(P.x+P.cx<R.offsetLeft+R.offsetWidth){U-=R.offsetWidth+20+C(K).left;B.parent.css({left:U+"px"}).addClass("viewport-right");}if(P.y+P.cy<R.offsetTop+R.offsetHeight){T-=R.offsetHeight+20+C(K).top;B.parent.css({top:T+"px"}).addClass("viewport-bottom");}}function I(){return{x:E(window).scrollLeft(),y:E(window).scrollTop(),cx:E(window).width(),cy:E(window).height()};}function F(R){if(E.tooltip.blocked){return ;}if(O){clearTimeout(O);}K=null;var Q=C(this);function P(){B.parent.removeClass(Q.extraClass).hide().css("opacity","");}if((!J||!E.fn.bgiframe)&&Q.fade){if(B.parent.is(":animated")){B.parent.stop().fadeTo(Q.fade,0,P);}else{B.parent.stop().fadeOut(Q.fade,P);}}else{P();}if(C(this).fixPNG){B.parent.unfixPNG();}}})(jQuery);(function(B){var C=B.scrollTo=function(E,D,F){C.window().scrollTo(E,D,F);};C.defaults={axis:"y",duration:1};C.window=function(){return B(B.browser.safari?"body":"html");};B.fn.scrollTo=function(E,D,F){if(typeof D=="object"){F=D;D=0;}F=B.extend({},C.defaults,F);D=D||F.speed||F.duration;F.queue=F.queue&&F.axis.length>1;if(F.queue){D/=2;}F.offset=A(F.offset);F.over=A(F.over);return this.each(function(){var I=this,G=B(I),J=E,N,M={},H=G.is("html,body");switch(typeof J){case"number":case"string":if(/^([+-]=)?\d+(px)?$/.test(J)){J=A(J);break;}J=B(J,this);case"object":if(J.is||J.style){N=(J=B(J)).offset();}}B.each(F.axis.split(""),function(Q,S){var R=S=="x"?"Left":"Top",V=R.toLowerCase(),O="scroll"+R,U=I[O],T=S=="x"?"Width":"Height";if(N){M[O]=N[V]+(H?0:U-G.offset()[V]);if(F.margin){M[O]-=parseInt(J.css("margin"+R))||0;M[O]-=parseInt(J.css("border"+R+"Width"))||0;}M[O]+=F.offset[V]||0;if(F.over[V]){M[O]+=J[T.toLowerCase()]()*F.over[V];}}else{M[O]=J[V];}if(/^\d+$/.test(M[O])){M[O]=M[O]<=0?0:Math.min(M[O],K(T));}if(!Q&&F.queue){if(U!=M[O]){L(F.onAfterFirst);}delete M[O];}});L(F.onAfter);function L(O){G.animate(M,D,F.easing,O&&function(){O.call(this,E);});}function K(P){var O=H?B.browser.opera?document.body:document.documentElement:I;return O["scroll"+P]-O["client"+P];}});};function A(D){return typeof D=="object"?D:{top:D,left:D};}})(jQuery);(function($){var _cbStr=(typeof _cbVarStr!=="undefined")?_cbVarStr:"b1002";var CONST={thirdParty:{recaptcha:{url:"/ajax/authentication/recaptcha.jsp",elmId:"recaptcha_div",id:"6LcspgwAAAAAAPIfJ3yUt1aUl_Thr8TQfQmR1oRP",settings:{theme:"clean"}},disqus:{widget:"DQIntegrationService",cookie:{name:"p_DQS",expires:14},hash:{empty:"e30=",expires:60}},idms:{cookie:{name:"p_IDMS",expires:14},hash:{empty:"e30=",expires:"5"},callback:{login:"FOX_IDMS_auth_logged_in",logout:"FOX_IDMS_auth_logged_in"}},fm:{cookie:{name:"SABRE_ID",expires:14},hash:{empty:"e30=",expires:"5"},callback:{login:"FOX_FM_auth_logged_in",logout:"FOX_FM_auth_logged_in"}}}};var AuthService=window.AuthService=function(initVars){this.validationUrl="/authentication/registration/validate/";this.getRegistrationDataUrl="/authentication/registration/get";this.loginSubmitUrl="/authentication/login/submit";this.logoutSubmitUrl="/authentication/logout/submit";this.requestLogoutUrl="/authentication/logout/submit";this.refreshAuthUrl="/authentication/login/refresh?"+_cbStr+"=t";this.forgottenPasswordSubmitUrl="/authentication/forgotten_password/submit";this.registrationSubmitUrl="/authentication/registration/submit";this.ajaxRetrieveHtmlUrl="/ajax/authentication/includes.jsp";this.newsAlertSubscriptionUrl="/portal/newsalertsubscribe";this.defaultDomain="foxnews.com";var i;for(i in initVars){this[i]=initVars[i];}};AuthService.prototype={init:function(config){var i,as=this;for(i in config){this[i]=config[i];}if(window.FOX_isMnt&&FOX_isMnt()){$("#account, #authentication").hide();}this.thirdPartyAPI=new ThirdPartyAPI(this);},extend:function(obj){var i,self=this;for(i in obj){this[i]=obj[i];}},createObjFromJSON:function(jsonString){if(typeof jsonString==="string"){if(($.trim(jsonString)).length>0){return eval("("+unescape(jsonString).replace(/\s+/g," ")+")");}}return false;},isLoggedIn:function(){return($.cookie("p_UN")&&$.cookie("p_UN")!=="")?true:false;},isThirdParty:function(){return($.cookie("p_Thirdparty"))?true:false;},getDisplayName:function(){var as=this;function pipeCheck(str){var separator="|id:",idx=str.lastIndexOf(separator);if(idx<1){return str;}return str.substr(0,idx);}if(as.isLoggedIn()){var displayName=false;if(typeof $.cookie("p_DN")==="string"){var dn=$.cookie("p_DN");if(dn.length>0){dn=pipeCheck(dn);displayName=dn.replace(/\+/g," ").replace(/\"/g,"");}}return(displayName)?displayName:as.getUsername();}return"";},getUsername:function(){if(this.isLoggedIn()){return $.cookie("p_UN");}},getUserEmail:function(){return(this.isLoggedIn())?$.cookie("p_EM"):"";},getUserLocation:function(){return(this.isLoggedIn())?$.cookie("p_UL"):"";},getOverlayHtml:function(overlayView,origDomain,callbackFn){callbackFn=callbackFn||false;var as=this;if(!origDomain){origDomain=as.defaultDomain;}$.ajax({type:"GET",async:false,url:as.ajaxRetrieveHtmlUrl,data:({view:overlayView,authDomain:origDomain,cb:_cbStr}),success:function(data,textStatus){$("body").append(data);if(typeof callbackFn==="function"){callbackFn();}}});},closeOverlay:function(elementId){var as=this,elm=$("#"+elementId);elm.find("input[type*=text], input[type*=password]").val("");elm.find("input:checkbox:checked").attr("checked","");elm.find("input[type*=text]").removeClass("error");as.overlay.hide(elm);},providerOverlay:function(authDomain,callbackFn){var as=this;if(!as.isLoggedIn()){if($("#login-provider").size()===0){as.getOverlayHtml("login-provider",authDomain,callbackFn);}as.initProviderOverlay();as.overlay.show("#login-provider");$("#user-login-form-overlay").find("input[name*=username]").focus();return false;}return true;},initProviderOverlay:function(){var as=this;var login_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){elm.find(".error-box-login").html("User name and password are required.").show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.login(elm);return false;}};$("#user-login-form-overlay").validate(login_validation_options);$(".thirdparty a img").hover(function(){var thirdPartyTooltip=$(this).parent().parent().siblings(0);thirdPartyTooltip.find(".icon-desc-bg p").html($(this).attr("alt"));thirdPartyTooltip.addClass($(this).attr("name")).css("visibility","visible");},function(){var thirdPartyTooltip=$(this).parent().parent().siblings(0);thirdPartyTooltip.find(".icon-desc-bg p").html("");thirdPartyTooltip.removeClass($(this).attr("name")).css("visibility","hidden");});var reset_password_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){elm.find(".error-box-login").html("The email address you entered is invalid.").show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.forgotPassword(elm);return false;}};$("#reset-password .user-email-reset-form").validate(reset_password_validation_options);$("#forgot-password-overlay").unbind("click").click(function(){$("#reset-password.reset").toggle();});},registrationOverlay:function(authDomain,callbackFn){var as=this;if(!as.isLoggedIn()){if($("#registration-overlay").length===0){as.getOverlayHtml("registration-overlay",authDomain,callbackFn);}increaseRefresh();$("#reg_user_name").removeAttr("readonly");$("#reg_user_name").next(".validate").next(".validate").children(".sprites").show();as.initRegistrationOverlay();as.overlay.show("#registration-overlay");return false;}return true;},initRegistrationOverlay:function(){var as=this;var registration_validation_options={submitHandler:function(form){as.register($(form));return false;},errorElement:"p",errorPlacement:function(err,elm){var errMsg=err.text(),id=elm.attr("id");if(elm.data("_errMsg")===errMsg){return false;}elm.data("_errMsg",errMsg);var parent=elm.parent(),marker=parent.find("> .validate:first .sprites"),msgAlert=parent.find("> .error-tip p.err-msg"),errMsg=err.text(),reqTxt=parent.find("> .req-text");var css={valid:"check",invalid:"red-exclamation"};reqTxt.hide();var noMsg="reg_birth_year";var noMarker="reg_zip_code|reg_location";if(msgAlert.size()===0&&noMsg.indexOf(id)===-1){var validate=parent.find("> .validate:first");if(id==="agreement"){validate=elm;}msgAlert=$('<div class="error-tip"><span class="form-note"><p class="err-msg"></p></span></div>').insertAfter(validate);msgAlert=parent.find("> .error-tip p.err-msg");if(id==="agreement"){parent.find("> .error-tip").css({position:"absolute",width:"220px",right:"0",top:"0"});}}msgAlert.css("padding-top","0px");if(errMsg.length===0){if(noMarker.indexOf(id)===-1){marker.removeClass(css.invalid).addClass(css.valid);}msgAlert.html("&nbsp;");}else{if(noMarker.indexOf(id)===-1){marker.removeClass(css.valid).addClass(css.invalid);}msgAlert.html(errMsg);}if(marker.is(":hidden")&&noMarker.indexOf(id)===-1){marker.css("display","block");}},success:function(){},rules:{propID_username:{required:true,minlength:5,maxlength:15,validChars:true,remote:{url:as.validationUrl,type:"post"}},propID_email:{required:true,email:true,maxlength:250,strictEmail:true,remote:{url:as.validationUrl,type:"post"}},propID_pass1:{required:true,noSpaces:true,minlength:5,maxlength:12},propID_pass2:{required:true,noSpaces:true,minlength:5,maxlength:12,equalTo:"#reg_password"},propID_country:{required:true},propID_zip:{digits:true,maxlength:5,minlength:5,zipRequired:true,zipCheck:true,remote:{url:as.validationUrl,type:"post"}},propID_birthyear:{required:true,min:1900,isMaxYear:true},propID_terms:{required:true}},messages:{propID_username:{required:"Please enter a username",minlength:"Your username must consist of at least 5 characters",maxlength:"Your username is too long",validChars:"please supply valid characters only.",remote:"This username is already in use."},propID_email:{required:"Please enter an email address.",email:"Your email address must be valid.",maxlength:"Your email address is too long.",remote:"A user is already registered with this email."},propID_pass1:{required:"Please enter a password.",minlength:"Your password must be at least 5 characters.",maxlength:"Your password is too long."},propID_pass2:{required:"Please confirm your password.",equalTo:"Your passwords do not match."},propID_terms:{required:"In order to join Fox News community you must agree to our terms and conditions. Please review and check the box to join."},propID_country:{required:"Please select your country of residence."},propID_zip:{digits:"Please enter a valid zip code.",maxlength:"A valid zip code is five digits.",minlength:"A valid zip code is five digits.",required:"Please enter a zip code.",remote:"Please enter a valid United States zip code."},propID_birthyear:{required:"Please select your birth year."}}};as.instantiateValidators();$("#registration").validate(registration_validation_options);as.showRecaptcha();},initOpxLogin:function(){var as=this;var reset_password_validation_options={onkeyup:false,errorPlacement:function(error,element){},invalidHandler:function(form,validator){var elm=$(this);elm.find("input[type*=submit]").attr("disabled","disabled");var errors=validator.numberOfInvalids();if(errors){var message="The email address you entered is invalid.";elm.find(".error-box-login").html(message).show();}else{elm.find(".error-box-login").hide();}elm.find("input[type*=submit]").removeAttr("disabled");},submitHandler:function(form){var elm=$(form);elm.find("input[type*=submit]").attr("disabled","disabled");elm.find(".error-box-login").hide();as.forgotPassword(elm);return false;}};$("#reset-password .user-email-reset-form").validate(reset_password_validation_options);},initEditProfile:function(){var as=this;var edit_profile_validation_options={debug:false,submitHandler:function(form){if($("#reg_email").val()===""&&$("#reg_email2").val()===""){$("#reg_email").val($("#reg_curemail").val());$("#reg_email2").val($("#reg_curemail").val());}form.submit();return false;},errorElement:"p",errorPlacement:function(error,element){var elm=$(element),elem_pos=elm.position(),error_message=$(error[0]).html(),error_name=elm.attr("id").replace("reg","err");error_html=[];error_html.push('<div class="regoverlay_container error-tip" id="'+error_name+'">');error_html.push('<div class="overlaytip_top"></div><div class="form-note"><img src="/static/v/all/img/alert-yellow.gif" alt="" />');error_html.push('<p class="err-msg">'+error_message+'</p></div><div class="overlaytip_btm"></div></div>');error_html.join("");$("div.regoverlay_container.error-tip").hide();var errorElm=$("div#"+error_name);if(errorElm.size()>0){if(error_message!==""){errorElm.find("p.err-msg").html(error_message).show();}}else{elm.after(error_html);errorElm.hide();}errorElm.css({top:(elem_pos.top-80)+"px",left:(elem_pos.left+50)+"px"});errorElm.next(".validate > .sprites").removeClass("check").addClass("red-exclamation").show();},success:function(label){var errDiv=$("div#"+$(label).attr("htmlfor").replace("reg","err"));errDiv.hide();errDiv.next(".validate > .sprites").removeClass("red-exclamation").addClass("check");},rules:{propID_email:{required:false,email:true,maxlength:250,strictEmail:true},propID_email2:{equalTo:"#reg_email"},propID_pass1:{noSpaces:true,minlength:5,maxlength:12},propID_pass2:{noSpaces:true,minlength:5,maxlength:12,equalTo:"#reg_password"},propID_country:{required:true},propID_zip:{digits:true,maxlength:5,minlength:5,zipRequired:true,zipCheck:true},propID_gender:{required:true},propID_birthyear:{required:true,min:1900,isMaxYear:true}},messages:{propID_email:{required:"Please enter an email address.",email:"Your email address must be valid.",maxlength:"Your email address is too long.",remote:"A user is already registered with this email."},propID_email2:{required:"Please confirm your email address.",equalTo:"Please double check your email. They do not match."},propID_pass1:{required:"Please enter a password.",minlength:"Your password must be at least 5 characters.",maxlength:"Your password is too long."},propID_pass2:{required:"Please confirm your password.",equalTo:"Your passwords do not match."},propID_country:{required:"Please select your country of residence."},propID_zip:{digits:"Please enter a valid zip code.",maxlength:"A valid zip code is five digits.",minlength:"A valid zip code is five digits.",required:"Please enter a zip code."},propID_gender:{required:"Please submit your gender."},propID_birthyear:{required:"Please select your birth year."}}};as.instantiateValidators();$("#reg_profile").validate(edit_profile_validation_options);},forgotPasswordOverlay:function(obj){var as=this;if(!as.isLoggedIn()){if($("#forgot-password-overlay").size()===0){as.getOverlayHtml("forgot-password-overlay");}var offset=$(obj).offset();var leftPos=offset.left-$("#forgot-password-overlay").width();as.overlay.show("#forgot-password-overlay");return false;}return true;},login:function(formObj){formObj=$(formObj);var as=this,user=formObj.find("input[name*=username]").val(),pass=formObj.find("input[name*=password]").val(),rememberMe=(formObj.find("input[name*=rememberMe]:checked").size()>0)?true:false,numOfDays=(rememberMe)?365:0;$.ajax({type:"POST",url:as.loginSubmitUrl,data:({username:user,password:pass,authDomain:as.domain,rememberMe:rememberMe}),dataType:"text",success:function(data,textStatus){var loginResponse=as.createObjFromJSON(data);var messageArr=loginResponse.authentication.message.split(" ");if(!loginResponse){showToConsole("[authSrv.login] No data returned from request.",true);return false;}if(loginResponse.authentication.status==="ok"){if(typeof $.ad!="undefined"){$.ad.track({login:{userid:"fox login - id: "+as.getDisplayName()+" email:"+as.getUserEmail()}});}as.onSuccessLogin();as.thirdPartyAPI.disqus.login(loginResponse);as.thirdPartyAPI.idms.login(loginResponse);as.thirdPartyAPI.fileMobile.login(loginResponse);as.closeOverlay("login-provider");if(as.domain==="foxnews.com"&&window.location.pathname.indexOf("/community/user/")>-1){window.location.reload();}}else{formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".login-error").html("We are sorry, please try again.").show();}},error:function(XMLHttpRequest,textStatus,errorThrown){formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".login-error").html("We are sorry, please try again later.").show();}});},logout:function(origDomain){var as=this;origDomain=origDomain||as.defaultDomain;$.ajax({type:"POST",url:as.logoutSubmitUrl,data:({authDomain:origDomain}),success:function(data,textStatus){if(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.logout] No data returned from request.",true);return false;}if(authObj.authentication.status==="ok"){as.thirdPartyAPI.disqus.logout(authObj,function(){as.thirdPartyAPI.idms.logout(authObj,function(){as.thirdPartyAPI.fileMobile.logout(authObj,function(){if(window.location.pathname.indexOf("/community/user/profile")>-1){window.location.href="http://www.foxnews.com/index.html";}else{window.location.reload();}});});});}}},error:function(XMLHttpRequest,textStatus,errorThrown){}});},requestLogOut:function(config){config=config||{};var as=this;$.ajax({type:"GET",url:as.requestLogoutUrl,success:function(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.requestLoginInfo] No data returned from request.",true);return false;}if(typeof config.callback==="function"){config.callback(authObj);}}});},requestLoginInfo:function(config){config=config||{};var as=this;$.ajax({type:"POST",url:as.refreshAuthUrl,success:function(data){var authObj=as.createObjFromJSON(data);if(!authObj){showToConsole("[authSrv.requestLoginInfo] No data returned from request.",true);return false;}if(typeof config.callback==="function"){config.callback(authObj);}}});},forgotPassword:function(formObj){formObj=$(formObj);var as=this,email=formObj.find("input[name*=emailResetField]").val();$.ajax({type:"POST",url:as.forgottenPasswordSubmitUrl,data:({email:email}),dataType:"text",success:function(data,textStatus){var forgotPasswordResponse=as.createObjFromJSON(data);if(!forgotPasswordResponse){showToConsole("[authSrv.forgotPassword] No data returned from request.",true);return false;}if(forgotPasswordResponse.authentication.status==="ok"){formObj.find(".error-box-login").hide();formObj.find(".reset-input-container").hide();formObj.find(".confirm-box-login").html("A reset link has been sent to the email provided.").show();}else{formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".error-box-login").html("The email address you entered is invalid").show();}},error:function(XMLHttpRequest,textStatus,errorThrown){formObj.find("input[type*=submit]").removeAttr("disabled");formObj.find(".error-box-login").html("We're sorry your password cannot be reset at this time. Please try again later.").show();}});},register:function(formObj){var as=this,privacy=(formObj.find("#reg_location_confirm:checked").size()>0)?"hide":"",challenge=as.thirdPartyAPI.recaptcha.getChallenge(),response=as.thirdPartyAPI.recaptcha.getResponse();var slids=[];if(formObj.find("#fnbreaking:checked").size()>0){slids.push("C2F278094FACCEA62391025B7A52D8EB");}if(formObj.find("#fbbreaking:checked").size()>0){slids.push("5C84B893BD6D939E84FAE1A8E6E9525A");}if(slids.length>0){$.ajax({type:"GET",url:as.newsAlertSubscriptionUrl,data:({slids:slids.join(","),email:$("#reg_email").val()}),dataType:"text"});}$.ajax({type:"POST",url:as.registrationSubmitUrl,data:{authDomain:as.domain,realm:"realm1",username:formObj.find("#reg_user_name").val(),password:formObj.find("#reg_password").val(),email:formObj.find("#reg_email").val(),zip:formObj.find("#reg_zip_code").val(),country:formObj.find("#reg_country").val(),location_privacy:privacy,birth_year:formObj.find("#reg_birth_year").val(),recaptcha_challenge_field:challenge,recaptcha_response_field:response},dataType:"text",success:function(data,textStatus){var registrationResponse=as.createObjFromJSON(data);var message=registrationResponse.authentication.message;if(message.indexOf("successful registration")>-1&&typeof $.ad!=="undefined"){$.ad.track({registration:{userid:"fox registration - id:"+as.getDisplayName()+" - email:"+as.getUserEmail()}});}if(!registrationResponse){showToConsole("[authSrv.register] No data returned from request.",true);return false;}if(registrationResponse.authentication.status==="ok"){$("#registration-error").hide();$("#registration-overlay").hide();as.getOverlayHtml("registration-thankyou-overlay");decreaseRefresh();authentication_service.onSuccessLogin();as.thirdPartyAPI.disqus.login(registrationResponse);as.thirdPartyAPI.idms.login(registrationResponse);as.thirdPartyAPI.fileMobile.login(registrationResponse);as.overlay.show("#registration-thankyou-overlay");$.scrollTo("#registration-thankyou-overlay");$("#clickToClose").focus();}else{var errorMsg=registrationResponse.authentication.message;as.showRecaptcha();$("#registration-error").html("We are sorry, we could not complete your registration. Please fix the error and try again. <br/> *"+errorMsg).show();$.scrollTo("#registration-error");}},error:function(XMLHttpRequest,message,errorThrown){as.showRecaptcha();$("#registration-error").html("We are sorry, we could not complete your registration. Please try again. <br> *"+message).show();$.scrollTo("#registration-error");}});},overlay:{init:function(action,target){target=$((target||"#registration-overlay"));var as=this;$(action).each(function(){$(action).unbind("click").click(function(){as.show(target);});});},show:function(target){target=$(target);var as=this;if(typeof increaseRefresh!=="undefined"){increaseRefresh();}target.find(".validate a.sprites").unbind("click");if($(".overlay-layer").size()===0){$("body").prepend('<div class="overlay-layer"></div>');}$(".overlay-layer").show();target.each(function(){var elm=$(this);elm.show().fixedBox();if($(window).height()<elm.height()){var scrollTop=$(document).scrollTop();var overlayTop=(target.css("top")).replace(/[a-z]/g,"");var abs=Math.abs(overlayTop)+scrollTop;elm.css({top:abs+"px",position:"absolute"});}elm.find(".field input").removeClass("error").attr("value","");elm.find(".validate a.sprites,.error-tip").hide();var usr=elm.find("#reg_user_name"),usrParent=usr.parent(),pwd=elm.find("#reg_password"),pwdParent=pwd.parent();if(usrParent.find("span.req-text").size()===0){usr.after('<span class="req-text req-user">5-15 characters, cannot be changed</span>');usrParent.focus(function(){elm.find(".req-user").remove();});}if(pwdParent.find("span.req-text").size()===0){pwd.after('<span class="req-text req-password">5-12 characters, no space, case-insensitive</span>');pwdParent.focus(function(){elm.find(".req-password").remove();});}});var close=target.find(".close").parent(),signUpReg=$(".sign_up_registration");close.unbind("click").removeAttr("onclick").click(function(){as.hide(target);return false;});target.find(".buttons input[type='reset']").click(function(){as.hide(target);return false;});signUpReg.click(function(){$(".overlay-layer").show();});},hide:function(target){if(typeof decreaseRefresh!=="undefined"){decreaseRefresh();}$(".overlay-layer").hide();$(target).hide();}},instantiateValidators:function(){var as=this;$.validator.addMethod("validChars",function(value){var i,result=true,iChars="!@#$%^&*()+=-[]\\';,./{}|\":<>?";for(i=0;i<value.length;i++){if(iChars.indexOf(value.charAt(i))!==-1){return false;}}return result;},"Please supply valid characters only.");$.validator.addMethod("strictEmail",function(value){return(value.match(/^([a-zA-Z0-9_.\-\+])+@([a-zA-Z0-9_.\-])+\.([a-zA-Z])+([a-zA-Z])+/)!==null)||(value==="");},"Please supply valid email characters only.");$.validator.addMethod("noSpaces",function(value){var result=true,strArr=[];if(typeof value==="string"&&value.split(" ").length>1){return false;}return result;},"Please remove the blank spaces.");$.validator.addMethod("validCharsName",function(value){var i,resultName=true,iChars='!@#$%^&*()\\+=[];,./{}|":<>?',iCharshp="-",iCharsap="'",counterhp=0,counterap=0;for(i=0;i<value.length;i++){if(iChars.indexOf(value.charAt(i))!==-1){return false;}if(iCharshp.indexOf(value.charAt(i))!==-1){counterhp=counterhp+1;}if(iCharsap.indexOf(value.charAt(i))!==-1){counterap=counterap+1;}}if(counterhp>1){return false;}if(counterap>1){return false;}return resultName;},"Please supply valid characters only.");$.validator.addMethod("isMaxYear",function(value){var result=true,d=new Date(),curr_year=d.getFullYear();if($("#reg_birth_year").val()>(curr_year-13)){return false;}return result;},"You must be at least 13 years old to register for this site.");$.validator.addMethod("zipRequired",function(value){var result=true;country=$("#reg_country").val();if(country==="United States"&&value===""){return false;}return result;},"Zip Code is required.");$.validator.addMethod("zipCheck",function(value){var result=true,regLocation=$("#reg_location");if($("#reg_country").val()==="United States"){regLocation.show();$.ajax({type:"GET",url:as.getRegistrationDataUrl,async:false,data:({zip:$("#reg_zip_code").val()}),dataType:"text",success:function(data,textStatus){if(data){var stateObj=as.createObjFromJSON(data);if(!stateObj){showToConsole("[authSrv.validator] No data returned from request.",true);return false;}var state=stateObj.state_for_zip;regLocation.val((state!=="")?state:"");result=false;}else{regLocation.val("");result=false;}},error:function(XMLHttpRequest,textStatus,errorThrown){regLocation.val("");}});result=(regLocation.val()!=="")?true:false;}else{regLocation.hide();}return result;},"Please enter a valid United States zip code.");},showRecaptcha:function(){var as=this;as.thirdPartyAPI.recaptcha.create();}};var ThirdPartyAPI=(function(){API=function(root){this.root=root;this.recaptcha=new RecaptchaAPI(this);this.disqus=new Disqus(this);this.idms=new IDMS(this);this.fileMobile=new FileMobile(this);};var RecaptchaAPI=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.recaptcha;};RecaptchaAPI.prototype={set:function(fn){var self=this,root=this.root,cfg=this._config;if(typeof Recaptcha!=="undefined"){if(typeof fn==="function"){fn();}}else{window.Recaptcha_Create_Instance=function(){$.loadAttempt(30,500,function(){return(typeof Recaptcha!=="undefined")?true:false;},function(){if(typeof fn==="function"){fn();}});};(function(){var e=document.createElement("script");e.src=cfg.url;e.type="text/javascript";e.async=true;(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e);}());}},create:function(){var self=this,cfg=this._config,recaptcha_id=cfg.id,divId=cfg.elmId,settings=cfg.settings;self.set(function(){Recaptcha.create(recaptcha_id,divId,settings);});},getChallenge:function(){if(typeof Recaptcha!=="undefined"){return Recaptcha.get_challenge();}return false;},getResponse:function(){if(typeof Recaptcha!=="undefined"){return Recaptcha.get_response();}return false;}};var Disqus=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.disqus;this.set();};Disqus.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;if(cookieVal){unescape(cookieVal);}var trigger=function(){var data={dqs:cookieVal};root.requestLoginInfo({data:data,callback:function(obj){if(!obj){log("[api.disqus] Refresh service returned no hash value.");return false;}try{var hash=obj.authentication.dqs;self.cookie("set",hash);if(typeof fn==="function"){fn(hash);log("[api.disqus] Hash Refresh Initiated");}}catch(err){log("[api.disqus] Refresh service: "+err);}}});};var loggedOutCookie=function(){root.requestLogOut({callback:function(obj){if(!obj){log("[api.disqus] logout hash service returned no value.");return false;}try{var hash=obj.authentication.dqs;self.cookie("set",hash);fn(hash);}catch(err){log("[api.disqus] Refresh service: "+err);return false;}}});};var hasExpired=function(hasExpiredFn){var cDate=new Date();var curr={time:cDate,epoch:Math.round(cDate.getTime()/1000),expire:new Date(cDate.getTime()+(cfg.hash.expires*60*1000))};curr.expireEpoch=Math.round(curr.expire/1000);var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0],timestamp=arr[2];if(typeof timestamp==="undefined"){return getLoggedOut();}if(isNaN(timestamp)){return getLoggedOut();}if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}timestamp=parseInt(timestamp,10);var tDate=new Date(timestamp*1000);var ts={time:new Date(tDate),epoch:timestamp,expire:new Date(tDate.getTime()+(cfg.hash.expires*60*1000))};ts.expireEpoch=Math.round(ts.expire/1000);if(curr.epoch>=ts.expireEpoch){if(arr[0]!==cfg.hash.empty){return"yes";}}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;case"yes":log("[api.disqus] Hash Expired");trigger();break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var message=data.authentication.message;if(message.indexOf("|")>-1&&typeof $.ad!=="undefined"){regExpId=/([\w]+)[=]([\w,\s]+)$/;var idArr=message.match(regExpId);$.ad.track({login:{userid:"third party login - id:"+idArr[2].replace(/\s/,"")+", service:"+idArr[1]+".com"}});}var self=this;if(data.authentication.dqs){log("[api.disqus] Logging In");self.cookie("set",data.authentication.dqs);self.integrate({token:data.authentication.dqs,usr:self.cookie("get","p_UN")});}if(typeof fn==="function"){fn();}},logout:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.dqs){log("[api.disqus] Logging Out");self.cookie("set",data.authentication.dqs);self.integrate({token:data.authentication.dqs,usr:self.cookie("get","p_UN")});}if(typeof fn==="function"){fn();}},integrate:function(config){config=config||{};var cfg=this._config;var trigger=function(){$.loadAttempt(50,500,function(){return((window.fox&&fox.widgets&&typeof fox.widgets[cfg.widget]==="function")||(typeof window["FOX_"+cfg.widget]==="function"))?true:false;},function(){if(window.fox&&fox.widgets&&typeof fox.widgets[cfg.widget]==="function"){log("[api.disqus] Integrating ");fox.widgets[cfg.widget](config);}else{if(typeof window["FOX_"+cfg.widget]==="function"){log("[api.disqus] Integrating ");window["FOX_"+cfg.widget](config);}}});};$(document).ready(function(){trigger();});},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host="*."+root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",host:host,expires:exp,domain:root.domain};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":$.cookie(cName,null);break;case"get":cName=(data)?data:cName;return($.cookie(cName))?$.cookie(cName):false;}}};var IDMS=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.idms;this.set();};IDMS.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},integrate:function(config){config=config||{};var cfg=this._config,fnName=cfg.callback.login;if(typeof window[fnName]==="function"){window[fnName](config);}},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;var loggedOutCookie=function(){self.cookie("remove");fn(false);};var hasExpired=function(hasExpiredFn){var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0];if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.idms){log("[api.idms] Logging In");self.cookie("set",data.authentication.idms);self.integrate({token:data.authentication.idms,usr:self.cookie("get","p_UN")});}else{log("[api.idms] No IDMS authentication found.");}if(typeof fn==="function"){fn();}},logout:function(data,fn){var self=this,cfg=this._config,fnName=cfg.callback.logout;self.cookie("remove-full");if(typeof window[fnName]==="function"){window[fnName](cfg);}if(typeof fn==="function"){fn();}},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host=root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",expires:exp,domain:host};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":options={path:"/",domain:host};$.cookie(cName,null,options);break;case"remove-full":options={path:"/",domain:host};$.cookie(cName,null,options);$.cookie(cName,"BLAH");$.cookie(cName,null);break;case"get":cName=(data)?data:cName;var val=($.cookie(cName))?$.cookie(cName):false;return val;}}};var FileMobile=function(main){this.root=main.root;this.main=main;this._config=CONST.thirdParty.fm;this.set();};FileMobile.prototype={set:function(){var self=this,root=this.root;$(document).ready(function(){self.validateHash(function(hash){self.integrate({token:hash,usr:self.cookie("get","p_UN")});});});},integrate:function(config){config=config||{};var cfg=this._config,fnName=cfg.callback.login;if(typeof window[fnName]==="function"){window[fnName](config);}},validateHash:function(fn){var self=this,root=this.root,cookieVal=this.cookie("get"),cfg=this._config;var loggedOutCookie=function(){self.cookie("remove");fn(false);};var hasExpired=function(hasExpiredFn){var getLoggedOut=function(){return"new";};if(!cookieVal){return getLoggedOut();}var arr=cookieVal.split(" "),hash=arr[0];if(!root.isLoggedIn()&&hash!==cfg.hash.empty){return getLoggedOut();}return"no";};switch(hasExpired()){case"new":loggedOutCookie();break;case"no":fn(cookieVal);break;}},login:function(data,fn){data=data||false;fn=fn||false;if(!data){return false;}if(typeof data!=="object"){return false;}var self=this;if(data.authentication.fm){log("[api.idms] Logging In");self.cookie("set",data.authentication.fm);self.integrate({token:data.authentication.fm,usr:self.cookie("get","p_UN")});}else{log("[api.idms] No IDMS authentication found.");}if(typeof fn==="function"){fn();}},logout:function(data,fn){var self=this,cfg=this._config,fnName=cfg.callback.logout;self.cookie("remove-full");if(typeof window[fnName]==="function"){window[fnName](cfg);}if(typeof fn==="function"){fn();}},cookie:function(type,data){data=data||false;var cfg=this._config,cName=cfg.cookie.name,root=this.root,host=root.domain,exp=new Date();exp.setTime(exp.getTime()+(cfg.cookie.expires*24*60*60*1000));var options={path:"/",expires:exp,domain:host};switch(type){case"set":if(data){$.cookie(cName,data,options);}break;case"remove":options={path:"/",domain:host};$.cookie(cName,null,options);break;case"remove-full":options={path:"/",domain:host};$.cookie(cName,null,options);$.cookie(cName,"BLAH");$.cookie(cName,null);break;case"get":cName=(data)?data:cName;var val=($.cookie(cName))?$.cookie(cName):false;return val;}}};return API;}());var disablezip=window.disablezip=function(value){var zip=$("#reg_zip_code"),loc=$("#reg_location");if(value==="United States"){zip.removeAttr("readonly").css("background","#fff");zip.next(".validate").children(".sprites").hide();loc.val("");}else{zip.attr("readonly",true).css("background","#ddd").val("");loc.val(value);}};var formatField=window.formatField=function(id,value){var elm=$("#"+id);switch(id){case"reg_first_name":elm.val(value.join(""));break;case"reg_last_name":elm.val(value.join(""));break;default:elm.val(value.toLowerCase().replace(/\s+/gi,""));}};var formatTrim=window.formatTrim=function(id,value){$("#"+id).val(value.replace(/\s+/gi,""));};var isNumberKey=window.isNumberKey=function(evt){var charCode=(evt.which)?evt.which:evt.keyCode;return(charCode>31&&(charCode<48||charCode>57))?false:true;};var increaseRefresh=window.increaseRefresh=function(){if(typeof ew_disableRefresh==="function"){ew_disableRefresh();}else{$("meta[name='refresh'],meta[http-equiv='refresh']").each(function(){var item=$(this),refresh=item.attr("content"),orig=(typeof item.attr("content")!=="undefined")?refresh:false;item.data("RefreshOrig",orig);item.attr("content","7200");});}};var decreaseRefresh=window.decreaseRefresh=function(){if(typeof ew_disableRefresh==="function"){ew_enableRefresh();}else{$("meta[name='refresh'],meta[http-equiv='refresh']").each(function(){var item=$(this),orig=item.data("RefreshOrig");if(orig){item.attr("content",orig);}});}};var showToConsole=function(str,force){force=force||false;var search=(window.location.search).substr(1);if(search.length>0){var x,pairs=search.split("&"),valuePair={};for(x=0;x<pairs.length;x++){var split=pairs[x].split("=");valuePair[split[0]]=split[1];}if(valuePair.stc==="y"||force){if(typeof window.console==="object"){console.log(str);}}}};var log=showToConsole;(function(){function d(c){return typeof c==="function"?!0:!1;}var f=function(){var c,b=arguments;if(b.length===0){return !1;}var a={attempt:0,timeout:500};if(b.length===1&&typeof b[0]==="object"){for(c in b[0]){a[c]=b[0][c];}if(a.callback){c=a.callback;}else{return !1;}if(!c.check||!c.success){return !1;}else{a._check=c.check,a._success=c.success;}if(c.timedOut){a._timeout=c.timedOut;}}else{if(!isNaN(b[0])&&!isNaN(b[1])&&d(b[2])&&d(b[3])){a.attempt=b[0];a.timeout=b[1];a._check=b[2];a._success=b[3];if(b[4]){a._timeout=b[4];}if(b[5]){a._abort=b[5];}}else{if(d(b[0])&&d(b[1])){a._check=b[0];a._success=b[1];if(b[2]){a._timeout=b[2];}if(b[3]){a._abort=b[3];}}else{return !1;}}}if(!d(a._check)||!d(a._success)){return !1;}if(!d(a._timeout)){a._timeout=function(){};}if(isNaN(a.timeout)){return !1;}else{a.timeout=parseInt(a.timeout,10);}if(isNaN(a.attempt)){return !1;}else{a.attempt=parseInt(a.attempt,10);}var e=!1,g=!1;if(a.attempt&&a.timeout){var f=function(){g?clearTimeout(e):a._check()?(a._success(),clearTimeout(e)):a.attempt>0?e=setTimeout(function(){f();},a.timeout):a._timeout();a.attempt--;};f();}else{e=setInterval(function(){g?clearInterval(e):a._check()&&(a._success(),clearInterval(e));},a.timeout);}return{abort:function(){g=!0;}};};if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:f});}else{if(!window.loadAttempt){window.loadAttempt=f;}}})();}(jQuery));var FOX_Janrain_Auth_TPL=(function(){var A='<div style="display:none;" id="resendVerification">    <h1>Resend Email Verification</h1>    <div class="hr"></div>    <p>To sign in you must verify your email address. Fill out the form below and we\'ll send you an email to verify.</p>    {* #resendVerificationForm *}        {* resendVerification_emailAddress *}        <div class="capture_fox_buttoncol">            {* newPasswordFormButton *}        </div>     {* /resendVerificationForm *}</div><div style="display:none;" id="resendVerificationSuccess">    <h1>Your Verification Email Has Been Sent</h1>    <div class="hr"></div>    <p>Check your email for a link to reset your password.</p>    <a href="#" data-capturescreen="signIn" class="capture_btn capture_primary">Sign in</a></div><div style="display:none;" id="resetPasswordUserSuccess">            <h1>Your password has been changed</h1>            <div class="hr"></div>           <p>Password has been successfully updated.</p>            <div class="capture_textRight">                <p><a href="#" data-capturescreen="signIn" class="capture_btn capture_primary">Sign in</a></p>            </div>        </div><div style="display:none;" id="resetPassword">    <h1>Please enter your email address and we\'ll send you a new password.</h1>    <div class="hr"></div>    {* #forgotPasswordForm *}        {* forgotPassword_emailAddress *}        {* errorMessages *}        {* forgotPassword_sendButton *}    {* /forgotPasswordForm *}</div><div style="display:none;" id="resetPasswordSuccess">    <h1>Reset your password</h1>     <div class="hr"></div>    <p>Please reset your password.</p>    {* #resetPasswordForm *}        {* newpassword *}        {* newpasswordConfirm *}          <div class="capture_textRight">             {* newPasswordFormButton *}           </div>    {* /resetPasswordForm *}</div><div style="display: none" id="registrationVerify">            <h2>Sorry we could not verify that email address.</h2>            <p>Please resend verification.</p>        </div><div style="display: none" id="registrationVerified">    <h2>Thanks for verifying your email address</h2></div><div style="display:none;" id="editProfile">           <div id="accounts-header">              <ul>                 <li id="account-tab" class="active tabs"><a href="#">Account</a></li>                 <li id="ureport-pro-tab" class="tabs"><a href="#">uReport</a></li>                 <li id="ureport-act-tab" class="tabs"><a href="#">Activity</a></li>              </ul>           </div>           <div id="account-wrap" class="wrap">                {* savedProfileMessage *}                {* #photoManager {"custom": true} *}                    {| mainDiv |}                         {| profileImage |}                        <div class="capture_fox_photoLinks">                          <h1>{* public_displayName *}</h1>                          <div id="capture_profile_saved" style="display:none;"><span class="capture_fox_profile_saved"></span>Your profile was last saved <span class="capture_fox_alert_callout" id="capture_alert_callout">just now</span></div>                        {| photoLinks |}                        <span class="janrain_traditional_account_only">                          <a href="#" data-capturescreen="changepassword" class="capture_fox_change_password">Change Password</a>                        </span>                        <div class="cancel-button"><span></span>Back</div>                      </div>                    {| closeDiv |}                    <!-- hidden crop form -->                    <div style="display: none;">                    {| editFormOpen |}                    <div class="capture_footer">                    {| editSubmitButton |}                      <p>or</p>                    {| chooseDifferentPhotoLink |}                    </div>                    {| editFormClose |}                    </div>                    <!-- hidden upload form -->                    <div style="display: none;">                    {| uploadFormOpen |}                    {| uploadFileField |}                    {| uploadSubmitButton |}                    {| photoChooserErrors |}                    {| uploadFormClose |}                    </div>                    <!-- hidden upload screen -->                    <div style="display: none;">                        <div id="{| uploadPhotoScreenId |}" class="janrain-capture-ui capture-ui-content">                            <div class="capture_header">                                <h1>Change Avatar</h1>                            </div>                            <div id="{| prefixFieldName |}_profile_pic_upload" class="{| profilePicClass |}capture_profile_pic_upload capture_default">                                {| uploadImage |}                            </div>                            <div id="{| prefixFieldName |}_profile_pic_uploadform_container" class="capture_uploadPhoto_container">                            </div>                        </div>                    </div>                    <!-- hidden edit photo screen -->                    <div style="display: none;">                        <div id="{| editPhotoScreenId |}" class="janrain-capture-ui capture-ui-content">                            <div class="capture_header">                                <h1>Change Avatar</h1>                            </div>                            <div class="capture_fox_clearfix">                                <div id="{| prefixFieldName |}_profile_pic_editPhoto_container" class="capture_editPhoto_container">                                    <h2><span class="capture_fox_crop_icon"></span>Crop your avatar</h2>                                    <div class="janrainCrop_container_dashed">{| cropImage |}</div>                                </div>                                 <div class="{| profilePicClass |}profile_pic_edit_container">                                    <h2><span class="capture_fox_preview_icon"></span>Avatar Preview</h2>                                    <div id="{| prefixFieldName |}_profile_pic_edit" class="{| profilePicClass |}capture_profile_pic_edit capture_default">                                        {| editImage |}                                    </div>                                </div>                              </div>                       </div>                    </div>                {* /photoManager *}                {* publicProfileLink *}                <h2>Profile</h2>                <div class="hr"></div>                    <div class="capture_fox_editProfile">                    {* editProfileForm *}                        {* edit_firstName *}                        {* edit_lastName *}                        {* edit_email *}                        {* edit_country *}                        {* edit_address1 *}                        {* edit_address2 *}                        {* edit_city *}                        {* edit_state *}                        {* edit_zip *}                        {* edit_birthdate *}                        {* edit_gender *}                        {* politicalViews *}                      <div class="newsletter-container">                         <h2>Newsletter Subscriptions</h2>                         <div class="hr"></div>                         <div class="news-sub-form">                            <label for="auto-report"><input type="checkbox" name="" id="foxnewsletterIDList_172" value="" />Auto Report</a></label>                            <label for="top-headline"><input type="checkbox" name="" id="foxnewsletterIDList_71" value="" />Fox News Top Headlines</a></label>                            <label for="greta-wire"><input type="checkbox" name="" id="foxpromosIDList_139" value="" />GetaWire Alerts</a></label>                            <label for="fn-breaking-alerts"><input type="checkbox" name="" id="foxnewsIDList_35" value="" />Fox News Breaking News Alerts</a></label>                            <label for="bo-opinion"><input type="checkbox" name="" id="foxnewsletterIDList_96" value="" />Best of Opinion</a></label>                            <label for="fb-breaking-alerts"><input type="checkbox" name="" id="foxbusinessIDList_32" value="" />Fox Business Breaking News Alerts</a></label>                            <label for="food-drink"><input type="checkbox" name="" id="foxnewsletterIDList_166" value="" />Food & Drink</a></label>                            <label for="pow-pol"><input type="checkbox" name="" id="foxnewsletterIDList_173"  value="" />Power & Politics</a></label>                            <label for="ceo-news"><input type="checkbox" name="" id="foxnewsletterIDList_90" value="" />CEO Newsbrief</a></label>                            <label for="fox-411"><input type="checkbox" name="" id="foxnewsletterIDList_106" value="" />Fox 411</a></label>                            <label for="scitech-geek"><input type="checkbox" name="" id="foxnewsletterIDList_153" value="" />SciTech Geek Sheet</a></label>                            <label for="fb-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_151" value="" />Fox Business Morning Headlines</a></label>                            <label for="health-weekly"><input type="checkbox" name="" id="foxnewsletterIDList_160" value="" />Health Weekly Dose</a></label>                            <label for="week-pass"><input type="checkbox" name="" id="foxnewsletterIDList_171" value="" />Weekly Travel Pass</a></label>                            <label for="most-pop"><input type="checkbox" name="" id="foxnewsletterIDList_69" value="" />Fox Business Most Popular</a></label>                            <label for="latino-rep"><input type="checkbox" name="" id="foxnewsletterIDList_178" value="" />Latino Report</a></label>                            <label for="urep-mon"><input type="checkbox" name="" id="foxnewsletterIDList_133" value="" />uReport Monthly</a></label>                            <label for="sbc-week"><input type="checkbox" name="" id="foxnewsletterIDList_108" value="" />Small Business Center Weekly Report</a></label>                            <label for="mon-pol-up"><input type="checkbox" name="" id="foxnewsletterIDList_76" value="" />Monthly Politics Update</a></label>                            <label for="fn-mag"><input type="checkbox" name="" id="foxpromosIDList_174" value="" />Fox News Magazine</a></label>                            <label for="pers-finance"><input type="checkbox" name="" id="foxnewsletterIDList_122" value="" />Personal Finance</a></label>                            <label for="fn-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_144" value="" />Fox News Morning Headlines</a></label>                            <label for="fan-scoop"><input type="checkbox" name="" id="foxpromosIDList_43" value="" />Fox Fan Scoop</a></label>                            <label for="fn-fired"><input type="checkbox" name="" id="foxnewsletterIDList_99" value="" />Fox Nation Fired Up</a></label>                         </div>                      </div>                      <h2>Commenting Notifications</h2>                      <div class="hr"></div>                      {* table *}                      <div class="capture_fox_clearfix">                        <div class="capture_right capture_checkbox">                          {* autofollow_conversations *}                        </div>                      </div>                      <div class="hr"></div>                                            <h2>Linked Accounts</h2>                      <div class="hr"></div>                          {* linkedAccounts *}                          {* linkAccountContainer *}                              <h1>Linked Accounts</h1>                              <div class="hr"></div>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'facebook\')" class="capture_secondary capture_fox_social_btn capture_facebook"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Facebook" height="24" width="24" /></span>&nbsp;&nbsp;Facebook</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'google\')" class="capture_secondary capture_fox_social_btn capture_google"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Google" height="24" width="24" /></span>&nbsp;&nbsp;Google</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'twitter\')" class="capture_secondary capture_fox_social_btn capture_twitter"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Twitter" height="24" width="24" /></span>&nbsp;&nbsp;Twitter</a>                               <a href="#" onclick="janrain.engage.signin.triggerFlow(\'yahoo\')" class="capture_secondary capture_fox_social_btn capture_yahoo"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="Yahoo" height="24" width="24" /></span>&nbsp;&nbsp;Yahoo</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'linkedin\')" class="capture_secondary capture_fox_social_btn capture_linkedin"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="LinkedIn" height="24" width="24" /></span>&nbsp;&nbsp;Linkedin</a>                              <a href="#" onclick="janrain.engage.signin.triggerFlow(\'aol\')" class="capture_secondary capture_fox_social_btn capture_aol"><span class="janrain-provider-icon-24"><img src="http://global.fncstatic.com/static/v/all/img/clear.gif" alt="AOL" height="24" width="24" /></span>&nbsp;&nbsp;AOL</a>                          {* /linkAccountContainer *}                      <div class="hr"></div>                        <div class="capture_form_item">                          {* submitButton *}                        </div>                    {* /editProfileForm *}                      </div>                  </div>                      <div class="profile-footer">                         <div class="fox-logo">                         </div>                         <p>&copy;2012 FOX News Network, LLC. All rights reserved.</p>                         <p>This material may not be published, broadcast, rewritten, or redistributed.</p>                         <p>All market data delayed 20 minutes.</p>                         <p><a href="http://www.foxnews.com/about/privacy-policy" target="_blank">Privacy</a> - <a href="http://www.foxnews.com/about/terms-of-use" target="_blank">Terms</a> - <a href="http://help.foxnews.com/index.html" target="_blank">FAQ</a></p>                      </div>              </div>        <div style="display:none;" id="newPasswordSuccess" class="capture_med_footer">              <h1>You did it!</h1>              <div class="hr"></div>              <p>Your password has been successfully changed.</p>            <div class="capture_footer">                <a href="#" class="capture_btn capture_secondary">Close</a>            </div>        </div>        <div style="display:none;" id="changepassword">            <h1>Change Your Password</h1>            <div class="hr"></div>            {* newPasswordForm *}                  {* oldpassword *}                  {* newpassword *}                  {* newpasswordConfirm *}                  <div class="capture_textRight">                     <a href="#" data-capturescreen="forgotPassword">I forgot my password</a>                     {* newPasswordFormButton *}                   </div>            {* /newPasswordForm *}        </div><div style="display: none;" id="publicProfile">        <h1>Member Profile</h1><div class="make-acc">Don\'t have an account? <a onclick="window.janrain.capture.ui.renderScreen(\'signIn\')">Create One Now</a></div>        <div class="capture_profile_section">            <div class="capture_profile_pic capture_default inline">                <div id="profile_pic" class="capture_default">                    {* profilePhotoCustom *}                </div>            </div>        </div>        <div class="capture_profile_section">             <h1 class="capture_display_name">{* public_displayName *}</h1>            {* created *}            {* public_city *}            {* public_state *}            {* public_country *}            {* public_birthdate *}            {* public_gender *}        </div>        <div class="capture_data_item">          {* slider_public *}        </div>        <h2>User Stats</h2>        <div class="hr"></div>		  <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left"><a href="http://www.foxnews.com/community/user/profile/public#{* public_displayName *}">Comments</a></h3>            <h2 class="capture_right" id="fox_lf_comments" ><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left"><a href="http://www.foxnews.com/community/user/profile/public?tab=ureport#{* public_displayName *}">uReports</a></h3>            <h2 class="capture_right" id="fox_ur_reports"><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left">Likes</h3>            <h2 class="capture_right" id="fox_lf_likes" ><img src="//global.fncstatic.com/static/v/all/img/loader-trans-2.gif" /></h2>        </div>        <div class="fox_table_row capture_fox_dashed">            <h3 class="capture_left">Shares</h3>            <h2 class="capture_right" id="fox_jr_shares" >{* public_shares *} </h2>        </div></div><div style="display:none;" id="signIn">            <h1>Sign In</h1>            <div class="capture_signin">                <h2>With your existing account</h2>                <div class="hr"></div>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'facebook\')" class="capture_secondary capture_fox_social_btn capture_facebook"><span class="janrain-provider-icon-24 janrain-provider-icon-facebook-custom"></span>&nbsp;&nbsp;Facebook</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'google\')" class="capture_secondary capture_fox_social_btn capture_google"><span class="janrain-provider-icon-24 janrain-provider-icon-google-custom"></span>&nbsp;&nbsp;Google</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'twitter\')" class="capture_secondary capture_fox_social_btn capture_twitter"><span class="janrain-provider-icon-24 janrain-provider-icon-twitter-custom"></span>&nbsp;&nbsp;Twitter</a>                         <a href="#" onclick="janrain.engage.signin.triggerFlow(\'yahoo\')" class="capture_secondary capture_fox_social_btn capture_yahoo"><span class="janrain-provider-icon-24 janrain-provider-icon-yahoo-custom"></span>&nbsp;&nbsp;Yahoo</a>                       <a href="#" onclick="janrain.engage.signin.triggerFlow(\'linkedin\')" class="capture_secondary capture_fox_social_btn capture_linkedin"><span class="janrain-provider-icon-24 janrain-provider-icon-linkedin-custom"></span>&nbsp;&nbsp;Linkedin</a>                        <a href="#" onclick="janrain.engage.signin.triggerFlow(\'aol\')" class="capture_secondary capture_fox_social_btn capture_aol"><span class="janrain-provider-icon-24 janrain-provider-icon-aol-custom"></span>&nbsp;&nbsp;AOL</a>                <div class="capture_fox_clearfix">                    <h2 class="capture_left">With a Fox News account</h2>                     <a href="#" data-capturescreen="traditionalRegistration" class="capture_right capture_fox_marginTop">Sign Up &rarr;</a>                </div>                <div class="hr"></div>                    {* #userInformationForm *}                        {* traditionalSignIn_emailAddress *}                        {* traditionalSignIn_password *}                        <div class="capture_fox_buttoncol">                             <a href="#" data-capturescreen="forgotPassword">I forgot my password</a>                            {* traditionalSignIn_signInButton *}                        </div>                    {* /userInformationForm *}                    <p>Find answers to your questions about the Fox News Community in our <a href="http://help.foxnews.com/index.html" target="_blank">FAQs</a>.</p>            </div>        </div>        <div style="display:none;" id="returnSocial">                <h1>Sign In</h1>                <div class="hr"></div>                <h2>Welcome back, {* welcomeName *} (<a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">not you?</a>)</h2>                <div class="capture_fox_clearfix">                    <h2 class="capture_left">Sign In with your account</h2>                     <div class="capture_right capture_fox_marginTop"><a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">Use another account &rarr;</a></div>            </div>                <div class="hr"></div>                    <a href="#" onclick="janrain.engage.signin.triggerFlow(\'{* returnProvider *}\')" class="capture_secondary capture_fox_social_btn capture_{* returnProvider *}"><span class="janrain-provider-icon-24 janrain-provider-icon-{* returnProvider *}-custom"></span>&nbsp;&nbsp;{* returnProvider *}</a>                <div class="capture_fox_clearfix">                    <a href="http://www.foxnews.com/about/privacy-policy" target="_blank" class="capture_right">Privacy Policy</a>            </div>            </div>                <div style="display:none;" id="returnTraditional">            <h1>Sign In</h1>            <div class="hr"></div>            <h2>Welcome back, <span id="displayNameData"></span>  (<a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">not you?</a>)</h2>            <div class="capture_fox_clearfix">                <h2 class="capture_left">Sign in with your account</h2>                <div class="capture_right capture_fox_marginTop"><a href="#" data-cancelcapturereturnexperience="true" data-capturescreen="signIn">Use another account &rarr;</a></div>            </div>            <div class="hr"></div>                        {* #userInformationForm *}                            {* traditionalSignIn_emailAddress *}                            {* traditionalSignIn_password *}                <div class="capture_fox_buttoncol">                                {* traditionalSignIn_signInButton *}                            </div>                        {* /userInformationForm *}<div class="capture_fox_clearfix">                    <a href="http://www.foxnews.com/about/privacy-policy" target="_blank" class="capture_right">Privacy Policy</a>            </div>                    </div>        <div style="display:none;" id="socialRegistration">                <h1>You\'re Almost Done!</h1>                <p>Complete the following form to submit your registration.</p>                <div class="hr"></div>                {* #socialRegistrationForm *}                    {* socialRegistration_firstName *}                    {* socialRegistration_lastName *}                    {* socialRegistration_displayName *}                    {* socialRegistration_emailAddress *}                    {* registration_birthday *}                    <h2>Terms of Service</h2>                    <div class="hr"></div>                    {* agreeToTerms *}                    <div class="capture_textRight">                        {* socialRegistration_button *}                </div>                {* /socialRegistrationForm *}        </div>        <div style="display:none;" id="traditionalRegistration">                <h1>Create a Fox News Account</h1>                <p>Already have an account? <a href="#" data-capturescreen="signIn">Sign In &rarr;</a></p>                <div class="hr"></div>                {* #registrationForm *}                    {* traditionalRegistration_firstName *}                    {* traditionalRegistration_lastName *}                    {* traditionalRegistration_displayName *}                    {* traditionalRegistration_emailAddress *}                    {* traditionalRegistration_password *}                    {* traditionalRegistration_passwordConfirm *}                    {* registration_birthday *}                    <div class="capture_fox_clearfix">                        <h2 class="capture_left">Subscribe to Fox News Email Newsletters</h2>                         <div class="capture_right capture_fox_marginTop">Optional</div>                    </div>                    <div class="hr"></div>                          <div class="news-sub-form-reg">                            <label for="fn-morn-head"><input type="checkbox" name="" id="foxnewsletterIDList_144" value="" />Fox News Morning Headlines</a></label>                            <label for="top-headline"><input type="checkbox" name="" id="foxnewsletterIDList_71" value="" />Fox News Top Headlines</a></label>                            <label for="fb-breaking-alerts"><input type="checkbox" name="" id="foxpromosIDList_32" value="" />Fox Business Breaking Alerts</a></label>                            <label for="fn-breaking-alerts"><input type="checkbox" name="" id="foxnewsIDList_35" value="" />Fox News Breaking Alerts</a></label>                          </div>                    <h2>Security Check</h2>                    <div class="hr"></div>                    {* captcha *}                    {* agreeToTerms *}                    <div class="capture_textRight">                    {* createAccountButton *}                    </div>                {* /registrationForm *}        </div>                <div style="display:none;" id="registrationSuccess">                <h1>Thank you for registering!</h1>                <div class="hr"></div>                <p>Once you confirm your email address you will be able to access commenting and exclusive content on all the Fox News Digital websites!</p>                <h2>Verify your email</h2>                <div class="hr"></div>                <p>We just sent an email to your account to verify your email address. Check your inbox and click on the link to confirm your account.</p>                <!--                 <p>You are also signed up for the following newsletters:</p>                <ul>                    <li>FPO</li>                    <li>FPO</li>                </ul>                -->                <div class="capture_textRight">                    <a href="#" onclick="janrain.capture.ui.modal.close()" class="capture_btn capture_primary">Close</a>                </div>        </div>        <div style="display:none;" id="forgotPassword">            <h1>Forgot My Password</h1>            <div class="hr"></div>            <h2>Enter your current email address, and we\'ll send you instructions to create a new password.</h2>            {* #forgotPasswordForm *}                {* forgotPassword_emailAddress *}                <div class="capture_textRight">                    {* forgotPassword_sendButton *}                </div>            {* /forgotPasswordForm *}        </div>        <div style="display:none;" id="forgotPasswordSuccess">            <h1>Forgot My Password</h1>            <div class="hr"></div>            <div class="capture_fox_clearfix">              <h2 class="capture_left">Success! You should receive an email shortly with instructions to change your password.</h2>              <a href="#" class="capture_btn capture_primary capture_right" onclick="janrain.capture.ui.modal.close()">Close</a>            </div>            </div>        <div style="display:none;" id="mergeAccounts">            {* mergeAccounts {"custom": true} *}            <h1>Create a Fox News Account</h1>            <div class="hr"></div>            <h2>It looks like you\'ve been here before.<br /><br>            We already have an account for: <br />            <span class="capture_fox_alert">{| current_emailAddress |}</span>            </h2>            <h2>Connect this session with your existing account</h2>            <div class="hr"></div>                <button id="capture_mergeAccounts_mergeAccounts_connectButton" name="mergeAccounts_connectButton" data-capturefield="mergeAccounts_connectButton" type="button" class="capture_secondary capture_fox_social_btn">                    <span class="janrain-provider-icon-24 janrain-provider-icon-{| existing_provider_lowerCase |}-custom"></span>                    <span class="janrain-provider-icon-24 janrain-provider-icon-{| current_provider_lowerCase |}-custom"></span>&nbsp;&nbsp; Connect                </button>        </div>        <div style="display:none;" id="traditionalAuthenticateMerge">            <h1>Sign in to complete account merge</h1>            <div class="hr"></div>            {* #tradAuthenticateMergeForm *}                {* traditionalSignIn_emailAddress *}                {* traditionalSignIn_password *}                <div class="capture_fox_buttoncol">                    {* traditionalSignIn_signInButton *}					  <a href="#" data-capturescreen="forgotPassword">Forgot Password?</a><br>        		  </div>             {* /tradAuthenticateMergeForm *}        </div>';return A;}());window.FOX_AuthJanrain_CONFIG=(function(D){function B(F){return !!(D.location.hostname.indexOf(F)>-1);}var C=true,A={},E=D.location.hash;D.FOX_Auth_live_settings=(typeof D.FOX_Auth_live_settings==="undefined")?false:D.FOX_Auth_live_settings;if(!C&&(E.indexOf("live")>-1||D.FOX_Auth_Live_Settings)){C=true;}else{if(E.indexOf("dev")>-1){C=false;}else{if(B("pvw-dev")){C=false;}}}A.live=C;if(C){A={livefyre:{network:"foxnewsprod.fyre.co",domain:"zor.livefyre.com",jsURL:"zor.livefyre.com/wjs/v3.0/javascripts/livefyre.js",siteid:"310256",siteURL:"http://www.foxnews.com/",profile:"http://quill.foxnews-1.fyre.co/profile/",activityAPI:"http://www.foxnews.com/feeds/app/user/comments?callback={cb}&uuid={uuid}",activityActiveAPI:"http://www.foxnews.com/feeds/app/user/comments/active?callback={cb}&uuid={uuid}",activityPublicRequestAPI:"http://www.foxnews.com/feeds/app/user/comments?callback={cb}&uuid={uuid}&userInfoFormat=true",apiProfile:"http://foxnews-1.fyre.co/api/v1.1/private/capture/profile_updated/?jrtoken=",el:"livefyre_comment_stream"},janrain:{appUrl:"https://login.foxnews.com",apiURL:"https://signin.foxnews.com/",jsURL:"d16s8pqtk4uodx.cloudfront.net/foxnews-prod/load.js",appId:"macbnjrmzryj7utchqmtukf3se",clientId:"t6emets785a92rr2zc5wkbnrsy59kyny",captureServer:"https://signin.foxnews.com",federateServer:"https://sso.foxnews.com",recaptchaPublicKey:"6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP",backplaneBusName:"fox-news",publicRequestAPI:"http://www.foxnews.com/feeds/app/user/photos?username="},ureport:{ureportURL:"http://ureportcustomfeed.projects.fm/ureport_activity?uid=[UREPORT_USER_ID]",idLookup:"http://www.foxnews.com/feeds/app/ureport?callback=userNameLookup&username=[UREPORT_USER_ID]",url:"http://www.foxnews.com/auth/info?callback="},whatcounts:{subdomain:"www",subscribe:"http://www.foxnews.com/feeds/app/newsletters/",unsubscribe:"http://www.foxnews.com/feeds/app/newsletters/"}};A.styleUrl=["http://global.fncstatic.com/static/v/all/css/janrain.css"];A.editProfile="http://www.foxnews.com/community/user/profile/edit";}else{A={livefyre:{network:"foxnewsprod.fyre.co",domain:"zor.livefyre.com",jsURL:"zor.livefyre.com/wjs/v3.0/javascripts/livefyre.js",siteid:"310256",profile:"http://quill.foxnews-1.fyre.co/profile/",siteURL:"http://www.foxnews.com/",activityAPI:"http://v8-qa.foxnews.com/feed/apps/user/comments/{uuid}.json?callback={cb}",apiProfile:"http://foxnews-1.fyre.co/api/v1.1/private/capture/profile_updated/?jrtoken=",el:"livefyre_comment_stream"},janrain:{appUrl:"https://fox-news-dev.rpxnow.com",apiURL:"https://fox-news.dev.janraincapture.com/",jsURL:"d16s8pqtk4uodx.cloudfront.net/foxnews/load.js",appId:"n49qmf6h6ssvuvnevbxgj88h97",clientId:"c5dr2na59wh3bmna2aqgdnbzapeffy7q",captureServer:"https://fox-news.dev.janraincapture.com",federateServer:"https://fox-news-dev.janrainsso.com",recaptchaPublicKey:"6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP",backplaneBusName:"fox-news-dev"},ureport:{ureportURL:"http://ureportcustomfeed.projects.fm/ureport_activity?uid=[UREPORT_USER_ID]",idLookup:"http://www.foxnews.com/feeds/app/ureport?callback=userNameLookup&username=[UREPORT_USER_ID]",url:"http://www.foxnews.com/auth/info?callback="},whatcounts:{subdomain:"v8-qa",subscribe:"http://v8-qa.foxnews.com/feeds/app/newsletters/",unsubscribe:"http://v8-qaportala.lan.vig.tpa.foxnews.com:8080/foxnewsletter/unsubscribe.json"}};A.styleUrl=["http://global.fncstatic.com/static/v/all/css/janrain.css"];A.editProfile="http://global.fncstatic.com/static/v/all/html/edit-profile.html";}if(D.location.host.indexOf("ureport")>-1){A.xdcomm=D.location.protocol+"//"+location.host+"/xdcomm.html";A.logout=D.location.protocol+"//"+location.host+"/logout.html";}else{A.xdcomm=D.location.protocol+"//"+location.host+"/static/v/all/html/xdcomm.html";A.logout=D.location.protocol+"//"+location.host+"/static/v/all/html/logout.html";}A.templateUrl="/static/v/all/html/auth-tpl.html";return A;})(window);window.AuthenticationService_Janrain=(function(G,N){function f(k){return !!(N.location.hostname.indexOf(k)>-1);}if(!N.console){N.console={log:function(){},error:function(){}};}var L=function(){var l=false;if(l&&N.console){try{return console.log.apply(console,arguments);}catch(k){console.log(arguments);}}};var X=(function(){var k=function(o){var m,q,r={},s=this;for(m=0,q=o.length;m<q;m+=1){o[m][2].prototype=o[m][1];r[o[m][0]]=new o[m][2];}for(var t in r){k.prototype[t]=r[t];}};return k;})();var d=function(){},M=function(){},Q=function(){},a=function(){},F=function(){},Z=function(){},h=function(){},K=function(){},D=function(){},E=function(){},U=function(){},C=function(){},P=function(){},J={},b={},g={},Y={},I={},W={},H={},O={},S={},T={},B={},R={},e={};var j=N.FOX_AuthJanrain_CONFIG;F=function(){};W={loadExtJs:function(q,t,r,m){var o=document.createElement("script"),k;o.type="text/javascript";o.id=t||"";o.async=true;o.setAttribute("type","text/javascript");if(m==="share"){o.src="http://widget-cdn.rpxnow.com/js/lib/fox-news/widget.js";}else{o.src=document.location.protocol+"//"+((m==="www")?"www.":"")+q;}if(typeof r==="function"){o.onload=o.onerror=o.onreadystatechange=function(s){if((!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){r();}};}var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(o,l);},assert:function(k,l){return(typeof k===l)?true:false;},domTest:function(k){return(k.length!=0)?true:false;},getDomain:function(){var o=N.location,l=o.hostname,m=o.protocol,k=l.split(".");return"www."+k[(k.length-2)]+"."+k[(k.length-1)];}};C=function(){};R={setDomReady:function(l){var o=G("#authentication"),q=G("#account"),r=q.find(".user-options"),k=G("body"),m=G("#section-content");var s={acc:q,body:k,user:q.find(".username"),login:o.find(">li:last-child"),authen:o,name:r.find("span"),register:o.find(".first"),noAccount:o,userOptions:r,accountNav:q.find(".encapsulate"),profile:r.find("ul > li.first"),logout:r.find("ul > li:last-child"),hasAccount:q.find(".username"),publicProfile:function(){return{likes:G("#fox_lf_likes"),shares:G("#fox_jr_shares"),ureport:G("#fox_ur_reports"),comments:G("#fox_lf_comments")};},whatCounts:function(){return G(".news-sub-form");},uReport:function(){var t=G("#account");return{acc:t,redBtn:G("#main").find(".red-butt ")};},sectionContent:m};AUTH_Manager.onReady("capture",function(){});l(s);}};K=function(){};Y={token:null,template:null,getToken:function(){var k=this;try{if(N.localStorage){k.token=localStorage.getItem("janrainCaptureToken");}else{}}catch(l){L(l);}},classLogin:"capture_modal_open",janrainFlow:false,state:{janrain:false,ureport:false,livefyre:false,template:false,backplane:false,badgeville:false},dataConfig:{janrain:{clientId:"c5dr2na59wh3bmna2aqgdnbzapeffy7q"},livefyre:{},ureport:{},whatcounts:{}},loadTemplate:function(){var AB=this,l,r,t,v=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","registrationVerify","registrationVerified","editProfile"],k=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","registrationVerify","registrationVerified"],q=["resetPasswordUserSuccess","resetPassword","resetPasswordSuccess","signIn","registrationVerify","registrationVerified","returnTraditional","returnSocial","forgotPasswordSuccess"];r=document.createElement("div");r.id="templateHolder";t=(N.FOX_Janrain_Auth_TPL)?true:false;if(AB.janrainFlow==="publicFlow"){return false;}if(t){var w=G(FOX_Janrain_Auth_TPL);if(AB.janrainFlow==="profileFlow"){R.setDomReady.sectionContent.append(r);for(var u=0,o=w.length;u<o;u+=1){for(var s=0,m=k.length;s<m;s+=1){if(v[s]===w[u].id){w[u].innerHTML="";w[u].id="";}}}G(r).html(w);b.init();}else{if(AB.janrainFlow==="authFlow"){R.setDomReady.body.append(r);for(u=0,o=w.length;u<o;u+=1){for(s=0,m=v.length;s<m;s+=1){if(v[s]===w[u].id){w[u].innerHTML="";w[u].id="";}}}G(r).html(w);b.init();}else{R.setDomReady.sectionContent.append(r);var AA=[];for(u=0,o=w.length;u<o;u+=1){var AC=false;for(s=0,m=q.length;s<m;s+=1){if(q[s]===w[u].id){AC=true;}}if(!AC){w[u].innerHTML="";w[u].id="";}}G(r).html(w);b.init();}}Y.state.template=true;}else{G.ajax({type:"GET",url:j.templateUrl,dataType:"html",beforeSend:function(){},success:function(AE){if(AB.janrainFlow==="profileFlow"){R.setDomReady.sectionContent.append(z);z=G(z).html(AE);}else{var AD=AE.replace(/\'/gi,"'");R.setDomReady.body.append(z);var z=R.setDomReady.body.find("#templateHolder");z.html(AD);z.find("#editProfile").remove();}Y.state.template=true;b.init();}});}}};d=function(){};J={};M=function(){if(typeof N.janrain!=="object"){N.janrain={};}N.janrain.settings={};N.janrain.settings.capture={};N.janrain.settings.share={};janrain.settings.appUrl=j.janrain.appUrl;janrain.settings.custom=true;janrain.settings.capture.flowVersion="HEAD";janrain.settings.capture.responseType="token";janrain.settings.capture.flowName="foxNewsFlow";janrain.settings.capture.stylesheets=j.styleUrl;janrain.settings.tokenUrl=N.location.protocol+"//"+N.location.host+"/";janrain.settings.capture.appId=j.janrain.appId;janrain.settings.capture.redirectUri=N.location.protocol+"//"+N.location.host;janrain.settings.capture.clientId=j.janrain.clientId;janrain.settings.capture.captureServer=j.janrain.captureServer;janrain.settings.capture.recaptchaPublicKey="6LeVKb4SAAAAAGv-hg5i6gtiOV4XrLuCDsJOnYoP";janrain.settings.type="embed";janrain.settings.tokenAction="event";janrain.settings.format="two column";janrain.settings.capture.modalBorderOpacity=0;janrain.settings.capture.modalBorderWidth=0;janrain.settings.capture.modalBorderRadius=2;janrain.settings.capture.modalCloseHtml='<span class="janrain-icon-16 janrain-icon-ex"></span>';janrain.settings.capture.modalBorderColor="transparent";janrain.settings.language="en";janrain.settings.capture.setProfileCookie=true;janrain.settings.capture.keepProfileCookieAfterLogout=true;janrain.settings.capture.hideSavedProfileMessageDelay=15000;switch(Y.janrainFlow){case"authFlow":janrain.settings.capture.setProfileData="true";janrain.settings.capture.registerFlow="socialRegistration";break;case"profileFlow":janrain.settings.autoSave=true;janrain.settings.screenToRender="editProfile";break;case"emailFlow":janrain.settings.screenToRender="registrationVerify";janrain.settings.capture.registerFlow="socialRegistration";break;case"passwordFlow":janrain.settings.screenToRender="resetPassword";janrain.settings.capture.setProfileData="true";janrain.settings.capture.registerFlow="socialRegistration";break;}janrain.settings.capture.backplane=true;janrain.settings.capture.backplaneBusName=j.janrain.backplaneBusName;janrain.settings.capture.federate=true;janrain.settings.capture.federateServer=j.janrain.federateServer;janrain.settings.capture.federateXdReceiver=j.xdcomm;janrain.settings.capture.federateLogoutUri=j.logout;janrain.settings.share.providers=["facebook","twitter","linkedin","email"];janrain.settings.share.providersEmail=["google","yahoo"];janrain.settings.share.modes=["broadcast","contact"];janrain.settings.share.attributionDisplay=false;janrain.settings.share.previewMode=0;janrain.settings.share.modalBackgroundColor="#000000";janrain.settings.share.modalBorderRadius="2";janrain.settings.share.modalOpacity="0";janrain.settings.share.modalWidth="0";janrain.settings.share.bodyBackgroundColor="#F3F3F3";janrain.settings.share.bodyBackgroundColorOverride=true;janrain.settings.share.bodyColor="#333";janrain.settings.share.bodyContentBackgroundColor="#ffffff";janrain.settings.share.bodyFontFamily="Helvetica";janrain.settings.share.bodyTabBackgroundColor="#F3F3F3";janrain.settings.share.bodyTabColor="#424242";janrain.settings.share.elementBackgroundColor="#f3f3f3";janrain.settings.share.elementBorderColor="#ccc";janrain.settings.share.elementBorderRadius="3";janrain.settings.share.elementButtonBorderRadius="3";janrain.settings.share.elementButtonBoxShadow="0";janrain.settings.share.elementColor="#333333";janrain.settings.share.elementHoverBackgroundColor="#333333";janrain.settings.share.elementLinkColor="#173951";if(Y.janrainFlow==="profileFlow"){janrain.settings.packages=["login","capture"];}else{if(Y.janrainFlow==="publicFlow"){janrain.settings.packages=["login","capture"];janrain.settings.capture.stylesheets=[];}else{janrain.settings.packages=["login","capture","share"];}}janrain.ready=true;};b={config:{capture:{url:j.janrain.jsURL,id:"janrainAuthWidget"},share:{url:"default",id:"janrainWidgets",type:"share"}},session:null,sessionType:"",reset:false,init:function(){var k=this;k.widgetOnload();k.captureWidgetOnLoad();W.loadExtJs(k.config.capture.url,k.config.capture.id,k.loadedJS.loadJan);return this;},API:{requestSent:false,url:j.janrain.apiURL,token:"",updateAPI:function(k,m){var l=this;if(k==="livefyre"){return{type_name:"user",access_token:l.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+S.userLivefyre.id+'"}}}'};}else{if(k==="livefyre_temp"){return{type_name:"user",access_token:l.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+S.uuid+'@foxnewsprod.fyre.co"}}}'};}else{if(k==="badgeville_id"){return{type_name:"user",access_token:l.token,attributes:'{"externalServices":{"badgeville_id":"'+S.uuid+'@user.foxnews.com"}}'};}else{if(k==="share"){if(S.userJanrain.shares==null){S.userJanrain.shares=0;}S.userJanrain.shares+=1;return{type_name:"user",access_token:l.token,attributes:'{"shares" : '+S.userJanrain.shares+"}"};}else{if(k==="test"){return{type_name:"user",access_token:l.token,attributes:'{"externalServices":{"livefyre":{"livefyre_id":"'+m+'"}}}'};}}}}}},execute:function(l,k){var o=this,m="FOX_Janrain_EXEC";k.jsonp=m;if(typeof N[m]!=="function"){N[m]=function(q){if(q.code==414){H.janrain.tokenRefreshed();H.janrain.signOut();H.domEvents.logoutSuccess();return false;}else{if(q.code==310){H.domEvents.logoutSuccess();H.janrain.signOut();return false;}else{if(!q.code&&!q.stat){H.domEvents.logoutSuccess();H.janrain.signOut();return false;}else{if(q.stat==="ok"){o.requestSent=true;S.uuid=q.result.uuid;S.email=q.result.email;S.userJanrain=q.result;S.displayName=q.result.displayName;H.displayName();if(G("#authentication").css("display")==="block"){H.domEvents.loginSuccess();}if(R.setDomReady.acc.hasClass("alt-style")){H.displayShowsProfile();}O.uLogin(b.API.token,S.email,S.uuid);e.idmsLogin(b.API.token,S.email,S.uuid);if(q.result.externalServices.livefyre.livefyre_id==null||q.result.externalServices.livefyre.livefyre_id==="null"||q.result.externalServices.livefyre.livefyre_id===""){o.update("entity.update",o.updateAPI("livefyre_temp"));}if(q.result.externalServices.badgeville_id==null||q.result.externalServices.badgeville_id==="null"||q.result.externalServices.badgeville_id===""){o.update("entity.update",o.updateAPI("badgeville_id"));}I.setUp();}}}}};}G.ajax({data:k,url:o.url+l,dataType:"script",async:true,cache:true});},update:function(l,k){var o=this,m="FOX_Janrain_UPD";k.jsonp=m;if(typeof N[m]!=="function"){N[m]=function(q){};}G.ajax({data:k,url:o.url+l,dataType:"script",async:true,cache:true});}},loadedJS:{loadJan:function(){if(typeof janrain==="object"){Y.state.janrain=true;}},loadShare:function(){}},widgetOnload:function(){N.janrainWidgetOnload=function(){AUTH_Manager.fireReady("janrain");};return this;},captureWidgetOnLoad:function(){N.janrainCaptureWidgetOnLoad=function(){var k=janrain.events;AUTH_Manager.fireReady("capture");k.onCaptureLoginSuccess.addHandler(H.janrain.successfulLogin);k.onCaptureRegistrationSuccess.addHandler(H.janrain.successfulRegistration);k.onCaptureRegistrationStart.addHandler(H.janrain.registrationStart);k.onCaptureAccessDenied.addHandler(H.janrain.accessDenied);k.onAuthWidgetLoad.addHandler(H.janrain.onAuthWidgetLoad);k.onModalClose.addHandler(H.janrain.onModalClose);k.onCaptureValidationSuccess.addHandler(H.janrain.validation.onValidationSuccess);var l=W.domTest(G("#livefyre_comment_stream")),o=G("#disqus_thread");if(!l){var m=document.createElement("div");m.id="livefyre_comment_stream";if(o.length>0){o.attr("id","livefyre_comment_stream");o.empty();l=true;}Y.livefyreSet=true;}else{o.remove();Y.livefyreSet=false;}if(l&&Y.janrainFlow==="authFlow"){k.onCaptureBackplaneReady.addHandler(H.janrain.backplaneReady);}k.onCaptureRenderComplete.addHandler(H.janrain.screen.onRenderComplete);k.onCaptureProfileSaveSuccess.addHandler(H.janrain.screen.editProfile.onProfileUpdate);k.onCaptureAutoSaveUpdate.addHandler(H.janrain.screen.editProfile.onProfileAutoSave);k.onCaptureProfileSaveFailed.addHandler(H.janrain.screen.editProfile.onProfileFailedSave);k.onCaptureScreenShow.addHandler(H.janrain.screen.onScreenShow);k.onCaptureModalReady.addHandler(H.janrain.screen.uiReady);k.onCaptureSessionFound.addHandler(H.janrain.sessionFound);k.onCaptureSessionNotFound.addHandler(H.janrain.sessionNotFound);k.onCaptureSessionEnded.addHandler(H.janrain.sessionEnded);k.onCaptureLoginSuccess.addHandler(b.isLoggedIn.masterTrigger);k.onCaptureRegistrationSuccess.addHandler(b.isLoggedIn.masterTrigger);k.onCaptureSessionFound.addHandler(b.isLoggedIn.masterTrigger);k.onCaptureSessionNotFound.addHandler(b.isLoggedIn.masterTrigger);k.onCaptureSessionEnded.addHandler(b.isLoggedIn.masterTrigger);k.onCaptureExpiredToken.addHandler(H.janrain.tokenExpired);k.onCaptureFederateRefreshedToken.addHandler(H.janrain.onRefreshToken);if(Y.janrainFlow==="authFlow"){}k.onCaptureError.addHandler(H.janrain.errorEvent);k.onCaptureEmailSent.addHandler(H.janrain.emailSent);N.janrain.capture.ui.start();};return this;},extend:function(k,l){janrain.events[k].addHandler(l);},isLoggedIn:{buffer:[],hasActiveSession:function(k){k(janrain.capture.ui.hasActiveSession());},eventDriven:function(k,l){var m=this;m.buffer.push([k,l]);},masterTrigger:function(o){var r=b.isLoggedIn;if(r.buffer.length==0){return false;}var s=janrain.capture.ui.hasActiveSession(),q=false;for(var k=0,m=r.buffer.length;k<m;k+=1){switch(r.buffer[k][0]){case"found":if(s&&b.sessionType==="found"){r.buffer[k][1](s);q=true;}break;case"notfound":if(!s&&b.sessionType==="notfound"){r.buffer[k][1](s);q=true;}break;case"logout":if(!s&&b.sessionType==="logout"){r.buffer[k][1](s);q=true;}break;case"signin":if(s&&(b.sessionType==="signin")){r.buffer[k][1](s);q=true;}break;case"register":if(s&&(b.sessionType==="register")){r.buffer[k][1](s);q=true;}break;default:r.buffer[k][1](s);break;}if(q){break;}}}},publicProfileLinkUUID:function(){}};a=function(){var k=I;N.BadgevilleAsynchInit=function(){var l=false;N.Badgeville.BackplaneSubscription=N.Backplane.subscribe(function(o){var m;try{if(!o.message.payload.identities.entry){L("Something is wrong with backplane");return false;}else{L("Something is right with backplane");return false;m=o.message.payload.identities.entry;}}catch(v){L(v,"Backplane message has a problem");m=o.payload.identities.entry;}var u=m,r=/uuid=(\S+)/gi,q;if(o.type=="identity/login"&&N.Badgeville.Settings.player==null){var t;l=true;try{t=S.userJanrain.photos[0].value;}catch(v){t=I.config.avatar;}try{q=u.id.match(r)[0];q=q.replace("uuid=","");}catch(s){}S.userBadgeville={email:q+I.config.username,display_name:u.displayName,picture_url:t};N.Badgeville.setPlayer(S.userBadgeville);}});if(!l&&typeof S.userJanrain.uuid!=="undefined"){L("SOO Login GO GO <<");k.events.playerSignIn();}else{}N.Badgeville.Settings.backplaneLink=false;N.Badgeville.crouton=function(){};N.Badgeville.Settings.showToast=0;N.Badgeville.Settings.showWaffle=false;N.Badgeville.Settings.signIn=function(){};N.Badgeville.Settings.signOut=function(){};N.Badgeville.afterSetPlayer=function(m,o){if(I.buffer.length>0){I.events.useBuffer();}if(!k.afterPlayerSet){k.afterPlayerSet=true;k.socialNetworkingIntegration();}};N.Badgeville.ready(function(){var m=N.bpReady;});};};I={config:{id:"badgeville",domain:"foxnews.com",username:"@user.foxnews.com",key:"5302cf0355a5410f0beacdf2de891c52",url:"api.badgeville.com/v4/badgeville-current.js?key=5302cf0355a5410f0beacdf2de891c52&domain=foxnews.com&debugInit=false",avatar:"http://livefyre-avatar.s3.amazonaws.com/a/anon/50.jpg"},afterPlayerSet:false,buffer:[],setUp:function(){var k=this;if(typeof N.Badgeville==="undefined"){k.loadBadgeville();}else{}},loadBadgeville:function(){var k=this;W.loadExtJs(k.config.url,k.config.id,k.badgeLoaded);},badgeLoaded:function(){if(typeof Badgeville==="function"){Y.state.badgeville=true;}},credit:function(k){if(typeof k!=="object"){N.Badgeville.credit(k,function(l){});}else{N.Badgeville.credit(k);}},creditOther:function(k){N.Badgeville.creditOther(k[0],k[1],k[2]);},trigger:function(l,o,k){try{L("Checking",l,(typeof N.Badgeville),b.session,(typeof N.Badgeville.ready));}catch(m){}if(typeof N.Badgeville==="undefined"&&!b.session){L("Nada");try{if(typeof N.Badgeville.ready!=="function"){return false;}}catch(m){}}else{try{if(l in I.events.tracking){if(b.session){L("Frei",l,I.events.tracking[l]);I.events.tracking[l](o,k);}}else{L("Wrong Parameter is passed to Badgeville Credit Trigger!");}}catch(m){L("e",m);}}},socialNetworkingIntegration:function(){var l=this,k=l.social;for(var m in k){k[m]();}},events:{unsubscribe:function(){if(typeof Backplane!=="undefined"){N.Badgeville.setPlayer();}},playerSignIn:function(){var l,k=this;try{l=S.userJanrain.photos[0].value;}catch(m){l=I.config.avatar;}S.userBadgeville={email:S.userJanrain.uuid+I.config.username,display_name:S.userJanrain.displayName,picture_url:l};N.Badgeville.setPlayer(S.userBadgeville);},useBuffer:function(){try{if(typeof N.Badgeville.ready==="function"){for(var m=0,o=I.buffer.length;m<o;m+=1){if(I.buffer[m]==="newsletterSub"){for(var k in B.config.subscribeList){if(B.config.subscribeList[k].length>0){for(var s=0,o=B.config.subscribeList[k].length;s<o;s+=1){var q=B.config.subscribeList[k][s];I.trigger(I.buffer[m],k+q);}}}}else{I.trigger(I.buffer[m]);}}I.buffer=[];}}catch(r){setTimeout(I.events.useBuffer,500);}},playerSignOut:function(k){},playerUpdate:function(k,l){},tracking:{chat:function(){I.credit({verb:"chat",siteID:N.location.href});return this;},viewVideo:function(k){I.credit({verb:"view videos on the site",videoID:k});return this;},completeProfile:function(k){I.credit({verb:"completed profile",uuid:k});return this;},friendTag:function(){I.credit({verb:"friend tag"});return this;},spank:function(k){I.creditOther(k);return this;},commentLike:function(k){I.creditOther(k);return this;},contentShare:function(k){I.credit({verb:"share",articleid_type:k});return this;},newsletterSub:function(u,r){if(typeof u==="object"){try{if(r&&r!==S.userJanrain.email){return false;}}catch(s){}for(var m in u){var o=u[m].length;if(o>0){for(var t=0;t<o;t+=1){var q=setTimeout;q(k(m,u[m][t],q),100);}}}function k(l,w,v){I.credit({verb:"newsletter subscription",newsletterID:l+w});clearTimeout(v);}}else{if(typeof r==="undefined"){I.credit({verb:"newsletter subscription",newsletterID:u});return this;}else{try{if(r===S.userJanrain.email){I.credit({verb:"newsletter subscription",newsletterID:u});return this;}}catch(s){}}}return this;},ureportApproved:function(k){I.credit({verb:"ureport approved",uReportMediaID:k});return this;},returnEightPerMonth:function(){I.credit("visits");return this;}},chatCheck:function(){if((N.location.host.indexOf("live")>-1)||(N.location.href.indexOf("/live-event")>-1)||(N.location.href.indexOf("/sunday-housecall")>-1)){I.buffer.push("chat");}}},social:{facebook:function(){try{FB.Event.subscribe("edge.create",function(l){I.trigger("contentShare",N.location.href+"#facebook");b.API.update("entity.update",b.API.updateAPI("share"));});}catch(k){}},twitter:function(){try{twttr.events.bind("tweet",function(l){I.trigger("contentShare",N.location.href+"#twitter");b.API.update("entity.update",b.API.updateAPI("share"));});}catch(k){}},google:function(){},linkedIn:function(){}}};Q=function(){};g={conv:null,url:j.livefyre.jsURL,config:[],network:j.livefyre.network,eventsDelegate:null,commentsNumber:0,customStrings:{sortLabel:"SORT BY"},init:function(k){var l=this;if(typeof fyre!=="object"){W.loadExtJs(g.url,"",g.lfLoaded);}},lfLoaded:function(){g.eventsDelegate=new fyre.conv.BackplaneAuthDelegate(N.Backplane);g.events.eventsDelegate();g.grabMetaData();},grabMetaData:function(m){var o=this,l={},k=[],s=G('meta[name="livefyreconfig"]'),r=false,q;if(s.attr("siteId")){q=s.attr("siteId");}else{q=j.livefyre.siteid;}if(s.length>0){l={el:j.livefyre.el,siteId:q,checksum:s.attr("checksum"),articleId:s.attr("articleId"),collectionMeta:s.attr("collectionmeta")};}else{l={collectionMeta:"eyJ0eXAiOiJqd3QiLCJhbGciOiJIUzI1NiJ9.eyJ0aXRsZSI6Iih0ZXN0aW5nIDMgMiAxKSBUaGlzIGlzIGFuIG90aGVyIHRlc3QgdGl0bGUuIiwidXJsIjoiaHR0cDpcL1wvZXhhbXBsZS5jYnMuY29tXC9leGFtcGxlMi5odG1sIiwidGFncyI6IiIsImFydGljbGVJZCI6InRlc3RpbmcxMjM0IiwiY2hlY2tzdW0iOiJlNzI0YjFkMGRjOTZmZjQ4NjcxN2EwNzkyOGU2YjU4MCJ9.3ywwCkxPrLxt0fzCTg6yqNlr79jep6IOaSJYS_jNEUk",checksum:"e724b1d0dc96ff486717a07928e6b580",siteId:"303683",articleId:"testing1234",el:"livefyre_comment_stream"};r=true;}if(!r){g.config.push(l);o.setUpLiveFyre();}},setUpLiveFyre:function(){var l=this;var k=l.customStrings;l.conv=fyre.conv.load({strings:k,network:l.network,authDelegate:g.eventsDelegate},l.config,g.events.doLivefyreAuth);},events:{eventsDelegate:function(l){var k=g.eventsDelegate;k.login=function(o){var m=function(){o.success();janrain.events.onCaptureLoginSuccess.removeHandler(m);janrain.events.onModalClose.removeHandler(q);};var q=function(){o.failure();janrain.events.onModalClose.removeHandler(q);janrain.events.onCaptureLoginSuccess.removeHandler(m);};H.janrain.signin();N.Backplane.expectMessages("identity/login");janrain.events.onCaptureLoginSuccess.addHandler(m);janrain.events.onModalClose.addHandler(q);};k.logout=function(m){H.janrain.signOut();fyre.conv.BackplaneAuthDelegate.prototype.logout.call(k,m);N.livefyreLogout=function(){fyre.conv.BackplaneAuthDelegate.prototype.logout.call(k,m);};janrain.events.onCaptureSessionEnded.addHandler(livefyreLogout);};k.viewProfile=function(m,o,q){if(o.id.indexOf("twitter")>-1||o.id.indexOf("facebook")>-1){return false;}var r=o.id.split("@")[0];H.janrain.displayPublicProfile(r);};k.editProfile=function(m){H.editProfile();};k.share=function(m){m.success();};},doLivefyreAuth:function(k){k.on("commentShared",function(l){I.trigger("contentShare",l.targetId);b.API.update("entity.update",b.API.updateAPI("share"));});k.on("commentPosted",function(l){T.commentPost();if(l.bodyHtml.indexOf("fyre-mention-twitter")>-1||l.bodyHtml.indexOf("fyre-mention-facebook")>-1){G.loadAttempt(60,200,function(){return G(".fyre-modal").size()>0?true:false;},function(){var m=G(".fyre-modal");m.find(".goog-buttonset-default").click(function(){I.trigger("friendTag");});});}});k.on("commentLiked",function(q){var t=q.targetAuthorId.split("@")[0],l=t+"@user.foxnews.com",m=q.targetId,s=t+m,r={verb:"comment like",comment_id:s},o=function(u){L("DO WE HAVE CONNECTION?",u);};I.trigger("commentLike",[l,r,o]);});k.on("commentFlagged",function(o){var r=G("#fyre-message-"+o.targetId).find(".fyre-comment-user").attr("data-author-id").split("@")[0],l=r+"@user.foxnews.com",q={verb:"spank"},m=function(s){L("DO WE HAVE CONNECTION?",s);};I.trigger("spank",[l,q,m]);});k.on("commentCountUpdated",function(m){g.commentsNumber=m;var l=G(".user-interaction > li.comments");l=(l.size()>0)?l:G(".post-footer .comments");if(l.size()>0){if(l.css("display")==="none"){if(l.find("span").size()==0){l.find("a").html("<span></span> "+m+" Comments");}else{l.find("a").html(m+" Comments");}l.css({display:"block"});}else{if(l.find("a > span").size()>0){l.find("a").html("<span></span> "+m+" Comments");}else{l.find("a").html(m+" Comments");}}}else{try{if(N.FOX_metadescriptor.name["prism.subsection1"]==="willisreport"){l=G(".post-footer > .comments");if(l.size()>0){l.find("a").html(g.commentsNumber+" Comments");}}}catch(o){}}});k.on("initialRenderComplete",function(m){if(N.FOX_LivefyreIntegrationService){FOX_LivefyreIntegrationService.isReady();}H.livefyre.displayLogo();H.livefyre.hashComment();g.events.omniture();var l=G(".user-interaction > li.comments");if(l.size()>0){if(l.css("display")==="none"){if(l.find("a > span").size()>0){l.find("a").html("<span></span> "+g.commentsNumber+" Comments");}else{l.find("a").html(g.commentsNumber+" Comments");}l.css({display:"block"});}else{if(l.find("span").size()==0){l.find("a").html("<span></span> "+g.commentsNumber+" Comments");}else{l.find("a").html(g.commentsNumber+" Comments");}l.css({display:"block"});}}else{try{if(N.FOX_metadescriptor.name["prism.subsection1"]==="willisreport"){l=G(".post-footer > .comments");if(l.size()>0){l.find("a").html(g.commentsNumber+" Comments");}}}catch(o){}}});},omniture:function(){var k={showMore:G(".fyre-stream-more-container"),displayComments:G(".comments")};k.showMore.bind("click",function(){T.commentLoad();});k.displayComments.bind("click",function(){T.commentLoad();});}},API:{configUrl:function(m,k){var l=j.livefyre.activityAPI;return l.replace("{uuid}",m).replace("{cb}",k);},displayDataToPublicProfile:function(k){var m=this,l="FOX_Livefyre_PublicRequest";N[l]=N[l]||function(o){S.commentCount=o.data.user_comment_count;S.likeCount=o.data.user_liked_count;S.rating=o.data.user_rating;H.livefyre.populatePublicProfile();};G.ajax({url:m.configUrl(k,l)+"&userInfoFormat=true",dataType:"script",data:{cb:V(5)},async:true,cache:true});},onProfileUpdate:function(){var l=j.livefyre.apiProfile,k="FOX_livefyreProfileUpdate";N[k]=function(m){};G.ajax({url:l+b.API.token+"&callback="+k,dataType:"script",async:true,cache:true});},onLoginSuccessFromJanrain:function(){var m=G("#livefyre_comment_stream");var l=m.find(".fyre-widget .fyre-auth .fyre-login-bar .fyre-user-loggedout"),k="Signing In...";G.loadAttempt(250,150,function(){return(l&&l.text()!==k)?true:false;},function(){l.text(k);});}},activityTab:{configUrl:function(m,k){var l=(Y.janrainFlow==="profileFlow")?j.livefyre.activityAPI:j.livefyre.activityActiveAPI;return l.replace("{uuid}",m).replace("{cb}",k);},uuid:null,location:null,activityWraper:null,domStorage:null,ajaxRequestsTries:3,currentNumberAttempts:0,maxCommentsGrab:10,curTime:function(){return N.AKAMAI_TIME_HELPER.getCurrent();},backup:null,user:{name:null,image:null},initCallFromJanrain:function(){var k=this;k.cloneMarkUp();},cloneMarkUp:function(){var m=this;var l=G("#livefyre-wrap"),k=l.clone();m.activityWraper=k;l.remove();G("#account-wrap").before(k);m.tabActivity();m.gatherData();},tabActivity:function(){H.domEvents.tabControlsForActivityPages();},assessDom:function(){var m=this;if(m.dom==null){var k=G("#livefyre-Activity").find(".livefyre-pro-activity"),l=k.find("ul");m.dom={image:G("#livefyre-pro-image").find("> img"),ul:l,name:k.find("h1"),body_plain:"comment",url:"link",created_at:"time",conv_title:"whereTitle",structure:k};}return m.dom;},dom:null,manageDomCopy:function(){var l=this,o=l.activityWraper,m=o.find(".livefyre-pro-activity"),k=m.find(".prof-activity ul");return{image:o.find("#livefyre-pro-image").find("> img"),ul:k,name:m.find("h1")};},gatherData:function(l,k){var o=this,m="FOX_liveFYRE_Activity",l=l||S.uuid,q=k||"private";o.uuid=l;o.location=q;if(typeof l==="undefined"){return false;}o.location=k||"private";if(o.location==="private"){o.gatherNameAndImage();}if(!N[m]){N[m]=function(r){o.populateMarkup(r);};}G.ajax({url:o.configUrl(l,m),dataType:"script",data:{cb:V(5)},async:true,cache:true});},hashTagGatherer:function(){var k=this,l=N.location.hash;if(l===""){return k;}k.user.name=l.replace("#","");return k;},hachChanged:function(){},getPhotosAndId:function(){var k=this;if(k.user.name===""||k.user.name==null){k.populateResponce({response:{status:"fail"}});return false;}G.ajax({url:j.janrain.publicRequestAPI+k.user.name,dataType:"json",data:{cb:V(5)},async:true,cache:true,success:function(l){k.populateResponce(l);}});},populateResponce:function(k){var l=g.activityTab;if(k.status!=="ok"){var m=l.assessDom();m.image.parent().hide();m.structure.html("User not found! Please make sure that the user is correct");return false;}if(k.result.photos.length>0){l.user.image=k.result.photos[2].value;}else{l.user.image="http://cdn.quilt.janrain.com/2.1.2/profile_default.png";}l.uuid=k.result.uuid;l.gatherData(l.uuid,"public");},gatherNameAndImage:function(){var k=this;switch(k.location){case"private":k.user.name=S.userJanrain.displayName;if(S.userJanrain.photos.length>0){k.user.image=S.userJanrain.photos[2]["value"];}else{k.user.image="http://cdn.quilt.janrain.com/2.1.2/profile_default.png";}break;case"public":k.obtainDataFromExternalJanrain();break;default:break;}},obtainDataFromExternalJanrain:function(){},populateMarkup:function(o){var v=g.activityTab,k=[],m=v.curTime();if(o.code===404){var q=v.assessDom();q.image.parent().hide();q.structure.html("User not found! Please make sure that the user is correct");return false;}else{if(o.code!==200){v.gatherData(v.uuid,v.location);}}if(o.data.length==0){var q=v.assessDom();q.image.parent().hide();q.structure.html("User has no comments");return false;}if(o.code===200&&Y.janrainFlow){var r=o.data,t=10,s=r.length;s=(s>t)?t:s;var w=function(AC){var z=[],AB=new Date(v.correctingCommentTime(AC.created_at)),AA=v.createdSinceTime(AB,m);z.push("<li><div>");z.push("<p>"+AD(AC.body_html)+"</p>");z.push("<span>"+AA.str+' <a href="'+AC.url+'" >'+AC.conv_title+"</a></span>");z.push('</div><a href="'+AC.url+'" >View</a></li>');function AD(AF){var AE=G(AF);if(AE.find("span").length>0){AE.find("span").each(function(){var AH=G(this),AG=AH.text();AH.text("@"+AG);AH.wrap("a");if(AH.attr("provider")!=="livefyre"){var AI=AH.attr("profile_url");AH.parent().attr("target","_blank");AH.parent().attr("href",AI);}else{AH.parent("a").removeAttr("href");}});}return AE.html();}return(z.join(""));};for(var u=0;u<s;u+=1){k.push(w(r[u]));}k=k.join("");if(v.location==="private"){var l=v.manageDomCopy();l.ul.html(k);v.insertNewMarkupIntoTab();}else{var q=v.assessDom();q.ul.html(k);v.insertNewMarkupIntoTab();}}},parseThroughSpan:function(){G(".prof-activity > ul").find("li").each(function(){var k=G(this);k.find("span").each(function(){var m=G(this);if(m.attr("provider")==="livefyre"){var l=m.attr("jid").split("@")[0];m.parent("a").removeAttr("href");m.bind("click",function(){janrain.capture.ui.getPublicProfile("publicProfile",l);});}});});},insertNewMarkupIntoTab:function(){var k=this;if(k.location==="public"){var m=k.assessDom();m.name.html(k.user.name);m.image.attr("src",k.user.image);}else{var l=k.manageDomCopy();l.name.html(k.user.name);l.image.attr("src",k.user.image);}k.parseThroughSpan();},correctingCommentTime:function(m){var o=N.AKAMAI_TIME_HELPER.isDST(),r="GMT"+((o.val)?"+100":"-000");var q=m.split("T"),k=q[0],s=q[1];k=k.split("-");k=[k[1],k[2],k[0]].join("/");var l=new Date([k,s,r].join(" "));return l;},createdSinceTime:function(l,k){var w=this,m=l,r=false;if(!m){return{str:"",val:false};}var u=w.dayDifferences(k,m),z=[];var t=function(AC,AB){var AA=" "+AC+((AB>1)?"s":"");return AA;};var s=function(AA){return AA<0?AA*-1:AA;};if(u.s<0){r="Just Now on";}else{if(u.m==0&&u.d==0&&u.h==0){z.push(u.s+t("second",u.s));}else{if(u.m<60&&u.h==0&&u.d==0){z.push(u.m+t("minute",u.m));if(u.s>0){z.push(u.s+t("second",u.s));}}else{if(u.h>=1&&u.d==0){z.push(u.h+t("hour",u.h));if(u.m>0){z.push(u.m+t("minute",u.m));}}else{if(u.d>=1&&u.d<=30){z.push(u.d+t("day",u.d));if(u.h>0){z.push(u.h+t("hour",u.h));}}else{if(u.d>30&&u.d<=365){var q=Math.floor(u.d/30),v=u.d%30;z.push(q+t("month",q));if(v>0){z.push(v+t("day",v));}}else{if(u.d>365){r="1 year ago on";}else{if(u.d>730){r="Many years ago on";}}}}}}}}r=(r)?r:(z.join(", ")+" ago on");var o={str:r,val:l};return o;},dayDifferences:function(k,l){var m=Date.parse(k)-Date.parse(l);return isNaN(m)?NaN:{diff:m,ms:Math.floor(m%1000),s:Math.floor(m/1000%60),m:Math.floor(m/60000%60),h:Math.floor(m/3600000%24),d:Math.floor(m/86400000)};},displayDiffenceTime:function(k){return""+k.ms+" Months"+k.d+" Days "+k.m+" Minutes";},loadDataWhenFailed:function(){var k=this;k.copyToCopy();},copyToCopy:function(){var k=this;G("#account-wrap").before(G(k.activityWraper));k.activityTab();}}};h=function(){var k=O;k.cookieSet=function(){return(G.cookie("SABRE_ID"))?true:false;};k.ureportHost=(function(){return(N.location.host.indexOf("ureport")>-1)?true:false;})();};O={config:{url:j.ureport.url,token:"&token=",email:"&email=",user:"&username="},uReportIdLookupAndDisplay:function(o,l){var k=this,m=(j&&j.ureport&&j.ureport.idLookup)?true:false;if(!m){return false;}N.userNameLookup=function(q){if(l){var r=(q.approvedFiles)?q.approvedFiles:"0";G("#fox_ur_reports").html(r);}else{k.uReportTab(q.id);}};url=j.ureport.idLookup.replace("[UREPORT_USER_ID]",o);G.ajax({url:url,dataType:"script"});},uReportTab:function(u){var v=this,s=false;var m={acctWrap:G("#account-wrap"),ureportWrap:G("#ureport-pro-wrap"),activityWrap:G("#livefyre-wrap"),tabs:G(".tabs"),wraps:G(".wrap"),lastestUrep:G(".latest-urep"),noSub:G(".no-subs")};if(u){var q=u;}else{m.lastestUrep.hide();m.noSub.show();if(typeof auth_fox.user.userJanrain.externalServices==="undefined"){var l=0;var t=setInterval(function(){var z=G("#livefyre-pro-image img").attr("src");if(z.indexOf("static/v/all")===-1){G("#ureport-avatar").prepend('<img src="'+z+'" width="139" height="139"/>');var w=G(".livefyre-pro-activity h1").text();G("#ureport-pro-wrap h1").text(w);G(".sub-ur-banner a").attr("href","http://ureport.foxnews.com/assignments?f=treeleft&o=ASC");clearInterval(t);}else{if(l===5){clearInterval(t);}l++;}},1000);return ;}else{var q=auth_fox.user.userJanrain.externalServices.uReport_id;}}if(typeof u!=="undefined"){var s=true;}if(!s){var r=m.ureportWrap.clone();m.ureportWrap.remove();m.acctWrap.after(r);}(function(){var w=G("#ureport-pro-wrap"),z=G(".wrap");m.tabs.click(function(){var AA=G(this),AB=AA.attr("id");z.css("display","none");m.tabs.removeClass("active");AA.addClass("active");if(AB=="account-tab"){m.acctWrap.css("display","block");}if(AB=="ureport-pro-tab"){w.css("display","block");}if(AB=="ureport-act-tab"){m.activityWrap.css("display","block");}});})();var o={approvedUploadsELM:G("#ureport-pro-wrap .prof-urep-stats ul li:eq(0) span"),asSeenOnFoxChannelELM:G("#ureport-pro-wrap .prof-urep-stats ul li:eq(1) span"),featureduReportsELM:G("#ureport-pro-wrap .prof-urep-stats ul li:eq(2) span"),assignmentsELM:G("#ureport-pro-wrap .prof-urep-stats ul li:eq(3) span"),latestReport:G("#ureport-pro-wrap .prof-urep-latest"),noSubs:G("#ureport-pro-wrap .no-subs"),latestReportLink:G("#ureport-pro-wrap .latest-urep a"),photoELM:G("#ureport-pro-wrap .latest-urep a img"),title:G("#ureport-pro-wrap .latest-urep div h2 a"),message:G("#ureport-pro-wrap .latest-urep div p"),userName:G("#ureport-pro-name h1"),publicURL:G("#ureport-pro-wrap .sub-ur-banner a"),userName:G("#ureport-pro-name h1"),avatar:G("#ureport-avatar"),accountWrap:G("#account-wrap"),lastestUrep:G(".latest-urep"),noSub:G(".no-subs")};if(s){o.userName.text(location.href.split("#")[1]);var k=auth_fox.livefyre.activityTab.user.image;o.avatar.html('<img src="'+k+'" style="height:139px;width:139px" />');}else{o.userName.text(auth_fox.user.userJanrain.displayName);var k=(typeof auth_fox.user.userJanrain.photos[2]!=="undefined")?auth_fox.user.userJanrain.photos[2]["value"]:false;if(k){o.avatar.html('<img src="'+k+'" style="height:139px;width:139px" />');}}o.publicURL.attr("href","http://ureport.foxnews.com/assignments?f=treeleft&o=ASC");N.ureportActivity=ureportActivity=function(z){var z=z.result,w=z.seenOnFNC.match(/,/g),AA=z.featuredUreports.match(/,/g);w=w?w.length:0;AA=AA?AA.length:0;if(z.approvedUploads!=="0"&&!s){G(".sub-ur-banner").css("visibility","hidden");}o.approvedUploadsELM.text(z.approvedUploads);o.asSeenOnFoxChannelELM.text(w);o.featureduReportsELM.text(AA);o.assignmentsELM.text(z.assignments);if(typeof z.publicUrl!=="undefined"&&z.publicUrl!==""){o.photoELM.attr("src",z.publicUrl);o.lastestUrep.show();o.noSub.hide();}else{o.latestReportLink.hide();o.noSubs.show();}o.latestReportLink.attr("href",z.viewUreport);o.title.text(z.title);o.message.text(z.description);if(typeof N.ureportInitialized==="undefined"){N.ureportWrapClone=G("#ureport-pro-wrap").clone();N.ureportInitialized=true;N.refreshUR=refreshUR=function(){G("#account-wrap").after(N.ureportWrapClone);};}};(function(){G.ajax({url:j.ureport.ureportURL.replace("[UREPORT_USER_ID]",q),dataType:"script"});})();},uLogin:function(o,m,r){if(!f("ureport")){return false;}var q=this,k="FOX_ureport_SABRE",l=q.config;N[k]=function(s){if(q.ureportHost){G.cookie("SABRE_ID",s.fm,{path:"/"});var t=R.setDomReady.uReport().acc;if(!t.hasClass("action")&&typeof N.Backplane==="function"&&s.fm!==""){if(N.location.pathname==="/assignment"){setTimeout(function(){N.location.pathname="/submitreport";},500);}else{setTimeout(function(){N.location.reload(true);},500);}}}};G.ajax({url:l.url+k+l.token+o+l.email+_email+l.user+r,async:true,cache:true,dataType:"script"});},uLogout:function(){var l=this,k=R.setDomReady.uReport().acc;if(l.cookieSet()&&l.ureportHost&&k.hasClass("action")){G.cookie("SABRE_ID",null,{path:"/"});G.cookie("SABRE_ID",null,{path:"/"});setTimeout(function(){N.location.reload(true);},3000);}},clearCookies:function(){var l=0,k=0;G.cookie("SABRE_ID",null,{path:"/"});},docReady:(function(){if(!f("ureport")){return false;}var l=$tartup.site.OnDocReady;function k(m){G.cookie(m,null,{path:"/"});G.cookie("SABRE_ID",null,{path:"/"});G.cookie("p_UN",null,{path:"/"});setTimeout(function(){N.location.reload(true);},3000);}l("slideShowCarousel",{init:function(){var m=this;m.setSlideshow();},setSlideshow:function(){function m(s,r){var q=[];for(var o=1;o<=r.batch.max;o++){q.push('<li><a href="#"></a></li>');}s.html(q.join(""));}G(".c-slide").each(function(r){var v=G(this),s=v.find("div.controls"),u=v.find("ul.sectioning"),t=false;var q=function(w){w.each(function(z){G(this).click(function(){t.stopAutoScroll();t.scrollToBatch(z+1);return false;});});};var o={auto:{set:true,speed:5000,resume:true},slide:"horizontal",scroll:1,show:1,speed:"slow",rotate:true,eventCallback:function(z){var AA=z.start,w=z.end;if(z.event==="init"){m(u,z);q(u.find("> li a"));}u.find("> li").each(function(AB){G(this).toggleClass("active",(AB+1===z.batch.current));});},controlsCallback:function(w){s.find(".prev").click(function(){w.stopAutoScroll();w.slide("prev");return false;});s.find(".next").click(function(){w.stopAutoScroll();w.slide("next");return false;});t=w;}};v.jACarousel(o);});}});l("emailSubmit",{init:function(){var m=this;G("#signupSubmit").click(function(){var o=G("#signupEmail").val();m.validate(o);return false;});G("#signupEmail").attr("value","Enter Your Email").blur(function(){var q=G(this),o=q.attr("value");q.attr("value",(o==="")?"Enter Your Email":o);}).focus(function(){var q=G(this),o=q.attr("value");q.attr("value",(o==="Enter Your Email")?"":o);});},validate:function(m){var q=this,o=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(o.test(m)==false){G(".newsletter-module form .error").text("Please enter a valid email address.").css("display","block");}else{q.postEmail(m);G(".newsletter-module form .error").text("Thank you for subscribing to uReport.").css("display","block");G("#signupEmail").val("");}},postEmail:function(m){G.ajax({url:"http://www.foxnews.com/portal/newsalertsubscribe",data:"slids=3DC725E303A24F8D41CEA8699C0FE71E&email="+m});L(m);}});l("SSOModule",{init:function(){var m=this;},attachEvents:function(){var q=this,o;G("#authentication li:nth-child(1)").click(function(r){q.loadIframe("register");r.preventDefault();});G("#authentication li:nth-child(2)").click(function(r){q.loadIframe("login");r.preventDefault();});var u=G("#log-in");if(u.length>0&&!G.cookie("p_Thirdparty")){u.click(function(v){var r=u.attr("href");q.submitreport=(r.split("?")[1]).split("=")[1];q.loadIframe("login");v.preventDefault();});}G(N).resize(function(){var v=G("#foxFrame"),r=G(N);if(v.length){v.width(r.width());v.height(r.height());}});N.location.hash="";var t=G("#account"),m=G.cookie("p_UN"),s=G.cookie("p_Thirdparty");if(t.hasClass("inactive")){m=G.trim(G.cookie("p_UN").replace("."," "));t.prop("onmouseout",null);t.click(function(v){var r=v.currentTarget;G(r).toggleClass("active");});G(".user-options").prepend("<p>You're logged in as <span>"+truncate(m,13)+"</span></p>");if(s==="true"){t.find("li.first").hide();}}else{if(s){m=G.trim(G.cookie("p_UN").replace("."," "));t.addClass("inactive").html('<div class="username"><div class="encapsulate"><img width="13" height="13" alt=" " src="http://www.foxnews.com/static/all/img/head/profile.png"/><span>Account</span></div><div class="user-options"><p>You\'re logged in as <span>'+truncate(m,13)+'</span></p><ul><li class="first"><li><a onclick="killCookie(\'SABRE_ID\');" href="#">Logout</a></li></ul></div></div>');t.hover(function(v){var r=v.currentTarget;G(r).toggleClass("active");},function(v){var r=v.currentTarget;G(r).toggleClass("active");});}}t.find("li:first a").attr("href","https://secure.foxnews.com/community/user/profile").attr("target","_blank");},loadIframe:function(q){var s=this,t,o,m=G("#login");o=encodeURIComponent(N.location.href);t=G("<iframe />",{id:"foxFrame",src:"http://www.foxnews.com/static/v/all/html/ureport-login-ifr-2.html#"+q+"&url="+o,width:G(N).width(),height:G(N).height(),allowTransparency:true,scrolling:"no"});m.show().css("visibility","hidden");t.load(function(){m.css("visibility","visible");}).appendTo(m);},setHashListener:function(){var o=this;G(N).bind("hashchange",G.proxy(o.hashChange,o));if(G.browser.msie&&(G.browser.version==="7.0")){var m=N.location.hash;N.setInterval(function(){if(N.location.hash!==m){G.proxy(o.hashChange(),o);}},100);}},hashChange:function(){var s=this,u=N.location.hash,m,t,o;G('<link href="http://www.foxnews.com/i/redes/foxnews.ico" rel="shortcut icon" type="image/x-icon" />').appendTo("head");if(u.replace("#","")===""){return ;}try{u=u.replace("#","").split("&");m=u[0].split("=")[1];t=u[1].split("=")[1];o=u[2].split("=")[1];}catch(q){}if(m==="true"){G.cookie("SABRE_ID",t);G(N).unbind("hashchange");N.location.hash="";if(s.submitreport!==null){N.location.pathname="/submitreport";}setTimeout(function(){N.location.reload(true);},1000);}if(o==="true"){N.location.hash="";G("#login").html("").hide();}}});}())};U=function(){this.url="";};B={config:{url:j.whatcounts.subscribe,iframeUrl:"http://$.foxnews.com/feeds/app/newsletters/",sub:"?c=sub",unsub:"?c=unsub",find:"?c=find",email:"&email=",r:"&r=",listId:"&list_id=",cbust:"&cb=",unsubURL:j.whatcounts.unsubscribe,token:"?token=",subRList:"&",callback:"&callback=FOX_whatcounts_UNSUB",cb:"FOX_whatcounts_UNSUB",realms:["foxnews","foxpromos","foxbusiness","foxnewsletter"],janrainHost:"&host=fox-news",Realms:{foxnews:"foxnewsIDList",foxpromos:"foxpromosIDList",foxbusiness:"foxbusinessIDList",foxnewsletter:"foxnewsletterIDList"},idRealms:{foxnewsIDList:"foxnews",foxpromosIDList:"foxpromos",foxbusinessIDList:"foxbusiness",foxnewsletterIDList:"foxnewsletter"},List:{foxnewsIDList:[],foxpromosIDList:[],foxbusinessIDList:[],foxnewsletterIDList:[]},subscribeList:{foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]}},dom:{email:null,newsList:null,load:function(){var k=this;k.email=G("#capture_editProfile_edit_email");k.newsList=G(".news-sub-form").find("label");k.signInform=G("#capture_traditionalRegistration_registrationForm");k.signInEmail=k.signInform.find("#capture_traditionalRegistration_form_item_traditionalRegistration_emailAddress input");k.signInLabels=k.signInform.find(".news-sub-form-reg label");k.signInIframeTarget=G("body");}},gatherData:function(){},janrainNewsAlerts:function(s,r){var q,k;var u={"3DC725E303A24F8D197DA3C8590F80E2":["foxnewsletter","172"],"3DC725E303A24F8D1C12D1E24CDEA25E":["foxnewsletter","166"],"3DC725E303A24F8D9C92271F5026F381":["foxnewsletter","106"],"3DC725E303A24F8D555BC7C7F3FD748B":["foxnewsletter","178"],"3DC725E303A24F8D836CEAE9B885C87D":["foxnewsletter","76"],"3DC725E303A24F8DCF015F07C61BABFD":["foxnewsletter","144"],"3DC725E303A24F8DA5DBC7FFD49BC2B8":["foxnewsletter","160"],C2F278094FACCEA62391025B7A52D8EB:["foxnews","35"],"3DC725E303A24F8DE5C63D14EAB8EF63":["foxnewsletter","162"],"3DC725E303A24F8D95ACD1C9C0564C20":["foxnewsletter","96"],"3DC725E303A24F8DA102192D9D5143D9":["foxnewsletter","173"],"3DC725E303A24F8DAB69E1C048904762":["foxnewsletter","153"],"3DC725E303A24F8DB05092D232355E43":["foxnewsletter","71"],"3DC725E303A24F8DE5173CCC4F027046":["foxnewsletter","171"],"3DC725E303A24F8D41CEA8699C0FE71E":["foxnewsletter","133"],D98A625593049BD2AC0F412BA1AF913A:["foxpromos","174"],D98A625593049BD2CBFB283F5508AF71:["foxpromos","43"],"3DC725E303A24F8D64B4C05965F09E1A":["foxnewsletter","99"],"5C84B893BD6D939E84FAE1A8E6E9525A":["foxbusiness","32"],"3DC725E303A24F8D870B96401050B31F":["foxnewsletter","90"],"3DC725E303A24F8D518A0FB222399489":["foxnewsletter","151"],"3DC725E303A24F8D39740C7B45D15F45":["foxnewsletter","69"],"3DC725E303A24F8D3540B4B6FB335FC8":["foxnewsletter","108"],"3DC725E303A24F8D5E4CD875B68955A6":["foxnewsletter","141"],"3DC725E303A24F8D7E5F3A553E2E6154":["foxnewsletter","122"],"3DC725E303A24F8D883169054890DC1B":["foxnewsletter","183"],"3DC725E303A24F8D02B1F9D9AAF16982":["foxnewsletter","97"],D98A625593049BD23B5BE4FDF9C2351F:["foxpromos","139"]},l={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]},m=[];if(typeof s!="undefined"){if(s instanceof Array){for(var t=0;t<s.length;t++){q=u[s[t]][0];k=u[s[t]][1];m.push(k);l[q].push(k);}}else{q=u[s][0];k=u[s][1];m.push(k);l[q].push(k);}}else{q="foxbusiness";k="32";m="32";}var o={listIds:m.join(","),email:r,cb:V(),callback:"badgevilleSubscribeSuccess"};N.badgevilleSubscribeSuccess=function(){};L("badgeville request:",o);G.ajax({url:"http://"+j.whatcounts.subdomain+".foxnews.com/feeds/app/badgeville/newsletters/subscribe.json",data:o,dataType:"script"});},lookUpUser:function(){var o=this,k=o.config;o.dom.load();if(o.dom.email.length>0){var q=0;var l=function(){var r=[k.url,k.find,k.r+k.realms[q],k.email+o.dom.email.attr("value"),k.cbust+V(2,"milliseconds")].join("");G.ajax({url:r,dataType:"text",type:"GET",success:function(w){if(w){if(G.browser.msie){w=w.replace(/\s+/g,"");var v=new ActiveXObject("Microsoft.XMLDOM");v.loadXML(w);var u=G(v).find("lists").text();}else{var u=G(w).find("lists").text();}if(u){u=u.split(",");var t=function(AB){if(u[AB]!==""){k.List[k.Realms[k.realms[q]]].push(u[AB]);}};for(var AA=0,s=u.length;AA<s;AA+=1){t(AA);}}}if(q<3){q++;l();}else{m();}},error:function(s){L("Error",s);}});};l();function m(){G(document).ready(function(){o.checkNewsLetters();});}}else{L("dom not ready!");}},checkNewsLetters:function(){N.scrollTo(0,1070);this.dom.load();var r=this,q=r.dom.newsList,k=r.config;for(var m in k.List){if(k.List[m]!=0){for(var l=0;l<k.List[m].length;l++){var o=G("#"+m+"_"+k.List[m][l]);G(o).checked=true;G(o[0]).attr("checked","checked");}}}r.setEventListener();H.janrain.screen.stateLookUp=false;},onFail:function(){N.scrollTo(0,1070);this.dom.load();var m=this,l=m.dom.newsList,k=m.config;l.each(function(){var q=G(this).find("input"),o;o=q.attr("id").split("_");if(N._NewsletterBindings.subscribe[k.idRealms[o[0]]].indexOf(o[1])>-1){q[0].checked=true;}if(N._NewsletterBindings.original[k.idRealms[o[0]]].indexOf(o[1])>-1&&N._NewsletterBindings.unsubscribe[k.idRealms[o[0]]].indexOf(o[1])===-1){q[0].checked=true;}});m.setEventListener();},updateSub:function(){var v=this,k=v.dom.newsList,q=v.config,t={},u={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]},r={foxnews:[],foxpromos:[],foxbusiness:[],foxnewsletter:[]};k.each(function(){var z=G(this).find("input"),w;w=z.attr("id").split("_");if(z.is(":checked")){u[q.idRealms[w[0]]].push(w[1]);}else{if(!H.janrain.screen.postAjaxInit){if(q.List[w[0]].indexOf(w[1])>-1){r[q.idRealms[w[0]]].push(w[1]);}}else{if(q.subscribeList[q.idRealms[w[0]]].indexOf(w[1])>-1){r[q.idRealms[w[0]]].push(w[1]);}}}});q.subscribeList=u;for(var o in N._NewsletterBindings.subscribe){if(N._NewsletterBindings.subscribe[o].length!=0){var m=N._NewsletterBindings.subscribe[o].join(","),l=[q.url,q.sub,q.email+v.dom.email.attr("value"),q.listId+m,q.r+o,q.cbust+V(2,"milliseconds")].join("");for(var s=0;s<N._NewsletterBindings.subscribe[o].length;s++){I.credit({verb:"newsletter subscription",newsletterID:o+N._NewsletterBindings.subscribe[o][s]});}G.ajax({url:l,dataType:"html",type:"POST",success:function(w){},error:function(w){L("Error",data,w);}});}}for(var o in N._NewsletterBindings.unsubscribe){if(N._NewsletterBindings.unsubscribe[o].length!=0){var m=N._NewsletterBindings.unsubscribe[o].join(","),l=[q.unsubURL,q.unsub,q.email+v.dom.email.attr("value"),q.listId+m,q.r+o,q.cbust+V(2,"milliseconds")].join("");N[q.cb]=function(w){};G.ajax({url:l,dataType:"script",async:true,cache:true});}}H.janrain.screen.postAjaxInit=true;},subscribeOnSignIn:function(){var u=this;u.dom.load();var v=u.dom.signInLabels,t=u.dom.signInEmail.val(),l=u.dom.signInIframeTarget,s=u.config;for(var o in s.subscribeList){s.subscribeList[o]=[];}G(".subIframe").remove();v.each(function(){var z=G(this).find("input"),w;w=z.attr("id").split("_");if(z[0].checked==true){s.subscribeList[s.idRealms[w[0]]].push(w[1]);}});var m=(function(){var w=location.host.split(".");w.pop();w.pop();return w.join(".");})();for(var r in s.subscribeList){if(s.subscribeList[r].length!=0){var q=s.subscribeList[r].join(","),k=[s.iframeUrl.replace("$",m),s.sub,s.email+t,s.listId+q,s.r+r,s.cbust+V()].join("");l.append('<iframe height=0 width=0 class="subIframe" src="'+k+'"></iframe>');}}I.buffer.push("newsletterSub");},updateSubscribeState:function(){var m=this;scrollTo(0,1070);this.dom.load();var m=this,l=m.dom.newsList,k=m.config;l.each(function(){var t=G(this).find("input"),s;s=t.attr("id").split("_");var r=k.idRealms[s[0]];if(k.subscribeList[r].length!=0){for(var q=0,o=k.subscribeList[r].length;q<o;q+=1){if(s[1]==k.subscribeList[r][q]){t[0].checked=true;}}}});m.setEventListener(true);},setEventListener:function(r){var s=this,m=s.dom.newsList,k=s.config,q;if(r||!N._NewsletterBindings){q=N._NewsletterBindings={original:{},subscribe:{},unsubscribe:{}};}else{q=N._NewsletterBindings;}var o=function(w,u){var v=[];for(var t=0;t<u.length;t++){if(u[t]!==w){v.push(u[t]);}}return v;};var l=function(AC,z,v){var AA=AC.split("_"),u=AA[0],AB=AA[1],t=(k.idRealms[u])?k.idRealms[u]:false;if(t){if(!q.subscribe[t]){q.original[t]=[];q.subscribe[t]=[];q.unsubscribe[t]=[];}if(!v&&z){if(z&&q.subscribe[t].indexOf(AB)===-1){q.original[t].push(AB);}}else{if(v){var w=(q.original[t].indexOf(AB)>-1)?true:false;if(z){if(!w){q.subscribe[t].push(AB);}else{if(q.unsubscribe[t].indexOf(AB)>-1){q.unsubscribe[t]=o(AB,q.unsubscribe[t]);}}}else{if(w){if(q.subscribe[t].indexOf(AB)>-1){q.subscribe[t]=o(AB,q.subscribe[t]);}if(q.unsubscribe[t].indexOf(AB)===-1){q.unsubscribe[t].push(AB);}}else{if(q.subscribe[t].indexOf(AB)>-1){q.subscribe[t]=o(AB,q.subscribe[t]);}}}}}}};m.each(function(){var u=G(this),t=u.find("input"),v=t.attr("id");if(!u.data("_bindings")||r){u.data("_bindings",true);l(v,(t.is(":checked"))?true:false);t.unbind("change").bind("change",function(){l(v,(t.is(":checked"))?true:false,true);});}});}};P=function(){var k=this;k.defaultDom();};e={config:{url:j.ureport.url,token:"&token=",email:"&email=",user:"&username=",logout:"http://quote.foxbusiness.com/loggedout",watchList:"http://www.foxbusiness.com/investing/tools/stock-watchlist",portFolio:"http://www.foxbusiness.com/investing/tools/stock-portfolio"},domSet:function(){var m=G("#mod-portfolio-watchlist"),l=G(".section-mod").find(".authentication"),k=l.find(".auth-new"),o=m.find("li:eq(0) > .photo "),t=m.find("li:eq(1) > .photo "),v=G("#investment-tracker"),r=v.find(".auth-new"),s=G(".dv-feature-9.m-14"),q=s.find("li:eq(0)"),u=s.find("li:eq(1)");return{wAndP:m,auth:l,theW:o,theP:t,authM:v,aW:q,aP:u,lCNA:k,mCNA:r};},domBehaviorLogin:function(){var k=this;var l=k.domSet();l.auth.hide();l.authM.hide();G("#mod-portfolio-watchlist .content > ul > li .photo a").unbind("click");if(l.theW.size()>0){l.theW.unbind("click").bind("click",function(m){N.location.href=k.config.watchList;m.preventDefault();});l.theP.unbind("click").bind("click",function(m){N.location.href=k.config.portFolio;m.preventDefault();});}if(l.aW.size()>0){l.aW.unbind("click").bind("click",function(m){N.location.href=k.config.watchList;m.preventDefault();});l.aP.unbind("click").bind("click",function(m){N.location.href=k.config.portFolio;m.preventDefault();});}},domBehaviorLogout:function(){var k=this;var l=k.domSet();l.auth.show();l.authM.show();if(l.theW.size()>0){l.theW.unbind("click").bind("click",function(m){janrain.capture.ui.renderScreen("signIn");m.preventDefault();});l.theP.unbind("click").bind("click",function(m){janrain.capture.ui.renderScreen("signIn");m.preventDefault();});}if(l.aW.size()>0){l.aW.unbind("click").bind("click",function(m){janrain.capture.ui.renderScreen("signIn");m.preventDefault();});l.aP.unbind("click").bind("click",function(m){janrain.capture.ui.renderScreen("signIn");m.preventDefault();});}},defaultDom:function(){var k=this;var l=k.domSet();l.lCNA.unbind("click").bind("click",function(m){janrain.capture.ui.renderScreen("signIn");m.preventDefault();});l.mCNA.unbind("click").bind("click",function(m){janrain.capture.ui.renderScreen("signIn");m.preventDefault();});},idmsLogin:function(o,m,r){if(!f("foxbusiness")){return false;}var q=this,k="FOX_ureport_SABRE",l=q.config;if(G.cookie("p_IDMS")!=null){q.domBehaviorLogin();return false;}N[k]=function(s){G.cookie("p_IDMS",s.idms,{path:"/",domain:"foxbusiness.com"});q.domBehaviorLogin();};G.ajax({url:l.url+k+l.token+o+l.email+m+l.user+r,async:true,cache:true,dataType:"script"});},idmsLogout:function(){var k=this;if(G.cookie("p_IDMS")!=null){k.clearIdmsCookie();k.domBehaviorLogout();if(N.location.pathname.indexOf("stock-watchlist")>1||N.location.pathname.indexOf("stock-portfolio")>1){setTimeout(function(){N.location.reload();},3000);}}},clearIdmsCookie:function(){G.cookie("p_IDMS",null);G.cookie("p_IDMS",null,{path:"/"});G.cookie("p_IDMS",null,{path:"/",domain:"foxbusiness.com"});}};E=function(){};T={networkShareSuccess:function(){G.ad.track({"network-share-success":{}});},emailShareSuccess:function(){G.ad.track({"email-share-success":{}});},networkShareStart:function(){G.ad.track({"network-share-start":{}});},emailShareStart:function(){G.ad.track({"email-share-start":{}});},registrationStart:function(){G.ad.track({"registration-start":{}});},registrationComplete:function(){G.ad.track({"registration-complete":{}});},logins:function(){G.ad.track({logins:{}});},profileUpdates:function(){G.ad.track({"profile-updates":{}});},fbShare:function(){G.ad.track({"fb-share":{}});},twttrFollow:function(){G.ad.track({"twttr-follow":{}});},commentPost:function(){G.ad.track({"comment-post":{}});},commentLoad:function(){G.ad.track({"comment-load":{}});},commentRead:function(){G.ad.track({"comment-read":{}});}};Z=function(){};H={data:{body:{listener:null}},domEvents:{loginSuccess:function(){var k=R.setDomReady;AUTH_Manager.onReady("livefyre",function(){setTimeout(function(){g.API.onLoginSuccessFromJanrain();},500);});if(N.AUTH_LoginState){AUTH_LoginState.trigger("onLogin");}k.acc.css({visibility:"visible",display:"block"});k.acc.removeClass("none");k.hasAccount.css({display:"block"});k.noAccount.css({display:"none"});},logoutSuccess:function(){var k=R.setDomReady;if(N.AUTH_LoginState){AUTH_LoginState.trigger("onLogout");}k.acc.css({visibility:"visible",display:"block"});k.acc.removeClass("none");k.acc.removeClass("inactive");k.acc.removeClass("active");k.hasAccount.hide();k.noAccount.show();},editProfile:function(){var k=R.setDomReady;k.profile.bind("click",function(l){H.editProfile(l);});},tabControlsForActivityPages:function(){if(typeof N.refreshUR=="function"){N.refreshUR();}if(location.href.indexOf("tab=ureport")>-1){G(".tabs").removeClass("active");G("#ureport-pro-tab").addClass("active");G("#ureport-pro-wrap").css("display","block");G("#livefyre-wrap").css("display","none");}G("#accounts-header").find(".tabs").unbind("click");G("#accounts-header").find(".tabs").click(function(){var l=G(this),m=l.attr("id"),k=G(".wrap");k.css("display","none");G(".tabs").removeClass("active");l.addClass("active");if(m=="account-tab"){G("#account-wrap").css("display","block");}if(m=="ureport-pro-tab"){G("#ureport-pro-wrap").css("display","block");}if(m=="ureport-act-tab"){G("#livefyre-wrap").css("display","block");}});}},onLoginState:function(k){if(N.AUTH_LoginState){AUTH_LoginState.bind("onLogin",k);}},onLogoutState:function(k){if(N.AUTH_LoginState){AUTH_LoginState.bind("onLogout",k);}},accountDisplayBehaviour:function(m){var o=R.setDomReady,k;if(!o.acc.hasClass("alt-style")){o.acc.hover(function(){o.accountNav.addClass("hover");k="over;";},function(){o.accountNav.removeClass("hover");k="out";});o.accountNav.click(function(q){if(o.acc.hasClass("active")){o.acc.removeClass("active").addClass("inactive");}else{o.acc.addClass("active").removeClass("inactive");}});o.body.mousedown(function(q){if(k==="out"){if(o.acc.hasClass("active")){o.acc.removeClass("active").addClass("inactive");}}});}else{var l=o.acc.find(".user-options >ul>li:eq(0) > a");if(l.size()>0){l.click(function(){H.editProfile();});}}o.uReport().redBtn.bind("click",function(q){if(b.API.token===""){H.janrain.signin();return false;}});H.domEvents.editProfile();},janrain:{signin:function(){N.janrain.capture.ui.renderScreen("signIn");return false;},traditionalSigin:function(){janrain.capture.ui.modal.open("traditionalRegistration");return false;},traditionalDisplayName:function(k){var l=k.displayName,m=document.getElementById("displayNameData");if(l&&m){m.innerHTML=l;}},getJanrainUserAPI:function(l,k){b.API.execute(l,k);},signOut:function(){janrain.capture.ui.endCaptureSession();N.Backplane.expectMessages("identity/logout");},registrationStart:function(){T.registrationStart();},successfulRegistration:function(l){B.subscribeOnSignIn();b.API.token=l.accessToken;if(l&&l.action==="socialRegister"){var k="JANRAIN_socialAvatarUpdate",m="https://signin.foxnews.com/entity.update?type_name=user&access_token="+l.accessToken+"&attribute_name=photo_approval_status&value=%22approved%22&jsonp="+k;if(typeof N[k]!=="function"){N[k]=function(o){if(o.stat==="ok"){g.API.onProfileUpdate();}else{}};}G.ajax({url:m,dataType:"script",async:true,cache:true});}janrain.capture.ui.createCaptureSession(l.accessToken);N.Backplane.expectMessages("identity/login");b.session=true;b.sessionType="register";H.domEvents.loginSuccess();H.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:l.accessToken});I.events.chatCheck();T.registrationComplete();if(!l.renders){janrain.capture.ui.modal.close();}},successfulLogin:function(k){janrain.capture.ui.modal.close();janrain.capture.ui.createCaptureSession(k.accessToken);N.Backplane.expectMessages("identity/login");b.session=true;b.sessionType="signin";H.janrain.screen.editProfile.reloadProfile();H.domEvents.loginSuccess();b.API.token=k.accessToken;H.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:k.accessToken});if(N.FOX_Janrain_Page_Type==="password-reset"){setTimeout(function(){N.location="http://www.foxnews.com/community/user/profile/edit";},10000);}T.logins();I.buffer.push("returnEightPerMonth");I.events.chatCheck();},sessionFound:function(k){if(!b.API.requestSent){janrain.capture.ui.createCaptureSession(k.accessToken);H.domEvents.loginSuccess();b.API.token=k.accessToken;N.Backplane.expectMessages("identity/login");H.janrain.getJanrainUserAPI("entity",{type_name:"user",access_token:k.accessToken});b.session=true;b.sessionType="found";I.events.chatCheck();}},sessionNotFound:function(k){H.domEvents.logoutSuccess();b.session=false;b.sessionType="notfound";if(f("ureport")){O.uLogout();}if(f("foxbusiness")){e.idmsLogout();}},sessionEnded:function(){if(f("ureport")){O.uLogout();}b.session=false;b.sessionType="logout";try{if(fyre!=="undefined"&&fyre!=null){fyre.conv.BackplaneAuthDelegate.prototype.logout();}}catch(k){}I.events.unsubscribe();H.domEvents.logoutSuccess();e.idmsLogout();},sessionCreated:function(k){},tokenRefreshed:function(){},tokenExpired:function(k){H.janrain.signOut();},accessDenied:function(){setTimeout(function(){janrain.capture.ui.renderScreen("signIn");},1000);},onAuthWidgetLoad:function(k){},onRefreshToken:function(k){janrain.capture.ui.createCaptureSession(k.accessToken);b.API.token=k.accessToken;},backplaneReady:function(k){AUTH_Manager.fireReady("backplane");if(G.browser.msie&&parseInt(G.browser.version,10)<=7){var l=G(".comments");if(l.size()>0){l.remove();}G("#livefyre_comment_stream").html("<p>To participate in commenting, please use Internet Explorer 8 or above.</p>");}else{g.init();}G(N).trigger("janrainShareInit");},displayPublicProfile:function(k){S.userLivefyre.lookUpUUID=k;janrain.capture.ui.getPublicProfile("publicProfile",k);},screen:{currentScreen:null,stateLookUp:true,postAjaxInit:false,failedToUpdate:null,stateOfEditProfile:false,editProfile:{reloadProfile:function(){if(Y.janrainFlow==="profileFlow"){G("#captureAccessDeniedBuiltIn").remove();janrain.capture.ui.renderScreen("editProfile");}},onProfileUpdate:function(k){N.scrollTo(0,0);g.API.onProfileUpdate();B.updateSub();H.janrain.screen.failedToUpdate=false;T.profileUpdates();H.janrain.screen.editProfile.completedProfileCheck();},onProfileAutoSave:function(k){if("durationSinceLastUpdate" in k){document.getElementById("capture_profile_saved").style.display="block";document.getElementById("capture_alert_callout").innerHTML=k.durationSinceLastUpdate;}},completedProfileCheck:function(){var m=false,k=G("#capture_editProfile_edit_zip").attr("value"),o=G("#capture_editProfile_edit_city").attr("value"),q=G("#capture_editProfile_edit_firstName").attr("value"),s=G("#capture_editProfile_edit_email").attr("value"),t=G("#capture_editProfile_edit_gender").attr("value"),l=G("#capture_editProfile_edit_country").find("option:selected").attr("value"),u=G("#capture_editProfile_edit_address1").attr("value"),r=G("#capture_editProfile_edit_lastName").attr("value");if(q!==""&&r!==""&&s!==""&&l!==""&&u!==""&&o!==""&&k!==""&&t!=="default"&&q!==" "&&r!==" "&&s!==" "&&u!==" "&&o!==" "&&k!==" "){I.trigger("completeProfile",S.uuid);}else{}},onProfileFailedSave:function(){H.janrain.screen.failedToUpdate=true;}},registration:{clearInput:function(){}},uiReady:function(){if(Y.janrainFlow==="profileFlow"){janrain.capture.ui.renderScreen("editProfile");}else{if(Y.janrainFlow==="emailFlow"){janrain.capture.ui.renderScreen("registrationVerify");}else{if(Y.janrainFlow==="passwordFlow"){janrain.capture.ui.renderScreen("resetPassword");}}}},onScreenShow:function(l){var q=H.janrain.screen;switch(l.screen){case"editProfile":q.currentScreen="editProfile";G("#captureRetrievingUserDataBuiltIn").hide();var k=false;setTimeout(function(){G(".cancel-button").click(function(){if(N.location.href.indexOf("#")>1){N.history.go(-2);}else{N.history.go(-1);}});function AE(AF,AG,AH){if(AF==null){return false;}if(typeof N.attachEvent==="object"){AF.attachEvent("on"+AG,AH);}else{AF.addEventListener(AG,AH,false);}}var v=document.getElementById("capture_editProfile_edit_country"),w=G("#capture_editProfile_edit_state"),AD=G("#capture_editProfile_display_indicator_public_edit_state"),u=G("#capture_editProfile_display_indicator_private_edit_state"),AA=G("#capture_editProfile_display_option_public_edit_state"),AC=G("#capture_editProfile_display_option_private_edit_state"),z=G("#capture_editProfile_form_item_edit_state").find("input");function AB(){if(!v||!w){return false;}var AF=w.find("option:selected").attr("value");if(v.options[v.selectedIndex].value==="United States"){if(w){if(w.attr("disabled")&&AF!=="state"){AD.removeClass("capture_toggled");u.addClass("capture_toggled");AA.removeClass("capture_checked");AC.addClass("capture_checked");z.attr("value","private");w.attr("disabled",false);w.css({color:"black"});}else{if(w.attr("disabled")&&AF==="state"){w.attr("disabled",false);w.css({color:"black"});}}}}else{if(w){z.attr("value","private");w.attr("disabled",true);w.css({color:"lightgrey"});AD.removeClass("capture_toggled");u.addClass("capture_toggled");AA.removeClass("capture_checked");AC.addClass("capture_checked");}}}if(v&&!k){k=true;AE(v,"change",AB);}AB();},100);try{var t,o=G(".janrain_traditional_account_only");if(typeof N.localStorage!=="undefined"){t=localStorage.getItem("janrainLastAuthMethod");s();}else{t=G.cookie("janrainLastAuthMethod");s();}function s(){if(t==="socialSignin"&&o.size()>0){o.remove();}}}catch(r){}break;case"publicProfile":var m=G(".make-acc");if(!b.session){m.show();}else{m.hide();}break;case"forgotPasswordSuccess":if(N.FOX_Janrain_Page_Type==="password-reset"){setTimeout(function(){N.location="http://www.foxnews.com";},5000);}break;case"returnTraditional":setTimeout(function(){var u=janrain.capture.ui.getProfileCookieData("displayName"),v=document.getElementById("displayNameData");if(u&&v){v.innerHTML=u;}},500);break;case"registrationVerified":setTimeout(function(){N.location="http://www.foxnews.com/community/user/profile/edit";},10000);break;default:break;}},onRenderComplete:function(k){var m=H.janrain.screen;switch(k.screen){case"editProfile":if(m.stateLookUp){B.lookUpUser();}else{if(m.failedToUpdate){B.onFail();}else{B.updateSubscribeState();}}try{if(k.builtInScreenRendered==="retrievingUserData"&&k.renderingBuiltInScreen){H.janrain.screen.stateOfEditProfile=true;}else{if(H.janrain.screen.stateOfEditProfile&&m.failedToUpdate==null){O.uReportTab();g.activityTab.initCallFromJanrain();}else{if(H.janrain.screen.stateOfEditProfile&&!m.failedToUpdate){O.uReportTab();g.activityTab.loadDataWhenFailed();}else{if(H.janrain.screen.stateOfEditProfile&&m.failedToUpdate){g.activityTab.loadDataWhenFailed();}}}}}catch(o){if(H.janrain.screen.stateOfEditProfile){O.uReportTab();g.activityTab.initCallFromJanrain();}}break;case"publicProfile":if(!k.renderingBuiltInScreen){b.publicProfileLinkUUID();if("lookUpUUID" in S.userLivefyre){g.API.displayDataToPublicProfile(S.userLivefyre.lookUpUUID);}else{g.API.displayDataToPublicProfile(S.uuid);}auth_fox.ureport.uReportIdLookupAndDisplay(G(".capture_display_name").text(),true);}break;}var l=document.getElementById("capture_editProfile_resendLink");if(l){l.hasBeenClicked=false;G(l).click(function(){l.hasBeenClicked=true;});}var q=document.getElementById("forgotPassword");if(q&&q.style.display==="block"){if(b.reset){document.getElementById("capture_forgotPassword_forgotPassword_emailAddress").value="";document.getElementById("capture_forgotPassword_forgotPasswordForm_errorMessages").style.display="none";}}}},share:{shareSendComplete:function(k){T.emailShareSuccess();}},errorEvent:function(k){try{switch(k.stat){case"error":break;default:break;}}catch(l){}},onModalClose:function(){b.reset=true;},validation:{onValidationSuccess:function(){var k=document.getElementById("forgotPassword");if(k&&k.style.display==="block"){b.reset=false;}}},emailSent:function(k){var l=document.getElementById("capture_editProfile_resendLink"),m=G(l).parent();if(l.hasBeenClicked===true){m[0].removeChild(l);m.append('<a style="cursor: default; ">Email Sent</a>');}}},livefyre:{displayLogo:function(){G("#livefyre_comment_stream").append('<div id="powered_by_livefyre_new"><a href="http://livefyre.com" target="_blank">Powered by Livefyre</a></div> ');},hashComment:function(){var m;try{if(N.FOX_metadescriptor&&N.FOX_metadescriptor.name["prism.subsection1"]==="willisreport"){G("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>');}else{if(N.location.host.indexOf("nation")>-1||G('meta[name="dc.type"]').attr("content")==="Text.Article"){var o=G(".dv-util > .dv-util-1 > a:eq(1)"),l=o.attr("href");l=l.replace("#disqus_thread","#commentsthread");o.attr("href",l);G("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>');}else{G("#livefyre_comment_stream").prepend('<div id="commentsthread"></div>');}}}catch(k){}},logOut:function(){G.loadAttempt(60,250,function(){return(G("#livefyre_comment_stream").find(".fyre-user-loggedin").size()>0)?true:false;},function(){fyre.conv.BackplaneAuthDelegate.prototype.logout();N.Backplane.expectMessages("identity/logout");});},populatePublicProfile:function(){var k=R.setDomReady.publicProfile();k.comments.text(S.commentCount);k.likes.text(S.likeCount);S.commentCount=0;S.likeCount=0;}},badgeVille:{backplane:function(){}},displayName:function(){var k=this,l=R.setDomReady;if(l.acc.hasClass("alt-style")){l.user.find(".encapsulate p").html("Welcome, <strong>"+S.displayName+"</strong>");}else{if(l.name.size()>0){l.name.text(S.displayName);}else{if(auth_fox.dom.setDomReady.userOptions.find("p").size()>0){auth_fox.dom.setDomReady.userOptions.find("p").html("You're logged in as<span>"+S.displayName+"</span>");}}}H.domEvents.loginSuccess();},accountFuncBehaviour:function(){var l=R.setDomReady,k=this;l.login.addClass(Y.classLogin);l.login.bind("click",H.janrain.signin);l.register.bind("click",H.janrain.traditionalSigin);l.logout.bind("click",H.janrain.signOut);},editProfile:function(k){N.location=j.editProfile;},displayShowsProfile:function(){var k=R.setDomReady.acc.find("strong");k.css("cursor","pointer");k.click(function(){H.editProfile();return false;});}};D=function(){};S={uuid:null,email:"",likeCount:0,commentCount:0,displayName:"",userJanrain:{},userLivefyre:{},userBadgeville:{}};var A=(function(){var k=function(){this.setDependencies();this.set();};k.prototype.set=function(){Y.janrainFlow=(function(){var s="authFlow",r=(N.FOX_Janrain_Page_Type)?N.FOX_Janrain_Page_Type:false;switch(r){case"logout":s="logoutFlow";break;case"email-verification":s="emailFlow";break;case"edit-profile":s="profileFlow";break;case"password-reset":s="passwordFlow";break;case"public-profile":s="publicFlow";break;default:s="authFlow";break;}return s;}());var l=[["tools",W,F],["dom",R,C],["require",Y,K],["backplane",J,d],["janrain",b,M],["livefyre",g,Q],["badgeville",I,a],["events",H,Z],["ureport",O,h],["user",S,D],["omniture",T,E],["whatcounts",B,U],["idms",e,P]];var o=new X(l),q;N.auth_fox=o;var m=function(){o.require.loadTemplate();o.events.accountDisplayBehaviour();o.events.accountFuncBehaviour();};if(typeof o.dom.setDomReady==="object"){q=o.dom.setDomReady;m();}else{q=o.dom.setDomReady(function(r){R.setDomReady=r;m();});}if(o.require.janrainFlow==="publicFlow"){o.livefyre.activityTab.tabActivity();auth_fox.livefyre.activityTab.hashTagGatherer().getPhotosAndId();auth_fox.ureport.uReportIdLookupAndDisplay(location.href.split("#")[1]);}};k.prototype.setDependencies=function(){N.AUTH_Manager=new FOX_DependencyManager();AUTH_Manager.addInstance("janrain",["janrain"]);AUTH_Manager.addInstance("capture",["janrain","capture"]);AUTH_Manager.addInstance("livefyre",["janrain","backplane","livefyre"]);AUTH_Manager.addInstance("backplane",["backplane"]);G.loadAttempt(60,500,function(){return(N.fyre&&G("#livefyre_comment_stream .fyre-widget").size()>0)?true:false;},function(){AUTH_Manager.fireReady("livefyre");});AUTH_Manager.onReady("livefyre",function(){L("********** LIVEFYRE IS READY !!! **********");});AUTH_Manager.onReady("janrain",function(){L("********** JANRAIN IS READY !!! **********");});AUTH_Manager.onReady("backplane",function(){L("********** BACKPLANE IS READY !!! **********");});AUTH_Manager.onReady("capture",function(){L("********** CAPTURE IS READY !!! **********");});if(N.CallStackTrigger){N.AUTH_LoginState=new CallStackTrigger();AUTH_LoginState.bind("onLogin",function(){L("[AUTH_LoginState] 'onLogin' triggered.");});AUTH_LoginState.bind("onLogout",function(){L("[AUTH_LoginState] 'onLogout' triggered.");});}};return k;}());if(!G.loadAttempt){(function(){function l(m){return typeof m==="function"?!0:!1;}var k=function(){var t,m=arguments;if(m.length===0){return !1;}var o={attempt:0,timeout:500};if(m.length===1&&typeof m[0]==="object"){for(t in m[0]){o[t]=m[0][t];}if(o.callback){t=o.callback;}else{return !1;}if(!t.check||!t.success){return !1;}else{o._check=t.check,o._success=t.success;}if(t.timedOut){o._timeout=t.timedOut;}}else{if(!isNaN(m[0])&&!isNaN(m[1])&&l(m[2])&&l(m[3])){o.attempt=m[0];o.timeout=m[1];o._check=m[2];o._success=m[3];if(m[4]){o._timeout=m[4];}if(m[5]){o._abort=m[5];}}else{if(l(m[0])&&l(m[1])){o._check=m[0];o._success=m[1];if(m[2]){o._timeout=m[2];}if(m[3]){o._abort=m[3];}}else{return !1;}}}if(!l(o._check)||!l(o._success)){return !1;}if(!l(o._timeout)){o._timeout=function(){};}if(isNaN(o.timeout)){return !1;}else{o.timeout=parseInt(o.timeout,10);}if(isNaN(o.attempt)){return !1;}else{o.attempt=parseInt(o.attempt,10);}var s=!1,q=!1;if(o.attempt&&o.timeout){var r=function(){q?clearTimeout(s):o._check()?(o._success(),clearTimeout(s)):o.attempt>0?s=setTimeout(function(){r();},o.timeout):o._timeout();o.attempt--;};r();}else{s=setInterval(function(){q?clearInterval(s):o._check()&&(o._success(),clearInterval(s));},o.timeout);}return{abort:function(){q=!0;}};};if(typeof jQuery!=="undefined"&&jQuery.extend&&!jQuery.loadAttempt){jQuery.extend({loadAttempt:k});}else{if(!N.loadAttempt){N.loadAttempt=k;}}})();}function V(q,o){q=q||2;var k=new Date();o=k.getMilliseconds()||"";var r=k.getFullYear().toString()+(k.getMonth()+1).toString()+k.getDate().toString()+o,m=k.getHours()+1,l=k.getMinutes();r+=m.toString()+((q&&!isNaN(q))?(Math.floor(l/parseInt(q,10))).toString():"");return r;}return A;})(jQuery,window);(function(D,C){D(document).ready(function(){var G=(C.auth_fox&&C.auth_fox.whatcounts&&C.auth_fox.whatcounts.janrainNewsAlerts)?true:false;if(!G){return false;}D("#newsletter_form, #rss_newsletter_form").each(function(){var H=D(this);H.find('input[name="submit"]').click(function(){var J=(H.find("#newsletter_input").size()>-1)?H.find("#newsletter_input").val():H.find("#newsletter_email").val();if(D('input:[name="propID_terms"]').size()>0){var I=[];H.find(".option").each(function(){if(D(this).find('input:[name="propID_terms"]').is(":checked")){I.push(D(this).find('input:[name="slid"]').val());}});}else{var I=H.find("#newsletter_slid").val(),J=H.find("#newsletter_email").val();}auth_fox.whatcounts.janrainNewsAlerts(I,J);});});D(function(){D("#newsAlertsEmailSignup.component").each(function(){var H=D(this);FNHPtoSLIDS={BreakingNews:"C2F278094FACCEA62391025B7A52D8EB",BusinessNews:"5C84B893BD6D939E84FAE1A8E6E9525A",GretaWire:"D98A625593049BD23B5BE4FDF9C2351F",DailyNewsletter:"3DC725E303A24F8DA102192D9D5143D9",BestOfBusiness:"3DC725E303A24F8D39740C7B45D15F45",TopHeadlines:"3DC725E303A24F8DB05092D232355E43",MonthlyPolitics:"3DC725E303A24F8D836CEAE9B885C87D",LeisureLedger:"3DC725E303A24F8D02B1F9D9AAF16982",Fox411:"3DC725E303A24F8D9C92271F5026F381",BestOfOpinion:"3DC725E303A24F8D39740C7B45D15F45",SciTechGeekSheet:"3DC725E303A24F8DAB69E1C048904762"},H.find('input[name="submit"]').click(function(){var J=H.find('input:[name="email"]').val();if(D('input:[name="propID_terms"]').size()>-1){var I=[];H.find(".option").each(function(){var K=D(this).find('input:[name="propID_terms"]');if(K.is(":checked")){I.push(FNHPtoSLIDS[K.attr("id")]);}});}auth_fox.whatcounts.janrainNewsAlerts(I,J);});});});});var F,A,E;C.janrainShareOnload=function(){C.janrainShareLoaded=true;D(C).trigger("janrainShareModuleInit");};var B={domain:function(){return false;},meta:function(G,H){if(H==="prop"){H="property";}return D("meta["+H+'="'+G+'"]').attr("content");},metadata:function(K){var G=K.split("::"),I=G[0],J=G[1],H=G[2];return(B.meta(J,I)===H)?true:false;},trim:function(H,G){if(H.length>G){H=H.substring(0,G)+" ...";}return H;},isDevice:function(){var G=false;G=("createTouch" in document)?true:false;G=(!G&&navigator.userAgent.match(/BlackBerry/i))?true:G;return G;}};A=function(){var G=this;this.ready=false;if(C.janrainShareLoaded){this.init();}else{D(C).bind("janrainShareModuleInit",function(){G.init();});}};A.prototype={init:function(){this.ready=true;this.janrain=C.janrain;this.setCallbacks();this.setTemplates();this.articleObj={};},setCallbacks:function(){var I=this.janrain,H=this.resetEmail,G=this;G.responseProvider=null;I.events.onShareLoginStart.addHandler(H);I.events.onShareLoginCancel.addHandler(H);I.events.onShareLoginError.addHandler(H);I.events.onShareSendStart.addHandler(function(J){if(C.auth_fox){if(J.provider==="facebook"){C.auth_fox.omniture.networkShareSuccess();G.responseProvider="facebook";}else{if(J.provider==="twitter"){C.auth_fox.omniture.networkShareSuccess();G.responseProvider="twitter";}else{if(J.provider==="linkedin"){C.auth_fox.omniture.networkShareSuccess();G.responseProvider="linkedin";}else{if(J.mode!=="email"){C.auth_fox.omniture.networkShareSuccess();}else{if(J.mode==="email"){C.auth_fox.omniture.emailShareSuccess();G.responseProvider="email";}}}}}}});I.events.onShareSendComplete.addHandler(function(J){switch(G.responseProvider){case"facebook":D("#janrain-share-providerpage-facebook").find("span.janrain-share-login-button-text").text("Shared on Facebook");break;case"twitter":D("#janrain-share-providerpage-twitter").find("span.janrain-share-login-button-text").text("Shared on Twitter");break;case"linkedin":D("#janrain-share-providerpage-linkedin").find("span.janrain-share-login-button-text").text("Shared on LinkedIn");break;default:D("#janrain-share-providerpage-email").find("span.janrain-share-login-button-text").text("Shared by Email");break;}auth_fox.badgeville.trigger("contentShare",G.articleObj.title);auth_fox.janrain.API.update("entity.update",auth_fox.janrain.API.updateAPI("share"));});},setTemplates:function(){D(".janrain-share-input").attr("placeholder","Write your message");D(".janrain-share-contactadd-input-placeholder").attr("placeholder","Add a contact");D(".janrain-share-contact-input-placeholder").attr("placeholder","Type contact name");D(".janrain-share-bubble").remove();D(".janrain-share-login-prefs-name").remove();D(".janrain_modal_closebutton").attr("href","javascript:;");this.resetEmail();},show:function(J,I,G){var L=this.janrain;var H=I.provider;var K=I.data;this.articleObj=I.data;L.engage.share.show();L.engage.share.setOrientation("landscape");L.engage.share.setTitle(K.title);L.engage.share.setUrl(K.linkBack);L.engage.share.setActionLink({name:"Read more",link:K.actLink});L.engage.share.setImage(K.image);L.engage.share.setDescription(K.desc);L.engage.share.showProvider(H);this.formatPreviewText({title:K.title,desc:K.desc,url:K.actLink});},resetEmail:function(){D(".janrain-share-login-messageemail, .janrain-share-login-messageemailshort").remove();D("#janrain-share-login-button-contact-email-yahoo .janrain-share-login-button-text").text("Yahoo");D("#janrain-share-login-button-contact-email-google .janrain-share-login-button-text").text("Google");},formatPreviewText:function(G){D(".janrain-share-preview-title").text(B.trim(G.title,70));D(".janrain-share-preview-url").text(B.trim(G.url,40));D(".janrain-share-preview-description").text(B.trim(G.desc,130));}};F=function(G){this.cfg=G;this.plugin=G.plugin;};F.prototype={set:function(J,I,G){var H=this,J=D(J);if(B.isDevice()){return J.hide();}J.unbind("click").bind("click",function(K){H.show(K,I,G);return false;});},reset:function(K,J,H){var I=this,K=D(K),G=J.data;if(B.isDevice()){return K.hide();}K.unbind("click").bind("click",function(L){J.data=G(L);I.show(L,J,H);return false;});},setLive:function(K,J,H){var I=this,K=D(K),G=J.data;if(B.isDevice()){return K.hide();}K.unbind("click").live("click",function(L){J.data=G(L);I.show(L,J,H);return false;});},show:function(J,I,G){var H=this.plugin;if(I.provider==="email"){C.auth_fox.omniture.emailShareStart();}else{C.auth_fox.omniture.networkShareStart();}H.show(J,I,G);return false;},showShare:function(H){var G=this.plugin;if(H.provider==="email"){C.auth_fox.omniture.emailShareStart();}else{C.auth_fox.omniture.networkShareStart();}G.show(null,H,null);return false;},hide:function(I,H,G){}};E=function(){var I={},H=B.meta,G=function(J,K){I[J]=K;};G("v8-article",function(){var M=D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var K=D("link[rel='image_src']").attr("href")||H("og:image","prop")||parsers.defaultImg.v8Article;var L=D((C.vcmArticleInfo&&vcmArticleInfo.summary)?vcmArticleInfo.summary:"<div></div>").text()||H("description","name")||H("dc.description","name");var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N;}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("recipe-article",function(){var M=D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var K=D("link[rel='image_src']").attr("href")||H("og:image","prop")||parsers.defaultImg.v8Article;var L=H("description","name")||H("dc.description","name");var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N;}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("nation-article",function(){var M=D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var K=D("link[rel='image_src']").attr("href")||H("og:image","prop")||parsers.defaultImg.v8Article;var L=H("description","name")||H("dc.description","name");var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N;}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("nation-front",function(){return function(K){var P,N,O,L,M;var J=D(K.currentTarget).parentsUntil("li");J.find("img.m-1").each(function(){N=("http://"+C.location.host+D(this).attr("src"))||H("og:image","prop");});J.find(".a-3").each(function(){var Q=D(this);P=D(this).text();O="America's Talking - All Opinions Welcome. Let your voice be heard @ FoxNation.com.";L=M=Q.attr("href");});return{title:P,image:unescape(N),desc:O,userMessage:"",actLink:L,linkBack:M};};});G("drupal6-shows-article",function(){var M=D("#content-main h3 a").text()||H("dc.title","name")||H("og:title","name");var L=(function(){var N="";var O=D("#content-main .deck > p, #content-main .transcript > p").each(function(){var P=D(this);if(P.html().indexOf("<script")<0&&P.html().indexOf("<object")<0){if(N.length<360){N+=P.text();}}});if(N.length>360){N=N.substring(0,357)+"...";}return N;}());var J=linkBack=(function(){var O=C.location,N=O.protocol+"//"+O.hostname+O.pathname;N+="?cmpid=cmty_other_"+encodeURIComponent(M.replace(/\s+/gi,"_"));return N||H("og:url","prop");}());var K=(function(){var N=D("#content-main .photo > img, #content-main img.alignleft, #content-main img.alignright").attr("src");return(N?("http://"+C.location.host+N):H("og:image","prop"));}());return{title:M,image:unescape(K),desc:L,userMessage:"",actLink:J,linkBack:linkBack};});G("drupal7-shows-blog",function(){return function(O){var N=D(O.currentTarget),P=N,J=(D(".post").size()>0)?".post":"#post-detail",R=P.parentsUntil(".content",J);var Q=R.find(".twitter-tweet-rendered .entry-title").text()||R.find("h2").text()||R.find(".post-content > p").text()||R.find("#twtr-widget > p").text()||R.find("p:first").text()||D("#article-title").text()||H("og:title","prop")||H("dc.title","name");var M=R.find(".twitter-tweet-rendered .entry-title").text()||R.find(".post-content > p").text()||H("description","name")||H("dc.description","name");var S=linkBack=(function(){var U=R.find("h2");var V=R.find(".comments");var T=H("dc.type","name");if(T&&(T==="Text.Article"||T==="InteractiveResource"||T==="MovingImage")){return H("og:url","prop");}if(H("prism.subsection1","name")==="fox-files"||H("prism.subsection1","name")==="foxfriendsfirst"){return H("og:url","prop");}if(U.length>0&&H("prism.subsection1","name")==="willisreport"){return"http://"+C.location.host+U.find("a").attr("href");}if(U.length>0){return"http://"+C.location.host+U.find("a").attr("href");}if(R.length>0){return V.find("a").attr("href");}})();var K=D("link[rel='image_src']").attr("href")||H("og:image","prop");try{if(S.match(/http/)){S=(S.match(/[http\:\/\/].*?\.com(.*)/))[1];S="http://"+C.location.host+S;}}catch(L){}return{title:Q,image:unescape(K),desc:M,userMessage:"",actLink:S,linkBack:linkBack};};});G("trending-fbn",function(){return function(M){var J=D(M.currentTarget),L=J.find("span"),K=L.attr("data-url"),N=L.attr("data-title");return{title:N,image:unescape("http://global.fncstatic.com/static/v/all/img/fb_128x128.png"),desc:N,userMessage:"",actLink:K,linkBack:K};};});G("trending-fnc",function(){return function(M){var J=D(M.currentTarget),L=J.find("span"),K=L.attr("data-url"),N=L.attr("data-title");return{title:N,image:unescape("http://global.fncstatic.com/static/v/all/img/fn_128x128.png"),desc:N,userMessage:"",actLink:K,linkBack:K};};});G("classification-front",function(){return function(K){var P,N,O,L,M;var J=D(K.currentTarget).parentsUntil("ul");N=J.find(".m img").attr("src")||"";P=J.find("h3").text()||"";O=J.find(".summary").text()||"";L=M=J.find("h3 a").attr("href")||"";return{title:P,image:unescape(N),desc:O,userMessage:"",actLink:L,linkBack:M};};});return function(K){var J={};try{J=I[K]();}catch(L){}return J;};};D(function(){var N=new A();var O=new F({plugin:N});var H=new E();var K=B.metadata;C.FOX_ShareMedia=O;var G,M,L,I;var J=function(P){var Q=H(P+"-article");O.set(".share",{provider:"facebook",data:Q});O.set(".email",{provider:"email",data:Q});};G=function(){if(K("name::prism.section::nation")){var P=K;if(P("name::prism.aggregationType::root")||P("name::prism.aggregationType::front")){var S=H("nation-front");O.setLive(".fbook-1",{provider:"facebook",data:S});O.setLive(".twtr-1",{provider:"twitter",data:S});}else{if(P("name::prism.aggregationType::subsection")){var S=H("nation-article");O.set(".fbook-1",{provider:"facebook",data:S});O.set(".twtr-1",{provider:"twitter",data:S});}}}else{if(K("name::prism.aggregationType::topics")){var S=H("classification-front");O.setLive(".trending-fbk",{provider:"facebook",data:S});O.setLive(".trending-twt",{provider:"twitter",data:S});}else{if(K("name::prism.section::shows")){if(K("property::og:type::article")&&(!K("name::prism.subsection1::specialreport")&&!K("name::prism.subsection1::foxnewssunday")&&!K("name::prism.subsection1::fox-files")&&!K("name::prism.subsection1::foxfriendsfirst"))){var S=H("drupal6-shows-article");O.set(".share",{provider:"facebook",data:S});O.set(".email",{provider:"email",data:S});}if(K("name::prism.subsection1::specialreport")||K("name::prism.subsection1::foxnewssunday")||K("name::prism.subsection1::fox-files")||K("name::prism.subsection1::foxfriendsfirst")){var S=H("drupal7-shows-blog");O.reset(".date li a.facebook",{provider:"facebook",data:S});O.reset(".date li a.twitter",{provider:"twitter",data:S});if(K("name::prism.subsection1::fox-files")){O.reset("#post-detail a.share",{provider:"facebook",data:S});}}if(K("name::prism.subsection1::foxfriendsfirst")){O.reset(".post-detail a.trending-fbk",{provider:"facebook",data:S});O.reset(".post-detail a.trending-twt",{provider:"twitter",data:S});}if((K("name::prism.subsection1::specialreport")||K("name::prism.subsection1::foxnewssunday"))&&K("name::prism.subsection2::transcript")){J("v8");}}else{if(K("name::prism.subsection1::trend")){var Q=function(){D(".fbkshares").css("visibility","hidden");D(".twtshares").css("visibility","hidden");var T=H("trending-fnc");O.reset(".fbkshares",{provider:"facebook",data:T});O.reset(".twtshares",{provider:"twitter",data:T});setTimeout(function(){D(".fbkshares").css("visibility","visible").hide().fadeIn(120);D(".twtshares").css("visibility","visible").hide().fadeIn(120);},2000);};C.setupSharingLinks=function(){try{Q();}catch(T){}};try{Q();}catch(R){}}else{if(K("name::prism.section::community")&&K("name::prism.subsection1::newsletter")){C.excludeNewsletterShare=true;}else{if(K("name::prism.section::politics")&&K("name::prism.subsection1::blogs")){J("v8");}else{if(K("property::og:type::article")){J("v8");}else{if(K("name::prism.aggregationType::recipe")){J("recipe");}}}}}}}}};M=function(){if(K("property::og:type::article")&&(!K("name::prism.subsection1::willisreport"))){var R=H("drupal6-shows-article");O.set(".share",{provider:"facebook",data:R});O.set(".email",{provider:"email",data:R});}if(K("name::prism.subsection1::willisreport")){var R=H("drupal7-shows-blog");O.reset(".date li a.facebook",{provider:"facebook",data:R});O.reset(".date li a.twitter",{provider:"twitter",data:R});}else{if(K("name::prism.subsection1::trend")){var P=function(){D(".fbkshares").css("visibility","hidden");D(".twtshares").css("visibility","hidden");var S=H("trending-fbn");O.reset(".fbkshares",{provider:"facebook",data:S});O.reset(".twtshares",{provider:"twitter",data:S});setTimeout(function(){D(".fbkshares").css("visibility","visible").hide().fadeIn(120);D(".twtshares").css("visibility","visible").hide().fadeIn(120);},2000);};C.setupSharingLinks=function(){try{P();}catch(S){}};try{P();}catch(Q){}}else{if(K("property::og:type::article")){J("v8");}}}};L=function(){if(K("property::og:type::article")){J("v8");}};I=function(){if(K("property::og:type::article")){J("v8");}};if(K("name::prism.channel::fnc")){G();}if(K("name::prism.channel::fbn")){M();}if(K("name::prism.channel::fnl")){L();}if(K("name::prism.channel::fsb")){I();}});})(jQuery,window);(function($){var CONST={US_States:{AK:"Alaska",AL:"Alabama",AR:"Arkansas",AS:"American Samoa",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",FM:"Federated States of Micronesia",GA:"Georgia",GU:"Guam",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MH:"Marshall Islands",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MP:"Northern Mariana Islands",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",PW:"Palau",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VI:"Virgin Islands",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"}};function WeatherService(namespace){this.namespace=namespace;var initVars={weatherCityData:[],ACListener:{},currentLocId:"",currentCityString:"",serviceTriggered:false,UPDATE_HEADER_ACTION:"UPDATE_HEADER",SERVICE_URL_WEATHER_JSONP:"/weather/feed/getWeatherJsonP",SERVICE_URL_LOCATION_JSONP:"/weather/feed/getLocationIdJsonP",SERVICE_URL_WEATHER_HTML:"/weather/feed/getWeatherHtml",SERVICE_URL_LOCATION_REGION_JSON:"/weather/feed/getLocationRegionCodeJson",SERVICE_URL_CITY_DATA:"/weather/feed/getWeatherCityData",SERVICE_URL_MARINE_JSON:"/weather/feed/getMarineLocationsJson",SERVICE_URL_SKI_RESORTS_JSON:"/weather/feed/getSkiResortsJson",SERVICE_URL_SKI_COND_JSON:"/weather/feed/getSkiConditionJson",SERVICE_URL_AIRPORT_LOCATION_JSON:"/weather/feed/getAirportLocationIdJson",SERVICE_URL_AIRPORT_DELAY_JSON:"/weather/feed/getAirportDelayJson",PAGE_URL_YOUR_WEATHER:"/weather/your-weather/index.html",PAGE_URL_SEARCH_RESULTS:"/weather/search-results/index.html",PATH_WEATHER_ICON_IMAGE:(window.FOX_DomainPath||"")+"/static/v/all/img/weather/icons_60x60/",PATH_WEATHER_ICON_IMAGE_LARGE:(window.FOX_DomainPath||"")+"/static/v/all/img/weather/icons_96x96/",WEATHER_ICON_IMAGE_EXT:".png",WEATHER_DEFAULT_LOCATION:"USNY0996",WEATHER_COOKIE_DOMAIN:"foxnews.com",MSG_DEFAULT_ERROR:"Data unavailable. Please check back again soon.",MSG_AIRPORT_CODE_ERROR:"Please enter a valid 3- or 4-digit airport code.",MSG_AIRPORT_NOT_FOUND_ERROR:"No airport results found.  Please try again.",TXT_DEFAULT_SEARCH_FIELD:"Enter city or zip code",TXT_HEADER_SEARCH_FIELD:"Enter city or zip",TXT_AIRPORT_SEARCH_FIELD:"Enter airport code (IATA or ICAO)",LIST_SKI_CONDITIONS_ENABLED:"AK|AL|AZ|CA|CO|CT|IA|ID|IL|IN|MA|MD|ME|MI|MN|MO|MT|NC|ND|NH|NJ|NM|NV|NY|OH|OR|PA|RI|SD|TN|UT|VA|VT|WA|WI|WV|WY",LIST_MARINE_FORECAST_ENABLED:"AK|AL|AS|AZ|CA|CT|DC|DE|FL|FM|GA|GU|HI|LA|MA|MD|ME|MH|MS|NC|NJ|NY|OR|PA|PR|PW|RI|SC|TX|VA|VI|VT|WA"};var i;for(i in initVars){this[i]=initVars[i];}this.extService=new ExternalServices(this);}WeatherService.prototype={init:function(fn){var ws=this;ws.getCurrentLocation(function(data){ws.createWeatherLocationCookie(data);ws.renderWidget();if(typeof fn==="function"){fn();}});},getCurrentLocation:function(){var args=arguments,fn=false,compiled=false;if(args.length===0){return false;}else{if(args.length===1){fn=args[0];}else{compiled=(typeof args[0]==="boolean")?args[0]:false;fn=args[1];}}if(typeof fn!=="function"){return false;}var ws=this,initData='{"location":[{"loc_id":"USNY0996","zip":"10108","city":"New York","state":"NY"}]}';var trigger=function(val){val=(compiled)?ws.createObjFromJSON(val):val;fn(val);};if(ws.weatherCookie("weatherloc")){var cookie=ws.weatherCookie("weatherloc"),weatherlocObj=this.createObjFromJSON(cookie);if(!weatherlocObj||!weatherlocObj.location||!weatherlocObj.location[0].loc_id){trigger(initData);}else{trigger(cookie);}}else{if(window.CONST_Akamai_GEO&&CONST_Akamai_GEO.countryCode==="US"){ws.getGeoLocation(function(data){trigger(data||initData);});}else{trigger(initData);}}},getGeoLocation:function(fn){var ws=this,callbackFn="location_searchresults_callback_geo";var ret=function(info){if(typeof fn==="function"){fn(info);}};var zip=(function(){var obj=window.CONST_Akamai_GEO,range=obj.zipRange,zip=range.substring(0,5);return(!isNaN(zip))?zip:false;}());if(zip){ws.location_searchresults_callback_geo=function(data){ret(data);};$.ajax({url:weather_service.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:zip,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:true,cache:true});}else{ret(false);}},setExtData:function(location,info){this.extService._DataObj={location:location,info:this.createObjFromJSON(info)};this.extService.reloadWidgets();},weatherCookie:function(name,value,options){if(typeof value!=="undefined"){options=options||{};if(value===null){value="";options.expires=-1;}var expires="";if(options.expires&&(typeof options.expires==="number"||options.expires.toUTCString)){var date;if(typeof options.expires==="number"){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}expires="; expires="+date.toUTCString();}var path=options.path?"; path="+(options.path):"",domain=options.domain?"; domain="+(options.domain):"",secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("");}else{var cookieValue=null;if(document.cookie&&document.cookie!==""){var i,cookies=document.cookie.split(";");for(i=0;i<cookies.length;i++){var cookie=$.trim(cookies[i]);if(cookie.substring(0,name.length+1)===(name+"=")){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}},createWeatherDataCookie:function(locId,jsonString){var validateWeatherObj=this.createObjFromJSON(jsonString),weatherJSObj=validateWeatherObj.weatherData,city=weatherJSObj.cityName,country=weatherJSObj.country,tempHi=weatherJSObj.days[0].hi,tempLo=weatherJSObj.days[0].lo;if(validateWeatherObj&&city!==""&&country!==""){var expDate=new Date();if(tempHi===""||tempLo===""){expDate.setTime(expDate.getTime()+(60*1000));}else{expDate.setTime(expDate.getTime()+(3*60*60*1000));}this.weatherCookie("weatherdata__"+locId,jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});this.renderFavorites();}},createWeatherLocationCookie:function(jsonString){var expDate=new Date();expDate.setTime(expDate.getTime()+(1000*24*60*60*1000));this.weatherCookie("weatherloc",jsonString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});},createWeatherFavoritesCookie:function(favArray){var favLocCookieString=favArray.join("|");if(favLocCookieString!==""){var expDate=new Date();expDate.setTime(expDate.getTime()+(1000*24*60*60*1000));this.weatherCookie("weatherfavlocs",favLocCookieString,{expires:expDate,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});}else{this.weatherCookie("weatherfavlocs","",{expires:-1,path:"/",domain:this.WEATHER_COOKIE_DOMAIN});}},getWeatherDataCookie:function(locId){return this.weatherCookie("weatherdata__"+locId);},createObjFromJSON:function(jsonString){if(jsonString!==""){return eval("("+unescape(jsonString).replace(/\s+/g," ")+")");}else{return null;}},createLocJSObj:function(data){if(!data.loc_id){return null;}var i,obj={loc_id:"",city:"",zip:"",state:"",country:""};for(i in data){var val=data[i];if(i==="city"){val=val.replace("`","'");}obj[i]=val;}var fullArr=[];fullArr.push(obj.city||"");fullArr.push((obj.loc_id.substr(0,2).toUpperCase()!=="US"&&(obj.country||obj.state))?obj.country:obj.state);obj.fullCityString=fullArr.join(", ");return obj;},displayHeader:function(serviceDomain,config){var i,self=this;if(this.serviceTriggered){return false;}else{this.serviceTriggered=true;}config=(typeof config==="object")?config:{};if(typeof serviceDomain!=="undefined"){this.PAGE_URL_SEARCH_RESULTS=serviceDomain+this.PAGE_URL_SEARCH_RESULTS;this.PAGE_URL_YOUR_WEATHER=serviceDomain+this.PAGE_URL_YOUR_WEATHER;this.SERVICE_URL_LOCATION_JSONP=serviceDomain+this.SERVICE_URL_LOCATION_JSONP;this.SERVICE_URL_WEATHER_JSONP=serviceDomain+this.SERVICE_URL_WEATHER_JSONP;if(document.location.hostname.lastIndexOf(this.WEATHER_COOKIE_DOMAIN)==-1){this.WEATHER_COOKIE_DOMAIN=document.location.hostname;}}if(config){for(i in config){var val=config[i];switch(i){case"icons":if(val===24){self.PATH_WEATHER_ICON_IMAGE=self.PATH_WEATHER_ICON_IMAGE.replace("icons_60x60","icons_24x24");}break;}}}this.init();},renderWidget:function(){$("body").data("weather-rendered",true);var ws=this;ws.serviceTriggered=true;setTimeout(function(){ws.renderHeaderWeather();ws.renderHeaderLocationChange();},500);},renderHeaderWeather:function(){var ws=this;var trigger=function(){var requestedLocationObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));$(".portlet .weather.current-conditions").each(function(){ws.renderYourWeather(this,requestedLocationObj.location[0].loc_id,"weather_current");});};if(this.weatherCookie("weatherloc")){var weatherlocObj=this.createObjFromJSON(this.weatherCookie("weatherloc"));var locObject=this.createLocJSObj(weatherlocObj.location[0]);if(this.getWeatherDataCookie(locObject.loc_id)){this.headerDisplayAction(locObject.loc_id);ws.setExtData(locObject,this.getWeatherDataCookie(locObject.loc_id));ws.renderWeatherWidget(locObject.loc_id);}else{this.fetchAndSaveWeatherJSONCookie(locObject.loc_id);}trigger();}else{this.init(function(){var weatherlocObj=ws.createObjFromJSON(ws.weatherCookie("weatherloc"));ws.fetchAndSaveWeatherJSONCookie(weatherlocObj.location[0].loc_id);trigger();});}},renderRightRailSearch:function(){var topRightRailHtml="<ul>"+this.generateRightRailSearch("yourweather")+"</ul>";document.write(topRightRailHtml);},generateRightRailSearch:function(ac_results_css_appendix){var ws=this,searchField="weatherInput_"+ac_results_css_appendix,rightRailHTML='<li><form method="get" action="'+ws.PAGE_URL_SEARCH_RESULTS+'" id="weather_search_form" class="form_1" onsubmit="weather_service.locationSearchAction(this,\'#'+searchField+'\');"><fieldset class="text_box"><div class="search-input-holder"><div class="preloader-img"></div><input type="text" name="searchTerm" id="'+searchField+'" onfocus="weather_service.searchFieldOnFocus(this);" onblur="weather_service.searchFieldOnBlur(this, \''+ws.TXT_DEFAULT_SEARCH_FIELD+'\');" class="weather_city_autocomplete_'+ac_results_css_appendix+' search_input no_spon" size="50" value="'+ws.TXT_DEFAULT_SEARCH_FIELD+'" name="keys"/></div><input type="submit" class="go" value=""/></fieldset></form></li>';return rightRailHTML;},renderWeatherWidget:function(locationId){var widgetElm=$("#weather-widget");if(widgetElm.size()===0){return false;}var ws=this,headerDataCookie=this.getWeatherDataCookie(locationId),useLgIcons=(widgetElm.hasClass("use-lg-icons"))?true:false,useImgSrc=(useLgIcons)?ws.PATH_WEATHER_ICON_IMAGE_LARGE:ws.PATH_WEATHER_ICON_IMAGE;var imgDim=(function(){var sp=useImgSrc.split("/"),val=sp[sp.length-1];val=val.replace("icons_","").split("x");return val;}());if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie);var wdObj=headerDataObj.weatherData;var form=widgetElm.find("form:first");form.find("label, p.state").html(wdObj.cityName+((wdObj.stateShort.length>0)?", "+wdObj.stateShort:"")).unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);});var listElm=widgetElm.children("ul:first");listElm.children("li.section").each(function(i){var item=$(this);if(wdObj.days[i]){var dataSource=wdObj.days[i];var imgSrc=useImgSrc+dataSource.image+ws.WEATHER_ICON_IMAGE_EXT;var hiTemp=dataSource.hi;var lowTemp=dataSource.lo;if(i===0){item.find(".current").html(wdObj.currentTemp+"&#176;");}if(item.find(".media img").size()===0){item.find(".media").html("<img />");}item.find(".media img").css({width:imgDim[0]+"px",height:imgDim[1]+"px"}).each(function(){var elm=$(this);elm.css({opacity:"0",display:"inline"});if(!$.browser.opera){var img=new Image();img.onload=function(){elm.attr("src",imgSrc);animateFn.show(elm,{speed:300,type:"swing"});};img.src=imgSrc;}else{elm.css({backgroundImage:"none",display:"inline",opacity:"0"});elm.attr({src:imgSrc});animateFn.show(elm,{speed:300,type:"linear"});}});var hiLow="Hi "+((hiTemp.length>0)?hiTemp+"&#176;":"-")+" | Lo "+((lowTemp.length>0)?lowTemp+"&#176;":"-");item.children("div:first").children("span").html(hiLow);item.unbind("click").click(function(){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);});}});}widgetElm.addClass("active");if(widgetElm.data("setListeners")){return false;}widgetElm.data("setListeners",true);widgetElm.find("form:first").each(function(){var timeout,form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value"),overSearch=true;search.focus(function(){var elm=$(this),val=elm.val();elm.data("currVal",val);elm.val("");}).blur(function(){var elm=$(this),val=elm.attr("value");elm.val((val==="")?elm.data("currVal"):val);});form.hover(function(){overSearch=true;},function(){overSearch=false;});$(document).bind("click",function(){if(!overSearch){var val=search.attr("value"),curr=search.data("currVal");if(val!==curr&&val!==txt){form.submit();}}});form.submit(function(){search.data("currVal",search.val());widgetElm.addClass("na");if(form.find("> fieldset > legend").size()>0){widgetElm.addClass("w-mod-1");}if(widgetElm.find("p.notice").size()===0){$('<p class="notice">Sorry, cannot update location at this time.</p>').insertBefore(form);}clearTimeout(timeout);timeout=setTimeout(function(){widgetElm.removeClass("na");widgetElm.removeClass("active");search.val(txt);ws.renderWidget();},10000);return false;});});},searchFieldOnFocus:function(inputField){if(inputField.value===this.TXT_DEFAULT_SEARCH_FIELD||inputField.value===this.TXT_HEADER_SEARCH_FIELD){inputField.value="";}},searchFieldOnBlur:function(inputField,message){if(inputField.value===""){inputField.value=message;}},airportSearchAction:function(airportForm,airportLocId){var ws=this,regexp=new RegExp("^[a-zA-Z]{3,4}$"),reqAC=$("#airportCode").val();if(!reqAC.match(regexp)){showToConsole(ws.MSG_AIRPORT_CODE_ERROR);return false;}$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_AIRPORT_LOCATION_JSON,data:{airportCode:reqAC,cb:cacheBuster()},success:function(data){var parsed=ws.createObjFromJSON(data);if(parsed){if(parsed.location.length>0){var airportLocObj=ws.createLocJSObj(parsed.location[0]);$(airportForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(airportLocId).attr("value",airportLocObj.loc_id);}else{showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR);return false;}}},error:function(){showToConsole(ws.MSG_AIRPORT_NOT_FOUND_ERROR);return false;}});},getSetLocationAction:function(location,callback){if(!location){return false;}var ws=this;var locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$");var upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(location)&&typeof callback==="function"){ws.fetchAndSaveWeatherJSONCookie(location,false,function(data){callback(ws.createObjFromJSON(data));});}},locationSearchAction:function(locationForm,searchInputId,action){var ws=this,locIdEx=new RegExp("^[a-zA-Z]{4}[0-9]{4}$"),upToCommaEx=new RegExp("[^,]*");if(locIdEx.exec(ws.currentLocId)){$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(searchInputId).attr("name","locId");$(searchInputId).attr("value",ws.currentLocId);if(action===ws.UPDATE_HEADER_ACTION){ws.fetchLocationJSON(ws.currentLocId,function(){ws.renderWidget();});}}else{var locSearchTerm=upToCommaEx.exec($(searchInputId).attr("value")),callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){$(locationForm).attr("action",ws.PAGE_URL_SEARCH_RESULTS);var qStr,locationJson=ws.createObjFromJSON(data);if(locationJson){if(locationJson.location.length===1){var exactMatchObj=ws.createLocJSObj(locationJson.location[0]);if(action===ws.UPDATE_HEADER_ACTION){ws.fetchLocationJSON(exactMatchObj.loc_id,function(){ws.renderWidget();});}else{$(locationForm).attr("action",ws.PAGE_URL_YOUR_WEATHER);$(searchInputId).attr("name","locId");$(searchInputId).attr("value",exactMatchObj.loc_id);}}else{qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+");window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;}}else{qStr="?"+$(searchInputId).attr("name")+"="+locSearchTerm[0].replace(/\s+/g,"+");window.location.href=ws.PAGE_URL_SEARCH_RESULTS+qStr;}};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:{zipOrLocation:locSearchTerm[0],callback:ws.namespace+"."+callbackFn,cb:cacheBuster()},dataType:"script",async:true,cache:true});}},gotoYourWeatherPage:function(locId,city,state,country){var ws=this,yourWeatherURL=ws.PAGE_URL_YOUR_WEATHER+"?locId="+locId;window.location.href=yourWeatherURL;},renderYourWeather:function(divClass,locationId,weatherView){var ws=this,feedHolder=$(divClass);if(!locationId||locationId===""){locationId=ws.WEATHER_DEFAULT_LOCATION;}$.get(ws.SERVICE_URL_WEATHER_HTML,{locationId:locationId,weatherView:weatherView},function(data){feedHolder.html(data);var weather_dayly=feedHolder.find(".weather-daily"),weather_hourly=feedHolder.find(".weather-hourly"),average_records=$(".weather.average-and-records h1"),text=average_records.text();text=text.replace("&","& ");feedHolder.find(".weather-current h1").replaceWith('<h2 class="title">Current Conditions</h2>');weather_dayly.find("h1").replaceWith('<h2 class="title">10 Day Forecast</h2>');weather_dayly.addClass("c");weather_hourly.find("h1").replaceWith('<h2 class="title">Hourly Forecast</h2>');weather_hourly.addClass("c");average_records.replaceWith('<h2 class="title">'+text+"</h2>");});},renderSearchResults:function(divClass,searchTerm){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){var searchResultsHtml="";if(data){var resultsIndex,locationJson=ws.createObjFromJSON(data);if(locationJson){if(locationJson.location.length>1){searchResultsHtml+='<p class="results">Your search for <span class="city">'+searchTerm+'</span> returned multiple locations</p><p>Please click on the location you are looking for:</p><p class="sorted">Sorted alphabetically by city, state, country<span/></p><table>';for(resultsIndex=0;resultsIndex<locationJson.location.length;resultsIndex++){var matchingLocObj=ws.createLocJSObj(locationJson.location[resultsIndex]),locationLink=ws.PAGE_URL_YOUR_WEATHER+"?locId="+matchingLocObj.loc_id;if(resultsIndex%2===0){searchResultsHtml+='<tr class="even">';}else{searchResultsHtml+="<tr>";}searchResultsHtml+='<td><a href="'+locationLink+'">'+matchingLocObj.city+"</a></td><td>"+matchingLocObj.state+"</td><td>"+matchingLocObj.country+"</td></tr>";}searchResultsHtml+="</table>";}else{if(locationJson.location.length===1){var locObj=ws.createLocJSObj(locationJson.location[0]);ws.gotoYourWeatherPage(locObj.loc_id,locObj.city,locObj.state,locObj.country);}else{searchResultsHtml+='<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>";}}}else{searchResultsHtml+=ws.MSG_DEFAULT_ERROR;}}else{searchResultsHtml+=ws.MSG_DEFAULT_ERROR;}$(divClass).html(searchResultsHtml);};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:({zipOrLocation:searchTerm,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true,error:function(){$(divClass).html('<p class="results">Sorry there are no results for <span class="city">'+searchTerm+"</span></p><p>Please try another search</p>");}});},renderAirportDelayInfo:function(divClass,airportCode){var ws=this,aCode=airportCode.toUpperCase();$.get(ws.SERVICE_URL_AIRPORT_DELAY_JSON,{airportCode:aCode},function(data){if(data){var delayIndex,delayJson=ws.createObjFromJSON(data),airportDelayHtml="";if(delayJson.delayList.length){airportDelayHtml+='<div class="delay">';for(delayIndex=0;delayIndex<delayJson.delayList.length;delayIndex++){var delayInfo=delayJson.delayList[delayIndex].delayInfo,delayReason=delayJson.delayList[delayIndex].delayReason;airportDelayHtml+='<p><img alt="Exclamation" src="'+(window.FOX_DomainPath||"")+'/static/v/all/img/exclamation.png"/>Delay Information</p><p class="information">'+delayInfo+'</p><p class="reason">Delay Reason</p><p class="information">'+delayReason+"</p>";}airportDelayHtml+="</div>";}else{airportDelayHtml+='<div class="no-delay"><p><img alt="Exclamation" src="'+(widow.FOX_DomainPath||"")+'/static/v/all/img/exclamation.png"/>Delay Information</p><p class="information">No delays at '+aCode+" reported.</p></div>";}$(divClass).html(airportDelayHtml);}});},renderMarineForecast:function(divClass){var ws=this,marineHtml="";marineHtml+='<div class="marine-search"><h2 class="title">Marine Forecast</h2><div class="location"><form action="" class="form_1" id="search_form4" method="get"><div id="marine-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="marineState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_MARINE_FORECAST_ENABLED)+'</ul></div><div class="clear"></div></div><div id="marine-cities-dropdown" class="list-type-dropdown"><p class="text title">Choose Marine Location</p><div class="drop_container holder"><input type="hidden" name="marineLocation" value="" /><p id="tide-cities-p" class="weather_dropdown current-value disabled">- select -</p><ul id="tide-cities-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="marine-result"></div>';$(divClass).html(marineHtml);$(".weather .marine-result").each(function(){ws.renderYourWeather(this,"USCA0638","weather_marine");});try{FOX.site.channel.listDropdown.init("marineState");}catch(err){}},renderTideLocationsDropdown:function(stateAbbr){var ws=this;if(stateAbbr!==""){$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_MARINE_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data,textStatus){var marineLocJson=ws.createObjFromJSON(data);if(marineLocJson){if(marineLocJson.marineLocations.length>0){ws.generateTideLocationsList(marineLocJson.marineLocations);}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}});}},generateTideLocationsList:function(locArrayObj){var i,tideLocDropdown="";if(locArrayObj!==null){for(i=0;i<locArrayObj.length;i++){var marineLocId=locArrayObj[i].loc_id,marineCity=locArrayObj[i].city;tideLocDropdown+='<li lang="'+marineLocId+'">'+marineCity+"</li>";}$("#tide-cities-list").html(tideLocDropdown);$("#tide-cities-p").removeClass("disabled");}else{tideLocDropdown+='<li lang=""></li>';$("#tide-cities-list").html(tideLocDropdown);$("#tide-cities-p").html("- select -");$("#tide-cities-p").addClass("disabled");}try{FOX.site.channel.listDropdown.init("marineCities");}catch(err){}},generateStatesList:function(statesList){var i,ws=this,listHtml="",states=statesList.split("|");for(i=0;i<states.length;i++){listHtml+='<li lang="'+states[i]+'">'+CONST.US_States[states[i]]+"</li>";}return listHtml;},renderSkiConditions:function(divClass){var ws=this,skiHtml="";skiHtml+='<div class="ski-search"><h2 class="title">Ski Conditions</h2><div class="location"><form action="" class="form_1" id="search_form5" method="get"><div id="ski-state-dropdown" class="list-type-dropdown"><p class="text title">Choose Your State</p><div class="drop_container holder"><input type="hidden" name="skiState" value="" /><p class="weather_dropdown current-value">- select -</p><ul>'+ws.generateStatesList(ws.LIST_SKI_CONDITIONS_ENABLED)+'</ul></div><div class="clear"></div></div><div id="ski-resorts-dropdown" class="list-type-dropdown"><p class="text title">Choose Ski Location</p><div class="drop_container holder"><input type="hidden" name="skiLocation" value="" /><p id="ski-resorts-p" class="weather_dropdown current-value disabled">- select -</p><ul id="ski-resorts-list"><li></li></ul></div><div class="clear"></div></div></form></div></div><div class="ski-result"></div>';$(divClass).html(skiHtml);$(".weather .ski-result").each(function(){ws.renderSkiCondResult(this,"303003");});try{FOX.site.channel.listDropdown.init("skiState");}catch(err){}},renderSkiResortsDropdown:function(stateAbbr){var ws=this;if(stateAbbr!==""){$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_SKI_RESORTS_JSON,data:{state:stateAbbr,cb:cacheBuster()},success:function(data,textStatus){var skiResortJson=ws.createObjFromJSON(data);if(skiResortJson){if(skiResortJson.skiResorts!==null&&skiResortJson.skiResorts.length>0){var newSkiReportHolder=[],skiArray=skiResortJson.skiResorts;for(var x=0;x<skiArray.length;x+=1){if(x===0){newSkiReportHolder.push(skiArray[0]);}else{if(newSkiReportHolder[newSkiReportHolder.length-1]["resort_name"]!==skiArray[x]["resort_name"]){newSkiReportHolder.push(skiArray[x]);}}}ws.generateSkiResortsList(newSkiReportHolder);}else{return false;}}else{showToConsole(ws.MSG_DEFAULT_ERROR);return false;}}});}},generateSkiResortsList:function(locArrayObj){var i,skiResortsDropdown="";if(locArrayObj!==null){for(i=0;i<locArrayObj.length;i++){var skiResortId=locArrayObj[i].resort_id,skiResortName=locArrayObj[i].resort_name;skiResortsDropdown+='<li lang="'+skiResortId+'">'+skiResortName+"</li>";}$("#ski-resorts-list").html(skiResortsDropdown);$("#ski-resorts-p").removeClass("disabled");}else{skiResortsDropdown+='<li lang=""></li>';$("#ski-resorts-list").html(skiResortsDropdown);$("#ski-resorts-p").html("- select -");$("#ski-resorts-p").addClass("disabled");}try{FOX.site.channel.listDropdown.init("skiResorts");}catch(err){}},renderSkiCondResult:function(divClass,resortId){var ws=this;$.get(ws.SERVICE_URL_SKI_COND_JSON,{resortId:resortId},function(data){var skiCondJson=ws.createObjFromJSON(data),skiResultHtml=ws.generateSkiCondHtml(skiCondJson);$(divClass).html(skiResultHtml);});},generateSkiCondHtml:function(skiCondJson){var skiObj=skiCondJson.skiConditions,snowMin=skiObj.new_snow_min?skiObj.new_snow_min+" in":"N/A",surface=skiObj.surface_condition?skiObj.surface_condition:"N/A",lastSnowfall=skiObj.last_snow?skiObj.last_snow+"in":"N/A",prevSnowfall=skiObj.prev_snow?skiObj.prev_snow:"N/A",baseDepth="N/A";if(skiObj.base_min&&skiObj.base_max){baseDepth=skiObj.base_min+" of "+skiObj.base_max;}var skiHtml='<ul><li><p class="city-name">'+skiObj.resort_name+", "+skiObj.state+' Ski Report</p><div class="four-half"><table><tbody><tr><td class="first">Operating Status</td><td>'+skiObj.open_status+'</td></tr><tr class="even"><td class="first">Surface</td><td>'+surface+'</td></tr><tr><td class="first">Temperature</td><td>'+skiObj.temperature+' F</td></tr><tr class="even"><td class="first">New Snowfall</td><td>'+snowMin+'</td></tr><tr><td class="first">Last Snowfall</td><td>'+lastSnowfall+'</td></tr><tr class="even"><td class="first">Previous Snowfall</td><td>'+prevSnowfall+'</td></tr><tr><td class="first">Lifts Open</td><td>'+skiObj.lifts_open+" of "+skiObj.lifts_total+'</td></tr><tr class="even"><td class="first">Trails Open</td><td>'+skiObj.trails_open+" of "+skiObj.trails_total+'</td></tr><tr><td class="first">Grooming Trails</td><td>'+skiObj.groom_trails+" of "+skiObj.trails_total+'</td></tr><tr class="even"><td class="first">Base Depth</td><td>'+baseDepth+'</td></tr><tr><td class="first">Terrain</td><td>'+skiObj.terrain+'&#37;</td></tr><tr class="even"><td class="first">Snow Made</td><td>'+skiObj.snow_made+'&#37;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr class="even"><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div></li></ul>';return skiHtml;},addToFavorites:function(locId){if(this.weatherCookie("weatherfavlocs")){var favLocationArray=(this.weatherCookie("weatherfavlocs")).split("|");if(favLocationArray.length<5){var favIndex,saveFavorite=true;for(favIndex=0;favIndex<favLocationArray.length;favIndex++){if(favLocationArray[favIndex]===locId){alert("You have already saved this location to My Favorites.");saveFavorite=false;}}if(saveFavorite){favLocationArray.push(locId);this.createWeatherFavoritesCookie(favLocationArray);this.renderFavorites();}}else{alert("You have 5 saved locations in My Favorites. Please remove one from My Favorites to save this location.");}}else{var newFavCookieArray=new Array(locId);this.createWeatherFavoritesCookie(newFavCookieArray);this.renderFavorites();}},removeFavorite:function(locId){if(this.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=(this.weatherCookie("weatherfavlocs")).split("|");for(favIndex=0;favIndex<favLocationArray.length;favIndex++){if(favLocationArray[favIndex]===locId){favLocationArray.splice(favIndex,1);break;}}this.createWeatherFavoritesCookie(favLocationArray);}var li=$("#li_"+locId),ul=li.closest("ul.favorites");li.remove();if(ul.children().size()===0){ul.closest(".weather.favorites > ul").children(":not(:last-child)").remove();}},generateFavoritesHtml:function(weatherObj){var dataObj=weatherObj.weatherData,stateToDisplay=dataObj.stateShort;if(dataObj.locationId.substr(0,2)!=="US"){stateToDisplay=dataObj.country;}var favHtml='<li id="li_'+dataObj.locationId+'"><div class="weather-img"><a href="#" onclick="weather_service.gotoYourWeatherPage(\''+dataObj.locationId+"','"+dataObj.cityName+"','"+dataObj.stateShort+"','"+dataObj.country+'\');return false;"><img alt="Weather" src="'+weather_service.PATH_WEATHER_ICON_IMAGE+dataObj.days[0].image+weather_service.WEATHER_ICON_IMAGE_EXT+'"/></a></div><div class="city-container"><h3>'+unescape(dataObj.cityName)+", "+stateToDisplay+'</h3><div class="desc"><p>'+dataObj.forecast+'</p></div></div><div class="degrees"><p>'+dataObj.days[0].hi+'&deg;&nbsp;<span class="low">'+dataObj.days[0].lo+'&deg;</span></p><a class="close" href="#" onclick="weather_service.removeFavorite(\''+dataObj.locationId+"');return false;\"/></div></li>";return favHtml;},renderFavorites:function(){var ws=this,favoritesHtml="<ul>";if(ws.weatherCookie("weatherfavlocs")){var favIndex,favLocationArray=(ws.weatherCookie("weatherfavlocs")).split("|");favoritesHtml+='<li><ul class="favorites">';for(favIndex=0;favIndex<favLocationArray.length;favIndex++){var favDataObj,favLocationId=favLocationArray[favIndex],favDataCookie=this.getWeatherDataCookie(favLocationId);if(favDataCookie){favDataObj=ws.createObjFromJSON(favDataCookie);favoritesHtml+=ws.generateFavoritesHtml(favDataObj);}else{var callbackFn="location_renderfavorites_callback";ws[callbackFn]=function(data){if(data){ws.createWeatherDataCookie(favLocationId,data);favDataObj=ws.createObjFromJSON(data);favoritesHtml+=ws.generateFavoritesHtml(favDataObj);}};$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:({locationId:favLocationId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});}}favoritesHtml+="</ul></li><li>&nbsp;</li>";}favoritesHtml+=this.generateRightRailSearch("myfav")+"</ul>";var favoritesObj=$(".component, .c").find(" .weather.favorites");favoritesObj.html(favoritesHtml);$("ul.favorites li:last-child",favoritesObj).addClass("last");$("input[class*=weather_city_autocomplete_myfav]",favoritesObj).keyup(function(){ws.weatherCityAutoComplete(this);});},renderAirportSearch:function(){var airportHtml='<div class="weather airport-search"><h1><strong>Airport</strong> Delays</h1><ul><li><div><span class="text">'+this.TXT_AIRPORT_SEARCH_FIELD+'</span><form method="get" id="aiport_search" class="form_1" action="" onsubmit="return weather_service.airportSearchAction(this,\'#airportLocId\');"><fieldset class="text_box"><input type="text" id="airportCode" class="airport_input no_airport" size="50" value="" name="airportCode"/><input type="hidden" id="airportLocId" value="" name="locId"/><input type="submit" class="airport" value=""/></fieldset></form></div></li></ul></div>';document.write(airportHtml);},fetchAndSaveWeatherJSONCookie:function(locId,setAsCookie,callback){setAsCookie=(typeof setAsCookie==="boolean")?setAsCookie:true;var ws=this,callbackFn="location_weatherjsoncookie_callback";ws[callbackFn]=function(data){if(setAsCookie){ws.createWeatherDataCookie(locId,data);ws.renderWidget();}else{if(typeof callback==="function"){callback(data);}}};$.ajax({url:ws.SERVICE_URL_WEATHER_JSONP,data:({locationId:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});},fetchLocationJSON:function(locId,fn){var ws=this,callbackFn="location_searchresults_callback";ws[callbackFn]=function(data){ws.createWeatherLocationCookie(data);if(typeof fn==="function"){fn();}};$.ajax({url:ws.SERVICE_URL_LOCATION_JSONP,data:({zipOrLocation:locId,callback:ws.namespace+"."+callbackFn,cb:cacheBuster()}),dataType:"script",async:true,cache:true});},fetchLocationRegionCode:function(locId,callback){var ws=this,regionCode="";$.ajax({type:"GET",async:true,cache:true,url:ws.SERVICE_URL_LOCATION_REGION_JSON,data:{locationId:locId,cb:cacheBuster()},success:function(data,textStatus){if(data){var regionJson=ws.createObjFromJSON(data);callback(regionJson.regionCode);}},error:function(XMLHttpRequest,textStatus,errorThrown){showToConsole(ws.MSG_DEFAULT_ERROR);}});return regionCode;},weatherCityAutoComplete:function(element){var ws=this;ws.currentCityString="";var ACElementId=$(element).attr("id"),preloaderObj=$(element).parent().find(".preloader-img:first"),inputValue=$.trim($(element).val());if(inputValue.length<1){return ;}var cssValue=$(element).attr("class"),prefix="weather_city_autocomplete_",tempIndex=cssValue.indexOf(prefix)+prefix.length,appendix=cssValue.substr(tempIndex);tempIndex=appendix.indexOf(" ");if(tempIndex>0){appendix=appendix.substr(0,tempIndex);}var initial=inputValue.charAt(0).toLowerCase();if(initial.match(/[a-z]/)===null){return ;}if(typeof ws.weatherCityData[initial]==="undefined"){if(typeof ClientStorageManager==="undefined"){triggerAjaxCall(false);}else{var restrict=["cookie","msiestorage"];if(restrict.join("|").indexOf(ClientStorageManager.type.toLowerCase())===-1){ClientStorageManager.getItem(prefix+initial,function(storageData){if(storageData){var cities=eval(storageData);ws.weatherCityData[initial]=cities;triggerAutoComplete(cities);}else{triggerAjaxCall(true);}});}else{triggerAjaxCall(false);}}}else{triggerAutoComplete(ws.weatherCityData[initial]);}function triggerAjaxCall(useCSM){if(typeof ws.ACListener[ACElementId]==="undefined"){ws.ACListener[ACElementId]={init:false,fchar:initial,ajaxReady:true};}if(!ws.ACListener[ACElementId].ajaxReady){return ;}ws.ACListener[ACElementId].ajaxReady=false;$(preloaderObj).show();$.ajax({type:"GET",url:ws.SERVICE_URL_CITY_DATA,data:({cityNameInitial:initial,cb:cacheBuster()}),dataType:"text",cache:true,success:function(data,textStatus){if(data){var cities=data.replace(/var cities\=/,"");if(useCSM){ClientStorageManager.saveItem({key:prefix+initial,value:cities,expire:7,success:function(returnObj){ws.weatherCityData[initial]=returnObj.value;},error:function(err){}});if(typeof ws.weatherCityData[initial]==="undefined"){ws.weatherCityData[initial]=cities;}triggerAutoComplete(ws.weatherCityData[initial]);}else{ws.weatherCityData[initial]=cities;triggerAutoComplete(ws.weatherCityData[initial]);}$(preloaderObj).fadeOut("slow");ws.ACListener[ACElementId].ajaxReady=true;}else{$(preloaderObj).hide();ws.ACListener[ACElementId].ajaxReady=true;showToConsole(ws.MSG_DEFAULT_ERROR);}},error:function(XMLHttpRequest,textStatus,errorThrown){$(preloaderObj).hide();ws.ACListener[ACElementId].ajaxReady=true;showToConsole(ws.MSG_DEFAULT_ERROR);}});}function triggerAutoComplete(cities){cities=eval(cities);if(typeof ws.ACListener[ACElementId]==="undefined"){ws.ACListener[ACElementId]={init:false,fchar:initial,ajaxReady:true};}else{if(ws.ACListener[ACElementId].fchar!==initial){ws.ACListener[ACElementId].init=false;}}if(!ws.ACListener[ACElementId].init){$(element).autocomplete(cities,{max:20,width:193,selectFirst:false,resultsClass:"ac_results ac_results_"+appendix,formatItem:function(item){return item.t;}}).result(function(event,item){ws.currentLocId=item.id;ws.currentCityString=item.t;});ws.ACListener[ACElementId].init=true;ws.ACListener[ACElementId].fchar=initial;}}},renderHeaderLocationChange:function(){var ws=this,htmlArr=[],formTimeout=false;htmlArr.push('<div id="weather_loc_change" style="display:none;"><form action="#" method="get"><fieldset><legend>Weather</legend>');htmlArr.push('<input id="weather_headInput" type="text" name="searchTerm" value="Enter city or zip" />&nbsp;<input type="submit" name="submit" class="btn-smll" value="Go" />');htmlArr.push("</fieldset></form></div>");var htmlElm=$(htmlArr.join(""));htmlElm.find("form").each(function(){var elm=$(this),search=elm.find("#weather_headInput");search.focus(function(){ws.searchFieldOnFocus(this);clearTimeout(formTimeout);}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val==="")?ws.TXT_HEADER_SEARCH_FIELD:val);formTimeout=setTimeout(function(){ws.changeHeaderLocation();},3000);});elm.submit(function(){clearTimeout(formTimeout);ws.locationSearchAction(elm,"#weather_headInput",ws.UPDATE_HEADER_ACTION);return false;});});$(".weather-search, #weather_corner").append(htmlElm);},changeHeaderLocation:function(){var info=$("#weather_cur_loc"),search=$("#weather_loc_change");if(info.is(":hidden")){search.css("display","none");info.css({opacity:"0",display:"inline"});animateFn.show(info,{speed:300,type:"swing"});}else{info.css("display","none");search.css({opacity:"0",display:"inline"});animateFn.show(search,{speed:300,type:"swing"});}},headerDisplayAction:function(locationId){var ws=this;var headerDataCookie=this.getWeatherDataCookie(locationId);if(headerDataCookie){var headerDataObj=this.createObjFromJSON(headerDataCookie),wdObj=headerDataObj.weatherData,htmlArr=[],imgSrc=this.PATH_WEATHER_ICON_IMAGE+wdObj.days[0].image+this.WEATHER_ICON_IMAGE_EXT;htmlArr.push('<div id="weather_cur_loc"><p><a href="#">Forecast:</a> <span class="degree">'+wdObj.currentTemp+'&#176; <img src="http://global.fncstatic.com/static/v/all/img/clear.gif" style="width:24px; height:24px;"/></span> ');htmlArr.push('<span class="location">'+wdObj.cityName+'</span> <a href="#">edit</a></p></div>');var htmlElm=$(htmlArr.join(""));htmlElm.find("span.degree img").each(function(){var elm=$(this);elm.css({opacity:"0",display:"inline"});if(wdObj.days[0].image.length===0){elm.css("display","none");}else{if(!$.browser.opera){var img=new Image();img.onload=function(){elm.attr("src",imgSrc);animateFn.show(elm,{speed:300,type:"swing"});};img.src=imgSrc;}else{elm.css({backgroundImage:"none",display:"inline",opacity:"0"});elm.attr({src:imgSrc});animateFn.show(elm,{speed:300,type:"linear"});}}});htmlElm.find("a").each(function(){var aTag=$(this);var text=aTag.text().toLowerCase();aTag.click(function(){if(text.indexOf("forecast")>-1){ws.gotoYourWeatherPage(locationId,wdObj.cityName,wdObj.stateShort);}if(text.indexOf("edit")>-1){ws.changeHeaderLocation();}return false;});});$(".weather-search, #weather_corner").html(htmlElm);}}};function ExternalServices(root){this.root=root;this._DataObj=false;this._ExtWidgets=[];}ExternalServices.prototype={reloadWidgets:function(){var x,widgets=this._ExtWidgets,len=widgets.length;for(x=0;x<len;x++){var fn=widgets[x];if(typeof fn==="function"){fn();}}},setWidget:function(fn,execute){var EX=this;if(typeof fn==="function"){EX._ExtWidgets.push(fn);if(execute){fn();}}},getCurrentWeatherData:function(){},createForm:function(formElm){if(!formElm){return false;}var EX=this,root=this.root;formElm.each(function(){var form=$(this),search=form.find("#weather_widgetInput"),txt=search.attr("value");search.focus(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val===txt)?"":val);}).blur(function(){var elm=$(this),val=elm.attr("value");elm.attr("value",(val==="")?txt:val);});form.submit(function(){root.locationSearchAction(this,"#weather_widgetInput",root.UPDATE_HEADER_ACTION);return false;});});}};function showToConsole(str){if(typeof (console)==="object"){console.log(str);}}function cacheBuster(freq){freq=freq||false;var date=new Date(),str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString();switch(freq){case"h":str+=(date.getHours()+1).toString();break;case"30m":str+=(date.getHours()+1).toString()+((date.getMinutes()%30===0)?"1":"0");break;default:str+=(date.getHours()+1).toString();}return str;}var weather_service=window.weather_service=new WeatherService("weather_service");var animateFn={isIE:function(){return $.browser.msie;},animate:function(elm,cfg){if(!this.isIE()){if(!cfg.speed){cfg.speed=300;}if(!cfg.type){cfg.type="swing";}elm.animate(cfg.css,cfg.speed,cfg.type,function(){if(cfg.callback){cfg.callback();}});}else{elm.css(cfg.css);elm.css("opacity","");if(cfg.callback){cfg.callback();}}},hide:function(elm,cfg){if(!elm){return false;}var i,cssObj={opacity:"0"};if(cfg.css){for(i in cfg.css){cssObj[i]=cfg.css[i];}}cfg.css=cssObj;this.animate(elm,cfg);},show:function(elm,cfg){if(!elm){return false;}var i,cssObj={opacity:"1"};if(cfg.css){for(i in cfg.css){cssObj[i]=cfg.css[i];}}cfg.css=cssObj;this.animate(elm,cfg);}};}(jQuery));window.FOX_DependencyManager=(function(G){var B={prefix:"___"};var E=function(){this._TYPES=[];};E.prototype.addInstance=function(I,J){if(typeof I!=="string"&&I.length<1){return false;}var H=this;if(!H[A(I)]){H._TYPES.push(I);H[A(I)]=new C(I,this);if(G.isArray(J)){H.setDependency(I,J);}}else{D("[DependencyManager.addDependency] '"+I+"' already exists.");}};E.prototype.onReady=function(I,J){if(typeof I!=="string"||typeof J!=="function"){return false;}var H=this;G.loadAttempt(60,500,function(){return(H[A(I)])?true:false;},function(){H[A(I)].onReady(function(K){J(K);});},function(){D("[DependencyManager.onReady] Max attempts to check for the instance of '"+I+"' reached.");});};E.prototype.setDependency=function(I,J){if(typeof I!=="string"||!G.isArray(J)){return false;}var H=this,I=A(I);if(!H[I]){return false;}H[I].setDependency(J);};E.prototype.fireReady=function(I,J){if(typeof I!=="string"){return false;}var H=this,I=A(I);if(H[I]){H[I].EVENT.fireReady(J);}};var C=(function(){var H=function(K,J){this.root=J;this._TYPE=K;this._DEPENDENCY=false;this._IS_READY=false;this._pooler={};this.EVENT=new F(this);};H.prototype.setDependency=function(K){var J=this;if(J._DEPENDENCY){return false;}if(G.isArray(K)&&I(K)){J._DEPENDENCY=K;J.isReady();D("[DependencyManager."+J._TYPE+".setDependency] Dependency set.");}else{D("[DependencyManager."+J._TYPE+".setDependency] Invalid setting.");}};H.prototype.isReady=function(){var M=this,L=this.root;if(!M._DEPENDENCY){return false;}if(M._IS_READY&&!M._pooler.isReady){return M._IS_READY;}M._pooler.isReady=true;var K=function(){var Q,R=M._DEPENDENCY,T=true;for(Q=0;Q<R.length;Q++){var S=A(R[Q]);if(L[S]&&!L[S].EVENT.inquire()){T=false;break;}}return T;};var O=false,N=0,J=360;var P=function(){N++;if(!O){O=K();}if(!O){if(N>J){D("[DependencyManager."+M._TYPE+".isReady] Max attempts reached to check ready state.");}else{setTimeout(function(){P();},500);}}else{M._IS_READY=true;M._pooler.isReady=false;}};P();};H.prototype.onReady=function(K){if(typeof K!=="function"){return false;}var J=this;G.loadAttempt(360,500,function(){return(J._IS_READY)?true:false;},function(){K(J._READY_DATA);});};var I=function(J){return true;};return H;}());var F=(function(){var H=function(I){this.root=I.root;this.main=I;this._IS_READY=false;this._READY_DATA=null;};H.prototype.fireReady=function(J){var I=this;if(!I._IS_READY){I._IS_READY=true;if(J){I._READY_DATA=J;}}};H.prototype.inquire=function(){var I=this;return I._IS_READY;};return H;}());var D=function(H){if(window.console&&window.console.log){console.log(H);}};var A=function(H){return(B.prefix+H);};return E;}(jQuery));window.MultiFeedParser=(function(I){var O={logName:"[Feed Parser]",jsonpParam:"callback",minRefreshRate:0.5};var G=function(T){T=T||{};var S=this;S.__vars={};var R=S.__vars;R._config=T;R._fn={};R._data={};R._xhr={};R._callStack={};R._initExe={};R._refreshObj={};S.event=new M(S);R._fn.log=(R._config.logging)?H:function(){};var V=(typeof R._config.initOnLoad==="boolean"&&!R._config.initOnLoad)?false:true;var U,Q=(R._config&&R._config.feeds)?R._config.feeds:false;if(V&&Q){for(U in Q){P(R,U);if(Q[U].refresh){B(S,U,Q[U]);}}}};var M=(function(){var Q=function(R){this.__vars={};var S=this.__vars;S.root=R;};Q.prototype.reload=function(V){var S,X,T=false,Z=this,W=Z.__vars.root,Y=W.__vars,a=(Y._config&&Y._config.feeds)?Y._config.feeds:false,U=[];if(!a){return false;}var R=function(b){if(!Y._refreshObj[b]){B(W,b,a[b]);}};if(typeof V==="string"){V=(A(V)).replace(/\s+/g," ");U=V.split(" ");}if(U.length>0){for(X=0;X<U.length;X++){if(a[U[X]]){Y._fn.log(O.logName+" Reloading {type}: '"+U[X]+"'");P(Y,U[X]);R(U[X]);T=true;}}}else{Y._fn.log(O.logName+" Reloading all feed {type}");for(S in a){P(Y,S);R(S);}T=true;}};Q.prototype.addFeed=function(){var V=this,T=V.__vars.root,U=T.__vars,R=(U._config&&U._config.feeds)?U._config.feeds:{},X=arguments;var W={type:false,url:false};if(typeof X[0]==="string"&&typeof X[1]==="string"){W.type=X[0];W.url=X[1];}else{if(typeof X[0]==="object"&&X[0].type&&X[0].url){W=X[0];}}if(!W.type||!W.url){U._fn.log(O.logName+" Cannot fire event.addFeed(). Missing config {type} or {url}.");return false;}else{if(R[W.type]){U._fn.log(O.logName+" Cannot fire event.addFeed() for {type}: '"+W.type+"'. This type already exists.");return false;}}var Y,S={};for(Y in W){if(Y!=="type"){S[Y]=W[Y];}}T.__vars._config.feeds[W.type]=S;P(U,W.type);if(W.refresh){B(T,W.type,S);}};Q.prototype.removeFeed=function(V){var U=this,S=U.__vars.root,T=S.__vars,Y=(S.__vars._config&&S.__vars._config.feeds)?true:false;if(!Y||typeof V!=="string"){return false;}var X=function(a){if(!S.__vars._config.feeds[a]){return false;}S.__vars._config.feeds[a]=null;S.__vars._initExe[a]=null;S.__vars._callStack[a]=null;S.__vars._refreshObj[a]=null;try{delete S.__vars._config.feeds[a];delete S.__vars._initExe[a];delete S.__vars._callStack[a];delete S.__vars._refreshObj[a];}catch(Z){}T._fn.log(O.logName+" Notice: Feed removed for {type}: '"+a+"'");};V=(A(V)).replace(/\s+/g," ");var R=[],W=V.split(" ");};Q.prototype.onLoad=function(){var U=this,S=U.__vars.root,T=S.__vars,R=(T._config&&T._config.feeds)?T._config.feeds:{},V=C(arguments);if(!V.type||!V.callback||!R[V.type]){return false;}var W=V.type,X=V.callback;if(!T._callStack[W]){T._callStack[W]=[];}T._callStack[W].push(X);if(T._initExe[W]){X(T._data[W]);}};Q.prototype.getData=function(){var a=this,W=a.__vars.root,Y=W.__vars,b=(Y._config&&Y._config.feeds)?Y._config.feeds:{},T=C(arguments);if(!T.type||!T.callback){return false;}var U=T.type,Z=T.callback;var X=0,V=20,R;var S=function(){if(typeof Y._data[U]!=="undefined"){Z(Y._data[U]);}else{if(X<=V){clearTimeout(R);R=setTimeout(function(){S();},250);X++;}}};S();};return Q;}());var B=function(Q,S,T){var R=(!isNaN(T.refresh)&&parseFloat(T.refresh)>=O.minRefreshRate)?(T.refresh).toFixed(2):false;if(!R){H(O.logName+" Warning: Cannot set refresh for {type}: '"+S+"' refresh rate less than minimum rate allowed.");return false;}R=R*60000;clearInterval(Q.__vars._refreshObj[S]);Q.__vars._refreshObj[S]=setInterval(function(){if(Q.event&&typeof Q.event.reload==="function"){Q.event.reload(S);}else{H(O.logName+" Warning: Cannot find event.reload(). Reload for {type}: '"+S+"' not fired.");}},R);};var P=function(T,V){var a=T._config.feeds,R=a[V]||false;if(!R){return false;}var Q=(function(){var b=false;if(typeof R==="string"){b=R;}else{if(R.url){b=R.url;}}return b;}());if(!Q){H(O.logName+" URL not defined for feed {type}: '"+V+"'");return false;}var X=(function(){var b="json",d=E(Q);if(typeof R.jsonpCallback==="string"||d){b="jsonp";}else{if(R.type&&F(R.type)){b=R.type;}}b=b.toLowerCase();return b;}());var Y={};switch(X){case"json":Y={dataType:"json",cache:true,async:true,success:function(b){W(b);}};break;case"jsonp":var U=E(Q),Z=L(V,((typeof R.jsonpCallback==="string")?R.jsonpCallback:false),U);window[Z.name]=function(b){W(b);};Y={dataType:"script",async:true,cache:true};if(!U){Y.data={};Y.data[Z.param]=Z.name;}break;case"xml":break;case"script":break;case"text":break;}Y.url=Q;(function(){var b=(T._config.cacheTime&&!isNaN(T._config.cacheTime))?parseFloat(T._config.cacheTime):false;if(b){if(!Y.data){Y.data={};}Y.data.cb=D(b);}}());if(X!=="jsonp"&&T._xhr[V]){try{if(typeof T._xhr[V].abort==="function"){T._xhr[V].abort();}}catch(S){}}T._xhr[V]=I.ajax(Y);function W(d){var b=N(R.normalize,a),e=(b)?b(d):d;T._data[V]=e;if(!T._initExe[V]){T._initExe[V]=true;}J(T._callStack[V],T._data[V]);}};var J=function(R,S){if(!K(R)){return false;}for(var Q=0;Q<R.length;Q++){if(typeof R[Q]==="function"){R[Q](S);}}};var C=function(R){var S=false,Q=false;if(typeof R[0]==="string"){S=R[0];}else{if(typeof R[0]==="object"&&!K(R[0])){S=(R[0].type)?R[0].type:false;}}if(typeof R[1]==="function"){Q=R[1];}var T={type:S,callback:Q};return T;};var N=function(T,Q){var S,R=false;if(typeof T==="function"){R=T;}else{if(typeof T==="string"){for(S in Q){if(T===S&&typeof Q[S].normalize==="function"){R=Q[S].normalize;break;}}}}return R;};var L=function(S,T,R){var Q={param:"callback"};if(T&&T.split("=").length===2){var U=T.split("=");Q.param=U[0];Q.name=U[1];}else{if(T){Q.name=T;}else{if(R){Q.name=R;}else{Q.name="jsonp"+S;}}}return Q;};var F=function(T){var Q,R=false,S=["jsonp","json","xml","html","text","script"];for(Q=0;Q<S.length;Q++){if(S[Q]===T.toLowerCase()){R=true;break;}}};var E=function(T){var R,S=false,V=T.split("?"),U=V[1];if(U){var Q=((U.toLowerCase()).indexOf(O.jsonpParam+"=")>-1)?U.split("&"):[];for(R=0;R<Q.length;R++){var W=Q[R].split("=");if(W[0].toLowerCase()===O.jsonpParam){S=decodeURI(W[1]);break;}}}return S;};var H=function(){var R=true;if(R&&window.console){try{return console.log.apply(console,arguments);}catch(Q){console.log(arguments);}}};var D=function(T){T=T||false;var Q=new Date(),U=Q.getFullYear().toString()+(Q.getMonth()+1).toString()+Q.getDate().toString(),S=Q.getHours()+1,R=Q.getMinutes();U+=S.toString()+((T&&!isNaN(T))?(Math.floor(R/parseFloat(T))).toString():"");return U;};var K=function(Q){Q=Q||false;return Object.prototype.toString.call(Q)==="[object Array]";};var A=function(Q){Q=(Q||"").replace(/^\s+|\s+$/g,"");return Q;};return G;}(jQuery));var CallStackTrigger=(function(){var B=function(){this.__vars={};var C=this.__vars;C._stack={};C._trigger=false;C._data=null;};B.prototype.trigger=function(E,F){var D=this,C=D.__vars;C._trigger=E;C._data=(typeof F!=="undefined")?F:null;if(C._stack[E]){A(D,E);}};B.prototype.bind=function(F,G){var E=this,D=E.__vars,C=D._stack;if(typeof G!=="function"){return false;}if(!C[F]){C[F]=[];}C[F].push(G);if(F===D._trigger){if(D._data===null){G();}else{G(D._data);}}};var A=function(F,G){var E=F.__vars,D=E._stack,H=E._data;if(D[G]){var C=D[G];for(x=0;x<C.length;x++){if(typeof C[x]==="function"){C[x](H);}}}};return B;}());window.FOX_MediaIconOverlay=(function($){var CONST={classType:{"video-ct":{type:"video",image:"/static/v/all/img/vd-overlay_${dim}.png"},"slideshow-ct":{type:"slideshow",image:"/static/v/all/img/ss-overlay_${dim}.png"},"interactive-ct":{type:"interactive",image:"/static/v/all/img/ia-overlay_${dim}.png"},"freeform-ct":{type:"interactive",image:"/static/v/all/img/ia-overlay_${dim}.png"},"magnify-ct":{type:"magnify",image:"/static/v/all/img/mg-overlay_${dim}.png"},"listpage-ct":{type:"listpage",image:"/static/v/all/img/lp-overlay_${dim}.png"}}};var App=function(){};App.prototype.set=function(obj){var self=this;if(!obj){return false;}obj.type=(function(type){var ret=false;ret=self.getMediaType(obj.elm);return(ret)?ret:type;}(obj.type||false));if(!obj.type){return false;}obj.elm.find("span.type").hide();obj.container=obj.elm;obj.elm=obj.elm.find(".m");var isLazy=function(elm){return(elm.hasClass("unloaded_img"))?true:false;};var isVideoAlt=function(elm){return(elm.hasClass("m-controller"))?true:false;};obj.elm.each(function(){var item=$(this),imgElm=item.find("img"),pObj=obj,img=new Image();pObj.elm=item;if(!isVideoAlt(item)){var trigger=function(){img.onload=function(){pObj.dim=[img.width,img.height];setOverlay(pObj);};img.src=imgElm.attr("src");};if(pObj.dim){setOverlay(pObj);}else{if(isLazy(imgElm)){var interval=setInterval(function(){if(imgElm.attr("src")===imgElm.attr("dest_src")){trigger();clearInterval(interval);}},650);}else{trigger();}}}});};App.prototype.getMediaType=function(elm){var i,ret=false,type=CONST.classType;for(i in type){if(elm.hasClass(i)){ret=type[i].type;break;}}return ret;};var setAbsImg=function(dim,check){var x,map=["118","96","64","48","32","24","16"],ret=false;if(!isNaN(dim)){if(dim>=map[0]){ret=map[0];}if(dim<=20){ret=map[map.length-1];}else{for(x=0;x<map.length;x++){var val=map[x],nVal=(map[x+1])?map[x+1]:0,diffH=Math.abs(val-dim),diffL=Math.abs(val-nVal);if(dim<=val&&dim>nVal){ret=(diffH>diffL)?nVal:val;break;}}}}return(ret)?ret:false;};var setOverlay=function(obj){var elm=obj.elm,path="",ratio=obj.ratio||0.35,dim=obj.dim,position=obj.position||"center",edge=obj.edge||[0.03,0.05],size=obj.size||118,useAltImg=obj.useAltImg,altHover=obj.altHover||false,noClick=obj.noClick||false,useAbsImg=true,absDim=false,type=obj.type||"video",hoverElm=obj.hoverElm||false;for(var i in CONST.classType){if(CONST.classType[i].type===type){path=CONST.classType[i].image;break;}}elm.find(".media-overlay").remove();var resizeVal=(dim[1]<dim[0])?dim[1]:dim[0],resize=resizeVal*ratio;resize=(resize>size)?size:resize;var imgW=resize,imgH=imgW,ovrL=false,ovrR=false,ovrT=false,ovrB=false,edgeW=edge[0],edgeH=edge[1];edgeW=mFloor(dim[0]*edgeW);edgeH=mFloor(dim[1]*edgeH);switch(position){case"top right":ovrR=edgeW;ovrT=edgeH;break;case"bottom right":ovrR=edgeW;ovrB=edgeH;break;case"top left":ovrL=edgeW;ovrT=edgeH;break;case"bottom left":ovrL=edgeW;ovrB=edgeH;break;default:ovrL=Math.floor((dim[0]*0.5)-(imgW*0.5));ovrT=Math.floor((dim[1]*0.5)-(imgH*0.5));}var css={};if(ovrR){css.right=px(ovrR);}if(ovrL){css.left=px(ovrL);}if(ovrT){css.top=px(ovrT);}if(ovrB){css.bottom=px(ovrB);}if(useAbsImg&&setAbsImg(imgW)){imgW=setAbsImg(imgW);imgH=imgW;absDim=imgW;}var overlaySrc=(function(){var dim,ret="http://global.fncstatic.com"+path;if(useAbsImg&&absDim){dim=absDim;}dim=(dim)?dim:"";return ret.replace("${dim}",dim);}());var hoverImg=new Image();hoverImg.src=overlaySrc;css.width=px(imgW);css.minHeight=px(imgH);css.background='url("'+overlaySrc+'") no-repeat 0px 0px';var overlay=$('<div class="media-overlay" style="position:absolute;"></div>'),titleLink=elm.parent().find("> h3:first");overlay.css(css);elm.find("a").css({position:"relative"});elm.find("img").each(function(){var item=$(this),parent=item.parent(),isHover=false;parent.css({display:"block",padding:"0"}).prepend(overlay);if(!noClick){parent.click(function(){var el=$(this),onclick=el.attr("onclick"),href=el.attr("href");useEvent=(onclick)?onclick:href;if(onclick){eval(onclick);}else{window.location.href=href;}return false;});}var overlayElm=parent.find(".media-overlay");function hoverOver(over){if(over&&!isHover){isHover=true;overlayElm.css("background-position","0px "+px("-"+imgH));}else{if(isHover){isHover=false;overlayElm.css("background-position","0px 0px");}}}if(parent.parent().find("> .credit").size()>0){overlayElm.css({bottom:"21px"});}if(hoverElm){hoverElm.hover(function(){hoverOver(true);},function(){hoverOver();});}titleLink.hover(function(){hoverOver(true);},function(){hoverOver();});parent.hover(function(){hoverOver(true);},function(){hoverOver();});});};var mFloor=function(val){var ret=Math.floor(val);return ret;};var px=function(val){var ret=val+"px";return ret;};return(new App());}(jQuery));window.OutbrainWidgetConnector=(function(){var A={OBVar:"OB_elements",src:"http://widgets.outbrain.com/outbrain.js",legacySrc:"http://widgets.outbrain.com/outbrainWidget.js"};var D=function(F){if(!F){return false;}this.addWidget(F);};D.prototype.addWidget=function(I,J){var F,G=this;if(!I){return false;}if(!window[A.OBVar]){window[A.OBVar]=[];}var H=C(I);for(F=0;F<H.length;F++){window[A.OBVar].push(H[F]);}E(J);};D.prototype.refreshWidgets=function(F){if(!window.OBR){return ;}F=F||window.location.href;try{OBR.extern.refreshWidget(F);}catch(G){}};D.prototype.addWidgetLegacy=function(F,G){F=(B(F))?F[0]:F;window.OB_permalink=F.permalink;window.OB_widgetId=F.widgetId;window.OB_Template=F.Template;window.OB_langJS=F.langJS;window.OB_isLateStarter=true;E(G,true);};var E=function(J,F){J=(typeof J==="function")?J:function(){};if(window.OB_Script&&window.OutbrainStart){try{window.OutbrainStart();J();}catch(I){log("[Outbrain.Connector] Error: "+I);}}else{var H=document.getElementsByTagName("script")[0],G=document.createElement("script");G.type="text/javascript";G.onreadystatechange=G.onload=function(){window.OB_Script=true;J();};G.async=true;G.src=(F)?A.legacySrc:A.src;H.parentNode.insertBefore(G,H);}};var C=function(F){if(F&&!B(F)){F=[F];}return F;};var B=function(F){F=F||false;return Object.prototype.toString.call(F)==="[object Array]";};return D;}());var DateTime=(function(){var A=function(C,F){F=F||null;var E;var D={month:C.getUTCMonth(),day:C.getDay(),year:C.getFullYear(),date:C.getDate(),hour:C.getHours(),minutes:C.getMinutes(),seconds:C.getSeconds(),ampm:((C.getHours()<12)?"am":"pm"),fullStr:C.toString()};var K=function(N){N=N||"";N=N.toString();if(N.length<1){return N;}var L="",M=parseInt(N.charAt(N.length-1),10);switch(M){case 1:L="st";break;case 2:L="nd";break;case 3:L="rd";break;default:L="th";break;}return(N+L);};var I=function(O,M){M=M||"full";var N=["January","February","March","April","May","June","July","August","September","October","November","December"],L=N[O]||"";if(M==="short"){L=L.slice(0,3);}return L;};var G=function(L){L=(!isNaN(L))?L:"";return L.toString();};var H=function(O,N){N=N||"full";var L=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],M=L[O];if(N==="short"){M=M.slice(0,3);}return M;};var B={"${mm}":(D.month+1),"${month}":I(D.month),"${month:short}":I(D.month,"short"),"${day}":H(D.day),"${day:short}":H(D.day,"short"),"${yr}":D.year,"${yr:short}":G(D.year).substr(2),"${dd}":((D.date<10)?("0"+G(D.date)):G(D.date)),"${ddTH}":K(D.date),"${hr}":((D.hour>12)?D.hour-12:D.hour),"${hr:mil}":((D.hour<10)?("0"+G(D.hour)):G(D.hour)),"${min}":((D.minutes<10)?("0"+G(D.minutes)):G(D.minutes)),"${sec}":((D.seconds<10)?("0"+G(D.seconds)):G(D.seconds)),"${ampm}":D.ampm,"${AMPM}":(D.ampm).toUpperCase(),"${AmPm}":((D.ampm).charAt(0)).toUpperCase()+(D.ampm).charAt(1)};for(E in B){var J=F.indexOf(E);while(J!==-1){F=F.replace(E,B[E]);J=F.indexOf(E);}}return F;};return A;}());window.WatchNow=(function(H){var M={feeds:{FN:{"sched-tool":"http://www.foxnews.com/feeds/schedule/channel/foxnewscom-live/feed/json",playlist:"http://video.foxnews.com/v/feed/playlist/1621774019001.js?template=fox"},FB:{"sched-tool":"http://www.foxbusiness.com/feeds/watch/show-schedule/feed/json/",playlist:"http://video.foxbusiness.com/v/feed/playlist/87187.js?template=fox"}},imageDimension:[132,74]};var C=function(P){if(!window.MultiFeedParser||!window.AKAMAI_TIME_HELPER){return false;}var O=this;O.__vars={};var N=O.__vars;N.data={};P=(typeof P==="object"&&!H.isArray(P))?P:{};N._config=P;var S=M.feeds.FN;if(P.site==="foxbusiness"){S=M.feeds.FB;}var Q=false;if(P.refresh&&!isNaN(P.refresh)){Q=parseInt(P.refresh,10);}var R={};R.feeds={};R.logging=true;R.initOnLoad=true;if(Q){R.cacheTime=Q;}R.feeds.playlist={url:S.playlist,jsonpCallback:"FOX_WatchNowPlaylist",normalize:function(U){var T=U;if(U){T=B(P,U);}return T;}};R.feeds["sched-tool"]={url:S["sched-tool"],jsonpCallback:"FOX_WatchNowSchedTool",normalize:function(V){var T=V,U=(P.fullSchedule)?true:false;if(V){T=I(P,V,U);}return T;}};N._parser=new MultiFeedParser(R);};C.prototype.getData=function(N){var P=this,O=P.__vars;if(typeof N!=="function"){return false;}O._parser.event.onLoad("sched-tool",function(Q){O.data["sched-tool"]=Q;O._parser.event.getData("playlist",function(R){O.data.playlist=R;var S=A(Q,R);N(S);});});};C.prototype.getScheduleFeed=function(N){var P=this,O=P.__vars;if(typeof N!=="function"){return false;}O._parser.event.onLoad("sched-tool",function(Q){O.data["sched-tool"]=Q;N(Q);});};C.prototype.getPlaylistFeed=function(N){var P=this,O=P.__vars;if(typeof N!=="function"){return false;}O._parser.event.onLoad("playlist",function(Q){O.data.playlist=Q;N(Q);});};var A=function(Q,S){var P=999,O=(S.length>P)?P:S.length,N=[];if(Q){O--;N.push(Q);}var R=0,T=[];while(R<S.length){if(S[R]&&S[R].isLive){T.push(S[R]);S.splice(R,1);}else{R+=1;}}S.reverse();T.reverse();S=S.concat(T);S.reverse();for(x=0;x<O;x+=1){N.push(S[x]);}return N;};var B=function(O,P){var N=(P&&P.channel&&P.channel.item)?P.channel.item:false;if(!N){return false;}N=((!H.isArray(N))?[N]:N);var U,R=[],S=N.length,Q=(O.imageDimension)?O.imageDimension:M.imageDimension;var T=function(Y){var W=false;if(Y){Y=(!H.isArray(Y))?[Y]:Y;for(var X=0;X<Y.length;X+=1){if(Y[X].indexOf("live_stream")>-1){W=true;break;}}}return W;};var V=function(X){var W=J(X["media-group"]["media-thumbnail"]["@attributes"].url,Q);var Y={isLive:T(X.category),title:X.title,link:X.link,guid:X.guid,img:W,raw:X};return Y;};for(U=0;U<S;U+=1){R.push(V(N[U]));}return R;};var I=function(O,Q,T){var Y,U,S=[],P=[],X=false,V=Q.day,Z=window.AKAMAI_TIME_HELPER.getCurrent();var W=function(d,a,b){b=b||false;P.push({current:b,show:d,index:a});};var R=function(d){var e,b=d.show||[];b=(H.isArray(b))?b:[b];for(e=0;e<b.length;e+=1){var a=b[e];a.start=G(a.start);a.end=G(a.end);a.description=(typeof a.description!=="string")?"":H(a.description).text();a.showImg=(function(k,j){k=(typeof k==="string")?H.trim(k):"";var h="http://global.fncstatic.com/static/v/all/img/clear.gif",l=(O.imageDimension)?O.imageDimension:M.imageDimension;if(j){h=L(j,l);}else{if(k.length>0){var f="http://global.fncstatic.com";if(O.imagePattern){var g=O.imagePattern;g=g.replace("${machineTitle}",k);f+=g;}else{f+="/static/p/live.foxnews.com/img/schedule/144x81-live-"+k+".jpg";}h=L(f,l);}}return h;}(a["machine-title"],a.image));S.push(a);a.start_early=new Date(a.start.getTime()-(60000*5));if(!X&&a.start_early<=Z&&a.end>=Z){P=[];W(a,(S.length-1),true);X=true;}else{if(P.length<3&&X){W(a,(S.length-1));}else{if(P.length<3&&a.start>=Z){W(a,(S.length-1));}}}}};for(Y=0;Y<V.length;Y+=1){R(V[Y]);}U={latest:P,normalized:S,raw:Q};var N={},P=(U&&U.latest[0]&&U.latest[0].current)?U.latest[0].show:false;if(P){N={title:P.title,img:P.showImg,isLive:true,link:P.link,guid:P["machine-title"],webShow:true,raw:P,rawDump:U};U=N;}else{if(T){N={rawDump:U};U=N;}else{U=P;}}return U;};var J=function(Q,S){if(!S){return Q;}var P=Q.split("/"),O=P.length,R=P[O-3],N=P[O-2];P[O-3]=(!isNaN(R))?S[0]:R;P[O-2]=(!isNaN(N))?S[1]:N;return P.join("/");};var L=function(Q,R){if(!R){return Q;}var T="http://a57.foxnews.com/",S=Q.replace("http://",""),O=S.split("/"),N=O.length;O[N-1]=R.join("/")+"/"+O[N-1];var P=T+O.join("/");return P;};var D=function(R,N){R=new Date(R);N=new Date(N);var Q=[],P=DateTime(R,"${hr}:${min}"),O=DateTime(N,"${hr}:${min} ${ampm}");Q=[P,O].join(" - ");return Q;};var G=function(R){var O,P=R.split("T"),N=P[0],Q=P[1].split("-")[0];N=N.split("-");N=[N[1],N[2],N[0]].join("/");O=new Date([N,Q].join(" "));return O;};var F=function(R){R=new Date(R);if(Object.prototype.toString.call(R)==="[object Date]"&&!isNaN(R.getTime())){var N=R.getDay(),P=R.getHours(),O=R.getMinutes(),Q=(P*100)+O;return(N===3&&Q>=1500&&Q<=1930)?true:false;}else{return false;}};var K=function(S){S=new Date(S);var O=false;if(Object.prototype.toString.call(S)==="[object Date]"&&!isNaN(S.getTime())){var N=S.getDay(),Q=S.getHours(),P=S.getMinutes(),R=(Q*100)+P;if(N>=1&&N<=5&&R>=2000&&R<=2359){O=true;}else{if(N>=2&&N<=6&&R===0){O=true;}}}else{O=false;}return O;};var E=function(N){if(typeof window.console==="object"&&console.log){console.log(N);}};return C;}(jQuery));
/*Fri Jan 25 15:03:25 EST 2013*/
