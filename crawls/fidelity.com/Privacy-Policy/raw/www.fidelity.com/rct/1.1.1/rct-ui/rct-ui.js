/*
	Copyright (c) 2004-2008, The Dojo Foundation
	All Rights Reserved.

	Licensed under the Academic Free License version 2.1 or above OR the
	modified BSD license. For more information on Dojo licensing, see:

		http://dojotoolkit.org/book/dojo-book-0-9/introduction/licensing
*/

/*
	This is a compiled version of Dojo, built for deployment and not for
	development. To get an editable version, please visit:

		http://dojotoolkit.org

	for documentation and information on getting the source.
*/

if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(_1,_2){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _3=dojo.date.stamp._isoRegExp.exec(_1);var _4=null;if(_3){_3.shift();if(_3[1]){_3[1]--;}if(_3[6]){_3[6]*=1000;}if(_2){_2=new Date(_2);dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(_5){return _2["get"+_5]();}).forEach(function(_6,_7){if(_3[_7]===undefined){_3[_7]=_6;}});}_4=new Date(_3[0]||1970,_3[1]||0,_3[2]||1,_3[3]||0,_3[4]||0,_3[5]||0,_3[6]||0);var _8=0;var _9=_3[7]&&_3[7].charAt(0);if(_9!="Z"){_8=((_3[8]||0)*60)+(Number(_3[9])||0);if(_9!="-"){_8*=-1;}}if(_9){_8-=_4.getTimezoneOffset();}if(_8){_4.setTime(_4.getTime()+_8*60000);}}return _4;};dojo.date.stamp.toISOString=function(_a,_b){var _=function(n){return (n<10)?"0"+n:n;};_b=_b||{};var _e=[];var _f=_b.zulu?"getUTC":"get";var _10="";if(_b.selector!="time"){var _11=_a[_f+"FullYear"]();_10=["0000".substr((_11+"").length)+_11,_(_a[_f+"Month"]()+1),_(_a[_f+"Date"]())].join("-");}_e.push(_10);if(_b.selector!="date"){var _12=[_(_a[_f+"Hours"]()),_(_a[_f+"Minutes"]()),_(_a[_f+"Seconds"]())].join(":");var _13=_a[_f+"Milliseconds"]();if(_b.milliseconds){_12+="."+(_13<100?"0":"")+_(_13);}if(_b.zulu){_12+="Z";}else{if(_b.selector!="time"){var _14=_a.getTimezoneOffset();var _15=Math.abs(_14);_12+=(_14>0?"-":"+")+_(Math.floor(_15/60))+":"+_(_15%60);}}_e.push(_12);}return _e.join("T");};}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");dojo.parser=new function(){var d=dojo;var _17=d._scopeName+"Type";var qry="["+_17+"]";function val2type(_19){if(d.isString(_19)){return "string";}if(typeof _19=="number"){return "number";}if(typeof _19=="boolean"){return "boolean";}if(d.isFunction(_19)){return "function";}if(d.isArray(_19)){return "array";}if(_19 instanceof Date){return "date";}if(_19 instanceof d._Url){return "url";}return "object";}function str2obj(_1a,_1b){switch(_1b){case "string":return _1a;case "number":return _1a.length?Number(_1a):NaN;case "boolean":return typeof _1a=="boolean"?_1a:!(_1a.toLowerCase()=="false");case "function":if(d.isFunction(_1a)){_1a=_1a.toString();_1a=d.trim(_1a.substring(_1a.indexOf("{")+1,_1a.length-1));}try{if(_1a.search(/[^\w\.]+/i)!=-1){_1a=d.parser._nameAnonFunc(new Function(_1a),this);}return d.getObject(_1a,false);}catch(e){return new Function();}case "array":return _1a.split(/\s*,\s*/);case "date":switch(_1a){case "":return new Date("");case "now":return new Date();default:return d.date.stamp.fromISOString(_1a);}case "url":return d.baseUrl+_1a;default:return d.fromJson(_1a);}}var _1c={};function getClassInfo(_1d){if(!_1c[_1d]){var cls=d.getObject(_1d);if(!d.isFunction(cls)){throw new Error("Could not load class '"+_1d+"'. Did you spell the name correctly and use a full path, like 'dijit.form.Button'?");}var _1f=cls.prototype;var _20={};for(var _21 in _1f){if(_21.charAt(0)=="_"){continue;}var _22=_1f[_21];_20[_21]=val2type(_22);}_1c[_1d]={cls:cls,params:_20};}return _1c[_1d];}this._functionFromScript=function(_23){var _24="";var _25="";var _26=_23.getAttribute("args");if(_26){d.forEach(_26.split(/\s*,\s*/),function(_27,idx){_24+="var "+_27+" = arguments["+idx+"]; ";});}var _29=_23.getAttribute("with");if(_29&&_29.length){d.forEach(_29.split(/\s*,\s*/),function(_2a){_24+="with("+_2a+"){";_25+="}";});}return new Function(_24+_23.innerHTML+_25);};this.instantiate=function(_2b){var _2c=[];d.forEach(_2b,function(_2d){if(!_2d){return;}var _2e=_2d.getAttribute(_17);if((!_2e)||(!_2e.length)){return;}var _2f=getClassInfo(_2e);var _30=_2f.cls;var ps=_30._noScript||_30.prototype._noScript;var _32={};var _33=_2d.attributes;for(var _34 in _2f.params){var _35=_33.getNamedItem(_34);if(!_35||(!_35.specified&&(!dojo.isIE||_34.toLowerCase()!="value"))){continue;}var _36=_35.value;switch(_34){case "class":_36=_2d.className;break;case "style":_36=_2d.style&&_2d.style.cssText;}var _37=_2f.params[_34];_32[_34]=str2obj(_36,_37);}if(!ps){var _38=[],_39=[];d.query("> script[type^='dojo/']",_2d).orphan().forEach(function(_3a){var _3b=_3a.getAttribute("event"),_2e=_3a.getAttribute("type"),nf=d.parser._functionFromScript(_3a);if(_3b){if(_2e=="dojo/connect"){_38.push({event:_3b,func:nf});}else{_32[_3b]=nf;}}else{_39.push(nf);}});}var _3d=_30["markupFactory"];if(!_3d&&_30["prototype"]){_3d=_30.prototype["markupFactory"];}var _3e=_3d?_3d(_32,_2d,_30):new _30(_32,_2d);_2c.push(_3e);var _3f=_2d.getAttribute("jsId");if(_3f){d.setObject(_3f,_3e);}if(!ps){d.forEach(_38,function(_40){d.connect(_3e,_40.event,null,_40.func);});d.forEach(_39,function(_41){_41.call(_3e);});}});d.forEach(_2c,function(_42){if(_42&&_42.startup&&!_42._started&&(!_42.getParent||!_42.getParent())){_42.startup();}});return _2c;};this.parse=function(_43){var _44=d.query(qry,_43);var _45=this.instantiate(_44);return _45;};}();(function(){var _46=function(){if(dojo.config["parseOnLoad"]==true){dojo.parser.parse();}};if(dojo.exists("dijit.wai.onload")&&(dijit.wai.onload===dojo._loaders[0])){dojo._loaders.splice(1,0,_46);}else{dojo._loaders.unshift(_46);}})();dojo.parser._anonCtr=0;dojo.parser._anon={};dojo.parser._nameAnonFunc=function(_47,_48){var jpn="$joinpoint";var nso=(_48||dojo.parser._anon);if(dojo.isIE){var cn=_47["__dojoNameCache"];if(cn&&nso[cn]===_47){return _47["__dojoNameCache"];}}var ret="__"+dojo.parser._anonCtr++;while(typeof nso[ret]!="undefined"){ret="__"+dojo.parser._anonCtr++;}nso[ret]=_47;return ret;};}if(!dojo._hasResource["fmr.rct.ui.AutoComplete"]){dojo._hasResource["fmr.rct.ui.AutoComplete"]=true;dojo.provide("fmr.rct.ui.AutoComplete");dojo.declare("fmr.rct.ui.AutoComplete",null,{constructor:function(_4d){console.log("creating");this.errorHandler=_4d.errorHandler||function(){};this.btn=_4d.viewElements.acBtn||null;this.beforeLookup=_4d.beforeLookup||null;this.resultsReturned=_4d.resultsReturned||null;this.acButton=_4d.acButton||null;this.accessLabel=_4d.viewElements.accessLabel||null;this.accessText=_4d.viewElements.accessText||"";this.viewObj=_4d.viewObject||new fmr.rct.ui.ACViewObject({"viewElements":_4d.viewElements,"viewFormatter":_4d.viewFormatter,"highlight":this.highlight,"resultsReturned":this.resultsReturned,"accessLabel":this.accessLabel,"accessText":this.accessText});this.model=_4d.model||new fmr.rct.ui.ACModel();this.filter=_4d.serviceFilter||null;this.controller=_4d.controller||new fmr.rct.ui.ACController({"view":this.viewObj,"model":this.model,"dataSource":_4d.dataSource,"beforeLookup":this.beforeLookup,"resultsReturned":this.resultsReturned});dojo.connect(this.viewObj.getResultPane(),"onmouseover",this.controller,"handleMouseEvent");dojo.connect(this.viewObj.getResultPane(),"onmouseout",this.controller,"handleMouseEvent");dojo.connect(this.viewObj.getResultPane(),"onmousedown",this.controller,"clickedItem");if(this.acButton){dojo.connect(this.acButton,"onfocus",this.controller,"buttonFocus");dojo.connect(this.acButton,"onclick",this.controller,"buttonFocus");dojo.connect(this.acButton,"onclick",this.controller,"btnSubmit");dojo.connect(this.acButton,"onblur",this.controller,"buttonBlur");}dojo.connect(this.viewObj.getInputField(),"onblur",this.controller,"clearResultPane");dojo.connect(this.viewObj.getInputField(),"onkeyup",this.controller,"handleKeys");!(dojo.isSafari||dojo.isIE)?dojo.connect(this.viewObj.getInputField(),"onkeypress",this.controller,"handleArrows"):dojo.connect(this.viewObj.getInputField(),"onkeydown",this.controller,"handleArrows");this._cb=_4d.itemSelected||function(_4e){dojo.publish("fmr.rct.ui.ACitemSelected",[_4e]);};dojo.connect(this.model,"selectItem",this,function(_4f,_50){var _51={};var act="";if(this.model.getCurrentSearch()){act=this.model.getCurrentSearch();}else{if(this.beforeLookup){act=this.beforeLookup(this.viewObj.getInputFieldValue());}else{act=this.viewObj.getInputFieldValue();}}if(this.model.getItem(_4f)){_51=this.model.getItem(_4f);_51.acTyped=act;}else{_51.symbol=null;_51.acTyped=act;}this._cb(_51,this.getView(),_50);});dojo.connect(this.model,"setData",this.viewObj,"updateResultsPane");if(this.viewObj.getInputFieldValue().length>0){var e={};e.target={};e.target.value=this.viewObj.getInputFieldValue();this.controller.handleKeys(e);}},getController:function(){return this.controller;},getView:function(){return this.viewObj;},acSubmit:function(){this.getController().acSubmit();}});dojo.provide("fmr.rct.ui.ACViewObject");dojo.declare("fmr.rct.ui.ACViewObject",null,{constructor:function(_54){this.highlight=_54.highlight;this.elements=_54.viewElements;this.hasResults=false;this.currentSearch="";this.resultsReturned=_54.resultsReturned;this.accessLabel=_54.accessLabel;this.accessTextSwitch=_54.accessText;if(this.accessLabel){this.accessText=this.accessLabel.innerHTML;}else{this.accessText="";}this.viewFormatter=_54.viewFormatter||function(_55,_56,_57){_55=_55.split(",");parens=/[()]*/;_55="("+_55[_55.length-1].replace(/^\s*/,"").replace(/\s*$/,"").replace(parens,"")+")";var re=new RegExp(_55,"i");var tmp="";tmp="<tr id='"+_56+"'><th id='"+_56+"' class='acItemIndex'>";tmp+=this.getMatch(re,_57.symbol)+"</th><td id='"+_56+"' class='acItemValue'>"+this.getMatch(re,_57.desc)+" "+_57.exchange;tmp+="</td></tr>";return tmp;};},setAccessLabel:function(){if(this.accessLabel){this.accessLabel.innerHTML=this.accessTextSwitch;}},resetAccessLabel:function(){if(this.accessLabel){this.accessLabel.innerHTML=this.accessText;}},getHasResults:function(){return this.hasResults;},getErrorCondition:function(){return this.errorCondition;},getInputField:function(){return this.elements.dataInput;},getInputFieldValue:function(){return this.elements.dataInput.value;},setInputFieldValue:function(_5a){this.elements.dataInput.value=_5a;},getResultPane:function(){return this.elements.resultPane;},getErrorPane:function(){return this.elements.errorPane;},clearDisplay:function(){this.elements.resultPane.style.display="none";this.resetAccessLabel();this.clearResults();},clearError:function(){this.getErrorPane().style.display="none";this.getErrorPane().innerHTML="";},showDisplay:function(){if(this.getInputFieldValue==""){this.elements.resultPane.style.display="block";this.hasResults=false;}else{this.elements.resultPane.style.display="block";this.hasResults=true;}},clearResults:function(){this.elements.resultPane.innerHTML="";this.hasResults=false;},getMatch:function(re,val,_5d){var _5e="<span class='acItemMatch' id='"+_5d+"'>$1</span>";return val.replace(re,_5e);},updateResultsPane:function(_5f){this.clearResults();if(this.getInputFieldValue()!=""){if(_5f&&_5f.length>0){var _r="";var q=this.currentSearch;if(this.resultsReturned){_r=this.resultsReturned(_5f,this.currentSearch,this.getMatch);}else{_r="<table class='acItemTable'>";for(var i=0;i<_5f.length;i++){_r+=this.viewFormatter(q,i,_5f[i]);}_r+="</table>";}this.getResultPane().innerHTML=_r;this.showDisplay();this.clearError();this.errorCondition=false;}else{this.hasResults=false;this.clearDisplay();}}},setCurrent:function(_63){this.currentSearch=_63;}});dojo.provide("fmr.rct.ui.ACModel");dojo.declare("fmr.rct.ui.ACModel",null,{constructor:function(_64){this._results=[];this.currVal=null;this.typedVal="";this.currentSearch="";},selectItem:function(_65,_66){},setData:function(_67){this._results=_67;},clearData:function(){this._results=[];},getData:function(){return this._results;},getItem:function(_68){return this._results[_68];},setTyped:function(_69){this.typedVal=_69;},getTyped:function(){return this.typedVal;},setCurrentSearch:function(_6a){this.currentSearch=_6a;},getCurrentSearch:function(){return this.currentSearch;}});dojo.provide("fmr.rct.ui.ACController");dojo.declare("fmr.rct.ui.ACController",null,{constructor:function(_6b){this.view=_6b.view;this.model=_6b.model;this.ds=_6b.dataSource||"default";this.beforeLookup=_6b.beforeLookup||null;this.resultsReturned=_6b.resultsReturned||null;this.currentResult=null;this.currentIndex=0;this.currState=null;this.currVal=null;this._cid=null;this.btnFocus=false;},selectInput:function(_6c){if(!this.currentResult){if(this.view.getHasResults()){this.model.selectItem(0,_6c);}else{this.model.selectItem({"symbol":null,"acTyped":this.view.getInputFieldValue()},_6c);}}else{this.model.selectItem(this.currentResult.id,_6c);}},acSubmit:function(){this.selectInput();},btnSubmit:function(){this.selectInput("button");},buttonFocus:function(){this.btnFocus=true;},buttonBlur:function(){this.btnFocus=false;},resetState:function(){this.currState=null;this.currentIndex=0;this.currentResult=null;this.currVal=null;},addClass:function(obj){if(this._cid){this.removeClass(this._cid);}if(obj){this._cid=obj;dojo.addClass(obj,"acItemOver");}},removeClass:function(obj){if(obj){dojo.removeClass(obj,"acItemOver");}},getResults:function(e){var _70=e.target.value;if(this.beforeLookup){_70=this.beforeLookup(_70);}if(_70.length>0){this.model.setCurrentSearch(_70);this.view.setCurrent(_70);this.resetState();this.ds.getData(_70,this.model,this);}},clickedItem:function(e){this.resetState();this.view.clearDisplay();if(e.button!=2&&e.button!=3){var _72=e.target.id;this.model.selectItem(_72,"clicked");}},clearResultPane:function(){if(this.btnFocus==false){this.view.clearDisplay();this.model.clearData();}},handleMouseEvent:function(evt){if(evt.target.id&&evt.target.id!==this.view.getResultPane().id){if(evt.type==="mouseover"){this.removeClass(this.currentResult);this.currentIndex=evt.target.id;this.addClass(dojo.byId(evt.target.id));}else{this.removeClass(dojo.byId(evt.target.id));}}},handleArrows:function(e){try{switch(e.keyCode){case 38:case 40:if(this.view.getInputFieldValue().length>0){var _75=this.view.getResultPane();var _76=this.getCursor(e.keyCode,_75);if(_76!=-1){this.view.showDisplay();this.currentResult=_75.firstChild.firstChild.childNodes[_76];var txt="symbol: "+this.model.getItem(this.currentResult.id).symbol;txt+=", description: "+this.model.getItem(this.currentResult.id).desc;this.view.setAccessLabel(txt);this.view.setInputFieldValue(this.model.getItem(this.currentResult.id).symbol);this.addClass(_75.firstChild.firstChild.childNodes[_76]);if(e.keyCode===40&&_76>0){this.removeClass(_75.firstChild.firstChild.childNodes[_76-1]);}else{if(e.keyCode===38&&_76>=0){this.removeClass(_75.firstChild.firstChild.childNodes[_76+1]);}}}}}}catch(err){alert("HandleArrows.Error: "+err.message);}},handleKeys:function(e){try{var _79=this.view.getResultPane();switch(e.keyCode){case 46:case 8:if(!e.target.value){this.view.clearDisplay();this.view.clearResults();this.model.setCurrentSearch("");this.resetState();}else{if(!this.view.getInputFieldValue().match(/[\w]+/)){this.view.clearDisplay();this.view.clearResults();this.model.setCurrentSearch("");this.resetState();}else{this.getResults(e);}}this.model.setTyped(this.view.getInputFieldValue());break;case 13:this.selectInput();this.clearResultPane();break;case 27:this.clearResultPane();this.view.clearDisplay();this.view.clearError();this.view.setInputFieldValue(this.model.getTyped());break;case 37:break;case 38:break;case 39:break;case 40:break;default:if(this.view.getInputFieldValue()==""){this.view.clearDisplay();}else{this.getResults(e);this.model.setTyped(this.view.getInputFieldValue());}}}catch(err){alert("HandleKeys.Error: "+err.message);}},getCursor:function(_7a,_7b){if(_7b.innerHTML.length===0){return -1;}if(_7a===40){if(!this.currState){this.currState="down";return 0;}return (this.currentIndex===(_7b.firstChild.firstChild.childNodes.length-1))?(_7b.firstChild.firstChild.childNodes.length-1):++this.currentIndex;}else{if(_7a===38){return (this.currentIndex===0)?0:--this.currentIndex;}}}});}if(!dojo._hasResource["fmr.rct.ui.DisplayObject"]){dojo._hasResource["fmr.rct.ui.DisplayObject"]=true;dojo.provide("fmr.rct.ui.DisplayObject");dojo.declare("fmr.rct.ui.DisplayObject",null,{displayNode:"",triggerNode:"",triggerEvents:"",toggleDisplay:false,hideEvent:null,displayEvent:null,vMargin:0,hMargin:0,watchDelay:0,posAnchor:null,displayMode:null,displayOrientation:"",displayConfig:null,hideConfig:null,configObject:null,removeOnHide:false,name:"",_triggerCoords:null,_displayCoords:null,_displayTries:0,_displayAnimation:null,_hideAnimation:null,_opacity:0,_isDisplayed:false,_attempted:"",_delim:";",_isPreviouslyAttempted:function(_7c){return this._attempted.indexOf(this._delim+_7c+this._delim)!=-1;},_addPositionAttempt:function(pos){if(this._attempted==null){this._attempted="";}this._attempted+=this._delim+pos+this._delim;},constructor:function(_7e){this.configObject={};dojo.mixin(this.configObject,fmr.rct.ui.DisplayObject.DEFAULT_CONFIG);if(_7e){dojo.mixin(this.configObject,_7e);}if(_7e.configObject){dojo.mixin(this.configObject,_7e.configObject);}var p=this.configObject;this.displayNode=dojo.byId(p.displayNode);this.triggerNode=dojo.byId(p.triggerNode);this.name=this.displayNode.id;this.triggerEvents=p.triggerEvents.split(",");this.displayMode=p.displayMode;this.displayOrientation=p.displayOrientation;this.hideConfig=p.hideConfig;this.displayConfig=p.displayConfig;this.toggleDisplay=p.toggleDisplay;this.watchDelay=p.watchDelay;this.hMargin=p.hMargin;this.vMargin=p.vMargin;this.removeOnHide=p.removeOnHide;this.x=p.x;this.y=p.y;this.posAnchor=p.posAnchor;this._setDisplayConfig(this.displayConfig||p.displayConfig);this._setHideConfig(this.hideConfig||p.hideConfig);fmr.rct.ui.DisplayObject._displayObjects[this.displayNode.id]=this;fmr.rct.ui.DisplayObject._displayObjects[this.triggerNode.id]=this;if(this.toggleDisplay){dojo.connect(this.triggerNode,"onclick",this,"toggle");}else{for(i=0;i<this.triggerEvents.length;i++){if(this.watchDelay&&this.triggerEvents[i]=="onmouseover"){dojo.connect(this.triggerNode,this.triggerEvents[i],this,function(){setTimeout("fmr.rct.ui.DisplayObject.getDisplayObject('"+this.triggerNode.id+"').display(null,null,true)",this.watchDelay);});}else{dojo.connect(this.triggerNode,this.triggerEvents[i],this,"display");}}dojo.connect(this.triggerNode,this.hideEvent?this.hideEvent:"onmouseout",this,"hide");dojo.connect(this.displayNode,"onmouseenter",this,"display");dojo.connect(this.displayNode,"onmouseleave",this,"hide");}},markupFactory:function(_80){return new fmr.rct.ui.DisplayObject(_80);},_attachDisplayEvents:function(_81,_82,_83){var _84=dojo.query(_81,this.displayNode);if(!_84||_84.length<1){return;}var _85=_84[0];var _86=_84[_84.length-1];dojo.connect(_85,_82,function(_87){var _88=dojo.fixEvent(_87);var _89=_88.charCode;var ref=_88.target;});dojo.connect(_86,_82,function(_8b){var _8c=dojo.fixEvent(_8b);var _8d=_8c.charCode;var ref=_8c.target;});},prePosition:function(){},position:function(x,y){this.prePosition();if(this._isDisplayed){return;}this._displayTries++;if(this.displayMode){this.displayOrientation=null;}var _91=0,_92=0;if(typeof (window.pageYOffset)=="number"){_92=window.pageYOffset;_91=window.pageXOffset;}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){_92=document.body.scrollTop;_91=document.body.scrollLeft;}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){_92=document.documentElement.scrollTop;_91=document.documentElement.scrollLeft;}}}if(this.removeOnHide){this.displayNode.style.display="block";}var _93=null;var doc=dojo.doc;var _95=dojo.isIE?document.body.offsetWidth:window.outerWidth;var _96=dojo.isIE?document.body.offsetHeight:window.innerHeight;var _97=dojo.coords(this.displayNode);var _98=dojo.coords(this.triggerNode);var _99=dojo.style(doc.documentElement,"height");var _9a=dojo.style(doc.documentElement,"width");if(dojo.isIE){_95=_9a;_96=_99;}var _9b=(x!=null&&isNaN(x))?x:this.displayMode;var _9c=comp_top=null;if((!this.displayMode||!this.displayOrientation)&&(_97.h>_96||_97.w>_95||this._displayTries>13)){_9b=fmr.rct.ui.DisplayObject.ORIENTATION_DEFAULT;}if((x&&!isNaN(x))&&y){this.displayNode.style.left=x+"px";this.displayNode.style.top=y+"px";this._displayTries=0;return;}else{var _9d=0;var _9e=0;var _9f=0;var _a0=0;if(_9b==fmr.rct.ui.DisplayObject.MODE_RIGHT||_9b==fmr.rct.ui.DisplayObject.MODE_LEFT){_9d=_98.y-(_97.h/2)+_92;if(_9b==fmr.rct.ui.DisplayObject.MODE_LEFT){_9f=_98.x-_97.w;}else{_a0=_98.x+_98.w+_97.w;}}if(_9b==fmr.rct.ui.DisplayObject.MODE_ABOVE){_9d=_98.y-_97.h+(this.vMargin+_92);}if(_9b==fmr.rct.ui.DisplayObject.MODE_BELOW){_9d=_98.y+(_98.h+this.vMargin)+_92;}_9e=_9d+_97.h;if(this.displayOrientation&&!this.displayMode){_9b=this.displayOrientation;}switch(_9b){case fmr.rct.ui.DisplayObject.MODE_RIGHT:return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT);break;case fmr.rct.ui.DisplayObject.MODE_LEFT:return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT);break;case fmr.rct.ui.DisplayObject.MODE_ABOVE:return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE);break;case fmr.rct.ui.DisplayObject.MODE_BELOW:return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW);break;case fmr.rct.ui.DisplayObject.ORIENTATION_DEFAULT:_9f=parseInt(_98.x)+parseInt(_98.w)+parseInt(this.hMargin);_9d=parseInt(_98.y)-parseInt(_97.h/2);this._displayTries=0;break;case fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE:if(this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT);}_9f=(_98.x+_98.w/2)-(_97.w/2)+this.hMargin;_a0=_9f+_97.w;_9d=_98.y-(_97.h+this.vMargin);if(this.displayOrientation){break;}this._addPositionAttempt(_9b);if(_a0>_95){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE_LEFT);}if(_9f<1){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE_RIGHT);}if(_9d<1){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW);}break;case fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT:if(this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW);}_9f=parseInt(_98.x)+parseInt(_98.w)+parseInt(this.hMargin);_9d=parseInt(_98.y)-parseInt(_97.h/2);_9e=_9d+parseInt(_97.h);_a0=_9f+parseInt(_97.w);if(this.displayOrientation){break;}this._addPositionAttempt(_9b);if(_9d<1&&!this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT_BELOW)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT_BELOW);}if(_9e>_96&&!this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT_ABOVE)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT_ABOVE);}if(_a0>_95&&!this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW);}break;case fmr.rct.ui.DisplayObject.ORIENTATION_BELOW:if(this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT);}_9d=parseInt(_98.y)+(parseInt(_98.h)+parseInt(this.vMargin));_9e=_9d+parseInt(_97.h);_9f=(parseInt(_98.x)+parseInt(_98.w/2))-parseInt(_97.w/2)+parseInt(this.hMargin);_a0=_9f+_97.w;if(this.displayOrientation){break;}this._addPositionAttempt(_9b);if(_9f<1){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW_RIGHT);}if(_a0>_95){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW_LEFT);}if(_9e>_96){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE);}break;case fmr.rct.ui.DisplayObject.ORIENTATION_LEFT:if(this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE);}_9f=parseInt(_98.x)-parseInt(_97.w)-parseInt(this.hMargin);_9d=(parseInt(_98.y)+_98.h/2)-parseInt(_97.h/2);_9e=_9d+_97.h;_a0=_9f+_97.w;if(this.displayOrientation){break;}this._addPositionAttempt(_9b);if(_9e>_96){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT_ABOVE);}if(_9d<1){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT_BELOW);}if(_9f<1){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT);}break;case fmr.rct.ui.DisplayObject.ORIENTATION_LEFT_ABOVE:if(this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT_ABOVE)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT_ABOVE);}_9d=(parseInt(_98.y)+parseInt(_98.h))-(parseInt(_97.h)+parseInt(this.vMargin));_9e=_9f+parseInt(_97.h);_9f=_98.x-(parseInt(_97.w)+this.vMargin);if(this.displayOrientation){break;}this._addPositionAttempt(_9b);if(_9d<1){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT_BELOW);}if(_9f<1){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE);}break;case fmr.rct.ui.DisplayObject.ORIENTATION_LEFT_BELOW:if(this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT_BELOW)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT_ABOVE);}_9d=parseInt(_98.y);_9f=parseInt(_98.x)-(parseInt(_97.w)+this.vMargin);_9e=_9d+parseInt(_97.h);if(this.displayOrientation){break;}this._addPositionAttempt(_9b);if(_9e>_96){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE);}if(_9f<1){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT);}break;case fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT_ABOVE:if(this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT_BELOW)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT_BELOW);}_9f=parseInt(_98.x)+parseInt(_98.w)+this.hMargin;_9d=parseInt(_98.y)+parseInt(_98.h)-(parseInt(_97.h)+this.vMargin);_9e=_9d+parseInt(_97.h);_a0=_9f+_97.w;if(this.displayOrientation){break;}this._addPositionAttempt(_9b);if(_9d<1){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT_BELOW);}if(_a0>_95){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW);}break;case fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT_BELOW:if(this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT_BELOW)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE);}_9d=parseInt(_98.y);_9f=parseInt(_98.x)+parseInt(_98.w)+parseInt(this.hMargin);_9e=_9d+parseInt(_97.h);_a0=_9f+parseInt(_97.w);if(this.displayOrientation){break;}this._addPositionAttempt(_9b);if(_9e>_96){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT);}if(_a0>_95||_9e>_96){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT_ABOVE);}break;case fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE_LEFT:if(this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE_LEFT)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT);}_9f=(_98.x+_98.w/2)-_97.w;_9d=_98.y-_97.h;_a0=_9f+_97.w;_9e=_9d+_97.h;if(this.displayOrientation){break;}this._addPositionAttempt(_9b);if(_9e>_96){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE_RIGHT);}if(_9f<1){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT);}if(_9d<1){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW);}break;case fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE_RIGHT:if(this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE_RIGHT)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT);}_9f=(_98.x+_98.w/2);_9d=_98.y-_97.h-this.vMargin;_a0=_9f+_97.w;if(this.displayOrientation){break;}this._addPositionAttempt(_9b);if(_a0>_95){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW);}if(_9d<1){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT);}break;case fmr.rct.ui.DisplayObject.ORIENTATION_BELOW_LEFT:if(this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW_LEFT)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT);}_9f=(_98.x+_98.w/2)-_97.w;_9d=_98.y+_98.h+this.vMargin;_a0=_9f+_97.w;_9e=_9d+_97.h;if(this.displayOrientation){break;}this._addPositionAttempt(_9b);if(_9f<1){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW_RIGHT);}if(_9e>_96){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE);}break;case fmr.rct.ui.DisplayObject.ORIENTATION_BELOW_RIGHT:if(this._isPreviouslyAttempted(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW_RIGHT)){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW);}_9f=(_98.x+_98.w/2);_9d=_98.y+_98.h+this.vMargin;_a0=_9f+_97.w;_9e=_9d+_97.h;if(this.displayOrientation){break;}this._addPositionAttempt(_9b);if(_a0>_95){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_BELOW);}if(_9e>_96){return this.position(fmr.rct.ui.DisplayObject.ORIENTATION_LEFT);}break;}}this.displayOrientation=_9b;var _a1=dojo.isIE;_9f+=_91;_9d+=_92;this._displayTries=0;this.displayNode.style.left=_9f+"px";this.displayNode.style.top=_9d+"px";this._displayCoords=dojo.coords(this.displayNode);this._displayCoords.x+=_91;this._displayCoords.y+=_92;this._triggerCoords=dojo.coords(this.triggerNode);this._triggerCoords.x+=_91;this._triggerCoords.y+=_92;this._attempted="";},onPreDisplay:function(_a2,_a3,_a4){},display:function(_a5,_a6,_a7){if(this._isDisplayed&&this._opacity==1||this._opacity==100){return;}if(typeof (_a7)!="undefined"&&_a7!=null){if(fmr.rct.ui.DisplayObject.lastFocus!=this.triggerNode){return;}}if((this._displayAnimation&&this._displayAnimation.status()=="playing")){return;}if(this._hideAnimation&&this._hideAnimation.status()=="playing"){this._hideAnimation.stop();}if(_a6){this.prePosition();this.position(_a6.x,_a6.y);}else{this.prePosition();this.position();}this._displayAnimation=(_a6)?dojo.animateProperty(_a6):dojo.animateProperty(this.displayConfig);this._displayAnimation.controlObject=this;dojo.style(this.displayNode,"display","block");this._displayAnimation.play();fmr.rct.ui.DisplayObject.lastDisplayed=this;},onDisplay:function(){},onPreHide:function(_a8,_a9){},hide:function(_aa,_ab){if(this._hideAnimation&&this._hideAnimation.status()=="playing"){return;}if(this.toggleDisplay||(this._displayAnimation&&this._displayAnimation.status()=="playing")){this._displayAnimation.stop();}this._hideAnimation=(_ab)?dojo.animateProperty(_ab):dojo.animateProperty(this.hideConfig);this._hideAnimation.controlObject=this;this._hideAnimation.play();},toggle:function(_ac,_ad){this._isDisplayed?this.hide(_ac,_ad):this.display(_ac,_ad);},onHide:function(){this._isDisplayed=false;},_updateDisplayStatus:function(obj){if(obj&&this.controlObject){this.controlObject._opacity=obj.opacity;}},_setDisplayConfig:function(_af){this.displayConfig=(_af.duration)?_af:(_af.displayConfig)?_af.displayConfig:fmr.rct.ui.DisplayObject.DEFAULT_CONFIG.displayConfig;if(!this.displayConfig.duration){this.displayConfig.duration=fmr.rct.ui.DisplayObject.DEFAULT_CONFIG.displayConfig.duration;}this.displayConfig.node=this.displayNode;this.displayConfig.onAnimate=this._updateDisplayStatus;this.displayConfig.onEnd=function(){this.controlObject.onDisplay();this.controlObject._isDisplayed=true;};this.displayConfig.onBegin=function(){this.controlObject.onPreDisplay();};this._hideAnimation=dojo.animateProperty(this.hideConfig);},_setHideConfig:function(_b0){this.hideConfig=(_b0.duration)?_b0:(_b0.hideConfig)?_b0.hideConfig:fmr.rct.ui.DisplayObject.DEFAULT_CONFIG.hideConfig;if(!this.hideConfig.duration){this.hideConfig.duration=fmr.rct.ui.DisplayObject.DEFAULT_CONFIG.hideConfig.duration;}this.hideConfig.node=this.displayNode;this.hideConfig.onAnimate=this._updateDisplayStatus;this.hideConfig.onEnd=function(){this.controlObject.onHide();this.controlObject.displayNode.style.left="-30000px";if(this.controlObject.removeOnHide){this.controlObject.displayNode.style.display="none";}this.controlObject._isDisplayed=false;};this.displayConfig.onBegin=function(){this.controlObject.onPreHide();};this._displayAnimation=dojo.animateProperty(this.displayConfig);}});dojo.mixin(fmr.rct.ui.DisplayObject,{MODE_ABOVE:"MODE_ABOVE",MODE_BELOW:"MODE_BELOW",MODE_RIGHT:"MODE_RIGHT",MODE_LEFT:"MODE_LEFT",ORIENTATION_LEFT:"OL",ORIENTATION_RIGHT:"OR",ORIENTATION_ABOVE:"OA",ORIENTATION_BELOW:"OB",ORIENTATION_ABOVE_LEFT:"OAL",ORIENTATION_ABOVE_RIGHT:"OAR",ORIENTATION_LEFT_ABOVE:"OLA",ORIENTATION_LEFT_BELOW:"OLB",ORIENTATION_RIGHT_ABOVE:"ORA",ORIENTATION_RIGHT_BELOW:"ORB",ORIENTATION_BELOW_LEFT:"OBL",ORIENTATION_BELOW_RIGHT:"OBR",ORIENTATION_DEFAULT:"DEF",getDisplayObject:function(id){var x=fmr.rct.ui.DisplayObject._displayObjects[id];return x;},removeDisplayObject:function(id){fmr.rct.ui.DisplayObject._displayObjects[id]=null;},showDisplayObject:function(id){this.getDisplayObject(id).display();},hideDisplayObject:function(id){this.getDisplayObject(id).hide();},_displayObjects:new Array,lastFocus:null,lastDisplayed:null,watchDocumentMouseMovement:function(_b6){fmr.rct.ui.DisplayObject.lastFocus=dojo.fixEvent(_b6).target;if(fmr.rct.ui.DisplayObject.lastFocus==null){if(fmr.rct.ui.DisplayObject.lastDisplayed&&!fmr.rct.ui.DisplayObject.lastDisplayed.toggleDisplay){fmr.rct.ui.DisplayObject.lastDisplayed.hide();}return;}if(fmr.rct.ui.DisplayObject.lastDisplayed&&!fmr.rct.ui.DisplayObject.lastDisplayed.toggleDisplay&&!dojo.isDescendant(fmr.rct.ui.DisplayObject.lastFocus,fmr.rct.ui.DisplayObject.lastDisplayed.displayNode)&&!fmr.rct.ui.DisplayObject.lastDisplayed.triggerNode==fmr.rct.ui.DisplayObject.lastFocus){fmr.rct.ui.DisplayObject.lastDisplayed.hide();}else{if(fmr.rct.ui.DisplayObject.lastDisplayed&&!fmr.rct.ui.DisplayObject.lastDisplayed.toggleDisplay&&dojo.isDescendant(fmr.rct.ui.DisplayObject.lastFocus,fmr.rct.ui.DisplayObject.lastDisplayed.displayNode)){fmr.rct.ui.DisplayObject.lastDisplayed.display();}}},watchExternalLinks:function(_b7){dojo.forEach(dojo.query("body, a"),function(_b8){dojo.connect(_b8,"onfocus",null,function(_b9){var x=dojo.fixEvent(_b9).target;if(x==null){return;}if(!dojo.hasClass(x,_b7||"BubbleLink")){if(fmr.rct.ui.DisplayObject.lastDisplayed&&!fmr.rct.ui.DisplayObject.lastDisplayed.toggleDisplay){fmr.rct.ui.DisplayObject.lastDisplayed.hide();}}});});},monitorDocumentEvents:function(){dojo.connect(dojo.doc,"onmousemove",fmr.rct.ui.DisplayObject,"watchDocumentMouseMovement");dojo.connect(window,"onblur",null,function(){if(fmr.rct.ui.DisplayObject.lastDisplayed){fmr.rct.ui.DisplayObject.lastDisplayed.hide();}});fmr.rct.ui.DisplayObject.watchExternalLinks();}});dojo.mixin(fmr.rct.ui.DisplayObject,{DEFAULT_CONFIG:{displayOrientation:fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT,hideConfig:{duration:1000,properties:{opacity:{end:0}}},displayConfig:{duration:1000,properties:{opacity:{end:100}}},hMargin:0,vMargin:0,watchDelay:350,triggerEvents:"onmouseover",removeOnHide:true}});dojo.addOnLoad(fmr.rct.ui.DisplayObject.monitorDocumentEvents);}if(!dojo._hasResource["fmr.rct.ui.Bubble"]){dojo._hasResource["fmr.rct.ui.Bubble"]=true;dojo.provide("fmr.rct.ui.Bubble");dojo.declare("fmr.rct.ui.Bubble",fmr.rct.ui.DisplayObject,{topArrowClass:"",bottomArrowClass:"",leftArrowClass:"",rightArrowClass:"",_leftArrow:null,_topArrow:null,_bottomArrow:null,_rightArrow:null,constructor:function(_bb){this._initResources();},_initResources:function(){this._topArrow=dojo.query(".ofTopArrow",this.displayNode)[0];if(this._topArrow){this._topArrowHeight=dojo.coords(this._topArrow).h;}this._leftArrow=dojo.query(".ofLeftArrow",this.displayNode)[0];if(this._leftArrow){this._leftArrowHeight=dojo.coords(this._leftArrow).h;}this._rightArrow=dojo.query(".ofRightArrow",this.displayNode)[0];if(this._rightArrow){this._rightArrowHeight=dojo.coords(this._rightArrow).h;}this._bottomArrow=dojo.query(".ofBottomArrow",this.displayNode)[0];if(this._bottomArrow){this._bottomArrowHeight=dojo.coords(this._bottomArrow).h;}this._hideArrows();},markupFactory:function(_bc){return new fmr.rct.ui.Bubble(_bc);},_hideArrows:function(_bd){dojo.style(this._topArrow,"left",0);dojo.style(this._leftArrow,"top",0);dojo.style(this._rightArrow,"top",0);dojo.style(this._bottomArrow,"left",0);if(this._topArrow&&_bd!=this._topArrow){dojo.style(this._topArrow,"display","none");}if(this._leftArrow&&_bd!=this._leftArrow){dojo.style(this._leftArrow,"display","none");}if(this._rightArrow&&_bd!=this._rightArrow){dojo.style(this._rightArrow,"display","none");}if(this._bottomArrow&&_bd!=this._bottomArrow){dojo.style(this._bottomArrow,"display","none");}},position:function(){this.inherited(arguments);this._hideArrows();var _be=dojo.coords(dojo.query(".bubbleRightColumn",this.displayNode)[0]).w;var _bf=dojo.coords(dojo.query(".bubbleTopColumn",this.displayNode)[0]).h;var _c0=dojo.coords(this._leftArrow);var _c1=dojo.coords(this._topArrow);var _c2,_c3;switch(this.displayOrientation){case fmr.rct.ui.DisplayObject.ORIENTATION_LEFT:this._rightArrow.style.display="block";this._rightArrow.style.top=(this._displayCoords.h/2-_bf*2)+(this._triggerCoords.h/2)+"px";break;case fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT:this._leftArrow.style.display="block";this._leftArrow.style.top=(this._displayCoords.h/2-_bf*2)+(this._triggerCoords.h/2)+"px";this.displayNode.style.top=this._displayCoords.y+_bf+-((this._triggerCoords.h/2))+"px";break;case fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE:this._bottomArrow.style.display="block";this._bottomArrow.style.left=this._displayCoords.w/2-_be+"px";break;case fmr.rct.ui.DisplayObject.ORIENTATION_BELOW:this._topArrow.style.display="block";this._topArrow.style.left=this._displayCoords.w/2-_be+"px";break;case fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE_LEFT:this._bottomArrow.style.display="block";this._bottomArrow.style.left=(this._displayCoords.w-(_be*2))-3+"px";this.displayNode.style.left=this._displayCoords.x+_be+"px";break;case fmr.rct.ui.DisplayObject.ORIENTATION_ABOVE_RIGHT:this._bottomArrow.style.display="block";this._bottomArrow.style.left=_be+"px";break;case fmr.rct.ui.DisplayObject.ORIENTATION_LEFT_ABOVE:this._rightArrow.style.display="block";this._rightArrow.style.top=(this._displayCoords.h-_bf*3-1)+"px";this.displayNode.style.top=this._displayCoords.t+_bf+"px";break;case fmr.rct.ui.DisplayObject.ORIENTATION_LEFT_BELOW:this._rightArrow.style.display="block";this._rightArrow.style.top="1px";this.displayNode.style.top=this._triggerCoords.y-_bf+"px";break;case fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT_ABOVE:this._leftArrow.style.display="block";this._leftArrow.style.top=this._displayCoords.h-(_bf*3)-2+"px";this.displayNode.style.top=this._displayCoords.t+_bf+"px";break;case fmr.rct.ui.DisplayObject.ORIENTATION_RIGHT_BELOW:this._leftArrow.style.display="block";this._leftArrow.style.position="relative";this._leftArrow.style.top="1px";this.displayNode.style.top=this._displayCoords.y-_bf+"px";break;case fmr.rct.ui.DisplayObject.ORIENTATION_BELOW_LEFT:this._topArrow.style.display="block";this._topArrow.style.left=this._displayCoords.w-_be*2-3+"px";this.displayNode.style.left=this._displayCoords.x+_be+"px";break;case fmr.rct.ui.DisplayObject.ORIENTATION_BELOW_RIGHT:this._topArrow.style.display="block";this.displayNode.style.left=this._displayCoords.x-_be*2+"px";this._topArrow.style.left=_be+1+"px";break;default:this._leftArrow.style.display="block";this._leftArrow.style.top=this._displayCoords.h/2-_bf+"px";break;}return;}});}if(!dojo._hasResource["dojo.io.script"]){dojo._hasResource["dojo.io.script"]=true;dojo.provide("dojo.io.script");dojo.io.script={get:function(_c4){var dfd=this._makeScriptDeferred(_c4);var _c6=dfd.ioArgs;dojo._ioAddQueryToUrl(_c6);this.attach(_c6.id,_c6.url,_c4.frameDoc);dojo._ioWatch(dfd,this._validCheck,this._ioCheck,this._resHandle);return dfd;},attach:function(id,url,_c9){var doc=(_c9||dojo.doc);var _cb=doc.createElement("script");_cb.type="text/javascript";_cb.src=url;_cb.id=id;doc.getElementsByTagName("head")[0].appendChild(_cb);},remove:function(id){dojo._destroyElement(dojo.byId(id));if(this["jsonp_"+id]){delete this["jsonp_"+id];}},_makeScriptDeferred:function(_cd){var dfd=dojo._ioSetArgs(_cd,this._deferredCancel,this._deferredOk,this._deferredError);var _cf=dfd.ioArgs;_cf.id=dojo._scopeName+"IoScript"+(this._counter++);_cf.canDelete=false;if(_cd.callbackParamName){_cf.query=_cf.query||"";if(_cf.query.length>0){_cf.query+="&";}_cf.query+=_cd.callbackParamName+"="+(_cd.frameDoc?"parent.":"")+"dojo.io.script.jsonp_"+_cf.id+"._jsonpCallback";_cf.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_cf.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;if(dfd.ioArgs.canDelete){dojo.io.script._deadScripts.push(dfd.ioArgs.id);}},_deferredOk:function(dfd){if(dfd.ioArgs.canDelete){dojo.io.script._deadScripts.push(dfd.ioArgs.id);}if(dfd.ioArgs.json){return dfd.ioArgs.json;}else{return dfd.ioArgs;}},_deferredError:function(_d2,dfd){if(dfd.ioArgs.canDelete){if(_d2.dojoType=="timeout"){dojo.io.script.remove(dfd.ioArgs.id);}else{dojo.io.script._deadScripts.push(dfd.ioArgs.id);}}console.debug("dojo.io.script error",_d2);return _d2;},_deadScripts:[],_counter:1,_validCheck:function(dfd){var _d5=dojo.io.script;var _d6=_d5._deadScripts;if(_d6&&_d6.length>0){for(var i=0;i<_d6.length;i++){_d5.remove(_d6[i]);}dojo.io.script._deadScripts=[];}return true;},_ioCheck:function(dfd){if(dfd.ioArgs.json){return true;}var _d9=dfd.ioArgs.args.checkString;if(_d9&&eval("typeof("+_d9+") != 'undefined'")){return true;}return false;},_resHandle:function(dfd){if(dojo.io.script._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_jsonpCallback:function(_db){this.ioArgs.json=_db;}};}if(!dojo._hasResource["dojox.timing._base"]){dojo._hasResource["dojox.timing._base"]=true;dojo.provide("dojox.timing._base");dojo.experimental("dojox.timing");dojox.timing.Timer=function(_dc){this.timer=null;this.isRunning=false;this.interval=_dc;this.onStart=null;this.onStop=null;};dojo.extend(dojox.timing.Timer,{onTick:function(){},setInterval:function(_dd){if(this.isRunning){window.clearInterval(this.timer);}this.interval=_dd;if(this.isRunning){this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);}},start:function(){if(typeof this.onStart=="function"){this.onStart();}this.isRunning=true;this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);},stop:function(){if(typeof this.onStop=="function"){this.onStop();}this.isRunning=false;window.clearInterval(this.timer);}});}if(!dojo._hasResource["fmr.rct.core"]){dojo._hasResource["fmr.rct.core"]=true;dojo.provide("fmr.rct.core");dojo.declare("fmr.rct.Container",null,{constructor:function(){if(fmr.rct.Container.caller!=fmr.rct.Container.getInstance){throw new Error("There is no public constructor for fmr.rct.Container.");}},__provider:new Array(),addProvider:function(_de){if(!_de.ProviderName){throw new Error("Provider name missing!");}if(this.__provider[_de.ProviderName]){throw new Error("Provider "+_de.ProviderName+" exist!");}this.__provider[_de.ProviderName]=_de;},getProvider:function(_df){if(!_df){throw new Error("Provider/SPI names missing!");}var _e0=_df.split(".");if(_e0.length>2){throw new Error("Invalid provider request:  "+_df);}var _e1=this.__provider[_e0[0]];if(!_e1){throw new Error("No such provider:  "+_e0[0]);}if(_e0.length==1){return _e1;}else{return _e1.getServiceProvider(_e0[1]);}},removeProvider:function(_e2){if(_e2&&this.__provider[_e2]){delete this.__provider[_e2];}else{}},listProviders:function(){for(var _p in this.__provider){}}});fmr.rct.Container._instance=null;fmr.rct.Container.getInstance=function(){if(this._instance===null){this._instance=new fmr.rct.Container();}return this._instance;};}if(!dojo._hasResource["fmr.rct.provider"]){dojo._hasResource["fmr.rct.provider"]=true;dojo.provide("fmr.rct.provider");dojo.declare("fmr.rct.Provider",null,{constructor:function(_e4){this.ProviderName=_e4;},ProviderName:null,__provider:new Array(),addServiceProvider:function(_e5){if(!_e5.ServiceProviderName){throw new Error("SPI ("+this.ProviderName+") name missing!");}if(this.__provider[_e5.ServiceProviderName]){throw new Error("SPI ("+this.ProviderName+") exist ("+_e5.ServiceProviderName+")!");}this.__provider[_e5.ServiceProviderName]=_e5;},getServiceProvider:function(_e6){if(!_e6){throw new Error("SPI ("+this.ProviderName+") name missing!");}if(!this.__provider[_e6]){throw new Error("No such SPI:  "+_e6);}return this.__provider[_e6];},removeServiceProvider:function(_e7){if(_e7&&this.__provider[_e7]){delete this.__provider[_e7];}else{}},listServiceProviders:function(){for(var _p in this.__provider){}}});}if(!dojo._hasResource["fmr.rct.eventing"]){dojo._hasResource["fmr.rct.eventing"]=true;dojo.provide("fmr.rct.eventing");dojo.declare("fmr.rct.Eventing",null,{constructor:function(){if(fmr.rct.Eventing.caller!=fmr.rct.Eventing.getInstance){throw new Error("There is no public constructor for fmr.rct.eventing.Eventing.");}this._container=fmr.rct.Container.getInstance();},_providerName:"notset",setDefaultProvider:function(_e9){if(!_e9){throw new Error("Default provider name missing!");}this._providerName="eventing."+_e9;},getServiceProvider:function(_ea){if(!_ea){return this._container.getProvider(this._providerName);}else{return this._container.getProvider("eventing."+_ea);}}});fmr.rct.Eventing.ifParentExists=function(){try{if(parent){}}catch(err){return;}if((parent.fmr!=null)&&(parent.fmr.rct!=null)&&(parent.fmr.rct.Eventing!=null)){return true;}else{return false;}};fmr.rct.Eventing._einst=null;fmr.rct.Eventing.getInstance=function(_eb){if(this._einst==null){if((this.ifParentExists())&&(parent.fmr.rct.Eventing!=fmr.rct.Eventing)){this._einst=parent.fmr.rct.Eventing._einst;}else{this._einst=new fmr.rct.Eventing();}}if(_eb=="init"){return this._einst;}else{return this._einst.getServiceProvider(_eb);}};fmr.rct.Eventing.bridgeSubscriberProxy=function(_ec,_ed,_ee){return fmr.rct.Eventing.getInstance().subscribe(_ec,fmr.rct.eventing,_ee);};fmr.rct.Eventing.bridgeUnsubscriberProxy=function(_ef){fmr.rct.Eventing.getInstance().unsubscribe(_ef);};fmr.rct.Eventing.bridgePublisherProxy=function(e){var _f1=e[0];var _f2=e.slice(1);if(fmr.rct.Eventing.getInstance()._providerName!="notset"){fmr.rct.Eventing.getInstance().publish(_f1,_f2);}};}if(!dojo._hasResource["fmr.rct.eventing.dojoevent"]){dojo._hasResource["fmr.rct.eventing.dojoevent"]=true;dojo.provide("fmr.rct.eventing.dojoevent");dojo.declare("fmr.rct.eventing.DojoEventingImpl",null,{constructor:function(){},ServiceProviderName:"dojo",publish:function(_f3,_f4){if(arguments.length!=2){throw new Error("Invalid number of arguments.");}if(typeof (_f3)!="string"){throw new Error("Topic value must be string.");}dojo.publish(_f3,_f4);},subscribe:function(_f5,_f6,_f7){if(arguments.length!=3){throw new Error("Invalid number of arguments.");}if(typeof (_f6)!="object"){throw new Error("_targetObj value must be an object.");}if(typeof (_f7)!="string"){throw new Error("taretFunc value must be a string.");}return dojo.subscribe(_f5,_f6,_f7);},unsubscribe:function(_f8){if(arguments.length!=1){throw new Error("Invalid number of arguments.");}dojo.unsubscribe(_f8);}});}if(!dojo._hasResource["fmr.rct.sal.GenericFacade"]){dojo._hasResource["fmr.rct.sal.GenericFacade"]=true;dojo.provide("fmr.rct.sal.GenericFacade");dojo.declare("fmr.rct.sal.GenericFacade",null,{constructor:function(_f9,_fa,_fb){this.handler=_f9;this.handler.incomingFilters=_fa;this.handler.outgoingFilters=_fb;},getRequest:function(_fc){return this.handler.getRequest(_fc);},send:function(_fd){this.handler.send(_fd);},cancel:function(req){this.handler.cancel(req);}});}if(!dojo._hasResource["fmr.rct.sal.GenericRequest"]){dojo._hasResource["fmr.rct.sal.GenericRequest"]=true;dojo.provide("fmr.rct.sal.GenericRequest");dojo.declare("fmr.rct.sal.GenericRequest",null,{constructor:function(){this.type="generic request";this.responder=null;this.outgoinghandler={process:function(_ff,_100){alert("request handler.process :not overridden");}};this.incominghandler={process:function(_101,_102){alert("request handler.process :not overridden");}};},setResponder:function(_103){this.responder=_103;},addFilter:function(_104,_105){if(_105){_104.handler=this.incominghandler;this.incominghandler=_104;}else{_104.handler=this.outgoinghandler;this.outgoinghandler=_104;}},send:function(){this.outgoinghandler.process(this,null);},cancel:function(){}});}if(!dojo._hasResource["fmr.rct.sal.HandlerBase"]){dojo._hasResource["fmr.rct.sal.HandlerBase"]=true;dojo.provide("fmr.rct.sal.HandlerBase");dojo.declare("fmr.rct.sal.HandlerBase",null,{constructor:function(){this.incomingFilters=[];this.outgoingFilters=[];this.config={};this.requestType=fmr.rct.sal.GenericRequest;},getRequest:function(_106){var req=new this.requestType();for(var _108 in this.config){req[_108]=this.config[_108];}if(_106){for(var _108 in _106){req[_108]=_106[_108];}}req.outgoinghandler=this._makeOutgoingProxy();req.incominghandler=this._makeIncomingProxy();var _109=true;var _10a=[this.incomingFilters,this.outgoingFilters];for(var j=0;j<_10a.length;j++){for(var i=_10a[j].length-1;i>=0;i--){req.addFilter(new _10a[j][i](),_109);}_109=false;}return req;},send:function(_req){_req.send();},cancel:function(_req){_req.cancel();},_makeOutgoingProxy:function(){var _10f=this;return {process:function(_110,_111){setTimeout(function(){_110.incominghandler.process(_110,{});},0);}};},_makeIncomingProxy:function(){return {process:function(_112,_113){_112.responder.onResponse(_112,_113);}};}});}if(!dojo._hasResource["fmr.rct.sal.filters.CS203Filter"]){dojo._hasResource["fmr.rct.sal.filters.CS203Filter"]=true;dojo.provide("fmr.rct.sal.filters.CS203Filter");dojo.declare("fmr.rct.sal.filters.CS203Filter",null,{constructor:function(){this.type="CS203Filter";this.handler=null;},process:function(_114,_115){if(_115.continueProcessing){var _116=_115.result.XML.getElementsByTagName("CS203ValidationError")[0];if(_116){_115.continueProcessing=false;}}this.handler.process(_114,_115);}});}dojo.provide("fmr.rct.sal.filters.FebSecFilter");dojo.declare("fmr.rct.sal.filters.FebSecFilter",null,{constructor:function(){this.type="initial filter (febsec)";this.handler=null;},process:function(_117,_118){if(_118.continueProcessing){if(_118.status.Code=="500"){_xmlResponse=_118.result.XML;if(_xmlResponse){_febsec=_xmlResponse.getElementsByTagName("FeBSec")[0];if(_febsec){_status=_febsec.getElementsByTagName("Status")[0].firstChild.nodeValue;_sub_status=_febsec.getElementsByTagName("Substatus")[0].firstChild.nodeValue;_reason=_febsec.getElementsByTagName("Reason")[0].firstChild.nodeValue;_as_loc=_febsec.getElementsByTagName("Location")[0].firstChild.nodeValue;_err="FebSec Error("+_status+"."+_sub_status+"): "+_reason;_118.continueProcessing=false;_evt=fmr.rct.Eventing.getInstance();_evt.publish("/febsec/timeout/error",[_as_loc,_err]);}}}}this.handler.process(_117,_118);}});if(!dojo._hasResource["fmr.rct.sal.filters.JsonExtractorFilter"]){dojo._hasResource["fmr.rct.sal.filters.JsonExtractorFilter"]=true;dojo.provide("fmr.rct.sal.filters.JsonExtractorFilter");dojo.declare("fmr.rct.sal.filters.JsonExtractorFilter",null,{constructor:function(){this.type="JsonExtractorFilter";this.handler=null;},process:function(_119,_11a){if(_11a.continueProcessing){_json=_11a.result.XML.getElementsByTagName("JSON")[0];if(_json){_11a.result.Text=_json.firstChild.nodeValue;}}this.handler.process(_119,_11a);}});}dojo.provide("fmr.rct.sal.filters.JsonPollingFilter");dojo.declare("fmr.rct.sal.filters.JsonPollingFilter",null,{constructor:function(){this.type="JSON Polling Filter";this.handler=null;},process:function(_11b,_11c){var _11d=_11c.result.JSON.POLLING_CONTROL;if(_11d){if(_11d.INTERVAL){try{var _11e=parseInt(_11d.INTERVAL);if(_11e>0){_11b.setPollingInterval(_11e);}else{_11b.cancel();}}catch(err){_11b.cancel();}}}this.handler.process(_11b,_11c);}});if(!dojo._hasResource["fmr.rct.sal.filters.StripPaddingFilter"]){dojo._hasResource["fmr.rct.sal.filters.StripPaddingFilter"]=true;dojo.provide("fmr.rct.sal.filters.StripPaddingFilter");dojo.declare("fmr.rct.sal.filters.StripPaddingFilter",null,{constructor:function(){this.type="StripPaddingFilter";this.handler=null;},_parseXml:function(_11f){if(typeof DOMParser!="undefined"){_11f=this._normalize_string(_11f);return (new DOMParser()).parseFromString(_11f,"application/xml");}else{if(typeof ActiveXObject!="undefined"){var doc=new ActiveXObject("MSXML2.DOMDocument");doc.loadXML(_11f);return doc;}else{var url="data:text/xml;charset=utf-8,"+encodeURIComponent(_11f);var _122=new XMLHttpRequest();_122.open("GET",url,false);_122.send();return _122.responseXML;}}},_trim:function(_123){var _124=_123.match(/^\s*(.*\S)\s*$/);if(_124!==null&&_124.length===2){return _124[1];}else{return _123;}},_normalize_string:function(_125){var _126="";if(_125.indexOf("\n")!=-1){string=_125.split("\n");for(var i=0;i<string.length;i++){_126+=string[i].replace(/^\s*|\s(?=\s)|\s*$/g,"");}return _126;}else{return _125;}},process:function(_128,_129){if(_129.continueProcessing){_text=this._trim(_129.result.Text);_129.result.Text=_text;_129.result.XML=this._parseXml(_text);}this.handler.process(_128,_129);}});}if(!dojo._hasResource["fmr.rct.sal.xhr.DojoXhrHandler"]){dojo._hasResource["fmr.rct.sal.xhr.DojoXhrHandler"]=true;dojo.provide("fmr.rct.sal.xhr.DojoXhrHandler");dojo.declare("fmr.rct.sal.xhr.DojoXhrHandler",fmr.rct.sal.HandlerBase,{constructor:function(){},_makeOutgoingProxy:function(){var _12a=this;return {process:function(_12b,_12c){var _12d=_12a.config["params"]||{};var _12e=dojo.mixin(_12d,_12b.params);var meth=_12b.method||_12a.config["method"]||"GET";var _130=_12b.url||_12a.config["url"];var _131=_12b.timeout||_12a.config["timeout"];var pc=_12b.preventCache||false;var _133=dojo.xhr(meth,{url:_130,handleAs:_12b.handleAs,timeout:_131,sync:_12b.sync,preventCache:pc,content:_12e,handle:function(_134,_135){if(_134 instanceof Error){if(_134.dojoType=="cancel"){_12b.responder.onFault(_12b,{continueProcessing:false,status:{Code:9998,Message:"Request cancelled by other JavaScript code"},result:{response:_134}});}else{if(_134.dojoType=="timeout"){_12b.responder.onFault(_12b,{continueProcessing:false,status:{Code:9999,Message:"Request Timeout"},result:{response:_134}});}}}else{if(_12b._cancelled===true){}}_12b.incominghandler.process(_12b,{continueProcessing:true,status:{Code:_135.xhr.status,Message:_135.xhr.statusText},result:{Text:_135.xhr.responseText,XML:_135.xhr.responseXML}});return _134;}},"POST"==meth);_133.addCallback(function(_136){if(_12b.pollingInterval&&!_12b.cancelled){console.log(_12b);_12b.pollId=setTimeout(function(){_12b.send();},_12b.pollingInterval);}});}};},_makeIncomingProxy:function(){return {process:function(_137,_138){if(_138.status.Code=="200"){_137.responder.onResponse(_137,_138);}else{_137.responder.onFault(_137,_138);}}};},getRequest:function(){var _139=this.inherited(arguments);_139.isAsync=true;_139.cancelled=false;_139.cancel=function(){clearTimeout(_139.pollId);_139.cancelled=true;};_139.setPollingInterval=function(p){_139.pollingInterval=p;};_139.send=function(){this.cancelled=false;this.outgoinghandler.process(this,null);};return _139;}});}if(!dojo._hasResource["fmr.rct.sal.jsonp.DojoJsonpHandler"]){dojo._hasResource["fmr.rct.sal.jsonp.DojoJsonpHandler"]=true;dojo.provide("fmr.rct.sal.jsonp.DojoJsonpHandler");dojo.declare("fmr.rct.sal.jsonp.DojoJsonpHandler",fmr.rct.sal.HandlerBase,{constructor:function(){},_makeOutgoingProxy:function(){var _13b=this;return {process:function(_13c,_13d){var _13e=_13c.url||_13b.config["url"];var _13f=_13c.timeout||_13b.config["timeout"];var _140=_13c.callbackParamName||_13b.config["callbackParamName"];var pc=_13c.preventCache||false;var _142=dojo.io.script.get({url:_13e,timeout:_13f,callbackParamName:_140,preventCache:pc,content:_13c.params,headers:_13c.headers,query:_13c.query,timeout:_13c.timeout,error:function(_143,_144){_13c.incominghandler.process(_13c,{continueProcessing:true,status:{Code:"999",Message:"error"},result:{}});return _143;},load:function(_145,_146){_13c.incominghandler.process(_13c,{continueProcessing:true,status:{Code:"200",Message:"Ok"},result:{JSON:_146.json}});return _145;}});_142.addCallback(function(_147){if(_13c.pollingInterval&&!_13c.cancelled){_13c.pollId=setTimeout(function(){_13c.send();},_13c.pollingInterval);}});}};},_makeIncomingProxy:function(){return {process:function(_148,_149){if(_149.status.Code=="200"){_148.responder.onResponse(_148,_149);}else{_148.responder.onFault(_148,_149);}}};},getRequest:function(){var _14a=this.inherited(arguments);_14a.isAsync=true;_14a.cancelled=false;_14a.cancel=function(){clearTimeout(_14a.pollId);_14a.cancelled=true;};_14a.setPollingInterval=function(p){_14a.pollingInterval=p;};_14a.send=function(){this.cancelled=false;this.outgoinghandler.process(this,null);};return _14a;}});}if(!dojo._hasResource["fmr.rct.sal.ServiceFactory"]){dojo._hasResource["fmr.rct.sal.ServiceFactory"]=true;dojo.provide("fmr.rct.sal.ServiceFactory");fmr.rct.sal.ServiceFactory=new function(){var doXd=false;var _14d={_default_:{facade:{clazz:"fmr.rct.sal.GenericFacade"},handler:{clazz:"fmr.rct.sal.xhr.DojoXhrHandler",request:{clazz:"fmr.rct.sal.GenericRequest"},timeout:3000,method:"GET",url:"sal-service"}}};var _14e=function(node,task,_151){for(var _152 in node){if(node.hasOwnProperty(_152)){if(node[_152]&&typeof node[_152]==="object"){_14e(node[_152],task,_152);}}}task(node,_151);};var _153={};var _154=function(node,_156){if(node.clazz&&typeof node.clazz==="string"){if(!_153[node.clazz]){_153[node.clazz]=[];dojo["require"](node.clazz);}_153[node.clazz].push(function(){node.clazz=dojo.getObject(node.clazz);});}};var _157=function(_158){_14e(_158,_154);for(var _159 in _153){while(_153[_159].length){_153[_159].shift()();}delete (_153[_159]);}};_157(_14d);this.addConfig=function(_15a,_15b){_14d[_15a]=_15b;_157(_14d[_15a]);};this.addConfigs=function(_15c){for(var _15d in _15c){this.addConfig(_15d,_15c[_15d]);}};this.getService=function(_15e){var _15f;if(!_15e){_15f={name:"_default_"};}else{if(typeof _15e==="object"){_15f=_15e;if(!_15f.name){_15f.name="_default_";}}else{if(typeof _15e==="string"){_15f={name:_15e};}else{throw new Error("Invalid type of service spec : requires object or string");}}}var _160=_14d[_15f.name];var _161=_160.handler;var _162=new _161.clazz();var _163={incomingFilters:[],outgoingFilters:[]};_162.requestType=_161.request.clazz;for(var _164 in {incomingFilters:"",outgoingFilters:""}){if(_161[_164]){_14e(_161[_164],function(node,_166){if(node.clazz){_163[_164].push(node.clazz);}},_164);}}for(var _167 in _161){switch(_167){case "clazz":case "request":case "incomingFilters":case "outgoingFilters":break;default:_162.config[_167]=_161[_167];}}for(var _167 in _15f){switch(_167){case "name":case "callback":break;case "incomingFilters":case "outgoingFilters":_163[_167]=_15f[_167];break;default:_162.config[_167]=_15f[_167];}}var _168=new _160.facade.clazz(_162,_163.incomingFilters,_163.outgoingFilters);return _168;};};}
