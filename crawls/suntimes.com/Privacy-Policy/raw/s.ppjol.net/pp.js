var DEBUG=!0;window.pressplus={profiler:{duration:{startTime:0,forInit:0}}};window.pressplus.profiler.duration.startTime=new Date;var referer=window.document.location.href;setCookie("ppRef",referer);function set_cookie(c,d,b,j,k,i,q,r){c=c+"="+escape(d);b&&(c+="; expires="+(new Date(b,j,k)).toGMTString());i&&(c+="; path="+escape(i));q&&(c+="; domain="+escape(q));r&&"https"===location.protocol&&(c+="; secure");document.cookie=c}
function del_cookie(c){document.cookie=c+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function setCookie(c,d){var b=[],b=window.location.hostname.split("."),j="";b[1]&&(j+=b[1]);b[2]&&(j+="."+b[2]);var k=new Date,b=k.getDate(),i=k.getMonth()+1,k=k.getFullYear();10>b&&(b="0"+b);10>i&&(i="0"+i);"Microsoft Internet Explorer"==navigator.appName?set_cookie(c,d,k,i,b+1,"/",j,!0):set_cookie(c,d,null,null,null,"/",j,!0)}function setCookieString(c){c=c.split("=");setCookie(c[0],c[1])}
function getInternetExplorerVersion(){var c=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(c=parseFloat(RegExp.$1));return c}
(function(c,d){var b={},j="//h.ppjol.com",k="//s.ppjol.net",i="https://ui.ppjol.com",q=!1,r="",w=2,x=[],K=1,f,B,l,n,o,s,y,u,m,p,C,G,H,z,D,E,t,F,I,g,h;"undefined"!==typeof c.console&&c.console?(f=c.console,"undefined"===typeof f.debug&&(f.debug=f.log)):f={debug:function(){},error:function(){},info:function(){},log:function(){},warn:function(){}};b.status={target:{},mostRecent:{scroll:{timestamp:0}},manualPop:{triggered:!1}};DEBUG&&("undefined"!==typeof c.USE_LOCALHOST&&!0===c.USE_LOCALHOST?(j="//h-dev.ppjol.com:8080",
k="//s-dev.ppjol.net:8080",i="//ui-dev.ppjol.com:8080"):"string"===typeof c.USE_SERVER?i=k=j=c.USE_SERVER:"object"===typeof c.USE_SERVER&&"undefined"!==typeof c.USE_SERVER.target&&("undefined"!==typeof c.USE_SERVER.target.hecate?j=c.USE_SERVER.target.hecate:f.log("HECATE_TARGET not overridden: no target specified in USE_SERVER config"),"undefined"!==typeof c.USE_SERVER.target.css?k=c.USE_SERVER.target.css:f.log("CSS_TARGET not overridden: no target specified in USE_SERVER config"),"undefined"!==typeof c.USE_SERVER.target.ui?
i=c.USE_SERVER.target.ui:f.log("UI_TARGET not overridden: no target specified in USE_SERVER config")),"undefined"!==typeof c.USE_LOCALHOST&&!0===c.USE_LOCALHOST&&f.log("window.USE_LOCALHOST is %s",c.USE_LOCALHOST));var J=navigator.userAgent.match(/MSIE\s([\d+])/);J&&parseInt(J[1],10);B=/Safari/.test(navigator.userAgent)&&!/chrome/.test(navigator.userAgent.toLowerCase());Function.prototype.bind=Function.prototype.bind||function(){var a=this,b=[].slice.call(arguments),e=b.shift();return function(){return a.apply(e,
b.concat([].slice.call(arguments)))}};b.util={observe:function(a,b,e){a.attachEvent?a.attachEvent("on"+b,e):a.addEventListener&&a.addEventListener(b,e,false)},stopObserving:function(a,b,e){a.detachEvent?a.detachEvent("on"+b,e):a.removeEventListener&&a.removeEventListener(b,e,false)},onPageReady:function(a){c.addEventListener?c.document.readyState==="complete"?a():c.addEventListener("load",a,false):c.attachEvent&&c.attachEvent("onload",a)},loadScript:function(a,v){var e=d.createElement("script"),A=
"_cb_"+b.util.uniqueString(),a=b.util.formUrl(a,{cb:A});c[A]=v;e.src=a;e.type="text/javascript";e.async=true;d.getElementsByTagName("body")[0].appendChild(e)},loadCSS:function(a){var b=d.createElement("link");b.media="screen";b.rel="stylesheet";b.type="text/css";b.href=a;d.getElementsByTagName("body")[0].appendChild(b)},trim:function(a){return a.replace(/^\s+|,?\s+$/g,"")},getCookie:function(a){var b=a+"=",e="";if(d.cookie.length>0){a=d.cookie.indexOf(b);if(a!==-1){a=a+b.length;b=d.cookie.indexOf(";",
a);if(b===-1)b=d.cookie.length;e=decodeURI(d.cookie.substring(a,b))}}return e},uniqueString:function(){var a=[],b=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],e;for(e=0;e<36;e++)a[e]=15&Math.random()*16;a[14]=4;a[19]=a[19]&3|8;for(e=0;e<36;e++)a[e]=b[a[e]];return a.join("")},formUrl:function(a,b){typeof b==="undefined"&&(b={});var e=a,c=[],d;for(d in b)c.push(d+"="+encodeURIComponent(b[d]));c.length>0&&e.indexOf("?")>-1?e=e+"&"+c.join("&"):c.length>0&&(e=e+"?"+c.join("&"));f.debug("formUrl: ",
e);return e}};b.ui={getScroll:function(){var a=0;if(c.pageYOffset)a=c.pageYOffset;else{a=d.documentElement||d.body.parentNode;a=typeof a.scrollTop==="number"?a.scrollTop:d.body.scrollTop}return a},getPageSize:function(){var a,b;a=Math.max(d.documentElement.clientWidth,d.body.scrollWidth,d.documentElement.scrollWidth,d.body.offsetWidth,d.documentElement.offsetWidth);b=Math.max(d.documentElement.clientHeight,d.body.scrollHeight,d.documentElement.scrollHeight,d.body.offsetHeight,d.documentElement.offsetHeight);
return{x:a,y:b}},getViewport:function(){var a,b;if(d.compatMode==="CSS1Compat"){a=d.documentElement.clientWidth;b=d.documentElement.clientHeight}else{a=d.body.clientWidth;b=d.body.clientHeight}return{x:a,y:b}}};b.lightbox={initLightwindow:function(){p=d.createElement("div");p.id="gregbox-outer"},initOverlay:function(){l=d.createElement("div");l.style.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDhCQzBDREZCQ0ZGMTFFMEIxQkFCQ0MxOEQzMzc5NTEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDhCQzBDRTBCQ0ZGMTFFMEIxQkFCQ0MxOEQzMzc5NTEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEOEJDMENEREJDRkYxMUUwQjFCQUJDQzE4RDMzNzk1MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEOEJDMENERUJDRkYxMUUwQjFCQUJDQzE4RDMzNzk1MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoOauxEAAAALSURBVAgdYzA+AwABNQEAGVbmvQAAAABJRU5ErkJggg%3D%3D)";
l.style.zIndex=99998;l.style.position="absolute";l.style.top=0;l.style.left=0;b.util.observe(l,"click",b.lightbox.overlayClickHandler)},overlayClickHandler:function(){return false},openLightBoxWindow:function(){var a=d.body;if(a){a.appendChild(p);a.appendChild(l);a.appendChild(o);a.appendChild(n);b.lightbox.positionOverlay();b.lightbox.positionLightwindow();p.appendChild(m);p.appendChild(s);G=true;C&&C()}},showLightBox:function(a,v){C=v;b.lightbox.initLightwindow();b.lightbox.initOverlay();b.lightbox.initIframe(a);
b.lightbox.initCloseButton();b.lightbox.initSignInLink();b.lightbox.initFooter();b.lightbox.openLightBoxWindow()},go:function(a){f.log("Requesting to go to: "+a);if(G&&m!==null)m.contentWindow.location.href=a},initIframe:function(a){m=d.createElement("iFrame");m.src=a;m.style.width="600px";m.style.height="525px";m.style.border=0;m.frameBorder=0;m.scrolling="no";m.id="innerFrame"},initSignInLink:function(){o=d.createElement("a");o.innerHTML="SIGN IN";o.id="gregbox-signInTab";b.util.observe(o,"click",
b.client.signInClickHandler)},initCloseButton:function(){n=d.createElement("img");n.src="http://s.ppjol.net/static/fb/fancy_close.png";n.style.cursor="pointer";n.style.position="absolute";n.style.zIndex=100002;b.util.observe(n,"click",b.client.closeLightBoxWindow)},initFooter:function(){y=d.createElement("div");y.id="pp-branding-privacy";u=d.createElement("div");u.id="pp-branding-help";b.util.observe(u,"click",b.client.helpClickHandler);var a=d.createElement("a");a.href="http://www.mypressplus.com/readers/privacy";
a.target="blank";a.appendChild(y);s=d.createElement("div");s.id="pp-branding";s.appendChild(u);s.appendChild(a)},positionOverlay:function(){var a=b.ui.getPageSize();l.style.width="100%";l.style.height=a.y+"px"},positionLightwindow:function(){var a=b.ui.getScroll(),v=b.ui.getViewport(),e=b.ui.getPageSize(),a=v.y/2-262+a;p.style.top=a+"px";p.style.left=e.x/2-300+"px";o.style.top=a-23+"px";o.style.left=e.x/2+150+"px";n.style.top=a-11+"px";n.style.left=e.x/2+293+"px";b.util.observe(c,"resize",b.lightbox.positionLightwindow);
b.util.observe(c,"scroll",b.lightbox.afterScrollPositionLightwindow)},afterScrollPositionLightwindow:function(){var a=Date.now();b.status.mostRecent.scroll.timestamp=a;setTimeout(function(){a-b.status.mostRecent.scroll.timestamp===0&&b.lightbox.positionLightwindow()},60)},closeLightBoxWindow:function(){var a=d.body;a.removeChild(p);a.removeChild(l);a.removeChild(n);a.removeChild(o)},displayDebugDialog:function(a){var b=d.createElement("div");b.id="ppdebug";b.style.zIndex=99999;b.style.position="absolute";
b.style.bottom="11px";b.style.right="10px";b.style.padding="2px";b.style.backgroundColor="#33aa33";b.style.width="380px";b.style.height="auto";b.style.textAlign="left";b.style.opacity="0.98";var e=d.createElement("div");e.id="ppdebugtxt";e.style.padding="10px";e.style.overflow="auto";e.style.width="360px";e.style.height="auto";e.style.fontSize="12px";e.style.fontFamily="consolas, inconsolata, courier, courier new";e.style.backgroundColor="#333";e.style.color="#33aa33";for(var c in a)if(a.hasOwnProperty(c)){var f=
d.createElement("div");f.innerHTML=a[c];e.appendChild(f)}b.appendChild(e);d.body.appendChild(b)},signIn:function(a){o.innerHTML=a},updateFooter:function(a,b,e){y.id=b;u.id=e;s.id=a}};b.postmessage={postMessage:function(a,b,e){if(b){e=e||c.parent;if(c.postMessage)e.postMessage(a,b.replace(/([^:]+:\/\/[^\/]+).*/,"$1"));else if(b)e.location=b.replace(/#.*$/,"")+"#"+ +new Date+K++ +"&"+a}},receiveMessage:function(a,b){if(c.postMessage){a&&(D=function(e){if(typeof b==="string"&&e.origin!==b||Object.prototype.toString.call(b)===
"[object Function]"&&b(e.origin)===false)return false;a(e)});if(c.addEventListener)c[a?"addEventListener":"removeEventListener"]("message",D,false);else c[a?"attachEvent":"detachEvent"]("onmessage",D)}else{z&&clearInterval(z);z=null;a&&(z=setInterval(function(){var b=d.location.hash,c=/^#?\d+&/;if(b!==H&&c.test(b)){H=b;a({data:b.replace(c,"")})}},100))}}};b.cookieCheck={checkThirdPartyCookie:function(a){E=a;b.util.loadScript(i+"/cookie/write.json",b.cookieCheck.thirdPartyCookieLoaded)},thirdPartyCookieLoaded:function(){b.util.loadScript(i+
"/cookie/check.json",b.cookieCheck.thirdPartyCookieCheck)},thirdPartyCookieCheck:function(a){var c=function(){b.lightbox.showLightBox(e,function(){o.style.visibility="hidden"})};if(a.foundCookie){d.cookie="thirdPartyCookieFound=true";f.debug("Cookie Detector found the test cookie!");E&&E()}else{d.cookie="thirdPartyCookieFound=false";f.debug("Cookie Detector did not find the test cookie Q_Q");var e=i+"/cookie/noCookieSupport.html",e=b.util.formUrl(e,{parentURL:d.location.href});if(b.config.isCookieCheckRedirectOnClose()){f.log("Setting 'go home' on close");
b.client.setGoHomeOnClose()}var a=g.isCookieCheckForSessionOnly()&&b.util.getCookie("pp_session")!=="session_in_progress",A=g.isCookieCheckForSessionOnly()&&b.util.getCookie("pp_session")==="session_in_progress";if(a){d.cookie="pp_session=session_in_progress";c()}else if(A&&b.status.manualPop.triggered===false)f.log("Cookie Detector gives up: I have already showed the No Cookie lightbox during this session.");else{c();b.status.manualPop.triggered=false}}}};b.safari={safariInitialCookiePost:function(){f.debug("executing safariInitialCookiePost");
t=b.util.getCookie("saf")||0;f.debug("'saf' cookie / safariUserIsRecognized: "+t);if(t!=1){f.debug("Appears to be your first Safari session...");var a=d.createElement("iframe");a.id="ppses";a.src=j+"/hecate/0.jsp";a.style.visibility="hidden";b.util.observe(a,"click",function(){f.log("Onload of iFrame: "+t);if(t===0){t=1;d.cookie="saf=1";d.getElementById("polsf").submit();f.log("Posted the form via hidden iframe.")}});var c=d.createElement("form");c.id="polsf";c.enctype="application/x-www-form-urlencoded";
c.action=j+"/hecate/1.html";c.method="POST";c.target="ppses";d.body.appendChild(c);d.body.appendChild(a)}}};F=function(a){function b(a){if(a!==null){a=a.split(" ");if(a.length>=2)return a[1]}return null}this.commands=[];this.blob=a;f.debug("WrapperForHecateBlob: the blob looks like this: %o",a);this.init=function(){if(this.blob.actions!==void 0&&this.blob.actions!==null)for(var a=0;a<this.blob.actions.length;a++){var b=this.blob.actions[a]!==null?this.blob.actions[a].split(" ")[0]:null;b!==null&&
this.commands.push(b)}};this.commandParameter=function(a){if(this.blob.actions!==null)for(var c=0;c<this.blob.actions.length;c++){var d=this.blob.actions[c]!==null?this.blob.actions[c].split(" ")[0]:null;if(d!==null&&d==a)return b(this.blob.actions[c])}return null};this.hasRscript=function(){for(var a in this.commands)if(this.commands[a]=="rscript")return true;return false};this.getRscript=function(){return this.hasRscript()?this.commandParameter("rscript"):null};this.hasRedirect=function(){for(var a in this.commands)if(this.commands[a]==
"redirect")return true;return false};this.getRedirect=function(){return this.hasRedirect()?this.commandParameter("redirect"):null};this.setFirstPartyCookies=function(){for(var a in this.commands)if(this.commands[a]=="cookie"){f.debug(b(this.blob.actions[a]));d.cookie=b(this.blob.actions[a])}return false};this.hasDebug=function(){return typeof this.blob.debug!="undefined"&&this.blob.debug!==null};this.getDebug=function(){return this.hasDebug()?this.blob.debug:null};this.getDenyUrl=function(){if(this.blob.denyUrl)return this.blob.denyUrl;
throw"'denyUrl' was not defined in hecate blob";};this.getAffiliateToken=function(){if(this.blob.affiliateToken)return this.blob.affiliateToken;throw"'affiliateToken' was not defined in hecate blob";};this.getLightBoxTarget=function(){if(this.blob.lightBoxTarget)return this.blob.lightBoxTarget;throw"'lightBoxTarget' was not defined in hecate blob";};this.getBorderUuid=function(){if(this.blob.borderUuid)return this.blob.borderUuid;throw"'borderUuid' was not defined in hecate blob";};this.init()};I=
function(a){function c(a){for(var a=a.getElementsByTagName("script"),d=0;d<a.length;d++)if(b.client.regexForEmbed.test(a[d].src))return a[d];throw"Could not resolve pp.js script";}this.config={};this.init=function(){var e=c(a),d=eval("["+e.innerHTML+"]");if(d[0].mode!==null&&d[0].zone!==null){this.config.mode=d[0].mode;this.config.zone=d[0].zone;this.config.border=d[0].border;this.config.debug=d[0].debug;this.config.customPreCheck=d[0].customPreCheck;this.config.cookieCheck=d[0].cookieCheck;this.config.cookieCheckCloseAction=
d[0].cookieCheckCloseAction;this.config.hashbangAware=d[0].hashbangAware;this.config.affiliateToken=d[0].affiliateToken;b.status.target.src=e.src}else throw"PP.js script invalid couldn't resolve mode and zone";};this.isValidConfig=function(){return typeof this.config.mode!=="undefined"&&typeof this.config.zone!=="undefined"};this.containsCustomPreCheck=function(){return typeof this.config.customPreCheck!=="undefined"&&this.config.customPreCheck!==null};this.getCustomPreCheckFunctionName=function(){return typeof this.config.customPreCheck!==
"undefined"?this.config.customPreCheck:null};this.isInDebugMode=function(){return a.location.hash=="#ppDebug"||this.config.debug};this.shouldClearU=function(){return a.location.hash=="#ppClearU"};this.getMode=function(){return this.config.mode};this.getZone=function(){return this.config.zone};this.hasBorder=function(){return typeof this.config.border!=="undefined"&&this.config.border!==null};this.getBorder=function(){return this.config.border};this.getAffiliateToken=function(){return this.config.affiliateToken};
this.isCookieCheck=function(){var a=/\b(manual|session|onload|true|1)\b/i.test(this.config.cookieCheck)||this.config.cookieCheck===true,b=/\bsafari\b/i.test(this.config.cookieCheck);return b===true&&B===true?true:b===false&&a===true?true:false};this.isCookieCheckOnLoad=function(){return/\bonload\b/i.test(this.config.cookieCheck)&&this.isCookieCheck()};this.isCookieCheckForSessionOnly=function(){return/\bsession\b/i.test(this.config.cookieCheck)&&this.isCookieCheck()};this.isCookieCheckOnlyForManualPop=
function(){return/\b(manual|true|1)\b/i.test(this.config.cookieCheck)||this.isCookieCheck()};this.isCookieCheckRedirectOnClose=function(){return/\bdeny\b/i.test(this.config.cookieCheckCloseAction)};this.isHashbangAware=function(){return this.config.hashbangAware};this.init()};b.client={regexForEmbed:/\bpp(.min|s)?.js/,setupLegacyManualPop:function(a){typeof c[a]==="undefined"&&(c[a]=function(){return"This is a placeholder object created by pp.js"});f.debug("setting up legacy manual pop method for global name %s",
a);c[a].pressplus={};c[a].pressplus.f={};c[a].pressplus.f.pop=b.client.pop},bindPostMessage:function(){b.postmessage.receiveMessage(function(a){f.log("Received postMessage: "+a.data);if(!c.postMessage&&c.parent.location.hash)c.parent.location.hash="";if(a.data&&a.data==="close")b.client.closeLightBoxWindow();else if(a.data&&a.data==="closerefresh"){b.client.setRefreshOnClose();b.client.closeLightBoxWindow()}else a.data&&a.data==="disableDenyURL"?b.client.setRefreshOnClose():a.data&&a.data.match(/^setC/)?
setCookieString(a.data.substring(4)):a.data&&a.data.match(/^setS/)?d.cookie=a.data.substring(4):a.data&&a.data==="updateSignInTab"?b.client.updateSignInTab():a.data&&a.data==="setRefreshOnClose"?b.client.setRefreshOnClose():a.data&&a.data==="back"?c.history.back():a.data&&a.data.match(/^pp.client/)?eval(a.data):f.log("Message received from postMessage was not recognized : "+a.data)})},hecate:function(){if(g.containsCustomPreCheck()){var a=b.client.executeCustomPreCheck();if(a===0){f.log("Custom preCheck evaluated to %o, halting execution",
a);b.client.executeNoMeterMode();return}f.debug("Custom preCheck was %o, proceeding with lightbox launch.",a)}b.client.executeHecate()},executeCustomPreCheck:function(){if(g.containsCustomPreCheck()){f.log("Custom PreCheck function was present evaluating: "+g.getCustomPreCheckFunctionName());return eval(g.getCustomPreCheckFunctionName()+"()")}return 1},paramsForMeter:function(){var a={};a.z=g.getZone();if(g.isInDebugMode())a.debug="1";if(g.hasBorder())a.border=g.getBorder();if(g.isHashbangAware())a.cid=
d.location.href;var b=d.location.hash;if(b!==null&&b.match(/^#p\+.=/)&&b.length>7){var c=b.substring(3,4),b=b.substring(5);a.pm=c;a.p=b}return a},executeNoMeterMode:function(){var a=j+"/hecate/hecate/nometer.json",c=this.paramsForMeter(),a=b.util.formUrl(a,c);f.log("HecateUrl: "+a);b.util.loadScript(a,b.client.meterModeCallBack)},executeHecate:function(){g.getMode()=="meter"?this.executeMeterMode():g.getMode()=="mobile"&&this.executeMobileMode()},executeMeterMode:function(){var a=j+"/hecate/hecate/2.json",
c=this.paramsForMeter(),a=b.util.formUrl(a,c);f.log("HecateUrl: "+a);b.util.loadScript(a,b.client.meterModeCallBack)},executeMobileMode:function(){var a=j+"/hecate/hecate/2.json",c=this.paramsForMeter();c.mobile=1;a=b.util.formUrl(a,c);f.log("HecateUrl: "+a);b.util.loadScript(a,b.client.mobileModeCallBack)},meterModeCallBack:function(a){if(a===null)throw"Unexpected response from hecate call";h=new F(a);if(h.hasDebug()){a=h.getDebug();f.log("Debug info:\n"+a);b.lightbox.displayDebugDialog(a)}if(h.hasRscript()){var c=
h.getRscript(),c=b.util.formUrl(c,{parentURL:d.location.href});f.log("Launching url in lightbox: "+c);f.log("thirdPartyCookie cookie"+b.util.getCookie("thirdPartyCookieFound"));!g.isCookieCheckOnLoad()&&!g.isCookieCheckForSessionOnly()?b.lightbox.showLightBox(c,b.client.onLightBoxWindowOpen):b.util.getCookie("thirdPartyCookieFound")==="true"?b.lightbox.showLightBox(c,b.client.onLightBoxWindowOpen):b.cookieCheck.checkThirdPartyCookie(function(){b.lightbox.showLightBox(c,b.client.onLightBoxWindowOpen)})}h.setFirstPartyCookies()},
mobileModeCallBack:function(a){if(a===null)throw"Unexpected response from hecate call";h=new F(a);if(h.hasDebug()){a=h.getDebug();f.log("Debug info:\n"+a);b.lightbox.displayDebugDialog(a)}if(h.hasRedirect()){a=h.getRedirect();a=b.util.formUrl(a,{parentURL:d.location.href});f.log("redirecting: "+a);c.location=a}},onLightBoxWindowOpen:function(){var a={};a.locale=r;b.client.querySession("isAuthenticated",a,function(a){q=a.isAuthenticated;r=a.locale;var c=a.footerId,d=a.ppBrandingPrivacyDivId,f=a.ppBrandingHelpDivId;
b.lightbox.signIn(a.signin);b.lightbox.updateFooter(c,d,f)})},updateSignInTab:function(){var a={};a.locale=r;b.client.querySession("isAuthenticated",a,function(a){q=a.isAuthenticated;r=a.locale;var c=a.footerId,d=a.ppBrandingPrivacyDivId,f=a.ppBrandingHelpDivId;b.lightbox.signIn(a.signin);b.lightbox.updateFooter(c,d,f)})},signInClickHandler:function(){var a=i,c=b.config.getAffiliateToken(),d=b.config.getBorder();if(typeof h!=="undefined"){a=h.getLightBoxTarget();c=h.getAffiliateToken();d=h.getBorderUuid()}typeof d===
"undefined"||d==""?q?b.lightbox.go(a+"/logout/NONE/u/NONE.html?zone="+b.config.getZone()):b.lightbox.go(a+"/login/NONE/u/NONE.html?zone="+b.config.getZone()):q?b.lightbox.go(a+"/logout/"+c+"/u/"+d+".html"):b.lightbox.go(a+"/login/"+c+"/u/"+d+".html")},helpClickHandler:function(){f.log("Lightbox going to help page");var a=b.config.getBorder();h!=void 0&&(a=h.getBorderUuid());b.config.getZone();var c="",c=a!=void 0&&a!="undefined"&&a!=""?i+"/help/"+a+".html":i+"/help/unknown.html";b.lightbox.go(c)},
querySession:function(a,c,d){var g="";if(typeof h==="undefined"){f.debug("Bailing out of querySession: hecateBlob is undefined - getting it is UI_TARGET !");g=i}else{g=h.getLightBoxTarget();f.debug("executing querySession: hecateBlob is %o",h)}g=g+("/session/"+a+".json");b.util.uniqueString();c&&(g=b.util.formUrl(g,c));f.log("Querying session: "+g);b.util.loadScript(g,d)},pop:function(a){var h=g.getZone();g.getMode()==="mobile"&&(a="mobile_"+a);var e=i+"/which/"+encodeURI(a)+"/r/"+encodeURI(h)+".html",
e=b.util.formUrl(e,{parentURL:d.location.href});if(getInternetExplorerVersion()==-1||getInternetExplorerVersion()>=9){b.status.manualPop.triggered=true;if(g.isCookieCheckOnlyForManualPop){f.debug("performing cookie check for manual pop");b.cookieCheck.checkThirdPartyCookie(function(){if(g.getMode()==="mobile")c.location=e;else{b.lightbox.showLightBox(e,b.client.onLightBoxWindowOpen);g.isCookieCheckRedirectOnClose()&&b.client.setGoHomeOnClose()}})}else g.getMode()==="mobile"?c.location=e:b.lightbox.showLightBox(e,
b.client.onLightBoxWindowOpen)}else g.getMode()==="mobile"?c.location=e:b.lightbox.showLightBox(e,b.client.onLightBoxWindowOpen);return false},clearU:function(){b.util.loadScript(j+"/hecate/logout.json",function(){b.client.querySession("clearu",null,function(){f.log("Success Logged Off");setCookie("RMC","",-1);setCookie("JSESSIONID","",-1);setCookie("u","",-1);setCookie("thirdPartyCookieFound","",-1)})})},closeLightBoxWindow:function(){switch(w){case 3:c.location=c.location.origin;break;case 1:try{c.location=
h.getDenyUrl()}catch(a){b.lightbox.closeLightBoxWindow()}break;case 0:b.lightbox.closeLightBoxWindow();c.location.reload(true);break;default:b.lightbox.closeLightBoxWindow()}},setGoHomeOnClose:function(){w=3},setDenyOnClose:function(){f.log("Setting deny on close");w=1},setRefreshOnClose:function(){f.log("Setting refresh on close");w=0},init:function(){b.client.preInit(function(){g=new I(d);b.config=g;if(!g.isValidConfig())throw"Config is invalid!";f.debug("config looks like: %o",g);b.client.bindPostMessage();
b.util.loadCSS(k+"/css/pp.css");if(g.isCookieCheckOnLoad()||g.isCookieCheckForSessionOnly())a:{f.debug("Cookie Detector activated! Performing cookie check");if(g.containsCustomPreCheck()){var a=b.client.executeCustomPreCheck();if(a===0){f.log("Cookie Detector: HALTING execution (custom preCheck evaluated to %o)",a);break a}}b.cookieCheck.checkThirdPartyCookie(function(){b.client.hecate()})}else{f.debug("No third party cookie check will be performed.");b.client.hecate()}b.client.setupLegacyManualPop("jQuery");
b.client.setupLegacyManualPop("$")});if(getInternetExplorerVersion()==-1||getInternetExplorerVersion()>=9)c.pressplus.profiler.duration.forInit=Date.now()-c.pressplus.profiler.duration.startTime},preInit:function(a){for(var b=0;b<x.length;b++){f.log("Invoking: "+x[b]);x[b]()}a()},registerPreInitFunction:function(a){typeof a=="function"&&x.push(new Function(a))}};c.pp=b;b.util.onPageReady(function(){B&&b.client.registerPreInitFunction(b.safari.safariInitialCookiePost());b.client.init();b.status.target.hecate=
j;b.status.target.css=k;b.status.target.ui=i;c.pressplus.client=b.client;c.pressplus.config=b.config;if(b.config.isInDebugMode()){b.status.target.loadPath=b.status.target.src.match(/^(.*\/).*$/)[1];var a=d.createElement("script");a.src=b.status.target.loadPath+"client_debugger.js";a.type="text/javascript";a.async=true;d.body.appendChild(a)}b.config.shouldClearU()&&b.client.clearU()})})(window,document);
/* Copyright 2012 PressPlus. 
 * Built at 16:19:09 EST on Tuesday, November 27 2012  */
