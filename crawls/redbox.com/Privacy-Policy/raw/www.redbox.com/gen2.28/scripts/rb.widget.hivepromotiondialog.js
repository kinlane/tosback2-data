rb.registerNamespace("rb.widget");rb.widget.hivepromotiondialog=rb.widget.base.extend({init:function(){this._super();this._widget=null;this._promoCode=null;this._showNotification=false},_onLoad:function(a,b){this._widget=this.getControl("Widget");this._promoCode=this.getQueryStringParam("promocode");if(rb.util.EnableHivePromotion===true&&this._promoCode&&$.trim(this._promoCode)!==""){this._showNotification=true}if(this._showNotification===true){this._raiseDialog("HivePromotionDialog",function(){self._closeDialog(true)},null,"450px")}},_raiseDialog:function(a,c,e,d){this._currentCtx=e;this._activeDialog=this.getControl(a).attr("type",a);var b=this._activeDialog.find(".rb-dialog-disabled").prop("checked",rb.persistence.cookie.get(a+"Disabled")!=true?false:true);var f=d||520;if(b.size()>0&&b.is(":checked")){c()}else{this._activeDialog.find(".rb-dialog-ok").unbind("click").click(rb.createDelegate(this,this._closeDialog));this._activeDialog.find(".rb-dialog-no").unbind("click").click(rb.createDelegate(this,this._closeDialog));var g=this;this._activeDialog.dialog({dialogClass:"rb-dialog-red rb-dialog",autoOpen:false,width:f,height:"auto",minHeight:120,modal:true,draggable:false,resizable:false,open:function(i,h){window.setTimeout(function(){jQuery(document).unbind("mousedown.dialog-overlay").unbind("mouseup.dialog-overlay")},100)},closeOnEscape:false});this._activeDialog.dialog("open");$(".ui-widget-overlay").click(function(){g._closeDialog()})}},_closeDialog:function(a){if(this._activeDialog){this._activeDialog.dialog("close");var b=this._activeDialog.find(".rb-dialog-disabled");if(b.size()>0){rb.persistence.cookie.set(this._activeDialog.attr("type")+"Disabled",b.is(":checked"))}}this._storeChanged=false}});