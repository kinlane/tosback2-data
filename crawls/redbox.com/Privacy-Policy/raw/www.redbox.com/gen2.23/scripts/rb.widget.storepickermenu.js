rb.registerNamespace("rb.widget");rb.widget.storepickermenu=rb.widget.base.extend({init:function(){this._super();this._hovering=false;this._dropdown=null;this._findButton=null;this._retract=null;this._widget=null;this._subscriptions=[this.events.storeChange]},_onLoad:function(a,b){this._super(a,b);this._dropdown=this.getControl("Dropdown");this._findButton=this.getControl("FindButton");this._retract=this.getControl("Retract");this._widget=this.getControl("Widget");this._findButton.click(rb.createDelegate(this,this._onButtonToggled));this._retract.click(rb.createDelegate(this,this._onButtonToggled));var c=this;this._dropdown.hover(function(){c._hovering=true},function(){c._hovering=false});$("body").mouseup(function(){if(!c._hovering){c._dropdown.hide()}})},_onButtonToggled:function(){if(this._dropdown.is(":visible")){this._dropdown.hide()}else{this._dropdown.show()}},_onStoreChange:function(a,b){if(b.state=="completed"){this._dropdown.hide()}}});