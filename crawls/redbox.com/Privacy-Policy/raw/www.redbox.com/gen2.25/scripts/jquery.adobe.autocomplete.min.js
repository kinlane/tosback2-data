(function (a) { if (!a) { return } var b = { autocomplete: true, sayt: false, account: "", searchDomain: "", inputElement: "", inputFormElement: "", delay: 150, minLength: 3, maxResults: 10, browserAutocomplete: false, submitOnSelect: true, queryCaseSensitive: false, startsWith: false, highlightWords: true, highlightWordsBegin: false, header: "", footer: "" }; a.fn.AdobeAutocomplete = function (c) { c = a.extend(b, c); a.extend(a.ui.autocomplete.prototype, { highlightMatches: function (h, f) { if (c.highlightWords || c.highlightWordsBegin) { var e = (c.highlightWordsBegin) ? "^" : ""; var g = new RegExp("(" + e + h + ")", "i"); f = f.replace(g, "<b>$1</b>") } return f } }); var d = { getAutocompleteRequest: function (o, h) { var l = (document.getElementById("sp_staged") ? document.getElementById("sp_staged").value : 0); var n = (document.location.protocol == "https:" ? "https:" : "http:"); var m = (l ? "-stage/" : "/"); var k = o.account.split(""); var g = ""; var e = 0; for (var f = 0; f < k.length; f++) { if (f >= 2) { e++; if (e == 2) { e = 0; g += (f != (k.length - 1)) ? k[f] + "/" : k[f] } else { g += k[f] } } else { g += k[f] } } return n + "//content.atomz.com/autocomplete/" + g + m + "?query=" + h + "&callback=?" }, source: function (g, e) { if (!g.term) { g.term = "" } var f = this.options.getAutocompleteRequest(c, g.term); if (!c.browserAutocomplete) { a(c.inputFormElement).attr("autocomplete", "off") } if (g.term) { var h = this; a.getJSON(f, function (n, k, m) { var o = null; var j = (h.options.queryCaseSensitive) ? "" : "i"; var l = 0; var i = (c.maxResults) ? c.maxResults : 10000; if (c.startsWith) { o = new RegExp("^" + a.ui.autocomplete.escapeRegex(g.term), j) } else { o = new RegExp(a.ui.autocomplete.escapeRegex(g.term), j) } e(a.map(n, function (p) { if (o.test(p) && l < i) { l++; return { label: h.highlightMatches(g.term, p), value: p} } })); if (c.maxResults) { n.length = c.maxResults } }) } }, open: function (e, f) { if (e.keyCode != 40 && e.keyCode != 38) { var g = ".ui-autocomplete.ui-menu.ui-widget.ui-widget-content.ui-corner-all"; a(g + " > li:first").prepend(c.header); a(g + " > li:last").append(c.footer); a(g + " li").each(function () { t = a(this).find("a").html(); t = t.replace(/\&lt;b\&gt;/g, "<b>"); t = t.replace(/\&lt;\/b\&gt;/g, "</b>"); a(this).find("a").html(t) }) } }, select: function (e, f) { e.originalTerm = a(c.inputElement).val(); a(c.inputElement).val(f.item.value); if (typeof c.onselect === "function") { c.onselect(e, f) } if (c.submitOnSelect) { a(c.inputFormElement).submit() } }, search: function (e, f) { var g = ""; if (typeof c.onsearch === "function") { c.onsearch("", "", e, f) } if (c.sayt) { return false } return c.autocomplete } }; d = a.extend(d, c); a.extend(a.ui.autocomplete.prototype.options, d); return this.autocomplete(c) } })(jQuery);