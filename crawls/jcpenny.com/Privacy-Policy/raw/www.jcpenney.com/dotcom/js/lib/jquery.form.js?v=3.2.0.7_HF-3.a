/*!
 * jQuery Form Plugin
 * version: 2.43 (12-MAR-2010)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(c){c.fn.ajaxSubmit=function(C){if(!this.length){d("ajaxSubmit: skipping submit process - no element selected");
return this;}if(typeof C=="function"){C={success:C};}var b=c.trim(this.attr("action"));if(b){b=(b.match(/^([^#]+)/)||[])[1];}b=b||window.location.href||"";C=c.extend({url:b,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},C||{});var A={};
this.trigger("form-pre-serialize",[this,C,A]);if(A.veto){d("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this;}if(C.beforeSerialize&&C.beforeSerialize(this,C)===false){d("ajaxSubmit: submit aborted via beforeSerialize callback");return this;}var j=this.formToArray(C.semantic);if(C.data){C.extraData=C.data;
for(var w in C.data){if(C.data[w] instanceof Array){for(var k in C.data[w]){j.push({name:w,value:C.data[w][k]});}}else{j.push({name:w,value:C.data[w]});}}}if(C.beforeSubmit&&C.beforeSubmit(j,this,C)===false){d("ajaxSubmit: submit aborted via beforeSubmit callback");return this;}this.trigger("form-submit-validate",[j,this,C,A]);
if(A.veto){d("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this;}var y=c.param(j);if(C.type.toUpperCase()=="GET"){C.url+=(C.url.indexOf("?")>=0?"&":"?")+y;C.data=null;}else{C.data=y;}var n=this,x=[];if(C.resetForm){x.push(function(){n.resetForm();});}if(C.clearForm){x.push(function(){n.clearForm();
});}if(!C.dataType&&C.target){var v=C.success||function(){};x.push(function(e){var f=C.replaceTarget?"replaceWith":"html";c(C.target)[f](e).each(v,arguments);});}else{if(C.success){x.push(C.success);}}C.success=function(f,h,e){for(var g=0,i=x.length;g<i;g++){x[g].apply(C,[f,h,e||n,n]);}};var z=c("input:file",this).fieldValue();
var D=false;for(var q=0;q<z.length;q++){if(z[q]){D=true;}}var a=false;if((z.length&&C.iframe!==false)||C.iframe||D||a){if(C.closeKeepAlive){c.get(C.closeKeepAlive,B);}else{B();}}else{c.ajax(C);}this.trigger("form-submit-notify",[this,C]);return this;function B(){var i=n[0];if(c(":input[name=submit]",i).length){alert('Error: Form elements must not be named "submit".');
return;}var l=c.extend({},c.ajaxSettings,C);var r=c.extend(true,{},c.extend(true,{},c.ajaxSettings),l);var s="jqFormIO"+(new Date().getTime());var I=c('<iframe id="'+s+'" name="'+s+'" src="'+l.iframeSrc+'" onload="(jQuery(this).data(\'form-plugin-onload\'))()" />');var o=I[0];I.css({position:"absolute",top:"-1000px",left:"-1000px"});
var t={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;I.attr("src",l.iframeSrc);}};var H=l.global;if(H&&!c.active++){c.event.trigger("ajaxStart");}if(H){c.event.trigger("ajaxSend",[t,l]);
}if(r.beforeSend&&r.beforeSend(t,r)===false){r.global&&c.active--;return;}if(t.aborted){return;}var h=false;var g=0;var m=i.clk;if(m){var p=m.name;if(p&&!m.disabled){l.extraData=l.extraData||{};l.extraData[p]=m.value;if(m.type=="image"){l.extraData[p+".x"]=i.clk_x;l.extraData[p+".y"]=i.clk_y;}}}function u(){var G=n.attr("target"),E=n.attr("action");
i.setAttribute("target",s);if(i.getAttribute("method")!="POST"){i.setAttribute("method","POST");}if(i.getAttribute("action")!=l.url){i.setAttribute("action",l.url);}if(!l.skipEncodingOverride){n.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});}if(l.timeout){setTimeout(function(){g=true;
e();},l.timeout);}var L=[];try{if(l.extraData){for(var F in l.extraData){L.push(c('<input type="hidden" name="'+F+'" value="'+l.extraData[F]+'" />').appendTo(i)[0]);}}I.appendTo("body");I.data("form-plugin-onload",e);i.submit();}finally{i.setAttribute("action",E);G?i.setAttribute("target",G):n.removeAttr("target");
c(L).remove();}}if(l.forceSync){u();}else{setTimeout(u,10);}var J=100;function e(){if(h){return;}var F=true;try{if(g){throw"timeout";}var Q,O;O=o.contentWindow?o.contentWindow.document:o.contentDocument?o.contentDocument:o.document;var R=l.dataType=="xml"||O.XMLDocument||c.isXMLDoc(O);d("isXml="+R);if(!R&&(O.body==null||O.body.innerHTML=="")){if(--J){d("requeing onLoad callback, DOM not available");
setTimeout(e,250);return;}d("Could not access iframe DOM after 100 tries.");return;}d("response detected");h=true;t.responseText=O.body?O.body.innerHTML:null;t.responseXML=O.XMLDocument?O.XMLDocument:O;t.getResponseHeader=function(K){var L={"content-type":l.dataType};return L[K];};if(l.dataType=="json"||l.dataType=="script"){var G=O.getElementsByTagName("textarea")[0];
if(G){t.responseText=G.value;}else{var E=O.getElementsByTagName("pre")[0];if(E){t.responseText=E.innerHTML;}}}else{if(l.dataType=="xml"&&!t.responseXML&&t.responseText!=null){t.responseXML=f(t.responseText);}}Q=c.httpData(t,l.dataType);}catch(P){d("error caught:",P);F=false;t.error=P;c.handleError(l,t,"error",P);
}if(F){l.success(Q,"success");if(H){c.event.trigger("ajaxSuccess",[t,l]);}}if(H){c.event.trigger("ajaxComplete",[t,l]);}if(H&&!--c.active){c.event.trigger("ajaxStop");}if(l.complete){l.complete(t,F?"success":"error");}setTimeout(function(){I.removeData("form-plugin-onload");I.remove();t.responseXML=null;
},100);}function f(F,E){if(window.ActiveXObject){E=new ActiveXObject("Microsoft.XMLDOM");E.async="false";E.loadXML(F);}else{E=(new DOMParser()).parseFromString(F,"text/xml");}return(E&&E.documentElement&&E.documentElement.tagName!="parsererror")?E:null;}}};c.fn.ajaxForm=function(a){return this.ajaxFormUnbind().bind("submit.form-plugin",function(b){b.preventDefault();
c(this).ajaxSubmit(a);}).bind("click.form-plugin",function(e){var k=e.target;var m=c(k);if(!(m.is(":submit,input:image"))){var b=m.closest(":submit");if(b.length==0){return;}k=b[0];}var l=this;l.clk=k;if(k.type=="image"){if(e.offsetX!=undefined){l.clk_x=e.offsetX;l.clk_y=e.offsetY;}else{if(typeof c.fn.offset=="function"){var n=m.offset();
l.clk_x=e.pageX-n.left;l.clk_y=e.pageY-n.top;}else{l.clk_x=e.pageX-k.offsetLeft;l.clk_y=e.pageY-k.offsetTop;}}}setTimeout(function(){l.clk=l.clk_x=l.clk_y=null;},100);});};c.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin");};c.fn.formToArray=function(x){var a=[];
if(this.length==0){return a;}var y=this[0];var s=x?y.getElementsByTagName("*"):y.elements;if(!s){return a;}for(var i=0,n=s.length;i<n;i++){var t=s[i];var w=t.name;if(!w){continue;}if(x&&y.clk&&t.type=="image"){if(!t.disabled&&y.clk==t){a.push({name:w,value:c(t).val()});a.push({name:w+".x",value:y.clk_x},{name:w+".y",value:y.clk_y});
}continue;}var u=c.fieldValue(t,true);if(u&&u.constructor==Array){for(var v=0,z=u.length;v<z;v++){a.push({name:w,value:u[v]});}}else{if(u!==null&&typeof u!="undefined"){a.push({name:w,value:u});}}}if(!x&&y.clk){var b=c(y.clk),j=b[0],w=j.name;if(w&&!j.disabled&&j.type=="image"){a.push({name:w,value:b.val()});
a.push({name:w+".x",value:y.clk_x},{name:w+".y",value:y.clk_y});}}return a;};c.fn.formSerialize=function(a){return c.param(this.formToArray(a));};c.fn.fieldSerialize=function(a){var b=[];this.each(function(){var i=this.name;if(!i){return;}var k=c.fieldValue(this,a);if(k&&k.constructor==Array){for(var j=0,l=k.length;
j<l;j++){b.push({name:i,value:k[j]});}}else{if(k!==null&&typeof k!="undefined"){b.push({name:this.name,value:k});}}});return c.param(b);};c.fn.fieldValue=function(l){for(var b=[],j=0,a=this.length;j<a;j++){var i=this[j];var k=c.fieldValue(i,l);if(k===null||typeof k=="undefined"||(k.constructor==Array&&!k.length)){continue;
}k.constructor==Array?c.merge(b,k):b.push(k);}return b;};c.fieldValue=function(z,i){var s=z.name,x=z.type,u=z.tagName.toLowerCase();if(typeof i=="undefined"){i=true;}if(i&&(!s||z.disabled||x=="reset"||x=="button"||(x=="checkbox"||x=="radio")&&!z.checked||(x=="submit"||x=="image")&&z.form&&z.form.clk!=z||u=="select"&&z.selectedIndex==-1)){return null;
}if(u=="select"){var a=z.selectedIndex;if(a<0){return null;}var n=[],y=z.options;var v=(x=="select-one");var r=(v?a+1:y.length);for(var w=(v?a:0);w<r;w++){var t=y[w];if(t.selected){var b=t.value;if(!b){b=(t.attributes&&t.attributes["value"]&&!(t.attributes["value"].specified))?t.text:t.value;}if(v){return b;
}n.push(b);}}return n;}return z.value;};c.fn.clearForm=function(){return this.each(function(){c("input,select,textarea",this).clearFields();});};c.fn.clearFields=c.fn.clearInputs=function(){return this.each(function(){var a=this.type,b=this.tagName.toLowerCase();if(a=="text"||a=="password"||b=="textarea"){this.value="";
}else{if(a=="checkbox"||a=="radio"){this.checked=false;}else{if(b=="select"){this.selectedIndex=-1;}}}});};c.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset();}});};c.fn.enable=function(a){if(a==undefined){a=true;
}return this.each(function(){this.disabled=!a;});};c.fn.selected=function(a){if(a==undefined){a=true;}return this.each(function(){var b=this.type;if(b=="checkbox"||b=="radio"){this.checked=a;}else{if(this.tagName.toLowerCase()=="option"){var f=c(this).parent("select");if(a&&f[0]&&f[0].type=="select-one"){f.find("option").selected(false);
}this.selected=a;}}});};function d(){if(c.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(a);}else{if(window.opera&&window.opera.postError){window.opera.postError(a);}}}}})(jQuery);