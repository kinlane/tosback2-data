try{if(!SHS){SHS={};}}
catch(e){SHS={};}
SHS.MSNBCTicker=function(params){this.showSports="";if(params.sports)
this.showSports=params.sports;this.tickerCSSWidth="100%";if(params.width)
this.tickerCSSWidth=params.width;this.dataPath='';if(params.path!=null)
this.dataPath=params.path;this.dataPath='http://scores.nbcsports.msnbc.com/ticker/';this.useJSONP=true;this.selectedSport=-1;this.selectedPeriod=-1;this.sportsData=[];this.periodData=[];this.statfoxData=[];this.initialized=false;this.lastSportsUpdate=0;this.lastGamesUpdate=0;this.sportsUpdateTimer=300;this.gamesUpdateTimer=300;this.updateThread=null;this.loadStatfox=function(sports){var ticker=this;if(this.useJSONP){$.ajax({type:"GET",url:ticker.dataPath+"data/statfox.js.asp?jsonp=true&order="+ticker.showSports+'&random='+(new Date()).getTime(),dataType:"jsonp",cache:true,jsonp:false,jsonpCallback:"loadStatfoxData"});}
else{$.ajax({type:"GET",url:ticker.dataPath+"data/statfox.js.asp?order="+ticker.showSports+'&random='+(new Date()).getTime(),dataType:"json",success:function(data){ticker.loadStatfoxData(data);},error:function(jqXHR,textStatus,errorThrown){alert("loadStatfox error: "+textStatus);}});}}
this.loadStatfoxData=function(data){this.statfoxData=data;}
this.loadSports=function(){var now=new Date();nowSecs=now.getTime();this.lastSportsUpdate=nowSecs;var ticker=this;if(this.useJSONP){$.ajax({type:"GET",url:ticker.dataPath+"data/sports.js.asp?jsonp=true&order="+ticker.showSports+'&random='+nowSecs,dataType:"jsonp",cache:true,jsonp:false,jsonpCallback:"loadSportsData"});}
else{$.ajax({type:"GET",url:ticker.dataPath+"data/sports.js.asp?order="+ticker.showSports+'&random='+nowSecs,dataType:"json",success:function(data){ticker.loadSportsData(data);},error:function(jqXHR,textStatus,errorThrown){alert("loadSports error: "+textStatus);}});}}
this.loadSportsData=function(data){var ticker=this;var current_sport_name="";var current_period_name="";if(ticker.sportsData!=""){current_sport_name=ticker.sportsData[ticker.selectedSport].sport;current_period_name=ticker.selectedPeriod;}
ticker.sportsData=data;for(var x=0;x<data.length;x++){var this_sport_nav=$(".shs_sportNav ul li:eq("+x+") a");if(this_sport_nav!=null&&this_sport_nav.length!=0){if($(this_sport_nav).attr("name")==data[x].sport){if(ticker.selectedSport==x){for(var y=$(".shs_schedNav ul li").length;y>ticker.sportsData[x].period.length;y--)
$(".shs_schedNav ul li:eq("+(y-1)+")").remove();for(var y=0;y<ticker.sportsData[x].period.length;y++){var this_period=ticker.sportsData[x].period[y];var label=this_period.label.replace(/Preseason /i,"");if(label.substr(label.length-1)=='.')label=label.substr(0,label.length-1);var title='';if(data[x].sport.toUpperCase()!="GOLF"&&data[x].sport.toUpperCase()!="NASCAR")
title=this.formatDatestamp(this_period.period);var this_period_nav=$(".shs_schedNav ul li:eq("+y+") a");if(this_period_nav!=null&&this_period_nav.length!=0){$(this_period_nav).attr("title",title);$(this_period_nav).attr("period",this_period.period);$(this_period_nav).html(label+'<span class="status"></span>');if(($(this_period_nav).hasClass('shs_active')&&ticker.selectedPeriod!=this_period.period)||(this_period.isdefault==true&&$(".shs_schedNav ul li a.shs_active").length==0)){ticker.selectedPeriod=this_period.period;$(".shs_schedNav ul li a").removeClass("shs_active");$(this_period_nav).addClass("shs_active");ticker.loadPeriod(ticker.sportsData[x].sport,this_period.period,true);}}
else{$(".shs_schedNav ul").append('<li><a href="#" title="'+title+'" period="'+this_period.period+'">'+label+'<span class="status"></span></a></li>').find("li:last a").click(function(){var x=ticker.selectedSport;var clicked_period=$(this).attr("period");if(ticker.selectedPeriod!=clicked_period){ticker.selectedPeriod=clicked_period;$(".shs_schedNav ul li a").removeClass("shs_active");$(this).addClass("shs_active");ticker.loadPeriod(ticker.sportsData[x].sport,clicked_period,true);}
return false;});if(this_period.isdefault==true&&$(".shs_schedNav ul li a.shs_active").length==0){ticker.selectedPeriod=this_period.period;$(".shs_schedNav ul li a").removeClass("shs_active");$(".shs_schedNav ul li:eq("+y+") a").addClass("shs_active");ticker.loadPeriod(ticker.sportsData[x].sport,this_period.period,true);}}}}}
else{$(this_sport_nav).attr("name",data[x].sport);$(this_sport_nav).text(data[x].sport);if(ticker.selectedSport==x)
ticker.setSport(x);}}
else{if(ticker.selectedSport==-1){$(".shs_sportNav ul").append('<li><a href="#" class="shs_active" index="'+x+'" name="'+data[x].sport+'">'+data[x].sport+'</a></li>').find("li:last a").click(function(){var x=parseInt($(this).attr("index"));if(x!=ticker.selectedSport){$(".shs_sportNav ul li a").removeClass("shs_active");$(this).addClass("shs_active");ticker.setSport(x);}
return false;});ticker.setSport(x);}
else{$(".shs_sportNav ul").append('<li><a href="#" index="'+x+'" name="'+data[x].sport+'">'+data[x].sport+'</a></li>').find("li:last a").click(function(){var x=parseInt($(this).attr("index"));if(x!=ticker.selectedSport){$(".shs_sportNav ul li a").removeClass("shs_active");$(this).addClass("shs_active");ticker.setSport(x);}
return false;});}}}
var all_sports_nav=$(".shs_sportNav ul li");for(var x=all_sports_nav.length-1;x>=data.length;x--){$(".shs_sportNav ul li:eq("+x+")").remove();}}
this.setSport=function(index){var ticker=this;$(".shs_schedNav ul").empty();if(this.selectedSport!=-1)
$("#shs_centerBlock").removeClass("shs_"+ticker.sportsData[ticker.selectedSport].sport.toLowerCase());$("#shs_centerBlock").addClass("shs_"+ticker.sportsData[index].sport.toLowerCase());this.selectedSport=index;for(var x=0;x<ticker.sportsData[index].period.length;x++){var this_period=ticker.sportsData[index].period[x];var label=this_period.label.replace(/Preseason /i,"");if(label.substr(label.length-1)=='.')label=label.substr(0,label.length-1);var title='';if(ticker.sportsData[index].sport.toUpperCase()!="GOLF"&&ticker.sportsData[index].sport.toUpperCase()!="NASCAR")
title=this.formatDatestamp(this_period.period);$(".shs_schedNav ul").append('<li><a href="#" title="'+title+'" period="'+this_period.period+'">'+label+'<span class="status"></span></a></li>').find("li:last a").click(function(){var x=ticker.selectedSport;var clicked_period=$(this).attr("period");if(ticker.selectedPeriod!=clicked_period){ticker.selectedPeriod=clicked_period;$(".shs_schedNav ul li a").removeClass("shs_active");$(this).addClass("shs_active");ticker.loadPeriod(ticker.sportsData[x].sport,clicked_period,true);}
return false;});if(this_period.isdefault==true){this.selectedPeriod=this.sportsData[index].period[x].period;$(".shs_schedNav ul li:last a").addClass("shs_active");}}
this.loadPeriod(this.sportsData[index].sport,this.selectedPeriod,true);}
this.formatDatestamp=function(datestamp){if(parseInt(datestamp)==datestamp&&datestamp.length==8){return datestamp.substr(4,2)+'/'+datestamp.substr(6,2);}
else
return"";}
this.zeroPad=function(target_string,desired_width){var pad_string="";target_string=""+target_string;for(var x=0;x<desired_width-target_string.length;x++)
pad_string+="0";return pad_string+target_string;}
this.translateShortDate=function(short_date){var gamedateArr=short_date.split('/');var today=new Date();var lastYear=new Date(today.getFullYear()-1,parseInt(gamedateArr[0])-1,gamedateArr[1]);var thisYear=new Date(today.getFullYear(),parseInt(gamedateArr[0])-1,gamedateArr[1]);var nextYear=new Date(today.getFullYear()+1,parseInt(gamedateArr[0])-1,gamedateArr[1]);var lastDiff=Math.abs(lastYear-today);var thisDiff=Math.abs(thisYear-today);var nextDiff=Math.abs(nextYear-today);var gameday=null;if(lastDiff<thisDiff){if(lastDiff<nextDiff)
return lastYear;else
return nextYear;}
else if(thisDiff<nextDiff)
return thisYear;else
return nextYear;}
this.createDatestamp=function(gameday){if(gameday!=null)
return parseInt(gameday.getFullYear()+this.zeroPad(gameday.getMonth()+1,2)+this.zeroPad(gameday.getDate(),2));else
return 0;}
this.clearGames=function(){$(".shs_scrollableArea").empty();}
this.loadPeriod=function(sport,period,is_new_period){var now=new Date();nowSecs=now.getTime();this.lastGamesUpdate=nowSecs;if(is_new_period)
this.clearGames();var ticker=this;if(this.useJSONP){$.ajax({type:"GET",url:ticker.dataPath+"data/gamesNEW.js.asp?jsonp=true&sport="+sport+"&period="+period+'&random='+nowSecs,dataType:"jsonp",cache:true,jsonp:false,jsonpCallback:"loadGamesData"});}
else{$.ajax({type:"GET",url:ticker.dataPath+"data/gamesNEW.js.asp?sport="+sport+"&period="+period+'&random='+nowSecs,dataType:"json",success:function(data){ticker.loadGamesData(data);},error:function(jqXHR,textStatus,errorThrown){alert("loadPeriod error: "+textStatus);}});}}
this.loadGamesData=function(data){var is_new_period=false;var ticker=this;var num_old_games=$(".shs_scrollableArea div.shs_board").length;if(data.games.length==0){ticker.clearGames();var eventType="Games";if(data.sport.toUpperCase()=="GOLF")
eventType="Round";else if(data.sport.toUpperCase()=="NASCAR")
eventType="Race";else if(data.sport.toUpperCase()=="CYCLING"||data.sport.toUpperCase()=="TOUR")
eventType="Stage";$(".shs_scrollableArea").append('<div class="shs_board">'+'<a href="#" onclick="return false;" class="shs_postGame">'+'	<span></span>'+'	<span class="shs_team1">No '+eventType+'</span>'+'	<span class="shs_team2">Scheduled</span>'+'	<span class="shs_team1Score"></span>'+'	<span class="shs_team2Score"></span>'+'	<span class="shs_status1"></span>'+'	<span class="shs_status2"></span>'+'</a>'+'</div>');is_new_period=true;}
else if(data.sport.toUpperCase()=="GOLF"){var tourneyXML=$.parseXML(data.games[0]);var details=$(tourneyXML).find("tournament");var scoringSystem=$(details).attr("scoring-system");var channels="/"+$(details).attr("tv")+"/";var classTV=(channels.indexOf("/NBC/")>=0?"shs_nbcTV":"");var badgeNBC=(classTV==""?"":"shs_nbcBadge");var url="http://www.golfchannel.com/tours/";var onclick="";if(url=="")onclick='onclick="return false;"';var tourney_status=$(details).attr("status");var tourney_round=$(details).attr("curr-round");var tourney_rounds=$(details).attr("rounds");if(tourney_round&&tourney_round!=''){var status_str=' - Round '+tourney_round;if(tourney_status!="In-Progress")
status_str+=' ('+tourney_status+')';$(".shs_schedNav ul li a.shs_active span.status").html(status_str);}
var golfers=$(tourneyXML).find("ticker-entry");for(var x=0;x<golfers.length;x++){var gamestate=$(golfers[x]).find("gamestate");var golfer1=$(golfers[x]).find("golfer-one");var golfer2=$(golfers[x]).find("golfer-two");var place1=$(golfer1).attr("place");var place1Class="";if(place1.length>1)place1Class="shs_doubleOffset";if(place1!='')place1=place1+') ';var status=$(gamestate).attr("status")
var statusClass="shs_postGame";switch(status){case"Pre-Round":statusClass="shs_preGame";break;case"In-Progress":statusClass="shs_curGame";break;}
var status1=$(gamestate).attr("display_status1");var status2=$(gamestate).attr("display_status2");if($(gamestate).attr("display_status1")==$(gamestate).attr("tee-time"))
status1=(""+status1).replace(/ ([AP]M)$/,"$1 ET");var this_golfer=$(".shs_scrollableArea div.shs_board:eq("+x+")");if(this_golfer==null||this_golfer.length==0)
this_golfer=$(".shs_scrollableArea").append('<div class="shs_board"></div>').find("div.shs_board:eq("+x+")");else
this_golfer.empty();if(!golfer2||golfer2.length==0){$(this_golfer).append('<a href="'+url+'" '+onclick+' target="_top" class="'+statusClass+' '+classTV+'">'+'	<span class="'+badgeNBC+'"></span>'+'	<span class="shs_team1" nowrap="true">'+place1+$(golfer1).attr("alias")+'</span>'+'	<span class="shs_team2" nowrap="true"></span>'+'	<span class="shs_team1Score"></span>'+'	<span class="shs_team2Score"></span>'+'	<span class="shs_status1 '+place1Class+'">'+$(golfer1).attr("score")+' '+status1+'</span>'+'	<span class="shs_status2"></span>'+'</a>');}
else{var place2=$(golfer2).attr("place");if(place2!='')place2=place2+') ';var tournamentClass="",golfer1Class="",golfer2Class="";if($(details).attr("name")=="Ryder Cup"){tournamentClass="shs_ryderCup";if($(golfer1).attr("team")=="USA")golfer1Class="shs_usa";else golfer1Class="shs_euro";if($(golfer2).attr("team")=="USA")golfer2Class="shs_usa";else golfer2Class="shs_euro";}
$(this_golfer).append('<a href="'+url+'" '+onclick+' target="_top" class="'+statusClass+' '+classTV+' shs_matchPlay '+tournamentClass+'">'+'	<span class="'+badgeNBC+'"></span>'+'	<span class="shs_team1 '+golfer1Class+'" nowrap="true">'+place1+$(golfer1).attr("alias")+'</span>'+'	<span class="shs_team2 '+golfer2Class+'" nowrap="true">'+place2+$(golfer2).attr("alias")+'</span>'+'	<span class="shs_team1Score">'+status1+'</span>'+'	<span class="shs_team2Score">'+status2+'</span>'+'	<span class="shs_status1"></span>'+'	<span class="shs_status2"></span>'+'</a>');}}}
else if(data.sport.toUpperCase()=="NASCAR"){var raceXML=$.parseXML(data.games[0]);var details=$(raceXML).find("race");var channels="/"+$(details).attr("tv")+"/";var classTV=(channels.indexOf("/NBC/")>=0?"shs_nbcTV":"");var badgeNBC=(classTV==""?"":"shs_nbcBadge");var url=$(details).attr("href");var onclick="";if(url=="")onclick='onclick="return false;"';var status=$(details).attr("status")
var statusClass="shs_curGame";switch(status){case"Leaderboard":statusClass="shs_preGame";break;case"Final":statusClass="shs_postGame";break;}
var race_status=$(details).attr("status");var race_laps_completed=$(details).attr("laps-completed");var race_laps=$(details).attr("laps");if(race_status=='Qualifying')
$(".shs_schedNav ul li a.shs_active span.status").html(' - Qualifying');else if(race_status=='Leaderboard')
$(".shs_schedNav ul li a.shs_active span.status").html('');else if(race_laps_completed&&race_laps_completed!=''){var status_str=' - Lap '+race_laps_completed+' of '+race_laps;if(race_status!="In-Progress")
status_str+=' ('+race_status+')';$(".shs_schedNav ul li a.shs_active span.status").html(status_str);}
var drivers=$(raceXML).find("ticker-entry");if(drivers.length==0){ticker.clearGames();$(".shs_scrollableArea").append('<div class="shs_board">'+'<a href="#" onclick="return false;" class="shs_postGame">'+'	<span></span>'+'	<span class="shs_team1">No Results</span>'+'	<span class="shs_team2">Available</span>'+'	<span class="shs_team1Score"></span>'+'	<span class="shs_team2Score"></span>'+'	<span class="shs_status1"></span>'+'	<span class="shs_status2"></span>'+'</a>'+'</div>');}
for(var x=0;x<drivers.length;x++){var gamestate=$(drivers[x]).find("gamestate");var driver=$(drivers[x]).find("driver");var place=$(driver).attr("position");var placeClass="";if(place.length>1)placeClass="shs_doubleOffset";if(place!='')place=place+') ';var this_driver=$(".shs_scrollableArea div.shs_board:eq("+x+")");if(this_driver==null||this_driver.length==0)
this_driver=$(".shs_scrollableArea").append('<div class="shs_board"></div>').find("div.shs_board:eq("+x+")");else
this_driver.empty();$(this_driver).append('<a href="'+url+'" '+onclick+' target="_top" class="'+statusClass+' '+classTV+'">'+'	<span class="'+badgeNBC+'"></span>'+'	<span class="shs_team1" nowrap="true">'+place+$(driver).attr("alias")+'</span>'+'	<span class="shs_team2" nowrap="true"></span>'+'	<span class="shs_team1Score"></span>'+'	<span class="shs_team2Score"></span>'+'	<span class="shs_status1 '+placeClass+'">'+$(gamestate).attr("display_status")+'</span>'+'	<span class="shs_status2"></span>'+'</a>');}}
else if(data.sport.toUpperCase()=="CYCLING"||data.sport.toUpperCase()=="TOUR"){var stageXML=$.parseXML(data.games[0]);var details=$(stageXML).find("stage");var channels="/"+$(details).attr("tv")+"/";var classTV=(channels.indexOf("/NBC/")>=0?"shs_nbcTV":"");var badgeNBC=(classTV==""?"":"shs_nbcBadge");var url=$(details).attr("href");var onclick="";if(url=="")onclick='onclick="return false;"';var status=$(details).attr("status")
var statusClass="shs_curGame";switch(status){case"Standings":statusClass="shs_preGame";break;case"Results":statusClass="shs_postGame";break;}
var riders=$(stageXML).find("ticker-entry");for(var x=0;x<riders.length;x++){var gamestate=$(riders[x]).find("gamestate");var rider=$(riders[x]).find("rider");var place=$(rider).attr("position");var placeClass="";if(place.length>1)placeClass="shs_doubleOffset";if(place!='')place=place+') ';var this_rider=$(".shs_scrollableArea div.shs_board:eq("+x+")");if(this_rider==null||this_rider.length==0)
this_rider=$(".shs_scrollableArea").append('<div class="shs_board"></div>').find("div.shs_board:eq("+x+")");else
this_rider.empty();$(this_rider).append('<a href="'+url+'" '+onclick+' target="_top" class="'+statusClass+' '+classTV+'">'+'	<span class="'+badgeNBC+'"></span>'+'	<span class="shs_team1" nowrap="true">'+place+$(rider).attr("alias")+'</span>'+'	<span class="shs_team2" nowrap="true"></span>'+'	<span class="shs_team1Score"></span>'+'	<span class="shs_team2Score"></span>'+'	<span class="shs_status1 '+placeClass+'">'+$(gamestate).attr("display_status")+'</span>'+'	<span class="shs_status2"></span>'+'</a>');}}
else{for(var x=0;x<data.games.length;x++){var matchXML=$.parseXML(data.games[x]);var gamestate=$(matchXML).find("gamestate");var home=$(matchXML).find("home-team");var away=$(matchXML).find("visiting-team");var tickerent=$(matchXML).find("ticker-entry");var gamecode=$(tickerent).attr("gamecode")
var channels="/"+$(gamestate).attr("tv")+"/";var classTV=(channels.indexOf("/NBC/")>=0?"shs_nbcTV":"");var badgeNBC=(classTV==""?"":"shs_nbcBadge");var status=$(gamestate).attr("status")
var statusClass="shs_curGame";switch(status){case"Pre-Game":statusClass="shs_preGame";break;case"Final":case"Postponed":case"Suspended":case"Cancelled":statusClass="shs_postGame"}
var homePossession="",awayPossession="";if(data.sport=="NFL"||data.sport=="CFB"){switch($(gamestate).attr("team-possession-id")){case $(away).attr("id"):awayPossession="shs_possesion";case $(home).attr("id"):homePossession="shs_possesion";}}
var homeWin="",awayWin="";if(status=="Final"){if(parseInt($(away).attr("score"))>parseInt($(home).attr("score")))
awayWin="shs_win";else if(parseInt($(home).attr("score"))>parseInt($(away).attr("score")))
homeWin="shs_win";}
var gamedate=ticker.translateShortDate($(gamestate).attr("gamedate"));var gamedatestamp=ticker.createDatestamp(gamedate);var todaystamp=ticker.createDatestamp(new Date());var status1=$(gamestate).attr("display_status1");var status2=$(gamestate).attr("display_status2");if($(gamestate).attr("display_status1")==$(gamestate).attr("gametime")){status2="ET";if(gamedatestamp!=todaystamp)
status2+=" "+["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][gamedate.getDay()];}
else if(statusClass=="shs_postGame"){if(status2!=""&&status1=="Final")
status2="F/"+status2;else if(status2!="")
status2=status1+"/"+status2;else if(status1=="Ppnd")
status2="PPD";else
status2=status1;status1="";}
else if(status1=="Delay")
status1="DLY";var url=$(gamestate).attr("href");var onclick="";if((url.indexOf("preview.asp")>=0||url=="")&&(gamedatestamp==todaystamp)&&(data.sport.toUpperCase()!="NFL")&&(status2!='Ppnd')&&(status2!='PPD')){var sf=ticker.statfoxData[data.sport.toUpperCase()];if(sf!=null){if(gamecode.substring(6,7)==3){url="http://matchups.nbcsports.msnbc.com/"+data.sport.toUpperCase()+"/schedule/"+ticker.createDatestamp(gamedate)+sf[$(home).attr("id")]+"2-"+sf[$(away).attr("id")]+".html";}
else{url="http://matchups.nbcsports.msnbc.com/"+data.sport.toUpperCase()+"/schedule/"+ticker.createDatestamp(gamedate)+sf[$(home).attr("id")]+"-"+sf[$(away).attr("id")]+".html";}}}
if(url==""||(status2=="PPD")&&(gamedatestamp=="20110827")){if(data.sport.toUpperCase()=="NFL"){if(data.period<0){url="http://scores.nbcsports.msnbc.com/fb/scoreboard.asp?week="+Math.abs(data.period)+"&seasontype=pre";}
else{url="http://scores.nbcsports.msnbc.com/fb/scoreboard.asp?week="+data.period;}}
else{url="http://scores.nbcsports.msnbc.com/"+data.sport.toLowerCase()+"/scoreboard.asp";}}
if(data.sport.toUpperCase()=="MLB"){if(gamecode.substring(6,7)==2){if(status1=='Top'||status1=='Bot'){status1=status1+' '+status2.substring(0,1);status2='GM1';}
else{status2=status2+' - GM1';}}
else if(gamecode.substring(6,7)==3){if(status1=='Top'||status1=='Bot'){status1=status1+' '+status2.substring(0,1);status2='GM2';}
else{status2=status2+' - GM2';}}}
var this_game=$(".shs_scrollableArea div.shs_board:eq("+x+")");if(this_game==null||this_game.length==0)
this_game=$(".shs_scrollableArea").append('<div class="shs_board"></div>').find("div.shs_board:eq("+x+")");else
this_game.empty();$(this_game).append('<a href="'+url+'" '+onclick+' target="_top" class="'+statusClass+' '+classTV+'">'+'	<span class="'+badgeNBC+'"></span>'+'	<span class="shs_team1 '+awayPossession+' '+awayWin+'" nowrap="nowrap">'+$(away).attr("alias").replace("#","")+'</span>'+'	<span class="shs_team2 '+homePossession+' '+homeWin+'" nowrap="nowrap">'+$(home).attr("alias").replace("#","")+'</span>'+'	<span class="shs_team1Score '+awayWin+'">'+$(away).attr("score")+'</span>'+'	<span class="shs_team2Score '+homeWin+'">'+$(home).attr("score")+'</span>'+'	<span class="shs_status1">'+status1+'</span>'+'	<span class="shs_status2">'+status2+'</span>'+'</a>');}}
var num_new_games=$(".shs_scrollableArea div.shs_board").length;if(num_new_games!=num_old_games)
is_new_period=true;ticker.formatTicker(is_new_period);}
this.refreshData=function(){var now=new Date();nowSecs=now.getTime();if(nowSecs>this.lastSportsUpdate+this.sportsUpdateTimer*1000)
this.loadSports();if(nowSecs>this.lastGamesUpdate+this.gamesUpdateTimer*1000)
this.loadPeriod(this.sportsData[this.selectedSport].sport,this.selectedPeriod,false);}
this.formatTicker=function(is_new_period_or_sport){if(is_new_period_or_sport)
this.resetSize();if(is_new_period_or_sport){$("#shs_leftBlock .shs_leftBlockCap").css("width","");var leftcapWidth=$("#shs_leftBlock .shs_leftBlockCap").width();leftcapWidth=Math.max(leftcapWidth,150);$("#shs_leftBlock .shs_leftBlockCap").css("width",leftcapWidth);var tickerWidth=$(".shs_customTicker").width();var tickerControlWidth=$("#shs_leftBlock .shs_leftBlockCap").outerWidth();var calculatedWidth=(tickerWidth-tickerControlWidth);$("#shs_centerBlock").css("width",calculatedWidth);}
$(".shs_overlay").fadeOut("slow");if(is_new_period_or_sport)
this.scrollFirst();$(".shs_board a").each(function(){$(this).css("width","");$(this).css("width",$(this).width()+10);});if(is_new_period_or_sport)
this.resetSize();this.refreshScroll();}
this.scrollIsSetup=function(num_steps){$("#shs_centerBlock").smoothDivScroll({scrollStep:num_steps,scrollInterval:30,countOnlyClass:"div.shs_board"});this.resetSize=function(){$("#shs_centerBlock").smoothDivScroll("recalculateScrollableArea");}
this.scrollFirst=function(){$("#shs_centerBlock").smoothDivScroll("moveToElement","first");}
this.refreshScroll=function(){}
this.initialized=true;this.formatTicker();this.loadStatfox();this.loadSports();ticker=this;if(this.updateThread==null){this.updateThread=setInterval(function(){ticker.refreshData()},5000);}}
this.scrollHandle=null;this.RESIZE_EV='onorientationchange'in window?'orientationchange':'resize';this.scrollIsSetupIOS=function(num_steps){$(".scrollingHotSpotLeft").remove();$(".scrollingHotSpotRight").remove();this.initialized=true;this.resetSize=function(){if($('.shs_scrollableArea').width()!=0&&this.scrollHandle==null){$('.shs_scrollWrapper').attr('id','shs_scrollWrapper').css('overflow-x','scroll');this.scrollHandle=new iScroll('shs_scrollWrapper',{vScroll:false,hScrollbar:false});}
var width=0;$(".shs_board").each(function(){width+=$(this).outerWidth()+4;});$('.shs_scrollableArea').css("width",width);this.refreshScroll();}
this.scrollFirst=function(){this.scrollHandle.scrollToElement('div.shs_board:nth-child(1)',0);}
this.refreshScroll=function(){ticker=this;setTimeout(function(){ticker.scrollHandle.refresh();},0);}
this.loadStatfox();this.loadSports();ticker=this;if(this.updateThread==null){this.updateThread=setInterval(function(){ticker.refreshData()},5000);}
window.addEventListener(this.RESIZE_EV,this,true);}
this.handleEvent=function(e){switch(e.type){case this.RESIZE_EV:this.formatTicker(true);break;}},this.initializeTicker=function(){this.deviceAgent=navigator.userAgent.toLowerCase();this.iOS_agentID=this.deviceAgent.match(/(iphone|ipod|ipad)/);$(".shs_customTicker").css("width",this.tickerCSSWidth);$(".shs_customTicker").addClass("shs").html('<div id="shs_leftBlock">'+'	<div class="shs_leftBlockCap">'+'		<div class="shs_sportNav">'+'			<ul>'+'			</ul>'+'		</div>'+'		<div class="shs_schedNav">'+'			<ul>'+'			</ul>'+'		</div>'+'	</div>'+'</div>'+'<div id="shs_centerBlock">'+'	<div class="shs_overlay"></div>'+'	<div class="scrollingHotSpotLeft"></div>'+'	<div class="scrollingHotSpotRight"></div>'+'	<!-- Begin Ticker Board Output -->'+'	<div class="shs_scrollWrapper">'+'		<div class="shs_scrollableArea">'+'		</div><!-- shs_scrollableArea -->'+'	</div><!-- shs_scrollWrap -->'+'</div><!-- shs_centerBlock -->');var ticker=this;if($.browser.webkit&&($.client.os=="Mac")){$('.shs_customTicker').addClass("webkit_osx");$.ajax({url:'scripts/jquery.smoothDivScroll-1.1.js',dataType:'script',cache:true,success:function(){ticker.scrollIsSetup(7);}});}else if($.browser.webkit&&($.client.os=="Windows")){$('.shs_customTicker').addClass("webkit_win");$.ajax({url:'scripts/jquery.smoothDivScroll-1.1.js',dataType:'script',cache:true,success:function(){ticker.scrollIsSetup(7);}});}else if(this.iOS_agentID){$('.shs_customTicker').addClass("webkit_ios");$.ajax({url:'scripts/iscroll-lite.js',dataType:'script',cache:true,success:function(){ticker.scrollIsSetupIOS(9);}});}else{$.ajax({url:'scripts/jquery.smoothDivScroll-1.1.js',dataType:'script',cache:true,success:function(){ticker.scrollIsSetup(7);}});}}
if(window.console&&'function'===typeof window.console.log)
this.debugPrint=function(message){window.console.log(message);}
else
this.debugPrint=function(message){$('#debug').prepend('<div>'+message+'</div>').find('div:gt(4)').remove();}
this.initializeTicker();return this;}