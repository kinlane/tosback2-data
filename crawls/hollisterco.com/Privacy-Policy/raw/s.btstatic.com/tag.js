window.BrightTag=function(b){function o(a,j){return Object.prototype.toString.call(a)==="[object "+j+"]"}function x(a){function j(a){var c,d,a=a.split(/; ?/);h={};for(var k=0,w=a.length;k<w;k++){d=a[k];c=d.indexOf("=");var g=h,e=d.slice(0,c);c=d.slice(c+1);c=unescape(c);g[e]=c}}function i(f,c,d){if(f){d=d||{};f=[f+"="+b.Escaper.cookie(c||"")];if((c=d.expires)||0===c)l.isNumber(c)&&(c=(new Date(c)).toGMTString()),f.push("expires="+c);(c=d.path)&&f.push("path="+c);(c=d.domain)&&f.push("domain="+c);
!0===d.secure&&f.push("Secure");!0===d.httponly&&f.push("HttpOnly");d=f.join(";");if(d.length<g)a.cookie=d;else throw{name:"CookieTooLongError",message:"Cookie reached 4096 byte limit"};j(a.cookie)}}function e(a,c){i(a,"",s(c||{},{expires:1}))}var h={},g=4096;j(a.cookie||"");return{get:function(a){return h[a]},set:i,remove:e,findEach:function(a,c){for(var d in h)h.hasOwnProperty(d)&&d.match(a)&&c(d,h[d])},clear:function(a){var c=s({},h),d;for(d in c)e(d,a)}}}function A(a,j){function b(a){a=a.expires;
return 0!==a&&a<=+new Date}function e(c,d){a.setItem(c,d)}function h(a,c,d){c={value:c,expires:d};b(c)||j.setItem(a,JSON.stringify(c))}function g(c){return a.getItem(c)}function f(a){a=j.getItem(a);try{return a?JSON.parse(a):void 0}catch(c){}}function c(a){return(a=f(a))&&(a.hasOwnProperty("value")&&a.hasOwnProperty("expires"))&&!b(a)?a.value:void 0}function d(a,c,d,f,g){for(var e,b,j=0,i=f.length;j<i;j++)if(e=f.key(j),!d[e]&&(d[e]=e.match(a)))void 0!=(b=g(e))&&c(e,b)}return{set:function(a,c,d){a&&
void 0!=c&&(d=d||{},(void 0!=d.expires?h:e)(a,c,d.expires))},get:function(a){return g(a)||c(a)},findEach:function(k,f){var e={};d(k,f,e,a,g);d(k,f,e,j,c)},remove:function(c){a.removeItem(c);j.removeItem(c)},purge:function(){for(var a,c,d=j.length;d--;)a=j.key(d),(c=f(a))&&(c.hasOwnProperty("value")&&c.hasOwnProperty("expires"))&&b(c)&&j.removeItem(a)}}}function C(a){var a=x(a),j=a.set,b=a.remove;a.set=function(a,b,g){g=s(g||{},{path:"/"});0===g.expires&&(g.expires=+new Date("1/1/2038"));j(a,b,g)};
a.remove=function(a,j){b(a,s(j||{},{path:"/"}))};a.purge=function(){};return a}if(b)return bt_log("tried to load tag.js again"),b;var b={pushIfDefined:function(a,b,i){a&&(a.constructor==Array&&null!=b)&&a.push(i||b)},trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},Escaper:{cookie:function(a){return!l.isString(a)?a:a.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&/g,"%26").replace(/'/g,"%27").replace(/;/g,"%3B").replace(/</g,"%3C").replace(/>/g,"%3E")},javascript:function(a){return!l.isString(a)?
a:a.replace(/\\/g,"\\\\").replace(/'/g,"\\x27").replace(/"/g,"\\x22").replace(/\n/g,"\\n").replace(/\r/g,"\\r")}},Random:{integer:function(a){return Math.floor(Math.random()*(a||1E8))}},defaultConfig:function(a){var j=C(document),a=a||window;try{a.localStorage&&a.sessionStorage&&(j=A(sessionStorage,localStorage),j.purge())}catch(i){bt_log("Unable to access DOM storage: "+i)}return{loadOnly:!1,window:window,document:document,host:"s.thebrighttag.com",parentReferrer:top!=self&&self.window?self.window.location.href:
null,docReferrer:document.referrer,data:{},store:j,errorManager:new b.ErrorManager(j)}}},y=b.eval=function(a,b,i){try{return i&&(a+=z(i)),eval.call(window,a)}catch(e){b&&b(e)}},z=function(a){return"\n//at-sourceURL=/BrightTag/"+a.replace(/\s+/g,"_")+".js"},s=b.extend=function(a,b){for(var i in b)b.hasOwnProperty(i)&&(a[i]=b[i]);return a},l=b.Types={isString:function(a){return o(a,"String")},isArray:function(a){return o(a,"Array")},isNumber:function(a){return o(a,"Number")},isBoolean:function(a){return o(a,
"Boolean")},isFunction:function(a){return o(a,"Function")},isObject:function(a){return null===a||void 0===a?!1:o(a,"Object")}},m=b.each=function(a,b){if(a)if(l.isArray(a)||a.length)for(var i=0,e=a.length;i<e;i++)b(a[i],i);else if(l.isObject(a))for(i in a)a.hasOwnProperty(i)&&b(i,a[i])};b.Blab={};b.Blab.Engine=function(a){function b(){r=!0;n=q.length;d("engine:off")}function i(){r&&d("engine:on");r=!1;B=0;(q[n++]||b)()}function e(){d("block:finish");i()}function h(c,f){return function(){var k=!1,b=
a.createElement("script");b.onload=b.onreadystatechange=function(){var a;if(!(a=k)){a:{switch(b.readyState){case void 0:case "loaded":case "complete":a=!0;break a}a=!1}a=!a}a||(k=!0,e())};b.onerror=function(){d("block:error",{type:"script",exception:"Problem loading "+c});k||e()};b.src=c;f&&(b.text=f);d("block:start",c);var g=a.getElementsByTagName("script")[0];g.parentNode.insertBefore(b,g)}}function g(c){return function(){try{if(d("block:start",c),l.isString(c))if(a.defaultView){var f=z("tags/"+
(v.tagId||"adhoc")+"-inline-b"+(n-1));a.defaultView.eval.call(window,c+f)}else a.parentWindow?a.parentWindow.execScript(c):d("block:error",{type:"wait",exception:"Could not evaluate wait block ["+c+"]"});else c()}catch(k){d("block:error",{type:"wait",exception:k})}finally{e()}}}function f(a){q.push(a);r&&i();return k}function c(a){q.splice(n+B++,0,a);return k}function d(a){var c=Array.prototype.slice.call(arguments,1);m(p,function(d){var f=[k].concat(c);(d[a]||w).apply(null,f)})}var k=this,w=function(){},
p=[],r=!1,v={},q=[],n=0,B=0;k.run=function(){d("engine:on");i()};k.options=function(a){s(v,a);return k};k.option=function(a){return v[a]};k.script=function(a){return f(h(a))};k.wait=function(a){return f(g(a))};k.preemptScript=function(a,d){return c(h(a,d))};k.preemptWait=function(a){return c(g(a))};k.listen=function(a){p.push(a);(a["engine:listen"]||w).apply(null,[k]);return k}};b.Blab.Group=function(a){function b(a){h.push(a);f&&!c&&e()}function i(a){a.run()}function e(){var a=h[g];a&&(g++,a.listen(d).run())}
var h=[],g=0,f=!1,c=!1,d={"engine:on":function(){c=!0},"engine:off":function(){c=!1;e()}},k=b;this.alwaysQueue=function(){k=b};this.neverQueue=function(){k=i};this.push=function(a){k(a);return a};this.run=function(){f=!0;e()};this.applyListener=function(a){for(var c=g,d=h.length;c<d;c++)h[c].listen(a)};this.toString=function(){return"Group[name="+a+"; working="+c+"; running="+f+"]"}};b.Blab.Manager=function(a){function j(a){return g[a]||(g[a]=new h.Group(a))}function i(a){return e.addToGroup(a,e.newEngine())}
var e=this,h=b.Blab,g={undefined:new h.Group(void 0)},f=[];g[void 0].neverQueue();e.addGlobalListener=function(a){f.push(a);m(g,function(d,f){f.applyListener(a)})};e.addToGroup=function(a,d){m(f,function(a){d.listen(a)});return j(a).push(d)};e.newEngine=function(){return new h.Engine(a)};e.group=function(a){return i(a)};e.listen=function(){return i().listen.apply(null,arguments)};e.script=function(){return i().script.apply(null,arguments)};e.wait=function(){return i().wait.apply(null,arguments)};
e.run=function(a){j(a).run()};e.alwaysQueue=function(a){j(a).alwaysQueue()};e.neverQueue=function(a){j(a).neverQueue()};e.setOptions=function(){return i()}};var t,D=[],E=function(a){t.push(a)};b.Blab.SwapwriteListener=function(a){function b(a){a.src?e.preemptScript(a.src,a.innerHTML):a.innerHTML&&e.preemptWait(a.innerHTML)}function i(b){try{a.body.appendChild(b.cloneNode(!0))}catch(f){bt_log("error appending content to body: "+f)}}var e,h=a.createElement("div");this["block:start"]=function(){var b=
a;D.push([t,b.write,b.writeln]);t=[];b.write=b.writeln=E};this["block:finish"]=function(){try{if(0!=t.length){h.innerHTML="<br/>"+t.join("");for(var e=h.childNodes||[],f=1,c=e.length;f<c;f++)("SCRIPT"==e[f].tagName?b:i)(e[f])}}finally{e=a,f=D.pop(),t=f[0],e.write=f[1],e.writeln=f[2]}};this["engine:listen"]=function(a){e=a}};b.Blab.GlobalSwapwriteListener=function(a){var j=b.Blab;this["engine:listen"]=function(b){b.listen(new j.SwapwriteListener(a))}};b.EventsManager=function(){function a(){}function j(a,
c,d){g(a,c,function(){b.EventListenerOverride(a,c,d)})}function i(a){var c=a.readyState;if("loading"==c)return!1;if("complete"==c)return!0;if(a.addEventListener)return"interactive"==c;a:{a=a.documentElement.doScroll||function(){throw"No doScroll";};try{a("left")}catch(d){a=!1;break a}a=!0}return a}function e(a,c,d){var b=this;setTimeout(function(){a()?c.call(b):e(a,c,d)},d)}var h=this,g=h.listen=function(a,c,d){a.addEventListener?a.addEventListener(c,d,!1):a.attachEvent&&a.attachEvent("on"+c,d)};
h.domReady=function(a,c){i(a)?c.call(this):a.addEventListener?g(a,"DOMContentLoaded",c):e(function(){return i(a)},c,1)};h.enablePageReadyOverrides=function(e,c){h.enablePageReadyOverrides=a;if(c.addEventListener){var d=c.readyState;"complete"==d||"interactive"==d?b.EventListenerOverride(c,"DOMContentLoaded",c):j(c,"DOMContentLoaded",c)}"complete"==c.readyState?b.EventListenerOverride(e,"load",c):j(e,"load",c)}};b.EventListenerOverride=function(a,b,i){function e(){var c=i.createEvent("Event");c.initEvent(b,
!0,!1);try{c.currentTarget=c.target=a}catch(d){bt_log("warning: can not set target for ["+b+"] event: "+d)}return c}function h(){var a=i.createEventObject("Event");a.type=b;a.cancelable=!0;a.bubbleable=!1;return a}var g=!!a.addEventListener,f=g?"addEventListener":"attachEvent",c=a[f],d=g?e:h;a[f]=function(k,e,f){if("function"==typeof e)if(k==b||k=="on"+b)setTimeout(function(){try{e.call(a,d())}catch(c){bt_log("error: overriding ["+b+"] event: "+c)}},0);else try{g?c.call(a,k,e,f):c(k,e)}catch(i){bt_log("error: proxying ["+
k+"] event: "+i)}}};b.Events=new b.EventsManager;b.EventBindingManager=function(a,j){function i(a,c){m(c,function(c,d){a[a.type+"."+c]=d});j.push(a)}function e(a,b,e){function k(c,b){m(h,function(k){var f=k.name;try{var g=j[k.dbe];if(!g){var h=j,p=k.dbe,v,q=k.dbe,n=z("event-dbes/"+f+"-page-"+(l||"adhoc")+"-event-"+a);v=d.functionWithAccess(["eventObject","eventData"],"return "+q+";"+n);g=h[p]=v}e.data(f,g.call(c.target,c,b))}catch(m){i({type:"evdbe",message:m.toString(),pageId:l||-1},{name:f,eventName:a})}})}
var f={},h=[],j={},l=(b||{}).pageId;f.data=function(a,c){h.push({name:a,dbe:c});return f};f.applyDataBindings=k;f.handler=function(d){var b=c[a];if(b&&0<b.length){var e=Array.prototype.slice.call(arguments,1);k(d,e);g(b,d,e)}};return f}function h(a){var c={},b={},e,k,f=[],g=[],h=[];c.execute=function(e,f){s(b,f||{});if(l.isFunction(e))k=e;else if(l.isString(e))a:{try{var g=z("events/"+a+"-tag-"+(b.tagId||"adhoc"));k=d.functionWithAccess(["eventObject","eventData"],e+g);break a}catch(h){i({type:"evparse",
message:h.toString(),tagId:b.tagId||-1},{eventName:a})}k=void 0}else bt_log("when.execute: unknown action: "+e);return c};c.evaluate=function(a){e=a;return c};c.fire=function(a){f.push(a);return c};c.appendData=function(a){g.push(a);return c};c.appendJs=function(a){h.push(a);return c};c.trigger=function(c,d,j){var p,l=e;p=function(a){bt_log("Invalid post-event conditional fire expression: "+l+", exception = "+a)};if(!e||y(e,p)){try{k&&k.call(c.target,c,d)}catch(o){i({type:"evwait",message:o.toString(),
tagId:b.tagId||-1},{eventName:a})}0<f.length&&(j.cf(f),m(g,function(a){j.appendData(a)}),m(h,function(a){j.appendJs(a)}))}};return c}function g(a,c,d){var e=b.instance.serverURL();m(a,function(a){a.trigger(c,d,e)});e.hasConditions()&&b.Blab.script(e.asString())}var f={},c={},d=b.jQueryLoader(a,"BrightTag.jQuery");f.Binder=e;var k=/^direct\//i;f.bind=function(a,c,f,g){var h=e(a,g,b.instance);d.ensureJQuery(function(){var a=d.getJQuery(),b=a(c);if(l.isString(c)&&!k.test(f)&&(b.on||b.live))if(b.on)a(document).on(f,
c,h.handler);else b.live(f,h.handler);else b.bind(f.split(k).pop(),h.handler)});return h};f.EventAction=h;f.when=function(a){var d=h(a),b=c[a];b||(b=c[a]=[]);b.push(d);return d};f.executeActions=g;return f};b.HTTP={};b.HTTP.Cookie=x;b.HTTP.DOMStorage=A;b.HTTP.CookieStorage=C;b.HTTP.QueryString=function(a){function b(a){if(a&&l.isString(a)){var d=a.split("&"),a={};m(d,function(d){if(""!==d){var b=d.split("="),d=decodeURIComponent(b[0]),b=b[1]&&decodeURIComponent(b[1].replace(/\+/g," "));(null==a[d]?
a[d]=[]:a[d]).push(b)}})}return a}function i(a,d){var b=[];m(a,function(a){if(l.isObject(a))return!1;a=null==a||""===a?d:a;(l.isString(a)||l.isNumber(a)||l.isBoolean(a))&&b.push(a)});return b}function e(a){return!l.isArray(a)?[a]:a}function h(a,d){var b=encodeURIComponent(a),e=encodeURIComponent(d);return b+"="+e}var g=this,f={};s(f,b(a));g.param=function(a){a=f[a]||[""];return 1<a.length?a:a[0]};g.params=function(){return f};g.appendParam=function(a,d){if(a){var b=i(e(d));0<b.length&&(f[a]=(null==
f[a]?f[a]=[]:f[a]).concat(b))}return this};g.replaceParam=function(a,d){if(a){var b=i(e(d));0<b.length&&(f[a]=(f[a]=[]).concat(b))}return this};g.appendParams=function(a){m(a,g.appendParam);return this};g.alwaysAppendParam=function(a,d){if(a){var b=i(e(d),"");0<b.length&&(f[a]=(null==f[a]?f[a]=[]:f[a]).concat(b))}return this};g.alwaysReplaceParam=function(a,d){if(a){var b=i(e(d),"");0<b.length&&(f[a]=(f[a]=[]).concat(b))}return this};g.alwaysAppendParams=function(a){m(a,g.alwaysAppendParam);return this};
g.appendPartialQueryString=function(a){a&&g.alwaysAppendParams(b(a));return this};g.deleteParam=function(a){delete f[a]};g.toString=function(){var a=[];m(f,function(d,b){m(b,function(b){a.push(h(d,b))})});return a.join("&")}};b.HTTP.URL=function(a){var j=this,i,e,h,g=a.indexOf("#");-1<g&&(h=a.substring(g+1),a=a.substring(0,g));g=a.indexOf("?");-1<g&&(e=a.substring(g+1),a=a.substring(0,g));i=a;a=new b.HTTP.QueryString(e);s(j,a);j.queryString=a.toString;j.toString=function(){var a=j.queryString();return i+
(a.length>0?"?"+a:"")};j.asString=j.toString;j.fragment=function(){return h}};b.ServerURL=function(a){function j(a,b){b&&b.findEach(a,function(a,b){e.appendParam(a,b)})}function i(a,b){return function(c){bt_log("invalid "+a+" expression: "+b+", exception = "+c)}}var e=this,h=a.window,g=a.parentReferrer,f=a.referrer;b.HTTP.URL.call(this,0===a.host.length?"":(/^[a-z0-9+.-]+:\/\/.+/.test(a.host)?"":"//")+a.host+"/tag");e.appendParams({site:a.site,referrer:f,docReferrer:a.docReferrer,mode:a.mode,H:function(a){for(var b=
5381,c=0,e=a.length;c<e;)b=(b<<5)+b+a.charCodeAt(c++);return b.toString(36)}(f||a.document.location.href)});f!==g&&e.appendParam("parentReferrer",g);j(/^btps\..+/,new b.HTTP.Cookie(a.document));j(/^btpdb\..+/,a.store);e.appendData=function(a){var b=bt_data(a),b=l.isArray(b)||l.isObject(b)?h.JSON.stringify(b):b;return e.alwaysReplaceParam("_cb_"+("bt_data('"+a+"')"),b)};e.appendJs=function(a){var b=i("client binding expression",a);return e.alwaysReplaceParam("_cb_"+a,y(a,b))};e.cf=function(a){l.isArray(a)||
(a=[a]);var b=e.param("cf");b&&(a=Array(b).concat(a));e.replaceParam("cf",a.join());return e};e.addCf=function(a,b){if(!y(b,i("conditional fire",b,"tags/"+a+"-cf.js")))return!1;var c=e.param("cf");e.replaceParam("cf",c?c+","+a:a);return!0};var c=e.toString();e.hasConditions=function(){return c!=e.toString()}};b.AsyncTagManager=function(a,b){var i=!1,e={domready:!0};this.addTag=function(h,g){var f=g&&g.group;a.group(f||(!i?"domready":void 0)).options(g&&g.tagId?{tagId:g.tagId}:{}).wait(function(){b.write(h)});
f&&(i?null==e[f]&&(a.run(f),e[f]=!0):e[f]=!0)};this.domReady=function(){i=!0;a.addGlobalListener(new a.GlobalSwapwriteListener(b));m(e,a.run)}};b.Page=function(a,j){function i(a){m(l.isArray(a)?a:[a],function(a){l.isFunction(a)?a():r.write('<script type="text/javascript" src="'+a+'"><\/script>')})}function e(a){var b=q.group().options({tagId:-2});m(l.isArray(a)?a:[a],function(a){(l.isFunction(a)?b.wait:b.script)(a)})}function h(a){r.write(a)}function g(a,b){t.addTag(a,b)}function f(a){m(a,function(a){if(a.name){var b=
s({},a);delete b.name;delete b.value;o.set(a.name,a.value,b)}})}function c(b){n.hasErrors()&&(b.appendParam("errors",n.toJSON()),2083<b.toString().length&&(b.deleteParam("errors"),n.tooManyErrors(),b.appendParam("errors",n.toJSON())));n.reset({site:a.site,referrer:a.referrer||r.location.href})}var d=this,k=void 0,w=a.data||{},p=void 0,r=a.document||{},v=a.window||{},q=a.blab||b.Blab,n=a.errorManager,o=a.store,t=a.asyncTagManager||new b.AsyncTagManager(q,r);d.referrer=a.referrer;d.parentReferrer=a.parentReferrer;
d.docReferrer=a.docReferrer;d.site=a.site;d.host=a.host;n&&q.addGlobalListener(n);q.run("serializer");d.load=function(){var a=Array.prototype.slice.call(arguments,0);m(a,function(a){l.isFunction(a)?q.addToGroup("serializer",q.newEngine().wait(function(){a(d)})):l.isObject(a)&&a.src?d.library(a.src,a.options):l.isString(a)&&d.library(a)})};d.library=function(a,b){q.addToGroup("serializer",q.newEngine().options(b||{}).script(a))};var u="sync"===a.mode;d.writeScript=u?i:e;d.appendContent=u?h:g;d.domReady=
function(){"sync"===a.mode&&(d.writeScript=e,d.appendContent=g);t.domReady()};d.parameter=function(a){void 0==k&&(k=new b.HTTP.URL(r.location.href));return k.param(a)};d.meta=function(a){p||(p={},m(r.getElementsByTagName("meta"),function(a){p[a.getAttribute("name")]=a.getAttribute("content")}));return p[a]||""};d.cookie=function(a){return(new b.HTTP.Cookie(r)).get(a)||""};d.data=function(a,b){if(void 0!==b)return w[a]=b;b=w[a];return void 0==b?"":b};d.dbe=function(a,b,c){d.data(a,y(b,function(b){n&&
n.push({type:"dbe",message:b.toString(),"dbe.name":a,pageId:(c||{}).pageId||-1})},"page-dbes/"+a+"-page-"+(c&&c.pageId||"adhoc")))};d.errors=function(a){n.configure(a)};d.store=o?f:function(){};d.serverURL=function(){return new b.ServerURL(a)};d.defaultBaseUri=function(){return("https:"==r.location.protocol?"https:":"http:")+"//s.btstatic.com/"};d.baseUri=function(){var a=/\btag(\.[^.]+|-n)?\.js(#.*)?$/;return j&&j.src&&j.src.replace(a,"")||d.defaultBaseUri()};d.primary=function(){function a(){var b=
d.serverURL();n&&(n.processStoredErrors(),c(b));return b.toString()}var b=[];v.JSON?b.push(a()):(b.push(d.baseUri()+"json2.js"),b.push(function(){d.writeScript(a())}));d.writeScript(b)};d.secondary=function(a){var b=d.serverURL(),e=b.toString();a(b);b.toString()!=e&&(n&&c(b),d.writeScript(b.toString()))}};b.ErrorManager=function(a,b){function i(b){d.push(e(b));a.set(k,h.toJSON())}function e(a){var b=l.isObject(a)?s({},a):{};b.type=b.type||"unknown";b.message=b.message||a.toString();b.timestamp=m;
return b}if(!a)throw"ErrorManager requires a store";var h={},g,f,c=!0,d=[],k="__bterr",m=+new Date,p=h.configure=function(a){a.hasOwnProperty("enabled")&&(c=a.enabled);a.hasOwnProperty("timestamp")&&(m=a.timestamp);a.hasOwnProperty("site")&&(g=a.site);a.hasOwnProperty("referrer")&&(f=a.referrer)};b&&p(b);h.reset=function(b){b&&p(b);d=[];a.remove(k)};h.hasErrors=function(){return 0<d.length};h.toArray=function(){return d};h.toJSON=function(){try{return JSON.stringify({site:g,referrer:f,errors:d})}catch(a){bt_log("problem serializing errors: "+
a.message)}return null};h.push=function(a){bt_log("error: "+JSON.stringify(a));if(c&&a&&!(-1>a.tagId||-1>a.pageId))try{i(a)}catch(b){if("CookieTooLongError"!=b.name)throw b;h.tooManyErrors()}};h.tooManyErrors=function(){h.reset();i({type:"runtime",message:"Too many errors"})};h["block:error"]=function(a,b){if(b){var c=b.type,d=b.exception||b,e=a.option("tagId")||-1;h.push({type:c,message:d.toString(),tagId:e})}};h.processStoredErrors=function(){var b=a.get(k);if(b)try{var c=JSON.parse(b)||{};g=c.site;
f=c.referrer;l.isArray(c.errors)&&(d=d.concat(c.errors))}catch(e){bt_log("problem reading stored errors: "+e.message)}};return h};b.CookieSyncEngine=function(a){var j={fn:function(a){a()},next:null},i=j,e=a.document,h=function(a){if("function"!=typeof a)return!1;a={fn:a,next:null};i=i.next=a;return!0},g=function(){if(j){var a=j.fn;j=j.next;a(g)}},f=g;b.Events.listen(a,"load",f);return{sync:f,push:function(a){return h(a)},pushImage:function(b){return h(function(d){var e=new a.Image;e.onerror=e.onload=
d;e.src=b})},pushIframe:function(a){return h(function(b){var f=e.createElement("iframe");f.onerror=f.onload=b;f.width=0;f.height=0;f.style.border=0;f.src=a;e.body.appendChild(f)})}}};b.jQueryLoader=function(a,j){return new function(a,e){function h(a){j.wait(a)}function g(a){function e(){d=b.jQuery;h(a)}c="var $ = BrightTag.$; ";b.jQuery?e():j.script(b.instance.baseUri()+"BrightTag.jquery-1.5.1.js").wait(e)}var f={},c="",d,j=b.Blab.group(e);f.getJQuery=function(){return d};f.ensureJQuery=function(c){f.ensureJQuery=
h;d=a.jQuery;(d?h:g)(c);b.Blab.run(e)};f.functionWithAccess=function(a,b){return new Function(a,c+b)};return f}(a,j)};b.Main=function(a){var j=b.Events,i;a:{i=/\/tag(\.[^.]+|-n)?\.js(#.*)?$/;for(var e=a.document.getElementsByTagName("script"),h=e.length-1;-1<h;h--){var g=e[h];if(i.test(g.src)){i=g;break a}}i=void 0}if(i){if(e=(new b.HTTP.URL(i.src)).fragment())e=(new b.HTTP.QueryString(e)).params(),m(e,function(b,c){a[b]=c[0]});e=function(a){bt_log("configuration error: "+a)};h=b.trim(i.innerHTML);
0!==h.length&&s(a,y("(\n"+h+"\n)",e,"site-config"))}if(void 0!=a.site){j.enablePageReadyOverrides(a.window,a.document);try{var f=new b.Page(a,i);j.domReady(a.document,function(){f.domReady()});a.loadOnly||f.primary();return f}catch(c){bt_log("execution error: "+c)}}};var u=b.defaultConfig();s(b.Blab,new b.Blab.Manager(u.document));b.$LAB=b.Blab;b.EventBinding=b.EventBindingManager(u.window,u.errorManager);b.CookieSync=b.CookieSyncEngine(u.window);b.instance=b.Main(u);void 0==b.instance&&setTimeout(function(){void 0==
b.instance&&(b.instance=b.Main(u))},0);return b}(window.BrightTag);function bt_parameter(b){return BrightTag.instance.parameter(b)}function bt_meta(b){return BrightTag.instance.meta(b)}function bt_cookie(b){return BrightTag.instance.cookie(b)}function bt_data(b,o){return BrightTag.instance.data(b,o)}window.bt_data_escaped=bt_data;function bt_log(b){window.console&&console.log&&console.log("BrightTag: "+b)}var bt_handle_exception=bt_log,_bt_url_prefix,_bt_referrer,_bt_site,_bt_mode;
function btServe(b){if(void 0==BrightTag.instance){var o=BrightTag,x=o.extend({referrer:_bt_referrer,site:_bt_site,mode:_bt_mode},o.defaultConfig());void 0!=_bt_url_prefix&&(x.host=_bt_url_prefix);o.instance=o.Main(o.extend(x,b||{}))}};
