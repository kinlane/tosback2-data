window.BrightTag=function(c){function p(a,c){return Object.prototype.toString.call(a)==="[object "+c+"]"}function v(a){function k(a){var b,d,a=a.split(/; ?/);e={};for(var j=0,s=a.length;j<s;j++){d=a[j];b=d.indexOf("=");var g=e,f=d.slice(0,b);b=d.slice(b+1);b=unescape(b);g[f]=b}}function i(h,b,d){if(h){d=d||{};h=[h+"="+c.Escaper.cookie(b||"")];if((b=d.expires)||0===b)l.isNumber(b)&&(b=(new Date(b)).toGMTString()),h.push("expires="+b);(b=d.path)&&h.push("path="+b);(b=d.domain)&&h.push("domain="+b);
!0===d.secure&&h.push("Secure");!0===d.httponly&&h.push("HttpOnly");d=h.join(";");if(d.length<g)a.cookie=d;else throw{name:"CookieTooLongError",message:"Cookie reached 4096 byte limit"};k(a.cookie)}}function f(a,b){i(a,"",q(b||{},{expires:1}))}var e={},g=4096;k(a.cookie||"");return{get:function(a){return e[a]},set:i,remove:f,findEach:function(a,b){for(key in e)e.hasOwnProperty(key)&&key.match(a)&&b(key,e[key])},clear:function(a){var b=q({},e);for(key in b)f(key,a)}}}function A(a,c){function i(b){b=
b.expires;return 0!==b&&b<=+new Date}function f(b,d){a.setItem(b,d)}function e(b,a,d){a={value:a,expires:d};i(a)||c.setItem(b,JSON.stringify(a))}function g(b){return a.getItem(b)}function h(b){b=c.getItem(b);try{return b?JSON.parse(b):void 0}catch(a){}}function b(b){return(b=h(b))&&(b.hasOwnProperty("value")&&b.hasOwnProperty("expires"))&&!i(b)?b.value:void 0}function d(b,a,d,h,g){for(var c,f,e=0,i=h.length;e<i;e++)if(c=h.key(e),!d[c]&&(d[c]=c.match(b)))void 0!=(f=g(c))&&a(c,f)}return{set:function(b,
a,d){b&&void 0!=a&&(d=d||{},(void 0!=d.expires?e:f)(b,a,d.expires))},get:function(a){return g(a)||b(a)},findEach:function(h,e){var f={};d(h,e,f,a,g);d(h,e,f,c,b)},remove:function(b){a.removeItem(b);c.removeItem(b)},purge:function(){for(var b,a,d=c.length;d--;)b=c.key(d),(a=h(b))&&(a.hasOwnProperty("value")&&a.hasOwnProperty("expires"))&&i(a)&&c.removeItem(b)}}}function C(a){var a=v(a),c=a.set,i=a.remove;a.set=function(a,e,g){g=q(g||{},{path:"/"});0===g.expires&&(g.expires=+new Date("1/1/2038"));c(a,
e,g)};a.remove=function(a,c){i(a,q(c||{},{path:"/"}))};a.purge=function(){};return a}if(c)return bt_log("tried to load tag.js again"),c;var c={pushIfDefined:function(a,c,i){a&&(a.constructor==Array&&null!=c)&&a.push(i||c)},trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},Escaper:{cookie:function(a){return!l.isString(a)?a:a.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&/g,"%26").replace(/'/g,"%27").replace(/;/g,"%3B").replace(/</g,"%3C").replace(/>/g,"%3E")},javascript:function(a){return!l.isString(a)?
a:a.replace(/\\/g,"\\\\").replace(/'/g,"\\x27").replace(/"/g,"\\x22").replace(/\n/g,"\\n").replace(/\r/g,"\\r")}},Random:{integer:function(a){return Math.floor(Math.random()*(a||1E8))}},defaultConfig:function(){var a=C(document);window.localStorage&&window.sessionStorage&&(a=A(sessionStorage,localStorage),a.purge());return{loadOnly:!1,window:window,document:document,host:"s.thebrighttag.com",parentReferrer:top!=self?self.window.location.href:null,docReferrer:document.referrer,data:{},store:a,errorManager:new c.ErrorManager(a)}}},
x=c.eval=function(a,c,i){try{return i&&(a+=z(i)),eval.call(void 0,a)}catch(f){c&&c(f)}},z=function(a){return"\n//at-sourceURL=/BrightTag/"+a.replace(/\s+/g,"_")+".js"},q=c.extend=function(a,c){for(var i in c)c.hasOwnProperty(i)&&(a[i]=c[i]);return a},l=c.Types={isString:function(a){return p(a,"String")},isArray:function(a){return p(a,"Array")},isNumber:function(a){return p(a,"Number")},isBoolean:function(a){return p(a,"Boolean")},isFunction:function(a){return p(a,"Function")},isObject:function(a){return null===
a||void 0===a?!1:p(a,"Object")}},m=c.each=function(a,c){if(a)if(l.isArray(a)||a.length)for(var i=0,f=a.length;i<f;i++)c(a[i],i);else if(l.isObject(a))for(i in a)a.hasOwnProperty(i)&&c(i,a[i])};c.Blab={};c.Blab.Engine=function(a){function c(){n=!0;o=r.length;d("engine:off")}function i(){n=!1;B=0;(r[o++]||c)()}function f(){d("block:finish");i()}function e(b,h){return function(){var c=!1,j=a.createElement("script");j.onload=j.onreadystatechange=function(){var b;if(!(b=c)){a:{switch(j.readyState){case void 0:case "loaded":case "complete":b=
!0;break a}b=!1}b=!b}b||(c=!0,f())};j.onerror=function(){d("block:error",{type:"script",exception:"Problem loading "+b});c||f()};j.src=b;j.text=h;d("block:start",b);var g=a.getElementsByTagName("script")[0];g.parentNode.insertBefore(j,g)}}function g(b){return function(){try{if(d("block:start",b),l.isString(b))if(a.defaultView){var c=z("tags/"+(w.tagId||"adhoc")+"-inline-b"+(o-1));a.defaultView.eval.call(void 0,b+c)}else a.parentWindow?a.parentWindow.execScript(b):d("block:error",{type:"wait",exception:"Could not evaluate wait block ["+
b+"]"});else b()}catch(h){d("block:error",{type:"wait",exception:h})}finally{f()}}}function h(b){r.push(b);n&&i();return j}function b(b){r.splice(o+B++,0,b);return j}function d(b){var a=Array.prototype.slice.call(arguments,1);m(t,function(d){var c=[j].concat(a);(d[b]||s).apply(null,c)})}var j=this,s=function(){},t=[],n=!1,w={},r=[],o=0,B=0;j.run=function(){d("engine:on");i()};j.options=function(b){q(w,b);return j};j.option=function(b){return w[b]};j.script=function(b){return h(e(b))};j.wait=function(b){return h(g(b))};
j.preemptScript=function(a,d){return b(e(a,d))};j.preemptWait=function(a){return b(g(a))};j.listen=function(b){t.push(b);(b["engine:listen"]||s).apply(null,[j]);return j}};c.Blab.Group=function(a){function c(a){e.push(a);h&&!b&&f()}function i(b){b.run()}function f(){var b=e[g];b&&(g++,b.listen(d).run())}var e=[],g=0,h=!1,b=!1,d={"engine:on":function(){b=!0},"engine:off":function(){b=!1;f()}},j=c;this.alwaysQueue=function(){j=c};this.neverQueue=function(){j=i};this.push=function(b){j(b);return b};
this.run=function(){h=!0;f()};this.applyListener=function(b){for(var a=g,d=e.length;a<d;a++)e[a].listen(b)};this.toString=function(){return"Group[name="+a+"; running="+h+"]"}};c.Blab.Manager=function(a){function k(b){return g[b]||(g[b]=new e.Group(b))}function i(b){return f.addToGroup(b,f.newEngine())}var f=this,e=c.Blab,g={undefined:new e.Group(void 0)},h=[];g[void 0].neverQueue();f.addGlobalListener=function(b){h.push(b);m(g,function(a,c){c.applyListener(b)})};f.addToGroup=function(b,a){m(h,function(b){a.listen(b)});
return k(b).push(a)};f.newEngine=function(){return new e.Engine(a)};f.group=function(b){return i(b)};f.listen=function(){return i().listen.apply(null,arguments)};f.script=function(){return i().script.apply(null,arguments)};f.wait=function(){return i().wait.apply(null,arguments)};f.run=function(b){k(b).run()};f.alwaysQueue=function(b){k(b).alwaysQueue()};f.neverQueue=function(b){k(b).neverQueue()};f.setOptions=function(){return i()}};var u,D=[],F=function(a){u.push(a)};c.Blab.SwapwriteListener=function(a){function c(a){a.src?
f.preemptScript(a.src,a.innerHTML):a.innerHTML&&f.preemptWait(a.innerHTML)}function i(c){try{a.body.appendChild(c.cloneNode(!0))}catch(h){bt_log("error appending content to body: "+h)}}var f,e=a.createElement("div");this["block:start"]=function(){var c=a;D.push([u,c.write,c.writeln]);u=[];c.write=c.writeln=F};this["block:finish"]=function(){try{if(0!=u.length){e.innerHTML="<br/>"+u.join("");for(var g=e.childNodes||[],h=1,b=g.length;h<b;h++)("SCRIPT"==g[h].tagName?c:i)(g[h])}}finally{g=a,h=D.pop(),
u=h[0],g.write=h[1],g.writeln=h[2]}};this["engine:listen"]=function(a){f=a}};c.Blab.GlobalSwapwriteListener=function(a){var k=c.Blab;this["engine:listen"]=function(c){c.listen(new k.SwapwriteListener(a))}};c.EventsManager=function(){function a(){}function k(a,b,d){g(a,b,function(){(!d||d())&&c.EventListenerOverride(a,b)})}function i(a){var b=a.readyState;if("loading"==b)return!1;if("complete"==b)return!0;if(a.addEventListener)return"interactive"==b;a:{a=a.documentElement.doScroll||function(){throw"No doScroll";
};try{a("left")}catch(d){a=!1;break a}a=!0}return a}function f(a,b,d){var c=this;setTimeout(function(){a()?b.call(c):f(a,b,d)},d)}var e=this,g=e.listen=function(a,b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent&&a.attachEvent("on"+b,d)};e.domReady=function(a,b){i(a)?b.call(this):a.addEventListener?g(a,"DOMContentLoaded",b):f(function(){return i(a)},b,1)};e.enablePageReadyOverrides=function(h,b){e.enablePageReadyOverrides=a;"complete"==b.readyState?c.EventListenerOverride(h,"load"):
k(h,"load");if(b.addEventListener){var d=b.readyState;"complete"==d||"interactive"==d?c.EventListenerOverride(b,"DOMContentLoaded"):k(b,"DOMContentLoaded")}}};c.EventListenerOverride=function(a,c){function i(a){var h=this;setTimeout(function(){try{a.call(h)}catch(b){bt_log("error overriding "+c+" event: "+b)}},0)}var f=a.addEventListener?"addEventListener":"attachEvent",e=a[f];a[f]=function(g,h,b){if("function"==typeof h)if(g==c||g=="on"+c)i(h);else try{"addEventListener"==f?e.call(a,g,h,b):e(g,h)}catch(d){bt_log("error proxying "+
g+" event: "+d)}}};c.Events=new c.EventsManager;c.EventBindingManager=function(a,k){function i(b,a){m(a,function(a,c){b[b.type+"."+a]=c});k.push(b)}function f(b){function a(b){var d=this,j=[];d.appendData=function(b){j.push(function(a){a.appendData(b)});return d};d.appendJs=function(b){j.push(function(a){a.appendJs(b)});return d};d.postProcess=function(b){m(j,function(a){a(b)})};d.tagId=b;d.execute=c.execute;d.fire=c.fire;d.evaluate=c.evaluate}var c=this,f=[],g=[],k="true";c.execute=function(a,j){var e=
q({eventName:b},j||{});if(l.isFunction(a))f.push(q(a,e));else if(l.isString(a))try{var g=z("events/"+b+"-tag-"+(e.tagId||"adhoc")),n=h.functionWithAccess(["eventObject","eventData"],a+g);f.push(q(n,e))}catch(k){i({type:"evparse",message:k.toString(),tagId:e.tagId||-1},{eventName:b})}else bt_log("when.execute: unknown action: "+a);return c};c.evaluate=function(b){k=b;return c};c.fire=function(b){b=new a(b);g.push(b);return b};c.handler=function(b,a){var d=k;x(k,function(b){bt_log("Invalid post-event conditional fire expression: "+
d+", exception = "+b)})&&(e.executeActions(f,b,a),e.fireTags(g))}}var e={},g={},h=c.jQueryLoader(a,"BrightTag.jQuery");e.Binder=function(b,a){var e=this,f=[],n={},k=(a||{}).pageId;e.data=function(b,a){f.push({name:b,dbe:a});return e};e.bindData=function(a,j,e){m(f,function(f){var g=f.name;try{var s=n[f.dbe];if(!s){var E=f.dbe,l,t=f.dbe,m=z("event-dbes/"+g+"-page-"+(k||"adhoc")+"-event-"+b);l=h.functionWithAccess(["eventObject","eventData"],"return "+t+";"+m);s=n[E]=l}c.instance.data(g,s.call(a,j,
e))}catch(q){i({type:"evdbe",message:q.toString(),pageId:k||-1},{name:g,eventName:b})}})};e.handler=function(a){var c=g[b];if(c){var j=Array.prototype.slice.call(arguments,1);e.bindData(a.target,a,j);c.handler(a,j)}}};var b=/^direct\//i;e.bind=function(a,c,f,g){var i=new e.Binder(a,g);h.ensureJQuery(function(){var a=h.getJQuery()(c);a.live&&c.constructor===String&&!b.test(f)?a.live(f,i.handler):a.bind(f.split(b).pop(),i.handler)});return i};e.when=function(b){return g[b]||(g[b]=new f(b))};e.executeActions=
function(b,a,c){m(b,function(b){try{b.call(a.target,a,c)}catch(d){i({type:"evwait",message:d.toString(),tagId:b.tagId||-1},{eventName:b.eventName})}})};e.fireTags=function(b){if(0<b.length){var a=c.instance.serverURL();m(b,function(b){a.cf(b.tagId);b.postProcess(a)});c.Blab.script(a.asString())}};return e};c.HTTP={};c.HTTP.Cookie=v;c.HTTP.DOMStorage=A;c.HTTP.CookieStorage=C;c.HTTP.QueryString=function(a){function c(b){if(b&&l.isString(b)){var a=b.split("&"),b={};m(a,function(a){if(""!==a){var c=a.split("="),
a=decodeURIComponent(c[0]),c=c[1]&&decodeURIComponent(c[1].replace(/\+/g," "));(null==b[a]?b[a]=[]:b[a]).push(c)}})}return b}function i(b,a){var c=[];m(b,function(b){if(l.isObject(b))return!1;b=null==b||""===b?a:b;(l.isString(b)||l.isNumber(b)||l.isBoolean(b))&&c.push(b)});return c}function f(b){return!l.isArray(b)?[b]:b}function e(b,a){var c=encodeURIComponent(b),f=encodeURIComponent(a);return c+"="+f}var g=this,h={};q(h,c(a));g.param=function(b){b=h[b]||[""];return 1<b.length?b:b[0]};g.params=function(){return h};
g.appendParam=function(b,a){if(b){var c=i(f(a));0<c.length&&(h[b]=(null==h[b]?h[b]=[]:h[b]).concat(c))}return this};g.replaceParam=function(b,a){if(b){var c=i(f(a));0<c.length&&(h[b]=(h[b]=[]).concat(c))}return this};g.appendParams=function(b){m(b,g.appendParam);return this};g.alwaysAppendParam=function(b,a){if(b){var c=i(f(a),"");0<c.length&&(h[b]=(null==h[b]?h[b]=[]:h[b]).concat(c))}return this};g.alwaysReplaceParam=function(b,a){if(b){var c=i(f(a),"");0<c.length&&(h[b]=(h[b]=[]).concat(c))}return this};
g.alwaysAppendParams=function(b){m(b,g.alwaysAppendParam);return this};g.appendPartialQueryString=function(b){b&&g.alwaysAppendParams(c(b));return this};g.deleteParam=function(b){delete h[b]};g.toString=function(){var b=[];m(h,function(a,c){m(c,function(c){b.push(e(a,c))})});return b.join("&")}};c.HTTP.URL=function(a){var k=this,i,f,e,g=a.indexOf("#");-1<g&&(e=a.substring(g+1),a=a.substring(0,g));g=a.indexOf("?");-1<g&&(f=a.substring(g+1),a=a.substring(0,g));i=a;a=new c.HTTP.QueryString(f);q(k,a);
k.queryString=a.toString;k.toString=function(){var a=k.queryString();return i+(a.length>0?"?"+a:"")};k.asString=k.toString;k.fragment=function(){return e}};c.ServerURL=function(a){function k(b,a){a&&a.findEach(b,function(b,a){f.appendParam(b,a)})}function i(b,a){return function(c){bt_log("invalid "+b+" expression: "+a+", exception = "+c)}}var f=this,e=a.window,g=a.parentReferrer,h=a.referrer;c.HTTP.URL.call(this,0===a.host.length?"":(a.host.match("^[a-z0-9+.-]+://.+")?"":"//")+a.host+"/tag");f.appendParams({site:a.site,
referrer:h,docReferrer:a.docReferrer,mode:a.mode});h!==g&&f.appendParam("parentReferrer",g);k(/^btps\..+/,new c.HTTP.Cookie(a.document));k(/^btpdb\..+/,a.store);f.appendData=function(b){var a=bt_data(b),a=l.isArray(a)||l.isObject(a)?e.JSON.stringify(a):a;return f.alwaysReplaceParam("_cb_"+("bt_data('"+b+"')"),a)};f.appendJs=function(a){var c=i("client binding expression",a);return f.alwaysReplaceParam("_cb_"+a,x(a,c))};f.cf=function(a){l.isArray(a)||(a=[a]);var c=f.param("cf");c&&(a=Array(c).concat(a));
f.replaceParam("cf",a.join());return f};f.addCf=function(a,c){if(!x(c,i("conditional fire",c,"tags/"+a+"-cf.js")))return!1;var e=f.param("cf");f.replaceParam("cf",e?e+","+a:a);return!0}};c.Page=function(a,k){function i(a){m(l.isArray(a)?a:[a],function(a){l.isFunction(a)?a():n.write('<script type="text/javascript" src="'+a+'"><\/script>')})}function f(a){var b=r.group().options({tagId:-2});m(l.isArray(a)?a:[a],function(a){(l.isFunction(a)?b.wait:b.script)(a)})}function e(a){n.write(a)}function g(a,
b){r.group(!u?"domready":void 0).options(b&&b.tagId?{tagId:b.tagId}:{}).wait(function(){n.write(a)})}function h(a){m(a,function(a){if(a.name){var b=q({},a);delete b.name;delete b.value;p.set(a.name,a.value,b)}})}function b(b){o.hasErrors()&&(b.appendParam("errors",o.toJSON()),2083<b.toString().length&&(b.deleteParam("errors"),o.tooManyErrors(),b.appendParam("errors",o.toJSON())));o.reset({site:a.site,referrer:a.referrer||n.location.href})}var d=this,j=void 0,s=a.data||{},t=void 0,n=a.document||{},
w=a.window||{},r=a.blab||c.Blab,o=a.errorManager,p=a.store,u=!1;d.referrer=a.referrer;d.parentReferrer=a.parentReferrer;d.docReferrer=a.docReferrer;d.site=a.site;d.host=a.host;o&&r.addGlobalListener(o);r.run("serializer");d.load=function(){var a=Array.prototype.slice.call(arguments,0);m(a,function(a){l.isFunction(a)?r.addToGroup("serializer",r.newEngine().wait(function(){a(d)})):l.isObject(a)&&a.src?d.library(a.src,a.options):l.isString(a)&&d.library(a)})};d.library=function(a,b){r.addToGroup("serializer",
r.newEngine().options(b||{}).script(a))};var v="sync"===a.mode;d.writeScript=v?i:f;d.appendContent=v?e:g;d.domReady=function(){u=!0;r.addGlobalListener(new r.GlobalSwapwriteListener(n));"sync"===a.mode&&(d.writeScript=f,d.appendContent=g);r.run("domready")};d.parameter=function(a){void 0==j&&(j=new c.HTTP.URL(n.location.href));return j.param(a)};d.meta=function(a){t||(t={},m(n.getElementsByTagName("meta"),function(a){t[a.getAttribute("name")]=a.getAttribute("content")}));return t[a]||""};d.cookie=
function(a){return(new c.HTTP.Cookie(n)).get(a)||""};d.data=function(a,b){if(void 0!==b)return s[a]=b;b=s[a];return void 0==b?"":b};d.dbe=function(a,b,c){d.data(a,x(b,function(b){o&&o.push({type:"dbe",message:b.toString(),"dbe.name":a,pageId:(c||{}).pageId||-1})},"page-dbes/"+a+"-page-"+(c&&c.pageId||"adhoc")))};d.errors=function(a){o.configure(a)};d.store=p?h:function(){};d.serverURL=function(){return new c.ServerURL(a)};d.defaultBaseUri=function(){return("https:"==n.location.protocol?"https:":"http:")+
"//s.btstatic.com/"};d.baseUri=function(){var a=/\btag(\.[^.]+|-n)?\.js(#.*)?$/;return k&&k.src&&k.src.replace(a,"")||d.defaultBaseUri()};d.primary=function(){function a(){var c=d.serverURL();o&&(o.processStoredErrors(),b(c));return c.toString()}var c=[];w.JSON?c.push(a()):(c.push(d.baseUri()+"json2.js"),c.push(function(){d.writeScript(a())}));d.writeScript(c)};d.secondary=function(a){var c=d.serverURL(),e=c.toString();a(c);c.toString()!=e&&(o&&b(c),d.writeScript(c.toString()))}};c.ErrorManager=function(a,
c){function i(b){d.push(f(b));a.set(j,e.toJSON())}function f(a){var b=l.isObject(a)?q({},a):{};b.type=b.type||"unknown";b.message=b.message||a.toString();b.timestamp=s;return b}if(!a)throw"ErrorManager requires a store";var e={},g,h,b=!0,d=[],j="__bterr",s=+new Date,m=e.configure=function(a){a.hasOwnProperty("enabled")&&(b=a.enabled);a.hasOwnProperty("timestamp")&&(s=a.timestamp);a.hasOwnProperty("site")&&(g=a.site);a.hasOwnProperty("referrer")&&(h=a.referrer)};c&&m(c);e.reset=function(b){b&&m(b);
d=[];a.remove(j)};e.hasErrors=function(){return 0<d.length};e.toArray=function(){return d};e.toJSON=function(){try{return JSON.stringify({site:g,referrer:h,errors:d})}catch(a){bt_log("problem serializing errors: "+a.message)}};e.push=function(a){bt_log("error: "+JSON.stringify(a));if(b&&a&&!(-1>a.tagId||-1>a.pageId))try{i(a)}catch(c){if("CookieTooLongError"!=c.name)throw c;e.tooManyErrors()}};e.tooManyErrors=function(){e.reset();i({type:"runtime",message:"Too many errors"})};e["block:error"]=function(a,
b){if(b){var c=b.type,d=b.exception||b,f=a.option("tagId")||-1;e.push({type:c,message:d.toString(),tagId:f})}};e.processStoredErrors=function(){var b=a.get(j);if(b)try{var c=JSON.parse(b);g=c.site;h=c.referrer;l.isArray(c.errors)&&(d=d.concat(c.errors))}catch(e){bt_log("problem reading stored errors: "+e.message)}};return e};c.CookieSyncEngine=function(a){var k={fn:function(a){a()},next:null},i=k,f=a.document,e=function(a){if("function"!=typeof a)return!1;a={fn:a,next:null};i=i.next=a;return!0},g=
function(){if(k){var a=k.fn;k=k.next;a(g)}},h=g;c.Events.listen(a,"load",h);return{sync:h,push:function(a){return e(a)},pushImage:function(b){return e(function(c){var e=new a.Image;e.onerror=e.onload=c;e.src=b})},pushIframe:function(a){return e(function(c){var e=f.createElement("iframe");e.onerror=e.onload=c;e.width=0;e.height=0;e.style.border=0;e.src=a;f.body.appendChild(e)})}}};c.jQueryLoader=function(a,k){return new function(a,f){function e(a){j.wait(a)}function g(a){function f(){b=c.jQuery;e(a)}
d="var $ = BrightTag.$; ";c.jQuery?f():j.script(c.instance.baseUri()+"BrightTag.jquery-1.5.1.js").wait(f)}var h={},b=a.jQuery,d="",j=c.Blab.group(f);h.getJQuery=function(){return b};h.functionWithAccess=function(a,b){return new Function(a,d+b)};h.ensureJQuery=function(a){h.ensureJQuery=e;(b?e:g)(a);c.Blab.run(f)};return h}(a,k)};c.Main=function(a){var k=c.Events,i;a:{i=/\/tag(\.[^.]+|-n)?\.js(#.*)?$/;for(var f=a.document.getElementsByTagName("script"),e=f.length-1;-1<e;e--){var g=f[e];if(i.test(g.src)){i=
g;break a}}i=void 0}if(i){if(e=(new c.HTTP.URL(i.src)).fragment()){var f=q,e=(new c.HTTP.QueryString(e)).params(),h={};m(e,function(a,b){h[a]=b[0]});f(a,h)}f=function(a){bt_log("configuration error: "+a)};e=c.trim(i.innerHTML);0!==e.length&&q(a,x("(\n"+e+"\n)",f,"site-config"))}if(void 0!=a.site){k.enablePageReadyOverrides(a.window,a.document);try{var b=new c.Page(a,i);k.domReady(a.document,function(){b.domReady()});a.loadOnly||b.primary();return b}catch(d){bt_log("execution error: "+d)}}};var y=
c.defaultConfig();q(c.Blab,new c.Blab.Manager(y.document));c.$LAB=c.Blab;c.EventBinding=c.EventBindingManager(y.window,y.errorManager);c.CookieSync=c.CookieSyncEngine(y.window);c.instance=c.Main(y);return c}(window.BrightTag);function bt_parameter(c){return BrightTag.instance.parameter(c)}function bt_meta(c){return BrightTag.instance.meta(c)}function bt_cookie(c){return BrightTag.instance.cookie(c)}function bt_data(c,p){return BrightTag.instance.data(c,p)}window.bt_data_escaped=bt_data;
function bt_log(c){window.console&&console.log&&console.log("BrightTag: "+c)}var bt_handle_exception=bt_log,_bt_url_prefix,_bt_referrer,_bt_site,_bt_mode;function btServe(c){if(void 0==BrightTag.instance){var p=BrightTag,v=p.extend({referrer:_bt_referrer,site:_bt_site,mode:_bt_mode},p.defaultConfig());void 0!=_bt_url_prefix&&(v.host=_bt_url_prefix);p.instance=p.Main(p.extend(v,c||{}))}};
