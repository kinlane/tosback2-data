function bt_eval(m,q){try{return window.eval.apply(window,[m])}catch(z){q&&q(z)}}function bt_parameter(m){return BrightTag.instance.parameter(m)}function bt_meta(m){return BrightTag.instance.meta(m)}function bt_cookie(m){return BrightTag.instance.cookie(m)}function bt_data(m,q){return BrightTag.instance.data(m,q)}window.bt_data_escaped=bt_data;function bt_log(m){window.console&&console.log&&console.log("BrightTag: "+m)}var bt_handle_exception=bt_log,_bt_url_prefix,_bt_referrer,_bt_site,_bt_mode;
function btServe(m){if(null==BrightTag.instance){var q=BrightTag,z=q.extend({referrer:_bt_referrer,site:_bt_site,mode:_bt_mode},q.defaultConfig());null!=_bt_url_prefix&&(z.host=_bt_url_prefix);q.instance=q.Main(q.extend(z,m||{}))}}
window.BrightTag=function(m){function q(a,e){return Object.prototype.toString.call(a)==="[object "+e+"]"}function z(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function D(a){return"\n//at-sourceURL=/BrightTag/"+a.replace(/\s+/g,"_")+".js"}function w(a,e){for(var h in e)e.hasOwnProperty(h)&&(a[h]=e[h]);return a}function p(a,e){if(a)if(n.isArray(a)||a.length){var h,g;h=0;for(g=a.length;h<g;h++)e(a[h],h)}else if(n.isObject(a))for(h in a)a.hasOwnProperty(h)&&e(h,a[h])}function G(a){return!n.isString(a)?
a:a.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&/g,"%26").replace(/'/g,"%27").replace(/;/g,"%3B").replace(/</g,"%3C").replace(/>/g,"%3E")}function N(a){function e(b){var a=Array.prototype.slice.call(arguments,1);p(m,function(d){var f=[c].concat(a);(d[b]||r).apply(null,f)})}function h(){v=!0;s=x.length;e("engine:off")}function g(){v&&e("engine:on");v=!1;t=0;(x[s++]||h)()}function k(){e("block:finish");g()}function l(b,c){return function(){var d=!1,f,r=a.createElement("script");r.onload=r.onreadystatechange=
function(){var b;if(!(b=d)){a:{switch(r.readyState){case void 0:case "loaded":case "complete":b=!0;break a}b=!1}b=!b}b||(d=!0,k())};r.onerror=function(){e("block:error",{type:"script",exception:"Problem loading "+b});d||k()};r.src=b;c&&(r.text=c);e("block:start",b);f=a.getElementsByTagName("script")[0];f.parentNode.insertBefore(r,f)}}function f(b){return function(){try{if(e("block:start",b),n.isString(b))if(a.defaultView){var c=D("tags/"+(u.tagId||"adhoc")+"-inline-b"+(s-1));a.defaultView.eval.call(window,
b+c)}else a.parentWindow?a.parentWindow.execScript(b):e("block:error",{type:"wait",exception:"Could not evaluate wait block ["+b+"]"});else b()}catch(d){e("block:error",{type:"wait",exception:d})}finally{k()}}}function d(b){x.push(b);v&&g();return c}function b(b){x.splice(s+t++,0,b);return c}var c=this,r=function(){},m=[],v=!1,u={},x=[],s=0,t=0;c.run=function(){e("engine:on");g()};c.options=function(b){w(u,b);return c};c.option=function(b){return u[b]};c.script=function(b){return d(l(b))};c.wait=
function(b){return d(f(b))};c.preemptScript=function(c,a){return b(l(c,a))};c.preemptWait=function(c){return b(f(c))};c.listen=function(b){m.push(b);(b["engine:listen"]||r).apply(null,[c]);return c}}function K(a){function e(c){l.push(c);d&&!b&&g()}function h(b){b.run()}function g(){var b=l[f];b&&(f++,b.listen(c).run())}var k,l=[],f=0,d=!1,b=!1,c={"engine:on":function(){b=!0},"engine:off":function(){b=!1;g()}};k=e;this.alwaysQueue=function(){k=e};this.neverQueue=function(){k=h};this.push=function(b){k(b);
return b};this.run=function(){d=!0;g()};this.applyListener=function(b){var c,a;c=f;for(a=l.length;c<a;c++)l[c].listen(b)};this.toString=function(){return"Group[name="+a+"; working="+b+"; running="+d+"]"}}function O(a){return{"engine:listen":function(e){e.listen(new P(a))}}}function B(a){function e(a){var d,b;a=a.split(/; ?/);k={};for(var c=0,r=a.length;c<r;c++){b=a[c];d=b.indexOf("=");var e=k,g=b.slice(0,d);d=b.slice(d+1);d=unescape(d);e[g]=d}}function h(f,d,b){if(f){b=b||{};f=[f+"="+G(d||"")];if((d=
b.expires)||0===d)n.isNumber(d)&&(d=(new Date(d)).toGMTString()),f.push("expires="+d);(d=b.path)&&f.push("path="+d);(d=b.domain)&&f.push("domain="+d);!0===b.secure&&f.push("Secure");!0===b.httponly&&f.push("HttpOnly");b=f.join(";");if(b.length<l)a.cookie=b;else throw{name:"CookieTooLongError",message:"Cookie reached 4096 byte limit"};e(a.cookie)}}function g(a,d){h(a,"",w(d||{},{expires:1}))}var k={},l=4096;e(a.cookie||"");return{get:function(a){return k[a]},set:h,remove:g,findEach:function(a,d){for(var b in k)k.hasOwnProperty(b)&&
b.match(a)&&d(b,k[b])},clear:function(a){var d=w({},k),b;for(b in d)g(b,a)}}}function Q(a){a=B(a);var e=a.set,h=a.remove;a.set=function(a,k,h){h=w(h||{},{path:"/"});0===h.expires&&(h.expires=+new Date("1/1/2038"));e(a,k,h)};a.remove=function(a,e){h(a,w(e||{},{path:"/"}))};a.purge=function(){};return a}function R(a,e){function h(b){b=b.expires;return 0!==b&&b<=+new Date}function g(b,c){a.setItem(b,c)}function k(b,a,d){a={value:a,expires:d};h(a)||e.setItem(b,JSON.stringify(a))}function l(b){b=e.getItem(b);
try{return b?JSON.parse(b):void 0}catch(a){}}function f(b){b=l(b);var a;return b&&(b.hasOwnProperty("value")&&b.hasOwnProperty("expires"))&&!h(b)?(a=b.value,delete b.value,[a,b]):[]}function d(b,a,d,f){for(var e,g=0,h=b.length;g<h;g++)e=b.key(g),!d[e]&&(d[e]=e.match(a))&&f(e)}return{set:function(b,a,d){b&&null!=a&&(d=d||{},(null!=d.expires?k:g)(b,a,d.expires))},get:function(b){return a.getItem(b)||f(b)[0]},findEach:function(b,c){var g={};d(a,b,g,function(b){var d=a.getItem(b);null!=d&&c(b,d)});d(e,
b,g,function(b){var a=f(b),d=a[0],a=a[1];null!=d&&c(b,d,a)})},remove:function(b){a.removeItem(b);e.removeItem(b)},purge:function(){for(var b,a,d=e.length;d--;)b=e.key(d),(a=l(b))&&(a.hasOwnProperty("value")&&a.hasOwnProperty("expires"))&&h(a)&&e.removeItem(b)}}}function S(a,e){var h={};h.set=a.set;h.findEach=function(g,h){var l={};a.findEach(g,function(a,d,b){l[a]=!0;h(a,d,b)});e.findEach(g,function(f,d,b){l[f]||(a.set(f,d,b),h(f,d,b))})};h.get=function(g){var h=a.get(g);void 0===h&&(h=e.get(g),void 0!==
h&&a.set(g,h));return h};h.remove=function(g){a.remove(g);e.remove(g)};h.purge=function(){a.purge();e.purge()};return h}function E(a){function e(a){if(!n.isString(a))return a;var b={};p(a.split("&"),function(a){if(""!==a){var d=a.split("=");a=decodeURIComponent(d[0]);d=d[1]&&decodeURIComponent(d[1].replace(/\+/g," "));(null==b[a]?b[a]=[]:b[a]).push(d)}});return b}function h(a,b){var c=[];p(a,function(a){if(n.isObject(a))return!1;a=null==a||""===a?b:a;(n.isString(a)||n.isNumber(a)||n.isBoolean(a))&&
c.push(a)});return c}function g(a){return!n.isArray(a)?[a]:a}function k(a,b){var c=encodeURIComponent(a),f=encodeURIComponent(b);return c+"="+f}var l=this,f={};w(f,e(a));l.param=function(a){a=f[a]||[""];return 1<a.length?a:a[0]};l.params=function(){return f};l.appendParam=function(a,b){if(a){var c=h(g(b));0<c.length&&(f[a]=(null==f[a]?f[a]=[]:f[a]).concat(c))}return this};l.replaceParam=function(a,b){if(a){var c=h(g(b));0<c.length&&(f[a]=(f[a]=[]).concat(c))}return this};l.appendParams=function(a){p(a,
l.appendParam);return this};l.alwaysAppendParam=function(a,b){if(a){var c=h(g(b),"");0<c.length&&(f[a]=(null==f[a]?f[a]=[]:f[a]).concat(c))}return this};l.alwaysReplaceParam=function(a,b){if(a){var c=h(g(b),"");0<c.length&&(f[a]=(f[a]=[]).concat(c))}return this};l.alwaysAppendParams=function(a){p(a,l.alwaysAppendParam);return this};l.appendPartialQueryString=function(a){a&&l.alwaysAppendParams(e(a));return this};l.deleteParam=function(a){delete f[a]};l.toString=function(){var a=[];p(f,function(b,
c){p(c,function(c){a.push(k(b,c))})});return a.join("&")}}function C(a){var e=this,h,g,k,l=a.indexOf("#");-1<l&&(k=a.substring(l+1),a=a.substring(0,l));l=a.indexOf("?");-1<l&&(g=a.substring(l+1),a=a.substring(0,l));h=a;a=new E(g);w(e,a);e.queryString=a.toString;e.toString=function(){var a=e.queryString();return h+(0<a.length?"?"+a:"")};e.asString=e.toString;e.fragment=function(){return k}}function L(a,e,h){function g(){var b=h.createEvent("Event");b.initEvent(e,!0,!1);try{b.currentTarget=b.target=
a}catch(f){bt_log("warning: can not set target for ["+e+"] event: "+f)}return b}function k(){var a=h.createEventObject("Event");a.type=e;a.cancelable=!0;a.bubbleable=!1;return a}function l(b){setTimeout(function(){try{b.call(a,f?g():k())}catch(d){bt_log("error: overriding ["+e+"] event: "+d)}},0)}var f=!!a.addEventListener,d=f?"addEventListener":"attachEvent",b=a[d];a[d]=function(c,d,g){if("function"==typeof d)if(c==e||c=="on"+e)l(d);else try{f?b.call(a,c,d,g):b(c,d)}catch(h){bt_log("error: proxying ["+
c+"] event: "+h)}}}function T(a,e){function h(d){b.push(g(d));a.set(c,k.toJSON())}function g(a){var b=n.isObject(a)?w({},a):{};b.type=b.type||"unknown";b.message=b.message||a.toString();b.timestamp=r;return b}if(!a)throw"ErrorManager requires a store";var k={},l,f,d=!0,b=[],c="__bterr",r=+new Date,m=k.configure=function(a){a.hasOwnProperty("enabled")&&(d=a.enabled);a.hasOwnProperty("timestamp")&&(r=a.timestamp);a.hasOwnProperty("site")&&(l=a.site);a.hasOwnProperty("referrer")&&(f=a.referrer)};e&&
m(e);k.reset=function(d){d&&m(d);b=[];a.remove(c)};k.hasErrors=function(){return 0<b.length};k.toArray=function(){return b};k.toJSON=function(){try{return JSON.stringify({site:l,referrer:f,errors:b})}catch(a){bt_log("problem serializing errors: "+a.message)}return null};k.push=function(a){bt_log("error: "+JSON.stringify(a));if(d&&a&&!(-1>a.tagId||-1>a.pageId))try{h(a)}catch(b){if("CookieTooLongError"!=b.name)throw b;k.tooManyErrors()}};k.tooManyErrors=function(){k.reset();h({type:"runtime",message:"Too many errors"})};
k["block:error"]=function(a,b){if(b){var c=b.type,d=b.exception||b,f=a.option("tagId")||-1;k.push({type:c,message:d.toString(),tagId:f})}};k.processStoredErrors=function(){var d=a.get(c);if(d)try{var e=JSON.parse(d)||{};l=e.site;f=e.referrer;n.isArray(e.errors)&&(b=b.concat(e.errors))}catch(g){bt_log("problem reading stored errors: "+g.message)}};return k}function U(a,e){return new function(a,e){function k(a){c.wait(a)}function l(a){function f(){b=m.jQuery;k(a)}d="var $ = BrightTag.$; ";m.jQuery?
f():c.script(m.instance.baseUri()+"BrightTag.jquery-1.5.1.js").wait(f)}var f={},d="",b,c=m.Blab.group(e);f.getJQuery=function(){return b};f.ensureJQuery=function(c){f.ensureJQuery=k;b=a.jQuery;(b?k:l)(c);m.Blab.run(e)};f.functionWithAccess=function(a,b){return new Function(a,d+b)};return f}(a,e)}function M(a){function e(a,c){c&&c.findEach(a,function(a,b){g.appendParam(a,b)})}function h(a,c){return function(d){bt_log("invalid "+a+" expression: "+c+", exception = "+d)}}var g=this,k=a.window,l=a.parentReferrer,
f=a.referrer;C.call(this,0===a.host.length?"":(/^[a-z0-9+.-]+:\/\/.+/.test(a.host)?"":"//")+a.host+"/tag");g.appendParams({site:a.site,referrer:f,docReferrer:a.docReferrer,mode:a.mode,H:function(a){for(var c=5381,d=0,f=a.length;d<f;)c=(c<<5)+c+a.charCodeAt(d++);return c.toString(36)}(f||a.document.location.href)});f!==l&&g.appendParam("parentReferrer",l);e(/^btps\..+/,new B(a.document));e(/^btpdb\..+/,a.store);g.appendData=function(a){var c=bt_data(a),c=n.isArray(c)||n.isObject(c)?k.JSON.stringify(c):
c;return g.alwaysReplaceParam("_cb_"+("bt_data('"+a+"')"),c)};g.appendJs=function(a){var c=h("client binding expression",a);return g.alwaysReplaceParam("_cb_"+a,A(a,c))};g.cf=function(a){n.isArray(a)||(a=[a]);var c=g.param("cf");c&&(a=Array(c).concat(a));g.replaceParam("cf",a.join());return g};g.addCf=function(a,c){if(!A(c,h("conditional fire",c,"tags/"+a+"-cf.js")))return!1;var d=g.param("cf");g.replaceParam("cf",d?d+","+a:a);return!0};var d=g.toString();g.hasConditions=function(){return d!=g.toString()}}
function V(a,e){function h(f){null==l[f]&&(a.run(f),l[f]=!0)}function g(a){l[a]=!0}var k=!1,l={domready:!0};this.addTag=function(f,d){var b=d&&d.group;a.group(b||(!k?"domready":void 0)).options(d&&d.tagId?{tagId:d.tagId}:{}).wait(function(){e.write(f)});b&&(k?h:g)(b)};this.domReady=function(){k=!0;a.addGlobalListener(O(e));p(l,a.run)}}function W(a,e){function h(a){p(n.isArray(a)?a:[a],function(a){n.isFunction(a)?a():u.write('<script type="text/javascript" src="'+a+'">\x3c/script>')})}function g(a){var b=
s.group().options({tagId:-2});p(n.isArray(a)?a:[a],function(a){(n.isFunction(a)?b.wait:b.script)(a)})}function k(a){u.write(a)}function l(a,b){I.addTag(a,b)}function f(a){c.writeScript=a?h:g;c.appendContent=a?k:l}function d(a){p(a,function(a){if(a.name){var b=w({},a);delete b.name;delete b.value;H.set(a.name,a.value,b)}})}function b(b){t.hasErrors()&&(b.appendParam("errors",t.toJSON()),2083<b.toString().length&&(b.deleteParam("errors"),t.tooManyErrors(),b.appendParam("errors",t.toJSON())));t.reset({site:a.site,
referrer:a.referrer||u.location.href})}var c=this,r,J=a.data||{},v,u=a.document||{},x=a.window||{},s=a.blab||m.Blab,t=a.errorManager,H=a.store,I=a.asyncTagManager||new V(s,u);c.referrer=a.referrer;c.parentReferrer=a.parentReferrer;c.docReferrer=a.docReferrer;c.site=a.site;c.host=a.host;t&&s.addGlobalListener(t);s.run("serializer");c.load=function(){var a=Array.prototype.slice.call(arguments,0);p(a,function(a){n.isFunction(a)?s.addToGroup("serializer",s.newEngine().wait(function(){a(c)})):n.isObject(a)&&
a.src?c.library(a.src,a.options):n.isString(a)&&c.library(a)})};c.library=function(a,b){s.addToGroup("serializer",s.newEngine().options(b||{}).script(a))};f("sync"===a.mode);c.domReady=function(){"sync"===a.mode&&f(!1);I.domReady()};c.parameter=function(a){null==r&&(r=new C(u.location.href));return r.param(a)};c.meta=function(a){v||(v={},p(u.getElementsByTagName("meta"),function(a){v[a.getAttribute("name")]=a.getAttribute("content")}));return v[a]||""};c.cookie=function(a){return(new B(u)).get(a)||
""};c.data=function(a,b){if(void 0!==b)return J[a]=b;b=J[a];return null==b?"":b};c.dbe=function(a,b,d){c.data(a,A(b,function(b){t&&t.push({type:"dbe",message:b.toString(),"dbe.name":a,pageId:(d||{}).pageId||-1})},"page-dbes/"+a+"-page-"+(d&&d.pageId||"adhoc")))};c.errors=function(a){t.configure(a)};c.store=H?d:function(){};c.serverURL=function(){return new M(a)};c.defaultBaseUri=function(){return("https:"==u.location.protocol?"https:":"http:")+"//s.btstatic.com/"};c.baseUri=function(){var a=/\btag(\.[^.]+|-n)?\.js(#.*)?$/;
return e&&e.src&&e.src.replace(a,"")||c.defaultBaseUri()};c.primary=function(){function a(){var d=c.serverURL();t&&(t.processStoredErrors(),b(d));return d.toString()}var d=[];x.JSON?d.push(a()):(d.push(c.baseUri()+"json2.js"),d.push(function(){c.writeScript(a())}));c.writeScript(d)};c.secondary=function(a){var d=c.serverURL(),f=d.toString();a(d);d.toString()!=f&&(t&&b(d),c.writeScript(d.toString()))}}function F(a){function e(f){(f=(new C(f.src)).fragment())&&p((new E(f)).params(),function(d,b){a[d]=
b[0]})}function h(f){function d(a){bt_log("configuration error: "+a)}f=z(f.innerHTML);0!==f.length&&w(a,A("(\n"+f+"\n)",d,"site-config"))}var g,k=function(){var f,d,b=/\/tag(\.[^.]+|-n)?\.js(#.*)?$/,c=a.document.getElementsByTagName("script");for(f=c.length-1;-1<f;f--)if(d=c[f],b.test(d.src))return d}();k&&(e(k),h(k));if(null!=a.site){m.Events.enablePageReadyOverrides();try{return g=new W(a,k),m.Events.onDOMReady(g.domReady),a.loadOnly||g.primary(),g}catch(l){bt_log("execution error: "+l)}}}if(m)return bt_log("tried to load tag.js again"),
m;m={};var n={isString:function(a){return q(a,"String")},isArray:function(a){return q(a,"Array")},isNumber:function(a){return q(a,"Number")},isBoolean:function(a){return q(a,"Boolean")},isFunction:function(a){return q(a,"Function")},isObject:function(a){return null===a||void 0===a?!1:q(a,"Object")}},A=bt_eval,P=function(){var a,e=[],h=function(e){a.push(e)};return function(g){function k(a){a.src?f.preemptScript(a.src,a.innerHTML):a.innerHTML&&f.preemptWait(a.innerHTML)}function l(a){try{g.body.appendChild(a.cloneNode(!0))}catch(d){bt_log("error appending content to body: "+
d)}}var f,d=g.createElement("div");this["block:start"]=function(){var b=g;e.push([a,b.write,b.writeln]);a=[];b.write=b.writeln=h};this["block:finish"]=function(){try{if(0!==a.length){d.innerHTML="<br/>"+a.join("");var b,c,f=d.childNodes||[];b=1;for(c=f.length;b<c;b++)("SCRIPT"==f[b].tagName?k:l)(f[b])}}finally{b=g,c=e.pop(),a=c[0],b.write=c[1],b.writeln=c[2]}};this["engine:listen"]=function(a){f=a}}}(),X={};m.Escaper={cookie:G,javascript:function(a){return!n.isString(a)?a:a.replace(/\\/g,"\\\\").replace(/'/g,
"\\x27").replace(/"/g,"\\x22").replace(/\n/g,"\\n").replace(/\r/g,"\\r")}};m.Random={integer:function(a){return Math.floor(Math.random()*(a||1E8))}};m.pushIfDefined=function(a,e,h){a&&(a.constructor==Array&&null!=e)&&a.push(h||e)};m.defaultConfig=function(){var a=Q(document),e;try{window.localStorage&&window.sessionStorage&&(e=R(sessionStorage,localStorage),e.purge(),a=S(a,e))}catch(h){bt_log("Unable to access DOM storage: "+h)}return{loadOnly:!1,window:window,document:document,host:"s.thebrighttag.com",
parentReferrer:top!=self&&self.window?self.window.location.href:null,docReferrer:document.referrer,data:{},store:a,errorManager:T(a)}};var y=m.defaultConfig();m.Types=n;m.trim=z;m.each=p;m.extend=w;m.eval=A;m.HTTP={Cookie:B,QueryString:E,URL:C};m.Blab=new function(a){function e(a){return k[a]||(k[a]=new K(a))}function h(a){return g.addToGroup(a,g.newEngine())}var g=this,k={undefined:new K(void 0)},l=[];k.undefined.neverQueue();g.addGlobalListener=function(a){l.push(a);p(k,function(d,b){b.applyListener(a)})};
g.addToGroup=function(a,d){p(l,function(a){d.listen(a)});return e(a).push(d)};g.newEngine=function(){return new N(a)};g.group=function(a){return h(a)};g.listen=function(){return h().listen.apply(null,arguments)};g.script=function(){return h().script.apply(null,arguments)};g.wait=function(){return h().wait.apply(null,arguments)};g.run=function(a){e(a).run()};g.alwaysQueue=function(a){e(a).alwaysQueue()};g.neverQueue=function(a){e(a).neverQueue()};g.setOptions=function(){return h()}}(y.document);m.$LAB=
m.Blab;m.ServerURL=M;m.Events=new function(a,e){function h(){}function g(a,b,d){a[u](s+b,d,!1)}function k(a,b,d){a[x](s+b,d)}function l(){var a=e.readyState;if("loading"==a)return!1;if("complete"==a)return!0;a:{try{t("left")}catch(b){a=!1;break a}a=!0}return a}function f(a,b,d){var c=this;setTimeout(function(){a()?b.call(c):f(a,b,d)},d)}function d(){d=h;m&&L(e,n,e)}function b(){d();L(a,v,e)}var c=this,m=!!a.addEventListener,n="DOMContentLoaded",v="load",u=m?"addEventListener":"attachEvent",x=m?"removeEventListener":
"detachEvent",s=m?"":"on",t=e.documentElement.doScroll||function(){throw"No doScroll";};c.listen=g;c.unlisten=k;c.onDOMReady=function(b){l()?b.call(this):e.addEventListener?(g(e,n,b),g(e,n,function(){k(a,v,b)}),g(a,v,b)):f(l,b,1)};c.enablePageReadyOverrides=function(){c.enablePageReadyOverrides=h;l()?b():(m&&g(e,n,d),g(a,v,b))}}(y.window,y.document);m.EventBinding=function(a,e){function h(a,b){p(b,function(b,d){a[a.type+"."+b]=d});e.push(a)}function g(a,b,d){var c=m.instance.serverURL();p(a,function(a){a.trigger(b,
d,c)});c.hasConditions()&&m.Blab.script(c.asString())}function k(a,c,e){function f(d,c){p(l,function(f){var g,k=f.name;try{g=m[f.dbe];if(!g){var l=m,u=f.dbe,s,p=f.dbe,x=D("event-dbes/"+k+"-page-"+(n||"adhoc")+"-event-"+a);s=b.functionWithAccess(["eventObject","eventData"],"return "+p+";"+x);g=l[u]=s}e.data(k,g.call(d.target,d,c))}catch(q){h({type:"evdbe",message:q.toString(),pageId:n||-1},{name:k,eventName:a})}})}var k={},l=[],m={},n=(c||{}).pageId;k.data=function(a,b){l.push({name:a,dbe:b});return k};
k.applyDataBindings=f;k.handler=function(b){var c,e=d[a];e&&0<e.length&&(c=Array.prototype.slice.call(arguments,1),f(b,c),g(e,b,c))};return k}function l(a){function d(a){0<l.length&&(a.cf(l),p(m,function(b){a.appendData(b)}),p(q,function(b){a.appendJs(b)}))}function c(a,b){return function(d){bt_log("Invalid "+a+" expression: "+b+", exception = "+d)}}var e={},f={},g,k,l=[],m=[],q=[];e.execute=function(d,c){w(f,c||{});if(n.isFunction(d))k=d;else if(n.isString(d))a:{try{var g=D("events/"+a+"-tag-"+(f.tagId||
"adhoc"));k=b.functionWithAccess(["eventObject","eventData"],d+g);break a}catch(l){h({type:"evparse",message:l.toString(),tagId:f.tagId||-1},{eventName:a})}k=void 0}else bt_log("when.execute: unknown action: "+d);return e};e.evaluate=function(a){g=a;return e};e.fire=function(a){l.push(a);return e};e.appendData=function(a){m.push(a);return e};e.appendJs=function(a){q.push(a);return e};e.trigger=function(b,e,l){var m=c("post-event conditional fire",g);if(!g||A(g,m)){try{k&&k.call(b.target,b,e)}catch(n){h({type:"evwait",
message:n.toString(),tagId:f.tagId||-1},{eventName:a})}d(l)}};return e}var f={},d={},b=U(a,"BrightTag.jQuery"),c=/^direct\//i;f.executeActions=g;f.Binder=k;f.bind=function(a,d,e,f){var g=k(a,f,m.instance);b.ensureJQuery(function(){var a=b.getJQuery(),f=a(d);if(n.isString(d)&&!c.test(e)&&(f.on||f.live))if(f.on)a(document).on(e,d,g.handler);else f.live(e,g.handler);else f.bind(e.split(c).pop(),g.handler)});return g};f.EventAction=l;f.when=function(a){var b=l(a),c=d[a];c||(c=d[a]=[]);c.push(b);return b};
return f}(y.window,y.errorManager);m.CookieSync=function(a,e){function h(a){if(!n.isFunction(a))return!1;a={fn:a,next:null};l=l.next=a;return!0}function g(){if(k){var a=k.fn;k=k.next;a(g)}}var k={fn:function(a){a()},next:null},l=k,f=a.document;e.listen(a,"load",g);return{sync:g,push:function(a){return h(a)},pushImage:function(d){return h(function(b){var c=new a.Image;c.onerror=c.onload=b;c.src=d})},pushIframe:function(a){return h(function(b){var c=f.createElement("iframe");c.onerror=c.onload=b;c.width=
0;c.height=0;c.style.border=0;c.src=a;f.body.appendChild(c)})}}}(y.window,m.Events);m.Main=F;m.site=function(a,e){var h=X[a];h&&e&&e(h);return h};m.instance=F(y);null==m.instance&&setTimeout(function(){null==m.instance&&(m.instance=F(y))},0);return m}(window.BrightTag);
