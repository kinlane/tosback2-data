
$(function(){var $body=$("body");var $allPossiblePreferencePanelContainers=$('a[href^="/rewards/moreRewardDetail.mi"],a[href^="/rewards/partnerDetail.mi"]',$body);var isAuthenticated=($("#my-account-container form",$body).length<=0);var isAllowedProtocol=(window.location.protocol=="https:");if($allPossiblePreferencePanelContainers.length>0){$allPossiblePreferencePanelContainers.on({"click":function(event){event.preventDefault();}},null,null);if(isAuthenticated&&isAllowedProtocol){$body.miAjax();$body.miAjax("newRequest","order",{"containerId":"award-order-container","getUrl":"/redemption/load.mi"});$allPossiblePreferencePanelContainers.each(function(index,elem){var obj=$body.miAjax("getInstance","order");obj.deferred.complete(function(){obj.clone.awardOrderDialog({"owner":elem});$(elem).data("dialog-award-order",obj.clone);$(elem).on({"click":function(event){$(obj.clone).awardOrderDialog("open");}},null,null);if(window.location.hash&&window.location.hash==="#"+index){$(obj.clone).awardOrderDialog("open");}});});}else{$body.miAjax();var rememberMeWhatsThis="/remember-me.mi?ajax=true";if($locale){var locale=$locale.locale("option","desiredLocale");if(locale!=="en-US"){rememberMeWhatsThis="/Channels/remember-me-"+locale.split("-")[0]+".mi?ajax=true";}}
var loginUrl="/login-dialog/award-order.mi";$body.miAjax("newRequest","login",{"containerId":"award-order-login-container","getUrl":loginUrl});$body.miAjax("newRequest","rememberMe",{"containerId":"award-order-login-remember-me","getUrl":rememberMeWhatsThis});$allPossiblePreferencePanelContainers.each(function(index,elem){var obj=$body.miAjax("getInstance","login"),rememberMe=$body.miAjax("getInstance","rememberMe"),pathAndHash=window.location.pathname+"#"+index;rememberMe.deferred.complete(function(){obj.deferred.complete(function(){rememberMe.clone.rememberMeDialog();obj.clone.awardOrderLoginDialog({"returnTo":pathAndHash,"reloadPath":loginUrl,"$rememberMeDialog":rememberMe.clone}).trigger("awardorderlogindialogrefreshed");$(elem).data("login-dialog",obj.clone);$(elem).on({"click":function(event){$(obj.clone).awardOrderLoginDialog("open");}},null,null);});});});}}});