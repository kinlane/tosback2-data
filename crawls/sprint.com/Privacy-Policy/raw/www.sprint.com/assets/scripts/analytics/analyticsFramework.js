/* Copyright 2012 Numeric Analytics All Rights Reserved
 * $Id: analyticsFramework.src.js 1896 2012-05-04 22:28:09Z scott $ */
var _analyticsCfg=_analyticsCfg||{host:"www.sprint.com",env:"prod",debug:false};var _analyticsFile="nAnalytics";function nLoader(cfg){try{var cfg;var mHost;var mEnv;var mPath;var suff;var debug;var sFile;this._init(cfg)}catch(e){this.dbg("nLoader : "+e)}}nLoader.prototype._init=function(cfg){try{this.cfg=cfg;this.mHost="www.sprint.com";this.mEnv="prod";this.mPath="/assets/scripts/analytics";this.suff=".js";if(typeof(this.cfg.host)!=="undefined"){this.mHost=this.cfg.host}if(typeof(this.cfg.env)!=="undefined"){this.mEnv=this.cfg.env}if(location.search.indexOf("debug=",0)>-1){this.debug=true}if(typeof(this.cfg.debug)!=="undefined"){this.debug=this.cfg.debug}if(this.debug){this.mEnv="dev";this.suff=".src.js"}this.dbg("Initialized")}catch(e){this.dbg("_init : "+e)}};nLoader.prototype.dbg=function(errStr){try{if(this.debug&&typeof(console)!=="undefined"&&typeof(console.log)!=="undefined"){console.log("nLoader : "+errStr)}}catch(e){}};nLoader.prototype.loadFramework=function(sFile){try{this.dbg("Loading files from: "+this.mHost);this.loadScriptLibrary("//"+this.mHost+this.mPath+"/"+sFile+this.suff)}catch(e){this.dbg("loadFramework : "+e)}};nLoader.prototype.loadScriptLibrary=function(src,olFunction){try{var lib=document.createElement("script");lib.setAttribute("type","text/javascript");lib.setAttribute("data-env",this.mEnv);lib.setAttribute("data-hst",this.mHost);lib.setAttribute("id","nAnalytics");lib.setAttribute("src",src);document.getElementsByTagName("head")[0].appendChild(lib)}catch(e){this.dbg("loadScriptLibrary : "+e)}};nLoader.prototype.loadModules=function(){var oTl;oTl=new nTeaLeaf()};function nTeaLeaf(){this._init()}nTeaLeaf.prototype._init=function(cfg){try{this.load()}catch(e){this.dbg("_init :"+e)}};nTeaLeaf.prototype.dbg=function(errStr){try{if(this.debug&&typeof(console)!=="undefined"&&typeof(console.log)!=="undefined"){console.log("nTeaLeaf : "+errStr)}}catch(e){}};nTeaLeaf.prototype.load=function(){try{this.dbg("Initializing Tealeaf");if(navigator.userAgent.indexOf("Apple Store")<0){(function(){var cn="TLTSID";var flag="TLisset=true";var file="/tl/set_tl.html";var ck=document.cookie;if(ck.indexOf(flag)===-1&&ck.indexOf(cn+"=")!==-1){var dms=[[{env:"ee.test.sprint.com",cookie:".sprint.com",domain:"ee.test.sprint.com",forceHTTPS:false},{env:"noltest.nextel.com",cookie:".nextel.com",domain:"noltest.nextel.com",forceHTTPS:false},{env:"ssoort.sprintpcs.com",cookie:".sprintpcs.com",domain:"ssoort.sprintpcs.com",forceHTTPS:true}],[{env:".sprint.com",cookie:".sprint.com",domain:"www.sprint.com",forceHTTPS:false},{env:".nextel.com",cookie:".nextel.com",domain:"nextelonline.nextel.com",forceHTTPS:false},{env:".sprintpcs.com",cookie:".sprintpcs.com",domain:"manage.sprintpcs.com",forceHTTPS:true}]];var dset=-1;var skip=-1;for(var x=0,z=false;x<dms.length&&!z;x++){for(var y=0;y<dms[x].length;y++){if(location.host.indexOf(dms[x][y].env)!=-1){dset=x;skip=y;z=true;break}}}if(dset!==-1){var cProt=(location.protocol.indexOf("https")!==-1);var cs=ck.split(";");for(var x=0;x<cs.length;x++){var cur=cs[x].split("=");if(cur[0].replace(/^\s*/,"")==cn){for(var y=0;y<dms[dset].length;y++){var prot=(cProt||dms[dset][y].forceHTTPS)?"https":"http";if(y==skip){document.cookie=flag+"; domain="+dms[dset][y].cookie+"; path=/"}else{document.writeln('<iframe src="'+prot+"://"+dms[dset][y].domain+file+"?"+cur[1]+'" width="1" height="1" scrolling="no" frameborder="no" style="display:none"></iframe>')}}break}}}}})()}}catch(e){this.dbg("load : "+e)}};try{var loader=new nLoader(_analyticsCfg);loader.loadFramework(_analyticsFile);loader.loadModules()}catch(e){if(typeof(console)!=="undefined"&&typeof(console.log)!=="undefined"&&(window.location.search.indexOf("debug=")>-1)){console.log("analyticsFramework.js : Main : "+e)}};