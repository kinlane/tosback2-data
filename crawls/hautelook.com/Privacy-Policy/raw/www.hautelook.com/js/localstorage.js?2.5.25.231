var arrayIndexOf=function(o,i){var n=this.length>>>0;i=Number(i)||0;i=i<0?Math.ceil(i):Math.floor(i);if(i<0)i+=n;for(;i<n;i++)if(i in this&&this[i]===o)return i;return-1},BrowserStorage=new (function(){var o=["local","session","userdata","cookie","empty"],i,n,p={},d={},g,k=function(){};d.empty=new k;d.session=new k;d.local=new k;d.userdata=new k;d.cookie=new k;var u=function(){var a=[];for(var b in p)a.push(p[b].name.toLowerCase());return a},l=function(a){a=typeof a!="number"?0:parseInt(a);return(new Date).getTime()+
a},s=function(){if(typeof i=="function"){var a=l();i.set("bstorage_timestamp",a,l(15768E7));g.info.lastTimestamp=a}else setTimeout(arguments.callee,250)};g={info:{lastTimestamp:0,keys:{}},findKey:function(a){if(a!==undefined)return this.info.keys[a]},findKeyToExpire:function(a){a=a||"empty";var b=null;for(var c in this.info.keys)if(c!="bstorage_meta"&&c!="bstorage_timestamp")if(this.info.keys[c].storage==a)b=b===null?c:this.info.keys[b].expires>this.info.keys[c].expires&&this.info.keys[b].priority<=
this.info.keys[c].priority?c:b;return b},updateKey:function(a,b,c,h,e){if(b===undefined)if(a===undefined&&c!="undefined")for(var f in this.info.keys)this.info.keys[f].storage==c&&delete this.info.keys[f];else a!="undefined"&&typeof this.info.keys[a]!="undefined"&&delete this.info.keys[a];else if(a!=undefined)this.info.keys[a]={priority:h,storage:c,expires:c!="cookie"?e:-1};g.info.lastTimestamp=l()},update:function(){if(typeof i=="function"){var a=i.get("bstorage_timestamp"),b=false;if(this.info.lastTimestamp<
a){b=i.get("bstorage_meta");g.info.keys=b===null?g.initializeKeys():JSON.parse(b);this.info.lastTimestamp=a}if(b===null||this.info.lastTimestamp>=a){i.set("bstorage_meta",g.info.keys,l(15768E7));i.set("bstorage_timestamp",g.info.lastTimestamp,l(15768E7))}}else setTimeout(arguments.callee,250)},initializeKeys:function(){var a,b={};for(var c in p){a=d[c].getAll();for(var h in a)b[h]={priority:5,storage:c,expires:c=="cookie"?-1:l(432E5)}}b.bstorage_meta={priority:10,storage:i.toString().split(",",1)[0],
expires:l(15768E7)};b.bstorage_timestamp={priority:10,storage:i.toString().split(",",1)[0],expires:l(15768E7)};return b}};k.prototype.name="empty";k.prototype.available=true;k.prototype.get=function(){return null};k.prototype.set=function(){return false};k.prototype.remove=function(){return false};k.prototype.clear=function(){return false};k.prototype.length=function(){return null};k.prototype.remainingSpace=function(){return 0};k.prototype.getAll=function(){return{}};d.local.name="local";d.local.available=
typeof localStorage!=="undefined"&&typeof Storage!="undefined"&&localStorage instanceof Storage?true:false;d.local.get=function(a){return localStorage.getItem(a)};d.local.getAll=function(){for(var a={},b,c=this.length(),h=0;h<c;h++){b=localStorage.key(h);a[b]=this.get(b)}return a};d.local.set=function(a,b){try{localStorage.setItem(a,b);return true}catch(c){return false}};d.local.remove=function(a){localStorage.removeItem(a)};d.local.clear=function(){localStorage.clear()};d.local.remainingSpace=typeof localStorage!=
"undefined"&&(typeof localStorage.remainingSpace=="undefined"||localStorage.remainingSpace===null)?function(){return null}:function(){var a=localStorage.remainingSpace;return typeof a=="number"?a:null};d.local.length=function(){return localStorage.length};d.session.name="session";d.session.available=typeof sessionStorage!=="undefined"&&typeof Storage!="undefined"&&sessionStorage instanceof Storage?true:false;d.session.get=function(a){return sessionStorage.getItem(a)};d.session.getAll=function(){for(var a=
{},b,c=this.length(),h=0;h<c;h++){b=sessionStorage.key(h);a[b]=this.get(b)}return a};d.session.set=function(a,b){try{sessionStorage.setItem(a,b);return true}catch(c){return false}};d.session.remove=function(a){sessionStorage.removeItem(a)};d.session.clear=function(){return typeof sessionStorage!="undefined"&&typeof sessionStorage.clear!="undefined"?function(){sessionStorage.clear()}:function(){var a=d.session.getAll();for(var b in a)d.session.remove(b)}}();d.session.remainingSpace=typeof sessionStorage!=
"undefined"&&(typeof sessionStorage.remainingSpace=="undefined"||sessionStorage.remainingSpace===null)?function(){return null}:function(){var a=sessionStorage.remainingSpace;return typeof a=="number"?a:null};d.session.length=function(){return sessionStorage.length};d.userdata.name="userdata";d.userdata.ref=false;d.userdata.namespace="localStorage";d.userdata.available=function(){if(navigator.userAgent.indexOf("MSIE")!=-1)try{var a=document.createElement('<link id="UD_LS_DATA" class="localstorage" />'),
b=document.getElementsByTagName("head");if(b.length==0)return false;else b=b[0];b.appendChild(a);if(typeof a.addBehavior!="undefined"&&a.addBehavior("#default#userdata")){d.userdata.ref=a;d.userdata.ref.load(d.userdata.namespace);return true}else return false}catch(c){return false}return false}();d.userdata.get=function(a){return this.ref.getAttribute(a)};d.userdata.getAll=function(){for(var a={},b=this.ref.XMLDocument.documentElement.attributes,c=0;c<this.length();c++)a[b[c].name]=this.get(b[c].name);
return a};d.userdata.set=function(a,b){try{this.ref.setAttribute(a,b);this.ref.save(this.namespace);return true}catch(c){this.ref.removeAttribute(a);return false}};d.userdata.remove=function(a){try{this.ref.removeAttribute(a);this.ref.save(this.namespace);return true}catch(b){return false}};d.userdata.clear=function(){var a=this.getAll();for(var b in a)this.remove(b)};d.userdata.remainingSpace=function(){return null};d.userdata.length=function(){return this.ref.XMLDocument.documentElement.attributes.length};
d.cookie.name="cookie";d.cookie.defaultDomain=".hautelook.com";d.cookie.availabilityCheck="Hautelook_Cookie_Avail";d.cookie.cookieLimit=20;d.cookie.get=function(a){if(document.cookie.length>0){var b=document.cookie.indexOf(a+"=");if(b!=-1){b=b+a.length+1;a=document.cookie.indexOf(";",b);if(a==-1)a=document.cookie.length;return unescape(document.cookie.substring(b,a))}}};d.cookie.getAll=function(){for(var a={},b=document.cookie.split(";"),c=0;c<b.length;c++){var h=b[c].split("=");a[h[0].replace(/ /g,
"")]=unescape(h[1])}return a};d.cookie.set=function(a,b,c,h,e){h=typeof h=="undefined"?"/":h;e=typeof e=="undefined"?this.defaultDomain:e;c=c?c:null;if(c!==null)if(+new Date<c)expire_date=new Date(c);else{c=l(c);expire_date=new Date;expire_date.setTime(c)}b=typeof b=="undefined"?"":typeof b!="object"?b:JSON.stringify(b);if(typeof b=="object")b=JSON.stringify(object);if(typeof a=="undefined"||b.length>4E3)return false;document.cookie=a+"="+escape(b)+";"+(c===null?"":"expires="+expire_date.toUTCString())+
";path="+h+";domain="+e;return true};d.cookie.remove=function(a,b,c){this.set(a,"",-1,b,c)};d.cookie.clear=function(){for(var a in this.getAll)this.remove(a)};d.cookie.remainingSpace=function(){var a=this.cookieLimit;a-=this.length;return a<0?0:a};d.cookie.length=function(){return document.cookie.split(";").length};d.cookie.available=function(){if(document.cookie.length>0)return true;else if(d.cookie.get(d.cookie.availabilityCheck)!==undefined)return true;else{d.cookie.set(d.cookie.availabilityCheck,
true);if(d.cookie.get(d.cookie.availabilityCheck)!==undefined)return true}return false}();p=function(){for(var a={},b=0;b<o.length;b++){var c=o[b];if(typeof d[c]!="undefined"&&d[c]instanceof k)if(d[c].available)a[c]=d[c]}return a}();this.setStorageEngines=function(){var a=u();return function(){var b=Array.prototype.slice.call(arguments),c=[];if(b.length>0)for(var h=0;h<b.length;h++)arrayIndexOf.call(a,b[h].toLowerCase())!=-1&&c.push(b[h].toLowerCase());else c=a.slice(0);arrayIndexOf.call(c,"empty")==
-1&&c.push("empty");b=function(){};b.remainingSpace=function(e){return arrayIndexOf.call(c,e)==-1?null:d[e].remainingSpace()};b.count=function(e){return arrayIndexOf.call(c,e)==-1?0:d[e].length()};b.get=function(e,f,j){if(e!="bstorage_timestamp"&&e!="bstorage_meta"){f=i.get("bstorage_timestamp");f>=g.info.lastTimestamp&&g.update();f=g.findKey(e);if(f===undefined)e=null;else if(arrayIndexOf.call(c,f.storage)!=-1)e=(e=d[f.storage].get(e))?e:null;else e=null}else e=e=="bstorage_timestamp"?d[c[0]].get("bstorage_timestamp")||
l():d[c[0]].get("bstorage_meta")||null;typeof j=="function"&&j(e);return e};b.getAll=function(){var e=i.get("bstorage_timestamp"),f=c.slice(0),j={},m={};e>g.info.lastTimestamp&&g.update();if(arguments.length!=0){f=[];for(e=0;e<arguments.length;e++)arrayIndexOf.call(c,arguments[e])!=-1&&f.push(arguments[e])}for(e=0;e<f.length;e++){m=d[f[e]].getAll();for(var q in m)j[q]=m[q]}return j};b.set=function(e,f,j,m,q,v){try{var r=true;if(typeof f=="function")return false;if(typeof f=="object")f=JSON.stringify(f);
if(typeof e==undefined||f=="undefined")return false;if(j instanceof Date)j=j.getTime();else{j=typeof j!="undefined"?parseInt(j):0;if(typeof j!="number")j=l();else if(j!=0)j=l(j)}m=typeof m=="number"?m:1;if(e!=="bstorage_timestamp"&&e!=="bstorage_meta"){if(r=d[c[0]].set(e,f,j,q,v)){g.updateKey(e,f,c[0],m,j);g.update()}}else if(e=="bstorage_meta")if(r=d[c[0]].set("bstorage_meta",f))g.updateKey(e,f,c[0],10,j);else{if(d[c[0]].length>0){var t=findKeyToExpire(c[0],10);if(t!==null){i.remove(t);return arguments.callee.apply(this,
arguments)}}}else(r=d[c[0]].set("bstorage_timestamp",f))&&g.updateKey(e,f,c[0],10,j);return r}catch(w){return false}};b.remove=function(e){var f;i.get("bstorage_timestamp")>g.info.lastTimestamp&&g.update();f=g.findKey(e);if(f===undefined){for(var j in c)d[c[j]].remove(e);return true}else if(arrayIndexOf.call(c,f.storage)!=-1){g.updateKey(e,undefined);g.update();d[f.storage].get(e);return d[f.storage].remove(e)}else return null};b.clear=function(){var e=c.slice(0);if(arguments.length!=0)for(var f=
0;f<c.length;f++)arrayIndexOf.call(arguments,c[f])==-1&&e.splice(f,1);for(f=0;f<e.length;f++){g.updateKey(undefined,undefined,e[f]);d[e[f]].clear()}e.length>0&&g.update()};b.toString=function(){var e=c.slice(0);e.splice(arrayIndexOf.call(e,"empty"),1);return Array.prototype.toString.call(e)};return b}}();i=this.setStorageEngines("local","session","userdata");n=this.setStorageEngines("cookie");(function(){var a=l(),b=false,c=false;g.update();for(var h in g.info.keys)if(a>g.info.keys[h].expires&&g.info.keys[h].expires!=
-1){b=true;d[g.info.keys[h].storage].remove(h);delete g.info.keys[h]}if(b===true){s();g.update()}b=n.getAll();for(h in b)if(g.findKey(h)===undefined){c=true;g.info.keys[h]={priority:5,storage:"cookie",expires:-1}}if(c===true){s();g.update()}g.info.lastTimestamp=i.get("bstorage_timestamp")||a})();setInterval(function(){g.update.call(g)},3E4)});
