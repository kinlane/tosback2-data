var a,$Halo=$Halo||{};$Halo.Obj=$Halo.Obj||function(){};
$Halo.Obj.prototype.verify=function(b,c){if(!(b instanceof Array))throw new TypeError("Parameter 'propList' must be an Array");c=c||[];for(var d=this.getDefaults(),e=0,g=b.length,f=false,i=false,h=false;e<g;){if(d[b[e]]===this[b[e]])throw new Error("Property: '"+b[e]+"' is set to default.");e++}e=0;for(g=c.length;e<g;){f=c[e];if(!(f instanceof Array))throw new TypeError("Each entry in deepProps must also be an array");i=Halo.blaze(0,f,d);h=Halo.blaze(0,f,this);if(typeof h==="undefined")throw new Error("Property chain: "+
f.toString()+" was undefined, or the chain was invalid.");if(i===h)throw new Error("Property chain: "+f.toString()+" was set to default.");e++}return true};$Halo.Obj.prototype.getJSON=function(b){return b==="string"?JSON.stringify(this):b==="object"?JSON.parse(JSON.stringify(this)):false};$Halo.Obj.prototype.clone=function(){return Halo.clone(this)};$Halo.Obj.prototype.getDefaults=function(){return{}};
$Halo.EstimatedDeliveryDateFormatter=$Halo.EstimatedDeliveryDateFormatter||function(b){var c=function(e){return(new Date(e.split("-")[2],e.split("-")[0]-1,e.split("-")[1])).toDateString().substring(0,3)},d=function(e){return c(e)+" "+e.split("-")[0]+"/"+e.split("-")[1]+"/"+e.split("-")[2].substring(2)};return function(e){return d(e.start_date)+" to "+d(e.end_date)}(b.estimated_delivery)};
$Halo.DataHandler=$Halo.DataHandler||function(b){b=b||{};this.name=b.name||null;this.url=b.url||null;this.settings={useCache:b.cache||false,useStorage:b.storage||false,storageLength:b.storageLength||3E5,storageLocations:b.storageLocations||["local","session"],parameters:new $Halo.DataHandlerParameterCollection};this.requests=[];for(var c=HaloUI.fn.isArray(b.parameters)&&b.parameters.length,d=null,e=0;e<c;e++){d=b.parameters[e];if(typeof d=="string"){d={};d.name=b.parameters[e]}this.settings.parameters.add(d)}};
a=$Halo.DataHandler.prototype;a.name="";a.url="";a.success=function(b,c,d){c.fulfiller(true,d);this.store(b,d)};a.failure=function(b,c,d){c.fulfiller(false,d)};a.store=function(b,c){var d=false;if(this.settings.useStorage)d=BrowserStorage.setStorageEngines(this.settings.storageLocations).set(this.name+b,c,this.settings.storageLength||null);return d};a.getStorageData=function(){if(this.settings.useStorage)return BrowserStorage.setStorageEngines(this.settings.storageLocations).get(this.name+reqUrl)};
a.clearCache=function(){delete this.requests;this.requests=[]};a.getData=function(b){var c=this.settings.parameters.buildUrl(this.url,b),d;if(c in this.requests)d=this.requests[c];else{d=HaloUI.Defer();if(this.settings.useCache)this.requests[c]=d;this.getStorageData(c)||Halo.REST({url:c,type:"GET",error:$.proxy(function(e){this.failure(c,d,e)},this),success:$.proxy(function(e){this.success(c,d,e)},this)})}return d.promise};
$Halo.DataHandlerParameter=$Halo.DataHandlerParameter||function(b){b=b||{};this.name=b.name||"";this.token=b.token||"#"+this.name;this.type=b.type||"string";this.required=!!b.required};
$Halo.DataHandlerParameter.prototype.cleanValue=function(b){var c=null;if(typeof b==="undefined"||typeof b==="function"||typeof b==="object")throw new Error("Only primitive types can be used for parameter values.");if(this.type=="string")c=b+"";if(this.type=="number"){c=+b;if(isNaN(c))throw new Error("Value could not be cast as a number");}return c};
$Halo.DataHandlerParameter.prototype.replaceIn=function(b,c){c=this.cleanValue(c);if(typeof b=="string")return b.replace(this.token,c);throw new Error("Parameter 0 must be of type string");};$Halo.DataHandlerParameterCollection=$Halo.DataHandlerParameterCollection||function(){this._list=[]};$Halo.DataHandlerParameterCollection.prototype.add=function(b){if(b)for(var c=0,d=arguments.length;c<d;c++)arguments[c]&&this._list.push(new $Halo.DataHandlerParameter(arguments[c]))};
$Halo.DataHandlerParameterCollection.prototype.buildUrl=function(b,c){var d=0,e=this._list.length;for(b=b;d<e;d++)if(this._list[d].name in c)b=this._list[d].replaceIn(b,c[this._list[d].name]);return b};
