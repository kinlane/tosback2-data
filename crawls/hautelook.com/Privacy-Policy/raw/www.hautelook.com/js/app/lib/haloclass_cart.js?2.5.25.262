$Halo.CartItem=$Halo.CartItem||function(a){a=a||false;if(a instanceof $Halo.CartItem)return a;var b={id:-1,cartId:-1,eventTitle:"#EVENTTITLE#",brandName:"#BRANDNAME#",title:"#TITLE#",titleLink:"#TITLELINK#",expireTime:-1,quantity:0,info:{order:[],values:{}},image:"#IMAGE#",price:-1,returnable:undefined,expired:undefined,viewed:undefined};this.getDefaults=function(){return b};if(!a){for(var c in b)this[c]=b[c];return this}this.id=+(a.id||a.inventory_id||b.id);this.cartId=+(a.cart_id||a.cartId||b.cartId);
this.eventTitle=a.eventTitle||a.event_title||b.eventTitle;this.brandName=a.brand_name||a.brandName||b.brandName;this.title=a.title||a.product_title||b.title;this.image=a.image_url||a.image||b.image;this.expireTime=a.expire_time||a.expireTime||b.expireTime;if(this.expireTime<new Date/100)this.expireTime*=1E3;this.quantity=+(a.amount||a.quantity||b.quantity);this.info=a.info||b.info;this.price=+(a.price||b.price);this.returnable=typeof a.returnable!=="undefined"?+a.returnable:b.returnable;this.expired=
typeof a.expired!=="undefined"?a.expired:b.expired;this.viewed=+(a.viewed||a.viewed_ts||b.viewed);this.estimated_delivery=a.estimated_delivery;try{this.verify(["id"]);this.titleLink="/product/"+this.id}catch(d){this.titleLink=b.titleLink}return this};$Halo.CartItem.prototype=new $Halo.Obj;$Halo.CartItem.prototype.formatted_delivery_date_range=$Halo.EstimatedDeliveryDateFormatter;
$Halo.Cart=$Halo.Cart||function(a){if(a instanceof $Halo.Cart)return a;var b={items:[],memberId:-1,hasPaypal:undefined,isGift:undefined};this.getDefaults=function(){return b};a=a||{items:[]};a.items=a.items||b.items;this.memberId=a.member_id||a.memberId||b.memberId;this.hasPaypal=!!+a.has_paypal||!!+a.hasPaypal||b.hasPaypal;this.isGift=!!+a.gift_checkout||!!+a.isGift||b.isGift;this.cartStamp=a.cartStamp||false;var c=0,d=a.items.length;for(this.items=[];c<d;){this.items[c]=new $Halo.CartItem(a.items[c]);
try{this.items[c].verify(["quantity"])}catch(e){Halo.errors.add(e)}c++}return this};$Halo.Cart.prototype=new $Halo.Obj;$Halo.Cart.prototype.eachItem=function(a,b){for(var c=0,d=this.items.length;c<d;){a.call(b||window,this.items[c]);c++}};$Halo.Cart.prototype.getCount=function(){for(var a=0,b=this.items.length,c=0;a<b;){try{this.items[a].verify(["quantity"]);c+=this.items[a].quantity}catch(d){Halo.errors.add(d)}a++}return c};
$Halo.Cart.prototype.getSubtotal=function(){for(var a=0,b=this.items.length,c=0;a<b;){try{this.items[a].verify(["quantity","price","expired"]);this.items[a].expired||(c+=this.items[a].quantity*this.items[a].price)}catch(d){Halo.errors.add(d)}a++}return c};$Halo.Cart.prototype.addItem=function(a){if(!(a instanceof $Halo.CartItem))throw new TypeError("Parameter 'item' must be of type $Halo.CartItem");var b=[];b.push(a);this.eachItem(function(c){b.push(c)},this);this.items=null;this.items=b;return this.items.length};
$Halo.Cart.prototype.remove=function(a){for(var b=0,c=this.items.length,d=[];b<c;){this.items[b].id!==+a&&d.push(this.items[b]);b++}this.items=null;this.items=d;return this.items.length};
