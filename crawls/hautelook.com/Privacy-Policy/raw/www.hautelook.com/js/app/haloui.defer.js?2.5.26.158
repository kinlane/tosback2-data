var HaloUI=HaloUI||{};HaloUI.fn=HaloUI.fn||{};HaloUI.fn.toArray=function(a){return HaloUI.fn.isArray(a)?a:[a]};HaloUI.fn.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)};HaloUI.Defer=function(){var a=new HaloUI.Deferred;return{promise:a.promise,fulfiller:function(){a.callback&&a.callback.apply(a,arguments)}}};
HaloUI.Deferred=function(){if(!(this instanceof HaloUI.Deferred))return new HaloUI.Deferred(arguments);this.complete=!1;this.callbacksOnSuccess=[];this.callbacksOnFail=[];this.chain=!1;this.promise=new HaloUI.Deferred.Promise($.proxy(this.then,this),$.proxy(this.fail,this));return this};HaloUI.Deferred.Promise=function(a,b){if(!(this instanceof HaloUI.Deferred.Promise))return new HaloUI.Deferred.Promise(arguments);this.then=a;this.fail=b;return this};
HaloUI.Deferred.prototype.then=function(a){for(var a=HaloUI.fn.toArray(a),b=0,c=a.length;b<c;b++)if("function"===typeof a[b])if(this.complete&&this.success)a[b].apply(a[b],this.data);else if(this.complete)break;else this.callbacksOnSuccess.push(a[b]);else throw new TypeError("Non-function parameter specified as callback");this.chain=this.chain||HaloUI.Defer();return this.chain.promise};
HaloUI.Deferred.prototype.fail=function(a){for(var a=HaloUI.fn.toArray(a),b=0,c=a.length;b<c;b++)if("function"===typeof a[b])if(this.complete&&!this.success)a[b].apply(a[b],this.data);else if(this.complete)break;else this.callbacksOnFail.push(a[b]);else throw new TypeError("Non-function parameter specified as callback");this.chain=this.chain||HaloUI.Defer();return this.chain.promise};
HaloUI.Deferred.prototype.triggerCallbacks=function(a){for(var a=HaloUI.fn.toArray(a),b=0,c=a.length;b<c;b++)a[b].apply(a[b],this.data)};HaloUI.Deferred.prototype.callback=function(){this.complete=!0;this.success=!!Array.prototype.shift.call(arguments);this.data=Array.prototype.slice.call(arguments);this.triggerCallbacks(this["callbacksOn"+(this.success?"Success":"Fail")]);this.callback=null;this.chain&&this.chain.fulfiller.apply(this,[this.success].concat(this.data))};
HaloUI.Deferred.prototype.addToList=function(a,b){for(var c=HaloUI.fn.toArray(a),d=0,e=c.length;d<e;d++)if("function"===typeof c[d])b.push(c[d]);else throw new TypeError("Non-function parameter specified as callback");this.chain=this.chain||HaloUI.Defer()};
