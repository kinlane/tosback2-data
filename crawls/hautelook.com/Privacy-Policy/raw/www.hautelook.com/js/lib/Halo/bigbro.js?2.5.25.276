if(typeof $Halo==="undefined")var $Halo={};
$Halo.bigbro=function(){var b={},i={},e=function(){},j=[],g=function(a,c){typeof siteDebug!=="undefined"&&siteDebug&&console.log(a,c);j.push([a,c])},k=function(a,c,f){for(var h=[],d=1;d<c.length;d++)h[d-1]=c[d];if(f)i[a]=h;if(typeof b[a]!=="undefined"){c=[];for(d=0;d<b[a].length;d++)if(b[a][d].flag){b[a][d].cb.apply(b[a][d].scope||window,h);c.push(b[a][d])}b[a]=c}};e.notify=function(a){g("notify: ",a);k(a,arguments,true)};e.notifyOnce=function(a){g("notifyOnce: ",a);k(a,arguments,false)};e.clearNotifications=
function(){g("clearNotifications");i={}};e.subscribe=function(a,c,f){g("subscribe: ",a);b[a]=b[a]||[];b[a].push({cb:c,scope:f,flag:true});typeof i[a]!=="undefined"&&c.apply(f,i[a])};e.subscribeOnce=function(a,c,f){g("subscribeOnce: ",a);var h=function(d){e.unsubscribe(a,h);c.apply(this,[d])};e.subscribe(a,h,f)};e.unsubscribe=function(a,c){g("unsubscribe: ",a);if(typeof b[a]!="undefined")for(var f=0;f<b[a].length;f++)if(b[a][f].cb===c)b[a][f].flag=false};e.dumpAllNotifications=function(){return i};
e.dumpAllSubscriptions=function(){return b};e.dumpAllCalls=function(a){return a=="string"?j.toString():j};return e}();
