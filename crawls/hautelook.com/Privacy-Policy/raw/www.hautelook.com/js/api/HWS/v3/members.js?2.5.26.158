if("undefined"===typeof HWS)var HWS={};"undefined"===typeof HWS.v3&&(HWS.v3={});HWS.v3.member={};HWS.v3.member.invitations={};HWS.v3.member.share={};HWS.v3.member.promotions={};
HWS.v3.member.invitations.post=function(f){var h,j,a=function(){for(var b=h,a=j,m={invitations:[]},d=0;d<b.length;d++)$.merge(m.invitations,b[d].invitations);for(b=0;b<a.length;b++){for(var d=a[b][0].error.messages,e=[],c=0;c<d.length;c++)e.push({invitation:d[c].message.invitation});$.merge(m.invitations,e)}if(a.length>0)f.onFailure(m);else f.onSuccess(m)},g=function(b){j.push(b);i++;i==k.length&&a()},l=function(b){h.push(b);i++;i==k.length&&a()},c=JSON.parse(f.data),i=0,k=function(b,a){for(var f=
[],d=[],e=0;e<b.length;e=e+100){var c=b.slice(e,e+100);f.push(c)}for(e=0;e<f.length;e++){c={invitations:{}};c.invitations.emails=f[e];c.invitations.personal_message=a;d.push(c)}return d}(c.invitations.emails,c.invitations.personal_message);h=[];j=[];for(c=0;c<k.length;c++)$.ajax({url:"/v3/member/"+f.member_id+"/invitations",type:"post",dataType:"json",data:JSON.stringify(k[c]),useREST:true,haloHandleAjaxResponse:true,haloFail:g,haloSuccess:l})};
HWS.v3.member.share.post=function(f){var h,j,a=function(){for(var b=h,c=j,a={invitations:[]},d=0;d<b.length;d++)$.merge(a.invitations,b[d].invitations);for(b=0;b<c.length;b++){for(var d=c[b][0].error.messages,e=[],g=0;g<d.length;g++)e.push({invitation:d[g].message.invitation});$.merge(a.invitations,e)}if(c.length>0)f.onFailure(a);else f.onSuccess(a)},g=function(b){j.push(b);c++;c==i.length&&a()},l=function(b){h.push(b);c++;c==i.length&&a()},c=0,i=function(b){for(var a=[],c=[],d=0;d<b.emails.length;d=
d+100){var e=b.emails.slice(d,d+100);a.push(e)}for(d=0;d<a.length;d++){e={};e.emails=a[d];e.personal_message=b.personal_message;e.type=b.type;e.event_id=b.event_id;e.brand_name=b.brand_name;e.url=b.url;c.push(e)}return c}(JSON.parse(f.data));h=[];j=[];for(var k=0;k<i.length;k++)$.ajax({url:"/v3/member/"+f.member_id+"/share",type:"post",dataType:"json",data:JSON.stringify(i[k]),useREST:true,haloHandleAjaxResponse:true,haloFail:g,haloSuccess:l})};
HWS.v3.member.promotions.get=function(f){$.ajax({url:"/v3/member/"+f.member_id+"/promotions",type:"get",dataType:"json",useREST:true,haloHandleAjaxResponse:true,haloFail:f.onFail,haloSuccess:function(h){if(typeof f.onSuccess==="function"){h=HWS.v3.member.promotions.translate(h);f.onSuccess(h)}}})};
HWS.v3.member.promotions.translate=function(f){for(var h=[],f=f.promotions,j=0;j<f.length;j++){var a=f[j].promotion,g=new HWS.models.promotion;g.start_date=a.start_date;g.end_date=a.end_date;g.modified_date=a.modified_date;g.section=a.promo_section;g.placement=a.promo_placement;g.resource=a.promo_resource;g.type=a.promo_type;g.sort=a.promo_placement_sort;for(var a=a.event_tabs,l=[],c=0;c<a.length;c++){var i=a[c].event_tab.name.toLowerCase();i=="all events"&&(i="all");l.push(i)}g.event_tabs=l;h.push(g)}return h};
