var RubiconAdServing=RubiconAdServing||{};RubiconAdServing.RubiconAd=function(){this.config={host:"optimized-by.rubiconproject.com"};this.default_context={rp_adtype:"js",rp_kw:null,rp_gender:null,rp_age:null,rp_age_range:null,rp_age_dob:null,rp_ethnicity:null,rp_xpi:null,rp_feature_set:{visibility:true,expandable:true}};this.mergeProperties=function(k,j){if(typeof(k)=="undefined"||!k){return j}for(var l in j){if(typeof k[l]=="undefined"){k[l]=j[l]}}return k};this.init=function(j){try{if(j){this.context=this.mergeProperties(j,this.default_context)}else{this.context=this.default_context}if(rp_account_config){this.context.rp_feature_set=this.mergeProperties(j.rp_feature_set,rp_account_config.rp_feature_set)}}catch(k){}};this.start=function(){var r=false;var n;var o=location.href.split(":");var m=o[0]=="https"?"https://":"http://";var j=m+this.config.host+"/a/$account_id$/$site_id$/$zonesize$.$mimetype$?$cb$$smart$$smartfile$$keyword$$gender$$age$$agerange$$agedob$$ethnicity$$xpi$$p_exp$$p_pos$";if(this.context.rp_account&&this.context.rp_site&&this.context.rp_zonesize){j=e("account_id",this.context.rp_account,j);j=e("site_id",this.context.rp_site,j);j=e("zonesize",this.context.rp_zonesize,j)}else{return}j=e("mimetype",(this.context.rp_adtype=="iframe"?"html":"js"),j);var l="";try{if(window!=top){var k=document.referrer;try{if(typeof window.parent.location.href=="string"&&window.parent.location.href.substr(0,4)=="http"){k=top.location.href||k}}catch(p){}if(k&&k.length>0){l="&rf="+escape(k)}}}catch(q){r=true}j+=l;if(this.context.rp_feature_set.expandable){j=d("p_exp","p_exp",(c()?1:null),j)}else{j=d("p_exp","p_exp",null,j)}if(this.context.rp_feature_set.visibility){j=d("p_pos","p_pos",g(),j)}else{j=d("p_pos","p_pos",null,j)}j=d("cb","cb",Math.random(),j,true);j=d("keyword","kw",this.context.rp_kw,j);j=d("gender","gender",this.context.rp_gender,j);j=d("age","age",this.context.rp_age,j);j=d("agerange","age_range",this.context.rp_age_range,j);j=d("agedob","age_dob",this.context.rp_age_dob,j);j=d("ethnicity","ethnicity",this.context.rp_ethnicity,j);j=d("xpi","xpi",this.context.rp_xpi,j);j=d("smart","tk_st",(r?"0":"1"),j);j=d("smartfile","tk_sf",(this.context.rp_smartfile?"1":null),j);if(this.context.rp_adtype=="iframe"){n='<iframe frameborder="0" allowtransparency="true" hspace="0"  vspace="0" marginheight="0" marginwidth="0" scrolling="no"  width="'+this.context.rp_width+'px" height="'+this.context.rp_height+'px" src="'+j+'"></iframe>'}else{n='<script type="text/javascript" src="'+j+'"><\/script>'}document.write(n)};var d=function(m,n,l,k,o){var j="";if(l!==null){j=(o===true?"":"&")+n+"="+l}return e(m,j,k)};var e=function(l,k,j){if(typeof l==="string"&&l!==null&&l.length>0){return j.replace("$"+l+"$",k)}else{return j}};var c=function(){return !h()};var h=function(){return(window!=top)};var i=function(){var j=false;try{window.top.location.href}catch(k){j=true}return j};var g=function(){var r=null;try{if(i()){}else{var m=window;var n=b();var o=90;var q;if(h()){while(window.top!==m.parent){m=m.parent;try{m.location.href}catch(k){return r}}q=f(m.frameElement);o=m.frameElement.clientHeight/2}else{var l=document.createElement("div");var j=a("rubicon_chk_position_");l.setAttribute("id",j);l.style.width="0px";l.style.height="0px";document.body.appendChild(l);q=f(l);document.body.removeChild(l);o=o/2}if(n.y+n.h<(o+q.y)||n.y>(o+q.y)){r="btf"}else{r="atf"}}}catch(p){}return r};var a=function(j){return j+Math.floor(Math.random()*1000000)};var b=function(){if(window.frameElement){return{x:window.top.innerWidth,y:window.top.pageYOffset||window.top.document.body.scrollTop||window.top.document.documentElement.scrollTop,w:(window.top.innerWidth||window.top.documentElement.clientWidth||window.top.getElementsByTagName("body")[0].clientWidth),h:(window.top.innerHeight||window.top.documentElement.clientHeight||window.top.getElementsByTagName("body")[0].clientHeight)}}return{x:window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,y:window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,w:(window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth),h:(window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight)}};var f=function(k){var j=0,l=0;if(k.offsetParent){do{j+=k.offsetLeft;l+=k.offsetTop}while(k=k.offsetParent)}return{x:j,y:l}}};(function(){try{var c=new RubiconAdServing.RubiconAd();var b=new Object();var f=["rp_account","rp_site","rp_zonesize","rp_adtype","rp_height","rp_width","rp_kw","rp_xpi","rp_feature_set"];for(var a=0;a<f.length;a++){name=f[a];if(window[name]&&(typeof window[name]=="string"||typeof window[name]=="object")){b[name]=window[name];window[name]=undefined}}f=["rp_gender","rp_age","rp_age_range","rp_age_dob","rp_ethnicity"];for(var a=0;a<f.length;a++){name=f[a];if(typeof window[name]=="string"&&window[name]&&window[name].substr(0,7)!="[INSERT"){b[name]=window[name];window[name]=undefined}}f=["rp_smartfile"];for(var a=0;a<f.length;a++){name=f[a];if(typeof window[name]=="string"&&window[name]&&window[name].substr(0,6)!="[SMART"){b[name]=window[name];window[name]=undefined}}c.init(b);c.start()}catch(d){}})();