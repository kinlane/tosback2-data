var Prototype={Version:"1.6.1",Browser:(function(){var B=navigator.userAgent;var A=Object.prototype.toString.call(window.opera)=="[object Opera]";return{IE:!!window.attachEvent&&!A,Opera:A,WebKit:B.indexOf("AppleWebKit/")>-1,Gecko:B.indexOf("Gecko")>-1&&B.indexOf("KHTML")===-1,MobileSafari:/Apple.*Mobile.*Safari/.test(B)}})(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:(function(){var A=window.Element||window.HTMLElement;return !!(A&&A.prototype)})(),SpecificElementExtensions:(function(){if(typeof window.HTMLDivElement!=="undefined"){return true}var C=document.createElement("div");var B=document.createElement("form");var A=false;if(C.__proto__&&(C.__proto__!==B.__proto__)){A=true}C=B=null;return A})()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(A){return A}};if(Prototype.Browser.MobileSafari){Prototype.BrowserFeatures.SpecificElementExtensions=false}var Abstract={};var Try={these:function(){var C;for(var B=0,D=arguments.length;B<D;B++){var A=arguments[B];try{C=A();break}catch(E){}}return C}};var Class=(function(){function A(){}function B(){var G=null,F=$A(arguments);if(Object.isFunction(F[0])){G=F.shift()}function D(){this.initialize.apply(this,arguments)}Object.extend(D,Class.Methods);D.superclass=G;D.subclasses=[];if(G){A.prototype=G.prototype;D.prototype=new A;G.subclasses.push(D)}for(var E=0;E<F.length;E++){D.addMethods(F[E])}if(!D.prototype.initialize){D.prototype.initialize=Prototype.emptyFunction}D.prototype.constructor=D;return D}function C(J){var F=this.superclass&&this.superclass.prototype;var E=Object.keys(J);if(!Object.keys({toString:true}).length){if(J.toString!=Object.prototype.toString){E.push("toString")}if(J.valueOf!=Object.prototype.valueOf){E.push("valueOf")}}for(var D=0,G=E.length;D<G;D++){var I=E[D],H=J[I];if(F&&Object.isFunction(H)&&H.argumentNames().first()=="$super"){var K=H;H=(function(L){return function(){return F[L].apply(this,arguments)}})(I).wrap(K);H.valueOf=K.valueOf.bind(K);H.toString=K.toString.bind(K)}this.prototype[I]=H}return this}return{create:B,Methods:{addMethods:C}}})();(function(){var D=Object.prototype.toString;function I(Q,S){for(var R in S){Q[R]=S[R]}return Q}function L(Q){try{if(E(Q)){return"undefined"}if(Q===null){return"null"}return Q.inspect?Q.inspect():String(Q)}catch(R){if(R instanceof RangeError){return"..."}throw R}}function K(Q){var S=typeof Q;switch(S){case"undefined":case"function":case"unknown":return ;case"boolean":return Q.toString()}if(Q===null){return"null"}if(Q.toJSON){return Q.toJSON()}if(H(Q)){return }var R=[];for(var U in Q){var T=K(Q[U]);if(!E(T)){R.push(U.toJSON()+": "+T)}}return"{"+R.join(", ")+"}"}function C(Q){return $H(Q).toQueryString()}function F(Q){return Q&&Q.toHTML?Q.toHTML():String.interpret(Q)}function O(Q){var R=[];for(var S in Q){R.push(S)}return R}function M(Q){var R=[];for(var S in Q){R.push(Q[S])}return R}function J(Q){return I({},Q)}function H(Q){return !!(Q&&Q.nodeType==1)}function G(Q){return D.call(Q)=="[object Array]"}function P(Q){return Q instanceof Hash}function B(Q){return typeof Q==="function"}function A(Q){return D.call(Q)=="[object String]"}function N(Q){return D.call(Q)=="[object Number]"}function E(Q){return typeof Q==="undefined"}I(Object,{extend:I,inspect:L,toJSON:K,toQueryString:C,toHTML:F,keys:O,values:M,clone:J,isElement:H,isArray:G,isHash:P,isFunction:B,isString:A,isNumber:N,isUndefined:E})})();Object.extend(Function.prototype,(function(){var K=Array.prototype.slice;function D(O,L){var N=O.length,M=L.length;while(M--){O[N+M]=L[M]}return O}function I(M,L){M=K.call(M,0);return D(M,L)}function G(){var L=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return L.length==1&&!L[0]?[]:L}function H(N){if(arguments.length<2&&Object.isUndefined(arguments[0])){return this}var L=this,M=K.call(arguments,1);return function(){var O=I(M,arguments);return L.apply(N,O)}}function F(N){var L=this,M=K.call(arguments,1);return function(P){var O=D([P||window.event],M);return L.apply(N,O)}}function J(){if(!arguments.length){return this}var L=this,M=K.call(arguments,0);return function(){var N=I(M,arguments);return L.apply(this,N)}}function E(N){var L=this,M=K.call(arguments,1);N=N*1000;return window.setTimeout(function(){return L.apply(L,M)},N)}function A(){var L=D([0.01],arguments);return this.delay.apply(this,L)}function C(M){var L=this;return function(){var N=D([L.bind(this)],arguments);return M.apply(this,N)}}function B(){if(this._methodized){return this._methodized}var L=this;return this._methodized=function(){var M=D([this],arguments);return L.apply(null,M)}}return{argumentNames:G,bind:H,bindAsEventListener:F,curry:J,delay:E,defer:A,wrap:C,methodize:B}})());Date.prototype.toJSON=function(){return'"'+this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+'Z"'};RegExp.prototype.match=RegExp.prototype.test;RegExp.escape=function(A){return String(A).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};var PeriodicalExecuter=Class.create({initialize:function(B,A){this.callback=B;this.frequency=A;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),this.frequency*1000)},execute:function(){this.callback(this)},stop:function(){if(!this.timer){return }clearInterval(this.timer);this.timer=null},onTimerEvent:function(){if(!this.currentlyExecuting){try{this.currentlyExecuting=true;this.execute();this.currentlyExecuting=false}catch(A){this.currentlyExecuting=false;throw A}}}});Object.extend(String,{interpret:function(A){return A==null?"":String(A)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});Object.extend(String.prototype,(function(){function prepareReplacement(replacement){if(Object.isFunction(replacement)){return replacement}var template=new Template(replacement);return function(match){return template.evaluate(match)}}function gsub(pattern,replacement){var result="",source=this,match;replacement=prepareReplacement(replacement);if(Object.isString(pattern)){pattern=RegExp.escape(pattern)}if(!(pattern.length||pattern.source)){replacement=replacement("");return replacement+source.split("").join(replacement)+replacement}while(source.length>0){if(match=source.match(pattern)){result+=source.slice(0,match.index);result+=String.interpret(replacement(match));source=source.slice(match.index+match[0].length)}else{result+=source,source=""}}return result}function sub(pattern,replacement,count){replacement=prepareReplacement(replacement);count=Object.isUndefined(count)?1:count;return this.gsub(pattern,function(match){if(--count<0){return match[0]}return replacement(match)})}function scan(pattern,iterator){this.gsub(pattern,iterator);return String(this)}function truncate(length,truncation){length=length||30;truncation=Object.isUndefined(truncation)?"...":truncation;return this.length>length?this.slice(0,length-truncation.length)+truncation:String(this)}function strip(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function stripTags(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}function stripScripts(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")}function extractScripts(){var matchAll=new RegExp(Prototype.ScriptFragment,"img");var matchOne=new RegExp(Prototype.ScriptFragment,"im");return(this.match(matchAll)||[]).map(function(scriptTag){return(scriptTag.match(matchOne)||["",""])[1]})}function evalScripts(){return this.extractScripts().map(function(script){return eval(script)})}function escapeHTML(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function unescapeHTML(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function toQueryParams(separator){var match=this.strip().match(/([^?#]*)(#.*)?$/);if(!match){return{}}return match[1].split(separator||"&").inject({},function(hash,pair){if((pair=pair.split("="))[0]){var key=decodeURIComponent(pair.shift());var value=pair.length>1?pair.join("="):pair[0];if(value!=undefined){value=decodeURIComponent(value)}if(key in hash){if(!Object.isArray(hash[key])){hash[key]=[hash[key]]}hash[key].push(value)}else{hash[key]=value}}return hash})}function toArray(){return this.split("")}function succ(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)}function times(count){return count<1?"":new Array(count+1).join(this)}function camelize(){var parts=this.split("-"),len=parts.length;if(len==1){return parts[0]}var camelized=this.charAt(0)=="-"?parts[0].charAt(0).toUpperCase()+parts[0].substring(1):parts[0];for(var i=1;i<len;i++){camelized+=parts[i].charAt(0).toUpperCase()+parts[i].substring(1)}return camelized}function capitalize(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()}function underscore(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}function dasherize(){return this.replace(/_/g,"-")}function inspect(useDoubleQuotes){var escapedString=this.replace(/[\x00-\x1f\\]/g,function(character){if(character in String.specialChar){return String.specialChar[character]}return"\\u00"+character.charCodeAt().toPaddedString(2,16)});if(useDoubleQuotes){return'"'+escapedString.replace(/"/g,'\\"')+'"'}return"'"+escapedString.replace(/'/g,"\\'")+"'"}function toJSON(){return this.inspect(true)}function unfilterJSON(filter){return this.replace(filter||Prototype.JSONFilter,"$1")}function isJSON(){var str=this;if(str.blank()){return false}str=this.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,"");return(/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/).test(str)}function evalJSON(sanitize){var json=this.unfilterJSON();try{if(!sanitize||json.isJSON()){return eval("("+json+")")}}catch(e){}throw new SyntaxError("Badly formed JSON string: "+this.inspect())}function include(pattern){return this.indexOf(pattern)>-1}function startsWith(pattern){return this.indexOf(pattern)===0}function endsWith(pattern){var d=this.length-pattern.length;return d>=0&&this.lastIndexOf(pattern)===d}function empty(){return this==""}function blank(){return/^\s*$/.test(this)}function interpolate(object,pattern){return new Template(this,pattern).evaluate(object)}return{gsub:gsub,sub:sub,scan:scan,truncate:truncate,strip:String.prototype.trim?String.prototype.trim:strip,stripTags:stripTags,stripScripts:stripScripts,extractScripts:extractScripts,evalScripts:evalScripts,escapeHTML:escapeHTML,unescapeHTML:unescapeHTML,toQueryParams:toQueryParams,parseQuery:toQueryParams,toArray:toArray,succ:succ,times:times,camelize:camelize,capitalize:capitalize,underscore:underscore,dasherize:dasherize,inspect:inspect,toJSON:toJSON,unfilterJSON:unfilterJSON,isJSON:isJSON,evalJSON:evalJSON,include:include,startsWith:startsWith,endsWith:endsWith,empty:empty,blank:blank,interpolate:interpolate}})());var Template=Class.create({initialize:function(A,B){this.template=A.toString();this.pattern=B||Template.Pattern},evaluate:function(A){if(A&&Object.isFunction(A.toTemplateReplacements)){A=A.toTemplateReplacements()}return this.template.gsub(this.pattern,function(D){if(A==null){return(D[1]+"")}var F=D[1]||"";if(F=="\\"){return D[2]}var B=A,G=D[3];var E=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;D=E.exec(G);if(D==null){return F}while(D!=null){var C=D[1].startsWith("[")?D[2].replace(/\\\\]/g,"]"):D[1];B=B[C];if(null==B||""==D[3]){break}G=G.substring("["==D[3]?D[1].length:D[0].length);D=E.exec(G)}return F+String.interpret(B)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;var $break={};var Enumerable=(function(){function C(Y,X){var W=0;try{this._each(function(a){Y.call(X,a,W++)})}catch(Z){if(Z!=$break){throw Z}}return this}function R(Z,Y,X){var W=-Z,a=[],b=this.toArray();if(Z<1){return b}while((W+=Z)<b.length){a.push(b.slice(W,W+Z))}return a.collect(Y,X)}function B(Y,X){Y=Y||Prototype.K;var W=true;this.each(function(a,Z){W=W&&!!Y.call(X,a,Z);if(!W){throw $break}});return W}function I(Y,X){Y=Y||Prototype.K;var W=false;this.each(function(a,Z){if(W=!!Y.call(X,a,Z)){throw $break}});return W}function J(Y,X){Y=Y||Prototype.K;var W=[];this.each(function(a,Z){W.push(Y.call(X,a,Z))});return W}function T(Y,X){var W;this.each(function(a,Z){if(Y.call(X,a,Z)){W=a;throw $break}});return W}function H(Y,X){var W=[];this.each(function(a,Z){if(Y.call(X,a,Z)){W.push(a)}});return W}function G(Z,Y,X){Y=Y||Prototype.K;var W=[];if(Object.isString(Z)){Z=new RegExp(RegExp.escape(Z))}this.each(function(b,a){if(Z.match(b)){W.push(Y.call(X,b,a))}});return W}function A(W){if(Object.isFunction(this.indexOf)){if(this.indexOf(W)!=-1){return true}}var X=false;this.each(function(Y){if(Y==W){X=true;throw $break}});return X}function Q(X,W){W=Object.isUndefined(W)?null:W;return this.eachSlice(X,function(Y){while(Y.length<X){Y.push(W)}return Y})}function L(W,Y,X){this.each(function(a,Z){W=Y.call(X,W,a,Z)});return W}function V(X){var W=$A(arguments).slice(1);return this.map(function(Y){return Y[X].apply(Y,W)})}function P(Y,X){Y=Y||Prototype.K;var W;this.each(function(a,Z){a=Y.call(X,a,Z);if(W==null||a>=W){W=a}});return W}function N(Y,X){Y=Y||Prototype.K;var W;this.each(function(a,Z){a=Y.call(X,a,Z);if(W==null||a<W){W=a}});return W}function E(Z,X){Z=Z||Prototype.K;var Y=[],W=[];this.each(function(b,a){(Z.call(X,b,a)?Y:W).push(b)});return[Y,W]}function F(X){var W=[];this.each(function(Y){W.push(Y[X])});return W}function D(Y,X){var W=[];this.each(function(a,Z){if(!Y.call(X,a,Z)){W.push(a)}});return W}function M(X,W){return this.map(function(Z,Y){return{value:Z,criteria:X.call(W,Z,Y)}}).sort(function(d,c){var Z=d.criteria,Y=c.criteria;return Z<Y?-1:Z>Y?1:0}).pluck("value")}function O(){return this.map()}function S(){var X=Prototype.K,W=$A(arguments);if(Object.isFunction(W.last())){X=W.pop()}var Y=[this].concat(W).map($A);return this.map(function(a,Z){return X(Y.pluck(Z))})}function K(){return this.toArray().length}function U(){return"#<Enumerable:"+this.toArray().inspect()+">"}return{each:C,eachSlice:R,all:B,every:B,any:I,some:I,collect:J,map:J,detect:T,findAll:H,select:H,filter:H,grep:G,include:A,member:A,inGroupsOf:Q,inject:L,invoke:V,max:P,min:N,partition:E,pluck:F,reject:D,sortBy:M,toArray:O,entries:O,zip:S,size:K,inspect:U,find:T}})();function $A(C){if(!C){return[]}if("toArray" in Object(C)){return C.toArray()}var B=C.length||0,A=new Array(B);while(B--){A[B]=C[B]}return A}function $w(A){if(!Object.isString(A)){return[]}A=A.strip();return A?A.split(/\s+/):[]}Array.from=$A;(function(){var S=Array.prototype,M=S.slice,O=S.forEach;function B(W){for(var V=0,X=this.length;V<X;V++){W(this[V])}}if(!O){O=B}function L(){this.length=0;return this}function D(){return this[0]}function G(){return this[this.length-1]}function I(){return this.select(function(V){return V!=null})}function U(){return this.inject([],function(W,V){if(Object.isArray(V)){return W.concat(V.flatten())}W.push(V);return W})}function H(){var V=M.call(arguments,0);return this.select(function(W){return !V.include(W)})}function F(V){return(V!==false?this:this.toArray())._reverse()}function K(V){return this.inject([],function(Y,X,W){if(0==W||(V?Y.last()!=X:!Y.include(X))){Y.push(X)}return Y})}function P(V){return this.uniq().findAll(function(W){return V.detect(function(X){return W===X})})}function Q(){return M.call(this,0)}function J(){return this.length}function T(){return"["+this.map(Object.inspect).join(", ")+"]"}function R(){var V=[];this.each(function(W){var X=Object.toJSON(W);if(!Object.isUndefined(X)){V.push(X)}});return"["+V.join(", ")+"]"}function A(X,V){V||(V=0);var W=this.length;if(V<0){V=W+V}for(;V<W;V++){if(this[V]===X){return V}}return -1}function N(W,V){V=isNaN(V)?this.length:(V<0?this.length+V:V)+1;var X=this.slice(0,V).reverse().indexOf(W);return(X<0)?X:V-X-1}function C(){var a=M.call(this,0),Y;for(var W=0,X=arguments.length;W<X;W++){Y=arguments[W];if(Object.isArray(Y)&&!("callee" in Y)){for(var V=0,Z=Y.length;V<Z;V++){a.push(Y[V])}}else{a.push(Y)}}return a}Object.extend(S,Enumerable);if(!S._reverse){S._reverse=S.reverse}Object.extend(S,{_each:O,clear:L,first:D,last:G,compact:I,flatten:U,without:H,reverse:F,uniq:K,intersect:P,clone:Q,toArray:Q,size:J,inspect:T,toJSON:R});var E=(function(){return[].concat(arguments)[0][0]!==1})(1,2);if(E){S.concat=C}if(!S.indexOf){S.indexOf=A}if(!S.lastIndexOf){S.lastIndexOf=N}})();function $H(A){return new Hash(A)}var Hash=Class.create(Enumerable,(function(){function E(Q){this._object=Object.isHash(Q)?Q.toObject():Object.clone(Q)}function F(R){for(var Q in this._object){var S=this._object[Q],T=[Q,S];T.key=Q;T.value=S;R(T)}}function K(Q,R){return this._object[Q]=R}function C(Q){if(this._object[Q]!==Object.prototype[Q]){return this._object[Q]}}function N(Q){var R=this._object[Q];delete this._object[Q];return R}function P(){return Object.clone(this._object)}function O(){return this.pluck("key")}function M(){return this.pluck("value")}function G(R){var Q=this.detect(function(S){return S.value===R});return Q&&Q.key}function I(Q){return this.clone().update(Q)}function D(Q){return new Hash(Q).inject(this,function(R,S){R.set(S.key,S.value);return R})}function B(Q,R){if(Object.isUndefined(R)){return Q}return Q+"="+encodeURIComponent(String.interpret(R))}function A(){return this.inject([],function(S,T){var R=encodeURIComponent(T.key),Q=T.value;if(Q&&typeof Q=="object"){if(Object.isArray(Q)){return S.concat(Q.map(B.curry(R)))}}else{S.push(B(R,Q))}return S}).join("&")}function L(){return"#<Hash:{"+this.map(function(Q){return Q.map(Object.inspect).join(": ")}).join(", ")+"}>"}function J(){return Object.toJSON(this.toObject())}function H(){return new Hash(this)}return{initialize:E,_each:F,set:K,get:C,unset:N,toObject:P,toTemplateReplacements:P,keys:O,values:M,index:G,merge:I,update:D,toQueryString:A,inspect:L,toJSON:J,clone:H}})());Hash.from=$H;Object.extend(Number.prototype,(function(){function D(){return this.toPaddedString(2,16)}function E(){return this+1}function A(K,J){$R(0,this,true).each(K,J);return this}function B(L,K){var J=this.toString(K||10);return"0".times(L-J.length)+J}function F(){return isFinite(this)?this.toString():"null"}function I(){return Math.abs(this)}function H(){return Math.round(this)}function G(){return Math.ceil(this)}function C(){return Math.floor(this)}return{toColorPart:D,succ:E,times:A,toPaddedString:B,toJSON:F,abs:I,round:H,ceil:G,floor:C}})());function $R(C,A,B){return new ObjectRange(C,A,B)}var ObjectRange=Class.create(Enumerable,(function(){function B(F,D,E){this.start=F;this.end=D;this.exclusive=E}function C(D){var E=this.start;while(this.include(E)){D(E);E=E.succ()}}function A(D){if(D<this.start){return false}if(this.exclusive){return D<this.end}return D<=this.end}return{initialize:B,_each:C,include:A}})());var Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||false},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(A){this.responders._each(A)},register:function(A){if(!this.include(A)){this.responders.push(A)}},unregister:function(A){this.responders=this.responders.without(A)},dispatch:function(D,B,C,A){this.each(function(E){if(Object.isFunction(E[D])){try{E[D].apply(E,[B,C,A])}catch(F){}}})}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=Class.create({initialize:function(A){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:true,evalJS:true};Object.extend(this.options,A||{});this.options.method=this.options.method.toLowerCase();if(Object.isString(this.options.parameters)){this.options.parameters=this.options.parameters.toQueryParams()}else{if(Object.isHash(this.options.parameters)){this.options.parameters=this.options.parameters.toObject()}}}});Ajax.Request=Class.create(Ajax.Base,{_complete:false,initialize:function($super,B,A){$super(A);this.transport=Ajax.getTransport();this.request(B)},request:function(B){this.url=B;this.method=this.options.method;var D=Object.clone(this.options.parameters);if(!["get","post"].include(this.method)){D._method=this.method;this.method="post"}this.parameters=D;if(D=Object.toQueryString(D)){if(this.method=="get"){this.url+=(this.url.include("?")?"&":"?")+D}else{if(/Konqueror|Safari|KHTML/.test(navigator.userAgent)){D+="&_="}}}try{var A=new Ajax.Response(this);if(this.options.onCreate){this.options.onCreate(A)}Ajax.Responders.dispatch("onCreate",this,A);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);if(this.options.asynchronous){this.respondToReadyState.bind(this).defer(1)}this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body=this.method=="post"?(this.options.postBody||D):null;this.transport.send(this.body);if(!this.options.asynchronous&&this.transport.overrideMimeType){this.onStateChange()}}catch(C){this.dispatchException(C)}},onStateChange:function(){var A=this.transport.readyState;if(A>1&&!((A==4)&&this._complete)){this.respondToReadyState(this.transport.readyState)}},setRequestHeaders:function(){var E={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if(this.method=="post"){E["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+this.options.encoding:"");if(this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005){E.Connection="close"}}if(typeof this.options.requestHeaders=="object"){var C=this.options.requestHeaders;if(Object.isFunction(C.push)){for(var B=0,D=C.length;B<D;B+=2){E[C[B]]=C[B+1]}}else{$H(C).each(function(F){E[F.key]=F.value})}}for(var A in E){this.transport.setRequestHeader(A,E[A])}},success:function(){var A=this.getStatus();return !A||(A>=200&&A<300)},getStatus:function(){try{return this.transport.status||0}catch(A){return 0}},respondToReadyState:function(A){var C=Ajax.Request.Events[A],B=new Ajax.Response(this);if(C=="Complete"){try{this._complete=true;(this.options["on"+B.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(B,B.headerJSON)}catch(D){this.dispatchException(D)}var E=B.getHeader("Content-type");if(this.options.evalJS=="force"||(this.options.evalJS&&this.isSameOrigin()&&E&&E.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))){this.evalResponse()}}try{(this.options["on"+C]||Prototype.emptyFunction)(B,B.headerJSON);Ajax.Responders.dispatch("on"+C,this,B,B.headerJSON)}catch(D){this.dispatchException(D)}if(C=="Complete"){this.transport.onreadystatechange=Prototype.emptyFunction}},isSameOrigin:function(){var A=this.url.match(/^\s*https?:\/\/[^\/]*/);return !A||(A[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""}))},getHeader:function(A){try{return this.transport.getResponseHeader(A)||null}catch(B){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(e){this.dispatchException(e)}},dispatchException:function(A){(this.options.onException||Prototype.emptyFunction)(this,A);Ajax.Responders.dispatch("onException",this,A)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];Ajax.Response=Class.create({initialize:function(C){this.request=C;var D=this.transport=C.transport,A=this.readyState=D.readyState;if((A>2&&!Prototype.Browser.IE)||A==4){this.status=this.getStatus();this.statusText=this.getStatusText();this.responseText=String.interpret(D.responseText);this.headerJSON=this._getHeaderJSON()}if(A==4){var B=D.responseXML;this.responseXML=Object.isUndefined(B)?null:B;this.responseJSON=this._getResponseJSON()}},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||""}catch(A){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(A){return null}},getResponseHeader:function(A){return this.transport.getResponseHeader(A)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var A=this.getHeader("X-JSON");if(!A){return null}A=decodeURIComponent(escape(A));try{return A.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(B){this.request.dispatchException(B)}},_getResponseJSON:function(){var A=this.request.options;if(!A.evalJSON||(A.evalJSON!="force"&&!(this.getHeader("Content-type")||"").include("application/json"))||this.responseText.blank()){return null}try{return this.responseText.evalJSON(A.sanitizeJSON||!this.request.isSameOrigin())}catch(B){this.request.dispatchException(B)}}});Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,A,C,B){this.container={success:(A.success||A),failure:(A.failure||(A.success?null:A))};B=Object.clone(B);var D=B.onComplete;B.onComplete=(function(E,F){this.updateContent(E.responseText);if(Object.isFunction(D)){D(E,F)}}).bind(this);$super(C,B)},updateContent:function(D){var C=this.container[this.success()?"success":"failure"],A=this.options;if(!A.evalScripts){D=D.stripScripts()}if(C=$(C)){if(A.insertion){if(Object.isString(A.insertion)){var B={};B[A.insertion]=D;C.insert(B)}else{A.insertion(C,D)}}else{C.update(D)}}}});Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,A,C,B){$super(B);this.onComplete=this.options.onComplete;this.frequency=(this.options.frequency||2);this.decay=(this.options.decay||1);this.updater={};this.container=A;this.url=C;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},updateComplete:function(A){if(this.options.decay){this.decay=(A.responseText==this.lastText?this.decay*this.options.decay:1);this.lastText=A.responseText}this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});function $(B){if(arguments.length>1){for(var A=0,D=[],C=arguments.length;A<C;A++){D.push($(arguments[A]))}return D}if(Object.isString(B)){B=document.getElementById(B)}return Element.extend(B)}if(Prototype.BrowserFeatures.XPath){document._getElementsByXPath=function(F,A){var C=[];var E=document.evaluate(F,$(A)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(var B=0,D=E.snapshotLength;B<D;B++){C.push(Element.extend(E.snapshotItem(B)))}return C}}if(!window.Node){var Node={}}if(!Node.ELEMENT_NODE){Object.extend(Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12})}(function(C){var B=(function(){var F=document.createElement("form");var E=document.createElement("input");var D=document.documentElement;E.setAttribute("name","test");F.appendChild(E);D.appendChild(F);var G=F.elements?(typeof F.elements.test=="undefined"):null;D.removeChild(F);F=E=null;return G})();var A=C.Element;C.Element=function(F,E){E=E||{};F=F.toLowerCase();var D=Element.cache;if(B&&E.name){F="<"+F+' name="'+E.name+'">';delete E.name;return Element.writeAttribute(document.createElement(F),E)}if(!D[F]){D[F]=Element.extend(document.createElement(F))}return Element.writeAttribute(D[F].cloneNode(false),E)};Object.extend(C.Element,A||{});if(A){C.Element.prototype=A.prototype}})(this);Element.cache={};Element.idCounter=1;Element.Methods={visible:function(A){return $(A).style.display!="none"},toggle:function(A){A=$(A);Element[Element.visible(A)?"hide":"show"](A);return A},hide:function(A){A=$(A);A.style.display="none";return A},show:function(A){A=$(A);A.style.display="";return A},remove:function(A){A=$(A);A.parentNode.removeChild(A);return A},update:(function(){var B=(function(){var E=document.createElement("select"),F=true;E.innerHTML='<option value="test">test</option>';if(E.options&&E.options[0]){F=E.options[0].nodeName.toUpperCase()!=="OPTION"}E=null;return F})();var A=(function(){try{var E=document.createElement("table");if(E&&E.tBodies){E.innerHTML="<tbody><tr><td>test</td></tr></tbody>";var G=typeof E.tBodies[0]=="undefined";E=null;return G}}catch(F){return true}})();var D=(function(){var E=document.createElement("script"),G=false;try{E.appendChild(document.createTextNode(""));G=!E.firstChild||E.firstChild&&E.firstChild.nodeType!==3}catch(F){G=true}E=null;return G})();function C(F,G){F=$(F);if(G&&G.toElement){G=G.toElement()}if(Object.isElement(G)){return F.update().insert(G)}G=Object.toHTML(G);var E=F.tagName.toUpperCase();if(E==="SCRIPT"&&D){F.text=G;return F}if(B||A){if(E in Element._insertionTranslations.tags){while(F.firstChild){F.removeChild(F.firstChild)}Element._getContentFromAnonymousElement(E,G.stripScripts()).each(function(H){F.appendChild(H)})}else{F.innerHTML=G.stripScripts()}}else{F.innerHTML=G.stripScripts()}G.evalScripts.bind(G).defer();return F}return C})(),replace:function(B,C){B=$(B);if(C&&C.toElement){C=C.toElement()}else{if(!Object.isElement(C)){C=Object.toHTML(C);var A=B.ownerDocument.createRange();A.selectNode(B);C.evalScripts.bind(C).defer();C=A.createContextualFragment(C.stripScripts())}}B.parentNode.replaceChild(C,B);return B},insert:function(C,E){C=$(C);if(Object.isString(E)||Object.isNumber(E)||Object.isElement(E)||(E&&(E.toElement||E.toHTML))){E={bottom:E}}var D,F,B,G;for(var A in E){D=E[A];A=A.toLowerCase();F=Element._insertionTranslations[A];if(D&&D.toElement){D=D.toElement()}if(Object.isElement(D)){F(C,D);continue}D=Object.toHTML(D);B=((A=="before"||A=="after")?C.parentNode:C).tagName.toUpperCase();G=Element._getContentFromAnonymousElement(B,D.stripScripts());if(A=="top"||A=="after"){G.reverse()}G.each(F.curry(C));D.evalScripts.bind(D).defer()}return C},wrap:function(B,C,A){B=$(B);if(Object.isElement(C)){$(C).writeAttribute(A||{})}else{if(Object.isString(C)){C=new Element(C,A)}else{C=new Element("div",C)}}if(B.parentNode){B.parentNode.replaceChild(C,B)}C.appendChild(B);return C},inspect:function(B){B=$(B);var A="<"+B.tagName.toLowerCase();$H({id:"id",className:"class"}).each(function(F){var E=F.first(),C=F.last();var D=(B[E]||"").toString();if(D){A+=" "+C+"="+D.inspect(true)}});return A+">"},recursivelyCollect:function(A,C){A=$(A);var B=[];while(A=A[C]){if(A.nodeType==1){B.push(Element.extend(A))}}return B},ancestors:function(A){return Element.recursivelyCollect(A,"parentNode")},descendants:function(A){return Element.select(A,"*")},firstDescendant:function(A){A=$(A).firstChild;while(A&&A.nodeType!=1){A=A.nextSibling}return $(A)},immediateDescendants:function(A){if(!(A=$(A).firstChild)){return[]}while(A&&A.nodeType!=1){A=A.nextSibling}if(A){return[A].concat($(A).nextSiblings())}return[]},previousSiblings:function(A){return Element.recursivelyCollect(A,"previousSibling")},nextSiblings:function(A){return Element.recursivelyCollect(A,"nextSibling")},siblings:function(A){A=$(A);return Element.previousSiblings(A).reverse().concat(Element.nextSiblings(A))},match:function(B,A){if(Object.isString(A)){A=new Selector(A)}return A.match($(B))},up:function(B,D,A){B=$(B);if(arguments.length==1){return $(B.parentNode)}var C=Element.ancestors(B);return Object.isNumber(D)?C[D]:Selector.findElement(C,D,A)},down:function(B,C,A){B=$(B);if(arguments.length==1){return Element.firstDescendant(B)}return Object.isNumber(C)?Element.descendants(B)[C]:Element.select(B,C)[A||0]},previous:function(B,D,A){B=$(B);if(arguments.length==1){return $(Selector.handlers.previousElementSibling(B))}var C=Element.previousSiblings(B);return Object.isNumber(D)?C[D]:Selector.findElement(C,D,A)},next:function(C,D,B){C=$(C);if(arguments.length==1){return $(Selector.handlers.nextElementSibling(C))}var A=Element.nextSiblings(C);return Object.isNumber(D)?A[D]:Selector.findElement(A,D,B)},select:function(B){var A=Array.prototype.slice.call(arguments,1);return Selector.findChildElements(B,A)},adjacent:function(B){var A=Array.prototype.slice.call(arguments,1);return Selector.findChildElements(B.parentNode,A).without(B)},identify:function(A){A=$(A);var B=Element.readAttribute(A,"id");if(B){return B}do{B="anonymous_element_"+Element.idCounter++}while($(B));Element.writeAttribute(A,"id",B);return B},readAttribute:function(C,A){C=$(C);if(Prototype.Browser.IE){var B=Element._attributeTranslations.read;if(B.values[A]){return B.values[A](C,A)}if(B.names[A]){A=B.names[A]}if(A.include(":")){return(!C.attributes||!C.attributes[A])?null:C.attributes[A].value}}return C.getAttribute(A)},writeAttribute:function(E,C,F){E=$(E);var B={},D=Element._attributeTranslations.write;if(typeof C=="object"){B=C}else{B[C]=Object.isUndefined(F)?true:F}for(var A in B){C=D.names[A]||A;F=B[A];if(D.values[A]){C=D.values[A](E,F)}if(F===false||F===null){E.removeAttribute(C)}else{if(F===true){E.setAttribute(C,C)}else{E.setAttribute(C,F)}}}return E},getHeight:function(A){return Element.getDimensions(A).height},getWidth:function(A){return Element.getDimensions(A).width},classNames:function(A){return new Element.ClassNames(A)},hasClassName:function(A,B){if(!(A=$(A))){return }var C=A.className;return(C.length>0&&(C==B||new RegExp("(^|\\s)"+B+"(\\s|$)").test(C)))},addClassName:function(A,B){if(!(A=$(A))){return }if(!Element.hasClassName(A,B)){A.className+=(A.className?" ":"")+B}return A},removeClassName:function(A,B){if(!(A=$(A))){return }A.className=A.className.replace(new RegExp("(^|\\s+)"+B+"(\\s+|$)")," ").strip();return A},toggleClassName:function(A,B){if(!(A=$(A))){return }return Element[Element.hasClassName(A,B)?"removeClassName":"addClassName"](A,B)},cleanWhitespace:function(B){B=$(B);var C=B.firstChild;while(C){var A=C.nextSibling;if(C.nodeType==3&&!/\S/.test(C.nodeValue)){B.removeChild(C)}C=A}return B},empty:function(A){return $(A).innerHTML.blank()},descendantOf:function(B,A){B=$(B),A=$(A);if(B.compareDocumentPosition){return(B.compareDocumentPosition(A)&8)===8}if(A.contains){return A.contains(B)&&A!==B}while(B=B.parentNode){if(B==A){return true}}return false},scrollTo:function(A){A=$(A);var B=Element.cumulativeOffset(A);window.scrollTo(B[0],B[1]);return A},getStyle:function(B,C){B=$(B);C=C=="float"?"cssFloat":C.camelize();var D=B.style[C];if(!D||D=="auto"){var A=document.defaultView.getComputedStyle(B,null);D=A?A[C]:null}if(C=="opacity"){return D?parseFloat(D):1}return D=="auto"?null:D},getOpacity:function(A){return $(A).getStyle("opacity")},setStyle:function(B,C){B=$(B);var E=B.style,A;if(Object.isString(C)){B.style.cssText+=";"+C;return C.include("opacity")?B.setOpacity(C.match(/opacity:\s*(\d?\.?\d*)/)[1]):B}for(var D in C){if(D=="opacity"){B.setOpacity(C[D])}else{E[(D=="float"||D=="cssFloat")?(Object.isUndefined(E.styleFloat)?"cssFloat":"styleFloat"):D]=C[D]}}return B},setOpacity:function(A,B){A=$(A);A.style.opacity=(B==1||B==="")?"":(B<0.00001)?0:B;return A},getDimensions:function(C){C=$(C);var G=Element.getStyle(C,"display");if(G!="none"&&G!=null){return{width:C.offsetWidth,height:C.offsetHeight}}var B=C.style;var F=B.visibility;var D=B.position;var A=B.display;B.visibility="hidden";if(D!="fixed"){B.position="absolute"}B.display="block";var H=C.clientWidth;var E=C.clientHeight;B.display=A;B.position=D;B.visibility=F;return{width:H,height:E}},makePositioned:function(A){A=$(A);var B=Element.getStyle(A,"position");if(B=="static"||!B){A._madePositioned=true;A.style.position="relative";if(Prototype.Browser.Opera){A.style.top=0;A.style.left=0}}return A},undoPositioned:function(A){A=$(A);if(A._madePositioned){A._madePositioned=undefined;A.style.position=A.style.top=A.style.left=A.style.bottom=A.style.right=""}return A},makeClipping:function(A){A=$(A);if(A._overflow){return A}A._overflow=Element.getStyle(A,"overflow")||"auto";if(A._overflow!=="hidden"){A.style.overflow="hidden"}return A},undoClipping:function(A){A=$(A);if(!A._overflow){return A}A.style.overflow=A._overflow=="auto"?"":A._overflow;A._overflow=null;return A},cumulativeOffset:function(B){var A=0,C=0;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;B=B.offsetParent}while(B);return Element._returnOffset(C,A)},positionedOffset:function(B){var A=0,D=0;do{A+=B.offsetTop||0;D+=B.offsetLeft||0;B=B.offsetParent;if(B){if(B.tagName.toUpperCase()=="BODY"){break}var C=Element.getStyle(B,"position");if(C!=="static"){break}}}while(B);return Element._returnOffset(D,A)},absolutize:function(B){B=$(B);if(Element.getStyle(B,"position")=="absolute"){return B}var D=Element.positionedOffset(B);var F=D[1];var E=D[0];var C=B.clientWidth;var A=B.clientHeight;B._originalLeft=E-parseFloat(B.style.left||0);B._originalTop=F-parseFloat(B.style.top||0);B._originalWidth=B.style.width;B._originalHeight=B.style.height;B.style.position="absolute";B.style.top=F+"px";B.style.left=E+"px";B.style.width=C+"px";B.style.height=A+"px";return B},relativize:function(A){A=$(A);if(Element.getStyle(A,"position")=="relative"){return A}A.style.position="relative";var C=parseFloat(A.style.top||0)-(A._originalTop||0);var B=parseFloat(A.style.left||0)-(A._originalLeft||0);A.style.top=C+"px";A.style.left=B+"px";A.style.height=A._originalHeight;A.style.width=A._originalWidth;return A},cumulativeScrollOffset:function(B){var A=0,C=0;do{A+=B.scrollTop||0;C+=B.scrollLeft||0;B=B.parentNode}while(B);return Element._returnOffset(C,A)},getOffsetParent:function(A){if(A.offsetParent){return $(A.offsetParent)}if(A==document.body){return $(A)}while((A=A.parentNode)&&A!=document.body){if(Element.getStyle(A,"position")!="static"){return $(A)}}return $(document.body)},viewportOffset:function(D){var A=0,C=0;var B=D;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;if(B.offsetParent==document.body&&Element.getStyle(B,"position")=="absolute"){break}}while(B=B.offsetParent);B=D;do{if(!Prototype.Browser.Opera||(B.tagName&&(B.tagName.toUpperCase()=="BODY"))){A-=B.scrollTop||0;C-=B.scrollLeft||0}}while(B=B.parentNode);return Element._returnOffset(C,A)},clonePosition:function(B,D){var A=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},arguments[2]||{});D=$(D);var E=Element.viewportOffset(D);B=$(B);var F=[0,0];var C=null;if(Element.getStyle(B,"position")=="absolute"){C=Element.getOffsetParent(B);F=Element.viewportOffset(C)}if(C==document.body){F[0]-=document.body.offsetLeft;F[1]-=document.body.offsetTop}if(A.setLeft){B.style.left=(E[0]-F[0]+A.offsetLeft)+"px"}if(A.setTop){B.style.top=(E[1]-F[1]+A.offsetTop)+"px"}if(A.setWidth){B.style.width=D.offsetWidth+"px"}if(A.setHeight){B.style.height=D.offsetHeight+"px"}return B}};Object.extend(Element.Methods,{getElementsBySelector:Element.Methods.select,childElements:Element.Methods.immediateDescendants});Element._attributeTranslations={write:{names:{className:"class",htmlFor:"for"},values:{}}};if(Prototype.Browser.Opera){Element.Methods.getStyle=Element.Methods.getStyle.wrap(function(D,B,C){switch(C){case"left":case"top":case"right":case"bottom":if(D(B,"position")==="static"){return null}case"height":case"width":if(!Element.visible(B)){return null}var E=parseInt(D(B,C),10);if(E!==B["offset"+C.capitalize()]){return E+"px"}var A;if(C==="height"){A=["border-top-width","padding-top","padding-bottom","border-bottom-width"]}else{A=["border-left-width","padding-left","padding-right","border-right-width"]}return A.inject(E,function(F,G){var H=D(B,G);return H===null?F:F-parseInt(H,10)})+"px";default:return D(B,C)}});Element.Methods.readAttribute=Element.Methods.readAttribute.wrap(function(C,A,B){if(B==="title"){return A.title}return C(A,B)})}else{if(Prototype.Browser.IE){Element.Methods.getOffsetParent=Element.Methods.getOffsetParent.wrap(function(C,B){B=$(B);try{B.offsetParent}catch(E){return $(document.body)}var A=B.getStyle("position");if(A!=="static"){return C(B)}B.setStyle({position:"relative"});var D=C(B);B.setStyle({position:A});return D});$w("positionedOffset viewportOffset").each(function(A){Element.Methods[A]=Element.Methods[A].wrap(function(E,C){C=$(C);try{C.offsetParent}catch(G){return Element._returnOffset(0,0)}var B=C.getStyle("position");if(B!=="static"){return E(C)}var D=C.getOffsetParent();if(D&&D.getStyle("position")==="fixed"){D.setStyle({zoom:1})}C.setStyle({position:"relative"});var F=E(C);C.setStyle({position:B});return F})});Element.Methods.cumulativeOffset=Element.Methods.cumulativeOffset.wrap(function(B,A){try{A.offsetParent}catch(C){return Element._returnOffset(0,0)}return B(A)});Element.Methods.getStyle=function(A,B){A=$(A);B=(B=="float"||B=="cssFloat")?"styleFloat":B.camelize();var C=A.style[B];if(!C&&A.currentStyle){C=A.currentStyle[B]}if(B=="opacity"){if(C=(A.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/)){if(C[1]){return parseFloat(C[1])/100}}return 1}if(C=="auto"){if((B=="width"||B=="height")&&(A.getStyle("display")!="none")){return A["offset"+B.capitalize()]+"px"}return null}return C};Element.Methods.setOpacity=function(B,E){function F(G){return G.replace(/alpha\([^\)]*\)/gi,"")}B=$(B);var A=B.currentStyle;if((A&&!A.hasLayout)||(!A&&B.style.zoom=="normal")){B.style.zoom=1}var D=B.getStyle("filter"),C=B.style;if(E==1||E===""){(D=F(D))?C.filter=D:C.removeAttribute("filter");return B}else{if(E<0.00001){E=0}}C.filter=F(D)+"alpha(opacity="+(E*100)+")";return B};Element._attributeTranslations=(function(){var B="className";var A="for";var C=document.createElement("div");C.setAttribute(B,"x");if(C.className!=="x"){C.setAttribute("class","x");if(C.className==="x"){B="class"}}C=null;C=document.createElement("label");C.setAttribute(A,"x");if(C.htmlFor!=="x"){C.setAttribute("htmlFor","x");if(C.htmlFor==="x"){A="htmlFor"}}C=null;return{read:{names:{"class":B,className:B,"for":A,htmlFor:A},values:{_getAttr:function(D,E){return D.getAttribute(E)},_getAttr2:function(D,E){return D.getAttribute(E,2)},_getAttrNode:function(D,F){var E=D.getAttributeNode(F);return E?E.value:""},_getEv:(function(){var D=document.createElement("div");D.onclick=Prototype.emptyFunction;var F=D.getAttribute("onclick");var E;if(String(F).indexOf("{")>-1){E=function(G,H){H=G.getAttribute(H);if(!H){return null}H=H.toString();H=H.split("{")[1];H=H.split("}")[0];return H.strip()}}else{if(F===""){E=function(G,H){H=G.getAttribute(H);if(!H){return null}return H.strip()}}}D=null;return E})(),_flag:function(D,E){return $(D).hasAttribute(E)?E:null},style:function(D){return D.style.cssText.toLowerCase()},title:function(D){return D.title}}}}})();Element._attributeTranslations.write={names:Object.extend({cellpadding:"cellPadding",cellspacing:"cellSpacing"},Element._attributeTranslations.read.names),values:{checked:function(A,B){A.checked=!!B},style:function(A,B){A.style.cssText=B?B:""}}};Element._attributeTranslations.has={};$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder").each(function(A){Element._attributeTranslations.write.names[A.toLowerCase()]=A;Element._attributeTranslations.has[A.toLowerCase()]=A});(function(A){Object.extend(A,{href:A._getAttr2,src:A._getAttr2,type:A._getAttr,action:A._getAttrNode,disabled:A._flag,checked:A._flag,readonly:A._flag,multiple:A._flag,onload:A._getEv,onunload:A._getEv,onclick:A._getEv,ondblclick:A._getEv,onmousedown:A._getEv,onmouseup:A._getEv,onmouseover:A._getEv,onmousemove:A._getEv,onmouseout:A._getEv,onfocus:A._getEv,onblur:A._getEv,onkeypress:A._getEv,onkeydown:A._getEv,onkeyup:A._getEv,onsubmit:A._getEv,onreset:A._getEv,onselect:A._getEv,onchange:A._getEv})})(Element._attributeTranslations.read.values);if(Prototype.BrowserFeatures.ElementExtensions){(function(){function A(E){var B=E.getElementsByTagName("*"),D=[];for(var C=0,F;F=B[C];C++){if(F.tagName!=="!"){D.push(F)}}return D}Element.Methods.down=function(C,D,B){C=$(C);if(arguments.length==1){return C.firstDescendant()}return Object.isNumber(D)?A(C)[D]:Element.select(C,D)[B||0]}})()}}else{if(Prototype.Browser.Gecko&&/rv:1\.8\.0/.test(navigator.userAgent)){Element.Methods.setOpacity=function(A,B){A=$(A);A.style.opacity=(B==1)?0.999999:(B==="")?"":(B<0.00001)?0:B;return A}}else{if(Prototype.Browser.WebKit){Element.Methods.setOpacity=function(A,B){A=$(A);A.style.opacity=(B==1||B==="")?"":(B<0.00001)?0:B;if(B==1){if(A.tagName.toUpperCase()=="IMG"&&A.width){A.width++;A.width--}else{try{var D=document.createTextNode(" ");A.appendChild(D);A.removeChild(D)}catch(C){}}}return A};Element.Methods.cumulativeOffset=function(B){var A=0,C=0;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;if(B.offsetParent==document.body){if(Element.getStyle(B,"position")=="absolute"){break}}B=B.offsetParent}while(B);return Element._returnOffset(C,A)}}}}}if("outerHTML" in document.documentElement){Element.Methods.replace=function(C,E){C=$(C);if(E&&E.toElement){E=E.toElement()}if(Object.isElement(E)){C.parentNode.replaceChild(E,C);return C}E=Object.toHTML(E);var D=C.parentNode,B=D.tagName.toUpperCase();if(Element._insertionTranslations.tags[B]){var F=C.next();var A=Element._getContentFromAnonymousElement(B,E.stripScripts());D.removeChild(C);if(F){A.each(function(G){D.insertBefore(G,F)})}else{A.each(function(G){D.appendChild(G)})}}else{C.outerHTML=E.stripScripts()}E.evalScripts.bind(E).defer();return C}}Element._returnOffset=function(B,C){var A=[B,C];A.left=B;A.top=C;return A};Element._getContentFromAnonymousElement=function(C,B){var D=new Element("div"),A=Element._insertionTranslations.tags[C];if(A){D.innerHTML=A[0]+B+A[1];A[2].times(function(){D=D.firstChild})}else{D.innerHTML=B}return $A(D.childNodes)};Element._insertionTranslations={before:function(A,B){A.parentNode.insertBefore(B,A)},top:function(A,B){A.insertBefore(B,A.firstChild)},bottom:function(A,B){A.appendChild(B)},after:function(A,B){A.parentNode.insertBefore(B,A.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}};(function(){var A=Element._insertionTranslations.tags;Object.extend(A,{THEAD:A.TBODY,TFOOT:A.TBODY,TH:A.TD})})();Element.Methods.Simulated={hasAttribute:function(A,C){C=Element._attributeTranslations.has[C]||C;var B=$(A).getAttributeNode(C);return !!(B&&B.specified)}};Element.Methods.ByTag={};Object.extend(Element,Element.Methods);(function(A){if(!Prototype.BrowserFeatures.ElementExtensions&&A.__proto__){window.HTMLElement={};window.HTMLElement.prototype=A.__proto__;Prototype.BrowserFeatures.ElementExtensions=true}A=null})(document.createElement("div"));Element.extend=(function(){function C(G){if(typeof window.Element!="undefined"){var I=window.Element.prototype;if(I){var K="_"+(Math.random()+"").slice(2);var H=document.createElement(G);I[K]="x";var J=(H[K]!=="x");delete I[K];H=null;return J}}return false}function B(H,G){for(var J in G){var I=G[J];if(Object.isFunction(I)&&!(J in H)){H[J]=I.methodize()}}}var D=C("object");if(Prototype.BrowserFeatures.SpecificElementExtensions){if(D){return function(H){if(H&&typeof H._extendedByPrototype=="undefined"){var G=H.tagName;if(G&&(/^(?:object|applet|embed)$/i.test(G))){B(H,Element.Methods);B(H,Element.Methods.Simulated);B(H,Element.Methods.ByTag[G.toUpperCase()])}}return H}}return Prototype.K}var A={},E=Element.Methods.ByTag;var F=Object.extend(function(I){if(!I||typeof I._extendedByPrototype!="undefined"||I.nodeType!=1||I==window){return I}var G=Object.clone(A),H=I.tagName.toUpperCase();if(E[H]){Object.extend(G,E[H])}B(I,G);I._extendedByPrototype=Prototype.emptyFunction;return I},{refresh:function(){if(!Prototype.BrowserFeatures.ElementExtensions){Object.extend(A,Element.Methods);Object.extend(A,Element.Methods.Simulated)}}});F.refresh();return F})();Element.hasAttribute=function(A,B){if(A.hasAttribute){return A.hasAttribute(B)}return Element.Methods.Simulated.hasAttribute(A,B)};Element.addMethods=function(C){var J=Prototype.BrowserFeatures,D=Element.Methods.ByTag;if(!C){Object.extend(Form,Form.Methods);Object.extend(Form.Element,Form.Element.Methods);Object.extend(Element.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods)})}if(arguments.length==2){var B=C;C=arguments[1]}if(!B){Object.extend(Element.Methods,C||{})}else{if(Object.isArray(B)){B.each(H)}else{H(B)}}function H(F){F=F.toUpperCase();if(!Element.Methods.ByTag[F]){Element.Methods.ByTag[F]={}}Object.extend(Element.Methods.ByTag[F],C)}function A(M,L,F){F=F||false;for(var O in M){var N=M[O];if(!Object.isFunction(N)){continue}if(!F||!(O in L)){L[O]=N.methodize()}}}function E(N){var F;var M={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};if(M[N]){F="HTML"+M[N]+"Element"}if(window[F]){return window[F]}F="HTML"+N+"Element";if(window[F]){return window[F]}F="HTML"+N.capitalize()+"Element";if(window[F]){return window[F]}var L=document.createElement(N);var O=L.__proto__||L.constructor.prototype;L=null;return O}var I=window.HTMLElement?HTMLElement.prototype:Element.prototype;if(J.ElementExtensions){A(Element.Methods,I);A(Element.Methods.Simulated,I,true)}if(J.SpecificElementExtensions){for(var K in Element.Methods.ByTag){var G=E(K);if(Object.isUndefined(G)){continue}A(D[K],G.prototype)}}Object.extend(Element,Element.Methods);delete Element.ByTag;if(Element.extend.refresh){Element.extend.refresh()}Element.cache={}};document.viewport={getDimensions:function(){return{width:this.getWidth(),height:this.getHeight()}},getScrollOffsets:function(){return Element._returnOffset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)}};(function(C){var H=Prototype.Browser,F=document,D,E={};function A(){if(H.WebKit&&!F.evaluate){return document}if(H.Opera&&window.parseFloat(window.opera.version())<9.5){return document.body}return document.documentElement}function G(B){if(!D){D=A()}E[B]="client"+B;C["get"+B]=function(){return D[E[B]]};return C["get"+B]()}C.getWidth=G.curry("Width");C.getHeight=G.curry("Height")})(document.viewport);Element.Storage={UID:1};Element.addMethods({getStorage:function(B){if(!(B=$(B))){return }var A;if(B===window){A=0}else{if(typeof B._prototypeUID==="undefined"){B._prototypeUID=[Element.Storage.UID++]}A=B._prototypeUID[0]}if(!Element.Storage[A]){Element.Storage[A]=$H()}return Element.Storage[A]},store:function(B,A,C){if(!(B=$(B))){return }if(arguments.length===2){Element.getStorage(B).update(A)}else{Element.getStorage(B).set(A,C)}return B},retrieve:function(C,B,A){if(!(C=$(C))){return }var E=Element.getStorage(C),D=E.get(B);if(Object.isUndefined(D)){E.set(B,A);D=A}return D},clone:function(C,A){if(!(C=$(C))){return }var E=C.cloneNode(A);E._prototypeUID=void 0;if(A){var D=Element.select(E,"*"),B=D.length;while(B--){D[B]._prototypeUID=void 0}}return Element.extend(E)}});var Selector=Class.create({initialize:function(A){this.expression=A.strip();if(this.shouldUseSelectorsAPI()){this.mode="selectorsAPI"}else{if(this.shouldUseXPath()){this.mode="xpath";this.compileXPathMatcher()}else{this.mode="normal";this.compileMatcher()}}},shouldUseXPath:(function(){var A=(function(){var E=false;if(document.evaluate&&window.XPathResult){var D=document.createElement("div");D.innerHTML="<ul><li></li></ul><div><ul><li></li></ul></div>";var C=".//*[local-name()='ul' or local-name()='UL']//*[local-name()='li' or local-name()='LI']";var B=document.evaluate(C,D,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);E=(B.snapshotLength!==2);D=null}return E})();return function(){if(!Prototype.BrowserFeatures.XPath){return false}var B=this.expression;if(Prototype.Browser.WebKit&&(B.include("-of-type")||B.include(":empty"))){return false}if((/(\[[\w-]*?:|:checked)/).test(B)){return false}if(A){return false}return true}})(),shouldUseSelectorsAPI:function(){if(!Prototype.BrowserFeatures.SelectorsAPI){return false}if(Selector.CASE_INSENSITIVE_CLASS_NAMES){return false}if(!Selector._div){Selector._div=new Element("div")}try{Selector._div.querySelector(this.expression)}catch(A){return false}return true},compileMatcher:function(){var e=this.expression,ps=Selector.patterns,h=Selector.handlers,c=Selector.criteria,le,p,m,len=ps.length,name;if(Selector._cache[e]){this.matcher=Selector._cache[e];return }this.matcher=["this.matcher = function(root) {","var r = root, h = Selector.handlers, c = false, n;"];while(e&&le!=e&&(/\S/).test(e)){le=e;for(var i=0;i<len;i++){p=ps[i].re;name=ps[i].name;if(m=e.match(p)){this.matcher.push(Object.isFunction(c[name])?c[name](m):new Template(c[name]).evaluate(m));e=e.replace(m[0],"");break}}}this.matcher.push("return h.unique(n);\n}");eval(this.matcher.join("\n"));Selector._cache[this.expression]=this.matcher},compileXPathMatcher:function(){var G=this.expression,H=Selector.patterns,C=Selector.xpath,F,B,A=H.length,D;if(Selector._cache[G]){this.xpath=Selector._cache[G];return }this.matcher=[".//*"];while(G&&F!=G&&(/\S/).test(G)){F=G;for(var E=0;E<A;E++){D=H[E].name;if(B=G.match(H[E].re)){this.matcher.push(Object.isFunction(C[D])?C[D](B):new Template(C[D]).evaluate(B));G=G.replace(B[0],"");break}}}this.xpath=this.matcher.join("");Selector._cache[this.expression]=this.xpath},findElements:function(A){A=A||document;var C=this.expression,B;switch(this.mode){case"selectorsAPI":if(A!==document){var D=A.id,E=$(A).identify();E=E.replace(/([\.:])/g,"\\$1");C="#"+E+" "+C}B=$A(A.querySelectorAll(C)).map(Element.extend);A.id=D;return B;case"xpath":return document._getElementsByXPath(this.xpath,A);default:return this.matcher(A)}},match:function(I){this.tokens=[];var M=this.expression,A=Selector.patterns,E=Selector.assertions;var B,D,F,L=A.length,C;while(M&&B!==M&&(/\S/).test(M)){B=M;for(var H=0;H<L;H++){D=A[H].re;C=A[H].name;if(F=M.match(D)){if(E[C]){this.tokens.push([C,Object.clone(F)]);M=M.replace(F[0],"")}else{return this.findElements(document).include(I)}}}}var K=true,C,J;for(var H=0,G;G=this.tokens[H];H++){C=G[0],J=G[1];if(!Selector.assertions[C](I,J)){K=false;break}}return K},toString:function(){return this.expression},inspect:function(){return"#<Selector:"+this.expression.inspect()+">"}});if(Prototype.BrowserFeatures.SelectorsAPI&&document.compatMode==="BackCompat"){Selector.CASE_INSENSITIVE_CLASS_NAMES=(function(){var C=document.createElement("div"),A=document.createElement("span");C.id="prototype_test_id";A.className="Test";C.appendChild(A);var B=(C.querySelector("#prototype_test_id .test")!==null);C=A=null;return B})()}Object.extend(Selector,{_cache:{},xpath:{descendant:"//*",child:"/*",adjacent:"/following-sibling::*[1]",laterSibling:"/following-sibling::*",tagName:function(A){if(A[1]=="*"){return""}return"[local-name()='"+A[1].toLowerCase()+"' or local-name()='"+A[1].toUpperCase()+"']"},className:"[contains(concat(' ', @class, ' '), ' #{1} ')]",id:"[@id='#{1}']",attrPresence:function(A){A[1]=A[1].toLowerCase();return new Template("[@#{1}]").evaluate(A)},attr:function(A){A[1]=A[1].toLowerCase();A[3]=A[5]||A[6];return new Template(Selector.xpath.operators[A[2]]).evaluate(A)},pseudo:function(A){var B=Selector.xpath.pseudos[A[1]];if(!B){return""}if(Object.isFunction(B)){return B(A)}return new Template(Selector.xpath.pseudos[A[1]]).evaluate(A)},operators:{"=":"[@#{1}='#{3}']","!=":"[@#{1}!='#{3}']","^=":"[starts-with(@#{1}, '#{3}')]","$=":"[substring(@#{1}, (string-length(@#{1}) - string-length('#{3}') + 1))='#{3}']","*=":"[contains(@#{1}, '#{3}')]","~=":"[contains(concat(' ', @#{1}, ' '), ' #{3} ')]","|=":"[contains(concat('-', @#{1}, '-'), '-#{3}-')]"},pseudos:{"first-child":"[not(preceding-sibling::*)]","last-child":"[not(following-sibling::*)]","only-child":"[not(preceding-sibling::* or following-sibling::*)]",empty:"[count(*) = 0 and (count(text()) = 0)]",checked:"[@checked]",disabled:"[(@disabled) and (@type!='hidden')]",enabled:"[not(@disabled) and (@type!='hidden')]",not:function(E){var H=E[6],C=Selector.patterns,I=Selector.xpath,A,J,G=C.length,B;var D=[];while(H&&A!=H&&(/\S/).test(H)){A=H;for(var F=0;F<G;F++){B=C[F].name;if(E=H.match(C[F].re)){J=Object.isFunction(I[B])?I[B](E):new Template(I[B]).evaluate(E);D.push("("+J.substring(1,J.length-1)+")");H=H.replace(E[0],"");break}}}return"[not("+D.join(" and ")+")]"},"nth-child":function(A){return Selector.xpath.pseudos.nth("(count(./preceding-sibling::*) + 1) ",A)},"nth-last-child":function(A){return Selector.xpath.pseudos.nth("(count(./following-sibling::*) + 1) ",A)},"nth-of-type":function(A){return Selector.xpath.pseudos.nth("position() ",A)},"nth-last-of-type":function(A){return Selector.xpath.pseudos.nth("(last() + 1 - position()) ",A)},"first-of-type":function(A){A[6]="1";return Selector.xpath.pseudos["nth-of-type"](A)},"last-of-type":function(A){A[6]="1";return Selector.xpath.pseudos["nth-last-of-type"](A)},"only-of-type":function(A){var B=Selector.xpath.pseudos;return B["first-of-type"](A)+B["last-of-type"](A)},nth:function(E,C){var F,G=C[6],B;if(G=="even"){G="2n+0"}if(G=="odd"){G="2n+1"}if(F=G.match(/^(\d+)$/)){return"["+E+"= "+F[1]+"]"}if(F=G.match(/^(-?\d*)?n(([+-])(\d+))?/)){if(F[1]=="-"){F[1]=-1}var D=F[1]?Number(F[1]):1;var A=F[2]?Number(F[2]):0;B="[((#{fragment} - #{b}) mod #{a} = 0) and ((#{fragment} - #{b}) div #{a} >= 0)]";return new Template(B).evaluate({fragment:E,a:D,b:A})}}}},criteria:{tagName:'n = h.tagName(n, r, "#{1}", c);      c = false;',className:'n = h.className(n, r, "#{1}", c);    c = false;',id:'n = h.id(n, r, "#{1}", c);           c = false;',attrPresence:'n = h.attrPresence(n, r, "#{1}", c); c = false;',attr:function(A){A[3]=(A[5]||A[6]);return new Template('n = h.attr(n, r, "#{1}", "#{3}", "#{2}", c); c = false;').evaluate(A)},pseudo:function(A){if(A[6]){A[6]=A[6].replace(/"/g,'\\"')}return new Template('n = h.pseudo(n, "#{1}", "#{6}", r, c); c = false;').evaluate(A)},descendant:'c = "descendant";',child:'c = "child";',adjacent:'c = "adjacent";',laterSibling:'c = "laterSibling";'},patterns:[{name:"laterSibling",re:/^\s*~\s*/},{name:"child",re:/^\s*>\s*/},{name:"adjacent",re:/^\s*\+\s*/},{name:"descendant",re:/^\s/},{name:"tagName",re:/^\s*(\*|[\w\-]+)(\b|$)?/},{name:"id",re:/^#([\w\-\*]+)(\b|$)/},{name:"className",re:/^\.([\w\-\*]+)(\b|$)/},{name:"pseudo",re:/^:((first|last|nth|nth-last|only)(-child|-of-type)|empty|checked|(en|dis)abled|not)(\((.*?)\))?(\b|$|(?=\s|[:+~>]))/},{name:"attrPresence",re:/^\[((?:[\w-]+:)?[\w-]+)\]/},{name:"attr",re:/\[((?:[\w-]*:)?[\w-]+)\s*(?:([!^$*~|]?=)\s*((['"])([^\4]*?)\4|([^'"][^\]]*?)))?\]/}],assertions:{tagName:function(A,B){return B[1].toUpperCase()==A.tagName.toUpperCase()},className:function(A,B){return Element.hasClassName(A,B[1])},id:function(A,B){return A.id===B[1]},attrPresence:function(A,B){return Element.hasAttribute(A,B[1])},attr:function(B,C){var A=Element.readAttribute(B,C[1]);return A&&Selector.operators[C[2]](A,C[5]||C[6])}},handlers:{concat:function(B,A){for(var C=0,D;D=A[C];C++){B.push(D)}return B},mark:function(A){var D=Prototype.emptyFunction;for(var B=0,C;C=A[B];B++){C._countedByPrototype=D}return A},unmark:(function(){var A=(function(){var B=document.createElement("div"),E=false,D="_countedByPrototype",C="x";B[D]=C;E=(B.getAttribute(D)===C);B=null;return E})();return A?function(B){for(var C=0,D;D=B[C];C++){D.removeAttribute("_countedByPrototype")}return B}:function(B){for(var C=0,D;D=B[C];C++){D._countedByPrototype=void 0}return B}})(),index:function(A,D,G){A._countedByPrototype=Prototype.emptyFunction;if(D){for(var B=A.childNodes,E=B.length-1,C=1;E>=0;E--){var F=B[E];if(F.nodeType==1&&(!G||F._countedByPrototype)){F.nodeIndex=C++}}}else{for(var E=0,C=1,B=A.childNodes;F=B[E];E++){if(F.nodeType==1&&(!G||F._countedByPrototype)){F.nodeIndex=C++}}}},unique:function(B){if(B.length==0){return B}var D=[],E;for(var C=0,A=B.length;C<A;C++){if(typeof (E=B[C])._countedByPrototype=="undefined"){E._countedByPrototype=Prototype.emptyFunction;D.push(Element.extend(E))}}return Selector.handlers.unmark(D)},descendant:function(A){var D=Selector.handlers;for(var C=0,B=[],E;E=A[C];C++){D.concat(B,E.getElementsByTagName("*"))}return B},child:function(A){var E=Selector.handlers;for(var D=0,C=[],F;F=A[D];D++){for(var B=0,G;G=F.childNodes[B];B++){if(G.nodeType==1&&G.tagName!="!"){C.push(G)}}}return C},adjacent:function(A){for(var C=0,B=[],E;E=A[C];C++){var D=this.nextElementSibling(E);if(D){B.push(D)}}return B},laterSibling:function(A){var D=Selector.handlers;for(var C=0,B=[],E;E=A[C];C++){D.concat(B,Element.nextSiblings(E))}return B},nextElementSibling:function(A){while(A=A.nextSibling){if(A.nodeType==1){return A}}return null},previousElementSibling:function(A){while(A=A.previousSibling){if(A.nodeType==1){return A}}return null},tagName:function(A,H,C,B){var I=C.toUpperCase();var E=[],G=Selector.handlers;if(A){if(B){if(B=="descendant"){for(var F=0,D;D=A[F];F++){G.concat(E,D.getElementsByTagName(C))}return E}else{A=this[B](A)}if(C=="*"){return A}}for(var F=0,D;D=A[F];F++){if(D.tagName.toUpperCase()===I){E.push(D)}}return E}else{return H.getElementsByTagName(C)}},id:function(A,I,B,C){var H=$(B),G=Selector.handlers;if(I==document){if(!H){return[]}if(!A){return[H]}}else{if(!I.sourceIndex||I.sourceIndex<1){var A=I.getElementsByTagName("*");for(var E=0,D;D=A[E];E++){if(D.id===B){return[D]}}}}if(A){if(C){if(C=="child"){for(var F=0,D;D=A[F];F++){if(H.parentNode==D){return[H]}}}else{if(C=="descendant"){for(var F=0,D;D=A[F];F++){if(Element.descendantOf(H,D)){return[H]}}}else{if(C=="adjacent"){for(var F=0,D;D=A[F];F++){if(Selector.handlers.previousElementSibling(H)==D){return[H]}}}else{A=G[C](A)}}}}for(var F=0,D;D=A[F];F++){if(D==H){return[H]}}return[]}return(H&&Element.descendantOf(H,I))?[H]:[]},className:function(B,A,C,D){if(B&&D){B=this[D](B)}return Selector.handlers.byClassName(B,A,C)},byClassName:function(C,B,F){if(!C){C=Selector.handlers.descendant([B])}var H=" "+F+" ";for(var E=0,D=[],G,A;G=C[E];E++){A=G.className;if(A.length==0){continue}if(A==F||(" "+A+" ").include(H)){D.push(G)}}return D},attrPresence:function(C,B,A,G){if(!C){C=B.getElementsByTagName("*")}if(C&&G){C=this[G](C)}var E=[];for(var D=0,F;F=C[D];D++){if(Element.hasAttribute(F,A)){E.push(F)}}return E},attr:function(A,I,H,J,C,B){if(!A){A=I.getElementsByTagName("*")}if(A&&B){A=this[B](A)}var K=Selector.operators[C],F=[];for(var E=0,D;D=A[E];E++){var G=Element.readAttribute(D,H);if(G===null){continue}if(K(G,J)){F.push(D)}}return F},pseudo:function(B,C,E,A,D){if(B&&D){B=this[D](B)}if(!B){B=A.getElementsByTagName("*")}return Selector.pseudos[C](B,E,A)}},pseudos:{"first-child":function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(Selector.handlers.previousElementSibling(E)){continue}C.push(E)}return C},"last-child":function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(Selector.handlers.nextElementSibling(E)){continue}C.push(E)}return C},"only-child":function(B,G,A){var E=Selector.handlers;for(var D=0,C=[],F;F=B[D];D++){if(!E.previousElementSibling(F)&&!E.nextElementSibling(F)){C.push(F)}}return C},"nth-child":function(B,C,A){return Selector.pseudos.nth(B,C,A)},"nth-last-child":function(B,C,A){return Selector.pseudos.nth(B,C,A,true)},"nth-of-type":function(B,C,A){return Selector.pseudos.nth(B,C,A,false,true)},"nth-last-of-type":function(B,C,A){return Selector.pseudos.nth(B,C,A,true,true)},"first-of-type":function(B,C,A){return Selector.pseudos.nth(B,"1",A,false,true)},"last-of-type":function(B,C,A){return Selector.pseudos.nth(B,"1",A,true,true)},"only-of-type":function(B,D,A){var C=Selector.pseudos;return C["last-of-type"](C["first-of-type"](B,D,A),D,A)},getIndices:function(B,A,C){if(B==0){return A>0?[A]:[]}return $R(1,C).inject([],function(D,E){if(0==(E-A)%B&&(E-A)/B>=0){D.push(E)}return D})},nth:function(A,L,N,K,C){if(A.length==0){return[]}if(L=="even"){L="2n+0"}if(L=="odd"){L="2n+1"}var J=Selector.handlers,I=[],B=[],E;J.mark(A);for(var H=0,D;D=A[H];H++){if(!D.parentNode._countedByPrototype){J.index(D.parentNode,K,C);B.push(D.parentNode)}}if(L.match(/^\d+$/)){L=Number(L);for(var H=0,D;D=A[H];H++){if(D.nodeIndex==L){I.push(D)}}}else{if(E=L.match(/^(-?\d*)?n(([+-])(\d+))?/)){if(E[1]=="-"){E[1]=-1}var O=E[1]?Number(E[1]):1;var M=E[2]?Number(E[2]):0;var P=Selector.pseudos.getIndices(O,M,A.length);for(var H=0,D,F=P.length;D=A[H];H++){for(var G=0;G<F;G++){if(D.nodeIndex==P[G]){I.push(D)}}}}}J.unmark(A);J.unmark(B);return I},empty:function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(E.tagName=="!"||E.firstChild){continue}C.push(E)}return C},not:function(A,D,I){var G=Selector.handlers,J,C;var H=new Selector(D).findElements(I);G.mark(H);for(var F=0,E=[],B;B=A[F];F++){if(!B._countedByPrototype){E.push(B)}}G.unmark(H);return E},enabled:function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(!E.disabled&&(!E.type||E.type!=="hidden")){C.push(E)}}return C},disabled:function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(E.disabled){C.push(E)}}return C},checked:function(B,F,A){for(var D=0,C=[],E;E=B[D];D++){if(E.checked){C.push(E)}}return C}},operators:{"=":function(B,A){return B==A},"!=":function(B,A){return B!=A},"^=":function(B,A){return B==A||B&&B.startsWith(A)},"$=":function(B,A){return B==A||B&&B.endsWith(A)},"*=":function(B,A){return B==A||B&&B.include(A)},"~=":function(B,A){return(" "+B+" ").include(" "+A+" ")},"|=":function(B,A){return("-"+(B||"").toUpperCase()+"-").include("-"+(A||"").toUpperCase()+"-")}},split:function(B){var A=[];B.scan(/(([\w#:.~>+()\s-]+|\*|\[.*?\])+)\s*(,|$)/,function(C){A.push(C[1].strip())});return A},matchElements:function(F,G){var E=$$(G),D=Selector.handlers;D.mark(E);for(var C=0,B=[],A;A=F[C];C++){if(A._countedByPrototype){B.push(A)}}D.unmark(E);return B},findElement:function(B,C,A){if(Object.isNumber(C)){A=C;C=false}return Selector.matchElements(B,C||"*")[A||0]},findChildElements:function(E,G){G=Selector.split(G.join(","));var D=[],F=Selector.handlers;for(var C=0,B=G.length,A;C<B;C++){A=new Selector(G[C].strip());F.concat(D,A.findElements(E))}return(B>1)?F.unique(D):D}});if(Prototype.Browser.IE){Object.extend(Selector.handlers,{concat:function(B,A){for(var C=0,D;D=A[C];C++){if(D.tagName!=="!"){B.push(D)}}return B}})}function $$(){return Selector.findChildElements(document,$A(arguments))}var Form={reset:function(A){A=$(A);A.reset();return A},serializeElements:function(G,B){if(typeof B!="object"){B={hash:!!B}}else{if(Object.isUndefined(B.hash)){B.hash=true}}var C,F,A=false,E=B.submit;var D=G.inject({},function(H,I){if(!I.disabled&&I.name){C=I.name;F=$(I).getValue();if(F!=null&&I.type!="file"&&(I.type!="submit"||(!A&&E!==false&&(!E||C==E)&&(A=true)))){if(C in H){if(!Object.isArray(H[C])){H[C]=[H[C]]}H[C].push(F)}else{H[C]=F}}}return H});return B.hash?D:Object.toQueryString(D)}};Form.Methods={serialize:function(B,A){return Form.serializeElements(Form.getElements(B),A)},getElements:function(E){var F=$(E).getElementsByTagName("*"),D,A=[],C=Form.Element.Serializers;for(var B=0;D=F[B];B++){A.push(D)}return A.inject([],function(G,H){if(C[H.tagName.toLowerCase()]){G.push(Element.extend(H))}return G})},getInputs:function(G,C,D){G=$(G);var A=G.getElementsByTagName("input");if(!C&&!D){return $A(A).map(Element.extend)}for(var E=0,H=[],F=A.length;E<F;E++){var B=A[E];if((C&&B.type!=C)||(D&&B.name!=D)){continue}H.push(Element.extend(B))}return H},disable:function(A){A=$(A);Form.getElements(A).invoke("disable");return A},enable:function(A){A=$(A);Form.getElements(A).invoke("enable");return A},findFirstElement:function(B){var C=$(B).getElements().findAll(function(D){return"hidden"!=D.type&&!D.disabled});var A=C.findAll(function(D){return D.hasAttribute("tabIndex")&&D.tabIndex>=0}).sortBy(function(D){return D.tabIndex}).first();return A?A:C.find(function(D){return/^(?:input|select|textarea)$/i.test(D.tagName)})},focusFirstElement:function(A){A=$(A);A.findFirstElement().activate();return A},request:function(B,A){B=$(B),A=Object.clone(A||{});var D=A.parameters,C=B.readAttribute("action")||"";if(C.blank()){C=window.location.href}A.parameters=B.serialize(true);if(D){if(Object.isString(D)){D=D.toQueryParams()}Object.extend(A.parameters,D)}if(B.hasAttribute("method")&&!A.method){A.method=B.method}return new Ajax.Request(C,A)}};Form.Element={focus:function(A){$(A).focus();return A},select:function(A){$(A).select();return A}};Form.Element.Methods={serialize:function(A){A=$(A);if(!A.disabled&&A.name){var B=A.getValue();if(B!=undefined){var C={};C[A.name]=B;return Object.toQueryString(C)}}return""},getValue:function(A){A=$(A);var B=A.tagName.toLowerCase();return Form.Element.Serializers[B](A)},setValue:function(A,B){A=$(A);var C=A.tagName.toLowerCase();Form.Element.Serializers[C](A,B);return A},clear:function(A){$(A).value="";return A},present:function(A){return $(A).value!=""},activate:function(A){A=$(A);try{A.focus();if(A.select&&(A.tagName.toLowerCase()!="input"||!(/^(?:button|reset|submit)$/i.test(A.type)))){A.select()}}catch(B){}return A},disable:function(A){A=$(A);A.disabled=true;return A},enable:function(A){A=$(A);A.disabled=false;return A}};var Field=Form.Element;var $F=Form.Element.Methods.getValue;Form.Element.Serializers={input:function(A,B){switch(A.type.toLowerCase()){case"checkbox":case"radio":return Form.Element.Serializers.inputSelector(A,B);default:return Form.Element.Serializers.textarea(A,B)}},inputSelector:function(A,B){if(Object.isUndefined(B)){return A.checked?A.value:null}else{A.checked=!!B}},textarea:function(A,B){if(Object.isUndefined(B)){return A.value}else{A.value=B}},select:function(C,F){if(Object.isUndefined(F)){return this[C.type=="select-one"?"selectOne":"selectMany"](C)}else{var B,D,G=!Object.isArray(F);for(var A=0,E=C.length;A<E;A++){B=C.options[A];D=this.optionValue(B);if(G){if(D==F){B.selected=true;return }}else{B.selected=F.include(D)}}}},selectOne:function(B){var A=B.selectedIndex;return A>=0?this.optionValue(B.options[A]):null},selectMany:function(D){var A,E=D.length;if(!E){return null}for(var C=0,A=[];C<E;C++){var B=D.options[C];if(B.selected){A.push(this.optionValue(B))}}return A},optionValue:function(A){return Element.extend(A).hasAttribute("value")?A.value:A.text}};Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,A,B,C){$super(C,B);this.element=$(A);this.lastValue=this.getValue()},execute:function(){var A=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(A)?this.lastValue!=A:String(this.lastValue)!=String(A)){this.callback(this.element,A);this.lastValue=A}}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});Abstract.EventObserver=Class.create({initialize:function(A,B){this.element=$(A);this.callback=B;this.lastValue=this.getValue();if(this.element.tagName.toLowerCase()=="form"){this.registerFormCallbacks()}else{this.registerCallback(this.element)}},onElementEvent:function(){var A=this.getValue();if(this.lastValue!=A){this.callback(this.element,A);this.lastValue=A}},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(A){if(A.type){switch(A.type.toLowerCase()){case"checkbox":case"radio":Event.observe(A,"click",this.onElementEvent.bind(this));break;default:Event.observe(A,"change",this.onElementEvent.bind(this));break}}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});(function(){var V={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,cache:{}};var E=document.documentElement;var W="onmouseenter" in E&&"onmouseleave" in E;var O;if(Prototype.Browser.IE){var H={0:1,1:4,2:2};O=function(Y,X){return Y.button===H[X]}}else{if(Prototype.Browser.WebKit){O=function(Y,X){switch(X){case 0:return Y.which==1&&!Y.metaKey;case 1:return Y.which==1&&Y.metaKey;default:return false}}}else{O=function(Y,X){return Y.which?(Y.which===X+1):(Y.button===X)}}}function R(X){return O(X,0)}function Q(X){return O(X,1)}function K(X){return O(X,2)}function C(Z){Z=V.extend(Z);var Y=Z.target,X=Z.type,a=Z.currentTarget;if(a&&a.tagName){if(X==="load"||X==="error"||(X==="click"&&a.tagName.toLowerCase()==="input"&&a.type==="radio")){Y=a}}if(Y.nodeType==Node.TEXT_NODE){Y=Y.parentNode}return Element.extend(Y)}function M(Y,a){var X=V.element(Y);if(!a){return X}var Z=[X].concat(X.ancestors());return Selector.findElement(Z,a,0)}function P(X){return{x:B(X),y:A(X)}}function B(Z){var Y=document.documentElement,X=document.body||{scrollLeft:0};return Z.pageX||(Z.clientX+(Y.scrollLeft||X.scrollLeft)-(Y.clientLeft||0))}function A(Z){var Y=document.documentElement,X=document.body||{scrollTop:0};return Z.pageY||(Z.clientY+(Y.scrollTop||X.scrollTop)-(Y.clientTop||0))}function N(X){V.extend(X);X.preventDefault();X.stopPropagation();X.stopped=true}V.Methods={isLeftClick:R,isMiddleClick:Q,isRightClick:K,element:C,findElement:M,pointer:P,pointerX:B,pointerY:A,stop:N};var T=Object.keys(V.Methods).inject({},function(X,Y){X[Y]=V.Methods[Y].methodize();return X});if(Prototype.Browser.IE){function G(Y){var X;switch(Y.type){case"mouseover":X=Y.fromElement;break;case"mouseout":X=Y.toElement;break;default:return null}return Element.extend(X)}Object.extend(T,{stopPropagation:function(){this.cancelBubble=true},preventDefault:function(){this.returnValue=false},inspect:function(){return"[object Event]"}});V.extend=function(Y,X){if(!Y){return false}if(Y._extendedByPrototype){return Y}Y._extendedByPrototype=Prototype.emptyFunction;var Z=V.pointer(Y);Object.extend(Y,{target:Y.srcElement||X,relatedTarget:G(Y),pageX:Z.x,pageY:Z.y});return Object.extend(Y,T)}}else{V.prototype=window.Event.prototype||document.createEvent("HTMLEvents").__proto__;Object.extend(V.prototype,T);V.extend=Prototype.K}function L(b,a,c){var Z=Element.retrieve(b,"prototype_event_registry");if(Object.isUndefined(Z)){D.push(b);Z=Element.retrieve(b,"prototype_event_registry",$H())}var X=Z.get(a);if(Object.isUndefined(X)){X=[];Z.set(a,X)}if(X.pluck("handler").include(c)){return false}var Y;if(a.include(":")){Y=function(d){if(Object.isUndefined(d.eventName)){return false}if(d.eventName!==a){return false}V.extend(d,b);c.call(b,d)}}else{if(!W&&(a==="mouseenter"||a==="mouseleave")){if(a==="mouseenter"||a==="mouseleave"){Y=function(f){V.extend(f,b);var d=f.relatedTarget;while(d&&d!==b){try{d=d.parentNode}catch(g){d=b}}if(d===b){return }c.call(b,f)}}}else{Y=function(d){V.extend(d,b);c.call(b,d)}}}Y.handler=c;X.push(Y);return Y}function F(){for(var X=0,Y=D.length;X<Y;X++){V.stopObserving(D[X]);D[X]=null}}var D=[];if(Prototype.Browser.IE){window.attachEvent("onunload",F)}if(Prototype.Browser.WebKit){window.addEventListener("unload",Prototype.emptyFunction,false)}var J=Prototype.K;if(!W){J=function(Y){var X={mouseenter:"mouseover",mouseleave:"mouseout"};return Y in X?X[Y]:Y}}function S(a,Z,b){a=$(a);var Y=L(a,Z,b);if(!Y){return a}if(Z.include(":")){if(a.addEventListener){a.addEventListener("dataavailable",Y,false)}else{a.attachEvent("ondataavailable",Y);a.attachEvent("onfilterchange",Y)}}else{var X=J(Z);if(a.addEventListener){a.addEventListener(X,Y,false)}else{a.attachEvent("on"+X,Y)}}return a}function I(c,a,d){c=$(c);var Z=Element.retrieve(c,"prototype_event_registry");if(Object.isUndefined(Z)){return c}if(a&&!d){var b=Z.get(a);if(Object.isUndefined(b)){return c}b.each(function(e){Element.stopObserving(c,a,e.handler)});return c}else{if(!a){Z.each(function(g){var e=g.key,f=g.value;f.each(function(h){Element.stopObserving(c,e,h.handler)})});return c}}var b=Z.get(a);if(!b){return }var Y=b.find(function(e){return e.handler===d});if(!Y){return c}var X=J(a);if(a.include(":")){if(c.removeEventListener){c.removeEventListener("dataavailable",Y,false)}else{c.detachEvent("ondataavailable",Y);c.detachEvent("onfilterchange",Y)}}else{if(c.removeEventListener){c.removeEventListener(X,Y,false)}else{c.detachEvent("on"+X,Y)}}Z.set(a,b.without(Y));return c}function U(a,Z,Y,X){a=$(a);if(Object.isUndefined(X)){X=true}if(a==document&&document.createEvent&&!a.dispatchEvent){a=document.documentElement}var b;if(document.createEvent){b=document.createEvent("HTMLEvents");b.initEvent("dataavailable",true,true)}else{b=document.createEventObject();b.eventType=X?"ondataavailable":"onfilterchange"}b.eventName=Z;b.memo=Y||{};if(document.createEvent){a.dispatchEvent(b)}else{a.fireEvent(b.eventType,b)}return V.extend(b)}Object.extend(V,V.Methods);Object.extend(V,{fire:U,observe:S,stopObserving:I});Element.addMethods({fire:U,observe:S,stopObserving:I});Object.extend(document,{fire:U.methodize(),observe:S.methodize(),stopObserving:I.methodize(),loaded:false});if(window.Event){Object.extend(window.Event,V)}else{window.Event=V}})();(function(){var D;function A(){if(document.loaded){return }if(D){window.clearTimeout(D)}document.loaded=true;document.fire("dom:loaded")}function C(){if(document.readyState==="complete"){document.stopObserving("readystatechange",C);A()}}function B(){try{document.documentElement.doScroll("left")}catch(E){D=B.defer();return }A()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",A,false)}else{document.observe("readystatechange",C);if(window==top){D=B.defer()}}Event.observe(window,"load",A)})();Element.addMethods();Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;var Insertion={Before:function(A,B){return Element.insert(A,{before:B})},Top:function(A,B){return Element.insert(A,{top:B})},Bottom:function(A,B){return Element.insert(A,{bottom:B})},After:function(A,B){return Element.insert(A,{after:B})}};var $continue=new Error('"throw $continue" is deprecated, use "return" instead');var Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},within:function(B,A,C){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(B,A,C)}this.xcomp=A;this.ycomp=C;this.offset=Element.cumulativeOffset(B);return(C>=this.offset[1]&&C<this.offset[1]+B.offsetHeight&&A>=this.offset[0]&&A<this.offset[0]+B.offsetWidth)},withinIncludingScrolloffsets:function(B,A,D){var C=Element.cumulativeScrollOffset(B);this.xcomp=A+C[0]-this.deltaX;this.ycomp=D+C[1]-this.deltaY;this.offset=Element.cumulativeOffset(B);return(this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+B.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+B.offsetWidth)},overlap:function(B,A){if(!B){return 0}if(B=="vertical"){return((this.offset[1]+A.offsetHeight)-this.ycomp)/A.offsetHeight}if(B=="horizontal"){return((this.offset[0]+A.offsetWidth)-this.xcomp)/A.offsetWidth}},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(A){Position.prepare();return Element.absolutize(A)},relativize:function(A){Position.prepare();return Element.relativize(A)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(B,C,A){A=A||{};return Element.clonePosition(C,B,A)}};if(!document.getElementsByClassName){document.getElementsByClassName=function(B){function A(C){return C.blank()?null:"[contains(concat(' ', @class, ' '), ' "+C+" ')]"}B.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(C,E){E=E.toString().strip();var D=/\s/.test(E)?$w(E).map(A).join(""):A(E);return D?document._getElementsByXPath(".//*"+D,C):[]}:function(E,F){F=F.toString().strip();var G=[],H=(/\s/.test(F)?$w(F):null);if(!H&&!F){return G}var C=$(E).getElementsByTagName("*");F=" "+F+" ";for(var D=0,J,I;J=C[D];D++){if(J.className&&(I=" "+J.className+" ")&&(I.include(F)||(H&&H.all(function(K){return !K.toString().blank()&&I.include(" "+K+" ")})))){G.push(Element.extend(J))}}return G};return function(D,C){return $(C||document.body).getElementsByClassName(D)}}(Element.Methods)}Element.ClassNames=Class.create();Element.ClassNames.prototype={initialize:function(A){this.element=$(A)},_each:function(A){this.element.className.split(/\s+/).select(function(B){return B.length>0})._each(A)},set:function(A){this.element.className=A},add:function(A){if(this.include(A)){return }this.set($A(this).concat(A).join(" "))},remove:function(A){if(!this.include(A)){return }this.set($A(this).without(A).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);if(typeof globalEval=="undefined"){globalEval=function(C){if(C){var B=document.getElementsByTagName("head")[0]||document.documentElement,A=document.createElement("script");A.type="text/javascript";if(window.attachEvent&&!window.opera){A.text=C}else{A.appendChild(document.createTextNode(C))}B.appendChild(A);B.removeChild(A)}}}(function(){var A=/^\s*(https?:)\/\/([^\/:]*)(:[\d]+|\/|$)/;Object.extend(Prototype.Browser,{Mac:navigator.userAgent.indexOf("Macintosh")!=-1});if(Prototype.Browser.IE){Prototype.Browser.IE={v:parseInt(navigator.userAgent.match(/\bMSIE (\d+)/)[1],10)}}Ajax.Updater.prototype.updateContent=Ajax.Updater.prototype.updateContent.wrap(function(C,D){var B=this.options;if(B.externalScripts===false){D=D.stripExternalScripts()}C(D)});Object.extend(Prototype,{ExternalScriptFragment:"<script [^>]*[\\s]src[\\s]*=[\\s]*[\"']([^\"']*)[^>]*>[\\S\\s]*?<\\/script>",StyleFragment:"<style[^>]*>([\\S\\s]*?)</style>"});Object.extend(Element,{_STATE_REGEX:/^(:?loaded|complete)$/,createScript:function(F,B){var D=B||{},E;if(!D.allowDuplicates){var E=$A(document.getElementsByTagName("script")).any(function(G){return F===G.getAttribute("src")})}if(E&&D.onComplete){D.onComplete()}if(!E||D.allowDuplicates){var C=document.createElement("script");C.type="text/javascript";C.src=F;C.async=true;if(D.onComplete){if(Prototype.Browser.IE){C.onreadystatechange=function(){(C.readyState||"").match(Element._STATE_REGEX)&&D.onComplete()}}else{C.onload=D.onComplete}}document.getElementsByTagName("head")[0].appendChild(C)}}});Object.extend(Object,{equals:function(I,H){var G=function(J){return typeof J=="object"?(Object.isArray(J)?"array":"object"):J},C=function(K,J){return G(K)===G(J)},E=true,F=G(I),D=G(H),B=function(J){if(!C(I[J],H[J])){E=false;throw $break}};if(I!==H){if(F!=D){E=false}else{if(F=="array"){if(I.length==H.length){$R(0,I.length,1).each(B)}else{E=false}}else{[I,H].each(function(K){for(var J in K){B(J)}})}}}return E}});Object.extend(String.prototype,{extractScripts:function(){var D=new RegExp(Prototype.ScriptFragment,"img"),C=new RegExp(Prototype.ScriptFragment,"im"),B=new RegExp(Prototype.ExternalScriptFragment,"im");return(this.match(D)||[]).map(function(G){var E=G.match(C);var F=false;if(E&&E.length>1){var H=E[0].match(B);F=H?'Element.createScript("'+H[1]+'")':E[1]}return F})},extractStyles:function(){var C=new RegExp(Prototype.StyleFragment,"img"),B=new RegExp(Prototype.StyleFragment,"im");return(this.match(C)||[]).map(function(D){return(D.match(B)||["",""])[1]})},stripStyles:function(){return this.replace(new RegExp(Prototype.StyleFragment,"img"),"")},evalScripts:function(){return this.extractScripts().map(function(B){return globalEval(B)})},stripExternalScripts:function(){return this.replace(new RegExp(Prototype.ExternalScriptFragment,"img"),"")}});Object.extend(Ajax.Request.prototype,{isSameOrigin:function(){var B=this.url.match(A);return !B||(B[1]==location.protocol&&B[2].match(/[^\.]+\.[^\.]+$/)[0]==document.domain.match(/[^\.]+\.[^\.]+$/)[0]&&B[3].match(/^:[\d]+/)?B[3]:""==(location.port?":"+location.port:""))}});if(Prototype.Browser.Gecko){Ajax.Response.prototype.initialize=Ajax.Response.prototype.initialize.wrap(function(C,B){C(B);var F=this.transport;if(F.responseXML){try{var E=F.responseXML.firstChild}catch(D){this.responseXML=(new DOMParser()).parseFromString(F.responseText,"text/xml")}}})}Ajax.enableCrossDomain=function(D){var C=document,B='<iframe src="'+D+'" style="display:none"></iframe>';Event.loadingXdFrame=1;C.domain=window.location.hostname.match(/([^\.]+\.[^\.]+|[^\.]+\.co\.uk)$/)[0];Ajax.xd_getTransport=null;Ajax.xd_frameLoaded=function(){var E=Event.loadingXdFrame;Event.loadingXdFrame=0;if(E==2){C.loaded=true;C.fire("dom:loaded")}};Ajax.Request.prototype.request=Ajax.Request.prototype.request.wrap(function(G,F){var E=F.match(A);if(E&&window.location.hostname!=E[2]){this.transport=Ajax.xd_getTransport();this.xd_request(F)}else{G(F)}});C.write(B)};if(window.Global&&!Global.disable_xd_ajax&&Global.SERVER_NAME.indexOf("://"+document.domain)==-1){Ajax.enableCrossDomain((location.protocol=="https:"?Global.SERVER_NAME.replace("http:","https:"):Global.SERVER_NAME)+"/js/"+Global.JS_VERSION+"/crossdomain.html")}})();var Sniffer=(function(A){return{is_ie:A.IE,is_ie_5_5_up:A.IE&&A.IE.v>=5,is_ie_7:A.IE&&A.IE.v==7,is_ie_7_up:A.IE&&A.IE.v>=7,is_safari:A.WebKit,is_mozilla:A.Gecko}})(Prototype.Browser);(function(){Ajax.Responders.register({onCreate:function(C,E){var B=C.options,D=window.location.protocol;if(window.Global&&Global.AUTH){C.url+=(C.url.indexOf("?")==-1?"?":"&")+"AUTH="+Global.AUTH}if(C.url.indexOf("http")!=0&&C.url.indexOf("/")==0){C.url=D+"//"+location.hostname+C.url}if(C.url.indexOf(D)!=0){C.url=C.url.replace(/^https?:/,D)}if(typeof B.onTimeout=="function"){C.timeoutId=setTimeout(function(){if(C.transport.readyState<=3){C.timeoutId=0;C.timedout=true;C.options.onTimeout(C.transport,C.json);C.transport.abort()}},B.timeout||5000)}},onComplete:function(B){if(B.timeoutId){clearTimeout(B.timeoutId);B.timeoutId=0}}});var A={show:function(B){B=$(B);B.style.display="";Element.valign(B);return B},update:function(C,D){C=$(C);var B=C.hasClassName("lb_content");if(D&&D.toElement){D=D.toElement()}if(Object.isElement(D)){return C.update().insert(D)}D=Object.toHTML(D);try{C.innerHTML=D.stripScripts()}catch(E){}if(B&&typeof LightBox!=="undefined"){LightBox.onUpdate(true)}(function(F){this.evalScripts();if(F&&typeof LightBox!=="undefined"){LightBox.onPostUpdate()}Event.postProcessPage(C)}).bind(D).defer(B);return C},valign:function(B){try{B=$(B||document.body);var C=B.select(".valign_middle");if(B.hasClassName("valign_middle")){C.push(B)}C.each(function(E){E.setStyle({top:((E.parentNode.clientHeight-E.offsetHeight)/2)+"px",position:"relative"})});return B}catch(D){}},create:function(C,D){if(Object.isElement(C)){return Element.extend(C)}if(Object.isString(C)){var E=new Element("div");E.innerHTML=C;var B=D?E:E.firstDescendant();if(B&&B.parentNode){B.remove()}return B}},hover:function(C,B){var D=new (function(S){var F=Object.extend({delayIn:0,delayOut:0,sensitivity:3,interval:100,onOver:Prototype.emptyFunction,onOut:Prototype.emptyFunction,extendTo:null},S),P=this,E=["",""],K=false,H=0,L=false,J,I,O=function(){H=0;if(!K){if(L&&N()){K=true;F.onOver.apply(C,[E[0]])}else{R();H=setTimeout(O,F.interval)}}},M=function(T){E[1]=Event.pointer(T)},R=function(){if(E[1]){E.shift();E.push("")}},N=function(){var U=true,V=E,T=F.sensitivity;if(V[0]&&V[1]&&Math.abs(E[0].x-E[1].x)>T&&Math.abs(E[0].y-E[1].y)>T){U=false;J=0}else{if(F.delayIn){now=(new Date()).getTime();if(!J){J=now}if(now-J<F.delayIn){U=false}}}R();return U},Q=function(){if(H){clearTimeout(H);H=0}K=false;J=0},G=function(){if(!H){H=setTimeout(O,F.interval)}};P.mouseover=function(T){L=true;if(!K){M(T);R();Q();G()}};P.mouseout=function(T){L=false;if(I){clearTimeout(I)}I=setTimeout(function(){I=0;if(!L){if(K){F.onOut.apply(C,[Event.pointer(T)])}Q();E=["",""]}},F.delayOut||1)};P.mousemove=function(T){if(!K){M(T)}};P.options=F})(B);$w("mouseover mouseout mousemove").each(function(F){var E=[],G=D.options.extendTo;if(Object.isArray(G)){E=G}else{if(Object.isElement($(G))){E.push(G)}}E.push(C);E.invoke("observe",F,D[F].bindAsEventListener(D))});return C}};Object.extend(Element.Methods,A);Object.extend(Element,A);Object.extend(Event,{onReady:function(B){document.observe("dom:loaded",B)},postProcessPage:function(F){if(Prototype.Browser.IE&&Prototype.Browser.IE.v<7){var B=F?F.getElementsByTagName("input"):document.getElementsByTagName("input");for(var C=0;C<B.length;C++){var E;var D;E=B[C];Element.addClassName(E,E.type?E.type:"text")}}if(typeof DropShadow!=="undefined"){DropShadow.load(F)}if(typeof Overlay!=="undefined"){Overlay.load(F)}Element.valign(F)},simulateClick:function(D){if(D.fireEvent){D.fireEvent("onclick")}else{var C=document.createEvent("MouseEvents");C.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);var B=!D.dispatchEvent(C)}},observe:Event.observe.wrap(function(E,C,B,D){if(B=="dom:loaded"&&document.loaded){C.stopObserving(B);E(C,B,D);C.fire("dom:loaded")}else{E(C,B,D)}}),fire:Event.fire.wrap(function(F,E,D,C,B){if(D=="dom:loaded"&&Event.loadingXdFrame){Event.loadingXdFrame=2;document.loaded=false}else{F(E,D,C,B)}})});Element.addMethods({observe:Event.observe,fire:Event.fire,followHref:function(C,D){if(D||(Prototype.Browser.IE&&Prototype.Browser.IE.v==6&&window.event&&window.event.srcElement.nodeName=="IMG")){var B=C.readAttribute("href");if(B){setTimeout(function(){window.location=B},10);return false}}}});Object.extend(document,{observe:Element.Methods.observe.methodize(),fire:Element.Methods.fire.methodize()});Object.extend(document.viewport,{getDocumentDimensions:function(){var B=document.body,C=document.documentElement;return{width:Math.max(B.scrollWidth,C.scrollWidth,B.offsetWidth,C.offsetWidth,B.clientWidth,C.clientWidth),height:Math.max(B.scrollHeight,C.scrollHeight,B.offsetHeight,C.offsetHeight,B.clientHeight,C.clientHeight)}}});document.getQuery=function(){var D=window.location.search,B={};if(D){D=D.substring(1);var C=D.split("&"),E;while(C.length){E=C.pop().split("=");B[E[0]]=E[1]}}return B};document.observe("dom:loaded",function(){Event.postProcessPage()})})();function setCookie(B,D,A,F,C,E){document.cookie=B+"="+encodeURIComponent(D)+(A?"; expires="+A.toGMTString():"")+(F?"; path="+F:"")+(C?"; domain="+C:"")+(E?"; secure":"")}function getCookie(C){if(!document.cookie){return C?null:{}}function E(J){var I="[ ] ^ $ . | ? * + ( ) \\".split(" "),H=I.length;while(H--){J=J.replace(new RegExp("\\"+I[H],"g"),"\\"+I[H])}return J}var G;if(C){G=document.cookie.match(new RegExp("(?:^|[\\s;])"+E(C)+"=([^;]*)"));return G?decodeURIComponent(G[1]):null}var F=document.cookie.split(";"),D={},B=/([^\s=]+)=([^\s]*)/,A=F.length;while(A--){G=(F[A]||"").match(B);if(G&&G[1]){D[G[1]]=decodeURIComponent(G[2]||"")}}return D}function deleteCookie(A,C,B){if(getCookie(A)){setCookie(A,"",new Date(1000),C,B)}};(function(){if(typeof Global=="undefined"){Global={}}var A=Global;A.currentPage=null;A.fb_mode=null;A.AUTH=null;A.Message={showMessage:function(F,E,D){var B=this.msgList[F];if(E){for(var C in E){B=B.replace("%%"+C.toUpperCase()+"%%",E[C])}}if(D===true){return confirm(B)}else{alert(B)}},showConfirm:function(C,B){return this.showMessage(C,B,true)},msgList:{}}})();function documentReadyCheck(){if(!document.loaded){alert("Please wait a second, the page is still loading.");return false}return true}var FLASHDEBUG={Log:function(){}};function updateProfilePhoto(A,C){var B=(C)?$(C):$("profile_image");B.src=A}function CloneObject(B,A){for(i in B){if(typeof B[i]=="object"&&A){this[i]=new cloneObject(B[i],true)}else{this[i]=B[i]}}}function resizeCols(A,E,C){var A=$(A);if(!A){return }var D=A.down("."+E),F=A.down("."+C);function B(){var G=D.offsetHeight;var H=$("right_rail_wrapper").offsetHeight+20;if(G>F.offsetHeight){F.style.height=G+"px"}else{if(H>G){F.style.height=H+"px"}}}if(D&&F){B();setTimeout(B,2000)}}function showDiv(B,A){if($(B)){$(B).style.display=""}if(A&&$(A)){$(A).style.display=""}}function hideDiv(B,A){if($(B)){$(B).style.display="none"}if(A&&$(A)){$(A).style.display="none"}}function toggleDiv(B,A){if($(B)){if($(B).style.display==""){hideDiv(B)}else{showDiv(B)}}if(A&&$(A)){if($(A).style.display==""){hideDiv(A)}else{showDiv(A)}}}function thisMovie(B){var A=navigator.appName.indexOf("Microsoft")!=-1;return(A)?window[B]:document[B]}function popSlide(A){var B={directories:"no",location:"no",menubar:"no",resizable:"no",scrollbars:"no",status:"no",toolbar:"no",height:700,width:900};popURL(A,B,900,700)}function popURL(B,E,C,I,G){if(typeof E!="string"){var A,H=[],D,F;A={directories:"no",location:"no",menubar:"no",resizable:"no",scrollbars:"no",status:"no",toolbar:"no"};for(D in (E||{})){if(E[D]){A[D]=E[D]}}for(D in A){H.push(D+"="+(A[D]===true?"yes":A[D]))}F=window.open(B,"name",H.join(","));F.focus()}else{F=popURL(B,{windowname:E,width:C,height:I,scrollbars:G,resizable:"yes"})}return F}function remove_autocomplete(){if(document.getElementsByTagName){var B=document.getElementsByTagName("input");for(var A=0;B[A];A++){B[A].setAttribute("autocomplete","off")}}}function changeOpacity(B,A){A=(A>=100)?99.999:A;A=(A<0)?0:A;B.style.opacity=(A/100);B.style.MozOpacity=(A/100);B.style.KhtmlOpacity=(A/100);B.style.filter="alpha(opacity="+A+")"}var Stretch={itemArray:new Array(),initialized:false,MODE:{x:0,y:1,xy:2},add:function(C,A){var B=$(C);if(B){B.stretchOptions=A;Stretch.setDimensions(B);Stretch.itemArray.push(B)}if(!Stretch.initialized){Event.observe(window,"resize",function(){Stretch.adjust();setTimeout(Stretch.adjust,10);if(LightBox.currentBox){setTimeout(LightBox.resize,50)}});Stretch.adjust();Stretch.initialized=true}},adjust:function(){for(var A=0;A<Stretch.itemArray.length;A++){Stretch.setDimensions(Stretch.itemArray[A])}},getHeight:function(){var A=document.getElementsByTagName("body")[0];var B;if(Sniffer.is_safari){B=self.innerHeight}else{B=A.clientHeight}return B},getWidth:function(){var A=document.getElementsByTagName("body")[0];var B;if(Sniffer.is_safari){B=self.innerWidth}else{B=A.clientWidth}return B},setDimensions:function(H){var G=H.stretchOptions;if(G.mode==Stretch.MODE.y||G.mode==Stretch.MODE.xy){var E=(G.correctY==null)?0:G.correctY;var B=Stretch.getHeight()+E;var C=G.minY?G.minY:0;var A=G.maxY?G.maxY:B;if(B>=C&&B<=A){H.style.height=(Stretch.getHeight()+E)+"px"}else{if(B<C){H.style.height=C+"px"}else{if(B>A){H.style.height=A+"px"}}}}if(G.mode==Stretch.MODE.x||G.mode==Stretch.MODE.xy){var F=(G.correctX==null)?0:G.correctX;var D=Stretch.getWidth()+F;var C=G.minX?G.minX:0;var A=G.maxX?G.maxX:D;if(D>=C&&D<=A){H.style.width=(Stretch.getWidth()+F)+"px"}else{if(D<C){H.style.width=C+"px"}else{if(D>A){H.style.width=A+"px"}}}}}};var ZINDEX={lightboxShade:21,lightboxShadow:22,lightbox:23,jellyBoxColor:24,jellyBoxImage:25,dragItem:26,dragMarker:27};Global.media_selection_per_page;var media_select_save={page:1};function mediaSelectReload(B,D,A){if(B){media_select_save.q=B;$("searchText").value=B}else{media_select_save.q=null;$("searchText").value=""}var C=document.media.media_type.value;mediaSelectReloadLong("all",C,(media_select_save.media_type==C)?media_select_save.page:1,Global.media_selection_per_page,D,A)}function mediaSelectReloadLong(F,D,G,E,H,C){media_select_save.curPage=(G)?G:1;var A;var B;if(D=="friends"){A="/common/friends.inc";B="&entity_coll_id="+F}else{A="/common/media_collection.inc";B="media_coll_id="+F+"&media_coll_type="+D}if(G){B+="&page="+G}if(E){B+="&per_page="+E}if(C){B+="&onclick_js="+C}if($("searchSort")){B+="&sort="+$("searchSort").value}if(document.media.q){B+="&q="+document.media.q.value}if(media_select_save.media_type==D){oldCallBack=H;H=function(){if(oldCallBack){oldCallBack()}Element.removeClassName($(media_select_save.item_id),"pcTmplUnselected");Element.addClassName($(media_select_save.item_id),"pcTmplSelected")}}new Ajax.Updater("media_content_pane",A,{method:"get",parameters:B,evalScripts:true,onComplete:H})}function mediaSelectOnClick(){var A=$("media_selection").select(".pcTmplSelected");if(A.length>0){A.each(function(B){media_select_save.page=media_select_save.curPage;media_select_save.item_id=B.id;media_select_save.media_type=document.media.media_type.value})}else{media_select_save.item_id=null;media_select_save.media_type=null}}function switchButton(C){for(var B=1;B<=6;B++){var A=$("filename_"+B);var D=$("uploadbox"+B);if((!D||!A)||(D.style.display=="none"||A.style.display=="none")){break}else{if(A.value==""){alert("Please choose a media file to upload.");return false}}}if(C){$(C).submit()}else{document.form_upload_media.submit()}}function clearFirstRunCookie(B){if(B){var A=new Date((new Date()).getTime()-12*3600000);deleteCookie("MYPAGE_FIRST_RUN","/",Global.DOMAIN_NAME)}else{var A=new Date((new Date()).getTime()-12*3600000);deleteCookie("FIRST_RUN","/",Global.DOMAIN_NAME)}}function loadAlphaPNG(){}function grabMediaConfirmBox(A){if((typeof A!="object")&&!loginCheck({onLogin:grabMediaConfirmBox,viewed_entity_id:A.split("_")[0],login_req:1})){return }if(confirm("Add this media to your collection?")){grabMediaBox(A)}}function grabMediaBox(C){var D=LightBox.create(80,30,280,120);var A="/common/grab_media.inc";var B="entity_media_id="+C;D.id="grab_media";var E=new Ajax.Updater(D.id,A,{method:"get",parameters:B,evalScripts:true});D.style.backgroundColor="#ffffff"}function grabMedia(D,F,B){var A="/cgi-bin/ajax_processor.cgi";var C="op=grab_media&media_id="+D+"&title="+F;if(B!=""){C+="&tags="+B}var E=new Ajax.Request(A,{method:"post",parameters:C,onComplete:function(G){alert("This media has been added to your collection.");LightBox.remove()}})}function reportConfirmBox(B){if(!loginCheck({onLogin:reportConfirmBox,viewed_entity_id:B.split("_")[0],login_req:1})){return }var F=B.split("_");var A=F[0];var E=F[1];var G=LightBox.create(80,30,480,220);var C="/media/report_confirm.inc";var D="entity_id="+A+"&media_id="+E;G.id="reportconfirm";var H=new Ajax.Updater("reportconfirm",C,{method:"get",parameters:D,evalScripts:true});G.style.backgroundColor="#ffffff"}function pngImageSwap(B,A){if(!Sniffer.is_ie_5_5_up||Sniffer.is_ie_7){B.src=A}else{B.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+A+"',sizingMethod='scale')"}}function changeSearchBox(A){if(!this.hasBeenChanged){A.style.textAlign="left";A.value="";A.style.color="#000000";this.hasBeenChanged=true}}function resetVerificationCode(A){if(A){$(A+"_img").src="";$(A+"_img").src="/cgi-bin/captcha.cgi?"+(+new Date()).toString();$(A).value=""}}function trySetAudioList(B,A){if(typeof (thisMovie(A).setAudioList)=="undefined"){setTimeout("trySetAudioList('"+B.replace(/'/g,"\\'")+"', '"+A+"')",100)}else{thisMovie(A).setAudioList(B)}}function forgot_password(){var B=LightBox.create(80,30,280,120);var A=Global.SERVER_NAME+"/forgot_password.inc";B.id="forgot_password";var C=new Ajax.Updater("forgot_password",A,{method:"get",evalScripts:true});B.style.backgroundColor="#ffffff"}function switchUVMTab(C,E,D){var A=$$(".UVM_tab");for(i=0;i<A.length;i++){A[i].style.backgroundColor="d5d5d5";A[i].style.borderBottomColor="636665"}$(C).style.backgroundColor="ffffff";$(C).style.borderBottomColor="ffffff";var B=$$(".edit_template");for(i=0;i<B.length;i++){B[i].style.display="none"}$(E).style.display="";if(D){D()}}function uploadProfileImage(){var A=$("filename_1");if(A.value==""){alert("Please choose an image to upload.");return false}$("upload_button").style.display="none";$("upload_wait").style.display="";$("form_upload_media").submit()}function uploadComplete(D,J,F,I){if(F){$("form_upload_media").reset()}else{var L=$$(".upload_row");for(i=0;i<L.length;i++){L[i].style.display="none"}for(i=1;i<7;i++){if($("filename_"+i)){var K=$("file_field"+i),H=document.createElement("input");K.removeChild($("filename_"+i));H.setAttribute("type","file");H.setAttribute("id","filename_"+i);H.setAttribute("name","filename_"+i);H.setAttribute("class","font12");H.setAttribute("style","vertical-align:middle");K.appendChild(H)}}var G=$$(".upload_field");for(i=0;i<G.length;i++){G[i].value=""}if($("photo1")){$("photo1").style.display=""}for(i=1;i<6;i++){if($("show_photo"+i)){$("show_photo"+i).style.display="none"}if($("hide_photo"+i)){$("hide_photo"+i).style.display=""}}if($("header_top")){$("header_top").focus()}}$("upload_wait").style.display="none";$("upload_button").style.display="";if(F){var C="/mypage/"+F+"_selector.inc";var E={media_coll_type:J,content_type:J,coll_id:"all",module_type:"media",show_types_drop:I};var B=D+"_selector";var A=new Ajax.Updater(B,C,{method:"post",parameters:E,evalScripts:true})}else{var C="/mypage/ifelem_selector.inc";var E="ifelem_type="+J;var A=new Ajax.Updater("ifelem_selector",C,{method:"post",parameters:E,evalScripts:true})}}try{document.execCommand("BackgroundImageCache",false,true)}catch(err){}function loadFirstRun(E,F){var A=LightBox.create(50,150,790,464);var B="/firstrun.inc";var C={section:E};if(F){Object.extend(C,F)}A.id="firstrun";var D=new Ajax.Updater(A.id,B,{method:"get",parameters:C,evalScripts:true});A.style.backgroundColor="#ffffff"}function display_myspace_announce(A,E){if(!loginCheck({onLogin:display_myspace_announce,viewed_entity_id:A,login_req:1})){return }var C=LightBox.create(80,30,600,600);C.id="myspaceAnnounceBox";C.style.backgroundColor="#ffffff";var B="/profile/myspace_announce_lightbox.inc";var D=new Ajax.Updater(C,B,{method:"get",parameters:{entity_id:A,flyer_id:E},evalScripts:true})}function flagThis(F,A,E,C){if(!loginCheck({onLogin:flagThis,login_req:1})){return }var B="/cgi-bin/ajax_processor.cgi";var D="op=add_flag&type="+F+"&src_entity_id="+A+"&item_entity_id="+E+"&item_id="+C;var G=new Ajax.Request(B,{parameters:D,method:"get",evalScripts:true,onComplete:function(J){var H=J.responseXML;if(H){var I=H.getElementsByTagName("errcode")[0].firstChild.nodeValue;if(I=="duplicate_entry"){alert("You have already flagged this.")}else{alert("This has been flagged.")}}else{alert("This has been flagged.")}}})}function url_domain_check(A){if(!A){return""}else{if(A.match(/^https?:\/\/(?:[-_a-zA-Z0-9]+\.)?oprah\.com(?:[\/#?]|$)/)){return A}else{if(A.indexOf("/")==0){return Global.SERVER_NAME+A}else{return Global.SERVER_NAME}}}}function checkDefault(A,B){A=$(A);A.observe("focus",function(){if(B==A.value){A.value="";A.removeClassName("default_text")}});A.observe("blur",function(){if(A.value==""){A.value=B;A.addClassName("default_text")}});document.observe("dom:loaded",function(){if(A.value==""){A.value=B;A.addClassName("default_text")}})}function checkStringLengthInit(B,A){if(!window.Prototype){return }if(B._checkStringLengthInit){return }["focus","click","keyup","blur"].each(function(C){$(B).observe(C,function(){checkStringLength(B,A)})});checkStringLength(B,A);B._checkStringLengthInit=[true]}function checkStringLength(B,A){var E=210,D="Max number of characters allowed for comments is #{MAX}",C=B.value;if(typeof A=="number"){E=A}else{if(typeof A=="object"&&A!==null){if(A.max){E=A.max}if(A.text){D=A.text}}}if(C&&C.length>E){C=C.substr(0,E);B.value=C;alert(D.replace("#{MAX}",E))}}function checkCommentString(A){var B=2000;if(A.value.length>B){cString=A.value;if(A.childNodes.length>0){newNode=document.createTextNode(cString.substr(0,B));A.replaceChild(newNode,A.firstChild)}else{A.value=cString.substr(0,B)}alert("Max number of characters allowed for comments is "+B)}}function createNamedElement(C,A){var B=null;try{B=document.createElement("<"+C+' name="'+A+'">')}catch(D){}if(!B||B.nodeName!=C.toUpperCase()){B=document.createElement(C);B.name=A}return B}window.Maui||(Maui={});Maui.pad0=function(A,C){A=""+A;for(var B=A.length;B<C;B++){A="0"+A}return A};Maui.isDST=function(D){var C=new Date(0),B=new Date(0),A;C.setDate(1);C.setMonth(2);C.setFullYear(D.getFullYear());A=C.getDay();C.setDate(1+14-A);C.setHours(1);C.setMinutes(59);B.setDate(1);B.setMonth(10);B.setFullYear(D.getFullYear());A=B.getDay();B.setDate(1+7-A);B.setHours(1);B.setMinutes(59);return(D>C&&D<B)};function setNewsletterReferer(A){setCookie("NEWSLETTER_REFERER",A,null,"/",".oprah.com");var B=Global.SERVER_NAME+"/profile/newsletter.html";if(getCookie("AUTH")){B+="?nredir="+encodeURIComponent(A)}self.location.href=B}Maui.fbExecute=[];(function(){var A=navigator.userAgent||navigator.vendor||window.opera;if(/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|pad|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(A)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(A.substr(0,4))){Maui.is_mobile_browser=true}else{Maui.is_mobile_browser=false}})();function toggleSubFolders(A){if($("media_subcoll_nav_"+A).style.display=="none"){$("subnav_arrow_"+A).src="/images/newest_nav/arrow_on.png";$("media_subcoll_nav_"+A).style.display=""}else{$("subnav_arrow_"+A).src="/images/newest_nav/arrow_off.png";$("media_subcoll_nav_"+A).style.display="none"}}function media_comment_submit(D,F,G,C,H,J,K){var I=G||document.forms.comment_form;if(I.comment.value==""||I.comment.value==K){alert("Please enter a comment.");I.isSubmitting=false;I.comment.focus();return false}var B=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";var E={op:"add_media_comment",entity_id:D,media_id:F,comment:I.comment.value};if(I.parent_comment_id.value!=""){E.parent_comment_id=I.parent_comment_id.value}if(I.add_subscription&&I.add_subscription.value!=""){E.add_subscription=I.add_subscription.value}var L=(I.div_width)?I.div_width.value:"";var A=new Ajax.Request(B,{method:"post",parameters:E,onComplete:function(Q){var O=Q.responseXML;if(O){var R=(O.getElementsByTagName("notVerified").length>0)?O.getElementsByTagName("notVerified")[0].firstChild.nodeValue:"0";var N=(O.getElementsByTagName("approvalRequired").length>0)?O.getElementsByTagName("approvalRequired")[0].firstChild.nodeValue:"0";if(R=="1"){alert("Your e-mail address must be verified to post comments.")}else{if(N=="1"){alert("Your comment has been submitted for review. Check back soon to see it!")}else{alert("Your comment has been submitted.")}}}for(var P=0;P<document.forms.length;P++){var M=document.forms[P];if(M.name==I.name){M.comment.value=K||"";M.isSubmitting=false;if(K){M.comment.addClassName("default_text")}}}}})}function comment_submit(entity_id,media_id,media_type,form_name,doRefresh,oC,bypassLogin){var myForm=typeof form_name=="string"?document.forms[form_name]:form_name;var func=(oC!=null&&typeof oC=="string")?eval("elem=("+oC+")"):oC;AjaxParams.store("index_media_detail",{comment_body:myForm.comment.value});if(!myForm.comment.value){if(myForm.isSubmitting){myForm.isSubmitting=false}alert("Please enter a comment.");myForm.isSubmitting=false;return }var callback=function(){var url=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";var pars=Object.extend({entity_id:entity_id},Form.serialize(myForm,1));if(!func){if(doRefresh){var myAjax=new Ajax.Request(url,{method:"post",parameters:pars,onComplete:function(request){AjaxParams.remove("index_media_detail",["comment_body"]);var url=Global.SERVER_NAME+"/media/comments.inc";var myAjax=new Ajax.Updater("media_comments",url,{method:"post",parameters:{entity_id:entity_id,media_id:media_id},evalScripts:true});if(typeof updateTheaterContent!="undefined"){var selTab=$("tab_container").down(".notebook_tab_active");if(selTab.getAttribute("content_type")=="all_comments"){updateTheaterContent("all_comments")}}}})}else{var myAjax=new Ajax.Request(url,{method:"post",parameters:pars,onComplete:function(request){AjaxParams.remove("index_media_detail",["comment_body"]);if(myForm=="document.comment_form"){$("comment_submitted").style.display="";myForm.comment.value=""}else{self.location.href="/media/view_theater.inc?is_user=1&media_type="+media_type+"&entity_media_id="+entity_id+"_"+media_id}}})}}else{var myAjax=new Ajax.Request(url,{method:"post",parameters:pars,onComplete:function(request){AjaxParams.remove("index_media_detail",["comment_body"]);func(request)}})}};if(!bypassLogin&&!getCookie("AUTH")&&(!myForm.email||!$F(myForm.email)||!myForm.password||!$F(myForm.password))){if(!loginCheck({onLogin:comment_submit,viewed_entity_id:entity_id,login_req:1})){myForm.isSubmitting=false;return false}}else{checkLoginFields(myForm,callback)}}function flagTestimonialAbusive(A,C){if(!loginCheck({onLogin:flagTestimonialAbusive,viewed_entity_id:A,login_req:1})){return }var B=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";new Ajax.Request(B,{method:"post",parameters:{op:"flag_testimonial_abusive",entity_id:A,testimonial_id:C},onComplete:function(D){if(_processAjaxResponse(D)){alert("Thank you. Our administrators will review this comment.")}}})}function sendVerificationEmail(A,C){if(!loginCheck({onLogin:sendVerificationEmail,entity_id:A,email:C})){return }var B=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";new Ajax.Request(B,{method:"post",parameters:{op:"send_verification_email",entity_id:A,email:escape(C)},onComplete:function(D){if(_processAjaxResponse(D)){alert("We sent your email verification request to the address you provided")}}})}function updateBlogPubFeed(A,C){if(!loginCheck({onLogin:updateBlogPubFeed,entity_id:A,login_req:1})){return }var D=($("buzz_pub"+C).checked)?"Y":"N";var B=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";new Ajax.Request(B,{method:"post",parameters:{op:"update_blog_pub_feed",entity_id:A,blog_id:C,pub_to_feed:D}})}function _processAjaxResponse(E,C){var F=0;if(E){var A=E.responseXML;if(A){if(!C){$$(".error_div").invoke("hide")}var D=A.getElementsByTagName("errcode")[0].firstChild.nodeValue;if(D!="ok"){if(C=="errcode"){return D}if(D=="auth_expired"){document.location="/index.html"}var B=document.getElementById(D);if(B){B.style.display=""}else{B=document.getElementById("unexpected_error");if(B){B.style.display=""}}}else{F=C=="errcode"?null:1}}}return F}function checkLoginFields(C,D){if(!getCookie("AUTH")&&C.email&&$F(C.email)){var B=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i;if(!B.test($F(C.email))){alert("You have entered an invalid email address.");C.email.focus();C.isSubmitting=false;return }if(!$F(C.password)){alert("Please enter a password.");C.password.focus();C.isSubmitting=false;return }var A=Global.LOGIN_REG_SERVER_NAME+"/cgi-bin/login.cgi";new Ajax.Request(A,{method:"post",parameters:{email:$F(C.email),password:$F(C.password)},onComplete:function(F){if(_processAjaxResponse(F)){D()}else{var E=F.responseXML.getElementsByTagName("errcode").item(0).firstChild.nodeValue;if(E=="bad_password"||E=="bad_login_password"){alert("Incorrect email and/or password.");C.email.focus()}C.isSubmitting=false}}})}else{if(!getCookie("AUTH")&&C.guest_email){if(!$F(C.guest_email)||!$F(C.guest_name)){alert("You must either login or provide your name and email address to post a comment.");C.guest_email.focus();C.isSubmitting=false;return }var B=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;if(!B.test($F(C.guest_email))){alert("The email address you have entered is not a valid email.");C.guest_email.focus();C.isSubmitting=false;return }D()}else{D()}}}function _set_crossdomain_cookies(){if($("cross_domain_iframe")){var B=Object.toJSON(getCookie());var A=Global.CROSS_DOMAIN_SERVER+"/cookie_exch/set_cookie.html?nugget="+escape(Base64.encode(escape(B)));$("cross_domain_iframe").src=A}}function updateRatedMgmt(G,K,D,I,F,J,C,H){if(K=="all"||K=="nav"){var B=Global.SERVER_NAME+"/rated/nav.inc";var E="rated="+I+"&page_type="+F;var A=new Ajax.Updater("nav_coll_list",B,{method:"post",parameters:E,evalScripts:true})}if(K=="all"||K=="content"){var B=Global.SERVER_NAME+"/rated/show_coll.inc";var E="rated="+I+"&page_type="+F;J=(+J);if(J>0){E=E+"&page="+J}if(C){E=E+"&q="+C}if(H){E=E+"&sort="+H}var A=new Ajax.Updater("content",B,{method:"post",parameters:E,evalScripts:true})}}function updateEntities(G,K,D,J,F,I,C,H){if(G){_processAjaxResponse(G)}if(K=="all"||K=="nav"){var B=Global.SERVER_NAME+"/profile/nav_coll_list.inc.html";var E="entity_id="+D+"&entity_coll_id="+J+"&page_type="+F;var A=new Ajax.Updater("nav_coll_list",B,{method:"post",parameters:E,evalScripts:true})}if(K=="all"||K=="content"){var B=Global.SERVER_NAME+"/profile/show_coll.inc.html";var E="entity_id="+D+"&entity_coll_id="+J+"&page_type="+F;I=(+I);if(I>0){E=E+"&page="+I}if(C){E=E+"&q="+C}if(H){E=E+"&sort="+H}var A=new Ajax.Updater("content",B,{method:"post",parameters:E,evalScripts:true})}if(K=="all_members"){var B=Global.SERVER_NAME+"/community/library/member_search.html";var E="entity_id="+D+"&entity_coll_id="+J+"&page_type="+F;I=(+I);if(I>0){E=E+"&page="+I}if(C){E=E+"&q="+C}if(H){E=E+"&sort="+H}var A=new Ajax.Updater("content",B,{method:"post",parameters:E,evalScripts:true})}if(K=="groups_joined"){var B=Global.SERVER_NAME+"/profile/nav_coll_list.inc.html";var E="entity_id="+D+"&entity_coll_id="+J+"&page_type="+F;var A=new Ajax.Updater("nav_coll_list",B,{method:"post",parameters:E,evalScripts:true});B=Global.SERVER_NAME+"/profile/groups_joined.inc.html";E="entity_id="+D+"&entity_coll_id="+J;A=new Ajax.Updater("content",B,{method:"post",parameters:E,evalScripts:true})}if(K=="mypage"){var B=Global.SERVER_NAME+"/mypage/friends/content.inc";var E="entity_id="+D+"&entity_coll_id="+J+"&page_type="+F;I=(+I);if(I>0){E=E+"&page="+I}if(C){E=E+"&q="+C}if(H){E=E+"&sort="+H}var A=new Ajax.Updater("media_content_pane",B,{method:"post",parameters:E,evalScripts:true})}if((K=="all"||K=="groups_joined")&&J!="all"&&J!="trash"&&J!="following"&&J!="being_followed"){var E="entity_id="+D+"&entity_coll_id="+J+"&page_type="+F;var B=Global.SERVER_NAME+"/profile/folder_settings.inc";var A=new Ajax.Updater("folder_settings_pane",B,{method:"post",parameters:E,evalScripts:true})}else{if(K!="mypage"&&K!="all_members"){B=Global.SERVER_NAME+"/media_mgmt/all_settings.inc";E="entity_id="+D+"&media_coll_type=entity";var A=new Ajax.Updater("folder_settings_pane",B,{method:"post",parameters:E,evalScripts:true})}}if((K=="all"||K=="groups_joined")){var E="entity_id="+D+"&entity_coll_id="+J+"&page_type="+F;if(K=="groups_joined"){E+="&media_coll_type=group"}B=Global.SERVER_NAME+"/mypage_mgmt/add_to_page_drop.inc";A=new Ajax.Updater("group_cast",B,{method:"post",parameters:E,evalScripts:true})}}function updateManageProfileImage(C){if(_processAjaxResponse(C)){var A=Global.SERVER_NAME+"/profile/manage_profile_image.inc";var B;var D=new Ajax.Updater("manage_profile_image",A,{method:"post",parameters:B,evalScripts:true})}}function restore_alert(B,A){var C;if(B=="blog"){C=confirm("Are you sure you want to restore all the deleted blog entries?")}else{if(B=="hp_plist"){C=confirm("Are you sure you want to restore all the deleted promo list entries?")}else{if(B=="entity"){C=confirm("Are you sure you want to restore all friends back into your collection?")}else{if(B=="flyer"){C=confirm("Are you sure you want to restore all flyers back into your collection?")}else{C=confirm("Are you sure you want to restore all media back into your collection?")}}}}if(C==true){restore_all_from_trash(B,A)}else{return false}}function restore_all_from_trash(D,A){$("ajax_error").innerHTML="";var B=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";var C="op=restore_all_from_trash";if(D=="blog"){C+="&type=blog&blog_coll_id="+A}else{if(D=="hp_plist"){C+="&type=hp_plist"}else{if(D=="entity"){C+="&type=entity"}else{if(D=="flyer"){C+="&type=flyer"}else{C+="&type=media&media_type="+D}}}}var E=new Ajax.Request(B,{method:"post",parameters:C,onComplete:function(F){if(D=="blog"){self.location.href=Global.SERVER_NAME+"/blogs/mvm.html?media_coll_id=trash"}else{if(D=="hp_plist"){updatePromoListMgmt("","all","trash")}else{if(D=="flyer"){updateFlyerMgmt("all","trash")}else{if(D=="entity"){updateEntities(F,"all",A,"trash","manage","")}else{updateMediaMgmt(F,"all","",D,"trash","manage","","","")}}}}}})}function empty_trash_alert(B,A){var C;if(B=="blog"){C=confirm("Are you sure you want to permanently delete the items in your Blogs Trash Can?")}else{if(B=="flyer"){C=confirm("Are you sure you want to permanently delete the items in your Flyers Trash Can?")}else{if(B=="entity"){C=confirm("Are you sure you want to permanently delete the items in your Friends Trash Can?")}else{if(B=="hp_plist"){C=confirm("Are you sure you want to permanently delete the items in your Promo List Trash Can?")}else{C=confirm("Are you sure you want to permanently delete the items in your Media Trash Can?")}}}}if(C==true){empty_trash(B,A)}else{return false}}function empty_trash(D,A){$("ajax_error").innerHTML="";var B=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";var C="op=empty_trash&type="+D;if(D=="blog"){C+="&blog_coll_id="+A}var E=new Ajax.Request(B,{method:"post",parameters:C,onComplete:function(F){if(D=="blog"){self.location.href=Global.SERVER_NAME+"/blogs/mvm.html?media_coll_id=trash"}else{if(D=="hp_plist"){updatePromoListMgmt("","all","trash")}else{if(D=="flyer"){updateFlyerMgmt("all","trash")}else{if(D=="entity"){updateEntities(F,"all",A,"trash","manage","")}else{updateMediaMgmt(F,"all","",D,"trash","manage","","","")}}}}}})}function followMe(C){if(!loginCheck({onLogin:followMe,viewed_entity_id:C,login_req:1})){return }var D="Do you want to follow this user?";if(confirm(D)){var A=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";var B="op=follow_request&viewed_entity_id="+C;new Ajax.Request(A,{method:"post",parameters:B,onComplete:function(G){var E=G.responseXML;if(E){var F=E.getElementsByTagName("errcode")[0].firstChild.nodeValue;if(F=="existing_entity_assoc"){alert("You're already following the user.")}else{if(F=="blocked_entity_assoc"){alert("You cannot follow this user because you blocked them from following you.")}else{alert("You are now following this person.");self.location.href=self.location.href}}}else{alert("You are now following this person.")}}})}}function friendRequest(A,C,F,D){if(!loginCheck({onLogin:friendRequest,viewed_entity_id:A,login_req:1})){return }if(C=="fan"){var E="are you a fan?"}else{if(C=="group"){var E="Do you want to request to join this group?"}else{var E="Do you want to send a friend request to this user?"}}if(D||confirm(E)){var B="op=friend_request&entity_id="+A;if(C){B+="&type="+C}if(F){B+="&attach_media_id="+F}new Ajax.Request("/cgi-bin/ajax_processor.cgi",{method:"post",postBody:B,onComplete:function(G){_processFriendRequestResponse(G,C)}})}}function _processFriendRequestResponse(D,B){var C;if(D){var A=D.responseXML;if(A){C=A.getElementsByTagName("errcode")[0].firstChild.nodeValue}}var E;if(C=="same_entity"){E="Sorry, you cannot send a friend request to yourself."}else{if(C=="existing_entity_assoc"){E="This user is already a friend."}else{if(C=="existing_entity_assoc_fan"){E="You are already a fan."}else{if(C=="existing_entity_group_assoc"){E="You are already a member of this group"}else{if(C=="already_sent"){if(B=="group"){E="You've already sent a request to join this group."}else{E="You've already sent a friend request to this user."}}else{if(B=="fan"){E="You have been added as a fan!"}else{if(B=="group"){E="The request to join this group has been sent."}else{if(B=="group_website"){E="You are now a member of this group."}else{E="The friend request has been sent."}}}}}}}}alert(E)}function rankMediaTag(B,C,G,H){if(!loginCheck({onLogin:rankMediaTag,viewed_entity_id:B,login_req:1})){return }if(existsRankHistory("media",B,C,G)){alert("You already voted on this!\nYou have to wait awhile before you can vote on it again.");return }else{var E=$("score_"+B+"_"+C);var I=$(E).select(".text")[0];if(H=="increment"){I.innerHTML=parseInt(I.innerHTML)+1}Element.removeClassName(E,"vote_score");Element.addClassName(E,"vote_score_off");alert("Thanks for rating this media!");storeRankHistory("media",B,C,I.innerHTML,G)}var A=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";var D="op=rank_media_tag&viewed_entity_id="+B+"&media_id="+C+"&content_category_id="+G+"&mode="+H;var F=new Ajax.Request(A,{parameters:D,method:"post",evalScripts:true})}function existsRankHistory(rank_type,entity_id,src_id,cat_id){var rankHistory=getCookie("RANK_HISTORY");if(rankHistory){rankHistory=eval("("+rankHistory+")");var rankKey=rank_type+"_"+entity_id+":"+cat_id;if(src_id){rankKey+="_"+src_id}if(rankHistory[rankKey]){var dt1=parseInt(+(new Date()));var dt2=dt1-(86400*7);if(rankHistory[rankKey].timestamp>dt2){return true}else{return false}}}return false}function storeRankHistory(rank_type,entity_id,src_id,score,cat_id){var rankHistory=getCookie("RANK_HISTORY");if(rankHistory){rankHistory=eval("("+rankHistory+")")}else{rankHistory=new Object}var rankKey=rank_type+"_"+entity_id+":"+cat_id;if(src_id){rankKey+="_"+src_id}rankHistory[rankKey]={timestamp:+(new Date()),score:score};var dt=new Date();dt.setHours(dt.getHours()+7);setCookie("RANK_HISTORY",Object.toJSON(rankHistory),dt,"/",Global.DOMAIN_NAME)}var AjaxParams={get:function(A){var C=getCookie("AJAX_PARAMS"),B;if(C){C=window["eval"]("("+C+")");if(A&&C[A]){B=C[A]}else{if(!A){B=C}}}return B||{}},store:function(C,E){var D=AjaxParams.get(C);for(var A in E){D[A]=E[A]}D.location=self.location.toString();var B=new RegExp("#[a-z0-9_]+","i");D.location=D.location.replace(B,"");AjaxParams.save(D,C);return },remove:function(B,D){if(!B&&!D){deleteCookie("AJAX_PARAMS");return }if(D){var C=AjaxParams.get(B);for(var A=0;A<D.length;A++){if(C[D[A]]){delete (C[D[A]])}}}else{var C=AjaxParams.get();delete C[B]}AjaxParams.save(C,D?B:null)},save:function(D,C){var B=new Date();B.setTime(B.getTime()+1000*60*5);if(C){var A=AjaxParams.get();A[C]=D;D=A}setCookie("AJAX_PARAMS",Object.toJSON(D),B,"/",Global.DOMAIN_NAME);return },createKey:function(E){var C;var F=AjaxParams.get(E);if(F.location&&F.location==window.location.href){C="";var A=new Array();for(var B in F){A.push(B)}A=A.sort();for(var B=0;B<A.length;B++){C+=A[B]+F[A[B]]}var D=new RegExp("[^0-9a-z]","gim");C=C.replace(D,"")}return C}};function updateMediaMgmt(D,R,B,J,O,T,F,M,U,E,H){_processAjaxResponse(D);if(changed_data){var G="Your changes have not been saved. Would you like to save now?\nIf you choose 'Cancel' your changes will be permanently discarded.";if(confirm(G)){saveListEditMedia(updateMediaMgmt);return }else{changed_data=false}}if(R!="mypage"){if(U){$$(".sort_active")[0].className="sort_linked";document.getElementById("sort_"+U).className="sort_active"}else{if($$(".sort_active")[0]){var C=$$(".sort_active")[0].id;U=C.substr(5,C.length)}}if($("view_container")&&$("view_container").down(".viewLink")){var A=$("view_container").down(".viewActive");if(E){if(A){A.removeClassName("viewActive")}$(E+"View").addClassName("viewActive")}else{if(A){var L=A.id;E=L.substr(0,L.length-4)}}}}var K,S=new Array(),I=new Array(),P={entity_id:B,fb_mode:Global.fb_mode,media_coll_type:J,media_coll_id:O,page:F,page_type:T,q:M,sort:U,view_mode:E,flyer_id:H};if(O.match(/&range\=/)){var V=O.indexOf("&")+1;P.range=O.substr(V+6,3);P.media_coll_id=O.substr(0,O.length-V-1)}if(R=="all"||R=="nav"){S[0]=Global.SERVER_NAME+"/media_mgmt/nav_coll_list.inc.html";I[0]="nav_coll_list";$("view_media_coll_id").value=O}if(R=="all"||R=="content"){if(J.match(/image|video/)&&$("sortable_view")&&$("sortable_view").is_changed){var G="Your Changes have not been saved.\nWould you like to save them now?";if(confirm(G)){saveItemOrder(J);$("sortable_view").is_changed=0}}if(O=="system"){if(J=="audio"){S[1]=(Global.fb_mode)?Global.SERVER_NAME+"/media_mgmt/fb_system_folder.inc.html":Global.SERVER_NAME+"/media_mgmt/system_folder.inc.html"}else{S[1]=Global.SERVER_NAME+"/media/featured_media_folder.inc"}}else{if(O=="music_player"){S[1]=Global.SERVER_NAME+"/media_mgmt/music_player_builder.inc";$("right_pane").setStyle({backgroundColor:"414141"})}else{if(O=="slideshow"){S[1]=Global.SERVER_NAME+"/media_mgmt/slide_show_builder.inc";$("right_pane").setStyle({backgroundColor:"414141"})}else{S[1]=Global.SERVER_NAME+"/media_mgmt/show_coll.inc.html"}}}I[1]="media_content_pane"}if(R=="mypage"){S[0]=Global.SERVER_NAME+"/mypage/media/content.inc";I[0]="media_content_pane"}if(!Global.fb_mode&&R!="mypage"){if((!(/^(all|trash|slideshow|mine|grabbed|system|toptracks|music_player)$/.test(O)))&&(!(/^allaudio/.test(O)))){S[2]=Global.SERVER_NAME+"/media_mgmt/folder_settings.inc";I[2]="folder_settings_pane";if($("folder_settings_pane")&&J!="audio"){$("folder_settings_pane").setStyle({padding:"0 0 0 5px"})}$$(".view_buttons").invoke("setStyle",{visibility:""})}else{if(O=="system"){S[2]=Global.SERVER_NAME+"/media_mgmt/top_tracks.inc";I[2]="folder_settings_pane";$("folder_settings_pane").setStyle({backgroundColor:"414141",padding:"0 0 0 5px"})}else{if(J!="audio"){S[2]=(O=="all")?Global.SERVER_NAME+"/media_mgmt/all_settings.inc":Global.SERVER_NAME+"/media_mgmt/search.inc";I[2]="folder_settings_pane";if($("folder_settings_pane")){$("folder_settings_pane").setStyle({padding:"0 0 0 5px"})}}else{if(O=="music_player"||J=="audio"){$("folder_settings_pane").update("")}}}}}if(!Global.fb_mode&&O=="system"){$$(".view_buttons").invoke("setStyle",{visibility:"hidden"})}if(!Global.fb_mode&&O!="system"){$$(".view_buttons").invoke("setStyle",{visibility:""})}for(var N=0;N<I.length;N++){if(I[N]&&S[N]){var Q=new Ajax.Updater(I[N],S[N],{method:"post",parameters:P,evalScripts:true})}}}function addToThoughtList(B,A,E,D){var C=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";new Ajax.Request(C,{method:"post",parameters:{op:"add_thought_to_my_list",src_entity_id:B,origin_entity_id:A,thought_id:E,content:D},onComplete:function(F){$("me_too_on_"+A+"_"+E).style.display="none";$("me_too_off_"+A+"_"+E).style.display=""}})}(function(){var B=/\bentity_id=(\d+)/,F={};function C(G){if(!G._rollover_box){var H=new Element("div",{className:"loading_animation",style:"width:318px; min-height:150px; border:3px solid #d0d0d0; background-color:#ffffff"});G._rollover_box=H}else{H=G._rollover_box}return H}function E(){var H=$(this),J=H.cumulativeOffset(),G=H.offsetWidth,I=H._rollover_box;I.setStyle({position:"absolute",top:J.top+"px",left:(J.left+G)+"px"});if(I.parentNode){I.show()}else{document.body.appendChild(I)}D(H)}function A(){if(this._rollover_box){this._rollover_box.hide()}}function D(I){var H=I.href,J=I._rollover_box,M;if(J._is_populated){return }J._is_populated=true;if(H){H=I.href.match(B);if(H&&H.length>1){M=H[1]}}if(!M){return }if(F[M]){J.removeClassName("loading_animation");J.update(F[M].innerHTML.stripScripts())}else{var K={viewed_id:M,visitor_id:getCookie("ENTITY_ID")||"NA"};var G=Global.STATIC_SERVER+"/community/profile_rollover.inc";var L=new Ajax.Updater(J,G,{method:"get",evalScripts:true,parameters:K,onSuccess:function(){J.removeClassName("loading_animation");F[M]=J}})}}Maui.initCommunityRollover=function(G){G=$(G);var H=G._rollover_box;if(H){return }H=C(G);G.hover({delayOut:200,onOver:E,onOut:A,extendTo:H})}})();(function(){if(!window.gigya){return }var G,H=Prototype.K,M=H,L=false,O=0,C={APIKey:Global.GIGYA_KEY};function B(){gigya.services.socialize.addEventHandlers(C,{context:{str:"congrats on your"},onLogin:F,onLogout:J})}function F(Q){if(L){return }var P=Global.SERVER_NAME.match(/devml/)?false:false;if(Q.user.isSiteUID&&!P){A(Q)}else{A(Q)}}function K(S){var R=LightBox.create(),P=Global.SERVER_NAME+"/common/gigya_combine_accounts.inc",Q={};var T=new Ajax.Updater(R,P,{method:"get",parameters:Q,onComplete:function(U){R.select(".close").invoke("observe","click",function(){LightBox.remove();A(S)});R.down("form[name=ajaxLogin]").observe("submit",function(V){V.preventDefault();N(S);return false});R.down("input[name=user_name]").focus()}})}function N(R){var P=Global.LOGIN_REG_SERVER_NAME+"/cgi-bin/login.cgi",Q=Form.serialize($$("form[name=ajaxLogin]")[0]);var S=new Ajax.Request(P,{method:"post",parameters:Q,onSuccess:function(T){if(_processAjaxResponse(T)){LightBox.remove(true);E(R)}else{alert("Username and password do not match")}}})}function E(U){var T=LightBox.create(),S=Global.SERVER_NAME+"/common/gigya_login_confirm.inc",Q=U.user,P=Q.identities.facebook.thumbnailURL,R=Q.firstName;var V=new Ajax.Updater(T,S,{method:"get",onComplete:function(W){T.select(".close").invoke("observe","click",function(){LightBox.remove();A(U)});T.down(".profile_img").src=P;T.down(".user_name").update(R);T.down(".account").observe("click",function(){A(U);M=function(){window.location=Global.SERVER_NAME+"/community/account_settings.html?entity_id="+Q.UID+"&section=registration_panel#account"}})}})}function A(U){var Q=U.user,T=Q.identities.facebook,S=T?T.providerUID:"";var V=new Ajax.Request(Global.SERVER_NAME+"/cgi-bin/gigya_processor.cgi",{method:"POST",parameters:Object.extend({op:"validate",origin_id:O||7,fbid:S},U.user),onSuccess:function(W){var X=W.responseJSON;if(X.valid){if(X.created){R(X,U)}else{P(U)}}else{alert("There was an error with your FB Connect account.  Please email techsupport@own.oprah.com for assistance")}}});O=0;function P(W){M(W);M=H}function R(X,W){var Z=X.entity_id;var Y={siteUID:Z,timestamp:X.signatureTimestamp,signature:X.signature,callback:function(a){if(a.errorCode==0){P(W)}}};gigya.services.socialize.notifyRegistration(C,Y)}}function I(){gigya.services.socialize.logout(C,{})}function J(P){}function D(Q){Q.url=Q.url||window.location.href;var P=new gigya.services.socialize.UserAction();P.addActionLink(Q.linktext||Q.title,Q.url);P.setLinkBack(Q.url);P.setTitle(Q.title);if(Q.message){P.setUserMessage(Q.message)}if(Q.description){P.setDescription(Q.description)}if(Q.image){P.addMediaItem({type:"image",src:Q.image.src,href:Q.image.href||Q.url})}return P}Maui.gigyaLoginPage=function(Q){var R=Q||{};if(!R.skipCheck&&location.hash.match(/access_token=([^&]+)/)){return }var P="http://socialize.gigya.com/socialize.login?x_provider=facebook&client_id="+Global.GIGYA_KEY+"&redirect_uri="+encodeURIComponent(R.redirect||location.href)+"&response_type=token";location=P};Maui.gigyaPostLoginPage=function(Q){var S=Q||{};if(!S.skipCheck&&getCookie("AUTH")){return }var R=window.location.hash.match(/access_token=([^&]+)/);if(R&&R.length>1){if(S.onProcessing){S.onProcessing()}var P=Global.SERVER_NAME+"/cgi-bin/gigya_processor.cgi";new Ajax.Request(P,{parameters:{op:"validate",access_token:R[1]},onSuccess:function(U){if(S.onSuccess){S.onSuccess(U.responseJSON)}else{var T=location.href.split("#");location.href=T[0]}}})}};Maui.gigyaLogin=function(P){var Q=P.type||"facebook";G=P.redir;O=P.originId;gigya.services.socialize.login(C,{provider:Q,cid:P.cid,callback:function(R){if(R.status=="OK"){M=(P.onSuccess||H)}else{(P.onFailure||H)(R)}}})};Maui.gigyaLoginCookie=function(){return getCookie("glt_"+Global.GIGYA_KEY)};Maui.gigyaDeleteUser=function(){gigya.services.socialize.delUserSettings(C,{callback:function(P){alert(P.status)}})};Maui.gigyaDisconnectAccount=function(Q){var R=Q||{},S=LightBox.create(),P=Global.SERVER_NAME+"/common/gigya_disconnect_confirm.inc";var T=new Ajax.Updater(S,P,{method:"get",onComplete:function(){S.down(".disconnect").observe("click",function(){LightBox.remove(true);gigya.services.socialize.removeConnection(C,{provider:R.type||"facebook",callback:function(U){if(U.status=="OK"){window.location=Global.SERVER_NAME+"/logout.html"}}})});S.down(".cancel").observe("click",function(){LightBox.remove()})}})};Maui.gigyaPublishAction=function(P){var Q=P||{},R={enabledProviders:Q.provider||"facebook",userAction:D(Q),shortURLs:"never",callback:function(S){(Q.onComplete||Prototype.K)(S)}};gigya.services.socialize.publishUserAction(C,R)};Maui.gigyaShare=function(Q){var S=Q||{},U={enabledProviders:S.provider||"facebook",cid:S.cid,showMoreButton:false,showEmailButton:false,userAction:D(S)};O=S.originId;if(S.provider=="email"){var T=LightBox.create(),P=Global.SERVER_NAME+"/common/guest_email_share.inc",R={title:S.title,url:S.url,body:S.body};new Ajax.Updater(T,P,{method:"get",evalScripts:true,parameters:R});return }if(S.skipAccountCreation===true){L=true;U.onSendDone=U.onClose=U.onError=function(V){L=false}}gigya.services.socialize.showShareUI(C,U)};Maui.gigyaShareBar=function(P){var Q=P||{},R={containerID:Q.container,shareButtons:[{provider:Q.provider,iconImgUp:Q.buttonImg,iconImgOver:Q.buttonImg}],cid:Q.cid,userAction:D(Q),buttonWithCountTemplate:'<img onClick="$onClick" src="$iconImg"/>',shortURLs:"never"};O=Q.originId;gigya.services.socialize.showShareBarUI(C,R)};Maui.gigyaSendEmail=function(R){var T=R||{},Q=new Image(),P="I just signed up for Oprah's Lifeclass!<br>Help us get to 1 million students! Hurry! Sign up and get a free copy of Oprah's class journal!<br><br><a href='http://www.oprah.com/oprahslifeclass'>www.Oprah.com/OprahsLifeclass</a><br><br>The Oprah Team",U={additionalParams:null,network:"email",postURL:T.url||window.location.href,text1:T.to},S={emailBody:T.body||P,emailSubject:"A friend has shared a link from Oprah.com",email:T.from,userMsg:T.message};function V(){if(T.onComplete){T.onComplete()}this.onload=this.onerror=null}U.additionalParams=Object.toQueryString(S);Q.onload=V;Q.onerror=V;Q.src="http://wildfire.gigya.com/wildfire/PostAndNavigate.aspx?"+Object.toQueryString(U)};document.observe("dom:loaded",B)})();function notes_submit(C,I,D,E){var J=C;var G=J.notes_fld;var L=J.section_type||undefined;var K=J.num_rec;var H=J.page_url;var F=J.hide_pager;var B=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";if(G.value==""||G.value==I){alert("Please enter notes");$("notes_frm_wrapper").down(".loading_animation").hide();J.isSubmitting=false;return false}var A=new Ajax.Request(B,{method:"post",parameters:{op:"add_notes",notes:G.value,is_private:1,section:L.value},onComplete:function(O){var M=O.responseXML;if(M){if(E){B=Global.SERVER_NAME+"/ocomtmp/own_tv/articles/related_notes_list.inc";new Ajax.Updater($("notes_list"),B,{method:"post",parameters:{section_type:L.value,num_rec:K.value,page:1,page_url:H.value,hide_pager:F.value},evalScripts:true,onComplete:function(Q){if($("notes_list").down(".notes_row")&&$("notes_list").previous(".hdr_past_notes")){$("notes_list").previous(".hdr_past_notes").show();if($("rr_view_all_notes")){$("rr_view_all_notes").show()}}}});for(var N=0;N<document.forms.length;N++){var P=document.forms[N];if(P.name==J.name){P.notes_fld.value=I||"";P.isSubmitting=false;if(I){P.notes_fld.addClassName("default_text")}}}$("notes_frm_wrapper").down(".loading_animation").hide();$("notes_status").show();$("notes_pg_list").show()}}}});return }function add_media_check_in(H,E,C,F,I){var A=I||{};if(!A.section_type){A.section_type="lifeclass"}if(getCookie("AUTH")&&!getCookie("lifeclass")&&(A.section_type=="lifeclass")){if(!loginCheck({onLogin:add_media_check_in,join_req:1,join_url:Global.SERVER_NAME+"/ocomtmp/own/lc_logged_in.html",join_redir:location.href})){return }}if(!loginCheck({onLogin:add_media_check_in,login_req:1})){return }var B=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";var D={op:"add_media_vote",src_entity_id:E,check_in:1,media_id:C,type:F,section_type:A.section_type};var G=new Ajax.Request(B,{method:"post",parameters:D,onComplete:function(N){var J=N.responseXML;if(J){var M=J.getElementsByTagName("errcode")[0].firstChild.nodeValue;if(F=="like"){var K=("CHECK_IN");var O={};var L=new Array();if(!getCookie(K)){L.push(H);O[A.section_type]=L}else{O=getCookie(K).evalJSON();if(O[A.section_type]){L=O[A.section_type];if(L.indexOf(H)==-1){L.push(H)}}else{L.push(H)}O[A.section_type]=L}setCookie(K,Object.toJSON(O),"","/","oprah.com")}if(getCookie("_gig_llp")=="facebook"&&getCookie("_gig_llu")&&M=="ok"){if(A.section_type=="lifeclass"){Maui.gigyaPublishAction({provider:"facebook",title:"Join me in class on OWN and Oprah.com",linktext:"Oprah's Lifeclass",url:"http://www.oprah.com/oprahslifeclass",image:{src:"http://static.oprah.com/css/own/images/ownnetwork/own-fb-image-v1.jpg",href:"http://www.oprah.com/oprahslifeclass"},message:"I just checked in to Oprah's Lifeclass!"})}}if(A.onComplete){if(A.is_sweeps){if(M=="already_voted"){M="sweeps_already_voted"}else{if(M=="ok"){M="sweeps_ok"}}new Ajax.Request(B,{method:"post",parameters:{op:"add_new_campaign_user",campaign_id:2,misc_1:"Y"},onComplete:function(P){var Q=P.responseXML;if(Q){setCookie("lifeclass_sweeps",1,"","/","oprah.com");A.onComplete(M);return }}})}else{A.onComplete(M);return }}else{if(A.is_sweeps){if(M=="already_voted"){alert("You are already checked-in and entered in the Oprah's Lifeclass Check-In To Win Sweepstakes.")}else{if(M!="ok"){alert("Error checking in.")}else{alert("Thank you for checking in and entering the Oprah's Lifeclass Check-In To Win Sweepstakes!")}}new Ajax.Request(B,{method:"post",parameters:{op:"add_new_campaign_user",campaign_id:2,misc_1:"Y"},onComplete:function(P){var Q=P.responseXML;if(Q){setCookie("lifeclass_sweeps",1,"","/","oprah.com");window.location.reload()}}})}else{if(M=="already_voted"){alert("You have already checked in to class.");window.location.reload()}else{if(M!="ok"){alert("Error checking in.")}else{alert("Thank you for checking in.");window.location.reload()}}}}}}})};DropShadow={build:function(D,C,B){if(D===false){var A=new Element("div");A.innerHTML='<table border="0" cellpadding="0" cellspacing="0" class="lb_table_plain"><tr><td><div class="lb_content">'+(C?'<img src="'+C+'"/>':"")+"</div></td></tr></table>";return A}else{return DropShadow.buildShadow(D,C,B)}},buildShadow:function(H,E,D){var C=new Element("div"),G=typeof Global!="undefined"?Global.STATIC_SERVER:"",B=Prototype.Browser.IE,A=(B&&B.v>=5&&B.v<=6);C.innerHTML=['<table border="0" cellpadding="0" cellspacing="0" class="lb_table',Sniffer.is_safari?" safari":"",'">','<tr><td class="lb_tl"></td><td class="lb_tc"></td><td class="lb_tr"></td></tr>','<tr><td class="lb_cl"><img src="',G,'/images/spacer.gif"/></td><td class="lb_cc"><div class="lb_content">',E?'<img src="'+E+'"/>':"",'</div></td><td class="lb_cr"><img src="',G,'/images/spacer.gif"/></td></tr>','<tr><td class="lb_bl"></td><td class="lb_bc"></td><td class="lb_br"></td></tr></table>'].join("");if(A||!H){var F=D||{lb_tl:"lb_corner_top_lt.png",lb_tc:"lb_top.png",lb_tr:"lb_corner_top_rt.png",lb_cl:"lb_left.png",lb_cc:"lb_center.png",lb_cr:"lb_right.png",lb_bl:"lb_corner_bot_lt.png",lb_bc:"lb_bot.png",lb_br:"lb_corner_bot_rt.png"};C.select("td").each(function(J,I){if(F[J.className]){if(A){J.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+G+"/images/shadow/"+F[J.className]+"', sizingMethod='scale')"}else{J.style.backgroundImage="url('"+G+"/images/shadow/"+F[J.className]+"')"}}else{J.style.backgroundColor=F.bgColor||"#ffffff"}})}else{C.select("td").each(function(J,I){J.style.backgroundImage="url('"+G+"/images/shadow/"+H+"')"})}return C},create:function(C){var D;C=$(C);if(!C.no_drop_shadow){if(C.hasClassName("small")){D=DropShadow.build("lb_shadow_125x125.png");D.addClassName("small")}else{D=DropShadow.build("lb_shadow_500x500.png")}D.addClassName("img_shadow");var B=D.down("div");var A=C.parentNode;if(A){A.insertBefore(D,C);C.remove()}B.appendChild(C);C.no_drop_shadow=[true];return D}},load:function(A){var B=this;try{A=$(A||document.body);if(A){A.select(".drop_shadow").each(B.create.bind(B))}}catch(C){}}};(function(){var Q=this,H=new Image(),G=null,R=document,E=[],S=[],L=typeof ZINDEX!="undefined"?ZINDEX.lightbox:3,K=function(){var T=R.viewport.getDimensions();return{x:T.width,y:T.height}},A=function(){var T=R.viewport.getScrollOffsets();return{x:T.left,y:T.top}},D=function(){var T=document.body,U=document.documentElement;return{x:Math.max(T.scrollWidth,U.scrollWidth,T.offsetWidth,U.offsetWidth,T.clientWidth,U.clientWidth),y:Math.max(T.scrollHeight,U.scrollHeight,T.offsetHeight,U.offsetHeight,T.clientHeight,U.clientHeight)}},B=function(U,T){this.getBox=function(){return U};this.getOptions=function(){return T}},M=function(){var T=$("system_lightbox_div");if(!T){T=new Element("div",{id:"system_lightbox_div"});document.body.appendChild(T)}return T},C=function(){var T=E.length;if(T){return E[T-1]}},P=function(){var b=$A(arguments),c=C(),U=typeof b[0]=="boolean"?b.shift():false,V=Object.isNumber(b[0])?b.shift():null,f=Object.isNumber(b[0])?b.shift():null,T=c.getOptions();if(c&&!T.style&&(U||!T.disableReCenter)){var Z=c.getBox(),a=A(),Y=K(),e=Z.offsetWidth,d=Z.offsetHeight,X,W;if(Object.isNumber(V)){e=V}if(Object.isNumber(f)){d=f}X=a.x+((Y.x-e)/2);W=a.y+((Y.y-d)/2);Z.setStyle({top:W+"px",left:X+"px"})}}.bind(Q),O=function(){var T=S[S.length-1];if(T){var U=D();T.setStyle({width:U.x+"px",height:U.y+"px"})}}.bind(Q),J=function(V){var X=false,U,T,W=V.skin;if(W=="rounded_white"){X=W+"/full.png",U={lb_tl:W+"/tl.png",lb_tr:W+"/tr.png",lb_bl:W+"/bl.png",lb_br:W+"/br.png",bgColor:"#ffffff"}}T=DropShadow.build(X,H.src,U);T.setStyle({overflow:Prototype.Browser.Gecko?"auto":"",visibility:"hidden",zIndex:L+E.length});T.addClassName("system_lightbox");M().appendChild(T);return T},F=function(V){var T=new Element("div");var U={position:"absolute",top:0,left:0,border:0,zIndex:L+S.length};T.addClassName("system_lightbox_shade");U.backgroundColor=V.shadeColor;U.opacity=V.shadeOpacity;T.setStyle(U);if(V.shadeClickable){T.observe("click",function(){if(V.onShadeClick){V.onShadeClick()}LightBox.remove()})}M().appendChild(T);S.push(T);return T},N=function(T){if(Prototype.Browser.IE&&Prototype.Browser.IE.v<7){E[E.length-1].getBox().select("select").invoke("setStyle",{visibility:T})}};document.observe("dom:loaded",function(){H.src=(typeof Global!="undefined"?Global.STATIC_SERVER:"")+"/images/lb/loading_icon.gif"});var I={create:function(U){var X=this;if(X.noLoad){return""}var T=Prototype.Browser,W=Object.extend({allowMultiple:false,container:null,disableShade:false,disableReCenter:false,onClose:null,onUpdate:null,onShadeClick:null,shadeOpacity:0.45,shadeColor:"#000000",shadeClickable:false,skin:"shadow",style:null},typeof U=="object"?U:{});G=W.shadeOpacity;if(!W.allowMultiple){X.remove(true)}if(!E.length||W.allowMultiple){if(T.IE){$$("select").each(function(Y){Y.style.visibility="hidden"})}if(typeof DropZone!="undefined"){DropZone.switchLayer(1)}if(!W.disableShade){if(W.allowMultiple||(!W.allowMultiple&&!S.length)){X.createShade(W)}}Event.observe(window,"resize",P);Event.observe(window,"scroll",P)}else{N("hidden")}var V=J(W);E.push(new B(V,W));if(W.style){V.setStyle(W.style)}else{P(true)}return V.down("div.lb_content")},createShade:function(T){var U=Object.extend({shadeOpacity:0.45,shadeColor:"#000000"},T||{});F(U);Event.observe(window,"resize",O);O()},remove:function(T){var X=this,U=Prototype.Browser,Y=E.pop();if(Y){var W=Y.getBox(),V=Y.getOptions();W.remove();if(V.onClose){V.onClose()}}if(!T){X.removeShade()}if(!E.length){if(U.IE){$$("select").each(function(Z){Z.style.visibility="visible"})}$$("object, embed, iframe").each(function(Z){Z.style.visibility="visible"});Event.stopObserving(window,"resize",P);Event.stopObserving(window,"scroll",P);if(typeof DropZone!="undefined"){DropZone.switchLayer(0)}}else{N("visible")}},removeShade:function(){var T=S.length>0?S.pop():null;if(T){var U=T;T=null;Event.stopObserving(window,"resize",O);new Effect.Opacity(U,{duration:0.15,from:G,to:0,afterFinish:function(){U.remove()}})}},center:function(){P.apply(this,arguments)},onUpdate:function(W){var V=this,T=M(),X=C();if(X){var U=X.getBox();P(true);U.style.visibility="";P(true)}if(!W){V.onPostUpdate()}},onPostUpdate:function(){var V=C();if(V){var U=V.getBox(),W=V.getOptions().onUpdate,T=$("edit_container");if(W){W()}if(Prototype.Browser.Gecko&&U.dragOptions){U.style.width=U.offsetWidth+"px"}}},loadingImg:H};window.LightBox=window.Maui.LightBox=I})();function add_friends(){var C="";var A="";for(var B=0;B<document.form_friends.all_friends.options.length;B++){if(document.form_friends.all_friends.options[B].selected){C+=document.form_friends.all_friends.options[B].text+";";A+=document.form_friends.all_friends.options[B].value+";"}}document.sendit.maui_friends.value=C;document.sendit.maui_friends_hidden.value=A;window.close()}function reSelectMedia(){$("media_selection").select(".media_thumb").each(function(A){if(A.id==(linked_entity_id+"_"+media_id)){Element.removeClassName(A,"pcTmplUnselected");Element.addClassName(A,"pcTmplSelected")}})}function rePopTestimonial(E){var D=document.forms.add_testimonial;D.to_entity_id.value=entity_id;D.media_id.value=media_id;D.comment_body.value=comment_body;D.parent_testimonial_id.value=parent_testimonial_id;D.add_subscription.checked=add_subscription?true:false;if(D.guest_displayname){D.guest_displayname.value=guest_displayname||"";var B=$(D.guest_displayname.parentNode).down(".field_overlay");if(B){D.guest_displayname.parentNode.removeChild(B)}}D.isSubmitting=false;for(var A=0;A<document.forms.media.media_type.options.length;A++){var C=document.forms.media.media_type.options[A];if(C.value==media_select_save.media_type){C.selected=true;mediaSelectReload(media_select_save.q,reSelectMedia,"mediaSelectOnClick")}}}function addTestimonialBox(C,F,K,J,I,H,G,D){if(J&&!loginCheck({onLogin:addTestimonialBox,viewed_entity_id:C,login_req:1})){return }var E=LightBox.create(80,30,800,600);E.id="addTestimonial";E.style.backgroundColor="#ffffff";var B=Global.SERVER_NAME+"/mypage/add_testimonial.inc.html";var A=new Ajax.Updater(E,B,{method:"get",parameters:{to_entity_id:C,flyer_id:K,parent_testimonial_id:I,page:H,div_id:G,data:D},evalScripts:true,onComplete:F})}function addTestimonial(){var A=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";var B="op=add_testimonial&"+Form.serialize(document.forms.add_testimonial);var C=document.forms.add_testimonial;var D=new Ajax.Request(A,{method:"post",postBody:B,onComplete:function(E){LightBox.remove();if(_processAjaxResponse(E)){if($("page_info")){updateMypageMgmtTestimonials($F("flyer_id"),$F("testimonial_page"));alert("Your comment has been posted")}else{if($("testimonialApproval")){if($("testimonialApproval").value=="public"){alert("Your comment has been posted");window.location.reload(true);loadMypageTestimonialContent(C.to_entity_id.value,C.flyer_id.value,C.div_id.value,C.page.value,C.data.value)}else{if($("testimonialApproval").value=="protected"){alert("Your comment will be posted after this user gives their approval")}}}}media_select_save.item_id=false}else{alert("Unexpected error")}}})}function pageWizardBox(C){var B=LightBox.create(80,30,500,191);B.id="page_wizard_lb";B.style.backgroundColor="#ffffff";var A={wizard_type:C};var D=new Ajax.Updater(B.id,"/wizard/page_wizard_lb.inc",{method:"get",parameters:A,evalScripts:true})}function createGroupBox(F,B,D,A){var E=function(){var I=LightBox.create(80,30,500,191);var G=Global.SERVER_NAME+"/profile/add_entity_coll.html";var H="&op="+F;if(B){H+="&entity_coll_name="+B+"&entity_coll_id="+D}if(A){H+="&create_website=1"}I.id="create_friend_group";var J=new Ajax.Updater(I.id,G,{method:"get",parameters:H,evalScripts:true});I.style.backgroundColor="#ffffff"};if(A){var C=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";new Ajax.Request(C,{method:"get",parameters:{op:"has_vanity_url"},onComplete:function(G){if(_processAjaxResponse(G)){E()}else{Global.postVanityFunction=function(){loadDetailPane();E()};C=Global.SERVER_NAME+"/mypage_mgmt/create_custom_url.inc.html";new Ajax.Updater("center_pane",C,{method:"get",parameters:{msg_type:"group"},evalScripts:true})}}})}else{E()}}function verifyupload(B){var A=document.getElementById(B);if(!A.filename_1.value){alert("Please enter a filename");return false}return true}function loginCheck(J){if(J.redirect){J.redirect=url_domain_check(J.redirect)}if((!getCookie("AUTH")&&J.login_req)||(getCookie("AUTH")&&J.join_req&&J.join_url)){var B=Global.SERVER_NAME+"/common/login_check.html",F={},H;function I(L){var K=L.match(/^function\s*(\w+)\s*\(([^)]*)\)/im);if(K){L="function("+(K[2]||"")+"){"+K[1]+"("+(K[2]||"")+")}"}return L}if(J.onLogin){if(J.onLogin.arguments){J.args=[];$A(J.onLogin.arguments).each(function(K){if(typeof (K)=="function"){K=I(K.toString().strip())}J.args.push(K)})}J.onLogin=I(J.onLogin.toString().strip())}if(J.form){var G=J.form;var C=new Object();C.form_name=G.name;for(i=0;i<G.elements.length;i++){var D=G.elements[i];var E=D.value;if(D.type=="checkbox"&&!D.checked){E=""}C[D.name]=E}J.form=Object.toJSON(C)}AjaxParams.store("LOGIN_CHECK",J);if((J.params||J).viewed_entity_id){F.viewed_entity_id=(J.params||J).viewed_entity_id}if(J.redirect){F.redirect=J.redirect}if(J.query){F.query=J.query}if(J.tab){F.tab=J.tab}if(!getCookie("AUTH")&&J.login_req){H=LightBox.create(0,0,340,240);H.id="loginRequired";new Ajax.Updater(H.id,B,{method:"get",evalScripts:true,parameters:F,onComplete:function(){$("username").focus()}})}else{if(getCookie("AUTH")&&J.join_req&&J.join_url){var B=J.join_url;var A=(B.search(/\?/)>-1)?"&":"?";if(J.join_redir){B+=A+"redir="+J.join_redir}self.location.href=B}}if(J.onLogin){return false}}else{if(J.redirect&&!J.tab){self.location.href=J.redirect}else{return true}}}function processPostLoginCheck(){var options=AjaxParams.get("LOGIN_CHECK");var hashRegex=new RegExp(/(^[^#]*)(#?.*$)/);if(typeof options.onLogin=="string"){eval("options.onLogin = ("+options.onLogin+")")}var current=window.location.href.match(hashRegex),redirect=options.redirect?options.redirect.match(hashRegex):["","",""];if(redirect[1]&&current[1]!=redirect[1]){window.location.href=options.redirect}else{if(redirect[1]&&current[2]!=redirect[2]){window.location.hash=redirect[2]}AjaxParams.remove("LOGIN_CHECK");if(typeof options.onLogin=="function"){var args=[];if(options.args&&options.args.length){$A(options.args).each(function(elem){if(typeof (elem)=="string"&&elem.match(/^\s*function\s*\(\)\s*\{/)){eval("elem = ("+elem+")")}args.push(elem)})}if(options.form){args.push("tmpForm="+options.form)}try{args.length?options.onLogin.apply(null,args):options.onLogin()}catch(err){}}}}function createLoginCheckForm(C){var F,E;for(var D=0;D<=C.length;D++){var A=C[D];if(A.match(/^tmpForm=/)){F=A.replace(/^tmpForm=/,"");break}}if(F){var B=F.evalJSON(true);E=createNamedElement("form",B.form_name);$H(B).each(function(H){var G=createNamedElement("input",H.key);G.value=H.value;E.appendChild(G)})}return E}function contactImportBox(A,C,F,G){var E=LightBox.create(0,0,10,10);var B=Global.SERVER_NAME+"/profile/inbox/contactImporter.inc";var D="service="+A;if(F.extra&&F.extra.value.match(/page_type/)){F.type.value="write"}if(F){D+="&"+Form.serialize(F)}if(C){D+="&registration=1"}if(G=="Y"){D+="&from_reg=1"}E.id="contactImporter";new Ajax.Updater(E.id,B,{method:"get",parameters:D,evalScripts:true});return false}function saveFormData(G,E,D){if(!G){alert("saveFormData() no data to save");return false}if(!lbSavedFormData){lbSavedFormData=new Object()}lbSavedFormData.fdatJson=new Object();if(E){var F="";var A="";for(var C=0;C<D.length;C++){var B=D[C];if(E[B]){A+=("&"+B+"="+E[B].value);G[B]=E[B].value}}}lbSavedFormData.fdatJson=G}function restoreLB(A,E,D,H){var B="";if(lbSavedFormData&&lbSavedFormData.fdatJson){var C=lbSavedFormData.fdatJson;for(var F in C){var I=C[F];B+=("&"+F+"="+escape(I))}}else{alert("restoreLB() no saved form data")}if(E){for(var F in E){var I=E[F];B+=("&"+F+"="+escape(I))}}var G=LightBox.create();G.id=D;G.style.backgroundColor=H;var A=Global.SERVER_NAME+A;new Ajax.Updater(D,A,{method:"get",parameters:B,evalScripts:true})};var inboxLightBoxId="inboxBox";var inboxBoxSelected="none";var inboxCurrentFolder="messages";var inboxMauiMembersStorage;var inboxTempStorage;var lbSavedFormData;function inboxMessageLB(I,B,G,E,F,D,J){if((I!="write"||J)&&!loginCheck({onLogin:inboxMessageLB,viewed_entity_id:I=="write"&&B?B:null,login_req:1})){return }if(I=="reply"||I=="forward"){if(!document.getElementById(inboxBoxSelected)){alert("Please select a message to "+I+".");return false}}var H=LightBox.create({onClose:function(){if(window.InboxContact){InboxContact.clearStored()}}});if(!inboxTempStorage){inboxTempStorage=new Object()}if(!inboxMauiMembersStorage){inboxMauiMembersStorage=new Object()}var A=Global.SERVER_NAME+"/profile/inbox/message.inc.html";var C="type="+I;if(I=="reply"||I=="forward"){C+="&message_id="+inboxBoxSelected.split("_")[1]}else{if(I=="event"){C+="&event_id="+B}else{if(I=="article"&&B){C+="&entity_id="+B}else{if(I=="write"&&B){C+="&entity_id="+B}else{if(I=="write_group"&&B){C+="&group_id="+B}else{if(I=="friend_request"&&B){C+="&list="+B}}}}}}if(G){C+="&firstrun=1"}if(D){C+="&extra="+D}else{if(inboxTempStorage.extra){C+="&extra="+inboxTempStorage.extra}}H.id=inboxLightBoxId;H.style.backgroundColor="#ffffff";new Ajax.Updater(inboxLightBoxId,A,{method:"get",parameters:C,evalScripts:true,onComplete:function(){if(I=="friend_request"){pageTracker._trackPageview("/friend_request_lightbox.html");var N=(E)?E:"";var L="";var K="";var M="";L="document.forms.message.emails.value = '"+N+"'";setTimeout(L,10)}if(I.match("confirm")){inboxTempStorage.extra=new Object();inboxTempStorage.extra=D;setTimeout(function(){document.forms.message.emails.value=(E)?E:"";document.forms.message.subject.disabled=true},10)}}})}function sendMediaLB(D,C,F){if(!loginCheck({onLogin:sendMediaLB,viewed_entity_id:C.split("_")[0],login_req:1})){return }var E=LightBox.create();inboxTempStorage=new Object();inboxMauiMembersStorage=new Object();var A=Global.SERVER_NAME+"/profile/inbox/message.inc.html";var B="type="+D+"&entity_media_id="+C+"&attachment="+C+"&attachment_type="+F;E.id=inboxLightBoxId;E.style.backgroundColor="#ffffff";new Ajax.Updater(inboxLightBoxId,A,{method:"get",parameters:B,evalScripts:true})}function sendFlyer(A){A.serialize}function inboxSend(C,J,O,D){if(C.blocked&&C.blocked.value=="1"){alert("Your message has been sent.");LightBox.remove();return false}var K="";var H="";var I="";if(C.emails_input||C.emails.value){var L=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i;var B=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;var F=new Array();var M=C.emails_input?C.emails_input.value:C.emails.value;M.split(/,|;|\n/).each(function(P){P=P.strip();if(P&&P.match(L)&&P.match(B)){F.push(P)}else{F=[];throw $break}});if(F.length>0){I=F.join(",")}}if(window.inboxMauiMembersStorage){if(inboxMauiMembersStorage.selected&&inboxMauiMembersStorage.selected.length>0){var E={users:[],groups:[]};inboxMauiMembersStorage.selected.each(function(P){var Q=P.id.match(/\d+|all/)[0];if(P.className&&Element.hasClassName(P,"entity")&&Q){E.users.push(Q)}else{if(P.className&&Element.hasClassName(P,"entity_coll")&&Q){E.groups.push(Q)}}});K=E.users.join(",");H=E.groups.join(",")}if(inboxMauiMembersStorage.external_emails&&inboxMauiMembersStorage.external_emails.length>0){I=inboxMauiMembersStorage.external_emails.join(",")}}if(C.type.value=="reply"){K=C.from_entity_id.value}if(!K&&C.type.value=="reply"){K=C.from_entity_id.value}if(!K&&!H&&!I){alert("Please add a valid email address");C.isSubmitting=false;return false}if(C.subject&&!C.subject.value&&!J){alert("Please enter a subject");C.isSubmitting=false;return false}if(!getCookie("AUTH")&&C.guest_email&&!$F(C.guest_email)&&!J){alert("You must either login or provide your email address to send a message");C.guest_email.focus();C.isSubmitting=false;return false}if(C.body&&!C.body.value&&!J){if(!C.body_opt||!C.body_opt.value){alert("Please enter a message");C.isSubmitting=false;return false}}if(C.msgType&&C.msgType.value){C.type.value=C.msgType.value}C.emails.value="";if($("hint_container")){$("hint_container").style.display="none";$("waiting_container").style.display=""}var G=Object.extend(Form.serialize(C,true),{op:"send_msg",bypass:J?1:"",sent_reg_invites:D=="1"?1:"",entity_list:K||"",entity_coll_list:H||"",emails:I||""});var N=Form.serialize(C,1);if(N.page_type&&N.attachment_type=="flyer"){var A=Global.SERVER_NAME+"/common/process_sharepage.inc";new Ajax.Request(A,{method:"post",parameters:G,onComplete:function(P){alert("Your message has been sent.");LightBox.remove()}})}else{var A=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";new Ajax.Request(A,{method:"post",parameters:G,onComplete:function(T){C.isSubmitting=0;if(_processAjaxResponse(T)){if(window.InboxContact){InboxContact.cached=false}if(D=="1"&&!C.type.value.match("confirm")){LightBox.remove();setCookie("SENT_REG_INVITES",1,null,"/",Global.DOMAIN_NAME);if(C.from_feed.value==1&&I.split(",").length>=10){var S=LightBox.create(50,150,800,600);var P=Global.SERVER_NAME+"/profile/swag_lightbox.html";var Q="entity_id="+$("entity_id").value;S.id="swag_lightbox";var U=new Ajax.Updater("swag_lightbox",P,{method:"get",parameters:Q,evalScripts:true});S.style.backgroundColor="#ffffff"}else{if(C.from_feed.value==1&&I.split(",").length<10){alert("You need to invite 10 friends to get your grab bag.")}else{alert("You've successfully emailed invitations to the contacts you selected.")}}}else{if(O){O()}else{if(C.from_feed&&C.from_feed.value==1&&I&&I.split(",").length>=10){var S=LightBox.create(50,150,800,600);var P=Global.SERVER_NAME+"/profile/swag_lightbox.html";var Q="entity_id="+C.entity_id.value;S.id="swag_lightbox";var U=new Ajax.Updater("swag_lightbox",P,{method:"get",parameters:Q,evalScripts:true});S.style.backgroundColor="#ffffff"}else{if(C.from_feed&&C.from_feed.value==1&&I.split(",").length<10){alert("You need to invite 10 friends to get your grab bag.")}else{alert("Your message has been sent.");if(C.type&&(C.type.value.match("article"))||(C.type.value.match("link"))){LightBox.remove()}else{if(C.type&&(C.type.value=="write")&&(C.name!="inbox")){LightBox.remove()}else{inboxRefresh("",1)}}}}}}if(C.type.value=="friend_request"){var R=new Date;R.setHours(R.getHours()+36000000);setCookie("INVITE_FRIENDS_DONE","1",R,"/",Global.DOMAIN_NAME)}}else{alert("Error processing your request.")}}})}}function update_msg_status(B){var A="";var E=$$(".messages");for(i=0;i<E.length;i++){if(E[i].checked==true){if(A==""){A=E[i].value}else{A+=","+E[i].value}}}if(A==""){alert("You haven't selected any messages.");return false}var C=Global.SERVER_NAME+"/cgi-bin/ajax_processor.cgi";var D="op=update_message_status&status="+B;if(A!=""){D+="&msg_list="+A}var F=new Ajax.Request(C,{method:"post",parameters:D,onComplete:function(G){inboxRefresh("",1)}})}function deleteMessages(E){E=(E=="trash_msg")?E:"delete_msg";var A="";var C=$$(".messages");for(i=0;i<C.length;i++){if(C[i].checked==true){if(A==""){A=C[i].value}else{A+=","+C[i].value}}}if(A==""){alert("You haven't selected any messages to delete.");return false}var D;if(E=="trash_msg"){D=confirm("Are you sure you want to trash the selected messages?")}else{D=confirm("Are you sure you want to delete the selected messages?")}if(D==true){var B="op="+E+"&message_id="+A;new Ajax.Request("/cgi-bin/ajax_processor.cgi",{method:"post",postBody:B,onComplete:function(F){inboxRefresh("delete")}});return true}else{return false}}function blockMessages(B){var A=(B)?B:"";var D=$$(".messages");for(i=0;i<D.length;i++){if(D[i].checked==true){if(A==""){A=D[i].value}else{A+=","+D[i].value}}}if(A==""){alert("Please select a message to block that user.");return false}var E;if(B){E=confirm("Are you sure you want to block the sender of this message?")}else{E=confirm("Are you sure you want to block the senders of the selected messages?")}if(E==true){var C="op=block_entity_by_msg&message_id="+A;new Ajax.Request("/cgi-bin/ajax_processor.cgi",{method:"post",postBody:C,onComplete:function(F){if(_processAjaxResponse(F)){inboxRefresh()}else{var G=F.responseXML.getElementsByTagName("errmsg").item(0).firstChild.nodeValue;alert(G);inboxRefresh()}}});return true}else{return false}}function articleMessageLB(F,H,B,E,A){var C=Global.SERVER_NAME+"/profile/inbox/message_page.inc.html",D;if(!H||H=="NA"){H=getCookie("ENTITY_ID")}if(F=="article"&&H){D={entity_id:H,content_id:B,atype:E,from_page:"article"}}else{if(F=="write"&&H){D={entity_id:H,no_emails:1}}}if(A){D.link_url=A}D.type=F;D.id=H;var G=LightBox.create({onClose:function(){if(window.InboxContact){InboxContact.clearStored()}}});if(!inboxMauiMembersStorage){inboxMauiMembersStorage={}}if(!inboxTempStorage){inboxTempStorage={}}if(!inboxMauiMembersStorage){inboxMauiMembersStorage={}}G.id=inboxLightBoxId;G.style.backgroundColor="#ffffff";new Ajax.Updater(inboxLightBoxId,C,{method:"get",parameters:D,evalScripts:true})}function linkMessageLB(F,A,C){var D=C||{};var B=Global.SERVER_NAME+"/profile/inbox/message_page.inc.html";D.link_name=F;D.link_url=A||location.href;D=Object.extend({entity_id:getCookie("ENTITY_ID")||"",from_page:"link",subject:"Following link was shared: "+F,type:"link"},D);var E=LightBox.create({onClose:function(){if(window.InboxContact){InboxContact.clearStored()}}});if(!inboxMauiMembersStorage){inboxMauiMembersStorage=new Object()}if(!inboxTempStorage){inboxTempStorage=new Object()}if(!inboxMauiMembersStorage){inboxMauiMembersStorage=new Object()}E.id=inboxLightBoxId;E.style.backgroundColor="#ffffff";new Ajax.Updater(inboxLightBoxId,B,{method:"get",parameters:D,evalScripts:true,onComplete:function(){}})};var HelpBox={current:null,fileNameLeft:"help/help_bubble_left.png",fileNameRight:"help/help_bubble_right.png",fileMapLeft:{lb_tl:"help/help_bubble_left_tl.png",lb_tc:"help/help_bubble_t.png",lb_tr:"help/help_bubble_left_tr.png",lb_cl:"help/help_bubble_left_l.png",lb_cc:"help/help_bubble_c.png",lb_cr:"help/help_bubble_left_r.png",lb_bl:"help/help_bubble_left_bl.png",lb_bc:"help/help_bubble_b.png",lb_br:"help/help_bubble_left_br.png"},fileMapRight:{lb_tl:"help/help_bubble_right_tl.png",lb_tc:"help/help_bubble_t.png",lb_tr:"help/help_bubble_right_tr.png",lb_cl:"help/help_bubble_right_l.png",lb_cc:"help/help_bubble_c.png",lb_cr:"help/help_bubble_right_r.png",lb_bl:"help/help_bubble_right_bl.png",lb_bc:"help/help_bubble_b.png",lb_br:"help/help_bubble_right_br.png"},show:function(A,E,I){var G=this;A=$(A);E=$(E);var B=Object.extend({left:false,url:null,html:null},I||{});if(!A.helpBox){var C;if(B.left){C=DropShadow.build(G.fileNameRight,LightBox.loadingImg.src,G.fileMapRight);C.className="help_box help_left_bubble"}else{C=DropShadow.build(G.fileNameLeft,LightBox.loadingImg.src,G.fileMapLeft);C.className="help_box help_right_bubble"}var H=document.createElement("img");H.src=Global.STATIC_SERVER+"/images/x.png";H.className="alphaPNG";H.onclick=function(){HelpBox.hide()};Element.setStyle(H,{position:"absolute",top:"30px",right:B.left?"84px":"30px",cursor:"pointer"});C.style.position="absolute";C.appendChild(H);document.body.appendChild(C);loadAlphaPNG(C);var F=$(C).select(".lb_content")[0];if(B.html){Element.update(F,B.html)}G.resize(C,E);if(B.url){var D=new Ajax.Updater(F,B.url,{onComplete:function(){G.resize(C,E)}})}C.onHelpResize=function(){G.resize(C,E)};A.helpBox=C}else{A.helpBox.style.display="";G.resize(A.helpBox,E)}Event.observe(window,"resize",A.helpBox.onHelpResize);if(G.current&&G.current!=A.helpBox){G.hide()}G.current=A.helpBox},hide:function(){var A=this;if(A.current){Event.stopObserving(window,"resize",A.current.onHelpResize);A.current.style.display="none";A.current=null}},resize:function(B,A){var C=A.cumulativeOffset();B.style.position="absolute";if(Element.hasClassName(B,"help_left_bubble")){B.style.left=(C.left-B.offsetWidth+16)+"px"}else{C.left+=A.getWidth();B.style.left=(C.left-16)+"px"}B.style.top=(C.top-27+(A.getHeight()/2))+"px"}};var MTip=function(E,I){var G=this,C=$(E),H,F=function(J){var L=15,K=20,N=document.viewport.getDimensions(),T=document.viewport.getScrollOffsets(),M=N.height+T.top,O=N.width+T.left,Q=J.y+L+(H.offsetHeight||0),R=J.x+L+(H.offsetWidth||0),P=(R+K)>O?-1:0,S=(Q+K)>M?-1:0;H.setStyle({top:(J.y+L*(S||1)-(S?H.offsetHeight:0))+"px",left:(J.x+L*(P||1)-(P?H.offsetWidth:0))+"px"})},D=function(J){MTip.remove();MTip.current=G;if(!H){H=new Element("div",{className:"text_tip",style:"position: absolute; top:0; left:0"});H.innerHTML=I}H.setStyle({visibility:"hidden"});document.body.appendChild(H);F(J);H.setStyle({visibility:"visible"});C.observe("mousemove",A)},B=function(J){G.remove()},A=function(J){var K=Event.pointer(J);F(K)}.bindAsEventListener(G);G.remove=function(){if(C&&H&&H.up()){MTip.current=null;H.remove();C.stopObserving("mousemove",A)}};C.hover({onOver:D,onOut:B,delayIn:300});C._MarketTip=G};Object.extend(MTip,{current:null,remove:function(A){if(A){var B=A._MarketTip;if(B){B.remove()}}else{if(this.current){this.current.remove()}}}});Ajax.Responders.register({onComplete:function(){if(typeof MTip!="undefined"){MTip.remove()}}});String.prototype.parseColor=function(){var A="#";if(this.slice(0,4)=="rgb("){var C=this.slice(4,this.length-1).split(",");var B=0;do{A+=parseInt(C[B]).toColorPart()}while(++B<3)}else{if(this.slice(0,1)=="#"){if(this.length==4){for(var B=1;B<4;B++){A+=(this.charAt(B)+this.charAt(B)).toLowerCase()}}if(this.length==7){A=this.toLowerCase()}}}return(A.length==7?A:(arguments[0]||this))};Element.collectTextNodes=function(A){return $A($(A).childNodes).collect(function(B){return(B.nodeType==3?B.nodeValue:(B.hasChildNodes()?Element.collectTextNodes(B):""))}).flatten().join("")};Element.collectTextNodesIgnoreClass=function(A,B){return $A($(A).childNodes).collect(function(C){return(C.nodeType==3?C.nodeValue:((C.hasChildNodes()&&!Element.hasClassName(C,B))?Element.collectTextNodesIgnoreClass(C,B):""))}).flatten().join("")};Element.setContentZoom=function(A,B){A=$(A);A.setStyle({fontSize:(B/100)+"em"});if(Prototype.Browser.WebKit){window.scrollBy(0,0)}return A};Element.getInlineOpacity=function(A){return $(A).style.opacity||""};Element.forceRerendering=function(A){try{A=$(A);var C=document.createTextNode(" ");A.appendChild(C);A.removeChild(C)}catch(B){}};var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(A){return(-Math.cos(A*Math.PI)/2)+0.5},reverse:function(A){return 1-A},flicker:function(A){var A=((-Math.cos(A*Math.PI)/4)+0.75)+Math.random()/4;return A>1?1:A},wobble:function(A){return(-Math.cos(A*Math.PI*(9*A))/2)+0.5},pulse:function(B,A){return(-Math.cos((B*((A||5)-0.5)*2)*Math.PI)/2)+0.5},spring:function(A){return 1-(Math.cos(A*4.5*Math.PI)*Math.exp(-A*6))},none:function(A){return 0},full:function(A){return 1}},DefaultOptions:{duration:1,fps:100,sync:false,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(A){var B="position:relative";if(Prototype.Browser.IE){B+=";zoom:1"}A=$(A);$A(A.childNodes).each(function(C){if(C.nodeType==3){C.nodeValue.toArray().each(function(D){A.insertBefore(new Element("span",{style:B}).update(D==" "?String.fromCharCode(160):D),C)});Element.remove(C)}})},multiple:function(B,C){var E;if(((typeof B=="object")||Object.isFunction(B))&&(B.length)){E=B}else{E=$(B).childNodes}var A=Object.extend({speed:0.1,delay:0},arguments[2]||{});var D=A.delay;$A(E).each(function(G,F){new C(G,Object.extend(A,{delay:F*A.speed+D}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(B,C,A){B=$(B);C=(C||"appear").toLowerCase();return Effect[Effect.PAIRS[C][B.visible()?1:0]](B,Object.extend({queue:{position:"end",scope:(B.id||"global"),limit:1}},A||{}))}};Effect.DefaultOptions.transition=Effect.Transitions.sinoidal;Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[];this.interval=null},_each:function(A){this.effects._each(A)},add:function(B){var C=new Date().getTime();var A=Object.isString(B.options.queue)?B.options.queue:B.options.queue.position;switch(A){case"front":this.effects.findAll(function(D){return D.state=="idle"}).each(function(D){D.startOn+=B.finishOn;D.finishOn+=B.finishOn});break;case"with-last":C=this.effects.pluck("startOn").max()||C;break;case"end":C=this.effects.pluck("finishOn").max()||C;break}B.startOn+=C;B.finishOn+=C;if(!B.options.queue.limit||(this.effects.length<B.options.queue.limit)){this.effects.push(B)}if(!this.interval){this.interval=setInterval(this.loop.bind(this),15)}},remove:function(A){this.effects=this.effects.reject(function(B){return B==A});if(this.effects.length==0){clearInterval(this.interval);this.interval=null}},loop:function(){var C=new Date().getTime();for(var B=0,A=this.effects.length;B<A;B++){this.effects[B]&&this.effects[B].loop(C)}}});Effect.Queues={instances:$H(),get:function(A){if(!Object.isString(A)){return A}return this.instances.get(A)||this.instances.set(A,new Effect.ScopedQueue())}};Effect.Queue=Effect.Queues.get("global");Effect.Base=Class.create({position:null,start:function(A){if(A&&A.transition===false){A.transition=Effect.Transitions.linear}this.options=Object.extend(Object.extend({},Effect.DefaultOptions),A||{});this.currentFrame=0;this.state="idle";this.startOn=this.options.delay*1000;this.finishOn=this.startOn+(this.options.duration*1000);this.fromToDelta=this.options.to-this.options.from;this.totalTime=this.finishOn-this.startOn;this.totalFrames=this.options.fps*this.options.duration;this.render=(function(){function B(D,C){if(D.options[C+"Internal"]){D.options[C+"Internal"](D)}if(D.options[C]){D.options[C](D)}}return function(C){if(this.state==="idle"){this.state="running";B(this,"beforeSetup");if(this.setup){this.setup()}B(this,"afterSetup")}if(this.state==="running"){C=(this.options.transition(C)*this.fromToDelta)+this.options.from;this.position=C;B(this,"beforeUpdate");if(this.update){this.update(C)}B(this,"afterUpdate")}}})();this.event("beforeStart");if(!this.options.sync){Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).add(this)}},loop:function(C){if(C>=this.startOn){if(C>=this.finishOn){this.render(1);this.cancel();this.event("beforeFinish");if(this.finish){this.finish()}this.event("afterFinish");return }var B=(C-this.startOn)/this.totalTime,A=(B*this.totalFrames).round();if(A>this.currentFrame){this.render(B);this.currentFrame=A}}},cancel:function(){if(!this.options.sync){Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this)}this.state="finished"},event:function(A){if(this.options[A+"Internal"]){this.options[A+"Internal"](this)}if(this.options[A]){this.options[A](this)}},inspect:function(){var A=$H();for(property in this){if(!Object.isFunction(this[property])){A.set(property,this[property])}}return"#<Effect:"+A.inspect()+",options:"+$H(this.options).inspect()+">"}});Effect.Parallel=Class.create(Effect.Base,{initialize:function(A){this.effects=A||[];this.start(arguments[1])},update:function(A){this.effects.invoke("render",A)},finish:function(A){this.effects.each(function(B){B.render(1);B.cancel();B.event("beforeFinish");if(B.finish){B.finish(A)}B.event("afterFinish")})}});Effect.Tween=Class.create(Effect.Base,{initialize:function(C,F,E){C=Object.isString(C)?$(C):C;var B=$A(arguments),D=B.last(),A=B.length==5?B[3]:null;this.method=Object.isFunction(D)?D.bind(C):Object.isFunction(C[D])?C[D].bind(C):function(G){C[D]=G};this.start(Object.extend({from:F,to:E},A||{}))},update:function(A){this.method(A)}});Effect.Event=Class.create(Effect.Base,{initialize:function(){this.start(Object.extend({duration:0},arguments[0]||{}))},update:Prototype.emptyFunction});Effect.Opacity=Class.create(Effect.Base,{initialize:function(B){this.element=$(B);if(!this.element){throw (Effect._elementDoesNotExistError)}if(Prototype.Browser.IE&&(!this.element.currentStyle.hasLayout)){this.element.setStyle({zoom:1})}var A=Object.extend({from:this.element.getOpacity()||0,to:1},arguments[1]||{});this.start(A)},update:function(A){this.element.setOpacity(A)}});Effect.Move=Class.create(Effect.Base,{initialize:function(B){this.element=$(B);if(!this.element){throw (Effect._elementDoesNotExistError)}var A=Object.extend({x:0,y:0,mode:"relative"},arguments[1]||{});this.start(A)},setup:function(){this.element.makePositioned();this.originalLeft=parseFloat(this.element.getStyle("left")||"0");this.originalTop=parseFloat(this.element.getStyle("top")||"0");if(this.options.mode=="absolute"){this.options.x=this.options.x-this.originalLeft;this.options.y=this.options.y-this.originalTop}},update:function(A){this.element.setStyle({left:(this.options.x*A+this.originalLeft).round()+"px",top:(this.options.y*A+this.originalTop).round()+"px"})}});Effect.MoveBy=function(B,A,C){return new Effect.Move(B,Object.extend({x:C,y:A},arguments[3]||{}))};Effect.Scale=Class.create(Effect.Base,{initialize:function(B,C){this.element=$(B);if(!this.element){throw (Effect._elementDoesNotExistError)}var A=Object.extend({scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:100,scaleTo:C},arguments[2]||{});this.start(A)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.elementPositioning=this.element.getStyle("position");this.originalStyle={};["top","left","width","height","fontSize"].each(function(B){this.originalStyle[B]=this.element.style[B]}.bind(this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var A=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(B){if(A.indexOf(B)>0){this.fontSize=parseFloat(A);this.fontSizeType=B}}.bind(this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;if(this.options.scaleMode=="box"){this.dims=[this.element.offsetHeight,this.element.offsetWidth]}if(/^content/.test(this.options.scaleMode)){this.dims=[this.element.scrollHeight,this.element.scrollWidth]}if(!this.dims){this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth]}},update:function(A){var B=(this.options.scaleFrom/100)+(this.factor*A);if(this.options.scaleContent&&this.fontSize){this.element.setStyle({fontSize:this.fontSize*B+this.fontSizeType})}this.setDimensions(this.dims[0]*B,this.dims[1]*B)},finish:function(A){if(this.restoreAfterFinish){this.element.setStyle(this.originalStyle)}},setDimensions:function(A,D){var E={};if(this.options.scaleX){E.width=D.round()+"px"}if(this.options.scaleY){E.height=A.round()+"px"}if(this.options.scaleFromCenter){var C=(A-this.dims[0])/2;var B=(D-this.dims[1])/2;if(this.elementPositioning=="absolute"){if(this.options.scaleY){E.top=this.originalTop-C+"px"}if(this.options.scaleX){E.left=this.originalLeft-B+"px"}}else{if(this.options.scaleY){E.top=-C+"px"}if(this.options.scaleX){E.left=-B+"px"}}}this.element.setStyle(E)}});Effect.Highlight=Class.create(Effect.Base,{initialize:function(B){this.element=$(B);if(!this.element){throw (Effect._elementDoesNotExistError)}var A=Object.extend({startcolor:"#ffff99"},arguments[1]||{});this.start(A)},setup:function(){if(this.element.getStyle("display")=="none"){this.cancel();return }this.oldStyle={};if(!this.options.keepBackgroundImage){this.oldStyle.backgroundImage=this.element.getStyle("background-image");this.element.setStyle({backgroundImage:"none"})}if(!this.options.endcolor){this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff")}if(!this.options.restorecolor){this.options.restorecolor=this.element.getStyle("background-color")}this._base=$R(0,2).map(function(A){return parseInt(this.options.startcolor.slice(A*2+1,A*2+3),16)}.bind(this));this._delta=$R(0,2).map(function(A){return parseInt(this.options.endcolor.slice(A*2+1,A*2+3),16)-this._base[A]}.bind(this))},update:function(A){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(B,C,D){return B+((this._base[D]+(this._delta[D]*A)).round().toColorPart())}.bind(this))})},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}});Effect.ScrollTo=function(C){var B=arguments[1]||{},A=document.viewport.getScrollOffsets(),D=$(C).cumulativeOffset();if(B.offset){D[1]+=B.offset}return new Effect.Tween(null,A.top,D[1],B,function(E){scrollTo(A.left,E.round())})};Effect.Fade=function(C){C=$(C);var A=C.getInlineOpacity();var B=Object.extend({from:C.getOpacity()||1,to:0,afterFinishInternal:function(D){if(D.options.to!=0){return }D.element.hide().setStyle({opacity:A})}},arguments[1]||{});return new Effect.Opacity(C,B)};Effect.Appear=function(B){B=$(B);var A=Object.extend({from:(B.getStyle("display")=="none"?0:B.getOpacity()||0),to:1,afterFinishInternal:function(C){C.element.forceRerendering()},beforeSetup:function(C){C.element.setOpacity(C.options.from).show()}},arguments[1]||{});return new Effect.Opacity(B,A)};Effect.Puff=function(B){B=$(B);var A={opacity:B.getInlineOpacity(),position:B.getStyle("position"),top:B.style.top,left:B.style.left,width:B.style.width,height:B.style.height};return new Effect.Parallel([new Effect.Scale(B,200,{sync:true,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true}),new Effect.Opacity(B,{sync:true,to:0})],Object.extend({duration:1,beforeSetupInternal:function(C){Position.absolutize(C.effects[0].element)},afterFinishInternal:function(C){C.effects[0].element.hide().setStyle(A)}},arguments[1]||{}))};Effect.BlindUp=function(A){A=$(A);A.makeClipping();return new Effect.Scale(A,0,Object.extend({scaleContent:false,scaleX:false,restoreAfterFinish:true,afterFinishInternal:function(B){B.element.hide().undoClipping()}},arguments[1]||{}))};Effect.BlindDown=function(B){B=$(B);var A=B.getDimensions();return new Effect.Scale(B,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:A.height,originalWidth:A.width},restoreAfterFinish:true,afterSetup:function(C){C.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(C){C.element.undoClipping()}},arguments[1]||{}))};Effect.SwitchOff=function(B){B=$(B);var A=B.getInlineOpacity();return new Effect.Appear(B,Object.extend({duration:0.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(C){new Effect.Scale(C.element,1,{duration:0.3,scaleFromCenter:true,scaleX:false,scaleContent:false,restoreAfterFinish:true,beforeSetup:function(D){D.element.makePositioned().makeClipping()},afterFinishInternal:function(D){D.element.hide().undoClipping().undoPositioned().setStyle({opacity:A})}})}},arguments[1]||{}))};Effect.DropOut=function(B){B=$(B);var A={top:B.getStyle("top"),left:B.getStyle("left"),opacity:B.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(B,{x:0,y:100,sync:true}),new Effect.Opacity(B,{sync:true,to:0})],Object.extend({duration:0.5,beforeSetup:function(C){C.effects[0].element.makePositioned()},afterFinishInternal:function(C){C.effects[0].element.hide().undoPositioned().setStyle(A)}},arguments[1]||{}))};Effect.Shake=function(D){D=$(D);var B=Object.extend({distance:20,duration:0.5},arguments[1]||{});var E=parseFloat(B.distance);var C=parseFloat(B.duration)/10;var A={top:D.getStyle("top"),left:D.getStyle("left")};return new Effect.Move(D,{x:E,y:0,duration:C,afterFinishInternal:function(F){new Effect.Move(F.element,{x:-E*2,y:0,duration:C*2,afterFinishInternal:function(G){new Effect.Move(G.element,{x:E*2,y:0,duration:C*2,afterFinishInternal:function(H){new Effect.Move(H.element,{x:-E*2,y:0,duration:C*2,afterFinishInternal:function(I){new Effect.Move(I.element,{x:E*2,y:0,duration:C*2,afterFinishInternal:function(J){new Effect.Move(J.element,{x:-E,y:0,duration:C,afterFinishInternal:function(K){K.element.undoPositioned().setStyle(A)}})}})}})}})}})}})};Effect.SlideDown=function(C){C=$(C).cleanWhitespace();var A=C.down().getStyle("bottom");var B=C.getDimensions();return new Effect.Scale(C,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:B.height,originalWidth:B.width},restoreAfterFinish:true,afterSetup:function(D){D.element.makePositioned();D.element.down().makePositioned();if(window.opera){D.element.setStyle({top:""})}D.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(D){D.element.down().setStyle({bottom:(D.dims[0]-D.element.clientHeight)+"px"})},afterFinishInternal:function(D){D.element.undoClipping().undoPositioned();D.element.down().undoPositioned().setStyle({bottom:A})}},arguments[1]||{}))};Effect.SlideUp=function(C){C=$(C).cleanWhitespace();var A=C.down().getStyle("bottom");var B=C.getDimensions();return new Effect.Scale(C,window.opera?0:1,Object.extend({scaleContent:false,scaleX:false,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:B.height,originalWidth:B.width},restoreAfterFinish:true,afterSetup:function(D){D.element.makePositioned();D.element.down().makePositioned();if(window.opera){D.element.setStyle({top:""})}D.element.makeClipping().show()},afterUpdateInternal:function(D){D.element.down().setStyle({bottom:(D.dims[0]-D.element.clientHeight)+"px"})},afterFinishInternal:function(D){D.element.hide().undoClipping().undoPositioned();D.element.down().undoPositioned().setStyle({bottom:A})}},arguments[1]||{}))};Effect.Squish=function(A){return new Effect.Scale(A,window.opera?1:0,{restoreAfterFinish:true,beforeSetup:function(B){B.element.makeClipping()},afterFinishInternal:function(B){B.element.hide().undoClipping()}})};Effect.Grow=function(C){C=$(C);var B=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},arguments[1]||{});var A={top:C.style.top,left:C.style.left,height:C.style.height,width:C.style.width,opacity:C.getInlineOpacity()};var G=C.getDimensions();var H,F;var E,D;switch(B.direction){case"top-left":H=F=E=D=0;break;case"top-right":H=G.width;F=D=0;E=-G.width;break;case"bottom-left":H=E=0;F=G.height;D=-G.height;break;case"bottom-right":H=G.width;F=G.height;E=-G.width;D=-G.height;break;case"center":H=G.width/2;F=G.height/2;E=-G.width/2;D=-G.height/2;break}return new Effect.Move(C,{x:H,y:F,duration:0.01,beforeSetup:function(I){I.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(I){new Effect.Parallel([new Effect.Opacity(I.element,{sync:true,to:1,from:0,transition:B.opacityTransition}),new Effect.Move(I.element,{x:E,y:D,sync:true,transition:B.moveTransition}),new Effect.Scale(I.element,100,{scaleMode:{originalHeight:G.height,originalWidth:G.width},sync:true,scaleFrom:window.opera?1:0,transition:B.scaleTransition,restoreAfterFinish:true})],Object.extend({beforeSetup:function(J){J.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(J){J.effects[0].element.undoClipping().undoPositioned().setStyle(A)}},B))}})};Effect.Shrink=function(C){C=$(C);var B=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},arguments[1]||{});var A={top:C.style.top,left:C.style.left,height:C.style.height,width:C.style.width,opacity:C.getInlineOpacity()};var F=C.getDimensions();var E,D;switch(B.direction){case"top-left":E=D=0;break;case"top-right":E=F.width;D=0;break;case"bottom-left":E=0;D=F.height;break;case"bottom-right":E=F.width;D=F.height;break;case"center":E=F.width/2;D=F.height/2;break}return new Effect.Parallel([new Effect.Opacity(C,{sync:true,to:0,from:1,transition:B.opacityTransition}),new Effect.Scale(C,window.opera?1:0,{sync:true,transition:B.scaleTransition,restoreAfterFinish:true}),new Effect.Move(C,{x:E,y:D,sync:true,transition:B.moveTransition})],Object.extend({beforeStartInternal:function(G){G.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(G){G.effects[0].element.hide().undoClipping().undoPositioned().setStyle(A)}},B))};Effect.Pulsate=function(C){C=$(C);var B=arguments[1]||{},A=C.getInlineOpacity(),E=B.transition||Effect.Transitions.linear,D=function(F){return 1-E((-Math.cos((F*(B.pulses||5)*2)*Math.PI)/2)+0.5)};return new Effect.Opacity(C,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(F){F.element.setStyle({opacity:A})}},B),{transition:D}))};Effect.Fold=function(B){B=$(B);var A={top:B.style.top,left:B.style.left,width:B.style.width,height:B.style.height};B.makeClipping();return new Effect.Scale(B,5,Object.extend({scaleContent:false,scaleX:false,afterFinishInternal:function(C){new Effect.Scale(B,1,{scaleContent:false,scaleY:false,afterFinishInternal:function(D){D.element.hide().undoClipping().setStyle(A)}})}},arguments[1]||{}))};Effect.Morph=Class.create(Effect.Base,{initialize:function(C){this.element=$(C);if(!this.element){throw (Effect._elementDoesNotExistError)}var A=Object.extend({style:{}},arguments[1]||{});if(!Object.isString(A.style)){this.style=$H(A.style)}else{if(A.style.include(":")){this.style=A.style.parseStyle()}else{this.element.addClassName(A.style);this.style=$H(this.element.getStyles());this.element.removeClassName(A.style);var B=this.element.getStyles();this.style=this.style.reject(function(D){return D.value==B[D.key]});A.afterFinishInternal=function(D){D.element.addClassName(D.options.style);D.transforms.each(function(E){D.element.style[E.style]=""})}}}this.start(A)},setup:function(){function A(B){if(!B||["rgba(0, 0, 0, 0)","transparent"].include(B)){B="#ffffff"}B=B.parseColor();return $R(0,2).map(function(C){return parseInt(B.slice(C*2+1,C*2+3),16)})}this.transforms=this.style.map(function(G){var F=G[0],E=G[1],D=null;if(E.parseColor("#zzzzzz")!="#zzzzzz"){E=E.parseColor();D="color"}else{if(F=="opacity"){E=parseFloat(E);if(Prototype.Browser.IE&&(!this.element.currentStyle.hasLayout)){this.element.setStyle({zoom:1})}}else{if(Element.CSS_LENGTH.test(E)){var C=E.match(/^([\+\-]?[0-9\.]+)(.*)$/);E=parseFloat(C[1]);D=(C.length==3)?C[2]:null}}}var B=this.element.getStyle(F);return{style:F.camelize(),originalValue:D=="color"?A(B):parseFloat(B||0),targetValue:D=="color"?A(E):E,unit:D}}.bind(this)).reject(function(B){return((B.originalValue==B.targetValue)||(B.unit!="color"&&(isNaN(B.originalValue)||isNaN(B.targetValue))))})},update:function(A){var D={},B,C=this.transforms.length;while(C--){D[(B=this.transforms[C]).style]=B.unit=="color"?"#"+(Math.round(B.originalValue[0]+(B.targetValue[0]-B.originalValue[0])*A)).toColorPart()+(Math.round(B.originalValue[1]+(B.targetValue[1]-B.originalValue[1])*A)).toColorPart()+(Math.round(B.originalValue[2]+(B.targetValue[2]-B.originalValue[2])*A)).toColorPart():(B.originalValue+(B.targetValue-B.originalValue)*A).toFixed(3)+(B.unit===null?"":B.unit)}this.element.setStyle(D,true)}});Effect.Transform=Class.create({initialize:function(A){this.tracks=[];this.options=arguments[1]||{};this.addTracks(A)},addTracks:function(A){A.each(function(B){B=$H(B);var C=B.values().first();this.tracks.push($H({ids:B.keys().first(),effect:Effect.Morph,options:{style:C}}))}.bind(this));return this},play:function(){return new Effect.Parallel(this.tracks.map(function(A){var D=A.get("ids"),C=A.get("effect"),B=A.get("options");var E=[$(D)||$$(D)].flatten();return E.map(function(F){return new C(F,Object.extend({sync:true},B))})}).flatten(),this.options)}});Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex");Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/;String.__parseStyleElement=document.createElement("div");String.prototype.parseStyle=function(){var B,A=$H();if(Prototype.Browser.WebKit){B=new Element("div",{style:this}).style}else{String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>';B=String.__parseStyleElement.childNodes[0].style}Element.CSS_PROPERTIES.each(function(C){if(B[C]){A.set(C,B[C])}});if(Prototype.Browser.IE&&this.include("opacity")){A.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1])}return A};if(document.defaultView&&document.defaultView.getComputedStyle){Element.getStyles=function(B){var A=document.defaultView.getComputedStyle($(B),null);return Element.CSS_PROPERTIES.inject({},function(C,D){C[D]=A[D];return C})}}else{Element.getStyles=function(B){B=$(B);var A=B.currentStyle,C;C=Element.CSS_PROPERTIES.inject({},function(D,E){D[E]=A[E];return D});if(!C.opacity){C.opacity=B.getOpacity()}return C}}Effect.Methods={morph:function(A,B){A=$(A);new Effect.Morph(A,Object.extend({style:B},arguments[2]||{}));return A},visualEffect:function(C,E,B){C=$(C);var D=E.dasherize().camelize(),A=D.charAt(0).toUpperCase()+D.substring(1);new Effect[A](C,B);return C},highlight:function(B,A){B=$(B);new Effect.Highlight(B,A);return B}};$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(A){Effect.Methods[A]=function(C,B){C=$(C);Effect[A.charAt(0).toUpperCase()+A.substring(1)](C,B);return C}});$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(A){Effect.Methods[A]=Element[A]});Element.addMethods(Effect.Methods);Effect.SlideIn=function(C){C=$(C);C.cleanWhitespace();var A=$(C.firstChild).getStyle("right");var B=C.getDimensions();return new Effect.Scale(C,100,Object.extend({scaleContent:false,scaleY:false,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:B.height,originalWidth:B.width},restoreAfterFinish:true,afterSetup:function(D){D.element.makePositioned();D.element.firstChild.makePositioned();if(window.opera){D.element.setStyle({right:""})}D.element.makeClipping();D.element.setStyle({width:"0px"});D.element.show()},afterUpdateInternal:function(D){D.element.firstChild.setStyle({right:(D.dims[1]-D.element.clientWidth)+"px"})},afterFinishInternal:function(D){D.element.undoClipping();if(/MSIE/.test(navigator.userAgent)){D.element.undoPositioned();D.element.firstChild.undoPositioned()}else{D.element.firstChild.undoPositioned();D.element.undoPositioned()}D.element.firstChild.setStyle({right:A})}},arguments[1]||{}))};Effect.SlideOut=function(B){B=$(B);B.cleanWhitespace();var A=$(B.firstChild).getStyle("left");return new Effect.Scale(B,0,Object.extend({scaleContent:false,scaleY:false,scaleMode:"box",scaleFrom:100,restoreAfterFinish:false,beforeStartInternal:function(C){C.element.makePositioned();C.element.firstChild.makePositioned();if(window.opera){C.element.setStyle({left:""})}C.element.makeClipping();C.element.show()},afterUpdateInternal:function(C){C.element.firstChild.setStyle({left:(C.dims[1]-C.element.clientWidth)+"px"})},afterFinishInternal:function(C){C.element.hide();C.element.undoClipping();C.element.firstChild.undoPositioned();C.element.undoPositioned();C.element.setStyle({bottom:A})}},arguments[1]||{}))};Object.extend(Global.Message.msgList,{INTERNAL_ERROR:"INTERNAL ERROR",DROP_AREA:"Please select a piece of media to swap.",PAGE_LOADING:"Please wait a second, the page is still loading.",FORUM_NAME:"Please enter a name for your forum",ARE_YOU_SURE:"Are you sure?",UNKNOWN_ERROR:"There was an unknown error, please try again later",FOLDER_TAKEN:"There is already a folder with that same name.",FOLDER_NAME:"Please enter a name for your folder.",MEDIA_ADDED:"Your media has been added. Videos may not be available until processing completes.",FORUM_TAKEN:"There is already a forum with the same name.",URL_TAKEN:"This URL is already being used. Please enter a new URL.",NO_MEDIA_SELECTED:"Currently there is no media selected",CREATE_FOLDER_ERROR:"There was an error creating this folder"});var StarRating=(function(){function C(G,F,H){G.down(".sliding_star_img").setStyle({top:"-14px"});G.down(".sliding_star").setStyle({width:(F*15)+"px"});G.down(".rating_quote").update(H[F]||"");G.down(".star_pane").setStyle({left:(F*15)+"px",width:((5-F)*15)+"px"})}function A(G,I){var H=G.down(".sliding_star"),F=parseInt(H.readAttribute("orig_rating"),10);G.down(".sliding_star_img").setStyle({top:"-14px"});H.setStyle({width:(F*15)+"px"});G.down(".rating_quote").update(I[0]||"");G.down(".star_pane").setStyle({left:(F*15)+"px",width:((5-F)*15)+"px"})}function B(H,G,K,F){var J=this,L="RATE_"+G+"_"+K;if(getCookie(L)){alert("You have already rated this media today.")}else{var I=new Date();I.setHours(I.getHours()+24);setCookie(L,H,I,"/",Global.DOMAIN_NAME);if(F&&window[F]){window[F](H)}}}function E(F){return parseInt(F.readAttribute("rating_index"),10)}var D={init:function(H,F){H=$(H);if(!H){return }var G=F||{},I=G.quotes||[];H.select(".rating_star").each(function(J){J.observe("mouseover",function(){C(H,E(J),I)});J.observe("mouseout",function(){A(H,I)});J.observe("click",function(){(function(M,L,N,K){if(!loginCheck({onLogin:arguments.callee,viewed_entity_id:L,login_req:1})){return }StarRating.click(M,L,N,K)})(E(J),G.entityId,G.mediaId,G.ratingClick)});J.setStyle({height:"30px",width:"15px",position:"absolute",fontSize:0,lineHeight:0,backgroundColor:"#000000",opacity:0.01})})},click:B};return D})();Encoder={EncodeType:"entity",isEmpty:function(A){if(A){return((A===null)||A.length==0||/^\s+$/.test(A))}else{return true}},HTML2Numerical:function(C){var B=new Array("&nbsp;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&shy;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&agrave;","&aacute;","&acirc;","&atilde;","&Auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&Ouml;","&times;","&oslash;","&ugrave;","&uacute;","&ucirc;","&Uuml;","&yacute;","&thorn;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&Oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&quot;","&amp;","&lt;","&gt;","&oelig;","&oelig;","&scaron;","&scaron;","&yuml;","&circ;","&tilde;","&ensp;","&emsp;","&thinsp;","&zwnj;","&zwj;","&lrm;","&rlm;","&ndash;","&mdash;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&dagger;","&dagger;","&permil;","&lsaquo;","&rsaquo;","&euro;","&fnof;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigmaf;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&thetasym;","&upsih;","&piv;","&bull;","&hellip;","&prime;","&prime;","&oline;","&frasl;","&weierp;","&image;","&real;","&trade;","&alefsym;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&crarr;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&minus;","&lowast;","&radic;","&prop;","&infin;","&ang;","&and;","&or;","&cap;","&cup;","&int;","&there4;","&sim;","&cong;","&asymp;","&ne;","&equiv;","&le;","&ge;","&sub;","&sup;","&nsub;","&sube;","&supe;","&oplus;","&otimes;","&perp;","&sdot;","&lceil;","&rceil;","&lfloor;","&rfloor;","&lang;","&rang;","&loz;","&spades;","&clubs;","&hearts;","&diams;");var A=new Array("&#160;","&#161;","&#162;","&#163;","&#164;","&#165;","&#166;","&#167;","&#168;","&#169;","&#170;","&#171;","&#172;","&#173;","&#174;","&#175;","&#176;","&#177;","&#178;","&#179;","&#180;","&#181;","&#182;","&#183;","&#184;","&#185;","&#186;","&#187;","&#188;","&#189;","&#190;","&#191;","&#192;","&#193;","&#194;","&#195;","&#196;","&#197;","&#198;","&#199;","&#200;","&#201;","&#202;","&#203;","&#204;","&#205;","&#206;","&#207;","&#208;","&#209;","&#210;","&#211;","&#212;","&#213;","&#214;","&#215;","&#216;","&#217;","&#218;","&#219;","&#220;","&#221;","&#222;","&#223;","&#224;","&#225;","&#226;","&#227;","&#228;","&#229;","&#230;","&#231;","&#232;","&#233;","&#234;","&#235;","&#236;","&#237;","&#238;","&#239;","&#240;","&#241;","&#242;","&#243;","&#244;","&#245;","&#246;","&#247;","&#248;","&#249;","&#250;","&#251;","&#252;","&#253;","&#254;","&#255;","&#34;","&#38;","&#60;","&#62;","&#338;","&#339;","&#352;","&#353;","&#376;","&#710;","&#732;","&#8194;","&#8195;","&#8201;","&#8204;","&#8205;","&#8206;","&#8207;","&#8211;","&#8212;","&#8216;","&#8217;","&#8218;","&#8220;","&#8221;","&#8222;","&#8224;","&#8225;","&#8240;","&#8249;","&#8250;","&#8364;","&#402;","&#913;","&#914;","&#915;","&#916;","&#917;","&#918;","&#919;","&#920;","&#921;","&#922;","&#923;","&#924;","&#925;","&#926;","&#927;","&#928;","&#929;","&#931;","&#932;","&#933;","&#934;","&#935;","&#936;","&#937;","&#945;","&#946;","&#947;","&#948;","&#949;","&#950;","&#951;","&#952;","&#953;","&#954;","&#955;","&#956;","&#957;","&#958;","&#959;","&#960;","&#961;","&#962;","&#963;","&#964;","&#965;","&#966;","&#967;","&#968;","&#969;","&#977;","&#978;","&#982;","&#8226;","&#8230;","&#8242;","&#8243;","&#8254;","&#8260;","&#8472;","&#8465;","&#8476;","&#8482;","&#8501;","&#8592;","&#8593;","&#8594;","&#8595;","&#8596;","&#8629;","&#8656;","&#8657;","&#8658;","&#8659;","&#8660;","&#8704;","&#8706;","&#8707;","&#8709;","&#8711;","&#8712;","&#8713;","&#8715;","&#8719;","&#8721;","&#8722;","&#8727;","&#8730;","&#8733;","&#8734;","&#8736;","&#8743;","&#8744;","&#8745;","&#8746;","&#8747;","&#8756;","&#8764;","&#8773;","&#8776;","&#8800;","&#8801;","&#8804;","&#8805;","&#8834;","&#8835;","&#8836;","&#8838;","&#8839;","&#8853;","&#8855;","&#8869;","&#8901;","&#8968;","&#8969;","&#8970;","&#8971;","&#9001;","&#9002;","&#9674;","&#9824;","&#9827;","&#9829;","&#9830;");return this.swapArrayVals(C,B,A)},NumericalToHTML:function(C){var B=new Array("&#160;","&#161;","&#162;","&#163;","&#164;","&#165;","&#166;","&#167;","&#168;","&#169;","&#170;","&#171;","&#172;","&#173;","&#174;","&#175;","&#176;","&#177;","&#178;","&#179;","&#180;","&#181;","&#182;","&#183;","&#184;","&#185;","&#186;","&#187;","&#188;","&#189;","&#190;","&#191;","&#192;","&#193;","&#194;","&#195;","&#196;","&#197;","&#198;","&#199;","&#200;","&#201;","&#202;","&#203;","&#204;","&#205;","&#206;","&#207;","&#208;","&#209;","&#210;","&#211;","&#212;","&#213;","&#214;","&#215;","&#216;","&#217;","&#218;","&#219;","&#220;","&#221;","&#222;","&#223;","&#224;","&#225;","&#226;","&#227;","&#228;","&#229;","&#230;","&#231;","&#232;","&#233;","&#234;","&#235;","&#236;","&#237;","&#238;","&#239;","&#240;","&#241;","&#242;","&#243;","&#244;","&#245;","&#246;","&#247;","&#248;","&#249;","&#250;","&#251;","&#252;","&#253;","&#254;","&#255;","&#34;","&#38;","&#60;","&#62;","&#338;","&#339;","&#352;","&#353;","&#376;","&#710;","&#732;","&#8194;","&#8195;","&#8201;","&#8204;","&#8205;","&#8206;","&#8207;","&#8211;","&#8212;","&#8216;","&#8217;","&#8218;","&#8220;","&#8221;","&#8222;","&#8224;","&#8225;","&#8240;","&#8249;","&#8250;","&#8364;","&#402;","&#913;","&#914;","&#915;","&#916;","&#917;","&#918;","&#919;","&#920;","&#921;","&#922;","&#923;","&#924;","&#925;","&#926;","&#927;","&#928;","&#929;","&#931;","&#932;","&#933;","&#934;","&#935;","&#936;","&#937;","&#945;","&#946;","&#947;","&#948;","&#949;","&#950;","&#951;","&#952;","&#953;","&#954;","&#955;","&#956;","&#957;","&#958;","&#959;","&#960;","&#961;","&#962;","&#963;","&#964;","&#965;","&#966;","&#967;","&#968;","&#969;","&#977;","&#978;","&#982;","&#8226;","&#8230;","&#8242;","&#8243;","&#8254;","&#8260;","&#8472;","&#8465;","&#8476;","&#8482;","&#8501;","&#8592;","&#8593;","&#8594;","&#8595;","&#8596;","&#8629;","&#8656;","&#8657;","&#8658;","&#8659;","&#8660;","&#8704;","&#8706;","&#8707;","&#8709;","&#8711;","&#8712;","&#8713;","&#8715;","&#8719;","&#8721;","&#8722;","&#8727;","&#8730;","&#8733;","&#8734;","&#8736;","&#8743;","&#8744;","&#8745;","&#8746;","&#8747;","&#8756;","&#8764;","&#8773;","&#8776;","&#8800;","&#8801;","&#8804;","&#8805;","&#8834;","&#8835;","&#8836;","&#8838;","&#8839;","&#8853;","&#8855;","&#8869;","&#8901;","&#8968;","&#8969;","&#8970;","&#8971;","&#9001;","&#9002;","&#9674;","&#9824;","&#9827;","&#9829;","&#9830;");var A=new Array("&nbsp;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&shy;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&agrave;","&aacute;","&acirc;","&atilde;","&Auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&Ouml;","&times;","&oslash;","&ugrave;","&uacute;","&ucirc;","&Uuml;","&yacute;","&thorn;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&Oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&quot;","&amp;","&lt;","&gt;","&oelig;","&oelig;","&scaron;","&scaron;","&yuml;","&circ;","&tilde;","&ensp;","&emsp;","&thinsp;","&zwnj;","&zwj;","&lrm;","&rlm;","&ndash;","&mdash;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&dagger;","&dagger;","&permil;","&lsaquo;","&rsaquo;","&euro;","&fnof;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigmaf;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&thetasym;","&upsih;","&piv;","&bull;","&hellip;","&prime;","&prime;","&oline;","&frasl;","&weierp;","&image;","&real;","&trade;","&alefsym;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&crarr;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&minus;","&lowast;","&radic;","&prop;","&infin;","&ang;","&and;","&or;","&cap;","&cup;","&int;","&there4;","&sim;","&cong;","&asymp;","&ne;","&equiv;","&le;","&ge;","&sub;","&sup;","&nsub;","&sube;","&supe;","&oplus;","&otimes;","&perp;","&sdot;","&lceil;","&rceil;","&lfloor;","&rfloor;","&lang;","&rang;","&loz;","&spades;","&clubs;","&hearts;","&diams;");return this.swapArrayVals(C,B,A)},numEncode:function(B){if(this.isEmpty(B)){return""}var C="";for(var A=0;A<B.length;A++){var D=B.charAt(A);if(D<" "||D>"~"){D="&#"+D.charCodeAt()+";"}C+=D}return C},htmlDecode:function(C){var E,B,D=C;if(this.isEmpty(D)){return""}D=this.HTML2Numerical(D);arr=D.match(/&#[0-9]{1,5};/g);if(arr!=null){for(var A=0;A<arr.length;A++){B=arr[A];E=B.substring(2,B.length-1);if(E>=-32768&&E<=65535){D=D.replace(B,String.fromCharCode(E))}else{D=D.replace(B,"")}}}return D},htmlEncode:function(A,B){if(this.isEmpty(A)){return""}B=B|false;if(B){if(this.EncodeType=="numerical"){A=A.replace(/&/g,"&#38;")}else{A=A.replace(/&/g,"&amp;")}}A=this.XSSEncode(A,false);if(this.EncodeType=="numerical"||!B){A=this.HTML2Numerical(A)}A=this.numEncode(A);if(!B){A=A.replace(/&#/g,"##AMPHASH##");if(this.EncodeType=="numerical"){A=A.replace(/&/g,"&#38;")}else{A=A.replace(/&/g,"&amp;")}A=A.replace(/##AMPHASH##/g,"&#")}A=A.replace(/&#\d*([^\d;]|$)/g,"$1");if(!B){A=this.correctEncoding(A)}if(this.EncodeType=="entity"){A=this.NumericalToHTML(A)}return A},XSSEncode:function(B,A){if(!this.isEmpty(B)){A=A||true;if(A){B=B.replace(/\'/g,"&#39;");B=B.replace(/\"/g,"&quot;");B=B.replace(/</g,"&lt;");B=B.replace(/>/g,"&gt;")}else{B=B.replace(/\'/g,"&#39;");B=B.replace(/\"/g,"&#34;");B=B.replace(/</g,"&#60;");B=B.replace(/>/g,"&#62;")}return B}else{return""}},hasEncoded:function(A){if(/&#[0-9]{1,5};/g.test(A)){return true}else{if(/&[A-Z]{2,6};/gi.test(A)){return true}else{return false}}},stripUnicode:function(A){return A.replace(/[^\x20-\x7E]/g,"")},correctEncoding:function(A){return A.replace(/(&amp;)(amp;)+/,"$1")},swapArrayVals:function(F,C,B){if(this.isEmpty(F)){return""}var E;if(C&&B){if(C.length==B.length){for(var A=0,D=C.length;A<D;A++){E=new RegExp(C[A],"g");F=F.replace(E,B[A])}}}return F},inArray:function(D,B){for(var C=0,A=B.length;C<A;C++){if(B[C]===D){return C}}return -1}};var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(C){var A="";var J,H,F,I,G,E,D;var B=0;C=Base64._utf8_encode(C);while(B<C.length){J=C.charCodeAt(B++);H=C.charCodeAt(B++);F=C.charCodeAt(B++);I=J>>2;G=((J&3)<<4)|(H>>4);E=((H&15)<<2)|(F>>6);D=F&63;if(isNaN(H)){E=D=64}else{if(isNaN(F)){D=64}}A=A+this._keyStr.charAt(I)+this._keyStr.charAt(G)+this._keyStr.charAt(E)+this._keyStr.charAt(D)}return A},decode:function(C){var A="";var J,H,F;var I,G,E,D;var B=0;C=C.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(B<C.length){I=this._keyStr.indexOf(C.charAt(B++));G=this._keyStr.indexOf(C.charAt(B++));E=this._keyStr.indexOf(C.charAt(B++));D=this._keyStr.indexOf(C.charAt(B++));J=(I<<2)|(G>>4);H=((G&15)<<4)|(E>>2);F=((E&3)<<6)|D;A=A+String.fromCharCode(J);if(E!=64){A=A+String.fromCharCode(H)}if(D!=64){A=A+String.fromCharCode(F)}}A=Base64._utf8_decode(A);return A},_utf8_encode:function(B){B=B.replace(/\r\n/g,"\n");var A="";for(var D=0;D<B.length;D++){var C=B.charCodeAt(D);if(C<128){A+=String.fromCharCode(C)}else{if((C>127)&&(C<2048)){A+=String.fromCharCode((C>>6)|192);A+=String.fromCharCode((C&63)|128)}else{A+=String.fromCharCode((C>>12)|224);A+=String.fromCharCode(((C>>6)&63)|128);A+=String.fromCharCode((C&63)|128)}}}return A},_utf8_decode:function(A){var B="";var C=0;var D=c1=c2=0;while(C<A.length){D=A.charCodeAt(C);if(D<128){B+=String.fromCharCode(D);C++}else{if((D>191)&&(D<224)){c2=A.charCodeAt(C+1);B+=String.fromCharCode(((D&31)<<6)|(c2&63));C+=2}else{c2=A.charCodeAt(C+1);c3=A.charCodeAt(C+2);B+=String.fromCharCode(((D&15)<<12)|((c2&63)<<6)|(c3&63));C+=3}}}return B}};(function(){var N=location.pathname,A="https:"==document.location.protocol,J=A?"https://ad.doubleclick.net/":"http://ad.doubleclick.net/",c=1,h=0,g,L=location.pathname.indexOf("/preview/")==0,H={},Q=window.AD_OBJECT||{},j={},V=!!window.Prototype,W={},B="",n=document.getQuery?document.getQuery():{},T=false,I={},m=/[^,\w-]|['"]/mg,l=/^\/sweepstakes\b/,b=/^\/microsite\b(.*)/,D=/(?:^\s*|\s*$)/mg,G=/_/mg,f=(""+Math.random()).substring(2,11),C={bimbo:{x:220,y:170},bimbo2:{x:116,y:86},blog_landing:{x:600,y:200},center:{x:300,y:250},hp_30_days:{x:300,y:228},index:{x:448,y:100},island:{x:300,y:250},island2:{x:300,y:251},island3:{x:300,y:458},leaderboard:{x:728,y:90},leaderboard2:{x:728,y:90},logo:{x:100,y:35},logo2:{x:116,y:86},logo3:{x:100,y:50},mod_text_list:{x:100,y:36},mod_quiz:{x:100,y:36},mod_question_and_answer:{x:100,y:36},mod_single_promo:{x:100,y:36},mod_sponsored_question:{x:100,y:36},OMAGLANDING:{x:600,y:200},OMAGSLIDESHOW:{x:600,y:200},OMAGARTICLES:{x:600,y:200},overlay:{x:400,y:400},"package":{x:104,y:66},pop:{x:728,y:90},print:{x:468,y:60},promo:{x:300,y:100},skyscraper:{x:160,y:600},sponsorfeatured:{x:115,y:125},sponsorpagetool:{x:100,y:35},takeover:{x:970,y:66},videocompanion:{x:234,y:60}};function F(q){var o=q.split("&");q="";for(var p=0;o[p];p++){q+="adkw="+o[p]+";"}return q}function P(t){var u={},q,o,p,r;for(q=0,o=document.getElementsByTagName("meta");o[q];q++){p=o[q].name;r=o[q].content;if(r){u[p]=r;if(t&&p.match(/^(?:author|contentsource|expertname|package|recommended)$/)){t[r.replace(m,"")]=1}}}return u}function Y(){return(H.contentid||"index").replace(/\.xml$/,"").replace(m,"")}function d(){var p={homepage_30_days:"index",oprahbookclub:"oprahsbookclub",homepage_lifeclass_promo:"index",homepagelifeclasspromo:"index",oprah_show:"tows",privacy_policy:"privacy",series_specials:"seriesandspecials",sweepstakes:"sweepsscams",videos:"video"},o,t=H.sectionname,r=H.subsectionname,q=window.location.pathname.match(b);if(q){r=q[1].replace(/^\/|\/$/g,"")}o="o."+(p[t]||t||"index").replace(G,"");if(r){o+="/"+r}return o}function k(q){var o=j.type=="Takeover",p="";if(T){return p}if((q.match(/^(?:leaderboard|logo|island|index)$/)&&o&&!j.disableSkin)||("index"&&(Q.homepage_ad_name=="homepage-skin"||Q.homepage_ad_name=="homepage-takeover"))||(q=="overlay")){p="dcopt=ist;";T=true}return p}function Z(p,o){W[p]||(W[p]=[]);W[p].push(o)}function a(q){var o=W[q],p;if(o&&o.length){for(p=0;p<o.length;p++){o[p]()}}}function e(){var o=j.display_type,q=[];o=(o=="modular")?j.sub_display_type:o;if(o=="microsite"){if(H.contentid=="video-landing"||H.contentid=="radio-landing"){return }if(j.header_image_url){q.push('#package_microsite_header {background-image:url("');q.push(j.header_image_url);q.push('");}')}q.push("#ocom_mainnav, #ocom_subnav, #ocom_more_nav {display:none}")}if(o=="styled"&&j.header_image_url){q.push('#package_styled_header {background-image:url("');q.push(j.header_image_url);q.push('");}')}if(q.length){q.splice(0,0,'<style type="text/css">');q.push("</style>")}if(j.package_css_url){q.push('<link rel="stylesheet" type="text/css" href="');q.push(j.package_css_url);q.push('"/>')}if(q.length){document.write(q.join(""))}if(V&&!j._is_landing){if(H.mediatype){$$("html").invoke("addClassName",H.mediatype)}var p=new Ajax.Request("/common/package_sub_nav.inc",{method:n.package_preview?"post":"get",parameters:Object.extend({package_id:j.package_id,article_id:Q.article_id,ajax:1},n),onSuccess:function(r){var t;document.observe("dom:loaded",function(){if(o=="microsite"){t=$("package_microsite_header");if(!t){return }t.update(r.responseText)}else{if(o=="styled"){t=$("package_styled_header");if(!t){return }t.insert({top:r.responseText})}else{t=new Element("div");t.update(r.responseText)}}var v=t.down(".package_sponsored_message"),u=$("package_sponsoror_area");if(v&&u){v.remove();v.style.display="block";u.appendChild(v)}var w=t.down(".custom_package_code");u=$("package_ad_header");if(v&&u&&w){u.appendChild(w.remove())}})}})}}function U(){document.write('<style>html body{background-color:#000000}html #ocom_header, #npz_header{background:#000000 url("http://static.oprah.com/images/no-phone-zone/npz-header-v2-988x260.jpg") no-repeat; width:988px; height:260px; position:relative}#ocom_header div, #ocom_header ul {display:none}</style>');if(V){var o=new Ajax.Request("/common/no_phone_zone_nav.inc",{method:"get",onSuccess:function(p){var q=document;q.observe("dom:loaded",function(){var r=$("top_greeting_ocom"),t=$("ocom_header");t.id="npz_header";t.update(p.responseText);if(r){r.remove();t.insert({top:r})}})}})}}function S(){if(window.getCookie&&getCookie("OPR_SWEEPS_POPUP")){return }if(window.setCookie&&window.Prototype){var o=new Date();var p=new Element("div");o.setTime(o.getTime()+(7*24*60*60*1000));setCookie("OPR_SWEEPS_POPUP",1,o,"/","oprah.com");p.setStyle({background:"url(http://subscribe.hearstmags.com/circulation/shared/ads/opr/opr_sweeps_layer.gif) no-repeat",position:"absolute",width:"336px",height:"280px",top:"200px",left:"100px"});p.update('<a href="https://subscribe.hearstmags.com/subscribe/splits/oprah/opr_sweeps_layer" style="width:336px; height:256px; position:absolute; top:24px; left:0" target="_blank"></a><a class="close" href="javascript:;" style="display:block; position:absolute; width:66px; height:24px; top:0; right:0"></a>');p.down("a.close").observe("click",function(){document.body.removeChild(p)});document.body.appendChild(p)}}function M(){if(!V||j._is_landing){return }function p(w){var t=$("right_rail_wrapper");if(!t){return }var q=new Element("div"),u=w.extractScripts(),AB=/\b(?:OAS_AD|doubleclick\.net|document\.write)\b/;q.update(w.stripScripts());var AC=t.select('div[id^="module_"]'),x=q.select('div[id^="module_"]'),z=Math.max(AC.length,x.length),v,r,y;for(v=0;v<z;v++){r=AC[v];y=x[v];if(y){y.style.display="block"}if(r&&y){try{t.replaceChild(y.remove(),r)}catch(AA){}}else{if(r){t.down("."+r.id+"_spacer").remove();r.remove()}else{if(y){t.appendChild(y.remove());t.appendChild(new Element("div",{className:"spacer"}))}}}}u.each(function(AD){if(!AD.match(AB)&&window.globalEval){window.globalEval(AD)}})}document.write("<style>.right_rail_module{display:none}</style>");var o=new Ajax.Request("/common/package_right_rail.inc",{method:n.package_preview?"post":"get",parameters:Object.extend({package_id:j.package_id},n),evalScripts:false,onSuccess:function(q){document.observe("dom:loaded",function(){p(q.responseText)})}})}function K(y,AC){var p=AC||{},u="",t=C[y.toLowerCase()],AB=t.x+"x"+t.y,x=Y(),r=d(),q=H.sectionname=="audio"||H.sectionname=="videos",w=(j.display_type=="styled"||j.display_type=="microsite"||j.sub_display_type=="styled"||j.sub_display_type=="microsite")&&H.sectionname=="microsite",v=c,AA,o;K.disableAdsense=w;if(H.sectionname=="profilesettings"||window.location.pathname.match(l)||(y=="logo"&&window.location.pathname.match(b))||((y=="logo"||y=="logo2"||y=="promo")&&w)||(y=="takeover"&&j.type!="Takeover"&&!Q.forceTakeover)||(y=="takeover"&&q)||(y=="leaderboard"&&j.type=="Takeover"&&!Q.forceTakeover&&!q)||(y=="leaderboard"&&Q.homepage_ad_name=="homepage-takeover"&&Q.is_landing)||(y=="index"&&!Q.homepage_ad_name)||(y=="leaderboard"&&g)||(y=="logo"&&g)){if((Q.homepage_ad_name=="homepage-takeover"&&y!="leaderboard")||(y=="index"&&j.type=="Takeover")){}else{if(p.onFailure){p.onFailure()}return }}if(p.site){r="o."+p.site}var z=document.getElementById("finder_header");if(z&&(j.type)){z.style.display="none"}if(H.mediatype!="video"&&y=="island"){AB+=",300x600"}if(p.page_cat=="homepage_30_days"){AB+=",630x100"}if(y=="blog_landing"){AB+=",300x252"}if(p.page){x=p.page}if(p.keywords){u=p.keywords.replace(m,"");u="adkw="+u.replace(/,/g,";adkw=")+";"}if(y=="Index"){o='<script src="'+J+"adj/o.index;"+B+u+"tile="+v+";sz="+AB+";ord="+f+'?" type="text/javascript"><\/script>'}else{if(p.type=="frame"){o=J+"adi/"+r+";"+B+u+"page="+x+";tile="+v+";sz="+AB+";mtfIFPath=/ord/doubleclick/;pos="+y+";ord="+f+"?";return o}else{if(p.type=="companion"){o=r+";"+B+u+"page="+x+";pos="+y+";"}else{AA="adj/"+r+";"+B+u+"page="+x+";tile="+v+";"+k(y)+"sz="+AB+";pos="+y+";ord="+f+"?";o='<script id="dart_'+y+f+'" src="'+J+AA+'" type="text/javascript"><\/script>'}}}if(AA){I[y]={id:"dart_"+y+f,src:AA}}c++;if(p.type=="source"||p.type=="companion"){return o}else{document.write(o);a(y+":loaded")}}_asyncRefresh=function(v,p){var o=C[v.toLowerCase()],r=Global.SERVER_NAME,u=I[v].id,t=I[v].src,q=document.getElementById(u);if(q){if(A){r=r.replace(/^http/,"https")}t=t.replace(/\bord=\d+/,"ord="+p);q=q.parentNode;q.innerHTML='<iframe id="'+u+'" src="'+Global.SERVER_NAME+"/common/dart_frame.html?script="+encodeURIComponent(t)+'" frameborder="0" allowtransparency="true" scrolling="no" width="'+o.x+'" height="'+o.y+'">'}};K.asyncRefresh=function(t,p){var r=p||{};var o=(""+Math.random()).substring(2,11);if(t&&t!="all"){_asyncRefresh(t,o)}else{for(var q in I){_asyncRefresh(q,o)}if(window.s){if(r.prop14){s.prop14=r.prop14}s.t()}if(window.Maui){if(Maui.loadNielsenTracker){Maui.loadNielsenTracker(p)}if(Maui.loadCompeteTracker){Maui.loadCompeteTracker(p)}if(Maui.loadComscoreTracker){Maui.loadComscoreTracker(p)}}}};function E(v,r,x){var q=v.match(/([a-z0-9]+)_?(\d)?/),w=["500x500","300x250","728x90","0x0"],y=parseInt(q[2]||0,10),u=q[1],t=y+1,p=y?"adj":"pfadx",o;if(r){r=","+r.replace(m,"")+";";r=r.replace(/,/g,";adkw=")}else{r=";"}o="http://ad.doubleclick.net/"+p+"/o."+u+r+"sz="+w[y];if(window.getCookie&&getCookie("TEST_VIDEO_AD")&&L){o=getCookie("TEST_VIDEO_AD")}if(x===true){document.write('<script type="text/javascript" src="'+o+'"><\/script>')}else{return o}}function O(w){var x=0,t="",o=j||{},u,p,q;if(g||o.type!="Package"){return }var r=o.display_type;if(r=="modular"){r=o.sub_display_type}switch(r){case"old_style":if(w=="styled_logo"){return }break;case"styled":if(w=="logo"||w=="header"){return }break;case"microsite":case"own_tv":return }function v(y,z){t=t.replace(new RegExp("#{"+y+"}","mg"),z||"")}if(w=="logo"||w=="styled_logo"){K("logo2")}if(w=="header"){if(o.header_image_url){t+='<#{tag} href="#{href}" style="display:block; width:620px; overflow:hidden"><img src="#{img}"/></#{tag}>';v("tag",o.package_url?"a":"div");v("href",o.package_url);v("img",o.header_image_url)}if(o.sub_nav&&(u=o.sub_nav.length)){t+='<div class="links" align="center">';for(q=0;q<u;q++){p=o.sub_nav[q];t+='<a href="'+p.url+'">'+p.title+"</a>";if(q<u-1){t+='<span style="line-height:20px; padding:10px">|</span>'}}t+="</div>"}document.write(t)}}function X(o,p,q,r){if(!p){p=j.package_url}$$(o).each(function(t){if(t._pkgLinkInitialize){return }t.observe("click",function(){var u=new Date();u.setTime(u.getTime()+15000);setCookie("last_pkg_landing",[p,q,r].join(","),u,"/","oprah.com")});t._pkgLinkInitialize=[true]})}function R(p){p=p||(30*60);if(j.package_url){var o=new Date();o.setTime(o.getTime()+p*1000);setCookie("last_pkg_landing",j.package_url+","+H.contentid,o,"/","oprah.com")}}(function(){var o={};function p(t){var r=t.split(","),q=r.length;while(q--){o[r[q].replace(m,"")]=1}}H=P(o);if(H.adkeywords){p(H.adkeywords)}if(H.sectionname=="search"){i=window.location.search.match(/\bq=([^&]*)/);if(i&&i[1]){o[i[1].replace(/\+/,"_")]=1}}if(Q.data&&Q.data.length){(function(){var w,x=0,q,v,t,u,r=Math.random()*100;if(window.getCookie&&(q=window.getCookie("last_pkg_landing"))){v=q.split(",")}for(i=0;i<Q.data.length;i++){w=Q.data[i];t=parseFloat(w.percent||0);if(!u&&r>=x&&r<(x+t)){j=w;u=true}if(q&&w.type=="Package"&&w.package_url.indexOf(v[0])==Math.abs(w.package_url.length-v[0].length)&&(v[1]?v[1]==H.contentid:true)){j=w;u=true}if(w.type=="Term"&&w.term){p(w.term)}x+=t}if(j.type=="Takeover"&&((H.contentid=="video-landing"||H.contentid=="radio-landing")||(Q.is_landing&&j.exclude_landing)||(!Q.is_landing&&j.exclude_subpages))){j={}}if(j.type=="Package"&&j.display_type!="own_tv"){o[j.id]=1;document.write('<meta name="package" content="'+j.id+'"/>');j._is_landing=!!location.pathname.match(/^\/(?:packages|package_pages|admintool)\//);j._from_url=(v&&v[2])?v[0].replace(/[^\/]*$/,v[2]):null;e();M()}})()}if(j.category&&!L&&j.type=="Package"){if(j.category){H.sectionname=j.category}if(j.category=="myowntime"){H.contentsource="own"}if(j.contentsource){H.contentsource=j.contentsource}}if(window.deleteCookie){deleteCookie("last_pkg_landing","/","oprah.com")}for(i in o){B+="adkw="+i.toLowerCase()+";"}g=j.id=="no-phone-zone"||location.pathname=="/questionaire/ipledge.html"||location.pathname.indexOf("/npz/")==0;if(g){U()}if(j.type!="Takeover"&&Q.homepage_ad_name!="homepage-takeover"&&H.contentsource!="own"&&!location.hostname.match(/(?:myown|admin)/)&&!location.pathname.match(/^\/(?:harpostudios|admintool)\//)){setTimeout(function(){S()},3500)}K.Metas=H;K.keyword=B;K.pageData=j;K.addHandler=Z;O.initializeLinks=X;O.setLastPkgCookie=R;window.OAS_AD=K;window.MEDIA_AD=E;window.PACKAGE_AD=O})()})();