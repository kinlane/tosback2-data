(function(e){function i(){c.setAttribute("content",u),h=!0}function t(){c.setAttribute("content",d),h=!1}function o(o){l=o.accelerationIncludingGravity,s=Math.abs(l.x),r=Math.abs(l.y),g=Math.abs(l.z),e.orientation&&180!==e.orientation||!(s>7||(g>6&&8>r||8>g&&r>6)&&s>5)?h||i():h&&t()}var a=navigator.userAgent;if(/iPhone|iPad|iPod/.test(navigator.platform)&&/OS [1-5]_[0-9_]* like Mac OS X/i.test(a)&&a.indexOf("AppleWebKit")>-1){var n=e.document;if(n.querySelector){var s,r,g,l,c=n.querySelector("meta[name=viewport]"),m=c&&c.getAttribute("content"),d=m+",maximum-scale=1",u=m+",maximum-scale=10",h=!0;c&&(e.addEventListener("orientationchange",i,!1),e.addEventListener("devicemotion",o,!1))}}})(this);;
(function(e,t,i){function n(e){return e}function o(e){return decodeURIComponent(e.replace(a," "))}var a=/\+/g,r=e.cookie=function(a,s,l){if(s!==i){if(l=e.extend({},r.defaults,l),null===s&&(l.expires=-1),"number"==typeof l.expires){var c=l.expires,u=l.expires=new Date;u.setDate(u.getDate()+c)}return s=r.json?JSON.stringify(s):s+"",t.cookie=[encodeURIComponent(a),"=",r.raw?s:encodeURIComponent(s),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var d=r.raw?n:o,g=t.cookie.split("; "),f=0,p=g.length;p>f;f++){var m=g[f].split("=");if(d(m.shift())===a){var h=d(m.join("="));return r.json?JSON.parse(h):h}}return null};r.defaults={},e.removeCookie=function(t,i){return null!==e.cookie(t)?(e.cookie(t,null,i),!0):!1}})(jQuery,document);;
(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e,t){function i(e){function t(){n?(i(),U(t),o=!0,n=!1):o=!1}var i=e,n=!1,o=!1;this.kick=function(){n=!0,o||t()},this.end=function(e){var t=i;e&&(o?(i=n?function(){t(),e()}:e,n=!0):e())}}function n(){return!0}function o(){return!1}function a(e){e.preventDefault()}function r(e){F[e.target.tagName.toLowerCase()]||e.preventDefault()}function s(e){return 1===e.which&&!e.ctrlKey&&!e.altKey}function l(e,t){var i,n;if(e.identifiedTouch)return e.identifiedTouch(t);for(i=-1,n=e.length;n>++i;)if(e[i].identifier===t)return e[i]}function c(e,t){var i=l(e.changedTouches,t.identifier);if(i&&(i.pageX!==t.pageX||i.pageY!==t.pageY))return i}function u(e){var t;s(e)&&(t={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:e.timeStamp},q(document,B.move,d,t),q(document,B.cancel,g,t))}function d(e){var t=e.data;y(e,t,e,f)}function g(){f()}function f(){P(document,B.move,d),P(document,B.cancel,g)}function m(e){var t,i;F[e.target.tagName.toLowerCase()]||(t=e.changedTouches[0],i={target:t.target,startX:t.pageX,startY:t.pageY,timeStamp:e.timeStamp,identifier:t.identifier},q(document,W.move+"."+t.identifier,p,i),q(document,W.cancel+"."+t.identifier,h,i))}function p(e){var t=e.data,i=c(e,t);i&&y(e,t,i,v)}function h(e){var t=e.data,i=l(e.changedTouches,t.identifier);i&&v(t.identifier)}function v(e){P(document,"."+e,p),P(document,"."+e,h)}function y(e,t,i,n){var o=i.pageX-t.startX,a=i.pageY-t.startY;M*M>o*o+a*a||x(e,t,i,o,a,n)}function w(){return this._handled=n,!1}function b(e){e._handled()}function x(e,t,i,n,o,a){var r,s;t.target,r=e.targetTouches,s=e.timeStamp-t.timeStamp,t.type="movestart",t.distX=n,t.distY=o,t.deltaX=n,t.deltaY=o,t.pageX=i.pageX,t.pageY=i.pageY,t.velocityX=n/s,t.velocityY=o/s,t.targetTouches=r,t.finger=r?r.length:1,t._handled=w,t._preventTouchmoveDefault=function(){e.preventDefault()},H(t.target,t),a(t.identifier)}function _(e){var t=e.data.event,i=e.data.timer;$(t,e,e.timeStamp,i)}function k(e){var t=e.data.event,i=e.data.timer;S(),I(t,i,function(){setTimeout(function(){P(t.target,"click",o)},0)})}function S(){P(document,B.move,_),P(document,B.end,k)}function C(e){var t=e.data.event,i=e.data.timer,n=c(e,t);n&&(e.preventDefault(),t.targetTouches=e.targetTouches,$(t,n,e.timeStamp,i))}function T(e){var t=e.data.event,i=e.data.timer,n=l(e.changedTouches,t.identifier);n&&(z(t),I(t,i))}function z(e){P(document,"."+e.identifier,C),P(document,"."+e.identifier,T)}function $(e,t,i,n){var o=i-e.timeStamp;e.type="move",e.distX=t.pageX-e.startX,e.distY=t.pageY-e.startY,e.deltaX=t.pageX-e.pageX,e.deltaY=t.pageY-e.pageY,e.velocityX=.3*e.velocityX+.7*e.deltaX/o,e.velocityY=.3*e.velocityY+.7*e.deltaY/o,e.pageX=t.pageX,e.pageY=t.pageY,n.kick()}function I(e,t,i){t.end(function(){return e.type="moveend",H(e.target,e),i&&i()})}function j(){return q(this,"movestart.move",b),!0}function E(){return P(this,"dragstart drag",a),P(this,"mousedown touchstart",r),P(this,"movestart",b),!0}function A(e){"move"!==e.namespace&&"moveend"!==e.namespace&&(q(this,"dragstart."+e.guid+" drag."+e.guid,a,t,e.selector),q(this,"mousedown."+e.guid,r,t,e.selector))}function O(e){"move"!==e.namespace&&"moveend"!==e.namespace&&(P(this,"dragstart."+e.guid+" drag."+e.guid),P(this,"mousedown."+e.guid))}var M=6,q=e.event.add,P=e.event.remove,H=function(t,i,n){e.event.trigger(i,n,t)},U=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(function(){e()},25)}}(),F={textarea:!0,input:!0,select:!0,button:!0},B={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},W={move:"touchmove",cancel:"touchend",end:"touchend"};e.event.special.movestart={setup:j,teardown:E,add:A,remove:O,_default:function(e){var n,a;e._handled()&&(n={target:e.target,startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,timeStamp:e.timeStamp,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger},a={event:n,timer:new i(function(){H(e.target,n)})},e.identifier===t?(q(e.target,"click",o),q(document,B.move,_,a),q(document,B.end,k,a)):(e._preventTouchmoveDefault(),q(document,W.move+"."+e.identifier,C,a),q(document,W.end+"."+e.identifier,T,a)))}},e.event.special.move={setup:function(){q(this,"movestart.move",e.noop)},teardown:function(){P(this,"movestart.move",e.noop)}},e.event.special.moveend={setup:function(){q(this,"movestart.moveend",e.noop)},teardown:function(){P(this,"movestart.moveend",e.noop)}},q(document,"mousedown.move",u),q(document,"touchstart.move",m),"function"==typeof Array.prototype.indexOf&&function(e){for(var t=["changedTouches","targetTouches"],i=t.length;i--;)-1===e.event.props.indexOf(t[i])&&e.event.props.push(t[i])}(e)});;
(function(e){"use strict";e.fn.foundationAccordion=function(){var t=e(".accordion");t.hasClass("hover")&&!Modernizr.touch?e(".accordion li",this).on({mouseenter:function(){console.log("due");var t=e(this).parent(),i=e(this).children(".content").first();e(".content",t).not(i).hide().parent("li").removeClass("active"),i.show(0,function(){i.parent("li").addClass("active")})}}):e(".accordion li",this).on("click.fndtn",function(){var t=e(this).parent(),i=e(this).children(".content").first();e(".content",t).not(i).hide().parent("li").removeClass("active"),i.show(0,function(){i.parent("li").addClass("active")})})}})(jQuery,this);;
(function(e){"use strict";e.fn.foundationAlerts=function(t){var i=e.extend({callback:e.noop},t);e(document).on("click",".alert-box a.close",function(t){t.preventDefault(),e(this).closest(".alert-box").fadeOut(function(){e(this).remove(),i.callback()})})}})(jQuery,this);;
(function(e){"use strict";e.fn.foundationButtons=function(t){var i=e(document),n=e.extend({dropdownAsToggle:!0,activeClass:"active"},t),o=function(t){e(".button.dropdown").find("ul").not(t).removeClass("show-dropdown")},a=function(t){var i=e(".button.dropdown").not(t);i.add(e("> span."+n.activeClass,i)).removeClass(n.activeClass)};i.on("click.fndtn",".button.disabled",function(e){e.preventDefault()}),e(".button.dropdown > ul",this).addClass("no-hover"),i.on("click.fndtn",".button.dropdown:not(.split), .button.dropdown.split span",function(t){var i=e(this),r=i.closest(".button.dropdown"),s=e("> ul",r);t.preventDefault(),o(n.dropdownAsToggle?s:""),s.toggleClass("show-dropdown"),n.dropdownAsToggle&&(a(r),i.toggleClass(n.activeClass))}),i.on("click.fndtn","body, html",function(t){e(t.originalEvent.target).is(".button.dropdown:not(.split), .button.dropdown.split span")||(o(),n.dropdownAsToggle&&a())});var r=e(".button.dropdown:not(.large):not(.small):not(.tiny)",this).outerHeight()-1,s=e(".button.large.dropdown",this).outerHeight()-1,l=e(".button.small.dropdown",this).outerHeight()-1,c=e(".button.tiny.dropdown",this).outerHeight()-1;e(".button.dropdown:not(.large):not(.small):not(.tiny) > ul",this).css("top",r),e(".button.dropdown.large > ul",this).css("top",s),e(".button.dropdown.small > ul",this).css("top",l),e(".button.dropdown.tiny > ul",this).css("top",c),e(".button.dropdown.up:not(.large):not(.small):not(.tiny) > ul",this).css("top","auto").css("bottom",r-2),e(".button.dropdown.up.large > ul",this).css("top","auto").css("bottom",s-2),e(".button.dropdown.up.small > ul",this).css("top","auto").css("bottom",l-2),e(".button.dropdown.up.tiny > ul",this).css("top","auto").css("bottom",c-2)}})(jQuery,this);;
(function(e,t){"use strict";var i={templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><img src="#"><p class="clearing-caption"></p><a href="#" class="clearing-main-left"></a><a href="#" class="clearing-main-right"></a></div>'},locked:!1},n={},o={init:function(){return this.find("ul[data-clearing]").each(function(){var t=(e(document),e(this)),n=n||{},a=a||{},r=t.data("fndtn.clearing.settings");r||(n.$parent=t.parent(),t.data("fndtn.clearing.settings",e.extend({},i,n)),o.extend(o,a),o.assemble(t.find("li")),o.events())})},events:function(){var n=e(document);n.on("click.fndtn.clearing","ul[data-clearing] li",function(t,i,n){var i=i||e(this),n=n||i;t.preventDefault(),o.open(e(t.target),i,n),o.update_paddles(n)}),e(t).on("resize.fndtn.clearing",function(){var t=e(".clearing-blackout .visible-img").find("img");t.length>0&&o.center(t)}),n.on("click.fndtn.clearing",".clearing-main-right",function(t){var i=e(".clearing-blackout").find("ul[data-clearing]");t.preventDefault(),o.go(i,"next")}),n.on("click.fndtn.clearing",".clearing-main-left",function(t){var i=e(".clearing-blackout").find("ul[data-clearing]");t.preventDefault(),o.go(i,"prev")}),n.on("click.fndtn.clearing","a.clearing-close, div.clearing-blackout",function(t){var n,o,a=function(e){return/blackout/.test(e.selector)?e:e.closest(".clearing-blackout")}(e(this));return this===t.target&&a&&(n=a.find("div:first"),o=n.find(".visible-img"),i.prev_index=0,a.find("ul[data-clearing]").attr("style",""),a.removeClass("clearing-blackout"),n.removeClass("clearing-container"),o.hide()),!1}),n.on("keydown.fndtn.clearing",function(t){var i=e(".clearing-blackout").find("ul[data-clearing]");39===t.which&&o.go(i,"next"),37===t.which&&o.go(i,"prev")}),n.on("movestart",function(e){(e.distX>e.distY&&e.distX<-e.distY||e.distX<e.distY&&e.distX>-e.distY)&&e.preventDefault()}),n.bind("swipeleft","ul[data-clearing] li",function(){var t=e(".clearing-blackout").find("ul[data-clearing]");o.go(t,"next")}),n.bind("swiperight","ul[data-clearing] li",function(){var t=e(".clearing-blackout").find("ul[data-clearing]");o.go(t,"prev")})},assemble:function(e){var t=e.parent(),i=t.data("fndtn.clearing.settings"),n=t.detach(),o={grid:'<div class="carousel">'+this.outerHTML(n[0])+"</div>",viewing:i.templates.viewing},a='<div class="clearing-assembled"><div>'+o.viewing+o.grid+"</div></div>";return i.$parent.append(a)},open:function(e,t,i){var n=i.closest(".clearing-assembled"),a=n.find("div:first"),r=a.find(".visible-img"),s=r.find("img").not(e);o.locked()||(s.attr("src",this.load(e)),s.is_good(function(){n.addClass("clearing-blackout"),a.addClass("clearing-container"),o.caption(r.find(".clearing-caption"),e),r.show(),o.fix_height(i),o.center(s),o.shift(t,i,function(){i.siblings().removeClass("visible"),i.addClass("visible")})}))},fix_height:function(t){var i=t.siblings();i.each(function(){var t=e(this),i=t.find("img");t.height()>i.outerHeight()&&t.addClass("fix-height")}),i.closest("ul").width(100*i.length+"%")},update_paddles:function(e){var t=e.closest(".carousel").siblings(".visible-img");e.next().length>0?t.find(".clearing-main-right").removeClass("disabled"):t.find(".clearing-main-right").addClass("disabled"),e.prev().length>0?t.find(".clearing-main-left").removeClass("disabled"):t.find(".clearing-main-left").addClass("disabled")},load:function(e){var t=e.parent().attr("href");return this.preload(e),t?t:e.attr("src")},preload:function(e){var t,i,n,o,a=e.closest("li").next(),r=e.closest("li").prev();a.length>0&&(n=new Image,t=a.find("a"),n.src=t.length>0?t.attr("href"):a.find("img").attr("src")),r.length>0&&(o=new Image,i=r.find("a"),o.src=i.length>0?i.attr("href"):r.find("img").attr("src"))},caption:function(e,t){var i=t.data("caption");i?e.text(i).show():e.text("").hide()},go:function(e,t){var i=e.find(".visible"),n=i[t]();n.length>0&&n.find("img").trigger("click",[i,n])},shift:function(e,t,n){var a,r=t.parent(),s=(r.closest(".clearing-container"),t.position().left,r.position().left,i.prev_index),l=this.direction(r,e,t),c=parseInt(r.css("left"),10),u=t.outerWidth();t.index()===s||/skip/.test(l)?/skip/.test(l)&&(a=t.index()-i.up_count,o.lock(),a>0?r.animate({left:-(a*u)},300,o.unlock):r.animate({left:0},300,o.unlock)):/left/.test(l)?(o.lock(),r.animate({left:c+u},300,o.unlock)):/right/.test(l)&&(o.lock(),r.animate({left:c-u},300,o.unlock)),n()},lock:function(){i.locked=!0},unlock:function(){i.locked=!1},locked:function(){return i.locked},direction:function(t,n,o){var a,r=t.find("li"),s=r.outerWidth()+r.outerWidth()/4,l=e(".clearing-container"),c=Math.floor(l.outerWidth()/s)-1,u=(r.length-c,r.index(o));return r.index(n),i.up_count=c,a=this.adjacent(i.prev_index,u)?u>c&&u>i.prev_index?"right":u>c-1&&i.prev_index>=u?"left":!1:"skip",i.prev_index=u,a},adjacent:function(e,t){return t-1===e?!0:t+1===e?!0:t===e?!0:!1},center:function(e){e.css({marginLeft:-(e.outerWidth()/2),marginTop:-(e.outerHeight()/2)})},outerHTML:function(e){return e.outerHTML||(new XMLSerializer).serializeToString(e)},extend:function(t,i){e.each(t,function(e,t){i.hasOwnProperty(e)&&(n[e]=t)}),e.extend(o,i)},_super:function(e,t){return n[e].apply(this,t)}};e.fn.foundationClearing=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.foundationClearing"),undefined):o.init.apply(this,arguments)},function(e){e.fn.is_good=function(t,i){function n(){s-=1,!s&&t()}function o(){if(this.one("load",n),e.browser.msie){var t=this.attr("src"),i=t.match(/\?/)?"&":"?";i+=a.cachePrefix+"="+(new Date).getTime(),this.attr("src",t+i)}}var a=e.extend({},e.fn.is_good.defaults,i),r=this.find("img").add(this.filter("img")),s=r.length;return r.each(function(){var t=e(this);return t.attr("src")?(this.complete||4===this.readyState?n():o.call(t),undefined):(n(),undefined)})},e.fn.is_good.defaults={cachePrefix:"random"}}(jQuery)})(jQuery,this);;
(function(e){var t=function(){return{tmp:[],hidden:null,adjust:function(t){var i=this;i.hidden=t.parents().andSelf().filter(":hidden"),i.hidden.each(function(){var t=e(this);i.tmp.push(t.attr("style")),t.css({visibility:"hidden",display:"block"})})},reset:function(){var t=this;t.hidden.each(function(i){var n=e(this),o=t.tmp[i];void 0===o?n.removeAttr("style"):n.attr("style",o)}),t.tmp=[],t.hidden=null}}};jQuery.foundation=jQuery.foundation||{},jQuery.foundation.customForms=jQuery.foundation.customForms||{},e.foundation.customForms.appendCustomMarkup=function(i){function n(t,i){var n=e(i).hide(),o=n.attr("type"),a=n.next("span.custom."+o);0===a.length&&(a=e('<span class="custom '+o+'"></span>').insertAfter(n)),a.toggleClass("checked",n.is(":checked")),a.toggleClass("disabled",n.is(":disabled"))}function o(i,n){var o,a=t(),r=e(n),s=r.next("div.custom.dropdown"),l=s.find("ul"),c=(s.find(".current"),s.find(".selector")),u=r.find("option"),d=u.filter(":selected"),f=0,g="",p=!1;if(!r.hasClass("no-custom")){if(0===s.length){var m=r.hasClass("small")?"small":r.hasClass("medium")?"medium":r.hasClass("large")?"large":r.hasClass("expand")?"expand":"";s=e('<div class="'+["custom","dropdown",m].join(" ")+'"><a href="#" class="selector"></a><ul /></div>"'),c=s.find(".selector"),l=s.find("ul"),g=u.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join(""),l.append(g),p=s.prepend('<a href="#" class="current">'+d.html()+"</a>").find(".current"),r.after(s).hide()}else g=u.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join(""),l.html("").append(g);s.toggleClass("disabled",r.is(":disabled")),o=l.find("li"),u.each(function(t){this.selected&&(o.eq(t).addClass("selected"),p&&p.html(e(this).html()))}),l.css("width","inherit"),s.css("width","inherit"),s.is(".small, .medium, .large, .expand")||(s.addClass("open"),a.adjust(l),f=o.outerWidth()>f?o.outerWidth():f,a.reset(),s.removeClass("open"),s.width(f+18),l.width(f+16))}}var a={disable_class:"js-disable-custom"};i=e.extend(a,i),e("form.custom input:radio[data-customforms!=disabled]").each(n),e("form.custom input:checkbox[data-customforms!=disabled]").each(n),e("form.custom select[data-customforms!=disabled]").each(o)};var i=function(t){var i=0,n=t.next();$options=t.find("option"),n.find("ul").html(""),$options.each(function(){$li=e("<li>"+e(this).html()+"</li>"),n.find("ul").append($li)}),$options.each(function(t){this.selected&&(n.find("li").eq(t).addClass("selected"),n.find(".current").html(e(this).html()))}),n.removeAttr("style").find("ul").removeAttr("style"),n.find("li").each(function(){n.addClass("open"),e(this).outerWidth()>i&&(i=e(this).outerWidth()),n.removeClass("open")}),n.css("width",i+18+"px"),n.find("ul").css("width",i+16+"px")},n=function(e){var t=e.prev(),i=t[0];!1===t.is(":disabled")&&(i.checked=i.checked?!1:!0,e.toggleClass("checked"),t.trigger("change"))},o=function(t){var i=t.prev(),n=i[0];!1===i.is(":disabled")&&(e('input:radio[name="'+i.attr("name")+'"]').next().not(t).removeClass("checked"),t.hasClass("checked")||t.toggleClass("checked"),n.checked=t.hasClass("checked"),i.trigger("change"))};e(document).on("click","form.custom span.custom.checkbox",function(t){t.preventDefault(),t.stopPropagation(),n(e(this))}),e(document).on("click","form.custom span.custom.radio",function(t){t.preventDefault(),t.stopPropagation(),o(e(this))}),e(document).on("change","form.custom select[data-customforms!=disabled]",function(){i(e(this))}),e(document).on("click","form.custom label",function(t){var i,a,r=e("#"+e(this).attr("for")+"[data-customforms!=disabled]");0!==r.length&&("checkbox"===r.attr("type")?(t.preventDefault(),i=e(this).find("span.custom.checkbox"),n(i)):"radio"===r.attr("type")&&(t.preventDefault(),a=e(this).find("span.custom.radio"),o(a)))}),e(document).on("click","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(t){var i=e(this),n=i.closest("div.custom.dropdown"),o=n.prev();return t.preventDefault(),e("div.dropdown").removeClass("open"),!1===o.is(":disabled")?(n.toggleClass("open"),n.hasClass("open")?e(document).bind("click.customdropdown",function(){n.removeClass("open"),e(document).unbind(".customdropdown")}):e(document).unbind(".customdropdown"),!1):void 0}),e(document).on("click","form.custom div.custom.dropdown li",function(t){var i=e(this),n=i.closest("div.custom.dropdown"),o=n.prev(),a=0;t.preventDefault(),t.stopPropagation(),e("div.dropdown").removeClass("open"),i.closest("ul").find("li").removeClass("selected"),i.addClass("selected"),n.removeClass("open").find("a.current").html(i.html()),i.closest("ul").find("li").each(function(e){i[0]==this&&(a=e)}),o[0].selectedIndex=a,o.trigger("change")}),e.fn.foundationCustomForms=e.foundation.customForms.appendCustomMarkup})(jQuery);;
(function(e){"use strict";e.fn.foundationMediaQueryViewer=function(t){var i=e.extend(t,{toggleKey:77}),n=e(document);n.on("keyup.mediaQueryViewer",":input",function(e){e.which===i.toggleKey&&e.stopPropagation()}),n.on("keyup.mediaQueryViewer",function(t){var n=e("#fqv");t.which===i.toggleKey&&(n.length>0?n.remove():e("body").prepend('<div id="fqv" style="position:fixed;top:4px;left:4px;z-index:999;color:#fff;"><p style="font-size:12px;background:rgba(0,0,0,0.75);padding:5px;margin-bottom:1px;line-height:1.2;"><span class="left">Media:</span> <span style="font-weight:bold;" class="show-for-xlarge">Extra Large</span><span style="font-weight:bold;" class="show-for-large">Large</span><span style="font-weight:bold;" class="show-for-medium">Medium</span><span style="font-weight:bold;" class="show-for-small">Small</span><span style="font-weight:bold;" class="show-for-landscape">Landscape</span><span style="font-weight:bold;" class="show-for-portrait">Portrait</span><span style="font-weight:bold;" class="show-for-touch">Touch</span></p></div>'))})}})(jQuery,this);;
(function(e){"use strict";e.fn.foundationNavigation=function(){var t=!1;Modernizr.touch||navigator.userAgent.match(/Windows Phone/i)?(e(document).on("click.fndtn touchstart.fndtn",".nav-bar a.flyout-toggle",function(i){i.preventDefault();var n=e(this).siblings(".flyout").first();t===!1&&(e(".nav-bar .flyout").not(n).slideUp(500),n.slideToggle(500,function(){t=!1})),t=!0}),e(".nav-bar>li.has-flyout",this).addClass("is-touch")):e(".nav-bar>li.has-flyout",this).on("mouseenter mouseleave",function(t){if("mouseenter"==t.type&&(e(".nav-bar").find(".flyout").hide(),e(this).children(".flyout").show()),"mouseleave"==t.type){var i=e(this).children(".flyout"),n=i.find("input"),o=function(t){var i;return t.length>0?(t.each(function(){e(this).is(":focus")&&(i=!0)}),i):!1};o(n)||e(this).children(".flyout").hide()}})}})(jQuery,this);;
(function(e,t,i){"use strict";var n={bodyHeight:0,selector:".has-tip",tooltipClass:".tooltip",tipTemplate:function(e,t){return'<span data-selector="'+e+'" class="'+n.tooltipClass.substring(1)+'">'+t+'<span class="nub"></span></span>'}},o={init:function(t){return n=e.extend(n,t),n.selector=n.targetClass?n.targetClass:n.selector,this.each(function(){var t=e("body");Modernizr.touch?(t.on("click.tooltip touchstart.tooltip touchend.tooltip",n.selector,function(t){t.preventDefault(),e(n.tooltipClass).hide(),o.showOrCreateTip(e(this))}),t.on("click.tooltip touchstart.tooltip touchend.tooltip",n.tooltipClass,function(t){t.preventDefault(),e(this).fadeOut(150)})):t.on("mouseenter.tooltip mouseleave.tooltip",n.selector,function(t){var i=e(this);"mouseenter"===t.type?o.showOrCreateTip(i):"mouseleave"===t.type&&o.hide(i)}),e(this).data("tooltips",!0)})},showOrCreateTip:function(e){var t=o.getTip(e);t&&t.length>0?o.show(e):o.create(e)},getTip:function(t){var i=o.selector(t),a=null;return i&&(a=e("span[data-selector="+i+"]"+n.tooltipClass)),a.length>0?a:!1},selector:function(e){var t=e.attr("id"),n=e.data("selector");return t===i&&n===i&&(n="tooltip"+Math.random().toString(36).substring(7),e.attr("data-selector",n)),t?t:n},create:function(t){var i=e(n.tipTemplate(o.selector(t),e("<div>").html(t.attr("title")).html())),a=o.inheritable_classes(t);i.addClass(a).appendTo("body"),Modernizr.touch&&i.append('<span class="tap-to-close">tap to close </span>'),t.removeAttr("title"),o.show(t)},reposition:function(i,n,o){var a,s,r,l,c,d,u,p,f,h,g,m,v;n.css("visibility","hidden").show(),a=i.data("width"),s=n.children(".nub"),r=s.outerHeight(),l=s.outerWidth(),d=function(e,t,i,n,o,a){return e.css({top:t,bottom:n,left:o,right:i,width:a?a:"auto"}).end()},"AREA"===i[0].nodeName?(u=i.attr("coords").split(","),v=i.attr("shape"),i=e('img[usemap="#'+i.closest("map").attr("name")+'"]'),h=i.offset(),h.left+=parseInt(u[0],10),h.top+=parseInt(u[1],10),"circle"===v?(g=2*parseInt(u[2],10),m=g,p=h.left-parseInt(u[2],10),f=h.top+parseInt(u[2],10)):(g=parseInt(u[0],10)+parseInt(u[2],10),m=parseInt(u[1],10)+parseInt(u[3],10),p=h.left,f=h.top+10),s.hide()):(h=i.offset(),f=h.top+i.outerHeight()+10,p=h.left,g=i.outerWidth(),m=i.outerHeight()),d(n,f,"auto","auto",p,a),d(s,-r,"auto","auto",10),767>e(t).width()?(c=i.closest(".columns"),0>c.length&&(c=e("body")),n.width(c.outerWidth()-25).css("left",15).addClass("tip-override"),d(s,-r,"auto","auto",h.left)):o&&o.indexOf("tip-top")>-1?(d(n,h.top-n.outerHeight()-r,"auto","auto",h.left,a).removeClass("tip-override"),d(s,"auto","auto",-r,"auto")):o&&o.indexOf("tip-left")>-1?(d(n,h.top+m/2-r,"auto","auto",h.left-n.outerWidth()-10,a).removeClass("tip-override"),d(s,n.outerHeight()/2-r/2,-r,"auto","auto")):o&&o.indexOf("tip-right")>-1&&(d(n,h.top+m/2-r,"auto","auto",h.left+g+10,a).removeClass("tip-override"),d(s,n.outerHeight()/2-r/2,"auto","auto",-r)),n.css("visibility","visible").hide()},inheritable_classes:function(t){var n=["tip-top","tip-left","tip-bottom","tip-right","noradius"],o=t.attr("class"),a=o?e.map(o.split(" "),function(t){return-1!==e.inArray(t,n)?t:i}).join(" "):"";return e.trim(a)},show:function(e){var t=o.getTip(e);o.reposition(e,t,e.attr("class")),t.fadeIn(150)},hide:function(e){var t=o.getTip(e);t.fadeOut(150)},reload:function(){var t=e(this);return t.data("tooltips")?t.foundationTooltips("destroy").foundationTooltips("init"):t.foundationTooltips("init")},destroy:function(){return this.each(function(){e(t).off(".tooltip"),e(n.selector).off(".tooltip"),e(n.tooltipClass).each(function(t){e(e(n.selector).get(t)).attr("title",e(this).text())}).remove()})}};e.fn.foundationTooltips=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.foundationTooltips"),i):o.init.apply(this,arguments)}})(jQuery,this);;
(function(e,t,n){function i(e){var t={},i=/^jQuery\d+$/;return n.each(e.attributes,function(e,n){n.specified&&!i.test(n.name)&&(t[n.name]=n.value)}),t}function o(e,i){var o=this,r=n(o);if(o.value==r.attr("placeholder")&&r.hasClass("placeholder"))if(r.data("placeholder-password")){if(r=r.hide().next().show().attr("id",r.removeAttr("id").data("placeholder-id")),e===!0)return r[0].value=i;r.focus()}else o.value="",r.removeClass("placeholder"),o==t.activeElement&&o.select()}function r(){var e,t=this,r=n(t),a=this.id;if(""==t.value){if("password"==t.type){if(!r.data("placeholder-textinput")){try{e=r.clone().attr({type:"text"})}catch(s){e=n("<input>").attr(n.extend(i(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":a}).bind("focus.placeholder",o),r.data({"placeholder-textinput":e,"placeholder-id":a}).before(e)}r=r.removeAttr("id").hide().prev().attr("id",a).show()}r.addClass("placeholder"),r[0].value=r.attr("placeholder")}else r.removeClass("placeholder")}var a,s,l="placeholder"in t.createElement("input"),c="placeholder"in t.createElement("textarea"),u=n.fn,d=n.valHooks;l&&c?(s=u.placeholder=function(){return this},s.input=s.textarea=!0):(s=u.placeholder=function(){var e=this;return e.filter((l?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":o,"blur.placeholder":r}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},s.input=l,s.textarea=c,a={get:function(e){var t=n(e);return t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,i){var a=n(e);return a.data("placeholder-enabled")?(""==i?(e.value=i,e!=t.activeElement&&r.call(e)):a.hasClass("placeholder")?o.call(e,!0,i)||(e.value=i):e.value=i,a):e.value=i}},l||(d.input=a),c||(d.textarea=a),n(function(){n(t).delegate("form","submit.placeholder",function(){var e=n(".placeholder",this).each(o);setTimeout(function(){e.each(r)},10)})}),n(e).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})}))})(this,document,jQuery);;
(function(e,i,t){function o(t,o,a){var n=i.createElement(t);return o&&(n.id=U+o),a&&(n.style.cssText=a),e(n)}function a(e){var i=$.length,t=(Q+e)%i;return 0>t?i+t:t}function n(e,i){return Math.round((/%/.test(e)?("x"===i?r():g())/100:1)*parseInt(e,10))}function s(e){return W.photo||/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i.test(e)}function r(){return t.innerWidth||z.width()}function g(){return t.innerHeight||z.height()}function l(){var i,t=e.data(P,G);null==t?(W=e.extend({},Z),console&&console.log&&console.log("Error: cboxElement missing settings object")):W=e.extend({},t);for(i in W)e.isFunction(W[i])&&"on"!==i.slice(0,2)&&(W[i]=W[i].call(P));W.rel=W.rel||P.rel||"nofollow",W.href=W.href||e(P).attr("href"),W.title=W.title||P.title,"string"==typeof W.href&&(W.href=e.trim(W.href))}function c(i,t){e.event.trigger(i),t&&t.call(P)}function m(){var e,i,t,o=U+"Slideshow_",a="click."+U;W.slideshow&&$[1]?(i=function(){I.text(W.slideshowStop).unbind(a).bind(ii,function(){(W.loop||$[Q+1])&&(e=setTimeout(K.next,W.slideshowSpeed))}).bind(ei,function(){clearTimeout(e)}).one(a+" "+ti,t),p.removeClass(o+"off").addClass(o+"on"),e=setTimeout(K.next,W.slideshowSpeed)},t=function(){clearTimeout(e),I.text(W.slideshowStart).unbind([ii,ei,ti,a].join(" ")).one(a,function(){K.next(),i()}),p.removeClass(o+"on").addClass(o+"off")},W.slideshowAuto?i():t()):p.removeClass(o+"off "+o+"on")}function d(i){J||(P=i,l(),$=e(P),Q=0,"nofollow"!==W.rel&&($=e("."+V).filter(function(){var i,t=e.data(this,G);return t&&(i=t.rel||this.rel),i===W.rel}),Q=$.index(P),-1===Q&&($=$.add(P),Q=$.length-1)),B||(B=R=!0,p.show(),W.returnFocus&&e(P).blur().one(oi,function(){e(this).focus()}),f.css({opacity:+W.opacity,cursor:W.overlayClose?"pointer":"auto"}).show(),W.w=n(W.initialWidth,"x"),W.h=n(W.initialHeight,"y"),K.position(),si&&z.bind("resize."+ri+" scroll."+ri,function(){f.css({width:r(),height:g(),top:z.scrollTop(),left:z.scrollLeft()})}).trigger("resize."+ri),c(Y,W.onOpen),E.add(k).hide(),H.html(W.close).show()),K.load(!0))}function u(){!p&&i.body&&(X=!1,z=e(t),p=o(gi).attr({id:G,"class":ni?U+(si?"IE6":"IE"):""}).hide(),f=o(gi,"Overlay",si?"position:absolute":"").hide(),j=o(gi,"LoadingOverlay").add(o(gi,"LoadingGraphic")),v=o(gi,"Wrapper"),y=o(gi,"Content").append(C=o(gi,"LoadedContent","width:0; height:0; overflow:hidden"),k=o(gi,"Title"),q=o(gi,"Current"),S=o(gi,"Next"),A=o(gi,"Previous"),I=o(gi,"Slideshow").bind(Y,m),H=o(gi,"Close")),v.append(o(gi).append(o(gi,"TopLeft"),w=o(gi,"TopCenter"),o(gi,"TopRight")),o(gi,!1,"clear:left").append(_=o(gi,"MiddleLeft"),y,b=o(gi,"MiddleRight")),o(gi,!1,"clear:left").append(o(gi,"BottomLeft"),x=o(gi,"BottomCenter"),o(gi,"BottomRight"))).find("div div").css({"float":"left"}),T=o(gi,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),E=S.add(A).add(q).add(I),e(i.body).append(f,p.append(v,T)))}function h(){return p?(X||(X=!0,M=w.height()+x.height()+y.outerHeight(!0)-y.height(),O=_.width()+b.width()+y.outerWidth(!0)-y.width(),D=C.outerHeight(!0),L=C.outerWidth(!0),p.css({"padding-bottom":M,"padding-right":O}),S.click(function(){K.next()}),A.click(function(){K.prev()}),H.click(function(){K.close()}),f.click(function(){W.overlayClose&&K.close()}),e(i).bind("keydown."+U,function(e){var i=e.keyCode;B&&W.escKey&&27===i&&(e.preventDefault(),K.close()),B&&W.arrowKey&&$[1]&&(37===i?(e.preventDefault(),A.click()):39===i&&(e.preventDefault(),S.click()))}),e("."+V,i).live("click",function(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||(e.preventDefault(),d(this))})),!0):!1}var f,p,v,y,w,_,b,x,$,z,C,T,j,k,q,I,S,A,H,E,W,M,O,D,L,P,Q,N,B,R,J,F,K,X,Z={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0},G="colorbox",U="cbox",V=U+"Element",Y=U+"_open",ei=U+"_load",ii=U+"_complete",ti=U+"_cleanup",oi=U+"_closed",ai=U+"_purge",ni=!e.support.opacity&&!e.support.style,si=ni&&!t.XMLHttpRequest,ri=U+"_IE6",gi="div";e.colorbox||(e(u),K=e.fn[G]=e[G]=function(i,t){var o=this;if(i=i||{},u(),h()){if(!o[0]){if(o.selector)return o;o=e("<a/>"),i.open=!0}t&&(i.onComplete=t),o.each(function(){e.data(this,G,e.extend({},e.data(this,G)||Z,i))}).addClass(V),(e.isFunction(i.open)&&i.open.call(o)||i.open)&&d(o[0])}return o},K.position=function(e,i){function t(e){w[0].style.width=x[0].style.width=y[0].style.width=e.style.width,y[0].style.height=_[0].style.height=b[0].style.height=e.style.height}var o,a,s,l=0,c=0,m=p.offset();z.unbind("resize."+U),p.css({top:-9e4,left:-9e4}),a=z.scrollTop(),s=z.scrollLeft(),W.fixed&&!si?(m.top-=a,m.left-=s,p.css({position:"fixed"})):(l=a,c=s,p.css({position:"absolute"})),c+=W.right!==!1?Math.max(r()-W.w-L-O-n(W.right,"x"),0):W.left!==!1?n(W.left,"x"):Math.round(Math.max(r()-W.w-L-O,0)/2),l+=W.bottom!==!1?Math.max(g()-W.h-D-M-n(W.bottom,"y"),0):W.top!==!1?n(W.top,"y"):Math.round(Math.max(g()-W.h-D-M,0)/2),p.css({top:m.top,left:m.left}),e=p.width()===W.w+L&&p.height()===W.h+D?0:e||0,v[0].style.width=v[0].style.height="9999px",o={width:W.w+L,height:W.h+D,top:l,left:c},0===e&&p.css(o),p.dequeue().animate(o,{duration:e,complete:function(){t(this),R=!1,v[0].style.width=W.w+L+O+"px",v[0].style.height=W.h+D+M+"px",W.reposition&&setTimeout(function(){z.bind("resize."+U,K.position)},1),i&&i()},step:function(){t(this)}})},K.resize=function(e){B&&(e=e||{},e.width&&(W.w=n(e.width,"x")-L-O),e.innerWidth&&(W.w=n(e.innerWidth,"x")),C.css({width:W.w}),e.height&&(W.h=n(e.height,"y")-D-M),e.innerHeight&&(W.h=n(e.innerHeight,"y")),!e.innerHeight&&!e.height&&(C.css({height:"auto"}),W.h=C.height()),C.css({height:W.h}),K.position("none"===W.transition?0:W.speed))},K.prep=function(i){function t(){return W.w=W.w||C.width(),W.w=W.mw&&W.mw<W.w?W.mw:W.w,W.w}function n(){return W.h=W.h||C.height(),W.h=W.mh&&W.mh<W.h?W.mh:W.h,W.h}if(B){var r,g="none"===W.transition?0:W.speed;C.remove(),C=o(gi,"LoadedContent").append(i),C.hide().appendTo(T.show()).css({width:t(),overflow:W.scrolling?"auto":"hidden"}).css({height:n()}).prependTo(y),T.hide(),e(N).css({"float":"none"}),si&&e("select").not(p.find("select")).filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one(ti,function(){this.style.visibility="inherit"}),r=function(){function i(){ni&&p[0].style.removeAttribute("filter")}var t,n,r,l,m,d,u,h=$.length,f="frameBorder",v="allowTransparency";if(B){if(l=function(){clearTimeout(F),j.detach().hide(),c(ii,W.onComplete)},ni&&N&&C.fadeIn(100),k.html(W.title).add(C).show(),h>1){if("string"==typeof W.current&&q.html(W.current.replace("{current}",Q+1).replace("{total}",h)).show(),S[W.loop||h-1>Q?"show":"hide"]().html(W.next),A[W.loop||Q?"show":"hide"]().html(W.previous),W.slideshow&&I.show(),W.preloading)for(t=[a(-1),a(1)];n=$[t.pop()];)u=e.data(n,G),u&&u.href?(m=u.href,e.isFunction(m)&&(m=m.call(n))):m=n.href,s(m)&&(d=new Image,d.src=m)}else E.hide();W.iframe?(r=o("iframe")[0],f in r&&(r[f]=0),v in r&&(r[v]="true"),r.name=U+ +new Date,W.fastIframe?l():e(r).one("load",l),r.src=W.href,W.scrolling||(r.scrolling="no"),e(r).addClass(U+"Iframe").appendTo(C).one(ai,function(){r.src="//about:blank"})):l(),"fade"===W.transition?p.fadeTo(g,1,i):i()}},"fade"===W.transition?p.fadeTo(g,0,function(){K.position(0,r)}):K.position(g,r)}},K.load=function(i){var t,a,r=K.prep;R=!0,N=!1,P=$[Q],i||l(),c(ai),c(ei,W.onLoad),W.h=W.height?n(W.height,"y")-D-M:W.innerHeight&&n(W.innerHeight,"y"),W.w=W.width?n(W.width,"x")-L-O:W.innerWidth&&n(W.innerWidth,"x"),W.mw=W.w,W.mh=W.h,W.maxWidth&&(W.mw=n(W.maxWidth,"x")-L-O,W.mw=W.w&&W.w<W.mw?W.w:W.mw),W.maxHeight&&(W.mh=n(W.maxHeight,"y")-D-M,W.mh=W.h&&W.h<W.mh?W.h:W.mh),t=W.href,F=setTimeout(function(){j.show().appendTo(y)},100),W.inline?(o(gi).hide().insertBefore(e(t)[0]).one(ai,function(){e(this).replaceWith(C.children())}),r(e(t))):W.iframe?r(" "):W.html?r(W.html):s(t)?(e(N=new Image).addClass(U+"Photo").error(function(){W.title=!1,r(o(gi,"Error").html(W.imgError))}).load(function(){var e;N.onload=null,W.scalePhotos&&(a=function(){N.height-=N.height*e,N.width-=N.width*e},W.mw&&N.width>W.mw&&(e=(N.width-W.mw)/N.width,a()),W.mh&&N.height>W.mh&&(e=(N.height-W.mh)/N.height,a())),W.h&&(N.style.marginTop=Math.max(W.h-N.height,0)/2+"px"),$[1]&&(W.loop||$[Q+1])&&(N.style.cursor="pointer",N.onclick=function(){K.next()}),ni&&(N.style.msInterpolationMode="bicubic"),setTimeout(function(){r(N)},1)}),setTimeout(function(){N.src=t},1)):t&&T.load(t,W.data,function(i,t){r("error"===t?o(gi,"Error").html(W.xhrError):e(this).contents())})},K.next=function(){!R&&$[1]&&(W.loop||$[Q+1])&&(Q=a(1),K.load())},K.prev=function(){!R&&$[1]&&(W.loop||Q)&&(Q=a(-1),K.load())},K.close=function(){B&&!J&&(J=!0,B=!1,c(ti,W.onCleanup),z.unbind("."+U+" ."+ri),f.fadeTo(200,0),p.stop().fadeTo(300,0,function(){p.add(f).css({opacity:1,cursor:"auto"}).hide(),c(ai),C.remove(),setTimeout(function(){J=!1,c(oi,W.onClosed)},1)}))},K.remove=function(){e([]).add(p).add(f).remove(),p=null,e("."+V).removeData(G).removeClass(V).die()},K.element=function(){return e(P)},K.settings=Z)})(jQuery,document,this);;
(function(e){e(document).ready(function(){function t(e){e.wrap("<div class='table-wrapper' />");var t=e.clone();t.find("td:not(:first-child), th:not(:first-child)").css("display","none"),t.removeClass("responsive"),e.closest(".table-wrapper").append(t),t.wrap("<div class='pinned' />"),e.wrap("<div class='scrollable' />")}function i(e){e.closest(".table-wrapper").find(".pinned").remove(),e.unwrap(),e.unwrap()}e(".single .post, .single .page").find("table").not(".sidebar").addClass("responsive");var n=!1,o=function(){return 767>e(window).width()&&!n?(n=!0,e("table.responsive").each(function(i,n){t(e(n))}),!0):(n&&e(window).width()>767&&(n=!1,e("table.responsive").each(function(t,n){i(e(n))})),void 0)};e(window).load(o),e(window).bind("resize",o)})})(jQuery);;
gigaom.nav={animating:!1,swipe_x_start:null,swipe_x_latest:null},function(a){"use strict";gigaom.nav.init=function(){gigaom.nav.panels={primary:{name:"primary",direction:"left",control:"#nav-toggle"},follow:{name:"follow",direction:"right",control:"body:not(.go-device-full) .nav-plus a"}},gigaom.nav.$sidepanels=a(".sidepanel"),gigaom.nav.$sidepanel=a(".sidepanel"),gigaom.nav.$sidepanel_links=gigaom.nav.$sidepanels.find("a"),gigaom.nav.drag_distance=0,gigaom.nav.direction=null,gigaom.nav.val=0;for(var i in gigaom.nav.panels)gigaom.nav.init_sidepanel(i);a(document).on("click",".sidepanel .expandable > h5",function(a){a.preventDefault(),gigaom.nav.expandable(this)}),a(document).on("mouseenter",".icons.right",function(){!0!==a(this).data("prevent-hover")&&a(this).addClass("hovering")}),a(document).on("mouseleave",".icons.right",function(){a(this).removeClass("hovering")}),a(document).on("mouseenter",".icons.right > li",function(){a(this).doTimeout(250,function(){if(!this.hasClass("nav-hover")&&!0!==a(this).data("prevent-hover")){this.addClass("nav-hover");var i=this.children("a");gigaom.$html_body.hasClass("go-device-full")&&i.data("panel")&&amplify.publish("go-nav-control-open",i.data("panel").name)}})}),a(document).on("mouseleave",".icons.right > li",function(){a(this).doTimeout(300,function(){this.hasClass("nav-tap")||(this.removeClass("nav-hover"),this.data("prevent-hover",!1))})}),a(document).on("tap MSPointerDown",".icons.right > li > a",function(i){i.preventDefault(),i.stopPropagation();var e=a(this).closest("li");e.hasClass("nav-tap")?e.removeClass("nav-hover nav-tap"):(e.addClass("nav-hover nav-tap"),e.closest(".icons").find("li").not(e).removeClass("nav-tap nav-hover")),e.data("prevent-hover",!0)}),a(document).on("click tap",".icons.right > li div a",function(a){a.stopPropagation()}),a(window).resize("resize",function(){gigaom.nav.$sidepanels.find("input:focus").length||gigaom.nav.toggle_reset()}),amplify.publish("go-nav-init")},gigaom.nav.init_sidepanel=function(i){a(gigaom.nav.panels[i].control).data("panel",gigaom.nav.panels[i]),a(document).on("click",gigaom.nav.panels[i].control,function(i){i.preventDefault(),gigaom.nav.toggle(a(this).data("panel").name,a(this).data("panel").direction)})},gigaom.nav.toggle=function(i,e){gigaom.nav.val=gigaom.$wrapper.css(e),gigaom.nav.direction=e,gigaom.nav.$sidepanel=a(".sidepanel."+i),gigaom.$html_body.addClass("show-sidepanel-"+i);var o=null,g=null;"auto"!==gigaom.nav.val&&"0px"!==gigaom.nav.val&&gigaom.nav.val?gigaom.nav.toggle_reset():(gigaom.nav.swipe_init(),gigaom.nav.val=270,o=gigaom.$html_body.width(),g=gigaom.nav.$sidepanel.height(),a(window).height()>g&&(g=a(window).height()),gigaom.$html_body.addClass("no-overflow"),gigaom.$html_body.height(g),gigaom.nav.$sidepanel.addClass("exposed"),gigaom.nav.animate_sidepanel(gigaom.nav.direction,gigaom.nav.val,function(){gigaom.$html_body.width(o),gigaom.$wrapper.css("overflow","hidden"),gigaom.$wrapper.css("overflow-y","hidden"),gigaom.$wrapper.height(g),gigaom.$inner_wrapper.width(gigaom.$inner_wrapper.width()),gigaom.$inner_wrapper.css(gigaom.nav.direction,0),gigaom.$inner_wrapper.css("position","absolute"),gigaom.$nav.width(gigaom.$nav.width()),gigaom.$nav.height(gigaom.$nav.height()),gigaom.$wrapper.css("position","absolute"),gigaom.$wrapper.width(a(window).width()-gigaom.nav.$sidepanel.width()),gigaom.nav.$sidepanel.is(".exposed")||gigaom.nav.$sidepanel.addClass("exposed"),amplify.publish("go-nav-control-open",i)}))},gigaom.nav.animate_sidepanel=function(a,i,e){var o={};o[a]=i,gigaom.$wrapper.animate(o,300,e)},gigaom.nav.toggle_reset=function(){gigaom.nav.val=0,gigaom.$wrapper.css("position","relative"),gigaom.$wrapper.css("width","auto"),gigaom.$inner_wrapper.removeAttr("style"),gigaom.$nav.removeAttr("style"),gigaom.$html_body.removeClass("no-overflow");for(var a in gigaom.nav.panels)gigaom.$html_body.removeClass("show-sidepanel-"+a);gigaom.$html_body.removeAttr("style"),gigaom.nav.$sidepanels.removeClass("exposed"),gigaom.$wrapper.removeAttr("style"),gigaom.nav.animating=!1},gigaom.nav.expandable=function(i){var e=a(i).parent(),o=e.parent(),g=e.children(".content").first();e.is(".active ")?(g.hide(),e.removeClass("active")):(jQuery(".content",o).not(g).hide().parent("li").removeClass("active"),g.show(0,function(){g.parent("li").addClass("active")}))},gigaom.nav.swipe_init=function(){gigaom.$html_body.on("touchstart.nav-swipe",gigaom.nav.swipe_start),gigaom.$html_body.on("touchmove.nav-swipe",gigaom.nav.swipe_move),gigaom.$html_body.on("touchend.nav-swipe",gigaom.nav.swipe_end),gigaom.$html_body.on("touchcancel.nav-swipe",gigaom.nav.swipe_cancel)},gigaom.nav.swipe_start=function(a){gigaom.nav.swipe_x_start=a.originalEvent.pageX,gigaom.nav.swipe_x_latest=a.originalEvent.pageX},gigaom.nav.swipe_move=function(a){gigaom.nav.swipe_x_latest=a.originalEvent.pageX},gigaom.nav.swipe_end=function(a){var i=gigaom.nav.swipe_x_start-gigaom.nav.swipe_x_latest;(i>100&&"left"===gigaom.nav.direction||-100>i&&"right"===gigaom.nav.direction)&&(gigaom.nav.toggle_reset(),gigaom.nav.swipe_cancel(a))},gigaom.nav.swipe_cancel=function(){gigaom.$html_body.off("touchstart.nav-swipe"),gigaom.$html_body.off("touchmove.nav-swipe"),gigaom.$html_body.off("touchend.nav-swipe"),gigaom.$html_body.off("touchcancel.nav-swipe")}}(jQuery);;
gigaom.resize={},function(i){"use strict";gigaom.resize.$reset=null,gigaom.resize.prefix="go-device-",gigaom.resize.states=["full","phone","tablet"],gigaom.resize.initial=!0,gigaom.resize.clear_classes=function(){for(var i in gigaom.resize.states)gigaom.$html_body.removeClass(gigaom.resize.prefix+gigaom.resize.states[i])},gigaom.resize.execute=function(){var e=i(window).width();e>=960?gigaom.resize.set("full"):640>=e?gigaom.resize.set("phone"):960>e&&gigaom.resize.set("tablet"),amplify.publish("go-resize-execute"),gigaom.resize.timer&&clearTimeout(gigaom.resize.timer)},gigaom.resize.init=function(){gigaom.resize.dynamic.init(),amplify.publish("go-resize-init"),gigaom.is_old_ie?gigaom.resize.set("full"):(i(window).resize(gigaom.resize.prep),gigaom.resize.execute()),!0===gigaom.resize.initial&&(amplify.publish("go-resize-initial"),gigaom.resize.initial=!1)},gigaom.resize.prep=function(){clearTimeout(gigaom.resize.timer),gigaom.resize.timer=setTimeout(gigaom.resize.execute,100)},gigaom.resize.reset=function(i){gigaom.resize.clear_classes(),amplify.publish("go-resize-reset",i)},gigaom.resize.reset_handler=function(i){void 0!==this.reset[i.from]&&this.reset[i.from]()},gigaom.resize.set=function(i){if(!gigaom.$html_body.hasClass(gigaom.resize.prefix+i)){var e={from:gigaom.resize.state().replace(gigaom.resize.prefix,""),to:i};gigaom.resize.reset(e),gigaom.$html_body.addClass(gigaom.resize.prefix+e.to),amplify.publish("go-resize",e),amplify.publish("go-resize-"+i,e)}},gigaom.resize.state=function(){var e=null;for(var a in gigaom.resize.states)if(e=i.trim(gigaom.resize.prefix+gigaom.resize.states[a]),gigaom.$html_body.hasClass(e))return i.trim(e);return gigaom.resize.prefix+"phone"},gigaom.resize.timer=null}(jQuery);;
gigaom.resize.dynamic={},function(a){"use strict";gigaom.resize.dynamic.widgets={},gigaom.resize.dynamic.injection_areas={},gigaom.resize.dynamic.full=function(){gigaom.resize.dynamic.device("full")},gigaom.resize.dynamic.init=function(){var i={},e={};for(var o in go_responsive)for(var g in go_responsive[o])go_responsive[o][g].widget&&(gigaom.resize.dynamic.injection_areas[g]?i=gigaom.resize.dynamic.injection_areas[g]:(i={},i.el_class=g,i.$el=a("#"+i.el_class)),e={},e.el_class=go_responsive[o][g].widget,e.$el=a("."+e.el_class),e.$el.length||(e.$el=a("#"+e.el_class)),e.bookmark_class=e.el_class+"_bookmark",(0!==i.$el.length||0!==e.$el.length)&&(gigaom.resize.dynamic.injection_areas[i.el_class]=gigaom.resize.dynamic.injection_areas[i.el_class]||i,gigaom.resize.dynamic.widgets[e.el_class]=gigaom.resize.dynamic.widgets[e.el_class]||e));amplify.subscribe("go-resize-full",gigaom.resize.dynamic.full),amplify.subscribe("go-resize-phone",gigaom.resize.dynamic.phone),amplify.subscribe("go-resize-reset",gigaom.resize.dynamic,gigaom.resize.reset_handler),amplify.subscribe("go-resize-tablet",gigaom.resize.dynamic.tablet)},gigaom.resize.dynamic.device=function(i){var e="",o=null,g=null;for(var n in go_responsive[i])if(e=go_responsive[i][n].widget,gigaom.resize.dynamic.injection_areas[n]&&gigaom.resize.dynamic.widgets[e]){o=gigaom.resize.dynamic.injection_areas[n],g=gigaom.resize.dynamic.widgets[e];var t=g.$el.data("remove-on-inject-classes")||"";g.$el.after('<div class="'+g.bookmark_class+" "+t+'"></div>'),g.$el.prependTo(o.$el);var s=t.split(" "),l=go_responsive[i][n]["class"].split(" ");for(var r in s)-1===a.inArray(s[r],l)&&g.$el.removeClass(s[r]);o.$el.data("responsive_classes",l.join(" ")),o.$el.addClass(l.join(" "))}},gigaom.resize.dynamic.phone=function(){gigaom.resize.dynamic.device("phone")},gigaom.resize.dynamic.reset={},gigaom.resize.dynamic.reset.device=function(i){var e="",o=null,g=null,n=null;for(var t in go_responsive[i])if(e=go_responsive[i][t].widget,gigaom.resize.dynamic.injection_areas[t]&&gigaom.resize.dynamic.widgets[e]){o=gigaom.resize.dynamic.injection_areas[t],g=gigaom.resize.dynamic.widgets[e],n=a("."+g.bookmark_class),g.$el.insertBefore(n),o.$el.html("");var s=g.$el.data("remove-on-inject-classes")||"",l=s.split(" ");for(var r in l)g.$el.hasClass(l[r])||g.$el.addClass(l[r]);o.$el.removeClass(o.$el.data("responsive_classes")),o.$el.data("responsive_classes",""),n.remove()}},gigaom.resize.dynamic.reset.full=function(){gigaom.resize.dynamic.reset.device("full")},gigaom.resize.dynamic.reset.phone=function(){gigaom.resize.dynamic.reset.device("phone")},gigaom.resize.dynamic.reset.tablet=function(){gigaom.resize.dynamic.reset.device("tablet")},gigaom.resize.dynamic.tablet=function(){gigaom.resize.dynamic.device("tablet")}}(jQuery);;
gigaom.text_scale={},function(e){"use strict";gigaom.text_scale.size_huge="text-size-huge",gigaom.text_scale.size_large="text-size-large",gigaom.text_scale.size_normal="text-size-normal",gigaom.text_scale.init=function(){e(document).on("click",".text-scale .larger a",function(e){e.preventDefault(),gigaom.text_scale.increase()}),e(document).on("click",".text-scale .smaller a",function(e){e.preventDefault(),gigaom.text_scale.decrease()}),gigaom.$html_body.addClass(gigaom.text_scale.size_normal)},gigaom.text_scale.decrease=function(){return gigaom.$html_body.hasClass(gigaom.text_scale.size_normal)?void 0:gigaom.$html_body.hasClass(gigaom.text_scale.size_large)?(gigaom.$html_body.addClass(gigaom.text_scale.size_normal).removeClass(gigaom.text_scale.size_large),void 0):(gigaom.$html_body.addClass(gigaom.text_scale.size_large).removeClass(gigaom.text_scale.size_huge),void 0)},gigaom.text_scale.increase=function(){return gigaom.$html_body.hasClass(gigaom.text_scale.size_huge)?void 0:gigaom.$html_body.hasClass(gigaom.text_scale.size_large)?(gigaom.$html_body.addClass(gigaom.text_scale.size_huge).removeClass(gigaom.text_scale.size_large),void 0):(gigaom.$html_body.addClass(gigaom.text_scale.size_large).removeClass(gigaom.text_scale.size_normal),void 0)}}(jQuery);;
gigaom.single={},function(i){"use strict";gigaom.single.init=function(){gigaom.$html_body.hasClass("single")&&(gigaom.single.$subhead=i(".sub-head"),gigaom.single.$thumbnail=i(".thumbnail-container"),gigaom.single.$thumbnail_inject=i(".inject-thumb"),gigaom.single.$comments=i("#comments"),gigaom.single.$comment_form_top=i("#comment-form-top"),gigaom.single.$comment_form_bot=i("#comment-form-bottom"),gigaom.single.pause_comment_waypoints=!1,i(document).on("change","#go-page-select",gigaom.single.nav_change),amplify.subscribe("go-local-bsocial-comment-focus",gigaom.single.comment_focus),amplify.subscribe("go-local-bsocial-comment-unfocus",gigaom.single.comment_unfocus),amplify.subscribe("go-resize",function(){i(".comment.focused").find(".comment-sharing-icons").click(),gigaom.single.adjust_cta_ad()}),i(window).resize(gigaom.single.adjust_cta_ad),i(window).resize(gigaom.single.ooyala_responsive),gigaom.single.thumbnail_relocation(),gigaom.single.colorbox_init(),gigaom.single.comment_waypoint(),gigaom.single.video_init(),gigaom.single.legacy_twitter())},gigaom.single.comment_waypoint=function(){var e=i.waypoints("viewportHeight"),a=i(".comments-list").height();gigaom.single.$comment_form_top.waypoint(function(o,n){gigaom.single.pause_comment_waypoints||"up"===n&&(i(this).html()&&i(this).html().trim()||e>a||gigaom.single.$comment_form_bot.children().appendTo(i(this)))},{offset:function(){return-1*gigaom.single.$comment_form_top.height()}}),gigaom.single.$comment_form_bot.waypoint(function(o,n){gigaom.single.pause_comment_waypoints||"down"===n&&(i(this).html()&&i(this).html().trim()||e>a||gigaom.single.$comment_form_top.children().appendTo(i(this)))},{offset:function(){return i.waypoints("viewportHeight")-i(this).outerHeight()}})},gigaom.single.colorbox_init=function(){var e=i("#body").find("article.post .body").find("img"),a=e.closest("a");a.attr("rel","gallery"),a.each(function(){var e=i(this).attr("href")||"";if(e.match(/\.(jpg|jpeg|gif|png)(\?.*)?$/i)){var a=i(this).closest(".wp-caption"),o="";a.length>0&&(o=a.find(".wp-caption-text").html()),i(document).on("mouseover",".cboxPhoto",function(){i(this).closest("#cboxContent").addClass("cbox-hover")}),i(document).on("mouseout cbox_closed cbox_complete",".cboxPhoto",function(){i(this).closest("#cboxContent").removeClass("cbox-hover")}),i(this).colorbox({title:o,maxHeight:"90%",maxWidth:"90%",onComplete:function(){i("#colorbox").width(i("#cboxWrapper").width()).height(i("#cboxWrapper").height())}})}})},gigaom.single.comment_focus=function(e){if(!gigaom.$wrapper.find(".focus-comment").length){gigaom.single.pause_comment_waypoints=!0;var a=e.find(".children:first"),o=e.offset();gigaom.$body.offset();var n=parseInt(e.outerHeight(),10),g=parseInt(e.outerWidth(),10);a.length&&(n-=parseInt(a.outerHeight(),10));var t=i('<div class="focus-comment focus-comment-top"/>');t.appendTo(gigaom.$wrapper);var s=o.top-i("#comments").offset().top,m=o.left-i("#comments").offset().left,l=e.clone(),r=i('<div class="comment focused-float focused"/>').html(l.children());r.css("top",s),r.css("left",m-10),r.css("width",g+20),r.css("min-height",n),r.appendTo("#comments"),t.css("top",0),t.css("left",0),t.css("right",0),t.css("bottom",0),t.fadeIn("fast"),i(".focus-comment").on("click.comment-focus",function(){e.find(".comment-sharing-icons:first").click()}),i(window).on("keyup.comment-focus",function(i){27===i.keyCode&&e.find(".comment-sharing-icons:first").click()})}},gigaom.single.comment_unfocus=function(){i(".focus-comment").remove(),i(".focused-float.comment").remove(),i(window).off("keyup.comment-focus"),gigaom.single.pause_comment_waypoints=!1},gigaom.single.legacy_twitter=function(){i(".twitter-share-button").each(function(){if(!(i(this).find(".icon-twitter").length>0)){var e="https://twitter.com/intent/tweet";e+="?text="+escape(i(this).data("text")),e+="&url="+i(this).data("url"),i(this).attr("href",e).addClass("tweet-this").text("tweet this").prepend('<i class="goicon icon-twitter"></i> ')}})},gigaom.single.nav_change=function(){window.location=i(this).val()},gigaom.single.thumbnail_relocation=function(){gigaom.single.$thumbnail_inject.length>0&&gigaom.single.$thumbnail.clone().appendTo(gigaom.single.$thumbnail_inject)},gigaom.single.adjust_cta_ad=function(){var e=i("#go-newsletter-email:visible,.cta-section .subscribed:visible");if(e.length){var a=i(".go-bsocial-cta").next(),o=e.offset().top+e.height(),n=a.offset().top+a.height(),g=o-n-3;0>g&&(g=0),a.css("margin-top",g)}},gigaom.single.video_init=function(){"undefined"!=typeof go_video_embed&&OO.ready(function(e){for(var a in go_video_embed){var o=null,n=go_video_embed[a],g="ooyala-video_"+n.embed_hash,t=i("#"+g);t.data("ratio",n.height/n.width).data("original-height",n.height).data("original-width",n.width),o=e.Player.create(g,n.embed_code,{width:n.width,height:n.height,enableChannels:!0}),t.find(".innerWrapper").width("100%"),gigaom.single.ooyala_set_height(n)}})},gigaom.single.ooyala_responsive=function(){if("undefined"!=typeof go_video_embed)for(var i in go_video_embed)gigaom.single.ooyala_set_height(go_video_embed[i])},gigaom.single.ooyala_set_height=function(e){var a=i("#ooyala-video_"+e.embed_hash),o=a.width()*a.data("ratio");a.find(".innerWrapper").height(o)}}(jQuery);;
gigaom.gallery={},function(a){"use strict";gigaom.gallery.activated=!1,gigaom.gallery.init=function(){gigaom.gallery.$gallery=a(".gallery"),gigaom.gallery.$nav=gigaom.gallery.$gallery.find(".gallery-nav"),gigaom.gallery.$nav_inner=gigaom.gallery.$gallery.find(".gallery-nav-inner"),gigaom.gallery.$nav_outer=gigaom.gallery.$gallery.find(".gallery-nav-outer"),gigaom.gallery.$image_list=gigaom.gallery.$gallery.find(".image-list"),amplify.subscribe("go-resize",gigaom.gallery.resize),gigaom.gallery.resize()},gigaom.gallery.activate=function(){var g=!1;gigaom.gallery.$image_list.cycle({timeout:5e3,speed:500,easing:"easeOutExpo",before:function(e,i,l){var t=a(i).prevAll().length;if(gigaom.gallery.$image_list.find("li").eq(t).find(".image-info .count").text(t+1+" / "+l.slideCount),gigaom.gallery.$image_list.find("li").eq(t).find(".image-info .title").text(a.trim(go_gallery_data[t].title)),!g){var r=gigaom.gallery.$nav.find("a").eq(0);r.length>0&&(g=r.outerWidth()+parseInt(r.css("margin-right"),10)+parseInt(r.css("margin-left"),10))}var n=gigaom.gallery.$nav.find("a").eq(t).position();if(n){var o=gigaom.gallery.$image_list.children().length,m=o*g,y=gigaom.gallery.$nav_inner.width(),s=y/g,d=n.left-s/2*g,f=-(y-m);d>f&&(d=f),d>0&&m>y?gigaom.gallery.$nav.animate({left:-d},150,"easeInOutExpo"):0>d&&gigaom.gallery.$nav.animate({left:0},150,"easeInOutExpo")}},pager:".gallery-nav",pagerAnchorBuilder:function(a){return'<a href="#'+a+'" class="image"><img src="'+go_gallery_data[a].thumbnail+'" width="48" height="48"/></a>'},next:".gallery-next",prev:".gallery-prev"}),amplify.publish("go-gallery-init")},gigaom.gallery.resize=function(){if(gigaom.$html_body.is(".go-device-phone"))gigaom.gallery.activated=!1,gigaom.gallery.$image_list.cycle("destroy"),gigaom.gallery.$image_list.find("li").attr("style",""),gigaom.gallery.$image_list.attr("style","");else if(!gigaom.gallery.activated){gigaom.gallery.activated=!0,gigaom.gallery.activate();var a=gigaom.$body.width();gigaom.gallery.$image_list.width(a),gigaom.gallery.$image_list.find("li").width(a)}}}(jQuery);;
gigaom.waterfall={},function(e){"use strict";gigaom.waterfall.init=function(){gigaom.$html_body.hasClass("waterfall")&&(gigaom.waterfall.$daybreak=e(".daybreak"),gigaom.waterfall.$wijax=e(".widget_postloop.go-wijax-aware-default-excerpt"),gigaom.waterfall.add_waypoints())},gigaom.waterfall.add_waypoints=function(){e.waypoints.settings.scrollThrottle=500,gigaom.waterfall.$wijax.waypoint(function(i){i.stopPropagation();var a=e(this),o=a.children(".wijax-excerpt"),t=e.parseJSON(a.find(".wijax-opts").text()),g=o.attr("href");e.ajax({url:g,dataType:"script",cache:!0,success:function(){a.after('<div id="'+a.attr("id")+'-staging" style="display:none;" class="wijax-staging" />');var i=e("#"+a.attr("id")+"-staging");i.append(window[t.varname]||""),gigaom.waterfall.$daybreak.length||i.find(".daybreak").remove(),i.find(".daybreak").each(function(){a.find("#"+e(this).attr("id")).length||e(this).remove()}),i.children().length&&(a.html(i.children()),i.remove())}})},{offset:function(){return e.waypoints("viewportHeight")+750},triggerOnce:!0})},gigaom.waterfall.full=function(){gigaom.waterfall.remove_waypoints(),gigaom.waterfall.add_waypoints()},gigaom.waterfall.phone=function(){gigaom.waterfall.remove_waypoints()},gigaom.waterfall.tablet=function(){gigaom.waterfall.remove_waypoints(),gigaom.waterfall.add_waypoints()},gigaom.waterfall.remove_waypoints=function(){gigaom.waterfall.$wijax.waypoint("remove")}}(jQuery);;
jQuery(function(a){gigaom.init(),a(document).foundationTooltips(),a("input,textarea").placeholder(),a("img[usemap]").rwdImageMaps()});;
if ( typeof gigaom == 'undefined' ) {
	var gigaom = {};
}//end if

(function( $ ) {
	// during the theme init process, determine what channel we're in
	// based on the class in the body and store that in gigaom.channel
	amplify.subscribe( 'go-pre-init', function() {
		// determine channel
		var body_classes = gigaom.$html_body.attr('class').split(' ');
		var channel = $.grep( body_classes, function( value, index ) {
			return 'go-channel-' === value.substring( 0, 11 );
		});

		if ( typeof channel[0] == 'undefined' ) {
			gigaom.channel = '';
		} else {
			gigaom.channel = channel[0].replace('go-channel-', '');
		}//end else
	});
})( jQuery );
;
jQuery(function( $ ) {
	if( ! $.cookie( 'gigaom_privacy_policy' ) )
	{
		var privacy_policy_notice = $( '<div />' ).addClass( 'privacy-policy' ).html(
			'<div class="row">' +
			'<div class="twelve columns">' +
			'<h1>A note to our readers:</h1> ' +
			'<p>By continuing to use the site, you are agreeing to our updated <a href="http://gigaom.com/privacy-policy/" title="Privacy Policy">Privacy Policy</a> and <a href="http://gigaom.com/terms-and-conditions/">Terms of Service</a>.</p>' +
			'<p>This notice is intended to appear only the first time you visit our site on any device.</p>' +
			'<p><a href="#" class="close primary button" title="Close">Close</a></p>' +
			'</div></div>'
		);

		$( '#main' ).before( privacy_policy_notice );

		$( '.privacy-policy .close' ).click( function( e ) {
			e.preventDefault();
			$( this ).closest( '.privacy-policy' ).fadeOut( 'slow' );
		});

		// Once the privacy policy appears on the page, set a cookie so it doesn't re-appear.
		// Set cookie to expire in 548 days
		$.cookie( 'gigaom_privacy_policy', 1, { expires: 548, path: '/' } );
	}
});
;
/**
 * Recurring, pausable timer
 * from: http://jsfiddle.net/timdown/Hkzex/
 */
function RecurringTimer( callback, delay ) {
    var timer_id = false;
    var start, remaining = delay;

    this.pause = function() {
    	if ( ! timer_id ) {
    		return;
    	}// end if

        window.clearTimeout( timer_id );
        timer_id = false;
        remaining -= new Date() - start;
    };

    var resume = function() {
        if ( timer_id ) {
        	return;
        }// end if

		start = new Date();
		timer_id = window.setTimeout( function() {
			remaining = delay;
			timer_id = false;
			resume();
			callback();
		}, remaining );
    };

    this.resume = resume;
}// end RecurringTimer;
/**
 * author Remy Sharp
 * url http://remysharp.com/2009/01/26/element-in-view-event-plugin/
 */
(function ($) {
    function getViewportHeight() {
        var height = window.innerHeight; // Safari, Opera
        var mode = document.compatMode;

        if ( (mode || !$.support.boxModel) ) { // IE, Gecko
            height = (mode == 'CSS1Compat') ?
            document.documentElement.clientHeight : // Standards
            document.body.clientHeight; // Quirks
        }

        return height;
    }

    $(window).scroll(function () {
        var vpH = getViewportHeight(),
            scrolltop = (document.documentElement.scrollTop ?
                document.documentElement.scrollTop :
                document.body.scrollTop),
            elems = [];

        // naughty, but this is how it knows which elements to check for
        $.each($.cache, function () {
            if (this.events && this.events.inview) {
                elems.push(this.handle.elem);
            }
        });

        if (elems.length) {
            $(elems).each(function () {
                var $el = $(this),
                    top = $el.offset().top,
                    height = $el.height(),
                    inview = $el.data('inview') || false;

                if (scrolltop > (top + height) || scrolltop + vpH < top) {
                    if (inview) {
                        $el.data('inview', false);
                        $el.trigger('inview', [ false ]);
                    }
                } else if (scrolltop < (top + height)) {
                    if (!inview) {
                        $el.data('inview', true);
                        $el.trigger('inview', [ true ]);
                    }
                }
            });
        }
    });

    // kick the event to pick up any elements already in view.
    // note however, this only works if the plugin is included after the elements are bound to 'inview'
    $(function () {
        $(window).scroll();
    });
})(jQuery);;
if ( typeof gigaom == 'undefined' ) {
	var gigaom = {};
}//end if

gigaom.events = {
	articles: {},
	notify_posts: [],
	data: {}
};

( function( $ ) {
	"use strict";

	gigaom.events.notify_cookie_id = 'go_events_navigation';

	gigaom.events.init = function() {
		// register a new sidepanel
		gigaom.nav.panels.events = {
			name: 'events',
			direction: 'right',
			control: 'body:not(.go-device-full) .nav-events a'
		};

		gigaom.nav.init_sidepanel( 'events' );

		gigaom.events.$nav_events = gigaom.$nav.find('.nav-events');
		gigaom.events.$control = gigaom.$nav.find('.control-events');
		gigaom.events.$notification = gigaom.events.$control.find('.notification');

		gigaom.events.cookie = gigaom.events.get_cookie( gigaom.events.notify_cookie_id );

		// we need the utc_timestamp. Let's calc it once and store it
		var date_current            = new Date();
		var date_utc                = new Date( date_current.getUTCFullYear(), date_current.getUTCMonth(), date_current.getUTCDate(), date_current.getUTCHours(), date_current.getUTCMinutes(), date_current.getUTCSeconds() );
		gigaom.events.utc_timestamp = Math.floor( date_utc.getTime() / 1000 );

		amplify.request.define('load_articles', 'ajax', {
			url: go_events_endpoint_url,
			dataType: 'jsonp',
			type: 'GET',
			cache: 15000
		});

		// subscribe to interactions with the nav control
		amplify.subscribe( 'go-nav-control-open', gigaom.events.go_nav_control_open );
		amplify.request( 'load_articles', gigaom.events.load_articles );

		$(document).on( 'click', '.e-to-top', function( e ) {
			e.preventDefault();
			$('html,body').animate({ scrollTop: 0 }, 600, function() {
				if ( gigaom.$html_body.hasClass('go-device-full') ) {
					$('#nav .nav-events').mouseover();
				} else {
					gigaom.nav.toggle( 'events', 'right' );
				}//end else
			});
		});
	};

	gigaom.events.load_articles = function( data ) {
		var template              = $('#event-post-tpl').html();
		var $events               = $('.nav-events');
		var $sidepanel            = $('.sidepanel.events');

		var utm = {
			utm_source: gigaom.channel,
			utm_medium: 'nav',
			utm_campaign: 'events-nav'
		};

		gigaom.events.sections = {
			conference: {
				$container: $events.find('.conferences'),
				$side_container: $sidepanel.find('.conferences')
			},
			webinar: {
				$container: $events.find('.webinars'),
				$side_container: $sidepanel.find('.webinars')
			},
			editorial: {
				$container: $events.find('.editorial'),
				$side_container: $sidepanel.find('.editorial')
			}
		};

		gigaom.events.data = data;

		// compile articles into HTML
		for ( var id in data ) {
			// set the content for the UTM
			utm.utm_content = data[ id ].encoded_title;

			// construct a query string from the utm object
			var utm_query_string = $.param( utm );

			// append utm data onto URL
			if ( data[ id ].url.indexOf( '?' ) >= 0 ) {
				data[ id ].url += '&' + utm_query_string;
			} else {
				data[ id ].url += '?' + utm_query_string;
			}//end else

			data[ id ].compiled = $.mustache( template, data[ id ] );

			gigaom.events.sections[ data[ id ].event_type ].$container.append( data[ id ].compiled );
			gigaom.events.sections[ data[ id ].event_type ].$side_container.append( data[ id ].compiled );

			gigaom.events.maybe_queue_notify( data, id );
		}//end for

		// if set a class to indicate sections should be shown if they contain
		// articles
		for ( var section in gigaom.events.sections ) {
			if ( gigaom.events.sections[ section ].$container.find('.event').length ) {
				$events.addClass( 'has-' + section );
				$sidepanel.addClass( 'has-' + section );
			}//end if
		}//end for

		amplify.publish( 'go-event-navigation-events-loaded' );

		// show the number on the icon
		gigaom.events.notify();
	};

	gigaom.events.maybe_queue_notify = function( data, id ) {
		var event_state_is_recent = ( data[ id ].state.timestamp + 432000 ) >= gigaom.events.utc_timestamp;
		var exists = false;
		var is_new = false;

		if ( 'new' === data[ id ].state.type && event_state_is_recent ) {
			exists = gigaom.events.cookie.hasOwnProperty( id );

			if ( ! exists || ( exists && gigaom.events.cookie[ id ].timestamp < data[ id ].state.timestamp ) ) {
				gigaom.events.notify_posts.push( data[ id ] );
				is_new = true;
			}//end if
		}//end if

		if ( ! is_new ) {
			$('.' + id ).removeClass('new');
		}//end if
	};

	/**
	 * notify the user of something
	 */
	gigaom.events.notify = function() {
		if ( ! gigaom.events.notify_posts.length ) {
			return;
		}//end if

		gigaom.events.$notification.html( gigaom.events.notify_posts.length );
		gigaom.events.$nav_events.addClass('notify');
	};

	gigaom.events.set_cookie = function( cookie_id, data ) {
		$.cookie( cookie_id, JSON.stringify( data ), {
			expires: 365,
			path: '/'
		});
	};

	gigaom.events.get_cookie = function( cookie_id ) {
		var cookie = $.cookie( cookie_id );

		if ( ! cookie ) {
			return {};
		}//end if

		return JSON.parse( cookie );
	};

	/**
	 * if the events nav item opens, remove the notification
	 */
	gigaom.events.go_nav_control_open = function( panel ) {
		if ( 'events' === panel ) {
			gigaom.events.$nav_events.removeClass('notify');
			gigaom.events.set_all_notifications_seen();
		}//end if
	};

	/**
	 * Once a notification has been seen, set the cookie with the right data
	 */
	gigaom.events.set_all_notifications_seen = function() {
		var data = {};

		for ( var i in gigaom.events.data ) {
			data[ i ] = gigaom.events.data[ i ].state;
		}//end for

		gigaom.events.set_cookie( gigaom.events.notify_cookie_id, data );
	};
})( jQuery );

amplify.subscribe( 'go-nav-init', gigaom.events.init );

;
if ( typeof gigaom == 'undefined' ) {
	var gigaom = {};
}//end if

if ( typeof gigaom.events == 'undefined' ) {
	gigaom.events = {};
}//end if

gigaom.events.balloon = {};

( function( $ ) {
	"use strict";

	gigaom.events.balloon.cookie_id = 'go_events_balloon';
	gigaom.events.balloon.count = 0;
	gigaom.events.balloon.max_count = 3; // in seconds

	/**
	 * Setup the balloon
	 */
	gigaom.events.balloon.init = function() {
		if ( gigaom.events.balloon.show() ) {
			gigaom.events.balloon.inflate();

			// create the timer
			gigaom.events.balloon.timer = new RecurringTimer( function() {
				gigaom.events.balloon.count++;

				if ( gigaom.events.balloon.count >= gigaom.events.balloon.max_count ) {
					gigaom.events.balloon.finish();
				}// end if
			}, 1000);

			// start the timer
			gigaom.events.balloon.timer.resume();

			// stop/start the timer when the balloon scrolls out of the viewport
			gigaom.events.$balloon.bind( 'inview', function( event, visible ) {
				if ( true === visible ) {
					gigaom.events.balloon.timer.resume();
				} else {
					gigaom.events.balloon.timer.pause();
				}// end else
			});

			$(document).on( 'mouseover', '.event-balloon', function() {
				gigaom.events.balloon.timer.pause();
			});

			$(document).on( 'mouseout', '.event-balloon', function() {
				gigaom.events.balloon.timer.resume();
			});
		} else {
			gigaom.events.notify();
		}// end else
	};

	gigaom.events.balloon.inflate = function() {
		gigaom.events.$balloon = gigaom.events.balloon.find_event().clone( true );

		if ( ! gigaom.events.$balloon.length ) {
			return;
		}//end if

		// watch for window resizes and resize the balloon accordingly
		amplify.subscribe( 'go-resize-execute', gigaom.events.balloon.resize );

		var $secondary_nav = $('#nav .header .secondary');

		// make sure the balloon is hidden and then add it to the DOM
		gigaom.events.$balloon.addClass('event-balloon').css( { visibility: 'hidden' } );
		gigaom.events.$balloon.prependTo( $secondary_nav );

		// fix the utm code for the balloon so it tracks appropriately
		var $link = gigaom.events.$balloon.find('header a');
		$link.attr( 'href', $link.attr('href').replace('events-nav', 'events-nav-balloon') );
		$link.attr( 'href', $link.attr('href').replace('events-nav-balloon-balloon', 'events-nav-balloon') );

		// To support balloon resizes, we need to get the max widths of the title and body.
		var $article = gigaom.events.$balloon.clone();

		$article.css({
			bottom: 0,
			display: 'block',
			left: 0,
			margin: 0,
			padding: 0,
			position: 'absolute',
			right: 0,
			top: 0,
			visibility: 'hidden',
			width: 960
		});

		$article.appendTo( $secondary_nav );

		// grab the widths
		var title_width = gigaom.events.balloon.element_max_width( $article.find('header') );
		var body_width  = gigaom.events.balloon.element_max_width( $article.find('.body') );
		var max_width   = title_width + body_width + 36;

		$article.remove();

		// if the max width is greater than 960, force 960
		if ( max_width > 960 ) {
			max_width = 960;
		}//end if

		// store the width data in the balloon
		gigaom.events.$balloon.data( 'title-width', title_width );
		gigaom.events.$balloon.data( 'body-width', body_width );
		gigaom.events.$balloon.data( 'max-width', max_width );

		// resize the balloon
		gigaom.events.balloon.resize();

		gigaom.events.$control.append( '<span class="arrow"></span>' );

		// make the balloon clickable
		gigaom.events.$balloon.on( 'click', function( e ) {
			e.preventDefault();

			var href = $(this).find( 'header a' ).attr('href');
			document.location = href;
		});

		// show the balloon
		gigaom.events.$balloon.css( { visibility: 'visible' } );

		amplify.publish( 'go-event-navigation-balloon-inflate' );
	};

	/**
	 * Computing the width of an element within an absolutely position element sucks.
	 * As such, we have to wrap the text of the element with a span, grab the width of
	 * that, then revert.  That's what this function does.
	 */
	gigaom.events.balloon.element_max_width = function( $el ) {
		$el.css({
			display: 'block',
			position: 'absolute',
			width: 960
		});

		var original_html = $el.html();
		var temp_html = '<span>' + original_html + '</span>';

		$el.html( temp_html );
		
		var width = $el.find('span:first').outerWidth();

		return width;
	};

	/**
	 * resizes the balloon based on viewport width
	 */
	gigaom.events.balloon.resize = function() {
		var available_space = 960;

		if ( ! gigaom.$html_body.is('.go-device-full') ) {
			var control_offset   = gigaom.events.$control.offset();
			var hamburger_offset = $('#nav-toggle').offset();
			var hamburger_width  = $('#nav-toggle').outerWidth();

			// Compute the available space based on the position of the hamburger and control.
			// For full width, the available space will be 0
			available_space  = control_offset.left - hamburger_offset.left - hamburger_width;
		}//end if

		// grab the max with stored in the balloon
		var max_width = gigaom.events.$balloon.data('max-width');

		// Choose the smaller of the two widths
		var new_width = max_width < available_space ? max_width : available_space;

		gigaom.events.$balloon.css( { width: new_width } );
	};

	/**
	 * find the most recent new conference
	 */
	gigaom.events.balloon.find_event = function() {
		var events = gigaom.events.get_cookie( gigaom.events.balloon.cookie_id );
		
		var $balloon = $();

		gigaom.events.sections.conference.$container.find('.event.new').each( function() {
			var $el = $(this);

			if ( ! $balloon.length && typeof events['conference-' + $el.data('id')] == 'undefined' ) {
				$balloon = $el;
			}//end if
		});

		return $balloon;
	};

	/**
	 * fade out the balloon
	 */
	gigaom.events.balloon.pop = function() {
		var $arrow = gigaom.events.$control.find('.arrow');

		$arrow.fadeOut( 'fast' );
		gigaom.events.$balloon.fadeOut( 'fast' );

		$arrow.promise().done( function() {
			$(this).remove();
		});

		gigaom.events.$balloon.promise().done( function() {
			$(this).remove();
			delete gigaom.events.$balloon;
		});

		// don't listen for resizes anymore
		amplify.unsubscribe( 'go-resize-execute', gigaom.events.balloon.resize );
	};

	/**
	 * should determine if the balloon should be shown based on coookie
	 * @return boolean
	 */
	gigaom.events.balloon.show = function() {
		var $event = gigaom.events.balloon.find_event();

		if ( ! $event.length ) {
			return false;
		}
		return true;
	};

	/**
	 * Should set the cookie and stop the timer
	 */
	gigaom.events.balloon.finish = function() {

		gigaom.events.balloon.timer.pause();

		if ( typeof gigaom.events.$balloon == 'undefined' ) {
			return;
		}// end if

		// set the cookie so it is not seen again
		var index = 'conference-' + gigaom.events.$balloon.data('id');
		var data = gigaom.events.get_cookie( gigaom.events.balloon.cookie_id ) || {};
		data[index] = gigaom.events.data[ index ].state;

		// purge data that's no longer on the page or no longer new
		for ( var i in data ) {
			var $el = $( '.' + i );

			if ( ! $el.length || ! $el.hasClass('new') ) {
				delete data[ i ];
			}//end if
		}//end for

		gigaom.events.set_cookie( gigaom.events.balloon.cookie_id, data );

		// make it disappear in the UI
		gigaom.events.balloon.pop();
	};
})(jQuery);

amplify.subscribe( 'go-event-navigation-events-loaded', gigaom.events.balloon.init );
;
jQuery(function($){
	$(document).on( 'click', '.comment-sharing-icons', function ( e ) {
		e.preventDefault();

		// we have to do this little dance (on the next two lines) to support
		// hiding floated/lightboxed comments
		var comment_id = $(this).closest( '.comment' ).find('.div-comment').attr('id');
		var $comment   = $('#' + comment_id).closest('.comment');

		var $social = $comment.find('.social:first');
		if ( $social.is( ':hidden' ) ) {
			$comment.addClass('focused');
			$social.slideDown('fast', function() {
				amplify.publish( 'go-local-bsocial-comment-focus', $comment );
			});
		} else {
			$comment.removeClass('focused');
			$social.slideUp('fast');
			amplify.publish( 'go-local-bsocial-comment-unfocus', $comment );
		}
	});

	$(document).on( 'click', '.comment .sharing-cancel', function( e ) {
		e.preventDefault();
		$(this).closest('.comment').find('.comment-sharing-icons:first').click();
	});

	$(document).on( 'click', '.cancel-reply', function( e ) {
		e.preventDefault();

		var $comment_reply = $('#comment-reply-form');
		$comment_reply.find('#comment_parent').val(0);
		$comment_reply.children().appendTo('#comment-form-top');
		$comment_reply.remove();
	});

	$(document).on( 'click', '.comment-reply-link', function( e ) {
		e.preventDefault();

		var $el = $(this);
		var comment_id      = $el.closest('.comment').data('comment-id');
		var $comment_form   = $('#comment-form-top, #comment-form-bottom');
		var $comment_parent = $comment_form.find('#comment_parent');

		$el.closest('.comment-sharing').after('<div id="comment-reply-form"/>');
		$comment_form.children().appendTo('#comment-reply-form');
		$comment_parent.val( comment_id );
	});

	var twitter_url_base = 'https://twitter.com/intent/tweet';

	$('blockquote:not(.twitter-tweet), .sub-head .excerpt').each( function() {
		var $el = $(this);
		var $paragraphs = $el.find('p');
		var $post = $el.closest('.post');
		var url = twitter_url_base + '?url=' + $post.find('.entry-title a').attr('href');

		var type = 'Quote';
		var max_length = parseInt( go_local_bsocial.quote_max_length, 10 );

		if ( $el.hasClass('excerpt') ) {
			type = 'Excerpt';
		}//end if

		$el.append( tweet_this( url, type, $paragraphs, max_length ) );
	});

	function tweet_this( url, type, $paragraphs, max_length ) {
		var text = '';
		var orig_max_length = max_length;

		$paragraphs.each( function() {
			// use the browser to strip out html from the paragraph
			// by creating a temp HTML element and leveraging DOM properties
			// via: http://stackoverflow.com/a/822486/124581
			var tmp_div = document.createElement('DIV');
			tmp_div.innerHTML = $(this).html();
			var stripped_text = tmp_div.textContent || tmp_div.innerText;

			if ( ( text.length + stripped_text.length ) >= orig_max_length ) {
				max_length = orig_max_length - 4;
			}//end if

			var words = stripped_text.split(' ');

			for( var i in words ) {
				if ( text.length + words[ i ].length + 1 <= max_length + 1 ) {
					if ( $.trim( words[ i ] ) ) {
						text += words[ i ] + ' ';
					}//end if
				} else {
					break;
				}//end else
			}//end for
		});

		var excerpt = 'From @' + go_local_bsocial.twitter_id + ': %22' + $.trim( text );

		if ( max_length !== orig_max_length ) {
			excerpt += '...';
		}//end if

		url += '&amp;text=' + excerpt + '%22';

		return '<div class="social"><a href="' + url +'" title="Tweet this" class="tweet-this"><i class="goicon icon-twitter"></i>tweet this</a></div>';
	}//end tweet_this
});
;
var go_local_bsocial_cta = {
	just_subscribed: false,
	$form: null
};

( function( $ ) {
	go_local_bsocial_cta.init = function() {
		amplify.subscribe( 'go-local-bsocial-cta-loaded', function() {
			go_local_bsocial_cta.$subscribe = $('.go-bsocial-cta .newsletter');

			$(document).GoIdentity('check_identity');
		});

		amplify.subscribe( 'go-auth-success', go_local_bsocial_cta.auth_success );
	};

	/**
	 * when authorization is successful, this function parses the user object and
	 * determines what UI elements to toggle
	 */
	go_local_bsocial_cta.auth_success = function( user ) {
		var newsletter = user.go_newsletter_subscriptions || {};
		var count = 0;
		var $form = $('.go-bsocial-cta .newsletter form');

		// set newsletter email field if we have an email for this user
		if ( '' !== user.user_email ) {
			 $('.go-bsocial-cta .newsletter input[name="email"]').attr('value', user.user_email);
		}

		// because the auth object isn't formatted in an ideal way, we have to loop over
		// the newsletter properties and and count the possible valid keys
		for ( var key in newsletter) {
			if ( 'email' === key || 'messageType' === key || 'newsletterSave' === key ) {
				continue;
			}//end if

			count++;
		}//end for

		if ( count ) {
			if ( go_local_bsocial_cta.maybe_just_subscribed ) {
				$form.closest('.newsletter').unblock();
				go_local_bsocial_cta.$subscribe.find('.subscribed').html("<p>Thanks for subscribing! You will receive your first newsletter as soon as it's published.</p>");
			}//end if

			go_local_bsocial_cta.$subscribe.addClass('subscribed');
		}//end if
		else if ( go_local_bsocial_cta.maybe_just_subscribed ) {
			window.location = $form.attr('action');
		}//end if
	};
})( jQuery );

go_local_bsocial_cta.init();
;
gigaom.gravatar = {};

gigaom.gravatar.refresh_avatars = function() {
	jQuery('.avatar-placeholder').each(function(){
		var $src     = jQuery(this).attr('href');
		var new_html = '<img class="avatar avatar-55 photo avatar-default" height="55" width="55" src="' + $src + '">';
		jQuery(this).replaceWith(new_html);
	});
}

jQuery(window).load( function($) {
	gigaom.gravatar.refresh_avatars();
});
;
/*!
 * jQuery Tools v1.2.5 - The missing UI library for the Web
 * 
 * overlay/overlay.js
 * toolbox/toolbox.expose.js
 * tooltip/tooltip.js
 * 
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 * 
 * http://flowplayer.org/tools/
 * 
 */
(function(a){a.tools=a.tools||{version:"v1.2.5"},a.tools.overlay={addEffect:function(a,b,d){c[a]=[b,d]},conf:{close:null,closeOnClick:!0,closeOnEsc:!0,closeSpeed:"fast",effect:"default",fixed:!a.browser.msie||a.browser.version>6,left:"center",load:!1,mask:null,oneInstance:!0,speed:"normal",target:null,top:"10%"}};var b=[],c={};a.tools.overlay.addEffect("default",function(b,c){var d=this.getConf(),e=a(window);d.fixed||(b.top+=e.scrollTop(),b.left+=e.scrollLeft()),b.position=d.fixed?"fixed":"absolute",this.getOverlay().css(b).fadeIn(d.speed,c)},function(a){this.getOverlay().fadeOut(this.getConf().closeSpeed,a)});function d(d,e){var f=this,g=d.add(f),h=a(window),i,j,k,l=a.tools.expose&&(e.mask||e.expose),m=Math.random().toString().slice(10);l&&(typeof l=="string"&&(l={color:l}),l.closeOnClick=l.closeOnEsc=!1);var n=e.target||d.attr("rel");j=n?a(n):null||d;if(!j.length)throw"Could not find Overlay: "+n;d&&d.index(j)==-1&&d.click(function(a){f.load(a);return a.preventDefault()}),a.extend(f,{load:function(d){if(f.isOpened())return f;var i=c[e.effect];if(!i)throw"Overlay: cannot find effect : \""+e.effect+"\"";e.oneInstance&&a.each(b,function(){this.close(d)}),d=d||a.Event(),d.type="onBeforeLoad",g.trigger(d);if(d.isDefaultPrevented())return f;k=!0,l&&a(j).expose(l);var n=e.top,o=e.left,p=j.outerWidth({margin:!0}),q=j.outerHeight({margin:!0});typeof n=="string"&&(n=n=="center"?Math.max((h.height()-q)/2,0):parseInt(n,10)/100*h.height()),o=="center"&&(o=Math.max((h.width()-p)/2,0)),i[0].call(f,{top:n,left:o},function(){k&&(d.type="onLoad",g.trigger(d))}),l&&e.closeOnClick&&a.mask.getMask().one("click",f.close),e.closeOnClick&&a(document).bind("click."+m,function(b){a(b.target).parents(j).length||f.close(b)}),e.closeOnEsc&&a(document).bind("keydown."+m,function(a){a.keyCode==27&&f.close(a)});return f},close:function(b){if(!f.isOpened())return f;b=b||a.Event(),b.type="onBeforeClose",g.trigger(b);if(!b.isDefaultPrevented()){k=!1,c[e.effect][1].call(f,function(){b.type="onClose",g.trigger(b)}),a(document).unbind("click."+m).unbind("keydown."+m),l&&a.mask.close();return f}},getOverlay:function(){return j},getTrigger:function(){return d},getClosers:function(){return i},isOpened:function(){return k},getConf:function(){return e}}),a.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(b,c){a.isFunction(e[c])&&a(f).bind(c,e[c]),f[c]=function(b){b&&a(f).bind(c,b);return f}}),i=j.find(e.close||".close"),!i.length&&!e.close&&(i=a("<a class=\"close\"></a>"),j.prepend(i)),i.click(function(a){f.close(a)}),e.load&&f.load()}a.fn.overlay=function(c){var e=this.data("overlay");if(e)return e;a.isFunction(c)&&(c={onBeforeLoad:c}),c=a.extend(!0,{},a.tools.overlay.conf,c),this.each(function(){e=new d(a(this),c),b.push(e),a(this).data("overlay",e)});return c.api?e:this}})(jQuery);
(function(a){a.tools=a.tools||{version:"v1.2.5"};var b;b=a.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:!0,closeOnEsc:!0,zIndex:9998,opacity:.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};function c(){if(a.browser.msie){var b=a(document).height(),c=a(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,b-c<20?c:b]}return[a(document).width(),a(document).height()]}function d(b){if(b)return b.call(a.mask)}var e,f,g,h,i;a.mask={load:function(j,k){if(g)return this;typeof j=="string"&&(j={color:j}),j=j||h,h=j=a.extend(a.extend({},b.conf),j),e=a("#"+j.maskId),e.length||(e=a("<div/>").attr("id",j.maskId),a("body").append(e));var l=c();e.css({position:"absolute",top:0,left:0,width:l[0],height:l[1],display:"none",opacity:j.startOpacity,zIndex:j.zIndex}),j.color&&e.css("backgroundColor",j.color);if(d(j.onBeforeLoad)===!1)return this;j.closeOnEsc&&a(document).bind("keydown.mask",function(b){b.keyCode==27&&a.mask.close(b)}),j.closeOnClick&&e.bind("click.mask",function(b){a.mask.close(b)}),a(window).bind("resize.mask",function(){a.mask.fit()}),k&&k.length&&(i=k.eq(0).css("zIndex"),a.each(k,function(){var b=a(this);/relative|absolute|fixed/i.test(b.css("position"))||b.css("position","relative")}),f=k.css({zIndex:Math.max(j.zIndex+1,i=="auto"?0:i)})),e.css({display:"block"}).fadeTo(j.loadSpeed,j.opacity,function(){a.mask.fit(),d(j.onLoad),g="full"}),g=!0;return this},close:function(){if(g){if(d(h.onBeforeClose)===!1)return this;e.fadeOut(h.closeSpeed,function(){d(h.onClose),f&&f.css({zIndex:i}),g=!1}),a(document).unbind("keydown.mask"),e.unbind("click.mask"),a(window).unbind("resize.mask")}return this},fit:function(){if(g){var a=c();e.css({width:a[0],height:a[1]})}},getMask:function(){return e},isLoaded:function(a){return a?g=="full":g},getConf:function(){return h},getExposed:function(){return f}},a.fn.mask=function(b){a.mask.load(b);return this},a.fn.expose=function(b){a.mask.load(b,this);return this}})(jQuery);
(function(a){a.tools=a.tools||{version:"v1.2.5"},a.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(a,c,d){b[a]=[c,d]}};var b={toggle:[function(a){var b=this.getConf(),c=this.getTip(),d=b.opacity;d<1&&c.css({opacity:d}),c.show(),a.call()},function(a){this.getTip().hide(),a.call()}],fade:[function(a){var b=this.getConf();this.getTip().fadeTo(b.fadeInSpeed,b.opacity,a)},function(a){this.getTip().fadeOut(this.getConf().fadeOutSpeed,a)}]};function c(b,c,d){var e=d.relative?b.position().top:b.offset().top,f=d.relative?b.position().left:b.offset().left,g=d.position[0];e-=c.outerHeight()-d.offset[0],f+=b.outerWidth()+d.offset[1],/iPad/i.test(navigator.userAgent)&&(e-=a(window).scrollTop());var h=c.outerHeight()+b.outerHeight();g=="center"&&(e+=h/2),g=="bottom"&&(e+=h),g=d.position[1];var i=c.outerWidth()+b.outerWidth();g=="center"&&(f-=i/2),g=="left"&&(f-=i);return{top:e,left:f}}function d(d,e){var f=this,g=d.add(f),h,i=0,j=0,k=d.attr("title"),l=d.attr("data-tooltip"),m=b[e.effect],n,o=d.is(":input"),p=o&&d.is(":checkbox, :radio, select, :button, :submit"),q=d.attr("type"),r=e.events[q]||e.events[o?p?"widget":"input":"def"];if(!m)throw"Nonexistent effect \""+e.effect+"\"";r=r.split(/,\s*/);if(r.length!=2)throw"Tooltip: bad events configuration for "+q;d.bind(r[0],function(a){clearTimeout(i),e.predelay?j=setTimeout(function(){f.show(a)},e.predelay):f.show(a)}).bind(r[1],function(a){clearTimeout(j),e.delay?i=setTimeout(function(){f.hide(a)},e.delay):f.hide(a)}),k&&e.cancelDefault&&(d.removeAttr("title"),d.data("title",k)),a.extend(f,{show:function(b){if(!h){l?h=a(l):e.tip?h=a(e.tip).eq(0):k?h=a(e.layout).addClass(e.tipClass).appendTo(document.body).hide().append(k):(h=d.next(),h.length||(h=d.parent().next()));if(!h.length)throw"Cannot find tooltip for "+d}if(f.isShown())return f;h.stop(!0,!0);var o=c(d,h,e);e.tip&&h.html(d.data("title")),b=b||a.Event(),b.type="onBeforeShow",g.trigger(b,[o]);if(b.isDefaultPrevented())return f;o=c(d,h,e),h.css({position:"absolute",top:o.top,left:o.left}),n=!0,m[0].call(f,function(){b.type="onShow",n="full",g.trigger(b)});var p=e.events.tooltip.split(/,\s*/);h.data("__set")||(h.bind(p[0],function(){clearTimeout(i),clearTimeout(j)}),p[1]&&!d.is("input:not(:checkbox, :radio), textarea")&&h.bind(p[1],function(a){a.relatedTarget!=d[0]&&d.trigger(r[1].split(" ")[0])}),h.data("__set",!0));return f},hide:function(c){if(!h||!f.isShown())return f;c=c||a.Event(),c.type="onBeforeHide",g.trigger(c);if(!c.isDefaultPrevented()){n=!1,b[e.effect][1].call(f,function(){c.type="onHide",g.trigger(c)});return f}},isShown:function(a){return a?n=="full":n},getConf:function(){return e},getTip:function(){return h},getTrigger:function(){return d}}),a.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(b,c){a.isFunction(e[c])&&a(f).bind(c,e[c]),f[c]=function(b){b&&a(f).bind(c,b);return f}})}a.fn.tooltip=function(b){var c=this.data("tooltip");if(c)return c;b=a.extend(!0,{},a.tools.tooltip.conf,b),typeof b.position=="string"&&(b.position=b.position.split(/,?\s/)),this.each(function(){c=new d(a(this),b),a(this).data("tooltip",c)});return b.api?c:this}})(jQuery);
;
jQuery(document).ready(function($){
	$.refreshWijaxExcerpt = function (excerpt){
		var id = $(excerpt).attr('id');

		//refresh the google plusone button
		gapi.plusone.render($('#' + id).find('.google-share').get(0),
				{
					"size": "medium",
			"href": $('#' + id).find('.google-share').children().attr('href')
				}
				);

		//refresh the Facebook button
		FB.XFBML.parse(document.getElementById(id));

		//render the twitter button
		$('#' + id).find('.twitter-share').html('<iframe allowtransparency="true" frameborder="0" scrolling="no"' +
				' src="http://platform.twitter.com/widgets/tweet_button.html?via=gigaom&amp;url=' + $('#' + id).find('.twitter-share a').attr('data-url') +
				'" style="width:130px; height:20px;"></iframe>'
				);

		//refresh the LinkedIn button
		IN.parse(document.getElementById(id));
	}

	function addWaypoints(){
		$.waypoints.settings.scrollThrottle = 500;

		$('.widget_postloop').find('.go-wijax-aware-default-excerpt').waypoint(function(event, direction){
			event.stopPropagation();
			var wijax_element = $(this).children('a.wijax-excerpt');
			var widget_source = $(wijax_element).attr('href');
			var widget_area   = $(this);
			var opts = $.parseJSON( $(widget_area).find('span.wijax-opts').text() );

			if ( ! opts ) {
				return;
			}//end if

			var varname = opts.varname;

			$.ajax({
				url: widget_source,
				dataType: 'script',
				cache: true,
				success: function() {
					// insert the fetched markup
					$( widget_area ).replaceWith( window[varname] ).find('.post').each(function(i,el){
						$.goRefreshSocialShares();
					});
				}
			});
		},
		{
			offset: function() { return $.waypoints('viewportHeight') + 750; },
			triggerOnce: true
		});
	}
	$(window).load(function(){
		addWaypoints();
	});
});
;
jQuery(document).ready(function($){
	$('#credential-inline-header').find('li a').each(function(i, el){
		$(this).click(function(event){
			event.preventDefault();
			var url = $(this).attr('href');
			popup   = window.open(url, '', 'width=480,height=480');

			var timer = setInterval(function() {
				if(popup !== null) {
					if(popup.closed) {
						clearInterval(timer);
						return $(document).GoIdentity('check_identity', 'reload_page', true);
					}
				}
			}, 1000);
		});
	});
});
;
/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){function i(t,i){var a,n,r,o=t.nodeName.toLowerCase();return"area"===o?(a=t.parentNode,n=a.name,t.href&&n&&"map"===a.nodeName.toLowerCase()?(r=e("img[usemap=#"+n+"]")[0],!!r&&s(r)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var a=0,n=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var s,a,n=e(this[0]);n.length&&n[0]!==document;){if(s=n.css("position"),("absolute"===s||"relative"===s||"fixed"===s)&&(a=parseInt(n.css("zIndex"),10),!isNaN(a)&&0!==a))return a;n=n.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){n.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var s=e.attr(t,"tabindex"),a=isNaN(s);return(a||s>=0)&&i(t,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,s){function a(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===s?["Left","Right"]:["Top","Bottom"],r=s.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+s]=function(i){return i===t?o["inner"+s].call(this):this.each(function(){e(this).css(r,a(this,i)+"px")})},e.fn["outer"+s]=function(t,i){return"number"!=typeof t?o["outer"+s].call(this,t):this.each(function(){e(this).css(r,a(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,s){var a,n=e.ui[t].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(e,t,i){var s,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(s=0;a.length>s;s++)e.options[a[s][0]]&&a[s][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[s]>0?!0:(t[s]=1,a=t[s]>0,t[s]=0,a)}})})(jQuery);;
/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e,t){var i=0,s=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler("remove")}catch(a){}n(t)},e.widget=function(i,s,n){var a,r,o,h,l={},u=i.split(".")[0];i=i.split(".")[1],a=u+"-"+i,n||(n=s,s=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[u]=e[u]||{},r=e[u][i],o=e[u][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new o(e,i)},e.extend(o,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),h=new s,h.options=e.widget.extend({},h.options),e.each(n,function(i,n){return e.isFunction(n)?(l[i]=function(){var e=function(){return s.prototype[i].apply(this,arguments)},t=function(e){return s.prototype[i].apply(this,e)};return function(){var i,s=this._super,a=this._superApply;return this._super=e,this._superApply=t,i=n.apply(this,arguments),this._super=s,this._superApply=a,i}}(),t):(l[i]=n,t)}),o.prototype=e.widget.extend(h,{widgetEventPrefix:r?h.widgetEventPrefix:i},l,{constructor:o,namespace:u,widgetName:i,widgetFullName:a}),r?(e.each(r._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete r._childConstructors):s._childConstructors.push(o),e.widget.bridge(i,o)},e.widget.extend=function(i){for(var n,a,r=s.call(arguments,1),o=0,h=r.length;h>o;o++)for(n in r[o])a=r[o][n],r[o].hasOwnProperty(n)&&a!==t&&(i[n]=e.isPlainObject(a)?e.isPlainObject(i[n])?e.widget.extend({},i[n],a):e.widget.extend({},a):a);return i},e.widget.bridge=function(i,n){var a=n.prototype.widgetFullName||i;e.fn[i]=function(r){var o="string"==typeof r,h=s.call(arguments,1),l=this;return r=!o&&h.length?e.widget.extend.apply(null,[r].concat(h)):r,o?this.each(function(){var s,n=e.data(this,a);return n?e.isFunction(n[r])&&"_"!==r.charAt(0)?(s=n[r].apply(n,h),s!==n&&s!==t?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):t):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,a);t?t.option(r||{})._init():e.data(this,a,new n(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,s){var n,a,r,o=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(o={},n=i.split("."),i=n.shift(),n.length){for(a=o[i]=e.widget.extend({},this.options[i]),r=0;n.length-1>r;r++)a[n[r]]=a[n[r]]||{},a=a[n[r]];if(i=n.pop(),s===t)return a[i]===t?null:a[i];a[i]=s}else{if(s===t)return this.options[i]===t?null:this.options[i];o[i]=s}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var a,r=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=a=e(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,a=this.widget()),e.each(n,function(n,o){function h(){return i||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):t}"string"!=typeof o&&(h.guid=o.guid=o.guid||h.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?a.delegate(c,u,h):s.bind(u,h)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,r=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var r,o=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),r=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),r&&e.effects&&e.effects.effect[o]?s[t](n):o!==t&&s[o]?s[o](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}})})(jQuery);;
/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){function i(){return++n}function s(t){return t.hash.length>1&&decodeURIComponent(t.href.replace(a,""))===decodeURIComponent(location.href.replace(a,""))}var n=0,a=/#.*$/;t.widget("ui.tabs",{version:"1.10.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,s=this.options.collapsible,n=location.hash.substring(1);return null===i&&(n&&this.tabs.each(function(s,a){return t(a).attr("aria-controls")===n?(i=s,!1):e}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=s?!1:0)),!s&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(i){var s=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(s),a=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:a=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(n),e;case t.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(n===this.options.active?!1:n),e;default:return}i.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,a),i.ctrlKey||(s.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):e},_findNextTab:function(e,i){function s(){return e>n&&(e=0),0>e&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,i){return"active"===t?(this._activate(i),e):"disabled"===t?(this._setupDisabled(i),e):(this._super(t,i),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(i),"heightStyle"===t&&this._setupHeightStyle(i),e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,n){var a,o,r,h=t(n).uniqueId().attr("id"),l=t(n).closest("li"),u=l.attr("aria-controls");s(n)?(a=n.hash,o=e.element.find(e._sanitizeSelector(a))):(r=e._tabId(l),a="#"+r,o=e.element.find(a),o.length||(o=e._createPanel(r),o.insertAfter(e.panels[i-1]||e.tablist)),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),u&&l.data("ui-tabs-aria-controls",u),l.attr({"aria-controls":a.substring(1),"aria-labelledby":h}),o.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,s=0;i=this.tabs[s];s++)e===!0||-1!==t.inArray(s,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();"fill"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?t():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):t(),u={oldTab:s,oldPanel:l,newTab:r?t():a,newPanel:h};e.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",e,u)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?t():a,this.xhr&&this.xhr.abort(),l.length||h.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),e),this._toggle(e,u))},_toggle:function(e,i){function s(){a.running=!1,a._trigger("activate",e,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;s!==!1&&(i===e?s=!1:(i=this._getIndex(i),s=t.isArray(s)?t.map(s,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(s!==!0){if(i===e)s=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,s))return;s=t.isArray(s)?t.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(e,i){e=this._getIndex(e);var n=this,a=this.tabs.eq(e),o=a.find(".ui-tabs-anchor"),r=this._getPanelForTab(a),h={tab:a,panel:r};s(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),n._trigger("load",i,h)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href"),beforeSend:function(e,a){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:a},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})})(jQuery);;
/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return n&&!a&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);;
/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(i){var s,n,a,o=this.options,r=this.element.position(),h=this.element;return this.resizing=!0,/absolute/.test(h.css("position"))?h.css({position:"absolute",top:h.css("top"),left:h.css("left")}):h.is(".ui-draggable")&&h.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=t(this.helper.css("left")),n=t(this.helper.css("top")),o.containment&&(s+=e(o.containment).scrollLeft()||0,n+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:n},this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalPosition={left:s,top:n},this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),h.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,s=this.helper,n={},a=this.originalMousePosition,o=this.axis,r=this.position.top,h=this.position.left,l=this.size.width,u=this.size.height,c=t.pageX-a.left||0,d=t.pageY-a.top||0,p=this._change[o];return p?(i=p.apply(this,[t,c,d]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==h&&(n.left=this.position.left+"px"),this.size.width!==l&&(n.width=this.size.width+"px"),this.size.height!==u&&(n.height=this.size.height+"px"),s.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&e.ui.hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,s,n,a,o,r=this.options;o={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,s=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),n>o.minHeight&&(o.minHeight=n),o.maxWidth>s&&(o.maxWidth=s),o.maxHeight>a&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,s=this.size,n=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(s.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(s.height-e.height),e.left=t.left+(s.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,s=this.axis,n=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=i(e.width)&&t.minWidth&&t.minWidth>e.width,r=i(e.height)&&t.minHeight&&t.minHeight>e.height,h=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,u=/sw|nw|w/.test(s),c=/nw|ne|n/.test(s);return o&&(e.width=t.minWidth),r&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),o&&u&&(e.left=h-t.minWidth),n&&u&&(e.left=h-t.maxWidth),r&&c&&(e.top=l-t.minHeight),a&&c&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,s,n,a=this.helper||this.element;for(e=0;this._proportionallyResizeElements.length>e;e++){if(n=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],t=0;i.length>t;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(s[t],10)||0);n.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&e.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,s,n,a,o,r,h,l=e(this).data("ui-resizable"),u=l.options,c=l.element,d=u.containment,p=d instanceof e?d.get(0):/parent/.test(d)?c.parent().get(0):d;p&&(l.containerElement=e(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(p),s=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){s[e]=t(i.css("padding"+n))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},n=l.containerOffset,a=l.containerSize.height,o=l.containerSize.width,r=e.ui.hasScroll(p,"left")?p.scrollWidth:o,h=e.ui.hasScroll(p)?p.scrollHeight:a,l.parentData={element:p,left:n.left,top:n.top,width:r,height:h}))},resize:function(t){var i,s,n,a,o=e(this).data("ui-resizable"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,c={top:0,left:0},d=o.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(c=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-c.left),u&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?h.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),s=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-h.top)+o.sizeDiff.height),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a&&(i-=o.parentData.left),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)})},resize:function(t,i){var s=e(this).data("ui-resizable"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},h=function(t,s){e(t).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),a={},o=s&&s.length?s:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(n[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):e.each(n.alsoResize,function(e,t){h(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size,n=t.originalSize,a=t.originalPosition,o=t.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=r[0]||1,l=r[1]||1,u=Math.round((s.width-n.width)/h)*h,c=Math.round((s.height-n.height)/l)*l,d=n.width+u,p=n.height+c,f=i.maxWidth&&d>i.maxWidth,m=i.maxHeight&&p>i.maxHeight,g=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>p;i.grid=r,g&&(d+=h),v&&(p+=l),f&&(d-=h),m&&(p-=l),/^(se|s|e)$/.test(o)?(t.size.width=d,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=d,t.size.height=p,t.position.top=a.top-c):/^(sw)$/.test(o)?(t.size.width=d,t.size.height=p,t.position.left=a.left-u):(t.size.width=d,t.size.height=p,t.position.top=a.top-c,t.position.left=a.left-u)}})})(jQuery);;
/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i,s=this,n=!1,a=!1;for(e.ui.ddmanager&&!this.options.dropBehaviour&&(a=e.ui.ddmanager.drop(this,t)),this.dropped&&(a=this.dropped,this.dropped=!1),i=this.element[0];i&&(i=i.parentNode);)i===document&&(n=!0);return n||"original"!==this.options.helper?("invalid"===this.options.revert&&!a||"valid"===this.options.revert&&a||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,a)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;if("parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=["document"===n.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===n.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===n.containment?0:e(window).scrollLeft())+e("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===n.containment?0:e(window).scrollTop())+(e("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||n.containment.constructor===Array)n.containment.constructor===Array&&(this.containment=n.containment);else{if(i=e(n.containment),s=i[0],!s)return;t="hidden"!==e(s).css("overflow"),this.containment=[(parseInt(e(s).css("borderLeftWidth"),10)||0)+(parseInt(e(s).css("paddingLeft"),10)||0),(parseInt(e(s).css("borderTopWidth"),10)||0)+(parseInt(e(s).css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(e(s).css("borderRightWidth"),10)||0)-(parseInt(e(s).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(e(s).css("borderBottomWidth"),10)||0)-(parseInt(e(s).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n,a,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName),l=t.pageX,u=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(u=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(u=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,u=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var s=e(this).data("ui-draggable"),n=s.options,a=e.extend({},i,{item:s.element});s.sortables=[],e(n.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i){var s=e(this).data("ui-draggable"),n=e.extend({},i,{item:s.element});e.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,i){var s=e(this).data("ui-draggable"),n=this;e.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",t),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",t),s.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._opacity&&e(i.helper).css("opacity",s._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(t.pageY-e(document).scrollTop()<s.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(t.pageX-e(document).scrollLeft()<s.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),s=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(t,i){var s,n,a,o,r,h,l,u,c,d,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,y=i.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--)r=p.snapElements[c].left,h=r+p.snapElements[c].width,l=p.snapElements[c].top,u=l+p.snapElements[c].height,g>r-m&&h+m>g&&y>l-m&&u+m>y||g>r-m&&h+m>g&&b>l-m&&u+m>b||v>r-m&&h+m>v&&y>l-m&&u+m>y||v>r-m&&h+m>v&&b>l-m&&u+m>b?("inner"!==f.snapMode&&(s=m>=Math.abs(l-b),n=m>=Math.abs(u-y),a=m>=Math.abs(r-v),o=m>=Math.abs(h-g),s&&(i.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h}).left-p.margins.left)),d=s||n||a||o,"outer"!==f.snapMode&&(s=m>=Math.abs(l-y),n=m>=Math.abs(u-b),a=m>=Math.abs(r-g),o=m>=Math.abs(h-v),s&&(i.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:h-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(s||n||a||o||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=s||n||a||o||d):(p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,s=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});s.length&&(t=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._zIndex&&e(i.helper).css("zIndex",s._zIndex)}})})(jQuery);;
/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){var e,i,s,n,a="ui-button ui-widget ui-state-default ui-corner-all",o="ui-state-hover ui-state-active ",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var e=t(this).find(":ui-button");setTimeout(function(){e.button("refresh")},1)},l=function(e){var i=e.name,s=e.form,n=t([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?t(s).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{version:"1.10.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var o=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active",d="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(a).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||t(this).removeClass(u)}).bind("click"+this.eventNamespace,function(t){r.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){o.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){o.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){n||o.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){r.disabled||(n=!1,i=t.pageX,s=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){r.disabled||(i!==t.pageX||s!==t.pageY)&&(n=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return r.disabled||n?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||n)return!1;t(this).addClass("ui-state-active"),o.buttonElement.attr("aria-pressed","true");var e=o.element[0];l(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return r.disabled?!1:(t(this).addClass("ui-state-active"),e=this,o.document.one("mouseup",function(){e=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return r.disabled?!1:(t(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(e){return r.disabled?!1:((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(a+" "+o+" "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?l(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var e=this.buttonElement.removeClass(r),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):a.push("ui-button-text-only"),e.addClass(a.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);;
/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(a!==e)return a;var i,s,n=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return t("body").append(n),i=o.offsetWidth,n.css("overflow","scroll"),s=o.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),a=i-s},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),s=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,a="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var a,p,m,g,v,_,b=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),x=(e.collision||"flip").split(" "),k={};return _=n(b),b[0].preventDefault&&(e.at="left top"),p=_.width,m=_.height,g=_.offset,v=t.extend({},g),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):c.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=c.test(s[1])?s[1]:"center",t=u.exec(s[0]),i=u.exec(s[1]),k[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=m:"center"===e.at[1]&&(v.top+=m/2),a=i(k.at,p,m),v.left+=a[0],v.top+=a[1],this.each(function(){var n,l,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=s(this,"marginLeft"),_=s(this,"marginTop"),D=u+f+s(this,"marginRight")+w.width,T=d+_+s(this,"marginBottom")+w.height,C=t.extend({},v),M=i(k.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?C.left-=u:"center"===e.my[0]&&(C.left-=u/2),"bottom"===e.my[1]?C.top-=d:"center"===e.my[1]&&(C.top-=d/2),C.left+=M[0],C.top+=M[1],t.support.offsetFractions||(C.left=h(C.left),C.top=h(C.top)),n={marginLeft:f,marginTop:_},t.each(["left","top"],function(i,s){t.ui.position[x[i]]&&t.ui.position[x[i]][s](C,{targetWidth:p,targetHeight:m,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:D,collisionHeight:T,offset:[a[0]+M[0],a[1]+M[1]],my:e.my,at:e.at,within:y,elem:c})}),e.using&&(l=function(t){var i=g.left-C.left,s=i+p-u,n=g.top-C.top,a=n+m-d,h={target:{element:b,left:g.left,top:g.top,width:p,height:m},element:{element:c,left:C.left,top:C.top,width:u,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>a?"top":n>0?"bottom":"middle"};u>p&&p>r(i+s)&&(h.horizontal="center"),d>m&&m>r(n+a)&&(h.vertical="middle"),h.important=o(r(i),r(s))>o(r(n),r(a))?"horizontal":"vertical",e.using.call(this,t,h)}),c.offset(t.extend(C,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-a-n;e.collisionWidth>a?h>0&&0>=l?(i=t.left+h+e.collisionWidth-a-n,t.left+=h-i):t.left=l>0&&0>=h?n:h>l?n+a-e.collisionWidth:n:h>0?t.left+=h:l>0?t.left-=l:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-a-n;e.collisionHeight>a?h>0&&0>=l?(i=t.top+h+e.collisionHeight-a-n,t.top+=h-i):t.top=l>0&&0>=h?n:h>l?n+a-e.collisionHeight:n:h>0?t.top+=h:l>0?t.top-=l:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-o-h,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-o-a,(0>i||r(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s>0||u>r(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-o-h,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>c?(s=t.top+p+f+m+e.collisionHeight-o-a,t.top+p+f+m>c&&(0>s||r(c)>s)&&(t.top+=p+f+m)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+m-h,t.top+p+f+m>u&&(i>0||u>r(i))&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,a,o=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in s)e.style[a]=s[a];e.appendChild(r),i=o||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()})(jQuery);;
/*! jQuery UI - v1.10.2 - 2013-03-14
* http://jqueryui.com
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(t){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;0>i&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement,i=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);i||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),undefined;if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==s[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(n.focus(1),e.preventDefault()):(s.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(t.each(i,function(i,s){var n,a;s=t.isFunction(s)?{click:s,text:i}:s,s=t.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(e.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,t("<button></button>",s).button(a).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,a){s.position=[a.position.left-i.document.scrollLeft(),a.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,e(a))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,e(n))},resize:function(t,s){i._trigger("resize",t,e(s))},stop:function(n,a){s.height=t(this).height(),s.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,e(a))}}).css("position",a)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(s){var n=this,a=!1,o={};t.each(s,function(t,s){n._setOption(t,s),t in e&&(a=!0),t in i&&(o[t]=s)}),a&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,e){var i,s,n=this.uiDialog;"dialogClass"===t&&n.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(i=n.is(":data(ui-draggable)"),i&&!e&&n.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(s=n.is(":data(ui-resizable)"),s&&!e&&n.resizable("destroy"),s&&"string"==typeof e&&n.resizable("option","handles",e),s||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),e=Math.max(0,s.minHeight-t),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-t):"none","auto"===s.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,i=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(s){e._allowInteraction(s)||(s.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,s=[],n=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(s=i.split?i.split(" "):[i[0],i[1]],1===s.length&&(s[1]=s[0]),t.each(["left","top"],function(t,e){+s[t]===s[t]&&(n[t]=s[t],s[t]=e)}),i={my:s[0]+(0>n[0]?n[0]:"+"+n[0])+" "+s[1]+(0>n[1]?n[1]:"+"+n[1]),at:s.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})})(jQuery);;
var go_identity = {
	auth_type    : null,
	auth_user    : null,
	logged_in_as : null,
	wp_username  : null,
	event        : {}
};

(function($) {
	/**
	 * iPhone/iPad/iPod check so we can hack the overlay position
	 * http://graphicmaniacs.com/note/detecting-iphone-ipod-ipad-android-and-blackberry-browser-with-javascript-and-php/
	 */
	go_identity.checker = {
		iphone     : navigator.userAgent.match(/(iPhone|iPod|iPad)/),
		blackberry : navigator.userAgent.match(/BlackBerry/),
		android    : navigator.userAgent.match(/Android/)
	};

	/**
	 * initialize the go_identity plugin
	 */
	go_identity.init = function() {
		go_identity.$credentials           = $('#credentials');
		go_identity.$comment               = $('#comment');
		go_identity.$comment_form          = $('#commentform');
		go_identity.$comment_submit        = $('#comment-submit');
		go_identity.$dialog                = $('#dialog');
		go_identity.$avatar                = $('#social-identity-pic');
		go_identity.$social_remember       = $('#social-identity-remember');
		go_identity.$social_change_service = $('.credentials-social-change-service');
		go_identity.$credential_social     = $('#credential-social');
		go_identity.$popup_logins          = go_identity.$credential_social.find('.credential-popup-logins').find('li a');
		go_identity.comment_id             = document.location.hash;
		go_identity.logged_in_as           = go_identity.$avatar.data('logged-in-as');

		// center the dialog box
		go_identity.$dialog.css('left', '50%');
		go_identity.$dialog.css('margin-left', -1 * go_identity.$dialog.outerWidth() / 2);

		// if an iOS device is being used, tweak the dialog position
		if ( $('body').is('.go-device-phone') ) {
			go_identity.$dialog.css('position', 'absolute').css('top', window.pageYOffset + 10);
		}//end if

		//bind unchecking of the remember me box to unsetting the 30-day cookie
		$(document).on( 'click', go_identity.$social_remember, go_identity.event.remember_me );

		$(document).on( 'click', '#comment-submit', go_identity.event.comment_submit );

		// add click events to the various social auth links
		$(document).on( 'click', '#credential-social li .goauth-wpdotcom',        go_identity.event.auth_wp );
		$(document).on( 'click', '#credential-social li a:not(.goauth-wpdotcom)', go_identity.event.auth_non_wp );

		go_identity.initialize_login_state();

		// populate the comment box with the comment stored in the cookie in the event
		// that authentication fails and there was a page reload
		if ( goauth_read_cookie('gigaom_comment', true) !== null ) {
			go_identity.$comment.val( goauth_read_cookie('gigaom_comment', true) );
		}//end if

		//clear the comment cookie if there is a get var indicating a comment was submitted
		if ( window.location.search.indexOf('go_commented') > -1 ) {
			goauth_delete_cookie('gigaom_comment', false);
		}//end if

		go_identity.$dialog.overlay({
			mask : {
				fixed     : true,
				color     : '#000000',
				loadSpeed : 200,
				opacity   : 0.7
			},
			closeOnClick : false,
			onLoad : function(){
				var $dialog = $('#dialog');

				// move the credentials and comment elements into the dialog box
				go_identity.$credentials.prependTo( go_identity.$comment_form );
				go_identity.$comment_form.clone( true ).appendTo('#credential-wp');
				$dialog.find('textarea').val( go_identity.$comment.val() );
				$dialog.find('input, textarea').placeholder();

				// determine how to initialize the "Remember Me" checkbox based on the
				// contents of a cookie
				go_identity.analyze_remember_me_cookie();

				// if we're in phone width, make the dialog absolute positioned rather than
				// fixed so the user can scroll
				if ( $('body').is('.go-device-phone') ) {
					$dialog.css({
						top: $dialog.offset().top - 15,
						position: 'absolute'
					});

					$dialog.find('.close').css({
						position: 'relative',
						marginTop: 20,
						clear: 'both',
						right: 0,
						top: 0
					}).addClass('button alert').html('Cancel').insertAfter( $dialog.find('#comment-submit') );
				}//end if
			},
			onClose : function() {
				var $dialog = $('#dialog');

				if ( $('body').is('.go-device-phone') ) {
					$dialog.css({
						position: 'fixed'
					});

					$dialog.find('.close').css({
						position: 'absolute',
						marginTop: 0,
						clear: 'both',
						right: '-15px',
						top: '-15px'
					}).removeClass('button alert').html('').prependTo( $dialog );
				}//end if

				go_identity.$credentials.find('input').removeClass('error');
				$('#dialog #commentform').remove();
			}
		});

		//add a hidden input to the form to indicate we're using social comments
		$('#comment-textarea').after('<input type="hidden" name="goauth" id="goauth" value="1"/>');

		if ( ! go_identity.logged_in_as ) {
			go_identity.$avatar.data('logged-in-as', 'Guest');
		}//end if
	};

	/**
	 * determines if/how the user is logged in
	 */
	go_identity.initialize_login_state = function() {
		var $body = $('body');

		//check to see if the user is actually logged into WP
		if ( $body.is('.logged-in') ) {
			$('.logged-in-wrapper').appendTo('#social-identity-logout');

			go_identity.wp_username = go_identity.$avatar.data('logged-in-as') || go_identity.logged_in_as;
		} else {
			$(document).GoIdentity('check_identity', 'update_url');
		}//end else
	};

	go_identity.analyze_remember_me_cookie = function() {
		var preferred_service = null;
		var remembered_name   = null;
		var cookie            = goauth_read_cookie( 'gigaom_identity_service' );

		if ( typeof cookie == undefined || ! cookie ) {
			return;
		}//end if

		cookie = cookie.split('|');
		remembered_name   = cookie[1];
		preferred_service = cookie[0];

		go_identity.$social_change_service.on( 'click', function( e ) {
			go_identity.$credential_social.find('.credentials-social-title:first').text('click to log in with:');
			go_identity.$popup_logins.not('.goauth-' + preferred_service).show();

			$(this).removeclass('rendered');

			$('#credential-wp').show();

			go_identity.$dialog.removeclass('remembered');
		});

		if ( preferred_service && go_identity.$social_remember.is(':checked') ) {
			go_identity.$avatar.data('logged-in-as', remembered_name);

			go_identity.$popup_logins.not('.goauth-' + preferred_service).hide();
			go_identity.$social_change_service.addClass('rendered');

			$('#credential-wp').hide();

			go_identity.$dialog.addClass('remembered');
		} else {
			go_identity.$social_change_service.trigger('click');
		}//end else
	};

	/**
	 * handles the checking/unchecking of the remember me box
	 */
	go_identity.event.remember_me = function( e ) {
		if ( $( this ).not(':checked') ) {
			goauth_delete_cookie( 'gigaom_identity_service', true );
		}//end if
	};

	/**
	 * handles authentication against WordPress
	 */
	go_identity.event.auth_wp = function( e ) {
		goauth_create_cookie('gigaom_comment', go_identity.$comment.val(), 60);
	};

	/**
	 * handles popup social logins for non-WordPress services
	 */
	go_identity.event.auth_non_wp = function( e ) {
		e.preventDefault();

		var popup = null;
		var $el   = $(this);
		var url   = $el.attr('href');

		if ( $el.hasClass('goauth-facebook') ) {
			popup = window.open(url, '', 'resizable=1,width=880,height=480');
		} else {
			popup = window.open(url, '', 'resizable=1,width=480,height=480');
		}//end else

		var timer = setInterval( function() {
			if ( popup && popup.closed ) {
				window.focus();
				clearInterval( timer );
				return $(document).GoIdentity('check_identity', 'submit_comment', true);
			}//end if
		}, 1000);
	};

	/**
	 * handles comment form submission
	 */
	go_identity.event.comment_submit = function( e ) {
		var $commentform = $(this).closest('#commentform');
		var $comment     = $commentform.find('#comment');
		var commentdata  = $.trim( $comment.val() );

		// no comment provided, don't submit the form
		if ( ! commentdata ) {
			// add the error to the visible comment field
			go_identity.$comment.addClass('error');
			go_identity.$dialog.data('overlay').close();
			return e.preventDefault();
		}//end if

		// they are logged in already, process the comment like normal
		if ( go_identity.auth_type !== null || go_identity.wp_username !== null ) {
			return true;
		}//end if

		if ( go_identity.$dialog.data('overlay').isOpened() ) {
			go_identity.$credentials.find('#author').val( $commentform.find('#author').val() );
			go_identity.$credentials.find('#email').val( $commentform.find('#email').val() );
			go_identity.$credentials.find('#url').val( $commentform.find('#url').val() );
			// if the dialog box is open, validate the fields and proceed
			return $(document).GoIdentity('validate_fields');
		} else {
			// if the dialog box is NOT open, open it
			go_identity.$dialog.data('overlay').load();
		}//end else

		e.preventDefault();
	};
})( jQuery );

jQuery( function( $ ) {
	go_identity.init();
});
;

/**
 * jQuery GoIdentity SDK
 * @author Vasken Hauri
 * Defines data handler functions for JSONP data returned from
 * Pro authentication services.
 */

function goauth_get_gravatar(email, size) {

	// MD5 (Message-Digest Algorithm) by WebToolkit
	// http://www.webtoolkit.info/javascript-md5.html

	var MD5=function(s){function L(k,d){return(k<<d)|(k>>>(32-d))}function K(G,k){var I,d,F,H,x;F=(G&2147483648);H=(k&2147483648);I=(G&1073741824);d=(k&1073741824);x=(G&1073741823)+(k&1073741823);if(I&d){return(x^2147483648^F^H)}if(I|d){if(x&1073741824){return(x^3221225472^F^H)}else{return(x^1073741824^F^H)}}else{return(x^F^H)}}function r(d,F,k){return(d&F)|((~d)&k)}function q(d,F,k){return(d&k)|(F&(~k))}function p(d,F,k){return(d^F^k)}function n(d,F,k){return(F^(d|(~k)))}function u(G,F,aa,Z,k,H,I){G=K(G,K(K(r(F,aa,Z),k),I));return K(L(G,H),F)}function f(G,F,aa,Z,k,H,I){G=K(G,K(K(q(F,aa,Z),k),I));return K(L(G,H),F)}function D(G,F,aa,Z,k,H,I){G=K(G,K(K(p(F,aa,Z),k),I));return K(L(G,H),F)}function t(G,F,aa,Z,k,H,I){G=K(G,K(K(n(F,aa,Z),k),I));return K(L(G,H),F)}function e(G){var Z;var F=G.length;var x=F+8;var k=(x-(x%64))/64;var I=(k+1)*16;var aa=Array(I-1);var d=0;var H=0;while(H<F){Z=(H-(H%4))/4;d=(H%4)*8;aa[Z]=(aa[Z]|(G.charCodeAt(H)<<d));H++}Z=(H-(H%4))/4;d=(H%4)*8;aa[Z]=aa[Z]|(128<<d);aa[I-2]=F<<3;aa[I-1]=F>>>29;return aa}function B(x){var k="",F="",G,d;for(d=0;d<=3;d++){G=(x>>>(d*8))&255;F="0"+G.toString(16);k=k+F.substr(F.length-2,2)}return k}function J(k){k=k.replace(/\r\n/g,"\n");var d="";for(var F=0;F<k.length;F++){var x=k.charCodeAt(F);if(x<128){d+=String.fromCharCode(x)}else{if((x>127)&&(x<2048)){d+=String.fromCharCode((x>>6)|192);d+=String.fromCharCode((x&63)|128)}else{d+=String.fromCharCode((x>>12)|224);d+=String.fromCharCode(((x>>6)&63)|128);d+=String.fromCharCode((x&63)|128)}}}return d}var C=Array();var P,h,E,v,g,Y,X,W,V;var S=7,Q=12,N=17,M=22;var A=5,z=9,y=14,w=20;var o=4,m=11,l=16,j=23;var U=6,T=10,R=15,O=21;s=J(s);C=e(s);Y=1732584193;X=4023233417;W=2562383102;V=271733878;for(P=0;P<C.length;P+=16){h=Y;E=X;v=W;g=V;Y=u(Y,X,W,V,C[P+0],S,3614090360);V=u(V,Y,X,W,C[P+1],Q,3905402710);W=u(W,V,Y,X,C[P+2],N,606105819);X=u(X,W,V,Y,C[P+3],M,3250441966);Y=u(Y,X,W,V,C[P+4],S,4118548399);V=u(V,Y,X,W,C[P+5],Q,1200080426);W=u(W,V,Y,X,C[P+6],N,2821735955);X=u(X,W,V,Y,C[P+7],M,4249261313);Y=u(Y,X,W,V,C[P+8],S,1770035416);V=u(V,Y,X,W,C[P+9],Q,2336552879);W=u(W,V,Y,X,C[P+10],N,4294925233);X=u(X,W,V,Y,C[P+11],M,2304563134);Y=u(Y,X,W,V,C[P+12],S,1804603682);V=u(V,Y,X,W,C[P+13],Q,4254626195);W=u(W,V,Y,X,C[P+14],N,2792965006);X=u(X,W,V,Y,C[P+15],M,1236535329);Y=f(Y,X,W,V,C[P+1],A,4129170786);V=f(V,Y,X,W,C[P+6],z,3225465664);W=f(W,V,Y,X,C[P+11],y,643717713);X=f(X,W,V,Y,C[P+0],w,3921069994);Y=f(Y,X,W,V,C[P+5],A,3593408605);V=f(V,Y,X,W,C[P+10],z,38016083);W=f(W,V,Y,X,C[P+15],y,3634488961);X=f(X,W,V,Y,C[P+4],w,3889429448);Y=f(Y,X,W,V,C[P+9],A,568446438);V=f(V,Y,X,W,C[P+14],z,3275163606);W=f(W,V,Y,X,C[P+3],y,4107603335);X=f(X,W,V,Y,C[P+8],w,1163531501);Y=f(Y,X,W,V,C[P+13],A,2850285829);V=f(V,Y,X,W,C[P+2],z,4243563512);W=f(W,V,Y,X,C[P+7],y,1735328473);X=f(X,W,V,Y,C[P+12],w,2368359562);Y=D(Y,X,W,V,C[P+5],o,4294588738);V=D(V,Y,X,W,C[P+8],m,2272392833);W=D(W,V,Y,X,C[P+11],l,1839030562);X=D(X,W,V,Y,C[P+14],j,4259657740);Y=D(Y,X,W,V,C[P+1],o,2763975236);V=D(V,Y,X,W,C[P+4],m,1272893353);W=D(W,V,Y,X,C[P+7],l,4139469664);X=D(X,W,V,Y,C[P+10],j,3200236656);Y=D(Y,X,W,V,C[P+13],o,681279174);V=D(V,Y,X,W,C[P+0],m,3936430074);W=D(W,V,Y,X,C[P+3],l,3572445317);X=D(X,W,V,Y,C[P+6],j,76029189);Y=D(Y,X,W,V,C[P+9],o,3654602809);V=D(V,Y,X,W,C[P+12],m,3873151461);W=D(W,V,Y,X,C[P+15],l,530742520);X=D(X,W,V,Y,C[P+2],j,3299628645);Y=t(Y,X,W,V,C[P+0],U,4096336452);V=t(V,Y,X,W,C[P+7],T,1126891415);W=t(W,V,Y,X,C[P+14],R,2878612391);X=t(X,W,V,Y,C[P+5],O,4237533241);Y=t(Y,X,W,V,C[P+12],U,1700485571);V=t(V,Y,X,W,C[P+3],T,2399980690);W=t(W,V,Y,X,C[P+10],R,4293915773);X=t(X,W,V,Y,C[P+1],O,2240044497);Y=t(Y,X,W,V,C[P+8],U,1873313359);V=t(V,Y,X,W,C[P+15],T,4264355552);W=t(W,V,Y,X,C[P+6],R,2734768916);X=t(X,W,V,Y,C[P+13],O,1309151649);Y=t(Y,X,W,V,C[P+4],U,4149444226);V=t(V,Y,X,W,C[P+11],T,3174756917);W=t(W,V,Y,X,C[P+2],R,718787259);X=t(X,W,V,Y,C[P+9],O,3951481745);Y=K(Y,h);X=K(X,E);W=K(W,v);V=K(V,g)}var i=B(Y)+B(X)+B(W)+B(V);return i.toLowerCase()};

	var size = size || 80;

	return 'http://www.gravatar.com/avatar/' + MD5( email ) + '.jpg?s=' + size;
}

//a maddeningly simple function to get the current url
function goauth_get_current_url( call_back ) {
	return document.location.href + call_back;
}

function goauth_get_current_server() {
	return social_identity_server;
}

function goauth_auth_type( user ) {
	var auth_type = null;

	if ( user.go_remote_identity.twitter !== undefined ) {
		auth_type = 'twitter';
	} else if ( user.go_remote_identity.linkedin !== undefined ) {
		auth_type = 'linkedin';
	} else if ( user.go_remote_identity.facebook !== undefined ) {
		auth_type = 'facebook';
	} else if ( user.go_remote_identity.gigaom !== undefined ) {
		auth_type = 'gigaom';
	}

	//globalize the auth type and the user object for easy reference
	go_identity.auth_type = auth_type;
	go_identity.auth_user = user;

	if ( jQuery('#comment-textarea').next('#goauth_cookie').length === 0 ) {
		jQuery('#comment-textarea').after('<input type="hidden" name="goauth_cookie" id="goauth_cookie" value="' + user.cookie + '">');
	}

	return auth_type;
}

function goauth_print_logout_button( user ) {
	var logout_pop = null;
	jQuery('#social-identity-logout').html('<a href="javascript:void(0)">Logout</a>');
	jQuery('#social-identity-logout').click(function(){
		var logout_url = goauth_get_current_server() + '/wp-admin/admin-ajax.php?action=logout&redirect_to=' + escape( go_theme.wp_url + '/wp-admin/admin-ajax.php' );
		var $iframe = jQuery('<iframe/>');

		$iframe.attr( 'id', 'goauth-logout').hide().appendTo('body');
		$iframe.attr( 'src', logout_url );

		jQuery('#shared-auth').block({
			message: 'Please wait',
			css: {
				border: 'none',
				color: '#555',
				left: 5,
				padding: 0,
				backgroundColor: 'transparent',
				width: '80%'
			},
			overlayCSS: {
				backgroundColor: '#fff',
				cursor: 'default',
				opacity: 0.9
			}
		});

		var timer = setInterval( function() {
			var $iframe = jQuery('#goauth-logout');

			try {
				var contents = $iframe.contents();

				if ( contents.find('body').html().length ) {
					clearInterval( timer );
					window.location.reload();
				}

			} catch( e ) {
				// do nothing
			}
		}, 1000);
	});
}

function goauth_create_global_cookie( name, value, seconds ) {
	if ( seconds ) {
		var date = new Date();
		date.setTime( date.getTime() + (seconds * 1000) );
		var expires = "; expires="+date.toGMTString();
	} else {
		var expires = "";
	}
	document.cookie = name + "=" + value + expires + "; path=/";
}

function goauth_create_cookie( name, value, seconds ) {
	var post_arr = $post_content.attr('id').split('-');
	name += '_' + post_arr[2];

	if ( seconds ) {
		var date = new Date();
		date.setTime(date.getTime()+(seconds * 1000));
		var expires = "; expires="+date.toGMTString();
	} else {
		var expires = "";
	}
	document.cookie = name + "=" + value + expires + "; path=/";
}

function goauth_read_cookie( name, unique ) {
	if ( unique ) {
		var post_arr = $post_content.attr('id') ? $post_content.attr('id').split('-') : '';
		name += '_' + post_arr[2];
	}

	var nameEQ = name + "=";
	var ca = document.cookie.split(';');
	for ( var i=0; i < ca.length; i++ ) {
		var c = ca[i];
		while ( c.charAt(0)==' ' ) {
			c = c.substring( 1, c.length );
		}

		if ( c.indexOf(nameEQ) == 0 ) {
			return c.substring( nameEQ.length, c.length );
		}
	}
	return null;
}

function goauth_delete_cookie(name, global) {
	if ( global ) {
		goauth_create_global_cookie( name, "", -1 );
	} else {
		var post_arr = $post_content.attr('id').split('-');
		name += '_' + post_arr[2];
		goauth_create_cookie( name, "", -1 );
	}
}

(function($){
	$post_content = $('div[id^="post-content-"]');

	var methods = {

		/**
		 * init method to execute upon JSONP return
		 *
		 * Checks for the presence of a user object and
		 * executes the comment_fill method if it is defined
		 * @TODO: make this more dynamic, i.e. include a way
		 * to determine from the returned JSONP which method to
		 * execute within init
		 * @param user An object containing user data
		 */
		init : function( user ) {
			if ( user === null || user === undefined ) {
				return false;
			} else {
				this.GoIdentity( 'comment_fill', user );
			}
		},

		/**
		 * comment_fill method to populate comment form data
		 *
		 * Populates the author, email and url fields from the
		 * user object
		 *
		 * @param user An object containing user data
		 */
		comment_fill : function( user ) {
			$('#author').val( user.display_name );
			$('#url').val( user.user_url );

			if ( go_identity.auth_type == 'twitter' ) {
				$('#email').val( user.twitter_id + '@twitter.id' );
			} else if ( go_identity.auth_type == 'linkedin' ) {
				$('#email').val( user.linkedin_id + '@linkedin.id' );
			} else {
				$('#email').val( user.user_email );
			}
		},

		/**
		 * @param callback Function to call once the user has been authenticated
		 * and the go_identity.auth_user object has been set.
		 */
		get_user : function(callback){
			var social_ajax = goauth_get_current_server() + '/wp-admin/admin-ajax.php?action=go_identity&callback=?';
			$.ajax({
				url : social_ajax,
				cache : true,
				dataType: 'jsonp',
				error : function(j, t, error){
					return false;
				},
				success : function(u){
					//globalize the user for later use
					go_identity.auth_user = u;

					//hide the pulse tweet and login links
					$('#twitter-feed-banner').remove();
					$('#credential-inline-header').hide();

					// Add name to labelled elements
					$('.social-user-name').text(u.display_name);

					goauth_print_logout_button(u);

					if ( typeof( callback ) == 'function' ) {
						callback();
					}
				}
			});
		},

		reload_page : function( user ){
			window.location.reload();
		},

		update_url : function( user ){
			goauth_print_logout_button(user);
			goauth_auth_type(user);
			$('#social-identity-pic img').attr('src', user.picture_url).css({'height': 55, 'width': 55});
			$('#social-identity-chiclet').removeClass('loggedout').addClass(go_identity.auth_type);
			$('body').addClass('logged-in');
		},

		print_login : function(user){
			$(document).GoIdentity('comment_fill', user);
		},

		submit_comment : function(user){
			$('#dialog').addClass('ajax-loading').children().hide();
			$('.ajax-loading').show();

			//if the user checked the remember box, set a 30-day cookie
			if ( $('#social-identity-remember').attr('checked') ) {
				goauth_create_global_cookie( 'gigaom_identity_service', go_identity.auth_type + '|' + user.display_name, 30*24*60*60 );
			}

			$('#commentform').submit();
		},

		validate_fields : function(){
			var $author = $('#dialog #author');
			var $email = $('#dialog #email');
			
			var author = ( $author.val() !== $author.attr('title') && $author.val().length > 0);
			var email = $email.val();
			var email_pattern  = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
			var valid_email = email.match( email_pattern ) ? true : false;

			if ( !author ) {
				$author.addClass('error');
			}

			if ( !valid_email ) {
				$email.addClass('error');
			}

			return author && valid_email;
		},

		check_identity : function(js_method, force_check){
			var force = force_check ? force_check : null;
			if ( goauth_read_cookie('pro-is-logged-in') === null && force === null ) {
				return $(this);
			}

			var social_ajax = goauth_get_current_server() + '/wp-admin/admin-ajax.php?action=go_identity&callback=?';
			return $.ajax({
				url : social_ajax,
				cache : true,
				dataType: 'jsonp',
				error : function(j, t, error){
					amplify.publish( 'go-auth-fail' );
					return false;
				},
				success : function(u){
					auth_type = goauth_auth_type(u);

					if ( u && u.display_name ) {
						amplify.publish( 'go-auth-success', u );
					}//end if

					if ( typeof js_method !== 'undefined' ) {
						$(document).GoIdentity(js_method, u);
					}//end if
				}
			});
			return $(this);
		}
	};

	/**
	 * Method calling logic
	 * http://docs.jquery.com/Plugins/Authoring
	 * @param methods An array of methods
	 */
	$.fn.GoIdentity = function( method ) {
		if ( methods[method] ) {
			return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
		} else if ( typeof method === 'object' || ! method ) {
			return methods.init.apply( this, arguments );
		} else {
			$.error( 'Method ' +  method + ' does not exist on jQuery.GoIdentity' );
		}
	};
})(jQuery); //end GO_Identity SDK
;
(function( $ ) {
	/**
	 * Refresh borked ads after a resize event happens
	 */
	amplify.subscribe( 'go-resize', function( states ) {
		if ( false === gigaom.resize.initial ) {
			// don't generated ads immediately on resize, instead wait a few milliseconds in
			// the event that the user is still dragging
			gigaom.resize.ad_timer = setTimeout( function() {
				googletag.pubads().refresh();
				amplify.publish( 'go-ads-refresh', states );
			}, 500 );
		}
	});
})( jQuery );
;
jQuery(function(o){o(document).on("mouseover touchstart tap MSPointerDown",".go-auto-3 .icon-question-mark,.gigaom-pro-titlevertical-li-responsive .icon-question-mark",function(){var t=o(this),s=t.closest(".widget");s.find(".tooltip");var i=s.find(".nub"),e=t.offset().left-s.offset().left+parseInt(t.outerWidth(),10)/5;s.hasClass("show-tooltip")?s.removeClass("show-tooltip"):(s.addClass("show-tooltip"),i.css("left",e))}),o(document).on("mouseout",".go-auto-3 .icon-question-mark,.gigaom-pro-titlevertical-li-responsive .icon-question-mark",function(){var t=o(this),s=t.closest(".widget");s.find(".tooltip"),s.hasClass("show-tooltip")&&s.removeClass("show-tooltip")})});;
