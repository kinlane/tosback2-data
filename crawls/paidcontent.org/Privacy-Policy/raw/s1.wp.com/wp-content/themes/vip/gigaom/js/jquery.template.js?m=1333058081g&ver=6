jQuery.noConflict();om={};cfct={};jQuery(document).ready(function($){om.ready($);jQuery(window).load(function(){jQuery('body').addClass("loaded");var dlLinksId="#dl-links";var dlPhotosId="#dl-photos";var $dl=$(dlLinksId);var $dlLinks=$(dlLinksId+" li a");var goDL={refreshInterval:5000,index:1,anchor:$(dlLinksId+" li:eq(1) a"),rotate:function(){if(!intervalID)
goDL.update();var intervalID=setInterval(goDL.update,goDL.refreshInterval);},update:function(){var total=$dl.children().size();if(goDL.index==total){goDL.index=0;goDL.anchor=$(dlLinksId+" li:eq(0) a");}
$(dlPhotosId+" li.selected").stop().fadeTo("normal",0).removeClass("selected");$(dlPhotosId+" li:eq("+goDL.index+")").stop().fadeTo("normal",1).addClass("selected");$(dlLinksId+" li").removeClass("selected");$(goDL.anchor).parent().addClass("selected");goDL.index++;goDL.anchor=$(dlLinksId+" li:eq("+goDL.index+") a");}};if($dl.children().size()>1){jQuery('#dl-photos ul li a > span').each(function(i,el){var url=jQuery(el).attr('href');var new_img=jQuery('<img />')
.attr('src',url)
.attr('width',352)
.attr('height',234);jQuery(el).replaceWith(new_img);});setTimeout(goDL.rotate,200);}
$dlLinks.mouseover(function(){var $index=$(this).parent().index();$(dlPhotosId+" li.selected").stop().fadeTo("normal",0).removeClass("selected");$(dlPhotosId+" li:eq("+$index+")").stop().fadeTo("normal",1).addClass("selected");$(dlLinksId+" li").removeClass("selected");$(this).parent().addClass("selected");});});});om.ready=function($){if((!$.browser.msie||$.browser.version.substr(0,1)!='6')&&typeof CFCT_AJAX_LOAD!='undefined'&&CFCT_AJAX_LOAD){cfct.ajax_post_comments();}
jQuery("ul > li:last-child").addClass("last");jQuery("ul > li:first-child").addClass("first");jQuery("ol > li:last-child").addClass("last");jQuery("ol > li:first-child").addClass("first");$('#content a.showVideo').videoLightbox();jQuery('.trackback-title a').click(function(event){event.preventDefault();jQuery(this).toggleClass("active");jQuery('#trackbacks-wrap').toggle('fast');});jQuery('.expand-excerpt-span').unbind('click');jQuery('.expand-excerpt-span').click(function(event){event.preventDefault();jQuery(this).toggleClass("open");var post_id=jQuery(this).attr('id').replace('expand-','');jQuery('#hidden-excerpt-'+post_id)
.toggle('fast')
.parents('.post').toggleClass('expanded');});jQuery('.expand a').click(function(event){event.preventDefault();jQuery('#important-points-list').slideDown({duration:350,easing:'easeInOutExpo'});jQuery.cookie('gigaomImportantPointsState','open',{path:'/'});jQuery('.collapse').removeClass("hide");jQuery('.expand').addClass("hide");});jQuery('.collapse a').click(function(event){event.preventDefault();jQuery('#important-points-list').slideUp({duration:200,easing:'easeInOutExpo'});jQuery.cookie('gigaomImportantPointsState','closed',{path:'/'});jQuery('.expand').removeClass("hide");jQuery('.collapse').addClass("hide");});var gigaomImportantPointsState=jQuery.cookie('gigaomImportantPointsState');if(gigaomImportantPointsState=='open'){jQuery('.collapse').removeClass("hide");jQuery('#important-points-list').show();}else{jQuery('.expand').removeClass("hide");};if((!$.browser.msie||$.browser.version.substr(0,1)!='6')&&typeof CFCT_AJAX_LOAD!='undefined'&&CFCT_AJAX_LOAD){var mega_config={sensitivity:1,interval:20,over:mega_over,timeout:100,out:mega_out};jQuery(".top-level").hoverIntent(mega_config);};var brand_config={sensitivity:1,interval:20,over:brand_over,timeout:200,out:brand_out};jQuery("#brand-menu").hoverIntent(brand_config);$("#go-network-search .click-options a").click(function(){var $allCheckboxes=$("#go-network-search input[type=checkbox]");if($(this).hasClass("all")){$allCheckboxes.attr("checked",true);}
else if($(this).hasClass("this")){$allCheckboxes.attr("checked",false);$("#go-network-search input.current").attr("checked",true);}
return false;});var gpLinksId="#gigaom-pro-links";var gpPhotosId="#gigaom-pro-photos";var $gp=$(gpLinksId);var $gpLinks=$(gpLinksId+" li a");var goGP={refreshInterval:5000,index:1,anchor:$(gpLinksId+" li:eq(1) a"),rotate:function(){setInterval(goGP.update,goGP.refreshInterval);},update:function(){var total=$gp.children().size();if(goGP.index==total){goGP.index=0;goGP.anchor=$(gpLinksId+" li:eq(0) a");}
$(gpPhotosId+" li.selected").stop().fadeTo("normal",0).removeClass("selected");$(gpPhotosId+" li:eq("+goGP.index+")").stop().fadeTo("normal",1).addClass("selected");$(gpLinksId+" li").removeClass("selected");$(gpLinksId+" li .arrow").remove();$(goGP.anchor).parent().addClass("selected");$('<span class="arrow"></span>').appendTo(goGP.anchor);goGP.index++;goGP.anchor=$(gpLinksId+" li:eq("+goGP.index+") a");}};if($gp.children().size()>1){goGP.rotate();}
$gpLinks.mouseover(function(){var $index=$(this).parent().index();$(gpLinksId+" li").removeClass("selected");$(gpLinksId+" li .arrow").remove();$(this).parent().addClass("selected");$('<span class="arrow"></span>').appendTo(this);$(gpPhotosId+" li.selected").stop().fadeTo("normal",0).removeClass("selected");$(gpPhotosId+" li:eq("+$index+")").stop().fadeTo("normal",1).addClass("selected");});var goGallery={thumbWidth:false,init:false,loading:true,pagerAnchorBuilder:function(idx,slide){return"<a href='#"+idx+"'><img src='"+galleryData[idx].thumbnail+"' /></a>";},before:function(currSlideElement,nextSlideElement,options,forwardFlag){var slideNumber=$(nextSlideElement).prevAll().length;$("#gallery-count").text(slideNumber+1);$("#gallery-title").text(galleryData[slideNumber].title);$("#gallery-caption").text(galleryData[slideNumber].caption);if(!goGallery.init){goGallery.init=true;return false;}
if(!goGallery.thumbWidth){var $thumb=jQuery("#gallery-nav a:eq(0)");if($thumb.length>0){goGallery.thumbWidth=$thumb.outerWidth()+parseInt($thumb.css("marginRight"),10)+parseInt($thumb.css("marginLeft"),10);}}
var offset=$("#gallery-nav a:eq("+slideNumber+")").position();var totalItems=$("#gallery > ol").children().length;var totalWidth=totalItems*goGallery.thumbWidth;var parentWidth=$("#gallery-nav-inner").width();var itemsPerWidth=parentWidth/goGallery.thumbWidth;var left=offset.left-(itemsPerWidth/2*goGallery.thumbWidth);var maxLeft=-(parentWidth-totalWidth);if(left>maxLeft){left=maxLeft;}
if(left>0&&totalWidth>parentWidth){$("#gallery-nav").animate({left:-left},150,"easeInOutExpo");}
else if(left<0){$("#gallery-nav").animate({left:0},150,"easeInOutExpo");}
if(goGallery.init&&goGallery.loading){$("#gallery-loading").hide();goGallery.loading=false;}}};$("#gallery ol").cycle({timeout:0,speed:500,easing:"easeOutExpo",before:goGallery.before,pager:"#gallery-nav",pagerAnchorBuilder:goGallery.pagerAnchorBuilder,next:"#gallery-next",prev:"#gallery-prev"});jQuery("#content .horizontal-widget-area").each(function(){if(jQuery(this).children('div').size()<1){jQuery(this).hide();}});jQuery(".loop .horizontal-widget-area:visible:last").addClass("last");jQuery(".loop .widget-area-footer:visible:first").addClass("first");if($.browser.msie&&$.browser.version.substr(0,1)=='6'){var problems=$("#crown-network-logo");problems.removeClass('first');problems.removeClass('last');}
fancyOpts={transitionIn:"elastic",transitionOut:"elastic",speedIn:200,speedOut:200,autoScale:false};$(".the-content a:has(img)")
.filter("[href$='jpeg']").fancybox(fancyOpts).end()
.filter("[href$='jpg']").fancybox(fancyOpts).end()
.filter("[href$='png']").fancybox(fancyOpts).end()
.filter("[href$='gif']").fancybox(fancyOpts);};function mega_over(){jQuery(this).addClass('over');var mega_id=jQuery(this).attr('rev').replace('mega-','');jQuery('.menu-drop-'+mega_id).slideDown(100);jQuery('.mega-menu-header-'+mega_id).slideDown(10);};function mega_out(){jQuery(this).removeClass('over');var mega_id=jQuery(this).attr('rev').replace('mega-','');jQuery('.menu-drop-'+mega_id).hide();jQuery('.mega-menu-header-'+mega_id).hide();};function brand_over(){jQuery("#brand-menu").addClass('active');jQuery('#brand-menu-drop').slideDown(100);};function brand_out(){jQuery("#brand-menu").removeClass('active');jQuery('#brand-menu-drop').slideUp(100);};(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var p=(e.type=="mouseover"?e.fromElement:e.toElement)||e.relatedTarget;while(p&&p!=this){try{p=p.parentNode;}catch(e){p=this;}}if(p==this){return false;}var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}if(e.type=="mouseover"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.mouseover(handleHover).mouseout(handleHover);};})(jQuery);cfct.loading=function(){return'<div class="loading"><span>Loading...</span></div>';};cfct.ajax_post_comments=function(){jQuery('p.comments-link a').unbind().click(function(){var a=jQuery(this);var post_id=a.attr('rev').replace('post-','');var target=jQuery('#post-comments-'+post_id+'-target');target.html(cfct.loading()).show().load(CFCT_URL+'/index.php?cfct_action=post_comments&id='+post_id,function(){jQuery(this).hide().slideDown(function(){a.attr('rel',a.html()).html('Hide Comments').unbind().click(function(){target.slideUp(function(){a.html(a.attr('rel'));cfct.ajax_post_comments();});return false;});});});return false;});};jQuery.extend(jQuery.easing,{easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;}});(function($){$.fn.validate=function(args){var options=$.extend({},$.fn.validate.defaults,args);var jQ=jQuery;return this.each(function(){jQ(this).submit(function(){jQ(this).find(".error").remove();var valid=true;jQ(this).find(".validate").each(function(){el=jQ(this);if(el.hasClass("valid-email")){if(!valid_email(el.val())){add_error(el,options.email_error_message);valid=false;}}
if(el.hasClass("valid-required")){if(!valid_required(el.val())){add_error(el,options.required_error_message);valid=false;}}});return valid;});});};function add_error(el,message){el.parent().addClass("err");el.before("<span class='error'>"+message+"</span>");}
function valid_email(email){var email_pattern=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(email.match(email_pattern))return true;return false;};function valid_required(val){if(val.length>0)return true;return false;}
$.fn.validate.defaults={email_error_message:'Please provide a valid email address.',required_error_message:'Required field.'};})(jQuery);jQuery(document).ready(function($){if(!read_cookie('gigaom_privacy_policy'))
{var privacy_message=$('<div />')
.addClass('privacy-policy')
.html('<div class="privacy-policy-header">A note<br />to our readers</div>'
+'<div class="privacy-policy-text">We have updated our Privacy Policy and Terms of Service. Review the updates <a href="http://gigaom.com/privacy-policy/">here</a>. '
+'By continuing to use the site, you are agreeing to our updated <a href="http://gigaom.com/privacy-policy/">Privacy Policy</a> and <a href="http://gigaom.com/terms-and-conditions/">Terms of Service</a>.'
+'<p>This notice should appear only the first time you visit this site.</p></div>'
+'<a href="#" class="privacy-policy-dismiss">Close  x</a><div class="clearfix"></div>');$('#search-form').after(privacy_message);$('.privacy-policy-dismiss').click(function(e){e.preventDefault();$('.privacy-policy').slideUp('fast');});create_cookie('gigaom_privacy_policy',1,548);}
function create_cookie(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*1000*60*60*24));var expires="; expires="+date.toGMTString();}
else var expires="";document.cookie=name+"="+value+expires+"; path=/";}
function read_cookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;}});jQuery(document).ready(function($){jQuery('table.zebra tr:odd').addClass('odd');});