function receiveOoyalaPlayerEvent(playerId,eventName,eventParams){var player=document.getElementById(playerId);switch(eventName){case"apiReady":var dlVideo=document.getElementById('dl-video');var videos=getInfoOfAllChannelItems(player);var thumbnailHTML=generateThumbnailHTML(videos,playerId);var dlVideoThumbnails=document.createElement('ul');var dlVideoThumbnailsId='dl-video-thumbnails';dlVideoThumbnails.setAttribute('id',dlVideoThumbnailsId);dlVideoThumbnails.innerHTML=thumbnailHTML;dlVideo.appendChild(dlVideoThumbnails);var video=player.getCurrentItemEmbedCode();changeHighlight(player,video);break;case"currentItemEmbedCodeChanged":var stepToIndex=0;var videos=getInfoOfAllChannelItems(player);changeHighlight(player,eventParams.embedCode);for(var i=0;i<videos.length;i++){if(videos[i].embedCode==eventParams.embedCode){stepToIndex=i+1;}}
break;}}
function getInfoOfAllChannelItems(player){var thumbnailWidth=87;var thumbnailHeight=57;var channelItems=player.getLineup();var urls=[];var embedCodes=[];var titles=[];var videos=[];for(var i=0;i<channelItems.length;i++){urls.push(player.getPromoFor(channelItems[i].embedCode,thumbnailWidth,thumbnailHeight));embedCodes.push(channelItems[i].embedCode);titles.push(channelItems[i].title);var video=new Object();video.embedCode=embedCodes[i];video.thumbnailURL=urls[i];video.title=titles[i];videos.push(video);}
return videos;}
function generateThumbnailHTML(videos,playerId){var maxVideos=6;var lastChild="";var html="";var changeVideo="";for(var i=0;i<maxVideos;i++){if(i==5){lastChild=' class="last-child"';}
changeembed="changeEmbed('"+playerId+"', '"+videos[i].embedCode+"')";html+='<li'+lastChild+'><a href="#" onclick="'+changeembed+' ;return false;" class="panel">';html+='<img width="87px" height="57px" alt="'+videos[i].title+'" title="'+videos[i].title+'" id="'+videos[i].embedCode+'" src="'+videos[i].thumbnailURL+'" /></a></li>';}
return html;}
function changeHighlight(playerId,embedCode){var player=document.getElementById('player');var currentlySelected=jQuery("#dl-video-thumbnails .current");if(currentlySelected.length>0){currentlySelected[0].className="";}
highlight(embedCode);}
function changeEmbed(playerId,embedCode){var autoplay=true;var player=document.getElementById('player');player.changeCurrentItem(embedCode);if(autoplay)player.playMovie();}
function highlight(embedCode){var element=document.getElementById(embedCode);element.className="current";}