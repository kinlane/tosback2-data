(function(a,C,af){var A={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,returnFocus:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:undefined},z="colorbox",Z="cbox",x=Z+"Element",J=Z+"_open",I=Z+"_load",G=Z+"_complete",E=Z+"_cleanup",F=Z+"_closed",K=Z+"_purge",P=a.browser.msie&&!a.support.opacity,Q=P&&a.browser.version<7,H=Z+"_IE6",m,c,v,e,t,h,p,b,o,u,i,j,k,s,f,q,l,n,d,g,ac,N,O,T,U,D,M,Y,X,w,y,V,aa,B="div";function r(aj,ai,ag){var ah=C.createElement(aj);if(ai){ah.id=Z+ai}if(ag){ah.style.cssText=ag}return a(ah)}function L(ag){var ah=o.length,ai=(M+ag)%ah;return(ai<0)?ah+ai:ai}function ab(ah,ag){return Math.round((/%/.test(ah)?((ag==="x"?u.width():u.height())/100):1)*parseInt(ah,10))}function R(ag){return ac.photo||/\.(gif|png|jpe?g|bmp|ico)((#|\?).*)?$/i.test(ag)}function W(){var ag;ac=a.extend({},a.data(D,z));for(ag in ac){if(a.isFunction(ac[ag])&&ag.slice(0,2)!=="on"){ac[ag]=ac[ag].call(D)}}ac.rel=ac.rel||D.rel||"nofollow";ac.href=ac.href||a(D).attr("href");ac.title=ac.title||D.title;if(typeof ac.href==="string"){ac.href=a.trim(ac.href)}}function ae(ah,ag){a.event.trigger(ah);if(ag){ag.call(D)}}function ad(){var al,ag=Z+"Slideshow_",ai="click."+Z,aj,ak,ah;if(ac.slideshow&&o[1]){aj=function(){q.text(ac.slideshowStop).unbind(ai).bind(G,function(){if(M<o.length-1||ac.loop){al=setTimeout(aa.next,ac.slideshowSpeed)}}).bind(I,function(){clearTimeout(al)}).one(ai+" "+E,ak);c.removeClass(ag+"off").addClass(ag+"on");al=setTimeout(aa.next,ac.slideshowSpeed)};ak=function(){clearTimeout(al);q.text(ac.slideshowStart).unbind([G,I,E,ai].join(" ")).one(ai,function(){aa.next();aj()});c.removeClass(ag+"on").addClass(ag+"off")};if(ac.slideshowAuto){aj()}else{ak()}}else{c.removeClass(ag+"off "+ag+"on")}}function S(ah){if(!y){D=ah;W();o=a(D);M=0;if(ac.rel!=="nofollow"){o=a("."+x).filter(function(){var ai=a.data(this,z).rel||this.rel;return(ai===ac.rel)});M=o.index(D);if(M===-1){o=o.add(D);M=o.length-1}}if(!X){X=w=true;c.show();if(ac.returnFocus){try{D.blur();a(D).one(F,function(){try{this.focus()}catch(ai){}})}catch(ag){}}m.css({opacity:+ac.opacity,cursor:ac.overlayClose?"pointer":"auto"}).show();ac.w=ab(ac.initialWidth,"x");ac.h=ab(ac.initialHeight,"y");aa.position();if(Q){u.bind("resize."+H+" scroll."+H,function(){m.css({width:u.width(),height:u.height(),top:u.scrollTop(),left:u.scrollLeft()})}).trigger("resize."+H)}ae(J,ac.onOpen);g.add(s).hide();d.html(ac.close).show()}aa.load(true)}}aa=a.fn[z]=a[z]=function(ai,ah){var ag=this;ai=ai||{};aa.init();if(!ag[0]){if(ag.selector){return ag}ag=a("<a/>");ai.open=true}if(ah){ai.onComplete=ah}ag.each(function(){a.data(this,z,a.extend({},a.data(this,z)||A,ai));a(this).addClass(x)});if((a.isFunction(ai.open)&&ai.open.call(ag))||ai.open){S(ag[0])}return ag};aa.init=function(){if(!c){if(!a("body")[0]){a(aa.init);return}u=a(af);c=r(B).attr({id:z,"class":P?Z+(Q?"IE6":"IE"):""});m=r(B,"Overlay",Q?"position:absolute":"").hide();v=r(B,"Wrapper");e=r(B,"Content").append(i=r(B,"LoadedContent","width:0; height:0; overflow:hidden"),k=r(B,"LoadingOverlay").add(r(B,"LoadingGraphic")),s=r(B,"Title"),f=r(B,"Current"),l=r(B,"Next"),n=r(B,"Previous"),q=r(B,"Slideshow").bind(J,ad),d=r(B,"Close"));v.append(r(B).append(r(B,"TopLeft"),t=r(B,"TopCenter"),r(B,"TopRight")),r(B,false,"clear:left").append(h=r(B,"MiddleLeft"),e,p=r(B,"MiddleRight")),r(B,false,"clear:left").append(r(B,"BottomLeft"),b=r(B,"BottomCenter"),r(B,"BottomRight"))).find("div div").css({"float":"left"});j=r(B,false,"position:absolute; width:9999px; visibility:hidden; display:none");a("body").prepend(m,c.append(v,j));N=t.height()+b.height()+e.outerHeight(true)-e.height();O=h.width()+p.width()+e.outerWidth(true)-e.width();T=i.outerHeight(true);U=i.outerWidth(true);c.css({"padding-bottom":N,"padding-right":O}).hide();l.click(function(){aa.next()});n.click(function(){aa.prev()});d.click(function(){aa.close()});g=l.add(n).add(f).add(q);m.click(function(){if(ac.overlayClose){aa.close()}});a(C).bind("keydown."+Z,function(ag){var ah=ag.keyCode;if(X&&ac.escKey&&ah===27){ag.preventDefault();aa.close()}if(X&&ac.arrowKey&&o[1]){if(ah===37){ag.preventDefault();n.click()}else{if(ah===39){ag.preventDefault();l.click()}}}})}};aa.remove=function(){c.add(m).remove();c=null;a("."+x).removeData(z).removeClass(x)};aa.position=function(ak,ah){var al=0,ag=0,aj=c.offset();u.unbind("resize."+Z);c.css({top:-99999,left:-99999});if(ac.fixed&&!Q){c.css({position:"fixed"})}else{al=u.scrollTop();ag=u.scrollLeft();c.css({position:"absolute"})}if(ac.right!==false){ag+=Math.max(u.width()-ac.w-U-O-ab(ac.right,"x"),0)}else{if(ac.left!==false){ag+=ab(ac.left,"x")}else{ag+=Math.round(Math.max(u.width()-ac.w-U-O,0)/2)}}if(ac.bottom!==false){al+=Math.max(u.height()-ac.h-T-N-ab(ac.bottom,"y"),0)}else{if(ac.top!==false){al+=ab(ac.top,"y")}else{al+=Math.round(Math.max(u.height()-ac.h-T-N,0)/2)}}c.css({top:aj.top,left:aj.left});ak=(c.width()===ac.w+U&&c.height()===ac.h+T)?0:ak||0;v[0].style.width=v[0].style.height="9999px";function ai(am){t[0].style.width=b[0].style.width=e[0].style.width=am.style.width;k[0].style.height=k[1].style.height=e[0].style.height=h[0].style.height=p[0].style.height=am.style.height}c.dequeue().animate({width:ac.w+U,height:ac.h+T,top:al,left:ag},{duration:ak,complete:function(){ai(this);w=false;v[0].style.width=(ac.w+U+O)+"px";v[0].style.height=(ac.h+T+N)+"px";if(ah){ah()}setTimeout(function(){u.bind("resize."+Z,aa.position)},1)},step:function(){ai(this)}})};aa.resize=function(ag){if(X){ag=ag||{};if(ag.width){ac.w=ab(ag.width,"x")-U-O}if(ag.innerWidth){ac.w=ab(ag.innerWidth,"x")}i.css({width:ac.w});if(ag.height){ac.h=ab(ag.height,"y")-T-N}if(ag.innerHeight){ac.h=ab(ag.innerHeight,"y")}if(!ag.innerHeight&&!ag.height){i.css({height:"auto"});ac.h=i.height()}i.css({height:ac.h});aa.position(ac.transition==="none"?0:ac.speed)}};aa.prep=function(aj){if(!X){return}var ag,ak=ac.transition==="none"?0:ac.speed;i.remove();i=r(B,"LoadedContent").append(aj);function ai(){ac.w=ac.w||i.width();ac.w=ac.mw&&ac.mw<ac.w?ac.mw:ac.w;return ac.w}function ah(){ac.h=ac.h||i.height();ac.h=ac.mh&&ac.mh<ac.h?ac.mh:ac.h;return ac.h}i.hide().appendTo(j.show()).css({width:ai(),overflow:ac.scrolling?"auto":"hidden"}).css({height:ah()}).prependTo(e);j.hide();a(Y).css({"float":"none"});if(Q){a("select").not(c.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(E,function(){this.style.visibility="inherit"})}ag=function(){var ar,ao,av=o.length,ap,an="frameBorder",al="allowTransparency",am,au,aq;if(!X){return}function at(){if(P){c[0].style.removeAttribute("filter")}}am=function(){clearTimeout(V);k.hide();ae(G,ac.onComplete)};if(P){if(Y){i.fadeIn(100)}}s.html(ac.title).add(i).show();if(av>1){if(typeof ac.current==="string"){f.html(ac.current.replace("{current}",M+1).replace("{total}",av)).show()}l[(ac.loop||M<av-1)?"show":"hide"]().html(ac.next);n[(ac.loop||M)?"show":"hide"]().html(ac.previous);if(ac.slideshow){q.show()}if(ac.preloading){ar=[L(-1),L(1)];while((ao=o[ar.pop()])){au=a.data(ao,z).href||ao.href;if(a.isFunction(au)){au=au.call(ao)}if(R(au)){aq=new Image();aq.src=au}}}}else{g.hide()}if(ac.iframe){ap=r("iframe")[0];if(an in ap){ap[an]=0}if(al in ap){ap[al]="true"}ap.name=Z+(+new Date());if(ac.fastIframe){am()}else{a(ap).one("load",am)}ap.src=ac.href;if(!ac.scrolling){ap.scrolling="no"}a(ap).addClass(Z+"Iframe").appendTo(i).one(K,function(){ap.src="//about:blank"})}else{am()}if(ac.transition==="fade"){c.fadeTo(ak,1,at)}else{at()}};if(ac.transition==="fade"){c.fadeTo(ak,0,function(){aa.position(0,ag)})}else{aa.position(ak,ag)}};aa.load=function(ah){var ag,aj,ai=aa.prep;w=true;Y=false;D=o[M];if(!ah){W()}ae(K);ae(I,ac.onLoad);ac.h=ac.height?ab(ac.height,"y")-T-N:ac.innerHeight&&ab(ac.innerHeight,"y");ac.w=ac.width?ab(ac.width,"x")-U-O:ac.innerWidth&&ab(ac.innerWidth,"x");ac.mw=ac.w;ac.mh=ac.h;if(ac.maxWidth){ac.mw=ab(ac.maxWidth,"x")-U-O;ac.mw=ac.w&&ac.w<ac.mw?ac.w:ac.mw}if(ac.maxHeight){ac.mh=ab(ac.maxHeight,"y")-T-N;ac.mh=ac.h&&ac.h<ac.mh?ac.h:ac.mh}ag=ac.href;V=setTimeout(function(){k.show()},100);if(ac.inline){r(B).hide().insertBefore(a(ag)[0]).one(K,function(){a(this).replaceWith(i.children())});ai(a(ag))}else{if(ac.iframe){ai(" ")}else{if(ac.html){ai(ac.html)}else{if(R(ag)){a(Y=new Image()).addClass(Z+"Photo").error(function(){ac.title=false;ai(r(B,"Error").text("This image could not be loaded"))}).load(function(){var ak;Y.onload=null;if(ac.scalePhotos){aj=function(){Y.height-=Y.height*ak;Y.width-=Y.width*ak};if(ac.mw&&Y.width>ac.mw){ak=(Y.width-ac.mw)/Y.width;aj()}if(ac.mh&&Y.height>ac.mh){ak=(Y.height-ac.mh)/Y.height;aj()}}if(ac.h){Y.style.marginTop=Math.max(ac.h-Y.height,0)/2+"px"}if(o[1]&&(M<o.length-1||ac.loop)){Y.style.cursor="pointer";Y.onclick=function(){aa.next()}}if(P){Y.style.msInterpolationMode="bicubic"}setTimeout(function(){ai(Y)},1)});setTimeout(function(){Y.src=ag},1)}else{if(ag){j.load(ag,ac.data,function(ak,al,am){ai(al==="error"?r(B,"Error").text("Request unsuccessful: "+am.statusText):a(this).contents())})}}}}}};aa.next=function(){if(!w&&o[1]&&(M<o.length-1||ac.loop)){M=L(1);aa.load()}};aa.prev=function(){if(!w&&o[1]&&(M||ac.loop)){M=L(-1);aa.load()}};aa.close=function(){if(X&&!y){y=true;X=false;ae(E,ac.onCleanup);u.unbind("."+Z+" ."+H);m.fadeTo(200,0);c.stop().fadeTo(300,0,function(){c.add(m).css({opacity:1,cursor:"auto"}).hide();ae(K);i.remove();setTimeout(function(){y=false;ae(F,ac.onClosed)},1)})}};aa.element=function(){return a(D)};aa.settings=A;a("."+x,C).live("click",function(ag){if(!(ag.which>1||ag.shiftKey||ag.altKey||ag.metaKey)){ag.preventDefault();S(this)}});aa.init()}(jQuery,document,this));