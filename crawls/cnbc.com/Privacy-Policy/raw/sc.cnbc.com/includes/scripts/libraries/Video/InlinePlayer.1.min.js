
var CNBC_InlinePlayer=function(){};(function($){CNBC_InlinePlayer.prototype._playerData={};CNBC_InlinePlayer.prototype.thumbnailImage='thumbnail';CNBC_InlinePlayer.prototype.init=function(args){this._args=args||{};if(this._args.vid&&this._args.partnerId){this._vid=this._args.vid;this._partnerId=this._args.partnerId;this._initData();}};CNBC_InlinePlayer.prototype._initData=function(){this._playerData=new CNBC_PlayerData();this._playerData.init({vid:this._vid,partnerId:this._partnerId,callbackContext:this,dataCompleteCallback:this._renderThumbnail});};CNBC_InlinePlayer.prototype.getData=function(){if(this._playerData){return this._playerData.getData();}};CNBC_InlinePlayer.prototype.startPlayer=function(player){this._player=player;this._setContainer();};CNBC_InlinePlayer.prototype._setContainer=function(){this._container=$('#'+this._player._swfName)[0].parentNode;};CNBC_InlinePlayer.prototype._renderThumbnail=function(){if(typeof this.rendered==="undefined"){this.rendered=1;var data=this.getData(),container=this._container;var html=['<div class="thumbBox"><a href="javascript:void(0)">'];html.push('<img src="');html.push(data.data[this.thumbnailImage]);html.push('" class="thumb">');html.push('<div class="playStrip">');html.push('<div class="playNowButton"> </div>');html.push('</div></a></div>');container.innerHTML=html.join('')+container.innerHTML;this.$thumbBox=$("div.thumbBox",this._container);this._setEvents();}else{this.restoreThumb();}};CNBC_InlinePlayer.prototype._setEvents=function(){var self=this;this.$thumbBox.bind('click',function(){self._playFile();});};CNBC_InlinePlayer.prototype._playFile=function(){if(this._player){this._player.drawPlayer();this.$thumbBox.hide();this._player.callPlayer('playFile');}};CNBC_InlinePlayer.prototype.restoreThumb=function(){this.$thumbBox.show();};})(jQuery);