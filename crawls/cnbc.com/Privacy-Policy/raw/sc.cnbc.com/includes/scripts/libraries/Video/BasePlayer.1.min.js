
var CNBC_Player=function(){};(function($){CNBC_Player.prototype.swfBg='#000000';CNBC_Player.prototype._initPlayerCalls={};CNBC_Player.prototype._playerReady=false;CNBC_Player.prototype._swfName="cnbc_vid_player";CNBC_Player.prototype._width='533';CNBC_Player.prototype._height='300';CNBC_Player.prototype._swfPath='http://plus.cnbc.com/stickers/partners/videoPlayer/AkamaiEnterprisePlayer.swf';CNBC_Player.prototype._install='http://plus.cnbc.com/stickers/partners/videogallery/expressInstall.swf';CNBC_Player.prototype._version='10.0.0';CNBC_Player.prototype._vidDataURL="/vapi/videoservice/rssvideosearch.do?";CNBC_Player.prototype._partnerId=6008;CNBC_Player.prototype._noVidMessage="The current video is unavailable";CNBC_Player.prototype._noFlashMessage="The video feature requires Flash to be installed and enabled.";CNBC_Player.prototype._currentVersion='';CNBC_Player.prototype.init=function(args){this._args=args||{};var isChecked=this._checkRequired();if(isChecked){this._setOverrides();this._setCallbacks();this._playerStart();}else{}};CNBC_Player.prototype._checkRequired=function(){var isChecked=false;if(this._args.swfName){this._swfName=this._args.swfName;isChecked=true;}else{return false;};if(this._args.getDataCallback){this.cb_checkForJSON=this._args.getDataCallback;isChecked=true;}else{return false;};return isChecked;};CNBC_Player.prototype._setOverrides=function(){if(this._args.context){this._context=this._args.context;};if(this._args.height){this._height=this._args.height};if(this._args.width){this._width=this._args.width;};if(this._args.vid){this._vid=this._args.vid;};};CNBC_Player.prototype._setCallbacks=function(){if(this._args.callPlayerCallback){this.cb_callPlayer=this._args.callPlayerCallback;};if(this._args.callPageCallback){this.cb_callPage=this._args.callPageCallback;};if(this._args.playerStartCallback){this.cb_playerStart=this._args.playerStartCallback;};if(this._args.videoCompleteCallback){this.cb_videoComplete=this._args.videoCompleteCallback;};};CNBC_Player.prototype._playerStart=function(){if(this._context&&this.cb_playerStart){this.cb_playerStart.call(this._context,this);}else{this.drawPlayer();this.callPlayer('playFile');}};CNBC_Player.prototype.getPlayer=function(){this.player=($.browser.msie)?window[this._swfName]:document[this._swfName];return this.player;};CNBC_Player.prototype.callPlayer=function(key,params){params=params||{};var player=this.getPlayer();if(this._playerReady&&player){switch(key){case'stop':player.stopPlayer();break;case'pause':player.pause();break;case'unpause':player.unpause();break;case'playFile':try{return player.playFile(this.checkForJSON(),1);}catch(e){this.error=e;};break;default:if(this._context&&this.cb_callPlayer){return this.cb_callPlayer.call(this._context,{key:key,params:params})}}}else if(!CNBC_Common.isNull(key)){this._initPlayerCalls[key]=params;}};CNBC_Player.prototype.callPage=function(playerId,key,obj){obj=obj||{};switch(key){case'jsApiReady':this._playerReady=true;this.submitInitPlayerCalls();break;default:if(this.cb_callPage){this.cb_callPage.call(this._context,{playerId:playerId,key:key,obj:obj});}}};CNBC_Player.prototype.checkForJSON=function(){if(this.cb_checkForJSON){var data=this.cb_checkForJSON(this._context,this._vid);if(data&&typeof data!='undefined'){return data;}}};CNBC_Player.prototype.submitInitPlayerCalls=function(){for(var i in this._initPlayerCalls){if(i!='playFile'){this.callPlayer(i,this._initPlayerCalls[i]);}};this._initPlayerCalls=[];};CNBC_Player.prototype.videoComplete=function(vid){if(this._context&&this.cb_videoComplete){this.cb_videoComplete.call(this._context,vid);}};CNBC_Player.prototype.drawPlayer=function(){if(CNBC_Common.isNull(this._videoId)){swfobject.embedSWF(this._swfPath,this._swfName,this._width,this._height,this._version,this._install,this._args.flashVars||{},this._args.flashParams||{},{name:this._swfName,bgcolor:this.swfBg},this.swfErr);}else{this.vidErr();}};CNBC_Player.prototype.swfErr=function(){this._playerReady=false;var errorHTML=this.errorHTML||{};var html=(typeof errorHTML==="object"&&errorHTML.length)?errorHTML:['<div class="noSwfError">',this._noFlashMessage,'</div>'].join('');$("#"+this._swfName).parent().html(html);};CNBC_Player.prototype.vidErr=function(){this._playerReady=false;var errorHTML=this.errorHTML||{};var html=(typeof errorHTML==="object"&&errorHTML.length)?errorHTML:['<div class="noVidError">',this._noVidMessage,'</div>'].join('');$("#"+this._swfName).parent().html(html);};})(jQuery);