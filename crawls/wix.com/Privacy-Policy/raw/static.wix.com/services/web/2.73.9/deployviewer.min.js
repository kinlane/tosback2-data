function getTags(){var e=["common","viewer"],t=rendererModel.runningExperiments;for(var n in t)e.push(n.toLowerCase());return e}define.resource("tags",getTags()),define.resource("mode",{debug:debugMode==="debug",test:!1}),define.deployment("wysiwyg.deployment.PrepViewer",function(e){e.atPhase(PHASES.BOOTSTRAP,function(e){window.wixData&&resource.getResources(["dataFixer"],function(e){var t=e.dataFixer.fix(window.wixData);this.define.dataItem.multi(t.document_data),this.define.dataPropertyItem.multi(t.component_properties),this.define.dataThemeItem.multi(t.theme_data)})}),e.atPhase(PHASES.MANAGERS,function(e){e.createClassInstance("W.SiteMembers","wysiwyg.viewer.managers.SiteMembersManager"),e.createClassInstance("W.MessagesController","wysiwyg.viewer.utils.MessageViewController")}),e.atPhase(PHASES.POST_DEPLOY,function(e){if(window.viewMode==="preview")return null;if(!!window.siteHeader&&!!window.rendererModel){var t=e.getClassManagerInstance();t.getClass("core.utils.BeatStatisticsAndKeepAlive",function(e){window.BeatStatisticsAndKeepAliveInstance=new e("hve",siteHeader.id,$$("title")[0].innerHTML,siteHeader.documentType,!1,rendererModel.metaSiteId,function(e,t){})})}})}),resource.getResources(["mode","scriptLoader"],function(e){window.getIndexTopology.call(e,{debug:e.mode.debug},[{from:"bootstrap",to:"bootstrap"},{from:"core",to:"core"},{from:"web",to:"wysiwyg"},{from:"skins",to:"skins"},{from:"wixapps",to:"wixapps"},{from:"ck-editor",to:"ck-editor"},{from:"langs",to:"langs",exclude:!0},{from:"mock",to:"mock",exclude:!0},{from:"html-test-framework",to:"html-test-framework"},{baseUrl:"",to:"external_apis",exclude:!0}],function(t){define.resource("topology",t.all),e.mode.test&&t.manifestsUrls.unshift(getTestManifestFromTheSpecRunner()),define.resource("manifestsUrls",t.manifestsUrls),define.deployment("wysiwyg.deployment.Wysiwyg-Common",function(e){e.atPhase(PHASES.MANAGERS,function(e){e.createClassInstance("W.Layout","wysiwyg.common.managers.LayoutManager"),e.createClassInstance("W.CookiesManager","wysiwyg.managers.WCookiesManager"),e.createClassInstance("W.Viewer","wysiwyg.common.managers.WViewManager"),e.createClassInstance("W.TPA","wysiwyg.viewer.managers.TPAManager")})}),e.scriptLoader.loadAllIndexes(t.manifestsUrls,function(){define.resource("deployment",define.createBootstrapClassInstance("bootstrap.bootstrap.deploy.Deploy").init(window))})})}),define.deployment("core.deployment.DeployViewer",function(e){e.atPhase(PHASES.INIT,function(e){function t(){W.Pages.isPageLoadingCompleted()?W.Data.getDataByQuery("#SITE_STRUCTURE",function(e){var t=window.viewMode!="preview";W.Viewer.setSite($("SITE_STRUCTURE"),e,t)}):W.Utils.callLater(t,[],this,10)}W.Layout.setSavedAnchor(window.anchors),resource.getResourceValue("status.structure.loaded",function(e){if(!e)throw new Error("Site structure failed to load");W.Pages&&W.Pages.loadSite&&!window.wixData?(W.Pages.loadSite(),t()):W.Data.getDataByQuery("#SITE_STRUCTURE",function(e){var t=window.viewMode!="preview";W.Viewer.setSite($("SITE_STRUCTURE"),e,t)})})}),e.atPhase(PHASES.MANAGERS,function(e){e.createClassInstance("W.Pages","wysiwyg.viewer.managers.PageManager")})});