(function(cds,window,$){var document=window.document;$.fn.initSearch=function(){var $sDiv=$(this),$sInput=$sDiv.find("input.inputSearchValue"),$sInputBtn=$sDiv.find("button.inputSearchButton"),$sUl=$sDiv.find("ul.inputSearchBar"),$sSelect=$sDiv.find("select"),$sOkBtn=$sDiv.find("input.inputSubmit");$sInput.one("focus",function(){var jsUrl=$sInput.attr("data-jssrc"),searchOptions=cds.parseJson($sInput.attr("data-autocomplete").replace(/'/g,'"')),suggestUrl=$sInput.attr("data-suggUrl");if(typeof $.fn.autocomplete!=="function")cds.loadScript({src:jsUrl},function(){$sInput.autocomplete(suggestUrl,searchOptions)});else $sInput.autocomplete(suggestUrl,searchOptions)}).bind("keypress",function(e){if(e.keyCode===13){$sOkBtn.click();return false}}).bind("result",function(e,s){var dpt=s.department;if(dpt){$sInputBtn.text(dpt);$sSelect.find("option[text='"+dpt+"']").attr("selected","selected")}$sOkBtn.click()});$sInputBtn.click(function(){$sUl.toggle()}).blur(function(){setTimeout(function(){$sUl.hide()},150)});$sUl.bindUl("click",function($li){var txt=$li.find("span").text();$sInputBtn.text(txt);$sUl.hide();$sSelect.find("option[text='"+txt+"']").attr("selected","selected");return false});$sOkBtn.click(function(){$sUl.hide();var dpt=$sSelect.find("option[selected]").val(),queryStr=encodeURI($sInput.val().replace(/[+&<>^|:\?\.\/\*%#\"\\]/g," ").replace(/[\s+]/g," ").replace(/^(\s)+|(\s)+$/g,"").replace(/\s+/g,"+").replace(/[\']/g," "));if(queryStr===""||queryStr===$sInput.attr("placeholder"))alert("Saisissez votre recherche");else window.location.href=$(this).attr("data-frontUrl")+dpt+queryStr+".html";return false})};var goToRegistrationForm=function(urlRegistrationForm,invalidEmailMsg){var email=document.getElementById("inputNewsletterTextBox").value;if(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(email)&&cds.ui)cds.ui.popUp(urlRegistrationForm+document.getElementById("inputNewsletterTextBox").value,"Newsletter",790,810,20,20,1,1);else alert(invalidEmailMsg);return false};window["goToRegistrationForm"]=goToRegistrationForm;var IntegrationFlash=function(imgPath,path4par3,name4par3,height,width){width=width||"0",Height=height||"0";var swfUrl=imgPath+path4par3+name4par3,oTag='<object type="application/x-shockwave-flash" data="'+swfUrl+'" width="'+width+'" height="'+height+'"><param name="movie" value="'+swfUrl+'"><param name="quality" value="high"><param name="play" value="true"><param name="wmode" value="transparent"><param name="allowScriptAccess" value="always" /></object>';document.write(oTag)};window["IntegrationFlash"]=IntegrationFlash;var vAlignDepartmentLeftMenuV2=function(){$("span.selectorLeftSidebar").each(function(){var $this=$(this);$this.height()>14&&$this.parent("div.leftSidebarRayonTitle").addClass("twoLinesRayonTitle")})};window["vAlignDepartmentLeftMenuV2"]=vAlignDepartmentLeftMenuV2;function BuildMainMenuOverlayers(html,options){var $=jQuery,$navigation=$("#mainNavigation").addClass("async-loaded"),default_options={maxRetry:5,timeout:700};options=$.extend({},default_options,options);if(options.maxRetry&&!$navigation.length){setTimeout(function(){--options.maxRetry;BuildMainMenuOverlayers(html,options)},options.timeout);return}$containers=$navigation.children("li");$(html).find("div.navLayer").each(function(){var overlayer=this;overlayer.className.replace(/navlayer-uid-(\d+)/,function(m,uid){$containers.filter(".univers-uid-"+uid).append(overlayer)})});html=null;$containers.each(BuildMainMenuOverlayersEffects)}window["BuildMainMenuOverlayers"]=BuildMainMenuOverlayers;function GetMainMenuOverlayers(url,options){var $=jQuery;$.get(url,function(html){BuildMainMenuOverlayers(html,options)})}window["GetMainMenuOverlayers"]=GetMainMenuOverlayers;function BuildMainMenuOverlayersEffects(){var $this=$(this);$this.bind("mouseover",function(){$this.find("a.universLink, span.universLink").not(".currentLink").addClass("activeLink").next().show();$this.hasClass("jqNoOverLayer")&&$this.find("a.universLink, span.universLink").addClass("currentLink activeLink").next().show();$this.hasClass("jqCurrentLink")&&$this.find("a.universLink, span.universLink").removeClass("currentLink").addClass("activeLink").next().show()}).bind("mouseout",function(){$this.find("a.universLink, span.universLink").removeClass("activeLink").next().hide();$this.hasClass("jqNoOverLayer")&&$this.find("a.universLink, span.universLink").removeClass("currentLink activeLink");$this.hasClass("jqCurrentLink")&&$this.find("a.universLink, span.universLink").addClass("currentLink activeLink").next().hide();return false})}$.fn.placeHolder=function(){$(this).each(function(){var inputValue=$(this).attr("placeholder"),inputColor="#A9A9A9",$this=$(this);cds.isEmptyString($this.attr("value"))&&$this.attr("value",inputValue).css("color",inputColor);return $this.focusin(function(){$this.attr("value").toLowerCase()===inputValue.toLowerCase()&&$this.removeAttr("value").css("color","")}).focusout(function(){cds.isEmptyString($this.attr("value"))&&$this.attr("value",inputValue).css("color",inputColor)})})};$.fn.revealHover=function(options){var default_options={hoverClass:"reveal-hover-active",hoverEvent:"mouseenter",hoverOutEvent:"mouseleave",revealMethod:"bind",itemSelector:".reveal-hover-item",itemToHideSelector:".reveal-hover-hide",onHover:$.noop,onHoverOut:$.noop,hoverAddClass:"",hoverRemoveClass:"",hoverOutAddClass:"",hoverOutRemoveClass:"",hideAddClass:"",hideRemoveClass:"",hideOutAddClass:"",hideOutRemoveClass:""};options=$.extend({},default_options,options);return this[options.revealMethod](options.hoverEvent,function(){var $this=$(this),$hoverSelectors=$this.addClass(options.hoverClass).find(options.itemSelector);$hoverSelectors.addClass(options.hoverAddClass).removeClass(options.hoverRemoveClass);$hoverSelectors.length&&$this.find(options.itemToHideSelector).addClass(options.hideAddClass).removeClass(options.hideRemoveClass);options.onHover.call(this,options)})[options.revealMethod](options.hoverOutEvent,function(){var $this=$(this),$hoverSelectors=$this.removeClass(options.hoverClass).find(options.itemSelector);$hoverSelectors.addClass(options.hoverOutAddClass).removeClass(options.hoverOutRemoveClass);$hoverSelectors.length&&$this.find(options.itemToHideSelector).addClass(options.hideOutAddClass).removeClass(options.hideOutRemoveClass);options.onHoverOut.call(this,options)})};var refreshArticleCount=function(){if(cds.getCookie){var cookieNameInput=$(":input[name=ArticleCountCookieName]");if(cookieNameInput.length>0&&cookieNameInput[0].value!=null){var articleCount=cds.getCookie(cookieNameInput[0].value)!=""?parseInt(cds.getCookie(cookieNameInput[0].value)):0,$divNoArticle=$("#divNoArticle"),$divOneArticle=$("#divOneArticle"),$divSeveralArticle=$("#divSeveralArticle");if($divNoArticle.length>0&&$("#divOneArticle").length>0&&$("#divSeveralArticle").length>0){$divNoArticle.hide();$divOneArticle.hide();$divSeveralArticle.hide();switch(articleCount){case 0:$divNoArticle.show();break;case 1:$divOneArticle.show();break;default:$divSeveralArticle.find("span").text(articleCount);$divSeveralArticle.show()}}}}};$(function(){var $page=$("#page"),$mainNavigation=$("#mainNavigation"),$mainContainer=$("#mainContainer"),$linkPriceCss=$("head > link[href*='price.css']");if($linkPriceCss.length&&typeof cds.ui.isFontAvailable==="function"&&!cds.ui.isFontAvailable("impact")){var urlFFS=$linkPriceCss.attr("href").replace("price.css","fontFace.css");cds.loadStylesSheet(urlFFS)}typeof cds.isInputAttrSupported!=="undefined"&&!cds.isInputAttrSupported("placeholder")&&$("#page input[placeholder]").placeHolder();$page.find("span[class*='deleg-c']").delegate({onRedirectClick:function(uri){var $this=$(this),scr=window.screen;if($this.hasClass("deleg-c-target-self")||$this.hasClass("deleg-c-footer-service"))window.location.href=uri;else if($this.hasClass("deleg-c-footer"))cds.ui&&cds.ui.popUp(uri,"FooterLink",scr.availWidth,scr.availHeight,0,0,1,1,1,1,1,1,1);else if($this.hasClass("deleg-c-target-blank"))cds.ui&&cds.ui.popUp(uri,"MallLink",scr.availWidth,scr.availHeight,0,0,1,1,1,1,1,1,1);else if($this.hasClass("deleg-c-cdiscount-film"))cds.ui&&cds.ui.popUp(uri,"video",440,360,0,0,1,1,0,0,0,1,0)}});var $histPL=$("#HistoryProductList");$histPL.find("p.historyDisplayBlock").hide();$histPL.find("ul.displayPdtList li").each(function(){var $this=$(this),$a=$this.find("a");if($this.hasClass("active")){var urlBlock=$a.attr("rel");$("#"+urlBlock).show()}$a.mouseenter(function(){var $that=$(this);$that.parent("li").siblings().removeClass("active");$that.parent("li").addClass("active");var urlBlockDisplay=$that.attr("rel");$("#"+urlBlockDisplay).show();$("#"+urlBlockDisplay).siblings().hide()})});var searchTexbox=$("#header div.jqSearchBlock input.inputSearchValue");if(searchTexbox.length){searchTexbox.val("");searchTexbox.focus()}if(cds.getSiteVersion(29)){var smartAdZoneList=$mainContainer.find(".SmartAdZoneList");smartAdZoneList&&smartAdZoneList.hide()}$mainNavigation.not(".async-loaded").find("li.mainNavItem").each(BuildMainMenuOverlayersEffects);$mainNavigation.find("li.mainNavItem").one("mouseover",function(){typeof $.fn.loadImg!=="undefined"&&$(this).find(".navLayer img[data-src]").each(function(){$(this).loadImg(false)})});typeof $.fn.fixZIndex!="undefined"&&$("body").find(".jq-fixZIndex").fixZIndex();typeof $.fn.picHover!="undefined"&&$("body").find(".jq-picHover").picHover();$("#mainContainer input.button-continue-shopping-grey").live("click",function(){cds.getAllCookies&&cds.getAllCookies();refreshArticleCount()});var cookieNameInput=$mainContainer.find("input[name=ArticleCountCookieName]");cookieNameInput.length>0&&cookieNameInput[0].value!=null&&refreshArticleCount()})})(cds,window,jQuery);