var DEBUG=!0;window.pressplus={profiler:{duration:{startTime:0,forInit:0}}};window.pressplus.profiler.duration.startTime=new Date;
(function(e,c){var b={},o="//h.ppjol.com",x="//s.ppjol.net",n="https://ui.ppjol.com",A=!1,B="",y=2,C=[],P=1,f,s,D,K,G,p,l,q,t,u,E,z,j,m,v,H,L,F,I,r,w,J,M,k,i,N=!1;"undefined"!==typeof e.console&&e.console?(f=e.console,"undefined"===typeof f.debug&&(f.debug=f.log)):f={debug:function(){},error:function(){},info:function(){},log:function(){},warn:function(){}};b.status={target:{},mostRecent:{scroll:{timestamp:0}},manualPop:{triggered:!1}};-1!=s&&9>s&&(b.status.manualPop={triggered:!1},b.status.mostRecent=
{scroll:""},b.status.mostRecent.scroll={timestamp:0});DEBUG&&("undefined"!==typeof e.USE_LOCALHOST&&!0===e.USE_LOCALHOST?(o="//h-dev.ppjol.com:8080",x="//s-dev.ppjol.net:8080",n="//ui-dev.ppjol.com:8080"):"string"===typeof e.USE_SERVER?n=x=o=e.USE_SERVER:"object"===typeof e.USE_SERVER&&"undefined"!==typeof e.USE_SERVER.target&&("undefined"!==typeof e.USE_SERVER.target.hecate?o=e.USE_SERVER.target.hecate:f.log("HECATE_TARGET not overridden: no target specified in USE_SERVER config"),"undefined"!==
typeof e.USE_SERVER.target.css?x=e.USE_SERVER.target.css:f.log("CSS_TARGET not overridden: no target specified in USE_SERVER config"),"undefined"!==typeof e.USE_SERVER.target.ui?n=e.USE_SERVER.target.ui:f.log("UI_TARGET not overridden: no target specified in USE_SERVER config")),"undefined"!==typeof e.USE_LOCALHOST&&!0===e.USE_LOCALHOST&&f.log("window.USE_LOCALHOST is %s",e.USE_LOCALHOST));if("Microsoft Internet Explorer"==navigator.appName){var O=navigator.userAgent.match(/MSIE\s([\d+])/);s=O&&parseInt(O[1],
10)}else s=-1;D=/Safari/.test(navigator.userAgent)&&!/chrome/.test(navigator.userAgent.toLowerCase());/chrome/.test(navigator.userAgent.toLowerCase());K=/dolfin/.test(navigator.userAgent.toLowerCase())||!/chrome/.test(navigator.userAgent.toLowerCase())&&/mobile safari/.test(navigator.userAgent.toLowerCase())&&/\(khtml, like gecko\) version\/?/.test(navigator.userAgent.toLowerCase());G=/android/.test(navigator.userAgent.toLowerCase());Function.prototype.bind=Function.prototype.bind||function(){var a=
this,b=[].slice.call(arguments),d=b.shift();return function(){return a.apply(d,b.concat([].slice.call(arguments)))}};b.util={observe:function(a,b,d){a.attachEvent?a.attachEvent("on"+b,d):a.addEventListener&&a.addEventListener(b,d,false)},stopObserving:function(a,b,d){a.detachEvent?a.detachEvent("on"+b,d):a.removeEventListener&&a.removeEventListener(b,d,false)},onPageReady:function(a){e.addEventListener?e.document.readyState==="complete"?a():e.addEventListener("load",a,false):e.attachEvent&&e.attachEvent("onload",
a)},loadScript:function(a,g){var d=c.createElement("script"),h="_cb_"+b.util.uniqueString(),a=b.util.formUrl(a,{cb:h});e[h]=g;d.src=a;d.type="text/javascript";d.async=true;c.getElementsByTagName("body")[0].appendChild(d)},loadCSS:function(a){var b=c.createElement("link");b.media="screen";b.rel="stylesheet";b.type="text/css";b.href=a;c.getElementsByTagName("body")[0].appendChild(b)},trim:function(a){return a.replace(/^\s+|,?\s+$/g,"")},uniqueString:function(){var a=[],b=["0","1","2","3","4","5","6",
"7","8","9","A","B","C","D","E","F"],d;for(d=0;d<36;d++)a[d]=15&Math.random()*16;a[14]=4;a[19]=a[19]&3|8;for(d=0;d<36;d++)a[d]=b[a[d]];return a.join("")},formUrl:function(a,b){typeof b==="undefined"&&(b={});var d=a,h=[],c;for(c in b)h.push(c+"="+encodeURIComponent(b[c]));h.length>0&&d.indexOf("?")>-1?d=d+"&"+h.join("&"):h.length>0&&(d=d+"?"+h.join("&"));f.debug("formUrl: ",d);return d},isMobile:function(a){return a==="mobile"||a==="universal"&&this.isMobileBrowser()},isMobileBrowser:function(){var a=
navigator.userAgent.toLowerCase()||navigator.vendor.toLowerCase()||e.opera.toLowerCase();return/(android|bb\d+|meego).+(nexus|galaxy|droid|mobile)|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4))},getCookie:function(a){var b=a+"=",d="";if(c.cookie.length>0){a=c.cookie.indexOf(b);if(a!==-1){a=a+b.length;b=c.cookie.indexOf(";",a);if(b===-1)b=c.cookie.length;d=decodeURI(c.cookie.substring(a,b))}}return d},set_cookie:function(a,b,d,h,e,f,i,j){a=a+"="+escape(b);d&&(a=a+("; expires="+(new Date(d,h,e)).toGMTString()));f&&(a=a+("; path="+escape(f)));i&&(a=a+("; domain="+escape(i)));j&&location.protocol==="https"&&(a=a+"; secure");c.cookie=a},del_cookie:function(a){c.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},
setCookie:function(a,g){var d=e.location.hostname,h=[],h=d.split("."),c="";h[1]&&(c=c+h[1]);var c=h[2]?c+("."+h[2]):d,f=new Date,d=f.getDate(),h=f.getMonth()+1,f=f.getFullYear();d<10&&(d="0"+d);h<10&&(h="0"+h);navigator.appName=="Microsoft Internet Explorer"?b.util.set_cookie(a,g,f,h,d+1,"/",c,true):b.util.set_cookie(a,g,null,null,null,"/",c,true)},setCookieString:function(a){a=a.split("=");b.util.setCookie(a[0],a[1])},searchData:function(a){var b,d,h;for(b=0;b<a.length;b++){d=a[b].string;h=a[b].prop;
this.versionSearchString=a[b].versionSearch||a[b].identity;if(d){if(d.indexOf(a[b].subString)!==-1)return a[b].identity}else if(h)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(b!==-1)return parseFloat(a.substring(b+this.versionSearchString.length+1))},detectBrowser:function(a,b){return this.searchData(this.browserData)===a&&this.searchData(this.infoOS)===b},browserData:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,
subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.userAgent,subString:"Dolfin",identity:"Dolfin"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:e.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",
identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"}],infoOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",
identity:"Linux"},{string:navigator.platform,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Berry",identity:"BlackBerry"}]};b.ui={getScroll:function(){var a=0;if(e.pageYOffset)a=e.pageYOffset;else{a=c.documentElement||c.body.parentNode;a=typeof a.scrollTop==="number"?a.scrollTop:c.body.scrollTop}return a},getPageSize:function(){var a,b;a=Math.max(c.documentElement.clientWidth,c.body.scrollWidth,c.documentElement.scrollWidth,c.body.offsetWidth,c.documentElement.offsetWidth);
b=Math.max(c.documentElement.clientHeight,c.body.scrollHeight,c.documentElement.scrollHeight,c.body.offsetHeight,c.documentElement.offsetHeight);return{x:a,y:b}},getViewport:function(){var a,b;if(c.compatMode==="CSS1Compat"){a=c.documentElement.clientWidth;b=c.documentElement.clientHeight}else{a=c.body.clientWidth;b=c.body.clientHeight}return{x:a,y:b}}};b.lightbox={initLightwindow:function(){m=c.createElement("div");m.id="gregbox-outer"},initOverlay:function(){p=c.createElement("div");p.style.backgroundImage=
"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDhCQzBDREZCQ0ZGMTFFMEIxQkFCQ0MxOEQzMzc5NTEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDhCQzBDRTBCQ0ZGMTFFMEIxQkFCQ0MxOEQzMzc5NTEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEOEJDMENEREJDRkYxMUUwQjFCQUJDQzE4RDMzNzk1MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEOEJDMENERUJDRkYxMUUwQjFCQUJDQzE4RDMzNzk1MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoOauxEAAAALSURBVAgdYzA+AwABNQEAGVbmvQAAAABJRU5ErkJggg%3D%3D)";
p.style.zIndex=99998;p.style.position="absolute";p.style.top=0;p.style.left=0;b.util.observe(p,"click",b.lightbox.overlayClickHandler)},overlayClickHandler:function(){return false},openLightBoxWindow:function(){var a=c.body;if(a){a.appendChild(m);a.appendChild(p);a.appendChild(q);a.appendChild(l);b.lightbox.positionOverlay();b.lightbox.positionLightwindow();m.appendChild(j);m.appendChild(t);H=true;v&&v()}},openFullLightBoxWindow:function(){var a=c.body;if(a){a.appendChild(m);a.appendChild(p);a.appendChild(q);
m.appendChild(j);H=true;m.style.top="0px";m.style.left="0px";m.style.width="100%";m.style.height="100%";m.style.border=0;v&&v()}},showLightBox:function(a,g){v=g;b.lightbox.initLightwindow();b.lightbox.initOverlay();b.lightbox.initIframe(a);b.lightbox.initCloseButton();b.lightbox.initSignInLink();b.lightbox.initFooter();b.lightbox.openLightBoxWindow()},showFullLightBox:function(a,g){v=g;b.lightbox.initLightwindow();b.lightbox.initOverlay();b.lightbox.initFullIframe(a);b.lightbox.initSignInLink();b.lightbox.openFullLightBoxWindow()},
go:function(a){f.log("Requesting to go to: "+a);if(H&&j!==null)j.contentWindow.location.href=a},initIframe:function(a){j=c.createElement("iFrame");j.src=a;j.style.width="600px";j.style.height="525px";j.style.border=0;j.frameBorder=0;j.scrolling="no";j.id="innerFrame"},initFullIframe:function(a){j=c.createElement("iFrame");j.src=a;j.style.position="absolute";j.style.top="0px";j.style.left="0px";j.style.width="100%";j.style.height="100%";j.style.border=0;j.frameBorder=0;j.scrolling="no";j.id="innerFrame"},
initSignInLink:function(){q=c.createElement("a");q.innerHTML="SIGN IN";q.id="gregbox-signInTab";b.util.observe(q,"click",b.client.signInClickHandler)},initCloseButton:function(){l=c.createElement("img");l.src="http://s.ppjol.net/static/fb/fancy_close.png";l.style.cursor="pointer";l.style.position="absolute";l.style.zIndex=100002;b.util.observe(l,"click",b.lightbox.handleCloseButton)},initFullCloseButton:function(){l=c.createElement("img");l.src="http://s.ppjol.net/static/fb/fancy_close.png";l.style.cursor=
"pointer";l.style.position="absolute";l.style.top="0%";l.style.left="95%";l.style.zIndex=100002;b.util.observe(l,"click",b.lightbox.handleCloseButton)},handleCloseButton:function(){var a=b.config.getBorder(),g=null;if(typeof i!=="undefined"){i.getLightBoxTarget();a=i.getBorderUuid();g=i.isSocialvibeOn()}var d=n+"/closeLightbox/";if(!g||N||typeof a==="undefined"||a==="")b.client.closeLightBoxWindow();else{d=d+a+".json";f.log("closeUrl: "+d);b.util.loadScript(d,b.lightbox.catchCloseButton)}},catchCloseButton:function(a){a.action==
"redirect"?b.lightbox.go(n+a.url):b.client.closeLightBoxWindow()},initFooter:function(){E=c.createElement("div");E.id="pp-branding-privacy";z=c.createElement("div");z.id="pp-branding-help";b.util.observe(z,"click",b.client.helpClickHandler);u=c.createElement("a");u.href="http://www.mypressplus.com/readers/privacy";u.target="blank";u.appendChild(E);t=c.createElement("div");t.id="pp-branding";t.appendChild(z);t.appendChild(u)},positionOverlay:function(){var a=b.ui.getPageSize();p.style.width="100%";
p.style.height=a.y+"px"},positionLightwindow:function(){var a=b.ui.getScroll(),g=b.ui.getViewport(),d=b.ui.getPageSize(),a=g.y/2-262+a;m.style.top=a+"px";m.style.left=d.x/2-300+"px";q.style.top=a-23+"px";q.style.left=d.x/2+150+"px";l.style.top=a-11+"px";l.style.left=d.x/2+293+"px";b.util.observe(e,"resize",b.lightbox.positionLightwindow);b.util.observe(e,"scroll",b.lightbox.afterScrollPositionLightwindow)},afterScrollPositionLightwindow:function(){var a=Date.now();b.status.mostRecent.scroll.timestamp=
a;setTimeout(function(){a-b.status.mostRecent.scroll.timestamp===0&&b.lightbox.positionLightwindow()},60)},closeLightBoxWindow:function(){var a=c.body;a.removeChild(m);a.removeChild(p);a.removeChild(l);a.removeChild(q)},displayDebugDialog:function(a){var b=c.createElement("div");b.id="ppdebug";b.style.zIndex=99999;b.style.position="absolute";b.style.bottom="11px";b.style.right="10px";b.style.padding="2px";b.style.backgroundColor="#33aa33";b.style.width="380px";b.style.height="auto";b.style.textAlign=
"left";b.style.opacity="0.98";var d=c.createElement("div");d.id="ppdebugtxt";d.style.padding="10px";d.style.overflow="auto";d.style.width="360px";d.style.height="auto";d.style.fontSize="12px";d.style.fontFamily="consolas, inconsolata, courier, courier new";d.style.backgroundColor="#333";d.style.color="#33aa33";for(var h in a)if(a.hasOwnProperty(h)){var e=c.createElement("div");e.innerHTML=a[h];d.appendChild(e)}b.appendChild(d);c.body.appendChild(b)},signIn:function(a){q.innerHTML=a},updateFooter:function(a,
b,d,h){E.id=b;z.id=d;t.id=a;u.href=h}};b.postmessage={postMessage:function(a,b,d){if(b){d=d||e.parent;if(e.postMessage)d.postMessage(a,b.replace(/([^:]+:\/\/[^\/]+).*/,"$1"));else if(b)d.location=b.replace(/#.*$/,"")+"#"+ +new Date+P++ +"&"+a}},receiveMessage:function(a,b){if(e.postMessage){a&&(I=function(d){if(typeof b==="string"&&d.origin!==b||Object.prototype.toString.call(b)==="[object Function]"&&b(d.origin)===false)return false;a(d)});if(e.addEventListener)e[a?"addEventListener":"removeEventListener"]("message",
I,false);else e[a?"attachEvent":"detachEvent"]("onmessage",I)}else{F&&clearInterval(F);F=null;a&&(F=setInterval(function(){var b=c.location.hash,g=/^#?\d+&/;if(b!==L&&g.test(b)){L=b;a({data:b.replace(g,"")})}},100))}}};b.cookieCheck={checkThirdPartyCookie:function(a){r=a;b.util.getCookie("ppThirdPartyCookieFound")==="true"?r&&r():b.util.loadScript(o+"/hecate/cookie/write.json",b.cookieCheck.thirdPartyCookieLoaded)},thirdPartyCookieLoaded:function(){b.util.loadScript(o+"/hecate/cookie/check.json",
b.cookieCheck.thirdPartyCookieCheck)},thirdPartyCookieCheck:function(a){var g=function(){b.util.isMobile(b.config.getMode())?(D&&!G||K&&G)&&b.lightbox.showFullLightBox(h,function(){q.style.visibility="hidden"}):b.lightbox.showLightBox(d,function(){q.style.visibility="hidden"})};if(a.foundCookie){b.util.setCookie("ppThirdPartyCookieFound","true");b.client.setNormalOnClose();f.debug("Cookie Detector found the test cookie!");r&&r()}else{b.util.setCookie("ppThirdPartyCookieFound","false");f.debug("Cookie Detector did not find the test cookie Q_Q");
var d=n+"/cookie/noCookieSupport.html",h=n+"/cookie/noCookieSupportMobile.html",d=b.util.formUrl(d,{parentURL:c.location.href}),h=b.util.formUrl(h,{parentURL:c.location.href});if(b.config.isCookieCheckHomeOnClose()){f.log("Setting 'go home' on close");b.client.setGoHomeOnClose()}else if(b.config.isCookieCheckDenyOnClose()){f.log("Setting 'deny url' on close");b.client.setDenyOnClose()}var a=k.isCookieCheckForSessionOnly()&&b.util.getCookie("pp_session")!=="session_in_progress",e=k.isCookieCheckForSessionOnly()&&
b.util.getCookie("pp_session")==="session_in_progress";if(a){f.log("First Session with Cookie Check");b.util.setCookie("pp_session","session_in_progress");g()}else if(e&&b.status.manualPop.triggered===false)f.log("Cookie Detector gives up: I have already showed the No Cookie lightbox during this session.");else{g();b.status.manualPop.triggered=false}}},checkThirdPartyCookieLight:function(a){r=a;b.util.getCookie("ppThirdPartyCookieFound")==="true"?r&&r():b.util.loadScript(o+"/hecate/cookie/write.json",
b.cookieCheck.thirdPartyCookieLoadedLight)},thirdPartyCookieLoadedLight:function(){b.util.loadScript(o+"/hecate/cookie/check.json",b.cookieCheck.thirdPartyCookieCheckLight)},thirdPartyCookieCheckLight:function(a){if(a.foundCookie){b.util.setCookie("ppThirdPartyCookieFound","true");b.client.setNormalOnClose();f.debug("Cookie Detector found the test cookie!");r&&r()}else b.util.setCookie("ppThirdPartyCookieFound","false")}};b.safari={safariInitialCookiePost:function(){f.debug("executing safariInitialCookiePost");
w=b.util.getCookie("saf")||0;f.debug("'saf' cookie / safariUserIsRecognized: "+w);if(w!=1){f.debug("Appears to be your first Safari session...");var a=c.createElement("iframe");a.id="ppses";a.src=o+"/hecate/0.jsp";a.style.visibility="hidden";b.util.observe(a,"click",function(){f.log("Onload of iFrame: "+w);if(w===0){w=1;b.util.setCookie("saf",1);c.getElementById("polsf").submit()}});var g=c.createElement("form");g.id="polsf";g.enctype="application/x-www-form-urlencoded";g.action=o+"/hecate/1.html";
g.method="POST";g.target="ppses";c.body.appendChild(g);c.body.appendChild(a)}}};J=function(a){function g(a){if(a!==null){a=a.split(" ");if(a.length>=2)return a[1]}return null}this.commands=[];this.blob=a;this.init=function(){if(this.blob.actions!==void 0&&this.blob.actions!==null)for(var a=0;a<this.blob.actions.length;a++){var b=this.blob.actions[a]!==null?this.blob.actions[a].split(" ")[0]:null;b!==null&&this.commands.push(b)}};this.commandParameter=function(a){if(this.blob.actions!==null)for(var b=
0;b<this.blob.actions.length;b++){var c=this.blob.actions[b]!==null?this.blob.actions[b].split(" ")[0]:null;if(c!==null&&c==a)return g(this.blob.actions[b])}return null};this.hasRscript=function(){for(var a in this.commands)if(this.commands[a]=="rscript")return true;return false};this.getRscript=function(){return this.hasRscript()?this.commandParameter("rscript"):null};this.hasRedirect=function(){for(var a in this.commands)if(this.commands[a]=="redirect")return true;return false};this.getRedirect=
function(){return this.hasRedirect()?this.commandParameter("redirect"):null};this.setFirstPartyCookies=function(){for(var a in this.commands)if(this.commands[a]=="cookie"){f.debug(g(this.blob.actions[a]));b.util.setCookieString(g(this.blob.actions[a]))}return false};this.hasDebug=function(){return typeof this.blob.debug!="undefined"&&this.blob.debug!==null};this.getDebug=function(){return this.hasDebug()?this.blob.debug:null};this.getDenyUrl=function(){if(this.blob.denyUrl)return this.blob.denyUrl;
throw"'denyUrl' was not defined in hecate blob";};this.getAffiliateToken=function(){if(this.blob.affiliateToken)return this.blob.affiliateToken;throw"'affiliateToken' was not defined in hecate blob";};this.getLightBoxTarget=function(){if(this.blob.lightBoxTarget)return this.blob.lightBoxTarget;throw"'lightBoxTarget' was not defined in hecate blob";};this.getBorderUuid=function(){if(this.blob.borderUuid)return this.blob.borderUuid;throw"'borderUuid' was not defined in hecate blob";};this.isSocialvibeOn=
function(){return this.blob.isSocialvibeOn?this.blob.isSocialvibeOn:false};this.init()};M=function(a){function g(a){for(var a=a.getElementsByTagName("script"),g=0;g<a.length;g++)if(b.client.regexForEmbed.test(a[g].src))return a[g];throw"Could not resolve pp.js script";}this.config={};this.init=function(){var d=g(a),c=eval("["+d.innerHTML+"]");if(c[0].mode!==null&&c[0].zone!==null){this.config.mode=c[0].mode;this.config.zone=c[0].zone;this.config.border=c[0].border;this.config.debug=c[0].debug;this.config.customPreCheck=
c[0].customPreCheck;this.config.cookieCheck=c[0].cookieCheck;this.config.cookieCheckCloseAction=c[0].cookieCheckCloseAction;this.config.hashbangAware=c[0].hashbangAware;this.config.affiliateToken=c[0].affiliateToken;b.status.target.src=d.src}else throw"PP.js script invalid couldn't resolve mode and zone";};this.isValidConfig=function(){return typeof this.config.mode!=="undefined"&&typeof this.config.zone!=="undefined"};this.containsCustomPreCheck=function(){return typeof this.config.customPreCheck!==
"undefined"&&this.config.customPreCheck!==null};this.getCustomPreCheckFunctionName=function(){return typeof this.config.customPreCheck!=="undefined"?this.config.customPreCheck:null};this.isInDebugMode=function(){return a.location.hash=="#ppDebug"||this.config.debug};this.shouldClearU=function(){return a.location.hash=="#ppClearU"};this.getMode=function(){return this.config.mode};this.getZone=function(){return this.config.zone};this.hasBorder=function(){return typeof this.config.border!=="undefined"&&
this.config.border!==null};this.getBorder=function(){return this.config.border};this.getAffiliateToken=function(){return this.config.affiliateToken};this.isCookieCheck=function(){var a=/\b(manual|session|onload|true|1)\b/i.test(this.config.cookieCheck)||this.config.cookieCheck===true,b=/\bsafari\b/i.test(this.config.cookieCheck);return b===true&&D===true?true:b===false&&a===true?true:false};this.isCookieCheckOnLoad=function(){return/\bonload\b/i.test(this.config.cookieCheck)&&this.isCookieCheck()};
this.isCookieCheckForSessionOnly=function(){return/\bsession\b/i.test(this.config.cookieCheck)&&this.isCookieCheck()};this.isCookieCheckOnlyForManualPop=function(){return/\b(manual|true|1)\b/i.test(this.config.cookieCheck)||this.isCookieCheck()};this.isCookieCheckDenyOnClose=function(){return/\bdeny\b/i.test(this.config.cookieCheckCloseAction)};this.isCookieCheckHomeOnClose=function(){return/\bhome\b/i.test(this.config.cookieCheckCloseAction)};this.isHashbangAware=function(){return this.config.hashbangAware};
this.init()};b.client={regexForEmbed:/\bpp(.min|s)?.js/,setupLegacyManualPop:function(a){typeof e[a]==="undefined"&&(e[a]=function(){return"This is a placeholder object created by pp.js"});e[a].pressplus={};e[a].pressplus.f={};e[a].pressplus.f.pop=b.client.pop},bindPostMessage:function(){b.postmessage.receiveMessage(function(a){f.log("Received postMessage: "+a.data);if(!e.postMessage&&e.parent.location.hash)e.parent.location.hash="";if(a.data&&a.data==="close")b.client.closeLightBoxWindow();else if(a.data&&
a.data==="refreshOnClose"||a.data==="closerefresh"){b.client.setRefreshOnClose();b.client.closeLightBoxWindow()}else if(a.data&&a.data==="disableDenyURL")b.client.setRefreshOnClose();else if(a.data&&a.data.match(/^setC/))b.util.setCookieString(a.data.substring(4));else if(a.data&&a.data==="updateSignInTab")b.client.updateSignInTab();else if(a.data&&a.data==="setRefreshOnClose")b.client.setRefreshOnClose();else if(a.data&&a.data==="back")e.history.back();else if(a.data&&a.data==="setDenyOnClose")b.client.setDenyOnClose();
else if(a.data&&a.data==="setSocialVibe"){b.client.setFromSocialVibe(true);b.client.setRefreshOnClose()}else a.data&&a.data==="setSocialVibeComplete"?b.client.setFromSocialVibe(false):f.log("Message received from postMessage was not recognized : "+a.data)})},hecate:function(){if(k.containsCustomPreCheck()){var a=b.client.executeCustomPreCheck();if(a===0){f.log("Custom preCheck evaluated to %o, halting execution",a);return}f.debug("Custom preCheck was %o, proceeding with lightbox launch.",a)}b.client.executeHecate()},
executeCustomPreCheck:function(){if(k.containsCustomPreCheck()){f.log("Custom PreCheck function was present evaluating: "+k.getCustomPreCheckFunctionName());return eval(k.getCustomPreCheckFunctionName()+"()")}return 1},paramsForMeter:function(){var a={};a.z=k.getZone();if(k.isInDebugMode())a.debug="1";if(k.hasBorder())a.border=k.getBorder();if(k.isHashbangAware())a.cid=c.location.href;if(c.referrer!=null&&c.referrer!="")a.entry=c.referrer;var b=c.location.hash;if(b!==null&&b.match(/^#p\+.=/)&&b.length>
7){var d=b.substring(3,4),b=b.substring(5);a.pm=d;a.p=b}return a},executeNoMeterMode:function(){var a=o+"/hecate/hecate/nometer.json",g=this.paramsForMeter(),a=b.util.formUrl(a,g);f.log("HecateUrl: "+a);b.util.loadScript(a,b.client.meterModeCallBack)},executeHecate:function(){b.util.isMobile(k.getMode())?this.executeMobileMode():this.executeMeterMode()},executeMeterMode:function(){var a=o+"/hecate/hecate/2.json",g=this.paramsForMeter(),a=b.util.formUrl(a,g);f.log("HecateUrl: "+a);b.util.loadScript(a,
b.client.meterModeCallBack)},executeMobileMode:function(){var a=o+"/hecate/hecate/2.json",g=this.paramsForMeter();g.mobile=1;a=b.util.formUrl(a,g);f.log("HecateUrl: "+a);b.util.loadScript(a,b.client.mobileModeCallBack)},meterModeCallBack:function(a){if(a===null)throw"Unexpected response from hecate call";i=new J(a);if(i.hasDebug()){a=i.getDebug();f.log("Debug info:\n"+a);b.lightbox.displayDebugDialog(a)}if(i.hasRscript()){var a=i.getRscript(),g={};g.parentURL=c.location.href;if(b.config.hasBorder())g.borderset=
true;a=b.util.formUrl(a,g);f.log("Launching url in lightbox: "+a);b.util.getCookie("ppThirdPartyCookieFound")==="true"?b.lightbox.showLightBox(a,b.client.onLightBoxWindowOpen):f.log("third party cookie is off.... no lightbox")}i.setFirstPartyCookies()},mobileModeCallBack:function(a){if(a===null)throw"Unexpected response from hecate call";i=new J(a);if(i.hasDebug()){a=i.getDebug();f.log("Debug info:\n"+a);b.lightbox.displayDebugDialog(a)}if(i.hasRedirect()){var a=i.getRedirect(),g={};g.parentURL=c.location.href;
if(b.config.hasBorder())g.borderset=true;a=b.util.formUrl(a,g);f.log("redirecting: "+a);e.location=a}},onLightBoxWindowOpen:function(){var a={};a.locale=B;b.client.querySession("isAuthenticated",a,function(a){A=a.isAuthenticated;B=a.locale;var d=a.footerId,c=a.ppBrandingPrivacyDivId,e=a.ppBrandingHelpDivId,f=a.ppPrivacyLinkURL;b.lightbox.signIn(a.signin);b.lightbox.updateFooter(d,c,e,f)})},updateSignInTab:function(){var a={};a.locale=B;b.client.querySession("isAuthenticated",a,function(a){A=a.isAuthenticated;
B=a.locale;var d=a.footerId,c=a.ppBrandingPrivacyDivId,e=a.ppBrandingHelpDivId,f=a.ppPrivacyLinkURL;b.lightbox.signIn(a.signin);b.lightbox.updateFooter(d,c,e,f)})},signInClickHandler:function(){var a=n,c=b.config.getAffiliateToken(),d=b.config.getBorder();if(typeof i!=="undefined"){a=i.getLightBoxTarget();if(typeof c==="undefined"||c==="")c=i.getAffiliateToken();d=i.getBorderUuid()}if(typeof d==="undefined"||d==="")A?b.lightbox.go(a+"/logout/NONE/u/NONE.html?zone="+b.config.getZone()):b.lightbox.go(a+
"/login/NONE/u/NONE.html?zone="+b.config.getZone());else{if(typeof c==="undefined"||c==="")c="jonline";A?b.lightbox.go(a+"/logout/"+c+"/u/"+d+".html"):b.lightbox.go(a+"/login/"+c+"/u/"+d+".html")}},helpClickHandler:function(){var a=b.config.getBorder();i!==void 0&&(a=i.getBorderUuid());b.config.getZone();var c="",c=a!==void 0&&a!="undefined"&&a!==""?n+"/help/"+a+".html":n+"/help/unknown.html";b.lightbox.go(c)},querySession:function(a,c,d){var e="";if(typeof i==="undefined"){f.debug("Bailing out of querySession: hecateBlob is undefined - getting it is UI_TARGET !");
e=n}else{e=i.getLightBoxTarget();f.debug("executing querySession: hecateBlob is %o",i)}e=e+("/session/"+a+".json");b.util.uniqueString();c&&(e=b.util.formUrl(e,c));f.log("Querying session: "+e);b.util.loadScript(e,d)},pop:function(a){var g=k.getZone();b.util.isMobile(k.getMode())&&(a="mobile_"+a);var d=n+"/which/"+encodeURI(a)+"/r/"+encodeURI(g)+".html",a={};a.parentURL=c.location.href;if(b.config.hasBorder())a.borderset=true;d=b.util.formUrl(d,a);b.status.manualPop.triggered=true;k.isCookieCheckOnlyForManualPop?
b.cookieCheck.checkThirdPartyCookie(function(){if(b.util.isMobile(k.getMode()))e.location=d;else{b.lightbox.showLightBox(d,b.client.onLightBoxWindowOpen);b.client.setNormalOnClose()}}):b.util.isMobile(k.getMode())?e.location=d:b.lightbox.showLightBox(d,b.client.onLightBoxWindowOpen);return false},clearU:function(){var a=n,c=b.config.getAffiliateToken(),d=b.config.getBorder();if(typeof i!=="undefined"){a=i.getLightBoxTarget();if(typeof c==="undefined"||c==="")c=i.getAffiliateToken();d=i.getBorderUuid()}if(typeof d===
"undefined"||d==="")a=a+"/logout/NONE/u/NONE.html?zone="+b.config.getZone();else{if(typeof c==="undefined"||c==="")c="jonline";a=a+"/logout/"+c+"/u/"+d+".html"}b.util.loadScript(a,function(){})},closeLightBoxWindow:function(){switch(y){case 3:e.location=e.location.protocol+"//"+e.location.hostname;break;case 1:try{e.location=i.getDenyUrl()}catch(a){e.location=e.location.protocol+"//"+e.location.hostname}break;case 0:b.lightbox.closeLightBoxWindow();e.location.reload(true);break;default:b.lightbox.closeLightBoxWindow()}},
setGoHomeOnClose:function(){y=3},setDenyOnClose:function(){f.log("Setting deny on close");y=1},setRefreshOnClose:function(){f.log("Setting refresh on close");y=0},setNormalOnClose:function(){f.log("Setting normal on close");y=2},setFromSocialVibe:function(a){N=a},init:function(){b.client.preInit(function(){k=new M(c);b.config=k;if(!k.isValidConfig())throw"Config is invalid!";b.client.bindPostMessage();b.util.loadCSS(x+"/css/pp.css");b.client.executeNoMeterMode();if(k.isCookieCheckOnLoad()||k.isCookieCheckForSessionOnly())a:{f.debug("Cookie Detector activated! Performing cookie check");
if(k.containsCustomPreCheck()){var a=b.client.executeCustomPreCheck();if(a===0){f.log("Cookie Detector: HALTING execution (custom preCheck evaluated to %o)",a);break a}}b.cookieCheck.checkThirdPartyCookie(function(){b.client.hecate()})}else b.cookieCheck.checkThirdPartyCookieLight(function(){b.client.hecate()});b.client.setupLegacyManualPop("jQuery");b.client.setupLegacyManualPop("$")});if(s==-1||s>=9)e.pressplus.profiler.duration.forInit=Date.now()-e.pressplus.profiler.duration.startTime},preInit:function(a){for(var b=
0;b<C.length;b++){f.log("Invoking: "+C[b]);C[b]()}a()},registerPreInitFunction:function(a){typeof a=="function"&&C.push(new Function(a))}};e.pp=b;b.util.onPageReady(function(){b.util.setCookie("ppRef",e.document.location.href);D&&b.client.registerPreInitFunction(b.safari.safariInitialCookiePost());b.client.init();b.status.target.hecate=o;b.status.target.css=x;b.status.target.ui=n;e.pressplus.client=b.client;e.pressplus.config=b.config;if(b.config.isInDebugMode()){b.status.target.loadPath=b.status.target.src.match(/^(.*\/).*$/)[1];
var a=c.createElement("script");a.src=b.status.target.loadPath+"client_debugger.js";a.type="text/javascript";a.async=true;c.body.appendChild(a)}b.config.shouldClearU()&&b.client.clearU()})})(window,document);
/* Copyright (c) 2012 Journalism Online, LLC. All Rights Reserved. 2013-03-08T15:51:41.290-05:00 878c45b94e82f5565ecbeda18abc131fcbd03927 */
