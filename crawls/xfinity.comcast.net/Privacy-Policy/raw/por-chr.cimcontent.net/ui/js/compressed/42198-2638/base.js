/* DO NOT EDIT THIS FILE!
		The contents of this file are dynamically generated. In order to make changes, update the
		respective source files.*/

// /lib/adlib.js from ui
function cc(c,d,e){var a="",b;if(e){if(typeof e=="object"){b=e}else{b=new Date();b.setTime(b.getTime()+e*86400000)}a="; expires="+b.toGMTString()}document.cookie=c+"="+d+a+"; path=/;"}function rc(d){var g=d+"=",b=document.cookie.split(";"),f=/\s*(.*)/,e,h,a;for(e=0,a=b.length;e<a;e++){h=b[e].match(f)[1];if(h.indexOf(g)===0){return h.substring(g.length,h.length)}}return null}function ec(a){cc(a,"",-1)}function ntce(a){return(!a||a.length===0)}function pec(c){var a=unescape(c).split("&"),e="",b,d;for(b=0;b<a.length;b++){if(a[b]!=null&&a[b].length>0){d=a[b].split("=");if(d.length==2){if(b===0){e=e+d[0]+"="+unescape(d[1])}else{e=e+","+d[0]+"="+unescape(d[1])}}}}return e}function gau(e,f,b,a,d){var c=e+b+d+a+"?_OAS_GEO_OVERRIDE_="+f_ADTARGET_ZIP;if(f!=null){c=c+"&"+String(f)}return c}function ntfe(a,b){return(a!=null&&a.length>0&&(b==null||b.length==0))}function fe(a){document.write(['<script type="text/javascript" src="',a,'"></',"script>"].join(""))};
// /lib/jquery.js from ui
(function(){if(window.jQuery){var _jQuery=window.jQuery}var jQuery=window.jQuery=function(selector,context){return new jQuery.prototype.init(selector,context)};if(window.$){var _$=window.$}window.$=jQuery;var quickExpr=/^[^<]*(<(.|\s)+>)[^>]*$|^#(\w+)$/;var isSimple=/^.[^:#\[\.]*$/;jQuery.fn=jQuery.prototype={init:function(selector,context){selector=selector||document;if(selector.nodeType){this[0]=selector;this.length=1;return this}else{if(typeof selector=="string"){var match=quickExpr.exec(selector);if(match&&(match[1]||!context)){if(match[1]){selector=jQuery.clean([match[1]],context)}else{var elem=document.getElementById(match[3]);if(elem){if(elem.id!=match[3]){return jQuery().find(selector)}else{this[0]=elem;this.length=1;return this}}else{selector=[]}}}else{return new jQuery(context).find(selector)}}else{if(jQuery.isFunction(selector)){return new jQuery(document)[jQuery.fn.ready?"ready":"load"](selector)}}}return this.setArray(selector.constructor==Array&&selector||(selector.jquery||selector.length&&selector!=window&&!selector.nodeType&&selector[0]!=undefined&&selector[0].nodeType)&&jQuery.makeArray(selector)||[selector])},jquery:"1.2.3",size:function(){return this.length},length:0,get:function(num){return num==undefined?jQuery.makeArray(this):this[num]},pushStack:function(elems){var ret=jQuery(elems);ret.prevObject=this;return ret},setArray:function(elems){this.length=0;Array.prototype.push.apply(this,elems);return this},each:function(callback,args){return jQuery.each(this,callback,args)},index:function(elem){var ret=-1;this.each(function(i){if(this==elem){ret=i}});return ret},attr:function(name,value,type){var options=name;if(name.constructor==String){if(value==undefined){return this.length&&jQuery[type||"attr"](this[0],name)||undefined}else{options={};options[name]=value}}return this.each(function(i){for(name in options){jQuery.attr(type?this.style:this,name,jQuery.prop(this,options[name],type,i,name))}})},css:function(key,value){if((key=="width"||key=="height")&&parseFloat(value)<0){value=undefined}return this.attr(key,value,"curCSS")},text:function(text){if(typeof text!="object"&&text!=null){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(text))}var ret="";jQuery.each(text||this,function(){jQuery.each(this.childNodes,function(){if(this.nodeType!=8){ret+=this.nodeType!=1?this.nodeValue:jQuery.fn.text([this])}})});return ret},wrapAll:function(html){if(this[0]){jQuery(html,this[0].ownerDocument).clone().insertBefore(this[0]).map(function(){var elem=this;while(elem.firstChild){elem=elem.firstChild}return elem}).append(this)}return this},wrapInner:function(html){return this.each(function(){jQuery(this).contents().wrapAll(html)})},wrap:function(html){return this.each(function(){jQuery(this).wrapAll(html)})},append:function(){return this.domManip(arguments,true,false,function(elem){if(this.nodeType==1){this.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,true,true,function(elem){if(this.nodeType==1){this.insertBefore(elem,this.firstChild)}})},before:function(){return this.domManip(arguments,false,false,function(elem){this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,false,true,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)})},end:function(){return this.prevObject||jQuery([])},find:function(selector){var elems=jQuery.map(this,function(elem){return jQuery.find(selector,elem)});return this.pushStack(/[^+>] [^+>]/.test(selector)||selector.indexOf("..")>-1?jQuery.unique(elems):elems)},clone:function(events){var ret=this.map(function(){if(jQuery.browser.msie&&!jQuery.isXMLDoc(this)){var clone=this.cloneNode(true),container=document.createElement("div");container.appendChild(clone);return jQuery.clean([container.innerHTML])[0]}else{return this.cloneNode(true)}});var clone=ret.find("*").andSelf().each(function(){if(this[expando]!=undefined){this[expando]=null}});if(events===true){this.find("*").andSelf().each(function(i){if(this.nodeType==3){return }var events=jQuery.data(this,"events");for(var type in events){for(var handler in events[type]){jQuery.event.add(clone[i],type,events[type][handler],events[type][handler].data)}}})}return ret},filter:function(selector){return this.pushStack(jQuery.isFunction(selector)&&jQuery.grep(this,function(elem,i){return selector.call(elem,i)})||jQuery.multiFilter(selector,this))},not:function(selector){if(selector.constructor==String){if(isSimple.test(selector)){return this.pushStack(jQuery.multiFilter(selector,this,true))}else{selector=jQuery.multiFilter(selector,this)}}var isArrayLike=selector.length&&selector[selector.length-1]!==undefined&&!selector.nodeType;return this.filter(function(){return isArrayLike?jQuery.inArray(this,selector)<0:this!=selector})},add:function(selector){return !selector?this:this.pushStack(jQuery.merge(this.get(),selector.constructor==String?jQuery(selector).get():selector.length!=undefined&&(!selector.nodeName||jQuery.nodeName(selector,"form"))?selector:[selector]))},is:function(selector){return selector?jQuery.multiFilter(selector,this).length>0:false},hasClass:function(selector){return this.is("."+selector)},val:function(value){if(value==undefined){if(this.length){var elem=this[0];if(jQuery.nodeName(elem,"select")){var index=elem.selectedIndex,values=[],options=elem.options,one=elem.type=="select-one";if(index<0){return null}for(var i=one?index:0,max=one?index+1:options.length;i<max;i++){var option=options[i];if(option.selected){value=jQuery.browser.msie&&!option.attributes.value.specified?option.text:option.value;if(one){return value}values.push(value)}}return values}else{return(this[0].value||"").replace(/\r/g,"")}}return undefined}return this.each(function(){if(this.nodeType!=1){return }if(value.constructor==Array&&/radio|checkbox/.test(this.type)){this.checked=(jQuery.inArray(this.value,value)>=0||jQuery.inArray(this.name,value)>=0)}else{if(jQuery.nodeName(this,"select")){var values=value.constructor==Array?value:[value];jQuery("option",this).each(function(){this.selected=(jQuery.inArray(this.value,values)>=0||jQuery.inArray(this.text,values)>=0)});if(!values.length){this.selectedIndex=-1}}else{this.value=value}}})},html:function(value){return value==undefined?(this.length?this[0].innerHTML:null):this.empty().append(value)},replaceWith:function(value){return this.after(value).remove()},eq:function(i){return this.slice(i,i+1)},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},andSelf:function(){return this.add(this.prevObject)},data:function(key,value){var parts=key.split(".");parts[1]=parts[1]?"."+parts[1]:"";if(value==null){var data=this.triggerHandler("getData"+parts[1]+"!",[parts[0]]);if(data==undefined&&this.length){data=jQuery.data(this[0],key)}return data==null&&parts[1]?this.data(parts[0]):data}else{return this.trigger("setData"+parts[1]+"!",[parts[0],value]).each(function(){jQuery.data(this,key,value)})}},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})},domManip:function(args,table,reverse,callback){var clone=this.length>1,elems;return this.each(function(){if(!elems){elems=jQuery.clean(args,this.ownerDocument);if(reverse){elems.reverse()}}var obj=this;if(table&&jQuery.nodeName(this,"table")&&jQuery.nodeName(elems[0],"tr")){obj=this.getElementsByTagName("tbody")[0]||this.appendChild(this.ownerDocument.createElement("tbody"))}var scripts=jQuery([]);jQuery.each(elems,function(){var elem=clone?jQuery(this).clone(true)[0]:this;if(jQuery.nodeName(elem,"script")){scripts=scripts.add(elem)}else{if(elem.nodeType==1){scripts=scripts.add(jQuery("script",elem).remove())}callback.call(obj,elem)}});scripts.each(evalScript)})}};jQuery.prototype.init.prototype=jQuery.prototype;function evalScript(i,elem){if(elem.src){jQuery.ajax({url:elem.src,async:false,dataType:"script"})}else{jQuery.globalEval(elem.text||elem.textContent||elem.innerHTML||"")}if(elem.parentNode){elem.parentNode.removeChild(elem)}}jQuery.extend=jQuery.fn.extend=function(){var target=arguments[0]||{},i=1,length=arguments.length,deep=false,options;if(target.constructor==Boolean){deep=target;target=arguments[1]||{};i=2}if(typeof target!="object"&&typeof target!="function"){target={}}if(length==1){target=this;i=0}for(;i<length;i++){if((options=arguments[i])!=null){for(var name in options){if(target===options[name]){continue}if(deep&&options[name]&&typeof options[name]=="object"&&target[name]&&!options[name].nodeType){target[name]=jQuery.extend(target[name],options[name])}else{if(options[name]!=undefined){target[name]=options[name]}}}}}return target};var expando="jQuery"+(new Date()).getTime(),uuid=0,windowData={};var exclude=/z-?index|font-?weight|opacity|zoom|line-?height/i;jQuery.extend({noConflict:function(deep){window.$=_$;if(deep){window.jQuery=_jQuery}return jQuery},isFunction:function(fn){return !!fn&&typeof fn!="string"&&!fn.nodeName&&fn.constructor!=Array&&/function/i.test(fn+"")},isXMLDoc:function(elem){return elem.documentElement&&!elem.body||elem.tagName&&elem.ownerDocument&&!elem.ownerDocument.body},globalEval:function(data){data=jQuery.trim(data);if(data){var head=document.getElementsByTagName("head")[0]||document.documentElement,script=document.createElement("script");script.type="text/javascript";if(jQuery.browser.msie){script.text=data}else{script.appendChild(document.createTextNode(data))}head.appendChild(script);head.removeChild(script)}},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()==name.toUpperCase()},cache:{},data:function(elem,name,data){elem=elem==window?windowData:elem;var id=elem[expando];if(!id){id=elem[expando]=++uuid}if(name&&!jQuery.cache[id]){jQuery.cache[id]={}}if(data!=undefined){jQuery.cache[id][name]=data}return name?jQuery.cache[id][name]:id},removeData:function(elem,name){elem=elem==window?windowData:elem;var id=elem[expando];if(name){if(jQuery.cache[id]){delete jQuery.cache[id][name];name="";for(name in jQuery.cache[id]){break}if(!name){jQuery.removeData(elem)}}}else{try{delete elem[expando]}catch(e){if(elem.removeAttribute){elem.removeAttribute(expando)}}delete jQuery.cache[id]}},each:function(object,callback,args){if(args){if(object.length==undefined){for(var name in object){if(callback.apply(object[name],args)===false){break}}}else{for(var i=0,length=object.length;i<length;i++){if(callback.apply(object[i],args)===false){break}}}}else{if(object.length==undefined){for(var name in object){if(callback.call(object[name],name,object[name])===false){break}}}else{for(var i=0,length=object.length,value=object[0];i<length&&callback.call(value,i,value)!==false;value=object[++i]){}}}return object},prop:function(elem,value,type,i,name){if(jQuery.isFunction(value)){value=value.call(elem,i)}return value&&value.constructor==Number&&type=="curCSS"&&!exclude.test(name)?value+"px":value},className:{add:function(elem,classNames){jQuery.each((classNames||"").split(/\s+/),function(i,className){if(elem.nodeType==1&&!jQuery.className.has(elem.className,className)){elem.className+=(elem.className?" ":"")+className}})},remove:function(elem,classNames){if(elem.nodeType==1){elem.className=classNames!=undefined?jQuery.grep(elem.className.split(/\s+/),function(className){return !jQuery.className.has(classNames,className)}).join(" "):""}},has:function(elem,className){return jQuery.inArray(className,(elem.className||elem).toString().split(/\s+/))>-1}},swap:function(elem,options,callback){var old={};for(var name in options){old[name]=elem.style[name];elem.style[name]=options[name]}callback.call(elem);for(var name in options){elem.style[name]=old[name]}},css:function(elem,name,force){if(name=="width"||name=="height"){var val,props={position:"absolute",visibility:"hidden",display:"block"},which=name=="width"?["Left","Right"]:["Top","Bottom"];function getWH(){val=name=="width"?elem.offsetWidth:elem.offsetHeight;var padding=0,border=0;jQuery.each(which,function(){padding+=parseFloat(jQuery.curCSS(elem,"padding"+this,true))||0;border+=parseFloat(jQuery.curCSS(elem,"border"+this+"Width",true))||0});val-=Math.round(padding+border)}if(jQuery(elem).is(":visible")){getWH()}else{jQuery.swap(elem,props,getWH)}return Math.max(0,val)}return jQuery.curCSS(elem,name,force)},curCSS:function(elem,name,force){var ret;function color(elem){if(!jQuery.browser.safari){return false}var ret=document.defaultView.getComputedStyle(elem,null);return !ret||ret.getPropertyValue("color")==""}if(name=="opacity"&&jQuery.browser.msie){ret=jQuery.attr(elem.style,"opacity");return ret==""?"1":ret}if(jQuery.browser.opera&&name=="display"){var save=elem.style.outline;elem.style.outline="0 solid black";elem.style.outline=save}if(name.match(/float/i)){name=styleFloat}if(!force&&elem.style&&elem.style[name]){ret=elem.style[name]}else{if(document.defaultView&&document.defaultView.getComputedStyle){if(name.match(/float/i)){name="float"}name=name.replace(/([A-Z])/g,"-$1").toLowerCase();var getComputedStyle=document.defaultView.getComputedStyle(elem,null);if(getComputedStyle&&!color(elem)){ret=getComputedStyle.getPropertyValue(name)}else{var swap=[],stack=[];for(var a=elem;a&&color(a);a=a.parentNode){stack.unshift(a)}for(var i=0;i<stack.length;i++){if(color(stack[i])){swap[i]=stack[i].style.display;stack[i].style.display="block"}}ret=name=="display"&&swap[stack.length-1]!=null?"none":(getComputedStyle&&getComputedStyle.getPropertyValue(name))||"";for(var i=0;i<swap.length;i++){if(swap[i]!=null){stack[i].style.display=swap[i]}}}if(name=="opacity"&&ret==""){ret="1"}}else{if(elem.currentStyle){var camelCase=name.replace(/\-(\w)/g,function(all,letter){return letter.toUpperCase()});ret=elem.currentStyle[name]||elem.currentStyle[camelCase];if(!/^\d+(px)?$/i.test(ret)&&/^\d/.test(ret)){var style=elem.style.left,runtimeStyle=elem.runtimeStyle.left;elem.runtimeStyle.left=elem.currentStyle.left;elem.style.left=ret||0;ret=elem.style.pixelLeft+"px";elem.style.left=style;elem.runtimeStyle.left=runtimeStyle}}}}return ret},clean:function(elems,context){var ret=[];context=context||document;if(typeof context.createElement=="undefined"){context=context.ownerDocument||context[0]&&context[0].ownerDocument||document}jQuery.each(elems,function(i,elem){if(!elem){return }if(elem.constructor==Number){elem=elem.toString()}if(typeof elem=="string"){elem=elem.replace(/(<(\w+)[^>]*?)\/>/g,function(all,front,tag){return tag.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?all:front+"></"+tag+">"});var tags=jQuery.trim(elem).toLowerCase(),div=context.createElement("div");var wrap=!tags.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!tags.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||tags.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!tags.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!tags.indexOf("<td")||!tags.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!tags.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||jQuery.browser.msie&&[1,"div<div>","</div>"]||[0,"",""];div.innerHTML=wrap[1]+elem+wrap[2];while(wrap[0]--){div=div.lastChild}if(jQuery.browser.msie){var tbody=!tags.indexOf("<table")&&tags.indexOf("<tbody")<0?div.firstChild&&div.firstChild.childNodes:wrap[1]=="<table>"&&tags.indexOf("<tbody")<0?div.childNodes:[];for(var j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j])}}if(/^\s/.test(elem)){div.insertBefore(context.createTextNode(elem.match(/^\s*/)[0]),div.firstChild)}}elem=jQuery.makeArray(div.childNodes)}if(elem.length===0&&(!jQuery.nodeName(elem,"form")&&!jQuery.nodeName(elem,"select"))){return }if(elem[0]==undefined||jQuery.nodeName(elem,"form")||elem.options){ret.push(elem)}else{ret=jQuery.merge(ret,elem)}});return ret},attr:function(elem,name,value){if(!elem||elem.nodeType==3||elem.nodeType==8){return undefined}var fix=jQuery.isXMLDoc(elem)?{}:jQuery.props;if(name=="selected"&&jQuery.browser.safari){elem.parentNode.selectedIndex}if(fix[name]){if(value!=undefined){elem[fix[name]]=value}return elem[fix[name]]}else{if(jQuery.browser.msie&&name=="style"){return jQuery.attr(elem.style,"cssText",value)}else{if(value==undefined&&jQuery.browser.msie&&jQuery.nodeName(elem,"form")&&(name=="action"||name=="method")){return elem.getAttributeNode(name).nodeValue}else{if(elem.tagName){if(value!=undefined){if(name=="type"&&jQuery.nodeName(elem,"input")&&elem.parentNode){throw"type property can't be changed"}elem.setAttribute(name,""+value)}if(jQuery.browser.msie&&/href|src/.test(name)&&!jQuery.isXMLDoc(elem)){return elem.getAttribute(name,2)}return elem.getAttribute(name)}else{if(name=="opacity"&&jQuery.browser.msie){if(value!=undefined){elem.zoom=1;elem.filter=(elem.filter||"").replace(/alpha\([^)]*\)/,"")+(parseFloat(value).toString()=="NaN"?"":"alpha(opacity="+value*100+")")}return elem.filter&&elem.filter.indexOf("opacity=")>=0?(parseFloat(elem.filter.match(/opacity=([^)]*)/)[1])/100).toString():""}name=name.replace(/-([a-z])/ig,function(all,letter){return letter.toUpperCase()});if(value!=undefined){elem[name]=value}return elem[name]}}}}},trim:function(text){return(text||"").replace(/^\s+|\s+$/g,"")},makeArray:function(array){var ret=[];if(typeof array!="array"){for(var i=0,length=array.length;i<length;i++){ret.push(array[i])}}else{ret=array.slice(0)}return ret},inArray:function(elem,array){for(var i=0,length=array.length;i<length;i++){if(array[i]==elem){return i}}return -1},merge:function(first,second){if(jQuery.browser.msie){for(var i=0;second[i];i++){if(second[i].nodeType!=8){first.push(second[i])}}}else{for(var i=0;second[i];i++){first.push(second[i])}}return first},unique:function(array){var ret=[],done={};try{for(var i=0,length=array.length;i<length;i++){var id=jQuery.data(array[i]);if(!done[id]){done[id]=true;ret.push(array[i])}}}catch(e){ret=array}return ret},grep:function(elems,callback,inv){var ret=[];for(var i=0,length=elems.length;i<length;i++){if(!inv&&callback(elems[i],i)||inv&&!callback(elems[i],i)){ret.push(elems[i])}}return ret},map:function(elems,callback){var ret=[];for(var i=0,length=elems.length;i<length;i++){var value=callback(elems[i],i);if(value!==null&&value!=undefined){if(value.constructor!=Array){value=[value]}ret=ret.concat(value)}}return ret}});var userAgent=navigator.userAgent.toLowerCase();jQuery.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)};var styleFloat=jQuery.browser.msie?"styleFloat":"cssFloat";jQuery.extend({boxModel:!jQuery.browser.msie||document.compatMode=="CSS1Compat",props:{"for":"htmlFor","class":"className","float":styleFloat,cssFloat:styleFloat,styleFloat:styleFloat,innerHTML:"innerHTML",className:"className",value:"value",disabled:"disabled",checked:"checked",readonly:"readOnly",selected:"selected",maxlength:"maxLength",selectedIndex:"selectedIndex",defaultValue:"defaultValue",tagName:"tagName",nodeName:"nodeName"}});jQuery.each({parent:function(elem){return elem.parentNode},parents:function(elem){return jQuery.dir(elem,"parentNode")},next:function(elem){return jQuery.nth(elem,2,"nextSibling")},prev:function(elem){return jQuery.nth(elem,2,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(selector){var ret=jQuery.map(this,fn);if(selector&&typeof selector=="string"){ret=jQuery.multiFilter(selector,ret)}return this.pushStack(jQuery.unique(ret))}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(){var args=arguments;return this.each(function(){for(var i=0,length=args.length;i<length;i++){jQuery(args[i])[original](this)}})}});jQuery.each({removeAttr:function(name){jQuery.attr(this,name,"");if(this.nodeType==1){this.removeAttribute(name)}},addClass:function(classNames){jQuery.className.add(this,classNames)},removeClass:function(classNames){jQuery.className.remove(this,classNames)},toggleClass:function(classNames){jQuery.className[jQuery.className.has(this,classNames)?"remove":"add"](this,classNames)},remove:function(selector){if(!selector||jQuery.filter(selector,[this]).r.length){jQuery("*",this).add(this).each(function(){jQuery.event.remove(this);jQuery.removeData(this)});if(this.parentNode){this.parentNode.removeChild(this)}}},empty:function(){jQuery(">*",this).remove();while(this.firstChild){this.removeChild(this.firstChild)}}},function(name,fn){jQuery.fn[name]=function(){return this.each(fn,arguments)}});jQuery.each(["Height","Width"],function(i,name){var type=name.toLowerCase();jQuery.fn[type]=function(size){return this[0]==window?jQuery.browser.opera&&document.body["client"+name]||jQuery.browser.safari&&window["inner"+name]||document.compatMode=="CSS1Compat"&&document.documentElement["client"+name]||document.body["client"+name]:this[0]==document?Math.max(Math.max(document.body["scroll"+name],document.documentElement["scroll"+name]),Math.max(document.body["offset"+name],document.documentElement["offset"+name])):size==undefined?(this.length?jQuery.css(this[0],type):null):this.css(type,size.constructor==String?size:size+"px")}});var chars=jQuery.browser.safari&&parseInt(jQuery.browser.version)<417?"(?:[\\w*_-]|\\\\.)":"(?:[\\w\u0128-\uFFFF*_-]|\\\\.)",quickChild=new RegExp("^>\\s*("+chars+"+)"),quickID=new RegExp("^("+chars+"+)(#)("+chars+"+)"),quickClass=new RegExp("^([#.]?)("+chars+"*)");jQuery.extend({expr:{"":function(a,i,m){return m[2]=="*"||jQuery.nodeName(a,m[2])},"#":function(a,i,m){return a.getAttribute("id")==m[2]},":":{lt:function(a,i,m){return i<m[3]-0},gt:function(a,i,m){return i>m[3]-0},nth:function(a,i,m){return m[3]-0==i},eq:function(a,i,m){return m[3]-0==i},first:function(a,i){return i==0},last:function(a,i,m,r){return i==r.length-1},even:function(a,i){return i%2==0},odd:function(a,i){return i%2},"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]==a},"last-child":function(a){return jQuery.nth(a.parentNode.lastChild,1,"previousSibling")==a},"only-child":function(a){return !jQuery.nth(a.parentNode.lastChild,2,"previousSibling")},parent:function(a){return a.firstChild},empty:function(a){return !a.firstChild},contains:function(a,i,m){return(a.textContent||a.innerText||jQuery(a).text()||"").indexOf(m[3])>=0},visible:function(a){return"hidden"!=a.type&&jQuery.css(a,"display")!="none"&&jQuery.css(a,"visibility")!="hidden"},hidden:function(a){return"hidden"==a.type||jQuery.css(a,"display")=="none"||jQuery.css(a,"visibility")=="hidden"},enabled:function(a){return !a.disabled},disabled:function(a){return a.disabled},checked:function(a){return a.checked},selected:function(a){return a.selected||jQuery.attr(a,"selected")},text:function(a){return"text"==a.type},radio:function(a){return"radio"==a.type},checkbox:function(a){return"checkbox"==a.type},file:function(a){return"file"==a.type},password:function(a){return"password"==a.type},submit:function(a){return"submit"==a.type},image:function(a){return"image"==a.type},reset:function(a){return"reset"==a.type},button:function(a){return"button"==a.type||jQuery.nodeName(a,"button")},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},has:function(a,i,m){return jQuery.find(m[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},animated:function(a){return jQuery.grep(jQuery.timers,function(fn){return a==fn.elem}).length}}},parse:[/^(\[) *@?([\w-]+) *([!*$^~=]*) *('?"?)(.*?)\4 *\]/,/^(:)([\w-]+)\("?'?(.*?(\(.*?\))?[^(]*?)"?'?\)/,new RegExp("^([:.#]*)("+chars+"+)")],multiFilter:function(expr,elems,not){var old,cur=[];while(expr&&expr!=old){old=expr;var f=jQuery.filter(expr,elems,not);expr=f.t.replace(/^\s*,\s*/,"");cur=not?elems=f.r:jQuery.merge(cur,f.r)}return cur},find:function(t,context){if(typeof t!="string"){return[t]}if(context&&context.nodeType!=1&&context.nodeType!=9){return[]}context=context||document;var ret=[context],done=[],last,nodeName;while(t&&last!=t){var r=[];last=t;t=jQuery.trim(t);var foundToken=false;var re=quickChild;var m=re.exec(t);if(m){nodeName=m[1].toUpperCase();for(var i=0;ret[i];i++){for(var c=ret[i].firstChild;c;c=c.nextSibling){if(c.nodeType==1&&(nodeName=="*"||c.nodeName.toUpperCase()==nodeName)){r.push(c)}}}ret=r;t=t.replace(re,"");if(t.indexOf(" ")==0){continue}foundToken=true}else{re=/^([>+~])\s*(\w*)/i;if((m=re.exec(t))!=null){r=[];var merge={};nodeName=m[2].toUpperCase();m=m[1];for(var j=0,rl=ret.length;j<rl;j++){var n=m=="~"||m=="+"?ret[j].nextSibling:ret[j].firstChild;for(;n;n=n.nextSibling){if(n.nodeType==1){var id=jQuery.data(n);if(m=="~"&&merge[id]){break}if(!nodeName||n.nodeName.toUpperCase()==nodeName){if(m=="~"){merge[id]=true}r.push(n)}if(m=="+"){break}}}}ret=r;t=jQuery.trim(t.replace(re,""));foundToken=true}}if(t&&!foundToken){if(!t.indexOf(",")){if(context==ret[0]){ret.shift()}done=jQuery.merge(done,ret);r=ret=[context];t=" "+t.substr(1,t.length)}else{var re2=quickID;var m=re2.exec(t);if(m){m=[0,m[2],m[3],m[1]]}else{re2=quickClass;m=re2.exec(t)}m[2]=m[2].replace(/\\/g,"");var elem=ret[ret.length-1];if(m[1]=="#"&&elem&&elem.getElementById&&!jQuery.isXMLDoc(elem)){var oid=elem.getElementById(m[2]);if((jQuery.browser.msie||jQuery.browser.opera)&&oid&&typeof oid.id=="string"&&oid.id!=m[2]){oid=jQuery('[@id="'+m[2]+'"]',elem)[0]}ret=r=oid&&(!m[3]||jQuery.nodeName(oid,m[3]))?[oid]:[]}else{for(var i=0;ret[i];i++){var tag=m[1]=="#"&&m[3]?m[3]:m[1]!=""||m[0]==""?"*":m[2];if(tag=="*"&&ret[i].nodeName.toLowerCase()=="object"){tag="param"}r=jQuery.merge(r,ret[i].getElementsByTagName(tag))}if(m[1]=="."){r=jQuery.classFilter(r,m[2])}if(m[1]=="#"){var tmp=[];for(var i=0;r[i];i++){if(r[i].getAttribute("id")==m[2]){tmp=[r[i]];break}}r=tmp}ret=r}t=t.replace(re2,"")}}if(t){var val=jQuery.filter(t,r);ret=r=val.r;t=jQuery.trim(val.t)}}if(t){ret=[]}if(ret&&context==ret[0]){ret.shift()}done=jQuery.merge(done,ret);return done},classFilter:function(r,m,not){m=" "+m+" ";var tmp=[];for(var i=0;r[i];i++){var pass=(" "+r[i].className+" ").indexOf(m)>=0;if(!not&&pass||not&&!pass){tmp.push(r[i])}}return tmp},filter:function(t,r,not){var last;while(t&&t!=last){last=t;var p=jQuery.parse,m;for(var i=0;p[i];i++){m=p[i].exec(t);if(m){t=t.substring(m[0].length);m[2]=m[2].replace(/\\/g,"");break}}if(!m){break}if(m[1]==":"&&m[2]=="not"){r=isSimple.test(m[3])?jQuery.filter(m[3],r,true).r:jQuery(r).not(m[3])}else{if(m[1]=="."){r=jQuery.classFilter(r,m[2],not)}else{if(m[1]=="["){var tmp=[],type=m[3];for(var i=0,rl=r.length;i<rl;i++){var a=r[i],z=a[jQuery.props[m[2]]||m[2]];if(z==null||/href|src|selected/.test(m[2])){z=jQuery.attr(a,m[2])||""}if((type==""&&!!z||type=="="&&z==m[5]||type=="!="&&z!=m[5]||type=="^="&&z&&!z.indexOf(m[5])||type=="$="&&z.substr(z.length-m[5].length)==m[5]||(type=="*="||type=="~=")&&z.indexOf(m[5])>=0)^not){tmp.push(a)}}r=tmp}else{if(m[1]==":"&&m[2]=="nth-child"){var merge={},tmp=[],test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(m[3]=="even"&&"2n"||m[3]=="odd"&&"2n+1"||!/\D/.test(m[3])&&"0n+"+m[3]||m[3]),first=(test[1]+(test[2]||1))-0,last=test[3]-0;for(var i=0,rl=r.length;i<rl;i++){var node=r[i],parentNode=node.parentNode,id=jQuery.data(parentNode);if(!merge[id]){var c=1;for(var n=parentNode.firstChild;n;n=n.nextSibling){if(n.nodeType==1){n.nodeIndex=c++}}merge[id]=true}var add=false;if(first==0){if(node.nodeIndex==last){add=true}}else{if((node.nodeIndex-last)%first==0&&(node.nodeIndex-last)/first>=0){add=true}}if(add^not){tmp.push(node)}}r=tmp}else{var fn=jQuery.expr[m[1]];if(typeof fn=="object"){fn=fn[m[2]]}if(typeof fn=="string"){fn=eval("false||function(a,i){return "+fn+";}")}r=jQuery.grep(r,function(elem,i){return fn(elem,i,m,r)},not)}}}}}return{r:r,t:t}},dir:function(elem,dir){var matched=[];var cur=elem[dir];while(cur&&cur!=document){if(cur.nodeType==1){matched.push(cur)}cur=cur[dir]}return matched},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir]){if(cur.nodeType==1&&++num==result){break}}return cur},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType==1&&(!elem||n!=elem)){r.push(n)}}return r}});jQuery.event={add:function(elem,types,handler,data){if(elem.nodeType==3||elem.nodeType==8){return }if(jQuery.browser.msie&&elem.setInterval!=undefined){elem=window}if(!handler.guid){handler.guid=this.guid++}if(data!=undefined){var fn=handler;handler=function(){return fn.apply(this,arguments)};handler.data=data;handler.guid=fn.guid}var events=jQuery.data(elem,"events")||jQuery.data(elem,"events",{}),handle=jQuery.data(elem,"handle")||jQuery.data(elem,"handle",function(){var val;if(typeof jQuery=="undefined"||jQuery.event.triggered){return val}val=jQuery.event.handle.apply(arguments.callee.elem,arguments);return val});handle.elem=elem;jQuery.each(types.split(/\s+/),function(index,type){var parts=type.split(".");type=parts[0];handler.type=parts[1];var handlers=events[type];if(!handlers){handlers=events[type]={};if(!jQuery.event.special[type]||jQuery.event.special[type].setup.call(elem)===false){if(elem.addEventListener){elem.addEventListener(type,handle,false)}else{if(elem.attachEvent){elem.attachEvent("on"+type,handle)}}}}handlers[handler.guid]=handler;jQuery.event.global[type]=true});elem=null},guid:1,global:{},remove:function(elem,types,handler){if(elem.nodeType==3||elem.nodeType==8){return }var events=jQuery.data(elem,"events"),ret,index;if(events){if(types==undefined||(typeof types=="string"&&types.charAt(0)==".")){for(var type in events){this.remove(elem,type+(types||""))}}else{if(types.type){handler=types.handler;types=types.type}jQuery.each(types.split(/\s+/),function(index,type){var parts=type.split(".");type=parts[0];if(events[type]){if(handler){delete events[type][handler.guid]}else{for(handler in events[type]){if(!parts[1]||events[type][handler].type==parts[1]){delete events[type][handler]}}}for(ret in events[type]){break}if(!ret){if(!jQuery.event.special[type]||jQuery.event.special[type].teardown.call(elem)===false){if(elem.removeEventListener){elem.removeEventListener(type,jQuery.data(elem,"handle"),false)}else{if(elem.detachEvent){elem.detachEvent("on"+type,jQuery.data(elem,"handle"))}}}ret=null;delete events[type]}}})}for(ret in events){break}if(!ret){var handle=jQuery.data(elem,"handle");if(handle){handle.elem=null}jQuery.removeData(elem,"events");jQuery.removeData(elem,"handle")}}},trigger:function(type,data,elem,donative,extra){data=jQuery.makeArray(data||[]);if(type.indexOf("!")>=0){type=type.slice(0,-1);var exclusive=true}if(!elem){if(this.global[type]){jQuery("*").add([window,document]).trigger(type,data)}}else{if(elem.nodeType==3||elem.nodeType==8){return undefined}var val,ret,fn=jQuery.isFunction(elem[type]||null),event=!data[0]||!data[0].preventDefault;if(event){data.unshift(this.fix({type:type,target:elem}))}data[0].type=type;if(exclusive){data[0].exclusive=true}if(jQuery.isFunction(jQuery.data(elem,"handle"))){val=jQuery.data(elem,"handle").apply(elem,data)}if(!fn&&elem["on"+type]&&elem["on"+type].apply(elem,data)===false){val=false}if(event){data.shift()}if(extra&&jQuery.isFunction(extra)){ret=extra.apply(elem,val==null?data:data.concat(val));if(ret!==undefined){val=ret}}if(fn&&donative!==false&&val!==false&&!(jQuery.nodeName(elem,"a")&&type=="click")){this.triggered=true;try{elem[type]()}catch(e){}}this.triggered=false}return val},handle:function(event){var val;event=jQuery.event.fix(event||window.event||{});var parts=event.type.split(".");event.type=parts[0];var handlers=jQuery.data(this,"events")&&jQuery.data(this,"events")[event.type],args=Array.prototype.slice.call(arguments,1);args.unshift(event);for(var j in handlers){var handler=handlers[j];args[0].handler=handler;args[0].data=handler.data;if(!parts[1]&&!event.exclusive||handler.type==parts[1]){var ret=handler.apply(this,args);if(val!==false){val=ret}if(ret===false){event.preventDefault();event.stopPropagation()}}}if(jQuery.browser.msie){event.target=event.preventDefault=event.stopPropagation=event.handler=event.data=null}return val},fix:function(event){var originalEvent=event;event=jQuery.extend({},originalEvent);event.preventDefault=function(){if(originalEvent.preventDefault){originalEvent.preventDefault()}originalEvent.returnValue=false};event.stopPropagation=function(){if(originalEvent.stopPropagation){originalEvent.stopPropagation()}originalEvent.cancelBubble=true};if(!event.target){event.target=event.srcElement||document}if(event.target.nodeType==3){event.target=originalEvent.target.parentNode}if(!event.relatedTarget&&event.fromElement){event.relatedTarget=event.fromElement==event.target?event.toElement:event.fromElement}if(event.pageX==null&&event.clientX!=null){var doc=document.documentElement,body=document.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc.clientTop||0)}if(!event.which&&((event.charCode||event.charCode===0)?event.charCode:event.keyCode)){event.which=event.charCode||event.keyCode}if(!event.metaKey&&event.ctrlKey){event.metaKey=event.ctrlKey}if(!event.which&&event.button){event.which=(event.button&1?1:(event.button&2?3:(event.button&4?2:0)))}return event},special:{ready:{setup:function(){bindReady();return },teardown:function(){return }},mouseenter:{setup:function(){if(jQuery.browser.msie){return false}jQuery(this).bind("mouseover",jQuery.event.special.mouseenter.handler);return true},teardown:function(){if(jQuery.browser.msie){return false}jQuery(this).unbind("mouseover",jQuery.event.special.mouseenter.handler);return true},handler:function(event){if(withinElement(event,this)){return true}arguments[0].type="mouseenter";return jQuery.event.handle.apply(this,arguments)}},mouseleave:{setup:function(){if(jQuery.browser.msie){return false}jQuery(this).bind("mouseout",jQuery.event.special.mouseleave.handler);return true},teardown:function(){if(jQuery.browser.msie){return false}jQuery(this).unbind("mouseout",jQuery.event.special.mouseleave.handler);return true},handler:function(event){if(withinElement(event,this)){return true}arguments[0].type="mouseleave";return jQuery.event.handle.apply(this,arguments)}}}};jQuery.fn.extend({bind:function(type,data,fn){return type=="unload"?this.one(type,data,fn):this.each(function(){jQuery.event.add(this,type,fn||data,fn&&data)})},one:function(type,data,fn){return this.each(function(){jQuery.event.add(this,type,function(event){jQuery(this).unbind(event);return(fn||data).apply(this,arguments)},fn&&data)})},unbind:function(type,fn){return this.each(function(){jQuery.event.remove(this,type,fn)})},trigger:function(type,data,fn){return this.each(function(){jQuery.event.trigger(type,data,this,true,fn)})},triggerHandler:function(type,data,fn){if(this[0]){return jQuery.event.trigger(type,data,this[0],false,fn)}return undefined},toggle:function(){var args=arguments;return this.click(function(event){this.lastToggle=0==this.lastToggle?1:0;event.preventDefault();return args[this.lastToggle].apply(this,arguments)||false})},hover:function(fnOver,fnOut){return this.bind("mouseenter",fnOver).bind("mouseleave",fnOut)},ready:function(fn){bindReady();if(jQuery.isReady){fn.call(document,jQuery)}else{jQuery.readyList.push(function(){return fn.call(this,jQuery)})}return this}});jQuery.extend({isReady:false,readyList:[],ready:function(){if(!jQuery.isReady){jQuery.isReady=true;if(jQuery.readyList){jQuery.each(jQuery.readyList,function(){this.apply(document)});jQuery.readyList=null}jQuery(document).triggerHandler("ready")}}});var readyBound=false;function bindReady(){if(readyBound){return }readyBound=true;if(document.addEventListener&&!jQuery.browser.opera){document.addEventListener("DOMContentLoaded",jQuery.ready,false)}if(jQuery.browser.msie&&window==top){(function(){if(jQuery.isReady){return }try{document.documentElement.doScroll("left")}catch(error){setTimeout(arguments.callee,0);return }jQuery.ready()})()}if(jQuery.browser.opera){document.addEventListener("DOMContentLoaded",function(){if(jQuery.isReady){return }for(var i=0;i<document.styleSheets.length;i++){if(document.styleSheets[i].disabled){setTimeout(arguments.callee,0);return }}jQuery.ready()},false)}if(jQuery.browser.safari){var numStyles;(function(){if(jQuery.isReady){return }if(document.readyState!="loaded"&&document.readyState!="complete"){setTimeout(arguments.callee,0);return }if(numStyles===undefined){numStyles=jQuery("style, link[rel=stylesheet]").length}if(document.styleSheets.length!=numStyles){setTimeout(arguments.callee,0);return }jQuery.ready()})()}jQuery.event.add(window,"load",jQuery.ready)}jQuery.each(("blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,change,select,submit,keydown,keypress,keyup,error").split(","),function(i,name){jQuery.fn[name]=function(fn){return fn?this.bind(name,fn):this.trigger(name)}});var withinElement=function(event,elem){var parent=event.relatedTarget;while(parent&&parent!=elem){try{parent=parent.parentNode}catch(error){parent=elem}}return parent==elem};jQuery(window).bind("unload",function(){jQuery("*").add(document).unbind()});jQuery.fn.extend({load:function(url,params,callback){if(jQuery.isFunction(url)){return this.bind("load",url)}var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off)}callback=callback||function(){};var type="GET";if(params){if(jQuery.isFunction(params)){callback=params;params=null}else{params=jQuery.param(params);type="POST"}}var self=this;jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(res,status){if(status=="success"||status=="notmodified"){self.html(selector?jQuery("<div/>").append(res.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):res.responseText)}self.each(callback,[res.responseText,status,res])}});return this},serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return jQuery.nodeName(this,"form")?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:val.constructor==Array?jQuery.map(val,function(val,i){return{name:elem.name,value:val}}):{name:elem.name,value:val}}).get()}});jQuery.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(i,o){jQuery.fn[o]=function(f){return this.bind(o,f)}});var jsc=(new Date).getTime();jQuery.extend({get:function(url,data,callback,type){if(jQuery.isFunction(data)){callback=data;data=null}return jQuery.ajax({type:"GET",url:url,data:data,success:callback,dataType:type})},getScript:function(url,callback){return jQuery.get(url,null,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},post:function(url,data,callback,type){if(jQuery.isFunction(data)){callback=data;data={}}return jQuery.ajax({type:"POST",url:url,data:data,success:callback,dataType:type})},ajaxSetup:function(settings){jQuery.extend(jQuery.ajaxSettings,settings)},ajaxSettings:{global:true,type:"GET",timeout:0,contentType:"application/x-www-form-urlencoded",processData:true,async:true,data:null,username:null,password:null,accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},ajax:function(s){var jsonp,jsre=/=\?(&|$)/g,status,data;s=jQuery.extend(true,s,jQuery.extend(true,{},jQuery.ajaxSettings,s));if(s.data&&s.processData&&typeof s.data!="string"){s.data=jQuery.param(s.data)}if(s.dataType=="jsonp"){if(s.type.toLowerCase()=="get"){if(!s.url.match(jsre)){s.url+=(s.url.match(/\?/)?"&":"?")+(s.jsonp||"callback")+"=?"}}else{if(!s.data||!s.data.match(jsre)){s.data=(s.data?s.data+"&":"")+(s.jsonp||"callback")+"=?"}}s.dataType="json"}if(s.dataType=="json"&&(s.data&&s.data.match(jsre)||s.url.match(jsre))){jsonp="jsonp"+jsc++;if(s.data){s.data=(s.data+"").replace(jsre,"="+jsonp+"$1")}s.url=s.url.replace(jsre,"="+jsonp+"$1");s.dataType="script";window[jsonp]=function(tmp){data=tmp;success();complete();window[jsonp]=undefined;try{delete window[jsonp]}catch(e){}if(head){head.removeChild(script)}}}if(s.dataType=="script"&&s.cache==null){s.cache=false}if(s.cache===false&&s.type.toLowerCase()=="get"){var ts=(new Date()).getTime();var ret=s.url.replace(/(\?|&)_=.*?(&|$)/,"$1_="+ts+"$2");s.url=ret+((ret==s.url)?(s.url.match(/\?/)?"&":"?")+"_="+ts:"")}if(s.data&&s.type.toLowerCase()=="get"){s.url+=(s.url.match(/\?/)?"&":"?")+s.data;s.data=null}if(s.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart")}if((!s.url.indexOf("http")||!s.url.indexOf("//"))&&s.dataType=="script"&&s.type.toLowerCase()=="get"){var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.src=s.url;if(s.scriptCharset){script.charset=s.scriptCharset}if(!jsonp){var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){done=true;success();complete();head.removeChild(script)}}}head.appendChild(script);return undefined}var requestDone=false;var xml=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest();xml.open(s.type,s.url,s.async,s.username,s.password);try{if(s.data){xml.setRequestHeader("Content-Type",s.contentType)}if(s.ifModified){xml.setRequestHeader("If-Modified-Since",jQuery.lastModified[s.url]||"Thu, 01 Jan 1970 00:00:00 GMT")}xml.setRequestHeader("X-Requested-With","XMLHttpRequest");xml.setRequestHeader("Accept",s.dataType&&s.accepts[s.dataType]?s.accepts[s.dataType]+", */*":s.accepts._default)}catch(e){}if(s.beforeSend){s.beforeSend(xml)}if(s.global){jQuery.event.trigger("ajaxSend",[xml,s])}var onreadystatechange=function(isTimeout){if(!requestDone&&xml&&(xml.readyState==4||isTimeout=="timeout")){requestDone=true;if(ival){clearInterval(ival);ival=null}status=isTimeout=="timeout"&&"timeout"||!jQuery.httpSuccess(xml)&&"error"||s.ifModified&&jQuery.httpNotModified(xml,s.url)&&"notmodified"||"success";if(status=="success"){try{data=jQuery.httpData(xml,s.dataType)}catch(e){status="parsererror"}}if(status=="success"){var modRes;try{modRes=xml.getResponseHeader("Last-Modified")}catch(e){}if(s.ifModified&&modRes){jQuery.lastModified[s.url]=modRes}if(!jsonp){success()}}else{jQuery.handleError(s,xml,status)}complete();if(s.async){xml=null}}};if(s.async){var ival=setInterval(onreadystatechange,13);if(s.timeout>0){setTimeout(function(){if(xml){xml.abort();if(!requestDone){onreadystatechange("timeout")}}},s.timeout)}}try{xml.send(s.data)}catch(e){jQuery.handleError(s,xml,null,e)}if(!s.async){onreadystatechange()}function success(){if(s.success){s.success(data,status)}if(s.global){jQuery.event.trigger("ajaxSuccess",[xml,s])}}function complete(){if(s.complete){s.complete(xml,status)}if(s.global){jQuery.event.trigger("ajaxComplete",[xml,s])}if(s.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop")}}return xml},handleError:function(s,xml,status,e){if(s.error){s.error(xml,status,e)}if(s.global){jQuery.event.trigger("ajaxError",[xml,s,e])}},active:0,httpSuccess:function(r){try{return !r.status&&location.protocol=="file:"||(r.status>=200&&r.status<300)||r.status==304||r.status==1223||jQuery.browser.safari&&r.status==undefined}catch(e){}return false},httpNotModified:function(xml,url){try{var xmlRes=xml.getResponseHeader("Last-Modified");return xml.status==304||xmlRes==jQuery.lastModified[url]||jQuery.browser.safari&&xml.status==undefined}catch(e){}return false},httpData:function(r,type){var ct=r.getResponseHeader("content-type");var xml=type=="xml"||!type&&ct&&ct.indexOf("xml")>=0;var data=xml?r.responseXML:r.responseText;if(xml&&data.documentElement.tagName=="parsererror"){throw"parsererror"}if(type=="script"){jQuery.globalEval(data)}if(type=="json"){data=eval("("+data+")")}return data},param:function(a){var s=[];if(a.constructor==Array||a.jquery){jQuery.each(a,function(){s.push(encodeURIComponent(this.name)+"="+encodeURIComponent(this.value))})}else{for(var j in a){if(a[j]&&a[j].constructor==Array){jQuery.each(a[j],function(){s.push(encodeURIComponent(j)+"="+encodeURIComponent(this))})}else{s.push(encodeURIComponent(j)+"="+encodeURIComponent(a[j]))}}}return s.join("&").replace(/%20/g,"+")}});jQuery.fn.extend({show:function(speed,callback){return speed?this.animate({height:"show",width:"show",opacity:"show"},speed,callback):this.filter(":hidden").each(function(){this.style.display=this.oldblock||"";if(jQuery.css(this,"display")=="none"){var elem=jQuery("<"+this.tagName+" />").appendTo("body");this.style.display=elem.css("display");if(this.style.display=="none"){this.style.display="block"}elem.remove()}}).end()},hide:function(speed,callback){return speed?this.animate({height:"hide",width:"hide",opacity:"hide"},speed,callback):this.filter(":visible").each(function(){this.oldblock=this.oldblock||jQuery.css(this,"display");this.style.display="none"}).end()},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2){return jQuery.isFunction(fn)&&jQuery.isFunction(fn2)?this._toggle(fn,fn2):fn?this.animate({height:"toggle",width:"toggle",opacity:"toggle"},fn,fn2):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"]()})},slideDown:function(speed,callback){return this.animate({height:"show"},speed,callback)},slideUp:function(speed,callback){return this.animate({height:"hide"},speed,callback)},slideToggle:function(speed,callback){return this.animate({height:"toggle"},speed,callback)},fadeIn:function(speed,callback){return this.animate({opacity:"show"},speed,callback)},fadeOut:function(speed,callback){return this.animate({opacity:"hide"},speed,callback)},fadeTo:function(speed,to,callback){return this.animate({opacity:to},speed,callback)},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);return this[optall.queue===false?"each":"queue"](function(){if(this.nodeType!=1){return false}var opt=jQuery.extend({},optall);var hidden=jQuery(this).is(":hidden"),self=this;for(var p in prop){if(prop[p]=="hide"&&hidden||prop[p]=="show"&&!hidden){return jQuery.isFunction(opt.complete)&&opt.complete.apply(this)}if(p=="height"||p=="width"){opt.display=jQuery.css(this,"display");opt.overflow=this.style.overflow}}if(opt.overflow!=null){this.style.overflow="hidden"}opt.curAnim=jQuery.extend({},prop);jQuery.each(prop,function(name,val){var e=new jQuery.fx(self,opt,name);if(/toggle|show|hide/.test(val)){e[val=="toggle"?hidden?"show":"hide":val](prop)}else{var parts=val.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),start=e.cur(true)||0;if(parts){var end=parseFloat(parts[2]),unit=parts[3]||"px";if(unit!="px"){self.style[name]=(end||1)+unit;start=((end||1)/e.cur(true))*start;self.style[name]=start+unit}if(parts[1]){end=((parts[1]=="-="?-1:1)*end)+start}e.custom(start,end,unit)}else{e.custom(start,val,"")}}});return true})},queue:function(type,fn){if(jQuery.isFunction(type)||(type&&type.constructor==Array)){fn=type;type="fx"}if(!type||(typeof type=="string"&&!fn)){return queue(this[0],type)}return this.each(function(){if(fn.constructor==Array){queue(this,type,fn)}else{queue(this,type).push(fn);if(queue(this,type).length==1){fn.apply(this)}}})},stop:function(clearQueue,gotoEnd){var timers=jQuery.timers;if(clearQueue){this.queue([])}this.each(function(){for(var i=timers.length-1;i>=0;i--){if(timers[i].elem==this){if(gotoEnd){timers[i](true)}timers.splice(i,1)}}});if(!gotoEnd){this.dequeue()}return this}});var queue=function(elem,type,array){if(!elem){return undefined}type=type||"fx";var q=jQuery.data(elem,type+"queue");if(!q||array){q=jQuery.data(elem,type+"queue",array?jQuery.makeArray(array):[])}return q};jQuery.fn.dequeue=function(type){type=type||"fx";return this.each(function(){var q=queue(this,type);q.shift();if(q.length){q[0].apply(this)}})};jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&speed.constructor==Object?speed:{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&easing.constructor!=Function&&easing};opt.duration=(opt.duration&&opt.duration.constructor==Number?opt.duration:{slow:600,fast:200}[opt.duration])||400;opt.old=opt.complete;opt.complete=function(){if(opt.queue!==false){jQuery(this).dequeue()}if(jQuery.isFunction(opt.old)){opt.old.apply(this)}};return opt},easing:{linear:function(p,n,firstNum,diff){return firstNum+diff*p},swing:function(p,n,firstNum,diff){return((-Math.cos(p*Math.PI)/2)+0.5)*diff+firstNum}},timers:[],timerId:null,fx:function(elem,options,prop){this.options=options;this.elem=elem;this.prop=prop;if(!options.orig){options.orig={}}}});jQuery.fx.prototype={update:function(){if(this.options.step){this.options.step.apply(this.elem,[this.now,this])}(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this);if(this.prop=="height"||this.prop=="width"){this.elem.style.display="block"}},cur:function(force){if(this.elem[this.prop]!=null&&this.elem.style[this.prop]==null){return this.elem[this.prop]}var r=parseFloat(jQuery.css(this.elem,this.prop,force));return r&&r>-10000?r:parseFloat(jQuery.curCSS(this.elem,this.prop))||0},custom:function(from,to,unit){this.startTime=(new Date()).getTime();this.start=from;this.end=to;this.unit=unit||this.unit||"px";this.now=this.start;this.pos=this.state=0;this.update();var self=this;function t(gotoEnd){return self.step(gotoEnd)}t.elem=this.elem;jQuery.timers.push(t);if(jQuery.timerId==null){jQuery.timerId=setInterval(function(){var timers=jQuery.timers;for(var i=0;i<timers.length;i++){if(!timers[i]()){timers.splice(i--,1)}}if(!timers.length){clearInterval(jQuery.timerId);jQuery.timerId=null}},13)}},show:function(){this.options.orig[this.prop]=jQuery.attr(this.elem.style,this.prop);this.options.show=true;this.custom(0,this.cur());if(this.prop=="width"||this.prop=="height"){this.elem.style[this.prop]="1px"}jQuery(this.elem).show()},hide:function(){this.options.orig[this.prop]=jQuery.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(gotoEnd){var t=(new Date()).getTime();if(gotoEnd||t>this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;var done=true;for(var i in this.options.curAnim){if(this.options.curAnim[i]!==true){done=false}}if(done){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(jQuery.css(this.elem,"display")=="none"){this.elem.style.display="block"}}if(this.options.hide){this.elem.style.display="none"}if(this.options.hide||this.options.show){for(var p in this.options.curAnim){jQuery.attr(this.elem.style,p,this.options.orig[p])}}}if(done&&jQuery.isFunction(this.options.complete)){this.options.complete.apply(this.elem)}return false}else{var n=t-this.startTime;this.state=n/this.options.duration;this.pos=jQuery.easing[this.options.easing||(jQuery.easing.swing?"swing":"linear")](this.state,n,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update()}return true}};jQuery.fx.step={scrollLeft:function(fx){fx.elem.scrollLeft=fx.now},scrollTop:function(fx){fx.elem.scrollTop=fx.now},opacity:function(fx){jQuery.attr(fx.elem.style,"opacity",fx.now)},_default:function(fx){fx.elem.style[fx.prop]=fx.now+fx.unit}};jQuery.fn.offset=function(){var left=0,top=0,elem=this[0],results;if(elem){with(jQuery.browser){var parent=elem.parentNode,offsetChild=elem,offsetParent=elem.offsetParent,doc=elem.ownerDocument,safari2=safari&&parseInt(version)<522&&!/adobeair/i.test(userAgent),fixed=jQuery.css(elem,"position")=="fixed";if(elem.getBoundingClientRect){var box=elem.getBoundingClientRect();add(box.left+Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft),box.top+Math.max(doc.documentElement.scrollTop,doc.body.scrollTop));add(-doc.documentElement.clientLeft,-doc.documentElement.clientTop)}else{add(elem.offsetLeft,elem.offsetTop);while(offsetParent){add(offsetParent.offsetLeft,offsetParent.offsetTop);if(mozilla&&!/^t(able|d|h)$/i.test(offsetParent.tagName)||safari&&!safari2){border(offsetParent)}if(!fixed&&jQuery.css(offsetParent,"position")=="fixed"){fixed=true}offsetChild=/^body$/i.test(offsetParent.tagName)?offsetChild:offsetParent;offsetParent=offsetParent.offsetParent}while(parent&&parent.tagName&&!/^body|html$/i.test(parent.tagName)){if(!/^inline|table.*$/i.test(jQuery.css(parent,"display"))){add(-parent.scrollLeft,-parent.scrollTop)}if(mozilla&&jQuery.css(parent,"overflow")!="visible"){border(parent)}parent=parent.parentNode}if((safari2&&(fixed||jQuery.css(offsetChild,"position")=="absolute"))||(mozilla&&jQuery.css(offsetChild,"position")!="absolute")){add(-doc.body.offsetLeft,-doc.body.offsetTop)}if(fixed){add(Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft),Math.max(doc.documentElement.scrollTop,doc.body.scrollTop))}}results={top:top,left:left}}}function border(elem){add(jQuery.curCSS(elem,"borderLeftWidth",true),jQuery.curCSS(elem,"borderTopWidth",true))}function add(l,t){left+=parseInt(l)||0;top+=parseInt(t)||0}return results}})();
// /vendor/require-1.0.2.js from cimspire
var requirejs,require,define;(function(){var version="1.0.2",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/require\(\s*["']([^'"\s]+)["']\s*\)/g,currDirRegExp=/^\.\//,jsSuffixRegExp=/\.js$/,ostring=Object.prototype.toString,ap=Array.prototype,aps=ap.slice,apsp=ap.splice,isBrowser=!!(typeof window!=="undefined"&&navigator&&document),isWebWorker=!isBrowser&&typeof importScripts!=="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!=="undefined"&&opera.toString()==="[object Opera]",empty={},contexts={},globalDefQueue=[],interactiveScript=null,checkLoadedDepth=0,useInteractive=false,req,cfg={},currentlyAddingScript,s,head,baseElement,scripts,script,src,subPath,mainScript,dataMain,i,ctx,jQueryCheck,checkLoadedTimeoutId;function isFunction(it){return ostring.call(it)==="[object Function]"}function isArray(it){return ostring.call(it)==="[object Array]"}function mixin(target,source,force){for(var prop in source){if(!(prop in empty)&&(!(prop in target)||force)){target[prop]=source[prop]}}return req}function makeError(id,msg,err){var e=new Error(msg+"\nhttp://requirejs.org/docs/errors.html#"+id);if(err){e.originalError=err}return e}function configurePackageDir(pkgs,currentPackages,dir){var i,location,pkgObj;for(i=0;(pkgObj=currentPackages[i]);i++){pkgObj=typeof pkgObj==="string"?{name:pkgObj}:pkgObj;location=pkgObj.location;if(dir&&(!location||(location.indexOf("/")!==0&&location.indexOf(":")===-1))){location=dir+"/"+(location||pkgObj.name)}pkgs[pkgObj.name]={name:pkgObj.name,location:location||pkgObj.name,main:(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}}function jQueryHoldReady($,shouldHold){if($.holdReady){$.holdReady(shouldHold)}else{if(shouldHold){$.readyWait+=1}else{$.ready(true)}}}if(typeof define!=="undefined"){return }if(typeof requirejs!=="undefined"){if(isFunction(requirejs)){return }else{cfg=requirejs;requirejs=undefined}}if(typeof require!=="undefined"&&!isFunction(require)){cfg=require;require=undefined}function newContext(contextName){var context,resume,config={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},catchError:{}},defQueue=[],specified={require:true,exports:true,module:true},urlMap={},defined={},loaded={},waiting={},waitAry=[],urlFetched={},managerCounter=0,managerCallbacks={},plugins={},needFullExec={},fullExec={},resumeDepth=0;function trimDots(ary){var i,part;for(i=0;(part=ary[i]);i++){if(part==="."){ary.splice(i,1);i-=1}else{if(part===".."){if(i===1&&(ary[2]===".."||ary[0]==="..")){break}else{if(i>0){ary.splice(i-1,2);i-=2}}}}}}function normalize(name,baseName){var pkgName,pkgConfig;if(name&&name.charAt(0)==="."){if(baseName){if(config.pkgs[baseName]){baseName=[baseName]}else{baseName=baseName.split("/");baseName=baseName.slice(0,baseName.length-1)}name=baseName.concat(name.split("/"));trimDots(name);pkgConfig=config.pkgs[(pkgName=name[0])];name=name.join("/");if(pkgConfig&&name===pkgName+"/"+pkgConfig.main){name=pkgName}}else{if(name.indexOf("./")===0){name=name.substring(2)}}}return name}function makeModuleMap(name,parentModuleMap){var index=name?name.indexOf("!"):-1,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,normalizedName,url,pluginModule;if(index!==-1){prefix=name.substring(0,index);name=name.substring(index+1,name.length)}if(prefix){prefix=normalize(prefix,parentName)}if(name){if(prefix){pluginModule=defined[prefix];if(pluginModule&&pluginModule.normalize){normalizedName=pluginModule.normalize(name,function(name){return normalize(name,parentName)})}else{normalizedName=normalize(name,parentName)}}else{normalizedName=normalize(name,parentName);url=urlMap[normalizedName];if(!url){url=context.nameToUrl(normalizedName,null,parentModuleMap);urlMap[normalizedName]=url}}}return{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,url:url,originalName:originalName,fullName:prefix?prefix+"!"+(normalizedName||""):normalizedName}}function isPriorityDone(){var priorityDone=true,priorityWait=config.priorityWait,priorityName,i;if(priorityWait){for(i=0;(priorityName=priorityWait[i]);i++){if(!loaded[priorityName]){priorityDone=false;break}}if(priorityDone){delete config.priorityWait}}return priorityDone}function makeContextModuleFunc(func,relModuleMap,enableBuildCallback){return function(){var args=aps.call(arguments,0),lastArg;if(enableBuildCallback&&isFunction((lastArg=args[args.length-1]))){lastArg.__requireJsBuild=true}args.push(relModuleMap);return func.apply(null,args)}}function makeRequire(relModuleMap,enableBuildCallback){var modRequire=makeContextModuleFunc(context.require,relModuleMap,enableBuildCallback);mixin(modRequire,{nameToUrl:makeContextModuleFunc(context.nameToUrl,relModuleMap),toUrl:makeContextModuleFunc(context.toUrl,relModuleMap),defined:makeContextModuleFunc(context.requireDefined,relModuleMap),specified:makeContextModuleFunc(context.requireSpecified,relModuleMap),isBrowser:req.isBrowser});return modRequire}function queueDependency(manager){context.paused.push(manager)}function execManager(manager){var i,ret,err,errFile,errModuleTree,cb=manager.callback,map=manager.map,fullName=map.fullName,args=manager.deps,listeners=manager.listeners,cjsModule;if(cb&&isFunction(cb)){if(config.catchError.define){try{ret=req.execCb(fullName,manager.callback,args,defined[fullName])}catch(e){err=e}}else{ret=req.execCb(fullName,manager.callback,args,defined[fullName])}if(fullName){cjsModule=manager.cjsModule;if(cjsModule&&cjsModule.exports!==undefined&&cjsModule.exports!==defined[fullName]){ret=defined[fullName]=manager.cjsModule.exports}else{if(ret===undefined&&manager.usingExports){ret=defined[fullName]}else{defined[fullName]=ret;if(needFullExec[fullName]){fullExec[fullName]=true}}}}}else{if(fullName){ret=defined[fullName]=cb;if(needFullExec[fullName]){fullExec[fullName]=true}}}if(waiting[manager.id]){delete waiting[manager.id];manager.isDone=true;context.waitCount-=1;if(context.waitCount===0){waitAry=[]}}delete managerCallbacks[fullName];if(req.onResourceLoad&&!manager.placeholder){req.onResourceLoad(context,map,manager.depArray)}if(err){errFile=(fullName?makeModuleMap(fullName).url:"")||err.fileName||err.sourceURL;errModuleTree=err.moduleTree;err=makeError("defineerror",'Error evaluating module "'+fullName+'" at location "'+errFile+'":\n'+err+"\nfileName:"+errFile+"\nlineNumber: "+(err.lineNumber||err.line),err);err.moduleName=fullName;err.moduleTree=errModuleTree;return req.onError(err)}for(i=0;(cb=listeners[i]);i++){cb(ret)}return undefined}function makeArgCallback(manager,i){return function(value){if(!manager.depDone[i]){manager.depDone[i]=true;manager.deps[i]=value;manager.depCount-=1;if(!manager.depCount){execManager(manager)}}}}function callPlugin(pluginName,depManager){var map=depManager.map,fullName=map.fullName,name=map.name,plugin=plugins[pluginName]||(plugins[pluginName]=defined[pluginName]),load;if(depManager.loading){return }depManager.loading=true;load=function(ret){depManager.callback=function(){return ret};execManager(depManager);loaded[depManager.id]=true;resume()};load.fromText=function(moduleName,text){var hasInteractive=useInteractive;loaded[moduleName]=false;context.scriptCount+=1;context.fake[moduleName]=true;if(hasInteractive){useInteractive=false}req.exec(text);if(hasInteractive){useInteractive=true}context.completeLoad(moduleName)};if(fullName in defined){load(defined[fullName])}else{plugin.load(name,makeRequire(map.parentMap,true),load,config)}}function addWait(manager){if(!waiting[manager.id]){waiting[manager.id]=manager;waitAry.push(manager);context.waitCount+=1}}function managerAdd(cb){this.listeners.push(cb)}function getManager(map,shouldQueue){var fullName=map.fullName,prefix=map.prefix,plugin=prefix?plugins[prefix]||(plugins[prefix]=defined[prefix]):null,manager,created,pluginManager;if(fullName){manager=managerCallbacks[fullName]}if(!manager){created=true;manager={id:(prefix&&!plugin?(managerCounter++)+"__p@:":"")+(fullName||"__r@"+(managerCounter++)),map:map,depCount:0,depDone:[],depCallbacks:[],deps:[],listeners:[],add:managerAdd};specified[manager.id]=true;if(fullName&&(!prefix||plugins[prefix])){managerCallbacks[fullName]=manager}}if(prefix&&!plugin){pluginManager=getManager(makeModuleMap(prefix),true);pluginManager.add(function(plugin){var newMap=makeModuleMap(map.originalName,map.parentMap),normalizedManager=getManager(newMap,true);manager.placeholder=true;normalizedManager.add(function(resource){manager.callback=function(){return resource};execManager(manager)})})}else{if(created&&shouldQueue){loaded[manager.id]=false;queueDependency(manager);addWait(manager)}}return manager}function main(inName,depArray,callback,relModuleMap){var moduleMap=makeModuleMap(inName,relModuleMap),name=moduleMap.name,fullName=moduleMap.fullName,manager=getManager(moduleMap),id=manager.id,deps=manager.deps,i,depArg,depName,depPrefix,cjsMod;if(fullName){if(fullName in defined||loaded[id]===true||(fullName==="jquery"&&config.jQuery&&config.jQuery!==callback().fn.jquery)){return }specified[id]=true;loaded[id]=true;if(fullName==="jquery"&&callback){jQueryCheck(callback())}}manager.depArray=depArray;manager.callback=callback;for(i=0;i<depArray.length;i++){depArg=depArray[i];if(depArg){depArg=makeModuleMap(depArg,(name?moduleMap:relModuleMap));depName=depArg.fullName;depPrefix=depArg.prefix;depArray[i]=depName;if(depName==="require"){deps[i]=makeRequire(moduleMap)}else{if(depName==="exports"){deps[i]=defined[fullName]={};manager.usingExports=true}else{if(depName==="module"){manager.cjsModule=cjsMod=deps[i]={id:name,uri:name?context.nameToUrl(name,null,relModuleMap):undefined,exports:defined[fullName]}}else{if(depName in defined&&!(depName in waiting)&&(!(fullName in needFullExec)||(fullName in needFullExec&&fullExec[depName]))){deps[i]=defined[depName]}else{if(fullName in needFullExec){needFullExec[depName]=true;delete defined[depName];urlFetched[depArg.url]=false}manager.depCount+=1;manager.depCallbacks[i]=makeArgCallback(manager,i);getManager(depArg,true).add(manager.depCallbacks[i])}}}}}}if(!manager.depCount){execManager(manager)}else{addWait(manager)}}function callDefMain(args){main.apply(null,args)}jQueryCheck=function(jqCandidate){if(!context.jQuery){var $=jqCandidate||(typeof jQuery!=="undefined"?jQuery:null);if($){if(config.jQuery&&$.fn.jquery!==config.jQuery){return }if("holdReady" in $||"readyWait" in $){context.jQuery=$;callDefMain(["jquery",[],function(){return jQuery}]);if(context.scriptCount){jQueryHoldReady($,true);context.jQueryIncremented=true}}}}};function forceExec(manager,traced){if(manager.isDone){return undefined}var fullName=manager.map.fullName,depArray=manager.depArray,i,depName,depManager,prefix,prefixManager,value;if(fullName){if(traced[fullName]){return defined[fullName]}traced[fullName]=true}if(depArray){for(i=0;i<depArray.length;i++){depName=depArray[i];if(depName){prefix=makeModuleMap(depName).prefix;if(prefix&&(prefixManager=waiting[prefix])){forceExec(prefixManager,traced)}depManager=waiting[depName];if(depManager&&!depManager.isDone&&loaded[depName]){value=forceExec(depManager,traced);manager.depCallbacks[i](value)}}}}return fullName?defined[fullName]:undefined}function checkLoaded(){var waitInterval=config.waitSeconds*1000,expired=waitInterval&&(context.startTime+waitInterval)<new Date().getTime(),noLoads="",hasLoadedProp=false,stillLoading=false,prop,err,manager;if(context.pausedCount>0){return undefined}if(config.priorityWait){if(isPriorityDone()){resume()}else{return undefined}}for(prop in loaded){if(!(prop in empty)){hasLoadedProp=true;if(!loaded[prop]){if(expired){noLoads+=prop+" "}else{stillLoading=true;break}}}}if(!hasLoadedProp&&!context.waitCount){return undefined}if(expired&&noLoads){err=makeError("timeout","Load timeout for modules: "+noLoads);err.requireType="timeout";err.requireModules=noLoads;return req.onError(err)}if(stillLoading||context.scriptCount){if((isBrowser||isWebWorker)&&!checkLoadedTimeoutId){checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0;checkLoaded()},50)}return undefined}if(context.waitCount){for(i=0;(manager=waitAry[i]);i++){forceExec(manager,{})}if(context.paused.length){resume()}if(checkLoadedDepth<5){checkLoadedDepth+=1;checkLoaded()}}checkLoadedDepth=0;req.checkReadyState();return undefined}resume=function(){var manager,map,url,i,p,args,fullName;resumeDepth+=1;if(context.scriptCount<=0){context.scriptCount=0}while(defQueue.length){args=defQueue.shift();if(args[0]===null){return req.onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]))}else{callDefMain(args)}}if(!config.priorityWait||isPriorityDone()){while(context.paused.length){p=context.paused;context.pausedCount+=p.length;context.paused=[];for(i=0;(manager=p[i]);i++){map=manager.map;url=map.url;fullName=map.fullName;if(map.prefix){callPlugin(map.prefix,manager)}else{if(!urlFetched[url]&&!loaded[fullName]){req.load(context,fullName,url);if(url.indexOf("empty:")!==0){urlFetched[url]=true}}}}context.startTime=(new Date()).getTime();context.pausedCount-=p.length}}if(resumeDepth===1){checkLoaded()}resumeDepth-=1;return undefined};context={contextName:contextName,config:config,defQueue:defQueue,waiting:waiting,waitCount:0,specified:specified,loaded:loaded,urlMap:urlMap,urlFetched:urlFetched,scriptCount:0,defined:defined,paused:[],pausedCount:0,plugins:plugins,needFullExec:needFullExec,fake:{},fullExec:fullExec,managerCallbacks:managerCallbacks,makeModuleMap:makeModuleMap,normalize:normalize,configure:function(cfg){var paths,prop,packages,pkgs,packagePaths,requireWait;if(cfg.baseUrl){if(cfg.baseUrl.charAt(cfg.baseUrl.length-1)!=="/"){cfg.baseUrl+="/"}}paths=config.paths;packages=config.packages;pkgs=config.pkgs;mixin(config,cfg,true);if(cfg.paths){for(prop in cfg.paths){if(!(prop in empty)){paths[prop]=cfg.paths[prop]}}config.paths=paths}packagePaths=cfg.packagePaths;if(packagePaths||cfg.packages){if(packagePaths){for(prop in packagePaths){if(!(prop in empty)){configurePackageDir(pkgs,packagePaths[prop],prop)}}}if(cfg.packages){configurePackageDir(pkgs,cfg.packages)}config.pkgs=pkgs}if(cfg.priority){requireWait=context.requireWait;context.requireWait=false;context.takeGlobalQueue();resume();context.require(cfg.priority);resume();context.requireWait=requireWait;config.priorityWait=cfg.priority}if(cfg.deps||cfg.callback){context.require(cfg.deps||[],cfg.callback)}},requireDefined:function(moduleName,relModuleMap){return makeModuleMap(moduleName,relModuleMap).fullName in defined},requireSpecified:function(moduleName,relModuleMap){return makeModuleMap(moduleName,relModuleMap).fullName in specified},require:function(deps,callback,relModuleMap){var moduleName,fullName,moduleMap;if(typeof deps==="string"){if(isFunction(callback)){return req.onError(makeError("requireargs","Invalid require call"))}if(req.get){return req.get(context,deps,callback)}moduleName=deps;relModuleMap=callback;moduleMap=makeModuleMap(moduleName,relModuleMap);fullName=moduleMap.fullName;if(!(fullName in defined)){return req.onError(makeError("notloaded","Module name '"+moduleMap.fullName+"' has not been loaded yet for context: "+contextName))}return defined[fullName]}if(deps&&deps.length||callback){main(null,deps,callback,relModuleMap)}if(!context.requireWait){while(!context.scriptCount&&context.paused.length){context.takeGlobalQueue();resume()}}return context.require},takeGlobalQueue:function(){if(globalDefQueue.length){apsp.apply(context.defQueue,[context.defQueue.length-1,0].concat(globalDefQueue));globalDefQueue=[]}},completeLoad:function(moduleName){var args;context.takeGlobalQueue();while(defQueue.length){args=defQueue.shift();if(args[0]===null){args[0]=moduleName;break}else{if(args[0]===moduleName){break}else{callDefMain(args);args=null}}}if(args){callDefMain(args)}else{callDefMain([moduleName,[],moduleName==="jquery"&&typeof jQuery!=="undefined"?function(){return jQuery}:null])}jQueryCheck();if(req.isAsync){context.scriptCount-=1}resume();if(!req.isAsync){context.scriptCount-=1}},toUrl:function(moduleNamePlusExt,relModuleMap){var index=moduleNamePlusExt.lastIndexOf("."),ext=null;if(index!==-1){ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length);moduleNamePlusExt=moduleNamePlusExt.substring(0,index)}return context.nameToUrl(moduleNamePlusExt,ext,relModuleMap)},nameToUrl:function(moduleName,ext,relModuleMap){var paths,pkgs,pkg,pkgPath,syms,i,parentModule,url,config=context.config;moduleName=normalize(moduleName,relModuleMap&&relModuleMap.fullName);if(req.jsExtRegExp.test(moduleName)){url=moduleName+(ext?ext:"")}else{paths=config.paths;pkgs=config.pkgs;syms=moduleName.split("/");for(i=syms.length;i>0;i--){parentModule=syms.slice(0,i).join("/");if(paths[parentModule]){syms.splice(0,i,paths[parentModule]);break}else{if((pkg=pkgs[parentModule])){if(moduleName===pkg.name){pkgPath=pkg.location+"/"+pkg.main}else{pkgPath=pkg.location}syms.splice(0,i,pkgPath);break}}}url=syms.join("/")+(ext||".js");url=(url.charAt(0)==="/"||url.match(/^\w+:/)?"":config.baseUrl)+url}return config.urlArgs?url+((url.indexOf("?")===-1?"?":"&")+config.urlArgs):url}};context.jQueryCheck=jQueryCheck;context.resume=resume;return context}req=requirejs=function(deps,callback){var contextName=defContextName,context,config;if(!isArray(deps)&&typeof deps!=="string"){config=deps;if(isArray(callback)){deps=callback;callback=arguments[2]}else{deps=[]}}if(config&&config.context){contextName=config.context}context=contexts[contextName]||(contexts[contextName]=newContext(contextName));if(config){context.configure(config)}return context.require(deps,callback)};req.config=function(config){return req(config)};if(!require){require=req}req.toUrl=function(moduleNamePlusExt){return contexts[defContextName].toUrl(moduleNamePlusExt)};req.version=version;req.jsExtRegExp=/^\/|:|\?|\.js$/;s=req.s={contexts:contexts,skipAsync:{}};req.isAsync=req.isBrowser=isBrowser;if(isBrowser){head=s.head=document.getElementsByTagName("head")[0];baseElement=document.getElementsByTagName("base")[0];if(baseElement){head=s.head=baseElement.parentNode}}req.onError=function(err){throw err};req.load=function(context,moduleName,url){req.resourcesReady(false);context.scriptCount+=1;req.attach(url,context,moduleName);if(context.jQuery&&!context.jQueryIncremented){jQueryHoldReady(context.jQuery,true);context.jQueryIncremented=true}};function getInteractiveScript(){var scripts,i,script;if(interactiveScript&&interactiveScript.readyState==="interactive"){return interactiveScript}scripts=document.getElementsByTagName("script");for(i=scripts.length-1;i>-1&&(script=scripts[i]);i--){if(script.readyState==="interactive"){return(interactiveScript=script)}}return null}define=function(name,deps,callback){var node,context;if(typeof name!=="string"){callback=deps;deps=name;name=null}if(!isArray(deps)){callback=deps;deps=[]}if(!deps.length&&isFunction(callback)){if(callback.length){callback.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(match,dep){deps.push(dep)});deps=(callback.length===1?["require"]:["require","exports","module"]).concat(deps)}}if(useInteractive){node=currentlyAddingScript||getInteractiveScript();if(node){if(!name){name=node.getAttribute("data-requiremodule")}context=contexts[node.getAttribute("data-requirecontext")]}}(context?context.defQueue:globalDefQueue).push([name,deps,callback]);return undefined};define.amd={multiversion:true,plugins:true,jQuery:true};req.exec=function(text){return eval(text)};req.execCb=function(name,callback,args,exports){return callback.apply(exports,args)};req.addScriptToDom=function(node){currentlyAddingScript=node;if(baseElement){head.insertBefore(node,baseElement)}else{head.appendChild(node)}currentlyAddingScript=null};req.onScriptLoad=function(evt){var node=evt.currentTarget||evt.srcElement,contextName,moduleName,context;if(evt.type==="load"||(node&&readyRegExp.test(node.readyState))){interactiveScript=null;contextName=node.getAttribute("data-requirecontext");moduleName=node.getAttribute("data-requiremodule");context=contexts[contextName];contexts[contextName].completeLoad(moduleName);if(node.detachEvent&&!isOpera){node.detachEvent("onreadystatechange",req.onScriptLoad)}else{node.removeEventListener("load",req.onScriptLoad,false)}}};req.attach=function(url,context,moduleName,callback,type,fetchOnlyFunction){var node;if(isBrowser){callback=callback||req.onScriptLoad;node=context&&context.config&&context.config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");node.type=type||"text/javascript";node.charset="utf-8";node.async=!s.skipAsync[url];if(context){node.setAttribute("data-requirecontext",context.contextName)}node.setAttribute("data-requiremodule",moduleName);if(node.attachEvent&&!isOpera){useInteractive=true;if(fetchOnlyFunction){node.onreadystatechange=function(evt){if(node.readyState==="loaded"){node.onreadystatechange=null;node.attachEvent("onreadystatechange",callback);fetchOnlyFunction(node)}}}else{node.attachEvent("onreadystatechange",callback)}}else{node.addEventListener("load",callback,false)}node.src=url;if(!fetchOnlyFunction){req.addScriptToDom(node)}return node}else{if(isWebWorker){importScripts(url);context.completeLoad(moduleName)}}return null};if(isBrowser){scripts=document.getElementsByTagName("script");for(i=scripts.length-1;i>-1&&(script=scripts[i]);i--){if(!head){head=script.parentNode}if((dataMain=script.getAttribute("data-main"))){if(!cfg.baseUrl){src=dataMain.split("/");mainScript=src.pop();subPath=src.length?src.join("/")+"/":"./";cfg.baseUrl=subPath;dataMain=mainScript.replace(jsSuffixRegExp,"")}cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain];break}}}req.checkReadyState=function(){var contexts=s.contexts,prop;for(prop in contexts){if(!(prop in empty)){if(contexts[prop].waitCount){return }}}req.resourcesReady(true)};req.resourcesReady=function(isReady){var contexts,context,prop;req.resourcesDone=isReady;if(req.resourcesDone){contexts=s.contexts;for(prop in contexts){if(!(prop in empty)){context=contexts[prop];if(context.jQueryIncremented){jQueryHoldReady(context.jQuery,false);context.jQueryIncremented=false}}}}};req.pageLoaded=function(){if(document.readyState!=="complete"){document.readyState="complete"}};if(isBrowser){if(document.addEventListener){if(!document.readyState){document.readyState="loading";window.addEventListener("load",req.pageLoaded,false)}}}req(cfg);if(req.isAsync&&typeof setTimeout!=="undefined"){ctx=s.contexts[(cfg.context||defContextName)];ctx.requireWait=true;setTimeout(function(){ctx.requireWait=false;ctx.takeGlobalQueue();ctx.jQueryCheck();if(!ctx.scriptCount){ctx.resume()}req.checkReadyState()},0)}}());
// /setup/require.js from cimspire
require.missingModules=[];require.load=(function(A){return function(D,C,B){require.missingModules.push(C);if(typeof console!=="undefined"&&typeof console.warn==="function"){console.warn("Module missing in resource XML:",C)}return A.apply(this,arguments)}}(require.load));
// /lib/communityServiceConfig.js from ui
var tpMediaDataServicePrefix="http://mps.theplatform.com/";var tpRatingDataServicePrefix="http://ratings.community.theplatform.com/rating/";var tpTotalRatingDataServicePrefix="http://totalratings.community.theplatform.com/totalrating/";var tpTagDataServicePrefix="http://tags.community.theplatform.com/tag/";var tpTotalTagDataServicePrefix="http://totaltags.community.theplatform.com/totaltag/";var tpCommentsDataServicePrefix="http://comments.community.theplatform.com/comment/";var tpUserListsDataServicePrefix="http://userlists.community.theplatform.com/userlist/";var tpUserProfilesDataServicePrefix="http://userprofiles.community.theplatform.com/userprofile/";var tpUserDataServicePrefix="https://euid.theplatform.com/idm/";var tpIdentityServicePrefix="https://euid.theplatform.com/idm/";var tpAccessServicePrefix="http://enduser.access.auth.theplatform.com/access/";
// /lib/communityManager.js from ui
var tpMediaDataServicePath="data/Media";var tpRatingMetadataServicePath="metadata/Rating";var tpTotalRatingMetadataServicePath="metadata/TotalRating";var tpTagMetadataServicePath="metadata/Tag";var tpTotalTagMetadataServicePath="metadata/TotalTag";var tpCommentDataServicePath="data/Comment";var tpUserListDataServicePath="data/UserList";var tpUserProfileMetadataServicePath="metadata/UserProfile";var tpUserDataServicePath="data/User";var j$=jQuery.noConflict();CommunityManager=function(){this._initialize.apply(this,arguments)};CommunityManager.index=1;CommunityManager.prototype={_initialize:function(D,F,E,B,C,A){if(D==null||D.length==0){alert("You need to provide the Account URI.");return false}else{this.accountURI=D}if(F==null||F.length==0){this.anonymousUser=true;this.userContext=null}else{if(F.lastIndexOf("/")<(F.length-1)){F+="/"}this.anonymousUser=false;this.userContext=F}this.scriptID="CommunityManager"+CommunityManager.index++;if(typeof E!="undefined"&&E!=null){this.ratingID=E;tpCommunityWidgetManager.registerWidgetDiv(tpCommunityWidgetManager.ratingWidgetTypeName,E)}if(typeof B!="undefined"&&B!=null){this.commentsID=B;tpCommunityWidgetManager.registerWidgetDiv(tpCommunityWidgetManager.commentWidgetTypeName,B)}if(typeof C!="undefined"&&C!=null){this.tagsID=C;tpCommunityWidgetManager.registerWidgetDiv(tpCommunityWidgetManager.tagWidgetTypeName,C)}if(typeof A!="undefined"&&A!=null){this.profileID=A;tpCommunityWidgetManager.registerWidgetDiv(tpCommunityWidgetManager.profileWidgetTypeName,A)}this.isAuthenticated=false},getRatingDivID:function(){return this.ratingID},getCommentsDivID:function(){return this.commentsID},getTagsDivID:function(){return this.tagsID},getProfileDivID:function(){return this.profileID},_userProfile:undefined,_setProfileEvents:[],registerForProfileChange:function(A){this._setProfileEvents.push(A)},getProfile:function(){return this._userProfile},setProfile:function(B){this._userProfile=B;if(this._setProfileEvents.length>0){for(var A=0;A<this._setProfileEvents.length;A++){this._setProfileEvents[A](B)}}},clearProfile:function(){this.setProfile(undefined)},_signInEvents:[],_signOutEvents:[],registerForAuthentication:function(A,B){switch(B||""){case"signIn":this.registerForSignIn(A);break;case"signOut":this.registerForSignOut(A);break;default:this.registerForSignIn(A);this.registerForSignOut(A);break}},registerForSignIn:function(A){this._signInEvents.push(A)},registerForSignOut:function(A){this._signOutEvents.push(A)},signIn:function(B,A,D){var C={username:this.userContext+B,password:A};if(D){this.secondarySignInCallback=D}else{this.secondarySignInCallback=undefined}this._signInTimeoutInterval=setInterval(this._signInTimeout.bindTo(this),5000);this._makeJsonServiceCall(C,tpIdentityServicePrefix+"JSON/Authentication/1.0/signIn","1.0",null,this._signInCallback.bindTo(this))},_signInTimeout:function(){clearInterval(this._signInTimeoutInterval);if(this.secondarySignInCallback){this.secondarySignInCallback({isException:true,message:"Sign in is not currently available."})}},_signInCallback:function(A){clearInterval(this._signInTimeoutInterval);if(this.isException(A)!=true){this.isAuthenticated=true;this.token=A.token;if(A.idleTimeout>0){this.tokenRefreshInterval=setInterval(this._refreshToken.bindTo(this),A.idleTimeout)}else{clearInterval(this.tokenRefreshInterval)}this._getSelfID(this._getSelfIDCallback.bindTo(this))}else{if(this.secondarySignInCallback){this.secondarySignInCallback(A)}}},_getSelfID:function(B){var A={token:this.token};this._makeJsonServiceCall(A,tpIdentityServicePrefix+"JSON/Self/1.0/getSelfID","1.0",null,B||this.errorHandler.bindTo(this))},extractUserName:function(A){return A.substring(A.lastIndexOf("/")+1,A.length)},_getSelfIDCallback:function(A){if(!this.isException(A)){this.selfID=A.userID;this.userName=this.extractUserName(this.selfID);if(this._signInEvents.length>0){for(var B=0;B<this._signInEvents.length;B++){this._signInEvents[B](A)}}}if(this.secondarySignInCallback){this.secondarySignInCallback(A)}},_refreshToken:function(){this.getSelfID()},signInWithToken:function(A){this.token=A},signOut:function(B){var A={token:this.token};this.token=undefined;this.selfID=undefined;this.isAuthenticated=false;this.clearProfile();if(typeof B!="undefined"){this.secondarySignOutCallback=B}else{this.secondarySignOutCallback=undefined}this._makeJsonServiceCall(A,tpIdentityServicePrefix+"JSON/Authentication/1.0/signOut","1.0",null,this._signOutCallback.bindTo(this));clearInterval(this.tokenRefreshInterval)},_signOutCallback:function(A){if(!this.isException(A)){if(this._signOutEvents.length>0){for(var B=0;B<this._signOutEvents.length;B++){this._signOutEvents[B](A)}}}if(this.secondarySignOutCallback){this.secondarySignOutCallback(A)}},authorize:function(A,B,D){var C={"operations[0].instance":A.instance||"*","operations[0].service":A.service||"Community Data Service","operations[0].method":A.method||"*","operations[0].endpoint":A.endpoint||"*"};if(typeof this.token!="undefined"){this._makeJsonServiceCall(C,B+"JSON/Authorization/1.0/authorize",null,"",D,true)}else{this._makeJsonServiceCall(C,B+"JSON/Authorization/1.0/authorize",null,"",D,false)}},addTag:function(D,B,A,E,C){var F={aboutID:D,value:B};this._makeJsonServiceCall(F,E+tpTagMetadataServicePath,null,"create",C||this.errorHandler.bindTo(this))},addRating:function(D,C,A,E,B){var F={aboutID:D,value:C};this._makeJsonServiceCall(F,E+tpRatingMetadataServicePath,null,"create",B||this.errorHandler.bindTo(this))},addComment:function(E,D,H,C,A,F,B){var G={aboutID:E,text:H,userName:D};if(C!=null&&C.length>0){G.url=C}this._makeJsonServiceCall(G,F+tpCommentDataServicePath,null,"create",B||this.errorHandler.bindTo(this))},addUserList:function(D,E,C,A,F,B){var G={itemIDs:C,name:D,context:E};this._makeJsonServiceCall(G,F+tpUserListDataServicePath,null,"create",B||this.errorHandler.bindTo(this))},addUserProfile:function(B,E,D,A,F,C){var G={avatar:D,displayName:B,publicData:"{url:'"+E+"'}"};this._makeJsonServiceCall(G,F+tpUserProfileMetadataServicePath,null,"create",C||this.errorHandler.bindTo(this))},updateUserProfile:function(B,E,D,A,F,C){var G={avatar:D,displayName:B,publicData:"{url:'"+E+"'}"};this._makeJsonServiceCall(G,F+tpUserProfileMetadataServicePath,null,"update",C||this.errorHandler.bindTo(this))},updateUserList:function(F,D,E,C,A,G,B){var H={ID:F,itemIDs:C,name:D,context:E};this._makeJsonServiceCall(H,G+tpUserListDataServicePath,null,"update",B||this.errorHandler.bindTo(this))},getTags:function(B,A,C,E){var D={byAboutID:B,fields:"value",sortFields:"value"};this._makeJsonServiceCall(D,C+tpTagMetadataServicePath,A,null,E)},getRating:function(B,A,C,E){var D={byAboutID:B,fields:"value"};this._makeJsonServiceCall(D,C+tpRatingMetadataServicePath,A,null,E)},getComment:function(B,A,D){var C={fields:"ID,lastModified,userName,url,text,addedByUserID,approved"};this._makeJsonServiceCall(C,B,A,null,D)},getComments:function(C,A,D,G,F,B){var E={byAboutID:C,byApproved:"true",fields:"ID,added,userName,url,text,addedByUserID",sortFields:"added",sortDescending:"true"};if(typeof F!="undefined"&&F!=null){E.startIndex=F;E.listInfo=true}if(typeof B!="undefined"){E.endIndex=B;E.listInfo=true}this._makeJsonServiceCall(E,D+tpCommentDataServicePath,A,null,G)},getTotalTags:function(B,A,C,E){var D={byAboutID:B,fields:"count,value,lastModified",sortFields:"value"};this._makeJsonServiceCall(D,C+tpTotalTagMetadataServicePath,A,null,E)},getTotalTagsByValue:function(B,A,C,E){var D={byValue:this.unsanitize(B,true),fields:"aboutID",sortFields:"lastModified",sortDescending:true,startIndex:1,endIndex:500};this._makeJsonServiceCall(D,C+tpTotalTagMetadataServicePath,A,null,E)},getTotalRating:function(B,A,C,E){var D={byAboutID:B,fields:"average,count"};this._makeJsonServiceCall(D,C+tpTotalRatingMetadataServicePath,A,null,E)},getTopRatings:function(A,B,D){var C={fields:"aboutID",sortFields:"average",sortDescending:true,startIndex:1,endIndex:500};this._makeJsonServiceCall(C,B+tpTotalRatingMetadataServicePath,A,null,D)},getUserList:function(B,A,C,E){var D={byContext:B,fields:"ID,itemIDs"};this._makeJsonServiceCall(D,C+tpUserListDataServicePath,A,null,E)},getUserProfile:function(B,A,C,E){var D={byAboutID:B,fields:"avatar,displayName,publicData,aboutID"};this._makeJsonServiceCall(D,C+tpUserProfileMetadataServicePath,A,null,E)},getUserProfiles:function(B,A,C,E){var D={fields:"avatar,displayName,publicData,aboutID"};this._makeJsonServiceCall(D,C+tpUserProfileMetadataServicePath+"?"+B,A,null,E)},deleteTag:function(C,A,D,B){var E={byValue:A,byAboutID:C};this._makeJsonServiceCall(E,D+tpTagMetadataServicePath,null,"delete",B||this.errorHandler.bindTo(this))},deleteComment:function(C,A,D,B){var E={};this._makeJsonServiceCall(E,C,null,"delete",B||this.errorHandler.bindTo(this))},_makeJsonServiceCall:function(D,C,B,F,E,A){if(typeof A=="undefined"){A=true}if(!this.anonymousUser&&typeof this.token!="undefined"){D.token=this.token}if(A){D.account=this.accountURI}D.type="json";if(B!=null&&B.length>0){D.version=B}if(F!=null&&F.length>0){D.method=F}C+=(C.indexOf("?")!=-1?"&":"?")+"callback=?";return j$.getJSON(C,D,E)},_errors:[],errorHandler:function(A){if(A!=null){if(A.isException==true){this._errors.push(A);if(typeof this._customErrorHandler=="undefined"){alert(A.type+": "+A.message)}else{this._customErrorHandler(A)}}else{if(typeof A=="string"){alert(A)}}}},isException:function(A){return(A!=null&&typeof A.isException!="undefined")?Boolean(A.isException):false},sanitize:function(C,B){var A=C.replace(/&/g,"&amp;");var A=A.replace(/>/g,"&gt;");var A=A.replace(/</g,"&lt;");if(B){A=A.replace(/ /g,"&nbsp;")}return A},unsanitize:function(A,C){var B=A.replace(/&amp;/g,"&");var B=B.replace(/&gt;/g,">");var B=B.replace(/&lt;/g,"<");if(C){B=B.replace(/&nbsp;/g," ")}return B},getContentIndex:function(A){if(typeof A.data.clips!="undefined"){for(var B=0;B<A.data.clips.length;B++){if(A.data.baseClips[B].isAd==false){return B}}}return -1},setContentIDs:function(D){var C="";var H=tpMediaDataServicePrefix+"data/Media/";if(typeof D!="undefined"&&typeof D.length!="undefined"&&D.length>0){contentIDCount=0;for(var F in D){var G=D[F].aboutID;var B=G.indexOf(H);if(B==0){var A=G.substr(B+H.length,G.length-H.length);var E=true;for(i=0;i<A.length;i++){if(A.charAt(i)<"0"||A.charAt(i)>"9"){E=false;break}}if(E){if(C.length==0){C=A}else{C+=","+A}if(++contentIDCount==100){break}}}}}else{C="0"}tpController.refreshReleaseModel("","",null,null,null,["query=ContentIDs|"+C])},_uriPattern:undefined,isUri:function(A){if(this._uriPattern==undefined){this._uriPattern=new RegExp();this._uriPattern.compile("^(http|https)://[A-Za-z0-9]+")}return this._uriPattern.test(A)}};DomFragment=function(C,A){if(typeof C=="string"){var B=document.createElement(C)}else{var B=C}if(typeof A!="undefined"){for(p in A){if(typeof A[p]=="object"){if(typeof B[p]=="undefined"&&p!="toAppend"){B[p]=A[p]}else{if(p=="toAppend"){B._cFrag={};for(ta in A[p]){if(typeof A[p][ta].appendChild!="undefined"){B.appendChild(A[p][ta]);B._cFrag[ta]=A[p][ta]}else{if(typeof A[p][ta][0]!="undefined"){for(i=0;i<A[p][ta].length;i++){if(typeof A[p][ta][0].appendChild!="undefined"){B.appendChild(A[p][ta][0]);B._cFrag[ta]=A[p][ta][0]}}}}}}else{for(np in A[p]){B[p][np]=A[p][np]}}}}else{if(p.toLowerCase()!="class"){B[p]=A[p]}else{B.className=A[p]}}}}return B};Function.prototype.bindTo=function(A){var B=this;return function(){return B.apply(A,arguments)}};
// /lib/communityConnect.js from ui
jQuery(document).ready(function(){if(typeof window.tpCommunityManager!="undefined"){return}if(typeof document.config.tPCommunityAccount!="undefined"&&document.config.tPCommunityAccount!==""&&document.config.tPCommunityAccount=="prod"){window.tpCommunityManager=new CommunityManager("http://mps.theplatform.com/data/Account/710029972","ymoYzncm")}else{window.tpCommunityManager=new CommunityManager("http://mps.theplatform.com/data/Account/735560896","I68ClApz")}});
// /lib/swfobject.js from ui
if(typeof deconcept=="undefined"){var deconcept={}}if(typeof deconcept.util=="undefined"){deconcept.util={}}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil={}}deconcept.SWFObject=function(K,B,L,D,H,I,F,E,C,J){if(!document.getElementById){return }this.DETECT_KEY=J?J:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params={};this.variables={};this.attributes=[];if(K){this.setAttribute("swf",K)}if(B){this.setAttribute("id",B)}if(L){this.setAttribute("width",L)}if(D){this.setAttribute("height",D)}if(H){this.setAttribute("version",new deconcept.PlayerVersion(H.toString().split(".")))}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs)};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true}}if(I){this.addParam("bgcolor",I)}var A=F?F:"high";this.addParam("quality",A);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var G=(E)?E:window.location;this.setAttribute("xiRedirectUrl",G);this.setAttribute("redirectUrl","");if(C){this.setAttribute("redirectUrl",C)}};deconcept.SWFObject.prototype={useExpressInstall:function(A){this.xiSWFPath=!A?"expressinstall.swf":A;this.setAttribute("useExpressInstall",true)},setAttribute:function(A,B){this.attributes[A]=B},getAttribute:function(A){return this.attributes[A]||""},addParam:function(B,A){this.params[B]=A},getParams:function(){return this.params},addVariable:function(B,A){this.variables[B]=A},getVariable:function(A){return this.variables[A]||""},getVariables:function(){return this.variables},getVariablePairs:function(){var C=[];var B;var A=this.getVariables();for(B in A){C[C.length]=B+"="+A[B]}return C},getSWFHTML:function(){var B="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath)}B='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+(this.getAttribute("style")||"")+'"';B+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var F=this.getParams();for(var E in F){B+=[E]+'="'+F[E]+'" '}var D=this.getVariablePairs().join("&");if(D.length>0){B+='flashvars="'+D+'"'}B+="/>"}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath)}B='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+(this.getAttribute("style")||"")+'">';B+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var C=this.getParams();for(var E in C){B+='<param name="'+E+'" value="'+C[E]+'" />'}var A=this.getVariablePairs().join("&");if(A.length>0){B+='<param name="flashvars" value="'+A+'" />'}B+="</object>"}return B},write:function(B){if(this.getAttribute("useExpressInstall")){var A=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(A)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title)}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var C=(typeof B=="string")?document.getElementById(B):B;C.innerHTML=this.getSWFHTML();return true}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"))}}return false}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var E=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var A=navigator.plugins["Shockwave Flash"];if(A&&A.description){E=new deconcept.PlayerVersion(A.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."))}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var B=1;var C=3;while(B){try{C++;B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+C);E=new deconcept.PlayerVersion([C,0,0])}catch(D){B=null}}}else{try{var B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(D){try{var B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");E=new deconcept.PlayerVersion([6,0,21]);B.AllowScriptAccess="always"}catch(D){if(E.major==6){return E}}try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(D){}}if(B!=null){E=new deconcept.PlayerVersion(B.GetVariable("$version").split(" ")[1].split(","))}}}return E};deconcept.PlayerVersion=function(A){this.major=A[0]!=null?parseInt(A[0]):0;this.minor=A[1]!=null?parseInt(A[1]):0;this.rev=A[2]!=null?parseInt(A[2]):0};deconcept.PlayerVersion.prototype.versionIsValid=function(A){if(this.major<A.major){return false}if(this.major>A.major){return true}if(this.minor<A.minor){return false}if(this.minor>A.minor){return true}if(this.rev<A.rev){return false}return true};deconcept.util={getRequestParameter:function(C){var D=document.location.search||document.location.hash;if(C==null){return D}if(D){var B=D.substring(1).split("&");for(var A=0;A<B.length;A++){if(B[A].substring(0,B[A].indexOf("="))==C){return B[A].substring((B[A].indexOf("=")+1))}}}return""}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var B=document.getElementsByTagName("OBJECT");for(var C=B.length-1;C>=0;C--){B[C].style.display="none";for(var A in B[C]){if(typeof B[C][A]=="function"){B[C][A]=function(){}}}}};if(!document.getElementById&&document.all){document.getElementById=function(A){return document.all[A]}}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;
// /lib/flashbrowserstore.js from ui
var fbs={available:false,successVal:"saveSucceeded",fbsInit:false,initCtr:0,init:function(a,d){a=a||"store";d=d||"fbs.testSuccess";var c=this.getEmbeddedSWF(a);if(c){try{console.log("trying to save data");c.saveData("fbsTest","success",d);console.log("embedded swf exists & allows access to saveData")}catch(b){console.log("embedded swf exists but won't allow access to saveData!");if(!fbs.fbsInit&&!tvGridFav.initCalled){if(fbs.initCtr<9){fbs.initCtr++;console.log("attempt "+fbs.initCtr+" to access saveData");setTimeout(function(){fbs.init(a,d)},100)}else{console.log("giving up");tvGridFav.fbsInitFail()}}}}else{console.log("embedded swf does not exist!");tvGridFav.fbsInitFail()}},testSuccess:function(a){if(a==this.successVal){this.available=true}},getEmbeddedSWF:function(a){return $(a)},saveToSO:function(a,b,d){d=d||"fbs.handleSaveCallBack";var c=this.getEmbeddedSWF("store");console.log("attempting to store "+b+" as the value for "+a);c.saveData(a,b,d)},getFromSO:function(a,c){c=c||"fbs.showValue";var b=this.getEmbeddedSWF("store");console.log("attempting to get "+a);b.getData(a,c)},handleSaveCallBack:function(a){if(a==this.successVal){console.log("Data Saved")}else{console.log("Data NOT Saved: "+a)}},showValue:function(a){console.log("-->"+a)}};
// /lib/core.js from ui
function addLoadEvent(a){addEvent(window,"ondomloaded",a)}addLoadEvent(function(){document.config.debugConsole=false;if(typeof console=="undefined"){window.console={log:function(){},info:function(){},warn:function(){},error:function(){}}}window.addLoadEvent=function(a){a()}});function stripComments(e){var b=/\n/g;e=e.replace(b,"");var d=/^\/\*(.*)\*\/$/i;var a=d.exec(e);var c=false;if(a&&a.length){c=a[1]}return c}function echeck(e){var c=/^(\w|[_.-])+@\w+(\.|-|\w)+$/i;var a=/^.+\.(\w{2}|(com|net|org|edu|int|mil|gov|arpa|biz|aero|name|coop|info|pro|museum))$/i;var b=/^.+@ovm\.comcast\.net$/i;var d=/\.{2}|-{2}|^\.|\.@/i;return !(e.length>100||(e.length>0&&(!a.test(e)||!c.test(e)||b.test(e)||d.test(e))))}(function(){var domloaded=false;var timer;var init=function(){if(domloaded){return}domloaded=true;if(timer){clearInterval(timer)}if(window.ondomloaded){window.ondomloaded()}};if(document.addEventListener){document.addEventListener("DOMContentLoaded",init,false);
/*@cc_on @*/
/*@if (@_win32)
    document.write("<script id=\"__ie_onload\" defer=\"defer\" src=\"javascript:void(0)\"><\/script>");
    var script = document.getElementById("__ie_onload");
    script.onreadystatechange = function() {
      //if (this.readyState == "complete") init();
    }
  /*@end @*/
}if(is_safari){timer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){init()}},10)}window.onload=init})();function addEvent(b,a,c){var d=b[a]||function(){return};b[a]=function(){d();c()}}function cancelEvent(a){if(a===false){return false}a=window.event?window.event:a;if(!a){return false}a.cancelBubble=true;a.returnVal=false;return false}function cancelTrackEvent(a){a=window.event?window.event:a;if(typeof s!="undefined"){s.bc(a)}return cancelEvent(a)}function getPackageContext(d){var a=document.config.dataPackageContext.split("/");var c=(d||"").split("/");a.pop();for(var b=0;b<c.length;b++){if(c[b]==".."){a.pop()}else{if(c[b]=="."){}else{if(c[b]!==""){a.push(c[b])}}}}a.push("doc.xml");return a.join("/")}Object.extend(window,(function(){var a={};function c(f,e){if(typeof a[f]=="undefined"){a[f]=0}var d=a[f];a[f]+=e;return d===0||a[f]===0}function b(e,d){d._each(function(f){if(Element.hasClassName(f.parentNode.parentNode,"ad")&&f.nodeName.toLowerCase()=="iframe"){f.style.position=e?"static":"relative";f.style.left=e?"0":"-9999px"}else{f.style.visibility=e?"visible":"hidden"}})}return{setAdVisibility:function(e){if(!c("ads",e?-1:1)){return}var f=jQuery("div.ad iframe");var d=$A(f);b(e,d);d=$A(document.getElementsByTagName("select")).findAll(function(g){return Element.hasClassName(g,"hideUnderMore")});b(e,d);d=$A(document.getElementsByTagName("embed")).findAll(function(g){return(Element.hasClassName(g.parentNode.parentNode,"ad")||Element.hasClassName(g.parentNode,"ad_pad")||Element.hasClassName(g.parentNode.parentNode,"ad_pad"))});b(e,d);d=$A(document.getElementsByTagName("object")).findAll(function(g){return(Element.hasClassName(g.parentNode.parentNode,"ad")||Element.hasClassName(g.parentNode,"ad_pad")||Element.hasClassName(g.parentNode.parentNode,"ad_pad"))});b(e,d);d=$A(document.getElementsByTagName("table")).findAll(function(g){return Element.hasClassName(g,"ad_slug_table")});b(e,d);if(d&&d.length>0){d=$A(d[0].parentNode.getElementsByTagName("object"))}b(e,d)},setCoverFlashVisibility:function(f){var e=$("cover");if(!e){return}if(!c("cover",f?-1:1)){return}var d=$A(e.getElementsByTagName("embed"));b(f,d)},setVideoVisibility:function(f){var d=$("inlinePlayerHolder")||$("video-player-holder")||$("videoPlayerContainer")||$("hdplayerdiv")||$("videoChannelPlayerContainer")||$("rss");if(!d){return}if(!c("inlinePlayer",f?-1:1)){return}var e=$A(d.getElementsByTagName("embed"));if(e.length===0){e=$A(d.getElementsByTagName("object"))}b(f,e)},setArticleFlashVisibility:function(f){var e=$("article");if(!e){return}if(!c("article",f?-1:1)){return}var d=$A(e.getElementsByTagName("embed"));if(d.length===0){d=$A(e.getElementsByTagName("object"));if(!d.length){return}}b(f,d)},setFlashVisibility:function(d){setAdVisibility(d);setCoverFlashVisibility(d);setVideoVisibility(d);setArticleFlashVisibility(d)}}})());function easyScrollTo(i,h,b,c){var a=c||function(k){};var f=b*0.02;var g=Animator.interpolate.linear(0,1,f);var d=new Animator(g,b);var e={};e.start={x:window.scrollX,y:window.scrollY};if(document.documentElement){e.start={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop}}e.factor={x:i-e.start.x,y:h-e.start.y};d.onupdate=function(m){var n=e,k=n.start,l=n.factor;window.scrollTo(k.x+m*l.x,k.y+m*l.y);return true};var j=function(k){easyScrollTo(e.start.x,e.start.y,b,k)};d.oncomplete=function(){a(j)};d.run();return j}function showOverlay(a){var b=new Window("loading");b.onshow=function(){easyScrollTo(0,0,250,function(d){win=a();if(win){var c=win.onhide;win.onhide=function(){c.apply(win);d()};win.show()}b.hide();if(typeof win=="undefined"||!win){d()}})};b.show()}function elapsedTimestamp(j,i){var e=60000;var n=e*60;var o=n*24;var b=function(q,p){return[q," ",p,(q==1)?"":"s"," ago"].join("")};var c=new Date(),g=new Date();var f=j.match(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.\d+)?(?:Z|([+-]?\d{2}):(\d{2}))/);if(!f){return i}var k=f[7]?parseInt(f[7],10):0;var l=f[8]?parseInt(f[8],10):0;g.setUTCFullYear(f[1]);g.setUTCMonth(f[2]-1);g.setUTCDate(f[3]);g.setUTCHours(parseInt(f[4],10)-k);g.setUTCMinutes(parseInt(f[5],10)-l);g.setUTCSeconds(f[6]);var m=c.getTime()-g.getTime();var d=Math.round(m/o);var a=Math.round(m/n);var h=Math.round(m/e);if(m<1*e){return"Seconds ago"}if(h<60){return b(h,"minute")}if(a<24){return b(a,"hour")}if(d<2){return b(d,"day")}return i}addLoadEvent(function(){window.__flash__removeCallback=function(a,b){if(typeof a!="undefined"){a[b]=null}}});addLoadEvent(function(){if(!is_ie){return}var b=Element.getByTagClass(document.body,"img","png");var a=/\/ui\/images\/lib\/blank\.gif/;b.each(function(c){if(!a.test(c.src)){c.runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c.src+"',sizingMethod='image')";c.src="/ui/images/lib/blank.gif"}})});(function(a){var b=function(e,c){for(var f=0;f<c.length;f++){var d=e.length;e[d]=c[f]}return e};if(typeof Function.prototype.context=="undefined"){Function.prototype.context=function(c){var d=this;return function(){return d.apply(c,arguments)}}}if(typeof Function.prototype.curry=="undefined"){Function.prototype.curry=function(){var d=this,c=arguments;return function(){return d.apply(this,b(c,arguments))}}}})(jQuery);jQuery(document).ready(function(){if(typeof $.cookie!="undefined"){$.cookie.remove("tosaccept")}var b=0;var a=setInterval(function(){if(b>=10){clearInterval(a)}else{b++}if(document.cookie.length>0){offset=document.cookie.indexOf("haf=1");if(offset!=-1){var d=document.getElementsByTagName("A");for(var c=0,e=d.length;c<e;c++){if(d[c].innerHTML=="Ad Feedback"){d[c].style.display="none"}}document.cookie="haf=1;domain=.comcast.net;path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT";clearInterval(a)}}},500)});var UserDataEvent={SUCCESS:"userdata_recieved",FAILURE:"userdata_failure"};var UserData=function(){this._uname=null;this._email=null;this._isHsi=false;this.fetchEmail()};jQuery.extend(UserData.prototype,{getUsername:function(){if(this._uname!==null&&this._uname.length>0){return this._uname}else{return null}},getEmail:function(){if(this._email!==null&&this._email.length>0){return this._email}else{return null}},isHsi:function(){return this._isHsi},_responseRecieved:function(a){var b=null;if(jQuery.browser.msie){b=new ActiveXObject("Microsoft.XMLDOM");b.async=false;b.loadXML(a)}else{b=a}this._uname=jQuery("userName",b).text();this._email=jQuery("userEmail",b).text();var c=jQuery("isHsiUser",b).text();(c=="yes")?this._isHsi=true:this._isHsi=false;jQuery(this).trigger(UserDataEvent.SUCCESS)},_errorRecieved:function(a){jQuery(this).trigger(UserDataEvent.FAILURE)},fetchEmail:function(){jQuery.ajax({type:"GET",url:"/user/authkey/service/sessiondecryption/",cache:false,success:this._responseRecieved.context(this),error:this._errorRecieved.context(this)})}});
// /lib/animator.js from ui
var Animator=Class.create();Object.extend(Animator.prototype,{initialize:function(b,a){this.frames=b||[];this.delay=b.length>0?(a/b.length):0;this.display_timer=null;this.onupdate=function(){return true};this.oncomplete=function(){return};this._bound_update_display=this._update_display.bind(this)},is_running:function(){return this.display_timer!==null},run:function(){this.start_time=this.is_running()?0:(new Date()).getTime();this._update_display()},stop:function(a){if(this.display_timer!==null){window.clearTimeout(this.display_timer)}this.display_timer=null;if(!a){this.show_frame(0);this.oncomplete.call(this)}},show_frame:function(a){a=Math.min(this.frames.length-1,Math.max(0,a));return this.onupdate.call(this,this.frames[a])},_update_display:function(){var b=(new Date()).getTime();var d=Math.round((b-this.start_time)/this.delay);var a=this.show_frame(d);var c=(d<this.frames.length-1);if(a&&c){this.display_timer=window.setTimeout(this._bound_update_display,this.delay)}else{this.display_timer=null;this.oncomplete.call(this)}}});Animator.interpolate={_base:function(a,d){var b=[];for(var c=0;c<=a;c++){b.push(d(c))}return b},linear:function(e,a,c){var b=a-e;var d=b/c;return Animator.interpolate._base(c,function(f){return f*d+e})},root:function(d,a,c){var b=a-d;return Animator.interpolate._base(c,function(e){return Math.sqrt(e/c)*b+d})}};
// /lib/tabs.js from ui
var SimpleTabs=Class.create();Object.extend(SimpleTabs.prototype,{initialize:function(){this.onchange=function(){return true};this.tab_ids=Array();this.current_id=0},setup:function(d){for(var b=0;b<this.tab_ids.length;b++){var c=$(this.tab_ids[b]);var a=c.getElementsByTagName("a")[0];if(a){a.onclick=this.update.bind(this,b)}}if(this.tab_ids.length>0){this.update(d)}},update:function(d,b,c){if(d===null||d===undefined){d=this.current_id}if(typeof(c)=="undefined"){c=false}if(!c){if(!this.onchange(d,this.tab_ids[d])){return false}}for(var a=0;a<this.tab_ids.length;a++){this.setState(a,(a==d))}this.current_id=d;cancelEvent(false);return false},setState:function(b,a){Element[a?"addClassName":"removeClassName"](this.tab(b),"active")},tab:function(a){return $(this.tab_ids[a])||false},tab_id:function(a){for(var b=0;b<this.tab_ids.length;b++){if(this.tab_ids[b]==a){return b}}return false}});var TabBar=Class.create();Object.extend(TabBar.prototype,SimpleTabs.prototype);Object.extend(TabBar.prototype,{_tracking:false,initialize:function(b,a){SimpleTabs.prototype.initialize.call(this);this.name=b;this.current_id=(typeof(a)=="number"&&a>=0)?a:0;for(var c=0;tab=$(this.name+"-tab"+c);c++){this.tab_ids[c]=tab.id}this._tracking=false;this.setup();this._tracking=true},setState:function(f,e){SimpleTabs.prototype.setState.call(this,f,e);var a=this.panel(f);if(!a){return}if(e){a.style.display="block";if(this._tracking){var c=this.tab(f);var b=TrackingNode.collectData(c);if(typeof b.pageName=="undefined"||typeof b.module=="undefined"||typeof b.tabText=="undefined"){return}Tracking.resetVars();var d={events:"event13",hier4:TrackingNode.build_hierarchy([b.module[0],b.pageName[0],"tab",b.tabText[0]]),eVar12:[b.pageName[0],b.module[0]+" module",b.tabText[0]+" tab"].join("-")};Tracking.setData(d);s.tl(false,"o",d.eVar12);Tracking.resetVars()}}else{a.style.display="none"}},panel:function(a){return $(this.name+"-panel"+a)||false}});
// /lib/shader.js from ui
var Shader={_opacity:0,_shade:null,initialize:function(){this._shade=document.createElement("div");this._shade.id="shade";this._shade.onclick=function(b){if(Window){Window.hide_all()}return cancelEvent(b)};var a=document.getElementById("loading");if(a){a.parentNode.insertBefore(this._shade,a)}else{document.body.appendChild(this._shade)}addEvent(window,"onresize",function(){Shader._shade.style.height=parseInt(document.body.offsetHeight,10)+"px"})},change:function(c,f,e){var d=e||function(){return};var b=Math.max(parseInt(f*0.015,10),1);var g=Animator.interpolate.linear(this._opacity,c,b);var a=new Animator(g,f);a.onupdate=function(h){Element.setOpacity(Shader._shade,h);Shader._opacity=h;return true};a.oncomplete=function(){if(Shader._opacity===0){Shader._shade.style.display="none";setAdVisibility(true);setCoverFlashVisibility(true);setVideoVisibility(true);setArticleFlashVisibility(true);if(Cover){Cover.run()}}d()};if(c!==0){setAdVisibility(false);setCoverFlashVisibility(true);setVideoVisibility(false);setArticleFlashVisibility(false);if(Cover){Cover.hold()}}window.onresize();this._shade.style.display="block";a.run()}};addLoadEvent(function(){Shader.initialize()});
// /lib/window.js from ui
var Window=Class.create();Object.extend(Window.prototype,{initialize:function(a,b){this.onclose=function(){return true};this.onshow=function(){return};this.onhide=function(){return};this.show_window=function(){this.window.style.display="block"};this.hide_window=function(){this.window.style.display="none"};this.window=$(a);this.close=$(b);this.visible=false;if(this.close){this.close.onclick=(function(){if(this.onclose()){this.hide()}return false}).bind(this)}},_update_display:function(){if(Window.state=="shading"){Window.pending_windows.push(this);return}if(this.visible){this.show_window();this.onshow()}else{this.hide_window();this.onhide()}},set_display:function(a){if(this.visible==a){return}this.visible=a;if(this.visible&&Window.state=="inactive"){Window.state="shading";Shader.change(0.75,250,Window.shader_complete)}this._update_display();if(this.visible){Window.active_windows.push(this)}else{var b=this;Window.active_windows=Window.active_windows.reject(function(c){return c==b})}if(Window.active_windows.length===0){Window.state="inactive";Shader.change(0,250)}},show:function(){this.set_display(true)},hide:function(){this.set_display(false)}});Window.active_windows=[];Window.pending_windows=[];Window.state="inactive";Window.shader_complete=(function(){Window.state="active";this.pending_windows._each(function(a){a._update_display()});this.pending_windows=[];Window.state=Window.active_windows.length>0?"active":"inactive"}).bind(Window);Window.hide_all=function(){this.active_windows._each(function(a){a.hide()})};
// /lib/handlers.js from ui
addLoadEvent(function(){var b=document.getElementsByTagName("a");var c;for(c=0;c<b.length;c++){assign_handlers(b[c])}var a=document.getElementsByTagName("form");var d=new RegExp("(^|\\s)newwindow(\\s|$)");for(c=0,l=a.length;c<l;c++){if(!a[c].className.match(d)){continue}a[c].setAttribute("target","_blank")}});function assign_handlers(b){if(b.rel===""||!b.rel){return}var j="",m=b.rel;var g=[(/^\s*(\w+)\((.*?)\)/),/^\s*(\w+)/];var d=[],f=[];while(m.length>0&&m!=j){var k,e=null;for(var c=0;c<g.length&&!e;c++){k=g[c];e=m.match(k)}j=m;m=m.replace(k,"");if(!e){continue}var a="handle_"+e[1];var h=e.length>2?e[2].split(/,\s*/):[];if(e.length>2&&e[2].match(/,$/)&&is_ie){h.push("")}if(typeof window[a]=="undefined"){continue}d.push(a);f.push(h)}delete g;delete m;if(d.length===0){return}b.onclick=function(q){var r=true;var o=window.event?window.event:q;for(var p=0;p<d.length;p++){var u=d[p];o.ret_val=r;var t=[o].concat(f[p]);var n=window[u].apply(b,t);if(typeof n!="undefined"){r=r&&n}}return r}}function handle_track(a,b){if(typeof s=="undefined"){return}if(a.ret_val==false){Tracking.resetVars();s.tl(this,"o",b)}}function handle_track_load(a,b){if(typeof s=="undefined"){return}Tracking.resetVars();s.tl(this,"o",b);document.location=this.href;return cancelEvent(a)}function handle_slideshow(a){a=a||window.event;var d=Event.findElement(a,"a");var e=d.getAttribute("href");var c=arguments[1]||0;var b=false;if(!e.match(/slideshow\/view/)){return true}if(arguments.length==3){b=arguments[1].split(".");c=arguments[2]||0}showOverlay(function(){return SlideshowWindow.create_window(c,"slideshow",b,e)});return cancelEvent(a)}function handle_photooftheday(a){showOverlay(function(){return SlideshowWindow.create_window(0,"photooftheday")});return cancelEvent(a)}function handle_feedback(a){showOverlay(function(){return FeedbackWindow.create_window()});return cancelEvent(a)}function handle_adfeedback(a,d,b){a=a||window.event;var c=(a.srcElement)?a.srcElement:a.target;c=c.parentNode.parentNode;showOverlay(function(){return AdFeedbackWindow.create_window(d,c)});return cancelEvent(a)}function handle_emailthis(a){showOverlay(function(){return EmailthisWindow.create_window()});return cancelEvent(a)}function handle_remoteapp(m,d,c,e,h,i,j,k,g,a,f){var b=this.id;if(a=="true"){b="dvrfirstuse"}showOverlay(function(){return RemoteDVRWindow.create_window(b,d,c,e,h,i,j,k,g,f)});return cancelEvent(m)}function handle_dvrnav(a){thetab=this.parentNode.id;RemoteDVRWindow.set_tabs(thetab)}function handle_onetimedetails(k,r,t,d,n,a,e,u,b,g,f,q,p,m,h,c,j){therow=this.parentNode.id;allrows=jQuery(".listing-row");for(var o=0;o<allrows.length;o++){Element.removeClassName(allrows[o],"active");anchor=jQuery(allrows[o]).find("a.record-title")[0];jQuery(anchor).css("color","")}Element.addClassName(therow,"active");RemoteDVRWindow.onetimedetails(r,t,d,n,a,e,u,b,g,f,q,p,m,h,c,j);return cancelEvent(k)}function handle_rdvraccordion(a){RemoteDVRWindow.rdvraccordion(this);return cancelEvent(a)}function handle_moreservices(a){toggleServices();return cancelTrackEvent(a)}function handle_dashboard(a){return toggleDashboard.call(this)?handle_track.call(this,a):cancelTrackEvent(a)}function handle_assistant(a){toggleAssistant();return cancelEvent(a)}var poppedCalendar=false;function handle_calendar(a){var b=$(this.className);if(b){if(Element.hasClassName(b,"poppedCal")){Element.removeClassName(b,"poppedCal")}else{hide_calendars();Element.addClassName(b,"poppedCal");poppedCalendar=b}addEvent(document.body,"onclick",hide_calendars)}return cancelEvent(a)}function hide_calendars(){if(poppedCalendar){Element.removeClassName(poppedCalendar,"poppedCal")}}var openDropDown=false;function handle_dropdown(a){var b=this;while(b.nodeName!="DL"&&b.nodeName!="BODY"){b=b.parentNode}if(b.nodeName=="DL"){if(Element.hasClassName(b,"open")){Element.removeClassName(b,"open")}else{Element.addClassName(b,"open");openDropDown=b}addEvent(document.body,"onclick",hide_dropdown);return cancelEvent(a)}}function hide_dropdown(){if(openDropDown){Element.removeClassName(openDropDown,"open")}}var defaultFeatures="scrollbars=no,status=no,location=no,toolbar=no,favorites=no,address=no,menubar=no,resizable=yes";var fanFeatures=defaultFeatures+",width=930,height=800";var askFeatures="scrollbars=yes,status=yes,location=no,toolbar=no,favorites=no,address=no,menubar=no,resizable=yes,width=480,height=451";var chatFeatures=defaultFeatures+",width=800,height=600,status=yes,toolbar=yes,scrollbars=yes";var radioFeatures="status=no,resizeable=no,scrollbars=no,toolbar=no,menubar=no,hotkeys=no,width=270,height=395";function handle_fan(a){if(hasRightVersion){window.open(this.href,"fan",fanFeatures);return cancelEvent(a)}else{document.location.href="http://www.comcast.net/flash/"}}function handle_ask(a){window.open(this.href,"ask",askFeatures);return cancelEvent(a)}function handle_chat(a){window.open(this.href,"chat",chatFeatures);return cancelEvent(a)}function handle_radio(a){window.open(this.href,"radio",radioFeatures);return cancelEvent(a)}function handle_external(){this.setAttribute("target","_blank")}function handle_signin(){newhref=this.getAttribute("href")+"?redirectUrl="+document.location;this.setAttribute("href",newhref)}function handle_signout(){deleteCookie("bunchball");newhref=this.getAttribute("href")+"?redirectUrl="+document.location;this.setAttribute("href",newhref)}function handle_email(){this.setAttribute("target","_blank")}function handle_print(a){this.setAttribute("target","_blank")}function handle_abcnewsnow(a){window.open(this.href,"abcnewsnow",defaultFeatures+",width=521,height=520");return cancelTrackEvent(a)}function handle_yahooNhlPlayer(a){window.open(this.href,"yahooNhlPlayer",defaultFeatures+",width=792,height=666");return cancelEvent(a)}function handle_hdcarousel(a,d,b){var c=getFlashMovie("inlineplayer");if(c){c.updateContent(d,b);easyScrollTo(0,172,500);return cancelEvent(a)}return true}function getFlashMovie(b){var a=navigator.appName.indexOf("Microsoft")!=-1;return(a)?window[b]:document[b]}function handle_rhapsody(a,b){if(typeof RhapsodyPlayer=="undefined"){return true}if(typeof b=="undefined"){b=(document.location.hash+"").split("#")[1]}RhapsodyPlayer.playRcid(b);return cancelEvent(a)}function handle_sethomepage(a){if(is_ie){this.setHomePage("http://www.comcast.net");return cancelEvent(a)}if(is_safari){location.href="/sethomesafari/";return cancelEvent(a)}toggle_hp(this.parentNode);return cancelEvent(a)}function toggle_hp(b,c){if(typeof c=="undefined"){c=Element.hasClassName(b,"active")}var a=$(b.id+"-container");if(a){a.style.display=c?"none":"block"}b.className=c?"":"active"}addLoadEvent(function(){var b=document.getElementsByTagName("a");for(var c=0;c<b.length;c++){if(b[c].rel&&b[c].rel.indexOf("sethomepage")!=-1){var a=b[c].parentNode.id+"-container";a.onclick=function(d){cancelTrackEvent(d);return true};addEvent(document.body,"onclick",toggle_hp.bind(document.body,b[c].parentNode,true))}}});function handle_set_grid_exact_time(a,b){console.log(b);if(b=="NOW"){b=(new Date()).getTime()}tvGrid.build_grid(b);return cancelEvent(a)}function handle_set_grid_time(b,a){console.log(a);tvGrid.time_update_grid(a);return cancelEvent(b)}function handle_set_grid_filter(a,c){var d=(a.srcElement)?a.srcElement:a.target;console.log(c);if(c.toLowerCase()=="all"||c==tvGrid.filter){jQuery("#gridfilter-capsule dd a:not(#gridfilter-all)").parent().removeClass("active");jQuery(d).parent().addClass("active");tvGrid.filter_update_grid(c);if(c.toLowerCase()=="all"){return cancelEvent(a)}}else{jQuery("#gridfilter-capsule dd a").parent().removeClass("active");jQuery("#gridfilter-capsule dd a:not(#gridfilter-all)").each(function(){var f=jQuery(this).attr("title");f=f.replace("Deactivate","Activate");jQuery(this).attr("title",f)})}var e=jQuery(d).attr("title");var b="Ac";if(e.match(/^Activate\b/)){b="Deac"}e=e.replace(/^(Ac|Deac)(?=tivate\b)/,b);jQuery(d).attr("title",e);jQuery(d).parent().toggleClass("active");if(c!="ALL"){if(jQuery(d).parent().hasClass("active")){jQuery("#gridfilter-all").parent().removeClass("active")}else{jQuery("#gridfilter-all").parent().addClass("active")}}tvGrid.filter_update_grid(c);return cancelEvent(a)}function closePlaxoShare(a){Element.removeClassName(a.parentNode,"poppedShare")}function handle_plaxoshare(a){closePlaxoShare(this);var b=CIM.user.getNow(["isLoggedIn"]);if(b.isLoggedIn){shareWidget.openPopup(true);return cancelEvent(a)}else{this.setAttribute("target","_blank");this.setAttribute("href",this.getAttribute("anonHref"))}}function handle_closeplaxoshare(a){closePlaxoShare(this);return cancelEvent(a)};
// /lib/manglers.js from ui
addLoadEvent(function(){var b=document.getElementsByTagName("a");var c;for(c=0;c<b.length;c++){mangle_link(b[c])}var a=document.getElementsByTagName("form");for(c=0;c<a.length;c++){mangle_form(a[c])}});function mangle_link(c){if(typeof c.href!="undefined"){var a=c.href;for(var b=0;b<Mangler.list.length;b++){a=Mangler.list[b].apply(a)}c.href=a}}function mangle_form(b){if(typeof b.action!="undefined"){var c=b.action;for(var a=0;a<Mangler.list.length;a++){c=Mangler.list[a].apply(c)}b.action=c}}var Mangler=Class.create();Object.extend(Mangler.prototype,{initialize:function(a,b){this.re=a;this.func=b;Mangler.list.push(this)},apply:function(b){var a=b+"";return this.re.test(a)?this.func(a):a}});Mangler.list=[];new Mangler({re:/^https{0,1}:\/\/(www.)?fancast.com/,test:function(a){return readCookie("session@comcast.net")!==null&&this.re.test(a)}},function(a){if(document.config.fancastSSO===""||document.config.fancastIsXTV=="true"){return a}var b=a.match(/https?:\/\/(.*?)(\/.*)/);if(!b){return a}return document.config.fancastSSO+"&TARGET="+encodeURI(b[2])});new Mangler(/\/(music|entertainment|sports|finance|tv|news)\/.*?\/slideshow\/view/,function(a){var b=a.match(/\/((music|entertainment|sports|finance|tv|news)\/.*)\/slideshow\/view/);return"/slideshow/"+b[1].replace(/\//g,"-")+"/"});
// /lib/flash.js from ui
var flash2Installed=false;var flash3Installed=false;var flash4Installed=false;var flash5Installed=false;var flash6Installed=false;var flash7Installed=false;var flash8Installed=false;var flash9Installed=false;var maxVersion=9;var actualVersion=0;var requiredVersion=7;var hasRightVersion=false;var jsVersion=1;var isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;var isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;jsVersion=1.1;if(isIE&&isWin){document.write('<SCRIPT LANGUAGE="VBScript"> \n');document.write("on error resume next \n");document.write('flash2Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.2"))) \n');document.write('flash3Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.3"))) \n');document.write('flash4Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.4"))) \n');document.write('flash5Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.5"))) \n');document.write('flash6Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.6"))) \n');document.write('flash7Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.7"))) \n');document.write('flash8Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.8"))) \n');document.write('flash9Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.9"))) \n');document.write("</SCRIPT> \n")}function detectFlash(){if(navigator.plugins){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var isVersion2=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var flashDescription=navigator.plugins["Shockwave Flash"+isVersion2].description;var flashVersion=parseInt(flashDescription.substring(16));flash2Installed=flashVersion==2;flash3Installed=flashVersion==3;flash4Installed=flashVersion==4;flash5Installed=flashVersion==5;flash6Installed=flashVersion==6;flash7Installed=flashVersion==7;flash8Installed=flashVersion==8;flash9Installed=flashVersion>=9}}for(var i=2;i<=maxVersion;i++){if(eval("flash"+i+"Installed")==true){actualVersion=i}}if(navigator.userAgent.indexOf("WebTV")!=-1){actualVersion=4}if(actualVersion<requiredVersion){}else{hasRightVersion=true}}function writeFlash(c,d,e,a,b,f){b=(b==null)?"#FFFFFF":b;f=(f==null)?"opaque":f;document.write("<object classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000' id='"+c+"' width='"+e+"' height='"+a+"'>");document.write('  <param name="allowScriptAccess" value="sameDomain" />');document.write("  <param name='movie' value='"+d+"'>");document.write("  <param name='wmode' value='"+f+"'>");document.write("  <param name='quality' value='high'>");document.write("  <param name='bgcolor' value='"+b+"'>");document.write("  <param name='menu' value='false'>");document.write("  <embed src='"+d+"' bgcolor='"+b+"' name='"+c+"' width='"+e+"' height='"+a+"' wmode='"+f+"' quality='high' menu='false' allowScriptAccess='sameDomain' type='application/x-shockwave-flash' pluginspage='http://www.macromedia.com/go/getflashplayer'></embed>");document.write("</object>")}detectFlash();
// /lib/prefs.js from ui
PrefStore={no_value:"No Value",not_implemented:"Not Implemented",commit:function(){throw this.not_implemented},get:function(a){throw this.not_implemented},set:function(a,b){throw this.not_implemented},remove:function(a){throw this.not_implemented}};CookieStore=Object.compose({},PrefStore,{_name:null,_longevity:null,_buffer:null,_read_cookie:function(){if(this._buffer!=null){return}var a=readCookie(this._name)||"";this._buffer=$H(a.split("&").inject({},function(d,c){var b=c.split("=");d[b[0]]=unescape(b[1]);return d}))},_write_cookie:function(){if(this._buffer==null){return}var a=this._buffer.collect(function(b){if(b.key==""){throw $continue}return[b.key,escape(b.value)].join("=")}).join("&");createCookie(this._name,a,this._longevity)},commit:function(){this._write_cookie();this._buffer=null},get:function(a){this._read_cookie();if(!this._buffer.keys().include(a)){throw this.no_value}return this._buffer[a]},set:function(a,b){this._read_cookie();this._buffer[a]=b},remove:function(a){this._read_cookie();this._buffer=this._buffer.reject(function(b){return b.key==a})}});PersistentCookieStore=Object.compose({},CookieStore,{_name:"prefs",_longevity:1000});SessionCookieStore=Object.compose({},CookieStore,{_name:"session_prefs",_longevity:null});ServerStore=Object.compose({},PrefStore,{commit:function(){PersistentCookieStore.commit()},get:function(a){PersistentCookieStore.get(a)},set:function(a,b){PersistentCookieStore.set(a,b)},remove:function(a){PersistentCookieStore.remove(a)}});Prefs={COOKIE:"persistent",SESSION_COOKIE:"session",SERVER:"server",_stores:{persistent:PersistentCookieStore,session:SessionCookieStore,server:ServerStore},_default_location:"persistent",_search_order:["persistent","session","server"],commit:function(){for(var b=0;b<this._search_order.length;b++){var a=this._search_order[b];this._stores[a].commit()}},get:function(name,fallback){var value;for(var i=0;i<this._search_order.length&&!value;i++){try{var location=this._search_order[i];value=this._stores[location].get(name)}catch(e){if(e!=PrefStore.no_value){throw e}}}if(value){try{return eval("("+value+")")}catch(e){}}return fallback},set:function(b,c,a){var a=a||this._default_location;var c=c.inspect?c.inspect():(c+"");this._stores[a].set(b,c);this.commit()},remove:function(b,a){var a=a||this._default_location;this._stores[a].remove(b);this.commit()},clear:function(a){this._stores[a].clear()},register_store:function(a,b){this[a.toUpperCase()]=a;this._search_order.push(a);this._stores[a]=b},lockout:function(c){var a=this.set;this.set=function(){};try{c()}catch(b){this.set=a;throw b}this.set=a},bundle:function(c){var a=this.commit;this.commit=function(){};try{c()}catch(b){this.commit=a;this.commit();throw b}this.commit=a;this.commit()}};
// /vendor/json2.js from cimspire
var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
// /cookie.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}CIM.cookie=(function(){var d=["browse_alpha","browse_list","browse_locked","tvlistings_signinPrompted","fb_fan","browser_old","browser_osx","user_comcast","user_mecomcast","browse_popular","browse_newest","browserDetection"],n=["rs_activation","rs_devicetype","profile_named_cable_boxes","profile_remote_tuned","profile_watchlist_setup","test_value","skip_idevice_roadblock","skip_launch_promo"],h=["ACTIVATED","ATTEMPTED","NOTSET","DEACTIVATED"],l=["GUIDEWORKS","TIVO","NOTSET"],e,f={domain:".comcast.net",path:"/"};function o(t,r,s){var q;if(r>t.length-1){q=t}else{q=t.substr(0,r)+s+t.substr(r+1)}return q}function m(r){var q=new Date();q.setTime(q.getTime()+r*86400000);return q.toGMTString()}function g(r){var q;if(typeof r==="object"){q=r.toGMTString()}else{if(typeof r==="string"){q=r}else{q=m(r)}}return"; expires="+q}function i(){var q=document.location.hostname.split(".");if(q.length>=2){return"domain=."+q[q.length-2]+"."+q[q.length-1]}else{return"domain="+f.domain}}function b(u,t,q){var r="",s;if(CIM.cookie.exists(u)){r=CIM.cookie.read(u);switch(q){case"rs_activation":return h[r.charAt(t)].toLowerCase();break;case"rs_devicetype":return l[r.charAt(t)].toLowerCase();break;default:s=r.charAt(t);if(s==="1"){return true}else{if(s==="0"){return false}}break}}return}function a(x,w,q,t,s,u){var r="",v;if(CIM.cookie.exists(x)){r=CIM.cookie.read(x)}while(r.length<=s.length){r+="2"}switch(q){case"rs_activation":if(p(t.toUpperCase(),h)>-1){v=p(t.toUpperCase(),h)}else{v="2"}break;case"rs_devicetype":if(p(t.toUpperCase(),l)>-1){v=p(t.toUpperCase(),l)}else{v="2"}break;default:v=(t?1:0);break}r=o(r,w,v);if(u==="undefined"||!u){CIM.cookie.write(x,r)}else{CIM.cookie.write(x,r,{days:730})}return t}function c(r,t,w,s,u){var v,q;if(typeof r==="undefined"){return undefined}v=p(r,s);if(v===-1){return undefined}if(typeof t==="undefined"){return b(w,v,r)}else{return a(w,v,r,t,s,u)}return undefined}function k(q){return q.replace(/%/g,"%25").replace(/;/g,"%3B").replace(/=/g,"%3D").replace(/&/g,"%26")}function j(q){return unescape(q)}function p(s,t){if(t.indexOf){return t.indexOf(s)}for(var q=0,r=t.length;q<r;q++){if(t[q]===s){return q}}return -1}e={write:function(t,w,s){t=String(t||"");w=String(w||"");s=s||{};var v,u,q="",r="",x="path="+f.path;if(typeof s==="number"){q=g(s);s={}}if(typeof s.days!=="undefined"){q=g(s.days)}if(typeof s.path!=="undefined"){x="path="+s.path}if(typeof s.domain!=="undefined"){u="domain="+s.domain}else{u=i()}v=t+"="+String(w||"").replace(/;/g,"%3B")+q+"; "+x+"; "+u;document.cookie=v;return v},remove:function(r,q){var t={};q=q||{};for(var s in q){if(q.hasOwnProperty(s)){t[s]=q[s]}}t.days=-1;this.write(r,"",t);return this},read:function(s){var u,r=document.cookie.split(";"),t,w=s+"=",v=/\s*(.*)/,q=false;for(t=0;t<r.length;t=t+1){u=r[t].match(v)[1];if(u.indexOf(w)===0){q=u.substring(w.length,u.length);break}}return q?j(q):false},exists:function(q){return(typeof(this.read(q))==="string")},canWrite:function(){var q=false;this.write("t","y");if(this.read("t")==="y"){q=true}this.remove("t");return q},tempBinaryValue:function(q,r){return c(q,r,"b",d)},permBinaryValue:function(q,r){return c(q,r,"p",n,true)},setCookieInObject:function(s,r){var v=CIM.cookie.read(s),u,t,q;if(v){v=unescape(v);q=v.split("&");u=q.length;while(u){u--;t=q[u].split("=",1)[0];value=q[u].slice(t.length+1);r[t]=j(value)}return r}return false},decode:function(q){return this.setCookieInObject(q,{})},encode:function(r){var s=[],q;for(q in r){s.push([q,k(r[q])].join("="))}return s.join("&")},clear:function(){var r=document.cookie.split(";");for(var q=0;q<r.length;q++){this.remove(r[q])}}};e.get=e.read;e.set=e.write;e.create=e.write;e.del=e.remove;return e}());
// /exception.js from cimspire
if(typeof CIM=="undefined"){var CIM={}}CIM.exception=(function(){var A={create:function(B,C){var D=function(){var E=new Error();C.apply(E,arguments);E.name=B;return E};A[B]=D;return D}};return A})();
// /curry.js from cimspire
(function(){Function.prototype.curry=function(){var B=this,A=Array.prototype.slice.apply(arguments);return function(){return B.apply(this,Array.prototype.concat.apply(A,arguments))}};Function.prototype.context=function(A){var B=this;return function(){return B.apply(A,arguments)}}})();
// /vendor/async-20120710.js from cimspire
(function(){var e={};var l=this,n=l.async;if(typeof module!=="undefined"&&module.exports){module.exports=e}else{l.async=e}e.noConflict=function(){l.async=n;return e};var g=function(p,r){if(p.forEach){return p.forEach(r)}for(var q=0;q<p.length;q+=1){r(p[q],q,p)}};var d=function(p,r){if(p.map){return p.map(r)}var q=[];g(p,function(s,u,t){q.push(r(s,u,t))});return q};var a=function(p,r,q){if(p.reduce){return p.reduce(r,q)}g(p,function(s,u,t){q=r(q,s,u,t)});return q};var k=function(r){if(Object.keys){return Object.keys(r)}var q=[];for(var p in r){if(r.hasOwnProperty(p)){q.push(p)}}return q};if(typeof process==="undefined"||!(process.nextTick)){e.nextTick=function(p){setTimeout(p,0)}}else{e.nextTick=process.nextTick}e.forEach=function(p,r,s){s=s||function(){};if(!p.length){return s()}var q=0;g(p,function(t){r(t,function(u){if(u){s(u);s=function(){}}else{q+=1;if(q===p.length){s(null)}}})})};e.forEachSeries=function(p,s,t){t=t||function(){};if(!p.length){return t()}var r=0;var q=function(){s(p[r],function(u){if(u){t(u);t=function(){}}else{r+=1;if(r===p.length){t(null)}else{q()}}})};q()};e.forEachLimit=function(p,r,u,w){w=w||function(){};if(!p.length||r<=0){return w()}var t=0;var q=0;var s=0;(function v(){if(t===p.length){return w()}while(s<r&&q<p.length){q+=1;s+=1;u(p[q-1],function(x){if(x){w(x);w=function(){}}else{t+=1;s-=1;if(t===p.length){w()}else{v()}}})}})()};var h=function(p){return function(){var q=Array.prototype.slice.call(arguments);return p.apply(null,[e.forEach].concat(q))}};var o=function(p){return function(){var q=Array.prototype.slice.call(arguments);return p.apply(null,[e.forEachSeries].concat(q))}};var m=function(s,p,r,t){var q=[];p=d(p,function(u,v){return{index:v,value:u}});s(p,function(u,v){r(u.value,function(x,w){q[u.index]=w;v(x)})},function(u){t(u,q)})};e.map=h(m);e.mapSeries=o(m);e.reduce=function(p,q,r,s){e.forEachSeries(p,function(t,u){r(q,t,function(x,w){q=w;u(x)})},function(t){s(t,q)})};e.inject=e.reduce;e.foldl=e.reduce;e.reduceRight=function(p,q,r,t){var s=d(p,function(u){return u}).reverse();e.reduce(s,q,r,t)};e.foldr=e.reduceRight;var j=function(s,p,r,t){var q=[];p=d(p,function(u,v){return{index:v,value:u}});s(p,function(u,v){r(u.value,function(w){if(w){q.push(u)}v()})},function(u){t(d(q.sort(function(w,v){return w.index-v.index}),function(v){return v.value}))})};e.filter=h(j);e.filterSeries=o(j);e.select=e.filter;e.selectSeries=e.filterSeries;var f=function(s,p,r,t){var q=[];p=d(p,function(u,v){return{index:v,value:u}});s(p,function(u,v){r(u.value,function(w){if(!w){q.push(u)}v()})},function(u){t(d(q.sort(function(w,v){return w.index-v.index}),function(v){return v.value}))})};e.reject=h(f);e.rejectSeries=o(f);var i=function(r,p,q,s){r(p,function(t,u){q(t,function(v){if(v){s(t);s=function(){}}else{u()}})},function(t){s()})};e.detect=h(i);e.detectSeries=o(i);e.some=function(p,q,r){e.forEach(p,function(s,t){q(s,function(u){if(u){r(true);r=function(){}}t()})},function(s){r(false)})};e.any=e.some;e.every=function(p,q,r){e.forEach(p,function(s,t){q(s,function(u){if(!u){r(false);r=function(){}}t()})},function(s){r(true)})};e.all=e.every;e.sortBy=function(p,q,r){e.map(p,function(s,t){q(s,function(u,v){if(u){t(u)}else{t(null,{value:s,criteria:v})}})},function(u,s){if(u){return r(u)}else{var t=function(y,x){var w=y.criteria,v=x.criteria;return w<v?-1:w>v?1:0};r(null,d(s.sort(t),function(v){return v.value}))}})};e.auto=function(w,v){v=v||function(){};var t=k(w);if(!t.length){return v(null)}var q={};var s=[];var p=function(x){s.unshift(x)};var r=function(y){for(var x=0;x<s.length;x+=1){if(s[x]===y){s.splice(x,1);return}}};var u=function(){g(s.slice(0),function(x){x()})};p(function(){if(k(q).length===t.length){v(null,q);v=function(){}}});g(t,function(y){var x=(w[y] instanceof Function)?[w[y]]:w[y];var C=function(E){if(E){v(E);v=function(){}}else{var D=Array.prototype.slice.call(arguments,1);if(D.length<=1){D=D[0]}q[y]=D;u()}};var A=x.slice(0,Math.abs(x.length-1))||[];var z=function(){return a(A,function(E,D){return(E&&q.hasOwnProperty(D))},true)&&!q.hasOwnProperty(y)};if(z()){x[x.length-1](C,q)}else{var B=function(){if(z()){r(B);x[x.length-1](C,q)}};p(B)}})};e.waterfall=function(r,q){q=q||function(){};if(!r.length){return q()}var p=function(s){return function(v){if(v){q(v);q=function(){}}else{var t=Array.prototype.slice.call(arguments,1);var u=s.next();if(u){t.push(p(u))}else{t.push(q)}e.nextTick(function(){s.apply(null,t)})}}};p(e.iterator(r))()};e.parallel=function(r,q){q=q||function(){};if(r.constructor===Array){e.map(r,function(s,t){if(s){s(function(v){var u=Array.prototype.slice.call(arguments,1);if(u.length<=1){u=u[0]}t.call(null,v,u)})}},q)}else{var p={};e.forEach(k(r),function(s,t){r[s](function(v){var u=Array.prototype.slice.call(arguments,1);if(u.length<=1){u=u[0]}p[s]=u;t(v)})},function(s){q(s,p)})}};e.series=function(r,q){q=q||function(){};if(r.constructor===Array){e.mapSeries(r,function(s,t){if(s){s(function(v){var u=Array.prototype.slice.call(arguments,1);if(u.length<=1){u=u[0]}t.call(null,v,u)})}},q)}else{var p={};e.forEachSeries(k(r),function(s,t){r[s](function(v){var u=Array.prototype.slice.call(arguments,1);if(u.length<=1){u=u[0]}p[s]=u;t(v)})},function(s){q(s,p)})}};e.iterator=function(q){var p=function(r){var s=function(){if(q.length){q[r].apply(null,arguments)}return s.next()};s.next=function(){return(r<q.length-1)?p(r+1):null};return s};return p(0)};e.apply=function(q){var p=Array.prototype.slice.call(arguments,1);return function(){return q.apply(null,p.concat(Array.prototype.slice.call(arguments)))}};var c=function(t,p,q,u){var s=[];t(p,function(v,r){q(v,function(w,x){s=s.concat(x||[]);r(w)})},function(r){u(r,s)})};e.concat=h(c);e.concatSeries=o(c);e.whilst=function(r,p,q){if(r()){p(function(s){if(s){return q(s)}e.whilst(r,p,q)})}else{q()}};e.until=function(r,p,q){if(!r()){p(function(s){if(s){return q(s)}e.until(r,p,q)})}else{q()}};e.queue=function(t,r){var p=0;var s={tasks:[],concurrency:r,saturated:null,empty:null,drain:null,push:function(q,u){if(q.constructor!==Array){q=[q]}g(q,function(v){s.tasks.push({data:v,callback:typeof u==="function"?u:null});if(s.saturated&&s.tasks.length==r){s.saturated()}e.nextTick(s.process)})},process:function(){if(p<s.concurrency&&s.tasks.length){var q=s.tasks.shift();if(s.empty&&s.tasks.length==0){s.empty()}p+=1;t(q.data,function(){p-=1;if(q.callback){q.callback.apply(q,arguments)}if(s.drain&&s.tasks.length+p==0){s.drain()}s.process()})}},length:function(){return s.tasks.length},running:function(){return p}};return s};var b=function(p){return function(r){var q=Array.prototype.slice.call(arguments,1);r.apply(null,q.concat([function(t){var s=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(t){if(console.error){console.error(t)}}else{if(console[p]){g(s,function(u){console[p](u)})}}}}]))}};e.log=b("log");e.dir=b("dir");e.memoize=function(t,r){var q={};var s={};r=r||function(u){return u};var p=function(){var u=Array.prototype.slice.call(arguments);var w=u.pop();var v=r.apply(null,u);if(v in q){w.apply(null,q[v])}else{if(v in s){s[v].push(w)}else{s[v]=[w];t.apply(null,u.concat([function(){q[v]=arguments;var z=s[v];delete s[v];for(var y=0,x=z.length;y<x;y++){z[y].apply(null,arguments)}}]))}}};p.unmemoized=t;return p};e.unmemoize=function(p){return function(){return(p.unmemoized||p).apply(null,arguments)}}}());
// /user/user.js from cimspire
if(typeof CIM=="undefined"){var CIM={}}CIM.user=(function(){if(typeof CIM.user!="undefined"){return CIM.user}var i={},a={};function c(n,m){if(typeof a[n]!="undefined"){throw new Error("Attempt to create duplicate backend: "+n)}var o=CIM.user.Backend(),l=m(o);o=(typeof l=="undefined")?o:l;if(typeof o.getNow!="undefined"&&typeof o.get=="undefined"){o.get=function(p,q){q(this.getNow(p))}}a[n]=o}function j(o){var n={},m;for(var l=0;l<o.length;l++){m=g.getBackendForKey(o[l]);if(typeof n[m]=="undefined"){n[m]=[]}n[m].push(o[l])}return n}function d(n){var l=[],m;for(m in n){if(n.hasOwnProperty(m)){l.push({backend:g.getBackend(m),data:n[m]})}}return l}function e(m,q){var p,l=[],o,n;for(o=0;o<m.length;o++){p=m[o];if(typeof p.backend[q]==="undefined"){if(p.data instanceof Array){l=l.concat(p.data)}else{for(n in p.data){l.push(n)}}}}return l}function f(l,r){var t=d(r),q=e(t,l),o={},m,s,p,n;if(q.length>0){throw new ReferenceError(l+" is not implemented for keys: "+q.join(", "))}for(p=0;p<t.length;p++){m=t[p];s=m.backend[l](m.data);if(typeof s!="undefined"){for(n in s){if(s.hasOwnProperty(n)){o[n]=s[n]}}}}return o}function k(p,n,o){var m=d(n),l=e(m,p);if(l.length>0){throw new ReferenceError(p+" is not implemented for keys: "+l.join(", "))}o=o||function(){};async.concat(m,function(r,q){r.backend[p](r.data,function(s){q(null,s)})},function(v,u){var t={},q,s,r;for(s=0;s<u.length;s++){q=u[s];for(r in q){if(q.hasOwnProperty(r)){t[r]=q[r]}}}o(t)})}var h=0;function b(n,m){var l="_cb"+h+"_"+n;h++;c(l,function(o){o.getKeyData=o.getKeyData.curry(n);if(typeof m.get!="undefined"){o.get=function(p,q){m.get.call(this,function(s){var r={};r[n]=s;q(r)})}}if(typeof m.set!="undefined"){o.set=function(p,q){m.set.call(this,p[n],function(s){var r={};r[n]=s;q(r)})}}if(typeof m.remove!="undefined"){o.remove=function(p,q){m.remove.call(this,function(s){var r={};r[n]=s;q(r)})}}if(typeof m.getNow!="undefined"){o.getNow=function(q){var p={};p[n]=m.getNow.call(this);return p}}});return l}var g={get:function(l,m){k("get",j(l),m)},getNow:function(l){return f("getNow",j(l))},set:function(l,r){var o,n,p=[];for(o in l){if(l.hasOwnProperty(o)){p.push(o)}}var q=j(p),m;for(o in q){if(q.hasOwnProperty(o)){m={};p=q[o];for(n=0;n<p.length;n++){m[p[n]]=l[p[n]]}q[o]=m}}k("set",q,r)},remove:function(l,m){k("remove",j(l),m)},registerKey:function(n,l){if(typeof i[n]=="undefined"){var m;if(typeof l.backend!="undefined"){m=l.backend}else{m=b(n,l)}this.getBackend(m).registerKey(n,l);i[n]=m}else{throw new Error("Attempt to create duplicate key: "+n)}},unregisterKey:function(l){if(typeof i[l]!="undefined"){var m=this.getBackendForKey(l);this.getBackend(m).unregisterKey(l);delete i[l]}},getKeyData:function(l){var m=this.getBackendForKey(l);return this.getBackend(m).getKeyData(l)},getKeyList:function(){var m=[];for(var l in i){if(i.hasOwnProperty(l)){m.push(l)}}return m},registerBackend:function(m,l){if(m[0]=="_"){throw new Error("Attempt to create backend with invalid name: "+m)}c(m,l)},unregisterBackend:function(l){if(typeof a[l]!="undefined"){var n=this.getBackend(l).getKeyList();for(var m=0;m<n.length;m++){this.unregisterKey(n[m])}delete a[l]}},getBackend:function(l){if(typeof a[l]=="undefined"){throw new Error("Attempt to get unknown backend: "+l)}return a[l]},getBackendList:function(){var m=[];for(var l in a){if(a.hasOwnProperty(l)&&l[0]!="_"){m.push(l)}}return m},getBackendForKey:function(l){if(typeof i[l]=="undefined"){throw new Error("Attempt to access unknown key: "+l)}return i[l]}};return g})();CIM.user.Backend=function(){var a={};return{registerKey:function(c,b){if(typeof a[c]=="undefined"){a[c]=b}else{throw new Error("Attempt to create duplicate key: "+c)}},unregisterKey:function(b){if(typeof a[b]!="undefined"){delete a[b]}},getKeyData:function(b){if(typeof a[b]=="undefined"){throw new Error("Attempt to access unknown key: "+b)}else{return a[b]}},getKeyList:function(){var c=[];for(var b in a){if(a.hasOwnProperty(b)){c.push(b)}}return c}}};if(typeof CIM.user.BackendBuilders=="undefined"){CIM.user.BackendBuilders={}}CIM.user.BackendBuilders.ReadOnly=function(a){return function(c){var b=a(c);if(typeof b!="undefined"){c=b}c.set=function(d,g){var f={};for(var e in d){if(d.hasOwnProperty(e)){f[e]=false}}g(f)};c.remove=function(f,g){var e={};for(var d=0;d<f.length;d++){e[f[d]]=false}g(e)}}};
// /user/cookie.js from cimspire
CIM.user.BackendBuilders.Cookie=(function(){function a(c,b){var d=b.getKeyData(c);return(typeof d.store_as=="undefined")?c:d.store_as}return function(c,b){b=b||{};var e=b.parse||function(g){return g},f=b.stringify||function(g){return g};function d(){return CIM.cookie.decode(c)||{}}return function(g){g.set=function(j,n){var l={},h=d();for(var k in j){if(j.hasOwnProperty(k)){h[a(k,this)]=f(j[k]);l[k]=true}}var m=CIM.cookie.encode(h);CIM.cookie.write(c,m,b);n(l)};g.getNow=function(n){var l={},h=d(),k,o,m;for(var j=0;j<n.length;j++){k=n[j];o=this.getKeyData(k);m=a(k,this);if(typeof h[m]!="undefined"){l[k]=e(h[m])}else{if(typeof o.default_value!="undefined"){l[k]=o.default_value}}}return l};g.remove=function(m,p){var l={},h=d(),k;for(var j=0;j<m.length;j++){try{k=m[j];delete h[a(k,this)]}catch(o){}l[k]=true}var n=CIM.cookie.encode(h);CIM.cookie.write(c,n,b);p(l)}}}})();
// /cim.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}jQuery.getCachedScript=function(b,a){return jQuery.ajax(jQuery.extend(a||{},{dataType:"script",cache:true,url:b}))};jQuery.fn.reverse=[].reverse;Array.prototype.forEach=Array.prototype.forEach||function(d,e){if(!this.splice){return}var c,b,a;c=e||window;for(b=0,a=this.length;b<a;++b){d.call(c,this[b],b,this)}};Array.prototype.every=Array.prototype.every||function(d,e){if(!this.splice){return}var c,b,a;c=e||window;for(b=0,a=this.length;b<a;++b){if(!d.call(c,this[b],b,this)){return false}}return true};Array.prototype.some=Array.prototype.some||function(d,e){if(!this.splice){return}var c,b,a;c=e||window;for(b=0,a=this.length;b<a;++b){if(d.call(c,this[b],b,this)){return true}}return false};Array.prototype.map=Array.prototype.map||function(f,g){if(!this.splice){return}var e,b,d,c;e=g||window;b=[];for(d=0,c=this.length;d<c;++d){b.push(f.call(e,this[d],d,this))}return b};Array.prototype.filter=Array.prototype.filter||function(f,g){if(!this.splice){return}var e,b,d,c;e=g||window;b=[];for(d=0,c=this.length;d<c;++d){if(!f.call(e,this[d],d,this)){continue}b.push(this[d])}return b};Array.prototype.indexOf=Array.prototype.indexOf||function(c,d){if(!this.splice){return}var b,a;d=d||0;for(b=d,a=this.length;b<a;++b){if(this[b]===c){return b}}return -1};Array.prototype.lastIndexOf=Array.prototype.lastIndexOf||function(b,c){if(!this.splice){return}var a;c=c||this.length;if(c>=this.length){c=this.length}if(c<0){c=this.length+c}for(a=c;a>=0;--a){if(this[a]===b){return a}}return -1};Array.prototype.remove=Array.prototype.remove||function(c,b){var a=this.slice((b||c)+1||this.length);this.length=c<0?this.length+c:c;return this.push.apply(this,a)};String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};if(!Function.prototype.curry){Function.prototype.curry=function(){var b=this,a=Array.prototype.slice.apply(arguments);return function(){return b.apply(this,Array.prototype.concat.apply(a,arguments))}}}if(!Function.prototype.bind){Function.prototype.bind=function(b){var c=this,a=Array.prototype.slice.call(arguments,1);return function(){return c.apply(b,a.concat(Array.prototype.slice.call(arguments)))}}}Date.now=Date.now||function(){return new Date().valueOf()};Object.keys=Object.keys||function(c){var a,b=[];if(!("hasOwnProperty" in c)){c.hasOwnProperty=Object.hasOwnProperty.bind(c)}for(a in c){if(c.hasOwnProperty(a)){b.push(a)}}return b};
// /cim.browser.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}CIM.browser=(function(win,ua,platform,doc){var animations=(function(){var style=doc.getElementsByTagName("html")[0].style;return{animation:"animationName" in style||"webkitAnimationName" in style||"MozAnimationName" in style||"OAnimationName" in style||"msAnimationName" in style,transition:"transition" in style||"webkitTransition" in style||"MozTransition" in style||"OTransition" in style||"msTransition" in style}})(),browserDetails=[],inputs=(function(){var api={},input=doc.createElement("input"),inputAttr="autocomplete autofocus list placeholder max min multiple pattern required step".split(" "),attr,i;for(i=inputAttr.length;i;){i--;attr=inputAttr[i];api[attr]=attr in input}return api})(),storage=(function(){var type,storage={session:false,local:false};for(type in storage){storage[type]=(function(){try{if(type+"Storage" in win&&win[type+"Storage"]!==null){win[type+"Storage"].getItem("test");return true}return false}catch(e){return false}})()}return storage})(),workers={shared:!!win.SharedWorker,web:!!win.Worker},browser={},api={isAndroid:/Android/.test(ua),isBlackBerry:platform==="BlackBerry",isBolt:/BOLT/.test(ua),isChrome:!!win.chrome,isFirefox:!!win.sidebar,isGoogleBot:/Google Web Preview|Googlebot|Mediapartners-Google|AdsBot-Google/.test(ua),isIEMobile:/IEMobile/.test(ua),isIPad:/iPad/.test(platform),isIPhone:/iPhone/.test(platform),isIPod:/iPod/.test(platform),isITouch:/iTouch/.test(platform),isMac:/macintosh/i.test(ua),isOpera:!!win.opera,isRhino:/rhino/i.test(ua),isSafari:win.toString()==="[object DOMWindow]"&&!win.chrome,isSafariMobile:/Mobile/.test(ua)&&(/Safari/.test(ua)),isWindows:/windows|win32/i.test(ua),isWebOs:/(webOS|hpwOS)[\s\/]([\d.]+)/.test(ua),supportsAudio:!!doc.createElement("audio").canPlayType,supportsCanvas:!!doc.createElement("canvas").getContext,supportsHashChange:"onhashchange" in win&&(doc.documentMode===undefined||doc.documentMode>7),supportsIndexDB:!!win.indexedDB||!!win.webkitIndexedDB||!!win.mozIndexedDB||!!win.oIndexedDB||!!win.msIndexedDB,supportsGeolocation:!!navigator.geolocation,supportsTouch:"ontouchstart" in win,supportsVideo:!!doc.createElement("video").canPlayType,supportsWebSocket:!!win.WebSocket};api.isMobileGoogleBot=api.isGoogleBot&&(/mobile/i).test(ua);api.isIE=function(v){
/*@cc_on
            var
                mode = doc.documentMode,
                ieVer = (doc.documentElement.toString() === '[object]' && mode === 7) || @_jscript_version === 5.7 ? 7 : mode || 6;
            return v === ieVer || !v;
        @*/
return false};api.isActiveX=function(){try{return !!new ActiveXObject("htmlfile")}catch(e){return false}};api.isIEMetro=api.isIE(10)&&!api.isActiveX();api.isIOS=api.isIPhone||api.isIPad||api.isIPod||api.isITouch;api.iosVersion=function(){return(api.isIOS)?win.Number(ua.substr(ua.indexOf("OS ")+3,3).replace("_",".")):0};api.isOperaMobile=api.isOpera&&(/Pike/.test(platform)||(/Opera Mini/.test(ua))||(/Opera Mobi/.test(ua)));api.isAndroidTablet=api.isAndroid&&((/S[C|G]H-I.*\/FROYO/.test(ua))||(/Xoom/.test(ua)));api.supportsCssAnimations=function(type){return(type)?(animations[type]||false):animations.transition&&animations.animation};api.supportsES5=function(){try{return !!Function("[].try")}catch(e){return false}};api.supportsInput=function(type){return inputs[type]||false};api.supportsMediaQueries=(function(){if(!!win.matchMedia){return true}var supported,docElem=doc.documentElement,div=doc.createElement("div"),style=["&#173;","<style>","@media (min-width:0px) { #supportsMQ { position: absolute; width: 1px!important; } }","</style>"].join("");div.id="supportsMQ";div.innerHTML+=style;docElem.appendChild(div);supported=(window.getComputedStyle?getComputedStyle(div,null):div.currentStyle)["position"]=="absolute";docElem.removeChild(div);return supported})();api.supportsStorage=function(type){return(type)?(storage[type]||false):storage.session&&storage.local};api.supportsWorkers=function(type){return(type)?(workers[type]||false):workers.shared&&workers.web};api.isPhone=function(){return api.isIPhone||api.isIPod||api.isITouch||api.isBlackberry||api.isOperaMobile||(api.isAndroid&&!api.isAndroidTablet)||api.isBolt||api.isIEMobile||api.isWebOs};api.isTablet=function(){return api.isIPad||api.isAndroidTablet};api.isMobile=function(){return browser.isTablet()||browser.isPhone()};for(var key in api){if(typeof api[key]==="boolean"){browser[key]=(function(key){return function(){return api[key]}})(key)}else{browser[key]=api[key]}if(browser[key]()){browserDetails.push(key)}}for(var x=8;x<=10;x++){if(browser.isIE(x)){browserDetails.push("isIE"+x)}}jQuery("html").addClass(browserDetails.join(" "));return browser})(window,navigator.userAgent,navigator.platform,document);if(typeof define==="function"&&define.amd){define("cimspire/cim.browser",[],function(){return CIM.browser})};
// /cim.storage.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}CIM.storage=(function(){var e={},a=["session","local"],d=0,j=a.length,c=function(){return false},b={setItem:"",getItem:"",removeItem:"",clear:"",key:"",length:""},f=function(){for(var k=this.length;0<=k;k--){this.removeItem(this.key(k))}},g=function(l,o){var k=function(p){p.begin()},n=function(p){p.commit()},i=function(q,r,p){p=p||{};if(!p.expires){return}if(p.expires.constructor===Date){p.expires=p.expires.getTime()}else{if(p.expires.constructor===Number){p.expires*=60000;p.expires+=Date.now()}else{return}}r.setItem(q+"_expires",p.expires)},m=function(q,r){var p=r.getItem(q+"_expires");return(p&&p<Date.now())};if(!o.begin){k=c}if(!o.commit){n=c}if(o.clear){o.clear=f}if(l!=="local"){m=c;i=c}return{clear:function(){o.clear();return this},del:function(p){o.removeItem(p);return this},get:function(q){var p="";if(q in b){q="_"+q+"_"}if(!m(q,o)){p=unescape(o.getItem(q));try{p=JSON.parse(p.value||p||'""')}catch(r){}}else{this.del(q)}return p},key:function(p){return o.key(p)||""},length:function(){return o.length},set:function(q,r,p){if(q in b){q="_"+q+"_"}k(o);try{i(q,o,p);o.setItem(q,JSON.stringify(r))}catch(s){return false}n(o);return true}}};for(;d<j;d++){var h=a[d];e[h]=CIM.browser.supportsStorage(h)?(g)(h,window[h+"Storage"]):CIM.cookie}return e})();
// /user/aws.js from cimspire
CIM.user.BackendBuilders.AWS=(function(e){function b(h,g){var i=g.getKeyData(h);return(typeof i.store_as=="undefined")?h:i.store_as}function d(g){var j={};for(var h in g){if(g.hasOwnProperty(h)){j[h]=g[h]}}return j}function c(g){var k=[],j;for(var h in g){if(g.hasOwnProperty(h)){j=g[h].replace(/%/g,"%25").replace(/;/g,"%3B").replace(/=/g,"%3D").replace(/&/g,"%26");k.push(h+"="+j)}}return k.join("&")}function f(l){var h,g={},k=l.split("&");for(var j=0;j<k.length;j++){h=k[j].split("=");g[h[0]]=unescape(h[1])}return g}function a(k,g){var j="";for(var h in g){if(g.hasOwnProperty(h)){j+=["--"+k,'Content-Disposition: form-data; name="'+h+'"',"",g[h],""].join("\r\n")}}return j+"--"+k+"--"}return function(i){i=i||{};var g=null,j=i.parse||function(m){return m},l=i.stringify||function(m){return m};function k(m){if(g!==null){m(d(g));return}CIM.user.get(["isLoggedIn","guid"],function(n){if(!n.isLoggedIn){g={};m({});return}e.ajax({cache:false,type:"GET",url:"/user/authkey/service/amazonget/",data:{guid:n.guid,service:i.bucket,fmt:"xml",ts:(new Date()).getTime()},dataType:"xml",success:function(p){var o=e(p).find(i.url_node).text().replace(/https:\/\/.*?\//,i.aws_root);if(o!==""){e.ajax({cache:false,type:"GET",url:o,dataType:"text",success:function(q){g=f(q);m(d(g))},error:function(){g={};m({})}})}else{g={};m({})}},error:function(){g={};m({})}})})}function h(m,n){CIM.user.get(["isLoggedIn","guid"],function(o){if(!o.isLoggedIn){n(false);return}e.ajax({url:"/user/authkey/service/amazonpost/",data:{guid:o.guid,service:i.bucket,fmt:"xml",ts:(new Date()).getTime()},type:"GET",success:function(q){q=e(q);var r=parseInt(2147483647*Math.random(),10).toString(),p={key:"uploads/"+q.find("encryptedGuid").text(),policy:q.find("policy").text(),signature:q.find("signature").text(),AWSAccessKeyId:q.find("accessKey").text(),acl:"private","Content-Type":"text/plain",file:c(m)};e.ajax({url:i.aws_root,type:"POST",contentType:"multipart/form-data; boundary="+r,processData:false,data:a(r,p),success:function(){g=m;n(true)},error:function(){n(false)}})},error:function(){n(false)}})})}return function(n){var m=this;n.get=function(p,q){var o=this;k(function(r){var u,v,t={};for(var s=0;s<p.length;s++){u=p[s];v=o.getKeyData(u);keyName=b(u,o);if(typeof r[keyName]!="undefined"){t[u]=j(r[keyName])}else{if(typeof v.default_value!="undefined"){t[u]=v.default_value}}}q(t)})};n.set=function(p,q){var o=this;k(function(s){var r={},u={};for(var t in p){if(p.hasOwnProperty(t)){s[b(t,o)]=l(p[t]);r[t]=true;u[t]=false}}h(s,function(v){q(v?r:u)})})};n.remove=function(p,q){var o=this;k(function(s){var r={},v={},u;for(var t=0;t<p.length;t++){u=p[t];delete s[b(u,o)];r[u]=true;v[u]=false}h(s,function(w){q(w?r:v)})})}}}})(jQuery);
// /user/unified_user.js from cimspire
CIM.user.BackendBuilders.UnifiedUser=(function(f){function c(n,m){var o=m.getKeyData(n);return(typeof o.store_as=="undefined")?n:o.store_as}function j(m){var o={};for(var n in m){if(m.hasOwnProperty(n)){o[n]=m[n];if(o[n]!==null&&o[n].constructor===Object){o[n]=j(o[n])}}}return o}function a(p,o){var n=p.callbacks;for(var m=0;m<n.length;m++){n[m](o)}p.callbacks=[]}function l(p,o){var q=o.split("."),n=q.shift();if(typeof p=="undefined"){return}if(n===""){return p}var m=p[n];if(q.length===0){return m}else{return l(m,q.join("."))}}function i(q,o,p){var s=o.split("."),t=s.pop(),n=s.join("."),m=l(q,n);if(typeof m=="undefined"){var r={};r[t]=p;return i(q,n,r)}else{m[t]=p;return true}}function k(p,n,m){var r=m.getKeyData(n),o=c(n,m),q=l(p,o);if(typeof q!="undefined"){return q}else{if(typeof r.default_value!="undefined"){return r.default_value}else{return}}}function g(n,o,p,q){var m=CIM.user.getNow(["isLoggedIn","hashed_guid","cache_buster"]);if(!m.isLoggedIn){q(false,{})}else{f.ajax({method:"GET",async:o,url:n,data:f.extend(p,{p:m.hashed_guid,ts:m.cache_buster}),dataType:"json",success:function(r){q(false,r.UnifiedVal||{})},error:function(){q(true,{})}})}}function b(m,n){n=n||function(){};if(m.cache){n(j(m.cache))}else{m.callbacks.push(n);if(!m.loading){m.loading=true;g(m.options.getUrl,true,{},function(o,p){m.loading=false;m.cache=p;a(m,j(p))})}}}function d(m){if(!m.cache){m.loading=true;g(m.options.getUrl,false,{},function(n,o){m.loading=false;m.cache=o;a(m,j(o))})}return j(m.cache)}function h(m,n){m.pendingSets.push(n);if(!m.setsPending){e(m);m.setsPending=true}}function e(m){if(m.pendingSets.length>0){var n=m.pendingSets.pop();n();return true}else{m.setsPending=false;return false}}return function(m){var n={cache:null,loading:false,setsPending:false,sendFlush:false,callbacks:[],pendingSets:[],options:m||{}};n.options.bucketSetters=n.options.bucketSetters||{};return function(o){o.getNow=function(s){var u=d(n),r,t,q={};for(var p=0;p<s.length;p++){r=s[p];t=k(u,r,this);if(typeof t!="undefined"){q[r]=t}}return q};o.get=function(q,r){var p=this;b(n,function(w){var u,v,t={};for(var s=0;s<q.length;s++){u=q[s];v=k(w,u,p);if(typeof v!="undefined"){t[u]=v}}r(t)})};o.set=function(q,r){var p=this;h(n,function(){b(n,function(u){var v={},s,z,A,w,t={};for(var y in q){if(q.hasOwnProperty(y)){s=p.getKeyData(y);z=c(y,p);v[y]=false;if(i(u,z,q[y])){A=z.split(".");while(A.length>0){w=A.join(".");if(typeof n.options.bucketSetters[w]=="undefined"){A.pop()}else{t[w]=t[w]||[];t[w].push(y);break}}}}}function x(B){r(B);if(!e(n)&&n.sendFlush){o.flush()}}CIM.user.get(["isLoggedIn"],function(C){if(!C.isLoggedIn){x(v)}else{var B=[];for(var D in t){if(t.hasOwnProperty(D)){B.push({container:D,keys:t[D]})}}async.concat(B,function(F,E){var G=l(u,F.container),H=n.options.bucketSetters[F.container];H(n.options,G,function(I){if(I){n.sendFlush=true;i(n.cache,F.container,G);E(null,F.keys)}else{E(null,[])}})},function(G,F){for(var E=0;E<F.length;E++){v[F[E]]=true}x(v)})}})})})};o.flush=function(q){n.sendFlush=false;if(typeof User!="undefined"&&typeof User.flush!="undefined"){var p=(typeof q=="undefined")?{}:{bucket:q};User.flush(true,Date.now(),p)}else{CIM.user.set({cache_buster:Date.now()},function(){});g(n.options.getUrl,true,{flush:true},function(v,u){n.cache=u;var s={udf:function(x){CIM.devices=new CIM.Devices(x)}};if(typeof q=="string"){s[q](u[q])}else{if(q instanceof Array){var t=0,w=q.length,r;for(;t<w;t++){r=q[t];s[r](u[r])}}}})}};o.options=function(p){if(typeof p=="undefined"){return n.options}else{f.extend(n.options,p)}};o.rawData=function(p){if(typeof p=="undefined"){return n.cache}else{n.cache=p}}}}}(jQuery));
// /user/registry.js from cimspire
if(typeof CIM.user.BackendBuilders.CustomerRecord!="undefined"){CIM.user.registerBackend("customerRecord",CIM.user.BackendBuilders.CustomerRecord({url:"/xtv/authkey/customerRecord"}));CIM.user.registerKey("userAccounts",{backend:"customerRecord"});CIM.user.registerKey("currentAccount",{get:function(a){CIM.user.get(["userAccounts","email"],function(b){var d=b.userAccounts?b.userAccounts.length:0;for(var c=0;c<d;c++){if(b.userAccounts[c].uid.toLowerCase()===b.email.toLowerCase()){a(b.userAccounts[c]);return}}a()})}});CIM.user.registerKey("billing",{backend:"customerRecord"});CIM.user.registerKey("lastUpdate",{backend:"customerRecord"});CIM.user.registerKey("homeSecurity",{backend:"customerRecord"});CIM.user.registerKey("signatureService",{backend:"customerRecord"})}if(typeof CIM.user.BackendBuilders.Cookie!="undefined"){CIM.user.registerKey("isLoggedIn",{getNow:function(){return CIM.cookie.exists("MYPORTAL")}});CIM.user.registerKey("cache_buster",{getNow:function(){var a;if(typeof CIM.cookie!="undefined"){if(CIM.cookie.exists("usp_v")){a=CIM.cookie.read("usp_v")}else{if(CIM.cookie.exists("fav_v")){a=CIM.cookie.read("fav_v")}}}if(!a){a=(new Date()).getTime()}CIM.user.set({cache_buster:a},function(){});return a},set:function(a,b){if(typeof CIM.cookie!="undefined"){CIM.cookie.write("usp_v",a.toString());b(true)}else{b(false)}}});CIM.user.registerBackend("prefs",CIM.user.BackendBuilders.Cookie("prefs",{days:1000,parse:JSON.parse,stringify:JSON.stringify}));CIM.user.registerKey("pagemsg.state",{backend:"prefs",store_as:"pmv"});CIM.user.registerKey("local.zip",{backend:"prefs",store_as:"z"});CIM.user.registerKey("adt_zip",{backend:"prefs"});CIM.user.registerKey("adt_optout_flag",{backend:"prefs"});CIM.user.registerKey("adt_optout_ts",{backend:"prefs",store_as:"a_oot"});CIM.user.registerKey("adt_optin_ts",{backend:"prefs",store_as:"a_oit"});CIM.user.registerKey("adt_user_guid",{backend:"prefs",store_as:"a_g"});CIM.user.registerKey("amcid_local",{backend:"prefs",store_as:"amcid"});CIM.user.registerKey("amts_local",{backend:"prefs",store_as:"amts"});CIM.user.registerBackend("myportal",CIM.user.BackendBuilders.ReadOnly(CIM.user.BackendBuilders.Cookie("MYPORTAL")));CIM.user.registerKey("email",{backend:"myportal",store_as:"em"});CIM.user.registerKey("account_zip",{backend:"myportal",store_as:"zip"});CIM.user.registerKey("greeting",{backend:"myportal",store_as:"gt"});CIM.user.registerKey("guid",{backend:"myportal"});CIM.user.registerKey("hashed_guid",{backend:"myportal",store_as:"tid"});CIM.user.registerKey("dvc_status",{backend:"myportal",store_as:"cdvs"});CIM.user.registerKey("comcastUser",{getNow:function(){var a=CIM.user.getNow(["guid"]);if(!a.guid){return false}return !(a.guid.indexOf("urn:uuid")>=0)}})}if(typeof CIM.user.BackendBuilders.AWS!="undefined"){CIM.user.registerBackend("adtargeting",CIM.user.BackendBuilders.AWS({bucket:"dotnetpref",url_node:"signedPrefUrl",aws_root:"/aws/dotnetpref/",parse:JSON.parse,stringify:JSON.stringify}));CIM.user.registerKey("adtarget_optout_ts_aws",{backend:"adtargeting",store_as:"adtarget_optout_ts"});CIM.user.registerKey("adtarget_optout_flag_aws",{backend:"adtargeting",store_as:"adtarget_optout_flag",default_value:false});(function(b){var a=null;CIM.user.registerKey("amcid_cloud",{get:function(c){if(a!==null){c(a);return}CIM.user.get(["isLoggedIn"],function(d){if(!d.isLoggedIn){a="NONE";c(a);return}b.ajax({cache:false,type:"GET",url:"/user/authkey/service/addmarketing/",data:{fmt:"xml"},dataType:"xml",success:function(f){var e=b(f).find("hossResponse");if(e.length===0){a="NONE";c(a)}else{a=JSON.parse(e.text()).targetIds.join(",");c(a)}},error:function(){a="NONE";c(a)}})})}})})(jQuery)}if(typeof CIM.user.BackendBuilders.UnifiedUser!="undefined"){(function(c){function b(d){return function(e,f,g){CIM.user.get(["hashed_guid","cache_buster"],function(h){c.ajax({cache:false,method:"GET",url:e.setUrl,dataType:"json",data:{method:"put",p:h.hashed_guid,cacheBuster:h.cache_buster,attr:d,val:JSON.stringify(f)},success:function(){g(true)},error:function(){g(false)}})})}}function a(){return function(e,f,g){var d=(new Date()).getTime();delete f.cache;delete f.result;c.ajax({type:"POST",contentType:"application/json",url:e.setTvUrl+"?"+d,data:JSON.stringify(f),success:function(){g(true)},error:function(){g(false)}})}}CIM.user.registerBackend("unified_user",CIM.user.BackendBuilders.UnifiedUser({getUrl:"/xtv/authkey/user",setUrl:"/xtv/authkey/uis/profile",setTvUrl:"/vodservice/rest/tv/user",bucketSetters:{"uisProfile.onboarding":b("onboarding"),"uisProfile.xfinity":b("xfinity"),"uisProfile.settings":b("settings"),"uisProfile.adtargeting":b("adtargeting"),uisTvPrefs:a()}}))}(jQuery));CIM.user.registerKey("isXfinityConnectSetup",{backend:"unified_user",store_as:"uisProfile.xfinity.isXfinityConnectSetup"});CIM.user.registerKey("rsDeviceType",{backend:"unified_user",store_as:"uisTvPrefs.deviceType"});CIM.user.registerKey("roviHeadend",{backend:"unified_user",store_as:"uisTvPrefs.rovi.headend"});CIM.user.registerKey("roviHeadendName",{backend:"unified_user",store_as:"uisTvPrefs.rovi.headendName"});CIM.user.registerKey("roviZipCode",{backend:"unified_user",store_as:"uisTvPrefs.rovi.zipCode"});CIM.user.registerKey("roviTimezone",{backend:"unified_user",store_as:"uisTvPrefs.rovi.timezone"});CIM.user.registerKey("roviTimezoneOffset",{backend:"unified_user",store_as:"uisTvPrefs.rovi.timezoneOffset"});CIM.user.registerKey("favoriteChannelsSortOrder",{backend:"unified_user",store_as:"uisTvPrefs.favoriteChannels.sortOrder"});CIM.user.registerKey("favoriteChannelsCallSigns",{backend:"unified_user",store_as:"uisTvPrefs.favoriteChannels.callSigns"});CIM.user.registerKey("rdvrActivationStatus",{backend:"unified_user",store_as:"uisTvPrefs.activation.status"});CIM.user.registerKey("rdvrActivationUpdated",{backend:"unified_user",store_as:"uisTvPrefs.activation.updated"});CIM.user.registerKey("dacOverride",{backend:"unified_user",store_as:"uisTvPrefs.useDac.value"});CIM.user.registerKey("dacLastUpdate",{backend:"unified_user",store_as:"uisTvPrefs.useDac.lastUpdated"});CIM.user.registerKey("dacTimezone",{backend:"unified_user",store_as:"vodDac.timezone.timezone"});CIM.user.registerKey("dacTzOverride",{backend:"unified_user",store_as:"uisTvPrefs.useDac.timezone"});CIM.user.registerKey("dacTzOffsetOverride",{backend:"unified_user",store_as:"uisTvPrefs.useDac.timezoneOffset"});CIM.user.registerKey("dacMapId",{backend:"unified_user",store_as:"vodDac.dac.ChannelMap.mapId"});CIM.user.registerKey("dacControllerId",{backend:"unified_user",store_as:"vodDac.dac.ChannelMap.controllerId"});CIM.user.registerKey("personaId",{backend:"unified_user",store_as:"vodDac.vod.id"});CIM.user.registerKey("dvr_enabled",{backend:"unified_user",store_as:"uisProfile.onboarding.dvr_enabled"});CIM.user.registerKey("dvr_complete",{backend:"unified_user",store_as:"uisProfile.onboarding.dvr_complete"});CIM.user.registerKey("dvr_timestamp",{backend:"unified_user",store_as:"uisProfile.onboarding.dvr_timestamp"});CIM.user.registerKey("rtune_enabled",{backend:"unified_user",store_as:"uisProfile.onboarding.rtune_enabled"});CIM.user.registerKey("rtune_complete",{backend:"unified_user",store_as:"uisProfile.onboarding.rtune_complete"});CIM.user.registerKey("rtune_timestamp",{backend:"unified_user",store_as:"uisProfile.onboarding.rtune_timestamp"});CIM.user.registerKey("watchlist_complete",{backend:"unified_user",store_as:"uisProfile.onboarding.watchlist_complete"});CIM.user.registerKey("favorites_complete",{backend:"unified_user",store_as:"uisProfile.onboarding.favorites_complete"});CIM.user.registerKey("edata",{backend:"unified_user",store_as:"eData.data.edata"});CIM.user.registerKey("rdvr_udf_activation",{backend:"unified_user",store_as:"udf.account.rdvr.activation.status"});CIM.user.registerKey("rtune_udf_activation",{backend:"unified_user",store_as:"udf.account.rtune.activation.status"});CIM.user.registerKey("adtarget_optout_ts_uis",{backend:"unified_user",store_as:"uisProfile.adtargeting.optout_ts"});CIM.user.registerKey("adtarget_optout_flag_uis",{backend:"unified_user",store_as:"uisProfile.adtargeting.optout_flag"});CIM.user.registerKey("udf",{backend:"unified_user",store_as:"udf"});CIM.user.registerKey("rtuneActivationStatus",{backend:"unified_user",store_as:"udf.account.rtune.activation.status"});CIM.user.registerKey("rtuneActivationUpdated",{backend:"unified_user",store_as:"udf.account.rtune.activation.updated"})}CIM.user.registerBackend("adtargeting_migration",function(b){function a(){if(typeof CIM.properties!=="undefined"&&typeof CIM.properties.adtWriteUis!=="undefined"){return(CIM.properties.adtWriteUis==="true")}else{return true}}function c(){if(typeof CIM.properties!=="undefined"&&typeof CIM.properties.adtReadUis!=="undefined"){return(CIM.properties.adtReadUis==="true")}else{return false}}b.get=function(f,h){var e=[],g;g=c()?"_uis":"_aws";for(var d=0;d<f.length;d++){e.push(f[d]+g)}CIM.user.get(e,function(l){var k={};for(var j=0;j<f.length;j++){k[f[j]]=l[f[j]+g]}h(k)})};b.set=function(d,g){var f={};for(var e in d){if(d.hasOwnProperty(e)){if(a()){f[e+"_uis"]=d[e]}else{f[e+"_aws"]=d[e]}}}CIM.user.set(f,function(j){var i={};for(var h in d){if(d.hasOwnProperty(h)){i[h]=true;if(typeof j[h+"_aws"]!="undefined"){i[h]=i[h]&&j[h+"_aws"]}if(typeof j[h+"_uis"]!="undefined"){i[h]=i[h]&&j[h+"_uis"]}}}g(i)})}});CIM.user.registerKey("adtarget_optout_flag",{backend:"adtargeting_migration"});CIM.user.registerKey("adtarget_optout_ts",{backend:"adtargeting_migration"});
// /rpc.js from cimspire
if(typeof CIM=="undefined"){CIM={}}CIM.RPC=(function(d){var c=(window==top)?"top":window.name;function f(i){var g="",j="",h;h=i.match(/^(.+?:)\/\//);if(h){g=h[1]}else{g=document.location.protocol}h=i.match(/^(?:.*?:)?\/\/(.*?)\//);if(h){j=h[1]}else{j=document.location.host}return g+"//"+j}function e(i,g){if(typeof i.type!="undefined"&&i.type=="RPC"){var j=i.method,h=i.args;if(typeof g[j]!="undefined"&&typeof g[j].apply!="undefined"){g[j].apply(window,h);return true}}return false}var b={receiveMessage:function(g){g.message=JSON.parse(g.message);if(!e(g.message,this.methods)){d(this).triggerHandler("receive",[g])}},methods:{setupChannel:function(g){var h=new b.Channel("top");h.rpcRoot(g)}}};b.Message=function(j,l,n){this.frame=d('<iframe style="width:0;height:0;position:absolute;left:-10000px;"></iframe>');d(document.body).append(this.frame);var k={message:l,target:j,source:c};var m=[];for(var h in k){if(k.hasOwnProperty(h)){m.push(h+"="+encodeURIComponent(k[h]))}}var g=this;this.frame.bind("load",function(){window.setTimeout(function(){g.frame.remove()},1000)}).attr("src",n+"?"+m.join("&"))};var a={};b.Channel=function(h){if(typeof h=="string"){this.target=h}else{this.target=(h==top)?"top":h.name}if(typeof a[this.target]=="undefined"){a[this.target]=this}else{return a[this.target]}this.rpcFile("/rpc/");if(typeof h!="string"&&h!=top){this.rpcRoot(f(h.src))}this.methods={};var g=this;d(b).bind("receive",function(i,j){if(g.target==j.source){g.receiveMessage(j)}})};b.Channel.resetCache=function(){a={}};b.Channel.prototype={sendMessage:function(g){return new b.Message(this.target,JSON.stringify(g),this.rpcUrl())},apply:function(h,g){return this.sendMessage({type:"RPC",method:h,args:g||[]})},receiveMessage:function(g){if(!e(g.message,this.methods)){d(this).triggerHandler("receive",[g])}},rpcRoot:function(g){if(typeof g=="undefined"){if(typeof this._rpcRoot=="undefined"){if(this.target=="top"&&window==top){this._rpcRoot=document.location.protocol+"//"+document.location.host;return this._rpcRoot}else{throw new Error("No RPC root defined for "+this.target)}}else{return this._rpcRoot}}else{this._rpcRoot=g}},hasRoot:function(){try{this.rpcRoot();return true}catch(g){return false}},rpcFile:function(g){if(typeof g=="undefined"){return this._rpcFile}else{this._rpcFile=g}},rpcUrl:function(){return this.rpcRoot()+((this.rpcFile().indexOf("/")===0)?"":"/")+this.rpcFile()}};return b})(jQuery);if(typeof define==="function"&&define.amd){define("cimspire/rpc",[],function(){return CIM.RPC})};
// /lightbox/scrim.js from cimspire
if(typeof CIM=="undefined"){CIM={}}CIM.scrim=(function(d){var e=false,a=0.7,f=100003,c=null;var b={show:function(){if(this.visible()){return}var g=this.element();d(window).bind("resize.scrim",function(){var l=d(document.body);g.css({width:l.width(),height:l.height()})});g.css("display","block");d(window).trigger("resize.scrim");e=true;d(b).trigger("show");var h=0,k=setInterval(function(){d(window).trigger("resize.scrim");if(h>10){clearInterval(k);return}h+=1},750);var j=function(l){d(window).trigger("clicked.scrim")};try{document.getElementById("scrim").onload=function(){this.contentWindow.document.body.onclick=j}}catch(i){}},hide:function(){if(!this.visible()){return}var g=this.element();d(window).unbind("resize.scrim");g.css("display","none");e=false;d(b).trigger("hide")},fadeOut:function(h,i){if(!this.visible()){i();return}var g=this.element();d(window).unbind("resize.scrim");g.fadeOut();e=false;d(b).trigger("hide");i()},toggle:function(){if(this.visible()){this.hide()}else{this.show()}},element:function(){if(c===null){c=d('<iframe id="scrim" src="/cimspire/html/scrim.html" frameborder="0"/>');c.css({position:"absolute",top:0,left:0,height:0,width:0,border:0,opacity:this.opacity(),zIndex:this.zIndex(),display:(this.visible()?"block":"none")});d(document.body).append(c)}return c},visible:function(g){if(typeof g=="undefined"){return e}else{if(g){this.show()}else{this.hide()}}},opacity:function(g){if(typeof g=="undefined"){return a}else{a=g;this.element().css("opacity",a)}},zIndex:function(g){if(typeof g=="undefined"){return f}else{f=g;this.element().css("zIndex",f)}}};return b})(jQuery);if(typeof define==="function"&&define.amd){define("cimspire/lightbox/scrim",[],function(){return CIM.scrim})};
// /lightbox/lightbox.js from cimspire
if(typeof CIM=="undefined"){CIM={}}CIM.Lightbox=(function(h){var c;if(CIM.hasOwnProperty("debugApp")){c=CIM.debugApp.register("CIM.Lightbox")}else{c={info:function(){},warn:function(){},error:function(){}}}var d=0,l="/cimspire/html/scrim.html",j=(location.origin||location.protocol+"//"+location.host);var e=(function(){return !CIM.browser.isIE(6)})();var g={frame:{type:"frame",width:640,height:480},modal:{type:"modal",width:"50%"},template:{type:"template",width:"50%"},dialog:{type:"dialog",width:320,useLoader:false}};var i={};function b(){var m="lightbox-"+d;d++;return m}function f(n){var m=n.length*32+1000;c.info("autoCloseTime",m);return m}function k(m){c.warn("No type parameter specified.");if("url" in m&&m.url){return"frame"}else{if("template" in m&&m.template){return"template"}else{if("className" in m&&(/alert|confirm|notify|prompt|form/).test(m.className)){return"dialog"}else{if("message" in m&&m.message){if(("buttons" in m)&&m.buttons.length){m.className=(m.buttons.length===1)?"alert":"confirm"}else{if(m.autoCloseTime||m.closeBox===false){m.className="notify"}}return"dialog"}else{return""}}}}}var a=function(n){c.info("Lightbox constructor called with options:",n);if(!n){c.error("Constructor called with no options.");return this}this.type=n.type||k(n);if(!this.type){c.error("Lightbox type can't be determined.");return this}else{if(this.type=="dialog"&&!n.message){c.error("A dialog lightbox requires a message and none was specified.");return this}else{if(this.type=="template"&&!n.template){c.error("A template lightbox requires a template and none was specified.");return this}else{if(this.type=="frame"&&!n.url){c.error("A frame lightbox requires a url and none was specified.");return this}}}}this.options=h.extend({height:"auto",url:l,name:b(),useLoader:true,closeBox:true,scrim:true},g[this.type]);if(this.type=="dialog"&&(/notify/).test(n.className)){h.extend(this.options,{autoCloseTime:"auto",width:300,closeBox:false,scrim:false})}h.extend(this.options,n);if(this.options.autoCloseTime=="auto"){this.options.autoCloseTime=f(this.options.message)}if(typeof this.options.use_fixed!="undefined"){e=this.options.use_fixed}this.is_open=false;this.loader_element=null;this.wrapper=h('<div class="lightbox"/>');if(this.options.closeBox){this.closeBox=h('<a class="circle-close close"/>').appendTo(this.wrapper).hide()}if(this.options.useLoader){this.loader(a.createLoader())}if(this.type=="frame"){this.content=h('<iframe class="lightboxContent" scrolling="no" frameBorder="0" src="'+l+'" name="'+this.options.name+'"/>');this.content.css({width:(this.options.width),height:(this.options.height),zIndex:"11"});var p=this;this.content.load(function(s){c.info("iframe load event fired",this.src);p.loader().hide();h(p).trigger("ready");if((this.src.match(/http:\/\/[^\/]+(?=\/)/)||[]).toString()==j){c.info("Same origin rules apply.");h(this.contentDocument).unbind("keydown").bind("keydown",function(t){if(t.keyCode==27){p.close()}})}else{c.info("Cross-origin rules apply.")}});this.width("auto");this.height("auto")}else{this.content=h('<div class="lightboxContent" id="'+this.options.name+'"/>');this.width("auto");this.height("auto");this.content.css({width:(this.options.width),height:(this.options.height)});if(this.options.className){this.content.addClass(this.options.className)}if(this.options.backgroundImage){this.content.css({"background-image":"url("+this.options.backgroundImage+")","background-position":this.options.backgroundPosition||"center center","background-repeat":"no-repeat"})}}if(this.options.useLoader&&this.options.height=="auto"){this.content.css({"min-height":this.options.width/3})}if(this.type=="template"){var o=this.options,q=this;if(o.tmplId){var m=h(o.tmplId).render(h.extend({},o.data,{templateName:(o.template||o.name||"")}));q.content.html(m).addClass("template");if(o.loader){q.loader().hide()}q.content.css({"min-height":""});q.wrapper.removeClass("hideCircleClose");h(window).trigger("resize.lightbox")}else{if(o.url){this.getContent(o.url,function(t){if(t){h.templates({dynamic:t.replace(/\n/g,"")});var s=h.render.dynamic(h.extend({},o.data,{templateName:(o.template||o.name||"")}));q.content.html(s).addClass("template");q.loader().hide();q.content.css({"min-height":""});q.wrapper.removeClass("hideCircleClose");h(window).trigger("resize.lightbox")}})}}}CIM.scrim.element();this.wrapper.append(this.content);this.wrapper.css({position:e?"fixed":"absolute"});this.url(this.options.url);if(this.options.use_fixed===false&&CIM.browser.isIE()&&typeof this.options.top!=="undefined"){var r=this.options.top.substring(0,this.options.top.indexOf("px"))-100;window.setTimeout(function(){window.document.documentElement.scrollTop=r},0)}};a.createLoader=function(){var m=h('<div class="cimspire_loading">Loading...</div>');return m};a.prototype={getContent:function(o,p){var n,m=this;if(typeof o=="undefined"){o=this.url()}if(o==l){h(m).trigger("ready");return}h.ajax({url:o,success:function(q){n=q;i[o]=n},error:function(s,q,r){n=false},complete:function(){if(typeof p=="undefined"){return n}if(n){p(n);h(m).trigger("ready")}}})},url:function(m){if(typeof m=="undefined"){return this.src_url}else{this.src_url=m;if(this.visible()){this.reload()}}},resize:function(q,o,n){var m={x:h(window).width(),y:h(window).height()},p=this;p.options=p.options||{};p.content.animate({width:q,height:o},{step:function(r,s){var t=h(s.elem).parent();if(s.prop=="width"){t.css("left",p.options.left||Math.round(Math.max(m.x/2-r/2,0)))}else{t.css("top",p.options.top||Math.round(Math.max(m.y/2-r/2,0)))}},complete:n})},width:function(m){if(typeof m=="undefined"){return this.wrapper.width()}else{this.wrapper.css("width",m)}},height:function(m){if(typeof m=="undefined"){return this.wrapper.height()}else{this.wrapper.css("height",m)}},rpcChannel:function(){return this.channel},visible:function(m){if(typeof m=="undefined"){return this.is_open}else{if(m){this.open()}else{this.close()}}},open:function(){CIM.scrim.visible(this.options.scrim);this.wrapper.appendTo(document.body).css("z-index",CIM.scrim.zIndex()+1);var m=this;if(this.loader_element){function o(q){var r=q.width();r+=parseFloat(q.css("paddingLeft"))||0;r+=parseFloat(q.css("paddingRight"))||0;r+=parseFloat(q.css("borderLeftWidth"))||0;r+=parseFloat(q.css("borderRightWidth"))||0;return r}function n(q){var r=q.height();r+=parseFloat(q.css("paddingTop"))||0;r+=parseFloat(q.css("paddingBottom"))||0;r+=parseFloat(q.css("borderTopWidth"))||0;r+=parseFloat(q.css("borderBottomWidth"))||0;return r}this.loader().css({left:o(this.wrapper)/2-o(this.loader())/2,top:n(this.wrapper)/2-n(this.loader())/2})}h(window).bind("resize.lightbox",function(){var q={x:h(window).width(),y:h(window).height()},r={x:e?0:document.documentElement.scrollLeft,y:e?0:document.documentElement.scrollTop};m.wrapper.css({left:m.options.left||Math.round(Math.max(q.x/2-m.width()/2+r.x,0)),top:m.options.top||Math.round(Math.max(q.y/2-m.height()/2+r.y,0))})});h(window).bind("clicked.scrim",function(q){if(m.cancel){m.cancel()}else{m.close()}});if(!e){var p=null;h(window).bind("scroll.lightbox",function(){if(p){window.clearTimeout(p)}p=window.setTimeout(function(){h(window).trigger("resize.lightbox")},10)})}this.reload();this.is_open=true;h(this).trigger("opened");h(window).trigger("resize.lightbox");if(this.options.autoCloseTime){setTimeout(function(){m.close(true)},this.options.autoCloseTime)}if(this.closeBox){this.closeBox.show()}if(this.options.scrim){this._hideFlash()}this.content.focus()},end:function(m,n){this.close(m,n)},close:function(n,o){var m=this;h(window).unbind("resize.lightbox").unbind("scroll.lightbox").unbind("clicked.scrim");if(n){this.wrapper.fadeOut();CIM.scrim.fadeOut("fast",function(){m.wrapper.remove();m._showFlash();m.is_open=false;h(m).trigger("closed").unbind("closed");if(typeof o=="function"){o()}})}else{CIM.scrim.hide();setTimeout(function(){m.wrapper.remove()},10);this._showFlash();m.is_open=false;h(m).trigger("closed").unbind("closed");if(typeof o=="function"){o()}}h(document).unbind("keydown")},loader:function(m){if(typeof m=="undefined"){return this.loader_element}else{if(this.loader_element!==null){this.loader_element.remove()}this.loader_element=h(m);this.wrapper.append(this.loader_element)}},buildModal:function(n){var m=this;this.getContent(this.url(),function(o){m.content.html(o);if(typeof n=="function"){n.call()}})},buildDialog:function(u){if(this.content.loaded){if(typeof u=="function"){u.call()}return}var w=this,n,m,p,x,q,t,r,v;p=h(this.options.header?"<h1>"+this.options.header+"</h1>":"");x=this.options.message||"";if(typeof x=="string"&&(/\n/).test(x)){x=x.replace(/\n/g,"</span></p><p><span>")}else{if(typeof x=="object"&&x instanceof Array){x=x.join("</span></p><p><span>")}}x=h('<div class="dialog"></div>').append("<p><span>"+x+"</span></p>");n=(this.options.className=="prompt"?'<div class="prompt"><input type="text"></div>':"");if(this.options.form){m=this.options.form;if(typeof m=="string"&&(/\n/).test(m)){m=m.replace(/\n/g,"</fieldset><fieldset>")}else{if(typeof m=="object"&&m instanceof Array){m=m.join("</fieldset><fieldset>")}}m="<fieldset>"+m+"</fieldset>";this.form=h("<form />").html(m).bind("submit",function(){return false});this.msgOut=h('<span class="small-error">');m=h('<div class="form"/>').append(this.form).append(this.msgOut)}else{m=""}r=h('<div class="buttons" style="text-align:right;"></div>');w.content.append(p).append(x).append(n||m);if(this.options.buttons){v='<a href="#" class="button auto"></a>';for(var o=0,s=this.options.buttons.length;o<s;o++){q=this.options.buttons[o];r.append(h(v).html(q.label).click(q.action))}w.content.append(r)}if(typeof u=="function"){u.call()}this.content.loaded=true;h(this).trigger("ready")},reload:function(){var m=this;if(this.type=="frame"){this.content.bind("load.lightbox",function(){if(!m.open){return}if(typeof CIM.RPC!="undefined"){m.channel=new CIM.RPC.Channel(m.content[0]);m.channel.methods.lightbox_close=function(){m.close()};m.channel.methods.lightbox_resize=function(o,n){m.width(o);m.height(n);h(window).trigger("resize.lightbox")};m.channel.apply("setupChannel",[j])}m.content.css("left",0).unbind("load.lightbox");h(m).trigger("load");m._addEventHandlers()}).css("left",-10000).attr("src",this.url())}else{if(this.type=="modal"){h(document).unbind("keydown").bind("keydown",function(n){if(n.keyCode==27){m.close()}});h(this).bind("ready",this._addEventHandlers);this.buildModal()}else{if((/dialog|template/).test(this.type)){h(document).unbind("keydown").bind("keydown",function(n){if(n.keyCode==13){if(m.okay){m.okay()}else{m.close()}}else{if(n.keyCode==27){if(m.cancel){m.cancel()}else{m.close()}}}});if(this.type=="dialog"){this._addEventHandlers();this.buildDialog()}else{h(this).bind("ready",this._addEventHandlers)}}}}},_addEventHandlers:function(){var m=this;h("div.lightbox a.close").click(function(n){if(m.cancel){m.cancel(false)}else{m.close()}n.preventDefault();n.stopPropagation();return false});h("div.lightbox a.okay").click(function(n){if(typeof m.okay==="function"){m.okay(m.content.find("form").serializeArray())}else{m.close()}return false})},_hideFlash:function(){h(".ad,embed,object").css("visibility","hidden")},_showFlash:function(){h(".ad,embed,object").css("visibility","visible")}};return a})(jQuery);if(typeof define==="function"&&define.amd){define("cimspire/lightbox/lightbox",[],function(){return CIM.Lightbox})}CIM.dialog=(function(e){var d={cancel:function(g){if(typeof a.options.callback=="function"){a.options.callback(false)}a.close();return false},save:function(h){var g=self.content.find("form").serializeArray();if(typeof a.options.callback=="function"&&g.length){a.options.callback(g,function(i,j){if(i){a.close()}else{CIM.debug.info("error")}})}},okay:function(i){var h,g;if(typeof a.options.callback=="function"){if(a.options.className=="form"){h=a.content.find("form").serializeArray()}else{if(a.options.className=="prompt"){h=a.content.find("input").val()}else{if(a.options.className=="confirm"){h=true}}}g=a.options.callback(h)}if(g){a.msgOut.html(g).fadeIn(1000).delay(c(g)).fadeOut(1000)}else{a.close()}return false}};var b={ok:{label:"OK",action:d.okay},save:{label:"Save",action:d.okay},cancel:{label:"Cancel",action:d.cancel}};var a;var c=function(h){var g=h.length*32+1000;debug.info("autoCloseTime",g);return g};var f=function(k,g){if(!g){return k}else{if(g.header&&!isNaN(g.height)){g.height+=53}for(var j in k){if(j=="buttons"&&("buttons" in g)){var l=Math.max(g.buttons.length,k.buttons.length);for(var h=0;h<l;h++){g.buttons[h]=$.extend({},k.buttons[h],g.buttons[h])}}else{g[j]=g[j]||k[j]}}return g}};return{form:function(h,i,g){g=f({message:h,type:"dialog",callback:i,buttons:[b.cancel,b.save],className:"form"},g);a=new e(g);a.okay=d.okay;a.cancel=d.cancel;a.open();return a},prompt:function(h,i,g){g=f({message:h,type:"dialog",callback:i,buttons:[b.cancel,b.ok],className:"prompt"},g);a=new e(g);a.okay=d.okay;a.cancel=d.cancel;a.open();return a},confirm:function(h,i,g){g=f({message:h,type:"dialog",callback:i,buttons:[b.cancel,b.ok],className:"confirm"},g);a=new e(g);a.okay=d.okay;a.cancel=d.cancel;a.open();return a},alert:function(h,i,g){g=f({message:h,type:"dialog",callback:i,buttons:[b.ok],className:"alert"},g);a=new e(g);a.okay=d.okay;a.cancel=d.okay;a.open();return a},notify:function(h,g){a=new e({message:h,type:"dialog",className:"notify",autoCloseTime:g});a.open();return a}}})(CIM.Lightbox);
// /ad_targeting.js from cimspire
if(typeof CIM=="undefined"){CIM={}}var refer="",entry="yes",adzip="";if(document.referrer.indexOf("//")>0){refer=document.referrer.split("/",3)[2];if(refer.indexOf(":")>0){refer=refer.split(":",2)[0]}}if(typeof CIM.properties!="undefined"&&typeof CIM.properties.hostNameShort!=="undefined"&&refer.indexOf(CIM.properties.hostNameShort)>-1){entry="no"}if(typeof user!="undefined"&&typeof(user.billingZip)!="undefined"){adzip="_OAS_GEO_OVERRIDE_=US:"+user.billingZip+";"}CIM.AdTargeting=(function(b){var a={init:function(d){if(typeof f_ENABLE_ADTARGETING!="undefined"&&f_ENABLE_ADTARGETING){var c=(b("input#adtarget-optout-page").length>0);d=d||function(){};if(!c&&typeof f_ADTARGET_ZIP!="undefined"){a.load(d)}}},load:function(c){a.loadLocal(function(d,e){if(d===""||e===""){a.loadCloud(c)}else{c(d,e)}})},loadLocal:function(c){CIM.user.get(["isLoggedIn","hashed_guid","adt_user_guid","adt_optin_ts","adt_optout_flag","adt_zip","amcid_local","amts_local"],function(e){if(typeof e.adt_zip=="undefined"||typeof e.adt_optout_flag=="undefined"){c("");return}var g=(new Date()).getTime();var i=e.adt_optout_flag?"":e.adt_zip,d=e.adt_optout_flag?"":e.amcid_local,f="",h="";if(!e.isLoggedIn){f=i;h=d}else{if(e.hashed_guid==e.adt_user_guid){if(e.adt_optin_ts+259200000>g){f=i}if(e.amts_local+86400000>g){h=d}}}c(f,h)})},loadCloud:function(c){CIM.user.get(["isLoggedIn","adtarget_optout_flag","amcid_cloud","account_zip","hashed_guid"],function(e){if(!e.isLoggedIn){c("","");return}if(!e.adtarget_optout_flag){e.adtarget_optout_flag=false}var d={adt_zip:e.account_zip,adt_user_guid:e.hashed_guid,adt_optout_flag:e.adtarget_optout_flag,amcid_local:e.amcid_cloud||"NONE",amts_local:(new Date()).getTime()};if(e.adtarget_optout_flag){d.adt_optout_ts=(new Date()).getTime()}else{d.adt_optin_ts=(new Date()).getTime()}CIM.user.set(d,function(){c(e.adtarget_optout_flag?"":d.adt_zip,e.adtarget_optout_flag?"":d.amcid_local)})})}};return a})(jQuery);jQuery(document).ready(function(){setTimeout(function(){CIM.AdTargeting.init()},2000)});
// /cim.page.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}CIM.page=(function(a,c,b){var d=[];return{getDomain:function(e){return(e||c.hostname).replace(/^https*:\/\/|(:|\/|#|\?).*$/g,"").split(".").slice(-2).join(".")},getHashes:function(){return this.getParams("",c.hash,"hash")},getHash:function(e){return this.getParams(e,c.hash,"hash")},setHashes:function(g,e){var f=a.param(a.extend({},this.getParams("",c.hash,"hash"),g||{}));if(e){c.replace("#"+f)}else{c.hash=f}return this},getParams:function(h,g,f){g=typeof g==="string"?g:c.search;var e=CIM.utils.parseStr(g,(f||"query"));return(h)?e[h]||"":e},getParam:function(e){return this.getParams(e)},getPath:function(){if(!d.length){d=c.pathname.match(/([^\/]+)/g)||[""]}return d},isSecure:function(){return c.protocol==="https:"},setParams:function(e){c.search=a.param(a.extend({},this.getParams(),e||{}));return this},getTitle:function(){return b.title},setTitle:function(e){e=e||"";return b.title=e}}})(jQuery,location,document);if(typeof define==="function"&&define.amd){define("cimspire/cim.page",[],function(){return CIM.page})};
// /cim.utils.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}CIM.utils=(function(){var b={},c={query:/([^?=&]+)(=([^&]*))?/g,hash:/([^#=&]+)(=([^&]*))?/g},a=function(i,h,d,e){i=String(i);h=String(h);d=Number(d)||0;var f=[],g=i.length;f[d>g?d-g:0]=i;return(e?f.reverse():f).join(h)};return{getNestedProp:function(h,j,g){h=h||{};j=String(j||"").split(".");g=(typeof g==="undefined")?"":g;var f=0,d=j.length,e;for(;f<d;f++){e=j[f];if(!(e in h)){return g}h=h[e]}return(typeof h!=="undefined")?h:g},setNestedProp:function(h,j,g){h=h||{};j=String(j||"").split(".");g=(typeof g==="undefined")?"":g;var f=0,d=j.length,e;for(;f<d;f++){e=j[f];if(!(e in h)){h[e]=(f===(d-1))?g:{}}if(f===(d-1)){h[e]=g}else{h=h[e]}}return h},intval:function(d,e){if(typeof d==="boolean"||(typeof d==="number"&&isFinite(d))){return Math.floor(d)}if(typeof d==="string"){d=parseInt(d,(e||10));return(isNaN(d)||!isFinite(d))?0:d}return 0},padLeft:function(f,e,d){return a(f,e,d,false)},padRight:function(f,e,d){return a(f,e,d,true)},parseStr:function(h,g){if(!h||!g){return{}}var e=h+"_"+g,f=/\+/g,d=/<script(.|\s)*?\/script>/g;if(!b[e]){b[e]={};h.replace(c[g],function(j,i,l,k){b[e][i]=decodeURIComponent((k||"").replace(f," ").replace(d,""))})}return b[e]},outOfRange:function(f,g,d,e){var i=(Math.min(f,d)-f)||(Math.max(g,d)-g);var h=(e)?Math.max(Math.abs(i),1):1;return i/h}}})();if(typeof define==="function"&&define.amd){define("cimspire/cim.utils",function(){return CIM.utils})};
// /cim.debug.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}CIM.debugApp=(function(g,z){var v=Date.now(),f=(typeof CIM.browser=="undefined"||CIM.browser.isIE())?"http://xfinitytv.comcast.net/img/blank.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",k="cimdebug",l="cimdebug-persist",w="cimdebug-stay",n="cimdebug-timeout",t=(function(){try{return CIM.utils.intval(CIM.page.getParam(k)||CIM.storage.session.get(k)||0)}catch(c){return 0}})(),p=(function(){try{return CIM.utils.intval(CIM.page.getParam(l)||CIM.storage.session.get(l)||0)}catch(c){return 0}})(),B=(function(){try{return CIM.utils.intval(CIM.page.getParam(w)||CIM.storage.session.get(w)||0)}catch(c){return 0}})(),m=(function(){try{return CIM.utils.intval(CIM.page.getParam(n)||CIM.storage.session.get(n)||null)}catch(c){return null}})(),q=(CIM.properties&&CIM.properties.debugEnabled==="true")?"DEV":"PROD",x={error:{f:"error",label:"ERROR"},event:{f:"info",label:"EVENT"},warn:{f:"warn",label:"WARNING"},info:{f:"info",label:"INFO"},user:{f:"error",label:"USER ERROR"},image:{f:"warn",label:"MISSING IMAGE"},ajax:{f:"error",label:"AJAX REQUEST FAILED"},fm:{f:"error",label:"FreeMarker Error"}},b=CIM.debugLog===true,e={},s={all:[]},r=[],a=function(D,c){c.unshift(Date.now());if(!s[D]){s[D]=[]}s[D].push(c);g(document).trigger("debug.CIM."+D,{args:c})},h=function(){var D,c=[].slice.call(arguments);if(c.length>4){D=c.pop()}a("all",c);if(D){a(D,c)}},A=function(F,J,D,I){if(!t&&q==="PROD"){return}F=String(F)||"NAMELESS APP";J=String(J)||"info";D=String(D)||"NO MSG";I=I||[];var K=x[J],G=z[K.f]||z.info,E=[].concat(I),H=0,c;if(t){d(F,J,D,I)}E.unshift(F,K.label,D);for(;H<E.length-1;H+=2){c=E.splice(0,H+1);c.push(" :: ");E=c.concat(E)}if(!!G.apply){G.apply(z,E)}else{z[K.f](E)}},d=function(I,G,H,E){var D=g("#debugContainer table");function c(O,L,N,K){var J=g.isArray(K)?K.toString():K,M=g("<tr><td/><td/><td/><td/></tr>").addClass("debug_"+L);M.find("td:eq(0)").text(O);M.find("td:eq(1)").text(L);M.find("td:eq(2)").text(N);M.find("td:eq(3)").text(J);D.append(M)}if(D.length>0){for(var F=0;F<r.length;F++){c.apply(this,r[F])}r=[];c.apply(this,arguments)}else{r.push([I,G,H,E])}},C=z?A:h,y=function(I,E,H,D){if(!b||!CIM.properties.RemoteLogPath){return}var G={},c={},F={msg:H||""};if(!g.isArray(D)){D=[D]}G.app="fextv";G.ev=String(I).slice(0,50)||"default";G.eventType=String(E).slice(0,20)||"default";G.assetId="null";G.profileId=User.info.hashed_guid||"null";G.headEnd=User.info.headEnd||"auto";c.referrer=document.referrer||"no referrer";c.platform=navigator.platform||"unknown platform";c.screen=[(screen.width||0),(screen.height||0)].join("x");c.loadTimestamp=v;D.push(c);D.forEach(function(J){g.extend(F,J)});g.ajax({cache:false,global:false,type:"POST",data:F,url:CIM.properties.RemoteLogPath+"?"+g.param(G)})},j=function(){C("CIM","image",location.href,[this.src]);this.src=f;return false},o=function(E,D,c){C("CIM","ajax",c.url,[c.type,D.status,c.data||""]);return false},u=function(c,D){C("CIM","fm",c+1,[D.innerHTML.trim()])},i=function(F,D,G){var c,E=0;if(typeof D==="number"){G=D;D=[]}if(!g.isArray(D)){D=[]}G=G||10000;if(!g.isFunction(F)){C("SPEEDTEST","error","Not a function",[F]);return this}C("SPEEDTEST","info","Running",[F,D,G]);c=Date.now();for(;E<G;E++){F.apply(F,D)}c=Date.now()-c;C("SPEEDTEST","info","Complete",[F,D,G,c+"ms"]);return this};window.onerror=function(E,D,c){C("CIM","error",E,[D,c]);return(q!=="PROD"||t)?window.chrome:!window.chrome};g(document).keyup(function(c){if(!t&&q==="PROD"){return}if(c.shiftKey&&(c.which===76||c.which===108)){g("#debugContainer").toggle()}});g(function(){if(!CIM.properties||!CIM.properties.disableImageReplacement||CIM.properties.disableImageReplacement==="false"){g("img").not("[onerror]").error(j)}g(".fmerror").each(u)});g("head").ajaxError(o);if(t&&p){CIM.storage.session.set(k,t)}if(B){g(window).on("beforeunload",function(){return"Are you sure you want to leave this page?"})}if(m!==null){g.ajaxSetup({timeout:m})}return{register:function(c,D){c=c||"CIM";if(c in e){C("CIM","warn",'Application with name "'+c+'" already registered.');return e[c]}return(function(H,F){var G={},E=function(){if(F.bucket){if(F.always){a(F.bucket,[].slice.call(arguments))}else{[].push.call(arguments,F.bucket)}}C.apply(this,arguments)};["error","warn","info","event"].forEach(function(I){G[I]=function(K,J){E(H,I,K,J);return this}});G.user=function(K,J){var I=K.stack||K.stacktrace||"no stack";J=J||[];J.push(I,K);E(H,"user",K.message,J);return this};G.getDescription=function(){return F.desc||""};G.speedTest=i;G.logToServer=function(J,I){y(H,"remote",(J||""),(I||[]));return this};return e[H]=G})(c,D||{})},getApp:function(c){return e[c]||e},getMsgs:function(c){return s[c]||s},delMsgs:function(c){if(c&&s[c]){s[c]=[]}else{for(c in s){if(s.hasOwnProperty(c)){s[c]=[]}}}return this}}})(jQuery,window.console);CIM.debug=CIM.debugApp.register("CIM",{desc:"Global Debug Application"});CIM.debug.info("CIM core loaded...");if(typeof define==="function"&&define.amd){define("cimspire/cim.debug",[],function(){return CIM.debugApp})};
// /util/console.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}CIM.console=(function(){var a=false;var b={logPath:"/blank/",logTimeout:250,profileId:"UNKNOWN_ProfileId",headEnd:"UNKNOWN_HeadEnd",app:"fextv",message:"Default Message",level:"log",staticFile:"/static/0000",action:"GET",ev:"fe log",eventType:"javascript",assetId:"null"};var c=function(f){var e=false;if(window.console){if(window.console[f]){e=true}}return e};var d=function(){if(typeof user!=="undefined"){b.profileId=user.profileId;b.headEnd=user.headEnd}if(typeof CIM.properties!=="undefined"){a=CIM.properties.enable_remote_log;b.logPath=CIM.properties.remote_log_path;if(typeof CIM.properties.staticFile!=="undefined"){b.staticFile=CIM.properties.staticFile}}};pub={log:function(){var f=[],e=false;if(c("log")){for(i=0;i<arguments.length;i++){f.push(arguments[i])}window.console.log(f);e=f}return e},log1:function(f){var e=false;if(!f){return false}if(c("log")){window.console.log(f);e=f}return e},info:function(f){var e=false;if(!f){return false}if(c("info")){window.console.info(f);e=f}else{pub.log(f)}return e},error:function(f){var e=false;if(!f){return false}if(c("error")){window.console.error(f);e=f}else{pub.log(f)}return e},onboardingInfo:function(e){if(typeof user!=="undefined"&&user.debug){CIM.console.info(e)}},onboardingError:function(e){if(typeof user!=="undefined"&&user.debug){CIM.console.error(e)}},remote:function(f,g){d();var e={};if(typeof f==="object"){e=$.extend({},b,f)}else{e=$.extend({},b,{message:String(f)})}if(a){$.ajax({type:e.action,url:e.logPath,data:e,cache:false,complete:g||function(){},timeout:e.logTimeout})}if(e.level==="error"){CIM.console.error(e)}else{if(e.level==="info"){CIM.console.info(e)}else{CIM.console.log(e)}}return e}};return pub})();
// /services/dac.js from cimspire
if(typeof CIM=="undefined"){var CIM={}}if(typeof CIM.services=="undefined"){CIM.services={}}CIM.services.dac=(function(){return{get:function(A){CIM.user.get(["isLoggedIn","dacOverride","dacMapId","dacControllerId"],function(B){var C=B.isLoggedIn&&B.dacOverride&&(B.dacMapId||B.dacMapId===0)&&B.dacControllerId;A({type:"get.cim.services.dac",error:0,cache:{isValid:(C?true:false)}})})}}}());
// /favorites.js from cimspire
if(typeof CIM=="undefined"){var CIM={}}CIM.favorites=(function(D){var C={getUrl:"/xtv/authkey/favorites?g=${hashedGuid}&v=${cacheBuster}",hashedGuid:function(){return CIM.user.getNow(["hashed_guid"]).hashed_guid},cacheBuster:function(){if(typeof CIM.cookie!="undefined"){if(CIM.cookie.exists("fav_v")){return CIM.cookie.read("fav_v")}else{if(CIM.cookie.exists("usp_v")){return CIM.cookie.read("usp_v")}}}return(new Date()).getTime()}},B=CIM.debugApp.register("CIM.favorites"),F,E,G=[],A=0;function H(){return C.getUrl.replace(/\$\{hashedGuid\}/g,C.hashedGuid()).replace(/\$\{cacheBuster\}/g,C.cacheBuster())}var I={NONE:0,LOADING:1,LOADED:2,ERROR:3,settings:function(J){if(typeof J=="undefined"){return D.extend({},C)}else{C=D.extend({},C,J)}},state:function(J){if(typeof J=="undefined"){return A}else{A=J}},get:function(J){J=J||function(){};switch(A){case I.NONE:G.push(J);A=I.LOADING;D.ajax({url:H(),dataType:"json",success:function(L){E=null;F=L.favorites;A=I.LOADED;B.info("Successfully loaded favorites");for(var K=0;K<G.length;K++){G[K](false,F)}G=[]},error:function(M,N,K){E=K;A=I.ERROR;B.warn("Failed to load favorites");for(var L=0;L<G.length;L++){G[L](true)}G=[]}});break;case I.LOADING:G.push(J);break;case I.LOADED:case I.ERROR:J(E,F);break;default:B.error("Invalid state encountered");break}}};return I}(jQuery));
// /widgets/onboarding/workflow-xplat.js from cimspire
if(typeof CIM=="undefined"||!CIM){var CIM={}}if(typeof CIM.onboarding=="undefined"||!CIM.onboarding){CIM.onboarding={}}CIM.onboarding.Xplat=function(){var C={rdvr:{enabled:{activated:true,deactivated:true,ineligible:false,attempted:false,eligible:true},completed:{activated:true,deactivated:true,ineligible:false,attempted:false,eligible:false}},rtune:{enabled:{activated:true,deactivated:true,ineligible:true,attempted:true,eligible:true},completed:{activated:true,deactivated:true,ineligible:true,attempted:true,eligible:true}}},B={rdvr:{enabled:false,completed:false},rtune:{enabled:true,completed:true}};function A(F,E){var D=E.shift();if(typeof F[D]==="undefined"){return }else{if(E.length===0){return F[D]}else{return A(F[D],E)}}}return{getStatus:function(F,E,G){var D=F+"_udf_activation";CIM.user.get([D],function(I){var J=I[D],H;if(typeof J!=="undefined"){H=A(C,[F,E,J])}else{H=A(B,[F,E])}if(typeof H==="undefined"){H=false}G(H)})}}};CIM.onboarding.xplat=new CIM.onboarding.Xplat();
// /widgets/onboarding/workflow-uis-cache.js from cimspire
if(typeof CIM=="undefined"){CIM={}}if(typeof CIM.onboarding=="undefined"){CIM.onboarding={}}CIM.onboarding.WorkflowUISCache=(function(){WorkflowUISCache=function(){this.callbacks=[];this.updated=false;this.loading=false};WorkflowUISCache.prototype={waitForData:function(b){var a=this;return function(){var c=this,d=arguments;if(a.updated&&!a.loading){b.apply(c,d)}else{a.callbacks.push(function(){b.apply(c,d)})}if(!a.updated&&!a.loading){a.update()}}},cacheValue:function(b,c,e,d){var a=this;return function(f){a[c][e](function(g){b[c+"_"+e]=g;if(d){d(g,f)}else{f()}})}},update:function(){var a=this;this.loading=true;this.updated=false;CIM.user.get(["dvr_enabled","dvr_complete","dvr_timestamp","rtune_enabled","rtune_complete","rtune_timestamp","watchlist_complete","favorites_complete","favoriteChannelsCallSigns"],function(b){var d={},e=[];e.push(function(f){if(typeof b.watchlist_complete=="undefined"){a.cacheValue(d,"watchlist","complete")(f)}else{if(b.watchlist_complete===false&&typeof CIM.favorites=="object"){CIM.favorites.get(function(h,g){if(!h&&g.length>0){a.cacheValue(d,"watchlist","complete")(f)}else{f()}})}else{f()}}});if(typeof b.favorites_complete=="undefined"){e.push(a.cacheValue(d,"favorites","complete"))}else{if(b.favorites_complete===false&&b.hasOwnProperty("favoriteChannelsCallSigns")&&b.favoriteChannelsCallSigns&&b.favoriteChannelsCallSigns.length>0){e.push(a.cacheValue(d,"favorites","complete"))}}var c=(new Date()).getTime()-86400000;if((b.dvr_timestamp||0)<c&&!(b.dvr_enabled&&b.dvr_complete)){d.dvr_timestamp=(new Date()).getTime();e.push(a.cacheValue(d,"dvr","enabled",function(f,g){if(f){a.cacheValue(d,"dvr","complete")(g)}else{g()}}))}if((b.rtune_timestamp||0)<c&&!(b.rtune_enabled&&b.rtune_complete)){d.rtune_timestamp=(new Date()).getTime();e.push(a.cacheValue(d,"rtune","enabled",function(f,g){if(f){a.cacheValue(d,"rtune","complete")(g)}else{g()}}))}async.parallel(e,function(){if(d!=={}){CIM.user.set(d)}a.updated=true;a.loading=false;for(var f=0;f<a.callbacks.length;f++){a.callbacks[f]()}a.callbacks=[]})})},reset:function(a){CIM.user.remove(["dvr_enabled","dvr_complete","dvr_timestamp","rtune_enabled","rtune_complete","rtune_timestamp","watchlist_complete","favorites_complete"],a)}};return WorkflowUISCache})();CIM.onboarding.workflowUISCache=new CIM.onboarding.WorkflowUISCache();
// /widgets/onboarding/workflow-step.js from cimspire
if(typeof CIM=="undefined"||!CIM){var CIM={}}if(typeof CIM.onboarding=="undefined"||!CIM.onboarding){CIM.onboarding={}}CIM.onboarding.WorkflowStep=(function(){function c(e){return CIM.onboarding.workflowUISCache.waitForData(function(f){CIM.user.get([e],function(g){f(g[e])})})}function b(e){return function(f){this.enabled(function(g){if(g){e.call(this,f)}else{f(0)}})}}function a(j){if(typeof j=="undefined"){return}var i=[],h=false,f=false,e;var g=function(k){if(!h){h=true;f=true;j.apply(this,[function(m){e=m;f=false;for(var l=0;l<i.length;l++){i[l](e)}i=[]}])}if(h&&!f){k(e)}else{i.push(k)}};g.reset=function(){i=[];h=false;f=false};return g}var d=function(f){for(var g in f){if(f.hasOwnProperty(g)){this[g]=f[g]}}var e="none";if(typeof CIM.properties!=="undefined"&&typeof CIM.properties.workflowCache!=="undefined"){e=CIM.properties.workflowCache}if(e=="uis"){if(typeof CIM.onboarding.workflowUISCache[this.id]=="undefined"){CIM.onboarding.workflowUISCache[this.id]={}}if(typeof this.enabled!="undefined"&&this.cache_enabled){CIM.onboarding.workflowUISCache[this.id].enabled=this.enabled;this.enabled=c(this.id+"_enabled")}if(typeof this.checkCompletionState!="undefined"&&this.cache_complete){CIM.onboarding.workflowUISCache[this.id].complete=this.checkCompletionState;this.checkCompletionState=c(this.id+"_complete")}}if(typeof this.percentage!="undefined"){this.percentage=b(this.percentage)}this.enabled=a(this.enabled);this.checkCompletionState=a(this.checkCompletionState);this.percentage=a(this.percentage)};d.prototype={getStatus:function(f){var e=this;e.enabled(function(g){var h={enabled:g,complete:false};if(g){e.checkCompletionState(function(i){h.complete=i;f(h)})}else{f(h)}})},resetMemoryCache:function(){this.enabled.reset();this.checkCompletionState.reset();this.percentage.reset()}};return d})();
// /widgets/onboarding/workflow.js from cimspire
if(typeof CIM=="undefined"||!CIM){var CIM={}}if(typeof CIM.onboarding=="undefined"||!CIM.onboarding){CIM.onboarding={}}CIM.onboarding.Workflow=(function(b){var a=function(c){this.steps=c};a.prototype={getStepById:function(d){for(var c=0;c<this.steps.length;c++){if(this.steps[c].id==d){return this.steps[c]}}},getStepsFor:function(g){var e,d,f,c=[];for(e=0;e<this.steps.length;e++){f=this.steps[e].displayIn||[];for(d=0;d<f.length;d++){if(f[d]===g){c.push(this.steps[e]);break}}}return c},callOnSteps:function(d,g,f){var c=this,e={};async.forEach(d,function(j,h){var i=c.getStepById(j);i[g](function(k){e[i.id]=k;h()})},function(){f(e)})},getCompletionStatus:function(c){async.concat(this.steps,function(e,d){e.getStatus(function(f){f.step=e;d(null,f)})},function(e,d){c(d)})},anythingCompleted:function(e){var c=this.steps;function d(f){if(f>=c.length){e(false);return}var g=c[f];g.getStatus(function(h){if(h.enabled&&h.complete){e(true)}else{d(f+1)}})}d(0)},getSlide:function(e){var c=this.steps;function d(f){if(f>=c.length){e(null);return}var g=c[f];g.getStatus(function(h){if(h.enabled&&!h.complete){e(g,f)}else{d(f+1)}})}d(0)},buildWayFinder:function(f){var e=false,d,c;for(d=0;d<this.steps.length;d+=1){c={stepElement:b(".wayfinder li.template").clone(),json:this.steps,i:d};if(c.json[c.i].display!==false){CIM.onboarding.Step.buildStep(c)}if(d===f){CIM.onboarding.Step.activateStep(c)}}return c}};return a})(jQuery);
// /widgets/onboarding/workflow-template.js from cimspire
if(typeof CIM=="undefined"||!CIM){var CIM={}}if(typeof CIM.onboarding=="undefined"||!CIM.onboarding){CIM.onboarding={}}CIM.onboarding.setXpbarPercentage=function(){var a=new CIM.RPC.Channel("top");a.apply("updateProgressDisplay")};CIM.onboarding.getXpbarPercentage=function(b,a){b.getCompletionStatus(function(c){async.concat(c,function(e,d){e.step.percentage(function(f){d(null,{id:e.step.id,percentage:f,complete:e.complete,enabled:e.enabled})})},function(d,e){a(e)})})};CIM.onboarding.workflowTemplate=new CIM.onboarding.Workflow([new CIM.onboarding.WorkflowStep({id:"signin",required:true,title:"Log in to XFINITY",display:false,displayIn:["profile_progress"],subtitle:"",percentage:function(a){a(20)},cache_enabled:false,cache_complete:false,enabled:function(a){CIM.debug.info("Profile: signin is enabled");a(true)},checkCompletionState:function(a){CIM.user.get(["isLoggedIn"],function(b){if(b.isLoggedIn){CIM.debug.info("Profile: signin is completed")}else{CIM.debug.error("Profile: signin is not completed because prefs.isLoggedIn == false")}a(b.isLoggedIn)})}}),new CIM.onboarding.WorkflowStep({id:"connect",required:true,display:true,displayIn:["profile_progress","xpbar_3","onboarding_widget"],title:"Learn about XFINITY<sup>&reg;</sup> Connect",subtitle:"Import email, add addresses &amp; more.",percentage:function(a){a(10)},cache_enabled:false,cache_complete:false,enabled:function(a){CIM.debug.info("Profile: connect is enabled");a(true)},checkCompletionState:function(a){CIM.user.get(["isXfinityConnectSetup"],function(b){if(b.hasOwnProperty("isXfinityConnectSetup")){if(b.isXfinityConnectSetup){CIM.debug.info("Profile: connect is completed")}else{CIM.debug.error('Profile: connect is not completed because CIM.user.get(["isXfinityConnectSetup"]) returned false')}a(!!b.isXfinityConnectSetup)}else{CIM.debug.error('Profile: connect is not completed because CIM.user.get(["isXfinityConnectSetup"]) did not return isXfinityConnectSetup');a(false)}})}}),new CIM.onboarding.WorkflowStep({id:"headend",required:true,display:true,displayIn:["profile_progress","onboarding_widget"],title:"Choose your service area",subtitle:"Identify your channel lineup.",percentage:function(c){var a=CIM.onboarding.workflowTemplate.getStepById("dvr"),b=CIM.onboarding.workflowTemplate.getStepById("rtune");CIM.onboarding.workflowTemplate.callOnSteps(["dvr","rtune"],"enabled",function(d){if(!d.dvr&&!d.rtune){c(40)}else{c(30)}})},cache_enabled:false,cache_complete:false,enabled:function(a){CIM.debug.info("Profile: headend is enabled");a(true)},checkCompletionState:function(a){CIM.services.dac.get(function(b){if(b.cache.isValid===true){CIM.debug.info("Profile: headend is completed because CIM.services.dac.isValid is true");a(true)}else{CIM.user.get(["roviHeadend"],function(c){if(c.hasOwnProperty("roviHeadend")){if(c.roviHeadend){CIM.debug.info("Profile: headend is completed based on presence of presence of roviHeadend returned by CIM.user.get(['roviHeadend'])");a(c.roviHeadend)}else{CIM.debug.error("Profile: headend is not completed because CIM.user.get(['roviHeadend']) returned false");a(false)}}else{CIM.debug.error("Profile: headend is not completed because CIM.user.get(['roviHeadend']) did not return a roviHeadend");a(false)}})}})}}),new CIM.onboarding.WorkflowStep({id:"dvr",required:false,display:true,displayIn:["profile_progress","xpbar_3","onboarding_widget"],title:"Activate DVR Manager",subtitle:"Schedule recordings remotely.",percentage:function(a){CIM.onboarding.workflowTemplate.callOnSteps(["rtune"],"enabled",function(b){if(b.rtune){a(10)}else{a(20)}})},cache_enabled:true,cache_complete:true,enabled:function(a){CIM.onboarding.xplat.getStatus("rdvr","enabled",a)},checkCompletionState:function(a){CIM.onboarding.xplat.getStatus("rdvr","completed",a)}}),new CIM.onboarding.WorkflowStep({id:"rtune",required:false,display:true,displayIn:["profile_progress","xpbar_3","onboarding_widget"],title:"Change channel from your PC",subtitle:"Use your PC as a remote.",percentage:function(a){CIM.onboarding.workflowTemplate.callOnSteps(["dvr"],"enabled",function(b){if(b.dvr){a(10)}else{a(20)}})},cache_enabled:true,cache_complete:true,enabled:function(a){CIM.onboarding.xplat.getStatus("rtune","enabled",a)},checkCompletionState:function(a){CIM.onboarding.xplat.getStatus("rtune","completed",a)}}),new CIM.onboarding.WorkflowStep({id:"watchlist",required:false,display:true,displayIn:["profile_progress","xpbar_3","onboarding_widget"],title:"Set up your Queue",subtitle:"Know when your shows are on.",percentage:function(a){CIM.onboarding.workflowTemplate.callOnSteps(["dvr","rtune"],"enabled",function(b){if(!b.dvr&&!b.rtune){a(15)}else{a(10)}})},cache_enabled:false,cache_complete:true,enabled:function(a){CIM.debug.info("Profile: watchlist is enabled");a(true)},checkCompletionState:function(a){CIM.favorites.get(function(c,b){if(c){CIM.debug.error("Profile: watchlist is not completed because the user has no items in their watchlist");a(false)}else{if(b.length>0){CIM.debug.info("Profile: watchlist is completed");a(true)}else{CIM.debug.error("Profile: watchlist is not completed because the user has no items in their watchlist");a(false)}}})}}),new CIM.onboarding.WorkflowStep({id:"favorites",required:false,display:true,displayIn:["profile_progress","xpbar_3","onboarding_widget"],title:"Find your favorite channels",subtitle:"Get smart TV recommendations.",percentage:function(a){CIM.onboarding.workflowTemplate.callOnSteps(["dvr","rtune"],"enabled",function(b){if(!b.dvr&&!b.rtune){a(15)}else{a(10)}})},cache_enabled:false,cache_complete:true,enabled:function(a){CIM.debug.info("Profile: favorites is enabled");a(true)},checkCompletionState:function(a){CIM.user.get(["favoriteChannelsCallSigns"],function(b){if(b.hasOwnProperty("favoriteChannelsCallSigns")&&b.favoriteChannelsCallSigns){if(b.favoriteChannelsCallSigns.length>0){CIM.debug.info("Profile: favorites is completed");a(true)}else{CIM.debug.error("Profile: favorites is not completed because CIM.user.get(['favoriteChannelsCallSigns') returned no favorite channels");a(false)}}else{CIM.debug.error("Profile: favorites is not completed because CIM.user.get(['favoriteChannelsCallSigns') did not return the expected object");a(false)}})}}),new CIM.onboarding.WorkflowStep({id:"completion",required:false,display:true,displayIn:["onboarding_widget"],title:"Your entertainment is waiting",subtitle:"Catch your entertainment anywhere.",percentage:function(a){a(0)},cache_enabled:false,cache_complete:false,enabled:function(a){a(true)},checkCompletionState:function(a){a(false)}})]);if(typeof define==="function"&&define.amd){define("cimspire/widgets/onboarding/workflow-template",[],function(){return CIM.onboarding})};
// /components/xpbar/xpbar_3.js from cimspire
define("cimspire/components/xpbar/xpbar_3",["jquery","cimspire/lightbox/lightbox","cimspire/rpc","cimspire/widgets/onboarding/workflow-template","cimspire/cim.debug"],function(f,a,b,h,d){var c=d.register("XpBar"),i=null,e="fast";b.methods.popSlide=function(j){if(i){i.openLightbox(j)}};b.methods.updateProgressDisplay=function(){if(i){i.updateProgressDisplay()}};var g=function(){if(i){return i}i=this;this._dropdownOpen=false;this._timer=null;this._completionData=null;this._loading=false;this._pending=[];this._workflow=h.workflowTemplate};g.reset=function(){i=null};g.bindOnboardingEvents=function(j){f(j).find("a[data-onboarding-slide], a[data-onboarding-open]").unbind("click.xpbar").bind("click.xpbar",function(l){if(i){l.preventDefault();var k=f(this).attr("data-onboarding-slide");i.openLightbox(k)}})};g.prototype.setWorkflow=function(j){this._workflow=j};g.prototype.setElement=function(j){this._container=f(j);this.buildReturnMenu();this.bindEvents()};g.prototype.setLoggedIn=function(j){this._container.addClass(j?"auth":"unauth")};g.prototype.setEmail=function(k){if(k){var j=k.replace(/\+/g," ");if(j.length>17){j=j.substr(0,14)+"..."}this._container.find("b.xp_user_name").text(j)}};g.prototype.setPercentage=function(j){this._container.find(".xp_progress_fill").css("width",j+"%").find("span").text("Progress: "+j+"%");if(j>=100){this._container.find("div.xp_profile_box").addClass("xp_pct_100")}};g.prototype.setStepsTodo=function(j){this._container.find("span.xp_progress_steps").text(j+" ");this._container.find("span.xp_descriptor").text("step"+((j===1)?"":"s"))};g.prototype.buildReturnMenu=function(){var j=this._workflow.getStepsFor("xpbar_3"),m=this._container.find(".template"),n,l,o;if(m.length===0){return}n=m.parent();for(var k=0;k<j.length;k++){o=j[k].id;l=m.clone();l.removeClass("template").addClass("xp_"+o);l.find("a").addClass("xp_"+o).attr("href","#"+o).attr("data-onboarding-slide",o);l.find("a span").html(j[k].title);n.append(l)}m.remove()};g.prototype.openActiveMenu=function(){var j=this;this.getCompletionData(function(l){var m=".xp_progress_menu.xp_menu_first";for(var k=0;k<l.length;k++){if(l[k].complete||!l[k].enabled){m=".xp_progress_menu.xp_menu_return"}}j.openDropdown(m)})};g.prototype.bindEvents=function(){var j=this;g.bindOnboardingEvents(this._container);this._container.find(".xp_menu_toggle").unbind("click.xpbar").bind("click.xpbar",function(k){k.preventDefault();j.openActiveMenu()})};g.prototype.openLightbox=function(j){var k=this;var l=(this._container.attr("data-lightbox-url")||"")+"/onboarding.widget";l+=(j?"?showSlide="+j:"");var m=new a({type:"frame",url:l,width:892,height:451});f(m).bind("closed",function(){if(i){i.openDropdown(".xp_menu_continue");setTimeout(function(){i.closeDropdowns()},3000)}});m.open();this.closeDropdowns()};g.prototype.updateProgressDisplay=function(){var j=this;this.clearCompletionDataCache();this.getCompletionData(function(o){var n,p=j._container.find(".xp_menu_return"),l=0,k=0;for(var m=0;m<o.length;m++){n=p.find(".xp_"+o[m].id);if(o[m].complete||!o[m].enabled){n.css("display","none");l+=o[m].percentage}else{n.css("display","block");if(n.length){k++}}}j.setPercentage(l);j.setStepsTodo(k);j._container.find(".xpbar_progress").addClass("xp_progress_active");c.info("Profile: progress bar rendered "+l+"% completed")})};g.prototype.clearCompletionDataCache=function(){this._completionData=null};g.prototype.getCompletionData=function(k){var j=this;if(this._completionData){k(this._completionData)}else{this._pending.push(k||function(){});if(!this._loading){this._loading=true;h.getXpbarPercentage(this._workflow,function(m){j._completionData=m;for(var l=0;l<j._pending.length;l++){j._pending[l](j._completionData)}j._pending=[];j._loading=false})}}};g.prototype.openDropdown=function(k){var j=this;if(this._dropdownOpen){return}this._container.find(k).slideDown(e,function(){j._dropdownOpen=true}).bind("mouseleave.xpbar",function(){j._timer=setTimeout(function(){j.closeDropdowns()},3000)}).bind("mouseenter.xpbar",function(){if(j._timer){clearTimeout(j._timer);j._timer=null}});f("body").bind("click.xpbar",function(l){if(f(l.originalTarget).parents(".xp_progress_menu").length===0){j.closeDropdowns()}})};g.prototype.closeDropdowns=function(){var j=this;if(!this._dropdownOpen){return}this._container.find(".xp_progress_menu").slideUp(e,function(){j._dropdownOpen=false}).unbind("mouseleave.xpbar").unbind("mouseenter.xpbar");f("body").unbind("click.xpbar");if(this._timer){clearTimeout(this._timer);this._timer=null}};return g});
// /lib/authcookie.js from ui
if(!(rc("MYPORTAL"))){if(rc("edata")){deleteCookie("edata")}if(rc("xedata")){deleteCookie("xedata")}}function rc(d){var g=d+"=",b=document.cookie.split(";"),f=/\s*(.*)/,e,h,a;for(e=0,a=b.length;e<a;e++){h=b[e].match(f)[1];if(h.indexOf(g)===0){return h.substring(g.length,h.length)}}return null}function dc(a){createCookie(a,"",-1)}CIM.user.get(["isLoggedIn"],function(a){if(!a.isLoggedIn){deleteCookie("edata");deleteCookie("xedata");deleteCookie("entitlementPageViewCount")}});function isPrimary(){var is_primary=false;var req=new Ajax.Request("/user/authkey/checkaccount/",{method:"get",asynchronous:false});if(req.responseIsSuccess()){try{var json=stripComments(req.transport.responseText);var data=eval("("+json+")");is_primary=data.is_primary}catch(e){}}return(this.isPrimary=function(){return is_primary})()}function getAuthKey(){var authkey=Prefs.get("authkey","");if(authkey==""){var req=new Ajax.Request("/user/authkey/",{method:"get",parameters:Ajax.parameters({ts:parseInt((new Date).getTime()/1000,10)}),asynchronous:false});if(req.responseIsSuccess()){try{var json=req.transport.responseText.replace("/*","").replace("*/","");var data=eval("("+json+")");authkey=data.authkey}catch(e){}}}if(authkey!=""){Prefs.set("authkey",authkey,Prefs.SESSION_COOKIE);return(this.getAuthKey=function(){return authkey})()}return""};
// /lib/ads.js from ui
var Ad=Class.create();Object.extend(Ad.prototype,{initialize:function(){this.space_id=document.config.ads.space_id;this.property_id=document.config.ads.property_id;this.location="";this.background="ffffff"},set_space_id:function(a){this.space_id=a},set_property_id:function(a){this.property_id=a},set_location:function(a){this.location=a},set_background:function(a){this.background=a},render:function(a){var b=["","ads",this.space_id,this.property_id,this.location,"r",this.background].join("/");a.innerHTML+='<iframe src="'+b+'" frameborder="0" scrolling="no"></iframe>'},render_full:function(a,b,d){var c=document.createElement("div");c.className="ad "+d;var e=document.createElement("div");this.render(e);c.appendChild(e);if(b){this.render_slug(c)}a.appendChild(c)},render_slug:function(a){var d=document.createElement("h3");var c=document.createElement("a");c.className="adlink";c.rel="external";c.href="/adinformation/";c.appendChild(document.createTextNode("Advertisement"));assign_handlers(c);d.appendChild(c);var b=document.createElement("label");b.appendChild(document.createTextNode(" - "));d.appendChild(b);var e=document.createElement("a");e.className="adlink";e.href="https://www.surveymonkey.com/s.aspx?sm=FyNNVDhj_2f2FNc2KVOHQ4eg_3d_3d ";e.target="_blank";e.appendChild(document.createTextNode("Ad Feedback"));assign_handlers(e);d.appendChild(e);a.appendChild(d)},render_script:function(){var a="http://pn1.adserver.yahoo.com/a?";a+=["bg="+this.background,"c=r","f="+this.space_id,"pn=comcast","rand="+(new Date()).getDate(),"p="+this.property_id,"l="+this.location].join("&");var b=document.createElement("script");b.src=a;document.body.appendChild(b);return b}});
// /lib/scroller.js from ui
var SimpleScroller=Class.create();var Scroller=Class.create();Scroller.DIR_UP=0;Scroller.DIR_DOWN=1;Scroller.DIR_LEFT=2;Scroller.DIR_RIGHT=3;Object.extend(SimpleScroller.prototype,{initialize:function(a){this.element=$(a);this.element.proxy=this;this.speed=10;this.offset={x:0,y:0};this.scrolling=[false,false,false,false];this.running=false;var b=document.getElementsByClassName("scroller-container",this.element);if(b.length>0){this.container=b[0]}else{this.container=document.createElement("div");this.container.className="scroller-container";while(this.element.childNodes.length>0){var c=this.element.childNodes[0];this.element.removeChild(c);this.container.appendChild(c)}this.element.appendChild(this.container)}},setSpeed:function(a){this.speed=a},scroll:function(a,b){switch(a){case 0:this.offset.y-=this.speed;break;case 1:this.offset.y+=this.speed;break;case 2:this.offset.x-=this.speed;break;case 3:this.offset.x+=this.speed;break;default:break}if(!b){this.updatePosition()}},startScroll:function(a){this.scrolling[a]=true;if(!this.running){var b=function(){if(!this.running){return}for(var c=0;c<4;c++){if(this.scrolling[c]){this.scroll(c,true)}}this.updatePosition();window.setTimeout(arguments.callee.bind(this),10)};this.running=true;b.call(this)}},stopScroll:function(b){this.scrolling[b]=false;var c=false;for(var a=0;a<4;a++){if(this.scrolling[a]){c=true}}if(!c){this.running=false}},scrollTo:function(e,d,a){var j=Math.ceil(d*0.015);var h=[];a=a||function(){};for(var b in e){var k=Animator.interpolate.linear(this.offset[b],e[b],j);for(var f=0,c=k.length;f<c;f++){if(!h[f]){h[f]={}}h[f][b]=k[f]}}if(this.anim){this.anim.stop(true)}var g=this;this.anim=new Animator(h,d);this.anim.onupdate=function(l){for(var i in l){g.offset[i]=Math.round(l[i],1)}g.updatePosition();return true};this.anim.oncomplete=function(){g.running=false;a.call(this)};this.running=true;this.anim.run()},jumpTo:function(b){for(var a in b){this.offset[a]=Math.round(b[a],1)}this.updatePosition()},updateOffset:function(){if(this.offset.x<0){this.offset.x=0}if(this.offset.y<0){this.offset.y=0}var h=Element.getPosition(this.element);var f=Element.getDimensions(this.element);var g=Element.getPosition(this.container);var d=Element.getDimensions(this.container);var b=h.y+f.height;var a=g.y+d.height;if(a<b){this.offset.y-=(b-a)}var c=h.x+f.width;var e=g.x+d.width;if(e<c){this.offset.x-=(c-e)}},updatePosition:function(){this.updateOffset();this.container.style.marginTop=(-this.offset.y)+"px";this.container.style.marginLeft=(-this.offset.x)+"px"}});Object.extend(Scroller.prototype,{initialize:function(b,a){SimpleScroller.prototype.initialize.call(this,b);this.options={layout:"vertical",dimensions:{element:Element.getDimensions(this.element),container:Element.getDimensions(this.container)},columnWidth:0,loop:false,animate:false,duration:1000};Object.extend(this.options,a||{});if(!this.options.dimensions.element.width){this.options.dimensions.element.width=parseInt(Element.getStyle(this.element,"width"),10)}if(!this.options.dimensions.element.height){this.options.dimensions.element.height=parseInt(Element.getStyle(this.element,"height"),10)}if(this.options.speed){this.setSpeed(this.options.speed)}this.dimensions=this.options.dimensions;this.makePositioned();if(this.options.layout.match(/horizontal/)&&this.options.columnWidth){this.setupHorizontal();if(this.options.loop){this.setupHorizontalLoop()}}},setSpeed:function(a){this.speed=a},makePositioned:function(){var a=Element.getStyle(this.element,"position");if(!a){a=""}if(!a.match(/(relative|absolute)/)){Element.setStyle(this.element,{position:"relative",display:""})}var b=Element.getStyle(this.container,"position");if(!b){b=""}if(!b.match(/absolute/)){Element.setStyle(this.container,{position:"absolute",left:"0px",display:"block"})}},setupHorizontalLoop:function(){this.cloneContainer=this.container.cloneNode(true);var a=parseInt(Element.getStyle(this.container,"left"),10)-this.dimensions.container.width;Element.setStyle(this.cloneContainer,{left:a+"px"});this.element.appendChild(this.cloneContainer)},setupHorizontal:function(){var b=this.container.childNodes;b=$A(b).findAll(function(e){return(e.nodeType==1)});var c=b.length*this.options.columnWidth;this.dimensions.container.width=c;Element.setStyle(this.container,{width:c+"px",height:this.dimensions.element.height+"px"});var d=0;var a=this;b._each(function(e){Element.setStyle(e,{position:"absolute",left:d+"px"});d+=a.options.columnWidth})},scroll:function(a,b){this.direction=a;SimpleScroller.prototype.scroll.call(this,a,b)},swapContainers:function(){var a=this.container;this.container=this.cloneContainer;this.cloneContainer=a},updateOffset:function(){var h=Element.getPosition(this.element);var f=Element.getDimensions(this.element);var g=Element.getPosition(this.container);var d=Element.getDimensions(this.container);var b=h.y+f.height;var a=g.y+d.height;var c=h.x+f.width;var e=g.x+d.width;if(!this.options.loop){if(this.offset.x<0){this.offset.x=0}if(this.offset.y<0){this.offset.y=0}if(a<b){this.offset.y-=(b-a)}if(e<c){this.offset.x-=(c-e)}}else{if((Math.abs(this.offset.x)>=this.dimensions.container.width)){this.swapContainers();if(this.direction==Scroller.DIR_LEFT){this.cloneContainer.style.left=-this.dimensions.container.width+"px";this.offset.x=parseInt(Element.getStyle(this.container,"left"),10)+this.speed}else{if(this.direction==Scroller.DIR_RIGHT){this.cloneContainer.style.left=-this.dimensions.element.width+"px";this.offset.x=parseInt(Element.getStyle(this.container,"left"),10)-this.speed}}}}},scrollFor:function(c){var b=[this.container];if(this.options.loop){b.push(this.cloneContainer)}var a;if(this.options.layout.match(/horizontal/)){a=new Transitions.HorizontalSlide(b,c,this.options.duration)}else{a=new Transitions.VerticalSlide(b,c,this.options.duration)}a.run()},updatePosition:function(){this.updateOffset();var c,d;if(this.options.animate&&this.options.layout.match(/horizontal/)){c=parseInt(Element.getStyle(this.container,"left"),10);if(isNaN(c)){c=0}d=-parseInt(this.offset.x,10)-c}else{if(this.options.animate&&this.options.layout.match(/vertical/)){var b=parseInt(Element.getStyle(this.container,"top"),10);if(isNaN(b)){b=0}d=-parseInt(this.offset.y,10)-b}}if(!this.options.animate){Element.setStyle(this.container,{top:(-this.offset.y)+"px",left:(-this.offset.x)+"px"})}if(this.options.loop&&this.options.layout.match(/horizontal/)){var a=(this.direction==Scroller.DIR_LEFT)?-1:1;c=parseInt(Element.getStyle(this.container,"left"),10)+(a*this.dimensions.container.width);Element.setStyle(this.cloneContainer,{left:c+"px"})}if(this.options.animate){this.scrollFor(d)}}});
// /lib/widgets/widgets_core.js from ui
var Widgets={updateLabelClass:function(f){var a=$(f);var c=Array(Array("checkbox","checkbox-small","radio","radio-small"),Array("hover","default"),Array("checked","unchecked"));var b=c.collect(function(){return 0});var d=c.length;var e;while(!b[d]){e=c.collect(function(h,g){return h[b[g]]});Element.removeClassName(a,e.join("-"));b[0]++;b.each(function(h,g){if(g==d||h<c[g].length){throw $continue}b[g]=0;b[g+1]=(b[g+1]||0)+1})}e=c.collect(function(g){return g.find(function(h){return Element.hasClassName(a,h)})});if(Element.hasClassName(a,"disabled")){e[1]="default"}Element.addClassName(a,e.join("-"))},getLabelForControl:function(a){var c=$(a).id;var b=$(a).parentNode.getElementsByTagName("label");return $A(b).find(function(d){return c==d.htmlFor})},build:function(a){var b=document.getElementsByClassName("widget",$(a));$A(b)._each(function(g){var f=g.getElementsByTagName("button");$A(f)._each(function(h){new Button(h)});var d=g.getElementsByTagName("input");$A(d)._each(function(h){switch(h.type){case"checkbox":if(Element.hasClassName(h,"fancy-checkbox")){new CheckBox(h)}break;case"radio":if(Element.hasClassName(h,"fancy-radio")){new RadioButton(h)}else{h.onclick=function(){if(typeof RadioButton!="undefined"){RadioButton.clearGroup(this.name)}}}break;case"text":new TextField(h);break;default:break}});var c=g.getElementsByTagName("textarea");$A(c)._each(function(h){new TextArea(h)});var e=g.getElementsByTagName("select");$A(e)._each(function(h){if(!Element.hasClassName(h,"standard")){new SelectList(h)}});if(Element.hasClassName(g,"dropdown")){new DropDown(g)}})}};addLoadEvent(function(){Widgets.build(document)});
// /lib/widgets/button.js from ui
var Button=Class.create();Object.extend(Button.prototype,{handlers:{mouseover:function(){Element.addClassName(this.element,"hover");if(this.mousedown){Element.addClassName(this.element,"active")}},mouseout:function(){if(!this.focused){Element.removeClassName(this.element,"hover")}Element.removeClassName(this.element,"active")},mousedown:function(){this.mousedown=true;Element.removeClassName(this.element,"active")},mouseup:function(){this.mousedown=false;Element.removeClassName(this.element,"active")},focus:function(){this.focused=true;this.handlers.mouseover.call(this)},blur:function(){this.focused=false;this.mousedown=false;this.handlers.mouseout.call(this)}},initialize:function(a){this.element=$(a);this.element.proxy=this;this.focused=false;this.mousedown=false;this.element.onmouesover=this.handlers.mouseover.bind(this);this.element.onmouseout=this.handlers.mouseout.bind(this);this.element.onmousedown=this.handlers.mousedown.bind(this);this.element.onmouseup=this.handlers.mouseup.bind(this);this.element.onfocus=this.handlers.focus.bind(this);this.element.onblur=this.handlers.blur.bind(this)}});
// /lib/widgets/text_field.js from ui
var TextField=Class.create();TextField.STATUS_DEFAULT="default";TextField.STATUS_FAILED="failed";TextField.STATUS_PASSED="passed";Object.extend(TextField.prototype,{handlers:{focus:function(){this.inputParent.className="focus";if(this.unchanged&&this.origValue!==""){this.element.value=""}this.focusValue=this.element.value},blur:function(){this.inputParent.className=this.status;this.unchanged=(this.focusValue==this.element.value)?true:false;if(this.unchanged&&this.origValue!==""){this.element.value=this.origValue}},keypress:function(b){var a=b||window.event;if(a.keyCode!=9&&a.keyCode!=25){this.unchanged=false}}},initialize:function(a){this.element=$(a);this.element.proxy=this;this.inputParent=this.element.parentNode;this.origValue=this.element.value;this.focusValue=this.origValue;this.unchanged=true;this.status="default";this.element.onfocus=this.handlers.focus.bind(this);this.element.onblur=this.handlers.blur.bind(this);this.element.onkeypress=this.handlers.keypress.bind(this)},set_status:function(a){this.status=a;if(this.inputParent.className!="focus"){this.inputParent.className=this.status}}});
// /lib/widgets/check_box.js from ui
var CheckBox=Class.create();Object.extend(CheckBox.prototype,{handlers:{mouseover:function(){Element.addClassName(this.label,"hover");Element.removeClassName(this.label,"default");Widgets.updateLabelClass(this.label)},mouseout:function(){if(this.focused){return}Element.addClassName(this.label,"default");Element.removeClassName(this.label,"hover");Widgets.updateLabelClass(this.label)},click:function(){if(this.disabled){return}this.status=!this.status;this.updateDisplay();window.setTimeout((function(){this.element.checked=this.status}).bind(this),10)},focus:function(){this.focused=true;this.handlers.mouseover.call(this)},blur:function(){this.focused=false;this.handlers.mouseout.call(this)},keypress:function(a){if((window.event?window.event.keyCode:a.which)!=32){return}if(this.disabled){return}this.status=!this.element.checked;this.updateDisplay()}},initialize:function(b){this.element=$(b);this.element.proxy=this;this.label=Widgets.getLabelForControl(this.element);this.status=this.element.checked;this.disabled=this.element.disabled;this.focused=false;var a=Element.hasClassName(this.element,"checkbox-small")?"checkbox-small":"checkbox";Element.addClassName(this.label,a);Element.addClassName(this.label,"default");Element.addClassName(this.label,this.status?"checked":"unchecked");Widgets.updateLabelClass(this.label);this.label.onmouseover=this.handlers.mouseover.bind(this);this.label.onmouseout=this.handlers.mouseout.bind(this);this.label.onclick=this.handlers.click.bind(this);this.element.onfocus=this.handlers.focus.bind(this);this.element.onblur=this.handlers.blur.bind(this);this.element.onkeypress=this.handlers.keypress.bind(this)},updateDisplay:function(){Element.addClassName(this.label,this.status?"checked":"unchecked");Element.removeClassName(this.label,this.status?"unchecked":"checked");Widgets.updateLabelClass(this.label)},setStatus:function(a){this.element.checked=this.status=a;this.updateDisplay()},setDisabled:function(a){this.element.disabled=this.disabled=a;Element[a?"addClassName":"removeClassName"](this.label,"disabled");this.updateDisplay()}});
// /lib/widgets/select_list.js from ui
var SelectList=Class.create();SelectList.blur_current=function(){if(SelectList.focused){SelectList.focused.element.blur()}};Object.extend(SelectList.prototype,{handlers:{mouseover:function(){Element.addClassName(this.container,this.classPrefix+"hover");Element.addClassName(this.container,"hover")},mouseout:function(){if(!this.focused){Element.removeClassName(this.container,this.classPrefix+"hover");Element.removeClassName(this.container,"hover")}},item_mouseover:function(a){this.clear_selected(a)},item_mouseout:function(){this.clear_selected()},mousedown:function(){this.mousedown=true},mouseup:function(){this.mousedown=false},trigger_mousedown:function(){this.handlers.mousedown.call(this);Element.addClassName(this.container,this.classPrefix+"active");Element.addClassName(this.ctonainer,"active")},trigger_mouseup:function(){if(this.mousedown){window.setTimeout((function(){this.handlers.mouseup.call(this);Element.removeClassName(this.container,this.classPrefix+"active");Element.removeClassName(this.continaer,"active");this.toggle();this.element.focus()}).bind(this),10)}},click:function(a){this.select(a);this.collapse();this.element.focus()},focus:function(){if(this.blur_timeout){window.clearTimeout(this.blur_timeout);this.blur_timeout=null}SelectList.focused=this;this.focused=true;this.handlers.mouseover.call(this)},blur:function(){this.blur_timeout=window.setTimeout((function(){if(this.mousedown){return}this.collapse();this.focused=false;this.handlers.mouseout.call(this);if(SelectList.focused==this){SelectList.focused=null}}).bind(this),10)},keyup:function(a){a=window.event?window.event:a;if(a.keyCode==this.ignore_keycode){return}switch(a.keyCode){case 38:if(a.altKey){this.toggle()}else{this.select(this.selected_index-1)}break;case 40:if(a.altKey){this.toggle()}else{this.select(this.selected_index+1)}break;case 33:this.select(0);break;case 34:this.select(this.element.options.length-1);break;case 32:this.toggle();break;case 27:this.collapse();break;default:var d=String.fromCharCode(a.keyCode);var b=this.selected_index;for(var c=0;c<this.item_keys.length;c++){b=(b+1)%this.item_keys.length;if(this.item_keys[b]!=d){continue}this.select(b);break}break}this.ignore_keycode=a.keyCode;window.setTimeout((function(){this.ignore_keycode=-1}).bind(this),10)},keypress:function(a){a=window.event?window.event:a;a.cancelBubble=(a.keyCode!=9&&a.keyCode!=25);if(a.cancelBubble&&a.preventDefault){a.preventDefault()}return !(a.returnVal=a.cancelBubble)},nav_up_mousedown:function(){this.mousedown=true;this.scroll_list(25)},nav_up_mouseup:function(){this.mousedown=false;this.scroll_list(0);this.element.focus()},nav_down_mousedown:function(){this.mousedown=true;this.scroll_list(-25)},nav_down_mouseup:function(){this.mousedown=false;this.scroll_list(0);this.element.focus()}},initialize:function(f){this.element=$(f);this.element.proxy=this;this.label=document.createTextNode("");this.list_items=Array();this.item_keys=Array();this.focused=false;this.mousedown=false;this.selected_index=-1;this.ignore_keycode=-1;var k=document.createElement("a");k.appendChild(this.label);var j=document.createElement("b");j.appendChild(k);var d=document.createElement("dt");d.appendChild(j);d.onmouseover=this.handlers.mouseover.bind(this);d.onmouseout=this.handlers.mouseout.bind(this);d.onmousedown=this.handlers.trigger_mousedown.bind(this);d.onmouseup=this.handlers.trigger_mouseup.bind(this);var i=document.createElement("ul");var l=document.createElement("dd");l.appendChild(i);var e=document.createElement("div");e.className="select-nav-up";var g=document.createElement("b");g.innerHTML="Up";e.onmousedown=this.handlers.nav_up_mousedown.bind(this);e.onmouseup=this.handlers.nav_up_mouseup.bind(this);e.appendChild(g);l.appendChild(e);var c=document.createElement("div");c.className="select-nav-down";var h=document.createElement("b");h.innerHTML="Down";c.onmousedown=this.handlers.nav_down_mousedown.bind(this);c.onmouseup=this.handlers.nav_down_mouseup.bind(this);c.appendChild(h);l.appendChild(c);Array("ul","ur","lr","ll").each(function(a){var b=document.createElement("i");b.className=a;l.appendChild(b)});this.container=document.createElement("dl");this.container.className="select "+f.className;this.classPrefix="";if(Element.hasClassName(this.container,"small")){Element.addClassName(this.container,"select-small");this.classPrefix="select-small-"}Element.addClassName(this.container,this.classPrefix+"default");Element.addClassName(this.container,"default");this.container.appendChild(d);this.container.appendChild(l);this.item_list=i;this.item_list_container=l;this.scroll_offset=0;this.scroll_timer=null;this.element.parentNode.insertBefore(this.container,this.element.nextSibling);this.element.onfocus=this.handlers.focus.bind(this);this.element.onblur=this.handlers.blur.bind(this);this.element.onkeyup=this.handlers.keyup.bind(this);this.element.onkeypress=this.handlers.keypress.bind(this);this.init_list()},init_list:function(){var h=this.container.getElementsByTagName("ul")[0];while(h.childNodes.length>0){h.removeChild(h.firstChild)}this.list_items=[];this.item_keys=[];for(var g=0;g<this.element.options.length;g++){var f=this.element.options[g];var d=document.createElement("b");d.appendChild(document.createTextNode(f.text));var e=document.createElement("a");e.appendChild(d);e.onclick=this.handlers.click.bind(this,g);e.onmouseover=this.handlers.item_mouseover.bind(this,g);e.onmouseout=this.handlers.item_mouseout.bind(this);e.onmousedown=this.handlers.mousedown.bind(this);e.onmouseup=this.handlers.mouseup.bind(this);var c=document.createElement("li");c.appendChild(e);h.appendChild(c);this.list_items.push(c);this.item_keys.push(f.text.charAt(0).toUpperCase());if(f.selected){this.select(g)}}if(this.selected_index==-1){this.select(0)}else{this.select(this.selected_index)}},scroll_list:function(a){if(this.container_bounds.length===0||this.list_bounds.length===0){this.find_boundaries()}this.scroll_offset+=a;this.scroll_offset=Math.min(0,this.scroll_offset);this.scroll_offset=Math.max(this.container_bounds[1]-this.list_bounds[1],this.scroll_offset);this.item_list.style.marginTop=this.scroll_offset+"px";if(a!==0){if(this.scroll_timer){window.clearTimeout(this.scroll_timer)}this.scroll_timer=window.setTimeout(this.scroll_list.bind(this,a),10)}else{window.clearTimeout(this.scroll_timer);this.scroll_timer=null}},find_boundaries:function(){this.container_bounds=[Element.getPosition(this.item_list_container).y];this.container_bounds[1]=this.container_bounds[0]+Element.getDimensions(this.item_list_container).height;var a=this.item_list.getElementsByTagName("li");var b=Element.getDimensions(a[0]).height;var c=a.length*b+3;this.list_bounds=[Element.getPosition(this.item_list).y];this.list_bounds[1]=this.list_bounds[0]+c;if(this.item_list_container.className=="oversized"){this.list_bounds[1]+=18}},expanded:function(){return Element.hasClassName(this.container,this.classPrefix+"open")},expand:function(){if(this.expanded()){return}Element.addClassName(this.container,this.classPrefix+"open");Element.addClassName(this.container,"open");this.clear_selected(this.selected_index);if(this.element.onexpand){this.element.onexpand.call(this.element)}var a=999999;this.container.style.zIndex=a;var b=this.container.parentNode;while(b){a-=1;if(b.style){b.style.zIndex=a}b=b.parentNode}this.scroll_offset=0;this.item_list.style.marginTop=0;this.find_boundaries();if(this.list_bounds[1]-this.list_bounds[0]>300){this.item_list_container.className="oversized";this.container_bounds=[];this.list_bounds=[]}else{this.item_list_container.className=""}this.container_bounds=[]},collapse:function(){if(!this.expanded()){return}Element.removeClassName(this.container,this.classPrefix+"open");Element.removeClassName(this.container,"open");var a=this.container;while(a){if(a.style){a.style.zIndex=""}a=a.parentNode}if(this.element.oncollapse){this.element.oncollapse.call(this.element)}},toggle:function(){this[this.expanded()?"collapse":"expand"]()},select:function(a,c){if(a<0){return}if(a>=this.element.options.length){return}this.selected_index=a;var b=this.element.options[a];this.label.replaceData(0,this.label.length,b.text);if(!c){this.element.value=b.value;if(this.element.onchange){this.element.onchange.call(this.element)}}if(this.expanded()){this.scroll_offset=-28*a;this.scroll_list(0)}this.clear_selected(a)},clear_selected:function(a){this.list_items.each(function(d,c){var b=d.getElementsByTagName("a")[0];Element[(c==a)?"addClassName":"removeClassName"](b,"hover")})}});
// /lib/widgets/radio_button.js from ui
var RadioButton=Class.create();RadioButton.groups={};RadioButton.clearGroup=function(a){RadioButton.groups[a].each(function(b){b.clear()})};RadioButton.clearChecked=function(a){RadioButton.groups[a].each(function(b){b.element.checked=false})};Object.extend(RadioButton.prototype,{handlers:{mouseover:function(){Element.addClassName(this.label,"hover");Element.removeClassName(this.label,"default");Widgets.updateLabelClass(this.label)},mouseout:function(){if(this.focused){return}Element.addClassName(this.label,"default");Element.removeClassName(this.label,"hover");Widgets.updateLabelClass(this.label)},click:function(){this.element.click();if(!this.element.checked){RadioButton.clearChecked(this.element.name);this.element.checked=true}this.updateDisplay()},focus:function(){this.focused=true;this.handlers.mouseover.call(this);window.setTimeout(this.updateDisplay.bind(this),10)},blur:function(){this.focused=false;this.handlers.mouseout.call(this)},keypress:function(a){if((window.event?window.event.keyCode:a.which)!=32){return}window.setTimeout(this.updateDisplay.bind(this),10)}},initialize:function(c){this.element=$(c);this.element.proxy=this;this.label=Widgets.getLabelForControl(this.element);this.focused=false;var b=this.element.name;if(!RadioButton.groups[b]){RadioButton.groups[b]=Array()}RadioButton.groups[b].push(this);var a=Element.hasClassName(this.element,"radio-small")?"radio-small":"radio";Element.addClassName(this.label,a);Element.addClassName(this.label,"default");Element.addClassName(this.label,this.element.checked?"checked":"unchecked");Widgets.updateLabelClass(this.label);this.label.onmouseover=this.handlers.mouseover.bind(this);this.label.onmouseout=this.handlers.mouseout.bind(this);this.label.onclick=this.handlers.click.bind(this);this.element.onfocus=this.handlers.focus.bind(this);this.element.onblur=this.handlers.blur.bind(this);this.element.onkeyup=this.handlers.keypress.bind(this)},clear:function(){Element.addClassName(this.label,"unchecked");Element.removeClassName(this.label,"checked");Widgets.updateLabelClass(this.label)},updateDisplay:function(){if(!this.element.checked){return}RadioButton.clearGroup(this.element.name);Element.addClassName(this.label,"checked");Element.removeClassName(this.label,"unchecked");Widgets.updateLabelClass(this.label)}});
// /lib/widgets/text_area.js from ui
var TextArea=Class.create();Object.extend(TextArea.prototype,{handlers:{focus:function(){this.areaParent.className="focus"},blur:function(){this.areaParent.className="default"}},initialize:function(A){this.element=$(A);this.element.proxy=this;this.areaParent=this.element.parentNode;this.element.onfocus=this.handlers.focus.bind(this);this.element.onblur=this.handlers.blur.bind(this)}});
// /lib/widgets/drop_down.js from ui
var DropDown=Class.create();Object.extend(DropDown.prototype,{initialize:function(C){this.element=$(C);this.item_keys=Array();var D=this.element.getElementsByTagName("dt")[0];var E=D.getElementsByTagName("a")[0];var A=this.element.getElementsByTagName("li");for(var B=0;B<A.length;B++){if(Element.hasClassName(A[B],"active")){E.href=A[B].firstChild.href;E.innerHTML=A[B].firstChild.firstChild.innerHTML}}}});
// /lib/migcookie.js from ui
function isMigrated(){return true}var userIsMigrated=(function(){var A=CIM.user.getNow(["isLoggedIn"]);if(A.isLoggedIn){return isMigrated()}})();
// /lib/mctunnel.js from ui
if(typeof deconcept=="undefined"){alert("SWFObject is required.")}var McTunnel={swf:null,setSWF:function(a){this.swf=a},isLoaded:function(){}};McTunnel.Callback={};McTunnel.Manager=function(){return this.getInstance.apply(this)};McTunnel.Manager._instance=null;Object.extend(McTunnel.Manager.prototype,{_queue:[],proxy:null,getInstance:function(){if(!McTunnel.Manager._instance){this.initialize();McTunnel.Manager._instance=this}return McTunnel.Manager._instance},initialize:function(){if(McTunnel.swf===null){return}var b=new SWFObject(McTunnel.swf,"McTunnelManager","1","1","9","transparent");b.addParam("allowScriptAccess","always");var c=document.createElement("div");c.setAttribute("id","McTunnelManagerContainer");c.style.width="1px";c.style.height="0px";c.style.overflow="hidden";document.body.appendChild(c);b.write("McTunnelManagerContainer");var a=this;setTimeout(function(){a.checkLoaded()},50)},runQueue:function(){var a=this;if(this._queue.length){this._queue.invoke("apply",a)}},checkLoaded:function(){if($("McTunnelManager")&&typeof($("McTunnelManager").create)=="function"){this.proxy=$("McTunnelManager");this.runQueue();return true}var a=this;setTimeout(function(){a.checkLoaded()},50);return false},create:function(c,b,f,a){if(!this.proxy){this._queue.push(function(){this.create(c,b,f,a)});return}try{this.proxy.create(c,b,f,a)}catch(d){console.log(d)}},setVariable:function(a,b,c){if(!this.proxy){this._queue.push(function(){this.setVariable(a,b,c)});return}this.proxy.addVariable(a,b,c)},send:function(b){var a=this;if(!this.proxy){this._queue.push(function(){this.send(b)});return}try{this.proxy.send(b)}catch(c){console.log(c)}}});McTunnel.Request=Class.create();Object.extend(McTunnel.Request.prototype,{initialize:function(name,url,callback){var responseType=arguments[3]||"xml";this.name=name;McTunnel.Callback[name]=function(json){eval("var obj = "+json);callback(obj)};this.manager=new McTunnel.Manager();this.manager.create(name,url,"McTunnel.Callback."+name,responseType)},setVariable:function(a,b){this.manager.setVariable(this.name,a,b)},send:function(){this.manager.send(this.name)}});McTunnel.setSWF("/ui/swf/McTunnelManager.swf");
// /lib/beta/cookie.js from ui
(function(A){jQuery.cookie=(function(){var B=["browse_alpha","browse_list","browse_locked","tvlistings_signinPrompted","fb_fan","browser_old","browser_osx","user_comcast","user_mecomcast","hide_ftue"];function C(G,E,F){var D;if(E>G.length-1){D=G}else{D=G.substr(0,E)+F+G.substr(E+1)}return D}return{__read:function(F){var I=document.cookie.split(";");var H=new RegExp("(?:^|\\s+)"+F+"=(.*)");for(var G=0,D=I.length;G<D;G++){var E=I[G].match(H);if(E){return E[1]}}return null},__write:function(F,I,E){E[F]=I;var H=[F,"expires","path","domain"],J=[];for(var G=0,D=H.length;G<D;G++){if(typeof E[H[G]]=="undefined"){continue}J.push([H[G],E[H[G]]].join("="))}document.cookie=J.join("; ")},__remove:function(E,D){this.write(E,"",A.extend(D,{expire_days:-1}))},read:function(D){var G=this.__read(D);if(G===null){var F,E=0;while(F===this.__read([D,E].join("."))){G=(G||"")+F;E++}}return G},write:function(F,H,E){var D=A.extend({path:"/",domain:".comcast.net"},E);if(typeof D.expire_days!="undefined"){var I=new Date();I.setTime(I.getTime()+D.expire_days*86400000);D.expires=I.toGMTString()}if(typeof D.expire_date!="undefined"){D.expires=D.expire_date.toGMTString()}var J=4000;if(H.length<J){this.__write(F,H,D)}else{this.remove(F,E);var G=0;while(H.length>0){this.__write([F,G].join("."),H.substr(0,J),D);H=H.substr(J);G++}}},remove:function(E,D){if(this.__read(E)!==null){this.__remove(E,D)}else{var F=0;while(this.__read([E,F].join("."))){this.__remove([E,F].join("."),D);F++}}},encode:function(E){var D=[];A.each(E,function(G,F){D.push([G,F.replace("%","%25").replace(";","%3B")].join("="))});return D.join("&")},decode:function(I){if(!I){return{}}var G={},H=I.split("&");for(var F=0,D=H.length;F<D;F++){var E=H[F].split("=");G[E[0]]=unescape(E[1])}return G},exists:function(D){return(typeof (this.read(D))==="string")},pref:function(E,G){var F="",H,D=false;if(typeof E==="undefined"){return }H=A.inArray(E,B);if(H===-1){return }if(typeof G==="undefined"){if(this.exists("b")){F=this.read("b");if(F.charAt(H)==="1"){D=true}}}else{if(this.exists("b")){F=this.read("b")}while(F.length<=B.length){F+="2"}F=C(F,H,(G?1:0));this.write("b",F);D=G}return D}}}());CIM.user.get(["isLoggedIn"],function(B){if(!B.isLoggedIn){try{Prefs.remove("edata.last_success_version")}catch(C){}A.cookie.remove("token");A.cookie.remove("edata");A.cookie.remove("xedata");A.cookie.remove("entitlementPageViewCount")}})}(jQuery));
// /lib/beta/aws_pref_store.js from ui
var BufferedStore=(function(a){return a.extend({},PrefStore,{_buffer:null,_buffer_changed:false,_load_buffer:function(){throw this.not_implemented},_write_buffer:function(){throw this.not_implemented},commit:function(){if(!this._buffer_changed){return}this._write_buffer();this._buffer_changed=false},get:function(b){this._load_buffer();if(this._buffer===null||typeof this._buffer[b]=="undefined"){throw this.no_value}return this._buffer[b]},set:function(b,c){this._load_buffer();if(this._buffer!==null){this._buffer[b]=c;this._buffer_changed=true}},remove:function(b){this._load_buffer();delete this._buffer[b];this._buffer_changed=true}})})(jQuery);var AWSStore=(function(a){return a.extend({},BufferedStore,{_name:null,_bucket:null,_url_node:null,_aws_root:null,_is_logged_in:function(){var b=CIM.user.getNow(["isLoggedIn"]);return b.isLoggedIn},_get_guid:function(){var b=CIM.user.getNow(["guid"]);return b.guid},_load_buffer:function(){if(this._buffer!==null){return}if(!this._is_logged_in()){this._buffer=null;return}var c=a.ajax({async:false,cache:false,type:"GET",url:"/user/authkey/service/amazonget/",data:{guid:this._get_guid(),service:this._bucket,fmt:"xml",ts:(new Date()).getTime()},dataType:"xml"});var b=a(c.responseXML).find(this._url_node).text().replace(/https:\/\/.*?\//,this._aws_root);c=a.ajax({async:false,cache:false,type:"GET",url:b,dataType:"xml"});if(c.status==200){this._buffer=a.cookie.decode(c.responseText)}else{this._buffer={}}this._buffer_changed=false},_write_buffer:function(){if(this._buffer===null){return}if(!this._is_logged_in()){return}var b=a.cookie.encode(this._buffer);var c=this;a.ajax({url:"/user/authkey/service/amazonpost/",data:{guid:this._get_guid(),service:this._bucket,fmt:"xml",ts:(new Date()).getTime()},type:"GET",success:function(h,e){var n=a(h).find("accessKey").text();var m=a(h).find("policy").text();var f=a(h).find("signature").text();var j=a(h).find("encryptedGuid").text();var d=parseInt(2147483647*Math.random(),10)+"";var k={key:"uploads/"+j,policy:m,signature:f,AWSAccessKeyId:n,acl:"private","Content-Type":"text/plain",file:b};var l="";for(var g in k){l+=["--"+d,'Content-Disposition: form-data; name="'+g+'"',"",k[g],""].join("\r\n")}l+="--"+d+"--";a.ajax({url:c._aws_root,type:"POST",contentType:"multipart/form-data; boundary="+d,processData:false,data:l})}})}})})(jQuery);var LazyAWSStore=(function(a){return a.extend({},AWSStore,{_buffer_load_success:null,_buffer_load_failure:null,_buffer_write_success:null,_buffer_write_failure:null,loadBuffer:function(){var b=this._load_buffer();if(!b&&this._buffer!==null&&this._buffer_load_success){a(this).trigger(this._buffer_load_success)}},get:function(c,b){this._load_buffer();if(this._buffer===null||typeof this._buffer[c]=="undefined"){return b}return this._buffer[c]},set:function(b,c){this._load_buffer();if(this._buffer!==null){this._buffer[b]=c;this._buffer_changed=true}this.commit()},_load_buffer:function(){if(this._buffer!==null){return false}var b=CIM.user.getNow(["isLoggedIn","guid"]);if(!b.isLoggedIn){this._buffer=null;return}var f=parseInt(Math.random()*65535,10);var e=a.ajax({async:false,cache:false,type:"GET",url:"/user/authkey/service/amazonget/",data:{guid:b.guid,service:this._bucket,fmt:"xml",ts:(new Date()).getTime()},dataType:"xml"});var c=a(e.responseXML).find(this._url_node).text().replace(/https:\/\/.*?\//,this._aws_root);var d=unescape(c.replace(/.*?\/([^\/?]+)\?.*/,"$1"));e=a.ajax({async:false,cache:false,type:"GET",url:c,dataType:"xml"});if(e.status==200){this._buffer=a.cookie.decode(e.responseText);if(this._buffer_load_success){a(this).trigger(this._buffer_load_success)}}else{if(e.status==404){this._buffer={};if(this._buffer_load_success){a(this).trigger(this._buffer_load_success)}}else{this._buffer=null;if(this._buffer_load_failure){a(this).trigger(this._buffer_load_failure)}}}this._buffer_changed=false;return true},_write_buffer:function(){if(this._buffer===null){return}var b=CIM.user.getNow(["isLoggedIn","guid"]);if(!b.isLoggedIn){return}var e=parseInt(Math.random()*65535,10);var c=a.cookie.encode(this._buffer);var d=this;a.ajax({url:"/user/authkey/service/amazonpost/",data:{guid:b.guid,service:this._bucket,fmt:"xml",ts:(new Date()).getTime()},type:"GET",error:function(f,h,g){},success:function(k,g){var p=a(k).find("accessKey").text();var o=a(k).find("policy").text();var h=a(k).find("signature").text();var l=a(k).find("encryptedGuid").text();var f=parseInt(2147483647*Math.random(),10)+"";var m={key:"uploads/"+l,policy:o,signature:h,AWSAccessKeyId:p,acl:"private","Content-Type":"text/plain",file:c};var n="";for(var j in m){n+=["--"+f,'Content-Disposition: form-data; name="'+j+'"',"",m[j],""].join("\r\n")}n+="--"+f+"--";a.ajax({url:d._aws_root,type:"POST",contentType:"multipart/form-data; boundary="+f,processData:false,data:n,success:function(i,q){if(d._buffer_write_success){a(d).trigger(d._buffer_write_success)}},error:function(i,r,q){if(d._buffer_write_failure){a(d).trigger(d._buffer_write_failure)}}})}})}})})(jQuery);
// /modules/articlelist.js from ui
var ArticleListTabs=Class.create();Object.extend(ArticleListTabs.prototype,TabBar.prototype);Object.extend(ArticleListTabs.prototype,{tab_name:function(a){return a&&decodeURI(a.getElementsByTagName("a")[0].href.split("#")[1])},tab_list:function(){var d=[];for(var b=0,a=this.tab_ids.length;b<a;b++){var c=$(this.tab_ids[b]);d.push(this.tab_name(c))}return d},set_enabled:function(a){for(var e=0,b=this.tab_ids.length;e<b;e++){var f=$(this.tab_ids[e]);var d=this.tab_name(f);var c=$A(a).detect(function(g){return d==g});Element[c?"addClassName":"removeClassName"](f,"enabled")}},select_tab:function(b){for(var c=0,a=this.tab_ids.length;c<a;c++){var d=$(this.tab_ids[c]);if(this.tab_name(d)==b){this.update(c)}}}});var ArticleList={initialize:function(a){this.tabs=a;this.prefs=$("articlelist-prefs");if(this.prefs){this.check_list=$A(this.prefs.getElementsByTagName("ul")[0].getElementsByTagName("input"))}},show_prefs:function(){var b=Prefs.get("articlelist.enabled_tabs",[]);var a=Prefs.get("articlelist.default_tab","");this.set_checks(b);this.set_default(a);this.prefs.style.display="block"},hide_prefs:function(){this.prefs.style.display="none"},save_prefs:function(){var b=[];var a="";this.check_list.each(function(c){if(Element.hasClassName(c.proxy.label,"default-tab")){a=c.value}if(c.proxy.status){b.push(c.value)}});if(b.length===0){throw"You must choose at least one category."}this.enact_prefs(b,a)},enact_prefs:function(b,a){Prefs.bundle(function(){Prefs.set("articlelist.enabled_tabs",b,Prefs.SERVER);Prefs.set("articlelist.default_tab",a,Prefs.SERVER)});this.tabs.set_enabled(b);this.tabs.select_tab(a)},set_default:function(a){this.check_list.each(function(b){if(b.proxy.status&&b.value==a){Element.addClassName(b.proxy.label,"default-tab")}else{Element.removeClassName(b.proxy.label,"default-tab")}});this.force_default()},set_checks:function(a){this.check_list.each(function(c){var d=false;for(var e=0,b=a.length;e<b;e++){if(c.value==a[e]){d=true}}c.proxy.setStatus(d)});this.limit_selection()},force_default:function(){var c=false;this.check_list.each(function(d){if(d.proxy.status&&Element.hasClassName(d.proxy.label,"default-tab")){c=true}});if(c){return}for(var b=0,a=this.check_list.length;b<a;b++){if(this.check_list[b].proxy.status){this.set_default(this.check_list[b].value);return}}},limit_selection:function(){var a=0;this.check_list.each(function(b){if(b.proxy.status){a++}});if(a==5){this.check_list.each(function(b){if(!b.proxy.status){b.proxy.setDisabled(true)}})}else{this.check_list.each(function(b){b.proxy.setDisabled(false)})}}};addLoadEvent(function(){var a=$("articlecategories-container");var e;if(a){for(e=0;e<a.childNodes.length;e++){if(a.childNodes[e].nodeType!=1){continue}new TabBar(a.childNodes[e].id)}}new TabBar("mostpopular");var h=new ArticleListTabs("articlelist");h.onchange=function(o){var n=this.tab(o),m=this.panel(o);if(!n||!m){return false}var i=this.tab_name(n);var l=m.getElementsByTagName("div")[0].className;if(l=="success"){return true}new Ajax.Request("./articlelist/"+i+"/",{method:"GET",onSuccess:function(u){m.innerHTML=u.responseText;var q=m.getElementsByTagName("span");$A(q).each(function(w){if(w.className=="timestamp"){var x=$A(w.childNodes).detect(function(y){return y.nodeType==8}).nodeValue;var v=$A(w.childNodes).detect(function(y){return y.nodeType==3}).nodeValue;w.innerHTML=elapsedTimestamp(x,v)}});var t=$("articlelist").getElementsByTagName("i");for(var p=0;p<t.length;p++){var r=t[p].className;t[p].className="";t[p].className=r}},onError:function(){var p=document.createElement("div");p.className="error";p.innerHTML="Unable to retrieve article list";m.innerHTML="";m.appendChild(p)}});return true};h._tracking=false;var c=$("articlelist-change-prefs");if(c){c.onclick=function(i){ArticleList.show_prefs();return cancelEvent(i)};if(Prefs.get("articlelist.changed_prefs",0)==1){c.innerHTML="Edit Preferences"}c.style.display="inline"}else{if(document.body.id=="smartzone-module"){h._tracking=false;var f=0;for(e=0;tab=h.tab(e);e++){if(Element.hasClassName(tab,"default")){f=e}}h.update(f);return}else{h.update(0);h._tracking=true;return}}ArticleList.initialize(h);var g=h.tab_list();var d=Prefs.get("articlelist.enabled_tabs",[]);var k=false;for(e=0;e<d.length;e++){if($A(g).detect(function(i){return i==d[e]})){k=true;break}}if(d.length===0||!k){d=[g[0],g[1],g[2],g[3],g[4]]}var j=Prefs.get("articlelist.default_tab","");if(!d.detect(function(i){return i==j})){j=d[0]}var b=true;for(e=0;e<d.length;e++){if(j==d[e]){b=false}}if(b){j=d[0]}ArticleList.enact_prefs(d,j);$("articlelist-prefs-close").onclick=function(i){ArticleList.hide_prefs();return cancelEvent(i)};$("articlelist-prefs-cancel").onclick=function(i){ArticleList.hide_prefs();return cancelEvent(i)};$("articlelist-prefs-save").onclick=function(i){Prefs.set("articlelist.changed_prefs",1);c.innerHTML="Edit Preferences";try{ArticleList.save_prefs();ArticleList.hide_prefs()}catch(m){alert(m)}Tracking.resetVars();var l=$A(Prefs.get("articlelist.enabled_tabs",[])).collect(function(n){return n.replace(/-tab$/,"")}).join(":");Tracking.setVar("prop20",l);s.tl(this,"o","In The News Module - Customized Window - Save Button");return cancelEvent(i)};ArticleList.check_list.each(function(i){i.onchange=function(m){ArticleList.limit_selection();ArticleList.force_default()};var l=i.proxy.label.getElementsByTagName("a")[0];l.onclick=function(m){ArticleList.set_default(i.value);return cancelEvent(m)}});h._tracking=true});
// /modules/articles/articles.js from ui
function videoEmbed(){var g=$("related-article-embed");if(!g){return}g.parentNode.removeChild(g);var d=g.getElementsByTagName("object");var f=g.getElementsByTagName("embed");var c=g.getElementsByTagName("iframe");if((c.length>0)||(d.length>0)||(f.length>0)){var e=document.getElementById("article");if(e===null){return false}var a=e.getElementsByTagName("p");var b;if(a.length>article_embed_pos+1){b=a[article_embed_pos+1]}else{b=a[a.length-1].nextSibling}b.parentNode.insertBefore(g,b);return}}addLoadEvent(function(){videoEmbed()});function articleAnchorTargets(){var e=document.getElementById("article");if(e===null){return false}var d=e.getElementsByTagName("p");for(i=0;i<d.length;i++){var b=d[i].getElementsByTagName("a");var c="";for(j=0;j<b.length;j++){c=b[j].getAttribute("href");if(c.indexOf("comcast.net")==-1){b[j].setAttribute("target","_blank")}}}}addLoadEvent(function(){articleAnchorTargets()});var URItoMG=Class.create();Object.extend(URItoMG.prototype,{initialize:function(){this.pcp=document.config.pathContext.substring(1,document.config.pathContext.length-1).split("/");this.articles=this.pcp[0];this.channel=this.pcp[1];if(this.channel.indexOf("-")!=-1){this.channel=this.pcp[1].substring(0,this.pcp[1].indexOf("-"));this.subchannels=this.pcp[1].substring(this.pcp[1].indexOf("-")+1).replace("-","/")+"/"}else{this.subchannels=""}this.date=this.pcp[2].substring(0,4)+"/"+this.pcp[2].substring(4,6)+"/"+this.pcp[2].substring(6,8);this.slug=this.pcp[3]},buildMgUrl:function(){return"/"+this.channel+"/articles/"+this.subchannels+this.date+"/"+this.slug+".xml"}});var MGtoArticleURL=Class.create();Object.extend(MGtoArticleURL.prototype,{initialize:function(a){this.path=a.substring(a.indexOf("/api/data")+10);this.pcp=this.path.split("/");this.pcpLength=this.pcp.length;this.articles=this.pcp[1];this.channel=this.pcp[0];if(this.pcpLength>6){this.subchannels="-"+this.pcp[2];if(this.pcpLength==8){this.subchannels+="-"+this.pcp[3]}}else{this.subchannels=""}this.date=this.pcp[this.pcpLength-4]+this.pcp[this.pcpLength-3]+this.pcp[this.pcpLength-2];this.slug=this.pcp[this.pcpLength-1]},buildUrl:function(){return"/articles/"+this.channel+this.subchannels+"/"+this.date+"/"+this.slug.slice(0,-4)+"/"}});
// /modules/cover_transitions.js from ui
CoverTransition=Class.create();Object.extend(CoverTransition.prototype,{initialize:function(c,b,a){this.frames=c||[];this.time=b||0;this.setup=a||function(){return false}},animate:function(b,c,f){if(this.frames.length===0){return false}var a={old_cover:Cover.getById(b),new_cover:Cover.getById(c)};if(!a.old_cover||!a.new_cover){return false}for(var d in a){if(Element.hasClassName(a[d].getElementsByTagName("div")[0],"flash")){return false}}var e=new Animator(this.frames,this.time);Object.extend(e,a);return this.setup(e,f)}});var defaultTransition="reveal";var Transitions=(function(){var width=550;var frames=60;var time=1000;return{none:new CoverTransition(),slide:new CoverTransition(Animator.interpolate.root(0,-width,frames),time,function(anim,direction){with(anim.new_cover.style){left=(direction*width)+"px";display="block"}anim.onupdate=function(value){this.new_cover.style.left=direction*(width+value)+"px";this.old_cover.style.left=direction*value+"px";return true};anim.oncomplete=function(){this.old_cover.style.display="none";this.old_cover.style.left=0};return anim}),half_slide:new CoverTransition(Animator.interpolate.root(0,-width,frames),time,function(anim,direction){anim.new_cover.style.display="block";anim.new_cover.style.zIndex=direction<0?2:1;anim.old_cover.style.zIndex=direction<0?1:2;anim.onupdate=function(value){if(direction<0){this.new_cover.style.left=-(width+value)+"px"}else{this.old_cover.style.left=value+"px"}return true};anim.oncomplete=function(){this.old_cover.style.display="none";this.old_cover.style.left=0;this.old_cover.style.zIndex="";this.new_cover.style.zIndex=""};return anim}),fade:new CoverTransition(Animator.interpolate.linear(0,1,10),time/2,function(anim){anim.onupdate=function(value){Element.setOpacity(this.old_cover,1-value);return true};anim.oncomplete=function(){this.old_cover.style.display="none";Element.setOpacity(this.old_cover,1);this.new_cover.style.display="block";this.onupdate=function(value){Element.setOpacity(this.new_cover,value);return true};this.oncomplete=function(){Element.setOpacity(this.old_cover,"");Element.setOpacity(this.new_cover,"")};this.run()};return anim}),cross_fade:new CoverTransition(Animator.interpolate.linear(1,0,10),time,function(anim){anim.new_cover.style.display="block";anim.new_cover.style.zIndex=1;anim.old_cover.style.zIndex=2;anim.onupdate=function(value){Element.setOpacity(this.old_cover,value);return true};anim.oncomplete=function(){this.old_cover.style.display="none";this.old_cover.zIndex="";this.new_cover.zIndex="";Element.setOpacity(this.old_cover,"")};return anim}),slide_fade:new CoverTransition(Animator.interpolate.linear(0,-width,frames),time,function(anim,direction){anim.new_cover.style.display="block";anim.new_cover.style.zIndex=direction<0?2:1;anim.old_cover.style.zIndex=direction<0?1:2;anim.onupdate=function(value){var percent=value/-width;if(direction<0){this.new_cover.style.left=-(width+value)+"px";Element.setOpacity(this.new_cover,percent)}else{percent=1-percent;this.old_cover.style.left=value+"px";Element.setOpacity(this.old_cover,percent)}return true};anim.oncomplete=function(){with(this.old_cover.style){display="none";left=0;zIndex=""}with(this.new_cover.style){left=0;zIndex=""}Element.setOpacity(this.old_cover,"");Element.setOpacity(this.new_cover,"")};return anim}),reveal:new CoverTransition(Animator.interpolate.root(width,0,frames),time,function(anim,direction){anim.new_cover.style.display="block";anim.new_cover.style.zIndex=1;anim.old_cover.style.zIndex=2;anim.onupdate=function(value){var rect;if(direction<0){rect="rect(auto auto auto "+(width-value)+"px)"}else{rect="rect(auto "+value+"px auto auto)"}this.old_cover.style.clip=rect;return true};anim.oncomplete=function(){with(this.old_cover.style){display="none";clip=is_ie?"rect(auto auto auto auto)":"";zIndex=""}this.new_cover.style.zIndex=""};return anim})}})();
// /modules/cover.js from ui
addLoadEvent(function(){if(!$("cover")){return}Cover.initialize();var h=function(i,k){i=$(i);if(!i){return false}var j=i.getElementsByTagName("a");if(!j||j.length===0){return false}j[0].onclick=k;j[0].onmouseover=function(){Element.addClassName(this,"hover")};j[0].onmouseout=function(){Element.removeClassName(this,"hover");Element.removeClassName(this,"active")};j[0].onmousedown=function(){Element.addClassName(this,"active")};j[0].onmouseup=function(){Element.removeClassName(this,"active")};return true};h("c-previous",function(){Cover.pause();Cover.change(-1);return false});h("c-next",function(){Cover.pause();Cover.change(1);return false});h("c-play",function(){Cover.play();return false});h("c-pause",function(){Cover.pause();return false});Element.removeClassName("c-controls","hidden");var d=function(i){return function(j){Cover.pause();Cover.jump_to(i);return cancelEvent(j)}};var a=$("c-pagination");var e;if(a){if(a.getElementsByTagName("li").length===0){for(e=0,l=Cover.count();e<l;e++){var g=document.createElement("li");var f=document.createElement("a");f.href="#";f.innerHTML=e+1;g.appendChild(f);a.appendChild(g)}}var b=a.getElementsByTagName("a");for(e=0,l=Cover.count();e<l;e++){b[e].onclick=d(e)}Element.removeClassName("c-pagination","hidden")}Cover.play();var c=/trans=([^&#]*)/.exec(document.location.href);if(c&&Transitions[c[1]]){defaultTransition=c[1]}});Cover={_current:-1,_timer:null,_wait:15000,_running:false,_anim:null,_shown_covers:[],_next_timeout:function(){Cover.change(1);Cover._timer=window.setTimeout(Cover._next_timeout,Cover._wait)},initialize:function(){var b=Cover.count();for(var a=0;a<b;a++){Cover.setDisplay(a,false);Cover._shown_covers[a]=false}},hold:function(){if(Cover._timer!==null){window.clearTimeout(Cover._timer)}Cover._timer=null},run:function(){if(Cover._timer===null&&Cover._running){Cover._next_timeout()}},change:function(d){if(Cover._anim&&Cover._anim.is_running()){Cover._anim.run();return}var a=Cover._current;var c=Cover.count();var b=Cover._current=(Cover._current+d+c)%c;Cover._update_display(a,b,d)},jump_to:function(c){if(!Cover.getById(c)){return}var a=Cover._current;var b=Cover._current=c;Cover._update_display(a,b,b<a?-1:1)},_update_display:function(a,b,d){var c=Cover.count();if(c<2){Cover.setDisplay(b,true);return}var e=function(){if(Cover._shown_covers[Cover._current]){return}Cover._shown_covers[Cover._current]=true;var o=Cover.getById(Cover._current);var n=o.getElementsByTagName("h3");var m=n.length>0?n[0].innerHTML:"No Header";var g=[";","cover",Tracking.pageName,m].join("/");Tracking.resetVars();var r=o.getElementsByTagName("a");var p=[];for(var j=0,h=r.length;j<h;j++){var k=r[j].getElementsByTagName("img");var q=r[j].parentNode.className=="more"?"more: ":"";if(k.length===0){q+=TrackingNode.getNodeText(r[j]).replace(/^\s*/g,"")}else{q+="image: "+k[0].alt}q=q.replace(/[;,$=|]/g," ");p.push([g,q].join("/"))}Tracking.setData({events:"event2",products:p.join(",")});s.tl(location.href,"o","Cover Impressions");Tracking.resetVars()};var f=function(){Cover.setDisplay(a,false);Cover.setDisplay(b,true)};Cover._anim=Transitions[defaultTransition].animate(a,b,d);Cover._anim.cleanup=Cover._anim.oncomplete;Cover._anim.oncomplete=function(){this.cleanup();f()};if(Cover._anim){Cover._anim.run()}else{f()}},play:function(){var b=$("c-play");if(b){Element.hide(b)}var a=$("c-pause");if(a){Element.show(a)}Cover._running=true;Cover.run()},pause:function(){var b=$("c-play");if(b){Element.show(b)}var a=$("c-pause");if(a){Element.hide(a)}Cover._running=false;Cover.hold()},getById:function(a){return $("cover"+a)||false},getPaginationById:function(c){var a=$("c-pagination");if(!a){return false}var b=a.getElementsByTagName("li");if(c<0||c>=b.length){return false}return b[c]},setDisplay:function(d,c){var a=Cover.getById(d);if(a){a.style.display=c?"block":"none"}var b=Cover.getPaginationById(d);if(b){Element[c?"addClassName":"removeClassName"](b,"active")}},count:function(){var c=/cover([0-9]+)/;var d=Cover.getById(0).parentNode.childNodes;var a;for(var b=d.length-1;b>=0;b--){if(d[b].nodeType!=1){continue}a=d[b].id.match(c);if(a){return parseInt(a[1],10)+1}}return 0},linkClicked:function(e,a,c,f){var b=$("cover"+c);if(!b){return}var d=document.createElement("a");d.href="#";d.appendChild(TrackingNode.build_comment("META",{position:[(f==2?"img":"link")+a],linkText:[e],linkType:["basic","positional","cover"]}));b.appendChild(d);s.tl(d,"o");b.removeChild(d);return}};
// /modules/nav.js from ui
function toggleServices(a){if(typeof $=="undefined"){return false}var c=$("more");var b=$("n-more");if(!c||!b){return false}var d=Element.hasClassName(b,"active");if(typeof a=="undefined"){a=!d}if(a!=d){setAdVisibility(!a);setCoverFlashVisibility(!a);setVideoVisibility(!a)}if(a){c.style.display="block";Element.addClassName(b,"active")}else{c.style.display="none";Element.removeClassName(b,"active")}return false}addLoadEvent(function(){var a=$("more");if(a){a.onclick=function(b){cancelTrackEvent(b);return true};addEvent(document.body,"onclick",toggleServices.bind(document.body,false))}});
// /modules/dashboard.js from ui
CIM.user.get(["isLoggedIn"],function(a){if(document.config.cimaPassiveCheck=="true"&&a.isLoggedIn&&!(document.cookie||"").match(/\s*session@comcast.net=([^;]*);?/)){document.location=document.config.tsSigninUrl+encodeURIComponent(document.config.requestURL)+"&passive=1"}});function toggleDashboard(b){if(typeof $=="undefined"){return false}var e=$("dashboard");if(!e){return false}var a=this.parentNode?this.parentNode.id.substr(2):"";var d=$A($("dashboard-tabs").getElementsByTagName("li")).collect(function(f){return f.id.substr(2)});var c=Element.hasClassName(e,"expanded");if(typeof b=="undefined"){b=!Element.hasClassName(e,a)}if(b!=c){setCoverFlashVisibility(!b)}if(b){if(a=="email"){return true}if(a=="voice"&&Element.hasClassName("p-voice","authed")){vmcs.requestData()}Element.addClassName(e,"expanded");d._each(function(f){Element[f==a?"addClassName":"removeClassName"](e,f);Element[f==a?"addClassName":"removeClassName"]($("vault"),f)})}else{Element.removeClassName(e,"expanded");d._each(function(f){Element.removeClassName(e,f);Element.removeClassName($("vault"),f)})}return false}function populateEmail(c){var e=$("p-email-state-loading");if(e){Element.hide(e)}if(!c){return}c=c.channel;if(typeof(c.item)=="object"&&typeof(c.item.length)=="undefined"){c.item=[c.item]}if(c.status!="SUCCESS"){var g=$("p-email");didYHMFail=true;if(g){Element.addClassName(g,"error")}return}var j=CIM.user.getNow(["isLoggedIn"]);var h=j.isLoggedIn?true:false;var i=$("d-email");if(i){var f=i.getElementsByTagName("b")[0];if(h||c.item.length>0){f.innerHTML=(h?"":" ")+c.newmail}var a=buildEmaiLink(i.getElementsByTagName("a")[0],c.inbox)}var b=buildEmaiLink($("email-link-inbox"),c.inbox);var d=buildEmaiLink($("email-link-compose"),c.compose);isYHMLoaded=true}function buildEmaiLink(b,a){if(a&&b){if(a.indexOf("smartzone")==-1){b.href=a}}}function initEmail(b,c){var a=$("p-email");if(a){Element.addClassName(a,c?"authed":"nonauthed")}if(!c){return}continueEmail(b,c,a,userIsMigrated);managerNeedsFlash()}function continueEmail(e,g,d,a){var c=$("p-email-state-loading");if(c){Element.show(c)}var b=$("d-email").getElementsByTagName("a")[0];var f=new McTunnel.Request("yhm",document.config.yhmUrl,populateEmail,"xml");f.send()}function managerNeedsFlash(){var b=$("p-email");var a=$("McTunnelManagerContainer");if(a.childNodes.length===0){Element.addClassName(b,"need-flash")}}var isYHMLoaded=false;var didYHMFail=false;addLoadEvent(function(){CIM.user.get(["isLoggedIn","greeting"],function(c){var b=$("login");if(b){b.className=c.isLoggedIn?"sign-out":"sign-in"}var e=$("user-name");if(e){var f=c.isLoggedIn?true:false;var d=(function(){if(!c.isLoggedIn){return"Guest"}var g=Prefs.get("local.name","");if(g===""||!g){g=c.greeting}return g})();e.innerHTML=(c.isLoggedIn?"Hi":"Welcome")+" <b>"+(c.isLoggedIn?d.limit(15):"Guest")+"</b>"}var a=$("vault");if(a){a.onclick=function(g){cancelTrackEvent(g);return true};addEvent(document.body,"onclick",toggleDashboard.bind(document.body,false));initEmail(f,c.isLoggedIn)}})});
// /modules/search.js from ui
addLoadEvent(function(){var h=document.getElementById("searchfield");if(!h){return false}if(!is_safari){try{h.focus()}catch(g){return false}}var j="s-web";var b=new SimpleTabs();var d=document.getElementById("search-tabs");if(!d){return false}for(var c=0;c<d.childNodes.length;c++){var f=d.childNodes[c];if(f.nodeType!=1){continue}if(f.id=="s-more"){continue}b.tab_ids.push(f.id)}var a=function(k,e){var i=$("search-form");for(n in HeaderSearch){HeaderSearch[n].uninstall(i)}if(HeaderSearch[e]){HeaderSearch[e].install(i)}return true};b.onchange=a;b.setup(b.tab_id(j));b.onchange=function(l,e){a(l,e);var i=$("search-form"),k=$("searchfield");k.focus();if(k.value!==""&&i.onsubmit()!==false){i.submit()}return true}});var HdrSearch=Class.create();Object.extend(HdrSearch.prototype,{initialize:function(b,c,a){this.action=b;this.searchField=c||"q";this.fields=a||{};this.installed=false},install:function(a){if(this.installed){return false}a.action=this.action;$("searchfield").name=this.searchField;for(name in this.fields){var b=this.fields[name];var c=document.createElement("input");c.type="hidden";c.id=c.name=name;c.value=b;a.appendChild(c)}this.installed=true;return true},uninstall:function(a){if(!this.installed){return false}for(name in this.fields){var b=document.getElementById(name);if(!b){b.parentNode.removeChild(b)}}this.installed=false;return true}});var DblHdrSearch=Class.create();Object.extend(DblHdrSearch.prototype,HdrSearch.prototype);Object.extend(DblHdrSearch.prototype,{initialize:function(b,c,a){this.searchFields=c||Array("q","q2");HdrSearch.prototype.initialize.call(this,b,this.searchFields[0],a)},install:function(b){if(!HdrSearch.prototype.install.call(this,b)){return false}var c=document.createElement("input");c.type="text";c.id="searchfield2";c.name=this.searchFields[1];var a=$("searchfield");a.parentNode.insertBefore(c,a.nextSibling);c.parentNode.parentNode.className="local";return true},uninstall:function(a){if(!HdrSearch.prototype.uninstall.call(this,a)){return false}var b=document.getElementById("searchfield2");b.parentNode.parentNode.className="default";b.parentNode.removeChild(b);return true}});var search_url="http://search.comcast.net/";var video_url="http://videosearch.comcast.net/ss-query/videosearch.jsp";var shop_url="http://shopping.comcast.net/search.php";var search_account=typeof search_account=="undefined"?"Preview":search_account;var HeaderSearch={"s-web":new HdrSearch(search_url,"q",{cat:"Web",con:search_account}),"s-video":new HdrSearch(video_url,"q",{dr:"1",cp:"1"}),"s-images":new HdrSearch(search_url,"q",{cat:"images",con:search_account}),"s-news":new HdrSearch(search_url,"q",{cat:"news",con:search_account}),"s-shop":new HdrSearch(shop_url,"form_keyword"),"s-yellow":new DblHdrSearch(search_url,["q","l"],{cat:"yp",con:search_account})};HeaderSearch["s-web"].installed=true;function videoSearchValidation(b){var a=b.searchfield;if(a.value===""){a.focus();a.select();return false}else{return true}};
// /modules/footer.js from ui
addLoadEvent(function(){var c=$("copy-year-cim");if(!c){return}var a=c.getElementsByTagName("span")[0];if(Element.hasClassName(a,"year")){var b=new Date();a.innerHTML+="&nbsp;"+b.getFullYear()}});
// /modules/polls.js from ui
var PoleComm=Class.create();Object.extend(PoleComm.prototype,{api_root:document.config["lithium.api.root"]+"/restapi/vc/polls",initialize:function(b,a){this.poll_id=b;this.onerror=a||function(){}},_req_name:function(b){var a=(new Date()).getTime();return[b,this.poll_id,a].join("_")},_is_error:function(a){return typeof a["@status"]!="undefined"&&a["@status"]=="error"},get_choices:function(a){var c=this;var b=new McTunnel.Request(this._req_name("choices"),[this.api_root,"id",this.poll_id,"choices"].join("/"),function(d){if(c._is_error(d)){c.onerror(d.error);return}var e=[];$A(d.pollchoices.pollchoice).each(function(f){e.push({id:f.id["@nodeText"],text:f.text["@nodeText"],votes:f.votes.count["@nodeText"]})});if(a){a.call(this,e)}});b.send()},get_end_time:function(a){var c=this;var b=new McTunnel.Request(this._req_name("endtime"),[this.api_root,"id",this.poll_id,"end_time"].join("/"),function(f){if(c._is_error(f)){c.onerror(f.error);return}var e=f.value["@nodeText"];var g=e.match(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/);var h=new Date();h.setUTCFullYear(g[1]);h.setUTCMonth(parseInt(g[2],10)-1);h.setUTCDate(parseInt(g[3],10));h.setUTCHours(parseInt(g[4],10));h.setUTCMinutes(parseInt(g[5],10));h.setUTCSeconds(parseInt(g[6],10));if(a){a.call(this,h)}});b.send()},get_question:function(a){var c=this;var b=new McTunnel.Request(this._req_name("question"),[this.api_root,"id",this.poll_id,"question"].join("/"),function(d){if(c._is_error(d)){c.onerror(d.error);return}if(a){a.call(this,d.value["@nodeText"])}});b.send()},get_vote_count:function(a){var c=this;var b=new McTunnel.Request(this._req_name("vote_count"),[this.api_root,"id",this.poll_id,"votes/count"].join("/"),function(d){if(c._is_error(d)){c.onerror(d.error);return}if(a){a.call(this,parseInt(d.value["@nodeText"],10))}});b.send()},can_vote:function(b){var d=this;var a=readCookie("poll_"+this.poll_id);if(a!==null||a===""){b.call(this,false,"voted");return}var c=new McTunnel.Request(this._req_name("can_vote"),[this.api_root,"id",this.poll_id,"votes/place/allowed"].join("/"),function(e){if(d._is_error(e)){d.onerror(e.error);return}if(b){if(e.value["@nodeText"]=="true"){b.call(this,true,"")}else{d.get_end_time(function(g){var f=new Date();b.call(this,false,f<g?"unknown":"expired")})}}});c.send()},place_vote:function(a,b){var d=this;var c=new McTunnel.Request(this._req_name("place_vote"),[this.api_root,"id",this.poll_id,"votes/place"].join("/"),function(g){var e=(g["@status"]=="success");var f=(d._is_error(g))?g.error.message:"";if(e){d.get_end_time(function(i){var h=new Date();var j=parseInt((i.getTime()-h.getTime())/86400000,10)+7;createCookie("poll_"+d.poll_id,a,j)})}if(b){b.call(this,e,f)}});c.setVariable("poll.choice","id/"+a);c.send()}});var Pole=Class.create();Object.extend(Pole.prototype,{initialize:function(a){this.node=$(a);this.form=this.node.getElementsByTagName("form")[0];this.container=this.form.parentNode;this.message=$A(this.container.getElementsByTagName("p")).detect(function(d){return Element.hasClassName(d,"message")});this.error=$A(this.container.getElementsByTagName("p")).detect(function(d){return Element.hasClassName(d,"error")});var c=this;this.poll_id=this.form.action.split("#")[1];this.comm=new PoleComm(this.poll_id,function(d){c.set_display(c.DISP_ERROR);c.error.innerHTML="An error has occurred.";c.error.style.display="block"});this.form.onsubmit=function(){if(c.get_display()==c.DISP_RESULTS){c.set_display(c.DISP_VOTING);return false}var d=$A(this.getElementsByTagName("input")).collect(function(e){return e.checked?e.value:false}).detect(function(e){return e!==false});if(typeof d=="undefined"){c.error.innerHTML="Please choose an item.";c.error.style.display="block";return false}c.comm.place_vote(d,function(f,e){if(f){c.message.innerHTML="Thank you. Your vote has been submitted.";c.show_vote(false);c.update_counts()}else{c.error.innerHTML="Failed to place vote: "+e;c.error.style.display="block"}});return false};var b=$A(this.container.getElementsByTagName("a")).detect(function(d){return Element.hasClassName(d,"poll-results")});b.onclick=function(d){c.message.innerHTML="Thank you for viewing the poll. Click Vote to return and submit a vote.";c.show_vote(true);c.update_counts();return cancelEvent(d)};this.comm.get_question(function(d){c.fill_question(d)});this.comm.can_vote(function(d,f){if(d){c.update_answers()}else{var e;switch(f){case"voted":e="Thank you. Your vote has been submitted.";break;case"expired":e="Voting for this poll has ended.";break;default:e="This poll is currently closed.";break}c.message.innerHTML=e;c.show_vote(false);c.update_counts()}})},DISP_VOTING:"voting",DISP_RESULTS:"results",DISP_LOADING:"loading",DISP_ERROR:"error",set_display:function(b){if(b==this.DISP_LOADING){var a=Element.getDimensions(this.container).height;this.container.style.height=a+"px"}else{this.container.style.height=is_ie?"1%":""}Element.removeClassName(this.container,"loading");Element.removeClassName(this.container,"voting");Element.removeClassName(this.container,"results");Element.addClassName(this.container,b);this.error.style.display="none"},get_display:function(){var b=[this.DISP_VOTING,this.DISP_RESULTS,this.DISP_LOADING,this.DISP_ERROR];for(var a=0;a<b.length;a++){if(Element.hasClassName(this.container,b[a])){return b[a]}}return""},show_vote:function(a){Element[a?"removeClassName":"addClassName"](this.container,"hide-vote")},update_counts:function(){var a=this;this.set_display(a.DISP_LOADING);this.comm.get_vote_count(function(b){a.fill_vote_count(b);a.comm.get_choices(function(d){var c=$A(d).inject({},function(e,f){e[f.text]=b?parseInt(f.votes/b*100,10):0;return e});a.fill_percents(c);a.set_display(a.DISP_RESULTS)})})},update_answers:function(){var a=this;this.set_display(a.DISP_LOADING);this.comm.get_choices(function(c){var b=$A(c).inject({},function(d,e){d[e.id]=e.text;return d});a.fill_answers(b);a.show_vote(true);a.set_display(a.DISP_VOTING)})},fill_vote_count:function(a){$A(this.form.getElementsByTagName("p")).each(function(b){if(b.className=="vote-count"){b.getElementsByTagName("span")[0].innerHTML=a}})},fill_percents:function(b){var d=Element.getDimensions(this.container).width-50;var a=this.container.getElementsByTagName("dl")[0];var f=[];while(a.childNodes.length>0){a.removeChild(a.firstChild)}$H(b).each(function(j){var i=document.createElement("dd");var h=document.createElement("b");i.appendChild(h);i.appendChild(document.createTextNode(j.value+"%"));var g=document.createElement("dt");g.appendChild(document.createTextNode(j.key));a.appendChild(i);a.appendChild(g);f.push({node:h,width:(d*j.value/100)})});var e=Animator.interpolate.linear(0,1,50);var c=new Animator(e,500);c.onupdate=function(k){for(var h=0,g=f.length;h<g;h++){var j=f[h];j.node.style.width=(j.width*k)+"px"}return true};c.run()},fill_question:function(a){var b=$A(this.container.getElementsByTagName("p")).detect(function(c){return c.className=="question"});b.innerHTML=a},fill_answers:function(b){var a=this.container.getElementsByTagName("ul")[0];$H(b).each(function(f){var e=document.createElement("li");var d=document.createElement("input");d.className="fancy-radio";d.type="radio";d.name="poll-option";d.id="poll-"+f.key;d.value=f.key;var c=document.createElement("label");c.htmlFor="poll-"+f.key;c.innerHTML=f.value;e.appendChild(d);e.appendChild(c);a.appendChild(e);new RadioButton(d)})}});addLoadEvent(function(){var a=$("poll");if(a){new Pole(a)}});
// /modules/vmcs.js from ui
var vmcs={url:"/user/authkey/vmcs/",totalUMCount:0,dispContainer:false,countContainer:false,enabled:false,requestMade:false,initialize:function(){var a=CIM.user.getNow(["isLoggedIn"]);var b=a.isLoggedIn;this.preview=$("p-voice");if(this.preview){Element.addClassName(this.preview,b?"authed":"nonauthed")}this.countContainer=$("d-voice").getElementsByTagName("b")[0];this.dispContainer=$("p-voice-state-primary");if(!b){return false}this.enabled=true},requestData:function(){if(this.dispContainer&&this.enabled&&!this.requestMade){if(isPrimary()){this.getData()}else{this.displaySecondary()}}this.requestMade=true},entryTemplate:function(a,e){var d=a.substring(0,3);var c=a.substring(3,6);var b=a.substring(6);return"<div class='vmcsEntry'><h3>("+d+") "+c+"-"+b+"</h3><p>"+e+" unheard</p></div>"},getData:function(){Element.show("p-voice-state-loading");new Ajax.Request(this.url,{method:"GET",onSuccess:this.requestSuccess,onFailure:this.requestFailure})},displaySecondary:function(){Element.addClassName(this.preview,"secondary")},requestSuccess:function(trans){Element.hide("p-voice-state-loading");var json=stripComments(trans.responseText);var data=eval("("+json+")");if(!data.fault){var counts=data.umcount.pluck("new");if(counts.any(function(item){return(item>0)})){vmcs.dispContainer.innerHTML="";data.umcount._each(vmcs.createEntry.bind(vmcs));Element.addClassName(vmcs.preview,"primary")}else{Element.addClassName(vmcs.preview,"uninit")}}else{if(data.code==105){Element.addClassName(vmcs.preview,"upsell")}else{vmcs.showUnhandledError(data)}}},showUnhandledError:function(a){Element.addClassName(this.preview,"error");$("p-voice-errorcode").innerHTML=a.code},requestFailure:function(){Element.hide("p-voice-state-loading")},setUMCount:function(a){a=parseInt(a,10);this.totalUMCount+=a;this.countContainer.innerHTML=a},createEntry:function(c){this.setUMCount(c["new"]);var b=this.entryTemplate(c.tn,c["new"]);var a=document.createElement("div");a.innerHTML=b;b=a.getElementsByTagName("div")[0];this.dispContainer.appendChild(b);return true}};
// /modules/overlays/adfeedback.js from ui
var AdFeedbackWindow={fields:["afadCall","afadResponse","afpage","afbrowser","subject","fromAddress","afcomments","toAddresses"],create_window:function(c,b){if(!$("adfeedback")&&!this.load_overlay()){alert("Failed to load the feedback form. Please try again.");return false}var a=new Window("adfeedback","adfeedback-close");a.onhide=function(){$("adfeedback").getElementsByTagName("form")[0].style.display="block";$("adfeedback-confirm").style.display="none";$("adfeedback-error").style.display="none"};a.onshow=function(){var i=$("afcomments");var f=$("afadCall");var g=$("afpage");var d=$("afbrowser");var h=$("afadResponse");var e=$("subject");e.value="Ad Feedback for "+window.location;h.value=escape(b.innerHTML);g.value=window.location;f.value=c;d.value=navigator.userAgent;i.focus()};return a},load_overlay:function(){var c=new Ajax.Request("./overlays/adfeedback/",{method:"get",asynchronous:false});if(c.responseIsFailure()){return false}var e=document.createElement("div");e.innerHTML=c.transport.responseText;document.body.appendChild(e);var a=$("adfeedback");var d=a.getElementsByTagName("button")[0];var b=a.getElementsByTagName("form")[0];Widgets.build(a);d.onclick=function(f){var g=AdFeedbackWindow.fields.inject({},function(i,h){i[h]=$F(h);return i});new Ajax.Request(b.action,{method:"post",onSuccess:function(){b.style.display="none";$("adfeedback-confirm").style.display="block"},onFailure:function(h){b.style.display="none";$("adfeedback-error").style.display="block";$("error-text").innerHTML=h.responseText||"unknown error"},parameters:Ajax.parameters(g)});return cancelEvent(f)};return true}};
// /modules/overlays/slideshow.js from ui
var SlideshowWindow={add_click:function(a,c){a=$(a);var b=a.getElementsByTagName("a");if(b.length===0){return}b[0].onclick=c;b[0].onmouseover=function(){if(!Element.hasClassName(this.parentNode,"disable")){Element.addClassName(this,"hover")}};b[0].onmouseout=function(){if(!Element.hasClassName(this.parentNode,"disable")){Element.removeClassName(this,"hover");Element.removeClassName(this,"active")}};b[0].onmousedown=function(){if(!Element.hasClassName(this.parentNode,"disable")){Element.addClassName(this,"active")}};b[0].onmouseup=function(){if(!Element.hasClassName(this.parentNode,"disable")){Element.removeClassName(this,"active")}}},create_gallery_window:function(selected_image,data,gallery_id,galleryTitle){gallery_id=(gallery_id+"").replace(/\/data.*/,"").replace(/^\//,"").replace(/\/$/,"");if(gallery_id.match(/^(music|entertainment|sports|finance|tv|news)/)){document.location=["","slideshow",gallery_id.replace("/","-"),selected_image,""].join("/");return}var _this=this;data=eval(data);$A(data).each(function(item,i){var has_caption=$H(item).keys().include("ss-caption/innerHTML");var has_title=$H(item).keys().include("ss-title/innerHTML");if(has_caption&&!has_title){data[i]["ss-title/innerHTML"]=data[i]["ss-caption/innerHTML"];data[i]["ss-caption/innerHTML"]=""}if((has_caption&&has_title)&&(item["ss-title/innerHTML"]==item["ss-caption/innerHTML"])){data[i]["ss-caption/innerHTML"]=""}return true});showOverlay(function(){return _this.create_window_data(selected_image,"slideshow",data,galleryTitle)})},create_window:function(d,c){var b=arguments[2]||false;var f=arguments[3]||false;var e=this.load_data(c,b,f);if(!e){alert("Failed to load the slideshow. Please try again.");return false}var a=e.title;if(a===""){a=null}e=e.photos;return this.create_window_data(d,c,e,a)},create_window_data:function(m,d,h,b){var r="",c="";switch(d){case"slideshow":r="ss";c="slideshow";break;case"photooftheday":r="pod";c="pod-overlay";break;default:alert("Invalid type specified: "+d);return false}if(!$(c)&&!this.load_overlay(d)){alert("Failed to load the slideshow. Please try again.");return false}if(b&&$(r+"-head")){$(r+"-head").innerHTML=b}var v=$(r+"-slide").getElementsByTagName("ul")[0];v.innerHTML="";for(var t=0,q=h.length;t<q;t++){var w=document.createElement("li");var o=document.createElement("img");o.src=h[t].thumbnail_url;w.appendChild(o);v.appendChild(w)}var p=new Slideshow(r+"-slide");var n=0;var u=$(r+"-ad");p.onchange=function(B){var y=$(r+"-count");y.innerHTML=(B+1)+" of "+this.images.length;if(B<0||B>=h.length){return}var l=$(r+"-fullsize");var i=l.parentNode;var D=document.createElement("img");D.id=r+"-fullsize";D.style.position="relative";D.style.left="-10000px";D.onload=function(){var F=Animator.interpolate.linear(0,1,10);var E=new Animator(F,500);E.onupdate=function(G){Element.setOpacity(D,G);return true};D.style.left="";D.style.position="static";Element.setOpacity(D,0);E.run()};var C=Animator.interpolate.linear(1,0,10);var z=new Animator(C,500);z.onupdate=function(E){Element.setOpacity(l,E);return true};z.oncomplete=function(){i.replaceChild(D,l);var H=h[B];var F;for(F in H){var J=F.split("/");var G=$(J[0]);if(!G){continue}G[J[1]]=H[F]}var I=$(r+"-related");if(I){var E=H[r+"-related-a/href"];I.style.display=(E!==""&&typeof E!=="undefined")?"block":"none"}};z.run();n++;if(n%3===0&&u){while(u.childNodes.length>0){u.removeChild(u.childNodes[0])}var A=new Ad();A.set_location("LREC");A.set_background("000000");A.render_full(u,true,"iab300x250")}};var g=function(){if(p.image_id<=0){Element.addClassName($(r+"-prev"),"disable")}else{Element.removeClassName($(r+"-prev"),"disable")}if(p.image_id>=p.images.length-1){Element.addClassName($(r+"-next"),"disable")}else{Element.removeClassName($(r+"-next"),"disable")}};this.add_click(r+"-prev",function(i){p.animate_to_image(p.image_id-1);g();return cancelEvent(i)});this.add_click(r+"-next",function(i){p.animate_to_image(p.image_id+1);g();return cancelEvent(i)});var k=0;for(t=0,q=h.length;t<q;t++){if(h[t].identifier==m){k=t;break}}var a;var f=new Window(c,r+"-close");f.onshow=function(){a=(new Date()).getTime();var i=$(r+"-fullsize");var l=document.createElement("img");l.id=r+"-fullsize";l.style.position="relative";l.style.left="-10000px";i.parentNode.replaceChild(l,i);n=-1;p.reinitialize(k);n=1;Tracking.resetVars();Tracking.setVar("pageName","Slideshow-"+Tracking.pageLocation);Tracking.setVar("eVar6",Tracking.pageLocation);Tracking.setVar("prop8",Tracking.pageLocation);Tracking.setVar("events","event8");s.t()};var e=function(l,i){Tracking.resetVars();Tracking.setVar("linkTrackVars","eVar6,eVar7,eVar8,eVar9,eVar10,events");Tracking.setVar("linkTrackEvents","event9");Tracking.setVar("events","event9");Tracking.setVar("eVar6",Tracking.pageLocation);Tracking.setVar("eVar7",[Tracking.pageLocation,n].join("-"));Tracking.setVar("eVar8",[Tracking.pageLocation,l].join("-"));Tracking.setVar("eVar9",n);Tracking.setVar("eVar10",l);s.tl(true,"o",i)};f.onhide=function(){var i=(new Date()).getTime()-a;e("Close Window Button","Slideshow Close")};var x=$(r+"-related-a");if(x){x.onclick=function(i){e("Related Story Button","Slideshow Related Story");var l=this.href;window.setTimeout(function(){document.location=l},100);return cancelEvent(i)}}var j=$(r+"-submit-a");if(j){j.onclick=function(i){e("Submit Photo Button","Submit a Photo");var l=this.href;window.setTimeout(function(){document.location=l},100);return cancelEvent(evt)}}g();return f},load_overlay:function(a){var b=new Ajax.Request(["./overlays/",a,"/"].join(""),{method:"get",asynchronous:false});if(b.responseIsFailure()){return false}var c=document.createElement("div");c.innerHTML=b.transport.responseText;document.body.appendChild(c);return true},load_data:function(type){var categories=arguments[1]||false;var url;if(arguments[2]&&!categories){url=arguments[2];urlparts=url.split("/");while(urlparts[(urlparts.length-1)]!="view"&&urlparts.length>0){urlparts.pop()}if(urlparts[(urlparts.length-1)]=="view"){urlparts[(urlparts.length-1)]="data"}urlparts.splice((urlparts.length-2),0,"overlays");url=urlparts.join("/")+"/"}else{url=[".","overlays",type,"data"].join("/")+"/"}if(categories){categories.push("overlays",type,"data");url="/"+categories.join("/")+"/"}var req=new Ajax.Request(url,{method:"get",asynchronous:false});if(req.responseIsFailure()){return false}var json=stripComments(req.transport.responseText);return eval("("+json+")")}};var Slideshow=Class.create();Object.extend(Slideshow.prototype,{image_size:80,image_display:9,initialize:function(c){this.element=$(c);this.onchange=function(){};this.reticule_moving=false;this.scroll_moving=false;this.covers=[];var d=this.element.getElementsByTagName("div");for(var b=0,a=d.length;b<a;b++){switch(d[b].className){case"thumb-shader":this.covers.push(d[b]);break;case"reticule":this.reticule=d[b];break;case"thumbs":this.wrapper=d[b];break;case"shader":this.shader=d[b];break;default:break}}this.scroller=new SimpleScroller(this.wrapper);this.image_id=0;this.reinitialize();var e=this;this.shader.onclick=function(g){var f=g||window.event;var i=Event.pointerX(f);var h=Event.pointerY(f);e.images.each(function(j,k){var l=Element.getDimensions(j);var m=Element.getPosition(j);if(i>=m.x&&i<=m.x+l.width&&h>=m.y&&h<=m.y+l.height){e.animate_to_image(k);throw $break}})}},reinitialize:function(e){this.images=$A(this.wrapper.getElementsByTagName("img"));for(var d=0,b=this.images.length;d<b;d++){this.images[d].style.width=this.images[d].style.height=this.image_size+"px"}this.shader.style.display=this.images.length>=2?"block":"none";if(this.images.length>=2){this.image_width=Element.getPosition(this.images[1]).x-Element.getPosition(this.images[0]).x}else{if(this.images.length==1){this.image_width=Element.getDimensions(this.images[0]).width}else{this.image_width=0}}this.reticule.style.height=this.reticule.style.width=this.image_size+"px";var c=this.image_size-parseInt(this.reticule.clientHeight,10);this.reticule.style.height=this.reticule.style.width=(this.image_size+c)+"px";this.reticule.dimensions=Element.getDimensions(this.reticule);this.wrapper.style.width=(this.image_display*this.image_width)+"px";var a=10;this.shader.style.height=this.reticule.dimensions.height+"px";this.shader.style.width=(Element.getDimensions(this.wrapper).width+a)+"px";this.shader.dimensions=Element.getDimensions(this.shader);this.shader.dimensions.width-=a;this.scroller.offset.x=0;this.scroller.updatePosition();this.covers[0].style.width=0;this.covers[1].style.width=0;this.element.style.height=this.shader.style.height;this.move_to_image(e||this.image_id)},get_cover_dims:function(a){var b=Element.getPosition(this.wrapper).x+a*this.image_width;var c=[];c.push(Math.max(0,b-Element.getPosition(this.covers[0]).x));c.push(Math.max(0,this.shader.dimensions.width-(c[0]+this.reticule.dimensions.width-1)));return c},get_scroller_position:function(a){return this.image_width*a},get_position_offset:function(e){var b=this.image_display/2;var d=e-b;var c=e+b;var a=b;if(c>this.images.length){var f=c-this.images.length;d-=f;a+=f}if(d<0){a+=d;d=0}return{position:Math.floor(a),offset:Math.round(d,1)}},move_to_image:function(a){if(a<0){a=0}if(a>=this.images.length){a=this.images.length-1}this.image_id=a;this.pos_offset=this.get_position_offset(this.image_id);var b=this.get_cover_dims(this.pos_offset.position);this.covers[0].style.width=b[0]+"px";this.covers[1].style.width=b[1]+"px";this.scroller.offset.x=this.get_scroller_position(this.pos_offset.offset);this.scroller.updatePosition();this.onchange(this.image_id)},animate_to_image:function(e){if(e<0){e=0}if(e>=this.images.length){e=this.images.length-1}var c=500;this.image_id=e;var d=this.get_position_offset(this.image_id);var h=function(){if(!this.reticule_moving&&!this.scroll_moving){this.onchange(this.image_id)}};if(d.position!=this.pos_offset.position){this.reticule_moving=true;var l=Math.ceil(c*0.025);var a=[Element.getDimensions(this.covers[0]).width,Element.getDimensions(this.covers[1]).width];var k=this.get_cover_dims(d.position);var i=[Animator.interpolate.linear(a[0],k[0],l),Animator.interpolate.linear(a[1],k[1],l)];var j=i[0].collect(function(n,m){return[i[0][m],i[1][m]]});if(this.anim){this.anim.stop(true)}this.anim=new Animator(j,c);var b=this.covers;var g=this.shader;this.anim.onupdate=function(m){m.each(function(o,n){b[n].style.width=o+"px"});return true};this.anim.oncomplete=(function(){this.reticule_moving=false;h.call(this)}).bind(this);this.anim.run()}if(d.offset!=this.pos_offset.offset){this.scroll_moving=true;var f=this.get_scroller_position(d.offset);this.scroller.scrollTo({x:f},c,(function(){this.scroll_moving=false;h.call(this)}).bind(this))}this.pos_offset=d}});
// /modules/overlays/emailthis.js from ui
var portalUserData=null;var EmailthisWindow={onsubmit:function(){},clearFields:["toAddresses","fromAddress","emailthisMessage","captchaResponse"],create_window:function(){if(!$("emailthis")&&!this.load_overlay()){alert("Failed to load the feedback form. Please try again.");return false}var a=new Window("emailthis","emailthis-close");a.onhide=function(){EmailthisWindow.clearFields._each(function(b){var c=$(b);c.value=c.proxy.origValue||""});$("copyMe").checked=false;$("toAddresses").proxy.set_status("default");$("fromAddress").proxy.set_status("default");$("captchaResponse").proxy.set_status("default");Element.removeClassName($("emailthis-to-label"),"failed");Element.removeClassName($("emailthis-from-label"),"failed");Element.removeClassName($("emailthis-captcha-label"),"failed");$("emailthis-subcaption").innerHTML="Enter up to 10 email addresses (Separate by commas)";$("emailthis").getElementsByTagName("form")[0].style.display="block";$("emailthis-otherarticles").style.display="none";$("emailthis-error").style.display="none";$("submit").style.display="block";$("emailthis-subcaption").className="";$("emailthis-from-subcaption").className="";$("emailthis-captcha-subcaption").className="";if($("inlineplayer")&&$("inlineplayer").playerResume){$("inlineplayer").playerResume()}};a.onshow=function(){CIM.user.get(["isLoggedIn"],function(b){if(b.isLoggedIn){portalUserData=new UserData();jQuery(portalUserData).bind(UserDataEvent.SUCCESS,function(){if(portalUserData.getEmail()!==null&&portalUserData.getEmail()!==""){$("fromAddress").value=portalUserData.getEmail()}})}$("email-loader").style.display="none";EmailthisWindow.refresh_captcha();$("validation-error").style.display="none";if(b.isLoggedIn){$("emailthis-captcha-widget").style.display="none"}if($("inlineplayer")&&$("inlineplayer").playerHalt){$("inlineplayer").playerHalt()}})};return a},refresh_captcha:function(){CIM.user.get(["isLoggedIn"],function(a){if(!a.isLoggedIn){new Ajax.Request("./overlays/email/captcha/"+Math.floor(Math.random()*999999)+"/",{method:"get",onComplete:function(b){$("emailthis-captcha-ajax").innerHTML=b.responseText}})}})},load_overlay:function(){var g=CIM.user.getNow(["isLoggedIn"]);if(!g.isLoggedIn){this.sendFields=this.clearFields.concat(["encryptedCaptcha"])}else{this.sendFields=this.clearFields}var A=($("video-metadata"))?"video":(($("trivia-options"))?"trivia":(($("viewer-detail-wrapper"))?"photo":"article"));var r="./overlays/email/"+A+"/";var a=new Ajax.Request(r,{method:"get",asynchronous:false});if(a.responseIsFailure()){return false}var j=document.createElement("div");j.innerHTML=a.transport.responseText;document.body.appendChild(j);var p=document.title.replace(" - Comcast.net","");p=p.replace(" | Comcast.net","");if(A=="video"){p=$("video-metadata").getElementsByTagName("h2")[0].getElementsByTagName("strong")[0].innerHTML}else{if(A=="article"){if($("article").getElementsByTagName("h1")){p=$("article").getElementsByTagName("h1")[0].innerHTML}else{if($("article").getElementsByTagName("h2")){p=$("article").getElementsByTagName("h2")[0].innerHTML}}}}if(p===""){p=document.title}$("emailthis-title").innerHTML=p;$("emailthisTitle").value=p;var h=$("extended-videolist")||$("relatedvideo-container");var n,y,m,u,x,w,l;if(h){w=h.getElementsByTagName("ul")[0];x=w.getElementsByTagName("li");u=(x.length>5)?5:x.length;m=document.createElement("ul");for(y=0;y<u;y++){l=x[y].cloneNode(true);n=l.getElementsByTagName("a")[0];$A(n.childNodes).each(function(i){if(i.nodeType==8){i.parentNode.removeChild(i)}});n.rel=n.rel+' track_load(Email Story Window - "Other Links" click)';n.appendChild(document.createComment("TRACKING ! prop11: ! eVar16: "));assign_handlers(n);m.appendChild(l)}$("emailthis-pageheadlines").appendChild(m);Element.addClassName($("emailthis-pageheadlines"),"imgList");if(h.id=="relatedvideo-container"){Element.addClassName($("emailthis-pageheadlines"),"wideimg")}}var o=$("headlines");if(o&&!h){var f=o.getElementsByTagName("ul")[0];var e=f.getElementsByTagName("li");var d=(e.length>5)?5:e.length;var z=document.createElement("ul");for(y=0;y<d;y++){headlinesEmailLI=e[y].cloneNode(true);n=headlinesEmailLI.getElementsByTagName("a")[0];$A(n.childNodes).each(function(i){if(i.nodeType==8){i.parentNode.removeChild(i)}});n.rel=n.rel+' track_load(Email Story Window - "Other Links" click)';n.appendChild(document.createComment("TRACKING ! prop11: ! eVar16: "));assign_handlers(n);z.appendChild(headlinesEmailLI)}$("emailthis-pageheadlines").appendChild(z)}var k=$("carousel-panel0");if(k){w=k.getElementsByTagName("ul")[1];x=w.getElementsByTagName("li");u=(x.length>5)?5:x.length;m=document.createElement("ul");for(y=0;y<u;y++){l=x[y].cloneNode(true);n=l.getElementsByTagName("a")[0];n.getElementsByTagName("span")[0].innerHTML=n.title;$A(n.childNodes).each(function(i){if(i.nodeType==8){i.parentNode.removeChild(i)}});n.rel=n.rel+' track_load(Email Story Window - "Other Links" click)';n.appendChild(document.createComment("TRACKING ! prop11: ! eVar16: "));assign_handlers(n);m.appendChild(l)}$("emailthis-pageheadlines").appendChild(m);Element.addClassName($("emailthis-pageheadlines"),"imgList");Element.addClassName($("emailthis-pageheadlines"),"movieList")}if(!h&&!o&&!k){$("emailthis-otherarticles").getElementsByTagName("h2")[0].getElementsByTagName("span")[0].style.display="none"}var B=$("emailthis");var c=$("refreshCaptcha");var v=B.getElementsByTagName("button")[0];var b=B.getElementsByTagName("form")[0];if(A=="video"){b.action="/user/authkey/service/emailavideo/"}else{if(A=="trivia"){b.action="/user/authkey/service/emailapage/"}else{if(A=="photo"){b.action="/user/authkey/service/emailaphoto/"}}}Widgets.build(B);c.onclick=function(i){EmailthisWindow.refresh_captcha();return cancelEvent(i)};var q=$("emailthisMessage");q.onkeyup=function(i){if(q.value.length>500){q.value=q.value.substring(0,500)}};$("fromAddress").onfocus=function(){};$("fromAddress").onblur=function(){};$("toAddresses").onblur=function(){};b.onsubmit=function(){return false};v.onclick=function(K){var J="Please check that the domain of the email you entered is valid.";var L="The comcast.net email address you entered does not exist.";var F="Please check email formatting and that multiple emails are separated by commas.";var V="Please enter an email address to send the "+A+" to.";var R="Please check email formatting";var P="Please enter your email address";var E="Please enter the characters you see in the image";var W="Please enter the characters you see in the image";var N=true;var M;if($("toAddresses").value.replace(/\s+/,"")){var O=$("toAddresses").value.split(",");if(O.length>10){M="Enter up to 10 email addresses";N=false}else{for(t=0;t<O.length;t++){if(!echeck(O[t])){M=F;N=false}}}if(N){$("emailthis-subcaption").innerHTML="Enter up to 10 email addresses (Separate by commas)";$("emailthis-subcaption").className="";Element.removeClassName($("emailthis-to-label"),"failed")}else{$("emailthis-subcaption").innerHTML=M;$("emailthis-subcaption").className="failed"}}else{$("emailthis-subcaption").innerHTML=V;$("emailthis-subcaption").className="failed"}var X=($("toAddresses").value.replace(/^\s+/,"").replace(/\s+$/,"")!==""&&N);var I=false;if($("fromAddress").value.replace(/^\s+/,"").replace(/\s+$/,"")){if(echeck($("fromAddress").value)){$("emailthis-from-subcaption").innerHTML="";$("emailthis-from-subcaption").className="";I=true;Element.removeClassName($("emailthis-from-label"),"failed")}else{$("emailthis-from-subcaption").innerHTML=R;$("emailthis-from-subcaption").className="failed"}}else{$("emailthis-from-subcaption").innerHTML=P;$("emailthis-from-subcaption").className="failed"}var D=false;if(g.isLoggedIn||$("captchaResponse").value.replace(/^\s+/,"").replace(/\s+$/,"")){$("emailthis-captcha-subcaption").innerHTML="";$("emailthis-captcha-subcaption").className="";var Q=Element.getByTagClass($("emailthis-captcha-widget"),"span","failed");if(Q[0]){Element.removeClassName(Q[0],"failed")}Element.removeClassName($("emailthis-captcha-label"),"failed");D=true}else{$("emailthis-captcha-subcaption").innerHTML=E;$("emailthis-captcha-subcaption").className="failed"}if(X&&I&&D){$("validation-error").style.display="none";var T=EmailthisWindow.sendFields.inject({},function(Z,Y){Z[Y]=$F(Y);return Z});T.emailthisUrl=window.location.href;T.exec="true";T.copyMe=$("copyMe").checked;T.fmt="xml";T.emailthisTitle=$("emailthisTitle").value;T.subject=p.replace(/[^a-zA-Z0-9_\&\-]/g," ");$("submit").style.display="none";$("email-loader").style.display="block";new Ajax.Request(b.action,{method:"post",onSuccess:function(ag){var ac=ag.responseText;var ad=ag.responseXML;var ab=ad.getElementsByTagName("error");if(ab.length!==0){$("submit").style.display="block";$("email-loader").style.display="none";var ae,Z;if(ac.indexOf("recipient invalid domain")!=-1){$("emailthis-subcaption").innerHTML=J;$("emailthis-subcaption").className="failed";ae=$("toAddresses");Z=$("emailthis-to-label");ae.proxy.set_status("failed");Element.addClassName(Z,"failed");$("validation-error").style.display="block";$("validation-error").style.left="-254px"}else{if(ac.indexOf("Not our Customer")!=-1){$("emailthis-subcaption").innerHTML=L;$("emailthis-subcaption").className="failed";ae=$("toAddresses");Z=$("emailthis-to-label");ae.proxy.set_status("failed");Element.addClassName(Z,"failed");$("validation-error").style.display="block";$("validation-error").style.left="-254px"}else{if(ac.indexOf("Text did not match the image")!=-1){$("emailthis-captcha-subcaption").innerHTML=W;$("emailthis-captcha-subcaption").className="failed";var aa=$("captchaResponse");var Y=$("emailthis-captcha-label");aa.proxy.set_status("failed");Element.addClassName(Y,"failed");$("validation-error").style.display="block";$("validation-error").style.left="-254px"}else{b.style.display="none";$("emailthis-error").style.display="block";if(ag.responseXML){ad=ag.responseXML;$("error-text").innerHTML=ad.getElementsByTagName("error")[0].firstChild.nodeValue}else{$("error-text").innerHTML="unknown error"}}}}}else{b.style.display="none";$("emailthis-otherarticles").style.display="block";EmailthisWindow.onsubmit(T)}Tracking.resetVars();Tracking.setVar("linkTrackVars","eVar2,eVar11,eVar34");Tracking.setVar("linkTrackEvents","event12");Tracking.setVar("events","event12");Tracking.setVar("products",";"+Tracking.articleTitle);Tracking.setVar("eVar2",Tracking.articleTitle);Tracking.setVar("prop2",Tracking.articleTitle);Tracking.setVar("eVar3",Tracking.articleCategory);Tracking.setVar("prop3",Tracking.articleCategory);Tracking.setVar("prop18",[Tracking.getVar("prop3"),Tracking.getVar("prop2")].join(":"));Tracking.setVar("eVar21",[Tracking.getVar("eVar3"),Tracking.getVar("eVar2")].join(":"));Tracking.setVar("eVar34",Tracking.pageContext);var af=(document.location+"").replace(document.location.search,"");Tracking.setVar("prop14",af);Tracking.setVar("eVar17",af);var ah=$A(T.toAddresses.split(",")).collect(function(ai){var aj=ai.split("@");return";"+aj[1]});Tracking.setVar("eVar11",ah.length);s.tl(null,"o","")},onFailure:function(Y){b.style.display="none";$("emailthis-error").style.display="block";$("error-text").innerHTML=(Y.status==500)?("Server Error. Please try again.<!-- "+Y.responseText+" -->"):(Y.responseText||"unknown error")},parameters:Ajax.parameters(T)})}else{var H=$("toAddresses");var C=$("emailthis-to-label");var U=$("fromAddress");var S=$("emailthis-from-label");var i=$("captchaResponse");var G=$("emailthis-captcha-label");if(!X){H.proxy.set_status("failed");Element.addClassName(C,"failed")}else{H.proxy.set_status("default");Element.removeClassName(C,"failed")}if(!I){U.proxy.set_status("failed");Element.addClassName(S,"failed")}else{U.proxy.set_status("default");Element.removeClassName(S,"failed")}if(!D){i.proxy.set_status("failed");Element.addClassName(G,"failed")}else{i.proxy.set_status("default");Element.removeClassName(G,"failed")}$("validation-error").style.display="block";$("validation-error").style.left="-254px"}return cancelEvent(K)};return true},toValue:"",saveToValue:function(){EmailthisWindow.toValue=$("toAddresses").value}};function onABCommComplete(c){if(c){var b=c[0];if(b.length>0){var d=[];for(var a=0;a<c.length;a++){d.push(c[a][1])}$("toAddresses").value=(EmailthisWindow.toValue==="")?d.join(", "):EmailthisWindow.toValue+", "+d.join(", ")}}EmailthisWindow.saveToValue()};
// /modules/overlays/feedback.js from ui
var FeedbackWindow={fields:["f-name","f-email","f-comments"],create_window:function(){if(!$("feedback")&&!this.load_overlay()){alert("Failed to load the feedback form. Please try again.");return false}var a=new Window("feedback","feedback-close");a.onhide=function(){FeedbackWindow.fields._each(function(b){var c=$(b);c.value=c.proxy.origValue||""});$("feedback").getElementsByTagName("form")[0].style.display="block";$("feedback-confirm").style.display="none";$("feedback-error").style.display="none"};a.onshow=function(){var b=$("f-name"),c=$("f-comments");(b.value===""?b:c).focus()};return a},load_overlay:function(){var c=new Ajax.Request("./overlays/feedback/",{method:"get",asynchronous:false});if(c.responseIsFailure()){return false}var e=document.createElement("div");e.innerHTML=c.transport.responseText;document.body.appendChild(e);var a=$("feedback");var d=a.getElementsByTagName("button")[0];var b=a.getElementsByTagName("form")[0];Widgets.build(a);d.onclick=function(f){var g=FeedbackWindow.fields.inject({},function(i,h){i[h]=$F(h);return i});new Ajax.Request(b.action,{method:"post",onSuccess:function(){b.style.display="none";$("feedback-confirm").style.display="block"},onFailure:function(h){b.style.display="none";$("feedback-error").style.display="block";$("error-text").innerHTML=h.responseText||"unknown error"},parameters:Ajax.parameters(g)});return cancelEvent(f)};return true}};
// /modules/overlays/remoteapp.js from ui
var RemoteDVRWindow={activebodyid:[],rdvrtabs:["todo","series","dvrmgr"],activetab:[],reload_tab:{todo:true,series:true,dvrmgr:true},rTivoRecordingObject:{},rTivoDeleteRecordingObject:{},last_create_rcd_url:"",selected_schd_recording:{progId:null,sourceId:null,vcn:null,episodeStTime:null,stTime:null,endTime:null,saveUntil:null,recordingId:null,recordingIndex:null,stOffset:null,endOffset:null,recordingType:null,autoSrchStr:null,seriesTitle:null,programTitle:null},get_random:function(){return Math.floor(Math.random()*1000000)},set_reload_tab:function(a){if(typeof a=="undefined"){RemoteDVRWindow.reload_tab.todo=true;RemoteDVRWindow.reload_tab.series=true;RemoteDVRWindow.reload_tab.dvrmgr=true}else{RemoteDVRWindow.reload_tab[a]=true}console.log("RemoteDVRWindow.set_reload_tab >>>>  tabs:reload - todo: "+RemoteDVRWindow.reload_tab.todo+" series: "+RemoteDVRWindow.reload_tab.series+" dvrmanger: "+RemoteDVRWindow.reload_tab.dvrmgr)},set_tabs:function(a,e,c){console.log("RemoteDVRWindow.set_tabs >>>> begin");RemoteDVRWindow.activetab=a;for(var b=0;b<RemoteDVRWindow.rdvrtabs.length;b++){Element.removeClassName(RemoteDVRWindow.rdvrtabs[b],"active");$(RemoteDVRWindow.rdvrtabs[b]+"div").style.display="none"}Element.addClassName(a,"active");$(a+"div").style.display="block";$("dvr-save-opt").style.display="none";if(a=="todo"){if(RemoteDVRWindow.reload_tab.todo){RemoteDVRWindow.reload_tab.todo=false;RemoteDVRWindow.show_loading_anim("scheduledrecordings");RemoteDVRWindow.show_loading_anim("ssprograminfo-panel");RemoteDVRWindow.srreq(e,c)}}if(a=="series"){if(RemoteDVRWindow.reload_tab.series){RemoteDVRWindow.reload_tab.series=false;RemoteDVRWindow.show_loading_anim("seriespriority");RemoteDVRWindow.repreq()}}if(a=="dvrmgr"){if(RemoteDVRWindow.reload_tab.dvrmgr){RemoteDVRWindow.reload_tab.dvrmgr=false;RemoteDVRWindow.show_loading_anim("dvrmgrajax");RemoteDVRWindow.dvrmgrreq()}$("dvr-save-opt").style.display="block"}return false},show_loading_anim:function(a){console.log("RemoteDVRWindow.show_loading_anim >>>> calling for div name "+a);$(a).innerHTML='<div id="div-loading"><br><br><p><b>Please wait...</b></p></div>'},create_window:function(a,e,c,f,i,j,k,l,h,g){RemoteDVRWindow.activebodyid=e;if(!$("remotedvr")&&!RemoteDVRWindow.load_overlay()){alert("RemoteDVRWindow.create_window >>>> Failed to load the feedback form. Please try again.");if(is_ie&&RTivoAuthUtil.devices.length>1){$("rdvrselectorform").style.display="block"}return false}var b=new Window("remotedvr","remotedvr-close");b.hide_window=function(){RTivoDialogWindow.reset();this.window.style.display="none";if(is_ie&&RTivoAuthUtil.devices.length>1){$("rdvrselectorform").style.display="block"}};RemoteDVRWindow.set_reload_tab();if(a=="recordsingle"){RemoteDVRWindow.create_recording(e,c,f,i,j,k,unescape(l),unescape(h))}else{if(a=="recordseries"){RemoteDVRWindow.set_tabs("series");RemoteDVRWindow.create_series(e,i,j,k,unescape(l))}else{if(a=="dvrfirstuse"){RemoteDVRWindow.set_tabs("dvrmgr");RemoteDVRWindow.dvrmgrreq()}else{if(a=="modifySingle"){RemoteDVRWindow.set_tabs("todo",g,function(){RemoteDVRWindow.showModifySettingsPanel()})}else{if(RTivoAuthUtil.devices.length==1){RemoteDVRWindow.set_tabs("todo")}else{RemoteDVRWindow.set_tabs("todo")}}}}}RemoteDVRWindow.load_dvrselector();return b},load_dvrselector:function(a){jQuery("#rdvrsel").html(RTivoViewUtil.getTivoSelectorOptions());if(RTivoAuthUtil.devices.length==1){console.log("RemoteDVRWindow.load_dvrselector >>>> there is only 1 device in the list");jQuery("#repeatingbodyIdrow").css("display","none");jQuery("#bodyIdrow").css("display","none")}if(RTivoAuthUtil.devices.length==0){console.log("RemoteDVRWindow.load_dvrselector >>>> Tivo Authentication has failed, or there are no devices listed in the RTivoAuthUtil model.")}var h=jQuery("#gridRTivoSelector");var c=jQuery("#gridRTivoSelector :selected").val();var j=(c)?jQuery("#gridRTivoSelector :selected")[0].index:0;if(typeof a=="undefined"){RemoteDVRWindow.activebodyid=c;jQuery("#rdvrsel").attr("selectedIndex",(j>=0?j:0))}else{RemoteDVRWindow.activebodyid=c}jQuery("#rdvrsel").change(function(i){RemoteDVRWindow.activebodyid=jQuery("#rdvrsel option:selected").val();RemoteDVRWindow.set_reload_tab();loadScheduledSeries();RemoteDVRWindow.set_tabs(RemoteDVRWindow.activetab);var l=jQuery("#rdvrsel :selected")[0].index;document.getElementById("bodyId").proxy.select(l);document.getElementById("repeatingbodyId").proxy.select(l)});var b=$("dvrselector");var g=b.getElementsByTagName("option");for(var f=0;f<g.length;f++){var e=new Option();e.text=(g[f].text).substring(0,14);e.value=g[f].value;document.getElementById("bodyId").options[f]=e;var k=new Option();k.text=(g[f].text).substring(0,14);k.value=g[f].value;document.getElementById("repeatingbodyId").options[f]=k}document.getElementById("bodyId").proxy.init_list();document.getElementById("bodyId").proxy.select(j);document.getElementById("repeatingbodyId").proxy.init_list();document.getElementById("repeatingbodyId").proxy.select(j);if(RTivoAuthUtil.devices.length==1){$("view-tivo-sel").style.display="none";$("dvrmgr").style.display="none"}else{$("view-tivo-sel").style.display="block";$("dvrmgr").style.display="block"}},create_recording:function(g,a,f,j,k,l,n,i,c,m,h,e){var b="/user/authkey/rtivo/createOneTimeScheduledRecording/?bodyId="+g+"&vcn="+l+"&startTime="+a+"&endTime="+f+"&tz="+RTivoLocationModel.timezoneOffset+"&programId="+j+"&sourceId="+k+"&fmt=xml";if(typeof e!="undefined"){b+="&startOffset="+c+"&endOffset="+m+"&saveUntil="+h}RemoteDVRWindow.last_create_rcd_url=b;RemoteDVRWindow.rTivoRecordingObject={};RemoteDVRWindow.rTivoRecordingObject={_body:g,_title:n,_startTime:a,_endTime:f,_lid:j,_cid:k,_cnum:l,_title:n,_programTitle:i,_startoffset:(c)?c:null,_endoffset:(m)?m:null,_saveuntil:(h)?h:null,_callingfunction:(e)?e:null,_requestURL:b};RemoteDVRWindow.doCreateRecording()},doCreateRecording:function(){if(!RemoteDVRWindow.rTivoRecordingObject||!RemoteDVRWindow.rTivoRecordingObject._requestURL){RTivoDialogWindow.alert("An error occurred while attempting to schedule your recording. Please try again.");return}if(RTivoDialogWindow.activeDialogWindow){RTivoDialogWindow.hideDialog()}new Ajax.Request(RemoteDVRWindow.rTivoRecordingObject._requestURL+"&override=false",{method:"get",onSuccess:function(a){jQuery("#modifysubmit").attr("disabled",false);RemoteDVRWindow.onCreateRecordingSuccess(RTivoDataUtil.interpretAjaxResponse(a))},onFailure:function(a){jQuery("#modifysubmit").attr("disabled",false);RemoteDVRWindow.onCreateRecordingFailure()}})},onCreateRecordingSuccess:function(a){jQuery("modifysubmit").attr("disabled","false");var b=jQuery(a).find("error").text();var h=jQuery(a).find("scheduledRecordingId").text();console.log("RemoteDVRWindow.onCreateRecordingSuccess >>>> is error: "+b+", schdRecordId= "+h+" on box "+RemoteDVRWindow.rTivoRecordingObject._body);if(b&&b!=""){var c=jQuery(a).find("error");var f=b.split(" ")[0];console.log("RemoteDVRWindow.onCreateRecordingSuccess >>>> error msg first word: "+f);if(f=="conflicts"){RemoteDVRWindow.handleCreateRecordingConflict(c)}else{RemoteDVRWindow.display_error_msg(c)}RemoteDVRWindow.set_tabs("todo")}else{if(h&&h!=""){var g=new Object();g.argNum=3;g.arg0=RemoteDVRWindow.rTivoRecordingObject._title;g.arg1=RemoteDVRWindow.rTivoRecordingObject._programTitle;g.arg2=RemoteDVRWindow.convertmsToDateTime(stime);if(RemoteDVRWindow.isRecordingWithin90Minutes(stime)){console.log("RemoteDVRWindow.create_recording >>>> less than 90 mins");var e="Oops!"+RemoteDVRWindow.confirmation_info_args(g)+"airs in less than 90 minutes, so this showing may not record. Please be sure to schedule programs at least 90 minutes in advance.";RTivoDialogWindow.alert(e)}else{if(RemoteDVRWindow.rTivoRecordingObject._callingfunction=="modify"){RemoteDVRWindow.deleteonetime(false,"modify");RTivoDialogWindow.info("Program has been moved to a new box"+RemoteDVRWindow.confirmation_info_args(g))}else{RTivoDialogWindow.info("PROGRAM SCHEDULED TO RECORD"+RemoteDVRWindow.confirmation_info_args(g));loadScheduleRecordings();RemoteDVRWindow.setGridInfoToRecordedSingle();console.log("RemoteDVRWindow.onCreateRecordingSuccess >>>> episode_vals[3]= "+episode_vals[3]);episode_vals[12]=h;jQuery("#modifySingle").attr("rel","remoteapp("+episode_vals+")")}}RemoteDVRWindow.set_reload_tab("todo");RemoteDVRWindow.set_tabs("todo",h)}else{RTivoDialogWindow.alert("An unknown error occured when trying to schedule <b>"+title+"</b> to record. Please try again.");RemoteDVRWindow.set_tabs("todo")}}},setGridInfoToRecordedSingle:function(){jQuery("#recordsingle").hide();jQuery("#modifySingle").show();jQuery("#schedulednotice").removeClass().addClass("tick-bubble");jQuery("#schedulednotice").show()},onCreateRecordingFailure:function(a){console.log("RemoteDVRWindow.create_recording >>>> onFailure");jQuery("modifysubmit").attr("disabled","false");RTivoDialogWindow.alert("An unknown error occured when trying to schedule <b>."+RemoteDVRWindow.rTivoRecordingObject._title+"</b> to record. Please try again.");RemoteDVRWindow.set_tabs("todo")},handleCreateRecordingConflict:function(f){console.log("RemoteDVRWindow.handleCreateRecordingConflict >>>> recording conflict: "+RemoteDVRWindow.rTivoRecordingObject._callingfunction);var p=new Object();p.argNum=1;p.arg0=RemoteDVRWindow.rTivoRecordingObject._title+((RemoteDVRWindow.rTivoRecordingObject._programTitle!="")?"<br>"+RemoteDVRWindow.rTivoRecordingObject._programTitle:"")+" <br> "+RemoteDVRWindow.convertmsToDateTime(RemoteDVRWindow.rTivoRecordingObject._startTime);var o=jQuery(f).find("programid");if(RemoteDVRWindow.isRecordingWithin90Minutes(stime)){console.log("RemoteDVRWindow.create_recording >>>> less than 90 mins");var u="Oops!"+RemoteDVRWindow.confirmation_info_args(p)+"airs in less than 90 minutes, so this showing may not record. Please be sure to schedule programs at least 90 minutes in advance.";RTivoDialogWindow.alert(u)}for(var x=0;x<o.length;x++){var t=jQuery(o[x]).text();var k;if(RemoteDVRWindow.rTivoRecordingObject._callingfunction=="modify"){var g=RemoteDVRWindow.rTivoRecordingObject._body.replace(/:/g,"_").replace(/\./g,"_");k=schdRecordXMLs[g]}else{var n=RemoteDVRWindow.activebodyid.replace(/:/g,"_").replace(/\./g,"_");k=schdRecordXMLs[n]}console.log("RemoteDVRWindow.handleCreateRecordingConflict");var a=jQuery(k).find("recordingId");var c=jQuery(k).find("seriestitle");var w=jQuery(k).find("programtitle");var m=jQuery(k).find("episodestarttime");console.log("RemoteDVRWindow.handleCreateRecordingConflict >>>> about to parse the xml doc for id "+t+" in id = "+id);var e="";var h="";var r="";for(var v=0;v<a.length;v++){var q=jQuery(a[v]).text();console.log("RemoteDVRWindow.handleCreateRecordingConflict >>>> iterate existing list: "+v+". "+q);if(t==q){e=jQuery(c[v]).text();h=jQuery(w[v]).text();r=jQuery(m[v]).text();p.argNum=p.argNum+1;console.log("RemoteDVRWindow.handleCreateRecordingConflict >>>> existing recording info found: "+v+"  ===> "+e+" time === "+r);break}}p["arg"+(x+1)]=e+((h!="")?"<br>"+h:"")+"<br>"+RemoteDVRWindow.convertmsToDateTime(r);console.log("RemoteDVRWindow.handleCreateRecordingConflict >>>> existing show info: "+p["arg"+(x+1)])}var l="<li class='program'>1)&nbsp; "+p.arg0+"</li>";var b="";for(var x=1;x<p.argNum;x++){b+='<li class="program">'+(x+1)+") &nbsp; "+p["arg"+x]+"</li>"}var s="<p>Your new recording conflicts with previously set events. If you record this program, the lowest priority programs (listed below) will not be recorded.</p><br><span class='list-head'>New Recording:</span><ul class='conflict-list'>"+l+"</ul><span class='list-head'>Lowest Priority Programs Will Not Be Recorded:</span><ul class='conflict-list'>"+b+"</ul><p>Do you still want to schedule the NEW recording?</p>";RTivoDialogWindow.confirm(s,"RemoteDVRWindow.onForceConflictConfirm()","RTivoDialogWindow.hideDialog()","record","dont_record")},onForceConflictConfirm:function(){RemoteDVRWindow.force_conflict_record()},force_conflict_record:function(){console.log("RemoteDVRWindow.force_conflict_record >>>> "+RemoteDVRWindow.last_create_rcd_url);if(RTivoDialogWindow.activeDialogWindow){RTivoDialogWindow.hideDialog()}var a=new Ajax.Request(RemoteDVRWindow.last_create_rcd_url+"&override=true",{method:"get",onSuccess:function(f){var b=RTivoDataUtil.interpretAjaxResponse(f);console.log("RemoteDVRWindow.force_conflict_record >>>> onSuccess response"+f.responseText);var c=jQuery(b).find("error").text();var g=jQuery(b).find("scheduledRecordingId").text();if(c&&c!=""){RemoteDVRWindow.display_error_msg(c);RemoteDVRWindow.set_tabs("todo")}else{if(g&&g!=""){var e=new Object();e.argNum=3;e.arg0=RemoteDVRWindow.rTivoRecordingObject._title;e.arg1=RemoteDVRWindow.rTivoRecordingObject._programTitle;e.arg2=RemoteDVRWindow.convertmsToDateTime(RemoteDVRWindow.rTivoRecordingObject._startTime);if(RemoteDVRWindow.rTivoRecordingObject._callingfunction=="modify"){RemoteDVRWindow.deleteonetime(false,"modify");RTivoDialogWindow.info("<p align='center'>Program has been moved to new Box</p>")}else{console.log("RemoteDVRWindow.force_conflict_record >>>> record id: "+g);RemoteDVRWindow.set_reload_tab("todo");RemoteDVRWindow.set_tabs("todo",g);RTivoDialogWindow.info("PROGRAM SCHEDULED TO RECORD"+RemoteDVRWindow.confirmation_info_args(e))}loadScheduleRecordings();jQuery("#recordsingle").css("display","none");jQuery("#modifySingle").css("display","block");episode_vals[12]=g;jQuery("#modifySingle").attr("rel","remoteapp("+episode_vals+")")}else{console.log("RemoteDVRWindow.force_conflict_record >>>> conflict resolution error");RTivoDialogWindow.alert("Error occurred when schedule to record conflicting show. Error: "+c);RemoteDVRWindow.set_tabs("todo")}}},onFailure:function(b){console.log("onFailure");RTivoDialogWindow.alert("An unknown error occurred when trying to schedule the conflicting show. Please try again.");RemoteDVRWindow.set_tabs("todo")}})},isRecordingWithin90Minutes:function(c){var a=new Date();var b=a.getTime();var e=c-b;return e<=5400000},isSelectedRecordingWithin90Minutes:function(){var a=parseInt(RemoteDVRWindow.selected_schd_recording.stTime)+parseInt(RemoteDVRWindow.selected_schd_recording.stOffset*1000);return this.isRecordingWithin90Minutes(a)},convertmsToDateTime:function(a){if(typeof a=="undefined"||a.length==0){console.log("RemoteDVRWindow.convertmsToDateTime >>>> invalid milli second ..... "+a);return""}console.log("RemoteDVRWindow.convertmsToDateTime >>>> ms = "+a);localDate=new Date(parseFloat(a));console.log("RemoteDVRWindow.convertmsToDateTime >>>> localDate == "+localDate);localTime=localDate.getTime();console.log("RemoteDVRWindow.convertmsToDateTime >>>> local time "+localTime);localOffset=localDate.getTimezoneOffset()*60000;utc=localTime+localOffset+(parseInt(RTivoLocationModel.timezoneOffset)*3600000);d=new Date(utc);var b=d.getMonth()+1+"/"+d.getDate()+"/"+d.getFullYear()+" | ";hr=d.getHours();amOrPm="";hr_txt="";if(hr>12){hr_txt=hr-12;amOrPm="pm"}else{if(hr==12){hr_txt=hr;amOrPm="noon"}else{hr_txt=hr;amOrPm="am"}}min=d.getMinutes();min_txt=""+min;if(hr_txt.length<=1){hr_txt="0"+hr_txt}if(min_txt.length<=1){min_txt="0"+min_txt}b=b+hr_txt+":"+min_txt+" "+amOrPm;console.log("RemoteDVRWindow.convertmsToDateTime >>>> date and text "+d+" : "+b);return b},confirmation_info_args:function(c){var b="<div class='recording'>";for(var a=0;a<c.argNum;a++){if(typeof c["arg"+a]!="undefined"){b+="<p>"+c["arg"+a]+"</p>"}}return b+="</div>"},display_error_msg:function(a){console.log("RemoteDVRWindow.display_error_msg >>>> error.textContent: "+a.textContent);var b="";if(a.textContent!=null||a.textContent!=""){if(a.textContent==undefined){b="The information for this series is not available"}else{b=a.textContent}}else{b=jQuery(a).find("message")[0].textContent}eText="There's been an error:<br><br> "+b;console.log("RemoteDVRWindow.display_error_msg >>>> message: "+eText);RTivoDialogWindow.alert(eText)},srreq:function(c,b){var a=$("scheduledrecordings");$("ssprograminfo-panel").innerHTML="";new Ajax.Request("/user/authkey/rtivo/viewOneTimeScheduledRecordings/?bodyId="+RemoteDVRWindow.activebodyid+"&tz="+RTivoLocationModel.timezoneOffset+"&ran="+RemoteDVRWindow.get_random(),{method:"get",onSuccess:function(l){console.log("RemoteDVRWindow.ssreq >>>> onSuccess");a.innerHTML=l.responseText;var g=jQuery(a).find("a");var f;if(g.length>0){for(var e=0;e<g.length;e++){assign_handlers(g[e]);if(c!=undefined){anchparent=g[e].parentNode;if(anchparent.id==c){console.log("RemoteDVRWindow.srreq >>>> hilite id in undefied "+anchparent.id);f=g[e]}}else{f=g[0]}}var h=jQuery(f).attr("rel");var k=h.substring(h.indexOf("(")+1,h.lastIndexOf(")"));var j=k.split(",");RemoteDVRWindow.onetimedetails(j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7],j[8],j[9],j[10],j[11],j[12],j[13],j[14],j[15]);parent_a=f.parentNode;Element.addClassName(parent_a,"active");$("scheduledrecordings").scrollTop=(parent_a.offsetTop-$("scheduledrecordings").offsetTop)-24;$("cancelthisprogram").onclick=$("cancelthisepisode").onclick=function(i){RemoteDVRWindow.deleteonetime(true)};if(b){b()}}else{$("cancelthisepisode").onclick=function(i){};$("cancelthisprogram").onclick=function(i){}}},onFailure:function(e){console.log("RemoteDVRWindow.srreq >>>> onFailure: "+e.transprtText);RTivoDialogWindow.alert("An error occurred when trying to fetch scheduled recordings. Please try reloading the application.")}})},dvrmgrreq:function(){var b="[";var c=jQuery("#gridRTivoSelector option").length;for(var a=0;a<c;a++){b=b+'"'+document.rdvrselectorform.gridRTivoSelector.options[a].value+'"';if(a<=(c-2)){b=b+","}}b=b+"]";new Ajax.Request("/user/authkey/rtivo/dvrManagerViewer/?json="+b+"&r="+RemoteDVRWindow.get_random(),{method:"get",onSuccess:function(f){var e=$("dvrmgrajax");e.innerHTML=f.responseText;if(RemoteDVRWindow.activetab=="dvrmgr"){$("dvr-save-opt").style.display="block"}},onFailure:function(e){console.log("RemoteDVRWindow.dvrmgrreq >>>> onFailure: "+e.responseText);RTivoDialogWindow.alert("An error occurred when trying to load the dvr manager. Please try reloading the page.")}})},rdvraccordion:function(a){if((a.id=="ssprograminfo"&&Element.hasClassName(a.id,"opened"))||(a.id=="modifyoptions"&&Element.hasClassName(a.id,"closed"))){this.showModifySettingsPanel()}else{this.showInfoPanel()}},showModifySettingsPanel:function(){var c=$("ssprograminfo-panel");var e=$("modifyoptions-panel");var b=$("ssprograminfo");var a=$("modifyoptions");c.style.display="none";e.style.display="block";Element.removeClassName(b,"opened");Element.addClassName(b,"closed");Element.removeClassName(a,"closed");Element.addClassName(a,"opened")},showInfoPanel:function(){var c=$("ssprograminfo-panel");var e=$("modifyoptions-panel");var b=$("ssprograminfo");var a=$("modifyoptions");c.style.display="block";e.style.display="none";Element.removeClassName(b,"closed");Element.addClassName(b,"opened");Element.removeClassName(a,"opened");Element.addClassName(a,"closed")},rankme:function(a,i){function g(k,l,j){k.insertBefore(l,j.nextSibling)}var b=a.parentNode;var f=a.parentNode.parentNode;if(i=="up"){var h=b.previousSibling;console.log(h.nodeName);if(h.nodeName=="LI"){f.insertBefore(b,h)}else{while(h.nodeName=="#text"){h=h.previousSibling;if(h.nodeName=="LI"){f.insertBefore(b,h)}}}}else{var c=b.nextSibling;if(c.nodeName=="LI"){g(f,b,c)}else{while(c.nodeName=="#text"){c=c.nextSibling;if(c.nodeName=="LI"){g(f,b,c)}}}}var e=$("updateseasonpriority");e.onclick=function(){RemoteDVRWindow.reorder_req()};jQuery(e).attr("src","/ui/images/cascade/themes/tvchannel/rtivo/update_priority.jpg")},reorder_req:function(){var b=jQuery("#seriespriority li");var e="{";for(var c=0;c<b.length;c++){e=e+"'"+b[c].id+"':"+(c+1)+"1";if(c<=(b.length-2)){e=e+","}}e=e+"}";var a=new Ajax.Request("/user/authkey/rtivo/modifySeriesRecording/?bodyId="+RemoteDVRWindow.activebodyid+"&json="+e,{method:"get",onSuccess:function(g){console.log("RemoteDVRWindow.reorder_req");RemoteDVRWindow.repreq();RTivoDialogWindow.info("<p align='center'>Your priorities have been updated.</p>");var f=$("updateseasonpriority");f.onclick=function(){};jQuery(f).attr("src","/ui/images/cascade/themes/tvchannel/rtivo/update_priority_grey.jpg")},onFailure:function(f){console.log("RemoteDVRWindow.reorder_req >>>> onFailure: "+f.responseText);RTivoDialogWindow.alert("An error occurred while attempting to update your priority list. Please try again.")}});return false},truncate:function(b,a){if(b.length>a){return b.substr(0,a)+"..."}else{return b}},onetimedetails:function(s,v,g,o,b,i,w,e,k,j,r,q,n,l,f,m){var s=s.replace(/'/g,"");var k=k.replace(/'/g,"");var n=n.replace(/'/g,"");var h=l.replace(/'/g,"").replace(/_/g,",");var f=f.replace(/'/g,"").replace(/_/g,",");var m=m.replace(/'/g,"").replace(/_/g,",");e=e.replace(/'/g,"");if(h.indexOf("Manual")==0){f="Manual: "+f}if(m.length>0){$("seriestitle").innerHTML=this.truncate(f,45);$("programtitle").innerHTML=this.truncate(m,55)}else{$("seriestitle").innerHTML=this.truncate(f,85);$("programtitle").innerHTML=m}document.modifyform.recordTitle.value=m;document.modifyform.scheduledRecordingId.value=k;document.modifyform.recordStartTime.value=b;document.modifyform.recordSeriesTitle.value=f;console.log("RemoteDVRWindow.onetimedetails >>>> title "+m);RemoteDVRWindow.selected_schd_recording.progId=s;RemoteDVRWindow.selected_schd_recording.seriesId=v;RemoteDVRWindow.selected_schd_recording.sourceId=g;RemoteDVRWindow.selected_schd_recording.vcn=o;RemoteDVRWindow.selected_schd_recording.episodeStTime=b;RemoteDVRWindow.selected_schd_recording.stTime=i;RemoteDVRWindow.selected_schd_recording.endTime=w;RemoteDVRWindow.selected_schd_recording.saveUntil=e;RemoteDVRWindow.selected_schd_recording.recordingId=k;RemoteDVRWindow.selected_schd_recording.recordingIndex=j;RemoteDVRWindow.selected_schd_recording.stOffset=r;RemoteDVRWindow.selected_schd_recording.endOffset=q;RemoteDVRWindow.selected_schd_recording.recordingType=n;RemoteDVRWindow.selected_schd_recording.autoSrchStr=h;RemoteDVRWindow.selected_schd_recording.seriesTitle=f;RemoteDVRWindow.selected_schd_recording.programTitle=m;jQuery("#getseasonpass").hide().unbind("click");jQuery("#cancelseries").hide().unbind("click");if(s.indexOf("EP")==0){$("cancelthisepisode").style.display="block";$("cancelthisprogram").style.display="none"}else{$("cancelthisepisode").style.display="none";$("cancelthisprogram").style.display="block"}if(n=="oneTime"&&(s.indexOf("SH")==0||s.indexOf("EP")==0)){var p=false;jQuery(scheduledSeries).find("seriesid").each(function(x,y){if(jQuery(y).text()==v){p=true;return false}});if(!p){var u=jQuery("#getseasonpass");u.show();u.click(function(){RemoteDVRWindow.create_series(RemoteDVRWindow.activebodyid,s,g,o,f);RemoteDVRWindow.set_reload_tab("series");RemoteDVRWindow.set_tabs("series");u.hide()})}}if(RTivoLocationModel.headend==""){RTivoLocationModel.headend=app.headend}var a="/detail-html?episodeid="+s+"&stationid="+g+"&channel="+o+"&episodestarttime="+b+"&starttime="+i+"&endtime="+w+"&zip="+RTivoLocationModel.zipcode+"&headendid="+RTivoLocationModel.headend;var c=$("ssprograminfo-panel");RemoteDVRWindow.show_loading_anim("ssprograminfo-panel");var t=new Ajax.Request(a,{method:"get",onSuccess:function(D){console.log("RemoteDVRWindow.onetimedetails.ssinforeq >>>> onSuccess- recordingId: "+k+", recordingType: "+n);if(n=="autopilot"){$("modify-table").style.display="none";$("modifysubmit").style.display="none";$("saveuntil-td").innerHTML=(e=="spaceNeeded"?"Space is Needed":"I delete");getOffsetText=function(H,I){var K="";var J=(I=="st")?"Early - ":"Late - ";var G=(I=="st")?"Late - ":"Early - ";H=H/60;if(Math.abs(H)>=60){var L=Math.abs(H)/60;K=L+" hr"}else{K=Math.abs(H)+" min"}if(H<0){K=G+K}else{if(H>0){K=J+K}else{if(H==0){K="On Time"}}}return K};var C="";var B="";var A="";var y='<div id="details-autopilot"><p style="">';if(typeof h!="undefined"){var z;if(z=h.match(/Manual: (.*)/)){console.log("Found manual autopilot string: "+z[1]);var x=z[1].split(" ");var E=x[3].split(":");var F="";if(E[0]>12){F="0"+(E[0]-12)+":"+E[1]+" PM"}else{F=E[0]+":"+E[1]+" AM"}y+="<span>Channel: </span> "+x[1]+"<br/><span>Days: </span>"+x[2]+"<br/><span>Start Time: </span>"+F}else{if(z=h.match(/Complex: (.*)/)){console.log("Found complex autopilot string: "+z[1]);var x=z[1].split(/(\w+: )/g);if(x[0]==""){x.shift()}jQuery.each(x,function(H,G){if(H%2==0){y+="<span>"+G+"</span>"}else{y+=G;if(H<x.length){y+="<br />"}}})}else{console.log("Found single query autopilot string: "+h);if(z=h.match(/Category: (.*)/)){y+="<span>Category :</span>"+z[1]}else{if(h.indexOf(",")!=-1){y+="<span>Person: </span>"+h}else{y+="<span>Keyword: </span>"+h}}}}}else{console.log("RemoteDVRWindow.onetimedetails.ssinforeq >>>> no search string available for this autopilot")}c.innerHTML=y+"</p></div>"+D.responseText;$("startoffset-td").innerHTML=getOffsetText(r,"st");$("endoffset-td").innerHTML=getOffsetText(q,"end");$("autopilot-modify-table").style.display="block"}else{console.log("RemoteDVRWindow.onetimedetails.ssinforeq >>>> non-autopilot blog to fill up rightside module ");$("autopilot-modify-table").style.display="none";$("modify-table").style.display="block";$("modifysubmit").style.display="block";c.innerHTML=(D.responseText=="")?'<div id="details-return" style="font-size:12px;"> No Info Found for this Entry.</div>':D.responseText;console.log("RemoteDVRWindow.onetimedetails.ssinforeq >>>> len= "+document.modifyform.startOffset.proxy.length+" saveuntil = "+e+" start offset "+r+"  end offset  "+q);RemoteDVRWindow.optionmatch(document.modifyform.saveUntil,e);RemoteDVRWindow.optionmatch(document.modifyform.startOffset,r);RemoteDVRWindow.optionmatch(document.modifyform.endOffset,q)}},onFailure:function(x){c.innerHTML='<div id="details-return" style="font-size:12px;">There is no information available for the selected program.</div>';$("autopilot-modify-table").style.display="none";$("modify-table").style.display="block";$("modifysubmit").style.display="block";console.log("RemoteDVRWindow.onetimedetails.ssinforeq >>>> onFailure  --> len= "+document.modifyform.startOffset.proxy.length+" saveuntil = "+e+" start offset "+r+"  end offset  "+q);RemoteDVRWindow.optionmatch(document.modifyform.saveUntil,e);RemoteDVRWindow.optionmatch(document.modifyform.startOffset,r);RemoteDVRWindow.optionmatch(document.modifyform.endOffset,q)}});$("bodyId").proxy.select($("rdvrsel").selectedIndex)},optionmatch:function(c,b){for(var a=0;a<c.length;a++){if(c.options[a].value==b){c.proxy.select(a);console.log("RemoteDVRWindow.optionmatch >>>> "+c.options[a].value)}}document.modifyform.bodyId.selectedIndex=document.rdvrselectorform_overlay.rdvrsel.selectedIndex;document.repeatingmodifyform.repeatingbodyId.selectedIndex=document.rdvrselectorform_overlay.rdvrsel.selectedIndex},reset_rightpanel_fields:function(){console.log("RemoteDVRWindow.reset_rightpanel_fields >>>> trying to reset all right side panel fields "+document.modifyform.scheduledRecordingId.value);document.modifyform.scheduledRecordingId.value="";console.log("RemoteDVRWindow.reset_rightpanel_fields >>>> trying to reset all right side panel fields "+document.modifyform.scheduledRecordingId.value);$("recordTitle").value="";$("recordSeriesTitle").value="";$("seriestitle").innerHTML="";$("programtitle").innerHTML="";$("repeatingseriestitle").innerHTML="";$("repeatingRecordingId").value="";$("repeatingwillRecord").value="";$("seriesId").value="";$("sourceId").value=""},triggerBoundingError:function(a,c){var i=parseInt(RemoteDVRWindow.selected_schd_recording.stTime)+parseInt(a*1000);var b=parseInt(RemoteDVRWindow.selected_schd_recording.endTime)+parseInt(c*1000);if(i>=b){var g,h,f;if(a>0){g=parseInt(a)/60;h="lengthen";f="longer"}else{g=Math.abs(parseInt(c))/60;h="shorten";f="shorter"}var e=(g==1)?"minute":"minutes";RTivoDialogWindow.alert("<p>You have requested to "+h+" this recording by "+g+" "+e+", which is "+f+' than the full duration of the program.</p><p>Go back and change the "Start Recording" and "Stop Recording" options.</p>');return true}else{return false}},modifyonetimeform:function(){var a=RemoteDVRWindow.modifyonetimefields.inject({},function(c,b){c[b]=jQuery("#"+b).val();return c});if(this.triggerBoundingError(a.startOffset,a.endOffset)){return false}a.fmt="xml";a.r=RemoteDVRWindow.get_random();console.log("RemoteDVRWindow.modifyonetimeform");new Ajax.Request(onetimeform.action,{method:"post",onSuccess:function(f){jQuery("#modifysubmit").attr("disabled",false);var b=RTivoDataUtil.interpretAjaxResponse(f);var e=jQuery(b).find("error").length>=1;sid=a.scheduledRecordingId;if(e){console.log("RemoteDVRWindow.modifyonetimeform >>>> Error occured when modifying a recording. "+a.saveUntil+"."+a.startOffset+"."+a.endOffset);var c=JQuery(e).find("message")[0].text();if(c&&c!=""){RemoteDVRWindow.display_error_msg(c)}else{RTivoDialogWindow.alert("An error occurred when trying to modify your recording. Please try again.")}RemoteDVRWindow.optionmatch(document.modifyform.saveUntil,saveuntil);RemoteDVRWindow.optionmatch(document.modifyform.startOffset,startoffset);RemoteDVRWindow.optionmatch(document.modifyform.endOffset,endoffset)}else{if(RemoteDVRWindow.isSelectedRecordingWithin90Minutes()){RTivoDialogWindow.alert("Oops! "+RemoteDVRWindow.selected_schd_recording.programTitle+" airs in less than 90 minutes, so it may not be modifed. Please be sure to modify recordings at least 90 minutes in advance.")}else{RTivoDialogWindow.info('<p align="center">SETTINGS SAVED</p>')}RemoteDVRWindow.srreq(sid)}},onFailure:function(b){jQuery("#modifysubmit").attr("disabled",false);form.style.display="none";$("error-text").innerHTML=b.responseText||"unknown error";RTivoDialogWindow.alert("An error occurred when trying to update your changes. Please try again.")},parameters:Ajax.parameters(a)})},modifyrepeatingform:function(b){var f;var c;if(b=="modify"){f="modify";c="/user/authkey/rtivo/modifyRepeatingScheduledRecording/"}else{c="/user/authkey/rtivo/createRepeatingScheduledRecording/"}var e=RemoteDVRWindow.modifyrepeatingfields.inject({},function(h,g){h[g]=jQuery("#"+g).val();return h});var a={};a.vcn=e.repeatingvcn;a.seriesId=e.seriesId;a.sourceId=e.sourceId;a.saveUntil=e.repeatingsaveUntil;a.startOffset=e.repeatingstartOffset;a.endOffset=e.repeatingendOffset;a.bodyId=e.repeatingbodyId;a.repeatingRecordingId=e.repeatingRecordingId;a.willRecord=e.repeatingwillRecord;a.episodeType=e.repeatingepisodeType;a.episodesToKeep=e.repeatingepisodesToKeep;a.fmt="xml";a.r=RemoteDVRWindow.get_random();console.log("RemoteDVRWindow.modifyrepeatingform >>>> request params= "+a);new Ajax.Request(c,{method:"post",onSuccess:function(j){jQuery("#repeatingmodifysubmit").attr("disabled",false);var i=RTivoDataUtil.interpretAjaxResponse(j);var h=jQuery(i).find("error").length>=1;if(h){var g=JQuery(h).find("message")[0].text();console.log("RemoteDVRWindow.modifyrepeatingform >>>> modifyrepeat xml response failure");if(g){RemoteDVRWindow.display_error_msg(h)}else{RTivoDialogWindow.alert("An error occurred when trying to update your changes. Please try again.")}RemoteDVRWindow.optionmatch(document.repeatingmodifyform.repeatingsaveUntil,saveuntil);RemoteDVRWindow.optionmatch(document.repeatingmodifyform.repeatingstartOffset,startoffset);RemoteDVRWindow.optionmatch(document.repeatingmodifyform.repeatingendOffset,endoffset);RemoteDVRWindow.srreq(rid)}else{rid=a.repeatingRecordingId;console.log("RemoteDVRWindow.modifyrepeatingform >>>> successnode= "+rid);if(f=="modify"){RemoteDVRWindow.repreq(rid);RTivoDialogWindow.info('<p align="center">SETTINGS SAVED</p>')}else{RemoteDVRWindow.deleteseries("create");RTivoDialogWindow.info("Season Pass has been moved to a new box");RemoteDVRWindow.repreq(rid)}}},onFailure:function(g){jQuery("#repeatingmodifysubmit").attr("disabled",false);RTivoDialogWindow.alert("An error occurred when trying to update your changes. Please try again.")},parameters:Ajax.parameters(a)})},create_series:function(e,c,g,a,f){urlstring="/user/authkey/rtivo/createRepeatingScheduledRecording/?bodyId="+RemoteDVRWindow.activebodyid+"&vcn="+a+"&programId="+c+"&sourceId="+g+"&fmt=xml";var b=new Ajax.Request(urlstring,{method:"get",onSuccess:function(j){var h=RTivoDataUtil.interpretAjaxResponse(j);var i=jQuery(h).find("repeatingRecordingId").text();RemoteDVRWindow.repreq(i);RTivoDialogWindow.info("<p align='center'>"+f+" scheduled to record</p>");loadScheduledSeries();RemoteDVRWindow.setGridInfoToRecordedSeries()},onFailure:function(h){console.log("RemoteDVRWindow.create_series >>>> onFailure - response: "+h.responseText);RTivoDialogWindow.alert("An error occurred while trying to create your series record. Please try again.")}})},setGridInfoToRecordedSeries:function(){jQuery("#schedulednotice span").html("series");jQuery("#schedulednotice").removeClass().addClass("dbl-tick-bubble").show();jQuery("#recordseries").hide()},repreq:function(a){$("repeatingseriestitle").innerHTML="";$("repeatingRecordingId").value="";jQuery("#season-modifyoptions-panel .lables-col").hide();jQuery("#repeatingmodifyform dl").hide();jQuery("#repeatingmodifysubmit").hide();jQuery("#repeatingmodifyform .static-field").hide();new Ajax.Request("/user/authkey/rtivo/viewRepeatingScheduledRecordings/?bodyId="+RemoteDVRWindow.activebodyid+"&r="+RemoteDVRWindow.get_random(),{method:"get",onSuccess:function(h){var b=$("seriespriority");b.innerHTML=h.responseText;var c=jQuery(b).find("li");if(!c.length){jQuery("#cancelrepeatingseries").css("display","none")}else{var g;if(typeof a!="undefined"){var f=$(a);g=jQuery(f).find("a.seriestitle")[0]}else{g=jQuery("a.seriestitle")[0]}g.onclick();var e=g.parentNode;Element.addClassName(e,"hilite");$("seriespriority").scrollTop=(e.offsetTop-$("seriespriority").offsetTop);jQuery("#cancelrepeatingseries").css("display","block")}},onFailure:function(b){console.log("RemoteDVRWindow.repreq >>>> onFailure response: "+b.responseText)}})},repeating_details:function(h,b,f){$("repeatingseriestitle").innerHTML=h;var a=$(b);var e=jQuery("#seriespriority li");for(var c=0;c<e.length;c++){Element.removeClassName(e[c],"hilite")}Element.addClassName(a.id,"hilite");var g=new Ajax.Request("/user/authkey/rtivo/getRepeatingRecordingDetails/?bodyId="+RemoteDVRWindow.activebodyid+"&repeatingRecordingId="+b+"&fmt=xml&r="+RemoteDVRWindow.get_random(),{method:"get",onSuccess:function(j){var i=RTivoDataUtil.interpretAjaxResponse(j);$("repeatingRecordingId").value=jQuery(i).find("repeatingrecordingid").text();$("seriesId").value=jQuery(i).find("seriesid").text();$("sourceId").value=jQuery(i).find("sourceid").text();$("repeatingvcn").value=jQuery(i).find("basevcn").text();RemoteDVRWindow.optionmatch($("repeatingsaveUntil"),jQuery(i).find("saveuntil").text());RemoteDVRWindow.optionmatch($("repeatingstartOffset"),jQuery(i).find("startoffset").text());RemoteDVRWindow.optionmatch($("repeatingendOffset"),jQuery(i).find("endoffset").text());RemoteDVRWindow.optionmatch($("repeatingepisodeType"),jQuery(i).find("episodetype").text());RemoteDVRWindow.optionmatch($("repeatingepisodesToKeep"),jQuery(i).find("episodestokeep").text());jQuery("#season-modifyoptions-panel .lables-col").show();if(f=="true"){jQuery("#repeatingmodifyform dl").hide();jQuery("#repeatingmodifysubmit").hide();jQuery("#repeatingmodifyform select").each(function(l,k){var m=jQuery(k).find("option:selected").text();jQuery("#repeatingmodifyform #static_"+k.id).html(m)});jQuery("#repeatingmodifyform .static-field").show()}else{jQuery("#repeatingmodifyform dl").show();jQuery("#repeatingmodifysubmit").show();jQuery("#repeatingmodifyform .static-field").hide()}},onFailure:function(i){console.log("RemoteDVRWindow.repeating_details >>>> onFailure response: "+i.responseText)}})},deleteonetime:function(a,c){var b=document.modifyform.scheduledRecordingId.value;console.log("RemoteDVRWindow.deleteonetime >>>> recording id in deleteonetime - id: "+b);if(c!="modify"&&b==""){RTivoDialogWindow.alert("Please select a recording to perform this operation.");return}var f=new Object();f.argNum=3;f.arg0=document.modifyform.recordSeriesTitle.value;f.arg1=document.modifyform.recordTitle.value;f.arg2=RemoteDVRWindow.convertmsToDateTime(document.modifyform.recordStartTime.value);RemoteDVRWindow.rTivoDeleteRecordingObject={_recordingId:b,_caller:c,_infoObj:f};if(a){var e="Are you sure you want to cancel this recording?"+RemoteDVRWindow.confirmation_info_args(f);if(RemoteDVRWindow.isSelectedRecordingWithin90Minutes()){RTivoDialogWindow.alert("Oops! "+RemoteDVRWindow.selected_schd_recording.programTitle+" airs in less than 90 minutes, so it may not be canceled. Please be sure to cancel recordings at least 90 minutes in advance.")}RTivoDialogWindow.confirm(e,"RemoteDVRWindow.onDeleteOneTimeRecordingConfirm()","RTivoDialogWindow.hideDialog()","yes","no")}else{RemoteDVRWindow.onDeleteOneTimeRecordingConfirm()}},onDeleteOneTimeRecordingConfirm:function(){if(RTivoDialogWindow.activeDialogWindow){RTivoDialogWindow.hideDialog()}if(!RemoteDVRWindow.rTivoDeleteRecordingObject||!RemoteDVRWindow.rTivoDeleteRecordingObject._recordingId){return}var recordingId=RemoteDVRWindow.rTivoDeleteRecordingObject._recordingId;var deletereq=new Ajax.Request("/user/authkey/rtivo/modifyScheduledRecording/?bodyId="+RemoteDVRWindow.activebodyid+"&scheduledRecordingId="+recordingId+"&willRecord=false&fmt=xml",{method:"get",onSuccess:function(xhr){var response=RTivoDataUtil.interpretAjaxResponse(xhr);var error=jQuery(response).find("error").text();if(error&&error!=""){var errorMessage=jQuery(error).find("message").text();if(errorMessage){RemoteDVRWindow.display_error_msg(errorMessage)}else{RTivoDialogWindow.alert("An error occurred while attempting to cancel the recording. Please try again.")}RemoteDVRWindow.optionmatch(document.modifyform.saveuntil,saveuntil);RemoteDVRWindow.optionmatch(document.modifyform.startoffset,startoffset);RemoteDVRWindow.optionmatch(document.modifyform.endoffset,endoffset)}else{if(RemoteDVRWindow.rTivoDeleteRecordingObject._caller!="modify"){var content="RECORDING CANCELED"+RemoteDVRWindow.confirmation_info_args(RemoteDVRWindow.rTivoDeleteRecordingObject._infoObj);RTivoDialogWindow.info(content)}document.modifyform.scheduledRecordingId.value="";$("getseasonpass").onClick=function(){};$("ssprograminfo-panel").innerHTML="";jQuery("#seriestitle").html("");jQuery("#programtitle").html("");RemoteDVRWindow.srreq();var xmltolook;var actId=RemoteDVRWindow.activebodyid.replace(/:/g,"_").replace(/\./g,"_");eval(" xmltolook = schdRecordXMLs."+actId);jQuery(xmltolook).find("recordingId").each(function(){var rcdId=this;if(recordingId==rcdId.textContent){parentRcdId=rcdId.parentNode;jQuery(parentRcdId).remove()}})}},onFailure:function(xhr){console.log("RemoteDVRWindow.deleteonetime >>>> onFailure: "+xhr.responseText);form.style.display="none";RTivoDialogWindow.alert("An error occurred while attempting to cancel the recording. Please try again.")}})},dvrmgrsaveoption:function(){var e="{";var h=document.dvrmgrform.isdefault;var c,b="";for(var g=0;g<h.length;g++){var f=$("name"+h[g].id).value;if(f==""){RTivoDialogWindow.alert("Please enter a valid name for your Tivo device");return}if(h[g].checked){c=h[g].value;b=f+"_default";e=e+'"'+c+'":"'+b+'",';console.log("RemoteDVRWindow.dvrmgrsaveoption >>>> default tivo id: "+c+" --- tivo name: "+b)}else{id=h[g].value;name=f;e=e+'"'+id+'":"'+name+'",';console.log("RemoteDVRWindow.dvrmgrsaveoption >>>> tivo id: "+id+" --- tivo name: "+name)}}e=e.substring(0,e.length-1)+"}";console.log(e);var a=new Ajax.Request("/user/authkey/rtivo/dvrManagerUpdate/?json="+e+"&fmt=xml",{method:"post",onSuccess:function(i){RTivoDialogWindow.info('<p align="center">SETTINGS SAVED</p>');console.log("RemoteDVRWindow.dvrmgrsaveoption >>>> onSuccess response: "+i.responseText);RTivoAuthUtil.doTivoAuth(RemoteDVRWindow.onDeviceListRefresh)},onFailure:function(i){console.log("RemoteDVRWindow.dvrmgrsaveoption >>>> onFailure response: "+i.responseText);RTivoDialogWindow.alert("An error occurred when trying to save your changes. Please try again.")}});RemoteDVRWindow.set_reload_tab()},onDeviceListRefresh:function(){RTivoViewUtil.populateTVGridTivoSelector();RemoteDVRWindow.load_dvrselector(true)},deleteseries:function(a){var c=jQuery("#repeatingseriestitle").text();var e=jQuery("#repeatingRecordingId")[0].value;if(!e){RTivoDialogWindow.alert("Please select a series to cancel.");return}if(typeof a=="undefined"){var b="Are you sure you want to cancel this Season Pass?<div class='recording'>"+c+"</div>";RTivoDialogWindow.confirm(b,"RemoteDVRWindow.doDeleteSeries()","RTivoDialogWindow.hideDialog()","yes","no")}else{RemoteDVRWindow.doDeleteSeries(a)}},doDeleteSeries:function(b){if(RTivoDialogWindow.activeDialogWindow){RTivoDialogWindow.hideDialog()}jQuery("#cancelrepeatingseries").attr("disabled",true);var a=jQuery("#repeatingRecordingId")[0].value;new Ajax.Request("/user/authkey/rtivo/modifyRepeatingScheduledRecording/?bodyId="+RemoteDVRWindow.activebodyid+"&repeatingRecordingId="+a+"&willRecord=false&fmt=xml",{method:"post",onSuccess:function(g){jQuery("#cancelrepeatingseries").attr("disabled",false);var c=RTivoDataUtil.interpretAjaxResponse(g);var f=jQuery(c).find("error").text();if(f&&f!=""){var e=jQuery(f).find("message").text();if(e){RemoteDVRWindow.display_error_msg(e)}else{RTivoDialogWindow.alert("An error occurred while attempting to cancel the recording. Please try again.")}}else{if(typeof b=="undefined"){loadScheduledSeries();RTivoDialogWindow.info("<p align='center'>Series Cancelled</p>")}RemoteDVRWindow.set_reload_tab("todo");RemoteDVRWindow.repreq()}},onFailure:function(c){jQuery("#cancelrepeatingseries").attr("disabled",false);console.log("RemoteDVRWindow.deleteseries >>>> onFailure: "+c.responseText);RTivoDialogWindow.alert("An error occurred when cancelling series. Please try again.")}})},load_overlay:function(){if(is_ie){$("rdvrselectorform").style.display="none"}var c=new Ajax.Request("/overlays/remoteapp/",{method:"get",asynchronous:false});if(c.responseIsFailure()){console.log("RemoteDVRWindow.load_overlay >>>> overlay request failed");return false}var e=document.createElement("div");e.innerHTML=c.transport.responseText;document.body.appendChild(e);var b=e.getElementsByTagName("a");for(var a=0;a<b.length;a++){assign_handlers(b[a])}var f=$("remotedvr");Widgets.build(f);$("seriespriority").onmouseover=function(g){jQuery("#seriespriority").find(".hilite").removeClass("hilite")};$("dvrsaveoption").onclick=function(g){RemoteDVRWindow.dvrmgrsaveoption()};onetimeform=$("modifyform");onetimeform.onsubmit=function(){return false};modifysubmitbutton=$("modifysubmit");modifysubmitbutton.onclick=function(g){jQuery("#modifysubmit").attr("disabled",true);if(document.modifyform.bodyId.options[document.modifyform.bodyId.selectedIndex].value==document.rdvrselectorform_overlay.rdvrsel.options[document.rdvrselectorform_overlay.rdvrsel.selectedIndex].value){RemoteDVRWindow.modifyonetimeform()}else{console.log("modifysubmitbutton.onclick: user has selected a different box");form_bodyId=document.modifyform.bodyId.options[document.modifyform.bodyId.selectedIndex].value;form_startOffset=document.modifyform.startOffset.options[document.modifyform.startOffset.selectedIndex].value;form_endOffset=document.modifyform.endOffset.options[document.modifyform.endOffset.selectedIndex].value;form_saveUntil=document.modifyform.saveUntil.options[document.modifyform.saveUntil.selectedIndex].value;console.log("modifysubmitbutton.onclick >>>> form_bodyId "+form_bodyId+" form_startOffset  "+form_startOffset+" form_endOffset  "+form_endOffset+"  form_saveUntil  "+form_saveUntil);RemoteDVRWindow.create_recording(form_bodyId,RemoteDVRWindow.selected_schd_recording.stTime,RemoteDVRWindow.selected_schd_recording.endTime,RemoteDVRWindow.selected_schd_recording.progId,RemoteDVRWindow.selected_schd_recording.sourceId,RemoteDVRWindow.selected_schd_recording.vcn,RemoteDVRWindow.selected_schd_recording.seriesTitle,RemoteDVRWindow.selected_schd_recording.progamTitle,form_startOffset,form_endOffset,form_saveUntil,"modify")}return cancelEvent(g)};repeatingform=$("repeatingmodifyform");repeatingform.onsubmit=function(){return false};repeatingmodifysubmitbutton=$("repeatingmodifysubmit");repeatingmodifysubmitbutton.onclick=function(g){jQuery("#repeatingmodifysubmit").attr("disabled",true);if($("repeatingmodifyform").repeatingbodyId.selectedIndex==document.rdvrselectorform_overlay.rdvrsel.selectedIndex){RemoteDVRWindow.modifyrepeatingform("modify")}else{console.log("repeatingmodifysubmitbutton.onclick >>>> NOT equals");RemoteDVRWindow.modifyrepeatingform("create")}return cancelEvent(g)};return true},modifyonetimefields:["saveUntil","startOffset","endOffset","bodyId","scheduledRecordingId","willRecord"],modifyrepeatingfields:["repeatingvcn","seriesId","sourceId","repeatingsaveUntil","repeatingstartOffset","repeatingendOffset","repeatingbodyId","repeatingRecordingId","repeatingwillRecord","repeatingepisodeType","repeatingepisodesToKeep"]};var RTivoDialogWindow={queue:[],activeDialogWindow:null,infoHideTimer:null,infoHideTimerDuration:3000,confirm:function(c,f,e,b,a){c+="<div id='dialog-confirm-buttons'><div id='"+b+"' class='confirm' onClick='"+f+"'></div><div id='"+a+"' class='cancel' onClick='"+e+"'></div></div>";this.openDialog(c,false)},alert:function(a){a+="<div id='dialog-alert-ok' onClick='RTivoDialogWindow.hideDialog()'></div>";this.openDialog(a,false)},info:function(a){this.openDialog(a,true)},openDialog:function(a,b){if(this.activeDialogWindow){this.queue.push({dialogContent:a,doTimer:b})}else{if(this.infoHideTimer){clearTimeout(this.infoHideTimer)}this.activeDialogWindow=new Window("dialog-modal");this.activeDialogWindow.show();jQuery("#dialog-content").css("display","block");jQuery("#dialog-content-inner").css("display","block").html(a);if(b){this.infoHideTimer=setTimeout("RTivoDialogWindow.hideDialog()",this.infoHideTimerDuration)}}},hideDialog:function(){this.activeDialogWindow.hide();this.activeDialogWindow=null;if(this.infoHideTimer){clearTimeout(this.infoHideTimer)}jQuery("#dialog-content").css("display","none");jQuery("#dialog-content-inner").css("display","none").html("");if(this.queue.length>0){var a=this.queue[0];this.openDialog(a.dialogContent,a.doTimer);this.queue.pop()}},reset:function(){if(this.activeDialogWindow){this.hideDialog()}this.queue=[];if(this.infoHideTimer){this.infoHideTimer=null}}};
// /modules/articles/article_recommend.js from ui
CommunityManager.prototype.getRating=function(b,a,c,e){var d;if(b.indexOf(",")==-1){d={byAboutID:b,fields:"aboutID"}}else{d="fields=aboutID&version=1.0&account="+encodeURIComponent(this.accountURI)+"&type=json&"+this.__getMultiAboutIDQuery(b)}this._makeJsonServiceCall(d,c+tpRatingMetadataServicePath,a,null,function(f){e(f,b)})};CommunityManager.prototype.getTotalRating=function(b,a,c,e){var d;if(b.indexOf(",")==-1){d={byAboutID:b,fields:"count,aboutID"}}else{d="fields=aboutID,count&version=1.0&account="+encodeURIComponent(this.accountURI)+"&type=json&"+this.__getMultiAboutIDQuery(b)}this._makeJsonServiceCall(d,c+tpTotalRatingMetadataServicePath,a,null,function(f){e(f,b)})};CommunityManager.prototype.__getMultiAboutIDQuery=function(d){var b=d.split(",");var c="";for(var a=0;a<b.length;a++){c+="byAboutID="+encodeURIComponent(b[a]);if(a+1!=b.length){c+="&"}}return c};ArticleRecommend=function(){this._initialize.apply(this,arguments)};ArticleRecommend.prototype={_initialize:function(b){this.myRatingLoading=false;this.totalRatingLoading=false;this.cmInstance=b.cmInstance;var d=j$(b.recommendSelector);var g=[];for(var a=0;a<d.length;a++){this._widgets.push(new this._recommendWidget(d.eq(a),this));g.push(d[a].getAttribute("rel"))}var h=this;var f=function(k){var i=k.join(",");h.cmInstance.getRating(k,"1.0",tpRatingDataServicePrefix,h._getRatingAfter.bindTo(h));h.cmInstance.getTotalRating(k,"1.0",tpTotalRatingDataServicePrefix,h._getTotalRatingAfter.bindTo(h))};var j=5;var e=[];for(var c=0;c<g.length;c++){if(c%j===0&&e.length>0){f(e);e=[]}e.push(g[c])}if(e.length>0){f(e)}},_widgets:[],_getRatingAfter:function(b,e){var c,a,d;for(c=0;c<e.length;c++){d=this._findWidgetsByAboutID(e[c]);for(a=0;a<d.length;a++){d[a]._loader.hide();d[a]._getRatingAfter()}}if(typeof b.items!="undefined"){for(c=0;c<b.items.length;c++){d=this._findWidgetsByAboutID(b.items[c].aboutID);for(a=0;a<d.length;a++){d[a]._getRatingAfter(b.items[c])}}}},_getTotalRatingAfter:function(b,e){var c,a,d;for(c=0;c<e.length;c++){d=this._findWidgetsByAboutID(e[c]);for(a=0;a<d.length;a++){d[a]._getTotalRatingAfter()}}if(typeof b.items!="undefined"){for(c=0;c<b.items.length;c++){d=this._findWidgetsByAboutID(b.items[c].aboutID);for(a=0;a<d.length;a++){d[a]._getTotalRatingAfter(b.items[c])}}}},_findWidgetsByAboutID:function(c){var b=[];for(var a=0;a<this._widgets.length;a++){if(this._widgets[a].objectURI==c){b.push(this._widgets[a])}}return b},_addToDataQueue:function(){}};ArticleRecommend.prototype._recommendWidget=function(){this._initialize.apply(this,arguments)};ArticleRecommend.prototype._recommendWidget.prototype={_initialize:function(c,b){this._widgetElement=c;this._isLink=!this._widgetElement.hasClass("non-link");var a=this._isLink?"a":"span";this._ratingData=j$(DomFragment("span",{className:"recommend_data",style:{display:"none"},toAppend:[DomFragment("b",{className:"pre-recommend",toAppend:[document.createTextNode("Must Read?")]}),DomFragment("b",{className:"post-recommend",toAppend:[document.createTextNode("Thank You")]}),DomFragment(a,{className:"recommend",toAppend:[DomFragment("span",{toAppend:[document.createTextNode("Yes")]}),DomFragment("b"),DomFragment("strong")]})]}));this._ratingData.find(".recommend b").html("<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>");this._loader=jQuery(".cm_recommend_loading",this._widgetElement);this._firstLoaded=false;this._recommendCount=0;DomFragment(this._widgetElement[0],{toAppend:[this._ratingData[0]]});this.objectURI=c.attr("rel");this.$super=b},_getRatingAfter:function(a){if(this._isLink){this._ratingData.bind("click",this,this._recommend)}if(typeof a!="undefined"){this._deactivateLink()}else{this._activateLink()}this._registerLoad("rating",a)},_getTotalRatingAfter:function(a){if(typeof a!="undefined"){this._recommendCount=Number(a.totalRating.count);this._setCountText(a.totalRating.count);this._registerLoad("totalRating",a)}else{this._recommendCount=0;this._setCountText(0);this._registerLoad("totalRating")}},_registerLoad:function(b,a){if(this._firstLoaded===true){this._loader.hide();this._ratingData.show()}else{this._firstLoaded=true}},_activateLink:function(){if(this._isLink){var a=this._ratingData.find("a");a.attr({href:"#",title:"Click here to recommend this content."})}this._ratingData.removeClass("user_recommends")},_deactivateLink:function(){if(this._isLink){var a=this._ratingData.find("a");a.attr({href:"",title:"You have recommended this content."})}this._ratingData.addClass("user_recommends")},_recommend:function(b){b.preventDefault();var c=b.data;if(!c._ratingData.hasClass("user_recommends")){c.$super.cmInstance.addRating(c.objectURI,1,"1.0",tpRatingDataServicePrefix,c._recommendError.bindTo(this));var d=c.$super._findWidgetsByAboutID(c.objectURI);var e=c._recommendCount+1;for(var a=0;a<d.length;a++){d[a]._setWidgetDisplay(e)}c._openShare()}},_setWidgetDisplay:function(a){this._setCount(a);this._deactivateLink()},_setCount:function(a){this._recommendCount=Number(a);this._setCountText(a)},_setCountText:function(b){var a=this._ratingData.find("strong");a.text(b)},_recommendError:function(a){},_openShare:function(){this._widgetElement.find(".recommend-share").addClass("poppedShare")}};jQuery(document).ready(function(){ComcastRecommend=new ArticleRecommend({recommendSelector:".community_recommend",cmInstance:tpCommunityManager})});
// /modules/games.js from ui
function setupGamesModule(){var b=new TabBar("games");var a=0;for(var c=0;tab=b.tab(c);c++){if(Element.hasClassName(tab,"default")){a=c}}b.onchange=function(i){var h=this.tab(i),f=this.panel(i);if(!h||!f){return false}var g=f.getElementsByTagName("div");var e=g.length>0?g[0].className:"success";if(e!="loading"){return true}var d=decodeURI(h.getElementsByTagName("a")[0].href.split("#")[1]);new Ajax.Request("./games/"+d+"/",{method:"get",onSuccess:function(j){f.innerHTML=j.responseText}});return true};b._tracking=false;b.update(a);b._tracking=true};
// /component/pushdown.js from layout
if(typeof PDS==="undefined"||!PDS){var PDS={}}PDS.pushdown=PDS.pushdown||{};PDS.pushdown=(function(b){var a={root:b(".component.promopushdown")},c={init:function(d){if(document.config){b.extend(a,{olympicsPromosEnabled:(document.config.olympicsPromosEnabled==="true"||document.config.olympicsPromosEnabled===true)?true:false,pushdownEnabled:(document.config.pushdownEnabled==="true"||document.config.pushdownEnabled===true)?true:false,pushdownHomepageEnabled:(document.config.pushdownHomepageEnabled==="true"||document.config.pushdownHomepageEnabled===true)?true:false,pushdownHomepageRedisplayCount:document.config.pushdownHomepageRedisplayCount,pushdownOlympicsEnabled:(document.config.pushdownOlympicsEnabled==="true"||document.config.pushdownOlympicsEnabled===true)?true:false,pushdownOlympicsRedisplayCount:document.config.pushdownOlympicsRedisplayCount});if(!a.pushdownEnabled){return}}else{return}b.extend(a,d);var e=PDS.pushdown.showPromoType();PDS.pushdown.showPromo(e)},showPromoType:function(f){a=f||a;var h=[],j=CIM.page.getParams(),e=j.cid||0,i=PDS.pushdown.pushdown_check_cid_hp_exists(),d=PDS.pushdown.getPushdownCount("pushdown_homepage_counter"),g=PDS.pushdown.getPushdownCount("pushdown_promo_counter");if(typeof e!="undefined"&&e!==0){h.push({type:"cid",value:e})}h.push({type:"device",value:"iPad"});if(!i){if(d+1>=a.pushdownHomepageRedisplayCount){h.push({type:"homepage",value:null});d=0}else{d+=1}}else{d=0}if(g+1>=a.pushdownOlympicsRedisplayCount){h.push({type:"promo",value:"olympics"});g=0}else{g+=1}PDS.pushdown.setPushdownCount("pushdown_homepage_counter",d);PDS.pushdown.setPushdownCount("pushdown_promo_counter",g);return h},showPromo:function(u,t){root=t||a.root;var j=root.find("p[data-message]"),q=PDS.pushdown.getPlatforms(),s,w,n,k,v,f,d,h;for(var g=0;g<j.length;g++){d=false;w=b(j[g]).attr("data-message");n=b(j[g]).attr("data-type");k=parseInt(b(j[g]).attr("data-priority"),10);for(var e=0;e<u.length;e++){v=u[e].type;f=u[e].value;if(n==v){d=true;if(n=="device"){d=false;for(var i=0;i<q.length;i++){if(q[i].match(f)){d=true}}}if(n=="homepage"){d=false;h=w.split(" ");for(var o=0;o<h.length;o++){for(var r=0;r<q.length;r++){if(q[r].match(h[o])){d=true}}}}if(n=="cid"){d=false;if(w==f){d=true}}if((n=="promo")&&(f=="olympics")&&!(a.olympicsPromosEnabled&&a.pushdownOlympicsEnabled)){d=false}if((n=="homepage")&&(!a.pushdownHomepageEnabled)){d=false}if(d){if((typeof s==="undefined")||(k>parseInt(b(s).attr("data-priority"),10))){s=b(j[g])}}}}}PDS.pushdown.displayPromo(b(s).attr("data-message"))},getPlatforms:function(){var d=function(){if(CIM.browser.isAndroid()){return"Android"}else{if(CIM.browser.isBlackBerry()){return"Blackberry"}else{if(CIM.browser.isIPad()){return"iPad"}else{if(CIM.browser.isIPhone()){return"iPhone"}else{if(CIM.browser.isIPod()){return"iPod"}else{if(CIM.browser.isMac()){return"Mac"}else{if(CIM.browser.isWindows()){return"Windows"}else{if(CIM.browser.isWebOs()){return"WebOs"}else{return"Unknown"}}}}}}}}},e=function(){if(CIM.browser.isBolt()){return"Bolt"}else{if(CIM.browser.isChrome()){return"Chrome"}else{if(CIM.browser.isFirefox()){return"Firefox"}else{if(CIM.browser.isIEMobile()){return"IE Mobile"}else{if(CIM.browser.isOpera()){return"Opera"}else{if(CIM.browser.isSafari()){return"Safari"}else{if(CIM.browser.isSafariMobile()){return"Safari Mobile"}else{if(CIM.browser.isIE()){return"IE"}else{return"Unknown"}}}}}}}}};return[d(),e()]},getPushdownCount:function(d){var e=CIM.storage.local.get(d);if(!e){e=0}return parseInt(e,10)},setPushdownCount:function(d,e){CIM.storage.local.set(d,e)},displayPromo:function(d){var e=b(a.root).find('p[data-message="'+d+'"]');if(typeof e!=="undefined"){a.root.slideDown();b(e).show();PDS.pushdown.hidePromo()}},displayPromoMessage:function(d,e){a.root.slideDown().find('p[data-message="'+d+'"]').show()},hidePromo:function(d){a.root.find(".close").click(function(){a.root.slideUp();return false})},pushdown_check_cid_hp_exists:function(d){var f=document.location.search,e=/\bcid=(mmhpset|(tbid|insdate|mtmh|dd_mtmh)?(\d{6}|\d{8}))\b/;return e.test(f)}};return c})(jQuery);(function(a){a(document).ready(function(){PDS.pushdown.init()})})(jQuery);
// /setup/page.js from cimspire
if(typeof require==="function"){define("jquery",function(){return jQuery});require(["jquery","cimspire/components/xpbar/xpbar_3"],function(B,A){B(document).ready(function(){var C=new A();C.setElement(".xpbar_3");CIM.user.get(["isLoggedIn","comcastUser","email"],function(D){if(D.isLoggedIn&&D.comcastUser){C.updateProgressDisplay()}C.setLoggedIn(D.isLoggedIn);C.setEmail(D.email)})})})};