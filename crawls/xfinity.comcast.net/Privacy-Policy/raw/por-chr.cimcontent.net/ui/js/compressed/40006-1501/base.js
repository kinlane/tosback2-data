/* DO NOT EDIT THIS FILE!
		The contents of this file are dynamically generated. In order to make changes, update the
		respective source files.*/

// /lib/adlib.js from ui
function cc(C,D,E){var A="",B;if(E){if(typeof E=="object"){B=E}else{B=new Date();B.setTime(B.getTime()+E*86400000)}A="; expires="+B.toGMTString()}document.cookie=C+"="+D+A+"; path=/;"}function rc(C){var F=C+"=",B=document.cookie.split(";"),E=/\s*(.*)/,D,G,A;for(D=0,A=B.length;D<A;D++){G=B[D].match(E)[1];if(G.indexOf(F)==0){return G.substring(F.length,G.length)}}return null}function ec(A){cc(A,"",-1)}function ntce(A){return(A==null||A.length==0)}function pec(C){var A=unescape(C).split("&"),E="",B,D;for(B=0;B<A.length;B++){if(A[B]!=null&&A[B].length>0){D=A[B].split("=");if(D.length==2){if(B==0){E=E+D[0]+"="+unescape(D[1])}else{E=E+","+D[0]+"="+unescape(D[1])}}}}return E}function gau(E,F,B,A,D){var C=E+B+D+A+"?_OAS_GEO_OVERRIDE_="+f_ADTARGET_ZIP;if(F!=null){C=C+"&"+String(F)}return C}function ntfe(A,B){return(A!=null&&A.length>0&&(B==null||B.length==0))}function fe(A){document.write(['<script type="text/javascript" src="',A,'"></',"script>"].join(""))};
// /lib/jquery.js from ui
(function(){if(window.jQuery){var _jQuery=window.jQuery}var jQuery=window.jQuery=function(selector,context){return new jQuery.prototype.init(selector,context)};if(window.$){var _$=window.$}window.$=jQuery;var quickExpr=/^[^<]*(<(.|\s)+>)[^>]*$|^#(\w+)$/;var isSimple=/^.[^:#\[\.]*$/;jQuery.fn=jQuery.prototype={init:function(selector,context){selector=selector||document;if(selector.nodeType){this[0]=selector;this.length=1;return this}else{if(typeof selector=="string"){var match=quickExpr.exec(selector);if(match&&(match[1]||!context)){if(match[1]){selector=jQuery.clean([match[1]],context)}else{var elem=document.getElementById(match[3]);if(elem){if(elem.id!=match[3]){return jQuery().find(selector)}else{this[0]=elem;this.length=1;return this}}else{selector=[]}}}else{return new jQuery(context).find(selector)}}else{if(jQuery.isFunction(selector)){return new jQuery(document)[jQuery.fn.ready?"ready":"load"](selector)}}}return this.setArray(selector.constructor==Array&&selector||(selector.jquery||selector.length&&selector!=window&&!selector.nodeType&&selector[0]!=undefined&&selector[0].nodeType)&&jQuery.makeArray(selector)||[selector])},jquery:"1.2.3",size:function(){return this.length},length:0,get:function(num){return num==undefined?jQuery.makeArray(this):this[num]},pushStack:function(elems){var ret=jQuery(elems);ret.prevObject=this;return ret},setArray:function(elems){this.length=0;Array.prototype.push.apply(this,elems);return this},each:function(callback,args){return jQuery.each(this,callback,args)},index:function(elem){var ret=-1;this.each(function(i){if(this==elem){ret=i}});return ret},attr:function(name,value,type){var options=name;if(name.constructor==String){if(value==undefined){return this.length&&jQuery[type||"attr"](this[0],name)||undefined}else{options={};options[name]=value}}return this.each(function(i){for(name in options){jQuery.attr(type?this.style:this,name,jQuery.prop(this,options[name],type,i,name))}})},css:function(key,value){if((key=="width"||key=="height")&&parseFloat(value)<0){value=undefined}return this.attr(key,value,"curCSS")},text:function(text){if(typeof text!="object"&&text!=null){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(text))}var ret="";jQuery.each(text||this,function(){jQuery.each(this.childNodes,function(){if(this.nodeType!=8){ret+=this.nodeType!=1?this.nodeValue:jQuery.fn.text([this])}})});return ret},wrapAll:function(html){if(this[0]){jQuery(html,this[0].ownerDocument).clone().insertBefore(this[0]).map(function(){var elem=this;while(elem.firstChild){elem=elem.firstChild}return elem}).append(this)}return this},wrapInner:function(html){return this.each(function(){jQuery(this).contents().wrapAll(html)})},wrap:function(html){return this.each(function(){jQuery(this).wrapAll(html)})},append:function(){return this.domManip(arguments,true,false,function(elem){if(this.nodeType==1){this.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,true,true,function(elem){if(this.nodeType==1){this.insertBefore(elem,this.firstChild)}})},before:function(){return this.domManip(arguments,false,false,function(elem){this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,false,true,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)})},end:function(){return this.prevObject||jQuery([])},find:function(selector){var elems=jQuery.map(this,function(elem){return jQuery.find(selector,elem)});return this.pushStack(/[^+>] [^+>]/.test(selector)||selector.indexOf("..")>-1?jQuery.unique(elems):elems)},clone:function(events){var ret=this.map(function(){if(jQuery.browser.msie&&!jQuery.isXMLDoc(this)){var clone=this.cloneNode(true),container=document.createElement("div");container.appendChild(clone);return jQuery.clean([container.innerHTML])[0]}else{return this.cloneNode(true)}});var clone=ret.find("*").andSelf().each(function(){if(this[expando]!=undefined){this[expando]=null}});if(events===true){this.find("*").andSelf().each(function(i){if(this.nodeType==3){return }var events=jQuery.data(this,"events");for(var type in events){for(var handler in events[type]){jQuery.event.add(clone[i],type,events[type][handler],events[type][handler].data)}}})}return ret},filter:function(selector){return this.pushStack(jQuery.isFunction(selector)&&jQuery.grep(this,function(elem,i){return selector.call(elem,i)})||jQuery.multiFilter(selector,this))},not:function(selector){if(selector.constructor==String){if(isSimple.test(selector)){return this.pushStack(jQuery.multiFilter(selector,this,true))}else{selector=jQuery.multiFilter(selector,this)}}var isArrayLike=selector.length&&selector[selector.length-1]!==undefined&&!selector.nodeType;return this.filter(function(){return isArrayLike?jQuery.inArray(this,selector)<0:this!=selector})},add:function(selector){return !selector?this:this.pushStack(jQuery.merge(this.get(),selector.constructor==String?jQuery(selector).get():selector.length!=undefined&&(!selector.nodeName||jQuery.nodeName(selector,"form"))?selector:[selector]))},is:function(selector){return selector?jQuery.multiFilter(selector,this).length>0:false},hasClass:function(selector){return this.is("."+selector)},val:function(value){if(value==undefined){if(this.length){var elem=this[0];if(jQuery.nodeName(elem,"select")){var index=elem.selectedIndex,values=[],options=elem.options,one=elem.type=="select-one";if(index<0){return null}for(var i=one?index:0,max=one?index+1:options.length;i<max;i++){var option=options[i];if(option.selected){value=jQuery.browser.msie&&!option.attributes.value.specified?option.text:option.value;if(one){return value}values.push(value)}}return values}else{return(this[0].value||"").replace(/\r/g,"")}}return undefined}return this.each(function(){if(this.nodeType!=1){return }if(value.constructor==Array&&/radio|checkbox/.test(this.type)){this.checked=(jQuery.inArray(this.value,value)>=0||jQuery.inArray(this.name,value)>=0)}else{if(jQuery.nodeName(this,"select")){var values=value.constructor==Array?value:[value];jQuery("option",this).each(function(){this.selected=(jQuery.inArray(this.value,values)>=0||jQuery.inArray(this.text,values)>=0)});if(!values.length){this.selectedIndex=-1}}else{this.value=value}}})},html:function(value){return value==undefined?(this.length?this[0].innerHTML:null):this.empty().append(value)},replaceWith:function(value){return this.after(value).remove()},eq:function(i){return this.slice(i,i+1)},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},andSelf:function(){return this.add(this.prevObject)},data:function(key,value){var parts=key.split(".");parts[1]=parts[1]?"."+parts[1]:"";if(value==null){var data=this.triggerHandler("getData"+parts[1]+"!",[parts[0]]);if(data==undefined&&this.length){data=jQuery.data(this[0],key)}return data==null&&parts[1]?this.data(parts[0]):data}else{return this.trigger("setData"+parts[1]+"!",[parts[0],value]).each(function(){jQuery.data(this,key,value)})}},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})},domManip:function(args,table,reverse,callback){var clone=this.length>1,elems;return this.each(function(){if(!elems){elems=jQuery.clean(args,this.ownerDocument);if(reverse){elems.reverse()}}var obj=this;if(table&&jQuery.nodeName(this,"table")&&jQuery.nodeName(elems[0],"tr")){obj=this.getElementsByTagName("tbody")[0]||this.appendChild(this.ownerDocument.createElement("tbody"))}var scripts=jQuery([]);jQuery.each(elems,function(){var elem=clone?jQuery(this).clone(true)[0]:this;if(jQuery.nodeName(elem,"script")){scripts=scripts.add(elem)}else{if(elem.nodeType==1){scripts=scripts.add(jQuery("script",elem).remove())}callback.call(obj,elem)}});scripts.each(evalScript)})}};jQuery.prototype.init.prototype=jQuery.prototype;function evalScript(i,elem){if(elem.src){jQuery.ajax({url:elem.src,async:false,dataType:"script"})}else{jQuery.globalEval(elem.text||elem.textContent||elem.innerHTML||"")}if(elem.parentNode){elem.parentNode.removeChild(elem)}}jQuery.extend=jQuery.fn.extend=function(){var target=arguments[0]||{},i=1,length=arguments.length,deep=false,options;if(target.constructor==Boolean){deep=target;target=arguments[1]||{};i=2}if(typeof target!="object"&&typeof target!="function"){target={}}if(length==1){target=this;i=0}for(;i<length;i++){if((options=arguments[i])!=null){for(var name in options){if(target===options[name]){continue}if(deep&&options[name]&&typeof options[name]=="object"&&target[name]&&!options[name].nodeType){target[name]=jQuery.extend(target[name],options[name])}else{if(options[name]!=undefined){target[name]=options[name]}}}}}return target};var expando="jQuery"+(new Date()).getTime(),uuid=0,windowData={};var exclude=/z-?index|font-?weight|opacity|zoom|line-?height/i;jQuery.extend({noConflict:function(deep){window.$=_$;if(deep){window.jQuery=_jQuery}return jQuery},isFunction:function(fn){return !!fn&&typeof fn!="string"&&!fn.nodeName&&fn.constructor!=Array&&/function/i.test(fn+"")},isXMLDoc:function(elem){return elem.documentElement&&!elem.body||elem.tagName&&elem.ownerDocument&&!elem.ownerDocument.body},globalEval:function(data){data=jQuery.trim(data);if(data){var head=document.getElementsByTagName("head")[0]||document.documentElement,script=document.createElement("script");script.type="text/javascript";if(jQuery.browser.msie){script.text=data}else{script.appendChild(document.createTextNode(data))}head.appendChild(script);head.removeChild(script)}},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()==name.toUpperCase()},cache:{},data:function(elem,name,data){elem=elem==window?windowData:elem;var id=elem[expando];if(!id){id=elem[expando]=++uuid}if(name&&!jQuery.cache[id]){jQuery.cache[id]={}}if(data!=undefined){jQuery.cache[id][name]=data}return name?jQuery.cache[id][name]:id},removeData:function(elem,name){elem=elem==window?windowData:elem;var id=elem[expando];if(name){if(jQuery.cache[id]){delete jQuery.cache[id][name];name="";for(name in jQuery.cache[id]){break}if(!name){jQuery.removeData(elem)}}}else{try{delete elem[expando]}catch(e){if(elem.removeAttribute){elem.removeAttribute(expando)}}delete jQuery.cache[id]}},each:function(object,callback,args){if(args){if(object.length==undefined){for(var name in object){if(callback.apply(object[name],args)===false){break}}}else{for(var i=0,length=object.length;i<length;i++){if(callback.apply(object[i],args)===false){break}}}}else{if(object.length==undefined){for(var name in object){if(callback.call(object[name],name,object[name])===false){break}}}else{for(var i=0,length=object.length,value=object[0];i<length&&callback.call(value,i,value)!==false;value=object[++i]){}}}return object},prop:function(elem,value,type,i,name){if(jQuery.isFunction(value)){value=value.call(elem,i)}return value&&value.constructor==Number&&type=="curCSS"&&!exclude.test(name)?value+"px":value},className:{add:function(elem,classNames){jQuery.each((classNames||"").split(/\s+/),function(i,className){if(elem.nodeType==1&&!jQuery.className.has(elem.className,className)){elem.className+=(elem.className?" ":"")+className}})},remove:function(elem,classNames){if(elem.nodeType==1){elem.className=classNames!=undefined?jQuery.grep(elem.className.split(/\s+/),function(className){return !jQuery.className.has(classNames,className)}).join(" "):""}},has:function(elem,className){return jQuery.inArray(className,(elem.className||elem).toString().split(/\s+/))>-1}},swap:function(elem,options,callback){var old={};for(var name in options){old[name]=elem.style[name];elem.style[name]=options[name]}callback.call(elem);for(var name in options){elem.style[name]=old[name]}},css:function(elem,name,force){if(name=="width"||name=="height"){var val,props={position:"absolute",visibility:"hidden",display:"block"},which=name=="width"?["Left","Right"]:["Top","Bottom"];function getWH(){val=name=="width"?elem.offsetWidth:elem.offsetHeight;var padding=0,border=0;jQuery.each(which,function(){padding+=parseFloat(jQuery.curCSS(elem,"padding"+this,true))||0;border+=parseFloat(jQuery.curCSS(elem,"border"+this+"Width",true))||0});val-=Math.round(padding+border)}if(jQuery(elem).is(":visible")){getWH()}else{jQuery.swap(elem,props,getWH)}return Math.max(0,val)}return jQuery.curCSS(elem,name,force)},curCSS:function(elem,name,force){var ret;function color(elem){if(!jQuery.browser.safari){return false}var ret=document.defaultView.getComputedStyle(elem,null);return !ret||ret.getPropertyValue("color")==""}if(name=="opacity"&&jQuery.browser.msie){ret=jQuery.attr(elem.style,"opacity");return ret==""?"1":ret}if(jQuery.browser.opera&&name=="display"){var save=elem.style.outline;elem.style.outline="0 solid black";elem.style.outline=save}if(name.match(/float/i)){name=styleFloat}if(!force&&elem.style&&elem.style[name]){ret=elem.style[name]}else{if(document.defaultView&&document.defaultView.getComputedStyle){if(name.match(/float/i)){name="float"}name=name.replace(/([A-Z])/g,"-$1").toLowerCase();var getComputedStyle=document.defaultView.getComputedStyle(elem,null);if(getComputedStyle&&!color(elem)){ret=getComputedStyle.getPropertyValue(name)}else{var swap=[],stack=[];for(var a=elem;a&&color(a);a=a.parentNode){stack.unshift(a)}for(var i=0;i<stack.length;i++){if(color(stack[i])){swap[i]=stack[i].style.display;stack[i].style.display="block"}}ret=name=="display"&&swap[stack.length-1]!=null?"none":(getComputedStyle&&getComputedStyle.getPropertyValue(name))||"";for(var i=0;i<swap.length;i++){if(swap[i]!=null){stack[i].style.display=swap[i]}}}if(name=="opacity"&&ret==""){ret="1"}}else{if(elem.currentStyle){var camelCase=name.replace(/\-(\w)/g,function(all,letter){return letter.toUpperCase()});ret=elem.currentStyle[name]||elem.currentStyle[camelCase];if(!/^\d+(px)?$/i.test(ret)&&/^\d/.test(ret)){var style=elem.style.left,runtimeStyle=elem.runtimeStyle.left;elem.runtimeStyle.left=elem.currentStyle.left;elem.style.left=ret||0;ret=elem.style.pixelLeft+"px";elem.style.left=style;elem.runtimeStyle.left=runtimeStyle}}}}return ret},clean:function(elems,context){var ret=[];context=context||document;if(typeof context.createElement=="undefined"){context=context.ownerDocument||context[0]&&context[0].ownerDocument||document}jQuery.each(elems,function(i,elem){if(!elem){return }if(elem.constructor==Number){elem=elem.toString()}if(typeof elem=="string"){elem=elem.replace(/(<(\w+)[^>]*?)\/>/g,function(all,front,tag){return tag.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?all:front+"></"+tag+">"});var tags=jQuery.trim(elem).toLowerCase(),div=context.createElement("div");var wrap=!tags.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!tags.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||tags.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!tags.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!tags.indexOf("<td")||!tags.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!tags.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||jQuery.browser.msie&&[1,"div<div>","</div>"]||[0,"",""];div.innerHTML=wrap[1]+elem+wrap[2];while(wrap[0]--){div=div.lastChild}if(jQuery.browser.msie){var tbody=!tags.indexOf("<table")&&tags.indexOf("<tbody")<0?div.firstChild&&div.firstChild.childNodes:wrap[1]=="<table>"&&tags.indexOf("<tbody")<0?div.childNodes:[];for(var j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j])}}if(/^\s/.test(elem)){div.insertBefore(context.createTextNode(elem.match(/^\s*/)[0]),div.firstChild)}}elem=jQuery.makeArray(div.childNodes)}if(elem.length===0&&(!jQuery.nodeName(elem,"form")&&!jQuery.nodeName(elem,"select"))){return }if(elem[0]==undefined||jQuery.nodeName(elem,"form")||elem.options){ret.push(elem)}else{ret=jQuery.merge(ret,elem)}});return ret},attr:function(elem,name,value){if(!elem||elem.nodeType==3||elem.nodeType==8){return undefined}var fix=jQuery.isXMLDoc(elem)?{}:jQuery.props;if(name=="selected"&&jQuery.browser.safari){elem.parentNode.selectedIndex}if(fix[name]){if(value!=undefined){elem[fix[name]]=value}return elem[fix[name]]}else{if(jQuery.browser.msie&&name=="style"){return jQuery.attr(elem.style,"cssText",value)}else{if(value==undefined&&jQuery.browser.msie&&jQuery.nodeName(elem,"form")&&(name=="action"||name=="method")){return elem.getAttributeNode(name).nodeValue}else{if(elem.tagName){if(value!=undefined){if(name=="type"&&jQuery.nodeName(elem,"input")&&elem.parentNode){throw"type property can't be changed"}elem.setAttribute(name,""+value)}if(jQuery.browser.msie&&/href|src/.test(name)&&!jQuery.isXMLDoc(elem)){return elem.getAttribute(name,2)}return elem.getAttribute(name)}else{if(name=="opacity"&&jQuery.browser.msie){if(value!=undefined){elem.zoom=1;elem.filter=(elem.filter||"").replace(/alpha\([^)]*\)/,"")+(parseFloat(value).toString()=="NaN"?"":"alpha(opacity="+value*100+")")}return elem.filter&&elem.filter.indexOf("opacity=")>=0?(parseFloat(elem.filter.match(/opacity=([^)]*)/)[1])/100).toString():""}name=name.replace(/-([a-z])/ig,function(all,letter){return letter.toUpperCase()});if(value!=undefined){elem[name]=value}return elem[name]}}}}},trim:function(text){return(text||"").replace(/^\s+|\s+$/g,"")},makeArray:function(array){var ret=[];if(typeof array!="array"){for(var i=0,length=array.length;i<length;i++){ret.push(array[i])}}else{ret=array.slice(0)}return ret},inArray:function(elem,array){for(var i=0,length=array.length;i<length;i++){if(array[i]==elem){return i}}return -1},merge:function(first,second){if(jQuery.browser.msie){for(var i=0;second[i];i++){if(second[i].nodeType!=8){first.push(second[i])}}}else{for(var i=0;second[i];i++){first.push(second[i])}}return first},unique:function(array){var ret=[],done={};try{for(var i=0,length=array.length;i<length;i++){var id=jQuery.data(array[i]);if(!done[id]){done[id]=true;ret.push(array[i])}}}catch(e){ret=array}return ret},grep:function(elems,callback,inv){var ret=[];for(var i=0,length=elems.length;i<length;i++){if(!inv&&callback(elems[i],i)||inv&&!callback(elems[i],i)){ret.push(elems[i])}}return ret},map:function(elems,callback){var ret=[];for(var i=0,length=elems.length;i<length;i++){var value=callback(elems[i],i);if(value!==null&&value!=undefined){if(value.constructor!=Array){value=[value]}ret=ret.concat(value)}}return ret}});var userAgent=navigator.userAgent.toLowerCase();jQuery.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)};var styleFloat=jQuery.browser.msie?"styleFloat":"cssFloat";jQuery.extend({boxModel:!jQuery.browser.msie||document.compatMode=="CSS1Compat",props:{"for":"htmlFor","class":"className","float":styleFloat,cssFloat:styleFloat,styleFloat:styleFloat,innerHTML:"innerHTML",className:"className",value:"value",disabled:"disabled",checked:"checked",readonly:"readOnly",selected:"selected",maxlength:"maxLength",selectedIndex:"selectedIndex",defaultValue:"defaultValue",tagName:"tagName",nodeName:"nodeName"}});jQuery.each({parent:function(elem){return elem.parentNode},parents:function(elem){return jQuery.dir(elem,"parentNode")},next:function(elem){return jQuery.nth(elem,2,"nextSibling")},prev:function(elem){return jQuery.nth(elem,2,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(selector){var ret=jQuery.map(this,fn);if(selector&&typeof selector=="string"){ret=jQuery.multiFilter(selector,ret)}return this.pushStack(jQuery.unique(ret))}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(){var args=arguments;return this.each(function(){for(var i=0,length=args.length;i<length;i++){jQuery(args[i])[original](this)}})}});jQuery.each({removeAttr:function(name){jQuery.attr(this,name,"");if(this.nodeType==1){this.removeAttribute(name)}},addClass:function(classNames){jQuery.className.add(this,classNames)},removeClass:function(classNames){jQuery.className.remove(this,classNames)},toggleClass:function(classNames){jQuery.className[jQuery.className.has(this,classNames)?"remove":"add"](this,classNames)},remove:function(selector){if(!selector||jQuery.filter(selector,[this]).r.length){jQuery("*",this).add(this).each(function(){jQuery.event.remove(this);jQuery.removeData(this)});if(this.parentNode){this.parentNode.removeChild(this)}}},empty:function(){jQuery(">*",this).remove();while(this.firstChild){this.removeChild(this.firstChild)}}},function(name,fn){jQuery.fn[name]=function(){return this.each(fn,arguments)}});jQuery.each(["Height","Width"],function(i,name){var type=name.toLowerCase();jQuery.fn[type]=function(size){return this[0]==window?jQuery.browser.opera&&document.body["client"+name]||jQuery.browser.safari&&window["inner"+name]||document.compatMode=="CSS1Compat"&&document.documentElement["client"+name]||document.body["client"+name]:this[0]==document?Math.max(Math.max(document.body["scroll"+name],document.documentElement["scroll"+name]),Math.max(document.body["offset"+name],document.documentElement["offset"+name])):size==undefined?(this.length?jQuery.css(this[0],type):null):this.css(type,size.constructor==String?size:size+"px")}});var chars=jQuery.browser.safari&&parseInt(jQuery.browser.version)<417?"(?:[\\w*_-]|\\\\.)":"(?:[\\w\u0128-\uFFFF*_-]|\\\\.)",quickChild=new RegExp("^>\\s*("+chars+"+)"),quickID=new RegExp("^("+chars+"+)(#)("+chars+"+)"),quickClass=new RegExp("^([#.]?)("+chars+"*)");jQuery.extend({expr:{"":function(a,i,m){return m[2]=="*"||jQuery.nodeName(a,m[2])},"#":function(a,i,m){return a.getAttribute("id")==m[2]},":":{lt:function(a,i,m){return i<m[3]-0},gt:function(a,i,m){return i>m[3]-0},nth:function(a,i,m){return m[3]-0==i},eq:function(a,i,m){return m[3]-0==i},first:function(a,i){return i==0},last:function(a,i,m,r){return i==r.length-1},even:function(a,i){return i%2==0},odd:function(a,i){return i%2},"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]==a},"last-child":function(a){return jQuery.nth(a.parentNode.lastChild,1,"previousSibling")==a},"only-child":function(a){return !jQuery.nth(a.parentNode.lastChild,2,"previousSibling")},parent:function(a){return a.firstChild},empty:function(a){return !a.firstChild},contains:function(a,i,m){return(a.textContent||a.innerText||jQuery(a).text()||"").indexOf(m[3])>=0},visible:function(a){return"hidden"!=a.type&&jQuery.css(a,"display")!="none"&&jQuery.css(a,"visibility")!="hidden"},hidden:function(a){return"hidden"==a.type||jQuery.css(a,"display")=="none"||jQuery.css(a,"visibility")=="hidden"},enabled:function(a){return !a.disabled},disabled:function(a){return a.disabled},checked:function(a){return a.checked},selected:function(a){return a.selected||jQuery.attr(a,"selected")},text:function(a){return"text"==a.type},radio:function(a){return"radio"==a.type},checkbox:function(a){return"checkbox"==a.type},file:function(a){return"file"==a.type},password:function(a){return"password"==a.type},submit:function(a){return"submit"==a.type},image:function(a){return"image"==a.type},reset:function(a){return"reset"==a.type},button:function(a){return"button"==a.type||jQuery.nodeName(a,"button")},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},has:function(a,i,m){return jQuery.find(m[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},animated:function(a){return jQuery.grep(jQuery.timers,function(fn){return a==fn.elem}).length}}},parse:[/^(\[) *@?([\w-]+) *([!*$^~=]*) *('?"?)(.*?)\4 *\]/,/^(:)([\w-]+)\("?'?(.*?(\(.*?\))?[^(]*?)"?'?\)/,new RegExp("^([:.#]*)("+chars+"+)")],multiFilter:function(expr,elems,not){var old,cur=[];while(expr&&expr!=old){old=expr;var f=jQuery.filter(expr,elems,not);expr=f.t.replace(/^\s*,\s*/,"");cur=not?elems=f.r:jQuery.merge(cur,f.r)}return cur},find:function(t,context){if(typeof t!="string"){return[t]}if(context&&context.nodeType!=1&&context.nodeType!=9){return[]}context=context||document;var ret=[context],done=[],last,nodeName;while(t&&last!=t){var r=[];last=t;t=jQuery.trim(t);var foundToken=false;var re=quickChild;var m=re.exec(t);if(m){nodeName=m[1].toUpperCase();for(var i=0;ret[i];i++){for(var c=ret[i].firstChild;c;c=c.nextSibling){if(c.nodeType==1&&(nodeName=="*"||c.nodeName.toUpperCase()==nodeName)){r.push(c)}}}ret=r;t=t.replace(re,"");if(t.indexOf(" ")==0){continue}foundToken=true}else{re=/^([>+~])\s*(\w*)/i;if((m=re.exec(t))!=null){r=[];var merge={};nodeName=m[2].toUpperCase();m=m[1];for(var j=0,rl=ret.length;j<rl;j++){var n=m=="~"||m=="+"?ret[j].nextSibling:ret[j].firstChild;for(;n;n=n.nextSibling){if(n.nodeType==1){var id=jQuery.data(n);if(m=="~"&&merge[id]){break}if(!nodeName||n.nodeName.toUpperCase()==nodeName){if(m=="~"){merge[id]=true}r.push(n)}if(m=="+"){break}}}}ret=r;t=jQuery.trim(t.replace(re,""));foundToken=true}}if(t&&!foundToken){if(!t.indexOf(",")){if(context==ret[0]){ret.shift()}done=jQuery.merge(done,ret);r=ret=[context];t=" "+t.substr(1,t.length)}else{var re2=quickID;var m=re2.exec(t);if(m){m=[0,m[2],m[3],m[1]]}else{re2=quickClass;m=re2.exec(t)}m[2]=m[2].replace(/\\/g,"");var elem=ret[ret.length-1];if(m[1]=="#"&&elem&&elem.getElementById&&!jQuery.isXMLDoc(elem)){var oid=elem.getElementById(m[2]);if((jQuery.browser.msie||jQuery.browser.opera)&&oid&&typeof oid.id=="string"&&oid.id!=m[2]){oid=jQuery('[@id="'+m[2]+'"]',elem)[0]}ret=r=oid&&(!m[3]||jQuery.nodeName(oid,m[3]))?[oid]:[]}else{for(var i=0;ret[i];i++){var tag=m[1]=="#"&&m[3]?m[3]:m[1]!=""||m[0]==""?"*":m[2];if(tag=="*"&&ret[i].nodeName.toLowerCase()=="object"){tag="param"}r=jQuery.merge(r,ret[i].getElementsByTagName(tag))}if(m[1]=="."){r=jQuery.classFilter(r,m[2])}if(m[1]=="#"){var tmp=[];for(var i=0;r[i];i++){if(r[i].getAttribute("id")==m[2]){tmp=[r[i]];break}}r=tmp}ret=r}t=t.replace(re2,"")}}if(t){var val=jQuery.filter(t,r);ret=r=val.r;t=jQuery.trim(val.t)}}if(t){ret=[]}if(ret&&context==ret[0]){ret.shift()}done=jQuery.merge(done,ret);return done},classFilter:function(r,m,not){m=" "+m+" ";var tmp=[];for(var i=0;r[i];i++){var pass=(" "+r[i].className+" ").indexOf(m)>=0;if(!not&&pass||not&&!pass){tmp.push(r[i])}}return tmp},filter:function(t,r,not){var last;while(t&&t!=last){last=t;var p=jQuery.parse,m;for(var i=0;p[i];i++){m=p[i].exec(t);if(m){t=t.substring(m[0].length);m[2]=m[2].replace(/\\/g,"");break}}if(!m){break}if(m[1]==":"&&m[2]=="not"){r=isSimple.test(m[3])?jQuery.filter(m[3],r,true).r:jQuery(r).not(m[3])}else{if(m[1]=="."){r=jQuery.classFilter(r,m[2],not)}else{if(m[1]=="["){var tmp=[],type=m[3];for(var i=0,rl=r.length;i<rl;i++){var a=r[i],z=a[jQuery.props[m[2]]||m[2]];if(z==null||/href|src|selected/.test(m[2])){z=jQuery.attr(a,m[2])||""}if((type==""&&!!z||type=="="&&z==m[5]||type=="!="&&z!=m[5]||type=="^="&&z&&!z.indexOf(m[5])||type=="$="&&z.substr(z.length-m[5].length)==m[5]||(type=="*="||type=="~=")&&z.indexOf(m[5])>=0)^not){tmp.push(a)}}r=tmp}else{if(m[1]==":"&&m[2]=="nth-child"){var merge={},tmp=[],test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(m[3]=="even"&&"2n"||m[3]=="odd"&&"2n+1"||!/\D/.test(m[3])&&"0n+"+m[3]||m[3]),first=(test[1]+(test[2]||1))-0,last=test[3]-0;for(var i=0,rl=r.length;i<rl;i++){var node=r[i],parentNode=node.parentNode,id=jQuery.data(parentNode);if(!merge[id]){var c=1;for(var n=parentNode.firstChild;n;n=n.nextSibling){if(n.nodeType==1){n.nodeIndex=c++}}merge[id]=true}var add=false;if(first==0){if(node.nodeIndex==last){add=true}}else{if((node.nodeIndex-last)%first==0&&(node.nodeIndex-last)/first>=0){add=true}}if(add^not){tmp.push(node)}}r=tmp}else{var fn=jQuery.expr[m[1]];if(typeof fn=="object"){fn=fn[m[2]]}if(typeof fn=="string"){fn=eval("false||function(a,i){return "+fn+";}")}r=jQuery.grep(r,function(elem,i){return fn(elem,i,m,r)},not)}}}}}return{r:r,t:t}},dir:function(elem,dir){var matched=[];var cur=elem[dir];while(cur&&cur!=document){if(cur.nodeType==1){matched.push(cur)}cur=cur[dir]}return matched},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir]){if(cur.nodeType==1&&++num==result){break}}return cur},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType==1&&(!elem||n!=elem)){r.push(n)}}return r}});jQuery.event={add:function(elem,types,handler,data){if(elem.nodeType==3||elem.nodeType==8){return }if(jQuery.browser.msie&&elem.setInterval!=undefined){elem=window}if(!handler.guid){handler.guid=this.guid++}if(data!=undefined){var fn=handler;handler=function(){return fn.apply(this,arguments)};handler.data=data;handler.guid=fn.guid}var events=jQuery.data(elem,"events")||jQuery.data(elem,"events",{}),handle=jQuery.data(elem,"handle")||jQuery.data(elem,"handle",function(){var val;if(typeof jQuery=="undefined"||jQuery.event.triggered){return val}val=jQuery.event.handle.apply(arguments.callee.elem,arguments);return val});handle.elem=elem;jQuery.each(types.split(/\s+/),function(index,type){var parts=type.split(".");type=parts[0];handler.type=parts[1];var handlers=events[type];if(!handlers){handlers=events[type]={};if(!jQuery.event.special[type]||jQuery.event.special[type].setup.call(elem)===false){if(elem.addEventListener){elem.addEventListener(type,handle,false)}else{if(elem.attachEvent){elem.attachEvent("on"+type,handle)}}}}handlers[handler.guid]=handler;jQuery.event.global[type]=true});elem=null},guid:1,global:{},remove:function(elem,types,handler){if(elem.nodeType==3||elem.nodeType==8){return }var events=jQuery.data(elem,"events"),ret,index;if(events){if(types==undefined||(typeof types=="string"&&types.charAt(0)==".")){for(var type in events){this.remove(elem,type+(types||""))}}else{if(types.type){handler=types.handler;types=types.type}jQuery.each(types.split(/\s+/),function(index,type){var parts=type.split(".");type=parts[0];if(events[type]){if(handler){delete events[type][handler.guid]}else{for(handler in events[type]){if(!parts[1]||events[type][handler].type==parts[1]){delete events[type][handler]}}}for(ret in events[type]){break}if(!ret){if(!jQuery.event.special[type]||jQuery.event.special[type].teardown.call(elem)===false){if(elem.removeEventListener){elem.removeEventListener(type,jQuery.data(elem,"handle"),false)}else{if(elem.detachEvent){elem.detachEvent("on"+type,jQuery.data(elem,"handle"))}}}ret=null;delete events[type]}}})}for(ret in events){break}if(!ret){var handle=jQuery.data(elem,"handle");if(handle){handle.elem=null}jQuery.removeData(elem,"events");jQuery.removeData(elem,"handle")}}},trigger:function(type,data,elem,donative,extra){data=jQuery.makeArray(data||[]);if(type.indexOf("!")>=0){type=type.slice(0,-1);var exclusive=true}if(!elem){if(this.global[type]){jQuery("*").add([window,document]).trigger(type,data)}}else{if(elem.nodeType==3||elem.nodeType==8){return undefined}var val,ret,fn=jQuery.isFunction(elem[type]||null),event=!data[0]||!data[0].preventDefault;if(event){data.unshift(this.fix({type:type,target:elem}))}data[0].type=type;if(exclusive){data[0].exclusive=true}if(jQuery.isFunction(jQuery.data(elem,"handle"))){val=jQuery.data(elem,"handle").apply(elem,data)}if(!fn&&elem["on"+type]&&elem["on"+type].apply(elem,data)===false){val=false}if(event){data.shift()}if(extra&&jQuery.isFunction(extra)){ret=extra.apply(elem,val==null?data:data.concat(val));if(ret!==undefined){val=ret}}if(fn&&donative!==false&&val!==false&&!(jQuery.nodeName(elem,"a")&&type=="click")){this.triggered=true;try{elem[type]()}catch(e){}}this.triggered=false}return val},handle:function(event){var val;event=jQuery.event.fix(event||window.event||{});var parts=event.type.split(".");event.type=parts[0];var handlers=jQuery.data(this,"events")&&jQuery.data(this,"events")[event.type],args=Array.prototype.slice.call(arguments,1);args.unshift(event);for(var j in handlers){var handler=handlers[j];args[0].handler=handler;args[0].data=handler.data;if(!parts[1]&&!event.exclusive||handler.type==parts[1]){var ret=handler.apply(this,args);if(val!==false){val=ret}if(ret===false){event.preventDefault();event.stopPropagation()}}}if(jQuery.browser.msie){event.target=event.preventDefault=event.stopPropagation=event.handler=event.data=null}return val},fix:function(event){var originalEvent=event;event=jQuery.extend({},originalEvent);event.preventDefault=function(){if(originalEvent.preventDefault){originalEvent.preventDefault()}originalEvent.returnValue=false};event.stopPropagation=function(){if(originalEvent.stopPropagation){originalEvent.stopPropagation()}originalEvent.cancelBubble=true};if(!event.target){event.target=event.srcElement||document}if(event.target.nodeType==3){event.target=originalEvent.target.parentNode}if(!event.relatedTarget&&event.fromElement){event.relatedTarget=event.fromElement==event.target?event.toElement:event.fromElement}if(event.pageX==null&&event.clientX!=null){var doc=document.documentElement,body=document.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc.clientTop||0)}if(!event.which&&((event.charCode||event.charCode===0)?event.charCode:event.keyCode)){event.which=event.charCode||event.keyCode}if(!event.metaKey&&event.ctrlKey){event.metaKey=event.ctrlKey}if(!event.which&&event.button){event.which=(event.button&1?1:(event.button&2?3:(event.button&4?2:0)))}return event},special:{ready:{setup:function(){bindReady();return },teardown:function(){return }},mouseenter:{setup:function(){if(jQuery.browser.msie){return false}jQuery(this).bind("mouseover",jQuery.event.special.mouseenter.handler);return true},teardown:function(){if(jQuery.browser.msie){return false}jQuery(this).unbind("mouseover",jQuery.event.special.mouseenter.handler);return true},handler:function(event){if(withinElement(event,this)){return true}arguments[0].type="mouseenter";return jQuery.event.handle.apply(this,arguments)}},mouseleave:{setup:function(){if(jQuery.browser.msie){return false}jQuery(this).bind("mouseout",jQuery.event.special.mouseleave.handler);return true},teardown:function(){if(jQuery.browser.msie){return false}jQuery(this).unbind("mouseout",jQuery.event.special.mouseleave.handler);return true},handler:function(event){if(withinElement(event,this)){return true}arguments[0].type="mouseleave";return jQuery.event.handle.apply(this,arguments)}}}};jQuery.fn.extend({bind:function(type,data,fn){return type=="unload"?this.one(type,data,fn):this.each(function(){jQuery.event.add(this,type,fn||data,fn&&data)})},one:function(type,data,fn){return this.each(function(){jQuery.event.add(this,type,function(event){jQuery(this).unbind(event);return(fn||data).apply(this,arguments)},fn&&data)})},unbind:function(type,fn){return this.each(function(){jQuery.event.remove(this,type,fn)})},trigger:function(type,data,fn){return this.each(function(){jQuery.event.trigger(type,data,this,true,fn)})},triggerHandler:function(type,data,fn){if(this[0]){return jQuery.event.trigger(type,data,this[0],false,fn)}return undefined},toggle:function(){var args=arguments;return this.click(function(event){this.lastToggle=0==this.lastToggle?1:0;event.preventDefault();return args[this.lastToggle].apply(this,arguments)||false})},hover:function(fnOver,fnOut){return this.bind("mouseenter",fnOver).bind("mouseleave",fnOut)},ready:function(fn){bindReady();if(jQuery.isReady){fn.call(document,jQuery)}else{jQuery.readyList.push(function(){return fn.call(this,jQuery)})}return this}});jQuery.extend({isReady:false,readyList:[],ready:function(){if(!jQuery.isReady){jQuery.isReady=true;if(jQuery.readyList){jQuery.each(jQuery.readyList,function(){this.apply(document)});jQuery.readyList=null}jQuery(document).triggerHandler("ready")}}});var readyBound=false;function bindReady(){if(readyBound){return }readyBound=true;if(document.addEventListener&&!jQuery.browser.opera){document.addEventListener("DOMContentLoaded",jQuery.ready,false)}if(jQuery.browser.msie&&window==top){(function(){if(jQuery.isReady){return }try{document.documentElement.doScroll("left")}catch(error){setTimeout(arguments.callee,0);return }jQuery.ready()})()}if(jQuery.browser.opera){document.addEventListener("DOMContentLoaded",function(){if(jQuery.isReady){return }for(var i=0;i<document.styleSheets.length;i++){if(document.styleSheets[i].disabled){setTimeout(arguments.callee,0);return }}jQuery.ready()},false)}if(jQuery.browser.safari){var numStyles;(function(){if(jQuery.isReady){return }if(document.readyState!="loaded"&&document.readyState!="complete"){setTimeout(arguments.callee,0);return }if(numStyles===undefined){numStyles=jQuery("style, link[rel=stylesheet]").length}if(document.styleSheets.length!=numStyles){setTimeout(arguments.callee,0);return }jQuery.ready()})()}jQuery.event.add(window,"load",jQuery.ready)}jQuery.each(("blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,change,select,submit,keydown,keypress,keyup,error").split(","),function(i,name){jQuery.fn[name]=function(fn){return fn?this.bind(name,fn):this.trigger(name)}});var withinElement=function(event,elem){var parent=event.relatedTarget;while(parent&&parent!=elem){try{parent=parent.parentNode}catch(error){parent=elem}}return parent==elem};jQuery(window).bind("unload",function(){jQuery("*").add(document).unbind()});jQuery.fn.extend({load:function(url,params,callback){if(jQuery.isFunction(url)){return this.bind("load",url)}var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off)}callback=callback||function(){};var type="GET";if(params){if(jQuery.isFunction(params)){callback=params;params=null}else{params=jQuery.param(params);type="POST"}}var self=this;jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(res,status){if(status=="success"||status=="notmodified"){self.html(selector?jQuery("<div/>").append(res.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):res.responseText)}self.each(callback,[res.responseText,status,res])}});return this},serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return jQuery.nodeName(this,"form")?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:val.constructor==Array?jQuery.map(val,function(val,i){return{name:elem.name,value:val}}):{name:elem.name,value:val}}).get()}});jQuery.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(i,o){jQuery.fn[o]=function(f){return this.bind(o,f)}});var jsc=(new Date).getTime();jQuery.extend({get:function(url,data,callback,type){if(jQuery.isFunction(data)){callback=data;data=null}return jQuery.ajax({type:"GET",url:url,data:data,success:callback,dataType:type})},getScript:function(url,callback){return jQuery.get(url,null,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},post:function(url,data,callback,type){if(jQuery.isFunction(data)){callback=data;data={}}return jQuery.ajax({type:"POST",url:url,data:data,success:callback,dataType:type})},ajaxSetup:function(settings){jQuery.extend(jQuery.ajaxSettings,settings)},ajaxSettings:{global:true,type:"GET",timeout:0,contentType:"application/x-www-form-urlencoded",processData:true,async:true,data:null,username:null,password:null,accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},ajax:function(s){var jsonp,jsre=/=\?(&|$)/g,status,data;s=jQuery.extend(true,s,jQuery.extend(true,{},jQuery.ajaxSettings,s));if(s.data&&s.processData&&typeof s.data!="string"){s.data=jQuery.param(s.data)}if(s.dataType=="jsonp"){if(s.type.toLowerCase()=="get"){if(!s.url.match(jsre)){s.url+=(s.url.match(/\?/)?"&":"?")+(s.jsonp||"callback")+"=?"}}else{if(!s.data||!s.data.match(jsre)){s.data=(s.data?s.data+"&":"")+(s.jsonp||"callback")+"=?"}}s.dataType="json"}if(s.dataType=="json"&&(s.data&&s.data.match(jsre)||s.url.match(jsre))){jsonp="jsonp"+jsc++;if(s.data){s.data=(s.data+"").replace(jsre,"="+jsonp+"$1")}s.url=s.url.replace(jsre,"="+jsonp+"$1");s.dataType="script";window[jsonp]=function(tmp){data=tmp;success();complete();window[jsonp]=undefined;try{delete window[jsonp]}catch(e){}if(head){head.removeChild(script)}}}if(s.dataType=="script"&&s.cache==null){s.cache=false}if(s.cache===false&&s.type.toLowerCase()=="get"){var ts=(new Date()).getTime();var ret=s.url.replace(/(\?|&)_=.*?(&|$)/,"$1_="+ts+"$2");s.url=ret+((ret==s.url)?(s.url.match(/\?/)?"&":"?")+"_="+ts:"")}if(s.data&&s.type.toLowerCase()=="get"){s.url+=(s.url.match(/\?/)?"&":"?")+s.data;s.data=null}if(s.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart")}if((!s.url.indexOf("http")||!s.url.indexOf("//"))&&s.dataType=="script"&&s.type.toLowerCase()=="get"){var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.src=s.url;if(s.scriptCharset){script.charset=s.scriptCharset}if(!jsonp){var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){done=true;success();complete();head.removeChild(script)}}}head.appendChild(script);return undefined}var requestDone=false;var xml=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest();xml.open(s.type,s.url,s.async,s.username,s.password);try{if(s.data){xml.setRequestHeader("Content-Type",s.contentType)}if(s.ifModified){xml.setRequestHeader("If-Modified-Since",jQuery.lastModified[s.url]||"Thu, 01 Jan 1970 00:00:00 GMT")}xml.setRequestHeader("X-Requested-With","XMLHttpRequest");xml.setRequestHeader("Accept",s.dataType&&s.accepts[s.dataType]?s.accepts[s.dataType]+", */*":s.accepts._default)}catch(e){}if(s.beforeSend){s.beforeSend(xml)}if(s.global){jQuery.event.trigger("ajaxSend",[xml,s])}var onreadystatechange=function(isTimeout){if(!requestDone&&xml&&(xml.readyState==4||isTimeout=="timeout")){requestDone=true;if(ival){clearInterval(ival);ival=null}status=isTimeout=="timeout"&&"timeout"||!jQuery.httpSuccess(xml)&&"error"||s.ifModified&&jQuery.httpNotModified(xml,s.url)&&"notmodified"||"success";if(status=="success"){try{data=jQuery.httpData(xml,s.dataType)}catch(e){status="parsererror"}}if(status=="success"){var modRes;try{modRes=xml.getResponseHeader("Last-Modified")}catch(e){}if(s.ifModified&&modRes){jQuery.lastModified[s.url]=modRes}if(!jsonp){success()}}else{jQuery.handleError(s,xml,status)}complete();if(s.async){xml=null}}};if(s.async){var ival=setInterval(onreadystatechange,13);if(s.timeout>0){setTimeout(function(){if(xml){xml.abort();if(!requestDone){onreadystatechange("timeout")}}},s.timeout)}}try{xml.send(s.data)}catch(e){jQuery.handleError(s,xml,null,e)}if(!s.async){onreadystatechange()}function success(){if(s.success){s.success(data,status)}if(s.global){jQuery.event.trigger("ajaxSuccess",[xml,s])}}function complete(){if(s.complete){s.complete(xml,status)}if(s.global){jQuery.event.trigger("ajaxComplete",[xml,s])}if(s.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop")}}return xml},handleError:function(s,xml,status,e){if(s.error){s.error(xml,status,e)}if(s.global){jQuery.event.trigger("ajaxError",[xml,s,e])}},active:0,httpSuccess:function(r){try{return !r.status&&location.protocol=="file:"||(r.status>=200&&r.status<300)||r.status==304||r.status==1223||jQuery.browser.safari&&r.status==undefined}catch(e){}return false},httpNotModified:function(xml,url){try{var xmlRes=xml.getResponseHeader("Last-Modified");return xml.status==304||xmlRes==jQuery.lastModified[url]||jQuery.browser.safari&&xml.status==undefined}catch(e){}return false},httpData:function(r,type){var ct=r.getResponseHeader("content-type");var xml=type=="xml"||!type&&ct&&ct.indexOf("xml")>=0;var data=xml?r.responseXML:r.responseText;if(xml&&data.documentElement.tagName=="parsererror"){throw"parsererror"}if(type=="script"){jQuery.globalEval(data)}if(type=="json"){data=eval("("+data+")")}return data},param:function(a){var s=[];if(a.constructor==Array||a.jquery){jQuery.each(a,function(){s.push(encodeURIComponent(this.name)+"="+encodeURIComponent(this.value))})}else{for(var j in a){if(a[j]&&a[j].constructor==Array){jQuery.each(a[j],function(){s.push(encodeURIComponent(j)+"="+encodeURIComponent(this))})}else{s.push(encodeURIComponent(j)+"="+encodeURIComponent(a[j]))}}}return s.join("&").replace(/%20/g,"+")}});jQuery.fn.extend({show:function(speed,callback){return speed?this.animate({height:"show",width:"show",opacity:"show"},speed,callback):this.filter(":hidden").each(function(){this.style.display=this.oldblock||"";if(jQuery.css(this,"display")=="none"){var elem=jQuery("<"+this.tagName+" />").appendTo("body");this.style.display=elem.css("display");if(this.style.display=="none"){this.style.display="block"}elem.remove()}}).end()},hide:function(speed,callback){return speed?this.animate({height:"hide",width:"hide",opacity:"hide"},speed,callback):this.filter(":visible").each(function(){this.oldblock=this.oldblock||jQuery.css(this,"display");this.style.display="none"}).end()},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2){return jQuery.isFunction(fn)&&jQuery.isFunction(fn2)?this._toggle(fn,fn2):fn?this.animate({height:"toggle",width:"toggle",opacity:"toggle"},fn,fn2):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"]()})},slideDown:function(speed,callback){return this.animate({height:"show"},speed,callback)},slideUp:function(speed,callback){return this.animate({height:"hide"},speed,callback)},slideToggle:function(speed,callback){return this.animate({height:"toggle"},speed,callback)},fadeIn:function(speed,callback){return this.animate({opacity:"show"},speed,callback)},fadeOut:function(speed,callback){return this.animate({opacity:"hide"},speed,callback)},fadeTo:function(speed,to,callback){return this.animate({opacity:to},speed,callback)},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);return this[optall.queue===false?"each":"queue"](function(){if(this.nodeType!=1){return false}var opt=jQuery.extend({},optall);var hidden=jQuery(this).is(":hidden"),self=this;for(var p in prop){if(prop[p]=="hide"&&hidden||prop[p]=="show"&&!hidden){return jQuery.isFunction(opt.complete)&&opt.complete.apply(this)}if(p=="height"||p=="width"){opt.display=jQuery.css(this,"display");opt.overflow=this.style.overflow}}if(opt.overflow!=null){this.style.overflow="hidden"}opt.curAnim=jQuery.extend({},prop);jQuery.each(prop,function(name,val){var e=new jQuery.fx(self,opt,name);if(/toggle|show|hide/.test(val)){e[val=="toggle"?hidden?"show":"hide":val](prop)}else{var parts=val.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),start=e.cur(true)||0;if(parts){var end=parseFloat(parts[2]),unit=parts[3]||"px";if(unit!="px"){self.style[name]=(end||1)+unit;start=((end||1)/e.cur(true))*start;self.style[name]=start+unit}if(parts[1]){end=((parts[1]=="-="?-1:1)*end)+start}e.custom(start,end,unit)}else{e.custom(start,val,"")}}});return true})},queue:function(type,fn){if(jQuery.isFunction(type)||(type&&type.constructor==Array)){fn=type;type="fx"}if(!type||(typeof type=="string"&&!fn)){return queue(this[0],type)}return this.each(function(){if(fn.constructor==Array){queue(this,type,fn)}else{queue(this,type).push(fn);if(queue(this,type).length==1){fn.apply(this)}}})},stop:function(clearQueue,gotoEnd){var timers=jQuery.timers;if(clearQueue){this.queue([])}this.each(function(){for(var i=timers.length-1;i>=0;i--){if(timers[i].elem==this){if(gotoEnd){timers[i](true)}timers.splice(i,1)}}});if(!gotoEnd){this.dequeue()}return this}});var queue=function(elem,type,array){if(!elem){return undefined}type=type||"fx";var q=jQuery.data(elem,type+"queue");if(!q||array){q=jQuery.data(elem,type+"queue",array?jQuery.makeArray(array):[])}return q};jQuery.fn.dequeue=function(type){type=type||"fx";return this.each(function(){var q=queue(this,type);q.shift();if(q.length){q[0].apply(this)}})};jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&speed.constructor==Object?speed:{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&easing.constructor!=Function&&easing};opt.duration=(opt.duration&&opt.duration.constructor==Number?opt.duration:{slow:600,fast:200}[opt.duration])||400;opt.old=opt.complete;opt.complete=function(){if(opt.queue!==false){jQuery(this).dequeue()}if(jQuery.isFunction(opt.old)){opt.old.apply(this)}};return opt},easing:{linear:function(p,n,firstNum,diff){return firstNum+diff*p},swing:function(p,n,firstNum,diff){return((-Math.cos(p*Math.PI)/2)+0.5)*diff+firstNum}},timers:[],timerId:null,fx:function(elem,options,prop){this.options=options;this.elem=elem;this.prop=prop;if(!options.orig){options.orig={}}}});jQuery.fx.prototype={update:function(){if(this.options.step){this.options.step.apply(this.elem,[this.now,this])}(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this);if(this.prop=="height"||this.prop=="width"){this.elem.style.display="block"}},cur:function(force){if(this.elem[this.prop]!=null&&this.elem.style[this.prop]==null){return this.elem[this.prop]}var r=parseFloat(jQuery.css(this.elem,this.prop,force));return r&&r>-10000?r:parseFloat(jQuery.curCSS(this.elem,this.prop))||0},custom:function(from,to,unit){this.startTime=(new Date()).getTime();this.start=from;this.end=to;this.unit=unit||this.unit||"px";this.now=this.start;this.pos=this.state=0;this.update();var self=this;function t(gotoEnd){return self.step(gotoEnd)}t.elem=this.elem;jQuery.timers.push(t);if(jQuery.timerId==null){jQuery.timerId=setInterval(function(){var timers=jQuery.timers;for(var i=0;i<timers.length;i++){if(!timers[i]()){timers.splice(i--,1)}}if(!timers.length){clearInterval(jQuery.timerId);jQuery.timerId=null}},13)}},show:function(){this.options.orig[this.prop]=jQuery.attr(this.elem.style,this.prop);this.options.show=true;this.custom(0,this.cur());if(this.prop=="width"||this.prop=="height"){this.elem.style[this.prop]="1px"}jQuery(this.elem).show()},hide:function(){this.options.orig[this.prop]=jQuery.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(gotoEnd){var t=(new Date()).getTime();if(gotoEnd||t>this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;var done=true;for(var i in this.options.curAnim){if(this.options.curAnim[i]!==true){done=false}}if(done){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(jQuery.css(this.elem,"display")=="none"){this.elem.style.display="block"}}if(this.options.hide){this.elem.style.display="none"}if(this.options.hide||this.options.show){for(var p in this.options.curAnim){jQuery.attr(this.elem.style,p,this.options.orig[p])}}}if(done&&jQuery.isFunction(this.options.complete)){this.options.complete.apply(this.elem)}return false}else{var n=t-this.startTime;this.state=n/this.options.duration;this.pos=jQuery.easing[this.options.easing||(jQuery.easing.swing?"swing":"linear")](this.state,n,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update()}return true}};jQuery.fx.step={scrollLeft:function(fx){fx.elem.scrollLeft=fx.now},scrollTop:function(fx){fx.elem.scrollTop=fx.now},opacity:function(fx){jQuery.attr(fx.elem.style,"opacity",fx.now)},_default:function(fx){fx.elem.style[fx.prop]=fx.now+fx.unit}};jQuery.fn.offset=function(){var left=0,top=0,elem=this[0],results;if(elem){with(jQuery.browser){var parent=elem.parentNode,offsetChild=elem,offsetParent=elem.offsetParent,doc=elem.ownerDocument,safari2=safari&&parseInt(version)<522&&!/adobeair/i.test(userAgent),fixed=jQuery.css(elem,"position")=="fixed";if(elem.getBoundingClientRect){var box=elem.getBoundingClientRect();add(box.left+Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft),box.top+Math.max(doc.documentElement.scrollTop,doc.body.scrollTop));add(-doc.documentElement.clientLeft,-doc.documentElement.clientTop)}else{add(elem.offsetLeft,elem.offsetTop);while(offsetParent){add(offsetParent.offsetLeft,offsetParent.offsetTop);if(mozilla&&!/^t(able|d|h)$/i.test(offsetParent.tagName)||safari&&!safari2){border(offsetParent)}if(!fixed&&jQuery.css(offsetParent,"position")=="fixed"){fixed=true}offsetChild=/^body$/i.test(offsetParent.tagName)?offsetChild:offsetParent;offsetParent=offsetParent.offsetParent}while(parent&&parent.tagName&&!/^body|html$/i.test(parent.tagName)){if(!/^inline|table.*$/i.test(jQuery.css(parent,"display"))){add(-parent.scrollLeft,-parent.scrollTop)}if(mozilla&&jQuery.css(parent,"overflow")!="visible"){border(parent)}parent=parent.parentNode}if((safari2&&(fixed||jQuery.css(offsetChild,"position")=="absolute"))||(mozilla&&jQuery.css(offsetChild,"position")!="absolute")){add(-doc.body.offsetLeft,-doc.body.offsetTop)}if(fixed){add(Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft),Math.max(doc.documentElement.scrollTop,doc.body.scrollTop))}}results={top:top,left:left}}}function border(elem){add(jQuery.curCSS(elem,"borderLeftWidth",true),jQuery.curCSS(elem,"borderTopWidth",true))}function add(l,t){left+=parseInt(l)||0;top+=parseInt(t)||0}return results}})();
// /vendor/require-1.0.2.js from cimspire
var requirejs,require,define;(function(){var version="1.0.2",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/require\(\s*["']([^'"\s]+)["']\s*\)/g,currDirRegExp=/^\.\//,jsSuffixRegExp=/\.js$/,ostring=Object.prototype.toString,ap=Array.prototype,aps=ap.slice,apsp=ap.splice,isBrowser=!!(typeof window!=="undefined"&&navigator&&document),isWebWorker=!isBrowser&&typeof importScripts!=="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!=="undefined"&&opera.toString()==="[object Opera]",empty={},contexts={},globalDefQueue=[],interactiveScript=null,checkLoadedDepth=0,useInteractive=false,req,cfg={},currentlyAddingScript,s,head,baseElement,scripts,script,src,subPath,mainScript,dataMain,i,ctx,jQueryCheck,checkLoadedTimeoutId;function isFunction(it){return ostring.call(it)==="[object Function]"}function isArray(it){return ostring.call(it)==="[object Array]"}function mixin(target,source,force){for(var prop in source){if(!(prop in empty)&&(!(prop in target)||force)){target[prop]=source[prop]}}return req}function makeError(id,msg,err){var e=new Error(msg+"\nhttp://requirejs.org/docs/errors.html#"+id);if(err){e.originalError=err}return e}function configurePackageDir(pkgs,currentPackages,dir){var i,location,pkgObj;for(i=0;(pkgObj=currentPackages[i]);i++){pkgObj=typeof pkgObj==="string"?{name:pkgObj}:pkgObj;location=pkgObj.location;if(dir&&(!location||(location.indexOf("/")!==0&&location.indexOf(":")===-1))){location=dir+"/"+(location||pkgObj.name)}pkgs[pkgObj.name]={name:pkgObj.name,location:location||pkgObj.name,main:(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}}function jQueryHoldReady($,shouldHold){if($.holdReady){$.holdReady(shouldHold)}else{if(shouldHold){$.readyWait+=1}else{$.ready(true)}}}if(typeof define!=="undefined"){return }if(typeof requirejs!=="undefined"){if(isFunction(requirejs)){return }else{cfg=requirejs;requirejs=undefined}}if(typeof require!=="undefined"&&!isFunction(require)){cfg=require;require=undefined}function newContext(contextName){var context,resume,config={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},catchError:{}},defQueue=[],specified={require:true,exports:true,module:true},urlMap={},defined={},loaded={},waiting={},waitAry=[],urlFetched={},managerCounter=0,managerCallbacks={},plugins={},needFullExec={},fullExec={},resumeDepth=0;function trimDots(ary){var i,part;for(i=0;(part=ary[i]);i++){if(part==="."){ary.splice(i,1);i-=1}else{if(part===".."){if(i===1&&(ary[2]===".."||ary[0]==="..")){break}else{if(i>0){ary.splice(i-1,2);i-=2}}}}}}function normalize(name,baseName){var pkgName,pkgConfig;if(name&&name.charAt(0)==="."){if(baseName){if(config.pkgs[baseName]){baseName=[baseName]}else{baseName=baseName.split("/");baseName=baseName.slice(0,baseName.length-1)}name=baseName.concat(name.split("/"));trimDots(name);pkgConfig=config.pkgs[(pkgName=name[0])];name=name.join("/");if(pkgConfig&&name===pkgName+"/"+pkgConfig.main){name=pkgName}}else{if(name.indexOf("./")===0){name=name.substring(2)}}}return name}function makeModuleMap(name,parentModuleMap){var index=name?name.indexOf("!"):-1,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,normalizedName,url,pluginModule;if(index!==-1){prefix=name.substring(0,index);name=name.substring(index+1,name.length)}if(prefix){prefix=normalize(prefix,parentName)}if(name){if(prefix){pluginModule=defined[prefix];if(pluginModule&&pluginModule.normalize){normalizedName=pluginModule.normalize(name,function(name){return normalize(name,parentName)})}else{normalizedName=normalize(name,parentName)}}else{normalizedName=normalize(name,parentName);url=urlMap[normalizedName];if(!url){url=context.nameToUrl(normalizedName,null,parentModuleMap);urlMap[normalizedName]=url}}}return{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,url:url,originalName:originalName,fullName:prefix?prefix+"!"+(normalizedName||""):normalizedName}}function isPriorityDone(){var priorityDone=true,priorityWait=config.priorityWait,priorityName,i;if(priorityWait){for(i=0;(priorityName=priorityWait[i]);i++){if(!loaded[priorityName]){priorityDone=false;break}}if(priorityDone){delete config.priorityWait}}return priorityDone}function makeContextModuleFunc(func,relModuleMap,enableBuildCallback){return function(){var args=aps.call(arguments,0),lastArg;if(enableBuildCallback&&isFunction((lastArg=args[args.length-1]))){lastArg.__requireJsBuild=true}args.push(relModuleMap);return func.apply(null,args)}}function makeRequire(relModuleMap,enableBuildCallback){var modRequire=makeContextModuleFunc(context.require,relModuleMap,enableBuildCallback);mixin(modRequire,{nameToUrl:makeContextModuleFunc(context.nameToUrl,relModuleMap),toUrl:makeContextModuleFunc(context.toUrl,relModuleMap),defined:makeContextModuleFunc(context.requireDefined,relModuleMap),specified:makeContextModuleFunc(context.requireSpecified,relModuleMap),isBrowser:req.isBrowser});return modRequire}function queueDependency(manager){context.paused.push(manager)}function execManager(manager){var i,ret,err,errFile,errModuleTree,cb=manager.callback,map=manager.map,fullName=map.fullName,args=manager.deps,listeners=manager.listeners,cjsModule;if(cb&&isFunction(cb)){if(config.catchError.define){try{ret=req.execCb(fullName,manager.callback,args,defined[fullName])}catch(e){err=e}}else{ret=req.execCb(fullName,manager.callback,args,defined[fullName])}if(fullName){cjsModule=manager.cjsModule;if(cjsModule&&cjsModule.exports!==undefined&&cjsModule.exports!==defined[fullName]){ret=defined[fullName]=manager.cjsModule.exports}else{if(ret===undefined&&manager.usingExports){ret=defined[fullName]}else{defined[fullName]=ret;if(needFullExec[fullName]){fullExec[fullName]=true}}}}}else{if(fullName){ret=defined[fullName]=cb;if(needFullExec[fullName]){fullExec[fullName]=true}}}if(waiting[manager.id]){delete waiting[manager.id];manager.isDone=true;context.waitCount-=1;if(context.waitCount===0){waitAry=[]}}delete managerCallbacks[fullName];if(req.onResourceLoad&&!manager.placeholder){req.onResourceLoad(context,map,manager.depArray)}if(err){errFile=(fullName?makeModuleMap(fullName).url:"")||err.fileName||err.sourceURL;errModuleTree=err.moduleTree;err=makeError("defineerror",'Error evaluating module "'+fullName+'" at location "'+errFile+'":\n'+err+"\nfileName:"+errFile+"\nlineNumber: "+(err.lineNumber||err.line),err);err.moduleName=fullName;err.moduleTree=errModuleTree;return req.onError(err)}for(i=0;(cb=listeners[i]);i++){cb(ret)}return undefined}function makeArgCallback(manager,i){return function(value){if(!manager.depDone[i]){manager.depDone[i]=true;manager.deps[i]=value;manager.depCount-=1;if(!manager.depCount){execManager(manager)}}}}function callPlugin(pluginName,depManager){var map=depManager.map,fullName=map.fullName,name=map.name,plugin=plugins[pluginName]||(plugins[pluginName]=defined[pluginName]),load;if(depManager.loading){return }depManager.loading=true;load=function(ret){depManager.callback=function(){return ret};execManager(depManager);loaded[depManager.id]=true;resume()};load.fromText=function(moduleName,text){var hasInteractive=useInteractive;loaded[moduleName]=false;context.scriptCount+=1;context.fake[moduleName]=true;if(hasInteractive){useInteractive=false}req.exec(text);if(hasInteractive){useInteractive=true}context.completeLoad(moduleName)};if(fullName in defined){load(defined[fullName])}else{plugin.load(name,makeRequire(map.parentMap,true),load,config)}}function addWait(manager){if(!waiting[manager.id]){waiting[manager.id]=manager;waitAry.push(manager);context.waitCount+=1}}function managerAdd(cb){this.listeners.push(cb)}function getManager(map,shouldQueue){var fullName=map.fullName,prefix=map.prefix,plugin=prefix?plugins[prefix]||(plugins[prefix]=defined[prefix]):null,manager,created,pluginManager;if(fullName){manager=managerCallbacks[fullName]}if(!manager){created=true;manager={id:(prefix&&!plugin?(managerCounter++)+"__p@:":"")+(fullName||"__r@"+(managerCounter++)),map:map,depCount:0,depDone:[],depCallbacks:[],deps:[],listeners:[],add:managerAdd};specified[manager.id]=true;if(fullName&&(!prefix||plugins[prefix])){managerCallbacks[fullName]=manager}}if(prefix&&!plugin){pluginManager=getManager(makeModuleMap(prefix),true);pluginManager.add(function(plugin){var newMap=makeModuleMap(map.originalName,map.parentMap),normalizedManager=getManager(newMap,true);manager.placeholder=true;normalizedManager.add(function(resource){manager.callback=function(){return resource};execManager(manager)})})}else{if(created&&shouldQueue){loaded[manager.id]=false;queueDependency(manager);addWait(manager)}}return manager}function main(inName,depArray,callback,relModuleMap){var moduleMap=makeModuleMap(inName,relModuleMap),name=moduleMap.name,fullName=moduleMap.fullName,manager=getManager(moduleMap),id=manager.id,deps=manager.deps,i,depArg,depName,depPrefix,cjsMod;if(fullName){if(fullName in defined||loaded[id]===true||(fullName==="jquery"&&config.jQuery&&config.jQuery!==callback().fn.jquery)){return }specified[id]=true;loaded[id]=true;if(fullName==="jquery"&&callback){jQueryCheck(callback())}}manager.depArray=depArray;manager.callback=callback;for(i=0;i<depArray.length;i++){depArg=depArray[i];if(depArg){depArg=makeModuleMap(depArg,(name?moduleMap:relModuleMap));depName=depArg.fullName;depPrefix=depArg.prefix;depArray[i]=depName;if(depName==="require"){deps[i]=makeRequire(moduleMap)}else{if(depName==="exports"){deps[i]=defined[fullName]={};manager.usingExports=true}else{if(depName==="module"){manager.cjsModule=cjsMod=deps[i]={id:name,uri:name?context.nameToUrl(name,null,relModuleMap):undefined,exports:defined[fullName]}}else{if(depName in defined&&!(depName in waiting)&&(!(fullName in needFullExec)||(fullName in needFullExec&&fullExec[depName]))){deps[i]=defined[depName]}else{if(fullName in needFullExec){needFullExec[depName]=true;delete defined[depName];urlFetched[depArg.url]=false}manager.depCount+=1;manager.depCallbacks[i]=makeArgCallback(manager,i);getManager(depArg,true).add(manager.depCallbacks[i])}}}}}}if(!manager.depCount){execManager(manager)}else{addWait(manager)}}function callDefMain(args){main.apply(null,args)}jQueryCheck=function(jqCandidate){if(!context.jQuery){var $=jqCandidate||(typeof jQuery!=="undefined"?jQuery:null);if($){if(config.jQuery&&$.fn.jquery!==config.jQuery){return }if("holdReady" in $||"readyWait" in $){context.jQuery=$;callDefMain(["jquery",[],function(){return jQuery}]);if(context.scriptCount){jQueryHoldReady($,true);context.jQueryIncremented=true}}}}};function forceExec(manager,traced){if(manager.isDone){return undefined}var fullName=manager.map.fullName,depArray=manager.depArray,i,depName,depManager,prefix,prefixManager,value;if(fullName){if(traced[fullName]){return defined[fullName]}traced[fullName]=true}if(depArray){for(i=0;i<depArray.length;i++){depName=depArray[i];if(depName){prefix=makeModuleMap(depName).prefix;if(prefix&&(prefixManager=waiting[prefix])){forceExec(prefixManager,traced)}depManager=waiting[depName];if(depManager&&!depManager.isDone&&loaded[depName]){value=forceExec(depManager,traced);manager.depCallbacks[i](value)}}}}return fullName?defined[fullName]:undefined}function checkLoaded(){var waitInterval=config.waitSeconds*1000,expired=waitInterval&&(context.startTime+waitInterval)<new Date().getTime(),noLoads="",hasLoadedProp=false,stillLoading=false,prop,err,manager;if(context.pausedCount>0){return undefined}if(config.priorityWait){if(isPriorityDone()){resume()}else{return undefined}}for(prop in loaded){if(!(prop in empty)){hasLoadedProp=true;if(!loaded[prop]){if(expired){noLoads+=prop+" "}else{stillLoading=true;break}}}}if(!hasLoadedProp&&!context.waitCount){return undefined}if(expired&&noLoads){err=makeError("timeout","Load timeout for modules: "+noLoads);err.requireType="timeout";err.requireModules=noLoads;return req.onError(err)}if(stillLoading||context.scriptCount){if((isBrowser||isWebWorker)&&!checkLoadedTimeoutId){checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0;checkLoaded()},50)}return undefined}if(context.waitCount){for(i=0;(manager=waitAry[i]);i++){forceExec(manager,{})}if(context.paused.length){resume()}if(checkLoadedDepth<5){checkLoadedDepth+=1;checkLoaded()}}checkLoadedDepth=0;req.checkReadyState();return undefined}resume=function(){var manager,map,url,i,p,args,fullName;resumeDepth+=1;if(context.scriptCount<=0){context.scriptCount=0}while(defQueue.length){args=defQueue.shift();if(args[0]===null){return req.onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]))}else{callDefMain(args)}}if(!config.priorityWait||isPriorityDone()){while(context.paused.length){p=context.paused;context.pausedCount+=p.length;context.paused=[];for(i=0;(manager=p[i]);i++){map=manager.map;url=map.url;fullName=map.fullName;if(map.prefix){callPlugin(map.prefix,manager)}else{if(!urlFetched[url]&&!loaded[fullName]){req.load(context,fullName,url);if(url.indexOf("empty:")!==0){urlFetched[url]=true}}}}context.startTime=(new Date()).getTime();context.pausedCount-=p.length}}if(resumeDepth===1){checkLoaded()}resumeDepth-=1;return undefined};context={contextName:contextName,config:config,defQueue:defQueue,waiting:waiting,waitCount:0,specified:specified,loaded:loaded,urlMap:urlMap,urlFetched:urlFetched,scriptCount:0,defined:defined,paused:[],pausedCount:0,plugins:plugins,needFullExec:needFullExec,fake:{},fullExec:fullExec,managerCallbacks:managerCallbacks,makeModuleMap:makeModuleMap,normalize:normalize,configure:function(cfg){var paths,prop,packages,pkgs,packagePaths,requireWait;if(cfg.baseUrl){if(cfg.baseUrl.charAt(cfg.baseUrl.length-1)!=="/"){cfg.baseUrl+="/"}}paths=config.paths;packages=config.packages;pkgs=config.pkgs;mixin(config,cfg,true);if(cfg.paths){for(prop in cfg.paths){if(!(prop in empty)){paths[prop]=cfg.paths[prop]}}config.paths=paths}packagePaths=cfg.packagePaths;if(packagePaths||cfg.packages){if(packagePaths){for(prop in packagePaths){if(!(prop in empty)){configurePackageDir(pkgs,packagePaths[prop],prop)}}}if(cfg.packages){configurePackageDir(pkgs,cfg.packages)}config.pkgs=pkgs}if(cfg.priority){requireWait=context.requireWait;context.requireWait=false;context.takeGlobalQueue();resume();context.require(cfg.priority);resume();context.requireWait=requireWait;config.priorityWait=cfg.priority}if(cfg.deps||cfg.callback){context.require(cfg.deps||[],cfg.callback)}},requireDefined:function(moduleName,relModuleMap){return makeModuleMap(moduleName,relModuleMap).fullName in defined},requireSpecified:function(moduleName,relModuleMap){return makeModuleMap(moduleName,relModuleMap).fullName in specified},require:function(deps,callback,relModuleMap){var moduleName,fullName,moduleMap;if(typeof deps==="string"){if(isFunction(callback)){return req.onError(makeError("requireargs","Invalid require call"))}if(req.get){return req.get(context,deps,callback)}moduleName=deps;relModuleMap=callback;moduleMap=makeModuleMap(moduleName,relModuleMap);fullName=moduleMap.fullName;if(!(fullName in defined)){return req.onError(makeError("notloaded","Module name '"+moduleMap.fullName+"' has not been loaded yet for context: "+contextName))}return defined[fullName]}if(deps&&deps.length||callback){main(null,deps,callback,relModuleMap)}if(!context.requireWait){while(!context.scriptCount&&context.paused.length){context.takeGlobalQueue();resume()}}return context.require},takeGlobalQueue:function(){if(globalDefQueue.length){apsp.apply(context.defQueue,[context.defQueue.length-1,0].concat(globalDefQueue));globalDefQueue=[]}},completeLoad:function(moduleName){var args;context.takeGlobalQueue();while(defQueue.length){args=defQueue.shift();if(args[0]===null){args[0]=moduleName;break}else{if(args[0]===moduleName){break}else{callDefMain(args);args=null}}}if(args){callDefMain(args)}else{callDefMain([moduleName,[],moduleName==="jquery"&&typeof jQuery!=="undefined"?function(){return jQuery}:null])}jQueryCheck();if(req.isAsync){context.scriptCount-=1}resume();if(!req.isAsync){context.scriptCount-=1}},toUrl:function(moduleNamePlusExt,relModuleMap){var index=moduleNamePlusExt.lastIndexOf("."),ext=null;if(index!==-1){ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length);moduleNamePlusExt=moduleNamePlusExt.substring(0,index)}return context.nameToUrl(moduleNamePlusExt,ext,relModuleMap)},nameToUrl:function(moduleName,ext,relModuleMap){var paths,pkgs,pkg,pkgPath,syms,i,parentModule,url,config=context.config;moduleName=normalize(moduleName,relModuleMap&&relModuleMap.fullName);if(req.jsExtRegExp.test(moduleName)){url=moduleName+(ext?ext:"")}else{paths=config.paths;pkgs=config.pkgs;syms=moduleName.split("/");for(i=syms.length;i>0;i--){parentModule=syms.slice(0,i).join("/");if(paths[parentModule]){syms.splice(0,i,paths[parentModule]);break}else{if((pkg=pkgs[parentModule])){if(moduleName===pkg.name){pkgPath=pkg.location+"/"+pkg.main}else{pkgPath=pkg.location}syms.splice(0,i,pkgPath);break}}}url=syms.join("/")+(ext||".js");url=(url.charAt(0)==="/"||url.match(/^\w+:/)?"":config.baseUrl)+url}return config.urlArgs?url+((url.indexOf("?")===-1?"?":"&")+config.urlArgs):url}};context.jQueryCheck=jQueryCheck;context.resume=resume;return context}req=requirejs=function(deps,callback){var contextName=defContextName,context,config;if(!isArray(deps)&&typeof deps!=="string"){config=deps;if(isArray(callback)){deps=callback;callback=arguments[2]}else{deps=[]}}if(config&&config.context){contextName=config.context}context=contexts[contextName]||(contexts[contextName]=newContext(contextName));if(config){context.configure(config)}return context.require(deps,callback)};req.config=function(config){return req(config)};if(!require){require=req}req.toUrl=function(moduleNamePlusExt){return contexts[defContextName].toUrl(moduleNamePlusExt)};req.version=version;req.jsExtRegExp=/^\/|:|\?|\.js$/;s=req.s={contexts:contexts,skipAsync:{}};req.isAsync=req.isBrowser=isBrowser;if(isBrowser){head=s.head=document.getElementsByTagName("head")[0];baseElement=document.getElementsByTagName("base")[0];if(baseElement){head=s.head=baseElement.parentNode}}req.onError=function(err){throw err};req.load=function(context,moduleName,url){req.resourcesReady(false);context.scriptCount+=1;req.attach(url,context,moduleName);if(context.jQuery&&!context.jQueryIncremented){jQueryHoldReady(context.jQuery,true);context.jQueryIncremented=true}};function getInteractiveScript(){var scripts,i,script;if(interactiveScript&&interactiveScript.readyState==="interactive"){return interactiveScript}scripts=document.getElementsByTagName("script");for(i=scripts.length-1;i>-1&&(script=scripts[i]);i--){if(script.readyState==="interactive"){return(interactiveScript=script)}}return null}define=function(name,deps,callback){var node,context;if(typeof name!=="string"){callback=deps;deps=name;name=null}if(!isArray(deps)){callback=deps;deps=[]}if(!deps.length&&isFunction(callback)){if(callback.length){callback.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(match,dep){deps.push(dep)});deps=(callback.length===1?["require"]:["require","exports","module"]).concat(deps)}}if(useInteractive){node=currentlyAddingScript||getInteractiveScript();if(node){if(!name){name=node.getAttribute("data-requiremodule")}context=contexts[node.getAttribute("data-requirecontext")]}}(context?context.defQueue:globalDefQueue).push([name,deps,callback]);return undefined};define.amd={multiversion:true,plugins:true,jQuery:true};req.exec=function(text){return eval(text)};req.execCb=function(name,callback,args,exports){return callback.apply(exports,args)};req.addScriptToDom=function(node){currentlyAddingScript=node;if(baseElement){head.insertBefore(node,baseElement)}else{head.appendChild(node)}currentlyAddingScript=null};req.onScriptLoad=function(evt){var node=evt.currentTarget||evt.srcElement,contextName,moduleName,context;if(evt.type==="load"||(node&&readyRegExp.test(node.readyState))){interactiveScript=null;contextName=node.getAttribute("data-requirecontext");moduleName=node.getAttribute("data-requiremodule");context=contexts[contextName];contexts[contextName].completeLoad(moduleName);if(node.detachEvent&&!isOpera){node.detachEvent("onreadystatechange",req.onScriptLoad)}else{node.removeEventListener("load",req.onScriptLoad,false)}}};req.attach=function(url,context,moduleName,callback,type,fetchOnlyFunction){var node;if(isBrowser){callback=callback||req.onScriptLoad;node=context&&context.config&&context.config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");node.type=type||"text/javascript";node.charset="utf-8";node.async=!s.skipAsync[url];if(context){node.setAttribute("data-requirecontext",context.contextName)}node.setAttribute("data-requiremodule",moduleName);if(node.attachEvent&&!isOpera){useInteractive=true;if(fetchOnlyFunction){node.onreadystatechange=function(evt){if(node.readyState==="loaded"){node.onreadystatechange=null;node.attachEvent("onreadystatechange",callback);fetchOnlyFunction(node)}}}else{node.attachEvent("onreadystatechange",callback)}}else{node.addEventListener("load",callback,false)}node.src=url;if(!fetchOnlyFunction){req.addScriptToDom(node)}return node}else{if(isWebWorker){importScripts(url);context.completeLoad(moduleName)}}return null};if(isBrowser){scripts=document.getElementsByTagName("script");for(i=scripts.length-1;i>-1&&(script=scripts[i]);i--){if(!head){head=script.parentNode}if((dataMain=script.getAttribute("data-main"))){if(!cfg.baseUrl){src=dataMain.split("/");mainScript=src.pop();subPath=src.length?src.join("/")+"/":"./";cfg.baseUrl=subPath;dataMain=mainScript.replace(jsSuffixRegExp,"")}cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain];break}}}req.checkReadyState=function(){var contexts=s.contexts,prop;for(prop in contexts){if(!(prop in empty)){if(contexts[prop].waitCount){return }}}req.resourcesReady(true)};req.resourcesReady=function(isReady){var contexts,context,prop;req.resourcesDone=isReady;if(req.resourcesDone){contexts=s.contexts;for(prop in contexts){if(!(prop in empty)){context=contexts[prop];if(context.jQueryIncremented){jQueryHoldReady(context.jQuery,false);context.jQueryIncremented=false}}}}};req.pageLoaded=function(){if(document.readyState!=="complete"){document.readyState="complete"}};if(isBrowser){if(document.addEventListener){if(!document.readyState){document.readyState="loading";window.addEventListener("load",req.pageLoaded,false)}}}req(cfg);if(req.isAsync&&typeof setTimeout!=="undefined"){ctx=s.contexts[(cfg.context||defContextName)];ctx.requireWait=true;setTimeout(function(){ctx.requireWait=false;ctx.takeGlobalQueue();ctx.jQueryCheck();if(!ctx.scriptCount){ctx.resume()}req.checkReadyState()},0)}}());
// /setup/require.js from cimspire
require.missingModules=[];require.load=(function(A){return function(D,C,B){require.missingModules.push(C);if(typeof console!=="undefined"&&typeof console.warn==="function"){console.warn("Module missing in resource XML:",C)}return A.apply(this,arguments)}}(require.load));
// /lib/communityServiceConfig.js from ui
var tpMediaDataServicePrefix="http://mps.theplatform.com/";var tpRatingDataServicePrefix="http://ratings.community.theplatform.com/rating/";var tpTotalRatingDataServicePrefix="http://totalratings.community.theplatform.com/totalrating/";var tpTagDataServicePrefix="http://tags.community.theplatform.com/tag/";var tpTotalTagDataServicePrefix="http://totaltags.community.theplatform.com/totaltag/";var tpCommentsDataServicePrefix="http://comments.community.theplatform.com/comment/";var tpUserListsDataServicePrefix="http://userlists.community.theplatform.com/userlist/";var tpUserProfilesDataServicePrefix="http://userprofiles.community.theplatform.com/userprofile/";var tpUserDataServicePrefix="https://euid.theplatform.com/idm/";var tpIdentityServicePrefix="https://euid.theplatform.com/idm/";var tpAccessServicePrefix="http://enduser.access.auth.theplatform.com/access/";
// /lib/communityManager.js from ui
var tpMediaDataServicePath="data/Media";var tpRatingMetadataServicePath="metadata/Rating";var tpTotalRatingMetadataServicePath="metadata/TotalRating";var tpTagMetadataServicePath="metadata/Tag";var tpTotalTagMetadataServicePath="metadata/TotalTag";var tpCommentDataServicePath="data/Comment";var tpUserListDataServicePath="data/UserList";var tpUserProfileMetadataServicePath="metadata/UserProfile";var tpUserDataServicePath="data/User";var j$=jQuery.noConflict();CommunityManager=function(){this._initialize.apply(this,arguments)};CommunityManager.index=1;CommunityManager.prototype={_initialize:function(D,F,E,B,C,A){if(D==null||D.length==0){alert("You need to provide the Account URI.");return false}else{this.accountURI=D}if(F==null||F.length==0){this.anonymousUser=true;this.userContext=null}else{if(F.lastIndexOf("/")<(F.length-1)){F+="/"}this.anonymousUser=false;this.userContext=F}this.scriptID="CommunityManager"+CommunityManager.index++;if(typeof E!="undefined"&&E!=null){this.ratingID=E;tpCommunityWidgetManager.registerWidgetDiv(tpCommunityWidgetManager.ratingWidgetTypeName,E)}if(typeof B!="undefined"&&B!=null){this.commentsID=B;tpCommunityWidgetManager.registerWidgetDiv(tpCommunityWidgetManager.commentWidgetTypeName,B)}if(typeof C!="undefined"&&C!=null){this.tagsID=C;tpCommunityWidgetManager.registerWidgetDiv(tpCommunityWidgetManager.tagWidgetTypeName,C)}if(typeof A!="undefined"&&A!=null){this.profileID=A;tpCommunityWidgetManager.registerWidgetDiv(tpCommunityWidgetManager.profileWidgetTypeName,A)}this.isAuthenticated=false},getRatingDivID:function(){return this.ratingID},getCommentsDivID:function(){return this.commentsID},getTagsDivID:function(){return this.tagsID},getProfileDivID:function(){return this.profileID},_userProfile:undefined,_setProfileEvents:[],registerForProfileChange:function(A){this._setProfileEvents.push(A)},getProfile:function(){return this._userProfile},setProfile:function(B){this._userProfile=B;if(this._setProfileEvents.length>0){for(var A=0;A<this._setProfileEvents.length;A++){this._setProfileEvents[A](B)}}},clearProfile:function(){this.setProfile(undefined)},_signInEvents:[],_signOutEvents:[],registerForAuthentication:function(A,B){switch(B||""){case"signIn":this.registerForSignIn(A);break;case"signOut":this.registerForSignOut(A);break;default:this.registerForSignIn(A);this.registerForSignOut(A);break}},registerForSignIn:function(A){this._signInEvents.push(A)},registerForSignOut:function(A){this._signOutEvents.push(A)},signIn:function(B,A,D){var C={username:this.userContext+B,password:A};if(D){this.secondarySignInCallback=D}else{this.secondarySignInCallback=undefined}this._signInTimeoutInterval=setInterval(this._signInTimeout.bindTo(this),5000);this._makeJsonServiceCall(C,tpIdentityServicePrefix+"JSON/Authentication/1.0/signIn","1.0",null,this._signInCallback.bindTo(this))},_signInTimeout:function(){clearInterval(this._signInTimeoutInterval);if(this.secondarySignInCallback){this.secondarySignInCallback({isException:true,message:"Sign in is not currently available."})}},_signInCallback:function(A){clearInterval(this._signInTimeoutInterval);if(this.isException(A)!=true){this.isAuthenticated=true;this.token=A.token;if(A.idleTimeout>0){this.tokenRefreshInterval=setInterval(this._refreshToken.bindTo(this),A.idleTimeout)}else{clearInterval(this.tokenRefreshInterval)}this._getSelfID(this._getSelfIDCallback.bindTo(this))}else{if(this.secondarySignInCallback){this.secondarySignInCallback(A)}}},_getSelfID:function(B){var A={token:this.token};this._makeJsonServiceCall(A,tpIdentityServicePrefix+"JSON/Self/1.0/getSelfID","1.0",null,B||this.errorHandler.bindTo(this))},extractUserName:function(A){return A.substring(A.lastIndexOf("/")+1,A.length)},_getSelfIDCallback:function(A){if(!this.isException(A)){this.selfID=A.userID;this.userName=this.extractUserName(this.selfID);if(this._signInEvents.length>0){for(var B=0;B<this._signInEvents.length;B++){this._signInEvents[B](A)}}}if(this.secondarySignInCallback){this.secondarySignInCallback(A)}},_refreshToken:function(){this.getSelfID()},signInWithToken:function(A){this.token=A},signOut:function(B){var A={token:this.token};this.token=undefined;this.selfID=undefined;this.isAuthenticated=false;this.clearProfile();if(typeof B!="undefined"){this.secondarySignOutCallback=B}else{this.secondarySignOutCallback=undefined}this._makeJsonServiceCall(A,tpIdentityServicePrefix+"JSON/Authentication/1.0/signOut","1.0",null,this._signOutCallback.bindTo(this));clearInterval(this.tokenRefreshInterval)},_signOutCallback:function(A){if(!this.isException(A)){if(this._signOutEvents.length>0){for(var B=0;B<this._signOutEvents.length;B++){this._signOutEvents[B](A)}}}if(this.secondarySignOutCallback){this.secondarySignOutCallback(A)}},authorize:function(A,B,D){var C={"operations[0].instance":A.instance||"*","operations[0].service":A.service||"Community Data Service","operations[0].method":A.method||"*","operations[0].endpoint":A.endpoint||"*"};if(typeof this.token!="undefined"){this._makeJsonServiceCall(C,B+"JSON/Authorization/1.0/authorize",null,"",D,true)}else{this._makeJsonServiceCall(C,B+"JSON/Authorization/1.0/authorize",null,"",D,false)}},addTag:function(D,B,A,E,C){var F={aboutID:D,value:B};this._makeJsonServiceCall(F,E+tpTagMetadataServicePath,null,"create",C||this.errorHandler.bindTo(this))},addRating:function(D,C,A,E,B){var F={aboutID:D,value:C};this._makeJsonServiceCall(F,E+tpRatingMetadataServicePath,null,"create",B||this.errorHandler.bindTo(this))},addComment:function(E,D,H,C,A,F,B){var G={aboutID:E,text:H,userName:D};if(C!=null&&C.length>0){G.url=C}this._makeJsonServiceCall(G,F+tpCommentDataServicePath,null,"create",B||this.errorHandler.bindTo(this))},addUserList:function(D,E,C,A,F,B){var G={itemIDs:C,name:D,context:E};this._makeJsonServiceCall(G,F+tpUserListDataServicePath,null,"create",B||this.errorHandler.bindTo(this))},addUserProfile:function(B,E,D,A,F,C){var G={avatar:D,displayName:B,publicData:"{url:'"+E+"'}"};this._makeJsonServiceCall(G,F+tpUserProfileMetadataServicePath,null,"create",C||this.errorHandler.bindTo(this))},updateUserProfile:function(B,E,D,A,F,C){var G={avatar:D,displayName:B,publicData:"{url:'"+E+"'}"};this._makeJsonServiceCall(G,F+tpUserProfileMetadataServicePath,null,"update",C||this.errorHandler.bindTo(this))},updateUserList:function(F,D,E,C,A,G,B){var H={ID:F,itemIDs:C,name:D,context:E};this._makeJsonServiceCall(H,G+tpUserListDataServicePath,null,"update",B||this.errorHandler.bindTo(this))},getTags:function(B,A,C,E){var D={byAboutID:B,fields:"value",sortFields:"value"};this._makeJsonServiceCall(D,C+tpTagMetadataServicePath,A,null,E)},getRating:function(B,A,C,E){var D={byAboutID:B,fields:"value"};this._makeJsonServiceCall(D,C+tpRatingMetadataServicePath,A,null,E)},getComment:function(B,A,D){var C={fields:"ID,lastModified,userName,url,text,addedByUserID,approved"};this._makeJsonServiceCall(C,B,A,null,D)},getComments:function(C,A,D,G,F,B){var E={byAboutID:C,byApproved:"true",fields:"ID,added,userName,url,text,addedByUserID",sortFields:"added",sortDescending:"true"};if(typeof F!="undefined"&&F!=null){E.startIndex=F;E.listInfo=true}if(typeof B!="undefined"){E.endIndex=B;E.listInfo=true}this._makeJsonServiceCall(E,D+tpCommentDataServicePath,A,null,G)},getTotalTags:function(B,A,C,E){var D={byAboutID:B,fields:"count,value,lastModified",sortFields:"value"};this._makeJsonServiceCall(D,C+tpTotalTagMetadataServicePath,A,null,E)},getTotalTagsByValue:function(B,A,C,E){var D={byValue:this.unsanitize(B,true),fields:"aboutID",sortFields:"lastModified",sortDescending:true,startIndex:1,endIndex:500};this._makeJsonServiceCall(D,C+tpTotalTagMetadataServicePath,A,null,E)},getTotalRating:function(B,A,C,E){var D={byAboutID:B,fields:"average,count"};this._makeJsonServiceCall(D,C+tpTotalRatingMetadataServicePath,A,null,E)},getTopRatings:function(A,B,D){var C={fields:"aboutID",sortFields:"average",sortDescending:true,startIndex:1,endIndex:500};this._makeJsonServiceCall(C,B+tpTotalRatingMetadataServicePath,A,null,D)},getUserList:function(B,A,C,E){var D={byContext:B,fields:"ID,itemIDs"};this._makeJsonServiceCall(D,C+tpUserListDataServicePath,A,null,E)},getUserProfile:function(B,A,C,E){var D={byAboutID:B,fields:"avatar,displayName,publicData,aboutID"};this._makeJsonServiceCall(D,C+tpUserProfileMetadataServicePath,A,null,E)},getUserProfiles:function(B,A,C,E){var D={fields:"avatar,displayName,publicData,aboutID"};this._makeJsonServiceCall(D,C+tpUserProfileMetadataServicePath+"?"+B,A,null,E)},deleteTag:function(C,A,D,B){var E={byValue:A,byAboutID:C};this._makeJsonServiceCall(E,D+tpTagMetadataServicePath,null,"delete",B||this.errorHandler.bindTo(this))},deleteComment:function(C,A,D,B){var E={};this._makeJsonServiceCall(E,C,null,"delete",B||this.errorHandler.bindTo(this))},_makeJsonServiceCall:function(D,C,B,F,E,A){if(typeof A=="undefined"){A=true}if(!this.anonymousUser&&typeof this.token!="undefined"){D.token=this.token}if(A){D.account=this.accountURI}D.type="json";if(B!=null&&B.length>0){D.version=B}if(F!=null&&F.length>0){D.method=F}C+=(C.indexOf("?")!=-1?"&":"?")+"callback=?";return j$.getJSON(C,D,E)},_errors:[],errorHandler:function(A){if(A!=null){if(A.isException==true){this._errors.push(A);if(typeof this._customErrorHandler=="undefined"){alert(A.type+": "+A.message)}else{this._customErrorHandler(A)}}else{if(typeof A=="string"){alert(A)}}}},isException:function(A){return(A!=null&&typeof A.isException!="undefined")?Boolean(A.isException):false},sanitize:function(C,B){var A=C.replace(/&/g,"&amp;");var A=A.replace(/>/g,"&gt;");var A=A.replace(/</g,"&lt;");if(B){A=A.replace(/ /g,"&nbsp;")}return A},unsanitize:function(A,C){var B=A.replace(/&amp;/g,"&");var B=B.replace(/&gt;/g,">");var B=B.replace(/&lt;/g,"<");if(C){B=B.replace(/&nbsp;/g," ")}return B},getContentIndex:function(A){if(typeof A.data.clips!="undefined"){for(var B=0;B<A.data.clips.length;B++){if(A.data.baseClips[B].isAd==false){return B}}}return -1},setContentIDs:function(D){var C="";var H=tpMediaDataServicePrefix+"data/Media/";if(typeof D!="undefined"&&typeof D.length!="undefined"&&D.length>0){contentIDCount=0;for(var F in D){var G=D[F].aboutID;var B=G.indexOf(H);if(B==0){var A=G.substr(B+H.length,G.length-H.length);var E=true;for(i=0;i<A.length;i++){if(A.charAt(i)<"0"||A.charAt(i)>"9"){E=false;break}}if(E){if(C.length==0){C=A}else{C+=","+A}if(++contentIDCount==100){break}}}}}else{C="0"}tpController.refreshReleaseModel("","",null,null,null,["query=ContentIDs|"+C])},_uriPattern:undefined,isUri:function(A){if(this._uriPattern==undefined){this._uriPattern=new RegExp();this._uriPattern.compile("^(http|https)://[A-Za-z0-9]+")}return this._uriPattern.test(A)}};DomFragment=function(C,A){if(typeof C=="string"){var B=document.createElement(C)}else{var B=C}if(typeof A!="undefined"){for(p in A){if(typeof A[p]=="object"){if(typeof B[p]=="undefined"&&p!="toAppend"){B[p]=A[p]}else{if(p=="toAppend"){B._cFrag={};for(ta in A[p]){if(typeof A[p][ta].appendChild!="undefined"){B.appendChild(A[p][ta]);B._cFrag[ta]=A[p][ta]}else{if(typeof A[p][ta][0]!="undefined"){for(i=0;i<A[p][ta].length;i++){if(typeof A[p][ta][0].appendChild!="undefined"){B.appendChild(A[p][ta][0]);B._cFrag[ta]=A[p][ta][0]}}}}}}else{for(np in A[p]){B[p][np]=A[p][np]}}}}else{if(p.toLowerCase()!="class"){B[p]=A[p]}else{B.className=A[p]}}}}return B};Function.prototype.bindTo=function(A){var B=this;return function(){return B.apply(A,arguments)}};
// /lib/communityConnect.js from ui
jQuery(document).ready(function(){if(typeof window.tpCommunityManager!="undefined"){return }if(typeof document.config.tPCommunityAccount!="undefined"&&document.config.tPCommunityAccount!=""&&document.config.tPCommunityAccount=="prod"){window.tpCommunityManager=new CommunityManager("http://mps.theplatform.com/data/Account/710029972","ymoYzncm")}else{window.tpCommunityManager=new CommunityManager("http://mps.theplatform.com/data/Account/735560896","I68ClApz")}});
// /lib/swfobject.js from ui
if(typeof deconcept=="undefined"){var deconcept={}}if(typeof deconcept.util=="undefined"){deconcept.util={}}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil={}}deconcept.SWFObject=function(K,B,L,D,H,I,F,E,C,J){if(!document.getElementById){return }this.DETECT_KEY=J?J:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params={};this.variables={};this.attributes=[];if(K){this.setAttribute("swf",K)}if(B){this.setAttribute("id",B)}if(L){this.setAttribute("width",L)}if(D){this.setAttribute("height",D)}if(H){this.setAttribute("version",new deconcept.PlayerVersion(H.toString().split(".")))}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs)};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true}}if(I){this.addParam("bgcolor",I)}var A=F?F:"high";this.addParam("quality",A);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var G=(E)?E:window.location;this.setAttribute("xiRedirectUrl",G);this.setAttribute("redirectUrl","");if(C){this.setAttribute("redirectUrl",C)}};deconcept.SWFObject.prototype={useExpressInstall:function(A){this.xiSWFPath=!A?"expressinstall.swf":A;this.setAttribute("useExpressInstall",true)},setAttribute:function(A,B){this.attributes[A]=B},getAttribute:function(A){return this.attributes[A]||""},addParam:function(B,A){this.params[B]=A},getParams:function(){return this.params},addVariable:function(B,A){this.variables[B]=A},getVariable:function(A){return this.variables[A]||""},getVariables:function(){return this.variables},getVariablePairs:function(){var C=[];var B;var A=this.getVariables();for(B in A){C[C.length]=B+"="+A[B]}return C},getSWFHTML:function(){var B="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath)}B='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+(this.getAttribute("style")||"")+'"';B+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var F=this.getParams();for(var E in F){B+=[E]+'="'+F[E]+'" '}var D=this.getVariablePairs().join("&");if(D.length>0){B+='flashvars="'+D+'"'}B+="/>"}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath)}B='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+(this.getAttribute("style")||"")+'">';B+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var C=this.getParams();for(var E in C){B+='<param name="'+E+'" value="'+C[E]+'" />'}var A=this.getVariablePairs().join("&");if(A.length>0){B+='<param name="flashvars" value="'+A+'" />'}B+="</object>"}return B},write:function(B){if(this.getAttribute("useExpressInstall")){var A=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(A)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title)}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var C=(typeof B=="string")?document.getElementById(B):B;C.innerHTML=this.getSWFHTML();return true}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"))}}return false}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var E=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var A=navigator.plugins["Shockwave Flash"];if(A&&A.description){E=new deconcept.PlayerVersion(A.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."))}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var B=1;var C=3;while(B){try{C++;B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+C);E=new deconcept.PlayerVersion([C,0,0])}catch(D){B=null}}}else{try{var B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(D){try{var B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");E=new deconcept.PlayerVersion([6,0,21]);B.AllowScriptAccess="always"}catch(D){if(E.major==6){return E}}try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(D){}}if(B!=null){E=new deconcept.PlayerVersion(B.GetVariable("$version").split(" ")[1].split(","))}}}return E};deconcept.PlayerVersion=function(A){this.major=A[0]!=null?parseInt(A[0]):0;this.minor=A[1]!=null?parseInt(A[1]):0;this.rev=A[2]!=null?parseInt(A[2]):0};deconcept.PlayerVersion.prototype.versionIsValid=function(A){if(this.major<A.major){return false}if(this.major>A.major){return true}if(this.minor<A.minor){return false}if(this.minor>A.minor){return true}if(this.rev<A.rev){return false}return true};deconcept.util={getRequestParameter:function(C){var D=document.location.search||document.location.hash;if(C==null){return D}if(D){var B=D.substring(1).split("&");for(var A=0;A<B.length;A++){if(B[A].substring(0,B[A].indexOf("="))==C){return B[A].substring((B[A].indexOf("=")+1))}}}return""}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var B=document.getElementsByTagName("OBJECT");for(var C=B.length-1;C>=0;C--){B[C].style.display="none";for(var A in B[C]){if(typeof B[C][A]=="function"){B[C][A]=function(){}}}}};if(!document.getElementById&&document.all){document.getElementById=function(A){return document.all[A]}}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;
// /lib/flashbrowserstore.js from ui
var fbs={available:false,successVal:"saveSucceeded",fbsInit:false,initCtr:0,init:function(A,D){A=A||"store";D=D||"fbs.testSuccess";var C=this.getEmbeddedSWF(A);if(C){try{console.log("trying to save data");C.saveData("fbsTest","success",D);console.log("embedded swf exists & allows access to saveData")}catch(B){console.log("embedded swf exists but won't allow access to saveData!");if(!fbs.fbsInit&&!tvGridFav.initCalled){if(fbs.initCtr<9){fbs.initCtr++;console.log("attempt "+fbs.initCtr+" to access saveData");setTimeout(function(){fbs.init(A,D)},100)}else{console.log("giving up");tvGridFav.fbsInitFail()}}}}else{console.log("embedded swf does not exist!");tvGridFav.fbsInitFail()}},testSuccess:function(A){if(A==this.successVal){this.available=true}},getEmbeddedSWF:function(A){return $(A)},saveToSO:function(A,B,D){D=D||"fbs.handleSaveCallBack";var C=this.getEmbeddedSWF("store");console.log("attempting to store "+B+" as the value for "+A);C.saveData(A,B,D)},getFromSO:function(A,C){C=C||"fbs.showValue";var B=this.getEmbeddedSWF("store");console.log("attempting to get "+A);B.getData(A,C)},handleSaveCallBack:function(A){if(A==this.successVal){console.log("Data Saved")}else{console.log("Data NOT Saved: "+A)}},showValue:function(A){console.log("-->"+A)}};
// /lib/core.js from ui
function addLoadEvent(A){addEvent(window,"ondomloaded",A)}addLoadEvent(function(){document.config.debugConsole=false;if(typeof console=="undefined"){window.console={log:function(){},info:function(){},warn:function(){},error:function(){}}}window.addLoadEvent=function(A){A()}});function stripComments(E){var B=/\n/g;E=E.replace(B,"");var D=/^\/\*(.*)\*\/$/i;var A=D.exec(E);var C=false;if(A&&A.length){var C=A[1]}return C}function echeck(E){var C=/^(\w|[_.-])+@\w+(\.|-|\w)+$/i;var A=/^.+\.(\w{2}|(com|net|org|edu|int|mil|gov|arpa|biz|aero|name|coop|info|pro|museum))$/i;var B=/^.+@ovm\.comcast\.net$/i;var D=/\.{2}|-{2}|^\.|\.@/i;return !(E.length>100||(E.length>0&&(!A.test(E)||!C.test(E)||B.test(E)||D.test(E))))}(function(){var domloaded=false;var timer;var init=function(){if(domloaded){return }domloaded=true;if(timer){clearInterval(timer)}if(window.ondomloaded){window.ondomloaded()}};if(document.addEventListener){document.addEventListener("DOMContentLoaded",init,false);
/*@cc_on @*/
/*@if (@_win32)
    document.write("<script id=\"__ie_onload\" defer=\"defer\" src=\"javascript:void(0)\"><\/script>");
    var script = document.getElementById("__ie_onload");
    script.onreadystatechange = function() {
      //if (this.readyState == "complete") init();
    }
  /*@end @*/
}if(is_safari){timer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){init()}},10)}window.onload=init})();function addEvent(B,A,C){var D=B[A]||function(){return };B[A]=function(){D();C()}}function cancelEvent(A){if(A===false){return false}A=window.event?window.event:A;if(!A){return false}A.cancelBubble=true;A.returnVal=false;return false}function cancelTrackEvent(A){A=window.event?window.event:A;if(typeof s!="undefined"){s.bc(A)}return cancelEvent(A)}function getPackageContext(D){var A=document.config.dataPackageContext.split("/");var C=(D||"").split("/");A.pop();for(var B=0;B<C.length;B++){if(C[B]==".."){A.pop()}else{if(C[B]=="."){}else{if(C[B]!=""){A.push(C[B])}}}}A.push("doc.xml");return A.join("/")}Object.extend(window,(function(){var A={};function C(F,E){if(typeof A[F]=="undefined"){A[F]=0}var D=A[F];A[F]+=E;return D==0||A[F]==0}function B(E,D){D._each(function(F){if(Element.hasClassName(F.parentNode.parentNode,"ad")&&F.nodeName.toLowerCase()=="iframe"){F.style.position=E?"static":"relative";F.style.left=E?"0":"-9999px"}else{F.style.visibility=E?"visible":"hidden"}})}return{setAdVisibility:function(E){if(!C("ads",E?-1:1)){return }var F=jQuery("div.ad iframe");var D=$A(F);B(E,D);var D=$A(document.getElementsByTagName("select")).findAll(function(G){return Element.hasClassName(G,"hideUnderMore")});B(E,D);var D=$A(document.getElementsByTagName("embed")).findAll(function(G){return(Element.hasClassName(G.parentNode.parentNode,"ad")||Element.hasClassName(G.parentNode,"ad_pad")||Element.hasClassName(G.parentNode.parentNode,"ad_pad"))});B(E,D);var D=$A(document.getElementsByTagName("object")).findAll(function(G){return(Element.hasClassName(G.parentNode.parentNode,"ad")||Element.hasClassName(G.parentNode,"ad_pad")||Element.hasClassName(G.parentNode.parentNode,"ad_pad"))});B(E,D);var D=$A(document.getElementsByTagName("table")).findAll(function(G){return Element.hasClassName(G,"ad_slug_table")});B(E,D);if(D&&D.length>0){D=$A(D[0].parentNode.getElementsByTagName("object"))}B(E,D)},setCoverFlashVisibility:function(F){var E=$("cover");if(!E){return }if(!C("cover",F?-1:1)){return }var D=$A(E.getElementsByTagName("embed"));B(F,D)},setVideoVisibility:function(F){var D=$("inlinePlayerHolder")||$("video-player-holder")||$("videoPlayerContainer")||$("hdplayerdiv")||$("videoChannelPlayerContainer")||$("rss");if(!D){return }if(!C("inlinePlayer",F?-1:1)){return }var E=$A(D.getElementsByTagName("embed"));if(E.length==0){E=$A(D.getElementsByTagName("object"))}B(F,E)},setArticleFlashVisibility:function(F){var E=$("article");if(!E){return }if(!C("article",F?-1:1)){return }var D=$A(E.getElementsByTagName("embed"));if(D.length==0){D=$A(E.getElementsByTagName("object"));if(!D.length){return }}B(F,D)},setFlashVisibility:function(D){setAdVisibility(D);setCoverFlashVisibility(D);setVideoVisibility(D);setArticleFlashVisibility(D)}}})());function easyScrollTo(H,G,B,A){var A=A||function(J){};var E=B*0.02;var F=Animator.interpolate.linear(0,1,E);var C=new Animator(F,B);var D={};D.start={x:window.scrollX,y:window.scrollY};if(document.documentElement){D.start={x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop}}D.factor={x:H-D.start.x,y:G-D.start.y};C.onupdate=function(L){var M=D,J=M.start,K=M.factor;window.scrollTo(J.x+L*K.x,J.y+L*K.y);return true};var I=function(J){easyScrollTo(D.start.x,D.start.y,B,J)};C.oncomplete=function(){A(I)};C.run();return I}function showOverlay(A){var B=new Window("loading");B.onshow=function(){easyScrollTo(0,0,250,function(D){if(win=A()){var C=win.onhide;win.onhide=function(){C.apply(win);D()};win.show()}B.hide();if(typeof win=="undefined"||!win){D()}})};B.show()}function elapsedTimestamp(J,I){var E=60000;var N=E*60;var O=N*24;var B=function(Q,P){return[Q," ",P,(Q==1)?"":"s"," ago"].join("")};var C=new Date(),G=new Date();var F=J.match(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.\d+)?(?:Z|([+-]?\d{2}):(\d{2}))/);if(!F){return I}var K=F[7]?parseInt(F[7],10):0;var L=F[8]?parseInt(F[8],10):0;G.setUTCFullYear(F[1]);G.setUTCMonth(F[2]-1);G.setUTCDate(F[3]);G.setUTCHours(parseInt(F[4],10)-K);G.setUTCMinutes(parseInt(F[5],10)-L);G.setUTCSeconds(F[6]);var M=C.getTime()-G.getTime();var D=Math.round(M/O);var A=Math.round(M/N);var H=Math.round(M/E);if(M<1*E){return"Seconds ago"}if(H<60){return B(H,"minute")}if(A<24){return B(A,"hour")}if(D<2){return B(D,"day")}return I}addLoadEvent(function(){window.__flash__removeCallback=function(A,B){if(A!=null){A[B]=null}}});addLoadEvent(function(){if(!is_ie){return }var B=Element.getByTagClass(document.body,"img","png");var A=/\/ui\/images\/lib\/blank\.gif/;B.each(function(C){if(!A.test(C.src)){C.runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+C.src+"',sizingMethod='image')";C.src="/ui/images/lib/blank.gif"}})});(function(A){var B=function(E,C){for(var F=0;F<C.length;F++){var D=E.length;E[D]=C[F]}return E};if(typeof Function.prototype.context=="undefined"){Function.prototype.context=function(C){var D=this;return function(){return D.apply(C,arguments)}}}if(typeof Function.prototype.curry=="undefined"){Function.prototype.curry=function(){var D=this,C=arguments;return function(){return D.apply(this,B(C,arguments))}}}})(jQuery);jQuery(document).ready(function(){if(typeof $.cookie!="undefined"){$.cookie.remove("tosaccept")}var B=0;var A=setInterval(function(){if(B>=10){clearInterval(A)}else{B++}if(document.cookie.length>0){offset=document.cookie.indexOf("haf=1");if(offset!=-1){var D=document.getElementsByTagName("A");for(var C=0,E=D.length;C<E;C++){if(D[C].innerHTML=="Ad Feedback"){D[C].style.display="none"}}document.cookie="haf=1;domain=.comcast.net;path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT";clearInterval(A)}}},500)});var UserDataEvent={SUCCESS:"userdata_recieved",FAILURE:"userdata_failure"};var UserData=function(){this._uname=null;this._email=null;this._isHsi=false;this.fetchEmail()};jQuery.extend(UserData.prototype,{getUsername:function(){if(this._uname!=null&&this._uname.length>0){return this._uname}else{return null}},getEmail:function(){if(this._email!=null&&this._email.length>0){return this._email}else{return null}},isHsi:function(){return this._isHsi},_responseRecieved:function(A){var B=null;if(jQuery.browser.msie){B=new ActiveXObject("Microsoft.XMLDOM");B.async=false;B.loadXML(A)}else{B=A}this._uname=jQuery("userName",B).text();this._email=jQuery("userEmail",B).text();var C=jQuery("isHsiUser",B).text();(C=="yes")?this._isHsi=true:this._isHsi=false;jQuery(this).trigger(UserDataEvent.SUCCESS)},_errorRecieved:function(A){jQuery(this).trigger(UserDataEvent.FAILURE)},fetchEmail:function(){jQuery.ajax({type:"GET",url:"/user/authkey/service/sessiondecryption/",cache:false,success:this._responseRecieved.context(this),error:this._errorRecieved.context(this)})}});
// /lib/animator.js from ui
var Animator=Class.create();Object.extend(Animator.prototype,{initialize:function(B,A){this.frames=B||[];this.delay=B.length>0?(A/B.length):0;this.display_timer=null;this.onupdate=function(){return true};this.oncomplete=function(){return };this._bound_update_display=this._update_display.bind(this)},is_running:function(){return this.display_timer!=null},run:function(){this.start_time=this.is_running()?0:(new Date()).getTime();this._update_display()},stop:function(A){if(this.display_timer!=null){window.clearTimeout(this.display_timer)}this.display_timer=null;if(!A){this.show_frame(0);this.oncomplete.call(this)}},show_frame:function(A){A=Math.min(this.frames.length-1,Math.max(0,A));return this.onupdate.call(this,this.frames[A])},_update_display:function(){var B=(new Date()).getTime();var D=Math.round((B-this.start_time)/this.delay);var A=this.show_frame(D);var C=(D<this.frames.length-1);if(A&&C){this.display_timer=window.setTimeout(this._bound_update_display,this.delay)}else{this.display_timer=null;this.oncomplete.call(this)}}});Animator.interpolate={_base:function(A,D){var B=[];for(var C=0;C<=A;C++){B.push(D(C))}return B},linear:function(E,A,C){var B=A-E;var D=B/C;return Animator.interpolate._base(C,function(F){return F*D+E})},root:function(D,A,C){var B=A-D;return Animator.interpolate._base(C,function(E){return Math.sqrt(E/C)*B+D})}};
// /lib/tabs.js from ui
var SimpleTabs=Class.create();Object.extend(SimpleTabs.prototype,{initialize:function(){this.onchange=function(){return true};this.tab_ids=Array();this.current_id=0},setup:function(D){for(var B=0;B<this.tab_ids.length;B++){var C=$(this.tab_ids[B]);var A=C.getElementsByTagName("a")[0];if(A){A.onclick=this.update.bind(this,B)}}if(this.tab_ids.length>0){this.update(D)}},update:function(D,B,C){if(D==null){D=this.current_id}if(typeof (C)=="undefined"){C=false}if(!C){if(!this.onchange(D,this.tab_ids[D])){return false}}for(var A=0;A<this.tab_ids.length;A++){this.setState(A,(A==D))}this.current_id=D;cancelEvent(false);return false},setState:function(B,A){Element[A?"addClassName":"removeClassName"](this.tab(B),"active")},tab:function(A){return $(this.tab_ids[A])||false},tab_id:function(A){for(var B=0;B<this.tab_ids.length;B++){if(this.tab_ids[B]==A){return B}}return false}});var TabBar=Class.create();Object.extend(TabBar.prototype,SimpleTabs.prototype);Object.extend(TabBar.prototype,{_tracking:false,initialize:function(B,A){SimpleTabs.prototype.initialize.call(this);this.name=B;this.current_id=(typeof (A)=="number"&&A>=0)?A:0;for(var C=0;tab=$(this.name+"-tab"+C);C++){this.tab_ids[C]=tab.id}this._tracking=false;this.setup();this._tracking=true},setState:function(F,E){SimpleTabs.prototype.setState.call(this,F,E);var A=this.panel(F);if(!A){return }if(E){A.style.display="block";if(this._tracking){var C=this.tab(F);var B=TrackingNode.collectData(C);if(typeof B.pageName=="undefined"||typeof B.module=="undefined"||typeof B.tabText=="undefined"){return }Tracking.resetVars();var D={events:"event13",hier4:TrackingNode.build_hierarchy([B.module[0],B.pageName[0],"tab",B.tabText[0]]),eVar12:[B.pageName[0],B.module[0]+" module",B.tabText[0]+" tab"].join("-")};Tracking.setData(D);s.tl(false,"o",D.eVar12);Tracking.resetVars()}}else{A.style.display="none"}},panel:function(A){return $(this.name+"-panel"+A)||false}});
// /lib/shader.js from ui
var Shader={_opacity:0,_shade:null,initialize:function(){this._shade=document.createElement("div");this._shade.id="shade";this._shade.onclick=function(A){if(Window){Window.hide_all()}return cancelEvent(A)};if(l=document.getElementById("loading")){l.parentNode.insertBefore(this._shade,l)}else{document.body.appendChild(this._shade)}addEvent(window,"onresize",function(){Shader._shade.style.height=parseInt(document.body.offsetHeight)+"px"})},change:function(C,E,D){var D=D||function(){return };var B=Math.max(parseInt(E*0.015),1);var F=Animator.interpolate.linear(this._opacity,C,B);var A=new Animator(F,E);A.onupdate=function(G){Element.setOpacity(Shader._shade,G);Shader._opacity=G;return true};A.oncomplete=function(){if(Shader._opacity==0){Shader._shade.style.display="none";setAdVisibility(true);setCoverFlashVisibility(true);setVideoVisibility(true);setArticleFlashVisibility(true);if(Cover){Cover.run()}}D()};if(C!=0){setAdVisibility(false);setCoverFlashVisibility(true);setVideoVisibility(false);setArticleFlashVisibility(false);if(Cover){Cover.hold()}}window.onresize();this._shade.style.display="block";A.run()}};addLoadEvent(function(){Shader.initialize()});
// /lib/window.js from ui
var Window=Class.create();Object.extend(Window.prototype,{initialize:function(A,B){this.onclose=function(){return true};this.onshow=function(){return };this.onhide=function(){return };this.show_window=function(){this.window.style.display="block"};this.hide_window=function(){this.window.style.display="none"};this.window=$(A);this.close=$(B);this.visible=false;if(this.close){this.close.onclick=(function(){if(this.onclose()){this.hide()}return false}).bind(this)}},_update_display:function(){if(Window.state=="shading"){Window.pending_windows.push(this);return }if(this.visible){this.show_window();this.onshow()}else{this.hide_window();this.onhide()}},set_display:function(A){if(this.visible==A){return }this.visible=A;if(this.visible&&Window.state=="inactive"){Window.state="shading";Shader.change(0.75,250,Window.shader_complete)}this._update_display();if(this.visible){Window.active_windows.push(this)}else{var B=this;Window.active_windows=Window.active_windows.reject(function(C){return C==B})}if(Window.active_windows.length==0){Window.state="inactive";Shader.change(0,250)}},show:function(){this.set_display(true)},hide:function(){this.set_display(false)}});Window.active_windows=[];Window.pending_windows=[];Window.state="inactive";Window.shader_complete=(function(){Window.state="active";this.pending_windows._each(function(A){A._update_display()});this.pending_windows=[];Window.state=Window.active_windows.length>0?"active":"inactive"}).bind(Window);Window.hide_all=function(){this.active_windows._each(function(A){A.hide()})};
// /lib/handlers.js from ui
addLoadEvent(function(){var C=document.getElementsByTagName("a");for(var D=0;D<C.length;D++){assign_handlers(C[D])}var B=document.getElementsByTagName("form");var E=new RegExp("(^|\\s)newwindow(\\s|$)");for(var D=0,A=B.length;D<A;D++){if(!B[D].className.match(E)){continue}B[D].setAttribute("target","_blank")}});function assign_handlers(B){if(B.rel==""){return }var I="",K=B.rel;var G=[/^\s*(\w+)\((.*?)\)/,/^\s*(\w+)/];var D=[],F=[];while(K.length>0&&K!=I){var J,E=null;for(var C=0;C<G.length&&!E;C++){J=G[C];E=K.match(J)}I=K;K=K.replace(J,"");if(!E){continue}var A="handle_"+E[1];var H=E.length>2?E[2].split(/,\s*/):[];if(E.length>2&&E[2].match(/,$/)&&is_ie){H.push("")}if(typeof window[A]=="undefined"){continue}D.push(A);F.push(H)}delete G;delete K;if(D.length==0){return }B.onclick=function(M){var O=true;var M=window.event?window.event:M;for(var N=0;N<D.length;N++){var Q=D[N];M.ret_val=O;var P=[M].concat(F[N]);var L=window[Q].apply(B,P);if(typeof L!="undefined"){O=O&&L}}return O}}function handle_track(A,B){if(typeof s=="undefined"){return }if(A.ret_val==false){Tracking.resetVars();s.tl(this,"o",B)}}function handle_track_load(A,B){if(typeof s=="undefined"){return }Tracking.resetVars();s.tl(this,"o",B);document.location=this.href;return cancelEvent(A)}function handle_slideshow(A){A=A||window.event;var D=Event.findElement(A,"a");var E=D.getAttribute("href");var C=arguments[1]||0;var B=false;if(!E.match(/slideshow\/view/)){return true}if(arguments.length==3){B=arguments[1].split(".");C=arguments[2]||0}showOverlay(function(){return SlideshowWindow.create_window(C,"slideshow",B,E)});return cancelEvent(A)}function handle_photooftheday(A){showOverlay(function(){return SlideshowWindow.create_window(0,"photooftheday")});return cancelEvent(A)}function handle_feedback(A){showOverlay(function(){return FeedbackWindow.create_window()});return cancelEvent(A)}function handle_adfeedback(A,D,B){A=A||window.event;var C=(A.srcElement)?A.srcElement:A.target;C=C.parentNode.parentNode;showOverlay(function(){return AdFeedbackWindow.create_window(D,C)});return cancelEvent(A)}function handle_emailthis(A){showOverlay(function(){return EmailthisWindow.create_window()});return cancelEvent(A)}function handle_remoteapp(L,D,C,E,H,I,J,K,G,A,F){var B=this.id;if(A=="true"){B="dvrfirstuse"}showOverlay(function(){return RemoteDVRWindow.create_window(B,D,C,E,H,I,J,K,G,F)});return cancelEvent(L)}function handle_dvrnav(A){thetab=this.parentNode.id;RemoteDVRWindow.set_tabs(thetab)}function handle_onetimedetails(J,P,Q,D,L,A,E,R,B,G,F,O,N,K,H,C,I){therow=this.parentNode.id;allrows=jQuery(".listing-row");for(var M=0;M<allrows.length;M++){Element.removeClassName(allrows[M],"active");anchor=jQuery(allrows[M]).find("a.record-title")[0];jQuery(anchor).css("color","")}Element.addClassName(therow,"active");RemoteDVRWindow.onetimedetails(P,Q,D,L,A,E,R,B,G,F,O,N,K,H,C,I);return cancelEvent(J)}function handle_rdvraccordion(A){RemoteDVRWindow.rdvraccordion(this);return cancelEvent(A)}function handle_moreservices(A){toggleServices();return cancelTrackEvent(A)}function handle_dashboard(A){return toggleDashboard.call(this)?handle_track.call(this,A):cancelTrackEvent(A)}function handle_assistant(A){toggleAssistant();return cancelEvent(A)}var poppedCalendar=false;function handle_calendar(A){var B=$(this.className);if(B){if(Element.hasClassName(B,"poppedCal")){Element.removeClassName(B,"poppedCal")}else{hide_calendars();Element.addClassName(B,"poppedCal");poppedCalendar=B}addEvent(document.body,"onclick",hide_calendars)}return cancelEvent(A)}function hide_calendars(){if(poppedCalendar){Element.removeClassName(poppedCalendar,"poppedCal")}}var openDropDown=false;function handle_dropdown(A){var B=this;while(B.nodeName!="DL"&&B.nodeName!="BODY"){B=B.parentNode}if(B.nodeName=="DL"){if(Element.hasClassName(B,"open")){Element.removeClassName(B,"open")}else{Element.addClassName(B,"open");openDropDown=B}addEvent(document.body,"onclick",hide_dropdown);return cancelEvent(A)}}function hide_dropdown(){if(openDropDown){Element.removeClassName(openDropDown,"open")}}var defaultFeatures="scrollbars=no,status=no,location=no,toolbar=no,favorites=no,address=no,menubar=no,resizable=yes";var fanFeatures=defaultFeatures+",width=930,height=800";var askFeatures="scrollbars=yes,status=yes,location=no,toolbar=no,favorites=no,address=no,menubar=no,resizable=yes,width=480,height=451";var chatFeatures=defaultFeatures+",width=800,height=600,status=yes,toolbar=yes,scrollbars=yes";var radioFeatures="status=no,resizeable=no,scrollbars=no,toolbar=no,menubar=no,hotkeys=no,width=270,height=395";function handle_fan(A){if(hasRightVersion){window.open(this.href,"fan",fanFeatures);return cancelEvent(A)}else{document.location.href="http://www.comcast.net/flash/"}}function handle_ask(A){window.open(this.href,"ask",askFeatures);return cancelEvent(A)}function handle_chat(A){window.open(this.href,"chat",chatFeatures);return cancelEvent(A)}function handle_radio(A){window.open(this.href,"radio",radioFeatures);return cancelEvent(A)}function handle_external(){this.setAttribute("target","_blank")}function handle_signin(){newhref=this.getAttribute("href")+"?redirectUrl="+document.location;this.setAttribute("href",newhref)}function handle_signout(){deleteCookie("bunchball");newhref=this.getAttribute("href")+"?redirectUrl="+document.location;this.setAttribute("href",newhref)}function handle_email(){this.setAttribute("target","_blank")}function handle_print(A){this.setAttribute("target","_blank")}function handle_abcnewsnow(A){window.open(this.href,"abcnewsnow",defaultFeatures+",width=521,height=520");return cancelTrackEvent(A)}function handle_yahooNhlPlayer(A){window.open(this.href,"yahooNhlPlayer",defaultFeatures+",width=792,height=666");return cancelEvent(A)}function handle_hdcarousel(A,D,B){var C=getFlashMovie("inlineplayer");if(C){C.updateContent(D,B);easyScrollTo(0,172,500);return cancelEvent(A)}return true}function getFlashMovie(B){var A=navigator.appName.indexOf("Microsoft")!=-1;return(A)?window[B]:document[B]}function handle_rhapsody(A,B){if(typeof RhapsodyPlayer=="undefined"){return true}if(typeof B=="undefined"){B=(document.location.hash+"").split("#")[1]}RhapsodyPlayer.playRcid(B);return cancelEvent(A)}function handle_sethomepage(A){if(is_ie){this.setHomePage("http://www.comcast.net");return cancelEvent(A)}if(is_safari){location.href="/sethomesafari/";return cancelEvent(A)}toggle_hp(this.parentNode);return cancelEvent(A)}function toggle_hp(A,B){if(typeof B=="undefined"){B=Element.hasClassName(A,"active")}$(A.id+"-container").style.display=B?"none":"block";A.className=B?"":"active"}addLoadEvent(function(){var B=document.getElementsByTagName("a");for(var C=0;C<B.length;C++){if(B[C].rel&&B[C].rel.indexOf("sethomepage")!=-1){var A=B[C].parentNode.id+"-container";A.onclick=function(D){cancelTrackEvent(D);return true};addEvent(document.body,"onclick",toggle_hp.bind(document.body,B[C].parentNode,true))}}});function handle_set_grid_exact_time(A,B){console.log(B);if(B=="NOW"){B=(new Date()).getTime()}tvGrid.build_grid(B);return cancelEvent(A)}function handle_set_grid_time(B,A){console.log(A);tvGrid.time_update_grid(A);return cancelEvent(B)}function handle_set_grid_filter(A,C){var D=(A.srcElement)?A.srcElement:A.target;console.log(C);if(C.toLowerCase()=="all"||C==tvGrid.filter){jQuery("#gridfilter-capsule dd a:not(#gridfilter-all)").parent().removeClass("active");jQuery(D).parent().addClass("active");tvGrid.filter_update_grid(C);if(C.toLowerCase()=="all"){return cancelEvent(A)}}else{jQuery("#gridfilter-capsule dd a").parent().removeClass("active");jQuery("#gridfilter-capsule dd a:not(#gridfilter-all)").each(function(){var F=jQuery(this).attr("title");F=F.replace("Deactivate","Activate");jQuery(this).attr("title",F)})}var E=jQuery(D).attr("title");var B="Ac";if(E.match(/^Activate\b/)){B="Deac"}E=E.replace(/^(Ac|Deac)(?=tivate\b)/,B);jQuery(D).attr("title",E);jQuery(D).parent().toggleClass("active");if(C!="ALL"){if(jQuery(D).parent().hasClass("active")){jQuery("#gridfilter-all").parent().removeClass("active")}else{jQuery("#gridfilter-all").parent().addClass("active")}}tvGrid.filter_update_grid(C);return cancelEvent(A)}function closePlaxoShare(A){Element.removeClassName(A.parentNode,"poppedShare")}function handle_plaxoshare(A){closePlaxoShare(this);var B=CIM.user.getNow(["isLoggedIn"]);if(B.isLoggedIn){shareWidget.openPopup(true);return cancelEvent(A)}else{this.setAttribute("target","_blank");this.setAttribute("href",this.getAttribute("anonHref"))}}function handle_closeplaxoshare(A){closePlaxoShare(this);return cancelEvent(A)};
// /lib/manglers.js from ui
addLoadEvent(function(){var B=document.getElementsByTagName("a");for(var C=0;C<B.length;C++){mangle_link(B[C])}var A=document.getElementsByTagName("form");for(var C=0;C<A.length;C++){mangle_form(A[C])}});function mangle_link(C){if(typeof C.href!="undefined"){var A=C.href;for(var B=0;B<Mangler.list.length;B++){A=Mangler.list[B].apply(A)}C.href=A}}function mangle_form(B){if(typeof B.action!="undefined"){var C=B.action;for(var A=0;A<Mangler.list.length;A++){C=Mangler.list[A].apply(C)}B.action=C}}var Mangler=Class.create();Object.extend(Mangler.prototype,{initialize:function(A,B){this.re=A;this.func=B;Mangler.list.push(this)},apply:function(A){var A=A+"";return this.re.test(A)?this.func(A):A}});Mangler.list=[];new Mangler({re:/^https{0,1}:\/\/(www.)?fancast.com/,test:function(A){return readCookie("session@comcast.net")!==null&&this.re.test(A)}},function(A){if(document.config.fancastSSO==""||document.config.fancastIsXTV=="true"){return A}var B=A.match(/https?:\/\/(.*?)(\/.*)/);if(!B){return A}return document.config.fancastSSO+"&TARGET="+encodeURI(B[2])});new Mangler(/\/(music|entertainment|sports|finance|tv|news)\/.*?\/slideshow\/view/,function(A){var B=A.match(/\/((music|entertainment|sports|finance|tv|news)\/.*)\/slideshow\/view/);return"/slideshow/"+B[1].replace(/\//g,"-")+"/"});
// /lib/flash.js from ui
var flash2Installed=false;var flash3Installed=false;var flash4Installed=false;var flash5Installed=false;var flash6Installed=false;var flash7Installed=false;var flash8Installed=false;var flash9Installed=false;var maxVersion=9;var actualVersion=0;var requiredVersion=7;var hasRightVersion=false;var jsVersion=1;var isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;var isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;jsVersion=1.1;if(isIE&&isWin){document.write('<SCRIPT LANGUAGE="VBScript"> \n');document.write("on error resume next \n");document.write('flash2Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.2"))) \n');document.write('flash3Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.3"))) \n');document.write('flash4Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.4"))) \n');document.write('flash5Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.5"))) \n');document.write('flash6Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.6"))) \n');document.write('flash7Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.7"))) \n');document.write('flash8Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.8"))) \n');document.write('flash9Installed = (IsObject(CreateObject("ShockwaveFlash.ShockwaveFlash.9"))) \n');document.write("</SCRIPT> \n")}function detectFlash(){if(navigator.plugins){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var isVersion2=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var flashDescription=navigator.plugins["Shockwave Flash"+isVersion2].description;var flashVersion=parseInt(flashDescription.substring(16));flash2Installed=flashVersion==2;flash3Installed=flashVersion==3;flash4Installed=flashVersion==4;flash5Installed=flashVersion==5;flash6Installed=flashVersion==6;flash7Installed=flashVersion==7;flash8Installed=flashVersion==8;flash9Installed=flashVersion>=9}}for(var i=2;i<=maxVersion;i++){if(eval("flash"+i+"Installed")==true){actualVersion=i}}if(navigator.userAgent.indexOf("WebTV")!=-1){actualVersion=4}if(actualVersion<requiredVersion){}else{hasRightVersion=true}}function writeFlash(C,D,E,A,B,F){B=(B==null)?"#FFFFFF":B;F=(F==null)?"opaque":F;document.write("<object classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000' id='"+C+"' width='"+E+"' height='"+A+"'>");document.write('  <param name="allowScriptAccess" value="sameDomain" />');document.write("  <param name='movie' value='"+D+"'>");document.write("  <param name='wmode' value='"+F+"'>");document.write("  <param name='quality' value='high'>");document.write("  <param name='bgcolor' value='"+B+"'>");document.write("  <param name='menu' value='false'>");document.write("  <embed src='"+D+"' bgcolor='"+B+"' name='"+C+"' width='"+E+"' height='"+A+"' wmode='"+F+"' quality='high' menu='false' allowScriptAccess='sameDomain' type='application/x-shockwave-flash' pluginspage='http://www.macromedia.com/go/getflashplayer'></embed>");document.write("</object>")}detectFlash();
// /lib/prefs.js from ui
PrefStore={no_value:"No Value",not_implemented:"Not Implemented",commit:function(){throw this.not_implemented},get:function(A){throw this.not_implemented},set:function(A,B){throw this.not_implemented},remove:function(A){throw this.not_implemented}};CookieStore=Object.compose({},PrefStore,{_name:null,_longevity:null,_buffer:null,_read_cookie:function(){if(this._buffer!=null){return }var A=readCookie(this._name)||"";this._buffer=$H(A.split("&").inject({},function(D,C){var B=C.split("=");D[B[0]]=unescape(B[1]);return D}))},_write_cookie:function(){if(this._buffer==null){return }var A=this._buffer.collect(function(B){if(B.key==""){throw $continue}return[B.key,escape(B.value)].join("=")}).join("&");createCookie(this._name,A,this._longevity)},commit:function(){this._write_cookie();this._buffer=null},get:function(A){this._read_cookie();if(!this._buffer.keys().include(A)){throw this.no_value}return this._buffer[A]},set:function(A,B){this._read_cookie();this._buffer[A]=B},remove:function(A){this._read_cookie();this._buffer=this._buffer.reject(function(B){return B.key==A})}});PersistentCookieStore=Object.compose({},CookieStore,{_name:"prefs",_longevity:1000});SessionCookieStore=Object.compose({},CookieStore,{_name:"session_prefs",_longevity:null});ServerStore=Object.compose({},PrefStore,{commit:function(){PersistentCookieStore.commit()},get:function(A){PersistentCookieStore.get(A)},set:function(A,B){PersistentCookieStore.set(A,B)},remove:function(A){PersistentCookieStore.remove(A)}});Prefs={COOKIE:"persistent",SESSION_COOKIE:"session",SERVER:"server",_stores:{persistent:PersistentCookieStore,session:SessionCookieStore,server:ServerStore},_default_location:"persistent",_search_order:["persistent","session","server"],commit:function(){for(var B=0;B<this._search_order.length;B++){var A=this._search_order[B];this._stores[A].commit()}},get:function(name,fallback){var value;for(var i=0;i<this._search_order.length&&!value;i++){try{var location=this._search_order[i];value=this._stores[location].get(name)}catch(e){if(e!=PrefStore.no_value){throw e}}}if(value){try{return eval("("+value+")")}catch(e){}}return fallback},set:function(B,C,A){var A=A||this._default_location;var C=C.inspect?C.inspect():(C+"");this._stores[A].set(B,C);this.commit()},remove:function(B,A){var A=A||this._default_location;this._stores[A].remove(B);this.commit()},clear:function(A){this._stores[A].clear()},register_store:function(A,B){this[A.toUpperCase()]=A;this._search_order.push(A);this._stores[A]=B},lockout:function(C){var A=this.set;this.set=function(){};try{C()}catch(B){this.set=A;throw B}this.set=A},bundle:function(C){var A=this.commit;this.commit=function(){};try{C()}catch(B){this.commit=A;this.commit();throw B}this.commit=A;this.commit()}};
// /vendor/json2.js from cimspire
var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
// /cookie.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}CIM.cookie=(function(){var D=["browse_alpha","browse_list","browse_locked","tvlistings_signinPrompted","fb_fan","browser_old","browser_osx","user_comcast","user_mecomcast","browse_popular","browse_newest","browserDetection"],N=["rs_activation","rs_devicetype","profile_named_cable_boxes","profile_remote_tuned","profile_watchlist_setup","test_value","skip_idevice_roadblock","skip_launch_promo"],H=["ACTIVATED","ATTEMPTED","NOTSET","DEACTIVATED"],L=["GUIDEWORKS","TIVO","NOTSET"],E,F={domain:".comcast.net",path:"/"};function O(T,R,S){var Q;if(R>T.length-1){Q=T}else{Q=T.substr(0,R)+S+T.substr(R+1)}return Q}function M(R){var Q=new Date();Q.setTime(Q.getTime()+R*86400000);return Q.toGMTString()}function G(R){var Q;if(typeof R==="object"){Q=R.toGMTString()}else{if(typeof R==="string"){Q=R}else{Q=M(R)}}return"; expires="+Q}function I(){var Q=document.location.hostname.split(".");if(Q.length>=2){return"domain=."+Q[Q.length-2]+"."+Q[Q.length-1]}else{return"domain="+F.domain}}function B(U,T,Q){var R="",S;if(CIM.cookie.exists(U)){R=CIM.cookie.read(U);switch(Q){case"rs_activation":return H[R.charAt(T)].toLowerCase();break;case"rs_devicetype":return L[R.charAt(T)].toLowerCase();break;default:S=R.charAt(T);if(S==="1"){return true}else{if(S==="0"){return false}}break}}return }function A(X,W,Q,T,S,U){var R="",V;if(CIM.cookie.exists(X)){R=CIM.cookie.read(X)}while(R.length<=S.length){R+="2"}switch(Q){case"rs_activation":if(P(T.toUpperCase(),H)>-1){V=P(T.toUpperCase(),H)}else{V="2"}break;case"rs_devicetype":if(P(T.toUpperCase(),L)>-1){V=P(T.toUpperCase(),L)}else{V="2"}break;default:V=(T?1:0);break}R=O(R,W,V);if(U==="undefined"||!U){CIM.cookie.write(X,R)}else{CIM.cookie.write(X,R,{days:730})}return T}function C(R,T,W,S,U){var V,Q;if(typeof R==="undefined"){return undefined}V=P(R,S);if(V===-1){return undefined}if(typeof T==="undefined"){return B(W,V,R)}else{return A(W,V,R,T,S,U)}return undefined}function K(Q){return Q.replace(/%/g,"%25").replace(/;/g,"%3B").replace(/=/g,"%3D").replace(/&/g,"%26")}function J(Q){return unescape(Q)}function P(S,T){if(T.indexOf){return T.indexOf(S)}for(var Q=0,R=T.length;Q<R;Q++){if(T[Q]===S){return Q}}return -1}E={write:function(T,W,S){if(typeof W!=="string"){return }var V,U,Q="",R="",X="path="+F.path;S=S||{};if(typeof S.days!=="undefined"){Q=G(S.days)}if(typeof S.path!=="undefined"){X="path="+S.path}if(typeof S.domain!=="undefined"){U="domain="+S.domain}else{U=I()}V=T+"="+W.replace(/;/g,"%3B")+Q+"; "+X+"; "+U;document.cookie=V;return V},remove:function(R,Q){var T={};Q=Q||{};for(var S in Q){if(Q.hasOwnProperty(S)){T[S]=Q[S]}}T.days=-1;this.write(R,"",T);return this},read:function(S){var U,R=document.cookie.split(";"),T,W=S+"=",V=/\s*(.*)/,Q=false;for(T=0;T<R.length;T=T+1){U=R[T].match(V)[1];if(U.indexOf(W)===0){Q=U.substring(W.length,U.length);break}}return Q?J(Q):false},exists:function(Q){return(typeof (this.read(Q))==="string")},canWrite:function(){var Q=false;this.write("t","y",{days:0});if(this.read("t")==="y"){Q=true}this.remove("t");return Q},tempBinaryValue:function(Q,R){return C(Q,R,"b",D)},permBinaryValue:function(Q,R){return C(Q,R,"p",N,true)},setCookieInObject:function(S,R){var V=CIM.cookie.read(S),U,T,Q;if(V){Q=V.split("&");U=Q.length;while(U){U--;T=Q[U].split("=",1)[0];value=Q[U].slice(T.length+1);R[T]=J(value)}return R}return false},decode:function(Q){return this.setCookieInObject(Q,{})},encode:function(R){var S=[],Q;for(Q in R){S.push([Q,K(R[Q])].join("="))}return S.join("&")}};E.get=E.read;E.set=E.write;E.del=E.remove;return E}());
// /exception.js from cimspire
if(typeof CIM=="undefined"){var CIM={}}CIM.exception=(function(){var A={create:function(B,C){var D=function(){var E=new Error();C.apply(E,arguments);E.name=B;return E};A[B]=D;return D}};return A})();
// /curry.js from cimspire
(function(){Function.prototype.curry=function(){var B=this,A=Array.prototype.slice.apply(arguments);return function(){return B.apply(this,Array.prototype.concat.apply(A,arguments))}};Function.prototype.context=function(A){var B=this;return function(){return B.apply(A,arguments)}}})();
// /util/async_call.js from cimspire
if(typeof CIM=="undefined"){CIM={}}if(typeof CIM.util=="undefined"){CIM.util={}}CIM.util.AsyncCall=function(){this.running=0;this.oncomplete=function(){}};CIM.util.AsyncCall.prototype={_finish:function(){if(this.running===0){this.oncomplete()}},queue:function(B){var A=this;this.running++;return B(function(){A.running--;A._finish()})},done:function(A){this.oncomplete=A||function(){};this._finish()}};
// /user/user.js from cimspire
if(typeof CIM=="undefined"){var CIM={}}CIM.user=(function(){if(typeof CIM.user!="undefined"){return CIM.user}var E={},G={};function C(K,J){if(typeof G[K]!="undefined"){throw CIM.exception.DuplicateBackendException(K)}var L=CIM.user.Backend(),I=J(L);L=(typeof I=="undefined")?L:I;if(typeof L.getNow!="undefined"&&typeof L.get=="undefined"){L.get=function(M,N){N(this.getNow(M))}}G[K]=L}function A(L){var K={},J;for(var I=0;I<L.length;I++){J=D.getBackendForKey(L[I]);if(typeof K[J]=="undefined"){K[J]=[]}K[J].push(L[I])}return K}function B(I,P,R){var N=[],L,K;for(L in P){if(typeof D.getBackend(L)[I]=="undefined"){if(P[L] instanceof Array){N=N.concat(P[L])}else{for(K in P[L]){N.push(K)}}}}if(N.length>0){throw CIM.exception.NotImplementedException(I,N)}var M={},O={},Q,S=new CIM.util.AsyncCall(),J=function(U,V,T){return U[I](V,function(X){for(var W in X){if(X.hasOwnProperty(W)){M[W]=X[W]}}T()})};for(L in P){if(P.hasOwnProperty(L)){Q=S.queue(J.curry(D.getBackend(L),P[L]));if(typeof Q!="undefined"){for(K in Q){if(Q.hasOwnProperty(K)){O[K]=Q[K]}}}}}R=R||function(){};S.done(function(){R(M)});return O}var H=0;function F(K,J){var I="_cb"+H+"_"+K;H++;C(I,function(L){L.getKeyData=L.getKeyData.curry(K);if(typeof J.get!="undefined"){L.get=function(M,N){J.get.call(this,function(P){var O={};O[K]=P;N(O)})}}if(typeof J.set!="undefined"){L.set=function(M,N){J.set.call(this,M[K],function(P){var O={};O[K]=P;N(O)})}}if(typeof J.remove!="undefined"){L.remove=function(M,N){J.remove.call(this,function(P){var O={};O[K]=P;N(O)})}}if(typeof J.getNow!="undefined"){L.getNow=function(N){var M={};M[K]=J.getNow.call(this);return M}}});return I}var D={get:function(I,J){B("get",A(I),J)},getNow:function(I){return B("getNow",A(I))},set:function(I,O){var L,K,M=[];for(L in I){if(I.hasOwnProperty(L)){M.push(L)}}var N=A(M),J;for(L in N){if(N.hasOwnProperty(L)){J={};M=N[L];for(K=0;K<M.length;K++){J[M[K]]=I[M[K]]}N[L]=J}}B("set",N,O)},remove:function(I,J){B("remove",A(I),J)},registerKey:function(K,I){if(typeof E[K]=="undefined"){var J;if(typeof I.backend!="undefined"){J=I.backend}else{J=F(K,I)}this.getBackend(J).registerKey(K,I);E[K]=J}else{throw CIM.exception.DuplicateKeyException(K)}},unregisterKey:function(I){if(typeof E[I]!="undefined"){var J=this.getBackendForKey(I);this.getBackend(J).unregisterKey(I);delete E[I]}},getKeyData:function(I){var J=this.getBackendForKey(I);return this.getBackend(J).getKeyData(I)},getKeyList:function(){var J=[];for(var I in E){if(E.hasOwnProperty(I)){J.push(I)}}return J},registerBackend:function(J,I){if(J[0]=="_"){throw CIM.exception.InvalidBackendNameException(J)}C(J,I)},unregisterBackend:function(I){if(typeof G[I]!="undefined"){var K=this.getBackend(I).getKeyList();for(var J=0;J<K.length;J++){this.unregisterKey(K[J])}delete G[I]}},getBackend:function(I){if(typeof G[I]=="undefined"){throw CIM.exception.MissingBackendException(I)}return G[I]},getBackendList:function(){var J=[];for(var I in G){if(G.hasOwnProperty(I)&&I[0]!="_"){J.push(I)}}return J},getBackendForKey:function(I){if(typeof E[I]=="undefined"){throw CIM.exception.MissingKeyException(I)}return E[I]}};return D})();CIM.user.Backend=function(){var A={};return{registerKey:function(C,B){if(typeof A[C]=="undefined"){A[C]=B}else{throw CIM.exception.DuplicateKeyException(C)}},unregisterKey:function(B){if(typeof A[B]!="undefined"){delete A[B]}},getKeyData:function(B){if(typeof A[B]=="undefined"){throw CIM.exception.MissingKeyException(B)}else{return A[B]}},getKeyList:function(){var C=[];for(var B in A){if(A.hasOwnProperty(B)){C.push(B)}}return C}}};if(typeof CIM.user.BackendBuilders=="undefined"){CIM.user.BackendBuilders={}}CIM.user.BackendBuilders.ReadOnly=function(A){return function(C){var B=A(C);if(typeof B!="undefined"){C=B}C.set=function(D,G){var F={};for(var E in D){if(D.hasOwnProperty(E)){F[E]=false}}G(F)};C.remove=function(F,G){var E={};for(var D=0;D<F.length;D++){E[F[D]]=false}G(E)}}};CIM.exception.create("MissingKeyException",function(A){this.message="Attempt to access unknown key: '"+A+"'"});CIM.exception.create("MissingBackendException",function(A){this.message="Attempt to get unknown backend: '"+A+"'"});CIM.exception.create("DuplicateKeyException",function(A){this.message="Attempt to create duplicate key: '"+A+"'"});CIM.exception.create("DuplicateBackendException",function(A){this.message="Attempt to create duplicate backend: '"+A+"'"});CIM.exception.create("InvalidBackendNameException",function(A){this.message="Attempt to create backend with invalid name: '"+A+"'"});CIM.exception.create("NotImplementedException",function(B,A){this.message="'"+B+"' is not implemented";if(typeof A!="undefined"){this.message+=" for keys: "+A.join(", ")}});
// /user/cookie.js from cimspire
CIM.user.BackendBuilders.Cookie=(function(){function A(C,B){var D=B.getKeyData(C);return(typeof D.store_as=="undefined")?C:D.store_as}return function(C,B){B=B||{};var E=B.parse||function(G){return G},F=B.stringify||function(G){return G};function D(){return CIM.cookie.decode(C)||{}}return function(G){G.set=function(I,M){var K={},H=D();for(var J in I){if(I.hasOwnProperty(J)){H[A(J,this)]=F(I[J]);K[J]=true}}var L=CIM.cookie.encode(H);CIM.cookie.write(C,L,B);M(K)};G.getNow=function(M){var L={},I=D(),K,N,H;for(var J=0;J<M.length;J++){K=M[J];N=this.getKeyData(K);keyName=A(K,this);if(typeof I[keyName]!="undefined"){L[K]=E(I[keyName])}else{if(typeof N.default_value!="undefined"){L[K]=N.default_value}}}return L};G.remove=function(L,O){var K={},H=D(),J;for(var I=0;I<L.length;I++){try{J=L[I];delete H[A(J,this)]}catch(N){}K[J]=true}var M=CIM.cookie.encode(H);CIM.cookie.write(C,M,B);O(K)}}}})();
// /cim.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}if(!window.JSON){jQuery.ajax({async:false,url:settings.staticFile+"/cimspire/js/vendor/json2.js"})}CIM.fake=function(){jQuery.ajax({url:settings.staticFile+"/cimspire/js/cim.fake.js"})};Array.prototype.forEach=Array.prototype.forEach||function(D,E){if(!this.splice){return }var C,B,A;C=E||window;for(B=0,A=this.length;B<A;++B){D.call(C,this[B],B,this)}};Array.prototype.every=Array.prototype.every||function(D,E){if(!this.splice){return }var C,B,A;C=E||window;for(B=0,A=this.length;B<A;++B){if(!D.call(C,this[B],B,this)){return false}}return true};Array.prototype.some=Array.prototype.some||function(D,E){if(!this.splice){return }var C,B,A;C=E||window;for(B=0,A=this.length;B<A;++B){if(D.call(C,this[B],B,this)){return true}}return false};Array.prototype.map=Array.prototype.map||function(E,F){if(!this.splice){return }var D,A,C,B;D=F||window;A=[];for(C=0,B=this.length;C<B;++C){A.push(E.call(D,this[C],C,this))}return A};Array.prototype.filter=Array.prototype.filter||function(E,F){if(!this.splice){return }var D,A,C,B;D=F||window;A=[];for(C=0,B=this.length;C<B;++C){if(!E.call(D,this[C],C,this)){continue}A.push(this[C])}return A};Array.prototype.indexOf=Array.prototype.indexOf||function(C,D){if(!this.splice){return }var B,A;D=D||0;for(B=D,A=this.length;B<A;++B){if(this[B]===C){return B}}return -1};Array.prototype.lastIndexOf=Array.prototype.lastIndexOf||function(B,C){if(!this.splice){return }var A;C=C||this.length;if(C>=this.length){C=this.length}if(C<0){C=this.length+C}for(A=C;A>=0;--A){if(this[A]===B){return A}}return -1};Array.prototype.remove=Array.prototype.remove||function(C,B){var A=this.slice((B||C)+1||this.length);this.length=C<0?this.length+C:C;return this.push.apply(this,A)};String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};if(!Function.prototype.curry){Function.prototype.curry=function(){var B=this,A=Array.prototype.slice.apply(arguments);return function(){return B.apply(this,Array.prototype.concat.apply(A,arguments))}}}if(!Function.prototype.bind){Function.prototype.bind=function(B){var C=this,A=Array.prototype.slice.call(arguments,1);return function(){return C.apply(B,A.concat(Array.prototype.slice.call(arguments)))}}}Date.now=Date.now||function(){return new Date().valueOf()};
// /cim.browser.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}CIM.browser=(function(win,ua,platform,doc){var animations=(function(){var style=doc.getElementsByTagName("html")[0].style;return{animation:"animationName" in style||"webkitAnimationName" in style||"MozAnimationName" in style||"OAnimationName" in style||"msAnimationName" in style,transition:"transition" in style||"webkitTransition" in style||"MozTransition" in style||"OTransition" in style||"msTransition" in style}})(),inputs=(function(){var api={},input=doc.createElement("input"),inputAttr="autocomplete autofocus list placeholder max min multiple pattern required step".split(" "),attr,i;for(i=inputAttr.length;i;){i--;attr=inputAttr[i];api[attr]=attr in input}return api})(),storage=(function(){var type,storage={session:false,local:false};for(type in storage){storage[type]=(function(){try{return type+"Storage" in win&&win[type+"Storage"]!==null}catch(e){return false}})()}return storage})(),workers={shared:!!win.SharedWorker,web:!!win.Worker},browser={},api={isAndroid:/Android/.test(ua),isBlackBerry:platform==="BlackBerry",isBolt:/BOLT/.test(ua),isChrome:!!win.chrome,isFirefox:!!doc.styleSheetSets,isGoogleBot:/Google Web Preview|Googlebot|Mediapartners-Google|AdsBot-Google/.test(ua),isIEMobile:/IEMobile/.test(ua),isIPad:/iPad/.test(platform),isIPhone:/iPhone/.test(platform),isIPod:/iPod/.test(platform),isITouch:/iTouch/.test(platform),isMac:/macintosh/i.test(ua),isOpera:!!win.opera,isRhino:/rhino/i.test(ua),isSafari:win.toString()==="[object DOMWindow]"&&!win.chrome,isSafariMobile:/Mobile/.test(ua)&&(/Safari/.test(ua)),isWindows:/windows|win32/i.test(ua),isWebOs:/(webOS|hpwOS)[\s\/]([\d.]+)/.test(ua),supportsAudio:!!doc.createElement("audio").canPlayType,supportsCanvas:!!doc.createElement("canvas").getContext,supportsHashChange:"onhashchange" in win&&(doc.documentMode===undefined||doc.documentMode>7),supportsIndexDB:!!win.indexedDB||!!win.webkitIndexedDB||!!win.mozIndexedDB||!!win.oIndexedDB||!!win.msIndexedDB,supportsGeolocation:!!navigator.geolocation,supportsTouch:"ontouchstart" in win,supportsVideo:!!doc.createElement("video").canPlayType,supportsWebSocket:!!win.WebSocket};api.isMobileGoogleBot=api.isGoogleBot&&(/mobile/i).test(ua);api.isIE=function(v){
/*@cc_on
            var
                mode = doc.documentMode,
                ieVer = (doc.documentElement.toString() === '[object]' && mode === 7) || @_jscript_version === 5.7 ? 7 : mode || 6;
            return v === ieVer || !v;
        @*/
return false};api.isIOS=api.isIPhone||api.isIPad||api.isIPod||api.isITouch;api.isOperaMobile=api.isOpera&&(/Pike/.test(platform)||(/Opera Mini/.test(ua))||(/Opera Mobi/.test(ua)));api.isAndroidTablet=api.isAndroid&&((/S[C|G]H-I.*\/FROYO/.test(ua))||(/Xoom/.test(ua)));api.supportsCssAnimations=function(type){return(type)?(animations[type]||false):animations.transition&&animations.animation};api.supportsES5=function(){var ES5=false;try{ES5=!!Function("[].try")}catch(e){}return ES5};api.supportsInput=function(type){return inputs[type]||false};api.supportsMediaQueries=(function(){var supported=!!win.matchMedia;if(!supported){var html=doc.getElementsByTagName("html")[0],style=doc.createElement("style"),rule="html { top:0; } @media (min-width:0px) { html { top:auto; } }";style.setAttribute("type","text/css");doc.getElementsByTagName("head")[0].appendChild(style);style.styleSheet?style.styleSheet.cssText=rule:style.innerHTML=rule;supported=(html.currentStyle||(!!win.getComputedStyle&&win.getComputedStyle(html,null))||{}).top==="auto";doc.getElementsByTagName("head")[0].removeChild(style)}return supported})();api.supportsStorage=function(type){return(type)?(storage[type]||false):storage.session&&storage.local};api.supportsWorkers=function(type){return(type)?(workers[type]||false):workers.shared&&workers.web};api.isPhone=function(){return api.isIPhone||api.isIPod||api.isITouch||api.isBlackberry||api.isOperaMobile||(api.isAndroid&&!api.isAndroidTablet)||api.isBolt||api.isIEMobile||api.isWebOs};api.isTablet=function(){return api.isIPad||api.isAndroidTablet};api.isMobile=function(){return browser.isTablet()||browser.isPhone()};api.CIMVideoCapable=function(){return browser.isIOS()?false:true};for(var key in api){if(typeof api[key]==="boolean"){browser[key]=(function(key){return function(){return api[key]}})(key)}else{browser[key]=api[key]}}return browser})(window,navigator.userAgent,navigator.platform,document);if(typeof define==="function"&&define.amd){define("cimspire/cim.browser",[],function(){return CIM.browser})};
// /cim.storage.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}CIM.storage=(function(){var E={},A=["session","local"],D=0,I=A.length,C=function(){return false},B={setItem:"",getItem:"",removeItem:"",clear:"",key:"",length:""},F=function(){for(var J=this.length;0<=J;J--){this.removeItem(this.key(J))}},G=function(L,O){var K=function(P){P.begin()},N=function(P){P.commit()},J=function(Q,R,P){P=P||{};if(!P.expires){return }if(P.expires.constructor===Date){P.expires=P.expires.getTime()}else{if(P.expires.constructor===Number){P.expires*=60000;P.expires+=Date.now()}else{return }}R.setItem(Q+"_expires",P.expires)},M=function(Q,R){var P=R.getItem(Q+"_expires");return(P&&P<Date.now())};if(!O.begin){K=C}if(!O.commit){N=C}if(O.clear){O.clear=F}if(L!=="local"){M=C;J=C}return{clear:function(){O.clear();return this},del:function(P){O.removeItem(P);return this},get:function(Q){var P="";if(Q in B){Q="_"+Q+"_"}if(!M(Q,O)){P=unescape(O.getItem(Q));try{P=JSON.parse(P.value||P||'""')}catch(R){}}else{this.del(Q)}return P},key:function(P){return O.key(P)||""},length:function(){return O.length},set:function(Q,R,P){if(Q in B){Q="_"+Q+"_"}K(O);try{J(Q,O,P);O.setItem(Q,JSON.stringify(R))}catch(S){return false}N(O);return true}}};for(;D<I;D++){var H=A[D];E[H]=CIM.browser.supportsStorage(H)?(G)(H,window[H+"Storage"]):CIM.cookie}return E})();
// /user/aws.js from cimspire
CIM.user.BackendBuilders.AWS=(function(E){function B(H,G){var I=G.getKeyData(H);return(typeof I.store_as=="undefined")?H:I.store_as}function D(G){var I={};for(var H in G){if(G.hasOwnProperty(H)){I[H]=G[H]}}return I}function C(G){var J=[],I;for(var H in G){if(G.hasOwnProperty(H)){I=G[H].replace(/%/g,"%25").replace(/;/g,"%3B").replace(/=/g,"%3D").replace(/&/g,"%26");J.push(H+"="+I)}}return J.join("&")}function F(K){var H,G={},J=K.split("&");for(var I=0;I<J.length;I++){H=J[I].split("=");G[H[0]]=unescape(H[1])}return G}function A(J,G){var I="";for(var H in G){if(G.hasOwnProperty(H)){I+=["--"+J,'Content-Disposition: form-data; name="'+H+'"',"",G[H],""].join("\r\n")}}return I+"--"+J+"--"}return function(I){I=I||{};var G=null,J=I.parse||function(M){return M},L=I.stringify||function(M){return M};function K(M){if(G!==null){M(D(G));return }CIM.user.get(["isLoggedIn","guid"],function(N){if(!N.isLoggedIn){G={};M({});return }E.ajax({cache:false,type:"GET",url:"/user/authkey/service/amazonget/",data:{guid:N.guid,service:I.bucket,fmt:"xml",ts:(new Date()).getTime()},dataType:"xml",success:function(P){var O=E(P).find(I.url_node).text().replace(/https:\/\/.*?\//,I.aws_root);E.ajax({cache:false,type:"GET",url:O,dataType:"text",success:function(Q){G=F(Q);M(D(G))},error:function(){G={};M({})}})},error:function(){G={};M({})}})})}function H(M,N){CIM.user.get(["isLoggedIn","guid"],function(O){if(!O.isLoggedIn){N(false);return }E.ajax({url:"/user/authkey/service/amazonpost/",data:{guid:O.guid,service:I.bucket,fmt:"xml",ts:(new Date()).getTime()},type:"GET",success:function(Q){Q=E(Q);var R=parseInt(2147483647*Math.random(),10).toString(),P={key:"uploads/"+Q.find("encryptedGuid").text(),policy:Q.find("policy").text(),signature:Q.find("signature").text(),AWSAccessKeyId:Q.find("accessKey").text(),acl:"private","Content-Type":"text/plain",file:C(M)};E.ajax({url:I.aws_root,type:"POST",contentType:"multipart/form-data; boundary="+R,processData:false,data:A(R,P),success:function(){G=M;N(true)},error:function(){N(false)}})},error:function(){N(false)}})})}return function(N){var M=this;N.get=function(P,Q){var O=this;K(function(R){var U,V,T={};for(var S=0;S<P.length;S++){U=P[S];V=O.getKeyData(U);keyName=B(U,O);if(typeof R[keyName]!="undefined"){T[U]=J(R[keyName])}else{if(typeof V.default_value!="undefined"){T[U]=V.default_value}}}Q(T)})};N.set=function(P,Q){var O=this;K(function(S){var R={},U={};for(var T in P){if(P.hasOwnProperty(T)){S[B(T,O)]=L(P[T]);R[T]=true;U[T]=false}}H(S,function(V){Q(V?R:U)})})};N.remove=function(P,Q){var O=this;K(function(S){var R={},V={},U;for(var T=0;T<P.length;T++){U=P[T];delete S[B(U,O)];R[U]=true;V[U]=false}H(S,function(W){Q(W?R:V)})})}}}})(jQuery);
// /user/unified_user.js from cimspire
CIM.user.BackendBuilders.UnifiedUser=(function(F){function C(N,M){var O=M.getKeyData(N);return(typeof O.store_as=="undefined")?N:O.store_as}function J(M){var O={};for(var N in M){if(M.hasOwnProperty(N)){O[N]=M[N];if(O[N]!==null&&O[N].constructor===Object){O[N]=J(O[N])}}}return O}function A(P,O){var N=P.callbacks;for(var M=0;M<N.length;M++){N[M](O)}P.callbacks=[]}function L(P,O){var Q=O.split("."),N=Q.shift();if(typeof P=="undefined"){return }if(N===""){return P}var M=P[N];if(Q.length===0){return M}else{return L(M,Q.join("."))}}function I(Q,O,P){var S=O.split("."),T=S.pop(),N=S.join("."),M=L(Q,N);if(typeof M=="undefined"){var R={};R[T]=P;return I(Q,N,R)}else{M[T]=P;return true}}function K(P,N,M){var R=M.getKeyData(N),O=C(N,M),Q=L(P,O);if(typeof Q!="undefined"){return Q}else{if(typeof R.default_value!="undefined"){return R.default_value}else{return }}}function G(N,O,P,Q){var M=CIM.user.getNow(["isLoggedIn","hashed_guid","cache_buster"]);if(!M.isLoggedIn){Q(false,{})}else{F.ajax({method:"GET",async:O,url:N,data:F.extend(P,{p:M.hashed_guid,ts:M.cache_buster}),dataType:"json",success:function(R){Q(false,R.UnifiedVal||{})},error:function(){Q(true,{})}})}}function B(M,N){N=N||function(){};if(M.cache){N(J(M.cache))}else{M.callbacks.push(N);if(!M.loading){M.loading=true;G(M.options.getUrl,true,{},function(O,P){M.loading=false;M.cache=P;A(M,J(P))})}}}function D(M){if(!M.cache){M.loading=true;G(M.options.getUrl,false,{},function(N,O){M.loading=false;M.cache=O;A(M,J(O))})}return J(M.cache)}function H(M,N){M.pendingSets.push(N);if(!M.setsPending){E(M);M.setsPending=true}}function E(M){if(M.pendingSets.length>0){var N=M.pendingSets.pop();N();return true}else{M.setsPending=false;return false}}return function(M){var N={cache:null,loading:false,setsPending:false,sendFlush:false,callbacks:[],pendingSets:[],options:M||{}};N.options.bucketSetters=N.options.bucketSetters||{};return function(O){O.getNow=function(S){var U=D(N),R,T,Q={};for(var P=0;P<S.length;P++){R=S[P];T=K(U,R,this);if(typeof T!="undefined"){Q[R]=T}}return Q};O.get=function(Q,R){var P=this;B(N,function(W){var U,V,T={};for(var S=0;S<Q.length;S++){U=Q[S];V=K(W,U,P);if(typeof V!="undefined"){T[U]=V}}R(T)})};O.set=function(Q,R){var P=this;H(N,function(){B(N,function(U){var V={},S,Z,a,W,T={};for(var Y in Q){if(Q.hasOwnProperty(Y)){S=P.getKeyData(Y);Z=C(Y,P);V[Y]=false;if(I(U,Z,Q[Y])){a=Z.split(".");while(a.length>0){W=a.join(".");if(typeof N.options.bucketSetters[W]=="undefined"){a.pop()}else{T[W]=T[W]||[];T[W].push(Y);break}}}}}function X(b){R(b);if(!E(N)&&N.sendFlush){N.sendFlush=false;if(typeof User!="undefined"&&typeof User.flush!="undefined"){User.flush()}else{G(N.options.getUrl,true,{flush:true},function(){CIM.user.set({cache_buster:(new Date()).getTime()},function(){})})}}}CIM.user.get(["isLoggedIn"],function(b){if(!b.isLoggedIn){X(V)}else{var d=new CIM.util.AsyncCall(),e=function(g,h,f){var i=L(U,g),j=N.options.bucketSetters[g];j(N.options,i,function(l){if(l){for(var k=0;k<h.length;k++){V[h[k]]=true}N.sendFlush=true;I(N.cache,g,i)}f()})};for(var c in T){if(T.hasOwnProperty(c)){d.queue(e.curry(c,T[c]))}}d.done(function(){X(V)})}})})})};O.options=function(P){if(typeof P=="undefined"){return N.options}else{F.extend(N.options,P)}};O.rawData=function(P){if(typeof P=="undefined"){return N.cache}else{N.cache=P}}}}}(jQuery));
// /user/registry.js from cimspire
if(typeof CIM.user.BackendBuilders.CustomerRecord!="undefined"){CIM.user.registerBackend("customerRecord",CIM.user.BackendBuilders.CustomerRecord({url:"/xtv/authkey/customerRecord"}));CIM.user.registerKey("userAccounts",{backend:"customerRecord"});CIM.user.registerKey("currentAccount",{get:function(A){CIM.user.get(["userAccounts","email"],function(B){var D=B.userAccounts?B.userAccounts.length:0;for(var C=0;C<D;C++){if(B.userAccounts[C].uid===B.email){A(B.userAccounts[C]);return }}A()})}});CIM.user.registerKey("billing",{backend:"customerRecord"});CIM.user.registerKey("lastUpdate",{backend:"customerRecord"})}if(typeof CIM.user.BackendBuilders.Cookie!="undefined"){CIM.user.registerKey("isLoggedIn",{getNow:function(){return CIM.cookie.exists("MYPORTAL")}});CIM.user.registerKey("cache_buster",{getNow:function(){var A;if(typeof CIM.cookie!="undefined"){if(CIM.cookie.exists("usp_v")){A=CIM.cookie.read("usp_v")}else{if(CIM.cookie.exists("fav_v")){A=CIM.cookie.read("fav_v")}}}if(!A){A=(new Date()).getTime()}CIM.user.set({cache_buster:A},function(){});return A},set:function(A,B){if(typeof CIM.cookie!="undefined"){CIM.cookie.write("usp_v",A.toString());B(true)}else{B(false)}}});CIM.user.registerBackend("prefs",CIM.user.BackendBuilders.Cookie("prefs",{days:1000,parse:JSON.parse,stringify:JSON.stringify}));CIM.user.registerKey("pagemsg.state",{backend:"prefs",store_as:"pmv"});CIM.user.registerKey("local.zip",{backend:"prefs",store_as:"z"});CIM.user.registerKey("adt_zip",{backend:"prefs"});CIM.user.registerKey("adt_optout_flag",{backend:"prefs"});CIM.user.registerKey("adt_optout_ts",{backend:"prefs",store_as:"a_oot"});CIM.user.registerKey("adt_optin_ts",{backend:"prefs",store_as:"a_oit"});CIM.user.registerKey("adt_user_guid",{backend:"prefs",store_as:"a_g"});CIM.user.registerKey("amcid_local",{backend:"prefs",store_as:"amcid"});CIM.user.registerKey("amts_local",{backend:"prefs",store_as:"amts"});CIM.user.registerBackend("myportal",CIM.user.BackendBuilders.ReadOnly(CIM.user.BackendBuilders.Cookie("MYPORTAL")));CIM.user.registerKey("email",{backend:"myportal",store_as:"em"});CIM.user.registerKey("account_zip",{backend:"myportal",store_as:"zip"});CIM.user.registerKey("greeting",{backend:"myportal",store_as:"gt"});CIM.user.registerKey("guid",{backend:"myportal"});CIM.user.registerKey("hashed_guid",{backend:"myportal",store_as:"tid"});CIM.user.registerKey("dvc_status",{backend:"myportal",store_as:"cdvs"});CIM.user.registerKey("comcastUser",{getNow:function(){var A=CIM.user.getNow(["guid"]);if(!A.guid){return false}return !(A.guid.indexOf("urn:uuid")>=0)}})}if(typeof CIM.user.BackendBuilders.AWS!="undefined"){CIM.user.registerBackend("adtargeting",CIM.user.BackendBuilders.AWS({bucket:"dotnetpref",url_node:"signedPrefUrl",aws_root:"/aws/dotnetpref/",parse:JSON.parse,stringify:JSON.stringify}));CIM.user.registerKey("adtarget_optout_ts_aws",{backend:"adtargeting",store_as:"adtarget_optout_ts"});CIM.user.registerKey("adtarget_optout_flag_aws",{backend:"adtargeting",store_as:"adtarget_optout_flag",default_value:false});(function(B){var A=null;CIM.user.registerKey("amcid_cloud",{get:function(C){if(A!==null){C(A);return }CIM.user.get(["isLoggedIn"],function(D){if(!D.isLoggedIn){A="NONE";C(A);return }B.ajax({cache:false,type:"GET",url:"/user/authkey/service/addmarketing/",data:{fmt:"xml"},dataType:"xml",success:function(F){var E=B(F).find("hossResponse");if(E.length===0){A="NONE";C(A)}else{A=JSON.parse(E.text()).targetIds.join(",");C(A)}},error:function(){A="NONE";C(A)}})})}})})(jQuery)}if(typeof CIM.user.BackendBuilders.UnifiedUser!="undefined"){(function(C){function B(D){return function(E,F,G){CIM.user.get(["hashed_guid","cache_buster"],function(H){C.ajax({cache:false,method:"GET",url:E.setUrl,dataType:"json",data:{method:"put",p:H.hashed_guid,cacheBuster:H.cache_buster,attr:D,val:JSON.stringify(F)},success:function(){G(true)},error:function(){G(false)}})})}}function A(){return function(E,F,G){var D=(new Date()).getTime();delete F.cache;C.ajax({type:"POST",contentType:"application/json",url:E.setTvUrl+"?"+D,data:JSON.stringify(F),success:function(){G(true)},error:function(){G(false)}})}}CIM.user.registerBackend("unified_user",CIM.user.BackendBuilders.UnifiedUser({getUrl:"/xtv/authkey/user",setUrl:"/xtv/authkey/uis/profile",setTvUrl:"/vodservice/rest/tv/user",bucketSetters:{"uisProfile.onboarding":B("onboarding"),"uisProfile.xfinity":B("xfinity"),"uisProfile.settings":B("settings"),"uisProfile.adtargeting":B("adtargeting"),uisTvPrefs:A()}}))}(jQuery));CIM.user.registerKey("isXfinityConnectSetup",{backend:"unified_user",store_as:"uisProfile.xfinity.isXfinityConnectSetup"});CIM.user.registerKey("rsDeviceType",{backend:"unified_user",store_as:"uisTvPrefs.deviceType"});CIM.user.registerKey("roviHeadend",{backend:"unified_user",store_as:"uisTvPrefs.rovi.headend"});CIM.user.registerKey("roviHeadendName",{backend:"unified_user",store_as:"uisTvPrefs.rovi.headendName"});CIM.user.registerKey("roviZipCode",{backend:"unified_user",store_as:"uisTvPrefs.rovi.zipCode"});CIM.user.registerKey("roviTimezone",{backend:"unified_user",store_as:"uisTvPrefs.rovi.timezone"});CIM.user.registerKey("roviTimezoneOffset",{backend:"unified_user",store_as:"uisTvPrefs.rovi.timezoneOffset"});CIM.user.registerKey("favoriteChannelsSortOrder",{backend:"unified_user",store_as:"uisTvPrefs.favoriteChannels.sortOrder"});CIM.user.registerKey("favoriteChannelsCallSigns",{backend:"unified_user",store_as:"uisTvPrefs.favoriteChannels.callSigns"});CIM.user.registerKey("rdvrActivationStatus",{backend:"unified_user",store_as:"uisTvPrefs.activation.status"});CIM.user.registerKey("rdvrActivationUpdated",{backend:"unified_user",store_as:"uisTvPrefs.activation.updated"});CIM.user.registerKey("dacOverride",{backend:"unified_user",store_as:"uisTvPrefs.useDac.value"});CIM.user.registerKey("dacLastUpdate",{backend:"unified_user",store_as:"uisTvPrefs.useDac.lastUpdated"});CIM.user.registerKey("dacTzOverride",{backend:"unified_user",store_as:"uisTvPrefs.useDac.timezone"});CIM.user.registerKey("dacTzOffsetOverride",{backend:"unified_user",store_as:"uisTvPrefs.useDac.timezoneOffset"});CIM.user.registerKey("dacMapId",{backend:"unified_user",store_as:"vodDac.dac.ChannelMap.mapId"});CIM.user.registerKey("dacControllerId",{backend:"unified_user",store_as:"vodDac.dac.ChannelMap.controllerId"});CIM.user.registerKey("dvr_enabled",{backend:"unified_user",store_as:"uisProfile.onboarding.dvr_enabled"});CIM.user.registerKey("dvr_complete",{backend:"unified_user",store_as:"uisProfile.onboarding.dvr_complete"});CIM.user.registerKey("dvr_timestamp",{backend:"unified_user",store_as:"uisProfile.onboarding.dvr_timestamp"});CIM.user.registerKey("rtune_enabled",{backend:"unified_user",store_as:"uisProfile.onboarding.rtune_enabled"});CIM.user.registerKey("rtune_complete",{backend:"unified_user",store_as:"uisProfile.onboarding.rtune_complete"});CIM.user.registerKey("rtune_timestamp",{backend:"unified_user",store_as:"uisProfile.onboarding.rtune_timestamp"});CIM.user.registerKey("watchlist_complete",{backend:"unified_user",store_as:"uisProfile.onboarding.watchlist_complete"});CIM.user.registerKey("favorites_complete",{backend:"unified_user",store_as:"uisProfile.onboarding.favorites_complete"});CIM.user.registerKey("edata",{backend:"unified_user",store_as:"eData.data.edata"});CIM.user.registerKey("rdvr_udf_activation",{backend:"unified_user",store_as:"udf.account.rdvr.activation.status"});CIM.user.registerKey("rtune_udf_activation",{backend:"unified_user",store_as:"udf.account.rtune.activation.status"});CIM.user.registerKey("adtarget_optout_ts_uis",{backend:"unified_user",store_as:"uisProfile.adtargeting.optout_ts"});CIM.user.registerKey("adtarget_optout_flag_uis",{backend:"unified_user",store_as:"uisProfile.adtargeting.optout_flag"});CIM.user.registerKey("udf",{backend:"unified_user",store_as:"udf"});CIM.user.registerKey("rtuneActivationStatus",{backend:"unified_user",store_as:"udf.account.rtune.activation.status"});CIM.user.registerKey("rtuneActivationUpdated",{backend:"unified_user",store_as:"udf.account.rtune.activation.updated"})}CIM.user.registerBackend("adtargeting_migration",function(B){function A(){if(typeof document.config!="undefined"){return(document.config.adtWriteUis=="true")}else{return true}}B.get=function(E,F){var D=[];for(var C=0;C<E.length;C++){D.push(E[C]+"_aws")}CIM.user.get(D,function(I){var H={};for(var G=0;G<E.length;G++){H[E[G]]=I[E[G]+"_aws"]}F(H)})};B.set=function(C,F){var E={};for(var D in C){if(C.hasOwnProperty(D)){E[D+"_aws"]=C[D];if(A()){E[D+"_uis"]=C[D]}}}CIM.user.set(E,function(I){var H={};for(var G in C){if(C.hasOwnProperty(G)){H[G]=true;if(typeof I[G+"_aws"]!="undefined"){H[G]=H[G]&&I[G+"_aws"]}if(typeof I[G+"_uis"]!="undefined"){H[G]=H[G]&&I[G+"_uis"]}}}F(H)})}});CIM.user.registerKey("adtarget_optout_flag",{backend:"adtargeting_migration"});CIM.user.registerKey("adtarget_optout_ts",{backend:"adtargeting_migration"});
// /rpc.js from cimspire
if(typeof CIM=="undefined"){CIM={}}CIM.RPC=(function(D){var C=(window==top)?"top":window.name;function F(I){var G="",J="",H;H=I.match(/^(.+?:)\/\//);if(H){G=H[1]}else{G=document.location.protocol}H=I.match(/^(?:.*?:)?\/\/(.*?)\//);if(H){J=H[1]}else{J=document.location.host}return G+"//"+J}function E(I,G){if(typeof I.type!="undefined"&&I.type=="RPC"){var J=I.method,H=I.args;if(typeof G[J]!="undefined"&&typeof G[J].apply!="undefined"){G[J].apply(window,H);return true}}return false}var B={receiveMessage:function(G){G.message=JSON.parse(G.message);if(!E(G.message,this.methods)){D(this).triggerHandler("receive",[G])}},methods:{setupChannel:function(G){var H=new B.Channel("top");H.rpcRoot(G)}}};B.Message=function(I,K,M){this.frame=D('<iframe style="width:0;height:0;position:absolute;left:-10000px;"></iframe>');D(document.body).append(this.frame);var J={message:K,target:I,source:C};var L=[];for(var H in J){if(J.hasOwnProperty(H)){L.push(H+"="+encodeURIComponent(J[H]))}}var G=this;this.frame.bind("load",function(){window.setTimeout(function(){G.frame.remove()},1000)}).attr("src",M+"?"+L.join("&"))};var A={};B.Channel=function(H){if(typeof H=="string"){this.target=H}else{this.target=(H==top)?"top":H.name}if(typeof A[this.target]=="undefined"){A[this.target]=this}else{return A[this.target]}this.rpcFile("/rpc/");if(typeof H!="string"&&H!=top){this.rpcRoot(F(H.src))}this.methods={};var G=this;D(B).bind("receive",function(I,J){if(G.target==J.source){G.receiveMessage(J)}})};B.Channel.prototype={sendMessage:function(G){return new B.Message(this.target,JSON.stringify(G),this.rpcUrl())},apply:function(H,G){return this.sendMessage({type:"RPC",method:H,args:G||[]})},receiveMessage:function(G){if(!E(G.message,this.methods)){D(this).triggerHandler("receive",[G])}},rpcRoot:function(G){if(typeof G=="undefined"){if(typeof this._rpcRoot=="undefined"){if(this.target=="top"&&window==top){this._rpcRoot=document.location.protocol+"//"+document.location.host;return this._rpcRoot}else{throw CIM.exception.MissingRPCRootException(this.target)}}else{return this._rpcRoot}}else{this._rpcRoot=G}},hasRoot:function(){try{this.rpcRoot();return true}catch(G){return false}},rpcFile:function(G){if(typeof G=="undefined"){return this._rpcFile}else{this._rpcFile=G}},rpcUrl:function(){return this.rpcRoot()+((this.rpcFile().indexOf("/")===0)?"":"/")+this.rpcFile()}};return B})(jQuery);CIM.exception.create("MissingRPCRootException",function(A){this.message="No RPC root defined for "+A});if(typeof define==="function"&&define.amd){define("cimspire/rpc",[],function(){return CIM.RPC})};
// /lightbox/scrim.js from cimspire
if(typeof CIM=="undefined"){CIM={}}CIM.scrim=(function(D){var E=false,A=0.7,F=100003,C=null;var B={show:function(){if(this.visible()){return }var G=this.element();D(window).bind("resize.scrim",function(){var L=D(document.body);G.css({width:L.width(),height:L.height()})});G.css("display","block");D(window).trigger("resize.scrim");E=true;window.setTimeout(function(){D(B).trigger("show")});var H=0,K=setInterval(function(){D(window).trigger("resize.scrim");if(H>10){clearInterval(K);return }H++},750);var J=function(L){D(window).trigger("clicked.scrim")};try{document.getElementById("scrim").contentWindow.document.body.onclick=J}catch(I){}},hide:function(){if(!this.visible()){return }var G=this.element();D(window).unbind("resize.scrim");G.css("display","none");E=false;window.setTimeout(function(){D(B).trigger("hide")})},fadeOut:function(){if(!this.visible()){return }var G=this.element();D(window).unbind("resize.scrim");G.fadeOut();E=false;window.setTimeout(function(){D(B).trigger("hide")})},toggle:function(){if(this.visible()){this.hide()}else{this.show()}},element:function(){if(C===null){C=D('<iframe id="scrim" src="/cimspire/html/scrim.html" frameborder="0"></iframe>');C.css({position:"absolute",top:0,left:0,height:0,width:0,border:0,opacity:this.opacity(),zIndex:this.zIndex(),display:(this.visible()?"block":"none")});D(document.body).append(C);var G=C[0].contentWindow.document;G.open();G.write('<html style="width: 100%; height: 100%;"><body style="background: #000; margin: 0; padding: 0; width: 100%; height: 100%;"></body></html>');G.close()}return C},visible:function(G){if(typeof G=="undefined"){return E}else{if(G){this.show()}else{this.hide()}}},opacity:function(G){if(typeof G=="undefined"){return A}else{A=G;this.element().css("opacity",A)}},zIndex:function(G){if(typeof G=="undefined"){return F}else{F=G;this.element().css("zIndex",F)}}};return B})(jQuery);
// /lightbox/lightbox.js from cimspire
if(typeof CIM=="undefined"){CIM={}}CIM.Lightbox=(function(H){var C;if(CIM.hasOwnProperty("debugApp")){C=CIM.debugApp.register("CIM.Lightbox")}else{C={info:function(){null},warn:function(){null},error:function(){null}}}var D=0,K="/cimspire/html/scrim.html",I=(location.origin||location.protocol+"//"+location.host);var E=(function(){return !H.browser.msie||H.browser.version!="6.0"})();var G={frame:{type:"frame",width:640,height:480},modal:{type:"modal",width:"50%"},template:{type:"template",width:"50%"},dialog:{type:"dialog",width:320,useLoader:false}};function B(){var L="lightbox-"+D;D++;return L}function F(M){var L=M.length*32+1000;C.info("autoCloseTime",L);return L}function J(L){C.warn("No type parameter specified.");if("url" in L&&L.url){return"frame"}else{if("template" in L&&L.template){return"template"}else{if("className" in L&&(/alert|confirm|notify|prompt|form/).test(L.className)){return"dialog"}else{if("message" in L&&L.message){if(("buttons" in L)&&L.buttons.length){L.className=(L.buttons.length===1)?"alert":"confirm"}else{if(L.autoCloseTime||L.closeBox===false){L.className="notify"}}return"dialog"}else{return""}}}}}var A=function(L){C.info("Lightbox constructor called with options:",L);if(!L){C.error("Constructor called with no options.");return this}this.type=L.type||J(L);if(!this.type){C.error("Lightbox type can't be determined.");return this}else{if(this.type=="dialog"&&!L.message){C.error("A dialog lightbox requires a message and none was specified.");return this}else{if(this.type=="template"&&!L.template){C.error("A template lightbox requires a template and none was specified.");return this}else{if(this.type=="frame"&&!L.url){C.error("A frame lightbox requires a url and none was specified.");return this}}}}this.options=H.extend({height:"auto",url:K,name:B(),useLoader:true,closeBox:true,scrim:true},G[this.type]);if(this.type=="dialog"&&(/notify/).test(L.className)){H.extend(this.options,{autoCloseTime:"auto",width:300,closeBox:false,scrim:false})}H.extend(this.options,L);if(this.options.autoCloseTime=="auto"){this.options.autoCloseTime=F(this.options.message)}this.is_open=false;this.loader_element=null;this.wrapper=H('<div class="lightbox"></div>');if(this.options.closeBox){this.closeBox=H('<a class="circle-close close"></a>').appendTo(this.wrapper).hide()}if(this.options.useLoader){this.loader(A.createLoader())}if(this.type=="frame"){this.content=H('<iframe class="lightboxContent" scrolling="no" frameBorder="0" src="'+K+'" name="'+this.options.name+'"></iframe>');this.content.css({width:(this.options.width),height:(this.options.height),zIndex:"11"});var N=this;this.content.load(function(P){C.info("iframe load event fired",this.src);N.loader().hide();H(N).trigger("ready");if((this.src.match(/http:\/\/[^\/]+(?=\/)/)||[]).toString()==I){C.info("Same origin rules apply.");H(this.contentDocument).unbind("keydown").bind("keydown",function(Q){if(Q.keyCode==27){N.close()}})}else{C.info("Cross-origin rules apply.")}});this.width("auto");this.height("auto")}else{this.content=H('<div class="lightboxContent" id="'+this.options.name+'"></div>');this.width("auto");this.height("auto");this.content.css({width:(this.options.width),height:(this.options.height)});if(this.options.className){this.content.addClass(this.options.className)}if(this.options.backgroundImage){this.content.css({"background-image":"url("+this.options.backgroundImage+")","background-position":this.options.backgroundPosition||"center center","background-repeat":"no-repeat"})}}if(this.options.useLoader&&this.options.height=="auto"){this.content.css({"min-height":this.options.width/3})}if(this.type=="template"){var M=this.options,O=this;this.getContent(M.url,function(Q){var P=H.tmpl(Q,H.extend({},M.data,{templateName:M.template}));O.content.html(P).addClass("template");O.loader().hide();O.content.css({"min-height":""});O.wrapper.removeClass("hideCircleClose");H(window).trigger("resize.lightbox")})}CIM.scrim.element();this.wrapper.append(this.content);this.wrapper.css({position:E?"fixed":"absolute"});this.url(this.options.url)};A.createLoader=function(){var L=H('<div class="cimspire_loading">Loading...</div>');return L};A.prototype={getContent:function(N,O){var M,L=this;if(typeof N=="undefined"){N=this.url()}if(N==K){H(L).trigger("ready");return }H.ajax({url:N,success:function(P){M=P},error:function(R,P,Q){M=false},complete:function(){if(typeof O=="undefined"){return M}O(M);H(L).trigger("ready")}})},url:function(L){if(typeof L=="undefined"){return this.src_url}else{this.src_url=L;if(this.visible()){this.reload()}}},resize:function(O,N,M){var L={x:H(window).width(),y:H(window).height()};this.content.animate({width:O,height:N},{step:function(P,Q){var R=H(Q.elem).parent();if(Q.prop=="width"){R.css("left",this.options.left||Math.round(Math.max(L.x/2-P/2,0)))}else{R.css("top",this.options.top||Math.round(Math.max(L.y/2-P/2,0)))}},complete:M})},width:function(L){if(typeof L=="undefined"){return this.wrapper.width()}else{this.wrapper.css("width",L)}},height:function(L){if(typeof L=="undefined"){return this.wrapper.height()}else{this.wrapper.css("height",L)}},rpcChannel:function(){return this.channel},visible:function(L){if(typeof L=="undefined"){return this.is_open}else{if(L){this.open()}else{this.close()}}},open:function(){CIM.scrim.visible(this.options.scrim);this.wrapper.appendTo(document.body).css("z-index",CIM.scrim.zIndex()+1);var L=this;if(this.loader_element){function N(P){var Q=P.width();Q+=parseFloat(P.css("paddingLeft"))||0;Q+=parseFloat(P.css("paddingRight"))||0;Q+=parseFloat(P.css("borderLeftWidth"))||0;Q+=parseFloat(P.css("borderRightWidth"))||0;return Q}function M(P){var Q=P.height();Q+=parseFloat(P.css("paddingTop"))||0;Q+=parseFloat(P.css("paddingBottom"))||0;Q+=parseFloat(P.css("borderTopWidth"))||0;Q+=parseFloat(P.css("borderBottomWidth"))||0;return Q}this.loader().css({left:N(this.wrapper)/2-N(this.loader())/2,top:M(this.wrapper)/2-M(this.loader())/2})}H(window).bind("resize.lightbox",function(){var P={x:H(window).width(),y:H(window).height()},Q={x:E?0:document.documentElement.scrollLeft,y:E?0:document.documentElement.scrollTop};L.wrapper.css({left:L.options.left||Math.round(Math.max(P.x/2-L.width()/2+Q.x,0)),top:L.options.top||Math.round(Math.max(P.y/2-L.height()/2+Q.y,0))})});H(window).bind("clicked.scrim",function(P){if(L.cancel){L.cancel()}else{L.close()}});this.content.focus();if(!E){var O=null;H(window).bind("scroll.lightbox",function(){if(O){window.clearTimeout(O)}O=window.setTimeout(function(){H(window).trigger("resize.lightbox")},10)})}this.reload();this.is_open=true;H(this).trigger("opened");H(window).trigger("resize.lightbox");if(this.options.autoCloseTime){setTimeout(function(){L.close(true)},this.options.autoCloseTime)}if(this.closeBox){this.closeBox.show()}this._hideFlash()},end:function(L,M){this.close(L,M)},close:function(M,N){var L=this;H(window).unbind("resize.lightbox").unbind("scroll.lightbox");if(M){this.wrapper.fadeOut();CIM.scrim.fadeOut("fast",function(){L.wrapper.remove();L._showFlash();L.is_open=false;H(L).trigger("closed").unbind("closed");if(typeof N=="function"){N()}})}else{CIM.scrim.hide();this.wrapper.remove();this._showFlash();L.is_open=false;H(L).trigger("closed").unbind("closed");if(typeof N=="function"){N()}}H(document).unbind("keydown")},loader:function(L){if(typeof L=="undefined"){return this.loader_element}else{if(this.loader_element!==null){this.loader_element.remove()}this.loader_element=H(L);this.wrapper.append(this.loader_element)}},buildModal:function(M){var L=this;this.getContent(this.url(),function(N){L.content.html(N);if(typeof M=="function"){M.call()}})},buildDialog:function(T){if(this.content.loaded){if(typeof T=="function"){T.call()}return }var V=this,M,L,O,W,P,S,Q,U;O=H(this.options.header?"<h1>"+this.options.header+"</h1>":"");W=this.options.message||"";if(typeof W=="string"&&(/\n/).test(W)){W=W.replace(/\n/g,"</span></p><p><span>")}else{if(typeof W=="object"&&W instanceof Array){W=W.join("</span></p><p><span>")}}W=H('<div class="dialog"></div>').append("<p><span>"+W+"</span></p>");M=(this.options.className=="prompt"?'<div class="prompt"><input type="text"></div>':"");if(this.options.form){L=this.options.form;if(typeof L=="string"&&(/\n/).test(L)){L=L.replace(/\n/g,"</fieldset><fieldset>")}else{if(typeof L=="object"&&L instanceof Array){L=L.join("</fieldset><fieldset>")}}L="<fieldset>"+L+"</fieldset>";this.form=H("<form />").html(L).bind("submit",function(){return false});L=H('<div class="form"/>').append(this.form)}else{L=""}Q=H('<div class="buttons" style="text-align:right;"></div>');V.content.append(O).append(W).append(M||L);if(this.options.buttons){U='<a href="#" class="button auto"></a>';for(var N=0,R=this.options.buttons.length;N<R;N++){P=this.options.buttons[N];Q.append(H(U).html(P.label).click(P.action))}V.content.append(Q)}if(typeof T=="function"){T.call()}this.content.loaded=true;H(this).trigger("ready")},reload:function(){var L=this;if(this.type=="frame"){this.content.bind("load.lightbox",function(){if(!L.open){return }if(typeof CIM.RPC!="undefined"){L.channel=new CIM.RPC.Channel(L.content[0]);L.channel.methods.lightbox_close=function(){L.close()};L.channel.methods.lightbox_resize=function(N,M){L.width(N);L.height(M);H(window).trigger("resize.lightbox")};L.channel.apply("setupChannel",[I])}L.content.css("left",0).unbind("load.lightbox");H(L).trigger("load");L._addEventHandlers()}).css("left",-10000).attr("src",this.url())}else{if(this.type=="modal"){H(document).unbind("keydown").bind("keydown",function(M){if(M.keyCode==27){L.close()}});H(this).bind("ready",this._addEventHandlers);this.buildModal()}else{if((/dialog|template/).test(this.type)){H(document).unbind("keydown").bind("keydown",function(M){if(M.keyCode==13){if(L.okay){L.okay()}else{L.close()}}else{if(M.keyCode==27){if(L.cancel){L.cancel()}else{L.close()}}}});if(this.type=="dialog"){this._addEventHandlers();this.buildDialog()}else{H(this).bind("ready",this._addEventHandlers)}}}}},_addEventHandlers:function(){var L=this;H("div.lightbox a.close").click(function(M){if(L.cancel){L.cancel(false)}else{L.close()}M.preventDefault();M.stopPropagation();return false});H("div.lightbox a.okay").click(function(M){if(typeof L.okay==="function"){L.okay(L.content.find("form").serializeArray())}else{L.close()}return false})},_hideFlash:function(){H(".ad").css("visibility","hidden");H("embed").css("visibility","hidden");H("object").css("visibility","hidden")},_showFlash:function(){H(".ad").css("visibility","visible");H("embed").css("visibility","visible");H("object").css("visibility","visible")}};return A})(jQuery);if(typeof define==="function"&&define.amd){define("cimspire/lightbox/lightbox",[],function(){return CIM.Lightbox})}CIM.dialog=(function(D){var C={cancel:function(F){if(typeof A.options.callback=="function"){A.options.callback(false)}A.close();return false},save:function(G){var F=self.content.find("form").serializeArray();if(typeof A.options.callback=="function"&&F.length){A.options.callback(F,function(H,I){if(H){A.close()}else{CIM.debug.info("error")}})}},okay:function(G){if(typeof A.options.callback=="function"){var F;if(A.options.className=="form"){F=A.content.find("form").serializeArray()}else{if(A.options.className=="prompt"){F=A.content.find("input").val()}else{if(A.options.className=="confirm"){F=true}}}A.options.callback(F)}A.close();return false}};var B={ok:{label:"OK",action:C.okay},save:{label:"Save",action:C.okay},cancel:{label:"Cancel",action:C.cancel}};var A;var E=function(I,F){if(!F){return I}else{if(F.header&&!isNaN(F.height)){F.height+=53}for(var H in F){if(H=="buttons"){for(var G=0,J=F.buttons.length;G<J;G++){$.extend(I.buttons[G]||{},F.buttons[G])}}else{I[H]=F[H]}}return I}};return{form:function(G,H,F){F=E({message:G,type:"dialog",callback:H,buttons:[B.cancel,B.save],className:"form"},F);A=new D(F);A.okay=C.save;A.cancel=C.cancel;A.open();return A},prompt:function(G,H,F){F=E({message:G,type:"dialog",callback:H,buttons:[B.cancel,B.ok],className:"prompt"},F);A=new D(F);A.okay=C.okay;A.cancel=C.cancel;A.open();return A},confirm:function(G,H,F){F=E({message:G,type:"dialog",callback:H,buttons:[B.cancel,B.ok],className:"confirm"},F);A=new D(F);A.okay=C.okay;A.cancel=C.cancel;A.open();return A},alert:function(G,H,F){F=E({message:G,type:"dialog",callback:H,buttons:[B.ok],className:"alert"},F);A=new D(F);A.okay=C.okay;A.cancel=C.okay;A.open();return A},notify:function(G,F){A=new D({message:G,type:"dialog",className:"notify"});A.open();return A}}})(CIM.Lightbox);
// /ad_targeting.js from cimspire
if(typeof CIM=="undefined"){CIM={}}var refer="",entry="yes",adzip="";if(document.referrer.indexOf("//")>0){refer=document.referrer.split("/",3)[2];if(refer.indexOf(":")>0){refer=refer.split(":",2)[0]}}if(typeof settings!="undefined"&&refer.indexOf(settings.hostNameShort)>-1){entry="no"}if(typeof user!="undefined"&&typeof (user.billingZip)!="undefined"){adzip="_OAS_GEO_OVERRIDE_=US:"+user.billingZip+";"}CIM.AdTargeting=(function(B){var A={init:function(D){if(typeof f_ENABLE_ADTARGETING!="undefined"&&f_ENABLE_ADTARGETING){var C=(B("input#adtarget-optout-page").length>0);D=D||function(){};if(!C&&typeof f_ADTARGET_ZIP!="undefined"){A.load(D)}}},load:function(C){A.loadLocal(function(D,E){if(D===""||E===""){A.loadCloud(C)}else{C(D,E)}})},loadLocal:function(C){CIM.user.get(["isLoggedIn","hashed_guid","adt_user_guid","adt_optin_ts","adt_optout_flag","adt_zip","amcid_local","amts_local"],function(E){if(typeof E.adt_zip=="undefined"||typeof E.adt_optout_flag=="undefined"){C("");return }var G=(new Date()).getTime();var I=E.adt_optout_flag?"":E.adt_zip,D=E.adt_optout_flag?"":E.amcid_local,F="",H="";if(!E.isLoggedIn){F=I;H=D}else{if(E.hashed_guid==E.adt_user_guid){if(E.adt_optin_ts+259200000>G){F=I}if(E.amts_local+86400000>G){H=D}}}C(F,H)})},loadCloud:function(C){CIM.user.get(["isLoggedIn","adtarget_optout_flag","amcid_cloud","account_zip","hashed_guid"],function(E){if(!E.isLoggedIn){C("","");return }var D={adt_zip:E.account_zip,adt_user_guid:E.hashed_guid,adt_optout_flag:E.adtarget_optout_flag,amcid_local:E.amcid_cloud||"NONE",amts_local:(new Date()).getTime()};if(E.adtarget_optout_flag){D.adt_optout_ts=(new Date()).getTime()}else{D.adt_optin_ts=(new Date()).getTime()}CIM.user.set(D,function(){C(E.adtarget_optout_flag?"":D.adt_zip,E.adtarget_optout_flag?"":D.amcid_local)})})}};return A})(jQuery);jQuery(document).ready(function(){setTimeout(function(){CIM.AdTargeting.init()},2000)});
// /cim.page.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}CIM.page=(function(A,C,B){var D=[];return{getDomain:function(E){return(E||C.hostname).replace(/^https*:\/\/|(:|\/|#|\?).*$/g,"").split(".").slice(-2).join(".")},getHashes:function(){return this.getParams("",C.hash,"hash")},getHash:function(E){return this.getParams(E,C.hash,"hash")},setHashes:function(E){C.hash=A.param(A.extend({},this.getParams("",C.hash,"hash"),E||{}));return this},getParams:function(H,G,F){G=typeof G==="string"?G:C.search;var E=CIM.utils.parseStr(G,(F||"query"));return(H)?E[H]||"":E},getParam:function(E){return this.getParams(E)},getPath:function(){if(!D.length){D=C.pathname.match(/([^\/]+)/g)||[""]}return D},isSecure:function(){return C.protocol==="https:"},setParams:function(E){C.search=A.param(A.extend({},this.getParams(),E||{}));return this},getTitle:function(){return B.title},setTitle:function(E){E=E||"";return B.title=E}}})(jQuery,location,document);if(typeof define==="function"&&define.amd){define("cimspire/cim.page",[],function(){return CIM.page})};
// /cim.utils.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}CIM.utils=(function(){var B={},C={query:/([^?=&]+)(=([^&]*))?/g,hash:/([^#=&]+)(=([^&]*))?/g},A=function(I,H,D,E){I=String(I);H=String(H);D=Number(D)||0;var F=[],G=I.length;F[D>G?D-G:0]=I;return(E?F.reverse():F).join(H)};return{getNestedProp:function(H,I,G){H=H||{};I=String(I||"").split(".");G=(typeof G==="undefined")?"":G;var F=0,D=I.length,E;for(;F<D;F++){E=I[F];if(!(E in H)){return G}H=H[E]}return(typeof H!=="undefined")?H:G},intval:function(D,E){if(typeof D==="boolean"||(typeof D==="number"&&isFinite(D))){return Math.floor(D)}if(typeof D==="string"){D=parseInt(D,(E||10));return(isNaN(D)||!isFinite(D))?0:D}return 0},sortArrWithArr:function(I,E){var G={},D,F,H=function(K,J){D=G[K]||(G[K]=E.indexOf(K));F=G[J]||(G[J]=E.indexOf(J));return D-F};return I.sort(H)},padLeft:function(F,E,D){return A(F,E,D,false)},padRight:function(F,E,D){return A(F,E,D,true)},parseStr:function(H,G){if(!H||!G){return{}}var E=H+"_"+G,F=/\+/g,D=/<script(.|\s)*?\/script>/g;if(!B[E]){B[E]={};H.replace(C[G],function(J,I,L,K){B[E][I]=CIM.utils.uriEncDec((K||"").replace(F," ").replace(D,""))})}return B[E]},uriEncDec:function(E,D){return(D===true)?encodeURIComponent(E):decodeURIComponent(E)}}})();
// /cim.debug.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}CIM.debugApp=(function(F,T){var E=(typeof CIM.browser=="undefined"||CIM.browser.isIE())?"http://xfinitytv.comcast.net/img/blank.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",J="cimdebug",K="cimdebug-persist",Q=(function(){try{return CIM.utils.intval(CIM.page.getParam(J)||CIM.storage.session.get(J)||0)}catch(W){return 0}})(),M=(function(){try{return CIM.utils.intval(CIM.page.getParam(K)||CIM.storage.session.get(K)||0)}catch(W){return 0}})(),N=String(CIM.env||"PROD").toUpperCase(),R={error:{f:"error",label:"ERROR"},event:{f:"info",label:"EVENT"},warn:{f:"warn",label:"WARNING"},info:{f:"info",label:"INFO"},user:{f:"error",label:"USER ERROR"},image:{f:"warn",label:"MISSING IMAGE"},ajax:{f:"error",label:"AJAX REQUEST FAILED"}},B=CIM.debugLog===true,D={},P={all:[]},O=[],A=function(X,W){W.unshift(Date.now());if(!P[X]){P[X]=[]}P[X].push(W);F(document).trigger("debug.CIM."+X,{args:W})},G=function(){var X,W=[].slice.call(arguments);if(W.length>4){X=W.pop()}A("all",W);if(X){A(X,W)}},U=function(Z,d,X,c){if(!Q&&N==="PROD"){return }Z=Z||"NAMELESS APP";d=d||"info";X=X||"NO MSG";c=c||[];var e=R[d],a=T[e.f]||T.info,Y=[].concat(c),b=0,W;C(Z,d,X,c);Y.unshift(Z,e.label,X);for(;b<Y.length-1;b+=2){W=Y.splice(0,b+1);W.push(" :: ");Y=W.concat(Y)}if(!!a.apply){a.apply(T,Y)}else{T[e.f](Y)}},C=function(c,a,b,Y){var X=F("#debugContainer table");function W(i,f,h,e){var d=F.isArray(e)?e.toString():e,g=F("<tr><td/><td/><td/><td/></tr>").addClass("debug_"+f);g.find("td:eq(0)").text(i);g.find("td:eq(1)").text(f);g.find("td:eq(2)").text(h);g.find("td:eq(3)").text(d);X.append(g)}if(X.length>0){for(var Z=0;Z<O.length;Z++){W.apply(this,O[Z])}O=[];W.apply(this,arguments)}else{O.push([c,a,b,Y])}},V=T?U:G,S=function(b,Y,a,X){if(!B&&!settings){return }var Z={},W={};Z.app="fextv";Z.ev=b;Z.eventType=Y;Z.assetId="null";Z.profileId=User.info.profileId||"";Z.headEnd=User.info.headEnd||"auto";Z.revision=settings.staticFile||"";W.referrer=document.referrer;W.platform=navigator.platform;W.screen=[screen.width,screen.height].join("x");X.push(W);F.ajax({cache:false,global:false,type:"POST",data:{msg:a,args:X},url:settings.RemoteLogPath+"?"+F.param(Z)})},I=function(){V("CIM","image",location.href,[this.src]);this.src=E;return false},L=function(Y,X,W){V("CIM","ajax",W.url,[W.type,X.status,W.data||""]);return false},H=function(Z,X,a){var W,Y=0;if(typeof X==="number"){a=X;X=[]}if(!F.isArray(X)){X=[]}a=a||10000;if(!F.isFunction(Z)){V("SPEEDTEST","error","Not a function",[Z]);return this}V("SPEEDTEST","info","Running",[Z,X,a]);W=Date.now();for(;Y<a;Y++){Z.apply(Z,X)}W=Date.now()-W;V("SPEEDTEST","info","Complete",[Z,X,a,W+"ms"]);return this};window.onerror=function(Y,X,W){V("CIM","error",Y,[X,W]);return(N!=="PROD"||Q)?window.chrome:!window.chrome};F(document).keyup(function(W){if(!Q&&N==="PROD"){return }if(W.shiftKey&&(W.which===76||W.which===108)){F("#debugContainer").toggle()}});F(function(){F("img").error(I)});F("head").ajaxError(L);if(Q&&M){CIM.storage.session.set(J,Q)}return{register:function(W,X){W=W||"CIM";if(W in D){V("CIM","warn",'Application with name "'+W+'" already registered.');return D[W]}return(function(b,Z){var a={},Y=function(){if(Z.bucket){if(Z.always){A(Z.bucket,[].slice.call(arguments))}else{[].push.call(arguments,Z.bucket)}}V.apply(this,arguments)};["error","warn","info","event"].forEach(function(c){a[c]=function(e,d){Y(b,c,e,d);return this}});a.user=function(f,d){var c=f.stack||f.stacktrace||"no stack";d=d||[];d.push(c,f);Y(b,"user",f.message,d);return this};a.getDescription=function(){return Z.desc||""};a.speedTest=H;a.logToServer=function(d,c){S(b,"remote",d,c);return this};return D[b]=a})(W,X||{})},getApp:function(W){return D[W]||D},getMsgs:function(W){return P[W]||P},delMsgs:function(W){if(W&&P[W]){P[W]=[]}else{for(W in P){if(P.hasOwnProperty(W)){P[W]=[]}}}return this}}})(jQuery,window.console);CIM.debug=CIM.debugApp.register("CIM",{desc:"Global Debug Application"});CIM.debug.info("CIM core loaded...");if(typeof define==="function"&&define.amd){define("cimspire/cim.debug",[],function(){return CIM.debugApp})};
// /util/console.js from cimspire
if(typeof CIM==="undefined"||!CIM){var CIM={}}CIM.console=(function(){var A=false;var B={logPath:"/blank/",logTimeout:250,profileId:"UNKNOWN_ProfileId",headEnd:"UNKNOWN_HeadEnd",app:"fextv",message:"Default Message",level:"log",staticFile:"/static/0000",action:"GET",ev:"fe log",eventType:"javascript",assetId:"null"};var C=function(F){var E=false;if(window.console){if(window.console[F]){E=true}}return E};var D=function(){if(typeof user!=="undefined"){B.profileId=user.profileId;B.headEnd=user.headEnd}if(typeof settings!=="undefined"){B.staticFile=settings.staticFile;A=settings.enableRemoteLog;B.logPath=settings.RemoteLogPath}if(typeof document.config!=="undefined"){A=document.config.enable_remote_log;B.logPath=document.config.remote_log_path}};pub={log:function(){var F=[],E=false;if(C("log")){for(i=0;i<arguments.length;i++){F.push(arguments[i])}window.console.log(F);E=F}return E},log1:function(F){var E=false;if(!F){return false}if(C("log")){window.console.log(F);E=F}return E},info:function(F){var E=false;if(!F){return false}if(C("info")){window.console.info(F);E=F}else{pub.log(F)}return E},error:function(F){var E=false;if(!F){return false}if(C("error")){window.console.error(F);E=F}else{pub.log(F)}return E},onboardingInfo:function(E){if(typeof user!=="undefined"&&user.debug){CIM.console.info(E)}},onboardingError:function(E){if(typeof user!=="undefined"&&user.debug){CIM.console.error(E)}},remote:function(F,G){D();var E={};if(typeof F==="object"){E=$.extend({},B,F)}else{E=$.extend({},B,{message:String(F)})}if(A){$.ajax({type:E.action,url:E.logPath,data:E,cache:false,complete:G||function(){},timeout:E.logTimeout})}if(E.level==="error"){CIM.console.error(E)}else{if(E.level==="info"){CIM.console.info(E)}else{CIM.console.log(E)}}return E}};return pub})();
// /services/dac.js from cimspire
if(typeof CIM=="undefined"){var CIM={}}if(typeof CIM.services=="undefined"){CIM.services={}}CIM.services.dac=(function(){return{get:function(A){CIM.user.get(["isLoggedIn","dacOverride","dacMapId","dacControllerId"],function(B){var C=B.isLoggedIn&&B.dacOverride&&(B.dacMapId||B.dacMapId===0)&&B.dacControllerId;A({type:"get.cim.services.dac",error:0,cache:{isValid:(C?true:false)}})})}}}());
// /favorites.js from cimspire
if(typeof CIM=="undefined"){var CIM={}}CIM.favorites=(function(D){var C={getUrl:"/xtv/authkey/favorites?g=${hashedGuid}&v=${cacheBuster}",hashedGuid:function(){return CIM.user.getNow(["hashed_guid"]).hashed_guid},cacheBuster:function(){if(typeof CIM.cookie!="undefined"){if(CIM.cookie.exists("fav_v")){return CIM.cookie.read("fav_v")}else{if(CIM.cookie.exists("usp_v")){return CIM.cookie.read("usp_v")}}}return(new Date()).getTime()}},B=CIM.debugApp.register("CIM.favorites"),F,E,G=[],A=0;function H(){return C.getUrl.replace(/\$\{hashedGuid\}/g,C.hashedGuid()).replace(/\$\{cacheBuster\}/g,C.cacheBuster())}var I={NONE:0,LOADING:1,LOADED:2,ERROR:3,settings:function(J){if(typeof J=="undefined"){return D.extend({},C)}else{C=D.extend({},C,J)}},state:function(J){if(typeof J=="undefined"){return A}else{A=J}},get:function(J){J=J||function(){};switch(A){case I.NONE:G.push(J);A=I.LOADING;D.ajax({url:H(),dataType:"json",success:function(L){E=null;F=L.favorites;A=I.LOADED;B.info("Successfully loaded favorites");for(var K=0;K<G.length;K++){G[K](false,F)}G=[]},error:function(M,N,K){E=K;A=I.ERROR;B.warn("Failed to load favorites");for(var L=0;L<G.length;L++){G[L](true)}G=[]}});break;case I.LOADING:G.push(J);break;case I.LOADED:case I.ERROR:J(E,F);break;default:B.error("Invalid state encountered");break}}};return I}(jQuery));
// /widgets/onboarding/workflow-xplat.js from cimspire
if(typeof CIM=="undefined"||!CIM){var CIM={}}if(typeof CIM.onboarding=="undefined"||!CIM.onboarding){CIM.onboarding={}}CIM.onboarding.Xplat=function(){var C={rdvr:{enabled:{activated:true,deactivated:true,ineligible:false,attempted:false,eligible:true},completed:{activated:true,deactivated:true,ineligible:false,attempted:false,eligible:false}},rtune:{enabled:{activated:true,deactivated:true,ineligible:true,attempted:true,eligible:true},completed:{activated:true,deactivated:true,ineligible:true,attempted:true,eligible:true}}},B={rdvr:{enabled:false,completed:false},rtune:{enabled:true,completed:true}};function A(F,E){var D=E.shift();if(typeof F[D]==="undefined"){return }else{if(E.length===0){return F[D]}else{return A(F[D],E)}}}return{getStatus:function(F,E,G){var D=F+"_udf_activation";CIM.user.get([D],function(I){var J=I[D],H;if(typeof J!=="undefined"){H=A(C,[F,E,J])}else{H=A(B,[F,E])}if(typeof H==="undefined"){H=false}G(H)})}}};CIM.onboarding.xplat=new CIM.onboarding.Xplat();
// /widgets/onboarding/workflow-uis-cache.js from cimspire
if(typeof CIM=="undefined"){CIM={}}if(typeof CIM.onboarding=="undefined"){CIM.onboarding={}}CIM.onboarding.WorkflowUISCache=(function(){WorkflowUISCache=function(){this.callbacks=[];this.updated=false;this.loading=false};WorkflowUISCache.prototype={waitForData:function(B){var A=this;return function(){var C=this,D=arguments;if(A.updated&&!A.loading){B.apply(C,D)}else{A.callbacks.push(function(){B.apply(C,D)})}if(!A.updated&&!A.loading){A.update()}}},cacheValue:function(B,C,E,D){var A=this;D=D||function(){};return function(F){A[C][E](function(G){B[C+"_"+E]=G;D(G);F()})}},update:function(){var A=this;this.loading=true;this.updated=false;CIM.user.get(["dvr_enabled","dvr_complete","dvr_timestamp","rtune_enabled","rtune_complete","rtune_timestamp","watchlist_complete","favorites_complete","favoriteChannelsCallSigns"],function(B){var E={},C=new CIM.util.AsyncCall();C.queue(function(F){if(typeof B.watchlist_complete=="undefined"){A.cacheValue(E,"watchlist","complete")(F)}else{if(B.watchlist_complete===false&&typeof CIM.favorites=="object"){CIM.favorites.get(function(H,G){if(!H&&G.length>0){A.cacheValue(E,"watchlist","complete")(F)}else{F()}})}else{F()}}});if(typeof B.favorites_complete=="undefined"){C.queue(A.cacheValue(E,"favorites","complete"))}else{if(B.favorites_complete===false&&B.hasOwnProperty("favoriteChannelsCallSigns")&&B.favoriteChannelsCallSigns&&B.favoriteChannelsCallSigns.length>0){C.queue(A.cacheValue(E,"favorites","complete"))}}var D=(new Date()).getTime()-86400000;if((B.dvr_timestamp||0)<D&&!(B.dvr_enabled&&B.dvr_complete)){E.dvr_timestamp=(new Date()).getTime();C.queue(A.cacheValue(E,"dvr","enabled",function(F){if(F){C.queue(A.cacheValue(E,"dvr","complete"))}}))}if((B.rtune_timestamp||0)<D&&!(B.rtune_enabled&&B.rtune_complete)){E.rtune_timestamp=(new Date()).getTime();C.queue(A.cacheValue(E,"rtune","enabled",function(F){if(F){C.queue(A.cacheValue(E,"rtune","complete"))}}))}C.done(function(){if(E!=={}){CIM.user.set(E)}A.updated=true;A.loading=false;for(var F=0;F<A.callbacks.length;F++){A.callbacks[F]()}A.callbacks=[]})})},reset:function(A){CIM.user.remove(["dvr_enabled","dvr_complete","dvr_timestamp","rtune_enabled","rtune_complete","rtune_timestamp","watchlist_complete","favorites_complete"],A)}};return WorkflowUISCache})();CIM.onboarding.workflowUISCache=new CIM.onboarding.WorkflowUISCache();
// /widgets/onboarding/workflow-step.js from cimspire
if(typeof CIM=="undefined"||!CIM){var CIM={}}if(typeof CIM.onboarding=="undefined"||!CIM.onboarding){CIM.onboarding={}}CIM.onboarding.WorkflowStep=(function(){function C(E){return CIM.onboarding.workflowUISCache.waitForData(function(F){CIM.user.get([E],function(G){F(G[E])})})}function B(E){return function(F){this.enabled(function(G){if(G){E.call(this,F)}else{F(0)}})}}function A(J){if(typeof J=="undefined"){return }var I=[],H=false,F=false,E;var G=function(K){if(!H){H=true;F=true;J.apply(this,[function(M){E=M;F=false;for(var L=0;L<I.length;L++){I[L](E)}I=[]}])}if(H&&!F){K(E)}else{I.push(K)}};G.reset=function(){I=[];H=false;F=false};return G}var D=function(F){for(var G in F){if(F.hasOwnProperty(G)){this[G]=F[G]}}var E="none";if(typeof settings!="undefined"&&typeof settings.workflowCache!="undefined"){E=settings.workflowCache}else{if(typeof document.config!="undefined"&&typeof document.config.workflowCache!="undefined"){E=document.config.workflowCache}}if(E=="uis"){if(typeof CIM.onboarding.workflowUISCache[this.id]=="undefined"){CIM.onboarding.workflowUISCache[this.id]={}}if(typeof this.enabled!="undefined"&&this.cache_enabled){CIM.onboarding.workflowUISCache[this.id].enabled=this.enabled;this.enabled=C(this.id+"_enabled")}if(typeof this.checkCompletionState!="undefined"&&this.cache_complete){CIM.onboarding.workflowUISCache[this.id].complete=this.checkCompletionState;this.checkCompletionState=C(this.id+"_complete")}}if(typeof this.percentage!="undefined"){this.percentage=B(this.percentage)}this.enabled=A(this.enabled);this.checkCompletionState=A(this.checkCompletionState);this.percentage=A(this.percentage)};D.prototype={getStatus:function(F){var E=this;E.enabled(function(G){var H={enabled:G,complete:false};if(G){E.checkCompletionState(function(I){H.complete=I;F(H)})}else{F(H)}})},resetMemoryCache:function(){this.enabled.reset();this.checkCompletionState.reset();this.percentage.reset()}};return D})();
// /widgets/onboarding/workflow.js from cimspire
if(typeof CIM=="undefined"||!CIM){var CIM={}}if(typeof CIM.onboarding=="undefined"||!CIM.onboarding){CIM.onboarding={}}CIM.onboarding.Workflow=(function(B){var A=function(C){this.steps=C};A.prototype={getStepById:function(D){for(var C=0;C<this.steps.length;C++){if(this.steps[C].id==D){return this.steps[C]}}},getStepsFor:function(G){var E,D,F,C=[];for(E=0;E<this.steps.length;E++){F=this.steps[E].displayIn||[];for(D=0;D<F.length;D++){if(F[D]===G){C.push(this.steps[E]);break}}}return C},callOnSteps:function(C,I,H){var E={},G=function(K,J){K[I](function(L){E[K.id]=L;J()})};var F=new CIM.util.AsyncCall();for(var D=0;D<C.length;D++){F.queue(G.curry(this.getStepById(C[D])))}F.done(function(){H(E)})},getCompletionStatus:function(G){var D=[],C=function(I,H){I.getStatus(function(J){J.step=I;D.push(J);H()})};var F=new CIM.util.AsyncCall();for(var E=0;E<this.steps.length;E++){F.queue(C.curry(this.steps[E]))}F.done(function(){G(D)})},anythingCompleted:function(E){var C=this.steps;function D(F){if(F>=C.length){E(false);return }var G=C[F];G.getStatus(function(H){if(H.enabled&&H.complete){E(true)}else{D(F+1)}})}D(0)},getSlide:function(E){var C=this.steps;function D(F){if(F>=C.length){E(null);return }var G=C[F];G.getStatus(function(H){if(H.enabled&&!H.complete){E(G,F)}else{D(F+1)}})}D(0)},buildWayFinder:function(F){var E=false,D,C;for(D=0;D<this.steps.length;D+=1){C={stepElement:B(".wayfinder li.template").clone(),json:this.steps,i:D};if(C.json[C.i].display!==false){CIM.onboarding.Step.buildStep(C)}if(D===F){CIM.onboarding.Step.activateStep(C)}}return C}};return A})(jQuery);
// /widgets/onboarding/workflow-template.js from cimspire
if(typeof CIM=="undefined"||!CIM){var CIM={}}if(typeof CIM.onboarding=="undefined"||!CIM.onboarding){CIM.onboarding={}}CIM.onboarding.setXpbarPercentage=function(){var A=new CIM.RPC.Channel("top");A.apply("updateProgressDisplay")};CIM.onboarding.getXpbarPercentage=function(B,A){B.getCompletionStatus(function(E){var G=[],C=function(H,I){H.step.percentage(function(J){G.push({id:H.step.id,percentage:J,complete:H.complete,enabled:H.enabled});I()})};var F=new CIM.util.AsyncCall();for(var D=0;D<E.length;D++){F.queue(C.curry(E[D]))}F.done(function(){A(G)})})};CIM.onboarding.workflowTemplate=new CIM.onboarding.Workflow([new CIM.onboarding.WorkflowStep({id:"signin",required:true,title:"Log in to XFINITY",display:false,displayIn:["profile_progress"],subtitle:"",percentage:function(A){A(20)},cache_enabled:false,cache_complete:false,enabled:function(A){CIM.debug.info("Profile: signin is enabled");A(true)},checkCompletionState:function(A){CIM.user.get(["isLoggedIn"],function(B){if(B.isLoggedIn){CIM.debug.info("Profile: signin is completed")}else{CIM.debug.error("Profile: signin is not completed because prefs.isLoggedIn == false")}A(B.isLoggedIn)})}}),new CIM.onboarding.WorkflowStep({id:"connect",required:true,display:true,displayIn:["profile_progress","xpbar_3","onboarding_widget"],title:"Learn about XFINITY<sup>&reg;</sup> Connect",subtitle:"Import email, add addresses &amp; more.",percentage:function(A){A(10)},cache_enabled:false,cache_complete:false,enabled:function(A){CIM.debug.info("Profile: connect is enabled");A(true)},checkCompletionState:function(A){CIM.user.get(["isXfinityConnectSetup"],function(B){if(B.hasOwnProperty("isXfinityConnectSetup")){if(B.isXfinityConnectSetup){CIM.debug.info("Profile: connect is completed")}else{CIM.debug.error('Profile: connect is not completed because CIM.user.get(["isXfinityConnectSetup"]) returned false')}A(!!B.isXfinityConnectSetup)}else{CIM.debug.error('Profile: connect is not completed because CIM.user.get(["isXfinityConnectSetup"]) did not return isXfinityConnectSetup');A(false)}})}}),new CIM.onboarding.WorkflowStep({id:"headend",required:true,display:true,displayIn:["profile_progress","onboarding_widget"],title:"Choose your service area",subtitle:"Identify your channel lineup.",percentage:function(C){var A=CIM.onboarding.workflowTemplate.getStepById("dvr"),B=CIM.onboarding.workflowTemplate.getStepById("rtune");CIM.onboarding.workflowTemplate.callOnSteps(["dvr","rtune"],"enabled",function(D){if(!D.dvr&&!D.rtune){C(40)}else{C(30)}})},cache_enabled:false,cache_complete:false,enabled:function(A){CIM.debug.info("Profile: headend is enabled");A(true)},checkCompletionState:function(A){CIM.services.dac.get(function(B){if(B.cache.isValid===true){CIM.debug.info("Profile: headend is completed because CIM.services.dac.isValid is true");A(true)}else{CIM.user.get(["roviHeadend"],function(C){if(C.hasOwnProperty("roviHeadend")){if(C.roviHeadend){CIM.debug.info("Profile: headend is completed based on presence of presence of roviHeadend returned by CIM.user.get(['roviHeadend'])");A(C.roviHeadend)}else{CIM.debug.error("Profile: headend is not completed because CIM.user.get(['roviHeadend']) returned false");A(false)}}else{CIM.debug.error("Profile: headend is not completed because CIM.user.get(['roviHeadend']) did not return a roviHeadend");A(false)}})}})}}),new CIM.onboarding.WorkflowStep({id:"dvr",required:false,display:true,displayIn:["profile_progress","xpbar_3","onboarding_widget"],title:"Activate DVR Manager",subtitle:"Schedule recordings remotely.",percentage:function(A){CIM.onboarding.workflowTemplate.callOnSteps(["rtune"],"enabled",function(B){if(B.rtune){A(10)}else{A(20)}})},cache_enabled:true,cache_complete:true,enabled:function(A){CIM.onboarding.xplat.getStatus("rdvr","enabled",A)},checkCompletionState:function(A){CIM.onboarding.xplat.getStatus("rdvr","completed",A)}}),new CIM.onboarding.WorkflowStep({id:"rtune",required:false,display:true,displayIn:["profile_progress","xpbar_3","onboarding_widget"],title:"Change channel from your PC",subtitle:"Use your PC as a remote.",percentage:function(A){CIM.onboarding.workflowTemplate.callOnSteps(["dvr"],"enabled",function(B){if(B.dvr){A(10)}else{A(20)}})},cache_enabled:true,cache_complete:true,enabled:function(A){CIM.onboarding.xplat.getStatus("rtune","enabled",A)},checkCompletionState:function(A){CIM.onboarding.xplat.getStatus("rtune","completed",A)}}),new CIM.onboarding.WorkflowStep({id:"watchlist",required:false,display:true,displayIn:["profile_progress","xpbar_3","onboarding_widget"],title:"Set up your Queue",subtitle:"Know when your shows are on.",percentage:function(A){CIM.onboarding.workflowTemplate.callOnSteps(["dvr","rtune"],"enabled",function(B){if(!B.dvr&&!B.rtune){A(15)}else{A(10)}})},cache_enabled:false,cache_complete:true,enabled:function(A){CIM.debug.info("Profile: watchlist is enabled");A(true)},checkCompletionState:function(A){CIM.favorites.get(function(C,B){if(C){CIM.debug.error("Profile: watchlist is not completed because the user has no items in their watchlist");A(false)}else{if(B.length>0){CIM.debug.info("Profile: watchlist is completed");A(true)}else{CIM.debug.error("Profile: watchlist is not completed because the user has no items in their watchlist");A(false)}}})}}),new CIM.onboarding.WorkflowStep({id:"favorites",required:false,display:true,displayIn:["profile_progress","xpbar_3","onboarding_widget"],title:"Find your favorite channels",subtitle:"Get smart TV recommendations.",percentage:function(A){CIM.onboarding.workflowTemplate.callOnSteps(["dvr","rtune"],"enabled",function(B){if(!B.dvr&&!B.rtune){A(15)}else{A(10)}})},cache_enabled:false,cache_complete:true,enabled:function(A){CIM.debug.info("Profile: favorites is enabled");A(true)},checkCompletionState:function(A){CIM.user.get(["favoriteChannelsCallSigns"],function(B){if(B.hasOwnProperty("favoriteChannelsCallSigns")&&B.favoriteChannelsCallSigns){if(B.favoriteChannelsCallSigns.length>0){CIM.debug.info("Profile: favorites is completed");A(true)}else{CIM.debug.error("Profile: favorites is not completed because CIM.user.get(['favoriteChannelsCallSigns') returned no favorite channels");A(false)}}else{CIM.debug.error("Profile: favorites is not completed because CIM.user.get(['favoriteChannelsCallSigns') did not return the expected object");A(false)}})}}),new CIM.onboarding.WorkflowStep({id:"completion",required:false,display:true,displayIn:["onboarding_widget"],title:"Your entertainment is waiting",subtitle:"Catch your entertainment anywhere.",percentage:function(A){A(0)},cache_enabled:false,cache_complete:false,enabled:function(A){A(true)},checkCompletionState:function(A){A(false)}})]);if(typeof define==="function"&&define.amd){define("cimspire/widgets/onboarding/workflow-template",[],function(){return CIM.onboarding})};
// /components/xpbar/xpbar_3.js from cimspire
define("cimspire/components/xpbar/xpbar_3",["jquery","cimspire/lightbox/lightbox","cimspire/rpc","cimspire/widgets/onboarding/workflow-template","cimspire/cim.debug"],function(F,A,B,H,D){var C=D.register("XpBar"),I=null,E="fast";B.methods.popSlide=function(J){if(I){I.openLightbox(J)}};B.methods.updateProgressDisplay=function(){if(I){I.updateProgressDisplay()}};var G=function(){if(I){return I}I=this;this._dropdownOpen=false;this._timer=null;this._completionData=null;this._loading=false;this._pending=[];this._workflow=H.workflowTemplate};G.reset=function(){I=null};G.bindOnboardingEvents=function(J){F(J).find("a[data-onboarding-slide], a[data-onboarding-open]").unbind("click.xpbar").bind("click.xpbar",function(L){if(I){L.preventDefault();var K=F(this).attr("data-onboarding-slide");I.openLightbox(K)}})};G.prototype.setWorkflow=function(J){this._workflow=J};G.prototype.setElement=function(J){this._container=F(J);this.buildReturnMenu();this.bindEvents()};G.prototype.setLoggedIn=function(J){this._container.addClass(J?"auth":"unauth")};G.prototype.setEmail=function(K){if(K){var J=K.replace(/\+/g," ");if(J.length>17){J=J.substr(0,14)+"..."}this._container.find("b.xp_user_name").text(J)}};G.prototype.setPercentage=function(J){this._container.find(".xp_progress_fill").css("width",J+"%").find("span").text("Progress: "+J+"%");if(J>=100){this._container.find("div.xp_profile_box").addClass("xp_pct_100")}};G.prototype.setStepsTodo=function(J){this._container.find("span.xp_progress_steps").text(J+" ");this._container.find("span.xp_descriptor").text("step"+((J===1)?"":"s"))};G.prototype.buildReturnMenu=function(){var J=this._workflow.getStepsFor("xpbar_3"),M=this._container.find(".template"),N,L,O;if(M.length===0){return }N=M.parent();for(var K=0;K<J.length;K++){O=J[K].id;L=M.clone();L.removeClass("template").addClass("xp_"+O);L.find("a").addClass("xp_"+O).attr("href","#"+O).attr("data-onboarding-slide",O);L.find("a span").html(J[K].title);N.append(L)}M.remove()};G.prototype.openActiveMenu=function(){var J=this;this.getCompletionData(function(L){var M=".xp_progress_menu.xp_menu_first";for(var K=0;K<L.length;K++){if(L[K].complete||!L[K].enabled){M=".xp_progress_menu.xp_menu_return"}}J.openDropdown(M)})};G.prototype.bindEvents=function(){var J=this;G.bindOnboardingEvents(this._container);this._container.find(".xp_menu_toggle").unbind("click.xpbar").bind("click.xpbar",function(K){K.preventDefault();J.openActiveMenu()})};G.prototype.openLightbox=function(J){var K=this;var L=(this._container.attr("data-lightbox-url")||"")+"/onboarding.widget";L+=(J?"?showSlide="+J:"");var M=new A({type:"frame",url:L,width:892,height:451});F(M).bind("closed",function(){if(I){I.openDropdown(".xp_menu_continue");setTimeout(function(){I.closeDropdowns()},3000)}});M.open();this.closeDropdowns()};G.prototype.updateProgressDisplay=function(){var J=this;this.clearCompletionDataCache();this.getCompletionData(function(O){var N,P=J._container.find(".xp_menu_return"),L=0,K=0;for(var M=0;M<O.length;M++){N=P.find(".xp_"+O[M].id);if(O[M].complete||!O[M].enabled){N.css("display","none");L+=O[M].percentage}else{N.css("display","block");if(N.length){K++}}}J.setPercentage(L);J.setStepsTodo(K);J._container.find(".xpbar_progress").addClass("xp_progress_active");C.info("Profile: progress bar rendered "+L+"% completed")})};G.prototype.clearCompletionDataCache=function(){this._completionData=null};G.prototype.getCompletionData=function(K){var J=this;if(this._completionData){K(this._completionData)}else{this._pending.push(K||function(){});if(!this._loading){this._loading=true;H.getXpbarPercentage(this._workflow,function(M){J._completionData=M;for(var L=0;L<J._pending.length;L++){J._pending[L](J._completionData)}J._pending=[];J._loading=false})}}};G.prototype.openDropdown=function(K){var J=this;if(this._dropdownOpen){return }this._container.find(K).slideDown(E,function(){J._dropdownOpen=true}).bind("mouseleave.xpbar",function(){J._timer=setTimeout(function(){J.closeDropdowns()},3000)}).bind("mouseenter.xpbar",function(){if(J._timer){clearTimeout(J._timer);J._timer=null}});F("body").bind("click.xpbar",function(L){if(F(L.originalTarget).parents(".xp_progress_menu").length===0){J.closeDropdowns()}})};G.prototype.closeDropdowns=function(){var J=this;if(!this._dropdownOpen){return }this._container.find(".xp_progress_menu").slideUp(E,function(){J._dropdownOpen=false}).unbind("mouseleave.xpbar").unbind("mouseenter.xpbar");F("body").unbind("click.xpbar");if(this._timer){clearTimeout(this._timer);this._timer=null}};return G});
// /lib/authcookie.js from ui
if(!(rc("MYPORTAL"))){if(rc("edata")){deleteCookie("edata")}if(rc("xedata")){deleteCookie("xedata")}}function rc(C){var F=C+"=",B=document.cookie.split(";"),E=/\s*(.*)/,D,G,A;for(D=0,A=B.length;D<A;D++){G=B[D].match(E)[1];if(G.indexOf(F)==0){return G.substring(F.length,G.length)}}return null}function dc(A){createCookie(A,"",-1)}CIM.user.get(["isLoggedIn"],function(A){if(!A.isLoggedIn){deleteCookie("edata");deleteCookie("xedata");deleteCookie("entitlementPageViewCount")}});function isPrimary(){var is_primary=false;var req=new Ajax.Request("/user/authkey/checkaccount/",{method:"get",asynchronous:false});if(req.responseIsSuccess()){try{var json=stripComments(req.transport.responseText);var data=eval("("+json+")");is_primary=data.is_primary}catch(e){}}return(this.isPrimary=function(){return is_primary})()}function getAuthKey(){var authkey=Prefs.get("authkey","");if(authkey==""){var req=new Ajax.Request("/user/authkey/",{method:"get",parameters:Ajax.parameters({ts:parseInt((new Date).getTime()/1000)}),asynchronous:false});if(req.responseIsSuccess()){try{var json=req.transport.responseText.replace("/*","").replace("*/","");var data=eval("("+json+")");authkey=data.authkey}catch(e){}}}if(authkey!=""){Prefs.set("authkey",authkey,Prefs.SESSION_COOKIE);return(this.getAuthKey=function(){return authkey})()}return""};
// /lib/ads.js from ui
var Ad=Class.create();Object.extend(Ad.prototype,{initialize:function(){this.space_id=document.config.ads.space_id;this.property_id=document.config.ads.property_id;this.location="";this.background="ffffff"},set_space_id:function(A){this.space_id=A},set_property_id:function(A){this.property_id=A},set_location:function(A){this.location=A},set_background:function(A){this.background=A},render:function(A){var B=["","ads",this.space_id,this.property_id,this.location,"r",this.background].join("/");A.innerHTML+='<iframe src="'+B+'" frameborder="0" scrolling="no"></iframe>'},render_full:function(A,B,D){var C=document.createElement("div");C.className="ad "+D;var E=document.createElement("div");this.render(E);C.appendChild(E);if(B){this.render_slug(C)}A.appendChild(C)},render_slug:function(A){var D=document.createElement("h3");var C=document.createElement("a");C.className="adlink";C.rel="external";C.href="/adinformation/";C.appendChild(document.createTextNode("Advertisement"));assign_handlers(C);D.appendChild(C);var B=document.createElement("label");B.appendChild(document.createTextNode(" - "));D.appendChild(B);var E=document.createElement("a");E.className="adlink";E.href="https://www.surveymonkey.com/s.aspx?sm=FyNNVDhj_2f2FNc2KVOHQ4eg_3d_3d ";E.target="_blank";E.appendChild(document.createTextNode("Ad Feedback"));assign_handlers(E);D.appendChild(E);A.appendChild(D)},render_script:function(){var A="http://pn1.adserver.yahoo.com/a?";A+=["bg="+this.background,"c=r","f="+this.space_id,"pn=comcast","rand="+(new Date()).getDate(),"p="+this.property_id,"l="+this.location].join("&");var B=document.createElement("script");B.src=A;document.body.appendChild(B);return B}});
// /lib/scroller.js from ui
var SimpleScroller=Class.create();var Scroller=Class.create();Scroller.DIR_UP=0;Scroller.DIR_DOWN=1;Scroller.DIR_LEFT=2;Scroller.DIR_RIGHT=3;Object.extend(SimpleScroller.prototype,{initialize:function(A){this.element=$(A);this.element.proxy=this;this.speed=10;this.offset={x:0,y:0};this.scrolling=[false,false,false,false];this.running=false;var B=document.getElementsByClassName("scroller-container",this.element);if(B.length>0){this.container=B[0]}else{this.container=document.createElement("div");this.container.className="scroller-container";while(this.element.childNodes.length>0){var C=this.element.childNodes[0];this.element.removeChild(C);this.container.appendChild(C)}this.element.appendChild(this.container)}},setSpeed:function(A){this.speed=A},scroll:function(A,B){switch(A){case 0:this.offset.y-=this.speed;break;case 1:this.offset.y+=this.speed;break;case 2:this.offset.x-=this.speed;break;case 3:this.offset.x+=this.speed;break}if(!B){this.updatePosition()}},startScroll:function(A){this.scrolling[A]=true;if(!this.running){var B=function(){if(!this.running){return }for(var C=0;C<4;C++){if(this.scrolling[C]){this.scroll(C,true)}}this.updatePosition();window.setTimeout(arguments.callee.bind(this),10)};this.running=true;B.call(this)}},stopScroll:function(B){this.scrolling[B]=false;var C=false;for(var A=0;A<4;A++){if(this.scrolling[A]){C=true}}if(!C){this.running=false}},scrollTo:function(E,D,A){var I=Math.ceil(D*0.015);var H=[];A=A||function(){};for(var B in E){var J=Animator.interpolate.linear(this.offset[B],E[B],I);for(var F=0,C=J.length;F<C;F++){if(!H[F]){H[F]={}}H[F][B]=J[F]}}if(this.anim){this.anim.stop(true)}var G=this;this.anim=new Animator(H,D);this.anim.onupdate=function(L){for(var K in L){G.offset[K]=Math.round(L[K],1)}G.updatePosition();return true};this.anim.oncomplete=function(){G.running=false;A.call(this)};this.running=true;this.anim.run()},jumpTo:function(B){for(var A in B){this.offset[A]=Math.round(B[A],1)}this.updatePosition()},updateOffset:function(){if(this.offset.x<0){this.offset.x=0}if(this.offset.y<0){this.offset.y=0}var H=Element.getPosition(this.element);var F=Element.getDimensions(this.element);var G=Element.getPosition(this.container);var D=Element.getDimensions(this.container);var B=H.y+F.height;var A=G.y+D.height;if(A<B){this.offset.y-=(B-A)}var C=H.x+F.width;var E=G.x+D.width;if(E<C){this.offset.x-=(C-E)}},updatePosition:function(){this.updateOffset();this.container.style.marginTop=(-this.offset.y)+"px";this.container.style.marginLeft=(-this.offset.x)+"px"}});Object.extend(Scroller.prototype,{initialize:function(B,A){SimpleScroller.prototype.initialize.call(this,B);this.options={layout:"vertical",dimensions:{element:Element.getDimensions(this.element),container:Element.getDimensions(this.container)},columnWidth:0,loop:false,animate:false,duration:1000};Object.extend(this.options,A||{});if(!this.options.dimensions.element.width){this.options.dimensions.element.width=parseInt(Element.getStyle(this.element,"width"))}if(!this.options.dimensions.element.height){this.options.dimensions.element.height=parseInt(Element.getStyle(this.element,"height"))}if(this.options.speed){this.setSpeed(this.options.speed)}this.dimensions=this.options.dimensions;this.makePositioned();if(this.options.layout.match(/horizontal/)&&this.options.columnWidth){this.setupHorizontal();if(this.options.loop){this.setupHorizontalLoop()}}},setSpeed:function(A){this.speed=A},makePositioned:function(){var A=Element.getStyle(this.element,"position");if(A==null){A=""}if(!A.match(/(relative|absolute)/)){Element.setStyle(this.element,{position:"relative",display:""})}var B=Element.getStyle(this.container,"position");if(B==null){B=""}if(!B.match(/absolute/)){Element.setStyle(this.container,{position:"absolute",left:"0px",display:"block"})}},setupHorizontalLoop:function(){this.cloneContainer=this.container.cloneNode(true);var A=parseInt(Element.getStyle(this.container,"left"))-this.dimensions.container.width;Element.setStyle(this.cloneContainer,{left:A+"px"});this.element.appendChild(this.cloneContainer)},setupHorizontal:function(){var B=this.container.childNodes;B=$A(B).findAll(function(E){return(E.nodeType==1)});var C=B.length*this.options.columnWidth;this.dimensions.container.width=C;Element.setStyle(this.container,{width:C+"px",height:this.dimensions.element.height+"px"});var D=0;var A=this;B._each(function(E){Element.setStyle(E,{position:"absolute",left:D+"px"});D+=A.options.columnWidth})},scroll:function(A,B){this.direction=A;SimpleScroller.prototype.scroll.call(this,A,B)},swapContainers:function(){var A=this.container;this.container=this.cloneContainer;this.cloneContainer=A},updateOffset:function(){var H=Element.getPosition(this.element);var F=Element.getDimensions(this.element);var G=Element.getPosition(this.container);var D=Element.getDimensions(this.container);var B=H.y+F.height;var A=G.y+D.height;var C=H.x+F.width;var E=G.x+D.width;if(!this.options.loop){if(this.offset.x<0){this.offset.x=0}if(this.offset.y<0){this.offset.y=0}if(A<B){this.offset.y-=(B-A)}if(E<C){this.offset.x-=(C-E)}}else{if((Math.abs(this.offset.x)>=this.dimensions.container.width)){this.swapContainers();if(this.direction==Scroller.DIR_LEFT){this.cloneContainer.style.left=-this.dimensions.container.width+"px";this.offset.x=parseInt(Element.getStyle(this.container,"left"))+this.speed}else{if(this.direction==Scroller.DIR_RIGHT){this.cloneContainer.style.left=-this.dimensions.element.width+"px";this.offset.x=parseInt(Element.getStyle(this.container,"left"))-this.speed}}}}},scrollFor:function(C){var B=[this.container];if(this.options.loop){B.push(this.cloneContainer)}if(this.options.layout.match(/horizontal/)){var A=new Transitions.HorizontalSlide(B,C,this.options.duration);A.run()}else{var A=new Transitions.VerticalSlide(B,C,this.options.duration);A.run()}},updatePosition:function(){this.updateOffset();if(this.options.animate&&this.options.layout.match(/horizontal/)){var C=parseInt(Element.getStyle(this.container,"left"));if(isNaN(C)){C=0}var D=-parseInt(this.offset.x)-C}else{if(this.options.animate&&this.options.layout.match(/vertical/)){var B=parseInt(Element.getStyle(this.container,"top"));if(isNaN(B)){B=0}var D=-parseInt(this.offset.y)-B}}if(!this.options.animate){Element.setStyle(this.container,{top:(-this.offset.y)+"px",left:(-this.offset.x)+"px"})}if(this.options.loop&&this.options.layout.match(/horizontal/)){var A=(this.direction==Scroller.DIR_LEFT)?-1:1;var C=parseInt(Element.getStyle(this.container,"left"))+(A*this.dimensions.container.width);Element.setStyle(this.cloneContainer,{left:C+"px"})}if(this.options.animate){this.scrollFor(D)}}});
// /lib/widgets/widgets_core.js from ui
var Widgets={updateLabelClass:function(A){var A=$(A);var C=Array(Array("checkbox","checkbox-small","radio","radio-small"),Array("hover","default"),Array("checked","unchecked"));var B=C.collect(function(){return 0});var D=C.length;while(!B[D]){var E=C.collect(function(G,F){return G[B[F]]});Element.removeClassName(A,E.join("-"));B[0]++;B.each(function(G,F){if(F==D||G<C[F].length){throw $continue}B[F]=0;B[F+1]=(B[F+1]||0)+1})}var E=C.collect(function(F){return F.find(function(G){return Element.hasClassName(A,G)})});if(Element.hasClassName(A,"disabled")){E[1]="default"}Element.addClassName(A,E.join("-"))},getLabelForControl:function(A){var C=$(A).id;var B=$(A).parentNode.getElementsByTagName("label");return $A(B).find(function(D){return C==D.htmlFor})},build:function(A){var B=document.getElementsByClassName("widget",$(A));$A(B)._each(function(G){var F=G.getElementsByTagName("button");$A(F)._each(function(H){new Button(H)});var D=G.getElementsByTagName("input");$A(D)._each(function(H){switch(H.type){case"checkbox":if(Element.hasClassName(H,"fancy-checkbox")){new CheckBox(H)}break;case"radio":if(Element.hasClassName(H,"fancy-radio")){new RadioButton(H)}else{H.onclick=function(){if(typeof RadioButton!="undefined"){RadioButton.clearGroup(this.name)}}}break;case"text":new TextField(H);break}});var C=G.getElementsByTagName("textarea");$A(C)._each(function(H){new TextArea(H)});var E=G.getElementsByTagName("select");$A(E)._each(function(H){if(!Element.hasClassName(H,"standard")){new SelectList(H)}});if(Element.hasClassName(G,"dropdown")){new DropDown(G)}})}};addLoadEvent(function(){Widgets.build(document)});
// /lib/widgets/button.js from ui
var Button=Class.create();Object.extend(Button.prototype,{handlers:{mouseover:function(){Element.addClassName(this.element,"hover");if(this.mousedown){Element.addClassName(this.element,"active")}},mouseout:function(){if(!this.focused){Element.removeClassName(this.element,"hover")}Element.removeClassName(this.element,"active")},mousedown:function(){this.mousedown=true;Element.removeClassName(this.element,"active")},mouseup:function(){this.mousedown=false;Element.removeClassName(this.element,"active")},focus:function(){this.focused=true;this.handlers.mouseover.call(this)},blur:function(){this.focused=false;this.mousedown=false;this.handlers.mouseout.call(this)}},initialize:function(A){this.element=$(A);this.element.proxy=this;this.focused=false;this.mousedown=false;this.element.onmouesover=this.handlers.mouseover.bind(this);this.element.onmouseout=this.handlers.mouseout.bind(this);this.element.onmousedown=this.handlers.mousedown.bind(this);this.element.onmouseup=this.handlers.mouseup.bind(this);this.element.onfocus=this.handlers.focus.bind(this);this.element.onblur=this.handlers.blur.bind(this)}});
// /lib/widgets/text_field.js from ui
var TextField=Class.create();TextField.STATUS_DEFAULT="default";TextField.STATUS_FAILED="failed";TextField.STATUS_PASSED="passed";Object.extend(TextField.prototype,{handlers:{focus:function(){this.inputParent.className="focus";if(this.unchanged&&this.origValue!=""){this.element.value=""}this.focusValue=this.element.value},blur:function(){this.inputParent.className=this.status;this.unchanged=(this.focusValue==this.element.value)?true:false;if(this.unchanged&&this.origValue!=""){this.element.value=this.origValue}},keypress:function(A){var A=A||window.event;if(A.keyCode!=9&&A.keyCode!=25){this.unchanged=false}}},initialize:function(A){this.element=$(A);this.element.proxy=this;this.inputParent=this.element.parentNode;this.origValue=this.element.value;this.focusValue=this.origValue;this.unchanged=true;this.status="default";this.element.onfocus=this.handlers.focus.bind(this);this.element.onblur=this.handlers.blur.bind(this);this.element.onkeypress=this.handlers.keypress.bind(this)},set_status:function(A){this.status=A;if(this.inputParent.className!="focus"){this.inputParent.className=this.status}}});
// /lib/widgets/check_box.js from ui
var CheckBox=Class.create();Object.extend(CheckBox.prototype,{handlers:{mouseover:function(){Element.addClassName(this.label,"hover");Element.removeClassName(this.label,"default");Widgets.updateLabelClass(this.label)},mouseout:function(){if(this.focused){return }Element.addClassName(this.label,"default");Element.removeClassName(this.label,"hover");Widgets.updateLabelClass(this.label)},click:function(){if(this.disabled){return }this.status=!this.status;this.updateDisplay();window.setTimeout((function(){this.element.checked=this.status}).bind(this),10)},focus:function(){this.focused=true;this.handlers.mouseover.call(this)},blur:function(){this.focused=false;this.handlers.mouseout.call(this)},keypress:function(A){if((window.event?window.event.keyCode:A.which)!=32){return }if(this.disabled){return }this.status=!this.element.checked;this.updateDisplay()}},initialize:function(B){this.element=$(B);this.element.proxy=this;this.label=Widgets.getLabelForControl(this.element);this.status=this.element.checked;this.disabled=this.element.disabled;this.focused=false;var A=Element.hasClassName(this.element,"checkbox-small")?"checkbox-small":"checkbox";Element.addClassName(this.label,A);Element.addClassName(this.label,"default");Element.addClassName(this.label,this.status?"checked":"unchecked");Widgets.updateLabelClass(this.label);this.label.onmouseover=this.handlers.mouseover.bind(this);this.label.onmouseout=this.handlers.mouseout.bind(this);this.label.onclick=this.handlers.click.bind(this);this.element.onfocus=this.handlers.focus.bind(this);this.element.onblur=this.handlers.blur.bind(this);this.element.onkeypress=this.handlers.keypress.bind(this)},updateDisplay:function(){Element.addClassName(this.label,this.status?"checked":"unchecked");Element.removeClassName(this.label,this.status?"unchecked":"checked");Widgets.updateLabelClass(this.label)},setStatus:function(A){this.element.checked=this.status=A;this.updateDisplay()},setDisabled:function(A){this.element.disabled=this.disabled=A;Element[A?"addClassName":"removeClassName"](this.label,"disabled");this.updateDisplay()}});
// /lib/widgets/select_list.js from ui
var SelectList=Class.create();SelectList.blur_current=function(){if(SelectList.focused){SelectList.focused.element.blur()}};Object.extend(SelectList.prototype,{handlers:{mouseover:function(){Element.addClassName(this.container,this.classPrefix+"hover");Element.addClassName(this.container,"hover")},mouseout:function(){if(!this.focused){Element.removeClassName(this.container,this.classPrefix+"hover");Element.removeClassName(this.container,"hover")}},item_mouseover:function(A){this.clear_selected(A)},item_mouseout:function(){this.clear_selected()},mousedown:function(){this.mousedown=true},mouseup:function(){this.mousedown=false},trigger_mousedown:function(){this.handlers.mousedown.call(this);Element.addClassName(this.container,this.classPrefix+"active");Element.addClassName(this.ctonainer,"active")},trigger_mouseup:function(){if(this.mousedown){window.setTimeout((function(){this.handlers.mouseup.call(this);Element.removeClassName(this.container,this.classPrefix+"active");Element.removeClassName(this.continaer,"active");this.toggle();this.element.focus()}).bind(this),10)}},click:function(A){this.select(A);this.collapse();this.element.focus()},focus:function(){if(this.blur_timeout){window.clearTimeout(this.blur_timeout);this.blur_timeout=null}SelectList.focused=this;this.focused=true;this.handlers.mouseover.call(this)},blur:function(){this.blur_timeout=window.setTimeout((function(){if(this.mousedown){return }this.collapse();this.focused=false;this.handlers.mouseout.call(this);if(SelectList.focused==this){SelectList.focused=null}}).bind(this),10)},keyup:function(A){A=window.event?window.event:A;if(A.keyCode==this.ignore_keycode){return }switch(A.keyCode){case 38:if(A.altKey){this.toggle()}else{this.select(this.selected_index-1)}break;case 40:if(A.altKey){this.toggle()}else{this.select(this.selected_index+1)}break;case 33:this.select(0);break;case 34:this.select(this.element.options.length-1);break;case 32:this.toggle();break;case 27:this.collapse();break;default:var D=String.fromCharCode(A.keyCode);var B=this.selected_index;for(var C=0;C<this.item_keys.length;C++){B=(B+1)%this.item_keys.length;if(this.item_keys[B]!=D){continue}this.select(B);break}break}this.ignore_keycode=A.keyCode;window.setTimeout((function(){this.ignore_keycode=-1}).bind(this),10)},keypress:function(A){A=window.event?window.event:A;A.cancelBubble=(A.keyCode!=9&&A.keyCode!=25);if(A.cancelBubble&&A.preventDefault){A.preventDefault()}return !(A.returnVal=A.cancelBubble)},nav_up_mousedown:function(){this.mousedown=true;this.scroll_list(25)},nav_up_mouseup:function(){this.mousedown=false;this.scroll_list(0);this.element.focus()},nav_down_mousedown:function(){this.mousedown=true;this.scroll_list(-25)},nav_down_mouseup:function(){this.mousedown=false;this.scroll_list(0);this.element.focus()}},initialize:function(D){this.element=$(D);this.element.proxy=this;this.label=document.createTextNode("");this.list_items=Array();this.item_keys=Array();this.focused=false;this.mousedown=false;this.selected_index=-1;this.ignore_keycode=-1;var I=document.createElement("a");I.appendChild(this.label);var H=document.createElement("b");H.appendChild(I);var B=document.createElement("dt");B.appendChild(H);B.onmouseover=this.handlers.mouseover.bind(this);B.onmouseout=this.handlers.mouseout.bind(this);B.onmousedown=this.handlers.trigger_mousedown.bind(this);B.onmouseup=this.handlers.trigger_mouseup.bind(this);var G=document.createElement("ul");var J=document.createElement("dd");J.appendChild(G);var C=document.createElement("div");C.className="select-nav-up";var E=document.createElement("b");E.innerHTML="Up";C.onmousedown=this.handlers.nav_up_mousedown.bind(this);C.onmouseup=this.handlers.nav_up_mouseup.bind(this);C.appendChild(E);J.appendChild(C);var A=document.createElement("div");A.className="select-nav-down";var F=document.createElement("b");F.innerHTML="Down";A.onmousedown=this.handlers.nav_down_mousedown.bind(this);A.onmouseup=this.handlers.nav_down_mouseup.bind(this);A.appendChild(F);J.appendChild(A);Array("ul","ur","lr","ll").each(function(K){var L=document.createElement("i");L.className=K;J.appendChild(L)});this.container=document.createElement("dl");this.container.className="select "+D.className;this.classPrefix="";if(Element.hasClassName(this.container,"small")){Element.addClassName(this.container,"select-small");this.classPrefix="select-small-"}Element.addClassName(this.container,this.classPrefix+"default");Element.addClassName(this.container,"default");this.container.appendChild(B);this.container.appendChild(J);this.item_list=G;this.item_list_container=J;this.scroll_offset=0;this.scroll_timer=null;this.element.parentNode.insertBefore(this.container,this.element.nextSibling);this.element.onfocus=this.handlers.focus.bind(this);this.element.onblur=this.handlers.blur.bind(this);this.element.onkeyup=this.handlers.keyup.bind(this);this.element.onkeypress=this.handlers.keypress.bind(this);this.init_list()},init_list:function(){var F=this.container.getElementsByTagName("ul")[0];while(F.childNodes.length>0){F.removeChild(F.firstChild)}this.list_items=[];this.item_keys=[];for(var E=0;E<this.element.options.length;E++){var D=this.element.options[E];var B=document.createElement("b");B.appendChild(document.createTextNode(D.text));var C=document.createElement("a");C.appendChild(B);C.onclick=this.handlers.click.bind(this,E);C.onmouseover=this.handlers.item_mouseover.bind(this,E);C.onmouseout=this.handlers.item_mouseout.bind(this);C.onmousedown=this.handlers.mousedown.bind(this);C.onmouseup=this.handlers.mouseup.bind(this);var A=document.createElement("li");A.appendChild(C);F.appendChild(A);this.list_items.push(A);this.item_keys.push(D.text.charAt(0).toUpperCase());if(D.selected){this.select(E)}}if(this.selected_index==-1){this.select(0)}else{this.select(this.selected_index)}},scroll_list:function(A){if(this.container_bounds.length==0||this.list_bounds.length==0){this.find_boundaries()}this.scroll_offset+=A;this.scroll_offset=Math.min(0,this.scroll_offset);this.scroll_offset=Math.max(this.container_bounds[1]-this.list_bounds[1],this.scroll_offset);this.item_list.style.marginTop=this.scroll_offset+"px";if(A!=0){if(this.scroll_timer){window.clearTimeout(this.scroll_timer)}this.scroll_timer=window.setTimeout(this.scroll_list.bind(this,A),10)}else{window.clearTimeout(this.scroll_timer);this.scroll_timer=null}},find_boundaries:function(){this.container_bounds=[Element.getPosition(this.item_list_container).y];this.container_bounds[1]=this.container_bounds[0]+Element.getDimensions(this.item_list_container).height;var A=this.item_list.getElementsByTagName("li");var B=Element.getDimensions(A[0]).height;var C=A.length*B+3;this.list_bounds=[Element.getPosition(this.item_list).y];this.list_bounds[1]=this.list_bounds[0]+C;if(this.item_list_container.className=="oversized"){this.list_bounds[1]+=18}},expanded:function(){return Element.hasClassName(this.container,this.classPrefix+"open")},expand:function(){if(this.expanded()){return }Element.addClassName(this.container,this.classPrefix+"open");Element.addClassName(this.container,"open");this.clear_selected(this.selected_index);if(this.element.onexpand){this.element.onexpand.call(this.element)}var A=999999;this.container.style.zIndex=A;var B=this.container.parentNode;while(B){A-=1;if(B.style){B.style.zIndex=A}B=B.parentNode}this.scroll_offset=0;this.item_list.style.marginTop=0;this.find_boundaries();if(this.list_bounds[1]-this.list_bounds[0]>300){this.item_list_container.className="oversized";this.container_bounds=[];this.list_bounds=[]}else{this.item_list_container.className=""}this.container_bounds=[]},collapse:function(){if(!this.expanded()){return }Element.removeClassName(this.container,this.classPrefix+"open");Element.removeClassName(this.container,"open");var A=this.container;while(A){if(A.style){A.style.zIndex=""}A=A.parentNode}if(this.element.oncollapse){this.element.oncollapse.call(this.element)}},toggle:function(){this[this.expanded()?"collapse":"expand"]()},select:function(A,C){if(A<0){return }if(A>=this.element.options.length){return }this.selected_index=A;var B=this.element.options[A];this.label.replaceData(0,this.label.length,B.text);if(!C){this.element.value=B.value;if(this.element.onchange){this.element.onchange.call(this.element)}}if(this.expanded()){this.scroll_offset=-28*A;this.scroll_list(0)}this.clear_selected(A)},clear_selected:function(A){this.list_items.each(function(D,C){var B=D.getElementsByTagName("a")[0];Element[(C==A)?"addClassName":"removeClassName"](B,"hover")})}});
// /lib/widgets/radio_button.js from ui
var RadioButton=Class.create();RadioButton.groups={};RadioButton.clearGroup=function(A){RadioButton.groups[A].each(function(B){B.clear()})};RadioButton.clearChecked=function(A){RadioButton.groups[A].each(function(B){B.element.checked=false})};Object.extend(RadioButton.prototype,{handlers:{mouseover:function(){Element.addClassName(this.label,"hover");Element.removeClassName(this.label,"default");Widgets.updateLabelClass(this.label)},mouseout:function(){if(this.focused){return }Element.addClassName(this.label,"default");Element.removeClassName(this.label,"hover");Widgets.updateLabelClass(this.label)},click:function(){this.element.click();if(!this.element.checked){RadioButton.clearChecked(this.element.name);this.element.checked=true}this.updateDisplay()},focus:function(){this.focused=true;this.handlers.mouseover.call(this);window.setTimeout(this.updateDisplay.bind(this),10)},blur:function(){this.focused=false;this.handlers.mouseout.call(this)},keypress:function(A){if((window.event?window.event.keyCode:A.which)!=32){return }window.setTimeout(this.updateDisplay.bind(this),10)}},initialize:function(C){this.element=$(C);this.element.proxy=this;this.label=Widgets.getLabelForControl(this.element);this.focused=false;var B=this.element.name;if(!RadioButton.groups[B]){RadioButton.groups[B]=Array()}RadioButton.groups[B].push(this);var A=Element.hasClassName(this.element,"radio-small")?"radio-small":"radio";Element.addClassName(this.label,A);Element.addClassName(this.label,"default");Element.addClassName(this.label,this.element.checked?"checked":"unchecked");Widgets.updateLabelClass(this.label);this.label.onmouseover=this.handlers.mouseover.bind(this);this.label.onmouseout=this.handlers.mouseout.bind(this);this.label.onclick=this.handlers.click.bind(this);this.element.onfocus=this.handlers.focus.bind(this);this.element.onblur=this.handlers.blur.bind(this);this.element.onkeyup=this.handlers.keypress.bind(this)},clear:function(){Element.addClassName(this.label,"unchecked");Element.removeClassName(this.label,"checked");Widgets.updateLabelClass(this.label)},updateDisplay:function(){if(!this.element.checked){return }RadioButton.clearGroup(this.element.name);Element.addClassName(this.label,"checked");Element.removeClassName(this.label,"unchecked");Widgets.updateLabelClass(this.label)}});
// /lib/widgets/text_area.js from ui
var TextArea=Class.create();Object.extend(TextArea.prototype,{handlers:{focus:function(){this.areaParent.className="focus"},blur:function(){this.areaParent.className="default"}},initialize:function(A){this.element=$(A);this.element.proxy=this;this.areaParent=this.element.parentNode;this.element.onfocus=this.handlers.focus.bind(this);this.element.onblur=this.handlers.blur.bind(this)}});
// /lib/widgets/drop_down.js from ui
var DropDown=Class.create();Object.extend(DropDown.prototype,{initialize:function(C){this.element=$(C);this.item_keys=Array();var D=this.element.getElementsByTagName("dt")[0];var E=D.getElementsByTagName("a")[0];var A=this.element.getElementsByTagName("li");for(var B=0;B<A.length;B++){if(Element.hasClassName(A[B],"active")){E.href=A[B].firstChild.href;E.innerHTML=A[B].firstChild.firstChild.innerHTML}}}});
// /lib/migcookie.js from ui
function isMigrated(){return true}var userIsMigrated=(function(){var A=CIM.user.getNow(["isLoggedIn"]);if(A.isLoggedIn){return isMigrated()}})();
// /lib/mctunnel.js from ui
if(typeof deconcept=="undefined"){alert("SWFObject is required.")}var McTunnel={swf:null,setSWF:function(A){this.swf=A},isLoaded:function(){}};McTunnel.Callback={};McTunnel.Manager=function(){return this.getInstance.apply(this)};McTunnel.Manager._instance=null;Object.extend(McTunnel.Manager.prototype,{_queue:[],proxy:null,getInstance:function(){if(!McTunnel.Manager._instance){this.initialize();McTunnel.Manager._instance=this}return McTunnel.Manager._instance},initialize:function(){if(McTunnel.swf==null){return }var B=new SWFObject(McTunnel.swf,"McTunnelManager","1","1","9","transparent");B.addParam("allowScriptAccess","always");var C=document.createElement("div");C.setAttribute("id","McTunnelManagerContainer");C.style.width="1px";C.style.height="0px";C.style.overflow="hidden";document.body.appendChild(C);B.write("McTunnelManagerContainer");var A=this;setTimeout(function(){A.checkLoaded()},50)},runQueue:function(){var A=this;if(this._queue.length){this._queue.invoke("apply",A)}},checkLoaded:function(){if($("McTunnelManager")&&typeof ($("McTunnelManager").create)=="function"){this.proxy=$("McTunnelManager");this.runQueue();return true}var A=this;setTimeout(function(){A.checkLoaded()},50);return false},create:function(C,B,E,A){if(!this.proxy){this._queue.push(function(){this.create(C,B,E,A)});return }try{this.proxy.create(C,B,E,A)}catch(D){console.log(D)}},setVariable:function(A,B,C){if(!this.proxy){this._queue.push(function(){this.setVariable(A,B,C)});return }this.proxy.addVariable(A,B,C)},send:function(B){var A=this;if(!this.proxy){this._queue.push(function(){this.send(B)});return }try{this.proxy.send(B)}catch(C){console.log(C)}}});McTunnel.Request=Class.create();Object.extend(McTunnel.Request.prototype,{initialize:function(name,url,callback){var responseType=arguments[3]||"xml";this.name=name;McTunnel.Callback[name]=function(json){eval("var obj = "+json);callback(obj)};this.manager=new McTunnel.Manager();this.manager.create(name,url,"McTunnel.Callback."+name,responseType)},setVariable:function(A,B){this.manager.setVariable(this.name,A,B)},send:function(){this.manager.send(this.name)}});McTunnel.setSWF("/ui/swf/McTunnelManager.swf");
// /lib/beta/cookie.js from ui
(function(A){jQuery.cookie=(function(){var B=["browse_alpha","browse_list","browse_locked","tvlistings_signinPrompted","fb_fan","browser_old","browser_osx","user_comcast","user_mecomcast","hide_ftue"];function C(G,E,F){var D;if(E>G.length-1){D=G}else{D=G.substr(0,E)+F+G.substr(E+1)}return D}return{__read:function(F){var I=document.cookie.split(";");var H=new RegExp("(?:^|\\s+)"+F+"=(.*)");for(var G=0,D=I.length;G<D;G++){var E=I[G].match(H);if(E){return E[1]}}return null},__write:function(F,I,E){E[F]=I;var H=[F,"expires","path","domain"],J=[];for(var G=0,D=H.length;G<D;G++){if(typeof E[H[G]]=="undefined"){continue}J.push([H[G],E[H[G]]].join("="))}document.cookie=J.join("; ")},__remove:function(E,D){this.write(E,"",A.extend(D,{expire_days:-1}))},read:function(D){var G=this.__read(D);if(G===null){var F,E=0;while(F===this.__read([D,E].join("."))){G=(G||"")+F;E++}}return G},write:function(F,H,E){var D=A.extend({path:"/",domain:".comcast.net"},E);if(typeof D.expire_days!="undefined"){var I=new Date();I.setTime(I.getTime()+D.expire_days*86400000);D.expires=I.toGMTString()}if(typeof D.expire_date!="undefined"){D.expires=D.expire_date.toGMTString()}var J=4000;if(H.length<J){this.__write(F,H,D)}else{this.remove(F,E);var G=0;while(H.length>0){this.__write([F,G].join("."),H.substr(0,J),D);H=H.substr(J);G++}}},remove:function(E,D){if(this.__read(E)!==null){this.__remove(E,D)}else{var F=0;while(this.__read([E,F].join("."))){this.__remove([E,F].join("."),D);F++}}},encode:function(E){var D=[];A.each(E,function(G,F){D.push([G,F.replace("%","%25").replace(";","%3B")].join("="))});return D.join("&")},decode:function(I){if(!I){return{}}var G={},H=I.split("&");for(var F=0,D=H.length;F<D;F++){var E=H[F].split("=");G[E[0]]=unescape(E[1])}return G},exists:function(D){return(typeof (this.read(D))==="string")},pref:function(E,G){var F="",H,D=false;if(typeof E==="undefined"){return }H=A.inArray(E,B);if(H===-1){return }if(typeof G==="undefined"){if(this.exists("b")){F=this.read("b");if(F.charAt(H)==="1"){D=true}}}else{if(this.exists("b")){F=this.read("b")}while(F.length<=B.length){F+="2"}F=C(F,H,(G?1:0));this.write("b",F);D=G}return D}}}());CIM.user.get(["isLoggedIn"],function(B){if(!B.isLoggedIn){try{Prefs.remove("edata.last_success_version")}catch(C){}A.cookie.remove("token");A.cookie.remove("edata");A.cookie.remove("xedata");A.cookie.remove("entitlementPageViewCount")}})}(jQuery));
// /lib/beta/aws_pref_store.js from ui
var BufferedStore=(function(A){return A.extend({},PrefStore,{_buffer:null,_buffer_changed:false,_load_buffer:function(){throw this.not_implemented},_write_buffer:function(){throw this.not_implemented},commit:function(){if(!this._buffer_changed){return }this._write_buffer();this._buffer_changed=false},get:function(B){this._load_buffer();if(this._buffer==null||typeof this._buffer[B]=="undefined"){throw this.no_value}return this._buffer[B]},set:function(B,C){this._load_buffer();if(this._buffer!=null){this._buffer[B]=C;this._buffer_changed=true}},remove:function(B){this._load_buffer();delete this._buffer[B];this._buffer_changed=true}})})(jQuery);var AWSStore=(function(A){return A.extend({},BufferedStore,{_name:null,_bucket:null,_url_node:null,_aws_root:null,_is_logged_in:function(){var B=CIM.user.getNow(["isLoggedIn"]);return B.isLoggedIn},_get_guid:function(){var B=CIM.user.getNow(["guid"]);return B.guid},_load_buffer:function(){if(this._buffer!=null){return }if(!this._is_logged_in()){this._buffer=null;return }var C=A.ajax({async:false,cache:false,type:"GET",url:"/user/authkey/service/amazonget/",data:{guid:this._get_guid(),service:this._bucket,fmt:"xml",ts:(new Date()).getTime()},dataType:"xml"});var B=A(C.responseXML).find(this._url_node).text().replace(/https:\/\/.*?\//,this._aws_root);var C=A.ajax({async:false,cache:false,type:"GET",url:B,dataType:"xml"});if(C.status==200){this._buffer=A.cookie.decode(C.responseText)}else{this._buffer={}}this._buffer_changed=false},_write_buffer:function(){if(this._buffer==null){return }if(!this._is_logged_in()){return }var B=A.cookie.encode(this._buffer);var C=this;A.ajax({url:"/user/authkey/service/amazonpost/",data:{guid:this._get_guid(),service:this._bucket,fmt:"xml",ts:(new Date()).getTime()},type:"GET",success:function(H,E){var M=A(H).find("accessKey").text();var L=A(H).find("policy").text();var F=A(H).find("signature").text();var I=A(H).find("encryptedGuid").text();var D=parseInt(2147483647*Math.random())+"";var J={key:"uploads/"+I,policy:L,signature:F,AWSAccessKeyId:M,acl:"private","Content-Type":"text/plain",file:B};var K="";for(var G in J){K+=["--"+D,'Content-Disposition: form-data; name="'+G+'"',"",J[G],""].join("\r\n")}K+="--"+D+"--";A.ajax({url:C._aws_root,type:"POST",contentType:"multipart/form-data; boundary="+D,processData:false,data:K})}})}})})(jQuery);var LazyAWSStore=(function(A){return A.extend({},AWSStore,{_buffer_load_success:null,_buffer_load_failure:null,_buffer_write_success:null,_buffer_write_failure:null,loadBuffer:function(){var B=this._load_buffer();if(!B&&this._buffer!=null&&this._buffer_load_success){A(this).trigger(this._buffer_load_success)}},get:function(C,B){this._load_buffer();if(this._buffer==null||typeof this._buffer[C]=="undefined"){return B}return this._buffer[C]},set:function(B,C){this._load_buffer();if(this._buffer!=null){this._buffer[B]=C;this._buffer_changed=true}this.commit()},_load_buffer:function(){if(this._buffer!=null){return false}var B=CIM.user.getNow(["isLoggedIn","guid"]);if(!B.isLoggedIn){this._buffer=null;return }var F=parseInt(Math.random()*65535);var E=A.ajax({async:false,cache:false,type:"GET",url:"/user/authkey/service/amazonget/",data:{guid:B.guid,service:this._bucket,fmt:"xml",ts:(new Date()).getTime()},dataType:"xml"});var C=A(E.responseXML).find(this._url_node).text().replace(/https:\/\/.*?\//,this._aws_root);var D=unescape(C.replace(/.*?\/([^/?]+)\?.*/,"$1"));var E=A.ajax({async:false,cache:false,type:"GET",url:C,dataType:"xml"});if(E.status==200){this._buffer=A.cookie.decode(E.responseText);if(this._buffer_load_success){A(this).trigger(this._buffer_load_success)}}else{if(E.status==404){this._buffer={};if(this._buffer_load_success){A(this).trigger(this._buffer_load_success)}}else{this._buffer=null;if(this._buffer_load_failure){A(this).trigger(this._buffer_load_failure)}}}this._buffer_changed=false;return true},_write_buffer:function(){if(this._buffer==null){return }var B=CIM.user.getNow(["isLoggedIn","guid"]);if(!B.isLoggedIn){return }var E=parseInt(Math.random()*65535);var C=A.cookie.encode(this._buffer);var D=this;A.ajax({url:"/user/authkey/service/amazonpost/",data:{guid:B.guid,service:this._bucket,fmt:"xml",ts:(new Date()).getTime()},type:"GET",error:function(F,H,G){},success:function(J,G){var O=A(J).find("accessKey").text();var N=A(J).find("policy").text();var H=A(J).find("signature").text();var K=A(J).find("encryptedGuid").text();var F=parseInt(2147483647*Math.random())+"";var L={key:"uploads/"+K,policy:N,signature:H,AWSAccessKeyId:O,acl:"private","Content-Type":"text/plain",file:C};var M="";for(var I in L){M+=["--"+F,'Content-Disposition: form-data; name="'+I+'"',"",L[I],""].join("\r\n")}M+="--"+F+"--";A.ajax({url:D._aws_root,type:"POST",contentType:"multipart/form-data; boundary="+F,processData:false,data:M,success:function(P,Q){if(D._buffer_write_success){A(D).trigger(D._buffer_write_success)}},error:function(P,R,Q){if(D._buffer_write_failure){A(D).trigger(D._buffer_write_failure)}}})}})}})})(jQuery);
// /modules/articlelist.js from ui
var ArticleListTabs=Class.create();Object.extend(ArticleListTabs.prototype,TabBar.prototype);Object.extend(ArticleListTabs.prototype,{tab_name:function(A){return A&&decodeURI(A.getElementsByTagName("a")[0].href.split("#")[1])},tab_list:function(){var D=[];for(var B=0,A=this.tab_ids.length;B<A;B++){var C=$(this.tab_ids[B]);D.push(this.tab_name(C))}return D},set_enabled:function(A){for(var E=0,B=this.tab_ids.length;E<B;E++){var F=$(this.tab_ids[E]);var D=this.tab_name(F);var C=$A(A).detect(function(G){return D==G});Element[C?"addClassName":"removeClassName"](F,"enabled")}},select_tab:function(B){for(var C=0,A=this.tab_ids.length;C<A;C++){var D=$(this.tab_ids[C]);if(this.tab_name(D)==B){this.update(C)}}}});var ArticleList={initialize:function(A){this.tabs=A;if(this.prefs=$("articlelist-prefs")){this.check_list=$A(this.prefs.getElementsByTagName("ul")[0].getElementsByTagName("input"))}},show_prefs:function(){var B=Prefs.get("articlelist.enabled_tabs",[]);var A=Prefs.get("articlelist.default_tab","");this.set_checks(B);this.set_default(A);this.prefs.style.display="block"},hide_prefs:function(){this.prefs.style.display="none"},save_prefs:function(){var B=[];var A="";this.check_list.each(function(C){if(Element.hasClassName(C.proxy.label,"default-tab")){A=C.value}if(C.proxy.status){B.push(C.value)}});if(B.length==0){throw"You must choose at least one category."}this.enact_prefs(B,A)},enact_prefs:function(B,A){Prefs.bundle(function(){Prefs.set("articlelist.enabled_tabs",B,Prefs.SERVER);Prefs.set("articlelist.default_tab",A,Prefs.SERVER)});this.tabs.set_enabled(B);this.tabs.select_tab(A)},set_default:function(A){this.check_list.each(function(B){if(B.proxy.status&&B.value==A){Element.addClassName(B.proxy.label,"default-tab")}else{Element.removeClassName(B.proxy.label,"default-tab")}});this.force_default()},set_checks:function(A){this.check_list.each(function(C){var D=false;for(var E=0,B=A.length;E<B;E++){if(C.value==A[E]){D=true}}C.proxy.setStatus(D)});this.limit_selection()},force_default:function(){var C=false;this.check_list.each(function(D){if(D.proxy.status&&Element.hasClassName(D.proxy.label,"default-tab")){C=true}});if(C){return }for(var B=0,A=this.check_list.length;B<A;B++){if(this.check_list[B].proxy.status){this.set_default(this.check_list[B].value);return }}},limit_selection:function(){var A=0;this.check_list.each(function(B){if(B.proxy.status){A++}});if(A==5){this.check_list.each(function(B){if(!B.proxy.status){B.proxy.setDisabled(true)}})}else{this.check_list.each(function(B){B.proxy.setDisabled(false)})}}};addLoadEvent(function(){var A=$("articlecategories-container");if(A){for(var E=0;E<A.childNodes.length;E++){if(A.childNodes[E].nodeType!=1){continue}new TabBar(A.childNodes[E].id)}}new TabBar("mostpopular");var H=new ArticleListTabs("articlelist");H.onchange=function(O){var N=this.tab(O),M=this.panel(O);if(!N||!M){return false}var K=this.tab_name(N);var L=M.getElementsByTagName("div")[0].className;if(L=="success"){return true}new Ajax.Request("./articlelist/"+K+"/",{method:"GET",onSuccess:function(T){M.innerHTML=T.responseText;var Q=M.getElementsByTagName("span");$A(Q).each(function(V){if(V.className=="timestamp"){var W=$A(V.childNodes).detect(function(X){return X.nodeType==8}).nodeValue;var U=$A(V.childNodes).detect(function(X){return X.nodeType==3}).nodeValue;V.innerHTML=elapsedTimestamp(W,U)}});var S=$("articlelist").getElementsByTagName("i");for(var P=0;P<S.length;P++){var R=S[P].className;S[P].className="";S[P].className=R}},onError:function(){var P=document.createElement("div");P.className="error";P.innerHTML="Unable to retrieve article list";M.innerHTML="";M.appendChild(P)}});return true};H._tracking=false;var C=$("articlelist-change-prefs");if(C){C.onclick=function(K){ArticleList.show_prefs();return cancelEvent(K)};if(Prefs.get("articlelist.changed_prefs",0)==1){C.innerHTML="Edit Preferences"}C.style.display="inline"}else{if(document.body.id=="smartzone-module"){H._tracking=false;var F=0;for(var E=0;tab=H.tab(E);E++){if(Element.hasClassName(tab,"default")){F=E}}H.update(F);return }else{H.update(0);H._tracking=true;return }}ArticleList.initialize(H);var G=H.tab_list();var D=Prefs.get("articlelist.enabled_tabs",[]);var J=false;for(var E=0;E<D.length;E++){if($A(G).detect(function(K){return K==D[E]})){J=true;break}}if(D.length==0||!J){D=[G[0],G[1],G[2],G[3],G[4]]}var I=Prefs.get("articlelist.default_tab","");if(!D.detect(function(K){return K==I})){I=D[0]}var B=true;for(var E=0;E<D.length;E++){if(I==D[E]){B=false}}if(B){I=D[0]}ArticleList.enact_prefs(D,I);$("articlelist-prefs-close").onclick=function(K){ArticleList.hide_prefs();return cancelEvent(K)};$("articlelist-prefs-cancel").onclick=function(K){ArticleList.hide_prefs();return cancelEvent(K)};$("articlelist-prefs-save").onclick=function(K){Prefs.set("articlelist.changed_prefs",1);C.innerHTML="Edit Preferences";try{ArticleList.save_prefs();ArticleList.hide_prefs()}catch(M){alert(M)}Tracking.resetVars();var L=$A(Prefs.get("articlelist.enabled_tabs",[])).collect(function(N){return N.replace(/-tab$/,"")}).join(":");Tracking.setVar("prop20",L);s.tl(this,"o","In The News Module - Customized Window - Save Button");return cancelEvent(K)};ArticleList.check_list.each(function(K){K.onchange=function(M){ArticleList.limit_selection();ArticleList.force_default()};var L=K.proxy.label.getElementsByTagName("a")[0];L.onclick=function(M){ArticleList.set_default(K.value);return cancelEvent(M)}});H._tracking=true});
// /modules/articles/articles.js from ui
function videoEmbed(){var G=$("related-article-embed");if(!G){return }G.parentNode.removeChild(G);var D=G.getElementsByTagName("object");var F=G.getElementsByTagName("embed");var C=G.getElementsByTagName("iframe");if((C.length>0)||(D.length>0)||(F.length>0)){var E=document.getElementById("article");if(E==null){return false}var A=E.getElementsByTagName("p");if(A.length>article_embed_pos+1){var B=A[article_embed_pos+1]}else{var B=A[A.length-1].nextSibling}B.parentNode.insertBefore(G,B);return }}addLoadEvent(function(){videoEmbed()});function articleAnchorTargets(){var D=document.getElementById("article");if(D==null){return false}var C=D.getElementsByTagName("p");for(i=0;i<C.length;i++){var A=C[i].getElementsByTagName("a");var B="";for(j=0;j<A.length;j++){B=A[j].getAttribute("href");if(B.indexOf("comcast.net")==-1){A[j].setAttribute("target","_blank")}}}}addLoadEvent(function(){articleAnchorTargets()});var URItoMG=Class.create();Object.extend(URItoMG.prototype,{initialize:function(){this.pcp=document.config.pathContext.substring(1,document.config.pathContext.length-1).split("/");this.articles=this.pcp[0];this.channel=this.pcp[1];if(this.channel.indexOf("-")!=-1){this.channel=this.pcp[1].substring(0,this.pcp[1].indexOf("-"));this.subchannels=this.pcp[1].substring(this.pcp[1].indexOf("-")+1).replace("-","/")+"/"}else{this.subchannels=""}this.date=this.pcp[2].substring(0,4)+"/"+this.pcp[2].substring(4,6)+"/"+this.pcp[2].substring(6,8);this.slug=this.pcp[3]},buildMgUrl:function(){return"/"+this.channel+"/articles/"+this.subchannels+this.date+"/"+this.slug+".xml"}});var MGtoArticleURL=Class.create();Object.extend(MGtoArticleURL.prototype,{initialize:function(A){this.path=A.substring(A.indexOf("/api/data")+10);this.pcp=this.path.split("/");this.pcpLength=this.pcp.length;this.articles=this.pcp[1];this.channel=this.pcp[0];if(this.pcpLength>6){this.subchannels="-"+this.pcp[2];if(this.pcpLength==8){this.subchannels+="-"+this.pcp[3]}}else{this.subchannels=""}this.date=this.pcp[this.pcpLength-4]+this.pcp[this.pcpLength-3]+this.pcp[this.pcpLength-2];this.slug=this.pcp[this.pcpLength-1]},buildUrl:function(){return"/articles/"+this.channel+this.subchannels+"/"+this.date+"/"+this.slug.slice(0,-4)+"/"}});var RelatedArticles={initialize:function(){var A=$("related-articles");if(A){var B=this.getAjaxUrl();new Ajax.Request(B,{method:"GET",encoding:"UTF-16",onSuccess:function(C){var E;if(jQuery.browser.msie){E=new ActiveXObject("Microsoft.XMLDOM");E.async=false;E.loadXML(C.responseText)}else{E=C.responseXML}var F=E.getElementsByTagName("RESULT");if(F&&F.length>0){var I="<ul>";var H=0;$A(F).each(function(L){if(H<4){var M=new MGtoArticleURL(L.getElementsByTagName("ID")[0].firstChild.nodeValue);var N=L.getElementsByTagName("TITLE")[0].firstChild.nodeValue;I+='<li><a href="'+M.buildUrl()+'" rel="default" title="'+N+'">'+N+"</a></li>"}H++});I+="</ul>";var G='<div class="related"><h2 class="media">Related Articles</h2>';var J='<i class="ul"></i><i class="ur"></i><i class="lr"></i><i class="ll"></i></div>';A.innerHTML=G+I+J;A.appendChild(TrackingNode.build_comment("META",{module:["relatedarticles"]}));var K=A.getElementsByTagName("a");for(var D=0;D<K.length;D++){K[D].appendChild(TrackingNode.build_comment("META",{linkType:["basic"]}))}}}})}},getAjaxUrl:function(){var E="/apolloapi/FGetSimilarNewsFromId?SourceID=";var C=document.config.ssMgProxy;var B="/midgard/cachesvc/api/data";var A=new URItoMG;var D=A.buildMgUrl();return E+C+B+D}};addLoadEvent(function(){if(document.config.ssMgProxy){RelatedArticles.initialize()}});var RelatedVideos={initialize:function(A){var B=$("related-videos");if(B){var C=this.getAjaxUrl(A);new Ajax.Request(C,{method:"GET",onSuccess:function(E){var G;if(jQuery.browser.msie){G=new ActiveXObject("Microsoft.XMLDOM");G.async=false;G.loadXML(E.responseText)}else{G=E.responseXML}var H;try{H=G.getElementsByTagName("results")[0].getElementsByTagName("content")}catch(K){if(K instanceof TypeError){document.getElementById("latestvideos").style.display="block";document.getElementById("related-videos").style.display="none";return }else{throw K}}if(H&&H.length>0){var L="<ul>";$A(H).each(function(O){var Q=O.getElementsByTagName("title")[0].firstChild.nodeValue;var V=O.getElementsByTagName("linkText")[0].firstChild.nodeValue;if(!V||V=="null"||V.trim()=="More News"){V="Associated Press"}var U=O.getElementsByTagName("thumbnailURL")[0].firstChild.nodeValue;var R=O.getElementsByTagName("thePlatformURL")[0].firstChild.nodeValue;var S=/popup\.html/;var T=S.test(R);if(T){var P="http://www.comcast.net/data/fan/html/popup.html"+unescape(R.substring(R.indexOf("popup.html")+10))+"&cid=fanlink&attr="+document.config.dataPackageContext.split("/")[1]+"article_related"}else{var P=unescape(R.substring(R))}L+="<li>";L+='<a href="'+P+'" rel="';if(T){L+="fan "}L+='track" title="'+Q+'"><img src="'+U+'" alt="'+Q+'" /></a>';L+='<a href="'+P+'" rel="';if(T){L+="fan "}L+='track" title="'+Q+'">'+Q.limit(35)+"</a>";L+="<p>"+V+"</p>";L+="</li>"});L+="</ul>";var J="<i class='ul'></i><i class='ur'></i><i class='lr'></i><i class='ll'></i>";var I='<h2 class="media video">Related Videos</h2><div class="capsule medium fixed-small clearfix">';var M="</div>";B.innerHTML=I+L+J+M;B.appendChild(TrackingNode.build_comment("META",{module:["relatedvideos"]}));var N=B.getElementsByTagName("a");for(var F=0;F<N.length;F++){assign_handlers(N[F]);N[F].appendChild(TrackingNode.build_comment("META",{linkType:["basic"]}));var D=N[F].getElementsByTagName("img");if(D.length>0){N[F].appendChild(TrackingNode.build_comment("META",{linkText:[D[0].alt]}))}}}else{$("related-videos").style.display="none";$("latestvideos").style.display="block"}}})}},getAjaxUrl:function(B){var B=B||6;var F="/apolloapi/FGetSimilarVideoFromNewsId?resultsFormat=FAST&numResults="+B+"&SourceID=";var D=document.config.ssMgProxy;var C="/midgard/cachesvc/api/data";var A=new URItoMG;var E=A.buildMgUrl();return F+D+C+E}};addLoadEvent(function(){if(document.config.ssMgProxy){RelatedVideos.initialize(5)}});
// /modules/cover_transitions.js from ui
CoverTransition=Class.create();Object.extend(CoverTransition.prototype,{initialize:function(C,B,A){this.frames=C||[];this.time=B||0;this.setup=A||function(){return false}},animate:function(B,C,F){if(this.frames.length==0){return false}var A={old_cover:Cover.getById(B),new_cover:Cover.getById(C)};if(!A.old_cover||!A.new_cover){return false}for(var D in A){if(Element.hasClassName(A[D].getElementsByTagName("div")[0],"flash")){return false}}var E=new Animator(this.frames,this.time);Object.extend(E,A);return this.setup(E,F)}});var defaultTransition="reveal";var Transitions=(function(){var width=550;var frames=60;var time=1000;return{none:new CoverTransition(),slide:new CoverTransition(Animator.interpolate.root(0,-width,frames),time,function(anim,direction){with(anim.new_cover.style){left=(direction*width)+"px";display="block"}anim.onupdate=function(value){this.new_cover.style.left=direction*(width+value)+"px";this.old_cover.style.left=direction*value+"px";return true};anim.oncomplete=function(){this.old_cover.style.display="none";this.old_cover.style.left=0};return anim}),half_slide:new CoverTransition(Animator.interpolate.root(0,-width,frames),time,function(anim,direction){anim.new_cover.style.display="block";anim.new_cover.style.zIndex=direction<0?2:1;anim.old_cover.style.zIndex=direction<0?1:2;anim.onupdate=function(value){if(direction<0){this.new_cover.style.left=-(width+value)+"px"}else{this.old_cover.style.left=value+"px"}return true};anim.oncomplete=function(){this.old_cover.style.display="none";this.old_cover.style.left=0;this.old_cover.style.zIndex="";this.new_cover.style.zIndex=""};return anim}),fade:new CoverTransition(Animator.interpolate.linear(0,1,10),time/2,function(anim){anim.onupdate=function(value){Element.setOpacity(this.old_cover,1-value);return true};anim.oncomplete=function(){this.old_cover.style.display="none";Element.setOpacity(this.old_cover,1);this.new_cover.style.display="block";this.onupdate=function(value){Element.setOpacity(this.new_cover,value);return true};this.oncomplete=function(){Element.setOpacity(this.old_cover,"");Element.setOpacity(this.new_cover,"")};this.run()};return anim}),cross_fade:new CoverTransition(Animator.interpolate.linear(1,0,10),time,function(anim){anim.new_cover.style.display="block";anim.new_cover.style.zIndex=1;anim.old_cover.style.zIndex=2;anim.onupdate=function(value){Element.setOpacity(this.old_cover,value);return true};anim.oncomplete=function(){this.old_cover.style.display="none";this.old_cover.zIndex="";this.new_cover.zIndex="";Element.setOpacity(this.old_cover,"")};return anim}),slide_fade:new CoverTransition(Animator.interpolate.linear(0,-width,frames),time,function(anim,direction){anim.new_cover.style.display="block";anim.new_cover.style.zIndex=direction<0?2:1;anim.old_cover.style.zIndex=direction<0?1:2;anim.onupdate=function(value){var percent=value/-width;if(direction<0){this.new_cover.style.left=-(width+value)+"px";Element.setOpacity(this.new_cover,percent)}else{percent=1-percent;this.old_cover.style.left=value+"px";Element.setOpacity(this.old_cover,percent)}return true};anim.oncomplete=function(){with(this.old_cover.style){display="none";left=0;zIndex=""}with(this.new_cover.style){left=0;zIndex=""}Element.setOpacity(this.old_cover,"");Element.setOpacity(this.new_cover,"")};return anim}),reveal:new CoverTransition(Animator.interpolate.root(width,0,frames),time,function(anim,direction){anim.new_cover.style.display="block";anim.new_cover.style.zIndex=1;anim.old_cover.style.zIndex=2;anim.onupdate=function(value){var rect;if(direction<0){rect="rect(auto auto auto "+(width-value)+"px)"}else{rect="rect(auto "+value+"px auto auto)"}this.old_cover.style.clip=rect;return true};anim.oncomplete=function(){with(this.old_cover.style){display="none";clip=is_ie?"rect(auto auto auto auto)":"";zIndex=""}this.new_cover.style.zIndex=""};return anim})}})();
// /modules/cover.js from ui
addLoadEvent(function(){if(!$("cover")){return }Cover.initialize();var A=function(J,L){J=$(J);if(!J){return false}var K=J.getElementsByTagName("a");if(!K||K.length==0){return false}K[0].onclick=L;K[0].onmouseover=function(){Element.addClassName(this,"hover")};K[0].onmouseout=function(){Element.removeClassName(this,"hover");Element.removeClassName(this,"active")};K[0].onmousedown=function(){Element.addClassName(this,"active")};K[0].onmouseup=function(){Element.removeClassName(this,"active")};return true};A("c-previous",function(){Cover.pause();Cover.change(-1);return false});A("c-next",function(){Cover.pause();Cover.change(1);return false});A("c-play",function(){Cover.play();return false});A("c-pause",function(){Cover.pause();return false});Element.removeClassName("c-controls","hidden");var E=function(J){return function(K){Cover.pause();Cover.jump_to(J);return cancelEvent(K)}};var H=$("c-pagination");if(H){if(H.getElementsByTagName("li").length==0){for(var C=0,B=Cover.count();C<B;C++){var I=document.createElement("li");var F=document.createElement("a");F.href="#";F.innerHTML=C+1;I.appendChild(F);H.appendChild(I)}}var G=H.getElementsByTagName("a");for(var C=0,B=Cover.count();C<B;C++){G[C].onclick=E(C)}Element.removeClassName("c-pagination","hidden")}Cover.play();var D=/trans=([^&#]*)/.exec(document.location.href);if(D&&Transitions[D[1]]){defaultTransition=D[1]}});Cover={_current:-1,_timer:null,_wait:15000,_running:false,_anim:null,_shown_covers:[],_next_timeout:function(){Cover.change(1);Cover._timer=window.setTimeout(Cover._next_timeout,Cover._wait)},initialize:function(){var B=Cover.count();for(var A=0;A<B;A++){Cover.setDisplay(A,false);Cover._shown_covers[A]=false}},hold:function(){if(Cover._timer!=null){window.clearTimeout(Cover._timer)}Cover._timer=null},run:function(){if(Cover._timer==null&&Cover._running){Cover._next_timeout()}},change:function(D){if(Cover._anim&&Cover._anim.is_running()){Cover._anim.run();return }var A=Cover._current;var C=Cover.count();var B=Cover._current=(Cover._current+D+C)%C;Cover._update_display(A,B,D)},jump_to:function(C){if(!Cover.getById(C)){return }var A=Cover._current;var B=Cover._current=C;Cover._update_display(A,B,B<A?-1:1)},_update_display:function(A,B,D){var C=Cover.count();if(C<2){Cover.setDisplay(B,true);return }var E=function(){if(Cover._shown_covers[Cover._current]){return }Cover._shown_covers[Cover._current]=true;var M=Cover.getById(Cover._current);var L=M.getElementsByTagName("h3");var K=L.length>0?L[0].innerHTML:"No Header";var G=[";","cover",Tracking.pageName,K].join("/");Tracking.resetVars();var P=M.getElementsByTagName("a");var N=[];for(var I=0,H=P.length;I<H;I++){var J=P[I].getElementsByTagName("img");var O=P[I].parentNode.className=="more"?"more: ":"";if(J.length==0){O+=TrackingNode.getNodeText(P[I]).replace(/^\s*/g,"")}else{O+="image: "+J[0].alt}O=O.replace(/[;,$=|]/g," ");N.push([G,O].join("/"))}Tracking.setData({events:"event2",products:N.join(",")});s.tl(location.href,"o","Cover Impressions");Tracking.resetVars()};var F=function(){Cover.setDisplay(A,false);Cover.setDisplay(B,true)};Cover._anim=Transitions[defaultTransition].animate(A,B,D);Cover._anim.cleanup=Cover._anim.oncomplete;Cover._anim.oncomplete=function(){this.cleanup();F()};if(Cover._anim){Cover._anim.run()}else{F()}},play:function(){if(play=$("c-play")){Element.hide(play)}if(pause=$("c-pause")){Element.show(pause)}Cover._running=true;Cover.run()},pause:function(){if(play=$("c-play")){Element.show(play)}if(pause=$("c-pause")){Element.hide(pause)}Cover._running=false;Cover.hold()},getById:function(A){return $("cover"+A)||false},getPaginationById:function(C){var A=$("c-pagination");if(!A){return false}var B=A.getElementsByTagName("li");if(C<0||C>=B.length){return false}return B[C]},setDisplay:function(B,A){if(cvr=Cover.getById(B)){cvr.style.display=A?"block":"none"}if(page=Cover.getPaginationById(B)){Element[A?"addClassName":"removeClassName"](page,"active")}},count:function(){var B=/cover([0-9]+)/;var C=Cover.getById(0).parentNode.childNodes;for(var A=C.length-1;A>=0;A--){if(C[A].nodeType!=1){continue}if(match=C[A].id.match(B)){return parseInt(match[1])+1}}return 0},linkClicked:function(E,A,C,F){var B=$("cover"+C);if(!B){return }var D=document.createElement("a");D.href="#";D.appendChild(TrackingNode.build_comment("META",{position:[(F==2?"img":"link")+A],linkText:[E],linkType:["basic","positional","cover"]}));B.appendChild(D);s.tl(D,"o");B.removeChild(D);return }};
// /modules/nav.js from ui
function toggleServices(A){if(typeof $=="undefined"){return false}var C=$("more");var B=$("n-more");if(!C||!B){return false}var D=Element.hasClassName(B,"active");if(typeof A=="undefined"){A=!D}if(A!=D){setAdVisibility(!A);setCoverFlashVisibility(!A);setVideoVisibility(!A)}if(A){C.style.display="block";Element.addClassName(B,"active")}else{C.style.display="none";Element.removeClassName(B,"active")}return false}addLoadEvent(function(){if(m=$("more")){m.onclick=function(A){cancelTrackEvent(A);return true};addEvent(document.body,"onclick",toggleServices.bind(document.body,false))}});
// /modules/dashboard.js from ui
CIM.user.get(["isLoggedIn"],function(A){if(document.config.cimaPassiveCheck=="true"&&A.isLoggedIn&&!(document.cookie||"").match(/\s*session@comcast.net=([^;]*);?/)){document.location=document.config.tsSigninUrl+encodeURIComponent(document.config.requestURL)+"&passive=1"}});function toggleDashboard(B){if(typeof $=="undefined"){return false}var E=$("dashboard");if(!E){return false}var A=this.parentNode?this.parentNode.id.substr(2):"";var D=$A($("dashboard-tabs").getElementsByTagName("li")).collect(function(F){return F.id.substr(2)});var C=Element.hasClassName(E,"expanded");if(typeof B=="undefined"){B=!Element.hasClassName(E,A)}if(B!=C){setCoverFlashVisibility(!B)}if(B){if(A=="email"){return true}if(A=="voice"&&Element.hasClassName("p-voice","authed")){vmcs.requestData()}Element.addClassName(E,"expanded");D._each(function(F){Element[F==A?"addClassName":"removeClassName"](E,F);Element[F==A?"addClassName":"removeClassName"]($("vault"),F)})}else{Element.removeClassName(E,"expanded");D._each(function(F){Element.removeClassName(E,F);Element.removeClassName($("vault"),F)})}return false}function populateEmail(B){if(loading_state=$("p-email-state-loading")){Element.hide(loading_state)}if(!B){return }B=B.channel;if(typeof (B.item)=="object"&&typeof (B.item.length)=="undefined"){B.item=[B.item]}if(B.status!="SUCCESS"){var F=$("p-email");didYHMFail=true;if(F){Element.addClassName(F,"error")}return }var I=CIM.user.getNow(["isLoggedIn"]);var G=I.isLoggedIn?true:false;var H=$("d-email");if(H){var E=H.getElementsByTagName("b")[0];if(G||B.item.length>0){E.innerHTML=(G?"":" ")+B.newmail}var A=buildEmaiLink(H.getElementsByTagName("a")[0],B.inbox)}var C=buildEmaiLink($("email-link-inbox"),B.inbox);var D=buildEmaiLink($("email-link-compose"),B.compose);isYHMLoaded=true}function buildEmaiLink(B,A){if(A&&B){if(A.indexOf("smartzone")==-1){B.href=A}}}function initEmail(B,C){var A=$("p-email");if(A){Element.addClassName(A,C?"authed":"nonauthed")}if(!C){return }continueEmail(B,C,A,userIsMigrated);managerNeedsFlash()}function continueEmail(D,F,C,A){if(loading_state=$("p-email-state-loading")){Element.show(loading_state)}var B=$("d-email").getElementsByTagName("a")[0];var E=new McTunnel.Request("yhm",document.config.yhmUrl,populateEmail,"xml");E.send()}function managerNeedsFlash(){var B=$("p-email");var A=$("McTunnelManagerContainer");if(A.childNodes.length==0){Element.addClassName(B,"need-flash")}}var isYHMLoaded=false;var didYHMFail=false;addLoadEvent(function(){CIM.user.get(["isLoggedIn","greeting"],function(C){var B=$("login");if(B){B.className=C.isLoggedIn?"sign-out":"sign-in"}var E=$("user-name");if(E){var F=C.isLoggedIn?true:false;var D=(function(){if(!C.isLoggedIn){return"Guest"}var G=Prefs.get("local.name","");if(G==""){G=C.greeting}return G})();E.innerHTML=(C.isLoggedIn?"Hi":"Welcome")+" <b>"+(C.isLoggedIn?D.limit(15):"Guest")+"</b>"}var A=$("vault");if(A){A.onclick=function(G){cancelTrackEvent(G);return true};addEvent(document.body,"onclick",toggleDashboard.bind(document.body,false));initEmail(F,C.isLoggedIn)}})});
// /modules/search.js from ui
addLoadEvent(function(){var F=document.getElementById("searchfield");if(F==null){return }if(!is_safari){F.focus()}var G="s-web";var B=new SimpleTabs();var D=document.getElementById("search-tabs");if(!D){return false}for(var C=0;C<D.childNodes.length;C++){var E=D.childNodes[C];if(E.nodeType!=1){continue}if(E.id=="s-more"){continue}B.tab_ids.push(E.id)}var A=function(J,H){var I=$("search-form");for(n in HeaderSearch){HeaderSearch[n].uninstall(I)}if(HeaderSearch[H]){HeaderSearch[H].install(I)}return true};B.onchange=A;B.setup(B.tab_id(G));B.onchange=function(K,H){A(K,H);var I=$("search-form"),J=$("searchfield");J.focus();if(J.value!=""&&I.onsubmit()!=false){I.submit()}return true}});var HdrSearch=Class.create();Object.extend(HdrSearch.prototype,{initialize:function(B,C,A){this.action=B;this.searchField=C||"q";this.fields=A||{};this.installed=false},install:function(A){if(this.installed){return false}A.action=this.action;$("searchfield").name=this.searchField;for(name in this.fields){var B=this.fields[name];var C=document.createElement("input");C.type="hidden";C.id=C.name=name;C.value=B;A.appendChild(C)}this.installed=true;return true},uninstall:function(A){if(!this.installed){return false}for(name in this.fields){var B=document.getElementById(name);if(B!=null){B.parentNode.removeChild(B)}}this.installed=false;return true}});var DblHdrSearch=Class.create();Object.extend(DblHdrSearch.prototype,HdrSearch.prototype);Object.extend(DblHdrSearch.prototype,{initialize:function(B,C,A){this.searchFields=C||Array("q","q2");HdrSearch.prototype.initialize.call(this,B,this.searchFields[0],A)},install:function(B){if(!HdrSearch.prototype.install.call(this,B)){return false}var C=document.createElement("input");C.type="text";C.id="searchfield2";C.name=this.searchFields[1];var A=$("searchfield");A.parentNode.insertBefore(C,A.nextSibling);C.parentNode.parentNode.className="local";return true},uninstall:function(A){if(!HdrSearch.prototype.uninstall.call(this,A)){return false}var B=document.getElementById("searchfield2");B.parentNode.parentNode.className="default";B.parentNode.removeChild(B);return true}});var search_url="http://search.comcast.net/";var video_url="http://videosearch.comcast.net/ss-query/videosearch.jsp";var shop_url="http://shopping.comcast.net/search.php";var search_account=typeof search_account=="undefined"?"Preview":search_account;var HeaderSearch={"s-web":new HdrSearch(search_url,"q",{cat:"Web",con:search_account}),"s-video":new HdrSearch(video_url,"q",{dr:"1",cp:"1"}),"s-images":new HdrSearch(search_url,"q",{cat:"images",con:search_account}),"s-news":new HdrSearch(search_url,"q",{cat:"news",con:search_account}),"s-shop":new HdrSearch(shop_url,"form_keyword"),"s-yellow":new DblHdrSearch(search_url,["q","l"],{cat:"yp",con:search_account})};HeaderSearch["s-web"].installed=true;function videoSearchValidation(B){var A=B.searchfield;if(A.value==""){A.focus();A.select();return false}else{return true}};
// /modules/footer.js from ui
addLoadEvent(function(){var C=$("copy-year-cim");if(!C){return }var A=C.getElementsByTagName("span")[0];if(Element.hasClassName(A,"year")){var B=new Date();A.innerHTML+="&nbsp;"+B.getFullYear()}});
// /modules/polls.js from ui
var PoleComm=Class.create();Object.extend(PoleComm.prototype,{api_root:document.config["lithium.api.root"]+"/restapi/vc/polls",initialize:function(B,A){this.poll_id=B;this.onerror=A||function(){}},_req_name:function(B){var A=(new Date()).getTime();return[B,this.poll_id,A].join("_")},_is_error:function(A){return typeof A["@status"]!="undefined"&&A["@status"]=="error"},get_choices:function(A){var C=this;var B=new McTunnel.Request(this._req_name("choices"),[this.api_root,"id",this.poll_id,"choices"].join("/"),function(D){if(C._is_error(D)){C.onerror(D.error);return }var E=[];$A(D.pollchoices.pollchoice).each(function(F){E.push({id:F.id["@nodeText"],text:F.text["@nodeText"],votes:F.votes.count["@nodeText"]})});if(A){A.call(this,E)}});B.send()},get_end_time:function(A){var C=this;var B=new McTunnel.Request(this._req_name("endtime"),[this.api_root,"id",this.poll_id,"end_time"].join("/"),function(E){if(C._is_error(E)){C.onerror(E.error);return }var D=E.value["@nodeText"];var F=D.match(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/);var G=new Date();G.setUTCFullYear(F[1]);G.setUTCMonth(parseInt(F[2],10)-1);G.setUTCDate(parseInt(F[3],10));G.setUTCHours(parseInt(F[4],10));G.setUTCMinutes(parseInt(F[5],10));G.setUTCSeconds(parseInt(F[6],10));if(A){A.call(this,G)}});B.send()},get_question:function(A){var C=this;var B=new McTunnel.Request(this._req_name("question"),[this.api_root,"id",this.poll_id,"question"].join("/"),function(D){if(C._is_error(D)){C.onerror(D.error);return }if(A){A.call(this,D.value["@nodeText"])}});B.send()},get_vote_count:function(A){var C=this;var B=new McTunnel.Request(this._req_name("vote_count"),[this.api_root,"id",this.poll_id,"votes/count"].join("/"),function(D){if(C._is_error(D)){C.onerror(D.error);return }if(A){A.call(this,parseInt(D.value["@nodeText"],10))}});B.send()},can_vote:function(B){var D=this;var A=readCookie("poll_"+this.poll_id);if(A!=null){B.call(this,false,"voted");return }var C=new McTunnel.Request(this._req_name("can_vote"),[this.api_root,"id",this.poll_id,"votes/place/allowed"].join("/"),function(E){if(D._is_error(E)){D.onerror(E.error);return }if(B){if(E.value["@nodeText"]=="true"){B.call(this,true,"")}else{D.get_end_time(function(G){var F=new Date();B.call(this,false,F<G?"unknown":"expired")})}}});C.send()},place_vote:function(A,B){var D=this;var C=new McTunnel.Request(this._req_name("place_vote"),[this.api_root,"id",this.poll_id,"votes/place"].join("/"),function(G){var E=(G["@status"]=="success");var F=(D._is_error(G))?G.error.message:"";if(E){D.get_end_time(function(I){var H=new Date();var J=parseInt((I.getTime()-H.getTime())/86400000)+7;createCookie("poll_"+D.poll_id,A,J)})}if(B){B.call(this,E,F)}});C.setVariable("poll.choice","id/"+A);C.send()}});var Pole=Class.create();Object.extend(Pole.prototype,{initialize:function(A){this.node=$(A);this.form=this.node.getElementsByTagName("form")[0];this.container=this.form.parentNode;this.message=$A(this.container.getElementsByTagName("p")).detect(function(D){return Element.hasClassName(D,"message")});this.error=$A(this.container.getElementsByTagName("p")).detect(function(D){return Element.hasClassName(D,"error")});var C=this;this.poll_id=this.form.action.split("#")[1];this.comm=new PoleComm(this.poll_id,function(D){C.set_display(C.DISP_ERROR);C.error.innerHTML="An error has occurred.";C.error.style.display="block"});this.form.onsubmit=function(){if(C.get_display()==C.DISP_RESULTS){C.set_display(C.DISP_VOTING);return false}var D=$A(this.getElementsByTagName("input")).collect(function(E){return E.checked?E.value:false}).detect(function(E){return E!==false});if(typeof D=="undefined"){C.error.innerHTML="Please choose an item.";C.error.style.display="block";return false}C.comm.place_vote(D,function(F,E){if(F){C.message.innerHTML="Thank you. Your vote has been submitted.";C.show_vote(false);C.update_counts()}else{C.error.innerHTML="Failed to place vote: "+E;C.error.style.display="block"}});return false};var B=$A(this.container.getElementsByTagName("a")).detect(function(D){return Element.hasClassName(D,"poll-results")});B.onclick=function(D){C.message.innerHTML="Thank you for viewing the poll. Click Vote to return and submit a vote.";C.show_vote(true);C.update_counts();return cancelEvent(D)};this.comm.get_question(function(D){C.fill_question(D)});this.comm.can_vote(function(D,F){if(D){C.update_answers()}else{var E;switch(F){case"voted":E="Thank you. Your vote has been submitted.";break;case"expired":E="Voting for this poll has ended.";break;default:E="This poll is currently closed."}C.message.innerHTML=E;C.show_vote(false);C.update_counts()}})},DISP_VOTING:"voting",DISP_RESULTS:"results",DISP_LOADING:"loading",DISP_ERROR:"error",set_display:function(B){if(B==this.DISP_LOADING){var A=Element.getDimensions(this.container).height;this.container.style.height=A+"px"}else{this.container.style.height=is_ie?"1%":""}Element.removeClassName(this.container,"loading");Element.removeClassName(this.container,"voting");Element.removeClassName(this.container,"results");Element.addClassName(this.container,B);this.error.style.display="none"},get_display:function(){var B=[this.DISP_VOTING,this.DISP_RESULTS,this.DISP_LOADING,this.DISP_ERROR];for(var A=0;A<B.length;A++){if(Element.hasClassName(this.container,B[A])){return B[A]}}return""},show_vote:function(A){Element[A?"removeClassName":"addClassName"](this.container,"hide-vote")},update_counts:function(){var A=this;this.set_display(A.DISP_LOADING);this.comm.get_vote_count(function(B){A.fill_vote_count(B);A.comm.get_choices(function(D){var C=$A(D).inject({},function(E,F){E[F.text]=B?parseInt(F.votes/B*100):0;return E});A.fill_percents(C);A.set_display(A.DISP_RESULTS)})})},update_answers:function(){var A=this;this.set_display(A.DISP_LOADING);this.comm.get_choices(function(C){var B=$A(C).inject({},function(D,E){D[E.id]=E.text;return D});A.fill_answers(B);A.show_vote(true);A.set_display(A.DISP_VOTING)})},fill_vote_count:function(A){$A(this.form.getElementsByTagName("p")).each(function(B){if(B.className=="vote-count"){B.getElementsByTagName("span")[0].innerHTML=A}})},fill_percents:function(B){var D=Element.getDimensions(this.container).width-50;var A=this.container.getElementsByTagName("dl")[0];var F=[];while(A.childNodes.length>0){A.removeChild(A.firstChild)}$H(B).each(function(J){var I=document.createElement("dd");var H=document.createElement("b");I.appendChild(H);I.appendChild(document.createTextNode(J.value+"%"));var G=document.createElement("dt");G.appendChild(document.createTextNode(J.key));A.appendChild(I);A.appendChild(G);F.push({node:H,width:(D*J.value/100)})});var E=Animator.interpolate.linear(0,1,50);var C=new Animator(E,500);C.onupdate=function(J){for(var H=0,G=F.length;H<G;H++){var I=F[H];I.node.style.width=(I.width*J)+"px"}return true};C.run()},fill_question:function(A){var B=$A(this.container.getElementsByTagName("p")).detect(function(C){return C.className=="question"});B.innerHTML=A},fill_answers:function(B){var A=this.container.getElementsByTagName("ul")[0];$H(B).each(function(F){var E=document.createElement("li");var D=document.createElement("input");D.className="fancy-radio";D.type="radio";D.name="poll-option";D.id="poll-"+F.key;D.value=F.key;var C=document.createElement("label");C.htmlFor="poll-"+F.key;C.innerHTML=F.value;E.appendChild(D);E.appendChild(C);A.appendChild(E);new RadioButton(D)})}});addLoadEvent(function(){if(p=$("poll")){new Pole(p)}});
// /modules/vmcs.js from ui
var vmcs={url:"/user/authkey/vmcs/",totalUMCount:0,dispContainer:false,countContainer:false,enabled:false,requestMade:false,initialize:function(){var A=CIM.user.getNow(["isLoggedIn"]);var B=A.isLoggedIn;this.preview=$("p-voice");if(this.preview){Element.addClassName(this.preview,B?"authed":"nonauthed")}this.countContainer=$("d-voice").getElementsByTagName("b")[0];this.dispContainer=$("p-voice-state-primary");if(!B){return false}this.enabled=true},requestData:function(){if(this.dispContainer&&this.enabled&&!this.requestMade){if(isPrimary()){this.getData()}else{this.displaySecondary()}}this.requestMade=true},entryTemplate:function(A,E){var D=A.substring(0,3);var C=A.substring(3,6);var B=A.substring(6);return"<div class='vmcsEntry'><h3>("+D+") "+C+"-"+B+"</h3><p>"+E+" unheard</p></div>"},getData:function(){Element.show("p-voice-state-loading");new Ajax.Request(this.url,{method:"GET",onSuccess:this.requestSuccess,onFailure:this.requestFailure})},displaySecondary:function(){Element.addClassName(this.preview,"secondary")},requestSuccess:function(trans){Element.hide("p-voice-state-loading");var json=stripComments(trans.responseText);var data=eval("("+json+")");if(!data.fault){var counts=data.umcount.pluck("new");if(counts.any(function(item){return(item>0)})){vmcs.dispContainer.innerHTML="";data.umcount._each(vmcs.createEntry.bind(vmcs));Element.addClassName(vmcs.preview,"primary")}else{Element.addClassName(vmcs.preview,"uninit")}}else{if(data.code==105){Element.addClassName(vmcs.preview,"upsell")}else{vmcs.showUnhandledError(data)}}},showUnhandledError:function(A){Element.addClassName(this.preview,"error");$("p-voice-errorcode").innerHTML=A.code},requestFailure:function(){Element.hide("p-voice-state-loading")},setUMCount:function(A){A=parseInt(A);this.totalUMCount+=A;this.countContainer.innerHTML=A},createEntry:function(C){this.setUMCount(C["new"]);var B=this.entryTemplate(C.tn,C["new"]);var A=document.createElement("div");A.innerHTML=B;B=A.getElementsByTagName("div")[0];this.dispContainer.appendChild(B);return true}};
// /modules/overlays/adfeedback.js from ui
var AdFeedbackWindow={fields:["afadCall","afadResponse","afpage","afbrowser","subject","fromAddress","afcomments","toAddresses"],create_window:function(C,B){if(!$("adfeedback")&&!this.load_overlay()){alert("Failed to load the feedback form. Please try again.");return false}var A=new Window("adfeedback","adfeedback-close");A.onhide=function(){$("adfeedback").getElementsByTagName("form")[0].style.display="block";$("adfeedback-confirm").style.display="none";$("adfeedback-error").style.display="none"};A.onshow=function(){var I=$("afcomments");var F=$("afadCall");var G=$("afpage");var D=$("afbrowser");var H=$("afadResponse");var E=$("subject");E.value="Ad Feedback for "+window.location;H.value=escape(B.innerHTML);G.value=window.location;F.value=C;D.value=navigator.userAgent;I.focus()};return A},load_overlay:function(){var C=new Ajax.Request("./overlays/adfeedback/",{method:"get",asynchronous:false});if(C.responseIsFailure()){return false}var E=document.createElement("div");E.innerHTML=C.transport.responseText;document.body.appendChild(E);var A=$("adfeedback");var D=A.getElementsByTagName("button")[0];var B=A.getElementsByTagName("form")[0];Widgets.build(A);D.onclick=function(F){var G=AdFeedbackWindow.fields.inject({},function(I,H){I[H]=$F(H);return I});new Ajax.Request(B.action,{method:"post",onSuccess:function(){B.style.display="none";$("adfeedback-confirm").style.display="block"},onFailure:function(H){B.style.display="none";$("adfeedback-error").style.display="block";$("error-text").innerHTML=H.responseText||"unknown error"},parameters:Ajax.parameters(G)});return cancelEvent(F)};return true}};
// /modules/overlays/slideshow.js from ui
var SlideshowWindow={add_click:function(A,C){A=$(A);var B=A.getElementsByTagName("a");if(B.length==0){return }B[0].onclick=C;B[0].onmouseover=function(){if(!Element.hasClassName(this.parentNode,"disable")){Element.addClassName(this,"hover")}};B[0].onmouseout=function(){if(!Element.hasClassName(this.parentNode,"disable")){Element.removeClassName(this,"hover")}Element.removeClassName(this,"active")};B[0].onmousedown=function(){if(!Element.hasClassName(this.parentNode,"disable")){Element.addClassName(this,"active")}};B[0].onmouseup=function(){if(!Element.hasClassName(this.parentNode,"disable")){Element.removeClassName(this,"active")}}},create_gallery_window:function(selected_image,data,gallery_id,galleryTitle){gallery_id=(gallery_id+"").replace(/\/data.*/,"").replace(/^\//,"").replace(/\/$/,"");if(gallery_id.match(/^(music|entertainment|sports|finance|tv|news)/)){document.location=["","slideshow",gallery_id.replace("/","-"),selected_image,""].join("/");return }var _this=this;data=eval(data);$A(data).each(function(item,i){var has_caption=$H(item).keys().include("ss-caption/innerHTML");var has_title=$H(item).keys().include("ss-title/innerHTML");if(has_caption&&!has_title){data[i]["ss-title/innerHTML"]=data[i]["ss-caption/innerHTML"];data[i]["ss-caption/innerHTML"]=""}if((has_caption&&has_title)&&(item["ss-title/innerHTML"]==item["ss-caption/innerHTML"])){data[i]["ss-caption/innerHTML"]=""}return true});showOverlay(function(){return _this.create_window_data(selected_image,"slideshow",data,galleryTitle)})},create_window:function(D,C){var B=arguments[2]||false;var F=arguments[3]||false;var E=this.load_data(C,B,F);if(!E){alert("Failed to load the slideshow. Please try again.");return false}var A=E.title;if(A==""){A=null}E=E.photos;return this.create_window_data(D,C,E,A)},create_window_data:function(K,D,H,B){var P="",C="";switch(D){case"slideshow":P="ss";C="slideshow";break;case"photooftheday":P="pod";C="pod-overlay";break;default:alert("Invalid type specified: "+D);return false}if(!$(C)&&!this.load_overlay(D)){alert("Failed to load the slideshow. Please try again.");return false}if(B&&$(P+"-head")){$(P+"-head").innerHTML=B}var S=$(P+"-slide").getElementsByTagName("ul")[0];S.innerHTML="";for(var Q=0,O=H.length;Q<O;Q++){var T=document.createElement("li");var M=document.createElement("img");M.src=H[Q].thumbnail_url;T.appendChild(M);S.appendChild(T)}var N=new Slideshow(P+"-slide");var L=0;var R=$(P+"-ad");N.onchange=function(a){var X=$(P+"-count");X.innerHTML=(a+1)+" of "+this.images.length;if(a<0||a>=H.length){return }var W=$(P+"-fullsize");var V=W.parentNode;var c=document.createElement("img");c.id=P+"-fullsize";c.style.position="relative";c.style.left="-10000px";c.onload=function(){var e=Animator.interpolate.linear(0,1,10);var d=new Animator(e,500);d.onupdate=function(f){Element.setOpacity(c,f);return true};c.style.left="";c.style.position="static";Element.setOpacity(c,0);d.run()};var b=Animator.interpolate.linear(1,0,10);var Y=new Animator(b,500);Y.onupdate=function(d){Element.setOpacity(W,d);return true};Y.oncomplete=function(){V.replaceChild(c,W);var g=H[a];for(var e in g){var j=e.split("/");var f=$(j[0]);if(!f){continue}f[j[1]]=g[e]}var h=$(P+"-related");if(h){var d=g[P+"-related-a/href"];h.style.display=(d!="")?"block":"none"}};Y.run();L++;if(L%3==0&&R){while(R.childNodes.length>0){R.removeChild(R.childNodes[0])}var Z=new Ad();Z.set_location("LREC");Z.set_background("000000");Z.render_full(R,true,"iab300x250")}};var G=function(){if(N.image_id<=0){Element.addClassName($(P+"-prev"),"disable")}else{Element.removeClassName($(P+"-prev"),"disable")}if(N.image_id>=N.images.length-1){Element.addClassName($(P+"-next"),"disable")}else{Element.removeClassName($(P+"-next"),"disable")}};this.add_click(P+"-prev",function(V){N.animate_to_image(N.image_id-1);G();return cancelEvent(V)});this.add_click(P+"-next",function(V){N.animate_to_image(N.image_id+1);G();return cancelEvent(V)});var J=0;for(var Q=0,O=H.length;Q<O;Q++){if(H[Q].identifier==K){J=Q;break}}var A;var F=new Window(C,P+"-close");F.onshow=function(){A=(new Date()).getTime();var V=$(P+"-fullsize");var W=document.createElement("img");W.id=P+"-fullsize";W.style.position="relative";W.style.left="-10000px";V.parentNode.replaceChild(W,V);L=-1;N.reinitialize(J);L=1;Tracking.resetVars();Tracking.setVar("pageName","Slideshow-"+Tracking.pageLocation);Tracking.setVar("eVar6",Tracking.pageLocation);Tracking.setVar("prop8",Tracking.pageLocation);Tracking.setVar("events","event8");s.t()};var E=function(W,V){Tracking.resetVars();Tracking.setVar("linkTrackVars","eVar6,eVar7,eVar8,eVar9,eVar10,events");Tracking.setVar("linkTrackEvents","event9");Tracking.setVar("events","event9");Tracking.setVar("eVar6",Tracking.pageLocation);Tracking.setVar("eVar7",[Tracking.pageLocation,L].join("-"));Tracking.setVar("eVar8",[Tracking.pageLocation,W].join("-"));Tracking.setVar("eVar9",L);Tracking.setVar("eVar10",W);s.tl(true,"o",V)};F.onhide=function(){var V=(new Date()).getTime()-A;E("Close Window Button","Slideshow Close")};var U=$(P+"-related-a");if(U){U.onclick=function(V){E("Related Story Button","Slideshow Related Story");var W=this.href;window.setTimeout(function(){document.location=W},100);return cancelEvent(V)}}var I=$(P+"-submit-a");if(I){I.onclick=function(V){E("Submit Photo Button","Submit a Photo");var W=this.href;window.setTimeout(function(){document.location=W},100);return cancelEvent(evt)}}G();return F},load_overlay:function(A){var B=new Ajax.Request(["./overlays/",A,"/"].join(""),{method:"get",asynchronous:false});if(B.responseIsFailure()){return false}var C=document.createElement("div");C.innerHTML=B.transport.responseText;document.body.appendChild(C);return true},load_data:function(type){var categories=arguments[1]||false;if(arguments[2]&&!categories){var url=arguments[2];urlparts=url.split("/");while(urlparts[(urlparts.length-1)]!="view"&&urlparts.length>0){urlparts.pop()}if(urlparts[(urlparts.length-1)]=="view"){urlparts[(urlparts.length-1)]="data"}urlparts.splice((urlparts.length-2),0,"overlays");url=urlparts.join("/")+"/"}else{var url=[".","overlays",type,"data"].join("/")+"/"}if(categories){categories.push("overlays",type,"data");url="/"+categories.join("/")+"/"}var req=new Ajax.Request(url,{method:"get",asynchronous:false});if(req.responseIsFailure()){return false}var json=stripComments(req.transport.responseText);return eval("("+json+")")}};var Slideshow=Class.create();Object.extend(Slideshow.prototype,{image_size:80,image_display:9,initialize:function(C){this.element=$(C);this.onchange=function(){};this.reticule_moving=false;this.scroll_moving=false;this.covers=[];var D=this.element.getElementsByTagName("div");for(var B=0,A=D.length;B<A;B++){switch(D[B].className){case"thumb-shader":this.covers.push(D[B]);break;case"reticule":this.reticule=D[B];break;case"thumbs":this.wrapper=D[B];break;case"shader":this.shader=D[B];break}}this.scroller=new SimpleScroller(this.wrapper);this.image_id=0;this.reinitialize();var E=this;this.shader.onclick=function(F){var F=F||window.event;var H=Event.pointerX(F);var G=Event.pointerY(F);E.images.each(function(I,J){var K=Element.getDimensions(I);var L=Element.getPosition(I);if(H>=L.x&&H<=L.x+K.width&&G>=L.y&&G<=L.y+K.height){E.animate_to_image(J);throw $break}})}},reinitialize:function(E){this.images=$A(this.wrapper.getElementsByTagName("img"));for(var D=0,B=this.images.length;D<B;D++){this.images[D].style.width=this.images[D].style.height=this.image_size+"px"}this.shader.style.display=this.images.length>=2?"block":"none";if(this.images.length>=2){this.image_width=Element.getPosition(this.images[1]).x-Element.getPosition(this.images[0]).x}else{if(this.images.length==1){this.image_width=Element.getDimensions(this.images[0]).width}else{this.image_width=0}}this.reticule.style.height=this.reticule.style.width=this.image_size+"px";var C=this.image_size-parseInt(this.reticule.clientHeight);this.reticule.style.height=this.reticule.style.width=(this.image_size+C)+"px";this.reticule.dimensions=Element.getDimensions(this.reticule);this.wrapper.style.width=(this.image_display*this.image_width)+"px";var A=10;this.shader.style.height=this.reticule.dimensions.height+"px";this.shader.style.width=(Element.getDimensions(this.wrapper).width+A)+"px";this.shader.dimensions=Element.getDimensions(this.shader);this.shader.dimensions.width-=A;this.scroller.offset.x=0;this.scroller.updatePosition();this.covers[0].style.width=0;this.covers[1].style.width=0;this.element.style.height=this.shader.style.height;this.move_to_image(E||this.image_id)},get_cover_dims:function(A){var B=Element.getPosition(this.wrapper).x+A*this.image_width;var C=[];C.push(Math.max(0,B-Element.getPosition(this.covers[0]).x));C.push(Math.max(0,this.shader.dimensions.width-(C[0]+this.reticule.dimensions.width-1)));return C},get_scroller_position:function(A){return this.image_width*A},get_position_offset:function(E){var B=this.image_display/2;var D=E-B;var C=E+B;var A=B;if(C>this.images.length){var F=C-this.images.length;D-=F;A+=F}if(D<0){A+=D;D=0}return{position:Math.floor(A),offset:Math.round(D,1)}},move_to_image:function(A){if(A<0){A=0}if(A>=this.images.length){A=this.images.length-1}this.image_id=A;this.pos_offset=this.get_position_offset(this.image_id);var B=this.get_cover_dims(this.pos_offset.position);this.covers[0].style.width=B[0]+"px";this.covers[1].style.width=B[1]+"px";this.scroller.offset.x=this.get_scroller_position(this.pos_offset.offset);this.scroller.updatePosition();this.onchange(this.image_id)},animate_to_image:function(E){if(E<0){E=0}if(E>=this.images.length){E=this.images.length-1}var C=500;this.image_id=E;var D=this.get_position_offset(this.image_id);var H=function(){if(!this.reticule_moving&&!this.scroll_moving){this.onchange(this.image_id)}};if(D.position!=this.pos_offset.position){this.reticule_moving=true;var L=Math.ceil(C*0.025);var A=[Element.getDimensions(this.covers[0]).width,Element.getDimensions(this.covers[1]).width];var K=this.get_cover_dims(D.position);var I=[Animator.interpolate.linear(A[0],K[0],L),Animator.interpolate.linear(A[1],K[1],L)];var J=I[0].collect(function(N,M){return[I[0][M],I[1][M]]});if(this.anim){this.anim.stop(true)}this.anim=new Animator(J,C);var B=this.covers;var G=this.shader;this.anim.onupdate=function(M){M.each(function(O,N){B[N].style.width=O+"px"});return true};this.anim.oncomplete=(function(){this.reticule_moving=false;H.call(this)}).bind(this);this.anim.run()}if(D.offset!=this.pos_offset.offset){this.scroll_moving=true;var F=this.get_scroller_position(D.offset);this.scroller.scrollTo({x:F},C,(function(){this.scroll_moving=false;H.call(this)}).bind(this))}this.pos_offset=D}});
// /modules/overlays/emailthis.js from ui
var portalUserData=null;var EmailthisWindow={onsubmit:function(){},clearFields:["toAddresses","fromAddress","emailthisMessage","captchaResponse"],create_window:function(){if(!$("emailthis")&&!this.load_overlay()){alert("Failed to load the feedback form. Please try again.");return false}var A=new Window("emailthis","emailthis-close");A.onhide=function(){EmailthisWindow.clearFields._each(function(B){var C=$(B);C.value=C.proxy.origValue||""});$("copyMe").checked=false;$("toAddresses").proxy.set_status("default");$("fromAddress").proxy.set_status("default");$("captchaResponse").proxy.set_status("default");Element.removeClassName($("emailthis-to-label"),"failed");Element.removeClassName($("emailthis-from-label"),"failed");Element.removeClassName($("emailthis-captcha-label"),"failed");$("emailthis-subcaption").innerHTML="Enter up to 10 email addresses (Separate by commas)";$("emailthis").getElementsByTagName("form")[0].style.display="block";$("emailthis-otherarticles").style.display="none";$("emailthis-error").style.display="none";$("submit").style.display="block";$("emailthis-subcaption").className="";$("emailthis-from-subcaption").className="";$("emailthis-captcha-subcaption").className="";if($("inlineplayer")&&$("inlineplayer").playerResume){$("inlineplayer").playerResume()}};A.onshow=function(){CIM.user.get(["isLoggedIn"],function(B){if(B.isLoggedIn){portalUserData=new UserData();jQuery(portalUserData).bind(UserDataEvent.SUCCESS,function(){if(portalUserData.getEmail()!=null){$("fromAddress").value=portalUserData.getEmail()}})}$("email-loader").style.display="none";EmailthisWindow.refresh_captcha();$("validation-error").style.display="none";if(B.isLoggedIn){$("emailthis-captcha-widget").style.display="none"}if($("inlineplayer")&&$("inlineplayer").playerHalt){$("inlineplayer").playerHalt()}})};return A},refresh_captcha:function(){CIM.user.get(["isLoggedIn"],function(A){if(!A.isLoggedIn){new Ajax.Request("./overlays/email/captcha/"+Math.floor(Math.random()*999999)+"/",{method:"get",onComplete:function(B){$("emailthis-captcha-ajax").innerHTML=B.responseText}})}})},load_overlay:function(){var G=CIM.user.getNow(["isLoggedIn"]);if(!G.isLoggedIn){this.sendFields=this.clearFields.concat(["encryptedCaptcha"])}else{this.sendFields=this.clearFields}var Y=($("video-metadata"))?"video":(($("trivia-options"))?"trivia":(($("viewer-detail-wrapper"))?"photo":"article"));var Q="./overlays/email/"+Y+"/";var A=new Ajax.Request(Q,{method:"get",asynchronous:false});if(A.responseIsFailure()){return false}var I=document.createElement("div");I.innerHTML=A.transport.responseText;document.body.appendChild(I);var O=document.title.replace(" - Comcast.net","");O=O.replace(" | Comcast.net","");if(Y=="video"){O=$("video-metadata").getElementsByTagName("h2")[0].getElementsByTagName("strong")[0].innerHTML}else{if(Y=="article"){if($("article").getElementsByTagName("h1")){O=$("article").getElementsByTagName("h1")[0].innerHTML}else{if($("article").getElementsByTagName("h2")){O=$("article").getElementsByTagName("h2")[0].innerHTML}}}}if(O==""){O=document.title}$("emailthis-title").innerHTML=O;$("emailthisTitle").value=O;var H=$("extended-videolist")||$("relatedvideo-container");if(H){var T=H.getElementsByTagName("ul")[0];var U=T.getElementsByTagName("li");var R=(U.length>5)?5:U.length;var L=document.createElement("ul");for(var V=0;V<R;V++){var K=U[V].cloneNode(true);var M=K.getElementsByTagName("a")[0];$A(M.childNodes).each(function(a){if(a.nodeType==8){a.parentNode.removeChild(a)}});M.rel=M.rel+' track_load(Email Story Window - "Other Links" click)';M.appendChild(document.createComment("TRACKING ! prop11: ! eVar16: "));assign_handlers(M);L.appendChild(K)}$("emailthis-pageheadlines").appendChild(L);Element.addClassName($("emailthis-pageheadlines"),"imgList");if(H.id=="relatedvideo-container"){Element.addClassName($("emailthis-pageheadlines"),"wideimg")}}var N=$("headlines");if(N&&!H){var F=N.getElementsByTagName("ul")[0];var E=F.getElementsByTagName("li");var D=(E.length>5)?5:E.length;var X=document.createElement("ul");for(var V=0;V<D;V++){var W=E[V].cloneNode(true);var M=W.getElementsByTagName("a")[0];$A(M.childNodes).each(function(a){if(a.nodeType==8){a.parentNode.removeChild(a)}});M.rel=M.rel+' track_load(Email Story Window - "Other Links" click)';M.appendChild(document.createComment("TRACKING ! prop11: ! eVar16: "));assign_handlers(M);X.appendChild(W)}$("emailthis-pageheadlines").appendChild(X)}var J=$("carousel-panel0");if(J){var T=J.getElementsByTagName("ul")[1];var U=T.getElementsByTagName("li");var R=(U.length>5)?5:U.length;var L=document.createElement("ul");for(var V=0;V<R;V++){var K=U[V].cloneNode(true);var M=K.getElementsByTagName("a")[0];M.getElementsByTagName("span")[0].innerHTML=M.title;$A(M.childNodes).each(function(a){if(a.nodeType==8){a.parentNode.removeChild(a)}});M.rel=M.rel+' track_load(Email Story Window - "Other Links" click)';M.appendChild(document.createComment("TRACKING ! prop11: ! eVar16: "));assign_handlers(M);L.appendChild(K)}$("emailthis-pageheadlines").appendChild(L);Element.addClassName($("emailthis-pageheadlines"),"imgList");Element.addClassName($("emailthis-pageheadlines"),"movieList")}if(!H&&!N&&!J){$("emailthis-otherarticles").getElementsByTagName("h2")[0].getElementsByTagName("span")[0].style.display="none"}var Z=$("emailthis");var C=$("refreshCaptcha");var S=Z.getElementsByTagName("button")[0];var B=Z.getElementsByTagName("form")[0];if(Y=="video"){B.action="/user/authkey/service/emailavideo/"}else{if(Y=="trivia"){B.action="/user/authkey/service/emailapage/"}else{if(Y=="photo"){B.action="/user/authkey/service/emailaphoto/"}}}Widgets.build(Z);C.onclick=function(a){EmailthisWindow.refresh_captcha();return cancelEvent(a)};var P=$("emailthisMessage");P.onkeyup=function(a){if(P.value.length>500){P.value=P.value.substring(0,500)}};$("fromAddress").onfocus=function(){};$("fromAddress").onblur=function(){};$("toAddresses").onblur=function(){};B.onsubmit=function(){return false};S.onclick=function(j){var i="Please check that the domain of the email you entered is valid.";var k="The comcast.net email address you entered does not exist.";var e="Please check email formatting and that multiple emails are separated by commas.";var w="Please enter an email address to send the "+Y+" to.";var q="Please check email formatting";var o="Please enter your email address";var d="Please enter the characters you see in the image";var x="Please enter the characters you see in the image";var m=true;var l;if($("toAddresses").value.replace(/\s+/,"")){var n=$("toAddresses").value.split(",");if(n.length>10){l="Enter up to 10 email addresses";m=false}else{for(t=0;t<n.length;t++){if(!echeck(n[t])){l=e;m=false}}}if(m){$("emailthis-subcaption").innerHTML="Enter up to 10 email addresses (Separate by commas)";$("emailthis-subcaption").className="";Element.removeClassName($("emailthis-to-label"),"failed")}else{$("emailthis-subcaption").innerHTML=l;$("emailthis-subcaption").className="failed"}}else{$("emailthis-subcaption").innerHTML=w;$("emailthis-subcaption").className="failed"}var y=($("toAddresses").value.replace(/^\s+/,"").replace(/\s+$/,"")!=""&&m);var h=false;if($("fromAddress").value.replace(/^\s+/,"").replace(/\s+$/,"")){if(echeck($("fromAddress").value)){$("emailthis-from-subcaption").innerHTML="";$("emailthis-from-subcaption").className="";h=true;Element.removeClassName($("emailthis-from-label"),"failed")}else{$("emailthis-from-subcaption").innerHTML=q;$("emailthis-from-subcaption").className="failed"}}else{$("emailthis-from-subcaption").innerHTML=o;$("emailthis-from-subcaption").className="failed"}var c=false;if(G.isLoggedIn||$("captchaResponse").value.replace(/^\s+/,"").replace(/\s+$/,"")){$("emailthis-captcha-subcaption").innerHTML="";$("emailthis-captcha-subcaption").className="";var p=Element.getByTagClass($("emailthis-captcha-widget"),"span","failed");if(p[0]){Element.removeClassName(p[0],"failed")}Element.removeClassName($("emailthis-captcha-label"),"failed");c=true}else{$("emailthis-captcha-subcaption").innerHTML=d;$("emailthis-captcha-subcaption").className="failed"}if(y&&h&&c){$("validation-error").style.display="none";var u=EmailthisWindow.sendFields.inject({},function(AA,z){AA[z]=$F(z);return AA});u.emailthisUrl=window.location.href;u.exec="true";u.copyMe=$("copyMe").checked;u.fmt="xml";u.emailthisTitle=$("emailthisTitle").value;u.subject=O.replace(/[^a-zA-Z0-9_\&\-]/g," ");$("submit").style.display="none";$("email-loader").style.display="block";new Ajax.Request(B.action,{method:"post",onSuccess:function(AH){var AD=AH.responseText;var AE=AH.responseXML;var AC=AE.getElementsByTagName("error");if(AC.length!=0){$("submit").style.display="block";$("email-loader").style.display="none";if(AD.indexOf("recipient invalid domain")!=-1){$("emailthis-subcaption").innerHTML=i;$("emailthis-subcaption").className="failed";var AF=$("toAddresses");var AA=$("emailthis-to-label");AF.proxy.set_status("failed");Element.addClassName(AA,"failed");$("validation-error").style.display="block";$("validation-error").style.left="-254px"}else{if(AD.indexOf("Not our Customer")!=-1){$("emailthis-subcaption").innerHTML=k;$("emailthis-subcaption").className="failed";var AF=$("toAddresses");var AA=$("emailthis-to-label");AF.proxy.set_status("failed");Element.addClassName(AA,"failed");$("validation-error").style.display="block";$("validation-error").style.left="-254px"}else{if(AD.indexOf("Text did not match the image")!=-1){$("emailthis-captcha-subcaption").innerHTML=x;$("emailthis-captcha-subcaption").className="failed";var AB=$("captchaResponse");var z=$("emailthis-captcha-label");AB.proxy.set_status("failed");Element.addClassName(z,"failed");$("validation-error").style.display="block";$("validation-error").style.left="-254px"}else{B.style.display="none";$("emailthis-error").style.display="block";if(AH.responseXML){var AE=AH.responseXML;$("error-text").innerHTML=AE.getElementsByTagName("error")[0].firstChild.nodeValue}else{$("error-text").innerHTML="unknown error"}}}}}else{B.style.display="none";$("emailthis-otherarticles").style.display="block";EmailthisWindow.onsubmit(u)}Tracking.resetVars();Tracking.setVar("linkTrackVars","eVar2,eVar11,eVar34");Tracking.setVar("linkTrackEvents","event12");Tracking.setVar("events","event12");Tracking.setVar("products",";"+Tracking.articleTitle);Tracking.setVar("eVar2",Tracking.articleTitle);Tracking.setVar("prop2",Tracking.articleTitle);Tracking.setVar("eVar3",Tracking.articleCategory);Tracking.setVar("prop3",Tracking.articleCategory);Tracking.setVar("prop18",[Tracking.getVar("prop3"),Tracking.getVar("prop2")].join(":"));Tracking.setVar("eVar21",[Tracking.getVar("eVar3"),Tracking.getVar("eVar2")].join(":"));Tracking.setVar("eVar34",Tracking.pageContext);var AG=(document.location+"").replace(document.location.search,"");Tracking.setVar("prop14",AG);Tracking.setVar("eVar17",AG);var AI=$A(u.toAddresses.split(",")).collect(function(AJ){var AK=AJ.split("@");return";"+AK[1]});Tracking.setVar("eVar11",AI.length);s.tl(null,"o","")},onFailure:function(z){B.style.display="none";$("emailthis-error").style.display="block";$("error-text").innerHTML=(z.status==500)?("Server Error. Please try again.<!-- "+z.responseText+" -->"):(z.responseText||"unknown error")},parameters:Ajax.parameters(u)})}else{var g=$("toAddresses");var b=$("emailthis-to-label");var v=$("fromAddress");var r=$("emailthis-from-label");var a=$("captchaResponse");var f=$("emailthis-captcha-label");if(!y){g.proxy.set_status("failed");Element.addClassName(b,"failed")}else{g.proxy.set_status("default");Element.removeClassName(b,"failed")}if(!h){v.proxy.set_status("failed");Element.addClassName(r,"failed")}else{v.proxy.set_status("default");Element.removeClassName(r,"failed")}if(!c){a.proxy.set_status("failed");Element.addClassName(f,"failed")}else{a.proxy.set_status("default");Element.removeClassName(f,"failed")}$("validation-error").style.display="block";$("validation-error").style.left="-254px"}return cancelEvent(j)};return true},toValue:"",saveToValue:function(){EmailthisWindow.toValue=$("toAddresses").value}};function onABCommComplete(C){if(C){var B=C[0];if(B.length>0){var D=[];for(var A=0;A<C.length;A++){D.push(C[A][1])}$("toAddresses").value=(EmailthisWindow.toValue=="")?D.join(", "):EmailthisWindow.toValue+", "+D.join(", ")}}EmailthisWindow.saveToValue()};
// /modules/overlays/feedback.js from ui
var FeedbackWindow={fields:["f-name","f-email","f-comments"],create_window:function(){if(!$("feedback")&&!this.load_overlay()){alert("Failed to load the feedback form. Please try again.");return false}var A=new Window("feedback","feedback-close");A.onhide=function(){FeedbackWindow.fields._each(function(B){var C=$(B);C.value=C.proxy.origValue||""});$("feedback").getElementsByTagName("form")[0].style.display="block";$("feedback-confirm").style.display="none";$("feedback-error").style.display="none"};A.onshow=function(){var B=$("f-name"),C=$("f-comments");(B.value==""?B:C).focus()};return A},load_overlay:function(){var C=new Ajax.Request("./overlays/feedback/",{method:"get",asynchronous:false});if(C.responseIsFailure()){return false}var E=document.createElement("div");E.innerHTML=C.transport.responseText;document.body.appendChild(E);var A=$("feedback");var D=A.getElementsByTagName("button")[0];var B=A.getElementsByTagName("form")[0];Widgets.build(A);D.onclick=function(F){var G=FeedbackWindow.fields.inject({},function(I,H){I[H]=$F(H);return I});new Ajax.Request(B.action,{method:"post",onSuccess:function(){B.style.display="none";$("feedback-confirm").style.display="block"},onFailure:function(H){B.style.display="none";$("feedback-error").style.display="block";$("error-text").innerHTML=H.responseText||"unknown error"},parameters:Ajax.parameters(G)});return cancelEvent(F)};return true}};
// /modules/overlays/remoteapp.js from ui
var RemoteDVRWindow={activebodyid:[],rdvrtabs:["todo","series","dvrmgr"],activetab:[],reload_tab:{todo:true,series:true,dvrmgr:true},rTivoRecordingObject:{},rTivoDeleteRecordingObject:{},last_create_rcd_url:"",selected_schd_recording:{progId:null,sourceId:null,vcn:null,episodeStTime:null,stTime:null,endTime:null,saveUntil:null,recordingId:null,recordingIndex:null,stOffset:null,endOffset:null,recordingType:null,autoSrchStr:null,seriesTitle:null,programTitle:null},get_random:function(){return Math.floor(Math.random()*1000000)},set_reload_tab:function(A){if(typeof A=="undefined"){RemoteDVRWindow.reload_tab.todo=true;RemoteDVRWindow.reload_tab.series=true;RemoteDVRWindow.reload_tab.dvrmgr=true}else{RemoteDVRWindow.reload_tab[A]=true}console.log("RemoteDVRWindow.set_reload_tab >>>>  tabs:reload - todo: "+RemoteDVRWindow.reload_tab.todo+" series: "+RemoteDVRWindow.reload_tab.series+" dvrmanger: "+RemoteDVRWindow.reload_tab.dvrmgr)},set_tabs:function(A,D,C){console.log("RemoteDVRWindow.set_tabs >>>> begin");RemoteDVRWindow.activetab=A;for(var B=0;B<RemoteDVRWindow.rdvrtabs.length;B++){Element.removeClassName(RemoteDVRWindow.rdvrtabs[B],"active");$(RemoteDVRWindow.rdvrtabs[B]+"div").style.display="none"}Element.addClassName(A,"active");$(A+"div").style.display="block";$("dvr-save-opt").style.display="none";if(A=="todo"){if(RemoteDVRWindow.reload_tab.todo){RemoteDVRWindow.reload_tab.todo=false;RemoteDVRWindow.show_loading_anim("scheduledrecordings");RemoteDVRWindow.show_loading_anim("ssprograminfo-panel");RemoteDVRWindow.srreq(D,C)}}if(A=="series"){if(RemoteDVRWindow.reload_tab.series){RemoteDVRWindow.reload_tab.series=false;RemoteDVRWindow.show_loading_anim("seriespriority");RemoteDVRWindow.repreq()}}if(A=="dvrmgr"){if(RemoteDVRWindow.reload_tab.dvrmgr){RemoteDVRWindow.reload_tab.dvrmgr=false;RemoteDVRWindow.show_loading_anim("dvrmgrajax");RemoteDVRWindow.dvrmgrreq()}$("dvr-save-opt").style.display="block"}return false},show_loading_anim:function(A){console.log("RemoteDVRWindow.show_loading_anim >>>> calling for div name "+A);$(A).innerHTML='<div id="div-loading"><br><br><p><b>Please wait...</b></p></div>'},create_window:function(A,D,C,E,H,I,J,K,G,F){RemoteDVRWindow.activebodyid=D;if(!$("remotedvr")&&!RemoteDVRWindow.load_overlay()){alert("RemoteDVRWindow.create_window >>>> Failed to load the feedback form. Please try again.");if(is_ie&&RTivoAuthUtil.devices.length>1){$("rdvrselectorform").style.display="block"}return false}var B=new Window("remotedvr","remotedvr-close");B.hide_window=function(){RTivoDialogWindow.reset();this.window.style.display="none";if(is_ie&&RTivoAuthUtil.devices.length>1){$("rdvrselectorform").style.display="block"}};RemoteDVRWindow.set_reload_tab();if(A=="recordsingle"){RemoteDVRWindow.create_recording(D,C,E,H,I,J,unescape(K),unescape(G))}else{if(A=="recordseries"){RemoteDVRWindow.set_tabs("series");RemoteDVRWindow.create_series(D,H,I,J,unescape(K))}else{if(A=="dvrfirstuse"){RemoteDVRWindow.set_tabs("dvrmgr");RemoteDVRWindow.dvrmgrreq()}else{if(A=="modifySingle"){RemoteDVRWindow.set_tabs("todo",F,function(){RemoteDVRWindow.showModifySettingsPanel()})}else{if(RTivoAuthUtil.devices.length==1){RemoteDVRWindow.set_tabs("todo")}else{RemoteDVRWindow.set_tabs("todo")}}}}}RemoteDVRWindow.load_dvrselector();return B},load_dvrselector:function(A){jQuery("#rdvrsel").html(RTivoViewUtil.getTivoSelectorOptions());if(RTivoAuthUtil.devices.length==1){console.log("RemoteDVRWindow.load_dvrselector >>>> there is only 1 device in the list");jQuery("#repeatingbodyIdrow").css("display","none");jQuery("#bodyIdrow").css("display","none")}if(RTivoAuthUtil.devices.length==0){console.log("RemoteDVRWindow.load_dvrselector >>>> Tivo Authentication has failed, or there are no devices listed in the RTivoAuthUtil model.")}var G=jQuery("#gridRTivoSelector");var C=jQuery("#gridRTivoSelector :selected").val();var H=(C)?jQuery("#gridRTivoSelector :selected")[0].index:0;if(typeof A=="undefined"){RemoteDVRWindow.activebodyid=C;jQuery("#rdvrsel").attr("selectedIndex",(H>=0?H:0))}else{RemoteDVRWindow.activebodyid=C}jQuery("#rdvrsel").change(function(J){RemoteDVRWindow.activebodyid=jQuery("#rdvrsel option:selected").val();RemoteDVRWindow.set_reload_tab();loadScheduledSeries();RemoteDVRWindow.set_tabs(RemoteDVRWindow.activetab);var K=jQuery("#rdvrsel :selected")[0].index;document.getElementById("bodyId").proxy.select(K);document.getElementById("repeatingbodyId").proxy.select(K)});var B=$("dvrselector");var F=B.getElementsByTagName("option");for(var E=0;E<F.length;E++){var D=new Option();D.text=(F[E].text).substring(0,14);D.value=F[E].value;document.getElementById("bodyId").options[E]=D;var I=new Option();I.text=(F[E].text).substring(0,14);I.value=F[E].value;document.getElementById("repeatingbodyId").options[E]=I}document.getElementById("bodyId").proxy.init_list();document.getElementById("bodyId").proxy.select(H);document.getElementById("repeatingbodyId").proxy.init_list();document.getElementById("repeatingbodyId").proxy.select(H);if(RTivoAuthUtil.devices.length==1){$("view-tivo-sel").style.display="none";$("dvrmgr").style.display="none"}else{$("view-tivo-sel").style.display="block";$("dvrmgr").style.display="block"}},create_recording:function(F,A,E,I,J,K,M,H,C,L,G,D){var B="/user/authkey/rtivo/createOneTimeScheduledRecording/?bodyId="+F+"&vcn="+K+"&startTime="+A+"&endTime="+E+"&tz="+RTivoLocationModel.timezoneOffset+"&programId="+I+"&sourceId="+J+"&fmt=xml";if(typeof D!="undefined"){B+="&startOffset="+C+"&endOffset="+L+"&saveUntil="+G}RemoteDVRWindow.last_create_rcd_url=B;RemoteDVRWindow.rTivoRecordingObject={};RemoteDVRWindow.rTivoRecordingObject={_body:F,_title:M,_startTime:A,_endTime:E,_lid:I,_cid:J,_cnum:K,_title:M,_programTitle:H,_startoffset:(C)?C:null,_endoffset:(L)?L:null,_saveuntil:(G)?G:null,_callingfunction:(D)?D:null,_requestURL:B};RemoteDVRWindow.doCreateRecording()},doCreateRecording:function(){if(!RemoteDVRWindow.rTivoRecordingObject||!RemoteDVRWindow.rTivoRecordingObject._requestURL){RTivoDialogWindow.alert("An error occurred while attempting to schedule your recording. Please try again.");return }if(RTivoDialogWindow.activeDialogWindow){RTivoDialogWindow.hideDialog()}new Ajax.Request(RemoteDVRWindow.rTivoRecordingObject._requestURL+"&override=false",{method:"get",onSuccess:function(A){jQuery("#modifysubmit").attr("disabled",false);RemoteDVRWindow.onCreateRecordingSuccess(RTivoDataUtil.interpretAjaxResponse(A))},onFailure:function(A){jQuery("#modifysubmit").attr("disabled",false);RemoteDVRWindow.onCreateRecordingFailure()}})},onCreateRecordingSuccess:function(A){jQuery("modifysubmit").attr("disabled","false");var B=jQuery(A).find("error").text();var G=jQuery(A).find("scheduledRecordingId").text();console.log("RemoteDVRWindow.onCreateRecordingSuccess >>>> is error: "+B+", schdRecordId= "+G+" on box "+RemoteDVRWindow.rTivoRecordingObject._body);if(B&&B!=""){var C=jQuery(A).find("error");var E=B.split(" ")[0];console.log("RemoteDVRWindow.onCreateRecordingSuccess >>>> error msg first word: "+E);if(E=="conflicts"){RemoteDVRWindow.handleCreateRecordingConflict(C)}else{RemoteDVRWindow.display_error_msg(C)}RemoteDVRWindow.set_tabs("todo")}else{if(G&&G!=""){var F=new Object();F.argNum=3;F.arg0=RemoteDVRWindow.rTivoRecordingObject._title;F.arg1=RemoteDVRWindow.rTivoRecordingObject._programTitle;F.arg2=RemoteDVRWindow.convertmsToDateTime(stime);if(RemoteDVRWindow.isRecordingWithin90Minutes(stime)){console.log("RemoteDVRWindow.create_recording >>>> less than 90 mins");var D="Oops!"+RemoteDVRWindow.confirmation_info_args(F)+"airs in less than 90 minutes, so this showing may not record. Please be sure to schedule programs at least 90 minutes in advance.";RTivoDialogWindow.alert(D)}else{if(RemoteDVRWindow.rTivoRecordingObject._callingfunction=="modify"){RemoteDVRWindow.deleteonetime(false,"modify");RTivoDialogWindow.info("Program has been moved to a new box"+RemoteDVRWindow.confirmation_info_args(F))}else{RTivoDialogWindow.info("PROGRAM SCHEDULED TO RECORD"+RemoteDVRWindow.confirmation_info_args(F));loadScheduleRecordings();RemoteDVRWindow.setGridInfoToRecordedSingle();console.log("RemoteDVRWindow.onCreateRecordingSuccess >>>> episode_vals[3]= "+episode_vals[3]);episode_vals[12]=G;jQuery("#modifySingle").attr("rel","remoteapp("+episode_vals+")")}}RemoteDVRWindow.set_reload_tab("todo");RemoteDVRWindow.set_tabs("todo",G)}else{RTivoDialogWindow.alert("An unknown error occured when trying to schedule <b>"+title+"</b> to record. Please try again.");RemoteDVRWindow.set_tabs("todo")}}},setGridInfoToRecordedSingle:function(){jQuery("#recordsingle").hide();jQuery("#modifySingle").show();jQuery("#schedulednotice").removeClass().addClass("tick-bubble");jQuery("#schedulednotice").show()},onCreateRecordingFailure:function(A){console.log("RemoteDVRWindow.create_recording >>>> onFailure");jQuery("modifysubmit").attr("disabled","false");RTivoDialogWindow.alert("An unknown error occured when trying to schedule <b>."+RemoteDVRWindow.rTivoRecordingObject._title+"</b> to record. Please try again.");RemoteDVRWindow.set_tabs("todo")},handleCreateRecordingConflict:function(E){console.log("RemoteDVRWindow.handleCreateRecordingConflict >>>> recording conflict: "+RemoteDVRWindow.rTivoRecordingObject._callingfunction);var M=new Object();M.argNum=1;M.arg0=RemoteDVRWindow.rTivoRecordingObject._title+((RemoteDVRWindow.rTivoRecordingObject._programTitle!="")?"<br>"+RemoteDVRWindow.rTivoRecordingObject._programTitle:"")+" <br> "+RemoteDVRWindow.convertmsToDateTime(RemoteDVRWindow.rTivoRecordingObject._startTime);var L=jQuery(E).find("programid");if(RemoteDVRWindow.isRecordingWithin90Minutes(stime)){console.log("RemoteDVRWindow.create_recording >>>> less than 90 mins");var R="Oops!"+RemoteDVRWindow.confirmation_info_args(M)+"airs in less than 90 minutes, so this showing may not record. Please be sure to schedule programs at least 90 minutes in advance.";RTivoDialogWindow.alert(R)}for(var U=0;U<L.length;U++){var Q=jQuery(L[U]).text();var H;if(RemoteDVRWindow.rTivoRecordingObject._callingfunction=="modify"){var F=RemoteDVRWindow.rTivoRecordingObject._body.replace(/:/g,"_").replace(/\./g,"_");H=schdRecordXMLs[F]}else{var K=RemoteDVRWindow.activebodyid.replace(/:/g,"_").replace(/\./g,"_");H=schdRecordXMLs[K]}console.log("RemoteDVRWindow.handleCreateRecordingConflict");var A=jQuery(H).find("recordingId");var C=jQuery(H).find("seriestitle");var T=jQuery(H).find("programtitle");var J=jQuery(H).find("episodestarttime");console.log("RemoteDVRWindow.handleCreateRecordingConflict >>>> about to parse the xml doc for id "+Q+" in id = "+id);var D="";var G="";var O="";for(var S=0;S<A.length;S++){var N=jQuery(A[S]).text();console.log("RemoteDVRWindow.handleCreateRecordingConflict >>>> iterate existing list: "+S+". "+N);if(Q==N){D=jQuery(C[S]).text();G=jQuery(T[S]).text();O=jQuery(J[S]).text();M.argNum=M.argNum+1;console.log("RemoteDVRWindow.handleCreateRecordingConflict >>>> existing recording info found: "+S+"  ===> "+D+" time === "+O);break}}M["arg"+(U+1)]=D+((G!="")?"<br>"+G:"")+"<br>"+RemoteDVRWindow.convertmsToDateTime(O);console.log("RemoteDVRWindow.handleCreateRecordingConflict >>>> existing show info: "+M["arg"+(U+1)])}var I="<li class='program'>1)&nbsp; "+M.arg0+"</li>";var B="";for(var U=1;U<M.argNum;U++){B+='<li class="program">'+(U+1)+") &nbsp; "+M["arg"+U]+"</li>"}var P="<p>Your new recording conflicts with previously set events. If you record this program, the lowest priority programs (listed below) will not be recorded.</p><br><span class='list-head'>New Recording:</span><ul class='conflict-list'>"+I+"</ul><span class='list-head'>Lowest Priority Programs Will Not Be Recorded:</span><ul class='conflict-list'>"+B+"</ul><p>Do you still want to schedule the NEW recording?</p>";RTivoDialogWindow.confirm(P,"RemoteDVRWindow.onForceConflictConfirm()","RTivoDialogWindow.hideDialog()","record","dont_record")},onForceConflictConfirm:function(){RemoteDVRWindow.force_conflict_record()},force_conflict_record:function(){console.log("RemoteDVRWindow.force_conflict_record >>>> "+RemoteDVRWindow.last_create_rcd_url);if(RTivoDialogWindow.activeDialogWindow){RTivoDialogWindow.hideDialog()}var A=new Ajax.Request(RemoteDVRWindow.last_create_rcd_url+"&override=true",{method:"get",onSuccess:function(E){var B=RTivoDataUtil.interpretAjaxResponse(E);console.log("RemoteDVRWindow.force_conflict_record >>>> onSuccess response"+E.responseText);var C=jQuery(B).find("error").text();var F=jQuery(B).find("scheduledRecordingId").text();if(C&&C!=""){RemoteDVRWindow.display_error_msg(C);RemoteDVRWindow.set_tabs("todo")}else{if(F&&F!=""){var D=new Object();D.argNum=3;D.arg0=RemoteDVRWindow.rTivoRecordingObject._title;D.arg1=RemoteDVRWindow.rTivoRecordingObject._programTitle;D.arg2=RemoteDVRWindow.convertmsToDateTime(RemoteDVRWindow.rTivoRecordingObject._startTime);if(RemoteDVRWindow.rTivoRecordingObject._callingfunction=="modify"){RemoteDVRWindow.deleteonetime(false,"modify");RTivoDialogWindow.info("<p align='center'>Program has been moved to new Box</p>")}else{console.log("RemoteDVRWindow.force_conflict_record >>>> record id: "+F);RemoteDVRWindow.set_reload_tab("todo");RemoteDVRWindow.set_tabs("todo",F);RTivoDialogWindow.info("PROGRAM SCHEDULED TO RECORD"+RemoteDVRWindow.confirmation_info_args(D))}loadScheduleRecordings();jQuery("#recordsingle").css("display","none");jQuery("#modifySingle").css("display","block");episode_vals[12]=F;jQuery("#modifySingle").attr("rel","remoteapp("+episode_vals+")")}else{console.log("RemoteDVRWindow.force_conflict_record >>>> conflict resolution error");RTivoDialogWindow.alert("Error occurred when schedule to record conflicting show. Error: "+C);RemoteDVRWindow.set_tabs("todo")}}},onFailure:function(B){console.log("onFailure");RTivoDialogWindow.alert("An unknown error occurred when trying to schedule the conflicting show. Please try again.");RemoteDVRWindow.set_tabs("todo")}})},isRecordingWithin90Minutes:function(C){var A=new Date();var B=A.getTime();var D=C-B;return D<=5400000},isSelectedRecordingWithin90Minutes:function(){var A=parseInt(RemoteDVRWindow.selected_schd_recording.stTime)+parseInt(RemoteDVRWindow.selected_schd_recording.stOffset*1000);return this.isRecordingWithin90Minutes(A)},convertmsToDateTime:function(A){if(typeof A=="undefined"||A.length==0){console.log("RemoteDVRWindow.convertmsToDateTime >>>> invalid milli second ..... "+A);return""}console.log("RemoteDVRWindow.convertmsToDateTime >>>> ms = "+A);localDate=new Date(parseFloat(A));console.log("RemoteDVRWindow.convertmsToDateTime >>>> localDate == "+localDate);localTime=localDate.getTime();console.log("RemoteDVRWindow.convertmsToDateTime >>>> local time "+localTime);localOffset=localDate.getTimezoneOffset()*60000;utc=localTime+localOffset+(parseInt(RTivoLocationModel.timezoneOffset)*3600000);d=new Date(utc);var B=d.getMonth()+1+"/"+d.getDate()+"/"+d.getFullYear()+" | ";hr=d.getHours();amOrPm="";hr_txt="";if(hr>12){hr_txt=hr-12;amOrPm="pm"}else{if(hr==12){hr_txt=hr;amOrPm="noon"}else{hr_txt=hr;amOrPm="am"}}min=d.getMinutes();min_txt=""+min;if(hr_txt.length<=1){hr_txt="0"+hr_txt}if(min_txt.length<=1){min_txt="0"+min_txt}B=B+hr_txt+":"+min_txt+" "+amOrPm;console.log("RemoteDVRWindow.convertmsToDateTime >>>> date and text "+d+" : "+B);return B},confirmation_info_args:function(C){var B="<div class='recording'>";for(var A=0;A<C.argNum;A++){if(typeof C["arg"+A]!="undefined"){B+="<p>"+C["arg"+A]+"</p>"}}return B+="</div>"},display_error_msg:function(A){console.log("RemoteDVRWindow.display_error_msg >>>> error.textContent: "+A.textContent);var B="";if(A.textContent!=null||A.textContent!=""){if(A.textContent==undefined){B="The information for this series is not available"}else{B=A.textContent}}else{B=jQuery(A).find("message")[0].textContent}eText="There's been an error:<br><br> "+B;console.log("RemoteDVRWindow.display_error_msg >>>> message: "+eText);RTivoDialogWindow.alert(eText)},srreq:function(C,B){var A=$("scheduledrecordings");$("ssprograminfo-panel").innerHTML="";new Ajax.Request("/user/authkey/rtivo/viewOneTimeScheduledRecordings/?bodyId="+RemoteDVRWindow.activebodyid+"&tz="+RTivoLocationModel.timezoneOffset+"&ran="+RemoteDVRWindow.get_random(),{method:"get",onSuccess:function(J){console.log("RemoteDVRWindow.ssreq >>>> onSuccess");A.innerHTML=J.responseText;var F=jQuery(A).find("a");var E;if(F.length>0){for(var D=0;D<F.length;D++){assign_handlers(F[D]);if(C!=undefined){anchparent=F[D].parentNode;if(anchparent.id==C){console.log("RemoteDVRWindow.srreq >>>> hilite id in undefied "+anchparent.id);E=F[D]}}else{E=F[0]}}var G=jQuery(E).attr("rel");var I=G.substring(G.indexOf("(")+1,G.lastIndexOf(")"));var H=I.split(",");RemoteDVRWindow.onetimedetails(H[0],H[1],H[2],H[3],H[4],H[5],H[6],H[7],H[8],H[9],H[10],H[11],H[12],H[13],H[14],H[15]);parent_a=E.parentNode;Element.addClassName(parent_a,"active");$("scheduledrecordings").scrollTop=(parent_a.offsetTop-$("scheduledrecordings").offsetTop)-24;$("cancelthisprogram").onclick=$("cancelthisepisode").onclick=function(K){RemoteDVRWindow.deleteonetime(true)};if(B){B()}}else{$("cancelthisepisode").onclick=function(K){};$("cancelthisprogram").onclick=function(K){}}},onFailure:function(D){console.log("RemoteDVRWindow.srreq >>>> onFailure: "+D.transprtText);RTivoDialogWindow.alert("An error occurred when trying to fetch scheduled recordings. Please try reloading the application.")}})},dvrmgrreq:function(){var B="[";var C=jQuery("#gridRTivoSelector option").length;for(var A=0;A<C;A++){B=B+'"'+document.rdvrselectorform.gridRTivoSelector.options[A].value+'"';if(A<=(C-2)){B=B+","}}B=B+"]";new Ajax.Request("/user/authkey/rtivo/dvrManagerViewer/?json="+B+"&r="+RemoteDVRWindow.get_random(),{method:"get",onSuccess:function(E){var D=$("dvrmgrajax");D.innerHTML=E.responseText;if(RemoteDVRWindow.activetab=="dvrmgr"){$("dvr-save-opt").style.display="block"}},onFailure:function(D){console.log("RemoteDVRWindow.dvrmgrreq >>>> onFailure: "+D.responseText);RTivoDialogWindow.alert("An error occurred when trying to load the dvr manager. Please try reloading the page.")}})},rdvraccordion:function(A){if((A.id=="ssprograminfo"&&Element.hasClassName(A.id,"opened"))||(A.id=="modifyoptions"&&Element.hasClassName(A.id,"closed"))){this.showModifySettingsPanel()}else{this.showInfoPanel()}},showModifySettingsPanel:function(){var C=$("ssprograminfo-panel");var D=$("modifyoptions-panel");var B=$("ssprograminfo");var A=$("modifyoptions");C.style.display="none";D.style.display="block";Element.removeClassName(B,"opened");Element.addClassName(B,"closed");Element.removeClassName(A,"closed");Element.addClassName(A,"opened")},showInfoPanel:function(){var C=$("ssprograminfo-panel");var D=$("modifyoptions-panel");var B=$("ssprograminfo");var A=$("modifyoptions");C.style.display="block";D.style.display="none";Element.removeClassName(B,"closed");Element.addClassName(B,"opened");Element.removeClassName(A,"opened");Element.addClassName(A,"closed")},rankme:function(A,H){function F(J,K,I){J.insertBefore(K,I.nextSibling)}var B=A.parentNode;var E=A.parentNode.parentNode;if(H=="up"){var G=B.previousSibling;console.log(G.nodeName);if(G.nodeName=="LI"){E.insertBefore(B,G)}else{while(G.nodeName=="#text"){G=G.previousSibling;if(G.nodeName=="LI"){E.insertBefore(B,G)}}}}else{var C=B.nextSibling;if(C.nodeName=="LI"){F(E,B,C)}else{while(C.nodeName=="#text"){C=C.nextSibling;if(C.nodeName=="LI"){F(E,B,C)}}}}var D=$("updateseasonpriority");D.onclick=function(){RemoteDVRWindow.reorder_req()};jQuery(D).attr("src","/ui/images/cascade/themes/tvchannel/rtivo/update_priority.jpg")},reorder_req:function(){var B=jQuery("#seriespriority li");var D="{";for(var C=0;C<B.length;C++){D=D+"'"+B[C].id+"':"+(C+1)+"1";if(C<=(B.length-2)){D=D+","}}D=D+"}";var A=new Ajax.Request("/user/authkey/rtivo/modifySeriesRecording/?bodyId="+RemoteDVRWindow.activebodyid+"&json="+D,{method:"get",onSuccess:function(F){console.log("RemoteDVRWindow.reorder_req");RemoteDVRWindow.repreq();RTivoDialogWindow.info("<p align='center'>Your priorities have been updated.</p>");var E=$("updateseasonpriority");E.onclick=function(){};jQuery(E).attr("src","/ui/images/cascade/themes/tvchannel/rtivo/update_priority_grey.jpg")},onFailure:function(E){console.log("RemoteDVRWindow.reorder_req >>>> onFailure: "+E.responseText);RTivoDialogWindow.alert("An error occurred while attempting to update your priority list. Please try again.")}});return false},truncate:function(B,A){if(B.length>A){return B.substr(0,A)+"..."}else{return B}},onetimedetails:function(R,U,F,N,B,H,V,D,J,I,Q,P,M,K,E,L){var R=R.replace(/'/g,"");var J=J.replace(/'/g,"");var M=M.replace(/'/g,"");var G=K.replace(/'/g,"").replace(/_/g,",");var E=E.replace(/'/g,"").replace(/_/g,",");var L=L.replace(/'/g,"").replace(/_/g,",");D=D.replace(/'/g,"");if(G.indexOf("Manual")==0){E="Manual: "+E}if(L.length>0){$("seriestitle").innerHTML=this.truncate(E,45);$("programtitle").innerHTML=this.truncate(L,55)}else{$("seriestitle").innerHTML=this.truncate(E,85);$("programtitle").innerHTML=L}document.modifyform.recordTitle.value=L;document.modifyform.scheduledRecordingId.value=J;document.modifyform.recordStartTime.value=B;document.modifyform.recordSeriesTitle.value=E;console.log("RemoteDVRWindow.onetimedetails >>>> title "+L);RemoteDVRWindow.selected_schd_recording.progId=R;RemoteDVRWindow.selected_schd_recording.seriesId=U;RemoteDVRWindow.selected_schd_recording.sourceId=F;RemoteDVRWindow.selected_schd_recording.vcn=N;RemoteDVRWindow.selected_schd_recording.episodeStTime=B;RemoteDVRWindow.selected_schd_recording.stTime=H;RemoteDVRWindow.selected_schd_recording.endTime=V;RemoteDVRWindow.selected_schd_recording.saveUntil=D;RemoteDVRWindow.selected_schd_recording.recordingId=J;RemoteDVRWindow.selected_schd_recording.recordingIndex=I;RemoteDVRWindow.selected_schd_recording.stOffset=Q;RemoteDVRWindow.selected_schd_recording.endOffset=P;RemoteDVRWindow.selected_schd_recording.recordingType=M;RemoteDVRWindow.selected_schd_recording.autoSrchStr=G;RemoteDVRWindow.selected_schd_recording.seriesTitle=E;RemoteDVRWindow.selected_schd_recording.programTitle=L;jQuery("#getseasonpass").hide().unbind("click");jQuery("#cancelseries").hide().unbind("click");if(R.indexOf("EP")==0){$("cancelthisepisode").style.display="block";$("cancelthisprogram").style.display="none"}else{$("cancelthisepisode").style.display="none";$("cancelthisprogram").style.display="block"}if(M=="oneTime"&&(R.indexOf("SH")==0||R.indexOf("EP")==0)){var O=false;jQuery(scheduledSeries).find("seriesid").each(function(W,X){if(jQuery(X).text()==U){O=true;return false}});if(!O){var T=jQuery("#getseasonpass");T.show();T.click(function(){RemoteDVRWindow.create_series(RemoteDVRWindow.activebodyid,R,F,N,E);RemoteDVRWindow.set_reload_tab("series");RemoteDVRWindow.set_tabs("series");T.hide()})}}if(RTivoLocationModel.headend==""){RTivoLocationModel.headend=app.headend}var A="/detail-html?episodeid="+R+"&stationid="+F+"&channel="+N+"&episodestarttime="+B+"&starttime="+H+"&endtime="+V+"&zip="+RTivoLocationModel.zipcode+"&headendid="+RTivoLocationModel.headend;var C=$("ssprograminfo-panel");RemoteDVRWindow.show_loading_anim("ssprograminfo-panel");var S=new Ajax.Request(A,{method:"get",onSuccess:function(c){console.log("RemoteDVRWindow.onetimedetails.ssinforeq >>>> onSuccess- recordingId: "+J+", recordingType: "+M);if(M=="autopilot"){$("modify-table").style.display="none";$("modifysubmit").style.display="none";$("saveuntil-td").innerHTML=(D=="spaceNeeded"?"Space is Needed":"I delete");getOffsetText=function(h,i){var k="";var j=(i=="st")?"Early - ":"Late - ";var g=(i=="st")?"Late - ":"Early - ";h=h/60;if(Math.abs(h)>=60){var l=Math.abs(h)/60;k=l+" hr"}else{k=Math.abs(h)+" min"}if(h<0){k=g+k}else{if(h>0){k=j+k}else{if(h==0){k="On Time"}}}return k};var b="";var a="";var Z="";var X='<div id="details-autopilot"><p style="">';if(typeof G!="undefined"){var Y;if(Y=G.match(/Manual: (.*)/)){console.log("Found manual autopilot string: "+Y[1]);var W=Y[1].split(" ");var e=W[3].split(":");var f="";if(e[0]>12){f="0"+(e[0]-12)+":"+e[1]+" PM"}else{f=e[0]+":"+e[1]+" AM"}X+="<span>Channel: </span> "+W[1]+"<br/><span>Days: </span>"+W[2]+"<br/><span>Start Time: </span>"+f}else{if(Y=G.match(/Complex: (.*)/)){console.log("Found complex autopilot string: "+Y[1]);var W=Y[1].split(/(\w+: )/g);if(W[0]==""){W.shift()}jQuery.each(W,function(h,g){if(h%2==0){X+="<span>"+g+"</span>"}else{X+=g;if(h<W.length){X+="<br />"}}})}else{console.log("Found single query autopilot string: "+G);if(Y=G.match(/Category: (.*)/)){X+="<span>Category :</span>"+Y[1]}else{if(G.indexOf(",")!=-1){X+="<span>Person: </span>"+G}else{X+="<span>Keyword: </span>"+G}}}}}else{console.log("RemoteDVRWindow.onetimedetails.ssinforeq >>>> no search string available for this autopilot")}C.innerHTML=X+"</p></div>"+c.responseText;$("startoffset-td").innerHTML=getOffsetText(Q,"st");$("endoffset-td").innerHTML=getOffsetText(P,"end");$("autopilot-modify-table").style.display="block"}else{console.log("RemoteDVRWindow.onetimedetails.ssinforeq >>>> non-autopilot blog to fill up rightside module ");$("autopilot-modify-table").style.display="none";$("modify-table").style.display="block";$("modifysubmit").style.display="block";C.innerHTML=(c.responseText=="")?'<div id="details-return" style="font-size:12px;"> No Info Found for this Entry.</div>':c.responseText;console.log("RemoteDVRWindow.onetimedetails.ssinforeq >>>> len= "+document.modifyform.startOffset.proxy.length+" saveuntil = "+D+" start offset "+Q+"  end offset  "+P);RemoteDVRWindow.optionmatch(document.modifyform.saveUntil,D);RemoteDVRWindow.optionmatch(document.modifyform.startOffset,Q);RemoteDVRWindow.optionmatch(document.modifyform.endOffset,P)}},onFailure:function(W){C.innerHTML='<div id="details-return" style="font-size:12px;">There is no information available for the selected program.</div>';$("autopilot-modify-table").style.display="none";$("modify-table").style.display="block";$("modifysubmit").style.display="block";console.log("RemoteDVRWindow.onetimedetails.ssinforeq >>>> onFailure  --> len= "+document.modifyform.startOffset.proxy.length+" saveuntil = "+D+" start offset "+Q+"  end offset  "+P);RemoteDVRWindow.optionmatch(document.modifyform.saveUntil,D);RemoteDVRWindow.optionmatch(document.modifyform.startOffset,Q);RemoteDVRWindow.optionmatch(document.modifyform.endOffset,P)}});$("bodyId").proxy.select($("rdvrsel").selectedIndex)},optionmatch:function(C,B){for(var A=0;A<C.length;A++){if(C.options[A].value==B){C.proxy.select(A);console.log("RemoteDVRWindow.optionmatch >>>> "+C.options[A].value)}}document.modifyform.bodyId.selectedIndex=document.rdvrselectorform_overlay.rdvrsel.selectedIndex;document.repeatingmodifyform.repeatingbodyId.selectedIndex=document.rdvrselectorform_overlay.rdvrsel.selectedIndex},reset_rightpanel_fields:function(){console.log("RemoteDVRWindow.reset_rightpanel_fields >>>> trying to reset all right side panel fields "+document.modifyform.scheduledRecordingId.value);document.modifyform.scheduledRecordingId.value="";console.log("RemoteDVRWindow.reset_rightpanel_fields >>>> trying to reset all right side panel fields "+document.modifyform.scheduledRecordingId.value);$("recordTitle").value="";$("recordSeriesTitle").value="";$("seriestitle").innerHTML="";$("programtitle").innerHTML="";$("repeatingseriestitle").innerHTML="";$("repeatingRecordingId").value="";$("repeatingwillRecord").value="";$("seriesId").value="";$("sourceId").value=""},triggerBoundingError:function(A,C){var H=parseInt(RemoteDVRWindow.selected_schd_recording.stTime)+parseInt(A*1000);var B=parseInt(RemoteDVRWindow.selected_schd_recording.endTime)+parseInt(C*1000);if(H>=B){var F,G,E;if(A>0){F=parseInt(A)/60;G="lengthen";E="longer"}else{F=Math.abs(parseInt(C))/60;G="shorten";E="shorter"}var D=(F==1)?"minute":"minutes";RTivoDialogWindow.alert("<p>You have requested to "+G+" this recording by "+F+" "+D+", which is "+E+' than the full duration of the program.</p><p>Go back and change the "Start Recording" and "Stop Recording" options.</p>');return true}else{return false}},modifyonetimeform:function(){var A=RemoteDVRWindow.modifyonetimefields.inject({},function(C,B){C[B]=jQuery("#"+B).val();return C});if(this.triggerBoundingError(A.startOffset,A.endOffset)){return false}A.fmt="xml";A.r=RemoteDVRWindow.get_random();console.log("RemoteDVRWindow.modifyonetimeform");new Ajax.Request(onetimeform.action,{method:"post",onSuccess:function(E){jQuery("#modifysubmit").attr("disabled",false);var B=RTivoDataUtil.interpretAjaxResponse(E);var D=jQuery(B).find("error").length>=1;sid=A.scheduledRecordingId;if(D){console.log("RemoteDVRWindow.modifyonetimeform >>>> Error occured when modifying a recording. "+A.saveUntil+"."+A.startOffset+"."+A.endOffset);var C=JQuery(D).find("message")[0].text();if(C&&C!=""){RemoteDVRWindow.display_error_msg(C)}else{RTivoDialogWindow.alert("An error occurred when trying to modify your recording. Please try again.")}RemoteDVRWindow.optionmatch(document.modifyform.saveUntil,saveuntil);RemoteDVRWindow.optionmatch(document.modifyform.startOffset,startoffset);RemoteDVRWindow.optionmatch(document.modifyform.endOffset,endoffset)}else{if(RemoteDVRWindow.isSelectedRecordingWithin90Minutes()){RTivoDialogWindow.alert("Oops! "+RemoteDVRWindow.selected_schd_recording.programTitle+" airs in less than 90 minutes, so it may not be modifed. Please be sure to modify recordings at least 90 minutes in advance.")}else{RTivoDialogWindow.info('<p align="center">SETTINGS SAVED</p>')}RemoteDVRWindow.srreq(sid)}},onFailure:function(B){jQuery("#modifysubmit").attr("disabled",false);form.style.display="none";$("error-text").innerHTML=B.responseText||"unknown error";RTivoDialogWindow.alert("An error occurred when trying to update your changes. Please try again.")},parameters:Ajax.parameters(A)})},modifyrepeatingform:function(B){var E;var C;if(B=="modify"){E="modify";C="/user/authkey/rtivo/modifyRepeatingScheduledRecording/"}else{C="/user/authkey/rtivo/createRepeatingScheduledRecording/"}var D=RemoteDVRWindow.modifyrepeatingfields.inject({},function(G,F){G[F]=jQuery("#"+F).val();return G});var A={};A.vcn=D.repeatingvcn;A.seriesId=D.seriesId;A.sourceId=D.sourceId;A.saveUntil=D.repeatingsaveUntil;A.startOffset=D.repeatingstartOffset;A.endOffset=D.repeatingendOffset;A.bodyId=D.repeatingbodyId;A.repeatingRecordingId=D.repeatingRecordingId;A.willRecord=D.repeatingwillRecord;A.episodeType=D.repeatingepisodeType;A.episodesToKeep=D.repeatingepisodesToKeep;A.fmt="xml";A.r=RemoteDVRWindow.get_random();console.log("RemoteDVRWindow.modifyrepeatingform >>>> request params= "+A);new Ajax.Request(C,{method:"post",onSuccess:function(I){jQuery("#repeatingmodifysubmit").attr("disabled",false);var H=RTivoDataUtil.interpretAjaxResponse(I);var G=jQuery(H).find("error").length>=1;if(G){var F=JQuery(G).find("message")[0].text();console.log("RemoteDVRWindow.modifyrepeatingform >>>> modifyrepeat xml response failure");if(F){RemoteDVRWindow.display_error_msg(G)}else{RTivoDialogWindow.alert("An error occurred when trying to update your changes. Please try again.")}RemoteDVRWindow.optionmatch(document.repeatingmodifyform.repeatingsaveUntil,saveuntil);RemoteDVRWindow.optionmatch(document.repeatingmodifyform.repeatingstartOffset,startoffset);RemoteDVRWindow.optionmatch(document.repeatingmodifyform.repeatingendOffset,endoffset);RemoteDVRWindow.srreq(rid)}else{rid=A.repeatingRecordingId;console.log("RemoteDVRWindow.modifyrepeatingform >>>> successnode= "+rid);if(E=="modify"){RemoteDVRWindow.repreq(rid);RTivoDialogWindow.info('<p align="center">SETTINGS SAVED</p>')}else{RemoteDVRWindow.deleteseries("create");RTivoDialogWindow.info("Season Pass has been moved to a new box");RemoteDVRWindow.repreq(rid)}}},onFailure:function(F){jQuery("#repeatingmodifysubmit").attr("disabled",false);RTivoDialogWindow.alert("An error occurred when trying to update your changes. Please try again.")},parameters:Ajax.parameters(A)})},create_series:function(D,C,F,A,E){urlstring="/user/authkey/rtivo/createRepeatingScheduledRecording/?bodyId="+RemoteDVRWindow.activebodyid+"&vcn="+A+"&programId="+C+"&sourceId="+F+"&fmt=xml";var B=new Ajax.Request(urlstring,{method:"get",onSuccess:function(I){var G=RTivoDataUtil.interpretAjaxResponse(I);var H=jQuery(G).find("repeatingRecordingId").text();RemoteDVRWindow.repreq(H);RTivoDialogWindow.info("<p align='center'>"+E+" scheduled to record</p>");loadScheduledSeries();RemoteDVRWindow.setGridInfoToRecordedSeries()},onFailure:function(G){console.log("RemoteDVRWindow.create_series >>>> onFailure - response: "+G.responseText);RTivoDialogWindow.alert("An error occurred while trying to create your series record. Please try again.")}})},setGridInfoToRecordedSeries:function(){jQuery("#schedulednotice span").html("series");jQuery("#schedulednotice").removeClass().addClass("dbl-tick-bubble").show();jQuery("#recordseries").hide()},repreq:function(A){$("repeatingseriestitle").innerHTML="";$("repeatingRecordingId").value="";jQuery("#season-modifyoptions-panel .lables-col").hide();jQuery("#repeatingmodifyform dl").hide();jQuery("#repeatingmodifysubmit").hide();jQuery("#repeatingmodifyform .static-field").hide();new Ajax.Request("/user/authkey/rtivo/viewRepeatingScheduledRecordings/?bodyId="+RemoteDVRWindow.activebodyid+"&r="+RemoteDVRWindow.get_random(),{method:"get",onSuccess:function(G){var B=$("seriespriority");B.innerHTML=G.responseText;var C=jQuery(B).find("li");if(!C.length){jQuery("#cancelrepeatingseries").css("display","none")}else{var F;if(typeof A!="undefined"){var E=$(A);F=jQuery(E).find("a.seriestitle")[0]}else{F=jQuery("a.seriestitle")[0]}F.onclick();var D=F.parentNode;Element.addClassName(D,"hilite");$("seriespriority").scrollTop=(D.offsetTop-$("seriespriority").offsetTop);jQuery("#cancelrepeatingseries").css("display","block")}},onFailure:function(B){console.log("RemoteDVRWindow.repreq >>>> onFailure response: "+B.responseText)}})},repeating_details:function(G,B,E){$("repeatingseriestitle").innerHTML=G;var A=$(B);var D=jQuery("#seriespriority li");for(var C=0;C<D.length;C++){Element.removeClassName(D[C],"hilite")}Element.addClassName(A.id,"hilite");var F=new Ajax.Request("/user/authkey/rtivo/getRepeatingRecordingDetails/?bodyId="+RemoteDVRWindow.activebodyid+"&repeatingRecordingId="+B+"&fmt=xml&r="+RemoteDVRWindow.get_random(),{method:"get",onSuccess:function(I){var H=RTivoDataUtil.interpretAjaxResponse(I);$("repeatingRecordingId").value=jQuery(H).find("repeatingrecordingid").text();$("seriesId").value=jQuery(H).find("seriesid").text();$("sourceId").value=jQuery(H).find("sourceid").text();$("repeatingvcn").value=jQuery(H).find("basevcn").text();RemoteDVRWindow.optionmatch($("repeatingsaveUntil"),jQuery(H).find("saveuntil").text());RemoteDVRWindow.optionmatch($("repeatingstartOffset"),jQuery(H).find("startoffset").text());RemoteDVRWindow.optionmatch($("repeatingendOffset"),jQuery(H).find("endoffset").text());RemoteDVRWindow.optionmatch($("repeatingepisodeType"),jQuery(H).find("episodetype").text());RemoteDVRWindow.optionmatch($("repeatingepisodesToKeep"),jQuery(H).find("episodestokeep").text());jQuery("#season-modifyoptions-panel .lables-col").show();if(E=="true"){jQuery("#repeatingmodifyform dl").hide();jQuery("#repeatingmodifysubmit").hide();jQuery("#repeatingmodifyform select").each(function(K,J){var L=jQuery(J).find("option:selected").text();jQuery("#repeatingmodifyform #static_"+J.id).html(L)});jQuery("#repeatingmodifyform .static-field").show()}else{jQuery("#repeatingmodifyform dl").show();jQuery("#repeatingmodifysubmit").show();jQuery("#repeatingmodifyform .static-field").hide()}},onFailure:function(H){console.log("RemoteDVRWindow.repeating_details >>>> onFailure response: "+H.responseText)}})},deleteonetime:function(A,C){var B=document.modifyform.scheduledRecordingId.value;console.log("RemoteDVRWindow.deleteonetime >>>> recording id in deleteonetime - id: "+B);if(C!="modify"&&B==""){RTivoDialogWindow.alert("Please select a recording to perform this operation.");return }var E=new Object();E.argNum=3;E.arg0=document.modifyform.recordSeriesTitle.value;E.arg1=document.modifyform.recordTitle.value;E.arg2=RemoteDVRWindow.convertmsToDateTime(document.modifyform.recordStartTime.value);RemoteDVRWindow.rTivoDeleteRecordingObject={_recordingId:B,_caller:C,_infoObj:E};if(A){var D="Are you sure you want to cancel this recording?"+RemoteDVRWindow.confirmation_info_args(E);if(RemoteDVRWindow.isSelectedRecordingWithin90Minutes()){RTivoDialogWindow.alert("Oops! "+RemoteDVRWindow.selected_schd_recording.programTitle+" airs in less than 90 minutes, so it may not be canceled. Please be sure to cancel recordings at least 90 minutes in advance.")}RTivoDialogWindow.confirm(D,"RemoteDVRWindow.onDeleteOneTimeRecordingConfirm()","RTivoDialogWindow.hideDialog()","yes","no")}else{RemoteDVRWindow.onDeleteOneTimeRecordingConfirm()}},onDeleteOneTimeRecordingConfirm:function(){if(RTivoDialogWindow.activeDialogWindow){RTivoDialogWindow.hideDialog()}if(!RemoteDVRWindow.rTivoDeleteRecordingObject||!RemoteDVRWindow.rTivoDeleteRecordingObject._recordingId){return }var recordingId=RemoteDVRWindow.rTivoDeleteRecordingObject._recordingId;var deletereq=new Ajax.Request("/user/authkey/rtivo/modifyScheduledRecording/?bodyId="+RemoteDVRWindow.activebodyid+"&scheduledRecordingId="+recordingId+"&willRecord=false&fmt=xml",{method:"get",onSuccess:function(xhr){var response=RTivoDataUtil.interpretAjaxResponse(xhr);var error=jQuery(response).find("error").text();if(error&&error!=""){var errorMessage=jQuery(error).find("message").text();if(errorMessage){RemoteDVRWindow.display_error_msg(errorMessage)}else{RTivoDialogWindow.alert("An error occurred while attempting to cancel the recording. Please try again.")}RemoteDVRWindow.optionmatch(document.modifyform.saveuntil,saveuntil);RemoteDVRWindow.optionmatch(document.modifyform.startoffset,startoffset);RemoteDVRWindow.optionmatch(document.modifyform.endoffset,endoffset)}else{if(RemoteDVRWindow.rTivoDeleteRecordingObject._caller!="modify"){var content="RECORDING CANCELED"+RemoteDVRWindow.confirmation_info_args(RemoteDVRWindow.rTivoDeleteRecordingObject._infoObj);RTivoDialogWindow.info(content)}document.modifyform.scheduledRecordingId.value="";$("getseasonpass").onClick=function(){};$("ssprograminfo-panel").innerHTML="";jQuery("#seriestitle").html("");jQuery("#programtitle").html("");RemoteDVRWindow.srreq();var xmltolook;var actId=RemoteDVRWindow.activebodyid.replace(/:/g,"_").replace(/\./g,"_");eval(" xmltolook = schdRecordXMLs."+actId);jQuery(xmltolook).find("recordingId").each(function(){var rcdId=this;if(recordingId==rcdId.textContent){parentRcdId=rcdId.parentNode;jQuery(parentRcdId).remove()}})}},onFailure:function(xhr){console.log("RemoteDVRWindow.deleteonetime >>>> onFailure: "+xhr.responseText);form.style.display="none";RTivoDialogWindow.alert("An error occurred while attempting to cancel the recording. Please try again.")}})},dvrmgrsaveoption:function(){var D="{";var G=document.dvrmgrform.isdefault;var C,B="";for(var F=0;F<G.length;F++){var E=$("name"+G[F].id).value;if(E==""){RTivoDialogWindow.alert("Please enter a valid name for your Tivo device");return }if(G[F].checked){C=G[F].value;B=E+"_default";D=D+'"'+C+'":"'+B+'",';console.log("RemoteDVRWindow.dvrmgrsaveoption >>>> default tivo id: "+C+" --- tivo name: "+B)}else{id=G[F].value;name=E;D=D+'"'+id+'":"'+name+'",';console.log("RemoteDVRWindow.dvrmgrsaveoption >>>> tivo id: "+id+" --- tivo name: "+name)}}D=D.substring(0,D.length-1)+"}";console.log(D);var A=new Ajax.Request("/user/authkey/rtivo/dvrManagerUpdate/?json="+D+"&fmt=xml",{method:"post",onSuccess:function(H){RTivoDialogWindow.info('<p align="center">SETTINGS SAVED</p>');console.log("RemoteDVRWindow.dvrmgrsaveoption >>>> onSuccess response: "+H.responseText);RTivoAuthUtil.doTivoAuth(RemoteDVRWindow.onDeviceListRefresh)},onFailure:function(H){console.log("RemoteDVRWindow.dvrmgrsaveoption >>>> onFailure response: "+H.responseText);RTivoDialogWindow.alert("An error occurred when trying to save your changes. Please try again.")}});RemoteDVRWindow.set_reload_tab()},onDeviceListRefresh:function(){RTivoViewUtil.populateTVGridTivoSelector();RemoteDVRWindow.load_dvrselector(true)},deleteseries:function(A){var C=jQuery("#repeatingseriestitle").text();var D=jQuery("#repeatingRecordingId")[0].value;if(!D){RTivoDialogWindow.alert("Please select a series to cancel.");return }if(typeof A=="undefined"){var B="Are you sure you want to cancel this Season Pass?<div class='recording'>"+C+"</div>";RTivoDialogWindow.confirm(B,"RemoteDVRWindow.doDeleteSeries()","RTivoDialogWindow.hideDialog()","yes","no")}else{RemoteDVRWindow.doDeleteSeries(A)}},doDeleteSeries:function(B){if(RTivoDialogWindow.activeDialogWindow){RTivoDialogWindow.hideDialog()}jQuery("#cancelrepeatingseries").attr("disabled",true);var A=jQuery("#repeatingRecordingId")[0].value;new Ajax.Request("/user/authkey/rtivo/modifyRepeatingScheduledRecording/?bodyId="+RemoteDVRWindow.activebodyid+"&repeatingRecordingId="+A+"&willRecord=false&fmt=xml",{method:"post",onSuccess:function(F){jQuery("#cancelrepeatingseries").attr("disabled",false);var C=RTivoDataUtil.interpretAjaxResponse(F);var E=jQuery(C).find("error").text();if(E&&E!=""){var D=jQuery(E).find("message").text();if(D){RemoteDVRWindow.display_error_msg(D)}else{RTivoDialogWindow.alert("An error occurred while attempting to cancel the recording. Please try again.")}}else{if(typeof B=="undefined"){loadScheduledSeries();RTivoDialogWindow.info("<p align='center'>Series Cancelled</p>")}RemoteDVRWindow.set_reload_tab("todo");RemoteDVRWindow.repreq()}},onFailure:function(C){jQuery("#cancelrepeatingseries").attr("disabled",false);console.log("RemoteDVRWindow.deleteseries >>>> onFailure: "+C.responseText);RTivoDialogWindow.alert("An error occurred when cancelling series. Please try again.")}})},load_overlay:function(){if(is_ie){$("rdvrselectorform").style.display="none"}var C=new Ajax.Request("/overlays/remoteapp/",{method:"get",asynchronous:false});if(C.responseIsFailure()){console.log("RemoteDVRWindow.load_overlay >>>> overlay request failed");return false}var D=document.createElement("div");D.innerHTML=C.transport.responseText;document.body.appendChild(D);var B=D.getElementsByTagName("a");for(var A=0;A<B.length;A++){assign_handlers(B[A])}var E=$("remotedvr");Widgets.build(E);$("seriespriority").onmouseover=function(F){jQuery("#seriespriority").find(".hilite").removeClass("hilite")};$("dvrsaveoption").onclick=function(F){RemoteDVRWindow.dvrmgrsaveoption()};onetimeform=$("modifyform");onetimeform.onsubmit=function(){return false};modifysubmitbutton=$("modifysubmit");modifysubmitbutton.onclick=function(F){jQuery("#modifysubmit").attr("disabled",true);if(document.modifyform.bodyId.options[document.modifyform.bodyId.selectedIndex].value==document.rdvrselectorform_overlay.rdvrsel.options[document.rdvrselectorform_overlay.rdvrsel.selectedIndex].value){RemoteDVRWindow.modifyonetimeform()}else{console.log("modifysubmitbutton.onclick: user has selected a different box");form_bodyId=document.modifyform.bodyId.options[document.modifyform.bodyId.selectedIndex].value;form_startOffset=document.modifyform.startOffset.options[document.modifyform.startOffset.selectedIndex].value;form_endOffset=document.modifyform.endOffset.options[document.modifyform.endOffset.selectedIndex].value;form_saveUntil=document.modifyform.saveUntil.options[document.modifyform.saveUntil.selectedIndex].value;console.log("modifysubmitbutton.onclick >>>> form_bodyId "+form_bodyId+" form_startOffset  "+form_startOffset+" form_endOffset  "+form_endOffset+"  form_saveUntil  "+form_saveUntil);RemoteDVRWindow.create_recording(form_bodyId,RemoteDVRWindow.selected_schd_recording.stTime,RemoteDVRWindow.selected_schd_recording.endTime,RemoteDVRWindow.selected_schd_recording.progId,RemoteDVRWindow.selected_schd_recording.sourceId,RemoteDVRWindow.selected_schd_recording.vcn,RemoteDVRWindow.selected_schd_recording.seriesTitle,RemoteDVRWindow.selected_schd_recording.progamTitle,form_startOffset,form_endOffset,form_saveUntil,"modify")}return cancelEvent(F)};repeatingform=$("repeatingmodifyform");repeatingform.onsubmit=function(){return false};repeatingmodifysubmitbutton=$("repeatingmodifysubmit");repeatingmodifysubmitbutton.onclick=function(F){jQuery("#repeatingmodifysubmit").attr("disabled",true);if($("repeatingmodifyform").repeatingbodyId.selectedIndex==document.rdvrselectorform_overlay.rdvrsel.selectedIndex){RemoteDVRWindow.modifyrepeatingform("modify")}else{console.log("repeatingmodifysubmitbutton.onclick >>>> NOT equals");RemoteDVRWindow.modifyrepeatingform("create")}return cancelEvent(F)};return true},modifyonetimefields:["saveUntil","startOffset","endOffset","bodyId","scheduledRecordingId","willRecord"],modifyrepeatingfields:["repeatingvcn","seriesId","sourceId","repeatingsaveUntil","repeatingstartOffset","repeatingendOffset","repeatingbodyId","repeatingRecordingId","repeatingwillRecord","repeatingepisodeType","repeatingepisodesToKeep"]};var RTivoDialogWindow={queue:[],activeDialogWindow:null,infoHideTimer:null,infoHideTimerDuration:3000,confirm:function(C,E,D,B,A){C+="<div id='dialog-confirm-buttons'><div id='"+B+"' class='confirm' onClick='"+E+"'></div><div id='"+A+"' class='cancel' onClick='"+D+"'></div></div>";this.openDialog(C,false)},alert:function(A){A+="<div id='dialog-alert-ok' onClick='RTivoDialogWindow.hideDialog()'></div>";this.openDialog(A,false)},info:function(A){this.openDialog(A,true)},openDialog:function(A,B){if(this.activeDialogWindow){this.queue.push({dialogContent:A,doTimer:B})}else{if(this.infoHideTimer){clearTimeout(this.infoHideTimer)}this.activeDialogWindow=new Window("dialog-modal");this.activeDialogWindow.show();jQuery("#dialog-content").css("display","block");jQuery("#dialog-content-inner").css("display","block").html(A);if(B){this.infoHideTimer=setTimeout("RTivoDialogWindow.hideDialog()",this.infoHideTimerDuration)}}},hideDialog:function(){this.activeDialogWindow.hide();this.activeDialogWindow=null;if(this.infoHideTimer){clearTimeout(this.infoHideTimer)}jQuery("#dialog-content").css("display","none");jQuery("#dialog-content-inner").css("display","none").html("");if(this.queue.length>0){var A=this.queue[0];this.openDialog(A.dialogContent,A.doTimer);this.queue.pop()}},reset:function(){if(this.activeDialogWindow){this.hideDialog()}this.queue=[];if(this.infoHideTimer){this.infoHideTimer=null}}};
// /modules/articles/article_recommend.js from ui
CommunityManager.prototype.getRating=function(B,A,C,E){if(B.indexOf(",")==-1){var D={byAboutID:B,fields:"aboutID"}}else{var D="fields=aboutID&version=1.0&account="+encodeURIComponent(this.accountURI)+"&type=json&"+this.__getMultiAboutIDQuery(B)}this._makeJsonServiceCall(D,C+tpRatingMetadataServicePath,A,null,function(F){E(F,B)})};CommunityManager.prototype.getTotalRating=function(B,A,C,E){if(B.indexOf(",")==-1){var D={byAboutID:B,fields:"count,aboutID"}}else{var D="fields=aboutID,count&version=1.0&account="+encodeURIComponent(this.accountURI)+"&type=json&"+this.__getMultiAboutIDQuery(B)}this._makeJsonServiceCall(D,C+tpTotalRatingMetadataServicePath,A,null,function(F){E(F,B)})};CommunityManager.prototype.__getMultiAboutIDQuery=function(D){var B=D.split(",");var C="";for(var A=0;A<B.length;A++){C+="byAboutID="+encodeURIComponent(B[A]);if(A+1!=B.length){C+="&"}}return C};ArticleRecommend=function(){this._initialize.apply(this,arguments)};ArticleRecommend.prototype={_initialize:function(B){this.myRatingLoading=false;this.totalRatingLoading=false;this.cmInstance=B.cmInstance;var D=j$(B.recommendSelector);var G=[];for(var A=0;A<D.length;A++){this._widgets.push(new this._recommendWidget(D.eq(A),this));G.push(D[A].getAttribute("rel"))}var H=this;var F=function(K){var J=K.join(",");H.cmInstance.getRating(K,"1.0",tpRatingDataServicePrefix,H._getRatingAfter.bindTo(H));H.cmInstance.getTotalRating(K,"1.0",tpTotalRatingDataServicePrefix,H._getTotalRatingAfter.bindTo(H))};var I=5;var E=[];for(var C=0;C<G.length;C++){if(C%I==0&&E.length>0){F(E);E=[]}E.push(G[C])}if(E.length>0){F(E)}},_widgets:[],_getRatingAfter:function(B,E){for(var C=0;C<E.length;C++){var D=this._findWidgetsByAboutID(E[C]);for(var A=0;A<D.length;A++){D[A]._loader.hide();D[A]._getRatingAfter()}}if(typeof B.items!="undefined"){for(var C=0;C<B.items.length;C++){var D=this._findWidgetsByAboutID(B.items[C].aboutID);for(var A=0;A<D.length;A++){D[A]._getRatingAfter(B.items[C])}}}},_getTotalRatingAfter:function(B,E){for(var C=0;C<E.length;C++){var D=this._findWidgetsByAboutID(E[C]);for(var A=0;A<D.length;A++){D[A]._getTotalRatingAfter()}}if(typeof B.items!="undefined"){for(var C=0;C<B.items.length;C++){var D=this._findWidgetsByAboutID(B.items[C].aboutID);for(var A=0;A<D.length;A++){D[A]._getTotalRatingAfter(B.items[C])}}}},_findWidgetsByAboutID:function(C){var B=[];for(var A=0;A<this._widgets.length;A++){if(this._widgets[A].objectURI==C){B.push(this._widgets[A])}}return B},_addToDataQueue:function(){}};ArticleRecommend.prototype._recommendWidget=function(){this._initialize.apply(this,arguments)};ArticleRecommend.prototype._recommendWidget.prototype={_initialize:function(C,B){this._widgetElement=C;this._isLink=!this._widgetElement.hasClass("non-link");var A=this._isLink?"a":"span";this._ratingData=j$(DomFragment("span",{className:"recommend_data",style:{display:"none"},toAppend:[DomFragment("b",{className:"pre-recommend",toAppend:[document.createTextNode("Must Read?")]}),DomFragment("b",{className:"post-recommend",toAppend:[document.createTextNode("Thank You")]}),DomFragment(A,{className:"recommend",toAppend:[DomFragment("span",{toAppend:[document.createTextNode("Yes")]}),DomFragment("b"),DomFragment("strong")]})]}));this._ratingData.find(".recommend b").html("<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>");this._loader=jQuery(".cm_recommend_loading",this._widgetElement);this._firstLoaded=false;this._recommendCount=0;DomFragment(this._widgetElement[0],{toAppend:[this._ratingData[0]]});this.objectURI=C.attr("rel");this.$super=B},_getRatingAfter:function(A){if(this._isLink){this._ratingData.bind("click",this,this._recommend)}if(typeof A!="undefined"){this._deactivateLink()}else{this._activateLink()}this._registerLoad("rating",A)},_getTotalRatingAfter:function(A){if(typeof A!="undefined"){this._recommendCount=Number(A.totalRating.count);this._setCountText(A.totalRating.count);this._registerLoad("totalRating",A)}else{this._recommendCount=0;this._setCountText(0);this._registerLoad("totalRating")}},_registerLoad:function(B,A){if(this._firstLoaded==true){this._loader.hide();this._ratingData.show()}else{this._firstLoaded=true}},_activateLink:function(){if(this._isLink){var A=this._ratingData.find("a");A.attr({href:"#",title:"Click here to recommend this content."})}this._ratingData.removeClass("user_recommends")},_deactivateLink:function(){if(this._isLink){var A=this._ratingData.find("a");A.attr({href:"",title:"You have recommended this content."})}this._ratingData.addClass("user_recommends")},_recommend:function(B){B.preventDefault();var C=B.data;if(!C._ratingData.hasClass("user_recommends")){C.$super.cmInstance.addRating(C.objectURI,1,"1.0",tpRatingDataServicePrefix,C._recommendError.bindTo(this));var D=C.$super._findWidgetsByAboutID(C.objectURI);var E=C._recommendCount+1;for(var A=0;A<D.length;A++){D[A]._setWidgetDisplay(E)}C._openShare()}},_setWidgetDisplay:function(A){this._setCount(A);this._deactivateLink()},_setCount:function(A){this._recommendCount=Number(A);this._setCountText(A)},_setCountText:function(B){var A=this._ratingData.find("strong");A.text(B)},_recommendError:function(A){},_openShare:function(){this._widgetElement.find(".recommend-share").addClass("poppedShare")}};jQuery(document).ready(function(){ComcastRecommend=new ArticleRecommend({recommendSelector:".community_recommend",cmInstance:tpCommunityManager})});
// /modules/games.js from ui
function setupGamesModule(){var B=new TabBar("games");var A=0;for(var C=0;tab=B.tab(C);C++){if(Element.hasClassName(tab,"default")){A=C}}B.onchange=function(I){var H=this.tab(I),F=this.panel(I);if(!H||!F){return false}var G=F.getElementsByTagName("div");var E=G.length>0?G[0].className:"success";if(E!="loading"){return true}var D=decodeURI(H.getElementsByTagName("a")[0].href.split("#")[1]);new Ajax.Request("./games/"+D+"/",{method:"get",onSuccess:function(J){F.innerHTML=J.responseText}});return true};B._tracking=false;B.update(A);B._tracking=true};
// /component/device_promo.js from layout
if(typeof PDS==="undefined"||!PDS){var PDS={}}PDS.devicePromo=PDS.devicePromo||{};PDS.devicePromo=(function(B){var A={root:B(".component.device_promo"),promoRedisplayCount:20};var C={init:function(E){var D=PDS.devicePromo.getPlatforms();B.extend(A,E);PDS.devicePromo.hasPromo(D)},getOS:function(){if(CIM.browser.isAndroid()){return"Android"}else{if(CIM.browser.isBlackBerry()){return"Blackberry"}else{if(CIM.browser.isIPad()){return"iPad"}else{if(CIM.browser.isIPhone()){return"iPhone"}else{if(CIM.browser.isIPod()){return"iPod"}else{if(CIM.browser.isMac()){return"Mac"}else{if(CIM.browser.isWindows()){return"Windows"}else{if(CIM.browser.isWebOs()){return"WebOs"}else{return"Unknown"}}}}}}}}},getBrowser:function(){if(CIM.browser.isBolt()){return"Bolt"}else{if(CIM.browser.isChrome()){return"Chrome"}else{if(CIM.browser.isFirefox()){return"Firefox"}else{if(CIM.browser.isIEMobile()){return"IE Mobile"}else{if(CIM.browser.isOpera()){return"Opera"}else{if(CIM.browser.isSafari()){return"Safari"}else{if(CIM.browser.isSafariMobile()){return"Safari Mobile"}else{if(CIM.browser.isIE()){return"IE"}else{return"Unknown"}}}}}}}}},getPlatforms:function(){return[PDS.devicePromo.getOS(),PDS.devicePromo.getBrowser()]},hasPromo:function(I,O){var K=I||PDS.devicePromo.getPlatforms(),N=K.length,L=O||A.root,G=L.find("p[data-message]"),D=G.length,J,M,H,E,F;for(H=0;H<D;H++){J=B(G[H]).attr("data-message");M=J.split(" ");for(F=0;F<M.length;F++){for(E=0;E<N;E++){if(I[E].match(M[F])){if(M[F]!=="iPad"){PDS.devicePromo.displayPushdownPromo(J)}else{PDS.devicePromo.displayPromo(J)}}}}}},displayPushdownPromo:function(G,H){var E=H||A.root,F=check_cid_exists(),D=0;if(!F){D=PDS.devicePromo.getPromoPushdownCount();if(D>=A.promoRedisplayCount-1){D=0;PDS.devicePromo.displayPromo(G);PDS.devicePromo.hidePromo()}else{D=D+1}}else{D=0}PDS.devicePromo.setPromoPushdownCount(D)},displayPromo:function(E,F){var D=F||A.root;D.slideDown().find('p[data-message="'+E+'"]').show()},hidePromo:function(E){var D=E||A.root;D.find(".close").click(function(){D.slideUp();return false})},getPromoPushdownCount:function(){return CIM.storage.local.get("sethomepage_pushdown_counter")},setPromoPushdownCount:function(D){CIM.storage.local.set("sethomepage_pushdown_counter",D)}};return C})(jQuery);(function(A){A(document).ready(function(){PDS.devicePromo.init()})})(jQuery);
// /setup/page.js from cimspire
if(typeof require==="function"){define("jquery",function(){return jQuery});require(["jquery","cimspire/components/xpbar/xpbar_3"],function(B,A){B(document).ready(function(){var C=new A();C.setElement(".xpbar_3");CIM.user.get(["isLoggedIn","comcastUser","email"],function(D){if(D.isLoggedIn&&D.comcastUser){C.updateProgressDisplay()}C.setLoggedIn(D.isLoggedIn);C.setEmail(D.email)})})})};