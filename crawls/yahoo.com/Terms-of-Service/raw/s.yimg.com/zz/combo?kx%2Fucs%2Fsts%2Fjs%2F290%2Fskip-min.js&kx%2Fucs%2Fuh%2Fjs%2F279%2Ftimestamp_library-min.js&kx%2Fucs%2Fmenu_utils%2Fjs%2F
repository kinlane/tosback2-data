YUI.add("ucs-skip-to-search",function(A){A.namespace("ucs");A.ucs.SkipToSearch=function(B){this.skipLink=B;this.init();};A.ucs.SkipToSearch.prototype={init:function(){this.skipLink.on("click",this._focusSearch,this);this.skipLink.removeClass("yucs-activate");},_focusSearch:function(B){B.halt();A.one("#yUnivHead").one(".yucs-search input").focus();}};},"1.0",{requires:["node","event"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-skip-to-search",function(D){var C=new D.ucs.SkipToSearch(D.one("#yUnivHead").one(".yucs-skipto-search"));});})();YUI.add("ucs-timestamp-library",function(A){A.namespace("ucs.Timestamp");A.ucs.Timestamp={getTimeStamp:function(D){var M,Q,S,N,F="AM",I,B=A.one("#yUnivHead"),K=D.dateRef||new Date(),L=D.date,P=D.locale?D.locale:B.getAttribute("data-lang"),G=L.getTime(),R=L.getDate(),J=K.getDate(),T=K.getTime(),H=T-G,O=J-R,E=true,C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];P=A.Lang.isString(P)?P:"en-us";E=/^en-us$/i.test(P);H=parseInt(H/1000,10);Q=L.getMonth();S=L.getHours();N=L.getMinutes();I=T-((K.getHours()*60*60*1000)+(K.getMinutes()*60*1000)+(K.getSeconds()*1000)+K.getMilliseconds());if(N<10){N="0"+N;}if(S>=12){F="PM";}if(S>12){S-=12;}if(!E){M=C[Q]+" "+R+"&nbsp;&nbsp;"+S+":"+N+" "+F;}else{if(O===0){if(H<60){if(H>1){M=H+" secs ago";}else{M=H+" sec ago";}}else{if(H<3600){H=Math.ceil(H/60,10);if(H<2){M=H+" min ago";}else{M=H+" mins ago";}}else{if(H<86400){H=Math.ceil(H/3600);if(H>1){M=H+" hours ago";}else{M=H+" hour ago";}}}}}else{if(((I-G)<86400000)&&O!==0){M="Yesterday "+S+":"+N+" "+F;}else{M=C[Q]+" "+R+"&nbsp;&nbsp;"+S+":"+N+" "+F;}}}return M;}};},"1.0",{requires:["node"]});YUI.add("ucs-menu-utils",function(A){A.namespace("ucs");var C="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",I="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",J='<span class="separator" role="presentation"></span>',G="click",H="a",O="role",K="tabIndex",B="hide",D="iframe",L="ul",M="li",E="parentNode",N="http://l.yimg.com/a/lib/ush/icon.gif",F="https://s.yimg.com/lq/lib/ush/icon.gif";A.ucs.MenuUtils=function(Q,P){var R=P&&P.panelSelector||L;this.menu=Q;this.panel=this.menu.one(R);this.init();};A.ucs.MenuUtils.prototype={init:function(){this.keyedup=false;this.menu.delegate(G,this._handleMenuClick,">a",this);this.menu.delegate(G,this._handleMenuItemClick,"li a",this);this.menu.on("keyup",this._handleKeyup,this);this.menu.on("keydown",this._handleKeydown,this);this.menu.removeClass("yucs-activate");this._initAria();},_initAria:function(){this.menu.one(H).set(O,"button");this.panel.all(H).set(O,"menuitemradio");this.panel.set(O,"menu");this.panel.all("div,ul,li").set(O,"presentation");if(!A.UA.ipad&&!A.UA.mobile){this.panel.set(K,-1);}this.focusmanager=this.panel.plug(A.Plugin.NodeFocusManager,{descendants:H,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"li-selected",fn:function(P){return P.get(E);}},circular:true});},_destructAria:function(){this.panel.unplug(A.Plugin.NodeFocusManager);this.panel.one(H).set(K,0);},_handleMenuClick:function(P){P.halt();if(this.panel.hasClass(B)){this._accessShowMenu(P);}else{this._hideMenu();}},_handleKeyup:function(P){if(27===P.keyCode){this.menu.one(H).focus();this._hideMenu();}else{if(40===P.keyCode&&!this.keyedup){this.panel.one(H).focus();this.keyedup=true;}}},_handleKeydown:function(P){if(!this.panel.hasClass(B)){P.stopPropagation();}if(40===P.keyCode){P.preventDefault();}},_handleDocumentClick:function(P){if(this.panel.contains(P.target)||P.target._node===this.panel._node||this.panel.hasClass(B)||P.target===this.menu.one(">a")||P.target.get("parentNode")===this.menu.one(">a")){this.skipBlur=true;return;}this._hideMenu();},_accessShowMenu:function(Q){var P=this;this._hideAllMenus();this._showMenu(Q);this.panel.focus();A.Node.DOM_EVENTS.touchend=true;this.documentBlurHandle=A.on("blur",function(S){var R=this;if(!this.skipBlur){this.timeout=setTimeout(function(){R._hideMenu();},50);}this.skipBlur=false;},this.panel,this);this.documentFocusHandle=A.on("focus",function(R){if(this.timeout&&this.panel.hasChildNodes(R.target)){clearTimeout(this.timeout);this.timeout=null;}},this.panel,this);this.documentClickHandle=A.on(G,this._handleDocumentClick,document.body,this);this.documentMouseDownHandle=A.on("mousedown",this._handleDocumentClick,document.body,this);this.documentWheelHandle=A.on("mousewheel",this._hideAllMenus,this);this.documentScrollHandle=A.one(window).on("scroll",this._hideAllMenus,this);},_showMenu:function(Q){this.panel.removeClass(B);this._addIframeShim();var P=this.menu.one(D);if(P){P.removeClass(B);}},_position:function(){var P=this.menu.get("region");if(!this.panel.hasClass("yucs-menu-right")&&!this.panel.hasClass("yucs-menu-left")){this.panel.setStyle("left",P[0]);}this.panel.setStyle("top",P[1]+13);},_hideMenu:function(){this.panel.addClass(B);var P=this.menu.one(D);if(P){P.addClass(B);}if(this.documentBlurHandle){this.documentBlurHandle.detach();}if(this.documentFocusHandle){this.documentFocusHandle.detach();}if(this.documentClickHandle){this.documentClickHandle.detach();}if(this.documentMouseDownHandle){this.documentMouseDownHandle.detach();}if(this.documentTouchEndHandle){this.documentTouchEndHandle.detach();}this.keyedup=false;},_hideAllMenus:function(){var R=A.all(".yucs-menu ul"),P=A.all("yucs-menu iframe"),Q=A.all(".yucs-notifications ul.ynotif-yahoo-panel");v2Notifications=A.all(".yucs-notifications div.yucs-notif-panel");this._hideMenu();R.addClass(B);P.addClass(B);Q.addClass(B);v2Notifications.addClass(B);},_addIframeShim:function(){var P=A.all("select"),R=(A.UA.ie<=6),Q;if(!R||(!P.size()>0)){return;}Q=this.menu.one(D);if(!Q){Q=document.createElement(D);Q=this.panel.get(E).insertBefore(Q,this.panel);}Q.className="yucs-shim";Q.setStyle("position","absolute");Q.setStyle("width",this.panel.getComputedStyle("width"));Q.setStyle("height",this.panel.getComputedStyle("height"));Q.setStyle("top",this.panel.getY()+"px");Q.setStyle("border","0px none");},_addMenuGroups:function(S,X,W){var U=this.menu.one(L),P="",Q=(U.get("children")._nodes.length)?true:false;for(var R=0,T=S.length;R<T;R++){var V=S[R].length;if(X==="bottom"){S[R][0].separatorTop=true;}else{if(R<(T-1)||Q){S[R][V-1].separatorBottom=true;}}P+=this._addMenuGroup(S[R],W);}if(X==="bottom"){U.append(P);}else{U.prepend(P);}},_addMenuGroup:function(Q,S){var T="";for(var R=0,P=Q.length;R<P;R++){if(S){Q[R].isDebugItem=true;Q[R].menuClass="debug-item";}else{Q[R].isDebugItem=false;Q[R].menuClass="minty-item";}T+=this._addMenuItem(Q[R]);}return T;},_addMenuItem:function(Q){var P="";if(Q.isActive){Q.checkedAria='aria-checked="true"';}else{Q.checkedAria="";}if(Q.isDisabled){Q.disabledAria='aria-disabled="true"';}else{Q.disabledAria="";}switch(Q.actionType){case"link":P=A.substitute(C,Q,this._processTemplateValue);break;case"customEvent":P=A.substitute(I,Q,this._processTemplateValue);break;default:break;}if(P){if(Q.isDebugItem){P=P.replace(/separator/,"separator debug-item");}else{P=P.replace(/separator/,"separator minty-item");}}return P;},_clearMenuItem:function(P){this.menu.one(L).all("."+P).each(function(Q){Q.remove(true);});},_processTemplateValue:function(Q,R,S){A.log("key = "+Q+" value = "+R+" meta_data = "+S);var T="";var P=(document.location.protocol==="https:")?F:N;switch(Q){case"icon":if(R!==undefined){if(R==="available"){T='<img src="'+P+'" class="yucs-opi available"/>';}else{if(R==="offline"){T='<img src="'+P+'" class="yucs-opi offline"/>';
}else{if(R==="invisible"){T='<img src="'+P+'" class="yucs-opi invisible"/>';}else{if(R==="busy"){T='<img src="'+P+'" class="yucs-opi busy"/>';}else{if(R==="idle"){T='<img src="'+P+'" class="yucs-opi idle"/>';}else{T='<img src="'+R+'" />';}}}}}}break;case"separatorTop":if(R){T=J;}break;case"separatorBottom":if(R){T=J;}break;case"actionData":if(R){T='data-mad="'+R+'"';}break;case"isDisabled":if(R){T="disabled";}break;case"isActive":if(R){T="sp active";}break;case"checkedAria":T=R;break;default:T=R;break;}return T;},_resetItemStatus:function(S){var R=S.ancestor(L).all(M),Q=S.ancestor(L).all("li.disabled");R.removeClass("sp active");Q.removeClass("disabled");if(S.getAttribute("data-dis")){var P=S.ancestor(M);P.addClass("disabled");}if(S.getAttribute("data-hs")){var P=S.ancestor(M);P.addClass("sp active");}},_handleMenuItemClick:function(Q){var P=Q.target;}};},"1.0",{requires:["node","event","event-mouseenter","substitute","node-focusmanager"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-menu-utils",function(D){var C=D.one("#yUnivHead").all("li.yucs-menu.yucs-activate");C.each(function(F){var E=new D.ucs.MenuUtils(F);});});})();YUI.add("ucs-aria-toolbar",function(E){E.namespace("ucs");var D="role",A="tabIndex",B=">li>a",C="parentNode";E.ucs.AriaToolbar=function(F){this.toolbar=F;this.toolbar.removeClass("yucs-activate");this.init();};E.ucs.AriaToolbar.prototype={init:function(){this.toolbar.set(D,"toolbar");this.toolbar.all(">li").set(D,"presentation");this.focusmanager=this.toolbar.plug(E.Plugin.NodeFocusManager,{descendants:B,keys:{next:"down:39",previous:"down:37"},focusClass:{TABINDEX_ATTR:"-1",fn:function(F){return F.get(C);}},circular:true});this.toolbar.focusManager.get("descendants").after("keyup",function(F){if(9===F.keyCode){this.toolbar.focusManager.focus(0);}},this);}};},"1.0",{requires:["node","event","node-focusmanager"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-aria-toolbar",function(D){var C=D.one("#yUnivHead").all("ul.yucs-toolbar.yucs-activate");C.each(function(E){var F=new D.ucs.AriaToolbar(E);});});})();YUI.add("ucs-usermenu",function(C){var A="ucs:userMenuShow";var B="ucs:userMenuItemClick";C.ucs.UserMenu=function(D){C.ucs.UserMenu.superclass.constructor.apply(this,arguments);this._initCustomEvents();};C.extend(C.ucs.UserMenu,C.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(A,{broadcast:2,emitFacade:true});this.publish(B,{broadcast:2,emitFacade:true});C.Global.on("ucs:userMenuItems",this._handleUserMenuItems,this);},_showMenu:function(D){C.ucs.UserMenu.superclass._showMenu.apply(this,arguments);this.fire(A);},_handleUserMenuItems:function(H){if(!H.menuGroups||!H.menuGroups.length){return;}var F=H.menuGroups;F.reverse();if(H.reset){this._clearMenuItem("minty-item");}for(var G=0,E=F.length;G<E;G++){var D=F[G].length;F[G][D-1].separator=true;this._addMenuGroup(F[G]);}this._destructAria();this._initAria();},_handleMenuItemClick:function(I){C.ucs.UserMenu.superclass._handleMenuItemClick.apply(this,arguments);var H,F,D,E;H=I.target;H=H.ancestor("a",true);F=H.getAttribute("data-mad");D=H.getAttribute("data-customevt");E=H.ancestor("li").hasClass("disabled");if(D){I.preventDefault();}if(!E){var G={actionData:F};this.fire(B,G);}this._hideMenu();}});C.augment(C.ucs.UserMenu,C.EventTarget);},"1.0",{requires:["oop","node","event-custom","ucs-menu-utils"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-usermenu",function(D){var C=D.one("#yUnivHead").all(".yucs-um-activate");C.each(function(F){var E=new D.ucs.UserMenu(F);});});})();YUI.add("ucs-helpmenu",function(E){var B="ucs:helpMenuShow";var A="ucs:helpDebugMenuShow";var D="ucs:helpMenuItemClick";var C="ucs:helpDebugMenuItemClick";E.ucs.HelpMenu=function(F){E.ucs.HelpMenu.superclass.constructor.apply(this,arguments);this._initCustomEvents();};E.extend(E.ucs.HelpMenu,E.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(B,{broadcast:2,emitFacade:true});this.publish(A,{broadcast:2,emitFacade:true});this.publish(D,{broadcast:2,emitFacade:true});this.publish(C,{broadcast:2,emitFacade:true});E.Global.on("ucs:helpMenuItems",this._handleHelpMenuItems,this);E.Global.on("ucs:helpDebugMenuItems",this._handleHelpDebugMenuItems,this);},_showMenu:function(F){if((F.ctrlKey||F.metaKey)&&F.shiftKey){this.fire(A);this._showDebugMenuItems();}else{this.fire(B);this._showMenuItems();}E.ucs.HelpMenu.superclass._showMenu.apply(this,arguments);},_showDebugMenuItems:function(){this.menu.all("li").addClass("hide");this.menu.all("span.separator").setStyle("display","none");this.menu.all("li.debug-item").removeClass("hide");this.menu.all("span.debug-item").setStyle("display","block");},_showMenuItems:function(){this.menu.all("li").removeClass("hide");this.menu.all("span.separator").setStyle("display","block");this.menu.all("li.debug-item").addClass("hide");this.menu.all("span.debug-item").setStyle("display","none");},_handleHelpMenuItems:function(G){if(!G.menuGroups||!G.menuGroups.length){return;}var F=G.menuGroups;if(G.reset){this._clearMenuItem("minty-item");}this._addMenuGroups(F);this._destructAria();this._initAria();},_handleHelpDebugMenuItems:function(G){if(!G.menuGroups||!G.menuGroups.length){return;}var F=G.menuGroups;this._clearMenuItem("debug-item");this._addMenuGroups(F,"top",true);},_handleMenuItemClick:function(K){E.ucs.HelpMenu.superclass._handleMenuItemClick.apply(this,arguments);var J,G,F;J=K.target;J=J.ancestor("a",true);G=J.getAttribute("data-mad");F=J.getAttribute("data-customevt");dis=J.ancestor("li").hasClass("disabled");if(dis){K.halt();this._hideMenu();return;}if(F){K.preventDefault();}if(!dis){var I={actionData:G};var H=J.get("parentNode");if(H.hasClass("debug-item")){this.fire(C,I);}else{this.fire(D,I);}}this._hideMenu();}});E.augment(E.ucs.HelpMenu,E.EventTarget);},"1.0",{requires:["oop","node","event-custom","ucs-menu-utils"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-helpmenu",function(D){var C=D.one("#yUnivHead").all(".yucs-hm-activate");C.each(function(F){var E=new D.ucs.HelpMenu(F);});});})();YUI.add("ucs-utilitymenu",function(C){var B="ucs:utilityMenuShow";var A="ucs:utilityMenuItemClick";C.ucs.UtilityMenu=function(D){C.ucs.UtilityMenu.superclass.constructor.apply(this,arguments);this._initCustomEvents();};C.extend(C.ucs.UtilityMenu,C.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(B,{broadcast:2,emitFacade:true});this.publish(A,{broadcast:2,emitFacade:true});C.Global.on("ucs:utilityMenuItems",this._handleUtilityMenuItems,this);},_showMenu:function(D){C.ucs.UtilityMenu.superclass._showMenu.apply(this,arguments);this.fire(B);},_handleUtilityMenuItems:function(E){if(!E.menuGroups||!E.menuGroups.length){return;}var D=E.menuGroups;if(E.reset){this._clearMenuItem("minty-item");}this._addMenuGroups(D);this._destructAria();this._initAria();},_handleMenuItemClick:function(I){C.ucs.UtilityMenu.superclass._handleMenuItemClick.apply(this,arguments);var H,F,D,E;H=I.target;H=H.ancestor("a",true);F=H.getAttribute("data-mad");D=H.getAttribute("data-customevt");E=H.ancestor("li").hasClass("disabled");if(D){I.preventDefault();}if(!E){var G={actionData:F};this.fire(A,G);}this._hideMenu();}});C.augment(C.ucs.UtilityMenu,C.EventTarget);},"1.0",{requires:["oop","node","event-custom","ucs-menu-utils"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-utilitymenu",function(D){var C=D.one("#yUnivHead").all(".yucs-utm-activate");C.each(function(F){var E=new D.ucs.UtilityMenu(F);});});})();YUI.add("ucs-logodebug",function(A){A.namespace("ucs");A.ucs.LogoDebug=function(B){B.on("click",this._handleClick,this);this.publish("ucs:logoDebug",{broadcast:2,emitFacade:true});};A.ucs.LogoDebug.prototype={_handleClick:function(B){if(B.altKey){B.halt();this.fire("ucs:logoDebug");}}};A.augment(A.ucs.LogoDebug,A.EventTarget);},"1.0",{requires:["node"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-logodebug",function(E){var D=E.one("#yUnivHead").one("#yuhead-bd>.yuhead-logo>h2>a");if(D){var C=new E.ucs.LogoDebug(D);}});})();