if(!window.ucs){window.ucs={};}YUI.add("jsonp-cached",function(B){B.namespace("jsonpcached");if(!YUI.Env.JsonpCached){YUI.Env.JsonpCached={};}if(!YUI.Env.JsonpCached.services){YUI.Env.JsonpCached.services={};}var A=YUI.Env.JsonpCached.services;B.jsonpcached.getData=function(F){var C={};var D=F.url||"";var J=F.serviceName||"service";var M=F.callbackName||"callback";var I=F.broadcast||false;var J=D.replace(/\W/g,"")+"_"+J+"_"+M;var G=F.onSuccess||function(){};C.timeout=F.timeout;var L=(D.indexOf("?")===-1)?"?":"&";var H=D+L+M+"=YUI.Env.JsonpCached."+J;var K=F.args||[];var E=F.context||null;B.jsonpcached.get=YUI.Env.JsonpCached.get||B.Get;if(!A[H]){A[H]={dataAvailable:false,requestInProgress:false,callbacksQueue:[]};}var N=A[H];if(N.dataAvailable){G(N.data);}else{N.callbacksQueue.push(G);if(!N.requestInProgress){YUI.Env.JsonpCached[J]=function(R){N.data=R;N.dataAvailable=true;scbs=N.callbacksQueue;for(var Q=0,O=scbs.length;Q<O;Q++){var P=scbs.pop();P.apply(E,[R].concat(K));}};N.requestInProgress=true;B.jsonpcached.get.script(H,C);}}};},"0.0.1");YUI().use("node","event",function(B){ucs.Search=function(C){this.form=C;this.init();};ucs.Search.prototype={init:function(){this.input=this.form.one("input");this.searchHint=this.input.getAttribute("data-sh");this.id=ucs.SearchInstances;this._initEventListeners();this._initAssist();this.form.removeClass("yucs-activate");},_initEventListeners:function(){this.form.on("submit",this._handleSubmit,this);this.input.on("focus",this._handleInputFocus,this);this.input.on("blur",this._handleInputBlur,this);this.input.on("mouseover",this._highlightInput,this);this.input.on("mouseout",this._deHighlightInput,this);},_initAssist:function(){var C=this.input.getAttribute("data-satype");switch(C){case"mini":this._initMiniAssist(this.input._node);break;case"rich":this._initRichAssist(this.input._node);break;default:break;}},_buildAssistConfig:function(C){var D={searchbox:C,align:true,shim:1};var E=null;if(E=C.getAttribute("data-pubid")){D.pubid=E;}if(E=C.getAttribute("data-gosurl")){D.url=E;}return D;},_initMiniAssist:function(E){var D=this,C={miniassist:{fullpath:"http://a.l.yimg.com/a/lib/s7/miniassist-yui3-201008191550.js",requires:["base","get","node","event-focus","plugin","array-extras"]},"miniassist-skin":{fullpath:"http://a.l.yimg.com/a/lib/s7/miniassist-yui3-201008191550.css",type:"css"},"tray-align-plugin":{fullpath:"http://a.l.yimg.com/a/lib/s7/tray-align-plugin-201008191550.js",requires:["miniassist"]}};if(6===B.UA.ie){C["tray-shim-plugin"]={fullpath:"http://a.l.yimg.com/a/lib/s7/tray-shim-plugin-201008191550.js",requires:["miniassist"]};}YUI({modules:C}).use("miniassist","miniassist-skin","tray-align-plugin","tray-shim-plugin",function(H){var F=new H.Node(E),G=D._buildAssistConfig(F);D.sa=new H.Search.MiniAssist(G);});},_initRichAssist:function(E){if(6===B.UA.ie){this._initMiniAssist(E);return;}var D=this,C={richassist:{fullpath:"http://a.l.yimg.com/a/lib/s7/richassist-yui3-201008191550.js",requires:["base","get","node","event-focus","plugin"]},"tray-align-plugin":{fullpath:"http://a.l.yimg.com/a/lib/s7/tray-align-plugin-201008191550.js",requires:["richassist"]}};if(6===B.UA.ie){C["tray-shim-plugin"]={fullpath:"http://a.l.yimg.com/a/lib/s7/tray-shim-plugin-201008191550.js",requires:["richassist"]};}YUI({modules:C}).use("richassist","tray-align-plugin","tray-shim-plugin",function(H){var F=new H.Node(E),G=D._buildAssistConfig(F);D.sa=new H.Search.RichAssist(G);});},_handleSubmit:function(D){var C=this.input.get("value");C=B.Lang.trim(C);if(C===this.searchHint){this.input.set("value","");}},_handleInputFocus:function(E){var D=this.input,C=D.get("value");C=B.Lang.trim(C);if(C===this.searchHint){D.set("value","");}D.removeClass("yucs-search-hint-color");},_handleInputBlur:function(E){var D=this.input,C=D.get("value");C=B.Lang.trim(C);if(C===""){D.set("value",this.searchHint);D.addClass("yucs-search-hint-color");}},_highlightInput:function(C){this.input.addClass("yucs-search-inphl");},_deHighlightInput:function(C){this.input.removeClass("yucs-search-inphl");}};var A=B.all("form.yucs-search.yucs-activate");A.each(function(F,C,E){var D=new ucs.Search(F);});});YUI().use("node","event","event-mouseenter",function(B){ucs.MenuUtils=function(C){this.menu=C;this.init();};ucs.MenuUtils.prototype={init:function(){this.accessA=this.menu.one("a.yucs-menu-access");this.menu.on("mouseenter",this._showMenu,this);this.menu.on("mouseleave",this._hideMenu,this);this.accessA.on("click",this._accessShowMenu,this);this.menu.removeClass("yucs-activate");},_accessShowMenu:function(D){D.halt();this._showMenu();if(this.menu.one("li").one("a")){this.menu.one("li").one("a").focus();}var C=this;B.on("key",function(){C._hideMenu();C.accessA.focus();},this.menu,"down:27");},_showMenu:function(E){var C=this.menu.one("ul");C.removeClass("hide");this._addIframeShim();var D=this.menu.one("iframe");if(D){D.removeClass("hide");}},_position:function(){var C=this.menu.one("ul");var D=this.menu.get("region");if(!C.hasClass("yucs-menu-right")&&!C.hasClass("yucs-menu-left")){C.setStyle("left",D[0]);}C.setStyle("top",D[1]+13);},_hideMenu:function(E){var C=this.menu.one("ul");C.addClass("hide");var D=this.menu.one("iframe");if(D){D.addClass("hide");}},_addIframeShim:function(){var G=this.menu.one("ul");var E=B.all("select");var D=false;var F=(B.UA.ie<=6);if((E.size()>0)&&F){D=true;}var C=this.menu.one("iframe");if(D&&!C){C=document.createElement("iframe");C.className="yucs-shim";C=G.get("parentNode").insertBefore(C,G);}if(D){C.setStyle("position","absolute");C.setStyle("width",G.getComputedStyle("width"));C.setStyle("height",G.getComputedStyle("height"));C.setStyle("top",G.getY()+"px");if(G.hasClass("yucs-menu-right")){C.setStyle("right",G.getStyle("right"));}else{if(G.hasClass("yucs-menu-left")){C.setStyle("left",G.getStyle("left"));}}C.setStyle("border","0px none");}}};var A=B.all(".yucs-menu.yucs-activate");A.each(function(D){var C=new ucs.MenuUtils(D);});});YUI().use("node","event",function(B){ucs.SkipToSearch=function(C){this.skipLink=C;this.init();};ucs.SkipToSearch.prototype={init:function(){this.skipLink.on("click",this._focusSearch,this);this.skipLink.removeClass("yucs-activate");},_focusSearch:function(C){C.halt();B.one(".yucs-search input").focus();}};var A=B.all(".yucs-skipto-search");A.each(function(D){var C=new ucs.SkipToSearch(D);});});YUI().use("node","event",function(B){ucs.SetHomepage=function(C){this.container=C;this.init();};ucs.SetHomepage.prototype={init:function(){this.anchor=this.container.one("a");if(B.UA.gecko){this.anchor.on("click",this._showPanel,this);}else{if(B.UA.ie>=6){this.anchor.on("click",this._setHpIe,this);}}this.container.removeClass("yucs-activate");},_showPanel:function(E){E.halt();var C=this.container.one("div.yucs-sethp-panel");var F=this.container.one("div.pnt");F.removeClass("hide");C.removeClass("hide");var D=C.one("a.yucs-sethp-panel-close");D.on("click",this._hidePanel,this);this._loadBeacon();},_hidePanel:function(D){D.halt();var C=this.container.one("div.yucs-sethp-panel");var E=this.container.one("div.pnt");E.addClass("hide");C.addClass("hide");},_loadBeacon:function(){var C=B.Node.create('<img width="0" height="0" src="http://us.lrd.yahoo.com/_ylc=X3oDMTFnNzFiMTJoBHRtX2RtZWNoA1RleHQgTGluawR0bV9sbmsDVTExMzA1NTYEdG1fbmV0A1lhaG9vIQ--/SIG=112cgufir/**http%3A/www.yahoo.com/%3Fmkt=3"/>');this.container.insert(C);},_setHpIe:function(D){D.halt();this.anchor.setStyle("behavior","url(#default#homepage)");this.anchor._node.setHomePage(this.container.one("a.yucs-sethp-panel-logo").getAttribute("href"));var C=B.one("#yucs-procframe");if(!C){var C=B.Node.create('<iframe id="yucs-procframe" src="'+encodeURI(this.container.getAttribute("data-detectscript"))+"?hp="+encodeURI(this.container.one("a.yucs-sethp-panel-logo").getAttribute("href"))+"&hpid=1&ygma_rd=&ygma_space=&ygma_space2=&ygma_space3=&ygma_adid=uh-ucs&ygma_prop="+encodeURI(this.container.getAttribute("data-prop"))+'"></iframe>');C.setAttribute("name","yucs-procframe");C.setAttribute("frameborder","0");C.setStyle("width","0");C.setStyle("height","0");}this.container.insert(C);this._loadBeacon();}};var A=B.all(".yucs-sethp.yucs-activate");A.each(function(C){var D=new ucs.SetHomepage(C);});});YUI().use("event",function(B){var A=function(){YUI({gallery:"gallery-2010.08.11-20-39"}).use("node","event","event-mouseenter","jsonp-cached","anim",function(D){ucs.TrendingSearchesAnim=function(E){this.container=E;this.parent=this.container.get("parentNode");this.displayWidth=this.parent.getComputedStyle("width");this.data;this.frCode="&fr=ush-tts&fr2=ps";this.ylt=this.container.getAttribute("data-ylt");this.animEl;this.animA;this.currentAnimItem=0;this.fade;this.init();this.container.removeClass("yucs-activate");};ucs.TrendingSearchesAnim.prototype={init:function(){this._fetchData();},_fetchData:function(){var E="http://query.yahooapis.com/v1/public/yql/uhTrending/cokeTrending3?format=json&_maxage=1800&diagnostics=false&limit=3";if(this.displayWidth>=245){E="http://query.yahooapis.com/v1/public/yql/uhTrending/cokeTrending2?format=json&_maxage=1800&diagnostics=false&limit=3";}D.jsonpcached.getData({url:E,serviceName:"trending_searches",onSuccess:D.bind(this._buildMarkup,this)});},_buildMarkup:function(F){if(!F.query.results||F.query.results=="0"||!F.query.results.links){return;}this.data=F.query.results.links;var E=this.data;this.container.set("innerHTML",'<span class="yucs-trending-anim-label">Trending:&nbsp;</span>'+'<span class="yucs-trending-anim-fade">'+'<a href="'+E[0].href+this.frCode+this.ylt+'" class="">'+this._chopTerm(E[0].text)+"</a></span>");this.animEl=this.container.one(".yucs-trending-anim-fade");this.animA=this.animEl.one("a");this._startAnimation();},_chopTerm:function(E){if(this.displayWidth<245){return E.substring(0,10)+"...";}else{if(E.length>20){return E.substring(0,20)+"...";}else{return E;}}},_startAnimation:function(){this.fade=new D.Anim({node:this.animEl,from:{opacity:1},to:{opacity:0},duration:2});var E=this;var F=function(){E.fade.run();};this.fade.on("end",function(){if(E.animEl.getStyle("opacity")=="0"){E._animateNext();E.fade.set("from",{opacity:0});E.fade.set("to",{opacity:1});E.fade.set("duration",1);F();}else{this.fade.set("from",{opacity:1});this.fade.set("to",{opacity:0});setTimeout(F,5000);}},this);setTimeout(F,3000);this._stopAnimation();},_animateNext:function(){this.currentAnimItem=(this.currentAnimItem==(this.data.length-1))?0:(this.currentAnimItem+1);this.animA.set("innerHTML",this._chopTerm(this.data[this.currentAnimItem].text));this.animA.set("href",this.data[this.currentAnimItem].href+this.frCode+this.ylt);},_stopAnimation:function(){var E=this;this.animA.on("mouseenter",function(){if(E.fade.get("running")){E.fade.pause();E.fade.set("from",{opacity:1});E.fade.set("to",{opacity:0});E.animEl.setStyle("opacity","1");E.animA.on("mouseleave",function(){E.fade.stop();},this);}});}};var C=D.all(".yucs-trending-anim.yucs-activate");C.each(function(E){var F=new ucs.TrendingSearchesAnim(E);});});};B.on("domready",A);});