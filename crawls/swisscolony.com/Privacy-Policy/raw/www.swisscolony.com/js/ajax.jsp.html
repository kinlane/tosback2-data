

var site_base_url = window.location.protocol + "//" + window.location.hostname;
var queryParams = window.location.search;

// sets up the affiliate cookies, promocodes
var ajaxAffiliateRequestURL = site_base_url + "/js/cookie_manager.jsp";
var ajaxAffiliateParams = queryParams.replace("?","");
$.ajax({
    type: "POST",
    url: ajaxAffiliateRequestURL,
    data: ajaxAffiliateParams,
    dataType: "json",
    timeout: 15000,
    success: function(data) {
        $(document).ready(function() {
            var afObject = data.affiliateCookie;
            if (afObject != undefined){
                SetCookie(afObject.affiliateCookieName, afObject.affiliateCookieValue, afObject.affiliateCookieExpiration, afObject.path);
            }
            $("#headerItemCount").html(data.itemsCount);
            $("#ideas").html(data.promoHeader);
        });
        return true;
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
        alert("An error has occurred setting cookies: " + errorThrown);
        return false;
    }
});

//updating welcome message for logged in user.
var ajaxHeaderURL = site_base_url + "/js/header.jsp";
var headerparams = "";
$.ajax({
    type: "POST",
    url: ajaxHeaderURL,
    data: headerparams,
    dataType: "html",
    timeout: 15000,
    success: function(data) {
        $(document).ready(function() {
            $("#welcome").html(data);
        });
        return true;
    },
    error: function() {
        return false;
    }
});
//utag for Tealium
// only call for Akamai pages
var path = window.location.pathname;
if (path == "/" || path.contains("home.jsp") || path.contains(".cat")) {
	path = encodeURIComponent(path);
	var ajaxUtagURL = site_base_url + "/js/utag_call.jsp";
	var utagParams = "path="+path+"&referrer="+encodeURIComponent(document.referrer);
	
	$.ajax({    
	    url: ajaxUtagURL,
	    data: utagParams,    
	    timeout: 15000,
	    dataType: "script",
	    success: function(data) {
	       
	    }
	});
}
