(function(){var c=YAHOO.util;var b=c.Dom;var d=YAHOO.lang;var g=c.Anim;var e=c.CustomEvent;var f=getPackageForName("com.forddirect.ng.util");f.Animation={};var a=function(h){h=h?b.get(h):null;if(h&&h.style.filter){h.style.filter="";}};f.Animation.resetScroll=function(k){var h=40;var j=Math.ceil(b.getDocumentScrollTop()/50);function i(){var l=b.getDocumentScrollLeft();var m=b.getDocumentScrollTop();if(m>0){window.scrollTo(l,Math.min(0,m-j));setTimeout(i,h);}}setTimeout(i,h);};f.Animation.animate=function(i,o){var p=b.get(i);var m=o.attributes||{opacity:{to:0}};var k=o.duration||0.4;var j=o.onCompleteHandler||null;if(p){var l=new g(p,m,k);if(j){var n=o.obj||null;var h=o.override||false;l.subscribe(j,n,h);}l.animate();}};f.Animation.fadeAndHide=function(h){var i=function(){this._prevDisplay=this.style.display;b.setStyle(this,"display","none");};f.Animation.animate(h,{attributes:{opacity:{to:0}},onCompleteHandler:i,obj:h,override:true});};f.Animation.displayAndFade=function(h){var i="";if(h._prevDisplay){i=h._prevDisplay;delete h._prevDisplay;}f.Animation.animate(h,{attributes:{opacity:{to:1}},onCompleteHandler:a,obj:h});};f.Animation.toggleBlocks=function(l,i){var k=b.get(l);if(k){var j=new g(k,{opacity:{to:0}},0.2);var h=new g(k,{opacity:{to:1}},0.2);if(b.getStyle(k,"opacity")!==0){j.onComplete.subscribe(function(){k.style.display="none";if(typeof(i)!=="undefined"){i("fadeOut");}});j.animate();}else{k.style.display="block";h.onComplete.subscribe(function(){a(k);if(typeof(i)!=="undefined"){i("fadeIn");}});h.animate();}}};f.AnimAll=function(l,k,h){log.debug("Instantiating new AnimAll.");var i=false;var j=null;this.useSeconds=true;this.pendingAnimations=0;this.animations=[];this.doComplete=function(){if(!this.isAnimated()){return false;}i=false;var m=new Date()-j;j=null;var n={totalDuration:m};this.onComplete.fire(n);return true;};this.isAnimated=function(){return i;};this.handleComplete=function(){this.pendingAnimations--;if(this.pendingAnimations<=0){this.doComplete();}};this.animate=function(){if(this.isAnimated()){return false;}i=true;j=new Date();var m;for(m=0;m<this.animations.length;m++){var n=this.animations[m];n.animate();}return true;};this.registerAnimation=function(o,n,p,q){var m=new g(o,n,p,q);m.useSeconds=this.useSeconds;m.onComplete.subscribe(this.handleComplete,this,true);this.animations.push(m);this.pendingAnimations=this.animations.length;};this.addConstituents=function(o,q){var p=o.els||[];var m=o.attributes||{};var r=o.method||null;var n;for(n=0;n<p.length;n++){this.registerAnimation(p[n],m,q,r);}};this.init=function(p,o,m){log.debug("Initializing AnimAll.");if(m&&m.useSeconds){this.useSeconds=m.useSeconds;}if(d.isArray(p)){log.debug("Adding constituents from a list of object groups.");var n;for(n=0;n<p.length;n++){this.addConstituents(p[n],o);}}else{log.debug("Adding constituents from a single object group.");this.addConstituents(p,o);}};this.onStart=new e("start",this);this.onComplete=new e("complete",this);this.init(l,k,h);};}());
/************************************************************************
 Copyright (C) Unpublished Versata Software, Inc. All rights reserved.
 Versata Software, Inc., Confidential and Proprietary.

 This software is subject to copyright protection
 under the laws of the United States and other countries.

 Unless otherwise explicitly stated, this software is provided
 by Versata "AS IS".
*************************************************************************/
(function(){var g=getPackageForName("com.forddirect.ng.aspects");var f=YAHOO.Bubbling;var e=YAHOO.util.Dom;var d=YAHOO.util.Event;var a=YAHOO.lang;var h=getPackageForName("com.forddirect.ng.util");var i=getPackageForName("com.forddirect.ng.widgets");var b=getPackageForName("com.forddirect.ng.views");b.BaseView=function(){};var c=b.BaseView.prototype;c.init=function(j){if(i.DisclaimerFlip){this.addWidget("disclaimer-flip",i.DisclaimerFlip);}this.addWidget("get-updates-flip",i.GetUpdatesFlip);this.updateSessionActiveCookie();};c.updateSessionActiveCookie=function(){var j=_instances.cookieManager;var k=j.readCookie("sessionActive");if(!k){var l={path:"/",domain:__params.domain};j.setCookie("sessionActive","true",l);}};c.onLoaderInitComplete=function(){this.handleBrowserHistoryChange();};c.handleBrowserHistoryChange=function(){};a.augmentObject(c,g.Widgetizable);}());
(function(d){d(document).delegate(".payment-estimator-link","click",function(f){f.preventDefault();});function a(h,i){var g=document.getElementsByTagName("head")[0]||document.documentElement;var f=document.createElement("script");f.async=true;f.src=h;var e=false;f.onload=f.onreadystatechange=function(){if(!e&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){e=true;if(i&&typeof i==="function"){i.call(null);}f.onload=f.onreadystatechange=null;if(g&&f.parentNode){g.removeChild(f);}}};g.insertBefore(f,g.firstChild);}var b=function(e,f){if(typeof oMetricsTracker!=="undefined"){oMetricsTracker.paymentEstimator(e,f);}};function c(){var e=__params.peflip;a(e,function(f){d(document).undelegate(".payment-estimator-link","click");d(document).delegate(".payment-estimator-link","click",function(n){var m,k,j,p=d(this),q=false,g={zipcode:ngbs.u.cookie.zip()||null,make:__params.make||null,model:__params.modelName||null,year:__params.year,plantype:td_site.pricing.getPlanTypeForServices()||"MSRP",trim:null,configToken:null,paymentType:null},o=["zipcode","make","model","year"];for(m in g){if(g.hasOwnProperty(m)){k=p.data(m.toLowerCase());if(k){g[m]=k;}}}for(m=0,j=o.length;m<j;m++){if(g[o[m]]===null){return;}}if(window.location.href.indexOf("/payments-bridge/")===-1){if((__params.vehicleLifeCycle&&!(__params.vehicleLifeCycle==="launch"||__params.vehicleLifeCycle==="selldown"))||__params.model==="C-MAX2013"||window.location.href.indexOf("cars/focus/focusst")!==-1){window.location="/payments-bridge/";return;}}if(q){n.preventDefault();n.stopPropagation();fdcc.spc.show(false,g,b);ngbs.legacy(function(i){i.send(document.body,"close-flips");});}else{var h=p.html();n.preventDefault();n.stopPropagation();fdcc.init(function(){fdcc.spc.reset();q=true;fdcc.spc.show(false,g,b);ngbs.legacy(function(i){i.send(document.body,"close-flips");});if(d("tdi_imageDispDiv")){ngbs.legacy(function(i){i.send(d("#tdi_imageDispDiv"),"close");});}});}});});}c();}(jQuery));
