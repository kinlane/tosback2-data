(function(){var d=YAHOO.util;var g=YAHOO.lang;var f=YAHOO.widget;var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var h=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");var e=200;a.Autocomplete=function(m,i,l,j,o){this.el=m;o.maxEntries=o.maxEntries||10;var q=m.parentNode;if(!l){l=h.Dom.getElementByClassName("autocompletions","div",q);}if(!l){l=document.createElement("div");l.className="autocompletions";q.insertBefore(l,null);}var k=new f.AutoComplete(m,l,i,{maxResultsDisplayed:o.maxEntries});var p=h.Dom.getElementByClassName("autocompletions_bottom","div",q);if(!p){p=document.createElement("div");p.className="autocompletions_bottom";q.insertBefore(p,null);}var n=new f.AutoComplete(m,p,i,{maxResultsDisplayed:o.maxEntries});if(o.footerHTML){k.setFooter(o.footerHTML);n.setFooter(o.footerHTML);}if(o.reverse){k.applyLocalFilter=true;k.filterResults=function(u,s,t,r){t.results=t.results.slice(0,k.maxResultsDisplayed).reverse();return t;};}this.siteSearchInputObject=o.siteSearchInputObject;k.siteSearchInputObject=n.siteSearchInputObject=o.siteSearchInputObject;k.generateRequest=n.generateRequest=function(r){return r.replace(new RegExp("[%20]+$"),"")+"*";};k.doBeforeLoadData=n.doBeforeLoadData=function(t,r,s){if(!r.results.length){this.collapseContainer();}return true;};k.formatResult=n.formatResult=function(s,t,r){return h.Text.ellipse(r,e);};k.resultTypeList=n.resultTypeList=false;k.minQueryLength=n.minQueryLength=1;k.autoHighlight=n.autoHighlight=false;k.itemSelectEvent.subscribe(this.onItemSelect);n.itemSelectEvent.subscribe(this.onItemSelect);if(o.reverse){b.on(window,"scroll",function(u,s){var r=c.getViewportHeight()/2;var t=c.getY(m)-c.getDocumentScrollTop();if(t>r){s.autocomplete.getContainerEl().style.visibility="visible";s.autocomplete_bottom.getContainerEl().style.visibility="hidden";}else{s.autocomplete.getContainerEl().style.visibility="hidden";s.autocomplete_bottom.getContainerEl().style.visibility="visible";}},{el:m,autocomplete:k,autocomplete_bottom:n});p.style.visibility="hidden";}else{p.style.display="none";}};a.Autocomplete.prototype={onItemSelect:function(l,k){var i=null;try{i=k[2]["Location[0].DimValueName"];}catch(j){}if(i){_widgets.context.SearchContext.triggerSearch(i,this.siteSearchInputObject);}}};}());
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var f=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");var d=getPackageForName("com.forddirect.ng.context");a.SiteSearchInput=function(i,k){k.reverse=k.reverse||false;k.maxEntries=k.maxEntries||10;k.preventEmptySubmission=(typeof(k.preventEmptySubmission)!=="undefined")?k.preventEmptySubmission:true;this.el=i;this.params=k;this.searchForm=f.Dom.getElementByClassName("site-search-form","form",this.el);this.searchText=f.Dom.getElementByClassName("site-search-input","input",this.el);this.searchButton=f.Dom.getElementByClassName("search-go","input",this.el);var h=(this.params&&this.params.autocomplete)||false;var g=(this.params.autocompleteurl||"");var j=new a.Autocomplete(this.searchText,_widgets.context.SearchContext.getAutocompleteDataSource(g),false,false,{maxEntries:k.maxEntries,reverse:k.reverse,siteSearchInputObject:this,footerHTML:(this.params.footerHTML||"")});this.searchType=(this.params.searchType||"search");_widgets.context.SearchContext.subscribe(this.searchType+"TextChange",this.handleTextChange,this,true);this.onSearchTextBlur();b.on(this.searchText,"focus",this.onSearchTextFocus,this,true);b.on(this.searchText,"blur",this.onSearchTextBlur,this,true);if(k.preventEmptySubmission){b.on(this.searchForm,"submit",this.searchSubmitPrevent,this,true);}b.on(this.searchForm,"submit",this.searchSubmitMetrics,this,true);b.on(this.searchText,"keydown",this.onSearchKeyDown,this,true);b.on(this.searchText,"click",this.onSearchTextClick,this,true);};var e=a.SiteSearchInput.prototype;e.show=function(){c.removeClass(this.el,"inactive");};e.hide=function(){c.addClass(this.el,"inactive");};e.onSearchTextFocus=function(g){if(this.searchText.value===_widgets.context.SearchContext.DEFAULT_SEARCH_STRING_NEW){this.searchText.value="";c.removeClass(this.searchText,"default-text");}else{this.searchText.select();c.removeClass(this.searchText,"default-text");}};e.onSearchTextBlur=function(g){if(this.searchText.value===""||f.Array.contains(_widgets.context.SearchContext.DEFAULT_VALUES,this.searchText.value)){if(this.searchForm.name==="endecaLiveSearchForm"){this.searchText.value=_widgets.context.SearchContext.DEFAULT_SEARCH_STRING_NEW;}else{this.searchText.value=_widgets.context.SearchContext.DEFAULT_SEARCH_STRING;}c.addClass(this.searchText,"default-text");}};e.searchSubmitPrevent=function(g){var h=f.trimString(this.searchText.value);if(h===""||f.Array.contains(_widgets.context.SearchContext.DEFAULT_VALUES,h)){this.searchText.value=_widgets.context.SearchContext.DEFAULT_NOWORD_STRING;this.searchText.focus();this.searchText.select();b.stopEvent(g);}};e.searchSubmitMetrics=function(g){if((this.el.id==="search-endeca-live")&&(this.params.widgetloc)){oMetricsTracker.trackMicroData("liveSearchAskResults");}};e.onSearchKeyDown=function(g){if(g.keyCode===13){g.returnValue=false;g.cancel=true;this.searchButton.click();}};e.handleTextChange=function(g){if(g.newValue){this.searchText.value=g.newValue;}};e.onSearchTextClick=function(g){if(f.Array.contains(_widgets.context.SearchContext.DEFAULT_VALUES,this.searchText.value)){this.searchText.value="";}};}());
var timeout=500;var closetimer=0;var ddmenuitem=0;function mclose(){if(ddmenuitem){ddmenuitem.style.visibility="hidden";}}function mclosetime(){closetimer=window.setTimeout(mclose,timeout);}function mcancelclosetime(){if(closetimer){window.clearTimeout(closetimer);closetimer=null;}}function mopen(a){mcancelclosetime();if(ddmenuitem){ddmenuitem.style.visibility="hidden";}ddmenuitem=document.getElementById(a);ddmenuitem.style.visibility="visible";}document.onclick=mclose;
(function(f,g,h){var b=f.document;var c=f.location;var d=f.console||{log:function(){}};var e=f.NextGen=f.NextGen||{};var a=g(e);e.baseURL=null;e.ready=false;e.events={AUTHENTICATION_COMPLETE_EVENT:"AUTHENTICATION_COMPLETE_EVENT",METRIC_TRACKER_EVENT:"METRIC_TRACKER_EVENT",AUTHENTICATION_STARTED:"AUTHENTICATION_STARTED",AUTHENTICATION_ENDED:"AUTHENTICATION_ENDED",AUTHENTICATION_LOGOUT_EVENT:"AUTHENTICATION_LOGOUT_EVENT",SAVE_STARTED:"SAVE_STARTED",SAVE_ENDED:"SAVE_ENDED"};e.widgets={MY_SAVED_ITEM_WIDGET_NAME:"MSI",UPGRADE_USER:"UPGRADE_USER",SAVE_WIDGET_NAME:"SAVE"};e.SaveAPI=(function(){var i=function(){};i.prototype={init:function(){},getBase:function(){return"/services/user/"+e.AuthenticationWidget.userId+"/SavedItems";},getAccessToken:function(){return e.AuthenticationWidget.accessToken;},getBrandSite:function(){return e.make==="Ford"?"www.ford.com":"www.lincoln.com";},getParameters:function(){return"accessToken="+this.getAccessToken()+"&brandSite="+this.getBrandSite();},makeRequest:function(k,l,m,j){if(typeof j==="undefined"){j=this.defaultErrorHandler;}return g.ajax(k,l).done(m).fail(j);},defaultErrorHandler:function(l,k,j){throw new Error(j);},getSavedItems:function(n,k){var m=+new Date();var j=this.getBase()+".json?"+this.getParameters()+"&t="+m;var l={type:"GET"};return this.makeRequest(j,l,n,k);},deleteSavedItems:function(m,k){var j=this.getBase()+"?"+this.getParameters();var l={type:"DELETE"};return this.makeRequest(j,l,m,k);},createConfigVehicle:function(l,n,k){var j=this.getBase()+"/ConfigVehicle/?"+this.getParameters();var m={type:"POST",data:l};return this.makeRequest(j,m,n,k);},deleteConfigVehicle:function(n,m,k){var j=this.getBase()+"/ConfigVehicle/"+n+"?"+this.getParameters();var l={type:"DELETE"};return this.makeRequest(j,l,m,k);},createInventoryVehicle:function(l,n,k){var j=this.getBase()+"/InventoryVehicle/?"+this.getParameters();var m={type:"POST",data:l};return this.makeRequest(j,m,n,k);},deleteInventoryVehicle:function(n,m,k){var j=this.getBase()+"/InventoryVehicle/"+n+"?"+this.getParameters();var l={type:"DELETE"};return this.makeRequest(j,l,m,k);},createCPOVehicle:function(l,n,k){var j=this.getBase()+"/CPOVehicle/?"+this.getParameters();var m={type:"POST",data:l};return this.makeRequest(j,m,n,k);},deleteCPOVehicle:function(n,m,k){var j=this.getBase()+"/CPOVehicle/"+n+"?"+this.getParameters();var l={type:"DELETE"};return this.makeRequest(j,l,m,k);},createBrandContent:function(l,n,k){var j=this.getBase()+"/BrandContent/?"+this.getParameters();var m={type:"POST",data:l};return this.makeRequest(j,m,n,k);},deleteBrandContent:function(n,m,k){var j=this.getBase()+"/BrandContent/"+n+"?"+this.getParameters();var l={type:"DELETE"};return this.makeRequest(j,l,m,k);},deleteItem:function(m,n,l,k){var j;switch(m){case"image":case"video":case"technology":j="deleteBrandContent";break;case"cpo":j="deleteCPOVehicle";break;case"inventory_bp":case"inventory_si":j="deleteInventoryVehicle";break;case"config":j="deleteConfigVehicle";break;}return i[j].call(i,n,l,k);}};i=new i();return i;}());e.AuthenticationWidget=(function(){var l;var j;var i;var k;var m={FACEBOOK:"/services/authentication/oauth/requesttoken/facebook?redirectUrl=",TWITTER:"/services/authentication/oauth/requesttoken/twitter?redirectUrl=",GOOGLE:"/services/authentication/openid/discovery/google?redirectUrl=",YAHOO:"/services/authentication/openid/discovery/yahoo?redirectUrl=",ANONYMOUS:"/services/authentication/aauth/requesttoken/anonymous?redirectUrl="};var n=function(){this.userId=null;this.accessToken=null;this.provider=null;this.planType=null;this.authenticationWindow=null;this.authenticationTimer=null;this.contentAfterIcon=null;this.decisionButtonDiv=null;this.mainContentDiv=null;this.isUpgraded=false;};n.prototype={init:function(){l=e.SavePopupWidget;j=e.SaveWidget;i=new f.ThirdPartyAuthenticator();k=new f.AXZAuthenticator();n.contentAfterIcon=g("#FNASW_content_after_icon");n.decisionButtonDiv=g("#save_widget_decision_div");n.mainContentDiv=g("#main_content_div");n.bindHandlers();n.setProperties();},bindHandlers:function(){g(b).delegate("a[rel='ng_auth_btn_']","click",function(){var o=g(this).data("provider");n.authenticateWithNextGenService(o);});},getFallbackUrl:function(){return e.baseURL+"/save/fallback";},getProviderUrl:function(p){var o=e.baseURL+m[p];if(o.indexOf("redirectUrl")>-1){o=o+n.getFallbackUrl();}return o;},startPollingForUserID:function(){n.authenticationTimer=f.setTimeout(function(){var p=i.getUserId();var q=i.getProvider()||"ANONYMOUS";var o=j.saveData?j.saveData.model:"";if(n.callerWidget===e.widgets.UPGRADE_USER){if(p&&q!=="ANONYMOUS"){a.trigger(e.events.METRIC_TRACKER_EVENT,[e.events.AUTHENTICATION_ENDED,n.provider,null,o]);n.getAuthenticationStatus(true);return;}}else{if(p){a.trigger(e.events.METRIC_TRACKER_EVENT,[e.events.AUTHENTICATION_ENDED,n.provider,null,o]);n.getAuthenticationStatus(true);return;}}n.startPollingForUserID();},250);},stopPollingForUserID:function(){f.clearTimeout(n.authenticationTimer);},authenticateWithNextGenService:function(r){var o=n.getProviderUrl(r);var q="ngAuthWindow";var p="status=1,resizable=1,scrollbars=1,height=500,width=800";if(o){n.authenticationWindow=f.open(o,q,p);n.startPollingForUserID();}},setProperties:function(){n.userId=i.getUserId();n.accessToken=i.getAccessToken();n.provider=i.getProvider()||"ANONYMOUS";n.planType=k.getPlanTypeForDisplay();if(n.userId){n.setRegisteredCookie();}},logoutUser:function(){i.logoutUser();n.setProperties();a.trigger(e.events.AUTHENTICATION_LOGOUT_EVENT);},setRegisteredCookie:function(){var o=1000*60*60*24*365;h.u.cookie.set("save-registered",1,{domain:"."+e.make.toLowerCase()+".com",expires:o,path:"/"});},validateUser:function(p){n.setProperties();n.callerWidget=p;if(n.isUpgraded){n.updateAuthScreen(false);}var o=j.saveData?j.saveData.model:"";if(n.userId){n.setRegisteredCookie();a.trigger(e.events.AUTHENTICATION_COMPLETE_EVENT,[true,n.userId,n.accessToken,n.provider,n.callerWidget]);}else{l.open("Sign In","#FNASW_authentication_content");a.trigger(e.events.METRIC_TRACKER_EVENT,[e.events.AUTHENTICATION_STARTED,null,null,o]);}},upgradeUser:function(){n.updateAuthScreen(true);n.callerWidget=e.widgets.UPGRADE_USER;l.open("Sign In","#FNASW_authentication_content");},updateAuthScreen:function(o){if(o){n.contentAfterIcon.hide();n.decisionButtonDiv.hide();n.mainContentDiv.removeClass("FNASW_content");n.mainContentDiv.addClass("FNASW_content_small");n.isUpgraded=true;}else{n.contentAfterIcon.show();n.decisionButtonDiv.show();n.mainContentDiv.addClass("FNASW_content");n.mainContentDiv.removeClass("FNASW_content_small");n.isUpgraded=false;}},getAuthenticationStatus:function(o){n.setProperties();n.stopPollingForUserID();if(o){l.close();a.trigger(e.events.AUTHENTICATION_COMPLETE_EVENT,[true,n.userId,n.accessToken,n.provider,n.callerWidget]);}}};n=new n();return n;}());e.SavePopupWidget=(function(){var i=function(){this.visible=false;this.$container=null;this.$background=null;this.$screens=null;this.$headingTitle=null;};i.prototype={init:function(){i.$container=g("#nextgen_auth_save_widget_container");i.$background=g("#nextgen_auth_save_container_background");i.$screens=i.$container.find(".changable_content");i.$headingTitle=g("#FNASW_window_title");i.bindHandlers();},bindHandlers:function(){g(b).delegate("#ng_popup_close_btn","click",i.close);g(b).delegate("#nextgen_auth_save_container_background","click",i.close);},setWindowHeading:function(j){i.$headingTitle.html(j);},hideAllWindows:function(){i.$screens.hide();},open:function(j,k){i.setWindowHeading(j);i.hideAllWindows();i.$container.find(k).show();if(!i.visible){i.$background.show();i.$container.show();i.visible=true;}},close:function(){if(i.visible){i.$background.hide();i.$container.hide();i.visible=false;}}};i=new i();return i;}());e.FallbackWidget=(function(){var i=function(){};i.prototype={init:function(){f.resizeTo(800,500);i.bindHandlers();},bindHandlers:function(){g(b).delegate("#fallback_ok_btn","click",i.closeWindow);},closeWindow:function(){f.open("","_self","");f.close();}};i=new i();return i;}());e.SaveWidget=(function(){var u;var l;var j;var m;var o;var q=/<sup\\?>(\d+|[\u2020\u2021]+|&dagger;)<\/sup\\?>/gi;var v=/<\/?\w+\s*\/?\\?>/gi;var i=function(y){y=y.replace(q,"");y=y.replace(v,"");return y;};var t=function(y){y=y.replace(/\\/gi,"");return y;};var w="%E2%80%A6";var k=w.length;var r=200-k;var p=200-k;var x=function(z,y){var A;z=z.replace(/[^a-z0-9\s,\.\|]/gi,function(B){return encodeURIComponent(B);});if(z.length>y){z=z.slice(0,y);A=z.lastIndexOf(" ");if(A>-1){z=z.slice(0,A);}z=z+w;}return z;};var n=function(){this.saveData=null;};n.prototype={init:function(){u=e.AuthenticationWidget;l=e.SaveAPI;j=e.SavePopupWidget;m=e.DataCollectionWidget;o=new f.AXZAuthenticator();n.planType=o.getPlanTypeForServices();n.bindHandlers();},bindHandlers:function(){a.bind(e.events.AUTHENTICATION_COMPLETE_EVENT,n.resumeSave);g(b).delegate("#submit_btn","click",n.validate);g(b).delegate("#continue_btn","click",j.close);g(b).delegate("#goto_save_btn","click",n.gotoMySavedItem);g(b).delegate("#cancel_btn","click",j.close);},validate:function(){var y=g("#FNASW_ng_save_title").val();if(y){n.saveData.title=y.replace(/</gi,"").replace(/>/gi,"");n.selectServiceAndCall(n.saveData);}else{f.alert("Title field cannot be empty");}},gotoMySavedItem:function(){c.href=e.baseURL+"/mysaveditems";},loadErrorScreen:function(){j.open("Error","#FNASW_save_auth_error_content");},loadMaxItemsReachedErrorScreen:function(){m.clickMetrics("max-saved-items");j.open("Maximum Saved Items","#FNASW_save_max_item_error_content");},loadSuccessScreen:function(){j.open("Successful Save","#FNASW_save_success_content");},loadSaveScreen:function(){if(n.saveData){a.trigger(e.events.METRIC_TRACKER_EVENT,[e.events.SAVE_STARTED,null,null,n.saveData.model]);g("#FNASW_ng_save_title").val(n.saveData.title);g("#ng_save_item_image").attr("src",n.saveData.thumbnailUrl);j.open("Save an Item","#FNASW_save_content");}},selectServiceAndCall:function(A){var C=A.itemType;var D;switch(C){case"config":D="createConfigVehicle";break;case"inventory_bp":case"inventory_si":D="createInventoryVehicle";break;case"cpo":D="createCPOVehicle";break;case"image":case"video":case"technology":D="createBrandContent";break;default:break;}if(!D){n.loadErrorScreen();return;}A=g.extend(true,{},A);var z=["configToken","description","title"];g.each(A,function(E,F){if(g.inArray(E,z)===-1){A[E]=encodeURIComponent(F);}});A.title=x(A.title,r);var B=function(I,E,H){var G=H.status;var F=n.saveData?n.saveData.model:"";n.loadSuccessScreen();a.trigger(e.events.METRIC_TRACKER_EVENT,[e.events.SAVE_ENDED,null,C,F]);};var y=function(H,G,E){var F=H.status;if(F===403){n.loadMaxItemsReachedErrorScreen();}else{n.loadErrorScreen();}};l[D](A,B,y);},loadSaveWidget:function(z){z.title=t(i(z.title));z.description=t(i(z.description));z.description=x(z.title+"||"+z.description,p);var y=h.u.cookie&&h.u.cookie.zip&&h.u.cookie.zip();z.postalCode=y||"00000";if(n.planType){z.planType=n.planType;}n.saveData=z;u.validateUser(e.widgets.SAVE_WIDGET_NAME);},resumeSave:function(C,y,B,A,D,z){if(y&&z===e.widgets.SAVE_WIDGET_NAME){n.loadSaveScreen();}}};n=new n();return n;}());e.DataCollectionWidget=(function(){var k;var i;var j=function(){};j.prototype={init:function(){k=e.AuthenticationWidget;i=e.SaveWidget;j.bindHandlers();j.show();j.configMetrics();},show:function(){g(b.body).addClass("ng_save");},bindHandlers:function(){a.bind(e.events.METRIC_TRACKER_EVENT,j.metric_tracker_handler);a.bind(e.events.AUTHENTICATION_COMPLETE_EVENT,j.authenticationCompleteHandler);g(b).delegate("a[rel=ng_save_bookmark]","click",j.formObjectAndInvokeSave);},formObjectAndInvokeSave:function(m){m.preventDefault();var l=g(this).readDataAttr();i.loadSaveWidget(l);},authenticationCompleteHandler:function(p,l,o,n,q,m){if(l&&m===e.widgets.MY_SAVED_ITEM_WIDGET_NAME){d.log(e.widgets.MY_SAVED_ITEM_WIDGET_NAME);}else{if(l&&m===e.widgets.UPGRADE_USER){d.log(e.widgets.UPGRADE_USER);}}},metric_tracker_handler:function(n,p,t,r,m){if(r==="config"){r="bp";}if(typeof m==="undefined"){m="";}var o={itemType:r,channel:s.channel,hier1:s.hier1,evar11:s.eVar11,evar16:m};switch(p){case e.events.SAVE_STARTED:j.clickMetrics("saveStarted",o);break;case e.events.SAVE_ENDED:j.clickMetrics("saveEnded",o);break;case e.events.AUTHENTICATION_STARTED:j.clickMetrics("authStarted",o);break;case e.events.AUTHENTICATION_ENDED:h.metrics.constructor();var l=new ThirdPartyAuthenticator();var q=l.getProfileStatus();if(q==="1"){j.clickMetrics("authComplete",o);}else{j.clickMetrics("regComplete",o);}break;default:break;}},configMetrics:function(){var r;var n=e.make.toLowerCase();if(n==="ford"){r="fv: myfolder: ";}else{r="ln: myfolder: ";}var o=function(t){return t.itemType;};var q=function(t){return t.channel;};var l=function(t){return t.hier1;};var p=function(t){return t.evar11;};var m=function(t){return t.evar16;};h.metrics.config({click:{saveStarted:{pe:"o",prop5:"myfolder: start",pev2:r+"save item: start",channel:q,hier1:l,prop11:p,eVar11:p,eVar16:m,prop16:m},saveEnded:{pe:"o",prop5:"myfolder: complete",pev2:r+"save item: complete",channel:q,hier1:l,prop11:p,eVar11:p,eVar16:m,prop16:m,prop49:o,prop48:"event: save content",eVar49:o,eVar48:"event: save content",events:["event43"]},authStarted:{pe:"o",pev2:r+"login: start",channel:q,hier1:l,prop11:p,eVar11:p,eVar16:m,prop16:m,prop42:"logged out",eVar42:"logged out"},regComplete:{pe:"o",pev2:r+"login: complete",channel:q,hier1:l,prop11:p,eVar11:p,eVar16:m,prop16:m,events:["event14","event47"]},authComplete:{pe:"o",pev2:r+"login: complete",channel:q,hier1:l,prop11:p,eVar11:p,eVar16:m,prop16:m,events:["event47"]},"max-saved-items":{pe:"o",pev2:r+"saves exceeded",channel:q,hier1:l,prop11:p,eVar11:p,eVar16:m,prop16:m}}});},clickMetrics:function(m,l){h.metrics.click(m,l);},pageMetrics:function(l,m){h.metrics.page(l,m);}};j=new j();return j;}());e.init=function(i){if(e.ready){return;}e.ready=true;e.baseURL=i.baseURL;e.make=i.make;e.SaveAPI.init();e.AuthenticationWidget.init();e.SavePopupWidget.init();e.SaveWidget.init();e.DataCollectionWidget.init();};g(b).ready(function(){var l=null;var k;var j;var i=f.setInterval(function(){l=g("#nextgen_auth_save_widget_container");if(l.length){f.clearInterval(i);k=l.data("baseUrl");j=l.data("make");e.init({baseURL:k,make:j});}},100);});if(g("#fallback_ok_btn").length){e.FallbackWidget.init();}}(window,jQuery,ngbs));
YAHOO.util.Event.onDOMReady(function(){_instances.bsLoader.initCompleteEvent.subscribe(function(){var m=201,k=1063,r=false,l=document,d=l.getElementById("_bapw-link"),o=(l.location.protocol==="https:"),n=(o?"https":"http")+"://",p=n+(o?"a248.e.akamai.net/betterad.download.akamai.com/91609":"cdn.betrad.com")+"/pub/";function q(a){var b=new Image();b.src=n+"l.betrad.com/pub/p.gif?pid="+m+"&ocid="+k+"&i"+a+"=1&r="+Math.random();}d.onmouseover=function(){if(/#$/.test(d.href)){d.href="http://info.evidon.com/pub_info/"+m+"?v=1";}};d.onclick=function(){var a=window._bap_p_overrides;function b(i,f){var h=l.getElementsByTagName("head")[0]||l.documentElement,c=r,e=l.createElement("script");function g(){e.onload=e.onreadystatechange=null;h.removeChild(e);f();}e.src=i;e.onreadystatechange=function(){if(!c&&(this.readyState==="loaded"||this.readyState==="complete")){c=true;g();}};e.onload=g;h.insertBefore(e,h.firstChild);}if(a&&a.hasOwnProperty(m)){if(a[m].new_window){q("c");return true;}}this.onclick="return"+r;b(n+"ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js",function(){b(p+"pub2.js",function(){window.BAPW.i(d,{pid:m,ocid:k});});});return r;};q("i");});});
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var d=YAHOO.widget;var e=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");a.BSPanel=function(h,i){var o="roundedShadow";var j;this.el=h;var f={visible:false,constraintoviewport:true,draggable:false,underlay:"none",flip:"default"};if(i){for(j in i){if(i.hasOwnProperty(j)){f[j]=i[j];}}}this.CALLING_FLIP=f.flip;f.close=false;a.BSPanel.superclass.constructor.call(this,h,f);this.render();var q=c.getElementsByClassName("container-close",null,this.el);if(q&&q.length>0){var g=q[0];b.on(g,"click",this.hide,null,this);}if(f.underlay===o){var l=["tl quoin","tr quoin","shadow-content","bl quoin","br quoin"];var n=document.createElement("div");c.addClass(n,"rounded-shadow");this.el.appendChild(n);for(j in l){if(l.hasOwnProperty(j)){var m=document.createElement("div");c.addClass(m,l[j]);n.appendChild(m);}}}};YAHOO.extend(a.BSPanel,d.Panel,{init:function(g,f){a.BSPanel.superclass.init.apply(this,arguments);this.initAttributes(g,f);},initAttributes:function(g,f){},setPanelHeader:function(h,g){var f=c.getElementsByClassName("headerText",null,this.el);if(f&&f.length>0){f[0].innerHTML=h;if(g){var i="<div class='subtitle'>"+g+"</div>";f[0].innerHTML=h+i;}}},addScroller:function(h,g,f){var j=c.get(h).innerHTML;var i=a.createScrollPane(h,h,"bs-Scroller",g,f,false);i.getContainer().innerHTML=j;i.resize([{}]);return i;},hide:function(){a.BSPanel.superclass.hide.apply(this,arguments);if("part-details"===this.CALLING_FLIP){e.removeModalBackground("view-bd","panel");}},show:function(){a.BSPanel.superclass.show.apply(this,arguments);if("part-details"===this.CALLING_FLIP){e.addModalBackground("view-bd","panel");}},alignTo:function(g,f){if(f&&f.elementAlign&&f.contextAlign){this.cfg.setProperty("context",[g,f.elementAlign,f.contextAlign]);this.align(f.elementAlign,f.contextAlign);}else{this.alignTo(g,a.BSPanel.ALIGN_BOTTOM_LEFT);}},update:function(){}});a.BSPanel.ALIGN_TOP_LEFT={elementAlign:"tl",contextAlign:"tl"};a.BSPanel.ALIGN_TOP_RIGHT={elementAlign:"tl",contextAlign:"tr"};a.BSPanel.ALIGN_BOTTOM_LEFT={elementAlign:"bl",contextAlign:"bl"};a.BSPanel.ALIGN_BOTTOM_RIGHT={elementAlign:"bl",contextAlign:"br"};}());
(function(){var c="com.forddirect.ng.widgets";var a=getPackageForName(c);var d=getPackageForName("com.forddirect.ng.util");var b=YAHOO.util.Dom;a.PromotionalArea=function(g,h){var j=b.getElementsByClassName("ng-widget promotional-tile","div",g);var f;for(f=0;f<j.length;f++){var e=new a.PromotionalTile(j[f],h);}};}());
(function(){var c="com.forddirect.ng.widgets";var a=getPackageForName(c);var d=getPackageForName("com.forddirect.ng.util");var b=YAHOO.util.Dom;a.PromotionalTile=function(h,i){var f=b.getElementsByClassName("promo-content","div",h);if(f&&f.length>0){var g=f[0];var e=g.getAttribute("dynamic");if(e){this.loadDynamicContent(h,g,i);}}};a.PromotionalTile.prototype.loadDynamicContent=function(g,f,i){var l=g.id;var k=f.id;var h=b.get("loading:"+k);if(h){d.Navigation.swapBlocks(k,h);}var e=f.getAttribute("promo-id");var j="?widget=promotional-tile&promo-area="+i+"&promo-id="+e;d.Navigation.swapWith(l,j);};}());
(function(a){ngbs.widget("group-flip",{constructor:function(c,e){var d=a,b=this;this.currently_open=null;this.close_callback=function(){};d(".close",e).click(function(){c.send(this,"close");});c.listen(e,"open",function(g,f){b.open(d,c,f,this);});c.listen(e,"close",function(){b.close(d,c,this);});c.listen(document.body,"close-flips",function(){b.close(d,c,e);});},open:function(d,e,c,b){this.currently_open=b;d(b).addClass("active");if(c){d(b).data({close_callback:c.onclose||function(){}});if(c.scrollTop){d(b).css("top",c.scrollTop);}else{d(b).css("top","");if(c.title&&c.url){e.send(d("a.share",b),"update",c);}}if(c.screen){this.$screen=a('<div class="screen" />').appendTo("#view-container");}}else{d(b).data({close_callback:function(){}});}},close:function(c,d,b){c(b).removeClass("active");if(c(b).data().close_callback){c(b).data().close_callback();}if(this.$screen&&this.$screen.length){this.$screen.remove();}}});}(jQuery));
ngbs.widget("disclaimers",function(b,c){var a,d;if(c.length){if(c.length>1){a=c.filter(".ng-widget.disclaimers");}else{a=c.first();}d=document.getElementById("disclaimer-flip");a.find("#view-disclaimers").click(function(){b.send(d,"open");});b.listen(c,"disclaimer-scroll",function(i,h){var k,g,f=jQuery(d);jQuery("html,body").scrollTop(f.offset().top);if(h.footnote){k="disclaimer"+h.footnote;}else{if(h.id){k=h.id;}}b.send(d,"open");g=jQuery("#"+k);if(g.length){var j=f.find("dl");j.scrollTop(g[0].offsetTop-j[0].offsetTop);}});}});
(function(){var e=YAHOO.lang,d=YAHOO.Bubbling,b=getPackageForName("com.forddirect.ng.widgets"),c=_instances,a=_widgets,f={autoplay:1,data:[{id:1,thumb:"",video:"",image:"",duration:"",description:""}]};f.current=f.data[0].id;b.VideoPlayer=function(h,j){var g={},i=function(n,o){var m=0,l=null,p=null;this.videoMetadata=n;if(n.data&&n.data.length){for(m=0;m<n.data.length;m+=1){l=n.data[m];p=l.id;if(typeof p!=="number"){l.id=m+1;g[p]=l.id;}}if(n.current){this.setCurrentVideo(n.current);}else{this.setCurrentVideo(o||n.data[0].id);}}},k=function(){var o=this.videoMetadata,l=null,m=0;try{l=c.flashFramework.thisMovie(this.widgetId);if(l&&l.eventHandler){l.eventHandler("update",o,this.jsInstanceName+".onUpdateComplete");}}catch(n){}};j=j||{};this.el=h;this.status="";this.initCompleted=false;this.jsInstanceName=j.jsInstanceName;this.widgetId=j.widgetID||"VideoPlayer";this.bgColor=j.bgColor;this.width=j.width||1200;this.height=j.height||540;this.swfPath=j.swfPath;this.wmode=j.wmode||"transparent";this.videoStarted=false;this.emit=function(n,p,q){var m=c.flashFramework.thisMovie(this.widgetId),l=false;if(m&&m.eventHandler){try{m.eventHandler(n,p,q?(this.jsInstanceName+"."+q):null);l=true;}catch(o){}}return l;};this.getFlashID=function(m){var l=g[m]||m;return l;};this.setCurrentVideo=function(m){var l=this.getFlashID(m);if(typeof l!=="number"){throw"Cannot set the current video ID to a value that was not included in the constructor to this video player. '"+m+"' is not recognized.";}this.videoMetadata.current=l;};i.apply(this,[j.videoMetadata||f,j.initialVideoID]);this.getMetadata=function(){return this.videoMetadata;};this.resetRelaunchTrigger=function(){if(this.relaunchTrigger){clearTimeout(this.relaunchTrigger);this.relaunchTrigger=null;}};this.onInitComplete=function(){this.initCompleted=true;k.call(this);};this.onUpdateComplete=function(){this.resetRelaunchTrigger();if(this.videoMetadata.autoplay){this.videoStarted=true;}};this.onUnloadComplete=function(){if(this.el){this.el.innerHTML="";}};this.onVideoStart=function(){this.videoStarted=true;};this.onVideoEnd=function(){a.context.SelectedContext.fireEvent("fullVideoViewed",{type:"fullVideoViewed",id:this.widgetId});this.videoStarted=false;};this.onVideoLoaded=function(){};this.onContextChange=function(p){var n=p[0],l=p[1],m=null,o=null;if(n&&typeof l!=="undefined"){m=l.p1;o=l.p2;if(m&&o){a.context.SelectedContext.set(m,o);}}};this.onFlashEvent=function(n){var m=n[0],l=n[1];};this.onFlashAction=function(n){var m=n[0],l=n[1];d.triggerDefaultAction(m,l);};};e.augmentProto(b.VideoPlayer,{prototype:{init:function(g){if(!this.initCompleted){if(!g){g="";}c.flashFramework.loadFlashMovie(this.el,this.widgetId,this.swfPath,this.width,this.height,this.jsInstanceName,this.bgColor,this.wmode,g);}},launchVideo:function(g){if(this.videoStarted){this.stopVideo();}this.setCurrentVideo(g);this.emit("launchVideo",{id:this.videoMetadata.current},"onUpdateComplete");},stopVideo:function(){if(this.videoStarted){this.videoStarted=false;var h={};h.dummy="";try{c.flashFramework.thisMovie(this.widgetId).eventHandler("stopVideo",h,null);}catch(g){}}},unload:function(){try{this.stopVideo();}catch(g){this.onUnloadComplete(true);}}}});}());
(function(){var a=_widgets;td_site.page.videoPlayer={v:{groups:{},curOn:false,playing:{},flashVersion:9,reserved:{},dateHack:0,playerOrder:["flash","html","noplayer"],htmlCodecs:{m4v:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'}},u:{getAry:function(b){return a.context.SelectedContext.get(b);},convertAll:function(f,b){var d={},c="";b=b||a.context.SelectedContext.get(f);for(c in b){if(b.hasOwnProperty(c)){d[c]=this.convertOne(f,b[c]);}}return d;},convertOne:function(b,g){var i,d,f=g.flip?g.flip.media:g,j=g.carsid,c=null,h=null,e=null;switch(b){case"model.highlights":if(typeof j!=="undefined"){i=a.context.SelectedContext.get("model.videos");d=a.context.SiteContext.get("url.media");c=i[j];if(f.videos){h=d+c.posterboardimage;e=d+c.lowbandhiresflash;return{img:h,alt:f.images.image_1.alttag,video:e,duration:c.length,posterFrame:f.videos.video_1.posterFrame};}}else{if(f.videos){return{img:f.images.image_1.size_thumb.source,alt:f.images.image_1.alttag,video:f.videos.video_1.defaultSize.source,duration:f.videos.video_1.duration,posterFrame:f.videos.video_1.posterFrame};}}return false;case"innovationTopic.highlights":if(f.videos){return{img:f.images.image_1.size_thumb.source,alt:f.images.image_1.alttag,video:f.videos.video_1.defaultSize.source,duration:f.videos.video_1.duration,posterFrame:f.videos.video_1.posterFrame};}return false;default:return{img:f.image,alt:"",video:f.video,duration:f.duration,posterFrame:f.posterFrame};}},metrics:function(j,c,b,f,g,k){var m=[".flv",".m4v"],n=c.toLowerCase(),o,h,d;for(h=0,d=m.length;h<d;h=h+1){o=m[h];if(n.indexOf(o,c.length-o.length)!==-1){c=c.substr(0,c.length-o.length);break;}}switch(j.type){case"seeking":s.Media.stop(c,b);break;case"pause":s.Media.stop(c,b);break;case"seeked":if(k.playing){s.Media.play(c,b);}break;case"play":case"videostart":if(!k.playing){s.Media.autoTrack=false;s.Media.trackMilestones="25,50,75,100";s.Media.playerName=g;s.Media.trackWhilePlaying=true;s.Media.segmentByMilestones=true;s.Media.trackUsingContextData=true;s.Media.contextDataMapping={"a.media.name":"eVar56,prop56","a.media.segment":"eVar55","a.media.timePlayed":"event61","a.media.view":"event56","a.media.segmentView":"event62","a.media.milestones":{25:"event58",50:"event59",75:"event57",100:"event60"}};s.Media.open(c,f,g);k.playing=true;}s.Media.play(c,b);break;case"destroyVideo":case"ended":if(k.playing){s.Media.stop(c,b);s.Media.close(c);k.playing=false;}break;}},inish:function(b,c){this.par=c;this.name=b;}},funs:{},play:function(b){this.v.groups[b].play();},testEnabled:function(){},addNew:function(l,b,k,f,c){var g,h,d,j;b=b||this.v.playerOrder;this.v.canPlayFlash=false;if(this.v.groups[l]){this.v.groups[l].destroyVideo();}for(g=0,h=b.length;g<h;g+=1){d=b[g];if(this.funs[d]){this.v.groups[l]=new this.funs[d](f,this,this.site,l,k);if(c){this.v.groups[l].callBack=c;}if(this.v.groups[l].enabled()){break;}delete this.funs[d];this.v.groups[l]=false;}}if(!this.v.groups[l]){for(j in this.funs){if(this.funs.hasOwnProperty(j)){this.v.groups[l]=new this.funs[j](f,this,this.site,l,k);if(this.v.groups[l].enabled()){break;}this.v.groups[l]=false;}}}this.setConfigFromObject(l,{imageurl:null,videourl:null});return this.v.groups[l];},extendExisting:function(c,b,d){this.funs[c]=d||function(){b.apply(this,arguments);};if(typeof b==="string"){b=this.funs[b];this.funs[c].prototype=new b(false,this,this.site,"",{divHolder:"x"});}else{this.funs[c].prototype=b;}this.funs[c].prototype.superclass=b;return this.funs[c].prototype;},setHolder:function(b,c){this.v.groups[b].setHolder(c);},loadVideo:function(b,d,c){if(c){if(c-this.v.dateHack<500){return;}this.v.dateHack=c;}if(this.v.groups[b].playing){this.endVideo(b);}this.v.groups[b].loadVideo(d);},hideVideo:function(b){this.v.groups[b].hideVideo();},endVideo:function(b){this.v.groups[b].endVideo();},stopVideo:function(b,c){if(typeof b==="string"){b=this.v.groups[b];}if(b&&b.stopVideo){if(this.v.curOn&&b===this.v.curOn){this.v.curOn=false;}b.stopVideo(c);}},destroyVideo:function(c){var b=this.v.groups[c];if(b&&b.destroyVideo){if(this.v.curOn&&b===this.v.curOn){this.v.curOn=false;}b.destroyVideo();}},playerReady:function(b){if(this.v.groups[b].playerReady){this.v.groups[b].playerReady(b);}},addPlayList:function(b,c){if(this.v.groups[b].addPlayList){this.v.groups[b].addPlayList(c);}},create:function(b){if(typeof b==="string"){b=this.v.groups[b];}if(!this.v.curOn||(this.v.curOn&&this.v.curOn!==b)){if((b.bOnlyOne&&this.v.curOn)||(this.v.curOn&&this.v.curOn.bOnlyOne)){this.stopVideo(this.v.curOn,true);}this.v.curOn=b;b.create();}},cueVideo:function(b,c){if(this.v.groups[b].cueVideo!==null){return this.v.groups[b].cueVideo(c);}return false;},metricEvent:function(c,d,b){b="video"+b;if(d!==false){td_site.fireThoseMetrics.yo(0,0,"",b,0,1,{videoState:{j:b,k:d}});}},hasGroup:function(b){return this.v.groups[b];},check:function(f,g,c){var b=td_site.u.clone(c),d;for(d in g){if(g.hasOwnProperty(d)&&!b[d]){if(g[d]===null){f.er.push("Missing value: "+d);}else{b[d]=g[d];}}}return{log:f,params:b};},onInitComplete:function(b){},setConfig:function(b,c,d){this.v.groups[b].setConfig(c,d);},setConfigFromObject:function(b,c){this.v.groups[b].setConfigFromObject(c);},getConfig:function(b,c){return this.v.groups[b].getConfig(c);},controls:function(b,c){if(this.v.groups[b]){this.v.groups[b].controls(c);}},dispError:function(b){},inish:td_site.inish};td_site.page.videoPlayer.distroyVideo=td_site.page.videoPlayer.destroyVideo;td_site.page.videoPlayer.playVideo=td_site.page.videoPlayer.create;td_site.inish("td_site",td_site,0);}());(function(){function b(){}var a=td_site.videoPlayer.extendExisting("base",{},function(f,g,d,e,c){this._playerConfig={};this._hashReference={};if(typeof c.divHolder==="string"){this.oDivPlayer=td_site.s.id(c.divHolder);}else{this.oDivPlayer=c.divHolder;}});a.controls=b;a.play=b;a.create=b;a.endVideo=b;a.setHolder=function(c){this.oDivPlayer=this.site.s.id(c.holder);};a.addPlayList=function(f){var e=f,d,c;this._hashReference={};if(!(f instanceof Array)){f=[];for(d in e){if(e.hasOwnProperty(d)){c=f.push(e[d])-1;f[c].id=d;this._hashReference[d]=c;}}}this.playList=f;};a.convertId=function(d){if(typeof d==="string"){var c=parseInt(d,10);if(isNaN(c)){d=this._hashReference[d];}else{d=c;}}return d;};a.getVideoById=function(c){return this.playList[this.convertId(c)];};a.setCurrentVideo=function(c){this.curVideoId=this.convertId(c);this.currentVideo=this.getVideoById(c);this.setConfig("imageurl",this.currentVideo.img);this.setConfig("videourl",this.currentVideo.video);this.setConfig("autoplay","true");};a.getNext=function(){var c=this.curVideoId+1;if(c>=this.playList.length){c=0;}return this.playList[c];};a.getPrevious=function(){var c=0;if(this.curVideoId>c){c=this.curVideoId-1;}return this.playList[c];};a.loadVideo=function(c){if(this.getVideoById(c.id)){this.setCurrentVideo(c.id);if(c.bPlay){this.create();}}};a.playVideo=a.create;a.hideVideo=function(){clearTimeout(this.metricsTO);if(this.controler){this.controler.distroy(this.par,this.name,"stopVideo");}else{this.par.distroy(this.name);}};a.stopVideo=b;a.destroyVideo=b;a.setConfig=function(c,d){this._playerConfig[c]=d;};a.setConfigFromObject=function(c){td_site.u.extend(this._playerConfig,c);};a.getConfig=function(c){return this._playerConfig[c];};a.enabled=function(){return true;};}());(function(){var a=td_site.videoPlayer.extendExisting("flash","base",function(e,f,c,d,b){this.controler=e;this.par=f;this.site=c;this.name=d;this.supported=true;this.playing=false;this.error=false;this.curVideoId=0;this.holderContents="";td_site.videoPlayer.funs.base.apply(this,arguments);if(!this.par.v.reserved.flash){this.par.v.reserved.flash={canPlayFlash:null};}this.setVars("new",b);});a.metrics=function(c){var b=this;window.setTimeout(function(){if(c.isFullscreen===true){ngbsMetricsTracker.trackMicroData("videoFullScreen");}else{if(c.event==="nextVideoRequest"){var d;for(d in td_site.page.videoPlayer.v.groups){if(td_site.page.videoPlayer.v.groups.hasOwnProperty(d)){if(td_site.page.videoPlayer.v.groups[d].callBack){td_site.page.videoPlayer.v.groups[d].callBack.fun[td_site.page.videoPlayer.v.groups[d].callBack.cb]();}}}}else{b.par.u.metrics({type:c.videoEvent},c.videoName,c.currentTime,c.duration,c.playerName,b);}}},1);};a.endVideo=function(){if(this.movie&&this.movie.eventHandler){this.movie.eventHandler("destroyVideo",{dummy:""},null);}};a.setVars=function(j,c){var d={instance:this.name,script:this.par.name,type:"",er:[]},b=__params.make.toLowerCase()==="lincoln"?"/ngtemplates/ngassets/com/lincoln/ng/widgets/video/player_lincoln.swf":"/ngtemplates/ngassets/com/forddirect/ng/widgets/video-player/player_ford.swf",f={},i,h,g;if(j==="new"){d.type="new vars";f={width:593,height:348,posterWidth:590,posterHeight:332,divReplace:false,id:"highlightVideoPlayer",bOnlyOne:true,persist:false,position:"relative",player:b,posterFrame:["<div class='td_video_posterFrame' style='border:1px solid red'>","hi","</div>"],currentVideo:{img:false,alt:false,video:false,duration:false}};i=this;}h=this.par.check(d,f,c);d=h.log;c=h.params;if(!d.er.length){for(g in c){if(c.hasOwnProperty(g)){i[g]=c[g];}}if(j==="new"){this.addPlayList(c.playList);}}else{this.par.dispError(d);this.error=true;}};a.formatFlashVars=function(b){var c,d=[];for(c in b){if(b.hasOwnProperty(c)){d.push(c+"="+b[c]);}}return d.join("&");};a.buildFlashVars=function(f,d,b,e){var c={e:f+".v.groups['"+d+"']."+b,v:this.getConfig("videourl"),i:this.getConfig("imageurl"),p:"nextgenplayer",a:"true"};return this.formatFlashVars(c);};a.buildFlash=function(h,j,q,k,m,b,i){var d=this.par.site.name+"."+this.par.name,f={allowScriptAccess:"always",wmode:"opaque",flashvars:this.buildFlashVars(d,h,j,i.id),quality:"high",allowFullScreen:true,bgcolor:"#000000",play:true,movie:b},g={id:m,type:"application/x-shockwave-flash",data:b,width:q,height:k},o="",e="",c,l;if(td_site.v.isIE){g.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000";delete g.type;}for(c in f){if(f.hasOwnProperty(c)){o+='<param name="'+c+'" value="'+f[c]+'" />';}}for(l in g){if(g.hasOwnProperty(l)){e+=" "+l+'="'+g[l]+'"';}}return"<object"+e+">"+o+"</object>";};a.onInitComplete=function(b){var c={autoplay:1,current:1,data:[this.currentVideo]};};a.onUpdateComplete=function(){};a.create=function(){var b=this.oDivPlayer;if(b){b.style.display="block";if(!this.movie){this.holderContents=document.createElement("div");this.holderContents.innerHTML=this.buildFlash(this.name,"metrics",this.width,this.height,this.id,this.player,{id:this.curVideoId});b.appendChild(this.holderContents);this.movie=document.getElementById(this.id);}b.style.display="";}};a.playVideo=a.create;a.destroyVideo=function(){if(this.movie){if(this.movie.eventHandler){this.movie.eventHandler("destroyVideo",{dummy:""},null);}this.movie.parentNode.removeChild(this.movie);this.movie=null;}if(this.holderContents){this.holderContents.parentNode.removeChild(this.holderContents);}delete this.holderContents;};a.pauseVideo=function(){this.movie.eventHandler("stopVideo",{dummy:""},null);};a.enabled=function(){this.testFlash();return(this.supported&&!this.error);};a.setConfig=function(b,c){if(b==="autoplay"){c=c.toString();}td_site.videoPlayer.funs.base.prototype.setConfig.call(this,b,c);};a.testFlash=function(){var c=null,b=false;try{if(typeof ActiveXObject==="undefined"){c=document.createElement("object");c.setAttribute("type","application/x-shockwave-flash");document.body.appendChild(c);b=!!c.GetVariable;document.body.removeChild(c);}else{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");b=!!c.GetVariable("$version");}}catch(d){b=false;}this.supported=this.par.v.reserved.flash.canPlayFlash=b;return this.supported;};}());(function(){var a=td_site.videoPlayer.extendExisting("noplayer","base",function(e,f,c,d,b){this.controler=e;this.par=f;this.site=c;this.name=d;this.supported=true;this.error=false;td_site.videoPlayer.funs.base.apply(this,arguments);this.setVars=function(m,g){var h={instance:this.name,script:this.par.name,type:"",er:[]},i={},l,k,j;if(m==="new"){h.type="new vars";i={width:593,height:348,posterWidth:590,posterHeight:332,divReplace:"td_future",id:"highlightVideoPlayer",persist:false,position:"relative",player:document.createElement("video"),posterFrame:["<div class='td_video_posterFrame' style='border:1px solid red'>","hi","</div>"],currentVideo:{img:false,alt:false,video:false,duration:false}};l=this;}k=this.par.check(h,i,g);h=k.log;g=k.params;if(!h.er.length){for(j in g){if(g.hasOwnProperty(j)){l[j]=g[j];}}if(m==="new"){this.addPlayList(g.playList);}this.player=false;}else{this.par.dispError(h);this.error=true;}};this.setVars("new",b);});a.create=function(){if(this.player){this.destroyVideo();}if(this.currentVideo.img){this.player=document.createElement("img");this.player.src=this.currentVideo.img;this.player.width=this.posterWidth;this.player.height=this.posterHeight;this.oDivPlayer.appendChild(this.player);}};a.destroyVideo=function(){if(this.player&&this.player.parentNode){this.player.parentNode.removeChild(this.player);delete this.player;}};}());(function(){var a=td_site.videoPlayer.extendExisting("html","base",function(e,f,c,d,b){td_site.videoPlayer.funs.base.apply(this,arguments);this.controler=e;this.par=f;this.site=c;this.name=d;this.supported=true;this.error=false;this.playing=false;this.dragTO=false;this.metricsVideoName=false;this.curVideoId=0;this.fileType="";if(this.site.v.isIpad){this.ipadIntVersion=parseInt(navigator.userAgent.toLowerCase().split("cpu os ").pop(),10);}this.setVars("new",b);});a.setVars=function(b,i){var d={instance:this.name,script:this.par.name,type:"",er:[]},k={},f,j=false,g="",c,h;if(b==="new"){d.type="new vars";k={width:593,height:348,posterWidth:590,posterHeight:332,divReplace:"td_future",id:"highlightVideoPlayer",persist:false,position:"relative",player:document.createElement("video"),bibAppendElm:"body",bibDiv:false,currentVideo:{img:false,alt:false,video:false,duration:false}};f=this;}if(!k.player){this.supported=false;return false;}if(k.player.canPlayType){for(h in this.par.v.htmlCodecs){if(this.par.v.htmlCodecs.hasOwnProperty(h)){g=k.player.canPlayType(this.par.v.htmlCodecs[h]);if(g.length){j=true;this.fileType=h;if(g==="probably"){break;}}}}}if(!j){this.supported=false;return false;}c=this.par.check(d,k,i);d=c.log;i=c.params;if(!d.er.length){for(h in i){if(i.hasOwnProperty(h)){f[h]=i[h];}}if(b==="new"){this.addPlayList(i.playList);}this.player=false;}else{this.par.dispError(d);this.error=true;}};a.play=function(){this.player.play();};a.create=function(){var c=this.oDivPlayer,d,b;this.destroyVideo();if(!this.player){this.player=this.site.s.aC(c,"video");}d=new this.site.fun.event(this,this.player,{});this.site.u.addListener(this.player,["loadedmetadata","seeked","seeking","play","pause","ended"],d.run);this.player.poster=this.currentVideo.img;this.player.controls=true;this.player.autoplay=this.getConfig("autoplay");this.player.width=this.width;this.player.height=this.height;b=this.currentVideo.video.split(".");this.metricsVideoName=this.currentVideo.video.split("/").pop();b.pop();b.push(this.fileType);this.player.src=b.join(".");this.player.load();this.metricsTO=this.site.u.TO(this,"setVideoSource",{site:this.site,t:this},100,false);if(this.site.v.isIpad&&this.ipadIntVersion<4){clearTimeout(this.metricsTO);}};a.playVideo=a.create;a.setVideoSource=function(){if(!this.player.readyState){this.player.load();}};a.hideVideo=function(){clearTimeout(this.metricsTO);if(this.controler){this.controler.destroy(this.par,this.name,"destroyVideo");}else{this.par.destroyVideo(this.name);}};a.stopVideo=function(){this.player.paused=true;};a.destroyVideo=function(){if(this.player){this.player.src="";this.event({type:"ended"},this.player,this,{});if(this.player.parentNode){this.player.parentNode.removeChild(this.player);}this.player=false;clearTimeout(this.metricsTO);}};a.enabled=function(){return(this.supported&&!this.error);};a.event=function(f,g,c,d){var b=c.player;c.par.u.metrics(f,c.metricsVideoName,c.player.currentTime,c.player.duration,"HTML5Player",c);switch(f.type){case"error":c.setVideoSource();break;case"loadedmetadata":break;case"click":if(c.controler&&c.controler.click){c.controler.click(c.par,c.name,d);}else{if(c.par&&c.par.click){c.par.click(c.name,d);}else{c[d.action](d);}}break;}};a.controls=function(b){this.player.controls=b;};}());(function(){var a=td_site.videoPlayer.extendExisting("skinnable-html","html",function(){td_site.videoPlayer.funs.html.apply(this,arguments);this.scrubber_width=0;this.mouse_original=0;this.time_original=0;this.volume_height=0;this.cached_controls=null;this._controls={"video-controls":{play:document.createElement("div"),replay:document.createElement("div"),nextVideo:document.createElement("div"),bar:{buffered:document.createElement("div"),played:document.createElement("div"),scrubber:document.createElement("div")},time:{current:document.createElement("time"),duration:document.createElement("time")},fullscreen:document.createElement("div"),audio:{volume:{level:document.createElement("div"),grip:document.createElement("div")},mute:document.createElement("div")}}};});a.addEventsFromObject=function(b,c){var d=new b.site.fun.event(b,c["video-controls"].play,{action:"clickPlay"});b.site.u.addListener(c["video-controls"].play,["click"],d.run);b.site.u.addListener(c["video-controls"].replay,["click"],d.run);d=new b.site.fun.event(b,c["video-controls"].audio.mute,{action:"clickMute"});b.site.u.addListener(c["video-controls"].audio.mute,["click"],d.run);d=new b.site.fun.event(b,c["video-controls"].fullscreen,{action:"clickFullScreen"});b.site.u.addListener(c["video-controls"].fullscreen,["click"],d.run);b.site.u.addListener(c["video-controls"].bar.scrubber,["mousedown"],function(){b.mousedownScrubber.apply(b,arguments);});b.site.u.addListener(c["video-controls"].nextVideo,["click"],function(){b.playNext(b);});b.site.u.addListener(c["video-controls"].audio.volume.grip,["mousedown"],function(){b.mousedownVolume.apply(b,arguments);});b.site.u.addListener(c["video-controls"].audio.mute.parentNode,["mouseover"],function(){b.mouseoverMute.apply(b,arguments);});b.site.u.addListener(c["video-controls"].audio.mute.parentNode,["mouseout"],function(){b.mouseoutMute.apply(b,arguments);});if(b.volume_height===0){b.volume_height=c["video-controls"].audio.volume.grip.parentNode.offsetHeight;}c["video-controls"].audio.volume.grip.parentNode.style.display="none";c["video-controls"].audio.volume.grip.parentNode.style.height=0;};a.clickPlay=function(){if(this.player.paused){this.player.play();}else{this.player.pause();}};a.clickFullScreen=function(){};a.clickMute=function(){this.player.muted=!this.player.muted;};a.mouseoverMute=function(f){var d=this._controls["video-controls"].audio.mute.parentNode,b=f.relatedTarget,c;while(b&&b!==d){b=b.parentNode;}if(b!==d){c=this._controls["video-controls"].audio.volume.grip.parentNode;c.style.display="block";td_site.animation.stop(c).go(c,{height:this.volume_height},1000,"exponential");}};a.mouseoutMute=function(f){var d=this._controls["video-controls"].audio.mute.parentNode,b=f.relatedTarget,c;while(b&&b!==d){b=b.parentNode;}if(b!==d){c=this._controls["video-controls"].audio.volume.grip.parentNode;td_site.animation.stop(c).go(c,{height:0},1000,"exponential",function(){c.style.display="none";});}};a.mousedownScrubber=function(c){var b=this;td_site.u.addListener(document,["mousemove"],b.mousemoveScrubber,b);td_site.u.addListener(document,["mouseup"],b.mouseupScrubber,b);this.scrubber_width=this._controls["video-controls"].bar.scrubber.parentNode.offsetWidth;this.mouse_original=c.screenX;this.time_original=this.player.currentTime;this.player.pause();};a.mousemoveScrubber=function(c,b){b.player.currentTime=((c.screenX-b.mouse_original)/b.scrubber_width)*b.player.duration+b.time_original;};a.mouseupScrubber=function(c,b){td_site.u.removeListener(document,["mousemove"],b.mousemoveScrubber);td_site.u.removeListener(document,["mouseup"],b.mouseupScrubber);b.player.play();};a.mousedownVolume=function(c){var b=this;td_site.u.addListener(document,["mousemove"],b.mousemoveVolume,b);td_site.u.addListener(document,["mouseup"],b.mouseupVolume,b);this.scrubber_width=this._controls["video-controls"].audio.volume.grip.parentNode.offsetHeight;this.mouse_original=c.screenY;this.time_original=this.player.volume;};a.mousemoveVolume=function(c,b){var d=-((c.screenY-b.mouse_original)/b.scrubber_width)+b.time_original;if(d>1){b.player.volume=1;}else{if(d<0){b.player.volume=0;}else{b.player.volume=-((c.screenY-b.mouse_original)/b.scrubber_width)+b.time_original;}}};a.mouseupVolume=function(c,b){td_site.u.removeListener(document,["mousemove"],b.mousemoveVolume);td_site.u.removeListener(document,["mouseup"],b.mouseupVolume);};a.buildElementsFromObject=function(f,b,e){var c,d;for(c in e){if(e.hasOwnProperty(c)){d=td_site.u.isDOMNode(e[c])?e[c]:this.buildElementsFromObject(f+"-"+c,document.createElement("div"),e[c]);d.id=f+"-"+c;d.className=f+"-"+c+" "+c;b.appendChild(d);}}return b;};a.updateTime=function(c,b){var d=Math.floor(b%60).toString();if(d<10){d="0"+d;}this._controls["video-controls"].time[c].innerHTML=Math.floor(b/60)+":"+d;};a.destroyVideo=function(){if(this.player){this.player.src="";if(this.player.parentNode){this.player.parentNode.removeChild(this.player);}this.player=null;clearTimeout(this.metricsTO);this.destroyControls(this.name);}};a.create=function(){var c=this.oDivPlayer,d,b;this.destroyVideo();if(this.site.v.isIpad){window.scrollBy(1,0);}if(!this.player){this.player=this.site.s.aC(c,"video");if(!this.cached_controls){this.cached_controls=this.buildControls(this.name,c);this.cached_controls=this.cached_controls.getElementsByClassName("video-controls")[0];}else{c.appendChild(this.cached_controls);}}d=new this.site.fun.event(this,this.player,{});this.site.u.addListener(this.player,["timeupdate","progress","loadeddata","volumechange","loadedmetadata","seeked","seeking","play","pause","ended"],d.run);this.player.poster=this.currentVideo.img;this.player.autoplay=this.getConfig("autoplay");this.player.width=this.width;this.player.height=this.height;b=this.currentVideo.video.split(".");this.metricsVideoName=this.currentVideo.video.split("/").pop();b.pop();b.push(this.fileType);this.player.src=b.join(".");this.player.load();if(this.site.v.isIpad){window.scrollBy(-1,0);}this.metricsTO=this.site.u.TO(this,"setVideoSource",{site:this.site,t:this},100,false);if(this.site.v.isIpad&&this.ipadIntVersion<4){clearTimeout(this.metricsTO);}};a.playVideo=a.create;a.event=function(f,c,b,e){var g=0,d=0;b.par.u.metrics(f,b.metricsVideoName,c.currentTime,c.duration,"HTML5Player",b);switch(f.type){case"play":b.hideFinalControls();td_site.u.className.add(this._controls["video-controls"].play,"pause");td_site.u.className.remove(this._controls["video-controls"].play,"play");break;case"pause":td_site.u.className.add(this._controls["video-controls"].play,"play");td_site.u.className.remove(this._controls["video-controls"].play,"pause");break;case"timeupdate":b._controls["video-controls"].bar.scrubber.style.left=((c.currentTime/c.duration)*100)+"%";b._controls["video-controls"].bar.played.style.width=((c.currentTime/c.duration)*100)+"%";b.updateTime("current",c.currentTime);break;case"loadedmetadata":b.updateTime("duration",c.duration);break;case"loadeddata":case"progress":if(c.buffered&&c.buffered.length>0){g=c.buffered.start(0);d=c.buffered.end(0)-g;}b._controls["video-controls"].bar.buffered.style.left=((g/c.duration)*100)+"%";b._controls["video-controls"].bar.buffered.style.width=((d/c.duration)*100)+"%";break;case"volumechange":b._controls["video-controls"].audio.volume.grip.style.bottom=(c.volume*100)+"%";b._controls["video-controls"].audio.volume.level.style.height=(c.volume*100)+"%";if(c.muted){td_site.u.className.add(b._controls["video-controls"].audio.mute,"muted");}else{td_site.u.className.remove(b._controls["video-controls"].audio.mute,"muted");}break;case"error":b.setVideoSource();break;case"ended":b.player.pause();b.showFinalControls(b);break;case"mouseover":case"mouseout":b[e.action](e);break;case"click":if(b.controler&&b.controler.click){b.controler.click(b.par,b.name,e);}else{if(b.par&&b.par.click){b.par.click(b.name,e);}else{b[e.action](e);}}break;}};a.showFinalControls=function(){var f=this._controls["video-controls"].replay,b=this._controls["video-controls"].nextVideo,e="",d,i,h,c,g;if(this.playList){i=this.playList.length;if(i>1){d=this.currentVideo;c=this.getNextVideo();if(c.thumb&&c.title){f.className="carousel-video-controls-replay replay";e+='<img src="'+c.thumb+'"/>';e+='<p><strong>Next Video</strong><span class="next-btn-title">'+c.title+"</span>";e+='<span class="next-btn-arrow"></span></p>';b.innerHTML=e;b.style.display="block";}else{f.className=f.className+" center-replay-btn";}}else{f.className=f.className+" center-replay-btn";}f.style.display="block";}};a.hideFinalControls=function(){this._controls["video-controls"].replay.style.display="none";this._controls["video-controls"].nextVideo.style.display="none";};a.getNextVideo=function(){var d,f,c,e,b;f=parseInt(this.curVideoId,10);if(f>=(this.playList.length-1)){c=0;}else{c=f+1;}b=this.playList[c];e={vid:c,thumb:b.thumb,title:b.alt,videoSrc:b.video};return e;};a.playNext=function(){var b=this.getNextVideo();this.setCurrentVideo(b.vid);this.destroyVideo();this.create();var c;for(c in td_site.page.videoPlayer.v.groups){if(td_site.page.videoPlayer.v.groups.hasOwnProperty(c)){if(td_site.page.videoPlayer.v.groups[c].callBack){td_site.page.videoPlayer.v.groups[c].callBack.fun[td_site.page.videoPlayer.v.groups[c].callBack.cb]();}}}};a.buildControls=function(d,b){var c=null;this._controls["video-controls"].spacer=document.createElement("div");this.player.controls=false;c=this.buildElementsFromObject(d,b,this._controls);this.addEventsFromObject(this,this._controls);return c;};a.destroyControls=function(){this.cached_controls.parentNode.removeChild(this.cached_controls);};a.controls=function(b){if(b){this.cached_controls.style.display="block";}else{this.cached_controls.style.display="none";}};}());
(function(){var d=YAHOO.util.Dom;var c=YAHOO.util.Event;var e=YAHOO.widget;var f=getPackageForName("com.forddirect.ng.util");var j=getPackageForName("com.forddirect.ng.widgets");var h=0;var g=-24;var a=["top","right","bottom","left"];var i={tl:{tr:{arrow:"l",top:"15%"},bl:{arrow:"t",left:"15%"},def:{arrow:"l",top:"40%"}},tr:{tl:{arrow:"r",top:"15%"},br:{arrow:"t",left:"85%"},def:{arrow:"r",top:"40%"}},bl:{tl:{arrow:"b",left:"15%"},br:{arrow:"l",left:"85%"},def:{arrow:"l",top:"40%"}},br:{tr:{arrow:"b",left:"60%"},bl:{arrow:"r",top:"80%"},def:{arrow:"r",top:"40%"}},def:{def:{arrow:"r",top:"40%"}}};var b={t:{fn:d.setY,offset:{top:-7}},r:{fn:d.setX,offset:{right:-14}},b:{fn:d.setY,offset:{bottom:-15}},l:{fn:d.setX,offset:{left:-8}}};j.BSTooltip=function(m,o){this.el=m;var n={hidedelay:500,constraintoviewport:true,offset:{x:h,y:g}};if(o){var l;for(l in o){if(o.hasOwnProperty(l)){if(l==="offset"){if(o.offset.x){n.offset.x+=o.offset.x;}if(o.offset.y){n.offset.y+=o.offset.y;}}else{n[l]=o[l];}}}}j.BSTooltip.superclass.constructor.call(this,m,n);if(_widgets.context&&_widgets.context.SelectedContext.enabledGetUpdatesFlipEvent){_widgets.context.SelectedContext.enabledGetUpdatesFlipEvent.subscribe(this.hideFlip,this,true);}};YAHOO.extend(j.BSTooltip,e.Tooltip,{init:function(k,l){j.BSTooltip.superclass.init.apply(this,arguments);c.on(k,"mouseover",this.onTooltipMouseOver,this,true);c.on(k,"mouseout",this.onContextMouseOut,this,true);this.subscribe("beforeShow",f.X.wrap(this.synchronizeArrows,this),this,true);this.subscribe("beforeHide",f.X.wrap(this.hideArrows,this),this,true);},initDefaultConfig:function(){j.BSTooltip.superclass.initDefaultConfig.call(this);this.cfg.addProperty("offset",{value:{x:0,y:0},validator:null,supercedes:null});},onContextMouseMove:function(q,p){var o=p.cfg.getProperty("context");if(o&&o.length>=2){var l=o[1];var k=o[2];var n=p.element;var m=function(t,u){switch(l){case e.Overlay.TOP_LEFT:p.pageX=u;var w=0;if(typeof window.pageYOffset==="number"){w=window.pageYOffset;}else{if(document.documentElement&&document.documentElement.scrollTop){w=document.documentElement.scrollTop;}else{if(document.body&&document.body.scrollTop){w=document.body.scrollTop;}else{if(window.scrollY){w=window.scrollY;}}}}var s=0;if(window.innerHeight){s=window.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){s=document.documentElement.clientHeight;}else{if(document.body&&document.body.clientHeight){s=document.body.clientHeight;}}}if(t-w+n.offsetHeight<s){p.pageY=t-n.offsetHeight;}else{p.pageY=t;}break;case e.Overlay.TOP_RIGHT:p.pageX=u-n.offsetWidth;p.pageY=t;break;case e.Overlay.BOTTOM_LEFT:p.pageX=u;p.pageY=t-n.offsetHeight;break;case e.Overlay.BOTTOM_RIGHT:p.pageX=u-n.offsetWidth;p.pageY=t-n.offsetHeight;break;}var x=p.cfg.getProperty("offset");if(x){if(x.x){p.pageX+=x.x;}if(x.y){p.pageY+=x.y;}}};var r=d.getRegion(this);switch(k){case e.Overlay.TOP_LEFT:m(r.top,r.left);break;case e.Overlay.TOP_RIGHT:m(r.top,r.right);break;case e.Overlay.BOTTOM_LEFT:m(r.bottom,r.left);break;case e.Overlay.BOTTOM_RIGHT:m(r.bottom,r.right);break;}}else{p.pageX=c.getPageX(q);p.pageY=c.getPageY(q);}},setBody:function(){},onTooltipMouseOver:function(m,l){var k=this;if(k.title){l._tempTitle=k.title;k.title="";}if(l.fireEvent("contextMouseOver",k,m)&&!l.cfg.getProperty("disabled")){if(l.hideProcId){clearTimeout(l.hideProcId);l.hideProcId=null;}c.on(k,"mousemove",l.onContextMouseMove,l);l.showProcId=l.stopHide(m,k);}},stopHide:function(l,k){c.removeListener(k,"mousemove",this.onContextMouseMove);this.hideProcId=this.doHide();this.show();},hideFlip:function(){this.hide();},showFlip:function(){this.show();},hideArrows:function(){d.getElementsByClassName("tt-arrow",null,this.el,function(k){d.removeClass(k,"tt-arrow-active");});},positionArrow:function(m,n){var l=m.parentNode;var o=d.getRegion(l);if(n){var p=b[n];if(p){var q;for(q in p.offset){if(p.offset.hasOwnProperty(q)){var k=o[q]+p.offset[q];p.fn(m,k);}}}}},synchronizeArrows:function(t,p){var s={t:{coord:1,g:true,reverse:"b"},b:{coord:1,g:false,reverse:"t"},l:{coord:0,g:false,reverse:"r"},r:{coord:0,g:false,reverse:"l"}};this.hideArrows();var l=this.cfg.getProperty("context");if(l){var m=l.length>=1?l[1]:null;var y=l.length>=2?l[2]:null;var q=d.getXY(this.el);var v=d.getXY(l[0]);var u=(m&&i[m])?i[m]:i.def;var x=(y&&u[y])?u[y]:u.def;if(x){if(x.arrow){var r=s[x.arrow].coord;if((q[r]>=v[r])!==s[x.arrow].g){x.arrow=s[x.arrow].reverse;}var n=d.getElementsByClassName("tt-arrow-"+x.arrow,null,this.el);if(n&&n.length>0){d.addClass(n,"tt-arrow-active");d.batch(n,this.positionArrow,x.arrow,this);var o,w;for(o=0,w=a.length;o<w;o++){var k=a[o];if(x[k]){d.setStyle(n,k,x[k]);}}}}}}}});}());
(function(){var c=YAHOO.util.Dom;var b=YAHOO.util.Event;var e=YAHOO.widget;var f=getPackageForName("com.forddirect.ng.util");var a=getPackageForName("com.forddirect.ng.widgets");a.NameplateQuicklinks=function(j){var h=c.get("shop-tooltip");var g=f.Dom.getElementByClassName("more-shopping-tools-button","div",j);if(h&&g){this.flip=new a.BSTooltip(h,{context:[g,e.Overlay.TOP_RIGHT,e.Overlay.BOTTOM_RIGHT],effect:{effect:e.ContainerEffect.FADE,duration:0.1}});}this.applyCreditLink=f.Dom.getElementByClassName("apply-credit-link","a",j);if(_widgets.context&&_widgets.context.PricingContext){var i=_widgets.context.PricingContext.getFordCreditLink();if(this.applyCreditLink&&i){this.applyCreditLink.href=i;}_widgets.context.PricingContext.subscribe("paymentDataChange",this.onPaymentDataUpdate,this,true);_widgets.context.PricingContext.subscribe("paymentTypeChange",this.onPaymentDataUpdate,this,true);}};var d=a.NameplateQuicklinks.prototype;d.onPaymentDataUpdate=function(g){var h=_widgets.context.PricingContext.getFordCreditLink(true,true);if(this.applyCreditLink&&h){this.applyCreditLink.href=h;}};}());
(function(){var b=YAHOO.lang;var c=YAHOO.util.Dom;var d=YAHOO.Bubbling;var j=getPackageForName("com.forddirect.ng.widgets");var f=getPackageForName("com.forddirect.ng.util");var i="make";var a="modelName";var e="modelYear";var g="brochureCode";var h={OPTIN:"/services/lead/OptIn",REQUESTBROCHURE:"/services/lead/RequestBrochure"};j.LeadSubmission=function(k,l){j.LeadSubmission.superclass.constructor.apply(this,arguments);};b.extend(j.LeadSubmission,j.BaseWidget,{init:function(k,l){l=l||{};this.onLeadCompleteSuccessEvent=new YAHOO.util.CustomEvent("onLeadCompleteSuccess");this.onLeadCompleteFailedEvent=new YAHOO.util.CustomEvent("onLeadCompleteFailed");if(!this.supportsCORS()){this.initFlash(k,l);}},submit:function(k,m,l){if(this.matchesOrigin(k,window.location)){this.submitViaAJAX(k,m,l);}else{if(this.supportsCORS()){this.submitViaAJAX(k,m,l);}else{this.submitViaFlash(k,l);}}},matchesOrigin:function(k,l){l=l||window.location;return this.getOrigin(k)===this.getOrigin(l);},getOrigin:function(l){l=l||"";var m=new RegExp("^https?://[^/]+/?");var k=m.exec(l);return k?k[0].toLowerCase():null;},initFlash:function(l,n){this.flashWidgetID=n.flashWidgetID||"leadSubmissionSWF";this.flashContainerEl=f.Dom.getElementByClassName("lead-submission-flash-container","div",l);if(!_widgets[this.flashWidgetID]){if(!this.flashContainerEl){throw"Container Element for flash NOT Found!!! Expected a 'div' with class-name 'lead-submission-flash-container'.";}var m=_widgets.context.SiteContext.get("baseURL")||"";var k=m+"/ngtemplates/ngassets/com/forddirect/ng/widgets/lead-submission/lead-submission.swf";var o="instanceName=_widgets."+this.flashWidgetID;_widgets[this.flashWidgetID]=this.addWidget(this.flashContainerEl,j.VideoPlayer,{widgetID:this.flashWidgetID,jsInstanceName:"_widgets."+this.flashWidgetID,swfPath:k,width:2,height:1,bgColor:"#ffffff"});_widgets[this.flashWidgetID].init(o);_widgets[this.flashWidgetID].onSuccess=function(){this.leadSubmissionWidgetObj.onLeadSubmissionSuccess();};_widgets[this.flashWidgetID].onFailure=function(){this.leadSubmissionWidgetObj.onLeadSubmissionFailure();};_widgets[this.flashWidgetID].leadSubmissionWidgetObj=this;wtk.widgetInstances[this.flashWidgetID]=_widgets[this.flashWidgetID];}},supportsCORS:function(){if(YAHOO.env.ua.ie>0){return false;}return((typeof XMLHttpRequest)&&(typeof(new XMLHttpRequest()).withCredentials!=="undefined"));},createQueryString:function(m){var k="";var l;for(l in m){if(m.hasOwnProperty(l)){k+=(k?"&":"")+l+"="+escape(m[l]);}}return k;},sendRequest:function(k,m,l){if(m==="POST"){k.send(this.createQueryString(l));}else{k.send();}},appendData:function(l,m){var k=(l.indexOf("?")===-1)?"?":"&";return l+k+this.createQueryString(m);},submitViaAJAX:function(l,p,o){p=p||"POST";if(p==="GET"&&o){l=this.appendData(l,o);}if(typeof XMLHttpRequest){var n=new XMLHttpRequest();n.open(p,l,true);n.setRequestHeader("Content-Type","text/plain; charset=UTF-8");var k=this;var m=function(){if(n.readyState===4){if(n.status===200){k.onLeadSubmissionSuccess(n.responseText);}else{k.onLeadSubmissionFailure();}}};n.onreadystatechange=m;this.sendRequest(n,p,o);}},submitViaFlash:function(m,n){var l=_instances.flashFramework.thisMovie(this.flashWidgetID);var k=false;if(l&&l.submitLead){try{l.submitLead(m,n,this.flashWidgetID,"onSuccess","onFailure");k=true;}catch(o){}}return k;},format:function(k,u,x,p,y,A,o,m,s,w,n,C,l){var z=h[l.toUpperCase()];var D=_widgets.context.SelectedContext.get("make"),q="",v="",B="000",t="EN";if(window.MP&&MP.UrlLang==="es"){t="SP";}if(!z){throw"Lead request type submitted is invalid. It should be either OptIn or RequestBrochure";}var r=function(J,I){var H;var G="";for(H=0;H<J.length;H++){G+=J[H][I]+";";}return G;};if(s&&s.length>0){D=r(s,i);q=r(s,a);v=r(s,e);B=r(s,g);}var F={};F["customer.firstname"]=k;F["customer.lastname"]=u;F["customer.email"]=x;F["customer.phone"]=p;F["customer.address.street"]=y;F["customer.address.city"]=A;F["customer.address.state"]=o;F["customer.address.zipcode"]=m;F["purchase.timeframe"]=w;F.listid=C;F.qacodes=n;F.make=D;F.model=q;F.year=v;F.brochureCode=B;F["customer.language"]=t;var E=_widgets.context.SiteContext.get("secure.baseURLForLeadSubmission")||_widgets.context.SiteContext.get("leadSubmission.baseURL")||"";return this.submit(E+z,"GET",F);},onLeadSubmissionSuccess:function(k){this.onLeadCompleteSuccessEvent.fire("Success");},onLeadSubmissionFailure:function(k){this.onLeadCompleteFailedEvent.fire("Failed");}});}());
(function(){var u=YAHOO.util.Dom;var r=YAHOO.DHTMLForms;var t=YAHOO.util.Event;var l=getPackageForName("com.forddirect.ng.widgets");var j=getPackageForName("com.forddirect.ng.util");var f="  -- Select a State --  ";var h=3;var a="@";var m="|";var v="both";var s="mail";var c="email";var b=c;var e="OptIn";var d="RequestBrochure";var i={Ford:"0799A",Lincoln:"0799A"};var o=[];var p={isApplicable:function(x,y){return true;},apply:function(y,z){var x=u.get("f:get-updates-email-confirmation");return x&&y.value===x.value&&y.value.match(/^[^@]+@[^@\.]+\.[^@]+$/);},getDisplayText:function(){return"Please enter a valid e-mail address.";}};var k={isApplicable:function(){return true;},apply:function(z,A){var x=false;var y=u.get("f:get-updates-email");return y&&z.value===y.value&&z.value.match(/^[^@]+@[^@\.]+\.[^@]+$/);},getDisplayText:function(){return null;}};var n={isApplicable:function(x,y){return true;},apply:function(x,y){return _widgets.context.UserContext.validateZIPCode(x.value);},getDisplayText:function(){return"Please enter a valid 5 digit ZIP code.";}};var g={isApplicable:function(x,y){return true;},apply:function(z,A){var y=u.get("yui_top_f:get-updates-state").innerHTML.indexOf("Select a State")===-1;var x=u.get("yui_f:get-updates-state");if(y){u.removeClass(x,"error");}else{u.addClass(x,"error");}return y;},getDisplayText:function(){return"Please enter a State.";}};var q={isApplicable:function(x,y){return true;},setUnselectedVehicleDisabled:function(D,B){var A={};var y;for(y=0;y<D.length-1;++y){A[D[y]]=1;}var x=u.getElementsByClassName("select-vehicles")[0];var z=u.getElementsByClassName("nameplate-id","input",x);var C;for(y=0,C=z.length;y<C;y++){if(!A[z[y].value]){z[y].disabled=B;}}},apply:function(z,A){var x=false;var y=[];if(z&&z.value){y=z.value.split(a);}if(y.length<=h+1){this.setUnselectedVehicleDisabled(y,false);}else{this.setUnselectedVehicleDisabled(y,true);}x=(y.length-1)<=h;return x;},getDisplayText:function(){return"You may only select a total of 3 vehicles.";}};var w={isApplicable:function(x,y){return true;},apply:function(z,A){var y=z.value;var x=false;y=y.replace(/^\s+/,"");if(/[^a-z\s&'-\.]/gi.test(y)||y.length===0){y.value="";return x;}x=true;return x;},getDisplayText:function(){return"You may only enter text values";}};l.GetUpdatesForm=function(y,x){var A=x||{};if(!A.gumode){A.gumode=b;}l.GetUpdatesForm.superclass.constructor.apply(this,arguments);this.el=y;var z=u.get("lead-submission");this.leadSubmission=new l.LeadSubmission(z);this.stateSelection=new r.SelectBox("f:get-updates-state",{formBody:this.formBody});this.stateSelection.render();u.get("yui_top_f:get-updates-state").innerHTML=f;this.inputFields=_widgets.context.SelectedContext.get("getUpdatesForm.inputFields")||{};this.zipCodeField=u.get("f:get-updates-zip-code");t.addListener(u.getElementsByClassName("communication-mode","input",y),"click",this.updateFormState,null,this);this.timeToBuyRadioButtons=u.getElementsByClassName("gu-timeToBuy","input",y);t.addListener(this.timeToBuyRadioButtons,"click",this.updateTimeToBuy,null,this);this.vehicleCheckBoxes=u.getElementsByClassName("nameplate-id","input",y);t.addListener(this.vehicleCheckBoxes,"click",this.updateNameplateID,null,this);this.successfulSubmissionEvent=new YAHOO.util.CustomEvent("successfulSubmission");this.successfulSubmissionEvent.subscribe(this.handleSuccess,this,true);this.fieldValidationErrorEvent=new YAHOO.util.CustomEvent("fieldValidationErrorEvent");if(this.leadSubmission&&this.leadSubmission.onLeadCompleteSuccessEvent){this.leadSubmission.onLeadCompleteSuccessEvent.subscribe(this.handleLeadSubmissionSuccess,this,true);}this.updateForm(A.gumode,A.gutitle);};YAHOO.lang.extend(l.GetUpdatesForm,l.FormWidget,{init:function(x,y){l.GetUpdatesForm.superclass.init.apply(this,arguments);this.formBody=u.get("get-updates-form");this.fieldDivs=u.getElementsByClassName("form-field","div",this.el);this.mailBox=u.get("mail-checkbox");this.emailBox=u.get("email-checkbox");this.globalError=u.get("get_updates_global_error");this.instructionalMessage=u.get("get_updates_instructional_error");this.selectedVehiclesMessage=u.get("gu-selectVehicles");this.selectedModelsList=j.getElementByClassName("selected-models-list","ul",this.el);_widgets.context.UserContext.onInvalidZIPCode.subscribe(this.handleZIPCodeError,this,true);},updateTimeToBuy:function(y){var x=u.get("f:get-updates-time-to-buy");if(x){u.batch(this.timeToBuyRadioButtons,function(z){if(z.checked){x.value=z.value;}});}},updateNameplateID:function(y){var A=u.get("f:get-updates-select-vehicles");if(A){var x="";u.batch(this.vehicleCheckBoxes,function(B){if(B.checked){x+=B.value+a;}});A.value=x;ngbsMetricsTracker._gu_metrics=ngbsMetricsTracker._gu_metrics||{};if(typeof x==="string"&&x!==""){var z=ngbsMetricsTracker._gu_metrics.defaultVehicle||"";if(x.indexOf(z)!==-1&&z!==""){ngbsMetricsTracker._gu_metrics.vehicle=z;}else{ngbsMetricsTracker._gu_metrics.vehicle=x.split(a)[0];}}else{ngbsMetricsTracker._gu_metrics.vehicle="";}}this.updateField(A);},updateForm:function(y,A){var x=function(B){if(B==="mail+email"||B==="email+mail"){B=v;}else{if(!(B===s||B===c||B===v)){B=b;}}return B;};var z=x(y);if(A==="Brochures"||A==="Folletos"){this.mailBox.disabled=true;}else{this.mailBox.disabled=false;}if(z===v){this.mailBox.checked=true;this.emailBox.checked=true;}else{if(z===s){this.mailBox.checked=true;this.emailBox.checked=false;}else{if(z===c){this.mailBox.checked=false;this.emailBox.checked=true;}else{this.mailBox.checked=false;this.emailBox.checked=false;}}}this.updateFormState();},updateFormState:function(){if(this.mailBox.checked&&!this.emailBox.checked){this.state=s;}else{if(!this.mailBox.checked&&this.emailBox.checked){this.state=c;}else{if(this.mailBox.checked&&this.emailBox.checked){this.state=v;}else{this.state="none";u.addClass(this.globalError,"show");}}}if(this.state===s||this.state===c||this.state===v){this.populateFields(this.state);}},populateFields:function(y){u.removeClass(this.globalError,"show");u.removeClass(this.instructionalMessage,"show");var x=this.inputFields;u.batch(this.fieldDivs,function(A){var C=A.getAttribute("id");var z=j.getElementByClassName("optionality-indicator","span",A);var B=j.getElementByClassName("input-field","",A);if(z){z.innerHTML="";}u.removeClass(A,"error");if(x[C][y]==="notrequired"){u.replaceClass(A,"necessary","hidden");u.replaceClass(B,"necessary","hidden");}else{if(x[C][y]==="necessary"){if(z){z.innerHTML="*";}u.replaceClass(A,"hidden","necessary");u.replaceClass(B,"hidden","necessary");}else{if(x[C][y]==="optional"){u.removeClass(A,"hidden");u.removeClass(A,"necessary");u.removeClass(B,"hidden");u.removeClass(B,"necessary");}}}});if(y===s||y===v){this.showStateSelection();}else{this.hideStateSelection();}},handleSubmission:function(A){var y=this.areFieldInputsValid(A);if(!y){this.displayGlobalError();}var B=this.areSelectedVehiclesValid(A);if(!B){this.displaySelectedVehiclesError();}var z=u.get("f:get-updates-zip-code").value||"";if(z&&_widgets.context.UserContext.validateZIPCode(z)){j.getData("/services/geo/States?postalCode="+z,null,null,null,null,function(F){var C=false;var D=u.get("f:get-updates-state");if(u.hasClass(D,"necessary")){var E=F.responseXML.documentElement.getElementsByTagName("State")[0].firstChild.nodeValue;if(D.value!==E){C=true;this.showStateError();}}if(y&&!C){this.submitLead(A);}},function(){this.showZipCodeError();},this);}else{this.showZipCodeError();}if(!y||!B||!z||!_widgets.context.UserContext.validateZIPCode(z)){this.fieldValidationErrorEvent.fire();}var x;if(this.mailBox.checked&&this.emailBox.checked){x=this.focusFirstNameError()&&this.focusLastNameError()&&this.focusAddressError()&&this.focusCityError()&&this.focusZipCodeError()&&this.focusEmailError()&&this.focusEmailConfirmationError();}else{if(this.mailBox.checked&&!this.emailBox.checked){x=this.focusFirstNameError()&&this.focusLastNameError()&&this.focusAddressError()&&this.focusCityError()&&this.focusZipCodeError();}else{if(!this.mailBox.checked&&this.emailBox.checked){x=this.focusZipCodeError()&&this.focusEmailError()&&this.focusEmailConfirmationError();}}}},updateField:function(y){var x=l.GetUpdatesForm.superclass.updateField.apply(this,arguments);if(this.stateSelection){this.stateSelection.updatePosition();}return x;},handleZIPCodeError:function(x){this.updateFieldError(this.zipCodeField,n);},showStateSelection:function(){u.removeClass("yui_menu_f:get-updates-state","disabled");u.removeClass("yui_f:get-updates-state","disabled");u.get("yui_menu_f:get-updates-state").style.visibility="hidden";u.get("yui_menu_f:get-updates-state").style.height="200px";u.removeClass("yui_f:get-updates-state","error");if(this.stateSelection){this.stateSelection.updatePosition();}},hideStateSelection:function(){u.addClass("yui_menu_f:get-updates-state","disabled");u.addClass("yui_f:get-updates-state","disabled");var x=u.get("gu-state");if(!u.hasClass(x,"hidden")){u.addClass(x,"hidden");}if(u.hasClass(x,"necessary")){u.removeClass(x,"necessary");}},getValidations:function(){var x={"f:get-updates-email":p,"f:get-updates-email-confirmation":k,"f:get-updates-zip-code":n,"f:get-updates-state":g,"f:get-updates-select-vehicles":q,"f:get-updates-city":w};return x;},handleLeadSubmissionSuccess:function(x){this.successfulSubmissionEvent.fire("success");},handleSuccess:function(x){var z=u.getElementsByClassName("nameplate-id","input",this.el);var y=j.getElementByClassName("selected-vehicles","h3",this.el);var A="";var B="";u.batch(z,function(C){if(C&&C.checked){if(u.hasClass(C,"current")){A+="<li>"+C.alt.toUpperCase()+"</li>";}else{if(u.hasClass(C,"future")){B+="<li>"+C.alt.toUpperCase()+"</li>";}else{if(u.hasClass(C,"commercial")){B+="<li>"+C.alt.toUpperCase()+"</li>";}}}}});B+=A;if(B!==""){this.selectedModelsList.innerHTML=B;if(u.hasClass(y,"hidden")){u.removeClass(y,"hidden");}}else{u.addClass(y,"hidden");}u.addClass("get-updates-wrapper","hide");u.removeClass("submission-confirmation","hide");window.scrollTo(0,0);},refreshForm:function(){var D=u.get("yui_top_f:get-updates-state");if(D){D.innerHTML=f;u.removeClass(D,"error");}var C=function(){var J=_widgets.context.SelectedContext.get("getUpdatesForm.forVehicle")||{};var I=_widgets.context.SelectedContext.get("getUpdatesForm.futureVehicles")||{};var H="";if(typeof guFormVehicleType!=="undefined"){if(guFormVehicleType==="commercial"){var G=u.get("brochureCode5");if(G){var F=G.selectedIndex;if(G.options[F].value==="FTCC_ConsumerBrochure"){return"Ford|Truck Commercial Connection|2011|truck|Truck Commercial Connection|329";}}}}if(J&&typeof J.make==="string"&&typeof J.model==="string"&&(typeof J.year==="string"||typeof J.year==="number")){H=J.make+m+J.model+m+J.year;}return H;};var x=this.getFields(),B,A;for(B in x){if(x.hasOwnProperty(B)){if(x[B].id==="f:get-updates-select-vehicles"){x[B].value="";var z=C();ngbsMetricsTracker._gu_metrics={};ngbsMetricsTracker._gu_metrics.vehicle="";ngbsMetricsTracker._gu_metrics.defaultVehicle="";for(A=0;A<this.vehicleCheckBoxes.length;A++){var y=this.vehicleCheckBoxes[A];if(j.Text.startsWith(y.value,z)){x[B].value=y.value+a;y.checked=true;ngbsMetricsTracker._gu_metrics.vehicle=y.value;ngbsMetricsTracker._gu_metrics.defaultVehicle=y.value;}else{y.checked=false;}}}else{x[B].value="";if(x[B].id==="f:get-updates-time-to-buy"){for(A=0;A<this.timeToBuyRadioButtons.length;A++){this.timeToBuyRadioButtons[A].checked=false;}}}}}var E=u.get("f:get-updates-select-vehicles");q.apply(E,null);this.selectedModelsList.innerHTML="";u.removeClass(this.globalError,"show");u.removeClass(this.instructionalMessage,"show");u.removeClass(this.fieldDivs,"error");},getSourceID:function(z){var y;if(this.state===s){y=this._sourceid;}else{var x=_widgets.context.SelectedContext.get("make");if(this._sourceid){y=i[x]+"|"+this._sourceid;}else{y=i[x];}}return y;},getCampaignID:function(){return this._campaignid;},submitLead:function(M){var y=d;if(this.state===c){y=e;}u.removeClass(this.instructionalMessage,"show");var D,O;D=this.getSourceID(this.state);O=this.getCampaignID();var N=u.get("f:get-updates-select-vehicles");var x,H,J,K,L,E,B,Q,C,I;x=u.get("f:get-updates-first-name").value||"";H=u.get("f:get-updates-last-name").value||"";J=u.get("f:get-updates-email").value||"";K=u.get("f:get-updates-address").value||"";L=u.get("f:get-updates-city").value||"";var G=_widgets.context.SelectedContext.get("getUpdatesForm.states")||{};var z=u.get("yui_top_f:get-updates-state");E=G[z.innerHTML]||"";B=u.get("f:get-updates-zip-code").value||"";I=u.get("f:get-updates-time-to-buy").value||"";var F="";if(N&&N.value!==""){F=N.value.replace(/@$/,"");Q=F.split(a);var R;var A=[];for(R=0;R<Q.length;R++){C=Q[R].split(m);var P={};P.make=C[0];P.modelName=C[1];P.modelYear=C[2];P.brochureCode=C[5];A[R]=P;}this.leadSubmission.format(x,H,J,"",K,L,E,B,A,I,D,O,y);}else{this.leadSubmission.format(x,H,J,"",K,L,E,B,[],I,D,O,y);}},areFieldInputsValid:function(y){var A=l.GetUpdatesForm.superclass.handleSubmission.apply(this,arguments);var z=u.get("f:get-updates-select-vehicles");var x=q.apply(z,null);return A&&x;},areSelectedVehiclesValid:function(x){var y=u.get("f:get-updates-select-vehicles");return q.apply(y,null);},displayGlobalError:function(){u.addClass(this.instructionalMessage,"show");window.scrollTo(0,0);j.getElementByClassName("bd","div","get-updates-flip").scrollTop=0;},displaySelectedVehiclesError:function(){u.addClass(this.selectedVehiclesMessage,"error");window.scrollTo(0,0);j.getElementByClassName("bd","div","get-updates-flip").scrollTop=0;},showZipCodeError:function(){var y=u.get("gu-zipCode");var x=j.getElementByClassName("input-field","",y);if(!u.hasClass(y,"error")){u.addClass(y,"error");}this.displayGlobalError();},showStateError:function(){var x=u.get("gu-state");var y=u.get("yui_f:get-updates-state");u.addClass(x,"error");u.addClass(y,"error");this.displayGlobalError();},focusFirstNameError:function(){var x=u.get("gu-firstName");var y=j.getElementByClassName("input-field","",x);if(u.hasClass(x,"error")){if(!u.hasClass(y,"focus")){u.addClass(y,"focus");}y.focus();return true;}return false;},focusLastNameError:function(){var y=u.get("gu-lastName");var x=j.getElementByClassName("input-field","",y);if(u.hasClass(y,"error")){if(!u.hasClass(x,"focus")){u.addClass(x,"focus");}x.focus();return true;}return false;},focusAddressError:function(){var y=u.get("gu-address");var x=j.getElementByClassName("input-field","",y);if(u.hasClass(y,"error")){if(!u.hasClass(x,"focus")){u.addClass(x,"focus");}x.focus();return true;}return false;},focusCityError:function(){var y=u.get("gu-city");var x=j.getElementByClassName("input-field","",y);if(!u.hasClass(x,"focus")){if(!u.hasClass(x,"focus")){u.addClass(x,"focus");}x.focus();return true;}return false;},focusZipCodeError:function(){var y=u.get("gu-zipCode");var x=j.getElementByClassName("input-field","",y);if(u.hasClass(y,"error")){if(!u.hasClass(x,"focus")){u.addClass(x,"focus");}x.focus();return true;}return false;},focusEmailError:function(){var x=u.get("gu-email");var y=j.getElementByClassName("input-field","",x);if(u.hasClass(x,"error")){if(!u.hasClass(y,"focus")){u.addClass(y,"focus");}y.focus();return true;}return false;},focusEmailConfirmationError:function(){var y=u.get("gu-emailConfirmation");var x=j.getElementByClassName("input-field","",y);if(u.hasClass(y,"error")){if(!u.hasClass(x,"focus")){u.addClass(x,"focus");}x.focus();return true;}return false;}});}());
(function(){var c=YAHOO.lang;var j=YAHOO.util.Dom;var g=YAHOO.util.Event;var p=getPackageForName("com.forddirect.ng.widgets");var n=getPackageForName("com.forddirect.ng.util");var d="Thank You!";var a="Brochures";var e="Get Updates";var i="email";var o="enabled";var b="0848";var m="Get Updates";var k={Ford:"310124",Lincoln:"320864",Mercury:"320863"};var l=false;var h={Ford:{"shop-tooltip":312727,globalnav:312726,"nameplate-header":312725,"nameplate-nav-menu":312725,shoppingTools:312725,"nameplate-quicklinks":312724,"banner-overlay":312723,shoppingToolsMap:312720,"shopping-tools-list":312720},Lincoln:{"shop-tooltip":320881,globalnav:320880,"nameplate-header":320879,"nameplate-quicklinks":320879,"banner-overlay":320877,shoppingToolsMap:320876,"shopping-tools-list":320876,"overview-sidebar-shopping-tools":320879,td_tooltip_content:320881}};p.GetUpdatesFlip=function(s,z){if(_instances.getUpdatesFlip){throw"The get Updates Flip can only have a single instance.";}var t=z||{};if(!t.gumode){t.gumode=i;}this.el=s;var q=_widgets.context.SelectedContext.get("make");p.GetUpdatesFlip.superclass.constructor.apply(this,arguments);this.panelEl=n.getElementByClassName("bs-panel","div",this.el);var u=n.getElementByClassName("get-updates-form","div",this.panelEl);if(this.panelEl&&u){this.panel=new p.BSPanel(this.panelEl,{underlay:"roundedShadow"});this.formWidget=new p.GetUpdatesForm(u,t);if(this.formWidget&&this.formWidget.successfulSubmissionEvent){this.formWidget.successfulSubmissionEvent.subscribe(function(A){this.setFlipTitle(d);ngbsMetricsTracker._getUpdates=ngbsMetricsTracker._getUpdates||{};if(!ngbsMetricsTracker._getUpdates.track){ngbsMetricsTracker._getUpdates.toolDescriptor=this.formWidget.state||i;if(m===a){if(this.formWidget.emailBox.checked){ngbsMetricsTracker.trackMacroData("brochuresMailedAndEmailedConfirm");dartTracker.trackEvent("eopt",ngbsMetricsTracker.getNameplateForBrochures(),1,ngbsMetricsTracker.getBrandType(),ngbsMetricsTracker.revealNameplate());dartTracker.trackEventsEfficient("eopt");}else{ngbsMetricsTracker.trackMacroData("brochuresMailedConfirm");dartTracker.trackEvent("br",ngbsMetricsTracker.getNameplateForBrochures(),1,ngbsMetricsTracker.getBrandType(),ngbsMetricsTracker.revealNameplate());dartTracker.trackEventsEfficient("br");}}else{if(m===e){ngbsMetricsTracker.trackMacroData("getUpdatesThankYou");dartTracker.trackEvent("up",ngbsMetricsTracker.getNameplateForBrochures(),1,ngbsMetricsTracker.getBrandType(),ngbsMetricsTracker.revealNameplate());dartTracker.trackEventsEfficient("up");}}ngbsMetricsTracker._getUpdates.track=true;}},this,true);}if(this.formWidget&&this.formWidget.fieldValidationErrorEvent){this.formWidget.fieldValidationErrorEvent.subscribe(function(A){if(m===a&&_widgets.context.SelectedContext.get("make").toLowerCase()==="ford"){ngbsMetricsTracker.trackMacroData("brochuresMailedContactError");}});}var r=_widgets.context.SelectedContext.get("getUpdatesFlip.params")||{};if(r&&r.guflip&&r.guflip===o){var y=r.gutitle||"";var v=r.gumode||"";if(this.formWidget){var x=r.sourceid;var w=r.campaignid;this.setNGPParams(x,w);}g.onDOMReady(function(){this.launchFlip(y,v);},null,this);}}if(this.panelEl){n.Dom.getElementByClassName("container-close",null,this.panelEl,function(A){g.on(A,"click",function(B){l=false;j.get("get-updates-flip").style.display="none";if(j.get("yui_change-model")){j.get("yui_change-model").style.display="block";}this.closeLightbox();if(this.formWidget){if(this.formWidget.stateSelection){this.formWidget.hideStateSelection();}ngbsMetricsTracker._getUpdates=ngbsMetricsTracker._getUpdates||{};if(!ngbsMetricsTracker._getUpdates.track){if(m!==a){ngbsMetricsTracker._getUpdates.toolDescriptor=this.formWidget.state||i;ngbsMetricsTracker.trackMicroData("getUpdatesClose");ngbsMetricsTracker._getUpdates.track=true;}}else{if(m!==a){ngbsMetricsTracker._getUpdates.toolDescriptor=this.formWidget.state||i;ngbsMetricsTracker.trackMicroData("getUpdatesCloseSuccess");ngbsMetricsTracker._getUpdates.track=true;}}}},null,this);},this);}YAHOO.Bubbling.addDefaultAction("get-updates-link",n.Actions.newHandler(function(A,B){window.scrollTo(0,0);this.launch(A,B);return true;},this));if(_widgets.context.SelectedContext.enabledGetUpdatesFlipEvent){_widgets.context.SelectedContext.enabledGetUpdatesFlipEvent.subscribe(this.hideOverlays,this,true);}};c.extend(p.GetUpdatesFlip,YAHOO.util.Element,{initAttributes:function(q){p.GetUpdatesFlip.superclass.initAttributes.apply(this,arguments);}});var f=p.GetUpdatesFlip.prototype;f.launch=function(r,s){var x="";var w="";if(r&&r.getAttribute&&r.getAttribute("guparameters")){var u=r.getAttribute("guparameters");var v=n.getArgumentMap(u)||{};x=v.gutitle||"";w=v.gumode||"";}var q=function(A){var B;var z=_widgets.context.SelectedContext.get("make");var y=j.getAncestorBy(A,function(E){var C=false;var D;if(E.id){for(D in h[z]){if(h[z].hasOwnProperty(D)&&D===E.id){C=true;break;}}}return C;});if(y){B=h[z][y.id];}return B;};var t=q(r);this.setNGPParams(t);this.launchFlip(x,w);};f.launchFlip=function(s,r){s=s||e;r=r||i;if(!l){l=true;if(this.panel){if(j.get("yui_change-model")){j.get("yui_change-model").style.display="none";j.get("yui_menu_change-model").style.visibility="hidden";}this.openLightbox();j.get("get-updates-flip").style.display="block";j.addClass("submission-confirmation","hide");j.removeClass("get-updates-wrapper","hide");this.setFlipTitle(s);this.panel.center();this.panel.show();this.refreshFlip();if(this.formWidget&&this.formWidget.updateForm){this.formWidget.updateForm(r,s);}if(s===a){ngbsMetricsTracker.trackMacroData("brochuresMailedContact");m=a;}else{if(s===e){ngbsMetricsTracker.trackMacroData("getUpdatesInfo");m=e;}}ngbsMetricsTracker._getUpdates={};ngbsMetricsTracker._getUpdates.track=false;var q=j.get("f:get-updates-first-name");if(!j.hasClass(q,"focus")){j.addClass(q,"focus");}q.focus();}}_widgets.context.SelectedContext.enabledGetUpdatesFlipEvent.fire();};f.openLightbox=function(){};f.closeLightbox=function(){};f.setFlipTitle=function(q){if(this.panel){this.panel.setPanelHeader(q);}};f.refreshFlip=function(){if(this.formWidget&&this.formWidget.refreshForm){this.formWidget.refreshForm();}if(this.panelEl){n.Dom.getElementByClassName("bd","div",this.el).scrollTop=0;}};f.setNGPParams=function(s,t){var r=_widgets.context.SelectedContext.get("make");var q="";if(s){q=b+s;}if(!t){t=k[r];}if(this.formWidget){this.formWidget._sourceid=q;this.formWidget._campaignid=t;}};f.hideOverlays=function(){try{if(td_site&&td_site.page&&td_site.page.nav&&td_site.page.nav.extClose){td_site.page.nav.extClose();}}catch(q){}};}());
ngbs.widget("axz-price-update",function(b,c){c.on("click",".container-close",function(){c.css("display","none");});var a=td_site.pricing.getPlanTypeDisplay();c.find(".PlanType").html(a);if(td_site.pricing.shouldShowMessage()){c.css({display:"none",visibility:"visible"});td_site.pricing.setMessageShown();}});
(function(){function a(f,g){var e=document.getElementsByTagName("head")[0]||document.documentElement;var d=document.createElement("script");d.async=true;d.src=f;var c=false;d.onload=d.onreadystatechange=function(){if(!c&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){c=true;if(g&&typeof g==="function"){g.call(null);}d.onload=d.onreadystatechange=null;if(e&&d.parentNode){e.removeChild(d);}}};e.insertBefore(d,e.firstChild);}function b(){var d=YAHOO.util.Cookie;var f=d.get("worldApp");var e;if(f===null){var i=Math.floor(Math.random()*10000);d.set("worldApp",i,{path:"/"});var c=_widgets.context.SelectedContext.get("urlPath");var h=_widgets.context.SelectedContext.get("xmlUrlPagename");var j=_widgets.context.SelectedContext.get("xmlUrlOverride");if(c===h){e=j;}else{e=s.pageName;}var g=__params.baseURL;runInterceptRules(i.toString(),e,g);}}_instances.bsLoader.initCompleteEvent.subscribe(function(){var c=_widgets.context.SelectedContext.get("activateWorldApp");if(c==="true"){var d=_widgets.context.SelectedContext.get("worldAPjs");a(d+"/js/intercept.js",function(){b();});}});}());
