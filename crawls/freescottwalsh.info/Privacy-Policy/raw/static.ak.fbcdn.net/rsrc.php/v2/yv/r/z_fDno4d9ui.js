/*1357526937,178142497*/

if (self.CavalryLogger) { CavalryLogger.start_js(["L+Vx6"]); }

__d("legacy:css",["CSS"],function(a,b,c,d){a.CSS=b('CSS');},3);
__d("legacy:data-store",["DataStore"],function(a,b,c,d){a.DataStore=a.DataStore||b('DataStore');},3);
function EmuController(a,b){this.impression=b;this.containerId=a;DataStore.set($(a),'emuController',this);return this;}copyProperties(EmuController,{fromContainer:function(a){var b=ge(a);if(!b)return null;return DataStore.get(b,'emuController');},getEventClass:function(a){return "emuEvent"+String(a).trim();}});copyProperties(EmuController.prototype,{EVENT_HANDLER_PATH:'/ajax/emu/end.php',CLICK:1,FAN:"fad_fan",FOLLOW:"fad_follow",event:function(a,b,c,d){var e={eid:this.impression,f:0,ui:this.containerId,en:a,a:1};if(b)e.ed=JSON.stringify(b);if(!d)d=emptyFunction;var f=new AsyncRequest().setURI(this.EVENT_HANDLER_PATH).setData(e).setErrorHandler(d);if(c)f.setHandler(c);f.send();},redirect:function(){var a={eid:this.impression,f:0,ui:this.containerId,en:this.CLICK,a:0,sig:Math.floor(Math.random()*65535)+65536},b=new URI(this.EVENT_HANDLER_PATH);b.setQueryData(a);goURI(b);}});
__d("AdblockDetector",[],function(a,b,c,d,e,f){var g='data-adblock-hash',h={},i=0;function j(k,l){var m=k.getAttribute(g);if(!m){m=++i;k.setAttribute(g,m);}else if(h[m]){clearTimeout(h[m]);h[m]=null;}h[m]=setTimeout(function(){h[m]=null;if(!k.offsetHeight){var n=k,o=document.getElementsByTagName('body')[0];while(n&&n!==o){if(n.style.display==='none'||n.style.height==='0px'||n.style.height===0||n.style.height==='0'||n.childNodes.length===0)return;n=n.parentNode;}if(n===o)l&&l(k);}},3000);}f.assertUnblocked=j;});
__d("EagleEye",["Arbiter","Env","OnloadEvent","isInIframe"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Env'),i=b('OnloadEvent'),j=b('isInIframe'),k=h.eagleEyeConfig||{},l='_e_',m=(window.name||'').toString();if(m.length==7&&m.substr(0,3)==l){m=m.substr(3);}else{m=k.seed;if(!j())window.name=l+m;}var n=(window.location.protocol=='https:'&&document.cookie.match(/\bcsm=1/))?'; secure':'',o=l+m+'_',p=new Date(Date.now()+604800000).toGMTString(),q=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1'),r='; expires='+p+';path=/; domain='+q+n,s=0,t,u=k.sessionStorage&&a.sessionStorage,v=document.cookie.length,w=false,x=Date.now();function y(ca){return o+(s++)+'='+encodeURIComponent(ca)+r;}function z(){var ca=[],da=false,ea=0,fa=0;this.isEmpty=function(){return !ca.length;};this.enqueue=function(ga,ha){if(ha){ca.unshift(ga);}else ca.push(ga);};this.dequeue=function(){ca.shift();};this.peek=function(){return ca[0];};this.clear=function(ga){v=Math.min(v,document.cookie.length);if(!w&&(new Date()-x>60000))w=true;var ha=!ga&&(document.cookie.search(l)>=0),ia=!!h.cookie_header_limit,ja=h.cookie_count_limit||19,ka=h.cookie_header_limit||3950,la=ja-5,ma=ka-1000;while(!this.isEmpty()){var na=y(this.peek());if(ia&&(na.length>ka||(w&&na.length+v>ka))){this.dequeue();continue;}if((ha||ia)&&((document.cookie.length+na.length>ka)||(document.cookie.split(';').length>ja)))break;document.cookie=na;ha=true;this.dequeue();}var oa=Date.now();if(ga||!da&&ha&&((fa>0)&&(Math.min(10*Math.pow(2,fa-1),60000)+ea<oa))&&g.query(i.ONLOAD)&&(!this.isEmpty()||(document.cookie.length>ma)||(document.cookie.split(';').length>la))){var pa=new Image(),qa=this,ra=h.tracking_domain||'';da=true;pa.onload=function ua(){da=false;fa=0;qa.clear();};pa.onerror=pa.onabort=function ua(){da=false;ea=Date.now();fa++;};var sa=h.fb_isb?'&fb_isb='+h.fb_isb:'',ta='&__user='+h.user;pa.src=ra+'/ajax/nectar.php?asyncSignal='+(Math.floor(Math.random()*10000)+1)+sa+ta+'&'+(!ga?'':'s=')+oa;}};}t=new z();if(u){var aa=function(){var ca=0,da=ca;function ea(){var ha=sessionStorage.getItem('_e_ids');if(ha){var ia=(ha+'').split(';');if(ia.length==2){ca=parseInt(ia[0],10);da=parseInt(ia[1],10);}}}function fa(){var ha=ca+';'+da;sessionStorage.setItem('_e_ids',ha);}function ga(ha){return '_e_'+((ha!==undefined)?ha:ca++);}this.isEmpty=function(){return da===ca;};this.enqueue=function(ha,ia){var ja=ia?ga(--da):ga();sessionStorage.setItem(ja,ha);fa();};this.dequeue=function(){this.isEmpty();sessionStorage.removeItem(ga(da));da++;fa();};this.peek=function(){var ha=sessionStorage.getItem(ga(da));return ha?(ha+''):ha;};this.clear=t.clear;ea();};t=new aa();}var ba={log:function(ca,da,ea){if(h.no_cookies)return;var fa=[m,Date.now(),ca].concat(da);fa.push(fa.length);function ga(){var ha=JSON.stringify(fa);try{t.enqueue(ha,!!ea);t.clear(!!ea);}catch(ia){if(u&&(ia.code===1000)){t=new z();u=false;ga();}}}ga();},getSessionID:function(){return m;}};a.EagleEye=e.exports=ba;},3);
__d("AdblockDetectorLogging",["AdblockDetector","EagleEye"],function(a,b,c,d,e,f){var g=b('AdblockDetector'),h=b('EagleEye');function i(j){g.assertUnblocked(j,h.log.bind(h,'ads',{event:'ads_blocked'}));}f.assertUnblocked=i;});
__d("legacy:ChannelConstants",["ChannelConstants"],function(a,b,c,d){a.ChannelConstants=b('ChannelConstants');},3);
__d("ChatConfig",["ChatConfigInitialData","copyProperties"],function(a,b,c,d,e,f){var g=b('ChatConfigInitialData'),h=b('copyProperties'),i={},j={get:function(k,l){return k in i?i[k]:l;},set:function(k){if(arguments.length>1){var l={};l[k]=arguments[1];k=l;}h(i,k);},getDebugInfo:function(){return i;}};j.set(g);e.exports=j;});
__d("FBDesktopDetect",["UserAgent"],function(a,b,c,d,e,f){var g=b('UserAgent'),h='facebook.desktopplugin',i={mimeType:'application/x-facebook-desktop-1',isPluginInstalled:function(){if(g.osx())return false;var j=null;if(a.ActiveXObject){try{j=new a.ActiveXObject(h);if(j)return true;}catch(k){}}else if(a.navigator&&a.navigator.plugins){a.navigator.plugins.refresh(false);for(var l=0,m=a.navigator.plugins.length;l<m;l++){j=a.navigator.plugins[l];if(j.length&&j[0].type===this.mimeType)return true;}}return false;}};e.exports=i;});
__d("NavigationMessage",[],function(a,b,c,d,e,f){var g={NAVIGATION_BEGIN:'NavigationMessage/navigationBegin',NAVIGATION_SELECT:'NavigationMessage/navigationSelect',NAVIGATION_FIRST_RESPONSE:'NavigationMessage/navigationFirstResponse',NAVIGATION_COMPLETED:'NavigationMessage/navigationCompleted',NAVIGATION_FAILED:'NavigationMessage/navigationFailed',NAVIGATION_COUNT_UPDATE:'NavigationMessage/navigationCount',NAVIGATION_FAVORITE_UPDATE:'NavigationMessage/navigationFavoriteUpdate',NAVIGATION_ITEM_REMOVED:'NavigationMessage/navigationItemRemoved',NAVIGATION_ITEM_HIDDEN:'NavigationMessage/navigationItemHidden',INTERNAL_LOADING_BEGIN:'NavigationMessage/internalLoadingBegin',INTERNAL_LOADING_COMPLETED:'NavigationMessage/internalLoadingCompleted'};e.exports=g;});
__d("legacy:ui-side-nav-message",["NavigationMessage"],function(a,b,c,d){a.NavigationMessage=b('NavigationMessage');},3);
__d("legacy:Style",["Style"],function(a,b,c,d){a.Style=b('Style');},3);
__d("LinkshimAsyncLink",["$","AsyncSignal"],function(a,b,c,d,e,f){var g=b('$'),h=b('AsyncSignal'),i={swap:function(j,k){j.href=k;},referrer_log:function(j,k,l){var m=g('meta_referrer');m.content="origin";i.swap(j,k);(function(){m.content="default";new h(l,{}).send();}).defer(100);}};e.exports=i;});
__d("legacy:dom-asynclinkshim",["LinkshimAsyncLink"],function(a,b,c,d){a.LinkshimAsyncLink=b('LinkshimAsyncLink');},3);
__d("DOMControl",["DataStore","$","copyProperties"],function(a,b,c,d,e,f){var g=b('DataStore'),h=b('$'),i=b('copyProperties');function j(k){this.root=h(k);this.updating=false;g.set(k,'DOMControl',this);}i(j.prototype,{getRoot:function(){return this.root;},beginUpdate:function(){if(this.updating)return false;this.updating=true;return true;},endUpdate:function(){this.updating=false;},update:function(k){if(!this.beginUpdate())return this;this.onupdate(k);this.endUpdate();},onupdate:function(k){}});j.getInstance=function(k){return g.get(k,'DOMControl');};e.exports=j;});
__d("Input",["CSS","DOMQuery","DOMControl"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOMQuery'),i=b('DOMControl'),j=function(l){var m=l.getAttribute('maxlength');if(m&&m>0)d(['enforceMaxLength'],function(n){n(l,m);});},k={isEmpty:function(l){return !(/\S/).test(l.value||'')||g.hasClass(l,'DOMControl_placeholder');},getValue:function(l){return k.isEmpty(l)?'':l.value;},setValue:function(l,m){g.removeClass(l,'DOMControl_placeholder');l.value=m||'';j(l);var n=i.getInstance(l);n&&n.resetHeight&&n.resetHeight();},setPlaceholder:function(l,m){l.setAttribute('aria-label',m);l.setAttribute('placeholder',m);if(l==document.activeElement)return;if(k.isEmpty(l)){g.conditionClass(l,'DOMControl_placeholder',m);l.value=m||'';}},reset:function(l){var m=l!==document.activeElement?(l.getAttribute('placeholder')||''):'';l.value=m;g.conditionClass(l,'DOMControl_placeholder',m);l.style.height='';},setSubmitOnEnter:function(l,m){g.conditionClass(l,'enter_submit',m);},getSubmitOnEnter:function(l){return g.hasClass(l,'enter_submit');},setMaxLength:function(l,m){if(m>0){l.setAttribute('maxlength',m);j(l);}else l.removeAttribute('maxlength');}};e.exports=k;});
__d("Form",["Event","AsyncRequest","AsyncResponse","CSS","DOM","DOMPosition","DOMQuery","DataStore","Env","Input","Parent","URI","createArrayFrom","trackReferrer"],function(a,b,c,d,e,f){var g=b('Event'),h=b('AsyncRequest'),i=b('AsyncResponse'),j=b('CSS'),k=b('DOM'),l=b('DOMPosition'),m=b('DOMQuery'),n=b('DataStore'),o=b('Env'),p=b('Input'),q=b('Parent'),r=b('URI'),s=b('createArrayFrom'),t=b('trackReferrer'),u='FileList' in window,v='FormData' in window;function w(y){var z={};r.implodeQuery(y).split('&').forEach(function(aa){if(aa){var ba=/^([^=]*)(?:=(.*))?$/.exec(aa),ca=r.decodeComponent(ba[1]),da=ba[2]?r.decodeComponent(ba[2]):null;z[ca]=da;}});return z;}var x={getInputs:function(y){y=y||document;return [].concat(s(m.scry(y,'input')),s(m.scry(y,'select')),s(m.scry(y,'textarea')),s(m.scry(y,'button')));},getSelectValue:function(y){return y.options[y.selectedIndex].value;},setSelectValue:function(y,z){for(var aa=0;aa<y.options.length;++aa)if(y.options[aa].value==z){y.selectedIndex=aa;break;}},getRadioValue:function(y){for(var z=0;z<y.length;z++)if(y[z].checked)return y[z].value;return null;},getElements:function(y){return s(y.tagName=='FORM'?y.elements:x.getInputs(y));},getAttribute:function(y,z){return (y.getAttributeNode(z)||{}).value||null;},setDisabled:function(y,z){x.getElements(y).forEach(function(aa){if(aa.disabled!==undefined){var ba=n.get(aa,'origDisabledState');if(z){if(ba===undefined)n.set(aa,'origDisabledState',aa.disabled);aa.disabled=z;}else if(ba!==true)aa.disabled=false;}});},bootstrap:function(y,z){var aa=(x.getAttribute(y,'method')||'GET').toUpperCase();z=q.byTag(z,'button')||z;var ba=q.byClass(z,'stat_elem')||y;if(j.hasClass(ba,'async_saving'))return;if(z&&(z.form!==y||(z.nodeName!='INPUT'&&z.nodeName!='BUTTON')||z.type!='submit')){var ca=m.scry(y,'.enter_submit_target')[0];ca&&(z=ca);}var da=x.serialize(y,z);x.setDisabled(y,true);var ea=x.getAttribute(y,'ajaxify')||x.getAttribute(y,'action');t(y,ea);var fa=new h(ea);fa.setData(da).setNectarModuleDataSafe(y).setReadOnly(aa=='GET').setMethod(aa).setRelativeTo(y).setStatusElement(ba).setInitialHandler(x.setDisabled.curry(y,false)).setHandler(function(ga){g.fire(y,'success',{response:ga});}).setErrorHandler(function(ga){if(g.fire(y,'error',{response:ga})!==false)i.defaultErrorHandler(ga);}).setFinallyHandler(x.setDisabled.curry(y,false)).send();},forEachValue:function(y,z,aa){x.getElements(y).forEach(function(ba){if(ba.name&&!ba.disabled&&ba.type!=='submit')if(!ba.type||((ba.type==='radio'||ba.type==='checkbox')&&ba.checked)||ba.type==='text'||ba.type==='password'||ba.type==='hidden'||ba.nodeName==='TEXTAREA'){aa(ba.type,ba.name,p.getValue(ba));}else if(ba.nodeName==='SELECT'){for(var ca=0,da=ba.options.length;ca<da;ca++){var ea=ba.options[ca];if(ea.selected)aa('select',ba.name,ea.value);}}else if(u&&ba.type==='file'){var fa=ba.files;for(var ga=0;ga<fa.length;ga++)aa('file',ba.name,fa.item(ga));}});if(z&&z.name&&z.type==='submit'&&m.contains(y,z)&&m.isNodeOfType(z,['input','button']))aa('submit',z.name,z.value);},createFormData:function(y,z){if(!v)return null;var aa=new FormData();if(y)if(m.isNode(y)){x.forEachValue(y,z,function(da,ea,fa){aa.append(ea,fa);});}else{var ba=w(y);for(var ca in ba)aa.append(ca,ba[ca]);}return aa;},serialize:function(y,z){var aa={};x.forEachValue(y,z,function(ba,ca,da){if(ba==='file')return;x._serializeHelper(aa,ca,da);});return x._serializeFix(aa);},_serializeHelper:function(y,z,aa){var ba=Object.prototype.hasOwnProperty,ca=/([^\]]+)\[([^\]]*)\](.*)/.exec(z);if(ca){if(!y[ca[1]]||!ba.call(y,ca[1])){var da;y[ca[1]]=da={};if(y[ca[1]]!==da)return;}var ea=0;if(ca[2]===''){while(y[ca[1]][ea]!==undefined)ea++;}else ea=ca[2];if(ca[3]===''){y[ca[1]][ea]=aa;}else x._serializeHelper(y[ca[1]],ea.concat(ca[3]),aa);}else y[z]=aa;},_serializeFix:function(y){for(var z in y)if(y[z] instanceof Object)y[z]=x._serializeFix(y[z]);var aa=Object.keys(y);if(aa.length===0||aa.some(isNaN))return y;aa.sort(function(da,ea){return da-ea;});var ba=0,ca=aa.every(function(da){return +da===ba++;});if(ca)return aa.map(function(da){return y[da];});return y;},post:function(y,z,aa){var ba=document.createElement('form');ba.action=y.toString();ba.method='POST';ba.style.display='none';if(aa)ba.target=aa;z.fb_dtsg=o.fb_dtsg;x.createHiddenInputs(z,ba);m.getRootElement().appendChild(ba);ba.submit();return false;},createHiddenInputs:function(y,z,aa,ba){aa=aa||{};var ca=w(y);for(var da in ca){if(ca[da]===null)continue;if(aa[da]&&ba){aa[da].value=ca[da];}else{var ea=k.create('input',{type:'hidden',name:da,value:ca[da]});aa[da]=ea;z.appendChild(ea);}}return aa;},getFirstElement:function(y,z){z=z||['input[type="text"]','textarea','input[type="password"]','input[type="button"]','input[type="submit"]'];var aa=[];for(var ba=0;ba<z.length;ba++){aa=m.scry(y,z[ba]);for(var ca=0;ca<aa.length;ca++){var da=aa[ca];try{var fa=l.getElementPosition(da);if(fa.y>0&&fa.x>0)return da;}catch(ea){}}}return null;},focusFirst:function(y){var z=x.getFirstElement(y);if(z){z.focus();return true;}return false;}};e.exports=x;});
__d("legacy:dom-form",["Form"],function(a,b,c,d){a.Form=b('Form');},3);
__d("legacy:dom-html",["HTML"],function(a,b,c,d){a.HTML=b('HTML');},3);
function show(){for(var a=0;a<arguments.length;a++){var b=ge(arguments[a]);if(b&&b.style)b.style.display='';}return false;}function hide(){for(var a=0;a<arguments.length;a++){var b=ge(arguments[a]);if(b&&b.style)b.style.display='none';}return false;}function shown(a){a=ge(a);return (a.style.display!='none'&&!(a.style.display==''&&a.offsetWidth==0));}function toggle(){for(var a=0;a<arguments.length;a++){var b=$(arguments[a]);b.style.display=Style.get(b,"display")=='block'?'none':'block';}return false;}function toggleDisplayNone(){for(var a=0;a<arguments.length;a++){var b=$(arguments[a]);if(shown(b)){hide(b);}else show(b);}return false;}
__d("legacy:event-extensions",["Event"],function(a,b,c,d){a.Event=b('Event');},3);
__d("OnloadHooks",["Arbiter","ErrorUtils","InitialJSLoader","OnloadEvent"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ErrorUtils'),i=b('InitialJSLoader'),j=b('OnloadEvent');function k(){var r=a.CavalryLogger;if(!window.loaded&&r)r.getInstance().setTimeStamp('t_prehooks');n('onloadhooks');if(!window.loaded&&r)r.getInstance().setTimeStamp('t_hooks');window.loaded=true;g.inform('uipage_onload',true,g.BEHAVIOR_STATE);}function l(){n('onafterloadhooks');window.afterloaded=true;}function m(r,s){return h.applyWithGuard(r,null,null,function(t){t.event_type=s;t.category='runhook';});}function n(r){var s=(r=='onbeforeleavehooks')||(r=='onbeforeunloadhooks');do{var t=window[r];if(!t)break;if(!s)window[r]=null;for(var u=0;u<t.length;u++){var v=m(t[u],r);if(s&&v)return v;}}while(!s&&window[r]);}function o(){if(!window.loaded){window.loaded=true;n('onloadhooks');}if(!window.afterloaded){window.afterloaded=true;n('onafterloadhooks');}}function p(){g.registerCallback(k,[j.ONLOAD_DOMCONTENT_CALLBACK,i.INITIAL_JS_READY]);g.registerCallback(l,[j.ONLOAD_DOMCONTENT_CALLBACK,j.ONLOAD_CALLBACK,i.INITIAL_JS_READY]);g.subscribe(j.ONBEFOREUNLOAD,function(r,s){s.warn=n('onbeforeleavehooks')||n('onbeforeunloadhooks');if(!s.warn){window.loaded=false;window.afterloaded=false;}},g.SUBSCRIBE_NEW);g.subscribe(j.ONUNLOAD,function(r,s){n('onunloadhooks');},g.SUBSCRIBE_NEW);}var q={_onloadHook:k,_onafterloadHook:l,runHook:m,runHooks:n,keepWindowSetAsLoaded:o};p();a.OnloadHooks=e.exports=q;});
__d("legacy:onload-action",["OnloadHooks"],function(a,b,c,d){var e=b('OnloadHooks');a._onloadHook=e._onloadHook;a._onafterloadHook=e._onafterloadHook;a.runHook=e.runHook;a.runHooks=e.runHooks;a.keep_window_set_as_loaded=e.keepWindowSetAsLoaded;},3);
__d("Vector",["Event","DOMDimensions","DOMPosition","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('DOMDimensions'),i=b('DOMPosition'),j=b('copyProperties');function k(l,m,n){j(this,{x:parseFloat(l),y:parseFloat(m),domain:n||'pure'});}j(k.prototype,{toString:function(){return '('+this.x+', '+this.y+')';},add:function(l,m){if(arguments.length==1){if(l.domain!='pure')l=l.convertTo(this.domain);return this.add(l.x,l.y);}var n=parseFloat(l),o=parseFloat(m);return new k(this.x+n,this.y+o,this.domain);},mul:function(l,m){if(typeof m=="undefined")m=l;return new k(this.x*l,this.y*m,this.domain);},sub:function(l,m){if(arguments.length==1){return this.add(l.mul(-1));}else return this.add(-l,-m);},distanceTo:function(l){return this.sub(l).magnitude();},magnitude:function(){return Math.sqrt((this.x*this.x)+(this.y*this.y));},convertTo:function(l){if(l!='pure'&&l!='viewport'&&l!='document')return new k(0,0);if(l==this.domain)return new k(this.x,this.y,this.domain);if(l=='pure')return new k(this.x,this.y);if(this.domain=='pure')return new k(0,0);var m=k.getScrollPosition('document'),n=this.x,o=this.y;if(this.domain=='document'){n-=m.x;o-=m.y;}else{n+=m.x;o+=m.y;}return new k(n,o,l);},setElementPosition:function(l){var m=this.convertTo('document');l.style.left=parseInt(m.x)+'px';l.style.top=parseInt(m.y)+'px';return this;},setElementDimensions:function(l){return this.setElementWidth(l).setElementHeight(l);},setElementWidth:function(l){l.style.width=parseInt(this.x,10)+'px';return this;},setElementHeight:function(l){l.style.height=parseInt(this.y,10)+'px';return this;},scrollElementBy:function(l){if(l==document.body){window.scrollBy(this.x,this.y);}else{l.scrollLeft+=this.x;l.scrollTop+=this.y;}return this;}});j(k,{getEventPosition:function(l,m){m=m||'document';var n=g.getPosition(l),o=new k(n.x,n.y,'document');return o.convertTo(m);},getScrollPosition:function(l){l=l||'document';var m=i.getScrollPosition();return new k(m.x,m.y,'document').convertTo(l);},getElementPosition:function(l,m){m=m||'document';var n=i.getElementPosition(l);return new k(n.x,n.y,'viewport').convertTo(m);},getElementDimensions:function(l){var m=h.getElementDimensions(l);return new k(m.width,m.height);},getViewportDimensions:function(){var l=h.getViewportDimensions();return new k(l.width,l.height,'viewport');},getDocumentDimensions:function(l){var m=h.getDocumentDimensions(l);return new k(m.width,m.height,'document');},deserialize:function(l){var m=l.split(',');return new k(m[0],m[1]);}});e.exports=k;});
__d("legacy:vector",["Vector"],function(a,b,c,d){a.Vector2=b('Vector');},3);
__d("legacy:ua",["UserAgent"],function(a,b,c,d){a.ua=b('UserAgent');},3);
__d("Animation",["CSS","DOM","Style","UserAgent"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('Style'),j=b('UserAgent');function k(l){if(a==this){return new k(l);}else{this.obj=l;this._reset_state();this.queue=[];this.last_attr=null;}}k.resolution=20;k.offset=0;k.prototype._reset_state=function(){this.state={attrs:{},duration:500};};k.prototype.stop=function(){this._reset_state();this.queue=[];return this;};k.prototype._build_container=function(){if(this.container_div){this._refresh_container();return;}if(this.obj.firstChild&&this.obj.firstChild.__animation_refs){this.container_div=this.obj.firstChild;this.container_div.__animation_refs++;this._refresh_container();return;}var l=document.createElement('div');l.style.padding='0px';l.style.margin='0px';l.style.border='0px';l.__animation_refs=1;var m=this.obj.childNodes;while(m.length)l.appendChild(m[0]);this.obj.appendChild(l);this._orig_overflow=this.obj.style.overflow;this.obj.style.overflow='hidden';this.container_div=l;this._refresh_container();};k.prototype._refresh_container=function(){this.container_div.style.height='auto';this.container_div.style.width='auto';this.container_div.style.height=this.container_div.offsetHeight+'px';this.container_div.style.width=this.container_div.offsetWidth+'px';};k.prototype._destroy_container=function(){if(!this.container_div)return;if(!--this.container_div.__animation_refs){var l=this.container_div.childNodes;while(l.length)this.obj.appendChild(l[0]);this.obj.removeChild(this.container_div);}this.container_div=null;this.obj.style.overflow=this._orig_overflow;};k.ATTR_TO=1;k.ATTR_BY=2;k.ATTR_FROM=3;k.prototype._attr=function(l,m,n){l=l.replace(/-[a-z]/gi,function(p){return p.substring(1).toUpperCase();});var o=false;switch(l){case 'background':this._attr('backgroundColor',m,n);return this;case 'margin':m=k.parse_group(m);this._attr('marginBottom',m[0],n);this._attr('marginLeft',m[1],n);this._attr('marginRight',m[2],n);this._attr('marginTop',m[3],n);return this;case 'padding':m=k.parse_group(m);this._attr('paddingBottom',m[0],n);this._attr('paddingLeft',m[1],n);this._attr('paddingRight',m[2],n);this._attr('paddingTop',m[3],n);return this;case 'backgroundColor':case 'borderColor':case 'color':m=k.parse_color(m);break;case 'opacity':m=parseFloat(m,10);break;case 'height':case 'width':if(m=='auto'){o=true;}else m=parseInt(m,10);break;case 'borderWidth':case 'lineHeight':case 'fontSize':case 'marginBottom':case 'marginLeft':case 'marginRight':case 'marginTop':case 'paddingBottom':case 'paddingLeft':case 'paddingRight':case 'paddingTop':case 'bottom':case 'left':case 'right':case 'top':case 'scrollTop':case 'scrollLeft':m=parseInt(m,10);break;default:throw new Error(l+' is not a supported attribute!');}if(this.state.attrs[l]===undefined)this.state.attrs[l]={};if(o)this.state.attrs[l].auto=true;switch(n){case k.ATTR_FROM:this.state.attrs[l].start=m;break;case k.ATTR_BY:this.state.attrs[l].by=true;case k.ATTR_TO:this.state.attrs[l].value=m;break;}};k._get_box_width=function(l){var m=parseInt(i.get(l,'paddingLeft'),10),n=parseInt(i.get(l,'paddingRight'),10),o=parseInt(i.get(l,'borderLeftWidth'),10),p=parseInt(i.get(l,'borderRightWidth'),10);return l.offsetWidth-(m?m:0)-(n?n:0)-(o?o:0)-(p?p:0);};k._get_box_height=function(l){var m=parseInt(i.get(l,'paddingTop'),10),n=parseInt(i.get(l,'paddingBottom'),10),o=parseInt(i.get(l,'borderTopWidth'),10),p=parseInt(i.get(l,'borderBottomWidth'),10);return l.offsetHeight-(m?m:0)-(n?n:0)-(o?o:0)-(p?p:0);};k.prototype.to=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_TO);}else{this._attr(l,m,k.ATTR_TO);this.last_attr=l;}return this;};k.prototype.by=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_BY);}else{this._attr(l,m,k.ATTR_BY);this.last_attr=l;}return this;};k.prototype.from=function(l,m){if(m===undefined){this._attr(this.last_attr,l,k.ATTR_FROM);}else{this._attr(l,m,k.ATTR_FROM);this.last_attr=l;}return this;};k.prototype.duration=function(l){this.state.duration=l?l:0;return this;};k.prototype.checkpoint=function(l,m){if(l===undefined)l=1;this.state.checkpoint=l;this.queue.push(this.state);this._reset_state();this.state.checkpointcb=m;return this;};k.prototype.blind=function(){this.state.blind=true;return this;};k.prototype.hide=function(){this.state.hide=true;return this;};k.prototype.show=function(){this.state.show=true;return this;};k.prototype.ease=function(l){this.state.ease=l;return this;};k.prototype.go=function(){var l=Date.now();this.queue.push(this.state);for(var m=0;m<this.queue.length;m++){this.queue[m].start=l-k.offset;if(this.queue[m].checkpoint)l+=this.queue[m].checkpoint*this.queue[m].duration;}k.push(this);return this;};k.prototype._show=function(){g.show(this.obj);};k.prototype._hide=function(){g.hide(this.obj);};k.prototype._frame=function(l){var m=true,n=false,o=false,p;function q(aa){return document.documentElement[aa]||document.body[aa];}for(var r=0;r<this.queue.length;r++){var s=this.queue[r];if(s.start>l){m=false;continue;}if(s.checkpointcb){this._callback(s.checkpointcb,l-s.start);s.checkpointcb=null;}if(s.started===undefined){if(s.show)this._show();for(var t in s.attrs){if(s.attrs[t].start!==undefined)continue;switch(t){case 'backgroundColor':case 'borderColor':case 'color':p=k.parse_color(i.get(this.obj,t=='borderColor'?'borderLeftColor':t));if(s.attrs[t].by){s.attrs[t].value[0]=Math.min(255,Math.max(0,s.attrs[t].value[0]+p[0]));s.attrs[t].value[1]=Math.min(255,Math.max(0,s.attrs[t].value[1]+p[1]));s.attrs[t].value[2]=Math.min(255,Math.max(0,s.attrs[t].value[2]+p[2]));}break;case 'opacity':p=i.getOpacity(this.obj);if(s.attrs[t].by)s.attrs[t].value=Math.min(1,Math.max(0,s.attrs[t].value+p));break;case 'height':p=k._get_box_height(this.obj);if(s.attrs[t].by)s.attrs[t].value+=p;break;case 'width':p=k._get_box_width(this.obj);if(s.attrs[t].by)s.attrs[t].value+=p;break;case 'scrollLeft':case 'scrollTop':p=(this.obj===document.body)?q(t):this.obj[t];if(s.attrs[t].by)s.attrs[t].value+=p;s['last'+t]=p;break;default:p=parseInt(i.get(this.obj,t),10)||0;if(s.attrs[t].by)s.attrs[t].value+=p;break;}s.attrs[t].start=p;}if((s.attrs.height&&s.attrs.height.auto)||(s.attrs.width&&s.attrs.width.auto)){if(j.firefox()<3)o=true;this._destroy_container();for(var t in {height:1,width:1,fontSize:1,borderLeftWidth:1,borderRightWidth:1,borderTopWidth:1,borderBottomWidth:1,paddingLeft:1,paddingRight:1,paddingTop:1,paddingBottom:1})if(s.attrs[t])this.obj.style[t]=s.attrs[t].value+(typeof s.attrs[t].value=='number'?'px':'');if(s.attrs.height&&s.attrs.height.auto)s.attrs.height.value=k._get_box_height(this.obj);if(s.attrs.width&&s.attrs.width.auto)s.attrs.width.value=k._get_box_width(this.obj);}s.started=true;if(s.blind)this._build_container();}var u=(l-s.start)/s.duration;if(u>=1){u=1;if(s.hide)this._hide();}else m=false;var v=s.ease?s.ease(u):u;if(!n&&u!=1&&s.blind)n=true;if(o&&this.obj.parentNode){var w=this.obj.parentNode,x=this.obj.nextSibling;w.removeChild(this.obj);}for(var t in s.attrs)switch(t){case 'backgroundColor':case 'borderColor':case 'color':if(s.attrs[t].start[3]!=s.attrs[t].value[3]){this.obj.style[t]='rgba('+k.calc_tween(v,s.attrs[t].start[0],s.attrs[t].value[0],true)+','+k.calc_tween(v,s.attrs[t].start[1],s.attrs[t].value[1],true)+','+k.calc_tween(v,s.attrs[t].start[2],s.attrs[t].value[2],true)+','+k.calc_tween(v,s.attrs[t].start[3],s.attrs[t].value[3],false)+')';}else this.obj.style[t]='rgb('+k.calc_tween(v,s.attrs[t].start[0],s.attrs[t].value[0],true)+','+k.calc_tween(v,s.attrs[t].start[1],s.attrs[t].value[1],true)+','+k.calc_tween(v,s.attrs[t].start[2],s.attrs[t].value[2],true)+')';break;case 'opacity':i.set(this.obj,'opacity',k.calc_tween(v,s.attrs[t].start,s.attrs[t].value));break;case 'height':case 'width':this.obj.style[t]=v==1&&s.attrs[t].auto?'auto':k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true)+'px';break;case 'scrollLeft':case 'scrollTop':var y=this.obj===document.body;p=y?q(t):this.obj[t];if(s['last'+t]!==p){delete s.attrs[t];}else{var z=k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true);if(!y){z=this.obj[t]=z;}else{if(t=='scrollLeft'){a.scrollTo(z,q('scrollTop'));}else a.scrollTo(q('scrollLeft'),z);z=q(t);}s['last'+t]=z;}break;default:this.obj.style[t]=k.calc_tween(v,s.attrs[t].start,s.attrs[t].value,true)+'px';break;}if(u==1){this.queue.splice(r--,1);this._callback(s.ondone,l-s.start-s.duration);}}if(o)w[x?'insertBefore':'appendChild'](this.obj,x);if(!n&&this.container_div)this._destroy_container();return !m;};k.prototype.ondone=function(l){this.state.ondone=l;return this;};k.prototype._callback=function(l,m){if(l){k.offset=m;l.call(this);k.offset=0;}};k.calc_tween=function(l,m,n,o){return (o?parseInt:parseFloat)((n-m)*l+m,10);};k.parse_color=function(l){var m=/^#([a-f0-9]{1,2})([a-f0-9]{1,2})([a-f0-9]{1,2})$/i.exec(l);if(m){return [parseInt(m[1].length==1?m[1]+m[1]:m[1],16),parseInt(m[2].length==1?m[2]+m[2]:m[2],16),parseInt(m[3].length==1?m[3]+m[3]:m[3],16),1];}else{var n=/^rgba? *\(([0-9]+), *([0-9]+), *([0-9]+)(?:, *([0-9\.]+))?\)$/.exec(l);if(n){return [parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),n[4]?parseFloat(n[4]):1];}else if(l=='transparent'){return [255,255,255,0];}else throw 'Named color attributes are not supported.';}};k.parse_group=function(l){l=l.trim().split(/ +/);if(l.length==4){return l;}else if(l.length==3){return [l[0],l[1],l[2],l[1]];}else if(l.length==2){return [l[0],l[1],l[0],l[1]];}else return [l[0],l[0],l[0],l[0]];};k.push=function(l){if(!k.active)k.active=[];k.active.push(l);if(k.active.length===1){if(!k.requestAnimationFrame){var m=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame;if(m)k.requestAnimationFrame=m.bind(a);}if(k.requestAnimationFrame){k.requestAnimationFrame(k._animate);}else k.timeout=setInterval(k._animate,k.resolution,false);}if(k.requestAnimationFrame)k._updateEndingTimer();k._animate(Date.now(),true);};k._updateEndingTimer=function(){if(!k.requestAnimationFrame)throw new Error('Ending timer only valid with requestAnimationFrame');var l=0;for(var m=0;m<k.active.length;m++){var n=k.active[m];for(var o=0;o<n.queue.length;o++){var p=n.queue[o].start+n.queue[o].duration;if(p>l)l=p;}}if(k.timeout){clearTimeout(k.timeout);delete k.timeout;}var q=Date.now();if(l>q)k.timeout=setTimeout(k._animate.shield(),l-q,false);};k._animate=function(l,m){var n=Date.now();for(var o=(m===true)?k.active.length-1:0;o<k.active.length;o++)try{if(!k.active[o]._frame(n))k.active.splice(o--,1);}catch(p){k.active.splice(o--,1);}if(k.active.length===0){if(k.timeout){if(k.requestAnimationFrame){clearTimeout(k.timeout);}else clearInterval(k.timeout);delete k.timeout;}}else if(k.requestAnimationFrame)k.requestAnimationFrame(k._animate);};k.ease={};k.ease.begin=function(l){return Math.sin(Math.PI/2*(l-1))+1;};k.ease.end=function(l){return Math.sin(.5*Math.PI*l);};k.ease.both=function(l){return .5*Math.sin(Math.PI*(l-.5))+.5;};k.prependInsert=function(l,m){k.insert(l,m,h.prependContent);};k.appendInsert=function(l,m){k.insert(l,m,h.appendContent);};k.insert=function(l,m,n){i.set(m,'opacity',0);n(l,m);new k(m).from('opacity',0).to('opacity',1).duration(400).go();};e.exports=k;});
__d("legacy:animation",["Animation"],function(a,b,c,d){a.animation=b('Animation');},3);
__d("Button",["Event","CSS","DataStore","DOM","Parent","emptyFunction"],function(a,b,c,d,e,f){var g=b('Event'),h=b('CSS'),i=b('DataStore'),j=b('DOM'),k=b('Parent'),l=b('emptyFunction'),m='uiButtonDisabled',n='uiButtonDepressed',o='button:blocker',p='href',q='ajaxify';function r(v,w){var x=i.get(v,o);if(w){if(x){x.remove();i.remove(v,o);}}else if(!x)i.set(v,o,g.listen(v,'click',l.thatReturnsFalse,g.Priority.URGENT));}function s(v){var w=k.byClass(v,'uiButton');if(!w)throw new Error('invalid use case');return w;}function t(v){return j.isNodeOfType(v,'a');}var u={getInputElement:function(v){v=s(v);if(t(v))throw new Error('invalid use case');return j.find(v,'input');},isEnabled:function(v){return !h.hasClass(s(v),m);},setEnabled:function(v,w){v=s(v);h.conditionClass(v,m,!w);if(t(v)){var x=v.href,y=v.getAttribute('ajaxify'),z=i.get(v,p,'#'),aa=i.get(v,q);if(w){if(!x)v.href=z;if(!y&&aa)v.setAttribute('ajaxify',aa);v.removeAttribute('tabIndex');}else{if(x&&x!==z)i.set(v,p,x);if(y&&y!==aa)i.set(v,q,y);v.removeAttribute('href');v.removeAttribute('ajaxify');v.setAttribute('tabIndex','-1');}r(v,w);}else{var ba=u.getInputElement(v);ba.disabled=!w;r(ba,w);}},setDepressed:function(v,w){h.conditionClass(s(v),n,w);},isDepressed:function(v){return h.hasClass(s(v),n);},setLabel:function(v,w){v=s(v);if(t(v)){var x=j.find(v,'span.uiButtonText');j.setContent(x,w);}else u.getInputElement(v).value=w;h.conditionClass(v,'uiButtonNoText',!w);},setIcon:function(v,w){if(w&&!j.isNode(w))return;v=s(v);var x=j.scry(v,'.img')[0];if(!w){x&&j.remove(x);return;}h.addClass(w,'customimg');if(x!=w)if(x){j.replace(x,w);}else j.prependContent(v,w);}};e.exports=u;});
__d("ContextualThing",["DOM","ge"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('ge'),i={register:function(j,k){j.setAttribute('data-ownerid',g.getID(k));},containsIncludingLayers:function(j,k){while(k){if(g.contains(j,k))return true;k=i.getContext(k);}return false;},getContext:function(j){var k;while(j){if(j.getAttribute&&(k=j.getAttribute('data-ownerid')))return h(k);j=j.parentNode;}return null;}};e.exports=i;});
__d("Locale",["Style"],function(a,b,c,d,e,f){var g=b('Style'),h,i={isRTL:function(){if(h===undefined)h=('rtl'===g.get(document.body,'direction'));return h;}};e.exports=i;});
__d("getOverlayZIndex",["Style"],function(a,b,c,d,e,f){var g=b('Style');function h(i,j){j=j||document.body;var k=[];while(i&&i!==j){k.push(i);i=i.parentNode;}if(i!==j)return 0;for(var l=k.length-1;l>=0;l--){var m=k[l];if(g.get(m,'position')!='static'){var n=parseInt(g.get(m,'z-index'),10);if(!isNaN(n))return n;}}return 0;}e.exports=h;});
__d("Dialog",["array-extensions","Event","Animation","Arbiter","AsyncRequest","Bootloader","Button","ContextualThing","CSS","DOM","Focus","Form","HTML","Keys","Locale","Parent","Run","Style","URI","UserAgent","Vector","bind","copyProperties","createArrayFrom","emptyFunction","getObjectValues","getOverlayZIndex","tx"],function(a,b,c,d,e,f){b('array-extensions');var g=b('Event'),h=b('Animation'),i=b('Arbiter'),j=b('AsyncRequest'),k=b('Bootloader'),l=b('Button'),m=b('ContextualThing'),n=b('CSS'),o=b('DOM'),p=b('Focus'),q=b('Form'),r=b('HTML'),s=b('Keys'),t=b('Locale'),u=b('Parent'),v=b('Run'),w=b('Style'),x=b('URI'),y=b('UserAgent'),z=b('Vector'),aa=b('bind'),ba=b('copyProperties'),ca=b('createArrayFrom'),da=b('emptyFunction'),ea=b('getObjectValues'),fa=b('getOverlayZIndex'),ga=b('tx'),ha=function(){var ja=document.body,ka=document.createElement('div'),la=document.createElement('div');ja.insertBefore(ka,ja.firstChild);ja.insertBefore(la,ja.firstChild);ka.style.position='fixed';ka.style.top='20px';var ma=ka.offsetTop!==la.offsetTop;ja.removeChild(ka);ja.removeChild(la);ha=bagof(ma);return ma;};function ia(ja){this._show_loading=true;this._auto_focus=true;this._submit_on_enter=false;this._fade_enabled=true;this._onload_handlers=[];this._top=125;this._uniqueID='dialog_'+ia._globalCount++;this._content=null;this._obj=null;this._popup=null;this._overlay=null;this._shim=null;this._causal_elem=null;this._previous_focus=null;this._buttons=[];this._buildDialog();if(ja)this._setFromModel(ja);ia._init();}ba(ia,{OK:{name:'ok',label:"Okay"},CANCEL:{name:'cancel',label:"Cancel",className:'inputaux'},CLOSE:{name:'close',label:"Close"},NEXT:{name:'next',label:"Next"},SAVE:{name:'save',label:"Save"},SUBMIT:{name:'submit',label:"Submit"},CONFIRM:{name:'confirm',label:"Confirm"},DELETE:{name:'delete',label:"Delete"},_globalCount:0,_bottoms:[0],max_bottom:0,_updateMaxBottom:function(){ia.max_bottom=Math.max.apply(Math,ia._bottoms);}});ba(ia,{OK_AND_CANCEL:[ia.OK,ia.CANCEL],_STANDARD_BUTTONS:[ia.OK,ia.CANCEL,ia.CLOSE,ia.SAVE,ia.SUBMIT,ia.CONFIRM,ia.DELETE],SIZE:{WIDE:555,STANDARD:445},_HALO_WIDTH:10,_BORDER_WIDTH:1,_PADDING_WIDTH:10,_PAGE_MARGIN:40,_stack:[],_isUsingCSSBorders:function(){return y.ie()<7;},newButton:function(ja,ka,la,ma){var na={name:ja,label:ka};if(la)na.className=la;if(ma)na.handler=ma;return na;},getCurrent:function(){var ja=ia._stack;return ja.length?ja[ja.length-1]:null;},hideCurrent:function(){var ja=ia.getCurrent();ja&&ja.hide();},bootstrap:function(ja,ka,la,ma,na,oa){ka=ka||{};ba(ka,new x(ja).getQueryData());ma=ma||(la?'GET':'POST');var pa=u.byClass(oa,'stat_elem')||oa;if(pa&&n.hasClass(pa,'async_saving'))return false;var qa=new j().setReadOnly(!!la).setMethod(ma).setRelativeTo(oa).setStatusElement(pa).setURI(ja).setNectarModuleDataSafe(oa).setData(ka),ra=new ia(na).setCausalElement(oa).setAsync(qa);ra.show();return false;},showFromModel:function(ja,ka){var la=new ia(ja).setCausalElement(ka).show();if(ja.hiding)la.hide();},_init:function(){this._init=da;v.onLeave(ia._tearDown.shield(null,false));i.subscribe('page_transition',ia._tearDown.shield(null,true));g.listen(document.documentElement,'keydown',function(event){if(g.getKeyCode(event)==s.ESC&&!event.getModifiers().any){if(ia._escape())event.kill();}else if(g.getKeyCode(event)==s.RETURN&&!event.getModifiers().any)if(ia._enter())event.kill();});g.listen(window,'resize',function(event){var ja=ia.getCurrent();ja&&ja._resetDialogObj();});},_findButton:function(ja,ka){if(ja)for(var la=0;la<ja.length;++la)if(ja[la].name==ka)return ja[la];return null;},_tearDown:function(ja){var ka=ia._stack.slice();for(var la=ka.length-1;la>=0;la--)if((ja&&!ka[la]._cross_transition)||(!ja&&!ka[la]._cross_quickling))ka[la].hide();},_escape:function(){var ja=ia.getCurrent();if(!ja)return false;var ka=ja._semi_modal,la=ja._buttons;if(!la.length&&!ka)return false;if(ka&&!la.length){ja.hide();return true;}var ma,na=ia._findButton(la,'cancel');if(ja._cancelHandler){ja.cancel();return true;}else if(na){ma=na;}else if(la.length==1){ma=la[0];}else return false;ja._handleButton(ma);return true;},_enter:function(){var ja=ia.getCurrent();if(!ja||!ja._submit_on_enter)return false;if(document.activeElement!=ja._frame)return false;var ka=ja._buttons;if(!ka)return false;ja._handleButton(ka[0]);return true;},call_or_eval:function(ja,ka,la){if(!ka)return undefined;la=la||{};if(typeof ka=='string'){var ma=Object.keys(la).join(', ');ka=(eval)('({f: function('+ma+') { '+ka+'}})').f;}return ka.apply(ja,ea(la));}});ba(ia.prototype,{_cross_quickling:false,_cross_transition:false,_loading:false,_showing:false,show:function(){this._showing=true;if(this._async_request){if(this._show_loading)this.showLoading();}else this._update();return this;},showLoading:function(){this._loading=true;n.addClass(this._frame,'dialog_loading_shown');this._renderDialog();return this;},hide:function(){if(!this._showing&&!this._loading)return this;this._showing=false;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}if(this._fade_enabled&&ia._stack.length<=1){this._fadeOut();}else this._hide();return this;},cancel:function(){if(!this._cancelHandler||this._cancelHandler()!==false)this.hide();},getRoot:function(){return this._obj;},getBody:function(){return o.scry(this._obj,'div.dialog_body')[0];},getButtonElement:function(ja){if(typeof ja=='string')ja=ia._findButton(this._buttons,ja);if(!ja||!ja.name)return null;var ka=o.scry(this._popup,'input'),la=function(ma){return ma.name==ja.name;};return ka.filter(la)[0]||null;},getContentNode:function(){return o.find(this._content,'div.dialog_content');},getFormData:function(){return q.serialize(this.getContentNode());},setAllowCrossPageTransition:function(ja){this._cross_transition=ja;return this;},setAllowCrossQuicklingNavigation:function(ja){this._cross_quickling=ja;return this;},setShowing:function(){this.show();return this;},setHiding:function(){this.hide();return this;},setTitle:function(ja){var ka=this._nodes.title,la=this._nodes.title_inner,ma=this._nodes.content;o.setContent(la,this._format(ja||''));n.conditionShow(ka,!!ja);n.conditionClass(ma,'dialog_content_titleless',!ja);return this;},setBody:function(ja){o.setContent(this._nodes.body,this._format(ja));return this;},setExtraData:function(ja){this._extra_data=ja;return this;},setReturnData:function(ja){this._return_data=ja;return this;},setShowLoading:function(ja){this._show_loading=ja;return this;},setFullBleed:function(ja){this._full_bleed=ja;this._updateWidth();n.conditionClass(this._obj,'full_bleed',ja);return this;},setCausalElement:function(ja){this._causal_elem=ja;return this;},setUserData:function(ja){this._user_data=ja;return this;},getUserData:function(){return this._user_data;},setAutohide:function(ja){if(ja){if(this._showing){this._autohide_timeout=setTimeout(this.hide.shield(this),ja);}else this._autohide=ja;}else{this._autohide=null;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}}return this;},setSummary:function(ja){var ka=this._nodes.summary;o.setContent(ka,this._format(ja||''));n.conditionShow(ka,!!ja);return this;},setButtons:function(ja){var ka,la;if(!(ja instanceof Array)){ka=ca(arguments);}else ka=ja;for(var ma=0;ma<ka.length;++ma)if(typeof ka[ma]=='string'){la=ia._findButton(ia._STANDARD_BUTTONS,ka[ma]);ka[ma]=la;}this._buttons=ka;var na=[];if(ka&&ka.length>0)for(var oa=0;oa<ka.length;oa++){la=ka[oa];var pa=o.create('input',{type:'button',name:la.name||'',value:la.label}),qa=o.create('label',{className:'uiButton uiButtonLarge uiButtonConfirm'},pa);if(la.className){la.className.split(/\s+/).forEach(function(sa){n.addClass(qa,sa);});if(n.hasClass(qa,'inputaux')){n.removeClass(qa,'inputaux');n.removeClass(qa,'uiButtonConfirm');}if(n.hasClass(qa,'uiButtonSpecial'))n.removeClass(qa,'uiButtonConfirm');}if(la.icon)o.prependContent(qa,o.create('img',{src:la.icon,className:'img mrs'}));if(la.disabled)l.setEnabled(qa,false);g.listen(pa,'click',this._handleButton.bind(this,la.name));for(var ra in la)if(ra.indexOf('data-')===0&&ra.length>5)pa.setAttribute(ra,la[ra]);na.push(qa);}o.setContent(this._nodes.buttons,na);this._updateButtonVisibility();return this;},setButtonsMessage:function(ja){o.setContent(this._nodes.button_message,this._format(ja||''));this._has_button_message=!!ja;this._updateButtonVisibility();return this;},_updateButtonVisibility:function(){var ja=this._buttons.length>0||this._has_button_message;n.conditionShow(this._nodes.button_wrapper,ja);n.conditionClass(this._obj,'omitDialogFooter',!ja);},setClickButtonOnEnter:function(ja,ka){this._clickOnEnterTarget=ja;if(!this._clickOnEnterListener)this._clickOnEnterListener=g.listen(this._nodes.body,'keypress',function(event){var la=event.getTarget();if(la&&la.id===this._clickOnEnterTarget)if(g.getKeyCode(event)==s.RETURN){this._handleButton(ka);event.kill();}return true;}.bind(this));return this;},setStackable:function(ja,ka){this._is_stackable=ja;this._shown_while_stacked=ja&&ka;return this;},setHandler:function(ja){this._handler=ja;return this;},setCancelHandler:function(ja){this._cancelHandler=ia.call_or_eval.bind(null,this,ja);return this;},setCloseHandler:function(ja){this._close_handler=ia.call_or_eval.bind(null,this,ja);return this;},clearHandler:function(){return this.setHandler(null);},setPostURI:function(ja,ka){if(ka===undefined)ka=true;if(ka){this.setHandler(this._submitForm.bind(this,'POST',ja));}else this.setHandler(function(){q.post(ja,this.getFormData());this.hide();}.bind(this));return this;},setGetURI:function(ja){this.setHandler(this._submitForm.bind(this,'GET',ja));return this;},setModal:function(ja){this._modal=ja;n.conditionClass(this._obj,'generic_dialog_modal',ja);return this;},setSemiModal:function(ja){if(ja){this.setModal(true);this._semiModalListener=g.listen(this._obj,'click',function(ka){if(!o.contains(this._popup,ka.getTarget()))this.hide();}.bind(this));}else this._semiModalListener&&this._semiModalListener.remove();this._semi_modal=ja;return this;},setWideDialog:function(ja){this._wide_dialog=ja;this._updateWidth();return this;},setContentWidth:function(ja){this._content_width=ja;this._updateWidth();return this;},setTitleLoading:function(ja){if(ja===undefined)ja=true;var ka=o.find(this._popup,'h2.dialog_title');if(ka)n.conditionClass(ka,'loading',ja);return this;},setSecure:function(ja){n.conditionClass(this._nodes.title,'secure',ja);return this;},setClassName:function(ja){ja.split(/\s+/).forEach(n.addClass.bind(n,this._obj));return this;},setFadeEnabled:function(ja){this._fade_enabled=ja;return this;},setFooter:function(ja){var ka=this._nodes.footer;o.setContent(ka,this._format(ja||''));n.conditionShow(ka,!!ja);return this;},setAutoFocus:function(ja){this._auto_focus=ja;return this;},setTop:function(ja){this._top=ja;this._resetDialogObj();return this;},onloadRegister:function(ja){ca(ja).forEach(function(ka){if(typeof ka=='string')ka=new Function(ka);this._onload_handlers.push(ka.bind(this));}.bind(this));return this;},setAsyncURL:function(ja){return this.setAsync(new j(ja));},setAsync:function(ja){var ka=function(sa){if(this._async_request!=ja)return;this._async_request=null;var ta=sa.getPayload(),ua=ta;if(this._loading)this._showing=true;if(typeof ua=='string'){this.setBody(ua);}else this._setFromModel(ua);this._update();}.bind(this),la=ja.getData();la.__d=1;ja.setData(la);var ma=ja.getHandler()||da;ja.setHandler(function(sa){ma(sa);ka(sa);});var na=ja,oa=na.getErrorHandler()||da,pa=na.getTransportErrorHandler()||da,qa=function(){this._async_request=null;this._loading=false;if(this._showing&&this._shown_while_stacked){this._update();}else this._hide(this._is_stackable);}.bind(this),ra=na.getServerDialogCancelHandler()||qa;na.setAllowCrossPageTransition(this._cross_transition).setErrorHandler(function(sa){qa();oa(sa);}).setTransportErrorHandler(function(sa){qa();pa(sa);}).setServerDialogCancelHandler(ra);ja.send();this._async_request=ja;if(this._showing)this.show();return this;},_format:function(ja){if(typeof ja=='string'){ja=r(ja);}else ja=r.replaceJSONWrapper(ja);if(ja instanceof r)ja.setDeferred(true);return ja;},_update:function(){if(!this._showing)return;if(this._autohide&&!this._async_request&&!this._autohide_timeout)this._autohide_timeout=setTimeout(aa(this,'hide'),this._autohide);n.removeClass(this._frame,'dialog_loading_shown');this._loading=false;this._renderDialog();this._runOnloads();this._previous_focus=document.activeElement;p.set(this._frame);},_runOnloads:function(){for(var ja=0;ja<this._onload_handlers.length;++ja)try{this._onload_handlers[ja]();}catch(ka){}this._onload_handlers=[];},_updateWidth:function(){var ja=2*ia._BORDER_WIDTH;if(ia._isUsingCSSBorders())ja+=2*ia._HALO_WIDTH;if(this._content_width){ja+=this._content_width;if(!this._full_bleed)ja+=2*ia._PADDING_WIDTH;}else if(this._wide_dialog){ja+=ia.SIZE.WIDE;}else ja+=ia.SIZE.STANDARD;this._popup.style.width=ja+'px';},_updateZIndex:function(){if(!this._hasSetZIndex&&this._causal_elem){var ja=fa(this._causal_elem),ka=this._causal_elem;while(!ja&&(ka=m.getContext(ka)))ja=fa(ka);this._hasSetZIndex=ja>(this._modal?400:200);w.set(this._obj,'z-index',this._hasSetZIndex?ja:'');}},_renderDialog:function(){this._updateZIndex();this._pushOntoStack();this._obj.style.height=(this._modal&&y.ie()<7)?z.getDocumentDimensions().y+'px':null;if(this._obj&&this._obj.style.display){this._obj.style.visibility='hidden';this._obj.style.display='';this.resetDialogPosition();this._obj.style.visibility='';this._obj.dialog=this;}else this.resetDialogPosition();clearInterval(this.active_hiding);this.active_hiding=setInterval(this._activeResize.bind(this),500);this._submit_on_enter=false;if(this._auto_focus){var ja=q.getFirstElement(this._content,['input[type="text"]','textarea','input[type="password"]']);if(ja){q.focusFirst.bind(this,this._content).defer();}else this._submit_on_enter=true;}var ka=z.getElementDimensions(this._content).y+z.getElementPosition(this._content).y;ia._bottoms.push(ka);this._bottom=ka;ia._updateMaxBottom();return this;},_buildDialog:function(){this._obj=o.create('div',{className:'generic_dialog',id:this._uniqueID});this._obj.style.display='none';o.appendContent(document.body,this._obj);if(!this._popup)this._popup=o.create('div',{className:'generic_dialog_popup'});this._obj.appendChild(this._popup);if(y.ie()<7&&!this._shim)k.loadModules(['IframeShim'],function(va){this._shim=new va(this._popup);});n.addClass(this._obj,'pop_dialog');if(t.isRTL())n.addClass(this._obj,'pop_dialog_rtl');var ja;if(ia._isUsingCSSBorders()){ja='<div class="pop_container_advanced">'+'<div class="pop_content" id="pop_content"></div>'+'</div>';}else ja='<div class="pop_container">'+'<div class="pop_verticalslab"></div>'+'<div class="pop_horizontalslab"></div>'+'<div class="pop_topleft"></div>'+'<div class="pop_topright"></div>'+'<div class="pop_bottomright"></div>'+'<div class="pop_bottomleft"></div>'+'<div class="pop_content pop_content_old" id="pop_content"></div>'+'</div>';o.setContent(this._popup,r(ja));var ka=o.find(this._popup,'div.pop_content');ka.setAttribute('tabIndex','0');ka.setAttribute('role','alertdialog');this._frame=this._content=ka;var la=o.create('div',{className:'dialog_loading'},"Loading..."),ma=o.create('span'),na=o.create('h2',{className:'dialog_title hidden_elem',id:'title_'+this._uniqueID},ma),oa=o.create('div',{className:'dialog_summary hidden_elem'}),pa=o.create('div',{className:'dialog_body'}),qa=o.create('div',{className:'rfloat mlm'}),ra=o.create('div',{className:'dialog_buttons_msg'}),sa=o.create('div',{className:'dialog_buttons clearfix hidden_elem'},[qa,ra]),ta=o.create('div',{className:'dialog_footer hidden_elem'}),ua=o.create('div',{className:'dialog_content'},[oa,pa,sa,ta]);this._nodes={summary:oa,body:pa,buttons:qa,button_message:ra,button_wrapper:sa,footer:ta,content:ua,title:na,title_inner:ma};o.setContent(this._frame,[na,ua,la]);},_updateShim:function(){return this._shim&&this._shim.show();},_activeResize:function(){if(this.last_offset_height!=this._content.offsetHeight){this.last_offset_height=this._content.offsetHeight;this.resetDialogPosition();}},resetDialogPosition:function(){if(!this._popup)return;this._resetDialogObj();this._updateShim();},_resetDialogObj:function(){var ja=2*ia._PAGE_MARGIN,ka=z.getViewportDimensions(),la=ka.x-ja,ma=ka.y-ja,na=2*ia._HALO_WIDTH,oa=z.getElementDimensions(this._content),pa=oa.x+na,qa=oa.y+na,ra=this._top,sa=la-pa,ta=ma-qa;if(ta<0){ra=ia._PAGE_MARGIN;}else if(ra>ta)ra=ia._PAGE_MARGIN+(Math.max(ta,0)/2);var ua=ha();if(!ua)ra+=z.getScrollPosition().y;w.set(this._popup,'marginTop',ra+'px');var va=ua&&(sa<0||ta<0);n.conditionClass(this._obj,'generic_dialog_fixed_overflow',va);n.conditionClass(document.documentElement,'generic_dialog_overflow_mode',va);},_fadeOut:function(ja){if(!this._popup)return;try{new h(this._obj).duration(0).checkpoint().to('opacity',0).hide().duration(250).ondone(this._hide.bind(this,ja)).go();}catch(ka){this._hide(ja);}},_hide:function(ja){if(this._obj)this._obj.style.display='none';n.removeClass(document.documentElement,'generic_dialog_overflow_mode');this._updateShim();clearInterval(this.active_hiding);if(this._bottom){var ka=ia._bottoms;ka.splice(ka.indexOf(this._bottom),1);ia._updateMaxBottom();}if(this._previous_focus&&document.activeElement&&o.contains(this._obj,document.activeElement))p.set(this._previous_focus);if(ja)return;this.destroy();},destroy:function(){this._popFromStack();if(this._obj){o.remove(this._obj);this._obj=null;this._shim&&this._shim.hide();this._shim=null;}this._clickOnEnterListener&&this._clickOnEnterListener.remove();if(this._close_handler)this._close_handler({return_data:this._return_data});},_handleButton:function(ja){if(typeof ja=='string')ja=ia._findButton(this._buttons,ja);var ka=ia.call_or_eval(ja,ja.handler);if(ka===false)return;if(ja.name=='cancel'){this.cancel();}else if(ia.call_or_eval(this,this._handler,{button:ja})!==false)this.hide();},_submitForm:function(ja,ka,la){var ma=this.getFormData();if(la)ma[la.name]=la.label;if(this._extra_data)ba(ma,this._extra_data);var na=new j().setURI(ka).setData(ma).setMethod(ja).setNectarModuleDataSafe(this._causal_elem).setReadOnly(ja=='GET');this.setAsync(na);return false;},_setFromModel:function(ja){var ka={};ba(ka,ja);for(var la in ka){if(la=='onloadRegister'){this.onloadRegister(ka[la]);continue;}var ma=this['set'+la.substr(0,1).toUpperCase()+la.substr(1)];ma.apply(this,ca(ka[la]));}},_updateBottom:function(){var ja=z.getElementDimensions(this._content).y+z.getElementPosition(this._content).y;ia._bottoms[ia._bottoms.length-1]=ja;ia._updateMaxBottom();},_pushOntoStack:function(){var ja=ia._stack;if(!ja.length)i.inform('layer_shown',{type:'Dialog'});ja.remove(this);ja.push(this);for(var ka=ja.length-2;ka>=0;ka--){var la=ja[ka];if(!la._is_stackable&&!la._async_request){la._hide();}else if(!la._shown_while_stacked)la._hide(true);}},_popFromStack:function(){var ja=ia._stack,ka=(ja[ja.length-1]===this);ja.remove(this);if(ja.length){if(ka)ja[ja.length-1].show();}else i.inform('layer_hidden',{type:'Dialog'});}});e.exports=ia;});
__d("legacy:dialog",["Dialog"],function(a,b,c,d){var e=b('Dialog');a.Dialog=e;},3);
__d("legacy:array-utils",["createArrayFrom","hasArrayNature"],function(a,b,c,d){a.$A=b('createArrayFrom');a.hasArrayNature=b('hasArrayNature');},3);
__d("throttle",[],function(a,b,c,d,e,f){function g(h,i,j,k){if(i==null)i=100;var l,m,n,o,p,q,r,s,t=0,u=Math.min(i,100);function v(){r&&h.call(j,l,m,n,o,p);r=false;}return function w(x,y,z,aa,ba){r=true;l=x;m=y;n=z;o=aa;p=ba;q=Date.now();var ca=s?i:u;if(q-t-i>ca){s=null;v();}if(!s){t=q;s=setTimeout(function(){s=null;v();},i,!k);}};}e.exports=g;});
__d("deferUntil",[],function(a,b,c,d,e,f){function g(h,i,j,k,l){var m=i();if(m){h(m);return null;}var n=Date.now(),o=setInterval(function(){m=i();if(!m){if(!j||(j<new Date()-n))return;l&&l();}clearInterval(o);h(m);},20,k);return o;}e.exports=g;});
__d("legacy:function-utils",["debounce","throttle","deferUntil"],function(a,b,c,d){a.debounce=b('debounce');a.throttle=b('throttle');a.defer_until=b('deferUntil');},3);
__d("computeRelativeURI",["URI","isEmpty"],function(a,b,c,d,e,f){var g=b('URI'),h=b('isEmpty');function i(k,l){if(!l)return k;if(l.charAt(0)=='/')return l;var m=k.split('/').slice(0,-1);m[0]!=='';l.split('/').forEach(function(n){if(!(n=='.'))if(n=='..'){if(m.length>1)m=m.slice(0,-1);}else m.push(n);});return m.join('/');}function j(k,l){var m=new g(),n=l;k=new g(k);l=new g(l);if(l.getDomain()&&!l.isFacebookURI())return n;var o=k,p=['Protocol','Domain','Port','Path','QueryData','Fragment'];p.forEach(function(q){var r=q=='Path'&&o===k;if(r)m.setPath(i(k.getPath(),l.getPath()));if(!h(l['get'+q]()))o=l;if(!r)m['set'+q](o['get'+q]());});return m;}e.exports=j;});
__d("goOrReplace",["URI","UserAgent"],function(a,b,c,d,e,f){var g=b('URI'),h=b('UserAgent');function i(j,k,l){var m=new g(k);if(j.pathname=='/'&&m.getPath()!='/'&&m.isQuicklingEnabled()){var n=j.search?{}:{q:''};m=new g().setPath('/').setQueryData(n).setFragment(m.getUnqualifiedURI()).toString();k=m.toString();}if(l&&!(h.ie()<8)){j.replace(k);}else if(j.href==k){j.reload();}else j.href=k;}e.exports=i;});
__d("HistoryManager",["Event","function-extensions","Cookie","Env","URI","UserAgent","copyProperties","emptyFunction","goOrReplace"],function(a,b,c,d,e,f){var g=b('Event');b('function-extensions');var h=b('Cookie'),i=b('Env'),j=b('URI'),k=b('UserAgent'),l=b('copyProperties'),m=b('emptyFunction'),n=b('goOrReplace'),o={_IFRAME_BASE_URI:'http://static.ak.facebook.com/common/history_manager.php',history:null,current:0,fragment:null,_setIframeSrcFragment:function(p){p=p.toString();var q=o.history.length-1;o.iframe.src=o._IFRAME_BASE_URI+'?|index='+q+'#'+encodeURIComponent(p);return o;},getIframeSrcFragment:function(){return decodeURIComponent(j(o.iframe.contentWindow.document.location.href).getFragment());},nextframe:function(p,q){if(q){o._setIframeSrcFragment(p);return;}if(p!==undefined){o.iframeQueue.push(p);}else{o.iframeQueue.splice(0,1);o.iframeTimeout=null;o.checkURI();}if(o.iframeQueue.length&&!o.iframeTimeout){var r=o.iframeQueue[0];o.iframeTimeout=setTimeout(function(){o._setIframeSrcFragment(r);},100,false);}},isInitialized:function(){return !!o._initialized;},init:function(){if(!i.ALLOW_TRANSITION_IN_IFRAME&&window!=window.top)return;if(o._initialized)return o;var p=j(),q=p.getFragment()||'';if(q.charAt(0)==='!'){q=q.substr(1);p.setFragment(q);}if(j.getRequestURI(false).getProtocol().toLowerCase()=='https')o._IFRAME_BASE_URI='https://s-static.ak.facebook.com/common/history_manager.php';l(o,{_initialized:true,fragment:q,orig_fragment:q,history:[p],callbacks:[],lastChanged:Date.now(),canonical:j('#'),fragmentTimeout:null,user:0,iframeTimeout:null,iframeQueue:[],enabled:true,debug:m});if(window.history&&history.pushState){this.lastURI=document.URL;window.history.replaceState(this.lastURI,null);g.listen(window,'popstate',function(r){if(r&&r.state&&o.lastURI!=r.state){o.lastURI=r.state;o.lastChanged=Date.now();o.notify(j(r.state).getUnqualifiedURI().toString());}}.bind(o));if(k.webkit()<534||k.chrome()<=13){setInterval(o.checkURI,42,false);o._updateRefererURI(this.lastURI);}return o;}o._updateRefererURI(j.getRequestURI(false));if(k.webkit()<500||k.firefox()<2){o.enabled=false;return o;}if(k.ie()<8){o.iframe=document.createElement('iframe');l(o.iframe.style,{width:'0',height:'0',frameborder:'0',left:'0',top:'0',position:'absolute'});o._setIframeSrcFragment(q);document.body.insertBefore(o.iframe,document.body.firstChild);}else if('onhashchange' in window){g.listen(window,'hashchange',function(){o.checkURI.bind(o).defer();});}else setInterval(o.checkURI,42,false);return o;},registerURIHandler:function(p){o.callbacks.push(p);return o;},setCanonicalLocation:function(p){o.canonical=j(p);return o;},notify:function(p){if(p==o.orig_fragment)p=o.canonical.getFragment();for(var q=0;q<o.callbacks.length;q++)try{if(o.callbacks[q](p))return true;}catch(r){}return false;},checkURI:function(){if(Date.now()-o.lastChanged<400)return;if(window.history&&history.pushState){var p=j(document.URL).removeQueryData('ref').toString(),q=j(o.lastURI).removeQueryData('ref').toString();if(p!=q){o.lastChanged=Date.now();o.lastURI=p;if(k.webkit()<534)o._updateRefererURI(p);o.notify(j(p).getUnqualifiedURI().toString());}return;}if(k.ie()<8&&o.iframeQueue.length)return;if(k.webkit()&&window.history.length==200){if(!o.warned)o.warned=true;return;}var r=j().getFragment();if(r.charAt(0)=='!')r=r.substr(1);if(k.ie()<8)r=o.getIframeSrcFragment();r=r.replace(/%23/g,'#');if(r!=o.fragment.replace(/%23/g,'#')){o.debug([r,' vs ',o.fragment,'whl: ',window.history.length,'QHL: ',o.history.length].join(' '));for(var s=o.history.length-1;s>=0;--s)if(o.history[s].getFragment().replace(/%23/g,'#')==r)break;++o.user;if(s>=0){o.go(s-o.current);}else o.go('#'+r);--o.user;}},_updateRefererURI:function(p){p=p.toString();if(p.charAt(0)!='/'&&p.indexOf('//')==-1)return;var q=new j(window.location);if(q.isFacebookURI()){var r=q.getPath()+window.location.search;}else var r='';var s=j(p).getQualifiedURI().setFragment(r).toString(),t=2048;if(s.length>t)s=s.substring(0,t)+'...';h.set('x-referer',s);},go:function(p,q,r){if(window.history&&history.pushState){q||typeof(p)=='number';var s=j(p).removeQueryData('ref').toString();o.lastChanged=Date.now();this.lastURI=s;if(r){window.history.replaceState(p,null,s);}else window.history.pushState(p,null,s);if(k.webkit()<534)o._updateRefererURI(p);return false;}o.debug('go: '+p);if(q===undefined)q=true;if(!o.enabled)if(!q)return false;if(typeof(p)=='number'){if(!p)return false;var t=p+o.current,u=Math.max(0,Math.min(o.history.length-1,t));o.current=u;t=o.history[u].getFragment()||o.orig_fragment;t=j(t).removeQueryData('ref').getUnqualifiedURI().toString();o.fragment=t;o.lastChanged=Date.now();if(k.ie()<8){if(o.fragmentTimeout)clearTimeout(o.fragmentTimeout);o._temporary_fragment=t;o.fragmentTimeout=setTimeout(function(){window.location.hash='#!'+t;delete o._temporary_fragment;},750,false);if(!o.user)o.nextframe(t,r);}else if(!o.user)n(window.location,window.location.href.split('#')[0]+'#!'+t,r);if(q)o.notify(t);o._updateRefererURI(t);return false;}p=j(p);if(p.getDomain()==j().getDomain())p=j('#'+p.getUnqualifiedURI());var v=o.history[o.current].getFragment(),w=p.getFragment();if(w==v||(v==o.orig_fragment&&w==o.canonical.getFragment())){if(q)o.notify(w);o._updateRefererURI(w);return false;}if(r)o.current--;var x=(o.history.length-o.current)-1;o.history.splice(o.current+1,x);o.history.push(j(p));return o.go(1,q,r);},getCurrentFragment:function(){var p=o._temporary_fragment!==undefined?o._temporary_fragment:j.getRequestURI(false).getFragment();return p==o.orig_fragment?o.canonical.getFragment():p;}};e.exports=o;});
__d("ViewportBounds",["Style","ge"],function(a,b,c,d,e,f){var g=b('Style'),h=b('ge'),i={top:[],right:[],bottom:[],left:[]};function j(n){return function(){var o=0;i[n].forEach(function(p){o=Math.max(o,p.getSize());});return o;};}function k(n){return function(o){return new l(n,o);};}function l(n,o){this.getSide=bagof(n);this.getSize=function(){return typeof o==='function'?o():o;};i[n].push(this);}l.prototype.remove=function(){i[this.getSide()].remove(this);};var m={getTop:j('top'),getRight:j('right'),getBottom:j('bottom'),getLeft:j('left'),addTop:k('top'),addRight:k('right'),addBottom:k('bottom'),addLeft:k('left')};m.addTop(function(){var n=h('blueBar');if(n&&g.isFixed(n))return h('blueBarHolder').offsetHeight;return 0;});e.exports=m;});
__d("isAsyncScrollQuery",["UserAgent"],function(a,b,c,d,e,f){var g=b('UserAgent'),h=null;function i(){if(h===null)h=g.osx()>=10.8&&g.webkit()>=536.25&&!g.chrome();return h;}e.exports=i;});
__d("DOMScroll",["Animation","Arbiter","DOM","DOMQuery","Vector","ViewportBounds","ge","isAsyncScrollQuery"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('DOM'),j=b('DOMQuery'),k=b('Vector'),l=b('ViewportBounds'),m=b('ge'),n=b('isAsyncScrollQuery'),o={SCROLL:'dom-scroll',getScrollState:function(){var p=k.getViewportDimensions(),q=k.getDocumentDimensions(),r=(q.x>p.x),s=(q.y>p.y);r+=0;s+=0;return new k(r,s);},_scrollbarSize:null,_initScrollbarSize:function(){var p=i.create('p');p.style.width='100%';p.style.height='200px';var q=i.create('div');q.style.position='absolute';q.style.top='0px';q.style.left='0px';q.style.visibility='hidden';q.style.width='200px';q.style.height='150px';q.style.overflow='hidden';q.appendChild(p);document.body.appendChild(q);var r=p.offsetWidth;q.style.overflow='scroll';var s=p.offsetWidth;if(r==s)s=q.clientWidth;document.body.removeChild(q);o._scrollbarSize=r-s;},getScrollbarSize:function(){if(o._scrollbarSize===null)o._initScrollbarSize();return o._scrollbarSize;},scrollTo:function(p,q,r,s,t){if(typeof q=='undefined'||q===true)q=750;if(n())q=false;if(!(p instanceof k)){var u=k.getScrollPosition().x,v=k.getElementPosition(m(p)).y;p=new k(u,v,'document');if(!s)p.y-=l.getTop()/(r?2:1);}if(r){p.y-=k.getViewportDimensions().y/2;}else if(s){p.y-=k.getViewportDimensions().y;p.y+=s;}p=p.convertTo('document');if(q){return new g(document.body).to('scrollTop',p.y).to('scrollLeft',p.x).ease(g.ease.end).duration(q).ondone(t).go();}else if(window.scrollTo){window.scrollTo(p.x,p.y);t&&t();}h.inform(o.SCROLL);},ensureVisible:function(p,q,r,s,t){if(r===undefined)r=10;p=m(p);if(q)p=j.find(p,q);var u=k.getScrollPosition().x,v=k.getScrollPosition().y,w=v+k.getViewportDimensions().y,x=k.getElementPosition(p).y,y=x+k.getElementDimensions(p).y;x-=l.getTop();x-=r;y+=r;if(x<v){o.scrollTo(new k(u,x,'document'),s,false,false,t);}else if(y>w)if(x-(y-w)<v){o.scrollTo(new k(u,x,'document'),s,false,false,t);}else o.scrollTo(new k(u,y,'document'),s,false,true,t);},scrollToTop:function(p){var q=k.getScrollPosition();o.scrollTo(new k(q.x,0,'document'),p!==false);}};e.exports=o;});
__d("LinkController",["Event","DataStore","Parent","trackReferrer"],function(a,b,c,d,e,f){var g=b('Event'),h=b('DataStore'),i=b('Parent'),j=b('trackReferrer'),k='LinkControllerHandler',l=[],m=[];function n(event){var r=i.byTag(event.getTarget(),'a'),s=r&&r.getAttribute('href',2);if(!s||r.rel||!p(s)||h.get(r,k))return;var t=g.listen(r,'click',function(u){if(s.charAt(s.length-1)=='#'){u.prevent();return;}j(r,s);o(r,u);});h.set(r,k,t);}function o(r,event){if(r.target||r.rel||event.getModifiers().any||(event.which&&event.which!=1))return;var s=l.concat(m);for(var t=0,u=s.length;t<u;t++)if(s[t](r,event)===false)return event.prevent();}function p(r){var s=r.match(/^(\w+):/);return !s||s[1].match(/^http/i);}var q={registerHandler:function(r){l.push(r);},registerFallbackHandler:function(r){m.push(r);}};g.listen(document.documentElement,'mousedown',n);g.listen(document.documentElement,'keydown',n);e.exports=q;});
__d("escapeJSQuotes",[],function(a,b,c,d,e,f){function g(h){if(typeof h=='undefined'||h==null||!h.valueOf())return '';return h.toString().replace(/\\/g,'\\\\').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/"/g,'\\x22').replace(/'/g,'\\\'').replace(/</g,'\\x3c').replace(/>/g,'\\x3e').replace(/&/g,'\\x26');}e.exports=g;});
__d("PageTransitions",["Event","Arbiter","Dialog","DOM","DOMScroll","Env","Form","HistoryManager","JSLogger","LinkController","OnloadHooks","htmlize","escapeJSQuotes","URI","UserAgent","Vector","areObjectsEqual","clickRefAction","computeRelativeURI","copyProperties","ge","goOrReplace","startsWith","tx","userAction"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('Dialog'),j=b('DOM'),k=b('DOMScroll'),l=b('Env'),m=b('Form'),n=b('HistoryManager'),o=b('JSLogger'),p=b('LinkController'),q=b('OnloadHooks'),r=b('htmlize'),s=b('escapeJSQuotes'),t=b('URI'),u=b('UserAgent'),v=b('Vector'),w=b('areObjectsEqual'),x=b('clickRefAction'),y=b('computeRelativeURI'),z=b('copyProperties'),aa=b('ge'),ba=b('goOrReplace'),ca=b('startsWith'),da=b('tx'),ea=b('userAction'),fa={};function ga(la,ma){fa[la.getUnqualifiedURI()]=ma;}function ha(la){return fa[la.getUnqualifiedURI()];}function ia(la){delete fa[la.getUnqualifiedURI()];}var ja={_transition_handlers:[],_scroll_locked:false,isInitialized:function(){return !!ja._initialized;},_init:function(){if(!l.ALLOW_TRANSITION_IN_IFRAME&&window!=window.top)return;if(ja._initialized)return ja;ja._initialized=true;var la=t.getRequestURI(false),ma=la.getUnqualifiedURI(),na=t(ma).setFragment(null),oa=ma.getFragment();if(oa.charAt(0)==='!'&&na.toString()===oa.substr(1))ma=na;z(ja,{_current_uri:ma,_most_recent_uri:ma,_next_uri:ma});var pa;if(ca(la.getFragment(),'/')){pa=la.getFragment();}else pa=ma;n.init().setCanonicalLocation('#'+pa).registerURIHandler(ja._historyManagerHandler);p.registerFallbackHandler(ja._rewriteHref);p.registerFallbackHandler(ja._onlinkclick);g.listen(document.documentElement,'submit',ja._onformsubmit);g.listen(window,'scroll',function(){if(!ja._scroll_locked)ga(ja._current_uri,v.getScrollPosition());});return ja;},registerHandler:function(la,ma){ja._init();ma=ma||5;if(!ja._transition_handlers[ma])ja._transition_handlers[ma]=[];ja._transition_handlers[ma].push(la);},getCurrentURI:function(la){if(!ja._current_uri&&!la)return new t(ja._most_recent_uri);return new t(ja._current_uri);},getMostRecentURI:function(){return new t(ja._most_recent_uri);},getNextURI:function(){return new t(ja._next_uri);},_rewriteHref:function(la){var ma=la.getAttribute('href'),na=y(ja._most_recent_uri.getQualifiedURI(),ma).toString();if(ma!=na)la.setAttribute('href',na);},_onlinkclick:function(la){ka.lookBusy(la);ja.go(la.getAttribute('href'));return false;},_onformsubmit:function(event){var la=event.getTarget();if(m.getAttribute(la,'rel')||m.getAttribute(la,'target'))return;x('form',la,event).set_namespace('page_transition');var ma=ea('page_transitions',la,event,{mode:'DEDUP'}).uai_fallback(null,'form'),na=a.ArbiterMonitor;if(na)na.initUA(ma,[la]);var oa=new t(m.getAttribute(la,'action')||''),pa=y(ja._most_recent_uri,oa);la.setAttribute('action',pa.toString());if((m.getAttribute(la,'method')||'GET').toUpperCase()==='GET'){ja.go(pa.addQueryData(m.serialize(la)));event.kill();}},go:function(la,ma){var na=new t(la).removeQueryData('quickling').getQualifiedURI();o.create('pagetransition').debug('go',{uri:na.toString()});ia(na);!ma&&x('uri',{href:na.toString()},null,'INDIRECT');ka.lookBusy();ja._loadPage(na,function(oa){if(oa){n.go(na.toString(),false,ma);}else ba(window.location,na,ma);});},_historyManagerHandler:function(la){if(la.charAt(0)!='/')return false;x('h',{href:la});ea('page_transitions').uai(null,'history_manager');ja._loadPage(new t(la),function(ma){if(!ma)ba(window.location,la,true);});return true;},_loadPage:function(la,ma){if(t(la).getFragment()&&w(t(la).setFragment(null).getQualifiedURI(),t(ja._current_uri).setFragment(null).getQualifiedURI())){ja._current_uri=ja._most_recent_uri=la;ja.restoreScrollPosition();ka.stopLookingBusy();return;}var na;if(ja._current_uri)na=ha(ja._current_uri);ja._current_uri=null;ja._next_uri=la;if(na)k.scrollTo(na,false);var oa=function(){ja._scroll_locked=true;var qa=ja._handleTransition(la);ma&&ma(qa);},pa=q.runHooks('onbeforeleavehooks');if(pa){ka.stopLookingBusy();ja._warnBeforeLeaving(pa,oa);}else oa();},_handleTransition:function(la){window.onbeforeleavehooks=undefined;ka.lookBusy();if(!la.isSameOrigin())return false;var ma=window.AsyncRequest&&window.AsyncRequest.getLastID();h.inform("pre_page_transition",{from:ja.getMostRecentURI(),to:la});for(var na=ja._transition_handlers.length-1;na>=0;--na){var oa=ja._transition_handlers[na];if(!oa)continue;for(var pa=oa.length-1;pa>=0;--pa)if(oa[pa](la)===true){var qa={sender:this,uri:la,id:ma};try{h.inform("page_transition",qa);}catch(ra){}return true;}else oa.splice(pa,1);}return false;},unifyURI:function(){ja._current_uri=ja._most_recent_uri=ja._next_uri;},transitionComplete:function(la){ja._executeCompletionCallback();ka.stopLookingBusy();ja.unifyURI();if(!la)ja.restoreScrollPosition();try{if(document.activeElement&&document.activeElement.nodeName==='A')document.activeElement.blur();}catch(ma){}},_executeCompletionCallback:function(){if(ja._completionCallback)ja._completionCallback();ja._completionCallback=null;},setCompletionCallback:function(la){ja._completionCallback=la;},rewriteCurrentURI:function(la,ma){ja.registerHandler(function(){if(la==ja.getMostRecentURI().getUnqualifiedURI().toString()){ja.transitionComplete();return true;}});ja.go(ma,true);},_warnBeforeLeaving:function(la,ma){new i().setTitle("Are you sure you want to leave this page?").setBody(r(la)).setButtons([{name:'leave_page',label:"Leave this Page",handler:ma},{name:'continue_editing',label:"Stay on this Page",className:'inputaux'}]).setModal(true).show();},restoreScrollPosition:function(){ja._scroll_locked=false;var la=ja._current_uri,ma=ha(la);if(ma){k.scrollTo(ma,false);return;}function na(qa){if(!qa)return null;var ra="a[name='"+s(qa)+"']";return j.scry(document.body,ra)[0]||aa(qa);}var oa=na(t(la).getFragment());if(oa){var pa=v.getElementPosition(oa);pa.x=0;k.scrollTo(pa);}}},ka=window._BusyUIManager||{_looking_busy:false,_original_cursors:[],lookBusy:function(la){if(la)ka._giveProgressCursor(la);if(ka._looking_busy)return;ka._looking_busy=true;ka._giveProgressCursor(document.documentElement);},stopLookingBusy:function(){if(!ka._looking_busy)return;ka._looking_busy=false;while(ka._original_cursors.length){var la=ka._original_cursors.pop(),ma=la[0],na=la[1];if(ma.style)ma.style.cursor=na||'';}},_giveProgressCursor:function(la){if(!u.webkit()){ka._original_cursors.push([la,la.style.cursor]);la.style.cursor='progress';}}};e.exports=ja;});
__d("legacy:page-transitions",["computeRelativeURI","HistoryManager","PageTransitions"],function(a,b,c,d){a.computeRelativeURI=b('computeRelativeURI');a.HistoryManager=a.HistoryManager||b('HistoryManager');a.PageTransitions=a.PageTransitions||b('PageTransitions');},3);
__d("FlipDirectionOnKeypress",["Event","DOM","Input","Style"],function(a,b,c,d,e,f){var g=b('Event'),h=b('DOM'),i=b('Input'),j=b('Style');g.listen(document.documentElement,'keyup',function(event){var k=event.getTarget();if(!h.isNodeOfType(k,['input','textarea']))return;if(h.isNodeOfType(k,'input')&&k.type=='password')return;if(k.getAttribute('data-prevent-auto-flip'))return;var l=i.getValue(k),m=(k.style&&k.style.direction);if(!m){var n=0,o=true;for(var p=0;p<l.length;p++){var q=l.charCodeAt(p);if(q>=48){if(o){o=false;n++;}if(q>=1470&&q<=1920){j.set(k,'direction','rtl');return;}if(n==5){j.set(k,'direction','ltr');return;}}else o=true;}}else if(l.length===0)j.set(k,'direction','');});});
__d("PlaceholderOnsubmitFormListener",["Event","Input"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Input');g.listen(document.documentElement,'submit',function(i){var j=i.getTarget().getElementsByTagName('*');for(var k=0;k<j.length;k++)if(j[k].getAttribute('placeholder')&&h.isEmpty(j[k]))h.setValue(j[k],'');});});
__d("AjaxPipeRequest",["Arbiter","AsyncRequest","BigPipe","CSS","DOM","Env","JSCC","ScriptPathState","URI","copyProperties","goOrReplace","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('BigPipe'),j=b('CSS'),k=b('DOM'),l=b('Env'),m=b('JSCC'),n=b('ScriptPathState'),o=b('URI'),p=b('copyProperties'),q=b('goOrReplace'),r=b('ge'),s;function t(w,x){var y=r(w);if(y){if(!x)y.style.minHeight='600px';for(var z in i.pageletIDs)if(w!==z&&k.contains(y,z)){g.inform('ajaxpipe/clear_pagelet',{pagelet_id:z});m.clearForPagelet(z);delete i.pageletIDs[z];}k.empty(y);}}function u(w,x){var y=r(w);if(y&&!x)y.style.minHeight='100px';}function v(w,x){this._uri=w;this._query_data=x;this._request=new h();this._canvas_id=null;this._allow_cross_page_transition=true;}p(v.prototype,{setCanvasId:function(w){this._canvas_id=w;return this;},setURI:function(w){this._uri=w;return this;},setData:function(w){this._query_data=w;return this;},getData:function(w){return this._query_data;},setAllowCrossPageTransition:function(w){this._allow_cross_page_transition=w;return this;},setAppend:function(w){this._append=w;return this;},send:function(){var w={ajaxpipe:1,ajaxpipe_token:l.ajaxpipe_token};p(w,n.getParams());n.reset();if(this._pageletCacheMiss)w.pcmiss=1;this._request.setOption('useIframeTransport',true).setURI(this._uri).setData(p(w,this._query_data)).setPreBootloadHandler(this._preBootloadHandler.bind(this)).setInitialHandler(this._onInitialResponse.bind(this)).setHandler(this._onResponse.bind(this)).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(this._allow_cross_page_transition);if(this._automatic){this._relevantRequest=s;}else s=this._request;this._request.send();return this;},_preBootloadFirstResponse:function(w){return false;},_fireDomContentCallback:function(){this._arbiter.inform('ajaxpipe/domcontent_callback',true,g.BEHAVIOR_STATE);},_fireOnloadCallback:function(){this._arbiter.inform('ajaxpipe/onload_callback',true,g.BEHAVIOR_STATE);},_isRelevant:function(w){return this._request==s||(this._automatic&&this._relevantRequest==s)||this._jsNonBlock;},_preBootloadHandler:function(w){var x=w.getPayload();if(!x||x.redirect||!this._isRelevant(w))return false;var y=false;if(w.is_first){!this._append&&!this._displayCallback&&t(this._canvas_id,this._constHeight);this._arbiter=new g();y=this._preBootloadFirstResponse(w);this.pipe=new i({arbiter:this._arbiter,rootNodeID:this._canvas_id,lid:this._request.lid,isAjax:true,domContentCallback:this._fireDomContentCallback.bind(this),onloadCallback:this._fireOnloadCallback.bind(this),domContentEvt:'ajaxpipe/domcontent_callback',onloadEvt:'ajaxpipe/onload_callback',jsNonBlock:this._jsNonBlock,automatic:this._automatic,displayCallback:this._displayCallback});}return y;},_redirect:function(w){if(w.redirect){if(w.force||!this.isPageActive(w.redirect)){var x=['ajaxpipe','ajaxpipe_token'].concat(this.getSanitizedParameters());q(window.location,o(w.redirect).removeQueryData(x),true);}else PageTransitions.go(w.redirect,true);return true;}else return false;},isPageActive:function(w){return true;},getSanitizedParameters:function(){return [];},_versionCheck:function(w){return true;},_onInitialResponse:function(w){var x=w.getPayload();if(!this._isRelevant(w))return false;if(!x)return true;if(this._redirect(x)||!this._versionCheck(x))return false;return true;},_processFirstResponse:function(w){var x=w.getPayload();if(r(this._canvas_id)&&x.canvas_class!==null)j.setClass(this._canvas_id,x.canvas_class);},setFirstResponseCallback:function(w){this._firstResponseCallback=w;return this;},setFirstResponseHandler:function(w){this._processFirstResponse=w;return this;},_onResponse:function(w){var x=w.payload;if(!this._isRelevant(w))return h.suppressOnloadToken;if(w.is_first){this._processFirstResponse(w);this._firstResponseCallback&&this._firstResponseCallback();x.provides=x.provides||[];x.provides.push('uipage_onload');if(this._append)x.append=this._canvas_id;}if(x){if('content' in x.content&&this._canvas_id!==null&&this._canvas_id!='content'){x.content[this._canvas_id]=x.content.content;delete x.content.content;}if(this._pageletCacheMiss)if(w.is_first){x.id=this._pageletCacheMiss.id;x.cacheable=true;x.cache_controller=this._pageletCacheMiss.cache_controller;x.cache_type=this._pageletCacheMiss.cache_type;x.key=this._pageletCacheMiss.key;}else x.cache_parent=this._pageletCacheMiss.id;this.pipe.onPageletArrive(x);}if(w.is_last)u(this._canvas_id,this._constHeight);return h.suppressOnloadToken;},setNectarModuleDataSafe:function(w){this._request.setNectarModuleDataSafe(w);return this;},setFinallyHandler:function(w){this._request.setFinallyHandler(w);return this;},setErrorHandler:function(w){this._request.setErrorHandler(w);return this;},abort:function(){this._request.abort();if(s==this._request)s=null;this._request=null;return this;},setJSNonBlock:function(w){this._jsNonBlock=w;return this;},setAutomatic:function(w){this._automatic=w;return this;},setDisplayCallback:function(w){this._displayCallback=w;return this;},setPageletCacheMiss:function(w){this._pageletCacheMiss=w;return this;},setConstHeight:function(w){this._constHeight=w;return this;},getAsyncRequest:function(){return this._request;}});p(v,{getCurrentRequest:function(){return s;},setCurrentRequest:function(w){s=w;}});e.exports=v;});
__d("AsyncRequestNectarLogging",["AsyncRequest","Nectar","copyProperties"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Nectar'),i=b('copyProperties');i(g.prototype,{setNectarModuleData:function(j){if(this.method=='POST')h.addModuleData(this.data,j);},setNectarImpressionId:function(){if(this.method=='POST')h.addImpressionID(this.data);}});});
__d("BehaviorsMixin",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(l){this._behavior=l;this._enabled=false;}g(h.prototype,{enable:function(){if(!this._enabled){this._enabled=true;this._behavior.enable();}},disable:function(){if(this._enabled){this._enabled=false;this._behavior.disable();}}});var i=1;function j(l){if(!l.__BEHAVIOR_ID)l.__BEHAVIOR_ID=i++;return l.__BEHAVIOR_ID;}var k={enableBehavior:function(l){if(!this._behaviors)this._behaviors={};var m=j(l);if(!this._behaviors[m])this._behaviors[m]=new h(new l(this));this._behaviors[m].enable();return this;},disableBehavior:function(l){if(this._behaviors){var m=j(l);if(this._behaviors[m])this._behaviors[m].disable();}return this;},enableBehaviors:function(l){l.forEach(this.enableBehavior.bind(this));return this;},destroyBehaviors:function(){if(this._behaviors){for(var l in this._behaviors)this._behaviors[l].disable();this._behaviors={};}}};e.exports=k;});
__d("ClickRefUtils",[],function(a,b,c,d,e,f){var g={get_intern_ref:function(h){if(!!h){var i={profile_minifeed:1,gb_content_and_toolbar:1,gb_muffin_area:1,ego:1,bookmarks_menu:1,jewelBoxNotif:1,jewelNotif:1,BeeperBox:1,navSearch:1};for(var j=h;j&&j!=document.body;j=j.parentNode){if(!j.id||typeof j.id!=='string')continue;if(j.id.substr(0,8)=='pagelet_')return j.id.substr(8);if(j.id.substr(0,8)=='box_app_')return j.id;if(i[j.id])return j.id;}}return '-';},get_href:function(h){var i=(h.getAttribute&&(h.getAttribute('ajaxify')||h.getAttribute('data-endpoint'))||h.action||h.href||h.name);return typeof i==='string'?i:null;},should_report:function(h,i){if(i=='FORCE')return true;if(i=='INDIRECT')return false;return h&&(g.get_href(h)||(h.getAttribute&&h.getAttribute('data-ft')));}};e.exports=g;});
__d("setUECookie",["Env"],function(a,b,c,d,e,f){var g=b('Env');function h(i){if(!g.no_cookies){var j=0;if(a.afterloaded){j=2;}else if(a.loaded)j=1;document.cookie="act="+encodeURIComponent(i+":"+j)+"; path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}}e.exports=h;});
__d("ClickRefLogger",["Arbiter","EagleEye","ClickRefUtils","collectDataAttributes","copyProperties","ge","setUECookie","$"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('EagleEye'),i=b('ClickRefUtils'),j=b('collectDataAttributes'),k=b('copyProperties'),l=b('ge'),m=b('setUECookie'),n=b('$');function o(q){if(!l('content'))return [0,0,0,0];var r=n('content'),s=a.Vector2?a.Vector2.getEventPosition(q):{x:0,y:0};return [s.x,s.y,r.offsetLeft,r.clientWidth];}function p(q,r,event,s){var t=(!a.ArbiterMonitor)?'r':'a',u=[0,0,0,0],v,w,x;if(!!event){v=event.type;if(v=='click'&&l('content'))u=o(event);var y=0;event.ctrlKey&&(y+=1);event.shiftKey&&(y+=2);event.altKey&&(y+=4);event.metaKey&&(y+=8);if(y)v+=y;}if(!!r)w=i.get_href(r);var z=[];if(a.ArbiterMonitor){x=a.ArbiterMonitor.getInternRef(r);z=a.ArbiterMonitor.getActFields();}var aa=j(!!event?(event.target||event.srcElement):r,['ft','gt']);k(aa.ft,s.ft||{});k(aa.gt,s.gt||{});if(typeof(aa.ft.ei)==='string')delete aa.ft.ei;var ba=[q._ue_ts,q._ue_count,w||'-',q._context,v||'-',x||i.get_intern_ref(r),t,a.URI?a.URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,aa].concat(u).concat(z);return ba;}g.subscribe("ClickRefAction/new",function(q,r){if(i.should_report(r.node,r.mode)){var s=p(r.cfa,r.node,r.event,r.extra_data);m(r.cfa.ue);h.log('act',s);if(window.chromePerfExtension)window.postMessage({clickRef:JSON.stringify(s)},window.location.origin);}});});
__d("DocumentTitle",["Arbiter"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=document.title,i=null,j=1500,k=[],l=0,m=null,n=false;function o(){if(k.length>0){if(!n){p(k[l].title);l=++l%k.length;}else q();}else{clearInterval(m);m=null;q();}}function p(s){document.title=s;n=true;}function q(){r.set(i||h,true);n=false;}var r={get:function(){return h;},set:function(s,t){document.title=s;if(!t){h=s;i=null;g.inform('update_title',s);}else i=s;},blink:function(s){var t={title:s};k.push(t);if(m===null)m=setInterval(o,j);return {stop:function(){var u=k.indexOf(t);if(u>=0){k.splice(u,1);if(l>u){l--;}else if(l==u&&l==k.length)l=0;}}};}};e.exports=r;});
__d("JSONPTransport",["ArbiterMixin","DOM","HTML","URI","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('DOM'),i=b('HTML'),j=b('URI'),k=b('copyProperties'),l={},m=2,n='jsonp',o='iframe';function p(r){delete l[r];}function q(r,s){this._type=r;this._uri=s;l[this.getID()]=this;}k(q,{respond:function(r,s,t){var u=l[r];if(u){if(!t)p(r);if(u._type==o)s=JSON.parse(JSON.stringify(s));a.async_callback(u.handleResponse.bind(u),'json')(s);}else if(a.logJSError&&!t)a.logJSError('ajax',{error:'UnexpectedJsonResponse',extra:{id:r,uri:(s.payload&&s.payload.uri)||''}});}});k(q.prototype,g,{getID:function(){return this._id||(this._id=m++);},hasFinished:function(){return !(this.getID() in l);},getRequestURI:function(){return j(this._uri).addQueryData({__a:1,__adt:this.getID()});},getTransportFrame:function(){if(this._iframe)return this._iframe;var r='transport_frame_'+this.getID(),s=i('<iframe class="hidden_elem" name="'+r+'" src="javascript:void(0)" />');return this._iframe=h.appendContent(document.body,s)[0];},send:function(){if(this._type===n){(function(){h.appendContent(document.body,h.create('script',{src:this.getRequestURI().toString(),type:'text/javascript'}));}).bind(this).defer();}else this.getTransportFrame().src=this.getRequestURI().toString();},handleResponse:function(r){this.inform('response',r);if(this.hasFinished())this._cleanup.bind(this).defer();},abort:function(){if(this._aborted)return;this._aborted=true;this._cleanup();p(this.getID());this.inform('abort');},_cleanup:function(){if(this._iframe){h.remove(this._iframe);this._iframe=null;}}});e.exports=q;});
__d("OnVisible",["Event","Arbiter","DOM","Run","Vector","ViewportBounds","coalesce","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('DOM'),j=b('Run'),k=b('Vector'),l=b('ViewportBounds'),m=b('coalesce'),n=b('copyProperties'),o=[],p,q=[],r,s,t,u;function v(){o.forEach(function(ba){ba.remove();});if(s){s.remove();r.remove();p.unsubscribe();s=r=p=null;}o.length=0;}function w(){if(!o.length){v();return;}q.length=0;t=k.getScrollPosition().y;u=k.getViewportDimensions().y;for(var ba=0;ba<o.length;++ba){var ca=o[ba];if(isNaN(ca.elementHeight))q.push(ba);ca.elementHeight=k.getElementDimensions(ca.element).y;ca.elementPos=k.getElementPosition(ca.element);}}function x(){var ba=l.getTop();for(var ca=o.length-1;ca>=0;--ca){var da=o[ca];if(!da.elementPos||da.removed){o.splice(ca,1);continue;}var ea=t+u+da.buffer;if(ea>da.elementPos.y){var fa=!da.strict||(t+ba-da.buffer<(da.elementPos.y+da.elementHeight));if(fa){da.remove();da.handler(q.indexOf(ca)!==-1);}}}}function y(){z();if(o.length)return;s=g.listen(window,'scroll',z);r=g.listen(window,'resize',z);p=h.subscribe('dom-scroll',z);}function z(){i.queryThenMutate(w,x,'OnVisible/positionCheck');}function aa(ba,ca,da,ea){this.element=ba;this.handler=ca;this.strict=da;this.buffer=m(ea,300);if(o.length===0)j.onLeave(v);y();o.push(this);}n(aa.prototype,{remove:function(){this.removed=true;},reset:function(){this.elementHeight=null;o.indexOf(this)===-1&&o.push(this);y();},setBuffer:function(ba){this.buffer=ba;z();},checkBuffer:function(){z();}});e.exports=aa;});
__d("PixelRatio",["Arbiter","Cookie","Run"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Cookie'),i=b('Run'),j='dpr',k,l;function m(){return window.devicePixelRatio||1;}function n(){h.set(j,m());}function o(){h.clear(j);}function p(){var r=m();if(r!==k){n();}else o();}var q={startDetecting:function(r){k=r||1;o();if(l)return;l=[g.subscribe('pre_page_transition',p)];i.onBeforeUnload(p);}};e.exports=q;});
__d("PostLoadJS",["Bootloader","Run","emptyFunction"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('Run'),i=b('emptyFunction');function j(l,m){h.onAfterLoad(function(){g.loadModules.call(g,[l],m);});}var k={loadAndRequire:function(l){j(l,i);},loadAndCall:function(l,m,n){j(l,function(o){o[m].apply(o,n);});}};e.exports=k;});
__d("UIPagelet",["AjaxPipeRequest","AsyncRequest","DOM","HTML","ScriptPathState","URI","copyProperties","emptyFunction","ge"],function(a,b,c,d,e,f){var g=b('AjaxPipeRequest'),h=b('AsyncRequest'),i=b('DOM'),j=b('HTML'),k=b('ScriptPathState'),l=b('URI'),m=b('copyProperties'),n=b('emptyFunction'),o=b('ge');function p(q,r,s,t){this._id=q||null;this._element=o(q||i.create('div'));this._src=r||null;this._context_data=s||{};this._data=t||{};this._handler=n;this._request=null;this._use_ajaxpipe=false;this._is_bundle=true;this._allow_cross_page_transition=false;this._append=false;return this;}p.loadFromEndpoint=function(q,r,s,t){t=t||{};var u='/ajax/pagelet/generic.php/';if(t.intern)u='/intern'+u;var v=new l((u+q).replace(/\/+/g,'/'));if(t.subdomain)v.setSubdomain(t.subdomain);var w=new p(r,v,s).setUseAjaxPipe(t.usePipe).setPageletCacheMiss(t.pageletCacheMiss).setBundleOption(q.substring(0,8)!='/intern/'&&t.bundle!==false).setAppend(t.append).setJSNonBlock(t.jsNonblock).setAutomatic(t.automatic).setDisplayCallback(t.displayCallback).setConstHeight(t.constHeight).setAllowCrossPageTransition(t.crossPage);t.handler&&w.setHandler(t.handler);w.go();return w;};m(p.prototype,{getElement:function(q){q=q||false;if(q)this._element=o(this._id);return this._element;},setHandler:function(q){this._handler=q;return this;},go:function(q,r){if(arguments.length>=2||typeof q=='string'){this._src=q;this._data=r||{};}else if(arguments.length==1)this._data=q;this.refresh();return this;},setAllowCrossPageTransition:function(q){this._allow_cross_page_transition=q;return this;},setBundleOption:function(q){this._is_bundle=q;return this;},refresh:function(q){var r=function(u){this._request=null;if(q&&this._id)this._element=o(this._id);var v=j(u.getPayload());if(this._append){i.appendContent(this._element,v);}else i.setContent(this._element,v);this._handler();}.bind(this);if(this._use_ajaxpipe){k.setIsUIPageletRequest(true);this._request=new g();this._request.setCanvasId(this._id).setAppend(this._append).setConstHeight(this._constHeight).setJSNonBlock(this._jsNonblock).setAutomatic(this._automatic).setPageletCacheMiss(this._pageletCacheMiss).setDisplayCallback(this._displayCallback);}else{var s=this._displayCallback;this._request=new h().setMethod('GET').setReadOnly(true).setOption('bundle',this._is_bundle).setHandler(function(u){if(s){s(r.curry(u));}else r(u);});}var t={};m(t,this._context_data);m(t,this._data);this._request.setURI(this._src).setAllowCrossPageTransition(this._allow_cross_page_transition).setData({data:JSON.stringify(t)}).send();return this;},cancel:function(){if(this._request)this._request.abort();},setUseAjaxPipe:function(q){this._use_ajaxpipe=!!q;return this;},setPageletCacheMiss:function(q){this._pageletCacheMiss=q;return this;},setAppend:function(q){this._append=!!q;return this;},setJSNonBlock:function(q){this._jsNonblock=!!q;return this;},setAutomatic:function(q){this._automatic=!!q;return this;},setDisplayCallback:function(q){this._displayCallback=q;return this;},setConstHeight:function(q){this._constHeight=!!q;return this;}});e.exports=p;});
__d("ScrollingPager",["Arbiter","copyProperties","CSS","OnVisible","UIPagelet","$","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('copyProperties'),i=b('CSS'),j=b('OnVisible'),k=b('UIPagelet'),l=b('$'),m=b('ge'),n={};function o(p,q,r,s){this.scroll_loader_id=p;this.pagelet_src=q;this.data=r;this.options=s||{};if(this.options.target_id){this.target_id=this.options.target_id;this.options.append=true;}else this.target_id=p;this.handler=null;}h(o,{REGISTERED:'ScrollingPager/registered',getInstance:function(p){return n[p];}});h(o.prototype,{setBuffer:function(p){this.options.buffer=p;this.onvisible&&this.onvisible.setBuffer(p);},getBuffer:function(){return this.options.buffer;},register:function(){this.onvisible=new j(l(this.scroll_loader_id),this.getHandler(),false,this.options.buffer,this.options);n[this.scroll_loader_id]=this;g.inform(o.REGISTERED,{id:this.scroll_loader_id});},getInstance:function(p){return n[p];},getHandler:function(){if(this.handler)return this.handler;function p(q){var r=m(this.scroll_loader_id);if(!r){this.onvisible.remove();return;}i.addClass(r.firstChild,'async_saving');var s=this.options.handler;this.options.handler=function(){g.inform('ScrollingPager/loadingComplete');s&&s.apply(null,arguments);};if(q)this.data.pager_fired_on_init=true;k.loadFromEndpoint(this.pagelet_src,this.target_id,this.data,this.options);}return p.bind(this);},setHandler:function(p){this.handler=p;},removeOnVisible:function(){this.onvisible.remove();},checkBuffer:function(){this.onvisible&&this.onvisible.checkBuffer();}});e.exports=o;});
__d("InputSelection",["DOM","Focus"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('Focus'),i={get:function(j){if(!document.selection)return {start:j.selectionStart,end:j.selectionEnd};var k=document.selection.createRange();if(k.parentElement()!==j)return {start:0,end:0};var l=j.value.length;if(g.isNodeOfType(j,'input')){return {start:-k.moveStart('character',-l),end:-k.moveEnd('character',-l)};}else{var m=k.duplicate();m.moveToElementText(j);m.setEndPoint('StartToEnd',k);var n=l-m.text.length;m.setEndPoint('StartToStart',k);return {start:l-m.text.length,end:n};}},set:function(j,k,l){if(typeof l=='undefined')l=k;if(document.selection){if(j.tagName=='TEXTAREA'){var m=(j.value.slice(0,k).match(/\r/g)||[]).length,n=(j.value.slice(k,l).match(/\r/g)||[]).length;k-=m;l-=m+n;}var o=j.createTextRange();o.collapse(true);o.moveStart('character',k);o.moveEnd('character',l-k);o.select();}else{j.selectionStart=k;j.selectionEnd=Math.min(l,j.value.length);h.set(j);}}};e.exports=i;});
__d("throttleAcrossTransitions",["throttle"],function(a,b,c,d,e,f){var g=b('throttle');function h(i,j,k){return g(i,j,k,true);}e.exports=h;});
__d("UserActionHistory",["Arbiter","ClickRefUtils","throttleAcrossTransitions"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ClickRefUtils'),i=b('throttleAcrossTransitions'),j={click:1,submit:1},k=false,l={log:[],len:0},m=i(function(){try{k._ua_log=JSON.stringify(l);}catch(p){k=false;}},1000);function n(){try{if(a.sessionStorage){k=a.sessionStorage;k._ua_log&&(l=JSON.parse(k._ua_log));}}catch(p){k=false;}l.log[l.len%10]={ts:Date.now(),path:'-',index:l.len,type:'init',iref:'-'};l.len++;g.subscribe("UserAction/new",function(q,r){var s=r.ua,t=r.node,event=r.event;if(!event||!(event.type in j))return;var u={path:window._script_path,type:event.type,ts:s._ue_ts,iref:h.get_intern_ref(t)||'-',index:l.len};l.log[l.len++%10]=u;k&&m();});}function o(){return l.log.sort(function(p,q){return (q.ts!=p.ts)?(q.ts-p.ts):(q.index-p.index);});}n();e.exports={getHistory:o};});
__d("UserActivity",["Arbiter","Event"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Event'),i=5000,j=500,k=-5,l=Date.now(),m=l,n={subscribeOnce:function(p){var q=n.subscribe(function(){n.unsubscribe(q);p();});},subscribe:function(p){return g.subscribe('useractivity/activity',p);},unsubscribe:function(p){p.unsubscribe();},isActive:function(p){return (new Date()-l<(p||i));},getLastInformTime:function(){return m;}};function o(event){l=Date.now();var p=l-m;if(p>j){m=l;g.inform('useractivity/activity',{event:event,idleness:p,last_inform:m});}else if(p<k)m=l;}h.listen(window,'scroll',o);h.listen(window,'focus',o);h.listen(document.documentElement,{DOMMouseScroll:o,mousewheel:o,keydown:o,mouseover:o,click:o});g.subscribe('Event/stop',function(p,q){o(q.event);});e.exports=n;});
__d("csx",[],function(a,b,c,d,e,f){function g(h){throw new Error('csx(...): Unexpected class selector transformation.');}e.exports=g;});
__d("enforceMaxLength",["Event","function-extensions","DOM","Input","InputSelection"],function(a,b,c,d,e,f){var g=b('Event');b('function-extensions');var h=b('DOM'),i=b('Input'),j=b('InputSelection'),k=function(n,o){var p=i.getValue(n),q=p.length,r=q-o;if(r>0){var s,t;try{s=j.get(n);t=s.end;}catch(u){s=null;t=0;}if(t>=r)q=t;var v=q-r;if(v&&(p.charCodeAt(v-1)&64512)===55296)v--;t=Math.min(t,v);i.setValue(n,p.slice(0,v)+p.slice(q));if(s)j.set(n,Math.min(s.start,t),t);}},l=function(event){var n=event.getTarget(),o=n.getAttribute&&parseInt(n.getAttribute('maxlength'),10);if(o>0&&h.isNodeOfType(n,['input','textarea']))k.bind(null,n,o).defer();},m='maxLength' in h.create('input')&&'maxLength' in h.create('textarea');if(!m)g.listen(document.documentElement,{keydown:l,paste:l});e.exports=k;});
__d("setTimeoutAcrossTransitions",[],function(a,b,c,d,e,f){function g(h,i){return setTimeout(h,i,false);}e.exports=g;});
__d("TimelineConstants",[],function(a,b,c,d,e,f){var g={DS_HEIGHT:'timeline-unit-height',DS_LOADED:'timeline-capsule-loaded',DS_SIDEORG:'timeline-unit-sideorg',DS_TAILBALANCE:'timeline-capsule-tailbalance',DS_COLUMN_HEIGHT_DIFFERENTIAL:'timeline-column-diff-height',FIXED_SIDE_LEFT:'left',FIXED_SIDE_RIGHT:'right',FIXED_SIDE_BOTH:'both',FIXED_SIDE_NONE:'none',SCROLL_TO_OFFSET:30,SUBSECTION_SCROLL_TO_OFFSET:90,SCRUBBER_DEFAULT_OFFSET:38,SECTION_LOADING:'TimelineConstants/sectionLoading',SECTION_LOADED:'TimelineConstants/sectionLoaded',SECTION_FULLY_LOADED:'TimelineConstants/sectionFullyLoaded',SECTION_REGISTERED:'TimelineConstants/sectionRegistered'};e.exports=g;});
__d("TimelineLegacySections",[],function(a,b,c,d,e,f){var g={},h={get:function(i){return g[i];},getAll:function(){return g;},remove:function(i){delete g[i];},removeAll:function(){g={};},set:function(i,j){g[i]=j;}};e.exports=h;});
__d("TimelineURI",["URI"],function(a,b,c,d,e,f){var g=b('URI'),h={TIMELINE_KEY:'timeline',WALL_KEY:'wall',parseURI:function(i){i=g(i);var j=i.getQueryData(),k=i.getPath(),l=k.split('/').slice(1);if(l[0]=='people'||l[0]=='pages')l=l.slice(2);var m=j.sk||l[1]||h.TIMELINE_KEY;if(m==h.WALL_KEY)m=h.TIMELINE_KEY;var n=null,o=null;if(m==h.TIMELINE_KEY){o=parseInt(l[2],10)||null;n=parseInt(l[3],10)||null;}return {path:k,id:j.id||l[0],key:m,viewas:j.viewas?j.viewas:0,filter:j.filter?j.filter:null,year:o,month:n,friendship:!!j.and};}};e.exports=h;});
__d("TimelineController",["Event","Arbiter","CSS","DataStore","DOM","Run","ScrollingPager","TimelineConstants","TimelineLegacySections","TimelineURI","Vector","ViewportBounds","$","ge"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('CSS'),j=b('DataStore'),k=b('DOM'),l=b('Run'),m=b('ScrollingPager'),n=b('TimelineConstants'),o=b('TimelineLegacySections'),p=b('TimelineURI'),q=b('Vector'),r=b('ViewportBounds'),s=b('$'),t=b('ge'),u=484,v=48,w=740,x=1285,y=null,z=false,aa,ba,ca,da,ea={},fa={},ga=[],ha=null,ia=null,ja=false,ka=0,la=false,ma=false,na=false,oa={allactivity:true,approve:true,games:true,map:true,music:true,video:true};oa[p.TIMELINE_KEY]=true;var pa=[],qa=false;function ra(){ha&&ha.remove();ha=null;}function sa(db,eb,fb){fb=fb||[];if(ea[db])return ea[db][eb].apply(ea[db],fb);fa[db]=fa[db]||{};fa[db][eb]=fb;return false;}function ta(){if(!(la||na||ma)){ra();return;}var db=q.getScrollPosition();la=la&&xa(t('rightCol'),db,'paddingTop',true);ma=ma&&xa(s('pagelet_above_header_timeline'),db,'top');na=na&&xa(s('blueBar'),db,'paddingTop');}var ua=0;function va(){ua=q.getScrollPosition();}function wa(){k.queryThenMutate(va,function(){var db=ka===0||ua.y>=ka;sa(cb.STICKY_HEADER,'toggle',[db]);sa(cb.CONTENT,'checkCurrentSectionChange');},'TimelineController/scrollListener');}function xa(db,eb,fb,gb){if(!db){ra();return;}if(eb.y<=0){ya(db,fb);return false;}else{var hb=gb&&cb.getCurrentScrubber();if(hb&&i.hasClass(hb.getRoot(),'fixed_elem')){ya(db,fb);return false;}else{var ib=parseInt(db.style[fb],10)||0;if(eb.y<ib){i.addClass(db,'timeline_fixed');db.style[fb]=eb.y+'px';}else i.removeClass(db,'timeline_fixed');}}return true;}function ya(db,eb){db.style[eb]='0px';i.removeClass(db,'timeline_fixed');}function za(){k.queryThenMutate(cb.shouldShowWideAds,function(){sa(cb.ADS,'adjustAdsType',[ja]);sa(cb.ADS,'adjustAdsToFit');sa(cb.CONTENT,'adjustContentPadding');sa(cb.STICKY_HEADER_NAV,'adjustMenuHeights');},'TimelineController/resize');}function ab(db,eb){if(db=='sidebar/initialized')qa=true;sa(cb.ADS,'adjustAdsType',[cb.shouldShowWideAds()]);}function bb(){while(ga.length)ga.pop().remove();for(var db in ea)ea[db].reset&&ea[db].reset();ra();da.unsubscribe();da=null;y=null;aa=null;ea={};fa={};ia=null;ka=0;ma=false;if(la){var eb=t('rightCol');if(eb){eb.style.paddingTop='';i.removeClass(eb,'timeline_fixed');}}la=false;if(na){s('blueBar').style.paddingTop='';i.removeClass(s('blueBar'),'timeline_fixed');}na=false;pa=[];qa=false;z=false;j.purge(n.DS_HEIGHT);j.purge(n.DS_LOADED);j.purge(n.DS_SIDEORG);j.purge(n.DS_TAILBALANCE);j.purge(n.DS_COLUMN_HEIGHT_DIFFERENTIAL);}var cb={NAV:'nav',STICKY_HEADER:'sticky_header',STICKY_HEADER_NAV:'sticky_header_nav',SCRUBBER:'scrubber',CONTENT:'content',ADS:'ads',COVER:'cover',LOGGING:'logging',init:function(db,eb,fb){if(z)return;if(eb==p.WALL_KEY)eb=p.TIMELINE_KEY;z=true;aa=db;ba=fb.has_fixed_ads;ca=fb.force_wide_ads;sa(cb.CONTENT,'adjustContentPadding');ga.push(g.listen(window,'scroll',wa),g.listen(window,'resize',za));da=h.subscribe(['sidebar/initialized','sidebar/show','sidebar/hide'],ab);l.onLeave(bb);cb.registerCurrentKey(eb);},setAdsTracking:function(db){sa(cb.ADS,'start',[db]);},coverHasExpanded:function(db){var eb=t('rightCol');if(eb){eb.style.paddingTop=db+'px';la=true;}var fb=s('pagelet_above_header_timeline');if(fb.firstChild){s('above_header_timeline_placeholder').style.height=fb.offsetHeight+'px';fb.style.top=db+'px';ma=true;}var gb=document.documentElement;na=gb.clientHeight<400||gb.clientWidth<gb.scrollWidth;if(na)s('blueBar').style.paddingTop=db+'px';ha=g.listen(window,'scroll',ta);h.inform('reflow');},pageHasScrubber:function(db){return !db||db.match(/^(og_)?app_/)||(db in oa);},fixedAds:function(){return ba;},registerCurrentKey:function(db){y=db;ia=db!=='map'&&q.getViewportDimensions().y<w&&cb.pageHasScrubber(db);ia=ia||s('blueBar').offsetTop;sa(cb.ADS,'setShortMode',[ia]);sa(cb.ADS,'updateCurrentKey',[db]);ka=db==p.TIMELINE_KEY?u-v:0;},getCurrentKey:function(){return y;},getSectionKeys:function(){return pa;},getCurrentScrubber:function(){return ea[cb.SCRUBBER];},getCurrentStickyHeaderNav:function(){return ea[cb.STICKY_HEADER_NAV];},scrubberHasLoaded:function(db){sa(cb.STICKY_HEADER_NAV,'addTimePeriods',[pa]);i.conditionClass(db.getRoot(),'fixed_elem',!ia);sa(cb.ADS,'registerScrubber',[db]);},registerSectionKey:function(db,eb){if(ea[cb.STICKY_HEADER_NAV]){sa(cb.STICKY_HEADER_NAV,'addTimePeriod',[db]);}else pa[eb]=db;},scrubberHasChangedState:function(){sa(cb.ADS,'adjustAdsToFit');},scrubberWasClicked:function(db){sa(cb.LOGGING,'logScrubberClick',[db]);},sectionHasChanged:function(db,eb){sa(cb.STICKY_HEADER_NAV,'updateSection',[db,eb]);sa(cb.SCRUBBER,'updateSection',[db,eb]);sa(cb.ADS,'loadAdsIfEnoughTimePassed');sa(cb.LOGGING,'logSectionChange',[db,eb]);},navigateToSection:function(db){sa(cb.CONTENT,'navigateToSection',[db]);},shouldShowWideAds:function(){if(ca){ja=true;}else if(!qa){ja=false;}else{var db=x+r.getRight();ja=q.getViewportDimensions().x>=db;}return ja;},sidebarInitialized:function(){return qa;},adjustStickyHeaderWidth:function(){sa(cb.STICKY_HEADER,'adjustWidth');},register:function(db,eb){ea[db]=eb;if(fa[db]){for(var fb in fa[db])sa(db,fb,fa[db][fb]);delete fa[db];}},adjustScrollingPagerBuffer:function(db,eb){var fb=j.get(n.DS_COLUMN_HEIGHT_DIFFERENTIAL,eb);if(!fb)return;var gb=m.getInstance(db);gb&&gb.setBuffer(gb.getBuffer()+Math.abs(fb));},runOnceWhenSectionFullyLoaded:function(db,eb,fb){var gb=o.get(eb);if(gb){var hb=false;k.scry(gb.node,'.fbTimelineCapsule').forEach(function(jb){if(!hb&&parseInt(j.get(n.DS_LOADED,jb.id),10)>=parseInt(fb,10)){db();hb=true;}});if(hb)return;}var ib=h.subscribe(n.SECTION_FULLY_LOADED,function(jb,kb){if(kb.scrubberKey===eb&&kb.pageIndex===fb){db();ib.unsubscribe();}});}};e.exports=cb;});
__d("TimelineStickyHeader",["Arbiter","Bootloader","CSS","DOM","TimelineController","TimelineURI","Vector","ViewportBounds","$","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('CSS'),j=b('DOM'),k=b('TimelineController'),l=b('TimelineURI'),m=b('Vector'),n=b('ViewportBounds'),o=b('$'),p=b('ge'),q=false,r=false,s,t,u,v,w={VISIBLE:'TimelineStickyHeader/visible',ADJUST_WIDTH:'TimelineStickyHeader/adjustWidth',init:function(x){if(q)return;q=true;s=x;t=j.find(x,'div.name');u=j.find(x,'div.actions');r=i.hasClass(x,'fbTimelineStickyHeaderVisible');var y=o('blueBar'),z,aa,ba,ca=false;j.queryThenMutate(function(){z=x.offsetTop;aa=x.scrollHeight;if(y.offsetTop&&!p('page_admin_panel')&&k.getCurrentKey()!==l.TIMELINE_KEY){ba=m.getElementDimensions(y).y;ca=true;}},function(){v=n.addTop(function(){return r?z+aa:0;});if(ca){h.loadModules(['StickyController'],function(da){new da(x,ba).start();});}else i.addClass(x,'fixed_elem');k.register(k.STICKY_HEADER,w);},'TimelineStickyHeader/init');},reset:function(){q=false;r=false;s=null;t=null;u=null;v.remove();v=null;},toggle:function(x){i.conditionClass(s,'fbTimelineStickyHeaderHidden',!x);s.setAttribute('aria-hidden',x?'false':'true');if(x!==r){r=x;g.inform(w.VISIBLE,x);}},adjustWidth:function(){g.inform(w.ADJUST_WIDTH,t,g.BEHAVIOR_STATE);},getRoot:function(){return s;},setActions:function(x){if(q&&x){j.setContent(u,x);u=x;}}};e.exports=a.TimelineStickyHeader||w;});
__d("legacy:ui-scrolling-pager-js",["ScrollingPager"],function(a,b,c,d){a.ScrollingPager=b('ScrollingPager');},3);
__d("UIIntentionalStreamMessage",[],function(a,b,c,d,e,f){var g={SET_AUTO_INSERT:'UIIntentionalStream/setAutoInsert',UPDATE_STREAM:'UIIntentionalStreamRefresh/updateStream',REFRESH_STREAM:'UIIntentionalStreamRefresh/refreshStream',UPDATE_AUTOREFRESH_CONFIG:'UIIntentionalStream/updateAutoRefreshConfig',UPDATE_HTML_CONTENT:'UIIntentionalStream/updateHtmlContent',UPDATE_LAST_REFRESH_TIME:'UIIntentionalStream/updateLastRefreshTime',INSERT_STORIES:'UIIntentionalStream/updateLastRefreshTime',UNLOAD:'UIIntentionalStream/unload'};e.exports=g;});
__d("TinyViewport",["Event","CSS","DOM","debounce"],function(a,b,c,d,e,f){var g=b('Event'),h=b('CSS'),i=b('DOM'),j=b('debounce'),k=j(function(){var l=document.documentElement,m=i.getDocumentScrollElement(),n=l.clientHeight<400||m.clientWidth<m.scrollWidth;h.conditionClass(l,'tinyViewport',n);h.conditionClass(l,'canHaveFixedElements',!n);});k();g.listen(window,'resize',k);});
__d("ContextualLayerUpdateOnScroll",["Event","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('copyProperties');function i(j){this._layer=j;}h(i.prototype,{_subscriptions:[],enable:function(){this._subscriptions=[this._layer.subscribe('show',this._attachScrollListener.bind(this)),this._layer.subscribe('hide',this._removeScrollListener.bind(this))];},disable:function(){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this.detach();},_attachScrollListener:function(){if(this._listener)return;var j=this._layer.getContextScrollParent();this._listener=g.listen(j,'scroll',this._layer.updatePosition.bind(this._layer));},_removeScrollListener:function(){this._listener&&this._listener.remove();this._listener=null;}});e.exports=i;});
__d("legacy:Button",["Button"],function(a,b,c,d){a.Button=b('Button');},3);
__d("StickyPlaceholderInput",["Event","CSS","DOM","Input","Parent","emptyFunction"],function(a,b,c,d,e,f){var g=b('Event'),h=b('CSS'),i=b('DOM'),j=b('Input'),k=b('Parent'),l=b('emptyFunction');function m(q){return k.byClass(q,'uiStickyPlaceholderInput');}function n(q){return i.scry(q,'.placeholder')[0];}function o(q){q=q||window.event;var r=q.target||q.srcElement;if(i.isNodeOfType(r,['input','textarea'])){var s=m(r);if(s){var t=q.type;(function(){if((t==='keydown'||t==='paste')&&r.value.length)h.removeClass(s,'uiStickyPlaceholderEmptyInput');if((t==='blur'||t==='focusout')&&!r.value.length)h.addClass(s,'uiStickyPlaceholderEmptyInput');}).defer();}}}var p={init:function(){p.init=l;g.listen(document.documentElement,{keydown:o,paste:o,focusout:o});},registerInput:function(q){p.init();var r=q.getAttribute('placeholder')||'';if(r.length)if(document.activeElement===q){var s=g.listen(q,'blur',function(){p.manipulateInput(q,r);s.remove();});}else p.manipulateInput(q,r);},manipulateInput:function(q,r){var s=i.create('div',{className:'placeholder','aria-hidden':'true'},r),t=i.create('div',{className:'uiStickyPlaceholderInput'},s);if(i.isNodeOfType(q,'textarea'))h.addClass(t,'uiStickyPlaceholderTextarea');g.listen(s,'click',function(){q.focus();});if(q.value===r)q.value='';h.removeClass(q,'DOMControl_placeholder');q.setAttribute('placeholder','');i.replace(q,t);i.appendContent(t,q);h.conditionClass(t,'uiStickyPlaceholderEmptyInput',!q.value.length);},setPlaceholderText:function(q,r){var s=m(q);if(!s){j.setPlaceholder(q,r);}else{var t=n(s);t&&i.setContent(t,r);}},getPlaceholderText:function(q){var r=m(q),s=n(r);return s&&i.getText(s);},update:function(q){var r=m(q);if(r)h.conditionClass(r,'uiStickyPlaceholderEmptyInput',!q.value.length);},getVisibleText:function(q){var r=m(q);if(h.hasClass(r,'uiStickyPlaceholderEmptyInput')){var s=n(r);return s&&i.getText(s);}else return q.value;}};e.exports=p;});
__d("UIForm",["Event","ArbiterMixin","BehaviorsMixin","DOM","Form","Run","areObjectsEqual","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('ArbiterMixin'),i=b('BehaviorsMixin'),j=b('DOM'),k=b('Form'),l=b('Run'),m=b('areObjectsEqual'),n=b('copyProperties');function o(p,q,r,s){this._root=p;this.controller=p;this._message=q;l.onAfterLoad(function(){this._originalState=k.serialize(this._root);}.bind(this));this._forceDirty=r;this._submitted=false;g.listen(this._root,'submit',this._handleSubmit.bind(this));if(s&&s.length)this.enableBehaviors(s);var t=true;l.onBeforeUnload(this.checkUnsaved.bind(this),t);}n(o.prototype,h,i,{getRoot:function(){return this._root;},_handleSubmit:function(){if(this.inform('submit')===false)return false;this._submitted=true;return true;},reset:function(){this.inform('reset');this._submitted=false;},isDirty:function(){if(this._submitted||!j.contains(document.body,this._root))return false;if(this._forceDirty)return true;var p=k.serialize(this._root);return !m(p,this._originalState);},checkUnsaved:function(){if(this.isDirty())return this._message;return null;}});e.exports=a.UIForm||o;});
function FutureSideNav(){FutureSideNav.instance&&FutureSideNav.instance.uninstall();FutureSideNav.instance=this;}FutureSideNav.instance=null;FutureSideNav.getInstance=function(){return FutureSideNav.instance||new FutureSideNav();};copyProperties(FutureSideNav.prototype,{init:function(a,b,c){this.root=a;this.items={};this.sections={};this.editor=null;this.editing=false;this.selected=null;this.loading=null;this.keyParam='sk';this.defaultKey=b;this.uri=URI.getRequestURI();this.ajaxPipe=c;this.ajaxPipeEndpoints={};this.sidecol=true;this._installed=true;this._handlePageTransitions=true;PageTransitions.registerHandler(function(d){return this._handlePageTransitions&&this.handlePageTransition(d);}.bind(this));this._eventHandlers=[];this._arbiterSubscriptions=[Arbiter.subscribe(NavigationMessage.NAVIGATION_COMPLETED,this.navigationComplete.bind(this)),Arbiter.subscribe(NavigationMessage.NAVIGATION_FAILED,this.navigationFailed.bind(this)),Arbiter.subscribe(NavigationMessage.NAVIGATION_COUNT_UPDATE,this.navigationCountUpdate.bind(this)),Arbiter.subscribe(NavigationMessage.NAVIGATION_SELECT,this.navigationSelect.bind(this)),Arbiter.subscribe(ChannelConstants.getArbiterType('nav_update_counts'),this.navigationCountUpdateFromPresence.bind(this))];this._explicitHover=[];this._ensureHover('sideNavItem');this._eventHandlers.push(Event.listen(window,'resize',this._handleResize.bind(this)));this._checkNarrow();this._selectorSubscriptions=[];window.Selector&&this._selectorSubscriptions.push(Selector.subscribe(['open','close'],function(d,e){var f=Parent.byClass(e.selector,'sideNavItem');f&&CSS.conditionClass(f,'editMenuOpened',d==='open');}));onleaveRegister(this.uninstall.bind(this));if(this._pendingSections)this._pendingSections.forEach(function(d){this.initSection.apply(this,d);}.bind(this));},_handleResize:(function(){var a;return function(){a&&clearTimeout(a);a=this._checkNarrow.bind(this).defer(200);};})(),_checkNarrow:function(){CSS.conditionClass(this.root,'uiNarrowSideNav',Vector2.getElementPosition(this.root).x<20);},_ensureHover:function(a){if(ua.ie()<8)Bootloader.loadComponents('explicit-hover',function(){this._explicitHover.push(new ExplicitHover(this.root,a));}.bind(this));},uninstall:function(){if(this._installed){this._installed=false;this._handlePageTransitions=false;this._arbiterSubscriptions.forEach(Arbiter.unsubscribe);this._selectorSubscriptions.forEach(function(a){Selector.unsubscribe(a);});this._eventHandlers.forEach(function(a){a.remove();});this._explicitHover.forEach(function(a){a.uninstall();});}},initSection:function(a,b){if(!this._installed){this._pendingSections=this._pendingSections||[];this._pendingSections.push(arguments);return;}this._initItems(b);this._initSection(a);},addItem:function(a,b){this._initItem(a,b);},_initItems:function(a){var b=function(c,d){var e=this._initItem(c,d);if(c.children)c.children.forEach(function(f){b(f,e);});}.bind(this);$A(a).forEach(function(c){b(c,null);});},_initItem:function(a,b){var c=this.items[a.id]=this._constructItem(a,b);if(c.equals(this.selected)||a.selected)this.setSelected(c);var d=c.getLinkNode();d&&this._eventHandlers.push(Event.listen(d,'click',function(event){return !this.editing;}.bind(this)));return c;},_initSection:function(a){var b=this.sections[a.id]=this._constructSection(a);this._eventHandlers.push(Event.listen(b.node,'click',this.handleSectionClick.bind(this,b)));DOM.scry(b.node,'div.bookmarksMenuButton').forEach(CSS.show);return b;},_constructItem:function(a,b){return new FutureSideNavItem(a,b);},_constructSection:function(a){return new FutureSideNavSection(a);},handleSectionClick:function(a,event){var b=this._getEventTarget(event,'a'),c=this._getItemForNode(b);if(!b){return;}else if(CSS.hasClass(b.parentNode,'uiMenuItem')){this._handleMenuClick(a,c,b.parentNode,event);}else this._handleLinkClick(a,b,event);},_getEventTarget:function(event,a){var b=event.getTarget();if(b.tagName!==a.toUpperCase()){return Parent.byTag(b,a);}else return b;},_handleMenuClick:function(a,b,c,event){if(CSS.hasClass(c,'rearrange'))this.beginEdit(a);},_handleLinkClick:function(a,b,event){if(CSS.hasClass(b,'navEditDone')){this.editing?this.endEdit():this.beginEdit(a);event.kill();}},getItem:function(a){if(this._isCurrentPath(a)){return this._getItemForKey(this._getKey(a.getQueryData())||this.defaultKey);}else return this._getItemForPath(a.getPath());},getNodeForKey:function(a){var b=this._getItemForKey(a);if(b)return b.node;},_isCurrentPath:function(a){return a.getDomain()===this.uri.getDomain()&&a.getPath()===this.uri.getPath();},_getKey:function(a){return a[this.keyParam];},_getItemForNode:function(a){a=Parent.byClass(a,'sideNavItem');return a&&this.items[a.id];},_getItemForKey:function(a){return this._findItem(function(b){return b.matchKey(a);});},_getItemForPath:function(a){return this._findItem(function(b){return b.matchPath(a);});},_findItem:function(a){for(var b in this.items)if(a(this.items[b]))return this.items[b];},removeItem:function(a){if(a&&this.items[a.id]){DOM.remove(a.node);delete this.items[a.id];}},removeItemByKey:function(a){this.removeItem(this._getItemForKey(a));},moveItem:function(a,b,c){var d=DOM.find(a.node,'ul.uiSideNav');(c?DOM.prependContent:DOM.appendContent)(d,b.node);},setLoading:function(a){this.loading&&this.loading.hideLoading();this.loading=a;this.loading&&this.loading.showLoading();},setSelected:function(a){this.setLoading(null);if(this.selected){this.selected.hideSelected();this.selected.getTop().hideChildren();}this.selected=a;if(this.selected){this.selected.showSelected();this.selected.getTop().showChildren();}},handlePageTransition:function(a){var b=this.getItem(a),c=b&&b.endpoint&&this._doPageTransition(b,a);return c;},_doPageTransition:function(a,b){this.setLoading(a);this._sendPageTransition(a.endpoint,copyProperties(this._getTransitionData(a,b),b.getQueryData()));return true;},_sendPageTransition:function(a,b){b.endpoint=a;Arbiter.inform(NavigationMessage.NAVIGATION_BEGIN,{useAjaxPipe:this._useAjaxPipe(a),params:b});},_getTransitionData:function(a,b){var c={};c.sidecol=this.sidecol;c.path=b.getPath();c[this.keyParam]=a.textKey;c.key=a.textKey;return c;},_useAjaxPipe:function(a){return this.ajaxPipe||this.ajaxPipeEndpoints[a];},navigationComplete:function(){this.loading&&this.setSelected(this.loading);},navigationFailed:function(){this.setLoading(null);},navigationSelect:function(a,b){var c=this._getItemForKey(this._getKey(b));if(b.asLoading){this.setLoading(c);}else this.setSelected(c);},navigationCountUpdate:function(a,b){var c=this._getItemForKey(b&&b.key);if(c)if(typeof b.count!=="undefined"){c.setCount(b.count,b.hide);}else if(typeof b.increment!=="undefined")c.incrementCount(b.increment,b.hide);},navigationCountUpdateFromPresence:function(a,b){b=b.obj;if(b)if(!b.class_name||b.class_name&&CSS.hasClass(this.root,b.class_name))if(b.items)for(var c=0;c<b.items.length;c++)this.navigationCountUpdate(a,b.items[c]);},beginEdit:function(a){if(!this.editing){this.editing=true;CSS.addClass(this.root,'editMode');this._updateTrackingData();Bootloader.loadComponents('sortable-side-nav-js',this._initEditor.bind(this,a));}},endEdit:function(){if(this.editing){CSS.removeClass(this.root,'editMode');this.editor.endEdit();this.editor=null;this.editing=false;this._updateTrackingData();}},_updateTrackingData:function(a){var b=this.root.getAttribute('data-gt')||"{}";try{b=JSON.parse(b);if(this.editing){b.editing=true;}else delete b.editing;this.root.setAttribute('data-gt',JSON.stringify(b));}catch(c){}},_initEditor:function(a){this.editor=a.getEditor();this.editor.beginEdit();}});function FutureSideNavSection(a){this.id=a.id;this.node=this.node||$(a.id);this.editEndpoint=a.editEndpoint;}copyProperties(FutureSideNavSection.prototype,{equals:function(a){return a&&a.id===this.id;},getEditor:function(){return new SortableSideNav(DOM.find(this.node,'ul.uiSideNav'),this.editEndpoint);}});function FutureSideNavItem(a,b){this.id=a.id;this.up=b;this.endpoint=a.endpoint;this.type=a.type;this.node=a.node||$(a.id);this.paths=a.path?$A(a.path):[];this.keys=a.key?$A(a.key):[];var c=this._findKeys(this.keys);this.numericKey=c.numeric||this.keys[0];this.textKey=c.text||this.keys[0];this._pathPattern=this._buildRegex(this.paths);this._keyPattern=this._buildRegex(this.keys);this.hideLoading();this.hideSelected();}copyProperties(FutureSideNavItem.prototype,{equals:function(a){return a&&a.id===this.id;},getLinkNode:function(){return (DOM.scry(this.node,'a.item')[0]||DOM.scry(this.node,'a.subitem')[0]);},matchPath:function(a){return this._matchInput(this._pathPattern,a);},matchKey:function(a){return this._matchInput(this._keyPattern,a);},_matchInput:function(a,b){var c=a&&a.exec(b);return c&&c.slice(1);},getTop:function(){return this.isTop()?this:this.up.getTop();},isTop:function(a){return !this.up;},setCount:function(a,b){return this._updateCount(a,true);},incrementCount:function(a,b){return this._updateCount(a,false);},_updateCount:function(a,b,c){var d=DOM.scry(this.node,'span.count')[0],e=d&&DOM.scry(d,'span.countValue')[0];if(e){var f=b?0:parseInt(DOM.getText(e),10),g=Math.max(0,f+a),h=this.isTop()?'hidden':'hiddenSubitem';DOM.setContent(e,g);c&&CSS.conditionClass(this.node,h,!g);CSS.conditionClass(d,'hidden_elem',!g);if(this.isTop()){var i=DOM.scry(this.node,'div.linkWrap')[0];if(i){CSS.conditionClass(i,'noCount',!g);CSS.conditionClass(i,'hasCount',g);}}}Arbiter.inform('NavigationMessage.COUNT_UPDATE_DONE');},showLoading:function(){CSS.addClass(this.node,'loading');},hideLoading:function(){CSS.removeClass(this.node,'loading');},showSelected:function(){CSS.addClass(this.node,'selectedItem');CSS.hasClass(this.node,'hider')&&CSS.addClass(this._getExpanderParent(),'expandedMode');},hideSelected:function(){CSS.removeClass(this.node,'selectedItem');},showChildren:function(){CSS.addClass(this.node,'open');},hideChildren:function(){CSS.removeClass(this.node,'open');},_getExpanderParent:function(){return Parent.byClass(this.node,'expandableSideNav');},_buildRegex:function(a){if(a.length){var b=a.map(function(c){if(typeof c==="string"){return c.replace(/([^a-z0-9_])/ig,'\\$1');}else if(c&&c.regex)return c.regex;});return new RegExp('^(?:'+b.join('|')+')$');}},_findKeys:function(a){var b=/^(app|group|fl)_/,c={};for(var d=0;d<a.length;d++){var e=b.test(a[d]);if(e&&!c.numeric){c.numeric=a[d];}else if(!e&&!c.text)c.text=a[d];if(c.numeric&&c.text)break;}return c;}});