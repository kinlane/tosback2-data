(function(a,b){a.tooltip=function(c){this.options=b.extend(true,{button:null,position:{my:"center bottom",at:"center top",of:null,offset:"0 -14",collision:"none none"},arrow_position:null,content:null,delayShow:100,delayHide:100,id:null,nohoverClass:"tooltip br3 bs005x333",hoverClass:null,closeButton:false,closeButtonText:"",closeButtonClass:"closeButton"},c?c:{});this.options.position.of=this.options.button||this.options.position.of;this.initialized=false;this.visible=false;this.container=null;this.contentArea=null;this.arrow=null;this.enable()};a.tooltip.prototype.initialize=function(){this.container=b("<div></div>");this.container.css({position:"absolute",top:0,left:0});this.container.addClass(this.options.nohoverClass);if(this.options.id){this.container.attr("id",this.options.id)}if(this.options.closeButton==true){var c=this;this.closeButton=b('<a href="javascript:void(0);">'+this.options.closeButtonText+"</a>");this.closeButton.addClass(this.options.closeButtonClass).appendTo(this.container);this.closeButton.click(function(f){c.hide()})}this.contentArea=b("<div>Loading&hellip;</div>").appendTo(this.container);this.arrow=b("<div></div>").addClass("ttPoint").appendTo(this.container);this.arrow.css({position:"absolute",top:0,left:0});this.container.hide();this.container.appendTo(document.body);var d=b(this.options.button);this.container.mouseenter(function(f){d.stop(true)}).mouseleave(function(f){d.mouseleave()});this.initialized=true};a.tooltip.prototype.enable=function(){var c=this;var e=b(this.options.button);var d=this.options;e.bind("mouseenter.tooltip",function(f){if(c.visible){return}c.visible=true;e.stop(true).delay(d.delayShow).queue(function(h){if(!c.initialized){c.initialize()}c.container.show();if(b.isFunction(d.content)){var g=d.content(c);if(g){c.write(g)}}else{if(d.content!==null){c.write(d.content)}}c.position();e.addClass(d.hoverClass);c.container.addClass(d.hoverClass);h()})});e.bind("mouseleave.tooltip",function(f){e.stop(true).delay(d.delayHide).queue(function(g){if(c.container){c.container.hide();c.container.removeClass(d.hoverClass)}c.visible=false});e.removeClass(d.hoverClass)})};a.tooltip.prototype.disable=function(){var c=b(this.options.button);c.unbind("mouseenter.tooltip");c.unbind("mouseleave.tooltip")};a.tooltip.prototype.position=function(){this.container.position(this.options.position);var c=b.extend(true,{},this.options.position,{offset:"0 0",collision:"none none"});if(this.options.arrow_position){c=b.extend(true,{},c,this.options.arrow_position)}this.arrow.position(c);this.arrow.css({top:""})};a.tooltip.prototype.remove=function(){this.disable();if(this.container){this.container.remove()}this.initialized=false;this.visible=false};a.tooltip.prototype.write=function(c){this.contentArea.html(c)};a.tooltip.prototype.getContainer=function(){return this.container};a.tooltip.prototype.hide=function(){if(this.container){this.container.hide();this.container.removeClass(this.options.hoverClass)}this.visible=false;b(this.options.button).removeClass(this.options.hoverClass)}})(wui,jQuery);(function(a,d){var b={};var c=[];a.glossary={};a.glossary.initialize=function(e){b=d.extend({selector:"dfn",url:"/glossary/responder.html",cache:{},tooltip:{delayShow:300,delayHide:300,hoverClass:null,position:{collision:"fit none"}}},e?e:{});this.start()};a.glossary.start=function(){d(b.selector).each(function(e){a.glossary.add(this)})};a.glossary.stop=function(){while(c.length>0){var e=c.pop();e.remove()}};a.glossary.add=function(g){var e=d(g);var f=b.tooltip;f.button=e;f.content=function(k){var j=e.attr("data-term");if(!j){j=e.text()}var i=e.attr("data-definition");a.glossary.lookup(j,k,i)};var h=new a.tooltip(f);c.push(h)};a.glossary.lookup=function(f,g,e){if(e){g.write(e);g.position()}else{if(b.cache[f]){g.write(b.cache[f]);g.position()}else{d.ajax({url:b.url,dataType:"html",data:{term:f},success:function(h,i){b.cache[f]=h;g.write(h);g.position()}})}}};d(document).ready(function(){a.glossary.initialize();d(".casterMapMarker").each(function(f){var e=d(this);var g=e.next("div").html();e.removeClass("none");var i=parseFloat(e.css("left"))-e.width()/2;var h=parseFloat(e.css("top"))-e.height()/2;if(i<-3){i=-3}if(i>311){i=311}if(h<-3){h=-3}if(h>141){h=141}e.css({left:i,top:h});new a.tooltip({button:e,content:g,hoverClass:"hover",position:{collision:"fit none"}})})})})(wui,jQuery);