$(document).bind("ad:load",function(a,f,b,e,c){a=$("#"+c).parent();a.length&&"in-article"==f&&(f=a.find("a.lightbox"),a={iframe:!0,transition:"fade",fastIframe:!1,fixed:!0,onOpen:function(){$("#colorbox").addClass("sponsored")},onClosed:function(){$("#colorbox").removeClass("sponsored")}},b=f.data("lightboxWidth"),e=f.data("lightboxHeight"),b&&(a.width=b),e&&(a.height=e),f.colorbox(a))});
$(document).ready(function(){function a(a){$(a).val().toLowerCase()==$(a).attr("longdesc").toLowerCase()&&($(a).val(""),$(a).removeClass("label"))}function f(a){""==$(a).val().toLowerCase()&&($(a).val($(a).attr("longdesc")),$(a).addClass("label"))}$.browser.msie&&9>$.browser.msie.version&&$lis.hover(function(){$(this).addClass("hovered")},function(){$(this).removeClass("hovered")});$("#nav-social .search-icon").each(function(){var a=null;$(this).hover(function(){null!==a&&(window.clearTimeout(a),
a=null);$(this).addClass("hovered")},function(){if(null===a){var g=this;a=window.setTimeout(function(){$(g).removeClass("hovered");g=null},500)}})});adFunctions();setTimeout("adFunctions()",250);setTimeout("adFunctions()",1E3);setTimeout("adFunctions()",3E3);$("#search #query").val("SEARCH OUR SITE").focus(function(){"SEARCH OUR SITE"==$(this).val()&&$(this).val("")}).blur(function(){""==$(this).val()&&$(this).val("SEARCH OUR SITE")});$("a.tab").click(function(){$("#searched").toggle();$("#emailed").toggle();
return!1});$("form.labeled input:text").focus(function(){a(this)});$(".labeled").submit(function(){$(this).find("input:text").each(function(){a(this)})});$("form.labeled input:text").blur(function(){f(this)});$("form.labeled input:text").each(function(){f(this)});$(".expandingMenu .expandingArrow").click(function(){var a=!0;!0==$(this).hasClass("open")&&(a=!1);$(".expandingMenu .expandingContent").slideUp(80);$(".expandingMenu .expandingArrow").removeClass("open");!0==a&&($(this).parent().find(".expandingContent").slideDown(80),
$(this).addClass("open"));return!1});$(".expandingMenu .expandingContent a").click(function(){$(this).parent().parent().parent().find(".expandingTitle").html("Loading...")});$("html").click(function(){$(".expandingMenu .expandingContent").slideUp(80);$(".expandingMenu .expandingArrow").removeClass("open")});$(".print").click(function(){window.open($(".print").attr("href"),"","width=800,height=480,scrollbars,resizable,location=no,menubar=no,toolbar=no");return!1});$(".authorEmail").length&&$(".authorEmail").each(function(){$(this).attr("href",
$(this).attr("href").replace(" at ","@"))});if(0<$("#ourLatestPost").length){window.latestOffset=0;latestPostWidth=335;(new Image).src="http://cdn.theatlantic.com/static/front/images/loadingSmall.gif";$("#ourLatestPost .nextEntryLink").live("click",function(){window.latestOffset++;$(".promoColumn #olpEntry"+window.latestOffset+"  .nextEntryLink").addClass("olpLoading");var a="/widget/recent/"+$("#olpEntry"+window.latestOffset+" .justInUnixDate").html()+"/"+window.latestOffset;$.getJSON(a,{},function(a){$("#ourLatestPost #olpScroll").append(Utf8.decode(a.output));
$("#ourLatestPost #olpScroll").animate({marginLeft:"-="+latestPostWidth+"px"},800);$(".promoColumn #olpEntry"+window.latestOffset+" .nextEntryLink").removeClass("olpLoading")});1==window.latestOffset&&$("#olp1 .previousEntryLink").fadeIn();b();return!1});$("#ourLatestPost .previousEntryLink").live("click",function(){1<=window.latestOffset&&(window.latestOffset--,$("#ourLatestPost #olpScroll").animate({marginLeft:"+="+latestPostWidth+"px"},800));b();return!1});$("#olpEntry1 .previousEntryLink").unbind("click");
var b=function(){window.clearTimeout(window.latestPostRefresh);window.latestPostRefresh=setTimeout(function(){$.getJSON("/widget/recent/",{},function(a){$(a.output).find(".justInUnixDate").html()>$("#olpEntry1 .justInUnixDate").html()&&(window.latestOffset=0,$("#ourLatestPost #olpScroll").animate({marginLeft:"0px"},1E3,function(){$("#ourLatestPost #olpScroll").html(a.output)}));b()})},3E5)};$("#ourLatestPost").length&&b()}$("a[href$='#disqus_thread']").each(function(a,g){var f=$(g).attr("disqus");
"undefined"!=typeof f&&"infocus"!=f.substring(0,7)&&$.getJSON("http://disqus.com/api/v1/get_num_posts/?thread_identifier="+f+"&forum_url=theatlantic&callback=?",function(a){a=a.num_posts;0!=a?($(g).text(a),$(g).show()):$(g).remove()})});$("#inFocusPage .articleContent").first().css("min-height","260px");var e=(new Date).getTime();if(window.ChineseWrap){var c=function(a,g){g.innerHTML=ChineseWrap.wrapTags(g.innerHTML)};$(".articleContent").each(c);$("h1.headline").each(c);$(".hasChinese.postContent").each(c);
$(".hasChinese h3.headline").each(c)}c=(new Date).getTime();window.loadTimes&&window.loadTimes.js&&(loadTimes.js.chinese_wrap=(c-e)/1E3)});function cm8_collapse(){$(".adPush").animate({height:"66px"},500)}function cm8_click(){location.href=$("#FLASH_AD param[name='href']").val()}function cm8_expand(){$(".adPush").animate({height:"418px"},500)}function FLASH_AD_DoFSCommand(a){"cm8_click"==a?cm8_click():"cm8_collapse"==a?cm8_collapse():"cm8_expand"==a&&cm8_expand()}
$(".relatedContentVideo .relatedArrowRight").click(function(){$("#relatedSlideshow").position().left>-(143*($("#relatedSlideshow li").length-4))&&$("#relatedSlideshow").animate({left:"-=143"},{duration:1E3,queue:!1});return!1});$(".relatedContentVideo .relatedArrowLeft").click(function(){0>$("#relatedSlideshow").position().left&&$("#relatedSlideshow").animate({left:"+=143"},{duration:1E3,queue:!1});return!1});
function adFunctions(){$(".ad").each(function(a,f){var b=$(f).hasClass("adInterstitial");$(f).find("img").each(function(a,c){$(c).attr("src")&&-1!=$(c).attr("src").search("grey.gif")&&(b?$(c).hide():($(f).hasClass("adBottomboxleft")&&$(f).parent().hide(),$(f).height(0),$(f).addClass("adNotLoaded")))})})}"object"!=typeof window.Atlantic&&(window.Atlantic={});
(function(){Atlantic.getMaxAdChildSize=function(a,b){b||(b={});for(var e={width:0,height:0},c="img embed div a object table iframe".split(" "),h=[],g=[],k=0;k<c.length;k++)for(var m=c[k],m=$(a).find(m),q=0;q<m.length;q++){var n=m[q],r=$(n).width(),n=$(n).height();if(1==b[r+"x"+n])return{width:r,height:n};h.push(r);g.push(n)}h.length&&g.length&&(e.width=Math.max.apply(Math,h),e.height=Math.max.apply(Math,g));return e};Atlantic.parseDartScriptSz=function(a){a=a.attr("src");if(!a)return[];var b=a.indexOf("sz=");
if(-1==b)return[];var e=a.slice(b).indexOf(";");return a.slice(b+3,-1==e?a.length:b+e).split(/,/)};var a=function(a,b,e,c,h){if("string"==typeof a){a=a.split(/\./);for(var g=0,k=a[g],m=window[k];"object"==typeof m&&g<a.length-1;)g++,k=a[g],m=m[k];a=m}"function"==typeof a&&(h="object"==typeof h&&h.length?h[0]:null,a.apply(h,[b,e,c,h]))};Atlantic.getAdSize=function(f,b,e){e||(e=0);var c="ad"+f.charAt(0).toUpperCase()+f.slice(1);if($("."+c).length){var h=$("."+c);if(-1<h.html().search("grey.gif"))a(b,
"failure",void 0,void 0);else{var g=Atlantic.parseDartScriptSz($("#"+c+"Script")),k={};$.each(g,function(a,g){k[g]=1});var m=Atlantic.getMaxAdChildSize(h),c=m.width,m=m.height;if(1==k[c+"x"+m])g="success";else if(1==k["0x0"]&&1<c&&1<m)g="success";else if(!g.length&&1<c&&1<m)g="success";else if(20<e&&0<c&&0<m)g="success";else if(20<e)g="failure";else{setTimeout(function(){Atlantic.getAdSize(f,b,e+1)},250);return}"failure"==g&&(m=c=void 0);a(b,g,c,m,h)}}else a(b,"failure",void 0,void 0)}})();
var Utf8={decode:function(a){for(var f="",b=0,e=c1=c2=0;b<a.length;)e=a.charCodeAt(b),128>e?(f+=String.fromCharCode(e),b++):191<e&&224>e?(c2=a.charCodeAt(b+1),f+=String.fromCharCode((e&31)<<6|c2&63),b+=2):(c2=a.charCodeAt(b+1),c3=a.charCodeAt(b+2),f+=String.fromCharCode((e&15)<<12|(c2&63)<<6|c3&63),b+=3);return f}};window.Atlantic=window.Atlantic||{};window.Atlantic.Omniture=window.Atlantic.Omniture||{};
$(function(){function a(a,g,b){switch(g){case "@":return $(a).attr(b);case "t":return b?$(b).text():$(a).text();case "l":return window.location[b];case "$":return a=$(a),b&&(a=a.parents(b).slice(0,1)),a.index();case "r":return b;default:return void 0!==window.console&&window.console.log&&console.log("Invalid command `"+g+"`."),""}}function f(a){for(var g;"HTML"!==a.tagName;){g=$(a).attr("data-omni-click");if(void 0!==g)break;a=a.parentNode}if(/^inherit/.test(g)){var b=a.parentNode;g=/inherit:(.*)/.exec(g);
null!==g&&(b=$(g),b=0===b.length?document.body:b[0]);g=f(b).expr}return{elem:a,expr:g}}Atlantic.Omniture.trackLink=/_debug_omniture/.test(window.location.search)?function(a){alert("Omniture test:"+a);return!1}:function(a,b,c){"undefined"===typeof b&&(b=!1);var e=function(){try{if(!0===b){var c=s_gi(s_account);c.events="event1";c.tl(!0,"o",a)}else Atlantic.Utils.createCookie("omni_click",a)}catch(e){window.console&&window.console.log&&console.log("Omniture Error "+e)}};c?window.setTimeout(e,10):e();
return!0};var b,e=/(@)([^,]+)|(e|r)'([^']+)'|(l|w).([\w]+)|(\$|t)([^,]*)/;b=function(a){for(var b=[];;){var c=e.exec(a);if(null===c)return b;for(var f=1;f<c.length;f+=2)if(c[f]){b.push([c[f],c[f+1]]);break}a=a.substr(c[0].length+1)}};var c=RegExp("^(((http|https):|())//"+document.location.host+"|([.]{0,2})/[^/])","i");$(document.body).on("click omniclick.omniture","[data-omni-click]",function(e){var g=f(e.target),k=g.elem,g=g.expr;if(!(void 0===g||"A"!==k.tagName)){var m=b(g),g=!1;null!==$(e.target).attr("href")&&
(g=null===$(e.target).attr("href").match(c));for(var q=[],n=0;n<m.length;n++)q.push(a.call(e.target,k,m[n][0],m[n][1]));k=q.join("`");Atlantic.Omniture.trackLink(k,g,!1)||(e.preventDefault(),e.stopPropagation())}})});(function(a){channel=location.pathname.split("/")[1];var f={years:"datepickerViewYears",moths:"datepickerViewMonths",days:"datepickerViewDays"},b=['<td><div class="datepickerInfo"><h5>All ENTRIES</h5><div class="datepickerWeekOptions"><a href="/'+channel+'/last-week/" class="datepickerPreviousWeek">&laquo; Previous Week</a><a href="/'+channel+'/this-week/" class="datepickerNextWeek">Current Week &raquo;</a></div><div class="datepickerDescription">Select a beginning and end date to search</div></div>',
'<table cellspacing="0" cellpadding="0" align="center">',"<thead>","<tr>",'<th class="datepickerGoPrev"><a href="#"><span><%=prev%></span></a></th>','<th colspan="5" class="datepickerMonth"><a href="#"><span></span></a></th>','<th class="datepickerGoNext"><a href="#"><span><%=next%></span></a></th>',"</tr>",'<tr class="datepickerDoW">',"<th><span><%=day1%></span></th>","<th><span><%=day2%></span></th>","<th><span><%=day3%></span></th>","<th><span><%=day4%></span></th>","<th><span><%=day5%></span></th>",
"<th><span><%=day6%></span></th>","<th><span><%=day7%></span></th>","</tr>","</thead>","</table></td>"],e='<tbody class="datepickerDays">;<tr>;<td class="<%=weeks[0].days[0].classname%>"><a href="#"><span><%=weeks[0].days[0].text%></span></a></td>;<td class="<%=weeks[0].days[1].classname%>"><a href="#"><span><%=weeks[0].days[1].text%></span></a></td>;<td class="<%=weeks[0].days[2].classname%>"><a href="#"><span><%=weeks[0].days[2].text%></span></a></td>;<td class="<%=weeks[0].days[3].classname%>"><a href="#"><span><%=weeks[0].days[3].text%></span></a></td>;<td class="<%=weeks[0].days[4].classname%>"><a href="#"><span><%=weeks[0].days[4].text%></span></a></td>;<td class="<%=weeks[0].days[5].classname%>"><a href="#"><span><%=weeks[0].days[5].text%></span></a></td>;<td class="<%=weeks[0].days[6].classname%>"><a href="#"><span><%=weeks[0].days[6].text%></span></a></td>;</tr>;<tr>;<td class="<%=weeks[1].days[0].classname%>"><a href="#"><span><%=weeks[1].days[0].text%></span></a></td>;<td class="<%=weeks[1].days[1].classname%>"><a href="#"><span><%=weeks[1].days[1].text%></span></a></td>;<td class="<%=weeks[1].days[2].classname%>"><a href="#"><span><%=weeks[1].days[2].text%></span></a></td>;<td class="<%=weeks[1].days[3].classname%>"><a href="#"><span><%=weeks[1].days[3].text%></span></a></td>;<td class="<%=weeks[1].days[4].classname%>"><a href="#"><span><%=weeks[1].days[4].text%></span></a></td>;<td class="<%=weeks[1].days[5].classname%>"><a href="#"><span><%=weeks[1].days[5].text%></span></a></td>;<td class="<%=weeks[1].days[6].classname%>"><a href="#"><span><%=weeks[1].days[6].text%></span></a></td>;</tr>;<tr>;<td class="<%=weeks[2].days[0].classname%>"><a href="#"><span><%=weeks[2].days[0].text%></span></a></td>;<td class="<%=weeks[2].days[1].classname%>"><a href="#"><span><%=weeks[2].days[1].text%></span></a></td>;<td class="<%=weeks[2].days[2].classname%>"><a href="#"><span><%=weeks[2].days[2].text%></span></a></td>;<td class="<%=weeks[2].days[3].classname%>"><a href="#"><span><%=weeks[2].days[3].text%></span></a></td>;<td class="<%=weeks[2].days[4].classname%>"><a href="#"><span><%=weeks[2].days[4].text%></span></a></td>;<td class="<%=weeks[2].days[5].classname%>"><a href="#"><span><%=weeks[2].days[5].text%></span></a></td>;<td class="<%=weeks[2].days[6].classname%>"><a href="#"><span><%=weeks[2].days[6].text%></span></a></td>;</tr>;<tr>;<td class="<%=weeks[3].days[0].classname%>"><a href="#"><span><%=weeks[3].days[0].text%></span></a></td>;<td class="<%=weeks[3].days[1].classname%>"><a href="#"><span><%=weeks[3].days[1].text%></span></a></td>;<td class="<%=weeks[3].days[2].classname%>"><a href="#"><span><%=weeks[3].days[2].text%></span></a></td>;<td class="<%=weeks[3].days[3].classname%>"><a href="#"><span><%=weeks[3].days[3].text%></span></a></td>;<td class="<%=weeks[3].days[4].classname%>"><a href="#"><span><%=weeks[3].days[4].text%></span></a></td>;<td class="<%=weeks[3].days[5].classname%>"><a href="#"><span><%=weeks[3].days[5].text%></span></a></td>;<td class="<%=weeks[3].days[6].classname%>"><a href="#"><span><%=weeks[3].days[6].text%></span></a></td>;</tr>;<tr>;<td class="<%=weeks[4].days[0].classname%>"><a href="#"><span><%=weeks[4].days[0].text%></span></a></td>;<td class="<%=weeks[4].days[1].classname%>"><a href="#"><span><%=weeks[4].days[1].text%></span></a></td>;<td class="<%=weeks[4].days[2].classname%>"><a href="#"><span><%=weeks[4].days[2].text%></span></a></td>;<td class="<%=weeks[4].days[3].classname%>"><a href="#"><span><%=weeks[4].days[3].text%></span></a></td>;<td class="<%=weeks[4].days[4].classname%>"><a href="#"><span><%=weeks[4].days[4].text%></span></a></td>;<td class="<%=weeks[4].days[5].classname%>"><a href="#"><span><%=weeks[4].days[5].text%></span></a></td>;<td class="<%=weeks[4].days[6].classname%>"><a href="#"><span><%=weeks[4].days[6].text%></span></a></td>;</tr>;<tr>;<td class="<%=weeks[5].days[0].classname%>"><a href="#"><span><%=weeks[5].days[0].text%></span></a></td>;<td class="<%=weeks[5].days[1].classname%>"><a href="#"><span><%=weeks[5].days[1].text%></span></a></td>;<td class="<%=weeks[5].days[2].classname%>"><a href="#"><span><%=weeks[5].days[2].text%></span></a></td>;<td class="<%=weeks[5].days[3].classname%>"><a href="#"><span><%=weeks[5].days[3].text%></span></a></td>;<td class="<%=weeks[5].days[4].classname%>"><a href="#"><span><%=weeks[5].days[4].text%></span></a></td>;<td class="<%=weeks[5].days[5].classname%>"><a href="#"><span><%=weeks[5].days[5].text%></span></a></td>;<td class="<%=weeks[5].days[6].classname%>"><a href="#"><span><%=weeks[5].days[6].text%></span></a></td>;</tr>;</tbody>'.split(";"),
c='<tbody class="<%=className%>">;<tr>;<td colspan="2"><a href="#"><span><%=data[0]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[1]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[2]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[3]%></span></a></td>;</tr>;<tr>;<td colspan="2"><a href="#"><span><%=data[4]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[5]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[6]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[7]%></span></a></td>;</tr>;<tr>;<td colspan="2"><a href="#"><span><%=data[8]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[9]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[10]%></span></a></td>;<td colspan="2"><a href="#"><span><%=data[11]%></span></a></td>;</tr>;</tbody>'.split(";"),
h={flat:!1,starts:1,prev:"&laquo;",next:"&raquo;",lastSel:!1,mode:"single",view:"days",calendars:1,format:"Y-m-d",position:"bottom",eventName:"click",onRender:function(){return{}},onChange:function(){return!0},onShow:function(){return!0},onBeforeShow:function(){return!0},onHide:function(){return!0},locale:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),daysShort:"Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),daysMin:"Su Mo Tu We Th Fr Sa Su".split(" "),months:"January February March April May June July August September October November December".split(" "),
monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekMin:"wk"}},g=function(d){var b=a(d).data("datepicker");d=a(d);var l=Math.floor(b.calendars/2),j,g,u,f,v=0,t,s,k,h,n;d.find("td>table tbody").remove();for(var p=0;p<b.calendars;p++){j=new Date(b.current);j.addMonths(-l+p);n=d.find("table").eq(p+1);switch(n[0].className){case "datepickerViewDays":u=m(j,"B, Y");break;case "datepickerViewMonths":u=j.getFullYear();break;case "datepickerViewYears":u=j.getFullYear()-6+" - "+(j.getFullYear()+
5)}n.find("thead tr:first th:eq(1) span").text(u);u=j.getFullYear()-6;g={data:[],className:"datepickerYears"};for(f=0;12>f;f++)g.data.push(u+f);h=tmpl(c.join(""),g);j.setDate(1);g={weeks:[],test:10};f=j.getMonth();u=(j.getDay()-b.starts)%7;j.addDays(-(u+(0>u?7:0)));for(v=0;42>v;){s=parseInt(v/7,10);k=v%7;g.weeks[s]||(t=j.getWeekNumber(),g.weeks[s]={week:t,days:[]});g.weeks[s].days[k]={text:j.getDate(),classname:[]};f!=j.getMonth()&&g.weeks[s].days[k].classname.push("datepickerNotInMonth");0==j.getDay()&&
g.weeks[s].days[k].classname.push("datepickerSunday");6==j.getDay()&&g.weeks[s].days[k].classname.push("datepickerSaturday");t=b.onRender(j);var q=j.valueOf();(t.selected||b.date==q||-1<a.inArray(q,b.date)||"range"==b.mode&&q>=b.date[0]&&q<=b.date[1])&&g.weeks[s].days[k].classname.push("datepickerSelected");t.disabled&&g.weeks[s].days[k].classname.push("datepickerDisabled");t.className&&g.weeks[s].days[k].classname.push(t.className);g.weeks[s].days[k].classname=g.weeks[s].days[k].classname.join(" ");
v++;j.addDays(1)}h=tmpl(e.join(""),g)+h;g={data:b.locale.monthsShort,className:"datepickerMonths"};h=tmpl(c.join(""),g)+h;n.append(h)}},k=function(a,b){if(a.constructor==Date)return new Date(a);for(var l=a.split(/\W+/),j=b.split(/\W+/),g,c,e,f,t,k=new Date,h=0;h<l.length;h++)switch(j[h]){case "d":case "e":g=parseInt(l[h],10);break;case "m":c=parseInt(l[h],10)-1;break;case "Y":case "y":e=parseInt(l[h],10);e+=100<e?0:29>e?2E3:1900;break;case "H":case "I":case "k":case "l":f=parseInt(l[h],10);break;
case "P":case "p":/pm/i.test(l[h])&&12>f?f+=12:/am/i.test(l[h])&&12<=f&&(f-=12);break;case "M":t=parseInt(l[h],10)}return new Date(void 0===e?k.getFullYear():e,void 0===c?k.getMonth():c,void 0===g?k.getDate():g,void 0===f?k.getHours():f,void 0===t?k.getMinutes():t,0)},m=function(a,b){var l=a.getMonth(),j=a.getDate(),g=a.getFullYear();a.getWeekNumber();var f=a.getDay(),e=a.getHours(),c=12<=e,k=c?e-12:e,h=a.getDayOfYear();0==k&&(k=12);for(var m=a.getMinutes(),n=a.getSeconds(),q=b.split(""),p,r=0;r<
q.length;r++){p=q[r];switch(q[r]){case "a":p=a.getDayName();break;case "A":p=a.getDayName(!0);break;case "b":p=a.getMonthName();break;case "B":p=a.getMonthName(!0);break;case "C":p=1+Math.floor(g/100);break;case "d":p=10>j?"0"+j:j;break;case "e":p=j;break;case "H":p=10>e?"0"+e:e;break;case "I":p=10>k?"0"+k:k;break;case "j":p=100>h?10>h?"00"+h:"0"+h:h;break;case "k":p=e;break;case "l":p=k;break;case "m":p=9>l?"0"+(1+l):1+l;break;case "M":p=10>m?"0"+m:m;break;case "p":case "P":p=c?"PM":"AM";break;case "s":p=
Math.floor(a.getTime()/1E3);break;case "S":p=10>n?"0"+n:n;break;case "u":p=f+1;break;case "w":p=f;break;case "y":p=(""+g).substr(2,2);break;case "Y":p=g}q[r]=p}return q.join("")},q=function(d){var b=a(d).data("datepicker"),l=a("#"+b.id);b.extraHeight||(d=a(d).find("div"),b.extraHeight=d.get(0).offsetHeight+d.get(1).offsetHeight,b.extraWidth=d.get(2).offsetWidth+d.get(3).offsetWidth);var j=l.find("table:first").get(0);d=j.offsetWidth;j=j.offsetHeight;l.css({width:d+b.extraWidth+"px",height:j+b.extraHeight+
"px"}).find("div.datepickerContainer").css({width:d+"px",height:j+"px"})},n=function(d){a(d.target).is("span")&&(d.target=d.target.parentNode);var b=a(d.target);if(b.is("a")){d.target.blur();if(b.hasClass("datepickerDisabled"))return!1;var l=a(this).data("datepicker");d=b.parent();var j=d.parent().parent().parent(),e=a("table",this).index(j.get(0))-1,f=new Date(l.current),c=!1,k=!1;if(d.is("div"))return!0;if(d.is("th"))if(d.hasClass("datepickerWeek")&&"range"==l.mode&&!d.next().hasClass("datepickerDisabled")){var h=
parseInt(d.next().text(),10);f.addMonths(e-Math.floor(l.calendars/2));d.next().hasClass("datepickerNotInMonth")&&f.addMonths(15<h?-1:1);f.setDate(h);l.date[0]=f.setHours(0,0,0,0).valueOf();f.setHours(23,59,59,0);f.addDays(6);l.date[1]=f.valueOf();c=k=!0;l.lastSel=!1}else if(d.hasClass("datepickerMonth"))switch(f.addMonths(e-Math.floor(l.calendars/2)),j.get(0).className){case "datepickerViewDays":j.get(0).className="datepickerViewMonths";b.find("span").text(f.getFullYear());break;case "datepickerViewMonths":j.get(0).className=
"datepickerViewYears";b.find("span").text(f.getFullYear()-6+" - "+(f.getFullYear()+5));break;case "datepickerViewYears":j.get(0).className="datepickerViewDays",b.find("span").text(m(f,"B, Y"))}else{if(d.parent().parent().is("thead")){switch(j.get(0).className){case "datepickerViewDays":l.current.addMonths(d.hasClass("datepickerGoPrev")?-1:1);break;case "datepickerViewMonths":l.current.addYears(d.hasClass("datepickerGoPrev")?-1:1);break;case "datepickerViewYears":l.current.addYears(d.hasClass("datepickerGoPrev")?
-12:12)}k=!0}}else if(d.is("td")&&!d.hasClass("datepickerDisabled")){switch(j.get(0).className){case "datepickerViewMonths":l.current.setMonth(j.find("tbody.datepickerMonths td").index(d));l.current.setFullYear(parseInt(j.find("thead th.datepickerMonth span").text(),10));l.current.addMonths(Math.floor(l.calendars/2)-e);j.get(0).className="datepickerViewDays";break;case "datepickerViewYears":l.current.setFullYear(parseInt(b.text(),10));j.get(0).className="datepickerViewMonths";break;default:switch(h=
parseInt(b.text(),10),f.addMonths(e-Math.floor(l.calendars/2)),d.hasClass("datepickerNotInMonth")&&f.addMonths(15<h?-1:1),f.setDate(h),l.mode){case "multiple":h=f.setHours(0,0,0,0).valueOf();-1<a.inArray(h,l.date)?a.each(l.date,function(a,d){if(d==h)return l.date.splice(a,1),!1}):l.date.push(h);break;case "range":l.lastSel||(l.date[0]=f.setHours(0,0,0,0).valueOf());h=f.setHours(23,59,59,0).valueOf();h<l.date[0]?(l.date[1]=l.date[0]+86399E3,l.date[0]=h-86399E3):l.date[1]=h;l.lastSel=!l.lastSel;break;
default:l.date=f.valueOf()}}c=k=!0}k&&g(this);c&&l.onChange.apply(this,r(l))}return!1},r=function(d){var b;if("single"==d.mode)return b=new Date(d.date),[m(b,d.format),b,d.el];b=[[],[],d.el];a.each(d.date,function(a,j){var f=new Date(j);b[0].push(m(f,d.format));b[1].push(f)});return b},y=function(a,b,l){if(a==b)return!0;if(a.contains)return a.contains(b);if(a.compareDocumentPosition)return!!(a.compareDocumentPosition(b)&16);for(b=b.parentNode;b&&b!=l;){if(b==a)return!0;b=b.parentNode}return!1},x=
function(){var b,f,l,j,e=a("#"+a(this).data("datepickerId"));if(!e.is(":visible")){var c=e.get(0);g(c);var h=e.data("datepicker");h.onBeforeShow.apply(this,[e.get(0)]);var k=a(this).offset();j="CSS1Compat"==document.compatMode;b=window.pageXOffset||(j?document.documentElement.scrollLeft:document.body.scrollLeft);f=window.pageYOffset||(j?document.documentElement.scrollTop:document.body.scrollTop);l=window.innerWidth||(j?document.documentElement.clientWidth:document.body.clientWidth);j=window.innerHeight||
(j?document.documentElement.clientHeight:document.body.clientHeight);var m=k.top,n=k.left;a.curCSS(c,"display");e.css({visibility:"hidden",display:"block"});q(c);switch(h.position){case "top":m-=c.offsetHeight;break;case "left":n-=c.offsetWidth;break;case "right":n+=this.offsetWidth;break;case "bottom":m+=this.offsetHeight}m+c.offsetHeight>f+j&&(m=k.top-c.offsetHeight);m<f&&(m=k.top+this.offsetHeight+c.offsetHeight);n+c.offsetWidth>b+l&&(n=k.left-c.offsetWidth);n<b&&(n=k.left+this.offsetWidth);e.css({visibility:"visible",
display:"block",top:m+"px",left:n+"px"});!1!=h.onShow.apply(this,[e.get(0)])&&e.show();a(document).bind("mousedown",{cal:e,trigger:this},w)}return!1},w=function(b){b.target!=b.data.trigger&&!y(b.data.cal.get(0),b.target,b.data.cal.get(0))&&(!1!=b.data.cal.data("datepicker").onHide.apply(this,[b.data.cal.get(0)])&&b.data.cal.hide(),a(document).unbind("mousedown",w))};a.fn.extend({DatePicker:function(d){d=a.extend({},h,d||{});var e=d.locale;Date.prototype.tempDate||(Date.prototype.tempDate=null,Date.prototype.months=
e.months,Date.prototype.monthsShort=e.monthsShort,Date.prototype.days=e.days,Date.prototype.daysShort=e.daysShort,Date.prototype.getMonthName=function(a){return this[a?"months":"monthsShort"][this.getMonth()]},Date.prototype.getDayName=function(a){return this[a?"days":"daysShort"][this.getDay()]},Date.prototype.addDays=function(a){this.setDate(this.getDate()+a);this.tempDate=this.getDate()},Date.prototype.addMonths=function(a){null==this.tempDate&&(this.tempDate=this.getDate());this.setDate(1);this.setMonth(this.getMonth()+
a);this.setDate(Math.min(this.tempDate,this.getMaxDays()))},Date.prototype.addYears=function(a){null==this.tempDate&&(this.tempDate=this.getDate());this.setDate(1);this.setFullYear(this.getFullYear()+a);this.setDate(Math.min(this.tempDate,this.getMaxDays()))},Date.prototype.getMaxDays=function(){var a=new Date(Date.parse(this)),b=28,d;d=a.getMonth();for(b=28;a.getMonth()==d;)b++,a.setDate(b);return b-1},Date.prototype.getFirstDay=function(){var a=new Date(Date.parse(this));a.setDate(1);return a.getDay()},
Date.prototype.getWeekNumber=function(){var a=new Date(this);a.setDate(a.getDate()-(a.getDay()+6)%7+3);var b=a.valueOf();a.setMonth(0);a.setDate(4);return Math.round((b-a.valueOf())/6048E5)+1},Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),b=new Date(this.getFullYear(),0,0,0,0,0);return Math.floor(36E5*((a-b)/24))});d.calendars=Math.max(1,parseInt(d.calendars,10)||1);d.mode=/single|multiple|range/.test(d.mode)?d.mode:"single";return this.each(function(){if(!a(this).data("datepicker")){d.el=
this;d.date.constructor==String&&(d.date=k(d.date,d.format),d.date.setHours(0,0,0,0));if("single"!=d.mode)if(d.date.constructor!=Array)d.date=[d.date.valueOf()],"range"==d.mode&&d.date.push((new Date(d.date[0])).setHours(23,59,59,0).valueOf());else{for(var e=0;e<d.date.length;e++)d.date[e]=k(d.date[e],d.format).setHours(0,0,0,0).valueOf();"range"==d.mode&&(d.date[1]=(new Date(d.date[1])).setHours(23,59,59,0).valueOf())}else d.date=d.date.valueOf();d.current=d.current?k(d.current,d.format):new Date;
d.current.setDate(1);d.current.setHours(0,0,0,0);var e="datepicker_"+parseInt(1E3*Math.random()),j;d.id=e;a(this).data("datepickerId",d.id);var c=a('<div class="datepicker"><div class="datepickerBorderT" /><div class="datepickerBorderB" /><div class="datepickerBorderL" /><div class="datepickerBorderR" /><div class="datepickerBorderTL" /><div class="datepickerBorderTR" /><div class="datepickerBorderBL" /><div class="datepickerBorderBR" /><div class="datepickerContainer"><table cellspacing="0" cellpadding="0" ><tbody><tr></tr></tbody></table></div></div>').attr("id",
e).bind("click",n).data("datepicker",d);d.className&&c.addClass(d.className);for(var h="",e=0;e<d.calendars;e++)j=d.starts,0<e&&(h+='<td class="datepickerSpace"><div></div></td>'),h+=tmpl(b.join(""),{week:d.locale.weekMin,prev:d.prev,next:d.next,day1:d.locale.daysMin[j++%7],day2:d.locale.daysMin[j++%7],day3:d.locale.daysMin[j++%7],day4:d.locale.daysMin[j++%7],day5:d.locale.daysMin[j++%7],day6:d.locale.daysMin[j++%7],day7:d.locale.daysMin[j++%7]});c.find("tr:first").append(h).find("table").addClass(f[d.view]);
g(c.get(0));d.flat?(c.appendTo(this).show().css("position","relative"),q(c.get(0))):(c.appendTo(document.body),a(this).bind(d.eventName,x))}})},DatePickerHide:function(){return this.each(function(){a(this).data("datepickerId")&&a("#"+a(this).data("datepickerId")).hide()})},DatePickerShow:function(){return this.each(function(){a(this).data("datepickerId")&&x.apply(this)})},DatePickerSetDate:function(b,e){return this.each(function(){if(a(this).data("datepickerId")){var f=a("#"+a(this).data("datepickerId")),
c=f.data("datepicker");c.date=b;c.date.constructor==String&&(c.date=k(c.date,c.format),c.date.setHours(0,0,0,0));if("single"!=c.mode)if(c.date.constructor!=Array)c.date=[c.date.valueOf()],"range"==c.mode&&c.date.push((new Date(c.date[0])).setHours(23,59,59,0).valueOf());else{for(var h=0;h<c.date.length;h++)c.date[h]=k(c.date[h],c.format).setHours(0,0,0,0).valueOf();"range"==c.mode&&(c.date[1]=(new Date(c.date[1])).setHours(23,59,59,0).valueOf())}else c.date=c.date.valueOf();e&&(c.current=new Date("single"!=
c.mode?c.date[0]:c.date));g(f.get(0))}})},DatePickerGetDate:function(b){if(0<this.size())return r(a("#"+a(this).data("datepickerId")).data("datepicker"))[b?0:1]},DatePickerClear:function(){return this.each(function(){if(a(this).data("datepickerId")){var b=a("#"+a(this).data("datepickerId")),c=b.data("datepicker");"single"!=c.mode&&(c.date=[],g(b.get(0)))}})},DatePickerLayout:function(){return this.each(function(){if(a(this).data("datepickerId")){var b=a("#"+a(this).data("datepickerId"));b.data("datepicker").flat&&
q(b.get(0))}})}})})(jQuery);(function(){var a={};this.tmpl=function b(e,c){var h=!/\W/.test(e)?a[e]=a[e]||b(document.getElementById(e).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return c?h(c):h}})();
(function(a){var f={init:[]},b=window.EYE={init:function(){a.each(f.init,function(a,b){b.call()})},extend:function(a){for(var b in a)void 0!=a[b]&&(this[b]=a[b])},register:function(a,b){f[b]||(f[b]=[]);f[b].push(a)}};a(b.init)})(jQuery);
(function(a){var f=function(){var b=a("ul.navigationTabs a").removeClass("active").index(this);a(this).addClass("active");a("div.tab").hide().eq(b).show()};EYE.register(function(){var b=window.location.hash.replace("#",""),b=a("ul.navigationTabs a").bind("click",f).filter("a[rel="+b+"]");0==b.size()&&(b=a("ul.navigationTabs a:first"));f.apply(b.get(0));a("#date").DatePicker({flat:!0,date:"2008-07-31",current:"2008-07-31",calendars:1,starts:1,view:"years"});var e=new Date;e.addDays(-10);var c=new Date;
c.addDays(-5);c.setHours(0,0,0,0);a("#date2").DatePicker({flat:!0,date:["2008-07-31","2008-07-28"],current:"2008-07-31",format:"Y-m-d",calendars:1,mode:"multiple",onRender:function(a){return{disabled:a.valueOf()<e.valueOf(),className:a.valueOf()==c.valueOf()?"datepickerSpecial":!1}},onChange:function(){},starts:0});a("#clearSelection").bind("click",function(){a("#date3").DatePickerClear();return!1});a("#date3").DatePicker({flat:!0,date:["2009-12-28","2010-01-23"],current:"2010-01-01",calendars:3,
mode:"range",starts:1});a(".inputDate").DatePicker({format:"m/d/Y",date:a("#inputDate").val(),current:a("#inputDate").val(),starts:1,position:"right",onBeforeShow:function(){a("#inputDate").DatePickerSetDate(a("#inputDate").val(),!0)},onChange:function(b){a("#inputDate").val(b);a("#closeOnSelect input").attr("checked")&&a("#inputDate").DatePickerHide()}});b=new Date;b.addDays(-4);var h=new Date;a("#widgetCalendar").DatePicker({flat:!0,format:"d B, Y",date:[new Date(b),new Date(h)],calendars:3,mode:"range",
starts:1,onChange:function(b){a("#widgetField span").get(0).innerHTML=b.join(" &divide; ")}});var g=!1;a("#widgetField>a").bind("click",function(){a("#widgetCalendar").stop().animate({height:g?0:a("#widgetCalendar div.datepicker").get(0).offsetHeight},500);g=!g;return!1});a("#widgetCalendar div.datepicker").css("position","absolute")},"init")})(jQuery);
var selectDate=function(){var a=$("#calendar").DatePickerGetDate("formatted"),a=(new String(a)).split(",");a[0]!=a[1]&&(window.location=baseLocation+"date-filter/?startDate="+a[0]+"&endDate="+a[1],$("#byDateDropdown .expandingTitle").html("Loading..."))};0<$("#calendar").length&&$("#calendar").DatePicker({flat:!0,date:["YYYY-MM-DD","YYYY-MM-DD"],calendars:1,mode:"range",starts:7,onChange:selectDate});
