(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.administrationToolbar={get:function(){var s;s=a(".admin-bar");if(s.length>0)s=s;else{s=a("form");if(s.length>1)s=a("body");s.prepend(a('<div class="admin-bar-header"></div><div class="admin-bar site"></div><div class="admin-bar-footer"></div>'));s=a(".admin-bar")}return s}}})(jQuery,window);
(function(a){var s=!a.browser.msie&&"oninput"in document.createElement("input")&&"oninput"in document.createElement("textarea");a.event.special.textinput={setup:function(){var o=a(this);if(s)o.bind("input",function(k){o.trigger("textinput",{which:k.which})});else{var f;o.bind({keydown:function(){f=o.val()},keyup:function(k){var l=o.val();l!==f&&o.trigger("textinput",{which:k.which});f=l}})}}}})(jQuery);
(function(a){var s=function(d,r){d=a(d);var p=d.data("__COMPOSER_CONTEXT");if(!p&&r){p=o(d,r);d.data("__COMPOSER_CONTEXT",p)}return p},o=function(d,r){var p=a.extend({},a.fn.evolutionComposer.defaults,r||{});p={input:d,settings:p,plugins:a.map(p.plugins,function(m){return typeof m=="string"?a.fn.evolutionComposer.plugins[m]:m}),ranges:[],activePlugin:false};p.pluginContext=f(p);p.input.evolutionHighlight();k(p);return p},f=function(d){return{settings:d.settings,input:d.input,data:function(r,p){return typeof p!==
"undefined"?d.input.data(r,p):d.input.data(r)},val:function(r){return typeof r!=="undefined"?d.input.val(r):d.input.val()},release:function(){d.activePlugin.onDeactivate&&d.activePlugin.onDeactivate.call(d.input,d.pluginContext);d.activePlugin=false},caretPosition:function(){return c(d.input)},currentWord:function(r){r=a.extend({allowedWhiteSpaceBeforeCaret:0,allowedWhiteSpaceAfterCaret:0},r||{});var p=r.caretPosition||c(d.input),m="",q=a(d.input).val(),t="",w=0,v=p,u=0;if(p<q.length&&!(q[p]==="\n"||
q[p]==="\t")){t=q.substring(p);w=n(t);if(w<0)w=t.indexOf("\n");if(w<0)w=t.indexOf("\t");if(w<0)w=t.length;for(u=0;u<r.allowedWhiteSpaceAfterCaret;u++)if(w>0){var x=q.substring(p+w+1);nextWhiteSpaceIndex=n(x);nextWhiteSpaceIndex=nextWhiteSpaceIndex===-1?x.length:nextWhiteSpaceIndex;if(nextWhiteSpaceIndex>0)w+=nextWhiteSpaceIndex+1;else break}if(w>0){v=0;m+=t.substring(0,w)}}if(p>0&&!(q[p-1]==="\n"||q[p-1]==="\t")){t=q.substring(0,p);w=g(t);for(u=0;u<r.allowedWhiteSpaceBeforeCaret;u++)if(w>0){p=g(q.substring(0,
w));if(p!==w)w=p;else break}if(w===t.length)w=t.lastIndexOf("\n");if(w===t.length)w=t.lastIndexOf("\t");if(w===t.length)w=t.length-1;if(w<t.length-1){v=w+1;m=t.substring(v)+m}}return{value:m,start:v,stop:v+m.length}},replace:function(r,p,m){var q=d.input.val();d.input.val(q.substring(0,r)+m+q.substring(p))},clearHighlights:function(r){var p=[];a.each(d.ranges,function(m,q){if(!r||q.className!==r)p.push(q)});d.ranges=p;d.input.evolutionHighlight({ranges:d.ranges})},addHighlight:function(r){d.ranges.push(r)},
renderHighlights:function(){d.input.evolutionHighlight({ranges:d.ranges})}}},k=function(d){d.input.bind({keypress:function(r){l(d,"onkeypress",r)},keydown:function(r){l(d,"onkeydown",r)},textinput:function(r){h(d,r);l(d,"oninput",r);j(d)}})},l=function(d,r,p){var m=true;if(d.activePlugin&&d.activePlugin[r])m=d.activePlugin[r].call(p.target,d.pluginContext,p);if(m){if(d[r])(m=d[r].call(p.target,p))||p.preventDefault()}else p.preventDefault()},h=function(d){d.activePlugin||a.each(d.plugins,function(r,
p){if(p.shouldActivate&&p.shouldActivate.call(d.input,d.pluginContext)){d.activePlugin=p;p.onActivate&&p.onActivate.call(d.input,d.pluginContext);return false}})},j=function(d){a.each(d.plugins,function(r,p){p.onTransform&&p.onTransform.call(d.input,d.pluginContext)})},n=function(d){var r=[];a.each([" ","\t","\n"],function(p,m){var q=d.indexOf(m);q>=0&&r.push(q)});r.sort();return r.length>0?r[0]:-1},g=function(d){var r=[];a.each([" ","\t","\n"],function(p,m){var q=d.lastIndexOf(m);q>=0&&r.push(q)});
r.sort();return r.length>0?r[r.length-1]:-1},c=function(d){d=d.get(0);if(d.selectionStart)return d.selectionStart;else if(document.selection){var r=document.selection.createRange();if(r===null)return 0;d=d.createTextRange();var p=d.duplicate();d.moveToBookmark(r.getBookmark());p.setEndPoint("EndToStart",d);return p.text.length}return 0},e=function(d){typeof a.fn.evolutionResize!=="undefined"&&d.input.evolutionResize().bind("evolutionResize",function(){d.input.evolutionHighlight("resize",d.input.width(),
d.input.height())})},b={init:function(d){return this.filter("textarea").each(function(){var r=a(this),p=s(r,d);e(p);p!==null&&a.each(p.plugins,function(m,q){q.init&&q.init.call(r,p.pluginContext)});setTimeout(function(){r.focus()},10)})},val:function(d){if(typeof d!=="undefined"){var r=s(this);if(r){r.input.val(d);j(r)}}else{r=s(this);var p="";if(r){p=r.input.val();a.each(r.plugins,function(m,q){if(q.val)p=q.val.call(r.input,p,r.pluginContext)})}return p}return this},onkeydown:function(d){var r=s(this);
if(r)r.onkeydown=d;return this},oninput:function(d){var r=s(this);if(r)r.oninput=d;return this},resize:function(d,r){var p=s(this);p&&p.input.evolutionHighlight("resize",d,r);return this}};a.fn.evolutionComposer=function(d){if(b[d])return b[d].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof d==="object"||!d)return b.init.apply(this,arguments);else a.error("Method "+d+" does not exist on jQuery.evolutionComposer")};a.fn.evolutionComposer.defaults={plugins:[]};a.fn.evolutionComposer.plugins=
{}})(jQuery);
(function(a){var s=function(){for(var f={},k={},l=0,h=function(p){var m=p.data("_tagged_tags");if(typeof m==="undefined"||m===null){m=[];p.data("_tagged_tags",m)}return m},j=function(p,m,q){var t=h(p);t[t.length]=m;p.release();if(q){q=d(p);p.replace(q.start,q.stop+1,m.decodedName+" ")}n(p);b(p,0)},n=function(p){var m=h(p).reverse(),q=p.val();p.clearHighlights(p.settings.highlightClass||g);var t={};a.each(m,function(w,v){if(v&&v.decodedName!==null&&v.decodedName.length>0){var u=q.indexOf(v.decodedName);if(u<
0||t[u])m.splice(w,1);else for(;u>=0;){p.addHighlight({start:u,stop:v.decodedName.length+u,className:p.settings.highlightClass||g});t[u]=true;u=q.indexOf(v.decodedName,u+1)}}});p.renderHighlights()},g="composer-hashtag-highlight",c=function(){},e=null,b=function(p,m){if(typeof m!=="undefined"){p.data("_allowed_spaces",m);return m}else return p.data("_allowed_spaces")||0},d=function(p){var m=p.val().substring(0,l),q=null;a.each(k,function(w,v){if(v!==null&&v.length>0&&m.match("#"+a.telligent.evolution.regex.encode(w)+
"$")){q="#"+w;return false}});if(q!==null){var t=m.length-q.length;b(p,q.split(" ").length-1);return{value:q,start:t,stop:t+q.length}}else return p.currentWord({caretPosition:l,allowedWhiteSpaceBeforeCaret:b(p)})},r=0;r<1;r++)f["#".charCodeAt(r)]=true;return{init:function(p){c=p.settings.onTagList||a.fn.evolutionComposer.plugins.hashtags.defaults.onTagList;p.input.bind(o.selectedEventName,function(){j(p,o.selection(),true)});p.input.bind({blur:function(){setTimeout(function(){p.release()},100)},keydown:function(){l=
p.caretPosition()+1}})},onTransform:function(p){n(p)},shouldActivate:function(p){return d(p).value.indexOf("#")===0},onActivate:function(p){p.data("_hashtag_composer_active",true);a(document).bind("click.ui-composer-hashtags",function(){p.release();a(document).unbind(".ui-composer-hashtags")})},onDeactivate:function(p){p.data("_hashtag_composer_active",false);o.hide();p.input.focus();b(p,0)},val:function(p,m){var q=h(m);a.each(q,function(t,w){p=p.replace(RegExp(a.telligent.evolution.regex.encode(w.decodedName),
"g"),w.token)});return p},onkeydown:function(p,m){if(m.which===32)b(p,b(p)+1);else if(m.which===27){p.release();return false}else if(m.which===13||m.which===9){var q=o.selection();q?j(p,q,true):p.release();return false}else if(m.which===38){o.moveHighlightUp();return false}else if(m.which===40){o.moveHighlightDown();return false}return true},onkeypress:function(p,m){typeof f[m.which]!=="undefined"&&p.release();return true},oninput:function(p){clearTimeout(e);o.loading(p.input);e=setTimeout(function(){var m=
d(p).value.substring(1);if(m.length>0){var q=function(t){t!==null&&t.length>0?o.show(p.input,t,m):p.release()};if(typeof k[m]!=="undefined")p.data("_hashtag_composer_active")&&q(k[m]);else c(m,function(t){if(p.data("_hashtag_composer_active")){if(t)t=a.map(t,function(w){return{name:w.name,token:w.token,decodedName:a.telligent.evolution.html.decode(w.name)}});k[m]=t;d(p).value.substring(1)==m&&q(t)}})}else p.release()},500);return true}}}(),o=function(){var f=null,k=null,l=null,h=function(g){k=g;if(f===
null){f=a('<ul class="composer-hashtag-selector"></ul>').hide().appendTo(a("body"));l=a('<li class="loading">...</li>');var c=0,e=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){c+=1;if(c===3)c=0;l.get(0).innerHTML=e[c]},175);f.delegate("li","click",function(){if(k!==null){f.find("li.highlight").removeClass("highlight");a(this).addClass("highlight");k.trigger(n.selectedEventName)}})}},j=function(){if(k!==null){var g=
k.offset(),c=a(k);f.css({width:c.outerWidth()-2,top:g.top+c.outerHeight()-1,left:g.left})}},n={selectedEventName:"HASHTAG_SELECTED",show:function(g,c,e){h(g);j();f.hide().empty();var b=RegExp(a.telligent.evolution.regex.encode(a.telligent.evolution.html.encode(e)),"i");a.each(c,function(d,r){var p=r.name.match(b);p=p!==null?a("<li>"+r.name.replace(b,"<strong>"+p[0]+"</strong>")+"</li>"):a("<li>"+r.name+"</li>");p.data("tagData",r);f.append(p)});f.show()},hide:function(){f!==null&&f.hide().empty()},
loading:function(g){h(g);j();f.hide().empty().append(l).show()},moveHighlightUp:function(){var g=f.find("li");if(g.length!==0){var c=g.length;a.each(g,function(e,b){if(a(b).hasClass("highlight")){c=e;a(b).removeClass("highlight")}});if(c-1<0)c=g.length;a(g.get(c-1)).addClass("highlight")}},moveHighlightDown:function(){var g=f.find("li");if(g.length!==0){var c=-1;a.each(g,function(e,b){if(a(b).hasClass("highlight")){c=e;a(b).removeClass("highlight")}});if(c+1>=g.length)c=-1;a(g.get(c+1)).addClass("highlight")}},
selection:function(){var g=f.find("li");if(g.length===0)return null;var c=g.filter("li.highlight");return c!==null&&c.length>0?c.data("tagData"):a(g.get(0)).data("tagData")}};return n}();a.fn.evolutionComposer.plugins.hashtags=s;a.fn.evolutionComposer.plugins.hashtags.defaults={onTagList:function(f,k){a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/hashtags.json?IncludeFields=Token,PreviewHtml",data:{QueryText:f,PageSize:5},cache:false,dataType:"json",success:function(l){if(l.HashTags&&
l.HashTags.length>0){l=a.map(l.HashTags,function(h){return{name:h.PreviewHtml,token:h.Token}});k(l)}else k(null)}})}}})(jQuery,window);
(function(a){var s=function(){var f={};allowedSpacesKey="_allowed_spaces";isActiveKey="_hashtag_composer_active";caretPosition=0;getMentions=function(k){var l=k.data("_mentioned_mentionables");if(typeof l==="undefined"||l===null){l=[];k.data("_mentioned_mentionables",l)}return l};mentionMentionable=function(k,l){var h=getMentions(k);h[h.length]=l;k.release();h=effectiveCurrentWord(k);k.replace(h.start,h.stop+1,l.decodedName+" ");updateHighlights(k);allowedSpaces(k,0)};updateHighlights=function(k){var l=
getMentions(k),h=k.val();k.clearHighlights(k.settings.highlightClass||mentionHighlightClass);a.each(l,function(j,n){if(n&&n.decodedName!==null&&n.decodedName.length>0){var g=h.indexOf(n.decodedName);if(g<0)l.splice(j,1);else for(;g>=0;){k.addHighlight({start:g,stop:n.decodedName.length+g,className:k.settings.highlightClass||mentionHighlightClass});g=h.indexOf(n.decodedName,g+1)}}});k.renderHighlights()};mentionHighlightClass="composer-mentionable-mention-highlight";getMentionables=function(){};getMentionablesTimeout=
null;allowedSpaces=function(k,l){if(typeof l!=="undefined"){k.data("_allowed_spaces",l);return l}else return k.data("_allowed_spaces")||0};effectiveCurrentWord=function(k){var l=k.val().substring(0,caretPosition),h=null;a.each(f,function(n,g){if(g!==null&&g.length>0&&l.match("@"+a.telligent.evolution.regex.encode(n)+"$")){h="@"+n;return false}});if(h!==null){var j=l.length-h.length;allowedSpaces(k,h.split(" ").length-1);return{value:h,start:j,stop:j+h.length}}else return k.currentWord({caretPosition:caretPosition,
allowedWhiteSpaceBeforeCaret:allowedSpaces(k)})};return{init:function(k){getMentionables=k.settings.onMentionableList||a.fn.evolutionComposer.plugins.mentions.defaults.onMentionableList;k.input.bind(o.selectedEventName,function(){mentionMentionable(k,o.selection())});k.input.bind({blur:function(){setTimeout(function(){k.release()},100)},keydown:function(){caretPosition=k.caretPosition()+1}})},onTransform:function(k){updateHighlights(k)},shouldActivate:function(k){return effectiveCurrentWord(k).value.indexOf("@")===
0},onActivate:function(k){k.data(isActiveKey,true);a(document).bind("click.mentions",function(){k.release();a(document).unbind(".mentions")})},onDeactivate:function(k){k.data(isActiveKey,false);o.hide();k.input.focus();allowedSpaces(k,0)},val:function(k,l){var h=getMentions(l);a.each(h,function(j,n){k=k.replace(n.decodedName,n.token)});return k},onkeydown:function(k,l){if(l.which===32)allowedSpaces(k,allowedSpaces(k)+1);else if(l.which===27){k.release();return false}else if(l.which===13||l.which===
9){var h=o.selection();h?mentionMentionable(k,h):k.release();return false}else if(l.which===38){o.moveHighlightUp();return false}else if(l.which===40){o.moveHighlightDown();return false}return true},onkeypress:function(){return true},oninput:function(k){clearTimeout(getMentionablesTimeout);o.loading(k.input);getMentionablesTimeout=setTimeout(function(){var l=effectiveCurrentWord(k).value.substring(1);if(l.length>1){var h=function(j){j!==null&&j.length>0?o.show(k.input,j,l):k.release()};if(typeof f[l]!==
"undefined")k.data(isActiveKey)&&h(f[l]);else getMentionables(l,function(j){if(k.data(isActiveKey)){if(j)j=a.map(j,function(n){return{name:n.name,token:n.token,decodedName:a.telligent.evolution.html.decode(n.name)}});f[l]=j;effectiveCurrentWord(k).value.substring(1)==l&&h(j)}})}else k.release()},500);return true}}}(),o=function(){var f=null,k=null,l=null,h=function(g){k=g;if(f===null){f=a('<ul class="composer-mentionable-selector"></ul>').hide().appendTo(a("body"));l=a('<li class="loading">...</li>');
var c=0,e=["<strong>&bull;</strong>&bull;&bull;","&bull;<strong>&bull;</strong>&bull;","&bull;&bull;<strong>&bull;</strong>"];setInterval(function(){c+=1;if(c===3)c=0;l.get(0).innerHTML=e[c]},175);f.delegate("li","click",function(){if(k!==null){f.find("li.highlight").removeClass("highlight");a(this).addClass("highlight");k.trigger(n.selectedEventName)}})}},j=function(){if(k!==null){var g=k.offset(),c=a(k);f.css({width:c.outerWidth()-2,top:g.top+c.outerHeight()-1,left:g.left})}},n={selectedEventName:"MENTIONABLE_SELECTED",
show:function(g,c,e){h(g);j();f.hide().empty();var b=RegExp(a.telligent.evolution.regex.encode(a.telligent.evolution.html.encode(e)),"i");a.each(c,function(d,r){var p=r.name.match(b);p=p!==null?a("<li>"+r.name.replace(b,"<strong>"+p[0]+"</strong>")+"</li>"):a("<li>"+r.name+"</li>");p.data("mentionableData",r);f.append(p)});f.show()},hide:function(){f!==null&&f.hide().empty()},loading:function(g){h(g);j();f.hide().empty().append(l).show()},moveHighlightUp:function(){var g=f.find("li");if(g.length!==
0){var c=g.length;a.each(g,function(e,b){if(a(b).hasClass("highlight")){c=e;a(b).removeClass("highlight")}});if(c-1<0)c=g.length;a(g.get(c-1)).addClass("highlight")}},moveHighlightDown:function(){var g=f.find("li");if(g.length!==0){var c=-1;a.each(g,function(e,b){if(a(b).hasClass("highlight")){c=e;a(b).removeClass("highlight")}});if(c+1>=g.length)c=-1;a(g.get(c+1)).addClass("highlight")}},selection:function(){var g=f.find("li");if(g.length===0)return null;var c=g.filter("li.highlight");return c!==
null&&c.length>0?c.data("mentionableData"):a(g.get(0)).data("mentionableData")}};return n}();a.fn.evolutionComposer.plugins.mentions=s;a.fn.evolutionComposer.plugins.mentions.defaults={onMentionableList:function(f,k){a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/mentionables.json?IncludeFields=Token,PreviewHtml",data:{QueryText:f,PageSize:20},cache:false,dataType:"json",success:function(l){if(l.Mentionables&&l.Mentionables.length>0){l=a.map(l.Mentionables,function(h){return{name:h.PreviewHtml,
token:h.Token}});k(l)}else k(null)}})}}})(jQuery,window);
(function(a){var s=/(\b(http):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,o=function(){var f={init:function(k){k.highlighClassName=k.highlighClassName||f.defaults.highlighClassName},onTransform:function(k){var l;l=(k.val()||"").match(s);l=l!==null&&l.length>0?l[0]:null;if(l!==null){var h;h=k.data("_composer_urlpreview_data");if(h===null||typeof h==="undefined"){h={};k.data("_composer_urlpreview_data",h)}h=h;var j=k.val().indexOf(l);if(j>=0&&typeof h.lastRange==="undefined"||h.lastRange.start!==
j||h.lastRange.stop!==j+l.length){h.lastRange={start:j,stop:j+l.length};k.clearHighlights(k.highlighClassName);k.addHighlight({start:j,stop:j+l.length,className:k.highlighClassName});k.renderHighlights()}}else k.clearHighlights(k.highlighClassName)},shouldActivate:function(){return false},val:function(k){return k},onkeydown:function(){return true},oninput:function(){return true}};f.defaults={highlighClassName:"composer-url-highlight",loadingText:"..."};return f}();a.fn.evolutionComposer.plugins.urlhighlight=
o})(jQuery,window);
(function(a,s){if(typeof a.telligent==="undefined")a.telligent={};if(typeof a.telligent.evolution==="undefined")a.telligent.evolution={};var o={baseUrl:"",authorizationCookieName:"AuthorizationCookie",defaultErrorMessage:"An error occured while communicating with the server.",defaultMultiErrorMessagePrefix:"The following errors occured while communicating with the server:\t "},f=["RecordNotFound","BadRequest","Conflict","Unauthorized","Unknown"],k=function(j,n){j.url&&j.data&&typeof j.data!=="string"&&
a.each(j.data,function(b,d){var r=RegExp("{"+b+"}","gim");if(j.url.match(r)){j.url=j.url.replace(r,s.encodeURIComponent(d));delete j.data[b]}});var g=j.beforeSend,c=j.error,e=a.extend({},o,j);a.extend(j,{type:n==="GET"?n:"POST",beforeSend:function(b){typeof g!=="undefined"&&g(b);h(b);if(n==="PUT"||n==="DELETE")b.setRequestHeader("Rest-Method",n)},error:function(b,d,r){if(!(b.readyState===0||b.status===0)){d=e.defaultErrorMessage;var p=/(?:<|>)/g,m=null;try{var q=a.parseJSON(b.responseText);if(q&&
q.Errors&&a.isArray(q.Errors)&&q.Errors.length>0){var t=[];a.each(q.Errors,function(u,x){var y=x.split(":",2);if(y.length===1)t.push(y[0].replace(p,""));else a.inArray(y[0],f)>=0&&t.push(y[1].replace(p,""))});if(t.length===1||t.length>1&&typeof a.telligent.evolution.notifications==="undefined")d=t[0];else if(t.length>1){m=t[0];d=e.defaultMultiErrorMessagePrefix;d+="<ul>";a.each(t,function(u,x){d+="<li>"+x+"</li>"});d+="</ul>"}}if(d===null||a.trim(d)==="")d=e.defaultErrorMessage}catch(w){}if(typeof c!==
"undefined")c(b,m||d,r);else try{a.telligent.evolution.notifications.show(d,{type:"error"})}catch(v){alert(m||d)}}}});return a.ajax(j)},l=function(j,n,g){for(j+="";j.length<n;)j=g+j;return j},h=function(j){var n=function(g){g=g+"=";for(var c=document.cookie.split(";"),e=0;e<c.length;e++){for(var b=c[e];b.charAt(0)==" ";)b=b.substring(1,b.length);if(b.indexOf(g)==0)return b.substring(g.length,b.length)}return null}(o.authorizationCookieName);if(n!=null){j.setRequestHeader("Authorization-Code",n);j.setRequestHeader("Rest-Authorization-Code",
n)}};a.extend(a.telligent.evolution,{get:function(j){return k(j,"GET")},post:function(j){return k(j,"POST")},put:function(j){return k(j,"PUT")},del:function(j){return k(j,"DELETE")},formatDate:function(j){var n;a:{try{n=[l(j.getFullYear(),4,"0"),"-",l(j.getMonth()+1,2,"0"),"-",l(j.getDate(),2,"0"),"T",l(j.getHours(),2,"0"),":",l(j.getMinutes(),2,"0"),":",l(j.getSeconds(),2,"0")].join("");break a}catch(g){}n=""}return n},parseDate:function(j){var n;n=/\/Date\((\d+)(?:-(\d+))?\)\//;var g=/(\d{4,4})\-(\d{2,2})\-(\d{2,2})(?:T(\d{2,2}):(\d{2,2}):(?:(\d{2,2})(?:\.(\d{0,3}))?))?/,
c=new Date;if(j===null||j==="")n=c;else if((n=n.exec(j))!=null)n=new Date(parseInt(n[1],10));else if((n=g.exec(j))!=null){j=[c.getFullYear(),c.getMonth()+1,c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()];for(g=1;g<n.length&&g<8;g++)if(n[g]!=""&&n[g]!=void 0)j[g-1]=parseInt(n[g],10);n=new Date(j[0],j[1]-1,j[2],j[3],j[4],j[5],j[6])}else throw"Invalid date format";return n},writeAuthorizationHeader:function(j){return h(j)}});a.telligent.evolution.site={configure:function(j){o=
a.extend({},o,j);a.fn.glowDateTimeSelector&&a.extend(a.fn.glowDateTimeSelector.defaults,{monthNames:o.monthNames,dayNames:o.dayNames,calendarButtonImageUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/DateTimeSelectorCalendar.gif"});if(a.glowModal){a.extend(a.glowModal.defaults,{loadingHtmlUrl:a.telligent.evolution.site.getBaseUrl()+"utility/loading.htm",windowCssClasses:["modal"],windowTitleCssClasses:["modal-title","modal-title-2","modal-title-3","modal-title-4"],windowCloseCssClasses:["modal-close"],
windowContentCssClasses:["modal-content","modal-content-2"],windowMaskCssClasses:["modal-mask"],windowFooterCssClasses:["modal-footer","modal-footer-2","modal-footer-3"],windowResizeCssClasses:["modal-resize"],zIndex:200001});s.Telligent_Modal={GetWindowOpener:function(n,g){return a.glowModal.opener(n,g)},IsShown:function(n){return a.glowModal.visible(n)},Resize:function(n,g,c,e){a.glowModal.resize(n,g,c,e)},MoveTo:function(n,g,c){a.glowModal.moveTo(n,g,c)},Open:function(n,g,c,e,b,d,r,p,m){a.glowModal(n,
{width:g,height:c,onClose:e,x:b,y:d,ignoreCloseAndAnimation:r,isManuallyresized:p,openerWindow:m})},Close:function(n,g){a.glowModal.close(n,g)},Refresh:function(n){a.glowModal.refresh(n)}}}a.fn.glowDropDownList&&a.extend(a.fn.glowDropDownList.defaults,{buttonImageUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/DropDownListButton.gif"});a.fn.glowColorSelector&&a.extend(a.fn.glowColorSelector.defaults,{blendImageUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/ColorSelectorSv.png",
hueBlendImageUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/ColorSelectorHue.png"});if(a.fn.glowMultiUpload)a.extend(a.fn.glowMultiUpload.defaults,{swfUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.flash.swf",silverlightUrl:o.silverlightFileUploadEnabled?a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.silverlight.xap":"",runtimes:o.silverlightFileUploadEnabled?"html5,silverlight,flash":"html5,flash"});if(a.fn.glowUpload)a.extend(a.fn.glowUpload.defaults,
{swfUrl:a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.flash.swf",silverlightUrl:o.silverlightFileUploadEnabled?a.telligent.evolution.site.getBaseUrl()+"utility/images/glow/plupload.silverlight.xap":"",runtimes:o.silverlightFileUploadEnabled?"html5,silverlight,flash":"html5,flash"})},getBaseUrl:function(){return o.baseUrl}}})(jQuery,window);if(typeof TelligentUtility=="undefined")var TelligentUtility={};TelligentUtility.WriteAuthorizationHeader=function(a){$.telligent.evolution.writeAuthorizationHeader(a)};
(function(a,s,o){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};var f={groups:{}},k=function(n,g,c){if(n.isSaving)if(g+1<n.widgets.length){var e=n.widgets[g+1];if(e.save){e=e.save(function(){k(n,g+1,c)},function(){l(n,g+1,c)});if(e===false)l(n,g+1,c);else e===true&&k(n,g+1,c)}else k(n,g+1,c)}else if(c.success){n.isSaving=false;c.success()}},l=function(n,g,c){if(n.isSaving){n.isSaving=false;c.error&&c.error()}},h=function(n,g,c){if(n.isValidating){n.widgets[g].valid=
true;var e=0;a.each(n.widgets,function(b,d){d.valid!==true&&e++});if(e==0){n.isValidating=false;c.success&&c.success()}}},j=function(n,g,c){if(n.isValidating){n.widgets[g].valid=false;n.isValidating=false;c.error&&c.error()}};a.telligent.evolution.editableGroup={register:function(n,g){var c=f.groups[n];if(!c){c={widgets:[],isSaving:false,isValidating:false};f.groups[n]=c}c.widgets[c.widgets.length]=a.extend({},g||{},{valid:false,saved:false})},save:function(n,g){a.telligent.evolution.editableGroup.validate(n,
{success:function(){var c=f.groups[n];if(c&&c.widgets.length>0){c.isSaving=true;k(c,-1,g)}else g&&g.success&&g.success()},error:function(){g.error&&g.error()}})},validate:function(n,g){var c=f.groups[n];if(c&&c.widgets.length>0){a.each(c.widgets,function(e,b){b.valid=o});c.isValidating=true;a.each(c.widgets,function(e,b){if(b.validate){var d=b.validate(function(){h(c,e,g)},function(){j(c,e,g)});if(d===false)j(c,e,g);else d===true&&h(c,e,g)}else h(c,e,g)})}else g&&g.success&&g.success()}}})(jQuery,
window);
(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};var s=function(o,f){f<0||(f>0&&o.subscriptionId!=""&&(o.context==""||o.contextId==="undefined")?_showMessage(o,o.errorMessage):a.telligent.evolution.post({url:o.emailDigestUrl,data:{subscriptionId:o.subscriptionId,frequency:f,context:o.context,contextId:o.contextId},success:function(k){k=eval("("+k+")");var l=null;if(k.action=="create"){o.subscriptionId=k.subscriptionId;o.frequency=f;if(f==1)l=o.dailyMessage;else if(f==
7)l=o.weeklyMessage}else if(k.action=="update"){o.frequency=f;if(f==1)l=o.dailyMessage;else if(f==7)l=o.weeklyMessage}else if(k.action=="delete"){o.subscriptionId="";o.frequency=0;if(o.context=="group")l=o.unsubscribeGroupMessage}if(k.warnings&&k.warnings.length>0)_showMessage(o,k.warnings[0],"warning");else l&&_showMessage(o,l,"success");k={subscriptionId:o.subscriptionId,frequency:o.frequency,context:o.context,contextId:o.contextId,action:k.action};a(document).trigger("emailDigestSubscriptionChange",
[k])},error:function(){_showMessage(o,o.errorMessage,"error")}}))};_showMessage=function(o,f,k){a.telligent.evolution.notifications.show(f,{type:k,duration:5E3})};a.telligent.evolution.emailDigest={register:function(o){a("#"+o.selectPopupId).glowPopUpPanel({cssClass:"Panel",position:"updown",zIndex:100,hideOnDocumentClick:true});a("#"+o.rollupWrapperId).click(function(){var f=a(this),k="",l="",h="";if(o.frequency==1)k="email-digest-selected";else if(o.frequency==7)l="email-digest-selected";else h=
"email-digest-selected";var j=f.outerWidth(),n=f.outerHeight();f=f.offset();k="<div class='email-digest-selectWrapper' style=\"width: "+(j-2)+'px;"><div frequency="1" class="email-digest-selectable '+o.selectableTag+" "+k+'"><span>'+o.popupDaily+'</span></div><div frequency="7" class="email-digest-selectable '+o.selectableTag+" "+l+'"><span>'+o.popupWeekly+'</span></div><div frequency="0" class="email-digest-selectable '+o.selectableTag+" "+h+'"><span>'+o.popupUnsubscribe+"</span></div></div>";a("#"+
o.selectPopupId).glowPopUpPanel("hide").glowPopUpPanel("html",k).glowPopUpPanel("show",f.left+4,f.top+5,j,n-10,false)});a("."+o.selectableTag).live("click",function(){var f=a(this);if(!f.hasClass("email-digest-selected")){f=f.attr("frequency");s(o,f)}});a(document).bind("emailDigestSubscriptionChange",function(f,k){if(!(k.context!=o.context||k.contextId!=o.contextId)){var l="";if(k.action=="create"||k.action=="update"){if(k.frequency=="1")l=o.rollupDaily;else if(k.frequency=="7")l=o.rollupWeekly;
o.subscriptionId=k.subscriptionId}else{l=o.rollupUnsubscribed;o.subscriptionId=""}o.frequency=k.frequency;a("#"+o.rollupTextId).html(l)}})}}})(jQuery);
(function(a,s){var o="onhashchange"in s&&(document.documentMode===undefined||document.documentMode>7),f=s.location.href,k=a(s),l;if(!o)a.event.special.hashchange={setup:function(){l||(l=setInterval(function(){if(s.location.href!==f){f=s.location.href;k.trigger("hashchange")}},a.hashChangeSettings.interval))}};a.hashChangeSettings={interval:10}})(jQuery,window);
(function(a){var s=function(j,n){var g=j.data("_HIGHLIGHTER_CONTEXT");if(typeof g==="undefined"||g===null){g={selection:j.filter("textarea"),settings:a.extend({},a.fn.evolutionHighlight.defaults,n||{})};o(g);g=g;j.data("_HIGHLIGHTER_CONTEXT",g)}return g},o=function(j){j.wrapper=a("<div></div>");j.mirror=a("<div></div>");var n={position:"relative",width:j.selection.outerWidth(),height:j.selection.outerHeight()};a.each(["margin-left","margin-right","margin-top","margin-bottom"],function(e,b){n[b]=j.selection.css(b);
j.selection.css(b,0)});var g={position:"absolute",top:"0px",left:"0px",zIndex:"0",borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderRightColor:"transparent",backgroundColor:j.selection.css("backgroundColor"),color:"transparent",width:j.selection.width(),height:j.selection.height(),overflow:"hidden",whiteSpace:"normal"};a.each(j.settings.styles,function(e,b){g[b]=j.selection.css(b)});var c={position:"absolute",top:"0px",left:"0px",zIndex:"1",backgroundColor:"transparent",
width:j.selection.width(),height:j.selection.height()};j.wrapper.css(n);j.mirror.css(g);j.selection.css(c);j.selection.before(j.wrapper);j.wrapper.append(j.selection);j.wrapper.append(j.mirror)},f=/\s\s/gi,k=/\n/gi,l=function(j){var n={};a.each(j.settings.ranges,function(b,d){n[d.start]=n[d.start]||[];n[d.start].push(d);n[d.stop]=n[d.stop]||[];n[d.stop].push(d)});var g=j.selection.val();newValue=[];for(var c=spanDepth=0;c<g.length;c++){typeof n[c]!=="undefined"&&a.each(n[c],function(b,d){if(d.start===
c){newValue[newValue.length]='<span class="'+d.className+'" style="white-space:normal;">';spanDepth++}else{newValue[newValue.length]="</span>";spanDepth--}});newValue[newValue.length]=g.charAt(c)}if(spanDepth>0)newValue[newValue.length]="</span>";g=newValue.join("").replace(k,"<br />").replace(f,"&nbsp; ");var e=document.createElement("span");e.innerHTML=g;j.mirror.empty().get(0).appendChild(e)},h={init:function(j){var n=s(this,j);n.settings=a.extend({},a.fn.evolutionHighlight.defaults,j||{});l(n);
return this},clear:function(){var j=s(this,null);if(j!==null){j.mirror.html("");return this}},resize:function(j,n){var g=s(this,null);if(g!==null){var c={width:j,height:n};g.mirror.css(c);g.selection.css(c);g.wrapper.css({width:g.selection.outerWidth(),height:g.selection.outerHeight()});return this}},css:function(j){var n=s(this,null);if(n!==null){n.wrapper.css(j);return this}}};a.fn.evolutionHighlight=function(j){if(h[j])return h[j].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof j===
"object"||!j)return h.init.apply(this,arguments);else a.error("Method "+j+" does not exist on jQuery.evolutionHighlight")};a.fn.evolutionHighlight.defaults={ranges:[],styles:["border-top-width","border-top-style","border-bottom-width","border-bottom-style","border-right-width","border-right-width-value","border-right-style","border-right-style-value","border-left-width","border-left-width-value","border-left-style","border-left-style-value","font-family","font-size","font-size-adjust","font-stretch",
"font-style","font-variant","font-weight","padding-bottom","padding-left","padding-right","padding-top","letter-spacing","line-height","text-align","text-indent","word-spacing"]}})(jQuery);(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.html={encode:function(s){if(!s)return s;return a("<div/>").text(s).html()},decode:function(s){if(!s)return s;s=s.replace(/<[^>]*>/g," ");return a("<div/>").html(s).text()}}})(jQuery,window);
(function(a){var s={},o=function(l,h){if(l.internal.isInitialized){for(var j=h.split(/[,;]/g),n=[],g=0;g<j.length;g++){var c=a.trim(j[g]);if(c)n[n.length]=c}l.settings.onSave(n,function(){l.settings.currentTags=n})}},f=function(l){return this.each(function(){var h={settings:a.extend({},a.fn.evolutionInlineTagEditor.defaults,l||{}),internal:{state:a(this)}};a(this).data("evolutionTagInlineEditor_context",h);a(this).html()||a(this).text(h.settings.editButtonText);k(h)})},k=function(l){var h=a("<div></div>").addClass(l.settings.editorCssClass).attr("style",
"display: none;"),j=a("<textarea></textarea>").attr("cols","40").attr("rows","2");if(l.settings.allTags&&l.settings.allTags.length>0)var n=a('<input type="button" />').val(l.settings.selectTagsText);var g=a('<input type="button" />').val(l.settings.saveTagsText),c=a('<input type="button" />').val(l.settings.cancelText),e=a('<div style="white-space: nowrap; padding-top: 4px;"><table width="100%" cellspacing="0" cellpadding="0" border="0"><tbody><td align="left"></td><td align="right"></td></tr></tbody></table></div>');
e.find("td:eq(1)").append(g);e.find("td:eq(1)").append(c);n&&e.find("td:first").append(n);h.append(j);h.append(e);j.evolutionTagTextBox({allTags:l.settings.allTags});h.glowPopUpPanel({cssClass:l.settings.editorCssClass,position:"updown",zIndex:100,hideOnDocumentClick:false});a(l.internal.state).bind("click.evolutionInlineTagEditor",function(){h.glowPopUpPanel("hide").glowPopUpPanel("show",a(this));j.val(l.settings.currentTags.length>0?l.settings.currentTags.join(", "):"");return false});g.bind("click.evolutionInlineTagEditor",
function(){o(l,j.attr("value"));h.glowPopUpPanel("hide");return false});c.bind("click.evolutionInlineTagEditor",function(){h.glowPopUpPanel("hide");return false});n&&n.bind("click.evolutionInlineTagEditor",function(){j.evolutionTagTextBox("openTagSelector");return false});l.internal.state.after(h);l.internal.isInitialized=true};a.fn.evolutionInlineTagEditor=function(l){if(l in s)return s[l].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof l==="object"||!l)return f.apply(this,arguments);
else a.error("Method "+l+" does not exist on jQuery.fn.evolutionInlineTagEditor")};a.extend(a.fn.evolutionInlineTagEditor,{defaults:{allTags:[""],currentTags:[""],editorCssClass:"tags-editor",editButtonText:"Edit",selectTagsText:"Select Tags",saveTagsText:"Save",cancelText:"Cancel",onSave:function(){}}})})(jQuery);
(function(a){var s={},o=function(k,l,h){var j=s[k.toString()+"-"+l];typeof j==="undefined"?a.telligent.evolution.get({url:f.defaults.dateEndpoint,data:{date:a.telligent.evolution.formatDate(k),format:l},success:function(n){if(n&&h&&typeof n!=="undefined"&&n!==null&&n.formattedDate){s[k.toString()+"-"+l]=n.formattedDate;h(n.formattedDate)}}}):h(j)},f={formatDate:function(k,l){o(k,"date",l)},formatDateAndTime:function(k,l){o(k,"datetime",l)},formatAgoDate:function(k,l){o(k,"agodate",l)}};f.defaults=
{dateEndpoint:""};if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.language=f})(jQuery);
(function(a){var s=false,o=function(h){var j=h.settings.format;if(h.hasCount)j=j.replace(/\{count\}/gi,'<span class="like-count who-likes"></span>');if(h.hasToggle)j=j.replace(/\{toggle\}/gi,'<span class="like-toggle"><a href="#" class="internal-link"></a></span>');if(h.hasMessage)j=j.replace(/\{message\}/gi,'<span class="like-message"></span>');h.element.html(j);if(h.hasCount){h.countWrapper=h.element.find("span.like-count");h.countWrapper.html(h.settings.initialCount)}if(h.hasToggle){h.toggleLink=
h.element.find("span.like-toggle a");h.toggleLink.evolutionToggleLink({onHtml:"<span></span>"+h.settings.unlikeText,offHtml:"<span></span>"+h.settings.likeText,onTitle:"",offTitle:"",processingHtml:"<span></span>...",changeState:function(n){k(n,h)},onCssClass:"internal-link like-on",offCssClass:"internal-link like-off",processingCssClass:"internal-link processing",val:h.settings.initialState==="true"})}if(h.hasMessage){h.messageWrapper=h.element.find("span.like-message");h.messageWrapper.html(h.settings.initialMessage)}},
f=function(h,j,n){var g="";if(j.count>0){var c=0;if(n)if(j.count===1)g=h.settings.whoLikesAccessingText;else if(j.count===2){g=h.settings.whoLikesAccessingTwoText;c=-1}else{if(j.count>2){g=h.settings.whoLikesAccessingMultipleText;c=-1}}else if(j.count===1)g=h.settings.whoLikesOtherText;else if(j.count===2){c=-1;g=h.settings.whoLikesOtherTwoText}else if(j.count>2){c=-1;g=h.settings.whoLikesOtherMultipleText}g=g.replace(/\{count\}/gi,j.count+c);g=g.replace(/\{user_profile_url\}/gi,j.latestLike.User.ProfileUrl);
g=g.replace(/\{user_display_name\}/gi,j.latestLike.User.DisplayName)}a.telligent.evolution.messaging.publish("ui.like",{contentId:h.settings.contentId,contentTypeId:h.settings.contentTypeId,typeId:h.settings.typeId,count:j.count,liked:n,message:g})},k=function(h,j){h?j.settings.onLike(j.settings.contentId,j.settings.contentTypeId,j.settings.typeId,function(n){f(j,n,true)}):j.settings.onUnlike(j.settings.contentId,j.settings.contentTypeId,j.settings.typeId,function(n){f(j,n,false)})},l=function(h){a.telligent.evolution.messaging.subscribe("ui.like",
function(j){if(j.contentId===h.settings.contentId&&j.contentTypeId===h.settings.contentTypeId&&j.typeId===h.settings.typeId){h.hasToggle&&h.toggleLink.evolutionToggleLink("val",j.liked);h.hasCount&&h.countWrapper.html(j.count);h.hasMessage&&h.messageWrapper.html(j.message)}})};a.fn.evolutionLike=function(h){var j=a.extend({},a.fn.evolutionLike.defaults,h||{});return this.each(function(){var n={element:a(this),settings:j,hasCount:j.format.indexOf("{count}")>=0,hasToggle:j.format.indexOf("{toggle}")>=
0,hasMessage:j.format.indexOf("{message}")>=0};o(n);l(n)})};a.fn.evolutionLike.delegatePopups=function(h){if(!s){s=true;var j=a.extend({},a.fn.evolutionLike.defaults,h||{}),n=a.telligent.evolution.template.compile(j.likersPopupTemplate),g=false,c=false,e=false,b=false,d=false,r=function(v){return j.onOptions(a(v).closest(j.delegatedSelector))},p=function(v,u){j.onList(v.contentId,v.contentTypeId,v.typeId,function(x){u(x)})},m=function(){return a("<div></div>").glowPopUpPanel({cssClass:"who-likes-content",
position:"downcenter",zIndex:1E3,hideOnDocumentClick:false}).glowPopUpPanel("html","").bind("glowPopUpPanelMouseOut",function(){d||setTimeout(function(){g&&!d&&t()},j.delay)})},q=function(v,u){e||(e=m());if(v&&u&&v.likers&&v.likers.length>0){g=true;b=a(n(v)).bind({mouseenter:function(){d=true},mouseleave:function(){d=false}});e.glowPopUpPanel("empty").glowPopUpPanel("append",a('<div class="content-list-header"></div>')).glowPopUpPanel("append",b).glowPopUpPanel("show",u)}},t=function(){if(e){g=false;
b=null;d=false;e.glowPopUpPanel("hide")}},w=function(v){v=a(v);return v.hasClass("who-likes-content")||v.closest(".who-likes-content").length>0||v.children(".who-likes-content").length===1};(function(){a(j.containerSelector).delegate(j.delegatedSelector+" .who-likes","click",function(){var v=a(this),u=r(v);g?t():p(u,function(x){!g&&c!==null&&q(x,v)})}).delegate(j.delegatedSelector+" .who-likes","mouseenter",function(){var v=this,u=r(v);c=this;g||setTimeout(function(){!g&&c===v&&p(u,function(x){!g&&
c===v&&q(x,v)})},j.delay)}).delegate(j.delegatedSelector+" .who-likes","mouseleave",function(v){if(e){var u=this;r(u);c=null;if(g)w(v.relatedTarget)||setTimeout(function(){g&&c!==u&&!d&&t()},j.delay/2)}})})()}};a.fn.evolutionLike.defaults={contentId:"",contentTypeId:"",typeId:"",initialState:false,initialMessage:"",initialCount:0,format:"",onLike:function(){},onUnlike:function(){},likeText:"Like",unlikeText:"Unlike",whoLikesOtherText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> likes this',
whoLikesOtherTwoText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> <span class="who-likes">and 1 other</span> like this.',whoLikesOtherMultipleText:'<a href="{user_profile_url}" class="internal-link view-user-profile">{user_display_name}</a> and <span class="who-likes">{count} others</span> like this.',whoLikesAccessingText:"You like this",whoLikesAccessingTwoText:'You and <span class="who-likes">1 other</span> like this',whoLikesAccessingMultipleText:'You and <span class="who-likes">{count} others</span> like this',
onList:function(){},onOptions:function(){},containerSelector:"",delegatedSelector:"",delay:500,likersPopupTemplate:' <div class="who-likes-list">      <ul>      <% foreach(likers, function(liker) { %>          <li><a href="<%: liker.profileUrl %>"><%= liker.displayName %></a></li>      <% }); %>      </ul>  </div> '}})(jQuery);jQuery(function(a){a("textarea[maxlength]").live("keyup change",function(){var s=a(this),o=s.attr("maxlength"),f=s.val();f.length>o&&s.val(f.substr(0,o))})});
(function(a){var s=function(f,k,l){var h=a.extend({},o.defaults,l||{});f={url:f,view:k};if(h.width)f.width=h.width;if(h.height)f.height=h.height;a.telligent.evolution.get({url:h.endpoint,data:f,success:function(j){j&&h.success&&h.success(j)},error:function(j,n,g){h.error&&h.error(j,n,g)}})},o={previewHtml:function(f,k){s(f,"preview",k)},viewHtml:function(f,k){s(f,"view",k)}};o.defaults={endpoint:""};if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.media=
o})(jQuery);
(function(a){var s={},o={},f=0;if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.messaging={publish:function(k,l){if(!k)throw"messageName is required when publishing a message";if(!(k===null||k.length===0)){var h=s[k];h&&a.each(h,function(j,n){if(n.handler!==null)try{n.handler.call(this,l)}catch(g){}})}},subscribe:function(k,l){if(!k)throw"messageName is required when subscribing to a message";if(k===null||k.length===0)return 0;if(typeof s[k]==="undefined")s[k]=
[];var h={message:k,handler:l,id:f++};s[k][s[k].length]=h;o[String(h.id)]=h;return h.id},unsubscribe:function(k){if(!k)throw"subscriptionId is required when unsubscribing a message";if(typeof o[String(k)]!=="undefined"){var l=o[String(k)],h=-1,j=s[l.message];a.each(j,function(n,g){if(g===l)h=n});h>=0&&j.splice(h,1);j.length===0&&delete s[l.message];delete o[String(k)]}}}})(jQuery);
(function(a){var s=a.telligent.evolution,o=function(g){g.settings.onReport(g.settings.contentId,g.settings.contentTypeId,function(c){s.messaging.publish("ui.reportabuse",{contentId:g.settings.contentId,contentTypeId:g.settings.contentTypeId});c=c.Report;c=s.template.compile(g.settings.notificationTemplate)({resources:{reportedNotificationMessageText:g.settings.reportedNotificationMessageText.replace(/\{NAME\}/gi,c&&c.AuthorUser&&c.AuthorUser.DisplayName?c.AuthorUser.DisplayName:""),undoLinkText:g.settings.undoLinkText},
contextId:g.contextId});s.notifications.show(c,{type:"moderation",duration:g.settings.notificationDuration,cssClass:""})})},f=function(g){g.moderationLink=a(s.template.compile(g.settings.moderationLinkTemplate)({linkClassName:g.settings.linkClassName,resources:{moderateLinkText:g.settings.moderateLinkText}})).appendTo(g.element)},k=function(g){g.popup=a("<div></div>").glowPopUpPanel({cssClass:"content-moderation",position:"downleft",zIndex:1E3,hideOnDocumentClick:true});g.popup.bind({glowPopUpPanelShown:function(){g.moderationLink.addClass("open")},
glowPopUpPanelHidden:function(){g.moderationLink.removeClass("open")}})},l=function(g,c){g.settings.onGetAdditionalLinks(function(e){var b=[];b=g.settings.initialState?e.concat([{href:"#",className:"evolutionModerateFlagged",text:g.settings.reportedLinkText}]):e.concat([{href:"#",className:"evolutionModerateFlag",text:g.settings.reportLinkText}]);e=a(s.template.compile(g.settings.moderationMenuTemplate)({links:b}));e.bind("mouseleave",function(){g.popup.glowPopUpPanel("hide")});e.delegate("a","click",
function(d){var r=a(d.target);if(r.hasClass("evolutionModerateFlag")){d.preventDefault();o(g)}else if(r.hasClass("evolutionModerateFlagged"))d.preventDefault();else{r.attr("href")==="#"&&d.preventDefault();g.element.trigger("evolutionModerateLinkClicked",d.target)}});c(e)})},h=function(g){g.popup||k(g);l(g,function(c){g.popup.glowPopUpPanel("html",c).glowPopUpPanel("show",g.moderationLink)})},j=function(g){s.messaging.subscribe("ui.reportabuse",function(c){if(g.settings.contentId===c.contentId&&g.settings.contentTypeId===
c.contentTypeId)g.settings.initialState=true})},n=function(g){f(g);g.moderationLink.bind({mouseenter:function(c){c.preventDefault();g.popup&&g.popup.glowPopUpPanel("isShown")?g.popup.glowPopUpPanel("hide"):h(g)},mouseleave:function(c){!a(c.relatedTarget).is(".content-moderation")&&a(c.relatedTarget).closest(".content-moderation").length===0&&g.popup.glowPopUpPanel("hide")}});j(g)};a.fn.evolutionModerate=function(g){var c=a.extend({},a.fn.evolutionModerate.defaults,g||{});return this.each(function(){var e=
{element:a(this),settings:c};n(e)})};a.fn.evolutionModerate.defaults={contentId:"",contentTypeId:"",initialState:false,linkClassName:"",onReport:function(){},onGetAdditionalLinks:function(g){g([])},notificationDuration:5E3,moderateLinkText:"moderate",reportLinkText:"Flag as spam/abuse",reportedLinkText:"Flagged as spam/abuse",reportedNotificationMessageText:"{NAME}'s post has been flagged. <strong>Thank you for your feedback.</strong>",undoLinkText:"Undo",moderationLinkTemplate:'<a href="#" class="<%: linkClassName %>"><span></span><%= resources.moderateLinkText %></a>',
moderationMenuTemplate:'<ul class="navigation-list">   <% foreach(links, function(link){ %>       <li class="navigation-item">           <a href="<%: (link.href || "#") %>" class="<%: (link.className || "") %>"><%= link.text %></a>       </li>   <% }); %></ul>',notificationTemplate:"<p><%= resources.reportedNotificationMessageText %></p>"}})(jQuery);
(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};var s={message:"",enabled:false,ignoreClick:false},o=function(){if(!s.ignoreClick)return s.message};a.telligent.evolution.navigationConfirmation={configure:function(f){s=a.extend(s,f)},enable:function(){if(!s.enabled){window.onbeforeunload=o;s.enabled=true;a(document).bind("customizepage",function(){s.ignoreClick=true})}},register:function(f){a(f).click(function(){s.ignoreClick=true})},ignoreClick:function(){s.ignoreClick=
true}}})(jQuery);
(function(a,s){a.telligent=a.telligent||{};a.telligent.evolution=a.telligent.evolution||{};var o={duration:9999,width:300,type:"directions",cssClass:"menu notification notification__menu"},f=null,k=null,l=300,h=false,j=function(){f&&f.glowPopUpPanel("isShown")&&f.glowPopUpPanel("show",(a(s).width()-l)/2,a(s).scrollTop(),l,0,true)};a.telligent.evolution.notifications={show:function(n,g){g=a.extend({},o,g||{});if(!f){f=a("<div></div>").glowPopUpPanel({cssClass:g.cssClass,position:"down",zIndex:1E4,
hideOnDocumentClick:false}).bind("glowPopUpPanelMouseOver",function(){h=true}).bind("glowPopUpPanelMouseOut",function(){h=false});a(s).bind("scroll",j)}s.clearTimeout(k);f.glowPopUpPanel("isShown")&&f.glowPopUpPanel("hide");l=g.width;f.glowPopUpPanel("html",'<div class="message '+g.type+'" style="width:'+g.width+'px">'+n+"</div>").glowPopUpPanel("show",(a(s).width()-g.width)/2,a(s).scrollTop(),g.width,0);k=s.setTimeout(function(){a.telligent.evolution.notifications.hide(g.callback)},g.duration)},
hide:function(n){if(f){s.clearTimeout(k);if(h)k=s.setTimeout(function(){a.telligent.evolution.notifications.hide(n)},249);else{f.glowPopUpPanel("hide");n&&typeof n==="function"&&n()}}}}})(jQuery,window);
(function(a){var s={},o={},f={},k=function(e){var b=[],d=e.settings,r=function(q){var t={};t[d.pageKey]=q;q={url:d.baseUrl,query:t};if(d.hash&&d.hash.length>0)q[d.hash]=d.hash;return a.telligent.evolution.url.modify(q)};if(d.totalItems===0||d.pageSize===0)e=0;else{e=Math.floor(d.totalItems/d.pageSize);if(d.totalItems%d.pageSize>0)e+=1}if(e>1){if(d.showFirst)if(d.currentPage>=3&&e>d.numberOfPagesToDisplay)b[b.length]={type:"first",selected:false,page:1,url:r(1)};if(d.showPrevious)if(d.currentPage>
0)b[b.length]={type:"previous",selected:false,page:d.currentPage,url:r(d.currentPage)};if(d.showIndividualPages){var p;p=e<d.numberOfPagesToDisplay||d.currentPage-Math.floor(d.numberOfPagesToDisplay/2)<0?0:d.currentPage+Math.floor(d.numberOfPagesToDisplay/2)>=e?e-d.numberOfPagesToDisplay:d.currentPage-Math.floor(d.numberOfPagesToDisplay/2);var m;m=Math.floor(d.numberOfPagesToDisplay/2);if(d.numberOfPagesToDisplay%2===0)m-=1;m=e<d.numberOfPagesToDisplay||d.currentPage+m>=e?e-1:d.currentPage-Math.floor(d.numberOfPagesToDisplay/
2)<0?d.numberOfPagesToDisplay-1:d.currentPage+m;for(p=p;p<=m;p++)b[b.length]={type:"page",selected:d.currentPage===p,page:p+1,url:r(p+1)}}if(d.showNext)if(d.currentPage+1<e)b[b.length]={type:"next",selected:false,page:d.currentPage+2,url:r(d.currentPage+2)};if(d.showLast)if(d.currentPage+3<e&&e>d.numberOfPagesToDisplay)b[b.length]={type:"last",selected:false,page:e,url:r(e)}}return b},l=function(e){var b=e.template({links:e.links});e.selection.html(b)},h=function(e){var b=parseInt(a.telligent.evolution.url.hashData()[e.settings.pageKey],
10);if(!isNaN(b)&&b!==e.settings.currentPage)if(!f[e.settings.pageKey]){f[e.settings.pageKey]=true;e.settings.onPage(b,function(d){e.currentPageIndex=b;c(e,b,0,d,false)})}},j=function(e){a(e.selection).delegate("a","click",function(b){b.preventDefault();b=a(this);var d={};d[e.settings.pageKey]=b.data("page");a.telligent.evolution.url.hashData(d)})},n=function(e){if(!s[e.settings.pageKey]){s[e.settings.pageKey]=true;e.currentPageIndex=parseInt(a.telligent.evolution.url.hashData()[e.settings.pageKey],
10);if(isNaN(e.currentPageIndex))e.currentPageIndex=e.settings.currentPage;a(window).bind("hashchange",function(){var b=parseInt(a.telligent.evolution.url.hashData()[e.settings.pageKey],10);if(!isNaN(b))if(e.currentPageIndex!==b){e.newPageIndex=b;b={currentPage:e.currentPageIndex,newPage:e.newPageIndex,container:e.settings.pagedContentContainer};a.telligent.evolution.messaging.publish(e.settings.pagedContentPagingEvent,b);e.selection.trigger("evolutionPagerPaging",b)}})}},g=function(e){if(o[e.settings.pagedContentPagingEvent]){e.currentPageIndex=
parseInt(a.telligent.evolution.url.hashData()[e.settings.pageKey],10);a.telligent.evolution.messaging.unsubscribe(o[e.settings.pagedContentPagingEvent])}o[e.settings.pagedContentPagingEvent]=a.telligent.evolution.messaging.subscribe(e.settings.pagedContentPagingEvent,function(b){if(!f[e.settings.pageKey]){f[e.settings.pageKey]=true;e.settings.onPage(b.newPage,function(d){e.currentPageIndex=b.newPage;c(e,b.newPage,b.currentPage,d,true)})}})},c=function(e,b,d,r,p){var m=function(){var q={page:b,container:e.settings.pagedContentContainer};
a.telligent.evolution.messaging.publish(e.settings.pagedContentPagedEvent,q);e.selection.trigger("evolutionPagerPaged",q)};if(p&&(e.settings.transition==="slide"||e.settings.transition==="fade")){p="fade";if(e.settings.transition==="slide")p=b<d?"slideRight":"slideLeft";d=a(e.settings.pagedContentContainer);r=a("<div></div>").attr("id",d.attr("id")).html(r).hide().insertAfter(e.settings.pagedContentContainer);d.glowTransition(r,{type:p,duration:e.settings.transitionDuration,complete:function(){a(e.settings.pagedContentContainer).css({width:"",
height:"",overflow:"hidden"});m();f[e.settings.pageKey]=false}})}else{a(e.settings.pagedContentContainer).html(r);m();f[e.settings.pageKey]=false}e.settings.currentPage=b-1;e.links=k(e);l(e)};a.fn.evolutionPager=function(e){e=a.extend({},a.fn.evolutionPager.defaults,e||{});var b={selection:this,settings:e,template:a.telligent.evolution.template.compile(e.template)};b.links=k(b);l(b);if(e.onPage&&e.pagedContentContainer&&e.pagedContentContainer.length>0){g(b);n(b);j(b);h(b)}return this};a.fn.evolutionPager.defaults=
{currentPage:0,pageSize:10,totalItems:0,showPrevious:false,showNext:false,showFirst:true,showLast:true,showIndividualPages:true,numberOfPagesToDisplay:5,pageKey:"pi",hash:"",baseUrl:window.location.href,onPage:function(){},pagedContentContainer:"",pagedContentPagingEvent:"ui.page.paging",pagedContentPagedEvent:"ui.page.paged",transition:null,transitionDuration:250,template:' <% foreach(links, function(link, i) { %>      <% if(link.type === "first") { %>          <a href="<%: link.url %>" class="first" data-type="first" data-page="<%= link.page %>" data-selected="false">              <span>&#171;</span>          </a>      <% } else if(link.type === "previous") { %>          <a href="<%: link.url %>" class="previous" data-type="previous" data-page="<%= link.page %>" data-selected="false">              <span>&#60;</span>          </a>      <% } else if(link.type === "page") { %>          <a href="<%: link.url %>" class="page<%= link.selected ? " selected" : "" %>" data-type="page" data-page="<%= link.page %>" data-selected="<%= link.selected ? "true" : "false" %>">              <span><%= link.page %></span>          </a>      <% } else if(link.type === "next") { %>          <a href="<%: link.url %>" class="next" data-type="next" data-page="<%= link.page %>" data-selected="false">              <span>&#62;</span>          </a>      <% } else if(link.type === "last") { %>          <a href="<%: link.url %>" class="last" data-type="last" data-page="<%= link.page %>" data-selected="false">              <span>&#187;</span>          </a>      <% } %>      <% if(i < (links.length - 1)) { %>          <span class="separator"></span>      <% } %>  <% }); %> '}})(jQuery);
(function(){function a(){this.returnValue=false}function s(){this.cancelBubble=true}var o=0,f=[],k={},l={},h={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},j=/[<>&\"\']/g,n=window.setTimeout,g={},c;(function(b){b=b.split(/,/);var d,r,p;for(d=0;d<b.length;d+=2){p=b[d+1].split(/ /);for(r=0;r<p.length;r++)l[p[r]]=b[d]}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe");
var e={VERSION:"1.5.4",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:l,ua:function(){var b=navigator,d=b.userAgent,r=b.vendor,p,m;m=(p=/WebKit/.test(d))&&r.indexOf("Apple")!==-1;r=window.opera&&window.opera.buildNumber;return{windows:navigator.platform.indexOf("Win")!==-1,
ie:!p&&!r&&/MSIE/gi.test(d)&&/Explorer/gi.test(b.appName),webkit:p,gecko:!p&&/Gecko/.test(d),safari:m,opera:!!r}}(),typeOf:function(b){return{}.toString.call(b).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(b){e.each(arguments,function(d,r){r>0&&e.each(d,function(p,m){b[m]=p})});return b},cleanName:function(b){var d,r;r=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,
"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(d=0;d<r.length;d+=2)b=b.replace(r[d],r[d+1]);b=b.replace(/\s+/g,"_");return b=b.replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(b,d){d.name=b;f[b]=d;f.push(d);return d},guid:function(){var b=(new Date).getTime().toString(32),d;for(d=0;d<5;d++)b+=Math.floor(Math.random()*65535).toString(32);return(e.guidPrefix||"p")+b+(o++).toString(32)},buildUrl:function(b,d){var r="";e.each(d,function(p,m){r+=(r?"&":"")+encodeURIComponent(m)+
"="+encodeURIComponent(p)});if(r)b+=(b.indexOf("?")>0?"&":"?")+r;return b},each:function(b,d){var r,p;if(b){r=b.length;if(r===void 0)for(p in b){if(b.hasOwnProperty(p))if(d(b[p],p)===false)break}else for(p=0;p<r;p++)if(d(b[p],p)===false)break}},formatSize:function(b){if(b===void 0||/\D/.test(b))return e.translate("N/A");if(b>1073741824)return Math.round(b/1073741824,1)+" GB";if(b>1048576)return Math.round(b/1048576,1)+" MB";if(b>1024)return Math.round(b/1024,1)+" KB";return b+" b"},getPos:function(b,
d){function r(w){var v,u=0;v=0;if(w){v=w.getBoundingClientRect();w=t.compatMode==="CSS1Compat"?t.documentElement:t.body;u=v.left+w.scrollLeft;v=v.top+w.scrollTop}return{x:u,y:v}}var p=0,m=0,q,t=document;b=b;d=d||t.body;if(b&&b.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&t.documentMode<8){p=r(b);m=r(d);return{x:p.x-m.x,y:p.y-m.y}}for(q=b;q&&q!=d&&q.nodeType;){p+=q.offsetLeft||0;m+=q.offsetTop||0;q=q.offsetParent}for(q=b.parentNode;q&&q!=d&&q.nodeType;){p-=q.scrollLeft||0;m-=q.scrollTop||
0;q=q.parentNode}return{x:p,y:m}},getSize:function(b){return{w:b.offsetWidth||b.clientWidth,h:b.offsetHeight||b.clientHeight}},parseSize:function(b){var d;if(typeof b=="string"){b=/^([0-9]+)([mgk]?)$/.exec(b.toLowerCase().replace(/[^0-9mkg]/g,""));d=b[2];b=+b[1];if(d=="g")b*=1073741824;if(d=="m")b*=1048576;if(d=="k")b*=1024}return b},xmlEncode:function(b){return b?(""+b).replace(j,function(d){return h[d]?"&"+h[d]+";":d}):b},toArray:function(b){var d,r=[];for(d=0;d<b.length;d++)r[d]=b[d];return r},
inArray:function(b,d){if(d){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(d,b);for(var r=0,p=d.length;r<p;r++)if(d[r]===b)return r}return-1},addI18n:function(b){return e.extend(k,b)},translate:function(b){return k[b]||b},isEmptyObj:function(b){if(b===void 0)return true;for(var d in b)return false;return true},hasClass:function(b,d){if(b.className=="")return false;return RegExp("(^|\\s+)"+d+"(\\s+|$)").test(b.className)},addClass:function(b,d){if(!e.hasClass(b,d))b.className=b.className==
""?d:b.className.replace(/\s+$/,"")+" "+d},removeClass:function(b,d){b.className=b.className.replace(RegExp("(^|\\s+)"+d+"(\\s+|$)"),function(r,p,m){return p===" "&&m===" "?" ":""})},getStyle:function(b,d){if(b.currentStyle)return b.currentStyle[d];else if(window.getComputedStyle)return window.getComputedStyle(b,null)[d]},addEvent:function(b,d,r,p){var m;d=d.toLowerCase();if(c===void 0)c="Plupload_"+e.guid();if(b.addEventListener){m=r;b.addEventListener(d,m,false)}else if(b.attachEvent){m=function(){var q=
window.event;if(!q.target)q.target=q.srcElement;q.preventDefault=a;q.stopPropagation=s;r(q)};b.attachEvent("on"+d,m)}if(b[c]===void 0)b[c]=e.guid();g.hasOwnProperty(b[c])||(g[b[c]]={});b=g[b[c]];b.hasOwnProperty(d)||(b[d]=[]);b[d].push({func:m,orig:r,key:p})},removeEvent:function(b,d,r){var p,m;if(typeof r=="function")p=r;else m=r;d=d.toLowerCase();if(b[c]&&g[b[c]]&&g[b[c]][d]){r=g[b[c]][d];for(var q=r.length-1;q>=0;q--)if(r[q].key===m||r[q].orig===p){if(b.removeEventListener)b.removeEventListener(d,
r[q].func,false);else b.detachEvent&&b.detachEvent("on"+d,r[q].func);r[q].orig=null;r[q].func=null;r.splice(q,1);if(p!==void 0)break}r.length||delete g[b[c]][d];if(e.isEmptyObj(g[b[c]])){delete g[b[c]];try{delete b[c]}catch(t){b[c]=void 0}}}},removeAllEvents:function(b,d){b[c]===void 0||!b[c]||e.each(g[b[c]],function(r,p){e.removeEvent(b,p,d)})}};e.Uploader=function(b){function d(){var v,u=0,x;if(this.state==e.STARTED){for(x=0;x<q.length;x++)if(!v&&q[x].status==e.QUEUED){v=q[x];v.status=e.UPLOADING;
this.trigger("BeforeUpload",v)&&this.trigger("UploadFile",v)}else u++;if(u==q.length){this.stop();this.trigger("UploadComplete",q)}}}function r(){var v,u;m.reset();for(v=0;v<q.length;v++){u=q[v];if(u.size!==void 0){m.size+=u.size;m.loaded+=u.loaded}else m.size=void 0;if(u.status==e.DONE)m.uploaded++;else if(u.status==e.FAILED)m.failed++;else m.queued++}if(m.size===void 0)m.percent=q.length>0?Math.ceil(m.uploaded/q.length*100):0;else{m.bytesPerSec=Math.ceil(m.loaded/((+new Date-t||1)/1E3));m.percent=
m.size>0?Math.ceil(m.loaded/m.size*100):0}}var p={},m,q=[],t,w=false;m=new e.QueueProgress;b=e.extend({chunk_size:0,multipart:true,multi_selection:true,file_data_name:"file",filters:[]},b);e.extend(this,{state:e.STOPPED,runtime:"",features:{},files:q,settings:b,total:m,id:e.guid(),init:function(){function v(){var B=y[z++],C,E,D;if(B){C=B.getFeatures();if(E=u.settings.required_features){E=E.split(",");for(D=0;D<E.length;D++)if(!C[E[D]]){v();return}}B.init(u,function(H){if(H&&H.success){u.features=
C;u.runtime=B.name;u.trigger("Init",{runtime:B.name});u.trigger("PostInit");u.refresh()}else v()})}else u.trigger("Error",{code:e.INIT_ERROR,message:e.translate("Init error.")})}var u=this,x,y,z=0,A;typeof b.preinit=="function"?b.preinit(u):e.each(b.preinit,function(B,C){u.bind(C,B)});b.page_url=b.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(b.url))b.url=b.page_url+b.url;b.chunk_size=e.parseSize(b.chunk_size);b.max_file_size=e.parseSize(b.max_file_size);
u.bind("FilesAdded",function(B,C){var E,D,H=0,G;if((E=b.filters)&&E.length){G=[];e.each(E,function(J){e.each(J.extensions.split(/,/),function(L){/^\s*\*\s*$/.test(L)?G.push("\\.*"):G.push("\\."+L.replace(RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})});G=RegExp(G.join("|")+"$","i")}for(E=0;E<C.length;E++){D=C[E];D.loaded=0;D.percent=0;D.status=e.QUEUED;if(G&&!G.test(D.name))B.trigger("Error",{code:e.FILE_EXTENSION_ERROR,message:e.translate("File extension error."),file:D});
else if(D.size!==void 0&&D.size>b.max_file_size)B.trigger("Error",{code:e.FILE_SIZE_ERROR,message:e.translate("File size error."),file:D});else{q.push(D);H++}}if(H)n(function(){u.trigger("QueueChanged");u.refresh()},1);else return false});b.unique_names&&u.bind("UploadFile",function(B,C){var E=C.name.match(/\.([^.]+)$/),D="tmp";if(E)D=E[1];C.target_name=C.id+"."+D});u.bind("UploadProgress",function(B,C){C.percent=C.size>0?Math.ceil(C.loaded/C.size*100):100;r()});u.bind("StateChanged",function(B){if(B.state==
e.STARTED)t=+new Date;else if(B.state==e.STOPPED)for(x=B.files.length-1;x>=0;x--)if(B.files[x].status==e.UPLOADING){B.files[x].status=e.QUEUED;r()}});u.bind("QueueChanged",r);u.bind("Error",function(B,C){if(C.file){C.file.status=e.FAILED;r();B.state==e.STARTED&&n(function(){d.call(u)},1)}});u.bind("FileUploaded",function(B,C){C.status=e.DONE;C.loaded=C.size;B.trigger("UploadProgress",C);n(function(){d.call(u)},1)});if(b.runtimes){y=[];A=b.runtimes.split(/\s?,\s?/);for(x=0;x<A.length;x++)f[A[x]]&&
y.push(f[A[x]])}else y=f;v();typeof b.init=="function"?b.init(u):e.each(b.init,function(B,C){u.bind(C,B)})},refresh:function(){this.trigger("Refresh")},start:function(){if(q.length&&this.state!=e.STARTED){this.state=e.STARTED;this.trigger("StateChanged");d.call(this)}},stop:function(){if(this.state!=e.STOPPED){this.state=e.STOPPED;this.trigger("CancelUpload");this.trigger("StateChanged")}},disableBrowse:function(v){w=v!==void 0?v:true;this.trigger("DisableBrowse",w)},getFile:function(v){var u;for(u=
q.length-1;u>=0;u--)if(q[u].id===v)return q[u]},removeFile:function(v){var u;for(u=q.length-1;u>=0;u--)if(q[u].id===v.id)return this.splice(u,1)[0]},splice:function(v,u){var x;x=q.splice(v===void 0?0:v,u===void 0?q.length:u);this.trigger("FilesRemoved",x);this.trigger("QueueChanged");return x},trigger:function(v){var u=p[v.toLowerCase()],x,y;if(u){y=Array.prototype.slice.call(arguments);y[0]=this;for(x=0;x<u.length;x++)if(u[x].func.apply(u[x].scope,y)===false)return false}return true},hasEventListener:function(v){return!!p[v.toLowerCase()]},
bind:function(v,u,x){var y;v=v.toLowerCase();y=p[v]||[];y.push({func:u,scope:x||this});p[v]=y},unbind:function(v,u){v=v.toLowerCase();var x=p[v],y;if(x){if(u!==void 0)for(y=x.length-1;y>=0;y--){if(x[y].func===u){x.splice(y,1);break}}else x=[];x.length||delete p[v]}},unbindAll:function(){var v=this;e.each(p,function(u,x){v.unbind(x)})},destroy:function(){this.stop();this.trigger("Destroy");this.unbindAll()}})};e.File=function(b,d,r){this.id=b;this.name=d;this.size=r;this.status=this.percent=this.loaded=
0};e.Runtime=function(){this.getFeatures=function(){};this.init=function(){}};e.QueueProgress=function(){var b=this;b.size=0;b.loaded=0;b.uploaded=0;b.failed=0;b.queued=0;b.percent=0;b.bytesPerSec=0;b.reset=function(){b.size=b.loaded=b.uploaded=b.failed=b.queued=b.percent=b.bytesPerSec=0}};e.runtimes={};window.plupload=e})();
(function(a,s,o){function f(){var h;try{h=navigator.plugins["Shockwave Flash"];h=h.description}catch(j){try{h=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(n){h="0.0"}}h=h.match(/\d+/g);return parseFloat(h[0]+"."+h[1])}var k={},l={};o.flash={trigger:function(h,j,n){setTimeout(function(){var g=k[h];g&&g.trigger("Flash:"+j,n)},0)}};o.runtimes.Flash=o.addRuntime("flash",{getFeatures:function(){return{jpgresize:true,pngresize:true,maxWidth:8091,maxHeight:8091,chunks:true,
progress:true,multipart:true,multi_selection:true}},init:function(h,j){function n(){return s.getElementById(h.id+"_flash")}function g(){if(e++>5E3)j({success:false});else l[h.id]===false&&setTimeout(g,1)}var c,e=0,b=s.body;if(f()<10)j({success:false});else{l[h.id]=false;k[h.id]=h;s.getElementById(h.settings.browse_button);c=s.createElement("div");c.id=h.id+"_flash_container";o.extend(c.style,{position:"absolute",top:"0px",background:h.settings.shim_bgcolor||"transparent",zIndex:99999,width:"100%",
height:"100%"});c.className="plupload flash";if(h.settings.container){b=s.getElementById(h.settings.container);if(o.getStyle(b,"position")==="static")b.style.position="relative"}b.appendChild(c);(function(){var d,r;d='<object id="'+h.id+'_flash" type="application/x-shockwave-flash" data="'+h.settings.flash_swf_url+'" ';if(o.ua.ie)d+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ';d+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+h.settings.flash_swf_url+'" /><param name="flashvars" value="id='+
escape(h.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';if(o.ua.ie){r=s.createElement("div");c.appendChild(r);r.outerHTML=d}else c.innerHTML=d})();g();c=null;h.bind("Destroy",function(d){o.removeAllEvents(s.body,d.id);delete l[d.id];delete k[d.id];(d=s.getElementById(d.id+"_flash_container"))&&b.removeChild(d)});h.bind("Flash:Init",function(){var d={};try{n().setFileFilters(h.settings.filters,h.settings.multi_selection)}catch(r){j({success:false});
return}if(!l[h.id]){l[h.id]=true;h.bind("UploadFile",function(p,m){var q=p.settings,t=h.settings.resize||{};n().uploadFile(d[m.id],q.url,{name:m.target_name||m.name,mime:o.mimeTypes[m.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",chunk_size:q.chunk_size,width:t.width,height:t.height,quality:t.quality,multipart:q.multipart,multipart_params:q.multipart_params||{},file_data_name:q.file_data_name,format:/\.(jpg|jpeg)$/i.test(m.name)?"jpg":"png",headers:q.headers,urlstream_upload:q.urlstream_upload})});
h.bind("CancelUpload",function(){n().cancelUpload()});h.bind("Flash:UploadProcess",function(p,m){var q=p.getFile(d[m.id]);if(q.status!=o.FAILED){q.loaded=m.loaded;q.size=m.size;p.trigger("UploadProgress",q)}});h.bind("Flash:UploadChunkComplete",function(p,m){var q=p.getFile(d[m.id]);p.trigger("ChunkUploaded",q,{chunk:m.chunk,chunks:m.chunks,response:m.text});q.status!==o.FAILED&&p.state!==o.STOPPED&&n().uploadNextChunk();if(m.chunk==m.chunks-1){q.status=o.DONE;p.trigger("FileUploaded",q,{response:m.text})}});
h.bind("Flash:SelectFiles",function(p,m){var q,t,w=[],v;for(t=0;t<m.length;t++){q=m[t];v=o.guid();d[v]=q.id;d[q.id]=v;w.push(new o.File(v,q.name,q.size))}w.length&&h.trigger("FilesAdded",w)});h.bind("Flash:SecurityError",function(p,m){h.trigger("Error",{code:o.SECURITY_ERROR,message:o.translate("Security error."),details:m.message,file:h.getFile(d[m.id])})});h.bind("Flash:GenericError",function(p,m){h.trigger("Error",{code:o.GENERIC_ERROR,message:o.translate("Generic error."),details:m.message,file:h.getFile(d[m.id])})});
h.bind("Flash:IOError",function(p,m){h.trigger("Error",{code:o.IO_ERROR,message:o.translate("IO error."),details:m.message,file:h.getFile(d[m.id])})});h.bind("Flash:ImageError",function(p,m){h.trigger("Error",{code:parseInt(m.code,10),message:o.translate("Image error."),file:h.getFile(d[m.id])})});h.bind("Flash:StageEvent:rollOver",function(p){var m;m=s.getElementById(h.settings.browse_button);p=p.settings.browse_button_hover;m&&p&&o.addClass(m,p)});h.bind("Flash:StageEvent:rollOut",function(p){var m;
m=s.getElementById(h.settings.browse_button);p=p.settings.browse_button_hover;m&&p&&o.removeClass(m,p)});h.bind("Flash:StageEvent:mouseDown",function(p){var m,q;m=s.getElementById(h.settings.browse_button);q=p.settings.browse_button_active;if(m&&q){o.addClass(m,q);o.addEvent(s.body,"mouseup",function(){o.removeClass(m,q)},p.id)}});h.bind("Flash:StageEvent:mouseUp",function(p){var m;m=s.getElementById(h.settings.browse_button);p=p.settings.browse_button_active;m&&p&&o.removeClass(m,p)});h.bind("Flash:ExifData",
function(p,m){h.trigger("ExifData",h.getFile(d[m.id]),m.data)});h.bind("Flash:GpsData",function(p,m){h.trigger("GpsData",h.getFile(d[m.id]),m.data)});h.bind("QueueChanged",function(){h.refresh()});h.bind("FilesRemoved",function(p,m){var q;for(q=0;q<m.length;q++)n().removeFile(d[m[q].id])});h.bind("StateChanged",function(){h.refresh()});h.bind("Refresh",function(p){var m,q;n().setFileFilters(h.settings.filters,h.settings.multi_selection);if(m=s.getElementById(p.settings.browse_button)){q=o.getPos(m,
s.getElementById(p.settings.container));m=o.getSize(m);o.extend(s.getElementById(p.id+"_flash_container").style,{top:q.y+"px",left:q.x+"px",width:m.w+"px",height:m.h+"px"})}});h.bind("DisableBrowse",function(p,m){n().disableBrowse(m)});j({success:true})}})}}})})(window,document,plupload);
(function(a,s,o,f){function k(b,d){var r;if("FileReader"in a){r=new FileReader;r.readAsDataURL(b);r.onload=function(){d(r.result)}}else return d(b.getAsDataURL())}function l(b,d){var r;if("FileReader"in a){r=new FileReader;r.readAsBinaryString(b);r.onload=function(){d(r.result)}}else return d(b.getAsBinary())}function h(b,d,r,p){var m,q,t,w,v=this;k(c[b.id],function(u){m=s.createElement("canvas");m.style.display="none";s.body.appendChild(m);q=m.getContext("2d");t=new Image;t.onerror=t.onabort=function(){p({success:false})};
t.onload=function(){var x,y,z,A;if(!d.width)d.width=t.width;if(!d.height)d.height=t.height;w=Math.min(d.width/t.width,d.height/t.height);if(w<1||w===1&&r==="image/jpeg"){x=Math.round(t.width*w);y=Math.round(t.height*w);m.width=x;m.height=y;q.drawImage(t,0,0,x,y);if(r==="image/jpeg"){z=new n(atob(u.substring(u.indexOf("base64,")+7)));if(z.headers&&z.headers.length){A=new g;if(A.init(z.get("exif")[0])){A.setExif("PixelXDimension",x);A.setExif("PixelYDimension",y);z.set("exif",A.getBinary());v.hasEventListener("ExifData")&&
v.trigger("ExifData",b,A.EXIF());v.hasEventListener("GpsData")&&v.trigger("GpsData",b,A.GPS())}}if(d.quality)try{u=m.toDataURL(r,d.quality/100)}catch(B){u=m.toDataURL(r)}}else u=m.toDataURL(r);u=u.substring(u.indexOf("base64,")+7);u=atob(u);if(z&&z.headers&&z.headers.length){u=z.restore(u);z.purge()}m.parentNode.removeChild(m);p({success:true,data:u})}else p({success:false})};t.src=u})}function j(){function b(m,q){var t=r?0:-8*(q-1),w=0,v;for(v=0;v<q;v++)w|=p.charCodeAt(m+v)<<Math.abs(t+v*8);return w}
function d(m,q,t){t=arguments.length===3?t:p.length-q-1;p=p.substr(0,q)+m+p.substr(t+q)}var r=false,p;return{II:function(m){if(m===f)return r;else r=m},init:function(m){r=false;p=m},SEGMENT:function(m,q,t){switch(arguments.length){case 1:return p.substr(m,p.length-m-1);case 2:return p.substr(m,q);case 3:d(t,m,q);break;default:return p}},BYTE:function(m){return b(m,1)},SHORT:function(m){return b(m,2)},LONG:function(m,q){if(q===f)return b(m,4);else{var t="",w=r?0:-24,v;for(v=0;v<4;v++)t+=String.fromCharCode(q>>
Math.abs(w+v*8)&255);d(t,m,4)}},SLONG:function(m){m=b(m,4);return m>2147483647?m-4294967296:m},STRING:function(m,q){var t="";for(q+=m;m<q;m++)t+=String.fromCharCode(b(m,1));return t}}}function n(b){var d={65505:{app:"EXIF",name:"APP1",signature:"Exif\u0000"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\u0000"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\u0000"}},r=[],p,m,q=f,t=0;p=new j;p.init(b);if(p.SHORT(0)===65496){m=2;for(b=Math.min(1048576,b.length);m<=b;){q=p.SHORT(m);if(q>=
65488&&q<=65495)m+=2;else{if(q===65498||q===65497)break;t=p.SHORT(m+2)+2;d[q]&&p.STRING(m+4,d[q].signature.length)===d[q].signature&&r.push({hex:q,app:d[q].app.toUpperCase(),name:d[q].name.toUpperCase(),start:m,length:t,segment:p.SEGMENT(m,t)});m+=t}}p.init(null);return{headers:r,restore:function(w){p.init(w);var v=new n(w);if(!v.headers)return false;for(w=v.headers.length;w>0;w--){var u=v.headers[w-1];p.SEGMENT(u.start,u.length,"")}v.purge();m=p.SHORT(2)==65504?4+p.SHORT(4):2;w=0;for(v=r.length;w<
v;w++){p.SEGMENT(m,0,r[w].segment);m+=r[w].length}return p.SEGMENT()},get:function(w){for(var v=[],u=0,x=r.length;u<x;u++)r[u].app===w.toUpperCase()&&v.push(r[u].segment);return v},set:function(w,v){var u=[];if(typeof v==="string")u.push(v);else u=v;for(var x=ii=0,y=r.length;x<y;x++){if(r[x].app===w.toUpperCase()){r[x].segment=u[ii];r[x].length=u[ii].length;ii++}if(ii>=u.length)break}},purge:function(){r=[];p.init(null)}}}}function g(){function b(q,t){var w=d.SHORT(q),v,u,x,y,z,A=[],B={};for(v=0;v<
w;v++){z=q+12*v+2;x=t[d.SHORT(z)];if(x!==f){u=d.SHORT(z+=2);y=d.LONG(z+=2);z+=4;A=[];switch(u){case 1:case 7:if(y>4)z=d.LONG(z)+p.tiffHeader;for(u=0;u<y;u++)A[u]=d.BYTE(z+u);break;case 2:if(y>4)z=d.LONG(z)+p.tiffHeader;B[x]=d.STRING(z,y-1);continue;case 3:if(y>2)z=d.LONG(z)+p.tiffHeader;for(u=0;u<y;u++)A[u]=d.SHORT(z+u*2);break;case 4:if(y>1)z=d.LONG(z)+p.tiffHeader;for(u=0;u<y;u++)A[u]=d.LONG(z+u*4);break;case 5:z=d.LONG(z)+p.tiffHeader;for(u=0;u<y;u++)A[u]=d.LONG(z+u*4)/d.LONG(z+u*4+4);break;case 9:z=
d.LONG(z)+p.tiffHeader;for(u=0;u<y;u++)A[u]=d.SLONG(z+u*4);break;case 10:z=d.LONG(z)+p.tiffHeader;for(u=0;u<y;u++)A[u]=d.SLONG(z+u*4)/d.SLONG(z+u*4+4);break;default:continue}y=y==1?A[0]:A;B[x]=m.hasOwnProperty(x)&&typeof y!="object"?m[x][y]:y}}return B}var d,r,p={},m;d=new j;r={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",
34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};m={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",
6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",
7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",
71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},
ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};return{init:function(q){p={tiffHeader:10};
if(q===f||!q.length)return false;d.init(q);if(d.SHORT(0)===65505&&d.STRING(4,5).toUpperCase()==="EXIF\u0000"){q=f;q=p.tiffHeader;d.II(d.SHORT(q)==18761);if(d.SHORT(q+=2)!==42)q=false;else{p.IFD0=p.tiffHeader+d.LONG(q+2);q=b(p.IFD0,r.tiff);p.exifIFD="ExifIFDPointer"in q?p.tiffHeader+q.ExifIFDPointer:f;p.gpsIFD="GPSInfoIFDPointer"in q?p.tiffHeader+q.GPSInfoIFDPointer:f;q=true}return q}return false},EXIF:function(){var q;q=b(p.exifIFD,r.exif);if(q.ExifVersion&&o.typeOf(q.ExifVersion)==="array"){for(var t=
0,w="";t<q.ExifVersion.length;t++)w+=String.fromCharCode(q.ExifVersion[t]);q.ExifVersion=w}return q},GPS:function(){var q;q=b(p.gpsIFD,r.gps);if(q.GPSVersionID)q.GPSVersionID=q.GPSVersionID.join(".");return q},setExif:function(q,t){if(q!=="PixelXDimension"&&q!=="PixelYDimension")return false;var w;w=q;var v,u,x,y=0;if(typeof w==="string"){v=r["exif".toLowerCase()];for(hex in v)if(v[hex]===w){w=hex;break}}v=p["exif".toLowerCase()+"IFD"];u=d.SHORT(v);for(i=0;i<u;i++){x=v+12*i+2;if(d.SHORT(x)==w){y=
x+8;break}}if(y){d.LONG(y,t);w=true}else w=false;return w},getBinary:function(){return d.SEGMENT()}}}var c={},e;o.runtimes.Html5=o.addRuntime("html5",{getFeatures:function(){var b,d,r,p,m,q;d=r=m=q=false;if(a.XMLHttpRequest){b=new XMLHttpRequest;r=!!b.upload;d=!!(b.sendAsBinary||b.upload)}if(d){p=!!(b.sendAsBinary||a.Uint8Array&&a.ArrayBuffer);m=!!(File&&(File.prototype.getAsDataURL||a.FileReader)&&p);q=!!(File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))}e=o.ua.safari&&
o.ua.windows;return{html5:d,dragdrop:function(){var t=s.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t}(),jpgresize:m,pngresize:m,multipart:m||!!a.FileReader||!!a.FormData,canSendBinary:p,cantSendBlobInFormData:!!(o.ua.gecko&&a.FormData&&a.FileReader&&!FileReader.prototype.readAsArrayBuffer),progress:r,chunks:q,multi_selection:!(o.ua.safari&&o.ua.windows),triggerDialog:o.ua.gecko&&a.FormData||o.ua.webkit}},init:function(b,d){function r(q){var t,w,v=[],u,x={};for(w=0;w<
q.length;w++){t=q[w];if(!x[t.name]){x[t.name]=true;u=o.guid();c[u]=t;v.push(new o.File(u,t.fileName||t.name,t.fileSize||t.size))}}v.length&&b.trigger("FilesAdded",v)}var p,m;p=this.getFeatures();if(p.html5){b.bind("Init",function(q){var t,w,v=[],u,x,y=q.settings.filters,z,A;u=s.body;t=s.createElement("div");t.id=q.id+"_html5_container";o.extend(t.style,{position:"absolute",background:b.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:b.settings.shim_bgcolor?
"":0});t.className="plupload html5";if(b.settings.container){u=s.getElementById(b.settings.container);if(o.getStyle(u,"position")==="static")u.style.position="relative"}u.appendChild(t);u=0;a:for(;u<y.length;u++){z=y[u].extensions.split(/,/);for(x=0;x<z.length;x++){if(z[x]==="*"){v=[];break a}(A=o.mimeTypes[z[x]])&&o.inArray(A,v)===-1&&v.push(A)}}t.innerHTML='<input id="'+b.id+'_html5"  style="font-size:999px" type="file" accept="'+v.join(",")+'" '+(b.settings.multi_selection&&b.features.multi_selection?
'multiple="multiple"':"")+" />";t.scrollTop=100;v=s.getElementById(b.id+"_html5");q.features.triggerDialog?o.extend(v.style,{position:"absolute",width:"100%",height:"100%"}):o.extend(v.style,{cssFloat:"right",styleFloat:"right"});v.onchange=function(){r(this.files);this.value=""};if(w=s.getElementById(q.settings.browse_button)){var B=q.settings.browse_button_hover,C=q.settings.browse_button_active;t=q.features.triggerDialog?w:t;if(B){o.addEvent(t,"mouseover",function(){o.addClass(w,B)},q.id);o.addEvent(t,
"mouseout",function(){o.removeClass(w,B)},q.id)}if(C){o.addEvent(t,"mousedown",function(){o.addClass(w,C)},q.id);o.addEvent(s.body,"mouseup",function(){o.removeClass(w,C)},q.id)}q.features.triggerDialog&&o.addEvent(w,"click",function(E){var D=s.getElementById(q.id+"_html5");D&&!D.disabled&&D.click();E.preventDefault()},q.id)}});b.bind("PostInit",function(){var q=s.getElementById(b.settings.drop_element);if(q)if(e)o.addEvent(q,"dragenter",function(){var t,w;t=s.getElementById(b.id+"_drop");if(!t){t=
s.createElement("input");t.setAttribute("type","file");t.setAttribute("id",b.id+"_drop");t.setAttribute("multiple","multiple");o.addEvent(t,"change",function(){r(this.files);o.removeEvent(t,"change",b.id);t.parentNode.removeChild(t)},b.id);q.appendChild(t)}o.getPos(q,s.getElementById(b.settings.container));w=o.getSize(q);o.getStyle(q,"position")==="static"&&o.extend(q.style,{position:"relative"});o.extend(t.style,{position:"absolute",display:"block",top:0,left:0,width:w.w+"px",height:w.h+"px",opacity:0})},
b.id);else{o.addEvent(q,"dragover",function(t){t.preventDefault()},b.id);o.addEvent(q,"drop",function(t){var w=t.dataTransfer;w&&w.files&&r(w.files);t.preventDefault()},b.id)}});b.bind("Refresh",function(q){var t,w,v;if(t=s.getElementById(b.settings.browse_button)){w=o.getPos(t,s.getElementById(q.settings.container));v=o.getSize(t);q=s.getElementById(b.id+"_html5_container");o.extend(q.style,{top:w.y+"px",left:w.x+"px",width:v.w+"px",height:v.h+"px"});if(b.features.triggerDialog){o.getStyle(t,"position")===
"static"&&o.extend(t.style,{position:"relative"});w=parseInt(o.getStyle(t,"z-index"),10);if(isNaN(w))w=0;o.extend(t.style,{zIndex:w});o.extend(q.style,{zIndex:w-1})}}});b.bind("DisableBrowse",function(q,t){var w=s.getElementById(q.id+"_html5");if(w)w.disabled=t});b.bind("CancelUpload",function(){m&&m.abort&&m.abort()});b.bind("UploadFile",function(q,t){function w(y,z,A){var B;if(File.prototype.slice)try{y.slice();return y.slice(z,A)}catch(C){return y.slice(z,A-z)}else return(B=File.prototype.webkitSlice||
File.prototype.mozSlice)?B.call(y,z,A):null}function v(y){function z(){function E(I){var R=0,O="----pluploadboundary"+o.guid(),N,M="";m=new XMLHttpRequest;if(m.upload)m.upload.onprogress=function(F){t.loaded=Math.min(t.size,B+F.loaded-R);q.trigger("UploadProgress",t)};m.onreadystatechange=function(){var F,K;if(m.readyState==4&&q.state!==o.STOPPED){try{F=m.status}catch(U){F=0}if(F>=400)q.trigger("Error",{code:o.HTTP_ERROR,message:o.translate("HTTP Error."),file:t,status:F});else{if(H){K={chunk:A,chunks:H,
response:m.responseText,status:F};q.trigger("ChunkUploaded",t,K);B+=L;if(K.cancelled){t.status=o.FAILED;return}t.loaded=Math.min(t.size,(A+1)*J)}else t.loaded=t.size;q.trigger("UploadProgress",t);I=D=N=M=null;if(!H||++A>=H){t.status=o.DONE;q.trigger("FileUploaded",t,{response:m.responseText,status:F})}else z()}}};if(q.settings.multipart&&p.multipart){G.name=t.target_name||t.name;m.open("post",Q,true);o.each(q.settings.headers,function(F,K){m.setRequestHeader(K,F)});if(typeof I!=="string"&&a.FormData){N=
new FormData;o.each(o.extend(G,q.settings.multipart_params),function(F,K){N.append(K,F)});N.append(q.settings.file_data_name,I);m.send(N);return}if(typeof I==="string"){m.setRequestHeader("Content-Type","multipart/form-data; boundary="+O);o.each(o.extend(G,q.settings.multipart_params),function(F,K){M+="--"+O+'\r\nContent-Disposition: form-data; name="'+K+'"\r\n\r\n';M+=unescape(encodeURIComponent(F))+"\r\n"});S=o.mimeTypes[t.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";
M+="--"+O+'\r\nContent-Disposition: form-data; name="'+q.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(t.name))+'"\r\nContent-Type: '+S+"\r\n\r\n"+I+"\r\n--"+O+"--\r\n";R=M.length-I.length;I=M;if(m.sendAsBinary)m.sendAsBinary(I);else if(p.canSendBinary){for(var T=new Uint8Array(I.length),P=0;P<I.length;P++)T[P]=I.charCodeAt(P)&255;m.send(T.buffer)}return}}Q=o.buildUrl(q.settings.url,o.extend(G,q.settings.multipart_params));m.open("post",Q,true);m.setRequestHeader("Content-Type",
"application/octet-stream");o.each(q.settings.headers,function(F,K){m.setRequestHeader(K,F)});m.send(I)}var D,H,G,J,L,S,Q=q.settings.url;if(!(t.status==o.DONE||t.status==o.FAILED||q.state==o.STOPPED)){G={name:t.target_name||t.name};if(u.chunk_size&&t.size>u.chunk_size&&(p.chunks||typeof y=="string")){J=u.chunk_size;H=Math.ceil(t.size/J);L=Math.min(J,t.size-A*J);D=typeof y=="string"?y.substring(A*J,A*J+L):w(y,A*J,A*J+L);G.chunk=A;G.chunks=H}else{L=t.size;D=y}if(q.settings.multipart&&p.multipart&&typeof D!==
"string"&&C&&p.cantSendBlobInFormData&&p.chunks&&q.settings.chunk_size){C.onload=function(){E(C.result)};C.readAsBinaryString(D)}else E(D)}}var A=0,B=0,C="FileReader"in a?new FileReader:null;z()}var u=q.settings,x;x=c[t.id];if(p.jpgresize&&q.settings.resize&&/\.(png|jpg|jpeg)$/i.test(t.name))h.call(q,t,q.settings.resize,/\.png$/i.test(t.name)?"image/png":"image/jpeg",function(y){if(y.success){t.size=y.data.length;v(y.data)}else p.chunks?v(x):l(x,v)});else!p.chunks&&p.jpgresize?l(x,v):v(x)});b.bind("Destroy",
function(q){var t,w,v=s.body,u={inputContainer:q.id+"_html5_container",inputFile:q.id+"_html5",browseButton:q.settings.browse_button,dropElm:q.settings.drop_element};for(t in u)(w=s.getElementById(u[t]))&&o.removeAllEvents(w,q.id);o.removeAllEvents(s.body,q.id);if(q.settings.container)v=s.getElementById(q.settings.container);v.removeChild(s.getElementById(u.inputContainer))});d({success:true})}else d({success:false})}})})(window,document,plupload);
(function(a){var s=function(f,k){var l=a.extend({},o.defaults,k||{});a.telligent.evolution.get({url:l.endpoint,data:{url:f,maxImageWidth:typeof k.maxImageWidth!=="undefined"?k.maxImageWidth:l.maxImageWidth,maxImageHeight:typeof k.maxImageHeight!=="undefined"?k.maxImageHeight:l.maxImageHeight},success:function(h){if(h&&l.success&&typeof h!=="undefined"&&h!==null)l.success(h);else l.error&&l.error(h)},error:function(h,j,n){l.error&&l.error(h,j,n)}})},o={load:function(f,k){s(f,k)},render:function(f,
k){if(!(f===null||typeof f==="undefined"||typeof f.url==="undefined"||f.url.length===0||typeof f.title==="undefined"||f.title.length===0)){var l=a.extend({},o.defaults,k);return a.telligent.evolution.template.compile(l.template)(f)}}};o.defaults={endpoint:"",maxImageWidth:90,maxImageHeight:90,template:'<div class="abbreviated-post-header shared-link"></div><div class="abbreviated-post shared-link <% if(imageUrl !== null && imageUrl.length > 0){ %> with-image <% } %>">   <h4 class="post-name"><a href="<%: url %>" class="external-link" target="_new" rel="nofollow"><%= title %></a></h4>   <% if(siteName !== null && siteName.length > 0){ %>       <div class="post-application">           <span class="label"></span>           <span class="value"><a href="<%: url %>" class="external-link" target="_new" rel="nofollow"><%= siteName %></a></span>       </div>   <% } %>   <% if(imageUrl !== null && imageUrl.length > 0){ %>       <div class="post-thumbnail">           <a href="<%: url %>" class="external-link" target="_new" rel="nofollow"><%= resizedImageHtml %></a>       </div>   <% } %>   <% if(excerpt !== null && excerpt.length > 0){ %>       <div class="post-summary">           <%= excerpt %>      </div>   <% } %></div><div class="abbreviated-post-footer shared-link"></div>'};
if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.preview=o})(jQuery);(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.regex={encode:function(s){if(!s)return s;return s.replace(/[\-\[\]\{\}\(\)\*\+\?\.\,\\\^\$\|\#\s]/g,"\\$&")}}})(jQuery,window);
(function(a){var s=null,o=function(k){k.area.css({height:"auto"}).css({height:k.area.prop("scrollHeight")-(s===null?k.offset:s)});var l=k.area.outerHeight();if(l!==k.oldHeight){l>=k.maxHeight?k.area.css({overflow:"visible"}):k.area.css({overflow:"hidden"});k.area.trigger("evolutionResize",{newHeight:l,oldHeight:k.oldHeight});k.oldHeight=l}},f=function(k){return parseInt(k.replace("px",""),10)};a(function(){var k=a("<textarea>test</textarea>").css({overflow:"hidden",resize:"none",visible:"none"}).appendTo("body");
if(Math.abs(k.prop("scrollHeight")-k.height())<=1)s=0;k.remove()});a.fn.evolutionResize=function(){return this.filter("textarea").each(function(){var k=a(this).css({resize:"none",overflow:"hidden"}),l={area:k,oldHeight:k.height(),maxHeight:f(k.css("max-height")),offset:k.innerHeight()!==k.height()?f(k.css("padding-top"))+f(k.css("padding-bottom")):0};k.bind("input keydown keyup",function(){o(l)});o(l)})}})(jQuery);
(function(a){a.event.special.scrollend={setup:function(s){var o=false,f=a.extend({padding:150,delay:250},s);a(window).scroll(function(){o=true});setInterval(function(){if(o){o=false;checkPosition()}},f.delay);checkPosition=function(){a(document).height()-a(document).scrollTop()-a(window).height()<=f.padding&&a(document).trigger("scrollend")}}}})(jQuery);
(function(a,s){var o=[],f=/MSIE 6/i.test(navigator.userAgent)?"gif":"png",k=function(m,q){return q%2==1?m.settings.imagesPathUrl+"star-right-on."+f:m.settings.imagesPathUrl+"star-left-on."+f},l=function(m,q){return q%2==1?m.settings.imagesPathUrl+"star-right-off."+f:m.settings.imagesPathUrl+"star-left-off."+f},h=function(m,q){var t;for(t=0;t<o.length;t++)if(o[t].src==q)return true;return false},j=function(m,q,t){return typeof m.settings.titles=="object"?m.settings.titles[q].replace("{0}",t):m.settings.titles?
m.settings.titles.replace("{0}",t):t},n=function(m){return typeof m.internal.value!=="undefined"?m.internal.value:m.settings.value},g=function(m,q){var t,w=m.settings.maxRating*2;q=q*2-1;for(t=0;t<w;t++)t<=q?a(m.internal.state.find("img").get(t)).attr("src",k(m,t)):a(m.internal.state.find("img").get(t)).attr("src",l(m,t))},c=function(m,q){if(!(!m.internal.isInitialized||m.settings.isReadOnly)){m.internal.state.addClass(m.settings.overClass);g(m,q)}},e=function(m,q){if(!(!m.internal.isInitialized||
m.settings.isReadOnly)){m.internal.state.removeClass(m.settings.overClass);g(m,q)}},b=function(m){return this.each(function(){var q={settings:a.extend({},a.fn.evolutionStarRating.defaults,m||{}),internal:{state:a(this)}};if(!q.settings.imagesPathUrl)q.settings.imagesPathUrl=a.telligent.evolution.site.getBaseUrl()+"utility/images/";var t,w,v;for(v=0;v<2;v++){w=k(q,v);if(!h(w)){t=new Image;t.src=w;o[o.length]=t}w=l(q,v);if(!h(w)){t=new Image;t.src=w;o[o.length]=t}}a(this).data("evolutionStarRating_context",
q);d(q)})},d=function(m){m.internal.state.addClass(m.settings.starClass).css("white-space","nowrap").find("a").unbind(".evolutionStarRating").empty().end().bind("mouseleave",function(){g(m,n(m))});m.settings.isReadOnly&&m.internal.state.addClass(m.settings.readOnlyClass);var q,t=m.settings.maxRating*2,w=typeof m.settings.ratingCount==="undefined";for(q=0;q<t;q++)(function(){var v,u;u=a("<img />").css({borderLeftWidth:"0px",borderTopWidth:"0px",borderRightWidth:"0px",borderBottomWidth:"0px"});m.settings.isReadOnly||
(v=a('<a href="#" />').css({textDecoration:"none"}).append(u));var x=(q+1)/2;x<=m.settings.value?u.attr("src",k(m,q)):u.attr("src",l(m,q));if(!m.settings.isReadOnly){if(m.settings.useHalfStars)y=j(m,q,x);else{x=Math.ceil(x);var y=j(m,x,x)}w&&v.attr("title",y);u.attr("alt",y);v.data("rating-value",x).bind("click.evolutionStarRating",function(){var z=v.data("rating-value");if(!(!m.internal.isInitialized||m.settings.isReadOnly)){m.internal.value=z;if(!m.settings.allowMultipleSelections)m.settings.isReadOnly=
true;m.internal.savingValue=true;m.settings.onRate(z)}return false}).bind("focus.evolutionStarRating",function(){c(m,v.data("rating-value"))}).bind("mouseover.evolutionStarRating",function(){c(m,v.data("rating-value"))}).bind("blur.evolutionStarRating",function(){e(m,v.data("rating-value"))}).bind("mouseout.evolutionStarRating",function(){e(m,v.data("rating-value"))})}u.attr("align","absmiddle").attr("border",0);v?m.internal.state.append(v):m.internal.state.append(u)})();r(m);m.internal.isInitialized=
true},r=function(m){m.settings.ratingMessageFormat&&!isNaN(parseInt(m.settings.ratingCount))&&!isNaN(parseInt(m.settings.value))&&m.internal.state.attr("title",m.settings.ratingMessageFormat.replace(/\{rating\}/gi,Math.round(m.settings.value*10)/10).replace(/\{count\}/gi,m.settings.ratingCount))},p={val:function(m){var q=this.data("evolutionStarRating_context");if(q!==null)if(typeof m!=="undefined"){q.internal.value=m;g(q,m);return m}else return n(q);return 0},readOnly:function(m){var q=this.data("evolutionStarRating_context");
if(q!==null)if(typeof m!=="undefined")(q.settings.isReadOnly=m)?q.internal.state.find("a").css({cursor:"default"}):q.internal.state.find("a").css({cursor:"pointer"});else return q.settings.isReadOnly;return true},option:function(m,q){if(typeof m==="object")return this.each(function(){var w=a(this).data("evolutionStarRating_context");if(w!=null){w.settings=a.extend({},w.settings,m);b.apply(a(this),[w.settings])}});else if(typeof m!=="undefined"&&typeof q!=="undefined")return this.each(function(){var w=
a(this).data("evolutionStarRating_context");if(w!=null){w.settings[m]=q;b.apply(a(this),[w.settings])}});else if(typeof m!=="undefined"){var t=this.data("evolutionStarRating_context");return t!==null?t.settings[m]:null}}};a.fn.evolutionStarRating=function(m){if(m in p)return p[m].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof m==="object"||!m)return b.apply(this,arguments);else a.error("Method "+m+" does not exist on jQuery.fn.evolutionStarRating")};a.extend(a.fn.evolutionStarRating,
{defaults:{value:0,maxRating:5,imagesPathUrl:"",useHalfStars:false,starClass:"rating",overClass:"active",readOnlyClass:"readonly",titles:["Terrible","Poor","Fair","Average","Good","Excellent"],isReadOnly:false,allowMultipleSelections:true,ratingCount:s,ratingMessageFormat:"Average rating: {rating} out of {count} ratings.",onRate:function(){}}})})(jQuery,undefined);
(function(a){var s={openTagSelector:function(){var n=this.data("evolutionTagTextBox");if(n){window.__tagEditor={SetSelectedTags:function(c){for(var e=[],b=f(n),d=n.settings.allTags,r,p=0;p<b.length;p++){r=false;for(var m=0;m<d.length;m++)if(b[p].toUpperCase()==d[m].toUpperCase()){r=true;break}r||(e[e.length]=b[p])}for(p=0;p<c.length;p++)e[e.length]=c[p];a(n.internal.state).val(e.join(", "))},GetAllTagsWithEncoding:function(){for(var c=[],e=n.settings.allTags,b=a("<div></div>"),d=0;d<e.length;d++){b.text(e[d]);
c[d]=[e[d],b.html()]}return c},GetSelectedTags:function(){return f(n)}};var g=n.settings.selectTagsModalUrl;if(g.substr(0,2)=="~/")g=a.telligent.evolution.site.getBaseUrl()+g.substr(2);if(window.Telligent_Modal)window.Telligent_Modal.Open(g,400,350,null);else a.glowModal&&a.glowModal(g,{width:400,height:350})}}},o=function(n){return this.each(function(){var g={settings:a.extend({},a.fn.evolutionTagTextBox.defaults,n||{}),internal:{state:this,suggestionTimeoutHandle:null,previousTags:[],previousValue:"",
currentTag:"",currentTagPosition:0}};a(this).data("evolutionTagTextBox",g);j(g);a(this).bind("keyup.evolutionTagTextBox",function(c){return l(g,c)});a(this).bind("keydown.evolutionTagTextBox",function(c){return k(g,c)});a(this).bind("onblur.evolutionTagTextBox",function(){window.clearTimeout(g.internal.suggestionTimeoutHandle);return true})})},f=function(n){n=a(n.internal.state).val().split(/;|,/);for(var g=[],c=0;c<n.length;c++){n[c]=n[c].replace(/^\s+|\s+$/g,"");if(n[c]!="")g[g.length]=n[c]}return g},
k=function(n,g){window.clearTimeout(n.internal.suggestionTimeoutHandle);if(!g)g=window.event;if(g){if(g.keyCode==13){n.internal.state.focus();if(document.selection){var c=window.document.selection.createRange();if(c.text&&c.text.length>0){c.moveStart("character",c.text.length);c.select()}}else if(n.internal.state.selectionStart||n.internal.state.selectionStart=="0")n.internal.state.selectionStart=n.internal.state.selectionEnd;g.cancelBubble=true;return g.returnValue=false}else if(g.keyCode==8){n.internal.state.focus();
if(document.selection){if(c=window.document.selection.createRange()){c.moveStart("character",-1);c.text="";g.cancelBubble=true;return g.returnValue=false}}else if(n.internal.state.selectionStart||n.internal.state.selectionStart=="0"){c=n.internal.state.selectionStart;var e=n.internal.state.selectionEnd;if(c==e)return true;c>0&&c--;n.internal.state.value=n.internal.state.value.substring(0,c)+n.internal.state.value.substring(e);n.internal.state.selectionStart=c;n.internal.state.selectionEnd=c;g.cancelBubble=
true;return g.returnValue=false}}return true}},l=function(n){window.clearTimeout(n.internal.suggestionTimeoutHandle);n.internal.suggestionTimeoutHandle=window.setTimeout(function(){h(n)},249);return true},h=function(n){if(!document.selection&&!n.internal.state.selectionStart&&n.internal.state.selectionStart!="0")return true;if(a(n.internal.state).val()==n.internal.previousValue)return true;n.internal.previousValue=a(n.internal.state).val();j(n);if(n.internal.currentTag=="")return true;var g;a:{g=
n.internal.currentTag;var c,e,b,d=n.settings.allTags;for(c=0;c<d.length;c++)if(d[c].toLowerCase().indexOf(g)==0){b=false;for(e=0;e<n.internal.previousTags.length&&!b;e++)if(n.internal.previousTags[e]==d[c].toLowerCase())b=true;if(!b){g=d[c];break a}}g=null}if(!g||g.length==n.internal.currentTag.length)return true;g=g.substr(n.internal.currentTag.length);a(n.internal.state).val(a(n.internal.state).val().substr(0,n.internal.currentTagPosition+n.internal.currentTag.length)+g+a(n.internal.state).val().substr(n.internal.currentTagPosition+
n.internal.currentTag.length));n.internal.state.focus();if(document.selection){c=n.internal.state.createTextRange();c.select();c.moveStart("character",n.internal.currentTagPosition+n.internal.currentTag.length);c.moveEnd("character",-(a(n.internal.state).val().length-(n.internal.currentTagPosition+n.internal.currentTag.length+g.length)));c.select()}else if(n.internal.state.selectionStart||n.internal.state.selectionStart=="0"){n.internal.state.selectionStart=n.internal.currentTagPosition+n.internal.currentTag.length;
n.internal.state.selectionEnd=n.internal.currentTagPosition+n.internal.currentTag.length+g.length}},j=function(n){var g=a(n.internal.state).val().toLowerCase().split(/;|,/),c,e,b;n.internal.currentTag="";var d=0,r=true;for(c=0;c<g.length;c++){e=g[c].replace(/^\s+/g,"");d+=g[c].length-e.length;g[c]=e;b=false;for(e=0;e<n.internal.previousTags.length&&!b;e++)if(g[c]==n.internal.previousTags[e]){n.internal.previousTags.splice(e,1);b=true}if(!b)if(n.internal.currentTag!="")r=false;else{n.internal.currentTag=
g[c];n.internal.currentTagPosition=d}d+=g[c].length+1}if(!r)n.internal.currentTag="";n.internal.previousTags=g};a.fn.evolutionTagTextBox=function(n){if(n in s)return s[n].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof n==="object"||!n)return o.apply(this,arguments);else a.error("Method "+n+" does not exist on jQuery.fn.evolutionTagTextBox")};a.extend(a.fn.evolutionTagTextBox,{defaults:{allTags:[],selectTagsModalUrl:"~/utility/TagSelector.aspx?TagEditor=__tagEditor"}})})(jQuery);
(function(a){var s={},o=function(k){k=" var source = [];  with(data){with(extraHelpers){with(defaultHelpers){  source.push('"+k.replace(/[\r\n]/g,"").replace(/\<%=([\s\S]+?)%>/g,"'); source.push(String($1)); source.push('").replace(/\<%:([\s\S]+?)%>/g,"'); source.push(escape(String($1))); source.push('").replace(/\<%(.*?)%>/g,"'); $1 source.push('")+"');  }}}  return source.join('');";var l=new Function("defaultHelpers","extraHelpers","data",k);l.compiledSource="function(defaultHelpers, extraHelpers, data) { "+
k+" } ";return l},f={compile:function(k,l){var h=s[k];if(typeof h==="undefined"){var j=document.getElementById(k)!==null?document.getElementById(k).innerHTML:k,n=o(j);s[k]=h=function(g){return n.call(this,f.helpers||{},l||{},g||{})};h.source={raw:j,compiled:n.compiledSource}}return h},helpers:{foreach:function(k,l){if(k&&k.length>0&&l)for(var h=0;h<k.length;h++)l(k[h],h)},escape:function(){var k=/&/g,l=/</g,h=/>/g,j=/\"/g;return function(n){return n.replace(k,"&amp;").replace(l,"&lt;").replace(h,
"&gt;").replace(j,"&quot;")}}()}};a.telligent.evolution.template=f})(jQuery);
(function(a){var s={show:function(o){var f=a.extend({},s.defaults,o||{}),k=a('<div class="theater-mask"></div>').hide().appendTo("body"),l=a('<div class="theater-container"></div>').hide().appendTo("body");o=a('<div class="theater-content-container"></div>').appendTo(l);var h=a('<div class="theater-content"></div>').appendTo(o),j=a('<a href="#" class="theater-next">&rarr;</a>').appendTo(l),n=a('<a href="#" class="theater-back">&larr;</a>').appendTo(l),g=a('<a href="#" class="theater-close">X</a>').appendTo(o),
c=null,e=null,b=null,d=function(p,m){a("body").css({overflow:"hidden"});c=p;p(function(q){j.hide();n.hide();m?m(h,q):h.hide().html(q);if(!k.is(":visible")){k.show();l.show()}f.loaded(h);e=f.nextContent(h);b=f.previousContent(h);h.show();e&&e!==null&&j.show();b&&b!==null&&n.show()})},r=function(){a("body").css({overflow:"auto"});j.unbind("_evolution_theater");n.unbind("_evolution_theater");g.unbind("_evolution_theater");l.unbind("_evolution_theater");k.hide().remove();l.hide().remove();a(document).unbind("_evolution_theater")};
s.refresh=function(p){d(c,p)};s.hide=function(){r()};j.bind("click._evolution_theater",function(p){p.preventDefault();e&&e!==null&&d(e)});n.bind("click._evolution_theater",function(p){p.preventDefault();b&&b!==null&&d(b)});g.bind("click._evolution_theater",function(p){p.preventDefault();r()});l.bind("click._evolution_theater",function(p){p.target===l.get(0)&&r()});a(document).bind("keydown._evolution_theater",function(p){if(k.is(":visible"))if(p.which===39){if(!a(p.target).is("input,textarea")){e&&
e!==null&&d(e);j.addClass("pressed")}}else if(p.which===37){if(!a(p.target).is("input,textarea")){b&&b!==null&&d(b);n.addClass("pressed")}}else p.which===27&&r()});a(document).bind("keyup._evolution_theater",function(p){if(k.is(":visible"))if(p.which===39)j.removeClass("pressed");else p.which===37&&n.removeClass("pressed")});d(f.content)},hide:function(){},refresh:function(){},defaults:{content:function(){return null},nextContent:function(){return null},previousContent:function(){return null},loaded:function(){}}};
a.evolutionTheater=s})(jQuery);
(function(a){var s={val:function(k){if(k===undefined){var l=this.data("evolutionToggleLink");if(l)return l.settings.val;return false}else return this.each(function(){var h=a(this).data("evolutionToggleLink");if(h){h.settings.val=k;h.internal.processing=false;f(h)}})}},o=function(k){return this.each(function(){var l={settings:a.extend({},a.fn.evolutionToggleLink.defaults,k||{}),internal:{state:a(this),processing:false}};l.internal.state.data("evolutionToggleLink",l).click(function(){if(!l.internal.processing&&l.settings.changeState){l.internal.processing=
true;f(l);l.settings.changeState(!l.settings.val)}return false});f(l)})},f=function(k){if(k.internal.processing)k.internal.state.attr("class",k.settings.processingCssClass).attr("title",k.settings.processingTitle).html(k.settings.processingHtml);else k.settings.val?k.internal.state.attr("class",k.settings.onCssClass).attr("title",k.settings.onTitle).html(k.settings.onHtml):k.internal.state.attr("class",k.settings.offCssClass).attr("title",k.settings.offTitle).html(k.settings.offHtml)};a.fn.evolutionToggleLink=
function(k){if(k in s)return s[k].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof k==="object"||!k)return o.apply(this,arguments);else a.error("Method "+k+" does not exist on jQuery.fn.evolutionToggleLink")};a.extend(a.fn.evolutionToggleLink,{defaults:{onHtml:"",offHtml:"",processingHtml:"",changeState:null,onCssClass:"",offCssClass:"",processingCssClass:"",onTitle:"",offTitle:"",processingTitle:"",val:false}})})(jQuery);
(function(a){var s={};parseData=function(o){o=o.get(0);var f={};a.each(o.attributes,function(k,l){if(l.name.indexOf("data-")===0){var h=l.name.substring(5);f[h]=h==="configuration"?a.telligent.evolution.url.parseQuery(l.value):l.value}});return f};api={components:{},render:function(o){var f=a(o||document);a.each(api.components,function(k,l){var h=a(".ui-"+k,f);f.hasClass(".ui-"+k)&&h.add(f);if(h&&h.length>0&&typeof l.setup!=="undefined"&&!s[k]){l.setup.call(this);s[k]=true}h&&h.length>0&&typeof l.add!==
"undefined"&&h.each(function(){var j=a(this);if(!j.data("_telligent_evolution_ui_render_add")){l.add.call(j,j,api.data(j));j.data("_telligent_evolution_ui_render_add",true)}})})},data:function(o){if(!o)return{};o=a(o);var f=o.data("_telligent_evolution_ui_data");if(f===null||typeof f==="undefined"){f=parseData(o);o.data("_telligent_evolution_ui_data",f)}return f}};if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.ui=api})(jQuery);
(function(a){var s=function(o,f){return function(){try{f.before&&f.before.apply(this,arguments)}catch(k){}var l=o.apply(this,arguments);try{f.after&&f.after.apply(this,arguments)}catch(h){}return l}};a.each(["html","append","prepend"],function(o,f){a.fn[f]=s(a.fn[f],{after:function(){a.telligent.evolution.ui.render(this)}})});a.each(["appendTo","prependTo"],function(o,f){a.fn[f]=s(a.fn[f],{after:function(k){a.telligent.evolution.ui.render(a(k))}})});a.each(["after","before"],function(o,f){a.fn[f]=
s(a.fn[f],{after:function(){a.telligent.evolution.ui.render(this.parent())}})});a.each(["insertAfter","insertBefore"],function(o,f){a.fn[f]=s(a.fn[f],{after:function(k){a.telligent.evolution.ui.render(a(k).parent())}})})})(jQuery);jQuery(function(a){a.telligent.evolution.ui.render()});
(function(a){var s=function(o,f,k,l){a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:o,ContentTypeId:f,TypeId:k,SortBy:"Date",SortOrder:"Descending",PageSize:1,PageIndex:0},cache:false,dataType:"json",success:function(h){l.call(this,{count:h.TotalCount,latestLike:h.Likes.length>0?h.Likes[0]:null})}})};a.telligent.evolution.ui.components.like={setup:function(){a.fn.evolutionLike.delegatePopups({containerSelector:".content-fragment",delegatedSelector:".ui-like",
onList:function(o,f,k,l){a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:{ContentId:o,ContentTypeId:f,TypeId:k,SortBy:"Date",SortOrder:"Descending",PageSize:10,PageIndex:0},cache:false,dataType:"json",success:function(h){l({likers:a.map(h.Likes,function(j){return{displayName:j.User.DisplayName,profileUrl:j.User.ProfileUrl}})})}})},onOptions:function(o){o=a.telligent.evolution.ui.data(o);return{contentId:o.contentid,contentTypeId:o.contenttypeid,
typeId:o.configuration.LikeTypeId}},likersPopupTemplate:' <div class="who-likes-list">      <ul>      <% foreach(likers, function(liker) { %>          <li><a href="<%: liker.profileUrl %>"><%= liker.displayName %></a></li>      <% }); %>      </ul>  </div> '})},add:function(o,f){var k=f.readonly==="true";a(o).evolutionLike({contentId:f.contentid,contentTypeId:f.contenttypeid,initialState:f.initialstate,initialMessage:f.initialmessage,initialCount:f.initialcount,format:k?f.format.replace("{toggle}",
""):f.format,typeId:f.configuration.LikeTypeId,onLike:function(l,h,j,n){var g={ContentId:l,ContentTypeId:h};if(j!==null&&j.length>0)g.TypeId=j;a.telligent.evolution.post({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/likes.json",data:g,cache:false,dataType:"json",success:function(){s(l,h,j,n)}})},onUnlike:function(l,h,j,n){var g={ContentId:l};if(j!==null&&j.length>0)g.TypeId=j;a.telligent.evolution.del({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/like.json",data:g,cache:false,
dataType:"json",success:function(){s(l,h,j,n)}})}})}}})(jQuery);
(function(a){var s=function(o,f,k){a.telligent.evolution.post({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/abusereports.json",data:{ContentId:o,ContentTypeId:f},cache:false,dataType:"json",success:function(l){k(l)}})};a.telligent.evolution.ui.components.moderate={setup:function(){},add:function(o,f){o=a(o);var k={contentId:f.contentid,contentTypeId:f.contenttypeid,initialState:f.initialstate==="true",onReport:s};if(f.configuration&&f.configuration.AdditionalLinks)k.onGetAdditionalLinks=
function(l){l(a.parseJSON(f.configuration.AdditionalLinks))};else if(f.configuration&&f.configuration.AdditionalLinksUrl)k.onGetAdditionalLinks=function(l){a.telligent.evolution.get({url:f.configuration.AdditionalLinksUrl,cache:false,dataType:"json",success:function(h){l(h.links||[])}})};if(f.configuration&&f.configuration.LinkClassName)k.linkClassName=f.configuration.LinkClassName;o.evolutionModerate(k)}}})(jQuery);
(function(a){var s={};a.telligent.evolution.ui.components.page={setup:function(){},add:function(o,f){var k={currentPage:parseInt(f.currentpage,10),pageSize:parseInt(f.pagesize,10),totalItems:parseInt(f.totalitems,10),showPrevious:typeof f.configuration.ShowPrevious==="undefined"?false:f.configuration.ShowPrevious==="true",showNext:typeof f.configuration.ShowNext==="undefined"?false:f.configuration.ShowNext==="true",showFirst:typeof f.configuration.ShowFirst==="undefined"?true:f.configuration.ShowFirst===
"true",showLast:typeof f.configuration.ShowLast==="undefined"?true:f.configuration.ShowLast==="true",showIndividualPages:typeof f.configuration.ShowIndividualPages==="undefined"?true:f.configuration.ShowIndividualPages==="true",numberOfPagesToDisplay:typeof f.configuration.NumberOfPagesToDisplay==="undefined"?5:parseInt(f.configuration.NumberOfPagesToDisplay,10),pageKey:f.pagekey,hash:f.configuration.Target,baseUrl:f.configuration.BaseUrl||window.location.href,template:typeof f.configuration.Template!==
"undefined"?f.configuration.Template:' <% foreach(links, function(link, i) { %>      <% if(link.type === "first") { %>          <a href="<%: link.url %>" class="first" data-type="first" data-page="<%= link.page %>" data-selected="false">              <span>&#171;</span>          </a>      <% } else if(link.type === "previous") { %>          <a href="<%: link.url %>" class="previous" data-type="previous" data-page="<%= link.page %>" data-selected="false">              <span>&#60;</span>          </a>      <% } else if(link.type === "page") { %>          <a href="<%: link.url %>" class="page<%= link.selected ? " selected" : "" %>" data-type="page" data-page="<%= link.page %>" data-selected="<%= link.selected ? "true" : "false" %>">              <span><%= link.page %></span>          </a>      <% } else if(link.type === "next") { %>          <a href="<%: link.url %>" class="next" data-type="next" data-page="<%= link.page %>" data-selected="false">              <span>&#62;</span>          </a>      <% } else if(link.type === "last") { %>          <a href="<%: link.url %>" class="last" data-type="last" data-page="<%= link.page %>" data-selected="false">              <span>&#187;</span>          </a>      <% } %>      <% if(i < (links.length - 1)) { %>          <span class="separator"></span>      <% } %>  <% }); %> '};
if(f.pagedcontenturl){s[f.pagedcontentpagingevent]={onPage:function(l,h){var j={};j[f.pagekey]=l;j=a.telligent.evolution.url.modify({url:f.pagedcontenturl,query:j});a.telligent.evolution.get({url:j,cache:false,success:function(n){h(n)}})}};a.extend(k,{onPage:function(l,h){s[f.pagedcontentpagingevent].onPage(l,h)},pagedContentContainer:"#"+f.pagedcontentwrapperid,pagedContentPagingEvent:f.pagedcontentpagingevent,pagedContentPagedEvent:f.pagedcontentpagedevent,transition:f.configuration.Transition,
transitionDuration:typeof f.configuration.TransitionDuration==="undefined"?200:parseInt(f.configuration.TransitionDuration,10)})}a(o).evolutionPager(k)}}})(jQuery);
(function(a){a.telligent.evolution.ui.components.rate={setup:function(){},add:function(s,o){var f=a.extend({},{isReadOnly:o.readonly==="true",value:parseFloat(o.initialvalue),ratingCount:parseFloat(o.initialcount)});f.value*=a.fn.evolutionStarRating.defaults.maxRating;f.onRate=function(k){if(o.contentid&&o.contenttypeid){k/=a.fn.evolutionStarRating.defaults.maxRating;k={ContentId:o.contentid,ContentTypeId:o.contenttypeid,Value:k};if(o.ratingtypeid)k.TypeId=o.ratingtypeid;a.telligent.evolution.post({url:a.telligent.evolution.site.getBaseUrl()+
"api.ashx/v2/ratings.json",data:k,success:function(){var l={ContentId:o.contentid};if(o.ratingtypeid)l.TypeId=o.ratingtypeid;a.telligent.evolution.get({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/rateditem.json",data:l,success:function(h){h&&h.RatedItem&&h.RatedItem.AverageValue?a(s).evolutionStarRating("option",{value:h.RatedItem.AverageValue*a.fn.evolutionStarRating.defaults.maxRating,ratingCount:h.RatedItem.Count}):a(s).evolutionStarRating("option",{value:0,ratingCount:0})}})}})}};
f.ratingCount==0&&f.isReadOnly||a(s).evolutionStarRating(f)}}})(jQuery);
(function(a){var s=a.telligent.evolution.template.compile('<% foreach(properties, function(property) { %> <li class="property-item"><%= property %></li> <% }); %> '),o=function(f,k){a.telligent.evolution.get({url:f,dataType:"json",success:function(l){l&&k(s(l))}})};a.telligent.evolution.ui.components.searchresult={setup:function(){},add:function(f,k){if(k.detailsurl){var l=null,h=f.find("ul.details"),j=h.html();f.bind("mouseenter",function(){l!==null?h.html(l):o(k.detailsurl,function(n){l=n;h.html(l)})}).bind("mouseleave",
function(){h.html(j)})}}}})(jQuery);
(function(a){var s=function(o,f,k){var l=a(k);l.html("");if(o){var h=true;a.each(o.split(/,/),function(j,n){var g=a.trim(n);if(g){if(h)h=false;else l.append(", ");f?l.append(a("<a>").attr("href",f.replace(/{tag}/g,a.telligent.evolution.url.encodePathComponent(a.telligent.evolution.html.decode(g)))).html(g)):l.append(g)}})}};a.telligent.evolution.ui.components.tag={setup:function(){},add:function(o,f){var k=jQuery("<span></span>");a(o).append(k);s(f.tags,f.urlformat,k);var l=null;if(f.readonly!=="true"){l=
a('<a href="javascript:void(0);" class="internal-link edit-tags"></a>');a(o).append(l);l.evolutionInlineTagEditor({allTags:a.grep(f.selectabletags.split(","),function(h){return h}),currentTags:a.grep(f.tags.split(","),function(h){return h}),onSave:function(h,j){var n={Tags:h&&h.length>0?h.join(","):"",ContentId:f.contentid,ContentTypeId:f.contenttypeid};if(f.tagtypeid)n.TypeId=f.tagtypeid;a.telligent.evolution.put({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/contenttags.json",data:n,
success:function(){s(n.Tags,f.urlformat,k);j()}})}})}}}})(jQuery);
(function(a){var s=function(){return{add:function(j,n,g,c,e,b){j={ContentId:j,ContentTypeId:n,Body:c};if(typeof g!=="undefined"&&g!==null)j.CommentTypeId=g;a.telligent.evolution.post({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/comments.json",data:j,cache:false,success:e,error:b})},del:function(j,n,g){a.telligent.evolution.del({url:a.telligent.evolution.site.getBaseUrl()+"api.ashx/v2/comments/{CommentId}.json",data:{CommentId:j},cache:false,success:n,error:g})}}}(),o=function(j,n){a.telligent.evolution.get({url:j,
cache:false,success:function(g){n(g)}})},f=function(j){var n=j.content.find(".content-item.action.likes");n.length>0&&a.telligent.evolution.messaging.subscribe("ui.like",function(g){if(g.contentId===j.contentId&&(typeof j.typeId==="undefined"||j.typeId===""||j.typeId==="00000000-0000-0000-0000-000000000000"||g.typeId===j.typeId))g.count>0?n.removeClass("without-likes").addClass("with-likes"):n.removeClass("with-likes").addClass("without-likes")})},k=function(j){j.content.find(".internal-link.comment").bind("click",
function(n){n.preventDefault();j.content.find(".comment-form").show().find("textarea").focus()});j.content.delegate(".comment-form textarea","focus",function(n){j.content.find(".comment-form").addClass("with-avatar");n=a(n.target);if(!n.data("theater_composer_inited")){n.data("theater_composer_inited",true);n.evolutionComposer({plugins:["mentions","hashtags"]});n.evolutionComposer("onkeydown",function(g){if(g.which===13){g=a(g.target).evolutionComposer("val");if(a.trim(g).length>0){j.content.find(".comment-form textarea").attr("disabled",
true).blur();s.add(j.contentId,j.contentTypeId,j.typeId,g,function(c){a.evolutionTheater.refresh(l);a.telligent.evolution.messaging.publish("activity.commentadded",c)},function(){j.content.find(".comment-form textarea").evolutionComposer("val","").trigger("keydown").trigger("keyup").removeAttr("disabled").closest(".comment-form").removeClass("with-avatar")})}}return true})}});j.content.delegate(".comment-form textarea","blur",function(){j.content.find(".comment-form").removeClass("with-avatar")})},
l=function(j,n){var g=a("<div></div>").html(n).find("ul.content-list.comments");j.find("ul.content-list.comments").replaceWith(g)},h=function(j){j.content.find(".content-item.comment").bind("evolutionModerateLinkClicked",function(){var n=a(this).data("commentid");s.del(n,function(g){a.evolutionTheater.refresh(l);a.telligent.evolution.messaging.publish("activity.commentremoved",g)},function(){})})};a.telligent.evolution.ui.components.theater={setup:function(){},add:function(j,n){j=a(j);j.bind("click",
function(g){g.preventDefault();a.evolutionTheater.show({content:function(c){o(n.theaterurl,c)},nextContent:function(c){var e=c.find("a[data-nexttheaterurl]").data("nexttheaterurl");if(e&&e.length>0)return function(b){o(e,b)}},previousContent:function(c){var e=c.find("a[data-previoustheaterurl]").data("previoustheaterurl");if(e&&e.length>0)return function(b){o(e,b)}},loaded:function(c){var e=c;e=a(e);c=e.find(".activity-story");e={content:e,story:c};c!==null&&a.extend(e,{contentId:c.data("contentid"),
contentTypeId:c.data("contenttypeid"),typeId:c.data("typeid")});f(e);k(e);h(e)}})})}}})(jQuery);
(function(a){a.telligent.evolution.ui.components.webpreview={setup:function(){},add:function(s,o){var f={url:o.configuration.url,success:function(k){if(k){k=a.telligent.evolution.preview.render(k,{template:a.telligent.evolution.preview.defaults.template});typeof k!=="undefined"&&k!==null&&k.length>0&&s.replaceWith(k)}}};if(typeof o.configuration.maximagewidth!=="undefined")f.maxImageWidth=o.configuration.maximagewidth;if(typeof o.configuration.maximageheight!=="undefined")f.maxImageHeight=o.configuration.maximageheight;
a.telligent.evolution.preview.load(f.url,{maxImageWidth:f.maxImageWidth,maxImageHeight:f.maxImageHeight,success:f.success})}}})(jQuery);
(function(a,s){var o=function(l,h,j,n,g){if(!l)return l;var c=/(?:\.config|\.ascx|\.asax|\.cs|\.vb)$/i.test(l);return l.replace(h,function(e,b,d){if(e==" ")return j;else if(e=="."&&!c&&d!=l.length-1&&l.substr(d+1,1)!=".")return n;else{b=[];b[b.length]=g;for(d=0;d<e.length;d++){var r=e.charCodeAt(d).toString(16)+"",p=r.length;if(p==4){b[b.length]=r.substr(2,2).toUpperCase();b[b.length]=r.substr(0,2).toUpperCase()}else if(p==2){b[b.length]=r.toUpperCase();b[b.length]="00"}}b[b.length]=g;return b.join("")}})},
f=function(l,h,j,n){if(!l)return l;return l.replace(h,function(g){if(g.length==1)if(g==j)return" ";else{if(g==n)return"."}else{g=g.substr(1,g.length-2);if(g.length%4!=0)return"";for(var c=[],e=0;e<g.length;e+=4)c[c.length]=String.fromCharCode(parseInt(g.substr(e+2,2)+g.substr(e,2),16));return c.join("")}})},k={parseQuery:function(l){var h=l.split("?"),j={};l=(h.length>1?h[1]:l).split("#")[0].split("&");a.each(l,function(n,g){g=g.split("=");if(g.length===2)j[g[0]]=decodeURIComponent(g[1].replace(/\+/gi,
" "))});return j},serializeQuery:function(l){l=l||{};var h=[];a.each(l,function(j,n){h[h.length]=encodeURIComponent(j)+"="+encodeURIComponent(n)});return h.join("&")},modify:function(l){l=a.extend({url:s.location.href,query:null,hash:s.location.hash,protocol:s.location.protocol},l);var h=[l.url.split("?")[0].split("#")[0]],j;if(typeof l.query==="string")l.query=k.parseQuery(l.query);if((j=k.serializeQuery(a.extend(k.parseQuery(l.url),l.query)))&&j.length>0)h[h.length]="?"+j;if(l.hash&&l.hash.length>
0)h[h.length]=(l.hash.indexOf("#")!==0?"#":"")+l.hash;return h.join("")},hashData:function(l,h){if(typeof l==="undefined"){l={};var j=s.location.href.split("#"),n="";if(j.length>2){a.each(j,function(g,c){if(g>0){if(g>1)n+="#";n+=c}});j=[j[0],n]}if(j.length===2)l=k.parseQuery(j[1]);return l}else{h||(l=a.extend(k.hashData(),l));s.location.href=s.location.href.split("#")[0]+"#"+k.serializeQuery(l)}},encode:function(l){return encodeURIComponent(l)},decode:function(l){return decodeURIComponent(l)},encodePathComponent:function(l){return o(l,
/([^A-Za-z0-9 \.]+|\.| )/g,"+","-","_")},decodePathComponent:function(l){return f(l,/((?:_(?:[0-9a-f][0-9a-f][0-9a-f][0-9a-f])+_)|\-|\+)/ig,"+","-")},encodeFileComponent:function(l){return o(l,/([^A-Za-z0-9 \.]+|\.| )/g,"-",".","_")},decodeFileComponent:function(l){return f(l,/((?:_(?:[0-9a-f][0-9a-f][0-9a-f][0-9a-f])+_)|_|\-)/ig,"-",".")}};if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.url=k})(jQuery,window);
(function(a){var s={},o=function(l){return this.each(function(){var h={settings:a.extend({},a.fn.evolutionUserFileTextBox.defaults,l||{}),internal:{state:this,preview:null,select:null,remove:null}},j=a("<div></div>").attr("class",h.settings.cssClass);h.internal.preview=a("<div></div>").attr("class",h.settings.previewCssClass);j.append(h.internal.preview);h.internal.select=a('<input type="button" />').val(h.settings.selectText).click(function(){f(h);return false});j.append(h.internal.select);h.internal.remove=
a('<input type="button" />').val(h.settings.removeText).click(function(){h.internal.preview.html(h.settings.noFileText);a(h.internal.state).val("");return false});j.append(h.internal.remove);a(this).val()?h.internal.preview.html(h.settings.initialPreviewHtml):h.internal.preview.html(h.settings.noFileText);a(this).data("evolutionUserFileTextBox",h).before(j).hide()})},f=function(l){var h=l.settings.userFilesBrowseModalUrl;if(h.substr(0,2)=="~/")h=a.telligent.evolution.site.getBaseUrl()+h.substr(2);
if(window.Telligent_Modal)window.Telligent_Modal.Open(h,400,350,function(j){k(l,j)});else a.glowModal&&a.glowModal(h,{width:400,height:350,onClose:function(j){k(l,j)}})},k=function(l,h){if(h&&h.length==3&&h[0]&&h[1]){l.internal.preview.html(h[2]);a(l.internal.state).val(h[1])}};a.fn.evolutionUserFileTextBox=function(l){if(l in s)return s[l].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof l==="object"||!l)return o.apply(this,arguments);else a.error("Method "+l+" does not exist on jQuery.fn.evolutionUserFileTextBox")};
a.extend(a.fn.evolutionUserFileTextBox,{defaults:{removeText:"",selectText:"",noFileText:"",initialPreviewHtml:"",cssClass:"user-file-url",previewCssClass:"user-file-url-preview",userFilesBrowseModalUrl:"~/utility/userfilesbrowse.aspx"}})})(jQuery);
(function(a){if(!a.telligent)a.telligent={};if(!a.telligent.evolution)a.telligent.evolution={};a.telligent.evolution.validation={registerExtensions:function(s){if(a.validator){a.validator.addMethod("password",function(o,f){return this.optional(f)||o.match(s.passwordRegex)},s.passwordInvalidMessage);a.validator.addMethod("email",function(o,f){return this.optional(f)||o.match(RegExp(s.emailRegex))},s.emailInvalidMessage);a.validator.addMethod("url",function(o,f){if(this.optional(f))return true;if(o.match(s.urlRegex))return true;
if(("http://"+o).match(s.urlRegex)){a(f).val("http://"+o);return true}return false},s.urlInvalidMessage);a.validator.addMethod("emails",function(o,f){for(var k=o.split(/[;,]/),l=true,h=RegExp(s.emailRegex),j=0;j<k.length;j++)jQuery.trim(k[j]).match(h)||(l=false);return this.optional(f)||l},s.emailsInvalidMessage);a.validator.addMethod("username",function(o,f){return this.optional(f)||o.match(s.usernameRegex)},s.usernameInvalidMessage);a.validator.addMethod("usernameexists",function(o,f,k){if(this.optional(f))return"dependency-mismatch";
var l=this.previousValue(f);this.settings.messages[f.name]||(this.settings.messages[f.name]={});l.originalMessage=this.settings.messages[f.name].remote;this.settings.messages[f.name].remote=l.message;k=typeof k=="string"&&{url:k}||k;var h=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsUsernameAvailable";if(k.url)h=k.url;if(l.old!==o){l.old=o;var j=this;this.startRequest(f);var n='{"username":"'+o+'","elementName":"'+f.name+'"}';a.telligent.evolution.post({url:h,
dataType:"json",contentType:"application/json; charset=utf-8",data:n,success:function(g){f=j.findByName(g.d.ElementName)[0];j.settings.messages[f.name].remote=l.originalMessage;var c=g.d.IsValid===true;if(c){var e=j.formSubmitted;j.prepareElement(f);j.formSubmitted=e;j.successList.push(f);j.showErrors()}else{e={};g=l.message=g.d.ErrorMessage||j.defaultMessage(f,"usernameexists");e[f.name]=a.isFunction(g)?n(o):g;j.showErrors(e)}l.valid=c;j.stopRequest(f,c)}});return"pending"}else if(this.pending[f.name])return"pending";
return l.valid},undefined);a.validator.addMethod("emailexists",function(o,f,k){if(this.optional(f))return"dependency-mismatch";var l=this.previousValue(f);this.settings.messages[f.name]||(this.settings.messages[f.name]={});l.originalMessage=this.settings.messages[f.name].remote;this.settings.messages[f.name].remote=l.message;k=typeof k=="string"&&{url:k}||k;var h=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsEmailAvailable";if(k.url)h=k.url;if(l.old!==o){l.old=
o;var j=this;this.startRequest(f);var n='{"email":"'+o+'","elementName":"'+f.name+'"}';a.telligent.evolution.post({url:h,dataType:"json",contentType:"application/json; charset=utf-8",data:n,success:function(g){f=j.findByName(g.d.ElementName)[0];j.settings.messages[f.name].remote=l.originalMessage;var c=g.d.IsValid===true;if(c){var e=j.formSubmitted;j.prepareElement(f);j.formSubmitted=e;j.successList.push(f);j.showErrors()}else{e={};g=l.message=g.d.ErrorMessage||j.defaultMessage(f,"emailexists");e[f.name]=
a.isFunction(g)?n(o):g;j.showErrors(e)}l.valid=c;j.stopRequest(f,c)}});return"pending"}else if(this.pending[f.name])return"pending";return l.valid},undefined);a.validator.addMethod("groupnameexists",function(o,f,k){if(this.optional(f))return"dependency-mismatch";var l=encodeURIComponent(a.trim(o));if(l.length==0)return true;var h=this.previousValue(f);this.settings.messages[f.name]||(this.settings.messages[f.name]={});h.originalMessage=this.settings.messages[f.name].remote;this.settings.messages[f.name].remote=
h.message;k=k.getParentId();l='{"groupName":"'+l+'","parentGroupId":'+k+',"elementName":"'+f.name+'"}';if(h.old!==l){h.old=l;var j=this;this.startRequest(f);k=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsGroupNameAvailable";a.telligent.evolution.post({url:k,dataType:"json",contentType:"application/json; charset=utf-8",data:l,success:function(n){f=j.findByName(n.d.ElementName)[0];j.settings.messages[f.name].remote=h.originalMessage;var g=n.d.IsValid===true;if(g){var c=
j.formSubmitted;j.prepareElement(f);j.formSubmitted=c;j.successList.push(f);j.showErrors()}else{c={};n=h.message=n.d.ErrorMessage||j.defaultMessage(f,"groupnameexists");c[f.name]=a.isFunction(n)?message(o):n;j.showErrors(c)}h.valid=g;j.stopRequest(f,g)}});return"pending"}else if(this.pending[f.name])return"pending";return h.valid},undefined);a.validator.addMethod("wikipageexists",function(o,f,k){if(this.optional(f))return"dependency-mismatch";var l=encodeURIComponent(a.trim(o));if(l.length==0)return true;
var h=this.previousValue(f);this.settings.messages[f.name]||(this.settings.messages[f.name]={});h.originalMessage=this.settings.messages[f.name].remote;this.settings.messages[f.name].remote=h.message;k='{"pageName":"'+l+'","wikiId":'+k.wikiId+',"pageId":'+k.pageId+',"parentPageId":'+k.parentPageId()+',"elementName":"'+f.name+'"}';if(h.old!==k){h.old=k;var j=this;this.startRequest(f);l=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsWikiPageNameAvailable";a.telligent.evolution.post({url:l,
dataType:"json",contentType:"application/json; charset=utf-8",data:k,success:function(n){f=j.findByName(n.d.ElementName)[0];j.settings.messages[f.name].remote=h.originalMessage;var g=n.d.IsValid===true;if(g){var c=j.formSubmitted;j.prepareElement(f);j.formSubmitted=c;j.successList.push(f);j.showErrors()}else{c={};n=h.message=n.d.ErrorMessage||j.defaultMessage(f,"wikipageexists");c[f.name]=a.isFunction(n)?message(o):n;j.showErrors(c)}h.valid=g;j.stopRequest(f,g)}});return"pending"}else if(this.pending[f.name])return"pending";
return h.valid},undefined);a.validator.addMethod("mailinglistnameexists",function(o,f,k){if(a.trim(o)=="")return this.optional(f);var l=this.previousValue(f);this.settings.messages[f.name]||(this.settings.messages[f.name]={});l.originalMessage=this.settings.messages[f.name].remote;this.settings.messages[f.name].remote=l.message;k=typeof k=="string"&&{url:k}||k;var h=a.telligent.evolution.site.getBaseUrl()+"Utility/Validation/Core_Validator.asmx/IsMailingListNameAvailable";if(k.url)h=k.url;if(l.old!==
o){l.old=o;var j=this;this.startRequest(f);var n='{"mailingListName":"'+o+'","elementName":"'+f.name+'"}';a.telligent.evolution.post({url:h,dataType:"json",contentType:"application/json; charset=utf-8",data:n,success:function(g){f=j.findByName(g.d.ElementName)[0];j.settings.messages[f.name].remote=l.originalMessage;var c=g.d.IsValid===true;if(c){var e=j.formSubmitted;j.prepareElement(f);j.formSubmitted=e;j.successList.push(f);j.showErrors()}else{e={};g=l.message=g.d.ErrorMessage||j.defaultMessage(f,
"mailinglistnameexists");e[f.name]=a.isFunction(g)?n(o):g;j.showErrors(e)}l.valid=c;j.stopRequest(f,c)}});return"pending"}else if(this.pending[f.name])return"pending";return l.valid},undefined)}}}})(jQuery,window);
(function(a){var s={addField:function(c,e,b,d){var r=this.data("evolutionValidation");if(typeof r!=="undefined"){r.internal.fields[r.internal.fields.length]={selector:c,messageSelector:b,isValid:true,context:d,initialized:false};c=a(c);c.data("_evolutionValidation",r).data("_evolutionValidationFieldIndex",r.internal.fields.length-1).data("_evolutionValidationOldValue","$$$$$NULL$$$$$").rules("add",e);try{c.keydown(function(){if(r.internal.hasAttemptedSubmit){window.clearTimeout(r.internal.keyPressValidationHandle);
var m=this;r.internal.keyPressValidationHandle=window.setTimeout(function(){l(r,a(m))},499)}})}catch(p){}c.blur(function(){l(r,a(this))})}return this},addCustomValidation:function(c,e,b,d,r){var p=this.data("evolutionValidation");if(typeof p!=="undefined"){var m=p.internal.customValidations.length;p.internal.customValidations[m]={id:c,validationFunction:e,message:b,messageSelector:d,isValid:true,context:r,initialized:false};return function(){return j(p,m)}}},isValid:function(){for(var c=this.data("evolutionValidation"),
e=0;e<c.internal.fields.length;e++)c.internal.fields[e].initialized||l(c,a(c.internal.fields[e].selector));for(e=0;e<c.internal.customValidations.length;e++)c.internal.customValidations[e].initialized||j(c,e);return k(c)},validate:function(){for(var c=this.data("evolutionValidation"),e=0;e<c.internal.fields.length;e++)l(c,a(c.internal.fields[e].selector));for(e=0;e<c.internal.customValidations.length;e++)j(c,e);return s.isValid.apply(a(c.internal.state),[])},validateField:function(c){try{var e=this.data("evolutionValidation");
return l(e,a(c))}catch(b){}},validateCustom:function(c){for(var e=this.data("evolutionValidation"),b=0;b<e.internal.customValidations.length;b++)if(e.internal.customValidations[b].id==c)return j(e,b);return true},reset:function(){for(var c=this.data("evolutionValidation"),e=0;e<c.internal.customValidations.length;e++){a(c.internal.customValidations[e].messageSelector).hide();c.internal.customValidations[e].isValid=true;c.internal.customValidations[e].initialized=false}for(e=0;e<c.internal.fields.length;e++){a(c.internal.fields[e].messageSelector).hide();
c.internal.fields[e].errorMessage=null;c.internal.fields[e].isValid=true;c.internal.fields[e].initialized=false;a(c.internal.fields[e].selector).data("_evolutionValidationOldValue","$$$$$NULL$$$$$")}c.internal.submitButtonClicked=false;c.internal.hasAttemptedSubmit=false;window.clearTimeout(c.internal.initialValidationHandle);c.internal.initialValidationHandle=window.setTimeout(function(){f(c)},249)}},o=function(c){return this.each(function(){var e={settings:a.extend({},a.fn.evolutionValidation.defaults,
c||{}),internal:{state:this,submitButtonClicked:false,hasAttemptedSubmit:false,fields:[],customValidations:[],initialValidationHandle:null}};a(this).data("evolutionValidation",e);a(this).click(function(b){return n(e,b)});this._isValid=function(){return n(e,{})};window.clearTimeout(e.internal.initialValidationHandle);e.internal.initialValidationHandle=window.setTimeout(function(){f(e)},499)})},f=function(c){window.clearTimeout(c.internal.initialValidationHandle);try{var e=false;if(c.settings.validateOnLoad===
true)e=true;else if(c.settings.validateOnLoad!==false)for(var b=0;b<c.internal.fields.length;b++){var d=a(c.internal.fields[b].selector),r=d.attr("type");if(r!="checkbox"&&r!="radio"&&r!="select"&&r!="submit"&&r!="button"&&r!="reset"&&h(c,d)!=""){e=true;break}}if(e){c.internal.hasAttemptedSubmit=true;var p=s.validate.apply(a(c.internal.state));g(c);c.settings.onValidated&&c.settings.onValidated(p,false,null)}else c.internal.hasAttemptedSubmit||c.settings.onValidated&&c.settings.onValidated(true,false,
null)}catch(m){c.internal.initialValidationHandle=window.setTimeout(function(){f(c)},499)}},k=function(c){for(var e=0;e<c.internal.fields.length;e++)if(!c.internal.fields[e].isValid)return false;for(e=0;e<c.internal.customValidations.length;e++)if(!c.internal.customValidations[e].isValid)return false;return true},l=function(c,e){var b=h(c,e);if(b!=e.data("_evolutionValidationOldValue")){e.data("_evolutionValidationOldValue",b);return e.valid()}else{b=e.data("_evolutionValidationFieldIndex");if(b<
0||b>=c.internal.fields.length)return false;return c.internal.fields[b].isValid}},h=function(c,e){return e.attr("type")=="checkbox"||e.attr("type")=="radio"?e.get(0).checked?e.val():"":e.val()},j=function(c,e){if(e<0||e>=c.internal.customValidations.length)return true;var b=c.internal.customValidations[e].validationFunction();c.internal.customValidations[e].initialized=true;if(b===true){c.internal.customValidations[e].isValid=true;a(c.internal.customValidations[e].messageSelector).hide();k(c)&&c.internal.hasAttemptedSubmit&&
c.settings.onValidated&&c.settings.onValidated(true,c.internal.submitButtonClicked,c.internal.customValidations[e].context);return true}else{b=k(c);c.internal.customValidations[e].isValid=false;c.internal.hasAttemptedSubmit&&a(c.internal.customValidations[e].messageSelector).html(c.internal.customValidations[e].message).show();if((c.internal.submitButtonClicked||b)&&c.internal.hasAttemptedSubmit&&c.settings.onValidated)c.settings.onValidated(false,c.internal.submitButtonClicked,c.internal.customValidations[e].context);
return false}},n=function(c,e){var b=!c.internal.hasAttemptedSubmit;c.internal.hasAttemptedSubmit=true;c.internal.submitButtonClicked=true;s.validate.apply(a(c.internal.state),[]);var d=s.isValid.apply(a(c.internal.state),[]);b&&!d&&g(c);b=true;if(d&&c.settings.onSuccessfulClick)b=c.settings.onSuccessfulClick(e);c.internal.submitButtonClicked=false;if(!d&&e){e.cancelBubble=true;e.returnValue=false}return d&&b!==false},g=function(c){for(var e=0;e<c.internal.fields.length;e++)if(!c.internal.fields[e].isValid&&
c.internal.fields[e].errorMessage!=null){a(c.internal.fields[e].messageSelector).html(c.internal.fields[e].errorMessage).show();c.internal.fields[e].errorMessage=null}for(e=0;e<c.internal.customValidations.length;e++)c.internal.customValidations[e].isValid||a(c.internal.customValidations[e].messageSelector).html(c.internal.customValidations[e].message).show()};a.fn.evolutionValidation=function(c){if(c in s)return s[c].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof c==="object"||
!c)return o.apply(this,arguments);else a.error("Method "+c+" does not exist on jQuery.fn.evolutionValidation")};a.extend(a.fn.evolutionValidation,{defaults:{validateOnLoad:null,onValidated:null,onSuccessfulClick:null}});a(document).ready(function(){a("form").validate({errorPlacement:function(c,e){var b=a(e).data("_evolutionValidation");if(b){var d=parseInt(a(e).data("_evolutionValidationFieldIndex"),10);if(!(d<0||d>=b.internal.fields.length))if(b.internal.hasAttemptedSubmit)a(b.internal.fields[d].messageSelector).html(c).show();
else b.internal.fields[d].errorMessage=c}},highlight:function(c){var e=a(c).data("_evolutionValidation");if(e){var b=k(e);c=a(c).data("_evolutionValidationFieldIndex");if(!(c<0||c>=e.internal.fields.length)){e.internal.fields[c].isValid=false;e.internal.fields[c].initialized=true;if((e.internal.submitButtonClicked||b)&&e.internal.hasAttemptedSubmit&&e.settings.onValidated)e.settings.onValidated(false,e.internal.submitButtonClicked,e.internal.fields[c].context)}}},unhighlight:function(c){var e=a(c).data("_evolutionValidation");
if(e){c=a(c).data("_evolutionValidationFieldIndex");if(!(c<0||c>=e.internal.fields.length)){e.internal.fields[c].isValid=true;e.internal.fields[c].initialized=true;k(e)&&e.internal.hasAttemptedSubmit&&e.settings.onValidated&&e.settings.onValidated(true,e.internal.submitButtonClicked,e.internal.fields[c].context)}}},onsubmit:false,onkeyup:false,onfocusout:false})})})(jQuery);
function Telligent_Validation(a,s){this._jq=$(a);if(s.onValidatedFunction)s.onValidated=s.onValidatedFunction;if(s.onSuccessfulClickFunction)s.onSuccessfulClick=s.onSuccessfulClickFunction;this._jq.evolutionValidation(s)}Telligent_Validation.prototype.AddField=function(a,s,o,f){this._jq.evolutionValidation("addField",a,s,o,f)};Telligent_Validation.prototype.AddCustomValidation=function(a,s,o,f,k){return this._jq.evolutionValidation("addCustomValidation",a,s,o,f,k)};
Telligent_Validation.prototype.IsValid=function(){return this._jq.evolutionValidation("isValid")};Telligent_Validation.prototype.Validate=function(){return this._jq.evolutionValidation("validate")};Telligent_Validation.prototype.ValidateField=function(a){return this._jq.evolutionValidation("validateField",a)};Telligent_Validation.prototype.ValidateCustom=function(a){return this._jq.evolutionValidation("validateCustom",a)};
