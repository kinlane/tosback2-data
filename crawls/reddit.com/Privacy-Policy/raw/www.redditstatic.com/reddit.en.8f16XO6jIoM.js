var JSON;JSON||(JSON={});
(function(){function a(a){return a<10?"0"+a:a}function b(a){h.lastIndex=0;return h.test(a)?'"'+a.replace(h,function(a){var b=l[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,e){var h,n,l,u,y=k,v,p=e[a];p&&typeof p==="object"&&typeof p.toJSON==="function"&&(p=p.toJSON(a));typeof m==="function"&&(p=m.call(e,a,p));switch(typeof p){case "string":return b(p);case "number":return isFinite(p)?String(p):"null";case "boolean":case "null":return String(p);case "object":if(!p)return"null";
k+=g;v=[];if(Object.prototype.toString.apply(p)==="[object Array]"){u=p.length;for(h=0;h<u;h+=1)v[h]=c(h,p)||"null";l=v.length===0?"[]":k?"[\n"+k+v.join(",\n"+k)+"\n"+y+"]":"["+v.join(",")+"]";k=y;return l}if(m&&typeof m==="object"){u=m.length;for(h=0;h<u;h+=1)typeof m[h]==="string"&&(n=m[h],(l=c(n,p))&&v.push(b(n)+(k?": ":":")+l))}else for(n in p)Object.prototype.hasOwnProperty.call(p,n)&&(l=c(n,p))&&v.push(b(n)+(k?": ":":")+l);l=v.length===0?"{}":k?"{\n"+k+v.join(",\n"+k)+"\n"+y+"}":"{"+v.join(",")+
"}";k=y;return l}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k,g,l={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},m;if(typeof JSON.stringify!=="function")JSON.stringify=function(a,b,e){var h;g=k="";if(typeof e==="number")for(h=0;h<e;h+=1)g+=" ";else typeof e==="string"&&(g=e);if((m=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return c("",
{"":a})};if(typeof JSON.parse!=="function")JSON.parse=function(a,b){function c(a,e){var g,h,l=a[e];if(l&&typeof l==="object")for(g in l)Object.prototype.hasOwnProperty.call(l,g)&&(h=c(l,g),h!==void 0?l[g]=h:delete l[g]);return b.call(a,e,l)}var g,a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return g=eval("("+a+")"),typeof b==="function"?c({"":g},""):g;throw new SyntaxError("JSON.parse");}})();
(function(){function a(b,c,e){if(b===c)return b!==0||1/b==1/c;if(b==null||c==null)return b===c;if(b._chain)b=b._wrapped;if(c._chain)c=c._wrapped;if(b.isEqual&&j.isFunction(b.isEqual))return b.isEqual(c);if(c.isEqual&&j.isFunction(c.isEqual))return c.isEqual(b);var g=m.call(b);if(g!=m.call(c))return!1;switch(g){case "[object String]":return b==String(c);case "[object Number]":return b!=+b?c!=+c:b==0?1/b==1/c:b==+c;case "[object Date]":case "[object Boolean]":return+b==+c;case "[object RegExp]":return b.source==
c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if(typeof b!="object"||typeof c!="object")return!1;for(var h=e.length;h--;)if(e[h]==b)return!0;e.push(b);var h=0,l=!0;if(g=="[object Array]"){if(h=b.length,l=h==c.length)for(;h--;)if(!(l=h in b==h in c&&a(b[h],c[h],e)))break}else{if("constructor"in b!="constructor"in c||b.constructor!=c.constructor)return!1;for(var n in b)if(j.has(b,n)&&(h++,!(l=j.has(c,n)&&a(b[n],c[n],e))))break;if(l){for(n in c)if(j.has(c,n)&&!h--)break;
l=!h}}e.pop();return l}var b=this,c=b._,e={},h=Array.prototype,k=Object.prototype,g=h.slice,l=h.unshift,m=k.toString,w=k.hasOwnProperty,x=h.forEach,s=h.map,n=h.reduce,q=h.reduceRight,u=h.filter,y=h.every,v=h.some,p=h.indexOf,G=h.lastIndexOf,k=Array.isArray,J=Object.keys,B=Function.prototype.bind,j=function(a){return new z(a)};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=j;exports._=j}else b._=j;j.VERSION="1.3.3";var t=j.each=j.forEach=function(a,
b,c){if(a!=null)if(x&&a.forEach===x)a.forEach(b,c);else if(a.length===+a.length)for(var g=0,h=a.length;g<h;g++){if(g in a&&b.call(c,a[g],g,a)===e)break}else for(g in a)if(j.has(a,g)&&b.call(c,a[g],g,a)===e)break};j.map=j.collect=function(a,b,c){var g=[];if(a==null)return g;if(s&&a.map===s)return a.map(b,c);t(a,function(a,o,e){g[g.length]=b.call(c,a,o,e)});if(a.length===+a.length)g.length=a.length;return g};j.reduce=j.foldl=j.inject=function(a,b,c,g){var e=arguments.length>2;a==null&&(a=[]);if(n&&
a.reduce===n)return g&&(b=j.bind(b,g)),e?a.reduce(b,c):a.reduce(b);t(a,function(a,o,h){e?c=b.call(g,c,a,o,h):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};j.reduceRight=j.foldr=function(a,b,c,g){var e=arguments.length>2;a==null&&(a=[]);if(q&&a.reduceRight===q)return g&&(b=j.bind(b,g)),e?a.reduceRight(b,c):a.reduceRight(b);var h=j.toArray(a).reverse();g&&!e&&(b=j.bind(b,g));return e?j.reduce(h,b,c,g):j.reduce(h,b)};j.find=j.detect=function(a,b,c){var g;
H(a,function(a,o,e){if(b.call(c,a,o,e))return g=a,!0});return g};j.filter=j.select=function(a,b,c){var g=[];if(a==null)return g;if(u&&a.filter===u)return a.filter(b,c);t(a,function(a,o,e){b.call(c,a,o,e)&&(g[g.length]=a)});return g};j.reject=function(a,b,c){var g=[];if(a==null)return g;t(a,function(a,o,e){b.call(c,a,o,e)||(g[g.length]=a)});return g};j.every=j.all=function(a,b,c){var g=!0;if(a==null)return g;if(y&&a.every===y)return a.every(b,c);t(a,function(a,o,h){if(!(g=g&&b.call(c,a,o,h)))return e});
return!!g};var H=j.some=j.any=function(a,b,c){b||(b=j.identity);var g=!1;if(a==null)return g;if(v&&a.some===v)return a.some(b,c);t(a,function(a,o,h){if(g||(g=b.call(c,a,o,h)))return e});return!!g};j.include=j.contains=function(a,b){var c=!1;if(a==null)return c;if(p&&a.indexOf===p)return a.indexOf(b)!=-1;return c=H(a,function(a){return a===b})};j.invoke=function(a,b){var c=g.call(arguments,2);return j.map(a,function(a){return(j.isFunction(b)?b||a:a[b]).apply(a,c)})};j.pluck=function(a,b){return j.map(a,
function(a){return a[b]})};j.max=function(a,b,c){if(!b&&j.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!b&&j.isEmpty(a))return-Infinity;var g={computed:-Infinity};t(a,function(a,o,e){o=b?b.call(c,a,o,e):a;o>=g.computed&&(g={value:a,computed:o})});return g.value};j.min=function(a,b,c){if(!b&&j.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!b&&j.isEmpty(a))return Infinity;var g={computed:Infinity};t(a,function(a,o,e){o=b?b.call(c,a,o,e):a;o<g.computed&&(g={value:a,computed:o})});
return g.value};j.shuffle=function(a){var b=[],c;t(a,function(a,g){c=Math.floor(Math.random()*(g+1));b[g]=b[c];b[c]=a});return b};j.sortBy=function(a,b,c){var g=j.isFunction(b)?b:function(a){return a[b]};return j.pluck(j.map(a,function(a,b,o){return{value:a,criteria:g.call(c,a,b,o)}}).sort(function(a,b){var c=a.criteria,g=b.criteria;if(c===void 0)return 1;if(g===void 0)return-1;return c<g?-1:c>g?1:0}),"value")};j.groupBy=function(a,b){var c={},g=j.isFunction(b)?b:function(a){return a[b]};t(a,function(a,
b){var o=g(a,b);(c[o]||(c[o]=[])).push(a)});return c};j.sortedIndex=function(a,b,c){c||(c=j.identity);for(var g=0,e=a.length;g<e;){var h=g+e>>1;c(a[h])<c(b)?g=h+1:e=h}return g};j.toArray=function(a){if(!a)return[];if(j.isArray(a))return g.call(a);if(j.isArguments(a))return g.call(a);if(a.toArray&&j.isFunction(a.toArray))return a.toArray();return j.values(a)};j.size=function(a){return j.isArray(a)?a.length:j.keys(a).length};j.first=j.head=j.take=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]};
j.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))};j.last=function(a,b,c){return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]};j.rest=j.tail=function(a,b,c){return g.call(a,b==null||c?1:b)};j.compact=function(a){return j.filter(a,function(a){return!!a})};j.flatten=function(a,b){return j.reduce(a,function(a,c){if(j.isArray(c))return a.concat(b?c:j.flatten(c));a[a.length]=c;return a},[])};j.without=function(a){return j.difference(a,g.call(arguments,1))};j.uniq=j.unique=
function(a,b,c){var c=c?j.map(a,c):a,g=[];a.length<3&&(b=!0);j.reduce(c,function(c,e,h){if(b?j.last(c)!==e||!c.length:!j.include(c,e))c.push(e),g.push(a[h]);return c},[]);return g};j.union=function(){return j.uniq(j.flatten(arguments,!0))};j.intersection=j.intersect=function(a){var b=g.call(arguments,1);return j.filter(j.uniq(a),function(a){return j.every(b,function(b){return j.indexOf(b,a)>=0})})};j.difference=function(a){var b=j.flatten(g.call(arguments,1),!0);return j.filter(a,function(a){return!j.include(b,
a)})};j.zip=function(){for(var a=g.call(arguments),b=j.max(j.pluck(a,"length")),c=Array(b),e=0;e<b;e++)c[e]=j.pluck(a,""+e);return c};j.indexOf=function(a,b,c){if(a==null)return-1;var g;if(c)return c=j.sortedIndex(a,b),a[c]===b?c:-1;if(p&&a.indexOf===p)return a.indexOf(b);c=0;for(g=a.length;c<g;c++)if(c in a&&a[c]===b)return c;return-1};j.lastIndexOf=function(a,b){if(a==null)return-1;if(G&&a.lastIndexOf===G)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1};j.range=
function(a,b,c){arguments.length<=1&&(b=a||0,a=0);for(var c=arguments[2]||1,g=Math.max(Math.ceil((b-a)/c),0),e=0,h=Array(g);e<g;)h[e++]=a,a+=c;return h};var I=function(){};j.bind=function(a,b){var c,e;if(a.bind===B&&B)return B.apply(a,g.call(arguments,1));if(!j.isFunction(a))throw new TypeError;e=g.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(b,e.concat(g.call(arguments)));I.prototype=a.prototype;var h=new I,j=a.apply(h,e.concat(g.call(arguments)));if(Object(j)===j)return j;
return h}};j.bindAll=function(a){var b=g.call(arguments,1);b.length==0&&(b=j.functions(a));t(b,function(b){a[b]=j.bind(a[b],a)});return a};j.memoize=function(a,b){var c={};b||(b=j.identity);return function(){var g=b.apply(this,arguments);return j.has(c,g)?c[g]:c[g]=a.apply(this,arguments)}};j.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};j.defer=function(a){return j.delay.apply(j,[a,1].concat(g.call(arguments,1)))};j.throttle=function(a,b){var c,
g,e,h,l,n,m=j.debounce(function(){l=h=!1},b);return function(){c=this;g=arguments;var j;e||(e=setTimeout(function(){e=null;l&&a.apply(c,g);m()},b));h?l=!0:n=a.apply(c,g);m();h=!0;return n}};j.debounce=function(a,b,c){var g;return function(){var e=this,h=arguments;c&&!g&&a.apply(e,h);clearTimeout(g);g=setTimeout(function(){g=null;c||a.apply(e,h)},b)}};j.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;return c=a.apply(this,arguments)}};j.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments,
0));return b.apply(this,c)}};j.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}};j.after=function(a,b){if(a<=0)return b();return function(){if(--a<1)return b.apply(this,arguments)}};j.keys=J||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)j.has(a,c)&&(b[b.length]=c);return b};j.values=function(a){return j.map(a,j.identity)};j.functions=j.methods=function(a){var b=[],c;for(c in a)j.isFunction(a[c])&&
b.push(c);return b.sort()};j.extend=function(a){t(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]});return a};j.pick=function(a){var b={};t(j.flatten(g.call(arguments,1)),function(c){c in a&&(b[c]=a[c])});return b};j.defaults=function(a){t(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])});return a};j.clone=function(a){if(!j.isObject(a))return a;return j.isArray(a)?a.slice():j.extend({},a)};j.tap=function(a,b){b(a);return a};j.isEqual=function(b,c){return a(b,c,[])};
j.isEmpty=function(a){if(a==null)return!0;if(j.isArray(a)||j.isString(a))return a.length===0;for(var b in a)if(j.has(a,b))return!1;return!0};j.isElement=function(a){return!!(a&&a.nodeType==1)};j.isArray=k||function(a){return m.call(a)=="[object Array]"};j.isObject=function(a){return a===Object(a)};j.isArguments=function(a){return m.call(a)=="[object Arguments]"};if(!j.isArguments(arguments))j.isArguments=function(a){return!(!a||!j.has(a,"callee"))};j.isFunction=function(a){return m.call(a)=="[object Function]"};
j.isString=function(a){return m.call(a)=="[object String]"};j.isNumber=function(a){return m.call(a)=="[object Number]"};j.isFinite=function(a){return j.isNumber(a)&&isFinite(a)};j.isNaN=function(a){return a!==a};j.isBoolean=function(a){return a===!0||a===!1||m.call(a)=="[object Boolean]"};j.isDate=function(a){return m.call(a)=="[object Date]"};j.isRegExp=function(a){return m.call(a)=="[object RegExp]"};j.isNull=function(a){return a===null};j.isUndefined=function(a){return a===void 0};j.has=function(a,
b){return w.call(a,b)};j.noConflict=function(){b._=c;return this};j.identity=function(a){return a};j.times=function(a,b,c){for(var g=0;g<a;g++)b.call(c,g)};j.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};j.result=function(a,b){if(a==null)return null;var c=a[b];return j.isFunction(c)?c.call(a):c};j.mixin=function(a){t(j.functions(a),function(b){K(b,j[b]=a[b])})};var L=0;j.uniqueId=
function(a){var b=L++;return a?a+b:b};j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,A={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},D;for(D in A)A[A[D]]=D;var M=/\\|'|\r|\n|\t|\u2028|\u2029/g,N=/\\(\\|'|r|n|t|u2028|u2029)/g,E=function(a){return a.replace(N,function(a,b){return A[b]})};j.template=function(a,b,c){c=j.defaults(c||{},j.templateSettings);a="__p+='"+a.replace(M,function(a){return"\\"+A[a]}).replace(c.escape||
C,function(a,b){return"'+\n_.escape("+E(b)+")+\n'"}).replace(c.interpolate||C,function(a,b){return"'+\n("+E(b)+")+\n'"}).replace(c.evaluate||C,function(a,b){return"';\n"+E(b)+"\n;__p+='"})+"';\n";c.variable||(a="with(obj||{}){\n"+a+"}\n");var a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n",g=new Function(c.variable||"obj","_",a);if(b)return g(b,j);b=function(a){return g.call(this,a,j)};b.source="function("+(c.variable||"obj")+"){\n"+a+"}";return b};
j.chain=function(a){return j(a).chain()};var z=function(a){this._wrapped=a};j.prototype=z.prototype;var F=function(a,b){return b?j(a).chain():a},K=function(a,b){z.prototype[a]=function(){var a=g.call(arguments);l.call(a,this._wrapped);return F(b.apply(j,a),this._chain)}};j.mixin(j);t(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=h[a];z.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var g=c.length;(a=="shift"||a=="splice")&&g===0&&delete c[0];return F(c,
this._chain)}});t(["concat","join","slice"],function(a){var b=h[a];z.prototype[a]=function(){return F(b.apply(this._wrapped,arguments),this._chain)}});z.prototype.chain=function(){this._chain=!0;return this};z.prototype.value=function(){return this._wrapped}}).call(this);
(function(){var a={},b=window,c=b.document,e;a.disabled=!1;a.set=function(){};a.get=function(){};a.remove=function(){};a.clear=function(){};a.transact=function(b,c,g){var e=a.get(b);g==null&&(g=c,c=null);typeof e=="undefined"&&(e=c||{});g(e);a.set(b,e)};a.getAll=function(){};a.serialize=function(a){return JSON.stringify(a)};a.deserialize=function(a){if(typeof a=="string")return JSON.parse(a)};var h;try{h="localStorage"in b&&b.localStorage}catch(k){h=!1}if(h)e=b.localStorage,a.set=function(b,c){if(c===
void 0)return a.remove(b);e.setItem(b,a.serialize(c))},a.get=function(b){return a.deserialize(e.getItem(b))},a.remove=function(a){e.removeItem(a)},a.clear=function(){e.clear()},a.getAll=function(){for(var b={},c=0;c<e.length;++c){var g=e.key(c);b[g]=a.get(g)}return b};else{var g;try{g="globalStorage"in b&&b.globalStorage&&b.globalStorage[b.location.hostname]}catch(l){g=!1}if(g)e=b.globalStorage[b.location.hostname],a.set=function(b,c){if(c===void 0)return a.remove(b);e[b]=a.serialize(c)},a.get=function(b){return a.deserialize(e[b]&&
e[b].value)},a.remove=function(a){delete e[a]},a.clear=function(){for(var a in e)delete e[a]},a.getAll=function(){for(var b={},c=0;c<e.length;++c){var g=e.key(c);b[g]=a.get(g)}return b};else if(c.documentElement.addBehavior){var m,w;try{w=new ActiveXObject("htmlfile"),w.open(),w.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>'),w.close(),m=w.w.frames[0].document,e=m.createElement("div")}catch(x){e=c.createElement("div"),m=c.body}b=function(b){return function(){var c=
Array.prototype.slice.call(arguments,0);c.unshift(e);m.appendChild(e);e.addBehavior("#default#userData");e.load("localStorage");c=b.apply(a,c);m.removeChild(e);return c}};a.set=b(function(b,c,g){c="_"+c;if(g===void 0)return a.remove(c);b.setAttribute(c,a.serialize(g));b.save("localStorage")});a.get=b(function(b,c){return a.deserialize(b.getAttribute("_"+c))});a.remove=b(function(a,b){a.removeAttribute("_"+b);a.save("localStorage")});a.clear=b(function(a){var b=a.XMLDocument.documentElement.attributes;
a.load("localStorage");for(var c=0,g;g=b[c];c++)a.removeAttribute(g.name);a.save("localStorage")});a.getAll=b(function(b){var c=b.XMLDocument.documentElement.attributes;b.load("localStorage");for(var b={},g=0,e;e=c[g];++g)b[e]=a.get(e);return b})}}try{a.set("__storejs__","__storejs__");if(a.get("__storejs__")!="__storejs__")a.disabled=!0;a.remove("__storejs__")}catch(s){a.disabled=!0}typeof module!="undefined"&&typeof module!="function"?module.exports=a:typeof define==="function"&&define.amd?define(a):
this.store=a})();
jQuery.cookie=function(a,b,c){if(arguments.length>1&&String(b)!=="[object Object]"){c=jQuery.extend({},c);if(b===null||b===void 0)c.expires=-1;if(typeof c.expires==="number"){var e=c.expires,h=c.expires=new Date;h.setDate(h.getDate()+e)}b=String(b);return document.cookie=[encodeURIComponent(a),"=",c.raw?b:encodeURIComponent(b),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}c=b||{};h=c.raw?function(a){return a}:
decodeURIComponent;return(e=RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(document.cookie))?h(e[1]):null};
(function(a,b){function c(a,b){for(var c=decodeURI(a),c=l[b?"strict":"loose"].exec(c),g={attr:{},param:{},seg:{}},e=14;e--;)g.attr[k[e]]=c[e]||"";g.param.query={};g.param.fragment={};g.attr.query.replace(m,function(a,b,c){b&&(g.param.query[b]=c)});g.attr.fragment.replace(w,function(a,b,c){b&&(g.param.fragment[b]=c)});g.seg.path=g.attr.path.replace(/^\/+|\/+$/g,"").split("/");g.seg.fragment=g.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");g.attr.base=g.attr.host?g.attr.protocol+"://"+g.attr.host+
(g.attr.port?":"+g.attr.port:""):"";return g}function e(a){a=a.tagName;if(a!==b)return h[a.toLowerCase()];return a}var h={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},k=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],g={anchor:"fragment"},l={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},m=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g,w=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g;a.fn.url=function(b){var c="";this.length&&(c=a(this).attr(e(this[0]))||"");return a.url(c,b)};a.url=function(a,e){arguments.length===1&&a===!0&&(e=!0,a=b);a=a||window.location.toString();return{data:c(a,e||!1),attr:function(a){a=g[a]||
a;return a!==b?this.data.attr[a]:this.data.attr},param:function(a){return a!==b?this.data.param.query[a]:this.data.param.query},fparam:function(a){return a!==b?this.data.param.fragment[a]:this.data.param.fragment},segment:function(a){return a===b?this.data.seg.path:(a=a<0?this.data.seg.path.length+a:a-1,this.data.seg.path[a])},fsegment:function(a){return a===b?this.data.seg.fragment:(a=a<0?this.data.seg.fragment.length+a:a-1,this.data.seg.fragment[a])}}}})(jQuery);
(function(a){function b(){return function(b){if(b.jquery){var c={};c[0]=jQuery;a.map(b.jquery,function(b){var g=b[0],e=b[1],h=b[2],b=b[3];if(typeof b=="string")b=a.unsafe(b);else for(var k=0;b.length&&k<b.length;k++)b[k]=a.unsafe(b[k]);h=="call"?c[e]=c[g].apply(c[g]._obj,b):h=="attr"?(c[e]=c[g][b],c[e]?c[e]._obj=c[g]:a.debug("unrecognized")):h=="refresh"?a.refresh():a.debug("unrecognized")})}}}a.log=function(a){window.console?window.console.debug?window.console.debug(a):window.console.log&&window.console.log(a):
alert(a)};a.debug=function(b){if(a.with_default(reddit.debug,!1))return a.log(b)};a.fn.debug=function(){a.debug(a(this));return a(this)};a.redirect=function(a){window.location=a};a.fn.redirect=function(b){a(this).filter("form").find(".status").show().html("redirecting...");if(a(this).attr("target")=="_top"){for(var c=window;c!=c.parent;)c=c.parent;c.location=b}else a.redirect(b);return a(this)};a.refresh=function(){window.location.reload(!0)};a.defined=function(a){return typeof a!="undefined"};a.with_default=
function(b,c){return a.defined(b)?b:c};a.websafe=function(a){typeof a=="string"&&(a=a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/>/g,"&gt;").replace(/</g,"&lt;"));return a||""};a.unsafe=function(a){typeof a=="string"&&(a=a.replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&"));return a||""};a.uniq=function(a,b){for(var c=[],e={},h=b?b:a.length,k=0;k<a.length&&c.length<h;k++)e[a[k]]||(e[a[k]]=!0,c.push(a[k]));return c};(function(b,c){a.fn.show=function(c,
e){a(this).trigger("onshow");return b.call(this,c,e)};a.fn.hide=function(b,g){a(this).trigger("onhide");return c.call(this,b,g)}})(a.fn.show,a.fn.hide);var c={};a.handleResponse=b;a.request=function(g,e,h,k,x,s,n){var q=g,u=h;if(rate_limit(g))n&&n("ratelimit");else if(!(window!=window.top&&!reddit.cnameframe&&!reddit.external_frame)){if(!(u=!a.with_default(k,!1)))u=c[q]?!1:c[q]=!0;k=u;e=a.with_default(e,{});h=a.with_default(h,b(q));x=a.with_default(x,"json");typeof h!="function"&&(h=b(q));u=function(a){delete c[q];
return h(a)};errorhandler_in=a.with_default(n,function(){});n=function(a){delete c[q];return errorhandler_in(a)};s=a.with_default(s,!1);if(reddit.post_site)e.r=reddit.post_site;if(reddit.cnameframe)e.cnameframe=1;if(reddit.logged)e.uh=reddit.modhash;e.renderstyle=reddit.renderstyle;k&&a.ajax({type:s?"GET":"POST",url:"/api/"+g,data:e,success:u,error:n,dataType:x})}};rate_limit=function(){var a={vote:333,comment:5E3,ignore:0,ban:0,unban:0,assignad:0},b={},c=Date;return function(e){var h=new c,k=e in
a?a[e]:333,n=b[e];b[e]=h;return n&&h-n<k}}();a.fn.vote=function(b,c,e,h){if(reddit.logged&&a(this).hasClass("arrow")){var k=a(this).hasClass("up")?1:a(this).hasClass("down")?-1:0,s=a(this).all_things_by_id(),n=s.children().not(".child").find(".arrow"),q=k==1?"up":"upmod";n.filter("."+q).removeClass(q).addClass(k==1?"upmod":"up");q=k==-1?"down":"downmod";n.filter("."+q).removeClass(q).addClass(k==-1?"downmod":"down");reddit.logged&&(s.each(function(){var b=a(this).find(".entry:first, .midcol:first");
k>0?b.addClass("likes").removeClass("dislikes unvoted"):k<0?b.addClass("dislikes").removeClass("likes unvoted"):b.addClass("unvoted").removeClass("likes dislikes")}),a.defined(h)||(h=s.filter(":first").thing_id(),b+=e?"":"-"+h,a.request("vote",{id:h,dir:k,vh:b})));c&&c(s,k)}};a.fn.show_unvotable_message=function(){a(this).thing().find(".entry:first .unvotable-message").css("display","inline-block")};a.fn.thing=function(){return this.parents(".thing:first")};a.fn.all_things_by_id=function(){return this.thing().add(a.things(this.thing_id()))};
a.fn.thing_id=function(b){var b=a.with_default(b,"thing"),c=this.hasClass("thing")?this:this.thing();b!="thing"&&(c=c.find("."+b+":first"));if(c.length)return b=a.grep(c.get(0).className.match(/\S+/g),function(a){return a.match(/^id-/)}),b.length?b[0].slice(3,b[0].length):"";return""};a.things=function(){var b=a.map(arguments,function(a){return".thing.id-"+a}).join(", ");return a(b)};a.fn.same_author=function(){var b=a(this).thing_id("author"),c=[];a(".author.id-"+b).each(function(){c.push(".thing.id-"+
a(this).thing_id())});return a(c.join(", "))};a.fn.things=function(){return this.find(a.map(arguments,function(a){return".thing.id-"+a}).join(", "))};a.listing=function(b){b=b||"";if(b.slice(0,1)=="#"||b.slice(0,1)==".")b=b.slice(1,b.length);var c=b;b.slice(0,9)!="siteTable"?c="siteTable"+(b?"_"+b:""):b=b.slice(10,b.length);var e=a("#"+c).filter(":first");e.length==0&&(e=a.things(b).find(".child").append(document.createElement("div")).children(":last").addClass("sitetable").attr("id",c));return e};
var e=function(){};a.fn.set_thing_init=function(b){e=b;a(this).find(".thing:not(.stub)").each(function(){b(this)})};a.fn.new_thing_child=function(b,c){var e=this.thing_id(),h=c?a.listing(e):this.thing().find(".child:first");return(typeof b=="string"?h.prepend(b).children(":first"):b.hide().prependTo(h).show().find('input[name="parent"]').val(e).end()).randomize_ids()};a.fn.randomize_ids=function(){var b=(Math.random()+"").split(".")[1];a(this).find("*[id]").each(function(){a(this).attr("id",a(this).attr("id")+
b)}).end().find("label").each(function(){a(this).attr("for",a(this).attr("for")+b)});return a(this)};a.fn.replace_things=function(b,c,h,k){var x=this;return a.map(b,function(b){var g=b.data,b=a(x).things(g.id);k&&(b=b.filter(".stub"));if(b.length==0){var q=a.things(g.parent);q.length&&(b=a("<div></div>"),q.find(".child:first").append(b))}b.after(a.unsafe(g.content));g=b.next();c&&(g.show().children(".midcol, .entry").hide().end().children(".child:first").html(b.children(".child:first").remove().html()).end(),
h&&(b.hide(),g.children(".midcol, .entry").show()),g.find(".rank:first").html(b.find(".rank:first").html()));h?(b.hide(),c?g.children(".midcol, .entry").show():g.show()):g.hide();b.remove();e(g);return g})};a.insert_things=function(b,c){return a.map(b,function(b){var b=b.data,g=a.listing(b.parent),g=c?g.append(a.unsafe(b.content)).children(".thing:last"):g.prepend(a.unsafe(b.content)).children(".thing:first");e(g.hide().show());return g})};a.fn.delete_table_row=function(b){var c=this.parents("tr:first").get(0),
e=this.parents("table").get(0);c?a(c).fadeOut(function(){e.deleteRow(c.rowIndex);b&&b()}):b&&b()};a.fn.insert_table_rows=function(b,c){var e=this.is("table")?this.filter("table"):this.parents("table:first");a.map(e.get(),function(e){a.map(b,function(b){var g=c;g<0&&(g=Math.max(e.rows.length+g+1,0));var g=Math.min(g,e.rows.length),h=e.insertRow(g);a(h).hide().attr("id",b.id).addClass(b.css_class);a.map(b.cells,function(b){a(h.insertCell(h.cells.length)).html(a.unsafe(b)).trigger("insert-cell")});a(h).trigger("insert-row");
a(h).fadeIn()})});return this};a.fn.captcha=function(a){var b=this.find(".capimage");a&&b.attr("src","/captcha/"+a+".png").parents("form").find('input[name="iden"]').val(a);return b};a.fn.insertAtCursor=function(b){return a(this).filter("textarea").each(function(){var c=a(this).get(0),e=c.scrollTop;if(document.selection)c.focus(),document.selection.createRange().text=b;else if(c.selectionStart){var h=c.selectionStart;c.value=c.value.substring(0,c.selectionStart)+b+c.value.substring(c.selectionEnd,
c.value.length);h+=b.length;c.setSelectionRange(h,h)}else c.value+=b;if(c.scrollHeight)c.scrollTop=e;a(this).focus()}).end()};a.fn.select_line=function(b){return a(this).filter("textarea").each(function(){var c="\n",e=1,h=0;a.browser.msie&&(c="\r",e=0,h=1);for(var c=a(this).val().split(c),k=0;k<b-1;k++)h+=c[k].length+e;k=h;b<=c.length&&(k+=c[b-1].length+e);a(this).focus();this.createTextRange?(e=this.createTextRange(),e.move("character",h),h=this.createTextRange(),h.move("character",k),e.setEndPoint("StartToEnd",
h),e.select()):this.selectionStart&&this.setSelectionRange(h,k);if(this.scrollHeight)this.scrollTop=(b-2)*(this.scrollHeight/c.length)})};a.apply_stylesheet=function(b){var c=a("head").children("link[title], style[title]").filter(":first").attr("title")||"preferred stylesheet";if(document.styleSheets[0].cssText)for(var e=document.styleSheets,h=0;h<e.length;h++){if(e[h].title==c){e[h].cssText=b;break}}else a("head").children('*[title="'+c+'"]').remove(),a('<style type="text/css" media="screen"></style>').attr("title",
c).text(b).appendTo("head")};a.rehighlight_new_comments=function(){checked=a(".comment-visits-box input:checked");checked.length>0&&highlight_new_comments(checked[0].value)};var h;a.default_cookie_domain=function(a){a&&(h=a)};var k="_";a.cookie_name_prefix=function(a){a&&(k=a+"_")};a.cookie_write=function(b){if(b.name){var c={};c.expires=b.expires;c.domain=b.domain||h;c.path=b.path||"/";var e=k+b.name,b=b.data;b===null||b==""?b=null:typeof b!="string"&&(b=JSON.stringify(b));a.cookie(e,b,c)}};a.cookie_read=
function(b,c){var e=a.cookie((c||k)+b);try{e=JSON.parse(e)}catch(h){}return{name:b,data:e}}})(jQuery);r=window.r||{};r.setup=function(a){reddit=r.config=a;_.each(["debug","warn","error"],function(b){r[b]=a.debug&&window.console&&console[b]?_.bind(console[b],console):function(){}});r.config.currentOrigin=location.protocol+"//"+location.host;r.analytics.breadcrumbs.init()};
$(function(){r.login.ui.init();r.analytics.init();r.ui.init();r.spotlight.init();r.interestbar.init();r.apps.init();r.wiki.init();r.gold.init()});
r.utils={staticURL:function(a){return r.config.static_root+"/"+a},querySelectorFromEl:function(a,b){return $(a).parents().andSelf().filter(b||"*").map(function(a,b){var h=[],k=$(b),g=k.data("fullname"),l=k.attr("id"),k=k.attr("class");h.push(b.nodeName.toLowerCase());g?h.push('[data-fullname="'+g+'"]'):l?h.push("#"+l):k&&h.push("."+_.compact(k.split(/\s+/)).join("."));return h.join("")}).toArray().join(" ")},serializeForm:function(a){var b={};$.each(a.serializeArray(),function(a,e){b[e.name]=e.value});
return b}};r.ui={};r.ui.Base=function(a){this.$el=$(a)};r.ui.collapsibleSideBox=function(a){var b=$("#"+a);return new r.ui.Collapse(b.find(".title"),b.find(".content"),a)};r.ui.Collapse=function(a,b,c){r.ui.Base.call(this,a);this.target=b;this.key="ui.collapse."+c;this.isCollapsed=store.get(this.key)==!0;this.$el.click($.proxy(this,"toggle",null,!1));this.toggle(this.isCollapsed,!0)};
r.ui.Collapse.prototype={animDuration:200,toggle:function(a,b){a==null&&(a=!this.isCollapsed);var c=b?0:this.animDuration;a?$(this.target).slideUp(c):$(this.target).slideDown(c);this.isCollapsed=a;store.set(this.key,a);this.update()},update:function(){this.$el.find(".collapse-button").text(this.isCollapsed?"+":"-")}};r.ui.Form=function(a){r.ui.Base.call(this,a);this.$el.submit($.proxy(function(a){a.preventDefault();this.submit(a)},this))};
r.ui.Form.prototype=$.extend(new r.ui.Base,{workingDelay:200,setWorking:function(a){if(a){if(!this.$el.hasClass("working")&&!this._workingTimer)this._workingTimer=setTimeout($.proxy(function(){this.$el.addClass("working")},this),this.workingDelay)}else this._workingTimer&&(clearTimeout(this._workingTimer),delete this._workingTimer),this.$el.removeClass("working")},showStatus:function(a,b){this.$el.find(".status").show().toggleClass("error",!!b).text(a)},showErrors:function(a){statusMsgs=[];$.each(a,
$.proxy(function(a,c){var e=c[1],h=c[2],h=this.$el.find(".error."+c[0]+(h?".field-"+h:""));h.length?h.show().text(e):statusMsgs.push(e)},this));statusMsgs.length&&this.showStatus(statusMsgs.join(", "),!0)},resetErrors:function(){this.$el.find(".error").hide()},checkCaptcha:function(a){this.$el.has('input[name="captcha"]').length&&$.grep(a,function(a){return a[0]=="badCaptcha"})&&$.request("new_captcha",{id:this.$el.attr("id")})},serialize:function(){return this.$el.serializeArray()},submit:function(){this.resetErrors();
this.setWorking(!0);this._submit()},_submit:function(){},handleResult:function(a,b,c){a?(this.checkCaptcha(a.json.errors),this._handleResult(a)):(this.setWorking(!1),this._handleNetError(a,b,c))},_handleResult:function(a){this.showErrors(a.json.errors);this.setWorking(!1)},_handleNetError:function(a,b,c){this.showStatus(r.strings.an_error_occurred+" ("+c.status+")",!0)}});
r.ui.HelpBubble=function(a){r.ui.Base.call(this,a);this.$el.hover($.proxy(this,"queueShow"),$.proxy(this,"queueHide"));this.$parent=this.$el.parent();this.$parent.hover($.proxy(this,"queueShow"),$.proxy(this,"queueHide"));this.$parent.click($.proxy(this,"queueShow"))};r.ui.HelpBubble.init=function(){$(".help-bubble").each(function(a,b){$(b).data("HelpBubble",new r.ui.HelpBubble(b))})};
r.ui.HelpBubble.prototype=$.extend(new r.ui.Base,{showDelay:150,hideDelay:750,show:function(){this.cancelTimeout();$("body").append(this.$el);var a=this.$parent.offset();this.$el.show().offset({left:a.left+this.$parent.outerWidth(!0)-this.$el.outerWidth(!0),top:a.top+this.$parent.outerHeight(!0)+5})},hide:function(a){this.$el.fadeOut(150,$.proxy(function(){this.$el.hide();this.$parent.append(this.$el);a&&a()},this))},cancelTimeout:function(){if(this.timeout)clearTimeout(this.timeout),this.timeout=
null},queueShow:function(){this.cancelTimeout();this.timeout=setTimeout($.proxy(this,"show"),this.showDelay)},queueHide:function(){this.cancelTimeout();this.timeout=setTimeout($.proxy(this,"hide"),this.hideDelay)}});
r.ui.PermissionEditor=function(a){r.ui.Base.call(this,a);var b={};this.$el.find('input[type="hidden"]').each(function(a,e){b[e.name]=e.value});a=b.type;this.form_id=a+"-permissions-"+b.name;this.permission_info=r.strings.permissions.info[a];this.sorted_perm_keys=$.map(this.permission_info,function(a,b){return b});this.sorted_perm_keys.sort();this.original_perms=this._parsePerms(b.permissions);this.embedded=this.$el.find("form").length==0;this.$menu=null;this.embedded?(this.$permissions_field=this.$el.find('input[name="permissions"]'),
this.$menu_controller=this.$el.siblings(".permissions-edit")):this.$menu_controller=this.$el.closest("tr").find(".permissions-edit");this.$menu_controller.find("a").click($.proxy(this,"show"));this.updateSummary()};r.ui.PermissionEditor.init=function(){function a(a){$(a).find(".permissions").each(function(a,b){$(b).data("PermissionEditor",new r.ui.PermissionEditor(b))})}a("body");for(var b in r.strings.permissions.info)$("."+b+"-table").on("insert-row","tr",function(){a(this)})};
r.ui.PermissionEditor.prototype=$.extend(new r.ui.Base,{_parsePerms:function(a){var b={};a.split(",").forEach(function(a){b[a.substring(1)]=a[0]=="+"});return b.all?{all:!0}:b},_serializePerms:function(a){if(a.all)return"+all";else{var b=[],c;for(c in a)b.push((a[c]?"+":"-")+c);return b.join(",")}},_getNewPerms:function(){if(!this.$menu)return null;var a={};this.$menu.find('input[type="checkbox"]').each(function(b,c){a[$(c).attr("name")]=$(c).prop("checked")});return a},_makeMenuLabel:function(a){var b=
$.proxy(this,"updateSummary"),c=this.permission_info[a],e=$('<input type="checkbox">').attr("name",a).prop("checked",this.original_perms[a]),h=$("<label>").append(e).click(function(a){a.stopPropagation()});a=="all"?(e.change(function(){var a=e.is(":checked");h.siblings().toggleClass("disabled",a).find('input[type="checkbox"]').prop("disabled",a);b()}),h.append(document.createTextNode(r.strings.permissions.all_msg))):c&&(e.change(b),h.append(document.createTextNode(c.title)),h.attr("title",c.description));
return h},show:function(a){close_menus(a);this.$menu=$('<div class="permission-selector drop-choices">');this.$menu.append(this._makeMenuLabel("all"));for(var b in this.sorted_perm_keys)this.$menu.append(this._makeMenuLabel(this.sorted_perm_keys[b]));this.$menu.on("close_menu",$.proxy(this,"hide")).find("input").first().change().end();if(!this.embedded)a=this.$el.find("form").clone(),a.attr("id",this.form_id),a.click(function(a){a.stopPropagation()}),this.$menu.append("<hr>",a),this.$permissions_field=
this.$menu.find('input[name="permissions"]');this.$menu_controller.parent().append(this.$menu);open_menu(this.$menu_controller[0]);return!1},hide:function(){if(this.$menu){if(this.embedded)this.original_perms=this._getNewPerms(),this.$permissions_field.val(this._serializePerms(this.original_perms));this.$menu.remove();this.$menu=null;this.updateSummary()}},_renderBit:function(a){var b=this.permission_info[a],a=a=="all"?r.strings.permissions.all_msg:b?b.title:a,a=$('<span class="permission-bit"/>').text(a);
b&&a.attr("title",b.description);return a},updateSummary:function(){var a=this._getNewPerms(),b=[];if(a&&a.all)b.push(this._renderBit("all").toggleClass("added",this.original_perms.all!=!0));else{if(this.original_perms.all&&!a)b.push(this._renderBit("all"));else if(!this.original_perms.all)for(var c in this.original_perms)this.original_perms[c]&&(this.embedded&&(!a||a[c])&&b.push(this._renderBit(c)),this.embedded||b.push(this._renderBit(c).toggleClass("removed",a!=null&&!a[c])));if(a)for(c in a)this.permission_info[c]&&
a[c]&&!this.original_perms[c]&&b.push(this._renderBit(c).toggleClass("added",!this.embedded))}b.length||b.push($('<span class="permission-bit">').text(r.strings.permissions.none_msg).addClass("none"));c=$('<div class="permission-summary">');for(var e=0;e<b.length;e++)e>0&&c.append(", "),c.append(b[e]);c.toggleClass("edited",this.$menu!=null);this.$el.find(".permission-summary").replaceWith(c);a&&this.$permissions_field&&this.$permissions_field.val(this._serializePerms(a))},onCommit:function(a){this.$el.find('input[name="permissions"]').val(a);
this.original_perms=this._parsePerms(a);this.hide()}});r.ui.init=function(){r.ui.HelpBubble.init();r.ui.PermissionEditor.init()};
r.login={post:function(a,b,c){if(r.config.cnameframe&&!r.config.https_endpoint)a.$el.unbind(),a.$el.submit();else{var e=$('input[name="user"]',a.$el).val(),h=r.config.https_endpoint||"http://"+r.config.ajax_domain,e=h+"/api/"+b+"/"+e;if(r.config.currentOrigin==h||$.support.cors)b=a.serialize(),b.push({name:"api_type",value:"json"}),$.ajax({url:e,type:"POST",dataType:"json",data:b,success:c,error:function(a,b){c(!1,b,a)},xhrFields:{withCredentials:!0}});else{var k=$("<iframe>"),g=a.$el.clone(!0),a=
("resp"+Math.random()).replace(".","");k.css("display","none").attr("name",a).appendTo("body");k[0].contentWindow.name=a;g.unbind().css("display","none").attr("action",e).attr("target",a).appendTo("body");$("<input>").attr({type:"hidden",name:"api_type",value:"json"}).appendTo(g);$("<input>").attr({type:"hidden",name:"hoist",value:r.login.hoist.type}).appendTo(g);r.login.hoist.watch(b,function(a){r.config.debug||(k.remove(),g.remove());c(a)});g.submit()}}}};
r.login.hoist={type:"cookie",watch:function(a,b){var c="hoist_"+a,e=setInterval(function(){if(data=$.cookie(c)){try{data=JSON.parse(data)}catch(a){data=null}$.cookie(c,null,{domain:r.config.cur_domain,path:"/"});clearInterval(e);b(data)}},100)}};
r.login.ui={init:function(){if(!r.config.logged)$(".content form.login-form, .side form.login-form").each(function(a,b){new r.ui.LoginForm(b)}),$(".content form.register-form").each(function(a,b){new r.ui.RegisterForm(b)}),this.popup=new r.ui.LoginPopup($(".login-popup")[0]),$(document).delegate(".login-required","click",$.proxy(this,"loginRequiredAction"))},loginRequiredAction:function(a){if(r.config.logged)return!0;else{var a=$(a.target),b=a.attr("href"),c;b&&b!="#"?c=b:(a=a.thing(),a.length&&(c=
a.find(".comments").attr("href")));this.popup.showLogin(!0,c&&function(){window.location=c});return!1}}};r.ui.LoginForm=function(){r.ui.Form.apply(this,arguments)};
r.ui.LoginForm.prototype=$.extend(new r.ui.Form,{showErrors:function(a){r.ui.Form.prototype.showErrors.call(this,a);a.length&&this.$el.find(".recover-password").addClass("attention")},showStatus:function(){this.$el.find(".error").css("opacity",1);r.ui.Form.prototype.showStatus.apply(this,arguments)},resetErrors:function(){if(this.$el.hasClass("login-form-side")){var a=this.$el.find(".error");a.is(":visible")&&a.fadeTo(100,0.35)}else r.ui.Form.prototype.resetErrors.apply(this,arguments)},_submit:function(){r.login.post(this,
"login",$.proxy(this,"handleResult"))},_handleResult:function(a){if(a.json.errors.length)r.ui.Form.prototype._handleResult.call(this,a);else if(this.successCallback)this.successCallback(a);else{var a=r.config.extension?"/."+r.config.extension:"/",a=/\/login\/?$/.test($.url().attr("path"))?a:window.location,b=this.$el.find('input[name="dest"]').val();window.location=b||a}},_handleNetError:function(a,b,c){r.ui.Form.prototype._handleNetError.apply(this,arguments);c.status==0&&r.config.currentOrigin!=
r.config.https_endpoint&&$("<p>").append($("<a>").text(r.strings.login_fallback_msg).attr("href",r.config.https_endpoint+"/login")).appendTo(this.$el.find(".status"))},focus:function(){this.$el.find('input[name="user"]').focus()}});r.ui.RegisterForm=function(){r.ui.Form.apply(this,arguments);this.checkUsernameDebounced=_.debounce($.proxy(this,"checkUsername"),500);this.$user=this.$el.find('[name="user"]');this.$user.on("keyup",$.proxy(this,"usernameChanged"));this.$submit=this.$el.find(".submit button")};
r.ui.RegisterForm.prototype=$.extend(new r.ui.Form,{usernameChanged:function(){var a=this.$user.val();if(a!=this._priorName)this._priorName=a,this.$el.find(".error.field-user").hide(),this.$submit.attr("disabled",!1),this.$el.removeClass("name-available name-taken"),this.checkUsernameDebounced(a),this.$el.toggleClass("name-checking",!!a)},checkUsername:function(a){a&&$.ajax({url:"/api/username_available.json",data:{user:a},success:$.proxy(this,"displayUsernameStatus"),complete:$.proxy(function(){this.$el.removeClass("name-checking")},
this)})},displayUsernameStatus:function(a){a.json&&a.json.errors?(this.showErrors(a.json.errors),this.$submit.attr("disabled",!0)):(this.$el.removeClass("name-available name-taken").addClass(a?"name-available":"name-taken"),this.$submit.attr("disabled",a==!1))},_submit:function(){r.login.post(this,"register",$.proxy(this,"handleResult"))},_handleResult:r.ui.LoginForm.prototype._handleResult,focus:r.ui.LoginForm.prototype.focus});
r.ui.LoginPopup=function(a){r.ui.Base.call(this,a);this.loginForm=new r.ui.LoginForm(this.$el.find("form.login-form:first"));this.registerForm=new r.ui.RegisterForm(this.$el.find("form.register-form:first"))};
r.ui.LoginPopup.prototype=$.extend(new r.ui.Base,{show:function(a,b){this.loginForm.successCallback=b;this.registerForm.successCallback=b;$.request("new_captcha",{id:this.$el.attr("id")});this.$el.find(".cover-msg").toggle(!!a).end().show()},showLogin:function(){this.show.apply(this,arguments);this.loginForm.focus()},showRegister:function(){this.show.apply(this,arguments);this.registerForm.focus()}});
r.analytics={trackers:{},init:function(){$(document).delegate(".promotedlink.promoted, .sponsorshipbox","onshow",$.proxy(this,"fetchTrackersOrFirePixel"));$(".promotedlink.promoted:visible, .sponsorshipbox:visible").trigger("onshow");$("form.google-checkout").on("submit",this.fireGoogleCheckout);$("form.gold-checkout").one("submit",this.fireGoldCheckout)},fetchTrackingHashes:function(){var a={};$(".promotedlink.promoted, .sponsorshipbox").each(function(){var b=$(this),e=b.data("fullname"),h=b.data("sponsorship"),
k=b.data("cid");if(e&&!(e in r.analytics.trackers)){var g=e;h&&(g+="_"+h);g+="-"+(k||"");r.config.is_fake||(g+="-"+r.config.post_site);b.data("trackingName",g);a[e]=g}});var b=$.ajax({url:r.config.fetch_trackers_url,type:"get",dataType:"jsonp",data:{ids:_.values(a)},success:function(a){$.extend(r.analytics.trackers,a)}});_.each(a,function(a,e){this.trackers[e]=b},this)},fetchTrackersOrFirePixel:function(a){var b=$(a.target);if(a=b.data("fullname"))a in this.trackers||this.fetchTrackingHashes(),$.when(this.trackers[a]).done(_.bind(function(){this.fireTrackingPixel(b)},
this))},fireTrackingPixel:function(a){if(!a.data("trackerFired")){var b=a.data("trackingName"),c=this.trackers[b];(new Image).src=r.config.adtracker_url+"?"+$.param({id:b,hash:c,r:Math.round(Math.random()*2147483647)});var e=a.find("a.title"),h=e.html(),k=e.attr("href"),b=r.config.clicktracker_url+"?"+$.param({id:b,hash:c,url:k});save_href(e);e.attr("href",b);e.html()!=h&&e.html(h);e=a.find("a.thumbnail");save_href(e);e.attr("href",b);a.data("trackerFired",!0)}},fireUITrackingPixel:function(a,b){(new Image).src=
r.config.uitracker_url+"?"+$.param(_.extend({act:a,sr:b,r:Math.round(Math.random()*2147483647)},r.analytics.breadcrumbs.toParams()))},fireGoldCheckout:function(a){var b=$(this),c=b.data("vendor");b.parent().addClass("working");_gaq.push(["_trackPageview","/gold/external/"+c]);_gaq.push(function(){b.submit()});_gat&&_gat._getTracker&&a.preventDefault()},fireGoogleCheckout:function(){$(this).parent().addClass("working");_gaq.push(function(){var a=_gaq._getAsyncTracker();setUrchinInputCode(a)})}};
r.analytics.breadcrumbs={selector:".thing, .side, .sr-list, .srdrop, .tagline, .md, .organic-listing, .gadget, .sr-interest-bar, a, button, input",maxLength:3,sendLength:2,init:function(){this.hasSessionStorage=this._checkSessionStorage();this.data=this._load();this.data[0]&&this.data[0].url==window.location||this._storeBreadcrumb();$(document).delegate("a, button","click",$.proxy(function(a){this.storeLastClick($(a.target))},this))},_checkSessionStorage:function(){try{return sessionStorage.setItem("__test__",
"test"),sessionStorage.removeItem("__test__"),!0}catch(a){return!1}},_load:function(){if(!this.hasSessionStorage)return[{stored:!1}];var a;try{a=JSON.parse(sessionStorage.breadcrumbs)}catch(b){a=[]}_.isArray(a)||(a=[]);return a},store:function(){this.hasSessionStorage&&(sessionStorage.breadcrumbs=JSON.stringify(this.data))},_storeBreadcrumb:function(){var a={url:location.toString()};if("referrer"in document){var b=!document.referrer.match("^"+r.config.currentOrigin),c=this.data[0]&&document.referrer!=
this.data[0].url;if(b||c)a.ref=document.referrer}this.data.unshift(a);this.data=this.data.slice(0,this.maxLength);this.store()},storeLastClick:function(a){try{this.data[0].click=r.utils.querySelectorFromEl(a,this.selector),this.store()}catch(b){}},lastClickFullname:function(){var a=_.find(this.data,function(a){return a.click});if(a)return(a=a.click.match(/.*data-fullname="(\w+)"/))&&a[1]},toParams:function(){params=[];for(var a=0;a<this.sendLength;a++)_.each(this.data[a],function(b,c){params["c"+
a+"_"+c]=b});return params}};
$(function(){function a(a){$(a).parent().parent().addClass("edited");$(a).parent().parent().find(".status").empty()}function b(){$(this).data("saved")!=$(this).val()&&a(this)}function c(a){return function(){return post_form(this.parentNode,a)}}function e(a){return function(){$(this).removeClass("edited");return post_form(this,a)}}function h(){$(".flairselector li").removeClass("selected");$(this).addClass("selected");var a=$(this).parent().parent().siblings("form")[0];$(a).children('input[name="flair_template_id"]').val(this.id);
var a=$(a).children(".customizer"),b=a.children("input");$(this).hasClass("texteditable")?(a.addClass("texteditable"),b.removeAttr("disabled"),b.css("display","block"),b.val($.trim($(this).children(".flair").text())).select(),b.keyup(function(){$(".flairselection .flair").text($(b).val())})):(a.removeClass("texteditable"),b.attr("disabled","disabled").hide());a=$(".flairselector .flairremove").detach();$(".flairselection").html($(this).first().children().clone()).append(a);$(".flairselector .flairremove").css("display",
"inline-block");return!1}function k(){var a=$(this).parent().parent();$(a).children('input[name="flair_template_id"]').val("");$(a).children(".customizer").hide();a=$(".flairselector .flairremove").detach();$(a).hide();$(".flairselector li").removeClass("selected");$(".flairselection").empty().append(a)}function g(){$(this).parent().parent().siblings("input").val(this.id);post_form(this.parentNode.parentNode.parentNode,"selectflair");return!1}$(".flairlist").delegate(".flairtemplate form","submit",
e("flairtemplate")).delegate("form.clearflairtemplates","submit",e("clearflairtemplates")).delegate(".flairgrant .usertable form","submit",e("flair")).delegate(".flaircell input","focus",function(){a(this)}).delegate(".flaircell input","keyup",b).delegate(".flaircell input","change",b).delegate(".flairtemplate .flairdeletebtn","click",c("deleteflairtemplate")).delegate(".flairgrant .flairdeletebtn","click",c("deleteflair"));$(".flairtoggle").submit(function(){return post_form(this,"setflairenabled")});
$(".flairtoggle input").change(function(){$(this).parent().submit()});$(document).on("click",".tagline .flairselectbtn, .thing .flairselectbtn",function(a){function b(a){var c=$(a).children().length,e=Math.max(1,Math.min(3,Math.ceil(c/10))),h=Math.ceil(c/e),g=Math.max(150,$(a).width());$(a).width(g);if(e>1){$(a).css("float","left");for(var k=e*h-c,l=1;l<e;l++){var m=h;l<=k&&m--;var s=c-m;c-=m;m=$(a).children().slice(s).remove();$(m).width(g);$(a).after($("<ul>").css("float","left").append(m))}}return e*
(g+5)+50}close_menus(a);var c=this,e=$(c).siblings(".flairselector")[0];$(e).html('<img class="flairthrobber" src="'+r.utils.staticURL("throbber.gif")+'" />').addClass("active").height(18).width(18).css("padding-left",4).css("padding-top",4).css("padding-bottom",4).css("padding-right",4).css("left",$(c).position().left+$(c).width()-18+"px").css("top",$(c).position().top+"px");var s={};$(e).siblings("form").find("input").each(function(a,b){s[b.name]=b.value});$.request("flairselector",s,function(a){$(e).html(a);
var a=$(".flairselector ul"),a=Math.max(200,a.length?b(a):$(".error").width()+20),l=Math.max(100,$(c).position().left+$(c).width()-a);$(e).height("auto").width(a).css("left",l+"px").click(!1).find(".flairselection").click(!1).end().find("form").click(function(a){a.stopPropagation()}).submit(g).end().find(".customizer input").attr("disabled","disabled").end().find("li.selected").each(h).end().find("li:not(.error)").click(h).end().find(".flairremove").click(k).end()},!0,"html");return!1});$(".flairselector .dropdown").click(function(){open_menu(this);
$(this).addClass("active");return!1})});r.interestbar={init:function(){new r.ui.InterestBar($(".sr-interest-bar"))}};r.ui.InterestBar=function(){r.ui.Base.apply(this,arguments);this.$query=this.$el.find(".query");this.queryChangedDebounced=_.debounce($.proxy(this,"queryChanged"),500);this.$query.on("keyup",$.proxy(this,"keyPressed"));this.$query.on("focus",$.proxy(function(){this.$el.addClass("focus")},this)).on("blur",$.proxy(function(){this.$el.removeClass("focus")},this))};
r.ui.InterestBar.prototype={keyPressed:function(){var a=this.$query.val(),a=$.trim(a);if(a!=this._lastQuery)this._lastQuery=a,this.queryChangedDebounced(a),a&&a.length>1?this.$el.addClass("working"):(this.hideResults(),this.$el.removeClass("working error"))},queryChanged:function(a){a&&a.length>1&&$.ajax({url:"/api/subreddits_by_topic.json",data:{query:a},success:$.proxy(this,"displayResults"),error:$.proxy(this,"displayError")})},displayResults:function(a){this.$el.removeClass("working error");var b=
this.$el.find(".results li:first"),c=this.$el.find(".results li:last"),e=_.template('<li><a href="/r/<%= name %>" target="_blank">/r/<%= name %></a></li>');this.$el.find(".results").empty().append(b).append(_.map(a,e).join("")).append(c).slideDown(150)},hideResults:function(){this.$el.find(".results").slideUp(150)},displayError:function(a){this.$el.removeClass("working").addClass("error").find(".error-caption").text(r.strings.an_error_occurred_friendly+" ("+a.status+")");this.hideResults()}};
r.wiki={request:function(a){if(r.config.logged)a.data.uh=r.config.modhash;a.data.page=r.config.wiki_page;$.ajax(a)},baseApiUrl:function(){return r.wiki.baseUrl(!0)},baseUrl:function(a){var b="";a&&(b+="/api");b+="/wiki";r.config.is_fake||(b="/r/"+r.config.post_site+b);return b},init:function(){$("body").delegate(".wiki-page .revision_hide","click",this.toggleHide)},toggleHide:function(a){a.preventDefault();var a=$(this),b=r.wiki.baseApiUrl()+"/hide",c=a.parents(".revision");c.toggleClass("hidden");
r.wiki.request({url:b,type:"POST",dataType:"json",data:{revision:a.data("revision")},error:function(){c.toggleClass("hidden")},success:function(a){a.status?c.addClass("hidden"):c.removeClass("hidden")}})},addUser:function(a){a.preventDefault();$("#usereditallowerror").hide();var a=$(a.target),b=r.wiki.baseApiUrl()+"/alloweditor/add";r.wiki.request({url:b,type:"POST",data:{username:a.find('[name="username"]').val()},dataType:"json",error:function(){$("#usereditallowerror").show()},success:function(){location.reload()}})},
submitEdit:function(a){a.preventDefault();var b=$(a.target),a=r.wiki.baseApiUrl()+"/edit",c=$("#wiki_edit_conflict"),e=$("#wiki_special_error");c.hide();e.hide();params=r.utils.serializeForm(b);r.wiki.request({url:a,type:"POST",dataType:"json",data:params,success:function(){window.location=r.wiki.baseUrl()+"/"+r.config.wiki_page},statusCode:{409:function(a){var a=JSON.parse(a.responseText),e=b.children("#wiki_page_content");c.children("#youredit").val(e.val());c.children("#yourdiff").html(a.diffcontent);
b.children("#previous").val(a.newrevision);e.val(a.newcontent);c.fadeIn("slow")},415:function(a){var a=JSON.parse(a.responseText).special_errors,b=e.children("#specials");b.empty();for(i in a)b.append(a[i]+"<br/>");e.fadeIn("slow")},429:function(a){var a=JSON.parse(a.responseText).message,b=e.children("#specials");b.empty();b.text(a);e.fadeIn("slow")}}})},goCompare:function(){v1=$("input:radio[name=v1]:checked").val();v2=$("input:radio[name=v2]:checked").val();url=r.wiki.baseUrl()+"/"+r.config.wiki_page+
"?v="+v1;v2!=v1&&(url+="&v2="+v2);window.location=url}};function open_menu(a){$(a).siblings(".drop-choices").not(".inuse").css("top",a.offsetHeight+"px").each(function(){$(this).css("left",$(a).position().left+"px").css("top",$(a).height()+$(a).position().top+"px")}).addClass("active inuse")}
function close_menus(a){$(".drop-choices.inuse").not(".active").removeClass("inuse");$(".drop-choices.active").removeClass("active").trigger("close_menu");$(".flairselector").empty();$(a.target).closest("#search").length==0&&($("#moresearchinfo").slideUp(),$("#searchexpando").length==1?$("#searchexpando").slideUp(function(){$("#search_showmore").parent().show()}):$("#search_showmore").parent().show())}function hover_open_menu(){}
function select_tab_menu(a,b){var c="tabbedpane-"+b,e=$(a).parent().parent().parent();e.find(".tabmenu li").removeClass("selected");$(a).parent().addClass("selected");e.find(".tabbedpane").each(function(){this.style.display=this.id==c?"block":"none"})}function update_user(a){try{var b=$(a).find('input[name="user"]').val();a.action+="/"+b}catch(c){}return!0}function post_user(a,b){var c=$(a).find('input[name="user"]').val();return c==null?post_form(a,b):post_form(a,b+"/"+c)}
function post_form(a,b,c,e,h){try{return c==null&&(c=function(){return reddit.status_msg.submitting}),$(a).find(".error").not(".status").hide(),$(a).find(".status").html(c(a)).show(),simple_post_form(a,b,{},h)}catch(k){return!1}}
function get_form_fields(a,b,c){b=b||{};c||(c=function(){return!0});$(a).find("select, input, textarea").not(".gray, :disabled").each(function(){var a=$(this).attr("type");if(c(this)&&(a!="radio"&&a!="checkbox"||$(this).is(":checked")))b[$(this).attr("name")]=$(this).val()});if(b.id==null)b.id=$(a).attr("id")?"#"+$(a).attr("id"):"";return b}
function form_error(a){return function(b){b=b=="ratelimit"?r.strings.rate_limit:"an error occurred while posting (status: "+b.status+")";$(a).find(".status").text(b)}}function simple_post_form(a,b,c,e,h){$.request(b,get_form_fields(a,c),h,e,"json",!1,form_error(a));return!1}
function post_pseudo_form(a,b,c){$(a).find(".error").not(".status").hide();$(a).find(".status").html(reddit.status_msg.submitting).show();$.request(b,get_form_fields(a,{},function(b){b=$(b).parents("form:first");return b.length==0||b.get(0)==$(a).get(0)}),null,c,"json",!1,form_error(a));return!1}function post_multipart_form(a){$(a).find(".error").not(".status").hide();$(a).find(".status").html(reddit.status_msg.submitting).show();return!0}
function emptyInput(a,b){!$(a).val()||$(a).val()==b?$(a).addClass("gray").val(b).attr("rows",3):$(a).focus(function(){})}function showlang(){$(".lang-popup:first").show();return!1}function hidecover(a){$(a).parents(".cover-overlay").hide();return!1}function deleteRow(a){$(a).delete_table_row()}
function change_state(a,b,c,e,h){var k=$(a).parents("form").first(),g=k.find('input[name="id"]'),g=g.length?g.val():$(a).thing_id();simple_post_form(k,b,{id:g},void 0,h);c&&c(k.length?k:a,b);$.defined(e)||k.html(k.find('[name="executed"]').val());return!1}function unread_thing(a){a=$(a);a.hasClass("thing")||(a=a.thing());$(a).addClass("new unread")}
function read_thing(a){a=$(a);a.hasClass("thing")||(a=a.thing());$(a).hasClass("new")?$(a).removeClass("new"):$(a).removeClass("unread");$.request("read_message",{id:$(a).thing_id()})}function save_thing(a){$(a).thing().addClass("saved")}function unsave_thing(a){$(a).thing().removeClass("saved")}function click_thing(a){var b=$(a);b.hasClass("thing")||(b=b.thing());b.hasClass("message")&&b.hasClass("recipient")&&(b.hasClass("unread")?b.removeClass("unread"):b.hasClass("new")&&read_thing(a))}
function hide_thing(a){$(a).thing().fadeOut(function(){$(this).toggleClass("hidden");unexpando_child(a)})}function toggle_label(a,b,c){$(a).parent().find(".option").toggle();$(a)[0].onclick=function(){return toggle_label(a,c,b)};b&&b(a)}function toggle(a,b,c){r.analytics.breadcrumbs.storeLastClick(a);var e=$(a).parent().andSelf().filter(".option").removeClass("active").siblings().addClass("active").get(0);if(c&&!e.onclick)e.onclick=function(){return toggle(e,c,b)};b&&b(a);return!1}
function cancelToggleForm(a,b,c,e){c&&$(a).filter("button").length&&(c=$(a).thing().find(c).children(":visible").filter(":first"),toggle(c));$(a).thing().find(b).each(function(){e&&e($(this));$(this).hide().remove()});return!1}function linkstatus(){return reddit.status_msg.submitting}
function subscribe(a){return function(){reddit.logged&&(reddit.cur_site==a&&$("body").addClass("subscriber"),$.things(a).find(".entry").addClass("likes"),$.request("subscribe",{sr:a,action:"sub"}),r.analytics.fireUITrackingPixel("sub",a))}}function unsubscribe(a){return function(){reddit.logged&&(reddit.cur_site==a&&$("body").removeClass("subscriber"),$.things(a).find(".entry").removeClass("likes"),$.request("subscribe",{sr:a,action:"unsub"}),r.analytics.fireUITrackingPixel("unsub",a))}}
function friend(a,b,c){return function(){reddit.logged&&(encoded=encodeURIComponent(document.referrer),$.request("friend?note="+encoded,{name:a,container:b,type:c}))}}function unfriend(a,b,c){return function(){$.request("unfriend",{name:a,container:b,type:c})}}function share(a){$.request("new_captcha");$(a).new_thing_child($(".sharelink:first").clone(!0).attr("id","sharelink_"+$(a).thing_id()),!1);$.request("new_captcha")}
function cancelShare(a){return cancelToggleForm(a,".sharelink",".share-button")}function reject_promo(a){$(a).thing().find(".rejection-form").show().find("textare").focus()}function cancel_reject_promo(a){$(a).thing().find(".rejection-form").hide()}function complete_reject_promo(a){$(a).thing().removeClass("accepted").addClass("rejected").find(".reject_promo").remove()}function helpon(a){$(a).parents(".usertext-edit:first").children(".markhelp:first").show()}
function helpoff(a){$(a).parents(".usertext-edit:first").children(".markhelp:first").hide()}function show_all_messages(a){var b=[];$(a).parents(".message").find(".entry .collapsed").hide().end().find(".noncollapsed, .midcol:first").filter(":hidden").each(function(){var a=$(this).show().thing_id();b.indexOf(a)==-1&&b.push(a)});b.length&&$.request("uncollapse_message",{id:b.join(",")});return!1}
function hide_all_messages(a){var b=[];$(a).parents(".message").find(".entry .collapsed").show().end().find(".noncollapsed, .midcol:first").filter(":visible").each(function(){var a=$(this).hide().thing_id();b.indexOf(a)==-1&&b.push(a)});b.length&&$.request("collapse_message",{id:b.join(",")});return!1}
function hidecomment(a){a=$(a).thing();a.hide().find(".noncollapsed:first, .midcol:first").hide().end().show().find(".entry:first .collapsed").show();a.hasClass("message")?$.request("collapse_message",{id:$(a).thing_id()}):a.find(".child:first").hide();return!1}
function showcomment(a){a=$(a).thing();a.find(".entry:first .collapsed").hide().end().find(".noncollapsed:first, .midcol:first").show().end().show();a.hasClass("message")?$.request("uncollapse_message",{id:$(a).thing_id()}):a.find(".child:first").show();return!1}function morechildren(a,b,c,e,h){$(a).html(reddit.status_msg.loading).css("color","red");a=$(a).parents(".thing.morechildren:first").thing_id();$.request("morechildren",{link_id:b,children:c,depth:e,id:a,pv_hex:h});return!1}
function moremessages(a){$(a).html(reddit.status_msg.loading).css("color","red");$.request("moremessages",{parent_id:$(a).thing_id()});return!1}function add_thing_to_cookie(a,b){var c=$(a).thing_id();if(c&&c.length)return add_thing_id_to_cookie(c,b)}function add_thing_id_to_cookie(a,b){var c=$.cookie_read(b);if(!c.data)c.data="";if(c.data.substring(0,a.length)!=a){c.data=a+","+c.data;var e=c.data.split(",");if(e.length>5)e=$.uniq(e,5),c.data=e.join(",");$.cookie_write(c)}}
function clicked_items(){var a=$.cookie_read("recentclicks2");if(a&&a.data){for(var a=a.data.split(","),b=a.length-1;b>=0;b--)(!a[b]||!a[b].length)&&a.splice(b,1);return a}else return[]}function clear_clicked_items(){var a=$.cookie_read("recentclicks2");a.data="";$.cookie_write(a);$(".gadget").remove()}
function updateEventHandlers(a){var a=$(a),b=a.parent();$(a).filter(".link").find("a.title, a.comments").mousedown(function(){$(this).addClass("click");add_thing_to_cookie(this,"recentclicks2")});b.filter(".organic-listing").length&&(a.find(".hide-button a, .del-button a.yes, .report-button a.yes").each(function(){$(this).get(0).onclick=null}),a.find(".hide-button a").click(function(){var a=$(this).get(0);change_state(a,"hide",function(){r.spotlight.next()})}),a.find(".del-button a.yes").click(function(){var a=
$(this).get(0);change_state(a,"del",function(){r.spotlight.next()})}),a.find(".report-button a.yes").click(function(){var a=$(this).get(0);change_state(a,"report",function(){r.spotlight.next()})}))}function last_click(){var a=r.analytics.breadcrumbs.lastClickFullname();a&&$("body").hasClass("listing-page")&&($(".last-clicked").removeClass("last-clicked"),$(".id-"+a).last().addClass("last-clicked"))}function login(){if(cnameframe)return!0;return post_user(this,"login")}
function register(){if(cnameframe)return!0;return post_user(this,"register")}function fetch_title(){var a=$("#url-field"),b=a.find(".NO_URL"),a=a.find(".title-status"),c=$("#url").val();c?(a.show().text(reddit.status_msg.loading),b.hide(),$.request("fetch_title",{url:c})):(a.hide(),b.show().text("a url is required"))}function sr_cache(){if(!$.defined(reddit.sr_cache))reddit.sr_cache=[];return reddit.sr_cache}
function highlight_reddit(a){$("#sr-drop-down").children(".sr-selected").removeClass("sr-selected");a&&$(a).addClass("sr-selected")}function update_dropdown(a){var b=$("#sr-drop-down");if(a.length){var c=b.children(":first");c.removeClass("sr-selected");b.children().remove();$.each(a,function(e){if(!(e>10)){var e=a[e],k=c.clone();k.text(e);b.append(k)}});var e=$("#sr-autocomplete").outerHeight();b.css("top",e);b.show()}else b.hide()}
function sr_search(a){var a=a.toLowerCase(),b=sr_cache();b[a]?update_dropdown(b[a]):$.request("search_reddit_names.json",{query:a},function(c){b[a]=c.names;update_dropdown(c.names)})}
function sr_name_up(a){var b=$("#sr-autocomplete").val(),c=window.old_sr_name||"";window.old_sr_name=b;if(b=="")hide_sr_name_list();else if(!(a.keyCode==38||a.keyCode==40||a.keyCode==9))if(a.keyCode==27&&reddit.orig_sr)$("#sr-autocomplete").val(reddit.orig_sr),hide_sr_name_list();else if(b!=c)reddit.orig_sr=b,sr_search($("#sr-autocomplete").val())}
function sr_name_down(a){var b=$("#sr-autocomplete");if(a.keyCode==38||a.keyCode==40){var a=a.keyCode==38&&"up"||"down",c=$("#sr-drop-down .sr-selected:first"),e=$("#sr-drop-down .sr-name-row:first"),h=$("#sr-drop-down .sr-name-row:last"),k=null,k=a=="down"?c.length?c.get(0)==h.get(0)?null:c.next(":first"):e:c.length?c.get(0)==e.get(0)?null:c.prev(":first"):h;highlight_reddit(k);k?b.val($.trim(k.text())):b.val(reddit.orig_sr);return!1}else if(a.keyCode==13)return $("#sr-autocomplete").trigger("sr-changed"),
hide_sr_name_list(),b.parents("form").submit(),!1}function hide_sr_name_list(){$("#sr-drop-down").hide()}function sr_dropdown_mdown(a){reddit.sr_mouse_row=a;return!1}function sr_dropdown_mup(a){reddit.sr_mouse_row==a&&(a=$(a).text(),$("#sr-autocomplete").val(a),$("#sr-drop-down").hide(),$("#sr-autocomplete").trigger("sr-changed"))}function set_sr_name(a){a=$(a).text();$("#sr-autocomplete").trigger("focus").val(a);$("#sr-autocomplete").trigger("sr-changed")}
function select_form_tab(a,b,c){a=$(a).parent();a.addClass("selected").siblings().removeClass("selected");a=a.parent("ul").next(".formtabs-content");a.find(b).show().find(":input").removeAttr("disabled").end();a.find(c).hide().find(":input").attr("disabled",!0)}function expando_cache(){if(!$.defined(reddit.thing_child_cache))reddit.thing_child_cache=[];return reddit.thing_child_cache}
function expando_child(a){var b=expando_cache(),c=$(a).thing();c.find(".expando-button").addClass("expanded").removeClass("collapsed").get(0).onclick=function(){unexpando_child(a)};var e=c.find(".expando"),h=c.thing_id()+"_cache";b[h]?e.html($.unsafe(b[h])):$.request("expando",{link_id:c.thing_id()},function(a){b[h]=a;e.html($.unsafe(a))},!1,"html");e.show();return!1}
function unexpando_child(a){var b=$(a).thing();b.find(".expando-button").addClass("collapsed").removeClass("expanded").get(0).onclick=function(){expando_child(a)};b.find(".expando").hide().empty()}
function show_edit_usertext(a){var b=a.find(".usertext-edit"),c=a.find(".usertext-body"),e=b.find("div > textarea"),h=Math.max(c.children(".md").width(),500),k=Math.max(c.children(".md").height(),100);c.hide();b.show();e.css("width","");e.css("height","");e.get(0).scrollHeight>e.height()&&(c=Math.max(h-5,e.width()),e.width(c),b.width(c),b=Math.max(k,e.height()),e.height(b));a.find(".cancel, .save").show().end().find(".help-toggle").show().end();e.focus()}
function hide_edit_usertext(a){a.find(".usertext-edit").hide().end().find(".usertext-body").show().end().find(".cancel, .save").hide().end().find(".help-toggle").hide().end().find(".markhelp").hide().end()}
function comment_reply_for_elem(a){var a=$(a),b=a.thing(),c=a.thing_id(),e=b.find(".child .usertext:first");if(!e.length||e.parent().thing_id()!=b.thing_id())e=$(".usertext.cloneable:first").clone(!0),a.new_thing_child(e),e.prop("thing_id").value=c,e.attr("id","commentreply_"+c),e.find(".error").hide();return e}function edit_usertext(a){a=$(a).thing();a.find(".edit-usertext:first").parent("li").andSelf().hide();show_edit_usertext(a.find(".usertext:first"))}
function cancel_usertext(a){a=$(a);a.thing().find(".edit-usertext:first").parent("li").andSelf().show();hide_edit_usertext(a.closest(".usertext"))}function save_usertext(a){$(a).thing().find(".edit-usertext:first").parent("li").andSelf().show()}function reply(a){var b=comment_reply_for_elem(a);show_edit_usertext(b);b.show();b.find(".cancel").get(0).onclick=function(){b.hide()};$(a).thing().find(".showreplies:visible").click();return!1}
function toggle_distinguish_span(a){a=$(a).parents("form")[0];$(a).children().toggle()}function set_distinguish(a,b){change_state(a,"distinguish/"+b);$(a).children().toggle()}function populate_click_gadget(){if($(".click-gadget").length){var a=clicked_items();a&&a.length&&(a=$.uniq(a,5),a.sort(),$.request("gadget/click/"+a.join(","),void 0,void 0,void 0,"json",!0))}}
var toolbar_p=function(a,b){this.toggle_linktitle=function(a){$(".title, .submit, .url, .linkicon").toggle();$(a).is(".pushed-button")?$(a).parents(".middle-side").removeClass("clickable"):($(a).parents(".middle-side").addClass("clickable"),$(".url").children("form").children("input").focus().select());return this.toggle_pushed(a)};this.toggle_pushed=function(a){a=$(a);a.is(".pushed-button")?a.removeClass("pushed-button").addClass("popped-button"):a.removeClass("popped-button").addClass("pushed-button");
return!1};this.push_button=function(a){$(a).removeClass("popped-button").addClass("pushed-button")};this.pop_button=function(a){$(a).removeClass("pushed-button").addClass("popped-button")};this.serendipity=function(){this.push_button(".serendipity");return!0};this.show_panel=function(){parent.inner_toolbar.document.body.cols=a};this.hide_panel=function(){parent.inner_toolbar.document.body.cols=b};this.resize_toolbar=function(){var a=$("body").height();parent.document.body.rows=a+"px, 100%"};this.login_msg=
function(){$(".toolbar-status-bar").show();$(".login-arrow").show();this.resize_toolbar();return!1};this.top_window=function(){for(var a=window;a!=a.parent;)a=a.parent;return a.parent};var c=null;this.panel_loadurl=function(a){try{return window.parent.inner_toolbar.reddit_panel.location==a?!1:(c!=null&&(this.pop_button(c),c=null),!0)}catch(b){return!0}};var e=0;this.comments_pushed=function(a){(e=!e)?(this.push_button(a),this.show_panel()):(this.pop_button(a),this.hide_panel())};this.gourl=function(a,
b){var c=$(a).find('input[type="text"]').val(),c=b+escape(c);this.top_window().location.href=c;return!1};this.pref_commentspanel_hide=function(){$.request("tb_commentspanel_hide")};this.pref_commentspanel_show=function(){$.request("tb_commentspanel_show")}};function clear_all_langs(a){$(a).parents("td").find('input[type="checkbox"]').prop("checked",!1)}function check_some_langs(a){$(a).parents("td").find("#some-langs").prop("checked",!0)}
function fetch_parent(a,b,c){$(a).css("color","red").html(reddit.status_msg.loading);var e=$(a).thing();if(e.find(".uncollapsed .parent").length==0){var h="";$.getJSON(b,function(b){$.each(b,function(){this&&this.data.children&&$.each(this.data.children,function(){if(this.data.name==c)h=this.data.body_html})});h&&e.find(".noncollapsed .md").first().before('<div class="parent rounded">'+$.unsafe(h)+"</div>");$(a).parent("li").andSelf().remove()})}return!1}
function big_mod_action(a,b){if(!a.hasClass("pressed"))a.addClass("pressed"),d={id:a.thing_id()},a.siblings(".status-msg").hide(),b==-1?(d.spam=!1,$.request("remove",d,null,!0),a.siblings(".removed").show()):b==-2?($.request("remove",d,null,!0),a.siblings(".spammed").show()):b==1&&($.request("approve",d,null,!0),a.siblings(".approved").show());a.siblings(".pretty-button").removeClass("pressed");return!1}
function big_mod_toggle(a,b,c){a.toggleClass("pressed");$.request(a.is(".pressed")?b:c,{id:a.thing_id()},null,!0);return!1}
$(function(){function a(){return toggle(this)}$("body").click(close_menus);$("body").set_thing_init(updateEventHandlers);"placeholder"in document.createElement("input")||$("textarea[placeholder], input[placeholder]").addClass("gray").each(function(){var a=$(this),c=a.attr("placeholder");a.val()==""&&a.val(c)});$("textarea.gray, input.gray").focus(function(){$(this).attr("rows",7).filter(".gray").removeClass("gray").val("")});reddit.logged&&$.cookie_name_prefix(reddit.logged);$.default_cookie_domain(reddit.cur_domain.split(":")[0]);
last_click();$(window).on("pageshow",function(){last_click()});$('#search input[name="q"]').focus(function(){$("#searchexpando").slideDown()});$("#search_showmore").click(function(a){$("#search_showmore").parent().hide();$("#moresearchinfo").slideDown();a.preventDefault()});$("#moresearchinfo").prepend('<a href="#" id="search_hidemore">[-]</a>');$("#search_hidemore").click(function(a){$("#search_showmore").parent().show();$("#moresearchinfo").slideUp();a.preventDefault()});$("#shortlink-text").click(function(){$(this).select()});
$("body").delegate(".ajax-yn-button","submit",function(){var a=$(this).find('input[name="_op"]').val();post_form(this,a);return!1}).delegate(".ajax-yn-button .togglebutton","click",a).delegate(".ajax-yn-button .no","click",a).delegate(".ajax-yn-button .yes","click",function(){$(this).closest("form").submit()})});
function show_friend(a){$("div.content .author.id-"+a).addClass("friend").next(".userattrs").each(function(){$(this).html()?$(this).find(".friend").length==0&&$(this).find("a:first").debug().before('<a class="friend" title="friend" href="/prefs/friends">F</a>,'):$(this).html(' [<a class="friend" title="friend" href="/prefs/friends">F</a>]')})}
function show_unfriend(a){$(".author.id-"+a).removeClass("friend").next(".userattrs").each(function(){$(this).find("a.friend").remove();$(this).find("a").length==0&&$(this).html("")})}
function show_saved(a){var a=$(".id-"+a),b=a.find(".buttons").first().find(".comment-save-button");form='<li class="comment-unsave-button"><form action="/post/unsave" method="post" class="state-button unsave-button">';form+='<input type="hidden" name="executed" value="unsaved"/><span>';form+='<a href="javascript:void(0)" onclick="return change_state(this, \'unsave\', unsave_thing);">unsave</a></span></form></li>';b.replaceWith(form);a.addClass("saved")}
function search_feedback(a,b){f=$("form#search");var c=f.find('input[name="q"]').val(),e=f.find('input[name="sort"]').val(),h=f.find('input[name="t"]').val();$.request("searchfeedback",{q:c,sort:e,t:h,approval:b},null,!0);a.siblings(".pretty-button").removeClass("pressed");a.siblings(".thanks").show();a.addClass("pressed");return!1}function highlight_new_comments(a){var b;for(b=0;b<=9;b++)items=$(".comment-period-"+b),a>=0&&b>=a?items.addClass("new-comment"):items.removeClass("new-comment")}
function save_href(a){a.attr("srcurl")||a.attr("srcurl",a.attr("href"));return a}function pure_domain(a){(a=a.match(/:\/\/([^/]+)/))&&(a=a[1].replace(/^www\./,""));return a}function parse_domain(a){var b=pure_domain(a);b||(a=a.match(/\/r\/([^/]+)/))&&(b="self."+a[1].toLowerCase());return b}
r.apps={init:function(){$(".authorized-app").delegate(".app-permissions li","mouseover mouseout",function(a){a.type=="mouseover"?$(this).find(".app-scope").show():$(this).find(".app-scope").hide()});$("#developed-apps").delegate(".edit-app-button","click",function(){$(this).toggleClass("collapsed").closest(".developed-app").removeClass("collapsed").find(".app-developers").remove().end().find(".edit-app").slideToggle().removeClass("collapsed").end()}).delegate(".edit-app-icon-button","click",function(){$(this).toggleClass("collapsed").closest(".developed-app").find(".ajax-upload-form").show()});
$("#create-app-button").click(function(){$(this).hide();$("#create-app").fadeIn()})},revoked:function(a){$(a).closest(".authorized-app").fadeOut()},deleted:function(a){$(a).closest(".developed-app").fadeOut()}};
r.gold={_googleCheckoutAnalyticsLoaded:!1,init:function(){$("div.content").on("click","a.give-gold, .gilded-comment-icon, .gold-payment .close-button",$.proxy(this,"_toggleCommentGoldForm"));$(".stripe-gold").click(function(){$("#stripe-payment").show()});$(".stripe-submit").on("click",this.makeStripeToken)},_toggleCommentGoldForm:function(a){var a=$(a.target),b=a.thing(),c=a.thing_id(),e="gold_form_"+c,h=$("#"+e);if(b.hasClass("user-gilded")||b.hasClass("deleted")||b.find(".author:first").text()==
r.config.logged)return!1;if(h.length)return h.toggle(),!1;if(!this._googleCheckoutAnalyticsLoaded)$.getScript("//checkout.google.com/files/digital/ga_post.js"),this._googleCheckoutAnalyticsLoaded=!0;var k=$(".gold-form.cloneable:first").clone(),b=a.thing().find(".entry .author:first").text();r.strings.gold_summary_comment_gift.replace("%(recipient)s",b);var g=k.find(".passthrough"),l=k.find('[name="cbbaseurl"]').val();k.removeClass("cloneable").attr("id",e).find("p:first-child em").text(b).end().find("button").attr("disabled",
"");g.val("");a.new_thing_child(k);k.show();var m=setTimeout(function(){k.addClass("working");k.find("button").addClass("disabled")},200);$.request("generate_payment_blob.json",{comment:c},function(a){clearTimeout(m);k.removeClass("working");g.val(a);k.find(".stripe-gold").on("click",function(){window.open("/gold/creditgild/"+a)});k.find(".coinbase-gold").on("click",function(){window.open(l+"?c="+a)});k.find("button").removeAttr("disabled").removeClass("disabled")});return!1},gildComment:function(a,
b,c){var e=$(".id-"+a);if(e.length){var a=e.children(".entry").find("p.tagline"),h=a.find(".gilded-comment-icon");c==null&&(c=h.data("count")||0,c++);e.addClass("gilded user-gilded");h.length||(h=$("<span>").addClass("gilded-comment-icon"),a.append(h));h.attr("title",b).data("count",c);c>1&&h.text("x"+c);e.children(".entry").find(".give-gold").parent().remove()}else console.log("couldn't gild comment "+a)},makeStripeToken:function(){var a=$("#stripe-payment"),b=a.find('[name="stripePublicKey"]').val(),
c=a.find(".stripe-submit"),e=a.find(".status"),h=a.find('[name="stripeToken"]'),k=a.find(".card-name").val(),g=a.find(".card-number").val(),l=a.find(".card-cvc").val(),m=a.find(".card-expiry-month").val(),w=a.find(".card-expiry-year").val(),x=a.find(".card-address_line1").val(),s=a.find(".card-address_line2").val(),n=a.find(".card-address_city").val(),q=a.find(".card-address_state").val(),u=a.find(".card-address_country").val(),y=a.find(".card-address_zip").val(),v=function(b,e){window.clearTimeout(p);
e.error?(c.removeClass("disabled"),b.html(e.error.message)):(h.val(e.id),post_form(a,"stripecharge/gold"))};Stripe.setPublishableKey(b);if(k)if(Stripe.validateCardNumber(g))if(Stripe.validateExpiry(m,w))if(Stripe.validateCVC(l))if(x)if(n)if(q)if(y){var p=setTimeout(function(){c.addClass("disabled")},200);Stripe.createToken({name:k,number:g,cvc:l,exp_month:m,exp_year:w,address_line1:x,address_line2:s,address_city:n,address_state:q,address_country:u,address_zip:y},v)}else e.text(r.strings.missing_credit_zip);
else e.text(r.strings.missing_credit_state);else e.text(r.strings.missing_credit_city);else e.text(r.strings.missing_credit_address);else e.text(r.strings.bad_credit_cvc);else e.text(r.strings.bad_credit_expiry);else e.text(r.strings.bad_credit_number);else e.text(r.strings.missing_credit_name);return!1}};(function(a){a.gild_comment=function(b,c){r.gold.gildComment(b,c);a("#gold_form_"+b).fadeOut(400)}})(jQuery);r.spotlight={};
r.spotlight.init=function(){var a=$(".organic-listing");if(a.length){$(".organic-listing .arrow.prev").on("click",$.proxy(this,"prev"));$(".organic-listing .arrow.next").on("click",$.proxy(this,"next"));_.each(this.link_by_camp,function(b,c){a.find(".id-"+b).length||this.createStub(b,c)},this);var b,c=r.analytics.breadcrumbs.lastClickFullname(),c=$(c?".id-"+c:null);c.length&&a.has(c).length?(r.debug("restoring spotlight selection to last click"),b=c):b=this.chooseRandom();this.lineup=_.chain(a.find(".thing")).reject(function(a){return b.is(a)}).shuffle().unshift(b).map(function(a){var b=
$(a).data("fullname");return b?".id-"+b:a}).value();this.lineup.pos=0;r.spotlight._advance(0)}};r.spotlight.setup=function(a,b,c){this.link_by_camp={};this.weights={};this.organics=[];for(var e in a){var h=a[e][0],k=a[e][2],g=a[e][3];a[e][1]?(this.link_by_camp[k]=h,this.weights[k]=g):this.organics.push(h)}this.interest_prob=b;this.promotion_prob=c};r.spotlight.createStub=function(a,b){$("<div>").addClass("thing stub").addClass("id-"+a).data("fullname",a).data("cid",b).prependTo(".organic-listing")};
r.spotlight.chooseRandom=function(){var a=$(".organic-listing");if(!_.isEmpty(this.weights)&&Math.random()<this.promotion_prob){var b=this.link_by_camp[this.weighted_lottery(this.weights)];return a.find(".id-"+b)}else return Math.random()<this.interest_prob?a.find(".interestbar"):a.find(".id-"+this.organics[Math.floor(Math.random()*this.organics.length)])};
r.spotlight._advance=function(a){var b=$(".organic-listing"),c=b.find(".thing:visible"),e=(this.lineup.pos+a+this.lineup.length)%this.lineup.length,a=b.find(this.lineup[e]);if(a.hasClass("stub")){var h=a.data("fullname"),a=a.data("cid");r.debug("fetching promo %s from campaign %s",h,a);a=$.getJSON("/api/fetch_promo",{link:h,campaign:a}).pipe(function(a){$.handleResponse("fetch_promo")(a);return b.find(".id-"+h)})}$.when(a).done(_.bind(function(a){a.find(".rank").width($("#siteTable .rank").width()).end();
c.hide();a.show();this.lineup.pos=e;this.help(a)},this))};r.spotlight.next=$.proxy(r.spotlight,"_advance",1);r.spotlight.prev=$.proxy(r.spotlight,"_advance",-1);r.spotlight.help=function(a){var b=$("#spotlight-help");b.length&&b.data("HelpBubble").hide(function(){b.find(".help-section").hide();a.hasClass("promoted")?b.find(".help-promoted").show():a.hasClass("interestbar")?b.find(".help-interestbar").show():b.find(".help-organic").show()})};
r.spotlight.weighted_lottery=function(a){var b=Math.random(),c=0,e;for(e in a)if(weight=a[e],c+=weight,c>b)return e;r.warn("weighted_lottery fell through!")};r.adzerk={origin:location.protocol=="https:"?"https://az.turbobytes.net":"http://static.adzerk.net",createAdFrame:function(a){a=="sponsorship"&&(a=$("<iframe>").attr({id:"ad_"+a,src:r.adzerk.origin+"/reddit/ads-load.html#sponsorship",frameBorder:0,scrolling:"no"}),$(".side .sponsorshipbox").empty().append(a))}};
$(window).on("message",function(a){a=a.originalEvent;a.origin==r.adzerk.origin&&(msg=a.data.split(":"),msg[0]=="ados.createAdFrame"&&r.adzerk.createAdFrame(msg[1]))});
$(function(){r.config.cursed&&($(".midcol .arrow").on("mouseover",function(a){var a=$(a.target),b=a.clone().css("position","absolute").css("margin",0).css(a.offset()).appendTo(a.parents(".content"));a.css("opacity",0);b.on("mouseover",function(){var a=Math.PI*2*Math.random();b.animate({"margin-left":"+="+20*Math.cos(a),"margin-top":"+="+20*Math.sin(a)},100)})}),$(".buttons a, form button, .pretty-form button").prop("onclick",null).on("click focus",function(a){$(a.currentTarget).blur().prop("tabindex",
"9999").css("white-space","nowrap").animate({"font-size":0,width:0,height:0,opacity:0},200);return!1}))});
r.strings = {"missing_credit_zip": "missing zip code", "missing_credit_name": "missing name", "missing_credit_city": "missing city", "missing_credit_state": "missing state or province", "rate_limit": "please wait a few seconds and try again.", "bad_credit_expiry": "invalid expiration date", "gold_summary_comment_gift": "Want to say thanks to *%(recipient)s* for this comment? Give them a month of [reddit gold](/gold/about).", "bad_credit_number": "invalid credit card number", "an_error_occurred_friendly": "an error occurred. please try again later!", "an_error_occurred": "an error occurred", "login_fallback_msg": "try using our secure login form.", "bad_credit_cvc": "invalid cvc", "missing_credit_address": "missing address", "permissions": {"none_msg": "no permissions", "all_msg": "full permissions", "info": {"moderator": {"wiki": {"description": "manage the wiki and access to the wiki", "title": "wiki"}, "access": {"description": "manage the lists of contributors and banned users", "title": "access"}, "mail": {"description": "read and reply to moderator mail", "title": "mail"}, "config": {"description": "edit settings, sidebar, css, and images", "title": "config"}, "posts": {"description": "use the approve, remove, spam, distinguish, and nsfw buttons", "title": "posts"}, "flair": {"description": "manage user flair, link flair, and flair templates", "title": "flair"}}, "moderator_invite": {"wiki": {"description": "manage the wiki and access to the wiki", "title": "wiki"}, "access": {"description": "manage the lists of contributors and banned users", "title": "access"}, "mail": {"description": "read and reply to moderator mail", "title": "mail"}, "config": {"description": "edit settings, sidebar, css, and images", "title": "config"}, "posts": {"description": "use the approve, remove, spam, distinguish, and nsfw buttons", "title": "posts"}, "flair": {"description": "manage user flair, link flair, and flair templates", "title": "flair"}}}}}
