window.localStorage===undefined&&(window.browserStorage={getItem:function(e){return!e||!this.hasOwnProperty(e)?null:unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1"))},key:function(e){return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/,"").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[e])},setItem:function(e,t){if(!e)return;document.cookie=escape(e)+"="+escape(t)+"; path=/",this.length=document.cookie.match(/\=/g).length},length:0,removeItem:function(e){if(!e||!this.hasOwnProperty(e))return;var t=new Date;t.setDate(t.getDate()-1),document.cookie=escape(e)+"=; expires="+t.toGMTString()+"; path=/",this.length--},hasOwnProperty:function(e){return(new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)}},window.browserStorage.length=(document.cookie.match(/\=/g)||window.browserStorage).length),WxMap.Storage=new function(){var e=this,t="WxMap.Storage",n=window.localStorage||window.browserStorage,r="__savedMaps";this.SavedMaps=[],this.GetType=function(){return t},this.Save=function(e,t){var r=JSON.stringify(t);return n.setItem(e,r)},this.Retrieve=function(e){var t=n.getItem(e);if(t===null)return null;var r=JSON.parse(t);return r},this.Delete=function(e){return n.removeItem(e)},this.SaveMap=function(t,n){n.Id=t,e.SavedMaps.push(n),e.Save(r,e.SavedMaps)},this.RetrieveMap=function(t,n){var r=e.SavedMaps,i=!1;if(r===null)return null;for(var s=0,o=r.length;s<o;s++)r[s].Id===t&&(i=s);return i===!1?null:n?[r[i],i]:r[i]},this.RetrieveMaps=function(){var t=[];for(var n=0,r=e.SavedMaps.length;n<r;n++){var i=e.SavedMaps[n];/^\__[a-zA-Z]/.test(i.Id)||t.push(i)}return t},this.DeleteMap=function(t){var n=e.RetrieveMap(t,!0)[1];e.SavedMaps.splice(n,1),e.Save(r,e.SavedMaps)},this.MoveMap=function(t,n){var r=e.SavedMaps,i=n,s=e.RetrieveMap(t,!0)[1];while(s<0)s+=r.length;while(i<0)i+=r.length;if(i>=r.length)throw{name:"IndexOutOfBoundsException",message:"Index: "+n+" is beyond the bounds of the Saved Maps array"};r.splice(i,0,r.splice(s,1)[0])},this.MoveMapUp=function(t){var n=e.RetrieveMap(t,!0)[1];e.MoveMap(t,n++)},this.MoveMapDown=function(t){var n=e.RetrieveMap(id,!0)[1];e.MoveMap(t,n--)},this.MapState=function(e){var t=this,n="WxMap.Storage.MapState";this.Id=e,this.Layers={},this.LayerOrder=null,this.Animation=null,this.Location=!1,this.Scale=!1,this.GetType=function(){return n}},this.AnimationState=function(){var e=this,t="WxMap.Storage.AnimationState";this.PeriodPerFrame=null,this.TotalFrames=null,this.CurrentFrame=null,this.PlayRate=null,this.IsSliding=null,this.Dwell=null,this.EnableLooping=null,this.GetType=function(){return t}};var i=e.Retrieve(r);i&&(e.SavedMaps=i)}