// wxmap.core.min.js
this.JSON || (JSON = function () { function f(e) { return e < 10 ? "0" + e : e } function stringify(e, t) { var n, r, i, s, o = /["\\\x00-\x1f\x7f-\x9f]/g, u; switch (typeof e) { case "string": return o.test(e) ? '"' + e.replace(o, function (e) { var t = m[e]; return t ? t : (t = e.charCodeAt(), "\\u00" + Math.floor(t / 16).toString(16) + (t % 16).toString(16)) }) + '"' : '"' + e + '"'; case "number": return isFinite(e) ? String(e) : "null"; case "boolean": case "null": return String(e); case "object": if (!e) return "null"; if (typeof e.toJSON == "function") return stringify(e.toJSON()); n = []; if (typeof e.length == "number" && !e.propertyIsEnumerable("length")) { s = e.length; for (r = 0; r < s; r += 1) n.push(stringify(e[r], t) || "null"); return "[" + n.join(",") + "]" } if (t) { s = t.length; for (r = 0; r < s; r += 1) i = t[r], typeof i == "string" && (u = stringify(e[i], t), u && n.push(stringify(i) + ":" + u)) } else for (i in e) typeof i == "string" && (u = stringify(e[i], t), u && n.push(stringify(i) + ":" + u)); return "{" + n.join(",") + "}" } } Date.prototype.toJSON = function () { return this.getUTCFullYear() + "-" + f(this.getUTCMonth() + 1) + "-" + f(this.getUTCDate()) + "T" + f(this.getUTCHours()) + ":" + f(this.getUTCMinutes()) + ":" + f(this.getUTCSeconds()) + "Z" }; var m = { "\b": "\\b", "	": "\\t", "\n": "\\n", "\f": "\\f", "\r": "\\r", '"': '\\"', "\\": "\\\\" }; return { stringify: stringify, parse: function (text, filter) { function walk(e, t) { var n, r; if (t && typeof t == "object") for (n in t) Object.prototype.hasOwnProperty.apply(t, [n]) && (r = walk(n, t[n]), r !== undefined && (t[n] = r)); return filter(e, t) } var j; if (/^[\],:{}\s]*$/.test(text.replace(/\\./g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) return j = eval("(" + text + ")"), typeof filter == "function" ? walk("", j) : j; throw new SyntaxError("parseJSON") } } } ()), document.createElement("canvas").getContext || function () { function c() { return this.context_ || (this.context_ = new q(this)) } function d(e, t, n) { var r = p.call(arguments, 2); return function () { return e.apply(t, r.concat(p.call(arguments))) } } function v(e) { return String(e).replace(/&/g, "&amp;").replace(/"/g, "&quot;") } function m(e) { document.namespaces.g_vml_ || document.namespaces.add("g_vml_", "urn:schemas-microsoft-com:vml", "#default#VML"), document.namespaces.g_o_ || document.namespaces.add("g_o_", "urn:schemas-microsoft-com:office:office", "#default#VML") } function g(t) { try { e && (t.namespaces.g_vml_ || t.namespaces.add("g_vml_", "urn:schemas-microsoft-com:vml", "#default#VML"), t.namespaces.g_o_ || t.namespaces.add("g_o_", "urn:schemas-microsoft-com:office:office", "#default#VML")) } catch (n) { e = !1, window.attachEvent("onload", m) } if (!t.styleSheets.ex_canvas_) { var r = t.createStyleSheet(); r.owningElement.id = "ex_canvas_", r.cssText = "canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}" } } function b(e) { var t = e.srcElement; switch (e.propertyName) { case "width": t.getContext().clearRect(), t.style.width = t.attributes.width.nodeValue + "px", t.firstChild.style.width = t.clientWidth + "px"; break; case "height": t.getContext().clearRect(), t.style.height = t.attributes.height.nodeValue + "px", t.firstChild.style.height = t.clientHeight + "px" } } function w(e) { var t = e.srcElement; t.firstChild && (t.firstChild.style.width = t.clientWidth + "px", t.firstChild.style.height = t.clientHeight + "px") } function T() { return [[1, 0, 0], [0, 1, 0], [0, 0, 1]] } function N(e, t) { var n = T(); for (var r = 0; r < 3; r++) for (var i = 0; i < 3; i++) { var s = 0; for (var o = 0; o < 3; o++) s += e[r][o] * t[o][i]; n[r][i] = s } return n } function C(e, t) { t.fillStyle = e.fillStyle, t.lineCap = e.lineCap, t.lineJoin = e.lineJoin, t.lineWidth = e.lineWidth, t.miterLimit = e.miterLimit, t.shadowBlur = e.shadowBlur, t.shadowColor = e.shadowColor, t.shadowOffsetX = e.shadowOffsetX, t.shadowOffsetY = e.shadowOffsetY, t.strokeStyle = e.strokeStyle, t.globalAlpha = e.globalAlpha, t.font = e.font, t.textAlign = e.textAlign, t.textBaseline = e.textBaseline, t.arcScaleX_ = e.arcScaleX_, t.arcScaleY_ = e.arcScaleY_, t.lineScale_ = e.lineScale_, t.rotation_ = e.rotation_ } function L(e) { var t = e.indexOf("(", 3), n = e.indexOf(")", t + 1), r = e.substring(t + 1, n).split(","); return r.length == 4 && e.substr(3, 1) == "a" ? alpha = Number(r[3]) : r[3] = 1, r } function A(e) { return parseFloat(e) / 100 } function O(e, t, n) { return Math.min(n, Math.max(t, e)) } function M(e) { var t, n, r; h = parseFloat(e[0]) / 360 % 360, h < 0 && h++, s = O(A(e[1]), 0, 1), l = O(A(e[2]), 0, 1); if (s == 0) t = n = r = l; else { var i = l < .5 ? l * (1 + s) : l + s - l * s, o = 2 * l - i; t = _(o, i, h + 1 / 3), n = _(o, i, h), r = _(o, i, h - 1 / 3) } return "#" + E[Math.floor(t * 255)] + E[Math.floor(n * 255)] + E[Math.floor(r * 255)] } function _(e, t, n) { return n < 0 && n++, n > 1 && n--, 6 * n < 1 ? e + (t - e) * 6 * n : 2 * n < 1 ? t : 3 * n < 2 ? e + (t - e) * (2 / 3 - n) * 6 : e } function D(e) { var t, n = 1; e = String(e); if (e.charAt(0) == "#") t = e; else if (/^rgb/.test(e)) { var r = L(e), t = "#", i; for (var s = 0; s < 3; s++) r[s].indexOf("%") != -1 ? i = Math.floor(A(r[s]) * 255) : i = Number(r[s]), t += E[O(i, 0, 255)]; n = r[3] } else if (/^hsl/.test(e)) { var r = L(e); t = M(r), n = r[3] } else t = k[e] || e; return { color: t, alpha: n} } function B(e) { if (H[e]) return H[e]; var t = document.createElement("div"), n = t.style; try { n.font = e } catch (r) { } return H[e] = { style: n.fontStyle || P.style, variant: n.fontVariant || P.variant, weight: n.fontWeight || P.weight, size: n.fontSize || P.size, family: n.fontFamily || P.family} } function j(e, t) { var n = {}; for (var r in e) n[r] = e[r]; var i = parseFloat(t.currentStyle.fontSize), s = parseFloat(e.size); return typeof e.size == "number" ? n.size = e.size : e.size.indexOf("px") != -1 ? n.size = s : e.size.indexOf("em") != -1 ? n.size = i * s : e.size.indexOf("%") != -1 ? n.size = i / 100 * s : e.size.indexOf("pt") != -1 ? n.size = i * (4 / 3) * s : n.size = i, n.size *= .981, n } function F(e) { return e.style + " " + e.variant + " " + e.weight + " " + e.size + "px " + e.family } function I(e) { switch (e) { case "butt": return "flat"; case "round": return "round"; case "square": default: return "square" } } function q(e) { this.m_ = T(), this.mStack_ = [], this.aStack_ = [], this.currentPath_ = [], this.strokeStyle = "#000", this.fillStyle = "#000", this.lineWidth = 1, this.lineJoin = "miter", this.lineCap = "butt", this.miterLimit = a * 1, this.globalAlpha = 1, this.font = "10px sans-serif", this.textAlign = "left", this.textBaseline = "alphabetic", this.canvas = e; var t = e.ownerDocument.createElement("div"); t.style.width = e.clientWidth + "px", t.style.height = e.clientHeight + "px", t.style.overflow = "hidden", t.style.position = "absolute", e.appendChild(t), this.element_ = t, this.arcScaleX_ = 1, this.arcScaleY_ = 1, this.lineScale_ = 1, this.rotation_ = 0 } function U(e, t, n, r) { e.currentPath_.push({ type: "bezierCurveTo", cp1x: t.x, cp1y: t.y, cp2x: n.x, cp2y: n.y, x: r.x, y: r.y }), e.currentX_ = r.x, e.currentY_ = r.y } function z(e, t) { var n = D(e.strokeStyle), r = n.color, i = n.alpha * e.globalAlpha, s = e.lineScale_ * e.lineWidth; s < 1 && (i *= s), t.push("<g_vml_:stroke", ' opacity="', i, '"', ' joinstyle="', e.lineJoin, '"', ' miterlimit="', e.miterLimit, '"', ' endcap="', I(e.lineCap), '"', ' weight="', s, 'px"', ' color="', r, '" />') } function W(e, n, r, i) { var s = e.fillStyle, o = e.arcScaleX_, u = e.arcScaleY_, f = i.x - r.x, l = i.y - r.y; if (s instanceof $) { var c = 0, h = { x: 0, y: 0 }, p = 0, d = 1; if (s.type_ == "gradient") { var v = s.x0_ / o, m = s.y0_ / u, g = s.x1_ / o, y = s.y1_ / u, b = e.getCoords_(v, m), w = e.getCoords_(g, y), E = w.x - b.x, S = w.y - b.y; c = Math.atan2(E, S) * 180 / Math.PI, c < 0 && (c += 360), c < 1e-6 && (c = 0) } else { var b = e.getCoords_(s.x0_, s.y0_); h = { x: (b.x - r.x) / f, y: (b.y - r.y) / l }, f /= o * a, l /= u * a; var x = t.max(f, l); p = 2 * s.r0_ / x, d = 2 * s.r1_ / x - p } var T = s.colors_; T.sort(function (e, t) { return e.offset - t.offset }); var N = T.length, C = T[0].color, k = T[N - 1].color, L = T[0].alpha * e.globalAlpha, A = T[N - 1].alpha * e.globalAlpha, O = []; for (var M = 0; M < N; M++) { var _ = T[M]; O.push(_.offset * d + p + " " + _.color) } n.push('<g_vml_:fill type="', s.type_, '"', ' method="none" focus="100%"', ' color="', C, '"', ' color2="', k, '"', ' colors="', O.join(","), '"', ' opacity="', A, '"', ' g_o_:opacity2="', L, '"', ' angle="', c, '"', ' focusposition="', h.x, ",", h.y, '" />') } else if (s instanceof J) { if (f && l) { var P = -r.x, H = -r.y; n.push("<g_vml_:fill", ' position="', P / f * o * o, ",", H / l * u * u, '"', ' type="tile"', ' src="', s.src_, '" />') } } else { var B = D(e.fillStyle), j = B.color, F = B.alpha * e.globalAlpha; n.push('<g_vml_:fill color="', j, '" opacity="', F, '" />') } } function X(e) { return isFinite(e[0][0]) && isFinite(e[0][1]) && isFinite(e[1][0]) && isFinite(e[1][1]) && isFinite(e[2][0]) && isFinite(e[2][1]) } function V(e, t, n) { if (!X(t)) return; e.m_ = t; if (n) { var r = t[0][0] * t[1][1] - t[0][1] * t[1][0]; e.lineScale_ = u(o(r)) } } function $(e) { this.type_ = e, this.x0_ = 0, this.y0_ = 0, this.r0_ = 0, this.x1_ = 0, this.y1_ = 0, this.r1_ = 0, this.colors_ = [] } function J(e, t) { Q(e); switch (t) { case "repeat": case null: case "": this.repetition_ = "repeat"; break; case "repeat-x": case "repeat-y": case "no-repeat": this.repetition_ = t; break; default: K("SYNTAX_ERR") } this.src_ = e.src, this.width_ = e.width, this.height_ = e.height } function K(e) { throw new G(e) } function Q(e) { (!e || e.nodeType != 1 || e.tagName != "IMG") && K("TYPE_MISMATCH_ERR"), e.readyState != "complete" && K("INVALID_STATE_ERR") } function G(e) { this.code = this[e], this.message = e + ": DOM Exception " + this.code } var e = !0, t = Math, n = t.round, r = t.sin, i = t.cos, o = t.abs, u = t.sqrt, a = 10, f = a / 2, p = Array.prototype.slice; g(document); var y = { init: function (e) { if (/MSIE/.test(navigator.userAgent) && !window.opera) { var t = e || document; t.createElement("canvas"), t.attachEvent("onreadystatechange", d(this.init_, this, t)) } }, init_: function (e) { var t = e.getElementsByTagName("canvas"); for (var n = 0; n < t.length; n++) this.initElement(t[n]) }, initElement: function (e) { if (!e.getContext) { e.getContext = c, g(e.ownerDocument), e.innerHTML = "", e.attachEvent("onpropertychange", b), e.attachEvent("onresize", w); var t = e.attributes; t.width && t.width.specified ? e.style.width = t.width.nodeValue + "px" : e.width = e.clientWidth, t.height && t.height.specified ? e.style.height = t.height.nodeValue + "px" : e.height = e.clientHeight } return e } }; y.init(); var E = []; for (var S = 0; S < 16; S++) for (var x = 0; x < 16; x++) E[S * 16 + x] = S.toString(16) + x.toString(16); var k = { aliceblue: "#F0F8FF", antiquewhite: "#FAEBD7", aquamarine: "#7FFFD4", azure: "#F0FFFF", beige: "#F5F5DC", bisque: "#FFE4C4", black: "#000000", blanchedalmond: "#FFEBCD", blueviolet: "#8A2BE2", brown: "#A52A2A", burlywood: "#DEB887", cadetblue: "#5F9EA0", chartreuse: "#7FFF00", chocolate: "#D2691E", coral: "#FF7F50", cornflowerblue: "#6495ED", cornsilk: "#FFF8DC", crimson: "#DC143C", cyan: "#00FFFF", darkblue: "#00008B", darkcyan: "#008B8B", darkgoldenrod: "#B8860B", darkgray: "#A9A9A9", darkgreen: "#006400", darkgrey: "#A9A9A9", darkkhaki: "#BDB76B", darkmagenta: "#8B008B", darkolivegreen: "#556B2F", darkorange: "#FF8C00", darkorchid: "#9932CC", darkred: "#8B0000", darksalmon: "#E9967A", darkseagreen: "#8FBC8F", darkslateblue: "#483D8B", darkslategray: "#2F4F4F", darkslategrey: "#2F4F4F", darkturquoise: "#00CED1", darkviolet: "#9400D3", deeppink: "#FF1493", deepskyblue: "#00BFFF", dimgray: "#696969", dimgrey: "#696969", dodgerblue: "#1E90FF", firebrick: "#B22222", floralwhite: "#FFFAF0", forestgreen: "#228B22", gainsboro: "#DCDCDC", ghostwhite: "#F8F8FF", gold: "#FFD700", goldenrod: "#DAA520", grey: "#808080", greenyellow: "#ADFF2F", honeydew: "#F0FFF0", hotpink: "#FF69B4", indianred: "#CD5C5C", indigo: "#4B0082", ivory: "#FFFFF0", khaki: "#F0E68C", lavender: "#E6E6FA", lavenderblush: "#FFF0F5", lawngreen: "#7CFC00", lemonchiffon: "#FFFACD", lightblue: "#ADD8E6", lightcoral: "#F08080", lightcyan: "#E0FFFF", lightgoldenrodyellow: "#FAFAD2", lightgreen: "#90EE90", lightgrey: "#D3D3D3", lightpink: "#FFB6C1", lightsalmon: "#FFA07A", lightseagreen: "#20B2AA", lightskyblue: "#87CEFA", lightslategray: "#778899", lightslategrey: "#778899", lightsteelblue: "#B0C4DE", lightyellow: "#FFFFE0", limegreen: "#32CD32", linen: "#FAF0E6", magenta: "#FF00FF", mediumaquamarine: "#66CDAA", mediumblue: "#0000CD", mediumorchid: "#BA55D3", mediumpurple: "#9370DB", mediumseagreen: "#3CB371", mediumslateblue: "#7B68EE", mediumspringgreen: "#00FA9A", mediumturquoise: "#48D1CC", mediumvioletred: "#C71585", midnightblue: "#191970", mintcream: "#F5FFFA", mistyrose: "#FFE4E1", moccasin: "#FFE4B5", navajowhite: "#FFDEAD", oldlace: "#FDF5E6", olivedrab: "#6B8E23", orange: "#FFA500", orangered: "#FF4500", orchid: "#DA70D6", palegoldenrod: "#EEE8AA", palegreen: "#98FB98", paleturquoise: "#AFEEEE", palevioletred: "#DB7093", papayawhip: "#FFEFD5", peachpuff: "#FFDAB9", peru: "#CD853F", pink: "#FFC0CB", plum: "#DDA0DD", powderblue: "#B0E0E6", rosybrown: "#BC8F8F", royalblue: "#4169E1", saddlebrown: "#8B4513", salmon: "#FA8072", sandybrown: "#F4A460", seagreen: "#2E8B57", seashell: "#FFF5EE", sienna: "#A0522D", skyblue: "#87CEEB", slateblue: "#6A5ACD", slategray: "#708090", slategrey: "#708090", snow: "#FFFAFA", springgreen: "#00FF7F", steelblue: "#4682B4", tan: "#D2B48C", thistle: "#D8BFD8", tomato: "#FF6347", turquoise: "#40E0D0", violet: "#EE82EE", wheat: "#F5DEB3", whitesmoke: "#F5F5F5", yellowgreen: "#9ACD32" }, P = { style: "normal", variant: "normal", weight: "normal", size: 10, family: "sans-serif" }, H = {}, R = q.prototype; R.clearRect = function () { this.textMeasureEl_ && (this.textMeasureEl_.removeNode(!0), this.textMeasureEl_ = null), this.element_.innerHTML = "" }, R.beginPath = function () { this.currentPath_ = [] }, R.moveTo = function (e, t) { var n = this.getCoords_(e, t); this.currentPath_.push({ type: "moveTo", x: n.x, y: n.y }), this.currentX_ = n.x, this.currentY_ = n.y }, R.lineTo = function (e, t) { var n = this.getCoords_(e, t); this.currentPath_.push({ type: "lineTo", x: n.x, y: n.y }), this.currentX_ = n.x, this.currentY_ = n.y }, R.bezierCurveTo = function (e, t, n, r, i, s) { var o = this.getCoords_(i, s), u = this.getCoords_(e, t), a = this.getCoords_(n, r); U(this, u, a, o) }, R.quadraticCurveTo = function (e, t, n, r) { var i = this.getCoords_(e, t), s = this.getCoords_(n, r), o = { x: this.currentX_ + 2 / 3 * (i.x - this.currentX_), y: this.currentY_ + 2 / 3 * (i.y - this.currentY_) }, u = { x: o.x + (s.x - this.currentX_) / 3, y: o.y + (s.y - this.currentY_) / 3 }; U(this, o, u, s) }, R.arc = function (e, t, n, s, o, u) { n *= a; var l = u ? "at" : "wa", c = e + i(s) * n - f, h = t + r(s) * n - f, p = e + i(o) * n - f, d = t + r(o) * n - f; c == p && !u && (c += .125); var v = this.getCoords_(e, t), m = this.getCoords_(c, h), g = this.getCoords_(p, d); this.currentPath_.push({ type: l, x: v.x, y: v.y, radius: n, xStart: m.x, yStart: m.y, xEnd: g.x, yEnd: g.y }) }, R.rect = function (e, t, n, r) { this.moveTo(e, t), this.lineTo(e + n, t), this.lineTo(e + n, t + r), this.lineTo(e, t + r), this.closePath() }, R.strokeRect = function (e, t, n, r) { var i = this.currentPath_; this.beginPath(), this.moveTo(e, t), this.lineTo(e + n, t), this.lineTo(e + n, t + r), this.lineTo(e, t + r), this.closePath(), this.stroke(), this.currentPath_ = i }, R.fillRect = function (e, t, n, r) { var i = this.currentPath_; this.beginPath(), this.moveTo(e, t), this.lineTo(e + n, t), this.lineTo(e + n, t + r), this.lineTo(e, t + r), this.closePath(), this.fill(), this.currentPath_ = i }, R.createLinearGradient = function (e, t, n, r) { var i = new $("gradient"); return i.x0_ = e, i.y0_ = t, i.x1_ = n, i.y1_ = r, i }, R.createRadialGradient = function (e, t, n, r, i, s) { var o = new $("gradientradial"); return o.x0_ = e, o.y0_ = t, o.r0_ = n, o.x1_ = r, o.y1_ = i, o.r1_ = s, o }, R.drawImage = function (e) { var s, o, u, f, l, c, h, p, d = e.runtimeStyle.width; if (d) { var v = e.runtimeStyle.width, m = e.runtimeStyle.height; e.runtimeStyle.width = "auto", e.runtimeStyle.height = "auto" } var g = e.width, y = e.height; d && (e.runtimeStyle.width = v, e.runtimeStyle.height = m); if (arguments.length == 3) s = arguments[1], o = arguments[2], l = c = 0, h = u = g, p = f = y; else if (arguments.length == 5) s = arguments[1], o = arguments[2], u = arguments[3], f = arguments[4], l = c = 0, h = g, p = y; else { if (arguments.length != 9) throw Error("Invalid number of arguments"); l = arguments[1], c = arguments[2], h = arguments[3], p = arguments[4], s = arguments[5], o = arguments[6], u = arguments[7], f = arguments[8] } var b = this.getCoords_(s, o), w = h / 2, E = p / 2, S = [], x = 10, T = 10, C = scaleY = 1; S.push(' <div style="position:absolute;'); if (this.m_[0][0] != 1 || this.m_[0][1] || this.m_[1][1] != 1 || this.m_[1][0]) { var k = [], L = i(this.rotation_), A = r(this.rotation_), O = [[L, -A, 0], [A, L, 0], [0, 0, 1]], M = N(O, this.m_); C = M[0][0], scaleY = M[1][1], k.push("M11=", L, ",", "M12=", -A, ",", "M21=", A, ",", "M22=", L, ",", "Dx=", b.x / a, ",", "Dy=", b.y / a); var _ = b, D = this.getCoords_(s + u, o), P = this.getCoords_(s, o + f), H = this.getCoords_(s + u, o + f); _.x = t.max(_.x, D.x, P.x, H.x), _.y = t.max(_.y, D.y, P.y, H.y), S.push("padding:0 ", n(_.x / a), "px ", n(_.y / a), "px 0;filter:progid:DXImageTransform.Microsoft.Matrix(", k.join(""), ", sizingmethod='clip');") } else S.push("top:", n(b.y / a), "px;left:", n(b.x / a), "px;"); S.push(' ">'), (l || c) && S.push('<div style="overflow: hidden; width:', Math.ceil((u + l * u / h) * C), "px;", " height:", Math.ceil((f + c * f / p) * scaleY), "px;", " filter:progid:DxImageTransform.Microsoft.Matrix(Dx=", -l * u / h * C, ",Dy=", -c * f / p * scaleY, ');">'), S.push('<div style="width:', Math.round(C * g * u / h), "px;", " height:", Math.round(scaleY * y * f / p), "px;", " filter:"), this.globalAlpha < 1 && S.push(" progid:DXImageTransform.Microsoft.Alpha(opacity=" + this.globalAlpha * 100 + ")"), S.push(" progid:DXImageTransform.Microsoft.AlphaImageLoader(src=", e.src, ',sizingMethod=scale)">'), (l || c) && S.push("</div>"), S.push("</div></div>"), this.element_.insertAdjacentHTML("beforeEnd", S.join("")) }, R.stroke = function (e) { var t = [], r = !1, i = 10, s = 10; t.push("<g_vml_:shape", ' filled="', !!e, '"', ' style="position:absolute;width:', i, "px;height:", s, 'px;"', ' coordorigin="0,0"', ' coordsize="', a * i, ",", a * s, '"', ' stroked="', !e, '"', ' path="'); var o = !1, u = { x: null, y: null }, f = { x: null, y: null }; for (var l = 0; l < this.currentPath_.length; l++) { var c = this.currentPath_[l], h; switch (c.type) { case "moveTo": h = c, t.push(" m ", n(c.x), ",", n(c.y)); break; case "lineTo": t.push(" l ", n(c.x), ",", n(c.y)); break; case "close": t.push(" x "), c = null; break; case "bezierCurveTo": t.push(" c ", n(c.cp1x), ",", n(c.cp1y), ",", n(c.cp2x), ",", n(c.cp2y), ",", n(c.x), ",", n(c.y)); break; case "at": case "wa": t.push(" ", c.type, " ", n(c.x - this.arcScaleX_ * c.radius), ",", n(c.y - this.arcScaleY_ * c.radius), " ", n(c.x + this.arcScaleX_ * c.radius), ",", n(c.y + this.arcScaleY_ * c.radius), " ", n(c.xStart), ",", n(c.yStart), " ", n(c.xEnd), ",", n(c.yEnd)) } if (c) { if (u.x == null || c.x < u.x) u.x = c.x; if (f.x == null || c.x > f.x) f.x = c.x; if (u.y == null || c.y < u.y) u.y = c.y; if (f.y == null || c.y > f.y) f.y = c.y } } t.push(' ">'), e ? W(this, t, u, f) : z(this, t), t.push("</g_vml_:shape>"), this.element_.insertAdjacentHTML("beforeEnd", t.join("")) }, R.fill = function () { this.stroke(!0) }, R.closePath = function () { this.currentPath_.push({ type: "close" }) }, R.getCoords_ = function (e, t) { var n = this.m_; return { x: a * (e * n[0][0] + t * n[1][0] + n[2][0]) - f, y: a * (e * n[0][1] + t * n[1][1] + n[2][1]) - f} }, R.save = function () { var e = {}; C(this, e), this.aStack_.push(e), this.mStack_.push(this.m_), this.m_ = N(T(), this.m_) }, R.restore = function () { this.aStack_.length && (C(this.aStack_.pop(), this), this.m_ = this.mStack_.pop()) }, R.translate = function (e, t) { var n = [[1, 0, 0], [0, 1, 0], [e, t, 1]]; V(this, N(n, this.m_), !1) }, R.rotate = function (e) { var t = i(e), n = r(e); this.rotation_ += e; var s = [[t, n, 0], [-n, t, 0], [0, 0, 1]]; V(this, N(s, this.m_), !1) }, R.scale = function (e, t) { this.arcScaleX_ *= e, this.arcScaleY_ *= t; var n = [[e, 0, 0], [0, t, 0], [0, 0, 1]]; V(this, N(n, this.m_), !0) }, R.transform = function (e, t, n, r, i, s) { var o = [[e, t, 0], [n, r, 0], [i, s, 1]]; V(this, N(o, this.m_), !0) }, R.setTransform = function (e, t, n, r, i, s) { var o = [[e, t, 0], [n, r, 0], [i, s, 1]]; V(this, o, !0) }, R.drawText_ = function (e, t, r, i, s) { var o = this.m_, u = 1e3, f = 0, l = u, c = { x: 0, y: 0 }, h = [], p = j(B(this.font), this.element_), d = F(p), m = this.element_.currentStyle, g = this.textAlign.toLowerCase(); switch (g) { case "left": case "center": case "right": break; case "end": g = m.direction == "ltr" ? "right" : "left"; break; case "start": g = m.direction == "rtl" ? "right" : "left"; break; default: g = "left" } switch (this.textBaseline) { case "hanging": case "top": c.y = p.size / 1.75; break; case "middle": break; default: case null: case "alphabetic": case "ideographic": case "bottom": c.y = -p.size / 2.25 } switch (g) { case "right": f = u, l = .05; break; case "center": f = l = u / 2 } var y = this.getCoords_(t + c.x, r + c.y); h.push('<g_vml_:line from="', -f, ' 0" to="', l, ' 0.05" ', ' coordsize="100 100" coordorigin="0 0"', ' filled="', !s, '" stroked="', !!s, '" style="position:absolute;width:1px;height:1px;">'), s ? z(this, h) : W(this, h, { x: -f, y: 0 }, { x: l, y: p.size }); var b = o[0][0].toFixed(3) + "," + o[1][0].toFixed(3) + "," + o[0][1].toFixed(3) + "," + o[1][1].toFixed(3) + ",0,0", w = n(y.x / a) + "," + n(y.y / a); h.push('<g_vml_:skew on="t" matrix="', b, '" ', ' offset="', w, '" origin="', f, ' 0" />', '<g_vml_:path textpathok="true" />', '<g_vml_:textpath on="true" string="', v(e), '" style="v-text-align:', g, ";font:", v(d), '" /></g_vml_:line>'), this.element_.insertAdjacentHTML("beforeEnd", h.join("")) }, R.fillText = function (e, t, n, r) { this.drawText_(e, t, n, r, !1) }, R.strokeText = function (e, t, n, r) { this.drawText_(e, t, n, r, !0) }, R.measureText = function (e) { if (!this.textMeasureEl_) { var t = '<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'; this.element_.insertAdjacentHTML("beforeEnd", t), this.textMeasureEl_ = this.element_.lastChild } var n = this.element_.ownerDocument; this.textMeasureEl_.innerHTML = ""; var r = j(B(this.font), this.element_), i = F(r); return this.textMeasureEl_.style.font = i, this.textMeasureEl_.appendChild(n.createTextNode(e)), { width: this.textMeasureEl_.offsetWidth} }, R.clip = function () { }, R.arcTo = function () { }, R.createPattern = function (e, t) { return new J(e, t) }, $.prototype.addColorStop = function (e, t) { t = D(t), this.colors_.push({ offset: e, color: t.color, alpha: t.alpha }) }; var Y = G.prototype = new Error; Y.INDEX_SIZE_ERR = 1, Y.DOMSTRING_SIZE_ERR = 2, Y.HIERARCHY_REQUEST_ERR = 3, Y.WRONG_DOCUMENT_ERR = 4, Y.INVALID_CHARACTER_ERR = 5, Y.NO_DATA_ALLOWED_ERR = 6, Y.NO_MODIFICATION_ALLOWED_ERR = 7, Y.NOT_FOUND_ERR = 8, Y.NOT_SUPPORTED_ERR = 9, Y.INUSE_ATTRIBUTE_ERR = 10, Y.INVALID_STATE_ERR = 11, Y.SYNTAX_ERR = 12, Y.INVALID_MODIFICATION_ERR = 13, Y.NAMESPACE_ERR = 14, Y.INVALID_ACCESS_ERR = 15, Y.VALIDATION_ERR = 16, Y.TYPE_MISMATCH_ERR = 17, G_vmlCanvasManager = y, CanvasRenderingContext2D = q, CanvasGradient = $, CanvasPattern = J, DOMException = G } (); var msf = {}; (function () { function e(e) { return (e < 10 ? "0" : "") + e } function t(e) { e = e.toLowerCase(); var t = { name: "en-GB", d: "dd/MM/yyyy", D: "dd MMMM yyyy", t: "HH:mm", T: "HH:mm:ss", M: "d MMMM", Y: "MMMM yyyy", s: "yyyy-MM-ddTHH:mm:ss", _m: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], _d: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], _r: ".", _t: ",", _c: "\u00a3#,0.00", _ct: ",", _cr: "." }; return e.substr(0, 2) == "sv" ? (t.name = "sv-SE", t.d = "yyyy-MM-dd", t.D = "den dd MMMM yyyy", t._m = ["januari", "februari", "mars", "april", "maj", "juni", "juli", "augusti", "september", "oktober", "november", "december"], t._d = ["s\u00f6ndag", "m\u00e5ndag", "tisdag", "onsdag", "torsdag", "fredag", "l\u00f6rdag"], t._r = ",", t._t = " ", t._ct = ".", t._cr = ",", t._c = "#,0.00 kr") : e != "en-gb" && (t.name = "en-US", t.t = "hh:mm tt", t.T = "hh:mm:ss tt", t.d = "MM/dd/yyyy", t.D = "MMMM dd, yyyy", t.Y = "MMMM, yyyy", t._c = "$#,0.00"), t.f = t.D + " " + t.t, t.F = t.D + " " + t.T, t.g = t.d + " " + t.t, t.G = t.d + " " + t.T, t } function n(e, t) { function p(e) { for (var n = 0; n < e.length; n++) l.push(e.charAt(n)), s > 1 && s-- % 3 == 1 && l.push(t.t) } var n = 0, r = -1, i = -1, s = 0, o = 0, u = -1, a = !1, f = !0, l = [], c, h; for (h = 0; h < t.f.length; h++) c = t.f.charAt(h), o += a, c == "0" && (a ? u = o : r < 0 && (r = n)), n += !a && (c == "0" || c == "#"), a = a || c == "."; r = r < 0 ? 1 : n - r, e < 0 && l.push("-"), e = (Math.round(Math.abs(e) * Math.pow(10, o)) / Math.pow(10, o)).toString(), i = e.indexOf("."), i = i < 0 ? e.length : i, h = i - n, t.f.match(/^[^\.]*[0#],[0#]/) && (s = Math.max(i, r)); for (var d = 0; d < t.f.length; d++) c = t.f.charAt(d), c == "#" || c == "0" ? (h < i ? (h >= 0 ? (f && p(e.substr(0, h)), p(e.charAt(h))) : h >= i - r && p("0"), f = !1) : (u-- > 0 || h < e.length) && p(h >= e.length ? "0" : e.charAt(h)), h++) : c == "." ? (e.length > ++h || u > 0) && l.push(t.r) : c !== "," && l.push(c); return l.join("") } Number.prototype.__Format = function (e) { var t = Number(this); if (e == "X") return Math.round(t).toString(16).toUpperCase(); if (e == "x") return Math.round(t).toString(16); var r = { t: msf.LC._t, r: msf.LC._r }, i = "0.################", s = e ? e.toLowerCase() : null; s === null || s == "g" ? e = i : s == "n" ? e = "#," + i : s == "c" ? (e = msf.LC._c, r.r = msf.LC._cr, r.t = msf.LC._ct) : s == "f" && (e = "0.00"), e.indexOf(",.") !== -1 && (t /= 1e3), e.indexOf("%") !== -1 && (t *= 100); var o = e.split(";"); return t < 0 && o.length > 1 ? (t *= -1, r.f = o[1]) : r.f = o[!t && o.length > 2 ? 2 : 0], n(t, r) }, Date.prototype.__Format = function (t) { var n = this, r = "", i; return t.length == 1 && (t = msf.LC[t]), t.replace(/(d{1,4}|M{1,4}|yyyy|yy|HH|H|hh|h|mm|m|ss|s|tt)/g, function () { switch (arguments[0]) { case "dddd": return msf.LC._d[n.getDay()]; case "ddd": return msf.LC._d[n.getDay()].substr(0, 3); case "dd": return e(n.getDate()); case "d": return n.getDate(); case "MMMM": return msf.LC._m[n.getMonth()]; case "MMM": return msf.LC._m[n.getMonth()].substr(0, 3); case "MM": return e(n.getMonth() + 1); case "M": return n.getMonth() + 1; case "yyyy": return n.getFullYear(); case "yy": return n.getFullYear().toString().substr(2); case "HH": return e(n.getHours()); case "hh": return e((n.getHours() - 1) % 12 + 1); case "H": return n.getHours(); case "h": return (n.getHours() - 1) % 12 + 1; case "mm": return e(n.getMinutes()); case "m": return n.getMinutes(); case "ss": return e(n.getSeconds()); case "s": return n.getSeconds(); case "tt": return n.getHours() < 12 ? "AM" : "PM"; default: return "" } }) }, String.__Format = function (e, t, n, r) { var i = arguments, s; return e.replace(/(\{*)\{((\d+)(\,(-?\d*))?(\:([^\}]*))?)\}/g, function () { var e = arguments; if (e[1] && e[1].length % 2 == 1) return e[0]; if ((s = i[parseInt(e[3], 10) + 1]) === undefined) throw "Missing argument"; var t = s.__Format ? s.__Format(e[7]) : s.toString(), n = parseInt(e[5], 10) || 0, r = Math.abs(n) - t.length; if (r > 0) { var o = " "; while (o.length < r) o += " "; t = n > 0 ? t + o : o + t } return e[1] + t }).replace(/\{\{/g, "{") }, msf.LC = null, msf.setCulture = function (e) { msf.LC = t(e) || t(e.substr(0, 2)) || t() }, msf.setCulture(navigator.systemLanguage || navigator.language || "en-US"); var r = Date.prototype; r.format = r.format || r.__Format, r = Number.prototype, r.format = r.format || r.__Format, String.format = String.format || String.__Format })(), window.String.padLeft = function (t, n, r) { try { var i = "" + t, s = r || "0"; while (i.length < n) i = s + i; return i } catch (o) { WxMap.Console.Log(o) } }, window.String.prototype.padLeft = function (e, t) { return String.padLeft(this, e, t) }, window.String.isDefined = function (e) { return e != undefined && e != null && e != "" }, window.Math.logBase = function (e, t) { return Math.log(e) / Math.log(t) }, window.Math.sign = function (e) { return typeof e != "number" ? Number.NaN : e > 0 ? 1 : e < 1 ? -1 : 0 }, window.Date.prototype.toPrintString = function () { try { var e = new WxMap.StringBuilder, t = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], n = (new Date).getTimezoneOffset() / 60 * -1; return e.Append(String.padLeft(this.getDate(), 2)).Append(" ").Append(t[this.getMonth()]).Append(" ").Append(this.getFullYear()).Append(" ").Append(String.padLeft(this.getHours() + n, 2)).Append(":").Append(String.padLeft(this.getMinutes(), 2)).Append(":").Append(String.padLeft(this.getSeconds(), 2)), e.ToString() } catch (r) { return "Invalid Date" } }, window.Date.prototype.toChronoString = function () { var e = new WxMap.StringBuilder; return e.Append(this.getFullYear()).Append(String.padLeft((this.getMonth() + 1).toString(), 2)).Append(String.padLeft(this.getDate().toString(), 2)).Append(String.padLeft(this.getHours().toString(), 2)).Append(String.padLeft(this.getMinutes().toString(), 2)).Append(String.padLeft(this.getSeconds().toString(), 2)), e.ToString() }, window.Date.prototype.toShortTimeString = function () { var e = new WxMap.StringBuilder; return e.Append(String.padLeft(this.getHours(), 2)).Append(":").Append(String.padLeft(this.getMinutes(), 2)).Append(":").Append(String.padLeft(this.getSeconds(), 2)), e.ToString() }, window.Date.parseChrono = function (e) { var t = parseInt(e.substr(0, 4)), n = parseInt(e.substr(4, 2), 10), r = parseInt(e.substr(6, 2), 10), i = parseInt(e.substr(8, 2), 10), s = parseInt(e.substr(10, 2), 10), o = parseInt(e.substr(12, 2), 10), u = new Date(t, n - 1, r, i, s, o); return u }, window.Date.utcFromNow = function () { var e = new Date, t = new Date(e.getUTCFullYear(), e.getUTCMonth(), e.getUTCDate(), e.getUTCHours(), e.getUTCMinutes(), e.getUTCSeconds(), e.getUTCMilliseconds()); return t }, window.Date.min = new Date(1e3, 0, 1, 0, 0, 0), window.Date.max = new Date(9999, 11, 31, 23, 59, 59, 999); var WxMap = new function () { "use strict"; var e = this, t = "WxMap", n = function (e, t, n) { function r(e) { v.cssText = e } function i(e, t) { return r(y.join(e + ";") + (t || "")) } function s(e, t) { return typeof e === t } function o(e, t) { return !! ~("" + e).indexOf(t) } function u(e, t) { for (var r in e) { var i = e[r]; if (!o(i, "-") && v[i] !== n) return t == "pfx" ? i : !0 } return !1 } function a(e, t, r) { for (var i in e) { var o = t[e[i]]; if (o !== n) return r === !1 ? e[i] : s(o, "function") ? o.bind(r || t) : o } return !1 } function f(e, t, n) { var r = e.charAt(0).toUpperCase() + e.slice(1), i = (e + " " + w.join(r + " ") + r).split(" "); return s(t, "string") || s(t, "undefined") ? u(i, t) : (i = (e + " " + E.join(r + " ") + r).split(" "), a(i, t, n)) } var l = "2.6.1", c = {}, h = t.documentElement, p = "modernizr", d = t.createElement(p), v = d.style, m, g = {}.toString, y = " -webkit- -moz- -o- -ms- ".split(" "), b = "Webkit Moz O ms", w = b.split(" "), E = b.toLowerCase().split(" "), S = {}, x = {}, T = {}, N = [], C = N.slice, k, L = function (e, n, r, i) { var s, o, u, a = t.createElement("div"), f = t.body, l = f ? f : t.createElement("body"); if (parseInt(r, 10)) while (r--) u = t.createElement("div"), u.id = i ? i[r] : p + (r + 1), a.appendChild(u); return s = ["&#173;", '<style id="s', p, '">', e, "</style>"].join(""), a.id = p, (f ? a : l).innerHTML += s, l.appendChild(a), f || (l.style.background = "", h.appendChild(l)), o = n(a, e), f ? a.parentNode.removeChild(a) : l.parentNode.removeChild(l), !!o }, A = {}.hasOwnProperty, O; !s(A, "undefined") && !s(A.call, "undefined") ? O = function (e, t) { return A.call(e, t) } : O = function (e, t) { return t in e && s(e.constructor.prototype[t], "undefined") }, Function.prototype.bind || (Function.prototype.bind = function (e) { var t = this; if (typeof t != "function") throw new TypeError; var n = C.call(arguments, 1), r = function () { if (this instanceof r) { var i = function () { }; i.prototype = t.prototype; var s = new i, o = t.apply(s, n.concat(C.call(arguments))); return Object(o) === o ? o : s } return t.apply(e, n.concat(C.call(arguments))) }; return r }), S.canvas = function () { var e = t.createElement("canvas"); return !!e.getContext && !!e.getContext("2d") }, S.opacity = function () { return i("opacity:.55"), /^0.55$/.test(v.opacity) }, S.csstransforms = function () { return !!f("transform") }, S.csstransforms3d = function () { var e = !!f("perspective"); return e && "webkitPerspective" in h.style && L("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}", function (t, n) { e = t.offsetLeft === 9 && t.offsetHeight === 3 }), e }, S.csstransitions = function () { return f("transition") }; for (var M in S) O(S, M) && (k = M.toLowerCase(), c[k] = S[M](), N.push((c[k] ? "" : "no-") + k)); return c.addTest = function (e, t) { if (typeof e == "object") for (var r in e) O(e, r) && c.addTest(r, e[r]); else { e = e.toLowerCase(); if (c[e] !== n) return c; t = typeof t == "function" ? t() : t, enableClasses && (h.className += " " + (t ? "" : "no-") + e), c[e] = t } return c }, r(""), d = m = null, c._version = l, c._prefixes = y, c._domPrefixes = E, c._cssomPrefixes = w, c.testProp = function (e) { return u([e]) }, c.testAllProps = f, c.testStyles = L, c } (window, window.document); this.GetType = function () { return t }, this.Months = { January: 1, February: 2, March: 3, April: 4, May: 5, June: 6, July: 7, August: 8, September: 9, October: 10, November: 11, December: 12 }, this.ImageFormat = { Bmp: 0, Gif: 1, Jpeg: 2, Png: 3, Tiff: 4 }, this.TraceMode = { None: 0, Normal: 1, Verbose: 2 }, this.Event = function () { var e = this, t = "WxMap.Event", n = []; this.GetType = function () { return t }, this.Trigger = function (e, t) { for (var r = 0; r < n.length; r++) try { var i = n[r]; if (i.IncludeSender) { var s = e || i.ThisContext; i.Callback.apply(s, arguments) } else i.Callback.call(null, t) } catch (o) { WxMap.Console.Log("EventTriggerException: " + o + " at " + i.Callback) } }, this.AddListener = function (e, t, i) { t || (t = e, e = null); var s = new r; return s.Callback = t, s.ThisContext = e, i != null && (s.IncludeSender = i), n.push(s), t }, this.RemoveListener = function (e) { var t; for (var r = 0, i = n.length; r < i; r++) { var s = n[r]; s.Callback === e && (t = r) } t !== undefined && n.splice(t, 1) }; var r = function () { this.Callback = null, this.ThisContext = null, this.IncludeSender = !0 } }, this.Point = function (e, t) { var n = this, r = "WxMap.Point"; this.X = e || 0, this.Y = t || 0, this.GetType = function () { return r }, this.Round = function () { n.X = Math.round(n.X), n.Y = Math.round(n.Y) }, this.ToString = function () { return [n.X, n.Y].join() } }, this.Size = function (e, t) { var n = this, r = "WxMap.Size"; this.Height = t || 0, this.Width = e || 0, this.GetType = function () { return r }, this.Round = function () { n.Height = Math.round(n.Height), n.Width = Math.round(n.Width) }, this.ToString = function () { var e = new WxMap.StringBuilder; return e.Append(n.Width), e.Append("w x "), e.Append(n.Height), e.Append("h"), e.ToString() } }, this.StringBuilder = function (e) { var t = this, n = "WxMap.StringBuilder", r = new Array(""); return this.GetType = function () { return n }, this.Append = function (e) { if (e != undefined && e != null) if (typeof e == "string") r.push(e); else try { r.push(e.toString()) } catch (n) { } return t }, this.Clear = function () { r.length = 1 }, this.ToString = function () { return r.join("") }, t.Append(e) }, this.TimeSpan = function (e, t, n, r, i) { var s = this, o = "WxMap.TimeSpan", u = 1e3, a = 6e4, f = 36e5, l = 864e5, c = 0; this.GetType = function () { return o }, this.GetTotalMilliseconds = function (e) { var t = c; return e === !0 && (t = Math.floor(t)), t }, this.GetTotalSeconds = function (e) { var t = c / u; return e === !0 && (t = Math.floor(t)), t }, this.GetTotalMinutes = function (e) { var t = c / a; return e === !0 && (t = Math.floor(t)), t }, this.GetTotalHours = function (e) { var t = c / f; return e === !0 && (t = Math.floor(t)), t }, this.GetTotalDays = function (e) { var t = c / l; return e === !0 && (t = Math.floor(t)), t }, this.GetMilliseconds = function () { return c % 1e3 }, this.GetSeconds = function () { return Math.floor(c / u) % 60 }, this.GetMinutes = function () { return Math.floor(c / a) % 60 }, this.GetHours = function () { return Math.floor(c / f) % 24 }, this.GetDays = function () { return Math.floor(c / l) }, this.AddMilliseconds = function (e) { c += e }, this.AddSeconds = function (e) { c += e * u }, this.AddMinutes = function (e) { c += e * a }, this.AddHours = function (e) { c += e * f }, this.AddDays = function (e) { c += e * l }, this.SubtractMilliseconds = function (e) { c -= e }, this.SubtractSeconds = function (e) { c -= e * u }, this.SubtractMinutes = function (e) { c -= e * a }, this.SubtractHours = function (e) { c -= e * f }, this.SubtractDays = function (e) { c -= e * l }, this.Add = function (e) { c += e.totalMilliseconds() }, this.Subtract = function (e) { c -= e.totalMilliseconds() }, this.Equals = function (e) { return c === e.totalMilliseconds() }, this.ToString = function () { var e = s.GetDays(), t = s.GetHours(), n = s.GetMinutes(), r = s.GetSeconds(), i = s.GetMilliseconds(), o = new WxMap.StringBuilder; return o.Append(e).Append(".").Append(t).Append(":").Append(n).Append(":").Append(r).Append(":").Append(i), o.ToString() }, c += i * l, c += r * f, c += n * a, c += t * u, c += e }, this.TimeSpan.Max = new e.TimeSpan(Number.MAX_VALUE, 0, 0, 0, 0), this.TimeSpan.Zero = new e.TimeSpan(0, 0, 0, 0, 0), this.TimeSpan.Min = new e.TimeSpan(Number.MIN_VALUE, 0, 0, 0, 0), this.TimeSpan.FromSeconds = function (t) { return new e.TimeSpan(0, t, 0, 0, 0) }, this.TimeSpan.FromMinutes = function (t) { return new e.TimeSpan(0, 0, t, 0, 0) }, this.TimeSpan.FromHours = function (t) { return new e.TimeSpan(0, 0, 0, t, 0) }, this.TimeSpan.FromDays = function (t) { return new e.TimeSpan(0, 0, 0, 0, t) }, this.TimeSpan.FromDates = function (t, n, r) { var i = n.valueOf() - t.valueOf(); return r === !0 && (i = Math.abs(i)), new e.TimeSpan(i, 0, 0, 0, 0) }, this.Comparable = function () { var e = this, t = "WxMap.Comparable"; this.GetType = function () { return t }, this.CompareTo = function (e) { return -1 }, this.IsLessThan = function (e) { return this.CompareTo(e) == -1 }, this.IsLessThanOrEqual = function (e) { return this.CompareTo(e) != 1 }, this.IsGreaterThan = function (e) { return this.CompareTo(e) == 1 }, this.IsGreaterThanOrEqual = function (e) { return this.CompareTo(e) != -1 }, this.Equals = function (e) { return e == null ? !1 : this.CompareTo(e) == 0 }, this.NotEquals = function (e) { return !this.Equals(e) } }, this.Net = function () { var e = this, t = "WxMap.Net"; this.GetType = function () { return t } }, this.Net.CreateCorsRequest = function (e, t, n) { if (!XMLHttpRequest) return null; var r = new XMLHttpRequest; return "withCredentials" in r ? r.open(e, t, n) : typeof XDomainRequest != "undefined" ? (r = new XDomainRequest, r.open(e, t)) : r = null, r }, this.Browser = new function () { function w() { if (g === undefined) { for (var e = -1, t = document.createElement("b"); t.innerHTML = "<!--[if gt IE " + ++e + "]>1<![endif]-->", +t.innerHTML; ); g = e } return g } var e = this, t = "WxMap.Browser", r = "Microsoft Internet Explorer", i = "Chrome", s = "Safari", o = "Firefox", u = "Opera", a = "iPad", f = "iPhone", l = "Android", c = "Win32", h = "MacPPC", p = "MacIntel", d = "Linux i686", v, m, g, y, b; this.HasCanvas = n.canvas, this.HasCors, this.GetType = function () { return t }, this.GetIsAccelerated = function () { var t = !0, n, a, f = e.GetAgent(), l = e.GetPlatform(); if (y === undefined) { a = e.GetName(), n = e.GetVersion(); if (l === c || l === p || l === h || l === d) if (a === r) n < 9 && (t = !1); else { n = parseInt(n); try { if (a === i && n < 18 || a === o && n < 4 || a === s && n < 5 || a === u && n < 12) t = !1 } catch (v) { } } /ipad|ipod|iphone/gi.test(f) && (/OS [2-4]_\d(_\d)? like Mac OS X/i.test(navigator.userAgent) || /CPU like Mac OS X/i.test(navigator.userAgent) ? t = !1 : t = !0), /android/gi.test(l) && (t = !1), y = t } return y }, this.GetVersion = function () { var t, n, r; return m ? m : (t = w(), n = navigator, t ? m = t.toString() : (r = e.GetName(), r === i || v === l ? (m = n.appVersion.split(" "), m = m.slice(m.length - 2, m.length - 1), m = m.toString(), m = m.replace("Chrome/", "")) : r === s ? (m = n.appVersion.split(" "), m = m.slice(m.length - 2, m.length - 1), m = m.toString(), m = m.replace("Version/", "")) : r === o ? (m = n.userAgent.split(" "), m = m.slice(m.length - 1), m = m.toString(), m = m.replace("Firefox/", "")) : r === u ? (m = n.userAgent.split(" "), m = m.slice(0), m = m.toString(), m = m.replace("Opera/", "")) : r === a ? (m = n.userAgent.split(" "), m = m.slice(m.length - 3, m.length - 2), m = m.toString(), m = m.replace("Version/", "")) : r === f ? (m = n.userAgent.split(" "), m = m.slice(m.length - 3, m.length - 2), m = m.toString(), m = m.replace("Version/", "")) : m = n.appVersion), m) }, this.GetName = function () { var e = w(), t = navigator, n = t.appVersion, c = t.userAgent; return v ? v : (e ? v = r : /chrome/gi.test(n) ? v = i : /safari/gi.test(n) ? v = s : /firefox/gi.test(c) ? v = o : /opera/gi.test(c) ? v = u : /ipad/gi.test(c) ? v = a : /iphone/gi.test(c) ? v = f : /android/gi.test(c) ? v = l : v = t.appName, v) }, this.GetPlatform = function () { return navigator.platform }, this.GetAgent = function () { return navigator.userAgent }, this.GetStylePrefix = function () { if (b === undefined) { var t = e.GetName(); switch (t) { case "Microsoft Internet Explorer": b = "ms"; break; case "Opera": b = "o"; break; case "FireFox": b = "moz"; break; case "Chrome": case "Safari": b = "webkit"; break; default: b = "" } } return b }, this.IsIE = function () { return w() ? !0 : !1 }; if (!XMLHttpRequest) e.HasCors = !1; else { var E = new XMLHttpRequest; "withCredentials" in E ? e.HasCors = !0 : typeof XDomainRequest != "undefined" ? e.HasCors = !0 : e.HasCors = !1 } }, this.Css = function (e) { function b() { switch (WxMap.Browser.GetName()) { case "Safari": case "Chrome": WxMap.AddEventListener(r, "webkitTransitionEnd", E, !1); break; case "Microsoft Internet Explorer": WxMap.AddEventListener(r, "msTransitionEnd", E, !1); break; case "Opera": WxMap.AddEventListener(r, "oTransitionEnd", E, !1); break; case "Firefox": default: WxMap.AddEventListener(r, "transitionend", E, !1) } } function w() { switch (WxMap.Browser.GetName()) { case "Safari": case "Chrome": WxMap.RemoveEventListener(r, "webkitTransitionEnd", E, !1); break; case "Microsoft Internet Explorer": WxMap.RemoveEventListener(r, "MSTransitionEnd", E, !1); break; case "Opera": WxMap.RemoveEventListener(r, "oTransitionEnd", E, !1); break; case "Firefox": default: WxMap.RemoveEventListener(r, "MSTransitionEnd", E, !1) } } function E(e) { var n = { Property: e.propertyName, Element: e.srcElement || e.currentTarget }; t.Transitioned.Trigger(t, n) } var t = this, n = "WxMap.Css", r = e, i = 1, s = 1, o = 1, u = 1, a = 0, f = 0, l = 0, c = 0, h = 0, p = 0, d = 0, v = "50%", m = "50%", g = 0, y = !1; this.GetType = function () { return n }, this.ScaleTransform = function (e, t, n) { s = typeof e == "number" ? e : s, o = typeof t == "number" ? t : o, u = typeof n == "number" ? n : u }, this.RotateTransform = function (e, t, n, r) { a = typeof e == "number" ? e : a, f = typeof t == "number" ? t : f, l = typeof n == "number" ? n : l, c = typeof r == "number" ? r : c }, this.TranslateTransform = function (e, t, n) { h = typeof e == "number" ? e : h, p = typeof t == "number" ? t : p, d = typeof n == "number" ? n : d }, this.OrientTransform = function (e, t, n) { v = e != undefined && e != null ? e : v, m = t != undefined && t != null ? t : m, g = n != undefined && n != null ? n : g; var i = new WxMap.StringBuilder; WxMap.Css.HasTransform3d ? (typeof v == "number" ? i.Append(v).Append("px ") : i.Append(v), typeof m == "number" ? i.Append(m).Append("px ") : i.Append(m), typeof g == "number" ? i.Append(g).Append("px ") : i.Append(g)) : (typeof v == "number" ? i.Append(v).Append("px ") : i.Append(v), typeof m == "number" ? i.Append(m).Append("px ") : i.Append(m)), WxMap.Css.ApplyOrigin(r, i.ToString()) }, this.Transform = function (t, n, i) { if (!WxMap.Css.HasTransform) return; var v = t || 0, m = WxMap.Css.DeriveTransition(r), g = v > 0 && WxMap.Css.HasTransition; if (g) { var y = WxMap.StringBuilder(); y.Append(v).Append("ms"); var b = i || "linear"; b && y.Append(" ").Append(b), WxMap.Console.Log("Applying Transition: " + y.ToString()), WxMap.Css.ApplyTransition(r, y.ToString()) } else WxMap.Css.ApplyTransition(r, "0ms"); var w = new WxMap.StringBuilder; WxMap.Css.HasTransform3d ? (w.Append("translate3d(").Append(h).Append("px, ").Append(p).Append("px, ").Append(d).Append("px) "), w.Append("scale3d(").Append(s).Append(", ").Append(o).Append(", ").Append(u).Append(") "), w.Append("rotate3d(").Append(a).Append(", ").Append(f).Append(", ").Append(l).Append(", ").Append(c).Append(") ")) : (w.Append("translate(").Append(h).Append("px, ").Append(p).Append("px) "), w.Append("scale(").Append(s).Append(", ").Append(o).Append(") "), w.Append("rotate(").Append(c).Append(") ")), WxMap.Css.ApplyTransform(e, w.ToString()), m && setTimeout(function () { WxMap.Css.ApplyTransition(r, m), WxMap.Css.ApplyTransform(e, w.ToString()) }, v) }, this.Fade = function (e, t, n, i) { if (!WxMap.Css.HasOpacity) return; var s = t || 0, o = WxMap.Css.DeriveTransition(r), u = s > 0 && WxMap.Css.HasTransition; if (u) { var a = WxMap.StringBuilder(); a.Append("opacity ").Append(s).Append("ms"), i && a.Append(" ").Append(i), WxMap.Css.ApplyTransition(r, a.ToString()) } else WxMap.Css.ApplyTransition(r, "opacity 0ms"); r.style.opacity = e, setTimeout(function () { WxMap.Css.ApplyTransition(r, o) }, s) }, this.Transitioning = new WxMap.Event, this.Transitioned = new WxMap.Event, b() }, this.Css.HasOpacity = n.opacity, this.Css.HasTransition = n.csstransitions, this.Css.HasTransform2d = n.csstransforms, this.Css.HasTransform3d = n.csstransforms3d, this.Css.HasTransform = n.csstransforms || n.csstransforms3d, this.Css.ApplyTransform = function (e, t) { switch (WxMap.Browser.GetName()) { case "Safari": case "Chrome": e.style.webkitTransform = t; break; case "Microsoft Internet Explorer": e.style.msTransform = t; break; case "Firefox": e.style.MozTransform = t; break; case "Opera": e.style.OTransform = t; break; default: e.style.transform = t } }, this.Css.ApplyTransition = function (e, t) { switch (WxMap.Browser.GetName()) { case "Safari": case "Chrome": e.style.webkitTransition = t; break; case "Microsoft Internet Explorer": e.style.msTransition = t; break; case "Firefox": e.style.MozTransition = t; break; case "Opera": e.style.OTransition = t; break; default: e.style.transition = t } }, this.Css.ApplyOrigin = function (e, t) { switch (WxMap.Browser.GetName()) { case "Safari": case "Chrome": e.style.webkitTransformOrigin = t; break; case "Microsoft Internet Explorer": e.style.msTransformOrigin = t; break; case "Firefox": e.style.MozTransformOrigin = t; break; case "Opera": e.style.OTransformOrigin = t; break; default: e.style.transformOrigin = t } }, this.Css.DeriveTransition = function (e) { switch (WxMap.Browser.GetName()) { case "Safari": case "Chrome": return e.style.webkitTransition; case "Microsoft Internet Explorer": return e.style.msTransition; case "Firefox": return e.style.mozTransition; case "Opera": return e.style.oTransition; default: return e.style.transition } }, this.Css.DeriveOrigin = function (e) { switch (WxMap.Browser.GetName()) { case "Safari": case "Chrome": return e.style.webkitTransformOrigin; case "Microsoft Internet Explorer": return e.style.msTransformOrigin; case "Firefox": return e.style.mozTransformOrigin; case "Opera": return e.style.oTransformOrigin; default: return e.style.transformOrigin } }, this.Css.DeriveTransform = function (e) { switch (WxMap.Browser.GetName()) { case "Safari": case "Chrome": return e.style.webkitTransform; case "Microsoft Internet Explorer": return e.style.msTransform; case "Firefox": return e.style.mozTransform; case "Opera": return e.style.oTransform; default: return e.style.transform } }, this.Css.DetermineUseTransform = function () { var t = !1; if (!this.HasTransform) t = !1; else switch (e.Browser.GetPlatform()) { case "MacIntel": case "MacPPC": switch (e.Browser.GetName()) { case "Opera": case "Safari": t = !1; break; default: t = !0 } break; default: switch (e.Browser.GetName()) { case "Opera": t = !1; break; default: t = !0 } } return t }, this.Css.AttachElement = function (e) { var t = typeof e == "string" ? t = document.getElementById(e) : e; if (t != undefined && t != null) { var n = new WxMap.Css(t); e.Css = n } }, this.Css.UseTransform = this.Css.DetermineUseTransform(), this.Css.UseTransition = this.Css.HasTransition && this.Browser.GetName() != "Microsoft Internet Explorer" && this.Browser.GetName() != "Opera" }; WxMap.HasInterface = function (e, t) { if (e.hasOwnProperty("GetInterfaces")) { var n = e.GetInterfaces(); for (var r = 0, i = n.length; r < i; r++) { var s = n[r]; if (s === t) return !0 } } return !1 }, WxMap.IsTypeOf = function (e, t) { return e.constructor.toString().indexOf(t) != -1 }, WxMap.AddEventListener = function (e, t, n, r) { var i = r || !1; e.addEventListener ? e.addEventListener(t, n, i) : (e["e" + t + n] = n, e[t + n] = function () { var r = window.event; r.target = e, e["e" + t + n](r) }, e.attachEvent("on" + t, e[t + n])) }, WxMap.RemoveEventListener = function (e, t, n, r) { var i = r || !1; e.removeEventListener ? e.removeEventListener(t, n, i) : e[t + n] && (e.detachEvent("on" + t, e[t + n]), e[t + n] = null) }, WxMap.Console = new function () { function n(e) { WxMap.Console.Error(e, "", null, !0) } var e = this, t = "WxMap.Console"; this.GetType = function () { return t }, this.Log = function (t, n, r) { !r && window.console && (n ? console.log(t, n) : console.log(t)); var i = { Message: t, OptionalParams: n }; e.Logged.Trigger(this, i) }, this.Warn = function (t, n, r) { !r && window.console && (n ? console.warn(t, n) : console.warn(t)); var i = { Message: t, OptionalParams: n }; e.Warned.Trigger(this, i) }, this.Error = function (t, n, r, i) { var s = n || "", o = t.message || t, u = o + s; !i && window.console && (r ? console.error(u, r) : console.error(u)); var a = { Error: t, Message: u, OptionalParams: r }; e.Errored.Trigger(this, a) }, this.Logged = new WxMap.Event, this.Warned = new WxMap.Event, this.Errored = new WxMap.Event, WxMap.AddEventListener(window, "error", n, !1) }
// wxmap.storage.min.js
window.localStorage === undefined && (window.browserStorage = { getItem: function (e) { return !e || !this.hasOwnProperty(e) ? null : unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)" + escape(e).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"), "$1")) }, key: function (e) { return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/, "").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[e]) }, setItem: function (e, t) { if (!e) return; document.cookie = escape(e) + "=" + escape(t) + "; path=/", this.length = document.cookie.match(/\=/g).length }, length: 0, removeItem: function (e) { if (!e || !this.hasOwnProperty(e)) return; var t = new Date; t.setDate(t.getDate() - 1), document.cookie = escape(e) + "=; expires=" + t.toGMTString() + "; path=/", this.length-- }, hasOwnProperty: function (e) { return (new RegExp("(?:^|;\\s*)" + escape(e).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=")).test(document.cookie) } }, window.browserStorage.length = (document.cookie.match(/\=/g) || window.browserStorage).length), WxMap.Storage = new function () { var e = this, t = "WxMap.Storage", n = window.localStorage || window.browserStorage, r = "__savedMaps"; this.SavedMaps = [], this.GetType = function () { return t }, this.Save = function (e, t) { var r = JSON.stringify(t); return n.setItem(e, r) }, this.Retrieve = function (e) { var t = n.getItem(e); if (t === null) return null; var r = JSON.parse(t); return r }, this.Delete = function (e) { return n.removeItem(e) }, this.SaveMap = function (t, n) { n.Id = t, e.SavedMaps.push(n), e.Save(r, e.SavedMaps) }, this.RetrieveMap = function (t, n) { var r = e.SavedMaps, i = !1; if (r === null) return null; for (var s = 0, o = r.length; s < o; s++) r[s].Id === t && (i = s); return i === !1 ? null : n ? [r[i], i] : r[i] }, this.RetrieveMaps = function () { var t = []; for (var n = 0, r = e.SavedMaps.length; n < r; n++) { var i = e.SavedMaps[n]; /^\__[a-zA-Z]/.test(i.Id) || t.push(i) } return t }, this.DeleteMap = function (t) { var n = e.RetrieveMap(t, !0)[1]; e.SavedMaps.splice(n, 1), e.Save(r, e.SavedMaps) }, this.MoveMap = function (t, n) { var r = e.SavedMaps, i = n, s = e.RetrieveMap(t, !0)[1]; while (s < 0) s += r.length; while (i < 0) i += r.length; if (i >= r.length) throw { name: "IndexOutOfBoundsException", message: "Index: " + n + " is beyond the bounds of the Saved Maps array" }; r.splice(i, 0, r.splice(s, 1)[0]) }, this.MoveMapUp = function (t) { var n = e.RetrieveMap(t, !0)[1]; e.MoveMap(t, n++) }, this.MoveMapDown = function (t) { var n = e.RetrieveMap(id, !0)[1]; e.MoveMap(t, n--) }, this.MapState = function (e) { var t = this, n = "WxMap.Storage.MapState"; this.Id = e, this.Layers = {}, this.LayerOrder = null, this.Animation = null, this.Location = !1, this.Scale = !1, this.GetType = function () { return n } }, this.AnimationState = function () { var e = this, t = "WxMap.Storage.AnimationState"; this.PeriodPerFrame = null, this.TotalFrames = null, this.CurrentFrame = null, this.PlayRate = null, this.IsSliding = null, this.Dwell = null, this.EnableLooping = null, this.GetType = function () { return t } }; var i = e.Retrieve(r); i && (e.SavedMaps = i) }

// Save T2 Maps to T3
function SaveT2MapsToT3() {
  if (WxMap.Storage) {
    var maps = WxMap.Storage.Retrieve("WxMapUI");
    if (maps === null) {
      var tessera2Cookie = document.getElementById("savedT2Maps").innerText;
      if (tessera2Cookie !== undefined && tessera2Cookie !== "") {
        var mapsArray = tessera2Cookie.split(";");
        var locations = [];
        var map, mapParts, mapLabel, mapLon, mapLat, mapZoom, mapLayers;
        for (var i = 0; i < mapsArray.length; i++) {
          map = mapsArray[i];
          mapParts = map.split("|");
          mapLabel = mapParts[0];
          mapLon = mapParts[1];
          mapLat = mapParts[2];
          mapZoom = mapParts[3];
          if (mapParts[4].indexOf(",") !== -1) {
            mapLayers = new Array();
            mapLayers[0] = "0014";
            var layers = mapParts[4].split(",");
            var j = 0;
            for (j; j < layers.length; j++) {
              mapLayers[j + 1] = layers[j];
            }
            mapLabel[j + 1] = "0017";
          }
          else if (mapParts[4] !== "")
            mapLayers = new Array("0014", mapParts[4], "0017");
          else
            mapLayers = new Array("0014", "0017");

          locations.push({ label: mapLabel, xyz: [parseFloat(mapLon), parseFloat(mapLat), parseInt(mapZoom)], layers: mapLayers, isStart: false });
        }

        // Create State Object
        var state = { locations: locations, quickPicks: { selected: [], available: [] }, preference: null, mapState: { zoom: null, location: null, layers: null }, roadsPlaces: null };

        // Save
        WxMap.Storage.Save("WxMapUI", state);
      }
    }
  }
}

jQuery(document).ready(function () { SaveT2MapsToT3(); });
  