var IM=IM||function(){var version="1340.102012.2",_xp1_o="37257",_xp1_uuid=getcookie("xp1_uid"),_xp1_random=Math.floor(Math.random()*99),_xp1_qsNameValuePairs={ssv_callback:"IM.setPlacements"},_cvp_qsNameValuePairs={cvp_callback:"IM.setCVPPlacements"},maxIMTime=1500,maxIMTimeFO=2000,turnOffIM=false,g_timeout=null,g_Displayed=false,g_fcl_uuid=getcookie("fcl_uuid"),g_currentPageName=null,g_currentPageManifest=null,flashMovie=null,isFlashReady=false,containerReady=false,testSite=getIsTestEnv(),jsRootPath=getHostRoot()+"/templates/components/javascript",g_failoverList=[],defs={sig_svc_type:{none:0,release:1,indirect:2,direct:3,adult:4}};if(typeof console==="undefined"){console={}}if(typeof console.log==="undefined"){console.log=function(){}}checkForDisable();processCurrentPage();function processCurrentPage(){var bmFilePath="",pagename=null,wss_mlc=getMetaTagValue("wssmlc"),wss_title=getMetaTagValue("wsstitle");if(wss_mlc.indexOf("US/Home")>-1){if(amILoggedIn()){loadScript("loginbm",jsRootPath+"/us/en/bagmappings/usHome_bm.js")}else{var sagwrap=document.getElementById("placement_1");if(sagwrap){sagwrap.parentNode.parentNode.style.display="none"}}}else{if(wss_title.indexOf("/newcustomer")>-1){if(wss_mlc.indexOf("/br/pt/fedex/")>-1){bmFilePath="/bagmappings/lac/port/welcomecenter_br_pt_bm.js"}else{if(wss_mlc.indexOf("/ar/es/fedex/")>-1){bmFilePath="/bagmappings/lac/espanol/welcomecenter_ar_es_bm.js"}else{if(wss_mlc.indexOf("/co/es/fedex/")>-1){bmFilePath="/bagmappings/lac/espanol/welcomecenter_co_es_bm.js"}else{if(wss_mlc.indexOf("/mx/es/fedex/")>-1){bmFilePath="/bagmappings/lac/espanol/welcomecenter_mx_es_bm.js"}else{if(wss_mlc.indexOf("/pr/es/fedex/")>-1){bmFilePath="/bagmappings/lac/espanol/welcomecenter_pr_es_bm.js"}}}}}if(bmFilePath!==""){loadScript("lac_welcome_bm",jsRootPath+bmFilePath)}}else{if(pagename=getWssPageName()){try{if(pagename!==g_currentPageName){g_currentPageName=pagename;if(typeof im_page_manifest==="undefined"){loadScript("im-manifest",jsRootPath+"/v1/im-manifest-min.js",function(){processManifest(pagename)})}else{processManifest(pagename)}}}catch(e){}}}}}function processManifest(pagename){try{if(im_page_manifest){var manifest=im_page_manifest[pagename];if(manifest){g_currentPageManifest=manifest;if(typeof manifest.bagMapFile!=="undefined"){loadScript("bagmap",getHostRoot()+manifest.bagMapFile)}if(typeof manifest.deferDisplay!=="undefined"){if(!manifest.deferDisplay){loadIMScript("D","",{manifestControlled:true,hasOwnBagMapFile:(manifest.bagMapFile)?true:false})}}else{loadIMScript("D","",{manifestControlled:true,hasOwnBagMapFile:(manifest.bagMapFile)?true:false})}if(typeof manifest.registerEvents!=="undefined"){if(typeof window.jQuery=="undefined"&&!isUsHomePage()){loadScript("jquery",getHostRoot()+"/fedextrack/js/lib/jquery-1.7_min.js",function(){for(var i=0;i<manifest.registerEvents.length;i++){var re=manifest.registerEvents[i];var es=re.elementSelector;var em=re.eventMap;var sf=re.selectorFilter;var ed=re.eventData;jQuery(es).on(em,sf,ed)}})}else{for(var i=0;i<manifest.registerEvents.length;i++){var re=manifest.registerEvents[i];var es=re.elementSelector;var em=re.eventMap;var sf=re.selectorFilter;var ed=re.eventData;jQuery(es).on(em,sf,ed)}}}if(typeof manifest.pixels!=="undefined"){for(var ii=0;ii<manifest.pixels.length;ii++){manifest.pixels[ii].firePixel()}}}}}catch(e){}}function getHostRoot(){var hostRoot=(testSite==true)?"":"//images.fedex.com";return hostRoot}function getIsTestEnv(){var wwwHost=window.location.hostname;var matched=wwwHost.match(/www(base|dev|drt|stress|bit|test)/gi);return(matched!==null)?true:false}function getWssPageName(){var pagename=null,despaced=null,whitelist=null;try{pagename=getMetaTagValue("wssmlc")+getMetaTagValue("wsstitle");whitelist=pagename.replace(/[^a-zA-Z0-9\_\s\/\\]+/g,"");despaced=whitelist.replace(/[\s/:-]/g,"_")}catch(ex){despaced=null}return despaced}function handlePlacementClick(ev){}function setPlacements(placements){clearTimeout(g_timeout);if(g_Displayed){return}for(var p in placements){setSinglePlacement(placements[p],p)}sendFailoverDetails()}function getFileType(filename){var ft="img";var ext=filename.split(".").pop();if(ext.indexOf("htm")>-1){ft="html"}else{if(ext==="swf"){ft="swf"}}return ft}function injectHtml(placementDiv,placementObj,cid){var $placement_div=$(placementDiv);$placement_div.load(placementObj.creativeSource,function(){setupHtmlClickThrus($placement_div,placementObj,cid)})}function setupHtmlClickThrus($placement_div,placementObj,cid){var clickURL=(typeof placementObj.clickURL!=="undefined"&&placementObj.clickURL!==null)?placementObj.clickURL:"";var creativeLink=(typeof placementObj.creativeLink!=="undefined"&&placementObj.creativeLink!==null)?placementObj.creativeLink:"";$("a[href]",$placement_div).each(function(idx,item){var href=item.hash;if(!(href.indexOf("#")==0)){creativeLink=(creativeLink!="")?creativeLink:$(this).attr("href");$(this).attr("href",clickURL+creativeLink+getParamSeparator(creativeLink)+"INTCMP="+cid)}})}function setSinglePlacement(placementObj,divID){try{var clickThruURL="";var cid=(typeof placementObj.iMarketID!="undefined"&&placementObj.iMarketID!=null)?placementObj.iMarketID:placementObj.creativeID;var placementDiv=document.getElementById(divID);if(!placementDiv){addToFailoverList({placementID:divID,errCode:"4",errDesc:"Placement div not found on page",xp1Received:cid},false,false);return}if(!cid){addToFailoverList({placementID:divID,errCode:"6",errDesc:"CreativeID not found",xp1Received:"null"},true,false)}if(typeof g_currentPageManifest!=="undefined"&&g_currentPageManifest!==null&&typeof placementObj.creativeSource!=="undefined"){var fileType=getFileType(placementObj.creativeSource);if(fileType==="html"){if(typeof window.jQuery=="undefined"){loadScript("jquery",getHostRoot()+"/fedextrack/js/lib/jquery-1.7_min.js",function(){injectHtml(placementDiv,placementObj,cid)})}else{injectHtml(placementDiv,placementObj,cid)}}else{clickThruURL=(typeof placementObj.clickURL!=="undefined"&&placementObj.clickURL)?placementObj.clickURL+placementObj.creativeLink:placementObj.creativeLink;placementDiv.innerHTML="<a href='"+clickThruURL+getParamSeparator(placementObj.creativeLink)+"INTCMP="+cid+"'><img border='0' src='"+placementObj.creativeSource+"'/></a>"}}else{var creative=xp1_bagMapping[cid];if(!creative){addToFailoverList({placementID:divID,errCode:"2",errDesc:"Mismatch - Creative not found in bm file",xp1Received:cid},true,false)}clickThruURL=(placementObj.clickURL)?placementObj.clickURL+creative.url:creative.url;placementDiv.innerHTML="<a href='"+clickThruURL+getParamSeparator(creative.url)+"INTCMP="+cid+"'><img border='0' src='"+creative.image+"'/></a>"}g_Displayed=true;try{scDsp(cid);if(!_xp1_uuid){if(divID==="placement_1"){_xp1_uuid=(placementObj.xp1_id)?placementObj.xp1_id:"";checkCookie(_xp1_uuid)}}}catch(e){}}catch(ex){}}function addToFailoverList(objFO,bDisplayFO,bSonar){if(objFO!=null&&g_failoverList.length<11){var dp=(typeof objFO.placementID!="undefined"&&objFO.placementID)?xp1_failoverPlacements[objFO.placementID].creativeID:"null";objFO.displayedPlacement=dp;g_failoverList.push(objFO);if(bDisplayFO){setSinglePlacement(xp1_failoverPlacements[objFO.placementID],objFO.placementID)}}}function setCVPPlacements(Sonar_response_obj){var bagCode=null,sagCode=null,bagClickThrURL=null,sagClickThrURL=null;clearTimeout(g_timeout);var divID="placement_1";try{if(!Sonar_response_obj){addToFailoverList({placementID:divID,errCode:"196",errDesc:"Got empty sonar response"},true,true)}var statusCode=Sonar_response_obj.Sonar_response.status;if(!statusCode){addToFailoverList({placementID:divID,errCode:"105",errDesc:"No status code in sonar response"},true,true)}var divID="BAG";if(statusCode==="00"||statusCode==="01"||statusCode==="02"||statusCode==="99"){if(statusCode==="00"){bagCode=Sonar_response_obj.Sonar_response.trackingCodes.bagCode;bagClickThrURL=Sonar_response_obj.Sonar_response.trackingCodes.bagClickThrURL;if(!bagCode){addToFailoverList({placementID:divID,errCode:"106",errDesc:"Bag Code Not Found in Sonar Response"},false,true)}if(!bagClickThrURL){addToFailoverList({placementID:divID,errCode:"107",errDesc:"Bag ClickThru Url Not Found in Sonar Response"},false,true)}}else{if(statusCode==="02"){bagCode="failover_us";bagClickThrURL=""}}divID="placement_1";if(statusCode==="00"||statusCode==="02"){var myZones=Sonar_response_obj.Sonar_response.zones;if(!myZones){addToFailoverList({placementID:divID,errCode:"108",errDesc:"No Zone list defined"},true,true)}for(var zone in myZones){if(!myZones.hasOwnProperty(zone)){continue}if(!zone){addToFailoverList({placementID:divID,errCode:"109",errDesc:"Zone obj not found"},true,true)}var code=myZones[zone].code;if(!code){addToFailoverList({placementID:divID,errCode:"110",errDesc:"Zone code not found"},true,true)}if(code==="RC"){var myMessages=myZones[zone].messages;divID="placement_cvp";if(!myMessages){addToFailoverList({placementID:divID,errCode:"111",errDesc:"No Message List for Zone - RC"},false,true)}for(var msg in myMessages){if(!myMessages.hasOwnProperty(msg)){continue}if(!msg){addToFailoverList({placementID:divID,errCode:"112",errDesc:"No Message Obj for Zone - RC"},false,true)}var placement=document.getElementById(divID);if(placement){placement.innerHTML=myMessages[msg].message;g_Displayed=true}else{addToFailoverList({placementID:divID,errCode:"104",errDesc:"No placement div"},false,true)}}}if(code==="FC"){var myMessages=myZones[zone].messages;divID="placement_1";if(!myMessages){addToFailoverList({placementID:divID,errCode:"114",errDesc:"No Message List for Zone - FC"},true,true)}for(var msg in myMessages){if(!myMessages.hasOwnProperty(msg)){continue}if(!msg){addToFailoverList({placementID:divID,errCode:"115",errDesc:"No Message Obj for Zone - FC"},true,true)}var placement=document.getElementById(divID);if(placement){placement.innerHTML=myMessages[msg].message;g_Displayed=true}else{addToFailoverList({placementID:divID,errCode:"104",errDesc:"No placement_1 div"},false,true)}}}}}else{if(statusCode==="01"){divID="placement_1";bagCode=Sonar_response_obj.Sonar_response.trackingCodes.bagCode;sagCode=Sonar_response_obj.Sonar_response.trackingCodes.sagCode;bagClickThrURL=Sonar_response_obj.Sonar_response.trackingCodes.bagClickThrURL;sagClickThrURL=Sonar_response_obj.Sonar_response.trackingCodes.sagClickThrURL;if(!bagCode){addToFailoverList({placementID:divID,errCode:"106",errDesc:"Bag Code Not Found in Sonar Response"},false,true)}if(!bagClickThrURL){addToFailoverList({placementID:divID,errCode:"107",errDesc:"Bag ClickThru Url Not Found in Sonar Response"},false,true)}if(!sagCode){addToFailoverList({placementID:divID,errCode:"116",errDesc:"sag Code Not Found"},true,true)}if(!sagClickThrURL){addToFailoverList({placementID:divID,errCode:"117",errDesc:"sag ClickThru URL Not Found"},true,true)}if(sagCode){var creative=xp1_bagMapping[sagCode];if(!creative){addToFailoverList({placementID:divID,errCode:"102",errDesc:"Mismatch - Creative not found in bm file",xp1Received:sagCode},true,true)}else{var placement1=document.getElementById(divID);if(placement1){placement1.innerHTML="<a href='"+sagClickThrURL+creative.url+getParamSeparator(creative.url)+"INTCMP="+sagCode+"'><img border='0' src='"+creative.image+"'/></a>";g_Displayed=true;try{scDsp(sagCode)}catch(e){}}else{addToFailoverList({placementID:divID,errCode:"104",errDesc:"No placement div"},false,true)}}}}else{if(statusCode==="99"){addToFailoverList({placementID:divID,errCode:"199",errDesc:"Error 99 from Sonar"},true,true)}else{addToFailoverList({placementID:divID,errCode:"197",errDesc:"Unknown Error code in Sonar response"},true,true)}}}}else{addToFailoverList({placementID:divID,errCode:"198",errDesc:"Unknown Error in Sonar Flow"},true,true)}}catch(ex){}var bagSetInterval=setInterval(setBagPlacement,100);var bagTimeout=setTimeout(function(){clearInterval(bagSetInterval)},3000);function setBagPlacement(){try{if(isFlashReady){flashMovie=getFlashMovieObject("bagShell");flashMovie.goCVP(bagCode);flashMovie.linkCVP(bagClickThrURL);clearInterval(bagSetInterval)}}catch(e){}}sendFailoverDetails()}function getParamSeparator(baseURL){return(baseURL!=null&&baseURL.indexOf("?")>-1)?"&":"?"}function isUsHomePage(){return(getMetaTagValue("wssmlc").indexOf("US/Home")>-1)}function useSonar(){return(isUsHomePage()&&amILoggedIn())}function loadIMScript(type,tag,addtlTargetingInfo){if(!turnOffIM){var script_url="",script_id="",imid="",runme=false,isHome=isUsHomePage(),sErr="";if(g_currentPageManifest&&typeof g_currentPageManifest.testPlacements!=="undefined"){setPlacements(g_currentPageManifest.testPlacements);runme=false}else{if(useSonar()){runme=true;script_url="https://"+requestCVPDomain()+"/sonarService?data="+createCVPString();imid="cvpScript"}else{if(g_currentPageManifest){if(typeof g_currentPageManifest.xp1Name!=="undefined"){xp1_t=g_currentPageManifest.xp1Name}if(typeof g_currentPageManifest.failoverPlacements!=="undefined"){xp1_failoverPlacements=g_currentPageManifest.failoverPlacements}}if(!isHome){runme=true;script_url=getProtocol()+"://"+requestDomain()+"/meta"+createQueryString(type,tag,addtlTargetingInfo);imid="xp1Script"}}}if(runme){script_id=imid+type;loadScript(script_id,script_url);if(type==="D"){g_timeout=setTimeout(function(event){var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){if(scripts[i].id===script_id){if(g_Displayed){return}var head=document.getElementsByTagName("HEAD").item(0);head.removeChild(scripts[i]);sErr=(imid=="cvpScript")?"103":"3";addToFailoverList({errCode:sErr,errDesc:"Got response but timed out before we could display - used all failover defaults"});setPlacements(xp1_failoverPlacements);var imgFail=new Image();imgFail.src="/images/ascend/shared/headers/corp_logo.gif?xp1_response_failure";return}}sErr=(imid=="cvpScript")?"101":"1";addToFailoverList({errCode:sErr,errDesc:"Timed out before we got a response - use all failover defaults"});setPlacements(xp1_failoverPlacements)},maxIMTime)}}}else{setPlacements(xp1_failoverPlacements)}}function loadChatScript(){loadScript("atgsvcsScript","//static.atgsvcs.com/js/atgsvcs.js",function(){if(ATGSvcs!==null){ATGSvcs.setUOID(200106298424)}})}function getSSVParameters(){var ssvParameters="";var ssvIndex=0;var matches=window.location.href.match(/ssv_[^\=]*\=[^\&]*/gi);if(matches){for(ssvIndex=0;ssvIndex<matches.length;ssvIndex++){ssvParameters+=matches[ssvIndex]+"&"}}return ssvParameters}function getReferrer(){var domain=document.referrer.match(/\/\/([^\/]+)\/?/);var referringDomain="";if(domain!==null&&domain.length>1){domain=domain[1].split(".");referringDomain=domain.pop();if(domain.length>0){referringDomain=domain.pop()+"."+referringDomain}}return referringDomain}function getXP1_ConversionPageName(){var sname=getMetaTagValue("wsstitle");sname=sname.toLowerCase();sname=sname.replace(/^\+/g,"");sname=sname.replace(/\+/g," ");var spath=getMetaTagValue("wssmlc");spath=spath.toLowerCase();spath=spath.substring(6);spath=spath.replace(/\/+/g," ");if(spath.indexOf("inet")>-1){sname="inet label "+sname}else{if(spath.indexOf("supplies")>-1){sname="supplies "+sname}else{if(spath.indexOf("wgrt")>-1){sname="rating "+sname}else{if(spath.indexOf("pickup")>-1){sname="pickup confirmation"}else{if(spath.indexOf("oadr")>-1){sname="oadr confirmation"}else{if(spath.indexOf("gfbo")>-1){sname="global fedex billing online"}else{if(spath.indexOf("detail tracking")>-1){sname="tracking results"}else{if(spath.indexOf("lite")>-1){sname="lite-conf-"+LSHP.bean.get("country")+"-"+LSHP.bean.get("language")}}}}}}}}sname=sname.replace(/\ /g,"-");return sname}function createQueryString(type,tag,addtlTargetingInfo){var qs="?_o="+_xp1_o;var _t="";if(type==="B"){_t="behavior"}else{if(type==="T"){_t=getXP1_ConversionPageName();try{if(_t.indexOf("inet-label")>-1){if(typeof labelDispObj!="undefined"&&labelDispObj!=null){var svc_type="";if(labelDispObj.mobileConfirmationTrackingNumbers.length<1&&labelDispObj.labelDataList.length>0){if(labelDispObj.labelDataList[0].isReturnsLabel!=="Y"&&labelDispObj.labelDataList[0].netChargeAmount!=="0"){svc_type=labelDispObj.labelDataList[0].serviceType}}else{if(labelDispObj.mobileConfirmationTrackingNumbers.length>0){svc_type=labelDispObj.mobileLabelDataList[0].serviceType}}qs+="&ssv_044="+svc_type}}}catch(ex){}}else{_t=xp1_t}}qs+="&_t="+_t;if(type==="B"){qs+="&ssv_013="+getXP1_ConversionPageName()}qs+="&ssv_015="+g_fcl_uuid;if(type==="D"){for(var n in _xp1_qsNameValuePairs){qs+="&"+n+"="+_xp1_qsNameValuePairs[n]}qs+="&ssv_011="+_xp1_random+"&ssv_012="+getReferrer()+"&"+getSSVParameters()}return qs}function sendFailoverDetails(){if((g_failoverList.length>0)&&(!turnOffIM)&&(!testSite)){var script_url=getProtocol()+"://s.xp1.ru4.com/meta"+createFailoverQueryString();var imid="xp1Fail";try{loadScript(imid,script_url)}catch(err){}g_failoverList.length=0}}function createFailoverQueryString(){var receivedPlacements="";var displayedPlacements="";var errCodes="";for(var index=0,max=g_failoverList.length;index<max;index++){var lineItem=g_failoverList[index];receivedPlacements+=(lineItem.xp1Received)?lineItem.xp1Received:"null";receivedPlacements+=(index!=max-1)?"~":"";displayedPlacements+=(lineItem.displayedPlacement)?lineItem.displayedPlacement:"null";displayedPlacements+=(index!=max-1)?"~":"";errCodes+=(lineItem.errCode)?lineItem.errCode:"3";errCodes+=(index!=max-1)?"~":""}var qs="?_o="+_xp1_o;qs+="&_t=failover";qs+="&ssv_075=";qs+=(displayedPlacements!==null&&displayedPlacements!==undefined)?displayedPlacements:"null";qs+="&ssv_015=";qs+=(g_fcl_uuid!==null&&g_fcl_uuid!==undefined)?g_fcl_uuid:"";qs+="&ssv_072=";qs+=(receivedPlacements!==null&&receivedPlacements!==undefined)?receivedPlacements:"null";qs+="&ssv_073=";qs+=(errCodes!==null&&errCodes!==undefined)?errCodes:"3";qs+="&ssv_074=";qs+=(xp1_t!==null&&xp1_t!==undefined)?xp1_t:"";qs+="&ssv_076=";qs+=(testSite==true)?"stg":"s";return qs}function createCVPString(){var cvpQs='{"Sonar_request":{"guestID":"'+g_fcl_uuid+'","guestType":"IM","destination":"FEDEX.COM","touchpoint":"FDXPR","location":"FHP","brand":"","style":"fdx.com-sonar","priorityOnlyFlag":"","productionFlag":"","externalData":"","_o":"37257","_t":"opCo","ssv_012":"fedex.com","ssv_011":"'+_xp1_random+'","ssv_015":"';cvpQs+=g_fcl_uuid;cvpQs+='","ssv_016":"'+getUrlParam("ssv_016")+'",';cvpQs+='"xp_uuid":"';cvpQs+=_xp1_uuid;cvpQs+='"}}';for(var n in _cvp_qsNameValuePairs){cvpQs+="&"+n+"="+_cvp_qsNameValuePairs[n]}return cvpQs}function requestCVPDomain(){if(testSite){return"mnfxuat.epsilon.com/sonar"}else{return"sonar.fedex.com"}}function requestDomain(){if(testSite){return"stg.xp1.ru4.com"}else{return"s.xp1.ru4.com"}}function getProtocol(){var proto=window.location.protocol;if(proto.toLowerCase().indexOf("https")>-1){return"https"}return"http"}function log(tag,view){var stype="B";try{if(view!=="P"){stype="T"}}catch(e){}loadIMScript(stype,tag)}function amILoggedIn(){return !Boolean(g_fcl_uuid===""||g_fcl_uuid===";")}function setIM_Props(obj,objName){try{if(objName){if(objName==="label_data"){logPurchase(obj)}else{if(objName==="wtrk_decisioning"&&(typeof TRAK!=="undefined")&&(typeof TRAK.bean!=="undefined")){var dex=obj.dex_code;var sigsvc=obj.sig_svc_type;var halEligible=obj.hal_eligible;if(TRAK.bean.get("cntry_code")==="US"){processCurrentPage();loadIMScript("D","",{ssv_041:sigsvc,ssv_042:halEligible,ssv_043:dex})}if(dex!==null&&dex!=="DL"&&dex!=="DE"&&dex!=="CA"&&TRAK.bean.get("cntry_code")==="US"){if(halEligible){if(sigsvc!==null&&(sigsvc==3||sigsvc==4)){$("#placement_1").load("/templates/components/includes/us/decision/en/trk_im_msg_sigsvc.html")}else{$("#placement_1").load("/templates/components/includes/us/decision/en/trk_im_msg_hal.html")}}else{$("#placement_1").load("/templates/components/includes/us/decision/en/trk_im_msg_notifications.html")}}}}}}catch(e){}}function checkForDisable(){if(!turnOffIM){try{if(typeof fdx_is_eu!=="undefined"&&typeof fdx_is_disabled!=="undefined"){if(fdx_is_eu&&fdx_is_disabled){turnOffIM=Boolean(fdx_is_eu&&fdx_is_disabled)}}}catch(err){}}}function checkPlacement(element,failover,tmname){tmname=setTimeout(function(event){var p=document.getElementById(element);if(!p){g_Displayed=false;clearTimeout(tmname);setPlacements(failover);var imgFail=new Image();imgFail.src="/images/ascend/shared/headers/corp_logo.gif?testtarget_response_failure"}},maxIMTimeFO)}function getMetaTagValue(metaName){var sreturn="";var m=document.getElementsByTagName("meta");for(var i in m){if(m[i].name===metaName){sreturn=m[i].content;break}}return sreturn}function getUrlParam(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(window.location.href);if(results===null){return""}else{return results[1]}}function setCookie(cookie_name,value,exdays){if(value!==null){var exdate=new Date();exdate.setDate(exdate.getDate()+exdays);var c_value=escape(value)+((exdays===null)?"":"; expires="+exdate.toUTCString());document.cookie=cookie_name+"="+c_value}}function getcookie(cookiename){if(document.cookie.length>0){c_start=document.cookie.indexOf(cookiename+"=");if(c_start!==-1){c_start=c_start+cookiename.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end===-1){c_end=document.cookie.length}return unescape(document.cookie.substring(c_start,c_end))}}return""}function getFlashMovieObject(bagShell){if(navigator.appName.indexOf("Microsoft")!==-1){return window[bagShell]}else{return document[bagShell]}}function setIsContainerReady(){containerReady=true}function getIsContainerReady(){return true}function setflashIsReady(value){isFlashReady=value}function addWindowOnLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!=="function"){window.onload=func}else{window.onload=function(){if(oldonload){oldonload()}func()}}}return{defs:defs,setPlacements:setPlacements,setCVPPlacements:setCVPPlacements,setIM_Props:setIM_Props,getMetaTagValue:getMetaTagValue,loadIMScript:loadIMScript,processCurrentPage:processCurrentPage,log:log,handlePlacementClick:handlePlacementClick,setflashIsReady:setflashIsReady,getcookie:getcookie,setCookie:setCookie,getIsContainerReady:getIsContainerReady,setIsContainerReady:setIsContainerReady}}();function loadScript(id,url,callback){var oScript=document.createElement("script");oScript.language="javascript";oScript.type="text/javascript";oScript.charset="utf-8";oScript.async="true";oScript.id=id;oScript.src=url;if(typeof callback!=="undefined"&&typeof callback==="function"){oScript.onloadDone=false;oScript.onload=function(){if(!oScript.onloadDone){oScript.onloadDone=true;callback()}};oScript.onreadystatechange=function(){if(("loaded"===oScript.readyState||"complete"===oScript.readyState)&&!oScript.onloadDone){oScript.onloadDone=true;callback()}}}var oHead=document.getElementsByTagName("HEAD").item(0);oHead.appendChild(oScript)}function isContainerReady(){return true}function flashReady(value){IM.setflashIsReady(value)}function checkCookie(value){var xp1_uuid=IM.getcookie("xp1_uid");if(!xp1_uuid){IM.setCookie("xp1_uid",value,90)}};