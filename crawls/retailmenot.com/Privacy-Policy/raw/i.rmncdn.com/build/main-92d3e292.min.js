/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/**
 * @license RequireJS text 2.0.0 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*!
* hoverIntent r6 // 2011.02.26 // jQuery 1.5.1+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
*
* hoverIntent is currently available for use in all personal or commercial
* projects under both MIT and GPL licenses. This means that you can choose
* the license that best suits your project, and use it accordingly.
*/

/*
 *
 * jqModal - Minimalist Modaling with jQuery
 *   (http://dev.iceburg.net/jquery/jqModal/)
 *
 * Copyright (c) 2007,2008 Brice Burgess <bhb@iceburg.net>
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * $Version: 03/01/2009 +r14
 */

/**
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

/*! jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */

/*! jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */

/*! jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */

/*! jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.autocomplete.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */

/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 * 
 * Open source under the BSD License. 
 * 
 * Copyright Â© 2008 George McGinley Smith
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
*/

/*
 *
 * TERMS OF USE - EASING EQUATIONS
 * 
 * Open source under the BSD License. 
 * 
 * Copyright Â© 2001 Robert Penner
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
 */

var requirejs,require,define;(function(global){function isFunction(a){return ostring.call(a)==="[object Function]"}function isArray(a){return ostring.call(a)==="[object Array]"}function each(a,b){if(a){var c;for(c=0;c<a.length;c+=1)if(b(a[c],c,a))break}}function eachReverse(a,b){if(a){var c;for(c=a.length-1;c>-1;c-=1)if(b(a[c],c,a))break}}function hasProp(a,b){return a.hasOwnProperty(b)}function eachProp(a,b){var c;for(c in a)if(a.hasOwnProperty(c)&&b(a[c],c))break}function mixin(a,b,c){b&&eachProp(b,function(b,d){if(c||!hasProp(a,d))a[d]=b})}function bind(a,b){return function(){return b.apply(a,arguments)}}function scripts(){return document.getElementsByTagName("script")}function getGlobal(a){if(!a)return a;var b=global;return each(a.split("."),function(a){b=b[a]}),b}function makeContextModuleFunc(a,b,c){return function(){var d=aps.call(arguments,0),e;return c&&isFunction(e=d[d.length-1])&&(e.__requireJsBuild=!0),d.push(b),a.apply(null,d)}}function addRequireMethods(a,b,c){each([["toUrl"],["undef"],["defined","requireDefined"],["specified","requireSpecified"]],function(d){a[d[0]]=makeContextModuleFunc(b[d[1]||d[0]],c)})}function makeError(a,b,c,d){var e=new Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);return e.requireType=a,e.requireModules=d,c&&(e.originalError=c),e}function newContext(a){function b(a){var b,c;for(b=0;a[b];b+=1){c=a[b];if(c===".")a.splice(b,1),b-=1;else if(c===".."){if(b===1&&(a[2]===".."||a[0]===".."))break;b>0&&(a.splice(b-1,2),b-=2)}}}function c(a,c,d){var e=c&&c.split("/"),f=t.map,g=f&&f["*"],h,i,j,k,l,m,n,o;a&&a.charAt(0)==="."&&(c?(t.pkgs[c]?e=[c]:e=e.slice(0,e.length-1),a=e.concat(a.split("/")),b(a),i=t.pkgs[h=a[0]],a=a.join("/"),i&&a===h+"/"+i.main&&(a=h)):a.indexOf("./")===0&&(a=a.substring(2)));if(d&&(e||g)&&f){k=a.split("/");for(l=k.length;l>0;l-=1){n=k.slice(0,l).join("/");if(e)for(m=e.length;m>0;m-=1){j=f[e.slice(0,m).join("/")];if(j){j=j[n];if(j){o=j;break}}}!o&&g&&g[n]&&(o=g[n]);if(o){k.splice(0,l,o),a=k.join("/");break}}}return a}function d(a){isBrowser&&each(scripts(),function(b){if(b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===F.contextName)return b.parentNode.removeChild(b),!0})}function e(a){var b=t.paths[a];if(b&&isArray(b)&&b.length>1)return d(a),b.shift(),F.undef(a),F.require([a]),!0}function f(a,b,d,e){var f=a?a.indexOf("!"):-1,g=null,h=b?b.name:null,i=a,j=!0,k="",l,m,n;return a||(j=!1,a="_@r"+(A+=1)),f!==-1&&(g=a.substring(0,f),a=a.substring(f+1,a.length)),g&&(g=c(g,h,e),m=x[g]),a&&(g?m&&m.normalize?k=m.normalize(a,function(a){return c(a,h,e)}):k=c(a,h,e):(k=c(a,h,e),l=y[k],l||(l=F.nameToUrl(a,null,b),y[k]=l))),n=g&&!m&&!d?"_unnormalized"+(B+=1):"",{prefix:g,name:k,parentMap:b,unnormalized:!!n,url:l,originalName:i,isDefine:j,id:(g?g+"!"+k:k)+n}}function g(a){var b=a.id,c=u[b];return c||(c=u[b]=new F.Module(a)),c}function h(a,b,c){var d=a.id,e=u[d];hasProp(x,d)&&(!e||e.defineEmitComplete)?b==="defined"&&c(x[d]):g(a).on(b,c)}function i(a,b){var c=a.requireModules,d=!1;b?b(a):(each(c,function(b){var c=u[b];c&&(c.error=a,c.events.error&&(d=!0,c.emit("error",a)))}),d||req.onError(a))}function j(){globalDefQueue.length&&(apsp.apply(w,[w.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function k(a,b,c){var d=a&&a.map,e=makeContextModuleFunc(c||F.require,d,b);return addRequireMethods(e,F,d),e.isBrowser=isBrowser,e}function l(a){delete u[a],each(C,function(b,c){if(b.map.id===a)return C.splice(c,1),b.defined||(F.waitCount-=1),!0})}function m(a,b){var c=a.map.id,d=a.depMaps,e;if(!a.inited)return;return b[c]?a:(b[c]=!0,each(d,function(a){var d=a.id,f=u[d];if(!f)return;return!f.inited||!f.enabled?(e=null,delete b[c],!0):e=m(f,b)}),e)}function n(a,b,c){var d=a.map.id,e=a.depMaps;if(!a.inited||!a.map.isDefine)return;return b[d]?x[d]:(b[d]=a,each(e,function(e){var f=e.id,g=u[f],h;if(G[f])return;if(g){if(!g.inited||!g.enabled){c[d]=!0;return}h=n(g,b,c),c[f]||a.defineDepById(f,h)}}),a.check(!0),x[d])}function o(a){a.check()}function p(){var a=t.waitSeconds*1e3,b=a&&F.startTime+a<(new Date).getTime(),c=[],f=!1,g=!0,h,j,k,l;if(D)return;D=!0,eachProp(u,function(a){h=a.map,j=h.id;if(!a.enabled)return;if(!a.error)if(!a.inited&&b)e(j)?(l=!0,f=!0):(c.push(j),d(j));else if(!a.inited&&a.fetched&&h.isDefine){f=!0;if(!h.prefix)return g=!1}});if(b&&c.length)return k=makeError("timeout","Load timeout for modules: "+c,null,c),k.contextName=F.contextName,i(k);g&&(each(C,function(a){if(a.defined)return;var b=m(a,{}),c={};b&&(n(b,c,{}),eachProp(c,o))}),eachProp(u,o)),(!b||l)&&f&&(isBrowser||isWebWorker)&&!H&&(H=setTimeout(function(){H=0,p()},50)),D=!1}function q(a){g(f(a[0],null,!0)).init(a[1],a[2])}function r(a,b,c,d){a.detachEvent&&!isOpera?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function s(a){var b=a.currentTarget||a.srcElement;return r(b,F.onScriptLoad,"load","onreadystatechange"),r(b,F.onScriptError,"error"),{node:b,id:b&&b.getAttribute("data-requiremodule")}}var t={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{}},u={},v={},w=[],x={},y={},z={},A=1,B=1,C=[],D,E,F,G,H;return G={require:function(a){return k(a)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports=x[a.map.id]={}},module:function(a){return a.module={id:a.map.id,uri:a.map.url,config:function(){return t.config&&t.config[a.map.id]||{}},exports:x[a.map.id]}}},E=function(a){this.events=v[a.id]||{},this.map=a,this.shim=t.shim[a.id],this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},E.prototype={init:function(a,b,c,d){d=d||{};if(this.inited)return;this.factory=b,c?this.on("error",c):this.events.error&&(c=bind(this,function(a){this.emit("error",a)})),each(a,bind(this,function(a,b){typeof a=="string"&&(a=f(a,this.map.isDefine?this.map:this.map.parentMap,!1,!0),this.depMaps.push(a));var d=G[a.id];if(d){this.depExports[b]=d(this);return}this.depCount+=1,h(a,"defined",bind(this,function(a){this.defineDep(b,a),this.check()})),c&&h(a,"error",c)})),this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check()},defineDepById:function(a,b){var c;return each(this.depMaps,function(b,d){if(b.id===a)return c=d,!0}),this.defineDep(c,b)},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(this.fetched)return;this.fetched=!0,F.startTime=(new Date).getTime();var a=this.map;a.prefix?this.callPlugin():this.shim?k(this,!0)(this.shim.deps||[],bind(this,function(){this.load()})):this.load()},load:function(){var a=this.map.url;z[a]||(z[a]=!0,F.load(this.map.id,a))},check:function(a){if(!this.enabled)return;var b=this.map.id,c=this.depExports,d=this.exports,e=this.factory,f,g;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(e)){if(this.events.error)try{d=F.execCb(b,e,c,d)}catch(h){f=h}else d=F.execCb(b,e,c,d);this.map.isDefine&&(g=this.module,g&&g.exports!==undefined&&g.exports!==this.exports?d=g.exports:d===undefined&&this.usingExports&&(d=this.exports));if(f)return f.requireMap=this.map,f.requireModules=[this.map.id],f.requireType="define",i(this.error=f)}else d=e;this.exports=d,this.map.isDefine&&!this.ignore&&(x[b]=d,req.onResourceLoad&&req.onResourceLoad(F,this.map,this.depMaps)),delete u[b],this.defined=!0,F.waitCount-=1,F.waitCount===0&&(C=[])}this.defining=!1,a||this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var a=this.map,b=a.id,d=f(a.prefix,null,!1,!0);h(d,"defined",bind(this,function(d){var e=this.map.name,g=this.map.parentMap?this.map.parentMap.name:null,j,m,n;if(this.map.unnormalized){d.normalize&&(e=d.normalize(e,function(a){return c(a,g,!0)})||""),m=f(a.prefix+"!"+e),h(m,"defined",bind(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),n=u[m.id],n&&(this.events.error&&n.on("error",bind(this,function(a){this.emit("error",a)})),n.enable());return}j=bind(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),j.error=bind(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],eachProp(u,function(a){a.map.id.indexOf(b+"_unnormalized")===0&&l(a.map.id)}),i(a)}),j.fromText=function(a,b){var c=useInteractive;c&&(useInteractive=!1),req.exec(b),c&&(useInteractive=!0),F.completeLoad(a)},d.load(a.name,k(a.parentMap,!0,function(a,b){return F.require(a,b)}),j,t)})),F.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){this.enabled=!0,this.waitPushed||(C.push(this),F.waitCount+=1,this.waitPushed=!0),each(this.depMaps,bind(this,function(a){var b=a.id,c=u[b];!G[b]&&c&&!c.enabled&&F.enable(a,this)})),eachProp(this.pluginMaps,bind(this,function(a){var b=u[a.id];b&&!b.enabled&&F.enable(a,this)})),this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){each(this.events[a],function(a){a(b)}),a==="error"&&delete this.events[a]}},F={config:t,contextName:a,registry:u,defined:x,urlMap:y,urlFetched:z,waitCount:0,defQueue:w,Module:E,makeModuleMap:f,configure:function(a){a.baseUrl&&a.baseUrl.charAt(a.baseUrl.length-1)!=="/"&&(a.baseUrl+="/");var b=t.paths,c=t.pkgs,d=t.shim,e=t.map||{};mixin(t,a,!0),mixin(b,a.paths,!0),t.paths=b,a.map&&(mixin(e,a.map,!0),t.map=e),a.shim&&(eachProp(a.shim,function(a,b){isArray(a)&&(a={deps:a}),a.exports&&!a.exports.__buildReady&&(a.exports=F.makeShimExports(a.exports)),d[b]=a}),t.shim=d),a.packages&&(each(a.packages,function(a){var b;a=typeof a=="string"?{name:a}:a,b=a.location,c[a.name]={name:a.name,location:b||a.name,main:(a.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),t.pkgs=c),(a.deps||a.callback)&&F.require(a.deps||[],a.callback)},makeShimExports:function(a){var b;return typeof a=="string"?(b=function(){return getGlobal(a)},b.exports=a,b):function(){return a.apply(global,arguments)}},requireDefined:function(a,b){return hasProp(x,f(a,b,!1,!0).id)},requireSpecified:function(a,b){return a=f(a,b,!1,!0).id,hasProp(x,a)||hasProp(u,a)},require:function(b,c,d,e){var h,k,l,m,n;if(typeof b=="string")return isFunction(c)?i(makeError("requireargs","Invalid require call"),d):req.get?req.get(F,b,c):(h=b,e=c,l=f(h,e,!1,!0),k=l.id,hasProp(x,k)?x[k]:i(makeError("notloaded",'Module name "'+k+'" has not been loaded yet for context: '+a)));d&&!isFunction(d)&&(e=d,d=undefined),c&&!isFunction(c)&&(e=c,c=undefined),j();while(w.length){n=w.shift();if(n[0]===null)return i(makeError("mismatch","Mismatched anonymous define() module: "+n[n.length-1]));q(n)}return m=g(f(null,e)),m.init(b,c,d,{enabled:!0}),p(),F.require},undef:function(a){var b=f(a,null,!0),c=u[a];delete x[a],delete y[a],delete z[b.url],delete v[a],c&&(c.events.defined&&(v[a]=c.events),l(a))},enable:function(a,b){var c=u[a.id];c&&g(a).enable()},completeLoad:function(a){var b=t.shim[a]||{},c=b.exports&&b.exports.exports,d,f,g;j();while(w.length){f=w.shift();if(f[0]===null){f[0]=a;if(d)break;d=!0}else f[0]===a&&(d=!0);q(f)}g=u[a];if(!d&&!x[a]&&g&&!g.inited){if(t.enforceDefine&&(!c||!getGlobal(c))){if(e(a))return;return i(makeError("nodefine","No define call for "+a,null,[a]))}q([a,b.deps||[],b.exports])}p()},toUrl:function(a,b){var c=a.lastIndexOf("."),d=null;return c!==-1&&(d=a.substring(c,a.length),a=a.substring(0,c)),F.nameToUrl(a,d,b)},nameToUrl:function(a,b,d){var e,f,g,h,i,j,k,l,m;a=c(a,d&&d.id,!0);if(req.jsExtRegExp.test(a))l=a+(b||"");else{e=t.paths,f=t.pkgs,i=a.split("/");for(j=i.length;j>0;j-=1){k=i.slice(0,j).join("/"),g=f[k],m=e[k];if(m){isArray(m)&&(m=m[0]),i.splice(0,j,m);break}if(g){a===g.name?h=g.location+"/"+g.main:h=g.location,i.splice(0,j,h);break}}l=i.join("/")+(b||".js"),l=(l.charAt(0)==="/"||l.match(/^[\w\+\.\-]+:/)?"":t.baseUrl)+l}return t.urlArgs?l+((l.indexOf("?")===-1?"?":"&")+t.urlArgs):l},load:function(a,b){req.load(F,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if(a.type==="load"||readyRegExp.test((a.currentTarget||a.srcElement).readyState)){interactiveScript=null;var b=s(a);F.completeLoad(b.id)}},onScriptError:function(a){var b=s(a);if(!e(b.id))return i(makeError("scripterror","Script error",a,[b.id]))}}}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(a){if(a.readyState==="interactive")return interactiveScript=a}),interactiveScript)}var version="2.0.1",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,ostring=Object.prototype.toString,ap=Array.prototype,aps=ap.slice,apsp=ap.splice,isBrowser=typeof window!="undefined"&&!!navigator&&!!document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1,req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(a,b,c,d){var e=defContextName,f,g;return!isArray(a)&&typeof a!="string"&&(g=a,isArray(b)?(a=b,b=c,c=d):a=[]),g&&g.context&&(e=g.context),f=contexts[e],f||(f=contexts[e]=req.s.newContext(e)),g&&f.configure(g),f.require(a,b,c)},req.config=function(a){return req(a)},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),addRequireMethods(req,contexts[defContextName]),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=function(a){throw a},req.load=function(a,b,c){var d=a&&a.config||{},e;if(isBrowser)return e=d.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),e.type=d.scriptType||"text/javascript",e.charset="utf-8",e.setAttribute("data-requirecontext",a.contextName),e.setAttribute("data-requiremodule",b),e.attachEvent&&!(e.attachEvent.toString&&e.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,e.attachEvent("onreadystatechange",a.onScriptLoad)):(e.addEventListener("load",a.onScriptLoad,!1),e.addEventListener("error",a.onScriptError,!1)),e.src=c,currentlyAddingScript=e,baseElement?head.insertBefore(e,baseElement):head.appendChild(e),currentlyAddingScript=null,e;isWebWorker&&(importScripts(c),a.completeLoad(b))},isBrowser&&eachReverse(scripts(),function(a){head||(head=a.parentNode),dataMain=a.getAttribute("data-main");if(dataMain)return cfg.baseUrl||(src=dataMain.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath,dataMain=mainScript.replace(jsSuffixRegExp,"")),cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain],!0}),define=function(a,b,c){var d,e;typeof a!="string"&&(c=b,b=a,a=null),isArray(b)||(c=b,b=[]),!b.length&&isFunction(c)&&c.length&&(c.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(c.length===1?["require"]:["require","exports","module"]).concat(b)),useInteractive&&(d=currentlyAddingScript||getInteractiveScript(),d&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")])),(e?e.defQueue:globalDefQueue).push([a,b,c])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("requireLib",function(){}),define("carousel2",["jquery"],function(a){return function(b){var c=b.dom||a(".carousel2");if(!c.length)return;var d=c.find("ul"),e=b.shown||3,f=c.find("li").length,g=c.find("li:eq(1)").outerWidth(),h,i=c.find(".js-carousel-button").on("click",function(b){b.preventDefault();var c=a(this),j=c.filter(".js-carousel-next").length?-1:1,k;if(h)return;h=window.setTimeout(function(){h=!1},500),k=parseInt(d.css("marginLeft"),10)+j*g*e,i.removeClass("hidden"),(k>=0||k<=g*(f-1-(f%e||e))*-1)&&c.addClass("hidden"),d.css("marginLeft",k)});f<=e&&i.addClass("hidden")}}),define("coupon-loader",["jquery"],function(a){return CouponLoader=function(a,b){this.domRef=a,this.fullArray=new Array,this.visibleIndex=0,typeof b!="undefined"?this.increment=b:this.increment=5,this.initialize()},CouponLoader.prototype={initialize:function(){this.group(),this.events(),this.hideCoupons(),this.showBar()},group:function(){var b=this,c=new Array,d=a(".offer_list li").length;a(".offer_list li").each(function(e,f){e>=b.increment&&((e+1)%b.increment!=0&&e+1!=d?c.push(a(this)):(c.push(a(this)),b.fullArray.push(c),c=new Array)),e+1==d&&a(this).addClass("last")})},events:function(){var b=this;a(".holiday-showmore",this.domRef).on("click.holiday",function(a){a.preventDefault();for(var c=0;c<b.fullArray[b.visibleIndex].length;c++)b.fullArray[b.visibleIndex][c].fadeIn("slow");b.visibleIndex++,b.visibleIndex==b.fullArray.length&&(b.hideBar(),b.showLink())})},hideCoupons:function(){var b=this;a(".offer_list li").each(function(c,d){c>=b.increment&&a(this).hide()})},showBar:function(){a(".holiday-showmore",this.domRef).css({display:"block"}).show()},hideBar:function(){a(".holiday-showmore",this.domRef).fadeOut("slow")},showLink:function(){a(".holiday-morecoupons",this.domRef).css({display:"block"})}},CouponLoader}),define("track",["jquery"],function(a){var b=window._gaq,c=a(document),d=function(){c.on("click",".track",e)},e=function(b){var c=a(this),d={category:c.data("trackCategory"),action:c.data("trackAction"),label:f(c)};g(d)},f=function(a){var b=a[0],c=a.attr("data-track-label");return c?c:!b.href||a.attr("href").indexOf("http")!==0&&a.attr("href").indexOf("mailto")!==0?b.pathname||location.pathname:b.href},g=function(a){if(b&&a.category&&a.action&&a.label){var c=["_track"+(a.type||"Event"),a.category,a.action,a.label,a.hasOwnProperty("value")?a.value:undefined,a.hasOwnProperty("noninteraction")?a.noninteraction:undefined];b.push(c)}};return a(d),g}),define("third-party/mustache",[],function(){var a=function(){var a=function(){};return a.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(a,b,c,d){d||(this.context=b,this.buffer=[]);if(!this.includes("",a)){if(d)return a;this.send(a);return}a=this.render_pragmas(a);var e=this.render_section(a,b,c);if(d)return this.render_tags(e,b,c,d);this.render_tags(e,b,c,d)},send:function(a){a!=""&&this.buffer.push(a)},render_pragmas:function(a){if(!this.includes("%",a))return a;var b=this,c=new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag);return a.replace(c,function(a,c,d){if(!b.pragmas_implemented[c])throw{message:"This implementation of mustache doesn't understand the '"+c+"' pragma"};b.pragmas[c]={};if(d){var e=d.split("=");b.pragmas[c][e[0]]=e[1]}return""})},render_partial:function(a,b,c){a=this.trim(a);if(!c||c[a]===undefined)throw{message:"unknown_partial '"+a+"'"};return typeof b[a]!="object"?this.render(c[a],b,c,!0):this.render(c[a],b[a],c,!0)},render_section:function(a,b,c){if(!this.includes("#",a)&&!this.includes("^",a))return a;var d=this,e=new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg");return a.replace(e,function(a,e,f,g){var h=d.find(f,b);if(e=="^")return!h||d.is_array(h)&&h.length===0?d.render(g,b,c,!0):"";if(e=="#")return d.is_array(h)?d.map(h,function(a){return d.render(g,d.create_context(a),c,!0)}).join(""):d.is_object(h)?d.render(g,d.create_context(h),c,!0):typeof h=="function"?h.call(b,g,function(a){return d.render(a,b,c,!0)}):h?d.render(g,b,c,!0):""})},render_tags:function(a,b,c,d){var e=this,f=function(){return new RegExp(e.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+e.ctag+"+","g")},g=f(),h=function(a,d,h){switch(d){case"!":return"";case"=":return e.set_delimiters(h),g=f(),"";case">":return e.render_partial(h,b,c);case"{":return e.find(h,b);default:return e.escape(e.find(h,b))}},i=a.split("\n");for(var j=0;j<i.length;j++)i[j]=i[j].replace(g,h,this),d||this.send(i[j]);if(d)return i.join("\n")},set_delimiters:function(a){var b=a.split(" ");this.otag=this.escape_regex(b[0]),this.ctag=this.escape_regex(b[1])},escape_regex:function(a){if(!arguments.callee.sRE){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+b.join("|\\")+")","g")}return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,b){function c(a){return a===!1||a===0||a}a=this.trim(a);var d;return c(b[a])?d=b[a]:c(this.context[a])&&(d=this.context[a]),typeof d=="function"?d.apply(b):d!==undefined?d:""},includes:function(a,b){return b.indexOf(this.otag+a)!=-1},escape:function(a){return a=String(a===null?"":a),a.replace(/&(?!\w+;)|["<>\\]/g,function(a){switch(a){case"&":return"&amp;";case"\\":return"\\\\";case'"':return'"';case"<":return"&lt;";case">":return"&gt;";default:return a}})},create_context:function(a){if(this.is_object(a))return a;var b=".";this.pragmas["IMPLICIT-ITERATOR"]&&(b=this.pragmas["IMPLICIT-ITERATOR"].iterator);var c={};return c[b]=a,c},is_object:function(a){return a&&typeof a=="object"},is_array:function(a){return Object.prototype.toString.call(a)==="[object Array]"},trim:function(a){return a.replace(/^\s*|\s*$/g,"")},map:function(a,b){if(typeof a.map=="function")return a.map(b);var c=[],d=a.length;for(var e=0;e<d;e++)c.push(b(a[e]));return c}},{name:"mustache.js",version:"0.3.0",to_html:function(b,c,d,e){var f=new a;e&&(f.send=e),f.render(b,c,d);if(!e)return f.buffer.join("\n")}}}();return a}),define("godark",["jquery"],function(a){return function(){a(".offer_detail").siblings(".detail:hidden").show(),a(".offer_detail").hide(),a(".v3redemption").siblings(".detail:hidden").show(),a(".v3redemption").hide(),a(".offer .active").removeClass("active")}}),define("social",["track","jquery"],function(a,b){var c,d,e=window.location,f=window.document,g=function(a,b){if(!a)return;var c=a.split("#");if(c.length===1)return;var d=decodeURI(c[1]);b+="=";var e=d.split("&");for(var f=0,g;g=e[f];++f)if(g.indexOf(b)===0)return unescape(g.split("=")[1]);return},h={},i={fb:{url:f.location.protocol+"//connect.facebook.net/en_US/all.js",init:function(){window.fbAsyncInit=i.fb.onload;var a=f.createElement("div");a.id="fb-root",f.body.appendChild(a)},onload:function(){c=window.FB,c&&(c.init({appId:wsm.fb.appid,channelUrl:"//"+e.hostname+"/channel.php",status:!0,cookie:!0,xfbml:!0}),c.Event.subscribe("edge.create",function(c){a({type:"Social",category:"facebook",action:"like",label:c}),b(document).trigger("event.analytics",{sh_t:"facebook|like"})}),c.Event.subscribe("edge.remove",function(c){a({type:"Social",category:"facebook",action:"unlike",label:c}),b(document).trigger("event.analytics",{sh_t:"facebook|unlike"})}),c.Event.subscribe("message.send",function(c){a({type:"Social",category:"facebook",action:"send",label:c}),b(document).trigger("event.analytics",{sh_t:"facebook|send"})}))},parse:function(a){c&&c.XFBML.parse(a)}},plusOne:{url:"https://apis.google.com/js/plusone.js",parse:function(a){gapi&&gapi.plusone.go(a)}},twitter:{url:"//platform.twitter.com/widgets.js",loaded:function(){var c=window.twttr;c&&c.events.bind("tweet",function(c){c&&c.target&&c.target.nodeName=="IFRAME"&&(a({type:"Social",category:"twitter",action:"tweet",label:g(c.target.src,"url")}),b(document).trigger("event.analytics",{sh_t:"twitter|tweet"}))})},parse:function(a){window.twttr&&window.twttr.widgets.load()}}},j=function(){var a;for(var b in i)i.hasOwnProperty(b)&&function(a){a.init&&a.init(),require([a.url],function(){a.loaded&&a.loaded()})}(i[b])};return h.parse=function(a){for(var b in i)i.hasOwnProperty(b)&&i[b].parse&&i[b].parse(a)},b(j),h}),define("text",["module"],function(a){var b=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],c=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,d=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,e=typeof location!="undefined"&&location.href,f=e&&location.protocol&&location.protocol.replace(/\:/,""),g=e&&location.hostname,h=e&&(location.port||undefined),i=[],j=a.config(),k,l;return k={version:"2.0.0",strip:function(a){if(a){a=a.replace(c,"");var b=a.match(d);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var a,c,d;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(c=0;c<3;c++){d=b[c];try{a=new ActiveXObject(d)}catch(e){}if(a){b=[d];break}}return a},parseName:function(a){var b=!1,c=a.indexOf("."),d=a.substring(0,c),e=a.substring(c+1,a.length);return c=e.indexOf("!"),c!==-1&&(b=e.substring(c+1,e.length),b=b==="strip",e=e.substring(0,c)),{moduleName:d,ext:e,strip:b}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e=k.xdRegExp.exec(a),f,g,h;return e?(f=e[2],g=e[3],g=g.split(":"),h=g[1],g=g[0],(!f||f===b)&&(!g||g===c)&&(!h&&!g||h===d)):!0},finishLoad:function(a,b,c,d){c=b?k.strip(c):c,j.isBuild&&(i[a]=c),d(c)},load:function(a,b,c,d){if(d.isBuild&&!d.inlineText){c();return}j.isBuild=d.isBuild;var i=k.parseName(a),l=i.moduleName+"."+i.ext,m=b.toUrl(l),n=j.useXhr||k.useXhr;!e||n(m,f,g,h)?k.get(m,function(b){k.finishLoad(a,i.strip,b,c)},function(a){c.error&&c.error(a)}):b([l],function(a){k.finishLoad(i.moduleName+"."+i.ext,i.strip,a,c)})},write:function(a,b,c,d){if(i.hasOwnProperty(b)){var e=k.jsEscape(i[b]);c.asModule(a+"!"+b,"define(function () { return '"+e+"';});\n")}},writeFile:function(a,b,c,d,e){var f=k.parseName(b),g=f.moduleName+"."+f.ext,h=c.toUrl(f.moduleName+"."+f.ext)+".js";k.load(g,c,function(b){var c=function(a){return d(h,a)};c.asModule=function(a,b){return d.asModule(a,h,b)},k.write(a,g,c,e)},e)}},typeof process!="undefined"&&process.versions&&!!process.versions.node?(l=require.nodeRequire("fs"),k.get=function(a,b){var c=l.readFileSync(a,"utf8");c.indexOf("﻿")===0&&(c=c.substring(1)),b(c)}):k.createXhr()?k.get=function(a,b,c){var d=k.createXhr();d.open("GET",a,!0),j.onXhr&&j.onXhr(d,a),d.onreadystatechange=function(e){var f,g;d.readyState===4&&(f=d.status,f>399&&f<600?(g=new Error(a+" HTTP status: "+f),g.xhr=d,c(g)):b(d.responseText))},d.send(null)}:typeof Packages!="undefined"&&(k.get=function(a,b){var c="utf-8",d=new java.io.File(a),e=java.lang.System.getProperty("line.separator"),f=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(d),c)),g,h,i="";try{g=new java.lang.StringBuffer,h=f.readLine(),h&&h.length()&&h.charAt(0)===65279&&(h=h.substring(1)),g.append(h);while((h=f.readLine())!==null)g.append(e),g.append(h);i=String(g.toString())}finally{f.close()}b(i)}),k}),define("text!tmpl/offer-detail.tmpl",[],function(){return'<div class="offer_detail {{extraClass}}">\n    <div class="detail_close"><span>X</span></div>\n    {{>main}}\n    <div class="sharing">\n        <h3>\n            <span>Share this deal</span>\n        </h3>\n        <dl>\n            <dt class="share_facebook">Facebook</dt>\n            <dd><fb:like href="{{url}}" layout="button_count" width="150" show_faces="false" font="trebuchet ms" xmlns:fb="http://www.facebook.com/2008/fbml"></fb:like></dd>\n            <dt class="share_twitter">Twitter</dt>\n            <dd><a href="http://twitter.com/share" class="twitter-share-button" data-url="{{url}}" data-text="{{text}}" data-via="retailmenot">Tweet</a></dd>\n        </dl>\n    </div>\n</div>\n'}),define("text!tmpl/offer-detail-test.tmpl",[],function(){return'<div class="offer_detail {{extraClass}}">\n    <div class="detail_close"><span>X</span></div>\n    <div class="sharing">\n        <h3>\n            <span>Share this deal</span>\n        </h3>\n        <dl>\n            <dt class="share_facebook">Facebook</dt>\n            <dd><fb:like href="{{url}}" layout="button_count" width="150" data-send="true" show_faces="false" font="trebuchet ms" xmlns:fb="http://www.facebook.com/2008/fbml"></fb:like></dd>\n            <dt class="share_twitter">Twitter</dt>\n            <dd><a href="http://twitter.com/share" class="twitter-share-button" data-url="{{url}}" data-text="{{text}}">Tweet</a></dd>\n            <dt class="share_google">Google</dt>\n            <dd><div class="g-plusone" data-size="medium" data-count="true" data-href="{{url}}"></div></dd>\n        </dl>\n    </div>\n    {{>main}}\n</div>\n'}),define("text!tmpl/share.tmpl",[],function(){return'<div class="savings">\n    <h3>\n        <span>Copy and share this link</span>\n    </h3>\n    <form>\n        <input type="text" value="{{url}}" class="shareUrl selectAll" readonly="readonly" />\n    </form>\n</div>\n'}),define("text!tmpl/share-test.tmpl",[],function(){return'<div class="savings">\n    <h3>\n        <span>Copy and share this link</span>\n    </h3>\n    <form>\n        <input type="text" value="{{url}}" class="shareUrl selectAll track" data-track-category="Share" data-track-action="offerurl" data-track-label="{{url}}" readonly="readonly" />\n    </form>\n</div>\n'}),define("share",["jquery","track","third-party/mustache","godark","social","text!tmpl/offer-detail.tmpl","text!tmpl/offer-detail-test.tmpl","text!tmpl/share.tmpl","text!tmpl/share-test.tmpl"],function(a,b,c,d,e,f,g,h,i){var j=function(){a(document).on("click",".shareTrigger",function(b){b.preventDefault();var c=a(b.target),e=c.closest(".offer");c.hasClass("active")&&!e.hasClass("stage")?d():e.trigger("showShare")}).on("showShare",".offer",k).on("click.selectAll",".shareUrl",function(a){this.select()})},k=function(b){var j=b.target,k=a(j),l="http://www.retailmenot.com/view/"+k.data("storedomain")+"#c"+k.data("offerid"),m=k.data("storedomain")+" "+a.trim(k.find(".title h3").text())+" #NeverPayRetail ";d(),k.find(".shareTrigger").addClass("active"),k.hasClass("stage")?(a(".share-wrapper").remove(),k.closest(".stage").append(c.to_html(g,{extraClass:"share_detail",url:l,text:m},{main:h})),a(".stage .share_detail").wrap('<div class="share-wrapper"></div>'),a(".stage .share_detail .detail_close").on("click",function(){a(this).closest(".share-wrapper").remove()})):k.parents().hasClass("offerpage")?(k.find(".title a").length?m="Another great deal found on @RetailMeNot. "+k.data("storename")+" "+a.trim(k.find(".title a").text()):m="Another great deal found on @RetailMeNot. "+k.data("storename")+" "+a.trim(k.find(".title").text()),l="http://www.retailmenot.com/coupon/"+k.data("storedomain")+"/"+k.data("offerid")+"-"+k.data("titleslug"),k.append(c.to_html(g,{extraClass:"share_detail offer_test",url:l,text:m},{main:i}))):k.append(c.to_html(f,{extraClass:"share_detail",url:l,text:m},{main:h})),e.parse(j)};a(j)}),define("holiday",["jquery","carousel2","share"],function(a,b){var c=function(){this.soundIcon=a("#octonovemcember .audio"),this.countdownInterval=0,this.reveal=a("body").hasClass("holiday-reveal"),this.bestDealsTab,this.bestDealsList,this.previousDealsTab,this.previousDealsList,this.initialize()};return c.prototype={initialize:function(){this.createSoundEffect(),this.createFAQ(),this.startCountdown(),this.holidayTabs()},holidayTabs:function(){if(a(".section-header.best-deals").length&&a(".section-header.previous-deals").length){var b=this;this.bestDealsTab=a(".section-header.best-deals"),this.bestDealsList=a(".best-deals-list"),this.previousDealsTab=a(".section-header.previous-deals"),this.previousDealsList=a(".previous-deals-list"),this.previousDealsList.hide(),this.bestDealsTab.on("click.holiday",function(){b.bestDealsTab.addClass("active"),b.bestDealsList.show(),b.previousDealsTab.removeClass("active"),b.previousDealsList.hide()}),this.previousDealsTab.on("click.holiday",function(){b.bestDealsTab.removeClass("active"),b.bestDealsList.hide(),b.previousDealsTab.addClass("active"),b.previousDealsList.show()})}},startCountdown:function(){if(!a("body").hasClass("holiday-reveal")&&a(".countdown-wrapper .timer").length==0)return!1;var b=this.padZeros(a("#holiday-reveal .timer .hours .value span").html(),2),c=this.padZeros(a("#holiday-reveal .timer .minutes .value span").html(),2);c>59&&(c=59),a("#holiday-reveal .timer .hours .value span").html(b),a("#holiday-reveal .timer .minutes .value span").html(c);var d=this;this.countdownInterval=setInterval(function(){d.updateCountdown(d)},6e4)},updateCountdown:function(b){var b=this;if(a("body").hasClass("holiday-reveal"))var c=0,d=parseInt(a("#holiday-reveal .timer .hours .value span").html(),10),e=parseInt(a("#holiday-reveal .timer .minutes .value span").html(),10);else var c=parseInt(a(".countdown-wrapper .timer .days .value span").html(),10),d=parseInt(a(".countdown-wrapper .timer .hours .value span").html(),10),e=parseInt(a(".countdown-wrapper .timer .minutes .value span").html(),10);var f=e-1,g=d,h=c;f===-1&&(f=59,g-=1,g===-1&&(g=23,h-=1,h===-1&&(h="00",g="00",f="00"))),f>59&&(f=59);var i=a(".timer .days .value span");c!=h?i.stop().animate({opacity:0},1e3,"easeOutCubic",function(){i.html(b.padZeros(h,2)),i.stop().animate({opacity:1},1e3,"easeOutCubic")}):i.html(b.padZeros(h,2));var j=a(".timer .hours .value span");d!=g?j.stop().animate({opacity:0},1e3,"easeOutCubic",function(){j.html(b.padZeros(g,2)),j.stop().animate({opacity:1},1e3,"easeOutCubic")}):j.html(b.padZeros(g,2));var k=a(".timer .minutes .value span");e!=f?k.stop().animate({opacity:0},1e3,"easeOutCubic",function(){k.html(b.padZeros(f,2)),k.stop().animate({opacity:1},1e3,"easeOutCubic")}):k.html(b.padZeros(f,2));if(parseInt(h,10)==0&&parseInt(g,10)==0&&parseInt(f,10)==0){var b=this;setTimeout(function(){a("body").hasClass("holiday-reveal")?b.revealNewOffer():b.countdownCompletionAnimation()},3e3)}},revealNewOffer:function(){a("#holiday-reveal").trigger("onOfferCountdownComplete.holiday")},padZeros:function(a,b){var c=String(a);while(c.length<b)c="0"+c;return c},countdownCompletionAnimation:function(){clearInterval(this.countdownInterval);var b=a("#holiday-top .countdown-wrapper h2");b.stop().animate({opacity:0},1e3,"easeOutCubic",function(){b.html("Happy OctoNovemCember!"),b.stop().delay(500).animate({opacity:1},3e3,"easeOutCubic",function(){setTimeout(function(){location.reload()},5e3)})}),a(".timer .days, .timer .hours, .timer .minutes").stop().animate({opacity:0},500,"easeOutCubic",function(){a(".timer").stop().css({position:"relative"}).animate({opacity:0,top:"30px"},1500,"easeInOutCubic")})},createSoundEffect:function(){var a=this;require(["/gui/scripts/soundmanager2.js"],function(){soundManager.debugMode=!1,soundManager.setup({url:"/gui/swf/",onready:function(){soundManager.createSound({id:"OctoNovemCember",url:"/gui/sound/octonovemcember.mp3",autoLoad:!0,autoPlay:!1,debugMode:!1,onload:function(){},volume:50})}}),a.soundIcon.on("click",function(a){a.preventDefault(),soundManager.play("OctoNovemCember")})})},createFAQ:function(){a(".faq-main").on("click",function(b){b.preventDefault(),a(this).hasClass("open")?(a(this).removeClass("open"),a(this).next("ul").slideUp("slow")):(a(this).addClass("open"),a(this).next("ul").slideDown("slow"))}),a(".faq-list a").on("click",function(b){b.preventDefault(),a(this).hasClass("open")?(a(this).removeClass("open"),a(this).next("p").slideUp("slow")):(a(this).addClass("open"),a(this).next("p").slideDown("slow"))})}},c}),define("third-party/json",[],function(){var JSON;return JSON||(JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),JSON}),define("storage",["third-party/json"],function(a){var b=!!window.localStorage||!!window.sessionStorage;if(b)try{window.sessionStorage.setItem("_hasSupport","test"),window.sessionStorage.removeItem("_hasSupport")}catch(c){b=!1}if(!b){var d=function(b){function c(a,b,c){var d,e;c?(d=new Date,d.setTime(d.getTime()+c*24*60*60*1e3),e="; expires="+d.toGMTString()):e="",document.cookie=a+"="+b+e+"; path=/"}function d(a){var b=a+"=",c=document.cookie.split(";"),d,e;for(d=0;d<c.length;d++){e=c[d];while(e.charAt(0)==" ")e=e.substring(1,e.length);if(e.indexOf(b)===0)return e.substring(b.length,e.length)}return null}function e(d){d=a.stringify(d),b=="session"?window.name=d:c("localStorage",d,365)}function f(){b=="session"?window.name="":c("localStorage","",365)}function g(){var c=b=="session"?window.name:d("localStorage");return c?a.parse(c):{}}var h=g();return{length:0,clear:function(){h={},this.length=0,f()},getItem:function(a){return h[a]===undefined?null:h[a]},key:function(a){var b=0;for(var c in h){if(b==a)return c;b++}return null},removeItem:function(a){delete h[a],this.length--,e(h)},setItem:function(a,b){h[a]=b+"",this.length++,e(h)}}};window.localStorage=new d("local"),window.sessionStorage=new d("session")}var e=function(b){var c=window[b+"Storage"],d=function(b,d){c.setItem(b,a.stringify(d))},e=function(b){var d=c.getItem(b);try{return a.parse(d)}catch(e){return d}},f={};return f.prototype=c,f.getItem=e,f.setItem=d,f};return{local:b?new e("local"):new d("local"),session:b?new e("session"):new d("session")}}),define("cookie",[],function(){function a(){var a,b,d=document.cookie.split(/;/);for(a in c)c[a]=undefined;for(a=0;a<d.length;a++)b=/\s*([^\=]+)=?(.+)/.exec(d[a]),b&&b.length>1&&(c[b[1]]=b[2]);return c}function b(a,b,c,d,e,f){if(typeof a=="undefined"||typeof b=="undefined")return!1;var g,h=a+"="+b;return c&&!isNaN(c)&&(g=new Date,g.setDate(g.getDate()+c),h+="; expires="+g.toUTCString()),h+="; path="+(e||"/"),f||(h+="; domain=."+(d?d:wsm.cookieDomain)),document.cookie=h,h}var c={};return function(c,d){var e;return c===undefined?a():(d&&(c={name:c,value:d}),typeof c=="string"?a()[c]:(typeof c=="object"&&(e=b(c.name,c.value,c.expires,c.domain,c.path,c.hostonly)),e?(a()[c.name]=c.value,e):!1))}}),define("beacon",[],function(){var a=window.wsm,b=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+="&"+encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b};return function(c){var d=c.host||a.beaconHost,e=c.event||"unknown",f=b(c.values);if(d.length>0){var g=new Image;g.src="//"+d+"/__wsm.gif?wsme="+e+f}}}),define("doccomplete",["jquery"],function(a){var b=function(b){/^complete$/i.test(window.document.readyState)?b():a(window).load(b)};return b}),define("third-party/hoverIntent",["jquery"],function(a){$.fn.hoverIntent=function(b,c){var d={sensitivity:7,interval:100,timeout:0};d=$.extend(d,c?{over:b,out:c}:b);var e,f,g,h,i=function(a){e=a.pageX,f=a.pageY},j=function(a,b){b.hoverIntent_t=clearTimeout(b.hoverIntent_t);if(Math.abs(g-e)+Math.abs(h-f)<d.sensitivity)return $(b).unbind("mousemove",i),b.hoverIntent_s=1,d.over.apply(b,[a]);g=e,h=f,b.hoverIntent_t=setTimeout(function(){j(a,b)},d.interval)},k=function(a,b){return b.hoverIntent_t=clearTimeout(b.hoverIntent_t),b.hoverIntent_s=0,d.out.apply(b,[a])},l=function(b){var c=a.extend({},b),e=this;e.hoverIntent_t&&(e.hoverIntent_t=clearTimeout(e.hoverIntent_t)),b.type=="mouseenter"?(g=c.pageX,h=c.pageY,$(e).bind("mousemove",i),e.hoverIntent_s!=1&&(e.hoverIntent_t=setTimeout(function(){j(c,e)},d.interval))):($(e).unbind("mousemove",i),e.hoverIntent_s==1&&(e.hoverIntent_t=setTimeout(function(){k(c,e)},d.timeout)))};return this.bind("mouseenter",l).bind("mouseleave",l)}}),define("third-party/zeroclipboard",[],function(){var a={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(a){return typeof a=="string"&&(a=document.getElementById(a)),a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a),this.className+=" "+a},a.removeClass=function(a){var b=this.className.split(/\s+/),c=-1;for(var d=0;d<b.length;d++)b[d]==a&&(c=d,d=b.length);return c>-1&&(b.splice(c,1),this.className=b.join(" ")),this},a.hasClass=function(a){return!!this.className.match(new RegExp("\\s*"+a+"\\s*"))}),a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,b,c){var d=this.clients[a];d&&d.receiveEvent(b,c)},register:function(a,b){this.clients[a]=b},getDOMObjectPosition:function(a,b){var c={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};while(a&&a!=b)c.left+=a.offsetLeft,c.top+=a.offsetTop,a=a.offsetParent;return c},Client:function(b){this.handlers={},this.id=a.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,a.register(this.id,this),b&&this.glue(b)}};return a.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(b,c,d){this.domElement=a.$(b);var e=99;this.domElement.style.zIndex&&(e=parseInt(this.domElement.style.zIndex,10)+1),typeof c=="string"?c=a.$(c):typeof c=="undefined"&&(c=document.getElementsByTagName("body")[0]);var f=a.getDOMObjectPosition(this.domElement,c);this.div=document.createElement("div");var g=this.div.style;g.position="absolute",g.left=""+f.left+"px",g.top=""+f.top+"px",g.width=""+f.width+"px",g.height=""+f.height+"px",g.zIndex=e;if(typeof d=="object")for(addedStyle in d)g[addedStyle]=d[addedStyle];c.appendChild(this.div),this.div.innerHTML=this.getHTML(f.width,f.height)},getHTML:function(b,c){var d="",e="id="+this.id+"&width="+b+"&height="+c;if(navigator.userAgent.match(/MSIE/)){var f=location.href.match(/^https/i)?"https://":"http://";d+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+f+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+b+'" height="'+c+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+a.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+e+'"/><param name="wmode" value="transparent"/></object>'}else d+='<embed id="'+this.movieId+'" src="'+a.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+b+'" height="'+c+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+e+'" wmode="transparent" />';return d},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var a=document.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(b){}this.domElement=null,this.div=null}},reposition:function(b){b&&(this.domElement=a.$(b),this.domElement||this.hide());if(this.domElement&&this.div){var c=a.getDOMObjectPosition(this.domElement),d=this.div.style;d.left=""+c.left+"px",d.top=""+c.top+"px"}},setText:function(a){this.clipText=a,this.ready&&this.movie.setText(a)},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,""),this.handlers[a]||(this.handlers[a]=[]),this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a,this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,b){a=a.toString().toLowerCase().replace(/^on/,"");switch(a){case"load":this.movie=document.getElementById(this.movieId);if(!this.movie){var c=this;setTimeout(function(){c.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var c=this;setTimeout(function(){c.receiveEvent("load",null)},100),this.ready=!0;return}this.ready=!0,this.movie.setText(this.clipText),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[a])for(var d=0,e=this.handlers[a].length;d<e;d++){var f=this.handlers[a][d];typeof f=="function"?f(this,b):typeof f=="object"&&f.length==2?f[0][f[1]](this,b):typeof f=="string"&&window[f](this,b)}}},window.ZeroClipboard=a,a}),define("text!tmpl/modal.tmpl",[],function(){return'<div class="modal{{#classes}} {{classes}}{{/classes}}">\n	<h2 class="modalTitle">{{title}}</h2>\n	{{>innards}}\n	<div class="modalCloser">\n	{{>closer}}\n	</div>\n	<span class="jqmClose mainCloser">X</span>\n</div>'}),define("third-party/jqmodal",["jquery"],function(a){a.fn.jqm=function(d){var e={overlay:50,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:f,ajaxText:"",target:f,modal:f,toTop:f,onShow:f,onHide:f,onLoad:f};return this.each(function(){if(this._jqm)return c[this._jqm].c=a.extend({},c[this._jqm].c,d);b++,this._jqm=b,c[b]={c:a.extend(e,a.jqm.params,d),a:f,w:a(this).addClass("jqmID"+b),s:b},e.trigger&&a(this).jqmAddTrigger(e.trigger)})},a.fn.jqmAddClose=function(a){return l(this,a,"jqmHide")},a.fn.jqmAddTrigger=function(a){return l(this,a,"jqmShow")},a.fn.jqmShow=function(b){return this.each(function(){b=b||window.event,a.jqm.open(this._jqm,b)})},a.fn.jqmHide=function(b){return this.each(function(){b=b||window.event,a.jqm.close(this._jqm,b)})},a.jqm={hash:{},open:function(b,g){var i=c[b],k=i.c,l="."+k.closeClass,m=parseInt(i.w.css("z-index"),10),n=m>0?m:3e3,o=a("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":n-1,opacity:k.overlay/100});if(i.a)return f;i.t=g,i.a=!0,i.w.css("z-index",n),k.modal?(d[0]||j("bind"),d.push(b)):k.overlay>0?i.w.jqmAddClose(o):o=f,i.o=o?o.addClass(k.overlayClass).prependTo("body"):f;if(e){a("html,body").css({height:"100%",width:"100%"});if(o){o=o.css({position:"absolute"})[0];for(var p in{Top:1,Left:1})o.style.setExpression(p.toLowerCase(),"(_=(document.documentElement.scroll"+p+" || document.body.scroll"+p+"))+'px'")}}if(k.ajax){var q=k.target||i.w,r=k.ajax,s=typeof q=="string"?a(q,i.w):a(q),t=r.substr(0,1)=="@"?a(g).attr(r.substring(1)):r;s.html(k.ajaxText).load(t,function(){k.onLoad&&k.onLoad.call(this,i),l&&i.w.jqmAddClose(a(l,i.w)),h(i)})}else l&&i.w.jqmAddClose(a(l,i.w));return k.toTop&&i.o&&i.w.before('<span id="jqmP'+i.w[0]._jqm+'"></span>').insertAfter(i.o),k.onShow?k.onShow(i):i.w.show(),h(i),f},close:function(b){var e=c[b];return e.a?(e.a=f,d[0]&&(d.pop(),d[0]||j("unbind")),e.c.toTop&&e.o&&a("#jqmP"+e.w[0]._jqm).after(e.w).remove(),e.c.onHide?e.c.onHide(e):(e.w.hide(),e.o&&e.o.remove()),f):f},params:{}};var b=0,c=a.jqm.hash,d=[],e=a.browser.msie&&a.browser.version=="6.0",f=!1,g=a('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0}),h=function(b){e&&(b.o?b.o.html('<p style="width:100%;height:100%"/>').prepend(g):a("iframe.jqm",b.w)[0]||b.w.prepend(g)),i(b)},i=function(b){try{a(":input:visible",b.w)[0].focus()}catch(c){}},j=function(b){a()[b]("keypress",k)[b]("keydown",k)[b]("mousedown",k)},k=function(b){var e=c[d[d.length-1]],f=!a(b.target).parents(".jqmID"+e.s)[0];return f&&i(e),!f},l=function(b,d,e){return b.each(function(){var b=this._jqm;a(d).each(function(){this[e]||(this[e]=[],a(this).click(function(){for(var a in{jqmShow:1,jqmHide:1})for(var b in this[a])c[this[a][b]]&&c[this[a][b]].w[a](this);return f})),this[e].push(b)})})}}),define("modal",["jquery","text!tmpl/modal.tmpl","third-party/mustache","third-party/jqmodal"],function(a,b,c){var d=function(d,f,g,h){g=g||"";var i=c.to_html(b,d,{innards:f,closer:g}),j,k={overlay:60,onHide:e};return j=a(i).appendTo("body"),a.extend(k,h),a("body").hasClass("popup")?j:j.jqm(k).jqmShow()},e=function(a){a.w.remove(),a.o.remove()};return d}),define("affiliate",["jquery","third-party/zeroclipboard","modal","cookie"],function(a,b,c,d){if(a("body").hasClass("popup"))return!1;var e=window.wsm,f=e.serviceUrl;a.ajaxPrefilter("json",function(b,c,d){if(b.crossDomain&&!a.support.cors)return"jsonp"});var g='<div id="affil_nav"><ul><li class="active"><a href="{{host}}/dashboard">Dashboard</a></li><li><a href="{{host}}/getlinks">Get Links</a></li><li><a href="{{host}}/widget">Get Widget</a></li><li><a href="{{host}}/reports">Reports</a></li><li><a href="{{host}}/settings">Affiliate Settings</a></li><li><a href="{{host}}/faqs">FAQs</a></li></ul></div>'.replace(/{{host}}/g,f.replace("services","affiliates")),h='<p class="couponTitle">{{storename}} {{title}}</p><label for="linkTag">Link:</label><form><textarea id="linkTag"><a href="{{url}}">{{storename}} {{title}}</a></textarea><button class="cnc jqmClose copy submit">Copy and close</button></form>',i,j,k=function(b){b.preventDefault();var d=a(this).data("aff"),e=h.replace(/\{\{(\w+)\}\}/g,function(a,b){return d[b]});j=c({title:"Get Link",classes:"getLinkModal"},e),w.glue(j.find(".copy")[0],j[0])},l=function(b){if(!b)return;w.addEventListener("mouseDown",s),w.addEventListener("complete",t),a(".site-header").after(g)},m=function(b){if(!b)return;if(document.body.id==="store"){var c=a(".socialBar"),d=a('<ul class="affiliate-bar clearfix"></ul>').insertAfter(c);c.length&&(p(d,b.IsFavorite),q(d,b.IsMonetized))}r(b.JumpLinks)},n=function(b){b.preventDefault();var c=a(this);a.ajax({url:f+"/overlay/addfavorite",data:{storeId:e.domain},beforeSend:function(){c.addClass("processing")},dataType:"json",xhrFields:{withCredentials:!0},success:o,complete:function(){c.removeClass("processing")}})},o=function(a){a==="true"&&i.text("Added").removeClass("addToFav").addClass("alreadyFaved").off(".aff")},p=function(b,c){i=a("<li>",{"class":c?"alreadyFaved":"addToFav",text:c?"Added":"Add to Favorites"}).prependTo(b).on("click.aff",n)},q=function(b,c){var d=c?"Get Paid":"Un-paid Merchant",e=a(".socialBar").offset(),f=e.left<150?"w":"s";a("<li>",{"class":c?"monetizable":"notMonetizable"}).append('<span class="tooltip">'+d+"</span>").prependTo(b)},r=function(b){var c=a([1]),d="getLink";x.each(function(e,f){var g=b[e];c.context=c[0]=this;var h=a("<button>",{"class":(g?d+" green":"disabled")+" btn sm",text:g?"Get My Link":"Not Available"}),i=c.find(".detail"),j={url:g,title:i.find(".title h3").text().replace(/^\s+|\s+$/g,""),storename:c.data("storename")},k=a("<div>",{"class":"aff_btn"}).append(h),l=g?"Click for Affiliate Link":"Not Available for Syndication";h.append('<span class="tooltip">'+l+"</span>"),h.data("aff",j),c.find(".description").prepend(k)}),a(document).on("click","."+d,k)},s=function(b){b.setText(a("#linkTag")[0].value)},t=function(a){j.jqmHide()},u=a([1]),v,w=new b.Client,x=a(".offer");v=a.map(x,function(a,b){return u.context=u[0]=a,u.data("couponid")}),d("user[preferredUsername]")&&a.ajax({url:f+"/trackinglinks",data:{codeIds:v.join()},dataType:"json",xhrFields:{withCredentials:!0}}).done(l,m)}),define("user",["cookie","jquery"],function(a,b){var c,d="/ajax/user.php";return function(){return c?c:a("user[preferredUsername]")?(c=b.ajax(d,{dataType:"json",xhrFields:{withCredentials:!0}}),c):b.Deferred().resolve()}}),define("text!tmpl/user-bar.tmpl",[],function(){return'<ul class="site-user loggedIn">\n    <li class="username"><a href="/community/member/{{user}}">Hi, {{userDisplay}}</a></li>\n    <li class="logout"><a href="/community/logout/">Logout</a></li>\n</ul>'}),define("facebook",["jquery"],function(a){var b=window.wsm.fb,c=b.appid,d;return{facepile:function(a){if(!a)return;var b=document.createElement("iframe");b.src=["https://www.facebook.com/plugins/facepile.php?href=http://www.facebook.com/retailmenot","action","size=large","max_rows=1","width=30","colorscheme=light","appId="+c].join("&"),b.scrolling="no",b.frameBorder="0",b.allowTransparency="true",a.appendChild(b)},login:function(b,e){var f="callBack"+ +(new Date),g="https://www.facebook.com/dialog/oauth?"+["scope=email&display=popup","client_id="+c,"redirect_uri=http://"+window.location.host+"/ajax/facebook.html?"+f,"response_type=token"].join("&"),h=a.Deferred();return b&&h.always(b),d=window.open(g,"facebooklogin","menubar=no,location=yes,width=850,height=400,chrome=yes,centerscreen=true"),window[f]=function(b){var c=a.extend({},b);if(/access_token/.test(c.hash))h.resolve({status:!0,accessToken:/access_token=([^&]+)/.exec(c.hash)[1]},c);else{var e,g,i,j={},k=c.search.slice(1).split("&");for(var l=0;l<k.length;l++)e=k[l],/error/.test(e)&&(/error_/.test(e)?g=/error_([^=]+)/.exec(e)[1]:g=/[^=]+/.exec(e)[0],i=/=(.+)/.exec(e)[1].replace(/\+/g," "),j[g]=i);h.reject({status:!1,error:j},c)}d.close(),window[f]=undefined},h}}}),define("updateLabels",["jquery"],function(a){if(!a("#content .login").find("form").length)return!1;var b,c,d=a("#content .login").find("form"),e={},f=function(a,b){return typeof b=="string"&&(b=g(b)),a.find(".msg").addClass("hidden"),b&&b.email?(a.find(".email-"+b.email).removeClass("hidden"),!1):b&&b.password?(a.find(".password-"+b.password).removeClass("hidden"),!1):!0},g=function(a){var d=window.location.search.split("&");for(b in d){b=d[b];if(/email/.test(b)||/password/.test(b))c=/([^=]+)=(.+)/.exec(b),c.length>2&&(e[c[1]]=c[2])}return e};return/errors/.test(window.location.search)&&(/e=/.test(window.location.search)&&(b=/e=([^&]+)/.exec(window.location.search),b&&b.length>1&&d.find("input[name=email]").val(b[1])),f(d,window.location.search)),f}),define("third-party/debounce",["jquery"],function(a){(function(a,b){"$:nomunge";var c=a.jQuery||a.Cowboy||(a.Cowboy={}),d;c.throttle=d=function(a,d,e,f){function g(){function c(){i=+(new Date),e.apply(j,l)}function g(){h=b}var j=this,k=+(new Date)-i,l=arguments;f&&!h&&c(),h&&clearTimeout(h),f===b&&k>a?c():d!==!0&&(h=setTimeout(f?g:c,f===b?a-k:a))}var h,i=0;return typeof d!="boolean"&&(f=e,e=d,d=b),c.guid&&(g.guid=e.guid=e.guid||c.guid++),g},c.debounce=function(a,c,e){return e===b?d(a,c,!1):d(a,e,c!==!1)}})(this)}),define("formvalidation",["jquery","third-party/debounce"],function(a){var b={};return b.prototype={patterns:{email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,required:/./,6:/.{6}/},init:function(b){if(!b)return;var c=a(b.form).find("[type=submit]").attr("disable","disable");return this.inputs=a(b.form).find("input,textarea,select,button"),this.options=b,this.bindSubmit(),this.form=b.form,this.form.submit(function(a){a.preventDefault()}),this.fields=b.fields,this.setup(),this},reset:function(){this.form.find(".msg").addClass("hidden")},bindSubmit:function(){this.options.filter?a(document).one("submit",this.options.filter,a.proxy(this,"submit")):this.options.form.one("submit",a.proxy(this,"submit"))},clearLabels:function(a){if(!a)return;var b=this.form.find(".msg"),c=new RegExp("^"+a);b.filter(function(a){var b,d=!1,e=this.className.split(" ");for(b=0;b<e.length;b++)if(c.test(e[b])){d=!0;break}return d}).addClass("hidden")},status:function(){var a=!0,b=this.options.fields;for(var c=0;c<b.length;c++)if(!b[c].status&&b[c].dom.is(":visible")){a=!1;break}return a},labels:function(a,b){var c,d,e,f,g,h,i=!0,j=this.fields,k=this.form.find(".msg"),l="";a&&this.clearLabels(a);for(var m in b)this.clearLabels(m),m&&b[m]&&(k.filter("."+m+"-"+b[m]).removeClass("hidden"),i=!1);for(g=0;i&&g<j.length;g++){f=j[g];if((!a||f.name===a)&&f.dom.filter(":visible").length){c=f.rules,f.status=!0;for(h=0;i&&h<c.length;h++){d=c[h];if(d.status===!1){~l.indexOf(f.name)||k.filter("."+d.label).removeClass("hidden"),l+=f.name,f.status=!1;break}}f.status&&(k.filter("."+f.name+"-success").removeClass("hidden"),f.status=!0)}}for(i=!0,g=0;g<j.length;g++)!j[g].status&&j[g].dom.filter(":visible").length&&(i=!1);i?this.form.find("[type=submit]"):this.form.find("[type=submit]")},submit:function(a){var b=this;a.preventDefault();var c=this.options.submit(this.form);return this.options.form.find(".msg").addClass("hidden"),!c||!c.done?c&&(b.labels(undefined,c),this.bindSubmit()):c.always(function(a){a&&b.labels(undefined,a),b.bindSubmit()}),!1},executeRules:function(b){if(!b)for(c=0;c<this.options.fields.length;c++)this.executeRules(this.options.fields[c]);var c,d,e,f,g=this,h=b.dom[0],i=!1;for(c=0;c<b.rules.length;c++){f=b.rules[c],f.status=!0,d=f.pattern;if(d&&d.test){if(!d.test(b.dom.val())){f.status=!1;break}}else d&&d.defer?(i=!0,function(a,b){d.pipe.done(function(c){if(c.hasError)for(var d in c.errors)d===b.name&&(a.label=b.name+"-"+c.errors[d],a.status=!1);b.dom.removeClass("throbbabob"),g.labels(h.name),g.setupDeferred(a)})}(f,b),b.dom.addClass("throbbabob"),d.defer.resolve()):a.type(f.type)==="function"&&(f.status=f.type.call(this,this.form,b))}i||this.labels(h.name)},pub:function(){},setupDeferred:function(b){var c=this,d=a.Deferred();b.pattern={defer:d,pipe:d.pipe(function(){var d=a.ajax(a.extend({data:c.form.serialize()},b.type));return d})}},setup:function(){var b,c,d,e,f=this.fields,g=this.inputs,h=a(document),i=this;for(b in f){c=f[b],c.patterns=[],c.dom||(c.dom=g.filter("[name="+c.name+"]"));for(b in c.rules)e=c.rules[b],a.type(e.type)==="object"?this.setupDeferred(e):e.pattern=this.patterns[e.type];(function(b){var c,d=a.debounce(2e3,function(){c||f()}),e=function(){c=!0,f()},f=function(a){(a&&a.type!=="keyup"||this.value!=="")&&i.executeRules(b)};/pause/.test(b.events)&&(b.events.replace(/pause\W?/,""),i.options.filter?h.on("keyup",i.options.filter+" input[name="+b.dom.attr("name")+"]",d).on("blur",i.options.filter+" input[name="+b.dom.attr("name")+"]",e):(b.dom.on("keyup",d),b.dom.on("blur",e))),i.options.filter?i.options.form.on(b.events,i.options.filter+" input[name="+b.dom.attr("name")+"]",f):b.dom.on(b.events,f)})(c)}}},b.prototype.init.prototype=b.prototype,function(a){return new b.prototype.init(a)}}),define("userbar",["jquery","user","text!tmpl/user-bar.tmpl","facebook","modal","track","updateLabels","third-party/mustache","cookie","formvalidation","track","third-party/debounce"],function(a,b,c,d,e,f,g,h,i,j,f){function k(){var a="";return window.location.href.indexOf("community/login")!==-1?a="Login_Page":window.location.href.indexOf("community/signup")!==-1?a="Signup_Page":window.location.href.indexOf("community")!==-1?a="Community_Page":a="other",a}var l,m,n,o={},p=!1,q=!1,r=a(".nav.login"),s=a(".site-user .login a"),t=a("#content .login form"),u=a("#content .signup-form .submit.signup"),v=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,w={fullLogin:"/community/login",welcome:"/community/welcome",user:"/community/member",login:window.wsm.loginApiUrl+"/rmnlogin?pid="+window.wsm.loginApiPid,signup:window.wsm.loginApiUrl+"/rmnlogin/register?pid="+window.wsm.loginApiPid,exists:window.wsm.loginApiUrl+"/rmnlogin/useremailexists?pid="+window.wsm.loginApiPid,emailconfirm:"/community/confirm",verifyEmail:"/community/verify"};if(a("body").hasClass("popup"))return!1;var x=j({form:t,filter:"#content .signup-form",submit:function(b){var c=b.attr("name"),d=a.Deferred();return y(c,b.serialize()).done(function(b){b&&(b.success||b.Success)?(f({category:"Authenticate",action:"Signup",label:k()}),a(document).trigger("event.analytics",{p_lim:"signup"}),z(c)):b.hasError&&d.resolve(b.errors)}),d},fields:[{name:"email",events:"blur",rules:[{type:"required",label:"email-missing"},{type:"email",label:"email-invalid"},{type:{url:w.exists,dataType:"json",success:function(){var b=a("#content .email-exists  a"),c=w.fullLogin;c=c.split("?")+"/?errors&e="+b.closest("form").find("[name=email]").val(),b.attr("href",c)}}}]},{name:"password",events:"blur",rules:[{type:"required",label:"password-missing"},{type:6,label:"password-bluratleast"}]},{name:"password",events:"keyup",rules:[{type:"required",label:"password-missing"},{type:6,label:"password-insufficient"}]},{name:"password2",events:"keyup",rules:[{type:function(a,b){return a.find("[name=password2]").val()!==""},label:"password2-confirm"},{type:function(a,b){return a.find("[name=password]").val()===a.find("[name=password2]").val()&&a.find("[name=password]").val()!==""},label:"password2-match"}]}]});j({form:t,filter:"#content .login-form",submit:function(b){var c=b.attr("name"),d=a.Deferred();return b.find("button[type=submit]").addClass("throb"),y(c,b.serialize()).done(function(e){b.find("button[type=submit]").removeClass("throb"),e&&(e.Success||e.success)?(f({category:"Authenticate",action:"Login",label:k()}),a(document).trigger("event.analytics",{p_lim:"login"}),z(c)):e.hasError&&d.resolve(e.errors)}),d},fields:[{name:"email",events:"blur",rules:[{type:"required",label:"email-missing"},{type:"email",label:"email-invalid"}]}]}),b().done(function(b){if(!b)return;a(".site-user").replaceWith(h.to_html(c,{userDisplay:b.userName&&b.userName.length>14?b.userName.substring(0,14)+"&hellip;":b.userName,user:b.userName}))});var y=function(b,c){return a.ajax({url:w[b],type:"post",data:c,dataType:"json",xhrFields:{withCredentials:!0},error:function(){}})},z=function(a,b,c){var d;if(c)return window.location="/community/welcome/",!1;if(/redirectUrl/.test(window.location.search))d=/redirectUrl=([^&]+)/i.exec(window.location.search),d.length>1&&(window.location=d[1]);else if(a==="login"){var e=i("user[preferredUsername]");window.location="/community/member/"+e}else window.location=w.emailconfirm;return!1};d.facepile(a(".facepile")[0]),a(".facebook-login").one("click",function(b){b.preventDefault();var c=a(this),e=c.data("url"),g=a(this),h=d.login(function(b){a.ajax(e,{type:"post",data:b,dataType:"json",xhrFields:{withCredentials:!0},success:function(b){g.addClass("throb"),b.hasError||(f({category:"Authenticate",action:"FB",label:k()}),a(document).trigger("event.analytics",{p_lim:"facebook"}),z("login",b.isAffiliate,b.isNew))}})},a(this).data("url"));return!1}),function(){var b=!1,c=function(){r.addClass("hidden"),s.removeClass("hover")};s.on("click",function(d){d.preventDefault(),s.toggleClass("hover"),r.toggleClass("hidden"),r.hasClass("hidden")||(r.find("input:first").focus(),window.setTimeout(function(){a(document).one("click",function d(e){b?a(document).one("click",d):c()})},100))}),r.on("click",function(){b=!0,window.setTimeout(function(){b=!1},250)})}();var A;a(".minor .login .toggle").on("click",function(b){b.preventDefault(),x.reset(),A||(A=a(this).closest(".form")),function(a){a.name==="login"?a.name="signup":a.name="login"}(A.find("form")[0]),A.addClass("transparent"),window.setTimeout(function(){A.toggleClass("login-form"),A.toggleClass("signup-form"),A.removeClass("transparent")},500)}),a(".login form input").each(function(a,b){b.tabIndex=a+1}),a(".login-signup a.verify-email").one("click",function(b){b.preventDefault();var c=a(this).closest("form").find("input[name=email]").val();a(this).parent().html("Sending Email!"),y("verifyEmail",{email:c}).done(function(a){a&&a.hasError&&a.errors?alert("There was an error processing your request."):window.location="/community/confirm_oauth?email="+c})}),a(".nav.login form").submit(function(a){a.preventDefault()}),a(".nav.login form").one("submit keyup ",function B(b){if(b.type==="keyup"&&b.key!=="Enter"){a(".nav.login form").one("keyup",B);return}b.preventDefault();var c,d=a(this),e=d.find("[name=email]").val();d.find("button[type=submit]").addClass("throb"),y("login",d.serialize()).done(function(b){b.hasError?(c=w.fullLogin+"?errors&e=",e||(e=""),c+=e+"&"+a.param(b.errors),window.location=c):b&&(b.Success||b.success)&&(f({category:"Authenticate",action:"Login",label:"Header"}),a(document).trigger("event.analytics",{p_lim:"login"}),z("login"))})}),a(".fbmismatch.error.flow .close").one("click",function(b){a.ajax("/ajax/removeUserFlowFlag.php",{type:"post",data:{task:"removeFacebook"},dataType:"json"})})}),define("hashcheck",["jquery"],function(a){var b=location.hash,c=[],d=function(a,b){c.push({pattern:b,callback:a})},e=function(){var a,d,e;while(c.length){a=c.shift(),d=a.pattern;if(d.test(b)){a.callback.call(this,d.exec(b)[1]);break}}};return a(e),{register:d,dispatch:e}}),define("rpx",["jquery","modal","track","hashcheck"],function(a,b,c,d){var e=/^#nouser/i,f=!1,g="/community/login_oauth",h=function(){var b=a(".oauth-modal");b.on("click",i)},i=function(b){var d=a.get(g);b.preventDefault();if(f)return;f=!0,d.done(k),c({category:"OauthLogin",action:"click",label:document.location})},j=function(){var b=g,d=a.get(g);d.done(l),c({category:"OauthLogin",action:"nouser",label:document.location})},k=function(a){var c={classes:"rpx-box-modal"},d=b(c,a);d.jqm({onHide:m})},l=function(a){var c={classes:"rpx-box-modal error"};b(c,a)},m=function(a){a.w.fadeOut("2000",function(){a.o.remove(),f=!1})};return a(h),d.register(j,e),{fetch:j}}),define("infographic",["jquery","hashcheck","modal","social"],function(a,b,c,d){var e=a(document),f=/^#vig\.([a-z0-9_\-]+)$/i,g=function(b){var c=a.get("/special/"+b+"?modal=true");c.done(h)},h=function(a){var b={classes:"infographic"},e=c(b,a);j(e),window.scroll(0,0),d.parse(e[0])},i=function(){e.on("click",".modalTrigger",function(a){a.preventDefault(),g(f.exec(this.hash)[1])})},j=function(a){a=a||e;var b=a.find(".select_all"),c=Math.floor(Math.random()*b.length);b.not(":eq("+c+")").remove(),e.on("click",".select_all",k)},k=function(a){a.preventDefault();var b=window.document,c=this,d;if(typeof c.select=="function")c.select();else if(b.body.createTextRange)d=b.body.createTextRange(),d.moveToElementText(c),d.select();else if(window.getSelection){var e=window.getSelection();e.setBaseAndExtent?e.setBaseAndExtent(c,0,c,1):(d=b.createRange(),d.selectNodeContents(c),e.removeAllRanges(),e.addRange(d))}};return b.register(g,f),a(i),g}),define("howto",["jquery","track","modal"],function(a,b,c){var d,e=function(){if((window.outerWidth||window.document.documentElement.clientWidth+40)>1060){var b=a("<a>",{href:"/special/how-to?modal=true",text:"How to use a coupon...","class":"feedbackTab"}).appendTo("body");b.on("click",f),a(".howTrigger").click(function(){b.trigger("click")})}},f=function(c){var d=a.get(this.href);d.done(g),c.preventDefault(),b({category:"HowToModal",action:"click",label:"howto_"+wsm.domain})},g=function(a){var b={classes:"infographic",title:"How do I use a coupon code?"},d=c(b,a);scrollTo(0,0)};return a(e),f}),define("text!tmpl/voucher-codes.tmpl",[],function(){return'<div id="voucherCodes" style="display:block">\n    <p>Hey, RetailMeNot has a UK specific site called <a href="http://www.vouchercodes.co.uk/">VoucherCodes.co.uk</a>.</p>\n    <p>It\'s got all the best UK vouchers, plus more.</p>\n    <p>Want to go to the UK site instead?</p>\n    <p><button class="btn blue sm takeMe">Ok, take me to VoucherCodes.co.uk</button></p>\n    <p>\n	      <button class="jqmClose btn sm green">No, thanks</button>\n	      <button class="btn btn sm green noMas">No, don\'t ask me again!</button>\n    </p>\n</div>\n'}),define("ukmodal",["jquery","cookie","modal","storage","doccomplete","text!tmpl/voucher-codes.tmpl"],function(a,b,c,d,e,f){var g,h=function(){e(function(){a.getJSON("/ajax/geoLocate.php",function(a){var b=a.country_code;b&&d.session.setItem("countryCode",b),b==="GB"&&i()})})},i=function(){var a={title:"VoucherCodes.co.uk"},b=c(a,f);b.on("click",".noMas",function(){d.local.setItem("disableVoucherCodes",!0),b.jqmHide()}),b.on("click",".takeMe",function(a){a.preventDefault(),window.location="http://www.vouchercodes.co.uk/"+wsm.voucherCodesDomain})},j=d.session.getItem("countryCode");!d.local.getItem("disableVoucherCodes")&&/retailmenot.com|retailmenot.release|retailmenot.dev|retailmenot.stage|retailmenot.test|retailmenot.local/.test(location.host)&&(j?j==="GB"&&a(i):a(h))}),define("text!tmpl/alertNewUser.tmpl",[],function(){return'<div class="alertMessage">\n    <h3>Thanks, you\'re subscribed!</h3>\n    <p class="module_helper">Create an account to customize your emails.</p>\n</div>\n<ul>\n    <li>\n        <a class="btn lg blue" href="/community/signup">Create an account</a>\n    </li>\n</ul>'}),define("text!tmpl/alertReturningUser.tmpl",[],function(){return'<div class="alertMessage">\n    <h3>Thanks, you\'re subscribed!</h3>\n    <p class="module_helper">Customize your emails in your account <a href="/community/emailpreferences/">Email Preferences</a>.</p>\n</div>'}),define("newsletter",["jquery","user","facebook","cookie","formvalidation","modal","track","text!tmpl/alertNewUser.tmpl","text!tmpl/alertReturningUser.tmpl"],function(a,b,c,d,e,f,g,h,i){function j(a,b){b.find("input[name=subscribe]").replaceWith(a)}function k(a,b){b.find("li:last").html(a).hide().fadeIn(500)}function l(b,c){if(b==="/referafriend_success")var d=m("referafriend_tellapalID"),e="http://retailmenot.extole.com/a/cnv?a.id=1405795013&tellapal.id="+d+"&status=2&email="+c,f=a("<img />").attr("src",e).error(function(){window.location=b});else window.location=b}function m(a){var b;return(b=(new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)")).exec(document.cookie))?b[1]:null}var n=a(".newsletter_form");/subscription/.test(window.location.hash)&&a(".banner_msg.fp-success.subbed").removeClass("hidden"),/alreadysubscribed/.test(window.location.hash)&&a(".banner_msg.fp-success.alreadysubbed").removeClass("hidden");var o=function(b){var c=a.Deferred();if(b.target||b.srcElement)b.preventDefault(),b=a(this);return a.ajax({type:"POST",url:"/ajax/newslettersubscribe.php",data:b.serialize()}).done(function(d){if(d.hasError===!1){var e="newsletter";c.resolve();switch(d.action){case"UpdateButton":j(d.buttonText,b);break;case"Updateli":k(d.liMarkup,b);break;case"Redirect":l(d.redirectTarget,d.email);break;case"Nothing":break;case"alertNewUser":e="newsletteralert",b.closest(".alert_signup").html(a(h).hide().fadeIn(500));break;case"alertReturningUser":e="newsletteralert",b.closest(".alert_signup").html(a(i).hide().fadeIn(500))}a(document).trigger("event.analytics",{n_scm:e})}else c.resolve(d.errors)}),c};n.each(function(b,c){n.eq(b).has("input[type=email]").length?e({form:a(c),submit:o,fields:[{name:"email",events:"blur",rules:[{type:"email",label:"email-invalid"}]}]}):n.eq(b).on("submit",o)})}),define("text!tmpl/search-result.tmpl",[],function(){return'<li class="result">\n    <a href="/view/{{domain}}">\n		<span class="result-thumb"><span>\n			<img alt="{{domain}}" src="http://t.rmncdn.com/logos/s/{{domain}}-coupons.jpg" />\n		</span></span>\n        <p class="resultTitle">{{title}}</p>\n        <p class="domain">{{domain}}</p>\n        {{#avgSavings}}<p class="avg-savings">Average discount: <sup>$</sup>{{avgSavings}}</p>{{/avgSavings}}\n        <p class="seeMore">See <strong>{{shortTitle}}</strong> coupons</p>\n    </a>\n</li>\n'}),define("truncate",[],function(){String.prototype.truncate||(String.prototype.truncate=function(a){var b=this.length,c;return b<=a?this.toString():(c=this.lastIndexOf(" ",a),c===-1&&(c=a),this.substr(0,c)+"…")})}),define("search",["jquery","third-party/mustache","text!tmpl/search-result.tmpl","track","truncate"],function(a,b,c,d){var e,f,g,h,i,j=a("<ul>",{id:"instant_results"}).hide(),k=-1,l=!0,m=function(){var b;f=a("#query").on({keydown:p,focusout:t}),j.appendTo(".site-search"),b=f[0],b&&"onpropertychange"in b?b.attachEvent("onpropertychange",function(a){a.propertyName==="value"&&o(a)}):f.on("input",o),a.browser.msie&&a("html.ie7").length&&f.closest("form").find(".submit").on("click",function(){f.closest("form").submit()})},n=function(a){if(a.selectionStart)return a.selectionStart;if(!document.selection)return 0;var b=document.selection.createRange();return b.moveStart("character",-a.value.length),b.text.length},o=function(){var a=f[0].value;x();if(!a.length){t();return}q(a)},p=function(a){var b=1;if(l)switch(a.which){case 38:b=-1;case 40:l&&(a.preventDefault(),w(b));break;case 39:if(this.value.length!==n(this))break;case 13:~k&&(a.preventDefault(),v());break;case 27:t()}},q=function(b){e&&e.abort();if(!b)return;e=a.getJSON("/ajax/instant.php",{q:b}),e.done(s),e.done(function(){r(b)})},r=function(a){d({category:"SearchClick",action:window.location.pathname,label:a})},s=function(d){var e="";h=d.length,h?(g=d,a.each(d,function(a,d){d.avgSavings==="0.00"&&(d.avgSavings=null),d.shortTitle=d.title.truncate(34),e+=b.to_html(c,d)}),j.html(e).show(),l=!0,f.addClass("completing")):t()},t=function(){setTimeout(function(){f.removeClass("completing"),j.hide(),l=!1,x()},300)},u=function(a){},v=function(){~k&&(window.location="/view/"+g[k].domain)},w=function(a){var b=j.find(".result");~k&&b.eq(k).removeClass("active"),k+=a,k===h?k=0:k<0&&(k=h-1),y(b.eq(k))},x=function(){~k&&(j.find(".active").removeClass("active"),k=-1)},y=function(a){a.addClass("active")};a(m)}),define("analytics",["jquery","cookie"],function(a,b){function c(a,b){}var d=window.wsm;d.an.v_id=b("userFlashVersion"),d.an.path=window.location.pathname,d.an.lang=window.navigator.userLanguage||window.navigator.language,b("tnt_c")&&(d.an.tt_c=b("tnt_c")),b("tnt_r")&&(d.an.tt_r=b("tnt_r")),d.an.pg_cp=a(".offer").length;var e="no_campaign";if(location.search){var f={},g=location.search.substring(1).split("&");a.each(g,function(a,b){var c=b.split("=");f[c[0]]=c[1]}),e=(f.ch?f.ch:"null")+"|"+(f.utm_source?f.utm_source:"null")+"|"+(f.utm_medium?f.utm_medium:"null")+"|"+(f.utm_term?f.utm_term:"null")+"|"+(f.utm_content?f.utm_content:"null")+"|"+(f.utm_campaign?f.utm_campaign:"null"),e=e=="null|null|null|null|null|null"?"no_campaign":e}d.an.camp=e,b("user[userId]")&&(d.an.p_lgi=b("user[userId]")),a(document).on("event.analytics",c),a(function(){setTimeout(function(){window.performance&&(d.an.pg_l=window.performance.timing.loadEventEnd-window.performance.timing.navigationStart)},4)})}),define("trackingcookies",["jquery","cookie"],function(a,b){if(a("body").hasClass("popup"))return;var c=window.location,d=c.href,e=document.referrer,f=e.split("?")[0];if(f.indexOf("retailmenot.")==-1&&f.indexOf("rpxnow.com")==-1){var g=0;e||(g=-30,e=b("s_referrer")),e&&(b({name:"s_referrer",value:e,expires:g,path:"/"}),b({name:"s_referrer",value:"",expires:-30,path:"/",hostonly:!0}),b({name:"out_referrer",value:e,expires:30,path:"/"}),b({name:"out_referrer",value:"",expires:-30,path:"/",hostonly:!0})),d&&(b({name:"out_referrerLanding",value:d,expires:30,path:"/"}),b({name:"out_referrerLanding",value:"",expires:-30,path:"/",hostonly:!0})),b("out_originalReferrer")||b({name:"out_originalReferrer",value:e,expires:1825,path:"/"}),b("out_originalLanding")||b({name:"out_originalLanding",value:d,expires:1825,path:"/"})}(d.indexOf("?SID=")>0||d.indexOf("&SID=")>0)&&b({name:"out_kenshooLanding",value:d,expires:30,path:"/"})}),define("placeholder",["jquery"],function(a){var b={},c="onpropertychange"in document.createElement("input"),d=function(){a("[placeholder]").each(function(b,d){f(d),c?d.attachEvent("onpropertychange",function(a){a.propertyName==="value"&&e(d)}):a(d).on("input",function(){e(this)})}),a(document).on("click",".fauxPH",function(){a(this).data("field").focus()})},e=function(b){b.value?a(b).data("ph").hide():a(b).data("ph").show()},f=function(b){var c,d,f,g=a("<span>").css({position:"relative",margin:0,padding:0}),i=a(b);i.wrap(g),c=i.attr("placeholder"),i.data("phText",c),d=a("<span>",{text:c,"class":"fauxPH"}).css(h(i)).hide().data("field",i).insertAfter(i),i.data("ph",d),e(b)},g=function(b){var c=["fontSize","paddingLeft","paddingTop","lineHeight","borderTopWidth","borderLeftWidth","width","height","textAlign"],d={},e;return b.css("float",function(a,c){return c!=="none"&&b.parent().css("float",c),"none"}),a.each(c,function(a,c){d[c]=b.css(c)}),e=b.position(),d.top=e.top,d.left=e.left,d},h=function(a){var b=g(a);return b.position="absolute",b.color="#999",b.borderTopWidth&&(b.top+=parseInt(b.borderTopWidth,10),delete b.borderTopWidth),b.borderLeftWidth&&(b.left+=parseInt(b.borderLeftWidth,10),delete b.borderLeftWidth),b.lineHeight==="normal"&&(b.lineHeight=parseInt(b.height,10)+"px"),b},i=function(b){if(!b)return;b.each(function(b,c){var d=h(a.data(c,"field"));a(c).css(d)})};return"placeholder"in document.createElement("input")||a(d),{build:f,restyle:i}}),define("base",["jquery","storage","cookie","track","beacon","doccomplete","third-party/hoverIntent","affiliate","userbar","rpx","infographic","howto","ukmodal","newsletter","search","analytics","trackingcookies","placeholder"],function(a,b,c,d,e,f){var g=window.location,h=g.pathname;a(function(){a(".browse-cats").hoverIntent({over:function(){a(this).addClass("active")},out:function(){a(this).removeClass("active")},timeout:400}),a(".continueHunting").on("click",function(a){return g=b.session.getItem("wsm.shoppingpage")||"/",!1}),a(".cigar-shark").on("click",function(){var b=a(this),d=b.data();return c(d),g.reload(!0),!1}),c("userFlashVersion")&&a("form[method=post]").append('<input type="hidden" name="userFlashVersion" value="'+c("userFlashVersion")+'" />'),h.indexOf("/community")!==0&&h.indexOf("/notify.php")!==0&&h.indexOf("/subscribe")!==0&&b.session.setItem("wsm.shoppingpage",g.href),f(function(){setTimeout(function(){e({event:"pageview",values:wsm.an})},50)}),a(function(){a("body").removeClass("preload")})})}),define("mobilecheck",[],function(){var a={},b=function(){if(typeof a.isMobile!="undefined")return a;a.device=c(),a.isMobile=a.device?!0:!1},c=function(){var a=navigator.userAgent;return/iPad/i.test(a)?"iPad":/iPhone/i.test(a)?"iPhone":/iPod/i.test(a)?"iPod":/android/i.test(a)?"Android":/webos/i.test(a)?"WebOS":/blackberry/i.test(a)?"BlackBerry":!1};return b(),a}),define("linkify",["jquery","mobilecheck"],function(a,b){var c=150,d=function(b){var c=document.createTextNode(b);return a.trim(c.nodeValue)},e=function(a,b,c){return'<a href="'+a+'" target="'+b+'">'+d(c)+"</a>"},f=function(b){var d=b.text(),e,f,h,i;if(!b.hasClass("min")||d.length<c)return;e=d.lastIndexOf(" ",c),f=a.trim(d.substring(0,e))+"…",h=a("<span>",{"class":"expander",text:"expand"}),b.data("truncatedText",d.substring(e)),b.children("a").text(f),b.append(h),h.one("click",g)},g=function(b){var c=a(this),d=c.closest(".discount");return c.remove(),d.find("a").text(function(a,b){return b=b.substring(0,b.length-1),b+d.data("truncatedText")}),!1};return function(c){if(!c.length)return;var d=a("body").hasClass("popup"),g=a([1]);c.each(function(a,c){var h;g.context=g[0]=c;if(d&&g.hasClass("coupon"))return;var i=g.data("offerid"),j=g.data("siteid"),k="/out/"+i,l="merch"+j,m=g.find(".title h3, .title h1, h3.title").not(":has(a)"),n=g.find(".discount").not(":has(a)");m.eq(0).html(e(k,l,m.html())),n.eq(0).html(e(k,l,n.html())),f(n),b.isMobile&&(h=g.find(".couponcode"),h.length&&h.html(e(k,l,h.html())))})}}),define("flashoverlay",["jquery","doccomplete","third-party/zeroclipboard"],function(a,b,c){var d=a(document);c.setMoviePath(wsm.staticPath+"/ZeroClipboard.swf");var e={defaults:{selector:".attachFlash",setText:function(a){return""},dispatch:function(a){},mouseOver:function(){},mouseOut:function(){}},options:{},position:function(b){var c=this.$target=a(b.currentTarget),d=a(this.overlay),e=this.clip.movie,f=this.pos=a.extend(c.offset(),{width:c.outerWidth(),height:c.outerHeight(),zIndex:function(a){var b=a.css("z-index");while(isNaN(b))a=a.parent(),b=a[0].tagName.toLowerCase()==="body"?99:a.css("z-index");return b+30}(c)});this.target=b.currentTarget,d.css(f),e&&(e.width=f.width,e.height=f.height)},init:function(e){if(a("body").hasClass("popup")&&!e)return;var f=this;b(function(){f.id=+(new Date),f.options=a.extend({},f.defaults,e);var b=f.overlay=a("<div>").css({position:"absolute",height:0,width:0,overflow:"hidden"}).appendTo("body")[0],g=f.clip=new c.Client;g.div=b,g.setHandCursor(!0),g.addEventListener("load",function(){d.on("mouseenter",f.options.selector,a.proxy(f,"position"))}),g.addEventListener("onMouseOver",a.proxy(f.options.mouseOver,f)),g.addEventListener("mouseOut",a.proxy(f,"hide")),g.addEventListener("mouseDown",function(a){a.setText(f.options.setText(f.target,a))}),g.addEventListener("complete",a.proxy(f,"click")),b.innerHTML=g.getHTML(1,1)})},hide:function(){this.clip&&(this.options.mouseOut.call(this,this.clip),this.clip.hide())},click:function(a){this.$target.trigger("click")}};return typeof Object.create!="function"&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),function(){var a=Object.create(e);return a.init.apply(a,arguments),a}}),define("bidness",["jquery","cookie","track","storage","beacon"],function(a,b,c,d,e){var f=window.wsm,g=window.location,h={},i=function(){if(a("body").hasClass("popup"))return;a(document).on("doBidness.bidness",".offer, .content",j).on("click",".caterpillar-offer",function(b){b.preventDefault(),a(this).closest(".content").trigger("doBidness",["caterpillarClick"])}).on("click",".reveal-offer",function(b){b.preventDefault(),a(this).closest(".deal-content").trigger("doBidness",["revealClick"])}).on("click.theBidness",".title, .discount, .mobilelink",function(b){b.preventDefault();var c=a(this),d=a(b.target).closest(".offer"),e;c.hasClass("title")?e="OfferTitle":c.hasClass("discount")?c.hasClass("no-description")?e="NoDesc_StoreLink":e="OfferDescription":e="OfferCode",d.trigger("click"),d.trigger("doBidness",[e])})},j=function(h,i){var j=a(h.target),k=j.data("offerid"),l=j.data("siteid"),m=j.hasClass("printable"),n=f.popup,o=j.find(".title a").attr("href"),p="/showcoupon/"+encodeURIComponent(k),q=430,r=592,s="",t=f.hidePopup&&d.local.getItem("isMobile")=="iPad",u=window.screenX||window.screenLeft,v=window.outerWidth||document.documentElement.clientWidth+40,w=u+v,x=window.screenY||window.screenTop,y=x+20,z=b("userFlashVersion")?b("userFlashVersion").concat("_","xxxxxxxxx4xxxyxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random(+(new Date))*16|0,c=a=="x"?b:b&3|8;return c.toString(16)})):"xxxxxxxxxxxxxx4xxxyxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random(+(new Date))*16|0,c=a=="x"?b:b&3|8;return c.toString(16)}),A={prod:";"+k+";1;",co_r:j.find(".percent").text().replace("%",""),co_v:j.find(".vote_count").text().replace(/[^-\d\.]/g,""),co_p:j.index()+1,co_cm:j.find(".comment_list li").size(),co_sb:j.find(".creator .userLink").text(),co_lu:j.find(".last_used").text().replace("Last successfully used ","").replace(" ago",""),co_dp:j.find(".posted").text().replace("Posted ","").replace(" ago",""),co_lo:i,slic:f.an.slic,ou_id:z},B;j.hasClass("deal-content")&&(o=j.find(".reveal-offer").attr("href"),k=j.attr("data-offerid"),p="/showcoupon/"+encodeURIComponent(k)),j.hasClass("content")&&(o=j.find(".caterpillar-offer").attr("href"),k=j.attr("data-offerid"),p="/showcoupon/"+encodeURIComponent(k)),b({name:"cid",value:k,expires:1,path:"/"}),b({name:"ppage",value:g.href,expires:1,path:"/"}),b({name:"ouid",value:z,expires:1,path:"/"}),c({category:i,action:g.pathname,label:k.toString()}),e({event:"click",values:a.extend({},f.an,A)}),a(document).trigger("event.analytics",A),m&&j.data("printableImagePath")?(window.open(window.location.pathname+"#print."+k),window.location=o):(v<screen.width?w+80<screen.width?B=w-q+80:u>=80?B=u-80:B=w-q-20:B=w-q-20,a.browser.msie?window.location=o:f.merchantWindow=window.open(o,"merch"+l),!m&&!f.readonly_mode&&(!n||n.closed?f.popup=window.open(p,"popup"+l,"status=0,toolbar=0,directories=0,menubar=0,location=0"+s+",width="+q+",height="+r+",top="+y+",left="+B):(n.location=p,n.focus()))),window.mboxUpdate&&window.mboxUpdate("global_mbox","offerId="+k)};a(i)}),define("printable",["jquery","hashcheck","modal"],function(a,b,c){var d=a(document),e=/^#print\.([a-z0-9_\-]+)$/i,f,g=function(b){a.getJSON("/ajax/coupon.php",{couponid:b}).done(h)},h=function(b){var d={},e='<style>@media print { #wrapper, .site-header, .site-footer, #holiday-reveal-wrapper, #octonovemcember-wrapper, .caterpillar-wrapper, .modal h2, .modalCloser, .mainCloser {display: none !important;}}</style><img id="printableCoupon" src="'+b.printableImagePath+'" />';d.title=b.offerTitle,d.classes="printable",f=c(d,e),a("#printableCoupon").load(i),f.find(".modalTitle").prepend('<span class="btn lg green printButton print track" data-track-category="Printable Coupons" data-track-action="print" data-track-label="'+window.location.hash.substring(7)+'" onclick="print();">Print</span>'),window.scroll(0,0)},i=function(){var b=a(this).outerWidth();f.css({width:b+"px",marginLeft:"-"+(b+100)/2+"px"})};b.register(g,e),b.dispatch()}),define("sharedoffer",["jquery","hashcheck","modal"],function(a,b,c){var d=/^#c([a-z0-9]+)(\?.*)?$/i,e,f=function(b){e=b,a(g)},g=function(){var b=a("#c"+e),d={},f;if(b.length){if(!b.hasClass("offer"))return;f=b.clone(!0),d.title="Here's the "+wsm.title+" Coupon You're Looking For!"}else f=a(".offer").eq(0).clone(!0),d.title="The coupon you're looking for is no longer available.";f.find(".commentsTrigger").remove().end().find(".comment_detail").remove();var g='<span class="jqmClose">See more '+wsm.title+" coupons</span>";d.storeName=f.data("storename"),d.classes="sharedOffer",f='<ul class="offer_list">'+a("<p>").append(f).html()+"</ul>",c(d,f,g)};b.register(f,d)}),define("offers",["jquery","linkify","track","flashoverlay","mobilecheck","bidness","printable","sharedoffer"],function(a,b,c,d,e){var f=a("body"),g=f.hasClass("ctc"),h=f.hasClass("popup"),i=a(".c2c");a(document).on({mouseenter:function(){var b=a(this);b.find(".logo-tooltip").length||b.append('<span class="logo-tooltip">See More Coupons</span>'),b.find(".logo-tooltip").fadeIn(300)},mouseleave:function(){a(this).find(".logo-tooltip").fadeOut(100)}},".store-logo");if(!h){var j=function(){a(".offer .attachFlash.crux").removeClass("attachFlash").addClass("revealed").find(".cover").addClass("hidden"),g||a(document).off("click",m)},k=function(){a(this.target).addClass("hover");var b=this.pos||a.extend(a(this).offset(),{width:a(this).outerWidth()});g&&(i.css({top:b.top+2,left:b.left+b.width+5}),i.removeClass("hidden"))},l=function(){a(this.target).removeClass("hover"),g&&i.addClass("hidden")};e.isMobile||d({selector:".offer .crux.attachFlash",setText:function(b,c){return a(b).find(".code").text()},mouseOver:k,mouseOut:l}),a(document).on("click",".offer .title, .offer .discount",function(){j()});function m(b){return a(this).closest(".offer").trigger("doBidness",["OfferCode"]),j(),!1}a(document).on("click",".crux, .featured-coupons .btn",m),a(document).on("click",".action-crux",function(){return a(this).closest(".offer").trigger("doBidness",["OfferCode"]),j(),g||a(document).off("click",m),!1}),d({selector:".userLink.attachFlash"}),a(document).on("click",".attachFlash.userLink",function(){window.location="/community/member/"+encodeURIComponent(a(this).text())})}document.getElementById("results")||b(a(".offer"))}),define("loadads",["doccomplete"],function(a){var b=function(){var a=document.createElement("iframe");a.style.cssText="display: none;",a.src="/adsense.php?rand="+Math.floor(Math.random()*1e6),document.body.appendChild(a)};wsm.hasAds&&a(b)}),define("third-party/jqueryui",["jquery"],function(a){(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.20",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f=d==="Width"?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})})(a),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(a),function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0],l,m,n;return i.nodeType===9?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),j.length===1&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,k.length===1&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,b.at[0]==="right"?n.left+=l:b.at[0]===e&&(n.left+=l/2),b.at[1]==="bottom"?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=k[1],this.each(function(){var c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n),r;b.my[0]==="right"?q.left-=d:b.my[0]===e&&(q.left-=d/2),b.my[1]==="bottom"?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?this.each(function(){a.offset.setOffset(this,b)}):h.call(this)}),function(){var b=document.getElementsByTagName("body")[0],c=document.createElement("div"),d,e,g,h,i;d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=i>21&&i<22}()}(a),function(a,b){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,c=this.element[0].ownerDocument,d;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(b.options.disabled||b.element.propAttr("readOnly"))return;d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._keyEvent("previous",c);break;case e.DOWN:b._keyEvent("next",c);break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(b.options.disabled)return;b.selectedItem=null,b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(b.options.disabled)return;clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150)}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(a,c){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),b.beforeunloadHandler=function(){b.element.removeAttr("autocomplete")},a(window).bind("beforeunload",b.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="source"&&this._initSource(),b==="appendTo"&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),b==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,c,d;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))}):typeof this.options.source=="string"?(d=this.options.source,this.source=function(c,e){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:d,data:c,dataType:"json",success:function(a,b){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val(),this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)===!1)return;return this._search(a)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return typeof b=="string"?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term),this.menu.deactivate();return}this.menu[a](b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})}(a),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length)return;c.preventDefault(),b.select(c)}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();c<0?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active){this.activate(c,this.element.children(b));return}var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(".ui-menu-item:first"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(".ui-menu-item:last"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(a)}),define("validate",["jquery","cookie","formvalidation"],function(a,b,c){var d="required"in document.createElement("input"),e=a("<div>",{"class":"msg error"}).hide(),f=function(a){var b=!0;return a.each(function(a,c){g(c)||(b=!1)}),b},g=function(){return d?function(b){return b.validity.valid?(i(a(b)),!0):(h(a(b)),!1)}:function(b){var c=a(b);return b.getAttribute("required")!==null?!b.value||b.value===c.data("phText")?(h(c),!1):(i(c),!0):!0}}(),h=function(a,b){var c=a.data("$err")||e.clone();c.text(b||a.data("errmsg"));if(!c[0].parentNode||c[0].parentNode!==window.document)a.after(c),a.data("$err",c);a.addClass("error"),c.show()},i=function(a){a.hasClass("error")&&(a.removeClass("error"),a.data("$err").hide())},j={fields:f,field:g,showError:h,hideError:i};return j}),define("submitoffer",["jquery","third-party/jqueryui","track","validate","placeholder","formvalidation","user"],function(a,b,c,d,e,f,g){var h,i=window.wsm,j=a(".coupon-submit"),k=j.find("[name=expires]"),l=j[0],m=a("#f_code"),n=j.find("select").val(),o="/ajax/submitForm.php",p={tip:a(".submit-tip"),printable:a(".submit-printable"),code:a(".submit-code")},q={type:{url:"/ajax/checkCode.php",dataType:"json",type:"post"}},r=j.find("input[name=host], input[name=word]"),s=!1,t=function(a){n=a.target.value;for(var b in p)p.hasOwnProperty(b)&&(b===n?(p[b].show(),e.restyle(p[b].find(".fauxPH"))):p[b].hide())},u=function(){var b=a(".captcha");s||(b.removeClass("hidden"),a(".captchaImage").attr("src","/captcha.php?"+Math.floor(Math.random()*99999)),b.find("input").val("")),k.is(":hidden")&&(k.closest(".row").removeClass("hidden"),e.restyle(k.data("ph"))),a("jqueryuistyle").length||(require([i.staticPath+"/scripts/third-party/jquery-ui-1.8.20-datepicker.js"],function(){j.find("input[name=expires]").datepicker({showButtonPanel:!0,closeText:"Skip This",minDate:0})}),document.createStyleSheet?document.createStyleSheet("/gui/css/jq/ui-1.8.20.css"):a("body").append('<link rel="stylesheet" href="/gui/css/jq/ui-1.8.20.css" id="jqueryuistyle" type="text/css" />'))},v=g().done(function(a){if(!a)return;s=!0});a("#offerType").change(t),j.on("focus.showCaptcha","input, textarea",function(a){j.off(".showCaptcha"),v.done(function(a){u()})}),f({form:j,submit:function(){var b=a.Deferred(),d=j.find("[name=domain]").val(),e=j.find("[name=f_code]").val(),f=j.find("[name=offerType]").val();return a.ajax({url:o,data:j.serialize(),dataType:"json",type:"post",success:function(g){g||b.resolve({}),j.find(".form-success").addClass("hidden"),g.hasError?(g.errors.domain?j.find(".msg").filter(".domain-"+g.errors.domain).find("span").text(j.find("input[name=domain]").val()):g.errors.errormsg&&(j.find(".general-error").html(g.errors.errormsg),j.find(".general-error").removeClass("hidden")),b.resolve(g.errors)):(j.find(".form-success").removeClass("hidden"),g.text&&j.find(".form-success").html(g.text),b.reject(),j[0].reset(),j.find("select").change(),a("body#submit").length===0&&j.find("[name=domain]").val(d),c({category:"SubmitCoupon",action:location.pathname,label:n}),a(document).trigger("event.analytics",{c_pty:f,c_pst:d,c_pcd:e}))},complete:function(){u()},error:function(){j.find(".general-error").removeClass("hidden")}}),b},fields:[{name:"f_code",events:"change",rules:[q]},{name:"fp_url",events:"change",rules:[q]},{name:"ft_tip",events:"change",rules:[q]},{name:"f_description",events:"change",rules:[q]},{name:"fp_description",events:"change",rules:[q]}]}),a(".ui-autocomplete-input").autocomplete({source:function(b,c){var d=encodeURI("/ajax/ugcstores.php?q="+b.term);a.getJSON(d,function(b){var d=[];a.each(b,function(a,b){d.push({value:b.domain})}),c(d)})},select:function(b,c){a("#host").val(c.item.value)},open:function(){a(".ui-autocomplete").width(a(this).width())},close:function(b){a(b.target).trigger("check")}})}),define("easing",["jquery"],function(a){a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*.3*1.5);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-0.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){return c<f/2?a.easing.easeInBounce(b,c*2,0,e,f)*.5+d:a.easing.easeOutBounce(b,c*2-f,0,e,f)*.5+e*.5+d}})}),define("category",["jquery","carousel2"],function(a,b){b({dom:a("#categories .carousel2"),shown:7})}),require(["carousel2","coupon-loader","holiday","base","offers","loadads","submitoffer","search","easing","category"],function(a,b,c){$(function(){$(".more_list").on("click",function(a){a.preventDefault();var b=$(this),c=b.data("list")||b.prev(".topList");c.toggleClass("truncated"),b.text(function(){return c.hasClass("truncated")?"Show all 100":"Show less"}),b.data("list",c)}),function(){var a=$(".accordion"),b;a.length&&(a.find(".header").on("click",function(a){$(this).closest(".article").toggleClass("expanded")}),b=$(location.hash),b.length&&(a.find(".expanded").removeClass("expanded"),b.addClass("expanded")))}(),$(".panel_sm:nth-child(3n)").css("margin","0 31px 20px"),a({dom:$("#categories .carousel2"),shown:7}),a({dom:$("#social .carousel2"),shown:7}),$("#holiday").length>0&&new c,$("#coupon-loader").length>0&&new b($("#coupon-loader"),5)})}),define("main",function(){})