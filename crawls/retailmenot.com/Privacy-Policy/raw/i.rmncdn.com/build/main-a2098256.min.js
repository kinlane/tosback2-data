/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/** @license


 SoundManager 2: JavaScript Sound for the Web
 ----------------------------------------------
 http://schillmania.com/projects/soundmanager2/

 Copyright (c) 2007, Scott Schiller. All rights reserved.
 Code provided under the BSD License:
 http://schillmania.com/projects/soundmanager2/license.txt

 V2.97a.20120916
*/

/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 * 
 * Open source under the BSD License. 
 * 
 * Copyright Â© 2008 George McGinley Smith
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
*/

/*
 *
 * TERMS OF USE - EASING EQUATIONS
 * 
 * Open source under the BSD License. 
 * 
 * Copyright Â© 2001 Robert Penner
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
 */

/*!
* hoverIntent r6 // 2011.02.26 // jQuery 1.5.1+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
*
* hoverIntent is currently available for use in all personal or commercial
* projects under both MIT and GPL licenses. This means that you can choose
* the license that best suits your project, and use it accordingly.
*/

/**
 * @license RequireJS text 2.0.0 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*
 *
 * jqModal - Minimalist Modaling with jQuery
 *   (http://dev.iceburg.net/jquery/jqModal/)
 *
 * Copyright (c) 2007,2008 Brice Burgess <bhb@iceburg.net>
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * $Version: 03/01/2009 +r14
 */

/**
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

/*! jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */

/*! jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */

/*! jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */

/*! jQuery UI - v1.8.20 - 2012-04-30
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.autocomplete.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */

var requirejs,require,define;(function(global){function isFunction(a){return ostring.call(a)==="[object Function]"}function isArray(a){return ostring.call(a)==="[object Array]"}function each(a,b){if(a){var c;for(c=0;c<a.length;c+=1)if(b(a[c],c,a))break}}function eachReverse(a,b){if(a){var c;for(c=a.length-1;c>-1;c-=1)if(b(a[c],c,a))break}}function hasProp(a,b){return a.hasOwnProperty(b)}function eachProp(a,b){var c;for(c in a)if(a.hasOwnProperty(c)&&b(a[c],c))break}function mixin(a,b,c){b&&eachProp(b,function(b,d){if(c||!hasProp(a,d))a[d]=b})}function bind(a,b){return function(){return b.apply(a,arguments)}}function scripts(){return document.getElementsByTagName("script")}function getGlobal(a){if(!a)return a;var b=global;return each(a.split("."),function(a){b=b[a]}),b}function makeContextModuleFunc(a,b,c){return function(){var d=aps.call(arguments,0),e;return c&&isFunction(e=d[d.length-1])&&(e.__requireJsBuild=!0),d.push(b),a.apply(null,d)}}function addRequireMethods(a,b,c){each([["toUrl"],["undef"],["defined","requireDefined"],["specified","requireSpecified"]],function(d){a[d[0]]=makeContextModuleFunc(b[d[1]||d[0]],c)})}function makeError(a,b,c,d){var e=new Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);return e.requireType=a,e.requireModules=d,c&&(e.originalError=c),e}function newContext(a){function b(a){var b,c;for(b=0;a[b];b+=1){c=a[b];if(c===".")a.splice(b,1),b-=1;else if(c===".."){if(b===1&&(a[2]===".."||a[0]===".."))break;b>0&&(a.splice(b-1,2),b-=2)}}}function c(a,c,d){var e=c&&c.split("/"),f=t.map,g=f&&f["*"],h,i,j,k,l,m,n,o;a&&a.charAt(0)==="."&&(c?(t.pkgs[c]?e=[c]:e=e.slice(0,e.length-1),a=e.concat(a.split("/")),b(a),i=t.pkgs[h=a[0]],a=a.join("/"),i&&a===h+"/"+i.main&&(a=h)):a.indexOf("./")===0&&(a=a.substring(2)));if(d&&(e||g)&&f){k=a.split("/");for(l=k.length;l>0;l-=1){n=k.slice(0,l).join("/");if(e)for(m=e.length;m>0;m-=1){j=f[e.slice(0,m).join("/")];if(j){j=j[n];if(j){o=j;break}}}!o&&g&&g[n]&&(o=g[n]);if(o){k.splice(0,l,o),a=k.join("/");break}}}return a}function d(a){isBrowser&&each(scripts(),function(b){if(b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===F.contextName)return b.parentNode.removeChild(b),!0})}function e(a){var b=t.paths[a];if(b&&isArray(b)&&b.length>1)return d(a),b.shift(),F.undef(a),F.require([a]),!0}function f(a,b,d,e){var f=a?a.indexOf("!"):-1,g=null,h=b?b.name:null,i=a,j=!0,k="",l,m,n;return a||(j=!1,a="_@r"+(A+=1)),f!==-1&&(g=a.substring(0,f),a=a.substring(f+1,a.length)),g&&(g=c(g,h,e),m=x[g]),a&&(g?m&&m.normalize?k=m.normalize(a,function(a){return c(a,h,e)}):k=c(a,h,e):(k=c(a,h,e),l=y[k],l||(l=F.nameToUrl(a,null,b),y[k]=l))),n=g&&!m&&!d?"_unnormalized"+(B+=1):"",{prefix:g,name:k,parentMap:b,unnormalized:!!n,url:l,originalName:i,isDefine:j,id:(g?g+"!"+k:k)+n}}function g(a){var b=a.id,c=u[b];return c||(c=u[b]=new F.Module(a)),c}function h(a,b,c){var d=a.id,e=u[d];hasProp(x,d)&&(!e||e.defineEmitComplete)?b==="defined"&&c(x[d]):g(a).on(b,c)}function i(a,b){var c=a.requireModules,d=!1;b?b(a):(each(c,function(b){var c=u[b];c&&(c.error=a,c.events.error&&(d=!0,c.emit("error",a)))}),d||req.onError(a))}function j(){globalDefQueue.length&&(apsp.apply(w,[w.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function k(a,b,c){var d=a&&a.map,e=makeContextModuleFunc(c||F.require,d,b);return addRequireMethods(e,F,d),e.isBrowser=isBrowser,e}function l(a){delete u[a],each(C,function(b,c){if(b.map.id===a)return C.splice(c,1),b.defined||(F.waitCount-=1),!0})}function m(a,b){var c=a.map.id,d=a.depMaps,e;if(!a.inited)return;return b[c]?a:(b[c]=!0,each(d,function(a){var d=a.id,f=u[d];if(!f)return;return!f.inited||!f.enabled?(e=null,delete b[c],!0):e=m(f,b)}),e)}function n(a,b,c){var d=a.map.id,e=a.depMaps;if(!a.inited||!a.map.isDefine)return;return b[d]?x[d]:(b[d]=a,each(e,function(e){var f=e.id,g=u[f],h;if(G[f])return;if(g){if(!g.inited||!g.enabled){c[d]=!0;return}h=n(g,b,c),c[f]||a.defineDepById(f,h)}}),a.check(!0),x[d])}function o(a){a.check()}function p(){var a=t.waitSeconds*1e3,b=a&&F.startTime+a<(new Date).getTime(),c=[],f=!1,g=!0,h,j,k,l;if(D)return;D=!0,eachProp(u,function(a){h=a.map,j=h.id;if(!a.enabled)return;if(!a.error)if(!a.inited&&b)e(j)?(l=!0,f=!0):(c.push(j),d(j));else if(!a.inited&&a.fetched&&h.isDefine){f=!0;if(!h.prefix)return g=!1}});if(b&&c.length)return k=makeError("timeout","Load timeout for modules: "+c,null,c),k.contextName=F.contextName,i(k);g&&(each(C,function(a){if(a.defined)return;var b=m(a,{}),c={};b&&(n(b,c,{}),eachProp(c,o))}),eachProp(u,o)),(!b||l)&&f&&(isBrowser||isWebWorker)&&!H&&(H=setTimeout(function(){H=0,p()},50)),D=!1}function q(a){g(f(a[0],null,!0)).init(a[1],a[2])}function r(a,b,c,d){a.detachEvent&&!isOpera?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function s(a){var b=a.currentTarget||a.srcElement;return r(b,F.onScriptLoad,"load","onreadystatechange"),r(b,F.onScriptError,"error"),{node:b,id:b&&b.getAttribute("data-requiremodule")}}var t={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{}},u={},v={},w=[],x={},y={},z={},A=1,B=1,C=[],D,E,F,G,H;return G={require:function(a){return k(a)},exports:function(a){a.usingExports=!0;if(a.map.isDefine)return a.exports=x[a.map.id]={}},module:function(a){return a.module={id:a.map.id,uri:a.map.url,config:function(){return t.config&&t.config[a.map.id]||{}},exports:x[a.map.id]}}},E=function(a){this.events=v[a.id]||{},this.map=a,this.shim=t.shim[a.id],this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},E.prototype={init:function(a,b,c,d){d=d||{};if(this.inited)return;this.factory=b,c?this.on("error",c):this.events.error&&(c=bind(this,function(a){this.emit("error",a)})),each(a,bind(this,function(a,b){typeof a=="string"&&(a=f(a,this.map.isDefine?this.map:this.map.parentMap,!1,!0),this.depMaps.push(a));var d=G[a.id];if(d){this.depExports[b]=d(this);return}this.depCount+=1,h(a,"defined",bind(this,function(a){this.defineDep(b,a),this.check()})),c&&h(a,"error",c)})),this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check()},defineDepById:function(a,b){var c;return each(this.depMaps,function(b,d){if(b.id===a)return c=d,!0}),this.defineDep(c,b)},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(this.fetched)return;this.fetched=!0,F.startTime=(new Date).getTime();var a=this.map;a.prefix?this.callPlugin():this.shim?k(this,!0)(this.shim.deps||[],bind(this,function(){this.load()})):this.load()},load:function(){var a=this.map.url;z[a]||(z[a]=!0,F.load(this.map.id,a))},check:function(a){if(!this.enabled)return;var b=this.map.id,c=this.depExports,d=this.exports,e=this.factory,f,g;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(e)){if(this.events.error)try{d=F.execCb(b,e,c,d)}catch(h){f=h}else d=F.execCb(b,e,c,d);this.map.isDefine&&(g=this.module,g&&g.exports!==undefined&&g.exports!==this.exports?d=g.exports:d===undefined&&this.usingExports&&(d=this.exports));if(f)return f.requireMap=this.map,f.requireModules=[this.map.id],f.requireType="define",i(this.error=f)}else d=e;this.exports=d,this.map.isDefine&&!this.ignore&&(x[b]=d,req.onResourceLoad&&req.onResourceLoad(F,this.map,this.depMaps)),delete u[b],this.defined=!0,F.waitCount-=1,F.waitCount===0&&(C=[])}this.defining=!1,a||this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var a=this.map,b=a.id,d=f(a.prefix,null,!1,!0);h(d,"defined",bind(this,function(d){var e=this.map.name,g=this.map.parentMap?this.map.parentMap.name:null,j,m,n;if(this.map.unnormalized){d.normalize&&(e=d.normalize(e,function(a){return c(a,g,!0)})||""),m=f(a.prefix+"!"+e),h(m,"defined",bind(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),n=u[m.id],n&&(this.events.error&&n.on("error",bind(this,function(a){this.emit("error",a)})),n.enable());return}j=bind(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),j.error=bind(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],eachProp(u,function(a){a.map.id.indexOf(b+"_unnormalized")===0&&l(a.map.id)}),i(a)}),j.fromText=function(a,b){var c=useInteractive;c&&(useInteractive=!1),req.exec(b),c&&(useInteractive=!0),F.completeLoad(a)},d.load(a.name,k(a.parentMap,!0,function(a,b){return F.require(a,b)}),j,t)})),F.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){this.enabled=!0,this.waitPushed||(C.push(this),F.waitCount+=1,this.waitPushed=!0),each(this.depMaps,bind(this,function(a){var b=a.id,c=u[b];!G[b]&&c&&!c.enabled&&F.enable(a,this)})),eachProp(this.pluginMaps,bind(this,function(a){var b=u[a.id];b&&!b.enabled&&F.enable(a,this)})),this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){each(this.events[a],function(a){a(b)}),a==="error"&&delete this.events[a]}},F={config:t,contextName:a,registry:u,defined:x,urlMap:y,urlFetched:z,waitCount:0,defQueue:w,Module:E,makeModuleMap:f,configure:function(a){a.baseUrl&&a.baseUrl.charAt(a.baseUrl.length-1)!=="/"&&(a.baseUrl+="/");var b=t.paths,c=t.pkgs,d=t.shim,e=t.map||{};mixin(t,a,!0),mixin(b,a.paths,!0),t.paths=b,a.map&&(mixin(e,a.map,!0),t.map=e),a.shim&&(eachProp(a.shim,function(a,b){isArray(a)&&(a={deps:a}),a.exports&&!a.exports.__buildReady&&(a.exports=F.makeShimExports(a.exports)),d[b]=a}),t.shim=d),a.packages&&(each(a.packages,function(a){var b;a=typeof a=="string"?{name:a}:a,b=a.location,c[a.name]={name:a.name,location:b||a.name,main:(a.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),t.pkgs=c),(a.deps||a.callback)&&F.require(a.deps||[],a.callback)},makeShimExports:function(a){var b;return typeof a=="string"?(b=function(){return getGlobal(a)},b.exports=a,b):function(){return a.apply(global,arguments)}},requireDefined:function(a,b){return hasProp(x,f(a,b,!1,!0).id)},requireSpecified:function(a,b){return a=f(a,b,!1,!0).id,hasProp(x,a)||hasProp(u,a)},require:function(b,c,d,e){var h,k,l,m,n;if(typeof b=="string")return isFunction(c)?i(makeError("requireargs","Invalid require call"),d):req.get?req.get(F,b,c):(h=b,e=c,l=f(h,e,!1,!0),k=l.id,hasProp(x,k)?x[k]:i(makeError("notloaded",'Module name "'+k+'" has not been loaded yet for context: '+a)));d&&!isFunction(d)&&(e=d,d=undefined),c&&!isFunction(c)&&(e=c,c=undefined),j();while(w.length){n=w.shift();if(n[0]===null)return i(makeError("mismatch","Mismatched anonymous define() module: "+n[n.length-1]));q(n)}return m=g(f(null,e)),m.init(b,c,d,{enabled:!0}),p(),F.require},undef:function(a){var b=f(a,null,!0),c=u[a];delete x[a],delete y[a],delete z[b.url],delete v[a],c&&(c.events.defined&&(v[a]=c.events),l(a))},enable:function(a,b){var c=u[a.id];c&&g(a).enable()},completeLoad:function(a){var b=t.shim[a]||{},c=b.exports&&b.exports.exports,d,f,g;j();while(w.length){f=w.shift();if(f[0]===null){f[0]=a;if(d)break;d=!0}else f[0]===a&&(d=!0);q(f)}g=u[a];if(!d&&!x[a]&&g&&!g.inited){if(t.enforceDefine&&(!c||!getGlobal(c))){if(e(a))return;return i(makeError("nodefine","No define call for "+a,null,[a]))}q([a,b.deps||[],b.exports])}p()},toUrl:function(a,b){var c=a.lastIndexOf("."),d=null;return c!==-1&&(d=a.substring(c,a.length),a=a.substring(0,c)),F.nameToUrl(a,d,b)},nameToUrl:function(a,b,d){var e,f,g,h,i,j,k,l,m;a=c(a,d&&d.id,!0);if(req.jsExtRegExp.test(a))l=a+(b||"");else{e=t.paths,f=t.pkgs,i=a.split("/");for(j=i.length;j>0;j-=1){k=i.slice(0,j).join("/"),g=f[k],m=e[k];if(m){isArray(m)&&(m=m[0]),i.splice(0,j,m);break}if(g){a===g.name?h=g.location+"/"+g.main:h=g.location,i.splice(0,j,h);break}}l=i.join("/")+(b||".js"),l=(l.charAt(0)==="/"||l.match(/^[\w\+\.\-]+:/)?"":t.baseUrl)+l}return t.urlArgs?l+((l.indexOf("?")===-1?"?":"&")+t.urlArgs):l},load:function(a,b){req.load(F,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if(a.type==="load"||readyRegExp.test((a.currentTarget||a.srcElement).readyState)){interactiveScript=null;var b=s(a);F.completeLoad(b.id)}},onScriptError:function(a){var b=s(a);if(!e(b.id))return i(makeError("scripterror","Script error",a,[b.id]))}}}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(a){if(a.readyState==="interactive")return interactiveScript=a}),interactiveScript)}var version="2.0.1",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,ostring=Object.prototype.toString,ap=Array.prototype,aps=ap.slice,apsp=ap.splice,isBrowser=typeof window!="undefined"&&!!navigator&&!!document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1,req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(a,b,c,d){var e=defContextName,f,g;return!isArray(a)&&typeof a!="string"&&(g=a,isArray(b)?(a=b,b=c,c=d):a=[]),g&&g.context&&(e=g.context),f=contexts[e],f||(f=contexts[e]=req.s.newContext(e)),g&&f.configure(g),f.require(a,b,c)},req.config=function(a){return req(a)},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),addRequireMethods(req,contexts[defContextName]),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=function(a){throw a},req.load=function(a,b,c){var d=a&&a.config||{},e;if(isBrowser)return e=d.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),e.type=d.scriptType||"text/javascript",e.charset="utf-8",e.setAttribute("data-requirecontext",a.contextName),e.setAttribute("data-requiremodule",b),e.attachEvent&&!(e.attachEvent.toString&&e.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,e.attachEvent("onreadystatechange",a.onScriptLoad)):(e.addEventListener("load",a.onScriptLoad,!1),e.addEventListener("error",a.onScriptError,!1)),e.src=c,currentlyAddingScript=e,baseElement?head.insertBefore(e,baseElement):head.appendChild(e),currentlyAddingScript=null,e;isWebWorker&&(importScripts(c),a.completeLoad(b))},isBrowser&&eachReverse(scripts(),function(a){head||(head=a.parentNode),dataMain=a.getAttribute("data-main");if(dataMain)return cfg.baseUrl||(src=dataMain.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath,dataMain=mainScript.replace(jsSuffixRegExp,"")),cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain],!0}),define=function(a,b,c){var d,e;typeof a!="string"&&(c=b,b=a,a=null),isArray(b)||(c=b,b=[]),!b.length&&isFunction(c)&&c.length&&(c.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(c.length===1?["require"]:["require","exports","module"]).concat(b)),useInteractive&&(d=currentlyAddingScript||getInteractiveScript(),d&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")])),(e?e.defQueue:globalDefQueue).push([a,b,c])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("requireLib",function(){}),define("carousel2",["jquery"],function(a){return function(b){var c=b.dom||a(".carousel2");if(!c.length)return;var d=c.find("ul"),e=b.shown||3,f=c.find("li").length,g=c.find("li:eq(1)").outerWidth(),h,i=c.find(".js-carousel-button").on("click",function(b){b.preventDefault();var c=a(this),j=c.filter(".js-carousel-next").length?-1:1,k;if(h)return;h=window.setTimeout(function(){h=!1},500),k=parseInt(d.css("marginLeft"),10)+j*g*e,i.removeClass("hidden"),(k>=0||k<=g*(f-1-(f%e||e))*-1)&&c.addClass("hidden"),d.css("marginLeft",k)});f<=e&&i.addClass("hidden")}}),function(a){function b(b,c){function d(a){return i.preferFlash&&Eb&&!i.ignoreFlash&&"undefined"!=typeof i.flash[a]&&i.flash[a]}function e(a){return function(b){var c=this._t;return!c||!c._a?(c&&c.id?i._wD(k+"ignoring "+b.type+": "+c.id):i._wD(k+"ignoring "+b.type),b=null):b=a.call(this,b),b}}this.setupOptions={url:b||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=c||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20120916",this.altURL=this.movieURL=this.version=null,this.enabled=this.swfLoaded=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.didFlashBlock=this.muted=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};var f;try{f="undefined"!=typeof Audio&&"undefined"!=typeof (Nb&&10>opera.version()?new Audio(null):new Audio).canPlayType}catch(g){f=!1}this.hasHTML5=f,this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;var h,i=this,j=null,k="HTML5::",l,m=navigator.userAgent,n=a,o=n.location.href.toString(),p=document,q,r,s,t,u=[],v=!0,w,x=!1,y=!1,z=!1,A=!1,B=!1,C,D=0,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z=["log","info","warn","error"],$,_,ab,bb=null,cb=null,db,eb,fb,gb,hb,ib,jb,kb,lb=!1,mb=!1,nb,ob,pb,qb=0,rb=null,sb,tb=null,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb=Array.prototype.slice,Db=!1,Eb,Fb,Gb,Hb,Ib,Jb=m.match(/(ipad|iphone|ipod)/i),Kb=m.match(/msie/i),Lb=m.match(/webkit/i),Mb=m.match(/safari/i)&&!m.match(/chrome/i),Nb=m.match(/opera/i),Ob=m.match(/(mobile|pre\/|xoom)/i)||Jb,Pb=!o.match(/usehtml5audio/i)&&!o.match(/sm2\-ignorebadua/i)&&Mb&&!m.match(/silk/i)&&m.match(/OS X 10_6_([3-7])/i),Qb="undefined"!=typeof console&&"undefined"!=typeof console.log,Rb="undefined"!=typeof p.hasFocus?p.hasFocus():null,Sb=Mb&&("undefined"==typeof p.hasFocus||!p.hasFocus()),Tb=!Sb,Ub=/(mp3|mp4|mpa|m4a|m4b)/i,Vb=p.location?p.location.protocol.match(/http/i):null,Wb=Vb?"":"http://",Xb=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,Yb="mpeg4,aac,flv,mov,mp4,m4v,f4v,m4a,m4b,mp4v,3gp,3g2".split(","),Zb=RegExp("\\.("+Yb.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Vb,this._global_a=null,Ob&&(i.useHTML5Audio=!0,i.preferFlash=!1,Jb)&&(Db=i.ignoreFlash=!0),this.setup=function(a){var b=!i.url;return"undefined"!=typeof a&&z&&tb&&i.ok()&&("undefined"!=typeof a.flashVersion||"undefined"!=typeof a.url)&&jb(db("setupLate")),G(a),b&&T&&"undefined"!=typeof a.url&&i.beginDelayedInit(),!T&&"undefined"!=typeof a.url&&"complete"===p.readyState&&setTimeout(R,1),i},this.supported=this.ok=function(){return tb?z&&!A:i.useHTML5Audio&&i.hasHTML5},this.getMovie=function(a){return l(a)||p[a]||n[a]},this.createSound=function(a,b){function c(){return e=hb(e),i.sounds[f.id]=new h(f),i.soundIDs.push(f.id),i.sounds[f.id]}var d,e=null,f=d=null;d="soundManager.createSound(): "+db(z?"notOK":"notReady");if(!z||!i.ok())return jb(d),!1;"undefined"!=typeof b&&(a={id:a,url:b}),e=F(a),e.url=sb(e.url),f=e,f.id.toString().charAt(0).match(/^[0-9]$/)&&i._wD("soundManager.createSound(): "+db("badID",f.id),2),i._wD("soundManager.createSound(): "+f.id+" ("+f.url+")",1);if(kb(f.id,!0))return i._wD("soundManager.createSound(): "+f.id+" exists",1),i.sounds[f.id];if(vb(f))d=c(),i._wD("Creating sound "+f.id+", using HTML5"),d._setup_html5(f);else{8<t&&(null===f.isMovieStar&&(f.isMovieStar=!!f.serverURL||!!(f.type&&f.type.match(Xb)||f.url.match(Zb))),f.isMovieStar&&(i._wD("soundManager.createSound(): using MovieStar handling"),1<f.loops&&C("noNSLoop"))),f=ib(f,"soundManager.createSound(): "),d=c();if(8===t)j._createSound(f.id,f.loops||1,f.usePolicyFile);else if(j._createSound(f.id,f.url,f.usePeakData,f.useWaveformData,f.useEQData,f.isMovieStar,f.isMovieStar?f.bufferTime:!1,f.loops||1,f.serverURL,f.duration||null,f.autoPlay,!0,f.autoLoad,f.usePolicyFile),!f.serverURL)d.connected=!0,f.onconnect&&f.onconnect.apply(d);!f.serverURL&&(f.autoLoad||f.autoPlay)&&d.load(f)}return!f.serverURL&&f.autoPlay&&d.play(),d},this.destroySound=function(a,b){if(!kb(a))return!1;var c=i.sounds[a],d;c._iO={},c.stop(),c.unload();for(d=0;d<i.soundIDs.length;d++)if(i.soundIDs[d]===a){i.soundIDs.splice(d,1);break}return b||c.destruct(!0),delete i.sounds[a],!0},this.load=function(a,b){return kb(a)?i.sounds[a].load(b):!1},this.unload=function(a){return kb(a)?i.sounds[a].unload():!1},this.onposition=this.onPosition=function(a,b,c,d){return kb(a)?i.sounds[a].onposition(b,c,d):!1},this.clearOnPosition=function(a,b,c){return kb(a)?i.sounds[a].clearOnPosition(b,c):!1},this.start=this.play=function(a,b){var c=!1;return!z||!i.ok()?(jb("soundManager.play(): "+db(z?"notOK":"notReady")),c):kb(a)?i.sounds[a].play(b):(b instanceof Object||(b={url:b}),b&&b.url&&(i._wD('soundManager.play(): attempting to create "'+a+'"',1),b.id=a,c=i.createSound(b).play()),c)},this.setPosition=function(a,b){return kb(a)?i.sounds[a].setPosition(b):!1},this.stop=function(a){return kb(a)?(i._wD("soundManager.stop("+a+")",1),i.sounds[a].stop()):!1},this.stopAll=function(){var a;i._wD("soundManager.stopAll()",1);for(a in i.sounds)i.sounds.hasOwnProperty(a)&&i.sounds[a].stop()},this.pause=function(a){return kb(a)?i.sounds[a].pause():!1},this.pauseAll=function(){var a;for(a=i.soundIDs.length-1;0<=a;a--)i.sounds[i.soundIDs[a]].pause()},this.resume=function(a){return kb(a)?i.sounds[a].resume():!1},this.resumeAll=function(){var a;for(a=i.soundIDs.length-1;0<=a;a--)i.sounds[i.soundIDs[a]].resume()},this.togglePause=function(a){return kb(a)?i.sounds[a].togglePause():!1},this.setPan=function(a,b){return kb(a)?i.sounds[a].setPan(b):!1},this.setVolume=function(a,b){return kb(a)?i.sounds[a].setVolume(b):!1},this.mute=function(a){var b=0;"string"!=typeof a&&(a=null);if(a)return kb(a)?(i._wD('soundManager.mute(): Muting "'+a+'"'),i.sounds[a].mute()):!1;i._wD("soundManager.mute(): Muting all sounds");for(b=i.soundIDs.length-1;0<=b;b--)i.sounds[i.soundIDs[b]].mute();return i.muted=!0},this.muteAll=function(){i.mute()},this.unmute=function(a){"string"!=typeof a&&(a=null);if(a)return kb(a)?(i._wD('soundManager.unmute(): Unmuting "'+a+'"'),i.sounds[a].unmute()):!1;i._wD("soundManager.unmute(): Unmuting all sounds");for(a=i.soundIDs.length-1;0<=a;a--)i.sounds[i.soundIDs[a]].unmute();return i.muted=!1,!0},this.unmuteAll=function(){i.unmute()},this.toggleMute=function(a){return kb(a)?i.sounds[a].toggleMute():!1},this.getMemoryUse=function(){var a=0;return j&&8!==t&&(a=parseInt(j._getMemoryUse(),10)),a},this.disable=function(a){var b;"undefined"==typeof a&&(a=!1);if(A)return!1;A=!0,C("shutdown",1);for(b=i.soundIDs.length-1;0<=b;b--)$(i.sounds[i.soundIDs[b]]);return E(a),Bb.remove(n,"load",K),!0},this.canPlayMIME=function(a){var b;return i.hasHTML5&&(b=wb({type:a})),!b&&tb&&(b=a&&i.ok()?!!(8<t&&a.match(Xb)||a.match(i.mimePattern)):null),b},this.canPlayURL=function(a){var b;return i.hasHTML5&&(b=wb({url:a})),!b&&tb&&(b=a&&i.ok()?!!a.match(i.filePattern):null),b},this.canPlayLink=function(a){return"undefined"!=typeof a.type&&a.type&&i.canPlayMIME(a.type)?!0:i.canPlayURL(a.href)},this.getSoundById=function(a,b){if(!a)throw Error("soundManager.getSoundById(): sID is null/undefined");var c=i.sounds[a];return!c&&!b&&i._wD('"'+a+'" is an invalid sound ID.',2),c},this.onready=function(a,b){var c=!1;if("function"!=typeof a)throw db("needFunction","onready");return z&&i._wD(db("queue","onready")),b||(b=n),I("onready",a,b),J(),!0},this.ontimeout=function(a,b){var c=!1;if("function"!=typeof a)throw db("needFunction","ontimeout");return z&&i._wD(db("queue","ontimeout")),b||(b=n),I("ontimeout",a,b),J({type:"ontimeout"}),!0},this._wD=this._writeDebug=function(a,b,c){var d,e;if(!i.debugMode)return!1;"undefined"!=typeof c&&c&&(a=a+" | "+(new Date).getTime());if(Qb&&i.useConsole){c=Z[b],"undefined"!=typeof console[c]?console[c](a):console.log(a);if(i.consoleOnly)return!0}try{d=l("soundmanager-debug");if(!d)return!1;e=p.createElement("div"),0===++D%2&&(e.className="sm2-alt"),b="undefined"==typeof b?0:parseInt(b,10),e.appendChild(p.createTextNode(a)),b&&(2<=b&&(e.style.fontWeight="bold"),3===b&&(e.style.color="#ff3333")),d.insertBefore(e,d.firstChild)}catch(f){}return!0},this._debug=function(){var a,b;C("currentObj",1);for(a=0,b=i.soundIDs.length;a<b;a++)i.sounds[i.soundIDs[a]]._debug()},this.reboot=function(){i._wD("soundManager.reboot()"),i.soundIDs.length&&i._wD("Destroying "+i.soundIDs.length+" SMSound objects...");var a,b;for(a=i.soundIDs.length-1;0<=a;a--)i.sounds[i.soundIDs[a]].destruct();if(j)try{Kb&&(cb=j.innerHTML),bb=j.parentNode.removeChild(j),i._wD("Flash movie removed.")}catch(c){C("badRemove",2)}cb=bb=tb=null,i.enabled=T=z=lb=mb=x=y=A=i.swfLoaded=!1,i.soundIDs=[],i.sounds={},j=null;for(a in u)if(u.hasOwnProperty(a))for(b=u[a].length-1;0<=b;b--)u[a][b].fired=!1;i._wD("soundManager: Rebooting..."),n.setTimeout(i.beginDelayedInit,20)},this.getMoviePercent=function(){return j&&"undefined"!=typeof j.PercentLoaded?j.PercentLoaded():null},this.beginDelayedInit=function(){B=!0,R(),setTimeout(function(){return mb?!1:(V(),Q(),mb=!0)},20),L()},this.destruct=function(){i._wD("soundManager.destruct()"),i.disable(!0)},h=function(a){var b,c,d=this,e,f,g,h,l,m,n=!1,o=[],p=0,q,r,s=null;b=null,c=null,this.sID=this.id=a.id,this.url=a.url,this._iO=this.instanceOptions=this.options=F(a),this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){if(i.debugMode){var a=null,b=[],c,e;for(a in d.options)null!==d.options[a]&&("function"==typeof d.options[a]?(c=d.options[a].toString(),c=c.replace(/\s\s+/g," "),e=c.indexOf("{"),b.push(" "+a+": {"+c.substr(e+1,Math.min(Math.max(c.indexOf("\n")-1,64),64)).replace(/\n/g,"")+"... }")):b.push(" "+a+": "+d.options[a]));i._wD("SMSound() merged options: {\n"+b.join(", \n")+"\n}")}},this._debug(),this.load=function(a){var b=null;if("undefined"!=typeof a)d._iO=F(a,d.options),d.instanceOptions=d._iO;else if(a=d.options,d._iO=a,d.instanceOptions=d._iO,s&&s!==d.url)C("manURL"),d._iO.url=d.url,d.url=null;d._iO.url||(d._iO.url=d.url),d._iO.url=sb(d._iO.url),i._wD("SMSound.load(): "+d._iO.url,1);if(d._iO.url===d.url&&0!==d.readyState&&2!==d.readyState)return C("onURL",1),3===d.readyState&&d._iO.onload&&d._iO.onload.apply(d,[!!d.duration]),d;a=d._iO,s=d.url&&d.url.toString?d.url.toString():null,d.loaded=!1,d.readyState=1,d.playState=0,d.id3={};if(vb(a))(b=d._setup_html5(a),b._called_load)?i._wD(k+"ignoring request to load again: "+d.id):(i._wD(k+"load: "+d.id),d._html5_canplay=!1,d._a.src!==a.url&&(i._wD(C("manURL")+": "+a.url),d._a.src=a.url,d.setPosition(0)),d._a.autobuffer="auto",d._a.preload="auto",b._called_load=!0,a.autoPlay&&d.play());else try{d.isHTML5=!1,d._iO=ib(hb(a)),a=d._iO,8===t?j._load(d.id,a.url,a.stream,a.autoPlay,a.whileloading?1:0,a.loops||1,a.usePolicyFile):j._load(d.id,a.url,!!a.stream,!!a.autoPlay,a.loops||1,!!a.autoLoad,a.usePolicyFile)}catch(c){C("smError",2),w("onload",!1),W({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return d.url=a.url,d},this.unload=function(){if(0!==d.readyState){i._wD('SMSound.unload(): "'+d.id+'"');if(d.isHTML5){if(h(),d._a)d._a.pause(),yb(d._a,"about:blank"),d.url="about:blank"}else 8===t?j._unload(d.id,"about:blank"):j._unload(d.id);e()}return d},this.destruct=function(a){i._wD('SMSound.destruct(): "'+d.id+'"');if(d.isHTML5){if(h(),d._a)d._a.pause(),yb(d._a),Db||g(),d._a._t=null,d._a=null}else d._iO.onfailure=null,j._destroySound(d.id);a||i.destroySound(d.id,!0)},this.start=this.play=function(a,b){var c,e;e=!0,e=null,b="undefined"==typeof b?!0:b,a||(a={}),d.url&&(d._iO.url=d.url),d._iO=F(d._iO,d.options),d._iO=F(a,d._iO),d._iO.url=sb(d._iO.url),d.instanceOptions=d._iO;if(d._iO.serverURL&&!d.connected)return d.getAutoPlay()||(i._wD("SMSound.play():  Netstream not connected yet - setting autoPlay"),d.setAutoPlay(!0)),d;vb(d._iO)&&(d._setup_html5(d._iO),l()),1===d.playState&&!d.paused&&((c=d._iO.multiShot)?i._wD('SMSound.play(): "'+d.id+'" already playing (multi-shot)',1):(i._wD('SMSound.play(): "'+d.id+'" already playing (one-shot)',1),e=d));if(null!==e)return e;a.url&&a.url!==d.url&&d.load(d._iO),d.loaded?i._wD('SMSound.play(): "'+d.id+'"'):0===d.readyState?(i._wD('SMSound.play(): Attempting to load "'+d.id+'"',1),d.isHTML5||(d._iO.autoPlay=!0),d.load(d._iO)):2===d.readyState?(i._wD('SMSound.play(): Could not load "'+d.id+'" - exiting',2),e=d):i._wD('SMSound.play(): "'+d.id+'" is loading - attempting to play..',1);if(null!==e)return e;!d.isHTML5&&9===t&&0<d.position&&d.position===d.duration&&(i._wD('SMSound.play(): "'+d.id+'": Sound at end, resetting to position:0'),a.position=0);if(d.paused&&0<=d.position&&(!d._iO.serverURL||0<d.position))i._wD('SMSound.play(): "'+d.id+'" is resuming from paused state',1),d.resume();else{d._iO=F(a,d._iO);if(null!==d._iO.from&&null!==d._iO.to&&0===d.instanceCount&&0===d.playState&&!d._iO.serverURL){c=function(){d._iO=F(a,d._iO),d.play(d._iO)},d.isHTML5&&!d._html5_canplay?(i._wD('SMSound.play(): Beginning load of "'+d.id+'" for from/to case'),d.load({_oncanplay:c}),e=!1):!d.isHTML5&&!d.loaded&&(!d.readyState||2!==d.readyState)&&(i._wD('SMSound.play(): Preloading "'+d.id+'" for from/to case'),d.load({onload:c}),e=!1);if(null!==e)return e;d._iO=r()}i._wD('SMSound.play(): "'+d.id+'" is starting to play'),(!d.instanceCount||d._iO.multiShotEvents||!d.isHTML5&&8<t&&!d.getAutoPlay())&&d.instanceCount++,d._iO.onposition&&0===d.playState&&m(d),d.playState=1,d.paused=!1,d.position="undefined"!=typeof d._iO.position&&!isNaN(d._iO.position)?d._iO.position:0,d.isHTML5||(d._iO=ib(hb(d._iO))),d._iO.onplay&&b&&(d._iO.onplay.apply(d),n=!0),d.setVolume(d._iO.volume,!0),d.setPan(d._iO.pan,!0),d.isHTML5?(l(),e=d._setup_html5(),d.setPosition(d._iO.position),e.play()):(e=j._start(d.id,d._iO.loops||1,9===t?d._iO.position:d._iO.position/1e3,d._iO.multiShot),9===t&&!e&&(i._wD("SMSound.play(): "+d.id+": No sound hardware, or 32-sound ceiling hit"),d._iO.onplayerror&&d._iO.onplayerror.apply(d)))}return d},this.stop=function(a){var b=d._iO;return 1===d.playState&&(d._onbufferchange(0),d._resetOnPosition(0),d.paused=!1,d.isHTML5||(d.playState=0),q(),b.to&&d.clearOnPosition(b.to),d.isHTML5?d._a&&(a=d.position,d.setPosition(0),d.position=a,d._a.pause(),d.playState=0,d._onTimer(),h()):(j._stop(d.id,a),b.serverURL&&d.unload()),d.instanceCount=0,d._iO={},b.onstop&&b.onstop.apply(d)),d},this.setAutoPlay=function(a){i._wD("sound "+d.id+" turned autoplay "+(a?"on":"off")),d._iO.autoPlay=a,d.isHTML5||(j._setAutoPlay(d.id,a),a&&!d.instanceCount&&1===d.readyState&&(d.instanceCount++,i._wD("sound "+d.id+" incremented instance count to "+d.instanceCount)))},this.getAutoPlay=function(){return d._iO.autoPlay},this.setPosition=function(a){"undefined"==typeof a&&(a=0);var b=d.isHTML5?Math.max(a,0):Math.min(d.duration||d._iO.duration,Math.max(a,0));d.position=b,a=d.position/1e3,d._resetOnPosition(d.position),d._iO.position=b;if(d.isHTML5){if(d._a)if(d._html5_canplay){if(d._a.currentTime!==a){i._wD("setPosition("+a+"): setting position");try{d._a.currentTime=a,(0===d.playState||d.paused)&&d._a.pause()}catch(c){i._wD("setPosition("+a+"): setting position failed: "+c.message,2)}}}else i._wD("setPosition("+a+"): delaying, sound not ready")}else a=9===t?d.position:a,d.readyState&&2!==d.readyState&&j._setPosition(d.id,a,d.paused||!d.playState,d._iO.multiShot);return d.isHTML5&&d.paused&&d._onTimer(!0),d},this.pause=function(a){return d.paused||0===d.playState&&1!==d.readyState?d:(i._wD("SMSound.pause()"),d.paused=!0,d.isHTML5?(d._setup_html5().pause(),h()):(a||"undefined"==typeof a)&&j._pause(d.id,d._iO.multiShot),d._iO.onpause&&d._iO.onpause.apply(d),d)},this.resume=function(){var a=d._iO;return d.paused?(i._wD("SMSound.resume()"),d.paused=!1,d.playState=1,d.isHTML5?(d._setup_html5().play(),l()):(a.isMovieStar&&!a.serverURL&&d.setPosition(d.position),j._pause(d.id,a.multiShot)),!n&&a.onplay?(a.onplay.apply(d),n=!0):a.onresume&&a.onresume.apply(d),d):d},this.togglePause=function(){return i._wD("SMSound.togglePause()"),0===d.playState?(d.play({position:9===t&&!d.isHTML5?d.position:d.position/1e3}),d):(d.paused?d.resume():d.pause(),d)},this.setPan=function(a,b){return"undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=!1),d.isHTML5||j._setPan(d.id,a),d._iO.pan=a,b||(d.pan=a,d.options.pan=a),d},this.setVolume=function(a,b){return"undefined"==typeof a&&(a=100),"undefined"==typeof b&&(b=!1),d.isHTML5?d._a&&(d._a.volume=Math.max(0,Math.min(1,a/100))):j._setVolume(d.id,i.muted&&!d.muted||d.muted?0:a),d._iO.volume=a,b||(d.volume=a,d.options.volume=a),d},this.mute=function(){return d.muted=!0,d.isHTML5?d._a&&(d._a.muted=!0):j._setVolume(d.id,0),d},this.unmute=function(){d.muted=!1;var a="undefined"!=typeof d._iO.volume;return d.isHTML5?d._a&&(d._a.muted=!1):j._setVolume(d.id,a?d._iO.volume:d.options.volume),d},this.toggleMute=function(){return d.muted?d.unmute():d.mute()},this.onposition=this.onPosition=function(a,b,c){return o.push({position:parseInt(a,10),method:b,scope:"undefined"!=typeof c?c:d,fired:!1}),d},this.clearOnPosition=function(a,b){var c,a=parseInt(a,10);if(isNaN(a))return!1;for(c=0;c<o.length;c++)a===o[c].position&&(!b||b===o[c].method)&&(o[c].fired&&p--,o.splice(c,1))},this._processOnPosition=function(){var a,b;a=o.length;if(!a||!d.playState||p>=a)return!1;for(a-=1;0<=a;a--)if(b=o[a],!b.fired&&d.position>=b.position)b.fired=!0,p++,b.method.apply(b.scope,[b.position]);return!0},this._resetOnPosition=function(a){var b,c;b=o.length;if(!b)return!1;for(b-=1;0<=b;b--)if(c=o[b],c.fired&&a<=c.position)c.fired=!1,p--;return!0},r=function(){var a=d._iO,b=a.from,c=a.to,e,f;return f=function(){i._wD(d.id+': "to" time of '+c+" reached."),d.clearOnPosition(c,f),d.stop()},e=function(){i._wD(d.id+': playing "from" '+b),null!==c&&!isNaN(c)&&d.onPosition(c,f)},null!==b&&!isNaN(b)&&(a.position=b,a.multiShot=!1,e()),a},m=function(){var a,b=d._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&d.onPosition(parseInt(a,10),b[a])},q=function(){var a,b=d._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&d.clearOnPosition(parseInt(a,10))},l=function(){d.isHTML5&&nb(d)},h=function(){d.isHTML5&&ob(d)},e=function(a){a||(o=[],p=0),n=!1,d._hasTimer=null,d._a=null,d._html5_canplay=!1,d.bytesLoaded=null,d.bytesTotal=null,d.duration=d._iO&&d._iO.duration?d._iO.duration:null,d.durationEstimate=null,d.buffered=[],d.eqData=[],d.eqData.left=[],d.eqData.right=[],d.failures=0,d.isBuffering=!1,d.instanceOptions={},d.instanceCount=0,d.loaded=!1,d.metadata={},d.readyState=0,d.muted=!1,d.paused=!1,d.peakData={left:0,right:0},d.waveformData={left:[],right:[]},d.playState=0,d.position=null,d.id3={}},e(),this._onTimer=function(a){var e,f=!1,g={};if(d._hasTimer||a)return d._a&&(a||(0<d.playState||1===d.readyState)&&!d.paused)&&(e=d._get_html5_duration(),e!==b&&(b=e,d.duration=e,f=!0),d.durationEstimate=d.duration,e=1e3*d._a.currentTime||0,e!==c&&(c=e,f=!0),(f||a)&&d._whileplaying(e,g,g,g,g)),f},this._get_html5_duration=function(){var a=d._iO;return(a=d._a&&d._a.duration?1e3*d._a.duration:a&&a.duration?a.duration:null)&&!isNaN(a)&&Infinity!==a?a:null},this._apply_loop=function(a,b){!a.loop&&1<b&&i._wD("Note: Native HTML5 looping is infinite."),a.loop=1<b?"loop":""},this._setup_html5=function(a){var a=F(d._iO,a),b=decodeURI,c=Db?i._global_a:d._a,g=b(a.url),h=c&&c._t?c._t.instanceOptions:null,j;if(c){if(c._t){!Db&&g===b(s)?j=c:Db&&h.url===a.url&&(!s||s===h.url)&&(j=c);if(j)return d._apply_loop(c,a.loops),j}i._wD("setting URL on existing object: "+g+(s?", old URL: "+s:"")),Db&&c._t&&c._t.playState&&a.url!==h.url&&c._t.stop(),e(h&&h.url?a.url===h.url:s?s===a.url:!1),c.src=a.url,s=d.url=a.url,c._called_load=!1}else if(C("h5a"),d._a=a.autoLoad||a.autoPlay?new Audio(a.url):Nb&&10>opera.version()?new Audio(null):new Audio,c=d._a,c._called_load=!1,Db)i._global_a=c;return d.isHTML5=!0,d._a=c,c._t=d,f(),d._apply_loop(c,a.loops),a.autoLoad||a.autoPlay?d.load():(c.autobuffer=!1,c.preload="auto"),c},f=function(){if(d._a._added_events)return!1;var a;d._a._added_events=!0;for(a in Hb)Hb.hasOwnProperty(a)&&d._a&&d._a.addEventListener(a,Hb[a],!1);return!0},g=function(){var a;i._wD(k+"removing event listeners: "+d.id),d._a._added_events=!1;for(a in Hb)Hb.hasOwnProperty(a)&&d._a&&d._a.removeEventListener(a,Hb[a],!1)},this._onload=function(a){return a=!!a||!d.isHTML5&&8===t&&d.duration,i._wD('SMSound._onload(): "'+d.id+'"'+(a?" loaded.":" failed to load? - "+d.url),a?1:2),!a&&!d.isHTML5&&(!0===i.sandbox.noRemote&&i._wD("SMSound._onload(): "+db("noNet"),1),!0===i.sandbox.noLocal&&i._wD("SMSound._onload(): "+db("noLocal"),1)),d.loaded=a,d.readyState=a?3:2,d._onbufferchange(0),d._iO.onload&&d._iO.onload.apply(d,[a]),!0},this._onbufferchange=function(a){return 0===d.playState||a&&d.isBuffering||!a&&!d.isBuffering?!1:(d.isBuffering=1===a,d._iO.onbufferchange&&(i._wD("SMSound._onbufferchange(): "+a),d._iO.onbufferchange.apply(d)),!0)},this._onsuspend=function(){return d._iO.onsuspend&&(i._wD("SMSound._onsuspend()"),d._iO.onsuspend.apply(d)),!0},this._onfailure=function(a,b,c){d.failures++,i._wD('SMSound._onfailure(): "'+d.id+'" count '+d.failures),d._iO.onfailure&&1===d.failures?d._iO.onfailure(d,a,b,c):i._wD("SMSound._onfailure(): ignoring")},this._onfinish=function(){var a=d._iO.onfinish;d._onbufferchange(0),d._resetOnPosition(0),d.instanceCount&&(d.instanceCount--,!d.instanceCount&&(q(),d.playState=0,d.paused=!1,d.instanceCount=0,d.instanceOptions={},d._iO={},h(),d.isHTML5)&&(d.position=0),(!d.instanceCount||d._iO.multiShotEvents)&&a&&(i._wD('SMSound._onfinish(): "'+d.id+'"'),a.apply(d)))},this._whileloading=function(a,b,c,e){var f=d._iO;d.bytesLoaded=a,d.bytesTotal=b,d.duration=Math.floor(c),d.bufferLength=e,d.durationEstimate=!d.isHTML5&&!f.isMovieStar?f.duration?d.duration>f.duration?d.duration:f.duration:parseInt(d.bytesTotal/d.bytesLoaded*d.duration,10):d.duration,d.isHTML5||(d.buffered=[{start:0,end:d.duration}]),(3!==d.readyState||d.isHTML5)&&f.whileloading&&f.whileloading.apply(d)},this._whileplaying=function(a,b,c,e,f){var g=d._iO;return isNaN(a)||null===a?!1:(d.position=Math.max(0,a),d._processOnPosition(),!d.isHTML5&&8<t&&(g.usePeakData&&"undefined"!=typeof b&&b&&(d.peakData={left:b.leftPeak,right:b.rightPeak}),g.useWaveformData&&"undefined"!=typeof c&&c&&(d.waveformData={left:c.split(","),right:e.split(",")}),g.useEQData&&"undefined"!=typeof f&&f&&f.leftEQ&&(a=f.leftEQ.split(","),d.eqData=a,d.eqData.left=a,"undefined"!=typeof f.rightEQ&&f.rightEQ)&&(d.eqData.right=f.rightEQ.split(","))),1===d.playState&&(!d.isHTML5&&8===t&&!d.position&&d.isBuffering&&d._onbufferchange(0),g.whileplaying&&g.whileplaying.apply(d)),!0)},this._oncaptiondata=function(a){i._wD('SMSound._oncaptiondata(): "'+this.id+'" caption data received.'),d.captiondata=a,d._iO.oncaptiondata&&d._iO.oncaptiondata.apply(d,[a])},this._onmetadata=function(a,b){i._wD('SMSound._onmetadata(): "'+this.id+'" metadata received.');var c={},e,f;for(e=0,f=a.length;e<f;e++)c[a[e]]=b[e];d.metadata=c,d._iO.onmetadata&&d._iO.onmetadata.apply(d)},this._onid3=function(a,b){i._wD('SMSound._onid3(): "'+this.id+'" ID3 data received.');var c=[],e,f;for(e=0,f=a.length;e<f;e++)c[a[e]]=b[e];d.id3=F(d.id3,c),d._iO.onid3&&d._iO.onid3.apply(d)},this._onconnect=function(a){a=1===a,i._wD('SMSound._onconnect(): "'+d.id+'"'+(a?" connected.":" failed to connect? - "+d.url),a?1:2);if(d.connected=a)d.failures=0,kb(d.id)&&(d.getAutoPlay()?d.play(void 0,d.getAutoPlay()):d._iO.autoLoad&&d.load()),d._iO.onconnect&&d._iO.onconnect.apply(d,[a])},this._ondataerror=function(a){0<d.playState&&(i._wD("SMSound._ondataerror(): "+a),d._iO.ondataerror&&d._iO.ondataerror.apply(d))}},U=function(){return p.body||p._docElement||p.getElementsByTagName("div")[0]},l=function(a){return p.getElementById(a)},F=function(a,b){var c=a||{},d,e;d="undefined"==typeof b?i.defaultOptions:b;for(e in d)d.hasOwnProperty(e)&&"undefined"==typeof c[e]&&(c[e]="object"!=typeof d[e]||null===d[e]?d[e]:F(c[e],d[e]));return c},H={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},G=function(a,b){var c,d=!0,e="undefined"!=typeof b,f=i.setupOptions;if("undefined"==typeof a){d=[];for(c in f)f.hasOwnProperty(c)&&d.push(c);for(c in H)H.hasOwnProperty(c)&&("object"==typeof i[c]?d.push(c+": {...}"):i[c]instanceof Function?d.push(c+": function() {...}"):d.push(c));return i._wD(db("setup",d.join(", "))),!1}for(c in a)if(a.hasOwnProperty(c))if("object"!=typeof a[c]||null===a[c]||a[c]instanceof Array)e&&"undefined"!=typeof H[b]?i[b][c]=a[c]:"undefined"!=typeof f[c]?(i.setupOptions[c]=a[c],i[c]=a[c]):"undefined"==typeof H[c]?(jb(db("undefined"==typeof i[c]?"setupUndef":"setupError",c),2),d=!1):i[c]instanceof Function?i[c].apply(i,a[c]instanceof Array?a[c]:[a[c]]):i[c]=a[c];else{if("undefined"!=typeof H[c])return G(a[c],c);jb(db("undefined"==typeof i[c]?"setupUndef":"setupError",c),2),d=!1}return d},Bb=function(){function a(a){var a=Cb.call(a),b=a.length;return c?(a[1]="on"+a[1],3<b&&a.pop()):3===b&&a.push(!1),a}function b(a,b){var e=a.shift(),f=[d[b]];c?e[f](a[0],a[1]):e[f].apply(e,a)}var c=n.attachEvent,d={add:c?"attachEvent":"addEventListener",remove:c?"detachEvent":"removeEventListener"};return{add:function(){b(a(arguments),"add")},remove:function(){b(a(arguments),"remove")}}}(),Hb={abort:e(function(){i._wD(k+"abort: "+this._t.id)}),canplay:e(function(){var a=this._t,b;if(a._html5_canplay)return!0;a._html5_canplay=!0,i._wD(k+"canplay: "+a.id+", "+a.url),a._onbufferchange(0),b="undefined"!=typeof a._iO.position&&!isNaN(a._iO.position)?a._iO.position/1e3:null;if(a.position&&this.currentTime!==b){i._wD(k+"canplay: setting position to "+b);try{this.currentTime=b}catch(c){i._wD(k+"setting position of "+b+" failed: "+c.message,2)}}a._iO._oncanplay&&a._iO._oncanplay()}),canplaythrough:e(function(){var a=this._t;a.loaded||(a._onbufferchange(0),a._whileloading(a.bytesLoaded,a.bytesTotal,a._get_html5_duration()),a._onload(!0))}),ended:e(function(){var a=this._t;i._wD(k+"ended: "+a.id),a._onfinish()}),error:e(function(){i._wD(k+"error: "+this.error.code),this._t._onload(!1)}),loadeddata:e(function(){var a=this._t;i._wD(k+"loadeddata: "+this._t.id),!a._loaded&&!Mb&&(a.duration=a._get_html5_duration())}),loadedmetadata:e(function(){i._wD(k+"loadedmetadata: "+this._t.id)}),loadstart:e(function(){i._wD(k+"loadstart: "+this._t.id),this._t._onbufferchange(1)}),play:e(function(){i._wD(k+"play: "+this._t.id+", "+this._t.url),this._t._onbufferchange(0)}),playing:e(function(){i._wD(k+"playing: "+this._t.id),this._t._onbufferchange(0)}),progress:e(function(a){var b=this._t,c,d,e;c=0;var f="progress"===a.type,g=a.target.buffered,h=a.loaded||0,j=a.total||1;b.buffered=[];if(g&&g.length){for(c=0,d=g.length;c<d;c++)b.buffered.push({start:1e3*g.start(c),end:1e3*g.end(c)});c=1e3*(g.end(0)-g.start(0)),h=c/(1e3*a.target.duration);if(f&&1<g.length){e=[],d=g.length;for(c=0;c<d;c++)e.push(1e3*a.target.buffered.start(c)+"-"+1e3*a.target.buffered.end(c));i._wD(k+"progress: timeRanges: "+e.join(", "))}f&&!isNaN(h)&&i._wD(k+"progress: "+b.id+": "+Math.floor(100*h)+"% loaded")}isNaN(h)||(b._onbufferchange(0),b._whileloading(h,j,b._get_html5_duration()),h&&j&&h===j&&Hb.canplaythrough.call(this,a))}),ratechange:e(function(){i._wD(k+"ratechange: "+this._t.id)}),suspend:e(function(a){var b=this._t;i._wD(k+"suspend: "+b.id),Hb.progress.call(this,a),b._onsuspend()}),stalled:e(function(){i._wD(k+"stalled: "+this._t.id)}),timeupdate:e(function(){this._t._onTimer()}),waiting:e(function(){var a=this._t;i._wD(k+"waiting: "+a.id),a._onbufferchange(1)})},vb=function(a){return a.serverURL||a.type&&d(a.type)?!1:a.type?wb({type:a.type}):wb({url:a.url})||i.html5Only},yb=function(a,b){a&&(a.src=b)},wb=function(a){if(!i.useHTML5Audio||!i.hasHTML5)return!1;var b=a.url||null,a=a.type||null,c=i.audioFormats,e;if(a&&"undefined"!=typeof i.html5[a])return i.html5[a]&&!d(a);if(!xb){xb=[];for(e in c)c.hasOwnProperty(e)&&(xb.push(e),c[e].related&&(xb=xb.concat(c[e].related)));xb=RegExp("\\.("+xb.join("|")+")(\\?.*)?$","i")}return e=b?b.toLowerCase().match(xb):null,!e||!e.length?a&&(b=a.indexOf(";"),e=(-1!==b?a.substr(0,b):a).substr(6)):e=e[1],e&&"undefined"!=typeof i.html5[e]?b=i.html5[e]&&!d(e):(a="audio/"+e,b=i.html5.canPlayType({type:a}),b=(i.html5[e]=b)&&i.html5[a]&&!d(a)),b},Ab=function(){function a(a){var c,d,e=c=!1;if(!b||"function"!=typeof b.canPlayType)return c;if(a instanceof Array){for(c=0,d=a.length;c<d;c++)if(i.html5[a[c]]||b.canPlayType(a[c]).match(i.html5Test))e=!0,i.html5[a[c]]=!0,i.flash[a[c]]=!!a[c].match(Ub);c=e}else a=b&&"function"==typeof b.canPlayType?b.canPlayType(a):!1,c=!!a&&!!a.match(i.html5Test);return c}if(!i.useHTML5Audio||!i.hasHTML5)return!1;var b="undefined"!=typeof Audio?Nb&&10>opera.version()?new Audio(null):new Audio:null,c,d,e={},f;f=i.audioFormats;for(c in f)if(f.hasOwnProperty(c)&&(d="audio/"+c,e[c]=a(f[c].type),e[d]=e[c],c.match(Ub)?(i.flash[c]=!0,i.flash[d]=!0):(i.flash[c]=!1,i.flash[d]=!1),f[c]&&f[c].related))for(d=f[c].related.length-1;0<=d;d--)e["audio/"+f[c].related[d]]=e[c],i.html5[f[c].related[d]]=e[c],i.flash[f[c].related[d]]=e[c];return e.canPlayType=b?a:null,i.html5=F(i.html5,e),!0},P={notReady:"Not loaded yet - wait for soundManager.onready()",notOK:"Audio support is not available.",domError:"soundManager::createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.",spcWmode:"soundManager::createMovie(): Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+p.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for SWF to load with window focus...",waitImpatient:"soundManager: Getting impatient, still waiting for Flash%s...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:"soundManager: Retrying, waiting for 100% SWF load...",needFunction:"soundManager: Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"--- soundManager._debug(): Current sound objects ---",waitEI:"soundManager::initMovie(): Waiting for ExternalInterface call from Flash...",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager::initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",init:"soundManager::init()",didInit:"soundManager::init(): Already called?",flashJS:"soundManager: Attempting JS to Flash call...",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",shutdown:"soundManager.disable(): Shutting down",queue:"soundManager: Queueing %s handler",smFail:"soundManager: Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying .swf_timedout CSS...",fbLoaded:"Flash loaded",fbHandler:"soundManager::flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:"soundManager: Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:"soundManager: Got window focus.",mfOn:"mobileFlash::enabling on-screen flash repositioning",policy:"Enabling usePolicyFile for data access",setup:"soundManager.setup(): allowed parameters: %s",setupError:'soundManager.setup(): "%s" cannot be assigned with this method.',setupUndef:'soundManager.setup(): Could not find option "%s"',setupLate:"soundManager.setup(): url + flashVersion changes will not take effect until reboot().",h5a:"creating HTML5 Audio() object",noURL:"soundManager: Flash URL required. Call soundManager.setup({url:...}) to get started."},db=function(){var a=Cb.call(arguments),b=a.shift(),b=P&&P[b]?P[b]:"",c,d;if(b&&a&&a.length)for(c=0,d=a.length;c<d;c++)b=b.replace("%s",a[c]);return b},hb=function(a){return 8===t&&1<a.loops&&a.stream&&(C("as2loop"),a.stream=!1),a},ib=function(a,b){return a&&!a.usePolicyFile&&(a.onid3||a.usePeakData||a.useWaveformData||a.useEQData)&&(i._wD((b||"")+db("policy")),a.usePolicyFile=!0),a},jb=function(a){"undefined"!=typeof console&&"undefined"!=typeof console.warn?console.warn(a):i._wD(a)},q=function(){return!1},$=function(a){for(var b in a)a.hasOwnProperty(b)&&"function"==typeof a[b]&&(a[b]=q)},_=function(a){"undefined"==typeof a&&(a=!1);if(A||a)C("smFail",2),i.disable(a)},ab=function(a){var b=null;if(a)if(a.match(/\.swf(\?.*)?$/i)){if(b=a.substr(a.toLowerCase().lastIndexOf(".swf?")+4))return a}else a.lastIndexOf("/")!==a.length-1&&(a+="/");return a=(a&&-1!==a.lastIndexOf("/")?a.substr(0,a.lastIndexOf("/")+1):"./")+i.movieURL,i.noSWFCache&&(a+="?ts="+(new Date).getTime()),a},N=function(){t=parseInt(i.flashVersion,10),8!==t&&9!==t&&(i._wD(db("badFV",t,8)),i.flashVersion=t=8);var a=i.debugMode||i.debugFlash?"_debug.swf":".swf";i.useHTML5Audio&&!i.html5Only&&i.audioFormats.mp4.required&&9>t&&(i._wD(db("needfl9")),i.flashVersion=t=9),i.version=i.versionNumber+(i.html5Only?" (HTML5-only mode)":9===t?" (AS3/Flash 9)":" (AS2/Flash 8)"),8<t?(i.defaultOptions=F(i.defaultOptions,i.flash9Options),i.features.buffering=!0,i.defaultOptions=F(i.defaultOptions,i.movieStarOptions),i.filePatterns.flash9=RegExp("\\.(mp3|"+Yb.join("|")+")(\\?.*)?$","i"),i.features.movieStar=!0):i.features.movieStar=!1,i.filePattern=i.filePatterns[8!==t?"flash9":"flash8"],i.movieURL=(8===t?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",a),i.features.peakData=i.features.waveformData=i.features.eqData=8<t},X=function(a,b){if(!j)return!1;j._setPolling(a,b)},Y=function(){i.debugURLParam.test(o)&&(i.debugMode=!0);if(l(i.debugID))return!1;var a,b,c,d;if(i.debugMode&&!l(i.debugID)&&(!Qb||!i.useConsole||!i.consoleOnly)){a=p.createElement("div"),a.id=i.debugID+"-toggle",b={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},a.appendChild(p.createTextNode("-")),a.onclick=gb,a.title="Toggle SM2 debug console",m.match(/msie 6/i)&&(a.style.position="absolute",a.style.cursor="hand");for(d in b)b.hasOwnProperty(d)&&(a.style[d]=b[d]);b=p.createElement("div"),b.id=i.debugID,b.style.display=i.debugMode?"block":"none";if(i.debugMode&&!l(a.id)){try{c=U(),c.appendChild(a)}catch(e){throw Error(db("domError")+" \n"+e.toString())}c.appendChild(b)}}},kb=this.getSoundById,C=function(a,b){return a?i._wD(db(a),b):""},o.indexOf("sm2-debug=alert")+1&&i.debugMode&&(i._wD=function(b){a.alert(b)}),gb=function(){var a=l(i.debugID),b=l(i.debugID+"-toggle");if(!a)return!1;v?(b.innerHTML="+",a.style.display="none"):(b.innerHTML="-",a.style.display="block"),v=!v},w=function(a,b,c){if("undefined"!=typeof sm2Debugger)try{sm2Debugger.handleEvent(a,b,c)}catch(d){}return!0},fb=function(){var a=[];return i.debugMode&&a.push("sm2_debug"),i.debugFlash&&a.push("flash_debug"),i.useHighPerformance&&a.push("high_performance"),a.join(" ")},eb=function(){var a=db("fbHandler"),b=i.getMoviePercent(),c={type:"FLASHBLOCK"};if(i.html5Only)return!1;if(i.ok()){if(i.didFlashBlock&&i._wD(a+": Unblocked"),i.oMC)i.oMC.className=[fb(),"movieContainer","swf_loaded"+(i.didFlashBlock?" swf_unblocked":"")].join(" ")}else tb&&(i.oMC.className=fb()+" movieContainer "+(null===b?"swf_timedout":"swf_error"),i._wD(a+": "+db("fbTimeout")+(b?" ("+db("fbLoaded")+")":""))),i.didFlashBlock=!0,J({type:"ontimeout",ignoreInit:!0,error:c}),W(c)},I=function(a,b,c){"undefined"==typeof u[a]&&(u[a]=[]),u[a].push({method:b,scope:c||null,fired:!1})},J=function(a){a||(a={type:i.ok()?"onready":"ontimeout"});if(!z&&a&&!a.ignoreInit||"ontimeout"===a.type&&(i.ok()||A&&!a.ignoreInit))return!1;var b={success:a&&a.ignoreInit?i.ok():!A},c=a&&a.type?u[a.type]||[]:[],d=[],e,f=[b],g=tb&&i.useFlashBlock&&!i.ok();a.error&&(f[0].error=a.error);for(b=0,e=c.length;b<e;b++)!0!==c[b].fired&&d.push(c[b]);if(d.length){i._wD("soundManager: Firing "+d.length+" "+a.type+"() item"+(1===d.length?"":"s"));for(b=0,e=d.length;b<e;b++)if(d[b].scope?d[b].method.apply(d[b].scope,f):d[b].method.apply(this,f),!g)d[b].fired=!0}return!0},K=function(){n.setTimeout(function(){i.useFlashBlock&&eb(),J(),"function"==typeof i.onload&&(C("onload",1),i.onload.apply(n),C("onloadOK",1)),i.waitForWindowLoad&&Bb.add(n,"load",K)},1)},Fb=function(){if("undefined"!=typeof Eb)return Eb;var a=!1,b=navigator,c=b.plugins,d,e=n.ActiveXObject;if(c&&c.length)(b=b.mimeTypes)&&b["application/x-shockwave-flash"]&&b["application/x-shockwave-flash"].enabledPlugin&&b["application/x-shockwave-flash"].enabledPlugin.description&&(a=!0);else if("undefined"!=typeof e){try{d=new e("ShockwaveFlash.ShockwaveFlash")}catch(f){}a=!!d}return Eb=a},ub=function(){var a,b,c=i.audioFormats;if(Jb&&m.match(/os (1|2|3_0|3_1)/i)){if(i.hasHTML5=!1,i.html5Only=!0,i.oMC)i.oMC.style.display="none"}else if(i.useHTML5Audio){if(!i.html5||!i.html5.canPlayType)i._wD("SoundManager: No HTML5 Audio() support detected."),i.hasHTML5=!1;Pb&&i._wD("soundManager::Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(Eb?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)}if(i.useHTML5Audio&&i.hasHTML5)for(b in c)c.hasOwnProperty(b)&&(c[b].required&&!i.html5.canPlayType(c[b].type)||i.preferFlash&&(i.flash[b]||i.flash[c[b].type]))&&(a=!0);return i.ignoreFlash&&(a=!1),i.html5Only=i.hasHTML5&&i.useHTML5Audio&&!a,!i.html5Only},sb=function(a){var b,c,d=0;if(a instanceof Array){for(b=0,c=a.length;b<c;b++)if(a[b]instanceof Object){if(i.canPlayMIME(a[b].type)){d=b;break}}else if(i.canPlayURL(a[b])){d=b;break}a[d].url&&(a[d]=a[d].url),a=a[d]}return a},nb=function(a){a._hasTimer||(a._hasTimer=!0,!Ob&&i.html5PollingInterval&&(null===rb&&0===qb&&(rb=n.setInterval(pb,i.html5PollingInterval)),qb++))},ob=function(a){a._hasTimer&&(a._hasTimer=!1,!Ob&&i.html5PollingInterval&&qb--)},pb=function(){var a;if(null!==rb&&!qb)return n.clearInterval(rb),rb=null,!1;for(a=i.soundIDs.length-1;0<=a;a--)i.sounds[i.soundIDs[a]].isHTML5&&i.sounds[i.soundIDs[a]]._hasTimer&&i.sounds[i.soundIDs[a]]._onTimer()},W=function(a){a="undefined"!=typeof a?a:{},"function"==typeof i.onerror&&i.onerror.apply(n,[{type:"undefined"!=typeof a.type?a.type:null}]),"undefined"!=typeof a.fatal&&a.fatal&&i.disable()},Gb=function(){if(!Pb||!Fb())return!1;var a=i.audioFormats,b,c;for(c in a)if(a.hasOwnProperty(c)&&("mp3"===c||"mp4"===c))if(i._wD("soundManager: Using flash fallback for "+c+" format"),i.html5[c]=!1,a[c]&&a[c].related)for(b=a[c].related.length-1;0<=b;b--)i.html5[a[c].related[b]]=!1},this._setSandboxType=function(a){var b=i.sandbox;b.type=a,b.description=b.types["undefined"!=typeof b.types[a]?a:"unknown"],i._wD("Flash security sandbox type: "+b.type),"localWithFile"===b.type?(b.noRemote=!0,b.noLocal=!1,C("secNote",2)):"localWithNetwork"===b.type?(b.noRemote=!1,b.noLocal=!0):"localTrusted"===b.type&&(b.noRemote=!1,b.noLocal=!1)},this._externalInterfaceOK=function(a,b){if(i.swfLoaded)return!1;var c,d=(new Date).getTime();i._wD("soundManager::externalInterfaceOK()"+(a?" (~"+(d-a)+" ms)":"")),w("swf",!0),w("flashtojs",!0),i.swfLoaded=!0,Sb=!1,Pb&&Gb();if(!b||b.replace(/\+dev/i,"")!==i.versionNumber.replace(/\+dev/i,""))return c='soundManager: Fatal: JavaScript file build "'+i.versionNumber+'" does not match Flash SWF build "'+b+'" at '+i.url+". Ensure both are up-to-date.",setTimeout(function(){throw Error(c)},0),!1;setTimeout(s,Kb?100:1)},V=function(a,b){function c(){i._wD("-- SoundManager 2 "+i.version+(!i.html5Only&&i.useHTML5Audio?i.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(i.html5Only?"":(i.useHighPerformance?", high performance mode, ":", ")+((i.flashPollingInterval?"custom ("+i.flashPollingInterval+"ms)":"normal")+" polling")+(i.wmode?", wmode: "+i.wmode:"")+(i.debugFlash?", flash debug mode":"")+(i.useFlashBlock?", flashBlock mode":""))+" --",1)}function d(a,b){return'<param name="'+a+'" value="'+b+'" />'}if(x&&y)return!1;if(i.html5Only)return N(),c(),i.oMC=l(i.movieID),s(),y=x=!0,!1;var e=b||i.url,f=i.altURL||e,g=U(),h=fb(),j=null,j=p.getElementsByTagName("html")[0],k,n,o,j=j&&j.dir&&j.dir.match(/rtl/i),a="undefined"==typeof a?i.id:a;N(),i.url=ab(Vb?e:f),b=i.url,i.wmode=!i.wmode&&i.useHighPerformance?"transparent":i.wmode,null!==i.wmode&&(m.match(/msie 8/i)||!Kb&&!i.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(C("spcWmode"),i.wmode=null),g={name:a,id:a,src:b,quality:"high",allowScriptAccess:i.allowScriptAccess,bgcolor:i.bgColor,pluginspage:Wb+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:i.wmode,hasPriority:"true"},i.debugFlash&&(g.FlashVars="debug=1"),i.wmode||delete g.wmode;if(Kb)e=p.createElement("div"),n=['<object id="'+a+'" data="'+b+'" type="'+g.type+'" title="'+g.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Wb+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',d("movie",b),d("AllowScriptAccess",i.allowScriptAccess),d("quality",g.quality),i.wmode?d("wmode",i.wmode):"",d("bgcolor",i.bgColor),d("hasPriority","true"),i.debugFlash?d("FlashVars",g.FlashVars):"","</object>"].join("");else for(k in e=p.createElement("embed"),g)g.hasOwnProperty(k)&&e.setAttribute(k,g[k]);Y(),h=fb();if(g=U())if(i.oMC=l(i.movieID)||p.createElement("div"),i.oMC.id)o=i.oMC.className,i.oMC.className=(o?o+" ":"movieContainer")+(h?" "+h:""),i.oMC.appendChild(e),Kb&&(k=i.oMC.appendChild(p.createElement("div")),k.className="sm2-object-box",k.innerHTML=n),y=!0;else{i.oMC.id=i.movieID,i.oMC.className="movieContainer "+h,k=h=null;if(!i.useFlashBlock)if(i.useHighPerformance)h={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"};else if(h={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},j)h.left=Math.abs(parseInt(h.left,10))+"px";Lb&&(i.oMC.style.zIndex=1e4);if(!i.debugFlash)for(o in h)h.hasOwnProperty(o)&&(i.oMC.style[o]=h[o]);try{Kb||i.oMC.appendChild(e),g.appendChild(i.oMC),Kb&&(k=i.oMC.appendChild(p.createElement("div")),k.className="sm2-object-box",k.innerHTML=n),y=!0}catch(q){throw Error(db("domError")+" \n"+q.toString())}}return x=!0,c(),i._wD("soundManager::createMovie(): Trying to load "+b+(!Vb&&i.altURL?" (alternate URL)":""),1),!0},Q=function(){return i.html5Only?(V(),!1):j?!1:i.url?(j=i.getMovie(i.id),j||(bb?(Kb?i.oMC.innerHTML=cb:i.oMC.appendChild(bb),bb=null,x=!0):V(i.id,i.url),j=i.getMovie(i.id)),j&&C("waitEI"),"function"==typeof i.oninitmovie&&setTimeout(i.oninitmovie,1),!0):(C("noURL"),!1)},L=function(){setTimeout(M,1e3)},M=function(){var a,b=!1;if(!i.url||lb)return!1;lb=!0,Bb.remove(n,"load",L);if(Sb&&!Rb)return C("waitFocus"),!1;z||(a=i.getMoviePercent(),i._wD(db("waitImpatient",0<a?" (SWF "+a+"% loaded)":"")),0<a&&100>a&&(b=!0)),setTimeout(function(){a=i.getMoviePercent();if(b)return lb=!1,i._wD(db("waitSWF")),n.setTimeout(L,1),!1;z||(i._wD("soundManager: No Flash response within expected time.\nLikely causes: "+(0===a?"Loading "+i.movieURL+" may have failed (and/or Flash "+t+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(i.debugFlash?" "+db("checkSWF"):""),2),!Vb&&a&&(C("localFail",2),i.debugFlash||C("tryDebug",2)),0===a&&i._wD(db("swf404",i.url)),w("flashtojs",!1,": Timed out"+Vb?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")),!z&&Tb&&(null===a?i.useFlashBlock||0===i.flashLoadTimeout?(i.useFlashBlock&&eb(),C("waitForever")):_(!0):0===i.flashLoadTimeout?C("waitForever"):_(!0))},i.flashLoadTimeout)},O=function(){return Rb||!Sb?(Bb.remove(n,"focus",O),!0):(Rb=Tb=!0,C("gotFocus"),lb=!1,L(),Bb.remove(n,"focus",O),!0)},Ib=function(){var a,b=[];if(i.useHTML5Audio&&i.hasHTML5){for(a in i.audioFormats)i.audioFormats.hasOwnProperty(a)&&b.push(a+": "+i.html5[a]+(!i.html5[a]&&Eb&&i.flash[a]?" (using flash)":i.preferFlash&&i.flash[a]&&Eb?" (preferring flash)":i.html5[a]?"":" ("+(i.audioFormats[a].required?"required, ":"")+"and no flash support)"));i._wD("-- SoundManager 2: HTML5 support tests ("+i.html5Test+"): "+b.join(", ")+" --",1)}},E=function(a){if(z)return!1;if(i.html5Only)return i._wD("-- SoundManager 2: loaded --"),z=!0,K(),w("onload",!0),!0;var b=!0,c;if(!i.useFlashBlock||!i.flashLoadTimeout||i.getMoviePercent())z=!0,A&&(c={type:!Eb&&tb?"NO_FLASH":"INIT_TIMEOUT"});return i._wD("-- SoundManager 2 "+(A?"failed to load":"loaded")+" ("+(A?"Flash security/load error":"OK")+") --",1),A||a?(i.useFlashBlock&&i.oMC&&(i.oMC.className=fb()+" "+(null===i.getMoviePercent()?"swf_timedout":"swf_error")),J({type:"ontimeout",error:c,ignoreInit:!0}),w("onload",!1),W(c),b=!1):w("onload",!0),A||(i.waitForWindowLoad&&!B?(C("waitOnload"),Bb.add(n,"load",K)):(i.waitForWindowLoad&&B&&C("docLoaded"),K())),b},r=function(){var a,b=i.setupOptions;for(a in b)b.hasOwnProperty(a)&&("undefined"==typeof i[a]?i[a]=b[a]:i[a]!==b[a]&&(i.setupOptions[a]=i[a]))},s=function(){C("init");if(z)return C("didInit"),!1;if(i.html5Only)return z||(Bb.remove(n,"load",i.beginDelayedInit),i.enabled=!0,E()),!0;Q();try{C("flashJS"),j._externalInterfaceTest(!1),X(!0,i.flashPollingInterval||(i.useHighPerformance?10:50)),i.debugMode||j._disableDebug(),i.enabled=!0,w("jstoflash",!0),i.html5Only||Bb.add(n,"unload",q)}catch(a){return i._wD("js/flash exception: "+a.toString()),w("jstoflash",!1),W({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),_(!0),E(),!1}return E(),Bb.remove(n,"load",i.beginDelayedInit),!0},R=function(){if(T)return!1;T=!0,r(),Y();var a=null,a=null,b="undefined"!=typeof console&&"function"==typeof console.log,c=o.toLowerCase();return-1!==c.indexOf("sm2-usehtml5audio=")&&(a="1"===c.charAt(c.indexOf("sm2-usehtml5audio=")+18),b&&console.log((a?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),i.setup({useHTML5Audio:a})),-1!==c.indexOf("sm2-preferflash=")&&(a="1"===c.charAt(c.indexOf("sm2-preferflash=")+16),b&&console.log((a?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),i.setup({preferFlash:a})),!Eb&&i.hasHTML5&&(i._wD("SoundManager: No Flash detected"+(i.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5.")),i.setup({useHTML5Audio:!0,preferFlash:!1})),Ab(),i.html5.usingFlash=ub(),tb=i.html5.usingFlash,Ib(),!Eb&&tb&&(C("needFlash"),i.setup({flashLoadTimeout:1})),p.removeEventListener&&p.removeEventListener("DOMContentLoaded",R,!1),Q(),!0},zb=function(){return"complete"===p.readyState&&(R(),p.detachEvent("onreadystatechange",zb)),!0},S=function(){B=!0,Bb.remove(n,"load",S)},Fb(),Bb.add(n,"focus",O),Bb.add(n,"load",L),Bb.add(n,"load",S),p.addEventListener?p.addEventListener("DOMContentLoaded",R,!1):p.attachEvent?p.attachEvent("onreadystatechange",zb):(w("onload",!1),W({type:"NO_DOM2_EVENTS",fatal:!0}))}var c=null;if("undefined"==typeof SM2_DEFER||!SM2_DEFER)c=new b;a.SoundManager=b,a.soundManager=c}(window),define("soundmanager2",function(){}),define("easing",["jquery"],function(a){a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*.3*1.5);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-0.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){return c<f/2?a.easing.easeInBounce(b,c*2,0,e,f)*.5+d:a.easing.easeOutBounce(b,c*2-f,0,e,f)*.5+e*.5+d}})}),define("holiday",["jquery","carousel2","soundmanager2","easing"],function(a,b){return Holiday=function(){this.soundIcon=a("#octonovemcember .audio"),this.countdownInterval,this.initialize()},Holiday.prototype={initialize:function(){this.createCarousel(),this.createSoundEffect(),this.createFAQ(),this.startCountdown()},startCountdown:function(){var a=this;this.countdownInterval=setInterval(function(){a.updateCountdown(a)},6e4)},updateCountdown:function(b){var c=parseInt(a(".timer .days .value span").html(),10),d=parseInt(a(".timer .hours .value span").html(),10),e=parseInt(a(".timer .minutes .value span").html(),10),f=e-1,g=d,h=c;f===-1&&(f=59,g-=1,g===-1&&(g=23,h-=1,h===-1&&(h=0,g=0,f=0,this.playCompletionAnimation())));var i=a(".timer .days .value span");c!=h?i.stop().animate({opacity:0},1e3,"easeOutCubic",function(){i.html(h),i.stop().animate({opacity:1},1e3,"easeOutCubic")}):i.html(h);var j=a(".timer .hours .value span");d!=g?j.stop().animate({opacity:0},1e3,"easeOutCubic",function(){j.html(g),j.stop().animate({opacity:1},1e3,"easeOutCubic")}):j.html(g);var k=a(".timer .minutes .value span");e!=f?k.stop().animate({opacity:0},1e3,"easeOutCubic",function(){k.html(f),k.stop().animate({opacity:1},1e3,"easeOutCubic")}):k.html(f)},playCompletionAnimation:function(){clearInterval(this.countdownInterval);var b=a(".countdown-wrapper h2");b.stop().animate({opacity:0},1e3,"easeOutCubic",function(){b.html("Happy OctoNovemCember!"),b.stop().delay(500).animate({opacity:1},3e3,"easeOutCubic",function(){setTimeout(function(){location.reload()},1e4)})}),a(".timer .days, .timer .hours, .timer .minutes").stop().animate({opacity:0},500,"easeOutCubic",function(){a(".timer").stop().css({position:"relative"}).animate({opacity:0,top:"30px"},1500,"easeInOutCubic")})},createSoundEffect:function(){var a=this;soundManager.debugMode=!1,soundManager.setup({url:"/gui/swf/",onready:function(){soundManager.createSound({id:"OctoNovemCember",url:"/gui/sound/octonovemcember.mp3",autoLoad:!0,autoPlay:!1,debugMode:!1,onload:function(){},volume:50})}}),this.soundIcon.on("click",function(a){a.preventDefault(),soundManager.play("OctoNovemCember")})},createFAQ:function(){a(".faq-main").on("click",function(b){b.preventDefault(),a(this).hasClass("open")?(a(this).removeClass("open"),a(this).next("ul").slideUp("slow")):(a(this).addClass("open"),a(this).next("ul").slideDown("slow"))}),a(".faq-list a").on("click",function(b){b.preventDefault(),a(this).hasClass("open")?(a(this).removeClass("open"),a(this).next("p").slideUp("slow")):(a(this).addClass("open"),a(this).next("p").slideDown("slow"))})},createCarousel:function(){b({dom:a("#holiday .carousel2"),shown:5})}},Holiday}),define("third-party/json",[],function(){var JSON;return JSON||(JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)typeof rep[c]=="string"&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),JSON}),define("storage",["third-party/json"],function(a){var b=!!window.localStorage||!!window.sessionStorage;if(b)try{window.sessionStorage.setItem("_hasSupport","test"),window.sessionStorage.removeItem("_hasSupport")}catch(c){b=!1}if(!b){var d=function(b){function c(a,b,c){var d,e;c?(d=new Date,d.setTime(d.getTime()+c*24*60*60*1e3),e="; expires="+d.toGMTString()):e="",document.cookie=a+"="+b+e+"; path=/"}function d(a){var b=a+"=",c=document.cookie.split(";"),d,e;for(d=0;d<c.length;d++){e=c[d];while(e.charAt(0)==" ")e=e.substring(1,e.length);if(e.indexOf(b)===0)return e.substring(b.length,e.length)}return null}function e(d){d=a.stringify(d),b=="session"?window.name=d:c("localStorage",d,365)}function f(){b=="session"?window.name="":c("localStorage","",365)}function g(){var c=b=="session"?window.name:d("localStorage");return c?a.parse(c):{}}var h=g();return{length:0,clear:function(){h={},this.length=0,f()},getItem:function(a){return h[a]===undefined?null:h[a]},key:function(a){var b=0;for(var c in h){if(b==a)return c;b++}return null},removeItem:function(a){delete h[a],this.length--,e(h)},setItem:function(a,b){h[a]=b+"",this.length++,e(h)}}};window.localStorage=new d("local"),window.sessionStorage=new d("session")}var e=function(b){var c=window[b+"Storage"],d=function(b,d){c.setItem(b,a.stringify(d))},e=function(b){var d=c.getItem(b);try{return a.parse(d)}catch(e){return d}},f={};return f.prototype=c,f.getItem=e,f.setItem=d,f};return{local:b?new e("local"):new d("local"),session:b?new e("session"):new d("session")}}),define("cookie",[],function(){function a(){var a,b,d=document.cookie.split(/;/);for(a in c)c[a]=undefined;for(a=0;a<d.length;a++)b=/\s*([^\=]+)=?(.+)/.exec(d[a]),b&&b.length>1&&(c[b[1]]=b[2]);return c}function b(a,b,c,d,e,f){if(typeof a=="undefined"||typeof b=="undefined")return!1;var g,h=a+"="+b;return c&&!isNaN(c)&&(g=new Date,g.setDate(g.getDate()+c),h+="; expires="+g.toUTCString()),h+="; path="+(e||"/"),f||(h+="; domain=."+(d?d:wsm.cookieDomain)),document.cookie=h,h}var c={};return function(c,d){var e;return c===undefined?a():(d&&(c={name:c,value:d}),typeof c=="string"?a()[c]:(typeof c=="object"&&(e=b(c.name,c.value,c.expires,c.domain,c.path,c.hostonly)),e?(a()[c.name]=c.value,e):!1))}}),define("track",["jquery"],function(a){var b=window._gaq,c=a(document),d=function(){c.on("click",".track",e)},e=function(b){var c=a(this),d={category:c.data("trackCategory"),action:c.data("trackAction"),label:f(c)};g(d)},f=function(a){var b=a[0];return a.data("trackLabel")?a.data("trackLabel"):!b.href||a.attr("href").indexOf("http")!==0&&a.attr("href").indexOf("mailto")!==0?b.pathname||location.pathname:b.href},g=function(a){if(b&&a.category&&a.action&&a.label){var c=["_track"+(a.type||"Event"),a.category,a.action,a.label,a.hasOwnProperty("value")?a.value:undefined,a.hasOwnProperty("noninteraction")?a.noninteraction:undefined];b.push(c)}};return a(d),g}),define("beacon",[],function(){var a=window.wsm,b=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+="&"+encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b};return function(c){var d=c.host||a.beaconHost,e=c.event||"unknown",f=b(c.values);if(d.length>0){var g=new Image;g.src="//"+d+"/__wsm.gif?wsme="+e+f}}}),define("third-party/hoverIntent",["jquery"],function(a){$.fn.hoverIntent=function(b,c){var d={sensitivity:7,interval:100,timeout:0};d=$.extend(d,c?{over:b,out:c}:b);var e,f,g,h,i=function(a){e=a.pageX,f=a.pageY},j=function(a,b){b.hoverIntent_t=clearTimeout(b.hoverIntent_t);if(Math.abs(g-e)+Math.abs(h-f)<d.sensitivity)return $(b).unbind("mousemove",i),b.hoverIntent_s=1,d.over.apply(b,[a]);g=e,h=f,b.hoverIntent_t=setTimeout(function(){j(a,b)},d.interval)},k=function(a,b){return b.hoverIntent_t=clearTimeout(b.hoverIntent_t),b.hoverIntent_s=0,d.out.apply(b,[a])},l=function(b){var c=a.extend({},b),e=this;e.hoverIntent_t&&(e.hoverIntent_t=clearTimeout(e.hoverIntent_t)),b.type=="mouseenter"?(g=c.pageX,h=c.pageY,$(e).bind("mousemove",i),e.hoverIntent_s!=1&&(e.hoverIntent_t=setTimeout(function(){j(c,e)},d.interval))):($(e).unbind("mousemove",i),e.hoverIntent_s==1&&(e.hoverIntent_t=setTimeout(function(){k(c,e)},d.timeout)))};return this.bind("mouseenter",l).bind("mouseleave",l)}}),define("third-party/zeroclipboard",[],function(){var a={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(a){return typeof a=="string"&&(a=document.getElementById(a)),a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a),this.className+=" "+a},a.removeClass=function(a){var b=this.className.split(/\s+/),c=-1;for(var d=0;d<b.length;d++)b[d]==a&&(c=d,d=b.length);return c>-1&&(b.splice(c,1),this.className=b.join(" ")),this},a.hasClass=function(a){return!!this.className.match(new RegExp("\\s*"+a+"\\s*"))}),a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,b,c){var d=this.clients[a];d&&d.receiveEvent(b,c)},register:function(a,b){this.clients[a]=b},getDOMObjectPosition:function(a,b){var c={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};while(a&&a!=b)c.left+=a.offsetLeft,c.top+=a.offsetTop,a=a.offsetParent;return c},Client:function(b){this.handlers={},this.id=a.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,a.register(this.id,this),b&&this.glue(b)}};return a.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(b,c,d){this.domElement=a.$(b);var e=99;this.domElement.style.zIndex&&(e=parseInt(this.domElement.style.zIndex,10)+1),typeof c=="string"?c=a.$(c):typeof c=="undefined"&&(c=document.getElementsByTagName("body")[0]);var f=a.getDOMObjectPosition(this.domElement,c);this.div=document.createElement("div");var g=this.div.style;g.position="absolute",g.left=""+f.left+"px",g.top=""+f.top+"px",g.width=""+f.width+"px",g.height=""+f.height+"px",g.zIndex=e;if(typeof d=="object")for(addedStyle in d)g[addedStyle]=d[addedStyle];c.appendChild(this.div),this.div.innerHTML=this.getHTML(f.width,f.height)},getHTML:function(b,c){var d="",e="id="+this.id+"&width="+b+"&height="+c;if(navigator.userAgent.match(/MSIE/)){var f=location.href.match(/^https/i)?"https://":"http://";d+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+f+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+b+'" height="'+c+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+a.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+e+'"/><param name="wmode" value="transparent"/></object>'}else d+='<embed id="'+this.movieId+'" src="'+a.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+b+'" height="'+c+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+e+'" wmode="transparent" />';return d},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var a=document.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(b){}this.domElement=null,this.div=null}},reposition:function(b){b&&(this.domElement=a.$(b),this.domElement||this.hide());if(this.domElement&&this.div){var c=a.getDOMObjectPosition(this.domElement),d=this.div.style;d.left=""+c.left+"px",d.top=""+c.top+"px"}},setText:function(a){this.clipText=a,this.ready&&this.movie.setText(a)},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,""),this.handlers[a]||(this.handlers[a]=[]),this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a,this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,b){a=a.toString().toLowerCase().replace(/^on/,"");switch(a){case"load":this.movie=document.getElementById(this.movieId);if(!this.movie){var c=this;setTimeout(function(){c.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var c=this;setTimeout(function(){c.receiveEvent("load",null)},100),this.ready=!0;return}this.ready=!0,this.movie.setText(this.clipText),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[a])for(var d=0,e=this.handlers[a].length;d<e;d++){var f=this.handlers[a][d];typeof f=="function"?f(this,b):typeof f=="object"&&f.length==2?f[0][f[1]](this,b):typeof f=="string"&&window[f](this,b)}}},window.ZeroClipboard=a,a}),define("text",["module"],function(a){var b=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],c=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,d=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,e=typeof location!="undefined"&&location.href,f=e&&location.protocol&&location.protocol.replace(/\:/,""),g=e&&location.hostname,h=e&&(location.port||undefined),i=[],j=a.config(),k,l;return k={version:"2.0.0",strip:function(a){if(a){a=a.replace(c,"");var b=a.match(d);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var a,c,d;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(c=0;c<3;c++){d=b[c];try{a=new ActiveXObject(d)}catch(e){}if(a){b=[d];break}}return a},parseName:function(a){var b=!1,c=a.indexOf("."),d=a.substring(0,c),e=a.substring(c+1,a.length);return c=e.indexOf("!"),c!==-1&&(b=e.substring(c+1,e.length),b=b==="strip",e=e.substring(0,c)),{moduleName:d,ext:e,strip:b}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e=k.xdRegExp.exec(a),f,g,h;return e?(f=e[2],g=e[3],g=g.split(":"),h=g[1],g=g[0],(!f||f===b)&&(!g||g===c)&&(!h&&!g||h===d)):!0},finishLoad:function(a,b,c,d){c=b?k.strip(c):c,j.isBuild&&(i[a]=c),d(c)},load:function(a,b,c,d){if(d.isBuild&&!d.inlineText){c();return}j.isBuild=d.isBuild;var i=k.parseName(a),l=i.moduleName+"."+i.ext,m=b.toUrl(l),n=j.useXhr||k.useXhr;!e||n(m,f,g,h)?k.get(m,function(b){k.finishLoad(a,i.strip,b,c)},function(a){c.error&&c.error(a)}):b([l],function(a){k.finishLoad(i.moduleName+"."+i.ext,i.strip,a,c)})},write:function(a,b,c,d){if(i.hasOwnProperty(b)){var e=k.jsEscape(i[b]);c.asModule(a+"!"+b,"define(function () { return '"+e+"';});\n")}},writeFile:function(a,b,c,d,e){var f=k.parseName(b),g=f.moduleName+"."+f.ext,h=c.toUrl(f.moduleName+"."+f.ext)+".js";k.load(g,c,function(b){var c=function(a){return d(h,a)};c.asModule=function(a,b){return d.asModule(a,h,b)},k.write(a,g,c,e)},e)}},typeof process!="undefined"&&process.versions&&!!process.versions.node?(l=require.nodeRequire("fs"),k.get=function(a,b){var c=l.readFileSync(a,"utf8");c.indexOf("﻿")===0&&(c=c.substring(1)),b(c)}):k.createXhr()?k.get=function(a,b,c){var d=k.createXhr();d.open("GET",a,!0),j.onXhr&&j.onXhr(d,a),d.onreadystatechange=function(e){var f,g;d.readyState===4&&(f=d.status,f>399&&f<600?(g=new Error(a+" HTTP status: "+f),g.xhr=d,c(g)):b(d.responseText))},d.send(null)}:typeof Packages!="undefined"&&(k.get=function(a,b){var c="utf-8",d=new java.io.File(a),e=java.lang.System.getProperty("line.separator"),f=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(d),c)),g,h,i="";try{g=new java.lang.StringBuffer,h=f.readLine(),h&&h.length()&&h.charAt(0)===65279&&(h=h.substring(1)),g.append(h);while((h=f.readLine())!==null)g.append(e),g.append(h);i=String(g.toString())}finally{f.close()}b(i)}),k}),define("text!tmpl/modal.tmpl",[],function(){return'<div class="modal{{#classes}} {{classes}}{{/classes}}">\n	<h2 class="modalTitle">{{title}}</h2>\n	{{>innards}}\n	<div class="modalCloser">\n	{{>closer}}\n	</div>\n	<span class="jqmClose mainCloser">X</span>\n</div>'}),define("third-party/mustache",[],function(){var a=function(){var a=function(){};return a.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(a,b,c,d){d||(this.context=b,this.buffer=[]);if(!this.includes("",a)){if(d)return a;this.send(a);return}a=this.render_pragmas(a);var e=this.render_section(a,b,c);if(d)return this.render_tags(e,b,c,d);this.render_tags(e,b,c,d)},send:function(a){a!=""&&this.buffer.push(a)},render_pragmas:function(a){if(!this.includes("%",a))return a;var b=this,c=new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag);return a.replace(c,function(a,c,d){if(!b.pragmas_implemented[c])throw{message:"This implementation of mustache doesn't understand the '"+c+"' pragma"};b.pragmas[c]={};if(d){var e=d.split("=");b.pragmas[c][e[0]]=e[1]}return""})},render_partial:function(a,b,c){a=this.trim(a);if(!c||c[a]===undefined)throw{message:"unknown_partial '"+a+"'"};return typeof b[a]!="object"?this.render(c[a],b,c,!0):this.render(c[a],b[a],c,!0)},render_section:function(a,b,c){if(!this.includes("#",a)&&!this.includes("^",a))return a;var d=this,e=new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg");return a.replace(e,function(a,e,f,g){var h=d.find(f,b);if(e=="^")return!h||d.is_array(h)&&h.length===0?d.render(g,b,c,!0):"";if(e=="#")return d.is_array(h)?d.map(h,function(a){return d.render(g,d.create_context(a),c,!0)}).join(""):d.is_object(h)?d.render(g,d.create_context(h),c,!0):typeof h=="function"?h.call(b,g,function(a){return d.render(a,b,c,!0)}):h?d.render(g,b,c,!0):""})},render_tags:function(a,b,c,d){var e=this,f=function(){return new RegExp(e.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+e.ctag+"+","g")},g=f(),h=function(a,d,h){switch(d){case"!":return"";case"=":return e.set_delimiters(h),g=f(),"";case">":return e.render_partial(h,b,c);case"{":return e.find(h,b);default:return e.escape(e.find(h,b))}},i=a.split("\n");for(var j=0;j<i.length;j++)i[j]=i[j].replace(g,h,this),d||this.send(i[j]);if(d)return i.join("\n")},set_delimiters:function(a){var b=a.split(" ");this.otag=this.escape_regex(b[0]),this.ctag=this.escape_regex(b[1])},escape_regex:function(a){if(!arguments.callee.sRE){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+b.join("|\\")+")","g")}return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,b){function c(a){return a===!1||a===0||a}a=this.trim(a);var d;return c(b[a])?d=b[a]:c(this.context[a])&&(d=this.context[a]),typeof d=="function"?d.apply(b):d!==undefined?d:""},includes:function(a,b){return b.indexOf(this.otag+a)!=-1},escape:function(a){return a=String(a===null?"":a),a.replace(/&(?!\w+;)|["<>\\]/g,function(a){switch(a){case"&":return"&amp;";case"\\":return"\\\\";case'"':return'"';case"<":return"&lt;";case">":return"&gt;";default:return a}})},create_context:function(a){if(this.is_object(a))return a;var b=".";this.pragmas["IMPLICIT-ITERATOR"]&&(b=this.pragmas["IMPLICIT-ITERATOR"].iterator);var c={};return c[b]=a,c},is_object:function(a){return a&&typeof a=="object"},is_array:function(a){return Object.prototype.toString.call(a)==="[object Array]"},trim:function(a){return a.replace(/^\s*|\s*$/g,"")},map:function(a,b){if(typeof a.map=="function")return a.map(b);var c=[],d=a.length;for(var e=0;e<d;e++)c.push(b(a[e]));return c}},{name:"mustache.js",version:"0.3.0",to_html:function(b,c,d,e){var f=new a;e&&(f.send=e),f.render(b,c,d);if(!e)return f.buffer.join("\n")}}}();return a}),define("third-party/jqmodal",["jquery"],function(a){a.fn.jqm=function(d){var e={overlay:50,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:f,ajaxText:"",target:f,modal:f,toTop:f,onShow:f,onHide:f,onLoad:f};return this.each(function(){if(this._jqm)return c[this._jqm].c=a.extend({},c[this._jqm].c,d);b++,this._jqm=b,c[b]={c:a.extend(e,a.jqm.params,d),a:f,w:a(this).addClass("jqmID"+b),s:b},e.trigger&&a(this).jqmAddTrigger(e.trigger)})},a.fn.jqmAddClose=function(a){return l(this,a,"jqmHide")},a.fn.jqmAddTrigger=function(a){return l(this,a,"jqmShow")},a.fn.jqmShow=function(b){return this.each(function(){b=b||window.event,a.jqm.open(this._jqm,b)})},a.fn.jqmHide=function(b){return this.each(function(){b=b||window.event,a.jqm.close(this._jqm,b)})},a.jqm={hash:{},open:function(b,g){var i=c[b],k=i.c,l="."+k.closeClass,m=parseInt(i.w.css("z-index"),10),n=m>0?m:3e3,o=a("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":n-1,opacity:k.overlay/100});if(i.a)return f;i.t=g,i.a=!0,i.w.css("z-index",n),k.modal?(d[0]||j("bind"),d.push(b)):k.overlay>0?i.w.jqmAddClose(o):o=f,i.o=o?o.addClass(k.overlayClass).prependTo("body"):f;if(e){a("html,body").css({height:"100%",width:"100%"});if(o){o=o.css({position:"absolute"})[0];for(var p in{Top:1,Left:1})o.style.setExpression(p.toLowerCase(),"(_=(document.documentElement.scroll"+p+" || document.body.scroll"+p+"))+'px'")}}if(k.ajax){var q=k.target||i.w,r=k.ajax,s=typeof q=="string"?a(q,i.w):a(q),t=r.substr(0,1)=="@"?a(g).attr(r.substring(1)):r;s.html(k.ajaxText).load(t,function(){k.onLoad&&k.onLoad.call(this,i),l&&i.w.jqmAddClose(a(l,i.w)),h(i)})}else l&&i.w.jqmAddClose(a(l,i.w));return k.toTop&&i.o&&i.w.before('<span id="jqmP'+i.w[0]._jqm+'"></span>').insertAfter(i.o),k.onShow?k.onShow(i):i.w.show(),h(i),f},close:function(b){var e=c[b];return e.a?(e.a=f,d[0]&&(d.pop(),d[0]||j("unbind")),e.c.toTop&&e.o&&a("#jqmP"+e.w[0]._jqm).after(e.w).remove(),e.c.onHide?e.c.onHide(e):(e.w.hide(),e.o&&e.o.remove()),f):f},params:{}};var b=0,c=a.jqm.hash,d=[],e=a.browser.msie&&a.browser.version=="6.0",f=!1,g=a('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0}),h=function(b){e&&(b.o?b.o.html('<p style="width:100%;height:100%"/>').prepend(g):a("iframe.jqm",b.w)[0]||b.w.prepend(g)),i(b)},i=function(b){try{a(":input:visible",b.w)[0].focus()}catch(c){}},j=function(b){a()[b]("keypress",k)[b]("keydown",k)[b]("mousedown",k)},k=function(b){var e=c[d[d.length-1]],f=!a(b.target).parents(".jqmID"+e.s)[0];return f&&i(e),!f},l=function(b,d,e){return b.each(function(){var b=this._jqm;a(d).each(function(){this[e]||(this[e]=[],a(this).click(function(){for(var a in{jqmShow:1,jqmHide:1})for(var b in this[a])c[this[a][b]]&&c[this[a][b]].w[a](this);return f})),this[e].push(b)})})}}),define("modal",["jquery","text!tmpl/modal.tmpl","third-party/mustache","third-party/jqmodal"],function(a,b,c){var d=function(d,f,g,h){g=g||"";var i=c.to_html(b,d,{innards:f,closer:g}),j,k={overlay:60,onHide:e};return j=a(i).appendTo("body"),a.extend(k,h),a("body").hasClass("popup")?j:j.jqm(k).jqmShow()},e=function(a){a.w.remove(),a.o.remove()};return d}),define("affiliate",["jquery","third-party/zeroclipboard","modal","cookie"],function(a,b,c,d){if(a("body").hasClass("popup"))return!1;var e=window.wsm,f=e.serviceUrl;a.ajaxPrefilter("json",function(b,c,d){if(b.crossDomain&&!a.support.cors)return"jsonp"});var g='<div id="affil_nav"><ul><li class="active"><a href="{{host}}/dashboard">Dashboard</a></li><li><a href="{{host}}/getlinks">Get Links</a></li><li><a href="{{host}}/widget">Get Widget</a></li><li><a href="{{host}}/reports">Reports</a></li><li><a href="{{host}}/settings">Affiliate Settings</a></li><li><a href="{{host}}/faqs">FAQs</a></li></ul></div>'.replace(/{{host}}/g,f.replace("services","affiliates")),h='<p class="couponTitle">{{storename}} {{title}}</p><label for="linkTag">Link:</label><form><textarea id="linkTag"><a href="{{url}}">{{storename}} {{title}}</a></textarea><button class="cnc jqmClose copy submit">Copy and close</button></form>',i,j,k=function(b){b.preventDefault();var d=a(this).data("aff"),e=h.replace(/\{\{(\w+)\}\}/g,function(a,b){return d[b]});j=c({title:"Get Link",classes:"getLinkModal"},e),w.glue(j.find(".copy")[0],j[0])},l=function(b){if(!b)return;w.addEventListener("mouseDown",s),w.addEventListener("complete",t),a(".site-header").after(g)},m=function(b){if(!b)return;if(document.body.id==="store"){var c=a(".socialBar"),d=a('<ul class="affiliate-bar clearfix"></ul>').insertAfter(c);c.length&&(p(d,b.IsFavorite),q(d,b.IsMonetized))}r(b.JumpLinks)},n=function(b){b.preventDefault();var c=a(this);a.ajax({url:f+"/overlay/addfavorite",data:{storeId:e.domain},beforeSend:function(){c.addClass("processing")},dataType:"json",xhrFields:{withCredentials:!0},success:o,complete:function(){c.removeClass("processing")}})},o=function(a){a==="true"&&i.text("Added").removeClass("addToFav").addClass("alreadyFaved").off(".aff")},p=function(b,c){i=a("<li>",{"class":c?"alreadyFaved":"addToFav",text:c?"Added":"Add to Favorites"}).prependTo(b).on("click.aff",n)},q=function(b,c){var d=c?"Get Paid":"Un-paid Merchant",e=a(".socialBar").offset(),f=e.left<150?"w":"s";a("<li>",{"class":c?"monetizable":"notMonetizable"}).append('<span class="tooltip">'+d+"</span>").prependTo(b)},r=function(b){var c=a([1]),d="getLink";x.each(function(e,f){var g=b[e];c.context=c[0]=this;var h=a("<button>",{"class":(g?d+" green":"disabled")+" btn sm",text:g?"Get My Link":"Not Available"}),i=c.find(".detail"),j={url:g,title:i.find(".title h3").text().replace(/^\s+|\s+$/g,""),storename:c.data("storename")},k=a("<div>",{"class":"aff_btn"}).append(h),l=g?"Click for Affiliate Link":"Not Available for Syndication";h.append('<span class="tooltip">'+l+"</span>"),h.data("aff",j),c.find(".description").prepend(k)}),a(document).on("click","."+d,k)},s=function(b){b.setText(a("#linkTag")[0].value)},t=function(a){j.jqmHide()},u=a([1]),v,w=new b.Client,x=a(".offer");v=a.map(x,function(a,b){return u.context=u[0]=a,u.data("couponid")}),d("user[preferredUsername]")&&a.ajax({url:f+"/trackinglinks",data:{codeIds:v.join()},dataType:"json",xhrFields:{withCredentials:!0}}).done(l,m)}),define("user",["cookie","jquery"],function(a,b){var c,d="/ajax/user.php";return function(){return c?c:a("user[preferredUsername]")?(c=b.ajax(d,{dataType:"json",xhrFields:{withCredentials:!0}}),c):b.Deferred().resolve()}}),define("text!tmpl/user-bar.tmpl",[],function(){return'<ul class="site-user loggedIn">\n    <li class="username"><a href="/community/member/{{user}}">Hi, {{userDisplay}}</a></li>\n    <li class="logout"><a href="/community/logout/">Logout</a></li>\n</ul>'}),define("facebook",["jquery"],function(a){var b=window.wsm.fb,c=b.appid,d;return{facepile:function(a){if(!a)return;var b=document.createElement("iframe");b.src=["https://www.facebook.com/plugins/facepile.php?href=http://www.facebook.com/retailmenot","action","size=large","max_rows=1","width=30","colorscheme=light","appId="+c].join("&"),b.scrolling="no",b.frameBorder="0",b.allowTransparency="true",a.appendChild(b)},login:function(b,e){var f="callBack"+ +(new Date),g="https://www.facebook.com/dialog/oauth?"+["scope=email&display=popup","client_id="+c,"redirect_uri=http://"+window.location.host+"/ajax/facebook.html?"+f,"response_type=token"].join("&"),h=a.Deferred();return b&&h.always(b),d=window.open(g,"facebooklogin","menubar=no,location=yes,width=850,height=400,chrome=yes,centerscreen=true"),window[f]=function(b){var c=a.extend({},b);if(/access_token/.test(c.hash))h.resolve({status:!0,accessToken:/access_token=([^&]+)/.exec(c.hash)[1]},c);else{var e,g,i,j={},k=c.search.slice(1).split("&");for(var l=0;l<k.length;l++)e=k[l],/error/.test(e)&&(/error_/.test(e)?g=/error_([^=]+)/.exec(e)[1]:g=/[^=]+/.exec(e)[0],i=/=(.+)/.exec(e)[1].replace(/\+/g," "),j[g]=i);h.reject({status:!1,error:j},c)}d.close(),window[f]=undefined},h}}}),define("updateLabels",["jquery"],function(a){if(!a("#content .login").find("form").length)return!1;var b,c,d=a("#content .login").find("form"),e={},f=function(a,b){return typeof b=="string"&&(b=g(b)),a.find(".msg").addClass("hidden"),b&&b.email?(a.find(".email-"+b.email).removeClass("hidden"),!1):b&&b.password?(a.find(".password-"+b.password).removeClass("hidden"),!1):!0},g=function(a){var d=window.location.search.split("&");for(b in d){b=d[b];if(/email/.test(b)||/password/.test(b))c=/([^=]+)=(.+)/.exec(b),c.length>2&&(e[c[1]]=c[2])}return e};return/errors/.test(window.location.search)&&(/e=/.test(window.location.search)&&(b=/e=([^&]+)/.exec(window.location.search),b&&b.length>1&&d.find("input[name=email]").val(b[1])),f(d,window.location.search)),f}),define("third-party/debounce",["jquery"],function(a){(function(a,b){"$:nomunge";var c=a.jQuery||a.Cowboy||(a.Cowboy={}),d;c.throttle=d=function(a,d,e,f){function g(){function c(){i=+(new Date),e.apply(j,l)}function g(){h=b}var j=this,k=+(new Date)-i,l=arguments;f&&!h&&c(),h&&clearTimeout(h),f===b&&k>a?c():d!==!0&&(h=setTimeout(f?g:c,f===b?a-k:a))}var h,i=0;return typeof d!="boolean"&&(f=e,e=d,d=b),c.guid&&(g.guid=e.guid=e.guid||c.guid++),g},c.debounce=function(a,c,e){return e===b?d(a,c,!1):d(a,e,c!==!1)}})(this)}),define("formvalidation",["jquery","third-party/debounce"],function(a){var b={};return b.prototype={patterns:{email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,required:/./,6:/.{6}/},init:function(b){if(!b)return;var c=a(b.form).find("[type=submit]").attr("disable","disable");return this.inputs=a(b.form).find("input,textarea,select,button"),this.options=b,this.bindSubmit(),this.form=b.form,this.form.submit(function(a){a.preventDefault()}),this.fields=b.fields,this.setup(),this},reset:function(){this.form.find(".msg").addClass("hidden")},bindSubmit:function(){this.options.filter?a(document).one("submit",this.options.filter,a.proxy(this,"submit")):this.options.form.one("submit",a.proxy(this,"submit"))},clearLabels:function(a){if(!a)return;var b=this.form.find(".msg"),c=new RegExp("^"+a);b.filter(function(a){var b,d=!1,e=this.className.split(" ");for(b=0;b<e.length;b++)if(c.test(e[b])){d=!0;break}return d}).addClass("hidden")},status:function(){var a=!0,b=this.options.fields;for(var c=0;c<b.length;c++)if(!b[c].status&&b[c].dom.is(":visible")){a=!1;break}return a},labels:function(a,b){var c,d,e,f,g,h,i=!0,j=this.fields,k=this.form.find(".msg"),l="";a&&this.clearLabels(a);for(var m in b)this.clearLabels(m),m&&b[m]&&(k.filter("."+m+"-"+b[m]).removeClass("hidden"),i=!1);for(g=0;i&&g<j.length;g++){f=j[g];if((!a||f.name===a)&&f.dom.filter(":visible").length){c=f.rules,f.status=!0;for(h=0;i&&h<c.length;h++){d=c[h];if(d.status===!1){~l.indexOf(f.name)||k.filter("."+d.label).removeClass("hidden"),l+=f.name,f.status=!1;break}}f.status&&(k.filter("."+f.name+"-success").removeClass("hidden"),f.status=!0)}}for(i=!0,g=0;g<j.length;g++)!j[g].status&&j[g].dom.filter(":visible").length&&(i=!1);i?this.form.find("[type=submit]"):this.form.find("[type=submit]")},submit:function(a){var b=this;a.preventDefault();var c=this.options.submit(this.form);return this.options.form.find(".msg").addClass("hidden"),!c||!c.done?c&&(b.labels(undefined,c),this.bindSubmit()):c.always(function(a){a&&b.labels(undefined,a),b.bindSubmit()}),!1},executeRules:function(b){if(!b)for(c=0;c<this.options.fields.length;c++)this.executeRules(this.options.fields[c]);var c,d,e,f,g=this,h=b.dom[0],i=!1;for(c=0;c<b.rules.length;c++){f=b.rules[c],f.status=!0,d=f.pattern;if(d&&d.test){if(!d.test(b.dom.val())){f.status=!1;break}}else d&&d.defer?(i=!0,function(a,b){d.pipe.done(function(c){if(c.hasError)for(var d in c.errors)d===b.name&&(a.label=b.name+"-"+c.errors[d],a.status=!1);b.dom.removeClass("throbbabob"),g.labels(h.name),g.setupDeferred(a)})}(f,b),b.dom.addClass("throbbabob"),d.defer.resolve()):a.type(f.type)==="function"&&(f.status=f.type.call(this,this.form,b))}i||this.labels(h.name)},pub:function(){},setupDeferred:function(b){var c=this,d=a.Deferred();b.pattern={defer:d,pipe:d.pipe(function(){var d=a.ajax(a.extend({data:c.form.serialize()},b.type));return d})}},setup:function(){var b,c,d,e,f=this.fields,g=this.inputs,h=a(document),i=this;for(b in f){c=f[b],c.patterns=[],c.dom||(c.dom=g.filter("[name="+c.name+"]"));for(b in c.rules)e=c.rules[b],a.type(e.type)==="object"?this.setupDeferred(e):e.pattern=this.patterns[e.type];(function(b){var c,d=a.debounce(2e3,function(){c||f()}),e=function(){c=!0,f()},f=function(a){(a&&a.type!=="keyup"||this.value!=="")&&i.executeRules(b)};/pause/.test(b.events)&&(b.events.replace(/pause\W?/,""),i.options.filter?h.on("keyup",i.options.filter+" input[name="+b.dom.attr("name")+"]",d).on("blur",i.options.filter+" input[name="+b.dom.attr("name")+"]",e):(b.dom.on("keyup",d),b.dom.on("blur",e))),i.options.filter?i.options.form.on(b.events,i.options.filter+" input[name="+b.dom.attr("name")+"]",f):b.dom.on(b.events,f)})(c)}}},b.prototype.init.prototype=b.prototype,function(a){return new b.prototype.init(a)}}),define("userbar",["jquery","user","text!tmpl/user-bar.tmpl","facebook","modal","track","updateLabels","third-party/mustache","cookie","formvalidation","track","third-party/debounce"],function(a,b,c,d,e,f,g,h,i,j,f){function k(){var a="";return window.location.href.indexOf("community/login")!==-1?a="Login_Page":window.location.href.indexOf("community/signup")!==-1?a="Signup_Page":window.location.href.indexOf("community")!==-1?a="Community_Page":a="other",a}var l,m,n,o={},p=!1,q=!1,r=a(".nav.login"),s=a(".site-user .login a"),t=a("#content .login form"),u=a("#content .signup-form .submit.signup"),v=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,w={fullLogin:"/community/login",welcome:"/community/welcome",user:"/community/member",login:window.wsm.serviceUrl+"/RmnLogin",signup:window.wsm.serviceUrl+"/RmnLogin/Register",exists:window.wsm.serviceUrl+"/RmnLogin/UserEmailExists",emailconfirm:"/community/confirm",verifyEmail:"/community/verify"};if(a("body").hasClass("popup"))return!1;var x=j({form:t,filter:"#content .signup-form",submit:function(b){var c=b.attr("name"),d=a.Deferred();return y(c,b.serialize()).done(function(b){b&&b.Success?(f({category:"Authenticate",action:"Signup",label:k()}),a(document).trigger("event.analytics",{p_lim:"signup"}),z(c)):b.hasError&&d.resolve(b.errors)}),d},fields:[{name:"email",events:"blur",rules:[{type:"required",label:"email-missing"},{type:"email",label:"email-invalid"},{type:{url:w.exists,dataType:"json",success:function(){var b=a("#content .email-exists  a"),c=w.fullLogin;c=c.split("?")+"/?errors&e="+b.closest("form").find("[name=email]").val(),b.attr("href",c)}}}]},{name:"password",events:"blur",rules:[{type:"required",label:"password-missing"},{type:6,label:"password-bluratleast"}]},{name:"password",events:"keyup",rules:[{type:"required",label:"password-missing"},{type:6,label:"password-insufficient"}]},{name:"password2",events:"keyup",rules:[{type:function(a,b){return a.find("[name=password2]").val()!==""},label:"password2-confirm"},{type:function(a,b){return a.find("[name=password]").val()===a.find("[name=password2]").val()&&a.find("[name=password]").val()!==""},label:"password2-match"}]}]});j({form:t,filter:"#content .login-form",submit:function(b){var c=b.attr("name"),d=a.Deferred();return b.find("button[type=submit]").addClass("throb"),y(c,b.serialize()).done(function(e){b.find("button[type=submit]").removeClass("throb"),e&&(e.Success||e.success)?(f({category:"Authenticate",action:"Login",label:k()}),a(document).trigger("event.analytics",{p_lim:"login"}),z(c)):e.hasError&&d.resolve(e.errors)}),d},fields:[{name:"email",events:"blur",rules:[{type:"required",label:"email-missing"},{type:"email",label:"email-invalid"}]}]}),b().done(function(b){if(!b)return;a(".site-user").replaceWith(h.to_html(c,{userDisplay:b.userName&&b.userName.length>14?b.userName.substring(0,14)+"&hellip;":b.userName,user:b.userName}))});var y=function(b,c){return a.ajax({url:w[b],type:"post",data:c,dataType:"json",xhrFields:{withCredentials:!0},error:function(){}})},z=function(a,b,c){var d;if(c)return window.location="/community/welcome/",!1;if(/redirectUrl/.test(window.location.search))d=/redirectUrl=([^&]+)/i.exec(window.location.search),d.length>1&&(window.location=d[1]);else if(a==="login"){var e=i("user[preferredUsername]");window.location="/community/member/"+e}else window.location=w.emailconfirm;return!1};d.facepile(a(".facepile")[0]),a(".facebook-login").one("click",function(b){b.preventDefault();var c=a(this),e=c.data("url"),g=a(this),h=d.login(function(b){a.ajax(e,{type:"post",data:b,dataType:"json",xhrFields:{withCredentials:!0},success:function(b){g.addClass("throb"),b.hasError||(f({category:"Authenticate",action:"FB",label:k()}),a(document).trigger("event.analytics",{p_lim:"facebook"}),z("login",b.isAffiliate,b.isNew))}})},a(this).data("url"));return!1}),function(){var b=!1,c=function(){r.addClass("hidden"),s.removeClass("hover")};s.on("click",function(d){d.preventDefault(),s.toggleClass("hover"),r.toggleClass("hidden"),r.hasClass("hidden")||(r.find("input:first").focus(),window.setTimeout(function(){a(document).one("click",function d(e){b?a(document).one("click",d):c()})},100))}),r.on("click",function(){b=!0,window.setTimeout(function(){b=!1},250)})}();var A;a(".minor .login .toggle").on("click",function(b){b.preventDefault(),x.reset(),A||(A=a(this).closest(".form")),function(a){a.name==="login"?a.name="signup":a.name="login"}(A.find("form")[0]),A.addClass("transparent"),window.setTimeout(function(){A.toggleClass("login-form"),A.toggleClass("signup-form"),A.removeClass("transparent")},500)}),a(".login form input").each(function(a,b){b.tabIndex=a+1}),a(".login-signup a.verify-email").one("click",function(b){b.preventDefault();var c=a(this).closest("form").find("input[name=email]").val();a(this).parent().html("Sending Email!"),y("verifyEmail",{email:c}).done(function(a){a&&a.hasError&&a.errors?alert("There was an error processing your request."):window.location="/community/confirm_oauth?email="+c})}),a(".nav.login form").submit(function(a){a.preventDefault()}),a(".nav.login form").one("submit keyup ",function B(b){if(b.type==="keyup"&&b.key!=="Enter"){a(".nav.login form").one("keyup",B);return}b.preventDefault();var c,d=a(this),e=d.find("[name=email]").val();d.find("button[type=submit]").addClass("throb"),y("login",d.serialize()).done(function(b){b.hasError?(c=w.fullLogin+"?errors&e=",e||(e=""),c+=e+"&"+a.param(b.errors),window.location=c):b&&(b.Success||b.success)&&(f({category:"Authenticate",action:"Login",label:"Header"}),a(document).trigger("event.analytics",{p_lim:"login"}),z("login"))})}),a(".fbmismatch.error.flow .close").one("click",function(b){a.ajax("/ajax/removeUserFlowFlag.php",{type:"post",data:{task:"removeFacebook"},dataType:"json"})})}),define("hashcheck",["jquery"],function(a){var b=location.hash,c=[],d=function(a,b){c.push({pattern:b,callback:a})},e=function(){var a,d;for(var e in c)if(c.hasOwnProperty(e)){a=c[e],d=a.pattern;if(d.test(b)){a.callback.call(this,d.exec(b)[1]);break}}};return a(e),{register:d,dispatch:e}}),define("rpx",["jquery","modal","track","hashcheck"],function(a,b,c,d){var e=/^#nouser/i,f=!1,g="/community/login_oauth",h=function(){var b=a(".oauth-modal");b.on("click",i)},i=function(b){var d=a.get(g);b.preventDefault();if(f)return;f=!0,d.done(k),c({category:"OauthLogin",action:"click",label:document.location})},j=function(){var b=g,d=a.get(g);d.done(l),c({category:"OauthLogin",action:"nouser",label:document.location})},k=function(a){var c={classes:"rpx-box-modal"},d=b(c,a);d.jqm({onHide:m})},l=function(a){var c={classes:"rpx-box-modal error"};b(c,a)},m=function(a){a.w.fadeOut("2000",function(){a.o.remove(),f=!1})};return a(h),d.register(j,e),{fetch:j}}),define("social",["track","jquery"],function(a,b){var c,d,e=window.location,f=window.document,g=function(a,b){if(!a)return;var c=a.split("#");if(c.length===1)return;var d=decodeURI(c[1]);b+="=";var e=d.split("&");for(var f=0,g;g=e[f];++f)if(g.indexOf(b)===0)return unescape(g.split("=")[1]);return},h={},i={fb:{url:f.location.protocol+"//connect.facebook.net/en_US/all.js",init:function(){window.fbAsyncInit=i.fb.onload;var a=f.createElement("div");a.id="fb-root",f.body.appendChild(a)},onload:function(){c=window.FB,c&&(c.init({appId:wsm.fb.appid,channelUrl:"//"+e.hostname+"/channel.php",status:!0,cookie:!0,xfbml:!0}),c.Event.subscribe("edge.create",function(c){a({type:"Social",category:"facebook",action:"like",label:c}),b(document).trigger("event.analytics",{sh_t:"facebook|like"})}),c.Event.subscribe("edge.remove",function(c){a({type:"Social",category:"facebook",action:"unlike",label:c}),b(document).trigger("event.analytics",{sh_t:"facebook|unlike"})}),c.Event.subscribe("message.send",function(c){a({type:"Social",category:"facebook",action:"send",label:c}),b(document).trigger("event.analytics",{sh_t:"facebook|send"})}))},parse:function(a){c&&c.XFBML.parse(a)}},plusOne:{url:"https://apis.google.com/js/plusone.js",parse:function(a){gapi&&gapi.plusone.go(a)}},twitter:{url:"//platform.twitter.com/widgets.js",loaded:function(){var c=window.twttr;c&&c.events.bind("tweet",function(c){c&&c.target&&c.target.nodeName=="IFRAME"&&(a({type:"Social",category:"twitter",action:"tweet",label:g(c.target.src,"url")}),b(document).trigger("event.analytics",{sh_t:"twitter|tweet"}))})},parse:function(a){window.twttr&&window.twttr.widgets.load()}}},j=function(){var a;for(var b in i)i.hasOwnProperty(b)&&function(a){a.init&&a.init(),require([a.url],function(){a.loaded&&a.loaded()})}(i[b])};return h.parse=function(a){for(var b in i)i.hasOwnProperty(b)&&i[b].parse&&i[b].parse(a)},b(j),h}),define("infographic",["jquery","hashcheck","modal","social"],function(a,b,c,d){var e=a(document),f=/^#vig\.([a-z0-9_\-]+)$/i,g=function(b){var c=a.get("/special/"+b+"?modal=true");c.done(h)},h=function(a){var b={classes:"infographic"},e=c(b,a);j(e),window.scroll(0,0),d.parse(e[0]),$model.css("marginLeft",function(){return(e.width()+100)/2})},i=function(){e.on("click",".modalTrigger",function(a){a.preventDefault(),g(f.exec(this.hash)[1])})},j=function(a){a=a||e;var b=a.find(".select_all"),c=Math.floor(Math.random()*b.length);b.not(":eq("+c+")").remove(),e.on("click",".select_all",k)},k=function(a){a.preventDefault();var b=window.document,c=this,d;if(typeof c.select=="function")c.select();else if(b.body.createTextRange)d=b.body.createTextRange(),d.moveToElementText(c),d.select();else if(window.getSelection){var e=window.getSelection();e.setBaseAndExtent?e.setBaseAndExtent(c,0,c,1):(d=b.createRange(),d.selectNodeContents(c),e.removeAllRanges(),e.addRange(d))}};return b.register(g,f),a(i),g}),define("howto",["jquery","track","modal"],function(a,b,c){var d,e=function(){if((window.outerWidth||window.document.documentElement.clientWidth+40)>1060){var b=a("<a>",{href:"/special/how-to?modal=true",text:"How to use a coupon...","class":"feedbackTab"}).appendTo("body");b.on("click",f),a(".howTrigger").click(function(){b.trigger("click")})}},f=function(c){var d=a.get(this.href);d.done(g),c.preventDefault(),b({category:"HowToModal",action:"click",label:"howto_"+wsm.domain})},g=function(a){var b={classes:"infographic",title:"How do I use a coupon code?"},d=c(b,a);scrollTo(0,0)};return a(e),f}),define("text!tmpl/voucher-codes.tmpl",[],function(){return'<div id="voucherCodes" style="display:block">\n    <p>Hey, RetailMeNot has a UK specific site called <a href="http://www.vouchercodes.co.uk/">VoucherCodes.co.uk</a>.</p>\n    <p>It\'s got all the best UK vouchers, plus more.</p>\n    <p>Want to go to the UK site instead?</p>\n    <p><button class="btn blue sm takeMe">Ok, take me to VoucherCodes.co.uk</button></p>\n    <p>\n	      <button class="jqmClose btn sm green">No, thanks</button>\n	      <button class="btn btn sm green noMas">No, don\'t ask me again!</button>\n    </p>\n</div>\n'}),define("ukmodal",["jquery","cookie","modal","storage","text!tmpl/voucher-codes.tmpl"],function(a,b,c,d,e){var f,g=function(){a.getJSON("/ajax/geoLocate.php",function(a){var b=a.country_code;b&&d.session.setItem("countryCode",b),b==="GB"&&h()})},h=function(){var a={title:"VoucherCodes.co.uk"},b=c(a,e);b.on("click",".noMas",function(){d.local.setItem("disableVoucherCodes",!0),b.jqmHide()}),b.on("click",".takeMe",function(a){a.preventDefault(),window.location="http://www.vouchercodes.co.uk/"+wsm.voucherCodesDomain})},i=d.session.getItem("countryCode");!d.local.getItem("disableVoucherCodes")&&/retailmenot.com|retailmenot.release|retailmenot.dev|retailmenot.stage|retailmenot.test|retailmenot.local/.test(location.host)&&(i?i==="GB"&&a(h):a(g))}),define("text!tmpl/alertNewUser.tmpl",[],function(){return'<div class="alertMessage">\n    <h3>Thanks, you\'re subscribed!</h3>\n    <p class="module_helper">Create an account to customize your emails.</p>\n</div>\n<ul>\n    <li>\n        <a class="btn lg blue" href="/community/signup">Create an account</a>\n    </li>\n</ul>'}),define("text!tmpl/alertReturningUser.tmpl",[],function(){return'<div class="alertMessage">\n    <h3>Thanks, you\'re subscribed!</h3>\n    <p class="module_helper">Customize your emails in your account <a href="/community/emailpreferences/">Email Preferences</a>.</p>\n</div>'}),define("newsletter",["jquery","user","facebook","cookie","formvalidation","modal","track","text!tmpl/alertNewUser.tmpl","text!tmpl/alertReturningUser.tmpl"],function(a,b,c,d,e,f,g,h,i){function j(a,b){b.find("input[name=subscribe]").replaceWith(a)}function k(a,b){b.find("li:last").html(a).hide().fadeIn(500)}function l(b,c){if(b==="/referafriend_success")var d=m("referafriend_tellapalID"),e="http://retailmenot.extole.com/a/cnv?a.id=1405795013&tellapal.id="+d+"&status=2&email="+c,f=a("<img />").attr("src",e).error(function(){window.location=b});else window.location=b}function m(a){var b;return(b=(new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)")).exec(document.cookie))?b[1]:null}var n=a(".newsletter_form");/subscription/.test(window.location.hash)&&a(".banner_msg.fp-success.subbed").removeClass("hidden"),/alreadysubscribed/.test(window.location.hash)&&a(".banner_msg.fp-success.alreadysubbed").removeClass("hidden");var o=function(b){var c=a.Deferred();if(b.target||b.srcElement)b.preventDefault(),b=a(this);return a.ajax({type:"POST",url:"/ajax/newslettersubscribe.php",data:b.serialize()}).done(function(d){if(d.hasError===!1){var e="newsletter";c.resolve();switch(d.action){case"UpdateButton":j(d.buttonText,b);break;case"Updateli":k(d.liMarkup,b);break;case"Redirect":l(d.redirectTarget,d.email);break;case"Nothing":break;case"alertNewUser":e="newsletteralert",b.closest(".alert_signup").html(a(h).hide().fadeIn(500));break;case"alertReturningUser":e="newsletteralert",b.closest(".alert_signup").html(a(i).hide().fadeIn(500))}a(document).trigger("event.analytics",{n_scm:e})}else c.resolve(d.errors)}),c};n.each(function(b,c){n.eq(b).has("input[type=email]").length?e({form:a(c),submit:o,fields:[{name:"email",events:"blur",rules:[{type:"email",label:"email-invalid"}]}]}):n.eq(b).on("submit",o)})}),define("text!tmpl/search-result.tmpl",[],function(){return'<li class="result">\n    <a href="/view/{{domain}}">\n		<span class="result-thumb"><span>\n			<img alt="{{domain}}" src="http://t.rmncdn.com/logos/s/{{domain}}-coupons.jpg" />\n		</span></span>\n        <p class="resultTitle">{{title}}</p>\n        <p class="domain">{{domain}}</p>\n        {{#avgSavings}}<p class="avg-savings">Average discount: <sup>$</sup>{{avgSavings}}</p>{{/avgSavings}}\n        <p class="seeMore">See <strong>{{shortTitle}}</strong> offers</p>\n    </a>\n</li>\n'}),define("truncate",[],function(){String.prototype.truncate||(String.prototype.truncate=function(a){var b=this.length,c;return b<=a?this.toString():(c=this.lastIndexOf(" ",a),c===-1&&(c=a),this.substr(0,c)+"…")})}),define("search",["jquery","third-party/mustache","text!tmpl/search-result.tmpl","track","truncate"],function(a,b,c,d){var e,f,g,h,i,j=a("<ul>",{id:"instant_results"}).hide(),k=-1,l=!0,m=function(){var b;f=a("#query").on({keydown:p,focusout:t}),j.appendTo(".site-search"),b=f[0],b&&"onpropertychange"in b?b.attachEvent("onpropertychange",function(a){a.propertyName==="value"&&o(a)}):f.on("input",o),a.browser.msie&&a("html.ie7").length&&f.closest("form").find(".submit").on("click",function(){f.closest("form").submit()})},n=function(a){if(a.selectionStart)return a.selectionStart;if(!document.selection)return 0;var b=document.selection.createRange();return b.moveStart("character",-a.value.length),b.text.length},o=function(){var a=f[0].value;x();if(!a.length){t();return}q(a)},p=function(a){var b=1;if(l)switch(a.which){case 38:b=-1;case 40:l&&(a.preventDefault(),w(b));break;case 39:if(this.value.length!==n(this))break;case 13:~k&&(a.preventDefault(),v());break;case 27:t()}},q=function(b){e&&e.abort();if(!b)return;e=a.getJSON("/ajax/instant.php",{q:b}),e.done(s),e.done(function(){r(b)})},r=function(a){d({category:"SearchClick",action:window.location.pathname,label:a})},s=function(d){var e="";h=d.length,h?(g=d,a.each(d,function(a,d){d.avgSavings==="0.00"&&(d.avgSavings=null),d.shortTitle=d.title.truncate(34),e+=b.to_html(c,d)}),j.html(e).show(),l=!0,f.addClass("completing")):t()},t=function(){setTimeout(function(){f.removeClass("completing"),j.hide(),l=!1,x()},300)},u=function(a){},v=function(){~k&&(window.location="/view/"+g[k].domain)},w=function(a){var b=j.find(".result");~k&&b.eq(k).removeClass("active"),k+=a,k===h?k=0:k<0&&(k=h-1),y(b.eq(k))},x=function(){~k&&(j.find(".active").removeClass("active"),k=-1)},y=function(a){a.addClass("active")};a(m)}),define("analytics",["jquery","cookie"],function(a,b){function c(a,b){}var d=window.wsm;d.an.v_id=b("userFlashVersion"),d.an.path=window.location.pathname,d.an.lang=window.navigator.userLanguage||window.navigator.language,b("tnt_c")&&(d.an.tt_c=b("tnt_c")),b("tnt_r")&&(d.an.tt_r=b("tnt_r")),d.an.pg_cp=a(".offer").length,b("user[userId]")&&(d.an.p_lgi=b("user[userId]")),a(document).on("event.analytics",c),a(function(){setTimeout(function(){window.performance&&(d.an.pg_l=window.performance.timing.loadEventEnd-window.performance.timing.navigationStart)},4)})}),define("trackingcookies",["jquery","cookie"],function(a,b){if(a("body").hasClass("popup"))return;var c=window.location,d=c.href,e=document.referrer,f=e.split("?")[0];if(f.indexOf("retailmenot.")==-1&&f.indexOf("rpxnow.com")==-1){var g=0;e||(g=-30,e=b("s_referrer")),e&&(b({name:"s_referrer",value:e,expires:g,path:"/"}),b({name:"s_referrer",value:"",expires:-30,path:"/",hostonly:!0}),b({name:"out_referrer",value:e,expires:30,path:"/"}),b({name:"out_referrer",value:"",expires:-30,path:"/",hostonly:!0})),d&&(b({name:"out_referrerLanding",value:d,expires:30,path:"/"}),b({name:"out_referrerLanding",value:"",expires:-30,path:"/",hostonly:!0})),b("out_originalReferrer")||b({name:"out_originalReferrer",value:e,expires:1825,path:"/"}),b("out_originalLanding")||b({name:"out_originalLanding",value:d,expires:1825,path:"/"})}(d.indexOf("?SID=")>0||d.indexOf("&SID=")>0)&&b({name:"out_kenshooLanding",value:d,expires:30,path:"/"})}),define("placeholder",["jquery"],function(a){var b={},c="onpropertychange"in document.createElement("input"),d=function(){a("[placeholder]").each(function(b,d){f(d),c?d.attachEvent("onpropertychange",function(a){a.propertyName==="value"&&e(d)}):a(d).on("input",function(){e(this)})}),a(document).on("click",".fauxPH",function(){a(this).data("field").focus()})},e=function(b){b.value?a(b).data("ph").hide():a(b).data("ph").show()},f=function(b){var c,d,f,g=a("<span>").css({position:"relative",margin:0,padding:0}),i=a(b);i.wrap(g),c=i.attr("placeholder"),i.data("phText",c),d=a("<span>",{text:c,"class":"fauxPH"}).css(h(i)).hide().data("field",i).insertAfter(i),i.data("ph",d),e(b)},g=function(b){var c=["fontSize","paddingLeft","paddingTop","lineHeight","borderTopWidth","borderLeftWidth","width","height","textAlign"],d={},e;return b.css("float",function(a,c){return c!=="none"&&b.parent().css("float",c),"none"}),a.each(c,function(a,c){d[c]=b.css(c)}),e=b.position(),d.top=e.top,d.left=e.left,d},h=function(a){var b=g(a);return b.position="absolute",b.color="#999",b.borderTopWidth&&(b.top+=parseInt(b.borderTopWidth,10),delete b.borderTopWidth),b.borderLeftWidth&&(b.left+=parseInt(b.borderLeftWidth,10),delete b.borderLeftWidth),b.lineHeight==="normal"&&(b.lineHeight=parseInt(b.height,10)+"px"),b},i=function(b){if(!b)return;b.each(function(b,c){var d=h(a.data(c,"field"));a(c).css(d)})};return"placeholder"in document.createElement("input")||a(d),{build:f,restyle:i}}),define("base",["jquery","storage","cookie","track","beacon","third-party/hoverIntent","affiliate","userbar","rpx","infographic","howto","ukmodal","newsletter","search","analytics","trackingcookies","placeholder"],function(a,b,c,d,e){var f=window.location,g=f.pathname;a(function(){a(".browse-cats").hoverIntent({over:function(){a(this).addClass("active")},out:function(){a(this).removeClass("active")},timeout:400}),a(".continueHunting").on("click",function(a){return f=b.session.getItem("wsm.shoppingpage")||"/",!1}),a(".cigar-shark").on("click",function(){var b=a(this),d=b.data();return c(d),f.reload(!0),!1}),c("userFlashVersion")&&a("form[method=post]").append('<input type="hidden" name="userFlashVersion" value="'+c("userFlashVersion")+'" />')}),g.indexOf("/community")!==0&&g.indexOf("/notify.php")!==0&&g.indexOf("/subscribe")!==0&&b.session.setItem("wsm.shoppingpage",f.href),setTimeout(function(){e({event:"pageview",values:wsm.an})},50),a(function(){a("body").removeClass("preload")})}),define("mobilecheck",[],function(){var a,b=function(){return typeof a!="undefined"?a:a!==null?a:(a=c(),a)},c=function(){var a=navigator.userAgent;return/iPad/i.test(a)?"iPad":/iPhone/i.test(a)?"iPhone":/iPod/i.test(a)?"iPod":/android/i.test(a)?"Android":/webos/i.test(a)?"WebOS":/blackberry/i.test(a)?"BlackBerry":!1};return b}),define("linkify",["jquery","mobilecheck"],function(a,b){var c=150,d=b(),e=function(b){var c=document.createTextNode(b);return a.trim(c.nodeValue)},f=function(a,b,c){return'<a href="'+a+'" target="'+b+'">'+e(c)+"</a>"},g=function(b){var d=b.text(),e,f,g,i;if(!b.hasClass("min")||d.length<c)return;e=d.lastIndexOf(" ",c),f=a.trim(d.substring(0,e))+"…",g=a("<span>",{"class":"expander",text:"expand"}),b.data("truncatedText",d.substring(e)),b.children("a").text(f),b.append(g),g.one("click",h)},h=function(b){var c=a(this),d=c.closest(".discount");return c.remove(),d.find("a").text(function(a,b){return b=b.substring(0,b.length-1),b+d.data("truncatedText")}),!1};return function(b){if(!b.length)return;var c=a("body").hasClass("popup"),e=a([1]);b.each(function(a,b){var h;e.context=e[0]=b;if(c&&e.hasClass("coupon"))return;var i=e.data("offerid"),j=e.data("siteid"),k="/out/"+i,l="merch"+j,m=e.find(".title h3, .title h1, h3.title").not(":has(a)"),n=e.find(".discount").not(":has(a)");m.eq(0).html(f(k,l,m.html())),n.eq(0).html(f(k,l,n.html())),g(n),d&&(h=e.find(".couponcode"),h.length&&(h[0].innerHTML=f(k,l,h.text())))})}}),define("flashoverlay",["jquery","third-party/zeroclipboard"],function(a,b){var c=a(document);b.setMoviePath(wsm.staticPath+"/ZeroClipboard.swf");var d={defaults:{selector:".attachFlash",setText:function(a){return""},dispatch:function(a){},mouseOver:function(){},mouseOut:function(){}},options:{},position:function(b){var c=this.$target=a(b.currentTarget),d=a(this.overlay),e=this.clip.movie,f=this.pos=a.extend(c.offset(),{width:c.outerWidth(),height:c.outerHeight(),zIndex:function(a){var b=a.css("z-index");while(isNaN(b))a=a.parent(),b=a[0].tagName.toLowerCase()==="body"?99:a.css("z-index");return b+30}(c)});this.target=b.currentTarget,d.css(f),e&&(e.width=f.width,e.height=f.height)},init:function(d){if(a("body").hasClass("popup")&&!d)return;var e=this;this.id=+(new Date),this.options=a.extend({},this.defaults,d);var f=this.overlay=a("<div>").css({position:"absolute",height:0,width:0,overflow:"hidden"}).appendTo("body")[0],g=this.clip=new b.Client;g.div=f,g.setHandCursor(!0),g.addEventListener("load",function(){c.on("mouseenter",e.options.selector,a.proxy(e,"position"))}),g.addEventListener("onMouseOver",a.proxy(this.options.mouseOver,this)),g.addEventListener("mouseOut",a.proxy(this,"hide")),g.addEventListener("mouseDown",function(a){a.setText(e.options.setText(e.target,a))}),g.addEventListener("complete",a.proxy(this,"click")),f.innerHTML=g.getHTML(1,1)},hide:function(){this.clip&&(this.options.mouseOut.call(this,this.clip),this.clip.hide())},click:function(a){this.$target.trigger("click")}};return typeof Object.create!="function"&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),function(){var a=Object.create(d);return a.init.apply(a,arguments),a}}),define("godark",["jquery"],function(a){return function(){a(".offer_detail").siblings(".detail:hidden").show(),a(".offer_detail").hide(),a(".v3redemption").siblings(".detail:hidden").show(),a(".v3redemption").hide(),a(".offer .active").removeClass("active")}}),define("pluralize",[],function(){String.prototype.pluralize||(String.prototype.pluralize=function(a,b){var c=this,d;if(a!==1){if(b)return b;d=c.length-1;switch(c[d]){case"x":case"h":case"s":c+="es";break;case"y":c=c.substring(0,d)+"ies";break;default:c+="s"}}return c.toString()})}),define("text!tmpl/feedback-success.tmpl",[],function(){return'<div class="savings">\n    <h3 class="success_note">\n	Nice one! <span>Thanks for sharing how much you saved.</span>\n    </h3>\n</div>\n'}),define("text!tmpl/feedback-form.tmpl",[],function(){return'<div class="savings">\n    <h3 class="thumbs_up">\n        <span>Cool, how much did you save?</span>\n    </h3>\n    <form action="/ajax/savings.php" method="post" class="savingsForm">\n        <input type="hidden" value="{{offerId}}" id="couponId" name="couponId">\n        <input type="hidden" value="{{siteId}}" id="siteId" name="siteId">\n        <div class="savings_row row">\n            <span class="hthree">$</span><input type="text" maxlength="4" value="" class="savings_dollars" name="savings_dollars" /> .<input type="text" maxlength="2" value="00" class="savings_cents" name="savings_cents" />\n        </div>\n        <div class="purchased_row row">\n            <h3>And I bought a...</h3>\n            <input type="text" value="" class="savings_purchased" name="savings_purchased" \n                placeholder="pair of pants, vacuum, etc..."/>\n        </div>\n        <button type="submit" class="submit btn sm green">Tell Us!</button>\n    </form>\n</div>\n'}),define("text!tmpl/offer-detail.tmpl",[],function(){return'<div class="offer_detail {{extraClass}}">\n    <div class="detail_close"><span>X</span></div>\n    {{>main}}\n    <div class="sharing">\n        <h3>\n            <span>Share this deal</span>\n        </h3>\n        <dl>\n            <dt class="share_facebook">Facebook</dt>\n            <dd><fb:like href="{{url}}" layout="button_count" width="150" show_faces="false" font="trebuchet ms" xmlns:fb="http://www.facebook.com/2008/fbml"></fb:like></dd>\n            <dt class="share_twitter">Twitter</dt>\n            <dd><a href="http://twitter.com/share" class="twitter-share-button" data-url="{{url}}" data-text="{{text}}" data-via="retailmenot">Tweet</a></dd>\n        </dl>\n    </div>\n</div>\n'}),define("text!tmpl/offer-detail-vote.tmpl",[],function(){return'<div class="offer_detail {{extraClass}}">\n    <div class="detail_close"><span>X</span></div>\n    {{>main}}\n    <div class="sharing">\n        <h3>\n            <span>Share this deal</span>\n        </h3>\n        <dl>\n            <dt class="share_facebook">Facebook</dt>\n            <dd><fb:like href="{{url}}" layout="button_count" width="150" data-send="true" show_faces="false" font="trebuchet ms" xmlns:fb="http://www.facebook.com/2008/fbml"></fb:like></dd>\n            <dt class="share_twitter">Twitter</dt>\n            <dd><a href="http://twitter.com/share" class="twitter-share-button" data-url="{{url}}" data-text="{{text}}">Tweet</a></dd>\n            <dt class="share_google">Google</dt>\n            <dd><div class="g-plusone" data-size="medium" data-count="true" data-href="{{url}}"></div></dd>\n        </dl>\n    </div>\n</div>\n'}),define("text!tmpl/share.tmpl",[],function(){return'<div class="savings">\n    <h3>\n        <span>Copy and share this link</span>\n    </h3>\n    <form>\n        <input type="text" value="{{url}}" class="shareUrl selectAll" readonly="readonly" />\n    </form>\n</div>\n'}),define("vote",["jquery","third-party/mustache","godark","cookie","pluralize","social","text!tmpl/feedback-success.tmpl","text!tmpl/feedback-form.tmpl","text!tmpl/offer-detail.tmpl","text!tmpl/offer-detail-vote.tmpl","text!tmpl/share.tmpl"],function(a,b,c,d,e,f,g,h,i,j,k){var l=function(){a(document).on("click.vote"," .canVote",m).on("click.vote",".detail_close span",c).on("voted.vote",".canVote",p).on("showFeedback",".offer",n).on("submit.savings",".savingsForm",q).on("click","#redemptionClose",c).on("doBidness.bidness",".offer",s)},m=function(b){var e,f,g,h,i=/retailmenot.com|stumbleupon.com|statelesssystems.com|retailmenot.release|retailmenot.local|retailmenot.dev|retailmenot.stage|retailmenot.test|retailmenot.pentest|retailmenot.spottest|new.retailmenot.com/.test(location.host),j=a(this),k=j.data("hasVoted");i&&(e=j.closest(".offer"),g=e.data("offerid"),f={offerId:g,siteId:e.data("siteid"),extraClass:"feedback_detail",url:"http://www.retailmenot.com/view/"+e.data("storedomain")+"#c"+g,text:e.data("storedomain")+" "+a.trim(e.find(".title h3").text())+" #NeverPayRetail "},h=j.hasClass("up")?"Y":"N",a(document).trigger("event.analytics",{prod:";"+g+";1;",vo_t:h}),c(),j.trigger("voted",[h]),a.post("/ajax/vote.php",{id:f.offerId,site:f.siteId,vote:h,userFlashVersion:d("userFlashVersion")}),h==="Y"?e.trigger("showFeedback",[f]):o(e)),b.preventDefault()},n=function(c,d){var e=c.target,g=a(e),k="http://www.retailmenot.com/view/"+g.data("storedomain")+"#c"+g.data("offerid"),l=g.data("storedomain")+" "+a.trim(g.find(".title h3").text())+" #NeverPayRetail ";a(c.target).find(".detail").hide(),g.parents().hasClass("offerpage")&&g.parents("#super_feature").length===0?(k="http://www.retailmenot.com/coupon/"+g.data("storedomain")+"/"+g.data("offerid")+"-"+g.data("titleslug"),g.find(".title a").length?l="Another great deal found on @RetailMeNot. "+g.data("storename")+" "+a.trim(g.find(".title a").text()):l="Another great deal found on @RetailMeNot. "+g.data("storename")+" "+a.trim(g.find(".title").text()),g.append(b.to_html(j,{extraClass:"feedback_detail float_right",url:k,text:l},{main:h})),f.parse(c.target)):wsm.user.mode==="v3_vote_test"&&!a("#showcoupon").length&&!a(c.target).parents("#super_feature").length?require(["text!"+wsm.staticPath+"/scripts/tmpl/feedback-form-v3.tmpl"],function(e){d.cssPath=wsm.staticPath+"/css/votefeedback.css",d.url=d.url.split("#")[0],a(c.target).append(b.to_html(e,d)),f.parse(c.target)}):(a(c.target).append(b.to_html(i,d,{main:h})),f.parse(c.target))},o=function(a){a.find(".detail").hide(),a.append('<div class="offer_detail feedback_detail"><div class="detail_close"><span>X</span></div><span class="voted_down_content"><h3>Thanks for the feedback!</h3><span>Every vote helps other shoppers.</span></span></div>').find(".canVote").removeClass("canVote")},p=function(b,c){var d=a(b.target),e=d.closest(".offer");c==="Y"?e.find(".up").removeClass("canVote"):e.find(".down").removeClass("canVote"),e.addClass(c==="Y"?"voted_up":"voted_down").find(".vote_count").text(function(a,b){var c=parseInt(b,10);return isNaN(c)?b:(c++,c+" vote".pluralize(c))})},q=function(b){b.preventDefault();var c=a(b.target);a.post(b.target.action,c.serialize()),c.closest(".savings").replaceWith('<div class="savings"><h3 class="success_note">Nice one! <span>Thanks for sharing how much you saved.</span></h3></div>')},r=function(b){c(),a(b.target).closest(".offer").find(".detail").show()},s=function(d,e){var f=a(d.target).find(".thumbs");wsm.user.mode==="v3_vote_test"&&!a("#showcoupon").length&&!a(".offerpage").length&&f.find(".canVote").length==2&&(c(),a(d.target).find(".detail").hide(),require(["text!"+wsm.staticPath+"/scripts/tmpl/vote-v3.tmpl"],function(c){var e={};e.cssPath=wsm.staticPath+"/css/votefeedback.css",a(d.target).append(b.to_html(c,e))}))};a(l)}),define("text!tmpl/offer-detail-test.tmpl",[],function(){return'<div class="offer_detail {{extraClass}}">\n    <div class="detail_close"><span>X</span></div>\n    <div class="sharing">\n        <h3>\n            <span>Share this deal</span>\n        </h3>\n        <dl>\n            <dt class="share_facebook">Facebook</dt>\n            <dd><fb:like href="{{url}}" layout="button_count" width="150" data-send="true" show_faces="false" font="trebuchet ms" xmlns:fb="http://www.facebook.com/2008/fbml"></fb:like></dd>\n            <dt class="share_twitter">Twitter</dt>\n            <dd><a href="http://twitter.com/share" class="twitter-share-button" data-url="{{url}}" data-text="{{text}}">Tweet</a></dd>\n            <dt class="share_google">Google</dt>\n            <dd><div class="g-plusone" data-size="medium" data-count="true" data-href="{{url}}"></div></dd>\n        </dl>\n    </div>\n    {{>main}}\n</div>\n'}),define("text!tmpl/share-test.tmpl",[],function(){return'<div class="savings">\n    <h3>\n        <span>Copy and share this link</span>\n    </h3>\n    <form>\n        <input type="text" value="{{url}}" class="shareUrl selectAll track" data-track-category="Share" data-track-action="offerurl" data-track-label="{{url}}" readonly="readonly" />\n    </form>\n</div>\n'}),define("share",["jquery","track","third-party/mustache","godark","social","text!tmpl/offer-detail.tmpl","text!tmpl/offer-detail-test.tmpl","text!tmpl/share.tmpl","text!tmpl/share-test.tmpl"],function(a,b,c,d,e,f,g,h,i){var j=function(){a(document).on("click",".shareTrigger",function(b){b.preventDefault();var c=a(b.target),e=c.closest(".offer");c.hasClass("active")?d():e.trigger("showShare")}).on("showShare",".offer",k).on("click.selectAll",".shareUrl",function(a){this.select()})},k=function(b){var j=b.target,k=a(j),l="http://www.retailmenot.com/view/"+k.data("storedomain")+"#c"+k.data("offerid"),m=k.data("storedomain")+" "+a.trim(k.find(".title h3").text())+" #NeverPayRetail ";d(),k.find(".shareTrigger").addClass("active"),k.parents().hasClass("offerpage")?(k.find(".title a").length?m="Another great deal found on @RetailMeNot. "+k.data("storename")+" "+a.trim(k.find(".title a").text()):m="Another great deal found on @RetailMeNot. "+k.data("storename")+" "+a.trim(k.find(".title").text()),l="http://www.retailmenot.com/coupon/"+k.data("storedomain")+"/"+k.data("offerid")+"-"+k.data("titleslug"),k.append(c.to_html(g,{extraClass:"share_detail offer_test",url:l,text:m},{main:i}))):k.append(c.to_html(f,{extraClass:"share_detail",url:l,text:m},{main:h})),e.parse(j)};a(j)}),define("validate",["jquery","cookie","formvalidation"],function(a,b,c){var d="required"in document.createElement("input"),e=a("<div>",{"class":"msg error"}).hide(),f=function(a){var b=!0;return a.each(function(a,c){g(c)||(b=!1)}),b},g=function(){return d?function(b){return b.validity.valid?(i(a(b)),!0):(h(a(b)),!1)}:function(b){var c=a(b);return b.getAttribute("required")!==null?!b.value||b.value===c.data("phText")?(h(c),!1):(i(c),!0):!0}}(),h=function(a,b){var c=a.data("$err")||e.clone();c.text(b||a.data("errmsg"));if(!c[0].parentNode||c[0].parentNode!==window.document)a.after(c),a.data("$err",c);a.addClass("error"),c.show()},i=function(a){a.hasClass("error")&&(a.removeClass("error"),a.data("$err").hide())},j={fields:f,field:g,showError:h,hideError:i};return j}),define("text!tmpl/comment-form.tmpl",[],function(){return'<form class="addCommentForm" action="/ajax/comment.php" method="post" novalidate>\n    <h3 class="moreForm">Add Comment</h3>\n    <input type="hidden" name="couponId" value="{{offerid}}" />\n    <textarea name="f_description" class="commentTxt" required data-errmsg="Please enter a comment"></textarea>\n    <div class="moreForm">\n        {{#userName}}\n        <p class="commentAuthor">\n            Post as <strong>{{userName}}</strong>\n        </p>\n        {{/userName}}\n        {{^userName}}\n        <p class="commentAuthor">Post anonymously or <a href="/community/signup">signup</a> to create a RetailMeNot account</p>\n\n        <div class="captchaBlock">\n            <img width="245" height="90" src="/captcha.php?{{randomInt}}" alt="captcha" class="captchaImage"/>\n            <p>For security, please type the word:</p>\n            <input type="text" name="word" class="word" value="" required data-errmsg="Please confirm your submission by typing the word that appears in the image." autocomplete="off" />\n        </div>\n        {{/userName}}\n\n        <button class="submit btn sm blue" type="submit">Post comment</button>\n    </div>\n</form>\n'}),define("comment",["jquery","third-party/mustache","godark","pluralize","validate","cookie","user","text!tmpl/comment-form.tmpl"],function(a,b,c,d,e,f,g,h){var i={},j=function(){a(document).on("click",".commentsTrigger",function(b){b.preventDefault();var d=a(this),e=d.closest(".offer");d.hasClass("active")?c():e.trigger("showComments")}).on("showComments",".offer",k).on("focus.showForm",".commentTxt",l).on("click",".loginLink",m).on("submit",".addCommentForm",n).on("commented",".offer",p)},k=function(d){g().done(function(a){i=a});var e=a(d.target),f=e.find(".comment_detail"),j=f.find(".addCommentForm"),k=a.extend({},e.data(),{randomInt:Math.floor(Math.random()*1e4)},i);!j.length&&!wsm.readonly_mode&&f.find(".comments").prepend(b.to_html(h,k)),c(),f.show(),e.find(".commentsTrigger").addClass("active")},l=function(b){var c=a(b.target),d=c.closest(".addCommentForm");d.find(".moreForm").show()},m=function(a){a.preventDefault(),window.open("/community/","_blank")},n=function(b){b.preventDefault();var c=this,d=a(c),f=d.find(".commentTxt, .word");e.fields(f)&&a.post(c.action+"?ver=2",d.serialize(),function(a){var b;d.find(".captchaImage").attr("src","/captcha.php?"+Math.floor(Math.random()*99999));if(a.hasError){b=a.errors;for(var f in b)b.hasOwnProperty(f)&&e.showError(d.find('[name="'+f+'"]'),b[f])}else d.closest(".offer").trigger("commented"),d.find(".form_error").hide(),o(d),c.reset()})},o=function(b){var c=b.closest(".comments"),d=c.find(".comment_list"),e="";i&&i.userName?e+='<em class="attachFlash userLink">'+i.userName+"</em> ":e+="Anonymous",d.length||(d=a("<ul>",{"class":"comment_list"}).appendTo(c)),d.prepend('<li><span class="commentBubbleIntact"></span><p class="comment_description">'+b.find(".commentTxt").val()+'</p><span class="comment_author">- '+e+", seconds ago</span></li>")},p=function(b){a(b.target).find(".commentBubble").text(function(a,b){var c=parseInt(b,10);return isNaN(c)?"1":c+1})};a(j)}),define("filter",["jquery"],function(a){var b,c,d,e,f,g,h=function(){g=a("body").hasClass("popup"),b=a(".offer"),c=b.is(".coupon"),d=b.is(".sale"),e=b.is(".printable"),f=b.is("[data-free-shipping]"),a(document).on("click.filter",".filter",j),i()},i=function(){c||a("#filter_codes").hide(),d||a("#filter_sales").hide(),e||a("#filter_printables").hide(),f||a("#filter_freeship").hide()},j=function(c){c.preventDefault();var d=a(c.target),e=a(".tiptxt"),f={pg_f:"All Coupons"};b.removeClass("hidden"),e.removeClass("hidden"),a(".filter").removeClass("active"),d.addClass("active"),d.hasClass("codes")?(b.not(".coupon").addClass("hidden"),f.pg_f="Codes",g&&e.not(".coupons").addClass("hidden")):d.hasClass("sales")?(b.not(".sale").addClass("hidden"),f.pg_f="Sales",g&&e.not(".sales").addClass("hidden")):d.hasClass("printables")?(b.not(".printable").addClass("hidden"),f.pg_f="Printables",g&&e.not(".printables").addClass("hidden")):d.hasClass("freeship")&&(b.not("[data-free-shipping]").addClass("hidden"),f.pg_f="Free Shipping",g&&e.not(".freeship").addClass("hidden")),a(document).trigger("event.analytics",f),k()},k=function(){a(".offer_list").each(function(b,c){var d=a(c),e=d.find(".offer").not(".hidden"),f=d.prev(".section-header");e.length?(d.show(),f.show()):(d.hide(),f.hide())})};a(h)}),define("bidness",["jquery","cookie","track","storage","beacon"],function(a,b,c,d,e){var f=window.wsm,g=window.location,h={},i=function(){if(a("body").hasClass("popup"))return;a(document).on("doBidness.bidness",".offer, .content",j).on("click",".caterpillar-offer",function(b){b.preventDefault(),a(this).closest(".content").trigger("doBidness",["caterpillarClick"])}).on("click.theBidness",".title, .discount, .mobilelink",function(b){b.preventDefault();var c=a(this),d=a(b.target).closest(".offer"),e;c.hasClass("title")?e="OfferTitle":c.hasClass("discount")?c.hasClass("no-description")?e="NoDesc_StoreLink":e="OfferDescription":e="OfferCode",d.trigger("click"),d.trigger("doBidness",[e])})},j=function(h,i){var j=a(h.target),k=j.data("offerid"),l=j.data("siteid"),m=j.hasClass("printable"),n=f.popup,o=j.find(".title a").attr("href"),p="/showcoupon/"+encodeURIComponent(k),q=430,r=592,s="",t=f.hidePopup&&d.local.getItem("isMobile")=="iPad",u=window.screenX||window.screenLeft,v=window.outerWidth||document.documentElement.clientWidth+40,w=u+v,x=window.screenY||window.screenTop,y=x+20,z={prod:";"+k+";1;",co_r:j.find(".percent").text().replace("%",""),co_v:j.find(".vote_count").text().replace(/[^-\d\.]/g,""),co_p:j.index()+1,co_cm:j.find(".comment_list li").size(),co_sb:j.find(".creator .userLink").text(),co_lu:j.find(".last_used").text().replace("Last successfully used ","").replace(" ago",""),co_dp:j.find(".posted").text().replace("Posted ","").replace(" ago",""),co_lo:i,slic:f.an.slic},A;f.tests.v3Redemption===1&&(p="/showcoupon2/"+encodeURIComponent(k),q=500,r=500,s=",scrollbars=0"),j.hasClass("content")&&(o="http://"+j.attr("data-storedomain"),k=j.attr("data-offerid"),p="/showcoupon/"+encodeURIComponent(k)),b({name:"cid",value:k,expires:1,path:"/"}),b({name:"ppage",value:g.href,expires:1,path:"/"}),c({category:i,action:g.pathname,label:k.toString()}),e({event:"click",values:a.extend({},f.an,z)}),a(document).trigger("event.analytics",z),m&&j.data("printableImagePath")?(window.open("/view/"+j.data("storedomain")+"#print."+k),window.location=o):(v<screen.width?w+80<screen.width?A=w-q+80:u>=80?A=u-80:A=w-q-20:A=w-q-20,a.browser.msie?window.location=o:f.merchantWindow=window.open(o,"merch"+l),!m&&!f.readonly_mode&&(!n||n.closed?f.popup=window.open(p,"popup"+l,"status=0,toolbar=0,directories=0,menubar=0,location=0"+s+",width="+q+",height="+r+",top="+y+",left="+A):(n.location=p,n.focus()))),window.mboxUpdate&&window.mboxUpdate("global_mbox","offerId="+k)};a(i)}),define("printable",["jquery","hashcheck","modal"],function(a,b,c){var d=a(document),e=/^#print\.([a-z0-9_\-]+)$/i,f,g=function(b){b.preventDefault(),h(a(this).closest(".offer"))},h=function(b){var d=typeof b=="object"?b:a("#c"+b),e;if(d.length&&(e=d.data("printableImagePath"))){var g={},h='<style>@media print { #wrapper, .site-header, .site-footer, .modal h2, .modalCloser, .mainCloser {display: none !important;}}</style><img id="printableCoupon" src="'+d.data("printableImagePath")+'" />';g.title=d.data("storedomain")+": "+d.find(".title h3").text(),g.classes="printable",f=c(g,h),f.find(".modalTitle").prepend('<span class="btn lg green print" onclick="print();">Print</span>'),a("#printableCoupon").load(i),window.scroll(0,0)}},i=function(){var b=a(this).outerWidth();f.css({width:b+"px",marginLeft:"-"+(b+100)/2+"px"})};b.register(h,e)}),define("sharedoffer",["jquery","hashcheck","modal"],function(a,b,c){var d=/^#c([a-z0-9]+)(\?.*)?$/i,e,f=function(b){e=b,a(g)},g=function(){var b=a("#c"+e),d={},f;if(b.length){if(!b.hasClass("offer"))return;f=b.clone(!0),d.title="Here's the "+wsm.title+" Coupon You're Looking For!"}else f=a(".offer").eq(0).clone(!0),d.title="The coupon you're looking for is no longer available.";f.find(".commentsTrigger").remove().end().find(".comment_detail").remove();var g='<span class="jqmClose">See more '+wsm.title+" coupons</span>";d.storeName=f.data("storename"),d.classes="sharedOffer",f='<ul class="offer_list">'+a("<p>").append(f).html()+"</ul>",c(d,f,g)};b.register(f,d)}),define("text!tmpl/super-featured.tmpl",[],function(){return'<div id="super_feature">\n    <h2 class="blue section-header">\n		Your {{storeName}} Coupon\n	</h2>\n	<ul class="offer_list">\n		{{>offer}}\n		{{^hasOffer}}\n			<li class="not_available">\n				The coupon you selected is no longer available. See more great {{storeName}} coupons below!\n			</li>\n		{{/hasOffer}}\n	</ul>\n</div>\n'}),define("superoffer",["jquery","hashcheck","third-party/mustache","text!tmpl/super-featured.tmpl"],function(a,b,c,d){var e=/^#cid\.([a-z0-9_\-]+)$/i,f,g=function(b){f=b,a(h)},h=function(){var b=a("#c"+f),e={storeName:wsm.title,hasOffer:!!b.length},g=a("<p>").html(b).html(),h=c.to_html(d,e,{offer:g});a(".section-header").first().before(h)};b.register(g,e)}),define("offers",["jquery","linkify","track","flashoverlay","vote","share","comment","linkify","filter","bidness","printable","sharedoffer","superoffer"],function(a,b,c,d){var e=a("body"),f=e.hasClass("ctc"),g=e.hasClass("popup"),h=a(".c2c");a(document).on({mouseenter:function(){var b=a(this);b.find(".logo-tooltip").length||b.append('<span class="logo-tooltip">See More Offers</span>'),b.find(".logo-tooltip").fadeIn(300)},mouseleave:function(){a(this).find(".logo-tooltip").fadeOut(100)}},".store-logo");if(!g){var i=function(){a(".offer .attachFlash.crux").addClass("revealed").find(".cover").addClass("hidden")},j=function(){a(this.target).addClass("hover");var b=this.pos||a.extend(a(this).offset(),{width:a(this).outerWidth()});f&&(h.css({top:b.top+2,left:b.left+b.width+5}),h.removeClass("hidden"))},k=function(){a(this.target).removeClass("hover"),f&&h.addClass("hidden")};a(".offer .attachFlash").hover(j,k),d({selector:".offer .attachFlash",setText:function(b,c){return a(b).find(".code").text()},mouseOver:j,mouseOut:k}),a(document).on("click",".offer",function(){i()}),a(document).on("click",".crux",function(b){return a(this).closest(".offer").trigger("doBidness",["OfferCode"]),i(),!1}),d({selector:".attachFlash.userLink"}),a(".attachFlash.userLink").on("click",function(){window.location="/community/member/"+encodeURIComponent(a(this).text())})}document.getElementById("results")||b(a(".offer"))}),define("doccomplete",["jquery"],function(a){var b=function(b){/^complete$/i.test(window.document.readyState)?b():a(window).load(b)};return b}),define("loadads",["doccomplete"],function(a){var b=function(){var a=document.createElement("iframe");a.style.cssText="display: none;",a.src="/adsense.php?rand="+Math.floor(Math.random()*1e6),document.body.appendChild(a)};wsm.hasAds&&a(b)}),define("third-party/jqueryui",["jquery"],function(a){(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.20",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f=d==="Width"?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})})(a),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(a),function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0],l,m,n;return i.nodeType===9?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),j.length===1&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,k.length===1&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,b.at[0]==="right"?n.left+=l:b.at[0]===e&&(n.left+=l/2),b.at[1]==="bottom"?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=k[1],this.each(function(){var c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n),r;b.my[0]==="right"?q.left-=d:b.my[0]===e&&(q.left-=d/2),b.my[1]==="bottom"?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?this.each(function(){a.offset.setOffset(this,b)}):h.call(this)}),function(){var b=document.getElementsByTagName("body")[0],c=document.createElement("div"),d,e,g,h,i;d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=i>21&&i<22}()}(a),function(a,b){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,c=this.element[0].ownerDocument,d;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(b.options.disabled||b.element.propAttr("readOnly"))return;d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._keyEvent("previous",c);break;case e.DOWN:b._keyEvent("next",c);break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(b.options.disabled)return;b.selectedItem=null,b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(b.options.disabled)return;clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150)}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(a,c){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),b.beforeunloadHandler=function(){b.element.removeAttr("autocomplete")},a(window).bind("beforeunload",b.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="source"&&this._initSource(),b==="appendTo"&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),b==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,c,d;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))}):typeof this.options.source=="string"?(d=this.options.source,this.source=function(c,e){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:d,data:c,dataType:"json",success:function(a,b){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val(),this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)===!1)return;return this._search(a)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return typeof b=="string"?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term),this.menu.deactivate();return}this.menu[a](b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})}(a),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length)return;c.preventDefault(),b.select(c)}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();c<0?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active){this.activate(c,this.element.children(b));return}var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(".ui-menu-item:first"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(".ui-menu-item:last"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(a)}),define("submitoffer",["jquery","third-party/jqueryui","track","validate","placeholder","formvalidation","user"],function(a,b,c,d,e,f,g){var h,i=window.wsm,j=a(".coupon-submit"),k=j.find("[name=expires]"),l=j[0],m=a("#f_code"),n=j.find("select").val(),o="/ajax/submitForm.php",p={tip:a(".submit-tip"),printable:a(".submit-printable"),code:a(".submit-code")},q={type:{url:"/ajax/checkCode.php",dataType:"json",type:"post"}},r=j.find("input[name=host], input[name=word]"),s=!1,t=function(a){n=a.target.value;for(var b in p)p.hasOwnProperty(b)&&(b===n?(p[b].show(),e.restyle(p[b].find(".fauxPH"))):p[b].hide())},u=function(){var b=a(".captcha");s||(b.removeClass("hidden"),a(".captchaImage").attr("src","/captcha.php?"+Math.floor(Math.random()*99999)),b.find("input").val("")),k.is(":hidden")&&(k.closest(".row").removeClass("hidden"),e.restyle(k.data("ph"))),a("jqueryuistyle").length||(require([i.staticPath+"/scripts/third-party/jquery-ui-1.8.20-datepicker.js"],function(){j.find("input[name=expires]").datepicker({showButtonPanel:!0,closeText:"Skip This",minDate:0})}),document.createStyleSheet?document.createStyleSheet("/gui/css/jq/ui-1.8.20.css"):a("body").append('<link rel="stylesheet" href="/gui/css/jq/ui-1.8.20.css" id="jqueryuistyle" type="text/css" />'))},v=g().done(function(a){if(!a)return;s=!0});a("#offerType").change(t),j.on("focus.showCaptcha","input, textarea",function(a){j.off(".showCaptcha"),v.done(function(a){u()})}),f({form:j,submit:function(){var b=a.Deferred(),d=j.find("[name=domain]").val(),e=j.find("[name=f_code]").val(),f=j.find("[name=offerType]").val();return a.ajax({url:o,data:j.serialize(),dataType:"json",type:"post",success:function(g){g||b.resolve({}),j.find(".form-success").addClass("hidden"),g.hasError?(g.errors.domain?j.find(".msg").filter(".domain-"+g.errors.domain).find("span").text(j.find("input[name=domain]").val()):g.errors.errormsg&&(j.find(".general-error").html(g.errors.errormsg),j.find(".general-error").removeClass("hidden")),b.resolve(g.errors)):(j.find(".form-success").removeClass("hidden"),g.text&&j.find(".form-success").html(g.text),b.reject(),j[0].reset(),j.find("select").change(),a("body#submit").length===0&&j.find("[name=domain]").val(d),c({category:"SubmitCoupon",action:location.pathname,label:n}),a(document).trigger("event.analytics",{c_pty:f,c_pst:d,c_pcd:e}))},complete:function(){u()},error:function(){j.find(".general-error").removeClass("hidden")}}),b},fields:[{name:"f_code",events:"change",rules:[q]},{name:"fp_url",events:"change",rules:[q]},{name:"ft_tip",events:"change",rules:[q]},{name:"f_description",events:"change",rules:[q]},{name:"fp_description",events:"change",rules:[q]}]}),a(".ui-autocomplete-input").autocomplete({source:function(b,c){var d=encodeURI("/ajax/ugcstores.php?q="+b.term);a.getJSON(d,function(b){var d=[];a.each(b,function(a,b){d.push({value:b.domain})}),c(d)})},select:function(b,c){a("#host").val(c.item.value)},open:function(){a(".ui-autocomplete").width(a(this).width())},close:function(b){a(b.target).trigger("check")}})}),define("deals-page",["jquery","carousel2","third-party/jqueryui"],function(a,b){a(document).on("click",".dpoffer",function(b){a(this).trigger("doBidness",["dealPageClick"])}),b({dom:a("#deals .carousel2"),shown:3})}),define("category",["jquery","carousel2"],function(a,b){b({dom:a("#categories .carousel2"),shown:7})}),require(["carousel2","holiday","base","offers","loadads","submitoffer","deals-page","search","easing","category"],function(a,b){$(function(){$(".more_list").on("click",function(a){a.preventDefault();var b=$(this),c=b.data("list")||b.prev(".topList");c.toggleClass("truncated"),b.text(function(){return c.hasClass("truncated")?"Show all 100":"Show less"}),b.data("list",c)}),function(){var a=$(".accordion"),b;a.length&&(a.find(".header").on("click",function(a){$(this).closest(".article").toggleClass("expanded")}),b=$(location.hash),b.length&&(a.find(".expanded").removeClass("expanded"),b.addClass("expanded")))}(),$(".panel_sm:nth-child(3n)").css("margin","0 31px 20px"),a({dom:$("#categories .carousel2"),shown:7}),a({dom:$("#social .carousel2"),shown:7}),$("#holiday").length&&new b})}),define("main",function(){})