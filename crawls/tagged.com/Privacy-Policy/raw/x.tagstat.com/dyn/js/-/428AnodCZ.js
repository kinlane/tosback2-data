function str_repeat(b,a){for(var c=[];a>0;c[--a]=b){}return(c.join(""))}function sprintf(){var h=0,l,j=arguments[h++],d=[],e,b,k,n;var q=j;if(typeof arguments[1]=="object"){var g=arguments[1];return q.replace(/%\(([^)]+)\)/g,function(c,a){return g[a]})}while(j){if(e=/^[^\x25]+/.exec(j)){d.push(e[0])}else{if(e=/^\x25{2}/.exec(j)){d.push("%")}else{if(e=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(j)){var r=e[1]||h++;if(r>=arguments.length){throw ("Too few arguments: "+q)}var l=arguments[r];switch(e[7]){case"b":l=parseInt(l);l=l.toString(2);break;case"c":l=String.fromCharCode(l);break;case"d":l=parseInt(l);break;case"e":l=parseFloat(l);l=e[6]?l.toExponential(e[6]):l.toExponential();break;case"f":l=e[6]?parseFloat(l).toFixed(e[6]):parseFloat(l);break;case"o":l=parseInt(l);l=l.toString(8);break;case"s":l=((l=String(l))&&e[6]?l.substring(0,e[6]):l);break;case"u":l=Math.abs(l);break;case"x":l=parseInt(l);l=l.toString(16);break;case"X":l=parseInt(l);l=l.toString(16).toUpperCase();break}l=(/[def]/.test(e[7])&&e[2]&&l>0?"+"+l:l);k=e[3]?e[3]=="0"?"0":e[3].charAt(1):" ";n=e[5]-String(l).length;b=e[5]?str_repeat(k,n):"";d.push(e[4]?l+b:b+l)}else{throw ("Huh ?!")}}}j=j.substring(e[0].length)}return d.join("")}function vsprintf(b,a){return sprintf.apply(this,[b].concat(a))};YAHOO.namespace("util");YAHOO.util.Cookie={_createCookieString:function(f,d,e,a){var b=YAHOO.lang,c=encodeURIComponent(f)+"="+(e?encodeURIComponent(d):d);if(b.isObject(a)){if(a.expires instanceof Date){c+="; expires="+a.expires.toUTCString()}if(b.isString(a.path)&&a.path!==""){c+="; path="+a.path}if(b.isString(a.domain)&&a.domain!==""){c+="; domain="+a.domain}if(a.secure===true){c+="; secure"}}return c},_createCookieHashString:function(d){var b=YAHOO.lang;if(!b.isObject(d)){throw new TypeError("Cookie._createCookieHashString(): Argument must be an object.")}var c=[];for(var a in d){if(b.hasOwnProperty(d,a)&&!b.isFunction(d[a])&&!b.isUndefined(d[a])){c.push(encodeURIComponent(a)+"="+encodeURIComponent(String(d[a])))}}return c.join("&")},_parseCookieHash:function(c){var d=c.split("&"),b=null,e={};if(c.length>0){for(var f=0,a=d.length;f<a;f++){b=d[f].split("=");e[decodeURIComponent(b[0])]=decodeURIComponent(b[1])}}return e},_parseCookieString:function(f,d){var e={};if(YAHOO.lang.isString(f)&&f.length>0){var c=(d===false?function(l){return l}:decodeURIComponent);var h=f.split(/;\s/g),g=null,b=null,k=null;for(var a=0,j=h.length;a<j;a++){k=h[a].match(/([^=]+)=/i);if(k instanceof Array){try{g=decodeURIComponent(k[1]);b=c(h[a].substring(k[1].length+1))}catch(i){}}else{g=decodeURIComponent(h[a]);b=""}e[g]=b}}return e},exists:function(a){if(!YAHOO.lang.isString(a)||a===""){throw new TypeError("Cookie.exists(): Cookie name must be a non-empty string.")}var b=this._parseCookieString(document.cookie,true);return b.hasOwnProperty(a)},get:function(e,a){var b=YAHOO.lang,d;if(b.isFunction(a)){d=a;a={}}else{if(b.isObject(a)){d=a.converter}else{a={}}}var c=this._parseCookieString(document.cookie,!a.raw);if(!b.isString(e)||e===""){throw new TypeError("Cookie.get(): Cookie name must be a non-empty string.")}if(b.isUndefined(c[e])){return null}if(!b.isFunction(d)){return c[e]}else{return d(c[e])}},getSub:function(a,d,e){var b=YAHOO.lang,c=this.getSubs(a);if(c!==null){if(!b.isString(d)||d===""){throw new TypeError("Cookie.getSub(): Subcookie name must be a non-empty string.")}if(b.isUndefined(c[d])){return null}if(!b.isFunction(e)){return c[d]}else{return e(c[d])}}else{return null}},getSubs:function(c){var a=YAHOO.lang.isString;if(!a(c)||c===""){throw new TypeError("Cookie.getSubs(): Cookie name must be a non-empty string.")}var b=this._parseCookieString(document.cookie,false);if(a(b[c])){return this._parseCookieHash(b[c])}return null},remove:function(b,a){if(!YAHOO.lang.isString(b)||b===""){throw new TypeError("Cookie.remove(): Cookie name must be a non-empty string.")}a=YAHOO.lang.merge(a||{},{expires:new Date(0)});return this.set(b,"",a)},removeSub:function(f,c,a){var b=YAHOO.lang;a=a||{};if(!b.isString(f)||f===""){throw new TypeError("Cookie.removeSub(): Cookie name must be a non-empty string.")}if(!b.isString(c)||c===""){throw new TypeError("Cookie.removeSub(): Subcookie name must be a non-empty string.")}var d=this.getSubs(f);if(b.isObject(d)&&b.hasOwnProperty(d,c)){delete d[c];if(!a.removeIfEmpty){return this.setSubs(f,d,a)}else{for(var e in d){if(b.hasOwnProperty(d,e)&&!b.isFunction(d[e])&&!b.isUndefined(d[e])){return this.setSubs(f,d,a)}}return this.remove(f,a)}}else{return""}},set:function(e,d,a){var b=YAHOO.lang;a=a||{};if(!b.isString(e)){throw new TypeError("Cookie.set(): Cookie name must be a string.")}if(b.isUndefined(d)){throw new TypeError("Cookie.set(): Value cannot be undefined.")}var c=this._createCookieString(e,d,!a.raw,a);document.cookie=c;return c},setSub:function(f,d,e,a){var b=YAHOO.lang;if(!b.isString(f)||f===""){throw new TypeError("Cookie.setSub(): Cookie name must be a non-empty string.")}if(!b.isString(d)||d===""){throw new TypeError("Cookie.setSub(): Subcookie name must be a non-empty string.")}if(b.isUndefined(e)){throw new TypeError("Cookie.setSub(): Subcookie value cannot be undefined.")}var c=this.getSubs(f);if(!b.isObject(c)){c={}}c[d]=e;return this.setSubs(f,c,a)},setSubs:function(e,d,a){var b=YAHOO.lang;if(!b.isString(e)){throw new TypeError("Cookie.setSubs(): Cookie name must be a string.")}if(!b.isObject(d)){throw new TypeError("Cookie.setSubs(): Cookie value must be an object.")}var c=this._createCookieString(e,this._createCookieHashString(d),false,a);document.cookie=c;return c}};YAHOO.register("cookie",YAHOO.util.Cookie,{version:"2.8.0r4",build:"2449"});YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,startEvent:new YAHOO.util.CustomEvent("start"),completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(a){this._msxml_progid.unshift(a)},setDefaultPostHeader:function(a){if(typeof a=="string"){this._default_post_header=a}else{if(typeof a=="boolean"){this._use_default_post_header=a}}},setDefaultXhrHeader:function(a){if(typeof a=="string"){this._default_xhr_header=a}else{this._use_default_xhr_header=a}},setPollingInterval:function(a){if(typeof a=="number"&&isFinite(a)){this._polling_interval=a}},createXhrObject:function(b){var d,a,f;try{a=new XMLHttpRequest();d={conn:a,tId:b,xhr:true}}catch(e){for(f=0;f<this._msxml_progid.length;++f){try{a=new ActiveXObject(this._msxml_progid[f]);d={conn:a,tId:b,xhr:true};break}catch(c){}}}finally{return d}},getConnectionObject:function(a){var c,b=this._transaction_id;try{if(!a){c=this.createXhrObject(b)}else{c={tId:b};if(a==="xdr"){c.conn=this._transport;c.xdr=true}else{if(a==="upload"){c.upload=true}}}if(c){this._transaction_id++}}catch(d){}return c},asyncRequest:function(b,e,c,a){var d,f,g=(c&&c.argument)?c.argument:null;if(this._isFileUpload){f="upload"}else{if(c.xdr){f="xdr"}}d=this.getConnectionObject(f);if(!d){return null}else{if(c&&c.customevents){this.initCustomEvents(d,c)}if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(d,c,e,a);return d}if(b.toUpperCase()=="GET"){if(this._sFormData.length!==0){e+=((e.indexOf("?")==-1)?"?":"&")+this._sFormData}}else{if(b.toUpperCase()=="POST"){a=a?this._sFormData+"&"+a:this._sFormData}}}if(b.toUpperCase()=="GET"&&(c&&c.cache===false)){e+=((e.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString()}if(this._use_default_xhr_header){if(!this._default_headers["X-Requested-With"]){this.initHeader("X-Requested-With",this._default_xhr_header,true)}}if((b.toUpperCase()==="POST"&&this._use_default_post_header)&&this._isFormSubmit===false){this.initHeader("Content-Type",this._default_post_header)}if(d.xdr){this.xdr(d,b,e,c,a);return d}d.conn.open(b,e,true);if(this._has_default_headers||this._has_http_headers){this.setHeader(d)}this.handleReadyState(d,c);d.conn.send(a||"");if(this._isFormSubmit===true){this.resetFormState()}this.startEvent.fire(d,g);if(d.startEvent){d.startEvent.fire(d,g)}return d}},initCustomEvents:function(a,b){var c;for(c in b.customevents){if(this._customEvents[c][0]){a[this._customEvents[c][0]]=new YAHOO.util.CustomEvent(this._customEvents[c][1],(b.scope)?b.scope:null);a[this._customEvents[c][0]].subscribe(b.customevents[c])}}},handleReadyState:function(c,b){var d=this,a=(b&&b.argument)?b.argument:null;if(b&&b.timeout){this._timeOut[c.tId]=window.setTimeout(function(){d.abort(c,b,true)},b.timeout)}this._poll[c.tId]=window.setInterval(function(){if(c.conn&&c.conn.readyState===4){window.clearInterval(d._poll[c.tId]);delete d._poll[c.tId];if(b&&b.timeout){window.clearTimeout(d._timeOut[c.tId]);delete d._timeOut[c.tId]}d.completeEvent.fire(c,a);if(c.completeEvent){c.completeEvent.fire(c,a)}d.handleTransactionResponse(c,b)}},this._polling_interval)},handleTransactionResponse:function(c,f,a){var j,d,h=(f&&f.argument)?f.argument:null,b=(c.r&&c.r.statusText==="xdr:success")?true:false,g=(c.r&&c.r.statusText==="xdr:failure")?true:false,e=a;try{if((c.conn.status!==undefined&&c.conn.status!==0)||b){j=c.conn.status}else{if(g&&!e){j=0}else{j=13030}}}catch(i){j=13030}if((j>=200&&j<300)||j===1223||b){d=c.xdr?c.r:this.createResponseObject(c,h);if(f&&f.success){if(!f.scope){f.success(d)}else{f.success.apply(f.scope,[d])}}this.successEvent.fire(d);if(c.successEvent){c.successEvent.fire(d)}}else{switch(j){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:d=this.createExceptionObject(c.tId,h,(a?a:false));if(f&&f.failure){if(!f.scope){f.failure(d)}else{f.failure.apply(f.scope,[d])}}break;default:d=(c.xdr)?c.response:this.createResponseObject(c,h);if(f&&f.failure){if(!f.scope){f.failure(d)}else{f.failure.apply(f.scope,[d])}}}this.failureEvent.fire(d);if(c.failureEvent){c.failureEvent.fire(d)}}this.releaseObject(c);d=null},createResponseObject:function(d,g){var a={},e={},i,b,h,c;try{b=d.conn.getAllResponseHeaders();h=b.split("\n");for(i=0;i<h.length;i++){c=h[i].indexOf(":");if(c!=-1){e[h[i].substring(0,c)]=YAHOO.lang.trim(h[i].substring(c+2))}}}catch(f){}a.tId=d.tId;a.status=(d.conn.status==1223)?204:d.conn.status;a.statusText=(d.conn.status==1223)?"No Content":d.conn.statusText;a.getResponseHeader=e;a.getAllResponseHeaders=b;a.responseText=d.conn.responseText;a.responseXML=d.conn.responseXML;if(g){a.argument=g}return a},createExceptionObject:function(b,f,a){var d=0,c="communication failure",g=-1,h="transaction aborted",e={};e.tId=b;if(a){e.status=g;e.statusText=h}else{e.status=d;e.statusText=c}if(f){e.argument=f}return e},initHeader:function(a,b,c){var d=(c)?this._default_headers:this._http_headers;d[a]=b;if(c){this._has_default_headers=true}else{this._has_http_headers=true}},setHeader:function(a){var b;if(this._has_default_headers){for(b in this._default_headers){if(YAHOO.lang.hasOwnProperty(this._default_headers,b)){a.conn.setRequestHeader(b,this._default_headers[b])}}}if(this._has_http_headers){for(b in this._http_headers){if(YAHOO.lang.hasOwnProperty(this._http_headers,b)){a.conn.setRequestHeader(b,this._http_headers[b])}}this._http_headers={};this._has_http_headers=false}},resetDefaultHeaders:function(){this._default_headers={};this._has_default_headers=false},abort:function(d,b,a){var e,g=(b&&b.argument)?b.argument:null;d=d||{};if(d.conn){if(d.xhr){if(this.isCallInProgress(d)){d.conn.abort();window.clearInterval(this._poll[d.tId]);delete this._poll[d.tId];if(a){window.clearTimeout(this._timeOut[d.tId]);delete this._timeOut[d.tId]}e=true}}else{if(d.xdr){d.conn.abort(d.tId);e=true}}}else{if(d.upload){var f="yuiIO"+d.tId;var c=document.getElementById(f);if(c){YAHOO.util.Event.removeListener(c,"load");document.body.removeChild(c);if(a){window.clearTimeout(this._timeOut[d.tId]);delete this._timeOut[d.tId]}e=true}}else{e=false}}if(e===true){this.abortEvent.fire(d,g);if(d.abortEvent){d.abortEvent.fire(d,g)}this.handleTransactionResponse(d,b,true)}return e},isCallInProgress:function(a){a=a||{};if(a.xhr&&a.conn){return a.conn.readyState!==4&&a.conn.readyState!==0}else{if(a.xdr&&a.conn){return a.conn.isCallInProgress(a.tId)}else{if(a.upload===true){return document.getElementById("yuiIO"+a.tId)?true:false}else{return false}}}},releaseObject:function(a){if(a&&a.conn){a.conn=null;a=null}}};(function(){var c=YAHOO.util.Connect,b={};function f(k){var j='<object id="YUIConnectionSwf" type="application/x-shockwave-flash" data="'+k+'" width="0" height="0"><param name="movie" value="'+k+'"><param name="allowScriptAccess" value="always"></object>',i=document.createElement("div");document.body.appendChild(i);i.innerHTML=j}function h(i,l,k,m,j){b[parseInt(i.tId)]={o:i,c:m};if(j){m.method=l;m.data=j}i.conn.send(k,m,i.tId)}function e(i){f(i);c._transport=document.getElementById("YUIConnectionSwf")}function g(){c.xdrReadyEvent.fire()}function a(i,j){if(i){c.startEvent.fire(i,j.argument);if(i.startEvent){i.startEvent.fire(i,j.argument)}}}function d(j){var i=b[j.tId].o,k=b[j.tId].c;if(j.statusText==="xdr:start"){a(i,k);return}j.responseText=decodeURI(j.responseText);i.r=j;if(k.argument){i.r.argument=k.argument}this.handleTransactionResponse(i,k,j.statusText==="xdr:abort"?true:false);delete b[j.tId]}c.xdr=h;c.swf=f;c.transport=e;c.xdrReadyEvent=new YAHOO.util.CustomEvent("xdrReady");c.xdrReady=g;c.handleXdrResponse=d})();(function(){var e=YAHOO.util.Connect,c=YAHOO.util.Event;e._isFormSubmit=false;e._isFileUpload=false;e._formNode=null;e._sFormData=null;e._submitElementValue=null;e.uploadEvent=new YAHOO.util.CustomEvent("upload"),e._hasSubmitListener=function(){if(c){c.addListener(document,"click",function(h){var i=c.getTarget(h),j=i.nodeName.toLowerCase();if((j==="input"||j==="button")&&(i.type&&i.type.toLowerCase()=="submit")){e._submitElementValue=encodeURIComponent(i.name)+"="+encodeURIComponent(i.value)}});return true}return false}();function b(k,p,u){var l,v,m,o,h,n=false,r=[],i=0,s,q,t,j,w;this.resetFormState();if(typeof k=="string"){l=(document.getElementById(k)||document.forms[k])}else{if(typeof k=="object"){l=k}else{return}}if(p){this.createFrame(u?u:null);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=l;return}for(s=0,q=l.elements.length;s<q;++s){v=l.elements[s];h=v.disabled;m=v.name;if(!h&&m){m=encodeURIComponent(m)+"=";o=encodeURIComponent(v.value);switch(v.type){case"select-one":if(v.selectedIndex>-1){w=v.options[v.selectedIndex];r[i++]=m+encodeURIComponent((w.attributes.value&&w.attributes.value.specified)?w.value:w.text)}break;case"select-multiple":if(v.selectedIndex>-1){for(t=v.selectedIndex,j=v.options.length;t<j;++t){w=v.options[t];if(w.selected){r[i++]=m+encodeURIComponent((w.attributes.value&&w.attributes.value.specified)?w.value:w.text)}}}break;case"radio":case"checkbox":if(v.checked){r[i++]=m+o}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(n===false){if(this._hasSubmitListener&&this._submitElementValue){r[i++]=this._submitElementValue}n=true}break;default:r[i++]=m+o}}}this._isFormSubmit=true;this._sFormData=r.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData}function f(){this._isFormSubmit=false;this._isFileUpload=false;this._formNode=null;this._sFormData=""}function g(j){var i="yuiIO"+this._transaction_id,h;if(YAHOO.env.ua.ie){h=document.createElement('<iframe id="'+i+'" name="'+i+'" />');if(typeof j=="boolean"){h.src="javascript:false"}}else{h=document.createElement("iframe");h.id=i;h.name=i}h.style.position="absolute";h.style.top="-1000px";h.style.left="-1000px";document.body.appendChild(h)}function d(l){var i=[],k=l.split("&"),j,h;for(j=0;j<k.length;j++){h=k[j].indexOf("=");if(h!=-1){i[j]=document.createElement("input");i[j].type="hidden";i[j].name=decodeURIComponent(k[j].substring(0,h));i[j].value=decodeURIComponent(k[j].substring(h+1));this._formNode.appendChild(i[j])}}return i}function a(t,i,s,u){var n="yuiIO"+t.tId,m="multipart/form-data",k=document.getElementById(n),r=(document.documentMode&&document.documentMode===8)?true:false,h=this,l=(i&&i.argument)?i.argument:null,j,o,v,p,w,q;w={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",s);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",n);if(YAHOO.env.ua.ie&&!r){this._formNode.setAttribute("encoding",m)}else{this._formNode.setAttribute("enctype",m)}if(u){j=this.appendPostData(u)}this._formNode.submit();this.startEvent.fire(t,l);if(t.startEvent){t.startEvent.fire(t,l)}if(i&&i.timeout){this._timeOut[t.tId]=window.setTimeout(function(){h.abort(t,i,true)},i.timeout)}if(j&&j.length>0){for(o=0;o<j.length;o++){this._formNode.removeChild(j[o])}}for(v in w){if(YAHOO.lang.hasOwnProperty(w,v)){if(w[v]){this._formNode.setAttribute(v,w[v])}else{this._formNode.removeAttribute(v)}}}this.resetFormState();q=function(){if(i&&i.timeout){window.clearTimeout(h._timeOut[t.tId]);delete h._timeOut[t.tId]}h.completeEvent.fire(t,l);if(t.completeEvent){t.completeEvent.fire(t,l)}p={tId:t.tId,argument:i.argument};try{p.responseText=k.contentWindow.document.body?k.contentWindow.document.body.innerHTML:k.contentWindow.document.documentElement.textContent;p.responseXML=k.contentWindow.document.XMLDocument?k.contentWindow.document.XMLDocument:k.contentWindow.document}catch(x){}if(i&&i.upload){if(!i.scope){i.upload(p)}else{i.upload.apply(i.scope,[p])}}h.uploadEvent.fire(p);if(t.uploadEvent){t.uploadEvent.fire(p)}c.removeListener(k,"load",q);setTimeout(function(){document.body.removeChild(k);h.releaseObject(t)},100)};c.addListener(k,"load",q)}e.setForm=b;e.resetFormState=f;e.createFrame=g;e.appendPostData=d;e.uploadFile=a})();YAHOO.register("connection",YAHOO.util.Connect,{version:"2.8.0r4",build:"2449"});(function(){var l=YAHOO.lang,isFunction=l.isFunction,isObject=l.isObject,isArray=l.isArray,_toStr=Object.prototype.toString,Native=(YAHOO.env.ua.caja?window:this).JSON,_UNICODE_EXCEPTIONS=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_ESCAPES=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,_VALUES=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_BRACKETS=/(?:^|:|,)(?:\s*\[)+/g,_UNSAFE=/^[\],:{}\s]*$/,_SPECIAL_CHARS=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_CHARS={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},UNDEFINED="undefined",OBJECT="object",NULL="null",STRING="string",NUMBER="number",BOOLEAN="boolean",DATE="date",_allowable={"undefined":UNDEFINED,string:STRING,"[object String]":STRING,number:NUMBER,"[object Number]":NUMBER,"boolean":BOOLEAN,"[object Boolean]":BOOLEAN,"[object Date]":DATE,"[object RegExp]":OBJECT},EMPTY="",OPEN_O="{",CLOSE_O="}",OPEN_A="[",CLOSE_A="]",COMMA=",",COMMA_CR=",\n",CR="\n",COLON=":",COLON_SP=": ",QUOTE='"';Native=_toStr.call(Native)==="[object JSON]"&&Native;function _char(c){if(!_CHARS[c]){_CHARS[c]="\\u"+("0000"+(+(c.charCodeAt(0))).toString(16)).slice(-4)}return _CHARS[c]}function _revive(data,reviver){var walk=function(o,key){var k,v,value=o[key];if(value&&typeof value==="object"){for(k in value){if(l.hasOwnProperty(value,k)){v=walk(value,k);if(v===undefined){delete value[k]}else{value[k]=v}}}}return reviver.call(o,key,value)};return typeof reviver==="function"?walk({"":data},""):data}function _prepare(s){return s.replace(_UNICODE_EXCEPTIONS,_char)}function _isSafe(str){return l.isString(str)&&_UNSAFE.test(str.replace(_ESCAPES,"@").replace(_VALUES,"]").replace(_BRACKETS,""))}function _parse(s,reviver){s=_prepare(s);if(_isSafe(s)){return _revive(eval("("+s+")"),reviver)}throw new SyntaxError("JSON.parse")}function _type(o){var t=typeof o;return _allowable[t]||_allowable[_toStr.call(o)]||(t===OBJECT?(o?OBJECT:NULL):UNDEFINED)}function _string(s){return QUOTE+s.replace(_SPECIAL_CHARS,_char)+QUOTE}function _indent(s,space){return s.replace(/^/gm,space)}function _stringify(o,w,space){if(o===undefined){return undefined}var replacer=isFunction(w)?w:null,format=_toStr.call(space).match(/String|Number/)||[],_date=YAHOO.lang.JSON.dateToString,stack=[],tmp,i,len;if(replacer||!isArray(w)){w=undefined}if(w){tmp={};for(i=0,len=w.length;i<len;++i){tmp[w[i]]=true}w=tmp}space=format[0]==="Number"?new Array(Math.min(Math.max(0,space),10)+1).join(" "):(space||EMPTY).slice(0,10);function _serialize(h,key){var value=h[key],t=_type(value),a=[],colon=space?COLON_SP:COLON,arr,i,keys,k,v;if(isObject(value)&&isFunction(value.toJSON)){value=value.toJSON(key)}else{if(t===DATE){value=_date(value)}}if(isFunction(replacer)){value=replacer.call(h,key,value)}if(value!==h[key]){t=_type(value)}switch(t){case DATE:case OBJECT:break;case STRING:return _string(value);case NUMBER:return isFinite(value)?value+EMPTY:NULL;case BOOLEAN:return value+EMPTY;case NULL:return NULL;default:return undefined}for(i=stack.length-1;i>=0;--i){if(stack[i]===value){throw new Error("JSON.stringify. Cyclical reference")}}arr=isArray(value);stack.push(value);if(arr){for(i=value.length-1;i>=0;--i){a[i]=_serialize(value,i)||NULL}}else{keys=w||value;i=0;for(k in keys){if(keys.hasOwnProperty(k)){v=_serialize(value,k);if(v){a[i++]=_string(k)+colon+v}}}}stack.pop();if(space&&a.length){return arr?OPEN_A+CR+_indent(a.join(COMMA_CR),space)+CR+CLOSE_A:OPEN_O+CR+_indent(a.join(COMMA_CR),space)+CR+CLOSE_O}else{return arr?OPEN_A+a.join(COMMA)+CLOSE_A:OPEN_O+a.join(COMMA)+CLOSE_O}}return _serialize({"":o},"")}YAHOO.lang.JSON={useNativeParse:!!Native,useNativeStringify:!!Native,isSafe:function(s){return _isSafe(_prepare(s))},parse:function(s,reviver){return Native&&YAHOO.lang.JSON.useNativeParse?Native.parse(s,reviver):_parse(s,reviver)},stringify:function(o,w,space){return Native&&YAHOO.lang.JSON.useNativeStringify?Native.stringify(o,w,space):_stringify(o,w,space)},dateToString:function(d){function _zeroPad(v){return v<10?"0"+v:v}return d.getUTCFullYear()+"-"+_zeroPad(d.getUTCMonth()+1)+"-"+_zeroPad(d.getUTCDate())+"T"+_zeroPad(d.getUTCHours())+COLON+_zeroPad(d.getUTCMinutes())+COLON+_zeroPad(d.getUTCSeconds())+"Z"},stringToDate:function(str){var m=str.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?Z$/);if(m){var d=new Date();d.setUTCFullYear(m[1],m[2]-1,m[3]);d.setUTCHours(m[4],m[5],m[6],(m[7]||0));return d}return str}};YAHOO.lang.JSON.isValid=YAHOO.lang.JSON.isSafe})();YAHOO.register("json",YAHOO.lang.JSON,{version:"2.8.0r4",build:"2449"});tagged.namespace("security.nobot");tagged.security.nobot={trigger:function(response,callObj){var newCallObj={method:"tagged.security.nobot.submitAnswer",answer:eval(response.result.jsfunc),origCallObj:YAHOO.lang.JSON.stringify(response.result.origCallObj)};if(callObj){newCallObj.callback=callObj.callback}TAGGED.api.call(newCallObj)}};/*!
 * jQuery UI 1.8.11
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(a,c){a.ui=a.ui||{};if(a.ui.version){return}a.extend(a.ui,{version:"1.8.11",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(d,e){return typeof d==="number"?this.each(function(){var f=this;setTimeout(function(){a(f).focus();if(e){e.call(f)}},d)}):this._focus.apply(this,arguments)},scrollParent:function(){var d;if((a.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){d=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(a.curCSS(this,"position",1))&&(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}else{d=this.parents().filter(function(){return(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!d.length?a(document):d},zIndex:function(g){if(g!==c){return this.css("zIndex",g)}if(this.length){var e=a(this[0]),d,f;while(e.length&&e[0]!==document){d=e.css("position");if(d==="absolute"||d==="relative"||d==="fixed"){f=parseInt(e.css("zIndex"),10);if(!isNaN(f)&&f!==0){return f}}e=e.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(d){d.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(f,d){var e=d==="Width"?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};function h(l,k,i,m){a.each(e,function(){k-=parseFloat(a.curCSS(l,"padding"+this,true))||0;if(i){k-=parseFloat(a.curCSS(l,"border"+this+"Width",true))||0}if(m){k-=parseFloat(a.curCSS(l,"margin"+this,true))||0}});return k}a.fn["inner"+d]=function(i){if(i===c){return j["inner"+d].call(this)}return this.each(function(){a(this).css(g,h(this,i)+"px")})};a.fn["outer"+d]=function(i,k){if(typeof i!=="number"){return j["outer"+d].call(this,i)}return this.each(function(){a(this).css(g,h(this,i,true,k)+"px")})}});function b(d){return !a(d).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.extend(a.expr[":"],{data:function(f,e,d){return !!a.data(f,d[3])},focusable:function(f){var i=f.nodeName.toLowerCase(),d=a.attr(f,"tabindex");if("area"===i){var h=f.parentNode,g=h.name,e;if(!f.href||!g||h.nodeName.toLowerCase()!=="map"){return false}e=a("img[usemap=#"+g+"]")[0];return !!e&&b(e)}return(/input|select|textarea|button|object/.test(i)?!f.disabled:"a"==i?f.href||!isNaN(d):!isNaN(d))&&b(f)},tabbable:function(e){var d=a.attr(e,"tabindex");return(isNaN(d)||d>=0)&&a(e).is(":focusable")}});a(function(){var d=document.body,e=d.appendChild(e=document.createElement("div"));a.extend(e.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=e.offsetHeight===100;a.support.selectstart="onselectstart" in e;d.removeChild(e).style.display="none"});a.extend(a.ui,{plugin:{add:function(e,f,h){var g=a.ui[e].prototype;for(var d in h){g.plugins[d]=g.plugins[d]||[];g.plugins[d].push([f,h[d]])}},call:function(d,f,e){var h=d.plugins[f];if(!h||!d.element[0].parentNode){return}for(var g=0;g<h.length;g++){if(d.options[h[g][0]]){h[g][1].apply(d.element,e)}}}},contains:function(e,d){return document.compareDocumentPosition?e.compareDocumentPosition(d)&16:e!==d&&e.contains(d)},hasScroll:function(g,e){if(a(g).css("overflow")==="hidden"){return false}var d=(e&&e==="left")?"scrollLeft":"scrollTop",f=false;if(g[d]>0){return true}g[d]=1;f=(g[d]>0);g[d]=0;return f},isOverAxis:function(e,d,f){return(e>d)&&(e<(d+f))},isOver:function(i,e,h,g,d,f){return a.ui.isOverAxis(i,h,d)&&a.ui.isOverAxis(e,g,f)}})})(jQuery);/*!
 * jQuery UI Widget 1.8.11
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,d){if(b.cleanData){var c=b.cleanData;b.cleanData=function(e){for(var f=0,g;(g=e[f])!=null;f++){b(g).triggerHandler("remove")}c(e)}}else{var a=b.fn.remove;b.fn.remove=function(e,f){return this.each(function(){if(!f){if(!e||b.filter(e,[this]).length){b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")})}}return a.call(b(this),e,f)})}}b.widget=function(f,h,e){var g=f.split(".")[0],j;f=f.split(".")[1];j=g+"-"+f;if(!e){e=h;h=b.Widget}b.expr[":"][j]=function(k){return !!b.data(k,f)};b[g]=b[g]||{};b[g][f]=function(k,l){if(arguments.length){this._createWidget(k,l)}};var i=new h();i.options=b.extend(true,{},i.options);b[g][f].prototype=b.extend(true,i,{namespace:g,widgetName:f,widgetEventPrefix:b[g][f].prototype.widgetEventPrefix||f,widgetBaseClass:j},e);b.widget.bridge(f,b[g][f])};b.widget.bridge=function(f,e){b.fn[f]=function(i){var g=typeof i==="string",h=Array.prototype.slice.call(arguments,1),j=this;i=!g&&h.length?b.extend.apply(null,[true,i].concat(h)):i;if(g&&i.charAt(0)==="_"){return j}if(g){this.each(function(){var k=b.data(this,f),l=k&&b.isFunction(k[i])?k[i].apply(k,h):k;if(l!==k&&l!==d){j=l;return false}})}else{this.each(function(){var k=b.data(this,f);if(k){k.option(i||{})._init()}else{b.data(this,f,new e(i,this))}})}return j}};b.Widget=function(e,f){if(arguments.length){this._createWidget(e,f)}};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(f,g){b.data(g,this.widgetName,this);this.element=b(g);this.options=b.extend(true,{},this.options,this._getCreateOptions(),f);var e=this;this.element.bind("remove."+this.widgetName,function(){e.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(f,g){var e=f;if(arguments.length===0){return b.extend({},this.options)}if(typeof f==="string"){if(g===d){return this.options[f]}e={};e[f]=g}this._setOptions(e);return this},_setOptions:function(f){var e=this;b.each(f,function(g,h){e._setOption(g,h)});return this},_setOption:function(e,f){this.options[e]=f;if(e==="disabled"){this.widget()[f?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",f)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(f,g,h){var k=this.options[f];g=b.Event(g);g.type=(f===this.widgetEventPrefix?f:this.widgetEventPrefix+f).toLowerCase();h=h||{};if(g.originalEvent){for(var e=b.event.props.length,j;e;){j=b.event.props[--e];g[j]=g.originalEvent[j]}}this.element.trigger(g,h);return !(b.isFunction(k)&&k.call(this.element[0],g,h)===false||g.isDefaultPrevented())}}})(jQuery);(function(f,g){f.ui=f.ui||{};var d=/left|center|right/,e=/top|center|bottom/,a="center",b=f.fn.position,c=f.fn.offset;f.fn.position=function(i){if(!i||!i.of){return b.apply(this,arguments)}i=f.extend({},i);var m=f(i.of),l=m[0],o=(i.collision||"flip").split(" "),n=i.offset?i.offset.split(" "):[0,0],k,h,j;if(l.nodeType===9){k=m.width();h=m.height();j={top:0,left:0}}else{if(l.setTimeout){k=m.width();h=m.height();j={top:m.scrollTop(),left:m.scrollLeft()}}else{if(l.preventDefault){i.at="left top";k=h=0;j={top:i.of.pageY,left:i.of.pageX}}else{k=m.outerWidth();h=m.outerHeight();j=m.offset()}}}f.each(["my","at"],function(){var p=(i[this]||"").split(" ");if(p.length===1){p=d.test(p[0])?p.concat([a]):e.test(p[0])?[a].concat(p):[a,a]}p[0]=d.test(p[0])?p[0]:a;p[1]=e.test(p[1])?p[1]:a;i[this]=p});if(o.length===1){o[1]=o[0]}n[0]=parseInt(n[0],10)||0;if(n.length===1){n[1]=n[0]}n[1]=parseInt(n[1],10)||0;if(i.at[0]==="right"){j.left+=k}else{if(i.at[0]===a){j.left+=k/2}}if(i.at[1]==="bottom"){j.top+=h}else{if(i.at[1]===a){j.top+=h/2}}j.left+=n[0];j.top+=n[1];return this.each(function(){var s=f(this),u=s.outerWidth(),r=s.outerHeight(),t=parseInt(f.curCSS(this,"marginLeft",true))||0,q=parseInt(f.curCSS(this,"marginTop",true))||0,w=u+t+(parseInt(f.curCSS(this,"marginRight",true))||0),x=r+q+(parseInt(f.curCSS(this,"marginBottom",true))||0),v=f.extend({},j),p;if(i.my[0]==="right"){v.left-=u}else{if(i.my[0]===a){v.left-=u/2}}if(i.my[1]==="bottom"){v.top-=r}else{if(i.my[1]===a){v.top-=r/2}}v.left=Math.round(v.left);v.top=Math.round(v.top);p={left:v.left-t,top:v.top-q};f.each(["left","top"],function(z,y){if(f.ui.position[o[z]]){f.ui.position[o[z]][y](v,{targetWidth:k,targetHeight:h,elemWidth:u,elemHeight:r,collisionPosition:p,collisionWidth:w,collisionHeight:x,offset:n,my:i.my,at:i.at})}});if(f.fn.bgiframe){s.bgiframe()}s.offset(f.extend(v,{using:i.using}))})};f.ui.position={fit:{left:function(h,i){var k=f(window),j=i.collisionPosition.left+i.collisionWidth-k.width()-k.scrollLeft();h.left=j>0?h.left-j:Math.max(h.left-i.collisionPosition.left,h.left)},top:function(h,i){var k=f(window),j=i.collisionPosition.top+i.collisionHeight-k.height()-k.scrollTop();h.top=j>0?h.top-j:Math.max(h.top-i.collisionPosition.top,h.top)}},flip:{left:function(i,k){if(k.at[0]===a){return}var m=f(window),l=k.collisionPosition.left+k.collisionWidth-m.width()-m.scrollLeft(),h=k.my[0]==="left"?-k.elemWidth:k.my[0]==="right"?k.elemWidth:0,j=k.at[0]==="left"?k.targetWidth:-k.targetWidth,n=-2*k.offset[0];i.left+=k.collisionPosition.left<0?h+j+n:l>0?h+j+n:0},top:function(i,k){if(k.at[1]===a){return}var m=f(window),l=k.collisionPosition.top+k.collisionHeight-m.height()-m.scrollTop(),h=k.my[1]==="top"?-k.elemHeight:k.my[1]==="bottom"?k.elemHeight:0,j=k.at[1]==="top"?k.targetHeight:-k.targetHeight,n=-2*k.offset[1];i.top+=k.collisionPosition.top<0?h+j+n:l>0?h+j+n:0}}};if(!f.offset.setOffset){f.offset.setOffset=function(l,i){if(/static/.test(f.curCSS(l,"position"))){l.style.position="relative"}var k=f(l),n=k.offset(),h=parseInt(f.curCSS(l,"top",true),10)||0,m=parseInt(f.curCSS(l,"left",true),10)||0,j={top:(i.top-n.top)+h,left:(i.left-n.left)+m};if("using" in i){i.using.call(l,j)}else{k.css(j)}};f.fn.offset=function(h){var i=this[0];if(!i||!i.ownerDocument){return null}if(h){return this.each(function(){f.offset.setOffset(this,h)})}return c.call(this)}}}(jQuery));(function(d,e){var b="ui-dialog ui-widget ui-widget-content ui-corner-all ",a={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},c={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};d.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",collision:"fit",using:function(g){var f=d(this).css(g).offset().top;if(f<0){d(this).css("top",g.top-f)}}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string"){this.originalTitle=""}this.options.title=this.options.title||this.originalTitle;var n=this,o=n.options,l=o.title||"&#160;",g=d.ui.dialog.getTitleId(n.element),m=(n.uiDialog=d("<div></div>")).appendTo(document.body).hide().addClass(b+o.dialogClass).css({zIndex:o.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(p){if(o.closeOnEscape&&p.keyCode&&p.keyCode===d.ui.keyCode.ESCAPE){n.close(p);p.preventDefault()}}).attr({role:"dialog","aria-labelledby":g}).mousedown(function(p){n.moveToTop(false,p)}),i=n.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(m),h=(n.uiDialogTitlebar=d("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(m),k=d('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){k.addClass("ui-state-hover")},function(){k.removeClass("ui-state-hover")}).focus(function(){k.addClass("ui-state-focus")}).blur(function(){k.removeClass("ui-state-focus")}).click(function(p){n.close(p);return false}).appendTo(h),j=(n.uiDialogTitlebarCloseText=d("<span></span>")).addClass("ui-icon ui-icon-closethick").text(o.closeText).appendTo(k),f=d("<span></span>").addClass("ui-dialog-title").attr("id",g).html(l).prependTo(h);if(d.isFunction(o.beforeclose)&&!d.isFunction(o.beforeClose)){o.beforeClose=o.beforeclose}h.find("*").add(h).disableSelection();if(o.draggable&&d.fn.draggable){n._makeDraggable()}if(o.resizable&&d.fn.resizable){n._makeResizable()}n._createButtons(o.buttons);n._isOpen=false;if(d.fn.bgiframe){m.bgiframe()}},_init:function(){if(this.options.autoOpen){this.open()}},destroy:function(){var f=this;if(f.overlay){f.overlay.destroy()}f.uiDialog.hide();f.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");f.uiDialog.remove();if(f.originalTitle){f.element.attr("title",f.originalTitle)}return f},widget:function(){return this.uiDialog},close:function(i){var f=this,h,g;if(false===f._trigger("beforeClose",i)){return}if(f.overlay){f.overlay.destroy()}f.uiDialog.unbind("keypress.ui-dialog");f._isOpen=false;if(f.options.hide){f.uiDialog.hide(f.options.hide,function(){f._trigger("close",i)})}else{f.uiDialog.hide();f._trigger("close",i)}d.ui.dialog.overlay.resize();if(f.options.modal){h=0;d(".ui-dialog").each(function(){if(this!==f.uiDialog[0]){g=d(this).css("z-index");if(!isNaN(g)){h=Math.max(h,g)}}});d.ui.dialog.maxZ=h}return f},isOpen:function(){return this._isOpen},moveToTop:function(j,i){var f=this,h=f.options,g;if((h.modal&&!j)||(!h.stack&&!h.modal)){return f._trigger("focus",i)}if(h.zIndex>d.ui.dialog.maxZ){d.ui.dialog.maxZ=h.zIndex}if(f.overlay){d.ui.dialog.maxZ+=1;f.overlay.$el.css("z-index",d.ui.dialog.overlay.maxZ=d.ui.dialog.maxZ)}g={scrollTop:f.element.attr("scrollTop"),scrollLeft:f.element.attr("scrollLeft")};d.ui.dialog.maxZ+=1;f.uiDialog.css("z-index",d.ui.dialog.maxZ);f.element.attr(g);f._trigger("focus",i);return f},open:function(){if(this._isOpen){return}var g=this,h=g.options,f=g.uiDialog;g.overlay=h.modal?new d.ui.dialog.overlay(g):null;g._size();g._position(h.position);f.show(h.show);g.moveToTop(true);if(h.modal){f.bind("keypress.ui-dialog",function(k){if(k.keyCode!==d.ui.keyCode.TAB){return}var j=d(":tabbable",this),l=j.filter(":first"),i=j.filter(":last");if(k.target===i[0]&&!k.shiftKey){l.focus(1);return false}else{if(k.target===l[0]&&k.shiftKey){i.focus(1);return false}}})}d(g.element.find(":tabbable").get().concat(f.find(".ui-dialog-buttonpane :tabbable").get().concat(f.get()))).eq(0).focus();g._isOpen=true;g._trigger("open");return g},_createButtons:function(i){var h=this,f=false,g=d("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),j=d("<div></div>").addClass("ui-dialog-buttonset").appendTo(g);h.uiDialog.find(".ui-dialog-buttonpane").remove();if(typeof i==="object"&&i!==null){d.each(i,function(){return !(f=true)})}if(f){d.each(i,function(k,m){m=d.isFunction(m)?{click:m,text:k}:m;var l=d('<button type="button"></button>').attr(m,true).unbind("click").click(function(){m.click.apply(h.element[0],arguments)}).appendTo(j);if(d.fn.button){l.button()}});g.appendTo(h.uiDialog)}},_makeDraggable:function(){var f=this,i=f.options,j=d(document),h;function g(k){return{position:k.position,offset:k.offset}}f.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(k,l){h=i.height==="auto"?"auto":d(this).height();d(this).height(d(this).height()).addClass("ui-dialog-dragging");f._trigger("dragStart",k,g(l))},drag:function(k,l){f._trigger("drag",k,g(l))},stop:function(k,l){i.position=[l.position.left-j.scrollLeft(),l.position.top-j.scrollTop()];d(this).removeClass("ui-dialog-dragging").height(h);f._trigger("dragStop",k,g(l));d.ui.dialog.overlay.resize()}})},_makeResizable:function(k){k=(k===e?this.options.resizable:k);var g=this,j=g.options,f=g.uiDialog.css("position"),i=(typeof k==="string"?k:"n,e,s,w,se,sw,ne,nw");function h(l){return{originalPosition:l.originalPosition,originalSize:l.originalSize,position:l.position,size:l.size}}g.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:g.element,maxWidth:j.maxWidth,maxHeight:j.maxHeight,minWidth:j.minWidth,minHeight:g._minHeight(),handles:i,start:function(l,m){d(this).addClass("ui-dialog-resizing");g._trigger("resizeStart",l,h(m))},resize:function(l,m){g._trigger("resize",l,h(m))},stop:function(l,m){d(this).removeClass("ui-dialog-resizing");j.height=d(this).height();j.width=d(this).width();g._trigger("resizeStop",l,h(m));d.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var f=this.options;if(f.height==="auto"){return f.minHeight}else{return Math.min(f.minHeight,f.height)}},_position:function(g){var h=[],i=[0,0],f;if(g){if(typeof g==="string"||(typeof g==="object"&&"0" in g)){h=g.split?g.split(" "):[g[0],g[1]];if(h.length===1){h[1]=h[0]}d.each(["left","top"],function(k,j){if(+h[k]===h[k]){i[k]=h[k];h[k]=j}});g={my:h.join(" "),at:h.join(" "),offset:i.join(" ")}}g=d.extend({},d.ui.dialog.prototype.options.position,g)}else{g=d.ui.dialog.prototype.options.position}f=this.uiDialog.is(":visible");if(!f){this.uiDialog.show()}this.uiDialog.css({top:0,left:0}).position(d.extend({of:window},g));if(!f){this.uiDialog.hide()}},_setOptions:function(i){var g=this,f={},h=false;d.each(i,function(j,k){g._setOption(j,k);if(j in a){h=true}if(j in c){f[j]=k}});if(h){this._size()}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option",f)}},_setOption:function(i,j){var g=this,f=g.uiDialog;switch(i){case"beforeclose":i="beforeClose";break;case"buttons":g._createButtons(j);break;case"closeText":g.uiDialogTitlebarCloseText.text(""+j);break;case"dialogClass":f.removeClass(g.options.dialogClass).addClass(b+j);break;case"disabled":if(j){f.addClass("ui-dialog-disabled")}else{f.removeClass("ui-dialog-disabled")}break;case"draggable":var h=f.is(":data(draggable)");if(h&&!j){f.draggable("destroy")}if(!h&&j){g._makeDraggable()}break;case"position":g._position(j);break;case"resizable":var k=f.is(":data(resizable)");if(k&&!j){f.resizable("destroy")}if(k&&typeof j==="string"){f.resizable("option","handles",j)}if(!k&&j!==false){g._makeResizable(j)}break;case"title":d(".ui-dialog-title",g.uiDialogTitlebar).html(""+(j||"&#160;"));break}d.Widget.prototype._setOption.apply(g,arguments)},_size:function(){var j=this.options,g,i,f=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(j.minWidth>j.width){j.width=j.minWidth}g=this.uiDialog.css({height:"auto",width:j.width}).height();i=Math.max(0,j.minHeight-g);if(j.height==="auto"){if(d.support.minHeight){this.element.css({minHeight:i,height:"auto"})}else{this.uiDialog.show();var h=this.element.css("height","auto").height();if(!f){this.uiDialog.hide()}this.element.height(Math.max(h,i))}}else{this.element.height(Math.max(j.height-g,0))}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}}});d.extend(d.ui.dialog,{version:"1.8.11",uuid:0,maxZ:0,getTitleId:function(f){var g=f.attr("id");if(!g){this.uuid+=1;g=this.uuid}return"ui-dialog-title-"+g},overlay:function(f){this.$el=d.ui.dialog.overlay.create(f)}});d.extend(d.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:d.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(f){return f+".dialog-overlay"}).join(" "),create:function(g){if(this.instances.length===0){setTimeout(function(){if(d.ui.dialog.overlay.instances.length){d(document).bind(d.ui.dialog.overlay.events,function(h){if(d(h.target).zIndex()<d.ui.dialog.overlay.maxZ){return false}})}},1);d(document).bind("keydown.dialog-overlay",function(h){if(g.options.closeOnEscape&&h.keyCode&&h.keyCode===d.ui.keyCode.ESCAPE){g.close(h);h.preventDefault()}});d(window).bind("resize.dialog-overlay",d.ui.dialog.overlay.resize)}var f=(this.oldInstances.pop()||d("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});if(d.fn.bgiframe){f.bgiframe()}this.instances.push(f);return f},destroy:function(f){var g=d.inArray(f,this.instances);if(g!=-1){this.oldInstances.push(this.instances.splice(g,1)[0])}if(this.instances.length===0){d([document,window]).unbind(".dialog-overlay")}f.remove();var h=0;d.each(this.instances,function(){h=Math.max(h,this.css("z-index"))});this.maxZ=h},height:function(){var g,f;if(d.browser.msie&&d.browser.version<7){g=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);f=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(g<f){return d(window).height()+"px"}else{return g+"px"}}else{return d(document).height()+"px"}},width:function(){var f,g;if(d.browser.msie&&d.browser.version<7){f=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);g=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(f<g){return d(window).width()+"px"}else{return f+"px"}}else{return d(document).width()+"px"}},resize:function(){var f=d([]);d.each(d.ui.dialog.overlay.instances,function(){f=f.add(this)});f.css({width:0,height:0}).css({width:d.ui.dialog.overlay.width(),height:d.ui.dialog.overlay.height()})}});d.extend(d.ui.dialog.overlay.prototype,{destroy:function(){d.ui.dialog.overlay.destroy(this.$el)}})}(jQuery));tagged.namespace("modules.lightbox");tagged.modules.lightbox={_shell:"<div>%s</div>",_dialog:null,_config:null,_parentEl:null,init:function(b){if(!(b&&b.body)){return false}if(!this._parentEl){this._parentEl=$("<div class='dialog-parent'></div>");$(document.body).append(this._parentEl)}this._config=b;var a=sprintf(this._shell,b.body);this._parentEl.html(a);this._dialog=$(this._parentEl).dialog({modal:true,resizable:false,closeOnEscape:true,draggable:false,position:b.position||"center",autoOpen:false,title:b.title,width:b.width||"auto",height:b.height||"auto",minHeight:b.minHeight||150,dialogClass:b.className||"",zIndex:b.zIndex||1002});$(this.getDialogDom()).addClass("tagged_lightbox");if(typeof b.closeOnEscape!=="undefined"){this._dialog.dialog("option","closeOnEscape",b.closeOnEscape)}if(!b.title){$(".ui-dialog-titlebar").css("background","none");this._dialog.css("margin-top",0)}$(window).resize(function(){tagged.modules.lightbox.reposition("center","center",this)});if(b.className){this._dialog.dialog("option","dialogClass",b.className)}this.setEventHandlers();if(typeof b.notshow==="undefined"||!b.notshow){this.show()}return this},setEventHandlers:function(){if(this._config.destroyOnClose){this._dialog.bind("dialogclose",$.proxy(function(b,a){this.destroy()},this))}},setBody:function(a){if(this._dialog){this._dialog.html(a)}},setHeight:function(a){if(this._dialog){this._dialog.dialog("option","height",a)}},setTitle:function(a){if(this._dialog){this._dialog.dialog("option","title",a)}},getDialogDom:function(){if(this._dialog){return this._dialog.dialog("widget")}return false},show:function(){if(this._dialog){this._dialog.dialog("open")}},reposition:function(b,a,c){if(this._dialog){this._dialog.dialog("widget").position({my:b,at:a,of:c})}},setCss:function(a,b){if(this._dialog){this._dialog.dialog("widget").css(a,b)}},setBodyCss:function(a,b){if(this._dialog){this._dialog.css(a,b)}},hide:function(){if(this._dialog){this._dialog.dialog("close")}},destroy:function(){if(this._dialog){this._dialog.dialog("destroy")}},registerCallback:function(a,b){switch(a){case"close":this._dialog.bind("dialogclose",$.proxy(function(d,c){b()},this));break}}};tagged.namespace("security.password");tagged.security.password={cancel_response:{stat:"cancel"},trigger:function(a,b){if(a.stat!="password"||!a.result){return}this.callObj=b;this.origCallObj=JSON.stringify(a.result.origCallObj);this.panel=tagged.modules.lightbox.init({body:a.result.passwordPromptHtml,width:"338px",closeOnEscape:true,className:"password_panel",position:"center",zIndex:10000,title:this.strings.header});$("#password_cancel").click($.proxy(this.cancel,this))},submit:function(a){var b={method:"tagged.security.verifyPassword",password:a,origCallObj:this.origCallObj};if(this.callObj){b.callback=this.callObj.callback}TAGGED.api.call(b);this.panel.destroy()},cancel:function(e){e.preventDefault();var callback=this.callObj.callback;if(callback.fn){callback.fn.call(callback.scope,this.cancel_response,callback.args)}else{eval(callback+"("+YAHOO.lang.JSON.stringify(this.cancel_response)+");")}this.panel.destroy()}};tagged.namespace("security.captcha");tagged.security.captcha={panel:null,trigger:function(a,b){if(a.stat!="security"||!a.result){return}this.callObj=b;this.origCallObj=JSON.stringify(a.result.origCallObj);tagged.security.captcha.panel=tagged.modules.lightbox.init({body:a.result.captchaHtml,width:"338px",closeOnEscape:true,className:"captcha_lightbox",position:"center",zIndex:10000});Recaptcha.create(a.result.recaptchaKey,"recaptcha_div",{theme:"white",callback:Recaptcha.focus_response_field});$("#captcha_cancel").on("click",this.cancel)},submit:function(b,c,a){var d={method:"tagged.security.verifyRecaptcha",challenge:b,response:c,code:a,origCallObj:this.origCallObj};if(this.callObj){d.callback=this.callObj.callback}TAGGED.api.call(d);tagged.security.captcha.panel.destroy()},cancel:function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}var callback=this.callObj.callback;if(callback.fn){callback.fn.call(callback.scope,this.cancel_response,callback.args)}else{eval(callback+"("+YAHOO.lang.JSON.stringify(this.cancel_response)+");")}tagged.security.captcha.panel.destroy()}};TAGGED.namespace("api");TAGGED.api={format:"json",_login_regex_match:/\\"error\\":{\\"code\\":11,.*}/,_login_regex_match2:/^login status: -1000$/,_validation_decoded_match:/"error":{"code":23,.*}/,_captcha_regex_match:/"stat":"security"/,_nobot_regex_match:/"stat":"nobot"/,_password_regex_match:/"stat":"password"/,errorResponse:{stat:"fail",error:{code:-1}},errorResponseBC:'({stat: "fail", error: {code: -1}})',queue:[],_deferQueueTime:300,defer:[],_deferTimer:null,_trackedRequests:{},_requestsLUT:{},alertOnError:true,redirectOnNotLoggedIn:true,autoQueue:false,autoQueueWaitTime:0,autoQueueBundles:2,autoQueueMinBundleSize:3,dequeue:function(){var a=this.queue;this.queue=[];if(a.length){this.call(a)}},deferDequeue:function(){if((this.queue.length+this.defer.length)<=1){this.startDefer({result:this._deferQueueTime});return}this.queue=this.queue.concat(this.defer);this.defer=[];this.dequeue()},handleDefer:function(){this.stopDefer();if(!this.defer.length||this.defer[this.defer.length-1].callback!="TAGGED.api.startDefer"){this.defer.push({method:"tagged.util.echoIt",data:this._deferQueueTime,callback:"TAGGED.api.startDefer"})}this.deferDequeue()},startDefer:function(a){var b=0;if(a){if(a.stat=="fail"){return}if(a.result){b=a.result}else{b=a}}if(YAHOO.lang.isString(b)){b=parseInt(b)}if(!YAHOO.lang.isNumber(b)){b=0}if(b>0){this.stopDefer();this._deferTimer=window.setTimeout("TAGGED.api.handleDefer()",1000*b)}else{this.handleDefer()}},stopDefer:function(){if(!this._deferTimer){return}window.clearTimeout(this._deferTimer);this._deferTimer=null},call:function(a,c){var b="auto_queue" in a?a.auto_queue:this.autoQueue;if(b){this.queue=this.queue.concat(YAHOO.lang.isArray(a)?a:[a]);if(!this.autoQueueWait){this.autoQueueWait=true;setTimeout(tagged.bind(function(){this.autoQueueWait=false;var e=Math.max(Math.ceil(this.queue.length/this.autoQueueBundles),this.autoQueueMinBundleSize);for(var d=0;d<this.autoQueueBundles&&this.queue.length;d++){this._call(this.queue.splice(0,e))}},this),this.autoQueueWaitTime)}}else{this._call(a,c)}},_call:function(l,h){if("auto_queue" in l){var b=l.auto_queue;delete l.auto_queue}else{var b=this.autoQueue}if(this.queue.length&&!h&&YAHOO.lang.isObject(l)&&!b){if(YAHOO.lang.isArray(l)){for(var e=0,j=l.length;e<j;++e){this.queue.push(l[e])}}else{this.queue.push(l)}this.dequeue();return}var a="\n";var f={application_id:"user",format:this.format};if(this.getQueryStringParameter("no_cache")||this.getQueryStringParameter("clear_cache")){f.no_cache="1"}var k=this.getQueryStringParameter("loc");if(!k){k=this.getQueryStringParameter("locale")}if(k){f.locale=k}if(l.constructor==Array){var d=tagged.clone(l);for(var e=0,g=l.length;e<g;++e){if(l[e].constructor==String){a+=l[e]+"\n"}else{if(typeof(l[e].callback)=="object"){delete l[e].callback}a+=TAGGED.api.createQueryString(l[e],true)+"\n"}}}else{if(l.constructor==String){var d=l;a+=l+"\n"}else{var d={};YAHOO.lang.augmentObject(d,l);if(typeof(l.callback)=="object"){delete l.callback}a+=TAGGED.api.createQueryString(l,true)+"\n"}}f.session_token=YAHOO.util.Cookie.get("S");TAGGED.api.callback.argument=h;var c=YAHOO.util.Connect.asyncRequest("POST","/api/?"+TAGGED.api.createQueryString(f),TAGGED.api.callback,a);if(tagged.performance){tagged.performance.addXHR(c,a)}this.pushRequestLUT(c.tId,d);return c},callback:{success:function(a){if(!a||!a.responseText){if(tagged.performance){tagged.performance.updateXHRQueue()}TAGGED.api.evalResponse(a,true)}if(tagged.performance){tagged.performance.removeXHR(a)}if(a.responseText.search(TAGGED.api._login_regex_match)>=0){TAGGED.api.handleNotLoggedIn(a)}if(a.responseText.search(TAGGED.api._login_regex_match2)>=0){TAGGED.api.handleNotLoggedIn(a)}else{if(tagged.diagnostics){tagged.diagnostics.findApiData(a.responseText)}TAGGED.api.evalResponse(a)}if(a.argument){a.argument()}},failure:function(a){if(tagged.performance){tagged.performance.updateXHRQueue()}TAGGED.api.evalResponse(a,true);if(a.argument){a.argument()}}},recall:function(a,b){if(b==null||b==""){b="default"}if(TAGGED.api._trackedRequests[b]!=null){YAHOO.util.Connect.abort(TAGGED.api._trackedRequests[b]);TAGGED.api._trackedRequests[b]=null}TAGGED.api._trackedRequests[b]=TAGGED.api.call(a)},nullResponseHandler:function(){},createQueryString:function(b,a){var c="";if(a){b.api_signature="";if(tagged.guid){b.track=tagged.guid}if(b.method){c+="method="+encodeURIComponent(b.method)+"&";delete b.method}else{alert(TAGGED.api.strings.errorMethodMissing);return""}}for(i in b){c+=encodeURIComponent(i)+"="+encodeURIComponent(b[i])+"&"}if(c.length){return c.substr(0,c.length-1)}return c},pushRequestLUT:function(e,c){var d=function(h){var f=h.indexOf("callback=")+9;var g=h.slice(f,h.indexOf("&",f));return{callback:g}};if(YAHOO.lang.isArray(c)){this._requestsLUT[e]=[];for(var b=0,a=c.length;b<a;++b){if(YAHOO.lang.isString(c[b])){this._requestsLUT[e].push(d(c[b]))}else{this._requestsLUT[e].push(c[b])}}}else{if(YAHOO.lang.isString(c)){this._requestsLUT[e]=[d(c)]}else{this._requestsLUT[e]=[c]}}},popRequestLUT:function(b){var a=this._requestsLUT[b];delete this._requestsLUT[b];return a},evalResponse:function(o,isError){var requestCalls=this.popRequestLUT(o.tId);if(!requestCalls||!requestCalls.length){return}TAGGED.api.errorResponse.rawError=null;if(!isError){try{if(!o.responseText){isError=true}else{if(this.format=="jsonp"){eval(o.responseText);return}else{var requestData=eval(o.responseText);if(requestCalls.length!=requestData.length){isError=true}}}}catch(e){isError=true;if(!tagged.data.hideAlert&&this.alertOnError){alert(TAGGED.api.strings.errorGeneral)}TAGGED.api.errorResponse.rawError=o.responseText}}for(var i=0;i<requestCalls.length;i++){var _request=requestCalls[i];if(typeof(_request.callback)=="string"){if(isError){eval(_request.callback+TAGGED.api.errorResponseBC)}else{try{var data=eval("("+requestData[i]+")");if(!this.handleFlowException(data,_request)){eval(_request.callback+"("+requestData[i]+")")}}catch(e){eval(_request.callback+TAGGED.api.errorResponseBC)}}}else{if(isError){_request.callback.fn.apply(_request.callback.scope,[TAGGED.api.errorResponse,_request.callback.args])}else{try{var data=eval("("+requestData[i]+")");if(this.handleFlowException(data,_request)){}else{if(_request.callback&&_request.callback.fn){var start=new Date();_request.callback.fn.apply(_request.callback.scope,[data,_request.callback.args]);var end=new Date();if(tagged.performance){tagged.performance.recordBenchmarkAPI({tId:o.tId,apiMethod:_request.method,executionTime:(end-start)},(requestCalls.length>1))}}}}catch(e){if(_request.callback){_request.callback.fn.apply(_request.callback.scope,[TAGGED.api.errorResponse,_request.callback.args])}}}}}},handleFlowException:function(b,a){if(b.stat=="security"){tagged.security.captcha.trigger(b,a);return true}else{if(b.stat=="nobot"){tagged.security.nobot.trigger(b,a);return true}else{if(b.error&&b.error.code==23){tagged.security.validation.trigger(b,a);return true}else{if(b.stat=="password"){tagged.security.password.trigger(b,a);return true}else{if(b.stat=="phone"){tagged.security.phone.trigger(b,a);return true}else{return false}}}}}},handleNotLoggedIn:function(a){if(this.redirectOnNotLoggedIn){window.location="/index.html?r="+encodeURIComponent(window.location)}}};if(tagged.exists("H")){TAGGED.api.getQueryStringParameter=H.getQueryStringParameter}else{TAGGED.api.getQueryStringParameter=function(f,c){var d,b,a,h,g,e;c=c||window.location.href;a=c.indexOf("?");h=a>=0?c.substr(a+1):c;a=h.lastIndexOf("#");h=a>=0?h.substr(0,a):h;g=h.split("&");for(d=0,b=g.length;d<b;d++){e=g[d].split("=");if(e.length>=2){if(e[0]===f){return unescape(e[1])}}}return null}}E.onDOMReady(function(){TAGGED.api.startDefer({result:1})});tagged.namespace("util.stringBuffer");tagged.util.stringBuffer=function(a){this.buffer=a?a:[]};tagged.util.stringBuffer.prototype={add:function(c){var b=0;var a=arguments.length;for(;b<a;++b){if(typeof(arguments[b])!="undefined"){this.buffer[this.buffer.length]=arguments[b]}}return this},append:function(a){this.buffer[this.buffer.length]=a},toString:function(){return this.buffer.join("")}};tagged.namespace("header.connect");tagged.header.connect={container:'<div class="service_container">%s%s</div>',imageHtml:'<div class="image_container connect_icon %s"></span><img width="25" height="25" src="%s" /></div>',nameHtml:'<div class="name_container"><span>%s</span><br/><span class="logout"><a id="%s_logout" class="logout" href="#">(%s)</a></span></div>',connRenderEvent:null,init:function(){this.connRenderEvent=new YAHOO.util.CustomEvent("connRenderEvent",this);var a=YAHOO.util.Cookie.get("connect_status");if(D.get("connect_footer")&&tagged.currentUserStatus!=null&&(!a||a>0)){TAGGED.api.queue.push({method:"tagged.connect.getAccountInfos",callback:"tagged.header.connect.show"})}},show:function(g){var b=new tagged.util.stringBuffer();if(g.stat!="ok"){return}g=g.result;var a=false;var e=parent.location.protocol=="https";for(var d in g){var f=g[d];if(f&&f.linked&&f.url&&f.name){a=true;var c=f.url;if(e&&c.indexOf("https")!=0){c.replace("http","https")}b.add(sprintf(this.container,sprintf(this.imageHtml,d+"_icon",c),sprintf(this.nameHtml,sprintf(tagged.header.connect.strings.greeting,f.name),d,tagged.header.connect.strings.logout)))}}if(a){D.get("connect_footer").innerHTML=b.toString();D.removeClass("connect_footer","hide_me");E.addListener(D.getElementsByClassName("logout","a"),"click",this.logout);this.connRenderEvent.fire()}else{YAHOO.util.Cookie.set("connect_status","-1")}},logout:function(b){E.preventDefault(b);var a=E.getTarget(b);if(a&&a.tagName.toUpperCase()!="A"){a=a.parentNode}if(a.id=="facebook_logout"){tagged.require("facebook_sdk",function(){tagged.apps.facebook.core.getSDK().then(function(c){c.getLoginStatus(function(d){if(d.session){c.logout(function(e){window.location.href="/logout.html"})}else{window.location.href="/logout.html"}})})})}else{window.location.href="/logout.html"}}};E.onDOMReady(tagged.header.connect.init,"",tagged.header.connect);TAGGED.namespace("header");TAGGED.header={newUserStatus:null,updateHeaderGold:function(a){if($("#header_gold_amount")){$("#header_gold_amount").text(a)}}};(function(){YAHOO.util.Config=function(d){if(d){this.init(d)}};var c=YAHOO.lang,b=YAHOO.util.CustomEvent,a=YAHOO.util.Config;a.CONFIG_CHANGED_EVENT="configChanged";a.BOOLEAN_TYPE="boolean";a.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(d){this.owner=d;this.configChangedEvent=this.createEvent(a.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=b.LIST;this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[]},checkBoolean:function(d){return(typeof d==a.BOOLEAN_TYPE)},checkNumber:function(d){return(!isNaN(d))},fireEvent:function(f,d){var e=this.config[f];if(e&&e.event){e.event.fire(d)}},addProperty:function(d,e){d=d.toLowerCase();this.config[d]=e;e.event=this.createEvent(d,{scope:this.owner});e.event.signature=b.LIST;e.key=d;if(e.handler){e.event.subscribe(e.handler,this.owner)}this.setProperty(d,e.value,true);if(!e.suppressEvent){this.queueProperty(d,e.value)}},getConfig:function(){var g={},e=this.config,d,f;for(d in e){if(c.hasOwnProperty(e,d)){f=e[d];if(f&&f.event){g[d]=f.value}}}return g},getProperty:function(e){var d=this.config[e.toLowerCase()];if(d&&d.event){return d.value}else{return undefined}},resetProperty:function(e){e=e.toLowerCase();var d=this.config[e];if(d&&d.event){if(this.initialConfig[e]&&!c.isUndefined(this.initialConfig[e])){this.setProperty(e,this.initialConfig[e]);return true}}else{return false}},setProperty:function(f,d,g){var e;f=f.toLowerCase();if(this.queueInProgress&&!g){this.queueProperty(f,d);return true}else{e=this.config[f];if(e&&e.event){if(e.validator&&!e.validator(d)){return false}else{e.value=d;if(!g){this.fireEvent(f,d);this.configChangedEvent.fire([f,d])}return true}}else{return false}}},queueProperty:function(f,i){f=f.toLowerCase();var g=this.config[f],n=false,o,r,q,p,j,h,s,l,k,d,m,e,t;if(g&&g.event){if(!c.isUndefined(i)&&g.validator&&!g.validator(i)){return false}else{if(!c.isUndefined(i)){g.value=i}else{i=g.value}n=false;o=this.eventQueue.length;for(m=0;m<o;m++){r=this.eventQueue[m];if(r){q=r[0];p=r[1];if(q==f){this.eventQueue[m]=null;this.eventQueue.push([f,(!c.isUndefined(i)?i:p)]);n=true;break}}}if(!n&&!c.isUndefined(i)){this.eventQueue.push([f,i])}}if(g.supercedes){j=g.supercedes.length;for(e=0;e<j;e++){h=g.supercedes[e];s=this.eventQueue.length;for(t=0;t<s;t++){l=this.eventQueue[t];if(l){k=l[0];d=l[1];if(k==h.toLowerCase()){this.eventQueue.push([k,d]);this.eventQueue[t]=null;break}}}}}return true}else{return false}},refireEvent:function(e){e=e.toLowerCase();var d=this.config[e];if(d&&d.event&&!c.isUndefined(d.value)){if(this.queueInProgress){this.queueProperty(e)}else{this.fireEvent(e,d.value)}}},applyConfig:function(g,d){var e,f;if(d){f={};for(e in g){if(c.hasOwnProperty(g,e)){f[e.toLowerCase()]=g[e]}}this.initialConfig=f}for(e in g){if(c.hasOwnProperty(g,e)){this.queueProperty(e,g[e])}}},refresh:function(){var d;for(d in this.config){if(c.hasOwnProperty(this.config,d)){this.refireEvent(d)}}},fireQueue:function(){var g,d,h,e,f;this.queueInProgress=true;for(g=0;g<this.eventQueue.length;g++){d=this.eventQueue[g];if(d){h=d[0];e=d[1];f=this.config[h];f.value=e;this.eventQueue[g]=null;this.fireEvent(h,e)}}this.queueInProgress=false;this.eventQueue=[]},subscribeToConfigEvent:function(h,g,e,d){var f=this.config[h.toLowerCase()];if(f&&f.event){if(!a.alreadySubscribed(f.event,g,e)){f.event.subscribe(g,e,d)}return true}else{return false}},unsubscribeFromConfigEvent:function(g,f,d){var e=this.config[g.toLowerCase()];if(e&&e.event){return e.event.unsubscribe(f,d)}else{return false}},toString:function(){var d="Config";if(this.owner){d+=" ["+this.owner.toString()+"]"}return d},outputEventQueue:function(){var g="",d,f,e=this.eventQueue.length;for(f=0;f<e;f++){d=this.eventQueue[f];if(d){g+=d[0]+"="+d[1]+", "}}return g},destroy:function(){var e=this.config,f,d;for(f in e){if(c.hasOwnProperty(e,f)){d=e[f];d.event.unsubscribeAll();d.event=null}}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null}};a.alreadySubscribed=function(h,e,d){var g=h.subscribers.length,i,f;if(g>0){f=g-1;do{i=h.subscribers[f];if(i&&i.obj==d&&i.fn==e){return true}}while(f--)}return false};YAHOO.lang.augmentProto(a,YAHOO.util.EventProvider)}());(function(){YAHOO.widget.Module=function(q,r){if(q){this.init(q,r)}else{}};var o=YAHOO.util.Dom,a=YAHOO.util.Config,g=YAHOO.util.Event,h=YAHOO.util.CustomEvent,n=YAHOO.widget.Module,l=YAHOO.env.ua,m,e,f,p,d={BEFORE_INIT:"beforeInit",INIT:"init",APPEND:"append",BEFORE_RENDER:"beforeRender",RENDER:"render",CHANGE_HEADER:"changeHeader",CHANGE_BODY:"changeBody",CHANGE_FOOTER:"changeFooter",CHANGE_CONTENT:"changeContent",DESTROY:"destroy",BEFORE_SHOW:"beforeShow",SHOW:"show",BEFORE_HIDE:"beforeHide",HIDE:"hide"},k={VISIBLE:{key:"visible",value:true,validator:YAHOO.lang.isBoolean},EFFECT:{key:"effect",suppressEvent:true,supercedes:["visible"]},MONITOR_RESIZE:{key:"monitorresize",value:true},APPEND_TO_DOCUMENT_BODY:{key:"appendtodocumentbody",value:false}};n.IMG_ROOT=null;n.IMG_ROOT_SSL=null;n.CSS_MODULE="yui-module";n.CSS_HEADER="hd";n.CSS_BODY="bd";n.CSS_FOOTER="ft";n.RESIZE_MONITOR_SECURE_URL="javascript:false;";n.RESIZE_MONITOR_BUFFER=1;n.textResizeEvent=new h("textResize");n.forceDocumentRedraw=function(){var q=document.documentElement;if(q){q.className+=" ";q.className=YAHOO.lang.trim(q.className)}};function i(){if(!m){m=document.createElement("div");m.innerHTML=('<div class="'+n.CSS_HEADER+'"></div><div class="'+n.CSS_BODY+'"></div><div class="'+n.CSS_FOOTER+'"></div>');e=m.firstChild;f=e.nextSibling;p=f.nextSibling}return m}function j(){if(!e){i()}return(e.cloneNode(false))}function c(){if(!f){i()}return(f.cloneNode(false))}function b(){if(!p){i()}return(p.cloneNode(false))}n.prototype={constructor:n,element:null,header:null,body:null,footer:null,id:null,imageRoot:n.IMG_ROOT,initEvents:function(){var q=h.LIST;this.beforeInitEvent=this.createEvent(d.BEFORE_INIT);this.beforeInitEvent.signature=q;this.initEvent=this.createEvent(d.INIT);this.initEvent.signature=q;this.appendEvent=this.createEvent(d.APPEND);this.appendEvent.signature=q;this.beforeRenderEvent=this.createEvent(d.BEFORE_RENDER);this.beforeRenderEvent.signature=q;this.renderEvent=this.createEvent(d.RENDER);this.renderEvent.signature=q;this.changeHeaderEvent=this.createEvent(d.CHANGE_HEADER);this.changeHeaderEvent.signature=q;this.changeBodyEvent=this.createEvent(d.CHANGE_BODY);this.changeBodyEvent.signature=q;this.changeFooterEvent=this.createEvent(d.CHANGE_FOOTER);this.changeFooterEvent.signature=q;this.changeContentEvent=this.createEvent(d.CHANGE_CONTENT);this.changeContentEvent.signature=q;this.destroyEvent=this.createEvent(d.DESTROY);this.destroyEvent.signature=q;this.beforeShowEvent=this.createEvent(d.BEFORE_SHOW);this.beforeShowEvent.signature=q;this.showEvent=this.createEvent(d.SHOW);this.showEvent.signature=q;this.beforeHideEvent=this.createEvent(d.BEFORE_HIDE);this.beforeHideEvent.signature=q;this.hideEvent=this.createEvent(d.HIDE);this.hideEvent.signature=q},platform:function(){var q=navigator.userAgent.toLowerCase();if(q.indexOf("windows")!=-1||q.indexOf("win32")!=-1){return"windows"}else{if(q.indexOf("macintosh")!=-1){return"mac"}else{return false}}}(),browser:function(){var q=navigator.userAgent.toLowerCase();if(q.indexOf("opera")!=-1){return"opera"}else{if(q.indexOf("msie 7")!=-1){return"ie7"}else{if(q.indexOf("msie")!=-1){return"ie"}else{if(q.indexOf("safari")!=-1){return"safari"}else{if(q.indexOf("gecko")!=-1){return"gecko"}else{return false}}}}}}(),isSecure:function(){if(window.location.href.toLowerCase().indexOf("https")===0){return true}else{return false}}(),initDefaultConfig:function(){this.cfg.addProperty(k.VISIBLE.key,{handler:this.configVisible,value:k.VISIBLE.value,validator:k.VISIBLE.validator});this.cfg.addProperty(k.EFFECT.key,{suppressEvent:k.EFFECT.suppressEvent,supercedes:k.EFFECT.supercedes});this.cfg.addProperty(k.MONITOR_RESIZE.key,{handler:this.configMonitorResize,value:k.MONITOR_RESIZE.value});this.cfg.addProperty(k.APPEND_TO_DOCUMENT_BODY.key,{value:k.APPEND_TO_DOCUMENT_BODY.value})},init:function(r,s){var u,q;this.initEvents();this.beforeInitEvent.fire(n);this.cfg=new a(this);if(this.isSecure){this.imageRoot=n.IMG_ROOT_SSL}if(typeof r=="string"){u=r;r=document.getElementById(r);if(!r){r=(i()).cloneNode(false);r.id=u}}this.id=o.generateId(r);this.element=r;q=this.element.firstChild;if(q){var v=false,w=false,t=false;do{if(1==q.nodeType){if(!v&&o.hasClass(q,n.CSS_HEADER)){this.header=q;v=true}else{if(!w&&o.hasClass(q,n.CSS_BODY)){this.body=q;w=true}else{if(!t&&o.hasClass(q,n.CSS_FOOTER)){this.footer=q;t=true}}}}}while((q=q.nextSibling))}this.initDefaultConfig();o.addClass(this.element,n.CSS_MODULE);if(s){this.cfg.applyConfig(s,true)}if(!a.alreadySubscribed(this.renderEvent,this.cfg.fireQueue,this.cfg)){this.renderEvent.subscribe(this.cfg.fireQueue,this.cfg,true)}this.initEvent.fire(n)},initResizeMonitor:function(){var q=(l.gecko&&this.platform=="windows");if(q){var r=this;setTimeout(function(){r._initResizeMonitor()},0)}else{this._initResizeMonitor()}},_initResizeMonitor:function(){var w,u,s;function q(){n.textResizeEvent.fire()}if(!l.opera){u=o.get("_yuiResizeMonitor");var r=this._supportsCWResize();if(!u){u=document.createElement("iframe");if(this.isSecure&&n.RESIZE_MONITOR_SECURE_URL&&l.ie){u.src=n.RESIZE_MONITOR_SECURE_URL}if(!r){s=["<html><head><script ",'type="text/javascript">',"window.onresize=function(){window.parent.","YAHOO.widget.Module.textResizeEvent.","fire();};<","/script></head>","<body></body></html>"].join("");u.src="data:text/html;charset=utf-8,"+encodeURIComponent(s)}u.id="_yuiResizeMonitor";u.title="Text Resize Monitor";u.style.position="absolute";u.style.visibility="hidden";var v=document.body,t=v.firstChild;if(t){v.insertBefore(u,t)}else{v.appendChild(u)}u.style.backgroundColor="transparent";u.style.borderWidth="0";u.style.width="2em";u.style.height="2em";u.style.left="0";u.style.top=(-1*(u.offsetHeight+n.RESIZE_MONITOR_BUFFER))+"px";u.style.visibility="visible";if(l.webkit){w=u.contentWindow.document;w.open();w.close()}}if(u&&u.contentWindow){n.textResizeEvent.subscribe(this.onDomResize,this,true);if(!n.textResizeInitialized){if(r){if(!g.on(u.contentWindow,"resize",q)){g.on(u,"resize",q)}}n.textResizeInitialized=true}this.resizeMonitor=u}}},_supportsCWResize:function(){var q=true;if(l.gecko&&l.gecko<=1.8){q=false}return q},onDomResize:function(q,r){var s=-1*(this.resizeMonitor.offsetHeight+n.RESIZE_MONITOR_BUFFER);this.resizeMonitor.style.top=s+"px";this.resizeMonitor.style.left="0"},setHeader:function(q){var r=this.header||(this.header=j());if(q.nodeName){r.innerHTML="";r.appendChild(q)}else{r.innerHTML=q}if(this._rendered){this._renderHeader()}this.changeHeaderEvent.fire(q);this.changeContentEvent.fire()},appendToHeader:function(q){var r=this.header||(this.header=j());r.appendChild(q);this.changeHeaderEvent.fire(q);this.changeContentEvent.fire()},setBody:function(q){var r=this.body||(this.body=c());if(q.nodeName){r.innerHTML="";r.appendChild(q)}else{r.innerHTML=q}if(this._rendered){this._renderBody()}this.changeBodyEvent.fire(q);this.changeContentEvent.fire()},appendToBody:function(q){var r=this.body||(this.body=c());r.appendChild(q);this.changeBodyEvent.fire(q);this.changeContentEvent.fire()},setFooter:function(q){var r=this.footer||(this.footer=b());if(q.nodeName){r.innerHTML="";r.appendChild(q)}else{r.innerHTML=q}if(this._rendered){this._renderFooter()}this.changeFooterEvent.fire(q);this.changeContentEvent.fire()},appendToFooter:function(q){var r=this.footer||(this.footer=b());r.appendChild(q);this.changeFooterEvent.fire(q);this.changeContentEvent.fire()},render:function(r,t){var q=this;function s(u){if(typeof u=="string"){u=document.getElementById(u)}if(u){q._addToParent(u,q.element);q.appendEvent.fire()}}this.beforeRenderEvent.fire();if(!t){t=this.element}if(r){s(r)}else{if(!o.inDocument(this.element)){return false}}this._renderHeader(t);this._renderBody(t);this._renderFooter(t);this._rendered=true;this.renderEvent.fire();return true},_renderHeader:function(r){r=r||this.element;if(this.header&&!o.inDocument(this.header)){var q=r.firstChild;if(q){r.insertBefore(this.header,q)}else{r.appendChild(this.header)}}},_renderBody:function(q){q=q||this.element;if(this.body&&!o.inDocument(this.body)){if(this.footer&&o.isAncestor(q,this.footer)){q.insertBefore(this.body,this.footer)}else{q.appendChild(this.body)}}},_renderFooter:function(q){q=q||this.element;if(this.footer&&!o.inDocument(this.footer)){q.appendChild(this.footer)}},destroy:function(){var q;if(this.element){g.purgeElement(this.element,true);q=this.element.parentNode}if(q){q.removeChild(this.element)}this.element=null;this.header=null;this.body=null;this.footer=null;n.textResizeEvent.unsubscribe(this.onDomResize,this);this.cfg.destroy();this.cfg=null;this.destroyEvent.fire()},show:function(){this.cfg.setProperty("visible",true)},hide:function(){this.cfg.setProperty("visible",false)},configVisible:function(s,t,r){var q=t[0];if(q){this.beforeShowEvent.fire();o.setStyle(this.element,"display","block");this.showEvent.fire()}else{this.beforeHideEvent.fire();o.setStyle(this.element,"display","none");this.hideEvent.fire()}},configMonitorResize:function(r,s,q){var t=s[0];if(t){this.initResizeMonitor()}else{n.textResizeEvent.unsubscribe(this.onDomResize,this,true);this.resizeMonitor=null}},_addToParent:function(r,q){if(!this.cfg.getProperty("appendtodocumentbody")&&r===document.body&&r.firstChild){r.insertBefore(q,r.firstChild)}else{r.appendChild(q)}},toString:function(){return"Module "+this.id}};YAHOO.lang.augmentProto(n,YAHOO.util.EventProvider)}());(function(){YAHOO.widget.Overlay=function(o,p){YAHOO.widget.Overlay.superclass.constructor.call(this,o,p)};var j=YAHOO.lang,f=YAHOO.util.CustomEvent,l=YAHOO.widget.Module,e=YAHOO.util.Event,m=YAHOO.util.Dom,a=YAHOO.util.Config,h=YAHOO.env.ua,c=YAHOO.widget.Overlay,k="subscribe",n="unsubscribe",b="contained",i,d={BEFORE_MOVE:"beforeMove",MOVE:"move"},g={X:{key:"x",validator:j.isNumber,suppressEvent:true,supercedes:["iframe"]},Y:{key:"y",validator:j.isNumber,suppressEvent:true,supercedes:["iframe"]},XY:{key:"xy",suppressEvent:true,supercedes:["iframe"]},CONTEXT:{key:"context",suppressEvent:true,supercedes:["iframe"]},FIXED_CENTER:{key:"fixedcenter",value:false,supercedes:["iframe","visible"]},WIDTH:{key:"width",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},HEIGHT:{key:"height",suppressEvent:true,supercedes:["context","fixedcenter","iframe"]},AUTO_FILL_HEIGHT:{key:"autofillheight",supercedes:["height"],value:"body"},ZINDEX:{key:"zindex",value:null},CONSTRAIN_TO_VIEWPORT:{key:"constraintoviewport",value:false,validator:j.isBoolean,supercedes:["iframe","x","y","xy"]},IFRAME:{key:"iframe",value:(h.ie==6?true:false),validator:j.isBoolean,supercedes:["zindex"]},PREVENT_CONTEXT_OVERLAP:{key:"preventcontextoverlap",value:false,validator:j.isBoolean,supercedes:["constraintoviewport"]}};c.IFRAME_SRC="javascript:false;";c.IFRAME_OFFSET=3;c.VIEWPORT_OFFSET=10;c.TOP_LEFT="tl";c.TOP_RIGHT="tr";c.BOTTOM_LEFT="bl";c.BOTTOM_RIGHT="br";c.PREVENT_OVERLAP_X={tltr:true,blbr:true,brbl:true,trtl:true};c.PREVENT_OVERLAP_Y={trbr:true,tlbl:true,bltl:true,brtr:true};c.CSS_OVERLAY="yui-overlay";c.CSS_HIDDEN="yui-overlay-hidden";c.CSS_IFRAME="yui-overlay-iframe";c.STD_MOD_RE=/^\s*?(body|footer|header)\s*?$/i;c.windowScrollEvent=new f("windowScroll");c.windowResizeEvent=new f("windowResize");c.windowScrollHandler=function(o){var p=e.getTarget(o);if(!p||p===window||p===window.document){if(h.ie){if(!window.scrollEnd){window.scrollEnd=-1}clearTimeout(window.scrollEnd);window.scrollEnd=setTimeout(function(){c.windowScrollEvent.fire()},1)}else{c.windowScrollEvent.fire()}}};c.windowResizeHandler=function(o){if(h.ie){if(!window.resizeEnd){window.resizeEnd=-1}clearTimeout(window.resizeEnd);window.resizeEnd=setTimeout(function(){c.windowResizeEvent.fire()},100)}else{c.windowResizeEvent.fire()}};c._initialized=null;if(c._initialized===null){e.on(window,"scroll",c.windowScrollHandler);e.on(window,"resize",c.windowResizeHandler);c._initialized=true}c._TRIGGER_MAP={windowScroll:c.windowScrollEvent,windowResize:c.windowResizeEvent,textResize:l.textResizeEvent};YAHOO.extend(c,l,{CONTEXT_TRIGGERS:[],init:function(o,p){c.superclass.init.call(this,o);this.beforeInitEvent.fire(c);m.addClass(this.element,c.CSS_OVERLAY);if(p){this.cfg.applyConfig(p,true)}if(this.platform=="mac"&&h.gecko){if(!a.alreadySubscribed(this.showEvent,this.showMacGeckoScrollbars,this)){this.showEvent.subscribe(this.showMacGeckoScrollbars,this,true)}if(!a.alreadySubscribed(this.hideEvent,this.hideMacGeckoScrollbars,this)){this.hideEvent.subscribe(this.hideMacGeckoScrollbars,this,true)}}this.initEvent.fire(c)},initEvents:function(){c.superclass.initEvents.call(this);var o=f.LIST;this.beforeMoveEvent=this.createEvent(d.BEFORE_MOVE);this.beforeMoveEvent.signature=o;this.moveEvent=this.createEvent(d.MOVE);this.moveEvent.signature=o},initDefaultConfig:function(){c.superclass.initDefaultConfig.call(this);var o=this.cfg;o.addProperty(g.X.key,{handler:this.configX,validator:g.X.validator,suppressEvent:g.X.suppressEvent,supercedes:g.X.supercedes});o.addProperty(g.Y.key,{handler:this.configY,validator:g.Y.validator,suppressEvent:g.Y.suppressEvent,supercedes:g.Y.supercedes});o.addProperty(g.XY.key,{handler:this.configXY,suppressEvent:g.XY.suppressEvent,supercedes:g.XY.supercedes});o.addProperty(g.CONTEXT.key,{handler:this.configContext,suppressEvent:g.CONTEXT.suppressEvent,supercedes:g.CONTEXT.supercedes});o.addProperty(g.FIXED_CENTER.key,{handler:this.configFixedCenter,value:g.FIXED_CENTER.value,validator:g.FIXED_CENTER.validator,supercedes:g.FIXED_CENTER.supercedes});o.addProperty(g.WIDTH.key,{handler:this.configWidth,suppressEvent:g.WIDTH.suppressEvent,supercedes:g.WIDTH.supercedes});o.addProperty(g.HEIGHT.key,{handler:this.configHeight,suppressEvent:g.HEIGHT.suppressEvent,supercedes:g.HEIGHT.supercedes});o.addProperty(g.AUTO_FILL_HEIGHT.key,{handler:this.configAutoFillHeight,value:g.AUTO_FILL_HEIGHT.value,validator:this._validateAutoFill,supercedes:g.AUTO_FILL_HEIGHT.supercedes});o.addProperty(g.ZINDEX.key,{handler:this.configzIndex,value:g.ZINDEX.value});o.addProperty(g.CONSTRAIN_TO_VIEWPORT.key,{handler:this.configConstrainToViewport,value:g.CONSTRAIN_TO_VIEWPORT.value,validator:g.CONSTRAIN_TO_VIEWPORT.validator,supercedes:g.CONSTRAIN_TO_VIEWPORT.supercedes});o.addProperty(g.IFRAME.key,{handler:this.configIframe,value:g.IFRAME.value,validator:g.IFRAME.validator,supercedes:g.IFRAME.supercedes});o.addProperty(g.PREVENT_CONTEXT_OVERLAP.key,{value:g.PREVENT_CONTEXT_OVERLAP.value,validator:g.PREVENT_CONTEXT_OVERLAP.validator,supercedes:g.PREVENT_CONTEXT_OVERLAP.supercedes})},moveTo:function(p,o){this.cfg.setProperty("xy",[p,o])},hideMacGeckoScrollbars:function(){m.replaceClass(this.element,"show-scrollbars","hide-scrollbars")},showMacGeckoScrollbars:function(){m.replaceClass(this.element,"hide-scrollbars","show-scrollbars")},_setDomVisibility:function(p){m.setStyle(this.element,"visibility",(p)?"visible":"hidden");var o=c.CSS_HIDDEN;if(p){m.removeClass(this.element,o)}else{m.addClass(this.element,o)}},configVisible:function(w,z,q){var x=z[0],v=m.getStyle(this.element,"visibility"),p=this.cfg.getProperty("effect"),s=[],t=(this.platform=="mac"&&h.gecko),A=a.alreadySubscribed,r,y,B,D,E,F,C,o,u;if(v=="inherit"){B=this.element.parentNode;while(B.nodeType!=9&&B.nodeType!=11){v=m.getStyle(B,"visibility");if(v!="inherit"){break}B=B.parentNode}if(v=="inherit"){v="visible"}}if(p){if(p instanceof Array){o=p.length;for(D=0;D<o;D++){r=p[D];s[s.length]=r.effect(this,r.duration)}}else{s[s.length]=p.effect(this,p.duration)}}if(x){if(t){this.showMacGeckoScrollbars()}if(p){if(x){if(v!="visible"||v===""){this.beforeShowEvent.fire();u=s.length;for(E=0;E<u;E++){y=s[E];if(E===0&&!A(y.animateInCompleteEvent,this.showEvent.fire,this.showEvent)){y.animateInCompleteEvent.subscribe(this.showEvent.fire,this.showEvent,true)}y.animateIn()}}}}else{if(v!="visible"||v===""){this.beforeShowEvent.fire();this._setDomVisibility(true);this.cfg.refireEvent("iframe");this.showEvent.fire()}else{this._setDomVisibility(true)}}}else{if(t){this.hideMacGeckoScrollbars()}if(p){if(v=="visible"){this.beforeHideEvent.fire();u=s.length;for(F=0;F<u;F++){C=s[F];if(F===0&&!A(C.animateOutCompleteEvent,this.hideEvent.fire,this.hideEvent)){C.animateOutCompleteEvent.subscribe(this.hideEvent.fire,this.hideEvent,true)}C.animateOut()}}else{if(v===""){this._setDomVisibility(false)}}}else{if(v=="visible"||v===""){this.beforeHideEvent.fire();this._setDomVisibility(false);this.hideEvent.fire()}else{this._setDomVisibility(false)}}}},doCenterOnDOMEvent:function(){var p=this.cfg,o=p.getProperty("fixedcenter");if(p.getProperty("visible")){if(o&&(o!==b||this.fitsInViewport())){this.center()}}},fitsInViewport:function(){var p=c.VIEWPORT_OFFSET,r=this.element,o=r.offsetWidth,q=r.offsetHeight,t=m.getViewportWidth(),s=m.getViewportHeight();return((o+p<t)&&(q+p<s))},configFixedCenter:function(q,s,p){var o=s[0],t=a.alreadySubscribed,r=c.windowResizeEvent,u=c.windowScrollEvent;if(o){this.center();if(!t(this.beforeShowEvent,this.center)){this.beforeShowEvent.subscribe(this.center)}if(!t(r,this.doCenterOnDOMEvent,this)){r.subscribe(this.doCenterOnDOMEvent,this,true)}if(!t(u,this.doCenterOnDOMEvent,this)){u.subscribe(this.doCenterOnDOMEvent,this,true)}}else{this.beforeShowEvent.unsubscribe(this.center);r.unsubscribe(this.doCenterOnDOMEvent,this);u.unsubscribe(this.doCenterOnDOMEvent,this)}},configHeight:function(p,r,o){var s=r[0],q=this.element;m.setStyle(q,"height",s);this.cfg.refireEvent("iframe")},configAutoFillHeight:function(r,s,v){var p=s[0],u=this.cfg,q="autofillheight",o="height",t=u.getProperty(q),w=this._autoFillOnHeightChange;u.unsubscribeFromConfigEvent(o,w);l.textResizeEvent.unsubscribe(w);this.changeContentEvent.unsubscribe(w);if(t&&p!==t&&this[t]){m.setStyle(this[t],o,"")}if(p){p=j.trim(p.toLowerCase());u.subscribeToConfigEvent(o,w,this[p],this);l.textResizeEvent.subscribe(w,this[p],this);this.changeContentEvent.subscribe(w,this[p],this);u.setProperty(q,p,true)}},configWidth:function(p,s,o){var q=s[0],r=this.element;m.setStyle(r,"width",q);this.cfg.refireEvent("iframe")},configzIndex:function(q,s,p){var o=s[0],r=this.element;if(!o){o=m.getStyle(r,"zIndex");if(!o||isNaN(o)){o=0}}if(this.iframe||this.cfg.getProperty("iframe")===true){if(o<=0){o=1}}m.setStyle(r,"zIndex",o);this.cfg.setProperty("zIndex",o,true);if(this.iframe){this.stackIframe()}},configXY:function(r,s,q){var o=s[0],t=o[0],p=o[1];this.cfg.setProperty("x",t);this.cfg.setProperty("y",p);this.beforeMoveEvent.fire([t,p]);t=this.cfg.getProperty("x");p=this.cfg.getProperty("y");this.cfg.refireEvent("iframe");this.moveEvent.fire([t,p])},configX:function(q,r,p){var s=r[0],o=this.cfg.getProperty("y");this.cfg.setProperty("x",s,true);this.cfg.setProperty("y",o,true);this.beforeMoveEvent.fire([s,o]);s=this.cfg.getProperty("x");o=this.cfg.getProperty("y");m.setX(this.element,s,true);this.cfg.setProperty("xy",[s,o],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([s,o])},configY:function(q,r,p){var s=this.cfg.getProperty("x"),o=r[0];this.cfg.setProperty("x",s,true);this.cfg.setProperty("y",o,true);this.beforeMoveEvent.fire([s,o]);s=this.cfg.getProperty("x");o=this.cfg.getProperty("y");m.setY(this.element,o,true);this.cfg.setProperty("xy",[s,o],true);this.cfg.refireEvent("iframe");this.moveEvent.fire([s,o])},showIframe:function(){var o=this.iframe,p;if(o){p=this.element.parentNode;if(p!=o.parentNode){this._addToParent(p,o)}o.style.display="block"}},hideIframe:function(){if(this.iframe){this.iframe.style.display="none"}},syncIframe:function(){var s=this.iframe,q=this.element,o=c.IFRAME_OFFSET,r=(o*2),p;if(s){s.style.width=(q.offsetWidth+r+"px");s.style.height=(q.offsetHeight+r+"px");p=this.cfg.getProperty("xy");if(!j.isArray(p)||(isNaN(p[0])||isNaN(p[1]))){this.syncPosition();p=this.cfg.getProperty("xy")}m.setXY(s,[(p[0]-o),(p[1]-o)])}},stackIframe:function(){if(this.iframe){var o=m.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(o)&&!isNaN(o)){m.setStyle(this.iframe,"zIndex",(o-1))}}},configIframe:function(q,r,p){var t=r[0];function o(){var v=this.iframe,u=this.element,x;if(!v){if(!i){i=document.createElement("iframe");if(this.isSecure){i.src=c.IFRAME_SRC}if(h.ie){i.style.filter="alpha(opacity=0)";i.frameBorder=0}else{i.style.opacity="0"}i.style.position="absolute";i.style.border="none";i.style.margin="0";i.style.padding="0";i.style.display="none";i.tabIndex=-1;i.className=c.CSS_IFRAME}v=i.cloneNode(false);v.id=this.id+"_f";x=u.parentNode;var w=x||document.body;this._addToParent(w,v);this.iframe=v}this.showIframe();this.syncIframe();this.stackIframe();if(!this._hasIframeEventListeners){this.showEvent.subscribe(this.showIframe);this.hideEvent.subscribe(this.hideIframe);this.changeContentEvent.subscribe(this.syncIframe);this._hasIframeEventListeners=true}}function s(){o.call(this);this.beforeShowEvent.unsubscribe(s);this._iframeDeferred=false}if(t){if(this.cfg.getProperty("visible")){o.call(this)}else{if(!this._iframeDeferred){this.beforeShowEvent.subscribe(s);this._iframeDeferred=true}}}else{this.hideIframe();if(this._hasIframeEventListeners){this.showEvent.unsubscribe(this.showIframe);this.hideEvent.unsubscribe(this.hideIframe);this.changeContentEvent.unsubscribe(this.syncIframe);this._hasIframeEventListeners=false}}},_primeXYFromDOM:function(){if(YAHOO.lang.isUndefined(this.cfg.getProperty("xy"))){this.syncPosition();this.cfg.refireEvent("xy");this.beforeShowEvent.unsubscribe(this._primeXYFromDOM)}},configConstrainToViewport:function(q,r,p){var o=r[0];if(o){if(!a.alreadySubscribed(this.beforeMoveEvent,this.enforceConstraints,this)){this.beforeMoveEvent.subscribe(this.enforceConstraints,this,true)}if(!a.alreadySubscribed(this.beforeShowEvent,this._primeXYFromDOM)){this.beforeShowEvent.subscribe(this._primeXYFromDOM)}}else{this.beforeShowEvent.unsubscribe(this._primeXYFromDOM);this.beforeMoveEvent.unsubscribe(this.enforceConstraints,this)}},configContext:function(r,s,v){var o=s[0],u,x,q,t,w,p=this.CONTEXT_TRIGGERS;if(o){u=o[0];x=o[1];q=o[2];t=o[3];w=o[4];if(p&&p.length>0){t=(t||[]).concat(p)}if(u){if(typeof u=="string"){this.cfg.setProperty("context",[document.getElementById(u),x,q,t,w],true)}if(x&&q){this.align(x,q,w)}if(this._contextTriggers){this._processTriggers(this._contextTriggers,n,this._alignOnTrigger)}if(t){this._processTriggers(t,k,this._alignOnTrigger);this._contextTriggers=t}}}},_alignOnTrigger:function(o,p){this.align()},_findTriggerCE:function(p){var o=null;if(p instanceof f){o=p}else{if(c._TRIGGER_MAP[p]){o=c._TRIGGER_MAP[p]}}return o},_processTriggers:function(q,o,r){var s,p;for(var t=0,u=q.length;t<u;++t){s=q[t];p=this._findTriggerCE(s);if(p){p[o](r,this,true)}else{this[o](s,r)}}},align:function(v,o,s){var p=this.cfg.getProperty("context"),r=this,w,u,q;function t(y,x){var z=null,A=null;switch(v){case c.TOP_LEFT:z=x;A=y;break;case c.TOP_RIGHT:z=x-u.offsetWidth;A=y;break;case c.BOTTOM_LEFT:z=x;A=y-u.offsetHeight;break;case c.BOTTOM_RIGHT:z=x-u.offsetWidth;A=y-u.offsetHeight;break}if(z!==null&&A!==null){if(s){z+=s[0];A+=s[1]}r.moveTo(z,A)}}if(p){w=p[0];u=this.element;r=this;if(!v){v=p[1]}if(!o){o=p[2]}if(!s&&p[4]){s=p[4]}if(u&&w){q=m.getRegion(w);switch(o){case c.TOP_LEFT:t(q.top,q.left);break;case c.TOP_RIGHT:t(q.top,q.right);break;case c.BOTTOM_LEFT:t(q.bottom,q.left);break;case c.BOTTOM_RIGHT:t(q.bottom,q.right);break}}}},enforceConstraints:function(r,s,q){var o=s[0];var p=this.getConstrainedXY(o[0],o[1]);this.cfg.setProperty("x",p[0],true);this.cfg.setProperty("y",p[1],true);this.cfg.setProperty("xy",p,true)},_getConstrainedPos:function(q,y){var u=this.element,w=c.VIEWPORT_OFFSET,o=(q=="x"),p=(o)?u.offsetWidth:u.offsetHeight,v=(o)?m.getViewportWidth():m.getViewportHeight(),A=(o)?m.getDocumentScrollLeft():m.getDocumentScrollTop(),B=(o)?c.PREVENT_OVERLAP_X:c.PREVENT_OVERLAP_Y,z=this.cfg.getProperty("context"),t=(p+w<v),r=this.cfg.getProperty("preventcontextoverlap")&&z&&B[(z[1]+z[2])],s=A+w,C=A+v-p-w,x=y;if(y<s||y>C){if(r){x=this._preventOverlap(q,z[0],p,v,A)}else{if(t){if(y<s){x=s}else{if(y>C){x=C}}}else{x=s}}}return x},_preventOverlap:function(q,r,p,t,B){var o=(q=="x"),u=c.VIEWPORT_OFFSET,v=this,x=((o)?m.getX(r):m.getY(r))-B,z=(o)?r.offsetWidth:r.offsetHeight,y=x-u,w=(t-(x+z))-u,A=false,s=function(){var D;if((v.cfg.getProperty(q)-B)>x){D=(x-p)}else{D=(x+z)}v.cfg.setProperty(q,(D+B),true);return D},C=function(){var D=((v.cfg.getProperty(q)-B)>x)?w:y,E;if(p>D){if(A){s()}else{s();A=true;E=C()}}return E};C();return this.cfg.getProperty(q)},getConstrainedX:function(o){return this._getConstrainedPos("x",o)},getConstrainedY:function(o){return this._getConstrainedPos("y",o)},getConstrainedXY:function(p,o){return[this.getConstrainedX(p),this.getConstrainedY(o)]},center:function(){var r=c.VIEWPORT_OFFSET,q=this.element.offsetWidth,s=this.element.offsetHeight,t=m.getViewportWidth(),p=m.getViewportHeight(),u,o;if(q<t){u=(t/2)-(q/2)+m.getDocumentScrollLeft()}else{u=r+m.getDocumentScrollLeft()}if(s<p){o=(p/2)-(s/2)+m.getDocumentScrollTop()}else{o=r+m.getDocumentScrollTop()}this.cfg.setProperty("xy",[parseInt(u,10),parseInt(o,10)]);this.cfg.refireEvent("iframe");if(h.webkit){this.forceContainerRedraw()}},syncPosition:function(){var o=m.getXY(this.element);this.cfg.setProperty("x",o[0],true);this.cfg.setProperty("y",o[1],true);this.cfg.setProperty("xy",o,true)},onDomResize:function(o,p){var q=this;c.superclass.onDomResize.call(this,o,p);setTimeout(function(){q.syncPosition();q.cfg.refireEvent("iframe");q.cfg.refireEvent("context")},0)},_getComputedHeight:(function(){if(document.defaultView&&document.defaultView.getComputedStyle){return function(p){var q=null;if(p.ownerDocument&&p.ownerDocument.defaultView){var o=p.ownerDocument.defaultView.getComputedStyle(p,"");if(o){q=parseInt(o.height,10)}}return(j.isNumber(q))?q:null}}else{return function(o){var p=null;if(o.style.pixelHeight){p=o.style.pixelHeight}return(j.isNumber(p))?p:null}}})(),_validateAutoFillHeight:function(o){return(!o)||(j.isString(o)&&c.STD_MOD_RE.test(o))},_autoFillOnHeightChange:function(o,q,p){var r=this.cfg.getProperty("height");if((r&&r!=="auto")||(r===0)){this.fillHeight(p)}},_getPreciseHeight:function(p){var q=p.offsetHeight;if(p.getBoundingClientRect){var o=p.getBoundingClientRect();q=o.bottom-o.top}return q},fillHeight:function(u){if(u){var w=this.innerElement||this.element,x=[this.header,this.body,this.footer],q,p=0,o=0,s=0,v=false;for(var r=0,t=x.length;r<t;r++){q=x[r];if(q){if(u!==q){o+=this._getPreciseHeight(q)}else{v=true}}}if(v){if(h.ie||h.opera){m.setStyle(u,"height",0+"px")}p=this._getComputedHeight(w);if(p===null){m.addClass(w,"yui-override-padding");p=w.clientHeight;m.removeClass(w,"yui-override-padding")}s=Math.max(p-o,0);m.setStyle(u,"height",s+"px");if(u.offsetHeight!=s){s=Math.max(s-(u.offsetHeight-s),0)}m.setStyle(u,"height",s+"px")}}},bringToTop:function(){var r=[],s=this.element;function o(z,A){var x=m.getStyle(z,"zIndex"),y=m.getStyle(A,"zIndex"),B=(!x||isNaN(x))?0:parseInt(x,10),w=(!y||isNaN(y))?0:parseInt(y,10);if(B>w){return -1}else{if(B<w){return 1}else{return 0}}}function t(x){var y=m.hasClass(x,c.CSS_OVERLAY),w=YAHOO.widget.Panel;if(y&&!m.isAncestor(s,x)){if(w&&m.hasClass(x,w.CSS_PANEL)){r[r.length]=x.parentNode}else{r[r.length]=x}}}m.getElementsBy(t,"DIV",document.body);r.sort(o);var v=r[0],p;if(v){p=m.getStyle(v,"zIndex");if(!isNaN(p)){var q=false;if(v!=s){q=true}else{if(r.length>1){var u=m.getStyle(r[1],"zIndex");if(!isNaN(u)&&(p==u)){q=true}}}if(q){this.cfg.setProperty("zindex",(parseInt(p,10)+2))}}}},destroy:function(){if(this.iframe){this.iframe.parentNode.removeChild(this.iframe)}this.iframe=null;c.windowResizeEvent.unsubscribe(this.doCenterOnDOMEvent,this);c.windowScrollEvent.unsubscribe(this.doCenterOnDOMEvent,this);l.textResizeEvent.unsubscribe(this._autoFillOnHeightChange);if(this._contextTriggers){this._processTriggers(this._contextTriggers,n,this._alignOnTrigger)}c.superclass.destroy.call(this)},forceContainerRedraw:function(){var o=this;m.addClass(o.element,"yui-force-redraw");setTimeout(function(){m.removeClass(o.element,"yui-force-redraw")},0)},toString:function(){return"Overlay "+this.id}})}());(function(){YAHOO.widget.OverlayManager=function(g){this.init(g)};var d=YAHOO.widget.Overlay,e=YAHOO.util.Event,c=YAHOO.util.Dom,f=YAHOO.util.Config,b=YAHOO.util.CustomEvent,a=YAHOO.widget.OverlayManager;a.CSS_FOCUSED="focused";a.prototype={constructor:a,overlays:null,initDefaultConfig:function(){this.cfg.addProperty("overlays",{suppressEvent:true});this.cfg.addProperty("focusevent",{value:"mousedown"})},init:function(g){this.cfg=new f(this);this.initDefaultConfig();if(g){this.cfg.applyConfig(g,true)}this.cfg.fireQueue();var h=null;this.getActive=function(){return h};this.focus=function(k){var j=this.find(k);if(j){j.focus()}};this.remove=function(k){var m=this.find(k),l;if(m){if(h==m){h=null}var j=(m.element===null&&m.cfg===null)?true:false;if(!j){l=c.getStyle(m.element,"zIndex");m.cfg.setProperty("zIndex",-1000,true)}this.overlays.sort(this.compareZIndexDesc);this.overlays=this.overlays.slice(0,(this.overlays.length-1));m.hideEvent.unsubscribe(m.blur);m.destroyEvent.unsubscribe(this._onOverlayDestroy,m);m.focusEvent.unsubscribe(this._onOverlayFocusHandler,m);m.blurEvent.unsubscribe(this._onOverlayBlurHandler,m);if(!j){e.removeListener(m.element,this.cfg.getProperty("focusevent"),this._onOverlayElementFocus);m.cfg.setProperty("zIndex",l,true);m.cfg.setProperty("manager",null)}if(m.focusEvent._managed){m.focusEvent=null}if(m.blurEvent._managed){m.blurEvent=null}if(m.focus._managed){m.focus=null}if(m.blur._managed){m.blur=null}}};this.blurAll=function(){var j=this.overlays.length,k;if(j>0){k=j-1;do{this.overlays[k].blur()}while(k--)}};this._manageBlur=function(k){var j=false;if(h==k){c.removeClass(h.element,a.CSS_FOCUSED);h=null;j=true}return j};this._manageFocus=function(k){var j=false;if(h!=k){if(h){h.blur()}h=k;this.bringToTop(h);c.addClass(h.element,a.CSS_FOCUSED);j=true}return j};var i=this.cfg.getProperty("overlays");if(!this.overlays){this.overlays=[]}if(i){this.register(i);this.overlays.sort(this.compareZIndexDesc)}},_onOverlayElementFocus:function(g){var i=e.getTarget(g),h=this.close;if(h&&(i==h||c.isAncestor(h,i))){this.blur()}else{this.focus()}},_onOverlayDestroy:function(h,i,g){this.remove(g)},_onOverlayFocusHandler:function(h,i,g){this._manageFocus(g)},_onOverlayBlurHandler:function(h,i,g){this._manageBlur(g)},_bindFocus:function(h){var g=this;if(!h.focusEvent){h.focusEvent=h.createEvent("focus");h.focusEvent.signature=b.LIST;h.focusEvent._managed=true}else{h.focusEvent.subscribe(g._onOverlayFocusHandler,h,g)}if(!h.focus){e.on(h.element,g.cfg.getProperty("focusevent"),g._onOverlayElementFocus,null,h);h.focus=function(){if(g._manageFocus(this)){if(this.cfg.getProperty("visible")&&this.focusFirst){this.focusFirst()}this.focusEvent.fire()}};h.focus._managed=true}},_bindBlur:function(h){var g=this;if(!h.blurEvent){h.blurEvent=h.createEvent("blur");h.blurEvent.signature=b.LIST;h.focusEvent._managed=true}else{h.blurEvent.subscribe(g._onOverlayBlurHandler,h,g)}if(!h.blur){h.blur=function(){if(g._manageBlur(this)){this.blurEvent.fire()}};h.blur._managed=true}h.hideEvent.subscribe(h.blur)},_bindDestroy:function(h){var g=this;h.destroyEvent.subscribe(g._onOverlayDestroy,h,g)},_syncZIndex:function(h){var g=c.getStyle(h.element,"zIndex");if(!isNaN(g)){h.cfg.setProperty("zIndex",parseInt(g,10))}else{h.cfg.setProperty("zIndex",0)}},register:function(j){var g=false,i,h;if(j instanceof d){j.cfg.addProperty("manager",{value:this});this._bindFocus(j);this._bindBlur(j);this._bindDestroy(j);this._syncZIndex(j);this.overlays.push(j);this.bringToTop(j);g=true}else{if(j instanceof Array){for(i=0,h=j.length;i<h;i++){g=this.register(j[i])||g}}}return g},bringToTop:function(m){var j=this.find(m),g,l,i;if(j){i=this.overlays;i.sort(this.compareZIndexDesc);l=i[0];if(l){g=c.getStyle(l.element,"zIndex");if(!isNaN(g)){var h=false;if(l!==j){h=true}else{if(i.length>1){var k=c.getStyle(i[1].element,"zIndex");if(!isNaN(k)&&(g==k)){h=true}}}if(h){j.cfg.setProperty("zindex",(parseInt(g,10)+2))}}i.sort(this.compareZIndexDesc)}}},find:function(l){var h=l instanceof d,j=this.overlays,m=j.length,i=null,g,k;if(h||typeof l=="string"){for(k=m-1;k>=0;k--){g=j[k];if((h&&(g===l))||(g.id==l)){i=g;break}}}return i},compareZIndexDesc:function(g,h){var i=(g.cfg)?g.cfg.getProperty("zIndex"):null,j=(h.cfg)?h.cfg.getProperty("zIndex"):null;if(i===null&&j===null){return 0}else{if(i===null){return 1}else{if(j===null){return -1}else{if(i>j){return -1}else{if(i<j){return 1}else{return 0}}}}}},showAll:function(){var h=this.overlays,g=h.length,i;for(i=g-1;i>=0;i--){h[i].show()}},hideAll:function(){var h=this.overlays,g=h.length,i;for(i=g-1;i>=0;i--){h[i].hide()}},toString:function(){return"OverlayManager"}}}());(function(){YAHOO.widget.Tooltip=function(o,p){YAHOO.widget.Tooltip.superclass.constructor.call(this,o,p)};var n=YAHOO.lang,e=YAHOO.util.Event,f=YAHOO.util.CustomEvent,b=YAHOO.util.Dom,i=YAHOO.widget.Tooltip,k=YAHOO.env.ua,l=(k.ie&&(k.ie<=6||document.compatMode=="BackCompat")),m,j={PREVENT_OVERLAP:{key:"preventoverlap",value:true,validator:n.isBoolean,supercedes:["x","y","xy"]},SHOW_DELAY:{key:"showdelay",value:200,validator:n.isNumber},AUTO_DISMISS_DELAY:{key:"autodismissdelay",value:5000,validator:n.isNumber},HIDE_DELAY:{key:"hidedelay",value:250,validator:n.isNumber},TEXT:{key:"text",suppressEvent:true},CONTAINER:{key:"container"},DISABLED:{key:"disabled",value:false,suppressEvent:true},XY_OFFSET:{key:"xyoffset",value:[0,25],suppressEvent:true}},d={CONTEXT_MOUSE_OVER:"contextMouseOver",CONTEXT_MOUSE_OUT:"contextMouseOut",CONTEXT_TRIGGER:"contextTrigger"};i.CSS_TOOLTIP="yui-tt";function h(p,r){var q=this.cfg,o=q.getProperty("width");if(o==r){q.setProperty("width",p)}}function a(t,u){if("_originalWidth" in this){h.call(this,this._originalWidth,this._forcedWidth)}var s=document.body,o=this.cfg,p=o.getProperty("width"),r,q;if((!p||p=="auto")&&(o.getProperty("container")!=s||o.getProperty("x")>=b.getViewportWidth()||o.getProperty("y")>=b.getViewportHeight())){q=this.element.cloneNode(true);q.style.visibility="hidden";q.style.top="0px";q.style.left="0px";s.appendChild(q);r=(q.offsetWidth+"px");s.removeChild(q);q=null;o.setProperty("width",r);o.refireEvent("xy");this._originalWidth=p||"";this._forcedWidth=r}}function c(p,q,o){this.render(o)}function g(){e.onDOMReady(c,this.cfg.getProperty("container"),this)}YAHOO.extend(i,YAHOO.widget.Overlay,{init:function(o,p){i.superclass.init.call(this,o);this.beforeInitEvent.fire(i);b.addClass(this.element,i.CSS_TOOLTIP);if(p){this.cfg.applyConfig(p,true)}this.cfg.queueProperty("visible",false);this.cfg.queueProperty("constraintoviewport",true);this.setBody("");this.subscribe("changeContent",a);this.subscribe("init",g);this.subscribe("render",this.onRender);this.initEvent.fire(i)},initEvents:function(){i.superclass.initEvents.call(this);var o=f.LIST;this.contextMouseOverEvent=this.createEvent(d.CONTEXT_MOUSE_OVER);this.contextMouseOverEvent.signature=o;this.contextMouseOutEvent=this.createEvent(d.CONTEXT_MOUSE_OUT);this.contextMouseOutEvent.signature=o;this.contextTriggerEvent=this.createEvent(d.CONTEXT_TRIGGER);this.contextTriggerEvent.signature=o},initDefaultConfig:function(){i.superclass.initDefaultConfig.call(this);this.cfg.addProperty(j.PREVENT_OVERLAP.key,{value:j.PREVENT_OVERLAP.value,validator:j.PREVENT_OVERLAP.validator,supercedes:j.PREVENT_OVERLAP.supercedes});this.cfg.addProperty(j.SHOW_DELAY.key,{handler:this.configShowDelay,value:200,validator:j.SHOW_DELAY.validator});this.cfg.addProperty(j.AUTO_DISMISS_DELAY.key,{handler:this.configAutoDismissDelay,value:j.AUTO_DISMISS_DELAY.value,validator:j.AUTO_DISMISS_DELAY.validator});this.cfg.addProperty(j.HIDE_DELAY.key,{handler:this.configHideDelay,value:j.HIDE_DELAY.value,validator:j.HIDE_DELAY.validator});this.cfg.addProperty(j.TEXT.key,{handler:this.configText,suppressEvent:j.TEXT.suppressEvent});this.cfg.addProperty(j.CONTAINER.key,{handler:this.configContainer,value:document.body});this.cfg.addProperty(j.DISABLED.key,{handler:this.configContainer,value:j.DISABLED.value,supressEvent:j.DISABLED.suppressEvent});this.cfg.addProperty(j.XY_OFFSET.key,{value:j.XY_OFFSET.value.concat(),supressEvent:j.XY_OFFSET.suppressEvent})},configText:function(q,r,p){var o=r[0];if(o){this.setBody(o)}},configContainer:function(p,q,o){var r=q[0];if(typeof r=="string"){this.cfg.setProperty("container",document.getElementById(r),true)}},_removeEventListeners:function(){var o=this._context,r,p,q;if(o){r=o.length;if(r>0){q=r-1;do{p=o[q];e.removeListener(p,"mouseover",this.onContextMouseOver);e.removeListener(p,"mousemove",this.onContextMouseMove);e.removeListener(p,"mouseout",this.onContextMouseOut)}while(q--)}}},configContext:function(q,u,p){var r=u[0],o,v,s,t;if(r){if(!(r instanceof Array)){if(typeof r=="string"){this.cfg.setProperty("context",[document.getElementById(r)],true)}else{this.cfg.setProperty("context",[r],true)}r=this.cfg.getProperty("context")}this._removeEventListeners();this._context=r;o=this._context;if(o){v=o.length;if(v>0){t=v-1;do{s=o[t];e.on(s,"mouseover",this.onContextMouseOver,this);e.on(s,"mousemove",this.onContextMouseMove,this);e.on(s,"mouseout",this.onContextMouseOut,this)}while(t--)}}}},onContextMouseMove:function(o,p){p.pageX=e.getPageX(o);p.pageY=e.getPageY(o)},onContextMouseOver:function(o,p){var q=this;if(q.title){p._tempTitle=q.title;q.title=""}if(p.fireEvent("contextMouseOver",q,o)!==false&&!p.cfg.getProperty("disabled")){if(p.hideProcId){clearTimeout(p.hideProcId);p.hideProcId=null}e.on(q,"mousemove",p.onContextMouseMove,p);p.showProcId=p.doShow(o,q)}},onContextMouseOut:function(o,p){var q=this;if(p._tempTitle){q.title=p._tempTitle;p._tempTitle=null}if(p.showProcId){clearTimeout(p.showProcId);p.showProcId=null}if(p.hideProcId){clearTimeout(p.hideProcId);p.hideProcId=null}p.fireEvent("contextMouseOut",q,o);p.hideProcId=setTimeout(function(){p.hide()},p.cfg.getProperty("hidedelay"))},doShow:function(q,t){var o=this.cfg.getProperty("xyoffset"),s=o[0],p=o[1],r=this;if(k.opera&&t.tagName&&t.tagName.toUpperCase()=="A"){p+=12}return setTimeout(function(){var u=r.cfg.getProperty("text");if(r._tempTitle&&(u===""||YAHOO.lang.isUndefined(u)||YAHOO.lang.isNull(u))){r.setBody(r._tempTitle)}else{r.cfg.refireEvent("text")}r.moveTo(r.pageX+s,r.pageY+p);if(r.cfg.getProperty("preventoverlap")){r.preventOverlap(r.pageX,r.pageY)}e.removeListener(t,"mousemove",r.onContextMouseMove);r.contextTriggerEvent.fire(t);r.show();r.hideProcId=r.doHide()},this.cfg.getProperty("showdelay"))},doHide:function(){var o=this;return setTimeout(function(){o.hide()},this.cfg.getProperty("autodismissdelay"))},preventOverlap:function(o,p){var s=this.element.offsetHeight,q=new YAHOO.util.Point(o,p),r=b.getRegion(this.element);r.top-=5;r.left-=5;r.right+=5;r.bottom+=5;if(r.contains(q)){this.cfg.setProperty("y",(p-s-5))}},onRender:function(q,r){function p(){var v=this.element,w=this.underlay;if(w){w.style.width=(v.offsetWidth+6)+"px";w.style.height=(v.offsetHeight+1)+"px"}}function t(){b.addClass(this.underlay,"yui-tt-shadow-visible");if(k.ie){this.forceUnderlayRedraw()}}function u(){b.removeClass(this.underlay,"yui-tt-shadow-visible")}function o(){var z=this.underlay,v,w,x,y;if(!z){v=this.element;w=YAHOO.widget.Module;x=k.ie;y=this;if(!m){m=document.createElement("div");m.className="yui-tt-shadow"}z=m.cloneNode(false);v.appendChild(z);this.underlay=z;this._shadow=this.underlay;t.call(this);this.subscribe("beforeShow",t);this.subscribe("hide",u);if(l){window.setTimeout(function(){p.call(y)},0);this.cfg.subscribeToConfigEvent("width",p);this.cfg.subscribeToConfigEvent("height",p);this.subscribe("changeContent",p);w.textResizeEvent.subscribe(p,this,true);this.subscribe("destroy",function(){w.textResizeEvent.unsubscribe(p,this)})}}}function s(){o.call(this);this.unsubscribe("beforeShow",s)}if(this.cfg.getProperty("visible")){o.call(this)}else{this.subscribe("beforeShow",s)}},forceUnderlayRedraw:function(){var o=this;b.addClass(o.underlay,"yui-force-redraw");setTimeout(function(){b.removeClass(o.underlay,"yui-force-redraw")},0)},destroy:function(){this._removeEventListeners();i.superclass.destroy.call(this)},toString:function(){return"Tooltip "+this.id}})}());(function(){YAHOO.widget.Panel=function(u,v){YAHOO.widget.Panel.superclass.constructor.call(this,u,v)};var b=null;var p=YAHOO.lang,o=YAHOO.util,t=o.Dom,a=o.Event,h=o.CustomEvent,j=YAHOO.util.KeyListener,l=o.Config,m=YAHOO.widget.Overlay,f=YAHOO.widget.Panel,i=YAHOO.env.ua,e=(i.ie&&(i.ie<=6||document.compatMode=="BackCompat")),n,d,r,q={SHOW_MASK:"showMask",HIDE_MASK:"hideMask",DRAG:"drag"},g={CLOSE:{key:"close",value:true,validator:p.isBoolean,supercedes:["visible"]},DRAGGABLE:{key:"draggable",value:(o.DD?true:false),validator:p.isBoolean,supercedes:["visible"]},DRAG_ONLY:{key:"dragonly",value:false,validator:p.isBoolean,supercedes:["draggable"]},UNDERLAY:{key:"underlay",value:"shadow",supercedes:["visible"]},MODAL:{key:"modal",value:false,validator:p.isBoolean,supercedes:["visible","zindex"]},KEY_LISTENERS:{key:"keylisteners",suppressEvent:true,supercedes:["visible"]},STRINGS:{key:"strings",supercedes:["close"],validator:p.isObject,value:{close:"Close"}}};f.CSS_PANEL="yui-panel";f.CSS_PANEL_CONTAINER="yui-panel-container";f.FOCUSABLE=["a","button","select","textarea","input","iframe"];function k(u,v){if(!this.header&&this.cfg.getProperty("draggable")){this.setHeader("&#160;")}}function c(w,x,u){var y=u[0],A=u[1],z=this.cfg,v=z.getProperty("width");if(v==A){z.setProperty("width",y)}this.unsubscribe("hide",c,u)}function s(v,w){var x,y,u;if(e){x=this.cfg;y=x.getProperty("width");if(!y||y=="auto"){u=(this.element.offsetWidth+"px");x.setProperty("width",u);this.subscribe("hide",c,[(y||""),u])}}}YAHOO.extend(f,m,{init:function(u,v){f.superclass.init.call(this,u);this.beforeInitEvent.fire(f);t.addClass(this.element,f.CSS_PANEL);this.buildWrapper();if(v){this.cfg.applyConfig(v,true)}this.subscribe("showMask",this._addFocusHandlers);this.subscribe("hideMask",this._removeFocusHandlers);this.subscribe("beforeRender",k);this.subscribe("render",function(){this.setFirstLastFocusable();this.subscribe("changeContent",this.setFirstLastFocusable)});this.subscribe("show",this.focusFirst);this.initEvent.fire(f)},_onElementFocus:function(x){if(b===this){var y=a.getTarget(x),z=document.documentElement,v=(y!==z&&y!==window);if(v&&y!==this.element&&y!==this.mask&&!t.isAncestor(this.element,y)){try{if(this.firstElement){this.firstElement.focus()}else{if(this._modalFocus){this._modalFocus.focus()}else{this.innerElement.focus()}}}catch(u){try{if(v&&y!==document.body){y.blur()}}catch(w){}}}}},_addFocusHandlers:function(u,v){if(!this.firstElement){if(i.webkit||i.opera){if(!this._modalFocus){this._createHiddenFocusElement()}}else{this.innerElement.tabIndex=0}}this.setTabLoop(this.firstElement,this.lastElement);a.onFocus(document.documentElement,this._onElementFocus,this,true);b=this},_createHiddenFocusElement:function(){var u=document.createElement("button");u.style.height="1px";u.style.width="1px";u.style.position="absolute";u.style.left="-10000em";u.style.opacity=0;u.tabIndex=-1;this.innerElement.appendChild(u);this._modalFocus=u},_removeFocusHandlers:function(u,v){a.removeFocusListener(document.documentElement,this._onElementFocus,this);if(b==this){b=null}},focusFirst:function(u,w,x){var v=this.firstElement;if(w&&w[1]){a.stopEvent(w[1])}if(v){try{v.focus()}catch(y){}}},focusLast:function(u,w,x){var v=this.lastElement;if(w&&w[1]){a.stopEvent(w[1])}if(v){try{v.focus()}catch(y){}}},setTabLoop:function(z,x){var v=this.preventBackTab,u=this.preventTabOut,w=this.showEvent,y=this.hideEvent;if(v){v.disable();w.unsubscribe(v.enable,v);y.unsubscribe(v.disable,v);v=this.preventBackTab=null}if(u){u.disable();w.unsubscribe(u.enable,u);y.unsubscribe(u.disable,u);u=this.preventTabOut=null}if(z){this.preventBackTab=new j(z,{shift:true,keys:9},{fn:this.focusLast,scope:this,correctScope:true});v=this.preventBackTab;w.subscribe(v.enable,v,true);y.subscribe(v.disable,v,true)}if(x){this.preventTabOut=new j(x,{shift:false,keys:9},{fn:this.focusFirst,scope:this,correctScope:true});u=this.preventTabOut;w.subscribe(u.enable,u,true);y.subscribe(u.disable,u,true)}},getFocusableElements:function(w){w=w||this.innerElement;var x={};for(var u=0;u<f.FOCUSABLE.length;u++){x[f.FOCUSABLE[u]]=true}function v(y){if(y.focus&&y.type!=="hidden"&&!y.disabled&&x[y.tagName.toLowerCase()]){return true}return false}return t.getElementsBy(v,null,w)},setFirstLastFocusable:function(){this.firstElement=null;this.lastElement=null;var u=this.getFocusableElements();this.focusableElements=u;if(u.length>0){this.firstElement=u[0];this.lastElement=u[u.length-1]}if(this.cfg.getProperty("modal")){this.setTabLoop(this.firstElement,this.lastElement)}},initEvents:function(){f.superclass.initEvents.call(this);var u=h.LIST;this.showMaskEvent=this.createEvent(q.SHOW_MASK);this.showMaskEvent.signature=u;this.hideMaskEvent=this.createEvent(q.HIDE_MASK);this.hideMaskEvent.signature=u;this.dragEvent=this.createEvent(q.DRAG);this.dragEvent.signature=u},initDefaultConfig:function(){f.superclass.initDefaultConfig.call(this);this.cfg.addProperty(g.CLOSE.key,{handler:this.configClose,value:g.CLOSE.value,validator:g.CLOSE.validator,supercedes:g.CLOSE.supercedes});this.cfg.addProperty(g.DRAGGABLE.key,{handler:this.configDraggable,value:(o.DD)?true:false,validator:g.DRAGGABLE.validator,supercedes:g.DRAGGABLE.supercedes});this.cfg.addProperty(g.DRAG_ONLY.key,{value:g.DRAG_ONLY.value,validator:g.DRAG_ONLY.validator,supercedes:g.DRAG_ONLY.supercedes});this.cfg.addProperty(g.UNDERLAY.key,{handler:this.configUnderlay,value:g.UNDERLAY.value,supercedes:g.UNDERLAY.supercedes});this.cfg.addProperty(g.MODAL.key,{handler:this.configModal,value:g.MODAL.value,validator:g.MODAL.validator,supercedes:g.MODAL.supercedes});this.cfg.addProperty(g.KEY_LISTENERS.key,{handler:this.configKeyListeners,suppressEvent:g.KEY_LISTENERS.suppressEvent,supercedes:g.KEY_LISTENERS.supercedes});this.cfg.addProperty(g.STRINGS.key,{value:g.STRINGS.value,handler:this.configStrings,validator:g.STRINGS.validator,supercedes:g.STRINGS.supercedes})},configClose:function(z,v,y){var x=v[0],u=this.close,w=this.cfg.getProperty("strings");if(x){if(!u){if(!r){r=document.createElement("a");r.className="container-close";r.href="#"}u=r.cloneNode(true);this.innerElement.appendChild(u);u.innerHTML=(w&&w.close)?w.close:"&#160;";a.on(u,"click",this._doClose,this,true);this.close=u}else{u.style.display="block"}}else{if(u){u.style.display="none"}}},_doClose:function(u){a.preventDefault(u);this.hide()},configDraggable:function(v,w,u){var x=w[0];if(x){if(!o.DD){this.cfg.setProperty("draggable",false);return}if(this.header){t.setStyle(this.header,"cursor","move");this.registerDragDrop()}this.subscribe("beforeShow",s)}else{if(this.dd){this.dd.unreg()}if(this.header){t.setStyle(this.header,"cursor","auto")}this.unsubscribe("beforeShow",s)}},configUnderlay:function(B,C,u){var D=(this.platform=="mac"&&i.gecko),A=C[0].toLowerCase(),y=this.underlay,x=this.element;function w(){var F=false;if(!y){if(!d){d=document.createElement("div");d.className="underlay"}y=d.cloneNode(false);this.element.appendChild(y);this.underlay=y;if(e){this.sizeUnderlay();this.cfg.subscribeToConfigEvent("width",this.sizeUnderlay);this.cfg.subscribeToConfigEvent("height",this.sizeUnderlay);this.changeContentEvent.subscribe(this.sizeUnderlay);YAHOO.widget.Module.textResizeEvent.subscribe(this.sizeUnderlay,this,true)}if(i.webkit&&i.webkit<420){this.changeContentEvent.subscribe(this.forceUnderlayRedraw)}F=true}}function E(){var F=w.call(this);if(!F&&e){this.sizeUnderlay()}this._underlayDeferred=false;this.beforeShowEvent.unsubscribe(E)}function v(){if(this._underlayDeferred){this.beforeShowEvent.unsubscribe(E);this._underlayDeferred=false}if(y){this.cfg.unsubscribeFromConfigEvent("width",this.sizeUnderlay);this.cfg.unsubscribeFromConfigEvent("height",this.sizeUnderlay);this.changeContentEvent.unsubscribe(this.sizeUnderlay);this.changeContentEvent.unsubscribe(this.forceUnderlayRedraw);YAHOO.widget.Module.textResizeEvent.unsubscribe(this.sizeUnderlay,this,true);this.element.removeChild(y);this.underlay=null}}switch(A){case"shadow":t.removeClass(x,"matte");t.addClass(x,"shadow");break;case"matte":if(!D){v.call(this)}t.removeClass(x,"shadow");t.addClass(x,"matte");break;default:if(!D){v.call(this)}t.removeClass(x,"shadow");t.removeClass(x,"matte");break}if((A=="shadow")||(D&&!y)){if(this.cfg.getProperty("visible")){var z=w.call(this);if(!z&&e){this.sizeUnderlay()}}else{if(!this._underlayDeferred){this.beforeShowEvent.subscribe(E);this._underlayDeferred=true}}}},configModal:function(v,w,x){var u=w[0];if(u){if(!this._hasModalityEventListeners){this.subscribe("beforeShow",this.buildMask);this.subscribe("beforeShow",this.bringToTop);this.subscribe("beforeShow",this.showMask);this.subscribe("hide",this.hideMask);m.windowResizeEvent.subscribe(this.sizeMask,this,true);this._hasModalityEventListeners=true}}else{if(this._hasModalityEventListeners){if(this.cfg.getProperty("visible")){this.hideMask();this.removeMask()}this.unsubscribe("beforeShow",this.buildMask);this.unsubscribe("beforeShow",this.bringToTop);this.unsubscribe("beforeShow",this.showMask);this.unsubscribe("hide",this.hideMask);m.windowResizeEvent.unsubscribe(this.sizeMask,this);this._hasModalityEventListeners=false}}},removeMask:function(){var u=this.mask,v;if(u){this.hideMask();v=u.parentNode;if(v){v.removeChild(u)}this.mask=null}},configKeyListeners:function(A,x,w){var u=x[0],y,z,v;if(u){if(u instanceof Array){z=u.length;for(v=0;v<z;v++){y=u[v];if(!l.alreadySubscribed(this.showEvent,y.enable,y)){this.showEvent.subscribe(y.enable,y,true)}if(!l.alreadySubscribed(this.hideEvent,y.disable,y)){this.hideEvent.subscribe(y.disable,y,true);this.destroyEvent.subscribe(y.disable,y,true)}}}else{if(!l.alreadySubscribed(this.showEvent,u.enable,u)){this.showEvent.subscribe(u.enable,u,true)}if(!l.alreadySubscribed(this.hideEvent,u.disable,u)){this.hideEvent.subscribe(u.disable,u,true);this.destroyEvent.subscribe(u.disable,u,true)}}}},configStrings:function(v,w,u){var x=p.merge(g.STRINGS.value,w[0]);this.cfg.setProperty(g.STRINGS.key,x,true)},configHeight:function(y,v,x){var w=v[0],u=this.innerElement;t.setStyle(u,"height",w);this.cfg.refireEvent("iframe")},_autoFillOnHeightChange:function(x,v,u){f.superclass._autoFillOnHeightChange.apply(this,arguments);if(e){var w=this;setTimeout(function(){w.sizeUnderlay()},0)}},configWidth:function(y,w,x){var u=w[0],v=this.innerElement;t.setStyle(v,"width",u);this.cfg.refireEvent("iframe")},configzIndex:function(v,w,x){f.superclass.configzIndex.call(this,v,w,x);if(this.mask||this.cfg.getProperty("modal")===true){var u=t.getStyle(this.element,"zIndex");if(!u||isNaN(u)){u=0}if(u===0){this.cfg.setProperty("zIndex",1)}else{this.stackMask()}}},buildWrapper:function(){var u=this.element.parentNode,w=this.element,v=document.createElement("div");v.className=f.CSS_PANEL_CONTAINER;v.id=w.id+"_c";if(u){u.insertBefore(v,w)}v.appendChild(w);this.element=v;this.innerElement=w;t.setStyle(this.innerElement,"visibility","inherit")},sizeUnderlay:function(){var u=this.underlay,v;if(u){v=this.element;u.style.width=v.offsetWidth+"px";u.style.height=v.offsetHeight+"px"}},registerDragDrop:function(){var u=this;if(this.header){if(!o.DD){return}var v=(this.cfg.getProperty("dragonly")===true);this.dd=new o.DD(this.element.id,this.id,{dragOnly:v});if(!this.header.id){this.header.id=this.id+"_h"}this.dd.startDrag=function(){var C,z,x,B,w,y;if(YAHOO.env.ua.ie==6){t.addClass(u.element,"drag")}if(u.cfg.getProperty("constraintoviewport")){var A=m.VIEWPORT_OFFSET;C=u.element.offsetHeight;z=u.element.offsetWidth;x=t.getViewportWidth();B=t.getViewportHeight();w=t.getDocumentScrollLeft();y=t.getDocumentScrollTop();if(C+A<B){this.minY=y+A;this.maxY=y+B-C-A}else{this.minY=y+A;this.maxY=y+A}if(z+A<x){this.minX=w+A;this.maxX=w+x-z-A}else{this.minX=w+A;this.maxX=w+A}this.constrainX=true;this.constrainY=true}else{this.constrainX=false;this.constrainY=false}u.dragEvent.fire("startDrag",arguments)};this.dd.onDrag=function(){u.syncPosition();u.cfg.refireEvent("iframe");if(this.platform=="mac"&&YAHOO.env.ua.gecko){this.showMacGeckoScrollbars()}u.dragEvent.fire("onDrag",arguments)};this.dd.endDrag=function(){if(YAHOO.env.ua.ie==6){t.removeClass(u.element,"drag")}u.dragEvent.fire("endDrag",arguments);u.moveEvent.fire(u.cfg.getProperty("xy"))};this.dd.setHandleElId(this.header.id);this.dd.addInvalidHandleType("INPUT");this.dd.addInvalidHandleType("SELECT");this.dd.addInvalidHandleType("TEXTAREA")}},buildMask:function(){var u=this.mask;if(!u){if(!n){n=document.createElement("div");n.className="mask";n.innerHTML="&#160;"}u=n.cloneNode(true);u.id=this.id+"_mask";document.body.insertBefore(u,document.body.firstChild);this.mask=u;if(YAHOO.env.ua.gecko&&this.platform=="mac"){t.addClass(this.mask,"block-scrollbars")}this.stackMask()}},hideMask:function(){if(this.cfg.getProperty("modal")&&this.mask){this.mask.style.display="none";t.removeClass(document.body,"masked");this.hideMaskEvent.fire()}},showMask:function(){if(this.cfg.getProperty("modal")&&this.mask){t.addClass(document.body,"masked");this.sizeMask();this.mask.style.display="block";this.showMaskEvent.fire()}},sizeMask:function(){if(this.mask){var v=this.mask,u=t.getViewportWidth(),w=t.getViewportHeight();if(v.offsetHeight>w){v.style.height=w+"px"}if(v.offsetWidth>u){v.style.width=u+"px"}v.style.height=t.getDocumentHeight()+"px";v.style.width=t.getDocumentWidth()+"px"}},stackMask:function(){if(this.mask){var u=t.getStyle(this.element,"zIndex");if(!YAHOO.lang.isUndefined(u)&&!isNaN(u)){t.setStyle(this.mask,"zIndex",u-1)}}},render:function(u){return f.superclass.render.call(this,u,this.innerElement)},_renderHeader:function(u){u=u||this.innerElement;f.superclass._renderHeader.call(this,u)},_renderBody:function(u){u=u||this.innerElement;f.superclass._renderBody.call(this,u)},_renderFooter:function(u){u=u||this.innerElement;f.superclass._renderFooter.call(this,u)},destroy:function(){m.windowResizeEvent.unsubscribe(this.sizeMask,this);this.removeMask();if(this.close){a.purgeElement(this.close)}f.superclass.destroy.call(this)},forceUnderlayRedraw:function(){var u=this.underlay;t.addClass(u,"yui-force-redraw");setTimeout(function(){t.removeClass(u,"yui-force-redraw")},0)},toString:function(){return"Panel "+this.id}})}());(function(){YAHOO.widget.Dialog=function(i,j){YAHOO.widget.Dialog.superclass.constructor.call(this,i,j)};var h=YAHOO.util.Event,c=YAHOO.util.CustomEvent,e=YAHOO.util.Dom,a=YAHOO.widget.Dialog,d=YAHOO.lang,b={BEFORE_SUBMIT:"beforeSubmit",SUBMIT:"submit",MANUAL_SUBMIT:"manualSubmit",ASYNC_SUBMIT:"asyncSubmit",FORM_SUBMIT:"formSubmit",CANCEL:"cancel"},g={POST_METHOD:{key:"postmethod",value:"async"},POST_DATA:{key:"postdata",value:null},BUTTONS:{key:"buttons",value:"none",supercedes:["visible"]},HIDEAFTERSUBMIT:{key:"hideaftersubmit",value:true}};a.CSS_DIALOG="yui-dialog";function f(){var i=this._aButtons,k,j,l;if(d.isArray(i)){k=i.length;if(k>0){l=k-1;do{j=i[l];if(YAHOO.widget.Button&&j instanceof YAHOO.widget.Button){j.destroy()}else{if(j.tagName.toUpperCase()=="BUTTON"){h.purgeElement(j);h.purgeElement(j,false)}}}while(l--)}}}YAHOO.extend(a,YAHOO.widget.Panel,{form:null,initDefaultConfig:function(){a.superclass.initDefaultConfig.call(this);this.callback={success:null,failure:null,argument:null};this.cfg.addProperty(g.POST_METHOD.key,{handler:this.configPostMethod,value:g.POST_METHOD.value,validator:function(i){if(i!="form"&&i!="async"&&i!="none"&&i!="manual"){return false}else{return true}}});this.cfg.addProperty(g.POST_DATA.key,{value:g.POST_DATA.value});this.cfg.addProperty(g.HIDEAFTERSUBMIT.key,{value:g.HIDEAFTERSUBMIT.value});this.cfg.addProperty(g.BUTTONS.key,{handler:this.configButtons,value:g.BUTTONS.value,supercedes:g.BUTTONS.supercedes})},initEvents:function(){a.superclass.initEvents.call(this);var i=c.LIST;this.beforeSubmitEvent=this.createEvent(b.BEFORE_SUBMIT);this.beforeSubmitEvent.signature=i;this.submitEvent=this.createEvent(b.SUBMIT);this.submitEvent.signature=i;this.manualSubmitEvent=this.createEvent(b.MANUAL_SUBMIT);this.manualSubmitEvent.signature=i;this.asyncSubmitEvent=this.createEvent(b.ASYNC_SUBMIT);this.asyncSubmitEvent.signature=i;this.formSubmitEvent=this.createEvent(b.FORM_SUBMIT);this.formSubmitEvent.signature=i;this.cancelEvent=this.createEvent(b.CANCEL);this.cancelEvent.signature=i},init:function(i,j){a.superclass.init.call(this,i);this.beforeInitEvent.fire(a);e.addClass(this.element,a.CSS_DIALOG);this.cfg.setProperty("visible",false);if(j){this.cfg.applyConfig(j,true)}this.showEvent.subscribe(this.focusFirst,this,true);this.beforeHideEvent.subscribe(this.blurButtons,this,true);this.subscribe("changeBody",this.registerForm);this.initEvent.fire(a)},doSubmit:function(){var k=YAHOO.util.Connect,j=this.form,p=false,m=false,i,n,o,r;switch(this.cfg.getProperty("postmethod")){case"async":i=j.elements;n=i.length;if(n>0){o=n-1;do{if(i[o].type=="file"){p=true;break}}while(o--)}if(p&&YAHOO.env.ua.ie&&this.isSecure){m=true}r=this._getFormAttributes(j);k.setForm(j,p,m);var q=this.cfg.getProperty("postdata");var l=k.asyncRequest(r.method,r.action,this.callback,q);this.asyncSubmitEvent.fire(l);break;case"form":j.submit();this.formSubmitEvent.fire();break;case"none":case"manual":this.manualSubmitEvent.fire();break}},_getFormAttributes:function(j){var l={method:null,action:null};if(j){if(j.getAttributeNode){var k=j.getAttributeNode("action");var i=j.getAttributeNode("method");if(k){l.action=k.value}if(i){l.method=i.value}}else{l.action=j.getAttribute("action");l.method=j.getAttribute("method")}}l.method=(d.isString(l.method)?l.method:"POST").toUpperCase();l.action=d.isString(l.action)?l.action:"";return l},registerForm:function(){var i=this.element.getElementsByTagName("form")[0];if(this.form){if(this.form==i&&e.isAncestor(this.element,this.form)){return}else{h.purgeElement(this.form);this.form=null}}if(!i){i=document.createElement("form");i.name="frm_"+this.id;this.body.appendChild(i)}if(i){this.form=i;h.on(i,"submit",this._submitHandler,this,true)}},_submitHandler:function(i){h.stopEvent(i);this.submit();this.form.blur()},setTabLoop:function(j,i){j=j||this.firstButton;i=this.lastButton||i;a.superclass.setTabLoop.call(this,j,i)},setFirstLastFocusable:function(){a.superclass.setFirstLastFocusable.call(this);var k,l,j,i=this.focusableElements;this.firstFormElement=null;this.lastFormElement=null;if(this.form&&i&&i.length>0){l=i.length;for(k=0;k<l;++k){j=i[k];if(this.form===j.form){this.firstFormElement=j;break}}for(k=l-1;k>=0;--k){j=i[k];if(this.form===j.form){this.lastFormElement=j;break}}}},configClose:function(j,k,i){a.superclass.configClose.apply(this,arguments)},_doClose:function(i){h.preventDefault(i);this.cancel()},configButtons:function(k,l,q){var p=YAHOO.widget.Button,i=l[0],s=this.innerElement,j,n,t,m,o,u,r;f.call(this);this._aButtons=null;if(d.isArray(i)){o=document.createElement("span");o.className="button-group";m=i.length;this._aButtons=[];this.defaultHtmlButton=null;for(r=0;r<m;r++){j=i[r];if(p){t=new p({label:j.text});t.appendTo(o);n=t.get("element");if(j.isDefault){t.addClass("default");this.defaultHtmlButton=n}if(d.isFunction(j.handler)){t.set("onclick",{fn:j.handler,obj:this,scope:this})}else{if(d.isObject(j.handler)&&d.isFunction(j.handler.fn)){t.set("onclick",{fn:j.handler.fn,obj:((!d.isUndefined(j.handler.obj))?j.handler.obj:this),scope:(j.handler.scope||this)})}}this._aButtons[this._aButtons.length]=t}else{n=document.createElement("button");n.setAttribute("type","button");if(j.isDefault){n.className="default";this.defaultHtmlButton=n}n.innerHTML=j.text;if(d.isFunction(j.handler)){h.on(n,"click",j.handler,this,true)}else{if(d.isObject(j.handler)&&d.isFunction(j.handler.fn)){h.on(n,"click",j.handler.fn,((!d.isUndefined(j.handler.obj))?j.handler.obj:this),(j.handler.scope||this))}}o.appendChild(n);this._aButtons[this._aButtons.length]=n}j.htmlButton=n;if(r===0){this.firstButton=n}if(r==(m-1)){this.lastButton=n}}this.setFooter(o);u=this.footer;if(e.inDocument(this.element)&&!e.isAncestor(s,u)){s.appendChild(u)}this.buttonSpan=o}else{o=this.buttonSpan;u=this.footer;if(o&&u){u.removeChild(o);this.buttonSpan=null;this.firstButton=null;this.lastButton=null;this.defaultHtmlButton=null}}this.changeContentEvent.fire()},getButtons:function(){return this._aButtons||null},focusFirst:function(j,l,m){var k=this.firstFormElement;if(l&&l[1]){h.stopEvent(l[1])}if(k){try{k.focus()}catch(i){}}else{if(this.defaultHtmlButton){this.focusDefaultButton()}else{this.focusFirstButton()}}},focusLast:function(j,l,n){var m=this.cfg.getProperty("buttons"),k=this.lastFormElement;if(l&&l[1]){h.stopEvent(l[1])}if(m&&d.isArray(m)){this.focusLastButton()}else{if(k){try{k.focus()}catch(i){}}}},_getButton:function(i){var j=YAHOO.widget.Button;if(j&&i&&i.nodeName&&i.id){i=j.getButton(i.id)||i}return i},focusDefaultButton:function(){var j=this._getButton(this.defaultHtmlButton);if(j){try{j.focus()}catch(i){}}},blurButtons:function(){var m=this.cfg.getProperty("buttons"),j,n,k,l;if(m&&d.isArray(m)){j=m.length;if(j>0){l=(j-1);do{n=m[l];if(n){k=this._getButton(n.htmlButton);if(k){try{k.blur()}catch(i){}}}}while(l--)}}},focusFirstButton:function(){var i=this.cfg.getProperty("buttons"),j,l;if(i&&d.isArray(i)){j=i[0];if(j){l=this._getButton(j.htmlButton);if(l){try{l.focus()}catch(k){}}}}},focusLastButton:function(){var m=this.cfg.getProperty("buttons"),k,i,l;if(m&&d.isArray(m)){k=m.length;if(k>0){i=m[(k-1)];if(i){l=this._getButton(i.htmlButton);if(l){try{l.focus()}catch(j){}}}}}},configPostMethod:function(j,k,i){this.registerForm()},validate:function(){return true},submit:function(){if(this.validate()){if(this.beforeSubmitEvent.fire()){this.doSubmit();this.submitEvent.fire();if(this.cfg.getProperty("hideaftersubmit")){this.hide()}return true}else{return false}}else{return false}},cancel:function(){this.cancelEvent.fire();this.hide()},getData:function(){var j=this.form,y,q,n,w,p,s,t,z,m,x,l,i,u,A,v,k,o;function r(C){var B=C.tagName.toUpperCase();return((B=="INPUT"||B=="TEXTAREA"||B=="SELECT")&&C.name==w)}if(j){y=j.elements;q=y.length;n={};for(k=0;k<q;k++){w=y[k].name;p=e.getElementsBy(r,"*",j);s=p.length;if(s>0){if(s==1){p=p[0];t=p.type;z=p.tagName.toUpperCase();switch(z){case"INPUT":if(t=="checkbox"){n[w]=p.checked}else{if(t!="radio"){n[w]=p.value}}break;case"TEXTAREA":n[w]=p.value;break;case"SELECT":m=p.options;x=m.length;l=[];for(o=0;o<x;o++){i=m[o];if(i.selected){v=i.attributes.value;l[l.length]=(v&&v.specified)?i.value:i.text}}n[w]=l;break}}else{t=p[0].type;switch(t){case"radio":for(o=0;o<s;o++){u=p[o];if(u.checked){n[w]=u.value;break}}break;case"checkbox":l=[];for(o=0;o<s;o++){A=p[o];if(A.checked){l[l.length]=A.value}}n[w]=l;break}}}}}return n},destroy:function(){f.call(this);this._aButtons=null;var j=this.element.getElementsByTagName("form"),i;if(j.length>0){i=j[0];if(i){h.purgeElement(i);if(i.parentNode){i.parentNode.removeChild(i)}this.form=null}}a.superclass.destroy.call(this)},toString:function(){return"Dialog "+this.id}})}());(function(){YAHOO.widget.SimpleDialog=function(d,e){YAHOO.widget.SimpleDialog.superclass.constructor.call(this,d,e)};var b=YAHOO.util.Dom,c=YAHOO.widget.SimpleDialog,a={ICON:{key:"icon",value:"none",suppressEvent:true},TEXT:{key:"text",value:"",suppressEvent:true,supercedes:["icon"]}};c.ICON_BLOCK="blckicon";c.ICON_ALARM="alrticon";c.ICON_HELP="hlpicon";c.ICON_INFO="infoicon";c.ICON_WARN="warnicon";c.ICON_TIP="tipicon";c.ICON_CSS_CLASSNAME="yui-icon";c.CSS_SIMPLEDIALOG="yui-simple-dialog";YAHOO.extend(c,YAHOO.widget.Dialog,{initDefaultConfig:function(){c.superclass.initDefaultConfig.call(this);this.cfg.addProperty(a.ICON.key,{handler:this.configIcon,value:a.ICON.value,suppressEvent:a.ICON.suppressEvent});this.cfg.addProperty(a.TEXT.key,{handler:this.configText,value:a.TEXT.value,suppressEvent:a.TEXT.suppressEvent,supercedes:a.TEXT.supercedes})},init:function(d,e){c.superclass.init.call(this,d);this.beforeInitEvent.fire(c);b.addClass(this.element,c.CSS_SIMPLEDIALOG);this.cfg.queueProperty("postmethod","manual");if(e){this.cfg.applyConfig(e,true)}this.beforeRenderEvent.subscribe(function(){if(!this.body){this.setBody("")}},this,true);this.initEvent.fire(c)},registerForm:function(){c.superclass.registerForm.call(this);this.form.innerHTML+='<input type="hidden" name="'+this.id+'" value=""/>'},configIcon:function(f,g,i){var d=g[0],l=this.body,k=c.ICON_CSS_CLASSNAME,e,h,j;if(d&&d!="none"){e=b.getElementsByClassName(k,"*",l);if(e.length===1){h=e[0];j=h.parentNode;if(j){j.removeChild(h);h=null}}if(d.indexOf(".")==-1){h=document.createElement("span");h.className=(k+" "+d);h.innerHTML="&#160;"}else{h=document.createElement("img");h.src=(this.imageRoot+d);h.className=k}if(h){l.insertBefore(h,l.firstChild)}}},configText:function(f,g,e){var d=g[0];if(d){this.setBody(d);this.cfg.refireEvent("icon")}},toString:function(){return"SimpleDialog "+this.id}})}());(function(){YAHOO.widget.ContainerEffect=function(g,d,e,h,f){if(!f){f=YAHOO.util.Anim}this.overlay=g;this.attrIn=d;this.attrOut=e;this.targetElement=h||g.element;this.animClass=f};var c=YAHOO.util.Dom,b=YAHOO.util.CustomEvent,a=YAHOO.widget.ContainerEffect;a.FADE=function(i,g){var f=YAHOO.util.Easing,d={attributes:{opacity:{from:0,to:1}},duration:g,method:f.easeIn},h={attributes:{opacity:{to:0}},duration:g,method:f.easeOut},e=new a(i,d,h,i.element);e.handleUnderlayStart=function(){var j=this.overlay.underlay;if(j&&YAHOO.env.ua.ie){var k=(j.filters&&j.filters.length>0);if(k){c.addClass(i.element,"yui-effect-fade")}}};e.handleUnderlayComplete=function(){var j=this.overlay.underlay;if(j&&YAHOO.env.ua.ie){c.removeClass(i.element,"yui-effect-fade")}};e.handleStartAnimateIn=function(k,l,j){c.addClass(j.overlay.element,"hide-select");if(!j.overlay.underlay){j.overlay.cfg.refireEvent("underlay")}j.handleUnderlayStart();j.overlay._setDomVisibility(true);c.setStyle(j.overlay.element,"opacity",0)};e.handleCompleteAnimateIn=function(k,l,j){c.removeClass(j.overlay.element,"hide-select");if(j.overlay.element.style.filter){j.overlay.element.style.filter=null}j.handleUnderlayComplete();j.overlay.cfg.refireEvent("iframe");j.animateInCompleteEvent.fire()};e.handleStartAnimateOut=function(k,l,j){c.addClass(j.overlay.element,"hide-select");j.handleUnderlayStart()};e.handleCompleteAnimateOut=function(k,l,j){c.removeClass(j.overlay.element,"hide-select");if(j.overlay.element.style.filter){j.overlay.element.style.filter=null}j.overlay._setDomVisibility(false);c.setStyle(j.overlay.element,"opacity",1);j.handleUnderlayComplete();j.overlay.cfg.refireEvent("iframe");j.animateOutCompleteEvent.fire()};e.init();return e};a.SLIDE=function(l,d){var i=YAHOO.util.Easing,f=l.cfg.getProperty("x")||c.getX(l.element),g=l.cfg.getProperty("y")||c.getY(l.element),e=c.getClientWidth(),j=l.element.offsetWidth,h={attributes:{points:{to:[f,g]}},duration:d,method:i.easeIn},m={attributes:{points:{to:[(e+25),g]}},duration:d,method:i.easeOut},k=new a(l,h,m,l.element,YAHOO.util.Motion);k.handleStartAnimateIn=function(o,p,n){n.overlay.element.style.left=((-25)-j)+"px";n.overlay.element.style.top=g+"px"};k.handleTweenAnimateIn=function(p,q,o){var n=c.getXY(o.overlay.element),r=n[0],s=n[1];if(c.getStyle(o.overlay.element,"visibility")=="hidden"&&r<f){o.overlay._setDomVisibility(true)}o.overlay.cfg.setProperty("xy",[r,s],true);o.overlay.cfg.refireEvent("iframe")};k.handleCompleteAnimateIn=function(o,p,n){n.overlay.cfg.setProperty("xy",[f,g],true);n.startX=f;n.startY=g;n.overlay.cfg.refireEvent("iframe");n.animateInCompleteEvent.fire()};k.handleStartAnimateOut=function(r,s,o){var q=c.getViewportWidth(),n=c.getXY(o.overlay.element),p=n[1];o.animOut.attributes.points.to=[(q+25),p]};k.handleTweenAnimateOut=function(q,r,p){var n=c.getXY(p.overlay.element),s=n[0],o=n[1];p.overlay.cfg.setProperty("xy",[s,o],true);p.overlay.cfg.refireEvent("iframe")};k.handleCompleteAnimateOut=function(o,p,n){n.overlay._setDomVisibility(false);n.overlay.cfg.setProperty("xy",[f,g]);n.animateOutCompleteEvent.fire()};k.init();return k};a.prototype={init:function(){this.beforeAnimateInEvent=this.createEvent("beforeAnimateIn");this.beforeAnimateInEvent.signature=b.LIST;this.beforeAnimateOutEvent=this.createEvent("beforeAnimateOut");this.beforeAnimateOutEvent.signature=b.LIST;this.animateInCompleteEvent=this.createEvent("animateInComplete");this.animateInCompleteEvent.signature=b.LIST;this.animateOutCompleteEvent=this.createEvent("animateOutComplete");this.animateOutCompleteEvent.signature=b.LIST;this.animIn=new this.animClass(this.targetElement,this.attrIn.attributes,this.attrIn.duration,this.attrIn.method);this.animIn.onStart.subscribe(this.handleStartAnimateIn,this);this.animIn.onTween.subscribe(this.handleTweenAnimateIn,this);this.animIn.onComplete.subscribe(this.handleCompleteAnimateIn,this);this.animOut=new this.animClass(this.targetElement,this.attrOut.attributes,this.attrOut.duration,this.attrOut.method);this.animOut.onStart.subscribe(this.handleStartAnimateOut,this);this.animOut.onTween.subscribe(this.handleTweenAnimateOut,this);this.animOut.onComplete.subscribe(this.handleCompleteAnimateOut,this)},animateIn:function(){this.beforeAnimateInEvent.fire();this.animIn.animate()},animateOut:function(){this.beforeAnimateOutEvent.fire();this.animOut.animate()},handleStartAnimateIn:function(e,f,d){},handleTweenAnimateIn:function(e,f,d){},handleCompleteAnimateIn:function(e,f,d){},handleStartAnimateOut:function(e,f,d){},handleTweenAnimateOut:function(e,f,d){},handleCompleteAnimateOut:function(e,f,d){},toString:function(){var d="ContainerEffect";if(this.overlay){d+=" ["+this.overlay.toString()+"]"}return d}};YAHOO.lang.augmentProto(a,YAHOO.util.EventProvider)})();YAHOO.register("container",YAHOO.widget.Module,{version:"2.8.0r4",build:"2449"});tagged.namespace("jst.apps.meetme.survey");tagged.jst.apps.meetme.survey.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){if(source=="S"){s.push('<div class="hd">');s.push(escapeHTML("Spotlight survey"));s.push('</div><div class="bd">    <p class="message">');s.push(escapeHTML("Send us feedback, so we can make Spotlight better!"));s.push('</p>    <p class="button_row">        <input type="button" class="feature greenBtnBig" value="');s.push(escapeHTML("Take Survey"));s.push('">    </p>    <div class="clear_both"></div>    <p class="error" style="display:none;"></p>    <div class="busy" style="display:none;"></div></div>')}if(source=="H"){s.push('<div class="hd">');s.push(escapeHTML("Headliners survey"));s.push('</div><div class="bd">    <p class="message">');s.push(escapeHTML("Send us feedback, so we can make Headliners better!"));s.push('</p>    <p class="button_row">        <input type="button" class="feature greenBtnBig" value="');s.push(escapeHTML("Take Survey"));s.push('">    </p>    <div class="clear_both"></div>    <p class="error" style="display:none;"></p>    <div class="busy" style="display:none;"></div></div>')}}return s.join("")}catch(e){alert('template error in "apps/meetme/survey.jst":\n\n'+e)}return""};tagged.namespace("jst.util.format_timespan");tagged.jst.util.format_timespan.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){var u=0;if(t<0&&!hide_past){t=-t;if(t<5){s.push(escapeHTML("Moments ago"))}else{if(t<30){s.push(escapeHTML("Half a minute ago"))}else{if(t<60){s.push(escapeHTML("Less than a minute ago"))}else{if(t<60*60){u=Math.ceil(t/60);s.push(escapeHTML(sprintf(ngettext(["A minute ago","%d minutes ago"],u),u)))}else{if(t<24*60*60||max=="hour"){u=parseInt(t/(60*60));s.push(escapeHTML(sprintf(ngettext(["An hour ago","%d hours ago"],u),u)))}else{if(t<7*24*60*60||max=="day"){u=parseInt(t/(24*60*60));s.push(escapeHTML(sprintf(ngettext(["A day ago","%d days ago"],u),u)))}else{if(t<30*24*60*60||max=="week"){u=parseInt(t/(7*24*60*60));s.push(escapeHTML(sprintf(ngettext(["A week ago","%d weeks ago"],u),u)))}else{if(t<2*30*24*60*60||max=="month"){u=parseInt(t/(30*24*60*60));s.push(escapeHTML(sprintf(ngettext(["A month ago","%d months ago"],u),u)))}else{s.push(escapeHTML("Over 3 months ago"))}}}}}}}}}else{if(t>0){if(t<60||max=="second"){s.push(escapeHTML(sprintf(ngettext(["%d second","%d seconds"],t),t)))}else{if(t<60*60||max=="minute"){u=parseInt(t/60);s.push(escapeHTML(sprintf(ngettext(["%d minute","%d minutes"],u),u)))}else{if(t<24*60*60||max=="hour"){u=parseInt(t/(60*60));s.push(escapeHTML(sprintf(ngettext(["%d hour","%d hours"],u),u)))}else{if(t<7*24*60*60||max=="day"){u=parseInt(t/(24*60*60));s.push(escapeHTML(sprintf(ngettext(["%d day","%d days"],u),u)))}else{if(t<30*24*60*60||max=="week"){u=parseInt(t/(7*24*60*60));s.push(escapeHTML(sprintf(ngettext(["%d week","%d weeks"],u),u)))}else{if(t<12*30*24*60*60||max=="month"){u=parseInt(t/(30*24*60*60));s.push(escapeHTML(sprintf(ngettext(["%d month","%d months"],u),u)))}else{u=parseInt(t/(12*30*24*60*60));s.push(escapeHTML(sprintf(ngettext(["%d year","%d years"],u),u)))}}}}}}}else{if(t==0||hide_past){s.push(escapeHTML("now"))}}}}return s.join("")}catch(e){alert('template error in "util/format_timespan.jst":\n\n'+e)}return""};tagged.namespace("util.format");tagged.util.format={currency:function(b,a){if(a){return"$"+tagged.util.format.commify(b)}b=parseInt(b,10);if(typeof b==="number"&&isFinite(b)){if(b>=0){return"$"+tagged.util.format.commify(b)}else{return"-$"+tagged.util.format.commify(b).slice(1)}}else{return""}},commify:function(b){b=(b||0).toString();var a=/(\d+)(\d{3})/;while(a.test(b)){b=b.replace(a,"$1,$2")}return b},decommify:function(a){return parseInt(a.replace(/,/g,""))},ellipse:function(d,a){if(!(typeof d==="string")){return d}if(d.indexOf("&")>=0){var c=d.split(/([^&]|&[^;]+;)/g);var b=parseInt(c.length/2);return b>a?c.slice(0,a*2).join("")+"&hellip;":d}else{return d.length>a?d.substr(0,a)+"&hellip;":d}},time:function(b,d,c,a){if(typeof(a)=="undefined"){a=parseInt((new Date()).getTime()/1000)}return tagged.util.format.timespan(b-a,d,c)},timespan:function(c,b,a){return tagged.jst.util.format_timespan.render({t:c,max:b||"year",hide_past:a,cutoff:"year"})},formatTimestamp:function(g){var c=g*1000;var b=new Date(c);var a=b.getHours();var e=b.getMinutes();var d=b.getSeconds();var f="";f+=(a>12?a-12:a)+":";f+=("0"+e).slice(-2)+":";f+=("0"+d).slice(-2)+" ";f+=a>=12?"PM":"AM";return f}};tagged.namespace("apps.meetme.views");tagged.apps.meetme.views.SurveyPrompt=function(a){a=a||{};this.el=a.el||$('<div class="survey-prompt"><a href="#" class="container-close"></a><div class="content"></div></div>');this.onData=a.onData;this.template=a.template;this.content=this.el.find(".content");this.panel=new YAHOO.widget.Panel(this.el[0],{visible:false,width:470,close:true,fixedcenter:true,draggable:false,modal:true});this.panel.render(document.body);this.el.delegate(".feature","click",tagged.bind(this.onBuyClick,this))};tagged.apps.meetme.views.SurveyPrompt.prototype={render:function(b){this.source=b;var a=tagged.jst.apps.meetme.survey.render({source:this.source});this.content.html(a);this.busy=this.content.find(".busy");this.error=this.content.find(".error");return this},show:function(){this.panel.show();return this},hide:function(){this.panel.hide();return this},onBuyClick:function(a){if(this.source=="S"){window.open("http://www.surveymonkey.com/s/spotlighttagged","_blank")}if(this.source=="H"){window.open("https://www.surveymonkey.com/s/headliners","_blank")}this.panel.hide();return this}};tagged.namespace("jst.apps.meetme.headliner_buy");tagged.jst.apps.meetme.headliner_buy.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){s.push('<div class="hd">');s.push('Get Noticed in <span class="headliners-logo">Headliners</span>');s.push('</div><div class="bd">    ');if(type=="reup"||type=="buy"){s.push('        <img class="photo" src="');s.push(escapeHTML(photo));s.push('" alt="');s.push(escapeHTML(html_name));s.push('"/>        ');if(type=="reup"){s.push("            ");if(yes>=5){s.push('            <p class="message">');s.push(escapeHTML(sprintf("You received %s YES clicks while on Headliners.",yes)));s.push("</p>            ")}else{s.push('            <p class="message">');s.push(escapeHTML("You received lots of attention while on Headliners."));s.push("</p>            ")}s.push('            <p class="button_row">                <input type="button" class="feature blueBtnBig" value="');s.push(escapeHTML("Feature Me Again &gt;"));s.push('">            </p>        ')}else{s.push('            <p class="message">');s.push(escapeHTML(sprintf("Feature yourself in Headliners for %s Gold and get the attention you deserve",tagged.util.format.commify(goldAmount))));s.push('</p>            <p class="button_row">                <input type="button" class="feature blueBtnBig" value="');s.push(escapeHTML("Feature Me &gt;"));s.push('">            </p>        ')}s.push('        <div class="clear_both"></div>        <p class="error hide_me"></p>        <p class="help_row">            <span>');s.push(escapeHTML(sprintf("%s Gold will be debited from your account.",tagged.util.format.commify(goldAmount))));s.push('</span>            <a href="#" class="help strong">');s.push(escapeHTML("How it works"));s.push('</a>            <p class="help_text hide_me">                ');s.push(escapeHTML("Click the Feature Me button to be shown in Headliners.  You will be featured until 10 new additions are made to Headliners.  The amount of time you will be a Headliner will vary depending on site activity."));s.push("            </p>        </p>    ")}s.push('    <div class="busy" style="display:none;"></div></div>')}return s.join("")}catch(e){alert('template error in "apps/meetme/headliner_buy.jst":\n\n'+e)}return""};tagged.namespace("apps.meetme.views.headliners");tagged.apps.meetme.views.headliners.BuyPrompt=function(a){a=a||{};this.onData=a.onData;this.template=a.template;this.cost=a.cost||3000;this.strings=tagged.apps.meetme.headliners.strings.buy};tagged.apps.meetme.views.headliners.BuyPrompt.prototype={render:function(b){var a=tagged.jst.apps.meetme.headliner_buy.render(b);this.panel=tagged.modules.lightbox.init({body:a,width:"490px",position:"center",className:"buy-prompt"});$("a.help").on("click",$.proxy(this.onHelpClick,this));$(".feature").on("click",$.proxy(this.onBuyClick,this));this.surveyEnabled=b.surveyEnabled;this.cost=b.goldAmount;this.panel._dialog.delegate(".container-close","click",tagged.bind(function(){if(this.origin==="R"&&this.surveyEnabled){TAGGED.api.call({method:"tagged.apps.meetme.requestSendSurvey",source:"H",callback:{fn:function(c){if(c.stat==="ok"&&c.result.survey){this.surveyPrompt=new tagged.apps.meetme.views.SurveyPrompt();this.surveyPrompt.render("H");this.surveyPrompt.show()}},scope:this}})}},this));return this},show:function(a){this.origin=a;this.panel.show();return this},hide:function(){this.panel.hide();return this},onHelpClick:function(a){a.preventDefault();$("a.help").addClass("hide_me");$(".help_text").removeClass("hide_me")},onBuyClick:function(b){var a=this;b.preventDefault();$(".busy").show();$(".error").hide();TAGGED.api.call({method:"tagged.apps.meetme.buyHeadliner",cost:this.cost,origin:this.origin,callback:{fn:this.buyClickCallBack,scope:this}})},buyClickCallBack:function(c){$(".busy").hide();if(c.stat==="ok"){if(this.onData){this.onData(c.result.data)}TAGGED.header.updateHeaderGold(tagged.util.format.commify(c.result.gold));this.panel.hide()}else{if(c.stat==="fail"){var b=c.error.code;var a=b in this.strings.errors?this.strings.errors[b]:this.strings.errors.generic;$(".error").removeClass("hide_me").show();$(".error").html(a)}}}};tagged.namespace("jst.apps.meetme.spotlight_buy");tagged.jst.apps.meetme.spotlight_buy.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){s.push('<div class="hd spotlight">');s.push(escapeHTML(sprintf("Get noticed by %s!",pref)));s.push('</div><div class="bd">    ');if(type=="reup"||type=="buy"){s.push('        <img class="photo" src="');s.push(escapeHTML(photo));s.push('" alt="');s.push(escapeHTML(html_name));s.push('"/>        ');if(type=="reup"){s.push('            <h2 class="message">');s.push(escapeHTML("You are out of Spotlight views."));s.push('</h2>            <p class="message">');s.push(escapeHTML(sprintf("Get back into the Spotlight to be seen by %s %s for just %s Gold.",views,pref,goldAmount)));s.push('</p>            <p class="button_row">                <input type="button" class="feature greenBtnBig" value="');s.push(escapeHTML(sprintf("Get %s views &gt;",views)));s.push('">            </p>        ')}else{s.push('            <p class="message">');s.push(escapeHTML(sprintf("Step into the Spotlight to be seen by %s %s for just %s Gold.",views,pref,goldAmount)));s.push('</p>            <p class="button_row">                <input type="button" class="feature greenBtnBig" value="');s.push(escapeHTML(sprintf("Get %s views &gt;",views)));s.push('">            </p>        ')}s.push('        <div class="clear_both"></div>        <p class="error" style="display:none;"></p>        <p class="help_row">            <span>');s.push(escapeHTML(sprintf("%s Gold will be debited from your account.",goldAmount)));s.push('</span>            <a href="#" class="help">');s.push(escapeHTML("How it works"));s.push('</a>            <p class="help_text hide_me">                ');s.push(escapeHTML(sprintf("Click the Get %s views button and be shown in the Spotlight to %s %s.  You will also be able to see how many Yes clicks and Matches were generated from your Spotlights.",views,views,pref)));s.push("            </p>        </p>    ")}s.push('    <div class="busy" style="display:none;"></div></div>')}return s.join("")}catch(e){alert('template error in "apps/meetme/spotlight_buy.jst":\n\n'+e)}return""};tagged.namespace("apps.meetme.views.spotlight");tagged.apps.meetme.views.spotlight.BuyPrompt=function(a){a=a||{};this.el=a.el||$('<div class="buy-prompt"><a href="#" class="container-close"></a><div class="content"></div></div>');this.onData=a.onData;this.template=a.template;this.content=this.el.find(".content");this.strings=tagged.apps.meetme.spotlight.strings.buy;this.panel=new YAHOO.widget.Panel(this.el[0],{visible:false,width:470,close:true,fixedcenter:true,draggable:false,modal:true});this.panel.render(document.body);this.el.delegate("a.help","click",tagged.bind(this.onHelpClick,this));this.el.delegate(".feature","click",tagged.bind(this.onBuyClick,this))};tagged.apps.meetme.views.spotlight.BuyPrompt.prototype={render:function(b){this.cost=b.goldAmount;this.views=b.views;this.surveyEnabled=b.surveyEnabled;b.goldAmount=tagged.util.format.commify(b.goldAmount);var a=tagged.jst.apps.meetme.spotlight_buy.render(b);this.content.html(a);this.busy=this.content.find(".busy");this.error=this.content.find(".error");this.el.delegate(".container-close","click",tagged.bind(function(){if(this.origin=="R"&&this.surveyEnabled){TAGGED.api.call({method:"tagged.apps.meetme.requestSendSurvey",source:"S",callback:{fn:function(c){if(c.stat=="ok"&&c.result.survey){this.surveyPrompt=new tagged.apps.meetme.views.SurveyPrompt();this.surveyPrompt.render("S");this.surveyPrompt.show()}},scope:this}})}},this));return this},show:function(a){this.origin=a;this.panel.show();return this},hide:function(){this.panel.hide();return this},onHelpClick:function(a){a.preventDefault();this.el.find(".help").addClass("hide_me");this.el.find(".help_text").removeClass("hide_me")},onBuyClick:function(b){var a=this;b.preventDefault();this.busy.show();this.error.hide();TAGGED.api.call({method:"tagged.apps.meetme.buySpotlight",cost:this.cost,views:this.views,origin:this.origin,callback:{fn:function(e){a.busy.hide();if(e.stat=="ok"){TAGGED.header.updateHeaderGold(tagged.util.format.commify(e.result.gold));e.result.pref=game_data.spotlight.pref;e.result.stats=game_data.spotlight.stats;e.result.stats.count=e.result.count;tagged.apps.meetme.spotlight.renderCount(e.result);a.hide()}else{if(e.stat=="fail"){var d=e.error.code;var c=d in this.strings.errors?this.strings.errors[d]:this.strings.errors.generic;this.error.show().html(c)}}},scope:this}})}};tagged.namespace("header.alerts");tagged.header.alerts={menuEl:null,alertIconHTML:"",alertMenuOpen:false,requestInProgress:false,init:function(a){if(tagged.data.realtime_enabled){var b=TAGGED.api.defer}else{var b=(a&&a.result)?TAGGED.api.queue:TAGGED.api.defer}b.push({method:"tagged.header.renderAlerts",callback:"tagged.header.alerts.show"});if(tagged.data.realtime_enabled){tagged.realtime.register("alerts_update",{cb:this.updateAlerts,scope:this})}else{if(a&&a.result){TAGGED.api.dequeue();return}b.push({method:"tagged.util.echoIt",data:"",callback:"tagged.header.alerts.init"})}},navMenuCB:function(a,b){if(!this.navCBs){this.navCBs=[]}this.navCBs.push({cb:a,scope:b})},show:function(c){this.requestInProgress=false;var d="";var a=null;if(c&&c.stat&&c.stat=="ok"&&c.result&&c.result.icons){d=c.result.icons;if(c.result.drop_down){a=c.result.drop_down}if(c.result.lightbox){this._renderAlertsLightbox(c.result.lightbox)}}this._renderAlertIcons(d);var b=null;if(a){if(tagged.data.new_alert_menu){this._renderNewAlertsMenu(a)}else{this._renderAlertsMenu(a)}}else{if(b=$("#alerts-icon")){b.css("visibility","hidden")}}},updateAlerts:function(b){var a=b[b.length-1];if(a.alerts_updated&&!this.requestInProgress){this.requestInProgress=true;TAGGED.api.call({method:"tagged.header.renderAlerts",callback:{fn:this.show,scope:this}})}},_renderAlertIcons:function(b){var a=$("#header_alerts");if(a){a.css("display","block");a.html(b)}},_renderNewAlertsMenu:function(d){var a=[];for(key in d){a.push({type:key,className:"icon "+key,label:d[key].label||"",url:d[key].link||"#",onclick:null})}for(var b=0;this.navCBs&&b<this.navCBs.length;b++){var c=this.navCBs[b];c.cb.call(c.scope,a)}},_renderAlertsLightbox:function(c){for(var b in c){switch(b){case"meetme_headliner_reup":var a=new tagged.apps.meetme.views.headliners.BuyPrompt();a.render(c[b]).show("R");break;case"meetme_spotlight_reup":var a=new tagged.apps.meetme.views.spotlight.BuyPrompt();a.render(c[b]).show("R");break;case"promo_gold_reup":tagged.require("alert_lightbox").done(function(){var d=new tagged.promotions.BuyPrompt();d.render(c[b]).show()});break}}}};$(document).ready(function(){tagged.header.alerts.init(false)});var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());tagged.namespace("realtime");tagged.realtime={eventsHandlerTable:{},subscribeEvents:[],unsubscribeEvents:[],subscriptionTable:{},subscriptionGroups:{},registeredItems:0,requestObj:null,userId:null,nextEventId:null,iframe:null,nodeUrl:"",deferTime:200,debug:false,nodeFrameInit:false,disconnected:false,clientId:null,maxReconnectAttempts:50,attempts:0,init:function(){this.debug=tagged.data.realtime_debug;this.nodeUrl=tagged.data.node_url;if(!this.nodeUrl){this.disconnected=true}this.userId=tagged.data.user_id;this.nextEventId=tagged.data.next_event_id;this.clientId=tagged.data.clientId;var a=$("<iframe/>",{id:"node_iframe",src:"/realtime_iframe.html",css:{position:"absolute",top:0,left:0,width:1,height:1,visibility:"hidden"}}).prependTo(document.body);this.iframe=a[0];a.load($.proxy(this.initIframe,this))},initIframe:function(){this.iframe.contentWindow.NodeFrame.init(this,this.handleResponse);var a=window.setInterval(function(){if(tagged.realtime.subscribeEvents.length!=0){tagged.realtime.sendRequest("subscribe",{subscribeEvents:tagged.realtime.subscribeEvents})}else{if(tagged.realtime.registeredItems){tagged.realtime.sendRequest("register")}}if(tagged.realtime.unsubscribeEvents.length!=0){tagged.realtime.sendRequest("unsubscribe",{unsubscribeEvents:tagged.realtime.unsubscribeEvents})}tagged.realtime.nodeFrameInit=true;window.clearInterval(a)},this.deferTime)},iframeReady:function(a){a.init(this,this.handleResponse);this.nodeFrameInit=true},subscribe:function(c,b,f,g){var a=[];if($.isArray(c)){var h=c;for(var e=0;e<h.length;e++){g=h[e].group||"all";var d="pubsub_"+h[e].topic;this._subscribeTopic(h[e].topic,h[e].prevMsgs,h[e].cbObj,g,d);this._registerEvent(d,h[e].cbObj);if(this.nodeFrameInit){a.push({topic:h[e].topic,eventType:d,prevMsgs:h[e].prevMsgs})}}}else{g=g||"all";var d="pubsub_"+c;this._subscribeTopic(c,b,f,g,d);this._registerEvent(d,f);if(this.nodeFrameInit){a.push({topic:c,eventType:d,prevMsgs:b})}}if(this.nodeFrameInit){this.sendRequest("subscribe",{subscribeEvents:a})}},_subscribeTopic:function(b,a,e,d,c){if(!(b in this.subscriptionTable)){this.subscriptionTable[b]={}}this.subscriptionTable[b][e]=true;if(!(d in this.subscriptionGroups)){this.subscriptionGroups[d]=[]}this.subscriptionGroups[d].push({topic:b,msgCb:e});this.subscribeEvents.push({topic:b,eventType:c,prevMsgs:a})},unsubscribe:function(a,c){var b="pubsub_"+a;this.unregister(b,c);if(!(a in this.subscriptionTable)){return}delete this.subscriptionTable[a][c];if($.isEmptyObject(this.subscriptionTable[a])){this.unsubscribeEvents.push({topic:a});if(this.nodeFrameInit){this.sendRequest("unsubscribe",{unsubscribeEvents:[{topic:a}]})}delete this.subscriptionTable[a]}},unsubscribeGroup:function(b){if(!(b in this.subscriptionGroups)){return}for(var a=0;a<this.subscriptionGroups[b].length;a++){this.unsubscribe(this.subscriptionGroups[b][a].topic,this.subscriptionGroups[b][a].msgCb)}delete this.subscriptionGroups[b]},isRegistered:function(b,c){var a=this.eventsHandlerTable[b];return a&&$.inArray(c,a)!==-1},register:function(b,c){if($.isArray(b)){var d=b;for(var a=0;a<d.length;a++){this._registerEvent(d[a].eventType,d[a].cbObj)}}else{this._registerEvent(b,c)}if(this.nodeFrameInit){this.sendRequest("register")}},_registerEvent:function(a,b){if(this.eventsHandlerTable[a]){this.eventsHandlerTable[a].push(b)}else{this.eventsHandlerTable[a]=[b]}this.registeredItems++},unregister:function(c,d){var b=this.eventsHandlerTable[c];if(b){var a=$.inArray(d,b);if(a!==-1){b.splice(a,1);this.registeredItems--}}if($.isEmptyObject(this.eventsHandlerTable[c])){delete this.eventsHandlerTable[c]}},sendRequest:function(d,e){this.consoleLog("sendRequest()");this.registerTimestamp=(new Date()).getTime();var c={"X-T-Uid":this.userId,user_id:this.userId,session_token:tagged.data.session_token,next_event_id:this.nextEventId,clientId:this.clientId,timestamp:this.registerTimestamp};switch(d){case"subscribe":c.subscribeEvents=JSON.stringify(e.subscribeEvents);case"register":var b=[];for(i in this.eventsHandlerTable){b.push(i)}c.event_types=JSON.stringify(b);break;case"unsubscribe":c.unsubscribeEvents=JSON.stringify(e.unsubscribeEvents);break}var a={};a.data=c;a.url=this.nodeUrl+"/"+d;this.requestObj=this.iframe.contentWindow.NodeFrame.sendRequest(a)},handleResponse:function(a){this.consoleLog("handleResponse()");this.consoleLog(a);if(a){if(a.success){if(a.data){if(this.registerTimestamp!=a.data.timestamp){return}this.nextEventId=a.data.next_event_id;var d=a.data.events_data;var j={};for(var c=0;c<d.length;c++){var b=d[c].event_type;if(j[b]){j[b].push(d[c].event_data)}else{j[b]=[d[c].event_data]}}for(type in j){var h=this.eventsHandlerTable[type];if(h){for(var c=0;c<h.length;c++){var f=h[c];try{f.cb.call(f.scope,j[type],f.args)}catch(g){}}}}}this.disconnected=false;this.sendRequest("register")}else{if(a.error&&a.data&&a.data.message){this.disconnected=true;this.consoleLog("Realtime error: "+a.data.message);this.reconnect()}}}else{this.disconnected=true;this.consoleLog("Realtime error: General Node API failure");this.reconnect()}},reconnect:function(){this.consoleLog("Attempting to reconnect to Realtime push");var a={method:"tagged.util.realtimeReconnect",callback:{fn:function(b){if((b.stat=="ok")&&b.result&&b.result.success&&(this.attempts++<this.maxReconnectAttempts)){this.nextEventId=b.result.next_event_id;this.clientId=b.result.client_id;tagged.data.session_token=b.result.session_token;if(this.subscribeEvents.length){this.sendRequest("subscribe",{subscribeEvents:this.subscribeEvents})}else{if(this.registeredItems){this.sendRequest("register")}}if(this.unsubscribeEvents.length){this.sendRequest("unsubscribe",{unsubscribeEvents:this.unsubscribeEvents})}}},scope:this}};TAGGED.api.call(a)},consoleLog:function(a){if(this.debug&&typeof(console)!="undefined"){window.console.log(a)}}};$(document).ready(function(){tagged.realtime.init()});tagged.namespace("messages_delta.count");tagged.messages_delta.count={total:0,nav_message:$("#nav_message"),count_badge:$('<span class="badge badge-error hide_me"></span>'),init:function(){if(tagged.data.newMessagesEnabled){tagged.realtime.register("toast_update",{cb:this.incrementMessageCount,scope:this});this.nav_message.append(this.count_badge);this.getUnreadMessageCount()}},getUnreadMessageCount:function(){var a={method:"tagged.im.getUnreadMessageCount",callback:{fn:function(b){if(b.stat!=="fail"){this.setUnreadMessageCount(b.result)}},scope:this}};if(tagged.data.newMessagesEnabled){TAGGED.api.call(a)}},incrementMessageCount:function(){var b=o[o.length-1];var c=b.sub_type;if((c=="message")){var a=b.sender_uid==tagged.data.user_id;if(a){return}this.total++;this.renderBadge()}},setUnreadMessageCount:function(a){this.total=a;this.renderBadge()},renderBadge:function(){if(this.total>0){if(this.total<100){this.count_badge.html(this.total)}else{this.count_badge.html("99+")}this.nav_message.addClass("has_alert");this.count_badge.removeClass("hide_me")}else{this.nav_message.removeClass("has_alert");this.count_badge.addClass("hide_me")}}};$(document).ready(function(){tagged.messages_delta.count.init()});