YAHOO.namespace("util");YAHOO.util.Cookie={_createCookieString:function(f,d,e,a){var b=YAHOO.lang,c=encodeURIComponent(f)+"="+(e?encodeURIComponent(d):d);if(b.isObject(a)){if(a.expires instanceof Date){c+="; expires="+a.expires.toUTCString()}if(b.isString(a.path)&&a.path!==""){c+="; path="+a.path}if(b.isString(a.domain)&&a.domain!==""){c+="; domain="+a.domain}if(a.secure===true){c+="; secure"}}return c},_createCookieHashString:function(d){var b=YAHOO.lang;if(!b.isObject(d)){throw new TypeError("Cookie._createCookieHashString(): Argument must be an object.")}var c=[];for(var a in d){if(b.hasOwnProperty(d,a)&&!b.isFunction(d[a])&&!b.isUndefined(d[a])){c.push(encodeURIComponent(a)+"="+encodeURIComponent(String(d[a])))}}return c.join("&")},_parseCookieHash:function(c){var d=c.split("&"),b=null,e={};if(c.length>0){for(var f=0,a=d.length;f<a;f++){b=d[f].split("=");e[decodeURIComponent(b[0])]=decodeURIComponent(b[1])}}return e},_parseCookieString:function(f,d){var e={};if(YAHOO.lang.isString(f)&&f.length>0){var c=(d===false?function(l){return l}:decodeURIComponent);var h=f.split(/;\s/g),g=null,b=null,k=null;for(var a=0,j=h.length;a<j;a++){k=h[a].match(/([^=]+)=/i);if(k instanceof Array){try{g=decodeURIComponent(k[1]);b=c(h[a].substring(k[1].length+1))}catch(i){}}else{g=decodeURIComponent(h[a]);b=""}e[g]=b}}return e},exists:function(a){if(!YAHOO.lang.isString(a)||a===""){throw new TypeError("Cookie.exists(): Cookie name must be a non-empty string.")}var b=this._parseCookieString(document.cookie,true);return b.hasOwnProperty(a)},get:function(e,a){var b=YAHOO.lang,d;if(b.isFunction(a)){d=a;a={}}else{if(b.isObject(a)){d=a.converter}else{a={}}}var c=this._parseCookieString(document.cookie,!a.raw);if(!b.isString(e)||e===""){throw new TypeError("Cookie.get(): Cookie name must be a non-empty string.")}if(b.isUndefined(c[e])){return null}if(!b.isFunction(d)){return c[e]}else{return d(c[e])}},getSub:function(a,d,e){var b=YAHOO.lang,c=this.getSubs(a);if(c!==null){if(!b.isString(d)||d===""){throw new TypeError("Cookie.getSub(): Subcookie name must be a non-empty string.")}if(b.isUndefined(c[d])){return null}if(!b.isFunction(e)){return c[d]}else{return e(c[d])}}else{return null}},getSubs:function(c){var a=YAHOO.lang.isString;if(!a(c)||c===""){throw new TypeError("Cookie.getSubs(): Cookie name must be a non-empty string.")}var b=this._parseCookieString(document.cookie,false);if(a(b[c])){return this._parseCookieHash(b[c])}return null},remove:function(b,a){if(!YAHOO.lang.isString(b)||b===""){throw new TypeError("Cookie.remove(): Cookie name must be a non-empty string.")}a=YAHOO.lang.merge(a||{},{expires:new Date(0)});return this.set(b,"",a)},removeSub:function(f,c,a){var b=YAHOO.lang;a=a||{};if(!b.isString(f)||f===""){throw new TypeError("Cookie.removeSub(): Cookie name must be a non-empty string.")}if(!b.isString(c)||c===""){throw new TypeError("Cookie.removeSub(): Subcookie name must be a non-empty string.")}var d=this.getSubs(f);if(b.isObject(d)&&b.hasOwnProperty(d,c)){delete d[c];if(!a.removeIfEmpty){return this.setSubs(f,d,a)}else{for(var e in d){if(b.hasOwnProperty(d,e)&&!b.isFunction(d[e])&&!b.isUndefined(d[e])){return this.setSubs(f,d,a)}}return this.remove(f,a)}}else{return""}},set:function(e,d,a){var b=YAHOO.lang;a=a||{};if(!b.isString(e)){throw new TypeError("Cookie.set(): Cookie name must be a string.")}if(b.isUndefined(d)){throw new TypeError("Cookie.set(): Value cannot be undefined.")}var c=this._createCookieString(e,d,!a.raw,a);document.cookie=c;return c},setSub:function(f,d,e,a){var b=YAHOO.lang;if(!b.isString(f)||f===""){throw new TypeError("Cookie.setSub(): Cookie name must be a non-empty string.")}if(!b.isString(d)||d===""){throw new TypeError("Cookie.setSub(): Subcookie name must be a non-empty string.")}if(b.isUndefined(e)){throw new TypeError("Cookie.setSub(): Subcookie value cannot be undefined.")}var c=this.getSubs(f);if(!b.isObject(c)){c={}}c[d]=e;return this.setSubs(f,c,a)},setSubs:function(e,d,a){var b=YAHOO.lang;if(!b.isString(e)){throw new TypeError("Cookie.setSubs(): Cookie name must be a string.")}if(!b.isObject(d)){throw new TypeError("Cookie.setSubs(): Cookie value must be an object.")}var c=this._createCookieString(e,this._createCookieHashString(d),false,a);document.cookie=c;return c}};YAHOO.register("cookie",YAHOO.util.Cookie,{version:"2.8.0r4",build:"2449"});tagged.extend("header",{newUserStatus:null,updateHeaderGold:function(a){if($("#header_gold_amount")){$("#header_gold_amount").text(a)}}});YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,startEvent:new YAHOO.util.CustomEvent("start"),completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(a){this._msxml_progid.unshift(a)},setDefaultPostHeader:function(a){if(typeof a=="string"){this._default_post_header=a}else{if(typeof a=="boolean"){this._use_default_post_header=a}}},setDefaultXhrHeader:function(a){if(typeof a=="string"){this._default_xhr_header=a}else{this._use_default_xhr_header=a}},setPollingInterval:function(a){if(typeof a=="number"&&isFinite(a)){this._polling_interval=a}},createXhrObject:function(b){var d,a,f;try{a=new XMLHttpRequest();d={conn:a,tId:b,xhr:true}}catch(e){for(f=0;f<this._msxml_progid.length;++f){try{a=new ActiveXObject(this._msxml_progid[f]);d={conn:a,tId:b,xhr:true};break}catch(c){}}}finally{return d}},getConnectionObject:function(a){var c,b=this._transaction_id;try{if(!a){c=this.createXhrObject(b)}else{c={tId:b};if(a==="xdr"){c.conn=this._transport;c.xdr=true}else{if(a==="upload"){c.upload=true}}}if(c){this._transaction_id++}}catch(d){}return c},asyncRequest:function(b,e,c,a){var d,f,g=(c&&c.argument)?c.argument:null;if(this._isFileUpload){f="upload"}else{if(c.xdr){f="xdr"}}d=this.getConnectionObject(f);if(!d){return null}else{if(c&&c.customevents){this.initCustomEvents(d,c)}if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(d,c,e,a);return d}if(b.toUpperCase()=="GET"){if(this._sFormData.length!==0){e+=((e.indexOf("?")==-1)?"?":"&")+this._sFormData}}else{if(b.toUpperCase()=="POST"){a=a?this._sFormData+"&"+a:this._sFormData}}}if(b.toUpperCase()=="GET"&&(c&&c.cache===false)){e+=((e.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString()}if(this._use_default_xhr_header){if(!this._default_headers["X-Requested-With"]){this.initHeader("X-Requested-With",this._default_xhr_header,true)}}if((b.toUpperCase()==="POST"&&this._use_default_post_header)&&this._isFormSubmit===false){this.initHeader("Content-Type",this._default_post_header)}if(d.xdr){this.xdr(d,b,e,c,a);return d}d.conn.open(b,e,true);if(this._has_default_headers||this._has_http_headers){this.setHeader(d)}this.handleReadyState(d,c);d.conn.send(a||"");if(this._isFormSubmit===true){this.resetFormState()}this.startEvent.fire(d,g);if(d.startEvent){d.startEvent.fire(d,g)}return d}},initCustomEvents:function(a,b){var c;for(c in b.customevents){if(this._customEvents[c][0]){a[this._customEvents[c][0]]=new YAHOO.util.CustomEvent(this._customEvents[c][1],(b.scope)?b.scope:null);a[this._customEvents[c][0]].subscribe(b.customevents[c])}}},handleReadyState:function(c,b){var d=this,a=(b&&b.argument)?b.argument:null;if(b&&b.timeout){this._timeOut[c.tId]=window.setTimeout(function(){d.abort(c,b,true)},b.timeout)}this._poll[c.tId]=window.setInterval(function(){if(c.conn&&c.conn.readyState===4){window.clearInterval(d._poll[c.tId]);delete d._poll[c.tId];if(b&&b.timeout){window.clearTimeout(d._timeOut[c.tId]);delete d._timeOut[c.tId]}d.completeEvent.fire(c,a);if(c.completeEvent){c.completeEvent.fire(c,a)}d.handleTransactionResponse(c,b)}},this._polling_interval)},handleTransactionResponse:function(c,f,a){var j,d,h=(f&&f.argument)?f.argument:null,b=(c.r&&c.r.statusText==="xdr:success")?true:false,g=(c.r&&c.r.statusText==="xdr:failure")?true:false,e=a;try{if((c.conn.status!==undefined&&c.conn.status!==0)||b){j=c.conn.status}else{if(g&&!e){j=0}else{j=13030}}}catch(i){j=13030}if((j>=200&&j<300)||j===1223||b){d=c.xdr?c.r:this.createResponseObject(c,h);if(f&&f.success){if(!f.scope){f.success(d)}else{f.success.apply(f.scope,[d])}}this.successEvent.fire(d);if(c.successEvent){c.successEvent.fire(d)}}else{switch(j){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:d=this.createExceptionObject(c.tId,h,(a?a:false));if(f&&f.failure){if(!f.scope){f.failure(d)}else{f.failure.apply(f.scope,[d])}}break;default:d=(c.xdr)?c.response:this.createResponseObject(c,h);if(f&&f.failure){if(!f.scope){f.failure(d)}else{f.failure.apply(f.scope,[d])}}}this.failureEvent.fire(d);if(c.failureEvent){c.failureEvent.fire(d)}}this.releaseObject(c);d=null},createResponseObject:function(d,g){var a={},e={},i,b,h,c;try{b=d.conn.getAllResponseHeaders();h=b.split("\n");for(i=0;i<h.length;i++){c=h[i].indexOf(":");if(c!=-1){e[h[i].substring(0,c)]=YAHOO.lang.trim(h[i].substring(c+2))}}}catch(f){}a.tId=d.tId;a.status=(d.conn.status==1223)?204:d.conn.status;a.statusText=(d.conn.status==1223)?"No Content":d.conn.statusText;a.getResponseHeader=e;a.getAllResponseHeaders=b;a.responseText=d.conn.responseText;a.responseXML=d.conn.responseXML;if(g){a.argument=g}return a},createExceptionObject:function(b,f,a){var d=0,c="communication failure",g=-1,h="transaction aborted",e={};e.tId=b;if(a){e.status=g;e.statusText=h}else{e.status=d;e.statusText=c}if(f){e.argument=f}return e},initHeader:function(a,b,c){var d=(c)?this._default_headers:this._http_headers;d[a]=b;if(c){this._has_default_headers=true}else{this._has_http_headers=true}},setHeader:function(a){var b;if(this._has_default_headers){for(b in this._default_headers){if(YAHOO.lang.hasOwnProperty(this._default_headers,b)){a.conn.setRequestHeader(b,this._default_headers[b])}}}if(this._has_http_headers){for(b in this._http_headers){if(YAHOO.lang.hasOwnProperty(this._http_headers,b)){a.conn.setRequestHeader(b,this._http_headers[b])}}this._http_headers={};this._has_http_headers=false}},resetDefaultHeaders:function(){this._default_headers={};this._has_default_headers=false},abort:function(d,b,a){var e,g=(b&&b.argument)?b.argument:null;d=d||{};if(d.conn){if(d.xhr){if(this.isCallInProgress(d)){d.conn.abort();window.clearInterval(this._poll[d.tId]);delete this._poll[d.tId];if(a){window.clearTimeout(this._timeOut[d.tId]);delete this._timeOut[d.tId]}e=true}}else{if(d.xdr){d.conn.abort(d.tId);e=true}}}else{if(d.upload){var f="yuiIO"+d.tId;var c=document.getElementById(f);if(c){YAHOO.util.Event.removeListener(c,"load");document.body.removeChild(c);if(a){window.clearTimeout(this._timeOut[d.tId]);delete this._timeOut[d.tId]}e=true}}else{e=false}}if(e===true){this.abortEvent.fire(d,g);if(d.abortEvent){d.abortEvent.fire(d,g)}this.handleTransactionResponse(d,b,true)}return e},isCallInProgress:function(a){a=a||{};if(a.xhr&&a.conn){return a.conn.readyState!==4&&a.conn.readyState!==0}else{if(a.xdr&&a.conn){return a.conn.isCallInProgress(a.tId)}else{if(a.upload===true){return document.getElementById("yuiIO"+a.tId)?true:false}else{return false}}}},releaseObject:function(a){if(a&&a.conn){a.conn=null;a=null}}};(function(){var c=YAHOO.util.Connect,b={};function f(k){var j='<object id="YUIConnectionSwf" type="application/x-shockwave-flash" data="'+k+'" width="0" height="0"><param name="movie" value="'+k+'"><param name="allowScriptAccess" value="always"></object>',i=document.createElement("div");document.body.appendChild(i);i.innerHTML=j}function h(i,l,k,m,j){b[parseInt(i.tId)]={o:i,c:m};if(j){m.method=l;m.data=j}i.conn.send(k,m,i.tId)}function e(i){f(i);c._transport=document.getElementById("YUIConnectionSwf")}function g(){c.xdrReadyEvent.fire()}function a(i,j){if(i){c.startEvent.fire(i,j.argument);if(i.startEvent){i.startEvent.fire(i,j.argument)}}}function d(j){var i=b[j.tId].o,k=b[j.tId].c;if(j.statusText==="xdr:start"){a(i,k);return}j.responseText=decodeURI(j.responseText);i.r=j;if(k.argument){i.r.argument=k.argument}this.handleTransactionResponse(i,k,j.statusText==="xdr:abort"?true:false);delete b[j.tId]}c.xdr=h;c.swf=f;c.transport=e;c.xdrReadyEvent=new YAHOO.util.CustomEvent("xdrReady");c.xdrReady=g;c.handleXdrResponse=d})();(function(){var e=YAHOO.util.Connect,c=YAHOO.util.Event;e._isFormSubmit=false;e._isFileUpload=false;e._formNode=null;e._sFormData=null;e._submitElementValue=null;e.uploadEvent=new YAHOO.util.CustomEvent("upload"),e._hasSubmitListener=function(){if(c){c.addListener(document,"click",function(h){var i=c.getTarget(h),j=i.nodeName.toLowerCase();if((j==="input"||j==="button")&&(i.type&&i.type.toLowerCase()=="submit")){e._submitElementValue=encodeURIComponent(i.name)+"="+encodeURIComponent(i.value)}});return true}return false}();function b(k,p,u){var l,v,m,o,h,n=false,r=[],i=0,s,q,t,j,w;this.resetFormState();if(typeof k=="string"){l=(document.getElementById(k)||document.forms[k])}else{if(typeof k=="object"){l=k}else{return}}if(p){this.createFrame(u?u:null);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=l;return}for(s=0,q=l.elements.length;s<q;++s){v=l.elements[s];h=v.disabled;m=v.name;if(!h&&m){m=encodeURIComponent(m)+"=";o=encodeURIComponent(v.value);switch(v.type){case"select-one":if(v.selectedIndex>-1){w=v.options[v.selectedIndex];r[i++]=m+encodeURIComponent((w.attributes.value&&w.attributes.value.specified)?w.value:w.text)}break;case"select-multiple":if(v.selectedIndex>-1){for(t=v.selectedIndex,j=v.options.length;t<j;++t){w=v.options[t];if(w.selected){r[i++]=m+encodeURIComponent((w.attributes.value&&w.attributes.value.specified)?w.value:w.text)}}}break;case"radio":case"checkbox":if(v.checked){r[i++]=m+o}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(n===false){if(this._hasSubmitListener&&this._submitElementValue){r[i++]=this._submitElementValue}n=true}break;default:r[i++]=m+o}}}this._isFormSubmit=true;this._sFormData=r.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData}function f(){this._isFormSubmit=false;this._isFileUpload=false;this._formNode=null;this._sFormData=""}function g(j){var i="yuiIO"+this._transaction_id,h;if(YAHOO.env.ua.ie){h=document.createElement('<iframe id="'+i+'" name="'+i+'" />');if(typeof j=="boolean"){h.src="javascript:false"}}else{h=document.createElement("iframe");h.id=i;h.name=i}h.style.position="absolute";h.style.top="-1000px";h.style.left="-1000px";document.body.appendChild(h)}function d(l){var i=[],k=l.split("&"),j,h;for(j=0;j<k.length;j++){h=k[j].indexOf("=");if(h!=-1){i[j]=document.createElement("input");i[j].type="hidden";i[j].name=decodeURIComponent(k[j].substring(0,h));i[j].value=decodeURIComponent(k[j].substring(h+1));this._formNode.appendChild(i[j])}}return i}function a(t,i,s,u){var n="yuiIO"+t.tId,m="multipart/form-data",k=document.getElementById(n),r=(document.documentMode&&document.documentMode===8)?true:false,h=this,l=(i&&i.argument)?i.argument:null,j,o,v,p,w,q;w={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",s);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",n);if(YAHOO.env.ua.ie&&!r){this._formNode.setAttribute("encoding",m)}else{this._formNode.setAttribute("enctype",m)}if(u){j=this.appendPostData(u)}this._formNode.submit();this.startEvent.fire(t,l);if(t.startEvent){t.startEvent.fire(t,l)}if(i&&i.timeout){this._timeOut[t.tId]=window.setTimeout(function(){h.abort(t,i,true)},i.timeout)}if(j&&j.length>0){for(o=0;o<j.length;o++){this._formNode.removeChild(j[o])}}for(v in w){if(YAHOO.lang.hasOwnProperty(w,v)){if(w[v]){this._formNode.setAttribute(v,w[v])}else{this._formNode.removeAttribute(v)}}}this.resetFormState();q=function(){if(i&&i.timeout){window.clearTimeout(h._timeOut[t.tId]);delete h._timeOut[t.tId]}h.completeEvent.fire(t,l);if(t.completeEvent){t.completeEvent.fire(t,l)}p={tId:t.tId,argument:i.argument};try{p.responseText=k.contentWindow.document.body?k.contentWindow.document.body.innerHTML:k.contentWindow.document.documentElement.textContent;p.responseXML=k.contentWindow.document.XMLDocument?k.contentWindow.document.XMLDocument:k.contentWindow.document}catch(x){}if(i&&i.upload){if(!i.scope){i.upload(p)}else{i.upload.apply(i.scope,[p])}}h.uploadEvent.fire(p);if(t.uploadEvent){t.uploadEvent.fire(p)}c.removeListener(k,"load",q);setTimeout(function(){document.body.removeChild(k);h.releaseObject(t)},100)};c.addListener(k,"load",q)}e.setForm=b;e.resetFormState=f;e.createFrame=g;e.appendPostData=d;e.uploadFile=a})();YAHOO.register("connection",YAHOO.util.Connect,{version:"2.8.0r4",build:"2449"});(function(){var l=YAHOO.lang,isFunction=l.isFunction,isObject=l.isObject,isArray=l.isArray,_toStr=Object.prototype.toString,Native=(YAHOO.env.ua.caja?window:this).JSON,_UNICODE_EXCEPTIONS=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_ESCAPES=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,_VALUES=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_BRACKETS=/(?:^|:|,)(?:\s*\[)+/g,_UNSAFE=/^[\],:{}\s]*$/,_SPECIAL_CHARS=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_CHARS={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},UNDEFINED="undefined",OBJECT="object",NULL="null",STRING="string",NUMBER="number",BOOLEAN="boolean",DATE="date",_allowable={"undefined":UNDEFINED,string:STRING,"[object String]":STRING,number:NUMBER,"[object Number]":NUMBER,"boolean":BOOLEAN,"[object Boolean]":BOOLEAN,"[object Date]":DATE,"[object RegExp]":OBJECT},EMPTY="",OPEN_O="{",CLOSE_O="}",OPEN_A="[",CLOSE_A="]",COMMA=",",COMMA_CR=",\n",CR="\n",COLON=":",COLON_SP=": ",QUOTE='"';Native=_toStr.call(Native)==="[object JSON]"&&Native;function _char(c){if(!_CHARS[c]){_CHARS[c]="\\u"+("0000"+(+(c.charCodeAt(0))).toString(16)).slice(-4)}return _CHARS[c]}function _revive(data,reviver){var walk=function(o,key){var k,v,value=o[key];if(value&&typeof value==="object"){for(k in value){if(l.hasOwnProperty(value,k)){v=walk(value,k);if(v===undefined){delete value[k]}else{value[k]=v}}}}return reviver.call(o,key,value)};return typeof reviver==="function"?walk({"":data},""):data}function _prepare(s){return s.replace(_UNICODE_EXCEPTIONS,_char)}function _isSafe(str){return l.isString(str)&&_UNSAFE.test(str.replace(_ESCAPES,"@").replace(_VALUES,"]").replace(_BRACKETS,""))}function _parse(s,reviver){s=_prepare(s);if(_isSafe(s)){return _revive(eval("("+s+")"),reviver)}throw new SyntaxError("JSON.parse")}function _type(o){var t=typeof o;return _allowable[t]||_allowable[_toStr.call(o)]||(t===OBJECT?(o?OBJECT:NULL):UNDEFINED)}function _string(s){return QUOTE+s.replace(_SPECIAL_CHARS,_char)+QUOTE}function _indent(s,space){return s.replace(/^/gm,space)}function _stringify(o,w,space){if(o===undefined){return undefined}var replacer=isFunction(w)?w:null,format=_toStr.call(space).match(/String|Number/)||[],_date=YAHOO.lang.JSON.dateToString,stack=[],tmp,i,len;if(replacer||!isArray(w)){w=undefined}if(w){tmp={};for(i=0,len=w.length;i<len;++i){tmp[w[i]]=true}w=tmp}space=format[0]==="Number"?new Array(Math.min(Math.max(0,space),10)+1).join(" "):(space||EMPTY).slice(0,10);function _serialize(h,key){var value=h[key],t=_type(value),a=[],colon=space?COLON_SP:COLON,arr,i,keys,k,v;if(isObject(value)&&isFunction(value.toJSON)){value=value.toJSON(key)}else{if(t===DATE){value=_date(value)}}if(isFunction(replacer)){value=replacer.call(h,key,value)}if(value!==h[key]){t=_type(value)}switch(t){case DATE:case OBJECT:break;case STRING:return _string(value);case NUMBER:return isFinite(value)?value+EMPTY:NULL;case BOOLEAN:return value+EMPTY;case NULL:return NULL;default:return undefined}for(i=stack.length-1;i>=0;--i){if(stack[i]===value){throw new Error("JSON.stringify. Cyclical reference")}}arr=isArray(value);stack.push(value);if(arr){for(i=value.length-1;i>=0;--i){a[i]=_serialize(value,i)||NULL}}else{keys=w||value;i=0;for(k in keys){if(keys.hasOwnProperty(k)){v=_serialize(value,k);if(v){a[i++]=_string(k)+colon+v}}}}stack.pop();if(space&&a.length){return arr?OPEN_A+CR+_indent(a.join(COMMA_CR),space)+CR+CLOSE_A:OPEN_O+CR+_indent(a.join(COMMA_CR),space)+CR+CLOSE_O}else{return arr?OPEN_A+a.join(COMMA)+CLOSE_A:OPEN_O+a.join(COMMA)+CLOSE_O}}return _serialize({"":o},"")}YAHOO.lang.JSON={useNativeParse:!!Native,useNativeStringify:!!Native,isSafe:function(s){return _isSafe(_prepare(s))},parse:function(s,reviver){return Native&&YAHOO.lang.JSON.useNativeParse?Native.parse(s,reviver):_parse(s,reviver)},stringify:function(o,w,space){return Native&&YAHOO.lang.JSON.useNativeStringify?Native.stringify(o,w,space):_stringify(o,w,space)},dateToString:function(d){function _zeroPad(v){return v<10?"0"+v:v}return d.getUTCFullYear()+"-"+_zeroPad(d.getUTCMonth()+1)+"-"+_zeroPad(d.getUTCDate())+"T"+_zeroPad(d.getUTCHours())+COLON+_zeroPad(d.getUTCMinutes())+COLON+_zeroPad(d.getUTCSeconds())+"Z"},stringToDate:function(str){var m=str.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?Z$/);if(m){var d=new Date();d.setUTCFullYear(m[1],m[2]-1,m[3]);d.setUTCHours(m[4],m[5],m[6],(m[7]||0));return d}return str}};YAHOO.lang.JSON.isValid=YAHOO.lang.JSON.isSafe})();YAHOO.register("json",YAHOO.lang.JSON,{version:"2.8.0r4",build:"2449"});tagged.namespace("security.nobot");tagged.security.nobot={trigger:function(response,callObj){var newCallObj={method:"tagged.security.nobot.submitAnswer",answer:eval(response.result.jsfunc),origCallObj:YAHOO.lang.JSON.stringify(response.result.origCallObj)};if(callObj){newCallObj.callback=callObj.callback}TAGGED.api.call(newCallObj)}};/*!
 * jQuery UI 1.8.11
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(a,c){a.ui=a.ui||{};if(a.ui.version){return}a.extend(a.ui,{version:"1.8.11",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(d,e){return typeof d==="number"?this.each(function(){var f=this;setTimeout(function(){a(f).focus();if(e){e.call(f)}},d)}):this._focus.apply(this,arguments)},scrollParent:function(){var d;if((a.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){d=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(a.curCSS(this,"position",1))&&(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}else{d=this.parents().filter(function(){return(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!d.length?a(document):d},zIndex:function(g){if(g!==c){return this.css("zIndex",g)}if(this.length){var e=a(this[0]),d,f;while(e.length&&e[0]!==document){d=e.css("position");if(d==="absolute"||d==="relative"||d==="fixed"){f=parseInt(e.css("zIndex"),10);if(!isNaN(f)&&f!==0){return f}}e=e.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(d){d.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(f,d){var e=d==="Width"?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};function h(l,k,i,m){a.each(e,function(){k-=parseFloat(a.curCSS(l,"padding"+this,true))||0;if(i){k-=parseFloat(a.curCSS(l,"border"+this+"Width",true))||0}if(m){k-=parseFloat(a.curCSS(l,"margin"+this,true))||0}});return k}a.fn["inner"+d]=function(i){if(i===c){return j["inner"+d].call(this)}return this.each(function(){a(this).css(g,h(this,i)+"px")})};a.fn["outer"+d]=function(i,k){if(typeof i!=="number"){return j["outer"+d].call(this,i)}return this.each(function(){a(this).css(g,h(this,i,true,k)+"px")})}});function b(d){return !a(d).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.extend(a.expr[":"],{data:function(f,e,d){return !!a.data(f,d[3])},focusable:function(f){var i=f.nodeName.toLowerCase(),d=a.attr(f,"tabindex");if("area"===i){var h=f.parentNode,g=h.name,e;if(!f.href||!g||h.nodeName.toLowerCase()!=="map"){return false}e=a("img[usemap=#"+g+"]")[0];return !!e&&b(e)}return(/input|select|textarea|button|object/.test(i)?!f.disabled:"a"==i?f.href||!isNaN(d):!isNaN(d))&&b(f)},tabbable:function(e){var d=a.attr(e,"tabindex");return(isNaN(d)||d>=0)&&a(e).is(":focusable")}});a(function(){var d=document.body,e=d.appendChild(e=document.createElement("div"));a.extend(e.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=e.offsetHeight===100;a.support.selectstart="onselectstart" in e;d.removeChild(e).style.display="none"});a.extend(a.ui,{plugin:{add:function(e,f,h){var g=a.ui[e].prototype;for(var d in h){g.plugins[d]=g.plugins[d]||[];g.plugins[d].push([f,h[d]])}},call:function(d,f,e){var h=d.plugins[f];if(!h||!d.element[0].parentNode){return}for(var g=0;g<h.length;g++){if(d.options[h[g][0]]){h[g][1].apply(d.element,e)}}}},contains:function(e,d){return document.compareDocumentPosition?e.compareDocumentPosition(d)&16:e!==d&&e.contains(d)},hasScroll:function(g,e){if(a(g).css("overflow")==="hidden"){return false}var d=(e&&e==="left")?"scrollLeft":"scrollTop",f=false;if(g[d]>0){return true}g[d]=1;f=(g[d]>0);g[d]=0;return f},isOverAxis:function(e,d,f){return(e>d)&&(e<(d+f))},isOver:function(i,e,h,g,d,f){return a.ui.isOverAxis(i,h,d)&&a.ui.isOverAxis(e,g,f)}})})(jQuery);/*!
 * jQuery UI Widget 1.8.11
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,d){if(b.cleanData){var c=b.cleanData;b.cleanData=function(e){for(var f=0,g;(g=e[f])!=null;f++){b(g).triggerHandler("remove")}c(e)}}else{var a=b.fn.remove;b.fn.remove=function(e,f){return this.each(function(){if(!f){if(!e||b.filter(e,[this]).length){b("*",this).add([this]).each(function(){b(this).triggerHandler("remove")})}}return a.call(b(this),e,f)})}}b.widget=function(f,h,e){var g=f.split(".")[0],j;f=f.split(".")[1];j=g+"-"+f;if(!e){e=h;h=b.Widget}b.expr[":"][j]=function(k){return !!b.data(k,f)};b[g]=b[g]||{};b[g][f]=function(k,l){if(arguments.length){this._createWidget(k,l)}};var i=new h();i.options=b.extend(true,{},i.options);b[g][f].prototype=b.extend(true,i,{namespace:g,widgetName:f,widgetEventPrefix:b[g][f].prototype.widgetEventPrefix||f,widgetBaseClass:j},e);b.widget.bridge(f,b[g][f])};b.widget.bridge=function(f,e){b.fn[f]=function(i){var g=typeof i==="string",h=Array.prototype.slice.call(arguments,1),j=this;i=!g&&h.length?b.extend.apply(null,[true,i].concat(h)):i;if(g&&i.charAt(0)==="_"){return j}if(g){this.each(function(){var k=b.data(this,f),l=k&&b.isFunction(k[i])?k[i].apply(k,h):k;if(l!==k&&l!==d){j=l;return false}})}else{this.each(function(){var k=b.data(this,f);if(k){k.option(i||{})._init()}else{b.data(this,f,new e(i,this))}})}return j}};b.Widget=function(e,f){if(arguments.length){this._createWidget(e,f)}};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(f,g){b.data(g,this.widgetName,this);this.element=b(g);this.options=b.extend(true,{},this.options,this._getCreateOptions(),f);var e=this;this.element.bind("remove."+this.widgetName,function(){e.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(f,g){var e=f;if(arguments.length===0){return b.extend({},this.options)}if(typeof f==="string"){if(g===d){return this.options[f]}e={};e[f]=g}this._setOptions(e);return this},_setOptions:function(f){var e=this;b.each(f,function(g,h){e._setOption(g,h)});return this},_setOption:function(e,f){this.options[e]=f;if(e==="disabled"){this.widget()[f?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",f)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(f,g,h){var k=this.options[f];g=b.Event(g);g.type=(f===this.widgetEventPrefix?f:this.widgetEventPrefix+f).toLowerCase();h=h||{};if(g.originalEvent){for(var e=b.event.props.length,j;e;){j=b.event.props[--e];g[j]=g.originalEvent[j]}}this.element.trigger(g,h);return !(b.isFunction(k)&&k.call(this.element[0],g,h)===false||g.isDefaultPrevented())}}})(jQuery);/*!
 * jQuery UI Position 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function(e,c){e.ui=e.ui||{};var j,k=Math.max,o=Math.abs,m=Math.round,d=/left|center|right/,h=/top|center|bottom/,a=/[\+\-]\d+%?/,l=/^\w+/,b=/%$/,g=e.fn.position;function n(r,q,p){return[parseInt(r[0],10)*(b.test(r[0])?q/100:1),parseInt(r[1],10)*(b.test(r[1])?p/100:1)]}function i(p,q){return parseInt(e.css(p,q),10)||0}function f(q){var p=q[0];if(p.nodeType===9){return{width:q.width(),height:q.height(),offset:{top:0,left:0}}}if(e.isWindow(p)){return{width:q.width(),height:q.height(),offset:{top:q.scrollTop(),left:q.scrollLeft()}}}if(p.preventDefault){return{width:0,height:0,offset:{top:p.pageY,left:p.pageX}}}return{width:q.outerWidth(),height:q.outerHeight(),offset:q.offset()}}e.position={scrollbarWidth:function(){if(j!==c){return j}var q,p,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=s.children()[0];e("body").append(s);q=r.offsetWidth;s.css("overflow","scroll");p=r.offsetWidth;if(q===p){p=s[0].clientWidth}s.remove();return(j=q-p)},getScrollInfo:function(t){var s=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),q=s==="scroll"||(s==="auto"&&t.width<t.element[0].scrollWidth),p=r==="scroll"||(r==="auto"&&t.height<t.element[0].scrollHeight);return{width:q?e.position.scrollbarWidth():0,height:p?e.position.scrollbarWidth():0}},getWithinInfo:function(q){var r=e(q||window),p=e.isWindow(r[0]);return{element:r,isWindow:p,offset:r.offset()||{left:0,top:0},scrollLeft:r.scrollLeft(),scrollTop:r.scrollTop(),width:p?r.width():r.outerWidth(),height:p?r.height():r.outerHeight()}}};e.fn.position=function(z){if(!z||!z.of){return g.apply(this,arguments)}z=e.extend({},z);var A,w,u,y,t,p,v=e(z.of),s=e.position.getWithinInfo(z.within),q=e.position.getScrollInfo(s),x=(z.collision||"flip").split(" "),r={};p=f(v);if(v[0].preventDefault){z.at="left top"}w=p.width;u=p.height;y=p.offset;t=e.extend({},y);e.each(["my","at"],function(){var D=(z[this]||"").split(" "),C,B;if(D.length===1){D=d.test(D[0])?D.concat(["center"]):h.test(D[0])?["center"].concat(D):["center","center"]}D[0]=d.test(D[0])?D[0]:"center";D[1]=h.test(D[1])?D[1]:"center";C=a.exec(D[0]);B=a.exec(D[1]);r[this]=[C?C[0]:0,B?B[0]:0];z[this]=[l.exec(D[0])[0],l.exec(D[1])[0]]});if(x.length===1){x[1]=x[0]}if(z.at[0]==="right"){t.left+=w}else{if(z.at[0]==="center"){t.left+=w/2}}if(z.at[1]==="bottom"){t.top+=u}else{if(z.at[1]==="center"){t.top+=u/2}}A=n(r.at,w,u);t.left+=A[0];t.top+=A[1];return this.each(function(){var C,L,E=e(this),G=E.outerWidth(),D=E.outerHeight(),F=i(this,"marginLeft"),B=i(this,"marginTop"),K=G+F+i(this,"marginRight")+q.width,J=D+B+i(this,"marginBottom")+q.height,H=e.extend({},t),I=n(r.my,E.outerWidth(),E.outerHeight());if(z.my[0]==="right"){H.left-=G}else{if(z.my[0]==="center"){H.left-=G/2}}if(z.my[1]==="bottom"){H.top-=D}else{if(z.my[1]==="center"){H.top-=D/2}}H.left+=I[0];H.top+=I[1];if(!e.support.offsetFractions){H.left=m(H.left);H.top=m(H.top)}C={marginLeft:F,marginTop:B};e.each(["left","top"],function(N,M){if(e.ui.position[x[N]]){e.ui.position[x[N]][M](H,{targetWidth:w,targetHeight:u,elemWidth:G,elemHeight:D,collisionPosition:C,collisionWidth:K,collisionHeight:J,offset:[A[0]+I[0],A[1]+I[1]],my:z.my,at:z.at,within:s,elem:E})}});if(z.using){L=function(P){var R=y.left-H.left,O=R+w-G,Q=y.top-H.top,N=Q+u-D,M={target:{element:v,left:y.left,top:y.top,width:w,height:u},element:{element:E,left:H.left,top:H.top,width:G,height:D},horizontal:O<0?"left":R>0?"right":"center",vertical:N<0?"top":Q>0?"bottom":"middle"};if(w<G&&o(R+O)<w){M.horizontal="center"}if(u<D&&o(Q+N)<u){M.vertical="middle"}if(k(o(R),o(O))>k(o(Q),o(N))){M.important="horizontal"}else{M.important="vertical"}z.using.call(this,P,M)}}E.offset(e.extend(H,{using:L}))})};e.ui.position={fit:{left:function(t,s){var r=s.within,v=r.isWindow?r.scrollLeft:r.offset.left,x=r.width,u=t.left-s.collisionPosition.marginLeft,w=v-u,q=u+s.collisionWidth-x-v,p;if(s.collisionWidth>x){if(w>0&&q<=0){p=t.left+w+s.collisionWidth-x-v;t.left+=w-p}else{if(q>0&&w<=0){t.left=v}else{if(w>q){t.left=v+x-s.collisionWidth}else{t.left=v}}}}else{if(w>0){t.left+=w}else{if(q>0){t.left-=q}else{t.left=k(t.left-u,t.left)}}}},top:function(s,r){var q=r.within,w=q.isWindow?q.scrollTop:q.offset.top,x=r.within.height,u=s.top-r.collisionPosition.marginTop,v=w-u,t=u+r.collisionHeight-x-w,p;if(r.collisionHeight>x){if(v>0&&t<=0){p=s.top+v+r.collisionHeight-x-w;s.top+=v-p}else{if(t>0&&v<=0){s.top=w}else{if(v>t){s.top=w+x-r.collisionHeight}else{s.top=w}}}}else{if(v>0){s.top+=v}else{if(t>0){s.top-=t}else{s.top=k(s.top-u,s.top)}}}}},flip:{left:function(v,u){var t=u.within,z=t.offset.left+t.scrollLeft,C=t.width,r=t.isWindow?t.scrollLeft:t.offset.left,w=v.left-u.collisionPosition.marginLeft,A=w-r,q=w+u.collisionWidth-C-r,y=u.my[0]==="left"?-u.elemWidth:u.my[0]==="right"?u.elemWidth:0,B=u.at[0]==="left"?u.targetWidth:u.at[0]==="right"?-u.targetWidth:0,s=-2*u.offset[0],p,x;if(A<0){p=v.left+y+B+s+u.collisionWidth-C-z;if(p<0||p<o(A)){v.left+=y+B+s}}else{if(q>0){x=v.left-u.collisionPosition.marginLeft+y+B+s-r;if(x>0||o(x)<q){v.left+=y+B+s}}}},top:function(u,t){var s=t.within,B=s.offset.top+s.scrollTop,C=s.height,p=s.isWindow?s.scrollTop:s.offset.top,w=u.top-t.collisionPosition.marginTop,y=w-p,v=w+t.collisionHeight-C-p,z=t.my[1]==="top",x=z?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,D=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,r=-2*t.offset[1],A,q;if(y<0){q=u.top+x+D+r+t.collisionHeight-C-B;if((u.top+x+D+r)>y&&(q<0||q<o(y))){u.top+=x+D+r}}else{if(v>0){A=u.top-t.collisionPosition.marginTop+x+D+r-p;if((u.top+x+D+r)>v&&(A>0||o(A)<v)){u.top+=x+D+r}}}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments);e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments);e.ui.position.fit.top.apply(this,arguments)}}};(function(){var t,v,q,s,r,p=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(p?"div":"body");q={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(p){e.extend(q,{position:"absolute",left:"-1000px",top:"-1000px"})}for(r in q){t.style[r]=q[r]}t.appendChild(u);v=p||document.documentElement;v.insertBefore(t,v.firstChild);u.style.cssText="position: absolute; left: 10.7432222px;";s=e(u).offset().left;e.support.offsetFractions=s>10&&s<11;t.innerHTML="";v.removeChild(t)})()}(jQuery));(function(d,e){var b="ui-dialog ui-widget ui-widget-content ui-corner-all ",a={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},c={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};d.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",collision:"fit",using:function(g){var f=d(this).css(g).offset().top;if(f<0){d(this).css("top",g.top-f)}}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string"){this.originalTitle=""}this.options.title=this.options.title||this.originalTitle;var n=this,o=n.options,l=o.title||"&#160;",g=d.ui.dialog.getTitleId(n.element),m=(n.uiDialog=d("<div></div>")).appendTo(document.body).hide().addClass(b+o.dialogClass).css({zIndex:o.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(p){if(o.closeOnEscape&&p.keyCode&&p.keyCode===d.ui.keyCode.ESCAPE){n.close(p);p.preventDefault()}}).attr({role:"dialog","aria-labelledby":g}).mousedown(function(p){n.moveToTop(false,p)}),i=n.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(m),h=(n.uiDialogTitlebar=d("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(m),k=d('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){k.addClass("ui-state-hover")},function(){k.removeClass("ui-state-hover")}).focus(function(){k.addClass("ui-state-focus")}).blur(function(){k.removeClass("ui-state-focus")}).click(function(p){n.close(p);return false}).appendTo(h),j=(n.uiDialogTitlebarCloseText=d("<span></span>")).addClass("ui-icon ui-icon-closethick").text(o.closeText).appendTo(k),f=d("<span></span>").addClass("ui-dialog-title").attr("id",g).html(l).prependTo(h);if(d.isFunction(o.beforeclose)&&!d.isFunction(o.beforeClose)){o.beforeClose=o.beforeclose}h.find("*").add(h).disableSelection();if(o.draggable&&d.fn.draggable){n._makeDraggable()}if(o.resizable&&d.fn.resizable){n._makeResizable()}n._createButtons(o.buttons);n._isOpen=false;if(d.fn.bgiframe){m.bgiframe()}},_init:function(){if(this.options.autoOpen){this.open()}},destroy:function(){var f=this;if(f.overlay){f.overlay.destroy()}f.uiDialog.hide();f.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");f.uiDialog.remove();if(f.originalTitle){f.element.attr("title",f.originalTitle)}return f},widget:function(){return this.uiDialog},close:function(i){var f=this,h,g;if(false===f._trigger("beforeClose",i)){return}if(f.overlay){f.overlay.destroy()}f.uiDialog.unbind("keypress.ui-dialog");f._isOpen=false;if(f.options.hide){f.uiDialog.hide(f.options.hide,function(){f._trigger("close",i)})}else{f.uiDialog.hide();f._trigger("close",i)}d.ui.dialog.overlay.resize();if(f.options.modal){h=0;d(".ui-dialog").each(function(){if(this!==f.uiDialog[0]){g=d(this).css("z-index");if(!isNaN(g)){h=Math.max(h,g)}}});d.ui.dialog.maxZ=h}return f},isOpen:function(){return this._isOpen},moveToTop:function(j,i){var f=this,h=f.options,g;if((h.modal&&!j)||(!h.stack&&!h.modal)){return f._trigger("focus",i)}if(h.zIndex>d.ui.dialog.maxZ){d.ui.dialog.maxZ=h.zIndex}if(f.overlay){d.ui.dialog.maxZ+=1;f.overlay.$el.css("z-index",d.ui.dialog.overlay.maxZ=d.ui.dialog.maxZ)}g={scrollTop:f.element.attr("scrollTop"),scrollLeft:f.element.attr("scrollLeft")};d.ui.dialog.maxZ+=1;f.uiDialog.css("z-index",d.ui.dialog.maxZ);f.element.attr(g);f._trigger("focus",i);return f},open:function(){if(this._isOpen){return}var g=this,h=g.options,f=g.uiDialog;g.overlay=h.modal?new d.ui.dialog.overlay(g):null;g._size();g._position(h.position);f.show(h.show);g.moveToTop(true);if(h.modal){f.bind("keypress.ui-dialog",function(k){if(k.keyCode!==d.ui.keyCode.TAB){return}var j=d(":tabbable",this),l=j.filter(":first"),i=j.filter(":last");if(k.target===i[0]&&!k.shiftKey){l.focus(1);return false}else{if(k.target===l[0]&&k.shiftKey){i.focus(1);return false}}})}d(g.element.find(":tabbable").get().concat(f.find(".ui-dialog-buttonpane :tabbable").get().concat(f.get()))).eq(0).focus();g._isOpen=true;g._trigger("open");return g},_createButtons:function(i){var h=this,f=false,g=d("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),j=d("<div></div>").addClass("ui-dialog-buttonset").appendTo(g);h.uiDialog.find(".ui-dialog-buttonpane").remove();if(typeof i==="object"&&i!==null){d.each(i,function(){return !(f=true)})}if(f){d.each(i,function(k,m){m=d.isFunction(m)?{click:m,text:k}:m;var l=d('<button type="button"></button>').attr(m,true).unbind("click").click(function(){m.click.apply(h.element[0],arguments)}).appendTo(j);if(d.fn.button){l.button()}});g.appendTo(h.uiDialog)}},_makeDraggable:function(){var f=this,i=f.options,j=d(document),h;function g(k){return{position:k.position,offset:k.offset}}f.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(k,l){h=i.height==="auto"?"auto":d(this).height();d(this).height(d(this).height()).addClass("ui-dialog-dragging");f._trigger("dragStart",k,g(l))},drag:function(k,l){f._trigger("drag",k,g(l))},stop:function(k,l){i.position=[l.position.left-j.scrollLeft(),l.position.top-j.scrollTop()];d(this).removeClass("ui-dialog-dragging").height(h);f._trigger("dragStop",k,g(l));d.ui.dialog.overlay.resize()}})},_makeResizable:function(k){k=(k===e?this.options.resizable:k);var g=this,j=g.options,f=g.uiDialog.css("position"),i=(typeof k==="string"?k:"n,e,s,w,se,sw,ne,nw");function h(l){return{originalPosition:l.originalPosition,originalSize:l.originalSize,position:l.position,size:l.size}}g.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:g.element,maxWidth:j.maxWidth,maxHeight:j.maxHeight,minWidth:j.minWidth,minHeight:g._minHeight(),handles:i,start:function(l,m){d(this).addClass("ui-dialog-resizing");g._trigger("resizeStart",l,h(m))},resize:function(l,m){g._trigger("resize",l,h(m))},stop:function(l,m){d(this).removeClass("ui-dialog-resizing");j.height=d(this).height();j.width=d(this).width();g._trigger("resizeStop",l,h(m));d.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var f=this.options;if(f.height==="auto"){return f.minHeight}else{return Math.min(f.minHeight,f.height)}},_position:function(g){var h=[],i=[0,0],f;if(g){if(typeof g==="string"||(typeof g==="object"&&"0" in g)){h=g.split?g.split(" "):[g[0],g[1]];if(h.length===1){h[1]=h[0]}d.each(["left","top"],function(k,j){if(+h[k]===h[k]){i[k]=h[k];h[k]=j}});g={my:h.join(" "),at:h.join(" "),offset:i.join(" ")}}g=d.extend({},d.ui.dialog.prototype.options.position,g)}else{g=d.ui.dialog.prototype.options.position}f=this.uiDialog.is(":visible");if(!f){this.uiDialog.show()}this.uiDialog.css({top:0,left:0}).position(d.extend({of:window},g));if(!f){this.uiDialog.hide()}},_setOptions:function(i){var g=this,f={},h=false;d.each(i,function(j,k){g._setOption(j,k);if(j in a){h=true}if(j in c){f[j]=k}});if(h){this._size()}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option",f)}},_setOption:function(i,j){var g=this,f=g.uiDialog;switch(i){case"beforeclose":i="beforeClose";break;case"buttons":g._createButtons(j);break;case"closeText":g.uiDialogTitlebarCloseText.text(""+j);break;case"dialogClass":f.removeClass(g.options.dialogClass).addClass(b+j);break;case"disabled":if(j){f.addClass("ui-dialog-disabled")}else{f.removeClass("ui-dialog-disabled")}break;case"draggable":var h=f.is(":data(draggable)");if(h&&!j){f.draggable("destroy")}if(!h&&j){g._makeDraggable()}break;case"position":g._position(j);break;case"resizable":var k=f.is(":data(resizable)");if(k&&!j){f.resizable("destroy")}if(k&&typeof j==="string"){f.resizable("option","handles",j)}if(!k&&j!==false){g._makeResizable(j)}break;case"title":d(".ui-dialog-title",g.uiDialogTitlebar).html(""+(j||"&#160;"));break}d.Widget.prototype._setOption.apply(g,arguments)},_size:function(){var j=this.options,g,i,f=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(j.minWidth>j.width){j.width=j.minWidth}g=this.uiDialog.css({height:"auto",width:j.width}).height();i=Math.max(0,j.minHeight-g);if(j.height==="auto"){if(d.support.minHeight){this.element.css({minHeight:i,height:"auto"})}else{this.uiDialog.show();var h=this.element.css("height","auto").height();if(!f){this.uiDialog.hide()}this.element.height(Math.max(h,i))}}else{this.element.height(Math.max(j.height-g,0))}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}}});d.extend(d.ui.dialog,{version:"1.8.11",uuid:0,maxZ:0,getTitleId:function(f){var g=f.attr("id");if(!g){this.uuid+=1;g=this.uuid}return"ui-dialog-title-"+g},overlay:function(f){this.$el=d.ui.dialog.overlay.create(f)}});d.extend(d.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:d.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(f){return f+".dialog-overlay"}).join(" "),create:function(g){if(this.instances.length===0){setTimeout(function(){if(d.ui.dialog.overlay.instances.length){d(document).bind(d.ui.dialog.overlay.events,function(h){if(d(h.target).zIndex()<d.ui.dialog.overlay.maxZ){return false}})}},1);d(document).bind("keydown.dialog-overlay",function(h){if(g.options.closeOnEscape&&h.keyCode&&h.keyCode===d.ui.keyCode.ESCAPE){g.close(h);h.preventDefault()}});d(window).bind("resize.dialog-overlay",d.ui.dialog.overlay.resize)}var f=(this.oldInstances.pop()||d("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});if(d.fn.bgiframe){f.bgiframe()}this.instances.push(f);return f},destroy:function(f){var g=d.inArray(f,this.instances);if(g!=-1){this.oldInstances.push(this.instances.splice(g,1)[0])}if(this.instances.length===0){d([document,window]).unbind(".dialog-overlay")}f.remove();var h=0;d.each(this.instances,function(){h=Math.max(h,this.css("z-index"))});this.maxZ=h},height:function(){var g,f;if(d.browser.msie&&d.browser.version<7){g=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);f=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(g<f){return d(window).height()+"px"}else{return g+"px"}}else{return d(document).height()+"px"}},width:function(){var f,g;if(d.browser.msie&&d.browser.version<7){f=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);g=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(f<g){return d(window).width()+"px"}else{return f+"px"}}else{return d(document).width()+"px"}},resize:function(){var f=d([]);d.each(d.ui.dialog.overlay.instances,function(){f=f.add(this)});f.css({width:0,height:0}).css({width:d.ui.dialog.overlay.width(),height:d.ui.dialog.overlay.height()})}});d.extend(d.ui.dialog.overlay.prototype,{destroy:function(){d.ui.dialog.overlay.destroy(this.$el)}})}(jQuery));function str_repeat(b,a){for(var c=[];a>0;c[--a]=b){}return(c.join(""))}function sprintf(){var h=0,l,j=arguments[h++],d=[],e,b,k,n;var q=j;if(typeof arguments[1]=="object"){var g=arguments[1];return q.replace(/%\(([^)]+)\)/g,function(c,a){return g[a]})}while(j){if(e=/^[^\x25]+/.exec(j)){d.push(e[0])}else{if(e=/^\x25{2}/.exec(j)){d.push("%")}else{if(e=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(j)){var r=e[1]||h++;if(r>=arguments.length){throw ("Too few arguments: "+q)}var l=arguments[r];switch(e[7]){case"b":l=parseInt(l);l=l.toString(2);break;case"c":l=String.fromCharCode(l);break;case"d":l=parseInt(l);break;case"e":l=parseFloat(l);l=e[6]?l.toExponential(e[6]):l.toExponential();break;case"f":l=e[6]?parseFloat(l).toFixed(e[6]):parseFloat(l);break;case"o":l=parseInt(l);l=l.toString(8);break;case"s":l=((l=String(l))&&e[6]?l.substring(0,e[6]):l);break;case"u":l=Math.abs(l);break;case"x":l=parseInt(l);l=l.toString(16);break;case"X":l=parseInt(l);l=l.toString(16).toUpperCase();break}l=(/[def]/.test(e[7])&&e[2]&&l>0?"+"+l:l);k=e[3]?e[3]=="0"?"0":e[3].charAt(1):" ";n=e[5]-String(l).length;b=e[5]?str_repeat(k,n):"";d.push(e[4]?l+b:b+l)}else{throw ("Huh ?!")}}}j=j.substring(e[0].length)}return d.join("")}function vsprintf(b,a){return sprintf.apply(this,[b].concat(a))};tagged.namespace("modules.lightbox");tagged.modules.lightbox={_shell:"<div>%s</div>",_dialog:null,_config:null,_parentEl:null,init:function(b){if(!(b&&b.body)){return false}if(!this._parentEl){this._parentEl=$("<div class='dialog-parent'></div>");$(document.body).append(this._parentEl)}this._config=b;var a=sprintf(this._shell,b.body);this._parentEl.html(a);this._dialog=$(this._parentEl).dialog({modal:true,resizable:false,closeOnEscape:true,draggable:false,position:b.position||"center",autoOpen:false,title:b.title,width:b.width||"auto",height:b.height||"auto",minHeight:b.minHeight||150,dialogClass:b.className||"",zIndex:b.zIndex||1002});$(this.getDialogDom()).addClass("tagged_lightbox");if(typeof b.closeOnEscape!=="undefined"){this._dialog.dialog("option","closeOnEscape",b.closeOnEscape)}if(!b.title){$(".ui-dialog-titlebar").css("background","none");this._dialog.css("margin-top",0)}$(window).resize(function(){tagged.modules.lightbox.reposition("center","center",this)});if(b.className){this._dialog.dialog("option","dialogClass",b.className)}this.setEventHandlers();if(typeof b.notshow==="undefined"||!b.notshow){this.show()}return this},setEventHandlers:function(){if(this._config.destroyOnClose){this._dialog.bind("dialogclose",$.proxy(function(b,a){this.destroy()},this))}},setBody:function(a){if(this._dialog){this._dialog.html(a)}},getBodyEl:function(a){return this._parentEl},setHeight:function(a){if(this._dialog){this._dialog.dialog("option","height",a)}},setTitle:function(a){if(this._dialog){this._dialog.dialog("option","title",a)}},getDialogDom:function(){if(this._dialog){return this._dialog.dialog("widget")}return false},show:function(){if(this._dialog){this._dialog.dialog("open")}},reposition:function(b,a,c){if(this._dialog){this._dialog.dialog("widget").position({my:b,at:a,of:c})}},center:function(){if(this._dialog){this._dialog.dialog("option","position","center")}},setCss:function(a,b){if(this._dialog){this._dialog.dialog("widget").css(a,b)}},setBodyCss:function(a,b){if(this._dialog){this._dialog.css(a,b)}},hide:function(){if(this._dialog){this._dialog.dialog("close")}},destroy:function(){if(this._dialog){this._dialog.dialog("destroy")}},registerCallback:function(a,b){switch(a){case"close":this._dialog.bind("dialogclose",$.proxy(function(d,c){b()},this));break}}};tagged.namespace("security.password");tagged.security.password={cancel_response:{stat:"cancel"},trigger:function(a,b){if(a.stat!="password"||!a.result){return}this.callObj=b;this.origCallObj=JSON.stringify(a.result.origCallObj);this.panel=tagged.modules.lightbox.init({body:a.result.passwordPromptHtml,width:"338px",closeOnEscape:true,className:"password_panel",position:"center",zIndex:10000,title:this.strings.header});$("#password_cancel").click($.proxy(this.cancel,this))},submit:function(a){var b={method:"tagged.security.verifyPassword",password:a,origCallObj:this.origCallObj};if(this.callObj){b.callback=this.callObj.callback}TAGGED.api.call(b);this.panel.destroy()},cancel:function(e){e.preventDefault();var callback=this.callObj.callback;if(callback.fn){callback.fn.call(callback.scope,this.cancel_response,callback.args)}else{eval(callback+"("+YAHOO.lang.JSON.stringify(this.cancel_response)+");")}this.panel.destroy()}};tagged.namespace("security.captcha");tagged.security.captcha={panel:null,trigger:function(b,c){if(b.stat!="security"||!b.result){return}this.callObj=c;this.origCallObj=JSON.stringify(b.result.origCallObj);tagged.security.captcha.panel=tagged.modules.lightbox.init({body:b.result.captchaHtml,width:"338px",closeOnEscape:true,className:"captcha_lightbox",position:"center",zIndex:10000});Recaptcha.create(b.result.recaptchaKey,"recaptcha_div",{theme:"white",callback:Recaptcha.focus_response_field});var a=this;$("#captcha_cancel").on("click",function(d){a.cancel(d)})},submit:function(b,c,a){var d={method:"tagged.security.verifyRecaptcha",challenge:b,response:c,code:a,origCallObj:this.origCallObj};if(this.callObj){d.callback=this.callObj.callback}TAGGED.api.call(d);tagged.security.captcha.panel.destroy()},cancel:function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}var cancel_response={stat:"fail",result:{}};var callback=this.callObj.callback;if(callback.fn){callback.fn.call(callback.scope,cancel_response,callback.args)}else{eval(callback+"("+YAHOO.lang.JSON.stringify(cancel_response)+");")}tagged.security.captcha.panel.destroy()}};TAGGED.namespace("api");TAGGED.api={format:"json",_login_regex_match:/\\"error\\":{\\"code\\":11,.*}/,_login_regex_match2:/^login status: -1000$/,errorResponse:{stat:"fail",error:{code:-1}},errorResponseBC:'({stat: "fail", error: {code: -1}})',queue:[],_deferQueueTime:300,defer:[],_deferTimer:null,_trackedRequests:{},_requestsLUT:{},alertOnError:true,redirectOnNotLoggedIn:true,autoQueue:false,autoQueueWaitTime:0,autoQueueBundles:2,autoQueueMinBundleSize:3,dequeue:function(){var a=this.queue;this.queue=[];if(a.length){this.call(a)}},deferDequeue:function(){if((this.queue.length+this.defer.length)<=1){this.startDefer({result:this._deferQueueTime});return}this.queue=this.queue.concat(this.defer);this.defer=[];this.dequeue()},handleDefer:function(){this.stopDefer();if(!this.defer.length||this.defer[this.defer.length-1].callback!="TAGGED.api.startDefer"){this.defer.push({method:"tagged.util.echoIt",data:this._deferQueueTime,callback:"TAGGED.api.startDefer"})}this.deferDequeue()},startDefer:function(a){var b=0;if(a){if(a.stat=="fail"){return}if(a.result){b=a.result}else{b=a}}if(YAHOO.lang.isString(b)){b=parseInt(b)}if(!YAHOO.lang.isNumber(b)){b=0}if(b>0){this.stopDefer();this._deferTimer=window.setTimeout("TAGGED.api.handleDefer()",1000*b)}else{this.handleDefer()}},stopDefer:function(){if(!this._deferTimer){return}window.clearTimeout(this._deferTimer);this._deferTimer=null},call:function(a,c){var b="auto_queue" in a?a.auto_queue:this.autoQueue;if(b){this.queue=this.queue.concat(YAHOO.lang.isArray(a)?a:[a]);if(!this.autoQueueWait){this.autoQueueWait=true;setTimeout(tagged.bind(function(){this.autoQueueWait=false;var e=Math.max(Math.ceil(this.queue.length/this.autoQueueBundles),this.autoQueueMinBundleSize);for(var d=0;d<this.autoQueueBundles&&this.queue.length;d++){this._call(this.queue.splice(0,e))}},this),this.autoQueueWaitTime)}}else{this._call(a,c)}},_call:function(l,h){if("auto_queue" in l){var b=l.auto_queue;delete l.auto_queue}else{var b=this.autoQueue}if(this.queue.length&&!h&&YAHOO.lang.isObject(l)&&!b){if(YAHOO.lang.isArray(l)){for(var e=0,j=l.length;e<j;++e){this.queue.push(l[e])}}else{this.queue.push(l)}this.dequeue();return}if(l.timeout){TAGGED.api.callback.timeout=l.timeout;delete l.timeout}else{TAGGED.api.callback.timeout=false}var a="\n";var f={application_id:"user",format:this.format};if(this.getQueryStringParameter("no_cache")||this.getQueryStringParameter("clear_cache")){f.no_cache="1"}var k=this.getQueryStringParameter("loc");if(!k){k=this.getQueryStringParameter("locale")}if(k){f.locale=k}if(l.constructor==Array){var d=tagged.clone(l);for(var e=0,g=l.length;e<g;++e){if(l[e].constructor==String){a+=l[e]+"\n"}else{if(typeof(l[e].callback)=="object"){delete l[e].callback}a+=TAGGED.api.createQueryString(l[e],true)+"\n"}}}else{if(l.constructor==String){var d=l;a+=l+"\n"}else{var d={};YAHOO.lang.augmentObject(d,l);if(typeof(l.callback)=="object"){delete l.callback}a+=TAGGED.api.createQueryString(l,true)+"\n"}}f.session_token=YAHOO.util.Cookie.get("S");TAGGED.api.callback.argument=h;var c=YAHOO.util.Connect.asyncRequest("POST","/api/?"+TAGGED.api.createQueryString(f),TAGGED.api.callback,a);if(tagged.performance){tagged.performance.addXHR(c,a)}this.pushRequestLUT(c.tId,d);return c},callback:{success:function(a){if(!a||!a.responseText){if(tagged.performance){tagged.performance.updateXHRQueue()}TAGGED.api.evalResponse(a,true)}if(tagged.performance){tagged.performance.removeXHR(a)}if(a.responseText.search(TAGGED.api._login_regex_match)>=0){TAGGED.api.handleNotLoggedIn(a)}if(a.responseText.search(TAGGED.api._login_regex_match2)>=0){window.location=window.location.href}else{if(tagged.diagnostics){tagged.diagnostics.findApiData(a.responseText)}TAGGED.api.evalResponse(a)}if(a.argument){a.argument()}},failure:function(a){if(tagged.performance){tagged.performance.updateXHRQueue()}TAGGED.api.evalResponse(a,true);if(a.argument){a.argument()}}},recall:function(a,b){if(b==null||b==""){b="default"}if(TAGGED.api._trackedRequests[b]!=null){YAHOO.util.Connect.abort(TAGGED.api._trackedRequests[b]);TAGGED.api._trackedRequests[b]=null}TAGGED.api._trackedRequests[b]=TAGGED.api.call(a)},nullResponseHandler:function(){},createQueryString:function(b,a){var c="";if(a){b.api_signature="";if(tagged.guid){b.track=tagged.guid}if(b.method){c+="method="+encodeURIComponent(b.method)+"&";delete b.method}else{alert(TAGGED.api.strings.errorMethodMissing);return""}}for(i in b){c+=encodeURIComponent(i)+"="+encodeURIComponent(b[i])+"&"}if(c.length){return c.substr(0,c.length-1)}return c},pushRequestLUT:function(e,c){var d=function(h){var f=h.indexOf("callback=")+9;var g=h.slice(f,h.indexOf("&",f));return{callback:g}};if(YAHOO.lang.isArray(c)){this._requestsLUT[e]=[];for(var b=0,a=c.length;b<a;++b){if(YAHOO.lang.isString(c[b])){this._requestsLUT[e].push(d(c[b]))}else{this._requestsLUT[e].push(c[b])}}}else{if(YAHOO.lang.isString(c)){this._requestsLUT[e]=[d(c)]}else{this._requestsLUT[e]=[c]}}},popRequestLUT:function(b){var a=this._requestsLUT[b];delete this._requestsLUT[b];return a},evalResponse:function(o,isError){var requestCalls=this.popRequestLUT(o.tId);if(!requestCalls||!requestCalls.length){return}TAGGED.api.errorResponse.rawError=null;if(!isError){try{if(!o.responseText){isError=true}else{if(this.format=="jsonp"){eval(o.responseText);return}else{var requestData=eval(o.responseText);if(requestCalls.length!=requestData.length){isError=true}}}}catch(e){isError=true;if(!tagged.data.hideAlert&&this.alertOnError){alert(TAGGED.api.strings.errorGeneral)}TAGGED.api.errorResponse.rawError=o.responseText}}for(var i=0;i<requestCalls.length;i++){var _request=requestCalls[i];if(typeof(_request.callback)=="string"){if(isError){eval(_request.callback+TAGGED.api.errorResponseBC)}else{try{var data=eval("("+requestData[i]+")");if(!this.handleFlowException(data,_request)){eval(_request.callback+"("+requestData[i]+")")}}catch(e){eval(_request.callback+TAGGED.api.errorResponseBC)}}}else{if(isError){_request.callback.fn.apply(_request.callback.scope,[TAGGED.api.errorResponse,_request.callback.args])}else{try{var data=eval("("+requestData[i]+")");if(this.handleFlowException(data,_request)){}else{if(_request.callback&&_request.callback.fn){var start=new Date();_request.callback.fn.apply(_request.callback.scope,[data,_request.callback.args]);var end=new Date();if(tagged.performance){tagged.performance.recordBenchmarkAPI({tId:o.tId,apiMethod:_request.method,executionTime:(end-start)},(requestCalls.length>1))}}}}catch(e){if(_request.callback){_request.callback.fn.apply(_request.callback.scope,[TAGGED.api.errorResponse,_request.callback.args])}}}}}},handleFlowException:function(b,a){if(b.stat=="security"){tagged.security.captcha.trigger(b,a);return true}else{if(b.stat=="nobot"){tagged.security.nobot.trigger(b,a);return true}else{if(b.error&&b.error.code==23){tagged.security.validation.trigger(b,a);return true}else{if(b.stat=="password"){tagged.security.password.trigger(b,a);return true}else{if(b.stat=="phone"){tagged.security.phone.trigger(b,a);return true}else{return false}}}}}},handleNotLoggedIn:function(a){if(this.redirectOnNotLoggedIn){window.location="/index.html?r="+encodeURIComponent(window.location)}}};if(tagged.exists("H")){TAGGED.api.getQueryStringParameter=H.getQueryStringParameter}else{TAGGED.api.getQueryStringParameter=function(f,c){var d,b,a,h,g,e;c=c||window.location.href;a=c.indexOf("?");h=a>=0?c.substr(a+1):c;a=h.lastIndexOf("#");h=a>=0?h.substr(0,a):h;g=h.split("&");for(d=0,b=g.length;d<b;d++){e=g[d].split("=");if(e.length>=2){if(e[0]===f){return unescape(e[1])}}}return null}}E.onDOMReady(function(){TAGGED.api.startDefer({result:1})});var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());tagged.namespace("realtime");tagged.realtime={eventsHandlerTable:{},subscribeEvents:[],subscriptionTable:{},subscriptionGroups:{},userId:null,nextEventId:null,iframe:null,nodeUrl:"",initialDeferTime:200,deferTime:20,debug:false,alive:true,connected:false,clientId:null,maxReconnectAttempts:3,reconnectTime:100,attempts:0,sendTimer:null,backstopTimer:null,backstopTime:Math.floor(Math.random()*20+120)*1000,_needsUpdateFlag:false,init:function(){var a=tagged.data.realtime_enabled;if(!a){return}this.eventsHandlerTable={};this.subscribeEvents=[];this.subscriptionTable={};this.subscriptionGroups={};this.debug=tagged.data.realtime_debug;this.nodeUrl=tagged.data.node_url;if(!this.nodeUrl){this.alive=false}this.userId=tagged.data.user_id;this.nextEventId=tagged.data.next_event_id;this.clientId=tagged.data.clientId;this.prepIframe()},prepIframe:function(){var a=$("<iframe/>",{id:"node_iframe",src:"/realtime_iframe.html",css:{position:"absolute",top:0,left:0,width:1,height:1,visibility:"hidden"}}).prependTo(document.body);this.iframe=a[0];a.load($.proxy(this.initIframe,this))},initIframe:function(){this.iframe.contentWindow.NodeFrame.init(this,this.handleResponse);this.sendTimer=setTimeout(function(){tagged.realtime.connect()},this.initialDeferTime)},iframeReady:function(a){a.init(this,this.handleResponse)},isAlive:function(){return this.alive},subscribe:function(b,a,d,e){var g=false;if($.isArray(b)){var f=b;for(var c=0;c<f.length;c++){e=f[c].group||"all";if(this._subscribeTopic(f[c].topic,f[c].prevMsgs,f[c].cbObj,e)){g=true}}}else{e=e||"all";if(this._subscribeTopic(b,a,d,e)){g=true}}if(g){this.update()}},_subscribeTopic:function(c,b,e,f,d){var a=false;if(!this.subscriptionTable[c]){this.subscriptionTable[c]=[e];if(b>0){this.subscribeEvents.push({topic:c,prevMsgs:b})}else{this.subscribeEvents.push(c)}a=true}else{if($.inArray(e,this.subscriptionTable[c])===-1){this.subscriptionTable[c].push(e)}a=false}if(!(f in this.subscriptionGroups)){this.subscriptionGroups[f]=[]}this.subscriptionGroups[f].push({topic:c,cbObj:e});return a},unsubscribe:function(d,e){var c=-1;if(!this.subscriptionTable[d]){return false}var b=this.subscriptionTable[d];if(b){var a=$.inArray(e,b);if(a!==-1){b.splice(a,1)}}if($.isEmptyObject(this.subscriptionTable[d])){$.each(this.subscribeEvents,function(g,f){var h=(typeof(f)=="string"?f:f.topic);if(h===d){c=g}});if(c>=0){this.subscribeEvents.splice(c,1)}delete this.subscriptionTable[d];this._needsUpdateFlag=true}},unsubscribeGroup:function(b){if(!(b in this.subscriptionGroups)){return}for(var a=0;a<this.subscriptionGroups[b].length;a++){this.unsubscribe(this.subscriptionGroups[b][a].topic,this.subscriptionGroups[b][a].cbObj)}delete this.subscriptionGroups[b]},register:function(b,c){var e=false;if($.isArray(b)){var d=b;for(var a=0;a<d.length;a++){if(this._registerEvent(d[a].eventType,d[a].cbObj)){e=true}}}else{if(this._registerEvent(b,c)){e=true}}if(e){this.update()}},_registerEvent:function(a,b){if(this.eventsHandlerTable[a]){if($.inArray(b,this.eventsHandlerTable[a])===-1){this.eventsHandlerTable[a].push(b)}return false}else{this.eventsHandlerTable[a]=[b];return true}},unregister:function(c,d){var b=this.eventsHandlerTable[c];if(b){var a=$.inArray(d,b);if(a!==-1){b.splice(a,1)}}if($.isEmptyObject(this.eventsHandlerTable[c])){delete this.eventsHandlerTable[c]}},update:function(){if(this.connected&&this.sendTimer===null){this.sendTimer=setTimeout(function(){tagged.realtime.sendRequest(true)},this.deferTime)}},connect:function(){this.sendRequest(true);this.connected=true},sendRequest:function(g){this.consoleLog("sendRequest()");var f={"X-T-Uid":this.userId,st:tagged.data.session_token,nid:this.nextEventId,ci:this.clientId};var e=(window.location.pathname.match(/\/apps\/(.*).html/)||[null,null])[1];if(e){var a=tagged.data.application_info[e];if(a&&a.id){f.aid=a.id}}var b={};if(g||this._needsUpdateFlag){f.se=JSON.stringify(this.subscribeEvents);var d=[];for(var c in this.eventsHandlerTable){d.push(c)}f.et=JSON.stringify(d);this._needsUpdateFlag=false}b.url=this.nodeUrl+"/poll";b.data=f;this.iframe.contentWindow.NodeFrame.sendRequest(b);if(this.sendTimer){clearTimeout(this.sendTimer);this.sendTimer=null}if(this.backstopTimer!==null){clearTimeout(this.backstopTimer)}this.backstopTimer=setTimeout(function(){tagged.realtime.consoleLog("backstopTimer()");tagged.realtime.connected=false;tagged.realtime.reconnect()},this.backstopTime)},handleResponse:function(d){this.consoleLog("handleResponse()");this.consoleLog(d);if(d){if(d.success){if(d.data){this.nextEventId=d.data.next_event_id;var n=d.data.events_data;var k={};for(var g=0;g<n.length;g++){var a=n[g].event_type;if(k[a]){k[a].push(n[g].event_data)}else{k[a]=[n[g].event_data]}}for(var m in k){var c;if(m.indexOf("pubsub_")===0){var h=m.substring(7);c=this.subscriptionTable[h]}else{c=this.eventsHandlerTable[m]}if(c){for(var f=0;f<c.length;f++){var b=c[f];try{b.cb.call(b.scope,k[m],b.args)}catch(l){this.consoleLog("Exception in realtime callback: "+l)}}}}}this.attempts=0;this.sendRequest()}else{if(d.error&&d.data&&d.data.message){if(this.connected){this.connected=false;this.consoleLog("Realtime error: "+d.data.message);this.reconnect()}}}}else{if(this.connected){this.connected=false;this.consoleLog("Realtime error: General Node API failure");this.reconnect()}}},reconnect:function(){if(this.alive&&this.attempts++<this.maxReconnectAttempts){this.consoleLog("Attempt "+this.attempts+" to reconnect to Realtime push");var a={method:"tagged.util.realtimeReconnect",callback:{fn:function(b){if((b.stat=="ok")&&b.result&&b.result.success){this.nextEventId=b.result.next_event_id;this.clientId=b.result.client_id;tagged.data.session_token=b.result.session_token;tagged.realtime.connect()}else{setTimeout(function(){tagged.realtime.reconnect()},this.reconnectTime)}},scope:this}};TAGGED.api.call(a)}else{this.consoleLog("Reconnection failed.");this.alive=false}},consoleLog:function(a){if(this.debug&&typeof(console)!="undefined"){window.console.log(a)}}};$(document).ready(function(){tagged.realtime.init()});tagged.namespace("header.alerts");tagged.header.alerts={menuEl:null,alertIconHTML:"",alertMenuOpen:false,requestInProgress:false,init:function(a){if(tagged.data.realtime_enabled){var b=TAGGED.api.defer}else{var b=(a&&a.result)?TAGGED.api.queue:TAGGED.api.defer}b.push({method:"tagged.header.renderAlerts",callback:"tagged.header.alerts.show"});if(tagged.data.realtime_enabled){tagged.realtime.register("alerts_update",{cb:this.updateAlerts,scope:this})}else{if(a&&a.result){TAGGED.api.dequeue();return}b.push({method:"tagged.util.echoIt",data:"",callback:"tagged.header.alerts.init"})}},navMenuCB:function(a,b){if(!this.navCBs){this.navCBs=[]}this.navCBs.push({cb:a,scope:b})},show:function(c){this.requestInProgress=false;var d="";var a=null;if(c&&c.stat&&c.stat=="ok"&&c.result&&c.result.icons){d=c.result.icons;if(c.result.drop_down){a=c.result.drop_down}if(c.result.lightbox){this._renderAlertsLightbox(c.result.lightbox)}}this._renderNewAlertsMenu(a);var b=null;if(a){this._renderNewAlertsMenu(a)}else{if(b=$("#alerts-icon")){b.css("visibility","hidden")}}},updateAlerts:function(b){var a=b[b.length-1];if(a.alerts_updated&&!this.requestInProgress){this.requestInProgress=true;TAGGED.api.call({method:"tagged.header.renderAlerts",callback:{fn:this.show,scope:this}})}},_renderAlertIcons:function(b){var a=$("#header_alerts");if(a){a.css("display","block");a.html(b)}},_renderNewAlertsMenu:function(d){var a=[];for(key in d){a.push({type:key,className:"icon "+key,label:d[key].label||"",value:d[key].value,url:d[key].link||"#",onclick:null})}for(var b=0;this.navCBs&&b<this.navCBs.length;b++){var c=this.navCBs[b];c.cb.call(c.scope,a)}},_renderAlertsLightbox:function(b){for(var a in b){switch(a){case"promo_gold_reup":tagged.require("alert_lightbox").done(function(){var c=new tagged.promotions.BuyPrompt();c.render(b[a]).show()});break}}}};$(document).ready(function(){tagged.header.alerts.init(false)});tagged.namespace("performance");tagged.performance={XHRQueue:{},XHRResults:{},benchmarkResults:[],iframeResults:[],iframe:null,iframeContainer:null,iframeLoadTimer:null,iframeLoadWait:10000,downloadErrorFilter:10000,urlMap:null,mapIndex:0,noTraffic:false,pageLoadTime:0,iframeTestsComplete:false,noActivityDelay:15000,entryTemplate:{apiMethod:"",functionName:"",executionTime:"",timeStamp:"",userAgent:"",type:"",multiple:"",tId:"",transitTime:""},init:function(){if(tagged.data.enableCDNTests){this.iframeContainer=document.body;this.mapIndex=0;this.noTraffic=false;this.iframeTestsComplete=false;this.urlMap=tagged.data.perfTestUrls}if(tagged.data.enable_js_benchmarking){this.tt=new YAHOO.widget.Tooltip("js_tt",{context:"tagged_logo",text:"",showdelay:2000,autodismissdelay:50000});this.pageLoadTime=(new Date()).getTime()}},runIframeTests:function(){if(this.mapIndex<this.urlMap.length){if(this.noTraffic){var a={idx:this.mapIndex,cb:this.runIframeTests};this.setupIframe(a);this.mapIndex++}}else{this.iframeTestsComplete=true;this.sendIframeResults()}},setupIframe:function(b){b=b||{idx:0};if(this.urlMap[b.idx]){var a=this.urlMap[b.idx].url;var c=this.urlMap[b.idx].type;this._setupIframe({url:a,type:c,cb:b.cb})}},_setupIframe:function(b){var a=YAHOO.util.Dom.get(this.iframeContainer)||document.body;if(this.iframe){YAHOO.util.Event.purgeElement(this.iframe);a.removeChild(this.iframe);this.iframe=null}this.iframe=document.createElement("iframe");this.iframe.style.height=0;this.iframe.style.width=0;this.iframe.style.visibility="hidden";this.iframe.id="performanceIframe";a.appendChild(this.iframe);this.iframeLoadTimer=window.setTimeout(function(){b.start=0;tagged.performance.iframeLoaded.call(tagged.performance,null,b)},this.iframeLoadWait);YAHOO.util.Event.addListener(this.iframe,"load",this.iframeLoaded,b,this);this.iframe.src=b.url;b.start=(new Date()).getTime()},iframeLoaded:function(b,c){var d=(new Date()).getTime()-c.start;if(d<this.downloadErrorFilter){var a={url:c.url,type:c.type,time:Math.round(Math.max(0,d))};this.iframeResults.push(a)}window.clearTimeout(this.iframeLoadTimer);this.iframeLoadTimer=null;if(c.cb){c.cb.call(this)}},sendIframeResults:function(){this.iframeResults.shift();this._callAPI(this.iframeResults,"cdn")},addXHR:function(c,a){try{this.noTraffic=false;this.XHRQueue[c.tId]=c;this.XHRQueue[c.tId].start=(new Date()).getTime();if(this.noActivityTimer){window.clearTimeout(this.noActivityTimer);this.noActivityTimer=null}}catch(b){}},removeXHR:function(b){try{this.XHRResults[b.tId]=(new Date()).getTime()-this.XHRQueue[b.tId].start;delete this.XHRQueue[b.tId];if(this.getObjLength(this.XHRQueue)==0){this.noTraffic=true;this.onNoTraffic()}}catch(a){}},updateXHRQueue:function(){try{for(i in this.XHRQueue){if(!YAHOO.util.Connect.isCallInProgress(this.XHRQueue[i])){delete this.XHRQueue[i]}}}catch(a){}},recordBenchmarkAPI:function(b,a){if(!tagged.data.enable_js_benchmarking){return}b.type="API_CB";b.transitTime=this.XHRResults[b.tId];b.multiple=a||false;var c=YAHOO.lang.JSON.stringify(b);b.timeStamp=(new Date()).getTime();b.userAgent=window.navigator.userAgent;YAHOO.lang.augmentObject(b,this.entryTemplate);this.benchmarkResults.push(b);try{this.tt.cfg.setProperty("text",this.tt.cfg.getProperty("text")+"<br>"+c)}catch(d){}},bind:function(d,b,c,a){return function(){var f=new Date();b.call(a,c);var e=new Date();if(tagged.data.enable_js_benchmarking){tagged.performance.recordBenchmarkJS(d,(e-f))}}},recordBenchmarkJS:function(f,a){var c={functionName:f||"",executionTime:a,type:"JS_CODE"};var b=YAHOO.lang.JSON.stringify(c);c.timeStamp=(new Date()).getTime();c.userAgent=window.navigator.userAgent;YAHOO.lang.augmentObject(c,tagged.performance.entryTemplate);tagged.performance.benchmarkResults.push(c);try{tagged.performance.tt.cfg.setProperty("text",tagged.performance.tt.cfg.getProperty("text")+"<br>"+b)}catch(d){}},sendJSBenchmarkResults:function(){if(tagged.data.enable_js_benchmarking){this._callAPI(this.benchmarkResults,"js")}},_callAPI:function(c,a){var b={method:"tagged.util.savePerformanceData",type:a,data:YAHOO.lang.JSON.stringify(c),callback:{fn:this.handleResponse,scope:this,args:a}};TAGGED.api.call(b)},handleResponse:function(b,a){if(a=="JS_CODE"){this.benchmarkResults=[]}},onNoTraffic:function(){if(this.pageLoadTime){this.pageLoadTime=(new Date()).getTime()-this.pageLoadTime;this.recordBenchmarkJS("page_load",this.pageLoadTime);this.pageLoadTime=0}if(tagged.data.enableCDNTests&&!this.iframeTestsComplete&&this.urlMap){this.noActivityTimer=window.setTimeout(function(){tagged.performance.runIframeTests()},this.noActivityDelay)}},getObjLength:function(b){var a=0;for(i in b){a++}return a}};E.onDOMReady(tagged.performance.init,tagged.performance,true);