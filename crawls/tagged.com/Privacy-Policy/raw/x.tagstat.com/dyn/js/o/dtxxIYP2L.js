YAHOO.namespace("util");YAHOO.util.Cookie={_createCookieString:function(f,d,e,a){var b=YAHOO.lang,c=encodeURIComponent(f)+"="+(e?encodeURIComponent(d):d);if(b.isObject(a)){if(a.expires instanceof Date){c+="; expires="+a.expires.toUTCString()}if(b.isString(a.path)&&a.path!==""){c+="; path="+a.path}if(b.isString(a.domain)&&a.domain!==""){c+="; domain="+a.domain}if(a.secure===true){c+="; secure"}}return c},_createCookieHashString:function(d){var b=YAHOO.lang;if(!b.isObject(d)){throw new TypeError("Cookie._createCookieHashString(): Argument must be an object.")}var c=[];for(var a in d){if(b.hasOwnProperty(d,a)&&!b.isFunction(d[a])&&!b.isUndefined(d[a])){c.push(encodeURIComponent(a)+"="+encodeURIComponent(String(d[a])))}}return c.join("&")},_parseCookieHash:function(c){var d=c.split("&"),b=null,e={};if(c.length>0){for(var f=0,a=d.length;f<a;f++){b=d[f].split("=");e[decodeURIComponent(b[0])]=decodeURIComponent(b[1])}}return e},_parseCookieString:function(f,d){var e={};if(YAHOO.lang.isString(f)&&f.length>0){var c=(d===false?function(l){return l}:decodeURIComponent);var h=f.split(/;\s/g),g=null,b=null,k=null;for(var a=0,j=h.length;a<j;a++){k=h[a].match(/([^=]+)=/i);if(k instanceof Array){try{g=decodeURIComponent(k[1]);b=c(h[a].substring(k[1].length+1))}catch(i){}}else{g=decodeURIComponent(h[a]);b=""}e[g]=b}}return e},exists:function(a){if(!YAHOO.lang.isString(a)||a===""){throw new TypeError("Cookie.exists(): Cookie name must be a non-empty string.")}var b=this._parseCookieString(document.cookie,true);return b.hasOwnProperty(a)},get:function(e,a){var b=YAHOO.lang,d;if(b.isFunction(a)){d=a;a={}}else{if(b.isObject(a)){d=a.converter}else{a={}}}var c=this._parseCookieString(document.cookie,!a.raw);if(!b.isString(e)||e===""){throw new TypeError("Cookie.get(): Cookie name must be a non-empty string.")}if(b.isUndefined(c[e])){return null}if(!b.isFunction(d)){return c[e]}else{return d(c[e])}},getSub:function(a,d,e){var b=YAHOO.lang,c=this.getSubs(a);if(c!==null){if(!b.isString(d)||d===""){throw new TypeError("Cookie.getSub(): Subcookie name must be a non-empty string.")}if(b.isUndefined(c[d])){return null}if(!b.isFunction(e)){return c[d]}else{return e(c[d])}}else{return null}},getSubs:function(c){var a=YAHOO.lang.isString;if(!a(c)||c===""){throw new TypeError("Cookie.getSubs(): Cookie name must be a non-empty string.")}var b=this._parseCookieString(document.cookie,false);if(a(b[c])){return this._parseCookieHash(b[c])}return null},remove:function(b,a){if(!YAHOO.lang.isString(b)||b===""){throw new TypeError("Cookie.remove(): Cookie name must be a non-empty string.")}a=YAHOO.lang.merge(a||{},{expires:new Date(0)});return this.set(b,"",a)},removeSub:function(f,c,a){var b=YAHOO.lang;a=a||{};if(!b.isString(f)||f===""){throw new TypeError("Cookie.removeSub(): Cookie name must be a non-empty string.")}if(!b.isString(c)||c===""){throw new TypeError("Cookie.removeSub(): Subcookie name must be a non-empty string.")}var d=this.getSubs(f);if(b.isObject(d)&&b.hasOwnProperty(d,c)){delete d[c];if(!a.removeIfEmpty){return this.setSubs(f,d,a)}else{for(var e in d){if(b.hasOwnProperty(d,e)&&!b.isFunction(d[e])&&!b.isUndefined(d[e])){return this.setSubs(f,d,a)}}return this.remove(f,a)}}else{return""}},set:function(e,d,a){var b=YAHOO.lang;a=a||{};if(!b.isString(e)){throw new TypeError("Cookie.set(): Cookie name must be a string.")}if(b.isUndefined(d)){throw new TypeError("Cookie.set(): Value cannot be undefined.")}var c=this._createCookieString(e,d,!a.raw,a);document.cookie=c;return c},setSub:function(f,d,e,a){var b=YAHOO.lang;if(!b.isString(f)||f===""){throw new TypeError("Cookie.setSub(): Cookie name must be a non-empty string.")}if(!b.isString(d)||d===""){throw new TypeError("Cookie.setSub(): Subcookie name must be a non-empty string.")}if(b.isUndefined(e)){throw new TypeError("Cookie.setSub(): Subcookie value cannot be undefined.")}var c=this.getSubs(f);if(!b.isObject(c)){c={}}c[d]=e;return this.setSubs(f,c,a)},setSubs:function(e,d,a){var b=YAHOO.lang;if(!b.isString(e)){throw new TypeError("Cookie.setSubs(): Cookie name must be a string.")}if(!b.isObject(d)){throw new TypeError("Cookie.setSubs(): Cookie value must be an object.")}var c=this._createCookieString(e,this._createCookieHashString(d),false,a);document.cookie=c;return c}};YAHOO.register("cookie",YAHOO.util.Cookie,{version:"2.8.0r4",build:"2449"});tagged.extend("header",{newUserStatus:null,updateHeaderGold:function(a){if($("#header_gold_amount")){$("#header_gold_amount").text(a)}}});YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,startEvent:new YAHOO.util.CustomEvent("start"),completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(a){this._msxml_progid.unshift(a)},setDefaultPostHeader:function(a){if(typeof a=="string"){this._default_post_header=a}else{if(typeof a=="boolean"){this._use_default_post_header=a}}},setDefaultXhrHeader:function(a){if(typeof a=="string"){this._default_xhr_header=a}else{this._use_default_xhr_header=a}},setPollingInterval:function(a){if(typeof a=="number"&&isFinite(a)){this._polling_interval=a}},createXhrObject:function(b){var d,a,f;try{a=new XMLHttpRequest();d={conn:a,tId:b,xhr:true}}catch(e){for(f=0;f<this._msxml_progid.length;++f){try{a=new ActiveXObject(this._msxml_progid[f]);d={conn:a,tId:b,xhr:true};break}catch(c){}}}finally{return d}},getConnectionObject:function(a){var c,b=this._transaction_id;try{if(!a){c=this.createXhrObject(b)}else{c={tId:b};if(a==="xdr"){c.conn=this._transport;c.xdr=true}else{if(a==="upload"){c.upload=true}}}if(c){this._transaction_id++}}catch(d){}return c},asyncRequest:function(b,e,c,a){var d,f,g=(c&&c.argument)?c.argument:null;if(this._isFileUpload){f="upload"}else{if(c.xdr){f="xdr"}}d=this.getConnectionObject(f);if(!d){return null}else{if(c&&c.customevents){this.initCustomEvents(d,c)}if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(d,c,e,a);return d}if(b.toUpperCase()=="GET"){if(this._sFormData.length!==0){e+=((e.indexOf("?")==-1)?"?":"&")+this._sFormData}}else{if(b.toUpperCase()=="POST"){a=a?this._sFormData+"&"+a:this._sFormData}}}if(b.toUpperCase()=="GET"&&(c&&c.cache===false)){e+=((e.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString()}if(this._use_default_xhr_header){if(!this._default_headers["X-Requested-With"]){this.initHeader("X-Requested-With",this._default_xhr_header,true)}}if((b.toUpperCase()==="POST"&&this._use_default_post_header)&&this._isFormSubmit===false){this.initHeader("Content-Type",this._default_post_header)}if(d.xdr){this.xdr(d,b,e,c,a);return d}d.conn.open(b,e,true);if(this._has_default_headers||this._has_http_headers){this.setHeader(d)}this.handleReadyState(d,c);d.conn.send(a||"");if(this._isFormSubmit===true){this.resetFormState()}this.startEvent.fire(d,g);if(d.startEvent){d.startEvent.fire(d,g)}return d}},initCustomEvents:function(a,b){var c;for(c in b.customevents){if(this._customEvents[c][0]){a[this._customEvents[c][0]]=new YAHOO.util.CustomEvent(this._customEvents[c][1],(b.scope)?b.scope:null);a[this._customEvents[c][0]].subscribe(b.customevents[c])}}},handleReadyState:function(c,b){var d=this,a=(b&&b.argument)?b.argument:null;if(b&&b.timeout){this._timeOut[c.tId]=window.setTimeout(function(){d.abort(c,b,true)},b.timeout)}this._poll[c.tId]=window.setInterval(function(){if(c.conn&&c.conn.readyState===4){window.clearInterval(d._poll[c.tId]);delete d._poll[c.tId];if(b&&b.timeout){window.clearTimeout(d._timeOut[c.tId]);delete d._timeOut[c.tId]}d.completeEvent.fire(c,a);if(c.completeEvent){c.completeEvent.fire(c,a)}d.handleTransactionResponse(c,b)}},this._polling_interval)},handleTransactionResponse:function(c,f,a){var j,d,h=(f&&f.argument)?f.argument:null,b=(c.r&&c.r.statusText==="xdr:success")?true:false,g=(c.r&&c.r.statusText==="xdr:failure")?true:false,e=a;try{if((c.conn.status!==undefined&&c.conn.status!==0)||b){j=c.conn.status}else{if(g&&!e){j=0}else{j=13030}}}catch(i){j=13030}if((j>=200&&j<300)||j===1223||b){d=c.xdr?c.r:this.createResponseObject(c,h);if(f&&f.success){if(!f.scope){f.success(d)}else{f.success.apply(f.scope,[d])}}this.successEvent.fire(d);if(c.successEvent){c.successEvent.fire(d)}}else{switch(j){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:d=this.createExceptionObject(c.tId,h,(a?a:false));if(f&&f.failure){if(!f.scope){f.failure(d)}else{f.failure.apply(f.scope,[d])}}break;default:d=(c.xdr)?c.response:this.createResponseObject(c,h);if(f&&f.failure){if(!f.scope){f.failure(d)}else{f.failure.apply(f.scope,[d])}}}this.failureEvent.fire(d);if(c.failureEvent){c.failureEvent.fire(d)}}this.releaseObject(c);d=null},createResponseObject:function(d,g){var a={},e={},i,b,h,c;try{b=d.conn.getAllResponseHeaders();h=b.split("\n");for(i=0;i<h.length;i++){c=h[i].indexOf(":");if(c!=-1){e[h[i].substring(0,c)]=YAHOO.lang.trim(h[i].substring(c+2))}}}catch(f){}a.tId=d.tId;a.status=(d.conn.status==1223)?204:d.conn.status;a.statusText=(d.conn.status==1223)?"No Content":d.conn.statusText;a.getResponseHeader=e;a.getAllResponseHeaders=b;a.responseText=d.conn.responseText;a.responseXML=d.conn.responseXML;if(g){a.argument=g}return a},createExceptionObject:function(b,f,a){var d=0,c="communication failure",g=-1,h="transaction aborted",e={};e.tId=b;if(a){e.status=g;e.statusText=h}else{e.status=d;e.statusText=c}if(f){e.argument=f}return e},initHeader:function(a,b,c){var d=(c)?this._default_headers:this._http_headers;d[a]=b;if(c){this._has_default_headers=true}else{this._has_http_headers=true}},setHeader:function(a){var b;if(this._has_default_headers){for(b in this._default_headers){if(YAHOO.lang.hasOwnProperty(this._default_headers,b)){a.conn.setRequestHeader(b,this._default_headers[b])}}}if(this._has_http_headers){for(b in this._http_headers){if(YAHOO.lang.hasOwnProperty(this._http_headers,b)){a.conn.setRequestHeader(b,this._http_headers[b])}}this._http_headers={};this._has_http_headers=false}},resetDefaultHeaders:function(){this._default_headers={};this._has_default_headers=false},abort:function(d,b,a){var e,g=(b&&b.argument)?b.argument:null;d=d||{};if(d.conn){if(d.xhr){if(this.isCallInProgress(d)){d.conn.abort();window.clearInterval(this._poll[d.tId]);delete this._poll[d.tId];if(a){window.clearTimeout(this._timeOut[d.tId]);delete this._timeOut[d.tId]}e=true}}else{if(d.xdr){d.conn.abort(d.tId);e=true}}}else{if(d.upload){var f="yuiIO"+d.tId;var c=document.getElementById(f);if(c){YAHOO.util.Event.removeListener(c,"load");document.body.removeChild(c);if(a){window.clearTimeout(this._timeOut[d.tId]);delete this._timeOut[d.tId]}e=true}}else{e=false}}if(e===true){this.abortEvent.fire(d,g);if(d.abortEvent){d.abortEvent.fire(d,g)}this.handleTransactionResponse(d,b,true)}return e},isCallInProgress:function(a){a=a||{};if(a.xhr&&a.conn){return a.conn.readyState!==4&&a.conn.readyState!==0}else{if(a.xdr&&a.conn){return a.conn.isCallInProgress(a.tId)}else{if(a.upload===true){return document.getElementById("yuiIO"+a.tId)?true:false}else{return false}}}},releaseObject:function(a){if(a&&a.conn){a.conn=null;a=null}}};(function(){var c=YAHOO.util.Connect,b={};function f(k){var j='<object id="YUIConnectionSwf" type="application/x-shockwave-flash" data="'+k+'" width="0" height="0"><param name="movie" value="'+k+'"><param name="allowScriptAccess" value="always"></object>',i=document.createElement("div");document.body.appendChild(i);i.innerHTML=j}function h(i,l,k,m,j){b[parseInt(i.tId)]={o:i,c:m};if(j){m.method=l;m.data=j}i.conn.send(k,m,i.tId)}function e(i){f(i);c._transport=document.getElementById("YUIConnectionSwf")}function g(){c.xdrReadyEvent.fire()}function a(i,j){if(i){c.startEvent.fire(i,j.argument);if(i.startEvent){i.startEvent.fire(i,j.argument)}}}function d(j){var i=b[j.tId].o,k=b[j.tId].c;if(j.statusText==="xdr:start"){a(i,k);return}j.responseText=decodeURI(j.responseText);i.r=j;if(k.argument){i.r.argument=k.argument}this.handleTransactionResponse(i,k,j.statusText==="xdr:abort"?true:false);delete b[j.tId]}c.xdr=h;c.swf=f;c.transport=e;c.xdrReadyEvent=new YAHOO.util.CustomEvent("xdrReady");c.xdrReady=g;c.handleXdrResponse=d})();(function(){var e=YAHOO.util.Connect,c=YAHOO.util.Event;e._isFormSubmit=false;e._isFileUpload=false;e._formNode=null;e._sFormData=null;e._submitElementValue=null;e.uploadEvent=new YAHOO.util.CustomEvent("upload"),e._hasSubmitListener=function(){if(c){c.addListener(document,"click",function(h){var i=c.getTarget(h),j=i.nodeName.toLowerCase();if((j==="input"||j==="button")&&(i.type&&i.type.toLowerCase()=="submit")){e._submitElementValue=encodeURIComponent(i.name)+"="+encodeURIComponent(i.value)}});return true}return false}();function b(k,p,u){var l,v,m,o,h,n=false,r=[],i=0,s,q,t,j,w;this.resetFormState();if(typeof k=="string"){l=(document.getElementById(k)||document.forms[k])}else{if(typeof k=="object"){l=k}else{return}}if(p){this.createFrame(u?u:null);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=l;return}for(s=0,q=l.elements.length;s<q;++s){v=l.elements[s];h=v.disabled;m=v.name;if(!h&&m){m=encodeURIComponent(m)+"=";o=encodeURIComponent(v.value);switch(v.type){case"select-one":if(v.selectedIndex>-1){w=v.options[v.selectedIndex];r[i++]=m+encodeURIComponent((w.attributes.value&&w.attributes.value.specified)?w.value:w.text)}break;case"select-multiple":if(v.selectedIndex>-1){for(t=v.selectedIndex,j=v.options.length;t<j;++t){w=v.options[t];if(w.selected){r[i++]=m+encodeURIComponent((w.attributes.value&&w.attributes.value.specified)?w.value:w.text)}}}break;case"radio":case"checkbox":if(v.checked){r[i++]=m+o}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(n===false){if(this._hasSubmitListener&&this._submitElementValue){r[i++]=this._submitElementValue}n=true}break;default:r[i++]=m+o}}}this._isFormSubmit=true;this._sFormData=r.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData}function f(){this._isFormSubmit=false;this._isFileUpload=false;this._formNode=null;this._sFormData=""}function g(j){var i="yuiIO"+this._transaction_id,h;if(YAHOO.env.ua.ie){h=document.createElement('<iframe id="'+i+'" name="'+i+'" />');if(typeof j=="boolean"){h.src="javascript:false"}}else{h=document.createElement("iframe");h.id=i;h.name=i}h.style.position="absolute";h.style.top="-1000px";h.style.left="-1000px";document.body.appendChild(h)}function d(l){var i=[],k=l.split("&"),j,h;for(j=0;j<k.length;j++){h=k[j].indexOf("=");if(h!=-1){i[j]=document.createElement("input");i[j].type="hidden";i[j].name=decodeURIComponent(k[j].substring(0,h));i[j].value=decodeURIComponent(k[j].substring(h+1));this._formNode.appendChild(i[j])}}return i}function a(t,i,s,u){var n="yuiIO"+t.tId,m="multipart/form-data",k=document.getElementById(n),r=(document.documentMode&&document.documentMode===8)?true:false,h=this,l=(i&&i.argument)?i.argument:null,j,o,v,p,w,q;w={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",s);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",n);if(YAHOO.env.ua.ie&&!r){this._formNode.setAttribute("encoding",m)}else{this._formNode.setAttribute("enctype",m)}if(u){j=this.appendPostData(u)}this._formNode.submit();this.startEvent.fire(t,l);if(t.startEvent){t.startEvent.fire(t,l)}if(i&&i.timeout){this._timeOut[t.tId]=window.setTimeout(function(){h.abort(t,i,true)},i.timeout)}if(j&&j.length>0){for(o=0;o<j.length;o++){this._formNode.removeChild(j[o])}}for(v in w){if(YAHOO.lang.hasOwnProperty(w,v)){if(w[v]){this._formNode.setAttribute(v,w[v])}else{this._formNode.removeAttribute(v)}}}this.resetFormState();q=function(){if(i&&i.timeout){window.clearTimeout(h._timeOut[t.tId]);delete h._timeOut[t.tId]}h.completeEvent.fire(t,l);if(t.completeEvent){t.completeEvent.fire(t,l)}p={tId:t.tId,argument:i.argument};try{p.responseText=k.contentWindow.document.body?k.contentWindow.document.body.innerHTML:k.contentWindow.document.documentElement.textContent;p.responseXML=k.contentWindow.document.XMLDocument?k.contentWindow.document.XMLDocument:k.contentWindow.document}catch(x){}if(i&&i.upload){if(!i.scope){i.upload(p)}else{i.upload.apply(i.scope,[p])}}h.uploadEvent.fire(p);if(t.uploadEvent){t.uploadEvent.fire(p)}c.removeListener(k,"load",q);setTimeout(function(){document.body.removeChild(k);h.releaseObject(t)},100)};c.addListener(k,"load",q)}e.setForm=b;e.resetFormState=f;e.createFrame=g;e.appendPostData=d;e.uploadFile=a})();YAHOO.register("connection",YAHOO.util.Connect,{version:"2.8.0r4",build:"2449"});(function(){var l=YAHOO.lang,isFunction=l.isFunction,isObject=l.isObject,isArray=l.isArray,_toStr=Object.prototype.toString,Native=(YAHOO.env.ua.caja?window:this).JSON,_UNICODE_EXCEPTIONS=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_ESCAPES=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,_VALUES=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_BRACKETS=/(?:^|:|,)(?:\s*\[)+/g,_UNSAFE=/^[\],:{}\s]*$/,_SPECIAL_CHARS=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_CHARS={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},UNDEFINED="undefined",OBJECT="object",NULL="null",STRING="string",NUMBER="number",BOOLEAN="boolean",DATE="date",_allowable={"undefined":UNDEFINED,string:STRING,"[object String]":STRING,number:NUMBER,"[object Number]":NUMBER,"boolean":BOOLEAN,"[object Boolean]":BOOLEAN,"[object Date]":DATE,"[object RegExp]":OBJECT},EMPTY="",OPEN_O="{",CLOSE_O="}",OPEN_A="[",CLOSE_A="]",COMMA=",",COMMA_CR=",\n",CR="\n",COLON=":",COLON_SP=": ",QUOTE='"';Native=_toStr.call(Native)==="[object JSON]"&&Native;function _char(c){if(!_CHARS[c]){_CHARS[c]="\\u"+("0000"+(+(c.charCodeAt(0))).toString(16)).slice(-4)}return _CHARS[c]}function _revive(data,reviver){var walk=function(o,key){var k,v,value=o[key];if(value&&typeof value==="object"){for(k in value){if(l.hasOwnProperty(value,k)){v=walk(value,k);if(v===undefined){delete value[k]}else{value[k]=v}}}}return reviver.call(o,key,value)};return typeof reviver==="function"?walk({"":data},""):data}function _prepare(s){return s.replace(_UNICODE_EXCEPTIONS,_char)}function _isSafe(str){return l.isString(str)&&_UNSAFE.test(str.replace(_ESCAPES,"@").replace(_VALUES,"]").replace(_BRACKETS,""))}function _parse(s,reviver){s=_prepare(s);if(_isSafe(s)){return _revive(eval("("+s+")"),reviver)}throw new SyntaxError("JSON.parse")}function _type(o){var t=typeof o;return _allowable[t]||_allowable[_toStr.call(o)]||(t===OBJECT?(o?OBJECT:NULL):UNDEFINED)}function _string(s){return QUOTE+s.replace(_SPECIAL_CHARS,_char)+QUOTE}function _indent(s,space){return s.replace(/^/gm,space)}function _stringify(o,w,space){if(o===undefined){return undefined}var replacer=isFunction(w)?w:null,format=_toStr.call(space).match(/String|Number/)||[],_date=YAHOO.lang.JSON.dateToString,stack=[],tmp,i,len;if(replacer||!isArray(w)){w=undefined}if(w){tmp={};for(i=0,len=w.length;i<len;++i){tmp[w[i]]=true}w=tmp}space=format[0]==="Number"?new Array(Math.min(Math.max(0,space),10)+1).join(" "):(space||EMPTY).slice(0,10);function _serialize(h,key){var value=h[key],t=_type(value),a=[],colon=space?COLON_SP:COLON,arr,i,keys,k,v;if(isObject(value)&&isFunction(value.toJSON)){value=value.toJSON(key)}else{if(t===DATE){value=_date(value)}}if(isFunction(replacer)){value=replacer.call(h,key,value)}if(value!==h[key]){t=_type(value)}switch(t){case DATE:case OBJECT:break;case STRING:return _string(value);case NUMBER:return isFinite(value)?value+EMPTY:NULL;case BOOLEAN:return value+EMPTY;case NULL:return NULL;default:return undefined}for(i=stack.length-1;i>=0;--i){if(stack[i]===value){throw new Error("JSON.stringify. Cyclical reference")}}arr=isArray(value);stack.push(value);if(arr){for(i=value.length-1;i>=0;--i){a[i]=_serialize(value,i)||NULL}}else{keys=w||value;i=0;for(k in keys){if(keys.hasOwnProperty(k)){v=_serialize(value,k);if(v){a[i++]=_string(k)+colon+v}}}}stack.pop();if(space&&a.length){return arr?OPEN_A+CR+_indent(a.join(COMMA_CR),space)+CR+CLOSE_A:OPEN_O+CR+_indent(a.join(COMMA_CR),space)+CR+CLOSE_O}else{return arr?OPEN_A+a.join(COMMA)+CLOSE_A:OPEN_O+a.join(COMMA)+CLOSE_O}}return _serialize({"":o},"")}YAHOO.lang.JSON={useNativeParse:!!Native,useNativeStringify:!!Native,isSafe:function(s){return _isSafe(_prepare(s))},parse:function(s,reviver){return Native&&YAHOO.lang.JSON.useNativeParse?Native.parse(s,reviver):_parse(s,reviver)},stringify:function(o,w,space){return Native&&YAHOO.lang.JSON.useNativeStringify?Native.stringify(o,w,space):_stringify(o,w,space)},dateToString:function(d){function _zeroPad(v){return v<10?"0"+v:v}return d.getUTCFullYear()+"-"+_zeroPad(d.getUTCMonth()+1)+"-"+_zeroPad(d.getUTCDate())+"T"+_zeroPad(d.getUTCHours())+COLON+_zeroPad(d.getUTCMinutes())+COLON+_zeroPad(d.getUTCSeconds())+"Z"},stringToDate:function(str){var m=str.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?Z$/);if(m){var d=new Date();d.setUTCFullYear(m[1],m[2]-1,m[3]);d.setUTCHours(m[4],m[5],m[6],(m[7]||0));return d}return str}};YAHOO.lang.JSON.isValid=YAHOO.lang.JSON.isSafe})();YAHOO.register("json",YAHOO.lang.JSON,{version:"2.8.0r4",build:"2449"});tagged.namespace("security.nobot");tagged.security.nobot={trigger:function(response,callObj){var newCallObj={method:"tagged.security.nobot.submitAnswer",answer:eval(response.result.jsfunc),origCallObj:YAHOO.lang.JSON.stringify(response.result.origCallObj)};if(callObj){newCallObj.callback=callObj.callback}TAGGED.api.call(newCallObj)}};/*!
 * jQuery UI Core 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
(function(b,f){var a=0,e=/^ui-id-\d+$/;b.ui=b.ui||{};if(b.ui.version){return}b.extend(b.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({_focus:b.fn.focus,focus:function(g,h){return typeof g==="number"?this.each(function(){var i=this;setTimeout(function(){b(i).focus();if(h){h.call(i)}},g)}):this._focus.apply(this,arguments)},scrollParent:function(){var g;if((b.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){g=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(b.css(this,"position"))&&(/(auto|scroll)/).test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0)}else{g=this.parents().filter(function(){return(/(auto|scroll)/).test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0)}return(/fixed/).test(this.css("position"))||!g.length?b(document):g},zIndex:function(j){if(j!==f){return this.css("zIndex",j)}if(this.length){var h=b(this[0]),g,i;while(h.length&&h[0]!==document){g=h.css("position");if(g==="absolute"||g==="relative"||g==="fixed"){i=parseInt(h.css("zIndex"),10);if(!isNaN(i)&&i!==0){return i}}h=h.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++a)}})},removeUniqueId:function(){return this.each(function(){if(e.test(this.id)){b(this).removeAttr("id")}})}});function d(i,g){var k,j,h,l=i.nodeName.toLowerCase();if("area"===l){k=i.parentNode;j=k.name;if(!i.href||!j||k.nodeName.toLowerCase()!=="map"){return false}h=b("img[usemap=#"+j+"]")[0];return !!h&&c(h)}return(/input|select|textarea|button|object/.test(l)?!i.disabled:"a"===l?i.href||g:g)&&c(i)}function c(g){return b.expr.filters.visible(g)&&!b(g).parents().addBack().filter(function(){return b.css(this,"visibility")==="hidden"}).length}b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(g){return function(h){return !!b.data(h,g)}}):function(j,h,g){return !!b.data(j,g[3])},focusable:function(g){return d(g,!isNaN(b.attr(g,"tabindex")))},tabbable:function(i){var g=b.attr(i,"tabindex"),h=isNaN(g);return(h||g>=0)&&d(i,!h)}});if(!b("<a>").outerWidth(1).jquery){b.each(["Width","Height"],function(j,g){var h=g==="Width"?["Left","Right"]:["Top","Bottom"],k=g.toLowerCase(),m={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};function l(o,n,i,p){b.each(h,function(){n-=parseFloat(b.css(o,"padding"+this))||0;if(i){n-=parseFloat(b.css(o,"border"+this+"Width"))||0}if(p){n-=parseFloat(b.css(o,"margin"+this))||0}});return n}b.fn["inner"+g]=function(i){if(i===f){return m["inner"+g].call(this)}return this.each(function(){b(this).css(k,l(this,i)+"px")})};b.fn["outer"+g]=function(i,n){if(typeof i!=="number"){return m["outer"+g].call(this,i)}return this.each(function(){b(this).css(k,l(this,i,true,n)+"px")})}})}if(!b.fn.addBack){b.fn.addBack=function(g){return this.add(g==null?this.prevObject:this.prevObject.filter(g))}}if(b("<a>").data("a-b","a").removeData("a-b").data("a-b")){b.fn.removeData=(function(g){return function(h){if(arguments.length){return g.call(this,b.camelCase(h))}else{return g.call(this)}}})(b.fn.removeData)}b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());b.support.selectstart="onselectstart" in document.createElement("div");b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(g){g.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.extend(b.ui,{plugin:{add:function(h,j,l){var g,k=b.ui[h].prototype;for(g in l){k.plugins[g]=k.plugins[g]||[];k.plugins[g].push([j,l[g]])}},call:function(g,j,h){var k,l=g.plugins[j];if(!l||!g.element[0].parentNode||g.element[0].parentNode.nodeType===11){return}for(k=0;k<l.length;k++){if(g.options[l[k][0]]){l[k][1].apply(g.element,h)}}}},hasScroll:function(j,h){if(b(j).css("overflow")==="hidden"){return false}var g=(h&&h==="left")?"scrollLeft":"scrollTop",i=false;if(j[g]>0){return true}j[g]=1;i=(j[g]>0);j[g]=0;return i}})})(jQuery);/*!
 * jQuery UI Widget 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
(function(b,e){var a=0,d=Array.prototype.slice,c=b.cleanData;b.cleanData=function(f){for(var g=0,h;(h=f[g])!=null;g++){try{b(h).triggerHandler("remove")}catch(j){}}c(f)};b.widget=function(f,g,n){var k,l,i,m,h={},j=f.split(".")[0];f=f.split(".")[1];k=j+"-"+f;if(!n){n=g;g=b.Widget}b.expr[":"][k.toLowerCase()]=function(o){return !!b.data(o,k)};b[j]=b[j]||{};l=b[j][f];i=b[j][f]=function(o,p){if(!this._createWidget){return new i(o,p)}if(arguments.length){this._createWidget(o,p)}};b.extend(i,l,{version:n.version,_proto:b.extend({},n),_childConstructors:[]});m=new g();m.options=b.widget.extend({},m.options);b.each(n,function(p,o){if(!b.isFunction(o)){h[p]=o;return}h[p]=(function(){var q=function(){return g.prototype[p].apply(this,arguments)},r=function(s){return g.prototype[p].apply(this,s)};return function(){var u=this._super,s=this._superApply,t;this._super=q;this._superApply=r;t=o.apply(this,arguments);this._super=u;this._superApply=s;return t}})()});i.prototype=b.widget.extend(m,{widgetEventPrefix:l?m.widgetEventPrefix:f},h,{constructor:i,namespace:j,widgetName:f,widgetFullName:k});if(l){b.each(l._childConstructors,function(p,q){var o=q.prototype;b.widget(o.namespace+"."+o.widgetName,i,q._proto)});delete l._childConstructors}else{g._childConstructors.push(i)}b.widget.bridge(f,i)};b.widget.extend=function(k){var g=d.call(arguments,1),j=0,f=g.length,h,i;for(;j<f;j++){for(h in g[j]){i=g[j][h];if(g[j].hasOwnProperty(h)&&i!==e){if(b.isPlainObject(i)){k[h]=b.isPlainObject(k[h])?b.widget.extend({},k[h],i):b.widget.extend({},i)}else{k[h]=i}}}}return k};b.widget.bridge=function(g,f){var h=f.prototype.widgetFullName||g;b.fn[g]=function(k){var i=typeof k==="string",j=d.call(arguments,1),l=this;k=!i&&j.length?b.widget.extend.apply(null,[k].concat(j)):k;if(i){this.each(function(){var n,m=b.data(this,h);if(!m){return b.error("cannot call methods on "+g+" prior to initialization; attempted to call method '"+k+"'")}if(!b.isFunction(m[k])||k.charAt(0)==="_"){return b.error("no such method '"+k+"' for "+g+" widget instance")}n=m[k].apply(m,j);if(n!==m&&n!==e){l=n&&n.jquery?l.pushStack(n.get()):n;return false}})}else{this.each(function(){var m=b.data(this,h);if(m){m.option(k||{})._init()}else{b.data(this,h,new f(k,this))}})}return l}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(f,g){g=b(g||this.defaultElement||this)[0];this.element=b(g);this.uuid=a++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),f);this.bindings=b();this.hoverable=b();this.focusable=b();if(g!==this){b.data(g,this.widgetFullName,this);this._on(true,this.element,{remove:function(h){if(h.target===g){this.destroy()}}});this.document=b(g.style?g.ownerDocument:g.document||g);this.window=b(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(j,k){var f=j,l,h,g;if(arguments.length===0){return b.widget.extend({},this.options)}if(typeof j==="string"){f={};l=j.split(".");j=l.shift();if(l.length){h=f[j]=b.widget.extend({},this.options[j]);for(g=0;g<l.length-1;g++){h[l[g]]=h[l[g]]||{};h=h[l[g]]}j=l.pop();if(k===e){return h[j]===e?null:h[j]}h[j]=k}else{if(k===e){return this.options[j]===e?null:this.options[j]}f[j]=k}}this._setOptions(f);return this},_setOptions:function(f){var g;for(g in f){this._setOption(g,f[g])}return this},_setOption:function(f,g){this.options[f]=g;if(f==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!g).attr("aria-disabled",g);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(i,h,g){var j,f=this;if(typeof i!=="boolean"){g=h;h=i;i=false}if(!g){g=h;h=this.element;j=this.widget()}else{h=j=b(h);this.bindings=this.bindings.add(h)}b.each(g,function(p,o){function m(){if(!i&&(f.options.disabled===true||b(this).hasClass("ui-state-disabled"))){return}return(typeof o==="string"?f[o]:o).apply(f,arguments)}if(typeof o!=="string"){m.guid=o.guid=o.guid||m.guid||b.guid++}var n=p.match(/^(\w+)\s*(.*)$/),l=n[1]+f.eventNamespace,k=n[2];if(k){j.delegate(k,l,m)}else{h.bind(l,m)}})},_off:function(g,f){f=(f||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;g.unbind(f).undelegate(f)},_delay:function(i,h){function g(){return(typeof i==="string"?f[i]:i).apply(f,arguments)}var f=this;return setTimeout(g,h||0)},_hoverable:function(f){this.hoverable=this.hoverable.add(f);this._on(f,{mouseenter:function(g){b(g.currentTarget).addClass("ui-state-hover")},mouseleave:function(g){b(g.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(f){this.focusable=this.focusable.add(f);this._on(f,{focusin:function(g){b(g.currentTarget).addClass("ui-state-focus")},focusout:function(g){b(g.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(f,g,h){var k,j,i=this.options[f];h=h||{};g=b.Event(g);g.type=(f===this.widgetEventPrefix?f:this.widgetEventPrefix+f).toLowerCase();g.target=this.element[0];j=g.originalEvent;if(j){for(k in j){if(!(k in g)){g[k]=j[k]}}}this.element.trigger(g,h);return !(b.isFunction(i)&&i.apply(this.element[0],[g].concat(h))===false||g.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(g,f){b.Widget.prototype["_"+g]=function(j,i,l){if(typeof i==="string"){i={effect:i}}var k,h=!i?g:i===true||typeof i==="number"?f:i.effect||f;i=i||{};if(typeof i==="number"){i={duration:i}}k=!b.isEmptyObject(i);i.complete=l;if(i.delay){j.delay(i.delay)}if(k&&b.effects&&b.effects.effect[h]){j[g](i)}else{if(h!==g&&j[h]){j[h](i.duration,i.easing,l)}else{j.queue(function(m){b(this)[g]();if(l){l.call(j[0])}m()})}}}})})(jQuery);/*!
 * jQuery UI Position 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function(e,c){e.ui=e.ui||{};var j,k=Math.max,o=Math.abs,m=Math.round,d=/left|center|right/,h=/top|center|bottom/,a=/[\+\-]\d+%?/,l=/^\w+/,b=/%$/,g=e.fn.position;function n(r,q,p){return[parseInt(r[0],10)*(b.test(r[0])?q/100:1),parseInt(r[1],10)*(b.test(r[1])?p/100:1)]}function i(p,q){return parseInt(e.css(p,q),10)||0}function f(q){var p=q[0];if(p.nodeType===9){return{width:q.width(),height:q.height(),offset:{top:0,left:0}}}if(e.isWindow(p)){return{width:q.width(),height:q.height(),offset:{top:q.scrollTop(),left:q.scrollLeft()}}}if(p.preventDefault){return{width:0,height:0,offset:{top:p.pageY,left:p.pageX}}}return{width:q.outerWidth(),height:q.outerHeight(),offset:q.offset()}}e.position={scrollbarWidth:function(){if(j!==c){return j}var q,p,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=s.children()[0];e("body").append(s);q=r.offsetWidth;s.css("overflow","scroll");p=r.offsetWidth;if(q===p){p=s[0].clientWidth}s.remove();return(j=q-p)},getScrollInfo:function(t){var s=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),q=s==="scroll"||(s==="auto"&&t.width<t.element[0].scrollWidth),p=r==="scroll"||(r==="auto"&&t.height<t.element[0].scrollHeight);return{width:q?e.position.scrollbarWidth():0,height:p?e.position.scrollbarWidth():0}},getWithinInfo:function(q){var r=e(q||window),p=e.isWindow(r[0]);return{element:r,isWindow:p,offset:r.offset()||{left:0,top:0},scrollLeft:r.scrollLeft(),scrollTop:r.scrollTop(),width:p?r.width():r.outerWidth(),height:p?r.height():r.outerHeight()}}};e.fn.position=function(z){if(!z||!z.of){return g.apply(this,arguments)}z=e.extend({},z);var A,w,u,y,t,p,v=e(z.of),s=e.position.getWithinInfo(z.within),q=e.position.getScrollInfo(s),x=(z.collision||"flip").split(" "),r={};p=f(v);if(v[0].preventDefault){z.at="left top"}w=p.width;u=p.height;y=p.offset;t=e.extend({},y);e.each(["my","at"],function(){var D=(z[this]||"").split(" "),C,B;if(D.length===1){D=d.test(D[0])?D.concat(["center"]):h.test(D[0])?["center"].concat(D):["center","center"]}D[0]=d.test(D[0])?D[0]:"center";D[1]=h.test(D[1])?D[1]:"center";C=a.exec(D[0]);B=a.exec(D[1]);r[this]=[C?C[0]:0,B?B[0]:0];z[this]=[l.exec(D[0])[0],l.exec(D[1])[0]]});if(x.length===1){x[1]=x[0]}if(z.at[0]==="right"){t.left+=w}else{if(z.at[0]==="center"){t.left+=w/2}}if(z.at[1]==="bottom"){t.top+=u}else{if(z.at[1]==="center"){t.top+=u/2}}A=n(r.at,w,u);t.left+=A[0];t.top+=A[1];return this.each(function(){var C,L,E=e(this),G=E.outerWidth(),D=E.outerHeight(),F=i(this,"marginLeft"),B=i(this,"marginTop"),K=G+F+i(this,"marginRight")+q.width,J=D+B+i(this,"marginBottom")+q.height,H=e.extend({},t),I=n(r.my,E.outerWidth(),E.outerHeight());if(z.my[0]==="right"){H.left-=G}else{if(z.my[0]==="center"){H.left-=G/2}}if(z.my[1]==="bottom"){H.top-=D}else{if(z.my[1]==="center"){H.top-=D/2}}H.left+=I[0];H.top+=I[1];if(!e.support.offsetFractions){H.left=m(H.left);H.top=m(H.top)}C={marginLeft:F,marginTop:B};e.each(["left","top"],function(N,M){if(e.ui.position[x[N]]){e.ui.position[x[N]][M](H,{targetWidth:w,targetHeight:u,elemWidth:G,elemHeight:D,collisionPosition:C,collisionWidth:K,collisionHeight:J,offset:[A[0]+I[0],A[1]+I[1]],my:z.my,at:z.at,within:s,elem:E})}});if(z.using){L=function(P){var R=y.left-H.left,O=R+w-G,Q=y.top-H.top,N=Q+u-D,M={target:{element:v,left:y.left,top:y.top,width:w,height:u},element:{element:E,left:H.left,top:H.top,width:G,height:D},horizontal:O<0?"left":R>0?"right":"center",vertical:N<0?"top":Q>0?"bottom":"middle"};if(w<G&&o(R+O)<w){M.horizontal="center"}if(u<D&&o(Q+N)<u){M.vertical="middle"}if(k(o(R),o(O))>k(o(Q),o(N))){M.important="horizontal"}else{M.important="vertical"}z.using.call(this,P,M)}}E.offset(e.extend(H,{using:L}))})};e.ui.position={fit:{left:function(t,s){var r=s.within,v=r.isWindow?r.scrollLeft:r.offset.left,x=r.width,u=t.left-s.collisionPosition.marginLeft,w=v-u,q=u+s.collisionWidth-x-v,p;if(s.collisionWidth>x){if(w>0&&q<=0){p=t.left+w+s.collisionWidth-x-v;t.left+=w-p}else{if(q>0&&w<=0){t.left=v}else{if(w>q){t.left=v+x-s.collisionWidth}else{t.left=v}}}}else{if(w>0){t.left+=w}else{if(q>0){t.left-=q}else{t.left=k(t.left-u,t.left)}}}},top:function(s,r){var q=r.within,w=q.isWindow?q.scrollTop:q.offset.top,x=r.within.height,u=s.top-r.collisionPosition.marginTop,v=w-u,t=u+r.collisionHeight-x-w,p;if(r.collisionHeight>x){if(v>0&&t<=0){p=s.top+v+r.collisionHeight-x-w;s.top+=v-p}else{if(t>0&&v<=0){s.top=w}else{if(v>t){s.top=w+x-r.collisionHeight}else{s.top=w}}}}else{if(v>0){s.top+=v}else{if(t>0){s.top-=t}else{s.top=k(s.top-u,s.top)}}}}},flip:{left:function(v,u){var t=u.within,z=t.offset.left+t.scrollLeft,C=t.width,r=t.isWindow?t.scrollLeft:t.offset.left,w=v.left-u.collisionPosition.marginLeft,A=w-r,q=w+u.collisionWidth-C-r,y=u.my[0]==="left"?-u.elemWidth:u.my[0]==="right"?u.elemWidth:0,B=u.at[0]==="left"?u.targetWidth:u.at[0]==="right"?-u.targetWidth:0,s=-2*u.offset[0],p,x;if(A<0){p=v.left+y+B+s+u.collisionWidth-C-z;if(p<0||p<o(A)){v.left+=y+B+s}}else{if(q>0){x=v.left-u.collisionPosition.marginLeft+y+B+s-r;if(x>0||o(x)<q){v.left+=y+B+s}}}},top:function(u,t){var s=t.within,B=s.offset.top+s.scrollTop,C=s.height,p=s.isWindow?s.scrollTop:s.offset.top,w=u.top-t.collisionPosition.marginTop,y=w-p,v=w+t.collisionHeight-C-p,z=t.my[1]==="top",x=z?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,D=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,r=-2*t.offset[1],A,q;if(y<0){q=u.top+x+D+r+t.collisionHeight-C-B;if((u.top+x+D+r)>y&&(q<0||q<o(y))){u.top+=x+D+r}}else{if(v>0){A=u.top-t.collisionPosition.marginTop+x+D+r-p;if((u.top+x+D+r)>v&&(A>0||o(A)<v)){u.top+=x+D+r}}}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments);e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments);e.ui.position.fit.top.apply(this,arguments)}}};(function(){var t,v,q,s,r,p=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(p?"div":"body");q={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(p){e.extend(q,{position:"absolute",left:"-1000px",top:"-1000px"})}for(r in q){t.style[r]=q[r]}t.appendChild(u);v=p||document.documentElement;v.insertBefore(t,v.firstChild);u.style.cssText="position: absolute; left: 10.7432222px;";s=e(u).offset().left;e.support.offsetFractions=s>10&&s<11;t.innerHTML="";v.removeChild(t)})()}(jQuery));/*!
 * jQuery UI Mouse 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(b,c){var a=false;b(document).mouseup(function(){a=false});b.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(e){return d._mouseDown(e)}).bind("click."+this.widgetName,function(e){if(true===b.data(e.target,d.widgetName+".preventClickEvent")){b.removeData(e.target,d.widgetName+".preventClickEvent");e.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(f){if(a){return}(this._mouseStarted&&this._mouseUp(f));this._mouseDownEvent=f;var e=this,g=(f.which===1),d=(typeof this.options.cancel==="string"&&f.target.nodeName?b(f.target).closest(this.options.cancel).length:false);if(!g||d||!this._mouseCapture(f)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=(this._mouseStart(f)!==false);if(!this._mouseStarted){f.preventDefault();return true}}if(true===b.data(f.target,this.widgetName+".preventClickEvent")){b.removeData(f.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(h){return e._mouseMove(h)};this._mouseUpDelegate=function(h){return e._mouseUp(h)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);f.preventDefault();a=true;return true},_mouseMove:function(d){if(b.ui.ie&&(!document.documentMode||document.documentMode<9)&&!d.button){return this._mouseUp(d)}if(this._mouseStarted){this._mouseDrag(d);return d.preventDefault()}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,d)!==false);(this._mouseStarted?this._mouseDrag(d):this._mouseUp(d))}return !this._mouseStarted},_mouseUp:function(d){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(d.target===this._mouseDownEvent.target){b.data(d.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(d)}return false},_mouseDistanceMet:function(d){return(Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance)},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);/*!
 * jQuery UI Button 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function(f,b){var k,e,a,h,i="ui-button ui-widget ui-state-default ui-corner-all",c="ui-state-hover ui-state-active ",g="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var l=f(this).find(":ui-button");setTimeout(function(){l.button("refresh")},1)},d=function(m){var l=m.name,n=m.form,o=f([]);if(l){l=l.replace(/'/g,"\\'");if(n){o=f(n).find("[name='"+l+"']")}else{o=f("[name='"+l+"']",m.ownerDocument).filter(function(){return !this.form})}}return o};f.widget("ui.button",{version:"1.10.0",defaultElement:"<button>",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,j);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.prop("disabled")}else{this.element.prop("disabled",this.options.disabled)}this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var o=this,m=this.options,p=this.type==="checkbox"||this.type==="radio",n=!p?"ui-state-active":"",l="ui-state-focus";if(m.label===null){m.label=(this.type==="input"?this.buttonElement.val():this.buttonElement.html())}this._hoverable(this.buttonElement);this.buttonElement.addClass(i).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(m.disabled){return}if(this===k){f(this).addClass("ui-state-active")}}).bind("mouseleave"+this.eventNamespace,function(){if(m.disabled){return}f(this).removeClass(n)}).bind("click"+this.eventNamespace,function(q){if(m.disabled){q.preventDefault();q.stopImmediatePropagation()}});this.element.bind("focus"+this.eventNamespace,function(){o.buttonElement.addClass(l)}).bind("blur"+this.eventNamespace,function(){o.buttonElement.removeClass(l)});if(p){this.element.bind("change"+this.eventNamespace,function(){if(h){return}o.refresh()});this.buttonElement.bind("mousedown"+this.eventNamespace,function(q){if(m.disabled){return}h=false;e=q.pageX;a=q.pageY}).bind("mouseup"+this.eventNamespace,function(q){if(m.disabled){return}if(e!==q.pageX||a!==q.pageY){h=true}})}if(this.type==="checkbox"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(m.disabled||h){return false}})}else{if(this.type==="radio"){this.buttonElement.bind("click"+this.eventNamespace,function(){if(m.disabled||h){return false}f(this).addClass("ui-state-active");o.buttonElement.attr("aria-pressed","true");var q=o.element[0];d(q).not(q).map(function(){return f(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")})}else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(m.disabled){return false}f(this).addClass("ui-state-active");k=this;o.document.one("mouseup",function(){k=null})}).bind("mouseup"+this.eventNamespace,function(){if(m.disabled){return false}f(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(q){if(m.disabled){return false}if(q.keyCode===f.ui.keyCode.SPACE||q.keyCode===f.ui.keyCode.ENTER){f(this).addClass("ui-state-active")}}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){f(this).removeClass("ui-state-active")});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(q){if(q.keyCode===f.ui.keyCode.SPACE){f(this).click()}})}}}this._setOption("disabled",m.disabled);this._resetButton()},_determineButtonType:function(){var l,n,m;if(this.element.is("[type=checkbox]")){this.type="checkbox"}else{if(this.element.is("[type=radio]")){this.type="radio"}else{if(this.element.is("input")){this.type="input"}else{this.type="button"}}}if(this.type==="checkbox"||this.type==="radio"){l=this.element.parents().last();n="label[for='"+this.element.attr("id")+"']";this.buttonElement=l.find(n);if(!this.buttonElement.length){l=l.length?l.siblings():this.element.siblings();this.buttonElement=l.filter(n);if(!this.buttonElement.length){this.buttonElement=l.find(n)}}this.element.addClass("ui-helper-hidden-accessible");m=this.element.is(":checked");if(m){this.buttonElement.addClass("ui-state-active")}this.buttonElement.prop("aria-pressed",m)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(i+" "+c+" "+g).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title")}},_setOption:function(l,m){this._super(l,m);if(l==="disabled"){if(m){this.element.prop("disabled",true)}else{this.element.prop("disabled",false)}return}this._resetButton()},refresh:function(){var l=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");if(l!==this.options.disabled){this._setOption("disabled",l)}if(this.type==="radio"){d(this.element[0]).each(function(){if(f(this).is(":checked")){f(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true")}else{f(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}})}else{if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true")}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false")}}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label)}return}var p=this.buttonElement.removeClass(g),n=f("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(p.empty()).text(),m=this.options.icons,l=m.primary&&m.secondary,o=[];if(m.primary||m.secondary){if(this.options.text){o.push("ui-button-text-icon"+(l?"s":(m.primary?"-primary":"-secondary")))}if(m.primary){p.prepend("<span class='ui-button-icon-primary ui-icon "+m.primary+"'></span>")}if(m.secondary){p.append("<span class='ui-button-icon-secondary ui-icon "+m.secondary+"'></span>")}if(!this.options.text){o.push(l?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){p.attr("title",f.trim(n))}}}else{o.push("ui-button-text-only")}p.addClass(o.join(" "))}});f.widget("ui.buttonset",{version:"1.10.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(l,m){if(l==="disabled"){this.buttons.button("option",l,m)}this._super(l,m)},refresh:function(){var l=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return f(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(l?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(l?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return f(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery));/*!
 * jQuery UI Resizable 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(c,d){function b(e){return parseInt(e,10)||0}function a(e){return !isNaN(parseInt(e,10))}c.widget("ui.resizable",c.ui.mouse,{version:"1.10.0",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var l,f,j,g,e,h=this,k=this.options;this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!(k.aspectRatio),aspectRatio:k.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:k.helper||k.ghost||k.animate?k.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap(c("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=k.handles||(!c(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}l=this.handles.split(",");this.handles={};for(f=0;f<l.length;f++){j=c.trim(l[f]);e="ui-resizable-"+j;g=c("<div class='ui-resizable-handle "+e+"'></div>");g.css({zIndex:k.zIndex});if("se"===j){g.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[j]=".ui-resizable-"+j;this.element.append(g)}}this._renderAxis=function(q){var n,o,m,p;q=q||this.element;for(n in this.handles){if(this.handles[n].constructor===String){this.handles[n]=c(this.handles[n],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){o=c(this.handles[n],this.element);p=/sw|ne|nw|se|n|s/.test(n)?o.outerHeight():o.outerWidth();m=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");q.css(m,p);this._proportionallyResize()}if(!c(this.handles[n]).length){continue}}};this._renderAxis(this.element);this._handles=c(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!h.resizing){if(this.className){g=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}h.axis=g&&g[1]?g[1]:"se"}});if(k.autoHide){this._handles.hide();c(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(k.disabled){return}c(this).removeClass("ui-resizable-autohide");h._handles.show()}).mouseleave(function(){if(k.disabled){return}if(!h.resizing){c(this).addClass("ui-resizable-autohide");h._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var f,e=function(g){c(g).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);f=this.element;this.originalElement.css({position:f.css("position"),width:f.outerWidth(),height:f.outerHeight(),top:f.css("top"),left:f.css("left")}).insertAfter(f);f.remove()}this.originalElement.css("resize",this.originalResizeStyle);e(this.originalElement);return this},_mouseCapture:function(g){var f,h,e=false;for(f in this.handles){h=c(this.handles[f])[0];if(h===g.target||c.contains(h,g.target)){e=true}}return !this.options.disabled&&e},_mouseStart:function(g){var k,h,j,i=this.options,f=this.element.position(),e=this.element;this.resizing=true;if((/absolute/).test(e.css("position"))){e.css({position:"absolute",top:e.css("top"),left:e.css("left")})}else{if(e.is(".ui-draggable")){e.css({position:"absolute",top:f.top,left:f.left})}}this._renderProxy();k=b(this.helper.css("left"));h=b(this.helper.css("top"));if(i.containment){k+=c(i.containment).scrollLeft()||0;h+=c(i.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:k,top:h};this.size=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()};this.originalSize=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()};this.originalPosition={left:k,top:h};this.sizeDiff={width:e.outerWidth()-e.width(),height:e.outerHeight()-e.height()};this.originalMousePosition={left:g.pageX,top:g.pageY};this.aspectRatio=(typeof i.aspectRatio==="number")?i.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);j=c(".ui-resizable-"+this.axis).css("cursor");c("body").css("cursor",j==="auto"?this.axis+"-resize":j);e.addClass("ui-resizable-resizing");this._propagate("start",g);return true},_mouseDrag:function(e){var k,g=this.helper,l={},i=this.originalMousePosition,m=this.axis,o=this.position.top,f=this.position.left,n=this.size.width,j=this.size.height,q=(e.pageX-i.left)||0,p=(e.pageY-i.top)||0,h=this._change[m];if(!h){return false}k=h.apply(this,[e,q,p]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey){k=this._updateRatio(k,e)}k=this._respectSize(k,e);this._updateCache(k);this._propagate("resize",e);if(this.position.top!==o){l.top=this.position.top+"px"}if(this.position.left!==f){l.left=this.position.left+"px"}if(this.size.width!==n){l.width=this.size.width+"px"}if(this.size.height!==j){l.height=this.size.height+"px"}g.css(l);if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!c.isEmptyObject(l)){this._trigger("resize",e,this.ui())}return false},_mouseStop:function(h){this.resizing=false;var g,e,f,k,n,j,m,i=this.options,l=this;if(this._helper){g=this._proportionallyResizeElements;e=g.length&&(/textarea/i).test(g[0].nodeName);f=e&&c.ui.hasScroll(g[0],"left")?0:l.sizeDiff.height;k=e?0:l.sizeDiff.width;n={width:(l.helper.width()-k),height:(l.helper.height()-f)};j=(parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left))||null;m=(parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top))||null;if(!i.animate){this.element.css(c.extend(n,{top:m,left:j}))}l.helper.height(l.size.height);l.helper.width(l.size.width);if(this._helper&&!i.animate){this._proportionallyResize()}}c("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",h);if(this._helper){this.helper.remove()}return false},_updateVirtualBoundaries:function(g){var i,h,f,k,e,j=this.options;e={minWidth:a(j.minWidth)?j.minWidth:0,maxWidth:a(j.maxWidth)?j.maxWidth:Infinity,minHeight:a(j.minHeight)?j.minHeight:0,maxHeight:a(j.maxHeight)?j.maxHeight:Infinity};if(this._aspectRatio||g){i=e.minHeight*this.aspectRatio;f=e.minWidth/this.aspectRatio;h=e.maxHeight*this.aspectRatio;k=e.maxWidth/this.aspectRatio;if(i>e.minWidth){e.minWidth=i}if(f>e.minHeight){e.minHeight=f}if(h<e.maxWidth){e.maxWidth=h}if(k<e.maxHeight){e.maxHeight=k}}this._vBoundaries=e},_updateCache:function(e){this.offset=this.helper.offset();if(a(e.left)){this.position.left=e.left}if(a(e.top)){this.position.top=e.top}if(a(e.height)){this.size.height=e.height}if(a(e.width)){this.size.width=e.width}},_updateRatio:function(g){var h=this.position,f=this.size,e=this.axis;if(a(g.height)){g.width=(g.height*this.aspectRatio)}else{if(a(g.width)){g.height=(g.width/this.aspectRatio)}}if(e==="sw"){g.left=h.left+(f.width-g.width);g.top=null}if(e==="nw"){g.top=h.top+(f.height-g.height);g.left=h.left+(f.width-g.width)}return g},_respectSize:function(j){var g=this._vBoundaries,m=this.axis,p=a(j.width)&&g.maxWidth&&(g.maxWidth<j.width),k=a(j.height)&&g.maxHeight&&(g.maxHeight<j.height),h=a(j.width)&&g.minWidth&&(g.minWidth>j.width),n=a(j.height)&&g.minHeight&&(g.minHeight>j.height),f=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,i=/sw|nw|w/.test(m),e=/nw|ne|n/.test(m);if(h){j.width=g.minWidth}if(n){j.height=g.minHeight}if(p){j.width=g.maxWidth}if(k){j.height=g.maxHeight}if(h&&i){j.left=f-g.minWidth}if(p&&i){j.left=f-g.maxWidth}if(n&&e){j.top=l-g.minHeight}if(k&&e){j.top=l-g.maxHeight}if(!j.width&&!j.height&&!j.left&&j.top){j.top=null}else{if(!j.width&&!j.height&&!j.top&&j.left){j.left=null}}return j},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var h,f,l,e,k,g=this.helper||this.element;for(h=0;h<this._proportionallyResizeElements.length;h++){k=this._proportionallyResizeElements[h];if(!this.borderDif){this.borderDif=[];l=[k.css("borderTopWidth"),k.css("borderRightWidth"),k.css("borderBottomWidth"),k.css("borderLeftWidth")];e=[k.css("paddingTop"),k.css("paddingRight"),k.css("paddingBottom"),k.css("paddingLeft")];for(f=0;f<l.length;f++){this.borderDif[f]=(parseInt(l[f],10)||0)+(parseInt(e[f],10)||0)}}k.css({height:(g.height()-this.borderDif[0]-this.borderDif[2])||0,width:(g.width()-this.borderDif[1]-this.borderDif[3])||0})}},_renderProxy:function(){var e=this.element,f=this.options;this.elementOffset=e.offset();if(this._helper){this.helper=this.helper||c("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++f.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(f,e){return{width:this.originalSize.width+e}},w:function(g,e){var f=this.originalSize,h=this.originalPosition;return{left:h.left+e,width:f.width-e}},n:function(h,f,e){var g=this.originalSize,i=this.originalPosition;return{top:i.top+e,height:g.height-e}},s:function(g,f,e){return{height:this.originalSize.height+e}},se:function(g,f,e){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[g,f,e]))},sw:function(g,f,e){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[g,f,e]))},ne:function(g,f,e){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[g,f,e]))},nw:function(g,f,e){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[g,f,e]))}},_propagate:function(f,e){c.ui.plugin.call(this,f,[e,this.ui()]);(f!=="resize"&&this._trigger(f,e,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.ui.plugin.add("resizable","animate",{stop:function(h){var m=c(this).data("ui-resizable"),j=m.options,g=m._proportionallyResizeElements,e=g.length&&(/textarea/i).test(g[0].nodeName),f=e&&c.ui.hasScroll(g[0],"left")?0:m.sizeDiff.height,l=e?0:m.sizeDiff.width,i={width:(m.size.width-l),height:(m.size.height-f)},k=(parseInt(m.element.css("left"),10)+(m.position.left-m.originalPosition.left))||null,n=(parseInt(m.element.css("top"),10)+(m.position.top-m.originalPosition.top))||null;m.element.animate(c.extend(i,n&&k?{top:n,left:k}:{}),{duration:j.animateDuration,easing:j.animateEasing,step:function(){var o={width:parseInt(m.element.css("width"),10),height:parseInt(m.element.css("height"),10),top:parseInt(m.element.css("top"),10),left:parseInt(m.element.css("left"),10)};if(g&&g.length){c(g[0]).css({width:o.width,height:o.height})}m._updateCache(o);m._propagate("resize",h)}})}});c.ui.plugin.add("resizable","containment",{start:function(){var m,g,q,e,l,h,r,n=c(this).data("ui-resizable"),k=n.options,j=n.element,f=k.containment,i=(f instanceof c)?f.get(0):(/parent/.test(f))?j.parent().get(0):f;if(!i){return}n.containerElement=c(i);if(/document/.test(f)||f===document){n.containerOffset={left:0,top:0};n.containerPosition={left:0,top:0};n.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}}else{m=c(i);g=[];c(["Top","Right","Left","Bottom"]).each(function(p,o){g[p]=b(m.css("padding"+o))});n.containerOffset=m.offset();n.containerPosition=m.position();n.containerSize={height:(m.innerHeight()-g[3]),width:(m.innerWidth()-g[1])};q=n.containerOffset;e=n.containerSize.height;l=n.containerSize.width;h=(c.ui.hasScroll(i,"left")?i.scrollWidth:l);r=(c.ui.hasScroll(i)?i.scrollHeight:e);n.parentData={element:i,left:q.left,top:q.top,width:h,height:r}}},resize:function(f){var k,q,j,i,l=c(this).data("ui-resizable"),h=l.options,n=l.containerOffset,m=l.position,p=l._aspectRatio||f.shiftKey,e={top:0,left:0},g=l.containerElement;if(g[0]!==document&&(/static/).test(g.css("position"))){e=n}if(m.left<(l._helper?n.left:0)){l.size.width=l.size.width+(l._helper?(l.position.left-n.left):(l.position.left-e.left));if(p){l.size.height=l.size.width/l.aspectRatio}l.position.left=h.helper?n.left:0}if(m.top<(l._helper?n.top:0)){l.size.height=l.size.height+(l._helper?(l.position.top-n.top):l.position.top);if(p){l.size.width=l.size.height*l.aspectRatio}l.position.top=l._helper?n.top:0}l.offset.left=l.parentData.left+l.position.left;l.offset.top=l.parentData.top+l.position.top;k=Math.abs((l._helper?l.offset.left-e.left:(l.offset.left-e.left))+l.sizeDiff.width);q=Math.abs((l._helper?l.offset.top-e.top:(l.offset.top-n.top))+l.sizeDiff.height);j=l.containerElement.get(0)===l.element.parent().get(0);i=/relative|absolute/.test(l.containerElement.css("position"));if(j&&i){k-=l.parentData.left}if(k+l.size.width>=l.parentData.width){l.size.width=l.parentData.width-k;if(p){l.size.height=l.size.width/l.aspectRatio}}if(q+l.size.height>=l.parentData.height){l.size.height=l.parentData.height-q;if(p){l.size.width=l.size.height*l.aspectRatio}}},stop:function(){var k=c(this).data("ui-resizable"),f=k.options,l=k.containerOffset,e=k.containerPosition,g=k.containerElement,i=c(k.helper),n=i.offset(),m=i.outerWidth()-k.sizeDiff.width,j=i.outerHeight()-k.sizeDiff.height;if(k._helper&&!f.animate&&(/relative/).test(g.css("position"))){c(this).css({left:n.left-e.left-l.left,width:m,height:j})}if(k._helper&&!f.animate&&(/static/).test(g.css("position"))){c(this).css({left:n.left-e.left-l.left,width:m,height:j})}}});c.ui.plugin.add("resizable","alsoResize",{start:function(){var e=c(this).data("ui-resizable"),g=e.options,f=function(h){c(h).each(function(){var i=c(this);i.data("ui-resizable-alsoresize",{width:parseInt(i.width(),10),height:parseInt(i.height(),10),left:parseInt(i.css("left"),10),top:parseInt(i.css("top"),10)})})};if(typeof(g.alsoResize)==="object"&&!g.alsoResize.parentNode){if(g.alsoResize.length){g.alsoResize=g.alsoResize[0];f(g.alsoResize)}else{c.each(g.alsoResize,function(h){f(h)})}}else{f(g.alsoResize)}},resize:function(g,i){var f=c(this).data("ui-resizable"),j=f.options,h=f.originalSize,l=f.originalPosition,k={height:(f.size.height-h.height)||0,width:(f.size.width-h.width)||0,top:(f.position.top-l.top)||0,left:(f.position.left-l.left)||0},e=function(m,n){c(m).each(function(){var q=c(this),r=c(this).data("ui-resizable-alsoresize"),p={},o=n&&n.length?n:q.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(o,function(s,u){var t=(r[u]||0)+(k[u]||0);if(t&&t>=0){p[u]=t||null}});q.css(p)})};if(typeof(j.alsoResize)==="object"&&!j.alsoResize.nodeType){c.each(j.alsoResize,function(m,n){e(m,n)})}else{e(j.alsoResize)}},stop:function(){c(this).removeData("resizable-alsoresize")}});c.ui.plugin.add("resizable","ghost",{start:function(){var f=c(this).data("ui-resizable"),g=f.options,e=f.size;f.ghost=f.originalElement.clone();f.ghost.css({opacity:0.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof g.ghost==="string"?g.ghost:"");f.ghost.appendTo(f.helper)},resize:function(){var e=c(this).data("ui-resizable");if(e.ghost){e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})}},stop:function(){var e=c(this).data("ui-resizable");if(e.ghost&&e.helper){e.helper.get(0).removeChild(e.ghost.get(0))}}});c.ui.plugin.add("resizable","grid",{resize:function(){var r=c(this).data("ui-resizable"),i=r.options,s=r.size,k=r.originalSize,n=r.originalPosition,t=r.axis,f=typeof i.grid==="number"?[i.grid,i.grid]:i.grid,p=(f[0]||1),m=(f[1]||1),h=Math.round((s.width-k.width)/p)*p,g=Math.round((s.height-k.height)/m)*m,l=k.width+h,e=k.height+g,j=i.maxWidth&&(i.maxWidth<l),u=i.maxHeight&&(i.maxHeight<e),q=i.minWidth&&(i.minWidth>l),v=i.minHeight&&(i.minHeight>e);i.grid=f;if(q){l=l+p}if(v){e=e+m}if(j){l=l-p}if(u){e=e-m}if(/^(se|s|e)$/.test(t)){r.size.width=l;r.size.height=e}else{if(/^(ne)$/.test(t)){r.size.width=l;r.size.height=e;r.position.top=n.top-g}else{if(/^(sw)$/.test(t)){r.size.width=l;r.size.height=e;r.position.left=n.left-h}else{r.size.width=l;r.size.height=e;r.position.top=n.top-g;r.position.left=n.left-h}}}}})})(jQuery);/*!
 * jQuery UI Dialog 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 *	@requires ext/jquery/jquery.migrate.js
 */
(function(c,d){var a={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},b={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};c.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:true,buttons:[],closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(f){var e=c(this).css(f).offset().top;if(e<0){c(this).css("top",f.top-e)}}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();if(this.options.draggable&&c.fn.draggable){this._makeDraggable()}if(this.options.resizable&&c.fn.resizable){this._makeResizable()}this._isOpen=false},_init:function(){if(this.options.autoOpen){this.open()}},_appendTo:function(){var e=this.options.appendTo;if(e&&(e.jquery||e.nodeType)){return c(e)}return this.document.find(e||"body").eq(0)},_destroy:function(){var f,e=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(true,true).remove();if(this.originalTitle){this.element.attr("title",this.originalTitle)}f=e.parent.children().eq(e.index);if(f.length&&f[0]!==this.element[0]){f.before(this.element)}else{e.parent.append(this.element)}},widget:function(){return this.uiDialog},disable:c.noop,enable:c.noop,close:function(f){var e=this;if(!this._isOpen||this._trigger("beforeClose",f)===false){return}this._isOpen=false;this._destroyOverlay();if(!this.opener.filter(":focusable").focus().length){c(this.document[0].activeElement).blur()}this._hide(this.uiDialog,this.options.hide,function(){e._trigger("close",f)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(g,e){var f=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;if(f&&!e){this._trigger("focus",g)}return f},open:function(){if(this._isOpen){if(this._moveToTop()){this._focusTabbable()}return}this.opener=c(this.document[0].activeElement);this._size();this._position();this._createOverlay();this._moveToTop(null,true);this._show(this.uiDialog,this.options.show);this._focusTabbable();this._isOpen=true;this._trigger("open");this._trigger("focus")},_focusTabbable:function(){var e=this.element.find("[autofocus]");if(!e.length){e=this.element.find(":tabbable")}if(!e.length){e=this.uiDialogButtonPane.find(":tabbable")}if(!e.length){e=this.uiDialogTitlebarClose.filter(":tabbable")}if(!e.length){e=this.uiDialog}e.eq(0).focus()},_keepFocus:function(e){function f(){var h=this.document[0].activeElement,g=this.uiDialog[0]===h||c.contains(this.uiDialog[0],h);if(!g){this._focusTabbable()}}e.preventDefault();f.call(this);this._delay(f)},_createWrapper:function(){this.uiDialog=c("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(g){if(this.options.closeOnEscape&&!g.isDefaultPrevented()&&g.keyCode&&g.keyCode===c.ui.keyCode.ESCAPE){g.preventDefault();this.close(g);return}if(g.keyCode!==c.ui.keyCode.TAB){return}var f=this.uiDialog.find(":tabbable"),h=f.filter(":first"),e=f.filter(":last");if((g.target===e[0]||g.target===this.uiDialog[0])&&!g.shiftKey){h.focus(1);g.preventDefault()}else{if((g.target===h[0]||g.target===this.uiDialog[0])&&g.shiftKey){e.focus(1);g.preventDefault()}}},mousedown:function(e){if(this._moveToTop(e)){this._focusTabbable()}}});if(!this.element.find("[aria-describedby]").length){this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})}},_createTitlebar:function(){var e;this.uiDialogTitlebar=c("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(f){if(!c(f.target).closest(".ui-dialog-titlebar-close")){this.uiDialog.focus()}}});this.uiDialogTitlebarClose=c("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:false}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(f){f.preventDefault();this.close(f)}});e=c("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);this._title(e);this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(e){if(!this.options.title){e.html("&#160;")}e.html(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=c("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=c("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var f=this,e=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(c.isEmptyObject(e)){this.uiDialog.removeClass("ui-dialog-buttons");return}c.each(e,function(g,h){var i,j;h=c.isFunction(h)?{click:h,text:g}:h;h=c.extend({type:"button"},h);i=h.click;h.click=function(){i.apply(f.element[0],arguments)};j={icons:h.icons,text:h.showText};delete h.icons;delete h.showText;c("<button></button>",h).button(j).appendTo(f.uiButtonSet)});this.uiDialog.addClass("ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var g=this,f=this.options;function e(h){return{position:h.position,offset:h.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(h,i){c(this).addClass("ui-dialog-dragging");g._trigger("dragStart",h,e(i))},drag:function(h,i){g._trigger("drag",h,e(i))},stop:function(h,i){f.position=[i.position.left-g.document.scrollLeft(),i.position.top-g.document.scrollTop()];c(this).removeClass("ui-dialog-dragging");g._trigger("dragStop",h,e(i))}})},_makeResizable:function(){var j=this,h=this.options,i=h.resizable,e=this.uiDialog.css("position"),g=typeof i==="string"?i:"n,e,s,w,se,sw,ne,nw";function f(k){return{originalPosition:k.originalPosition,originalSize:k.originalSize,position:k.position,size:k.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:h.maxWidth,maxHeight:h.maxHeight,minWidth:h.minWidth,minHeight:this._minHeight(),handles:g,start:function(k,l){c(this).addClass("ui-dialog-resizing");j._trigger("resizeStart",k,f(l))},resize:function(k,l){j._trigger("resize",k,f(l))},stop:function(k,l){h.height=c(this).height();h.width=c(this).width();c(this).removeClass("ui-dialog-resizing");j._trigger("resizeStop",k,f(l))}}).css("position",e)},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");if(!e){this.uiDialog.show()}this.uiDialog.position(this.options.position);if(!e){this.uiDialog.hide()}},_setOptions:function(g){var h=this,f=false,e={};c.each(g,function(i,j){h._setOption(i,j);if(i in a){f=true}if(i in b){e[i]=j}});if(f){this._size();this._position()}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option",e)}},_setOption:function(g,h){var f,i,e=this.uiDialog;if(g==="dialogClass"){e.removeClass(this.options.dialogClass).addClass(h)}if(g==="disabled"){return}this._super(g,h);if(g==="appendTo"){this.uiDialog.appendTo(this._appendTo())}if(g==="buttons"){this._createButtons()}if(g==="closeText"){this.uiDialogTitlebarClose.button({label:""+h})}if(g==="draggable"){f=e.is(":data(ui-draggable)");if(f&&!h){e.draggable("destroy")}if(!f&&h){this._makeDraggable()}}if(g==="position"){this._position()}if(g==="resizable"){i=e.is(":data(ui-resizable)");if(i&&!h){e.resizable("destroy")}if(i&&typeof h==="string"){e.resizable("option","handles",h)}if(!i&&h!==false){this._makeResizable()}}if(g==="title"){this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))}},_size:function(){var e,g,h,f=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(f.minWidth>f.width){f.width=f.minWidth}e=this.uiDialog.css({height:"auto",width:f.width}).outerHeight();g=Math.max(0,f.minHeight-e);h=typeof f.maxHeight==="number"?Math.max(0,f.maxHeight-e):"none";if(f.height==="auto"){this.element.css({minHeight:g,maxHeight:h,height:"auto"})}else{this.element.height(Math.max(0,f.height-e))}if(this.uiDialog.is(":data(ui-resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}},_createOverlay:function(){if(!this.options.modal){return}if(!c.ui.dialog.overlayInstances){this._delay(function(){if(c.ui.dialog.overlayInstances){this._on(this.document,{focusin:function(e){if(!c(e.target).closest(".ui-dialog").length){e.preventDefault();c(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable()}}})}})}this.overlay=c("<div>").addClass("ui-widget-overlay ui-front").appendTo(this.document[0].body);this._on(this.overlay,{mousedown:"_keepFocus"});c.ui.dialog.overlayInstances++},_destroyOverlay:function(){if(!this.options.modal){return}c.ui.dialog.overlayInstances--;if(!c.ui.dialog.overlayInstances){this._off(this.document,"focusin")}this.overlay.remove()}});c.ui.dialog.overlayInstances=0;if(c.uiBackCompat!==false){c.widget("ui.dialog",c.ui.dialog,{_position:function(){var f=this.options.position,g=[],h=[0,0],e;if(f){if(typeof f==="string"||(typeof f==="object"&&"0" in f)){g=f.split?f.split(" "):[f[0],f[1]];if(g.length===1){g[1]=g[0]}c.each(["left","top"],function(k,j){if(+g[k]===g[k]){h[k]=g[k];g[k]=j}});f={my:g[0]+(h[0]<0?h[0]:"+"+h[0])+" "+g[1]+(h[1]<0?h[1]:"+"+h[1]),at:g.join(" ")}}f=c.extend({},c.ui.dialog.prototype.options.position,f)}else{f=c.ui.dialog.prototype.options.position}e=this.uiDialog.is(":visible");if(!e){this.uiDialog.show()}this.uiDialog.position(f);if(!e){this.uiDialog.hide()}}})}}(jQuery));function str_repeat(b,a){for(var c=[];a>0;c[--a]=b){}return(c.join(""))}function sprintf(){var h=0,l,j=arguments[h++],d=[],e,b,k,n;var q=j;if(typeof arguments[1]=="object"){var g=arguments[1];return q.replace(/%\(([^)]+)\)/g,function(c,a){return g[a]})}while(j){if(e=/^[^\x25]+/.exec(j)){d.push(e[0])}else{if(e=/^\x25{2}/.exec(j)){d.push("%")}else{if(e=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(j)){var r=e[1]||h++;if(r>=arguments.length){throw ("Too few arguments: "+q)}var l=arguments[r];switch(e[7]){case"b":l=parseInt(l);l=l.toString(2);break;case"c":l=String.fromCharCode(l);break;case"d":l=parseInt(l);break;case"e":l=parseFloat(l);l=e[6]?l.toExponential(e[6]):l.toExponential();break;case"f":l=e[6]?parseFloat(l).toFixed(e[6]):parseFloat(l);break;case"o":l=parseInt(l);l=l.toString(8);break;case"s":l=((l=String(l))&&e[6]?l.substring(0,e[6]):l);break;case"u":l=Math.abs(l);break;case"x":l=parseInt(l);l=l.toString(16);break;case"X":l=parseInt(l);l=l.toString(16).toUpperCase();break}l=(/[def]/.test(e[7])&&e[2]&&l>0?"+"+l:l);k=e[3]?e[3]=="0"?"0":e[3].charAt(1):" ";n=e[5]-String(l).length;b=e[5]?str_repeat(k,n):"";d.push(e[4]?l+b:b+l)}else{throw ("Huh ?!")}}}j=j.substring(e[0].length)}return d.join("")}function vsprintf(b,a){return sprintf.apply(this,[b].concat(a))};tagged.namespace("modules.lightbox");tagged.modules.lightbox={_shell:"<div>%s</div>",_dialog:null,_config:null,_parentEl:null,init:function(b){if(!(b&&b.body)){return false}if(!this._parentEl){this._parentEl=$("<div class='dialog-parent'></div>");$(document.body).append(this._parentEl)}this._config=b;var a=sprintf(this._shell,b.body);this._parentEl.html(a);this._dialog=$(this._parentEl).dialog({modal:true,resizable:false,closeOnEscape:true,draggable:false,position:b.position||"center",autoOpen:false,title:b.title,width:b.width||"auto",height:b.height||"auto",minHeight:b.minHeight||150,dialogClass:b.className||"",zIndex:b.zIndex||1002});$(this.getDialogDom()).addClass("tagged_lightbox");if(typeof b.closeOnEscape!=="undefined"){this._dialog.dialog("option","closeOnEscape",b.closeOnEscape)}if(!b.title){$(".ui-dialog-titlebar").css("background","none");this._dialog.css("margin-top",0)}$(window).resize(function(){tagged.modules.lightbox.reposition("center","center",this)});if(b.className){this._dialog.dialog("option","dialogClass",b.className)}this.setEventHandlers();if(typeof b.notshow==="undefined"||!b.notshow){this.show()}return this},setEventHandlers:function(){if(this._config.destroyOnClose){this._dialog.bind("dialogclose",$.proxy(function(b,a){this.destroy()},this))}},setBody:function(a){if(this._dialog){this._dialog.html(a)}},getBodyEl:function(a){return this._parentEl},setHeight:function(a){if(this._dialog){this._dialog.dialog("option","height",a)}},setTitle:function(a){if(this._dialog){this._dialog.dialog("option","title",a)}},getDialogDom:function(){if(this._dialog){return this._dialog.dialog("widget")}return false},show:function(){if(this._dialog){this._dialog.dialog("open")}},reposition:function(b,a,c){if(this._dialog){this._dialog.dialog("widget").position({my:b,at:a,of:c})}},center:function(){if(this._dialog){this._dialog.dialog("option","position","center")}},setCss:function(a,b){if(this._dialog){this._dialog.dialog("widget").css(a,b)}},setBodyCss:function(a,b){if(this._dialog){this._dialog.css(a,b)}},hide:function(){if(this._dialog){this._dialog.dialog("close");this._dialog.hide()}},destroy:function(){if(this._dialog){this._dialog.dialog("destroy");this._dialog.hide()}},registerCallback:function(a,b){switch(a){case"close":this._dialog.bind("dialogclose",$.proxy(function(d,c){b()},this));break}}};tagged.namespace("security.password");tagged.security.password={cancel_response:{stat:"cancel"},trigger:function(a,b){if(a.stat!="password"||!a.result){return}this.callObj=b;this.origCallObj=JSON.stringify(a.result.origCallObj);this.panel=tagged.modules.lightbox.init({body:a.result.passwordPromptHtml,width:"338px",closeOnEscape:true,className:"password_panel",position:"center",zIndex:10000,title:this.strings.header});$("#password_cancel").click($.proxy(this.cancel,this))},submit:function(a){var b={method:"tagged.security.verifyPassword",password:a,origCallObj:this.origCallObj};if(this.callObj){b.callback=this.callObj.callback}TAGGED.api.call(b);this.panel.destroy()},cancel:function(e){e.preventDefault();var callback=this.callObj.callback;if(callback.fn){callback.fn.call(callback.scope,this.cancel_response,callback.args)}else{eval(callback+"("+YAHOO.lang.JSON.stringify(this.cancel_response)+");")}this.panel.destroy()}};tagged.namespace("security.captcha");tagged.security.captcha={panel:null,trigger:function(b,c){if(typeof Recaptcha!=="undefined"){if(b.stat!="security"||!b.result){return}this.callObj=c;this.origCallObj=JSON.stringify(b.result.origCallObj);tagged.security.captcha.panel=tagged.modules.lightbox.init({body:b.result.captchaHtml,width:"343px",minHeight:"250px",closeOnEscape:true,className:"captcha_lightbox",position:"center",zIndex:10000});Recaptcha.create(b.result.recaptchaKey,"recaptcha_div",{theme:"white",callback:Recaptcha.focus_response_field});var a=this;$("#captcha_cancel").on("click",function(d){a.cancel(d)})}},submit:function(b,c,a){var d={method:"tagged.security.verifyRecaptcha",challenge:b,response:c,code:a,origCallObj:this.origCallObj};if(this.callObj){d.callback=this.callObj.callback}TAGGED.api.call(d);tagged.security.captcha.panel.destroy()},cancel:function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}var cancel_response={stat:"fail",result:{}};var callback=this.callObj.callback;if(callback.fn){callback.fn.call(callback.scope,cancel_response,callback.args)}else{eval(callback+"("+YAHOO.lang.JSON.stringify(cancel_response)+");")}tagged.security.captcha.panel.destroy()}};TAGGED.namespace("api");TAGGED.api={format:"json",_login_regex_match:/\\"error\\":{\\"code\\":11,.*}/,_login_regex_match2:/^login status: -1000$/,errorResponse:{stat:"fail",error:{code:-1}},errorResponseBC:'({stat: "fail", error: {code: -1}})',queue:[],_deferQueueTime:300,defer:[],_deferTimer:null,_trackedRequests:{},_requestsLUT:{},alertOnError:true,redirectOnNotLoggedIn:true,autoQueue:false,autoQueueWaitTime:0,autoQueueBundles:2,autoQueueMinBundleSize:3,dequeue:function(){var a=this.queue;this.queue=[];if(a.length){this.call(a)}},deferDequeue:function(){if((this.queue.length+this.defer.length)<=1){this.startDefer({result:this._deferQueueTime});return}this.queue=this.queue.concat(this.defer);this.defer=[];this.dequeue()},handleDefer:function(){this.stopDefer();if(!this.defer.length||this.defer[this.defer.length-1].callback!="TAGGED.api.startDefer"){this.defer.push({method:"tagged.util.echoIt",data:this._deferQueueTime,callback:"TAGGED.api.startDefer"})}this.deferDequeue()},startDefer:function(a){var b=0;if(a){if(a.stat=="fail"){return}if(a.result){b=a.result}else{b=a}}if(YAHOO.lang.isString(b)){b=parseInt(b)}if(!YAHOO.lang.isNumber(b)){b=0}if(b>0){this.stopDefer();this._deferTimer=window.setTimeout("TAGGED.api.handleDefer()",1000*b)}else{this.handleDefer()}},stopDefer:function(){if(!this._deferTimer){return}window.clearTimeout(this._deferTimer);this._deferTimer=null},call:function(a,c){var b="auto_queue" in a?a.auto_queue:this.autoQueue;if(b){this.queue=this.queue.concat(YAHOO.lang.isArray(a)?a:[a]);if(!this.autoQueueWait){this.autoQueueWait=true;setTimeout(tagged.bind(function(){this.autoQueueWait=false;var e=Math.max(Math.ceil(this.queue.length/this.autoQueueBundles),this.autoQueueMinBundleSize);for(var d=0;d<this.autoQueueBundles&&this.queue.length;d++){this._call(this.queue.splice(0,e))}},this),this.autoQueueWaitTime)}}else{this._call(a,c)}},_call:function(l,h){if("auto_queue" in l){var b=l.auto_queue;delete l.auto_queue}else{var b=this.autoQueue}if(this.queue.length&&!h&&YAHOO.lang.isObject(l)&&!b){if(YAHOO.lang.isArray(l)){for(var e=0,j=l.length;e<j;++e){this.queue.push(l[e])}}else{this.queue.push(l)}this.dequeue();return}if(l.timeout){TAGGED.api.callback.timeout=l.timeout;delete l.timeout}else{TAGGED.api.callback.timeout=false}var a="\n";var f={application_id:"user",format:this.format};if(this.getQueryStringParameter("no_cache")||this.getQueryStringParameter("clear_cache")){f.no_cache="1"}var k=this.getQueryStringParameter("loc");if(!k){k=this.getQueryStringParameter("locale")}if(k){f.locale=k}if(l.constructor==Array){var d=tagged.clone(l);for(var e=0,g=l.length;e<g;++e){if(l[e].constructor==String){a+=l[e]+"\n"}else{if(typeof(l[e].callback)=="object"){delete l[e].callback}a+=TAGGED.api.createQueryString(l[e],true)+"\n"}}}else{if(l.constructor==String){var d=l;a+=l+"\n"}else{var d={};YAHOO.lang.augmentObject(d,l);if(typeof(l.callback)=="object"){delete l.callback}a+=TAGGED.api.createQueryString(l,true)+"\n"}}f.session_token=YAHOO.util.Cookie.get("S");TAGGED.api.callback.argument=h;var c=YAHOO.util.Connect.asyncRequest("POST","/api/?"+TAGGED.api.createQueryString(f),TAGGED.api.callback,a);if(tagged.performance){tagged.performance.addXHR(c,a)}this.pushRequestLUT(c.tId,d);return c},callback:{success:function(a){if(!a||!a.responseText){if(tagged.performance){tagged.performance.updateXHRQueue()}TAGGED.api.evalResponse(a,true)}if(tagged.performance){tagged.performance.removeXHR(a)}if(a.responseText.search(TAGGED.api._login_regex_match)>=0){TAGGED.api.handleNotLoggedIn(a)}if(a.responseText.search(TAGGED.api._login_regex_match2)>=0){window.location=window.location.href}else{if(tagged.diagnostics){tagged.diagnostics.findApiData(a.responseText)}TAGGED.api.evalResponse(a)}if(a.argument){a.argument()}},failure:function(a){if(tagged.performance){tagged.performance.updateXHRQueue()}TAGGED.api.evalResponse(a,true);if(a.argument){a.argument()}}},recall:function(a,b){if(b==null||b==""){b="default"}if(TAGGED.api._trackedRequests[b]!=null){YAHOO.util.Connect.abort(TAGGED.api._trackedRequests[b]);TAGGED.api._trackedRequests[b]=null}TAGGED.api._trackedRequests[b]=TAGGED.api.call(a)},nullResponseHandler:function(){},createQueryString:function(b,a){var c="";if(a){b.api_signature="";if(tagged.guid){b.track=tagged.guid}if(b.method){c+="method="+encodeURIComponent(b.method)+"&";delete b.method}else{alert(TAGGED.api.strings.errorMethodMissing);return""}}for(i in b){c+=encodeURIComponent(i)+"="+encodeURIComponent(b[i])+"&"}if(c.length){return c.substr(0,c.length-1)}return c},pushRequestLUT:function(e,c){var d=function(h){var f=h.indexOf("callback=")+9;var g=h.slice(f,h.indexOf("&",f));return{callback:g}};if(YAHOO.lang.isArray(c)){this._requestsLUT[e]=[];for(var b=0,a=c.length;b<a;++b){if(YAHOO.lang.isString(c[b])){this._requestsLUT[e].push(d(c[b]))}else{this._requestsLUT[e].push(c[b])}}}else{if(YAHOO.lang.isString(c)){this._requestsLUT[e]=[d(c)]}else{this._requestsLUT[e]=[c]}}},popRequestLUT:function(b){var a=this._requestsLUT[b];delete this._requestsLUT[b];return a},evalResponse:function(o,isError){var requestCalls=this.popRequestLUT(o.tId);if(!requestCalls||!requestCalls.length){return}TAGGED.api.errorResponse.rawError=null;if(!isError){try{if(!o.responseText){isError=true}else{if(this.format=="jsonp"){eval(o.responseText);return}else{var requestData=eval(o.responseText);if(requestCalls.length!=requestData.length){isError=true}}}}catch(e){isError=true;if(!tagged.data.hideAlert&&this.alertOnError){alert(TAGGED.api.strings.errorGeneral)}TAGGED.api.errorResponse.rawError=o.responseText}}for(var i=0;i<requestCalls.length;i++){var _request=requestCalls[i];if(typeof(_request.callback)=="string"){if(isError){eval(_request.callback+TAGGED.api.errorResponseBC)}else{try{var data=eval("("+requestData[i]+")");if(!this.handleFlowException(data,_request)){eval(_request.callback+"("+requestData[i]+")")}}catch(e){eval(_request.callback+TAGGED.api.errorResponseBC)}}}else{if(isError){_request.callback.fn.apply(_request.callback.scope,[TAGGED.api.errorResponse,_request.callback.args])}else{try{var data=eval("("+requestData[i]+")");if(this.handleFlowException(data,_request)){}else{if(_request.callback&&_request.callback.fn){var start=new Date();_request.callback.fn.apply(_request.callback.scope,[data,_request.callback.args]);var end=new Date();if(tagged.performance){tagged.performance.recordBenchmarkAPI({tId:o.tId,apiMethod:_request.method,executionTime:(end-start)},(requestCalls.length>1))}}}}catch(e){if(_request.callback){_request.callback.fn.apply(_request.callback.scope,[TAGGED.api.errorResponse,_request.callback.args])}}}}}},handleFlowException:function(b,a){if(b.stat=="security"){tagged.security.captcha.trigger(b,a);return true}else{if(b.stat=="nobot"){tagged.security.nobot.trigger(b,a);return true}else{if(b.error&&b.error.code==23){tagged.security.validation.trigger(b,a);return true}else{if(b.stat=="password"){tagged.security.password.trigger(b,a);return true}else{if(b.stat=="phone"){tagged.security.phone.trigger(b,a);return true}else{return false}}}}}},handleNotLoggedIn:function(a){if(this.redirectOnNotLoggedIn){window.location="/index.html?r="+encodeURIComponent(window.location)}}};if(tagged.exists("H")){TAGGED.api.getQueryStringParameter=H.getQueryStringParameter}else{TAGGED.api.getQueryStringParameter=function(f,c){var d,b,a,h,g,e;c=c||window.location.href;a=c.indexOf("?");h=a>=0?c.substr(a+1):c;a=h.lastIndexOf("#");h=a>=0?h.substr(0,a):h;g=h.split("&");for(d=0,b=g.length;d<b;d++){e=g[d].split("=");if(e.length>=2){if(e[0]===f){return unescape(e[1])}}}return null}}E.onDOMReady(function(){TAGGED.api.startDefer({result:1})});var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());tagged.namespace("realtime");tagged.realtime={eventsHandlerTable:{},subscribeEvents:[],subscriptionTable:{},subscriptionGroups:{},userId:null,nextEventId:null,iframe:null,nodeUrl:"",initialDeferTime:200,deferTime:20,debug:false,alive:true,connected:false,clientId:null,maxReconnectAttempts:3,reconnectTime:100,attempts:0,sendTimer:null,backstopTimer:null,backstopTime:Math.floor(Math.random()*20+120)*1000,_needsUpdateFlag:false,init:function(){var a=tagged.data.realtime_enabled;if(!a){return}this.eventsHandlerTable={};this.subscribeEvents=[];this.subscriptionTable={};this.subscriptionGroups={};this.debug=tagged.data.realtime_debug;this.nodeUrl=tagged.data.node_url;if(!this.nodeUrl){this.alive=false}this.userId=tagged.data.user_id;this.nextEventId=tagged.data.next_event_id;this.clientId=tagged.data.clientId;this.prepIframe()},prepIframe:function(){var a=$("<iframe/>",{id:"node_iframe",src:"/realtime_iframe.html",css:{position:"absolute",top:0,left:0,width:1,height:1,visibility:"hidden"}}).prependTo(document.body);this.iframe=a[0];a.load($.proxy(this.initIframe,this))},initIframe:function(){this.iframe.contentWindow.NodeFrame.init(this,this.handleResponse);this.sendTimer=setTimeout(function(){tagged.realtime.connect()},this.initialDeferTime)},iframeReady:function(a){a.init(this,this.handleResponse)},isAlive:function(){return this.alive},subscribe:function(b,a,d,e){var g=false;if($.isArray(b)){var f=b;for(var c=0;c<f.length;c++){e=f[c].group||"all";if(this._subscribeTopic(f[c].topic,f[c].prevMsgs,f[c].cbObj,e)){g=true}}}else{e=e||"all";if(this._subscribeTopic(b,a,d,e)){g=true}}if(g){this.update()}},_subscribeTopic:function(c,b,e,f,d){var a=false;if(!this.subscriptionTable[c]){this.subscriptionTable[c]=[e];if(b>0){this.subscribeEvents.push({topic:c,prevMsgs:b})}else{this.subscribeEvents.push(c)}a=true}else{if($.inArray(e,this.subscriptionTable[c])===-1){this.subscriptionTable[c].push(e)}a=false}if(!(f in this.subscriptionGroups)){this.subscriptionGroups[f]=[]}this.subscriptionGroups[f].push({topic:c,cbObj:e});return a},unsubscribe:function(d,e){var c=-1;if(!this.subscriptionTable[d]){return false}var b=this.subscriptionTable[d];if(b){var a=$.inArray(e,b);if(a!==-1){b.splice(a,1)}}if($.isEmptyObject(this.subscriptionTable[d])){$.each(this.subscribeEvents,function(g,f){var h=(typeof(f)=="string"?f:f.topic);if(h===d){c=g}});if(c>=0){this.subscribeEvents.splice(c,1)}delete this.subscriptionTable[d];this._needsUpdateFlag=true}},unsubscribeGroup:function(b){if(!(b in this.subscriptionGroups)){return}for(var a=0;a<this.subscriptionGroups[b].length;a++){this.unsubscribe(this.subscriptionGroups[b][a].topic,this.subscriptionGroups[b][a].cbObj)}delete this.subscriptionGroups[b]},register:function(b,c){var e=false;if($.isArray(b)){var d=b;for(var a=0;a<d.length;a++){if(this._registerEvent(d[a].eventType,d[a].cbObj)){e=true}}}else{if(this._registerEvent(b,c)){e=true}}if(e){this.update()}},_registerEvent:function(a,b){if(this.eventsHandlerTable[a]){if($.inArray(b,this.eventsHandlerTable[a])===-1){this.eventsHandlerTable[a].push(b)}return false}else{this.eventsHandlerTable[a]=[b];return true}},unregister:function(c,d){var b=this.eventsHandlerTable[c];if(b){var a=$.inArray(d,b);if(a!==-1){b.splice(a,1)}}if($.isEmptyObject(this.eventsHandlerTable[c])){delete this.eventsHandlerTable[c]}},update:function(){if(this.connected&&this.sendTimer===null){this.sendTimer=setTimeout(function(){tagged.realtime.sendRequest(true)},this.deferTime)}},connect:function(){this.sendRequest(true);this.connected=true},sendRequest:function(g){this.consoleLog("sendRequest()");var f={"X-T-Uid":this.userId,st:tagged.data.session_token,nid:this.nextEventId,ci:this.clientId};var e=(window.location.pathname.match(/\/apps\/(.*).html/)||[null,null])[1];if(e){var a=tagged.data.application_info[e];if(a&&a.id){f.aid=a.id}}var b={};if(g||this._needsUpdateFlag){f.se=JSON.stringify(this.subscribeEvents);var d=[];for(var c in this.eventsHandlerTable){d.push(c)}f.et=JSON.stringify(d);this._needsUpdateFlag=false}b.url=this.nodeUrl+"/poll";b.data=f;this.iframe.contentWindow.NodeFrame.sendRequest(b);if(this.sendTimer){clearTimeout(this.sendTimer);this.sendTimer=null}if(this.backstopTimer!==null){clearTimeout(this.backstopTimer)}this.backstopTimer=setTimeout(function(){tagged.realtime.consoleLog("backstopTimer()");tagged.realtime.connected=false;tagged.realtime.reconnect()},this.backstopTime)},handleResponse:function(d){this.consoleLog("handleResponse()");this.consoleLog(d);if(d){if(d.success){if(d.data){this.nextEventId=d.data.next_event_id;var n=d.data.events_data;var k={};for(var g=0;g<n.length;g++){var a=n[g].event_type;if(k[a]){k[a].push(n[g].event_data)}else{k[a]=[n[g].event_data]}}for(var m in k){var c;if(m.indexOf("pubsub_")===0){var h=m.substring(7);c=this.subscriptionTable[h]}else{c=this.eventsHandlerTable[m]}if(c){for(var f=0;f<c.length;f++){var b=c[f];try{b.cb.call(b.scope,k[m],b.args)}catch(l){this.consoleLog("Exception in realtime callback: "+l)}}}}}this.attempts=0;this.sendRequest()}else{if(d.error&&d.data&&d.data.message){if(this.connected){this.connected=false;this.consoleLog("Realtime error: "+d.data.message);this.reconnect()}}}}else{if(this.connected){this.connected=false;this.consoleLog("Realtime error: General Node API failure");this.reconnect()}}},reconnect:function(){if(this.alive&&this.attempts++<this.maxReconnectAttempts){this.consoleLog("Attempt "+this.attempts+" to reconnect to Realtime push");var a={method:"tagged.util.realtimeReconnect",callback:{fn:function(b){if((b.stat=="ok")&&b.result&&b.result.success){this.nextEventId=b.result.next_event_id;this.clientId=b.result.client_id;tagged.data.session_token=b.result.session_token;tagged.realtime.connect()}else{setTimeout(function(){tagged.realtime.reconnect()},this.reconnectTime)}},scope:this}};TAGGED.api.call(a)}else{this.consoleLog("Reconnection failed.");this.alive=false}},consoleLog:function(a){if(this.debug&&typeof(console)!="undefined"){window.console.log(a)}}};$(document).ready(function(){tagged.realtime.init()});tagged.namespace("header.alerts");tagged.header.alerts={menuEl:null,alertIconHTML:"",alertMenuOpen:false,requestInProgress:false,init:function(a){if(tagged.data.realtime_enabled){var b=TAGGED.api.defer}else{var b=(a&&a.result)?TAGGED.api.queue:TAGGED.api.defer}b.push({method:"tagged.header.renderAlerts",callback:"tagged.header.alerts.show"});if(tagged.data.realtime_enabled){tagged.realtime.register("alerts_update",{cb:this.updateAlerts,scope:this})}else{if(a&&a.result){TAGGED.api.dequeue();return}b.push({method:"tagged.util.echoIt",data:"",callback:"tagged.header.alerts.init"})}},navMenuCB:function(a,b){if(!this.navCBs){this.navCBs=[]}this.navCBs.push({cb:a,scope:b})},show:function(c){this.requestInProgress=false;var d="";var a=null;if(c&&c.stat&&c.stat=="ok"&&c.result&&c.result.icons){d=c.result.icons;if(c.result.drop_down){a=c.result.drop_down}if(c.result.lightbox){this._renderAlertsLightbox(c.result.lightbox)}}this._renderNewAlertsMenu(a);var b=null;if(a){this._renderNewAlertsMenu(a)}else{if(b=$("#alerts-icon")){b.css("visibility","hidden")}}},updateAlerts:function(b){var a=b[b.length-1];if(a.alerts_updated&&!this.requestInProgress){this.requestInProgress=true;TAGGED.api.call({method:"tagged.header.renderAlerts",callback:{fn:this.show,scope:this}})}},_renderAlertIcons:function(b){var a=$("#header_alerts");if(a){a.css("display","block");a.html(b)}},_renderNewAlertsMenu:function(d){var a=[];for(key in d){a.push({type:key,className:"icon "+key,label:d[key].label||"",value:d[key].value,url:d[key].link||"#",onclick:null})}for(var b=0;this.navCBs&&b<this.navCBs.length;b++){var c=this.navCBs[b];c.cb.call(c.scope,a)}},_renderAlertsLightbox:function(b){for(var a in b){switch(a){case"promo_gold_reup":tagged.require("alert_lightbox").done(function(){var c=new tagged.promotions.BuyPrompt();c.render(b[a]).show()});break}}}};$(document).ready(function(){tagged.header.alerts.init(false)});tagged.namespace("performance");tagged.performance={XHRQueue:{},XHRResults:{},benchmarkResults:[],iframeResults:[],iframe:null,iframeContainer:null,iframeLoadTimer:null,iframeLoadWait:10000,downloadErrorFilter:10000,urlMap:null,mapIndex:0,noTraffic:false,pageLoadTime:0,iframeTestsComplete:false,noActivityDelay:15000,entryTemplate:{apiMethod:"",functionName:"",executionTime:"",timeStamp:"",userAgent:"",type:"",multiple:"",tId:"",transitTime:""},init:function(){if(tagged.data.enableCDNTests){this.iframeContainer=document.body;this.mapIndex=0;this.noTraffic=false;this.iframeTestsComplete=false;this.urlMap=tagged.data.perfTestUrls}if(tagged.data.enable_js_benchmarking){this.tt=new YAHOO.widget.Tooltip("js_tt",{context:"tagged_logo",text:"",showdelay:2000,autodismissdelay:50000});this.pageLoadTime=(new Date()).getTime()}},runIframeTests:function(){if(this.mapIndex<this.urlMap.length){if(this.noTraffic){var a={idx:this.mapIndex,cb:this.runIframeTests};this.setupIframe(a);this.mapIndex++}}else{this.iframeTestsComplete=true;this.sendIframeResults()}},setupIframe:function(b){b=b||{idx:0};if(this.urlMap[b.idx]){var a=this.urlMap[b.idx].url;var c=this.urlMap[b.idx].type;this._setupIframe({url:a,type:c,cb:b.cb})}},_setupIframe:function(b){var a=YAHOO.util.Dom.get(this.iframeContainer)||document.body;if(this.iframe){YAHOO.util.Event.purgeElement(this.iframe);a.removeChild(this.iframe);this.iframe=null}this.iframe=document.createElement("iframe");this.iframe.style.height=0;this.iframe.style.width=0;this.iframe.style.visibility="hidden";this.iframe.id="performanceIframe";a.appendChild(this.iframe);this.iframeLoadTimer=window.setTimeout(function(){b.start=0;tagged.performance.iframeLoaded.call(tagged.performance,null,b)},this.iframeLoadWait);YAHOO.util.Event.addListener(this.iframe,"load",this.iframeLoaded,b,this);this.iframe.src=b.url;b.start=(new Date()).getTime()},iframeLoaded:function(b,c){var d=(new Date()).getTime()-c.start;if(d<this.downloadErrorFilter){var a={url:c.url,type:c.type,time:Math.round(Math.max(0,d))};this.iframeResults.push(a)}window.clearTimeout(this.iframeLoadTimer);this.iframeLoadTimer=null;if(c.cb){c.cb.call(this)}},sendIframeResults:function(){this.iframeResults.shift();this._callAPI(this.iframeResults,"cdn")},addXHR:function(c,a){try{this.noTraffic=false;this.XHRQueue[c.tId]=c;this.XHRQueue[c.tId].start=(new Date()).getTime();if(this.noActivityTimer){window.clearTimeout(this.noActivityTimer);this.noActivityTimer=null}}catch(b){}},removeXHR:function(b){try{this.XHRResults[b.tId]=(new Date()).getTime()-this.XHRQueue[b.tId].start;delete this.XHRQueue[b.tId];if(this.getObjLength(this.XHRQueue)==0){this.noTraffic=true;this.onNoTraffic()}}catch(a){}},updateXHRQueue:function(){try{for(i in this.XHRQueue){if(!YAHOO.util.Connect.isCallInProgress(this.XHRQueue[i])){delete this.XHRQueue[i]}}}catch(a){}},recordBenchmarkAPI:function(b,a){if(!tagged.data.enable_js_benchmarking){return}b.type="API_CB";b.transitTime=this.XHRResults[b.tId];b.multiple=a||false;var c=YAHOO.lang.JSON.stringify(b);b.timeStamp=(new Date()).getTime();b.userAgent=window.navigator.userAgent;YAHOO.lang.augmentObject(b,this.entryTemplate);this.benchmarkResults.push(b);try{this.tt.cfg.setProperty("text",this.tt.cfg.getProperty("text")+"<br>"+c)}catch(d){}},bind:function(d,b,c,a){return function(){var f=new Date();b.call(a,c);var e=new Date();if(tagged.data.enable_js_benchmarking){tagged.performance.recordBenchmarkJS(d,(e-f))}}},recordBenchmarkJS:function(f,a){var c={functionName:f||"",executionTime:a,type:"JS_CODE"};var b=YAHOO.lang.JSON.stringify(c);c.timeStamp=(new Date()).getTime();c.userAgent=window.navigator.userAgent;YAHOO.lang.augmentObject(c,tagged.performance.entryTemplate);tagged.performance.benchmarkResults.push(c);try{tagged.performance.tt.cfg.setProperty("text",tagged.performance.tt.cfg.getProperty("text")+"<br>"+b)}catch(d){}},sendJSBenchmarkResults:function(){if(tagged.data.enable_js_benchmarking){this._callAPI(this.benchmarkResults,"js")}},_callAPI:function(c,a){var b={method:"tagged.util.savePerformanceData",type:a,data:YAHOO.lang.JSON.stringify(c),callback:{fn:this.handleResponse,scope:this,args:a}};TAGGED.api.call(b)},handleResponse:function(b,a){if(a=="JS_CODE"){this.benchmarkResults=[]}},onNoTraffic:function(){if(this.pageLoadTime){this.pageLoadTime=(new Date()).getTime()-this.pageLoadTime;this.recordBenchmarkJS("page_load",this.pageLoadTime);this.pageLoadTime=0}if(tagged.data.enableCDNTests&&!this.iframeTestsComplete&&this.urlMap){this.noActivityTimer=window.setTimeout(function(){tagged.performance.runIframeTests()},this.noActivityDelay)}},getObjLength:function(b){var a=0;for(i in b){a++}return a}};E.onDOMReady(tagged.performance.init,tagged.performance,true);