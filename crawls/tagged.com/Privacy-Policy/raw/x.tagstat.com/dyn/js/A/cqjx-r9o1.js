tagged.namespace("util.stringBuffer");tagged.util.stringBuffer=function(a){this.buffer=a?a:[]};tagged.util.stringBuffer.prototype={add:function(c){var b=0;var a=arguments.length;for(;b<a;++b){if(typeof(arguments[b])!="undefined"){this.buffer[this.buffer.length]=arguments[b]}}return this},append:function(a){this.buffer[this.buffer.length]=a},toString:function(){return this.buffer.join("")}};tagged.namespace("jst.modules.harmfulToMinorsTos");tagged.jst.modules.harmfulToMinorsTos.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){s.push("<p>");s.push(escapeHTML("Content Harmful to Minors shall mean all content or conduct, whether visual or textual, that contains, is of, or reasonably may be construed to advocate, contain, depict, encourage, promote or solicit child pornography, sexual solicitation of and/or exploitation of minors, sexually explicit material of or concerning minors, incest, pedophilia, and any other content of an illicit sexual or violent nature concerning or involving a person under the age of eighteen (18) years, regardless of the form and format of such content. "));s.push("</p><p>");s.push(escapeHTML('Reports of Content Harmful to Minors may be emailed to our Customer Service department at <a href="mailto:childsafety@tagged.com">childsafety@tagged.com</a>.'));s.push("</p>")}return s.join("")}catch(e){if(typeof window!=="undefined"&&window._jstFailuresRaise){throw e}alert('template error in "modules/harmfulToMinorsTos.jst":\n\n'+e)}return""};tagged.namespace("jst.modules.hi5_harmfulToMinorsTos");tagged.jst.modules.hi5_harmfulToMinorsTos.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){s.push("<p>");s.push(escapeHTML("Content Harmful to Minors shall mean all content or conduct, whether visual or textual, that contains, is of, or reasonably may be construed to advocate, contain, depict, encourage, promote or solicit child pornography, sexual solicitation of and/or exploitation of minors, sexually explicit material of or concerning minors, incest, pedophilia, and any other content of an illicit sexual or violent nature concerning or involving a person under the age of eighteen (18) years, regardless of the form and format of such content. "));s.push("</p><p>");s.push(escapeHTML('Reports of Content Harmful to Minors may be emailed to our Customer Service department at <a href="mailto:childsafety@hi5.com">childsafety@hi5.com</a>.'));s.push("</p>")}return s.join("")}catch(e){if(typeof window!=="undefined"&&window._jstFailuresRaise){throw e}alert('template error in "modules/hi5_harmfulToMinorsTos.jst":\n\n'+e)}return""};tagged.namespace("modules.harmfulToMinorsTos");tagged.modules.harmfulToMinorsTos={init:function(){if($("#harmful_to_minors1").length){E.addListener("harmful_to_minors1","click",this.explainHarmfulToMinors,"",this)}if($("#harmful_to_minors2").length){E.addListener("harmful_to_minors2","click",this.explainHarmfulToMinors2,"",this)}},explainHarmfulToMinors:function(a){E.preventDefault(a);this.infoPanel=new YAHOO.widget.Panel("info_panel",{width:"500px",fixedcenter:true,modal:true,iframe:true});this.infoPanel.setHeader(TAGGED.modules.harmfulToMinorsTos.strings.infoPanelTitleHTM);this.infoPanel.setBody(tagged.jst.modules.harmfulToMinorsTos.render({}));this.infoPanel.render(document.body)},explainHarmfulToMinors2:function(a){E.preventDefault(a);this.infoPanel=new YAHOO.widget.Panel("info_panel",{width:"500px",fixedcenter:true,modal:true,iframe:true});this.infoPanel.setHeader(TAGGED.modules.harmfulToMinorsTos.strings.infoPanelTitleHTM);this.infoPanel.setBody(tagged.jst.modules.hi5_harmfulToMinorsTos.render({}));this.infoPanel.render(document.body)}};E.onDOMReady(tagged.modules.harmfulToMinorsTos.init,"",tagged.modules.harmfulToMinorsTos);tagged.loadStringsDirect({"TAGGED.modules.harmfulToMinorsTos.strings":{infoPanelTitleHTM:"Content Harmful to Minors"}});tagged.loadStringsDirect({"tagged.strings":{genericError:"Sorry, an error occurred. Please refresh the page and try again :(",formWarning:"WARNING: You are about to send data to an unauthorized site.  Go ahead?",locales:{en_US:"English",az_AZ:"Az\u0259rbaycan",ms_MY:"Bahasa Melayu",jv_ID:"Basa Jawa",su_ID:"Basa Sunda",my_MM:"Burmese",cs_CZ:"\u010ce\u0161tina",es_CO:"Espa\u00f1ol - Am\u00e9rica Latina",es_ES:"Espa\u00f1ol - Espa\u00f1a",es_MX:"Espa\u00f1ol - M\u00e9xico",el_GR:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",de_DE:"Deutsch",fr_FR:"Fran\u00e7ais",id_ID:"Indonesia",it_IT:"Italiano",hu_HU:"Magyar",nl_NL:"Nederlands",pl_PL:"Polski",pt_BR:"Portugu\u00eas - Brasil",pt_PT:"Portugu\u00eas",ru_RU:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",ro_RO:"Rom\u00e2n\u0103",tl_PH:"Tagalog",tr_TR:"T\u00fcrk\u00e7e",ur_PK:"Urdu",vi_VN:"Vi\u1ec7t",ar_SA:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",bn_IN:"\u09ac\u09be\u0982\u09b2\u09be",zh_CN:"\u4e2d\u6587 (\u7b80\u4f53)",zh_TW:"\u4e2d\u6587 (\u7e41\u8ec6)",hi_IN:"\u0939\u093f\u0928\u094d\u0926\u0940",he_IL:"\u05e2\u05d1\u05e8\u05d9\u05ea",ja_JP:"\u65e5\u672c\u8a9e",ko_KR:"\ud55c\uad6d\uc5b4",mr_IN:"\u092e\u0930\u093e\u0920\u0940",ne_NP:"\u0928\u0947\u092a\u093e\u0932\u0940",fa_IR:"\u0641\u0627\u0631\u0633\u06cc",pa_IN:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",ta_IN:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",te_IN:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",th_TH:"\u0e44\u0e17\u0e22",uk_UA:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"}}});tagged.namespace("modules.taggedTips");tagged.modules.taggedTips={_panel:null,_keyListener:null,_configs:[],init:function(a){if(!(a&&a.length)){return false}this._configs=this._configs.concat(a);this._panel=this.getPanel();this.setupEventHandlers(a)},setupEventHandlers:function(a){if(!this._keyListener){this._keyListener=new YAHOO.util.KeyListener(document,{keys:27},{fn:this.hide,scope:this,correctScope:true})}for(var b=0;b<a.length;b++){var c=a[b];E.addListener(c.node,"click",this.handleClick,c,this)}},handleClick:function(b,a){this.setPanelContent(a);this.show()},getPanel:function(){if(this._panel){return this._panel}else{var b={fixedcenter:true,iframe:true,close:true,modal:true,underlay:"none",visible:false};var a=this._panel=new YAHOO.widget.Panel("tagged_tips",b);a.render(document.body);return a}},setPanelContent:function(a){this._panel.setHeader(a.header||sprintf(this.strings.header,tagged.getBrand()));this._panel.setBody(a.body);if(a.footer){this._panel.setFooter(a.footer)}},show:function(){this._panel.show();this._keyListener.enable()},hide:function(){this._panel.hide();this._keyListener.disable()},destroy:function(){for(var b=0;b<this._configs.length;b++){var a=this._configs[b];E.removeListener(a.node,"click")}this._keyListener.disable();this._panel.destroy();this._panel=null}};tagged.namespace("mvc");MVC=tagged.mvc;tagged.namespace("mvc");MVC.init=function(a){a=a||{};MVC._loadSchema=!!a.loadSchema};MVC.init();tagged.namespace("apps.facebook.core");tagged.apps.facebook.core._dfdSDK=$.Deferred();tagged.apps.facebook.core.getSDK=function(){return tagged.apps.facebook.core._dfdSDK.promise().then(function(){if(window.facebookInitCallback){window.facebookInitCallback();window.facebookInitCallback=null}}).fail(function(){})};window.fbAsyncInit=function(){FB._https=window.location.protocol=="https:";FB.init(tagged.data.fbSDKInitData);tagged.apps.facebook.core._dfdSDK.resolve(FB)};tagged.apps.facebook.core.getSDK().then(function(a){a.Canvas.setAutoGrow()});$(function(){var d="en";var c="US";if(tagged.data.fbSDKLocale){var f=tagged.data.fbSDKLocale.match(/([a-z]{2})[\-_]?([A-Z]{2})/);if(f){d=f[1];c=f[2]}}var b=document.createElement("script");b.async=true;b.src=document.location.protocol+"//connect.facebook.net/"+d+"_"+c+"/all.js";var a=document.getElementById("fb-root");if(a){a.appendChild(b)}});tagged.namespace("modules.connect");tagged.modules.connect={NOT_CONNECTED:0,CONNECTED:1,ALREADY_CONNECTED:2,JUST_LOGIN:3,NOT_REGISTERED:4,_connectHTML:'<form name="connect_form">%s</form>',_connectLink:'<a class="connect" service_name="%s" href="#">%s</a>',_connectCheckbox:'<input type="checkbox" service_name="%s" %s name="%s" feature="%s" callback="%s" id="%s"/><label for="%s">%s</label>',_separator:'<span class="connect_separator">&bull;</span>',services:["facebook","myspace","twitter"],connectSettings:null,feature:"",connectSuccessCallback:null,win:null,init:function(a){if(a){for(var b in a){this[b]=a[b]}}window.connect_callback=this.connectCallback},addListener:function(d){var b=document.getElementsByClassName("connect_container");for(var a=0;a<b.length;a++){var c=$(b[a]);if($.type($(c).attr("connect_action"))==="undefined"){$(c).attr("connect_action","true");$(c).on("click",this.handleConnect)}}if(d){this.connectSuccessCallback=d}},handleConnect:function(d){if(d.target){var c=d.target}else{var c=d.srcElement}var a="";var g=this.getPageLocation();if(c&&c.tagName.toUpperCase()=="INPUT"){a=c.getAttribute("service_name");this.updateSetting(a,c.getAttribute("feature"),c.checked,c.getAttribute("callback"));return}if(c&&c.tagName.toUpperCase()!="A"){c=c.parentNode}g=c.getAttribute("container")?c.getAttribute("container")+"_"+g:g;var f=this.getGeneration();if(c.getAttribute("service_name")){a=c.getAttribute("service_name");var b="/partners/connect_popup.html?service="+a+"&from="+g;b+="&generation="+f;this.win=window.open(b,"","height=620,width=840");if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}}if(this.win){this.win.focus()}},handleConnectDirect:function(a){from=this.getPageLocation();var c=this.getGeneration();if(a){var b="/partners/connect_popup.html?service="+a+"&from="+from;b+="&generation="+c;this.win=window.open(b,"","height=620,width=840")}if(this.win){this.win.focus()}},getSetting:function(a,c){this.feature=a;var b={method:"tagged.connect.settings.getSettingsByFeature",feature:a,callback:c};TAGGED.api.call(b)},updateSetting:function(b,a,d,e){var c={method:"tagged.connect.settings.updateSetting",type:b,feature:a,value:d?1:0,callback:"TAGGED.api.nullResponseHandler"};TAGGED.api.queue.push(c);if(e){c={method:"tagged.connect.settings.getSettingsByFeature",feature:a,callback:e};TAGGED.api.queue.push(c)}TAGGED.api.dequeue()},connectCallback:function(a,b){if(b==1){if(this.connectSuccessCallback){this.connectSuccessCallback(a,b)}else{window.location.reload(true)}}else{if(b==2){alert(this.strings.alreadyConnected)}else{if(b==3){if(tagged.redirect_url){window.location.href=tagged.redirect_url}else{window.location.reload()}}else{if(b==4){window.location.href=tagged.reg_url}else{if($.type(b)==="undefined"){window.location.reload(true)}}}}}},handleDisconnect:function(c){if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}if(c.target){var b=c.target}else{var b=c.srcElement}if(!b.id){b=b.parentNode}var d=this.strings[b.id];if(d&&confirm(d)){var a={method:"tagged.connect.disconnect",service:this._getServiceName(b.id),callback:{fn:this.disconnectResponse,scope:this}};TAGGED.api.call(a)}},disconnectResponse:function(b){if(b&&b.stat=="ok"){var a=b.result.service;$("a#"+a+"_disconnect").addClass("hide_me");$("a."+a+"_connect").removeClass("hide_me");$("div#"+a+"_connected").addClass("hide_me")}},settingsResponse:function(a){if(a.stat=="ok"){this.connectSettings=a.result;this.renderConnectContainers()}},refreshSettings:function(){this.getSetting(this.feature,"tagged.modules.connect.settingsResponse")},renderConnectContainers:function(a){if(this.connectSettings!=null){a=a||"";var d=$("div.connect_container");this.connectSettings.checkbox_callback="tagged.modules.connect.refreshSettings";var c=this.renderConnectBox(this.connectSettings);for(var b=0;b<d.length;b++){d[b].innerHTML=c}this.addListener(this.refreshSettings)}else{if(this.connectSettings==null){this.refreshSettings()}}},renderConnectBox:function(j){var c="";if(!j){return c}var h="";if(j.checkbox_callback){h=j.checkbox_callback}var g=[];if((j.feature_name=="photos"||j.feature_name=="status")&&tagged.getBrand()=="hi5"){this.services=["facebook"]}for(var d=0;d<this.services.length;++d){var f=this.services[d];if(d>0){c+=this._separator}if(j.linked[f+"Connected"]){var a=!j.settings||j.settings[f]!==0;c+=sprintf(this._connectCheckbox,f,a?'checked="checked"':"",f+"_post",j.feature_name,h,"chk_"+f,"chk_"+f,this.strings[f+"Post"])}else{c+=sprintf(this._connectLink,f,this.strings[f+"Connect"])}if(tagged.data.enable_tagged_tip){var e=f+"_tip";c+=sprintf('<span class="tagged_tip_icon" id="%s"></span>',e);g.push(e)}}c=sprintf(this._connectHTML,c);if(tagged.data.enable_tagged_tip&&g.length){var b=window.setInterval(function(){var m=$("#"+g[0]);if(m){window.clearInterval(b);var k=[];for(var l=0;l<g.length;l++){k.push({body:sprintf(tagged.modules.connect.strings.tagged_tip,tagged.getBrand(),"/account_info.html"),node:g[l]})}tagged.modules.taggedTips.init(k)}},200)}return c},renderFacebookFeed:function(d,b){if(!(d.result.facebook&&d.result.facebook.tracking_id&&b.feature&&b.from&&b.generation&&b.callback&&b.scope)){alert(this.strings.general_error);return}var c={method:"stream.publish"};var a="";if(d.result.facebook.attachment){c.attachment=d.result.facebook.attachment}if(d.result.facebook.action_links){c.action_links=d.result.facebook.action_links;a=d.result.facebook.action_links[0].href}if(d.result.facebook.message){c.message=d.result.facebook.message;a=d.result.facebook.message}var e=function(f){if(f&&f.post_id){var g={method:"tagged.connect.logPost",service:"facebook",feature:b.feature,from:b.from,generation:b.generation,trackingId:d.result.facebook.tracking_id,callback:{fn:b.callback,scope:b.scope}};TAGGED.api.call(g)}else{if($.type(b.skip_callback)==="function"){b.skip_callback()}}};tagged.apps.facebook.core.getSDK().then(function(f){f.ui(c,e)})},getPageLocation:function(){var a=window.location.pathname;if(a&&a.length>1){var b=a.indexOf(".html");b=b>0?b:a.indexOf("?");if(b>0){return a.substr(1,b-1)}}if(!a||a.length<2){a="index"}return a},getGeneration:function(){var a=TAGGED.api.getQueryStringParameter("generation");if(a&&!isNaN(a)){++a}else{a=0}return a},needConfirmation:function(b){b=b||this.connectSettings;if(!b.settings||b.settings.intent_confirmed!=1){for(var c in b.linked){var a=c.substr(0,c.indexOf("Connected"));if(a&&b.linked[c]&&(!b.settings||b.settings[a]!==0)){return true}}}return false},_getServiceName:function(b){var a=b.split("_");return a[0]}};$(document).ready(function(){tagged.modules.connect.init()});tagged.namespace("index.connect");tagged.index.connect={appealLightBox:null,init:function(){E.addListener(D.getElementsByClassName("connect_container"),"click",tagged.modules.connect.handleConnect,tagged.modules.connect,true);window.connect_callback=this.handleConnectCallback;if(tagged.hasOpenAppeal){tagged.index.connect.displayAppealsLightbox()}},handleConnectCallback:function(a,b){if(b==4){window.location.href=tagged.reg_url+"?service="+a}else{if(b>0){if(tagged.data.redirect_url){window.location.href=tagged.data.redirect_url}else{window.location.reload()}}}},displayAppealsLightbox:function(){if(tagged.index.connect.appealLightBox!=null){return}var b=tagged.index.connect.strings.appealHeader;var a=sprintf(tagged.index.connect.strings.appealBody,tagged.getBrand());a=a+"<br><br>"+sprintf(tagged.index.connect.strings.appealSig,tagged.getBrand());this.appealLightBox=new YAHOO.widget.Panel("confirmPanel",{width:"500px",fixedcenter:true,modal:true,iframe:true});this.appealLightBox.setHeader(b);this.appealLightBox.setBody(a);this.appealLightBox.render(document.body);E.addListener(this.appealLightBox.close,"click",tagged.index.connect.closePanel)},closePanel:function(){tagged.index.connect.appealLightBox.destroy();tagged.index.connect.appealLightBox=null;window.location=tagged.base_url}};E.onDOMReady(tagged.index.connect.init,"",tagged.index.connect);tagged.loadStringsDirect({"tagged.modules.taggedTips.strings":{header:"%s Tip"}});tagged.loadStringsDirect({"tagged.modules.connect.strings":{twitter_disconnect:"Are you sure you want to disconnect from Twitter?",facebook_disconnect:"Are you sure you want to disconnect from Facebook?",myspace_disconnect:"Are you sure you want to disconnect from Myspace?",windowClosed:"Failed to open the pop up window.",alreadyConnected:"This account is connected to another %s account.",facebookConnect:"Connect to Facebook",facebookPost:"Post to Facebook",twitterConnect:"Connect to Twitter",twitterPost:"Post to Twitter",myspaceConnect:"Connect to MySpace",myspacePost:"Post to MySpace",tagged_tip:'Click the checkbox next to any service to Connect and post content from your %s account. You can manage your Connected Accounts at any time on the <a href="%s" target="_blank">Account</a> page.',general_error:"Sorry, there was an error. Please reload the page and try again."}});tagged.loadStringsDirect({"tagged.index.connect.strings":{appealHeader:"Access Denied: Appeal Pending",appealBody:"%s Customer Service is in the process of evaluating your account removal appeal.<br><br> You will be informed via email when a decision is reached, until then you will not be able to access this account. Your patience is greatly appreciated",appealSig:"Thanks, <br>%s Customer Service"}});tagged.namespace("tagcom.menu");tagged.tagcom.menu={menuRegistry:{},create:function(c,h,i,j,a,g,d,b){var e=new this.Menu(c,h,i,j,a,g,d,b);switch(e.type){case"click":e.parent.click(function(k){if(e.menu.css("visibility")=="hidden"){e.open();k.stopPropagation()}else{e.close()}k.preventDefault()});break;case"hover":function f(k){if(!this.isInside(k.pageX-1,k.pageY-1)){this.close()}else{$(document).bind("mousemove.menu_"+e.id,$.proxy(function(l){if(!this.isInside(l.pageX-1,l.pageY-1)){this.close()}},this))}}e.parent.bind("mouseenter.menu_"+e.id,function(k){e.open();$(document).unbind(".menu"+e.id);k.preventDefault()}).bind("mouseleave.menu_"+e.id,$.proxy(f,e));e.menu.bind("mouseleave.menu_"+e.id,$.proxy(f,e));break;default:return null}e.menu.bind("click.menu_",function(k){tagged.tagcom.menu.onSelection(k,e)});this.menuRegistry[e.id]=e;return e},findMenuPos:function(t){var a=t.menu;var j=t.parent;var n=t.placement;var l=t.container;var b=j.offset();var f=b.top;var d=f+j.outerHeight();var g=b.left;var o=g+j.outerWidth();var p=l.offset()||{top:0,left:0};var h=p.top;var c=h+l.height();var r=p.left;var s=r+l.width();var q;var k;var i=false;var e=false;switch(n){case"down":q=f+j.outerHeight();k=g;if(q+a.outerHeight()<c){i=true;break}break;case"up":q=f-a.outerHeight();k=g;if(q>h){i=true;break}if(n=="up"){q=f+j.outerHeight();k=g;if(q+a.outerHeight()<c){i=true;break}}break;case"right":q=f;k=o;if(k+a.outerWidth()<s){e=true;break}break;case"left":q=f;k=g-a.outerWidth();if(k>r){e=true;break}q=f;k=o;if(k+a.outerWidth()<s){e=true;break}break;default:q=0;k=0;alert("Error, menu imposible to place!");break}if(i&&k+a.outerWidth()>=s){k=o-a.outerWidth()}if(e&&q+a.outerHeight()>=c){q=d-a.outerHeight()}if(e&&q<=h){q=c-a.outerHeight()}return{top:q,left:k}},onSelection:function(c,a){c.preventDefault();c.stopPropagation();var b=a.callback($(c.target),a);if(!b){a.close()}},getMenu:function(a){return this.menuRegistry[a]},unregisterMenu:function(a){delete this.menuRegistry[a]},Menu:function(f,e,h,b,g,d,c,a){f=$(f);e=$(e);d=d||"click";c=c||"down";a=$(a||document);this.id=f.attr("id");this.menu=f;this.parent=e;this.callback=h;this.openCallback=b;this.closeCallback=g;this.placement=c;this.container=a;this.type=d;this.close=function(){if(this.menu.css("visibility")=="visible"){this.menu.css({visibility:"hidden",left:"",top:""});$(document).unbind(".menu_"+this.id);if(this.closeCallback){this.closeCallback(this)}}};this.closeOthers=function(){var i=tagged.tagcom.menu.menuRegistry;for(m in i){if(m!=this.id){i[m].close()}}};this.open=function(){if(this.menu.css("visibility")=="hidden"){var i=tagged.tagcom.menu.findMenuPos(this);this.menu.offset(i).offset(i).css("visibility","visible");this.closeOthers();if(this.type=="click"){$(document).bind("click.menu_"+this.id,$.proxy(function(j){this.close()},this))}if(this.openCallback){this.openCallback(this)}}};this.unbind=function(){var i=".menu_"+this.id;this.parent.unbind(i);this.menu.unbind(i);$(document).unbind(i);tagged.tagcom.menu.unregisterMenu(this.id)};this.isInside=function(i,o){var k=this.parent.offset();k.right=k.left+this.parent.outerWidth();k.bottom=k.top+this.parent.outerHeight();var l=this.menu.offset();l.right=l.left+this.menu.outerWidth();l.bottom=l.top+this.menu.outerHeight();var n=i>Math.ceil(k.left)&&i<k.right&&o>Math.ceil(k.top)&&o<=k.bottom;var j=i>Math.ceil(l.left)&&i<l.right&&o>Math.ceil(l.top)&&o<=l.bottom;return n||j}}};function formatStuff(a,f,e,b){var c=b.offset();c.right=c.left+b.outerWidth();c.bottom=c.top+b.outerHeight();var d=e.offset();d.right=d.left+e.outerWidth();d.bottom=d.top+e.outerHeight();return""+a+","+f+" \n "+c.left+"-"+c.right+","+c.top+"-"+c.bottom+" \n "+d.left+"-"+d.right+","+d.top+"-"+d.bottom};tagged.namespace("footer");tagged.footer={init:function(){tagged.tagcom.menu.create("#lanuage_menu","#language_dropup",this.onLanguageSelect,this.onOpen,this.onClose,"click","up")},onOpen:function(a){a.parent.addClass("opened")},onClose:function(a){a.parent.removeClass("opened")},onLanguageSelect:function(b,c){var a={method:"tagged.account.setUserLanguage",langCode:b.attr("id"),callback:{fn:tagged.languageUpdated}};TAGGED.api.call(a)}};$(function(){tagged.footer.init()});tagged.loadStringsDirect({"tagged.security.password.strings":{header:"Password Required"}});tagged.loadStringsDirect({"tagged.security.captcha.strings":{header:"Verification Required",failed:"Verification Failed"}});tagged.loadStringsDirect({"TAGGED.api.strings":{errorMethodMissing:"An error occurred. Please refresh the page and try again. Method is missing.",errorGeneral:"An error occurred. Please refresh the page and try again."}});tagged.loadStringsDirect({"tagged.apps.meetme.headliners.strings":{buy:{errors:{generic:"Sorry, an error occured. Please try again later.","120":"The cost of becoming a Headliner has changed.","121":'You need more gold to get on Headliners. <a href="/gold.html?ll=15320#t=tearn_gold" target="gold">Get More Gold</a>',"122":"We're sorry. Your primary photo has not yet been approved. Please try again in a few minutes.","123":"You must have a photo to be featured in Headliners.","131":"Your Gold balance is suspended. Headliners purchases are disabled until this hold is removed.","132":'Sorry, but we could not process your purchase request at this time. Please try again later. If this problem persists for over 24 hours, please <a href="/support.html" target="support">contact customer support</a>.'}}}});tagged.loadStringsDirect({"tagged.apps.meetme.spotlight.strings":{buy:{errors:{generic:"Sorry, an error occured. Please try again later.","121":'You need more gold to get Spotlight views. <a href="/gold.html?ll=meetme_spotlight#t=tearn_gold" target="gold">Get More Gold</a>',"122":"We're sorry. Your primary photo has not yet been approved. Please try again in a few minutes.","123":"You must have a photo to be featured in Spotlight views.","131":"Your Gold balance is suspended. Spotlight purchases are disabled until this hold is removed.","132":'Sorry, but we could not process your purchase request at this time. Please try again later. If this problem persists for over 24 hours, please <a href="/support.html" target="support">contact customer support</a>.'}}}});tagged.loadStringsDirect({"tagged.header.alerts.strings":{newAlerts:"New Alerts"}});tagged.namespace("jst.toast.sendmessage");tagged.jst.toast.sendmessage.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){s.push('<div class="user_container">    <div class="error_text"><p></p></div>    <img src="');s.push(escapeHTML(user_thumbnail));s.push('"/>    <div class="right_pane">        <textarea class="user_message"></textarea>        <div class="message_pane"></div>    </div>    <div class="right_pane send">        <input type="button" class="grey_btn toast_button user_send_button" value="');s.push(escapeHTML("Send"));s.push('" />    </div>    <div class="clear_both"></div></div>')}return s.join("")}catch(e){if(typeof window!=="undefined"&&window._jstFailuresRaise){throw e}alert('template error in "toast/sendmessage.jst":\n\n'+e)}return""};tagged.namespace("jst.toast.message");tagged.jst.toast.message.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){s.push('<div class="alerts_toast_pane">    <div class="sender_container">        <a class="user_photo" href="');s.push(escapeHTML(sender_url));s.push('"><img src="');s.push(escapeHTML(sender_thumbnail));s.push('" /></a>        <div class="right_pane">            <a href="#" class="close"></a>            <div class="heading">                ');var escaped_name=escapeHTML(sender_display_name);s.push("                ");s.push(sprintf('<a class="bold_text" href="%s">%s</a> sent a message',sender_url,escaped_name));s.push('            </div>            <div class="short_msg">                ');if(subject){s.push('                    <span class="bold_text">');s.push(escapeHTML(subject));s.push("</span>&nbsp;&ndash;&nbsp;");s.push(tagged.util.format.ellipse(message,summary_length));s.push("                ")}else{s.push("                    ");s.push(tagged.util.format.ellipse(message,summary_length));s.push("                ")}s.push('            </div>            <div class="full_msg" style="display: none;">                ');if(subject){s.push('                    <span class="bold_text">');s.push(escapeHTML(subject));s.push("</span>&nbsp;&ndash;&nbsp;");s.push(message);s.push("                ")}else{s.push("                    ");s.push(message);s.push("                ")}s.push("            </div>            ");if(message.length>summary_length){s.push('                <div><a href="#" class="show_more">');s.push(escapeHTML("show more"));s.push("</a></div>            ")}s.push('            <div><input type="text" class="default_input" value="');s.push(escapeHTML("Reply"));s.push('" /></div>        </div>        <div class="clear_both"></div>    </div>    ');s.push(tagged.jst.toast.sendmessage.render({user_thumbnail:user_thumbnail}));s.push("</div>")}return s.join("")}catch(e){if(typeof window!=="undefined"&&window._jstFailuresRaise){throw e}alert('template error in "toast/message.jst":\n\n'+e)}return""};tagged.namespace("jst.toast.meetme");tagged.jst.toast.meetme.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){s.push('<div class="alerts_toast_pane">    <div class="sender_container">        <a class="user_photo" href="');s.push(escapeHTML(sender_url));s.push('"><img src="');s.push(escapeHTML(sender_thumbnail));s.push('" /></a>        <div class="right_pane">            <a href="#" class="close"></a>            <div class="heading">                ');var escaped_name=escapeHTML(sender_display_name);s.push("                ");if(isMatch){s.push("                    ");s.push(sprintf('Meet Me match from <a class="bold_text" href="%s">%s</a>',sender_url,escaped_name));s.push("                ")}else{s.push("                    ");s.push(sprintf('Meet Me interest from <a class="bold_text" href="%s">%s</a>',sender_url,escaped_name));s.push("                ")}s.push('            </div>            <div class="full_msg meetme">');s.push(escapeHTML(info));s.push("</div>            ");if(isMatch){s.push('                <div><input type="text" class="default_input" value="');s.push(escapeHTML("Send a message"));s.push('" /></div>            ')}else{s.push('                <div class="action_button">                    <input type="button" class="grey_btn toast_button meetme_button" value="');s.push(escapeHTML("Meet Me"));s.push('" />                </div>            ')}s.push('        </div>        <div class="clear_both"></div>    </div>    ');if(isMatch){s.push("        ");s.push(tagged.jst.toast.sendmessage.render({user_thumbnail:user_thumbnail}));s.push("    ")}s.push("</div>")}return s.join("")}catch(e){if(typeof window!=="undefined"&&window._jstFailuresRaise){throw e}alert('template error in "toast/meetme.jst":\n\n'+e)}return""};tagged.namespace("jst.toast.friendrequest");tagged.jst.toast.friendrequest.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){s.push('<div class="alerts_toast_pane">    <div class="sender_container">        <a class="user_photo" href="');s.push(escapeHTML(sender_url));s.push('"><img src="');s.push(escapeHTML(sender_thumbnail));s.push('" /></a>        <div class="right_pane">            <a href="#" class="close"></a>            <div class="heading">                ');if(isNewFriend){s.push("                    ");s.push(sprintf('<a class="bold_text" href="%s">%s</a> is now your friend',sender_url,sender_display_name));s.push("                ")}else{s.push("                    ");s.push(sprintf('Friend request from <a class="bold_text" href="%s">%s</a>',sender_url,sender_display_name));s.push("                ")}s.push('            </div>            <div class="full_msg friend">');s.push(escapeHTML(info));s.push("</div>            ");if(isNewFriend){s.push('                <div><input type="text" class="default_input" value="');s.push(escapeHTML("Send a message"));s.push('" /></div>            ')}else{s.push('                <div class="action_button">                    <input type="button" class="grey_btn toast_button friend_button" value="');s.push(escapeHTML("Accept"));s.push('" />                    <div class="accepted">');s.push(escapeHTML("Accepted"));s.push("</div>                </div>            ")}s.push('        </div>        <div class="clear_both"></div>    </div>    ');if(isNewFriend){s.push("        ");s.push(tagged.jst.toast.sendmessage.render({user_thumbnail:user_thumbnail}));s.push("    ")}s.push("</div>")}return s.join("")}catch(e){if(typeof window!=="undefined"&&window._jstFailuresRaise){throw e}alert('template error in "toast/friendrequest.jst":\n\n'+e)}return""};tagged.namespace("jst.toast.friendpresenceupdate");tagged.jst.toast.friendpresenceupdate.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){s.push('<div class="alerts_toast_pane">    <div class="sender_container">        <a class="user_photo" href="');s.push(escapeHTML(sender_url));s.push('"><img src="');s.push(escapeHTML(sender_thumbnail));s.push('" /></a>        <div class="right_pane">            <a href="#" class="close"></a>            <div class="heading">                <img class="presence_icon" src="');s.push(escapeHTML(tagged.static_uri));s.push(escapeHTML(presence_icon));s.push('" />                ');var escaped_name=escapeHTML(sender_display_name);s.push("                ");s.push(sprintf('<a class="bold_text" href="%s">%s</a> is now online.',sender_url,escaped_name));s.push('            </div>            <div>                <input type="text" class="default_input" value="');s.push(escapeHTML("Send a message"));s.push('" />            </div>        </div>        <div class="clear_both"></div>    </div>        ');s.push(tagged.jst.toast.sendmessage.render({user_thumbnail:user_thumbnail}));s.push("</div>")}return s.join("")}catch(e){if(typeof window!=="undefined"&&window._jstFailuresRaise){throw e}alert('template error in "toast/friendpresenceupdate.jst":\n\n'+e)}return""};tagged.namespace("jst.toast.activityupdate");tagged.jst.toast.activityupdate.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){s.push('<div class="alerts_toast_pane">    <div class="sender_container">        <a class="user_photo" href="');s.push(escapeHTML(sender_url));s.push('"><img src="');s.push(escapeHTML(sender_thumbnail));s.push('" /></a>        <div class="right_pane">            <a href="#" class="close"></a>            <a href="');s.push(escapeHTML(action_url));s.push("\" style='text-decoration: none; color: #333;'>                ");var escaped_name="<strong>"+escapeHTML(sender_display_name)+"</strong>";s.push('                <div class="heading">');s.push(sprintf(activity,escaped_name,activity));s.push('</div>                <div class="bold_text full_message" style="margin-top:10px; color: blue;">');s.push(escapeHTML(action_text));s.push("</div>            </a>        </div>    </div></div>")}return s.join("")}catch(e){if(typeof window!=="undefined"&&window._jstFailuresRaise){throw e}alert('template error in "toast/activityupdate.jst":\n\n'+e)}return""};tagged.namespace("jst.toast.profileview");tagged.jst.toast.profileview.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){s.push('<div class="alerts_toast_pane">    <div class="viewer_container">        <a class="user_photo" href="');s.push(escapeHTML(viewer_url));s.push('"><img src="');s.push(escapeHTML(viewer_thumbnail));s.push('" /></a>        <div class="right_pane">            <a href="#" class="close"></a>            <div class="heading">                ');var name=sprintf('<span class="bold_text">%s</span>',TAGGED.xssFilter(viewer_display_name));s.push('                <a href="');s.push(escapeHTML(viewer_url));s.push('">');s.push(sprintf("%s is viewing your profile!",name));s.push('</a>            </div>            <div class="detail">');s.push(escapeHTML(summary));s.push("</div>            ");if(viewer_uid){s.push('                <div>                    <input type="text" class="default_input" value="');s.push(escapeHTML("Send a message"));s.push('" />                </div>            ')}else{s.push('                <div class="align_center"><a href="');s.push(escapeHTML(viewer_url));s.push('">');s.push("Get VIP to see theirs");s.push("</a></div>            ")}s.push('        </div>        <div class="clear_both"></div>    </div>    ');if(viewer_uid){s.push("        ");s.push(tagged.jst.toast.sendmessage.render({user_thumbnail:user_thumbnail}));s.push("    ")}s.push("</div>")}return s.join("")}catch(e){if(typeof window!=="undefined"&&window._jstFailuresRaise){throw e}alert('template error in "toast/profileview.jst":\n\n'+e)}return""};tagged.namespace("jst.toast.petsboughtyou");tagged.jst.toast.petsboughtyou.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){s.push('<div class="alerts_toast_pane pets_toast" style="cursor:pointer;">    <div class="sender_container" style="width:228px;">        <a class="user_photo" href=""><img src="');s.push(escapeHTML(buyer_thumbnail));s.push('" /></a>        <div class="right_pane">            <a href="#" class="close"></a>            <div class="heading">                ');s.push(sprintf("%s bought you in Pets. Your value increased to %s. You earned %s.",buyer_display_name,user_value,earned_amount));s.push('            </div>            <div class="action_button">                 <input type="button" class="toast_green_btn toast_button pets_button" value="');s.push(escapeHTML("Pets"));s.push('" />            </div>        </div>        <div class="clear_both"></div>    </div></div>')}return s.join("")}catch(e){if(typeof window!=="undefined"&&window._jstFailuresRaise){throw e}alert('template error in "toast/petsboughtyou.jst":\n\n'+e)}return""};tagged.namespace("jst.toast.petsboughtyourpet");tagged.jst.toast.petsboughtyourpet.render=function(C,options){C=C||{};options=options||{};var ngettext=function(s,n){return s[(n==1?0:1)]};var s=[];var escapeHTML=TAGGED.jst.xssFilter;try{with(C){s.push('<div class="alerts_toast_pane pets_toast" style="cursor:pointer;">    <div class="sender_container" style="width:228px;">        <a class="user_photo" href=""><img src="');s.push(escapeHTML(pet_thumbnail));s.push('" /></a>        <div class="right_pane">            <a href="#" class="close"></a>            <div class="heading">                ');s.push(sprintf("%s bought your Pet %s. You earned %s.",buyer_display_name,pet_display_name,earned_amount));s.push('            </div>            <div class="action_button">                 <input type="button" class="toast_green_btn toast_button pets_button" value="');s.push(escapeHTML("Buy back!"));s.push('" />            </div>        </div>        <div class="clear_both"></div>    </div></div>')}return s.join("")}catch(e){if(typeof window!=="undefined"&&window._jstFailuresRaise){throw e}alert('template error in "toast/petsboughtyourpet.jst":\n\n'+e)}return""};tagged.namespace("util.string");tagged.util.string={quoteRegEx:null,highlight_span:'<span class="highlight">$1</span>',isEmpty:function(a){return(a==null||a.match(/^\s*$/)!=null)},isValidEmail:function(b){var a=/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;return a.test(b)},escapeQuotes:function(a){if(!tagged.util.string.quoteRegEx){tagged.util.string.quoteRegEx=new RegExp();tagged.util.string.quoteRegEx.compile("('|\")","g")}return a.replace(tagged.util.string.quoteRegEx,"\\$1")},breakString:function(f,c){if(!f){return""}var f=f.replace(/\n/g," ");var e=f.split(" ");if(navigator.appName=="Netscape"){var g="<wbr/>"}else{var g="&shy;"}for(var d=0;d<e.length;d++){if(e[d].length>c){var b=e[d].length;var h=b/c;var j=new Array;for(var k=0;k<h;k++){var a=e[d].substring(k*c,(k+1)*c)+g;j.push(a)}e[d]=j.join("")}}return(e.join(" "))},tinyMceIsEmpty:function(a){if(!a){return true}return !$.trim(a.replace(/<p>|<\/p>|<br>|&nbsp;/g,""))},tinyMceIsShort:function(a){if($.trim(a.replace(/<p>|<\/p>|<br>|&nbsp;/g,"")).length<2){return true}return !$.trim(a.replace(/<p>|<\/p>|<br>|&nbsp;/g,""))},subParams:function(a,b){if((typeof b!="object")||(a==null)){return""}return a.replace(/\%?\{(\w+)\}/g,function(d,c,e){if(typeof(b[c])!="undefined"&&b[c]!=null){return b[c]}})},summary:function(a,b){if(!b||a.length<=b){return a}return a.substring(0,b-3).replace(/\.+$/,"")+"..."},linkify:function(c){var b=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;var a=/(^|[^\/])(www\.[-A-Z0-9][\S]*(\b|$))/gim;c=c.replace(b,'<a href="$1" class="ext">$1</a>');c=c.replace(a,'$1<a href="http://$2" class="ext">$2</a>');return c},createSearchRegex:function(d){var e="";for(var b=0;b<d.length;b++){if(d[b]){var a=d[b].replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");e+=a+"|"}}e=e.substr(0,e.length-1);var c=new RegExp("("+e+")","ig");return c},highlight:function(b,a){var c=tagged.util.string.createSearchRegex(a);return b.replace(c,tagged.util.string.highlight_span)},isString:function(a){return(typeof a=="string")||(a instanceof String)}};tagged.namespace("security.external");tagged.security.external={linkIsPopup:true,linkWindow:null,source:null,bindLinks:function(e,d){if(d&&d==="message_center"){this.source="message_center"}if(!e){e=document}parentEl=(typeof e=="string")?$("#"+e):$(e);var b=parentEl.find("a");for(var c=0;c<b.length;c++){if(!this.isLocalUrl($(b[c]).attr("href"))){$(b[c]).on("click",{node:$(b[c]),container:$(b[c]).parent()},$.proxy(this.checkWarning,this))}}var b=parentEl.find("form");for(var c=0;c<b.length;c++){if(!this.isLocalUrl($(b[c]).attr("action"))){$(b[c]).on("submit",{node:$(b[c]),container:$(b[c]).parent()},$.proxy(this.checkWarning,this))}}},isLocalUrl:function(a){if(!a){return true}if(a.substr(0,1)=="/"||a.substr(0,1)=="#"){return true}if(a.substr(0,tagged.base_url.length)==tagged.base_url){return true}if(a.substr(0,tagged.video_url.length)==tagged.video_url){return true}return false},continuationCB:null,newUrl:null,panel:null,checkWarning:function(e){e.preventDefault();if(e.data){var d=e.data.node;var a=e.data.container;var c=d[0].tagName.toLowerCase();var b=c=="a"?d.attr("href"):d.attr("action");this.newUrl=b;this.continuationCB=c=="a"?function(g){d.off("click",this.checkWarning);if(g){TAGGED.api.call({method:"tagged.security.externalUrlSubmitted",url:b,callback:"TAGGED.api.nullResponseHandler"});d.attr("target","_blank");d.removeClass("ext");if(this.source!=="message_center"){this.linkWindow.focus();this.linkWindow.location.replace(b)}}else{window.location=b}}:function(g){d.off("submit",this.checkWarning);if(g){TAGGED.api.call({method:"tagged.security.externalUrlSubmitted",url:d.attr("action"),callback:"TAGGED.api.nullResponseHandler"});d.attr("target","_blank");d.submit()}else{d.submit()}};var f={method:"tagged.security.isExternalUrlSafe",url:c=="a"?d.attr("href"):d.attr("action"),callback:{fn:function(g){if(g.stat!="ok"){if(this.linkWindow){this.linkWindow.close()}this.warn(g.stat)}else{this.continuationCB(this.linkIsPopup)}},scope:this}};if(typeof(a)!="undefined"&&a.attr("data-type")){f.container_type=a.attr("data-type");f.container_id=a.attr("data-id");f.user_id=a.attr("data-uid")}TAGGED.api.call(f);if(this.linkIsPopup&&c=="a"){if(this.source!=="message_center"){this.linkWindow=window.open("about:blank","link_popup");this.linkWindow.blur()}}}},makeWarning:function(a){var b=new tagged.util.stringBuffer();b.add("<p>").add(a).add("</p>");b.add('<p><a target="_blank" class="external_link" href="http://').add("code.google.com/apis/safebrowsing/safebrowsing_faq.html#whyAdvisory").add('">');b.add(this.strings.advisory).add("</a></p>");return b.toString()},makePanel:function(g){var c=document.createElement("form");c.id="warning";c.name="warning";var e=new tagged.util.stringBuffer();c.setAttribute("target","_blank");c.setAttribute("method","post");if(this.newUrl){c.setAttribute("action",this.newUrl)}var f="";if(g=="malware"){f=this.strings.malwarewarning;e.add(this.makeWarning(sprintf(this.strings.malwaremsg,"StopBadware.org")))}else{if(g=="phishing"){f=this.strings.phishingwarning;e.add(this.makeWarning(sprintf(this.strings.phishingmsg,"www.antiphishing.org")))}else{f=sprintf(this.strings.leavingwarning,tagged.getBrand());e.add('<p class="waybigger">'+this.strings.leavingmsg+"</p>")}}var d=sprintf(this.strings.continueTo,this.newUrl);e.add("<p>"+d+"</p>");e.add("<p>").add('<input id="cancel_popup" type="button" class="btn mtm" name="cancel" value="'+this.strings.cancel+'"/>');c.innerHTML=e.toString();var a=tagged.modules.lightbox.init({title:f,body:c,width:"600px",position:"center",minHeight:"20px"});a.setBody(c);var b=c.getElementsByTagName("a")[0];$(b).addClass("external_link");$(b).on("click",$.proxy(this.handleClose,this));$(c.cancel).on("click",$.proxy(this.handleClose,this));return a},warn:function(a){if(this.panel){this.panel.destroy()}this.panel=this.makePanel(a);this.panel.show()},handleClose:function(a){this.panel.destroy();this.panel=null}};tagged.namespace("messages_delta.util");tagged.messages_delta.util={messageWindow:null,sanitize:function(a,b){if(b==="inbox"&&a.length>50&&!/<(?:.|\n)*?>/.test(a)){a=this.truncate(a)}a=tagged.modules.emoticons.convertToImages(a);return a},truncate:function(a){a=a.replace(/&nbsp;/g," ");a=a.substring(0,49)+" ...";a=a.replace(/ /g,"&nbsp;");return a},onAddFriend:function(a){if(a&&a.uid){var b={method:"tagged.usermgmt.addFriend",uid_to_add:a.uid,callback:{fn:this.onFriendAdded,scope:this,args:{clientCb:a.cb}}};if(a.validation&&a.validation.type&&a.validation.value){b.validation_type=a.validation.type;b.validation_value=a.validation.value}TAGGED.api.call(b)}},onFriendAdded:function(c,a){if(c.stat=="ok"&&c.results){if(c.results.ERROR_FLAG==0){a.clientCb(c)}else{if(c.results.REQUIRES_VALIDATION){var d=this;var b=tagged.modules.lightbox.init({body:c.results.validation_html,className:"friend_validation",destroyOnClose:true});$("#validate_friend",b.getDialogDom()).on("submit",function(f){f.preventDefault()});$("#submit_verification",b.getDialogDom()).click(function(j){var f={};var i=$("#validate_friend",b.getDialogDom());var h=i.find("#validate_lastname").val();var g=i.find("#validate_email").val();i.find("#validation_error").addClass("hide_me");if(!tagged.util.string.isEmpty(h)){f.type="last_name";f.value=h}else{if(!tagged.util.string.isEmpty(g)){f.type="email";f.value=g}else{i.find("#validation_error").removeClass("hide_me").html(d.strings.enterNameOrEmail);return}}d.onAddFriend({uid:c.results.uid,validation:f,cb:a.clientCb});b.hide()});$("#cancel_add_friend",b.getDialogDom()).click(function(f){b.hide()})}}}},onReport:function(b,a){return sprintf(tagged.messages_delta.util.strings.reportFeedback,tagged.getBrand(),b.model.buddies[a].name,'<a href="#" id="report_notification_block" data-uid="'+a+'">'+b.model.buddies[a].name+"</a>")},onBlock:function(b,a){return sprintf(tagged.messages_delta.util.strings.blockUserFeedback,b.model.buddies[a].name)},onUnBlock:function(b,a){return sprintf(tagged.messages_delta.util.strings.unBlockUserFeedback,b.model.buddies[a].name)},escapeHTML:function(a){if(a&&(typeof(a)=="string")){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}else{return""}},openMessageCenter:function(b,c){if(tagged.data.needsValidation){tagged.security.validation.renderValidationLightBox();return false}if(!(tagged.data.newMessagesEnabled&&tagged.data.realtime_enabled)){return false}var a=c||"";if(this.messageWindow&&!this.messageWindow.closed){try{this.messageWindow.tagged.messages_delta.message_center.switchBuddy(b,true)}catch(d){}}else{window.mcOpenerContext={targetUid:b,buddyIds:{},unreadBuddyIds:{}};this.messageWindow=window.open(tagged.base_url+"/messages_center.html?uid="+b+a,"MessageCenter","location=yes,height=620,width=728,menubar=no,toolbar=no,status=no,scrollbars=yes,resizable=0")}this.messageWindow.focus();return true}};tagged.namespace("modules.autosizeInput");tagged.modules.autosize_input={autosize:function(a,b){$(a).autoResize({onResize:function(){},animate:true,animateDuration:100,animateCallback:function(){},extraSpace:0,limit:b||140})}};tagged.namespace("json.pets.shorthand");tagged.json.pets.shorthand=[{symbol:"Td",threshold:48,color:"#A349A3",cssClass:"shorthand-td",value:"1000000000000000000000000000000000000000000"},{symbol:"U",threshold:42,color:"#7F7F7F",cssClass:"shorthand-u",value:"1000000000000000000000000000000000000"},{symbol:"N",threshold:36,color:"#4E6B6A",cssClass:"shorthand-n",value:"1000000000000000000000000000000"},{symbol:"S",threshold:30,color:"#DF7401",cssClass:"shorthand-s",value:"1000000000000000000000000"},{symbol:"Q",threshold:24,color:"#8A2BE2",cssClass:"shorthand-q",value:"1000000000000000000"},{symbol:"T",threshold:18,color:"#8B6508",cssClass:"shorthand-t",value:"1000000000000"},{symbol:"M",threshold:12,color:"#006600",cssClass:"shorthand-m",value:"1000000"},{symbol:null,threshold:0,color:"#000000",value:"1"}];tagged.namespace("util.big");(function(){var a=tagged.json.pets.shorthand.slice(0,tagged.json.pets.shorthand.length-1);var f=(function(){var l={};for(var k=0;k<a.length;k++){l[a[k].symbol]=a[k]}return l})();var b={forced:false,conditional:false,appendString:"",cssClass:""};var j='<span class="shorthand %s"><span title="%s">%s</span>%s</span>';var d=function(l,k,n,o){var i=l.length;if(i>k-6){var m=tagged.util.format.currency(l.substring(0,i-k+6))}else{if(i>k-7){m="$0."+l.substring(0,2)}else{if(i>k-8){m="$0.0"+l.substring(0,1)}else{m=sprintf(o+PETS.strings.lessThan,"$0.01")}}}return m+o+n};Big.prototype.max=function(){var o=Array.prototype.slice.apply(arguments);var m=this;for(var p=0,n=o.length;p<n;p++){var k=tagged.util.big.convertToBig(o[p]);if(m.lessThan(k)){m=k}}return m};Big.prototype.min=function(){var n=Array.prototype.slice.apply(arguments);var p=this;for(var o=0,m=n.length;o<m;o++){var k=tagged.util.big.convertToBig(n[o]);if(p.greaterThan(k)){p=k}}return p};Big.prototype.getPetsShortHandSymbol=function(q){var o=this.toString().replace(".","");for(var p=0,k=o.length,n=a.length,m=false;p<n;p++){if(q&&q==a[p].symbol){m=true}if(k>a[p].threshold){return a[p].symbol}else{if(m&&k>a[p].threshold-8){return a[p].symbol}}}return""};Big.prototype.getPetsShortHandValue=function(l){var k=this.toString();if(k.indexOf(".")>-1){k=k.substring(0,k.indexOf("."))}if(l==""){return k}var i=k.length;return k.substring(0,i-f[l].threshold+6)};Big.prototype.getPetsShortHandComponents=function(q){var o=this.toString().replace(".","");for(var p=0,k=o.length,n=a.length,m=false;p<n;p++){if(q&&q==a[p].symbol){m=true}if(k>a[p].threshold){return{value:this.getPetsShortHandValue(a[p].symbol),symbol:a[p].symbol}}else{if(m&&k>a[p].threshold-8){return{value:this.getPetsShortHandValue(a[p].symbol),symbol:a[p].symbol}}}}return{value:o,symbol:""}};Big.prototype.toPetsShortHand=function(n,m,p){var l=this.toString().replace(".","");var o="";if(m){o=this.getPetsShortHandSymbol(n)}else{if(n&&f[n]){o=n}else{o=this.getPetsShortHandSymbol()}}if(o){var k=d(l,f[o].threshold,o,"&nbsp;");var i=f[o].cssClass;return sprintf(j,i||"",tagged.util.format.currency(l,true),k,p||"")}else{return['<span class="shorthand-none">',tagged.util.format.currency(l,true),p||"","</span>"].join("")}};Big.prototype.toPetsShortHandFromMap=function(n){n=$.extend({},b,n||{});var l=this.toString().replace(".","");var m="";if(n.conditional){m=this.getPetsShortHandSymbol(forced)}else{if(n.forced&&f[n.forced]){m=n.forced}else{m=this.getPetsShortHandSymbol()}}if(m){var k=d(l,f[m].threshold,m,"&nbsp;");var i=f[m].cssClass||"";if(n.cssClass){i=(i?i+" ":"")+n.cssClass}return sprintf(j,i,tagged.util.format.currency(l,true),k,n.appendString)}else{return['<span class="shorthand-none">',tagged.util.format.currency(l,true),n.appendString||"","</span>"].join("")}};Big.prototype.formatToShorthand=function(){var i=this.toString().replace(".","");var k=this.getPetsShortHandSymbol();if(k){return d(i,f[k].threshold,k," ")}else{return tagged.util.format.currency(i)}};function h(l,m){var o=l.toString().split("");var n=0,k="",i=l.length;while(n<i&&o[n]!="."){k+=o[n++]}while(m--){if(++n<i){k+=o[n]}else{k+="0"}}return k}tagged.util.big.symbolMap={};for(var c=0,e=tagged.json.pets.shorthand.length;c<e;++c){var g=tagged.json.pets.shorthand[c];if(g.symbol){tagged.util.big.symbolMap[g.symbol]=new Big(g.value)}}tagged.util.big.convertToBig=function(m,n){var l=m;if(m instanceof Big){}else{if(typeof m=="string"){l=new Big(m)}else{if(typeof m=="number"){var i=m.toString();if(/e+/.test(i)){var k=i.split("e+");l=new Big(h(k[0],k[1]))}else{l=new Big(m)}}else{return NaN}}}var o=tagged.util.big.symbolMap[n];if(o){l=l.times(o)}return l}})();tagged.namespace("toast_manager");tagged.toast_manager={toasts:[],subTypeMap:{message:"Message",meetme:"MeetMe",friend_request:"FriendRequest",friend_presence_update:"FriendPresenceUpdate",activity_update:"ActivityUpdate",profile_view:"ProfileView",pets:"Pets",inactivity:"Inactivity"},init:function(){if(tagged.data.disable_toasts=="nonpets"){this.subTypeMap={pets:this.subTypeMap.pets}}else{if(tagged.data.disable_toasts){return}}var b=tagged.data.disabled_toasts_list;if(b){for(var a=0;a<b.length;a++){if(b[a] in this.subTypeMap){delete this.subTypeMap[b[a]]}}}tagged.realtime.register("toast_update",{cb:this.newAlert,scope:this})},inactivityModule:(function(b){var c=0;var a=null;return{_delay:0,pageLoadDelay:5000,maybeBegin:function(d){var e=parseInt(tagged.getCookie("toast_inactivity"),10);var f=1000*60*60*24;window.setTimeout(function(){tagged.toast_manager.inactivityModule.init(d)},Math.max(0,(e||0)+f-(new Date()).getTime()))},init:function(d){d=d||this._delay;$(document).click(this.updateTime).keypress(this.updateTime);this.doSomething=$.proxy(this.doSomething,this);c=(new Date()).getTime();this.initTimer(d)},initTimer:function(d){window.clearTimeout(a);a=window.setTimeout(tagged.toast_manager.inactivityModule.doSomething,(new Date()).getTime()+b+(d||0)-c)},doSomething:function(){if((new Date()).getTime()<=c+b){return this.initTimer()}TAGGED.api.call({method:"tagged.toasts.getInactivityToast",callback:{fn:tagged.toast_manager.inactivityModule.handleToast,scope:tagged.toast_manager.inactivityModule}})},handleToast:function(d){if(d.stat=="ok"){if(d.result.bucketId==null){return this.cleanUp()}tagged.toast_manager.newAlert([{sub_type:"inactivity",result:d.result}]);tagged.setCookie("toast_inactivity",(new Date()).getTime(),2);TAGGED.api.call({method:"tagged.toasts.logInactivityToast",ltype:"view",callback:{fn:$.noop},bucket:d.result.bucketId})}this.cleanUp();this.maybeBegin()},cleanUp:function(){$(document).off("click",this.updateTime).off("keypress",this.updateTime)},updateTime:function(){c=(new Date()).getTime()}}})(20000),newAlert:function(e){var c=e[e.length-1];var d=c.sub_type;if(!(d in this.subTypeMap)){return}this.inactivityModule.updateTime();if(this.toasts.length>2){for(var b=0;b<this.toasts.length;b++){if(!this.toasts[b].isActive){this.toasts[b].destroy(function(){this.toasts.splice(b,1);var f=new this[this.subTypeMap[d]](c);if(f.data){this.toasts.push(f)}},this);break}}}else{var a=new this[this.subTypeMap[d]](c);if(a.data){this.toasts.push(a)}}},toastDestroyed:function(a){for(var b=0;b<this.toasts.length;b++){if(this.toasts[b]==a){this.toasts.splice(b,1);break}}},Message:function(a){if(!this.filterData(a)){return}if(a.sender_uid==tagged.data.user_id){return}this.targetID=a.sender_uid;this.toastEl=$(tagged.jst.toast.message.render(this.data));this.show();tagged.security.external.bindLinks(this.toastEl[0]);tagged.modules.autosize_input.autosize($(".user_message",this.toastEl));var b=this;window.setTimeout(function(){b.setupBaseHandlers();b.messageHandlers()},0)},MeetMe:function(a){if(!this.filterData(a)){return}this.targetID=a.sender_uid;this.toastEl=$(tagged.jst.toast.meetme.render(this.data));this.show();tagged.modules.autosize_input.autosize($(".user_message",this.toastEl));var b=this;window.setTimeout(function(){b.setupBaseHandlers();b.meetmeHandlers()},0)},FriendRequest:function(a){if(!this.filterData(a)){return}this.targetID=a.sender_uid;this.toastEl=$(tagged.jst.toast.friendrequest.render(this.data));this.show();tagged.modules.autosize_input.autosize($(".user_message",this.toastEl));var b=this;window.setTimeout(function(){b.setupBaseHandlers();b.friendHandlers()},0)},FriendPresenceUpdate:function(a){if(!this.filterData(a)){return}this.targetID=a.sender_uid;this.toastEl=$(tagged.jst.toast.friendpresenceupdate.render(this.data));this.show();tagged.modules.autosize_input.autosize($(".user_message",this.toastEl));var b=this;window.setTimeout(function(){b.setupBaseHandlers()},0)},ActivityUpdate:function(a){if(!this.filterData(a)){return}this.targetID=a.sender_uid;this.toastEl=$(tagged.jst.toast.activityupdate.render(this.data));this.show();tagged.modules.autosize_input.autosize($(".user_message",this.toastEl));var b=this;window.setTimeout(function(){b.setupBaseHandlers();b.friendHandlers()},0)},ProfileView:function(a){if(!this.filterData(a)){return}this.targetID=a.viewer_uid;this.toastEl=$(tagged.jst.toast.profileview.render(this.data));this.show();tagged.modules.autosize_input.autosize($(".user_message",this.toastEl));var b=this;window.setTimeout(function(){b.setupBaseHandlers()},0)},Pets:function(a){this.animateType="slideIn";if(a.act_type){if(a.act_type=="pets_boughtyou"){this._pets(a,a.buyer_uid,"petsboughtyou","/apps/pets.html?ll=toasts")}else{if(a.act_type=="pets_boughtyourpet"){this._pets(a,a.pet_uid,"petsboughtyourpet",("/apps/pets.html?ll=toasts#home/bb/"+a.pet_uid))}}}},Inactivity:function(a){this.toastEl=$(a.result.template);this.setupBaseHandlers();if(a.result.url==window.location.pathname){$(".toast_button",this.toastEl).hide()}else{$(".toast_button",this.toastEl).click($.proxy(this.handleClick,this,a.result.bucketId,a.result.url))}this.show()}};tagged.toast_manager.Toast=function(a){this.manager=a;this.onDestroyCB=a.toastDestroyed;this.toastEl=null;this.isActive=false;this.isFocused=false;this.mouseInside=false;this.isDestroying=false;this.lifetimeTimer=null;this.errorTimer=null;this.toastContainer=$("#alerts_toast_container")};tagged.toast_manager.Toast.prototype={lifeTime:10000,closeTime:3000,fadeInTime:500,fadeOutTime:1000,errorTime:5000,errorShowTime:100,slideInTime:300,animateType:"fadeIn",show:function(){this.toastContainer.prepend(this.toastEl);var a=$.proxy(function(){this.setLifetimeTimer()},this);if(this.animateType=="fadeIn"){this.toastEl.fadeIn(this.fadeInTime,a)}else{if(this.animateType=="slideIn"){this.toastEl.animate({width:"toggle"},this.slideInTime,a)}}},setupBaseHandlers:function(){$(".close",this.toastEl).click($.proxy(this.onClose,this));$(".user_photo",this.toastEl).click(function(d){d.stopPropagation()});var c=$(".default_input",this.toastEl);var b=$("textarea.user_message",this.toastEl);var a=$(".user_send_button",this.toastEl);c.click($.proxy(this.onDefaultInputClick,this));b.focus($.proxy(this.onTextFocus,this));b.blur($.proxy(this.onTextBlur,this));b.keydown($.proxy(this.onEnter,this));a.click($.proxy(this.onSend,this));this.toastEl.mouseenter($.proxy(function(){this.isActive=true;this.mouseInside=true;this.clearLifetimeTimer();this.toastEl.addClass("active_toast")},this));this.toastEl.mouseleave($.proxy(function(){if(!this.isFocused){this.isActive=false;this.setLifetimeTimer();this.toastEl.removeClass("active_toast")}this.mouseInside=false},this))},setLifetimeTimer:function(a){this.clearLifetimeTimer();var b=this;this.lifetimeTimer=window.setTimeout(function(){b.destroy()},a||this.lifeTime)},clearLifetimeTimer:function(){if(this.lifetimeTimer){window.clearTimeout(this.lifetimeTimer);this.lifetimeTimer=null}},setErrorTimer:function(){this.clearErrorTimer();var a=this;errorContainer=$(".error_text",this.toastEl);this.errorTimer=window.setTimeout(function(){errorContainer.fadeOut(a.errorShowTime,function(){$("p",errorContainer).html("")})},this.errorTime)},clearErrorTimer:function(){if(this.errorTimer){window.clearTimeout(this.errorTimer);this.errorTimer=null}},onEnter:function(a){if(a.which=="13"){a.preventDefault();this.onSend()}},onSend:function(){var b=this.checkError();if(b===false){return}var c={method:"tagged.messages.quickPost",to_id:this.targetID,text:b,ver:2,callback:{fn:this.onSendCallback,scope:this,args:{message:b}}};TAGGED.api.queue.push(c);if(this.data.message_id){var a={method:"tagged.messages.read",msg_ids:this.data.message_id,callback:{fn:TAGGED.api.nullResponseHandler}};TAGGED.api.queue.push(a)}TAGGED.api.dequeue()},checkError:function(){var a=$("textarea.user_message",this.toastEl);var b=$(".user_send_button",this.toastEl);var c=$.trim(a.val());if(!c){this.showError(this.manager.strings.error_empty);return false}errorContainer=$(".error_text",this.toastEl);errorContainer.fadeOut(this.errorShowTime,function(){$("p",errorContainer).html("")});a.attr("disabled",true).addClass("input_disabled");b.attr("disabled",true).addClass("btn_disabled");return c},onSendCallback:function(e,b){var a=$("textarea.user_message",this.toastEl);var c=$(".user_send_button",this.toastEl);if(e.stat=="ok"){var d=b.message;$(".message_pane",this.toastEl).show().html(d);a.hide();c.hide();this.isActive=false;this.setLifetimeTimer(this.closeTime)}else{if(e.stat=="cancel"){this.isActive=false;this.setLifetimeTimer(this.closeTime)}else{if(e.error){if(this.manager.strings[e.error.code]){this.showError(sprintf(this.manager.strings[e.error.code],tagged.getBrand()))}else{if(e.error.message){this.showError(e.error.message)}else{this.showError(this.manager.strings.generalFailure)}}c.attr("disabled",false).removeClass("btn_disabled");a.attr("disabled",false).removeClass("input_disabled")}}}},showError:function(a){errorContainer=$(".error_text",this.toastEl);$("p",errorContainer).html(a);errorContainer.fadeIn(this.errorShowTime,$.proxy(function(){this.setErrorTimer()},this))},setUpShowMore:function(){var a=$(".show_more",this.toastEl);a.click($.proxy(function(b){b.preventDefault();$(".short_msg",this.toastEl).hide();$(".full_msg",this.toastEl).show();a.hide()},this))},onDefaultInputClick:function(a){a.stopPropagation();$(".default_input",this.toastEl).hide();if(tagged.data.newMessagesEnabled&&tagged.data.realtime_enabled){tagged.messages_delta.util.openMessageCenter(this.targetID);this.destroy()}else{$(".user_container",this.toastEl).show();$(".short_msg",this.toastEl).hide();$(".full_msg",this.toastEl).show();$(".show_more",this.toastEl).hide();$("textarea.user_message",this.toastEl).focus()}},onTextFocus:function(){this.isFocused=true;this.clearLifetimeTimer()},onTextBlur:function(){this.isFocused=false;if(!this.mouseInside){this.setLifetimeTimer()}},onClose:function(a){a.preventDefault();a.stopPropagation();this.destroy()},destroy:function(a,b){if(this.isDestroying){return}this.isDestroying=true;this.toastEl.fadeOut(this.fadeOutTime,$.proxy(function(){this.clearLifetimeTimer();this.clearErrorTimer();$("textarea.user_message",this.toastEl).unbind();this.toastEl.remove();this.toastEl=null;this.toastContainer=null;if(typeof(a)=="function"){a.call(b,a)}else{this.onDestroyCB.call(this.manager,this)}},this))},_pets:function(c,d,a,b){if(!this.filterData(c)){return}this.targetID=d;this.toastEl=$(tagged.jst.toast[a].render(this.data));this.show();var e=this;window.setTimeout(function(){e.setupBaseHandlers();e.toastEl.click(function(){if(window.location.pathname=="/apps/pets.html"){if(a=="petsboughtyourpet"){PETS.app.buybackLightbox(d,"toasts")}e.destroy()}else{window.location.href=b}})},0)},filterData:function(a){return true}};tagged.toast_manager.Message.prototype=new tagged.toast_manager.Toast(tagged.toast_manager);tagged.toast_manager.Message.prototype.constructor=tagged.toast_manager.Message;tagged.toast_manager.Message.prototype.messageHandlers=function(){this.setUpShowMore();this.toastEl.click($.proxy(function(){if(tagged.data.newMessagesEnabled&&tagged.data.realtime_enabled){tagged.messages_delta.util.openMessageCenter(this.targetID);this.destroy()}},this))};tagged.toast_manager.Message.prototype.filterData=function(a){if(a!==null&&typeof(a)=="object"&&"subject" in a&&"message" in a&&"sender_display_name" in a&&"sender_url" in a&&"sender_thumbnail" in a&&"sender_uid" in a){this.data=a;this.data.summary_length=52;this.data.sender_display_name=tagged.util.format.ellipse(a.sender_display_name,40);this.data.user_thumbnail=tagged.data.toast.user_thumbnail;return true}else{return false}};tagged.toast_manager.MeetMe.prototype=new tagged.toast_manager.Toast(tagged.toast_manager);tagged.toast_manager.MeetMe.prototype.constructor=tagged.toast_manager.MeetMe;tagged.toast_manager.MeetMe.prototype.meetmeHandlers=function(){$(".meetme_button",this.toastEl).click($.proxy(function(){window.location.href=this.data.meetme_url;this.destroy()},this))};tagged.toast_manager.MeetMe.prototype.filterData=function(a){if(a!==null&&typeof(a)=="object"&&"age" in a&&"gender" in a&&"location" in a&&"sender_display_name" in a&&"sender_url" in a&&"sender_thumbnail" in a&&"sender_uid" in a&&"meetme_url" in a&&"isMatch" in a){this.data=a;this.data.sender_display_name=tagged.util.format.ellipse(a.sender_display_name,40);this.data.user_thumbnail=tagged.data.toast.user_thumbnail;this.data.info=sprintf("%s, %s, %s",a.age,this.manager.strings[a.gender.toLowerCase()],a.location);return true}else{return false}};tagged.toast_manager.FriendRequest.prototype=new tagged.toast_manager.Toast(tagged.toast_manager);tagged.toast_manager.FriendRequest.prototype.constructor=tagged.toast_manager.FriendRequest;tagged.toast_manager.FriendRequest.prototype.friendHandlers=function(){var a=$(".friend_button",this.toastEl);a.click($.proxy(function(){a.hide();$(".accepted",this.toastEl).show();this.isActive=false;this.setLifetimeTimer(this.closeTime);var b={method:"tagged.usermgmt.addFriend",uid_to_add:this.targetID,callback:{fn:TAGGED.api.nullResponseHandler}};TAGGED.api.call(b)},this))};tagged.toast_manager.FriendRequest.prototype.filterData=function(a){if(a!==null&&typeof(a)=="object"&&"isNewFriend" in a&&"age" in a&&"gender" in a&&"location" in a&&"sender_display_name" in a&&"sender_url" in a&&"sender_thumbnail" in a&&"sender_uid" in a){this.data=a;this.data.sender_display_name=tagged.util.format.ellipse(a.sender_display_name,40);this.data.user_thumbnail=tagged.data.toast.user_thumbnail;this.data.info=sprintf("%s, %s, %s",a.age,this.manager.strings[a.gender.toLowerCase()],a.location);return true}else{return false}};tagged.toast_manager.FriendPresenceUpdate.prototype=new tagged.toast_manager.Toast(tagged.toast_manager);tagged.toast_manager.FriendPresenceUpdate.prototype.constructor=tagged.toast_manager.FriendPresenceUpdate;tagged.toast_manager.FriendPresenceUpdate.prototype.filterData=function(a){if(a!==null&&typeof(a)=="object"&&"presence_status" in a&&a.presence_status=="online"&&"sender_display_name" in a&&"sender_url" in a&&"sender_thumbnail" in a&&"sender_uid" in a){this.data=a;this.data.sender_display_name=tagged.util.format.ellipse(a.sender_display_name,40);this.data.user_thumbnail=tagged.data.toast.user_thumbnail;this.data.presence_icon="/im/im/icon_presence_green_small.gif";return true}else{return false}};tagged.toast_manager.ActivityUpdate.prototype=new tagged.toast_manager.Toast(tagged.toast_manager);tagged.toast_manager.ActivityUpdate.prototype.constructor=tagged.toast_manager.ActivityUpdate;tagged.toast_manager.ActivityUpdate.prototype.filterData=function(a){if(a!==null&&typeof(a)=="object"&&"activity" in a&&"action_text" in a&&"action_url" in a&&"sender_display_name" in a&&"sender_url" in a&&"sender_thumbnail" in a&&"sender_uid" in a){this.data=a;this.data.sender_display_name=tagged.util.format.ellipse(a.sender_display_name,40);this.data.user_thumbnail=tagged.data.toast.user_thumbnail;this.data.presence_icon="/im/im/icon_presence_green_small.gif";return true}else{return false}};tagged.toast_manager.ProfileView.prototype=new tagged.toast_manager.Toast(tagged.toast_manager);tagged.toast_manager.ProfileView.prototype.constructor=tagged.toast_manager.ProfileView;tagged.toast_manager.ProfileView.prototype.filterData=function(d){if(d!==null&&typeof(d)=="object"&&"viewer_display_name" in d&&"viewer_url" in d&&"viewer_thumbnail" in d){this.data=d;this.data.viewer_display_name=tagged.util.format.ellipse(d.viewer_display_name,40);this.data.user_thumbnail=tagged.data.toast.user_thumbnail;var a=[d.age,d.gender,d.relationship,d.location],c=[];for(var b=0;b<a.length;++b){if(typeof a[b]==="string"&&a[b].length){c.push(a[b])}}this.data.summary=c.join(", ");return true}else{return false}};tagged.toast_manager.Pets.prototype=new tagged.toast_manager.Toast(tagged.toast_manager);tagged.toast_manager.Pets.prototype.constructor=tagged.toast_manager.Pets;tagged.toast_manager.Pets.prototype.filterData=function(a){if(a!==null&&typeof(a)=="object"&&"earned_amount" in a){this.data=a;this.data.earned_amount=(new Big(a.earned_amount)).toPetsShortHandFromMap();if(typeof a.user_value!="undefined"){this.data.user_value=(new Big(a.user_value)).toPetsShortHandFromMap()}function b(c,d){return tagged.util.format.ellipse(tagged.messages_delta.util.escapeHTML(c),d)}if(typeof a.buyer_display_name!="undefined"){this.data.buyer_display_name=('<span style="font-weight:bold;">'+b(this.data.buyer_display_name,10)+"</span>")}if(typeof a.pet_display_name!="undefined"){this.data.pet_display_name=('<span style="font-weight:bold;">'+b(this.data.pet_display_name,10)+"</span>")}return true}else{return false}};tagged.toast_manager.Inactivity.prototype=new tagged.toast_manager.Toast(tagged.toast_manager);tagged.toast_manager.Inactivity.prototype.constructor=tagged.toast_manager.Inactivity;tagged.toast_manager.Inactivity.prototype.handleClick=function(b,a){TAGGED.api.call({method:"tagged.toasts.logInactivityToast",bucket:b,ltype:"click",callback:{fn:function(){window.location.pathname=a}}})};$(function(){tagged.toast_manager.init()});$(window).load($.proxy(tagged.toast_manager.inactivityModule.maybeBegin,tagged.toast_manager.inactivityModule,tagged.toast_manager.inactivityModule.pageLoadDelay));tagged.loadStringsDirect({"tagged.security.external.strings":{cancel:"Cancel",proceed:"Continue",warning:"Warning!",leavingwarning:"Warning - You are about to leave %s.com",leavingmsg:"Are you sure you want to navigate away from this page?",malwarewarning:"Warning - Visiting this web site may harm your computer.",malwaremsg:'This page appears to contain malicious code that could be downloaded to your computer without your consent. You can learn more about harmful web content including viruses and other malicious code and how to protect your computer at <a target="_blank" href="http://%1$s">%1$s.</a>',phishingwarning:"Warning - Suspected phishing page!",phishingmsg:'This page may be a forgery or imitation of another website, designed to trick users into sharing personal or financial information. Entering any personal information on this page may result in identity theft or other abuse. You can find out more about phishing from <a target="_blank" href="http://%1$s">%1$s.</a>',phishinglink:"www.antiphishing.org",advisory:"Advisory provided by Google",continueTo:'Continue to <a target="_blank" href="%1$s">%1$s</a>'}});tagged.loadStringsDirect({"tagged.messages_delta.util.strings":{reportFeedback:"Your report has been filed with %s and the message deleted. Do you also want to prevent future contact with %s? Block %s",blockUserFeedback:"%s is blocked from contacting you.",unBlockUserFeedback:"%s is no longer blocked from contacting you.",enterNameOrEmail:"Please enter a last name OR email address."}});tagged.loadStringsDirect({"tagged.apps.pets3.strings":{confirm_optout:"This will remove you from the Pets game. Are you sure?",on:"On",off:"Off",error:"An error occured. Please refresh the page and try again",hide:"Hide",show:"Show",change:"change",lessThan:"Less than %s",close:"Close",ok:"OK",buyback:"Buy back your pet!",buybackpet:"Buy back %s!",buypetnow:"Buy %s now!"},"tagged.apps.pets3.strings.achievements":{pets_lover:"Pets Lover",frequent_shopper:"Frequent Shopper",perfect_attendance:"Perfect Attendance",successful_tycoon:"Successful Tycoon",hot_stuff:"Hot Stuff",big_spender:"Big Spender",mastered:"Congratulations! You have mastered all of the %s achievements!"},"tagged.apps.pets3.strings.achievements.descriptions":{pets_lover:"owner of %d pets",frequent_shopper:"completed %d pets purchases",perfect_attendance:"visited Pets %d days in a row",successful_tycoon:"%s in assets",hot_stuff:"%s in value",big_spender:"bought a pet for %s cash"},"tagged.apps.pets3.strings.achievements.teasers":{pets_lover:"own %d more pets to get the next achievement!",frequent_shopper:"make %d more pets purchases to get the next achievement!",perfect_attendance:"visit Pets %d more days in a row to get the next achievement!",successful_tycoon:"%s more assets to get the next achievement!",hot_stuff:"%s more value to get the next achievement!",big_spender:"buy a pet for at least %s cash to get the next achievement!"},"tagged.apps.pets3.strings.advFilters":{options:{more:"More Options &#9660",less:"Less Options &#9650"},sexOri:"Sexual Orientation",relStatus:"Relationship Status",ethnicity:"Ethnicity",filters:{sexOri:{"0":"Straight","1":"Gay","2":"Bi","3":"No Answer"},relStatus:{"0":"Single","1":"Dating","2":"In a Relationship","3":"Engaged","4":"Married","5":"It's Complicated","6":"Open Relationship"},ethnicity:{"0":"African American","1":"Asian","2":"Caucasian (white)","3":"East Indian","4":"Hispanic/Latino","5":"Middle Eastern","6":"Native American","7":"Pacific Islander","8":"Other"}}},"tagged.apps.pets3.strings.button":{findPets:"Find Pets",upload:"Upload"},"tagged.apps.pets3.strings.buy":{buy_now:"Buy now!",buying:"Buying...",not_enough:"Not Enough Cash",price_change:"Pet Price has changed",price_change_2:"Price has changed!",limit:"Your pet list is full",already_owner:"You already own this pet.",commNotAllowed:"You need to be friends with this pet before buying them.",gold_hold:"Your Gold balance is suspended. Pets purchases are disabled until this hold is removed.",error:"Please try again.",other_players:"Other players are buying this popular Pet right now.",try_again:"Please try again!",get_new_price:"Get New Price",price_updated:"Price has been updated."},"tagged.apps.pets3.strings.convert":{cash:"Cash",cash_title:"Want Pets Cash?",cash_title_new:"Need Pets Cash?",cash_success:"You got cash!",cash_success_neo:"You've got cash!"},"tagged.apps.pets3.strings.headings":{uploadPhoto:"Upload Photo",expertTips:"Expert Tips",congratulations:"Congratulations!",cashRun:"Cash Run"},"tagged.apps.pets3.strings.info":{none:"none",nxtlvl:"to next level!"},"tagged.apps.pets3.strings.jumpTo":{page:"Page %d of %d",nonRanked:"Sorry you need to be in the top %d players to show up in these rankings. Try a different filter or climb higher in the rankings!"},"tagged.apps.pets3.strings.messages":{no_pets:"No pets available",no_achievements:"No achievements have been earned.",no_events:"No events to view.",load_error:"Failed to load.",load_error_reload:'Failed to load. <a href="#reload">Try again?</a>',load_app_error:"Pets failed to load, try refreshing.",no_pets_search:"No pets available, try changing filters and search again.",my_pets_not_ready:"My Pets is not ready",newsfeed_disabled:"What's New is disabled",search_filter_max:"The current minimum value of pets is: %s"},"tagged.apps.pets3.strings.nue":{welcome:"Welcome to Pets",start:"Start",playwith:"Play Pets with %s!"},"tagged.apps.pets3.strings.notenoughcash":{dayleft:"only %d days left",timeleft:"only %s left",rate:"Special Offer: %s Bonus Gold"},"tagged.apps.pets3.strings.pager":{desc1:"of",desc2:"Pets",wish:"on your Wish List",ranking1:"of Top",ranking2:"Players",updates:"Updates",wishers:"Wishers",previous:"previous",prev:"prev",next:"next",newer:"Newer",older:"Older"},"tagged.apps.pets3.strings.petrun":{header:"Pet Run!!",client_diff_value:"Client pet value different than server value.",player_won:"%s won...",the_winner_is:"And the winner is..."},"tagged.apps.pets3.strings.set_free":{confirm0:"Are you sure you want to set %s free and lose the money you invested?",confirm1:"Are you really sure?",success:"Pet was set free!",error:"Please try again.",setMyselfFree:"You set yourself free!"},"tagged.apps.pets3.strings.wish":{success:"Added",error:"Failed to complete action",limit:"Your wishlist is already full",commNotAllowed:"You need to be friends with this pet before adding them to your wish list.",Removed:"Removed",RemoveError:"Failed to remove from wishlist",confirm_remove:"Are you sure you want to delete this Pet from your Wish List?"}});tagged.loadStringsDirect({"tagged.toast_manager.strings":{m:"Male",f:"Female",generalFailure:"An Error occured and your message could not be sent.  Please try again.",error_empty:"Sorry, your message cannot be empty.","15":"Sorry, you are attempting to post banned content.","16":"Sorry, that contains invalid HTML.","26":"Sorry, you are attempting to post content which includes Flash widgets not supported on %s.","27":"Sorry, you are attempting to post a YouTube video which includes restricted content.","103":"You have exceeded your send limit.","110":"You are not allowed to send messages to this user.","114":"Sorry, your message was too long.","401":"Sorry, that contains invalid HTML.","600":"Over rate limit"}});tagged.namespace("presence");tagged.presence={idleTimer:null,idleTimeout:300000,isIdle:false,subscribePresence:function(g,f,e){e=(typeof(myVar)!=="undefined"&&e.group.trim().length>0)?"presence_"+e:"presence";var c=[];for(var d=0;d<g.length;d++){var a=g[d];var b="presence_"+a;c.push({topic:b,prevMsgs:1,cbObj:f,group:e})}tagged.realtime.subscribe(c)},unsubscribePresence:function(a){a=(typeof(myVar)!=="undefined"&&a.group.trim().length>0)?"presence_"+a:"presence";tagged.realtime.unsubscribeGroup(a)}};tagged.namespace("externals");tagged.externals={init:function(){if(tagged.data.quantserve_resources){this.loadQuantServe(tagged.data.quantserve_resources)}if(tagged.data.recaptcha_resources){this.loadRecaptcha(tagged.data.recaptcha_resources)}},loadQuantServe:function(b){for(var a=0;a<b.length;a++){var c=b[a];$.getScript(c,function(){_qacct="p-96ZHBHvG56-qg";quantserve()})}},loadRecaptcha:function(b){for(var a=0;a<b.length;a++){var c=b[a];$.getScript(c)}}};$(function(){tagged.externals.init()});