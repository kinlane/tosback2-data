$(function(){$(document).ready(function(){if(window.location.hash){hashJump();}
window.onhashchange=hashJump;});var device_platform=platformDetect();platformDownload(device_platform);function hashJump(){var hash=window.location.hash;var target;if(hash.indexOf('!')!=-1){target=$(hash.replace('!','')+' a');}
else{target=$('[href='+hash+'], .'+hash.replace('#',''));}
target.trigger('click');}
function resizeCarouselSlides(){$('.carouselBackground, .slideForeImage').css('width','100%');}
function platformDetect(){var platformMapping={'Win32':'Windows','Win64':'Windows','Linux i686':'Linux','Linux x86_64':'Linux','MacIntel':'Mac','iPhone':'iOS','iPad':'iOS','iPod':'iOS','Android':'Android'}
return platformMapping[navigator.platform];}
function platformDownload(platform){var otherVersions=removeByValue(['Mac','Windows','Linux'],platform);if(platform=='Windows'||platform=='Mac'){var platformMessage=platform;var platformLower=platform.toLowerCase();var downloadLink='/download/'+platformLower;var overlayDownloadLink=downloadLink;}else if(platform=='Linux'){var platformMessage=platform;var platformLower=platform.toLowerCase();var downloadLink='/download-'+platformLower+'/';var overlayDownloadLink=downloadLink;}else{var platformMessage=platform+' coming soon';var downloadLink='#';var overlayDownloadLink='/download/';}
$('#downloadButton').attr('href',downloadLink);$('#downloadButton').html('<div class="downloadText">Download</div> for '+platformMessage);$('.overlayDownload').attr('href',overlayDownloadLink);var otherVersionHTML='Other versions: ';$.each(otherVersions,function(index,value){if(value=='Linux'){otherLink='/download-'+value.toLowerCase()+'/';}else{otherLink='/download/'+value.toLowerCase();}
otherVersionHTML+='<a class="download otherDownload" href="'+otherLink+'">'+value+'</a>';if(index!=otherVersions.length-1){otherVersionHTML+=', ';}});$('#downloadOtherVersions').html(otherVersionHTML);}
function removeByValue(array,val){return $.grep(array,function(iter){return iter!=val;});}
$('#slideCafeBackground').ready(function(){var $ss=$('#bitcasaCarousel');$.each(['Bart','Desk','Baseball','Car','Meet'],function(index,value){$ss.append('<div id="slide'+value+'Background" class="carouselBackground"></div><div class="slideForeImage"><div id="slide'+value+'Overlay" class="slideOverlayGraphic"></div></div>');});if(device_platform=='Windows'){$('#slideCafeOverlay').css('background-image','url("/images/carousel_overlays/slide_cafe_device_windows.png")');$('#slideDeskOverlay').css('background-image','url("/images/carousel_overlays/slide_sync_device_mac.png")');}
$('#bitcasaCarousel').cycle({prev:'.carouselPrev',next:'.carouselNext',cssBefore:{position:'absolute',top:'30px',left:'30px',opacity:0,display:"block"},cssAfter:{"z-index":8},animOut:{opacity:0,top:'30px',left:'30px'},animIn:{opacity:1,top:'0',left:'0'},speedIn:700,speedOut:300,slideExpr:'.slideForeImage',fx:'custom',timeout:0});$('#bitcasaCarousel').cycle({prev:'.carouselPrev',next:'.carouselNext',timeout:0,slideExpr:'.carouselBackground',speed:1000,cssBefore:{opacity:0,display:"block"},animOut:{opacity:0},animIn:{opacity:1},fx:'custom',after:resizeCarouselSlides});$('#overlayContent').cycle({prev:'.carouselPrev',next:'.carouselNext',cssBefore:{position:'absolute',left:'-30px',opacity:0,display:"block"},animOut:{opacity:0,left:'-30px'},animIn:{opacity:1,left:'0'},height:'600',width:'960',fit:1,fx:'custom',speed:700,slideExpr:'.slideOverlay',timeout:0});});$(window).resize(function(){resizeCarouselSlides();});$('#devSignupSubmit').click(function(){$('#devSignupForm').submit();return false;});$('#contactSend').click(function(){$('#contactForm').submit();return false;});$('.jumpLink, .supportCategory').click(function(){var a_name='a[name="'+$(this).attr('href').substr(1)+'"]';hideSupportStuff();$('.backToFAQS').show();$(a_name).parent().show();return false;});$('.backToFAQS').click(function(){hideSupportStuff();$('#supportFaqsList').show();$('#supportSearchBar').val('').focus();return false;});$('.legalTabHolder div').click(function(){if(!$(this).hasClass('tabSelected')){var selector='#'+$(this).attr('class');$('#tabHolder div').removeClass('tabSelected');$(this).addClass('tabSelected');$('.legalSection').hide();$(selector).show();}});$('.videoTabHolder div').click(function(){if(!$(this).hasClass('tabSelected')){var selector='.'+$(this).attr('selection');$('#tabHolder div').removeClass('tabSelected');$(this).addClass('tabSelected');$('#videoBody .videoOuter').hide();$(selector).show();}});function hideSupportStuff(){$('.expandedQ, .backToFAQS, #supportCategoriesExpanded li.hide, #supportFaqsList').hide();$('li').removeHighlight();}
function triggerSearch(){searchBox=$('#supportSearchBar');if(!searchBox.val()){return false;}
hideSupportStuff();$('.backToFAQS').show();var specials=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");var stopWords=new RegExp("\\b(and|or|a|is|the)\\b","ig");searchWords=searchBox.val().replace(stopWords,'').replace(/[ ]{2,}/,' ');searchString='('+searchWords.replace(specials,"\\$&").split(' ').join('|')+')';matches=$('#supportCategoriesExpanded li').filter(function(){return $(this).text().match(RegExp(searchString,'ig'));})
$.each(searchWords.split(' '),function(index,value){$('#supportLeftColumn').highlight(value);});matches.show();}
$('#supportSearchSubmit').click(function(){triggerSearch();});$('#supportSearchBar').keyup(function(e){if(e.keyCode==13){triggerSearch();}});});