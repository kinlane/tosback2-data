
var saveAndAddAnother=false;var errorMessage='';var exportContactsError='';var grpSelectionError='';var continueErrMsg='';var addressBookTypes='';var callBackObjectParams;var iLoop=0;var birthCalendar="";var annivCalendar="";var viewName="AddressBook";var noOfRecordsPerPage="";var contactJson="";var groups='';var contacts='';var IsAddOrEditContact='';var IsSelectAllContacts='';var DeselectedContactID='';var SelectedContactID='';var ContactsCount='';var anniversaryAvailabilityList='';var initialSelectionFilter='';var cancelRedirectURL='';var isHouseholdSelected=false;var contacts="";var households="";var totalCount=0;var maritalstatus="";var connectionMessage="";$(document).ready(function(){$.fn.extend({optionDisable:function(){var ths=$(this);if(ths.attr('tagName').toLowerCase()=='option'){ths.before($('<optgroup>&nbsp;</optgroup>').css({color:'#ccc',height:ths.height()}).attr({id:ths.attr('value'),label:ths.text()}).addClass(ths.attr('class'))).remove();}
return ths;},optionEnable:function(){var ths=$(this);var tag=ths.attr('tagName').toLowerCase();if(tag=='option'){ths.removeAttr('disabled');}
else if(tag=='optgroup'){ths.before($('<option />').attr({value:ths.attr('id')}).text(ths.attr('label')).addClass(ths.attr('class'))).remove();}
return ths;}});loadOverlay('.cleanUp',loadCleanUp);loadOverlay('.chooseService',loadChooseService);});function InitAddEditContact(){$(".closeDropForm").click(function(e){$('#dropFormMenu').css('display','none');e.preventDefault();});if(action!='EditContact'){$("#notesDiv").addClass('hide');$('#showOnCalendar1Div').removeClass('hide');$('#showOnCalendar2Div').removeClass('hide');}
anniversaryAvailabilityList=anniversaryAvailabilityList.split(',');hallmarkBehaviors.hmkCustomFormFields();hmkZipFieldBehavior();hallmarkBehaviors.hmkTooltip();extendedBehaviors.hmkFormFocus();extendedBehaviors.hmkEnterKeyFormSubmit();extendedBehaviors.PhoneTabOut();if(null!=contactJson&&''!=contactJson){birthcalendar=showCalendarDropDowns("divBirthDate","Birth",null,'BirthDayCombo','BirthMonthCombo','BirthYearCombo',false,false,true,contactJson.BirthDay,contactJson.BirthMonth,contactJson.BirthYear,true);}
else{birthcalendar=showCalendarDropDowns("divBirthDate","Birth",null,'BirthDayCombo','BirthMonthCombo','BirthYearCombo',false,false,true,'','','',true);}
$('#BirthDayCombo').change();$('#BirthMonthCombo').change();$('#BirthYearCombo').change();annivcalendar=showCalendarDropDowns("divAnniversaryDate","Anniv",null,'AnniversaryDayCombo','AnniversaryMonthCombo','AnniversaryYearCombo',false,false,true,contactJson.AnnivDay,contactJson.AnnivMonth,contactJson.AnnivYear,true);$('#AnniversaryDayCombo').change();$('#AnniversaryMonthCombo').change();$('#AnniversaryYearCombo').change();if(null!=contactJson.MaritalStatus&&''!=contactJson.MaritalStatus){if(null!=contactJson.MaritalStatus.MaritalStatusDesc&&''!=contactJson.MaritalStatus.MaritalStatusDesc){$('.maritalStatus').val(contactJson.MaritalStatus.MaritalStatusID).change();}}
if(action=='EditContact'){$('#Gender').val(contactJson.Gender).change();$('#Relationship').val(contactJson.Relationship).change();$('#State').val(contactJson.State).change();$(".JQAddNew").hide();}
if($('#SelectionCriteria').val().toUpperCase()=='NAA'){$(".AddressSpan").show();$(".JQAddressRequired").addClass('JQRequiredField');}
else if($('#SelectionCriteria').val().toUpperCase()=='NAE'){$(".EmailSpan").show();$(".JQEmailRequired").addClass('JQRequiredField');}
else if($('#SelectionCriteria').val().toUpperCase()=='NOE'){$(".GenderSpan").show();$(".RelationSpan").show();}
if($('#RelatedPersonID').val()==""||$('#RelatedPersonID').val()=="0"){$(".JQSaveAndAdd").show();$(".AddContactHeader").show();$("#EditContactHeader").hide();}
else{$("#EditContactHeader").show();$(".AddContactHeader").hide();}
if($.inArray(maritalstatus,anniversaryAvailabilityList)==-1){DisableAnniversaryDropDown();}
GetTextBoxPhone();GetTextBoxMobile();extendedBehaviors.PhoneTabOut();}
function InitGlance(){$('#ConnectionMessage').html('<div><h3 class="fltLeft p-0"><strong>'+connectionMessage+'</strong></h3></div>');}
function CheckSelectAllGroups(selectAllObj){$('.'+selectAllObj.value).attr("checked",selectAllObj.checked);$('.'+selectAllObj.value).change();document.getElementById("DeselectedGroupID").value="";document.getElementById("SelectedGroupIDs").value="";}
function RedirectToEnvelope(ReferrerSessionID){$(".JQPreventDblClick").live('click',function(){hallmarkBehaviors.hmkDisableButton('.JQDisableAction');});document.forms["frmSelectRecipients"].action="/ConnectionsAddressBook/CancelSelection/"+ReferrerSessionID;document.forms["frmSelectRecipients"].method="GET";document.forms["frmSelectRecipients"].submit();}
function SetModified(obj){$(obj).closest('tr').find('.isModified').val('true');}
function CloseEditGroups(){var previousViewName=viewName;viewName="AddressBook";initializeErrorHandling();if(previousViewName=="AddEditGroups"){$('#Contacts\\.SortBy').val('');PostIndividualsForm($("#Contacts\\.CurrentPageNumber").val());}}
var SaveContactOptions={type:"POST",contentType:"application/x-www-form-urlencoded",url:"/ConnectionsAddressBook/SaveContact",dataType:"json",success:SaveContactSuccessCallBack,error:''};function SaveContact(formId){var deselectedGroupIDs="";var selectedGroupIDs="";hallmarkBehaviors.hmkDisableButton('.JQDisableAction');if($("#AddressBookType").val().toUpperCase()!=addressBookTypes[0].toUpperCase()){$('#'+formId).find('#ValidationType').val($('#SelectionCriteria').val().toUpperCase());}
$("#GroupMembership").find("input:checkbox").each(function(){if($(this).attr('checked')){selectedGroupIDs+=','+$(this).val();}});for(var i=0;i<contactJson.Groups.length;i++){deselectedGroupIDs+=','+contactJson.Groups[i].GroupID;}
$("#"+formId).find("#SelectedGroupIDs").val(selectedGroupIDs);$("#"+formId).find("#DeSelectedGroupIDs").val(deselectedGroupIDs);clearAllErrorMessages();$('#'+formId).ajaxSubmit(SaveContactOptions);return false;}
function SaveContactSuccessCallBack(data){if(null!=data.validationErrors&&data.validationErrors.length>0){displayErrorMessagesOnReLoad(data.validationErrors,errorPage)
hallmarkBehaviors.hmkEnableButton('.JQDisableAction');scrollToElement("msgDiv\\.AddContacts");s.prop14=data.validationErrors[0].Message;evalOmniture();s.prop14='';}
else{if($("#AddressBookType").val().toUpperCase()==addressBookTypes[0].toUpperCase()){if(IsSavedFromPopUp=="true")
window.location.reload();else
window.location.href="/ConnectionsAddressBook/GetFlatContactDetails/"+data.RelatedPersonID+"/0/0";}
else{document.getElementById("AddEditContact").style.display="none";$("#ShowAddEditContact").find('.close').trigger('click');errorPage='SelectRecipients';var listItemDivID='#abselected-'+data.RelatedPersonID;if(!$(listItemDivID).hasClass('contactSelected')){AddSelectedContact(data);}
else{var divID;selectRecipientsString='';if($('#AddressBookType').val()=='SAB'){divID='ccselected-Contacts-'+data.RelatedPersonID;}
else if($('#AddressBookType').val()=='POD'){divID='ccselected-Contacts-'+data.AddressID;}
else if($('#AddressBookType').val()=='MAB'){divID='ccselected-Contacts-'+data.EmailID;}
if(null!=$("#SelectedRecipientsList #"+divID)){$("#SelectedRecipientsList #"+divID).remove();AddContact(data);if($('#SelectedRecipientsList').children('.cccselected').length<show_per_page){targetDiv.append(selectRecipientsString);$("#SelectedRecipientsList").find('.cccselected').removeClass('hidden');if($('#AddressBookType').val()=='POD'){$("#SelectedRecipientsList").find('.JQAddressDetails').removeClass('hidden');}
else if($('#AddressBookType').val()=='MAB'){$("#SelectedRecipientsList").find('.JQEmailDetails').removeClass('hidden');}}
UpdateSelectedRecipientPageDetailsOnAddition();hallmarkBehaviors.hmkTooltip();}}
if(data.FirstName.substr(0,1).toUpperCase()==$("#AlphabetsDropDownHeader").val()||$("#AlphabetsDropDownHeader").val()=="All"||typeof $('#AlphabetsDropDownHeader').val()=='undefined'){PostIndividualsForm(document.getElementById("Contacts.CurrentPageNumber").value);}
if($("#SelectRecipientsView").val()=='Groups'){PostGroupsForm(document.getElementById("Contacts.CurrentPageNumber").value)}}}
hallmarkBehaviors.hmkEnableButton('.JQDisableAction');}
function GetFlatContactDetails(relatedPeronID){$("#frmEditContact").attr("action","/ConnectionsAddressBook/GetFlatContactDetails/"+relatedPeronID+"/0/0");$("#frmEditContact").attr("method","GET");$("#frmEditContact").submit();}
function DisplayDeleteContactOverlay(){if(document.getElementById("SelectedContactID").value==""){msgDiv=$(getJQSelectorForID('msgDiv.'+errorPage));addErrorToCommonErrorDiv(msgDiv,'CommonError.DisplayDelete',errorMessage);}
else{clearAllErrorMessages();$("#DeleteContact").overlay({api:true,speed:200,expose:{maskId:'overlyMask',loadSpeed:800,opacity:0.9},onBeforeLoad:function(){var wrap=this.getContent().find("div.wrap");if(wrap.is(":empty")){wrap.load(this.getTrigger().attr("href"));}},onClose:function(){$("#DeleteContact.wrap").empty();},closeOnClick:false}).load();$(".close").click(function(){$("#DeleteContact").overlay().close();});PostOmnitureData('My Accounts - Address Book- Delete Contact');}}
function DisplayDelGrpContactsOverlay(){if($("#SelectedContactID").value==""){msgDiv=$(getJQSelectorForID('msgDiv.'+errorPage));addErrorToCommonErrorDiv(msgDiv,'CommonError.DeleteGroupcontacts',errorMessage);}
else
$('#TriggerDelGrpContacts').trigger('click');}
function InitIndividualHousehold(){if(($('#AddressBookType').val()==addressBookTypes[1])||($('#AddressBookType').val()==addressBookTypes[2])){$('#radioDiv').addClass('hide');$('#householdContactForm').html('');}
else{$('#individualFormRadio').click(function(){$('#individualContactForm').css('display','block');$('#householdContactForm').css('display','none');});$('#householdFormRadio').click(function(){$('#individualContactForm').css('display','none');$('#householdContactForm').css('display','block');});}}
function PostSelectedImportContacts(){document.getElementById("RedirectImportURL").value=pathUrl;ImportURL="/ConnectionsAddressBook/LoadImportOptions";$("#frmGetContacts").attr("action","/ConnectionsAddressBook/PostSelectedImportContacts");$("#frmGetContacts").submit();}
function DisplayExportContactsOverlay(){clearAllErrorMessages();$("#ShowExportContacts").overlay({api:true,speed:200,expose:{maskId:'overlyMask',loadSpeed:800,opacity:0.9},onBeforeLoad:function(){var wrap=this.getContent().find("div.wrap");if(wrap.is(":empty")){wrap.load(this.getTrigger().attr("href"));}},onClose:function(){$("#ShowExportContacts.wrap").empty();},closeOnClick:false}).load();$(".close").click(function(){$("#ShowExportContacts").overlay().close();});}
function GetTotalContactCount(){var params="SelectionCriteria="+$("#SelectionCriteria").val();var count=0;$.ajax({type:"POST",contentType:"application/x-www-form-urlencoded",url:"/ConnectionsAddressBook/GetContactCount",data:params,dataType:"json",async:false,error:function(e){},success:function(data){if(data!=""){totalContactCount=data.split('|')[0];}}});}
function DisplayAdditionalInfo(connectionsContactPE){$('#AdditionalInfo label').html('');var DayPhoneNumber='';var MobilePhoneNumber='';if(connectionsContactPE.DayPhoneCountryCode!=null){if((connectionsContactPE.DayPhoneCountryCode=='USA'||connectionsContactPE.DayPhoneCountryCode=='')&&(connectionsContactPE.DayPhone1!=''&&connectionsContactPE.DayPhone2!=''&&connectionsContactPE.DayPhone3!='')){DayPhoneNumber=connectionsContactPE.DayPhone1+'-'+connectionsContactPE.DayPhone2+'-'+connectionsContactPE.DayPhone3+"(USA)";}
else if(connectionsContactPE.DayPhone!=''&&connectionsContactPE.DayPhone.length>=10){DayPhoneNumber=connectionsContactPE.DayPhone+'('+connectionsContactPE.DayPhoneCountryCode+')';}}
if(connectionsContactPE.MobilePhoneCountryCode!=null){if((connectionsContactPE.MobilePhoneCountryCode=='USA')&&(connectionsContactPE.MobilePhone1!=''&&connectionsContactPE.MobilePhone2!=''&&connectionsContactPE.MobilePhone3!='')){MobilePhoneNumber=connectionsContactPE.MobilePhone1+'-'+connectionsContactPE.MobilePhone2+'-'+connectionsContactPE.MobilePhone3+"(USA)";}
else if(connectionsContactPE.MobilePhone!=''&&connectionsContactPE.MobilePhone.length>=10){MobilePhoneNumber=connectionsContactPE.MobilePhone+'('+connectionsContactPE.MobilePhoneCountryCode+')';}}
if(connectionsContactPE.BirthDay!=null&&connectionsContactPE.BirthDay!=""&&connectionsContactPE.BirthMonth!=null&&connectionsContactPE.BirthMonth!=""){var format=(connectionsContactPE.BirthYear==null||connectionsContactPE.BirthYear=='')?'M dd':'M dd yy';$('#AdditionalInfo label#BirthDaylbl').html($.datepicker.formatDate(format,new Date(connectionsContactPE.BirthYear,connectionsContactPE.BirthMonth-1,connectionsContactPE.BirthDay)));}
$("#AdditionalInfo label#MaritalStatuslbl").html(connectionsContactPE.MaritalStatus.MaritalStatusDesc);if(connectionsContactPE.AnnivDay!=null&&connectionsContactPE.AnnivDay!=""&&connectionsContactPE.AnnivMonth!=null&&connectionsContactPE.AnnivMonth!=""){var format=(connectionsContactPE.AnnivYear==null||connectionsContactPE.AnnivYear=='')?'M dd':'M dd yy';$('#AdditionalInfo label#Anniversarylbl').html($.datepicker.formatDate(format,new Date(connectionsContactPE.AnnivYear,connectionsContactPE.AnnivMonth-1,connectionsContactPE.AnnivDay)));}
$("#AdditionalInfo label#DayPhonelbl").html(DayPhoneNumber);$("#AdditionalInfo label#MobilePhonelbl").html(MobilePhoneNumber);$("#AdditionalInfo label#UpdatedDatelbl").html(connectionsContactPE.LastUpdatedDate);}
function InitLoadImportOptions(){adSpot.GetAdHTML($('#needHelp'),'NeedHelp','NeedHelp','Checkout');if($("#RedirectURL").val()!=""&&$("#RedirectURL").val().indexOf("GAB")==-1)
$("#pageLeftCol").hide();}
function MaritalStatus(id){if(null==id.options[id.selectedIndex].text||''==id.options[id.selectedIndex].text||id.options[id.selectedIndex].text.toLowerCase()!='married'){$("#AnniversaryMonthCombo").attr("disabled",true);$("#AnniversaryDayCombo").attr("disabled",true);$("#AnniversaryYearCombo").attr("disabled",true);}}
function ChangeMaritalStatus(id){$("#MaritalStatus.MaritalStatusID").val(id.value).change();if($.inArray(id.options[id.selectedIndex].text,anniversaryAvailabilityList)==-1){$("#AnniversaryMonthCombo").val('').change();$("#AnniversaryDayCombo").val('').change();$("#AnniversaryYearCombo").val('').change();$('#divAnniversaryDate').find('input[type=hidden]').val('');DisableAnniversaryDropDown();}
else
EnableAnniversaryDropDown();}
function ImportContacts(){window.location.href="/ConnectionsAddressBook/LoadImportOptions?redirectURL="+pathUrl;}
function DisableAnniversaryDropDown(){$("#AnniversaryMonthCombo").attr("disabled",true);$("#AnniversaryDayCombo").attr("disabled",true);$("#AnniversaryYearCombo").attr("disabled",true);}
function EnableAnniversaryDropDown(){$("#AnniversaryMonthCombo").attr("disabled",false);$("#AnniversaryDayCombo").attr("disabled",false);$("#AnniversaryYearCombo").attr("disabled",false);}
function GetStatesByCountry(id){$.ajax({type:"POST",contentType:"application/x-www-form-urlencoded",url:"/AddressInformation/GetStatesByCountry",data:{countryCode:id.value},dataType:"json",success:function(data){var options='';options+='<option value="0">Select</option>';for(var i=0;i<data.length;i++){options+='<option value="'+data[i].Code+'">'+data[i].Name+'</option>';}
$("#State").html(options);$('#State option:first').attr('selected','selected');$("#State").change();$('#HouseholdState').html(options);$('#HouseholdState option:first').attr('selected','selected');$("#HouseholdState").change();}});}
function getSelectedEmailProvider(selectedProvider){document.getElementById("SelectedProvider").value=selectedProvider;if(selectedProvider=='Yahoo'){$('#YahooDiv').show();$('#OtherDiv').hide();}
else if(selectedProvider=='Other'){$('#YahooDiv').hide();$('#OtherDiv').show();}}
function DisplayHelpMessageOverlay(){var selectedEmailProvider=document.getElementById("SelectedProvider").value;var helpContent=document.getElementById("helpMessage");helpContent.appendChild(document.createTextNode(""));if(selectedEmailProvider=="Apple")
{helpContent.innerHTML="<li>Open Address Book. </li><li>Under File, select <strong>Export vCard. </strong></li><li>Choose whether to export all contacts or only one group. </li><li>Select a location to save your file, and then click <strong>Save.</strong> </li>";}
else if(selectedEmailProvider=="Entourage")
{helpContent.innerHTML="<li>Open Entourage. </li><li>Under File, select <strong>Exports.</strong></li><li>Select <strong>Contacts. </strong></li><li>Choose <strong>Contacts to a list (tab-delimited text).</strong> </li><li>Select a location to save your file, and then click <strong>OK.</strong></li>";}
else if(selectedEmailProvider=="Excel")
{helpContent.innerHTML="Save your Excel file";}
else if(selectedEmailProvider=="Outlook")
{helpContent.innerHTML="<li>Open Microsoft Outlook. </li><li>On the File menu, click Import and Export. </li><li>Click Export to a file, and then click Next. </li><li>Choose Comma Separated Values (DOS), and then click Next. </li><li>Select folder to export contacts from: Contacts folder. </li><li>Name and file, and then click Next. </li> <li>Click Finish.</li>";}
else if(selectedEmailProvider=="Express")
{helpContent.innerHTML="<li>Open Microsoft Outlook Express.</li><li>On the File menu, click <strong>Export, Other Address Book.</strong></li><li>Click <strong>Text File (Comma Separated Values).</strong> </li><li>Click <strong>Export.</strong></li><li>Enter a file name in  &quot; Save exported file as, &quot; and then click <strong>Next.</strong></li><li>Select the information you wish to export. Please include First Name, Last Name, E-mail Address, Home Street, Home State, and Home Postal Code. </li><li>Click <strong>Finish.</strong></li><li> When the address book export process is complete, click <strong>OK.</strong></li><li> Click <strong> Close</strong> on the Address Book Export Tool.</li>";}
else if(selectedEmailProvider=="Hotmail")
{helpContent.innerHTML="<li>From your Windows Live Hotmail mail page, click <strong>Contact list.</strong></li><li>Under Manage, select <strong>Export.</strong></li><li>Enter the security code, and then click <strong>Export.</strong> </li><li>Click <strong>Save</strong> in the File Download box.</li><li>Select a location to save your file, and then click <strong>Save.</strong></li>";}
else if(selectedEmailProvider=="Yahoo")
{helpContent.innerHTML="<li>From your Yahoo! account, click Options in the upper-right corner and select <strong>Mail Options.</strong></li><li>In the left column, click <strong>Contacts.</strong></li><li>Under Management, click <strong>Import/Export.</strong> </li><li>Under Export, click the <strong>Export Now</strong> button under Yahoo! CSV.</li><li>Select <strong>Save File</strong>, and click <strong>OK.</strong></li>";}
else
{helpContent.innerHTML="Please select an Email Provider";}}
function CancelRedirectMethod(cancelRedirectURL){document.forms['frmImportOptions'].action=cancelRedirectURL;document.forms['frmImportOptions'].method='GET';document.forms['frmImportOptions'].submit();}
function RedirectMethods(){var selectedEmailProvider=document.getElementById("SelectedProvider").value;var redirectURL=document.getElementById("RedirectURL").value
if(selectedEmailProvider=="Apple"){$('#FileFormat').val("APPLE");document.forms['frmImportOptions'].action="/ConnectionsAddressBook/UploadAttachment/Apple?RedirectURL="+redirectURL;}
else if(selectedEmailProvider=="Entourage"){$('#FileFormat').val("ENTOURAGE");document.forms['frmImportOptions'].action="/ConnectionsAddressBook/UploadAttachment/Entourage?RedirectURL="+redirectURL;}
else if(selectedEmailProvider=="Excel"){$('#FileFormat').val("CUSTOM");document.forms['frmImportOptions'].action="/ConnectionsAddressBook/UploadAttachment/Custom?RedirectURL="+redirectURL;}
else if(selectedEmailProvider=="Outlook"){$('#FileFormat').val("OUTLOOK");document.forms['frmImportOptions'].action="/ConnectionsAddressBook/UploadAttachment/Outlook?RedirectURL="+redirectURL;}
else if(selectedEmailProvider=="Express"){$('#FileFormat').val("OUTLOOKEXPRESS");document.forms['frmImportOptions'].action="/ConnectionsAddressBook/UploadAttachment/OutlookExpress?RedirectURL="+redirectURL;}
else if(selectedEmailProvider=="Hotmail"){$('#FileFormat').val("HOTMAIL");document.forms['frmImportOptions'].action="/ConnectionsAddressBook/UploadAttachment/Hotmail?RedirectURL="+redirectURL;}
else if(selectedEmailProvider=="Yahoo"){$('#FileFormat').val("YAHOO");document.forms['frmImportOptions'].action="/ConnectionsAddressBook/UploadAttachment/Yahoo?RedirectURL="+redirectURL;}
else{$('#FileFormat').val("CUSTOM");document.forms['frmImportOptions'].action="/ConnectionsAddressBook/UploadAttachment/Custom?RedirectURL="+redirectURL;}
document.forms['frmImportOptions'].method='POST';document.forms['frmImportOptions'].submit();}
function HandleDoubleClick(){setTimeout(function(){hallmarkBehaviors.hmkEnableButton('.JQDisableAction')},100);}
function SetMobileCountryCode(id){var mobilePhone=$("#MobilePhone").val();if(id.value=='USA'){$('#OtherMobilePhone').hide();$('#USMobilePhone').show();if(mobilePhone!=""&&!isNaN(mobilePhone)){$("#MobilePhone1").val(mobilePhone.substr(0,3));$("#MobilePhone2").val(mobilePhone.substr(3,3));$("#MobilePhone3").val(mobilePhone.substr(6,4));}
$('#MobilePhone').val('');}
else if(id.value==''){$('#USMobilePhone').hide();$('#OtherMobilePhone').show();$('#MobilePhoneNumer').find(':text').val('');}
else{$('#USMobilePhone').hide();$('#OtherMobilePhone').show();if(mobilePhone==""){var phone=$("#MobilePhone1").val()+$("#MobilePhone2").val()+$("#MobilePhone3").val();$("#MobilePhone").val(phone);}
$("#MobilePhone1").val('');$("#MobilePhone2").val('');$("#MobilePhone3").val('');}}
function SetDayPhoneCountryCode(id){var dayPhone=$("#DayPhone").val();if(id.value=='USA'){$('#OtherDayPhone').hide();$('#USDayPhone').show();if(dayPhone!=""&&!isNaN(dayPhone)){$("#DayPhone1").val(dayPhone.substr(0,3));$("#DayPhone2").val(dayPhone.substr(3,3));$("#DayPhone3").val(dayPhone.substr(6,4));}
$("#DayPhone").val('');}
else if(id.value==''){$('#USDayPhone').hide();$('#OtherDayPhone').show();$('#DayPhoneNumer').find(':text').val('');}
else{$('#USDayPhone').hide();$('#OtherDayPhone').show();if(dayPhone==""){var dphone=$("#DayPhone1").val()+$("#DayPhone2").val()+$("#DayPhone3").val();$("#DayPhone").val(dphone);}
$("#DayPhone1").val('');$("#DayPhone2").val('');$("#DayPhone3").val('');}}
function DisplayHouseholdPaged(){document.forms["frmGetContacts"].action="/Household/GetHouseholdsPaged";document.forms["frmGetContacts"].method="POST";document.forms["frmGetContacts"].submit();}
function loadCleanUp(){$('#popupContainer2').removeClass('smallOverlay').addClass('mediumOverlay');this.getContent().find("div.JQolayContent").html(loadMsg);$.ajax({type:'GET',contentType:'application/x-www-form-urlencoded',url:'/DuplicateContacts/Identify',data:'',dataType:'html',cache:false,error:function(e){},success:function(data){if(data!=""){olay.getContent().find("div.JQolayContent").html(data);}}});olay=this;}
function loadChooseService(){$('#popupContainer2').removeClass('smallOverlay').addClass('mediumOverlay');this.getContent().find("div.JQolayContent").html(loadMsg);$.ajax({type:'GET',contentType:'application/x-www-form-urlencoded',url:'/ImportContacts/ChooseService',data:'',dataType:'html',cache:false,error:function(e){},success:function(data){if(data!=""){olay.getContent().find("div.JQolayContent").html(data);}}});olay=this;}
jQuery(function($){var ignore=[8,9,13,33,34,35,36,37,38,39,40,46];var eventName='keydown';$('textarea[maxlength]').live(eventName,function(event){var self=$(this),maxlength=self.attr('maxlength'),code=$.data(this,'keycode');if(maxlength&&maxlength>0){return(self.val().length<maxlength||$.inArray(code,ignore)!==-1);}})
eventName='keyup';$('textarea[maxlength]').live(eventName,function(event){var self=$(this),maxlength=self.attr('maxlength');if(maxlength&&maxlength>0&&self.val().length>maxlength){self.val(self.val().substring(0,maxlength))}
var currentId=$(this).attr("id");var spanCharID=currentId+"CharSpan";if($("#"+spanCharID).length){$("#"+spanCharID).text(maxlength-self.val().length);}}).live('keyup',function(event){$.data(this,'keycode',event.keyCode||event.which);});});function toggle_visibility(id){var e=document.getElementById(id);if(e.style.display=='none'){e.style.display='block';}
else{e.style.display='none';}}
function UpdateContact(){var selectedGroupIDs='';var deselectedGroupIDs='';hallmarkBehaviors.hmkDisableButton('.JQDisableAction');if($("#AddressBookType").val().toUpperCase()!=addressBookTypes[0].toUpperCase()){$('#ValidationType').val($('#SelectionCriteria').val().toUpperCase());}
$("#dropFormMenu").find("input:checkbox").each(function(){if($(this).attr('checked')){selectedGroupIDs+=','+$(this).val();}
else{deselectedGroupIDs+=','+$(this).val();}});$("#frmAddEditContact").find("#SelectedGroupIDs").val(selectedGroupIDs);$("#frmAddEditContact").find("#DeSelectedGroupIDs").val(deselectedGroupIDs);clearAllErrorMessages();$('#frmAddEditContact').ajaxSubmit(SaveContactOptions);return false;}
function checkObj(obj){if($('#'+obj.id).attr('checked')){$('#'+obj.id).addClass("isSelected");}
else if(!$('#'+obj.id).attr('checked')){$('#'+obj.id).removeClass("isSelected");}}
function EditConnectedContactDetails(){var selGroupIDs='';$('#frmEditConnectedContactDetails').find('.isSelected').each(function(){selGroupIDs=selGroupIDs+$('#'+this.id).val()+','});selGroupIDs=selGroupIDs.substr(0,selGroupIDs.length-1);$('#selectedGroupIDs').val(selGroupIDs);document.forms["frmEditConnectedContactDetails"].action="/ConnectionsAddressBook/UpdateConnectedContactDetails";document.forms["frmEditConnectedContactDetails"].method="POST";document.forms["frmEditConnectedContactDetails"].submit();}
function DisconnectContact(contactID){document.forms["frmEditConnectedContactDetails"].action="/ConnectionsAddressBook/DisconnectContact";document.forms["frmEditConnectedContactDetails"].method="POST";document.forms["frmEditConnectedContactDetails"].submit();}
function Cancel(personId){if($("#AddressBookType").val().toUpperCase()==addressBookTypes[0].toUpperCase()){if(IsSavedFromPopUp=="true"){IsSavedFromPopUp="";$('#ShowAddEditContact').find('div.close').trigger('click');}
else{window.location.href="/ConnectionsAddressBook/GetFlatContactDetails/"+personId+"/0/0"}}
else{$('#ShowAddEditContact').find('div.close').trigger('click');}}
function SaveContactAsset(){var URL="";var params="";if(ImageUpload.avatarID!=""){URL="/Asset/UpdateProfileAsset";params="AvatarID="+ImageUpload.avatarID+"&PersonID="+$('#RelatedPersonID').val();}
else{URL="/Asset/AddProfileAsset";params="AssetID="+$("#AssetID").val()
+"&ImageUrl="+ImageUpload.imageUrl+"&PersonID="+$('#RelatedPersonID').val();}
$.ajax({type:"POST",contentType:"application/x-www-form-urlencoded",url:URL,data:params,dataType:"json",error:function(e){},success:function(data){if(data!=null){if(data.validationErrors!=null){displayErrorMessagesOnReLoad(data.validationErrors,errorPage);hallmarkBehaviors.hmkEnableButton();}
else{ImageUpload.HandleSuccess(data);}}}});}