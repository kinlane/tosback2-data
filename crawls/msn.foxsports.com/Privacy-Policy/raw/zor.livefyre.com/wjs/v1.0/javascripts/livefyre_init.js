if(typeof(window.livefyre_init)==="undefined"){var LF=(function(){var a={CONFIG_COOKIE:"lf_config",CONSOLE_PARAM:"lf_console",VERSION_PARAM:"lf_version",livefyreLibraryLoaded:false,conversation_not_ready_attempts:0,initParams:function(){var d={callback:"LF.initCallback",url:b.utils.Url.encode(window.location.href.split("#")[0])};for(var c in b.config){if(b.config.hasOwnProperty(c)){switch(c){case"conv_meta":d[c]=b.utils.Url.encode($jl.JSON.stringify(b.config[c]));break;case"lfprofile":d[c]=$jl.JSON.stringify(b.config[c]);break;case"lftoken":d[c]=b.config[c].replace(/\+/g,"%2B");break;case"site_id":case"article_id":case"allow_comments":case"conv_id":d[c]=b.config[c];break;case"conversation_id":b.config.conv_id=b.config.conversation_id;delete b.config.conversation_id;d.conv_id=b.config.conv_id;break;case"version":d.version=b.config[c];break;default:break}}}if(typeof(b.config.lfhost)!=="undefined"){d.__lfdomain__=b.config.lfhost}if(typeof(b.config.article_id)==="undefined"&&(typeof(b.config.domain)==="undefined"||b.config.domain!="thenextweb.fyre.co")){b.Logger.info("LF.initParams","Livefyre Initialization: No article_id existed, so we're using the url instead.");d.article_id=d.url}if(typeof(b.versions.assets)!=="undefined"){d.asset_version=b.versions.assets}a.initParams=function(){return d};return d},setSpecial:function(c){if(c.conv.participant||c.conv.moderator){window.livefyre_user.special=true}},init:function(){var c=b.servers.admin+"/api/v1.1/internal/login_init.js";if(typeof(b.config.lfhost)!=="undefined"||(/fyre\.co$/.exec(b.servers.domain)!=null&&(typeof(b.config.custom_authentication)==="undefined"||b.config.custom_authentication))){c=b.servers.bootstrap+"/api/v1.1/public/init.js"}a.loadScript(c+"?"+b.utils.String.toParams(a.initParams()));a.initBackplane(b.config.backplane)},handleConversationNotReady:function(){a.conversation_not_ready_attempts++;if(a.conversation_not_ready_attempts>4){b.UserMessage.showWidgetMessage("error","There was an error loading the conversation.");b.Logger.error("ConversationReadyFail","Conversation load timed out after "+a.conversation_not_ready_attempts+" attempts",a.initParams)}else{a.init()}},loadLink:function(d){var g=document.getElementsByTagName("head")[0],h,f,e=document.createElement("link"),c=a.getCSSType();e.rel="stylesheet";e.type="text/css";e.href=d;e.media="all";for(f=0;f<g.childNodes.length;f++){if(g.childNodes[f].tagName=="link"){h=g.childNodes[f]}}if(!h){g.appendChild(e)}else{a.insertSiblingAfter(e,h)}},loadScript:function(d,g){var f=document.getElementsByTagName("head")[0],h,e,c=document.createElement("script");c.type="text/javascript";c.src=d;if(g){c.async=true}for(e=0;e<f.childNodes.length;e++){if(f.childNodes[e].tagName=="link"){h=f.childNodes[e]}}if(!h){f.appendChild(c)}else{a.insertSiblingAfter(c,h)}},insertSiblingAfter:function(c,d){if(d.nextSibling===undefined){d.parentNode.appendChild(c)}else{d.parentNode.insertBefore(c,d.nextSibling)}},loadRemainingScripts:function(d,c){if(typeof(window.$jl)!=="function"){a.loadScript(b.servers.assets+"javascripts/livefyre_jquery.js",false)}if(!a.livefyreLibraryLoaded){a.livefyreLibraryLoaded=true;a.loadScript(d);if(!c){a.loadCSS()}}},loadCSS:function(){var c="livefyre_"+a.getCSSType()+".css";if(b.utils.existsOnPage("link","href",c)){return}a.loadLink(b.servers.assets+"css/"+c)},getCSSType:function(){if(b.detectMobile()){if(window.lf_ipad){return"ipad"}return"mobile"}return"embed"},onLoad:function(c){if(typeof(lf_window_ready)==="undefined"||!lf_window_ready){if(window.addEventListener){window.addEventListener("load",c,false)}else{if(window.attachEvent){window.attachEvent("onload",c)}}}else{c()}},loadConfig:function(c,e){if(typeof(e)==="undefined"||!e){b.config=c}for(var d in c){if(c.hasOwnProperty(d)){switch(d){case"lf_site_id":case"site_id":case"blog_id":b.data.site_id=b.data.blog_id=c[d];break;case"lf_domain":case"domain":if(typeof(c.lfhost)==="undefined"){b.servers.assets="http://zor."+c[d]+"/wjs/";if(b.utils.isCustomDomain(c[d])){b.servers.assets="http://zor.fyre.co/wjs/"}b.servers.bootstrap="http://bootstrap."+c[d];b.servers.domain=c[d];b.servers.web="http://"+c[d]}break;case"lf_version":case"version":b.versions.assets=c[d];break;case"lf_console":case"console":b.consoleLoggingEnabled=c[d];b.Logger.enableConsole(b.consoleLoggingEnabled);break;case"backplane":if(typeof(c[d])!=="function"){delete b.config[d]}break;default:break}}}},initBackplane:function(c){if(c===undefined){return}c(function(){if(typeof(Backplane.getChannelID())!=="string"){return}Backplane.subscribe(function(d){if(d.type==="identity/login"){b.ready(function(){b.login({bp_channel:Backplane.getChannelID()})});return}if(d.type==="identity/logout"){b.ready(function(){b.logout()});return}});b.ready(function(){b.Ajax.httpRequest({url:Backplane.getChannelID(),data:{},http_method:"GET",transport:"jsonp",success:function(e){var d;if(e.length===0){return}d=e[e.length-1].message.type;if(d==="identity/login"){b.login({bp_channel:Backplane.getChannelID()});return}if(d==="identity/logout"){b.logout();return}}})})})},loadCustomConfig:function(){var c={};var f=window.location.hash;var e=window.location.search;var d=function(j,i,h){var k=j.indexOf(i);if(k===-1){return}var g=j.substring(k).split("&")[0];var i=g.split("=");h[i[0]]=i[1]};d(f,a.CONSOLE_PARAM,c);d(f,a.VERSION_PARAM,c);d(e,a.CONSOLE_PARAM,c);d(e,a.VERSION_PARAM,c);if(document.cookie.indexOf(a.CONFIG_COOKIE)>-1){c=b.utils.cookie.get(a.CONFIG_COOKIE);if(!c){return}c=$jl.JSON.parse(c)}a.loadConfig(c,true)},getParent:function(){var d=document.getElementsByTagName("script"),f=null;for(var e=0,c=d.length;e<c;e++){if(/javascripts\/livefyre_init|livefyre\.js/.exec(d[e].src)!=null){f=d[e];break}}if(f!=null){return f.parentNode.tagName.toLowerCase()}return f},isNI:function(){return typeof(b.config.domain)!=="undefined"&&(b.config.domain.toLowerCase()=="thesun.fyre.co"||b.config.domain.toLowerCase()=="niuat1.fyre.co"||b.config.domain.toLowerCase()=="nistaging1.fyre.co"||b.config.domain.toLowerCase()=="nitest-si.fyre.co"||b.config.domain.toLowerCase()=="nitest.fyre.co")}};var b=function(f){var h=document.getElementsByTagName("meta");for(var g=0,c=h.length;g<c;g++){if(h[g].name=="lfhost"){f.lfhost=h[g].content;break}}if(typeof(f)!=="undefined"){a.loadConfig(f)}if(arguments.length>1){for(var g=1,c=arguments.length;g<c;g++){if(typeof(arguments[g])=="function"){b.ready(arguments[g])}}}var e=document.getElementById("lf_comment_stream"),d=document.getElementById("livefyre");if(e==null&&d==null){if(a.isNI()||a.getParent()!="head"){document.write('<div id="livefyre"><div class="lf_widget_message lf_loading"></div></div>')}}else{if(d==null&&e!=null){e.innerHTML='<div id="livefyre"><div class="lf_widget_message lf_loading"></div></div>'}}a.loadCustomConfig();a.init();return b};b.onInitialize=[];b.config={};b.data={};b.servers={admin:"http://www.livefyre.com",assets:"http://zor.livefyre.com/wjs/",bootstrap:"http://bootstrap.livefyre.com",domain:"livefyre.com",web:"http://livefyre.com"};if("livefyre.com"!=="livefyre.com"){b.servers.admin=b.servers.web}b.versions={web:"1.0"};b.login=function(c){if(typeof(c.token)!=="string"){b.Logger.warning("LF.login","Token must be provided as a string.");return b}b.config.lftoken=c.token;if(typeof(c.profile)==="object"){b.config.lfprofile=c.profile}return b};b.ready=function(){for(var c=0;c<arguments.length;c++){if(typeof(arguments[c])=="function"){b.onInitialize.push(arguments[c])}}return b};b.initCallback=function(c){b.Logger.info("LF.initCallback","LF init callback",c);if(c.status==="ok"){if(typeof(b.data.script_url)==="undefined"){b.data.script_url=c.data.script_url}b.setAssetsVersion(c.data.assets_version);switch(c.data.conv.status){case"ok":b.data.conv=c.data.conv;b.onInitialize.push(function(){b.Dispatcher.dispatch("conv",c.data.conv)});if(typeof(c.data.user)!=="undefined"){b.data.user=c.data.user;window.livefyre_user.loggedin=true;a.setSpecial(c.data);b.onInitialize.push(function(){var d=c.data.user;d.banned=c.data.conv.banned;d.following=c.data.conv.following;d.moderator=c.data.conv.moderator;b.modules.Auth.userAuthSuccess(d)})}if(typeof(c.data.templates)!=="undefined"){b.config.templates=c.data.templates}a.loadRemainingScripts(b.data.script_url,b.config.custom_css);break;case"error":b.UserMessage.showWidgetMessage("error","There was an error loading the conversation.");b.Logger.error("ConversationError","Error loading the conversation",a.initParams);break;case"not_ready":setTimeout(a.handleConversationNotReady,(3000+2000*a.conversation_not_ready_attempts));break;default:break}}else{if(c.status==="error"&&c.code===503){if(!b.utils.existsOnPage("link","href","livefyre.com")){a.loadLink(b.servers.assets+"css/livefyre_init.css")}b.UserMessage.showWidgetMessage("maintenance",c.msg)}else{if(c.status==="error"&&c.code===403){if(!b.utils.existsOnPage("link","href","livefyre.com")){a.loadLink(b.servers.assets+"css/livefyre_init.css")}b.UserMessage.showWidgetMessage("disabled",c.msg)}else{b.Logger.error("InitResponseError","Error with the init response",c)}}}};b.preloadLibraries=function(d,e,c){a.loadCustomConfig();if(b.versions.assets&&b.versions.assets!==e){b.setAssetsVersion(b.versions.assets);d=d.replace(e,b.versions.assets)}else{b.setAssetsVersion(e)}if(window.tinymce===undefined){a.loadScript(b.servers.assets+"javascripts/tiny_mce/tiny_mce_packed.js",true);window.tinyMCEPreInit={base:b.servers.assets+"javascripts/tiny_mce",suffix:"",query:""}}a.loadRemainingScripts(d,c)};b.setAssetsVersion=function(c){if(typeof(b.versions.assets)==="undefined"){if(c.indexOf("v")==0){b.versions.assets=c}else{b.versions.assets="v1.0."+c}}if(b.servers.assets.indexOf("/v")==-1){b.servers.assets+=b.versions.assets+"/"}};window.livefyre_init=true;window.livefyre_user={loggedin:false,special:false};return b})()}if(typeof(console)==="undefined"){console={log:function(){},error:function(){}}};
if(typeof($jl)==="undefined"){$jl={}}$jl.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var k,h,f,j,g,e,d;var b=0;c=$jl.Base64._utf8_encode(c);while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+$jl.Base64._keyStr.charAt(j)+$jl.Base64._keyStr.charAt(g)+$jl.Base64._keyStr.charAt(e)+$jl.Base64._keyStr.charAt(d)}return a},decode:function(c){var a="";var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=$jl.Base64._keyStr.indexOf(c.charAt(b++));g=$jl.Base64._keyStr.indexOf(c.charAt(b++));e=$jl.Base64._keyStr.indexOf(c.charAt(b++));d=$jl.Base64._keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(k);if(e!=64){a=a+String.fromCharCode(h)}if(d!=64){a=a+String.fromCharCode(f)}}a=$jl.Base64._utf8_decode(a);return a},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},_utf8_decode:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};
if(typeof($jl)==="undefined"){$jl={}}$jl.JSON={};(function(){function f(n){return n<10?"0"+n:n}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep,_private={};_private.toJSON=function(obj){if(obj instanceof Date){return isFinite(obj.valueOf())?obj.getUTCFullYear()+"-"+f(obj.getUTCMonth()+1)+"-"+f(obj.getUTCDate())+"T"+f(obj.getUTCHours())+":"+f(obj.getUTCMinutes())+":"+f(obj.getUTCSeconds())+"Z":null}return obj.valueOf()};function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"){value=_private.toJSON(value)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof $jl.JSON.stringify!=="function"){$jl.JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof $jl.JSON.parse!=="function"){$jl.JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
LF.utils={existsOnPage:function(c,b,f){var e=document.getElementsByTagName(c);for(var d=0,a=e.length;d<a;d++){if(typeof(e[d][b])!=="undefined"&&e[d][b].indexOf(f)>-1){return true}}return false},isCustomDomain:function(a){var b=(typeof(a)!="undefined"&&/fyre\.co$/.exec(a)!=null);LF.utils.isCustomDomain=function(){return b};return b},cookie:{get:function(b){var e=document.cookie.split(";");for(var d=0,a=e.length;d<a;d++){var c=e[d].trim();if(c.split("=")[0]==b){return unescape(c).split("=")[1]}}return},set:function(a,b){document.cookie=a+"="+b}},localStorage:{get:function(a){if(typeof(window.localStorage[a])!=="undefined"){return window.localStorage[a]}return},set:function(a,b){window.localStorage[a]=b},remove:function(a){delete window.localStorage[a]}},_bi:(function(){function b(){return[navigator.userAgent,[screen.height,screen.width,screen.colorDepth].join("x"),(new Date()).getTimezoneOffset(),navigator.cookieEnabled,c(navigator.plugins,function(d){return[d.name,d.description,c(d,function(e){return[e.type,e.description,e.suffixes].join("~")}).join(",")].join("::")}).join(";")].join("###")}function c(h,g){if(typeof(g)!=="function"){return}var d=h.length,f=[];for(var e=0;e<d;e++){f.push(g.call(this,h[e]))}return f}function a(){return LF.utils.md5(b())}return{raw:b,hashed:a}}()),md5:(function(){function c(o,q){var p=o[0],n=o[1],s=o[2],r=o[3];p=a(p,n,s,r,q[0],7,-680876936);r=a(r,p,n,s,q[1],12,-389564586);s=a(s,r,p,n,q[2],17,606105819);n=a(n,s,r,p,q[3],22,-1044525330);p=a(p,n,s,r,q[4],7,-176418897);r=a(r,p,n,s,q[5],12,1200080426);s=a(s,r,p,n,q[6],17,-1473231341);n=a(n,s,r,p,q[7],22,-45705983);p=a(p,n,s,r,q[8],7,1770035416);r=a(r,p,n,s,q[9],12,-1958414417);s=a(s,r,p,n,q[10],17,-42063);n=a(n,s,r,p,q[11],22,-1990404162);p=a(p,n,s,r,q[12],7,1804603682);r=a(r,p,n,s,q[13],12,-40341101);s=a(s,r,p,n,q[14],17,-1502002290);n=a(n,s,r,p,q[15],22,1236535329);p=i(p,n,s,r,q[1],5,-165796510);r=i(r,p,n,s,q[6],9,-1069501632);s=i(s,r,p,n,q[11],14,643717713);n=i(n,s,r,p,q[0],20,-373897302);p=i(p,n,s,r,q[5],5,-701558691);r=i(r,p,n,s,q[10],9,38016083);s=i(s,r,p,n,q[15],14,-660478335);n=i(n,s,r,p,q[4],20,-405537848);p=i(p,n,s,r,q[9],5,568446438);r=i(r,p,n,s,q[14],9,-1019803690);s=i(s,r,p,n,q[3],14,-187363961);n=i(n,s,r,p,q[8],20,1163531501);p=i(p,n,s,r,q[13],5,-1444681467);r=i(r,p,n,s,q[2],9,-51403784);s=i(s,r,p,n,q[7],14,1735328473);n=i(n,s,r,p,q[12],20,-1926607734);p=e(p,n,s,r,q[5],4,-378558);r=e(r,p,n,s,q[8],11,-2022574463);s=e(s,r,p,n,q[11],16,1839030562);n=e(n,s,r,p,q[14],23,-35309556);p=e(p,n,s,r,q[1],4,-1530992060);r=e(r,p,n,s,q[4],11,1272893353);s=e(s,r,p,n,q[7],16,-155497632);n=e(n,s,r,p,q[10],23,-1094730640);p=e(p,n,s,r,q[13],4,681279174);r=e(r,p,n,s,q[0],11,-358537222);s=e(s,r,p,n,q[3],16,-722521979);n=e(n,s,r,p,q[6],23,76029189);p=e(p,n,s,r,q[9],4,-640364487);r=e(r,p,n,s,q[12],11,-421815835);s=e(s,r,p,n,q[15],16,530742520);n=e(n,s,r,p,q[2],23,-995338651);p=l(p,n,s,r,q[0],6,-198630844);r=l(r,p,n,s,q[7],10,1126891415);s=l(s,r,p,n,q[14],15,-1416354905);n=l(n,s,r,p,q[5],21,-57434055);p=l(p,n,s,r,q[12],6,1700485571);r=l(r,p,n,s,q[3],10,-1894986606);s=l(s,r,p,n,q[10],15,-1051523);n=l(n,s,r,p,q[1],21,-2054922799);p=l(p,n,s,r,q[8],6,1873313359);r=l(r,p,n,s,q[15],10,-30611744);s=l(s,r,p,n,q[6],15,-1560198380);n=l(n,s,r,p,q[13],21,1309151649);p=l(p,n,s,r,q[4],6,-145523070);r=l(r,p,n,s,q[11],10,-1120210379);s=l(s,r,p,n,q[2],15,718787259);n=l(n,s,r,p,q[9],21,-343485551);o[0]=d(p,o[0]);o[1]=d(n,o[1]);o[2]=d(s,o[2]);o[3]=d(r,o[3])}function k(v,p,o,n,u,r){p=d(d(p,v),d(n,r));return d((p<<u)|(p>>>(32-u)),o)}function a(p,o,v,u,n,r,q){return k((o&v)|((~o)&u),p,o,n,r,q)}function i(p,o,v,u,n,r,q){return k((o&u)|(v&(~u)),p,o,n,r,q)}function e(p,o,v,u,n,r,q){return k(o^v^u,p,o,n,r,q)}function l(p,o,v,u,n,r,q){return k(v^(o|(~u)),p,o,n,r,q)}function j(q){if(/[\x80-\xFF]/.test(q)){q=unescape(encodeURI(q))}txt="";var t=q.length,r=[1732584193,-271733879,-1732584194,271733878],p;for(p=64;p<=q.length;p+=64){c(r,m(q.substring(p-64,p)))}q=q.substring(p-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(p=0;p<q.length;p++){o[p>>2]|=q.charCodeAt(p)<<((p%4)<<3)}o[p>>2]|=128<<((p%4)<<3);if(p>55){c(r,o);for(p=0;p<16;p++){o[p]=0}}o[14]=t*8;c(r,o);return r}function m(o){var p=[],n;for(n=0;n<64;n+=4){p[n>>2]=o.charCodeAt(n)+(o.charCodeAt(n+1)<<8)+(o.charCodeAt(n+2)<<16)+(o.charCodeAt(n+3)<<24)}return p}var h="0123456789abcdef".split("");function f(q){var p="",o=0;for(;o<4;o++){p+=h[(q>>(o*8+4))&15]+h[(q>>(o*8))&15]}return p}function b(n){for(var o=0;o<n.length;o++){n[o]=f(n[o])}return n.join("")}var g=function(n){return b(j(n))};function d(o,n){return(o+n)&4294967295}if(g("hello")!="5d41402abc4b2a76b9719d911017c592"){function d(n,q){var p=(n&65535)+(q&65535),o=(n>>16)+(q>>16)+(p>>16);return(o<<16)|(p&65535)}}return g})(),Math:{uuid:(function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(b,e){var g=a,d=[];e=e||g.length;if(b){for(var c=0;c<b;c++){d[c]=g[0|Math.random()*e]}}else{var f;d[8]=d[13]=d[18]=d[23]="-";d[14]="4";for(var c=0;c<36;c++){if(!d[c]){f=0|Math.random()*16;d[c]=g[(c==19)?(f&3)|8:f]}}}return d.join("")}})()},Date:{toISO8601:function(a){function b(c){return c<10?"0"+c:c}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"Z"},setISO8601:function(b,g){var c="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?";var f=b.match(new RegExp(c));var e=0;var a=new Date(f[1],0,1);if(f[3]){a.setMonth(f[3]-1)}if(f[5]){a.setDate(f[5])}if(f[7]){a.setHours(f[7])}if(f[8]){a.setMinutes(f[8])}if(f[10]){a.setSeconds(f[10])}if(f[12]){a.setMilliseconds(Number("0."+f[12])*1000)}if(f[14]){e=(Number(f[16])*60)+Number(f[17]);e*=((f[15]=="-")?1:-1)}e-=a.getTimezoneOffset();time=(Number(a)+(e*60*1000));g.setTime(Number(time));return g}},String:{toParams:function(c){var b=[];for(var a in c){b.push(a+"="+c[a])}return b.join("&")},truncate:function(b,a){if(b.length>a){return b.substr(0,a)+"..."}else{return b.substr(0)}}},registerModels:function(a){LF.modelInstantiators.push(a)},Url:{encode:function(b){return escape(this._utf8_encode(b)).replace("+","%2b")},decode:function(b){return this._utf8_decode(unescape(b))},_utf8_encode:function(c){c=c.replace(/\r\n/g,"\n");var f="";for(var g=0;g<c.length;g++){var h=c.charCodeAt(g);if(h<128){f+=String.fromCharCode(h)}else{if((h>127)&&(h<2048)){f+=String.fromCharCode((h>>6)|192);f+=String.fromCharCode((h&63)|128)}else{f+=String.fromCharCode((h>>12)|224);f+=String.fromCharCode(((h>>6)&63)|128);f+=String.fromCharCode((h&63)|128)}}}return f},_utf8_decode:function(f){var c="";var h=0;var g=c1=c2=0;while(h<f.length){g=f.charCodeAt(h);if(g<128){c+=String.fromCharCode(g);h++}else{if((g>191)&&(g<224)){c2=f.charCodeAt(h+1);c+=String.fromCharCode(((g&31)<<6)|(c2&63));h+=2}else{c2=f.charCodeAt(h+1);c3=f.charCodeAt(h+2);c+=String.fromCharCode(((g&15)<<12)|((c2&63)<<6)|(c3&63));h+=3}}}return c}},Array:{lastElement:function(a){return a[a.length-1]}}};LF.closeSafari=function(){clearTimeout(LF.modules.Auth.auth_popup_timeout);clearTimeout(LF.modules.Auth.auth_popup_timeout_long);LF.modules.Auth.setUserAuthFromCookie(true)};if(!LF.safari_check){LF.safari_check=(function(){LF.safari_poll=null;LF.safari_poll_expire=null;if(window.location.hash.indexOf("lf_safari_poll")>-1){LF.safari_poll=setTimeout(function(){if(window.location.hash.indexOf("lf_safari_closed")>-1){clearTimeout(LF.safari_poll_expire);window.parent.opener.LF.closeSafari()}else{LF.safari_poll=setTimeout(arguments.callee,100)}},100);LF.safari_poll_expire=setTimeout(function(){clearTimeout(LF.safari_poll);window.parent.opener.LF.closeSafari()},60000)}return true})()}LF.detectMobile=(function(){var d=false,c=["iphone","ipod","ipad","android"],b=navigator.userAgent.toLowerCase();window.lf_ipad=false;for(var e=0,a=c.length;e<a;e++){if(b.search(c[e])>-1){d=true;break}}if(b.search("ipad")>-1){window.lf_ipad=true}return function(){return d}})();
LF.Ajax=(function(){var b=null;var a={};a.abort=function(){b.abort()};a.ajax=function(c){b=$jl.ajax(c);return b};a.ajax.ready=function(){return(window.$jl!==undefined&&window.$jl.ajax!==undefined)};a.determineTransport=function(){var c="ajax";if(window.location.href.indexOf("file://")===0){c="jsonp"}else{if(window.XMLHttpRequest&&"withCredentials" in (new XMLHttpRequest())){c="CORS"}else{if(window.XDomainRequest){c="IECORS"}else{c="jsonp"}}}a.determineTransport=function(){return c};return c};a.XDR=$jl.XDR=function(e,d,j,c,f,i,g){if(typeof(f)==="undefined"){f="GET"}if(typeof(c)!="function"){c=function(m,k,l){LF.Logger.warning("LF.Ajax.XDR",["JSONP Error",m,k,l].join(" "))}}d.protocol=window.location.protocol;d.host=window.location.host;if(typeof(d.lfgtoken)==="undefined"){if(typeof(g)==="boolean"&&!g){d.lftoken=""}else{if(typeof(LF.data.user)!=="undefined"&&typeof(LF.data.user.token)!=="undefined"&&LF.data.user.token!=""){d.lftoken=LF.data.user.token}else{if(typeof(LF.Fyre)!=="undefined"&&typeof(LF.Fyre.get("user"))!=="undefined"){d.lftoken=LF.Fyre.get("user").get("token").replace(/\+/g,"%2B")}else{d.lftoken=""}}}}if(typeof(LF.config.lfhost)!=="undefined"){d.__lfdomain__=LF.config.lfhost}var h={callbackParameter:"callback",error:c,url:e,transport:i,http_method:f};if(typeof(j)=="string"){h.callback=j}else{h.success=j}h.data=d;return a.httpRequest(h)};a.httpRequest=function(h){var j=(typeof(h.transport)==="undefined"?LF.Ajax.determineTransport():h.transport);var i={};if(h.url.indexOf("?")<0){h.url+="?"}else{h.url+="&"}if(h.http_method=="POST"){i=h.data;if(j==="jsonp"){i._method="POST"}if(typeof(h.data.lfgtoken)==="string"){h.url+="lfgtoken="+h.data.lfgtoken}else{h.url+="lftoken="+h.data.lftoken}}else{h.url+=$jl.param(h.data)}if(window.location.protocol!=="http:"){h.url+="&protocol="+window.location.protocol}var d=function(l,k,n){if(typeof(l)==="string"){try{l=$jl.JSON.parse(l)}catch(m){LF.Logger.warning("LF.Ajax.httpRequest","Error parsing result, but don't fail. Response = "+l)}}n(l,k)};switch(j){case"ajax":b=LF.Ajax.ajax({type:h.http_method,url:h.url,data:i,success:function(k){d(k,textstatus,h.success)},error:function(k){d(k,textstatus,h.error)}});break;case"CORS":var g=b=new XMLHttpRequest();g.open(h.http_method,h.url,true);g.withCredentials=true;var c=function(){var k="error";var l="error";if((this.readyState==4)&&(this.status=="200")){k="success";l=this.responseText;if(typeof(h.success)=="function"){d(l,k,h.success);h.error=null}}else{if(this.readyState==4&&typeof(h.error)=="function"){d(this.responseText,k,h.error);h.error=null}}};g.onreadystatechange=c;g.send($jl.param(i));return g;break;case"IECORS":var f=b=new window.XDomainRequest();f.open(h.http_method,h.url);f.onload=function(){function k(l){if(l.code===200||typeof(l.timeout)!=="undefined"){h.success(l)}else{h.error(l)}}d(this.responseText,"success",k)};f.onerror=function(){LF.Logger.warning("LF.Ajax.httpRequest:IECORS","Received an error...");d(this.responseText,"error",h.error)};f.send($jl.param(i));return f;break;default:var e=b=LF.Ajax.ajax({async:true,type:h.http_method,url:h.url,data:i,success:function(l){var m=h.success;var k="success";if(l.code&&l.code!==200){m=h.error;k="error"}d(l,k,m)},dataType:"jsonp"});return e;break}};return a})();
LF.Logger_=function(){this.consoleEnabled=LF.consoleLoggingEnabled||false;this.logs={};this.logs.history=[];this.logs.main=[];this.logs.meta={userAgent:navigator.userAgent.replace(/\)|\(/g,""),created_at:new Date(),url:location.href,gFyreId:window.gFyreId}};LF.Logger_.LEVELS={DEBUG:"DEBUG",ERROR:"ERROR",INFO:"INFO",WARNING:"WARNING"};LF.Logger_.prototype.buildRequestData_=function(e,b,a){var c=LF.data||{};var d={};d.__LFLEVEL=e;d.__LFEVENT=b;d.__LFMSG=a;d.__LFSITEID=c.blog_id||null;d.__LFSESSID=null;if(c.conv){d.__LFSESSID=c.conv.id}else{if(LF.Stream){d.__LFSESSID=LF.Stream.page_session}}return d};LF.Logger_.prototype.clear=function(){this.logs.main=[];return this};LF.Logger_.prototype.debug=function(a,c,b){this.log(LF.Logger_.LEVELS.DEBUG,a+": "+c,b)};LF.Logger_.prototype.enableConsole=function(a){this.consoleEnabled=a};LF.Logger_.prototype.error=function(a,c,b){this.log(LF.Logger_.LEVELS.ERROR,a+": "+c,b);this.send("error",a,c+" | "+$jl.JSON.stringify(b))};LF.Logger_.prototype.getLogs=LF.Logger_.prototype.get_logs=function(){return this.logs};LF.Logger_.prototype.history=function(){return this.logs.history};LF.Logger_.prototype.info=function(a,c,b){this.log(LF.Logger_.LEVELS.INFO,a+": "+c,b)};LF.Logger_.prototype.length=function(){return this.logs.main.length};LF.Logger_.prototype.log_=LF.Logger_.prototype.log_default=function(b,a){if(!this.consoleEnabled||!console||!console.log){return this}console.log(b,a);return this};LF.Logger_.prototype.log=function(d,c,b){var a={level:d,logged_at:new Date(),content:c};if(typeof(b)!=="undefined"){for(key in b){if(b.hasOwnProperty(key)){a[key]=b[key]}}}if(d===LF.Logger_.LEVELS.ERROR){this.logs.main.push(a)}this.log_(a.level+": "+a.content,b);return this};LF.Logger_.prototype.meta=function(){return this.logs.meta};LF.Logger_.prototype.print=function(a){if(a=="v"){return $jl.JSON.stringify(this.logs)}else{return $jl.JSON.stringify(this.logs.main.map(function(b){return b.content}))}};LF.Logger_.prototype.send_=function(a){if(LF.detectMobile()||!LF.Ajax.ajax.ready()){return}LF.Ajax.ajax({async:true,type:"GET",url:LF.servers.scribe+"/INFERNO/",data:a,success:function(){}})};LF.Logger_.prototype.send_solo=function(c,b,a){this.send_(this.buildRequestData_(c,b,a))};LF.Logger_.prototype.sendAll=LF.Logger_.prototype.send=function(){if(this.logs.main.length===0){return this}this.log("LIVEFYRE.logger.send()");var a={date:new Date(),length:this.logs.main.length,payload:this.logs.main.slice(0,this.logs.main.length)};this.logs.history.push(a);var b={log:this.logs.main,meta:this.logs.meta};var c=LF.data||{};var d=c.conv?c.conv.id:null;this.send_(this.buildRequestData_("info","conv_id: "+d,$jl.JSON.stringify(b)));this.clear();return this};LF.Logger_.prototype.stream=function(b,a){if($jl("#lf_stream_console").length>0&&$jl("#lf_stream_console").attr("on")=="true"){$jl("#lf_stream_console > .lf_logs").prepend("<b>"+new Date()+"</b> : <b>"+b+"</b> : "+$jl.JSON.stringify(a)+"<br><br>")}};LF.Logger_.prototype.test=function(){};LF.Logger_.prototype.timesSent=LF.Logger_.prototype.times_sent=function(){return this.logs.history.length};LF.Logger_.prototype.warning=function(a,c,b){this.log(LF.Logger_.LEVELS.WARNING,a+": "+c,b)};LF.Logger=new LF.Logger_();
if(typeof(LF)==="undefined"){LF={}}if(typeof(LF.modules)==="undefined"){LF.modules={}}LF.modules.CommentCount=function(a){var c="LFCommentCount",d=100000,f="livefyre.com",e=/[^.\/]+\.fyre\.co|(\w+\.)?livefyre\.com/,h="/api/v1.1/public/comments/ncomments/{hash}.json",g="article_id",b="data-lf-domain";DEFAULT_ARTICLE_ID_ATTRIBUTE="data-lf-article-id",DEFAULT_SITE_ID_ATTRIBUTE="data-lf-site-id",LEGACY_CLASS_NAME="livefyre-ncomments",DEFAULT_CLASS_NAME="livefyre-commentcount",DEFAULT_RETRY_TIMEOUT=500,MAX_FETCH_ATTEMPTS=5,DEFAULT_REPLACER_REGEX=/(\d+,?\d*|none|no|zero|nada|leave a)/ig,NCOMMENTS_SCRIPT_SRC_REGEX=/(CommentCount|ncomments)\.js/,module=function(i){var k=i.articles||module.defaults.get_articles(),j=i.replacer;if(typeof(j)==="undefined"){j=module.defaults.replace_all}else{j=module.helpers.make_replacer(j)}module.fetch(k,j)};module.helpers={};module.helpers.Base64=(function(){var i={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(l){var j="";var s,q,o,r,p,n,m;var k=0;l=i._utf8_encode(l);while(k<l.length){s=l.charCodeAt(k++);q=l.charCodeAt(k++);o=l.charCodeAt(k++);r=s>>2;p=((s&3)<<4)|(q>>4);n=((q&15)<<2)|(o>>6);m=o&63;if(isNaN(q)){n=m=64}else{if(isNaN(o)){m=64}}j=j+this._keyStr.charAt(r)+this._keyStr.charAt(p)+this._keyStr.charAt(n)+this._keyStr.charAt(m)}return j},decode:function(l){var j="";var s,q,o;var r,p,n,m;var k=0;l=l.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(k<l.length){r=this._keyStr.indexOf(l.charAt(k++));p=this._keyStr.indexOf(l.charAt(k++));n=this._keyStr.indexOf(l.charAt(k++));m=this._keyStr.indexOf(l.charAt(k++));s=(r<<2)|(p>>4);q=((p&15)<<4)|(n>>2);o=((n&3)<<6)|m;j=j+String.fromCharCode(s);if(n!=64){j=j+String.fromCharCode(q)}if(m!=64){j=j+String.fromCharCode(o)}}j=i._utf8_decode(j);return j},_utf8_encode:function(k){k=k.replace(/\r\n/g,"\n");var j="";for(var m=0;m<k.length;m++){var l=k.charCodeAt(m);if(l<128){j+=String.fromCharCode(l)}else{if((l>127)&&(l<2048)){j+=String.fromCharCode((l>>6)|192);j+=String.fromCharCode((l&63)|128)}else{j+=String.fromCharCode((l>>12)|224);j+=String.fromCharCode(((l>>6)&63)|128);j+=String.fromCharCode((l&63)|128)}}}return j},_utf8_decode:function(j){var l="";var n=0;var p=0,o=0,m=0,k=0;while(n<j.length){p=j.charCodeAt(n);if(p<128){l+=String.fromCharCode(p);n++}else{if((p>191)&&(p<224)){m=j.charCodeAt(n+1);l+=String.fromCharCode(((p&31)<<6)|(m&63));n+=2}else{m=j.charCodeAt(n+1);k=j.charCodeAt(n+2);l+=String.fromCharCode(((p&15)<<12)|((m&63)<<6)|(k&63));n+=3}}}return l}};return i})();module.helpers.isArray=function(i){if(!i){return false}if(i.isArray){return i.isArray()}else{return Object.prototype.toString.call(i)==="[object Array]"}};module.helpers.isRegExp=function(i){if(!i){return false}else{return Object.prototype.toString.call(i)==="[object RegExp]"}};module.helpers.contains=function(l,k){var j=l.length;while(j--){if(l[j]===k){return true}}return false};module.helpers.hash_articles=function(l){var k=[],r,j={},p="";if(!module.helpers.isArray(l)){l=module.helpers.articles_object_to_list(l)}if(l.length==0){return null}for(var m=0,o=l.length,n,q;m<o;m++){q=l[m];n=j[q.site_id]||[];if(!module.helpers.contains(n,q.article_id)){n.push(q.article_id)}j[q.site_id]=n}for(r in j){if(j.hasOwnProperty(r)){k.push(r+":"+j[r].join(","))}}return module.helpers.Base64.encode(k.join("|"))};module.helpers.unhash_articles=function(o){var k=module.helpers.Base64.decode(o).split("|"),m=[];for(var l=0,j=k.length,n;l<j;l++){n=k[l].split(",");m.push({site_id:n[0],article_id:n[1]})}return m};module.helpers.merge_articles_objects=function(){var p=Array.prototype.slice.call(arguments),l,j,k,o,t,q={};for(var m=0,n=p.length;m<n;m++){l=p[m];for(var s in l){if(!l.hasOwnProperty(s)){continue}if(!(s in q)){q[s]={}}j=l[s];k=q[s];for(var r in j){if(!j.hasOwnProperty(r)){continue}if(!(r in k)){k[r]={}}o=j[r];k[r]=module.helpers.merge_simple_objects(k[r],o)}}}return q};module.helpers.articles_list_to_object=function(k){var m={},p,q,j,r,l=null;for(var n=0,o=k.length;n<o;n++){p=k[n];q=p.site_id;r=p.article_id;l=null;if(!(q in m)){m[q]={}}j=m[q];m[q][r]=module.helpers.merge_simple_objects(j[r]||{},module.helpers.remove_ids_from_article_object(p))}return m};module.helpers.articles_object_to_list=function(n){var m=[],l,p,i,o;for(var k in n){if(n.hasOwnProperty(k)){l=n[k];for(var j in l){if(l.hasOwnProperty(j)){o=l[j];i=module.helpers.merge_simple_objects({article_id:j,site_id:k},o);m.push(i)}}}}return m};module.helpers.jsonp=function(m,l,o){if(typeof(l)==="undefined"){l={}}var n;n=c+Math.floor(Math.random()*d);window[n]=o;l.callback=n;if(m.indexOf("?")<1){m=m+"?"}for(var j in l){if(l.hasOwnProperty(j)){m=m+"&"+escape(j)+"="+escape(l[j])}}var i=document.getElementsByTagName("head")[0];var k=document.createElement("script");k.type="text/javascript";k.src=m;i.appendChild(k)};module.helpers.on_window_load=function(j){var i=j;if(module.loaded===true){j.call(window)}else{j=function(){i.call(window);module.loaded=true}}if(window.addEventListener){window.addEventListener("load",j,false)}else{if(window.attachEvent){window.attachEvent("onload",j)}}};module.helpers.get_script_element=function(){var k=document.getElementsByTagName("script"),l,n;for(var m=0,j=k.length;m<j;m++){l=k[m];n=l.src;if(n&&n.match(NCOMMENTS_SCRIPT_SRC_REGEX)){return l}}};module.helpers.get_domain=function(){var i=module.helpers.get_script_element();if(!i){return}var l=i.getAttribute(b);if(l){return l}var k=i.src,j=k.match(e);if(!j){return}j=j[0];if(j.match(/zor\.livefyre\.com|zor\.fyre\.co/)){return}return j};module.helpers.memoize=function(i){var k="first-time",j;j=function(){if(k!=="first-time"){return k}k=i.apply(this,arguments);return k};return j};module.helpers.getElementsByClassName=function(k,j,l){var i;if(document.getElementsByClassName){i=function(r,u,q){q=q||document;var m=q.getElementsByClassName(r),t=(u)?new RegExp("\\b"+u+"\\b","i"):null,n=[],p;for(var o=0,s=m.length;o<s;o+=1){p=m[o];if(!t||t.test(p.nodeName)){n.push(p)}}return n}}else{if(document.evaluate){i=function(v,y,u){y=y||"*";u=u||document;var o=v.split(" "),w="",s="http://www.w3.org/1999/xhtml",x=(document.documentElement.namespaceURI===s)?s:null,p=[],m,n;for(var q=0,r=o.length;q<r;q+=1){w+="[contains(concat(' ', @class, ' '), ' "+o[q]+" ')]"}try{m=document.evaluate(".//"+y+w,u,x,0,null)}catch(t){m=document.evaluate(".//"+y+w,u,null,0,null)}while((n=m.iterateNext())){p.push(n)}return p}}else{i=function(y,B,x){B=B||"*";x=x||document;var r=y.split(" "),A=[],n=(B==="*"&&x.all)?x.all:x.getElementsByTagName(B),w,t=[],v;for(var s=0,o=r.length;s<o;s+=1){A.push(new RegExp("(^|\\s)"+r[s]+"(\\s|$)"))}for(var q=0,z=n.length;q<z;q+=1){w=n[q];v=false;for(var p=0,u=A.length;p<u;p+=1){v=A[p].test(w.className);if(!v){break}}if(v){t.push(w)}}return t}}}return i(k,j,l)};module.helpers.replace_innerHTML=function(j,k,i){j.innerHTML=j.innerHTML.replace(k,i)};module.helpers.make_replacer=function(k){var i=k;if(module.helpers.isRegExp(k)){i=function(m,l){module.helpers.replace_innerHTML(m,k,l)}}var j;j=function(m){var l,r,p,q;for(var s in m){if(!m.hasOwnProperty(s)){continue}l=m[s];for(var t in l){if(!l.hasOwnProperty(t)){continue}r=l[t];p=r.elements;q=r.total||0;for(var n=0,o=p.length;n<o;n++){i(p[n],q)}}}};return j};module.helpers.remove_ids_from_article_object=function(j){var k={};for(var i in j){if(!j.hasOwnProperty(i)){continue}if(i!=="site_id"&&i!=="article_id"){k[i]=j[i]}}return k};module.helpers.merge_simple_objects=function(m,l){var k={},j;for(var i in m){if(m.hasOwnProperty(i)){k[i]=m[i]}}for(var i in l){if(!l.hasOwnProperty(i)){continue}if(module.helpers.isArray(l[i])&&module.helpers.isArray(k[i])){k[i]=k[i].concat(l[i])}else{k[i]=l[i]}}return k};module.helpers.ensure_correct_articles_object=function(l){for(var j in l){if(!l.hasOwnProperty(j)){continue}var k=l[j];for(var i in k){if(!k.hasOwnProperty(i)){continue}if(!(typeof(k[i])==="object")){k[i]={count:k[i]}}}}return l};module.defaults={};module.defaults.find_elements=function(j){var i=module.helpers.getElementsByClassName(j||DEFAULT_CLASS_NAME);return i};module.defaults.get_article_id=function(i){return i.getAttribute(DEFAULT_ARTICLE_ID_ATTRIBUTE)};module.defaults.get_article_id_legacy=function(i){return i.getAttribute(g)};module.defaults.get_site_id_from_script_src=module.helpers.memoize(function(j){var i=module.helpers.get_script_element();if(typeof(i)==="undefined"){return null}var k=i.src.match("#bn=([^\\&]*)");if(k&&k.length>=2){return k[1]}return null});module.defaults.get_site_id_from_attribute=function(i){return i.getAttribute(DEFAULT_SITE_ID_ATTRIBUTE)};module.defaults.get_articles=function(){var q=module.defaults.find_elements(),o,p={},l,m,k;for(var n=0,j=q.length;n<j;n++){o=q[n];l=module.defaults.get_site_id_from_attribute(o)||module.defaults.get_site_id_from_script_src(o);if(!(l in p)){p[l]={}}m=p[l];k=module.defaults.get_article_id(o);if(!(k in m)){m[k]={elements:[]}}m[k].elements.push(o)}return p};module.defaults.get_articles_legacy=function(){var q=module.defaults.find_elements(LEGACY_CLASS_NAME),o,p={},l,m,k;for(var n=0,j=q.length;n<j;n++){o=q[n];l=module.defaults.get_site_id_from_script_src(o);if(!(l in p)){p[l]={}}m=p[l];k=module.defaults.get_article_id_legacy(o);if(!(k in m)){m[k]={elements:[]}}m[k].elements.push(o)}return p};module.defaults.replace_all=module.helpers.make_replacer(DEFAULT_REPLACER_REGEX);module.fetch=function(m,k,o){var l=Array.prototype.slice.call(arguments),j=0;module.loaded=true;if(l.length===1){k=l[0];m=module.defaults.get_articles()}if(typeof(m)==="function"){m=m()}if(!module.helpers.isArray(m)){m=module.helpers.articles_object_to_list(m)}var p="http://bootstrap.{domain}{path}",n=module.helpers.hash_articles(m);if(n==null){if(typeof(o)==="function"){o()}return}p=p.replace("{domain}",module.helpers.get_domain()||f).replace("{path}",h).replace("{hash}",n);var i=function(r){j=j+1;if(r.status==="ok"){var q=module.helpers.articles_list_to_object(m),r=module.helpers.ensure_correct_articles_object(r.data),s=module.helpers.merge_articles_objects(r,q);k.call(null,s)}else{if(r.code==503&&j<MAX_FETCH_ATTEMPTS){setTimeout(function(){module.helpers.jsonp(p,{},i)},(r.data.wait||DEFAULT_RETRY_TIMEOUT))}}};module.helpers.jsonp(p,{},i)};module.auto_legacy=function(){module.fetch(module.defaults.get_articles_legacy(),module.defaults.replace_all)};module.auto=function(){module.fetch(module.defaults.get_articles(),module.defaults.replace_all)};module.helpers.on_window_load(function(){if(module.loaded){return}var i=module.defaults.get_site_id_from_script_src();if(i){module.auto_legacy()}else{module.auto()}});module.loaded=false;module.run=function(){if(!module.loaded){module.auto()}};a.CommentCount=module};LF.modules.CommentCount(LF);
LF.UserMessage={showErrorMessage:function(b,a){this.showPopupMessage(b,"lf_error",LF.ErrorMessages[a])},showSuccessMessage:function(a,b){this.showPopupMessage(a,"lf_success",b)},showPopupMessage:function(c,a,b){var d=$jl('<div class="'+a+'"><span>'+b+"</span></div>").appendTo(c).hide();d.css("marginLeft",-(d.width()/2)).fadeIn(1000,function(){var e=$jl(this);setTimeout(function(){e.fadeOut(1000,function(){e.remove()})},4000)})},showStreamMaintenanceMessage:function(a){if(typeof(a)==="undefined"||a==""){a=LF.ErrorMessages.maintenance}$jl(".lf_action_bar").before('<div class="lf_widget_message lf_maintenance">'+a+"</div>")},showWidgetMessage:function(b,c){if(typeof(c)!=="string"){if(typeof(LF.ErrorMessages[b])==="string"){c=LF.ErrorMessages[b]}else{c="There was an error"}}var d=document.getElementById("lf_comment_stream"),a=document.getElementById("livefyre");(a||d).innerHTML='<div class="lf_widget_message lf_'+b+'">'+c+"</div>"}};LF.ErrorMessages={approve:"There was an error approving the comment",AuthorizationError:"You're not authorized to post a comment on this conversation",ban:"There was an error banning the user",ban_guest:"You're not allowed to ban a guest user.",ban_yourself:"You can't ban yourself!",comment:"There was an error posting your comment",comment_char_limit:"You have exceeded a 1500 character limit (a limitation of Internet Explorer 7).",comment_char_limit_max:"You have exceeded the 8000 character limit maximum.",comment_empty:"Comment has to contain text.",comments_disabled:"Commenting is disabled for this conversation",CommentsNotAllowedError:"Comments are not allowed on this conversation",disabled:"This Livefyre conversation has been disabled.",duplicate_comment:"As much as you liked your comment, you're not allowed to post it twice.",DuplicateCommentError:"As much as you liked your comment, you're not allowed to post it twice.",EmptyCommentError:"It seems you're attempting to post an empty comment.",flag:"There was an error flagging the comment",flag_own:"You can't flag your own comment.",follow:"There was an error following the conversation",forbidden:"You aren't allowed to do this.",guest_follow:"Guests aren't allowed to follow conversations.<br>Create an account to follow the discussion.",guest_like:"Guests aren't allowed to like comments. Create an account to like this.",GuestCommentsNotAllowedError:"Guest commenting isn't allowed.",GuestTokenExpiredError:"Hey, your session has expired, please log in again.",GuestTokenInvalidError:"Hey, I couldn't verify your session, please log in again.",InvalidCharacterError:"It seems you're attempting to post an invalid character.",like:"Sorry, we couldn't process your like. Please try again in a sec.",like_own:"You can't like your own comment.",link:"There was an error getting the link",MalformedCommentError:"It seems you're attempting to post malformed content.",maintenance:"Livefyre comments are down for maintenance.",NotAuthorizedError:"Your session has expired, please log in again.",remove:"There was an error deleting the comment",unapproved_reply:"You aren't allowed to reply to a unapproved comment",unfollow:"There was an error unfollowing the conversation",unlike:"There was an error unliking this comment",whitelist:"There was an error whitelisting the user",whitelist_guest:"You're not allowed to whitelist a guest user.",WrongDomainError:"This site is misconfigured."};
