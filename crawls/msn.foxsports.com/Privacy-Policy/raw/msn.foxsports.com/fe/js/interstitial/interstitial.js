if(typeof(getComputedStyle)==="undefined"){getComputedStyle=function(a){return a.currentStyle;};}FsApps.Interstitial=function(c){c.bypassCookie=c.bypassCookie||false;if((c.cookie&&c.cookie.name&&!$.jStorage.get(c.cookie.name))||c.bypassCookie){var b={};if($.browser.msie){this.__proto__=this;}for(var a in this.__proto__){b[a]=this.__proto__[a];
}b.init(c);return b;}};FsApps.Interstitial.prototype.root=null;FsApps.Interstitial.prototype.cookieExpires=false;FsApps.Interstitial.prototype.cookieName="";FsApps.Interstitial.prototype.timer=0;FsApps.Interstitial.prototype.timeout=false;FsApps.Interstitial.prototype.animLength=0;FsApps.Interstitial.prototype.template='<div class="fsInterstitial">	<div class="fsInterstitialOverlay"></div>	<div class="fsInterstitialElementWrapper">		<a class="fsInterstitialHeader"></a>		<div class="fsInterstitialElementBorder">			<a class="fsInterstitialElement"></a>			<div class="fsInterstitialClose"></div>		</div>		<a class="fsInterstitialFooter"></a>	</div></div>';
FsApps.Interstitial.prototype.init=function(d){if(d.cookie instanceof Object){this.cookieExpires=d.cookie.expires||false;this.cookieName=d.cookie.name||"interstitialCookie";}document.body.appendChild($(this.template)[0]);this.root=$(".fsInterstitial");this.root.hide();this.root.find(".fsInterstitialClose").click(this.onclickClose.bind(this));
var c=this.root.find(".fsInterstitialElementWrapper");if(d.url!==null){c.find(".fsInterstitialElement").attr("href",d.url);}var a=getComputedStyle(c[0]).width;var b=getComputedStyle(c[0]).height;a=a==="auto"?false:parseInt(a.replace("px",""));b=b==="auto"?false:parseInt(b.replace("px",""));if(d.tagCSS instanceof Object){this.parseCSS(d.tagCSS,a,b);
}else{if(a){c[0].style.marginLeft="-"+(a/2)+"px";}if(b){c[0].style.marginTop="-"+(b/2)+"px";}}if(d.movie instanceof Object){this.insertMovie(d.movie);}if(d.header instanceof Object){this.aTagAppend(".fsInterstitialHeader",d.header);}if(d.footer instanceof Object){this.aTagAppend(".fsInterstitialFooter",d.footer);
}if(d.closetext!==null){this.root.find(".fsInterstitialClose")[0].innerHTML=d.closetext;}this.timer=d.timer||1000;this.animLength=d.animLength||this.timer;this.root.fadeIn(this.animLength,function(){this.timeout=setTimeout(this.timeoutMethod.bind(this),this.timer);}.bind(this));};FsApps.Interstitial.prototype.aTagAppend=function(b,a){var c=this.root.find(b)[0];
c.href=a.url;if(a.target){c.setAttribute("target",a.target);}c.onclick=this.onclickATag.bind(this);};FsApps.Interstitial.prototype.hideRoot=function(){this.root.hide();$.jStorage.set(this.cookieName,"1");$.jStorage.setTTL(this.cookieName,new Date().getTime()+this.cookieExpires);};FsApps.Interstitial.prototype.timeoutMethod=function(){clearTimeout(this.timeout);
if(this.animLength!==0){this.root.fadeOut(this.animLength,function(){this.hideRoot();}.bind(this));}else{this.hideRoot();}};FsApps.Interstitial.prototype.parseCSS=function(d,a,c){for(var b in d){if(d.hasOwnProperty(b)){atag[0].style[b]=d[b];}}if(d.css.width!==null){atag[0].style.marginLeft="-"+(d.width/2)+"px";
}else{if(a){atag[0].style.marginLeft="-"+(a/2)+"px";}}if(d.css.height!==null){atag[0].style.marginTop="-"+(d.height/2)+"px";}else{if(c){atag[0].style.marginTop="-"+(c/2)+"px";}}};FsApps.Interstitial.prototype.clickEvents=function(a){if($.browser.msie){this.returnValue=false;this.cancelBubble=true;}else{a.preventDefault();
a.stopPropagation();}this.timeoutMethod();};FsApps.Interstitial.prototype.onclickClose=function(a){this.clickEvents(a);};FsApps.Interstitial.prototype.onclickATag=function(a){if($.browser.msie){this.cancelBubble=true;}else{a.stopPropagation();}this.timeoutMethod();};FsApps.Interstitial.prototype.insertMovie=function(c){c.flashvars.javascriptCallbackFunction=this.timeoutMethod.bind(this);
if($.browser.msie&&$.browser.version<9){swfobject.embedSWF(c.swfName||"/fe/images/osmf.swf",c.domid||null,c.width||"100",c.height||"100",c.version||"9.0.0",c.swfLocation||null,c.flashvars,c.params||{allowFullScreen:"true",allowScriptAccess:"always"},c.attributes||{name:c.swfName||""},c.callback);}else{var b=document.createElement("source");
b.type=c.type;b.src=c.url;var a=document.createElement("video");a.width=c.width;a.height=c.height;a.appendChild(b);this.root.find(".fsInterstitialElement")[0].appendChild(a);this.root.find("video")[0].addEventListener("ended",this.timeoutMethod.bind(this),false);}};