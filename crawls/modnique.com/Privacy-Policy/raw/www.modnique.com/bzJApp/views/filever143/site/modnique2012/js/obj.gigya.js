var gigyaEventObj,objGigya={uiAction:"",options:{},licenseKey:gigyaLicenseKey,conf:{APIKey:gigyaLicenseKey},hostProtocol:(("https:"==document.location.protocol)?"https://cdns":"http://cdn"),ready:"N",_loadGigyaJS:function(){if(!ObjBrowserDetect.isIE7()){this.ready="Y";}if(this.ready=="Y"){src=this.hostProtocol+".gigya.com/JS/socialize.js?apikey="+this.licenseKey;
document.write("<scr"+"ipt type='text/javascript' src='"+src+"'></scr"+"ipt>");}},_create:function(a){if(this.ready=="Y"){this.uiAction=a;$(".gigyaTitle").show();this._init();}else{$(".gigyaTitle").hide();}},_init:function(){switch(this.uiAction){case"showLoginUI":gigya.services.socialize.showLoginUI(this.conf,this.options);
break;case"getUserInfo":gigya.services.socialize.getUserInfo(this.conf,{callback:this.renderUI});break;case"showShareBarUI":gigya.services.socialize.showShareBarUI(this.conf,this.options);break;}},renderUI:function(b){if(b.user!=null&&b.user.isConnected){$("ul.userLoggedIn #noprofile").css("display","none");
$("ul.userLoggedIn #name").html(b.user.firstName);var a=(("https:"==document.location.protocol)?"https://":"http://");b.user.thumbnailURL=b.user.thumbnailURL.replace("http://",a);if(b.user.thumbnailURL.length>0){$("ul.userLoggedIn #photo").attr("src",b.user.thumbnailURL);}else{$("ul.userLoggedIn #photo").attr("src",a+"cdn.gigya.com/site/images/bsAPI/Placeholder.gif");
}$("ul.userLoggedIn #profile").fadeIn("slow");}},onLoginHandler:function(a){gigyaEventObj=a;querystring="/bzJApp/Proxy.action?actionName=GigyaLogon&method=p&dest=c&sid="+SiteID+"&tid="+TenantID+"&pageload="+RandomNumber+"&params=";querystring=querystring;jQuery.ajax({url:querystring,type:"POST",data:{"gigyaJson":JSON.stringify(a)},cache:false,timeout:120000,success:objGigya.gigyaLoginCallback});
},onLogoutHandler:function(a){},gigyaLoginCallback:function(a){var b=JSON.parse(a);if($("#ajax_dialogReturnUrl").length>0){objGigya.processLoginDialogResponse(b.action);}else{objGigya.proccessDefaultResponse(b.action);}},gigyaLoginCallbackError:function(a){},proccessDefaultResponse:function(a){switch(a){case"LOGGED_IN":redirectUrl=window.location.href;
redirectUrl=redirectUrl.replace("&gigyaEmailLink=Y","");window.location.replace(redirectUrl);break;case"REGISTERED":window.location.replace(gigyaResponse.nextPage);break;case"LINKING_REQUIRED":emailLinkDialog(encodeURIComponent(gigyaEventObj.UID),encodeURIComponent(gigyaEventObj.user.email));break;case"EMAIL_UNAVAILABLE":emailLinkDialog(encodeURIComponent(gigyaEventObj.UID),encodeURIComponent(gigyaEventObj.user.email));
break;}},processLoginDialogResponse:function(a){switch(a){case"LOGGED_IN":$("#login_error_message").text("You are in! Welcome.").show();redirectUrl=window.location.href;window.location.replace(securePrefix+"/bzJApp/ViewDialog.action?pageName=signupComplete&sid="+SiteID+"&tid="+TenantID+"&versionID="+VersionID+"&returnURL="+encodeURIComponent(redirectUrl));
break;case"REGISTERED":window.location.replace(securePrefix+"/bzJApp/ViewDialog.action?pageName=signupComplete&sid="+SiteID+"&tid="+TenantID+"&versionID="+VersionID+"&returnURL="+encodeURIComponent($("#ajax_dialogReturnUrl").val()));break;case"LINKING_REQUIRED":window.location.replace(securePrefix+"/bzJApp/ViewDialog.action?pageName=signupComplete&sid="+SiteID+"&tid="+TenantID+"&versionID="+VersionID+"&gigyaEmailLink=Y"+"&email="+encodeURIComponent(gigyaEventObj.user.email)+"&gigyaUID="+encodeURIComponent(gigyaEventObj.UID));
break;case"EMAIL_UNAVAILABLE":window.location.replace(securePrefix+"/bzJApp/ViewDialog.action?pageName=signupComplete&sid="+SiteID+"&tid="+TenantID+"&versionID="+VersionID+"&gigyaEmailLink=Y"+"&email="+encodeURIComponent(gigyaEventObj.user.email)+"&gigyaUID="+encodeURIComponent(gigyaEventObj.UID));break;
case"LOGIN_FAILED":$("div#login_error_message").text(gigyaResponse.errorMessage);break;}}};objGigya._loadGigyaJS();