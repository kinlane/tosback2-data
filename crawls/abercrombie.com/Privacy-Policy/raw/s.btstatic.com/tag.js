window.BrightTag=function(b){function m(a,b){return Object.prototype.toString.call(a)==="[object "+b+"]"}function v(a){function k(a){var c,d,a=a.split(/; ?/);i={};for(var j=0,g=a.length;j<g;j++){d=a[j];c=d.indexOf("=");var e=i,b=d.slice(0,c);c=d.slice(c+1);c=unescape(c);e[b]=c}}function h(f,c,d){if(f){d=d||{};f=[f+"="+b.Escaper.cookie(c||"")];if((c=d.expires)||0===c)l.isNumber(c)&&(c=(new Date(c)).toGMTString()),f.push("expires="+c);(c=d.path)&&f.push("path="+c);(c=d.domain)&&f.push("domain="+c);
!0===d.secure&&f.push("Secure");!0===d.httponly&&f.push("HttpOnly");d=f.join(";");if(d.length<g)a.cookie=d;else throw{name:"CookieTooLongError",message:"Cookie reached 4096 byte limit"};k(a.cookie)}}function e(a,c){h(a,"",r(c||{},{expires:1}))}var i={},g=4096;k(a.cookie||"");return{get:function(a){return i[a]},set:h,remove:e,findEach:function(a,c){for(key in i)i.hasOwnProperty(key)&&key.match(a)&&c(key,i[key])},clear:function(a){var c=r({},i);for(key in c)e(key,a)}}}function A(a,b){function h(a){a=
a.expires;return 0!==a&&a<=+new Date}function e(c,d){a.setItem(c,d)}function i(a,c,d){c={value:c,expires:d};h(c)||b.setItem(a,JSON.stringify(c))}function g(c){return a.getItem(c)}function f(a){a=b.getItem(a);try{return a?JSON.parse(a):void 0}catch(c){}}function c(a){return(a=f(a))&&(a.hasOwnProperty("value")&&a.hasOwnProperty("expires"))&&!h(a)?a.value:void 0}function d(a,c,d,f,g){for(var b,e,h=0,i=f.length;h<i;h++)if(b=f.key(h),!d[b]&&(d[b]=b.match(a)))void 0!=(e=g(b))&&c(b,e)}return{set:function(a,
c,d){a&&void 0!=c&&(d=d||{},(void 0!=d.expires?i:e)(a,c,d.expires))},get:function(a){return g(a)||c(a)},findEach:function(f,e){var h={};d(f,e,h,a,g);d(f,e,h,b,c)},remove:function(c){a.removeItem(c);b.removeItem(c)},purge:function(){for(var a,c,d=b.length;d--;)a=b.key(d),(c=f(a))&&(c.hasOwnProperty("value")&&c.hasOwnProperty("expires"))&&h(c)&&b.removeItem(a)}}}function B(a){var a=v(a),b=a.set,h=a.remove;a.set=function(a,h,g){g=r(g||{},{path:"/"});0===g.expires&&(g.expires=+new Date("1/1/2038"));b(a,
h,g)};a.remove=function(a,b){h(a,r(b||{},{path:"/"}))};a.purge=function(){};return a}if(b)return bt_log("tried to load tag.js again"),b;var b={pushIfDefined:function(a,b,h){a&&(a.constructor==Array&&null!=b)&&a.push(h||b)},trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},Escaper:{cookie:function(a){return!l.isString(a)?a:a.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&/g,"%26").replace(/'/g,"%27").replace(/;/g,"%3B").replace(/</g,"%3C").replace(/>/g,"%3E")},javascript:function(a){return!l.isString(a)?
a:a.replace(/\\/g,"\\\\").replace(/'/g,"\\x27").replace(/"/g,"\\x22").replace(/\n/g,"\\n").replace(/\r/g,"\\r")}},Random:{integer:function(a){return Math.floor(Math.random()*(a||1E8))}},defaultConfig:function(a){var k=B(document),a=a||window;try{a.localStorage&&a.sessionStorage&&(k=A(sessionStorage,localStorage),k.purge())}catch(h){bt_log("Unable to access DOM storage: "+h)}return{loadOnly:!1,window:window,document:document,host:"s.thebrighttag.com",parentReferrer:top!=self&&self.window?self.window.location.href:
null,docReferrer:document.referrer,data:{},store:k,errorManager:new b.ErrorManager(k)}}},x=b.eval=function(a,b,h){try{return h&&(a+=y(h)),eval.call(window,a)}catch(e){b&&b(e)}},y=function(a){return"\n//at-sourceURL=/BrightTag/"+a.replace(/\s+/g,"_")+".js"},r=b.extend=function(a,b){for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);return a},l=b.Types={isString:function(a){return m(a,"String")},isArray:function(a){return m(a,"Array")},isNumber:function(a){return m(a,"Number")},isBoolean:function(a){return m(a,
"Boolean")},isFunction:function(a){return m(a,"Function")},isObject:function(a){return null===a||void 0===a?!1:m(a,"Object")}},n=b.each=function(a,b){if(a)if(l.isArray(a)||a.length)for(var h=0,e=a.length;h<e;h++)b(a[h],h);else if(l.isObject(a))for(h in a)a.hasOwnProperty(h)&&b(h,a[h])};b.Blab={};b.Blab.Engine=function(a){function b(){q=!0;o=p.length;d("engine:off")}function h(){q=!1;m=0;(p[o++]||b)()}function e(){d("block:finish");h()}function i(c,b){return function(){var f=!1,g=a.createElement("script");
g.onload=g.onreadystatechange=function(){var a;if(!(a=f)){a:{switch(g.readyState){case void 0:case "loaded":case "complete":a=!0;break a}a=!1}a=!a}a||(f=!0,e())};g.onerror=function(){d("block:error",{type:"script",exception:"Problem loading "+c});f||e()};g.src=c;b&&(g.text=b);d("block:start",c);var j=a.getElementsByTagName("script")[0];j.parentNode.insertBefore(g,j)}}function g(c){return function(){try{if(d("block:start",c),l.isString(c))if(a.defaultView){var b=y("tags/"+(w.tagId||"adhoc")+"-inline-b"+
(o-1));a.defaultView.eval.call(window,c+b)}else a.parentWindow?a.parentWindow.execScript(c):d("block:error",{type:"wait",exception:"Could not evaluate wait block ["+c+"]"});else c()}catch(f){d("block:error",{type:"wait",exception:f})}finally{e()}}}function f(a){p.push(a);q&&h();return j}function c(a){p.splice(o+m++,0,a);return j}function d(a){var c=Array.prototype.slice.call(arguments,1);n(s,function(d){var b=[j].concat(c);(d[a]||z).apply(null,b)})}var j=this,z=function(){},s=[],q=!1,w={},p=[],o=
0,m=0;j.run=function(){d("engine:on");h()};j.options=function(a){r(w,a);return j};j.option=function(a){return w[a]};j.script=function(a){return f(i(a))};j.wait=function(a){return f(g(a))};j.preemptScript=function(a,d){return c(i(a,d))};j.preemptWait=function(a){return c(g(a))};j.listen=function(a){s.push(a);(a["engine:listen"]||z).apply(null,[j]);return j}};b.Blab.Group=function(a){function b(a){i.push(a);f&&!c&&e()}function h(a){a.run()}function e(){var a=i[g];a&&(g++,a.listen(d).run())}var i=[],
g=0,f=!1,c=!1,d={"engine:on":function(){c=!0},"engine:off":function(){c=!1;e()}},j=b;this.alwaysQueue=function(){j=b};this.neverQueue=function(){j=h};this.push=function(a){j(a);return a};this.run=function(){f=!0;e()};this.applyListener=function(a){for(var c=g,d=i.length;c<d;c++)i[c].listen(a)};this.toString=function(){return"Group[name="+a+"; running="+f+"]"}};b.Blab.Manager=function(a){function k(a){return g[a]||(g[a]=new i.Group(a))}function h(a){return e.addToGroup(a,e.newEngine())}var e=this,
i=b.Blab,g={undefined:new i.Group(void 0)},f=[];g[void 0].neverQueue();e.addGlobalListener=function(a){f.push(a);n(g,function(d,b){b.applyListener(a)})};e.addToGroup=function(a,d){n(f,function(a){d.listen(a)});return k(a).push(d)};e.newEngine=function(){return new i.Engine(a)};e.group=function(a){return h(a)};e.listen=function(){return h().listen.apply(null,arguments)};e.script=function(){return h().script.apply(null,arguments)};e.wait=function(){return h().wait.apply(null,arguments)};e.run=function(a){k(a).run()};
e.alwaysQueue=function(a){k(a).alwaysQueue()};e.neverQueue=function(a){k(a).neverQueue()};e.setOptions=function(){return h()}};var t,C=[],D=function(a){t.push(a)};b.Blab.SwapwriteListener=function(a){function b(a){a.src?e.preemptScript(a.src,a.innerHTML):a.innerHTML&&e.preemptWait(a.innerHTML)}function h(b){try{a.body.appendChild(b.cloneNode(!0))}catch(f){bt_log("error appending content to body: "+f)}}var e,i=a.createElement("div");this["block:start"]=function(){var b=a;C.push([t,b.write,b.writeln]);
t=[];b.write=b.writeln=D};this["block:finish"]=function(){try{if(0!=t.length){i.innerHTML="<br/>"+t.join("");for(var e=i.childNodes||[],f=1,c=e.length;f<c;f++)("SCRIPT"==e[f].tagName?b:h)(e[f])}}finally{e=a,f=C.pop(),t=f[0],e.write=f[1],e.writeln=f[2]}};this["engine:listen"]=function(a){e=a}};b.Blab.GlobalSwapwriteListener=function(a){var k=b.Blab;this["engine:listen"]=function(b){b.listen(new k.SwapwriteListener(a))}};b.EventsManager=function(){function a(){}function k(a,c,d){g(a,c,function(){(!d||
d())&&b.EventListenerOverride(a,c)})}function h(a){var c=a.readyState;if("loading"==c)return!1;if("complete"==c)return!0;if(a.addEventListener)return"interactive"==c;a:{a=a.documentElement.doScroll||function(){throw"No doScroll";};try{a("left")}catch(d){a=!1;break a}a=!0}return a}function e(a,c,d){var b=this;setTimeout(function(){a()?c.call(b):e(a,c,d)},d)}var i=this,g=i.listen=function(a,c,d){a.addEventListener?a.addEventListener(c,d,!1):a.attachEvent&&a.attachEvent("on"+c,d)};i.domReady=function(a,
c){h(a)?c.call(this):a.addEventListener?g(a,"DOMContentLoaded",c):e(function(){return h(a)},c,1)};i.enablePageReadyOverrides=function(e,c){i.enablePageReadyOverrides=a;"complete"==c.readyState?b.EventListenerOverride(e,"load"):k(e,"load");if(c.addEventListener){var d=c.readyState;"complete"==d||"interactive"==d?b.EventListenerOverride(c,"DOMContentLoaded"):k(c,"DOMContentLoaded")}}};b.EventListenerOverride=function(a,b){function h(a){var e=this;setTimeout(function(){try{a.call(e)}catch(c){bt_log("error overriding "+
b+" event: "+c)}},0)}var e=a.addEventListener?"addEventListener":"attachEvent",i=a[e];a[e]=function(g,f,c){if("function"==typeof f)if(g==b||g=="on"+b)h(f);else try{"addEventListener"==e?i.call(a,g,f,c):i(g,f)}catch(d){bt_log("error proxying "+g+" event: "+d)}}};b.Events=new b.EventsManager;b.EventBindingManager=function(a,k){function h(a,c){n(c,function(c,d){a[a.type+"."+c]=d});k.push(a)}function e(a,b,e){function f(c,b){n(i,function(j){var f=j.name;try{var g=k[j.dbe];if(!g){var i=k,s=j.dbe,w,p=j.dbe,
o=y("event-dbes/"+f+"-page-"+(l||"adhoc")+"-event-"+a);w=d.functionWithAccess(["eventObject","eventData"],"return "+p+";"+o);g=i[s]=w}e.data(f,g.call(c.target,c,b))}catch(n){h({type:"evdbe",message:n.toString(),pageId:l||-1},{name:f,eventName:a})}})}var j={},i=[],k={},l=(b||{}).pageId;j.data=function(a,c){i.push({name:a,dbe:c});return j};j.applyDataBindings=f;j.handler=function(d){var b=c[a];if(b&&0<b.length){var e=Array.prototype.slice.call(arguments,1);f(d,e);g(b,d,e)}};return j}function i(a){var c=
{},b={},e,j,f=[],g=[],i=[];c.execute=function(e,f){r(b,f||{});if(l.isFunction(e))j=e;else if(l.isString(e))a:{try{var g=y("events/"+a+"-tag-"+(b.tagId||"adhoc"));j=d.functionWithAccess(["eventObject","eventData"],e+g);break a}catch(i){h({type:"evparse",message:i.toString(),tagId:b.tagId||-1},{eventName:a})}j=void 0}else bt_log("when.execute: unknown action: "+e);return c};c.evaluate=function(a){e=a;return c};c.fire=function(a){f.push(a);return c};c.appendData=function(a){g.push(a);return c};c.appendJs=
function(a){i.push(a);return c};c.trigger=function(c,d,k){var l,s=e;l=function(a){bt_log("Invalid post-event conditional fire expression: "+s+", exception = "+a)};if(!e||x(e,l)){try{j&&j.call(c.target,c,d)}catch(m){h({type:"evwait",message:m.toString(),tagId:b.tagId||-1},{eventName:a})}0<f.length&&(k.cf(f),n(g,function(a){k.appendData(a)}),n(i,function(a){k.appendJs(a)}))}};return c}function g(a,c,d){var e=b.instance.serverURL();n(a,function(a){a.trigger(c,d,e)});e.hasConditions()&&b.Blab.script(e.asString())}
var f={},c={},d=b.jQueryLoader(a,"BrightTag.jQuery");f.Binder=e;var j=/^direct\//i;f.bind=function(a,c,f,g){var h=e(a,g,b.instance);d.ensureJQuery(function(){var a=d.getJQuery()(c);a.live&&c.constructor===String&&!j.test(f)?a.live(f,h.handler):a.bind(f.split(j).pop(),h.handler)});return h};f.EventAction=i;f.when=function(a){var d=i(a),b=c[a];b||(b=c[a]=[]);b.push(d);return d};f.executeActions=g;return f};b.HTTP={};b.HTTP.Cookie=v;b.HTTP.DOMStorage=A;b.HTTP.CookieStorage=B;b.HTTP.QueryString=function(a){function b(a){if(a&&
l.isString(a)){var d=a.split("&"),a={};n(d,function(d){if(""!==d){var b=d.split("="),d=decodeURIComponent(b[0]),b=b[1]&&decodeURIComponent(b[1].replace(/\+/g," "));(null==a[d]?a[d]=[]:a[d]).push(b)}})}return a}function h(a,d){var b=[];n(a,function(a){if(l.isObject(a))return!1;a=null==a||""===a?d:a;(l.isString(a)||l.isNumber(a)||l.isBoolean(a))&&b.push(a)});return b}function e(a){return!l.isArray(a)?[a]:a}function i(a,d){var b=encodeURIComponent(a),e=encodeURIComponent(d);return b+"="+e}var g=this,
f={};r(f,b(a));g.param=function(a){a=f[a]||[""];return 1<a.length?a:a[0]};g.params=function(){return f};g.appendParam=function(a,d){if(a){var b=h(e(d));0<b.length&&(f[a]=(null==f[a]?f[a]=[]:f[a]).concat(b))}return this};g.replaceParam=function(a,b){if(a){var j=h(e(b));0<j.length&&(f[a]=(f[a]=[]).concat(j))}return this};g.appendParams=function(a){n(a,g.appendParam);return this};g.alwaysAppendParam=function(a,b){if(a){var j=h(e(b),"");0<j.length&&(f[a]=(null==f[a]?f[a]=[]:f[a]).concat(j))}return this};
g.alwaysReplaceParam=function(a,b){if(a){var j=h(e(b),"");0<j.length&&(f[a]=(f[a]=[]).concat(j))}return this};g.alwaysAppendParams=function(a){n(a,g.alwaysAppendParam);return this};g.appendPartialQueryString=function(a){a&&g.alwaysAppendParams(b(a));return this};g.deleteParam=function(a){delete f[a]};g.toString=function(){var a=[];n(f,function(b,e){n(e,function(e){a.push(i(b,e))})});return a.join("&")}};b.HTTP.URL=function(a){var k=this,h,e,i,g=a.indexOf("#");-1<g&&(i=a.substring(g+1),a=a.substring(0,
g));g=a.indexOf("?");-1<g&&(e=a.substring(g+1),a=a.substring(0,g));h=a;a=new b.HTTP.QueryString(e);r(k,a);k.queryString=a.toString;k.toString=function(){var a=k.queryString();return h+(a.length>0?"?"+a:"")};k.asString=k.toString;k.fragment=function(){return i}};b.ServerURL=function(a){function k(a,b){b&&b.findEach(a,function(a,b){e.appendParam(a,b)})}function h(a,b){return function(c){bt_log("invalid "+a+" expression: "+b+", exception = "+c)}}var e=this,i=a.window,g=a.parentReferrer,f=a.referrer;
b.HTTP.URL.call(this,0===a.host.length?"":(a.host.match("^[a-z0-9+.-]+://.+")?"":"//")+a.host+"/tag");e.appendParams({site:a.site,referrer:f,docReferrer:a.docReferrer,mode:a.mode});f!==g&&e.appendParam("parentReferrer",g);k(/^btps\..+/,new b.HTTP.Cookie(a.document));k(/^btpdb\..+/,a.store);e.appendData=function(a){var b=bt_data(a),b=l.isArray(b)||l.isObject(b)?i.JSON.stringify(b):b;return e.alwaysReplaceParam("_cb_"+("bt_data('"+a+"')"),b)};e.appendJs=function(a){var b=h("client binding expression",
a);return e.alwaysReplaceParam("_cb_"+a,x(a,b))};e.cf=function(a){l.isArray(a)||(a=[a]);var b=e.param("cf");b&&(a=Array(b).concat(a));e.replaceParam("cf",a.join());return e};e.addCf=function(a,b){if(!x(b,h("conditional fire",b,"tags/"+a+"-cf.js")))return!1;var c=e.param("cf");e.replaceParam("cf",c?c+","+a:a);return!0};var c=e.toString();e.hasConditions=function(){return c!=e.toString()}};b.Page=function(a,k){function h(a){n(l.isArray(a)?a:[a],function(a){l.isFunction(a)?a():q.write('<script type="text/javascript" src="'+
a+'"><\/script>')})}function e(a){var b=p.group().options({tagId:-2});n(l.isArray(a)?a:[a],function(a){(l.isFunction(a)?b.wait:b.script)(a)})}function i(a){q.write(a)}function g(a,b){p.group(!u?"domready":void 0).options(b&&b.tagId?{tagId:b.tagId}:{}).wait(function(){q.write(a)})}function f(a){n(a,function(a){if(a.name){var b=r({},a);delete b.name;delete b.value;t.set(a.name,a.value,b)}})}function c(b){o.hasErrors()&&(b.appendParam("errors",o.toJSON()),2083<b.toString().length&&(b.deleteParam("errors"),
o.tooManyErrors(),b.appendParam("errors",o.toJSON())));o.reset({site:a.site,referrer:a.referrer||q.location.href})}var d=this,j=void 0,m=a.data||{},s=void 0,q=a.document||{},w=a.window||{},p=a.blab||b.Blab,o=a.errorManager,t=a.store,u=!1;d.referrer=a.referrer;d.parentReferrer=a.parentReferrer;d.docReferrer=a.docReferrer;d.site=a.site;d.host=a.host;o&&p.addGlobalListener(o);p.run("serializer");d.load=function(){var a=Array.prototype.slice.call(arguments,0);n(a,function(a){l.isFunction(a)?p.addToGroup("serializer",
p.newEngine().wait(function(){a(d)})):l.isObject(a)&&a.src?d.library(a.src,a.options):l.isString(a)&&d.library(a)})};d.library=function(a,b){p.addToGroup("serializer",p.newEngine().options(b||{}).script(a))};var v="sync"===a.mode;d.writeScript=v?h:e;d.appendContent=v?i:g;d.domReady=function(){u=!0;p.addGlobalListener(new p.GlobalSwapwriteListener(q));"sync"===a.mode&&(d.writeScript=e,d.appendContent=g);p.run("domready")};d.parameter=function(a){void 0==j&&(j=new b.HTTP.URL(q.location.href));return j.param(a)};
d.meta=function(a){s||(s={},n(q.getElementsByTagName("meta"),function(a){s[a.getAttribute("name")]=a.getAttribute("content")}));return s[a]||""};d.cookie=function(a){return(new b.HTTP.Cookie(q)).get(a)||""};d.data=function(a,b){if(void 0!==b)return m[a]=b;b=m[a];return void 0==b?"":b};d.dbe=function(a,b,c){d.data(a,x(b,function(b){o&&o.push({type:"dbe",message:b.toString(),"dbe.name":a,pageId:(c||{}).pageId||-1})},"page-dbes/"+a+"-page-"+(c&&c.pageId||"adhoc")))};d.errors=function(a){o.configure(a)};
d.store=t?f:function(){};d.serverURL=function(){return new b.ServerURL(a)};d.defaultBaseUri=function(){return("https:"==q.location.protocol?"https:":"http:")+"//s.btstatic.com/"};d.baseUri=function(){var a=/\btag(\.[^.]+|-n)?\.js(#.*)?$/;return k&&k.src&&k.src.replace(a,"")||d.defaultBaseUri()};d.primary=function(){function a(){var b=d.serverURL();o&&(o.processStoredErrors(),c(b));return b.toString()}var b=[];w.JSON?b.push(a()):(b.push(d.baseUri()+"json2.js"),b.push(function(){d.writeScript(a())}));
d.writeScript(b)};d.secondary=function(a){var b=d.serverURL(),e=b.toString();a(b);b.toString()!=e&&(o&&c(b),d.writeScript(b.toString()))}};b.ErrorManager=function(a,b){function h(b){d.push(e(b));a.set(j,i.toJSON())}function e(a){var b=l.isObject(a)?r({},a):{};b.type=b.type||"unknown";b.message=b.message||a.toString();b.timestamp=m;return b}if(!a)throw"ErrorManager requires a store";var i={},g,f,c=!0,d=[],j="__bterr",m=+new Date,n=i.configure=function(a){a.hasOwnProperty("enabled")&&(c=a.enabled);
a.hasOwnProperty("timestamp")&&(m=a.timestamp);a.hasOwnProperty("site")&&(g=a.site);a.hasOwnProperty("referrer")&&(f=a.referrer)};b&&n(b);i.reset=function(b){b&&n(b);d=[];a.remove(j)};i.hasErrors=function(){return 0<d.length};i.toArray=function(){return d};i.toJSON=function(){try{return JSON.stringify({site:g,referrer:f,errors:d})}catch(a){bt_log("problem serializing errors: "+a.message)}};i.push=function(a){bt_log("error: "+JSON.stringify(a));if(c&&a&&!(-1>a.tagId||-1>a.pageId))try{h(a)}catch(b){if("CookieTooLongError"!=
b.name)throw b;i.tooManyErrors()}};i.tooManyErrors=function(){i.reset();h({type:"runtime",message:"Too many errors"})};i["block:error"]=function(a,b){if(b){var c=b.type,d=b.exception||b,e=a.option("tagId")||-1;i.push({type:c,message:d.toString(),tagId:e})}};i.processStoredErrors=function(){var b=a.get(j);if(b)try{var c=JSON.parse(b);g=c.site;f=c.referrer;l.isArray(c.errors)&&(d=d.concat(c.errors))}catch(e){bt_log("problem reading stored errors: "+e.message)}};return i};b.CookieSyncEngine=function(a){var k=
{fn:function(a){a()},next:null},h=k,e=a.document,i=function(a){if("function"!=typeof a)return!1;a={fn:a,next:null};h=h.next=a;return!0},g=function(){if(k){var a=k.fn;k=k.next;a(g)}},f=g;b.Events.listen(a,"load",f);return{sync:f,push:function(a){return i(a)},pushImage:function(b){return i(function(d){var e=new a.Image;e.onerror=e.onload=d;e.src=b})},pushIframe:function(a){return i(function(b){var f=e.createElement("iframe");f.onerror=f.onload=b;f.width=0;f.height=0;f.style.border=0;f.src=a;e.body.appendChild(f)})}}};
b.jQueryLoader=function(a,k){return new function(a,e){function i(a){j.wait(a)}function g(a){function e(){c=b.jQuery;i(a)}d="var $ = BrightTag.$; ";b.jQuery?e():j.script(b.instance.baseUri()+"BrightTag.jquery-1.5.1.js").wait(e)}var f={},c,d="",j=b.Blab.group(e);f.getJQuery=function(){return c};f.functionWithAccess=function(a,b){return new Function(a,d+b)};f.ensureJQuery=function(d){f.ensureJQuery=i;c=a.jQuery;(c?i:g)(d);b.Blab.run(e)};return f}(a,k)};b.Main=function(a){var k=b.Events,h;a:{h=/\/tag(\.[^.]+|-n)?\.js(#.*)?$/;
for(var e=a.document.getElementsByTagName("script"),i=e.length-1;-1<i;i--){var g=e[i];if(h.test(g.src)){h=g;break a}}h=void 0}if(h){if(e=(new b.HTTP.URL(h.src)).fragment())e=(new b.HTTP.QueryString(e)).params(),n(e,function(b,c){a[b]=c[0]});e=function(a){bt_log("configuration error: "+a)};i=b.trim(h.innerHTML);0!==i.length&&r(a,x("(\n"+i+"\n)",e,"site-config"))}if(void 0!=a.site){k.enablePageReadyOverrides(a.window,a.document);try{var f=new b.Page(a,h);k.domReady(a.document,function(){f.domReady()});
a.loadOnly||f.primary();return f}catch(c){bt_log("execution error: "+c)}}};var u=b.defaultConfig();r(b.Blab,new b.Blab.Manager(u.document));b.$LAB=b.Blab;b.EventBinding=b.EventBindingManager(u.window,u.errorManager);b.CookieSync=b.CookieSyncEngine(u.window);b.instance=b.Main(u);void 0==b.instance&&setTimeout(function(){void 0==b.instance&&(b.instance=b.Main(u))},0);return b}(window.BrightTag);function bt_parameter(b){return BrightTag.instance.parameter(b)}
function bt_meta(b){return BrightTag.instance.meta(b)}function bt_cookie(b){return BrightTag.instance.cookie(b)}function bt_data(b,m){return BrightTag.instance.data(b,m)}window.bt_data_escaped=bt_data;function bt_log(b){window.console&&console.log&&console.log("BrightTag: "+b)}var bt_handle_exception=bt_log,_bt_url_prefix,_bt_referrer,_bt_site,_bt_mode;
function btServe(b){if(void 0==BrightTag.instance){var m=BrightTag,v=m.extend({referrer:_bt_referrer,site:_bt_site,mode:_bt_mode},m.defaultConfig());void 0!=_bt_url_prefix&&(v.host=_bt_url_prefix);m.instance=m.Main(m.extend(v,b||{}))}};
