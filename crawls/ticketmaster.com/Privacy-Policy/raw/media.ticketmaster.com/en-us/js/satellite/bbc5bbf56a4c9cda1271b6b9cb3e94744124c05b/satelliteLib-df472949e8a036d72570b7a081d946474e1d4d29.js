// Satellite Library
// Property: Ticketmaster Host Sites
// All code and conventions are protected by copyright
// Search Discovery, Inc.
(function(e,t,n){function a(){o.addEventHandler(e,"orientationchange",a.orientationChange)}function f(){this.rules=o.filter(o.rules,function(e){return e.event==="elementexists"})}function l(){if(!("ongestureend"in e&&"ontouchend"in e))return;var n=l.currentZoom(),r,i=o.settings.zoomChangeDelay||1e3,s;o.addEventHandler(t,"gestureend",function(e){r=+(new Date),setTimeout(function(){var e=l.currentZoom();if(e===n)return;n=e,s&&clearTimeout(s),s=setTimeout(function(){s=null;var e=l.currentZoom();n===e&&o.onEvent({type:"zoomchange",method:"pinch",zoom:e.toFixed(2),target:t})},i)},50)}),o.addEventHandler(t,"touchend",function(e){if(r&&+(new Date)-r<50)return;setTimeout(function(){var e=l.currentZoom();if(e===n)return;n=e,s&&clearTimeout(s),s=setTimeout(function(){s=null;var e=l.currentZoom();n===e&&o.onEvent({type:"zoomchange",method:"double tap",zoom:e.toFixed(2),target:t})},i)},250)})}function c(){this.rules=o.filter(o.rules,function(e){return e.event.substring(0,11)==="videoplayed"}),this.eventHandler=o.bind(this.onUpdateTime,this)}function h(){var e=this.eventRegex=/^hover\(([0-9]+)\)$/,t=this.rules=[];o.each(o.rules,function(n){var r=n.event.match(e);r&&t.push([Number(n.event.match(e)[1]),n.selector])})}function p(){function n(){var n=e.twttr;n&&n.events&&n.events.bind&&n.events.bind("tweet",function(e){e&&(o.notify("tracking a tweet button",1),o.onEvent({type:"twitter.tweet",target:t}))})}o.domReady(n)}function d(){function n(){var n=e.FB;if(n&&n.Event&&n.Event.subscribe)try{n.Event.subscribe("edge.create",function(){o.notify("tracking a facebook like",1),o.onEvent({type:"facebook.like",target:t})}),n.Event.subscribe("edge.remove",function(){o.notify("tracking a facebook unlike",1),o.onEvent({type:"facebook.unlike",target:t})}),n.Event.subscribe("message.send",function(){o.notify("tracking a facebook share",1),o.onEvent({type:"facebook.send",target:t})})}catch(r){}}o.domReady(n)}function v(t){t=t||o.rules,this.rules=o.filter(t,function(e){return e.event==="inview"}),this.elements=[],this.eventHandler=o.bind(this.track,this),o.addEventHandler(e,"scroll",this.eventHandler),o.addEventHandler(e,"load",this.eventHandler)}function m(e){this.settings=e,this.varBindings={},this.events=[],this.products=[]}function g(){this.asyncScriptCallbackQueue=[],this.argsForBlockingScripts=[]}function y(e){this.settings=e}function b(e){this.settings=e,o.notify("Test & Target: Initializing",1),this.styleElements={},this.myInitialize()}var r=Object.prototype.toString,s=e._satellite&&e._satellite.override,o={$data:function(e,t,r){var i="__satellite__",s=o.dataCache,u=e[i];u||(u=e[i]=o.uuid++);var a=s[u];a||(a=s[u]={});if(r===n)return a[t];a[t]=r},uuid:1,dataCache:{},isArray:Array.isArray||function(e){return r.apply(e)==="[object Array]"},isObject:function(e){return e!=null&&!o.isArray(e)&&typeof e=="object"},isString:function(e){return typeof e=="string"},isRegex:function(e){return e instanceof RegExp},each:function(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e)},map:function(e,t,n){var r=[];for(var i=0,s=e.length;i<s;i++)r.push(t.call(n,e[i],i,e));return r},filter:function(e,t,n){var r=[];for(var i=0,s=e.length;i<s;i++){var o=e[i];t.call(n,o,i,e)&&r.push(o)}return r},any:function(e,t,n){for(var r=0,i=e.length;r<i;r++){var s=e[r];if(t.call(n,s,r,e))return!0}return!1},every:function(e,t,n){var r=!0;for(var i=0,s=e.length;i<s;i++){var o=e[i];r=r&&t.call(n,o,i,e)}return r},contains:function(e,t){return o.indexOf(e,t)!==-1},indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=e.length;n--;)if(t===e[n])return n;return-1},find:function(e,t,n){var r=[];for(var i=0,s=e.length;i<s;i++){var o=e[i];if(t.call(n,o,i,e))return o}return null},textMatch:function(e,t){return typeof t=="string"?e===t:t instanceof RegExp?t.test(e):!1},bind:function(e,t){return function(){return e.apply(t,arguments)}},throttle:function(e,t){var n=null;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(r,i)},t)}},domReady:function(e){function h(e){c=1;while(e=n.shift())e()}var n=[],r,i=!1,s=t,o=s.documentElement,u=o.doScroll,a="DOMContentLoaded",f="addEventListener",l="onreadystatechange",c=/^loade|^c/.test(s.readyState);return s[f]&&s[f](a,r=function(){s.removeEventListener(a,r,i),h()},i),u&&s.attachEvent(l,r=function(){/^c/.test(s.readyState)&&(s.detachEvent(l,r),h())}),e=u?function(t){self!=top?c?t():n.push(t):function(){try{o.doScroll("left")}catch(n){return setTimeout(function(){e(t)},50)}t()}()}:function(e){c?e():n.push(e)}}(),loadScript:function(e,n){var r=t.createElement("script");o.scriptOnLoad(e,r,n),r.src=e,t.getElementsByTagName("head")[0].appendChild(r)},scriptOnLoad:function(e,t,n){function r(e){e&&o.logError(e),n&&n(e)}"onload"in t?(t.onload=function(){r()},t.onerror=function(){r(new Error("Failed to load script "+e))}):"readyState"in t&&(t.onreadystatechange=function(){var e=t.readyState;if(e==="loaded"||e==="complete")t.onreadystatechange=null,r()})},pushAsyncScript:function(e){o.tools["default"].pushAsyncScript(e)},pushBlockingScript:function(e){o.tools["default"].pushBlockingScript(e)},addEventHandler:e.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},preventDefault:e.addEventListener?function(e){e.preventDefault()}:function(e){e.returnValue=!1},stopPropagation:function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},containsElement:function(e,t){return e.contains?e.contains(t):!!(e.compareDocumentPosition(t)&16)},matchesCss:function(n){var r=n.matchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||n.oMatchesSelector||n.msMatchesSelector;return r?function(n,i){if(i===t||i===e)return!1;try{return r.call(i,n)}catch(s){return!1}}:n.querySelectorAll?function(e,t){var n=t.parentNode;if(!n)return!1;try{var r=t.parentNode.querySelectorAll(e);for(var i=r.length;i--;)if(r[i]===t)return!0}catch(s){}return!1}:function(e,t){try{return o.Sizzle.matches(e,[t]).length>0}catch(n){return!1}}}(t.documentElement),cssQuery:function(e){return e.querySelectorAll?function(t,n){var r;try{r=e.querySelectorAll(t)}catch(i){r=[]}n(r)}:function(e,t){if(o.Sizzle){var n;try{n=o.Sizzle(e)}catch(r){n=[]}t(n)}else o.sizzleQueue.push([e,t])}}(t),inherit:function(e,t){var n=new t;n.constructor=e,e.prototype=n},extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},toArray:function(){try{var e=Array.prototype.slice;return e.call(t.documentElement.childNodes,0)[0].nodeType,function(t){return e.call(t,0)}}catch(n){return function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t}}}(),equalsIgnoreCase:function(e,t){return e==null?t==null:t==null?!1:String(e).toLowerCase()===String(t).toLowerCase()}};o.availableTools={},o.availableEventEmitters=[],o.fireOnceEvents=["condition","elementexists"],o.initEventEmitters=function(){o.eventEmitters=o.map(o.availableEventEmitters,function(e){return new e})},o.eventEmitterBackgroundTasks=function(){o.each(o.eventEmitters,function(e){"backgroundTasks"in e&&e.backgroundTasks()})},o.initTools=function(e){var t={"default":new g},n=o.settings.euCookieName||"sat_track";for(var r in e){var i,s,u;i=e[r];if(i.euCookie){var a=o.readCookie(n)!=="true";if(a)continue}s=o.availableTools[i.engine],u=new s(i),u.id=r,t[r]=u}return t},o.preprocessArguments=function(e,t,n,r){function i(e){var r={};for(var s in e)if(e.hasOwnProperty(s)){var u=e[s];o.isObject(u)?r[s]=i(u):r[s]=o.replace(e[s],t,n)}return r}if(!e)return e;var s=[];for(var u=0,a=e.length;u<a;u++){var f=e[u];typeof f=="string"?(f=o.replace(f,t,n),r&&(f=f.toLowerCase())):f&&f.constructor===Object&&(f=i(f)),s.push(f)}return s},o.execute=function(e,t,n,r){function i(i){var s=r[i||"default"];if(!s)return;try{s.triggerCommand(e,t,n)}catch(u){o.logError(u)}}if(_satellite.settings.hideActivity)return;r=r||o.tools;if(e.engine){var s=e.engine;for(var u in r){var a=r[u];a.settings&&a.settings.engine===s&&i(u)}}else e.tool instanceof Array?o.each(e.tool,function(e){i(e)}):i(e.tool)},o.notify=e.console?function(e,t){if(o.settings.notifications)switch(t){case 1:case 2:case 3:console.log("SATELLITE: "+e);break;case 4:console.warn("SATELLITE: "+e);break;case 5:console.error("SATELLITE: "+e);break;default:console.log("SATELLITE: Notify called with incorrect priority.")}}:function(){},o.getObjectProperty=function(e,t){var r=t.split("."),i=e;for(var s=0,o=r.length;s<o;s++){if(i==null)return n;i=i[r[s]]}return i},o.setVar=function(){var e=o.data.customVars;e==null&&(o.data.customVars={},e=o.data.customVars);if(typeof arguments[0]=="string"){var t=arguments[0];e[t]=arguments[1]}else if(arguments[0]){var n=arguments[0];for(var r in n)e[r]=n[r]}},o.dataElementSafe=function(e,t){if(arguments.length>2){var n=arguments[2];t==="pageview"?o.dataElementSafe.pageviewCache[e]=n:t==="session"?o.setCookie("_sdsat_"+e,n):t==="visitor"&&o.setCookie("_sdsat_"+e,n,730)}else{if(t==="pageview")return o.dataElementSafe.pageviewCache[e];if(t==="session"||t==="visitor")return o.readCookie("_sdsat_"+e)}},o.dataElementSafe.pageviewCache={},o.realGetDataElement=function(t){var n;return t.selector?o.hasSelector&&o.cssQuery(t.selector,function(e){if(e.length>0){var r=e[0];t.property==="text"?n=r.innerText||r.textContent:n=r[t.property]}}):t.queryParam?n=o.getQueryParam(t.queryParam):t.cookie?n=o.readCookie(t.cookie):t.jsVariable?n=o.getObjectProperty(e,t.jsVariable):t.customJS&&(n=t.customJS()),n},o.getDataElement=function(e,t,r){r=r||o.dataElements[e];var i=o.realGetDataElement(r);return i===n&&r.storeLength?i=o.dataElementSafe(e,r.storeLength):i!==n&&r.storeLength&&o.dataElementSafe(e,r.storeLength,i),i===n&&!t&&(i=r["default"]),i},o.getVar=function(r,i,s){var u=o.data.customVars,a=s?s.target||s.srcElement:null,f,l,c={URI:o.data.URI,uri:o.data.URI,protocol:t.location.protocol,hostname:t.location.hostname};if(o.dataElements&&r in o.dataElements)return o.getDataElement(r);l=c[r];if(l===n){if(r.substring(0,5)==="this.")return r=r.slice(5),o.getObjectProperty(i,r);if(r.substring(0,6)==="event.")return r=r.slice(6),o.getObjectProperty(s,r);if(r.substring(0,7)==="target.")return r=r.slice(7),o.getObjectProperty(a,r);if(r.substring(0,7)==="window.")return r=r.slice(7),o.getObjectProperty(e,r);if(r.substring(0,6)==="param.")return r=r.slice(6),o.getQueryParam(r);if(f=r.match(/^rand([0-9]+)$/)){var h=Number(f[1]),p=(Math.random()*(Math.pow(10,h)-1)).toFixed(0);return Array(h-p.length+1).join("0")+p}l=o.getObjectProperty(u,r)}return l},o.getVars=function(e,t,n){var r={};return o.each(e,function(e){r[e]=o.getVar(e,t,n)}),r},o.replace=function(e,t,n){return typeof e!="string"?e:e.replace(/%(.*?)%/g,function(e,r){var i=o.getVar(r,t,n);return i==null?e:i})},o.searchVariables=function(e,t,n){if(!e||e.length===0)return"";var r=[];for(var i=0,s=e.length;i<s;i++){var u=e[i],a=o.getVar(u,t,n);r.push(u+"="+escape(a))}return"?"+r.join("&")},o.fireRule=function(e,t,n){var r=e.trigger;if(!r)return;for(var i=0,s=r.length;i<s;i++){var u=r[i];o.execute(u,t,n)}o.contains(o.fireOnceEvents,e.event)&&(e.expired=!0)},o.isLinked=function(e){for(var t=e;t;t=t.parentNode)if(t.nodeName.toLowerCase()=="a")return!0;return!1},o.firePageLoadEvent=function(e){var n=t.location,r={type:e,target:n},i=o.pageLoadRules;for(var s=i.length;s--;){var u=i[s];o.ruleMatches(u,r,n)&&(o.notify('Rule "'+u.name+'" fired.',1),o.fireRule(u,n,r),i.splice(s,1))}for(var a in o.tools){var f=o.tools[a];f.endPLPhase(e)}},o.track=function(e){e=e.replace(/^\s*/,"").replace(/\s*$/,"");for(var t=0;t<o.directCallRules.length;t++){var n=o.directCallRules[t];if(n.name===e){o.notify('Direct call Rule "'+e+'" fired.',1),o.fireRule(n,location,{type:e});return}}o.notify('Direct call Rule "'+e+'" not found.',1)},o.basePath=function(){return o.data.host?(t.location.protocol==="https:"?"https://"+o.data.host.https:"http://"+o.data.host.http)+"/":this.settings.basePath},o.setLocation=function(t){e.location=t},o.parseQueryParams=function(e){if(e==="")return{};var t={},n=e.substring(1).split("&");return o.each(n,function(e){e=e.split("="),t[e[0]]=e[1]}),t};var u=o.parseQueryParams(e.location.search);o.getQueryParam=function(e){return u[e]},o.readCookie=function(e){var r=e+"=",i=t.cookie.split(";");for(var s=0;s<i.length;s++){var o=i[s];while(o.charAt(0)==" ")o=o.substring(1,o.length);if(o.indexOf(r)===0)return o.substring(r.length,o.length)}return n},o.setCookie=function(e,n,r){var i;if(r){var s=new Date;s.setTime(s.getTime()+r*24*60*60*1e3),i="; expires="+s.toGMTString()}else i="";t.cookie=e+"="+n+i+"; path=/"},o.removeCookie=function(e){o.setCookie(e,"",-1)},o.propertiesMatch=function(e,t){var r=o.propertiesMatch.fallbacks;if(e)for(var i in e){var s=e[i],u;i in t?u=t[i]:i in r&&r[i]in t?u=t[r[i]]:u=t.getAttribute?t.getAttribute(i):n;if(typeof s=="string"&&s!==u)return!1;if(s instanceof RegExp&&!s.test(u))return!1}return!0},o.propertiesMatch.fallbacks={innerText:"textContent"},o.ruleMatches=function(e,n,r,i){var s=t.location,u=e.condition,a=e.conditions,f=e.property,l=n.type,c=e.value,h=n.target||n.srcElement,p=r===h;if(e.event!==l)return!1;if(e.isDefault&&i>0)return!1;if(e.expired)return!1;if(l==="inview"&&n.inviewDelay!==e.inviewDelay)return!1;if(!p&&(e.bubbleFireIfParent===!1||i!==0&&e.bubbleFireIfChildFired===!1))return!1;if(e.selector&&!o.matchesCss(e.selector,r))return!1;if(!o.propertiesMatch(f,r))return!1;if(c!=null)if(typeof c=="string"){if(c!==r.value)return!1}else if(!c.test(r.value))return!1;if(u)try{if(!u.call(r,n,h))return o.notify('Condition for rule "'+e.name+'" not met.',1),!1}catch(d){return o.notify('Condition for rule "'+e.name+'" not met. Error: '+d.message,1),!1}if(a){var v=o.find(a,function(t){try{return!t.call(r,n,h)}catch(i){return o.notify('Condition for rule "'+e.name+'" not met. Error: '+i.message,1),!0}});if(v)return o.notify("Condition "+v.toString()+' for rule "'+e.name+'" not met.',1),!1}return!0},o.evtHandlers={},o.whenEvent=function(e,t){var n=o.evtHandlers;n[e]||(n[e]=[]),n[e].push(t)},o.handleEvent=function(e){if(o.$data(e,"eventProcessed"))return;var t=e.type.toLowerCase(),n=e.target||e.srcElement,r=0,i=o.rules,s=o.tools,u=o.evtHandlers[e.type];u&&o.each(u,function(t){t(e)}),n&&n.nodeName?o.notify("detected "+t+" on "+n.nodeName,1):o.notify("detected "+t,1);for(var a=n;a;a=a.parentNode){var f=!1;o.each(i,function(t){o.ruleMatches(t,e,a,r)&&(o.notify('Rule "'+t.name+'" fired.',1),o.fireRule(t,a,e),r++,t.bubbleStop&&(f=!0))});if(f)break}o.$data(e,"eventProcessed",!0)},o.onEvent=t.querySelectorAll?function(e){o.handleEvent(e)}:function(){var e=[],t=function(t){t.selector?e.push(t):o.handleEvent(t)};return t.pendingEvents=e,t}(),o.registerEvents=function(e,t){for(var n=t.length-1;n>=0;n--){var r=t[n];o.$data(e,r+".tracked")||(o.addEventHandler(e,r,o.onEvent),o.$data(e,r+".tracked",!0))}},o.registerEventsForTags=function(e,n){for(var r=e.length-1;r>=0;r--){var i=e[r],s=t.getElementsByTagName(i);for(var u=s.length-1;u>=0;u--)o.registerEvents(s[u],n)}},o.setListeners=function(){o.registerEvents(t,["click","submit"])},o.setFormListeners=function(){o.registerEventsForTags(["input","select","textarea","button"],["select","change","focus","blur","keypress"])},o.setVideoListeners=function(){o.registerEventsForTags(["video"],["play","pause","ended","volumechange","stalled","timeupdate","loadeddata"])},o.readStoredSetting=function(t){return e.localStorage?(t="sdsat_"+t,e.localStorage.getItem(t)):null},o.loadStoredSettings=function(){var e=o.readStoredSetting("debug"),t=o.readStoredSetting("hide_activity");e&&(o.settings.notifications=e==="true"),t&&(o.settings.hideActivity=t==="true")},o.isRuleActive=function(e,t){function d(e,t){return t=m(t,{hour:e[f](),minute:e[l]()}),Math.floor(Math.abs((e.getTime()-t.getTime())/864e5))}function v(e,t){function n(e){return e[u]()*12+e[a]()}return Math.abs(n(e)-n(t))}function m(e,t){var n=new Date(e.getTime());for(var r in t){var i=t[r];switch(r){case"hour":n[c](i);break;case"minute":n[h](i);break;case"date":n[p](i)}}return n}function g(e,t){var n=e[f](),r=e[l](),i=t[f](),s=t[l]();return n*60+r>i*60+s}function y(e,t){var n=e[f](),r=e[l](),i=t[f](),s=t[l]();return n*60+r<i*60+s}var n=e.schedule;if(!n)return!0;var r=n.utc,i=r?"getUTCDate":"getDate",s=r?"getUTCDay":"getDay",u=r?"getUTCFullYear":"getFullYear",a=r?"getUTCMonth":"getMonth",f=r?"getUTCHours":"getHours",l=r?"getUTCMinutes":"getMinutes",c=r?"setUTCHours":"setHours",h=r?"setUTCMinutes":"setMinutes",p=r?"setUTCDate":"setDate";t=t||new Date;if(n.repeat){if(g(n.start,t))return!1;if(y(n.end,t))return!1;if(t<n.start)return!1;if(n.endRepeat&&t>=n.endRepeat)return!1;if(n.repeat==="daily"){if(n.repeatEvery){var b=d(n.start,t);if(b%n.repeatEvery!==0)return!1}}else if(n.repeat==="weekly"){if(n.days){if(!o.contains(n.days,t[s]()))return!1}else if(n.start[s]()!==t[s]())return!1;if(n.repeatEvery){var w=d(n.start,t);if(w%(7*n.repeatEvery)!==0)return!1}}else if(n.repeat==="monthly"){if(n.repeatEvery){var E=v(n.start,t);if(E%n.repeatEvery!==0)return!1}if(n.nthWeek&&n.mthDay){if(n.mthDay!==t[s]())return!1;var S=Math.floor((t[i]()-t[s]()+1)/7);if(n.nthWeek!==S)return!1}else if(n.start[i]()!==t[i]())return!1}else if(n.repeat==="yearly"){if(n.start[a]()!==t[a]())return!1;if(n.start[i]()!==t[i]())return!1;if(n.repeatEvery){var w=Math.abs(n.start[u]()-t[u]());if(w%n.repeatEvery!==0)return!1}}}else{if(n.start>t)return!1;if(n.end<t)return!1}return!0},o.isOutboundLink=function(e){if(!e.getAttribute("href"))return!1;var t=e.hostname,n=e.href,r=e.protocol;if(r!=="http:"&&r!=="https:")return!1;var i=o.settings.spansSubdomains;if(i&&o.isSubdomainOf(t,location.hostname))return!1;var s=o.any(o.settings.domainList,function(e){return o.isSubdomainOf(t,e)});return s?!1:t!==location.hostname},o.isLinkerLink=function(e){return o.hasMultipleDomains()&&e.hostname!=location.hostname&&!e.href.match(/^javascript/i)&&!o.isOutboundLink(e)},o.isSubdomainOf=function(e,t){if(e===t)return!0;var n=e.length-t.length;return n>0?o.equalsIgnoreCase(e.substring(n),t):!1},o.filterRules=function(){function t(t){return o.ruleInScope(t,e)?o.isRuleActive(t)?!0:!1:!1}var e={hostname:location.hostname,protocol:location.protocol,URI:o.data.URI};o.rules=o.filter(o.rules,t),o.pageLoadRules=o.filter(o.pageLoadRules,t)},o.ruleInScope=function(e,t){function a(e,t){function i(e){return t.match(e)}var n=e.include,r=e.exclude;if(n&&f(n,t))return!0;if(r){if(o.isString(r)&&r===t)return!0;if(o.isArray(r)&&o.any(r,i))return!0;if(o.isRegex(r)&&i(r))return!0}return!1}function f(e,t){function n(e){return t.match(e)}return o.isString(e)&&e!==t?!0:o.isArray(e)&&!o.any(e,n)?!0:o.isRegex(e)&&!n(e)?!0:!1}var n=e.scope;if(!n)return!0;var r=n.URI,i=n.subdomains,s=n.domains,u=n.protocols;return r&&a(r,t.URI)?!1:i&&a(i,t.hostname)?!1:s&&f(s,t.hostname)?!1:u&&f(u,t.protocol)?!1:!0},o.backgroundTasks=function(){var e=+(new Date);o.setFormListeners(),o.setVideoListeners(),o.loadStoredSettings(),o.registerNewElementsForDynamicRules(),o.eventEmitterBackgroundTasks();var t=+(new Date)},o.registerNewElementsForDynamicRules=function(){o.each(o.dynamicRules,function(e){o.cssQuery(e.selector,function(t){o.each(t,function(t){o.propertiesMatch(e.property,t)&&o.registerEvents(t,[e.event])})})})},o.ensureCSSSelector=function(){if(t.querySelectorAll){o.hasSelector=!0;return}o.loadingSizzle=!0,o.sizzleQueue=[],o.loadScript(o.basePath()+"selector.js",function(){if(!o.Sizzle){o.logError(new Error("Failed to load selector.js"));return}var e=o.onEvent.pendingEvents;o.each(e,function(e){o.handleEvent(e)},this),o.onEvent=o.handleEvent,o.hasSelector=!0,delete o.loadingSizzle,o.each(o.sizzleQueue,function(e){o.cssQuery(e[0],e[1])}),delete o.sizzleQueue})},o.errors=[],o.logError=function(e){o.errors.push(e),o.notify(e.name+" - "+e.message,5)},o.pageBottom=function(){o.pageBottomFired=!0,o.firePageLoadEvent("pagebottom")},o.stagingLibraryOverride=function(){var e=o.readStoredSetting("stagingLibrary")==="true";if(e){var n=t.getElementsByTagName("script"),r=/^(.*)satelliteLib-(.*)\.js$/,i=/^(.*)satelliteLib-(.*)-staging\.js$/,s,u,a;for(var f=0,l=n.length;f<l;f++){a=n[f].getAttribute("src");if(!a)continue;s||(s=a.match(r)),u||(u=a.match(i));if(u)break}if(s&&!u){var c=s[1]+"satelliteLib-"+s[2]+"-staging.js";return t.write('<script src="'+c+'"></script>'),!0}}return!1},o.checkAsyncInclude=function(){e.satellite_asyncLoad&&o.notify('You may be using the async installation of Satellite. In-page HTML and the "pagebottom" event will not work. Please update your Satellite installation for these features.',5)},o.hasMultipleDomains=function(){return o.settings.domainList.length>1},o.handleOverrides=function(){if(s)for(var e in s)s.hasOwnProperty(e)&&(o.data[e]=s[e])},o.init=function(t){function s(){o.backgroundTasks(),setTimeout(s,o.settings.recheckEvery||3e3)}if(o.stagingLibraryOverride())return;var r=t.tools;delete t.tools;for(var i in t)o[i]=t[i];o.data.customVars===n&&(o.data.customVars={}),o.data.queryParams=u,o.handleOverrides(),o.detectBrowserInfo(),o.trackVisitorInfo&&o.trackVisitorInfo(),o.loadStoredSettings(),o.checkAsyncInclude(),o.ensureCSSSelector(),o.filterRules(),o.dynamicRules=o.filter(o.rules,function(e){return e.eventHandlerOnElement}),o.tools=o.initTools(r),o.initEventEmitters(),o.settings.forceLowerCase&&(o.data.URI=o.data.URI.toLowerCase()),o.hasSelector&&o.domReady(o.eventEmitterBackgroundTasks),o.setListeners(),o.domReady(s),o.firePageLoadEvent("pagetop"),o.domReady(function(){o.domReadyFired=!0,o.pageBottomFired||o.pageBottom(),o.firePageLoadEvent("domready")}),o.addEventHandler(e,"load",function(){o.firePageLoadEvent("windowload")})},o.pageLoadPhases=["pagetop","pagebottom","domready","windowload"],o.loadEventBefore=function(e,t){return o.indexOf(o.pageLoadPhases,e)<=o.indexOf(o.pageLoadPhases,t)},o.flushPendingCalls=function(e){e.pending&&(o.each(e.pending,function(t){var n=t[0],r=t[1],i=t[2],s=t[3];n in e?e[n].apply(e,[r,i].concat(s)):e.emit?e.emit(n,r,i,s):o.notify("Failed to trigger "+n+" for tool "+e.id,1)}),delete e.pending)},o.setDebug=function(t){if(!e.localStorage)return;e.localStorage.setItem("sdsat_debug",t)},o.detectBrowserInfo=function(){function e(e){return function(t){for(var n in e){var r=e[n],i=r.test(t);if(i)return n}return"Unknown"}}var t=e({OmniWeb:/OmniWeb/,"Opera Mini":/Opera Mini/,"Opera Mobile":/Opera Mobi/,Opera:/Opera/,"Mobile Safari":/Mobile(\/[0-9A-z]+)? Safari/,Chrome:/Chrome/,Firefox:/Firefox/,"IE Mobile":/IEMobile/,IE:/MSIE/,Safari:/Safari/}),n=e({iOS:/iPhone|iPad|iPod/,Blackberry:/BlackBerry/,"Symbian OS":/SymbOS/,Maemo:/Maemo/,Android:/Android [0-9\.]+;/,Linux:/ Linux /,Unix:/FreeBSD|OpenBSD|CrOS/,Windows:/ Windows /,MacOS:/Macintosh;/}),r=e({iPhone:/iPhone/,iPad:/iPad/,iPod:/iPod/,Nokia:/SymbOS|Maemo/,"Windows Phone":/IEMobile/,Blackberry:/BlackBerry/,Android:/Android [0-9\.]+;/,Desktop:/.*/}),i=navigator.userAgent;o.browserInfo={browser:t(i),os:n(i),deviceType:r(i)}},o.BaseTool=function(e){this.settings=e?e:{}},o.BaseTool.prototype={triggerCommand:function(e,t,n){var r=this.settings||{},i=o.settings.forceLowerCase;if(this.initialize&&this.isQueueAvailable()&&this.isQueueable(e)&&n&&o.loadEventBefore(n.type,r.loadOn)){this.queueCommand(e,t,n);return}"forceLowerCase"in r&&(i=r.forceLowerCase);var s=o.preprocessArguments(e.arguments,t,n,i),u=e.command,a=this["$"+u];a?a.apply(this,[t,n].concat(s)):this.$missing$?this.$missing$(u,t,n,s):o.notify("Failed to trigger "+u+" for tool "+this.id,1)},endPLPhase:function(e){},isQueueable:function(e){return e.command!=="cancelToolInit"},isQueueAvailable:function(){return!this.initialized&&!this.initializing},flushQueue:function(){this.pending&&(o.each(this.pending,function(e){this.triggerCommand.apply(this,e)},this),this.pending=[])},queueCommand:function(e,t,n){this.pending||(this.pending=[]),this.pending.push([e,t,n])},$cancelToolInit:function(){this._cancelToolInit=!0}},e._satellite=o,a.orientationChange=function(t){var n=e.orientation===0?"portrait":"landscape";t.orientation=n,o.onEvent(t)},o.availableEventEmitters.push(a),f.prototype.backgroundTasks=function(){o.each(this.rules,function(e){o.cssQuery(e.selector,function(e){e.length>0&&o.onEvent({type:"elementexists",target:e[0]})})})},o.availableEventEmitters.push(f),l.currentZoom=function(){return t.documentElement.clientWidth/e.innerWidth},o.availableEventEmitters.push(l),c.prototype={backgroundTasks:function(){var e=this.eventHandler;o.each(o.rules,function(t){o.cssQuery(t.selector||"video",function(t){o.each(t,function(t){if(o.$data(t,"videoplayed.tracked"))return;o.addEventHandler(t,"timeupdate",o.throttle(e,100)),o.$data(t,"videoplayed.tracked",!0)})})})},evalRule:function(e,t){var n=t.event,r=e.seekable,i=r.start(0),s=r.end(0),u=e.currentTime,a=t.event.match(/^videoplayed\(([0-9]+)([s%])\)$/);if(!a)return;var f=a[2],l=Number(a[1]),c=f==="%"?function(){return l<=100*(u-i)/(s-i)}:function(){return l<=u-i};!o.$data(e,n)&&c()&&(o.$data(e,n,!0),o.onEvent({type:n,target:e}))},onUpdateTime:function(e){var t=this.rules,n=e.target;if(!n.seekable||n.seekable.length===0)return;for(var r=0,i=t.length;r<i;r++)this.evalRule(n,t[r])}},o.availableEventEmitters.push(c),h.prototype={backgroundTasks:function(){var e=this;o.each(this.rules,function(t){var n=t[1],r=t[0];o.cssQuery(n,function(t){o.each(t,function(t){e.trackElement(t,r)})})},this)},trackElement:function(e,t){var n=this,r=o.$data(e,"hover.delays");r?o.contains(r,t)||r.push(t):(o.addEventHandler(e,"mouseover",function(t){n.onMouseOver(t,e)}),o.addEventHandler(e,"mouseout",function(t){n.onMouseOut(t,e)}),o.$data(e,"hover.delays",[t]))},onMouseOver:function(e,t){var n=e.target||e.srcElement,r=e.relatedTarget||e.fromElement,i=(t===n||o.containsElement(t,n))&&!o.containsElement(t,r);i&&this.onMouseEnter(t)},onMouseEnter:function(e){var t=o.$data(e,"hover.delays"),n=o.map(t,function(t){return setTimeout(function(){o.onEvent({type:"hover("+t+")",target:e})},t)});o.$data(e,"hover.delayTimers",n)},onMouseOut:function(e,t){var n=e.target||e.srcElement,r=e.relatedTarget||e.toElement,i=(t===n||o.containsElement(t,n))&&!o.containsElement(t,r);i&&this.onMouseLeave(t)},onMouseLeave:function(e){var t=o.$data(e,"hover.delayTimers");t&&o.each(t,function(e){clearTimeout(e)})}},o.availableEventEmitters.push(h),o.availableEventEmitters.push(p),o.availableEventEmitters.push(d),v.offset=function(n){var r;try{r=n.getBoundingClientRect()}catch(i){}var s=t,o=s.documentElement,u=s.body,a=e,f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||o.scrollTop||u.scrollTop,h=a.pageXOffset||o.scrollLeft||u.scrollLeft,p=r.top+c-f,d=r.left+h-l;return{top:p,left:d}},v.getViewportHeight=function(){var n=e.innerHeight,r=t.compatMode;return r&&(n=r=="CSS1Compat"?t.documentElement.clientHeight:t.body.clientHeight),n},v.getScrollTop=function(){return t.documentElement.scrollTop?t.documentElement.scrollTop:t.body.scrollTop},v.prototype={backgroundTasks:function(){var e=this.elements,t=this;o.each(this.rules,function(t){o.cssQuery(t.selector,function(n){var r=0;o.each(n,function(t){o.contains(e,t)||(e.push(t),r++)}),r&&o.notify(t.selector+" added "+r+" elements.",1)})}),this.track()},elementIsInView:function(e){var t=v.getViewportHeight(),n=v.getScrollTop(),r=v.offset(e).top,i=e.offsetHeight;return!(n>r+i||n+t<r)},checkInView:function(e,t){var n=o.$data(e,"inview");if(this.elementIsInView(e)){n||o.$data(e,"inview",!0);var r=this;this.processRules(e,function(n,i,s){if(t||!n.inviewDelay)o.$data(e,i,!0),o.onEvent({type:"inview",target:e,inviewDelay:n.inviewDelay});else if(n.inviewDelay){var u=o.$data(e,s);u&&clearTimeout(u),u=setTimeout(function(){r.checkInView(e,!0)},n.inviewDelay),o.$data(e,s,u)}})}else n&&o.$data(e,"inview",!1),this.processRules(e,function(t,n,r){var i=o.$data(e,r);i&&clearTimeout(i)})},track:function(){o.each(this.elements,function(e){this.checkInView(e)},this)},processRules:function(e,t){o.each(this.rules,function(n,r){var i=n.inviewDelay?"viewed_"+n.inviewDelay:"viewed",s="inview_timeout_id_"+r;if(o.$data(e,i))return;o.matchesCss(n.selector,e)&&t(n,i,s)})}},o.availableEventEmitters.push(v),o.inherit(m,o.BaseTool),o.extend(m.prototype,{name:"SC",initialize:function(t){if(this._cancelToolInit)return;if(this.settings.initTool!==!1){var n=this.settings.sCodeURL||o.basePath()+"s_code.js";typeof n=="object"&&(e.location.protocol==="https:"?n=n.https:n=n.http),n.match(/^https?:/)||(n=o.basePath()+n);if(this.settings.initVars){var r=this.substituteVariables(this.settings.initVars,{type:t});this.$setVars(null,null,r)}o.loadScript(n,o.bind(this.onSCodeLoaded,this)),this.initializing=!0}else this.initializing=!0},onSCodeLoaded:function(){this.initialized=!0,this.initializing=!1,o.notify("SiteCatalyst: loaded.",1),this.settings.customInit&&this.settings.customInit(this.getS()),this.flushQueueExceptTrackLink(),this.sendBeacon(),this.flushQueue()},flushQueueExceptTrackLink:function(){if(!this.pending)return;var e=[];for(var t=0;t<this.pending.length;t++){var n=this.pending[t],r=n[0];r.command==="trackLink"?e.push(n):this.triggerCommand.apply(this,n)}this.pending=e},isQueueAvailable:function(){return!this.initialized},backgroundTasks:function(){this.initializing&&typeof e.s_gi=="function"&&(this.flushQueue(),this.initialized=!0,this.initializing=!1)},substituteVariables:function(e,t){var n="forceLowerCase"in this.settings?this.settings.forceLowerCase:o.settings.forceLowerCase,r={};for(var i in e){var s=e[i];r[i]=o.replace(s,location,t)}return r},endPLPhase:function(e){var t=this.settings.loadOn;e===t&&this.initialize(e)},$setVars:function(e,t,n){for(var r in n){var i=n[r];typeof i=="function"&&(i=i()),this.varBindings[r]=i}o.notify("SiteCatalyst: set variables.",2)},$customSetup:function(e,t,n){this.customSetupFunc=function(r){n.call(e,t,r)}},getAccount:function(t){return e.s_account?e.s_account:t&&this.settings.accountByHost?this.settings.accountByHost[t]||this.settings.account:this.settings.account},getS:function(t,n){var r=n&&n.hostname||e.location.hostname,i=n&&n.setVars||this.varBindings,s=n&&n.addEvent||this.events,o=this.getAccount(r),u=e.s_gi;if(!u)return null;var t=t||u(o);for(var a in i)t[a]=i[a];return s.length>0&&(t.events=s.join(",")),this.customSetupFunc&&this.customSetupFunc.call(e,t),t},clearVarBindings:function(){this.varBindings={}},sendBeacon:function(){var t=this.getS(e[this.settings.renameS||"s"]);if(!t){o.notify("SiteCatalyst: page code not loaded",1);return}t.linkTrackVars="",t.linkTrackEvents="",t.t(),this.clearVarBindings(),o.notify("SiteCatalyst: tracked page view",1)},$trackLink:function(e,t,n){var r=n&&n.type,i=n&&n.linkName||(e&&e.nodeName.toLowerCase()==="a"?e.innerHTML:"")||"link clicked",s=n&&n.setVars,u=n&&n.addEvent,a=this.getS(null,{setVars:s,addEvent:u});if(!a){o.notify("SiteCatalyst: page code not loaded",1);return}var f=this.definedVarNames(s);(u||[]).length>0&&f.push("events"),a.products&&f.push("products"),a.linkTrackVars=f.join(","),a.linkTrackEvents=(u||[]).join(","),n&&n.customSetup&&n.customSetup.call(e,t,a),a.tl(!0,r||"o",i),o.notify("SiteCatalyst: tracked link",1)},definedVarNames:function(e){e=e||this.varBindings;var t=[];for(var n in e)/^(eVar[0-9]+)|(prop[0-9]+)$/.test(n)&&t.push(n);return t},$trackPageView:function(){var e=this.getS();if(!e){o.notify("SiteCatalyst: page code not loaded",1);return}e.linkTrackVars="",e.linkTrackEvents="",e.t(),this.clearVarBindings(),o.notify("SiteCatalyst: tracked page view",1)},$postTransaction:function(t,n,r){var i=o.data.transaction=e[r],s=this.varBindings,u=this.settings.fieldVarMapping;o.each(i.items,function(e){this.products.push(e)},this),s.products=o.map(this.products,function(e){var t=[];if(u&&u.item)for(var n in u.item){var r=u.item[n];t.push(r+"="+e[n]),r.substring(0,5)==="event"&&this.events.push(r)}var i=["",e.product,e.quantity,e.unitPrice*e.quantity];return t.length>0&&i.push(t.join("|")),i.join(";")},this).join(",");if(u&&u.transaction){var a=[];for(var f in u.transaction){var r=u.transaction[f];a.push(r+"="+i[f]),r.substring(0,5)==="event"&&this.events.push(r)}s.products.length>0&&(s.products+=","),s.products+=";;;;"+a.join("|")}},$addEvent:function(e,t){for(var n=2,r=arguments.length;n<r;n++)this.events.push(arguments[n])},$addProduct:function(e,t){for(var n=2,r=arguments.length;n<r;n++)this.products.push(arguments[n])}}),o.availableTools.sc=m,o.inherit(g,o.BaseTool),o.extend(g.prototype,{name:"Default",$loadIframe:function(t,n,r){var i=r.pages,s=r.loadOn,u=o.bind(function(){o.each(i,function(e){this.loadIframe(t,n,e)},this)},this);s||u(),s==="domready"&&o.domReady(u),s==="load"&&o.addEventHandler(e,"load",u)},loadIframe:function(e,n,r){var i=t.createElement("iframe");i.style.display="none";var s=o.data.host,u=r.data,a=this.scriptURL(r.src),f=o.searchVariables(u,e,n);s&&(a=o.basePath
()+a),a+=f,i.src=a;var l=t.getElementsByTagName("body")[0];l?l.appendChild(i):o.domReady(function(){t.getElementsByTagName("body")[0].appendChild(i)})},scriptURL:function(e){var t=o.settings.scriptDir||"";return t+e},$loadScript:function(t,n,r){var i=r.scripts,s=r.sequential,u=r.loadOn,a=o.bind(function(){s?this.loadScripts(t,n,i):o.each(i,function(e){this.loadScripts(t,n,[e])},this)},this);u?u==="domready"?o.domReady(a):u==="load"&&o.addEventHandler(e,"load",a):a()},loadScripts:function(e,t,n){function f(){if(r.length>0&&i){var a=r.shift();a.call(e,t,s)}var l=n.shift();if(l){var c=o.data.host,h=u.scriptURL(l.src);c&&(h=o.basePath()+h),o.loadScript(h,f),i=l}}try{var n=n.slice(0),r=this.asyncScriptCallbackQueue,i,s=t.target||t.srcElement,u=this}catch(a){console.error("scripts is",JSON.stringify(n))}f()},$loadBlockingScript:function(e,t,n){var r=n.scripts,i=n.loadOn,s=o.bind(function(){o.each(r,function(n){this.loadBlockingScript(e,t,n)},this)},this);s()},loadBlockingScript:function(e,n,r){var i=this.scriptURL(r.src),s=o.data.host,u=n.target||n.srcElement;s&&(i=o.basePath()+i);var a='<script src="'+i+'"></script>';this.argsForBlockingScripts.push([e,n,u]),t.write(a)},pushAsyncScript:function(e){this.asyncScriptCallbackQueue.push(e)},pushBlockingScript:function(e){var t=this.argsForBlockingScripts.shift(),n=t[0];e.apply(n,t.slice(1))},$writeHTML:function(e,n){if(o.domReadyFired){o.notify("Command writeHTML failed. You may be using an async installation of Satellite.",1);return}if(n.type!=="pagebottom"&&n.type!=="pagetop"){o.notify("You can only use writeHTML on the `pagetop` and `pagebottom` events.",1);return}for(var r=2,i=arguments.length;r<i;r++){var s=arguments[r].html;s=o.replace(s,e,n),t.write(s)}},linkNeedsDelayActivate:function(t,n){n=n||e;var r=t.tagName,i=t.getAttribute("target");return r&&r.toLowerCase()!=="a"?!1:i?i==="_blank"?!1:i==="_top"?n.top===n:i==="_parent"?!1:i==="_self"?!0:n.name?i===n.name:!0:!0},$delayActivateLink:function(e,t){if(!this.linkNeedsDelayActivate(e))return;o.preventDefault(t);var n=o.settings.linkDelay||100;setTimeout(function(){o.setLocation(e.href)},n)},isQueueable:function(e){return e.command!=="writeHTML"}}),o.availableTools["default"]=g,o.inherit(y,o.BaseTool),o.extend(y.prototype,{name:"GA",initialize:function(){var n=this.settings,r=e._gaq,i=n.initCommands||[],s=n.customInit;r||(_gaq=[]),this.forceLowerCase=o.settings.forceLowerCase,"forceLowerCase"in n&&(this.forceLowerCase=n.forceLowerCase);if(!this.isSuppressed()){if(!r&&!y.scriptLoaded){var u=("https:"==t.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";o.loadScript(u),y.scriptLoaded=!0,o.notify("GA: page code loaded.",1)}var a=n.domain,f=n.trackerName,l=this.allowLinker(),c=n.account,h=o.settings.domainList;_gaq.push([this.cmd("setAccount"),c]),l&&_gaq.push([this.cmd("setAllowLinker"),l]);var p=o.find(h,function(t){var n=e.location.hostname;return o.equalsIgnoreCase(n.slice(n.length-t.length),t)});_gaq.push([this.cmd("setDomainName"),p?"."+p:"auto"]),o.each(i,function(e){var t=[this.cmd(e[0])].concat(e.slice(1));_gaq.push(t)},this),s&&(this.suppressInitialPageView=!1===s(_gaq,f)),n.pageName&&this.$overrideInitialPageView(null,null,n.pageName)}else o.notify("GA: page code not loaded(suppressed).",1);this.initialized=!0},isSuppressed:function(){return this._cancelToolInit||this.settings.initTool===!1},allowLinker:function(){var e=o.settings.domainList;return e&&e.length>1||!!o.settings.outboundLinkExcludes},tracker:function(){return this.settings.trackerName},cmd:function(e){var t=this.tracker();return t?t+"._"+e:"_"+e},$overrideInitialPageView:function(e,t,n){this.urlOverride=n},trackInitialPageView:function(){if(this.isSuppressed())return;if(this.suppressInitialPageView)return;if(this.urlOverride){var e=o.preprocessArguments([this.urlOverride],location,null,this.forceLowerCase);this.$missing$("trackPageview",null,null,e)}else this.$missing$("trackPageview")},endPLPhase:function(e){var t=this.settings.loadOn;e===t&&(o.notify("GA: Initializing at "+e,1),this.initialize(),this.flushQueue(),this.trackInitialPageView())},$missing$:function(e,t,n,r){if(this._cancelToolInit)return;var i=this.settings,s=this.tracker(),u=this.cmd(e),r=r?[u].concat(r):[u];_gaq.push(r),s?o.notify("GA: sent command "+e+" to tracker "+s+(r.length>1?" with parameters ["+r.slice(1).join(", ")+"]":"")+".",1):o.notify("GA: sent command "+e+(r.length>1?" with parameters ["+r.slice(1).join(", ")+"]":"")+".",1)},$postTransaction:function(t,n,r){var i=o.data.customVars.transaction=e[r];this.$missing$("addTrans",t,n,[i.orderID,i.affiliation,i.total,i.tax,i.shipping,i.city,i.state,i.country]),o.each(i.items,function(e){this.$missing$("addItem",t,n,[e.orderID,e.sku,e.product,e.category,e.unitPrice,e.quantity])},this),this.$missing$("trackTrans",t,n)},$link:function(e,t){var n=this;if(!this.allowLinker())return;if(!e.hostname.match(this.settings.linkerDomains))return;if(o.isSubdomainOf(e.hostname,location.hostname))return;o.preventDefault(t);var r=o.settings.linkDelay||100;setTimeout(function(){n.$missing$("link",e,t,e.href)},r)}}),o.availableTools.ga=y,o.inherit(b,o.BaseTool),o.extend(b.prototype,{name:"tnt",myInitialize:function(){var t=this.settings.mboxURL;typeof t=="object"&&(e.location.protocol==="https:"?t=t.https:t=t.http),t.match(/^https?:/)||(t=o.basePath()+t),this.settings.initTool!==!1?(o.loadScript(t,o.bind(function(){o.notify("Test & Target: loaded.",1),this.flushQueue(),this.initialized=!0,this.initializing=!1},this)),this.initializing=!0):this.initialized=!0},$addMbox:function(e,t,n){var r=n.mboxGoesAround,i=r+"{visibility: hidden;}",s=this.appendStyle(i);r in this.styleElements||(this.styleElements[r]=s),this.initialized?this.$addMBoxStep2(null,null,n):this.initializing&&this.queueCommand({command:"addMBoxStep2",arguments:[n]},e,t)},$addMBoxStep2:function(n,r,i){var s=this.generateID(),u=this;o.addEventHandler(e,"load",o.bind(function(){o.cssQuery(i.mboxGoesAround,function(n){var r=n[0];if(!r)return;var o=t.createElement("div");o.id=s,r.parentNode.replaceChild(o,r),o.appendChild(r),e.mboxDefine(s,i.mboxName);var a=[i.mboxName];i.arguments&&(a=a.concat(i.arguments)),e.mboxUpdate.apply(null,a),u.reappearWhenCallComesBack(r,s,i.timeout,i)})},this)),this.lastMboxID=s},generateID:function(){var e="_sdsat_mbox_"+String(Math.random()).substring(2)+"_";return e},appendStyle:function(e){var n=t.getElementsByTagName("head")[0],r=t.createElement("style");return r.type="text/css",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(t.createTextNode(e)),n.appendChild(r),r},reappearWhenCallComesBack:function(e,t,n,r){function s(){var e=i.styleElements[r.mboxGoesAround];e&&(e.parentNode.removeChild(e),delete i.styleElements[r.mboxGoesAround])}var i=this;o.cssQuery('script[src*="omtrdc.net"]',function(e){var t=e[0];if(t){o.scriptOnLoad(t.src,t,function(){o.notify("Test & Target: request complete",1),s(),clearTimeout(r)});var r=setTimeout(function(){o.notify("Test & Target: bailing after "+n+"ms",1),s()},n)}else o.notify("Test & Target: failed to find T&T ajax call, bailing",1),s()})}}),o.availableTools.tnt=b,!function(){function e(e){return"_sdsat_"+e}o.trackVisitorInfo=function(){var e=o.trackLandingPage();o.trackSessionCount(e),o.trackLifetimePagesViewed(),o.trackSessionPagesViewed(),o.trackTrafficSource()},o.trackLandingPage=function(){var t=e("landing_page"),n=o.readCookie(t);return(!n||n.split("|").length<2)&&o.setCookie(t,location.href+"|"+(new Date).getTime()),!n},o.visitorLandingPage=function(){var t=o.readCookie(e("landing_page"));return t?t.split("|")[0]:null},o.visitorLandingTime=function(){var t=o.readCookie(e("landing_page"));return t?Number(t.split("|")[1]):null},o.minutesOnSite=function(){var e=(new Date).getTime();return Math.floor((e-o.visitorLandingTime())/1e3/60)},o.trackSessionCount=function(t){if(!t)return;var n=o.visitorSessionCount();o.setCookie(e("session_count"),n+1,730)},o.visitorSessionCount=function(){return Number(o.readCookie(e("session_count"))||"0")},o.isNewVisitor=function(){return o.visitorSessionCount()===1},o.trackSessionPagesViewed=function(){o.setCookie(e("pages_viewed"),o.visitorSessionPagesViewed()+1)},o.trackLifetimePagesViewed=function(){o.setCookie(e("lt_pages_viewed"),o.visitorLifetimePagesViewed()+1,730)},o.visitorLifetimePagesViewed=function(){return Number(o.readCookie(e("lt_pages_viewed"))||0)},o.visitorSessionPagesViewed=function(){return Number(o.readCookie(e("pages_viewed"))||"0")},o.trackTrafficSource=function(){var n=e("traffic_source");o.readCookie(n)||o.setCookie(n,t.referrer)},o.trafficSource=function(){return o.readCookie(e("traffic_source"))}}(),o.ecommerce={addItem:function(){var e=[].slice.call(arguments);o.onEvent({type:"ecommerce.additem",target:e})},addTrans:function(){var e=[].slice.call(arguments);o.data.saleData.sale={orderId:e[0],revenue:e[2]},o.onEvent({type:"ecommerce.addtrans",target:e})},trackTrans:function(){o.onEvent({type:"ecommerce.tracktrans",target:[]})}},_satellite.init({tools:{},pageLoadRules:[{name:"Channel = Artist and Artist = Dallas Mavs",trigger:[{command:"writeHTML",arguments:[{html:'<script type="text/javascript">\nadroll_adv_id = "IYKCNOP7XJHAVEHWQXA2LJ";\nadroll_pix_id = "FUNVJSSCORA6TCL4VRJQ56";\n(function () {\nvar oldonload = window.onload;\nwindow.onload = function(){\n   __adroll_loaded=true;\n   var scr = document.createElement("script");\n   var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");\n   scr.setAttribute(\'async\', \'true\');\n   scr.type = "text/javascript";\n   scr.src = host + "/j/roundtrip.js";\n   ((document.getElementsByTagName(\'head\') || [null])[0] ||\n    document.getElementsByTagName(\'script\')[0].parentNode).appendChild(scr);\n   if(oldonload){oldonload()}};\n}());\n</script>\n\n<script type="text/javascript">\n  adroll_segments = "mavericksticketmaster"\n</script>'},{html:"<script type=\"text/javascript\"> \n\n  var _gaq = _gaq || []; \n  _gaq.push(['_setAccount', 'UA-12820068-3']); \n  _gaq.push(['_setDomainName', 'ticketmaster.com']); \n  _gaq.push(['_setAllowLinker', true]); \n  _gaq.push(['_trackPageview']); \n\n  (function() { \n    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; \n    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; \n    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); \n  })(); \n\n</script> "}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("window.tm_omn.channel"),/[Aa]rtist/i)},function(){return _satellite.textMatch(_satellite.getVar("window.tm_omn.prop21"),/^805932$/i)}],event:"pagebottom"},{name:"Link DE Init",trigger:[{command:"writeHTML",arguments:[{html:"<script type='text/javascript'>\n  // The artist_link is written back to the 'event_name' DE and also a cookie for reference\n  if (jQuery('a#artist_link').text()) {\n    _satellite.cssQuery('a#artist_link', function(elms){\n       _satellite.setVar('event_name',elms[0].textContent||elms[0].innerText);\n       _satellite.setCookie('_tm_event_name',elms[0].textContent||elms[0].innerText,1);\n    })\n  }\n</script>"}]}],scope:{domains:[/ticketmaster\.com/i]},event:"pagebottom"},{name:"Page = Confirmation",trigger:[{command:"writeHTML",arguments:[{html:'<script type=text/javascript>\nfunction GetPart (FullString, GetWhat) {	\n				var ks_id="", ks_quantity="", ks_revenu=""; \n				Vars = window.tm_omn.products.split (";") ; \n				Cntr = 0 ; \n				for( cur_var in Vars)  {\n					if (Cntr==0 && Vars[cur_var] == "") continue; \n					if (Cntr==0) ks_id = Vars[cur_var]; \n					if (Cntr==1) ks_quantity = Vars[cur_var]; \n					if (Cntr==2) ks_revenu = Vars[cur_var]; \n					Cntr++; \n				}; \n				switch (GetWhat) {\n				\n					case "ks_id": {\n						return ks_id; \n						break; \n					}\n					case "ks_quantity": {\n						return ks_quantity; \n						break; \n					}\n					case "ks_revenu": {\n						return ks_revenu; \n						break; \n					}\n				}	\n			}\n			\n			var ks_id="", ks_quantity="", ks_revenu=""; \n			\n			ks_quantity  =  GetPart(window.tm_omn.products, "ks_quantity") ; \n			ks_revenu = GetPart(window.tm_omn.products, "ks_revenu") ; \n\n \n\n function GetGTV(ticketPrice, qty, eventType) {\n        var CandP = new Array();\n        if ((ticketPrice/qty) < 9.99) {\n            CandP[0] = "4.06";\n            CandP[1] = "2.72";\n            CandP[2] = "3.03";\n            CandP[3] = "3.13";            \n        }\n        else if ((ticketPrice/qty) < 19.99) {\n            CandP[0] = "6.55";\n            CandP[1] = "4.92";\n            CandP[2] = "4.67";\n            CandP[3] = "5.13";            \n        }\n        else if ((ticketPrice/qty) < 29.99) {\n            CandP[0] = "8.78";\n            CandP[1] = "6.07";\n            CandP[2] = "6.65";\n            CandP[3] = "6.36";\n        }\n        else if ((ticketPrice/qty) < 39.99) {\n            CandP[0] = "9.96";\n            CandP[1] = "6.42";\n            CandP[2] = "8.22";\n            CandP[3] = "8.09";\n        }\n        else if ((ticketPrice/qty) < 49.99) {\n            CandP[0] = "10.83";\n            CandP[1] = "7.97";\n            CandP[2] = "9.74";\n            CandP[3] = "9.38";\n        }\n        else if ((ticketPrice/qty) < 59.99) {           \n            CandP[0] = "11.92";\n            CandP[1] = "8.96";\n            CandP[2] = "10.58";\n            CandP[3] = "9.36";\n        }\n        else if ((ticketPrice/qty) < 69.99) {            \n            CandP[0] = "13.10";\n            CandP[1] = "8.86";\n            CandP[2] = "11.19";\n            CandP[3] = "11.39";\n        }\n        else if ((ticketPrice/qty) < 79.99) {        \n            CandP[0] = "13.33";\n            CandP[1] = "9.56";\n            CandP[2] = "11.13";\n            CandP[3] = "13.15";\n        }\n        else if ((ticketPrice/qty) < 89.99) {           \n            CandP[0] = "13.92";\n            CandP[1] = "9.94";\n            CandP[2] = "9.89";\n            CandP[3] = "15.27";\n        }\n        else if ((ticketPrice/qty) < 109.99) {\n            CandP[0] = "14.68";\n            CandP[1] = "10.38";\n            CandP[2] = "10.25";\n            CandP[3] = "16.06";\n        }\n        else if ((ticketPrice/qty) < 119.99) {          \n            CandP[0] = "16.00";\n            CandP[1] = "11.63";\n            CandP[2] = "12.55";\n            CandP[3] = "9.95";\n        }\n        else if ((ticketPrice/qty) < 129.99) {\n            CandP[0] = "15.57";\n            CandP[1] = "13.66";\n            CandP[2] = "11.57";\n            CandP[3] = "10.00";\n        }\n        else if ((ticketPrice/qty) < 139.99) {\n            CandP[0] = "16.32";\n            CandP[1] = "12.68";\n            CandP[2] = "10.21";\n            CandP[3] = "10.11";\n        }\n        else if ((ticketPrice/qty) < 149.99) {\n            CandP[0] = "18.34";\n            CandP[1] = "15.95";\n            CandP[2] = "10.45";\n            CandP[3] = "10.30";\n        }\n        else {\n            CandP[0] = "21.56";\n            CandP[1] = "17.07";\n            CandP[2] = "10.52";\n            CandP[3] = "0.00";\n        }\n\n        var returnVal = "val=" + (3.00 * qty);\n        switch (eventType) {\n            case "10001": returnVal = "val=" + (CandP[0] * qty);\n                break;\n            case "10004": returnVal = "val=" + (CandP[1] * qty);\n                break;\n            case "10002": returnVal = "val=" + (CandP[2] * qty);\n                break;\n            case "10003": returnVal = "val=" + (CandP[3] * qty);\n                break;\n        }\n\n        return returnVal;\n}\n</script>\n\n\n<script type=text/javascript>\nvar hostProtocol = (("https:" == document.location.protocol) ? "https" : "http");\n   document.write(\'<scr\'+\'ipt src="\', hostProtocol+\n   \'://124.xg4ken.com/media/getpx.php?cid=4b2ef7bf-a703-4a05-aab2-07886d5ac9b3\',\'" type="text/JavaScript"><\\/scr\'+\'ipt>\');\n</script>\n\n<script type=text/javascript>\n   var params = new Array();\n   params[0]=\'id=4b2ef7bf-a703-4a05-aab2-07886d5ac9b3\';\n   params[1]=\'type=tmaster\';\n   params[2]=GetGTV(ks_revenu, ks_quantity, _satellite.readCookie(\'MAJOR_CATEGORY\'));\n   params[3]=\'orderId=\'+window.tm_omn.eVar36; \n   params[4]=\'promoCode=\'+ks_quantity; \n   params[5]=\'valueCurrency=\'+window.tm_omn.currencyCode;\n   params[6]=\'GCID=\'+_satellite.readCookie(\'_tm_gcid\');\n   params[7]=\'kw=\'+_satellite.readCookie(\'_tm_kw\');\n   params[8]=\'product=\'+_satellite.readCookie(\'_tm_event_name\');\n   k_trackevent(params,\'124\');\n</script>'}]}],scope:{URI:{include:[/checkout\/order\/complete\D/i]}},conditions:[function(){return _satellite.textMatch(_satellite.getVar("Environment"),/ticketmaster.com/i)},function(){return _satellite.textMatch(_satellite.getVar("tm_omn.pageName"),/^((?!Facebook Layer).)*$/i)}],event:"pagebottom"},{name:"Page = Confirmation and Artist = Dallas Mavs",trigger:[{command:"writeHTML",arguments:[{html:"<script type=\"text/javascript\"> \nfunction GetPartMavs (FullString, GetWhat) {  \n        var ks_id=\"\", ks_quantity=\"\", ks_revenu=\"\"; \n        Vars = window.tm_omn.products.split (\";\") ; \n        Cntr = 0 ; \n        for( cur_var in Vars)  {\n          if (Cntr==0 && Vars[cur_var] == \"\") continue; \n          if (Cntr==0) ks_id = Vars[cur_var]; \n          if (Cntr==1) ks_quantity = Vars[cur_var]; \n          if (Cntr==2) ks_revenu = Vars[cur_var]; \n          Cntr++; \n        }; \n        switch (GetWhat) {\n        \n          case \"ks_id\": {\n            return ks_id; \n            break; \n          }\n          case \"ks_quantity\": {\n            return ks_quantity; \n            break; \n          }\n          case \"ks_revenu\": {\n            return ks_revenu; \n            break; \n          }\n        } \n      }\n      \n  var ks_id=\"\", ks_quantity=\"\", ks_revenu=\"\"; \n      \n  ks_id = GetPartMavs(window.tm_omn.products, \"ks_id\");\n  ks_quantity  =  GetPartMavs(window.tm_omn.products, \"ks_quantity\"); \n  ks_revenu = GetPartMavs(window.tm_omn.products, \"ks_revenu\");\n  ks_unitprice = (ksrevenu/ks_quantity).toFixed(2);\n\n  var _gaq = _gaq ||[]; \n  _gaq.push(['_setAccount','UA-12820068-3']); \n  _gaq.push(['_trackPageview']); \n  _gaq.push(['_addTrans', \n    ks_id,\n    '',\n    ks_revenu,\n    '', // tax \n    '', // shipping \n    '', // city \n    '', // state or province \n    ''  // country \n  ]); \n\n  _gaq.push(['_addItem', \n    ks_id,\n    window.tm_omn.prop19,\n    _satellite.getVar('event_name'),\n    '',   // category or variation  \n    ks_unitprice,\n    ks_quantity\n]); \n  _gaq.push(['_trackTrans']);\n\n  (function(){ \n    var ga = document.createElement('script'); ga.type ='text/javascript'; ga.async =true; \n    ga.src =('https:'== document.location.protocol ?'https://ssl':'http://www')+'.google-analytics.com/ga.js'; \n    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); \n  })(); \n</script>"}]}],scope:{URI:{include:[/checkout\/order\/complete\D/i]}},conditions:[function(){return _satellite.textMatch(_satellite.getVar("window.tm_omn.prop21"),/^805932$/i)},function(){return _satellite.textMatch(_satellite.getVar("Environment"),/ticketmaster.com/i)}],event:"pagebottom"},{name:"URL DE Init",trigger:[{command:"writeHTML",arguments:[{html:"<script type=\"text/javascript\">\n  // These variable sets can be replaced by regular DE inits when the satelliteLib is moved to <head>\n  if (_satellite.getQueryParam('GCID')) {\n    _satellite.setCookie('_tm_gcid',_satellite.getQueryParam('GCID'),1);\n  }\n  \n  if (_satellite.getQueryParam('kw')) {\n    _satellite.setCookie('_tm_kw',_satellite.getQueryParam('kw'),1);\n  }\n</script>"}]}],scope:{URI:{include:[/[?|&]gcid\=.*|[?|&]kw\=.*/i]}},event:"pagebottom"},{name:"iPerceptions (Canada)",trigger:[{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-509b15c89ce4890500000006.js",data:[]}]}]}],scope:{URI:{include:[/.*/i],exclude:[/\/(event|checkout|exchange|shoppinglist|auction|partner_redirect.*)\/.*/i]}},conditions:[function(){return _satellite.visitorSessionPagesViewed()>4},function(e,t){var n={trueForInclude:!1,startTime:8,endTime:13},r=(new Date).getHours(),i=r>=n.startTime&&r<=n.endTime;return i&&n.trueForInclude||!i&&!n.trueForInclude},function(){return _satellite.textMatch(_satellite.getVar("Environment"),"ticketmaster.ca")}],event:"pagebottom"},{name:"iPerceptions (US)",trigger:[{command:"writeHTML",arguments:[{html:'<!-- Begin: www.iperceptions.com -->\r\n<script type="text/javascript">\r\n;(function (w, d, s) {\r\n    var js,                              \r\n    fjs = d.getElementsByTagName(s)[0],  \r\n    id = "IPerceptionsJS",\r\n    a = "async",\r\n    b = "defer", \r\n    c = d.cookie;\r\n \r\n    if(!(/(^|;)\\s*IPE(_S_)?110179=/.test(c)) && !(d.getElementById(id))) {  \r\n        js = d.createElement(s); \r\n        js.src = w.location.protocol + "//ips-invite.iperceptions.com/webValidator.aspx?sdfc=44ac590b-110179-629832ab-2ba5-6a89-c3ed-9270a0e350a3&lID=1&loc=STUDY&cD=90&rF=False&iType=1&domainname=0";\r\n        js.id = id; \r\n        js.type = "text/javascript";\r\n        js[a] = a;\r\n        js[b] = b;\r\n        fjs.parentNode.insertBefore(js, fjs);\r\n     }\r\n}) (window, document, "script");\r\n</script>\r\n<!-- End: www.iperceptions.com -->\r\n'}]}],scope:{URI:{include:[/.*/i],exclude:[/\/(event|checkout|exchange|shoppinglist|auction|partner_redirect.*)\/.*/i]}},conditions:[function(){return _satellite.visitorSessionPagesViewed()>4},function(e,t){var n={trueForInclude:!1,startTime:8,endTime:13},r=(new Date).getHours(),i=r>=n.startTime&&r<=n.endTime;return i&&n.trueForInclude||!i&&!n.trueForInclude},function(){return _satellite.textMatch(_satellite.getVar("Environment"),"ticketmaster.com")}],event:"pagebottom"}],rules:[{name:"Dead Header",trigger:[{engine:"ga",command:"trackEvent",arguments:["dead content","dead header click: %this.innerHTML%","from: %URI%"]}],conditions:[function(e,t){return!_satellite.isLinked(t)}],event:"click",isDefault:!0,selector:"h1, h2, h3, h4, h5"},{name:"Dead Image",trigger:[{engine:"ga",command:"trackEvent",arguments:["dead content","dead image click: %this.src%","from: %URI%"]}],conditions:[function(e,t){return!_satellite.isLinked(t)}],event:"click",isDefault:!0,selector:"img"},{name:"Download Link",trigger:[{engine:"ga",command:"trackEvent",arguments:["downloads","download: %this.href%","from: %URI%"]},{command:"delayActivateLink"}],event:"click",isDefault:!0,selector:"a",property:{href:/\.(?:doc|docx|eps|jpg|png|svg|xls|ppt|pptx|pdf|xlsx|tab|csv|zip|txt|vsd|vxd|xml|js|css|rar|exe|wma|mov|avi|wmv|mp3|wav|m4v)($|\&|\?)/i}},{name:"Email Link",trigger:[{engine:"ga",command:"trackEvent",arguments:["communication/social","email: %this.href%","from: %URI%"]}],event:"click",isDefault:!0,selector:"a",property:{href:/^mailto/i}},{name:"Orientation Changed",trigger:[{engine:"ga",command:"trackEvent",arguments:["mobile","orientation change to %event.orientation%","from: %URI%"]}],event:"orientationchange",isDefault:!0},{name:"Outbound Link",trigger:[{engine:"ga",command:"trackEvent",arguments:["outbound links","outbound link: %this.href%","from: %URI%"]},{command:"delayActivateLink"}],conditions:[function(e,t){return _satellite.isOutboundLink(this)}],event:"click",isDefault:!0,selector:"a"},{name:"Telephone Dial",trigger:[{engine:"ga",command:"trackEvent",arguments:["mobile","dialed %this.href%","from: %URI%"]}],event:"click",isDefault:!0,selector:"a",property:{href:/^tel:/i}},{name:"Zoom Changed",trigger:[{engine:"ga",command:"trackEvent",arguments:["mobile","user zoomed","Zoomed using: %event.method% to scale %event.zoom%"]}],event:"zoomchange",isDefault:!0}],directCallRules:[],settings:{trackInternalLinks:!0,libraryName:"satelliteLib-df472949e8a036d72570b7a081d946474e1d4d29",allowGATTcalls:!1,downloadExtensions:/\.(?:doc|docx|eps|jpg|png|svg|xls|ppt|pptx|pdf|xlsx|tab|csv|zip|txt|vsd|vxd|xml|js|css|rar|exe|wma|mov|avi|wmv|mp3|wav|m4v)($|\&|\?)/i,notifications:!1,utilVisible:!1,domainList:["ticketmaster.ca","ticketmaster.com","ticketsnow.com"],spansSubdomains:!0,scriptDir:"bbc5bbf56a4c9cda1271b6b9cb3e94744124c05b/scripts/",tagTimeout:3e3},data:{URI:t.location.pathname+t.location.search,browser:{},cartItems:[],revenue:"",host:{http:"media.ticketmaster.com/en-us/js/satellite",https:"media.ticketmaster.com/en-us/js/satellite"}},dataElements:{Environment:{customJS:function(){var t=[{name:"ticketmaster.com",domains:[/^(?:.[^.]*\.)?ticketmaster.com$/,/^www\.tmol\.(?:dev|qa)[0-9]+\.websys\.tmcs$/,/^www\.toolspreview\.us\.websys\.tmcs$/,/^qaip[1-6]{1}\.ticketmaster\.net:800(?:2|3){1}$/]},{name:"ticketmaster.ca",domains:[/^(?:.[^.]*\.)?ticketmaster.ca$/,/^www\.tmca\.(?:dev|qa)[0-9]+\.websys\.tmcs$/,/^www\.toolspreview\.ca\.websys\.tmcs$/,/^qaip[1-6]{1}\.ticketmaster\.net:800(?:6|7){1}$/]}],n="unknown";for(i=0;i<t.length;i++){en=t[i].name;for(x=0;x<t[i].domains.length;x++){re=t[i].domains[x];if(e.document.location.host.match(re)){n=en;break}}if(n!="unknown")break}return n},"default":"unknown",storeLength:"pageview"},event_name:{selector:"a#artist_link",property:"text","default":"none",storeLength:"session"},Language:{cookie:"LANGUAGE","default":"en-us",storeLength:"session"},major_category:{cookie:"cmajor","default":"none",storeLength:"pageview"},orderID:{jsVariable:"window.tm_omn.eVar36",storeLength:"pageview"},pageName:{jsVariable:"tm_omn.pageName",storeLength:"pageview"},ref_url:{jsVariable:"window.tm_omn.eVar27","default":"none",storeLength:"session"}}})})(window,document);
