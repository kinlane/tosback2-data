
(function(a7,K){var ap=a7.document,bq=a7.navigator,bh=a7.location;var b=(function(){var bB=function(bX,bY){return new bB.fn.init(bX,bY,bz)},bR=a7.jQuery,bD=a7.$,bz,bV=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,bJ=/\S/,bF=/^\s+/,bA=/\s+$/,bE=/\d/,bw=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,bK=/^[\],:{}\s]*$/,bT=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,bM=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bG=/(?:^|:|,)(?:\s*\[)+/g,bu=/(webkit)[ \/]([\w.]+)/,bO=/(opera)(?:.*version)?[ \/]([\w.]+)/,bN=/(msie) ([\w.]+)/,bP=/(mozilla)(?:.*? rv:([\w.]+))?/,bx=/-([a-z]|[0-9])/ig,bW=/^-ms-/,bQ=function(bX,bY){return(bY+"").toUpperCase()},bU=bq.userAgent,bS,by,e,bI=Object.prototype.toString,bC=Object.prototype.hasOwnProperty,bv=Array.prototype.push,bH=Array.prototype.slice,bL=String.prototype.trim,br=Array.prototype.indexOf,bt={};bB.fn=bB.prototype={constructor:bB,init:function(bX,b1,b0){var bZ,b2,bY,b3;if(!bX){return this}if(bX.nodeType){this.context=this[0]=bX;this.length=1;return this}if(bX==="body"&&!b1&&ap.body){this.context=ap;this[0]=ap.body;this.selector=bX;this.length=1;return this}if(typeof bX==="string"){if(bX.charAt(0)==="<"&&bX.charAt(bX.length-1)===">"&&bX.length>=3){bZ=[null,bX,null]}else{bZ=bV.exec(bX)}if(bZ&&(bZ[1]||!b1)){if(bZ[1]){b1=b1 instanceof bB?b1[0]:b1;b3=(b1?b1.ownerDocument||b1:ap);bY=bw.exec(bX);if(bY){if(bB.isPlainObject(b1)){bX=[ap.createElement(bY[1])];bB.fn.attr.call(bX,b1,true)}else{bX=[b3.createElement(bY[1])]}}else{bY=bB.buildFragment([bZ[1]],[b3]);bX=(bY.cacheable?bB.clone(bY.fragment):bY.fragment).childNodes}return bB.merge(this,bX)}else{b2=ap.getElementById(bZ[2]);if(b2&&b2.parentNode){if(b2.id!==bZ[2]){return b0.find(bX)}this.length=1;this[0]=b2}this.context=ap;this.selector=bX;return this}}else{if(!b1||b1.jquery){return(b1||b0).find(bX)}else{return this.constructor(b1).find(bX)}}}else{if(bB.isFunction(bX)){return b0.ready(bX)}}if(bX.selector!==K){this.selector=bX.selector;this.context=bX.context}return bB.makeArray(bX,this)},selector:"",jquery:"1.6.4",length:0,size:function(){return this.length},toArray:function(){return bH.call(this,0)},get:function(bX){return bX==null?this.toArray():(bX<0?this[this.length+bX]:this[bX])},pushStack:function(bY,b0,bX){var bZ=this.constructor();if(!(bZ instanceof bB.fn.init)){bZ=new bB.fn.init()}if(bB.isArray(bY)){bv.apply(bZ,bY)}else{bB.merge(bZ,bY)}bZ.prevObject=this;bZ.context=this.context;if(b0==="find"){bZ.selector=this.selector+(this.selector?" ":"")+bX}else{if(b0){bZ.selector=this.selector+"."+b0+"("+bX+")"}}return bZ},each:function(bY,bX){return bB.each(this,bY,bX)},ready:function(bX){bB.bindReady();by.done(bX);return this},eq:function(bX){return bX===-1?this.slice(bX):this.slice(bX,+bX+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(bH.apply(this,arguments),"slice",bH.call(arguments).join(","))},map:function(bX){return this.pushStack(bB.map(this,function(bZ,bY){return bX.call(bZ,bY,bZ)}))},end:function(){return this.prevObject||this.constructor(null)},push:bv,sort:[].sort,splice:[].splice};bB.fn.init.prototype=bB.fn;bB.extend=bB.fn.extend=function(){var b6,bZ,bX,bY,b3,b4,b2=arguments[0]||{},b1=1,b0=arguments.length,b5=false;if(typeof b2==="boolean"){b5=b2;b2=arguments[1]||{};b1=2}if(typeof b2!=="object"&&!bB.isFunction(b2)){b2={}}if(b0===b1){b2=this;--b1}for(;b1<b0;b1++){if((b6=arguments[b1])!=null){for(bZ in b6){bX=b2[bZ];bY=b6[bZ];if(b2===bY){continue}if(b5&&bY&&(bB.isPlainObject(bY)||(b3=bB.isArray(bY)))){if(b3){b3=false;b4=bX&&bB.isArray(bX)?bX:[]}else{b4=bX&&bB.isPlainObject(bX)?bX:{}}b2[bZ]=bB.extend(b5,b4,bY)}else{if(bY!==K){b2[bZ]=bY}}}}}return b2};bB.extend({noConflict:function(bX){if(a7.$===bB){a7.$=bD}if(bX&&a7.jQuery===bB){a7.jQuery=bR}return bB},isReady:false,readyWait:1,holdReady:function(bX){if(bX){bB.readyWait++}else{bB.ready(true)}},ready:function(bX){if((bX===true&&!--bB.readyWait)||(bX!==true&&!bB.isReady)){if(!ap.body){return setTimeout(bB.ready,1)}bB.isReady=true;if(bX!==true&&--bB.readyWait>0){return}by.resolveWith(ap,[bB]);if(bB.fn.trigger){bB(ap).trigger("ready").unbind("ready")}}},bindReady:function(){if(by){return}by=bB._Deferred();if(ap.readyState==="complete"){return setTimeout(bB.ready,1)}if(ap.addEventListener){ap.addEventListener("DOMContentLoaded",e,false);a7.addEventListener("load",bB.ready,false)}else{if(ap.attachEvent){ap.attachEvent("onreadystatechange",e);a7.attachEvent("onload",bB.ready);var bX=false;try{bX=a7.frameElement==null}catch(bY){}if(ap.documentElement.doScroll&&bX){bs()}}}},isFunction:function(bX){return bB.type(bX)==="function"},isArray:Array.isArray||function(bX){return bB.type(bX)==="array"},isWindow:function(bX){return bX&&typeof bX==="object"&&"setInterval"in bX},isNaN:function(bX){return bX==null||!bE.test(bX)||isNaN(bX)},type:function(bX){return bX==null?String(bX):bt[bI.call(bX)]||"object"},isPlainObject:function(bZ){if(!bZ||bB.type(bZ)!=="object"||bZ.nodeType||bB.isWindow(bZ)){return false}try{if(bZ.constructor&&!bC.call(bZ,"constructor")&&!bC.call(bZ.constructor.prototype,"isPrototypeOf")){return false}}catch(bY){return false}var bX;for(bX in bZ){}return bX===K||bC.call(bZ,bX)},isEmptyObject:function(bY){for(var bX in bY){return false}return true},error:function(bX){throw bX},parseJSON:function(bX){if(typeof bX!=="string"||!bX){return null}bX=bB.trim(bX);if(a7.JSON&&a7.JSON.parse){return a7.JSON.parse(bX)}if(bK.test(bX.replace(bT,"@").replace(bM,"]").replace(bG,""))){return(new Function("return "+bX))()}bB.error("Invalid JSON: "+bX)},parseXML:function(bZ){var bX,bY;try{if(a7.DOMParser){bY=new DOMParser();bX=bY.parseFromString(bZ,"text/xml")}else{bX=new ActiveXObject("Microsoft.XMLDOM");bX.async="false";bX.loadXML(bZ)}}catch(b0){bX=K}if(!bX||!bX.documentElement||bX.getElementsByTagName("parsererror").length){bB.error("Invalid XML: "+bZ)}return bX},noop:function(){},globalEval:function(bX){if(bX&&bJ.test(bX)){(a7.execScript||function(bY){a7["eval"].call(a7,bY)})(bX)}},camelCase:function(bX){return bX.replace(bW,"ms-").replace(bx,bQ)},nodeName:function(bY,bX){return bY.nodeName&&bY.nodeName.toUpperCase()===bX.toUpperCase()},each:function(b0,b3,bZ){var bY,b1=0,b2=b0.length,bX=b2===K||bB.isFunction(b0);if(bZ){if(bX){for(bY in b0){if(b3.apply(b0[bY],bZ)===false){break}}}else{for(;b1<b2;){if(b3.apply(b0[b1++],bZ)===false){break}}}}else{if(bX){for(bY in b0){if(b3.call(b0[bY],bY,b0[bY])===false){break}}}else{for(;b1<b2;){if(b3.call(b0[b1],b1,b0[b1++])===false){break}}}}return b0},trim:bL?function(bX){return bX==null?"":bL.call(bX)}:function(bX){return bX==null?"":bX.toString().replace(bF,"").replace(bA,"")},makeArray:function(b0,bY){var bX=bY||[];if(b0!=null){var bZ=bB.type(b0);if(b0.length==null||bZ==="string"||bZ==="function"||bZ==="regexp"||bB.isWindow(b0)){bv.call(bX,b0)}else{bB.merge(bX,b0)}}return bX},inArray:function(bZ,b0){if(!b0){return-1}if(br){return br.call(b0,bZ)}for(var bX=0,bY=b0.length;bX<bY;bX++){if(b0[bX]===bZ){return bX}}return-1},merge:function(b1,bZ){var b0=b1.length,bY=0;if(typeof bZ.length==="number"){for(var bX=bZ.length;bY<bX;bY++){b1[b0++]=bZ[bY]}}else{while(bZ[bY]!==K){b1[b0++]=bZ[bY++]}}b1.length=b0;return b1},grep:function(bY,b3,bX){var bZ=[],b2;bX=!!bX;for(var b0=0,b1=bY.length;b0<b1;b0++){b2=!!b3(bY[b0],b0);if(bX!==b2){bZ.push(bY[b0])}}return bZ},map:function(bX,b4,b5){var b2,b3,b1=[],bZ=0,bY=bX.length,b0=bX instanceof bB||bY!==K&&typeof bY==="number"&&((bY>0&&bX[0]&&bX[bY-1])||bY===0||bB.isArray(bX));if(b0){for(;bZ<bY;bZ++){b2=b4(bX[bZ],bZ,b5);if(b2!=null){b1[b1.length]=b2}}}else{for(b3 in bX){b2=b4(bX[b3],b3,b5);if(b2!=null){b1[b1.length]=b2}}}return b1.concat.apply([],b1)},guid:1,proxy:function(b1,b0){if(typeof b0==="string"){var bZ=b1[b0];b0=b1;b1=bZ}if(!bB.isFunction(b1)){return K}var bX=bH.call(arguments,2),bY=function(){return b1.apply(b0,bX.concat(bH.call(arguments)))};bY.guid=b1.guid=b1.guid||bY.guid||bB.guid++;return bY},access:function(bX,b5,b3,bZ,b2,b4){var bY=bX.length;if(typeof b5==="object"){for(var b0 in b5){bB.access(bX,b0,b5[b0],bZ,b2,b3)}return bX}if(b3!==K){bZ=!b4&&bZ&&bB.isFunction(b3);for(var b1=0;b1<bY;b1++){b2(bX[b1],b5,bZ?b3.call(bX[b1],b1,b2(bX[b1],b5)):b3,b4)}return bX}return bY?b2(bX[0],b5):K},now:function(){return(new Date()).getTime()},uaMatch:function(bY){bY=bY.toLowerCase();var bX=bu.exec(bY)||bO.exec(bY)||bN.exec(bY)||bY.indexOf("compatible")<0&&bP.exec(bY)||[];return{browser:bX[1]||"",version:bX[2]||"0"}},sub:function(){function bX(b0,b1){return new bX.fn.init(b0,b1)}bB.extend(true,bX,this);bX.superclass=this;bX.fn=bX.prototype=this();bX.fn.constructor=bX;bX.sub=this.sub;bX.fn.init=function bZ(b0,b1){if(b1&&b1 instanceof bB&&!(b1 instanceof bX)){b1=bX(b1)}return bB.fn.init.call(this,b0,b1,bY)};bX.fn.init.prototype=bX.fn;var bY=bX(ap);return bX},browser:{}});bB.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(bY,bX){bt["[object "+bX+"]"]=bX.toLowerCase()});bS=bB.uaMatch(bU);if(bS.browser){bB.browser[bS.browser]=true;bB.browser.version=bS.version}if(bB.browser.webkit){bB.browser.safari=true}if(bJ.test("\xA0")){bF=/^[\s\xA0]+/;bA=/[\s\xA0]+$/}bz=bB(ap);if(ap.addEventListener){e=function(){ap.removeEventListener("DOMContentLoaded",e,false);bB.ready()}}else{if(ap.attachEvent){e=function(){if(ap.readyState==="complete"){ap.detachEvent("onreadystatechange",e);bB.ready()}}}}function bs(){if(bB.isReady){return}try{ap.documentElement.doScroll("left")}catch(bX){setTimeout(bs,1);return}bB.ready()}return bB})();var a="done fail isResolved isRejected promise then always pipe".split(" "),aE=[].slice;b.extend({_Deferred:function(){var bt=[],bu,br,bs,e={done:function(){if(!bs){var bw=arguments,bx,bA,bz,by,bv;if(bu){bv=bu;bu=0}for(bx=0,bA=bw.length;bx<bA;bx++){bz=bw[bx];by=b.type(bz);if(by==="array"){e.done.apply(e,bz)}else{if(by==="function"){bt.push(bz)}}}if(bv){e.resolveWith(bv[0],bv[1])}}return this},resolveWith:function(bw,bv){if(!bs&&!bu&&!br){bv=bv||[];br=1;try{while(bt[0]){bt.shift().apply(bw,bv)}}finally{bu=[bw,bv];br=0}}return this},resolve:function(){e.resolveWith(this,arguments);return this},isResolved:function(){return!!(br||bu)},cancel:function(){bs=1;bt=[];return this}};return e},Deferred:function(br){var e=b._Deferred(),bt=b._Deferred(),bs;b.extend(e,{then:function(bv,bu){e.done(bv).fail(bu);return this},always:function(){return e.done.apply(e,arguments).fail.apply(this,arguments)},fail:bt.done,rejectWith:bt.resolveWith,reject:bt.resolve,isRejected:bt.isResolved,pipe:function(bv,bu){return b.Deferred(function(bw){b.each({done:[bv,"resolve"],fail:[bu,"reject"]},function(by,bB){var bx=bB[0],bA=bB[1],bz;if(b.isFunction(bx)){e[by](function(){bz=bx.apply(this,arguments);if(bz&&b.isFunction(bz.promise)){bz.promise().then(bw.resolve,bw.reject)}else{bw[bA+"With"](this===e?bw:this,[bz])}})}else{e[by](bw[bA])}})}).promise()},promise:function(bv){if(bv==null){if(bs){return bs}bs=bv={}}var bu=a.length;while(bu--){bv[a[bu]]=e[a[bu]]}return bv}});e.done(bt.cancel).fail(e.cancel);delete e.cancel;if(br){br.call(e,e)}return e},when:function(bw){var br=arguments,bs=0,bv=br.length,bu=bv,e=bv<=1&&bw&&b.isFunction(bw.promise)?bw:b.Deferred();function bt(bx){return function(by){br[bx]=arguments.length>1?aE.call(arguments,0):by;if(!(--bu)){e.resolveWith(e,aE.call(br,0))}}}if(bv>1){for(;bs<bv;bs++){if(br[bs]&&b.isFunction(br[bs].promise)){br[bs].promise().then(bt(bs),e.reject)}else{--bu}}if(!bu){e.resolveWith(e,br)}}else{if(e!==bw){e.resolveWith(e,bv?[bw]:[])}}return e.promise()}});b.support=(function(){var bB=ap.createElement("div"),bI=ap.documentElement,bu,bJ,bC,bs,bA,bv,by,br,bz,bD,bx,bH,bF,bt,bw,bE,bK;bB.setAttribute("className","t");bB.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";bu=bB.getElementsByTagName("*");bJ=bB.getElementsByTagName("a")[0];if(!bu||!bu.length||!bJ){return{}}bC=ap.createElement("select");bs=bC.appendChild(ap.createElement("option"));bA=bB.getElementsByTagName("input")[0];by={leadingWhitespace:(bB.firstChild.nodeType===3),tbody:!bB.getElementsByTagName("tbody").length,htmlSerialize:!!bB.getElementsByTagName("link").length,style:/top/.test(bJ.getAttribute("style")),hrefNormalized:(bJ.getAttribute("href")==="/a"),opacity:/^0.55$/.test(bJ.style.opacity),cssFloat:!!bJ.style.cssFloat,checkOn:(bA.value==="on"),optSelected:bs.selected,getSetAttribute:bB.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};bA.checked=true;by.noCloneChecked=bA.cloneNode(true).checked;bC.disabled=true;by.optDisabled=!bs.disabled;try{delete bB.test}catch(bG){by.deleteExpando=false}if(!bB.addEventListener&&bB.attachEvent&&bB.fireEvent){bB.attachEvent("onclick",function(){by.noCloneEvent=false});bB.cloneNode(true).fireEvent("onclick")}bA=ap.createElement("input");bA.value="t";bA.setAttribute("type","radio");by.radioValue=bA.value==="t";bA.setAttribute("checked","checked");bB.appendChild(bA);br=ap.createDocumentFragment();br.appendChild(bB.firstChild);by.checkClone=br.cloneNode(true).cloneNode(true).lastChild.checked;bB.innerHTML="";bB.style.width=bB.style.paddingLeft="1px";bz=ap.getElementsByTagName("body")[0];bx=ap.createElement(bz?"div":"body");bH={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(bz){b.extend(bH,{position:"absolute",left:"-1000px",top:"-1000px"})}for(bE in bH){bx.style[bE]=bH[bE]}bx.appendChild(bB);bD=bz||bI;bD.insertBefore(bx,bD.firstChild);by.appendChecked=bA.checked;by.boxModel=bB.offsetWidth===2;if("zoom"in bB.style){bB.style.display="inline";bB.style.zoom=1;by.inlineBlockNeedsLayout=(bB.offsetWidth===2);bB.style.display="";bB.innerHTML="<div style='width:4px;'></div>";by.shrinkWrapBlocks=(bB.offsetWidth!==2)}bB.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";bF=bB.getElementsByTagName("td");bK=(bF[0].offsetHeight===0);bF[0].style.display="";bF[1].style.display="none";by.reliableHiddenOffsets=bK&&(bF[0].offsetHeight===0);bB.innerHTML="";if(ap.defaultView&&ap.defaultView.getComputedStyle){bv=ap.createElement("div");bv.style.width="0";bv.style.marginRight="0";bB.appendChild(bv);by.reliableMarginRight=(parseInt((ap.defaultView.getComputedStyle(bv,null)||{marginRight:0}).marginRight,10)||0)===0}bx.innerHTML="";bD.removeChild(bx);if(bB.attachEvent){for(bE in{submit:1,change:1,focusin:1}){bw="on"+bE;bK=(bw in bB);if(!bK){bB.setAttribute(bw,"return;");bK=(typeof bB[bw]==="function")}by[bE+"Bubbles"]=bK}}bx=br=bC=bs=bz=bv=bB=bA=null;return by})();b.boxModel=b.support.boxModel;var aL=/^(?:\{.*\}|\[.*\])$/,av=/([A-Z])/g;b.extend({cache:{},uuid:0,expando:"jQuery"+(b.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?b.cache[e[b.expando]]:e[b.expando];return!!e&&!S(e)},data:function(bt,br,bv,bu){if(!b.acceptData(bt)){return}var bw,by,bz=b.expando,bx=typeof br==="string",bA=bt.nodeType,e=bA?b.cache:bt,bs=bA?bt[b.expando]:bt[b.expando]&&b.expando;if((!bs||(bu&&bs&&(e[bs]&&!e[bs][bz])))&&bx&&bv===K){return}if(!bs){if(bA){bt[b.expando]=bs=++b.uuid}else{bs=b.expando}}if(!e[bs]){e[bs]={};if(!bA){e[bs].toJSON=b.noop}}if(typeof br==="object"||typeof br==="function"){if(bu){e[bs][bz]=b.extend(e[bs][bz],br)}else{e[bs]=b.extend(e[bs],br)}}bw=e[bs];if(bu){if(!bw[bz]){bw[bz]={}}bw=bw[bz]}if(bv!==K){bw[b.camelCase(br)]=bv}if(br==="events"&&!bw[br]){return bw[bz]&&bw[bz].events}if(bx){by=bw[br];if(by==null){by=bw[b.camelCase(br)]}}else{by=bw}return by},removeData:function(bu,bs,bv){if(!b.acceptData(bu)){return}var bw,bx=b.expando,by=bu.nodeType,br=by?b.cache:bu,bt=by?bu[b.expando]:b.expando;if(!br[bt]){return}if(bs){bw=bv?br[bt][bx]:br[bt];if(bw){if(!bw[bs]){bs=b.camelCase(bs)}delete bw[bs];if(!S(bw)){return}}}if(bv){delete br[bt][bx];if(!S(br[bt])){return}}var e=br[bt][bx];if(b.support.deleteExpando||!br.setInterval){delete br[bt]}else{br[bt]=null}if(e){br[bt]={};if(!by){br[bt].toJSON=b.noop}br[bt][bx]=e}else{if(by){if(b.support.deleteExpando){delete bu[b.expando]}else{if(bu.removeAttribute){bu.removeAttribute(b.expando)}else{bu[b.expando]=null}}}}},_data:function(br,e,bs){return b.data(br,e,bs,true)},acceptData:function(br){if(br.nodeName){var e=b.noData[br.nodeName.toLowerCase()];if(e){return!(e===true||br.getAttribute("classid")!==e)}}return true}});b.fn.extend({data:function(bu,bw){var bv=null;if(typeof bu==="undefined"){if(this.length){bv=b.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,bs;for(var bt=0,br=e.length;bt<br;bt++){bs=e[bt].name;if(bs.indexOf("data-")===0){bs=b.camelCase(bs.substring(5));a1(this[0],bs,bv[bs])}}}}return bv}else{if(typeof bu==="object"){return this.each(function(){b.data(this,bu)})}}var bx=bu.split(".");bx[1]=bx[1]?"."+bx[1]:"";if(bw===K){bv=this.triggerHandler("getData"+bx[1]+"!",[bx[0]]);if(bv===K&&this.length){bv=b.data(this[0],bu);bv=a1(this[0],bu,bv)}return bv===K&&bx[1]?this.data(bx[0]):bv}else{return this.each(function(){var bz=b(this),by=[bx[0],bw];bz.triggerHandler("setData"+bx[1]+"!",by);b.data(this,bu,bw);bz.triggerHandler("changeData"+bx[1]+"!",by)})}},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function a1(bt,bs,bu){if(bu===K&&bt.nodeType===1){var br="data-"+bs.replace(av,"-$1").toLowerCase();bu=bt.getAttribute(br);if(typeof bu==="string"){try{bu=bu==="true"?true:bu==="false"?false:bu==="null"?null:!b.isNaN(bu)?parseFloat(bu):aL.test(bu)?b.parseJSON(bu):bu}catch(bv){}b.data(bt,bs,bu)}else{bu=K}}return bu}function S(br){for(var e in br){if(e!=="toJSON"){return false}}return true}function bd(bu,bt,bw){var bs=bt+"defer",br=bt+"queue",e=bt+"mark",bv=b.data(bu,bs,K,true);if(bv&&(bw==="queue"||!b.data(bu,br,K,true))&&(bw==="mark"||!b.data(bu,e,K,true))){setTimeout(function(){if(!b.data(bu,br,K,true)&&!b.data(bu,e,K,true)){b.removeData(bu,bs,true);bv.resolve()}},0)}}b.extend({_mark:function(br,e){if(br){e=(e||"fx")+"mark";b.data(br,e,(b.data(br,e,K,true)||0)+1,true)}},_unmark:function(bu,bt,br){if(bu!==true){br=bt;bt=bu;bu=false}if(bt){br=br||"fx";var e=br+"mark",bs=bu?0:((b.data(bt,e,K,true)||1)-1);if(bs){b.data(bt,e,bs,true)}else{b.removeData(bt,e,true);bd(bt,br,"mark")}}},queue:function(br,e,bt){if(br){e=(e||"fx")+"queue";var bs=b.data(br,e,K,true);if(bt){if(!bs||b.isArray(bt)){bs=b.data(br,e,b.makeArray(bt),true)}else{bs.push(bt)}}return bs||[]}},dequeue:function(bt,bs){bs=bs||"fx";var e=b.queue(bt,bs),br=e.shift(),bu;if(br==="inprogress"){br=e.shift()}if(br){if(bs==="fx"){e.unshift("inprogress")}br.call(bt,function(){b.dequeue(bt,bs)})}if(!e.length){b.removeData(bt,bs+"queue",true);bd(bt,bs,"queue")}}});b.fn.extend({queue:function(e,br){if(typeof e!=="string"){br=e;e="fx"}if(br===K){return b.queue(this[0],e)}return this.each(function(){var bs=b.queue(this,e,br);if(e==="fx"&&bs[0]!=="inprogress"){b.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(br,e){br=b.fx?b.fx.speeds[br]||br:br;e=e||"fx";return this.queue(e,function(){var bs=this;setTimeout(function(){b.dequeue(bs,e)},br)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(bz,bs){if(typeof bz!=="string"){bs=bz;bz=K}bz=bz||"fx";var e=b.Deferred(),br=this,bu=br.length,bx=1,bv=bz+"defer",bw=bz+"queue",by=bz+"mark",bt;function bA(){if(!(--bx)){e.resolveWith(br,[br])}}while(bu--){if((bt=b.data(br[bu],bv,K,true)||(b.data(br[bu],bw,K,true)||b.data(br[bu],by,K,true))&&b.data(br[bu],bv,b._Deferred(),true))){bx++;bt.done(bA)}}bA();return e.promise()}});var aJ=/[\n\t\r]/g,ab=/\s+/,aN=/\r/g,g=/^(?:button|input)$/i,D=/^(?:button|input|object|select|textarea)$/i,l=/^a(?:rea)?$/i,aj=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ba,aU;b.fn.extend({attr:function(e,br){return b.access(this,e,br,true,b.attr)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,br){return b.access(this,e,br,true,b.prop)},removeProp:function(e){e=b.propFix[e]||e;return this.each(function(){try{this[e]=K;delete this[e]}catch(br){}})},addClass:function(bu){var bw,bs,br,bt,bv,bx,e;if(b.isFunction(bu)){return this.each(function(by){b(this).addClass(bu.call(this,by,this.className))})}if(bu&&typeof bu==="string"){bw=bu.split(ab);for(bs=0,br=this.length;bs<br;bs++){bt=this[bs];if(bt.nodeType===1){if(!bt.className&&bw.length===1){bt.className=bu}else{bv=" "+bt.className+" ";for(bx=0,e=bw.length;bx<e;bx++){if(!~bv.indexOf(" "+bw[bx]+" ")){bv+=bw[bx]+" "}}bt.className=b.trim(bv)}}}}return this},removeClass:function(bv){var bw,bs,br,bu,bt,bx,e;if(b.isFunction(bv)){return this.each(function(by){b(this).removeClass(bv.call(this,by,this.className))})}if((bv&&typeof bv==="string")||bv===K){bw=(bv||"").split(ab);for(bs=0,br=this.length;bs<br;bs++){bu=this[bs];if(bu.nodeType===1&&bu.className){if(bv){bt=(" "+bu.className+" ").replace(aJ," ");for(bx=0,e=bw.length;bx<e;bx++){bt=bt.replace(" "+bw[bx]+" "," ")}bu.className=b.trim(bt)}else{bu.className=""}}}}return this},toggleClass:function(bt,br){var bs=typeof bt,e=typeof br==="boolean";if(b.isFunction(bt)){return this.each(function(bu){b(this).toggleClass(bt.call(this,bu,this.className,br),br)})}return this.each(function(){if(bs==="string"){var bw,bv=0,bu=b(this),bx=br,by=bt.split(ab);while((bw=by[bv++])){bx=e?bx:!bu.hasClass(bw);bu[bx?"addClass":"removeClass"](bw)}}else{if(bs==="undefined"||bs==="boolean"){if(this.className){b._data(this,"__className__",this.className)}this.className=this.className||bt===false?"":b._data(this,"__className__")||""}}})},hasClass:function(e){var bt=" "+e+" ";for(var bs=0,br=this.length;bs<br;bs++){if(this[bs].nodeType===1&&(" "+this[bs].className+" ").replace(aJ," ").indexOf(bt)>-1){return true}}return false},val:function(bt){var e,br,bs=this[0];if(!arguments.length){if(bs){e=b.valHooks[bs.nodeName.toLowerCase()]||b.valHooks[bs.type];if(e&&"get"in e&&(br=e.get(bs,"value"))!==K){return br}br=bs.value;return typeof br==="string"?br.replace(aN,""):br==null?"":br}return K}var bu=b.isFunction(bt);return this.each(function(bw){var bv=b(this),bx;if(this.nodeType!==1){return}if(bu){bx=bt.call(this,bw,bv.val())}else{bx=bt}if(bx==null){bx=""}else{if(typeof bx==="number"){bx+=""}else{if(b.isArray(bx)){bx=b.map(bx,function(by){return by==null?"":by+""})}}}e=b.valHooks[this.nodeName.toLowerCase()]||b.valHooks[this.type];if(!e||!("set"in e)||e.set(this,bx,"value")===K){this.value=bx}})}});b.extend({valHooks:{option:{get:function(e){var br=e.attributes.value;return!br||br.specified?e.value:e.text}},select:{get:function(e){var bw,bu=e.selectedIndex,bx=[],by=e.options,bt=e.type==="select-one";if(bu<0){return null}for(var br=bt?bu:0,bv=bt?bu+1:by.length;br<bv;br++){var bs=by[br];if(bs.selected&&(b.support.optDisabled?!bs.disabled:bs.getAttribute("disabled")===null)&&(!bs.parentNode.disabled||!b.nodeName(bs.parentNode,"optgroup"))){bw=b(bs).val();if(bt){return bw}bx.push(bw)}}if(bt&&!bx.length&&by.length){return b(by[bu]).val()}return bx},set:function(br,bs){var e=b.makeArray(bs);b(br).find("option").each(function(){this.selected=b.inArray(b(this).val(),e)>=0});if(!e.length){br.selectedIndex=-1}return e}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attrFix:{tabindex:"tabIndex"},attr:function(bw,bt,bx,bv){var br=bw.nodeType;if(!bw||br===3||br===8||br===2){return K}if(bv&&bt in b.attrFn){return b(bw)[bt](bx)}if(!("getAttribute"in bw)){return b.prop(bw,bt,bx)}var bs,e,bu=br!==1||!b.isXMLDoc(bw);if(bu){bt=b.attrFix[bt]||bt;e=b.attrHooks[bt];if(!e){if(aj.test(bt)){e=aU}else{if(ba){e=ba}}}}if(bx!==K){if(bx===null){b.removeAttr(bw,bt);return K}else{if(e&&"set"in e&&bu&&(bs=e.set(bw,bx,bt))!==K){return bs}else{bw.setAttribute(bt,""+bx);return bx}}}else{if(e&&"get"in e&&bu&&(bs=e.get(bw,bt))!==null){return bs}else{bs=bw.getAttribute(bt);return bs===null?K:bs}}},removeAttr:function(br,e){var bs;if(br.nodeType===1){e=b.attrFix[e]||e;b.attr(br,e,"");br.removeAttribute(e);if(aj.test(e)&&(bs=b.propFix[e]||e)in br){br[bs]=false}}},attrHooks:{type:{set:function(e,br){if(g.test(e.nodeName)&&e.parentNode){b.error("type property can't be changed")}else{if(!b.support.radioValue&&br==="radio"&&b.nodeName(e,"input")){var bs=e.value;e.setAttribute("type",br);if(bs){e.value=bs}return br}}}},value:{get:function(br,e){if(ba&&b.nodeName(br,"button")){return ba.get(br,e)}return e in br?br.value:null},set:function(br,bs,e){if(ba&&b.nodeName(br,"button")){return ba.set(br,bs,e)}br.value=bs}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(bv,bt,bw){var br=bv.nodeType;if(!bv||br===3||br===8||br===2){return K}var bs,e,bu=br!==1||!b.isXMLDoc(bv);if(bu){bt=b.propFix[bt]||bt;e=b.propHooks[bt]}if(bw!==K){if(e&&"set"in e&&(bs=e.set(bv,bw,bt))!==K){return bs}else{return(bv[bt]=bw)}}else{if(e&&"get"in e&&(bs=e.get(bv,bt))!==null){return bs}else{return bv[bt]}}},propHooks:{tabIndex:{get:function(br){var e=br.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):D.test(br.nodeName)||l.test(br.nodeName)&&br.href?0:K}}}});b.attrHooks.tabIndex=b.propHooks.tabIndex;aU={get:function(br,e){var bs;return b.prop(br,e)===true||(bs=br.getAttributeNode(e))&&bs.nodeValue!==false?e.toLowerCase():K},set:function(br,bt,e){var bs;if(bt===false){b.removeAttr(br,e)}else{bs=b.propFix[e]||e;if(bs in br){br[bs]=true}br.setAttribute(e,e.toLowerCase())}return e}};if(!b.support.getSetAttribute){ba=b.valHooks.button={get:function(bs,br){var e;e=bs.getAttributeNode(br);return e&&e.nodeValue!==""?e.nodeValue:K},set:function(bs,bt,br){var e=bs.getAttributeNode(br);if(!e){e=ap.createAttribute(br);bs.setAttributeNode(e)}return(e.nodeValue=bt+"")}};b.each(["width","height"],function(br,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{set:function(bs,bt){if(bt===""){bs.setAttribute(e,"auto");return bt}}})})}if(!b.support.hrefNormalized){b.each(["href","src","width","height"],function(br,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{get:function(bt){var bs=bt.getAttribute(e,2);return bs===null?K:bs}})})}if(!b.support.style){b.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||K},set:function(e,br){return(e.style.cssText=""+br)}}}if(!b.support.optSelected){b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(br){var e=br.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}})}if(!b.support.checkOn){b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,br){if(b.isArray(br)){return(e.checked=b.inArray(b(e).val(),br)>=0)}}})});var aW=/\.(.*)$/,a9=/^(?:textarea|input|select)$/i,N=/\./g,be=/ /g,aB=/[^\w\s.|`]/g,G=function(e){return e.replace(aB,"\\$&")};b.event={add:function(bt,bx,bC,bv){if(bt.nodeType===3||bt.nodeType===8){return}if(bC===false){bC=bg}else{if(!bC){return}}var br,bB;if(bC.handler){br=bC;bC=br.handler}if(!bC.guid){bC.guid=b.guid++}var by=b._data(bt);if(!by){return}var bD=by.events,bw=by.handle;if(!bD){by.events=bD={}}if(!bw){by.handle=bw=function(bE){return typeof b!=="undefined"&&(!bE||b.event.triggered!==bE.type)?b.event.handle.apply(bw.elem,arguments):K}}bw.elem=bt;bx=bx.split(" ");var bA,bu=0,e;while((bA=bx[bu++])){bB=br?b.extend({},br):{handler:bC,data:bv};if(bA.indexOf(".")>-1){e=bA.split(".");bA=e.shift();bB.namespace=e.slice(0).sort().join(".")}else{e=[];bB.namespace=""}bB.type=bA;if(!bB.guid){bB.guid=bC.guid}var bs=bD[bA],bz=b.event.special[bA]||{};if(!bs){bs=bD[bA]=[];if(!bz.setup||bz.setup.call(bt,bv,e,bw)===false){if(bt.addEventListener){bt.addEventListener(bA,bw,false)}else{if(bt.attachEvent){bt.attachEvent("on"+bA,bw)}}}}if(bz.add){bz.add.call(bt,bB);if(!bB.handler.guid){bB.handler.guid=bC.guid}}bs.push(bB);b.event.global[bA]=true}bt=null},global:{},remove:function(bF,bA,bs,bw){if(bF.nodeType===3||bF.nodeType===8){return}if(bs===false){bs=bg}var bI,bv,bx,bC,bD=0,bt,by,bB,bu,bz,e,bH,bE=b.hasData(bF)&&b._data(bF),br=bE&&bE.events;if(!bE||!br){return}if(bA&&bA.type){bs=bA.handler;bA=bA.type}if(!bA||typeof bA==="string"&&bA.charAt(0)==="."){bA=bA||"";for(bv in br){b.event.remove(bF,bv+bA)}return}bA=bA.split(" ");while((bv=bA[bD++])){bH=bv;e=null;bt=bv.indexOf(".")<0;by=[];if(!bt){by=bv.split(".");bv=by.shift();bB=new RegExp("(^|\\.)"+b.map(by.slice(0).sort(),G).join("\\.(?:.*\\.)?")+"(\\.|$)")}bz=br[bv];if(!bz){continue}if(!bs){for(bC=0;bC<bz.length;bC++){e=bz[bC];if(bt||bB.test(e.namespace)){b.event.remove(bF,bH,e.handler,bC);bz.splice(bC--,1)}}continue}bu=b.event.special[bv]||{};for(bC=bw||0;bC<bz.length;bC++){e=bz[bC];if(bs.guid===e.guid){if(bt||bB.test(e.namespace)){if(bw==null){bz.splice(bC--,1)}if(bu.remove){bu.remove.call(bF,e)}}if(bw!=null){break}}}if(bz.length===0||bw!=null&&bz.length===1){if(!bu.teardown||bu.teardown.call(bF,by)===false){b.removeEvent(bF,bv,bE.handle)}bI=null;delete br[bv]}}if(b.isEmptyObject(br)){var bG=bE.handle;if(bG){bG.elem=null}delete bE.events;delete bE.handle;if(b.isEmptyObject(bE)){b.removeData(bF,K,true)}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(e,bx,bv,bC){var bA=e.type||e,bs=[],br;if(bA.indexOf("!")>=0){bA=bA.slice(0,-1);br=true}if(bA.indexOf(".")>=0){bs=bA.split(".");bA=bs.shift();bs.sort()}if((!bv||b.event.customEvent[bA])&&!b.event.global[bA]){return}e=typeof e==="object"?e[b.expando]?e:new b.Event(bA,e):new b.Event(bA);e.type=bA;e.exclusive=br;e.namespace=bs.join(".");e.namespace_re=new RegExp("(^|\\.)"+bs.join("\\.(?:.*\\.)?")+"(\\.|$)");if(bC||!bv){e.preventDefault();e.stopPropagation()}if(!bv){b.each(b.cache,function(){var bE=b.expando,bD=this[bE];if(bD&&bD.events&&bD.events[bA]){b.event.trigger(e,bx,bD.handle.elem)}});return}if(bv.nodeType===3||bv.nodeType===8){return}e.result=K;e.target=bv;bx=bx!=null?b.makeArray(bx):[];bx.unshift(e);var bB=bv,bt=bA.indexOf(":")<0?"on"+bA:"";do{var by=b._data(bB,"handle");e.currentTarget=bB;if(by){by.apply(bB,bx)}if(bt&&b.acceptData(bB)&&bB[bt]&&bB[bt].apply(bB,bx)===false){e.result=false;e.preventDefault()}bB=bB.parentNode||bB.ownerDocument||bB===e.target.ownerDocument&&a7}while(bB&&!e.isPropagationStopped());if(!e.isDefaultPrevented()){var bu,bz=b.event.special[bA]||{};if((!bz._default||bz._default.call(bv.ownerDocument,e)===false)&&!(bA==="click"&&b.nodeName(bv,"a"))&&b.acceptData(bv)){try{if(bt&&bv[bA]){bu=bv[bt];if(bu){bv[bt]=null}b.event.triggered=bA;bv[bA]()}}catch(bw){}if(bu){bv[bt]=bu}b.event.triggered=K}}return e.result},handle:function(bx){bx=b.event.fix(bx||a7.event);var br=((b._data(this,"events")||{})[bx.type]||[]).slice(0),bw=!bx.exclusive&&!bx.namespace,bu=Array.prototype.slice.call(arguments,0);bu[0]=bx;bx.currentTarget=this;for(var bt=0,e=br.length;bt<e;bt++){var bv=br[bt];if(bw||bx.namespace_re.test(bv.namespace)){bx.handler=bv.handler;bx.data=bv.data;bx.handleObj=bv;var bs=bv.handler.apply(this,bu);if(bs!==K){bx.result=bs;if(bs===false){bx.preventDefault();bx.stopPropagation()}}if(bx.isImmediatePropagationStopped()){break}}}return bx.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(bu){if(bu[b.expando]){return bu}var br=bu;bu=b.Event(br);for(var bs=this.props.length,bw;bs;){bw=this.props[--bs];bu[bw]=br[bw]}if(!bu.target){bu.target=bu.srcElement||ap}if(bu.target.nodeType===3){bu.target=bu.target.parentNode}if(!bu.relatedTarget&&bu.fromElement){bu.relatedTarget=bu.fromElement===bu.target?bu.toElement:bu.fromElement}if(bu.pageX==null&&bu.clientX!=null){var bt=bu.target.ownerDocument||ap,bv=bt.documentElement,e=bt.body;bu.pageX=bu.clientX+(bv&&bv.scrollLeft||e&&e.scrollLeft||0)-(bv&&bv.clientLeft||e&&e.clientLeft||0);bu.pageY=bu.clientY+(bv&&bv.scrollTop||e&&e.scrollTop||0)-(bv&&bv.clientTop||e&&e.clientTop||0)}if(bu.which==null&&(bu.charCode!=null||bu.keyCode!=null)){bu.which=bu.charCode!=null?bu.charCode:bu.keyCode}if(!bu.metaKey&&bu.ctrlKey){bu.metaKey=bu.ctrlKey}if(!bu.which&&bu.button!==K){bu.which=(bu.button&1?1:(bu.button&2?3:(bu.button&4?2:0)))}return bu},guid:100000000,proxy:b.proxy,special:{ready:{setup:b.bindReady,teardown:b.noop},live:{add:function(e){b.event.add(this,p(e.origType,e.selector),b.extend({},e,{handler:ag,guid:e.handler.guid}))},remove:function(e){b.event.remove(this,p(e.origType,e.selector),e)}},beforeunload:{setup:function(bs,br,e){if(b.isWindow(this)){this.onbeforeunload=e}},teardown:function(br,e){if(this.onbeforeunload===e){this.onbeforeunload=null}}}}};b.removeEvent=ap.removeEventListener?function(br,e,bs){if(br.removeEventListener){br.removeEventListener(e,bs,false)}}:function(br,e,bs){if(br.detachEvent){br.detachEvent("on"+e,bs)}};b.Event=function(br,e){if(!this.preventDefault){return new b.Event(br,e)}if(br&&br.type){this.originalEvent=br;this.type=br.type;this.isDefaultPrevented=(br.defaultPrevented||br.returnValue===false||br.getPreventDefault&&br.getPreventDefault())?i:bg}else{this.type=br}if(e){b.extend(this,e)}this.timeStamp=b.now();this[b.expando]=true};function bg(){return false}function i(){return true}b.Event.prototype={preventDefault:function(){this.isDefaultPrevented=i;var br=this.originalEvent;if(!br){return}if(br.preventDefault){br.preventDefault()}else{br.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=i;var br=this.originalEvent;if(!br){return}if(br.stopPropagation){br.stopPropagation()}br.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i;this.stopPropagation()},isDefaultPrevented:bg,isPropagationStopped:bg,isImmediatePropagationStopped:bg};var aa=function(bs){var bt=bs.relatedTarget,e=false,br=bs.type;bs.type=bs.data;if(bt!==this){if(bt){e=b.contains(this,bt)}if(!e){b.event.handle.apply(this,arguments);bs.type=br}}},aR=function(e){e.type=e.data;b.event.handle.apply(this,arguments)};b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(br,e){b.event.special[br]={setup:function(bs){b.event.add(this,e,bs&&bs.selector?aR:aa,br)},teardown:function(bs){b.event.remove(this,e,bs&&bs.selector?aR:aa)}}});if(!b.support.submitBubbles){b.event.special.submit={setup:function(br,e){if(!b.nodeName(this,"form")){b.event.add(this,"click.specialSubmit",function(bu){var bt=bu.target,bs=b.nodeName(bt,"input")||b.nodeName(bt,"button")?bt.type:"";if((bs==="submit"||bs==="image")&&b(bt).closest("form").length){aT("submit",this,arguments)}});b.event.add(this,"keypress.specialSubmit",function(bu){var bt=bu.target,bs=b.nodeName(bt,"input")||b.nodeName(bt,"button")?bt.type:"";if((bs==="text"||bs==="password")&&b(bt).closest("form").length&&bu.keyCode===13){aT("submit",this,arguments)}})}else{return false}},teardown:function(e){b.event.remove(this,".specialSubmit")}}}if(!b.support.changeBubbles){var bj,k=function(br){var e=b.nodeName(br,"input")?br.type:"",bs=br.value;if(e==="radio"||e==="checkbox"){bs=br.checked}else{if(e==="select-multiple"){bs=br.selectedIndex>-1?b.map(br.options,function(bt){return bt.selected}).join("-"):""}else{if(b.nodeName(br,"select")){bs=br.selectedIndex}}}return bs},Y=function Y(bt){var br=bt.target,bs,bu;if(!a9.test(br.nodeName)||br.readOnly){return}bs=b._data(br,"_change_data");bu=k(br);if(bt.type!=="focusout"||br.type!=="radio"){b._data(br,"_change_data",bu)}if(bs===K||bu===bs){return}if(bs!=null||bu){bt.type="change";bt.liveFired=K;b.event.trigger(bt,arguments[1],br)}};b.event.special.change={filters:{focusout:Y,beforedeactivate:Y,click:function(bt){var bs=bt.target,br=b.nodeName(bs,"input")?bs.type:"";if(br==="radio"||br==="checkbox"||b.nodeName(bs,"select")){Y.call(this,bt)}},keydown:function(bt){var bs=bt.target,br=b.nodeName(bs,"input")?bs.type:"";if((bt.keyCode===13&&!b.nodeName(bs,"textarea"))||(bt.keyCode===32&&(br==="checkbox"||br==="radio"))||br==="select-multiple"){Y.call(this,bt)}},beforeactivate:function(bs){var br=bs.target;b._data(br,"_change_data",k(br))}},setup:function(bs,br){if(this.type==="file"){return false}for(var e in bj){b.event.add(this,e+".specialChange",bj[e])}return a9.test(this.nodeName)},teardown:function(e){b.event.remove(this,".specialChange");return a9.test(this.nodeName)}};bj=b.event.special.change.filters;bj.focus=bj.beforeactivate}function aT(br,bt,e){var bs=b.extend({},e[0]);bs.type=br;bs.originalEvent={};bs.liveFired=K;b.event.handle.call(bt,bs);if(bs.isDefaultPrevented()){e[0].preventDefault()}}if(!b.support.focusinBubbles){b.each({focus:"focusin",blur:"focusout"},function(bt,e){var br=0;b.event.special[e]={setup:function(){if(br++===0){ap.addEventListener(bt,bs,true)}},teardown:function(){if(--br===0){ap.removeEventListener(bt,bs,true)}}};function bs(bu){var bv=b.event.fix(bu);bv.type=e;bv.originalEvent={};b.event.trigger(bv,null,bv.target);if(bv.isDefaultPrevented()){bu.preventDefault()}}})}b.each(["bind","one"],function(br,e){b.fn[e]=function(bx,by,bw){var bv;if(typeof bx==="object"){for(var bu in bx){this[e](bu,by,bx[bu],bw)}return this}if(arguments.length===2||by===false){bw=by;by=K}if(e==="one"){bv=function(bz){b(this).unbind(bz,bv);return bw.apply(this,arguments)};bv.guid=bw.guid||b.guid++}else{bv=bw}if(bx==="unload"&&e!=="one"){this.one(bx,by,bw)}else{for(var bt=0,bs=this.length;bt<bs;bt++){b.event.add(this[bt],bx,bv,by)}}return this}});b.fn.extend({unbind:function(bu,bt){if(typeof bu==="object"&&!bu.preventDefault){for(var bs in bu){this.unbind(bs,bu[bs])}}else{for(var br=0,e=this.length;br<e;br++){b.event.remove(this[br],bu,bt)}}return this},delegate:function(e,br,bt,bs){return this.live(br,bt,bs,e)},undelegate:function(e,br,bs){if(arguments.length===0){return this.unbind("live")}else{return this.die(br,null,bs,e)}},trigger:function(e,br){return this.each(function(){b.event.trigger(e,br,this)})},triggerHandler:function(e,br){if(this[0]){return b.event.trigger(e,br,this[0],true)}},toggle:function(bt){var br=arguments,e=bt.guid||b.guid++,bs=0,bu=function(bv){var bw=(b.data(this,"lastToggle"+bt.guid)||0)%bs;b.data(this,"lastToggle"+bt.guid,bw+1);bv.preventDefault();return br[bw].apply(this,arguments)||false};bu.guid=e;while(bs<br.length){br[bs++].guid=e}return this.click(bu)},hover:function(e,br){return this.mouseenter(e).mouseleave(br||e)}});var aP={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};b.each(["live","die"],function(br,e){b.fn[e]=function(bB,by,bD,bu){var bC,bz=0,bA,bt,bF,bw=bu||this.selector,bs=bu?this:b(this.context);if(typeof bB==="object"&&!bB.preventDefault){for(var bE in bB){bs[e](bE,by,bB[bE],bw)}return this}if(e==="die"&&!bB&&bu&&bu.charAt(0)==="."){bs.unbind(bu);return this}if(by===false||b.isFunction(by)){bD=by||bg;by=K}bB=(bB||"").split(" ");while((bC=bB[bz++])!=null){bA=aW.exec(bC);bt="";if(bA){bt=bA[0];bC=bC.replace(aW,"")}if(bC==="hover"){bB.push("mouseenter"+bt,"mouseleave"+bt);continue}bF=bC;if(aP[bC]){bB.push(aP[bC]+bt);bC=bC+bt}else{bC=(aP[bC]||bC)+bt}if(e==="live"){for(var bx=0,bv=bs.length;bx<bv;bx++){b.event.add(bs[bx],"live."+p(bC,bw),{data:by,selector:bw,handler:bD,origType:bC,origHandler:bD,preType:bF})}}else{bs.unbind("live."+p(bC,bw),bD)}}return this}});function ag(bB){var by,bt,bH,bv,e,bD,bA,bC,bz,bG,bx,bw,bF,bE=[],bu=[],br=b._data(this,"events");if(bB.liveFired===this||!br||!br.live||bB.target.disabled||bB.button&&bB.type==="click"){return}if(bB.namespace){bw=new RegExp("(^|\\.)"+bB.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}bB.liveFired=this;var bs=br.live.slice(0);for(bA=0;bA<bs.length;bA++){e=bs[bA];if(e.origType.replace(aW,"")===bB.type){bu.push(e.selector)}else{bs.splice(bA--,1)}}bv=b(bB.target).closest(bu,bB.currentTarget);for(bC=0,bz=bv.length;bC<bz;bC++){bx=bv[bC];for(bA=0;bA<bs.length;bA++){e=bs[bA];if(bx.selector===e.selector&&(!bw||bw.test(e.namespace))&&!bx.elem.disabled){bD=bx.elem;bH=null;if(e.preType==="mouseenter"||e.preType==="mouseleave"){bB.type=e.preType;bH=b(bB.relatedTarget).closest(e.selector)[0];if(bH&&b.contains(bD,bH)){bH=bD}}if(!bH||bH!==bD){bE.push({elem:bD,handleObj:e,level:bx.level})}}}}for(bC=0,bz=bE.length;bC<bz;bC++){bv=bE[bC];if(bt&&bv.level>bt){break}bB.currentTarget=bv.elem;bB.data=bv.handleObj.data;bB.handleObj=bv.handleObj;bF=bv.handleObj.origHandler.apply(bv.elem,arguments);if(bF===false||bB.isPropagationStopped()){bt=bv.level;if(bF===false){by=false}if(bB.isImmediatePropagationStopped()){break}}}return by}function p(br,e){return(br&&br!=="*"?br+".":"")+e.replace(N,"`").replace(be,"&")}b.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error").split(" "),function(br,e){b.fn[e]=function(bt,bs){if(bs==null){bs=bt;bt=null}return arguments.length>0?this.bind(e,bt,bs):this.trigger(e)};if(b.attrFn){b.attrFn[e]=true}});(function(){var bB=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,bC=0,bF=Object.prototype.toString,bw=false,bv=true,bD=/\\/g,bJ=/\W/;[0,0].sort(function(){bv=false;return 0});var bt=function(bO,e,bR,bS){bR=bR||[];e=e||ap;var bU=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!bO||typeof bO!=="string"){return bR}var bL,bW,bZ,bK,bV,bY,bX,bQ,bN=true,bM=bt.isXML(e),bP=[],bT=bO;do{bB.exec("");bL=bB.exec(bT);if(bL){bT=bL[3];bP.push(bL[1]);if(bL[2]){bK=bL[3];break}}}while(bL);if(bP.length>1&&bx.exec(bO)){if(bP.length===2&&by.relative[bP[0]]){bW=bG(bP[0]+bP[1],e)}else{bW=by.relative[bP[0]]?[e]:bt(bP.shift(),e);while(bP.length){bO=bP.shift();if(by.relative[bO]){bO+=bP.shift()}bW=bG(bO,bW)}}}else{if(!bS&&bP.length>1&&e.nodeType===9&&!bM&&by.match.ID.test(bP[0])&&!by.match.ID.test(bP[bP.length-1])){bV=bt.find(bP.shift(),e,bM);e=bV.expr?bt.filter(bV.expr,bV.set)[0]:bV.set[0]}if(e){bV=bS?{expr:bP.pop(),set:bz(bS)}:bt.find(bP.pop(),bP.length===1&&(bP[0]==="~"||bP[0]==="+")&&e.parentNode?e.parentNode:e,bM);bW=bV.expr?bt.filter(bV.expr,bV.set):bV.set;if(bP.length>0){bZ=bz(bW)}else{bN=false}while(bP.length){bY=bP.pop();bX=bY;if(!by.relative[bY]){bY=""}else{bX=bP.pop()}if(bX==null){bX=e}by.relative[bY](bZ,bX,bM)}}else{bZ=bP=[]}}if(!bZ){bZ=bW}if(!bZ){bt.error(bY||bO)}if(bF.call(bZ)==="[object Array]"){if(!bN){bR.push.apply(bR,bZ)}else{if(e&&e.nodeType===1){for(bQ=0;bZ[bQ]!=null;bQ++){if(bZ[bQ]&&(bZ[bQ]===true||bZ[bQ].nodeType===1&&bt.contains(e,bZ[bQ]))){bR.push(bW[bQ])}}}else{for(bQ=0;bZ[bQ]!=null;bQ++){if(bZ[bQ]&&bZ[bQ].nodeType===1){bR.push(bW[bQ])}}}}}else{bz(bZ,bR)}if(bK){bt(bK,bU,bR,bS);bt.uniqueSort(bR)}return bR};bt.uniqueSort=function(bK){if(bE){bw=bv;bK.sort(bE);if(bw){for(var e=1;e<bK.length;e++){if(bK[e]===bK[e-1]){bK.splice(e--,1)}}}}return bK};bt.matches=function(e,bK){return bt(e,null,null,bK)};bt.matchesSelector=function(e,bK){return bt(bK,null,null,[e]).length>0};bt.find=function(bQ,e,bR){var bP;if(!bQ){return[]}for(var bM=0,bL=by.order.length;bM<bL;bM++){var bN,bO=by.order[bM];if((bN=by.leftMatch[bO].exec(bQ))){var bK=bN[1];bN.splice(1,1);if(bK.substr(bK.length-1)!=="\\"){bN[1]=(bN[1]||"").replace(bD,"");bP=by.find[bO](bN,e,bR);if(bP!=null){bQ=bQ.replace(by.match[bO],"");break}}}}if(!bP){bP=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[]}return{set:bP,expr:bQ}};bt.filter=function(bU,bT,bX,bN){var bP,e,bL=bU,bZ=[],bR=bT,bQ=bT&&bT[0]&&bt.isXML(bT[0]);while(bU&&bT.length){for(var bS in by.filter){if((bP=by.leftMatch[bS].exec(bU))!=null&&bP[2]){var bY,bW,bK=by.filter[bS],bM=bP[1];e=false;bP.splice(1,1);if(bM.substr(bM.length-1)==="\\"){continue}if(bR===bZ){bZ=[]}if(by.preFilter[bS]){bP=by.preFilter[bS](bP,bR,bX,bZ,bN,bQ);if(!bP){e=bY=true}else{if(bP===true){continue}}}if(bP){for(var bO=0;(bW=bR[bO])!=null;bO++){if(bW){bY=bK(bW,bP,bO,bR);var bV=bN^!!bY;if(bX&&bY!=null){if(bV){e=true}else{bR[bO]=false}}else{if(bV){bZ.push(bW);e=true}}}}}if(bY!==K){if(!bX){bR=bZ}bU=bU.replace(by.match[bS],"");if(!e){return[]}break}}}if(bU===bL){if(e==null){bt.error(bU)}else{break}}bL=bU}return bR};bt.error=function(e){throw"Syntax error, unrecognized expression: "+e};var by=bt.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(bP,bK){var bM=typeof bK==="string",bO=bM&&!bJ.test(bK),bQ=bM&&!bO;if(bO){bK=bK.toLowerCase()}for(var bL=0,e=bP.length,bN;bL<e;bL++){if((bN=bP[bL])){while((bN=bN.previousSibling)&&bN.nodeType!==1){}bP[bL]=bQ||bN&&bN.nodeName.toLowerCase()===bK?bN||false:bN===bK}}if(bQ){bt.filter(bK,bP,true)}},">":function(bP,bK){var bO,bN=typeof bK==="string",bL=0,e=bP.length;if(bN&&!bJ.test(bK)){bK=bK.toLowerCase();for(;bL<e;bL++){bO=bP[bL];if(bO){var bM=bO.parentNode;bP[bL]=bM.nodeName.toLowerCase()===bK?bM:false}}}else{for(;bL<e;bL++){bO=bP[bL];if(bO){bP[bL]=bN?bO.parentNode:bO.parentNode===bK}}if(bN){bt.filter(bK,bP,true)}}},"":function(bM,bK,bO){var bN,bL=bC++,e=bH;if(typeof bK==="string"&&!bJ.test(bK)){bK=bK.toLowerCase();bN=bK;e=br}e("parentNode",bK,bL,bM,bN,bO)},"~":function(bM,bK,bO){var bN,bL=bC++,e=bH;if(typeof bK==="string"&&!bJ.test(bK)){bK=bK.toLowerCase();bN=bK;e=br}e("previousSibling",bK,bL,bM,bN,bO)}},find:{ID:function(bK,bL,bM){if(typeof bL.getElementById!=="undefined"&&!bM){var e=bL.getElementById(bK[1]);return e&&e.parentNode?[e]:[]}},NAME:function(bL,bO){if(typeof bO.getElementsByName!=="undefined"){var bK=[],bN=bO.getElementsByName(bL[1]);for(var bM=0,e=bN.length;bM<e;bM++){if(bN[bM].getAttribute("name")===bL[1]){bK.push(bN[bM])}}return bK.length===0?null:bK}},TAG:function(e,bK){if(typeof bK.getElementsByTagName!=="undefined"){return bK.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(bM,bK,bL,e,bP,bQ){bM=" "+bM[1].replace(bD,"")+" ";if(bQ){return bM}for(var bN=0,bO;(bO=bK[bN])!=null;bN++){if(bO){if(bP^(bO.className&&(" "+bO.className+" ").replace(/[\t\n\r]/g," ").indexOf(bM)>=0)){if(!bL){e.push(bO)}}else{if(bL){bK[bN]=false}}}}return false},ID:function(e){return e[1].replace(bD,"")},TAG:function(bK,e){return bK[1].replace(bD,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){bt.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var bK=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(bK[1]+(bK[2]||1))-0;e[3]=bK[3]-0}else{if(e[2]){bt.error(e[0])}}e[0]=bC++;return e},ATTR:function(bN,bK,bL,e,bO,bP){var bM=bN[1]=bN[1].replace(bD,"");if(!bP&&by.attrMap[bM]){bN[1]=by.attrMap[bM]}bN[4]=(bN[4]||bN[5]||"").replace(bD,"");if(bN[2]==="~="){bN[4]=" "+bN[4]+" "}return bN},PSEUDO:function(bN,bK,bL,e,bO){if(bN[1]==="not"){if((bB.exec(bN[3])||"").length>1||/^\w/.test(bN[3])){bN[3]=bt(bN[3],null,null,bK)}else{var bM=bt.filter(bN[3],bK,bL,true^bO);if(!bL){e.push.apply(e,bM)}return false}}else{if(by.match.POS.test(bN[0])||by.match.CHILD.test(bN[0])){return true}}return bN},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(bL,bK,e){return!!bt(e[3],bL).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(bL){var e=bL.getAttribute("type"),bK=bL.type;return bL.nodeName.toLowerCase()==="input"&&"text"===bK&&(e===bK||e===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(bK){var e=bK.nodeName.toLowerCase();return(e==="input"||e==="button")&&"submit"===bK.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(bK){var e=bK.nodeName.toLowerCase();return(e==="input"||e==="button")&&"reset"===bK.type},button:function(bK){var e=bK.nodeName.toLowerCase();return e==="input"&&"button"===bK.type||e==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(bK,e){return e===0},last:function(bL,bK,e,bM){return bK===bM.length-1},even:function(bK,e){return e%2===0},odd:function(bK,e){return e%2===1},lt:function(bL,bK,e){return bK<e[3]-0},gt:function(bL,bK,e){return bK>e[3]-0},nth:function(bL,bK,e){return e[3]-0===bK},eq:function(bL,bK,e){return e[3]-0===bK}},filter:{PSEUDO:function(bL,bQ,bP,bR){var e=bQ[1],bK=by.filters[e];if(bK){return bK(bL,bP,bQ,bR)}else{if(e==="contains"){return(bL.textContent||bL.innerText||bt.getText([bL])||"").indexOf(bQ[3])>=0}else{if(e==="not"){var bM=bQ[3];for(var bO=0,bN=bM.length;bO<bN;bO++){if(bM[bO]===bL){return false}}return true}else{bt.error(e)}}}},CHILD:function(e,bM){var bP=bM[1],bK=e;switch(bP){case"only":case"first":while((bK=bK.previousSibling)){if(bK.nodeType===1){return false}}if(bP==="first"){return true}bK=e;case"last":while((bK=bK.nextSibling)){if(bK.nodeType===1){return false}}return true;case"nth":var bL=bM[2],bS=bM[3];if(bL===1&&bS===0){return true}var bO=bM[0],bR=e.parentNode;if(bR&&(bR.sizcache!==bO||!e.nodeIndex)){var bN=0;for(bK=bR.firstChild;bK;bK=bK.nextSibling){if(bK.nodeType===1){bK.nodeIndex=++bN}}bR.sizcache=bO}var bQ=e.nodeIndex-bS;if(bL===0){return bQ===0}else{return(bQ%bL===0&&bQ/bL>=0)}}},ID:function(bK,e){return bK.nodeType===1&&bK.getAttribute("id")===e},TAG:function(bK,e){return(e==="*"&&bK.nodeType===1)||bK.nodeName.toLowerCase()===e},CLASS:function(bK,e){return(" "+(bK.className||bK.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(bO,bM){var bL=bM[1],e=by.attrHandle[bL]?by.attrHandle[bL](bO):bO[bL]!=null?bO[bL]:bO.getAttribute(bL),bP=e+"",bN=bM[2],bK=bM[4];return e==null?bN==="!=":bN==="="?bP===bK:bN==="*="?bP.indexOf(bK)>=0:bN==="~="?(" "+bP+" ").indexOf(bK)>=0:!bK?bP&&e!==false:bN==="!="?bP!==bK:bN==="^="?bP.indexOf(bK)===0:bN==="$="?bP.substr(bP.length-bK.length)===bK:bN==="|="?bP===bK||bP.substr(0,bK.length+1)===bK+"-":false},POS:function(bN,bK,bL,bO){var e=bK[2],bM=by.setFilters[e];if(bM){return bM(bN,bL,bK,bO)}}}};var bx=by.match.POS,bs=function(bK,e){return"\\"+(e-0+1)};for(var bu in by.match){by.match[bu]=new RegExp(by.match[bu].source+(/(?![^\[]*\])(?![^\(]*\))/.source));by.leftMatch[bu]=new RegExp(/(^(?:.|\r|\n)*?)/.source+by.match[bu].source.replace(/\\(\d+)/g,bs))}var bz=function(bK,e){bK=Array.prototype.slice.call(bK,0);if(e){e.push.apply(e,bK);return e}return bK};try{Array.prototype.slice.call(ap.documentElement.childNodes,0)[0].nodeType}catch(bI){bz=function(bN,bM){var bL=0,bK=bM||[];if(bF.call(bN)==="[object Array]"){Array.prototype.push.apply(bK,bN)}else{if(typeof bN.length==="number"){for(var e=bN.length;bL<e;bL++){bK.push(bN[bL])}}else{for(;bN[bL];bL++){bK.push(bN[bL])}}}return bK}}var bE,bA;if(ap.documentElement.compareDocumentPosition){bE=function(bK,e){if(bK===e){bw=true;return 0}if(!bK.compareDocumentPosition||!e.compareDocumentPosition){return bK.compareDocumentPosition?-1:1}return bK.compareDocumentPosition(e)&4?-1:1}}else{bE=function(bR,bQ){if(bR===bQ){bw=true;return 0}else{if(bR.sourceIndex&&bQ.sourceIndex){return bR.sourceIndex-bQ.sourceIndex}}var bO,bK,bL=[],e=[],bN=bR.parentNode,bP=bQ.parentNode,bS=bN;if(bN===bP){return bA(bR,bQ)}else{if(!bN){return-1}else{if(!bP){return 1}}}while(bS){bL.unshift(bS);bS=bS.parentNode}bS=bP;while(bS){e.unshift(bS);bS=bS.parentNode}bO=bL.length;bK=e.length;for(var bM=0;bM<bO&&bM<bK;bM++){if(bL[bM]!==e[bM]){return bA(bL[bM],e[bM])}}return bM===bO?bA(bR,e[bM],-1):bA(bL[bM],bQ,1)};bA=function(bK,e,bL){if(bK===e){return bL}var bM=bK.nextSibling;while(bM){if(bM===e){return-1}bM=bM.nextSibling}return 1}}bt.getText=function(e){var bK="",bM;for(var bL=0;e[bL];bL++){bM=e[bL];if(bM.nodeType===3||bM.nodeType===4){bK+=bM.nodeValue}else{if(bM.nodeType!==8){bK+=bt.getText(bM.childNodes)}}}return bK};(function(){var bK=ap.createElement("div"),bL="script"+(new Date()).getTime(),e=ap.documentElement;bK.innerHTML="<a name='"+bL+"'/>";e.insertBefore(bK,e.firstChild);if(ap.getElementById(bL)){by.find.ID=function(bN,bO,bP){if(typeof bO.getElementById!=="undefined"&&!bP){var bM=bO.getElementById(bN[1]);return bM?bM.id===bN[1]||typeof bM.getAttributeNode!=="undefined"&&bM.getAttributeNode("id").nodeValue===bN[1]?[bM]:K:[]}};by.filter.ID=function(bO,bM){var bN=typeof bO.getAttributeNode!=="undefined"&&bO.getAttributeNode("id");return bO.nodeType===1&&bN&&bN.nodeValue===bM}}e.removeChild(bK);e=bK=null})();(function(){var e=ap.createElement("div");e.appendChild(ap.createComment(""));if(e.getElementsByTagName("*").length>0){by.find.TAG=function(bK,bO){var bN=bO.getElementsByTagName(bK[1]);if(bK[1]==="*"){var bM=[];for(var bL=0;bN[bL];bL++){if(bN[bL].nodeType===1){bM.push(bN[bL])}}bN=bM}return bN}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){by.attrHandle.href=function(bK){return bK.getAttribute("href",2)}}e=null})();if(ap.querySelectorAll){(function(){var e=bt,bM=ap.createElement("div"),bL="__sizzle__";bM.innerHTML="<p class='TEST'></p>";if(bM.querySelectorAll&&bM.querySelectorAll(".TEST").length===0){return}bt=function(bX,bO,bS,bW){bO=bO||ap;if(!bW&&!bt.isXML(bO)){var bV=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(bX);if(bV&&(bO.nodeType===1||bO.nodeType===9)){if(bV[1]){return bz(bO.getElementsByTagName(bX),bS)}else{if(bV[2]&&by.find.CLASS&&bO.getElementsByClassName){return bz(bO.getElementsByClassName(bV[2]),bS)}}}if(bO.nodeType===9){if(bX==="body"&&bO.body){return bz([bO.body],bS)}else{if(bV&&bV[3]){var bR=bO.getElementById(bV[3]);if(bR&&bR.parentNode){if(bR.id===bV[3]){return bz([bR],bS)}}else{return bz([],bS)}}}try{return bz(bO.querySelectorAll(bX),bS)}catch(bT){}}else{if(bO.nodeType===1&&bO.nodeName.toLowerCase()!=="object"){var bP=bO,bQ=bO.getAttribute("id"),bN=bQ||bL,bZ=bO.parentNode,bY=/^\s*[+~]/.test(bX);if(!bQ){bO.setAttribute("id",bN)}else{bN=bN.replace(/'/g,"\\$&")}if(bY&&bZ){bO=bO.parentNode}try{if(!bY||bZ){return bz(bO.querySelectorAll("[id='"+bN+"'] "+bX),bS)}}catch(bU){}finally{if(!bQ){bP.removeAttribute("id")}}}}}return e(bX,bO,bS,bW)};for(var bK in e){bt[bK]=e[bK]}bM=null})()}(function(){var e=ap.documentElement,bL=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(bL){var bN=!bL.call(ap.createElement("div"),"div"),bK=false;try{bL.call(ap.documentElement,"[test!='']:sizzle")}catch(bM){bK=true}bt.matchesSelector=function(bP,bR){bR=bR.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!bt.isXML(bP)){try{if(bK||!by.match.PSEUDO.test(bR)&&!/!=/.test(bR)){var bO=bL.call(bP,bR);if(bO||!bN||bP.document&&bP.document.nodeType!==11){return bO}}}catch(bQ){}}return bt(bR,null,null,[bP]).length>0}}})();(function(){var e=ap.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}by.order.splice(1,0,"CLASS");by.find.CLASS=function(bK,bL,bM){if(typeof bL.getElementsByClassName!=="undefined"&&!bM){return bL.getElementsByClassName(bK[1])}};e=null})();function br(bK,bP,bO,bS,bQ,bR){for(var bM=0,bL=bS.length;bM<bL;bM++){var e=bS[bM];if(e){var bN=false;e=e[bK];while(e){if(e.sizcache===bO){bN=bS[e.sizset];break}if(e.nodeType===1&&!bR){e.sizcache=bO;e.sizset=bM}if(e.nodeName.toLowerCase()===bP){bN=e;break}e=e[bK]}bS[bM]=bN}}}function bH(bK,bP,bO,bS,bQ,bR){for(var bM=0,bL=bS.length;bM<bL;bM++){var e=bS[bM];if(e){var bN=false;e=e[bK];while(e){if(e.sizcache===bO){bN=bS[e.sizset];break}if(e.nodeType===1){if(!bR){e.sizcache=bO;e.sizset=bM}if(typeof bP!=="string"){if(e===bP){bN=true;break}}else{if(bt.filter(bP,[e]).length>0){bN=e;break}}}e=e[bK]}bS[bM]=bN}}}if(ap.documentElement.contains){bt.contains=function(bK,e){return bK!==e&&(bK.contains?bK.contains(e):true)}}else{if(ap.documentElement.compareDocumentPosition){bt.contains=function(bK,e){return!!(bK.compareDocumentPosition(e)&16)}}else{bt.contains=function(){return false}}}bt.isXML=function(e){var bK=(e?e.ownerDocument||e:0).documentElement;return bK?bK.nodeName!=="HTML":false};var bG=function(e,bQ){var bO,bM=[],bN="",bL=bQ.nodeType?[bQ]:bQ;while((bO=by.match.PSEUDO.exec(e))){bN+=bO[0];e=e.replace(by.match.PSEUDO,"")}e=by.relative[e]?e+"*":e;for(var bP=0,bK=bL.length;bP<bK;bP++){bt(e,bL[bP],bM)}return bt.filter(bN,bM)};b.find=bt;b.expr=bt.selectors;b.expr[":"]=b.expr.filters;b.unique=bt.uniqueSort;b.text=bt.getText;b.isXMLDoc=bt.isXML;b.contains=bt.contains})();var X=/Until$/,al=/^(?:parents|prevUntil|prevAll)/,a5=/,/,bm=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,H=b.expr.match.POS,at={children:true,contents:true,next:true,prev:true};b.fn.extend({find:function(e){var bs=this,bu,br;if(typeof e!=="string"){return b(e).filter(function(){for(bu=0,br=bs.length;bu<br;bu++){if(b.contains(bs[bu],this)){return true}}})}var bt=this.pushStack("","find",e),bw,bx,bv;for(bu=0,br=this.length;bu<br;bu++){bw=bt.length;b.find(e,this[bu],bt);if(bu>0){for(bx=bw;bx<bt.length;bx++){for(bv=0;bv<bw;bv++){if(bt[bv]===bt[bx]){bt.splice(bx--,1);break}}}}}return bt},has:function(br){var e=b(br);return this.filter(function(){for(var bt=0,bs=e.length;bt<bs;bt++){if(b.contains(this,e[bt])){return true}}})},not:function(e){return this.pushStack(aA(this,e,false),"not",e)},filter:function(e){return this.pushStack(aA(this,e,true),"filter",e)},is:function(e){return!!e&&(typeof e==="string"?b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(bA,br){var bx=[],bu,bs,bz=this[0];if(b.isArray(bA)){var bw,bt,bv={},e=1;if(bz&&bA.length){for(bu=0,bs=bA.length;bu<bs;bu++){bt=bA[bu];if(!bv[bt]){bv[bt]=H.test(bt)?b(bt,br||this.context):bt}}while(bz&&bz.ownerDocument&&bz!==br){for(bt in bv){bw=bv[bt];if(bw.jquery?bw.index(bz)>-1:b(bz).is(bw)){bx.push({selector:bt,elem:bz,level:e})}}bz=bz.parentNode;e++}}return bx}var by=H.test(bA)||typeof bA!=="string"?b(bA,br||this.context):0;for(bu=0,bs=this.length;bu<bs;bu++){bz=this[bu];while(bz){if(by?by.index(bz)>-1:b.find.matchesSelector(bz,bA)){bx.push(bz);break}else{bz=bz.parentNode;if(!bz||!bz.ownerDocument||bz===br||bz.nodeType===11){break}}}}bx=bx.length>1?b.unique(bx):bx;return this.pushStack(bx,"closest",bA)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof e==="string"){return b.inArray(this[0],b(e))}return b.inArray(e.jquery?e[0]:e,this)},add:function(e,br){var bt=typeof e==="string"?b(e,br):b.makeArray(e&&e.nodeType?[e]:e),bs=b.merge(this.get(),bt);return this.pushStack(C(bt[0])||C(bs[0])?bs:b.unique(bs))},andSelf:function(){return this.add(this.prevObject)}});function C(e){return!e||!e.parentNode||e.parentNode.nodeType===11}b.each({parent:function(br){var e=br.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(br,e,bs){return b.dir(br,"parentNode",bs)},next:function(e){return b.nth(e,2,"nextSibling")},prev:function(e){return b.nth(e,2,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(br,e,bs){return b.dir(br,"nextSibling",bs)},prevUntil:function(br,e,bs){return b.dir(br,"previousSibling",bs)},siblings:function(e){return b.sibling(e.parentNode.firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.makeArray(e.childNodes)}},function(e,br){b.fn[e]=function(bv,bs){var bu=b.map(this,br,bv),bt=P.call(arguments);if(!X.test(e)){bs=bv}if(bs&&typeof bs==="string"){bu=b.filter(bs,bu)}bu=this.length>1&&!at[e]?b.unique(bu):bu;if((this.length>1||a5.test(bs))&&al.test(e)){bu=bu.reverse()}return this.pushStack(bu,e,bt.join(","))}});b.extend({filter:function(bs,e,br){if(br){bs=":not("+bs+")"}return e.length===1?b.find.matchesSelector(e[0],bs)?[e[0]]:[]:b.find.matches(bs,e)},dir:function(bs,br,bu){var e=[],bt=bs[br];while(bt&&bt.nodeType!==9&&(bu===K||bt.nodeType!==1||!b(bt).is(bu))){if(bt.nodeType===1){e.push(bt)}bt=bt[br]}return e},nth:function(bu,e,bs,bt){e=e||1;var br=0;for(;bu;bu=bu[bs]){if(bu.nodeType===1&&++br===e){break}}return bu},sibling:function(bs,br){var e=[];for(;bs;bs=bs.nextSibling){if(bs.nodeType===1&&bs!==br){e.push(bs)}}return e}});function aA(bt,bs,e){bs=bs||0;if(b.isFunction(bs)){return b.grep(bt,function(bv,bu){var bw=!!bs.call(bv,bu,bv);return bw===e})}else{if(bs.nodeType){return b.grep(bt,function(bv,bu){return(bv===bs)===e})}else{if(typeof bs==="string"){var br=b.grep(bt,function(bu){return bu.nodeType===1});if(bm.test(bs)){return b.filter(bs,br,!e)}else{bs=b.filter(bs,br)}}}}return b.grep(bt,function(bv,bu){return(b.inArray(bv,bs)>=0)===e})}var ac=/ jQuery\d+="(?:\d+|null)"/g,am=/^\s+/,R=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/<([\w:]+)/,w=/<tbody/i,U=/<|&#?\w+;/,O=/<(?:script|object|embed|option|style)/i,n=/checked\s*(?:[^=]|=\s*.checked.)/i,bi=/\/(java|ecma)script/i,aI=/^\s*<!(?:\[CDATA\[|\-\-)/,ar={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};ar.optgroup=ar.option;ar.tbody=ar.tfoot=ar.colgroup=ar.caption=ar.thead;ar.th=ar.td;if(!b.support.htmlSerialize){ar._default=[1,"div<div>","</div>"]}b.fn.extend({text:function(e){if(b.isFunction(e)){return this.each(function(bs){var br=b(this);br.text(e.call(this,bs,br.text()))})}if(typeof e!=="object"&&e!==K){return this.empty().append((this[0]&&this[0].ownerDocument||ap).createTextNode(e))}return b.text(this)},wrapAll:function(e){if(b.isFunction(e)){return this.each(function(bs){b(this).wrapAll(e.call(this,bs))})}if(this[0]){var br=b(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){br.insertBefore(this[0])}br.map(function(){var bs=this;while(bs.firstChild&&bs.firstChild.nodeType===1){bs=bs.firstChild}return bs}).append(this)}return this},wrapInner:function(e){if(b.isFunction(e)){return this.each(function(br){b(this).wrapInner(e.call(this,br))})}return this.each(function(){var br=b(this),bs=br.contents();if(bs.length){bs.wrapAll(e)}else{br.append(e)}})},wrap:function(e){return this.each(function(){b(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){if(!b.nodeName(this,"body")){b(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.insertBefore(e,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(br){this.parentNode.insertBefore(br,this)})}else{if(arguments.length){var e=b(arguments[0]);e.push.apply(e,this.toArray());return this.pushStack(e,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(br){this.parentNode.insertBefore(br,this.nextSibling)})}else{if(arguments.length){var e=this.pushStack(this,"after",arguments);e.push.apply(e,b(arguments[0]).toArray());return e}}},remove:function(e,bt){for(var br=0,bs;(bs=this[br])!=null;br++){if(!e||b.filter(e,[bs]).length){if(!bt&&bs.nodeType===1){b.cleanData(bs.getElementsByTagName("*"));b.cleanData([bs])}if(bs.parentNode){bs.parentNode.removeChild(bs)}}}return this},empty:function(){for(var e=0,br;(br=this[e])!=null;e++){if(br.nodeType===1){b.cleanData(br.getElementsByTagName("*"))}while(br.firstChild){br.removeChild(br.firstChild)}}return this},clone:function(br,e){br=br==null?false:br;e=e==null?br:e;return this.map(function(){return b.clone(this,br,e)})},html:function(bt){if(bt===K){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(ac,""):null}else{if(typeof bt==="string"&&!O.test(bt)&&(b.support.leadingWhitespace||!am.test(bt))&&!ar[(d.exec(bt)||["",""])[1].toLowerCase()]){bt=bt.replace(R,"<$1></$2>");try{for(var bs=0,br=this.length;bs<br;bs++){if(this[bs].nodeType===1){b.cleanData(this[bs].getElementsByTagName("*"));this[bs].innerHTML=bt}}}catch(bu){this.empty().append(bt)}}else{if(b.isFunction(bt)){this.each(function(bv){var e=b(this);e.html(bt.call(this,bv,e.html()))})}else{this.empty().append(bt)}}}return this},replaceWith:function(e){if(this[0]&&this[0].parentNode){if(b.isFunction(e)){return this.each(function(bt){var bs=b(this),br=bs.html();bs.replaceWith(e.call(this,bt,br))})}if(typeof e!=="string"){e=b(e).detach()}return this.each(function(){var bs=this.nextSibling,br=this.parentNode;b(this).remove();if(bs){b(bs).before(e)}else{b(br).append(e)}})}else{return this.length?this.pushStack(b(b.isFunction(e)?e():e),"replaceWith",e):this}},detach:function(e){return this.remove(e,true)},domManip:function(bx,bB,bA){var bt,bu,bw,bz,by=bx[0],br=[];if(!b.support.checkClone&&arguments.length===3&&typeof by==="string"&&n.test(by)){return this.each(function(){b(this).domManip(bx,bB,bA,true)})}if(b.isFunction(by)){return this.each(function(bD){var bC=b(this);bx[0]=by.call(this,bD,bB?bC.html():K);bC.domManip(bx,bB,bA)})}if(this[0]){bz=by&&by.parentNode;if(b.support.parentNode&&bz&&bz.nodeType===11&&bz.childNodes.length===this.length){bt={fragment:bz}}else{bt=b.buildFragment(bx,this,br)}bw=bt.fragment;if(bw.childNodes.length===1){bu=bw=bw.firstChild}else{bu=bw.firstChild}if(bu){bB=bB&&b.nodeName(bu,"tr");for(var bs=0,e=this.length,bv=e-1;bs<e;bs++){bA.call(bB?a6(this[bs],bu):this[bs],bt.cacheable||(e>1&&bs<bv)?b.clone(bw,true,true):bw)}}if(br.length){b.each(br,bl)}}return this}});function a6(e,br){return b.nodeName(e,"table")?(e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody"))):e}function t(e,bx){if(bx.nodeType!==1||!b.hasData(e)){return}var bw=b.expando,bt=b.data(e),bu=b.data(bx,bt);if((bt=bt[bw])){var by=bt.events;bu=bu[bw]=b.extend({},bt);if(by){delete bu.handle;bu.events={};for(var bv in by){for(var bs=0,br=by[bv].length;bs<br;bs++){b.event.add(bx,bv+(by[bv][bs].namespace?".":"")+by[bv][bs].namespace,by[bv][bs],by[bv][bs].data)}}}}}function ad(br,e){var bs;if(e.nodeType!==1){return}if(e.clearAttributes){e.clearAttributes()}if(e.mergeAttributes){e.mergeAttributes(br)}bs=e.nodeName.toLowerCase();if(bs==="object"){e.outerHTML=br.outerHTML}else{if(bs==="input"&&(br.type==="checkbox"||br.type==="radio")){if(br.checked){e.defaultChecked=e.checked=br.checked}if(e.value!==br.value){e.value=br.value}}else{if(bs==="option"){e.selected=br.defaultSelected}else{if(bs==="input"||bs==="textarea"){e.defaultValue=br.defaultValue}}}}e.removeAttribute(b.expando)}b.buildFragment=function(bv,bt,br){var bu,e,bs,bw;if(bt&&bt[0]){bw=bt[0].ownerDocument||bt[0]}if(!bw.createDocumentFragment){bw=ap}if(bv.length===1&&typeof bv[0]==="string"&&bv[0].length<512&&bw===ap&&bv[0].charAt(0)==="<"&&!O.test(bv[0])&&(b.support.checkClone||!n.test(bv[0]))){e=true;bs=b.fragments[bv[0]];if(bs&&bs!==1){bu=bs}}if(!bu){bu=bw.createDocumentFragment();b.clean(bv,bw,bu,br)}if(e){b.fragments[bv[0]]=bs?bu:1}return{fragment:bu,cacheable:e}};b.fragments={};b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,br){b.fn[e]=function(bs){var bv=[],by=b(bs),bx=this.length===1&&this[0].parentNode;if(bx&&bx.nodeType===11&&bx.childNodes.length===1&&by.length===1){by[br](this[0]);return this}else{for(var bw=0,bt=by.length;bw<bt;bw++){var bu=(bw>0?this.clone(true):this).get();b(by[bw])[br](bu);bv=bv.concat(bu)}return this.pushStack(bv,e,by.selector)}}});function bb(e){if("getElementsByTagName"in e){return e.getElementsByTagName("*")}else{if("querySelectorAll"in e){return e.querySelectorAll("*")}else{return[]}}}function au(e){if(e.type==="checkbox"||e.type==="radio"){e.defaultChecked=e.checked}}function E(e){if(b.nodeName(e,"input")){au(e)}else{if("getElementsByTagName"in e){b.grep(e.getElementsByTagName("input"),au)}}}b.extend({clone:function(bu,bw,bs){var bv=bu.cloneNode(true),e,br,bt;if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(bu.nodeType===1||bu.nodeType===11)&&!b.isXMLDoc(bu)){ad(bu,bv);e=bb(bu);br=bb(bv);for(bt=0;e[bt];++bt){if(br[bt]){ad(e[bt],br[bt])}}}if(bw){t(bu,bv);if(bs){e=bb(bu);br=bb(bv);for(bt=0;e[bt];++bt){t(e[bt],br[bt])}}}e=br=null;return bv},clean:function(bs,bu,bD,bw){var bB;bu=bu||ap;if(typeof bu.createElement==="undefined"){bu=bu.ownerDocument||bu[0]&&bu[0].ownerDocument||ap}var bE=[],bx;for(var bA=0,bv;(bv=bs[bA])!=null;bA++){if(typeof bv==="number"){bv+=""}if(!bv){continue}if(typeof bv==="string"){if(!U.test(bv)){bv=bu.createTextNode(bv)}else{bv=bv.replace(R,"<$1></$2>");var bG=(d.exec(bv)||["",""])[1].toLowerCase(),bt=ar[bG]||ar._default,bz=bt[0],br=bu.createElement("div");br.innerHTML=bt[1]+bv+bt[2];while(bz--){br=br.lastChild}if(!b.support.tbody){var e=w.test(bv),by=bG==="table"&&!e?br.firstChild&&br.firstChild.childNodes:bt[1]==="<table>"&&!e?br.childNodes:[];for(bx=by.length-1;bx>=0;--bx){if(b.nodeName(by[bx],"tbody")&&!by[bx].childNodes.length){by[bx].parentNode.removeChild(by[bx])}}}if(!b.support.leadingWhitespace&&am.test(bv)){br.insertBefore(bu.createTextNode(am.exec(bv)[0]),br.firstChild)}bv=br.childNodes}}var bC;if(!b.support.appendChecked){if(bv[0]&&typeof(bC=bv.length)==="number"){for(bx=0;bx<bC;bx++){E(bv[bx])}}else{E(bv)}}if(bv.nodeType){bE.push(bv)}else{bE=b.merge(bE,bv)}}if(bD){bB=function(bH){return!bH.type||bi.test(bH.type)};for(bA=0;bE[bA];bA++){if(bw&&b.nodeName(bE[bA],"script")&&(!bE[bA].type||bE[bA].type.toLowerCase()==="text/javascript")){bw.push(bE[bA].parentNode?bE[bA].parentNode.removeChild(bE[bA]):bE[bA])}else{if(bE[bA].nodeType===1){var bF=b.grep(bE[bA].getElementsByTagName("script"),bB);bE.splice.apply(bE,[bA+1,0].concat(bF))}bD.appendChild(bE[bA])}}}return bE},cleanData:function(br){var bu,bs,e=b.cache,bz=b.expando,bx=b.event.special,bw=b.support.deleteExpando;for(var bv=0,bt;(bt=br[bv])!=null;bv++){if(bt.nodeName&&b.noData[bt.nodeName.toLowerCase()]){continue}bs=bt[b.expando];if(bs){bu=e[bs]&&e[bs][bz];if(bu&&bu.events){for(var by in bu.events){if(bx[by]){b.event.remove(bt,by)}else{b.removeEvent(bt,by,bu.handle)}}if(bu.handle){bu.handle.elem=null}}if(bw){delete bt[b.expando]}else{if(bt.removeAttribute){bt.removeAttribute(b.expando)}}delete e[bs]}}}});function bl(e,br){if(br.src){b.ajax({url:br.src,async:false,dataType:"script"})}else{b.globalEval((br.text||br.textContent||br.innerHTML||"").replace(aI,"/*$0*/"))}if(br.parentNode){br.parentNode.removeChild(br)}}var af=/alpha\([^)]*\)/i,ao=/opacity=([^)]*)/,z=/([A-Z]|^ms)/g,a8=/^-?\d+(?:px)?$/i,bk=/^-?\d/,I=/^([\-+])=([\-+.\de]+)/,a3={position:"absolute",visibility:"hidden",display:"block"},ai=["Left","Right"],aY=["Top","Bottom"],V,aD,aS;b.fn.css=function(e,br){if(arguments.length===2&&br===K){return this}return b.access(this,e,br,true,function(bt,bs,bu){return bu!==K?b.style(bt,bs,bu):b.css(bt,bs)})};b.extend({cssHooks:{opacity:{get:function(bs,br){if(br){var e=V(bs,"opacity","opacity");return e===""?"1":e}else{return bs.style.opacity}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(bt,bs,bz,bu){if(!bt||bt.nodeType===3||bt.nodeType===8||!bt.style){return}var bx,by,bv=b.camelCase(bs),br=bt.style,bA=b.cssHooks[bv];bs=b.cssProps[bv]||bv;if(bz!==K){by=typeof bz;if(by==="string"&&(bx=I.exec(bz))){bz=(+(bx[1]+1)*+bx[2])+parseFloat(b.css(bt,bs));by="number"}if(bz==null||by==="number"&&isNaN(bz)){return}if(by==="number"&&!b.cssNumber[bv]){bz+="px"}if(!bA||!("set"in bA)||(bz=bA.set(bt,bz))!==K){try{br[bs]=bz}catch(bw){}}}else{if(bA&&"get"in bA&&(bx=bA.get(bt,false,bu))!==K){return bx}return br[bs]}},css:function(bu,bt,br){var bs,e;bt=b.camelCase(bt);e=b.cssHooks[bt];bt=b.cssProps[bt]||bt;if(bt==="cssFloat"){bt="float"}if(e&&"get"in e&&(bs=e.get(bu,true,br))!==K){return bs}else{if(V){return V(bu,bt)}}},swap:function(bt,bs,bu){var e={};for(var br in bs){e[br]=bt.style[br];bt.style[br]=bs[br]}bu.call(bt);for(br in bs){bt.style[br]=e[br]}}});b.curCSS=b.css;b.each(["height","width"],function(br,e){b.cssHooks[e]={get:function(bu,bt,bs){var bv;if(bt){if(bu.offsetWidth!==0){return o(bu,e,bs)}else{b.swap(bu,a3,function(){bv=o(bu,e,bs)})}return bv}},set:function(bs,bt){if(a8.test(bt)){bt=parseFloat(bt);if(bt>=0){return bt+"px"}}else{return bt}}}});if(!b.support.opacity){b.cssHooks.opacity={get:function(br,e){return ao.test((e&&br.currentStyle?br.currentStyle.filter:br.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":e?"1":""},set:function(bu,bv){var bt=bu.style,br=bu.currentStyle,e=b.isNaN(bv)?"":"alpha(opacity="+bv*100+")",bs=br&&br.filter||bt.filter||"";bt.zoom=1;if(bv>=1&&b.trim(bs.replace(af,""))===""){bt.removeAttribute("filter");if(br&&!br.filter){return}}bt.filter=af.test(bs)?bs.replace(af,e):bs+" "+e}}}b(function(){if(!b.support.reliableMarginRight){b.cssHooks.marginRight={get:function(bs,br){var e;b.swap(bs,{display:"inline-block"},function(){if(br){e=V(bs,"margin-right","marginRight")}else{e=bs.style.marginRight}});return e}}}});if(ap.defaultView&&ap.defaultView.getComputedStyle){aD=function(bu,bs){var br,bt,e;bs=bs.replace(z,"-$1").toLowerCase();if(!(bt=bu.ownerDocument.defaultView)){return K}if((e=bt.getComputedStyle(bu,null))){br=e.getPropertyValue(bs);if(br===""&&!b.contains(bu.ownerDocument.documentElement,bu)){br=b.style(bu,bs)}}return br}}if(ap.documentElement.currentStyle){aS=function(bu,bs){var bv,br=bu.currentStyle&&bu.currentStyle[bs],e=bu.runtimeStyle&&bu.runtimeStyle[bs],bt=bu.style;if(!a8.test(br)&&bk.test(br)){bv=bt.left;if(e){bu.runtimeStyle.left=bu.currentStyle.left}bt.left=bs==="fontSize"?"1em":(br||0);br=bt.pixelLeft+"px";bt.left=bv;if(e){bu.runtimeStyle.left=e}}return br===""?"auto":br}}V=aD||aS;function o(bs,br,e){var bu=br==="width"?bs.offsetWidth:bs.offsetHeight,bt=br==="width"?ai:aY;if(bu>0){if(e!=="border"){b.each(bt,function(){if(!e){bu-=parseFloat(b.css(bs,"padding"+this))||0}if(e==="margin"){bu+=parseFloat(b.css(bs,e+this))||0}else{bu-=parseFloat(b.css(bs,"border"+this+"Width"))||0}})}return bu+"px"}bu=V(bs,br,br);if(bu<0||bu==null){bu=bs.style[br]||0}bu=parseFloat(bu)||0;if(e){b.each(bt,function(){bu+=parseFloat(b.css(bs,"padding"+this))||0;if(e!=="padding"){bu+=parseFloat(b.css(bs,"border"+this+"Width"))||0}if(e==="margin"){bu+=parseFloat(b.css(bs,e+this))||0}})}return bu+"px"}if(b.expr&&b.expr.filters){b.expr.filters.hidden=function(bs){var br=bs.offsetWidth,e=bs.offsetHeight;return(br===0&&e===0)||(!b.support.reliableHiddenOffsets&&(bs.style.display||b.css(bs,"display"))==="none")};b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}}var j=/%20/g,ak=/\[\]$/,bp=/\r?\n/g,bn=/#.*$/,ay=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,aV=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aH=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,aK=/^(?:GET|HEAD)$/,c=/^\/\//,L=/\?/,a2=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,q=/^(?:select|textarea)/i,h=/\s+/,bo=/([?&])_=[^&]*/,J=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,A=b.fn.load,W={},r={},az,s,aO=["*/"]+["*"];try{az=bh.href}catch(aq){az=ap.createElement("a");az.href="";az=az.href}s=J.exec(az.toLowerCase())||[];function f(e){return function(bu,bw){if(typeof bu!=="string"){bw=bu;bu="*"}if(b.isFunction(bw)){var bt=bu.toLowerCase().split(h),bs=0,bv=bt.length,br,bx,by;for(;bs<bv;bs++){br=bt[bs];by=/^\+/.test(br);if(by){br=br.substr(1)||"*"}bx=e[br]=e[br]||[];bx[by?"unshift":"push"](bw)}}}}function aQ(br,bA,bv,bz,bx,bt){bx=bx||bA.dataTypes[0];bt=bt||{};bt[bx]=true;var bw=br[bx],bs=0,e=bw?bw.length:0,bu=(br===W),by;for(;bs<e&&(bu||!by);bs++){by=bw[bs](bA,bv,bz);if(typeof by==="string"){if(!bu||bt[by]){by=K}else{bA.dataTypes.unshift(by);by=aQ(br,bA,bv,bz,by,bt)}}}if((bu||!by)&&!bt["*"]){by=aQ(br,bA,bv,bz,"*",bt)}return by}function ah(bs,bt){var br,e,bu=b.ajaxSettings.flatOptions||{};for(br in bt){if(bt[br]!==K){(bu[br]?bs:(e||(e={})))[br]=bt[br]}}if(e){b.extend(true,bs,e)}}b.fn.extend({load:function(bs,bv,bw){if(typeof bs!=="string"&&A){return A.apply(this,arguments)}else{if(!this.length){return this}}var bu=bs.indexOf(" ");if(bu>=0){var e=bs.slice(bu,bs.length);bs=bs.slice(0,bu)}var bt="GET";if(bv){if(b.isFunction(bv)){bw=bv;bv=K}else{if(typeof bv==="object"){bv=b.param(bv,b.ajaxSettings.traditional);bt="POST"}}}var br=this;b.ajax({url:bs,type:bt,dataType:"html",data:bv,complete:function(by,bx,bz){bz=by.responseText;if(by.isResolved()){by.done(function(bA){bz=bA});br.html(e?b("<div>").append(bz.replace(a2,"")).find(e):bz)}if(bw){br.each(bw,[bz,bx,by])}}});return this},serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?b.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||q.test(this.nodeName)||aV.test(this.type))}).map(function(e,br){var bs=b(this).val();return bs==null?null:b.isArray(bs)?b.map(bs,function(bu,bt){return{name:br.name,value:bu.replace(bp,"\r\n")}}):{name:br.name,value:bs.replace(bp,"\r\n")}}).get()}});b.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,br){b.fn[br]=function(bs){return this.bind(br,bs)}});b.each(["get","post"],function(e,br){b[br]=function(bs,bu,bv,bt){if(b.isFunction(bu)){bt=bt||bv;bv=bu;bu=K}return b.ajax({type:br,url:bs,data:bu,success:bv,dataType:bt})}});b.extend({getScript:function(e,br){return b.get(e,K,br,"script")},getJSON:function(e,br,bs){return b.get(e,br,bs,"json")},ajaxSetup:function(br,e){if(e){ah(br,b.ajaxSettings)}else{e=br;br=b.ajaxSettings}ah(br,e);return br},ajaxSettings:{url:az,isLocal:aH.test(s[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":aO},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a7.String,"text html":true,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:f(W),ajaxTransport:f(r),ajax:function(bv,bt){if(typeof bv==="object"){bt=bv;bv=K}bt=bt||{};var bz=b.ajaxSetup({},bt),bO=bz.context||bz,bC=bO!==bz&&(bO.nodeType||bO instanceof b)?b(bO):b.event,bN=b.Deferred(),bJ=b._Deferred(),bx=bz.statusCode||{},by,bD={},bK={},bM,bu,bH,bA,bE,bw=0,bs,bG,bF={readyState:0,setRequestHeader:function(bP,bQ){if(!bw){var e=bP.toLowerCase();bP=bK[e]=bK[e]||bP;bD[bP]=bQ}return this},getAllResponseHeaders:function(){return bw===2?bM:null},getResponseHeader:function(bP){var e;if(bw===2){if(!bu){bu={};while((e=ay.exec(bM))){bu[e[1].toLowerCase()]=e[2]}}e=bu[bP.toLowerCase()]}return e===K?null:e},overrideMimeType:function(e){if(!bw){bz.mimeType=e}return this},abort:function(e){e=e||"abort";if(bH){bH.abort(e)}bB(0,e);return this}};function bB(bV,bQ,bW,bS){if(bw===2){return}bw=2;if(bA){clearTimeout(bA)}bH=K;bM=bS||"";bF.readyState=bV>0?4:0;var bP,b0,bZ,bT=bQ,bU=bW?bf(bz,bF,bW):K,bR,bY;if(bV>=200&&bV<300||bV===304){if(bz.ifModified){if((bR=bF.getResponseHeader("Last-Modified"))){b.lastModified[by]=bR}if((bY=bF.getResponseHeader("Etag"))){b.etag[by]=bY}}if(bV===304){bT="notmodified";bP=true}else{try{b0=F(bz,bU);bT="success";bP=true}catch(bX){bT="parsererror";bZ=bX}}}else{bZ=bT;if(!bT||bV){bT="error";if(bV<0){bV=0}}}bF.status=bV;bF.statusText=""+(bQ||bT);if(bP){bN.resolveWith(bO,[b0,bT,bF])}else{bN.rejectWith(bO,[bF,bT,bZ])}bF.statusCode(bx);bx=K;if(bs){bC.trigger("ajax"+(bP?"Success":"Error"),[bF,bz,bP?b0:bZ])}bJ.resolveWith(bO,[bF,bT]);if(bs){bC.trigger("ajaxComplete",[bF,bz]);if(!(--b.active)){b.event.trigger("ajaxStop")}}}bN.promise(bF);bF.success=bF.done;bF.error=bF.fail;bF.complete=bJ.done;bF.statusCode=function(bP){if(bP){var e;if(bw<2){for(e in bP){bx[e]=[bx[e],bP[e]]}}else{e=bP[bF.status];bF.then(e,e)}}return this};bz.url=((bv||bz.url)+"").replace(bn,"").replace(c,s[1]+"//");bz.dataTypes=b.trim(bz.dataType||"*").toLowerCase().split(h);if(bz.crossDomain==null){bE=J.exec(bz.url.toLowerCase());bz.crossDomain=!!(bE&&(bE[1]!=s[1]||bE[2]!=s[2]||(bE[3]||(bE[1]==="http:"?80:443))!=(s[3]||(s[1]==="http:"?80:443))))}if(bz.data&&bz.processData&&typeof bz.data!=="string"){bz.data=b.param(bz.data,bz.traditional)}aQ(W,bz,bt,bF);if(bw===2){return false}bs=bz.global;bz.type=bz.type.toUpperCase();bz.hasContent=!aK.test(bz.type);if(bs&&b.active++===0){b.event.trigger("ajaxStart")}if(!bz.hasContent){if(bz.data){bz.url+=(L.test(bz.url)?"&":"?")+bz.data;delete bz.data}by=bz.url;if(bz.cache===false){var br=b.now(),bL=bz.url.replace(bo,"$1_="+br);bz.url=bL+((bL===bz.url)?(L.test(bz.url)?"&":"?")+"_="+br:"")}}if(bz.data&&bz.hasContent&&bz.contentType!==false||bt.contentType){bF.setRequestHeader("Content-Type",bz.contentType)}if(bz.ifModified){by=by||bz.url;if(b.lastModified[by]){bF.setRequestHeader("If-Modified-Since",b.lastModified[by])}if(b.etag[by]){bF.setRequestHeader("If-None-Match",b.etag[by])}}bF.setRequestHeader("Accept",bz.dataTypes[0]&&bz.accepts[bz.dataTypes[0]]?bz.accepts[bz.dataTypes[0]]+(bz.dataTypes[0]!=="*"?", "+aO+"; q=0.01":""):bz.accepts["*"]);for(bG in bz.headers){bF.setRequestHeader(bG,bz.headers[bG])}if(bz.beforeSend&&(bz.beforeSend.call(bO,bF,bz)===false||bw===2)){bF.abort();return false}for(bG in{success:1,error:1,complete:1}){bF[bG](bz[bG])}bH=aQ(r,bz,bt,bF);if(!bH){bB(-1,"No Transport")}else{bF.readyState=1;if(bs){bC.trigger("ajaxSend",[bF,bz])}if(bz.async&&bz.timeout>0){bA=setTimeout(function(){bF.abort("timeout")},bz.timeout)}try{bw=1;bH.send(bD,bB)}catch(bI){if(bw<2){bB(-1,bI)}else{b.error(bI)}}}return bF},param:function(e,bs){var br=[],bu=function(bv,bw){bw=b.isFunction(bw)?bw():bw;br[br.length]=encodeURIComponent(bv)+"="+encodeURIComponent(bw)};if(bs===K){bs=b.ajaxSettings.traditional}if(b.isArray(e)||(e.jquery&&!b.isPlainObject(e))){b.each(e,function(){bu(this.name,this.value)})}else{for(var bt in e){v(bt,e[bt],bs,bu)}}return br.join("&").replace(j,"+")}});function v(bs,bu,br,bt){if(b.isArray(bu)){b.each(bu,function(bw,bv){if(br||ak.test(bs)){bt(bs,bv)}else{v(bs+"["+(typeof bv==="object"||b.isArray(bv)?bw:"")+"]",bv,br,bt)}})}else{if(!br&&bu!=null&&typeof bu==="object"){for(var e in bu){v(bs+"["+e+"]",bu[e],br,bt)}}else{bt(bs,bu)}}}b.extend({active:0,lastModified:{},etag:{}});function bf(bz,by,bv){var br=bz.contents,bx=bz.dataTypes,bs=bz.responseFields,bu,bw,bt,e;for(bw in bs){if(bw in bv){by[bs[bw]]=bv[bw]}}while(bx[0]==="*"){bx.shift();if(bu===K){bu=bz.mimeType||by.getResponseHeader("content-type")}}if(bu){for(bw in br){if(br[bw]&&br[bw].test(bu)){bx.unshift(bw);break}}}if(bx[0]in bv){bt=bx[0]}else{for(bw in bv){if(!bx[0]||bz.converters[bw+" "+bx[0]]){bt=bw;break}if(!e){e=bw}}bt=bt||e}if(bt){if(bt!==bx[0]){bx.unshift(bt)}return bv[bt]}}function F(bD,bv){if(bD.dataFilter){bv=bD.dataFilter(bv,bD.dataType)}var bz=bD.dataTypes,bC={},bw,bA,bs=bz.length,bx,by=bz[0],bt,bu,bB,br,e;for(bw=1;bw<bs;bw++){if(bw===1){for(bA in bD.converters){if(typeof bA==="string"){bC[bA.toLowerCase()]=bD.converters[bA]}}}bt=by;by=bz[bw];if(by==="*"){by=bt}else{if(bt!=="*"&&bt!==by){bu=bt+" "+by;bB=bC[bu]||bC["* "+by];if(!bB){e=K;for(br in bC){bx=br.split(" ");if(bx[0]===bt||bx[0]==="*"){e=bC[bx[1]+" "+by];if(e){br=bC[br];if(br===true){bB=e}else{if(e===true){bB=br}}break}}}}if(!(bB||e)){b.error("No conversion from "+bu.replace(" "," to "))}if(bB!==true){bv=bB?bB(bv):e(br(bv))}}}}return bv}var ax=b.now(),u=/(\=)\?(&|$)|\?\?/i;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return b.expando+"_"+(ax++)}});b.ajaxPrefilter("json jsonp",function(bz,bw,by){var bt=bz.contentType==="application/x-www-form-urlencoded"&&(typeof bz.data==="string");if(bz.dataTypes[0]==="jsonp"||bz.jsonp!==false&&(u.test(bz.url)||bt&&u.test(bz.data))){var bx,bs=bz.jsonpCallback=b.isFunction(bz.jsonpCallback)?bz.jsonpCallback():bz.jsonpCallback,bv=a7[bs],e=bz.url,bu=bz.data,br="$1"+bs+"$2";if(bz.jsonp!==false){e=e.replace(u,br);if(bz.url===e){if(bt){bu=bu.replace(u,br)}if(bz.data===bu){e+=(/\?/.test(e)?"&":"?")+bz.jsonp+"="+bs}}}bz.url=e;bz.data=bu;a7[bs]=function(bA){bx=[bA]};by.always(function(){a7[bs]=bv;if(bx&&b.isFunction(bv)){a7[bs](bx[0])}});bz.converters["script json"]=function(){if(!bx){b.error(bs+" was not called")}return bx[0]};bz.dataTypes[0]="json";return"script"}});b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){b.globalEval(e);return e}}});b.ajaxPrefilter("script",function(e){if(e.cache===K){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});b.ajaxTransport("script",function(bs){if(bs.crossDomain){var e,br=ap.head||ap.getElementsByTagName("head")[0]||ap.documentElement;return{send:function(bt,bu){e=ap.createElement("script");e.async="async";if(bs.scriptCharset){e.charset=bs.scriptCharset}e.src=bs.url;e.onload=e.onreadystatechange=function(bw,bv){if(bv||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(br&&e.parentNode){br.removeChild(e)}e=K;if(!bv){bu(200,"success")}}};br.insertBefore(e,br.firstChild)},abort:function(){if(e){e.onload(0,1)}}}}});var B=a7.ActiveXObject?function(){for(var e in M){M[e](0,1)}}:false,y=0,M;function aG(){try{return new a7.XMLHttpRequest()}catch(br){}}function ae(){try{return new a7.ActiveXObject("Microsoft.XMLHTTP")}catch(br){}}b.ajaxSettings.xhr=a7.ActiveXObject?function(){return!this.isLocal&&aG()||ae()}:aG;(function(e){b.extend(b.support,{ajax:!!e,cors:!!e&&("withCredentials"in e)})})(b.ajaxSettings.xhr());if(b.support.ajax){b.ajaxTransport(function(e){if(!e.crossDomain||b.support.cors){var br;return{send:function(bx,bs){var bw=e.xhr(),bv,bu;if(e.username){bw.open(e.type,e.url,e.async,e.username,e.password)}else{bw.open(e.type,e.url,e.async)}if(e.xhrFields){for(bu in e.xhrFields){bw[bu]=e.xhrFields[bu]}}if(e.mimeType&&bw.overrideMimeType){bw.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!bx["X-Requested-With"]){bx["X-Requested-With"]="XMLHttpRequest"}try{for(bu in bx){bw.setRequestHeader(bu,bx[bu])}}catch(bt){}bw.send((e.hasContent&&e.data)||null);br=function(bG,bA){var bB,bz,by,bE,bD;try{if(br&&(bA||bw.readyState===4)){br=K;if(bv){bw.onreadystatechange=b.noop;if(B){delete M[bv]}}if(bA){if(bw.readyState!==4){bw.abort()}}else{bB=bw.status;by=bw.getAllResponseHeaders();bE={};bD=bw.responseXML;if(bD&&bD.documentElement){bE.xml=bD}bE.text=bw.responseText;try{bz=bw.statusText}catch(bF){bz=""}if(!bB&&e.isLocal&&!e.crossDomain){bB=bE.text?200:404}else{if(bB===1223){bB=204}}}}}catch(bC){if(!bA){bs(-1,bC)}}if(bE){bs(bB,bz,bE,by)}};if(!e.async||bw.readyState===4){br()}else{bv=++y;if(B){if(!M){M={};b(a7).unload(B)}M[bv]=br}bw.onreadystatechange=br}},abort:function(){if(br){br(0,1)}}}}})}var Q={},a4,m,aw=/^(?:toggle|show|hide)$/,aM=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,aZ,aC=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],a0;b.fn.extend({show:function(bt,bw,bv){var bs,bu;if(bt||bt===0){return this.animate(aX("show",3),bt,bw,bv)}else{for(var br=0,e=this.length;br<e;br++){bs=this[br];if(bs.style){bu=bs.style.display;if(!b._data(bs,"olddisplay")&&bu==="none"){bu=bs.style.display=""}if(bu===""&&b.css(bs,"display")==="none"){b._data(bs,"olddisplay",x(bs.nodeName))}}}for(br=0;br<e;br++){bs=this[br];if(bs.style){bu=bs.style.display;if(bu===""||bu==="none"){bs.style.display=b._data(bs,"olddisplay")||""}}}return this}},hide:function(bs,bv,bu){if(bs||bs===0){return this.animate(aX("hide",3),bs,bv,bu)}else{for(var br=0,e=this.length;br<e;br++){if(this[br].style){var bt=b.css(this[br],"display");if(bt!=="none"&&!b._data(this[br],"olddisplay")){b._data(this[br],"olddisplay",bt)}}}for(br=0;br<e;br++){if(this[br].style){this[br].style.display="none"}}return this}},_toggle:b.fn.toggle,toggle:function(bs,br,bt){var e=typeof bs==="boolean";if(b.isFunction(bs)&&b.isFunction(br)){this._toggle.apply(this,arguments)}else{if(bs==null||e){this.each(function(){var bu=e?bs:b(this).is(":hidden");b(this)[bu?"show":"hide"]()})}else{this.animate(aX("toggle",3),bs,br,bt)}}return this},fadeTo:function(e,bt,bs,br){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:bt},e,bs,br)},animate:function(bu,br,bt,bs){var e=b.speed(br,bt,bs);if(b.isEmptyObject(bu)){return this.each(e.complete,[false])}bu=b.extend({},bu);return this[e.queue===false?"each":"queue"](function(){if(e.queue===false){b._mark(this)}var by=b.extend({},e),bF=this.nodeType===1,bC=bF&&b(this).is(":hidden"),bv,bz,bx,bE,bD,bB,bw,bA,bG;by.animatedProperties={};for(bx in bu){bv=b.camelCase(bx);if(bx!==bv){bu[bv]=bu[bx];delete bu[bx]}bz=bu[bv];if(b.isArray(bz)){by.animatedProperties[bv]=bz[1];bz=bu[bv]=bz[0]}else{by.animatedProperties[bv]=by.specialEasing&&by.specialEasing[bv]||by.easing||"swing"}if(bz==="hide"&&bC||bz==="show"&&!bC){return by.complete.call(this)}if(bF&&(bv==="height"||bv==="width")){by.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(b.css(this,"display")==="inline"&&b.css(this,"float")==="none"){if(!b.support.inlineBlockNeedsLayout){this.style.display="inline-block"}else{bE=x(this.nodeName);if(bE==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}}}}if(by.overflow!=null){this.style.overflow="hidden"}for(bx in bu){bD=new b.fx(this,by,bx);bz=bu[bx];if(aw.test(bz)){bD[bz==="toggle"?bC?"show":"hide":bz]()}else{bB=aM.exec(bz);bw=bD.cur();if(bB){bA=parseFloat(bB[2]);bG=bB[3]||(b.cssNumber[bx]?"":"px");if(bG!=="px"){b.style(this,bx,(bA||1)+bG);bw=((bA||1)/bD.cur())*bw;b.style(this,bx,bw+bG)}if(bB[1]){bA=((bB[1]==="-="?-1:1)*bA)+bw}bD.custom(bw,bA,bG)}else{bD.custom(bw,bz,"")}}}return true})},stop:function(br,e){if(br){this.queue([])}this.each(function(){var bt=b.timers,bs=bt.length;if(!e){b._unmark(true,this)}while(bs--){if(bt[bs].elem===this){if(e){bt[bs](true)}bt.splice(bs,1)}}});if(!e){this.dequeue()}return this}});function bc(){setTimeout(an,0);return(a0=b.now())}function an(){a0=K}function aX(br,e){var bs={};b.each(aC.concat.apply([],aC.slice(0,e)),function(){bs[this]=br});return bs}b.each({slideDown:aX("show",1),slideUp:aX("hide",1),slideToggle:aX("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,br){b.fn[e]=function(bs,bu,bt){return this.animate(br,bs,bu,bt)}});b.extend({speed:function(bs,bt,br){var e=bs&&typeof bs==="object"?b.extend({},bs):{complete:br||!br&&bt||b.isFunction(bs)&&bs,duration:bs,easing:br&&bt||bt&&!b.isFunction(bt)&&bt};e.duration=b.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in b.fx.speeds?b.fx.speeds[e.duration]:b.fx.speeds._default;e.old=e.complete;e.complete=function(bu){if(b.isFunction(e.old)){e.old.call(this)}if(e.queue!==false){b.dequeue(this)}else{if(bu!==false){b._unmark(this)}}};return e},easing:{linear:function(bs,bt,e,br){return e+br*bs},swing:function(bs,bt,e,br){return((-Math.cos(bs*Math.PI)/2)+0.5)*br+e}},timers:[],fx:function(br,e,bs){this.options=e;this.elem=br;this.prop=bs;e.orig=e.orig||{}}});b.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(b.fx.step[this.prop]||b.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var e,br=b.css(this.elem,this.prop);return isNaN(e=parseFloat(br))?!br||br==="auto"?0:br:e},custom:function(bv,bu,bt){var e=this,bs=b.fx;this.startTime=a0||bc();this.start=bv;this.end=bu;this.unit=bt||this.unit||(b.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;function br(bw){return e.step(bw)}br.elem=this.elem;if(br()&&b.timers.push(br)&&!aZ){aZ=setInterval(bs.tick,bs.interval)}},show:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());b(this.elem).show()},hide:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(bu){var bt=a0||bc(),e=true,bv=this.elem,br=this.options,bs,bx;if(bu||bt>=br.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();br.animatedProperties[this.prop]=true;for(bs in br.animatedProperties){if(br.animatedProperties[bs]!==true){e=false}}if(e){if(br.overflow!=null&&!b.support.shrinkWrapBlocks){b.each(["","X","Y"],function(by,bz){bv.style["overflow"+bz]=br.overflow[by]})}if(br.hide){b(bv).hide()}if(br.hide||br.show){for(var bw in br.animatedProperties){b.style(bv,bw,br.orig[bw])}}br.complete.call(bv)}return false}else{if(br.duration==Infinity){this.now=bt}else{bx=bt-this.startTime;this.state=bx/br.duration;this.pos=b.easing[br.animatedProperties[this.prop]](this.state,bx,0,1,br.duration);this.now=this.start+((this.end-this.start)*this.pos)}this.update()}return true}};b.extend(b.fx,{tick:function(){for(var br=b.timers,e=0;e<br.length;++e){if(!br[e]()){br.splice(e--,1)}}if(!br.length){b.fx.stop()}},interval:13,stop:function(){clearInterval(aZ);aZ=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){b.style(e.elem,"opacity",e.now)},_default:function(e){if(e.elem.style&&e.elem.style[e.prop]!=null){e.elem.style[e.prop]=(e.prop==="width"||e.prop==="height"?Math.max(0,e.now):e.now)+e.unit}else{e.elem[e.prop]=e.now}}}});if(b.expr&&b.expr.filters){b.expr.filters.animated=function(e){return b.grep(b.timers,function(br){return e===br.elem}).length}}function x(bt){if(!Q[bt]){var e=ap.body,br=b("<"+bt+">").appendTo(e),bs=br.css("display");br.remove();if(bs==="none"||bs===""){if(!a4){a4=ap.createElement("iframe");a4.frameBorder=a4.width=a4.height=0}e.appendChild(a4);if(!m||!a4.createElement){m=(a4.contentWindow||a4.contentDocument).document;m.write((ap.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");m.close()}br=m.createElement(bt);m.body.appendChild(br);bs=b.css(br,"display");e.removeChild(a4)}Q[bt]=bs}return Q[bt]}var T=/^t(?:able|d|h)$/i,Z=/^(?:body|html)$/i;if("getBoundingClientRect"in ap.documentElement){b.fn.offset=function(bE){var bu=this[0],bx;if(bE){return this.each(function(e){b.offset.setOffset(this,bE,e)})}if(!bu||!bu.ownerDocument){return null}if(bu===bu.ownerDocument.body){return b.offset.bodyOffset(bu)}try{bx=bu.getBoundingClientRect()}catch(bB){}var bD=bu.ownerDocument,bs=bD.documentElement;if(!bx||!b.contains(bs,bu)){return bx?{top:bx.top,left:bx.left}:{top:0,left:0}}var by=bD.body,bz=aF(bD),bw=bs.clientTop||by.clientTop||0,bA=bs.clientLeft||by.clientLeft||0,br=bz.pageYOffset||b.support.boxModel&&bs.scrollTop||by.scrollTop,bv=bz.pageXOffset||b.support.boxModel&&bs.scrollLeft||by.scrollLeft,bC=bx.top+br-bw,bt=bx.left+bv-bA;return{top:bC,left:bt}}}else{b.fn.offset=function(bB){var bv=this[0];if(bB){return this.each(function(bC){b.offset.setOffset(this,bB,bC)})}if(!bv||!bv.ownerDocument){return null}if(bv===bv.ownerDocument.body){return b.offset.bodyOffset(bv)}b.offset.initialize();var by,bs=bv.offsetParent,br=bv,bA=bv.ownerDocument,bt=bA.documentElement,bw=bA.body,bx=bA.defaultView,e=bx?bx.getComputedStyle(bv,null):bv.currentStyle,bz=bv.offsetTop,bu=bv.offsetLeft;while((bv=bv.parentNode)&&bv!==bw&&bv!==bt){if(b.offset.supportsFixedPosition&&e.position==="fixed"){break}by=bx?bx.getComputedStyle(bv,null):bv.currentStyle;bz-=bv.scrollTop;bu-=bv.scrollLeft;if(bv===bs){bz+=bv.offsetTop;bu+=bv.offsetLeft;if(b.offset.doesNotAddBorder&&!(b.offset.doesAddBorderForTableAndCells&&T.test(bv.nodeName))){bz+=parseFloat(by.borderTopWidth)||0;bu+=parseFloat(by.borderLeftWidth)||0}br=bs;bs=bv.offsetParent}if(b.offset.subtractsBorderForOverflowNotVisible&&by.overflow!=="visible"){bz+=parseFloat(by.borderTopWidth)||0;bu+=parseFloat(by.borderLeftWidth)||0}e=by}if(e.position==="relative"||e.position==="static"){bz+=bw.offsetTop;bu+=bw.offsetLeft}if(b.offset.supportsFixedPosition&&e.position==="fixed"){bz+=Math.max(bt.scrollTop,bw.scrollTop);bu+=Math.max(bt.scrollLeft,bw.scrollLeft)}return{top:bz,left:bu}}}b.offset={initialize:function(){var e=ap.body,br=ap.createElement("div"),bu,bw,bv,bx,bs=parseFloat(b.css(e,"marginTop"))||0,bt="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";b.extend(br.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});br.innerHTML=bt;e.insertBefore(br,e.firstChild);bu=br.firstChild;bw=bu.firstChild;bx=bu.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(bw.offsetTop!==5);this.doesAddBorderForTableAndCells=(bx.offsetTop===5);bw.style.position="fixed";bw.style.top="20px";this.supportsFixedPosition=(bw.offsetTop===20||bw.offsetTop===15);bw.style.position=bw.style.top="";bu.style.overflow="hidden";bu.style.position="relative";this.subtractsBorderForOverflowNotVisible=(bw.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(e.offsetTop!==bs);e.removeChild(br);b.offset.initialize=b.noop},bodyOffset:function(e){var bs=e.offsetTop,br=e.offsetLeft;b.offset.initialize();if(b.offset.doesNotIncludeMarginInBodyOffset){bs+=parseFloat(b.css(e,"marginTop"))||0;br+=parseFloat(b.css(e,"marginLeft"))||0}return{top:bs,left:br}},setOffset:function(bt,bC,bw){var bx=b.css(bt,"position");if(bx==="static"){bt.style.position="relative"}var bv=b(bt),br=bv.offset(),e=b.css(bt,"top"),bA=b.css(bt,"left"),bB=(bx==="absolute"||bx==="fixed")&&b.inArray("auto",[e,bA])>-1,bz={},by={},bs,bu;if(bB){by=bv.position();bs=by.top;bu=by.left}else{bs=parseFloat(e)||0;bu=parseFloat(bA)||0}if(b.isFunction(bC)){bC=bC.call(bt,bw,br)}if(bC.top!=null){bz.top=(bC.top-br.top)+bs}if(bC.left!=null){bz.left=(bC.left-br.left)+bu}if("using"in bC){bC.using.call(bt,bz)}else{bv.css(bz)}}};b.fn.extend({position:function(){if(!this[0]){return null}var bs=this[0],br=this.offsetParent(),bt=this.offset(),e=Z.test(br[0].nodeName)?{top:0,left:0}:br.offset();bt.top-=parseFloat(b.css(bs,"marginTop"))||0;bt.left-=parseFloat(b.css(bs,"marginLeft"))||0;e.top+=parseFloat(b.css(br[0],"borderTopWidth"))||0;e.left+=parseFloat(b.css(br[0],"borderLeftWidth"))||0;return{top:bt.top-e.top,left:bt.left-e.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||ap.body;while(e&&(!Z.test(e.nodeName)&&b.css(e,"position")==="static")){e=e.offsetParent}return e})}});b.each(["Left","Top"],function(br,e){var bs="scroll"+e;b.fn[bs]=function(bv){var bt,bu;if(bv===K){bt=this[0];if(!bt){return null}bu=aF(bt);return bu?("pageXOffset"in bu)?bu[br?"pageYOffset":"pageXOffset"]:b.support.boxModel&&bu.document.documentElement[bs]||bu.document.body[bs]:bt[bs]}return this.each(function(){bu=aF(this);if(bu){bu.scrollTo(!br?bv:b(bu).scrollLeft(),br?bv:b(bu).scrollTop())}else{this[bs]=bv}})}});function aF(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}b.each(["Height","Width"],function(br,e){var bs=e.toLowerCase();b.fn["inner"+e]=function(){var bt=this[0];return bt&&bt.style?parseFloat(b.css(bt,bs,"padding")):null};b.fn["outer"+e]=function(bu){var bt=this[0];return bt&&bt.style?parseFloat(b.css(bt,bs,bu?"margin":"border")):null};b.fn[bs]=function(bv){var bw=this[0];if(!bw){return bv==null?null:this}if(b.isFunction(bv)){return this.each(function(bA){var bz=b(this);bz[bs](bv.call(this,bA,bz[bs]()))})}if(b.isWindow(bw)){var bx=bw.document.documentElement["client"+e],bt=bw.document.body;return bw.document.compatMode==="CSS1Compat"&&bx||bt&&bt["client"+e]||bx}else{if(bw.nodeType===9){return Math.max(bw.documentElement["client"+e],bw.body["scroll"+e],bw.documentElement["scroll"+e],bw.body["offset"+e],bw.documentElement["offset"+e])}else{if(bv===K){var by=b.css(bw,bs),bu=parseFloat(by);return b.isNaN(bu)?by:bu}else{return this.css(bs,typeof bv==="string"?bv:bv+"px")}}}}});a7.jQuery=a7.$=b})(window);var I18n=I18n||{};I18n.defaultLocale="en";I18n.fallbacks=false;I18n.defaultSeparator=".";I18n.locale=null;I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm;I18n.isValidNode=function(obj,node,undefined){return obj[node]!==null&&obj[node]!==undefined;}
I18n.lookup=function(scope,options){var options=options||{},lookupInitialScope=scope,translations=this.prepareOptions(I18n.translations),messages=translations[options.locale||I18n.currentLocale()],options=this.prepareOptions(options),currentScope;if(!messages){return;}
if(typeof(scope)=="object"){scope=scope.join(this.defaultSeparator);}
if(options.scope){scope=options.scope.toString()+this.defaultSeparator+scope;}
scope=scope.split(this.defaultSeparator);while(scope.length>0){currentScope=scope.shift();messages=messages[currentScope];if(!messages){if(I18n.fallbacks&&!options.fallback){messages=I18n.lookup(lookupInitialScope,this.prepareOptions({locale:I18n.defaultLocale,fallback:true},options));}
break;}}
if(!messages&&this.isValidNode(options,"defaultValue")){messages=options.defaultValue;}
return messages;};I18n.prepareOptions=function(){var options={},opts,count=arguments.length;for(var i=0;i<count;i++){opts=arguments[i];if(!opts){continue;}
for(var key in opts){if(!this.isValidNode(options,key)){options[key]=opts[key];}}}
return options;};I18n.interpolate=function(message,options){options=this.prepareOptions(options);var matches=message.match(this.PLACEHOLDER),placeholder,value,name;if(!matches){return message;}
for(var i=0;placeholder=matches[i];i++){name=placeholder.replace(this.PLACEHOLDER,"$1");value=options[name];if(!this.isValidNode(options,name)){value="[missing "+placeholder+" value]";}
regex=new RegExp(placeholder.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}"));message=message.replace(regex,value);}
return message;};I18n.translate=function(scope,options){options=this.prepareOptions(options);var translation=this.lookup(scope,options);try{if(typeof(translation)=="object"){if(typeof(options.count)=="number"){return this.pluralize(options.count,scope,options);}else{return translation;}}else{return this.interpolate(translation,options);}}catch(err){return this.missingTranslation(scope);}};I18n.localize=function(scope,value){switch(scope){case"currency":return this.toCurrency(value);case"number":scope=this.lookup("number.format");return this.toNumber(value,scope);case"percentage":return this.toPercentage(value);default:if(scope.match(/^(date|time)/)){return this.toTime(scope,value);}else{return value.toString();}}};I18n.parseDate=function(date){var matches,convertedDate;if(typeof(date)=="object"){return date;};matches=date.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2}))?(Z|\+0000)?/);if(matches){for(var i=1;i<=6;i++){matches[i]=parseInt(matches[i],10)||0;}
matches[2]-=1;if(matches[7]){convertedDate=new Date(Date.UTC(matches[1],matches[2],matches[3],matches[4],matches[5],matches[6]));}else{convertedDate=new Date(matches[1],matches[2],matches[3],matches[4],matches[5],matches[6]);}}else if(typeof(date)=="number"){convertedDate=new Date();convertedDate.setTime(date);}else if(date.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)){convertedDate=new Date();convertedDate.setTime(Date.parse(date))}else{convertedDate=new Date();convertedDate.setTime(Date.parse(date));}
return convertedDate;};I18n.toTime=function(scope,d){var date=this.parseDate(d),format=this.lookup(scope);if(date.toString().match(/invalid/i)){return date.toString();}
if(!format){return date.toString();}
return this.strftime(date,format);};I18n.strftime=function(date,format){var options=this.lookup("date");if(!options){return date.toString();}
options.meridian=options.meridian||["AM","PM"];var weekDay=date.getDay(),day=date.getDate(),year=date.getFullYear(),month=date.getMonth()+1,hour=date.getHours(),hour12=hour,meridian=hour>11?1:0,secs=date.getSeconds(),mins=date.getMinutes(),offset=date.getTimezoneOffset(),absOffsetHours=Math.floor(Math.abs(offset/60)),absOffsetMinutes=Math.abs(offset)-(absOffsetHours*60),timezoneoffset=(offset>0?"-":"+")+(absOffsetHours.toString().length<2?"0"+absOffsetHours:absOffsetHours)+(absOffsetMinutes.toString().length<2?"0"+absOffsetMinutes:absOffsetMinutes);if(hour12>12){hour12=hour12-12;}else if(hour12===0){hour12=12;}
var padding=function(n){var s="0"+n.toString();return s.substr(s.length-2);};var f=format;f=f.replace("%a",options.abbr_day_names[weekDay]);f=f.replace("%A",options.day_names[weekDay]);f=f.replace("%b",options.abbr_month_names[month]);f=f.replace("%B",options.month_names[month]);f=f.replace("%d",padding(day));f=f.replace("%e",day);f=f.replace("%-d",day);f=f.replace("%H",padding(hour));f=f.replace("%-H",hour);f=f.replace("%I",padding(hour12));f=f.replace("%-I",hour12);f=f.replace("%m",padding(month));f=f.replace("%-m",month);f=f.replace("%M",padding(mins));f=f.replace("%-M",mins);f=f.replace("%p",options.meridian[meridian]);f=f.replace("%S",padding(secs));f=f.replace("%-S",secs);f=f.replace("%w",weekDay);f=f.replace("%y",padding(year));f=f.replace("%-y",padding(year).replace(/^0+/,""));f=f.replace("%Y",year);f=f.replace("%z",timezoneoffset);return f;};I18n.toNumber=function(number,options){options=this.prepareOptions(options,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:false});var negative=number<0,string=Math.abs(number).toFixed(options.precision).toString(),parts=string.split("."),precision,buffer=[],formattedNumber;number=parts[0];precision=parts[1];while(number.length>0){buffer.unshift(number.substr(Math.max(0,number.length-3),3));number=number.substr(0,number.length-3);}
formattedNumber=buffer.join(options.delimiter);if(options.precision>0){formattedNumber+=options.separator+parts[1];}
if(negative){formattedNumber="-"+formattedNumber;}
if(options.strip_insignificant_zeros){var regex={separator:new RegExp(options.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};formattedNumber=formattedNumber.replace(regex.zeros,"").replace(regex.separator,"");}
return formattedNumber;};I18n.toCurrency=function(number,options){options=this.prepareOptions(options,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."});number=this.toNumber(number,options);number=options.format.replace("%u",options.unit).replace("%n",number);return number;};I18n.toHumanSize=function(number,options){var kb=1024,size=number,iterations=0,unit,precision;while(size>=kb&&iterations<4){size=size/kb;iterations+=1;}
if(iterations===0){unit=this.t("number.human.storage_units.units.byte",{count:size});precision=0;}else{unit=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][iterations]);precision=(size-Math.floor(size)===0)?0:1;}
options=this.prepareOptions(options,{precision:precision,format:"%n%u",delimiter:""});number=this.toNumber(size,options);number=options.format.replace("%u",unit).replace("%n",number);return number;};I18n.toPercentage=function(number,options){options=this.prepareOptions(options,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""});number=this.toNumber(number,options);return number+"%";};I18n.pluralize=function(count,scope,options){var translation;try{translation=this.lookup(scope,options);}catch(error){}
if(!translation){return this.missingTranslation(scope);}
var message;options=this.prepareOptions(options);options.count=count.toString();switch(Math.abs(count)){case 0:message=this.isValidNode(translation,"zero")?translation.zero:this.isValidNode(translation,"none")?translation.none:this.isValidNode(translation,"other")?translation.other:this.missingTranslation(scope,"zero");break;case 1:message=this.isValidNode(translation,"one")?translation.one:this.missingTranslation(scope,"one");break;default:message=this.isValidNode(translation,"other")?translation.other:this.missingTranslation(scope,"other");}
return this.interpolate(message,options);};I18n.missingTranslation=function(){var message='[missing "'+this.currentLocale(),count=arguments.length;for(var i=0;i<count;i++){message+="."+arguments[i];}
message+='" translation]';return message;};I18n.currentLocale=function(){return(I18n.locale||I18n.defaultLocale);};I18n.t=I18n.translate;I18n.l=I18n.localize;I18n.p=I18n.pluralize;var I18nUrlHelper=I18nUrlHelper||{};I18nUrlHelper.urlFor=function(url){if(url.substring(0,1)!="/"){return url;}
var locales=I18n.availableLocales?new RegExp('^\\/('+I18n.availableLocales.join("|")+')'):null;if(url.search(locales)>=0){if(url.split('/')[1]==I18n.defaultLocale){return url.replace(locales,'');}}else if(I18n.locale!=I18n.defaultLocale){return('/'+I18n.locale+url);}
return url;}
Groupon.Helpers={numberToCurrency:function(number,options){options=this._optionsWithDefaults(options);if(number<0){options=this._optionsWithNegativeIndicator(number,options);number=Math.abs(number);}
number=this._numberWithPrecision(number,options);if(options.html_separate_currency){options.format=this._addHtmlToFormat(number,options);options.unit=this._addHtmlToUnit(number,options);}
number=this._numberWithPunctuation(number,options);return this._formattedNumber(number,options);},_optionsWithDefaults:function(options){var defaults;options=_.extend({},options);if(typeof(options.currency_code)!='undefined'){defaults=I18n.lookup('currency.'+options.currency_code);}
if(typeof(defaults)=='undefined'){var default_currency_code=I18n.lookup('default_currency');defaults=I18n.lookup('currency.'+default_currency_code);}
return _.extend({},defaults,options);},_optionsWithNegativeIndicator:function(number,options){if(options.negative_format){options.format=options.negative_format;}else{options.format='-'+options.format;}
return options;},_numberWithPrecision:function(number,options){var exponential,expanded_number,rounded_number;exponential=Math.pow(10,options.precision);expanded_number=(number*exponential);rounded_number=Math.round(expanded_number);return(rounded_number/exponential).toFixed(options.precision);},_numberWithPunctuation:function(number,options){var negative=(number<0);var parts=number.toString().split(".");var integer=Math.abs(parts[0]).toString();var fraction=parts[1];integer=this._delimitedInteger(integer,options);if(options.html_separate_currency){number=this._addHtmlToNumber(integer,options,fraction);}else{number=integer;if(options.precision>0)number+=options.separator+fraction;}
return number;},_delimitedInteger:function(integer,options){var delimited_sets=[];while(integer.length>0){var start_index=Math.max(0,(integer.length-3));var delimited_set=integer.substr(start_index,3);delimited_sets.unshift(delimited_set);integer=integer.substr(0,integer.length-3);}
return delimited_sets.join(options.delimiter);},_formattedNumber:function(number,options){return options.format.replace('%u',options.unit).replace('%n',number);},_addHtmlToFormat:function(number,options){var classes='currency_html';if(-1<number&&number<1)classes+=' only_fractional';options.format=options.format.replace(/-/,"&minus; ");return'<span class="'+classes+'">'+options.format+'</span>';},_addHtmlToNumber:function(integer,options,fraction){var number='<span class="integer">'+integer+'</span>';if(options.precision>0){number+='<span class="delimiter">'+options.separator+'</span>';number+='<span class="fraction">'+fraction+'</span>';}
return number;},_addHtmlToUnit:function(number,options){var classes='unit';if(options.unit.length>1)classes+=' multi_letter';return'<span class="'+classes+'">'+options.unit+'</span>';}};var I18n=I18n||{};I18n.translations={"en":{"currency":{"CAD":{"delimiter":",","format":"%u%n","precision":2,"separator":".","unit":"C$"},"USD":{"delimiter":",","format":"%u%n","precision":2,"separator":".","unit":"$"}},"default_currency":"USD","js":{"admin":{"deals":{"locale_selector":{"confirmation":"Make sure you saved all your changes first!"}}},"app":{"behaviors":{"deal_body":{"show_less":"Show Less","show_more":"Show More"}},"deals":{"confirmation":{"address_book_lite":{"ship_to_a_new_address":"Ship to a new address"},"address_validation":{"click_again":"You will have to click \"Complete Order\" again to finish purchasing.","i_know":"I know what's wrong. I'll fix it myself.","suggestion_title":"Verify Your Shipping Address"},"billing":{"errors":{"alphanumeric":"Please enter a name consisting of only alphanumeric characters.","expiration_date":"Expiration date is invalid."}},"facebook_login":{"reasons":{"one_less_password":"One less password to remember","permission":"We'll never post anything to your wall without your permission","sharing_is_easier":"Sharing with your friends is easier"},"title":"Connect with Facebook to sign in to Groupon"},"sign_in":{"breadcrumbs":{"complete_order":"Complete Order","sign_in":"Sign In"},"create_account_link":"Create an account","errors":{"email_required":"Email is required","incorrect_email_or_password":"The email address or password you entered is incorrect.","password_required":"Password is required"},"forgot_password_link":"Forgot your password?","labels":{"email_label":"Email","password_label":"Password","stay_signed_in_label":"Keep me signed in on this computer","submit_label":"Sign in"},"title":"Sign In"},"sign_up":{"breadcrumbs":{"complete_order":"Complete Order","sign_in":"Sign In"},"errors":{"confirm_password_required":"Confirm password is required","email_required":"Email is required","full_name_required":"Full name is required","must_contain_first_and_last_name":"Must contain first and last name","password_required":"Password is required","password_too_short":"Password must be at least 4 characters","passwords_must_match":"Passwords must match"},"labels":{"email_label":"Email","full_name_label":"Full name","password_confirm_label":"Confirm password","password_label":"Password","stay_signed_in_label":"Keep me signed in on this computer","submit_label":"Create account"},"legal_text":"By creating an account, you agree to Groupon's {{terms_link_open}}Terms and Conditions{{terms_link_close}} and {{privacy_link_open}}Privacy Policy{{privacy_link_close}}.","new_user":{"title":"Create an Account"},"sign_in_link":"Sign In","subscriber":{"info":"You're subscribed to Groupon emails, but we never got a password from you. Let's secure your account with one now.","title":"Secure Your Account"}},"update_billing":{"errors":{"address_cannot_be_blank":"Please enter your billing address.","credit_card_cannot_be_expired":"This card has expired.","cvv_min_length_of_3":"Security Code is too short.","field_cannot_be_blank":"This field is required.","field_must_be_numeric":"This field can only have numbers.","field_must_be_valid":"This field is not valid.","gift_message_must_be_330_or_less":"The gift message must be less than 330 characters.","invalid_character":"You have entered an invalid character.","password_confirmation_must_match_password":"Please enter your password again."}},"user":{"errors":{"alphanumeric":"Please enter a name consisting of only alphanumeric characters.","email_format":"Email address is not in a valid format.","email_required":"This field is required.","password_mismatch":"Passwords don't match."}}},"discussions_helper":{"remove_common_flag":"Remove from Commonly Asked Questions","set_common_flag":"Set as a Commonly Asked Question"},"order_receipt":{"reason_code":{"delayed":"Sorry for the wait. Your order is still pending. You can check its status anytime in {{my_groupons_open}}My Groupons{{my_groupons_close}}.","general_gateway_error":"We hit a snag while processing your card. We will try again in a bit, or you can try a different card.","pending_deal_tip":"Your Groupon is in the works! Once the deal tips, your order will be processed and you will receive a confirmation email."},"status":{"failed":"Oops. Something's not working right. We're redirecting you to the Edit Order page to take a look-see.","pending":"We're processing your order but we're doing it with an old-timey hand crank, so it might take a few seconds.","successful":"Your order has been successfully submitted!","timeout":"Sorry to keep you waiting. If you want to go grab a snack or check out the deals below, that's cool. You can always check your order status in {{my_groupons_open}}My Groupons{{my_groupons_close}}."}},"subtotal_mustache":{"free":"FREE","getaways":{"taxes":"Taxes & Fees"},"gift_message":"Gift Message (Maximum of 330 characters):","gift_wrap_fee":"Gift wrap","gift_wrap_this_item":"Gift wrap this item","shipping":{"expedited_shipping":"Expedited (3 days)","standard_shipping":"Standard"},"shipping_and_handling":"Shipping & Handling","taxes":"Taxes","vip_refund":{"eligible":"Eligible for a VIP refund","not_eligible":"Not eligible for a VIP refund","tooltip":{"getaways":"Getaway deals aren't eligible for a VIP refund. If you have any questions, please contact customer support.","goods":"VIP refunds do not apply to Groupon Goods purchases. Please refer to the fine print for this deal's return policy.","live_nation":"Ticketed events aren't eligible for a VIP refund. If you have any questions, please contact customer support.","now":"VIP refunds don't apply to Now! deals because you'll be automatically refunded within 48 hours if you don't print and use a Now! deal in time."}}}},"doc":{"support":{"fine_print":"Fine Print","goods_faq":"here","goods_faq_5":"Return Policy","labels":{"having_trouble":"Still having trouble? Tell us here.","tell_us":"Tell us what happened.","tell_us_raf":"Tell us what happened and include your friend's email address."},"my_groupons":"My Groupons","qa":"Q&A board","reasons":{"account":{"cant_access_account_or_find_my_groupons":"Can't access account or find my Groupons","other_account_access":"Other - I have an issue that is not listed","reset_my_password":"Reset my password","trouble_logging_in_on_the_mobile_app":"Trouble logging in on the mobile app","update_or_add_credit_card":"Update or add credit card"},"buy_deal":{"buying_a_groupon_as_a_gift":"Buying a Groupon as a gift","difficulty_using_a_promotional_code_buy_a_deal":"Difficulty using a promotional code","groupon_rewards":"Groupon Rewards","other_buying":"Other - I have an issue that is not listed","purchasing_on_the_mobile_app":"Purchasing on the mobile app","question_about_a_deal_from_my_e-mail":"Question about a deal from my e-mail","question_about_a_merchant":"Question about a Merchant","question_about_one_of_todays_deals":"Question about one of today's deals","trouble_updating_my_credit_card":"Trouble updating my credit card"},"emails":{"change_my_e-mail_subscriptions":"Change my e-mail subscriptions","feedback_about_an_email":"Feedback about an email","not_receiving_the_daily_emails":"Not receiving the daily emails","other_emails_subscription":"Other - I have an issue that is not listed"},"expired_groupon":{"experience_did_not_meet_my_expectations":"Experience did not meet my expectations","groupon_expired_before_i_could_use_it":"Groupon expired before I could use it","merchant_did_not_accept_my_expired_groupon":"Merchant did not accept my expired Groupon","other_expired":"Other - I have an issue that is not listed"},"failed_expectations":{"i_am_experiencing_shipping_issues":"I am experiencing shipping issues","i_could_not_schedule_an_appointment":"I could not schedule an appointment","i_experienced_poor_customer_service":"I experienced poor customer service","other_experience":"Other - I have an issue that is not listed"},"getaways":{"edit_the_quantity_of_the_order_getaways":"Edit the quantity of the order","gift_this_groupon":"Gift this Groupon","had_an_experience_that_didnt_go_well":"Had an experience that didn't go well","other_getaways_travel":"Other - I have an issue that is not listed","question_about_the_fine_print_and_getaway_report":"Question about the Fine Print and Getaway Report","the_dates_i_want_are_not_available":"The dates I want are not available","trouble_booking_my_stay":"Trouble booking my stay","trouble_printing":"Trouble printing"},"gift":{"how_do_i_give_my_groupon_as_a_gift":"How do I give my Groupon as a gift","i_want_to_buy_a_groupon_as_a_gift":"I want to buy a Groupon as a gift","issues_gifting":"Issues gifting","issues_printing":"Issues printing","other_gift":"Other - I have an issue that is not listed"},"goods":{"difficulty_contacting_the_merchant":"Difficulty contacting the merchant","edit_the_quantity_of_the_order_goods":"Edit the quantity of the order","incorrect_shipping_address":"Incorrect shipping address","item_is_defective_or_missing_parts":"Item is defective or missing parts","missing_tracking_info":"Missing tracking info","other_goods_shipping":"Other - I have an issue that is not listed","return_policy":"Return policy","shipping_is_late":"Shipping is late","wrong_item_or_not_as_expected":"Wrong item or not as expected"},"issues_using":{"cant_get_in_touch_with_the_merchant":"Can not get in touch with the merchant","how_to_redeem_my_groupon":"How to redeem my Groupon?","issues_entering_the_redemption_code_on_the_merchant_website":"Issues entering the redemption code on the merchant website","issues_locating_the_redemption_code":"Issues locating the redemption code","issues_printing_my_groupon":"Issues printing my Groupon","merchant_closed":"Merchant closed","my_groupon_has_expired":"My Groupon has expired","other_using_groupon":"Other - I have an issue that is not listed","schedule_an_appointment":"Schedule an appointment"},"merchant_appointment":{"i_cant_find_an_opening_that_meets_my_availability":"I can't find an opening that meets my availability","i_cant_use_my_groupon_when_i_want_to":"I can't use my Groupon when I want to","other_scheduling":"Other - I have an issue that is not listed","the_merchant_has_no_availability":"The Merchant has no availability","the_merchant_is_nonresponsive":"The Merchant is nonresponsive"},"my_order":{"edit_the_quantity_of_the_order_myorder":"Edit the quantity of the order","other_my_order":"Other - I have an issue that is not listed","update_a_failed_order":"Update a failed order","update_my_credit_card":"Update my credit card"},"order_quantity":{"i_made_an_accidental_purchase":"I made an accidental purchase","i_want_to_increase_my_order":"I want to increase my order","other_edit_order":"Other - I have an issue that is not listed"},"promotions":{"difficulty_using_a_promotional_code_promo":"Difficulty using a promotional code","other_promotions":"Other - I have an issue that is not listed","refer-a-friend_program":"Refer-a-Friend program"},"select_an_option":"Select an option","trouble_printing":{"gifting_a_groupon":"Gifting a Groupon","i_can_not_print_my_groupon":"I can not print my Groupon","i_dont_know_how_to_print_my_groupon":"I don't know how to print my Groupon","issues_locating_or_entering_the_redemption_code":"Issues locating or entering the redemption code","other_printing":"Other - I have an issue that is not listed"}}}},"gift_finder":{"tabs":{"all_gifts":"All Gifts","for_her":"For Her","for_him":"For Him","for_kids":"For Kids","gift_cards":"Groupon Gift Cards","most_gifted":"Most Gifted","occasions":"New Grouponicus Deals","valentines_day":"Valentine's Day"}},"now":{"deal_modal":{"share_title":"Share this deal:"},"widget":{"errors":{"loading":"Oops! There was an error loading deals. Please try again later."}}},"search_bar":{"error":{"availability":"We are experiencing difficulty finding your location. Try again later.","bad_location":"We couldn't understand that location. Try another ZIP/Postal Code, neighborhood or address.","generic":"There was an error"}},"shared":{"marketing_drive_alerts":{"places_types_incentive_qualification_success":"Thanks! {{alert_details_open}}Please enjoy your personalized deals and $10 off any Groupon deal until {{discount_expiration_date}}. Discount automatically applied at checkout. See complete terms {{terms_link_open}}here{{terms_link_close}}{{alert_details_close}}"},"personalize_wizard":{"buttons":{"almost_done":"One More Step...","back":"Back","continue":"Continue","done":"I'm Done!"},"callouts":{"call_to_action_bottom":{"close_button_text":"Close","instructions_with_name":"{{first_name}}     give us {{strong_open}}30 seconds{{strong_close}} and we'll give you better deals.","instructions_without_name":"Give us {{strong_open}}30 seconds{{strong_close}} and we'll give you better deals.","progress_bar_label":"Your Profile","start_button_text":"Personalize Now","title":"Personalize Your Groupon Experience"},"call_to_action_top":{"close_button_text":"Close","prompt":"We can give you better deals if we know a bit about you.","start_button_text":"Finish personalizing"},"completion":{"all_deals_message":"Check out the deals we found for you below.","description":"You can update your preferences anytime by visiting your {{profile_link_open}}Profile settings{{profile_link_close}}.","g1_message_with_name":"Thanks for taking the time to personalize, {{first_name}}. You can update your settings anytime by visiting your {{profile_link_open}}profile page{{profile_link_close}}.","g1_message_without_name":"Thanks for taking the time to personalize. You can update your settings anytime by visiting your {{profile_link_open}}profile page{{profile_link_close}}.","title_with_name":"Thanks for Taking the Time to Personalize, {{first_name}}!","title_without_name":"Thanks for Taking the Time to Personalize!"},"dale":{"call_to_action_side_navigation":{"button_text":"Do it!","instructions":"Give us 30 seconds and we'll give you better deals","title":"Personalize Groupon"},"call_to_action_top":{"close":"Close","link":"Complete your profile","title":"Get Better Deals"}}}}},"social_gifts":{"errors":{"unexpected_error":"Uh oh. There was an unexpected problem claiming your gift."}},"subdivisions":{"allow_geolocation":"We can't find you&mdash;enable geolocation","autocomplete_error":"No divisions matched","current_location":"Use your current location","geolocation_error":"We can't find you! Enter your location.","server_error":"Whoops! That didn't work, mind trying again?"},"subscribe":{"suggest_email":"Did you mean {{link_open}}{{suggested_email}}{{link_close}}?"},"subscription_center":{"controller":{"already_subscribed":"You are already subscribed to {{city_name}}","change_neighborhood":"Changed your neighborhood in {{div_name}} to {{city_name}}"}},"users":{"membership_coupons":{"getaways_confirm_cancellation":"Are you sure you want to cancel this reservation?"},"profiles":{"edit":{"error":{"birthday":"We couldn't save your birthday. Please try again later.","gender":"We couldn't save your gender. Please try again later.","name":"We couldn't save your name. Please try again later."},"success":{"birthday":"Thanks {{dash}} we've saved your birthday!","fill_in":"Please fill in a month, day and year.","first_name":"Hi there {{first_name}}. Nice to meet you.","gender":"Thanks {{dash}} we'll start sending you more deals for {{gender_text}}.","last_name":"Got it! Paging Dr. {{last_name}}."}}},"redemption":{"redemption_validate":{"required_code":"Please enter a valid code","required_pin":"This gift card requires a pin"}}},"vip":{"early_access":{"deals_ready":"Today's Early Access deals are ready! {{link_open}}Refresh{{link_close}} this page to see the deals."}}},"common":{"application":{"sms_mobile_app_form":{"invalid_phone_number_format":"Please specify a valid phone number","repeat_send_button":"Send Link","send_button":"Send Link","sending":"Sending..."}},"chars_remaining":{"one":"character remaining","other":"characters remaining","zero":"characters remaining"}},"jquery_validate":{"accept":"Please enter a value with a valid extension.","creditcard":"Please enter a valid credit card number.","date":"Please enter a valid date.","dateISO":"Please enter a valid date (ISO).","digits":"Please enter only digits.","email":"Please enter a valid email address.","equalTo":"Please enter the same value again.","max":"Please enter a value less than or equal to {{max}}.","maxlength":"Please enter no more than {{max}} characters.","min":"Please enter a value greater than or equal to {{min}}.","minlength":"Please enter at least {{min}} characters.","number":"Please enter a valid number.","range":"Please enter a value between {{min}} and {{max}}.","rangelength":"Please enter a value between {{min}} and {{max}} characters long.","remote":"Please fix this field.","required":"This field is required.","url":"Please enter a valid URL."},"models":{"personalize_wizard":{"gender_step":{"buttons":{"almost_done":"One More Step...","back":"Back","continue":"Continue"},"female":"Gal","male":"Guy","name":"Gender","skip":"I'd rather not {{arrow}}","subtitle":"Pick one to get the best deals for you.","title":"Who's There?"},"personas_step":{"buttons":{"almost_done":"One More Step...","back":"Back","continue":"I'm Done!"},"name":"Interests","subtitle":"We'll show you the stuff that matches your interests.","title":"Pick Your Favorite Types of Deals"},"place":{"errors":{"required":"Location can't be blank"},"home":"Home","play":"Favorite","work":"Work"},"places_step":{"buttons":{"almost_done":"One More Step...","back":"Back","continue":"Continue"},"division_playback":"{{division}} is a big place.","errors":{"required":"Location can't be blank"},"input_label":"{{location_name}} address","instructions":"{{division_playback}} Enter your home address, and we'll send you deals down the street.","name":"Location","note":"You can also add more places in your profile later","title":"Tell Us Where Home Is"}},"subscription":{"email_step":{"buttons":{"continue":"Continue"},"invalid_email":"Please enter a valid email address","label":"Email address","sub_title":"We'll send you unbeatable deals in {{division}}","title":"Your Email Address"},"facebook_step":{"buttons":{"continue":"Continue"},"fb_connect":"Instant Sign Up with Facebook","invalid_email":"Please enter a valid email address","label":"Sign Up with Your Email","or":"or","title":"We'll send you unbeatable deals in {{division}}"},"kitchen_sink_location_step":{"buttons":{"continue":"See Deals"},"invalid_kitchen_sink_location":"Sorry     we don't understand that location.","label":"ZIP, address, or neighborhood","sub_title":"We'll send you deals down the street.","title":"Tell Us Where Home Is"},"location_step":{"buttons":{"continue":"Continue"},"title":"Confirm your location:"},"subscription":{"footer_text":"Already have an account? {{login_open}}Sign In{{login_close}} | {{privacy_open}}Privacy Statement{{privacy_close}}"},"zip_step":{"buttons":{"continue":"Continue"},"invalid_zip":"Please enter a valid ZIP/postal code","label":"ZIP/Postal code","sub_title":"{{division}} is a big place. Get deals down the street.","title":"Enter your ZIP/Postal code"}}},"presenters":{"browse":{"all_deals_category_id":"all-deals","all_deals_friendly_name":"All Deals","count_message":{"one":"{{strongOpen}}{{count}}{{strongClose}} Result","other":"{{strongOpen}}{{count}}{{strongClose}} Results","zero":"{{strongOpen}}{{count}}{{strongClose}} Results"},"featured_deal_category_id":"featured-deal","featured_deal_friendly_name":"Featured Deal","location_message":"near {{emOpen}}{{location}}{{emClose}}.","new_deals_category_id":"new-deals","new_deals_friendly_name":"New Deals","no_deals_message":"Uh-oh. We don't have any deals for \"{{query}}\"","no_deals_suggestion_1":"Searching for another location","no_deals_suggestion_2":"Checking for spelling errors","no_deals_suggestion_3":"A more generic search, such as \"coffee\" instead of \"latte\"","no_deals_suggestions_label":"{{pOpen}}Try:{{pClose}}","query_message":"\"{{query}}\" deals","rewards_friendly_name":"Rewards","view_deal_button":"View"}},"views":{"admin":{"deals":{"edit":{"disable_warning":"Warning! Are you sure you want to DISABLE expiration staggering?","enable_warning":"Warning! Are you sure you want to ENABLE expiration staggering?"}}},"deals":{"confirmation":{"alerts":{"info":{"too_few":"Quantity must be {{quantity}} or more; we took care of that for you.","too_many":"Quantity must be {{quantity}} or less; we took care of that for you."}},"buy_it_as_a_gift":"Buy it as a Gift","edit_gift_options":"edit gift options","gift_for":"Gift for:","gift_this_groupon":"Gift this Groupon","give_as_gift":"Give this Groupon as a Gift","give_it_as_a_gift":"Give it as a Gift","remove_gift_options":"Really remove gift information? (You can still purchase this groupon for yourself.)"},"getaways_calendar":{"fallback_description":"Our calendar didn't load properly. Please refresh the page.","fallback_header":"Oops!","ie_7_warning":"You are using Internet Explorer 7. For a better experience, install a later version of Explorer or use Firefox, Chrome, or Safari."},"widget_collage":{"best_of_deals":{"title":"Best of the Month Deals"},"best_type_deals":{"title":"\"{{deal_type_name}}\" Deals For You"},"recently_viewed_deals":{"title":"Your Recently Viewed Deals"},"similar_deals":{"title":"Deals You're Statistically Likely to Love"}}},"heartx":{"deal":{"hide_deals":"Hide Deals Like This"},"error_message":{"try_again":"Unable to save. Try again."},"reasons_menu":{"neutral_feedback":{"title":"What do you like about this deal?"},"positive_direct_feedback":{"title":"Got it. We'll remember that."},"positive_feedback":{"title":"Recommended because you like {{emOpen}}{{reasons}}{{emClose}} deals."}},"undo_feedback":{"confirmation":"Got it. We won't show you deals like this anymore.","undo_button":"Undo"}},"widgets":{"best_of_deals":{"title":"Best of the Month Deals"},"best_type_deals":{"title":"\"{{deal_type_name}}\" Deals For You"},"receipt_page_rvd":{"title":"Your Recently Viewed Deals"},"recently_viewed_deals":{"title":"Recently Viewed Deals"},"related_deals":{"title":"Related Deals that Might Interest You"},"similar_deals":{"title":"Customers Also Viewed"}}}},"mustache":{"deals":{"deal":{"status":{"limited_quantity":"Limited quantity available","limited_time":"Limited time remaining!","time_left":"Time left to buy"}},"deal_group":{"see_all_title_deals":"See all {{title}}","show_more_title_deals":"Show more {{title}}","title_deals":"{{title}}"}},"goods_delivery_estimation":{"change":"change","delivery_zip":"Delivery Postal Code","estimation_from":"Estimated from ","or":"OR","order_now_and_get_it":"Order now and get it","remember_this_zip":"Remember this postal code","update":"Update","where_to_ship":"Where do you want your purchase delivered?","your_zip":"Your Postal Code:"},"groupon":{"channels":{"deal":{"online_deal":"Online Deal","time_left_to_buy":"Time left to buy:","view_this_deal":"View This Deal"},"rollover":{"view_this_deal":"View This Deal"}},"deals":{"all_deals":{"featured_deal":{"time_left_to_buy":"Time Left To Buy","view_deal":"View Deal"},"nonfeatured_deal":{"view_deal":"View Deal"},"save_location":{"locations":{"home":"Home","play":"Favorite","work":"Work"},"save":"Save","save_this_to_your_places":"Save this to your places as"}},"discount":{"discount":"Discount","remaining":"Remaining","savings":"You Save","value":"Value"},"location":{"get_directions":"Get Directions"},"merchant":{"company_website":"Company Website"},"orders":{"receipt":{"header_original":"{{h2_open}}You unlocked these top deals! {{span_open}}(Limited time only){{span_close}}{{h2_close}}","header_vip":"{{h2_open}}More recommended deals exclusive to VIPs.{{h2_close}}"}},"price_tag":{"buy":"Buy","no_longer_available":"No Longer Available","sold_out":"Sold Out"},"sharing":{"email":{"non_raf":{"body":"Check out this awesome Groupon deal!{{line_break}}{{line_break}}{{deal_title}}{{line_break}}{{deal_link}}","subject":"I think you'd like this Groupon deal: {{deal_title}}"},"raf":{"body":"Check out this awesome Groupon deal. If you sign up and buy it, you might earn me some Groupon credit, which will earn you my undying appreciation.{{line_break}}{{line_break}}{{deal_title}}{{line_break}}{{deal_link}}","both_gain":{"body":"I just bought this deal. Grab one for yourself. If its your first groupon, we both get $5 back!{{line_break}}{{line_break}}{{deal_title}}{{line_break}}{{deal_link}}","subject":"I think you'd like this Groupon deal: {{deal_title}}"},"non_incentive":{"body":"I grabbed this deal as soon as I saw it! I think you'd like it too!{{line_break}}{{line_break}}{{deal_title}}{{line_break}}{{deal_link}}","subject":"I think you'd like this Groupon deal: {{deal_title}}"},"subject":"I think you'd like this Groupon deal: {{deal_title}}"}},"non_raf_prominent":{"collapsed":"Share this deal.","expanded":"Share with friends"},"raf_non_prominent":{"bottom":{"logged_out":"(Or just share!)"},"title":{"logged_in":"Share this. Earn {{value}}* {{question_mark}}","logged_out":"{{a_open}}Sign in{{a_close}}, share, get {{value}}* {{question_mark}}"}},"raf_prominent":{"collapsed":"Share this. Get {{value}}*","logged_in":"Share this. Get {{value}}* {{question_mark}}","logged_out":"{{a_open}}Sign in{{a_close}}, share, get {{value}}* {{question_mark}}"},"raf_variants":{"share_msg":{"10r1act":"I think you will like this Groupon deal that I just bought!","10r1actfb":"I think you will like this Groupon deal that I just bought!","5r1pur":"I think you will like this Groupon deal that I just bought!","5r1purfb":"I think you will like this Groupon deal that I just bought!","5rr1act":"I just bought this deal. Grab one for yourself. If its your first groupon, we both get $5 back!","5rr1actfb":"I just bought this deal. Grab one for yourself. If its your first groupon, we both get $5 back!","nr3pur":"I think you will like this Groupon deal that I just bought!","nr3purfb":"I think you will like this Groupon deal that I just bought!","var3":"I grabbed this deal as soon as I saw it! I think you'd like it too!"}}},"subtotal":{"apply":"Apply","close":"close","description":"Description","edit_gift_options":"edit gift options","enter_gift_info":"Enter Gift Info","getaways":{"check_in":"Check-in","check_out":"Check-out","first_name":"Traveler First Name","last_name":"Traveler Last Name","number_of_nights":"Nights","traveler_name_note":"Please enter the traveler's name as shown on his or her valid government-issued photo ID."},"gift_for":"Gift for:","give_as_gift":"Give this Groupon as a Gift","groupon_bucks":"Groupon Bucks","groupon_bucks_none_remaining":"You'll have used all your Bucks.","groupon_bucks_remaining":"You'll have {{strong_open}}{{remaining_points}} Bucks{{strong_close}} remaining.","invite_only_message":"This deal is invitation-only. Only those who've received a designated email are eligible to purchase it. {{link_open}}Learn more{{link_close}}","my_price":"My Price:","no_vip_refund_tooltip":"Why can't I get a VIP refund?","no_vip_refund_tooltip_target":"Why can't I get a VIP refund?","price":"Price","quantity":"Quantity","reward_fine_print":"Reward Fine Print","total":"Total","use_promo_or_gift_code":"Use a promotion or gift code"}},"gifting":{"giftable_deals":{"location_bar":{"button_text":"Done","errors":{"geocode_failure":"We were unable to recognize this location."},"near":"Near:","title":"Enter an address, city or zip code."}}},"help_center":{"help_wizard":{"purchased":"Purchased","quantity":"Qty"}},"shared":{"personalize_alert":{"updated_places_no_types":{"one":"You've added {{count_open}}{{count}}{{count_close}} Place. Click the {{type_open}}Type{{type_close}}s below to get deals you'll love.","other":"You've added {{count_open}}{{count}}{{count_close}} Places. Click the {{type_open}}Type{{type_close}}s below to get deals you'll love.","zero":"You've added {{count_open}}{{count}}{{count_close}} Places. Click the {{type_open}}Type{{type_close}}s below to get deals you'll love."}}},"social":{"facebook_connect":{"connect_benefit_info":{"description":"Allow us to show you where your friends get pampered and what adventures await you.","reconnect":"Make Groupon More Social","title":"No worries. Let's start over."},"error_info":{"description":"Your account was deactivated. Please {{link_open_tag}}contact us.{{link_close_tag}}","title":"We found a problem with your account"},"existing_account_link":{"bottom_text":"2.8 million people have already connected their Groupon and Facebook accounts.","cancel_action":"Please don't link my accounts","description":"Confirm and connect Facebook with Groupon   in one click!","facebook_account":"Facebook Account","groupon_account":"Groupon Account","link_action":"Thats Me! Link'em Up.","title":"{{first_name_tag}}, did we get this right?"},"existing_account_login":{"description":"Connect Facebook with Groupon   in one click!","title":"{{first_name_tag}}, just sign in and you're good to go!"},"forgot_password":"Forgot your password?","groupon_account":"Your Groupon account email:","new_account":{"description":"I don't, but I'd sure like one.","dialog":{"action":"Sign In","desc":"If you have purchased a Groupon before, you can sign in to link<br>Facebook to Groupon","enter_email":"Enter your email","title":"Already have an account?"},"groupon_account":"Create Groupon Account","link_desc":"By clicking 'Sign up', you are indicating that you have read and agree to the {{link_open_tag}}Terms of Service.{{link_close_tag}}","title":"{{first_name_tag}}, do you already have a Groupon account?"},"not_you":"Not you?","password_placeholder":"Enter your Groupon password","sign_in":"Sign In","warning_dialog":"{{warn_tag_open}}Incorrect Login:{{warn_tag_close}} Try again or {{reset_link_tag_open}}reset your password.{{reset_link_tag_close}}"},"numbers":{"five":"5","four":"4","one":"1","three":"3","two":"2"},"promotions":{"dollar_off_on_receipt":{"button_text":"Connect And Get $1!","description":"Just connect your Facebook account, share your purchase,{{line_break}}and we'll credit you back $1 right now.","link_text":"No thanks   I've saved enough already.","subtitle":"Think of it as getting paid to brag.","title":"Thanks! Want $1 back right now?"},"dollar_off_on_receipt_result":{"description":"This message will self-destruct in {{seconds}} {{unit}}","title":"Congratulations!{{line_break}}You just saved $1 on your purchase."},"facebook_connect_on_deal_result":{"description":"Hurry! This message will self-destruct in {{seconds}} {{unit}}","title":"You're good to go! {{line_break}}Now get out there and start saving."},"fb_landing_page_raf_info":{"description":"Share this page with your friends and earn $10<br>when they buy their first deal.","share_message":"Hey, I just connected Facebook with Groupon! You should connect too, if you do and buy a deal you like, I get $10: https://www.groupon.com/fbconnect","subtitle":""},"fb_landing_page_title_footer_info":{"bottom_text":"to learn more about the referral program","title":"Now what? Get $10 back!"},"fb_share_on_receipt":{"button_text":"Tell Your Friends","description":"A little bragging never hurt anybody...","link_text":"No thanks   they're on their own.","subtitle":"","title":"Want to share that purchase with friends?"},"fb_share_on_receipt_result":{"description":"This message will self-destruct in {{seconds}} {{unit}}","title":"Congratulations!{{line_break}}Enjoy your increased popularity"},"fbc_dpi_announcement":{"hide_text":"hide","message":"Hurry - this offer expires on {{strong_open}} {{expires_at}} {{strong_close}} !","title":"Don't forget, you have {{strong_open}} $1 {{strong_close}} to use on ANY Groupon deal."},"messages":{"already_facebook_connected":{"description":"We are sorry... but we can't award you at this time.","title":"It seems you've connected with facebook before!"}},"no_incentive":{"button_text":"Connect with Facebook","description":"Make Groupon friendlier by connecting with Facebook.","link_text":"No thanks   I'd rather not connect with my friends.","subtitle":"","title":"Keep your friends close, and your deals closer."},"one_dollar_off_within_12_months":{"button_text":"Connect And Get $1!","description":"Just connect your Groupon account with Facebook, share on Facebook and we'll take $1 off your next Groupon purchase.","link_text":"No thanks   I don't want $1.","subtitle":"Think of it as getting paid to brag.","title":"Want $1 off your next Groupon?"},"one_dollar_off_within_24_hours":{"button_text":"Connect And Save $1!","description":"Just connect your Groupon account with Facebook, and we'll take $1 off any Groupon you buy in the next 24 hours.","link_text":"No thanks   I don't want $1.","subtitle":"","title":"Get $1 off any Groupon   today only!"},"promotion_modal_with_error_message":{"description":"We could not grant your wish. But our Fairies, Wizards and{{line_break}}Unicorns are working on a solution as we speak.","note":"Until then keep browsing magical deals","title":"Something went wrong..."},"promotion_modal_with_spinning_wheel":{"promotion_modal_with_spinning_wheel_title":"Loading with love...","title":"Loading with love..."},"raf_10_dollar_referrer_1_activates":{"description":"Tell your friends about your Groupon and earn $10 when they buy their first deal.","share_caption":"I think you will like this Groupon deal that I just bought!","share_description":"Groupon has huge deals on great local businesses. If you sign up and buy a deal, I may earn Groupon credit!","subtitle":"Spread the word and get $10!"},"raf_5_dollar_referrer_1_purchases":{"description":"Tell your friends about your Groupon and earn $5 every time they make a purchase.","share_caption":"I think you will like this Groupon deal that I just bought!","share_description":"Groupon has huge deals on great local businesses. If you sign up and buy a deal, I may earn Groupon credit!","subtitle":"Spread the word and get $5!"},"raf_5_dollar_rr_1_activates":{"description":"Tell your friends about your purchase and earn $5 for both you and your friend when they buy their first deal.","share_caption":"I just bought this deal. Grab one for yourself. If its your first groupon, we both get $5 back!","share_description":"Groupon has huge deals on great local businesses. If you sign up and buy a deal, We both may earn Groupon credit!","subtitle":"Spread the word and get $5!"},"raf_Free_deal_referrer_3_purchases":{"description":"Share your purchase! If 3 friends buy it too, you will get your money back in Groupon Bucks.","share_caption":"I think you will like this Groupon deal that I just bought!","share_description":"Groupon has huge deals on great local businesses. If you sign up and buy a deal, I may earn Groupon credit!","subtitle":"Spread the word and get this deal for free!"},"raf_common_title_footer_info":{"bottom_text":"to learn more about the referral program","title":"<span class='stress'>Congratulations,</span> on your shiny new Groupon!"},"raf_non_incentive_title_footer_info":{"bottom_text":"","title":"<span class='stress'>Congratulations,</span> on your shiny new Groupon!"},"raf_on_receipt_result":{"description":"This message will self-destruct in {{seconds}} {{unit}}","title":"Congratulations! You have Referred Successfully"},"raf_post_purchase_common":{"button_text":"Connect and Share","click_text":"Click","fb_text":"Facebook","link_text":"Copy Link","mail_text":"Mail","tweet_text":"Tweet"},"raf_pp_non_incentive":{"description":"Because friends let friends know about great deals they bought!","share_caption":"I grabbed this deal as soon as I saw it! I think you'd like it too!","share_description":"Groupon has huge deals on great local businesses. Sign up and buy a deal now!","subtitle":"Now what? Tell your friends about this deal!"},"refer_a_friend":{"button_text":"Connect and Refer","description":"Just click to connect your Groupon account with Facebook and then share your unique referral link on your timeline. For every friend who signs up and buys a Groupon, your Bucks balance grows.","link_text":"No thanks   I don't want to earn referral bonuses","subtitle":"","title":"Refer a friend and earn $10!"},"refer_a_friend_facebook_conn":{"button_text":"Connect and Refer","description":"Reach even more people. Post your referral link on Facebook.","link_text":"No thanks   I don't want to connect to Facebook.","subtitle":"","title":"Congratulations on sharing your referral link!"}},"units":{"second":"second","seconds":"seconds"}},"users":{"membership_coupons":{"gift_modal":{"cancel":"Cancel","errors":{"facebook_not_responding":"Facebook is not responding at the moment. Try again later.","private_message_failed":"There was an error sending a message to your friend {{friend_name}}.","social_gift_create_failed":"We're sorry, we could not send your Groupon. Please try again.","wall_post_failed":"There was an error posting to the wall of your friend {{friend_name}}."},"expiration_date":"Expires on:","friend_picker_description":"Give this Groupon to one of your Facebook friends. We'll post a message on their Timeline to let them know to pick it up.","friend_picker_header":"Pick a Facebook Friend:","gift_button":"Give this Groupon","header":"Give Your Groupon to a Friend","total_price":"Total Price:"},"multi_option_gift_modal":{"errorsubtitle":"Click here to gift other deals.","errortitle":"Sorry, it looks like you have already used this Groupon.","header":"Give Your Groupon to a Friend","option1_subtitle":"Not going to use your Groupon? We'll post it on your Facebook Timeline. The first of your friends to click through and claim your Groupon gets to keep it.","option1_title":"Facebook Free-For-All","option2_subtitle":"Give this Groupon to one of your Facebook friends. We'll post a message on their wall to let them know to pick it up.","option2_title":"Give to a Friend","tooltip":{"header":"We'll try a wall post first and leave a private message if no one's home."}}},"profiles":{"locations":{"location_input":{"add":"Add","cancel":"cancel","favorite":"Favorite","home":"Home","placeholder":"123 Main St., Anywhere, OH","save":"Save","work":"Work"},"location_listing":{"delete":"delete","edit":"edit"}}}}}},"time":{"AM":"AM","PM":"PM","am":"am","formats":{"api_v2_exception_redeemed_date":"%m/%d/%Y","api_v2_exception_redeemed_time":"%I:%M%p %Z","date_time_with_short_month":"%b %d, %Y at %I:%M %p %Z","default":"%a, %d %b %Y %H:%M:%S %z","full_date_and_time_with_timezone":"%b %d, %Y at %I:%M %p %Z","full_month_day":"%B %e","full_month_day_comma_year":"%B %e, %Y","hour_minute_prefix_short_date_with_full_month":"%l:%M%p %B %d, %Y","long":"%B %d, %Y %H:%M","month_day_comma_year":"%b %d, %Y","month_day_year":"%m/%d/%Y","pretty_twelve_hour_time":"%l:%M%p","pretty_twelve_hour_time_with_timezone":"%l:%M%p %Z","short":"%d %b %H:%M","short_date":"%b %e, %Y","short_date_with_12hour":"%b %e, %Y at %l%p","short_date_with_month_12hour":"%B %d, %Y at %l%p"},"pm":"pm"}}};Groupon.onCurrentUserReady=function(callback){$(function(){if(typeof Groupon.currentUser!="undefined"){return callback();}
$(document).bind('currentUserReady',function(){return callback();});});};Groupon.onFacebookReady=function(callback){if(typeof Groupon.facebookReady!="undefined"){return callback();}
$(document).bind('facebookReady',function(){return callback();});};(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var slice=ArrayProto.slice,unshift=ArrayProto.unshift,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var
nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){return new wrapper(obj);};if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports){exports=module.exports=_;}
exports._=_;}else{root['_']=_;}
_.VERSION='1.3.3';var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context);}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker)return;}}else{for(var key in obj){if(_.has(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return;}}}};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list);});if(obj.length===+obj.length)results.length=obj.length;return results;};_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator);}
each(obj,function(value,index,list){if(!initial){memo=value;initial=true;}else{memo=iterator.call(context,memo,value,index,list);}});if(!initial)throw new TypeError('Reduce of empty array with no initial value');return memo;};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);}
var reversed=_.toArray(obj).reverse();if(context&&!initial)iterator=_.bind(iterator,context);return initial?_.reduce(reversed,iterator,memo,context):_.reduce(reversed,iterator);};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true;}});return result;};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results[results.length]=value;});return results;};_.reject=function(obj,iterator,context){var results=[];if(obj==null)return results;each(obj,function(value,index,list){if(!iterator.call(context,value,index,list))results[results.length]=value;});return results;};_.every=_.all=function(obj,iterator,context){var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker;});return!!result;};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker;});return!!result;};_.include=_.contains=function(obj,target){var found=false;if(obj==null)return found;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;found=any(obj,function(value){return value===target;});return found;};_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(_.isFunction(method)?method||value:value[method]).apply(value,args);});};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key];});};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0])return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed});});return result.value;};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0])return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed});});return result.value;};_.shuffle=function(obj){var shuffled=[],rand;each(obj,function(value,index,list){rand=Math.floor(Math.random()*(index+1));shuffled[index]=shuffled[rand];shuffled[rand]=value;});return shuffled;};_.sortBy=function(obj,val,context){var iterator=_.isFunction(val)?val:function(obj){return obj[val];};return _.pluck(_.map(obj,function(value,index,list){return{value:value,criteria:iterator.call(context,value,index,list)};}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a===void 0)return 1;if(b===void 0)return-1;return a<b?-1:a>b?1:0;}),'value');};_.groupBy=function(obj,val){var result={};var iterator=_.isFunction(val)?val:function(obj){return obj[val];};each(obj,function(value,index){var key=iterator(value,index);(result[key]||(result[key]=[])).push(value);});return result;};_.sortedIndex=function(array,obj,iterator){iterator||(iterator=_.identity);var low=0,high=array.length;while(low<high){var mid=(low+high)>>1;iterator(array[mid])<iterator(obj)?low=mid+1:high=mid;}
return low;};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(_.isArguments(obj))return slice.call(obj);if(obj.toArray&&_.isFunction(obj.toArray))return obj.toArray();return _.values(obj);};_.size=function(obj){return _.isArray(obj)?obj.length:_.keys(obj).length;};_.first=_.head=_.take=function(array,n,guard){return(n!=null)&&!guard?slice.call(array,0,n):array[0];};_.initial=function(array,n,guard){return slice.call(array,0,array.length-((n==null)||guard?1:n));};_.last=function(array,n,guard){if((n!=null)&&!guard){return slice.call(array,Math.max(array.length-n,0));}else{return array[array.length-1];}};_.rest=_.tail=function(array,index,guard){return slice.call(array,(index==null)||guard?1:index);};_.compact=function(array){return _.filter(array,function(value){return!!value;});};_.flatten=function(array,shallow){return _.reduce(array,function(memo,value){if(_.isArray(value))return memo.concat(shallow?value:_.flatten(value));memo[memo.length]=value;return memo;},[]);};_.without=function(array){return _.difference(array,slice.call(arguments,1));};_.uniq=_.unique=function(array,isSorted,iterator){var initial=iterator?_.map(array,iterator):array;var results=[];if(array.length<3)isSorted=true;_.reduce(initial,function(memo,value,index){if(isSorted?_.last(memo)!==value||!memo.length:!_.include(memo,value)){memo.push(value);results.push(array[index]);}
return memo;},[]);return results;};_.union=function(){return _.uniq(_.flatten(arguments,true));};_.intersection=_.intersect=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0;});});};_.difference=function(array){var rest=_.flatten(slice.call(arguments,1),true);return _.filter(array,function(value){return!_.include(rest,value);});};_.zip=function(){var args=slice.call(arguments);var length=_.max(_.pluck(args,'length'));var results=new Array(length);for(var i=0;i<length;i++)results[i]=_.pluck(args,""+i);return results;};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i,l;if(isSorted){i=_.sortedIndex(array,item);return array[i]===item?i:-1;}
if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item);for(i=0,l=array.length;i<l;i++)if(i in array&&array[i]===item)return i;return-1;};_.lastIndexOf=function(array,item){if(array==null)return-1;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return array.lastIndexOf(item);var i=array.length;while(i--)if(i in array&&array[i]===item)return i;return-1;};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0;}
step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step;}
return range;};var ctor=function(){};_.bind=function bind(func,context){var bound,args;if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;args=slice.call(arguments,2);return bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self;};};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length==0)funcs=_.functions(obj);each(funcs,function(f){obj[f]=_.bind(obj[f],obj);});return obj;};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:(memo[key]=func.apply(this,arguments));};};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args);},wait);};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)));};_.throttle=function(func,wait){var context,args,timeout,throttling,more,result;var whenDone=_.debounce(function(){more=throttling=false;},wait);return function(){context=this;args=arguments;var later=function(){timeout=null;if(more)func.apply(context,args);whenDone();};if(!timeout)timeout=setTimeout(later,wait);if(throttling){more=true;}else{result=func.apply(context,args);}
whenDone();throttling=true;return result;};};_.debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)func.apply(context,args);};if(immediate&&!timeout)func.apply(context,args);clearTimeout(timeout);timeout=setTimeout(later,wait);};};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;return memo=func.apply(this,arguments);};};_.wrap=function(func,wrapper){return function(){var args=[func].concat(slice.call(arguments,0));return wrapper.apply(this,args);};};_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)];}
return args[0];};};_.after=function(times,func){if(times<=0)return func();return function(){if(--times<1){return func.apply(this,arguments);}};};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError('Invalid object');var keys=[];for(var key in obj)if(_.has(obj,key))keys[keys.length]=key;return keys;};_.values=function(obj){return _.map(obj,_.identity);};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key);}
return names.sort();};_.extend=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source){obj[prop]=source[prop];}});return obj;};_.pick=function(obj){var result={};each(_.flatten(slice.call(arguments,1)),function(key){if(key in obj)result[key]=obj[key];});return result;};_.defaults=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source){if(obj[prop]==null)obj[prop]=source[prop];}});return obj;};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj);};_.tap=function(obj,interceptor){interceptor(obj);return obj;};function eq(a,b,stack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a._chain)a=a._wrapped;if(b._chain)b=b._wrapped;if(a.isEqual&&_.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&_.isFunction(b.isEqual))return b.isEqual(a);var className=toString.call(a);if(className!=toString.call(b))return false;switch(className){case'[object String]':return a==String(b);case'[object Number]':return a!=+a?b!=+b:(a==0?1/a==1/b:a==+b);case'[object Date]':case'[object Boolean]':return+a==+b;case'[object RegExp]':return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase;}
if(typeof a!='object'||typeof b!='object')return false;var length=stack.length;while(length--){if(stack[length]==a)return true;}
stack.push(a);var size=0,result=true;if(className=='[object Array]'){size=a.length;result=size==b.length;if(result){while(size--){if(!(result=size in a==size in b&&eq(a[size],b[size],stack)))break;}}}else{if('constructor'in a!='constructor'in b||a.constructor!=b.constructor)return false;for(var key in a){if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],stack)))break;}}
if(result){for(key in b){if(_.has(b,key)&&!(size--))break;}
result=!size;}}
stack.pop();return result;}
_.isEqual=function(a,b){return eq(a,b,[]);};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true;};_.isElement=function(obj){return!!(obj&&obj.nodeType==1);};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=='[object Array]';};_.isObject=function(obj){return obj===Object(obj);};_.isArguments=function(obj){return toString.call(obj)=='[object Arguments]';};if(!_.isArguments(arguments)){_.isArguments=function(obj){return!!(obj&&_.has(obj,'callee'));};}
_.isFunction=function(obj){return toString.call(obj)=='[object Function]';};_.isString=function(obj){return toString.call(obj)=='[object String]';};_.isNumber=function(obj){return toString.call(obj)=='[object Number]';};_.isFinite=function(obj){return _.isNumber(obj)&&isFinite(obj);};_.isNaN=function(obj){return obj!==obj;};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=='[object Boolean]';};_.isDate=function(obj){return toString.call(obj)=='[object Date]';};_.isRegExp=function(obj){return toString.call(obj)=='[object RegExp]';};_.isNull=function(obj){return obj===null;};_.isUndefined=function(obj){return obj===void 0;};_.has=function(obj,key){return hasOwnProperty.call(obj,key);};_.noConflict=function(){root._=previousUnderscore;return this;};_.identity=function(value){return value;};_.times=function(n,iterator,context){for(var i=0;i<n;i++)iterator.call(context,i);};_.escape=function(string){return(''+string).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#x27;').replace(/\//g,'&#x2F;');};_.result=function(object,property){if(object==null)return null;var value=object[property];return _.isFunction(value)?value.call(object):value;};_.mixin=function(obj){each(_.functions(obj),function(name){addToWrapper(name,_[name]=obj[name]);});};var idCounter=0;_.uniqueId=function(prefix){var id=idCounter++;return prefix?prefix+id:id;};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/.^/;var escapes={'\\':'\\',"'":"'",'r':'\r','n':'\n','t':'\t','u2028':'\u2028','u2029':'\u2029'};for(var p in escapes)escapes[escapes[p]]=p;var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;var unescaper=/\\(\\|'|r|n|t|u2028|u2029)/g;var unescape=function(code){return code.replace(unescaper,function(match,escape){return escapes[escape];});};_.template=function(text,data,settings){settings=_.defaults(settings||{},_.templateSettings);var source="__p+='"+text.replace(escaper,function(match){return'\\'+escapes[match];}).replace(settings.escape||noMatch,function(match,code){return"'+\n_.escape("+unescape(code)+")+\n'";}).replace(settings.interpolate||noMatch,function(match,code){return"'+\n("+unescape(code)+")+\n'";}).replace(settings.evaluate||noMatch,function(match,code){return"';\n"+unescape(code)+"\n;__p+='";})+"';\n";if(!settings.variable)source='with(obj||{}){\n'+source+'}\n';source="var __p='';"+"var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+
source+"return __p;\n";var render=new Function(settings.variable||'obj','_',source);if(data)return render(data,_);var template=function(data){return render.call(this,data,_);};template.source='function('+(settings.variable||'obj')+'){\n'+
source+'}';return template;};_.chain=function(obj){return _(obj).chain();};var wrapper=function(obj){this._wrapped=obj;};_.prototype=wrapper.prototype;var result=function(obj,chain){return chain?_(obj).chain():obj;};var addToWrapper=function(name,func){wrapper.prototype[name]=function(){var args=slice.call(arguments);unshift.call(args,this._wrapped);return result(func.apply(_,args),this._chain);};};_.mixin(_);each(['pop','push','reverse','shift','sort','splice','unshift'],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){var wrapped=this._wrapped;method.apply(wrapped,arguments);var length=wrapped.length;if((name=='shift'||name=='splice')&&length===0)delete wrapped[0];return result(wrapped,this._chain);};});each(['concat','join','slice'],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){return result(method.apply(this._wrapped,arguments),this._chain);};});wrapper.prototype.chain=function(){this._chain=true;return this;};wrapper.prototype.value=function(){return this._wrapped;};}).call(this);Groupon.Analytics={MEMBERSHIP_GOAL_PREFIX:"new_membership",UNDEFINED_LABEL:"undefined",Trackers:{},initialize:function(){_.each(this.Trackers,function(tracker){tracker.initialize();});},trackLoad:function(category,action,label){this.trackEvent('trackLoad',[category,action,label]);},trackClick:function(category,action,label){this.trackEvent('trackClick',[category,action,label]);},trackPageView:function(path){_.each(this.Trackers,function(tracker){tracker.trackPageView(path);});},trackEvent:function(eventType,params,optional){var category=this.UNDEFINED_LABEL,action=this.UNDEFINED_LABEL,label=this.UNDEFINED_LABEL;if(typeof params==='string'){category=params;if(params.match(this.MEMBERSHIP_GOAL_PREFIX)){category=this.MEMBERSHIP_GOAL_PREFIX;action=params.replace(this.MEMBERSHIP_GOAL_PREFIX,'');}}else{category=params[0];action=params[1];label=params[2];}
var opts={type:eventType,category:category,action:action,label:label};opts=_.extend(opts,optional);_.each(this.Trackers,function(tracker){tracker.trackEvent(opts);});}};Groupon.Analytics.Logger={debug:false,initialize:function(){if(typeof console!=="undefined"){this.logger=console;}else{this.logger=undefined;}},trackPageView:function(path){if(this.debug&&this.logger){this.logger.log("trackPageView",path);}},trackEvent:function(opts){if(this.debug&&this.logger){this.logger.log("trackEvent",opts);}}};Groupon.Analytics.Google={DEFAULT_PROFILE_ID:'UA-1250257-1',VISITOR_SCOPE:1,SESSION_SCOPE:2,PAGE_SCOPE:3,LAYER_TO_SLOT_MAP:{'deal-page-081811':1,'places-080311':2,'getaways-deal-081811':4,'checkout-page-081811':5,'smart-app-banner-ipad':2},DEFAULT_DIVISION_SLOT:3,initialize:function(){var accountId;if(Groupon.Attributes){accountId=Groupon.Attributes.google_analytics_profile_id;}
accountId=accountId||this.DEFAULT_PROFILE_ID;_gaq=window._gaq||[];_gaq.push(['_setAccount',accountId]);_gaq.push(['_setDomainName','.groupon.com']);this.loadExternalLibrary();if(window.google_division_changed){this.setDivisionCustomVar(window.google_division_changed);}
this._trackGoal();},loadExternalLibrary:function(){var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;var protocol='https:'===document.location.protocol?'https://ssl':'http://www';ga.src=protocol+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);},trackPageView:function(path){_gaq.push(['_trackPageview',path]);},trackEvent:function(opts){_gaq.push(['_trackEvent',opts.category,opts.action,opts.label]);},setExperimentCustomVar:function(layerId,experimentId,variantId){var slotId=this._slotForExperimentLayer(layerId);layerId=this._scrubWhitespace(layerId);experimentId=this._scrubWhitespace(experimentId);variantId=this._scrubWhitespace(variantId);var name="Exp-"+layerId;var safeExperimentId=experimentId+"/"+variantId;this.setCustomVar(name,safeExperimentId,slotId,this.VISITOR_SCOPE);},setDivisionCustomVar:function(newDivision){this.setCustomVar("Division",newDivision,this.DEFAULT_DIVISION_SLOT,this.SESSION_SCOPE);},setCustomVar:function(label,value,slot,scope){_gaq.push(['_setCustomVar',slot,label,value,scope]);},_scrubWhitespace:function(val){return val.replace(/[\s]/g,'').replace(/[^\w]/g,'-');},_slotForExperimentLayer:function(layerId){if(this.LAYER_TO_SLOT_MAP[layerId]==null){return;}
return this.LAYER_TO_SLOT_MAP[layerId];},_trackGoal:function(){if(window.google_goal){_gaq.push(['_trackPageview',google_goal],['_addTrans',google_order_id,"",google_amount,"","","","",""],['_addItem',google_order_id,google_sku,google_product_name,"Uncategorized",google_unit_price,google_quantity],['_trackTrans']);}else{_gaq.push(['_trackPageview']);}}};Groupon.Analytics.PixelTracker={PIXEL_URL:"/analytic/view.gif",TRACKING_COOKIE:'pixel_tracking',initialize:function(){},trackPageView:function(path){if(typeof(path)==='string'){path={'path':path};}
this.injectTrackingPixel('trackPageView',path);},trackEvent:function(opts){this.injectTrackingPixel('trackEvent',opts);},injectTrackingPixel:function(type,options){options=options||{};if(options.runOnLoad){delete options.runOnLoad;this.stashTrackingPixel(type,options);}else{$('body').append($("<img />",{'src':this.__trackingPixelSource(type,options),'class':'tracking-pixel','height':1,'width':1}));}},stashTrackingPixel:function(type,options){var cookie=$.parseJSON(Cookie.get(this.TRACKING_COOKIE))||[];cookie.push(this.__trackingPixelParams(type,options));Cookie.set(this.TRACKING_COOKIE,$.toJSON(cookie));},injectTrackingPixelFromCookie:function(){_($.parseJSON(Cookie.get(this.TRACKING_COOKIE))).each(_(function(data,i){var type=data.t;delete data.t;this.injectTrackingPixel(type,data);}).bind(this));Cookie.unset(this.TRACKING_COOKIE);},__trackingPixelSource:function(type,options){return this.PIXEL_URL+'?'+$.param(this.__trackingPixelParams(type,options));},__trackingPixelParams:function(type,options){_(options).extend({t:type,cb:this.__cacheBuster()});return options;},__cacheBuster:function(){return(new Date()).getTime();}};Groupon.Analytics.Trackers=[Groupon.Analytics.Google,Groupon.Analytics.Logger,Groupon.Analytics.PixelTracker];Groupon.Analytics.initialize();(function(){function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936);d=ff(d,a,b,c,k[1],12,-389564586);c=ff(c,d,a,b,k[2],17,606105819);b=ff(b,c,d,a,k[3],22,-1044525330);a=ff(a,b,c,d,k[4],7,-176418897);d=ff(d,a,b,c,k[5],12,1200080426);c=ff(c,d,a,b,k[6],17,-1473231341);b=ff(b,c,d,a,k[7],22,-45705983);a=ff(a,b,c,d,k[8],7,1770035416);d=ff(d,a,b,c,k[9],12,-1958414417);c=ff(c,d,a,b,k[10],17,-42063);b=ff(b,c,d,a,k[11],22,-1990404162);a=ff(a,b,c,d,k[12],7,1804603682);d=ff(d,a,b,c,k[13],12,-40341101);c=ff(c,d,a,b,k[14],17,-1502002290);b=ff(b,c,d,a,k[15],22,1236535329);a=gg(a,b,c,d,k[1],5,-165796510);d=gg(d,a,b,c,k[6],9,-1069501632);c=gg(c,d,a,b,k[11],14,643717713);b=gg(b,c,d,a,k[0],20,-373897302);a=gg(a,b,c,d,k[5],5,-701558691);d=gg(d,a,b,c,k[10],9,38016083);c=gg(c,d,a,b,k[15],14,-660478335);b=gg(b,c,d,a,k[4],20,-405537848);a=gg(a,b,c,d,k[9],5,568446438);d=gg(d,a,b,c,k[14],9,-1019803690);c=gg(c,d,a,b,k[3],14,-187363961);b=gg(b,c,d,a,k[8],20,1163531501);a=gg(a,b,c,d,k[13],5,-1444681467);d=gg(d,a,b,c,k[2],9,-51403784);c=gg(c,d,a,b,k[7],14,1735328473);b=gg(b,c,d,a,k[12],20,-1926607734);a=hh(a,b,c,d,k[5],4,-378558);d=hh(d,a,b,c,k[8],11,-2022574463);c=hh(c,d,a,b,k[11],16,1839030562);b=hh(b,c,d,a,k[14],23,-35309556);a=hh(a,b,c,d,k[1],4,-1530992060);d=hh(d,a,b,c,k[4],11,1272893353);c=hh(c,d,a,b,k[7],16,-155497632);b=hh(b,c,d,a,k[10],23,-1094730640);a=hh(a,b,c,d,k[13],4,681279174);d=hh(d,a,b,c,k[0],11,-358537222);c=hh(c,d,a,b,k[3],16,-722521979);b=hh(b,c,d,a,k[6],23,76029189);a=hh(a,b,c,d,k[9],4,-640364487);d=hh(d,a,b,c,k[12],11,-421815835);c=hh(c,d,a,b,k[15],16,530742520);b=hh(b,c,d,a,k[2],23,-995338651);a=ii(a,b,c,d,k[0],6,-198630844);d=ii(d,a,b,c,k[7],10,1126891415);c=ii(c,d,a,b,k[14],15,-1416354905);b=ii(b,c,d,a,k[5],21,-57434055);a=ii(a,b,c,d,k[12],6,1700485571);d=ii(d,a,b,c,k[3],10,-1894986606);c=ii(c,d,a,b,k[10],15,-1051523);b=ii(b,c,d,a,k[1],21,-2054922799);a=ii(a,b,c,d,k[8],6,1873313359);d=ii(d,a,b,c,k[15],10,-30611744);c=ii(c,d,a,b,k[6],15,-1560198380);b=ii(b,c,d,a,k[13],21,1309151649);a=ii(a,b,c,d,k[4],6,-145523070);d=ii(d,a,b,c,k[11],10,-1120210379);c=ii(c,d,a,b,k[2],15,718787259);b=ii(b,c,d,a,k[9],21,-343485551);x[0]=add32(a,x[0]);x[1]=add32(b,x[1]);x[2]=add32(c,x[2]);x[3]=add32(d,x[3]);}
function cmn(q,a,b,x,s,t){a=add32(add32(a,q),add32(x,t));return add32((a<<s)|(a>>>(32-s)),b);}
function ff(a,b,c,d,x,s,t){return cmn((b&c)|((~b)&d),a,b,x,s,t);}
function gg(a,b,c,d,x,s,t){return cmn((b&d)|(c&(~d)),a,b,x,s,t);}
function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t);}
function ii(a,b,c,d,x,s,t){return cmn(c^(b|(~d)),a,b,x,s,t);}
function md51(s){if(/[\x80-\xFF]/.test(s)){s=unescape(encodeURI(s));}
txt='';var n=s.length,state=[1732584193,-271733879,-1732584194,271733878],i;for(i=64;i<=s.length;i+=64){md5cycle(state,md5blk(s.substring(i-64,i)));}
s=s.substring(i-64);var tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<s.length;i++)
tail[i>>2]|=s.charCodeAt(i)<<((i%4)<<3);tail[i>>2]|=0x80<<((i%4)<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i++)tail[i]=0;}
tail[14]=n*8;md5cycle(state,tail);return state;}
function md5blk(s){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=s.charCodeAt(i)+
(s.charCodeAt(i+1)<<8)+
(s.charCodeAt(i+2)<<16)+
(s.charCodeAt(i+3)<<24);}
return md5blks;}
var hex_chr='0123456789abcdef'.split('');function rhex(n){var s='',j=0;for(;j<4;j++)
s+=hex_chr[(n>>(j*8+4))&0x0F]+
hex_chr[(n>>(j*8))&0x0F];return s;}
function hex(x){for(var i=0;i<x.length;i++)
x[i]=rhex(x[i]);return x.join('');}
md5=function(s){return hex(md51(s));}
function add32(a,b){return(a+b)&0xFFFFFFFF;}
if(md5('hello')!='5d41402abc4b2a76b9719d911017c592'){function add32(x,y){var lsw=(x&0xFFFF)+(y&0xFFFF),msw=(x>>16)+(y>>16)+(lsw>>16);return(msw<<16)|(lsw&0xFFFF);}}})();var Cookie={build:function(){var parts=Array.prototype.slice.apply(arguments);for(var i=0;i<parts.length;i++){if(!parts[i])
parts.splice(i,1);}
return parts.join("; ");},secondsFromNow:function(seconds){var d=new Date();d.setTime(d.getTime()+(seconds*1000));return d.toGMTString();},set:function(name,value,seconds,domain){var cookieExpiry=this._getExpiry(seconds),cookieDomain=this._getDomain(domain);if(typeof value==="string"){value=value.replace(/\s/g,'+');}
document.cookie=Cookie.build(name+"="+encodeURIComponent(value),cookieExpiry,"path=/",cookieDomain);},get:function(name){var valueMatch=new RegExp("(?:^|;(?:\\s*))"+name+"=([^;]+)").exec(document.cookie);var value=valueMatch?valueMatch[1]:null;return value!==null?decodeURIComponent(value).replace(/\+/g,' '):null;},unset:function(name,domain){Cookie.set(name,'',-1,domain);},_getExpiry:function(seconds,domain){return seconds?'expires='+Cookie.secondsFromNow(seconds):null;},_getDomain:function(domain){return domain?'domain='+domain:null;}};(function(){var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS";},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string;var dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(dataString.indexOf(data[i].subString)!=-1)
return data[i].identity;}
else if(dataProp)
return data[i].identity;}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index==-1)return;return parseFloat(dataString.substring(index+this.versionSearchString.length+1));},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();(function(){var Exception,bind,emit,exceptionKey,global,init,listeners,__slice=[].slice;global=this;Exception=function(name,msg,file,line){this.name=name;this.message=msg;this.fileName=file;this.lineNumber=line;this.timestamp=new Date();this.host=window.location.host;return this.userAgent=window.navigator.userAgent;};Exception.prototype=new Error();Exception.prototype.toString=function(){return this.stack;};listeners={error:[]};init=function(){var errorCounts,origOnError;errorCounts={};if(window&&!(typeof window.onerror==='undefined')){origOnError=window.onerror||false;return window.onerror=function(msg,file,line){var exception,key,_ref;if(msg==null){msg=arguments[0];}
if(file==null){file=arguments[1];}
if(line==null){line=arguments[2];}
exception=new Exception("Uncaught Error",msg,file,line);key=exceptionKey(exception);if((_ref=errorCounts[key])==null){errorCounts[key]=0;}
errorCounts[key]+=1;if(errorCounts[key]<=3){emit("error",exception);}
if(typeof origOnError==="function"){return origOnError(msg,file,line);}else{return origOnError;}};}};exceptionKey=function(e){return""+e.message+"_"+e.fileName+"_"+e.lineNumber;};bind=function(eventName,cb){return listeners[eventName].push(cb);};emit=function(){var args,eventName,listener,_i,_len,_ref,_results;eventName=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];_ref=listeners[eventName];_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){listener=_ref[_i];_results.push(listener.apply(null,args));}
return _results;};global.ErrorCatcher={init:init,on:bind};}).call(this);(function(){var Beagle,CookieAdapter,LocalStorageAdapter,createPersistence,isArray,isObject,jsonSafe,postParse,__slice=[].slice;Beagle=function(){this.listeners={add:[],flush:[],log:[]};this.buffer=[];return this;};Beagle.listeners={log:[]};Beagle.on=function(event,cb){return this.listeners[event].push(cb);};Beagle.off=function(event,listenerToRemove){var listener,safeListeners,_i,_len,_ref;safeListeners=[];_ref=this.listeners[event];for(_i=0,_len=_ref.length;_i<_len;_i++){listener=_ref[_i];if(listener!==listenerToRemove){safeListeners.push(listener);}}
return this.listeners[event]=safeListeners;};Beagle.trigger=function(){var args,event,func,_i,_len,_ref,_results;event=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];_ref=this.listeners[event];_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){func=_ref[_i];_results.push(func.apply(null,args));}
return _results;};Beagle.nextTick=function(func){return setTimeout(func);};Beagle.prototype.on=Beagle.on;Beagle.prototype.off=Beagle.off;Beagle.prototype.trigger=Beagle.trigger;Beagle.prototype.add=function(name,data){var obj;if(data==null){data={};}
obj={name:name,data:data,timestamp:new Date()};this.buffer.push(obj);return this.trigger("add",obj);};Beagle.prototype.flush=function(){var messages;messages=this.buffer;this.buffer=[];if(messages.length>0){this.trigger("flush",messages);}
return messages;};Beagle.prototype.log=function(){var args;args=1<=arguments.length?__slice.call(arguments,0):[];this.trigger.apply(this,["log"].concat(__slice.call(args)));return Beagle.trigger.apply(Beagle,["log"].concat(__slice.call(args)));};Beagle.prototype.use=function(middleware){return middleware(this);};Beagle.Timer=function(millis){var middleware,onBeforeUnload,running;running=true;middleware=function(beagle){var func;func=function(){if(running){beagle.flush();return beagle.log("Flushed by Beagle.Timer("+millis+")");}};setTimeout((function(){}),0);return setInterval(func,millis);};middleware.cancel=function(){return running=false;};middleware.resume=function(){return running=true;};if(typeof window!=="undefined"){onBeforeUnload=function(e){middleware.cancel();e=e||window.event;if(e){delete e.returnValue;}
return void 0;};if(window.addEventListener){window.addEventListener("beforeunload",onBeforeUnload,false);}else if(window.attachEvent){window.attachEvent("onbeforeunload",onBeforeUnload);}}
return middleware;};Beagle.SizeThreshold=function(threshold){return function(beagle){var dataSize;dataSize=0;beagle.on("add",function(data){dataSize+=JSON.stringify(data).length;if(dataSize>threshold){beagle.flush();return beagle.log("Flushed by Beagle.SizeThreshold("+threshold+"), size is "+dataSize+".");}});return beagle.on("flush",function(data){return dataSize=0;});};};Beagle.ExternalLinks=function(delay){if(delay==null){delay=500;}
return function(beagle){return $("body").delegate("a[href^='http']","click",function(e){var origE,redirect,url;origE=e.originalEvent;if(!(e.isDefaultPrevented()||origE.defaultPrevented||origE.returnValue===false)){e.preventDefault();url=$(e.currentTarget).attr("href");redirect=function(){return window.location.href=url;};setTimeout(redirect,delay);beagle.flush();return beagle.log("Flushed by Beagle.ExternalLinks("+delay+"), redirecting to "+url+".");}});};};Beagle.Persistence=function(key){var localStorageEnabled;localStorageEnabled=(function(){try{localStorage.setItem("beagle-local-storage-test","true");localStorage.removeItem("beagle-local-storage-test");return true;}catch(e){return false;}})();if(localStorageEnabled){return Beagle.LocalStoragePersistence(key);}else{return Beagle.CookiePersistence(key);}};Beagle.LocalStoragePersistence=function(key){return createPersistence(LocalStorageAdapter,key,"LocalStoragePersistence");};Beagle.CookiePersistence=function(key){return createPersistence(CookieAdapter,key,"CookiePersistence");};Beagle.Console=function(){return function(beagle){beagle.on("add",function(message){return console.log("Beagle::add",message);});beagle.on("flush",function(messages){return console.log("Beagle::flush",messages);});return beagle.on("log",function(){var args;args=1<=arguments.length?__slice.call(arguments,0):[];return console.log.apply(console,["Beagle::log"].concat(__slice.call(args)));});};};createPersistence=function(store,key,name){return function(beagle){var json,messages;messages=null;try{if(json=store.get(key)){messages=postParse(JSON.parse(json));}}catch(e){}finally{store.unset(key);}
if(messages){beagle.buffer=beagle.buffer.concat(messages);}
beagle.on("add",function(data){json=store.get(key)||"[]";json=json.slice(0,json.length-1);if(json.length>1){json+=",";}
json+=JSON.stringify(jsonSafe(data));json+="]";try{return store.set(key,json);}catch(e){beagle.flush();return beagle.log("Flushed by Beagle."+name+" due to storage error.",e);}});return beagle.on("flush",function(){return store.unset(key);});};};jsonSafe=function(val){var item,k,out,v,_i,_len,_results;if(val instanceof Error){return{name:val.name,stack:val.stack,message:val.message};}else if(val instanceof Date){return"date-"+(val.getTime());}else if(isObject(val)){out={};for(k in val){v=val[k];out[k]=jsonSafe(v);}
return out;}else if(isArray(val)){_results=[];for(_i=0,_len=val.length;_i<_len;_i++){item=val[_i];_results.push(jsonSafe(item));}
return _results;}else{return val;}};isArray=function(arr){if(Array.isArray){return Array.isArray(arr);}else{return Object.prototype.toString.call(arr)==="[object Array]";}};isObject=function(obj){return typeof obj==="object"&&!isArray(obj)&&obj!==null;};postParse=function(val){var date,item,k,millis,out,v,_i,_len,_results;if(typeof val==="string"&&/^date-\d+$/.test(val)){millis=val.substr(5,val.length-5);date=new Date();date.setTime(millis);return date;}else if(isObject(val)){out={};for(k in val){v=val[k];out[k]=postParse(v);}
return out;}else if(isArray(val)){_results=[];for(_i=0,_len=val.length;_i<_len;_i++){item=val[_i];_results.push(postParse(item));}
return _results;}else{return val;}};LocalStorageAdapter={get:function(key){return localStorage.getItem(key);},set:function(key,val){return localStorage.setItem(key,val);},unset:function(key){return localStorage.removeItem(key);}};CookieAdapter={charLimit:4000,build:function(){var compacted,part,parts,_i,_len;parts=1<=arguments.length?__slice.call(arguments,0):[];compacted=[];for(_i=0,_len=parts.length;_i<_len;_i++){part=parts[_i];if(part){compacted.push(part);}}
return compacted.join("; ");},secondsFromNow:function(seconds){var d;d=new Date();d.setTime(d.getTime()+(seconds*1000));return d.toGMTString();},set:function(name,value,seconds,domain){var cookie,cookieDomain,encodedValue,expiry,oneYear;encodedValue=encodeURIComponent(value);oneYear=60*60*24*365;expiry='expires='+this.secondsFromNow(seconds||oneYear);if(domain){cookieDomain='domain='+domain;}
cookie=this.build(name+"="+encodedValue,expiry,"path=/",cookieDomain);if(cookie.length>this.charLimit){throw"Cookie size exceeded "+this.charLimit+" bytes";}
return document.cookie=cookie;},get:function(name){var valueMatch;valueMatch=new RegExp("(?:^|;(?:\\s*))"+name+"=([^;]+)").exec(document.cookie);if(valueMatch){return decodeURIComponent(valueMatch[1]);}},unset:function(name,domain){return this.set(name,'',-1,domain);}};if(typeof module!=="undefined"&&module.exports){module.exports=Beagle;}else{this.Beagle=Beagle;}}).call(this);(function(){var global=this;var listeners={log:[]};var Tracky=global.Tracky=function(endpoint){this.endpoint=endpoint;this.listeners={log:[]};};var S4=function(){return(((1+Math.random())*0x10000)|0).toString(16).substring(1);};function pad(number){var r=String(number);if(r.length===1){r='0'+r;}
return r;}
function encodedSeed(){if(Tracky.seed){return encodeURI(Tracky.seed);}}
function fireEvents(data,ls){for(var i=0;i<ls.length;i++){var listener=ls[i];try{listener(data);}
catch(e){Tracky.whenDebugging(function(){console.log("Error running listener",listener);});}}}
Tracky.on=function(name,listener){listeners[name].push(listener);};Tracky.prototype.on=function(name,listener){this.listeners[name].push(listener);};Tracky.prototype.log=function(eventName,data){var requiredData={"event_name":eventName.toString().toLowerCase(),"event_client_timestamp":Tracky.currentISODateString(),"event_id":Tracky.generateUUID()};var ajaxData=Tracky.merge({},(data||{}),true);ajaxData=Tracky.merge(ajaxData,requiredData);var endpoint=this.endpoint||Tracky.endpoint;if(!endpoint){Tracky.whenDebugging(function(){throw"Tracky.log error: No endpoint defined";});return;}
Tracky.whenDebugging(function(){console.log(endpoint+" => %s",JSON.stringify(ajaxData));});jQuery.ajax(endpoint,{type:"POST",data:JSON.stringify(ajaxData),contentType:"application/json"});fireEvents(ajaxData,this.listeners.log.concat(listeners.log));};Tracky.currentISODateString=function(){var now=new Date();return formatTimestamp(now);};Tracky.whenDebugging=function(callback){if(Tracky.debug){callback.call();}};Tracky.merge=function(source,data,checkKey){var output={},key;for(key in source){output[key]=source[key];}
for(key in data){if(key.match(/^\w+$/)||!checkKey){output[key]=data[key];}else{Tracky.whenDebugging(function(){console.warn("Tracky.log - Invalid key '"+key+"' ignored");});}}
return output;};Tracky.generateUUID=function(){var seed=encodedSeed(),id=(S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4());if(seed){id=id+"-"+seed;}
return id;};function postRequest(data){if(data===undefined||(data instanceof Array&&data.length===0)){Tracky.whenDebugging(function(){throw"Tracky.log error: No data to send";});return;}
if(!Tracky.endpoint){Tracky.whenDebugging(function(){throw"Tracky.log error: No endpoint defined";});return;}
Tracky.whenDebugging(function(){console.log(Tracky.endpoint+" => %s",JSON.stringify(data));});jQuery.ajax(Tracky.endpoint,{type:"POST",data:JSON.stringify(data),contentType:"application/json"});fireEvents(data,listeners.log);}
function ensureTrackyRulesForMessage(message){var outMessage=Tracky.merge({},message,true);outMessage.event_id=Tracky.generateUUID();if(outMessage.event_name){var originalEventName=outMessage.event_name;outMessage.event_name=outMessage.event_name.toString().toLowerCase();if(originalEventName!=outMessage.event_name){Tracky.whenDebugging(function(){console.warn("Tracky.log: event_name being changed from %s to %s to conform with Tracky spec",originalEventName.toString(),outMessage.event_name);});}}
if(!outMessage.event_client_timestamp){outMessage.event_client_timestamp=Tracky.currentISODateString();}
if(typeof outMessage.event_client_timestamp!=="string"){outMessage.event_client_timestamp=formatTimestamp(outMessage.event_client_timestamp);}
return outMessage;}
function formatTimestamp(now){return now.getUTCFullYear()+'-'+pad(now.getUTCMonth()+1)+'-'+pad(now.getUTCDate())+'T'+pad(now.getUTCHours())+':'+pad(now.getUTCMinutes())+':'+pad(now.getUTCSeconds())+'.'+String((now.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)+'Z';}
Tracky.log=function(){var dataForRequest,bulkRequest,bulkInputData,trackyifiedData;if((arguments.length===1&&arguments[0]instanceof Array)||arguments.length>1){bulkRequest=true;}else{bulkRequest=false;}
if(bulkRequest){dataForRequest=[];bulkInputData=((arguments.length===1&&arguments[0]instanceof Array)?arguments[0]:arguments);for(var i=0;i<bulkInputData.length;i++){trackyifiedData=ensureTrackyRulesForMessage(bulkInputData[i]);if(trackyifiedData.event_name){dataForRequest.push(trackyifiedData);}}
if(dataForRequest.length===1){dataForRequest=dataForRequest[0];}}else{trackyifiedData=ensureTrackyRulesForMessage(arguments[0]);if(trackyifiedData.event_name){dataForRequest=trackyifiedData;}}
return postRequest(dataForRequest);};}).call(this);(function(){var Bloodhound,__bind=function(fn,me){return function(){return fn.apply(me,arguments);};},__slice=[].slice;this.Bloodhound=Bloodhound=(function(){Bloodhound.listeners={error:[]};Bloodhound.reset=function(){return this.listeners={error:[]};};Bloodhound.on=function(key,func){var _base,_ref;if((_ref=(_base=this.listeners)[key])==null){_base[key]=[];}
return this.listeners[key].push(func);};Bloodhound.trigger=function(){var args,func,key,_base,_i,_len,_ref,_ref1,_results;key=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];if((_ref=(_base=this.listeners)[key])==null){_base[key]=[];}
_ref1=this.listeners[key];_results=[];for(_i=0,_len=_ref1.length;_i<_len;_i++){func=_ref1[_i];_results.push(func.apply(null,args));}
return _results;};function Bloodhound(atts){var key,updateInterval,_i,_len,_ref,_this=this;if(atts==null){atts={};}
this._onEvent=__bind(this._onEvent,this);this.handleErrors=__bind(this.handleErrors,this);try{this.eventListeners={};this.widgetKey=atts.widgetKey||"bhw";this.contentKey=atts.contentKey||"bhc";this.widgetContainer=atts.widgetContainer||$("body");updateInterval=atts.updateInterval||1000;_ref=["widgetKey","contentKey","widgetContainer","updateInterval"];for(_i=0,_len=_ref.length;_i<_len;_i++){key=_ref[_i];delete atts[key];}
this.metadata=atts;this.on("error",function(){var args;args=1<=arguments.length?__slice.call(arguments,0):[];return Bloodhound.trigger.apply(Bloodhound,["error"].concat(__slice.call(args)));});this.reset();Bloodhound.Helpers.nextTick(function(){return _this.updateWidgets();});Bloodhound.Helpers.eachInterval(updateInterval,function(){if(!_this.paused){return _this.updateWidgets();}});$("body").delegate("select","focus",function(e){return _this.paused=true;});$("body").delegate("select","blur",function(e){return _this.paused=false;});}catch(e){Bloodhound.Helpers.nextTick(function(){return _this.trigger("error",e);});}}
Bloodhound.prototype.reset=function(){this.widgetFinder=new Bloodhound.WidgetFinder(this.widgetKey,this.contentKey,this.widgetContainer,this);this.events=new Bloodhound.Events(this.widgetKey,this.contentKey,this.widgetContainer);this.events.listenToAll();this.events.bind(this._onEvent);return this.widgets=[];};Bloodhound.prototype.data=function(){var key,out,val,widget,_ref;out={};_ref=this.metadata;for(key in _ref){val=_ref[key];out[key]=val;}
out.widgets=(function(){var _i,_len,_ref1,_results;_ref1=this.widgets;_results=[];for(_i=0,_len=_ref1.length;_i<_len;_i++){widget=_ref1[_i];_results.push(widget.data());}
return _results;}).call(this);return out;};Bloodhound.prototype.updateWidgets=function(){var _this=this;return this.handleErrors(function(){var newWidgets;newWidgets=_this.widgetFinder.findNew()||[];if(newWidgets.length>0){_this.events.registerWidgets(newWidgets,_this.widgetKey,_this.contentKey);_this.widgets=_this.widgets.concat(newWidgets);return _this.trigger("impression",newWidgets);}});};Bloodhound.prototype.trigger=function(){var args,event,func,_base,_i,_len,_ref,_ref1,_results;event=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];if((_ref=(_base=this.eventListeners)[event])==null){_base[event]=[];}
_ref1=this.eventListeners[event];_results=[];for(_i=0,_len=_ref1.length;_i<_len;_i++){func=_ref1[_i];_results.push(func.apply(null,args));}
return _results;};Bloodhound.prototype.bind=function(event,func){var _base,_ref;if((_ref=(_base=this.eventListeners)[event])==null){_base[event]=[];}
return this.eventListeners[event].push(func);};Bloodhound.prototype.unbind=function(event,funcToRemove){var func,newListeners,_i,_len,_ref;newListeners=[];_ref=this.eventListeners[event];for(_i=0,_len=_ref.length;_i<_len;_i++){func=_ref[_i];if(func!==funcToRemove){newListeners.push(func);}}
return this.eventListeners[event]=newListeners;};Bloodhound.prototype.trackEvent=function(){var args,_ref;args=1<=arguments.length?__slice.call(arguments,0):[];return(_ref=this.events).trackEvent.apply(_ref,args);};Bloodhound.prototype.handleErrors=function(cb){try{return cb();}catch(e){return this.trigger('error',e);}};Bloodhound.prototype._onEvent=function(event){return this.trigger("event",event);};return Bloodhound;})();Bloodhound.prototype.on=Bloodhound.prototype.bind;Bloodhound.prototype.off=Bloodhound.prototype.unbind;Bloodhound.prototype.emit=Bloodhound.prototype.trigger;}).call(this);(function(){var __bind=function(fn,me){return function(){return fn.apply(me,arguments);};};Bloodhound.Events=(function(){function Events(widgetKey,contentKey,container){this.widgetKey=widgetKey;this.contentKey=contentKey;this.container=container;this._ensurePathsExist=__bind(this._ensurePathsExist,this);this.handleEvent=__bind(this.handleEvent,this);this.pathToObjectMap={};this.events=[];this.emitters=[];this.eventListeners=[];this._updateLength();this.selectors={widgets:"[data-"+this.widgetKey+"], [data-"+this.contentKey+"]",forms:"form[data-"+this.widgetKey+"], form[data-"+this.contentKey+"]"};this.stopListening();}
Events.prototype.listenToAll=function(){var doEvent,handleEvent;handleEvent=this.handleEvent;doEvent=function(e){var el;el=$(this);return handleEvent(e,el);};this.container.delegate(this.selectors.widgets,"click",doEvent);return this.container.delegate(this.selectors.forms,"change focusin focusout",doEvent);};Events.prototype.handleEvent=function(e,widgetEl){var content,el,path,widget;el=$(widgetEl);this._ensurePathsExist(el);if(path=el.attr("data-"+this.contentKey+"-path")){if(content=this.pathToObjectMap[path]){this._onEvent(e,content);}}
if(path=el.attr("data-"+this.widgetKey+"-path")){if(widget=this.pathToObjectMap[path]){return this._onEvent(e,widget);}}};Events.prototype.stopListening=function(){this.container.undelegate(this.selectors.widgets,"click");return this.container.undelegate(this.selectors.forms,"change focusin focusout");};Events.prototype.pushEvent=function(event){this.events.push(event);this[this.length]=event;return this._updateLength();};Events.prototype.trigger=function(event){var func,_i,_len,_ref,_results;_ref=this.eventListeners;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){func=_ref[_i];_results.push(func(event));}
return _results;};Events.prototype.bind=function(func){return this.eventListeners.push(func);};Events.prototype.unbind=function(funcToRemove){var func,newListeners,_i,_len,_ref;newListeners=[];_ref=this.eventListeners;for(_i=0,_len=_ref.length;_i<_len;_i++){func=_ref[_i];if(func!==funcToRemove){newListeners.push(func);}}
this.eventListeners=newListeners;return this._updateLength();};Events.prototype.registerWidgets=function(widgets){var $contentEl,$el,content,contentKey,path,widget,widgetKey,_i,_len,_results;widgetKey=this.widgetKey;contentKey=this.contentKey;_results=[];for(_i=0,_len=widgets.length;_i<_len;_i++){widget=widgets[_i];$el=$(widget.element);path=Bloodhound.Helpers.pathToElement("widget",widget.element,widgetKey,contentKey);$el.attr("data-"+widgetKey+"-path",path);this.pathToObjectMap[path]=widget;_results.push((function(){var _j,_len1,_ref,_results1;_ref=widget.content||[];_results1=[];for(_j=0,_len1=_ref.length;_j<_len1;_j++){content=_ref[_j];$contentEl=$(content.element);path=Bloodhound.Helpers.pathToElement("content",content.element,widgetKey,contentKey);this.pathToObjectMap[path]=content;_results1.push($contentEl.attr("data-"+contentKey+"-path",path));}
return _results1;}).call(this));}
return _results;};Events.prototype.trackEvent=function(e){var innermostWidget,selector,target,widgets;target=$(e.target);selector="[data-"+this.widgetKey+"],[data-"+this.contentKey+"]";if(target.is(selector)){return this.handleEvent(e,target);}else{widgets=target.parents(selector);innermostWidget=widgets[0];if(innermostWidget){return this.handleEvent(e,innermostWidget);}}};Events.prototype._onEvent=function(e,widget){var element,event,meta,parent,_i,_len,_ref,_ref1,_this=this;event=this._lookupEvent(e);if(event){}else{event={id:Bloodhound.Helpers.randomId(),jQueryEvent:e,type:e.type,widgets:[widget]};_ref=this._parentsFromPath(widget.path);for(_i=0,_len=_ref.length;_i<_len;_i++){parent=_ref[_i];event.widgets.push(parent);}
element=$(e.target);meta={};if(element){meta.element_id=element.attr('id');meta.element_node=element[0].nodeName.toLowerCase();if(element.attr('type')){meta.element_type=element.attr('type');}}
if(((_ref1=e.type)==='change'||_ref1==='focusout')&&element.is('input:text, textarea, input:password, select')){meta.populated=!!element.val();}
if(e.type==='change'&&element.is('input:radio, input:checkbox')){meta.checked=element.is(':checked');}
if(!_.isEmpty(meta)){event.meta=meta;}
this.pushEvent(event);return Bloodhound.Helpers.nextTick(function(){_this.trigger(event);return _this._removeEvent(event);});}};Events.prototype._lookupEvent=function(e){var event,_i,_len,_ref;_ref=this.events;for(_i=0,_len=_ref.length;_i<_len;_i++){event=_ref[_i];if(event.jQueryEvent.originalEvent===e.originalEvent){return event;}}
return null;};Events.prototype._updateLength=function(){return this.length=this.events.length;};Events.prototype._removeEvent=function(event){var e,i,_i,_len,_ref;_ref=this.events;for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){e=_ref[i];if(e===event){this.events.splice(i,1);this._updateLength();return;}}};Events.prototype._parentsFromPath=function(path){var delimiter,newPath,out,parts;out=[];delimiter=Bloodhound.Helpers.pathDelimiter;parts=path.split(delimiter);parts.pop();if(parts.length===0){return out;}
newPath=parts.join(delimiter);out.push(this.pathToObjectMap[newPath]);out=out.concat(this._parentsFromPath(newPath));return out;};Events.prototype._ensurePathsExist=function($el){var path;if($el.data(this.contentKey)&&!$el.data(""+this.contentKey+"-path")){path=Bloodhound.Helpers.pathToElement("content",$el,this.widgetKey,this.contentKey);$el.attr("data-"+this.contentKey+"-path",path);}
if($el.data(this.widgetKey)&&!$el.data(""+this.widgetKey+"-path")){path=Bloodhound.Helpers.pathToElement("widget",$el,this.widgetKey,this.contentKey);return $el.attr("data-"+this.widgetKey+"-path",path);}};return Events;})();}).call(this);(function(){var S4,counter;counter=0;Bloodhound.Helpers={seed:null,pathDelimiter:"|",randomId:function(){var id;id=""+this.seed+"-"+(new Date().getTime())+"-"+counter;counter+=1;return id;},nextTick:function(func){return setTimeout(func);},error:function(message){throw new Error("Bloodhound: "+message);},eachInterval:function(millis,func){return setInterval(func,millis);},reset:function(){return counter=0;},pathToElement:function(type,element,widgetKey,contentKey){var $el,$p,content,names,p,parents,path,widget,widgetName,_i,_len;$el=$(element);parents=$el.parents("[data-"+widgetKey+"], [data-"+contentKey+"]");names=[];for(_i=0,_len=parents.length;_i<_len;_i++){p=parents[_i];$p=$(p);content=$p.attr("data-"+contentKey);widget=$p.attr("data-"+widgetKey);if(content){names.unshift(content);}
if(widget){names.unshift(widget);}}
switch(type){case"widget":names.push($el.attr("data-"+widgetKey));break;case"content":widgetName=$el.attr("data-"+widgetKey);if(widgetName){names.push(widgetName);}
names.push($el.attr("data-"+contentKey));}
path=names.join(Bloodhound.Helpers.pathDelimiter);return path;}};S4=function(){var rand;return rand=(((1+Math.random())*0x10000)|0).toString(16);};}).call(this);(function(){Bloodhound.WidgetContent=(function(){function WidgetContent(atts){var _ref;_ref=atts.name.split(":"),this.type=_ref[0],this.name=_ref[1];this.element=atts.element;this.position=atts.position;this.path=atts.path;if(!(this.type&&this.name)){Bloodhound.Helpers.error('Incomplete widget content (no name or type)');}}
WidgetContent.prototype.data=function(){return{type:this.type,name:this.name,position:this.position};};return WidgetContent;})();}).call(this);(function(){var pathToElement;pathToElement=Bloodhound.Helpers.pathToElement;Bloodhound.WidgetFinder=(function(){function WidgetFinder(widgetKey,contentKey,container,bloodhound){this.widgetKey=widgetKey;this.contentKey=contentKey;this.container=container;this.bloodhound=bloodhound;this.trackedPaths={};}
WidgetFinder.prototype.findNew=function(){return this._findNewWidgets().concat(this._findNewContentElements());};WidgetFinder.prototype._findNewWidgets=function(){var widgetElements,_this=this;widgetElements=this.container.find("[data-"+this.widgetKey+"]:visible");return this._mapUntracked(widgetElements,function(i,el){return _this._widgetFromElement(el);});};WidgetFinder.prototype._findNewContentElements=function(){var extraContentElements,_this=this;extraContentElements=this.container.find("[data-"+this.widgetKey+"] [data-"+this.contentKey+"]:visible");return this._mapUntracked(extraContentElements,function(i,el){var $el,parentWidget;$el=$(el);parentWidget=$el.parents("[data-"+_this.widgetKey+"]")[0];return _this._widgetFromElement(parentWidget);});};WidgetFinder.prototype._widgetFromElement=function(element){var content,el,_this=this;el=$(element);content=this._mapUntracked(el.find("[data-"+this.contentKey+"]:visible"),function(i,contentEl){return _this._contentFromElement(contentEl,i);});if(el.is("[data-"+this.contentKey+"]")){this.bloodhound.handleErrors(function(){return content.push(_this._contentFromElement(el,0));});}
this._markAsTrackedWidget(element);return new Bloodhound.Widget({element:element,name:$(element).data(this.widgetKey),content:content,path:pathToElement('widget',element,this.widgetKey,this.contentKey)});};WidgetFinder.prototype._contentFromElement=function(element,position){this._markAsTrackedContent(element);return new Bloodhound.WidgetContent({element:element,name:$(element).data(this.contentKey),position:position,path:pathToElement('content',element,this.widgetKey,this.contentKey)});};WidgetFinder.prototype._mapUntracked=function(elements,func){var out,_this=this;out=[];this._eachUntracked(elements,function(i,el){return out.push(func(i,el));});return out;};WidgetFinder.prototype._eachUntracked=function(elements,func){var _this=this;return elements.each(function(i,e){return _this.bloodhound.handleErrors(function(){var $e,path;$e=$(e);if($e.is("[data-"+_this.widgetKey+"]")){path=pathToElement("widget",e,_this.widgetKey,_this.contentKey);if(!_this.trackedPaths[path]){func.call(_this,i,e,path);}}
if($e.is("[data-"+_this.contentKey+"]")){path=pathToElement("content",e,_this.widgetKey,_this.contentKey);if(!_this.trackedPaths[path]){return func.call(_this,i,e,path);}}});});};WidgetFinder.prototype._markAsTracked=function(type,element){var path;path=pathToElement(type,element,this.widgetKey,this.contentKey);return this.trackedPaths[path]=true;};WidgetFinder.prototype._markAsTrackedWidget=function(element){return this._markAsTracked("widget",element);};WidgetFinder.prototype._markAsTrackedContent=function(element){return this._markAsTracked("content",element);};return WidgetFinder;})();}).call(this);(function(){Bloodhound.Widget=(function(){function Widget(atts){this.name=atts.name;this.element=atts.element;this.path=atts.path;this.content=atts.content||[];if(this.element.length===0){Bloodhound.Helpers.error('Widget does not exist');}
if(!this.name){Bloodhound.Helpers.error('Incomplete widget (no name)');}}
Widget.prototype.data=function(){var item,out;out={name:this.name};if(this.content.length>0){out.content=(function(){var _i,_len,_ref,_results;_ref=this.content;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){item=_ref[_i];_results.push(item.data());}
return _results;}).call(this);}
return out;};Widget.prototype.value=function(){return $(this.element).val();};return Widget;})();}).call(this);(function(){var CookieAdapter,LocalStorageAdapter,Page,Session,TrackingHub,Warehouse,__slice=[].slice;TrackingHub={init:function(config){if(config==null){config={};}
if(!config.seed){throw"TrackingHub must be initialized with a seed value.";}
this.counter=0;this.seed=config.seed;this.session=new Session(config.session);this.page=new Page(config.page);this.user=config.user;this.beagle.use(Beagle.Timer(config.flushInterval||3000));return this.beagle.add("tracking-init",{session:this.session.data(),page:this.page.data(),user:this.user});},beagle:(function(){var beagle;beagle=new Beagle();beagle.use(Beagle.Persistence("tracking-hub"));return beagle;})(),add:function(name,data){var extraData;extraData={session:{id:this.session.id},page:{id:this.page.id},user:this.user};_.extend(data,extraData);return this.beagle.add.call(this.beagle,name,data);},flush:function(){return this.beagle.flush.apply(this.beagle,arguments);},on:function(){return this.beagle.on.apply(this.beagle,arguments);},off:function(){return this.beagle.off.apply(this.beagle,arguments);},use:function(){return this.beagle.use.apply(this.beagle,arguments);},randomId:function(){var id;id=""+this.seed+"-"+(new Date().getTime())+"-TH"+this.counter;this.counter+=1;return id;}};Session=(function(){function Session(config){var key,_i,_len,_ref;if(config==null){config={};}
this.expiry=config.expiry||30*60;this.cookieKey=config.cookieKey||"th-session-id";this.cookieDomain=config.cookieDomain;_ref=["expiry","cookieKey","cookieDomain"];for(_i=0,_len=_ref.length;_i<_len;_i++){key=_ref[_i];delete config[key];}
this.metadata=config;this._buildId();this.warehouse=new Warehouse();this.storeKey='sessionStore';this.prepareSessionStore();}
Session.prototype.prepareSessionStore=function(){var sessionStore;sessionStore=this.warehouse.get(this.storeKey);if(this.id!==(sessionStore!=null?sessionStore.sessionId:void 0)){return this.warehouse.set(this.storeKey,{data:{},sessionId:this.id});}};Session.prototype.data=function(){var key,out,val,_ref;out={};_ref=this.metadata;for(key in _ref){val=_ref[key];out[key]=val;}
out.id=this.id;return out;};Session.prototype.get=function(key){return this.warehouse.get(this.storeKey).data[key];};Session.prototype.set=function(key,data){var sessionStore;sessionStore=this.warehouse.get(this.storeKey);sessionStore.data[key]=data;return this.warehouse.set(this.storeKey,sessionStore);};Session.prototype.unset=function(key){var sessionStore;sessionStore=this.warehouse.get(this.storeKey);delete sessionStore.data[key];return this.warehouse.set(this.storeKey,sessionStore);};Session.prototype.save=function(){return Cookie.set(this.cookieKey,this.id,this.expiry,this.cookieDomain);};Session.prototype._buildId=function(){var _ref;this.id=this._idFromCookie();if((_ref=this.id)==null){this.id=TrackingHub.randomId();}
return this.save();};Session.prototype._idFromCookie=function(){return Cookie.get(this.cookieKey);};return Session;})();Page=(function(){function Page(attributes){var key,_i,_len,_ref;if(attributes==null){attributes={};}
this.id=attributes.id||TrackingHub.randomId();_ref=["id","widgets"];for(_i=0,_len=_ref.length;_i<_len;_i++){key=_ref[_i];delete attributes[key];}
this.metadata=attributes;}
Page.prototype.data=function(){var d,key,val,_ref;d={};_ref=this.metadata;for(key in _ref){val=_ref[key];d[key]=val;}
d.id=this.id;return d;};return Page;})();Warehouse=(function(){function Warehouse(){var localStorageEnabled;localStorageEnabled=(function(){try{localStorage.setItem("warehouse-local-storage-test","true");localStorage.removeItem("warehouse-local-storage-test");return true;}catch(e){return false;}})();this.adapter=localStorageEnabled?LocalStorageAdapter:CookieAdapter;}
Warehouse.prototype.get=function(){return this.adapter.get.apply(this.adapter,arguments);};Warehouse.prototype.set=function(){return this.adapter.set.apply(this.adapter,arguments);};Warehouse.prototype.unset=function(){return this.adapter.unset.apply(this.adapter,arguments);};return Warehouse;})();LocalStorageAdapter={get:function(key){var val;val=localStorage.getItem(key);if(val){return JSON.parse(val);}},set:function(key,data){return localStorage.setItem(key,JSON.stringify(data));},unset:function(key){return localStorage.removeItem(key);}};CookieAdapter={charLimit:4000,build:function(){var compacted,part,parts,_i,_len;parts=1<=arguments.length?__slice.call(arguments,0):[];compacted=[];for(_i=0,_len=parts.length;_i<_len;_i++){part=parts[_i];if(part){compacted.push(part);}}
return compacted.join("; ");},secondsFromNow:function(seconds){var d;d=new Date();d.setTime(d.getTime()+(seconds*1000));return d.toGMTString();},set:function(name,value,seconds,domain){var cookie,cookieDomain,encodedValue,expiry,oneYear;encodedValue=JSON.stringify(value);oneYear=60*60*24*365;expiry='expires='+this.secondsFromNow(seconds||oneYear);if(domain){cookieDomain='domain='+domain;}
cookie=this.build(name+"="+encodedValue,expiry,"path=/",cookieDomain);if(cookie.length>this.charLimit){throw"Cookie size exceeded "+this.charLimit+" bytes";}
return document.cookie=cookie;},get:function(name){var decodedValue,valueMatch;valueMatch=new RegExp("(?:^|;(?:\\s*))"+name+"=([^;]+)").exec(document.cookie);if(valueMatch){decodedValue=decodeURIComponent(valueMatch[1]);}
if(decodedValue){return JSON.parse(decodedValue);}},unset:function(name,domain){return this.set(name,'',-1,domain);}};if(typeof module!=="undefined"&&module.exports){module.exports=TrackingHub;}else{this.TrackingHub=TrackingHub;}}).call(this);(function(){var Finch,debug,__hasProp={}.hasOwnProperty,__slice=[].slice,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},__bind=function(fn,me){return function(){return fn.apply(me,arguments);};};(typeof exports!=="undefined"&&exports!==null?exports:this).Finch=Finch=(function(){var isBrowserWindow,listeners;listeners={};isBrowserWindow=function(obj){return(obj.location!=null)&&(obj.document!=null);};return{initialize:function(adapterOrWindow,config){var layerConfig,layerName;if(isBrowserWindow(adapterOrWindow)){this.adapter=new Finch.Adapters.Browser(adapterOrWindow);}else{this.adapter=adapterOrWindow;}
this.reset();this.layers=(function(){var _results;_results=[];for(layerName in config){if(!__hasProp.call(config,layerName))continue;layerConfig=config[layerName];_results.push(new Finch.Layer(layerName,layerConfig));}
return _results;})();debug('initialized');this.runPreferredExperiments();return this;},run:function(){var layer,_i,_len,_ref;if(this.layers==null){return;}
_ref=this.layers;for(_i=0,_len=_ref.length;_i<_len;_i++){layer=_ref[_i];layer.run();}
return Finch.Tracking.deliver();},reset:function(){return this.layers=[];},inTreatment:function(options){var experimentName,layer,variantName;experimentName=options.experimentName,variantName=options.variantName;layer=this.runningLayerFromExperimentName(experimentName);if(layer==null){return false;}
if(variantName==null){return true;}
return layer.experiment().variantName()===variantName;},runPreferredExperiments:function(){var layer,_i,_len,_ref,_results;_ref=this.layers;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){layer=_ref[_i];_results.push(layer.preferredRun());}
return _results;},experiment:function(name,cb){var experiment,variantFunc,_this=this;if(!this.inTreatment({experimentName:name})){return;}
variantFunc=function(variantName,vcb){if(_this.inTreatment({experimentName:name,variantName:variantName})){return vcb();}};cb({variant:variantFunc});experiment=this.runningExperimentFromExperimentName(name);return Finch.Tracking.trackExperiment(experiment);},runningLayerFromExperimentName:function(experimentName){return _.detect(Finch.Layer.all(),function(layer){return layer.isCurrentExperiment(experimentName)&&layer.experiment().testMatches();});},runningExperimentFromExperimentName:function(experimentName){var _ref;return(_ref=this.runningLayerFromExperimentName(experimentName))!=null?_ref.experiment():void 0;},urlPath:function(){return this.adapter.urlPath();},urlSearch:function(){return this.adapter.urlSearch();},getCookie:function(){var args,_ref;args=1<=arguments.length?__slice.call(arguments,0):[];return(_ref=this.adapter).getCookie.apply(_ref,args);},md5:function(){var args,_ref;args=1<=arguments.length?__slice.call(arguments,0):[];return(_ref=this.adapter).md5.apply(_ref,args);},forcedExperimentSets:function(){return this.adapter.forcedExperimentSets();},on:function(name,cb){var _ref;if((_ref=listeners[name])==null){listeners[name]=[];}
return listeners[name].push(cb);},trigger:function(){var args,func,name,_i,_len,_ref,_results;name=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];if(!listeners[name]){return;}
_ref=listeners[name];_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){func=_ref[_i];_results.push(func.apply(null,args));}
return _results;}};})();Finch.Experiments={};Finch.Experiments.Global={};Finch.Diversions={};Finch.Trackers=[];Finch.Adapters={};Finch.NUMBER_OF_BUCKETS_PER_LAYER=1000;Finch.VERSION='0.7.0';debug=function(message){if(Finch.debug&&((typeof console!=="undefined"&&console!==null?console.log:void 0)!=null)){return console.log("::: finch.js : "+message);}};Finch.Adapters.Browser=(function(){function Browser(window){this.window=window;}
Browser.prototype.urlPath=function(){return this.window.location.pathname;};Browser.prototype.urlSearch=function(){return this.window.location.search;};Browser.prototype.getCookie=function(key){return Cookie.get(key);};Browser.prototype.md5=function(string){return md5(string);};Browser.prototype.forcedExperimentSets=function(){var fromQuerystring,matchedSet,out;out=this._forcedExperimentSetsFromCookies();if(fromQuerystring=this._forcedExperimentSetFromQuerystring()){matchedSet=_(out).detect(function(set){return set.layer===fromQuerystring.layer&&set.experiment===fromQuerystring.experiment;});if(matchedSet){matchedSet.variant=fromQuerystring.variant;}else{out.unshift(fromQuerystring);}}
return out;};Browser.prototype._cookies=function(){return this.window.document.cookie;};Browser.prototype._forcedExperimentSetFromQuerystring=function(){var experimentName,layerName,params,variantName;params=Finch.Utility.parseQueryString(this.urlSearch());layerName=params.finch_layer;experimentName=params.finch_experiment;variantName=params.finch_variant;if(layerName&&experimentName&&variantName){return{layer:layerName,experiment:experimentName,variant:variantName};}};Browser.prototype._forcedExperimentSetsFromCookies=function(){var cookie,experiment,key,layer,out,splitCookies,variant;splitCookies=this._cookies().split(/\s*;\s*/);out=(function(){var _i,_len,_ref,_ref1,_results;_results=[];for(_i=0,_len=splitCookies.length;_i<_len;_i++){cookie=splitCookies[_i];_ref=cookie.split('='),key=_ref[0],variant=_ref[1];if(key.match(/^.+:.+:Variant$/)){_ref1=key.split(':'),layer=_ref1[0],experiment=_ref1[1];_results.push({layer:layer,experiment:experiment,variant:variant});}else{_results.push(void 0);}}
return _results;})();return _(out).compact();};return Browser;})();Finch.Diversion=(function(){function Diversion(diversionCallback){this.diversionCallback=diversionCallback;}
Diversion.prototype.bucket=function(layer){var bucket;if(layer==null){throw'layer is not defined';}
if(this.diversionCallback==null){throw'no bucketing function defined';}
bucket=this.diversionCallback(layer);if(bucket==null){return null;}
if(!this._validBucket(bucket)){throw"bucket "+bucket+" out of range";}
debug("diversion bucket "+bucket+" for "+(layer!=null?layer.name:void 0));return bucket;};Diversion.prototype._validBucket=function(bucket){return(0<=bucket&&bucket<=Finch.NUMBER_OF_BUCKETS_PER_LAYER);};return Diversion;})();Finch.HashCookieDiversion=(function(_super){__extends(HashCookieDiversion,_super);function HashCookieDiversion(){var cookies;cookies=1<=arguments.length?__slice.call(arguments,0):[];this.cookies=cookies;HashCookieDiversion.__super__.constructor.call(this,function(layer){var cookie,cookieName,cookieValue,_i,_len,_ref,_ref1,_ref2;if(this.cookies instanceof Array){_ref=this.cookies;for(_i=0,_len=_ref.length;_i<_len;_i++){cookie=_ref[_i];if(!(typeof cookieValue!=="undefined"&&cookieValue!==null)){_ref1=[cookie,Finch.getCookie(cookie)],cookieName=_ref1[0],cookieValue=_ref1[1];}}}else{_ref2=[this.cookies,Finch.getCookie(this.cookies)],cookieName=_ref2[0],cookieValue=_ref2[1];}
if(cookieValue==null){debug("no valid cookies");return null;}
debug("bucketing with cookie: "+cookieName+"="+cookieValue);return this._hash(""+cookieValue+","+layer.name);});}
HashCookieDiversion.prototype._hash=function(input){var md5;md5=Finch.md5(input);debug(md5);return parseInt(md5.slice(24,32),16)%Finch.NUMBER_OF_BUCKETS_PER_LAYER;};return HashCookieDiversion;})(Finch.Diversion);Finch.Diversions.RandomDiversion=new Finch.Diversion(function(layer){return Math.floor(Math.random()*Finch.NUMBER_OF_BUCKETS_PER_LAYER);});Finch.Diversions.CookieDiversion=new Finch.HashCookieDiversion('b');Finch.Experiment=(function(){function Experiment(id,layer,config){var _ref,_ref1,_ref2,_ref3;this.id=id;this.layer=layer;if(config==null){config={};}
this.name=(_ref=config.name)!=null?_ref:'';this.variants=(_ref1=config.variants)!=null?_ref1:[];this.guards=(_ref2=config.guards)!=null?_ref2:[];this.params=(_ref3=config.params)!=null?_ref3:{};this.buckets=this._parseBucketRange(config.buckets);this.pathPatterns=this._parsePathPatterns(config.path_patterns);debug("loading experiment "+this.name);}
Experiment.prototype.run=function(){var _ref;if(this.isDeferred()){debug("matching experiment "+this.id+" deferred with variant "+(this.variantName()));return(_ref=this._deferCallback())!=null?_ref.call(this):void 0;}else{if(this.testMatches()){return this._execute();}else{return debug("GuardFailed on experiment "+this.id);}}};Experiment.prototype.deferredRun=function(){var variantName;variantName=this.variantName();debug("running deferred experiment "+this.id+" with bucket "+variantName);if(this.testMatches()){this._execute();}else{debug("GuardFailed on experiment "+this.id);}
return Finch.Tracking.deliver();};Experiment.prototype.isPreferred=function(){return!!this.experimentDefinition().runOnInit;};Experiment.prototype.needsPreferredTracking=function(){return!!this.experimentDefinition().trackOnInit;};Experiment.prototype.isDeferred=function(){return!!this.experimentDefinition().defer;};Experiment.prototype.testMatches=function(){return this.pathMatches(Finch.urlPath())&&this.paramsMatches(Finch.urlSearch())&&this.guardMatches();};Experiment.prototype.pathMatches=function(path){if((path!=null)&&this.pathPatterns.length===0){return true;}
return _.any(this.pathPatterns,function(pattern){return pattern.test(path);});};Experiment.prototype.paramsMatches=function(querystring){var queryParams;queryParams=Finch.Utility.parseQueryString(querystring);if(_.isEmpty(this.params)){return true;}
return _.all(this.params,function(paramValues,paramName){if(queryParams[paramName]==null){return false;}
return _.any(paramValues,function(value){return queryParams[paramName]===value;});});};Experiment.prototype.guardMatches=function(){var _this=this;if(this.guards.length===0){return true;}
return _.all(this.guards,function(guard){var guardFunc,result,_ref,_ref1;guardFunc=((_ref=_this.experimentDefinition().guards)!=null?_ref[guard]:void 0)||((_ref1=Finch.Experiments.Global.guards)!=null?_ref1[guard]:void 0);result=typeof guardFunc==="function"?guardFunc():void 0;if(!result){Finch.trigger("guarded",_this,guard);}
return result;});};Experiment.prototype.currentVariant=function(bucket){return this.experimentDefinition().variants[this.variantNameForBucket(bucket)];};Experiment.prototype.randomVariant=function(){var variantName;variantName=this.variants[Math.floor(Math.random()*this.variants.length)];return this.experimentDefinition().variants[variantName];};Experiment.prototype.variant=function(){var _ref;return(_ref=this.variantCache)!=null?_ref:this.variantCache=this.experimentDefinition().variants[this.variantName()];};Experiment.prototype.variantName=function(){var _ref;return(_ref=this.variantNameCache)!=null?_ref:this.variantNameCache=this.variantNameForBucket(this.bucket());};Experiment.prototype.variantNameForBucket=function(bucket){return this._forcedVariantName()||this._variantNameByRoundRobin(bucket);};Experiment.prototype._forcedVariantName=function(){var forcedSets,set,_this=this;forcedSets=Finch.forcedExperimentSets();set=_(forcedSets).detect(function(set){return set.layer===_this.layer.name&&set.experiment===_this.name;});if(set){return set.variant;}};Experiment.prototype._variantNameByRoundRobin=function(bucket){var variantIndex;if(!((this.buckets.min<=bucket&&bucket<=this.buckets.max))){return null;}
variantIndex=(bucket-this.buckets.min)%this.variants.length;return this.variants[variantIndex];};Experiment.prototype.bucket=function(){return this.layer.bucket();};Experiment.prototype.experimentDefinition=function(){var _base,_name,_ref;return(_ref=(_base=Finch.Experiments)[_name=this.id])!=null?_ref:_base[_name]={variants:{}};};Experiment.prototype._execute=function(){var variant;try{variant=this.variant();if(variant!=null){debug("rendering variant "+(this.variantName()));debug(variant);if(this.isPreferred()&&this.needsPreferredTracking()){Finch.Tracking.trackExperiment(this);Finch.Tracking.deliver();}
variant();}
if(!(this.isPreferred()&&this.needsPreferredTracking())){Finch.Tracking.trackExperiment(this);}
return Finch.trigger("run",this);}catch(e){Finch.Tracking.trackExperimentError(this,e);return Finch.trigger("error",e,this);}};Experiment.prototype._deferCallback=function(){debug("initializing deferred experiment "+this.name);return this.experimentDefinition().defer;};Experiment.prototype._parseBucketRange=function(range){var buckets;if(range==null){range='0..999';}
buckets=range.split('..');return{min:parseInt(buckets[0],10),max:parseInt(buckets[1],10)};};Experiment.prototype._parsePathPatterns=function(patterns){var patternSource,_i,_len,_results;if(!((patterns!=null)&&patterns.length>0)){return[];}
_results=[];for(_i=0,_len=patterns.length;_i<_len;_i++){patternSource=patterns[_i];_results.push(new RegExp("^"+patternSource+"$"));}
return _results;};return Experiment;})();Finch.Layer=(function(){Layer.all=function(){return Finch.layers||[];};function Layer(name,config){var experimentConfig,experimentIdentifier,_ref;this.name=name;this.preferredRun=__bind(this.preferredRun,this);this.run=__bind(this.run,this);this.bucket=__bind(this.bucket,this);if(config!=null){debug("loading layer "+this.name);this.experiments=(function(){var _ref,_results;_ref=config.experiments;_results=[];for(experimentIdentifier in _ref){if(!__hasProp.call(_ref,experimentIdentifier))continue;experimentConfig=_ref[experimentIdentifier];_results.push(new Finch.Experiment(experimentIdentifier,this,experimentConfig));}
return _results;}).call(this);if(config.diversion_type!=null){this.diversion=Finch.Diversions[config.diversion_type];}}
if((_ref=this.diversion)==null){this.diversion=Finch.Diversions.RandomDiversion;}}
Layer.prototype.findExperiments=function(selector){var experiment,_i,_len,_ref,_results;if(selector==null){return[];}
_ref=this.experiments;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){experiment=_ref[_i];if(selector(experiment)){_results.push(experiment);}}
return _results;};Layer.prototype.experimentsForBucket=function(bucket){return this.findExperiments(function(exp){return(exp.buckets.min<=bucket&&bucket<=exp.buckets.max);});};Layer.prototype.experiment=function(){return this._getForcedExperiment()||this._getSingleMatchingExperiment();};Layer.prototype.isCurrentExperiment=function(experimentName){var _ref;return((_ref=this.experiment())!=null?_ref.name:void 0)===experimentName;};Layer.prototype.bucket=function(){var _ref;return(_ref=this.bucketCache)!=null?_ref:this.bucketCache=this.diversion.bucket(this);};Layer.prototype.run=function(){var experiment;experiment=this.experiment();if(experiment&&!experiment.isPreferred()){return experiment.run();}};Layer.prototype.preferredRun=function(){var experiment;experiment=this.experiment();if(experiment&&experiment.isPreferred()){return experiment.run();}};Layer.prototype._getForcedExperiment=function(){var forcedSets,set,_this=this;forcedSets=Finch.forcedExperimentSets();set=_(forcedSets).detect(function(set){return set.layer===_this.name;});if(set){return _(this.experiments).detect(function(exp){return exp.name===set.experiment;});}};Layer.prototype._getSingleMatchingExperiment=function(){var results,_this=this;if(this.bucket()==null){return null;}
results=this.findExperiments(function(exp){var _ref;return(exp.buckets.min<=(_ref=_this.bucket())&&_ref<=exp.buckets.max);});if(results.length===1){return results[0];}else{return null;}};return Layer;})();Finch.ConsoleLoggingTracker={track:function(expSets){return _(expSets).each(function(expSet){var _ref,_ref1;console.log("*****************************");console.log("*** ConsoleLoggingTracker ***");console.log("*****************************");console.log("*** layer: "+((_ref=expSet.layer)!=null?_ref.name:void 0));console.log("*** experiment: "+((_ref1=expSet.experiment)!=null?_ref1.name:void 0));console.log("*** variant: "+expSet.variant);if(expSet.error!=null){console.log("*** error: "+expSet.error);}
return console.log("*****************************");});}};Finch.PixelTracker={track:function(expSets){var e,experimentSets,trackerData;if(Finch.alwaysFirePixel||!_.isEmpty(expSets)){experimentSets=_.map(expSets,function(expSet){return{layer:expSet.layer.name,experiment:expSet.experiment.id,variant:expSet.variant,error:expSet.error};});trackerData=Finch.externalData?{experiments:experimentSets,externalData:Finch.externalData}:experimentSets;e=encodeURIComponent(JSON.stringify(trackerData));return this.sendData(e);}},sendData:function(e){var cacheBuster,trackerPath;cacheBuster=(new Date).getTime();trackerPath="/analytic/experiment.gif?e="+e+"&src=img&_="+cacheBuster;return $("<img />",{"class":'finch-tracking',src:trackerPath,height:1,width:1}).appendTo($('body'));}};Finch.AjaxPixelTracker={track:Finch.PixelTracker.track,sendData:function(e){var trackerPath;trackerPath="/analytic/experiment.gif?e="+e+"&src=ajax";return $.ajax(trackerPath,{cache:false});}};Finch.Tracking={deliver:function(){var tracker,_i,_len,_ref;_ref=Finch.Trackers;for(_i=0,_len=_ref.length;_i<_len;_i++){tracker=_ref[_i];try{tracker.track(this._translatedExperiments());}catch(e){}}
return this.flush();},trackExperiment:function(experiment){var _this=this;return this._oncePerExperiment(experiment,function(){return _this.experiments.push(experiment);});},trackExperimentError:function(experiment,error){this.trackExperiment(experiment);return this.experimentErrors[experiment.id]=error;},flush:function(){this.experiments=[];return this.experimentErrors={};},reset:function(){this.flush();return this.trackedExperimentNames=[];},_oncePerExperiment:function(experiment,cb){if(!this.trackedExperimentNames[experiment.id]){cb();return this.trackedExperimentNames[experiment.id]=true;}},_translatedExperiments:function(){var data,error,experiment,_i,_len,_ref,_results;_ref=this.experiments;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){experiment=_ref[_i];data={layer:experiment.layer,experiment:experiment,variant:experiment.variantName()};error=this.experimentErrors[experiment.id];if(error){data.error=error;}
_results.push(data);}
return _results;}};Finch.Tracking.reset();Finch.Utility=(function(){function Utility(){}
Utility.parseQueryString=function(queryString){var name,parameter,params,value,_i,_len,_ref,_ref1;params={};if(queryString===''||queryString==='?'){return params;}
_ref=queryString.substr(1).split('&');for(_i=0,_len=_ref.length;_i<_len;_i++){parameter=_ref[_i];_ref1=parameter.split("="),name=_ref1[0],value=_ref1[1];params[name]=value;}
return params;};return Utility;})();}).call(this);(function(){var SanityCheck,__slice=[].slice;this.SanityCheck=SanityCheck=(function(){SanityCheck.listeners={success:[],failure:[],error:[]};SanityCheck.checks=[];SanityCheck.defaultInterval=1000;SanityCheck.add=function(name,func){var sc,_this=this;sc=new SanityCheck({name:name,func:func});sc.on("success",function(data){return _this.trigger("success",sc,data);});sc.on("failure",function(data){return _this.trigger("failure",sc,data);});sc.on("error",function(data){return _this.trigger("error",sc,data);});this.checks.push(sc);return sc;};SanityCheck.on=function(name,func){return this.listeners[name].push(func);};SanityCheck.trigger=function(){var args,func,name,_i,_len,_ref,_results;name=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];_ref=this.listeners[name]||[];_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){func=_ref[_i];_results.push(func.apply(null,args));}
return _results;};SanityCheck.onNextTick=function(func){return setTimeout(func);};SanityCheck.onInterval=function(func,interval){return setInterval(func,interval);};SanityCheck.reset=function(){this.listeners={success:[],failure:[],error:[]};return this.checks=[];};SanityCheck.run=function(){var sc,_i,_len,_ref,_results;_ref=this.checks;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){sc=_ref[_i];_results.push(sc.run());}
return _results;};function SanityCheck(atts){this.name=atts.name;this.func=atts.func;this.listeners={success:[],failure:[],error:[]};}
SanityCheck.prototype.on=function(name,func){return this.listeners[name].push(func);};SanityCheck.prototype.trigger=function(){var args,name,_this=this;name=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];return SanityCheck.onNextTick(function(){var func,_i,_len,_ref,_results;_ref=_this.listeners[name]||[];_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){func=_ref[_i];_results.push(func.apply(null,args));}
return _results;});};SanityCheck.prototype.run=function(){try{return this.func(this);}catch(e){return this.trigger("error",e);}};SanityCheck.prototype.watch=function(selector,interval,cb){var els,finder,_this=this;if(!cb){cb=interval;interval=SanityCheck.defaultInterval;}
els=[];finder=function(){var allEls,newEls;try{allEls=$(selector);newEls=allEls.not(els);els=allEls;return newEls.each(function(i,e){try{return cb($(e));}catch(err){return _this.trigger("error",err);}});}catch(e){return _this.trigger("error",e);}};return SanityCheck.onInterval(finder,interval);};SanityCheck.prototype.success=function(data){return this.trigger("success",data);};SanityCheck.prototype.fail=function(data){return this.trigger("failure",data);};return SanityCheck;})();}).call(this);(function(){this.Portal=function(target){var WaitForWindowLoad,addListener,listeners,onPostMessage,pastEvents,pluginQueue,portal;listeners={};pastEvents={};addListener=function(name,func){if(target.attachEvent!=null){return target.attachEvent("on"+name,func);}else if(target.addEventListener!=null){return target.addEventListener(name,func);}};WaitForWindowLoad=function(){return function(beagle){var onLoad,ready;ready=document.readyState==="complete";if(!ready){onLoad=function(){ready=true;return beagle.flush();};addListener("load",onLoad);}
return beagle.on("add",function(){if(ready){return beagle.flush();}});};};pluginQueue=new Beagle();pluginQueue.use(WaitForWindowLoad());pluginQueue.on("flush",function(msgs){var msg,_i,_len,_results;_results=[];for(_i=0,_len=msgs.length;_i<_len;_i++){msg=msgs[_i];try{_results.push(target.postMessage(JSON.stringify(msg.data),"*"));}catch(e){}}
return _results;});onPostMessage=function(event){var channel,data,eventData,eventName,func,_base,_base1,_i,_j,_len,_len1,_ref,_ref1,_ref2,_ref3,_ref4,_ref5,_results;if(event.source!==target){return;}
try{eventData=JSON.parse(event.data);}catch(err){return;}
channel=eventData.channel;eventName=eventData.name;data=eventData.data;if((_ref=listeners[channel])==null){listeners[channel]={};}
if((_ref1=pastEvents[channel])==null){pastEvents[channel]={};}
if((_ref2=(_base=pastEvents[channel])["*"])==null){_base["*"]=[];}
if((_ref3=(_base1=pastEvents[channel])[eventName])==null){_base1[eventName]=[];}
pastEvents[channel]["*"].push(eventData);pastEvents[channel][eventName].push(eventData);_ref4=listeners[channel]["*"]||[];for(_i=0,_len=_ref4.length;_i<_len;_i++){func=_ref4[_i];func(eventName,data);}
_ref5=listeners[channel][eventName]||[];_results=[];for(_j=0,_len1=_ref5.length;_j<_len1;_j++){func=_ref5[_j];_results.push(func(data));}
return _results;};addListener("message",onPostMessage,false);portal=function(channel){return{add:function(eventName,data){if(data==null){data={};}
return pluginQueue.add("msg",{channel:channel,name:eventName,data:data});},bind:function(eventName,func){var _base,_ref,_ref1;if((_ref=listeners[channel])==null){listeners[channel]={};}
if((_ref1=(_base=listeners[channel])[eventName])==null){_base[eventName]=[];}
return listeners[channel][eventName].push(func);},on:function(eventName,func){return this.bind(eventName,func);},replayAndBind:function(eventName,func){var pastEvent,_i,_len,_ref,_ref1;if((_ref=pastEvents[channel])==null){pastEvents[channel]={};}
_ref1=pastEvents[channel][eventName]||[];for(_i=0,_len=_ref1.length;_i<_len;_i++){pastEvent=_ref1[_i];if(eventName==="*"){func(pastEvent.name,pastEvent.data);}else{func(pastEvent.data);}}
return this.bind(eventName,func);}};};return portal;};}).call(this);(function(){var OptimizeSuite,addTrackingHubListeners,clearLastEventId,getLastEventId,getLastPageId,initBloodhound,initErrorCatcher,initFinch,initReferral,initSanityCheck,initTrackingHub,initTracky,setLastEventId,setLastPageId,withConfigDefaults;OptimizeSuite=window.OptimizeSuite={};OptimizeSuite.Portal=window.Portal(window);window.Portal=null;OptimizeSuite.SanityCheck=window.SanityCheck;window.SanityCheck=null;OptimizeSuite.TrackingHub=window.TrackingHub;OptimizeSuite.Bloodhound=window.Bloodhound;OptimizeSuite.init=function(c){var config;config=withConfigDefaults(c);initErrorCatcher();initTracky(config);initTrackingHub(config);addTrackingHubListeners();initFinch(config.finch);initSanityCheck();OptimizeSuite.initBloodhound=function(){return initBloodhound(config);};OptimizeSuite.treatAsNewPage=function(url){var reinitTrackingHub;reinitTrackingHub=function(){var _ref;config.page.parentEventId=getLastEventId();config.page.parentPageId=getLastPageId();config.page.url=encodeURIComponent(url);initTrackingHub(config);return(_ref=OptimizeSuite.bloodhound)!=null?_ref.reset():void 0;};return setTimeout(reinitTrackingHub,0);};return OptimizeSuite.TrackingHub.flush();};OptimizeSuite.getQueryString=function(){return window.location.search;};OptimizeSuite.getReferrer=function(){return document.referrer;};getLastEventId=function(){return Cookie.get("bh-last-event-id");};clearLastEventId=function(){return Cookie.unset("bh-last-event-id");};setLastEventId=function(id){return Cookie.set("bh-last-event-id",id,15);};getLastPageId=function(){return Cookie.get("bh-last-page-id");};setLastPageId=function(id){return Cookie.set("bh-last-page-id",id,1800);};withConfigDefaults=function(config){var group,k,obj,out,v;out={tracking:{interval:3000,endpoint:"/tracky",seed:null},referralMap:{},session:{cookieKey:null,cookieDomain:null,expiry:30*60},page:{parentEventId:getLastEventId(),parentPageId:getLastPageId(),url:encodeURIComponent(window.location.href)},user:{userAgent:navigator.userAgent,browser:BrowserDetect.browser||"unknown",browserVersion:BrowserDetect.version||"unknown",os:BrowserDetect.OS||"unknown"},finch:{trackers:null,debug:false,alwaysFirePixel:true,config:null},bloodhound:{}};for(group in config){obj=config[group];for(k in obj){v=obj[k];out[group][k]=v;}}
return out;};initSanityCheck=function(){return OptimizeSuite.SanityCheck.on("failure",function(sc,data){OptimizeSuite.Portal("sanity-check").add(sc.name,data);return OptimizeSuite.TrackingHub.add("sanity-check-failure",_.extend({sanityCheck:sc.name},data));});};initFinch=function(config){var finchPortal;Finch.debug=config.debug;Finch.alwaysFirePixel=config.alwaysFirePixel;if(config.trackers){Finch.Trackers=config.trackers;}
finchPortal=OptimizeSuite.Portal("finch");Finch.on("guarded",function(experiment,guardName){return finchPortal.add("guarded",{layer:experiment.layer.name,experiment:experiment.name,guard:guardName});});Finch.on("run",function(experiment){var experimentNames,experiments;finchPortal.add("run",{layer:experiment.layer.name,experiment:experiment.name});experiments=TrackingHub.session.get('experiments')||[];experimentNames=_.pluck(experiments,'experiment');if(_.indexOf(experimentNames,experiment.name)===-1){experiments.push({layer:experiment.layer.name,experiment:experiment.name,variant:experiment.variantName()});try{return TrackingHub.session.set('experiments',experiments);}catch(e){}}});finchPortal.add("loaded",config.config);Finch.initialize(window,config.config);return $(function(){return Finch.run();});};initErrorCatcher=function(){ErrorCatcher.init();return ErrorCatcher.on("error",function(e){var errorData;errorData=_.clone(e);delete errorData.timestamp;delete errorData.userAgent;return OptimizeSuite.TrackingHub.add("uncaught-error",errorData);});};initTracky=function(config){Tracky.endpoint=config.tracking.endpoint;return Tracky.seed=config.tracking.seed;};initReferral=function(referralMap){var getQueryValue,key,q,querystring,referral,referrer,referrerHost,searchTerm,val,_ref;if(referralMap==null){referralMap={};}
referral=void 0;querystring=OptimizeSuite.getQueryString();referrer=OptimizeSuite.getReferrer();getQueryValue=function(str,key){var m;if(m=str.match(new RegExp("[\?&]"+key+"=([^&]+)"))){return m[1];}};for(key in referralMap){val=referralMap[key];if(q=getQueryValue(querystring,key)){if(referral==null){referral={};}
referral[val]=q;}}
if(referrer){referrerHost=referrer.match(/^https?:\/\/([^\/]+)/)[1];if(window.location.host!==referrerHost){if(!referral){referral={source:'general'};}
referral.url=referrer;searchTerm=(function(){switch(referrerHost){case"www.google.com":return getQueryValue(referrer,"q");case"search.yahoo.com":return getQueryValue(referrer,"p");case"www.bing.com":return getQueryValue(referrer,"q");}})();if(searchTerm){referral.searchTerm=searchTerm;}}}else{if(referral==null){referral={};}
if((_ref=referral.source)==null){referral.source='direct';}}
return referral;};initTrackingHub=function(config){var hubData;hubData={seed:config.tracking.seed,flushInterval:config.tracking.interval,session:config.session,page:config.page,user:config.user};hubData.session.referral=initReferral(config.referralMap);OptimizeSuite.TrackingHub.init(hubData);clearLastEventId();return setLastPageId(OptimizeSuite.TrackingHub.page.id);};addTrackingHubListeners=function(){OptimizeSuite.TrackingHub.on("add",function(msg){return OptimizeSuite.Portal("tracking-hub").add("add",msg);});return OptimizeSuite.TrackingHub.on("flush",function(messages){var trackyData;trackyData=_(messages).map(function(message){var data;data=_.clone(message.data);data.event_name=message.name;data.event_client_timestamp=new Date(message.timestamp);return data;});Tracky.log(trackyData);return OptimizeSuite.Portal("tracking-hub").add("flush",messages);});};initBloodhound=function(config){var bloodhound;OptimizeSuite.Bloodhound.Helpers.seed=config.tracking.seed;bloodhound=OptimizeSuite.bloodhound=new OptimizeSuite.Bloodhound(config.bloodhound);bloodhound.on("event",function(event){var d,data,w,_i,_len,_ref;data={type:"event",event:{id:event.id,type:event.type,widgets:[]}};if(event.meta){data.event.meta=event.meta;}
_ref=event.widgets;for(_i=0,_len=_ref.length;_i<_len;_i++){w=_ref[_i];d=w.data();delete d.content;data.event.widgets.push(d);}
if(event.type==="click"){setLastEventId(event.id);}
return OptimizeSuite.TrackingHub.add("bloodhound",data);});bloodhound.on("impression",function(widgets){var data,w,_i,_len;data={type:"impression",widgets:[]};for(_i=0,_len=widgets.length;_i<_len;_i++){w=widgets[_i];data.widgets.push(w.data());}
return OptimizeSuite.TrackingHub.add("bloodhound",data);});return bloodhound.on("error",function(e){var data;data={type:"error",error:e};return OptimizeSuite.TrackingHub.add("bloodhound",data);});};}).call(this);})();Groupon.Finch={};Groupon.Finch={init:function(){this.trigger('init');},onReady:function(f){this.onReadyFunctions=this.onReadyFunctions||[];this.onReadyFunctions.push(f);},execute:function(){if(!this.onReadyFunctions)return;for(i=0;i<this.onReadyFunctions.length;i++){this.onReadyFunctions[i].call();}},trigger:function(key){if(!this._events||!this._events[key])return false;for(var i=0;i<this._events[key].length;i++)
this._events[key][i].apply(this);return true;},bind:function(key,func){this._events=this._events||{};this._events[key]=this._events[key]||[];this._events[key].push(func);return this;}};Groupon.Finch.bind('init',function(){if(!(/finch_init/).test(document.documentElement.className))
document.documentElement.className+=' finch_init';});Groupon.Finch.bind('run',function(){document.documentElement.className=document.documentElement.className.replace('finch_init','');});Groupon.Finch.init();Groupon.Finch.GrouponAnalyticsTracker={track:function(experimentSets){_(experimentSets).each(function(experimentSet){var layerName=experimentSet.layer.name;var experimentId=experimentSet.experiment.id;var variantName=experimentSet.variant;if(!window._gaq)
Groupon.Analytics.Google.initialize();Groupon.Analytics.Google.setExperimentCustomVar(layerName,experimentId,variantName);});}};Groupon.Finch.TrackingHubTracker={track:function(experimentSets){_(experimentSets).each(function(experimentSet){layerName=experimentSet.layer.name;experimentId=experimentSet.experiment.id;variantName=experimentSet.variant;error=experimentSet.error;OptimizeSuite.TrackingHub.add("finch-experiment",{layer:layerName,experiment:experimentId,variant:variantName,error:error});});}};Finch.Diversions.SubscriberCookieDiversion=new Finch.HashCookieDiversion('scid');Finch.Experiments.Global={guards:{on_deal_or_division_page:function(){return Groupon.onDealPage||Groupon.onDivisionPage;},on_all_deals_page:function(){return Groupon.onAllDealsPage;},onBrowsePage:function(){return Groupon.enabledFeatures&&Groupon.enabledFeatures.browse&&window.location.pathname.toLowerCase().indexOf('/browse')>-1},onBrowseOrDealPages:function(){var guards=Finch.Experiments.Global.guards;var onBrowsePage=guards.onBrowsePage();var onValidDealPage=guards.on_deal_or_division_page()&&guards.not_goods_deal()&&guards.not_now_deal()&&guards.not_travel_deal();return onBrowsePage||onValidDealPage;},inBrowseExperiment:function(){return Finch.inTreatment({experimentName:'LocalNavHeaderWithBrowseLink',variantName:'LocalNavWithBrowseLink'});},on_vip_gallery_page:function(){return Groupon.onVIPGalleryPage;},on_getaways_gallery_page:function(){return Groupon.onChannelGalleryPage&&Groupon.currentChannel&&Groupon.currentChannel.permalink==="getaways";},on_gallery_or_browse_page:function(){return Groupon.onChannelGalleryPage||Groupon.onVIPGalleryPage||Groupon.onAllDealsPage||window.location.pathname.toLowerCase().indexOf('/browse')>-1;},url_params_match:function(params){var queryParams;queryParams=Finch.Utility.parseQueryString(location.search);return _.all(params,function(paramValue,paramName){return(queryParams[paramName]!=null&&queryParams[paramName]===paramValue);});},path_matches:function(pathPatterns){var path;path=location.pathname;if((path!=null)&&pathPatterns.length===0){return true;}
return _.any(pathPatterns,function(pattern){return pattern.test(path);});},user_is_on_rewards:function(){return Groupon.currentUser&&Groupon.currentUser.isAuthenticated&&Groupon.currentUser.onRewards;},user_is_not_on_rewards:function(){return!Finch.Experiments.Global.guards.user_is_on_rewards();},on_rewards_page:function(){return Groupon.onRewardsPage;},not_on_your_deals_page:function(){return!Groupon.onYourDealsPage;},division_is_enabled_for_now:function(){return!!(Groupon.enabledFeatures&&Groupon.enabledFeatures.now);},on_now_page:function(){return Groupon.onNowPage;},on_page_with_sub:function(){var sub_new=Finch.Experiments.Global.guards.path_matches([(/\/subscriptions\/new/)]);return Finch.Experiments.Global.guards.on_deal_or_division_page||sub_new;},on_sub_flow:function(){return Finch.Experiments.Global.guards.path_matches([(/\/subscriptions\/new/)]);},on_main_sub_flow_only:function(){return Finch.Experiments.Global.guards.path_matches([(/\/subscriptions\/new/)])&&!Finch.Experiments.Global.guards.path_matches([(/\/ch\//)])&&!(window.location.search.match(/medium=app_center/)||window.location.href.match(/access_token=/));},on_checkout_page:function(){return(/^\/deals\/[^\/]+\/confirmation$/).test(window.location.pathname);},on_edit_confirmation_page:function(){return(/^\/deals\/[^\/]+\/confirmation\/\d+$/).test(window.location.pathname);},on_receipt_page:function(){return Finch.Experiments.Global.guards.path_matches([(/\/thank_you/)]);},on_refer_a_friend_page:function(){return Finch.Experiments.Global.guards.path_matches([(/\/users\/.*\/referrals/)]);},now_deal:function(){return Groupon.currentDeal&&!!Groupon.currentDeal.nowDeal;},not_now_deal:function(){return!Groupon.currentDeal||!Groupon.currentDeal.nowDeal;},scheduler_deal:function(){return Groupon.currentDeal&&Groupon.currentDeal.bookable;},not_scheduler_deal:function(){return!Groupon.currentDeal||!Groupon.currentDeal.bookable;},on_goods_deal:function(){return Groupon.currentDeal&&Groupon.currentDeal.goodsDeal;},not_goods_deal:function(){return!Finch.Experiments.Global.guards.on_goods_deal();},on_travel_deal:function(){return Groupon.currentDeal&&Groupon.currentDeal.travelDeal;},not_on_travel_channel:function(){return!Groupon.currentChannel||!Groupon.currentChannel.permalink=='getaways'},not_on_goods_channel:function(){return!Groupon.currentChannel||!Groupon.currentChannel.permalink=='goods'},not_travel_deal:function(){return!Finch.Experiments.Global.guards.on_travel_deal();},not_has_forced_template:function(){return!Groupon.currentDeal||!Groupon.currentDeal.hasForcedTemplate;},not_subscription_page:function(){var regex=/\/subscriptions\/new/;return!Finch.Experiments.Global.guards.path_matches([regex]);},on_support_page:function(){var support_page_regex=/^(?:\/[a-zA-Z]{2}|\/[a-zA-Z]{2}_[a-zA-Z]{2})?\/support/;return Finch.Experiments.Global.guards.path_matches([support_page_regex]);},supported_browser:function(){return!($.browser.msie&&parseInt($.browser.version,10)<9);},not_on_ie:function(){return!($.browser.msie);},not_on_ie8:function(){return!($.browser.msie&&parseInt($.browser.version,10)==8);},not_on_ie7:function(){return!($.browser.msie&&parseInt($.browser.version,10)==7);},not_on_ie6:function(){return!($.browser.msie&&parseInt($.browser.version,10)<=6);},supports_localstorage:function(){return typeof localStorage!=="undefined"&&localStorage!=null;},not_on_touch_site:function(){var userAgentsRegex=new RegExp("iphone|webos|android|ipad|blackberry .+ applewebkit");return!userAgentsRegex.test(navigator.userAgent.toLowerCase());},not_dale:function(){return location.search.indexOf('dl=d47388')===-1;},on_multi_option_deal:function(){return Groupon.currentDeal&&Groupon.currentDeal.multiDeal;},on_dale:function(){return Finch.Experiments.Global.guards.url_params_match({dl:'d47388'});},on_scottsdale:function(){return!!(Groupon.Dale.experiment==="Scottsdale");},on_davesdale:function(){return!!(Groupon.Dale.experiment==="Davesdale");},not_post_purchase:function(){return!Finch.Experiments.Global.guards.url_params_match({post_purchase:'true'});},cookies_enabled:function(){var cookieName='_finch-cookie-test';Cookie.set(cookieName,"enabled");if(Cookie.get(cookieName)==="enabled"){Cookie.unset(cookieName);return true;}else{return false;}},on_sub_center_with_division:function(){var regex=/\/subscription_center?.*unsubscribed_division/;return regex.test(location.href);},on_sub_center_with_channel:function(){var regex=/\/subscription_center?.*unsubscribed_channel/;return regex.test(location.href);},on_page_with_rail_list:function(){return $("#rail_list").length>0;},not_admin:function(){var user=$.parseJSON(unescape(Cookie.get('user_info')));if(user){return!user.aos;}else{return true;}},not_post_subscribe:function(){return!Finch.Experiments.Global.guards.url_params_match({post_subscribe:'true'});},not_dale_merchant:function(){var user=$.parseJSON(unescape(Cookie.get('user_info')));if(user){if(user.has_merchants&&Finch.Experiments.Global.guards.url_params_match({dl:'d47388'})){window.location.replace(window.location.toString().replace(/(&)?dl=d47388(&)?/,''));}
return!user.has_merchants;}else{return true;}},is_internal_user:function(){return!!(typeof Groupon.currentUser.emailAddress!=="undefined"&&Groupon.currentUser.emailAddress.match(/@groupon.com$/i));},is_logged_out_user:function(){return Groupon.currentUser.isAuthenticated===false&&typeof(Groupon.currentUser.profile)!=="undefined"&&Groupon.currentUser.profile.is_account_holder===true;},is_logged_out_user_via_confirmation_data:function(){return Groupon.ConfirmationPageData.account_holder&&!Groupon.ConfirmationPageData.logged_in;},is_subscribed_user_via_confirmation_data:function(){return Groupon.ConfirmationPageData.subscriber&&!Groupon.ConfirmationPageData.logged_in&&!Groupon.ConfirmationPageData.account_holder;},is_anonymous_user_via_confirmation_data:function(){return Groupon.ConfirmationPageData.subscriber===null&&!Groupon.ConfirmationPageData.logged_in&&!Groupon.ConfirmationPageData.account_holder;},on_thumb_page:function(){return(Groupon.onDealPage||Groupon.onDivisionPage||Groupon.onAllDealsPage||Groupon.onVIPGalleryPage||Groupon.onChannelGalleryPage);},user_has_places:function(){return Groupon.currentUser.places&&(Groupon.currentUser.places.length>0);},on_myprofile_page:function(){return(/^\/((users\/[^\/]+\/profile\/edit)|(questionnaire))$/).test(window.location.pathname);},not_in_browse_experience:function(){return!Finch.Experiments.Global.guards.inBrowseExperiment();},on_gifts_page:function(){return Groupon.onGiftsPage;},on_my_groupons_page:function(){return Groupon.onMyGrouponsPage;}}};(function(){function is_on_page_with_deal_buy_button(){return $('.deal a.buy_btn:not(.multideal), .deal_options table.pledges tr:not(.sold_out) > td.purchase > a.buy_button').length>0;}
function is_on_checkout_login_page(){return window.location.pathname=='/login'&&(/^\?from_checkout_redirect=true&ref=(?:.*\/deals\/[^\/]+\/confirmation.*?)(?:&.*)?$/).test(window.location.search);}
function skipLink(text){return $('<a class="skip_login" data-bhw="SkipThisStep"></a>').attr('href',paramFromQuery('ref')).append(text)[0];}
function paramFromQuery(param){var results=new RegExp('[\\?&]'+param+'=([^&#]*)').exec(window.location.href);return decodeURIComponent(results[1])||false;}
function writeStyleTagToHideConfirmationPage(){$('head').append('<style>#deal_confirmation, #rail { display: none; }</style>');}
Finch.Experiments.CheckoutRedirect={Treatments:{DealBuyPage:{addRedirect:function(){$('.deal a.buy_btn:not(.multideal), .deal_options table.pledges tr:not(.sold_out) a').click(function(e){e.preventDefault();TrackingHub.add('checkoutredirect:redirect-to-login',{});window.location.href='/login?from_checkout_redirect=true&ref='+escape($(this).attr('href'));});}},CheckoutLogin:{replaceHeader:function(){var caption=$('<span class="skip"></span>').html('or ').append(skipLink('Skip this Step'));$('#login_section .page_header h2').html('Sign In to Continue ').append(caption);},replaceCaption:function(){$('form .buttons span.caption').html('or ').append(skipLink('Skip this Step'));},addTracking:function(){$('a.skip_login').click(function(e){TrackingHub.add('checkoutredirect:skip-login',{});});$('input#session_submit').click(function(e){TrackingHub.add('checkoutredirect:login',{});});},personalizeLoginForm:function(){$('form#new_session input#session_email_address').val(Cookie.get('subscriber_email'));$('form#new_session input#session_password').focus();}}},defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!="undefined"){return Groupon.onCurrentUserReady(function(){return experiment.deferredRun(window);});}
return null;},variants:{Original:function(){if(Finch.Experiments.Global.guards.on_deal_or_division_page()){$('.deal a.buy_btn:not(.multideal), .deal_options table.pledges tr:not(.sold_out) > td.purchase > a.buy_button').click(function(e){TrackingHub.add('checkoutredirect:redirect-to-checkout',{});});}},Redirect:function(){if(is_on_page_with_deal_buy_button()){Finch.Experiments.CheckoutRedirect.Treatments.DealBuyPage.addRedirect();}
if(is_on_checkout_login_page()){Finch.Experiments.CheckoutRedirect.Treatments.CheckoutLogin.replaceHeader();Finch.Experiments.CheckoutRedirect.Treatments.CheckoutLogin.replaceCaption();Finch.Experiments.CheckoutRedirect.Treatments.CheckoutLogin.personalizeLoginForm();Finch.Experiments.CheckoutRedirect.Treatments.CheckoutLogin.addTracking();}}},guards:{is_on_buy_page_as_logged_out_user_or_on_checkout_login_page:function(){return(Finch.Experiments.Global.guards.on_deal_or_division_page()&&Finch.Experiments.Global.guards.is_logged_out_user())||is_on_checkout_login_page();}}};Finch.Experiments.CheckoutAuthLoggedOutUsers={runOnInit:true,variants:{Control:function(){},AuthStep:function(){writeStyleTagToHideConfirmationPage();Groupon.ConfirmationAuthFlow=true;$(function(){var authenticationStepView=new App.Views.Confirmation.AuthenticationStepView({model:new App.Models.Confirmation.AuthenticationStep({state:Groupon.authenticationState||'sign_in'})});authenticationStepView.render();});}}};Finch.Experiments.CheckoutAuthSubscribedUsers={runOnInit:true,variants:{Control:function(){},AuthStep:function(){writeStyleTagToHideConfirmationPage();Groupon.ConfirmationAuthFlow=true;$(function(){var authenticationStepView=new App.Views.Confirmation.AuthenticationStepView({model:new App.Models.Confirmation.AuthenticationStep({state:Groupon.authenticationState||'sign_up_subscriber'})});authenticationStepView.render();});}}};Finch.Experiments.CheckoutAuthAnonymousUsers={runOnInit:true,variants:{Control:function(){},AuthStep:function(){writeStyleTagToHideConfirmationPage();Groupon.ConfirmationAuthFlow=true;$(function(){var authenticationStepView=new App.Views.Confirmation.AuthenticationStepView({model:new App.Models.Confirmation.AuthenticationStep({state:Groupon.authenticationState||'sign_in'})});authenticationStepView.render();});}}};})();Finch.Experiments.AllDealsDiscount={variants:{Original:function(){},Discounted:function(){$('#deal_container').addClass('all_deals_discounted_group');Groupon.Personalization.AllDeals.Discount=true;}}};Finch.Experiments.OGCurrentUserReady={defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!="undefined"){return Groupon.onCurrentUserReady(function(){return experiment.deferredRun(window);});}
return null;},variants:{variant_1:function(){},variant_2:function(){}}};Finch.Experiments.NoTippingPt={variants:{Original:function(){},HideTippingPoint:function(){Groupon.onCurrentUserReady(function(){$('#number_sold_container').addClass('finch_hidden_tipping_point');});}},guards:{deal_is_not_sold_out:function(){return!Groupon.currentDeal.sold_out;}}};Finch.Experiments.FacebookConnectDollarOff={defer:function(){var self=this,dollarOffLaunched=false,creditCardAuthComplete=false,runIfReady=function(){if(dollarOffLaunched&&creditCardAuthComplete){self.deferredRun();}};PubSub.subscribe("finch.dollar_off_experiment",function(channel,views){Finch.Experiments.FacebookConnectDollarOff.views=views;dollarOffLaunched=true;runIfReady();});Finch.Experiments.CreditCardAuthorization.onComplete(function(){creditCardAuthComplete=true;runIfReady();});},variants:{Original:function(){},showDollarOffView:function(){var views=Finch.Experiments.FacebookConnectDollarOff.views;_.delay(views.pp_fb_con_one_dollar_off().renderAsModal,1000);},showFacebookShareView:function(){var views=Finch.Experiments.FacebookConnectDollarOff.views;_.delay(views.pp_fb_con_share().renderAsModal,1000);}}};Finch.Experiments.ClickyBannerHoldout={variants:{Original:function(){},HideClickyBanner:function(){$('#rail_list .clicky_badge').hide();}}};Finch.Experiments.ClickyBanner={variants:{Original:function(){},ShowClickyBanner:function(){$('#rail_list .clicky_badge').show();}},guards:{is_division_in_list:function()
{disabledDivisions={"Nashville":true,"Salt Lake City":true,"San Francisco":true,"Hampton Roads":true,"Jacksonville":true,"New Orleans":true,"Hartford":true,"Inland Empire":true,"Calgary":true,"Louisville":true,"Oklahoma City":true,"Richmond":true,"Central Jersey":true,"Ottawa":true,"Edmonton":true,"Honolulu":true,"Providence":true,"Birmingham":true,"Grand Rapids":true,"Buffalo":true,"Rochester":true,"Memphis":true,"Omaha":true,"Wichita":true,"Knoxville":true,"Raleigh":true,"Baltimore":true,"Austin":true,"Indianapolis":true,"Kansas City":true,"Charlotte":true,"Sacramento":true,"Pittsburgh":true,"San Jose":true,"San Antonio":true,"Columbus":true,"Cincinnati":true,"Fort Lauderdale":true,"Cleveland":true,"Milwaukee":true,"Fort Worth":true,"Long Island":true,"Palm Beach":true,"Tucson":true,"Madison":true,"Akron":true,"Greenville":true,"Westchester County":true,"Dayton":true,"Colorado Springs":true,"Fairfield County":true,"Ann Arbor":true,"Napa / Sonoma":true,"Santa Cruz":true,"Salem":true,"Lakeland":true,"Athens":true,"Stockton":true,"Youngstown":true,"Topeka":true};return!disabledDivisions[Groupon.division.name];}}};Finch.Experiments.StaySignedIn={variants:{Control:function(){},HideUnchecked:function(){$("#brief_form_remember_me").hide();$("input#user_remember_me").prop('checked',false);}}};Finch.Experiments.ShowMonetizationWidget={defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!="undefined"){return Groupon.onCurrentUserReady(function(){return experiment.deferredRun(window);});}
return null;},variants:{Control:function(){},ShowWidgetCatSubCat:function(){Groupon.GsmWidgetInitiation();},ShowWidgetCatOnly:function(){if($('#widget_for_monetization').length){var widgetOptions={categories:Groupon.currentDeal.category};Groupon.GsmWidgetInitiation(widgetOptions);$('#widget_for_monetization').show();}}},guards:{on_expired_G1_page_or_Now_page:function(){var isOnDealPageOrNowPage=Groupon.onDealPage||Groupon.onNowPage;var dealIsNotPurchasable=Groupon.currentDeal&&!Groupon.currentDeal.purchasable;return isOnDealPageOrNowPage&&dealIsNotPurchasable;}}};Finch.Experiments.DisableDealBankPostSubscribe={variants:{control:function(){},disabled:function(){var newSubForm=$("#new_subscription");if(newSubForm.length>0){var url=newSubForm.attr("action");var seperator=url.indexOf('?')>=0?'&':'?';newSubForm.attr("action",url+seperator+"ddb=true");}}}};Finch.Experiments.CachedConfirmationPageTwo={variants:{uncached:function(){Groupon.Personalization.cachedCheckout=false;},cached:function(){Groupon.Personalization.cachedCheckout=true;}}};Finch.Experiments.CachedConfirmationPage={defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!='undefined'){Groupon.onCurrentUserReady(function(){experiment.deferredRun(Finch.window);});}},variants:{uncached:function(){},cached:function(){Groupon.Personalization.modifyBuyButtonForCachedCheckout();}},guards:{eligable_for_cached_checkout:function(){if(typeof Groupon.Personalization!='undefined'){return Groupon.Personalization.eligableForCachedCheckout(Groupon.currentUser,Groupon.currentDeal);}else{return false;}}}};(function(){function replaceNumInElement(elem){var original=elem.html();var num=original.match(/[\d,]+/);if(num){elem.html(original.replace(/[\d,]+/,depreciateNumber(num.first())));}}
function depreciateNumber(num){if(num<2){return addCommas(num);}
num=parseInt(num.replace(/,/,'')*0.70,10);num=roundDown(num);return addCommas(num);}
function roundDown(num){if(num>100){var exp=parseInt(Math.log(num)/Math.log(10),10)-1;num=num-(num%Math.pow(10,exp));}
return num;}
function addCommas(num){var nStr=''+num;var rgx=/(\d+)(\d{3})/;while(rgx.test(nStr)){nStr=nStr.replace(rgx,'$1'+','+'$2');}
return nStr;}
Finch.Experiments.DepreciateFaultyCounter={variants:{control:function(){},depreciation:function(){$(".number, .status div").each(function(){replaceNumInElement($(this));});$('.cdn_cached #rail .integrated_side_deals, #number_sold_container').live('updated',function(){$(this).find('.number').each(function(){replaceNumInElement($(this));});});}}};})();Finch.Experiments.NowRelevanceSwitch={variants:{Original:function(){if(App){App.ExperimentVersions.NowRelevanceSwitch="Original";}},RelevanceService:function(){if(App){App.ExperimentVersions.NowRelevanceSwitch="RelevanceService";}}}};Finch.Experiments.ShowLogin={variants:{Control:function(){},Visible:function(){$("#login_form").show();$("#login_banner").hide();}}};Finch.Experiments.LocalFavorites={variants:{Original:function(){if(window.App){App.ExperimentVersions.LocalFavorites='Original';}},FavoritesV1:function(){if(window.App){App.ExperimentVersions.LocalFavorites='FavoritesV1';}},FavoritesV2:function(){if(window.App){App.ExperimentVersions.LocalFavorites='FavoritesV2';}},FavoritesV3:function(){if(window.App){App.ExperimentVersions.LocalFavorites='FavoritesV3';}}},guards:{division_enabled_for_local_favorites:function(){return!!(Groupon.enabledFeatures&&Groupon.enabledFeatures.localFavorites);}}};Finch.Experiments.RewardsMCVariation={runOnInit:true,variants:{Control:function(){Groupon.showNewRewardsText=false;},MC:function(){Groupon.showNewRewardsText=true;}}};Finch.Experiments.PersonalizeWizardCtaG1={Treatments:{PostSubscribe:{defaultBehavior:function(){},showPWModal:function(){}},CallToAction:{}},defer:function(){},variants:{Original:function(){},TopCTAPWModal:function(){}},after:function(){},guards:{wizard_enabled:function(){},wizard_activated:function(){}}};Finch.Experiments.PersonalizeWizard={Treatments:{PostSubscribe:{defaultBehavior:function(){},showPWModal:function(){},suppressZGModal:function(){}},CallToAction:{renderTop:function(){},renderBottom:function(){}}},defer:function(){},variants:{Original:function(){},TopCTAPWModal:function(){},BottomCTANoModal:function(){},BottomCTAZGModal:function(){}},after:function(){},guards:{wizard_enabled:function(){},wizard_activated:function(){}}};Finch.Experiments.ReceiptPage={variants:{Original:function(){},ReceiptPage:function(){}}};var PlacesTreatments={subs:{disabled_featured:function(){},disabled_alldeals:function(){}},users:{disabled:function(){},enabled:function(){}}};var placesExperiment=function(options){return{variants:{group1:function(){PlacesTreatments["subs"][options["group1"]["subs"]]();PlacesTreatments["users"][options["group1"]["users"]]();},group2:function(){PlacesTreatments["subs"][options["group2"]["subs"]]();PlacesTreatments["users"][options["group2"]["users"]]();}}};};Finch.Experiments.Places0=placesExperiment({group1:{subs:"disabled_alldeals",users:"enabled"},group2:{subs:"disabled_alldeals",users:"enabled"}});Finch.Experiments.Places1=placesExperiment({group1:{subs:"disabled_alldeals",users:"enabled"},group2:{subs:"disabled_alldeals",users:"enabled"}});Finch.Experiments.Places2=placesExperiment({group1:{subs:"disabled_alldeals",users:"enabled"},group2:{subs:"disabled_alldeals",users:"enabled"}});Finch.Experiments.Places3=placesExperiment({group1:{subs:"disabled_alldeals",users:"enabled"},group2:{subs:"disabled_alldeals",users:"enabled"}});Finch.Experiments.Places4=placesExperiment({group1:{subs:"disabled_alldeals",users:"enabled"},group2:{subs:"disabled_alldeals",users:"enabled"}});Finch.Experiments.Places5=placesExperiment({group1:{subs:"disabled_alldeals",users:"enabled"},group2:{subs:"disabled_alldeals",users:"enabled"}});Finch.Experiments.Places6=placesExperiment({group1:{subs:"disabled_alldeals",users:"enabled"},group2:{subs:"disabled_alldeals",users:"enabled"}});Finch.Experiments.Places7=placesExperiment({group1:{subs:"disabled_alldeals",users:"enabled"},group2:{subs:"disabled_alldeals",users:"enabled"}});Finch.Experiments.Places8=placesExperiment({group1:{subs:"disabled_alldeals",users:"enabled"},group2:{subs:"disabled_alldeals",users:"enabled"}});Finch.Experiments.Places9=placesExperiment({group1:{subs:"disabled_alldeals",users:"enabled"},group2:{subs:"disabled_alldeals",users:"enabled"}});Finch.Experiments.Bumpdown={variants:{Original:function(){},Bumpdown:function(){},BumpdownImages:function(){}},guards:{show_personalize_callout:function(){return false;},not_post_subscribe:function(){return false;},on_bumpdownable_page:function(){return false;}}};Finch.Experiments.NowRemoveMap={variants:{Original:function(){if(window.App){App.ExperimentVersions.NowRemoveMap=1;}},RemoveMap:function(){if(window.App){App.ExperimentVersions.NowRemoveMap=2;}}}};Finch.Experiments.NowRemoveMerchantWriteup={variants:{Original:function(){if(window.App){App.ExperimentVersions.NowRemoveMerchantWriteup=1;}},RemoveMerchantWriteup:function(){if(window.App){App.ExperimentVersions.NowRemoveMerchantWriteup=2;}}}};Finch.Experiments.AdPlacement={variants:{Original:function(){if(window.App){App.ExperimentVersions.NowAdChiclets='Original';}},Top:function(){if(window.App){App.ExperimentVersions.NowAdChiclets='Top';}}}};Finch.Experiments.ShowBookOnlineText={variants:{Control:function(){},Display:function(){if(Groupon.currentDeal&&Groupon.currentDeal.bookable){if(Finch.Experiments.Global.guards.url_params_match({dl:'d47388'})){$('.bookable_section').show();}
else{$('#price_tag').addClass('bookable');$('#scheduler_tooltip').show();}}}}};Finch.Experiments.TabbedDescription={variants:{Control:function(){},Tabs:function(){$('#tabs').tabs();$("#content .deal .secondary .tabbed").show();$("#write_up .article .tabbed").show();$("#content .deal .secondary .control").hide();$("#write_up .article .control").hide();$("#deal_fine_details").hide();}}};Finch.Experiments.TabbedDescription={variants:{Control:function(){},Tabs:function(){$('#tabs').tabs();$("#content .deal .secondary .tabbed").show();$("#write_up .article .tabbed").show();$("#content .deal .secondary .control").hide();$("#write_up .article .control").hide();$("#deal_fine_details").hide();}}};Finch.Experiments.SideDealsShortDescriptor={variants:{Control:function(){},ShortDescriptor:function(){$('.finch_short_descriptor_hide').hide();$('.finch_short_descriptor_gray').css('color','#949494');$('.finch_short_descriptor_show').show();}},defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!="undefined"){return Groupon.onCurrentUserReady(function(){return experiment.deferredRun(window);});}
return null;}};Finch.Experiments.OGDivisionTitleVariations={defer:function(){},variants:{Original:function(){},Replay:function(){}},guards:{user_has_places_or_current_search:function(){}}};Finch.Experiments.DaleDivisionTitleVariations={defer:function(){},variants:{Original:function(){},Replay:function(){}},guards:{has_places:function(){}}};Finch.Experiments.ShowMoreNowDeals={variants:{Control:function(){},Show20:function(){}}};Finch.Experiments.ReceiptPage={variants:{Original:function(){},ReceiptPage:function(){}}};Finch.Experiments.Bumpdown={variants:{Original:function(){},Bumpdown:function(){},BumpdownImages:function(){}},guards:{show_personalize_callout:function(){return false;},not_post_subscribe:function(){return false;},on_bumpdownable_page:function(){return false;}}};Finch.Experiments.ClarifyCopy={variants:{control:function(){},added_copy:function(){$(".skip_notification").show();}}};Finch.Experiments.HelpfulTip={variants:{control:function(){Groupon.SupportTesting.control();},optional_answer:function(){Groupon.SupportTesting.optionalAnswer();},force_answer:function(){Groupon.SupportTesting.forceAnswer();}}};Finch.Experiments.BoomerangMonitoring={runOnInit:true,variants:{Control:function(){},Boomerang:function(){Groupon.performance.useBoomerang=true;},BoomerangUpdate:function(){Groupon.performance.useBoomerang=true;Groupon.performance.useUpdate=true;}}};Finch.Experiments.BoomerangBW={runOnInit:true,variants:{Control:function(){},Enable_bandwidth:function(){Groupon.performance.useBoomerang=true;Groupon.performance.bw_enabled=true;}}};Finch.Experiments.BoomerangDNS={runOnInit:true,variants:{Control:function(){},Enable_dns:function(){Groupon.performance.useBoomerang=true;Groupon.performance.dns_enabled=true;}}};Finch.Experiments.LazyLoadingImages={runOnInit:true,variants:{Control:function(){},LazyLoad:function(){Groupon.performance.useImageLazyLoading=true;}}};(function(){function rewrite_subscription_url_as(path,ssl){if(location.pathname.indexOf(path)<0){$('body').hide();var protocol=(ssl===true)?'https:':'http:';window.location=protocol+'//'+window.location.host+path+window.location.search;return true;}
return false;}
Finch.Experiments.HyperLocalZip={runOnInit:true,trackOnInit:true,variants:{Control:function(){},HyperLocalZip:function(){rewrite_subscription_url_as('/nearby/subscriptions/new_zip');}}};Finch.Experiments.HyperLocalZipEarlySubscribe={runOnInit:true,trackOnInit:true,variants:{Control:function(){},HyperLocalZipEarlySubscribe:function(){rewrite_subscription_url_as('/nearby/subscriptions/new_zip');}}};Finch.Experiments.HyperLocalKitchenSinkLocation={runOnInit:true,trackOnInit:true,variants:{Control:function(){},HyperLocalKitchenSinkLocation:function(){if(!rewrite_subscription_url_as('/nearby/subscriptions/new_kitchen_sink_location')){Groupon.subscriptionWizard=true;$(function(){new App.Views.Subscription.SubscriptionView({url:'new_kitchen_sink_location',el:'#article',model:new App.Models.Subscription.Subscription(),collection:new App.Collections.Subscription.Steps([new App.Models.Subscription.EmailStep(),new App.Models.Subscription.KitchenSinkLocationStep()])}).render();});}},HyperLocalKitchenSinkLocationNoInitialAutocomplete:function(){var one_day_in_millis=1000*60*60*24
Groupon.AppConfig.kitchen_sink_autocomplete.initial_focus_auto_complete_delay=one_day_in_millis
Finch.Experiments.HyperLocalKitchenSinkLocation.variants.HyperLocalKitchenSinkLocation();}}};Finch.Experiments.HyperLocalZipEmail={runOnInit:true,trackOnInit:true,variants:{Control:function(){},HyperLocalZipEmail:function(){if(!rewrite_subscription_url_as('/nearby/subscriptions/new')){Groupon.subscriptionWizard=true;$(function(){new App.Views.Subscription.SubscriptionView({url:'new_zip',el:'#article',model:new App.Models.Subscription.Subscription(),collection:new App.Collections.Subscription.Steps([new App.Models.Subscription.ZipStep(),new App.Models.Subscription.EmailStep()])}).render();});}}}};Finch.Experiments.HyperLocalEmailZip={runOnInit:true,trackOnInit:true,variants:{Control:function(){},HyperLocalEmailZip:function(){if(!rewrite_subscription_url_as('/nearby/subscriptions/new')){Groupon.subscriptionWizard=true;$(function(){new App.Views.Subscription.SubscriptionView({url:'new_zip',el:'#article',model:new App.Models.Subscription.Subscription(),collection:new App.Collections.Subscription.Steps([new App.Models.Subscription.EmailStep(),new App.Models.Subscription.ZipStep()])}).render();});}}}};Finch.Experiments.HyperLocal={runOnInit:true,trackOnInit:true,variants:{Control:function(){},HyperLocal:function(){rewrite_subscription_url_as('/nearby/subscriptions/new');},HyperLocalZip:Finch.Experiments.HyperLocalZip.variants.HyperLocalZip,HyperLocalZipEarlySubscribe:Finch.Experiments.HyperLocalZipEarlySubscribe.variants.HyperLocalZipEarlySubscribe,HyperLocalKitchenSinkLocation:Finch.Experiments.HyperLocalKitchenSinkLocation.variants.HyperLocalKitchenSinkLocation,HyperLocalKitchenSinkLocationNoInitialAutocomplete:Finch.Experiments.HyperLocalKitchenSinkLocation.variants.HyperLocalKitchenSinkLocationNoInitialAutocomplete,HyperLocalEmailZip:Finch.Experiments.HyperLocalEmailZip.variants.HyperLocalEmailZip,HyperLocalZipEmail:Finch.Experiments.HyperLocalZipEmail.variants.HyperLocalZipEmail}};Finch.Experiments.HyperLocalFacebookZip={runOnInit:true,trackOnInit:true,variants:{Control:function(){},HyperLocalZip:Finch.Experiments.HyperLocalZip.variants.HyperLocalZip,HyperLocalFacebookZip:function(){rewrite_subscription_url_as('/nearby/subscriptions/new_fb_zip',Groupon.sslEnabled);}}};})();Finch.Experiments.BestOfWidget={variants:{Control:function(){},BestOfWidget:function(){var bestOf=new App.Collections.Widgets.BestOfDeals([],{sideDeals:Groupon.sideDeals,currentDealPermalink:Groupon.currentDeal?Groupon.currentDeal.permalink:null});bestOf.fetch().then(function(){(new App.Views.Widgets.BestOfDeals({collection:bestOf})).render();});}},defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!="undefined"){return Groupon.onCurrentUserReady(function(){return experiment.deferredRun(window);});}
return null;}};Finch.Experiments.RightRailCallout={run:function(){var callout=$("#channel_callout .getaways_holidays_callout");callout.removeClass("getaways_holidays_callout").addClass("goods_holidays_callout");callout.attr("data-bhw","Callout:goods");callout.children("a").attr("href","/goods");},variants:{Control:function(){},Goods:function(){Finch.Experiments.RightRailCallout.run();}},guards:{getaways_callout_present:function(){return $("#channel_callout .getaways_holidays_callout").length>0;}}};Finch.Experiments.SimilarDealsWidget={run:function(limit){if(Groupon.currentDeal){var similarDeals=new App.Collections.Widgets.SimilarDeals([],{dealPermalinks:[Groupon.currentDeal.permalink],limit:limit});similarDeals.fetch().then(function(){(new App.Views.Widgets.SideRailDeals({collection:similarDeals,title:I18n.translate("js.views.widgets.similar_deals.title"),el:"#similar_deals_widget"})).render();});}},variants:{Control:function(){},ThreeDeals:function(){Finch.Experiments.SimilarDealsWidget.run(3);},FiveDeals:function(){Finch.Experiments.SimilarDealsWidget.run(5);}},defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!="undefined"){return Groupon.onCurrentUserReady(function(){return experiment.deferredRun(window);});}
return null;}};Finch.Experiments.SimilarDealsWidgetUnderCallout={run:function(limit){if(Groupon.currentDeal){var similarDeals=new App.Collections.Widgets.SimilarDeals([],{dealPermalinks:[Groupon.currentDeal.permalink],limit:limit});similarDeals.fetch().then(function(){(new App.Views.Widgets.SideRailDeals({collection:similarDeals,title:I18n.translate("js.views.widgets.similar_deals.title"),el:"#similar_deals_widget_under_callout"})).render();});}},variants:{Control:function(){},ThreeDeals:function(){Finch.Experiments.SimilarDealsWidget.run(3);},FiveDeals:function(){Finch.Experiments.SimilarDealsWidget.run(5);}},defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!="undefined"){return Groupon.onCurrentUserReady(function(){return experiment.deferredRun(window);});}
return null;}};Finch.Experiments.SimilarDealsWidgetUnderDealTypes={run:function(limit){if(Groupon.currentDeal){var similarDeals=new App.Collections.Widgets.SimilarDeals([],{dealPermalinks:[Groupon.currentDeal.permalink],limit:limit});similarDeals.fetch().then(function(){(new App.Views.Widgets.SideRailDeals({collection:similarDeals,title:I18n.translate("js.views.widgets.similar_deals.title"),el:"#similar_deals_widget_under_deal_types"})).render();});}},variants:{Control:function(){},ThreeDeals:function(){Finch.Experiments.SimilarDealsWidget.run(3);},FiveDeals:function(){Finch.Experiments.SimilarDealsWidget.run(5);}},guards:{on_page_with_deal_types_widget:function(){return $(".best_type_deals").length>0;},},defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!="undefined"){return Groupon.onCurrentUserReady(function(){return experiment.deferredRun(window);});}
return null;}};Finch.Experiments.FirstComeFirstServeSocialGifting={variants:{gifting:function(){if(!Groupon.SocialGifting){Groupon.SocialGifting={};}
Groupon.SocialGifting.FirstComeFirstServe=true}}};Finch.Experiments.MyGrouponsMobileModal={variants:{Control:function(){},ShowModal:function(){var mobileModal=new Groupon.MyGrouponsMobileModal();mobileModal.pop();}},defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!="undefined"){return Groupon.onCurrentUserReady(function(){return experiment.deferredRun(window);});}
return null;}};Finch.Experiments.RedirectToLUP1={runOnInit:true,trackOnInit:true,variants:{Control:function(){},RedirectControl:function(){var param;if(Cookie.get("lup1")!=="control"){Cookie.set("lup1","control",60*60*24*7);param=window.location.search+(window.location.search==''?'?':'&')+'lup=0';window.location.replace(param);}},LUP1:function(){var param;if(Cookie.get("lup1")!=="redirect"){Cookie.set("lup1","redirect",60*60*24*7);param=window.location.search+(window.location.search==''?'?':'&')+'lup=1';window.location.replace(param);}}}};Finch.Experiments.ReorderSidebar={variants:{Original:function(){},Reordered:function(){var callout=$("li#channel_callout").remove();var sideDeals=$("li.integrated_side_deals").remove();var nowWidget=$("li#now_widget").remove();var clicky=$("li.clicky_badge").remove();var railList=$("#rail_list");railList.prepend(sideDeals).prepend(nowWidget).prepend(clicky).prepend(callout);}}};Finch.Experiments.IntegratedSideDealsRedesign={variants:{Control:function(){},Redesign:function(){Groupon.integratedSideDealsRedesign=true}},guards:{user_is_not_anonymous:function(){return Cookie.get('scid')!=undefined&&Cookie.get('scid')!=null;}}};Finch.Experiments.DealTypeTitle={variants:{Control:function(){},Icon:function(){$(".best_type_deals h3").html('<span class="heart"></span>"'+
Finch.Experiments.DealTypeTitle.dealTypeName+'" Deals For You');}},guards:{deal_type_widget_is_rendered:function(){return $(".best_type_deals").length>0;}},defer:function(){var experiment=this;$(document).bind("dealTypeWidgetRendered",function(event,dealTypeName){Finch.Experiments.DealTypeTitle.dealTypeName=dealTypeName;return experiment.deferredRun();});return null;}};Finch.Experiments.NewModals={variants:{Feedback:function(){subscription_center_key=$('#subscription_center_key').val();Groupon.Analytics.PixelTracker.injectTrackingPixel('unsubscribe.load',{subscription_center_key:subscription_center_key});if($("body .surrogate_success").length>0){$("#alerts .success").hide();}
$('#finch_feedback').show();$('#finch_base').hide();$('#back_to_sub_center').click(function(e){$('#finch_base').show();$('#finch_feedback').hide();Groupon.Analytics.PixelTracker.injectTrackingPixel('unsubscribe.reason',{subscription_center_key:subscription_center_key,feedback:'back_to_manage'});});$('#download_mobile_app').click(function(e){Groupon.Analytics.PixelTracker.injectTrackingPixel('unsubscribe.reason',{subscription_center_key:subscription_center_key,feedback:'download_mobile_app'});});$('#weekly_digest').click(function(e){Groupon.Analytics.PixelTracker.injectTrackingPixel('unsubscribe.reason',{subscription_center_key:subscription_center_key,feedback:'get_weekly_digest'});});}}};Finch.Experiments.ChannelNewModals={variants:{ChannelFeedback:function(){subscription_center_key=$('#subscription_center_key').val();Groupon.Analytics.PixelTracker.injectTrackingPixel('unsubscribe_channel.load',{subscription_center_key:subscription_center_key});if($("body .surrogate_success").length>0){$("#alerts .success").hide();}
$('#finch_feedback').show();$('#finch_base').hide();$('#back_to_sub_center').click(function(e){$('#finch_base').show();$('#finch_feedback').hide();Groupon.Analytics.PixelTracker.injectTrackingPixel('unsubscribe_channel.reason',{subscription_center_key:subscription_center_key,feedback:'back_to_manage'});});$('#download_mobile_app').click(function(e){Groupon.Analytics.PixelTracker.injectTrackingPixel('unsubscribe_channel.reason',{subscription_center_key:subscription_center_key,feedback:'download_mobile_app'});});$('#weekly_digest').click(function(e){Groupon.Analytics.PixelTracker.injectTrackingPixel('unsubscribe_channel.reason',{subscription_center_key:subscription_center_key,feedback:'get_weekly_digest'});});}}};Finch.Experiments.NewModals2=Finch.Experiments.NewModals;Finch.Experiments.DisableGetawaysStickyBar={variants:{Original:function(){},StickyBarDisabled:function(){$(function(){Groupon.Getaways.StickyBar.disable();});}}};Finch.Experiments.RecentlyViewedDeals={run:function(maxDeals){var rvd=new App.Collections.Widgets.RecentlyViewedDeals([],{userPermalink:Groupon.currentUser.permalink});rvd.fetch().then(function(){(new App.Views.Widgets.SideRailDeals({collection:rvd,currentDealPermalink:Groupon.currentDeal.permalink,title:I18n.translate("js.views.widgets.recently_viewed_deals.title"),maxDeals:maxDeals,reverse:true})).render();});},variants:{Control:function(){},ThreeDeals:function(){Finch.Experiments.RecentlyViewedDeals.run(3);},FiveDeals:function(){Finch.Experiments.RecentlyViewedDeals.run(5);}},defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!="undefined"){return Groupon.onCurrentUserReady(function(){return experiment.deferredRun(window);});}
return null;}};Finch.Experiments.ReceiptPageFBConnect={defer:function(){var self=this,creditCardAuthComplete=false,connectSharingLaunched=false,runIfReady=function(){if(creditCardAuthComplete&&connectSharingLaunched){self.deferredRun();}};PubSub.subscribe("finch.fbconnectsharing_experiment",function(){connectSharingLaunched=true;runIfReady();});Finch.Experiments.CreditCardAuthorization.onComplete(function(){creditCardAuthComplete=true;runIfReady();});},variants:{Control:function(){},FBConnectSharing:function(){$("#publish_to_open_graph").show();$(".receipt_header").addClass("post_purchase_experiment");$(".receipt_share").addClass("post_purchase_experiment");$(".receipt_what_next").addClass("post_purchase_experiment");}}};Finch.Experiments.RewardsNewBadge={variants:{Control:function(){},HideBadge:function(){$('.Rewards .new_badge').hide();}},guards:{on_page_with_rewards_new_badge:function(){return $('.Rewards .new_badge').length>0;}}};Finch.Experiments.RedirectEffect={runOnInit:true,trackOnInit:true,variants:{Control:function(){},ControlB:function(){},Redirect:function(){Cookie.set("fre","1");var divider=(window.location.href.indexOf("?")>-1)?"&":"?";window.location.href=window.location.href+divider+"fre=1";}},guards:{should_redirect:function(){return!(Cookie.get("fre"));}}};Finch.Experiments.HideCheckoutHeaderFooter={runOnInit:true,variants:{Control:function(){},Hide:function(){$("head").append($("<style>#header_nav, #header .account_links, #footer { display: none; }</style>"));}}};Finch.Experiments.DisplayExtraInfo={defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!="undefined"){return Groupon.onCurrentUserReady(function(){return experiment.deferredRun(window);});}
return null;},variants:{ExtraStuff:function(){$(".extended_info .title").hide();$(".tile_summary").show();$(".descriptor").show();},Control:function(){}}};Finch.Experiments.ConfirmationPageSignIn={variants:{ShowButton:function(){$("#show_login_subform.sign_in").hide();$("#show_login_subform.alt_sign_in").show();},Control:function(){}}};Finch.Experiments.ShowExtraBillingCopy={variants:{HeaderCopy:function(){$(".finch_exp_info_header").show();},BillingAddressCopy:function(){$(".billing_address_note").show();},Control:function(){}}};Finch.Experiments.ShowAltPersonalHeader={variants:{AltHeader:function(){$(".finch_personal_header_alt").show();$(".finch_personal_header_original").hide();},Control:function(){}}};Finch.Experiments.OptionsWidgetVariations={variants:{Original:function(){},OptionsWidget:function(){if($("#options_widget_data")&&$("#options_widget_data").attr('data-value')){if(deal_options_widget_init()){$("#buy_btn_campaign").removeClass('multideal');$("#buy_btn_campaign").addClass('options_widget_link');}}}}};Finch.Experiments.GoodsDeliveryEstimation={run:function(){if(Groupon.onCurrentUserReady){var estimation=new Groupon.Views.DeliveryEstimation();estimation.fetch();}},variants:{Original:function(){},EnableEstimation:function(){Finch.Experiments.GoodsDeliveryEstimation.run();}},defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!="undefined"){return Groupon.onCurrentUserReady(function(){return experiment.deferredRun(window);});}
return null;}};Finch.Experiments.DealsYouLoveChicklet={variants:{Control:function(){},ShowChicklet:function(){$("#widget_collage_chicklet").insertAfter("#deal_container .featured").show();}},guards:{in_deals_you_love_division:function(){return $("#widget_collage_chicklet").length>0;},subscriber_or_logged_in_user:function(){return Groupon.currentUser.subscribedToCurrentDivision||Groupon.currentUser.isAuthenticated;}},defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!="undefined"){return Groupon.onCurrentUserReady(function(){return experiment.deferredRun(window);});}
return null;}};Finch.Experiments.Fb_Share_dialogs={variants:{Control:function(){},Feed_dialog:function(){Groupon.ReferFriend.enable_raf_fb_share_feed_dialog=true;$('#facebook_share_org').css('display','none');$('#facebook_share_feed_dialog').css('display','block');}}};Finch.Experiments.SocialPromotionPopupModal={variants:{Control:function(){},dollar_off_next_12_months:function(){PubSub.subscribe("finch.deal_page_experiment",function(channel,views){_.delay(views.one_dollar_off_next_12_months().renderAsModal,1000)});},dollar_off_next_24_hours:function(){PubSub.subscribe("finch.deal_page_experiment",function(channel,views){_.delay(views.one_dollar_off_next_24_hours().renderAsModal,1000)});},refer_a_friend:function(){PubSub.subscribe("finch.deal_page_experiment",function(channel,views){_.delay(views.refer_a_friend().renderAsModal,1000)});},no_incentive:function(){PubSub.subscribe("finch.deal_page_experiment",function(channel,views){_.delay(views.no_incentive().renderAsModal,1000)});}}};(function(){var track=function(event,properties){properties.evt=event;properties.exp=Finch.Experiments.DealPageSharing.active;properties.logged_in=(Groupon.currentUser&&Groupon.currentUser.isAuthenticated===true);Groupon.Social.Tracker.track('deal_sharing_buttons',properties);};var divForProminentVariant=function(){var div=$('<div class="prominent_deal_sharing"></div>');var rightColumn=$('.deal > .secondary');if(!rightColumn||rightColumn.length!==1){rightColumn=$('.deal #getaways-container .content-right');}
if(!rightColumn||rightColumn.length!==1){track('div_not_found',{url:window.location.href});}
rightColumn.append(div);return div;};var divForNonProminentVariant=function(){var div=$('.deal .sharing .share');if(!div||div.length!==1){track('div_not_found',{url:window.location.href});}
return div;};var loadVariant=function(variantName,variantContext){Finch.Experiments.DealPageSharing.active=variantName;$(function(){Groupon.onCurrentUserReady(function(){$('body').one('deal_status_updated',function(){if(Groupon.currentDeal.shareable){variantContext();}});});});};Finch.Experiments.DealPageSharing={runOnInit:true,variants:{Control:function(){},NonRAFNonProminent:function(){loadVariant('NonRAFNonProminent',function(){var div=divForNonProminentVariant();new App.Views.Social.DealShareLinks.NonRAFNonProminent({el:div});});},RAFNonProminent:function(){loadVariant('RAFNonProminent',function(){var div=divForNonProminentVariant();new App.Views.Social.DealShareLinks.RAFNonProminent({el:div});});},NonRAFProminent:function(){loadVariant('NonRAFProminent',function(){var div=divForProminentVariant();new App.Views.Social.DealShareLinks.NonRAFProminent({el:div});});},RAFProminent:function(){loadVariant('RAFProminent',function(){var div=divForProminentVariant();new App.Views.Social.DealShareLinks.RAFProminent({el:div});});}},guards:{on_deal_or_division_page:Finch.Experiments.Global.guards.on_deal_or_division_page,not_on_ie7:Finch.Experiments.Global.guards.not_on_ie7,not_on_ie6:Finch.Experiments.Global.guards.not_on_ie6}};})();Finch.Experiments.GiftLinkCheckoutPage={runOnInit:true,variants:{Original:function(){},GiftLinkCheckoutPage:function(){window.GiftVariants={};window.GiftVariants.GiftLinkCheckoutPage=true;},GiftLinkCheckoutPage2:function(){window.GiftVariants={};window.GiftVariants.GiftLinkCheckoutPage2=true;},GiftLinkCheckoutPage3:function(){window.GiftVariants={};window.GiftVariants.GiftLinkCheckoutPage3=true;}}};Finch.Experiments.GiftLinkDealPage={defer:function(){var experiment=this;if(typeof Groupon.onCurrentUserReady!="undefined"){return Groupon.onCurrentUserReady(function(){return experiment.deferredRun(window);});}
return null;},variants:{Original:function(){},GiftLinkDealPage:function(){$('#for_a_friend').attr('data-bhw','BuyForFriendAltText').find('a').html('<span class="icon_gift"></span>'+I18n.translate("js.views.deals.confirmation.gift_this_groupon"));},GiftLinkDealPage2:function(){$('#for_a_friend').attr('data-bhw','BuyForFriendAltText2').find('a').html('<span class="icon_gift"></span>'+I18n.translate("js.views.deals.confirmation.buy_it_as_a_gift"));},GiftLinkDealPage3:function(){$('#for_a_friend').attr('data-bhw','BuyForFriendAltText3').find('a').html('<span class="icon_gift"></span>'+I18n.translate("js.views.deals.confirmation.give_it_as_a_gift"));}}};Finch.Experiments.Fb_og_share={variants:{Control:function(){},OgAll:function(){PubSub.subscribe("finch.refer_page_fbcon_share_experiment",function(channel,views){view=views.refer_a_friend_fb_con();$(".post_to_facebook_all").click(views.refer_a_friend_fb_con().renderAsModal)
$(".post_to_facebook_link").blur(views.refer_a_friend_fb_con().renderAsModal)});}}};Finch.Experiments.GiftWizard={variants:{Original:function(){Groupon.Finch.ShowGiftWizard=true;Groupon.Gift.WizardVariant='a';},ScheduledDelivery:function(){Groupon.Finch.ShowGiftWizard=true;Groupon.Gift.WizardVariant='b';},HideGiftWizard:function(){Groupon.Finch.ShowGiftWizard=false;}}};Finch.Experiments.GiftFinder={variants:{Original:function(){Groupon.Gift.FinderVariant='a'},WithHeader:function(){Groupon.Gift.FinderVariant='b'},BelowAds:function(){Groupon.Gift.FinderVariant='c'},AboveMostGifted:function(){Groupon.Gift.FinderVariant='d'},HideGiftFinder:function(){Groupon.Finch.HideGiftFinder=true;}}};Finch.Experiments.PostPurchaseRAFShare={defer:function(){var self=this;Finch.Experiments.CreditCardAuthorization.onComplete(function(){self.deferredRun();});},init:function(termsOfServicesUrl,campaignInfo){Finch.Experiments.PostPurchaseRAFShare.termsOfServicesUrl=termsOfServicesUrl;Finch.Experiments.PostPurchaseRAFShare.campaignInfo=campaignInfo;},getModalViewInstance:function(variantLabel,promotionType,termsOfServicesUrl,includeFbConn){return new App.Views.Social.ConnectPromotionPostPurchaseRafView({promotion_type:promotionType,referral_links:Groupon.Social.Sharing.dealRAFLinks(variantLabel,Groupon.currentDeal,'pp'),terms_of_services_url:termsOfServicesUrl,include_fb_conn:includeFbConn,feed_dialog_fb_share_info:Finch.Experiments.PostPurchaseRAFShare.campaignInfo});},variants:{Control:function(){},Non_incentive_pp_raf:function(){_.delay(Finch.Experiments.PostPurchaseRAFShare.getModalViewInstance('var3','raf_pp_non_incentive',"",false).renderAsModal,2000);},Dollar_10_referrer_1_activates:function(){_.delay(Finch.Experiments.PostPurchaseRAFShare.getModalViewInstance('10r1act','raf_10_dollar_referrer_1_activates',Finch.Experiments.PostPurchaseRAFShare.termsOfServicesUrl,false).renderAsModal,2000);},Dollar_5_referrer_1_purchases:function(){_.delay(Finch.Experiments.PostPurchaseRAFShare.getModalViewInstance('5r1pur','raf_5_dollar_referrer_1_purchases',"http://www.groupon.com/pages/raf-special-promo-2",false).renderAsModal,2000);},Free_deal_referrer_3_purchases:function(){_.delay(Finch.Experiments.PostPurchaseRAFShare.getModalViewInstance('nr3pur','raf_Free_deal_referrer_3_purchases',"http://www.groupon.com/pages/raf-special-promo-3",false).renderAsModal,2000);},Dollar_5_referrer_referee_1_activates:function(){_.delay(Finch.Experiments.PostPurchaseRAFShare.getModalViewInstance('5rr1act','raf_5_dollar_rr_1_activates',"http://www.groupon.com/pages/raf-special-promo-1",false).renderAsModal,2000);},Fb_conn_dollar_10_referrer_1_activates:function(){_.delay(Finch.Experiments.PostPurchaseRAFShare.getModalViewInstance('10r1actfb','fb_raf_10_dollar_referrer_1_activates',Finch.Experiments.PostPurchaseRAFShare.termsOfServicesUrl,true).renderAsModal,2000);},Fb_conn_dollar_5_referrer_1_purchases:function(){_.delay(Finch.Experiments.PostPurchaseRAFShare.getModalViewInstance('5r1purfb','fb_raf_5_dollar_referrer_1_purchases',"http://www.groupon.com/pages/raf-special-promo-2",true).renderAsModal,2000);},Fb_conn_Free_deal_referrer_3_purchases:function(){_.delay(Finch.Experiments.PostPurchaseRAFShare.getModalViewInstance('nr3purfb','fb_raf_Free_deal_referrer_3_purchases',"http://www.groupon.com/pages/raf-special-promo-3",true).renderAsModal,2000);},Fb_conn_dollar_5_rr_1_activates:function(){_.delay(Finch.Experiments.PostPurchaseRAFShare.getModalViewInstance('5rr1actfb','fb_raf_5_dollar_rr_1_activates',"http://www.groupon.com/pages/raf-special-promo-1",true).renderAsModal,2000);}}};Finch.Experiments.SupportInbenta={variants:{Control:function(){},Experiment:function(){$('head').append('<script type="text/javascript" src="https://us.inbenta.com/groupon/assets/base.js"></script>');$('#ticket_inbenta').val('true');}},guards:{on_support_page:function(){return window.location.pathname==='/support'}}};Finch.Experiments.HideThePromise={runOnInit:true,variants:{Control:function(){},HidePromise:function(){$("<style type='text/css'> #groupon_promise{ display: none; } </style>").appendTo("head");}},guards:{on_deal_or_division_or_checkout_page:function(){return Finch.Experiments.Global.guards.on_deal_or_division_page()||Finch.Experiments.Global.guards.on_checkout_page();}}};Finch.Experiments.MassRefunds={variants:{Control:function(){},Experiment:function(){$('.mass_refund').removeClass('hidden');$('#mass_refund').addClass('button buy_btn');}},guards:{on_mass_refund_pages:function(){return(window.location.pathname==='/admin/home')||(window.location.href.indexOf("notes")>=0)}}};(function(){Finch.Experiments.MobileAnimation={variants:{Control:function(){},ShowMobileAnimation:function(){Groupon.ShowMobileAnimation=true}},guards:{searchBarEnabled:function(){var _ref;return!!((_ref=Groupon.enabledFeatures)!=null?_ref.browseSearchBar:void 0);},inSearchExp:function(){return Finch.inTreatment({experimentName:'SearchBar',variantName:'ShowLocationBar'})||Finch.inTreatment({experimentName:'SearchBar',variantName:'ShowLocationBarAndFreeTextSearch'});},mobileAnimationEnabled:function(){return $("#mobile_animation_container").length>0&&$('#new_drawer_anchor').is(':hidden');}}};})();(function(){function paramFromQuery(param){var results=new RegExp('[\\?&]'+param+'=([^&#]*)').exec(window.location.href);return(results!==null?decodeURIComponent(results[1]):"");}
function utmSource(){return paramFromQuery('utm_source');}
function utmMedium(){return paramFromQuery('utm_medium')}
function utmCampaign(){return paramFromQuery('utm_campaign');}
function utmTerm(){return paramFromQuery('utm_term');}
function originalUrlCookieDomain(){return location.hostname.match(/[^.]+\.(.+)/)[1];}
function originalUrlCookieExpiry(){return 60*60*24*365*10;}
Finch.Experiments.SmartAppBannerIpad={runOnInit:true,variants:{Control:function(){Groupon.inShowAppBannerIpad=false;originalUrlValue="http://www.groupon.com/mobile/download?grpn_dl="+utmSource()+":"+utmMedium()+":"+utmCampaign()+":"+utmTerm()+":ipad;smartapp-banner;SmartAppBannerIpad;Control";Cookie.set("originalUrl",originalUrlValue,originalUrlCookieExpiry(),originalUrlCookieDomain());Groupon.Analytics.Google.setExperimentCustomVar("smart-app-banner-ipad","SmartAppBannerIpad","Control");},ShowAppBanner:function(){if(Groupon.currentDeal){Groupon.inShowAppBannerIpad=true;originalUrlValue="http://www.groupon.com/mobile/download?grpn_dl="+utmSource()+":"+utmMedium()+":"+utmCampaign()+":"+utmTerm()+":ipad;smartapp-banner;SmartAppBannerIpad;ShowAppBanner";Cookie.set("originalUrl",originalUrlValue,originalUrlCookieExpiry(),originalUrlCookieDomain());iPadAppDispatchUrl="groupon://dispatch?originalUrl=";originalUrl="http://www.groupon.com/deal/"+Groupon.currentDeal.permalink+"?grpn_l="+utmSource()+":"+utmMedium()+":"+utmCampaign()+":"+utmTerm()+":ipad;smart-app-banner;SmartAppBannerIpad;ShowAppBanner";iPadAppDispatchUrl+=encodeURIComponent(originalUrl);$('head').append('<meta name="apple-itunes-app" content="app-id=433752055, app-argument='+iPadAppDispatchUrl+'">');Groupon.Analytics.Google.setExperimentCustomVar("smart-app-banner-ipad","SmartAppBannerIpad","ShowAppBanner");}}},guards:{ipad_iOS6:function(){var userAgentsRegex=new RegExp("ipad; cpu os 6_");return userAgentsRegex.test(navigator.userAgent.toLowerCase());},email_request:function(){return window.location.search.match(/medium=email/);},on_deal_page:function(){return Groupon.onDealPage;}}};})();(function(){Finch.Experiments.AddressBookLite={runOnInit:true,variants:{Control:function(){},AddressBookLite:function(){return Groupon.showAddressBookLite=true;}}};}).call(this);(function(){Finch.Experiments.BoomerangDealImageLoad={runOnInit:true,variants:{Control:function(){},DealImageLoad:function(){var _ref;return(_ref=Groupon.performance)!=null?_ref.boomerangAutorun=false:void 0;}},guards:{onDealPage:function(){var _ref;return(_ref=Groupon.onDealPage)!=null?_ref:false;}}};}).call(this);(function(){var BROWSE_HEADER_CLASS,BROWSE_TAB_COPY,disableRedirectParams,divisionEnabledForBrowse,divisionEnabledForDealPageCategoryNav,divisionEnabledForHomeRedirect,isEligibleForBrowseRedirect,redirectToBrowseWithParams,replaceFeaturedDealLinks,replaceShopAllDealsLinks,setTrackingCookie,stayOnFeaturedDeal,updateAllDealsTabCopy;Finch.Experiments.LocalNavHeaderWithBrowseLink={runOnInit:true,trackOnInit:true,variants:{Control:function(){},LocalNavWithBrowseLink:function(){if(isEligibleForBrowseRedirect()){redirectToBrowseWithParams();}
$('html').addClass(BROWSE_HEADER_CLASS);return $(function(){replaceFeaturedDealLinks();replaceShopAllDealsLinks();updateAllDealsTabCopy();if(Groupon.onCurrentUserReady){Groupon.onCurrentUserReady(replaceFeaturedDealLinks);Groupon.onCurrentUserReady(replaceShopAllDealsLinks);return Groupon.onCurrentUserReady(updateAllDealsTabCopy);}});}},guards:{division_enabled_for_browse:function(){return divisionEnabledForBrowse();}}};Finch.Experiments.ShowCategoriesOnDealPages={variants:{Control:function(){return App.ExperimentVersions.ShowCategoriesOnDealPages='Control';},ShowCategories:function(){return App.ExperimentVersions.ShowCategoriesOnDealPages='ShowCategories';},ShowCategoriesAndFeaturedDeal:function(){var $nav;App.ExperimentVersions.ShowCategoriesOnDealPages='ShowCategoriesAndFeaturedDeal';$nav=$("#header_nav");$nav.find('.js-featured-deal-tab').hide();return $nav.find('.js-all-deals-tab a').addClass('current');},ShowCategoriesWithSticky:function(){return App.ExperimentVersions.ShowCategoriesOnDealPages='ShowCategoriesWithSticky';}},guards:{isEligibleForCategoryNav:function(){return divisionEnabledForDealPageCategoryNav();}}};Finch.Experiments.CategoryNavVariants={variants:{ShowCategoriesAndNewDeals:function(){return App.ExperimentVersions.ShowNewDealsItemOnCategoryNav=true;}}};Finch.Experiments.BrowseAsHomePage={runOnInit:true,trackOnInit:true,variants:{Control:function(){},RedirectToBrowse:function(){if(!stayOnFeaturedDeal()){return redirectToBrowseWithParams();}}},guards:{isEnabledForHomeRedirect:function(){return divisionEnabledForHomeRedirect();},onDivisionPage:function(){return Groupon.onDivisionPage;}}};Finch.Experiments.MerchantLists={variants:{Experiment:function(){return App.ExperimentVersions.ShowMerchantLists=true;}}};BROWSE_TAB_COPY='Local';BROWSE_HEADER_CLASS='local-nav-header';disableRedirectParams={brd:"false"};divisionEnabledForDealPageCategoryNav=function(){var _ref;return!!((_ref=Groupon.enabledFeatures)!=null?_ref.browseCategoriesOnDealPage:void 0);};divisionEnabledForBrowse=function(){var _ref;return!!((_ref=Groupon.enabledFeatures)!=null?_ref.browse:void 0);};divisionEnabledForHomeRedirect=function(){var _ref;return!!((_ref=Groupon.enabledFeatures)!=null?_ref.browseHomeRedirect:void 0);};isEligibleForBrowseRedirect=function(){return divisionEnabledForBrowse()&&Groupon.onAllDealsPage;};redirectToBrowseWithParams=function(){var originalHref,queryString,queryStringIndex;if(Groupon.browseTrackingEvent){setTrackingCookie(Groupon.browseTrackingEvent);}
originalHref=window.location.href;queryStringIndex=originalHref.indexOf('?');if(queryStringIndex>=0){queryString=originalHref.substring(queryStringIndex);}
return window.location.href="/browse/"+Groupon.currentDivision+(queryString!=null?queryString:'');};stayOnFeaturedDeal=function(){return Finch.Experiments.Global.guards.url_params_match(disableRedirectParams);};setTrackingCookie=function(value){var expirationInMinutes;expirationInMinutes=5;return Cookie.set("_btevent",value,expirationInMinutes*60);};replaceShopAllDealsLinks=function(){var href;if(!Groupon.currentDivision){return;}
href="/browse/"+Groupon.currentDivision;$('#header_nav').find('.shop_all_deals').attr('href',href);return $('#rail_list').find('.see-all').attr('href',href);};replaceFeaturedDealLinks=function(){var $el,href,originalHref;$el=$('#header_nav').find('.js-featured-deal-tab a');if(!(originalHref=$el.attr('href'))){return;}
if(originalHref.indexOf($.param(disableRedirectParams))>=0){return;}
if(originalHref.indexOf('?')>0){href=""+originalHref+"&"+($.param(disableRedirectParams));}else{href=""+originalHref+"?"+($.param(disableRedirectParams));}
return $el.attr('href',href);};updateAllDealsTabCopy=function(){return $('#header_nav').find('.shop_all_deals').text(BROWSE_TAB_COPY);};}).call(this);(function(){Finch.Experiments.CreditCardAuthorization={runOnInit:true,subscribers:[],isCompleted:true,onComplete:function(cb){if(Finch.Experiments.CreditCardAuthorization.isCompleted){return cb();}else{return Finch.Experiments.CreditCardAuthorization.subscribers.push(cb);}},complete:function(){var cb,_i,_len,_ref,_results;Finch.Experiments.CreditCardAuthorization.isCompleted=true;_ref=Finch.Experiments.CreditCardAuthorization.subscribers;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){cb=_ref[_i];_results.push(cb());}
return _results;},variants:{Control:function(){return Finch.Experiments.CreditCardAuthorization.complete();},CreditCardAuthorization:function(){Finch.Experiments.CreditCardAuthorization.isCompleted=false;$("head").append($("<style>#receipt_page_content { display: none; }</style>"));return Finch.Experiments.CreditCardAuthorization.enabled=true;}},guards:{eligibleForCreditCardAuthorization:function(){return!!Groupon.orderIsEligibleForCreditCardAuthorization;}}};}).call(this);(function(){Finch.Experiments.GiftWrap={variants:{Control:function(){},GiftWrap:function(){return $('body').append("<style>#gift_wrapping_cost, #for_a_friend { display: block !important; }</style>");}},guards:{onCheckoutOrDealPages:function(){return Finch.Experiments.Global.guards.on_deal_or_division_page()||Finch.Experiments.Global.guards.on_checkout_page()||Finch.Experiments.Global.guards.on_edit_confirmation_page();}}};}).call(this);(function(){Finch.Experiments.HeartX={variants:{Control:function(){},HeartXOnly:function(){return App.ExperimentVersions.HeartX='HeartXOnly';},HeartXViewDealButton:function(){return App.ExperimentVersions.HeartX='HeartXViewDealButton';}},guards:{apiDealRecommendationsEnabled:function(){var _ref;return!!((_ref=Groupon.enabledFeatures)!=null?_ref.apiDealRecommendations:void 0);}}};}).call(this);(function(){Finch.Experiments.PersonalizeWizardEmailLink={variants:{Original:function(){return Cookie.unset('in_my_profile_email_link');},MyProfileLink:function(){var oneWeek;oneWeek=60*60*24*7;return Cookie.set('in_my_profile_email_link',true,oneWeek);}}};}).call(this);(function(){Finch.Experiments.PreloadConfirmationPageAssets={variants:{Control:function(){},PreloadAssets:function(){if(Groupon.onCurrentUserReady){return Groupon.onCurrentUserReady(function(){if(Cookie.get("ConfirmationPageAssetsPreloaded")!=="true"){return setTimeout(function(){var iframe,src;iframe=$("<iframe />");src=Groupon.assetHost+"/preload_assets/confirmation_page.html";iframe.attr({src:src,height:0,width:0,frameborder:0}).appendTo($('body'));return Cookie.set("ConfirmationPageAssetsPreloaded","true",86400);},1000);}});}}}};}).call(this);(function(){Finch.Experiments.PreloadDealPageAssets={variants:{Control:function(){},PreloadAssets:function(){if(Groupon.onCurrentUserReady){return Groupon.onCurrentUserReady(function(){if(Cookie.get("DealPageAssetsPreloaded")!=="true"){return setTimeout(function(){var iframe,src;iframe=$("<iframe />");src=Groupon.assetHost+"/preload_assets/deal_page.html";iframe.attr({src:src,height:0,width:0,frameborder:0}).appendTo($('body'));return Cookie.set("DealPageAssetsPreloaded","true",86400);},1000);}});}}}};}).call(this);(function(){Finch.Experiments.SanityCheck={runOnInit:true,variants:{Control:function(){},SanityCheck:function(){return OptimizeSuite.SanityCheck.run();}}};}).call(this);(function(){var hideDivisionSelector,inLocationBarAndFreeTextTreatment,inLocationBarTreatment;Finch.Experiments.SearchBar={variants:{Control:function(){},ShowLocationBar:function(){hideDivisionSelector();return App.ExperimentVersions.SearchBar='ShowLocationBar';},ShowLocationBarAndFreeTextSearch:function(){hideDivisionSelector();return App.ExperimentVersions.SearchBar='ShowLocationBarAndFreeTextSearch';}},guards:{searchBarEnabled:function(){var _ref;return!!((_ref=Groupon.enabledFeatures)!=null?_ref.browseSearchBar:void 0);},notComingFromGiftsPage:function(){return!Finch.Experiments.Global.guards.url_params_match({from_gifts:"true"});}}};Finch.Experiments.LocationBarAutocomplete={variants:{Control:function(){},Autocomplete:function(){return App.ExperimentVersions.LocationBarAutocomplete='Autocomplete';}},guards:{inSearchBarExperiment:function(){return inLocationBarTreatment()||inLocationBarAndFreeTextTreatment();}}};Finch.Experiments.KeywordBarAutocomplete={variants:{Control:function(){},Autocomplete:function(){return App.ExperimentVersions.KeywordBarAutocomplete='Autocomplete';}},guards:{inSearchBarExperiment:function(){return inLocationBarAndFreeTextTreatment();}}};hideDivisionSelector=function(){$('#new_drawer_anchor').hide();return $('#follow_drawer_anchor').hide();};inLocationBarTreatment=function(){return Finch.inTreatment({experimentName:'SearchBar',variantName:'ShowLocationBar'});};inLocationBarAndFreeTextTreatment=function(){return Finch.inTreatment({experimentName:'SearchBar',variantName:'ShowLocationBarAndFreeTextSearch'});};}).call(this);(function(){}).call(this);(function(){OptimizeSuite.SanityCheck.add("bloodhound-form-errors",function(sc){return sc.watch("form[data-bhw] label.error:not([data-bhw])",function($el){var formId,inputId,text;formId=$el.parents("form").attr("id");inputId=$el.attr("for");text=$el.text();return sc.fail({message:"Error '"+text+"' for field '"+inputId+"' in form '"+formId+"' was missing data-bhw.",form:formId,field:inputId,error:text});});});}).call(this);(function(){var tracked;tracked=[];OptimizeSuite.TrackingHub.on("add",function(msg){if(msg.name!=="finch-experiment"){return;}
return tracked.push(msg.data);});OptimizeSuite.SanityCheck.add("finch-pixel-vs-th",function(sc){return sc.watch(".finch-tracking",function($e){var allDecoded,encoded,src;src=$e.attr("src");encoded=src.match(/e=([^&]+)&/)[1];allDecoded=JSON.parse(decodeURIComponent(encoded));if(!_.isArray(allDecoded)){allDecoded=[allDecoded];}
return allDecoded.forEach(function(decoded){var experiments;experiments=decoded.experiments||[decoded];return experiments.forEach(function(exp){var pixel;pixel=_(tracked).detect(function(data){return(data.layer===exp.layer)&&(data.experiment===exp.experiment)&&(data.variant===exp.variant);});if(!pixel){return sc.fail({message:"Found a tracking pixel for Finch experiment '"+exp.layer+":"+exp.experiment+":"+exp.variant+"', but not a TrackingHub message!",experiment:exp});}});});});});}).call(this);(function(){OptimizeSuite.SanityCheck.add("th-timestamps",function(sc){var alreadyFired;alreadyFired=false;return Tracky.on("log",function(msgOrMsgs){var msg,msgs,r,_i,_len,_results;msgs=msgOrMsgs.event_name?[msgOrMsgs]:msgOrMsgs;r=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/;_results=[];for(_i=0,_len=msgs.length;_i<_len;_i++){msg=msgs[_i];if(!msg.event_client_timestamp){_results.push(sc.fail({message:"Expected Tracky message to have a client timestamp, but it didn't",data:msg}));}else if(!r.test(msg.event_client_timestamp)){_results.push(sc.fail({message:"Expected Tracky timestamp to be proper ISO, but it was '"+msg.event_client_timestamp+"'",data:msg}));}else{_results.push(void 0);}}
return _results;});});}).call(this);(function(){}).call(this);(function(){var $window,config,key,seed,sessionExpiry;sessionExpiry=60*30;seed=Cookie.get("s");if(!seed){$window=$(window);key=["",window.history.length,window.location.href,new Date().getTime(),$window.width(),$window.height(),navigator.userAgent,document.cookie,document.referrer].join("");seed=md5(key);Cookie.set("s",seed,sessionExpiry);}
if(!Cookie.get("b")){Cookie.set("b",seed,60*60*24*365*10);}
config={tracking:{seed:seed},referralMap:{utm_source:"source",utm_campaign:"campaign",utm_medium:"medium",utm_content:"content",utm_term:"term"},session:{cookieKey:"s",cookieDomain:Groupon.optimizeSuiteData.cookieDomain,expiry:sessionExpiry},page:{type:Groupon.optimizeSuiteData.pageType,division:Groupon.optimizeSuiteData.division,country:Groupon.optimizeSuiteData.country,channel:Groupon.optimizeSuiteData.channel},user:{loggedIn:!!Cookie.get("l"),permalink:Cookie.get("l"),browserId:Cookie.get("b"),scid:Cookie.get("scid")},finch:{trackers:[Groupon.Finch.GrouponAnalyticsTracker,Groupon.Finch.TrackingHubTracker],debug:Groupon.optimizeSuiteData.debugFinch,alwaysFirePixel:Groupon.optimizeSuiteData.alwaysFireFinchPixel,config:Groupon.optimizeSuiteData.finchConfig}};OptimizeSuite.init(config);Groupon.TrackingHub=OptimizeSuite.TrackingHub;$(window).bind('url:changed',function(attr,url){return OptimizeSuite.treatAsNewPage(url);});$(function(){var onReady;Groupon.Finch.trigger('run');onReady=Groupon.onCurrentUserReady||function(f){return f();};return onReady(function(){OptimizeSuite.initBloodhound();return Groupon.bloodhound=OptimizeSuite.bloodhound;});});}).call(this);(function(exports){exports.namespace=function(nsName,func){var current=exports,names=nsName.split('.'),moduleName=names.pop(),name;while(name=names.shift()){current[name]=current[name]||{};current=current[name];}
current[moduleName]=func();};})(this);(function(){var dd;if(this.Groupon==null){this.Groupon={};}
this.Groupon.DivisionDrawer=dd=function(globalContext){var $,Groupon,TrackingHub,setSelectedDivision,toggle,_animate,_fetch,_needToFetch,_track,_updateDivisionSelection,_updateDivisionSelector,_updateStateSelection;Groupon=globalContext.Groupon,TrackingHub=globalContext.TrackingHub,$=globalContext.$;dd.toggle=toggle=function(divisionDrawer){var _this=this;return function(event){_animate(divisionDrawer);_track(divisionDrawer);if(_needToFetch(divisionDrawer)){_fetch(event!=null?event.element():void 0,divisionDrawer);}
if(event){event.preventDefault();}
return _this;};};dd.setSelectedDivision=setSelectedDivision=function(divisionSelector,divisionDrawer,divisionRecord){var country,divisionList,name,permalink,state,stateChooser;name=divisionRecord.name,permalink=divisionRecord.permalink,state=divisionRecord.state,country=divisionRecord.country;stateChooser=divisionDrawer.find('#state_chooser');divisionList=divisionDrawer.find('#division_list_new');_updateDivisionSelector(divisionSelector,name);_updateStateSelection(stateChooser,divisionList,state,country);return _updateDivisionSelection(divisionList,permalink);};_animate=function(divisionDrawer){if(divisionDrawer.hasClass('animating')){divisionDrawer.stop();divisionDrawer.removeClass('animating');return toggle(divisionDrawer)();}
divisionDrawer.addClass('animating');return divisionDrawer.animate({height:'toggle'},{duration:300,queue:'end',complete:function(e){return divisionDrawer.removeClass('animating');}});};_fetch=function(divisionSelector,divisionDrawer){var divisionFetchStart,_this=this;divisionFetchStart=(new Date).getTime();divisionDrawer.addClass('loading');return $.get('/division_drawer',function(html){var divisionFetchEnd,divisionFetchTime,divisionRecord;divisionFetchEnd=(new Date).getTime();divisionFetchTime=divisionFetchEnd-divisionFetchStart;TrackingHub.add('performance',{t_divisionDrawer:divisionFetchTime});divisionDrawer.html(html);divisionRecord=_({state:Groupon.currentDivisionStateAbbr,country:Groupon.currentDivisionCountry}).extend(Groupon.division);setSelectedDivision(divisionSelector,divisionDrawer,divisionRecord);return divisionDrawer.removeClass('loading');});};_needToFetch=function(divisionDrawer){return divisionDrawer.find('.ajax_spinner').length>0||divisionDrawer.hasClass('loading');};_track=function(divisionDrawer){var action;action=divisionDrawer.is(':visible')?'close':'open';return Groupon.Analytics.trackClick('CitySelector',action,'cities');};_updateDivisionSelector=function(divisionSelector,divisionName){divisionSelector.find('a').text(divisionName);return divisionSelector.toggleClass('smaller',divisionName.length>=13);};_updateStateSelection=function(stateChooser,divisionList,state,country){stateChooser.find('li.selected').removeClass('selected');divisionList.find('ul.current').removeClass('current');if(country==='Canada'){stateChooser.find('#state_Canada').addClass('selected');return divisionList.find('ul.canada').addClass('current');}else{stateChooser.find('#state_'+state[0]).addClass('selected');return divisionList.find('.state_'+state[0]).addClass('current');}};_updateDivisionSelection=function(divisionList,permalink){divisionList.find('a.selected').removeClass('selected');return divisionList.find('a.E-drawer_click_'+permalink).addClass('selected');};return dd;};dd(this);}).call(this);(function(){Groupon.performance.pageReady=function(){if(BOOMR.finished||Groupon.performance.boomerangAutorun){return;}
BOOMR.finished=true;if(typeof BOOMR.page_ready==='function'){return BOOMR.page_ready();}else{return BOOMR.t_done=new Date().getTime();}};}).call(this);