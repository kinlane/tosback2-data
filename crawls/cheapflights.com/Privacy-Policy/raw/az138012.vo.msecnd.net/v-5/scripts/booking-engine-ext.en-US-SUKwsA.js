(function(d,f,b){var c=d.Sys,e=d.$addHandler,g=d.$removeHandler,a=d.Function.createDelegate;CF.BookingEngineType.trackingNames=["FLI","FLI","FLI","CAR","ACC","F_H","F_C","FCH","HOL"];CF.BETripType.trackingNames=["OW","RT","MD"];CF.BETicketClass=function(){};CF.BETicketClass.prototype={Economy:0,Business:1,First:2};b(CF.BETicketClass,"CF.BETicketClass");CF.BETicketClass.trackingNames=["E","B","F"];CF.BookingEngineStepOneBehavior=function(h){this._newSearchLink=null;this._onNewSearchLinkClickHandler=null;this._hourlyBookingEngineTypes=null;this._headerElement=null;this._messagePanelElement=null;CF.BookingEngineStepOneBehavior.initializeBase(this,[h])};CF.BookingEngineStepOneBehavior.prototype={initialize:function(){this._newSearchLink=this.getChildElement("NewSearch");if(this._newSearchLink){this._onNewSearchLinkClickHandler=a(this,this._onNewSearchLinkClick);this._newSearchLink.href="javascript:void(0);";e(this._newSearchLink,"click",this._onNewSearchLinkClickHandler)}CF.BookingEngineStepOneBehavior.callBaseMethod(this,"initialize")},dispose:function(){if(this._newSearchLink){g(this._newSearchLink,"click",this._onNewSearchLinkClickHandler)}CF.BookingEngineStepOneBehavior.callBaseMethod(this,"dispose")},set_value:function(h){if(h){var j=this.get_fieldBehaviors();for(var l in h){var k=CF.BookingEngineFieldType[l];if(typeof(k)==="number"){var i=h[l];var m=j[k];if(i&&m&&m.set_value){m.set_value(i)}}}this.raisePropertyChanged("value")}},get_hourlyBookingEngineTypes:function(){return this._hourlyBookingEngineTypes},set_hourlyBookingEngineTypes:function(h){this._hourlyBookingEngineTypes=h},get_headerElement:function(){return this._headerElement},set_headerElement:function(h){this._headerElement=h},get_messagePanelElement:function(){return this._messagePanelElement},set_messagePanelElement:function(h){this._messagePanelElement=h},set_active_impl:function(h){CF.BookingEngineStepOneBehavior.callBaseMethod(this,"set_active_impl",[h]);this.foreachField(function(k,i,j){if(i&&typeof i.enabledIfActiveStepOnly==="boolean"&&j&&j.set_enabled){j.set_enabled(!i.enabledIfActiveStepOnly||h)}})},set_nextStep:function(h){CF.BookingEngineStepOneBehavior.callBaseMethod(this,"set_nextStep",[h]);if(h&&this.get_active()){h.set_active(false)}this.doStartupCheck()},selectBookingType:function(j){var l=this.getChildElement("BookingEngineType");if(l==null){return}var k=l.getElementsByTagName("input");for(var h=0;h<k.length;h++){if(k[h].value==j){k[h].click();break}}},createResources:function(){var h=new CF.ResourceCombiner();h.add(CF.BookingEngineStepOneBehavior.callBaseMethod(this,"createResources"));h.add(CF.BookingEngineExtResources);return h},createBehaviorInfos:function(i){var h=CF.BookingEngineStepOneBehavior.callBaseMethod(this,"createBehaviorInfos",[i]);h[CF.BookingEngineFieldType.DepartureRegion].type=CF.BookingEngineRegionTextBoxBehavior;h[CF.BookingEngineFieldType.DestinationRegion].references={pairedRegionTextBox:this.getFieldElementId(CF.BookingEngineFieldType.DepartureRegion)+"$BookingEngineRegionTextBoxBehavior"};h[CF.BookingEngineFieldType.DestinationRegion].type=CF.BookingEngineRegionTextBoxBehavior;h[CF.BookingEngineFieldType.DepartureDateTime].type=CF.BookingEngineDateTimeSelectorBehavior;h[CF.BookingEngineFieldType.DepartureDateTime].references={returnDateTimeSelector:this.getFieldElementId(CF.BookingEngineFieldType.ReturnDateTime)+"$BookingEngineDateTimeSelectorBehavior"};h[CF.BookingEngineFieldType.ReturnDateTime].type=CF.BookingEngineDateTimeSelectorBehavior;h[CF.BookingEngineFieldType.EmailSignup]={type:CF.BookingEngineEmailSignupFieldBehavior,properties:{stepOne:this}};return h},createFieldRules:function(){var h=CF.BookingEngineStepOneBehavior.callBaseMethod(this,"createFieldRules");h[CF.BookingEngineFieldType.DepartureRegion].enabledIfActiveStepOnly=true;h[CF.BookingEngineFieldType.DestinationRegion].enabledIfActiveStepOnly=true;return h},displayErrors:function(l){CF.BookingEngineStepOneBehavior.callBaseMethod(this,"displayErrors",[l]);var i=(l&&l.get_errorCount()>0);var j=this.getChildElement("MainFields");var m=j.firstChild;while(m){var h=m.nextSibling;if(m.nodeType===1&&(c.UI.DomElement.containsCssClass(m,"cf-be-error-header")||c.UI.DomElement.containsCssClass(m,"cf-be-error-message"))){j.removeChild(m)}m=h}this.foreachField(function(q,p,s){if(s){var n=(s.get_container?s.get_container():s.get_element());if(l&&l.hasError(q)){var r=l.getMessage(q);if(r){var o=n;while(o&&o.parentNode!==j){o=o.parentNode}var t=document.createElement("strong");t.appendChild(document.createTextNode(r));t.className="cf-be-error-message";j.insertBefore(t,o)}}}});if(i){var k=document.createElement("strong");k.appendChild(document.createTextNode(this.get_resources().ErrorHeader));k.className="cf-be-error-header";j.insertBefore(k,j.firstChild)}},logSearchRequest:function(h){if(typeof(BEsearch)==="function"){var i=86400000;var k=Math.floor(new Date().getTime()/i)*i;var j=function(l){return l?l.Text+(l.RegionCode?"("+l.RegionCode+")":""):""};BEsearch(document.forms[0].action.replace(location.protocol+"//"+location.host,""),j(h.DepartureRegion),j(h.DestinationRegion),CF.BookingEngineType.trackingNames[h.BookingEngineType],CF.BETripType.trackingNames[h.TripType],CF.BETicketClass.trackingNames[h.TicketClass],(h.DepartureDateTime?Math.floor((h.DepartureDateTime.DateTime.getTime()-k)/i):null),(h.DepartureDateTime&&h.ReturnDateTime?Math.floor((h.ReturnDateTime.DateTime.getTime()-h.DepartureDateTime.DateTime.getTime())/i):null),(h.DepartureDateTime?CF.BookingEngineTime.toString(h.DepartureDateTime.TimeType):null),(h.ReturnDateTime?CF.BookingEngineTime.toString(h.ReturnDateTime.TimeType):null),(h.NumberOfAdults||0)+"|"+(h.NumberOfChildren||0)+"|"+(h.NumberOfInfants||0),(h.NumberOfRooms||0),(h.StarRating||0),(h.DriverAge||0))}},updateMessages:function(j){var k=this.get_resources();var h=CF.BookingEngineType.toString(j);if(this.get_headerElement()){this.get_headerElement().innerHTML=(k["Header"+h]||k.Header)}if(this.get_messagePanelElement()){var l=this.get_messagePanelElement().getElementsByTagName("p");var i;if(l&&l.length>0){i=l[0]}else{i=document.createElement("p");this.get_messagePanelElement().appendChild(i)}i.innerHTML=(k["Description"+h]||k.Description)}},add_searchRequested:function(h){this.get_events().addHandler("searchRequested",h)},remove_searchRequested:function(h){this.get_events().removeHandler("searchRequested",h)},add_principalFieldValueChanged:function(h){this.get_events().addHandler("principalFieldValueChanged",h)},remove_principalFieldValueChanged:function(h){this.get_events().removeHandler("principalFieldValueChanged",h)},onPrincipalFieldValueChanged:function(k){CF.BookingEngineStepOneBehavior.callBaseMethod(this,"onPrincipalFieldValueChanged",[k]);var i=this.get_events().getHandler("principalFieldValueChanged");if(i){var j=new c.EventArgs();var h=this.get_value();j.get_value=function(){return h};j.get_fieldType=function(){return k};i(this,j)}if(k==CF.BookingEngineFieldType.BookingEngineType){this.updateMessages(this.get_bookingEngineType());this._updateTimeGranularity(this.get_bookingEngineType())}},doSearch:function(i){var h=false;var l=this.get_events().getHandler("searchRequested");this.logSearchRequest(i);if(l){var m=new c.EventArgs();m.get_value=function(){return i};m.handled=false;l(this,m);h=m.handled}if(!h){var k=this.get_postBackUrl();if(k){CF.FormSubmitter.submit({"cf-be-state":i},"post",k,"");h=true}else{h=this.doPostback()}}else{var j=jQuery.noConflict();if(typeof j==="function"){j("body").trigger("search.bookingengine")}}return h},doPostback:function(){var h=this.get_searchButton();if(h){if(typeof __doPostBack=="function"){__doPostBack(h.name,"");return true}}return false},_onNewSearchLinkClick:function(k){this.set_active(true);var i=this.get_fieldBehaviors();var j=function(l){return l&&l.get_visible&&l.get_visible()?l.get_element():null};var h=j(i[CF.BookingEngineFieldType.DepartureRegion])||j(i[CF.BookingEngineFieldType.DestinationRegion]);if(h){h.focus();h.select()}},_updateTimeGranularity:function(j){var h=this.get_hourlyBookingEngineTypes();var i=(h&&d.Array.contains(h,j));this._updateFieldTimeGranularity(CF.BookingEngineFieldType.DepartureDateTime,i);this._updateFieldTimeGranularity(CF.BookingEngineFieldType.ReturnDateTime,i)},_updateFieldTimeGranularity:function(k,h){var j=this.get_fieldBehaviors()[k];if(j){var i=j.get_value();if(i&&(i.TimeType===CF.BookingEngineTime.UseDate)!=h){i.TimeType=(h?CF.BookingEngineTime.UseDate:CF.BookingEngineTime.Anytime);j.set_value(i)}}}};f(CF.BookingEngineStepOneBehavior,"CF.BookingEngineStepOneBehavior",CF.BookingEngineStepOneBehaviorBase);CF.BookingEngineSearchPartnersStatus=function(){};CF.BookingEngineSearchPartnersStatus.prototype={OK:0,InvalidDeparture:1,InvalidDestination:2,DuplicateRegion:3,ServiceError:4};b(CF.BookingEngineSearchPartnersStatus,"CF.BookingEngineSearchPartnersStatus");CF.BookingEnginePositionType=function(){};CF.BookingEnginePositionType.prototype={Image:0,Link:1,DropDown:2};b(CF.BookingEnginePositionType,"CF.BookingEnginePositionType");CF.BookingEngineStepTwoBehavior=function(h){CF.BookingEngineStepTwoBehavior.initializeBase(this,[h]);this._onStepOneSearchRequestedHandler=a(this,this._onStepOneSearchRequested);this._onStepOnePrincipalFieldValueChangedHandler=a(this,this._onStepOnePrincipalFieldValueChanged);this._onSearchCompleteHandler=null;this._onSearchErrorHandler=null;this._callIndex=0;this._disposed=false;this._partners=null;this._onPartnerClickHandler=null;this._onTabClickHandler=a(this,this._onTabClick);this._showStageTwoTabs=false;this._thirdLevelSelect=null;this._inActiveImageFormat="/i/IMG-BE-LOGOS.gif";this._progressIndicator=null;this._searchSelectionUrl="/workers/selection.aspx";this._partnerSelectUrl="/workers/partnerselect.aspx";this._enableAjaxRegionSearch=false;this._siteVersion=5;this._responseId=null;this._trackingImages=null;this._partnerDisplayDescription=null;this._progressImage=null;this._partnerLinksInitialized=false;this._searchPending=false;this._trackingMarker=" SITECONFIDENCE "};CF.BookingEngineStepTwoBehavior.prototype={initialize:function(){var h=this.get_partners();if(h){this._initPartnerLinks(h);this._impressionTrackPartners(h)}if(this._showStageTwoTabs){this._initTabLinks()}CF.BookingEngineStepTwoBehavior.callBaseMethod(this,"initialize")},dispose:function(){this._disposed=true;CF.BookingEngineStepTwoBehavior.callBaseMethod(this,"dispose")},get_trackingMarker:function(){return this._trackingMarker},get_inActiveImageFormat:function(){return this._inActiveImageFormat},set_inActiveImageFormat:function(h){this._inActiveImageFormat=h},get_enableAjaxRegionSearch:function(){return this._enableAjaxRegionSearch},set_enableAjaxRegionSearch:function(h){this._enableAjaxRegionSearch=h},get_siteVersion:function(){return this._siteVersion},set_siteVersion:function(h){this._siteVersion=h},get_partners:function(){return this._partners},set_partners:function(h){this._partners=h},get_responseId:function(){return this._responseId},set_responseId:function(h){this._responseId=h},get_partnerDisplayDescription:function(){return this._partnerDisplayDescription},set_partnerDisplayDescription:function(h){this._partnerDisplayDescription=h},get_searchSelectionUrl:function(){return this._searchSelectionUrl},set_searchSelectionUrl:function(h){this._searchSelectionUrl=h},get_partnerSelectUrl:function(){return this._partnerSelectUrl},set_partnerSelectUrl:function(h){this._partnerSelectUrl=h},get_showStageTwoTabs:function(){return this._showStageTwoTabs},set_showStageTwoTabs:function(h){this._showStageTwoTabs=h},set_previousStep:function(i){var h=this.get_previousStep();if(h!==i){if(h){h.remove_searchRequested(this._onStepOneSearchRequestedHandler);h.remove_principalFieldValueChanged(this._onStepOnePrincipalFieldValueChangedHandler)}if(i){i.add_searchRequested(this._onStepOneSearchRequestedHandler);i.add_principalFieldValueChanged(this._onStepOnePrincipalFieldValueChangedHandler)}CF.BookingEngineStepTwoBehavior.callBaseMethod(this,"set_previousStep",[i])}},set_active_impl:function(h){var i=this.get_active();CF.BookingEngineStepTwoBehavior.callBaseMethod(this,"set_active_impl",[h]);if(!h){var j=this.get_previousStep();if(j){this._displayInActiveState(j.get_bookingEngineType(),!i)}}},_getContainer:function(){return this.getChildElement("Container")},_getTabs:function(){return this.getChildElement("Tabs")},createResources:function(){var h=new CF.ResourceCombiner();h.add(CF.BookingEngineStepTwoBehavior.callBaseMethod(this,"createResources"));h.add(CF.BookingEngineExtResources);return h},performSearch:function(h){if(this._showStageTwoTabs){this.setTabState(h.BookingEngineType)}if(!this._onSearchCompleteHandler){this._onSearchCompleteHandler=a(this,this._onSearchComplete);this._onSearchErrorHandler=a(this,this._onSearchError)}this._removePartnerLinkHandlers();c.Net.WebServiceProxy.invoke("/ajax/BookingEngineService.asmx","SearchPartners",false,{state:h,targetPageTypeCode:this.get_previousStep().get_targetPageTypeCode()},this._onSearchCompleteHandler,this._onSearchErrorHandler,{callIndex:++this._callIndex});this._showProgressIndicator()},setTabState:function(i){var j=d.$get("cf-be-step2-tab-flightsonly");var h=d.$get("cf-be-step2-tab-flightshotels");j.className=j.className.replace(" selected","");h.className=h.className.replace(" selected","");switch(i){case CF.BookingEngineType.EconomyFlight:j.className=j.className+" selected";break;case CF.BookingEngineType.FlightHotel:h.className=h.className+" selected";break;default:j.className=j.className.replace("selected","");h.className=h.className.replace("selected","");break}},_initTabLinks:function(){var k=this._getTabs();var h=k.getElementsByTagName("a");for(var j=0;j<h.length;j++){var l=h[j];if(l){l.tabIdx=j;e(l,"click",this._onTabClickHandler)}}},_onTabClick:function(k){var j=k.target;if(!j.rel){j=k.target.parentNode}var h=CF.BookingEngineType.EconomyFlight;if(j.rel=="flightsonly"){h=CF.BookingEngineType.EconomyFlight}else{if(j.rel=="flightshotels"){h=CF.BookingEngineType.FlightHotel}}var i=this.get_previousStep();if(i){i.selectBookingType(h)}k.preventDefault()},_onStepOneSearchRequested:function(i,h){if(this.get_enableAjaxRegionSearch()){this.performSearch(h.get_value());h.handled=true}},_onStepOnePrincipalFieldValueChanged:function(j,k){if(this.get_active()){var h=k.get_fieldType(),i=this.get_previousStep().validate(true);if(this._searchPending||h==CF.BookingEngineFieldType.BookingEngineType||h==CF.BookingEngineFieldType.TripType||h==CF.BookingEngineFieldType.TicketClass||h==CF.BookingEngineFieldType.DepartureDateTime){this._searchPending=!i;if(i){this.performSearch(k.get_value())}else{if(h==CF.BookingEngineFieldType.BookingEngineType){this.set_active(false);this._searchPending=false}}}}else{this._displayInActiveState(k.get_value().BookingEngineType,true)}},_displayInActiveState:function(m,h){var k=this._getContainer();var n=CF.BookingEngineType.toString(m);var l=k.getElementsByTagName("img"),j;if(h&&l.length==1){j=l[0]}if(!j){k.innerHTML="";var i=document.createElement("h3");i.innerHTML=this.get_resources().StepTwoDescription;k.appendChild(i);j=document.createElement("img");k.appendChild(j)}j.src=this.get_inActiveImageFormat().replace(/(\{0\})/g,n)},_onSearchComplete:function(i,l,h){if(!this._disposed&&l.callIndex===this._callIndex){var k=this.get_previousStep();this._hideProgressIndicator();this._partners=null;this._thirdLevelSelect=null;switch(i.Status){case CF.BookingEngineSearchPartnersStatus.OK:this.set_active(true);k.set_value(i.ReturnState);this.set_partners(i.Partners);this.set_responseId(i.ResponseId);this._displaySearchPartners(i.Partners);this._impressionTrackPartners(i.Partners);break;case CF.BookingEngineSearchPartnersStatus.DuplicateRegion:var j=new CF.BookingEngineFieldErrors(this.get_resources());j.add(CF.BookingEngineFieldType.DepartureRegion);j.add(CF.BookingEngineFieldType.DestinationRegion,this.get_resources().DuplicateRegionErrorMessage);k.displayErrors(j);this.set_active(false);break;case CF.BookingEngineSearchPartnersStatus.InvalidDeparture:case CF.BookingEngineSearchPartnersStatus.InvalidDestination:window.location.href=this.get_searchSelectionUrl();break;default:this._showSearchErrorMessage(this.get_resources().GenericSearchErrorMessage);break}}},_displaySearchPartners:function(l){var m=this._getContainer();if(l&&l.length>0){m.innerHTML="";var q=document.createElement("h3");q.appendChild(document.createTextNode(this.get_resources().SearchPartnersHeading));m.appendChild(q);var n;for(var h=0;h<l.length;h++){var s=l[h];switch(s.PositionType){case CF.BookingEnginePositionType.Image:var p=document.createElement("a");var o=document.createElement("img");o.src=s.LogoUrl;o.alt=s.LogoAltText;p.className="cf-be-prem-partner";p.appendChild(o);m.appendChild(p);break;case CF.BookingEnginePositionType.Link:var r=document.createElement("a");r.className="cf-be-level2-partner";r.appendChild(document.createTextNode(s.BrandName));m.appendChild(r);break;default:if(!n){n=document.createElement("select");var k=document.createElement("button");n.id=this.get_element().id+"_thirdLevelSelect";if(h){var j=document.createElement("label");j.appendChild(document.createTextNode(this.get_resources().OtherWebsitesLabelText));j.htmlFor=n.id;m.appendChild(j)}m.appendChild(n);m.appendChild(k)}n.options[n.length]=new Option(s.BrandName);break}}m.appendChild(document.createComment(this.get_trackingMarker()));this._initPartnerLinks(l)}else{this._showSearchErrorMessage(this.get_resources().NoPartnersSearchErrorMessage)}},_initPartnerLinks:function(j){if(j){if(!this._onPartnerClickHandler){this._onPartnerClickHandler=a(this,this._onPartnerClick)}var p=this._getContainer();var o=p.getElementsByTagName("a");var t=p.getElementsByTagName("select");var u=0,l=0;var s=(this.get_partnerDisplayDescription()===CF.DescriptionLinkType.Hover&&CF.DescriptionLink);if(t&&t.length>0){this._thirdLevelSelect=t[0];var r=p.getElementsByTagName("button");if(r&&r.length>0){e(r[0],"click",this._onPartnerClickHandler);var h=new CF.HoverCssClassBehavior(r[0]);h.initialize()}}for(var m=0;m<j.length;m++){var n=j[m];switch(j[m].PositionType){case CF.BookingEnginePositionType.Image:case CF.BookingEnginePositionType.Link:var q=o[u];if(q){q._partnerIndex=m;q._partner=n;q.href="javascript:void(0);";e(q,"click",this._onPartnerClickHandler);if(s&&n.DisplayDescription){var k=new CF.DescriptionLink(q);k.set_message(n.DisplayDescription);k.initialize()}}u++;break;default:if(this._thirdLevelSelect){this._thirdLevelSelect.options[l]._partnerIndex=m;this._thirdLevelSelect.options[l]._partner=n;l++}break}}this._partnerLinksInitialized=true}},_removePartnerLinkHandlers:function(){if(this._partnerLinksInitialized){var k=this._getContainer();var h=k.getElementsByTagName("a");var l=k.getElementsByTagName("button");for(var j=0;j<h.length;j++){g(h[j],"click",this._onPartnerClickHandler)}if(l&&l.length>0){g(l[0],"click",this._onPartnerClickHandler)}this._partnerLinksInitialized=false}},_onSearchError:function(i,j,h){this._showSearchErrorMessage(this.get_resources().GenericSearchErrorMessage)},_showSearchErrorMessage:function(h){var i=this._getContainer();var j=document.createElement("strong");this._hideProgressIndicator();this.set_active(true);j.appendChild(document.createTextNode(h));i.innerHTML="";i.appendChild(j)},_onPartnerClick:function(i){if(this.get_previousStep().validate(true)){var h;if(i.target.tagName==="BUTTON"&&this._thirdLevelSelect&&this._thirdLevelSelect.selectedIndex>=0){h=this._thirdLevelSelect.options[this._thirdLevelSelect.selectedIndex]}else{h=i.target;if(!h._partner){h=i.target.parentNode}}if(h._partner){this._partnerSelect(h._partner,h._partnerIndex+1,this.get_partners().length,h._partnerIndex+1);i.preventDefault()}}},_partnerSelect:function(o,h,l,m){if(o){var n=this.get_previousStep();var j=n.get_value();var k={State:n.get_value(),Partner:{InventoryId:o.InventoryId,BrandName:o.BrandName,DepartureRegionCode:o.DepartureRegionCode,DestinationRegionCode:o.DestinationRegionCode,LogoUrl:o.LogoUrl,PositionType:o.PositionType,TrackingCode:o.TrackingCode,LinkCode:o.LinkCode,CampaignItemCode:o.CampaignItemCode,Id:o.Id},PagePosition:h,BlockSize:l,SubPosition:m,PageType:this.get_previousStep().get_targetPageTypeCode(),ResponseId:this.get_responseId(),EventId:createEid()};this._trackPartnerSelect(k,this.get_partnerSelectUrl());CF.FormSubmitter.submit({"cf-be-ps-request":k},"post",this.get_partnerSelectUrl(),"_partner"+o.InventoryId);var i="_partner"+o.InventoryId}},_trackPartnerSelect:function(k,h){if(typeof(LogToSS)==="function"){var l=k.State;var i=k.Partner;var j="/goto.aspx?y=be&bi="+i.InventoryId+"&pi="+k.PageType+"&pagedep="+(l.DepartureRegion?l.DepartureRegion.RegionCode:"")+"&pagedest="+(l.DestinationRegion?l.DestinationRegion.RegionCode:"")+"&linkdep="+i.DepartureRegionCode+"&linkdest="+i.DestinationRegionCode+"&pt=PRM&pp="+k.PagePosition+"&bs="+k.BlockSize+"&sp="+k.SubPosition+"&v="+this.get_siteVersion()+"&cls="+CF.BETicketClass.trackingNames[l.TicketClass]+"&pd="+CF.BookingEngineType.trackingNames[l.BookingEngineType]+"&eid="+k.EventId+"&ci="+i.CampaignItemCode+"&dl="+i.LinkCode+"&tl="+i.TrackingCode+"&dc=WW&t="+encodeURIComponent(h);if(logExitEvent){logExitEvent(j,k.EventId)}}},_showProgressIndicator:function(){if(!this._progressIndicator){if(!this._progressImage){this._progressImage=new Image();this._progressImage.src=c.Net.UrlResolver.resolveStaticsUrl("/images/i/IMG-BE-progress-UMXj5w.gif")}var h=this._getContainer();this._progressIndicator=document.createElement("div");this._progressIndicator.className="cf-be-progress";this._progressIndicator.style.height=Math.max(h.offsetHeight-10,0)+"px";h.appendChild(this._progressIndicator)}},_hideProgressIndicator:function(){if(this._progressIndicator){this._progressIndicator.parentNode.removeChild(this._progressIndicator);this._progressIndicator=null}},_impressionTrackPartners:function(m){if(m){var o=this._getContainer();this._trackingImages=[];for(var j=0;j<m.length;j++){var k=m[j].Tracking;if(!k){var l=new Date();if(m[j].InventoryId===1491){k={ImageUrl:"http://ad.doubleclick.net/ad/N6333.1452.CHEAPFLIGHTS/B6163325;sz=1x1;ord="+l.getTime()+"?"}}else{if(m[j].InventoryId===2754){k={ImageUrl:"http://ad.doubleclick.net/ad/N6333.1452.CHEAPFLIGHTS/B5865488;sz=1x1;ord="+l.getTime()+"?"}}}}if(k){if(k.ImageUrl){var p=new Image();p.src=k.ImageUrl;this._trackingImages[this._trackingImages.length]=p}if(k.ScriptUrl){var h=document.createElement("script");h.type="text/javascript";h.src=k.ScriptUrl;o.appendChild(h)}if(k.Script){var n=document.createElement("script");n.type="text/javascript";n.text=k.Script;o.appendChild(n)}}}}}};f(CF.BookingEngineStepTwoBehavior,"CF.BookingEngineStepTwoBehavior",CF.BookingEngineStepBehavior);CF.DescriptionLinkType=function(){};CF.DescriptionLinkType.prototype={None:0,Inline:1,Hover:2};b(CF.DescriptionLinkType,"CF.DescriptionLinkType");CF.DescriptionLink=function(h){CF.DescriptionLink.initializeBase(this,[h]);this._message=null;this._messagePanel=null;this._onMessagePanelClickHandler=null};CF.DescriptionLink.prototype={initialize:function(){CF.DescriptionLink.callBaseMethod(this,"initialize");var j=this.get_message();if(j){var h=this.get_element();var i=this._messagePanel=document.createElement("strong");i.className="cf-link-description-panel";this._onMessagePanelClickHandler=a(this,this._onMessagePanelClick);e(i,"click",this._onMessagePanelClickHandler);i.appendChild(document.createTextNode(j));h.appendChild(i)}},dispose:function(){CF.DescriptionLink.callBaseMethod(this,"dispose");if(this._onMessagePanelClickHandler){g(this._messagePanel,"click",this._onMessagePanelClickHandler)}},get_message:function(){return this._message},set_message:function(h){this._message=h},_onMessagePanelClick:function(h){h.stopPropagation()}};f(CF.DescriptionLink,"CF.DescriptionLink",CF.StandardBehavior);CF.BookingEngineEmailSignupFieldBehavior=function(h){CF.BookingEngineEmailSignupFieldBehavior.initializeBase(this,[h]);this._stepOne=null;this._radioButtonElements=[];this._textBoxElement=null;this._radioButtonClickedHandler=a(this,this._radioButtonClicked);this._selectedYes=false};CF.BookingEngineEmailSignupFieldBehavior.prototype={initialize:function(){var k=this.get_element().getElementsByTagName("input"),h,j;for(h=0;h<k.length;h++){j=k[h];if(j.type=="radio"){this._radioButtonElements.push(j);e(j,"click",this._radioButtonClickedHandler);if(j.checked&&j.value=="1"){this._showOrHideSignup(true)}}else{this._textBoxElement=j}}CF.BookingEngineEmailSignupFieldBehavior.callBaseMethod(this,"initialize")},dispose:function(){for(var h=0;h<this._radioButtonElements.length;h++){g(this._radioButtonElements[h],"click",this._radioButtonClickedHandler)}CF.BookingEngineEmailSignupFieldBehavior.callBaseMethod(this,"dispose")},get_container:function(){return this.get_element()},get_value:function(){return this._selectedYes&&this._textBoxElement?this._textBoxElement.value:""},get_stepOne:function(){return this._stepOne},set_stepOne:function(h){this._stepOne=h},validate:function(i,h){if(this._selectedYes&&this._textBoxElement){if(!this._textBoxElement.value){h.add(i,h.get_resources().ErrorMessageEmailSignup)}else{if(!/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/.test(this._textBoxElement.value)){h.add(i,h.get_resources().ErrorMessageEmailSignup)}}}},_radioButtonClicked:function(i){var h=i.target.value=="1";if(h){}this._showOrHideSignup(h)},_showOrHideSignup:function(h){var i=this.get_element().getElementsByTagName("div");if(i&&i.length>0){i[0].style.display=h?"block":"none"}if(h){var k=this.get_stepOne(),j=k?k.get_nextStep():null;if(j){j.set_enableAjaxRegionSearch(false)}}else{if(this._textBoxElement){this._textBoxElement.value=""}}this._selectedYes=h}};f(CF.BookingEngineEmailSignupFieldBehavior,"CF.BookingEngineEmailSignupFieldBehavior",CF.StandardBehavior);CF.MiniBookingEngineBehavior=function(h){CF.MiniBookingEngineBehavior.initializeBase(this,[h])};CF.MiniBookingEngineBehavior.prototype={initialize:function(){CF.MiniBookingEngineBehavior.callBaseMethod(this,"initialize")},dispose:function(){CF.MiniBookingEngineBehavior.callBaseMethod(this,"dispose")},createFieldRules:function(){var h=CF.MiniBookingEngineBehavior.callBaseMethod(this,"createFieldRules");linkPositions=[];linkPositions[CF.BookingEngineType.EconomyFlight]=CF.LinkPosition.before;linkPositions[CF.BookingEngineType.FlightHotel]=CF.LinkPosition.before;linkPositions[CF.BookingEngineType.Hotel]=CF.LinkPosition.after;linkPositions[CF.BookingEngineType.CarRental]=CF.LinkPosition.after;h[CF.BookingEngineFieldType.DepartureRegion].listAllLinkPositions=linkPositions;h[CF.BookingEngineFieldType.DestinationRegion].listAllLinkPositions=linkPositions;return h},onPrincipalFieldValueChanged:function(l){CF.MiniBookingEngineBehavior.callBaseMethod(this,"onPrincipalFieldValueChanged",[l]);if(l==CF.BookingEngineFieldType.BookingEngineType){var n=this.get_bookingEngineType();var m=this.get_fieldRules();var h=m[CF.BookingEngineFieldType.DepartureRegion].listAllLinkPositions[n];h=h||CF.LinkPosition.unknown;var j=m[CF.BookingEngineFieldType.DestinationRegion].listAllLinkPositions[n];j=j||CF.LinkPosition.unknown;var k=this.get_fieldBehaviors()[CF.BookingEngineFieldType.DepartureRegion];k.set_listAllLinkPosition(h);var i=this.get_fieldBehaviors()[CF.BookingEngineFieldType.DestinationRegion];i.set_listAllLinkPosition(j)}}};f(CF.MiniBookingEngineBehavior,"CF.MiniBookingEngineBehavior",CF.BookingEngineStepOneBehavior);CF.LinkPosition=function(){};CF.LinkPosition.prototype={unknown:0,before:1,after:2};b(CF.LinkPosition,"CF.LinkPosition",false);CF.BookingEngineRegionTextBoxBehavior=function(h){CF.BookingEngineRegionTextBoxBehavior.initializeBase(this,[h])};CF.BookingEngineRegionTextBoxBehavior.prototype={initialize:function(){CF.BookingEngineRegionTextBoxBehavior.callBaseMethod(this,"initialize")},dispose:function(){CF.BookingEngineRegionTextBoxBehavior.callBaseMethod(this,"dispose")},set_enabled:function(h){var j=this.get_element();if(h){var i=this._getReadOnlyElement(false);if(i){i.parentNode.removeChild(i)}}else{this._getReadOnlyElement(true).innerHTML=this.get_text();j.blur()}j.style.display=h?"":"none"},get_enabled:function(){return this._getReadOnlyElement(false)!=null},set_text:function(i){var h=this._getReadOnlyElement(false);if(h){h.innerHTML=i}CF.BookingEngineRegionTextBoxBehavior.callBaseMethod(this,"set_text",[i])},get_listAllLinkPosition:function(){if(this.get_listAllLink()){var h=this.get_listAllLink().nextSibling;while(h){if(h===this.get_element()){return CF.LinkPosition.before}h=h.nextSibling}return CF.LinkPosition.after}return CF.LinkPosition.unknown},set_listAllLinkPosition:function(h){if(this.get_listAllLink()&&h!==CF.LinkPosition.unknown&&this.get_listAllLinkPosition()!=h){if(h===CF.LinkPosition.before){this.get_container().insertBefore(this.get_listAllLink(),this.get_element())}else{this.get_container().insertBefore(this.get_element(),this._listAllLink)}}},_getReadOnlyElement:function(j){var i,h=this.get_container().getElementsByTagName("p");if(h&&h.length){i=h[0]}else{if(j){i=document.createElement("p");this.get_container().insertBefore(i,this.get_element())}}return i}};f(CF.BookingEngineRegionTextBoxBehavior,"CF.BookingEngineRegionTextBoxBehavior",CF.RegionTextBoxBehavior);CF.BookingEngineDateTimeSelectorBehavior=function(h){CF.BookingEngineDateTimeSelectorBehavior.initializeBase(this,[h]);this._defaultHour=9;this._timeElement=null};CF.BookingEngineDateTimeSelectorBehavior.prototype={initialize:function(){CF.BookingEngineDateTimeSelectorBehavior.callBaseMethod(this,"initialize")},dispose:function(){CF.BookingEngineDateTimeSelectorBehavior.callBaseMethod(this,"dispose")},get_value:function(){var h=CF.BookingEngineDateTimeSelectorBehavior.callBaseMethod(this,"get_value");var j=this.get_timeType();var i=h.DateTime;if(j===CF.BookingEngineTime.UseDate&&i){var k=this._getTimeElement();if(k.selectedIndex>=0){i.setHours(parseInt(k.options[k.selectedIndex].value.substr(1),10))}}h.TimeType=j;return h},set_value:function(h){if(h){this.set_timeType(h.TimeType)}CF.BookingEngineDateTimeSelectorBehavior.callBaseMethod(this,"set_value",[h])},get_defaultHour:function(){return this._defaultHour},set_defaultHour:function(h){if(this.get_defaultHour()!=h){this._defaultHour=h;this.raisePropertyChanged("defaultHour")}},get_timeType:function(){var h=this._getRawTimeValue();if(h){return h.charAt(0)=="h"?CF.BookingEngineTime.UseDate:parseInt(h,10)}return CF.BookingEngineTime.Anytime},set_timeType:function(j){if(typeof j==="number"&&this.get_timeType()!=j){var k=(j===CF.BookingEngineTime.UseDate||this.get_timeType()===CF.BookingEngineTime.UseDate);var o=CF.BookingEngineCoreResources,t=this._getTimeElement();var l=t.options;if(k){l.length=0;if(j!==CF.BookingEngineTime.UseDate){l[l.length]=new Option(o.TimeTypeAnytime,CF.BookingEngineTime.Anytime);l[l.length]=new Option(o.TimeTypeMorning,CF.BookingEngineTime.Morning);l[l.length]=new Option(o.TimeTypeAfternoon,CF.BookingEngineTime.Afternoon);l[l.length]=new Option(o.TimeTypeEvening,CF.BookingEngineTime.Evening)}else{var p=new Date(),r=new Date(p.getFullYear(),p.getMonth(),p.getDate());var q=this.get_defaultHour(),m,s;for(m=0;m<24;m++){r.setHours(m);switch(m){case 0:s=o.HourlyMidnight;break;case 12:s=o.HourlyMidday;break;default:s=r.localeFormat?r.localeFormat("t"):d.Date.localeFormat(r,"t")}l[l.length]=new Option(s,(m<10?"h0":"h")+m,false,(m==q))}}}if(j!==CF.BookingEngineTime.UseDate){for(var n=0;n<l.length;n++){if(l[n].value===j){t.selectedIndex=n;break}}}this.raisePropertyChanged("timeType")}},validate:function(l,i){CF.BookingEngineDateTimeSelectorBehavior.callBaseMethod(this,"validate",[l,i]);var h=this.get_date(),j=this.get_returnDateTimeSelector(),k=j?j.get_date():null;if(h!=null&&k!=null&&h.getTime()==k.getTime()&&this.get_timeType()!=CF.BookingEngineTime.Anytime&&this._getRawTimeValue()>j._getRawTimeValue()){i.add(l);i.add(CF.BookingEngineFieldType.ReturnDateTime,i.get_resources().ErrorMessageDateSequence)}},_getRawTimeValue:function(){var h=this._getTimeElement();return h!=null&&h.selectedIndex>=0?h.options[h.selectedIndex].value:null},_getTimeElement:function(){if(!this._timeElement){var h=this.get_element().getElementsByTagName("select");this._timeElement=h&&h.length?h[h.length-1]:null}return this._timeElement}};f(CF.BookingEngineDateTimeSelectorBehavior,"CF.BookingEngineDateTimeSelectorBehavior",CF.BookingEngineDateSelectorBehavior)}).apply(window,typeof CF=="object"&&CF.Sys?[CF,CF.Type.registerClass,CF.Type.registerEnum]:[window,function(b,c,a){b.registerClass(c,a)},function(b,c,a){b.registerEnum(c,a||false)}]);CF.BookingEngineExtResources={DescriptionFlightHotel:"Get premium travel deals when you book cheap flights and hotel reservations at the same time. Let our partners find you the best travel deals available right now.",ErrorMessagePastDate:"Sorry but the departure and/or return dates are in the past. Please check the dates and try again.",HeaderFlightHotel:"Book Flights & Hotels",ErrorMessageDepartureDateTime:"Please enter a valid departure date",ErrorMessageEmailSignup:"Please enter a valid email address",DescriptionCarRental:"Need to book car rentals for your next vacation? Type in your travel dates and we\u0027ll find you the best car rental deals.",DescriptionHotel:"Looking for the best deals on hotel reservations for your next trip? Type in your desired travel dates and destination and compare a wide range of travel deals available from our partners.",ErrorMessageDestinationRegion:"Please enter a valid destination",Header:"Book Airline Tickets",ErrorHeader:"Please complete all required fields!",StepTwoDescription:"Enter your information and click \u2018Search recommended websites\u2019 to find airfare deals with one of our partners, including\u2026",OtherWebsitesLabelText:"Other websites",SearchPartnersHeading:"Search recommended websites",ErrorMessageDepartureRegion:"Please enter a valid departure",ErrorMessageDepartureDateTimeReturnDateTime:"Please enter a valid departure and return date",HeaderCarRental:"Book Car Rental",DuplicateRegionErrorMessage:"Sorry but your departure and destination can not be the same.",GenericSearchErrorMessage:"Sorry but we are unable to search for recommended websites at the moment please try again later.",ErrorMessageDepartureRegionDestinationRegion:"Please enter a valid departure and destination",ErrorMessageReturnDateTime:"Please enter a valid return date",Description:"Know when you want to fly?  Enter your dates for the best airfare deals to your destination.",NoPartnersSearchErrorMessage:"Sorry we do not have any partners that match your search criteria.",ErrorMessageDateSequence:"Sorry but the return date cannot be before the departure date. Please check the dates and try again.",HeaderHotel:"Book Hotel Reservations"};