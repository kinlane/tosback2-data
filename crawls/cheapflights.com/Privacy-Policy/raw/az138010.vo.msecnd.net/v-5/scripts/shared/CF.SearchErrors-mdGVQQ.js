if(!CF){namespace("CF")}(function(a){CF.SearchErrors=function(){var b=this;var h=null;var n=a("meta[name='WT.sp']").attr("content");var o={BestFrom:"would be best served from",BestFromSister:"would be best served from our sister site",CommaAfterMomondoLogo:"",Continue:"Continue search on",Depart:"Depart",EnterDates:"please enter your dates",Go:"Go",Or:"or",Return:"Return",StartAgain:"Start your search again",Suitable:"",ToContinue:"To continue your search with",YouEntered:"The departure point you have entered"};var r={CFES:{BestFrom:"ser&#237;a m&#225;s adecuado desde",BestFromSister:"ser&#237;a mejor atendido desde nuestra web hermana",CommaAfterMomondoLogo:",",Continue:"Contin&#250;a buscando en",Depart:"Salida",EnterDates:"por favor introduce tus fechas",Go:"Ir",Or:"o",Return:"Vuelta",StartAgain:"Comienza tu b&#250;squeda de nuevo",ToContinue:"Para continuar tu b&#250;squeda en",YouEntered:"El lugar de salida introducido"},CFDE:{BestFrom:"ist besser f&#252;r unsere Website",BestFromSister:"ist besser f&#252;r unsere Schwesterseite",Continue:"Sucht weiter auf",Depart:"Hinflug",EnterDates:"fortzufahren gebt eure Reisedaten ein",Go:"Los",Or:"oder",Return:"R&#252;ckflug",StartAgain:"Startet eine neue Suche",Suitable:"geeignet",ToContinue:"Um mit der Suche auf",YouEntered:"Der von euch gew&#228;hlte Abflugort"}};var q='<div id="search-errors"><a href="#" id="se-close" class="hover">Close</a><div id="se-text">${$item.resource("YouEntered")} <em>&#39;${OriginRegionText}&#39;</em> {{if IsMomondo}}${$item.resource("BestFromSister")}{{else}}${$item.resource("BestFrom")}{{/if}} <a href="${Url}">${SiteTitle}</a> ${$item.resource("Suitable")}</div>{{if IsMomondo}}<div id="se-black">${$item.resource("ToContinue")} <span style="white-space:nowrap"><ins />${$item.resource("CommaAfterMomondoLogo")}</span> ${$item.resource("EnterDates")}<div class="field" id="se-depart"><label>${$item.resource("Depart")}</label><input type="text" class="textbox datebox" readonly="readonly" /></div>{{if !IsOneWay}}<div class="field" id="se-return"><label>${$item.resource("Return")}</label><input type="text" class="textbox datebox" readonly="readonly" /></div>{{/if}}<div id="se-go-momondo">${$item.resource("Go")}</div></div>{{else}}<div id="se-sistercf" class="hover">${$item.resource("Continue")} ${SiteTitle} <ins class="${SiteCode}"></ins></div>{{/if}}<div id="se-or">${$item.resource("Or")}</div><div id="se-cancel" class="hover">${$item.resource("StartAgain")}</div></div>';a.template("searchErrors",q);function j(w,x,s){var u=w.siteCode=="MOMO";var v=x.tripType==0;var y={SiteCode:w.siteCode,SiteTitle:w.siteTitle,Url:w.url,OriginRegionText:x.origin.Text,IsMomondo:u,IsOneWay:v};var z={SiteCode:w.siteCode,ClickType:s,PageDeparture:w.originRegionCode,SearchDeparture:x.origin.Text,PageDestination:x.destination.Code,SearchDestination:x.destination.Text};var t=a.tmpl("searchErrors",y,{resource:p});a.blockUI({message:t,css:e(u),focusInput:false});f(u,w,x);CF.Track.searchErrorImpression(z)}function p(s){var t=r[n];if(t===undefined){return o[s]}var u=t[s];if(u===undefined){return o[s]}else{return u}}function e(s){return{width:"400px",height:s?"310px":"200px",color:"#12315F",backgroundColor:"rgb(177, 205, 244)",padding:"15px",border:"1px solid rgb(18, 49, 95)"}}function f(t,u,v){var s=a("#search-errors");var w=t?"Momondo":"CF";a(".hover",s).hover(function(){a(this).toggleClass("active")});a("#se-close, #se-cancel",s).click(function(){CF.Track.trackAdditional("SearchErrorLayer","close",w);d(t,u.originRegionCode)});if(t){g(s,u.url,v.departingOn,v.returningOn,v.originRegionCode)}else{a("#se-sistercf, #se-text a",s).click(function(){CF.Track.trackAdditional("SearchErrorLayer","continue","CF");l(false,false,u.originRegionCode);var x=v.departingOn?function(){k(u,v)}:function(){window.location=u.url};setTimeout(x,100);return false})}}function k(t,u){var w=u.returningOn?u.returningOn:u.departingOn;var v={BookingEngineType:0,TripType:u.tripType,TicketClass:0,DepartureRegion:{RegionCode:t.originRegionCode,Text:u.origin.Text},DestinationRegion:{RegionCode:u.destination.Code,Text:u.destination.Text},DepartureDateTime:{DateTime:"/Date("+u.departingOn.getTime()+")/",TimeType:4,TimezoneOffset:u.departingOn.getTimezoneOffset()},ReturnDateTime:{DateTime:"/Date("+w.getTime()+")/",TimeType:4,TimezoneOffset:w.getTimezoneOffset()},NumberOfAdults:u.adultsCount,NumberOfChildren:u.childrenCount,NumberOfInfants:u.infantsCount,EmailSignup:u.email};var s=a("<form />").attr("method","post").attr("action",t.url);a("<input type='text' name='cf-be-state' />").val(a.toJSON(v)).appendTo(s);a("body").append(s);s.submit()}function g(u,y,s,w,v){var t=a("#se-depart input",u);var x=a("#se-return input",u);t.datepicker({minDate:0,onSelect:function(z,B){var A=t.datepicker("getDate");i(false,A);if(x){var C=x.datepicker("getDate");if(C<A){C=c(A,7);x.datepicker("setDate",C);i(true,C)}}}});if(x){x.datepicker({minDate:t.datepicker("getDate"),beforeShow:function(z,A){A.settings.minDate=t.datepicker("getDate")},onSelect:function(z,A){var B=x.datepicker("getDate");i(true,B)}})}if(s==null){today=new Date();s=c(today,7);w=c(today,14)}t.datepicker("setDate",s);if(x){x.datepicker("setDate",w)}a("#se-go-momondo, #se-text a",u).click(function(){CF.Track.trackAdditional("SearchErrorLayer","continue","Momondo");l(false,true,v);var z=function(){var A=a("#se-text a").attr("href");document.location=A};setTimeout(z,100);return false})}function c(s,t){var u=s.getTime();return new Date(u+t*24*60*60*1000)}function i(v,s){var t=a.datepicker.formatDate("dd-mm-yy",s);var w=a("#se-text a");var y=w.attr("href");var x=v?"RD":"DD";var u=y.indexOf("&"+x+"=");y=y.substring(0,u+4)+t+y.substring(u+14);w.attr("href",y)}function d(s,t){a.unblockUI();if(h){h.call(b)}l(true,s,t)}function m(v,w){var x=v?"cf_dep_other":"cf_dep_intl";var t=n+" Search Error";var y=a("meta[name='WT.cg_n']").attr("content");var u=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");var s=v?"momondo":"sistercf";var z=u+"/searchlayer/"+s}function l(s,u,v){var t;if(s){t=u?"momondosearchcancel":"sistercfsearchcancel"}else{t=u?"momondosearchsubmit":"sistercfsearchsubmit"}}return{show:function(t,u,s){j(t,u,s)},onCancel:function(s){h=s}}}}(jQuery));