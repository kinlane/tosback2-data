var CF=CF||{};(function(){if(CF.Tracking){return}CF.Tracking=function(){var v=[];v.CFUK=6;v.CFUS=7;v.CFCA=8;v.CFDE=9;v.CFAU=30;v.CFES=32;v.CFFR=34;v.CFIT=36;function a(){(function(B){B(document).delegate("a.cf-track","click",function(){x(this)});B(document).delegate("a.cf-event","click",function(){c(this)})})(jQuery)}function k(B){var D={};if(typeof B=="string"){if(B.indexOf("/goto.asp")==-1&&B.indexOf("/workers/dealpartnerselect.aspx")==-1){return}D=GetQueryString(B,D)}else{D=B}if(D.t!=undefined){D.t=unescape(D.t)}var E=new Array();SetWT(original_WT_cg_n+"(y="+D.y+")",E,D.y);SetDCSext(D,E,true);SetCfSourceCookie(E);_dcsMultiTrack(E);if(gExitClickHandlers){for(var C=0;C<gExitClickHandlers.length;C++){gExitClickHandlers[C](D)}}}function o(B){alert("Log to tag man");if(window.LEV&&LEV.TML){LEV.TML.iframe=function(){var C={d:"pfa.levexis.com",c:"cheapflights",ci:GetTagManContainerID(),pr:"1",p:""};var E="//"+C.d+"/"+C.c+"/tman.cgi/tmcontid="+C.ci+"&pageref="+C.pr;var D=E+"&tmtag=iframe";var F=LEV.extend(document.createElement("iframe"),{src:D});LEV.extend(F.style,{width:"18",height:"18",border:"0",position:"absolute",top:"0",left:"-999em"});document.body.appendChild(F)};LEV.TML.iframe()}}function p(){var C=u.split("-");if(C.length<3){return timestamp}var D=parseInt(C[0]);var F=parseInt(C[1])+1;var E=parseInt(C[2]);var B=timestamp-(D+E);E=timestamp-D;return C[0]+"-"+F+"-"+E+"-"+B}function y(B){var E=new Date();var C=E.getTime();var I=url.indexOf("&u=");if(I==-1){var G="u="+C+"-1-0";if(url.indexOf("&t=")>-1){url=url.replace("&t=","&"+G+"&t=")}else{url+="&"+G}}else{var D=url.substring(I+3);var J=D.indexOf("&");if(J==-1){J=D.length}var F=D.substring(0,J);var H=p(F,C);url=url.replace("&u="+oldid,"&u="+newid)}B.href=url;return url}function f(){if(typeof _eventIDConfig=="undefined"){_eventIDConfig={lastOrdinal:0,prefix:_tag.DCSext.eid?_tag.DCSext.eid:("CF-"+Math.floor(Math.random()*9999999)+"-"+(new Date()).getTime())}}return _eventIDConfig.prefix+"-"+ ++_eventIDConfig.lastOrdinal}function b(G,H,B){var F=G.href;var C=F.indexOf("&"+H+"=");if(C<=0){C=F.indexOf("?"+H+"=")}if(C>=0){var D=F.indexOf("&",C+H.length+2);F=F.substring(0,C+1)+H+(D>=0?F.substr(D):"")}else{var E=F.indexOf("?");if(E>=0){F=F.substr(0,E+1)+H+"="+B+"&"+F.substr(E+1)}else{F+="?"+H+"="+escape(B)}}G.href=F}function z(C,B){}function x(B,C){if(JSC){JSC(B,C)}}function c(B){var D=jQuery.noConflict();var E="";if(typeof B==="object"){var C=D(B);E=C.data("event")}else{E=B}if(ntptEventTag){ntptEventTag("ev="+E)}}function h(B){if(B.tagman){if(typeof B.tagman==="function"){B.tagman.call(this)}o()}if(B.unica){n(B.unica)}}function n(B){if(ntptEventTag){ntptEventTag(B)}}function o(){if(LogToTagMan){LogToTagMan(location.href)}}function e(C){i();var B=r(C.State.BookingEngineType);m(C.State,B);if(C.Partners.length>0){j("be",B,C.Partners)}else{window.iJPageData.y="be"}d()}function q(G,B,F,D,E,C){i();window.iJPageData.pagedep=B;if(w(window.iJPageData.pagedep)){window.iJPageData.srchdep=F}window.iJPageData.adv=D;window.iJPageData.style=E;if(!w(C)){window.iJPageData.filter=C}j("ins",null,G);d()}function g(B){return(B==undefined||B==null||B=="")}function d(){if(window.iJPageData.partners.length==0){var C=g(window.iJPageData.pagedep);var B=g(window.iJPageData.pagedest);window.iJPageData.outcome="empty";if(window.iJPageData.pi=="INS"){if(C){window.iJPageData.outcome="error"}}else{if(B){window.iJPageData.outcome="error"}}}iJTrackPage()}function w(B){return typeof B==="undefined"||B==null||B.length==0}function i(){var B=window.iJPageData.pi;window.iJPageData={pgtype:"results",outcome:"success",pi:B,partners:[]}}function m(D,G){var C=jQuery("meta[name='WT.sp']").attr("content");window.iJPageData.pd=G;if(!w(D.OriginRegionCode)){window.iJPageData.pagedep=D.OriginRegionCode}if(w(window.iJPageData.pagedep)){window.iJPageData.srchdep=D.OriginRegionCodeText}if(!w(D.DestinationRegionCode)){window.iJPageData.pagedest=D.DestinationRegionCode}if(w(window.iJPageData.pagedest)){window.iJPageData.srchdest=D.DestinationRegionCodeText}var H=l(D.TripType);var E=new Date();var F=D.DepartureDate.asDate(C);window.iJPageData.out=F.format("yyyy-mm-dd");window.iJPageData.adv=A(E,F);if(H=="R"){var B=D.ReturnDate.asDate(C);window.iJPageData.ret=B.format("isoDate");window.iJPageData.len=A(F,B)}window.iJPageData.trp=H;window.iJPageData.cls=t(D.TicketClass);window.iJPageData.adt=D.NumberOfAdults;if(D.NumberOfChildren>0){window.iJPageData.chd=D.NumberOfChildren}if(D.NumberOfInfants>0){window.iJPageData.inf=D.NumberOfInfants}if(G=="FLI"){window.iJPageData.otm=s(D.DepartureTimeType);window.iJPageData.rtm=s(D.ReturnTimeType)}if(G=="F_H"){window.iJPageData.otm=s(D.DepartureTimeType);window.iJPageData.rtm=s(D.ReturnTimeType);window.iJPageData.str=D.StarRating;window.iJPageData.rms=D.NumberOfRooms}if(G=="CAR"){window.iJPageData.age=D.DriverAge;delete window.iJPageData.pagedep;delete window.iJPageData.srchdep;delete window.iJPageData.cls;delete window.iJPageData.trp;delete window.iJPageData.adt;delete window.iJPageData.chd;delete window.iJPageData.inf}if(G=="ACC"){window.iJPageData.str=D.StarRating;window.iJPageData.rms=D.NumberOfRooms;delete window.iJPageData.pagedep;delete window.iJPageData.srchdep;delete window.iJPageData.cls;delete window.iJPageData.trp}}function A(B,D){var C=1000*60*60*24;return Math.round((D.getTime()-B.getTime())/(C))}function j(D,I,G){var E=G.length;var F=window.iJPageData.partners;F.length=0;var H=1;for(var B=0;B<G.length;B++){var C=G[B].BrandCode;if(D=="ins"){C=G[B].brc}var J={y:D,brd:C,sp:H++,bs:E};if(I!=null){J.pd=I}F.push(J)}}function t(B){return B==1?"B":"E"}function l(B){return B=="0"?"S":"R"}function s(B){switch(B){case 1:return"mrn";case 2:return"aft";case 3:return"evn";default:return"any"}}function r(B){switch(B){case 3:return"CAR";case 4:return"ACC";case 5:return"F_H";case 8:return"HOL";default:return"FLI"}}a();return{init:function(){a()},exit:function(B,C){x(B,C)},event:function(B){c(B)},beImpression:function(B){e(B)},insImpression:function(G,B,F,D,E,C){q(G,B,F,D,E,C)},load:function(B){h(B)},createEid:function(){return f()}}};CF.Track=new CF.Tracking()}());