(function(f,y){var j=f.fn.domManip,a="_tmplitem",v=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,u={},k={},x,z={key:0,data:{}},g=0,s=0,n=[];function d(E,A,C,B){var D={data:B||(A?A.data:{}),_wrap:A?A._wrap:null,tmpl:null,parent:A||null,nodes:[],calls:l,nest:m,wrap:r,html:e,update:o};if(E){f.extend(D,E,{nodes:[],parent:A})}if(C){D.tmpl=C;D._ctnt=D._ctnt||D.tmpl(f,D);D.key=++g;(n.length?k:u)[g]=D}return D}f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(A,B){f.fn[A]=function(C){var G=[],I=f(C),J,D,F,E,H=this.length===1&&this[0].parentNode;x=u||{};if(H&&H.nodeType===11&&H.childNodes.length===1&&I.length===1){I[B](this[0]);G=this}else{for(D=0,F=I.length;D<F;D++){s=D;J=(D>0?this.clone(true):this).get();f.fn[B].apply(f(I[D]),J);G=G.concat(J)}s=0;G=this.pushStack(G,A,I.selector)}E=x;x=null;f.tmpl.complete(E);return G}});f.fn.extend({tmpl:function(B,C,A){return f.tmpl(this[0],B,C,A)},tmplItem:function(){return f.tmplItem(this[0])},template:function(A){return f.template(A,this[0])},domManip:function(H,B,D,C){if(H[0]&&H[0].nodeType){var G=f.makeArray(arguments),A=H.length,E=0,F;while(E<A&&!(F=f.data(H[E++],"tmplItem"))){}if(A>1){G[0]=[f.makeArray(H)]}if(F&&s){G[2]=function(I){f.tmpl.afterManip(this,I,D)}}j.apply(this,G)}else{j.apply(this,arguments)}s=0;if(!x){f.tmpl.complete(u)}return this}});f.extend({tmpl:function(A,B,C,E){var D,F=!E;if(F){E=z;A=f.template[A]||f.template(null,A);k={}}else{if(!A){A=E.tmpl;u[E.key]=E;E.nodes=[];if(E.wrapped){c(E,E.wrapped)}return f(p(E,null,E.tmpl(f,E)))}}if(!A){return[]}if(typeof B==="function"){B=B.call(E||{})}if(C&&C.wrapped){c(C,C.wrapped)}D=f.isArray(B)?f.map(B,function(G){return G?d(C,E,A,G):null}):[d(C,E,A,B)];return F?f(p(E,null,D)):D},tmplItem:function(A){var B;if(A instanceof f){A=A[0]}while(A&&A.nodeType===1&&!(B=f.data(A,"tmplItem"))&&(A=A.parentNode)){}return B||z},template:function(B,A){if(A){if(typeof A==="string"){A=t(A)}else{if(A instanceof f){A=A[0]||{}}}if(A.nodeType){A=f.data(A,"tmpl")||f.data(A,"tmpl",t(A.innerHTML))}return typeof B==="string"?(f.template[B]=A):A}return B?(typeof B!=="string"?f.template(null,B):(f.template[B]||f.template(null,v.test(B)?B:f(B)))):null},encode:function(A){return(""+A).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});f.extend(f.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(A){u={}},afterManip:function w(C,B,D){var A=B.nodeType===11?f.makeArray(B.childNodes):B.nodeType===1?[B]:[];D.call(C,B);q(A);s++}});function p(A,E,D){var B,C=D?f.map(D,function(F){return(typeof F==="string")?(A.key?F.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+a+'="'+A.key+'" $2'):F):p(F,A,F._ctnt)}):A;if(E){return C}C=C.join("");C.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(F,H,I,G){B=f(I).get();q(B);if(H){B=i(H).concat(B)}if(G){B=B.concat(i(G))}});return B?B:i(C)}function i(B){var A=document.createElement("div");A.innerHTML=B;return f.makeArray(A.childNodes)}function t(A){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+f.trim(A).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(I,L,H,E,J,K,D){var G=f.tmpl.tag[H],F,B,C;if(!G){throw"Template command not found: "+H}F=G._default||[];if(K&&!/\w$/.test(J)){J+=K;K=""}if(J){J=b(J);D=D?(","+b(D)+")"):(K?")":"");B=K?(J.indexOf(".")>-1?J+K:("("+J+").call($item"+D)):J;C=K?B:"(typeof("+J+")==='function'?("+J+").call($item):("+J+"))"}else{C=B=F.$1||"null"}E=b(E);return"');"+G[L?"close":"open"].split("$notnull_1").join(J?"typeof("+J+")!=='undefined' && ("+J+")!=null":"true").split("$1a").join(C).split("$1").join(B).split("$2").join(E?E.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(N,P,O,M){M=M?(","+M+")"):(O?")":"");return M?("("+P+").call($item"+M):N}):(F.$2||""))+"_.push('"})+"');}return _;")}function c(B,A){B._wrap=p(B,true,f.isArray(A)?A:[v.test(A)?A:f(A).html()]).join("")}function b(A){return A?A.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function h(A){var B=document.createElement("div");B.appendChild(A.cloneNode(true));return B.innerHTML}function q(G){var D="_"+s,B,H,I={},A,C,E;for(A=0,C=G.length;A<C;A++){if((B=G[A]).nodeType!==1){continue}H=B.getElementsByTagName("*");for(E=H.length-1;E>=0;E--){F(H[E])}F(B)}function F(M){var N,L=M,J,P,O;if((O=M.getAttribute(a))){while(L.parentNode&&(L=L.parentNode).nodeType===1&&!(N=L.getAttribute(a))){}if(N!==O){L=L.parentNode?(L.nodeType===11?0:(L.getAttribute(a)||0)):0;if(!(P=u[O])){P=k[O];P=d(P,u[L]||k[L],null,true);P.key=++g;u[g]=P}if(s){K(O)}}M.removeAttribute(a)}else{if(s&&(P=f.data(M,"tmplItem"))){K(P.key);u[P.key]=P;L=f.data(M.parentNode,"tmplItem");L=L?L.key:0}}if(P){J=P;while(J&&J.key!=L){J.nodes.push(M);J=J.parent}delete P._ctnt;delete P._wrap;f.data(M,"tmplItem",P)}function K(Q){Q=Q+D;P=I[Q]=(I[Q]||d(P,u[P.parent.key+D]||P.parent,null,true))}}}function l(A,B,D,C){if(!A){return n.pop()}n.push({_:A,tmpl:B,item:this,data:D,options:C})}function m(B,A,C){return f.tmpl(f.template(B),A,C,this)}function r(C,A){var B=C.options||{};B.wrapped=A;return f.tmpl(f.template(C.tmpl),C.data,B,C.item)}function e(B,A){var C=this._wrap;return f.map(f(f.isArray(C)?C.join(""):C).filter(B||"*"),function(D){return A?D.innerText||D.textContent:D.outerHTML||h(D)})}function o(){var A=this.nodes;f.tmpl(null,null,null,this).insertBefore(A[0]);f(A).remove()}})(jQuery);