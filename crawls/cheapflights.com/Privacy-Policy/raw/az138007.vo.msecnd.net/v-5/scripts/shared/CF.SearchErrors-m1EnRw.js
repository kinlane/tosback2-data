if(!CF){namespace("CF")}(function(a){CF.SearchErrors=function(){var b=this;var h=null;var l=a("meta[name='WT.sp']").attr("content");var m={BestFrom:"would be best served from",BestFromSister:"would be best served from our sister site",CommaAfterMomondoLogo:"",Continue:"Continue search on",Depart:"Depart",EnterDates:"please enter your dates",Go:"Go",Or:"or",Return:"Return",StartAgain:"Start your search again",Suitable:"",ToContinue:"To continue your search with",YouEntered:"The departure point you have entered"};var p={CFES:{BestFrom:"ser&#237;a m&#225;s adecuado desde",BestFromSister:"ser&#237;a mejor atendido desde nuestra web hermana",CommaAfterMomondoLogo:",",Continue:"Contin&#250;a buscando en",Depart:"Salida",EnterDates:"por favor introduce tus fechas",Go:"Ir",Or:"o",Return:"Vuelta",StartAgain:"Comienza tu b&#250;squeda de nuevo",ToContinue:"Para continuar tu b&#250;squeda en",YouEntered:"El lugar de salida introducido"},CFDE:{BestFrom:"ist besser f&#252;r unsere Website",BestFromSister:"ist besser f&#252;r unsere Schwesterseite",Continue:"Sucht weiter auf",Depart:"Hinflug",EnterDates:"fortzufahren gebt eure Reisedaten ein",Go:"Los",Or:"oder",Return:"R&#252;ckflug",StartAgain:"Startet eine neue Suche",Suitable:"geeignet",ToContinue:"Um mit der Suche auf",YouEntered:"Der von euch gew&#228;hlte Abflugort"}};var o='<div id="search-errors"><a href="#" id="se-close" class="hover">Close</a><div id="se-text">${$item.resource("YouEntered")} <em>&#39;${OriginRegionText}&#39;</em> {{if IsMomondo}}${$item.resource("BestFromSister")}{{else}}${$item.resource("BestFrom")}{{/if}} <a href="${Url}">${SiteTitle}</a> ${$item.resource("Suitable")}</div>{{if IsMomondo}}<div id="se-black">${$item.resource("ToContinue")} <span style="white-space:nowrap"><ins />${$item.resource("CommaAfterMomondoLogo")}</span> ${$item.resource("EnterDates")}<div class="field" id="se-depart"><label>${$item.resource("Depart")}</label><input type="text" class="textbox datebox" readonly="readonly" /></div>{{if !IsOneWay}}<div class="field" id="se-return"><label>${$item.resource("Return")}</label><input type="text" class="textbox datebox" readonly="readonly" /></div>{{/if}}<div id="se-go-momondo">${$item.resource("Go")}</div></div>{{else}}<div id="se-sistercf" class="hover">${$item.resource("Continue")} ${SiteTitle} <ins class="${SiteCode}"></ins></div>{{/if}}<div id="se-or">${$item.resource("Or")}</div><div id="se-cancel" class="hover">${$item.resource("StartAgain")}</div></div>';a.template("searchErrors",o);function j(u,v,q){var s=u.SiteCode=="MOMO";var t=v.tripType==0;var w={SiteCode:u.SiteCode,SiteTitle:u.SiteTitle,Url:u.Url,OriginRegionText:v.origin.Text,IsMomondo:s,IsOneWay:t};var x={SiteCode:u.SiteCode,ClickType:q,PageDeparture:u.OriginRegionCode,SearchDeparture:v.origin.Text,PageDestination:v.destination.Code,SearchDestination:v.destination.Text};var r=a.tmpl("searchErrors",w,{resource:n});a.blockUI({message:r,css:e(s),focusInput:false});f(s,u,v);CF.Track.searchErrorImpression(x)}function n(q){var r=p[l];if(r===undefined){return m[q]}var s=r[q];if(s===undefined){return m[q]}else{return s}}function e(q){return{width:"400px",height:q?"310px":"200px",color:"#12315F",backgroundColor:"rgb(177, 205, 244)",padding:"15px",border:"1px solid rgb(18, 49, 95)"}}function f(r,s,t){var q=a("#search-errors");var u=r?"Momondo":"CF";a(".hover",q).hover(function(){a(this).toggleClass("active")});a("#se-close, #se-cancel",q).click(function(){CF.Track.trackAdditional("SearchErrorLayer","close",u);d(r,s.OriginRegionCode)});if(r){g(q,s.Url,t.departingOn,t.returningOn,t.originRegionCode)}else{a("#se-sistercf, #se-text a",q).click(function(){CF.Track.trackAdditional("SearchErrorLayer","continue","CF");var v=t.departingOn?function(){k(s,t)}:function(){window.location=s.Url};setTimeout(v,100);return false})}}function k(r,s){var u=s.returningOn?s.returningOn:s.departingOn;var t={BookingEngineType:0,TripType:s.tripType,TicketClass:0,DepartureRegion:{RegionCode:r.OriginRegionCode,Text:s.origin.Text},DestinationRegion:{RegionCode:s.destination.Code,Text:s.destination.Text},DepartureDateTime:{DateTime:"/Date("+s.departingOn.getTime()+")/",TimeType:4,TimezoneOffset:s.departingOn.getTimezoneOffset()},ReturnDateTime:{DateTime:"/Date("+u.getTime()+")/",TimeType:4,TimezoneOffset:u.getTimezoneOffset()},NumberOfAdults:s.adultsCount,NumberOfChildren:s.childrenCount,NumberOfInfants:s.infantsCount,EmailSignup:s.email};var q=a("<form />").attr("method","post").attr("action",r.Url);a("<input class='hidden' type='text' name='cf-be-state' />").val(a.toJSON(t)).appendTo(q);a("body").append(q);q.submit()}function g(s,w,q,u,t){var r=a("#se-depart input",s);var v=a("#se-return input",s);r.datepicker({minDate:0,onSelect:function(x,z){var y=r.datepicker("getDate");i(false,y);if(v){var A=v.datepicker("getDate");if(A<y){A=c(y,7);v.datepicker("setDate",A);i(true,A)}}}});if(v){v.datepicker({minDate:r.datepicker("getDate"),beforeShow:function(x,y){y.settings.minDate=r.datepicker("getDate")},onSelect:function(x,y){var z=v.datepicker("getDate");i(true,z)}})}if(q==null){today=new Date();q=c(today,7);u=c(today,14)}r.datepicker("setDate",q);if(v){v.datepicker("setDate",u)}a("#se-go-momondo, #se-text a",s).click(function(){CF.Track.trackAdditional("SearchErrorLayer","continue","Momondo");var x=function(){var y=a("#se-text a").attr("href");document.location=y};setTimeout(x,100);return false})}function c(q,r){var s=q.getTime();return new Date(s+r*24*60*60*1000)}function i(t,q){var r=a.datepicker.formatDate("dd-mm-yy",q);var u=a("#se-text a");var w=u.attr("href");var v=t?"RD":"DD";var s=w.indexOf("&"+v+"=");w=w.substring(0,s+4)+r+w.substring(s+14);u.attr("href",w)}function d(q,r){a.unblockUI();if(h){h.call(b)}}return{show:function(r,s,q){j(r,s,q)},onCancel:function(q){h=q}}}}(jQuery));