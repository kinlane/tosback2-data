function encodeURIComp(A){return encodeURIComponent(A).replace(/\+/g,"%2b")}function decodeURIComp(A){return decodeURIComponent(A.replace(/\+/g," "))}jQuery.fn.redraw=function(){return this.each(function(){var B=this.style.display;this.style.display="none";var A=this.offsetHeight;this.style.display=B;if(this.fireEvent){this.fireEvent("onmove")}else{$(this).trigger("mousemove")}})};(function(A){A.fn.extend({center:function(){return this.each(function(){var C=(A(window).height()-A(this).outerHeight())/2;var B=(A(window).width()-A(this).outerWidth())/2;A(this).css({position:"absolute",margin:0,top:(C>0?C:0)+"px",left:(B>0?B:0)+"px"})})}})})(jQuery);function track(A,B){}function downloadPDF(D,A,B){var C=$("#downloadpdf").offset();$("#downloadpdf, #downloadnb").attr("disabled","disabled");$.ajax({url:"/input/pdf.jsp?id="+D+"&"+B.substring(1),complete:function(G,E){if(G.status==200){$("#download-popup").fadeOut(200);var F="pdfGet.jsp?id="+$.trim(G.responseText)+"&i="+A;window.location=F}else{$("#download-popup").fadeOut(200)}$("#download-popup").attr("disabled","")}});return false}function downloadNotebook(C,A,B){$("#downloadingnb").show();$("#downloadpdf, #downloadnb").attr("disabled","disabled");$.ajax({url:"/input/nb.jsp?id="+C+"&"+B.substring(1),complete:function(E,D){if(E.status==200){$("#download-popup").fadeOut(200);window.location="nbGet.jsp?id="+$.trim(E.responseText)+"&i="+A}else{$("#download-popup").fadeOut(200)}$("#download-popup").attr("disabled","")}});return false}String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};String.prototype.endsWith=function(A){return(this.match(A+"$")==A)};function getURLParam(C,B){if(B==null||B==""){B=window.location.href}C=C.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var A="[\\?&]"+C+"=([^&#]*)";var E=new RegExp(A);var D=E.exec(B);if(D==null){return""}else{return D[1]}}function getScrollPosition(){var A={};A.y=(typeof document.scrollTop!="undefined"?document.scrollTop:(typeof window.pageYOffset!="undefined"?window.pageYOffset:(typeof document.body.parentElement.scrollTop!="undefined"?document.body.parentElement.scrollTop:0)));A.x=(typeof document.scrollLeft!="undefined"?document.scrollLeft:(typeof window.pageXOffset!="undefined"?window.pageXOffset:(typeof document.body.parentElement.scrollTop!="undefined"?document.body.parentElement.scrollTop:0)));return A}function generateHiddenInputField(A,C){var B=$("<input />").attr({type:"hidden",name:A,value:C});return B}function addEllipsis(D,H,G){var A=new Number(D.height());var F=H;var C=D.html();var B=D.html();if(B.length>G){B=B.substring(0,G)}if(A>F){var E=0;while(A>F){E++;B=B.substring(0,B.length-5);D.html(B);A=new Number(D.height())}B=B.substring(0,B.length-5);B=B.substring(0,B.lastIndexOf(" "));B+="&nbsp;..."}else{}D.html(B)}function getColoParam(B){if(typeof B=="undefined"&&typeof server!="undefined"){B=server}if(typeof B=="undefined"){return""}var C=B.replace("http://","").split(".");var A=C[0];if(A.length>3){return A.substring(3)}else{return""}}function getColoHost(A){if(typeof A=="undefined"&&typeof server!="undefined"){A=server}if($.browser.msie||$.browser.opera){return""}else{if(typeof A!="undefined"){return A}else{return""}}}function getAuthCookiesParams(){var D=getAuthIns();var C=$.cookie("wa_pro_s"+D);var A=$.cookie("wa_pro_u"+D);var B=$.cookie("wa_pro_t"+D);return mapToURLParams({as:C,au:A,at:B})}function getAuthCookiesParamsObj(){var D=getAuthIns();var C=$.cookie("wa_pro_s"+D);var A=$.cookie("wa_pro_u"+D);var B=$.cookie("wa_pro_t"+D);return{as:C,au:A,at:B}}function getColoProofURL(B,C){if($.browser.msie||$.browser.opera){return"/input/subpodaction/?c="+getColoParam(C)+"&u="+encodeURIComponent(B)}else{var A="&";return getColoHost(C)+B+A+getAuthCookiesParams()}}function mapToURLParams(C){var A="";for(var B in C){A+=B+"="+encodeURIComp(C[B])+"&"}return A}function arrayToURLParams(A,C){var B="";for(var D in A){B+=C+"="+encodeURIComp(A[D])+"&"}return B}function removeLastAmp(A){return removeLastChars(A,"&")}function removeLastChars(D,E){var C=0;var B=D.length;for(var A=0;A<B;A++){if(D[B-1-A]==E){C++}else{break}}D=D.substring(0,B-C);return D}function xssEscape(A){return A.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function utf8_to_b64(A){return window.btoa(unescape(encodeURIComponent(A)))}function b64_to_utf8(A){return decodeURIComponent(escape(window.atob(A)))}function removeURLAnchor(A){if(A.lastIndexOf("#")==-1){return A}return A.substring(0,A.lastIndexOf("#"))}function SelectText(B){var D=document;var E=B;if(D.body.createTextRange){var A=document.body.createTextRange();A.moveToElementText(E);A.select()}else{if(window.getSelection){var C=window.getSelection();var A=document.createRange();A.selectNodeContents(E);C.removeAllRanges();C.addRange(A)}}}function setupFiledrop(A,D,E,B){var C=$(A);if(C.length<1){return false}C=C.get(0);if(typeof E=="function"){C.addEventListener("dragover",E,false)}if(typeof B=="function"){C.addEventListener("dragleave",B,false)}if(typeof D=="function"){C.addEventListener("drop",D,false)}}function getTopDomain(){var A=window.location.host.split(".");return A.splice(A.length-2,A.length).join(".")}function getQueryURL(){return window.location.pathname}function recursiveSplat(B){var C=escape(B);var A="/Calculate/splat.jsp?i="+C+"&recompute=splat&lev="+scoreLevel;if(handwritten==1){A=A+"&handwritten=1"}C=C.replace(/\+/g,"%2B");$.ajax({url:A,success:function(D){$("#feedback").before(D);$("#interpreting").html(B).parent("li").show();$("#parseUsed").html($("#parsedExp").html()).parent("li").show();$(".hide-rcld").removeClass("hide-rcld");$(".hide-sidebar").removeClass("hide-sidebar")},error:function(E,G,F){$("#attempts").html($("#attempts").html()+"{ "+B+" }").parent("li").show();var D=findInputs(B);if(D!=B){$("#using").html(D);$("#closest .use ul li:first").remove();if($(".use ul li").length<1){$(".use").remove()}recursiveSplat(D)}else{$(".use").hide();showTipPage()}$("#parseSorry").parent().removeClass("hide")}})};