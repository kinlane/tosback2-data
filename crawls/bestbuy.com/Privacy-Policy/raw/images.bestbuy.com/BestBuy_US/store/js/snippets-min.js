var PrimaryMessageSnippet=(function(){var p="primary-panel";var k="primary-tabs";var a=5000;var c=false;var e=0;var m=0;var d=null;var n=null;var f=null;function h(s){for(var t=0;t<i().length;t++){if(s!=undefined){$(i()[t]).fadeOut(600);$(g()[t]).removeClass("primary-tabs-selected")}else{if(s!=t){$(i()[t]).stop(true,true).fadeOut(600);$(g()[t]).removeClass("primary-tabs-selected")}}}}function b(){return document.getElementById(k)}function i(){if(d==null){d=$("#primary-wrapper div."+p)}return d}function g(){if(n==null){n=$("#primary-wrapper div#"+k+" ul > li")}return n}function j(){if(f==null){f=$("#primary-wrapper div#"+k+" ul > li > a")}return f}function o(s){if(i().length>0){h();for(var t=0;t<j().length;t++){if(s.nodeName!="A"){while((s.nodeName!="A")&&(s.nodeName!="BODY")){s=s.parentNode}}if(j()[t]==s){r(t);clearTimeout(e)}}}}function r(s){if(i().length>0){m=s;h(s);$(i()[s]).fadeIn(600);$(g()[s]).addClass("primary-tabs-selected")}}function l(t){if(i().length>0){for(var s=0;s<i().length;s++){if(s==t){i()[s].style.display="block"}else{i()[s].style.display="none"}}$(g()[t]).addClass("primary-tabs-selected");m=t}}function q(){if(c){e=setTimeout(function(){++m;if(m>=j().length){m=0}r(m);q()},a)}}return{init:function(s){$("div.primary-panel").each(function(){var u=$(this);var v=u.find("div.primary-pop-panel");var w=u.find("ul.primary-pop-nav a");v.hide().eq(0).show();w.eq(0).addClass("primary-pop-active");w.click(function(){var x=w.index(this);w.removeClass("primary-pop-active");$(this).addClass("primary-pop-active");v.hide();v.eq(x).show();return false})});if($("#primary-tabs").length>0){if($("#primary-tabs ul li").size()==1){$("#primary-tabs").css("display","none")}else{$("#primary-tabs").css("display","block").find("ul").addClass("primary-tabs-"+$("#primary-tabs ul li").size());var t="#"+k+" ul > li > a";$(t).click(function(u){if(typeof trackEvent!="undefined"){trackEvent.event("event.link",{lid:$(this).attr("name").replace("&lid=","")})}if($(this).parent().index()==m){return false}else{o(u.target);return false}});if(s==undefined){s=1}l(s-1);$("#primary-wrapper").hover(function(){clearTimeout(e)},function(){q()});q()}}$("#primary-wrapper ."+p).css({position:"absolute",visibility:"visible",left:0})},setAutoRotation:function(s){if(s==="false"){c=false}else{if(s==="true"){c=true}else{c=s}}},setRotationInterval:function(s){a=s*1000}}})();(function(a){a.fn.extend({tCarousel:function(b){var d={tabs:true,carousel:true,netkernal:false,modelNumbers:true,header:this.parent().parent().find("h2")};var c=a.extend(d,b);return this.each(function(){var e=c;var h=a(this);var k=new Array();var g=false;var f=false;h.addClass("tab-container");function j(p){if(!f){h.addClass("tab-carousel")}h.find(".tab"+p+" div.tab-content").append('<div class="tab-slider-wrapper"><div class="tab-slider-inside"><div class="tab-slider'+p+' tab-slider"></div></div></div>');var o=h.find(".tab"+p+" .tab-holder li.tab-item").size();var n=(185*o);h.find(".tab"+p+" ul.tab-holder").css({width:n,overflow:"hidden"});if(n<=440){h.find(".tab"+p+" .tab-slider-wrapper").css("display","none")}h.find(".tab-slider"+p).slider({animate:true,change:function(s,r){var q=n-h.find(".tab"+p+" .tab-scroll").width();h.find(".tab"+p+" .tab-scroll").animate({scrollLeft:r.value*(q/100)},1000)},slide:function(s,r){var q=n-h.find(".tab"+p+" .tab-scroll").width();h.find(".tab"+p+" .tab-scroll").scrollLeft(r.value*(q/100))}})}function l(){if(!g){h.addClass("tab-tabbed")}h.find(".tab0 h3.tab").addClass("tab-active");var o=e.header.addClass("tab-header").width();var n=o+20;h.find("h3.tab").each(function(p){a(this).css({top:"-29px",left:n+"px"});n=n+a(this).width()+20;if(p>0){h.find(".tab"+p+" .tab-content").hide();h.find(".tab"+p+" h3").addClass("tab-default")}});h.find("h3.tab").hover(function(){a(this).addClass("tab-over")},function(){a(this).removeClass("tab-over")});h.find("h3.tab").click(function(){var p=a(this).parent().attr("class").replace("tab","");if(k[p]==undefined){i(p)}h.find(".tab-content").hide();h.find(".tab"+p+" .tab-content").show();h.find("h3.tab").removeClass("tab-active");h.find("h3.tab").addClass("tab-default");h.find(".tab"+p+" h3").addClass("tab-active")})}function i(o){k[o]=true;h.find(".tab"+o+" .tab-scroll").before('<img class="tab-loading" src="http://images.bestbuy.com/BestBuy_US/en_US/images/global/on/loading.gif" />');var n;if(e.products[o].custom!=undefined){if(e.products[o].sort==undefined){e.products[o].sort="salesRankShortTerm.asc"}n="http://api.bbyremix.bestbuy.com/v1/products"+encodeURIComponent(e.products[o].custom)+"?apiKey=3m9usrb57uywm3yuqgzesh73&format=json&sort="+e.products[o].sort+"&show=url,sku,image,name,modelNumber,customerReviewAverage,customerReviewCount,planPrice,onSale,salePrice,regularPrice,advertisedPriceRestriction"}else{n="http://api.bbyremix.bestbuy.com/v1/products"+encodeURIComponent("(active=true&orderable in(Available,PreOrder)&categoryPath.id="+e.products[o].id+")")+"?apiKey=3m9usrb57uywm3yuqgzesh73&format=json&sort=salesRankShortTerm.asc&show=marketplace,url,sku,image,name,modelNumber,customerReviewAverage,customerReviewCount,planPrice,onSale,salePrice,regularPrice,advertisedPriceRestriction"}a.ajax({dataType:"jsonp",jsonp:"callback",jsonpCallback:"snippetCallback"+h.attr("id").replace(/[^a-zA-Z 0-9]+/g,""),url:n,cache:true,success:function(p){var q='<ul class="tab-holder">';a.each(p.products,function(s){q+='<li class="tab-item"><div class="tab-image"><div><a href="'+p.products[s].url+'" name="&lid=tab_iamge_'+p.products[s].sku+'"><img src="'+p.products[s].image+'" /></a></div></div><h4><a href="'+p.products[s].url+'" name="&lid=tab_headline_'+p.products[s].sku+'">'+p.products[s].name.replace("<","").replace(">","")+"</a></h4><dl>";if(e.modelNumbers){if(p.products[s].modelNumber!=undefined){q=q+"<dt><strong>Model</strong>: </dt><dd>"+p.products[s].modelNumber+"</dd>"}}q=q+"<dt><strong>SKU</strong>: </dt><dd>"+p.products[s].sku+"</dd></dl>";if(p.products[s].customerReviewAverage!=null){var t=""+p.products[s].customerReviewAverage.toFixed(1);t=t.replace(".","_");q+='<div class="tab-reviews"><img src="http://images.bestbuy.com/BestBuy_US/images/global/misc/ratings_star_'+t+'.gif" /> (<a href="'+p.products[s].url+'" name="&lid=tab_reviews_'+p.products[s].sku+'">'+p.products[s].customerReviewCount+" reviews</a>)</div>"}else{q+='<div class="tab-reviews"><img src="http://images.bestbuy.com/BestBuy_US/images/global/misc/ratings_star_0_0.gif" /> <a href="'+p.products[s].url+'" name="&lid=tab_reviews_'+p.products[s].sku+'">Write a review</a></div>'}q+="<p>";if(!p.products[s].advertisedPriceRestriction){if(p.products[s].planPrice!=null){q+="<strong>Price: $"+p.products[s].planPrice.toFixed(2)+"*</strong>"}else{if(p.products[s].onSale){q+="<strong>Sale: $"+p.products[s].salePrice.toFixed(2)+"</strong>"}else{q+="Price: $"+p.products[s].regularPrice.toFixed(2)}}}else{q+=""}q+="</p></li>"});q+='<div class="clearer"></div></ul>';if(e.products[o].disclaimer!=null){h.find(".tab"+o+" .tab-scroll").after("<small>* "+e.products[o].disclaimer+"</small>")}h.find(".tab"+o+" .tab-loading").css("display","none");if(e.products[o].shop==undefined){if(e.products[o].store==undefined){h.find(".tab"+o+" .tab-scroll").before('<p class="tab-see"><a href="http://www.bestbuy.com/site/olstemplatemapper.jsp?id=pcat17071&type=page&ks=960&st=%2F&sc=Global&cp=1&sp=&qp=crootcategoryid%23%23-1%23%23-1~~q2f~~nc'+e.products[o].id+'%23%237%23%231hi&list=y&usc=All+Categories&nrp=15&iht=n">Shop all '+e.products[o].name.replace("<","").replace(">","")+' &#8250;</a></p><div class="clearer"></div>')}else{h.find(".tab"+o+" .tab-scroll").before('<p class="tab-see"><a href="'+e.products[o].store+'">Shop all '+e.products[o].name.replace("<","").replace(">","")+' &#8250;</a></p><div class="clearer"></div>')}}else{h.find(".tab"+o+" .tab-scroll").before('<p class="tab-see"><a href="'+e.products[o].shop+'">Shop all '+e.products[o].name.replace("<","").replace(">","")+' &#8250;</a></p><div class="clearer"></div>')}h.find(".tab"+o+" .tab-scroll").html(q+'<div class="clearer"></div>');if(e.carousel){j(o);f=true}if((e.tabs)&&(!g)){l();g=true}else{if((!e.tabs)&&(!g)){var r=e.header.html()+" ";a.each(e.products,function(s){if(e.products.length==3){if(s==1){r=r+", "}if(s==2){r=r+", and "}}else{if(e.products.length==2){if(s==1){r=r+" and "}}}r=r+e.products[s].name.replace("<","").replace(">","")});e.header.html(r);g=true}}},error:function(p){try{console.log("Something went wrong: "+p)}catch(q){}}})}function m(){if(e.products.length<=4){var n="";a.each(e.products,function(p){n+='<div class="tab'+p+'"><h3 class="tab">'+e.products[p].name.replace("<","").replace(">","")+'</h3><div class="tab-content"><div class="tab-scroll"></div></div></div>'});h.html(n);if(e.netkernal||!e.tabs){a.each(e.products,function(p){i(p)})}else{i(0)}}else{try{console.log("Best Selling Error: Too many tabs defined")}catch(o){}}}m()})}})})(jQuery);