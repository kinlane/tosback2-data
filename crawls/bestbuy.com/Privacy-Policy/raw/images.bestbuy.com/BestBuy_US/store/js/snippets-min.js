var PrimaryMessageSnippet=function(){function r(){if(d){e=setTimeout(function(){++f;if(f>=n().length){f=0}p(f);r()},c)}}function q(a){if(l().length>0){for(var b=0;b<l().length;b++){if(b==a){l()[b].style.display="block"}else{l()[b].style.display="none"}}$(m()[a]).addClass("primary-tabs-selected");f=a}}function p(a){if(l().length>0){f=a;j(a);$(l()[a]).fadeIn(600);$(m()[a]).addClass("primary-tabs-selected")}}function o(a){if(l().length>0){j();for(var b=0;b<n().length;b++){if(a.nodeName!="A"){while(a.nodeName!="A"&&a.nodeName!="BODY"){a=a.parentNode}}if(n()[b]==a){p(b);clearTimeout(e)}}}}function n(){if(i==null){i=$("#primary-wrapper div#"+b+" ul > li > a")}return i}function m(){if(h==null){h=$("#primary-wrapper div#"+b+" ul > li")}return h}function l(){if(g==null){g=$("#primary-wrapper div."+a)}return g}function k(){return document.getElementById(b)}function j(a){for(var b=0;b<l().length;b++){if(a!=undefined){$(l()[b]).fadeOut(600);$(m()[b]).removeClass("primary-tabs-selected")}else{if(a!=b){$(l()[b]).stop(true,true).fadeOut(600);$(m()[b]).removeClass("primary-tabs-selected")}}}}var a="primary-panel";var b="primary-tabs";var c=5e3;var d=false;var e=0;var f=0;var g=null;var h=null;var i=null;return{init:function(c){$("div.primary-panel").each(function(){var a=$(this);var b=a.find("div.primary-pop-panel");var c=a.find("ul.primary-pop-nav a");b.hide().eq(0).show();c.eq(0).addClass("primary-pop-active");c.click(function(){var a=c.index(this);c.removeClass("primary-pop-active");$(this).addClass("primary-pop-active");b.hide();b.eq(a).show();return false})});if($("#primary-tabs").length>0){if($("#primary-tabs ul li").size()==1){$("#primary-tabs").css("display","none")}else{$("#primary-tabs").css("display","block").find("ul").addClass("primary-tabs-"+$("#primary-tabs ul li").size());var d="#"+b+" ul > li > a";$(d).click(function(a){if(typeof trackEvent!="undefined")trackEvent.event("event.link",{lid:$(this).attr("name").replace("&lid=","")});if($(this).parent().index()==f){return false}else{o(a.target);return false}});if(c==undefined){c=1}q(c-1);$("#primary-wrapper").hover(function(){clearTimeout(e)},function(){r()});r()}}$("#primary-wrapper "+"."+a).css({position:"absolute",visibility:"visible",left:0})},setAutoRotation:function(a){if(a==="false"){d=false}else if(a==="true"){d=true}else{d=a}},setRotationInterval:function(a){c=a*1e3}}}();(function(a){a.fn.extend({tCarousel:function(b){var c={tabs:true,carousel:true,netkernal:false,modelNumbers:true,header:this.parent().parent().find("h2")};var d=a.extend(c,b);return this.each(function(){function k(){if(b.products.length<=4){var d="";a.each(b.products,function(a){d+='<div class="tab'+a+'"><h3 class="tab">'+b.products[a].name.replace("<","").replace(">","")+'</h3><div class="tab-content"><div class="tab-scroll"></div></div></div>'});c.html(d);if(b.netkernal||!b.tabs){a.each(b.products,function(a){j(a)})}else{j(0)}}else{try{console.log("Best Selling Error: Too many tabs defined")}catch(e){}}}function j(d){e[d]=true;c.find(".tab"+d+" .tab-scroll").before('<img class="tab-loading" src="http://images.bestbuy.com/BestBuy_US/en_US/images/global/on/loading.gif" />');var j;if(b.products[d].custom!=undefined){if(b.products[d].sort==undefined){b.products[d].sort="salesRankShortTerm.asc"}j="http://api.bbyremix.bestbuy.com/v1/products"+encodeURIComponent(b.products[d].custom)+"?apiKey=3m9usrb57uywm3yuqgzesh73&format=json&sort="+b.products[d].sort+"&show=url,sku,image,name,modelNumber,customerReviewAverage,customerReviewCount,planPrice,onSale,salePrice,regularPrice,advertisedPriceRestriction"}else{j="http://api.bbyremix.bestbuy.com/v1/products"+encodeURIComponent("(active=true&orderable in(Available,PreOrder)&categoryPath.id="+b.products[d].id+")")+"?apiKey=3m9usrb57uywm3yuqgzesh73&format=json&sort=salesRankShortTerm.asc&show=marketplace,url,sku,image,name,modelNumber,customerReviewAverage,customerReviewCount,planPrice,onSale,salePrice,regularPrice,advertisedPriceRestriction"}a.ajax({dataType:"jsonp",jsonp:"callback",jsonpCallback:"snippetCallback"+c.attr("id").replace(/[^a-zA-Z 0-9]+/g,""),url:j,cache:true,success:function(e){var j='<ul class="tab-holder">';a.each(e.products,function(a){j+='<li class="tab-item"><div class="tab-image"><div><a href="'+e.products[a].url+'" name="&lid=tab_iamge_'+e.products[a].sku+'"><img src="'+e.products[a].image+'" /></a></div></div><h4><a href="'+e.products[a].url+'" name="&lid=tab_headline_'+e.products[a].sku+'">'+e.products[a].name.replace("<","").replace(">","")+"</a></h4><dl>";if(b.modelNumbers){if(e.products[a].modelNumber!=undefined){j=j+"<dt><strong>Model</strong>: </dt><dd>"+e.products[a].modelNumber+"</dd>"}}j=j+"<dt><strong>SKU</strong>: </dt><dd>"+e.products[a].sku+"</dd></dl>";if(e.products[a].customerReviewAverage!=null){var c=""+e.products[a].customerReviewAverage.toFixed(1);c=c.replace(".","_");j+='<div class="tab-reviews"><img src="http://images.bestbuy.com/BestBuy_US/images/global/misc/ratings_star_'+c+'.gif" /> (<a href="'+e.products[a].url+'" name="&lid=tab_reviews_'+e.products[a].sku+'">'+e.products[a].customerReviewCount+" reviews</a>)</div>"}else{j+='<div class="tab-reviews"><img src="http://images.bestbuy.com/BestBuy_US/images/global/misc/ratings_star_0_0.gif" /> <a href="'+e.products[a].url+'" name="&lid=tab_reviews_'+e.products[a].sku+'">Write a review</a></div>'}j+="<p>";if(!e.products[a].advertisedPriceRestriction){if(e.products[a].planPrice!=null){j+="<strong>Price: $"+e.products[a].planPrice.toFixed(2)+"*</strong>"}else{if(e.products[a].onSale){j+="<strong>Sale: $"+e.products[a].salePrice.toFixed(2)+"</strong>"}else{j+="Price: $"+e.products[a].regularPrice.toFixed(2)}}}else{j+=""}j+="</p></li>"});j+='<div class="clearer"></div></ul>';if(b.products[d].disclaimer!=null){c.find(".tab"+d+" .tab-scroll").after("<small>* "+b.products[d].disclaimer+"</small>")}c.find(".tab"+d+" .tab-loading").css("display","none");if(b.products[d].shop==undefined){if(b.products[d].store==undefined){c.find(".tab"+d+" .tab-scroll").before('<p class="tab-see"><a href="http://www.bestbuy.com/site/olstemplatemapper.jsp?id=pcat17071&type=page&ks=960&st=%2F&sc=Global&cp=1&sp=&qp=crootcategoryid%23%23-1%23%23-1~~q2f~~nc'+b.products[d].id+'%23%237%23%231hi&list=y&usc=All+Categories&nrp=15&iht=n">Shop all '+b.products[d].name.replace("<","").replace(">","")+' &#8250;</a></p><div class="clearer"></div>')}else{c.find(".tab"+d+" .tab-scroll").before('<p class="tab-see"><a href="'+b.products[d].store+'">Shop all '+b.products[d].name.replace("<","").replace(">","")+' &#8250;</a></p><div class="clearer"></div>')}}else{c.find(".tab"+d+" .tab-scroll").before('<p class="tab-see"><a href="'+b.products[d].shop+'">Shop all '+b.products[d].name.replace("<","").replace(">","")+' &#8250;</a></p><div class="clearer"></div>')}c.find(".tab"+d+" .tab-scroll").html(j+'<div class="clearer"></div>');if(b.carousel){h(d);g=true}if(b.tabs&&!f){i();f=true}else if(!b.tabs&&!f){var k=b.header.html()+" ";a.each(b.products,function(a){if(b.products.length==3){if(a==1){k=k+", "}if(a==2){k=k+", and "}}else if(b.products.length==2){if(a==1){k=k+" and "}}k=k+b.products[a].name.replace("<","").replace(">","")});b.header.html(k);f=true}},error:function(a){try{console.log("Something went wrong: "+a)}catch(b){}}})}function i(){if(!f){c.addClass("tab-tabbed")}c.find(".tab0 h3.tab").addClass("tab-active");var d=b.header.addClass("tab-header").width();var g=d+20;c.find("h3.tab").each(function(b){a(this).css({top:"-29px",left:g+"px"});g=g+a(this).width()+20;if(b>0){c.find(".tab"+b+" .tab-content").hide();c.find(".tab"+b+" h3").addClass("tab-default")}});c.find("h3.tab").hover(function(){a(this).addClass("tab-over")},function(){a(this).removeClass("tab-over")});c.find("h3.tab").click(function(){var b=a(this).parent().attr("class").replace("tab","");if(e[b]==undefined){j(b)}c.find(".tab-content").hide();c.find(".tab"+b+" .tab-content").show();c.find("h3.tab").removeClass("tab-active");c.find("h3.tab").addClass("tab-default");c.find(".tab"+b+" h3").addClass("tab-active")})}function h(a){if(!g){c.addClass("tab-carousel")}c.find(".tab"+a+" div.tab-content").append('<div class="tab-slider-wrapper"><div class="tab-slider-inside"><div class="tab-slider'+a+' tab-slider"></div></div></div>');var b=c.find(".tab"+a+" .tab-holder li.tab-item").size();var d=185*b;c.find(".tab"+a+" ul.tab-holder").css({width:d,overflow:"hidden"});if(d<=440){c.find(".tab"+a+" .tab-slider-wrapper").css("display","none")}c.find(".tab-slider"+a).slider({animate:true,change:function(b,e){var f=d-c.find(".tab"+a+" .tab-scroll").width();c.find(".tab"+a+" .tab-scroll").animate({scrollLeft:e.value*(f/100)},1e3)},slide:function(b,e){var f=d-c.find(".tab"+a+" .tab-scroll").width();c.find(".tab"+a+" .tab-scroll").attr({scrollLeft:e.value*(f/100)})}})}var b=d;var c=a(this);var e=new Array;var f=false;var g=false;c.addClass("tab-container");k()})}})})(jQuery)