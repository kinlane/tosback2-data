/*
Name: early.js
URL: http://qsf.cf.quoracdn.net/-1bcbe9e36e2bdb47.js
Generated: 1365811336891386
Files: /iesux.js, /settings.js, /log.js, /domain.js, /event.js, /errors.js, /w2.timing.js, /redirect.js, /win.load.js, /lazyCode.js, /early.js
*/
rec('package', 'early.js', 'start');require.install("iesux",function(a,b,c){if(navigator.appName==="Microsoft Internet Explorer"){var d=window,e=d.open;d.open=function(a,b,c){d.original_open=e;var f;try{f=d.original_open(a,b,c)}catch(g){f&&(f.name=b=Math.random().toString(36).slice(2)),f=d.original_open(a,b)}return f}}"bind"in Function.prototype||(Function.prototype.bind=function(a){var b=this;if(arguments.length<=1)return function(){return b.apply(a,arguments)};var c=Array.prototype.slice.call(arguments,1);return function(){return b.apply(a,arguments.length===0?c:c.concat(Array.prototype.slice.call(arguments)))}}),"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"startsWith"in String.prototype||(String.prototype.startsWith=function(a){return this.indexOf(a)===0}),"endsWith"in String.prototype||(String.prototype.endsWith=function(a){return this.match(a+"$")==a}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(a,b){b===undefined&&(b=0),b<0&&(b+=this.length),b<0&&(b=0);for(var c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(a,b){b===undefined&&(b=this.length-1),b<0&&(b+=this.length),b>this.length-1&&(b=this.length-1);for(b++;b-->0;)if(b in this&&this[b]===a)return b;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b,this[c],c,this)}),"map"in Array.prototype||(Array.prototype.map=function(a,b){var c=new Array(this.length);for(var d=0,e=this.length;d<e;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c}),"filter"in Array.prototype||(Array.prototype.filter=function(a,b){var c=[],d;for(var e=0,f=this.length;e<f;e++)e in this&&a.call(b,d=this[e],e,this)&&c.push(d);return c}),"every"in Array.prototype||(Array.prototype.every=function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0}),"some"in Array.prototype||(Array.prototype.some=function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1})}),require("iesux"),require.install("log",function(a,b,c){(function(c,d){var e=new Date,f=function(a){return Array.prototype.join.call(a," ")},g=function(a,b){for(var c in b)a[c]=b[c];return a},h=c.log=b.log=function(){return h.log.apply(h,arguments)},i=c.console,j=i||{},k=window&&window.navigator.appName=="Microsoft Internet Explorer";if(k){var l=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");l.exec(navigator.userAgent)!=null&&parseFloat(RegExp.$1)>=8?(j={},j.log=function(){i&&i.log&&i.log(f(arguments))},j.info=function(){i&&i.log&&i.info(f(arguments))},j.warn=function(){i&&i.log&&i.warn(f(arguments))},j.error=function(){i&&i.log&&i.error(f(arguments))}):j={}}var m=["log","info","warn","error"];for(var n in m){var o=m[n];j[o]||(j[o]=function(){})}var p=function(a){a===d&&(a=null),this.level=a,this.children={}};p.prototype.setLevel=function(a,b,c){var e=this.tryGetChild(a,c);if(e==null){b===d&&(b=null),this.level=b;return}e.child==null&&(this.children[e.name]=e.child=new p),e.child.setLevel(a,b,e.continueFrom),this.optimize(e.name)},p.prototype.removeChildren=function(a,b){var c=this.tryGetChild(a,b);if(c==null){this.children={};return}if(c.child==null)return;c.child.removeChildren(a,c.continueFrom),this.optimize(c.name)},p.prototype.optimize=function(a){var b=this.children[a];b!=null&&b.level==null&&b.childCount()==0&&delete this.children[a]},p.prototype.childCount=function(){var a=0;for(var b in this.children)this.children.hasOwnProperty(b)&&a++;return a},p.prototype.getLevel=function(a,b){var c=this.tryGetChild(a,b);if(c==null||c.child==null)return this.level;var d=c.child.getLevel(a,c.continueFrom);return d!==null?d:this.level},p.prototype.print=function(a,b,c){var d=this.level==null?c:this.level;h.console.log(a+b+": "+h.level.toString(d)+(this.level==null?" (inherited)":""));for(b in this.children){var e=this.children[b];e.print(a+"  ",b,d)}},p.prototype.tryGetChild=function(a,b){if("string"!=typeof a)throw new Error("Scope must be string.");b=b||0;if(b>=a.length)return null;var c=a.indexOf(".",b),d=null;return c<0?(c=a.length,d=a.substr(b,c-b)):(d=a.substr(b,c-b),c++),{name:d,child:this.children[d],continueFrom:c}};var q=function(a,b,c){this.time=new Date,this.level=a,this.scope=b,this.data=c,this.message=f(c)};q.prototype.toString=function(){return h.level.toString(level).concat(" ",this._timeToString(),", ",this.scope,": ",message)},q.prototype.print=function(){var a=this.level=="trace"?"log":this.level;h.console[h.level.toString(a)].apply(h.console,[this._timeToString()+", "+this.scope+":"].concat(this.data))},q.prototype.checkScope=function(a){return this.scope==a||this.scope.startsWith(a+".")},q.prototype._timeToString=function(){return((this.time-e)/1e3).toString()+"s"};var r=function(a){this.list=a||[]};r.prototype.toString=function(){return this.list.join("\r\n")},r.prototype.print=function(){for(var a in this.list)this.list[a].print()},r.prototype.add=function(a){return this.list.push(a)},r.prototype.count=function(){return this.list.length},r.prototype.getLast=function(){return this.list.length==0?null:this.list[this.list.length-1]},r.prototype.clear=function(){this.list=[]},r.prototype.filter=function(a,b){if("function"==typeof a){var c=Array.prototype.filter.apply(this.list,arguments);return new r(c)}b===d&&"string"==typeof a&&(b=a,a=null);var e="number"==typeof a;if(!e){var f={};for(var g in a)f[a[g]]=a[g];a=f}var c=[];for(var g in this.list){var h=this.list[g];if(a!=null&&(e?h.level<a:!(h.level in a)))continue;if(b!=null&&!h.checkScope(b))continue;c.push(h)}return new r(c)};var s={enabled:null,outputEnabled:!0,entries:new r,level:{none:0,trace:1,log:2,info:3,warn:4,error:5,toString:function(a){switch(a){case 0:return"none";case 1:return"trace";case 2:return"log";case 3:return"info";case 4:return"warn";case 5:return"error";default:throw new Error("Unknown log.level value.")}}},scopes:{root:new p(0),cache:{},setLevel:function(a,b){this.root.setLevel(a,b),this.cache={}},resetLevel:function(a,b){this.root.removeChildren(a),this.root.setLevel(a,b),this.cache={}},removeChildren:function(a){this.root.removeChildren(a),this.cache={}},getLevel:function(a){return this.cache[a]==null&&(this.cache[a]=this.root.getLevel(a)||h.level.none),this.cache[a]},hasLevel:function(a,b){var c=this.getLevel(a);return c<=b&&c!=h.level.none},print:function(a){h.console.log("Log scopes:"),this.root.print("  ","(root)")}},enabledImpl:{console:j,trace:function(a){var b=this._tryAddLogEntry(h.level.log,a,Array.prototype.slice.call(arguments,1));return b==null?null:(h.outputEnabled&&(h.console.trace?h.console.trace():h.console.log.call(h.console,("Stack trace:\r\n"+h._getStackTrace()).replace("\r\n","\r\n  "))),b)},log:function(a){return this._tryAddLogEntry(h.level.log,a,Array.prototype.slice.call(arguments,1))},info:function(a){return this._tryAddLogEntry(h.level.info,a,Array.prototype.slice.call(arguments,1))},warn:function(a){return this._tryAddLogEntry(h.level.warn,a,Array.prototype.slice.call(arguments,1))},error:function(a){return this._tryAddLogEntry(h.level.error,a,Array.prototype.slice.call(arguments,1))},_tryAddLogEntry:function(a,b,c){if(!h.scopes.hasLevel(b,a))return null;var d=new q(a,b,c);return h.entries.add(d),h.outputEnabled&&d.print(),d},_getStackTrace:function(){var a=[],b=!1;try{e.dont.exist+=0}catch(c){if(c.stack){var d=c.stack.split("\n");for(var e=0,f=d.length;e<f;e++)d[e].match(/^\s*[A-Za-z0-9\-_\$]+\(/)&&a.push(d[e]);a.shift(),b=!0}else if(window&&window.opera&&c.message){var d=c.message.split("\n");for(var e=0,f=d.length;e<f;e++)if(d[e].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){var g=d[e];d[e+1]&&(g+=" at "+d[e+1],e++),a.push(g)}a.shift(),b=!0}}if(!b){var h=arguments.callee.caller;while(h){var i=h.toString(),j=i.substring(i.indexOf("function"),i.indexOf("{"))||"anonymous";a.push(j),h=h.caller}}return a.join("\r\n")}},disabledImpl:{console:{log:function(){},trace:function(){},info:function(){},warn:function(){}},log:function(){},trace:function(){},info:function(){},warn:function(){}},enable:function(a){a=a==null?!0:a;if(h.enabled===a)return;(a||h.enabled!==null)&&j.log("Log is "+(a?"enabled.":"disabled.")),h.enabled=a;var b=a?h.enabledImpl:h.disabledImpl;g(h,b)},disable:function(){h.enable(!1)},enableOutput:function(a){a=a==null?!0:a,h.outputEnabled=a},disableOutput:function(){h.enableOutput(!1)},resetSettings:function(){var b=a("settings");h.enable(b==null?!1:b.client_side_logging||!1),h.scopes.resetLevel("",h.level.error),h.scopes.resetLevel("lazyCode",h.level.trace),h.scopes.resetLevel("win.load",h.level.trace),h("log.resetSettings","Settings are reset to default.")}};g(h,s),h.resetSettings()})(this)});try{document.domain=/quora\.com$/i.test(location.host)?"quora.com":document.domain}catch(x){}require.install("event",function(a,b,c){function e(a,b,c){var e;return a.addEventListener?a.addEventListener(b,e=function(a){d&&d.enabled&&d("event.add","On "+a.type+" (case 1), invoking",c),c.call(this,a)===!1&&(a.preventDefault(),a.stopPropagation())},!1):a.attachEvent&&a.attachEvent("on"+b,e=function(b){return b=b||window.event,d&&d.enabled&&d("event.add","On "+b.type+" (case 2), invoking",c),c.call(b.srcElement||a,b)}),e}var d=window.log;b.add=e,b.remove=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}}),require.install("errors",function(a,b,c){function j(){while(e&&f<d.length)e(d[f++])}var d=[],e,f=0,g=10,h=a("event"),i=h.add(window,"error",function(a){--g<0?h.remove(window,"error",i):(d.push(a),j())});b.setCallback=function(a){e=a,j()}}),require.install("w2.timing",function(a,b,c){var d={start:+(new Date)};b.timing=d}),require.install("redirect",function(a,b,c){var d=window,e=document,f=a("settings"),g="smar=1",h=30,i=new RegExp("\\b"+g+"\\b"),j=d.location.href,k=d.location.domain,l=d.location.pathname,m=+(new Date);f.mobileRedirect&&!i.test(e.cookie)&&!e.webKitHidden&&(setTimeout(function(){+(new Date)-m<900?e.cookie=g+"; expires="+(new Date(new Date-h*-864e5)).toUTCString()+"; path=/"+"; domain=.quora.com":e.cookie=g+"; expires="+(new Date(new Date- -864e5)).toUTCString()+"; path="+l,i.test(e.cookie)&&(d.location=j)},1e3),d.location=f.appURL)}),require.install("win.load",function(a,b,c){var d=this,e=[],f=!1,g=!1;a("event").add(d,"load",function(){!g&&d.log&&log.enabled&&(log("win.load","DOM is ready."),g=!0),setTimeout(function(){f=!0;for(var a=0,b=e.length;a<b;++a)e[a].call(d);e.length=0},100)}),b.add=function(a){f?a.call(d):e.push(a)}}),require.install("lazyCode",function(a,b,c){(function(a,c){var d=a.log;b=a.lazyCode={queue:[],enabled:!1,flushTimeout:null,setFlushTimeout:function(a,b){this.flushTimeout!=null&&(clearTimeout(this.flushTimeout),this.flushTimeout=null);var c=this;a!=null&&(this.flushTimeout=setTimeout(function(){c.flush(b)},a))},enqueue:function(a){if(this.enabled){var b="unnamed";"function"!=typeof a&&(b=a.name),d&&d.enabled&&d("lazyCode","Enqueuing '"+b+"'."),this.queue.push(a)}else this.execute(a)},flush:function(a){this.setFlushTimeout(null),d&&d.enabled&&d("lazyCode",a==null?"Flush.":"Flush ("+a+").");while(this.queue.length!=0)try{this.execute(this.queue.shift())}catch(b){throw this.flush('continuing on exception: "'+b.toString()+'"'),b}},execute:function(b){var c="unnamed";"function"!=typeof b&&(c=b.name,b=b.code);var e=new Date;b.call(a),d&&d.enabled&&d("lazyCode","Executed '"+c+"': "+((new Date-e)/1e3).toString()+"ms.")}}})(this)}),require("iesux"),require("log"),require("domain"),require("errors"),require("w2.timing"),require("redirect"),require("win.load"),require("lazyCode");rec('package', 'early.js', 'finish');