/*
Name: early.js
URL: http://qsf.cf.quoracdn.net/-b44d046d9ce29805.js
Generated: 1355887149912967
Files: /settings.js, /log.js, /domain.js, /event.js, /errors.js, /iesux.js, /w2.timing.js, /redirect.js, /win.load.js, /lazyCode.js, /early.js
*/
rec('package', 'early.js', 'start');require.install("log",function(a,b,c){(function(c,d){var e=c.console,f=e||{},g=window&&window.navigator.appName=="Microsoft Internet Explorer";if(g){var h=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(h.exec(navigator.userAgent)!=null&&parseFloat(RegExp.$1)>=8){f={};var i=function(a){return Array.prototype.join.call(a," ")};f.log=function(){e&&e.log&&e.log(i(arguments))},f.info=function(){e&&e.log&&e.info(i(arguments))},f.warn=function(){e&&e.log&&e.warn(i(arguments))},f.error=function(){e&&e.log&&e.error(i(arguments))}}else f={}}var j=["log","info","warn","error"];for(var k in j){var l=j[k];f[l]||(f[l]=function(){})}var m=function(a,b){for(var c in b)a[c]=b[c];return a},n=new Date,o=function(a){a===d&&(a=null),this.level=a,this.children={}};o.prototype.setLevel=function(a,b,c){var e=this.tryGetChild(a,c);if(e==null){b===d&&(b=null),this.level=b;return}e.child==null&&(this.children[e.name]=e.child=new o),e.child.setLevel(a,b,e.continueFrom),this.optimize(e.name)},o.prototype.removeChildren=function(a,b){var c=this.tryGetChild(a,b);if(c==null){this.children={};return}if(c.child==null)return;c.child.removeChildren(a,c.continueFrom),this.optimize(c.name)},o.prototype.optimize=function(a){var b=this.children[a];b!=null&&b.level==null&&b.childCount()==0&&delete this.children[a]},o.prototype.childCount=function(){var a=0;for(var b in this.children)this.children.hasOwnProperty(b)&&a++;return a},o.prototype.getLevel=function(a,b){var c=this.tryGetChild(a,b);if(c==null||c.child==null)return this.level;var d=c.child.getLevel(a,c.continueFrom);return d!==null?d:this.level},o.prototype.dump=function(a,b,c){var d=this.level==null?c:this.level;p.console.log(a+b+": "+p.level.toString(d)+(this.level==null?" (inherited)":""));for(b in this.children){var e=this.children[b];e.dump(a+"  ",b,d)}},o.prototype.tryGetChild=function(a,b){if("string"!=typeof a)throw new Error("Scope must be string.");b=b||0;if(b>=a.length)return null;var c=a.indexOf(".",b),d=null;return c<0?(c=a.length,d=a.substr(b,c-b)):(d=a.substr(b,c-b),c++),{name:d,child:this.children[d],continueFrom:c}};var p=c.log=b=function(){return p.log.apply(p,arguments)},q={enabled:null,level:{none:0,trace:1,log:2,info:3,warn:4,error:5,toString:function(a){switch(a){case 0:return"none";case 1:return"trace";case 2:return"log";case 3:return"info";case 4:return"warn";case 5:return"error";default:throw new Error("Unknown log.level value.")}}},scopes:{root:new o(0),cache:{},setLevel:function(a,b){this.root.setLevel(a,b),this.cache={}},resetLevel:function(a,b){this.root.removeChildren(a),this.root.setLevel(a,b),this.cache={}},removeChildren:function(a){this.root.removeChildren(a),this.cache={}},getLevel:function(a){return this.cache[a]==null&&(this.cache[a]=this.root.getLevel(a)||p.level.none),this.cache[a]},hasLevel:function(a,b){var c=this.getLevel(a);return c<=b&&c!=p.level.none},dump:function(a){p.console.log("Log scopes:"),this.root.dump("  ","(root)")}},_getPrefix:function(a){return((new Date-n)/1e3).toString()+"ms, "+a+":"},levelImpl:{console:f,trace:function(a){if(!p.scopes.hasLevel(a,p.level.trace))return;var b=p._getPrefix(a);arguments.length>1&&(arguments[0]=b,p.console.log.apply(p.console,arguments)),p.console.trace?p.console.trace():p.console.log.call(p.console,b,("Stack trace:\r\n"+p._getStackTrace()).replace("\r\n","\r\n  "))},log:function(a){if(!p.scopes.hasLevel(a,p.level.log))return;arguments[0]=p._getPrefix(a),p.console.log.apply(p.console,arguments)},info:function(a){if(!p.scopes.hasLevel(a,p.level.info))return;arguments[0]=p._getPrefix(a),p.console.info.apply(p.console,arguments)},warn:function(a){if(!p.scopes.hasLevel(a,p.level.warn))return;arguments[0]=p._getPrefix(a),p.console.warn.apply(p.console,arguments)},error:function(a){if(!p.scopes.hasLevel(a,p.level.error))return;arguments[0]=p._getPrefix(a),p.console.error.apply(p.console,arguments)},_getStackTrace:function(){var a=[],b=!1;try{e.dont.exist+=0}catch(c){if(c.stack){var d=c.stack.split("\n");for(var e=0,f=d.length;e<f;e++)d[e].match(/^\s*[A-Za-z0-9\-_\$]+\(/)&&a.push(d[e]);a.shift(),b=!0}else if(window&&window.opera&&c.message){var d=c.message.split("\n");for(var e=0,f=d.length;e<f;e++)if(d[e].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){var g=d[e];d[e+1]&&(g+=" at "+d[e+1],e++),a.push(g)}a.shift(),b=!0}}if(!b){var h=arguments.callee.caller;while(h){var i=h.toString(),j=i.substring(i.indexOf("function"),i.indexOf("{"))||"anonymous";a.push(j),h=h.caller}}return a.join("\r\n")}},disabledImpl:{console:{log:function(){},trace:function(){},info:function(){},warn:function(){}},log:function(){},trace:function(){},info:function(){},warn:function(){}},enable:function(a){a=a==null?!0:a;if(p.enabled===a)return;(a||p.enabled!==null)&&f.log("Log is "+(a?"enabled.":"disabled.")),p.enabled=a;var b=a?p.levelImpl:p.disabledImpl;m(p,b)},disable:function(){p.enable(!1)}};m(p,q);var r=a("settings");p.enable(r==null?!1:r.client_side_logging||!1),p.scopes.resetLevel("",p.level.trace),p.scopes.setLevel("jquery.Event",p.level.none),p.scopes.setLevel("jquery.dispatch",p.level.none),p.scopes.setLevel("jquery.mouse*",p.level.none),p.scopes.setLevel("event.add",p.level.none),p.scopes.setLevel("webnode2.Component.bindEvent",p.level.none)})(this)});try{document.domain=/quora\.com$/i.test(location.host)?"quora.com":document.domain}catch(x){}require.install("event",function(a,b,c){function e(a,b,c){var e;return a.addEventListener?a.addEventListener(b,e=function(a){d&&d.enabled&&d("event.add","On "+a.type+" (case 1), invoking",c),c.call(this,a)===!1&&(a.preventDefault(),a.stopPropagation())},!1):a.attachEvent&&a.attachEvent("on"+b,e=function(b){return b=b||window.event,d&&d.enabled&&d("event.add","On "+b.type+" (case 2), invoking",c),c.call(b.srcElement||a,b)}),e}var d=window.log;b.add=e,b.remove=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}}),require.install("errors",function(a,b,c){function j(){while(e&&f<d.length)e(d[f++])}var d=[],e,f=0,g=10,h=a("event"),i=h.add(window,"error",function(a){--g<0?h.remove(window,"error",i):(d.push(a),j())});b.setCallback=function(a){e=a,j()}}),require.install("iesux",function(a,b,c){if(navigator.appName==="Microsoft Internet Explorer"){var d=window,e=d.open;d.open=function(a,b,c){d.original_open=e;try{var d=d.original_open(a,b,c)}catch(f){d&&(d.name=b=Math.random().toString(36).slice(2)),d=d.original_open(a,b)}return d},"bind"in Function.prototype||(Function.prototype.bind=function(a){var b=this;if(arguments.length<=1)return function(){return b.apply(a,arguments)};var c=Array.prototype.slice.call(arguments,1);return function(){return b.apply(a,arguments.length===0?c:c.concat(Array.prototype.slice.call(arguments)))}}),"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(a,b){b===undefined&&(b=0),b<0&&(b+=this.length),b<0&&(b=0);for(var c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(a,b){b===undefined&&(b=this.length-1),b<0&&(b+=this.length),b>this.length-1&&(b=this.length-1);for(b++;b-->0;)if(b in this&&this[b]===a)return b;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b,this[c],c,this)}),"map"in Array.prototype||(Array.prototype.map=function(a,b){var c=new Array(this.length);for(var d=0,e=this.length;d<e;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c}),"filter"in Array.prototype||(Array.prototype.filter=function(a,b){var c=[],d;for(var e=0,f=this.length;e<f;e++)e in this&&a.call(b,d=this[e],e,this)&&c.push(d);return c}),"every"in Array.prototype||(Array.prototype.every=function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0}),"some"in Array.prototype||(Array.prototype.some=function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1})}}),require("iesux"),require.install("w2.timing",function(a,b,c){var d={start:+(new Date)};b.timing=d}),require.install("redirect",function(a,b,c){var d=window,e=document,f=a("settings"),g="suppress_redirect_to_mobile_app=1",h=30,i=new RegExp("\\b"+g+"\\b"),j=d.location.href;f.mobileRedirect&&!i.test(e.cookie)&&(setTimeout(function(){e.cookie=g+"; expires="+(new Date(new Date-h*-864e5)).toUTCString()+"; path=/",i.test(e.cookie)&&(d.location=j)},1e3),d.location=f.appURL)}),require.install("win.load",function(a,b,c){var d=this,e=[],f=!1,g=!1;a("event").add(d,"load",function(){!g&&d.log&&log.enabled&&(log("win.load","DOM is ready."),g=!0),setTimeout(function(){f=!0;for(var a=0,b=e.length;a<b;++a)e[a].call(d);e.length=0},100)}),b.add=function(a){f?a.call(d):e.push(a)},b.add(function(){})}),require.install("lazyCode",function(a,b,c){(function(a,c){var d=a.log;b=a.lazyCode={queue:[],enabled:!1,flushTimeout:null,setFlushTimeout:function(a,b){this.flushTimeout!=null&&(clearTimeout(this.flushTimeout),this.flushTimeout=null);var c=this;a!=null&&(this.flushTimeout=setTimeout(function(){c.flush(b)},a))},enqueue:function(a){if(this.enabled){var b="unnamed";"function"!=typeof a&&(b=a.name),d&&d.enabled&&d("lazyCode","Enqueuing '"+b+"'."),this.queue.push(a)}else this.execute(a)},flush:function(a){this.setFlushTimeout(null),d&&d.enabled&&d("lazyCode",a==null?"Flush.":"Flush ("+a+").");while(this.queue.length!=0)try{this.execute(this.queue.shift())}catch(b){throw this.flush('continuing on exception: "'+b.toString()+'"'),b}},execute:function(b){var c="unnamed";"function"!=typeof b&&(c=b.name,b=b.code);var e=new Date;b.call(a),d&&d.enabled&&d("lazyCode","Executed '"+c+"': "+((new Date-e)/1e3).toString()+"ms.")}}})(this)}),require("log"),require("domain"),require("errors"),require("iesux"),require("w2.timing"),require("redirect"),require("win.load"),require("lazyCode");rec('package', 'early.js', 'finish');