jQuery.countryLanguageSelector=function(){var self=this;jQuery("#aa-language-select").show();self.menu=jQuery("#aa-language-select","#aa-masthead");jQuery(".aa-language-select-select, .aa-close",self.menu).click(function(e){e.preventDefault();jQuery("#aa-language-select-tab").toggleClass("active");jQuery(".aa-language-select-select").toggleClass("aa-pipe-right");self.toggleLocale();});jQuery("#aa-country-selector").change(function(){jQuery("select#aa-language-selector").html("");CountryLanguageSelectAjaxUtils.languageLookup(this.value,function(response){var data=eval("("+response+")");values=data.data.languages;options="";for(var i=0;i<values.length;i++){options+='<option value="'+values[i].code+'">'+values[i].name+"</option>";}jQuery("select#aa-language-selector").html(options);self.changeAlert();});});jQuery("#aa-language-selector").change(function(){self.changeAlert();});jQuery("#splashForm").submit(function(){url=jQuery("select#aa-language-selector",this).val();jQuery("#splashSelectedCountry",this).val(self.getParameter(url,"locale"));jQuery("#splashUrl",this).val(self.getParameter(url,"url"));jQuery("#splashGeoRedirect",this).val(self.getParameter(url,"georedirect"));});self.getParameter=function(url,name){return decodeURIComponent((RegExp(name+"=(.+?)(&|$)").exec(url)||[,""])[1]);};self.toggleLocale=function(){if(jQuery(".aa-meta-nav-dropDown",self.menu).css("display")=="none"){jQuery(".aa-meta-nav-dropDown",self.menu).show();}else{jQuery(".aa-meta-nav-dropDown",self.menu).hide();}};self.changeAlert=function(){if(self.getParameter(jQuery("select#aa-language-selector").val(),"locale")!=jQuery("input#currentLocale").val()){jQuery("#locale-change-alert").slideDown();}else{jQuery("#locale-change-alert").hide("fast");}};};