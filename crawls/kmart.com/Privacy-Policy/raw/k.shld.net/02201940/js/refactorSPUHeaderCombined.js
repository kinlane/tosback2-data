/*  js/refactorSPU/KmartSPURefactorHeader.js::Rev No::557651,shared/js/refactorSPU/SPURefactorGeoLocator.js::Rev No::488191,js/refactorSPU/kmartHeader.js::Rev No::556465,shared/js/refactorSPU/jquery.animate-shadow-min.js::Rev No::364636,shared/js/refactorSPU/jquery.animation.easing.js::Rev No::364636   */
/*  #RESOURCELIST_START#js/refactorSPU/KmartSPURefactorHeader.js,shared/js/refactorSPU/SPURefactorGeoLocator.js,js/refactorSPU/kmartHeader.js,shared/js/refactorSPU/jquery.animate-shadow-min.js,shared/js/refactorSPU/jquery.animation.easing.js   #RESOURCELIST_END# */

 /*   /opt/SVNBAAD/SVNBRANCH/ECOM_REL_06-Feb-2013/wcs-static/StaticWeb/WebContent/StaticContent/Kmart/js/refactorSPU/KmartSPURefactorHeader.js:557651   */
var COOKIE_RSPU="RSPULocInfo";var COOKIE_ZIPCODE_10151="zipCode10151";var HIDE_LOCATION_CAPTURE_HEADER_ONLOAD="hideLocationCapture";var DEFAULT_LOCATION_CAPTURE_TEXT="Enter City,State or ZIP Code";var COOKIE_NAME="pickupStoreId10151";var COOKIE_ZIPCODE="zipCode";var address;var resultCardLocationCapture=false;var zipFromGoogleCall=false;var blockAjaxCall=false;var zipcodeEntered=false;var SPU_ZONE="RSPUZone";var locationChanged=false;var pageLoadHideHeaderPopUp=true;var address;var pageToBeReloadForUnitNo=false;onLogin();function onLogin(){var e=$.cookie("LOGIN_PREFERRED_COOKIE");if(!!e){$.cookie("LOGIN_PREFERRED_COOKIE",null,{path:"/"});var d=e.split("-");var b=d[0];var c=d[1];var a=d[2];updateLocationInfoLoginFlow()}}function scrollToReviewsSection(c){if(window.location.href.indexOf("#ReviewsSection")>-1){var a=$("#customerReviews");var b=$("#customerReviewsTab.prodTabs");if(a.length>0){a.siblings().removeClass("prodTabsShown");a.addClass("prodTabsShown")}if(b.length>0){b.siblings().removeClass("prodTabsAct");b.addClass("prodTabsAct")}var d="";if(b.length>0){scrollLoc=$("#customerReviewsTab")}else{scrollLoc=$("div.readReviewTop")}if(scrollLoc.length>0){setTimeout(function(){scrollToDiv(scrollLoc,"25")},c)}}}function lmpBrowseSPU(){var a=false;if(typeof isLmpBrowseSPU!="undefined"&&isLmpBrowseSPU!=null&&isLmpBrowseSPU=="true"){a=true}return a}function signInCall(a,c,b){trackClickAction(a,"Sign In-Zip","Sign In");fnShowLoginModal(c,b)}function closePopUpBind(){$("#filterFlyCloseBtn").click(function(){if(pageToBeReloadForUnitNo==true){pageToBeReloadForUnitNo=false;location.href=location.href;headerPopUpFlag=false}})}$(document).ready(function(){var b=FormatRSPUCookie.getSPURefactorCookie().zipCode;var a=getStoreId();if(jQuery("div#narrowByFilter div.subFilter a#spuEligible").is(":visible")&&a=="10151"&&typeof b!="undefined"&&b!=""&&b!=null){$("div#narrowByFilter div.subFilter a#spuEligible").append("<b> near "+b+" </b>")}});function updateLocationInfoLoginFlow(){var rspuCookie=$.cookie(COOKIE_RSPU);if(typeof rspuCookie!="undefined"&&null!=rspuCookie){rspuCookie=eval("("+rspuCookie+")");zipCode=rspuCookie.zipCode;if(typeof zipCode!="undefined"&&zipCode!=""){$.ajax({type:"GET",url:"/shc/s/RefactorSPUZipcodeHelperCmd"+(location.protocol==="https:"?"https":"")+"?isCookie=true",data:"zipcode="+zipCode+"&shcapiBypassSSO=true&storeId=10151",success:function(regionalData){regionalData=eval("("+regionalData+")");if(regionalData.zipCode!=""&&typeof regionalData.zipCode!="undefined"){RSPULocationDetails=new FormatRSPUCookie.RSPULocation();RSPULocationDetails.userLocation=regionalData.zipCode;RSPULocationDetails.zipCode=regionalData.zipCode;RSPULocationDetails.deliveryCharge=regionalData.deliveryCharge;RSPULocationDetails.latitude=regionalData.latitude;RSPULocationDetails.longitude=regionalData.longitude;setOmnitureForUserZipCode(RSPULocationDetails.zipCode);var spuZone=regionalData.spuZone;if(spuZone!=null&&spuZone!="0"){$.cookie(SPU_ZONE,spuZone,{path:"/",expires:365})}FormatRSPUCookie.setSPURefactorCookie(RSPULocationDetails);zipFromGoogleCall=false;if(typeof SAVE_PREF_STORE_TO_PROFILE!="undefined"&&SAVE_PREF_STORE_TO_PROFILE=="true"){updatePreferredStore()}else{if(typeof fetchStoreResults!="undefined"){fetchStoreResults()}}}}})}}}function updatePreferredStore(){var b="";if(window.location.protocol=="http:"){b="UserPreferredStoresCntrlCmdhttp"}else{b="UserPreferredStoresCntrlCmd"}var a=$.cookie("preferredStore");if(a!=null&&a!=""){url=b+"?isCookie=true&storeId=10151&key=UPDATE&storeUnitNumber="+a+"&isfromDashBoard=fromProfile";$.ajax({url:url,success:function(){if(typeof fetchStoreResults!="undefined"){fetchStoreResults()}}})}}function setOmnitureForUserZipCode(a){var b;if(resultCardLocationCapture==false){b="SPU Header Set Location"}else{b="SPU ResultCard Set Location"}if(typeof s!="undefined"&&s!=null){s.linkTrackVars="prop12,eVar17";s.eVar17=a;s.prop12="Header > SPU > Local Availability Go";s.tl(true,"o",b)}}var leftNavLocationCapture=false;var LocalModal=(function(i){var c=173,l=0,f=(i("body").width()-i(window).width())+l,o=false,e="loc_shcModal-closer",d,h=function(){var q=[],r;q.push("<div id='loc_shcModal' class='loc_shcModal'>");q.push("<div id='shcModalWrapper1' class='loc_shcModal-wrapper clearfix'>");q.push("<div id='loc_navWrapper'>");q.push("<div id='loc_shcModal-closer' title='close'></div>");q.push("</div>");q.push("<div id='loc_shcModal-content'></div>");q.push("</div>");q.push("<div id='shcModalWrapper2' class='loc_shcModal-wrapper clearfix'>");q.push("<div id='loc_navWrapper'>");q.push("<div id='loc_shcModal-closer' title='close'></div>");q.push("</div>");q.push("<div id='loc_shcModal-contentwrap2'></div>");q.push("</div>");q.push("<div id='shcModalWrapper3' class='loc_shcModal-wrapper clearfix'>");q.push("<div id='loc_navWrapper'>");q.push("<div id='loc_shcModal-closer' title='close'></div>");q.push("</div>");q.push("<div id='loc_shcModal-contentwrap3'></div>");q.push("</div>");q.push("</div>");r=q.join("");return r},n=h(),m=function(){i("#"+e).bind("click",function(){i.cookie(HIDE_LOCATION_CAPTURE_HEADER_ONLOAD,"true",{expires:365});o=false;if(!i("#userCreatedAddress").length&&!i("#userAddress").length){j()}if(i("#shcModalWrapper1 input#addressField").val()==DEFAULT_LOCATION_CAPTURE_TEXT){var q="Header > SPU > Local Availability Close";s.linkTrackVars="prop12";s.prop12=q;s.tl(i(this),"o",q)}attachEventListeners()})},g=function(q){var t=new Date(),r=escape(t.toString()),u=q||"";if(u){u=" "+u}},b=function(){i("#loc_shcModal-content").load(g(),function(){})},k=function(){i("#locationSuggestions").remove();i("#loc_shcModal-contentwrap2 #findStore1").remove();i("#loc_shcModal-contentwrap2 > div > div > div > div").append('<button id="findStore1" value="" style = "display:none" type="hidden"></button></div>'+'<div id="locationSuggestions"><div><strong class="important"><br>Did you mean...</strong><br></div></div><script type="text/javascript">MyLocation.deferedFunctions.initAddress();<\/script></div>');i("#locationSuggestions").css({left:i("#shcModalWrapper2 #ffmentNewAddy").position().left});var q=isSameUnit();if(!q&&getUserStatus()=="R"){blockAjaxCall=true}else{blockAjaxCall=false}},a=function(){f=i(window).width()-(i("#wrap").width()+15);if(o){return}o=true;if(!i("#loc_shcModal").length){i("body").append(i(n))}i("#loc_shcModal-content").html('<img src="'+jspStoreImgDir+'images/refactorSPU/mgLoaderGifSm.gif" class="ajaxLoader" alt="Loading..." title="Processing..." />');var w=FormatRSPUCookie.getSPURefactorCookie().userLocation;var v=true;var r="";if(w==""){w=DEFAULT_LOCATION_CAPTURE_TEXT;v=false;r="shcForm shcForm_Text shcEmpty"}var t="Type &quot;Error&quot; for error, &quot;My Address&quot; for valid address, and any address for suggestions.";var q="";if((typeof i.cookie("s_r")=="undefined")||(null==i.cookie("s_r"))||(i.cookie("s_r")!="s_r_Y")){q="<a onclick=\"trackClickAction(this, 'Sign In-Zip', 'Sign In');\" href=\"javascript:$('#loc_shcModal-closer').trigger('click');fnShowLoginModal('LOGIN','/shc/s/LogonForm?langId=-1&storeId="+getAkamaiStoreId()+"&catalogId="+getAkamaiCatalogId()+'&URL=TopCategoriesDisplay&screenName=LOGIN\');" id="signInLink" class="signInLink">Sign In</a>'}i("#loc_shcModal-content").html('<div id="getLocalAvailability"><h4>Local Availability</h4>'+'<p>To get the best prices, local products and the quickest delivery options, let us know where you are. Or<strong><a href="javascript:;"> '+q+"</strong></p>"+'<form id="customerLocation" action="javascript:;" method="get"><div><span class="labeledField"><input type="text" id="addressField" class="'+r+'" value="'+w+'"'+"onblur=\"if (this.value==''){this.value='Enter City,State or ZIP Code';}\" "+"onfocus=\"if(this.value=='City, State or ZIP'){this.value='';}\"/>"+'<button id="findStore" value="Go" type="submit">Go</button></span></div>'+"</form>"+'<div id="locationSuggestions"><div><strong class="important"><br>Did you mean...</strong><br></div></div><script type="text/javascript">MyLocation.deferedFunctions.initAddress();<\/script></div>');
var u=i("input#addressField");u.focus(function(){u.removeClass("addressLabel");if(v==false){if(u.val()=="Enter City,State or ZIP Code"){u.val("")}}});u.blur(function(){u.addClass("addressLabel");if(v==false){if(u.val()===""){u.val("Enter City,State or ZIP Code")}}});i("#loc_shcModal").css({right:f,top:"-90px"}).shcModal({layer:true,curtainOpacity:0,modalClose:e,baseZIndex:9997}).stop().animate({top:c},{queue:false,duration:"slow",easing:"swing"});m();setTimeout(function(){b()},0)},p=function(){i("#loc_shcModal-closer").trigger("click");if(i("#userAddress").length){}},j=function(){var q=new userLocationData();var r=FormatRSPUCookie.getSPURefactorCookie().userLocation;if(r==""){q.address="Enter City,State or ZIP Code"}else{q.address=r}MyLocation.attachUserAddress(q);if(q.address=="Enter City,State or ZIP Code"){trackLocation(i(this),"No Location")}else{address=q.address}if(pageLoadHideHeaderPopUp==false){LocalModal.locationModal()}pageLoadHideHeaderPopUp=false;attachEventListeners();i("#loc_shcModal").hide()};return{setCancel:m,locationModal:a,locationModalWrapperTwo:k,close:p,locationModalCloser:e,createAjaxUrl:g,attachAddressUsingCookieValue:j}}(jQuery));function hideLocalAvailabiltyHeaderPopUp(){var a=$("body").attr("id");if(a=="home"||a=="MML_vertical"||a=="vertical"||a=="category"||a=="subcategory"||a=="keysearch"||a=="product"||a=="productOptions"||a=="shoppingcart"){return true}else{return false}}var MyLocation=(function($){var addressCreated=false,locationSuggestions,t,CSS,RSPULocationDetails,fieldOffsetTop,fieldLeft,addressFld,addressField,init=function(){var hideLocationCaptureHeader=$.cookie(HIDE_LOCATION_CAPTURE_HEADER_ONLOAD);var zipCodeAddress=FormatRSPUCookie.getSPURefactorCookie().userLocation;var tempBodyID=$("body").attr("id");if(tempBodyID=="productOptions"||tempBodyID=="shoppingcart"){hideLocationCaptureHeader="true"}if(hideLocalAvailabiltyHeaderPopUp()){if(hideLocationCaptureHeader!="true"&&zipCodeAddress==""||null==zipCodeAddress){LocalModal.locationModal();if(typeof scrollToReviewsSection=="function"){scrollToReviewsSection(1000)}}else{LocalModal.attachAddressUsingCookieValue();if(typeof scrollToReviewsSection=="function"){scrollToReviewsSection(800)}}}},headerLocationChanged=function(){locationChanged=true},resetAjaxCall=function(){blockAjaxCall=false},submitCustomerLocation=function(e){var filterChangeAddress=$("#filterChangeAddress_"),editLocation,errorMessage="Enter City,State or ZIP Code in the field above.";var noZip="Not Provided";s.linkTrackVars="eVar17";s.eVar17=noZip;s.tl($(this),"o",noZip);if($(e.target).find("#addressField").length>0){addressFld=$(e.target).find("#addressField")}else{if(($(e.target).find("#addressField_leftNav").length>0)){addressFld=$(e.target).find("#addressField_leftNav")}else{if($(e.target).find("#ffmentNewAddy").length>0){addressFld=$(e.target).find("#ffmentNewAddy").filter(":visible:first")}}}address=addressFld.val();fieldLeft=addressFld.offset().left;fieldOffsetTop=addressFld.offset().top;CSS={fontSize:addressFld.css("fontSize"),fontFamily:"Arial, Helvetica, sans-serif",paddingTop:parseInt(addressFld.css("paddingTop"),10)+parseInt(addressFld.css("borderTopWidth"),10)+1,paddingBottom:parseInt(addressFld.css("paddingBottom"),10),border:addressFld.css("border")};t=$(e.target).find("button");locationSuggestions=$("#locationSuggestions");var locationSuggestions_leftNav=$(".locationSuggestions_leftNav");if(!address||address=="Enter City,State or ZIP"){trackLocation($(this),"No Location");if(leftNavLocationCapture==true){return showError(errorMessage,locationSuggestions_leftNav)}else{if($("#filterChangeAddress_").html()){return showError(errorMessage,locationSuggestions)}}}if($("#userAddress").length){removeUserAddress()}hideSuggestions(locationSuggestions);$("img.ajaxLoader").remove();t.hide().after("<img src='"+jspStoreImgDir+"images/refactorSPU/mgLoaderGifSm.gif' class='ajaxLoader' style='vertical-align: top; margin-left: 3px' alt='Loading...' title='Processing...' />");controlFetchAddressFlow(addressFld)},createUserCreatedAddress=function(html,css){var userAddress=addEllipsisToLocation(html.address);var cssObj=css||{},userCreatedAddress=$('<span id="userCreatedAddress" style="display:none"><a href="javascript:;" title="Click to edit">'+userAddress+"</a></span>").css(cssObj);$("body").append(userCreatedAddress.css({left:"-="+userCreatedAddress.find("a").position().left+"px"}));return userCreatedAddress},attachUserAddress=function(html){var userAddress=addEllipsisToLocation(html.address);$("#ffmentChangeForm").hide();$("#shcModalWrapper2 #loc_shcModal-contentwrap2 #preferredLocation a.preferredMyAddress").text(userAddress);$("#shcModalWrapper2 #loc_shcModal-contentwrap2 #preferredLocation a.preferredMyAddress").show();if(hideLocalAvailabiltyHeaderPopUp()){addressCreated=true;$("#header #myLocation").remove();$("#header").append('<div id="myLocation"><ul><li id="userAddress">My Location:<a href="javascript:;" title="Click to edit">'+userAddress+"</a></li></ul></div>");$("#filterMyLocation_, #filterMyLocation").find("a").html(userAddress);$("#filterChangeAddress_, #filterChangeAddress").slideUp("slow");$(".signInLink_LeftNav").hide();$("#filterMyLocation_").show();$(".filterMyLocation_leftNav").show();if(typeof prodDetPage!="undefined"&&prodDetPage){if(typeof($.cookie("zipCode"))!="undefined"&&$.cookie("zipCode")!=null&&zipcodeEntered){if(defaultFfm=="ship"){updateShipOnLoad()}else{if(defaultFfm=="delivery"){setTimeout(function(){getDeliveryDetails()},200)}}headerPopUpFlag=true}zipcodeEntered=false}}},showPreferredLocation=function(address){$("#getLocalAvailability_, #getLocalAvailability").slideUp("fast",function(){$("#preferredLocation_, #preferredLocation").html('<img src="'+jspStoreImgDir+'images/refactorSPU/mgLoaderGifSm.gif" class="ajaxLoader" alt="Loading..." title="Processing..." />').slideDown("fast",function(){var context=$(this);setTimeout(function(){context.load("ajax/preferred_location.html",function(){$(".preferredMyAddress").html(address)});yellowFade=setTimeout(function(){$("#loc_shcModal").fadeOut(2000,function(){LocalModal.close()})},2000);context.bind("mousedown",function(){clearTimeout(yellowFade)})},800)})})},launchLocationModal=function(){$(this).parent().stop().animate({opacity:0},"fast");LocalModal.locationModal()},bindLaunchLocationModal=function(){},resetGoButton=function(button){$(".ajaxLoader").remove();if(null!=button&&typeof button!="undefined"){return button.show()}},removeUserAddress=function(){$("#userAddress").remove()},populateSuggestions=function(source,targ){var ul=$('<ul id="locationList"></ul>'),target=targ||false;if(!target){return}var validSuggestion=false;var validSuggestionIndex=0;$(source).each(function(i,e){if((e.address).indexOf(", USA")!=-1){var a=$('<a href="javascript:;">'+e.address+"</a>").unbind("click").bind("click",function(){removeUserAddress();processUserAddress(e);attachUserAddress(e);if(!blockAjaxCall){$("#shcModalWrapper1").hide();$("#shcModalWrapper2").hide();$("#shcModalWrapper2 #loc_shcModal-contentwrap2").empty();fetchStoreResults()}else{$("#shcModalWrapper2").show()}target.empty()}),li=$("<li></li>").append(a);ul.append(li);validSuggestion=true;validSuggestionIndex=i}});target.html(ul).prepend('<div><br/><strong class="important">Did you mean...</strong><br/></div>');if(null!=t){t.hide("<img src='"+jspStoreImgDir+"images/refactorSPU/mgLoaderGifSm.gif' class='ajaxLoader' style='vertical-align: top; margin-left: 3px' alt='Loading...' title='Processing...' />")}if(validSuggestion){if(target.find("ul li").length==1){return validSuggestionIndex+"_match"}else{return target}}else{return"error"}t.hide("<img src='"+jspStoreImgDir+"images/refactorSPU/mgLoaderGifSm.gif' class='ajaxLoader' style='vertical-align: top; margin-left: 3px' alt='Loading...' title='Processing...' />")},showError=function(message,target){var msg='<div class="errorMsg">'+message+"</div>";return target.html(msg).slideDown("fast",function(){target.animate({opacity:1},"fast")})},showSuggestions=function(target){return target.slideDown("fast",function(){target.animate({opacity:1},"fast")
})},hideSuggestions=function(target){return target.animate({opacity:0},{duration:"fast",queue:false,complete:function(){target.slideUp("fast",function(){target.hide()})}})},getAddressIsSet=function(){return addressCreated},deferedFunctions={initAddress:function(){addressField=$("#addressField");$("#addressLabel").on("click",function(e){addressField.focus();console.log("down")});addressField.onblur=function(e){if(!$(this).val()){$("#addressLabel").css({width:"auto",height:"auto"}).stop().animate({opacity:1})}};addressField.onfocus=function(e){if(!$(this).val()){$("#addressLabel").css({width:0,height:0,overflow:"hidden"})}};var addressField_LeftNav=$("#addressField_leftNav");$("#addressLabel_leftNav").on("click",function(e){addressField.focus();console.log("down")});$("#customerLocation").bind("submit",function(e){e.preventDefault();leftNavLocationCapture=false;resultCardLocationCapture=false;submitCustomerLocation(e);zipcodeEntered=true;makePickupCall=true})},searchOtherStores:function(){$("#preferredCheckOtherStore").bind("submit",function(e){e.preventDefault()})}},displayGoogleGeocoderResults=function(googleResponseJSON){var googleResponseData=new googleResponse();googleResponseData.initialize(googleResponseJSON);var match=googleResponseData.match,userLocation=googleResponseData.userLocation,error=googleResponseData.error,errorMessage=googleResponseData.errorMsg;if(error){$("#shcModalWrapper2").hide();$("loc_shcModal-contentwrap2 #locationSuggestions").remove();$("#shcModalWrapper1 #loc_shcModal-content #getLocalAvailability #locationSuggestions").remove();$("#shcModalWrapper1 #loc_shcModal-content #getLocalAvailability").append('<div id="locationSuggestions"><div><strong class="important"><br>Did you mean...</strong><br></div></div><script type="text/javascript">MyLocation.deferedFunctions.initAddress();<\/script></div>');if(errorMessage=="Error Occured"){$("#shcModalWrapper1 #loc_shcModal-content #getLocalAvailability #locationSuggestions").html("Sorry, we couldn't find your location. Please double check it and try again.").show()}else{$("#shcModalWrapper1 #loc_shcModal-content #getLocalAvailability #locationSuggestions").html(errorMessage).show()}if($.cookie("zipCode10151")!=null&&$.cookie("zipCode10151")!=""){$("#shcModalWrapper2 #loc_shcModal-content #preferredLocation a.preferredMyAddress").html($.cookie("zipCode10151"))}$("#shcModalWrapper1").show();locationChanged=false}var filterChangeAddress=$("#filterChangeAddress_");setTimeout(function(){if(error){if(resultCardLocationCapture){var errorDiv=showErrorMessage(errorMessage);$("#ffmentChangeLoc").append(errorDiv);$("#ffmentChangeLoc div.error").css("display","block");resetResultCardGoButton()}else{if(leftNavLocationCapture){showError(errorMessage,$(".locationSuggestions_leftNav"))}showError(errorMessage,locationSuggestions);bindLaunchLocationModal()}}else{if(match){handleSingleLocationMatch(userLocation)}else{if(resultCardLocationCapture){var suggestionDiv=showLocationOptions(googleResponseData.suggestions);if(typeof suggestionDiv=="string"){if(suggestionDiv.indexOf("_match")!=-1){var index=suggestionDiv.split("_match")[0];handleSingleLocationMatch(googleResponseData.suggestions[index])}else{if(suggestionDiv=="error"){var errorDiv=showErrorMessage("Sorry, we couldn't find your location. Please double check it and try again.");$("#ffmentChangeLoc").append(errorDiv);$("#ffmentChangeLoc div.error").show();resetResultCardGoButton()}}}else{$("#ffmentChangeLoc div.error").remove();$("#ffmentChangeLoc").append(suggestionDiv);resetResultCardGoButton()}}else{var options=false;if(leftNavLocationCapture){options=populateSuggestions(googleResponseData.suggestions,$(".locationSuggestions_leftNav"));if(typeof options=="string"){if(options.indexOf("_match")!=-1){var index=options.split("_match")[0];handleSingleLocationMatch(googleResponseData.suggestions[index])}else{if(options=="error"){showError("Sorry, we couldn't find your location. Please double check it and try again.",$(".locationSuggestions_leftNav"))}}}else{return showSuggestions(options)}}options=populateSuggestions(googleResponseData.suggestions,$("#locationSuggestions"));if(typeof options=="string"){if(options.indexOf("_match")!=-1){var index=options.split("_match")[0];handleSingleLocationMatch(googleResponseData.suggestions[index])}else{if(options=="error"){showError("Sorry, we couldn't find your location. Please double check it and try again.",locationSuggestions)}}}else{showSuggestions(options)}bindLaunchLocationModal()}}}if(!resultCardLocationCapture){resetGoButton(t)}},800)},handleSingleLocationMatch=function(userLocation){processUserAddress(userLocation);if(resultCardLocationCapture){if(typeof prodDetPage!="undefined"&&!prodDetPage){populateResultCardAjax(tabSelected)}else{if(tabSelected!="ffOP"){changeLocMessaging()}else{var resultCardExpanded=false;if($("#ffmentResultsWrap").is(":visible")||$("#ffmentNoAddy").is(":visible")){resultCardExpanded=true}if(pickupDisabledFlag){showPickupDataInProductPage(false)}else{showPickupDataInProductPage(resultCardExpanded)}}}}else{displayPerfectMatch(userLocation)}},processUserAddress=function(html){RSPULocationDetails=new FormatRSPUCookie.RSPULocation();RSPULocationDetails.userLocation=html.address;RSPULocationDetails.latitude=html.latitude;RSPULocationDetails.longitude=html.longitude;var zipCodeFromGoogle=extractZipCodeFromAddress(html.address);address=html.address;if(zipCodeFromGoogle==""){fetchZipcodeAjax(RSPULocationDetails)}else{RSPULocationDetails.zipCode=zipCodeFromGoogle;zipFromGoogleCall=true;getZipCodeFromDB(zipCodeFromGoogle,"");FormatRSPUCookie.setSPURefactorCookie(RSPULocationDetails)}},displayPerfectMatch=function(userLocation){var filterChangeAddress=$("#filterChangeAddress_");if(leftNavLocationCapture){filterChangeAddress.hide();return attachUserAddress(userLocation)}$.extend(CSS,{left:fieldLeft,top:fieldOffsetTop});var userCreatedAddress=createUserCreatedAddress(userLocation,CSS);address=userLocation.address;if(!blockAjaxCall){fetchStoreResults();blockAjaxCall=true}setTimeout(function(){userCreatedAddress.remove();attachUserAddress(userLocation);bindLaunchLocationModal();if($("#shcModalWrapper2").is(":visible")){attachAddressEvents()}},666)},fetchZipcodeAjax=function(RSPULocationDetails){var latitude=RSPULocationDetails.latitude;var longitude=RSPULocationDetails.longitude;$.ajax({type:"GET",url:"/shc/s/RefactorSPUZipcodeHelperCmd"+(location.protocol==="https:"?"https":""),async:false,data:"latitude="+latitude+"&longitude="+longitude+"&shcapiBypassSSO=true&storeId=10151",success:function(regionalData){regionalData=eval("("+regionalData+")");RSPULocationDetails.zipCode=regionalData.zipCode;RSPULocationDetails.deliveryCharge=regionalData.deliveryCharge;RSPULocationDetails.latitude=regionalData.latitude;RSPULocationDetails.longitude=regionalData.longitude;setOmnitureForUserZipCode(RSPULocationDetails.zipCode);var spuZone=regionalData.spuZone;if(spuZone!=null){var currentZoneValue=$.cookie(SPU_ZONE);if(currentZoneValue==null||currentZoneValue!=spuZone){$.cookie(SPU_ZONE,spuZone,{path:"/",expires:365});var tempBodyId=$("body").attr("id");if(tempBodyId=="keysearch"||tempBodyId=="subcategory"){if(leftNavLocationCapture!=true&&resultCardLocationCapture==false){location.href=location.href;headerPopUpFlag=false}else{pageToBeReloadForUnitNo=true;closePopUpBind()}}}}FormatRSPUCookie.setSPURefactorCookie(RSPULocationDetails)}})},getZipCodeFromDB=function(zipCode,address){$.ajax({type:"GET",url:"/shc/s/RefactorSPUZipcodeHelperCmd"+(location.protocol==="https:"?"https":""),async:false,data:"zipcode="+zipCode+"&shcapiBypassSSO=true&storeId=10151",success:function(regionalData){regionalData=eval("("+regionalData+")");if(regionalData.zipCode!=""&&typeof regionalData.zipCode!="undefined"){RSPULocationDetails=new FormatRSPUCookie.RSPULocation();RSPULocationDetails.userLocation=regionalData.zipCode;RSPULocationDetails.zipCode=regionalData.zipCode;RSPULocationDetails.deliveryCharge=regionalData.deliveryCharge;
RSPULocationDetails.latitude=regionalData.latitude;RSPULocationDetails.longitude=regionalData.longitude;setOmnitureForUserZipCode(RSPULocationDetails.zipCode);FormatRSPUCookie.setSPURefactorCookie(RSPULocationDetails);var spuZone=regionalData.spuZone;if(spuZone!=null){var currentZoneValue=$.cookie(SPU_ZONE);if(currentZoneValue==null||currentZoneValue!=spuZone){$.cookie(SPU_ZONE,spuZone,{path:"/",expires:365});var tempBodyId=$("body").attr("id");if(tempBodyId=="keysearch"||tempBodyId=="subcategory"){if(locationChanged){location.href=location.href;headerPopUpFlag=false}else{if(leftNavLocationCapture!=true&&resultCardLocationCapture==false&&locationChanged==false){location.href=location.href;headerPopUpFlag=false}else{pageToBeReloadForUnitNo=true;closePopUpBind()}}}}}zipFromGoogleCall=false;var newGoogleResponse=new googleResponse();newGoogleResponse.match=true;newGoogleResponse.userLocation.address=regionalData.zipCode;displayPerfectMatch(newGoogleResponse.userLocation)}else{if(!zipFromGoogleCall){if($("input#ffmentNewAddy").length>0){addressFld=$("input#ffmentNewAddy")}fetchLocation(addressFld)}}if(typeof bundleProductPage!="undefined"&&bundleProductPage){window.location.reload()}}})},extractZipCodeFromAddress=function(address){var countryIndex=address.indexOf(", USA");var zipCode="";if(countryIndex!=-1&&!((countryIndex-5)<0)){zipCode=address.slice((countryIndex-5),countryIndex)}if(!FED.Util.isValidZipcode(zipCode)&&zipCode.length!==5){zipCode=""}return zipCode},preferredStoreLocationModal=function(){LocalModal.locationModalWrapperTwo()},controlFetchAddressFlow=function(addressFld){var userLocationAddress=trim(addressFld.val());var userZipCodeFive=userLocationAddress.substring(0,5);if(FED.Util.isValidZipcode(userLocationAddress)&&userLocationAddress.length==5){if(resultCardLocationCapture==false){getZipCodeFromDB(userLocationAddress,"")}else{getZipCodeFromDBForResultCard(userLocationAddress,"")}}else{if(FED.Util.isValidZipcode(userZipCodeFive)){if(!resultCardLocationCapture){getZipCodeFromDB(userZipCodeFive,"")}else{getZipCodeFromDBForResultCard(userZipCodeFive,"")}}else{fetchLocation(addressFld)}}},addEllipsisToLocation=function(userAddress){if((userAddress!="Enter City,State or ZIP Code")&&userAddress.length>18){userAddress=userAddress.substring(0,15);userAddress+="..."}return userAddress};return{init:init,addressCreated:addressCreated,deferedFunctions:deferedFunctions,attachUserAddress:attachUserAddress,processUserAddress:processUserAddress,addEllipsisToLocation:addEllipsisToLocation,bindLaunchLocationModal:bindLaunchLocationModal,preferredStoreLocationModal:preferredStoreLocationModal,headerLocationChanged:headerLocationChanged,removeUserAddress:removeUserAddress,controlFetchAddressFlow:controlFetchAddressFlow,submitCustomerLocation:submitCustomerLocation,resetAjaxCall:resetAjaxCall,displayGoogleGeocoderResults:displayGoogleGeocoderResults,getZipCodeFromDB:getZipCodeFromDB}}(jQuery));var FormatRSPUCookie=(function($){addLocationToCookie=function(cookieName,storeValue,cookiePath){if(cookieName=="zipCode"||cookieName=="zipCode10151"){$.cookie(cookieName,storeValue,{path:cookiePath,expires:365})}else{$.cookie(cookieName,storeValue,{path:cookiePath});var tempBodyID=$("body").attr("id");if(tempBodyID==="shoppingcart"){populateZipCodesForSalesTax()}}},retrieveLocationFromCookie=function(cookieName){var cookieValue=$.cookie(cookieName);newRSPULocation.initialize(cookieValue)},RSPULocation=function(){this.zipCode="";this.userLocation="";this.latitude="";this.longitude="";this.preferredStore="";this.deliveryCharge=""},RSPULocation.prototype.toString=function(){return(JSON.stringify(this))},RSPULocation.prototype.initialize=function(cookieValue){if(typeof cookieValue!="undefined"&&cookieValue!=null){var cookieValue=eval("("+cookieValue+")");this.zipCode=cookieValue.zipCode;this.userLocation=cookieValue.userLocation;this.latitude=cookieValue.latitude;this.longitude=cookieValue.longitude;this.preferredStore=cookieValue.preferredStore;this.deliveryCharge=cookieValue.deliveryCharge}},getUserStatus=function(){var cookieValue=$.cookie("s_r");cookieValue=unescape(cookieValue);if(cookieValue!==null&&cookieValue!==undefined&&cookieValue==="s_r_Y"){UName="R"}else{UName="G"}return UName},readUnitNo=function(){var unitNo="";var cookieValue=$.cookie(PREFSTORE_COOKIE_GLOBAL);if(typeof cookieValue!="undefined"&&cookieValue!=null&&cookieValue!=" "&&cookieValue.length>0){unitNo=cookieValue}else{cookieValue=$.cookie(COOKIE_NAME);if(typeof cookieValue!="undefined"&&cookieValue!=null&&cookieValue!=" "&&cookieValue.length>0){unitNo=cookieValue}}return unitNo};isSameUnit=function(){var prefStoreUnitNo=$.cookie(PREFSTORE_COOKIE_GLOBAL);var unitNo1="",unitNo2="";if(typeof prefStoreUnitNo!="undefined"&&prefStoreUnitNo!=null&&prefStoreUnitNo!=" "&&prefStoreUnitNo.length>0){unitNo1=prefStoreUnitNo}var pickupUnitNo=$.cookie(COOKIE_NAME);if(typeof pickupUnitNo!="undefined"&&pickupUnitNo!=null&&pickupUnitNo!=" "&&pickupUnitNo.length>0){unitNo2=pickupUnitNo}if(unitNo1!=null&&unitNo2!=null&&unitNo1.length>0&&unitNo2.length>0&&(unitNo1==unitNo2)){return true}else{return false}};setSPURefactorCookie=function(cookieObj){newRSPULocation=new RSPULocation();newRSPULocation.zipCode=cookieObj.zipCode;newRSPULocation.userLocation=cookieObj.userLocation;newRSPULocation.latitude=cookieObj.latitude;newRSPULocation.longitude=cookieObj.longitude;newRSPULocation.preferredStore=cookieObj.preferredStore;newRSPULocation.deliveryCharge=cookieObj.deliveryCharge;storeValue=newRSPULocation.toString();addLocationToCookie(COOKIE_RSPU,storeValue,"/");if(cookieObj.zipCode!=""||null!=cookieObj.zipCode){addLocationToCookie(COOKIE_ZIPCODE_10151,cookieObj.zipCode,"/");addLocationToCookie(COOKIE_ZIPCODE,cookieObj.zipCode,"/")}},trackLocation=function(obj,text){if(typeof s!="undefined"&&s!=null){s.linkTrackVars="prop12,prop10,channel,prop1,prop2,prop3,prop19,prop27,prop28,eVar62";var trackText=" > SPU Location entered";s.prop12=text+trackText;if(typeof address!="undefined"&&address!=""){s.eVar62="["+address+"]"}s.tl(obj,"o",s.prop12)}},getSPURefactorCookie=function(){newRSPULocation=new RSPULocation();retrieveLocationFromCookie(COOKIE_RSPU);return newRSPULocation};return{RSPULocation:RSPULocation,setSPURefactorCookie:setSPURefactorCookie,getSPURefactorCookie:getSPURefactorCookie}}(jQuery));jQuery(function(){setTimeout(function(){MyLocation.init()},1250)});function populateZipCodesForSalesTax(){var a=FormatRSPUCookie.getSPURefactorCookie().zipCode;if(a!=null&&a!="undefined"){$("#salesTaxInput").val(a)}};
 /*   /opt/SVNBAAD/SVNBRANCH/ECOM_REL_06-Feb-2013/wcs-static/StaticWeb/WebContent/StaticContent/Kmart/shared/js/refactorSPU/SPURefactorGeoLocator.js:488191   */
var fromLoc={};var geocoder=null;var searchLoc={};var SEARS_LOCATOR_ERROR_INVALID_ADDRESS=601;var SEARS_LOCATOR_ERROR_NO_RESULTS=602;var MAX_LOCATION_MATCHES=5;var inputField;var storeDetailsFlag=false;var currentStoreNoForMap;var latitudeForMap;var longitudeForMap;function googleResponse(){this.match=false;this.userLocation=new userLocationData();this.suggestions=[];this.error=false;this.errorMsg=""}function userLocationData(){this.address="";this.latitude="";this.longitude=""}googleResponse.prototype.toString=function(){return(JSON.stringify(this))};googleResponse.prototype.initialize=function(googleResponseJSON){var googleResponseJSON=eval("("+googleResponseJSON+")");this.match=googleResponseJSON.match;this.userLocation=googleResponseJSON.userLocation;this.suggestions=googleResponseJSON.suggestions;this.error=googleResponseJSON.error;this.errorMsg=googleResponseJSON.errorMsg};if(typeof mapIntialized=="undefined"){var mapIntialized=false}function fetchLocation(a){if(typeof a!="undefined"&&(a.val()=="Enter City, State or ZIP"||a.val()=="Enter City,State or ZIP Code")){newGoogleResponse=new googleResponse();newGoogleResponse.errorMsg="Enter City,State or ZIP Code in the field above.";newGoogleResponse.error=true;MyLocation.displayGoogleGeocoderResults(newGoogleResponse.toString())}else{this.inputField=a;if(!mapIntialized){initializeGoogleMap()}populateSearchLoc();setTimeout(function(){performGeocodingSpuRefactor(searchLoc)},500)}}function populateSearchLoc(){if(typeof inputField!="undefined"){searchLoc.address=inputField.val()}searchLoc.country="US"}function loadMapsForRSPU(){setTimeout(function(){google.load("maps","2",{"callback":"RSPUCallBackAPI","other_params":"client=gme-sears&sensor=false"})},500)}function RSPUCallBackAPI(){initialize();if(!storeDetailsFlag){populateSearchLoc();performGeocodingSpuRefactor(searchLoc)}else{doGoogleMapProcessing()}}function performGeocodingSpuRefactor(b){var a=b.address+"+"+b.country;if(geocoder){geocoder.setBaseCountryCode("US");geocoder.getLocations(a,geocodingResponseSPURefactor)}}function geocodingResponseSPURefactor(b){try{if(!b||b.Status.code!=200){throw b.Status.code}if(b.Placemark.length>1){drawAltResultsGoogle(b.Placemark)}else{if(b.Placemark[0].AddressDetails.Accuracy>1){newGoogleResponse=new googleResponse();if((b.Placemark[0].address).indexOf(", USA")!=-1){newGoogleResponse.match=true;newGoogleResponse.userLocation.address=b.Placemark[0].address.replace(", USA"," ");newGoogleResponse.userLocation.latitude=b.Placemark[0].Point.coordinates[1];newGoogleResponse.userLocation.longitude=b.Placemark[0].Point.coordinates[0];MyLocation.displayGoogleGeocoderResults(newGoogleResponse.toString())}else{throw SEARS_LOCATOR_ERROR_INVALID_ADDRESS}}else{throw SEARS_LOCATOR_ERROR_INVALID_ADDRESS}}}catch(a){newGoogleResponse=new googleResponse();newGoogleResponse.error=true;if(a==601||a==602){newGoogleResponse.errorMsg="Sorry, we couldn't find your location. Please double check it and try again."}else{newGoogleResponse.errorMsg="Error Occured"}MyLocation.displayGoogleGeocoderResults(newGoogleResponse.toString())}}function drawAltResults(a){var c=a.length;if(c==0){throw SEARS_LOCATOR_ERROR_NO_RESULTS}else{newGoogleResponse=new googleResponse();for(var b=0;b<c&&b<MAX_LOCATION_MATCHES;b++){var d=new userLocationData();d.address=a[b].address;d.latitude=a[b].Point.coordinates[1];d.longitude=a[b].Point.coordinates[0];newGoogleResponse.suggestions[b]=d}MyLocation.displayGoogleGeocoderResults(newGoogleResponse.toString())}}function drawAltResultsGoogle(a){var c=a.length;if(c==0){throw SEARS_LOCATOR_ERROR_NO_RESULTS}else{newGoogleResponse=new googleResponse();for(var b=0;b<c&&b<MAX_LOCATION_MATCHES;b++){var d=new userLocationData();d.address=a[b].address;d.latitude=a[b].Point.coordinates[1];d.longitude=a[b].Point.coordinates[0];newGoogleResponse.suggestions[b]=d}MyLocation.displayGoogleGeocoderResults(newGoogleResponse.toString())}}function initialize(){try{if(GBrowserIsCompatible()){geocoder=new GClientGeocoder()}}catch(a){newGoogleResponse=new googleResponse();newGoogleResponse.error=true;newGoogleResponse.errorMsg="An error occurred. The page needs to be refreshed";MyLocation.displayGoogleGeocoderResults(newGoogleResponse.toString())}}function initializeGoogleMap(a){setTimeout(function(){var b=document.createElement("script");b.src=window.location.protocol+"//www.google.com/jsapi?Key=gme-sears&callback=loadMapsForRSPU";b.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(b);mapIntialized=true},500)}function showMapForRSPU(c,b,a){currentStoreNoForMap=c;latitudeForMap=b;longitudeForMap=a;storeDetailsFlag=true;if(!mapIntialized){initializeGoogleMap();doGoogleMapProcessing()}else{doGoogleMapProcessing()}}function doGoogleMapProcessing(){var a=getAkamaiStoreId();var b=350;var c;if(typeof(GMap2)=="function"){if(typeof bundleProductPage!=="undefined"&&bundleProductPage&&$("ul.bStoreInfo li.active").size()){c=new GMap2(document.getElementById("detailsMap_"+currentStoreNoForMap),{size:new GSize(455,185)})}else{if(typeof resultCardMap!="undefined"&&resultCardMap){c=new GMap2(document.getElementById("detailsMap_"+currentStoreNoForMap),{size:new GSize(b,185)});resultCardMap=false}else{b=265;c=new GMap2(document.getElementById("kmart_detailsMap_"+currentStoreNoForMap),{size:new GSize(b,185)})}}c.enableScrollWheelZoom();c.setCenter(new GLatLng(latitudeForMap,longitudeForMap),9);c.addControl(new GLargeMapControl3D());c.addControl(new GMapTypeControl());c.addOverlay(createCenterMarkerForRSPU(new GLatLng(latitudeForMap,longitudeForMap)));storeDetailsFlag=false}}function createCenterMarkerForRSPU(a){var c=new GIcon(G_DEFAULT_ICON);c.image="http://maps.google.com/mapfiles/arrow.png";c.shadow="http://maps.google.com/mapfiles/arrowshadow.png";c.iconSize=new GSize(39,34);c.shadowSize=new GSize(39,34);c.iconAnchor=new GPoint(9,34);c.infoWindowAnchor=new GPoint(9,2);markerOptions={icon:c};var b=new GMarker(a,markerOptions);return b};
 /*   /opt/SVNBAAD/SVNBRANCH/ECOM_REL_06-Feb-2013/wcs-static/StaticWeb/WebContent/StaticContent/Kmart/js/refactorSPU/kmartHeader.js:556465   */
var fetchStoreResults;var fetchStoresForDistance;var attachEventListeners;var getLocationText;var primarySpuCall=true;var moreStoresRequest=false;var locationChanged=false;var radius=50;var diffStoreSelected=false;var PREFSTORE_COOKIE_GLOBAL="preferredStore";var COOKIE_NAME="pickupStoreId10151";var addressChangeCall=false;var attachAddressEvents,blockFetchStoreResultsAjax=false;var headerPopUpFlag=true;var prefStoreAddress1="";var makePickupCall=false;var kmartChangeStoreReload=false;$(document).ready(function(){attachEventListeners=function(){$("#shcModalWrapper2 a.preferredMyAddress").unbind("click").click(function(){$(this).insertAfter("#preferredLocation #ffmentChangeForm").hide();$("#ffmentChangeForm").show().css("display","inline");$("img.ajaxLoader").remove();$("#ffmentChangeForm a.submitAddy").show();$("#preferredLocation #ffmentChangeForm #ffmentNewAddy").val($("#preferredLocation a.preferredMyAddress:first").text()).focus()});$("#shcModalWrapper3 a.preferredMyAddress").unbind("click").click(function(){$(this).insertAfter("#shcModalWrapper3 #preferredLocation #ffmentChangeForm").hide();$("#shcModalWrapper3 #ffmentChangeForm").show().css("display","inline");$("img.ajaxLoader").remove();$("#shcModalWrapper3 #ffmentChangeForm a.submitAddy").show();$("#shcModalWrapper3 #preferredLocation #ffmentChangeForm #ffmentNewAddy").val($("#shcModalWrapper3 #preferredLocation a.preferredMyAddress:first").text()).focus()});$("#locationList li").unbind("click").click(function(){$("#shcModalWrapper2").show()});$(".separatorRight a").toggle(function(){$("#currentStoreDetails").slideDown(1500).show();$(this).parent().css("background","#FEDEA8");$("#shcModalWrapper2").css("height","auto")},function(){$("#currentStoreDetails").hide();$(this).parent().css("background","white");$("#shcModalWrapper2").css("height","200px")});$("a.moreStores").toggle(function(){primarySpuCall=false;$(".ffmentSPUStores .floatLeft").slideDown(1500).show();$(".loc_shcModal .loc_shcModal-wrapper").css("height","auto");$(this).text("Less Store")},function(){$(".ffmentSPUStores #currentStoreDetails").hide();$(".ffmentSPUStores .floatLeft:not(.firstRow)").hide();$(".loc_shcModal .loc_shcModal-wrapper").css("height","205px");$(this).text("More Store");$(".floatLeft").css("background","white")});var storesLen=$("#shcModalWrapper3 .floatLeft a").length;if(storesLen>0){$("#shcModalWrapper3 .floatLeft a").each(function(index){var showIndex=2+(3*Math.floor(index/3));if(storesLen>0){if(showIndex>storesLen-1){showIndex=storesLen-1}}$(this).toggle(function(){$(".ffmentSPUStores #currentStoreDetails").hide();var tempStoreDetails='<div id="kmart_detailsMap_'+(index+1)+'" class="detailsMapClass"> </div><div id="detailInfo">';tempStoreDetails+=$(".ffmentSPUStores #currentStoreDetails:eq("+(index)+") #detailInfo").html();tempStoreDetails+="</div>";var storeLatitude=$(".ffmentSPUStores #currentStoreDetails:eq("+(index)+') input[name="storeLatitude"]').val();var storeLongitude=$(".ffmentSPUStores #currentStoreDetails:eq("+(index)+') input[name="storeLongitude"]').val();$(".ffmentSPUStores #currentStoreDetails:eq("+(showIndex)+")").html(tempStoreDetails).slideDown(1500).show();$(".floatLeft").css("background","white");$(".loc_shcModal .loc_shcModal-wrapper").css("height","auto");$(this).parent().css("background","#FEDEA8");showMapForRSPU(index+1,storeLatitude,storeLongitude)},function(){$(".ffmentSPUStores #currentStoreDetails").hide();$(this).parent().css("background","white")})})}$("#shcModalWrapper2 .floatLeft a").each(function(){$(this).toggle(function(){$("#currentStoreDetails").slideDown(1500).show();$(".floatLeft").css("background","white");$(".loc_shcModal .loc_shcModal-wrapper").css("height","auto");$(this).parent().css("background","#FEDEA8");var storeLatitude=FormatRSPUCookie.getSPURefactorCookie().latitude;var storeLongitude=FormatRSPUCookie.getSPURefactorCookie().longitude;showMapForRSPU(0,storeLatitude,storeLongitude)},function(){$("#currentStoreDetails").hide();$(this).parent().css("background","white")})});$(".storeDetailsLink").unbind("click").click(function(){$("div#currentStoreDetails").show()});$(".selectstore").unbind("click").click(function(){var unitNo=$(this).parent().find('input[name="unitNo"]').val();diffStoreSelected=true;$(".preferredStatus").hide();$(".selectstore").show();$(".floatLeft div").removeAttr("id");$(this).hide();$(this).parent().find("p").wrap('<div id="preferredStoreAddress">');$("<div></div>").insertBefore(this).text("Preferred Store").addClass("preferred").wrap('<div class="preferredStatus marginBottomSmall">');updatePrefStoreInCheckout($(this),unitNo)});var headerTop=173,headerRight=$(window).width()-($("#wrap").width()+15);$(".loc_shcModal").animate({top:"173px"},1500);$(".loc_shcModal-wrapper #loc_shcModal-closer").unbind("click").click(function(){$("#loc_shcModal").css("top","-800px");$("#userAddress").css("display","block");$("a.moreStores").text("Less Store");$("#currentStoreDetails").hide();$(".floatLeft,.separatorRight").css("background","white");$("#locationSuggestions").hide();attachAddressEvents()});attachAddressEvents=function(){$("#userAddress").unbind("click").click(function(){headerPopUpFlag=false;var headerTop=173,headerRight=$(window).width()-($("#wrap").width()+15);if($(this).children("a").text().trim()=="Enter City,State or ZIP Code"){if(!$("#loc_shcModal").length){LocalModal.locationModal();$("#shcModalWrapper1").show();$("#shcModalWrapper2").hide();$("#shcModalWrapper3").hide()}else{$("#loc_shcModal").show();$("#loc_shcModal").css({top:headerTop+"px",right:headerRight+"px"});$("#shcModalWrapper1").show();$("#shcModalWrapper2").hide();$("#shcModalWrapper3").hide()}}else{if(diffStoreSelected){diffStoreSelected=false;primarySpuCall=true;fetchStoreResults()}else{if(getLocationText()!=""&&getLocationText()!=null){if($("#loc_shcModal #shcModalWrapper2 #loc_shcModal-contentwrap2").children().length==0||!isSameUnit()){primarySpuCall=true;fetchStoreResults()}else{if(moreStoresRequest&&$("#loc_shcModal #shcModalWrapper3 #loc_shcModal-contentwrap3 #preferredLocation ul.ffmentSPUStores").children().length==0){if($.cookie(COOKIE_NAME)!=null){$.cookie(COOKIE_NAME,null,{path:"/"});$.cookie(COOKIE_NAME,null,{path:"/shc/s/"});$.cookie(COOKIE_NAME,null,{path:"/shc/s"})}radius=$("select#storearea option:selected").val();var msg='<div class="errorMsg">Unfortunately, we could not find any stores within '+radius+" miles of your location..</div>";$(".ajaxLoader").remove();$("#shcModalWrapper1 #customerLocation #findStore").css("display","inline");$("#locationSuggestions").html(msg).css({top:"5px",left:"0px"}).slideDown("fast",function(){$("#locationSuggestions").animate({opacity:1},"fast")});$(".loc_shcModal").animate({top:"22px"},1500);$("#loc_shcModal").show();var userLocation=FormatRSPUCookie.getSPURefactorCookie().userLocation;$("div#loc_shcModal div#shcModalWrapper1 #loc_shcModal-content").find("input").val(userLocation);$("#loc_shcModal").css({top:"22px"});$("#loc_shcModal #shcModalWrapper1").show();$("#loc_shcModal #shcModalWrapper2").hide();$("#loc_shcModal #shcModalWrapper3").hide()}else{$("#loc_shcModal").show();$("#loc_shcModal").css({top:"22px"});$("#loc_shcModal #shcModalWrapper2").show();$(".loc_shcModal").animate({top:"22px"},1500);$("#loc_shcModal #shcModalWrapper3").hide();$("#loc_shcModal #shcModalWrapper1").hide()}}}else{$("#loc_shcModal").show();$("#loc_shcModal").css({top:"22px"});$("#loc_shcModal #shcModalWrapper2").show();$(".loc_shcModal").animate({top:"22px"},1500);$("#loc_shcModal #shcModalWrapper1").hide();$("#loc_shcModal #shcModalWrapper3").hide()}}}})};attachAddressEvents();$("#findstore").unbind("click").click(function(){if($("input#addressField").val()=="City, State or ZIP"||""){$(".error").show();$(".error1").hide();$("#locationSuggestions").hide()}else{if($("input#addressField").val()=="NoLocation"){$(".error").hide();$(".error1").show();$("#locationSuggestions").hide()}else{$("#locationSuggestions").slideDown(1500).css({"display":"block"});
$(".error,.error1").hide()}}});$("#searchbutton").unbind("click").click(function(event){radius=$("select#storearea option:selected").val();primarySpuCall=false;moreStoresRequest=true;fetchStoresForDistance();event.stopPropagation()});$("#locationList li").unbind("click").click(function(){var text=$(this).text();$("li.userAddress").html(text)});$("#ffmentChangeForm a.submitAddy").unbind("click").click(function(){$("#ffmentChangeForm").submit()});$("#ffmentChangeForm").submit(function(event){event.preventDefault();if($("input#ffmentNewAddy").filter(":visible:first").val()=="NoLocation"){$("#preferredLocation h4 .error").show();$("#preferredLocation h4 .error1").hide();$("#shcModalWrapper2").css("height","auto");$("#preferredOtherStores.error").hide()}else{if($("input#ffmentNewAddy").filter(":visible:first").val()==""){$("#preferredLocation h4 .error1").show();$("#preferredLocation h4 .error").hide();$("#shcModalWrapper2").css("height","auto");$(".error").hide()}else{$("#ffmentChangeForm a.submitAddy").hide().after("<img src='"+jspStoreImgDir+"images/refactorSPU/mgLoaderGifSm.gif' class='ajaxLoader' style='vertical-align: top; margin-left: 3px' alt='Loading...' title='Processing...' />");locationChanged=true;MyLocation.headerLocationChanged();MyLocation.preferredStoreLocationModal();radius=$("select#storearea option:selected").val();primarySpuCall=true;moreStoresRequest=false;if($.cookie(PREFSTORE_COOKIE_GLOBAL)==null){addressChangeCall=true;kmartChangeStoreReload=true;if(typeof tabSelected!="undefined"&&tabSelected=="ffOP"){makePickupCall=true}}var tempAddress=$("input#ffmentNewAddy").val();$("li#ffmentCheckStores a").text(tempAddress);$("p#ffmentSPUMsging a.ffmentLoc ").text(tempAddress);$("#ffmentProdDet a.ffmentAddy").each(function(){$(this).text(tempAddress)});MyLocation.controlFetchAddressFlow($("input#ffmentNewAddy").filter(":visible:first"))}}})};attachEventListeners();getLocationText=function(){var myLocation=FormatRSPUCookie.getSPURefactorCookie().userLocation;if(typeof myLocation=="undefined"||myLocation==""){myLocation=FormatRSPUCookie.getSPURefactorCookie().zipCode}return myLocation};fetchStoreResults=function(){var latitude=FormatRSPUCookie.getSPURefactorCookie().latitude;var longitude=FormatRSPUCookie.getSPURefactorCookie().longitude;var zipCodeParam=FormatRSPUCookie.getSPURefactorCookie().zipCode;var myLocation=getLocationText();if(typeof radius=="undefined"){radius=50}var requestParams="storeId=10151&primarySpuCall="+primarySpuCall+"&latitude="+latitude+"&longitude="+longitude+"&distance="+radius+"&shcapiBypassSSO=true&zipCode="+zipCodeParam;if(!addressChangeCall){var unitNo=fetchPreferredStoreUnitNoFromCookie();unitNo=jQuery.trim(unitNo);if(typeof unitNo!="undefined"&&null!=unitNo&&unitNo!="null"&&unitNo!=""&&unitNo.length>=4){requestParams=requestParams+"&unitNo="+unitNo}}addressChangeCall=false;$.ajax({type:"GET",url:"/shc/s/SpuRefactorKmartStoreDetailsCmd"+(location.protocol==="https:"?"https":""),data:requestParams,datatype:"json",success:function(preferredStore){if(primarySpuCall){preferredStore=eval("("+preferredStore+")");var status=getUserStatus();if(preferredStore.result.length){prefStoreAddress1=preferredStore.result[0].address+", "+preferredStore.result[0].city+" "+preferredStore.result[0].zip}else{if($.cookie("zipCode10151")!=null){prefStoreAddress1=$.cookie("zipCode10151")}else{prefStoreAddress1=""}}if(typeof prefStoreAddress1!="undefined"&&prefStoreAddress1!=""&&prefStoreAddress1!=null){$.cookie("preferredStoreAddressCookie",prefStoreAddress1,{path:"/",expires:365})}storeLocJson=preferredStore.result;if(status=="R"&&(storeLocJson==""||storeLocJson.length==0)){if($.cookie(PREFSTORE_COOKIE_GLOBAL)!=null){$.cookie(PREFSTORE_COOKIE_GLOBAL,null,{path:"/"})}if($.cookie(COOKIE_NAME)!=null){$.cookie(COOKIE_NAME,null,{path:"/shc/s/"});$.cookie(COOKIE_NAME,null,{path:"/shc/s"})}if(blockFetchStoreResultsAjax==false){blockFetchStoreResultsAjax=true;fetchStoreResults()}else{displayPreferredStore(preferredStore)}}else{displayPreferredStore(preferredStore)}if(typeof preferredStore!="undefined"&&preferredStore!=""){createPickupStoreIdCookie(preferredStore)}}else{displayStoresData(preferredStore)}if(makePickupCall==true){$("#ffmentProdDet #ffmentOptions li.ffOP input.ffOP").trigger("click");makePickupCall=false}if(kmartChangeStoreReload==true){kmartChangeStoreReload=false;if($("body").attr("id")=="product"){location.href=location.href;headerPopUpFlag=false}}var unitNoInCookie=fetchPreferredStoreUnitNoFromCookie();store=preferredStore.result;if(store!=null&&store.length>0){unitNo=store[0].unitno;if(typeof unitNo!="undefined"&&null!=unitNo&&unitNo!="null"&&unitNo!=""&&unitNo.length>=4&&unitNo!=unitNoInCookie){var bodyName="";try{bodyName=(document.getElementsByTagName("body")[0]).id}catch(e){}if(bodyName!=""&&(bodyName.toLowerCase()=="subcategory"||bodyName.toLowerCase()=="keysearch")){if(resultCardLocationCapture||locationChanged){location.href=location.href;locationChanged=false;headerPopUpFlag=false}else{pageToBeReloadForUnitNo=true}}}}}})};fetchStoresForDistance=function(){var latitude=FormatRSPUCookie.getSPURefactorCookie().latitude;var longitude=FormatRSPUCookie.getSPURefactorCookie().longitude;var zipCodeParam=FormatRSPUCookie.getSPURefactorCookie().zipCode;var queryString="storeId=10151&primarySpuCall="+primarySpuCall+"&latitude="+latitude+"&longitude="+longitude+"&distance="+radius+"&shcapiBypassSSO=true&zipCode="+zipCodeParam;var unitNo=fetchPreferredStoreUnitNoFromCookie();unitNo=jQuery.trim(unitNo);if(typeof unitNo!="undefined"&&null!=unitNo&&unitNo!=""){queryString=queryString+"&unitNo="+unitNo}$.ajax({type:"GET",url:"/shc/s/SpuRefactorKmartStoreDetailsCmd"+(location.protocol==="https:"?"https":""),data:queryString,success:function(storesData){storesData=jQuery.trim(storesData);if(storesData!=null&&storesData!=""){displayStoresData(storesData)}else{$("#shcModalWrapper2").show();$("#shcModalWrapper3").hide();$(".error").show();$("#preferredLocation h4 .error1").hide();$("#preferredLocation h4 .error").hide()}attachEventListeners();$("#shcModalWrapper3 a.preferredMyAddress").click()}})};function displayStoresData(storesData){var myLocation=FormatRSPUCookie.getSPURefactorCookie().userLocation;var storeInfo=$.cookie("preferredStoreAddressCookie");$("#shcModalWrapper3 #loc_shcModal-contentwrap3").html(storesData);if($("#loc_shcModal #shcModalWrapper3 #loc_shcModal-contentwrap3 #preferredLocation ul.ffmentSPUStores").children().length==0){if($.cookie(COOKIE_NAME)!=null){$.cookie(COOKIE_NAME,null,{path:"/"});$.cookie(COOKIE_NAME,null,{path:"/shc/s/"});$.cookie(COOKIE_NAME,null,{path:"/shc/s"})}radius=$("select#storearea option:selected").val();var msg='<div class="errorMsg">Unfortunately, we could not find any stores within '+radius+" miles of your location..</div>";$(".ajaxLoader").remove();$("#shcModalWrapper1 #customerLocation #findStore").css("display","inline");$("#locationSuggestions").html(msg).slideDown("fast",function(){$("#locationSuggestions").animate({opacity:1},"fast")});$(".loc_shcModal").animate({top:"22px"},1500);$("#loc_shcModal").show();$("#loc_shcModal").css({top:"22px"});$("#loc_shcModal #shcModalWrapper1").show();$("#loc_shcModal #shcModalWrapper2").hide();$("#loc_shcModal #shcModalWrapper3").hide()}else{$("#shcModalWrapper3 #loc_shcModal-contentwrap3 a.preferredMyAddress").text(myLocation);$("#shcModalWrapper2").hide();$("#preferredLocation #ffmentChangeForm").hide();$("#shcModalWrapper3").show();$(".error").hide();$("#shcModalWrapper3 .floatLeft:not(.firstRow)").hide();$("#preferredLocation p#ffmentSPUMore a").show()}}function displayPreferredStore(storeLocJson){storeLocJson=storeLocJson.result;if(storeLocJson.length>0&&storeLocJson!=""){var i=0,html=[];storeLocJson=storeLocJson[0];var myLocation=FormatRSPUCookie.getSPURefactorCookie().userLocation;html[i++]="<div>";html[i++]='<div id="preferredLocation">';html[i++]="<div>";html[i++]="<div>";html[i++]="<h4><span>My Location: </span>";html[i++]='<a href="javascript:;" class="preferredMyAddress">'+myLocation+"</a>";
html[i++]='<form id="ffmentChangeForm"><input type="text" name="ffmentNewAddy" id="ffmentNewAddy" value=""/>';html[i++]='<a href="javascript:;" title="submit" class="submitAddy">Go</a>';html[i++]='<label for="ffmentNewAddy" class="">(City,State or ZIP Code)</label>';html[i++]="</form></h4>";html[i++]="</div>";html[i++]="<div>";html[i++]='<div id="preferredStoreLocation" class="floatLeft">';html[i++]='<div id="preferredStoreDetails" class="separatorRight">';html[i++]='<div id="preferredStoreAddress">';html[i++]="<p>";html[i++]="<strong>"+storeLocJson.name+"</strong><br/>";html[i++]='<span id="preferredFullAddress">'+storeLocJson.address+"<br/>"+storeLocJson.city+","+storeLocJson.stat+" "+storeLocJson.zip+"</span>";html[i++]="</p>";html[i++]="</div>";html[i++]='<div class="preferredStatus marginBottomSmall">';html[i++]='<div class="preferred">Preferred Store</div>';html[i++]="</div>";html[i++]='<a href="javascript:;">Store Details</a>';html[i++]="</div>";html[i++]="</div>";html[i++]='<div id="preferredOtherStores" class="floatLeft">';html[i++]="<div>";html[i++]='<p>Shop for items with <span class="go">MyGofer</span>, and we\'ll get them ready for pickup when and where you want.</p>';html[i++]='<p class="flowRight"><a href="javascript:;" class="poweredBy"></a></p>';html[i++]="</div>";html[i++]="<div>";html[i++]='<form id="preferredCheckOtherStore">';html[i++]="<fieldset>";html[i++]="<legend>Check Other Stores</legend>";html[i++]="<div>";html[i++]='<select id="storearea">';html[i++]='<option value="50">Within 50 miles</option>';html[i++]='<option value="75">Within 75 miles</option>';html[i++]='<option value="100">Within 100 miles</option>';html[i++]='<option value="300">Within 300 miles</option>';html[i++]="</select>";html[i++]='of <span class="preferredMyAddress">'+myLocation+"</span>";html[i++]="</div>";html[i++]='<button id="searchbutton">Search</button>';html[i++]="</fieldset>";html[i++]="</form>";html[i++]="</div>";html[i++]="</div>";html[i++]="</div>";html[i++]="</div>";html[i++]="</div>";html[i++]='<div id="currentStoreDetails" class="clearfix">';html[i++]='<div id="kmart_detailsMap_0" class="detailsMapClass" />';html[i++]='<div id="detailInfo">';html[i++]='<p id="detailPhone"><span>Phone:</span> '+formatPhone(storeLocJson.phone1)+"</p>";html[i++]="<p><span>Hours:</span> (all times CST)";html[i++]="</p>";html[i++]='<dl id="detailHours">';html[i++]="<dt>Mon:</dt><dd>"+storeLocJson.monhr+"</dd>";html[i++]="<dt>Tue:</dt><dd>"+storeLocJson.tuehr+"</dd>";html[i++]="<dt>Wed:</dt><dd>"+storeLocJson.wedhr+"</dd>";html[i++]="<dt>Thu:</dt><dd>"+storeLocJson.thuhr+"</dd>";html[i++]="<dt>Fri:</dt><dd>"+storeLocJson.frihr+"</dd>";html[i++]="<dt>Sat:</dt><dd>"+storeLocJson.sathr+"</dd>";html[i++]="<dt>Sun:</dt><dd>"+storeLocJson.sunhr+"</dd>";html[i++]="</dl>";html[i++]="</div>";html[i++]="</div>";html[i++]='	<script type="text/javascript">MyLocation.deferedFunctions.searchOtherStores();<\/script>';html[i++]="</div>";MyLocation.init();var preferredStoreContent=html.join("");$("#shcModalWrapper2 #loc_shcModal-contentwrap2").empty();$("#shcModalWrapper2 #loc_shcModal-contentwrap2").append(preferredStoreContent);$("#loc_shcModal #shcModalWrapper1").hide();if(headerPopUpFlag==true){$("#loc_shcModal").hide();$("#loc_shcModal #shcModalWrapper2").hide();$("#loc_shcModal #shcModalWrapper3").hide();$("#preferredLocation #ffmentChangeForm").hide()}else{$("#loc_shcModal").show();$("#loc_shcModal #shcModalWrapper2").show();$("#loc_shcModal #shcModalWrapper3").hide();$("#preferredLocation #ffmentChangeForm").hide()}attachEventListeners();$("#preferredLocation h4 a.preferredMyAddress").click()}else{if($.cookie(COOKIE_NAME)!=null){$.cookie(COOKIE_NAME,null,{path:"/"});$.cookie(COOKIE_NAME,null,{path:"/shc/s/"});$.cookie(COOKIE_NAME,null,{path:"/shc/s"})}var suggestionDiv='<div id="locationSuggestions"><div><strong class="important"><br>Did you mean...</strong><br></div></div><script type="text/javascript">MyLocation.deferedFunctions.initAddress();<\/script></div>';$("#shcModalWrapper1 #loc_shcModal-content").append(suggestionDiv);var msg="<div>&ldquo;Buy Online, Pickup In-Store&rdquo; isn&rsquo;t available at a Kmart within 50 mi. You can still visit your local Kmart, search a different ZIP or have your order shipped to you.</div>";$(".ajaxLoader").remove();$("#shcModalWrapper1 #customerLocation #findStore").css("display","inline");$("#locationSuggestions").html(msg).slideDown("fast",function(){$("#locationSuggestions").animate({opacity:1},"fast")});MyLocation.init();MyLocation.resetAjaxCall();attachEventListeners();$("#loc_shcModal").show();var userLocation=FormatRSPUCookie.getSPURefactorCookie().userLocation;$("div#loc_shcModal div#shcModalWrapper1 #loc_shcModal-content").find("input").val(userLocation);$("#loc_shcModal #shcModalWrapper1").show();$("#shcModalWrapper2 #loc_shcModal-contentwrap2").empty();$("#loc_shcModal #shcModalWrapper2").hide();if(headerPopUpFlag==true){$("#loc_shcModal").hide();$("#loc_shcModal #shcModalWrapper2").hide();$("#loc_shcModal #shcModalWrapper3").hide();$("#preferredLocation #ffmentChangeForm").hide()}else{$("#loc_shcModal").show();$("#loc_shcModal #shcModalWrapper2").hide();$("#loc_shcModal #shcModalWrapper3").hide();$("#preferredLocation #ffmentChangeForm").hide()}}}function formatPhone(phone){phoneText=[],i=0;if(phone!="undefined"&&phone!=""){phone=jQuery.trim(phone);var phoneText1=phone.substring(0,3);var phoneText2=phone.substring(3,6);var phoneText3=phone.substring(6,10);leftBrace="(";rightBrace=")";hyphen="-";space="";phone=leftBrace+phoneText1+rightBrace+space+phoneText2+hyphen+phoneText3}else{phone="(1800)MY-SEARS"}return phone}function replaceAll(address){var index=address.indexOf("+");while(index!=-1){address=address.replace("+"," ");index=address.indexOf("+")}return address}function errorFunction(jsonResponse){return false}function fetchPreferredStoreUnitNoFromCookie(){var unitNo="";var cookieValue=$.cookie(PREFSTORE_COOKIE_GLOBAL);if(typeof cookieValue!="undefined"&&cookieValue!=null&&cookieValue!=" "&&cookieValue.length>0){unitNo=cookieValue}else{cookieValue=$.cookie(COOKIE_NAME);if(typeof cookieValue!="undefined"&&cookieValue!=null&&cookieValue!=" "&&cookieValue.length>0){unitNo=cookieValue}}return unitNo}function isSameUnit(){var prefStoreUnitNo=$.cookie(PREFSTORE_COOKIE_GLOBAL);var unitNo1="",unitNo2="";if(typeof prefStoreUnitNo!="undefined"&&prefStoreUnitNo!=null&&prefStoreUnitNo!=" "&&prefStoreUnitNo.length>0){unitNo1=prefStoreUnitNo}var pickupUnitNo=$.cookie(COOKIE_NAME);if(typeof pickupUnitNo!="undefined"&&pickupUnitNo!=null&&pickupUnitNo!=" "&&pickupUnitNo.length>0){unitNo2=pickupUnitNo}if(unitNo1!=null&&unitNo2!=null&&unitNo1.length>0&&unitNo2.length>0&&(unitNo1==unitNo2)){return true}else{return false}}function updatePrefStoreInCheckout(thisObj,unitNo){$.cookie(PREFSTORE_COOKIE_GLOBAL,unitNo,{path:"/"});var requestParams="action=UPDATE&unitNumber="+unitNo;$.ajax({type:"GET",url:"/shc/s/SpuRefactorCookieHandlerCmd",data:requestParams,success:function(){location.href=location.href;headerPopUpFlag=false}})}function fnGetStoreHourHtml(strInfo){var html="";var ohour,chour;if(strInfo.monophr>=0&&strInfo.monclhr>0){ohour=strInfo.monophr;chour=strInfo.monclhr}else{ohour=strInfo.wkophr;chour=strInfo.wkclhr}if(ohour>=0&&chour>0){html+="<br><span>Mon: ";html+=fnCreateStoreHours(ohour,chour);html+="</span>"}if(strInfo.tueophr>=0&&strInfo.tueclhr>0){ohour=strInfo.tueophr;chour=strInfo.tueclhr}else{ohour=strInfo.wkophr;chour=strInfo.wkclhr}if(ohour>0&&chour>0){html+="<br><span>Tue: ";html+=fnCreateStoreHours(ohour,chour);html+="</span>"}if(strInfo.wedophr>=0&&strInfo.wedclhr>0){ohour=strInfo.wedophr;chour=strInfo.wedclhr}else{ohour=strInfo.wkophr;chour=strInfo.wkclhr}if(ohour>=0&&chour>0){html+="<br><span>Wed: ";html+=fnCreateStoreHours(ohour,chour);html+="</span>"}if(strInfo.thuophr>=0&&strInfo.thuclhr>0){ohour=strInfo.thuophr;chour=strInfo.thuclhr}else{ohour=strInfo.wkophr;chour=strInfo.wkclhr}if(ohour>=0&&chour>0){html+="<br><span>Thu: ";
html+=fnCreateStoreHours(ohour,chour);html+="</span>"}if(strInfo.friophr>=0&&strInfo.friclhr>0){ohour=strInfo.friophr;chour=strInfo.friclhr}else{ohour=strInfo.wkophr;chour=strInfo.wkclhr}if(ohour>=0&&chour>0){html+="<br><span>Fri: ";html+=fnCreateStoreHours(ohour,chour);html+="</span>"}ohour=strInfo.satophr;chour=strInfo.satclhr;if(ohour>=0&&chour>0){html+="<br><span>Sat: ";html+=fnCreateStoreHours(ohour,chour);html+="</span>"}ohour=strInfo.sunophr;chour=strInfo.sunclhr;if(ohour>=0&&chour>0){html+="<br><span>Sun: ";html+=fnCreateStoreHours(ohour,chour);html+="</span>"}if(html!=""){html='<p class="hours"><strong>Hours:</strong>'+html+"</p>"}return html}function fnGetHolidayHourHtml(strInfo){var html="";var name,ohour,chour;for(var i=0;i<strInfo.hdt.length&&i<7;i++){name=getHolidayDate(strInfo.hdt[i]);if(name!=""){ohour=strInfo.hopntm[i];chour=strInfo.hclstm[i];if(chour>=0){html+="<br><span>"+name+": ";if(ohour==0&&chour==0){html+=" CLOSED"}else{if(ohour>0&&chour>0){html+=fnCreateStoreHours(ohour,chour)}}html+="</span>"}}}if(html!=""){html='<p class="hours"><strong>Holiday Hours:</strong>'+html+"<br></p>"}return html}function getHolidayDate(dt){if(dt=="0000-00-00"){return""}var year=dt.substring(0,dt.indexOf("-"));var month=parseInt(dt.substring(dt.indexOf("-")+1,dt.lastIndexOf("-")))-1;var date=dt.substring(dt.lastIndexOf("-")+1);if((new Date(month+"/"+date+"/"+year))>new Date()){return""}else{return monthnames[month]+" "+date+", "+year}}function fnCreateStoreHours(ohour,chour){ohour=getHoursFromSeconds(ohour);chour=getHoursFromSeconds(chour);var html="";if(ohour==0){html+="12:00 am"}if(ohour>0&&ohour<1){html+=fnDisplayTime(12+(ohour%12))+" am"}else{if(ohour>=1&&ohour<12){html+=fnDisplayTime(ohour)+" am"}else{if(ohour==12){html+=fnDisplayTime(ohour)+" pm"}else{if(ohour>12&&ohour<13){html+=fnDisplayTime(12+(ohour%12))+" pm"}else{if(ohour>=13){html+=fnDisplayTime((ohour%12))+" pm"}}}}}html+=" - ";if(chour==0){html+="12:00 am"}if(chour>0&&chour<1){html+=fnDisplayTime(12+(chour%12))+" am"}else{if(chour>=1&&chour<12){html+=fnDisplayTime(chour)+" am"}else{if(chour==12){html+=fnDisplayTime(chour)+" pm"}else{if(chour>12&&chour<13){html+=fnDisplayTime(12+(chour%12))+" pm"}else{if(chour>=13){html+=fnDisplayTime((chour%12))+" pm"}}}}}return html}function getHoursFromSeconds(sec){var sec=trimSPUStr(sec);var disptime;if(sec!=""){sec=parseInt(sec)/60/60}else{sec=-1}return sec}function trimSPUStr(st){if(st==undefined||st==null){return""}st+="";var len=st.length;var begin=0,end=len-1;while((st.charAt(begin)==" "||st.charAt(begin)=="\n")&&begin<len){begin++}while((st.charAt(end)==" "||st.charAt(end)=="\n")&&begin<end){end--}return st.substring(begin,end+1)}function fnDisplayTime(time){var hrs=Math.floor(time);var min=time-hrs;min=min*60;if(min.toString().length>2){min=parseInt(min)}if(min==0){min="00"}return(hrs+":"+min)}function getUserStatus(){var cookieValue=$.cookie("s_r");cookieValue=unescape(cookieValue);if(cookieValue!==null&&cookieValue!==undefined&&cookieValue==="s_r_Y"){UName="R"}else{UName="G"}return UName}if($.cookie("zipCode")!==null&&$.cookie("RSPULocInfo")===null){if($("div#loc_shcModal").is(":visible")){$("#loc_shcModal-closer").trigger("click")}setTimeout("delayZipCodeCall()",1000)}});function delayZipCodeCall(){MyLocation.getZipCodeFromDB($.cookie("zipCode"),"")}function delayZipCodeCall(){MyLocation.getZipCodeFromDB($.cookie("zipCode"),"")}function createPickupStoreIdCookie(a){if(typeof a.result[0]!="undefined"&&a.result[0]!=""){var b=a.result[0].unitno}if(typeof b!="undefined"&&b!=""){if($.cookie(COOKIE_NAME)!=null){$.cookie(COOKIE_NAME,null,{path:"/"});$.cookie(COOKIE_NAME,null,{path:"/shc/s/"});$.cookie(COOKIE_NAME,null,{path:"/shc/s"})}$.cookie(COOKIE_NAME,b,{path:"/",expires:365})}};
 /*   /opt/SVNBAAD/SVNBRANCH/ECOM_REL_06-Feb-2013/wcs-static/StaticWeb/WebContent/StaticContent/Kmart/shared/js/refactorSPU/jquery.animate-shadow-min.js:364636   */
jQuery(function(l,c){function b(){var f=l("script:first"),e=f.css("color"),i=false;if(/^rgba/.test(e)){i=true}else{try{i=e!=f.css("color","rgba(0, 0, 0, 0.5)").css("color");f.css("color",e)}catch(h){}}return i}function a(f,e,j){var i=[];f.c&&i.push("inset");typeof e.left!="undefined"&&i.push(parseInt(f.left+j*(e.left-f.left),10)+"px "+parseInt(f.top+j*(e.top-f.top),10)+"px");typeof e.blur!="undefined"&&i.push(parseInt(f.blur+j*(e.blur-f.blur),10)+"px");typeof e.a!="undefined"&&i.push(parseInt(f.a+j*(e.a-f.a),10)+"px");if(typeof e.color!="undefined"){var h="rgb"+(l.support.rgba?"a":"")+"("+parseInt(f.color[0]+j*(e.color[0]-f.color[0]),10)+","+parseInt(f.color[1]+j*(e.color[1]-f.color[1]),10)+","+parseInt(f.color[2]+j*(e.color[2]-f.color[2]),10);if(l.support.rgba){h+=","+parseFloat(f.color[3]+j*(e.color[3]-f.color[3]))}h+=")";i.push(h)}return i.join(" ")}function d(f){var e,i,h={};if(e=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/.exec(f)){i=[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1]}else{if(e=/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])/.exec(f)){i=[parseInt(e[1],16)*17,parseInt(e[2],16)*17,parseInt(e[3],16)*17,1]}else{if(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(f)){i=[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),1]}else{if(e=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9\.]*)\s*\)/.exec(f)){i=[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),parseFloat(e[4])]}}}}h=(e=/(-?[0-9]+)(?:px)?\s+(-?[0-9]+)(?:px)?(?:\s+(-?[0-9]+)(?:px)?)?(?:\s+(-?[0-9]+)(?:px)?)?/.exec(f))?{left:parseInt(e[1],10),top:parseInt(e[2],10),blur:e[3]?parseInt(e[3],10):0,a:e[4]?parseInt(e[4],10):0}:{left:0,top:0,blur:0,a:0};h.c=/inset/.test(f);h.color=i;return h}l.extend(true,l,{support:{rgba:b()}});var g;l.each(["boxShadow","MozBoxShadow","WebkitBoxShadow"],function(f,e){f=l("html").css(e);if(typeof f=="string"&&f!=""){g=e;return false}});if(g){l.fx.step.boxShadow=function(e){if(!e.init){e.b=d(l(e.elem).get(0).style[g]||l(e.elem).css(g));e.end=l.extend({},e.b,d(e.end));if(e.b.color==c){e.b.color=e.end.color||[0,0,0]}e.init=true}e.elem.style[g]=a(e.b,e.end,e.pos)}}});
 /*   /opt/SVNBAAD/SVNBRANCH/ECOM_REL_06-Feb-2013/wcs-static/StaticWeb/WebContent/StaticContent/Kmart/shared/js/refactorSPU/jquery.animation.easing.js:364636   */
eval(function(h,b,j,f,g,i){g=function(a){return(a<b?"":g(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(j--){i[g(j)]=f[j]||g(j)}f=[function(a){return i[a]}];g=function(){return"\\w+"};j=1}while(j--){if(f[j]){h=h.replace(new RegExp("\\b"+g(j)+"\\b","g"),f[j])}}return h}("x.G(x.D,{C:a(p,n,3,6){9 c=3+6;9 s=1.q;8 c*(p/=1)*p*((s+1)*p-s)+3},I:a(p,n,3,6){9 c=3+6;9 s=1.q;8 c*((p=p/1-1)*p*((s+1)*p+s)+1)+3},J:a(p,n,3,6){9 c=3+6;9 s=1.q;d((p/=0.5)<1)8 c/2*(p*p*(((s*=(1.z))+1)*p-s))+3;e 8 c/2*((p-=2)*p*(((s*=(1.z))+1)*p+s)+2)+3},Q:a(p,n,3,6){9 c=3+6;9 w=O.A(1-p,1,0,6);8 c-w+3},A:a(p,n,3,6){9 c=3+6;d(p<(1/2.h)){8 c*(7.k*p*p)+3}e d(p<(2/2.h)){8 c*(7.k*(p-=(1.5/2.h))*p+.h)+3}e d(p<(2.5/2.h)){8 c*(7.k*(p-=(2.m/2.h))*p+.P)+3}e{8 c*(7.k*(p-=(2.F/2.h))*p+.M)+3}},L:a(p,n,3,6){9 c=3+6;8-c*(b.l(1-(p/=1)*p)-1)+3},K:a(p,n,3,6){9 c=3+6;8 c*b.l(1-(p=p/1-1)*p)+3},N:a(p,n,3,6){9 c=3+6;d((p/=0.5)<1)8-c/2*(b.l(1-p*p)-1)+3;e 8 c/2*(b.l(1-(p-=2)*p)+1)+3},E:a(p,n,3,6){9 c=3+6;8 c*(p/=1)*p*p+3},B:a(p,n,3,6){9 c=3+6;8 c*((p=p/1-1)*p*p+1)+3},H:a(p,n,3,6){9 c=3+6;d((p/=0.5)<1)8 c/2*p*p*p+3;e 8 c/2*((p-=2)*p*p+2)+3},R:a(p,n,3,6){9 c=3+6;d(p==0)8 3;d(p==1)8 c;9 g=0.m;9 s;9 f=c;d(f<b.t(c)){f=c;s=g/4}e{s=g/(2*b.i)*b.u(c/f)}8-(f*b.j(2,10*(p-=1))*b.o((p*1-s)*(2*b.i)/g))+3},T:a(p,n,3,6){9 c=3+6;d(p==0)8 3;d(p==1)8 c;9 g=0.m;9 s;9 f=c;d(f<b.t(c)){f=c;s=g/4}e{s=g/(2*b.i)*b.u(c/f)}8-(f*b.j(2,-10*p)*b.o((p*1-s)*(2*b.i)/g))+c},14:a(p,n,3,6){9 c=3+6;8(p==0)?3:c*b.j(2,10*(p-1))+3-c*0.r},S:a(p,n,3,6){9 c=3+6;8(p==1)?c:6*1.r*(-b.j(2,-10*p)+1)+3},16:a(p,n,3,6){9 c=3+6;d(p==0)8 3;d(p==1)8 c;d((p/=0.5)<1)8 c/2*b.j(2,10*(p-1))+3-c*0.v;e 8 c/2*1.v*(-b.j(2,-10*--p)+2)+3},18:a(p,n,3,6){9 c=3+6;8 c*(p/=1)*p+3},17:a(p,n,3,6){9 c=3+6;8-c*(p/=1)*(p-2)+3},15:a(p,n,3,6){9 c=3+6;d((p/=0.5)<1)8 c/2*p*p+3;e 8-c/2*((--p)*(p-2)-1)+3},13:a(p,n,3,6){9 c=3+6;8 c*(p/=1)*p*p*p+3},V:a(p,n,3,6){9 c=3+6;8-c*((p=p/1-1)*p*p*p-1)+3},U:a(p,n,3,6){9 c=3+6;d((p/=0.5)<1)8 c/2*p*p*p*p+3;e 8-c/2*((p-=2)*p*p*p-2)+3},W:a(p,n,3,6){9 c=3+6;8 c*(p/=1)*p*p*p*p+3},X:a(p,n,3,6){9 c=3+6;8 c*((p=p/1-1)*p*p*p*p+1)+3},11:a(p,n,3,6){9 c=3+6;d((p/=0.5)<1)8 c/2*p*p*p*p*p+3;e 8 c/2*((p-=2)*p*p*p*p+2)+3},Z:a(p,n,3,6){9 c=3+6;8-c*b.y(p*(b.i/2))+c+3},Y:a(p,n,3,6){9 c=3+6;8 c*b.o(p*(b.i/2))+3},12:a(p,n,3,6){9 c=3+6;8-c/2*(b.y(b.i*p)-1)+3}});",62,71,"|||firstNum|||diff||return|var|function|Math||if|else|amplitude|peroid|75|PI|pow|5625|sqrt|25||sin||70158|001||abs|asin|0005|inv|jQuery|cos|525|bounceEaseOut|cubicEaseOut|backEaseIn|easing|cubicEaseIn|625|extend|cubicEaseInOut|backEaseOut|backEaseInOut|circEaseOut|circEaseIn|984375|circEaseInOut|this|9375|bounceEaseIn|elasticEaseIn|expoEaseOut|elasticEaseOut|quartEaseInOut|quartEaseOut|quintEaseIn|quintEaseOut|sineEaseOut|sineEaseIn||quintEaseInOut|sineEaseInOut|quartEaseIn|expoEaseIn|quadEaseInOut|expoEaseInOut|quadEaseOut|quadEaseIn".split("|"),0,{}));