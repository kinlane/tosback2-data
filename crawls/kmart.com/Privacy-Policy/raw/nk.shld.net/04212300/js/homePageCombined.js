/*  shared/js/emailMe.js::Rev No::367321   */
/*  #RESOURCELIST_START#shared/js/emailMe.js   #RESOURCELIST_END# */

 /*   /opt/SVNBAAD/SVNBRANCH/ECOM_REL_11-Apr-2012/wcs-static/StaticWeb/WebContent/StaticContent/Kmart/shared/js/emailMe.js:367321   */
var checkItemLevel=0,catEntryId_1=0,isSoftlineOutStockEmail=0,isProductPage=false;function checkItemLevelCatEntry(a){checkItemLevel=a}function checkSoftlinePage(a){isSoftlineOutStockEmail=a}function deCodePName(a){return a.replaceAll("##12","'").replaceAll("##13","''")}function storeLocatorPopup(){var a=$("#zipCode").val();if(checkZipCode()){$.cookie("zipCode",a);window.location="StorePickupCommand?storeId="+$("#zipStoreId").val()+"&langId=-1&catalogId="+$("#zipCatalogId").val()+"&zipCode="+a+"&catEntryId_1="+$("#zipCatEntryId").val()+"&quantity_1=1"+"&URL="+escape($("#zipProductURL").val())+"&browseFlag=browseSearch";return false}else{return false}}function checkZipCode(){if(!FED.Util.isValidZipcode($("#zipCode").val())){alert("Please enter a valid 5-digit ZIP code (example: 60515).");return false}else{return true}}$(function(){var b,c;b=document.getElementsByTagName("a");for(c=0;c<b.length;c++){if(b[c].rel==="emailMe"){b[c].onclick=function(){mePop(this.getAttribute("info"),this.rel)}}if(b[c].rel==="storePickup"){b[c].onclick=function(){mePop(this.getAttribute("info"),this.rel)}}}});function tempFunc(){var a;if(isProductPage){a="catEntryId="+$("#emailCatEntryId").val()+"&storeId="+getStoreId()}else{a="partNumber="+$("#emailPartNumber").val()+"&storeId="+$("#emailStoreId").val()}$.ajax({url:"/shc/s/EmailMeWhenInStockCmd",data:a+"&userEmail="+$("#emailMeAddress").val()})}function validateEmailId(){var a=$("#emailMeAddress").val();if(a===""){alert("Email address is required");return false}return validateEmailAddress(a.toLowerCase(),a)}validateOOSEmailId=validateEmailId;function mePop(e,d){var j=$("body").attr("id"),i,n,m="",k="",c="",g="",l="",p="",a="",o="",f="",b="",h="delivery";if(!!d&&$("#"+d).length===0&&e!=null){if($("#grayDiv").length===0){$('<div id="grayDiv" class="transparent" />').appendTo("body").css({zIndex:1000,height:$("body").height()+200,width:$("body").width()})}else{$("#grayDiv").show()}n=$('<div id="'+d+'" class="floatWindow" />').appendTo("body").css({zIndex:2001});i=e.split("^ ");k=i[1];if(typeof k==="undefined"){i=e.split("^")}if(e.indexOf("`")>=0){b=e.split("`")[0];e=e.split("`")[1]}if(b!==""){h="pre-order"}isProductPage=(["product","hardline","softline","collection"].indexOf(j)>=0);if(isProductPage){m=deCodePName(i[0]);k=i[1];c=i[2];g=i[3];catEntryId_1=i[4];l=i[5];p=i[6];a=i[7];o=i[8];f=i[9]}else{m=i[0];k=i[1];c=i[2];catEntryId_1=i[3];l=i[4];p=i[5];a=i[6];o=i[7];f=i[8]}if(checkItemLevel===0){if(isSoftlineOutStockEmail==1){catEntryId_1=_Pd.prod.prodList[emailPIndex].sProd}}switch(d){case"emailMe":$("#emailMe").html("<p onclick=\"remove(this.parentNode);hideBox('grayDiv');enableSelect();\">"+'<a href="javascript:;" class="closeWindow">Close</a></p><br clear="all">'+'<div id="sorryMsg"><p>We\'re sorry but the <b>'+m+"</b> is temporarily unavailable for "+h+". Please enter your e-mail address below and we will notify you when it is available.</p>"+'<input type="hidden" id="emailStoreId" name="storeId" value="'+o+'">'+'<input type="hidden" id="emailCatEntryId" name="catEntryId" value="'+catEntryId_1+'">'+'<input type="hidden" id="emailPartNumber" name="partNumber" value="'+k+'">'+'<p><b>Email address:</b> <input class="text" id="emailMeAddress" type="text" name="userEmail" size="20" value="'+($.cookie("userEmail")||"")+'"><a href="javascript:;" '+"onClick=\"if(validateOOSEmailId()){showBox('thankYou');hideBox('sorryMsg');document.getElementById('emailAddress').innerHTML=document.getElementById('emailMeAddress').value;$.cookie('userEmail',document.getElementById('emailMeAddress').value);tempFunc();}\">"+'<img id="emailMeAvailSubmitBtn" width="65" height="21" alt="submit" align="top" style="margin-top: -1px; _margin-top:1px; position: relative; top: 7px;"></a></p><br /></div>'+'<div id="thankYou" style="display:none;"><p>Thank you. You will be notified at <b id="emailAddress"></b>&nbsp;when the following item is available:</p><p><b>'+m+"</b><br><small>"+g+" Item #"+k+" Mfr. model #"+c+"</small></p><p>Pricing is subject to change.</p></div>");setTimeout(function(){if(typeof itCssImgDir!=="undefined"&&typeof a!=="undefined"){$("#emailMe #emailMeAvailSubmitBtn").attr("src",itCssImgDir+a+"submit_blue.gif")}else{if(typeof imagePath!=="undefined"){$("#emailMe #emailMeAvailSubmitBtn").attr("src",imagePath+"img/buttons/submit_blue.gif")}}},0);break;case"storePickup":$("#storePickup").html("<p onclick=\"remove(this.parentNode);hideBox('grayDiv');enableSelect();\">"+'<a href="javascript:;" class="closeWindow">Close</a></p><br clear="all">'+'<input type="hidden" id="zipCatEntryId" name="catEntryId_1" value="'+catEntryId_1+'">'+'<input type="hidden" id="zipProductURL" name="URL" value="'+l+'">'+'<input type="hidden" id="zipPartNumber" name="partNumber" value="'+k+'">'+'<input type="hidden" id="zipStoreId" name="storeId" value="'+o+'">'+'<input type="hidden" id="zipCatalogId" name="catalogId" value="'+f+'">'+'<p><b>Enter Zip Code:</b> <input type="text" name="zipCode" id="zipCode" size="15" maxlength="5" class="text" value="'+$.cookie("zipCode")+'" /> '+'<a href="javascript:;" onClick="return storeLocatorPopup();">'+'<img id="storePickupGoBtn" alt="go button" align="absmiddle"></p></a>');setTimeout(function(){$("#storePickupGoBtn").attr("src",itCssImgDir+a+"go_blue.gif")},0);break}n.centerOnScreen();disableSelect()}}function validateEmailAddress(b,a){b=trim(b);if(b===""){alert("Email address is required");return false}if(!FED.Util.isValidEmail(b)){alert("The e-mail address you entered appears incorrect. (Example of a correct address: sears@sears.com.) Please check your information and try again.");return false}else{if(!FED.Util.isValidEmailUser(b)){alert(a+" is not allowed");return false}}return true};