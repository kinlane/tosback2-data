var mwf=new function(){};mwf.site=new function(){this.root = 'http://m.ucla.edu';this.asset = new function(){this.root = 'http://m.ucla.edu/assets';};this.cookie = new function(){this.prefix = 'mwf_';this.domain = 'm.ucla.edu';this.exists = function(e){var cookies = [""];for(var i=0; i<cookies.length; i++)if(cookies[i] == e)return true;return false;};this.override = false;this.classification = false;};this.analytics = new function(){this.key = 'UA-423028-28';};this.mobile = new function(){this.maxWidth = 799;this.maxHeight = 599;};this.local = new function(){this.root = ""; this.asset = new function(){ this.root = "assets"; };this.domain = (function(){var p = document.URL, i;if((i = p.indexOf('://')) !== false)p = p.substring(i+3);else if((i = p.indexOf('//')) === 0)p = p.substring(2);if((i = p.indexOf('/')) > -1)p = p.substring(0, i);if((i = p.indexOf(':')) > -1)p = p.substring(0, i);if((i = p.indexOf('.')) == 0)p = p.substring(1);return p;})();var _isSameOrigin = null;this.isSameOrigin = function(){if(_isSameOrigin === null){if(!this.domain || !mwf.site.cookie.domain){_isSameOrigin = true;}else{var serviceProvider = "."+mwf.site.cookie.domain.toLowerCase();var contentProvider = "."+this.domain.toLowerCase();_isSameOrigin = contentProvider.substring(contentProvider.length - serviceProvider.length, serviceProvider.length) == serviceProvider;}}return _isSameOrigin;};this.cookie = new function(){var cookies = document.cookie.split(';');this.exists = function(e){return this.value(e) !== false;};this.value = function(e){for(var i = 0; i < cookies.length; i++)if(cookies[i].substr(0,cookies[i].indexOf("=")).replace(/^\s+|\s+$/g,"") == e)return cookies[i].substr(cookies[i].indexOf("=")+1).replace(/^\s+|\s+$/g,"");return false;};};};this.domain=function(){return this.local.domain;};this.webroot=function(){return this.root;};this.frontpage=function(){return this.root+'/index.php';};this.webassetroot=function(){return this.asset.root;};};mwf.userAgent=new function(){this.cookieName=mwf.site.cookie.prefix+"user_agent";var b=navigator.userAgent.toLowerCase();var a=function(c){return b.indexOf(c)!=-1};this.getOS=function(){if(b.match(/(iphone)|(ipad)|(ipod)/)!=null){return"iphone_os"}var d=0,c=["android","blackberry","windows phone os","windows mobile","symbian","webos","mac os x","windows nt","linux"];for(;d<c.length;d++){if(a(c[d])){return c[d]}}return""};this.getOSVersion=function(){var c=b,d,e="";switch(this.getOS()){case"iphone_os":d=c.indexOf("iphone os")+10;e=c.substring(d,c.indexOf(" ",d));case"blackberry":if(c.substring(0,10)=="blackberry"){d=c.indexOf("/")+1;e=c.substring(d,c.indexOf(" ",d))}break;case"android":if((d=c.indexOf("android "))!=-1){d+=8;e=c.substring(d,Math.min(c.indexOf(" ",d),c.indexOf(";",d),c.indexOf("-",d)))}break;case"windows_phone":if((d=c.indexOf("windows phone os "))!=-1){d+=17;e=c.substring(d,c.indexOf(";",d))}break;case"windows_mobile":if((d=c.indexOf("windows mobile/"))!=-1){d+=15;e=c.substring(d,c.indexOf(";",d))}break;case"symbian":if((d=c.indexOf("symbianos/"))!=-1){d+=10;e=c.substring(d,c.indexOf(";",d))}else{if((d=c.indexOf("symbian/"))!=-1){d+=8;e="s"+c.substring(d,c.indexOf(";",d))}}break;case"webos":if((d=c.indexOf("webos/"))!=-1){d+=6;e=c.substring(d,Math.min(c.indexOf(";",d)))}break}return e.replace(/\_/g,".")};this.getBrowser=function(){if(a("safari")){return this.getOS()=="android"?"android_webkit":"safari"}var c=0,d=["chrome","iemobile","camino","seamonkey","firefox","opera_mobi","opera_mini"];for(;c<d.length;c++){if(a(d[c])){return d[c]}}return""};this.getBrowserEngine=function(){if(a("applewebkit")){return"webkit"}var d=0,c=["trident","gecko","presto","khtml"];for(;d<c.length;d++){if(a(c[d])){return c[d]}}return""};this.getBrowserEngineVersion=function(){var d=b,e;var c=function(g){var f=d.indexOf(g)+g.length;return d.substring(f,Math.min(d.indexOf(" ",f),d.indexOf(";",f)))};switch(this.getBrowserEngine()){case"webkit":return c("applewebkit/");case"trident":return c("trident/");case"gecko":return c("gecko/");case"presto":e=d.indexOf("presto/")+7;return d.substring(e,Math.min(d.indexOf("/",e),d.indexOf(" ",e),d.indexOf(")",e)))}return""};this.generateCookieContent=function(){var c="{";c+='"s":"'+navigator.userAgent+'"';if(t=this.getOS()){c+=',"os":"'+t+'"'}if(t=this.getOSVersion()){c+=',"osv":"'+t+'"'}if(t=this.getBrowser()){c+=',"b":"'+t+'"'}if(t=this.getBrowserEngine()){c+=',"be":"'+t+'"'}if(t=this.getBrowserEngineVersion()){c+=',"bev":"'+t+'"'}c+="}";return c}};mwf.screen=new function(){this.cookieName=mwf.site.cookie.prefix+"screen";var b=window.screen;var a=mwf.userAgent.getOSVersion();if(typeof mwf.userAgent!=="undefined"&&mwf.userAgent.getOS()=="android"&&(a.indexOf("2.2")==0||a.indexOf("2.3")==0)){b={width:false,height:false}}this.getWidth=function(){return typeof b.width!=="undefined"?b.width:mwf.browser.getWidth()};this.getHeight=function(){return typeof b.height!=="undefined"?b.height:mwf.browser.getHeight()};this.getPixelRatio=function(){return(typeof window.devicePixelRatio!="undefined"&&window.devicePixelRatio)?window.devicePixelRatio:1};this.generateCookieContent=function(){return'{"h":"'+this.getHeight()+'","w":"'+this.getWidth()+'","r":"'+this.getPixelRatio()+'"}'}};mwf.redirect=function(a){if(mwf.site.mobile.maxHeight>mwf.screen.getHeight()&&mwf.site.mobile.maxWidth>mwf.screen.getWidth()){window.location=a}};mwf.redirect("http://m.ucla.edu");