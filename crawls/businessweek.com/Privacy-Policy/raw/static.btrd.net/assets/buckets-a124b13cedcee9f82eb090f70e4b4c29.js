//name spacing stuff
if(typeof BLOOMBERG=="undefined"||!BLOOMBERG)var BLOOMBERG={};(function(){BLOOMBERG.namespace=function(a){var b=[],c,d;b=a.split("."),c=BLOOMBERG,b[0]==="BLOOMBERG"&&b.shift();for(d=0;d<b.length;d++)typeof c[b[d]]=="undefined"&&(c[b[d]]={}),c=c[b[d]];return c}})();var _BUCKET="",_BUCKET_GROUP="";(function(){var buckets=BLOOMBERG.namespace("buckets"),options={},default_options={};buckets.set_unavailable_buckets=function(a,b){document.cookie="_unavailable_buckets=; expires=Thu, 01-Jan-70 00:00:01 GMT;";var c=[];for(var d=0;d<a.length;d++)c.push(a[d].name);document.cookie="_unavailable_buckets="+c.join(",")+";expires="+b+";path=/"},buckets.set_bucket=function(a,b,c){document.cookie="_bucket="+a+"|"+b+";expires="+c+";path=/"},buckets.in_bucket=function(){return has_bucket=document.cookie.indexOf("_bucket=")>=0,has_bucket},buckets.execute_bucket_code=function(bucket_name,bucket_group){function create_styles(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("style"),d=document.createTextNode(a);c.type="text/css",c.styleSheet?c.styleSheet.cssText=d.nodeValue:c.appendChild(d),b.appendChild(c)}var ab=AVAILABLE_BUCKETS;for(var i=0;i<ab.length;i++)if(bucket_name==ab[i].name){var groups=ab[i].bucket_groups;for(var x=0;x<groups.length;x++)if(bucket_group==groups[x].name){_BUCKET=bucket_name,_BUCKET_GROUP=bucket_group;var css=groups[x].custom_css,js=groups[x].custom_js;create_styles(css),eval(js)}}},buckets.load_bucket_from_cookie=function(){var a="",b="",c=document.cookie.split(";");for(var d=0;d<c.length;d++)if(c[d].indexOf("_unavailable_buckets")>=0){var e=c[d].split("="),f=e[1].split("|");a=f[0],b=f[1]}else if(c[d].indexOf("_bucket=")>=0){var e=c[d].split("="),f=e[1].split("|");a=f[0],b=f[1]}buckets.execute_bucket_code(a,b)},buckets.select_group=function(a){var b=Math.floor(Math.random()*101);return b%2==0?a[1].name:a[0].name},buckets.really_available_buckets=function(a){var b=document.cookie.split(";"),c=[],d=a;for(var e=0;e<b.length;e++)if(b[e].indexOf("_unavailable_bucket")>=0){var f=b[e].split("=");c=f[1].split(",")}for(e=0;e<c.length;e++){d=[];for(var g=0;g<a.length;g++)f[e]!=a[g].name&&d.push(a[g])}return d},buckets.should_bucket_user=function(){var a=buckets.really_available_buckets(AVAILABLE_BUCKETS),b=Math.floor(Math.random()*101);for(var c=0;c<a.length;c++){var d=a[c].name,e=(new Date(a[c].end_date)).toUTCString();if(b<=a[c].percentage_of_users){var f=buckets.select_group(a[c].bucket_groups);buckets.set_bucket(d,f,e),buckets.execute_bucket_code(d,f)}else{var f=buckets.select_group(a[c].bucket_groups);buckets.set_unavailable_buckets(AVAILABLE_BUCKETS,e)}}},buckets.init_bucket=function(){buckets.in_bucket()?buckets.load_bucket_from_cookie():buckets.should_bucket_user()}})(),BLOOMBERG.buckets.init_bucket();