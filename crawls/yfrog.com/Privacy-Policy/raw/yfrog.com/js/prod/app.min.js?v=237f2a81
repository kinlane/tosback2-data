/*!
 * jQuery JavaScript Library v1.7.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Wed Mar 21 12:46:34 2012 -0700
 */
(function(bd,L){var av=bd.document,bu=bd.navigator,bm=bd.location;var b=(function(){var bF=function(b0,b1){return new bF.fn.init(b0,b1,bD)},bU=bd.jQuery,bH=bd.$,bD,bY=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,bM=/\S/,bI=/^\s+/,bE=/\s+$/,bA=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,bN=/^[\],:{}\s]*$/,bW=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,bP=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bJ=/(?:^|:|,)(?:\s*\[)+/g,by=/(webkit)[ \/]([\w.]+)/,bR=/(opera)(?:.*version)?[ \/]([\w.]+)/,bQ=/(msie) ([\w.]+)/,bS=/(mozilla)(?:.*? rv:([\w.]+))?/,bB=/-([a-z]|[0-9])/ig,bZ=/^-ms-/,bT=function(b0,b1){return(b1+"").toUpperCase()},bX=bu.userAgent,bV,bC,e,bL=Object.prototype.toString,bG=Object.prototype.hasOwnProperty,bz=Array.prototype.push,bK=Array.prototype.slice,bO=String.prototype.trim,bv=Array.prototype.indexOf,bx={};bF.fn=bF.prototype={constructor:bF,init:function(b0,b4,b3){var b2,b5,b1,b6;if(!b0){return this}if(b0.nodeType){this.context=this[0]=b0;this.length=1;return this}if(b0==="body"&&!b4&&av.body){this.context=av;this[0]=av.body;this.selector=b0;this.length=1;return this}if(typeof b0==="string"){if(b0.charAt(0)==="<"&&b0.charAt(b0.length-1)===">"&&b0.length>=3){b2=[null,b0,null]}else{b2=bY.exec(b0)}if(b2&&(b2[1]||!b4)){if(b2[1]){b4=b4 instanceof bF?b4[0]:b4;b6=(b4?b4.ownerDocument||b4:av);b1=bA.exec(b0);if(b1){if(bF.isPlainObject(b4)){b0=[av.createElement(b1[1])];bF.fn.attr.call(b0,b4,true)}else{b0=[b6.createElement(b1[1])]}}else{b1=bF.buildFragment([b2[1]],[b6]);b0=(b1.cacheable?bF.clone(b1.fragment):b1.fragment).childNodes}return bF.merge(this,b0)}else{b5=av.getElementById(b2[2]);if(b5&&b5.parentNode){if(b5.id!==b2[2]){return b3.find(b0)}this.length=1;this[0]=b5}this.context=av;this.selector=b0;return this}}else{if(!b4||b4.jquery){return(b4||b3).find(b0)}else{return this.constructor(b4).find(b0)}}}else{if(bF.isFunction(b0)){return b3.ready(b0)}}if(b0.selector!==L){this.selector=b0.selector;this.context=b0.context}return bF.makeArray(b0,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return bK.call(this,0)},get:function(b0){return b0==null?this.toArray():(b0<0?this[this.length+b0]:this[b0])},pushStack:function(b1,b3,b0){var b2=this.constructor();if(bF.isArray(b1)){bz.apply(b2,b1)}else{bF.merge(b2,b1)}b2.prevObject=this;b2.context=this.context;if(b3==="find"){b2.selector=this.selector+(this.selector?" ":"")+b0}else{if(b3){b2.selector=this.selector+"."+b3+"("+b0+")"}}return b2},each:function(b1,b0){return bF.each(this,b1,b0)},ready:function(b0){bF.bindReady();bC.add(b0);return this},eq:function(b0){b0=+b0;return b0===-1?this.slice(b0):this.slice(b0,b0+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(bK.apply(this,arguments),"slice",bK.call(arguments).join(","))},map:function(b0){return this.pushStack(bF.map(this,function(b2,b1){return b0.call(b2,b1,b2)}))},end:function(){return this.prevObject||this.constructor(null)},push:bz,sort:[].sort,splice:[].splice};bF.fn.init.prototype=bF.fn;bF.extend=bF.fn.extend=function(){var b9,b2,b0,b1,b6,b7,b5=arguments[0]||{},b4=1,b3=arguments.length,b8=false;if(typeof b5==="boolean"){b8=b5;b5=arguments[1]||{};b4=2}if(typeof b5!=="object"&&!bF.isFunction(b5)){b5={}}if(b3===b4){b5=this;--b4}for(;b4<b3;b4++){if((b9=arguments[b4])!=null){for(b2 in b9){b0=b5[b2];b1=b9[b2];if(b5===b1){continue}if(b8&&b1&&(bF.isPlainObject(b1)||(b6=bF.isArray(b1)))){if(b6){b6=false;b7=b0&&bF.isArray(b0)?b0:[]}else{b7=b0&&bF.isPlainObject(b0)?b0:{}}b5[b2]=bF.extend(b8,b7,b1)}else{if(b1!==L){b5[b2]=b1}}}}}return b5};bF.extend({noConflict:function(b0){if(bd.$===bF){bd.$=bH
}if(b0&&bd.jQuery===bF){bd.jQuery=bU}return bF},isReady:false,readyWait:1,holdReady:function(b0){if(b0){bF.readyWait++}else{bF.ready(true)}},ready:function(b0){if((b0===true&&!--bF.readyWait)||(b0!==true&&!bF.isReady)){if(!av.body){return setTimeout(bF.ready,1)}bF.isReady=true;if(b0!==true&&--bF.readyWait>0){return}bC.fireWith(av,[bF]);if(bF.fn.trigger){bF(av).trigger("ready").off("ready")}}},bindReady:function(){if(bC){return}bC=bF.Callbacks("once memory");if(av.readyState==="complete"){return setTimeout(bF.ready,1)}if(av.addEventListener){av.addEventListener("DOMContentLoaded",e,false);bd.addEventListener("load",bF.ready,false)}else{if(av.attachEvent){av.attachEvent("onreadystatechange",e);bd.attachEvent("onload",bF.ready);var b0=false;try{b0=bd.frameElement==null}catch(b1){}if(av.documentElement.doScroll&&b0){bw()}}}},isFunction:function(b0){return bF.type(b0)==="function"},isArray:Array.isArray||function(b0){return bF.type(b0)==="array"},isWindow:function(b0){return b0!=null&&b0==b0.window},isNumeric:function(b0){return !isNaN(parseFloat(b0))&&isFinite(b0)},type:function(b0){return b0==null?String(b0):bx[bL.call(b0)]||"object"},isPlainObject:function(b2){if(!b2||bF.type(b2)!=="object"||b2.nodeType||bF.isWindow(b2)){return false}try{if(b2.constructor&&!bG.call(b2,"constructor")&&!bG.call(b2.constructor.prototype,"isPrototypeOf")){return false}}catch(b1){return false}var b0;for(b0 in b2){}return b0===L||bG.call(b2,b0)},isEmptyObject:function(b1){for(var b0 in b1){return false}return true},error:function(b0){throw new Error(b0)},parseJSON:function(b0){if(typeof b0!=="string"||!b0){return null}b0=bF.trim(b0);if(bd.JSON&&bd.JSON.parse){return bd.JSON.parse(b0)}if(bN.test(b0.replace(bW,"@").replace(bP,"]").replace(bJ,""))){return(new Function("return "+b0))()}bF.error("Invalid JSON: "+b0)},parseXML:function(b2){if(typeof b2!=="string"||!b2){return null}var b0,b1;try{if(bd.DOMParser){b1=new DOMParser();b0=b1.parseFromString(b2,"text/xml")}else{b0=new ActiveXObject("Microsoft.XMLDOM");b0.async="false";b0.loadXML(b2)}}catch(b3){b0=L}if(!b0||!b0.documentElement||b0.getElementsByTagName("parsererror").length){bF.error("Invalid XML: "+b2)}return b0},noop:function(){},globalEval:function(b0){if(b0&&bM.test(b0)){(bd.execScript||function(b1){bd["eval"].call(bd,b1)})(b0)}},camelCase:function(b0){return b0.replace(bZ,"ms-").replace(bB,bT)},nodeName:function(b1,b0){return b1.nodeName&&b1.nodeName.toUpperCase()===b0.toUpperCase()},each:function(b3,b6,b2){var b1,b4=0,b5=b3.length,b0=b5===L||bF.isFunction(b3);if(b2){if(b0){for(b1 in b3){if(b6.apply(b3[b1],b2)===false){break}}}else{for(;b4<b5;){if(b6.apply(b3[b4++],b2)===false){break}}}}else{if(b0){for(b1 in b3){if(b6.call(b3[b1],b1,b3[b1])===false){break}}}else{for(;b4<b5;){if(b6.call(b3[b4],b4,b3[b4++])===false){break}}}}return b3},trim:bO?function(b0){return b0==null?"":bO.call(b0)}:function(b0){return b0==null?"":b0.toString().replace(bI,"").replace(bE,"")},makeArray:function(b3,b1){var b0=b1||[];if(b3!=null){var b2=bF.type(b3);if(b3.length==null||b2==="string"||b2==="function"||b2==="regexp"||bF.isWindow(b3)){bz.call(b0,b3)}else{bF.merge(b0,b3)}}return b0},inArray:function(b2,b3,b1){var b0;if(b3){if(bv){return bv.call(b3,b2,b1)}b0=b3.length;b1=b1?b1<0?Math.max(0,b0+b1):b1:0;for(;b1<b0;b1++){if(b1 in b3&&b3[b1]===b2){return b1}}}return -1},merge:function(b4,b2){var b3=b4.length,b1=0;if(typeof b2.length==="number"){for(var b0=b2.length;b1<b0;b1++){b4[b3++]=b2[b1]}}else{while(b2[b1]!==L){b4[b3++]=b2[b1++]}}b4.length=b3;return b4},grep:function(b1,b6,b0){var b2=[],b5;b0=!!b0;for(var b3=0,b4=b1.length;b3<b4;b3++){b5=!!b6(b1[b3],b3);if(b0!==b5){b2.push(b1[b3])}}return b2},map:function(b0,b7,b8){var b5,b6,b4=[],b2=0,b1=b0.length,b3=b0 instanceof bF||b1!==L&&typeof b1==="number"&&((b1>0&&b0[0]&&b0[b1-1])||b1===0||bF.isArray(b0));if(b3){for(;b2<b1;b2++){b5=b7(b0[b2],b2,b8);if(b5!=null){b4[b4.length]=b5}}}else{for(b6 in b0){b5=b7(b0[b6],b6,b8);if(b5!=null){b4[b4.length]=b5}}}return b4.concat.apply([],b4)
},guid:1,proxy:function(b4,b3){if(typeof b3==="string"){var b2=b4[b3];b3=b4;b4=b2}if(!bF.isFunction(b4)){return L}var b0=bK.call(arguments,2),b1=function(){return b4.apply(b3,b0.concat(bK.call(arguments)))};b1.guid=b4.guid=b4.guid||b1.guid||bF.guid++;return b1},access:function(b0,b6,b9,b7,b4,ca,b8){var b2,b5=b9==null,b3=0,b1=b0.length;if(b9&&typeof b9==="object"){for(b3 in b9){bF.access(b0,b6,b3,b9[b3],1,ca,b7)}b4=1}else{if(b7!==L){b2=b8===L&&bF.isFunction(b7);if(b5){if(b2){b2=b6;b6=function(cc,cb,cd){return b2.call(bF(cc),cd)}}else{b6.call(b0,b7);b6=null}}if(b6){for(;b3<b1;b3++){b6(b0[b3],b9,b2?b7.call(b0[b3],b3,b6(b0[b3],b9)):b7,b8)}}b4=1}}return b4?b0:b5?b6.call(b0):b1?b6(b0[0],b9):ca},now:function(){return(new Date()).getTime()},uaMatch:function(b1){b1=b1.toLowerCase();var b0=by.exec(b1)||bR.exec(b1)||bQ.exec(b1)||b1.indexOf("compatible")<0&&bS.exec(b1)||[];return{browser:b0[1]||"",version:b0[2]||"0"}},sub:function(){function b0(b3,b4){return new b0.fn.init(b3,b4)}bF.extend(true,b0,this);b0.superclass=this;b0.fn=b0.prototype=this();b0.fn.constructor=b0;b0.sub=this.sub;b0.fn.init=function b2(b3,b4){if(b4&&b4 instanceof bF&&!(b4 instanceof b0)){b4=b0(b4)}return bF.fn.init.call(this,b3,b4,b1)};b0.fn.init.prototype=b0.fn;var b1=b0(av);return b0},browser:{}});bF.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b1,b0){bx["[object "+b0+"]"]=b0.toLowerCase()});bV=bF.uaMatch(bX);if(bV.browser){bF.browser[bV.browser]=true;bF.browser.version=bV.version}if(bF.browser.webkit){bF.browser.safari=true}if(bM.test("\xA0")){bI=/^[\s\xA0]+/;bE=/[\s\xA0]+$/}bD=bF(av);if(av.addEventListener){e=function(){av.removeEventListener("DOMContentLoaded",e,false);bF.ready()}}else{if(av.attachEvent){e=function(){if(av.readyState==="complete"){av.detachEvent("onreadystatechange",e);bF.ready()}}}}function bw(){if(bF.isReady){return}try{av.documentElement.doScroll("left")}catch(b0){setTimeout(bw,1);return}bF.ready()}return bF})();var a3={};function X(e){var bv=a3[e]={},bw,bx;e=e.split(/\s+/);for(bw=0,bx=e.length;bw<bx;bw++){bv[e[bw]]=true}return bv}b.Callbacks=function(bx){bx=bx?(a3[bx]||X(bx)):{};var bC=[],bD=[],by,e,bz,bw,bA,bB,bF=function(bG){var bH,bK,bJ,bI,bL;for(bH=0,bK=bG.length;bH<bK;bH++){bJ=bG[bH];bI=b.type(bJ);if(bI==="array"){bF(bJ)}else{if(bI==="function"){if(!bx.unique||!bE.has(bJ)){bC.push(bJ)}}}}},bv=function(bH,bG){bG=bG||[];by=!bx.memory||[bH,bG];e=true;bz=true;bB=bw||0;bw=0;bA=bC.length;for(;bC&&bB<bA;bB++){if(bC[bB].apply(bH,bG)===false&&bx.stopOnFalse){by=true;break}}bz=false;if(bC){if(!bx.once){if(bD&&bD.length){by=bD.shift();bE.fireWith(by[0],by[1])}}else{if(by===true){bE.disable()}else{bC=[]}}}},bE={add:function(){if(bC){var bG=bC.length;bF(arguments);if(bz){bA=bC.length}else{if(by&&by!==true){bw=bG;bv(by[0],by[1])}}}return this},remove:function(){if(bC){var bG=arguments,bI=0,bJ=bG.length;for(;bI<bJ;bI++){for(var bH=0;bH<bC.length;bH++){if(bG[bI]===bC[bH]){if(bz){if(bH<=bA){bA--;if(bH<=bB){bB--}}}bC.splice(bH--,1);if(bx.unique){break}}}}}return this},has:function(bH){if(bC){var bG=0,bI=bC.length;for(;bG<bI;bG++){if(bH===bC[bG]){return true}}}return false},empty:function(){bC=[];return this},disable:function(){bC=bD=by=L;return this},disabled:function(){return !bC},lock:function(){bD=L;if(!by||by===true){bE.disable()}return this},locked:function(){return !bD},fireWith:function(bH,bG){if(bD){if(bz){if(!bx.once){bD.push([bH,bG])}}else{if(!(bx.once&&by)){bv(bH,bG)}}}return this},fire:function(){bE.fireWith(this,arguments);return this},fired:function(){return !!e}};return bE};var aK=[].slice;b.extend({Deferred:function(by){var bx=b.Callbacks("once memory"),bw=b.Callbacks("once memory"),bv=b.Callbacks("memory"),e="pending",bA={resolve:bx,reject:bw,notify:bv},bC={done:bx.add,fail:bw.add,progress:bv.add,state:function(){return e},isResolved:bx.fired,isRejected:bw.fired,then:function(bE,bD,bF){bB.done(bE).fail(bD).progress(bF);return this},always:function(){bB.done.apply(bB,arguments).fail.apply(bB,arguments);
return this},pipe:function(bF,bE,bD){return b.Deferred(function(bG){b.each({done:[bF,"resolve"],fail:[bE,"reject"],progress:[bD,"notify"]},function(bI,bL){var bH=bL[0],bK=bL[1],bJ;if(b.isFunction(bH)){bB[bI](function(){bJ=bH.apply(this,arguments);if(bJ&&b.isFunction(bJ.promise)){bJ.promise().then(bG.resolve,bG.reject,bG.notify)}else{bG[bK+"With"](this===bB?bG:this,[bJ])}})}else{bB[bI](bG[bK])}})}).promise()},promise:function(bE){if(bE==null){bE=bC}else{for(var bD in bC){bE[bD]=bC[bD]}}return bE}},bB=bC.promise({}),bz;for(bz in bA){bB[bz]=bA[bz].fire;bB[bz+"With"]=bA[bz].fireWith}bB.done(function(){e="resolved"},bw.disable,bv.lock).fail(function(){e="rejected"},bx.disable,bv.lock);if(by){by.call(bB,bB)}return bB},when:function(bA){var bx=aK.call(arguments,0),bv=0,e=bx.length,bB=new Array(e),bw=e,by=e,bC=e<=1&&bA&&b.isFunction(bA.promise)?bA:b.Deferred(),bE=bC.promise();function bD(bF){return function(bG){bx[bF]=arguments.length>1?aK.call(arguments,0):bG;if(!(--bw)){bC.resolveWith(bC,bx)}}}function bz(bF){return function(bG){bB[bF]=arguments.length>1?aK.call(arguments,0):bG;bC.notifyWith(bE,bB)}}if(e>1){for(;bv<e;bv++){if(bx[bv]&&bx[bv].promise&&b.isFunction(bx[bv].promise)){bx[bv].promise().then(bD(bv),bC.reject,bz(bv))}else{--bw}}if(!bw){bC.resolveWith(bC,bx)}}else{if(bC!==bA){bC.resolveWith(bC,e?[bA]:[])}}return bE}});b.support=(function(){var bI,bH,bE,bF,bx,bD,bC,bz,bJ,bA,by,bw,bv=av.createElement("div"),bG=av.documentElement;bv.setAttribute("className","t");bv.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";bH=bv.getElementsByTagName("*");bE=bv.getElementsByTagName("a")[0];if(!bH||!bH.length||!bE){return{}}bF=av.createElement("select");bx=bF.appendChild(av.createElement("option"));bD=bv.getElementsByTagName("input")[0];bI={leadingWhitespace:(bv.firstChild.nodeType===3),tbody:!bv.getElementsByTagName("tbody").length,htmlSerialize:!!bv.getElementsByTagName("link").length,style:/top/.test(bE.getAttribute("style")),hrefNormalized:(bE.getAttribute("href")==="/a"),opacity:/^0.55/.test(bE.style.opacity),cssFloat:!!bE.style.cssFloat,checkOn:(bD.value==="on"),optSelected:bx.selected,getSetAttribute:bv.className!=="t",enctype:!!av.createElement("form").enctype,html5Clone:av.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,pixelMargin:true};b.boxModel=bI.boxModel=(av.compatMode==="CSS1Compat");bD.checked=true;bI.noCloneChecked=bD.cloneNode(true).checked;bF.disabled=true;bI.optDisabled=!bx.disabled;try{delete bv.test}catch(bB){bI.deleteExpando=false}if(!bv.addEventListener&&bv.attachEvent&&bv.fireEvent){bv.attachEvent("onclick",function(){bI.noCloneEvent=false});bv.cloneNode(true).fireEvent("onclick")}bD=av.createElement("input");bD.value="t";bD.setAttribute("type","radio");bI.radioValue=bD.value==="t";bD.setAttribute("checked","checked");bD.setAttribute("name","t");bv.appendChild(bD);bC=av.createDocumentFragment();bC.appendChild(bv.lastChild);bI.checkClone=bC.cloneNode(true).cloneNode(true).lastChild.checked;bI.appendChecked=bD.checked;bC.removeChild(bD);bC.appendChild(bv);if(bv.attachEvent){for(by in {submit:1,change:1,focusin:1}){bA="on"+by;bw=(bA in bv);if(!bw){bv.setAttribute(bA,"return;");bw=(typeof bv[bA]==="function")}bI[by+"Bubbles"]=bw}}bC.removeChild(bv);bC=bF=bx=bv=bD=null;b(function(){var bM,bV,bW,bU,bO,bP,bR,bL,bK,bQ,bN,e,bT,bS=av.getElementsByTagName("body")[0];if(!bS){return}bL=1;bT="padding:0;margin:0;border:";bN="position:absolute;top:0;left:0;width:1px;height:1px;";e=bT+"0;visibility:hidden;";bK="style='"+bN+bT+"5px solid #000;";bQ="<div "+bK+"display:block;'><div style='"+bT+"0;display:block;overflow:hidden;'></div></div><table "+bK+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";bM=av.createElement("div");bM.style.cssText=e+"width:0;height:0;position:static;top:0;margin-top:"+bL+"px";
bS.insertBefore(bM,bS.firstChild);bv=av.createElement("div");bM.appendChild(bv);bv.innerHTML="<table><tr><td style='"+bT+"0;display:none'></td><td>t</td></tr></table>";bz=bv.getElementsByTagName("td");bw=(bz[0].offsetHeight===0);bz[0].style.display="";bz[1].style.display="none";bI.reliableHiddenOffsets=bw&&(bz[0].offsetHeight===0);if(bd.getComputedStyle){bv.innerHTML="";bR=av.createElement("div");bR.style.width="0";bR.style.marginRight="0";bv.style.width="2px";bv.appendChild(bR);bI.reliableMarginRight=(parseInt((bd.getComputedStyle(bR,null)||{marginRight:0}).marginRight,10)||0)===0}if(typeof bv.style.zoom!=="undefined"){bv.innerHTML="";bv.style.width=bv.style.padding="1px";bv.style.border=0;bv.style.overflow="hidden";bv.style.display="inline";bv.style.zoom=1;bI.inlineBlockNeedsLayout=(bv.offsetWidth===3);bv.style.display="block";bv.style.overflow="visible";bv.innerHTML="<div style='width:5px;'></div>";bI.shrinkWrapBlocks=(bv.offsetWidth!==3)}bv.style.cssText=bN+e;bv.innerHTML=bQ;bV=bv.firstChild;bW=bV.firstChild;bO=bV.nextSibling.firstChild.firstChild;bP={doesNotAddBorder:(bW.offsetTop!==5),doesAddBorderForTableAndCells:(bO.offsetTop===5)};bW.style.position="fixed";bW.style.top="20px";bP.fixedPosition=(bW.offsetTop===20||bW.offsetTop===15);bW.style.position=bW.style.top="";bV.style.overflow="hidden";bV.style.position="relative";bP.subtractsBorderForOverflowNotVisible=(bW.offsetTop===-5);bP.doesNotIncludeMarginInBodyOffset=(bS.offsetTop!==bL);if(bd.getComputedStyle){bv.style.marginTop="1%";bI.pixelMargin=(bd.getComputedStyle(bv,null)||{marginTop:0}).marginTop!=="1%"}if(typeof bM.style.zoom!=="undefined"){bM.style.zoom=1}bS.removeChild(bM);bR=bv=bM=null;b.extend(bI,bP)});return bI})();var aT=/^(?:\{.*\}|\[.*\])$/,aA=/([A-Z])/g;b.extend({cache:{},uuid:0,expando:"jQuery"+(b.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?b.cache[e[b.expando]]:e[b.expando];return !!e&&!S(e)},data:function(bx,bv,bz,by){if(!b.acceptData(bx)){return}var bG,bA,bD,bE=b.expando,bC=typeof bv==="string",bF=bx.nodeType,e=bF?b.cache:bx,bw=bF?bx[bE]:bx[bE]&&bE,bB=bv==="events";if((!bw||!e[bw]||(!bB&&!by&&!e[bw].data))&&bC&&bz===L){return}if(!bw){if(bF){bx[bE]=bw=++b.uuid}else{bw=bE}}if(!e[bw]){e[bw]={};if(!bF){e[bw].toJSON=b.noop}}if(typeof bv==="object"||typeof bv==="function"){if(by){e[bw]=b.extend(e[bw],bv)}else{e[bw].data=b.extend(e[bw].data,bv)}}bG=bA=e[bw];if(!by){if(!bA.data){bA.data={}}bA=bA.data}if(bz!==L){bA[b.camelCase(bv)]=bz}if(bB&&!bA[bv]){return bG.events}if(bC){bD=bA[bv];if(bD==null){bD=bA[b.camelCase(bv)]}}else{bD=bA}return bD},removeData:function(bx,bv,by){if(!b.acceptData(bx)){return}var bB,bA,bz,bC=b.expando,bD=bx.nodeType,e=bD?b.cache:bx,bw=bD?bx[bC]:bC;if(!e[bw]){return}if(bv){bB=by?e[bw]:e[bw].data;if(bB){if(!b.isArray(bv)){if(bv in bB){bv=[bv]}else{bv=b.camelCase(bv);if(bv in bB){bv=[bv]}else{bv=bv.split(" ")}}}for(bA=0,bz=bv.length;bA<bz;bA++){delete bB[bv[bA]]}if(!(by?S:b.isEmptyObject)(bB)){return}}}if(!by){delete e[bw].data;if(!S(e[bw])){return}}if(b.support.deleteExpando||!e.setInterval){delete e[bw]}else{e[bw]=null}if(bD){if(b.support.deleteExpando){delete bx[bC]}else{if(bx.removeAttribute){bx.removeAttribute(bC)}else{bx[bC]=null}}}},_data:function(bv,e,bw){return b.data(bv,e,bw,true)},acceptData:function(bv){if(bv.nodeName){var e=b.noData[bv.nodeName.toLowerCase()];if(e){return !(e===true||bv.getAttribute("classid")!==e)}}return true}});b.fn.extend({data:function(bD,bC){var by,bv,bB,e,bx,bw=this[0],bA=0,bz=null;if(bD===L){if(this.length){bz=b.data(bw);if(bw.nodeType===1&&!b._data(bw,"parsedAttrs")){bB=bw.attributes;for(bx=bB.length;bA<bx;bA++){e=bB[bA].name;if(e.indexOf("data-")===0){e=b.camelCase(e.substring(5));a6(bw,e,bz[e])}}b._data(bw,"parsedAttrs",true)}}return bz}if(typeof bD==="object"){return this.each(function(){b.data(this,bD)})}by=bD.split(".",2);by[1]=by[1]?"."+by[1]:"";bv=by[1]+"!";return b.access(this,function(bE){if(bE===L){bz=this.triggerHandler("getData"+bv,[by[0]]);
if(bz===L&&bw){bz=b.data(bw,bD);bz=a6(bw,bD,bz)}return bz===L&&by[1]?this.data(by[0]):bz}by[1]=bE;this.each(function(){var bF=b(this);bF.triggerHandler("setData"+bv,by);b.data(this,bD,bE);bF.triggerHandler("changeData"+bv,by)})},null,bC,arguments.length>1,null,false)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function a6(bx,bw,by){if(by===L&&bx.nodeType===1){var bv="data-"+bw.replace(aA,"-$1").toLowerCase();by=bx.getAttribute(bv);if(typeof by==="string"){try{by=by==="true"?true:by==="false"?false:by==="null"?null:b.isNumeric(by)?+by:aT.test(by)?b.parseJSON(by):by}catch(bz){}b.data(bx,bw,by)}else{by=L}}return by}function S(bv){for(var e in bv){if(e==="data"&&b.isEmptyObject(bv[e])){continue}if(e!=="toJSON"){return false}}return true}function bj(by,bx,bA){var bw=bx+"defer",bv=bx+"queue",e=bx+"mark",bz=b._data(by,bw);if(bz&&(bA==="queue"||!b._data(by,bv))&&(bA==="mark"||!b._data(by,e))){setTimeout(function(){if(!b._data(by,bv)&&!b._data(by,e)){b.removeData(by,bw,true);bz.fire()}},0)}}b.extend({_mark:function(bv,e){if(bv){e=(e||"fx")+"mark";b._data(bv,e,(b._data(bv,e)||0)+1)}},_unmark:function(by,bx,bv){if(by!==true){bv=bx;bx=by;by=false}if(bx){bv=bv||"fx";var e=bv+"mark",bw=by?0:((b._data(bx,e)||1)-1);if(bw){b._data(bx,e,bw)}else{b.removeData(bx,e,true);bj(bx,bv,"mark")}}},queue:function(bv,e,bx){var bw;if(bv){e=(e||"fx")+"queue";bw=b._data(bv,e);if(bx){if(!bw||b.isArray(bx)){bw=b._data(bv,e,b.makeArray(bx))}else{bw.push(bx)}}return bw||[]}},dequeue:function(by,bx){bx=bx||"fx";var bv=b.queue(by,bx),bw=bv.shift(),e={};if(bw==="inprogress"){bw=bv.shift()}if(bw){if(bx==="fx"){bv.unshift("inprogress")}b._data(by,bx+".run",e);bw.call(by,function(){b.dequeue(by,bx)},e)}if(!bv.length){b.removeData(by,bx+"queue "+bx+".run",true);bj(by,bx,"queue")}}});b.fn.extend({queue:function(e,bv){var bw=2;if(typeof e!=="string"){bv=e;e="fx";bw--}if(arguments.length<bw){return b.queue(this[0],e)}return bv===L?this:this.each(function(){var bx=b.queue(this,e,bv);if(e==="fx"&&bx[0]!=="inprogress"){b.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(bv,e){bv=b.fx?b.fx.speeds[bv]||bv:bv;e=e||"fx";return this.queue(e,function(bx,bw){var by=setTimeout(bx,bv);bw.stop=function(){clearTimeout(by)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(bD,bw){if(typeof bD!=="string"){bw=bD;bD=L}bD=bD||"fx";var e=b.Deferred(),bv=this,by=bv.length,bB=1,bz=bD+"defer",bA=bD+"queue",bC=bD+"mark",bx;function bE(){if(!(--bB)){e.resolveWith(bv,[bv])}}while(by--){if((bx=b.data(bv[by],bz,L,true)||(b.data(bv[by],bA,L,true)||b.data(bv[by],bC,L,true))&&b.data(bv[by],bz,b.Callbacks("once memory"),true))){bB++;bx.add(bE)}}bE();return e.promise(bw)}});var aQ=/[\n\t\r]/g,ag=/\s+/,aV=/\r/g,g=/^(?:button|input)$/i,C=/^(?:button|input|object|select|textarea)$/i,l=/^a(?:rea)?$/i,ao=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,E=b.support.getSetAttribute,bf,aZ,aG;b.fn.extend({attr:function(e,bv){return b.access(this,b.attr,e,bv,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,bv){return b.access(this,b.prop,e,bv,arguments.length>1)},removeProp:function(e){e=b.propFix[e]||e;return this.each(function(){try{this[e]=L;delete this[e]}catch(bv){}})},addClass:function(by){var bA,bw,bv,bx,bz,bB,e;if(b.isFunction(by)){return this.each(function(bC){b(this).addClass(by.call(this,bC,this.className))})}if(by&&typeof by==="string"){bA=by.split(ag);for(bw=0,bv=this.length;bw<bv;bw++){bx=this[bw];if(bx.nodeType===1){if(!bx.className&&bA.length===1){bx.className=by}else{bz=" "+bx.className+" ";for(bB=0,e=bA.length;bB<e;bB++){if(!~bz.indexOf(" "+bA[bB]+" ")){bz+=bA[bB]+" "}}bx.className=b.trim(bz)}}}}return this},removeClass:function(bz){var bA,bw,bv,by,bx,bB,e;if(b.isFunction(bz)){return this.each(function(bC){b(this).removeClass(bz.call(this,bC,this.className))
})}if((bz&&typeof bz==="string")||bz===L){bA=(bz||"").split(ag);for(bw=0,bv=this.length;bw<bv;bw++){by=this[bw];if(by.nodeType===1&&by.className){if(bz){bx=(" "+by.className+" ").replace(aQ," ");for(bB=0,e=bA.length;bB<e;bB++){bx=bx.replace(" "+bA[bB]+" "," ")}by.className=b.trim(bx)}else{by.className=""}}}}return this},toggleClass:function(bx,bv){var bw=typeof bx,e=typeof bv==="boolean";if(b.isFunction(bx)){return this.each(function(by){b(this).toggleClass(bx.call(this,by,this.className,bv),bv)})}return this.each(function(){if(bw==="string"){var bA,bz=0,by=b(this),bB=bv,bC=bx.split(ag);while((bA=bC[bz++])){bB=e?bB:!by.hasClass(bA);by[bB?"addClass":"removeClass"](bA)}}else{if(bw==="undefined"||bw==="boolean"){if(this.className){b._data(this,"__className__",this.className)}this.className=this.className||bx===false?"":b._data(this,"__className__")||""}}})},hasClass:function(e){var bx=" "+e+" ",bw=0,bv=this.length;for(;bw<bv;bw++){if(this[bw].nodeType===1&&(" "+this[bw].className+" ").replace(aQ," ").indexOf(bx)>-1){return true}}return false},val:function(bx){var e,bv,by,bw=this[0];if(!arguments.length){if(bw){e=b.valHooks[bw.type]||b.valHooks[bw.nodeName.toLowerCase()];if(e&&"get" in e&&(bv=e.get(bw,"value"))!==L){return bv}bv=bw.value;return typeof bv==="string"?bv.replace(aV,""):bv==null?"":bv}return}by=b.isFunction(bx);return this.each(function(bA){var bz=b(this),bB;if(this.nodeType!==1){return}if(by){bB=bx.call(this,bA,bz.val())}else{bB=bx}if(bB==null){bB=""}else{if(typeof bB==="number"){bB+=""}else{if(b.isArray(bB)){bB=b.map(bB,function(bC){return bC==null?"":bC+""})}}}e=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()];if(!e||!("set" in e)||e.set(this,bB,"value")===L){this.value=bB}})}});b.extend({valHooks:{option:{get:function(e){var bv=e.attributes.value;return !bv||bv.specified?e.value:e.text}},select:{get:function(e){var bA,bv,bz,bx,by=e.selectedIndex,bB=[],bC=e.options,bw=e.type==="select-one";if(by<0){return null}bv=bw?by:0;bz=bw?by+1:bC.length;for(;bv<bz;bv++){bx=bC[bv];if(bx.selected&&(b.support.optDisabled?!bx.disabled:bx.getAttribute("disabled")===null)&&(!bx.parentNode.disabled||!b.nodeName(bx.parentNode,"optgroup"))){bA=b(bx).val();if(bw){return bA}bB.push(bA)}}if(bw&&!bB.length&&bC.length){return b(bC[by]).val()}return bB},set:function(bv,bw){var e=b.makeArray(bw);b(bv).find("option").each(function(){this.selected=b.inArray(b(this).val(),e)>=0});if(!e.length){bv.selectedIndex=-1}return e}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(bA,bx,bB,bz){var bw,e,by,bv=bA.nodeType;if(!bA||bv===3||bv===8||bv===2){return}if(bz&&bx in b.attrFn){return b(bA)[bx](bB)}if(typeof bA.getAttribute==="undefined"){return b.prop(bA,bx,bB)}by=bv!==1||!b.isXMLDoc(bA);if(by){bx=bx.toLowerCase();e=b.attrHooks[bx]||(ao.test(bx)?aZ:bf)}if(bB!==L){if(bB===null){b.removeAttr(bA,bx);return}else{if(e&&"set" in e&&by&&(bw=e.set(bA,bB,bx))!==L){return bw}else{bA.setAttribute(bx,""+bB);return bB}}}else{if(e&&"get" in e&&by&&(bw=e.get(bA,bx))!==null){return bw}else{bw=bA.getAttribute(bx);return bw===null?L:bw}}},removeAttr:function(by,bA){var bz,bB,bw,e,bv,bx=0;if(bA&&by.nodeType===1){bB=bA.toLowerCase().split(ag);e=bB.length;for(;bx<e;bx++){bw=bB[bx];if(bw){bz=b.propFix[bw]||bw;bv=ao.test(bw);if(!bv){b.attr(by,bw,"")}by.removeAttribute(E?bw:bz);if(bv&&bz in by){by[bz]=false}}}}},attrHooks:{type:{set:function(e,bv){if(g.test(e.nodeName)&&e.parentNode){b.error("type property can't be changed")}else{if(!b.support.radioValue&&bv==="radio"&&b.nodeName(e,"input")){var bw=e.value;e.setAttribute("type",bv);if(bw){e.value=bw}return bv}}}},value:{get:function(bv,e){if(bf&&b.nodeName(bv,"button")){return bf.get(bv,e)}return e in bv?bv.value:null},set:function(bv,bw,e){if(bf&&b.nodeName(bv,"button")){return bf.set(bv,bw,e)}bv.value=bw}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(bz,bx,bA){var bw,e,by,bv=bz.nodeType;
if(!bz||bv===3||bv===8||bv===2){return}by=bv!==1||!b.isXMLDoc(bz);if(by){bx=b.propFix[bx]||bx;e=b.propHooks[bx]}if(bA!==L){if(e&&"set" in e&&(bw=e.set(bz,bA,bx))!==L){return bw}else{return(bz[bx]=bA)}}else{if(e&&"get" in e&&(bw=e.get(bz,bx))!==null){return bw}else{return bz[bx]}}},propHooks:{tabIndex:{get:function(bv){var e=bv.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):C.test(bv.nodeName)||l.test(bv.nodeName)&&bv.href?0:L}}}});b.attrHooks.tabindex=b.propHooks.tabIndex;aZ={get:function(bv,e){var bx,bw=b.prop(bv,e);return bw===true||typeof bw!=="boolean"&&(bx=bv.getAttributeNode(e))&&bx.nodeValue!==false?e.toLowerCase():L},set:function(bv,bx,e){var bw;if(bx===false){b.removeAttr(bv,e)}else{bw=b.propFix[e]||e;if(bw in bv){bv[bw]=true}bv.setAttribute(e,e.toLowerCase())}return e}};if(!E){aG={name:true,id:true,coords:true};bf=b.valHooks.button={get:function(bw,bv){var e;e=bw.getAttributeNode(bv);return e&&(aG[bv]?e.nodeValue!=="":e.specified)?e.nodeValue:L},set:function(bw,bx,bv){var e=bw.getAttributeNode(bv);if(!e){e=av.createAttribute(bv);bw.setAttributeNode(e)}return(e.nodeValue=bx+"")}};b.attrHooks.tabindex.set=bf.set;b.each(["width","height"],function(bv,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{set:function(bw,bx){if(bx===""){bw.setAttribute(e,"auto");return bx}}})});b.attrHooks.contenteditable={get:bf.get,set:function(bv,bw,e){if(bw===""){bw="false"}bf.set(bv,bw,e)}}}if(!b.support.hrefNormalized){b.each(["href","src","width","height"],function(bv,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{get:function(bx){var bw=bx.getAttribute(e,2);return bw===null?L:bw}})})}if(!b.support.style){b.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||L},set:function(e,bv){return(e.style.cssText=""+bv)}}}if(!b.support.optSelected){b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(bv){var e=bv.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}})}if(!b.support.enctype){b.propFix.enctype="encoding"}if(!b.support.checkOn){b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,bv){if(b.isArray(bv)){return(e.checked=b.inArray(b(e).val(),bv)>=0)}}})});var be=/^(?:textarea|input|select)$/i,n=/^([^\.]*)?(?:\.(.+))?$/,J=/(?:^|\s)hover(\.\S+)?\b/,aP=/^key/,bg=/^(?:mouse|contextmenu)|click/,T=/^(?:focusinfocus|focusoutblur)$/,U=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,Y=function(e){var bv=U.exec(e);if(bv){bv[1]=(bv[1]||"").toLowerCase();bv[3]=bv[3]&&new RegExp("(?:^|\\s)"+bv[3]+"(?:\\s|$)")}return bv},j=function(bw,e){var bv=bw.attributes||{};return((!e[1]||bw.nodeName.toLowerCase()===e[1])&&(!e[2]||(bv.id||{}).value===e[2])&&(!e[3]||e[3].test((bv["class"]||{}).value)))},bt=function(e){return b.event.special.hover?e:e.replace(J,"mouseenter$1 mouseleave$1")};b.event={add:function(bx,bC,bJ,bA,by){var bD,bB,bK,bI,bH,bF,e,bG,bv,bz,bw,bE;if(bx.nodeType===3||bx.nodeType===8||!bC||!bJ||!(bD=b._data(bx))){return}if(bJ.handler){bv=bJ;bJ=bv.handler;by=bv.selector}if(!bJ.guid){bJ.guid=b.guid++}bK=bD.events;if(!bK){bD.events=bK={}}bB=bD.handle;if(!bB){bD.handle=bB=function(bL){return typeof b!=="undefined"&&(!bL||b.event.triggered!==bL.type)?b.event.dispatch.apply(bB.elem,arguments):L};bB.elem=bx}bC=b.trim(bt(bC)).split(" ");for(bI=0;bI<bC.length;bI++){bH=n.exec(bC[bI])||[];bF=bH[1];e=(bH[2]||"").split(".").sort();bE=b.event.special[bF]||{};bF=(by?bE.delegateType:bE.bindType)||bF;bE=b.event.special[bF]||{};bG=b.extend({type:bF,origType:bH[1],data:bA,handler:bJ,guid:bJ.guid,selector:by,quick:by&&Y(by),namespace:e.join(".")},bv);bw=bK[bF];if(!bw){bw=bK[bF]=[];bw.delegateCount=0;if(!bE.setup||bE.setup.call(bx,bA,e,bB)===false){if(bx.addEventListener){bx.addEventListener(bF,bB,false)}else{if(bx.attachEvent){bx.attachEvent("on"+bF,bB)}}}}if(bE.add){bE.add.call(bx,bG);if(!bG.handler.guid){bG.handler.guid=bJ.guid
}}if(by){bw.splice(bw.delegateCount++,0,bG)}else{bw.push(bG)}b.event.global[bF]=true}bx=null},global:{},remove:function(bJ,bE,bv,bH,bB){var bI=b.hasData(bJ)&&b._data(bJ),bF,bx,bz,bL,bC,bA,bG,bw,by,bK,bD,e;if(!bI||!(bw=bI.events)){return}bE=b.trim(bt(bE||"")).split(" ");for(bF=0;bF<bE.length;bF++){bx=n.exec(bE[bF])||[];bz=bL=bx[1];bC=bx[2];if(!bz){for(bz in bw){b.event.remove(bJ,bz+bE[bF],bv,bH,true)}continue}by=b.event.special[bz]||{};bz=(bH?by.delegateType:by.bindType)||bz;bD=bw[bz]||[];bA=bD.length;bC=bC?new RegExp("(^|\\.)"+bC.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(bG=0;bG<bD.length;bG++){e=bD[bG];if((bB||bL===e.origType)&&(!bv||bv.guid===e.guid)&&(!bC||bC.test(e.namespace))&&(!bH||bH===e.selector||bH==="**"&&e.selector)){bD.splice(bG--,1);if(e.selector){bD.delegateCount--}if(by.remove){by.remove.call(bJ,e)}}}if(bD.length===0&&bA!==bD.length){if(!by.teardown||by.teardown.call(bJ,bC)===false){b.removeEvent(bJ,bz,bI.handle)}delete bw[bz]}}if(b.isEmptyObject(bw)){bK=bI.handle;if(bK){bK.elem=null}b.removeData(bJ,["events","handle"],true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(bv,bD,bA,bJ){if(bA&&(bA.nodeType===3||bA.nodeType===8)){return}var bG=bv.type||bv,bx=[],e,bw,bC,bH,bz,by,bF,bE,bB,bI;if(T.test(bG+b.event.triggered)){return}if(bG.indexOf("!")>=0){bG=bG.slice(0,-1);bw=true}if(bG.indexOf(".")>=0){bx=bG.split(".");bG=bx.shift();bx.sort()}if((!bA||b.event.customEvent[bG])&&!b.event.global[bG]){return}bv=typeof bv==="object"?bv[b.expando]?bv:new b.Event(bG,bv):new b.Event(bG);bv.type=bG;bv.isTrigger=true;bv.exclusive=bw;bv.namespace=bx.join(".");bv.namespace_re=bv.namespace?new RegExp("(^|\\.)"+bx.join("\\.(?:.*\\.)?")+"(\\.|$)"):null;by=bG.indexOf(":")<0?"on"+bG:"";if(!bA){e=b.cache;for(bC in e){if(e[bC].events&&e[bC].events[bG]){b.event.trigger(bv,bD,e[bC].handle.elem,true)}}return}bv.result=L;if(!bv.target){bv.target=bA}bD=bD!=null?b.makeArray(bD):[];bD.unshift(bv);bF=b.event.special[bG]||{};if(bF.trigger&&bF.trigger.apply(bA,bD)===false){return}bB=[[bA,bF.bindType||bG]];if(!bJ&&!bF.noBubble&&!b.isWindow(bA)){bI=bF.delegateType||bG;bH=T.test(bI+bG)?bA:bA.parentNode;bz=null;for(;bH;bH=bH.parentNode){bB.push([bH,bI]);bz=bH}if(bz&&bz===bA.ownerDocument){bB.push([bz.defaultView||bz.parentWindow||bd,bI])}}for(bC=0;bC<bB.length&&!bv.isPropagationStopped();bC++){bH=bB[bC][0];bv.type=bB[bC][1];bE=(b._data(bH,"events")||{})[bv.type]&&b._data(bH,"handle");if(bE){bE.apply(bH,bD)}bE=by&&bH[by];if(bE&&b.acceptData(bH)&&bE.apply(bH,bD)===false){bv.preventDefault()}}bv.type=bG;if(!bJ&&!bv.isDefaultPrevented()){if((!bF._default||bF._default.apply(bA.ownerDocument,bD)===false)&&!(bG==="click"&&b.nodeName(bA,"a"))&&b.acceptData(bA)){if(by&&bA[bG]&&((bG!=="focus"&&bG!=="blur")||bv.target.offsetWidth!==0)&&!b.isWindow(bA)){bz=bA[by];if(bz){bA[by]=null}b.event.triggered=bG;bA[bG]();b.event.triggered=L;if(bz){bA[by]=bz}}}}return bv.result},dispatch:function(bH){bH=b.event.fix(bH||bd.event);var bD=((b._data(this,"events")||{})[bH.type]||[]),bC=bD.delegateCount,bx=[].slice.call(arguments,0),bE=!bH.exclusive&&!bH.namespace,bz=b.event.special[bH.type]||{},bv=[],bJ,bG,by,bA,bK,bI,bB,bw,e,bF,bL;bx[0]=bH;bH.delegateTarget=this;if(bz.preDispatch&&bz.preDispatch.call(this,bH)===false){return}if(bC&&!(bH.button&&bH.type==="click")){bA=b(this);bA.context=this.ownerDocument||this;for(by=bH.target;by!=this;by=by.parentNode||this){if(by.disabled!==true){bI={};bw=[];bA[0]=by;for(bJ=0;bJ<bC;bJ++){e=bD[bJ];bF=e.selector;if(bI[bF]===L){bI[bF]=(e.quick?j(by,e.quick):bA.is(bF))}if(bI[bF]){bw.push(e)}}if(bw.length){bv.push({elem:by,matches:bw})}}}}if(bD.length>bC){bv.push({elem:this,matches:bD.slice(bC)})}for(bJ=0;bJ<bv.length&&!bH.isPropagationStopped();bJ++){bB=bv[bJ];bH.currentTarget=bB.elem;for(bG=0;bG<bB.matches.length&&!bH.isImmediatePropagationStopped();bG++){e=bB.matches[bG];if(bE||(!bH.namespace&&!e.namespace)||bH.namespace_re&&bH.namespace_re.test(e.namespace)){bH.data=e.data;bH.handleObj=e;bK=((b.event.special[e.origType]||{}).handle||e.handler).apply(bB.elem,bx);
if(bK!==L){bH.result=bK;if(bK===false){bH.preventDefault();bH.stopPropagation()}}}}}if(bz.postDispatch){bz.postDispatch.call(this,bH)}return bH.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(bv,e){if(bv.which==null){bv.which=e.charCode!=null?e.charCode:e.keyCode}return bv}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(bx,bw){var by,bz,e,bv=bw.button,bA=bw.fromElement;if(bx.pageX==null&&bw.clientX!=null){by=bx.target.ownerDocument||av;bz=by.documentElement;e=by.body;bx.pageX=bw.clientX+(bz&&bz.scrollLeft||e&&e.scrollLeft||0)-(bz&&bz.clientLeft||e&&e.clientLeft||0);bx.pageY=bw.clientY+(bz&&bz.scrollTop||e&&e.scrollTop||0)-(bz&&bz.clientTop||e&&e.clientTop||0)}if(!bx.relatedTarget&&bA){bx.relatedTarget=bA===bx.target?bw.toElement:bA}if(!bx.which&&bv!==L){bx.which=(bv&1?1:(bv&2?3:(bv&4?2:0)))}return bx}},fix:function(bw){if(bw[b.expando]){return bw}var bv,bz,e=bw,bx=b.event.fixHooks[bw.type]||{},by=bx.props?this.props.concat(bx.props):this.props;bw=b.Event(e);for(bv=by.length;bv;){bz=by[--bv];bw[bz]=e[bz]}if(!bw.target){bw.target=e.srcElement||av}if(bw.target.nodeType===3){bw.target=bw.target.parentNode}if(bw.metaKey===L){bw.metaKey=bw.ctrlKey}return bx.filter?bx.filter(bw,e):bw},special:{ready:{setup:b.bindReady},load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(bw,bv,e){if(b.isWindow(this)){this.onbeforeunload=e}},teardown:function(bv,e){if(this.onbeforeunload===e){this.onbeforeunload=null}}}},simulate:function(bw,by,bx,bv){var bz=b.extend(new b.Event(),bx,{type:bw,isSimulated:true,originalEvent:{}});if(bv){b.event.trigger(bz,null,by)}else{b.event.dispatch.call(by,bz)}if(bz.isDefaultPrevented()){bx.preventDefault()}}};b.event.handle=b.event.dispatch;b.removeEvent=av.removeEventListener?function(bv,e,bw){if(bv.removeEventListener){bv.removeEventListener(e,bw,false)}}:function(bv,e,bw){if(bv.detachEvent){bv.detachEvent("on"+e,bw)}};b.Event=function(bv,e){if(!(this instanceof b.Event)){return new b.Event(bv,e)}if(bv&&bv.type){this.originalEvent=bv;this.type=bv.type;this.isDefaultPrevented=(bv.defaultPrevented||bv.returnValue===false||bv.getPreventDefault&&bv.getPreventDefault())?i:bl}else{this.type=bv}if(e){b.extend(this,e)}this.timeStamp=bv&&bv.timeStamp||b.now();this[b.expando]=true};function bl(){return false}function i(){return true}b.Event.prototype={preventDefault:function(){this.isDefaultPrevented=i;var bv=this.originalEvent;if(!bv){return}if(bv.preventDefault){bv.preventDefault()}else{bv.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=i;var bv=this.originalEvent;if(!bv){return}if(bv.stopPropagation){bv.stopPropagation()}bv.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i;this.stopPropagation()},isDefaultPrevented:bl,isPropagationStopped:bl,isImmediatePropagationStopped:bl};b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(bv,e){b.event.special[bv]={delegateType:e,bindType:e,handle:function(bz){var bB=this,bA=bz.relatedTarget,by=bz.handleObj,bw=by.selector,bx;if(!bA||(bA!==bB&&!b.contains(bB,bA))){bz.type=by.origType;bx=by.handler.apply(this,arguments);bz.type=e}return bx}}});if(!b.support.submitBubbles){b.event.special.submit={setup:function(){if(b.nodeName(this,"form")){return false}b.event.add(this,"click._submit keypress._submit",function(bx){var bw=bx.target,bv=b.nodeName(bw,"input")||b.nodeName(bw,"button")?bw.form:L;if(bv&&!bv._submit_attached){b.event.add(bv,"submit._submit",function(e){e._submit_bubble=true});bv._submit_attached=true}})},postDispatch:function(e){if(e._submit_bubble){delete e._submit_bubble;if(this.parentNode&&!e.isTrigger){b.event.simulate("submit",this.parentNode,e,true)
}}},teardown:function(){if(b.nodeName(this,"form")){return false}b.event.remove(this,"._submit")}}}if(!b.support.changeBubbles){b.event.special.change={setup:function(){if(be.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){b.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true}});b.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false;b.event.simulate("change",this,e,true)}})}return false}b.event.add(this,"beforeactivate._change",function(bw){var bv=bw.target;if(be.test(bv.nodeName)&&!bv._change_attached){b.event.add(bv,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){b.event.simulate("change",this.parentNode,e,true)}});bv._change_attached=true}})},handle:function(bv){var e=bv.target;if(this!==e||bv.isSimulated||bv.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return bv.handleObj.handler.apply(this,arguments)}},teardown:function(){b.event.remove(this,"._change");return be.test(this.nodeName)}}}if(!b.support.focusinBubbles){b.each({focus:"focusin",blur:"focusout"},function(bx,e){var bv=0,bw=function(by){b.event.simulate(e,by.target,b.event.fix(by),true)};b.event.special[e]={setup:function(){if(bv++===0){av.addEventListener(bx,bw,true)}},teardown:function(){if(--bv===0){av.removeEventListener(bx,bw,true)}}}})}b.fn.extend({on:function(bw,e,bz,by,bv){var bA,bx;if(typeof bw==="object"){if(typeof e!=="string"){bz=bz||e;e=L}for(bx in bw){this.on(bx,e,bz,bw[bx],bv)}return this}if(bz==null&&by==null){by=e;bz=e=L}else{if(by==null){if(typeof e==="string"){by=bz;bz=L}else{by=bz;bz=e;e=L}}}if(by===false){by=bl}else{if(!by){return this}}if(bv===1){bA=by;by=function(bB){b().off(bB);return bA.apply(this,arguments)};by.guid=bA.guid||(bA.guid=b.guid++)}return this.each(function(){b.event.add(this,bw,by,bz,e)})},one:function(bv,e,bx,bw){return this.on(bv,e,bx,bw,1)},off:function(bw,e,by){if(bw&&bw.preventDefault&&bw.handleObj){var bv=bw.handleObj;b(bw.delegateTarget).off(bv.namespace?bv.origType+"."+bv.namespace:bv.origType,bv.selector,bv.handler);return this}if(typeof bw==="object"){for(var bx in bw){this.off(bx,e,bw[bx])}return this}if(e===false||typeof e==="function"){by=e;e=L}if(by===false){by=bl}return this.each(function(){b.event.remove(this,bw,by,e)})},bind:function(e,bw,bv){return this.on(e,null,bw,bv)},unbind:function(e,bv){return this.off(e,null,bv)},live:function(e,bw,bv){b(this.context).on(e,this.selector,bw,bv);return this},die:function(e,bv){b(this.context).off(e,this.selector||"**",bv);return this},delegate:function(e,bv,bx,bw){return this.on(bv,e,bx,bw)},undelegate:function(e,bv,bw){return arguments.length==1?this.off(e,"**"):this.off(bv,e,bw)},trigger:function(e,bv){return this.each(function(){b.event.trigger(e,bv,this)})},triggerHandler:function(e,bv){if(this[0]){return b.event.trigger(e,bv,this[0],true)}},toggle:function(bx){var bv=arguments,e=bx.guid||b.guid++,bw=0,by=function(bz){var bA=(b._data(this,"lastToggle"+bx.guid)||0)%bw;b._data(this,"lastToggle"+bx.guid,bA+1);bz.preventDefault();return bv[bA].apply(this,arguments)||false};by.guid=e;while(bw<bv.length){bv[bw++].guid=e}return this.click(by)},hover:function(e,bv){return this.mouseenter(e).mouseleave(bv||e)}});b.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(bv,e){b.fn[e]=function(bx,bw){if(bw==null){bw=bx;bx=null}return arguments.length>0?this.on(e,null,bx,bw):this.trigger(e)};if(b.attrFn){b.attrFn[e]=true}if(aP.test(e)){b.event.fixHooks[e]=b.event.keyHooks}if(bg.test(e)){b.event.fixHooks[e]=b.event.mouseHooks}});
/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var bH=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,bC="sizcache"+(Math.random()+"").replace(".",""),bI=0,bL=Object.prototype.toString,bB=false,bA=true,bK=/\\/g,bO=/\r\n/g,bQ=/\W/;
[0,0].sort(function(){bA=false;return 0});var by=function(bV,e,bY,bZ){bY=bY||[];e=e||av;var b1=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!bV||typeof bV!=="string"){return bY}var bS,b3,b6,bR,b2,b5,b4,bX,bU=true,bT=by.isXML(e),bW=[],b0=bV;do{bH.exec("");bS=bH.exec(b0);if(bS){b0=bS[3];bW.push(bS[1]);if(bS[2]){bR=bS[3];break}}}while(bS);if(bW.length>1&&bD.exec(bV)){if(bW.length===2&&bE.relative[bW[0]]){b3=bM(bW[0]+bW[1],e,bZ)}else{b3=bE.relative[bW[0]]?[e]:by(bW.shift(),e);while(bW.length){bV=bW.shift();if(bE.relative[bV]){bV+=bW.shift()}b3=bM(bV,b3,bZ)}}}else{if(!bZ&&bW.length>1&&e.nodeType===9&&!bT&&bE.match.ID.test(bW[0])&&!bE.match.ID.test(bW[bW.length-1])){b2=by.find(bW.shift(),e,bT);e=b2.expr?by.filter(b2.expr,b2.set)[0]:b2.set[0]}if(e){b2=bZ?{expr:bW.pop(),set:bF(bZ)}:by.find(bW.pop(),bW.length===1&&(bW[0]==="~"||bW[0]==="+")&&e.parentNode?e.parentNode:e,bT);b3=b2.expr?by.filter(b2.expr,b2.set):b2.set;if(bW.length>0){b6=bF(b3)}else{bU=false}while(bW.length){b5=bW.pop();b4=b5;if(!bE.relative[b5]){b5=""}else{b4=bW.pop()}if(b4==null){b4=e}bE.relative[b5](b6,b4,bT)}}else{b6=bW=[]}}if(!b6){b6=b3}if(!b6){by.error(b5||bV)}if(bL.call(b6)==="[object Array]"){if(!bU){bY.push.apply(bY,b6)}else{if(e&&e.nodeType===1){for(bX=0;b6[bX]!=null;bX++){if(b6[bX]&&(b6[bX]===true||b6[bX].nodeType===1&&by.contains(e,b6[bX]))){bY.push(b3[bX])}}}else{for(bX=0;b6[bX]!=null;bX++){if(b6[bX]&&b6[bX].nodeType===1){bY.push(b3[bX])}}}}}else{bF(b6,bY)}if(bR){by(bR,b1,bY,bZ);by.uniqueSort(bY)}return bY};by.uniqueSort=function(bR){if(bJ){bB=bA;bR.sort(bJ);if(bB){for(var e=1;e<bR.length;e++){if(bR[e]===bR[e-1]){bR.splice(e--,1)}}}}return bR};by.matches=function(e,bR){return by(e,null,null,bR)};by.matchesSelector=function(e,bR){return by(bR,null,null,[e]).length>0};by.find=function(bX,e,bY){var bW,bS,bU,bT,bV,bR;if(!bX){return[]}for(bS=0,bU=bE.order.length;bS<bU;bS++){bV=bE.order[bS];if((bT=bE.leftMatch[bV].exec(bX))){bR=bT[1];bT.splice(1,1);if(bR.substr(bR.length-1)!=="\\"){bT[1]=(bT[1]||"").replace(bK,"");bW=bE.find[bV](bT,e,bY);if(bW!=null){bX=bX.replace(bE.match[bV],"");break}}}}if(!bW){bW=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[]}return{set:bW,expr:bX}};by.filter=function(b1,b0,b4,bU){var bW,e,bZ,b6,b3,bR,bT,bV,b2,bS=b1,b5=[],bY=b0,bX=b0&&b0[0]&&by.isXML(b0[0]);while(b1&&b0.length){for(bZ in bE.filter){if((bW=bE.leftMatch[bZ].exec(b1))!=null&&bW[2]){bR=bE.filter[bZ];bT=bW[1];e=false;bW.splice(1,1);if(bT.substr(bT.length-1)==="\\"){continue}if(bY===b5){b5=[]}if(bE.preFilter[bZ]){bW=bE.preFilter[bZ](bW,bY,b4,b5,bU,bX);if(!bW){e=b6=true}else{if(bW===true){continue}}}if(bW){for(bV=0;(b3=bY[bV])!=null;bV++){if(b3){b6=bR(b3,bW,bV,bY);b2=bU^b6;if(b4&&b6!=null){if(b2){e=true}else{bY[bV]=false}}else{if(b2){b5.push(b3);e=true}}}}}if(b6!==L){if(!b4){bY=b5}b1=b1.replace(bE.match[bZ],"");if(!e){return[]}break}}}if(b1===bS){if(e==null){by.error(b1)}else{break}}bS=b1}return bY};by.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var bw=by.getText=function(bU){var bS,bT,e=bU.nodeType,bR="";if(e){if(e===1||e===9||e===11){if(typeof bU.textContent==="string"){return bU.textContent}else{if(typeof bU.innerText==="string"){return bU.innerText.replace(bO,"")}else{for(bU=bU.firstChild;bU;bU=bU.nextSibling){bR+=bw(bU)}}}}else{if(e===3||e===4){return bU.nodeValue}}}else{for(bS=0;(bT=bU[bS]);bS++){if(bT.nodeType!==8){bR+=bw(bT)}}}return bR};var bE=by.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")
},type:function(e){return e.getAttribute("type")}},relative:{"+":function(bW,bR){var bT=typeof bR==="string",bV=bT&&!bQ.test(bR),bX=bT&&!bV;if(bV){bR=bR.toLowerCase()}for(var bS=0,e=bW.length,bU;bS<e;bS++){if((bU=bW[bS])){while((bU=bU.previousSibling)&&bU.nodeType!==1){}bW[bS]=bX||bU&&bU.nodeName.toLowerCase()===bR?bU||false:bU===bR}}if(bX){by.filter(bR,bW,true)}},">":function(bW,bR){var bV,bU=typeof bR==="string",bS=0,e=bW.length;if(bU&&!bQ.test(bR)){bR=bR.toLowerCase();for(;bS<e;bS++){bV=bW[bS];if(bV){var bT=bV.parentNode;bW[bS]=bT.nodeName.toLowerCase()===bR?bT:false}}}else{for(;bS<e;bS++){bV=bW[bS];if(bV){bW[bS]=bU?bV.parentNode:bV.parentNode===bR}}if(bU){by.filter(bR,bW,true)}}},"":function(bT,bR,bV){var bU,bS=bI++,e=bN;if(typeof bR==="string"&&!bQ.test(bR)){bR=bR.toLowerCase();bU=bR;e=bv}e("parentNode",bR,bS,bT,bU,bV)},"~":function(bT,bR,bV){var bU,bS=bI++,e=bN;if(typeof bR==="string"&&!bQ.test(bR)){bR=bR.toLowerCase();bU=bR;e=bv}e("previousSibling",bR,bS,bT,bU,bV)}},find:{ID:function(bR,bS,bT){if(typeof bS.getElementById!=="undefined"&&!bT){var e=bS.getElementById(bR[1]);return e&&e.parentNode?[e]:[]}},NAME:function(bS,bV){if(typeof bV.getElementsByName!=="undefined"){var bR=[],bU=bV.getElementsByName(bS[1]);for(var bT=0,e=bU.length;bT<e;bT++){if(bU[bT].getAttribute("name")===bS[1]){bR.push(bU[bT])}}return bR.length===0?null:bR}},TAG:function(e,bR){if(typeof bR.getElementsByTagName!=="undefined"){return bR.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(bT,bR,bS,e,bW,bX){bT=" "+bT[1].replace(bK,"")+" ";if(bX){return bT}for(var bU=0,bV;(bV=bR[bU])!=null;bU++){if(bV){if(bW^(bV.className&&(" "+bV.className+" ").replace(/[\t\n\r]/g," ").indexOf(bT)>=0)){if(!bS){e.push(bV)}}else{if(bS){bR[bU]=false}}}}return false},ID:function(e){return e[1].replace(bK,"")},TAG:function(bR,e){return bR[1].replace(bK,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){by.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var bR=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(bR[1]+(bR[2]||1))-0;e[3]=bR[3]-0}else{if(e[2]){by.error(e[0])}}e[0]=bI++;return e},ATTR:function(bU,bR,bS,e,bV,bW){var bT=bU[1]=bU[1].replace(bK,"");if(!bW&&bE.attrMap[bT]){bU[1]=bE.attrMap[bT]}bU[4]=(bU[4]||bU[5]||"").replace(bK,"");if(bU[2]==="~="){bU[4]=" "+bU[4]+" "}return bU},PSEUDO:function(bU,bR,bS,e,bV){if(bU[1]==="not"){if((bH.exec(bU[3])||"").length>1||/^\w/.test(bU[3])){bU[3]=by(bU[3],null,null,bR)}else{var bT=by.filter(bU[3],bR,bS,true^bV);if(!bS){e.push.apply(e,bT)}return false}}else{if(bE.match.POS.test(bU[0])||bE.match.CHILD.test(bU[0])){return true}}return bU},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(bS,bR,e){return !!by(e[3],bS).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(bS){var e=bS.getAttribute("type"),bR=bS.type;return bS.nodeName.toLowerCase()==="input"&&"text"===bR&&(e===bR||e===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(bR){var e=bR.nodeName.toLowerCase();return(e==="input"||e==="button")&&"submit"===bR.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(bR){var e=bR.nodeName.toLowerCase();return(e==="input"||e==="button")&&"reset"===bR.type},button:function(bR){var e=bR.nodeName.toLowerCase();return e==="input"&&"button"===bR.type||e==="button"
},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(bR,e){return e===0},last:function(bS,bR,e,bT){return bR===bT.length-1},even:function(bR,e){return e%2===0},odd:function(bR,e){return e%2===1},lt:function(bS,bR,e){return bR<e[3]-0},gt:function(bS,bR,e){return bR>e[3]-0},nth:function(bS,bR,e){return e[3]-0===bR},eq:function(bS,bR,e){return e[3]-0===bR}},filter:{PSEUDO:function(bS,bX,bW,bY){var e=bX[1],bR=bE.filters[e];if(bR){return bR(bS,bW,bX,bY)}else{if(e==="contains"){return(bS.textContent||bS.innerText||bw([bS])||"").indexOf(bX[3])>=0}else{if(e==="not"){var bT=bX[3];for(var bV=0,bU=bT.length;bV<bU;bV++){if(bT[bV]===bS){return false}}return true}else{by.error(e)}}}},CHILD:function(bS,bU){var bT,b0,bW,bZ,e,bV,bY,bX=bU[1],bR=bS;switch(bX){case"only":case"first":while((bR=bR.previousSibling)){if(bR.nodeType===1){return false}}if(bX==="first"){return true}bR=bS;case"last":while((bR=bR.nextSibling)){if(bR.nodeType===1){return false}}return true;case"nth":bT=bU[2];b0=bU[3];if(bT===1&&b0===0){return true}bW=bU[0];bZ=bS.parentNode;if(bZ&&(bZ[bC]!==bW||!bS.nodeIndex)){bV=0;for(bR=bZ.firstChild;bR;bR=bR.nextSibling){if(bR.nodeType===1){bR.nodeIndex=++bV}}bZ[bC]=bW}bY=bS.nodeIndex-b0;if(bT===0){return bY===0}else{return(bY%bT===0&&bY/bT>=0)}}},ID:function(bR,e){return bR.nodeType===1&&bR.getAttribute("id")===e},TAG:function(bR,e){return(e==="*"&&bR.nodeType===1)||!!bR.nodeName&&bR.nodeName.toLowerCase()===e},CLASS:function(bR,e){return(" "+(bR.className||bR.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(bV,bT){var bS=bT[1],e=by.attr?by.attr(bV,bS):bE.attrHandle[bS]?bE.attrHandle[bS](bV):bV[bS]!=null?bV[bS]:bV.getAttribute(bS),bW=e+"",bU=bT[2],bR=bT[4];return e==null?bU==="!=":!bU&&by.attr?e!=null:bU==="="?bW===bR:bU==="*="?bW.indexOf(bR)>=0:bU==="~="?(" "+bW+" ").indexOf(bR)>=0:!bR?bW&&e!==false:bU==="!="?bW!==bR:bU==="^="?bW.indexOf(bR)===0:bU==="$="?bW.substr(bW.length-bR.length)===bR:bU==="|="?bW===bR||bW.substr(0,bR.length+1)===bR+"-":false},POS:function(bU,bR,bS,bV){var e=bR[2],bT=bE.setFilters[e];if(bT){return bT(bU,bS,bR,bV)}}}};var bD=bE.match.POS,bx=function(bR,e){return"\\"+(e-0+1)};for(var bz in bE.match){bE.match[bz]=new RegExp(bE.match[bz].source+(/(?![^\[]*\])(?![^\(]*\))/.source));bE.leftMatch[bz]=new RegExp(/(^(?:.|\r|\n)*?)/.source+bE.match[bz].source.replace(/\\(\d+)/g,bx))}bE.match.globalPOS=bD;var bF=function(bR,e){bR=Array.prototype.slice.call(bR,0);if(e){e.push.apply(e,bR);return e}return bR};try{Array.prototype.slice.call(av.documentElement.childNodes,0)[0].nodeType}catch(bP){bF=function(bU,bT){var bS=0,bR=bT||[];if(bL.call(bU)==="[object Array]"){Array.prototype.push.apply(bR,bU)}else{if(typeof bU.length==="number"){for(var e=bU.length;bS<e;bS++){bR.push(bU[bS])}}else{for(;bU[bS];bS++){bR.push(bU[bS])}}}return bR}}var bJ,bG;if(av.documentElement.compareDocumentPosition){bJ=function(bR,e){if(bR===e){bB=true;return 0}if(!bR.compareDocumentPosition||!e.compareDocumentPosition){return bR.compareDocumentPosition?-1:1}return bR.compareDocumentPosition(e)&4?-1:1}}else{bJ=function(bY,bX){if(bY===bX){bB=true;return 0}else{if(bY.sourceIndex&&bX.sourceIndex){return bY.sourceIndex-bX.sourceIndex}}var bV,bR,bS=[],e=[],bU=bY.parentNode,bW=bX.parentNode,bZ=bU;if(bU===bW){return bG(bY,bX)}else{if(!bU){return -1}else{if(!bW){return 1}}}while(bZ){bS.unshift(bZ);bZ=bZ.parentNode}bZ=bW;while(bZ){e.unshift(bZ);bZ=bZ.parentNode}bV=bS.length;bR=e.length;for(var bT=0;bT<bV&&bT<bR;bT++){if(bS[bT]!==e[bT]){return bG(bS[bT],e[bT])}}return bT===bV?bG(bY,e[bT],-1):bG(bS[bT],bX,1)};bG=function(bR,e,bS){if(bR===e){return bS}var bT=bR.nextSibling;while(bT){if(bT===e){return -1}bT=bT.nextSibling}return 1}}(function(){var bR=av.createElement("div"),bS="script"+(new Date()).getTime(),e=av.documentElement;bR.innerHTML="<a name='"+bS+"'/>";e.insertBefore(bR,e.firstChild);if(av.getElementById(bS)){bE.find.ID=function(bU,bV,bW){if(typeof bV.getElementById!=="undefined"&&!bW){var bT=bV.getElementById(bU[1]);
return bT?bT.id===bU[1]||typeof bT.getAttributeNode!=="undefined"&&bT.getAttributeNode("id").nodeValue===bU[1]?[bT]:L:[]}};bE.filter.ID=function(bV,bT){var bU=typeof bV.getAttributeNode!=="undefined"&&bV.getAttributeNode("id");return bV.nodeType===1&&bU&&bU.nodeValue===bT}}e.removeChild(bR);e=bR=null})();(function(){var e=av.createElement("div");e.appendChild(av.createComment(""));if(e.getElementsByTagName("*").length>0){bE.find.TAG=function(bR,bV){var bU=bV.getElementsByTagName(bR[1]);if(bR[1]==="*"){var bT=[];for(var bS=0;bU[bS];bS++){if(bU[bS].nodeType===1){bT.push(bU[bS])}}bU=bT}return bU}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){bE.attrHandle.href=function(bR){return bR.getAttribute("href",2)}}e=null})();if(av.querySelectorAll){(function(){var e=by,bT=av.createElement("div"),bS="__sizzle__";bT.innerHTML="<p class='TEST'></p>";if(bT.querySelectorAll&&bT.querySelectorAll(".TEST").length===0){return}by=function(b4,bV,bZ,b3){bV=bV||av;if(!b3&&!by.isXML(bV)){var b2=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b4);if(b2&&(bV.nodeType===1||bV.nodeType===9)){if(b2[1]){return bF(bV.getElementsByTagName(b4),bZ)}else{if(b2[2]&&bE.find.CLASS&&bV.getElementsByClassName){return bF(bV.getElementsByClassName(b2[2]),bZ)}}}if(bV.nodeType===9){if(b4==="body"&&bV.body){return bF([bV.body],bZ)}else{if(b2&&b2[3]){var bY=bV.getElementById(b2[3]);if(bY&&bY.parentNode){if(bY.id===b2[3]){return bF([bY],bZ)}}else{return bF([],bZ)}}}try{return bF(bV.querySelectorAll(b4),bZ)}catch(b0){}}else{if(bV.nodeType===1&&bV.nodeName.toLowerCase()!=="object"){var bW=bV,bX=bV.getAttribute("id"),bU=bX||bS,b6=bV.parentNode,b5=/^\s*[+~]/.test(b4);if(!bX){bV.setAttribute("id",bU)}else{bU=bU.replace(/'/g,"\\$&")}if(b5&&b6){bV=bV.parentNode}try{if(!b5||b6){return bF(bV.querySelectorAll("[id='"+bU+"'] "+b4),bZ)}}catch(b1){}finally{if(!bX){bW.removeAttribute("id")}}}}}return e(b4,bV,bZ,b3)};for(var bR in e){by[bR]=e[bR]}bT=null})()}(function(){var e=av.documentElement,bS=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(bS){var bU=!bS.call(av.createElement("div"),"div"),bR=false;try{bS.call(av.documentElement,"[test!='']:sizzle")}catch(bT){bR=true}by.matchesSelector=function(bW,bY){bY=bY.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!by.isXML(bW)){try{if(bR||!bE.match.PSEUDO.test(bY)&&!/!=/.test(bY)){var bV=bS.call(bW,bY);if(bV||!bU||bW.document&&bW.document.nodeType!==11){return bV}}}catch(bX){}}return by(bY,null,null,[bW]).length>0}}})();(function(){var e=av.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}bE.order.splice(1,0,"CLASS");bE.find.CLASS=function(bR,bS,bT){if(typeof bS.getElementsByClassName!=="undefined"&&!bT){return bS.getElementsByClassName(bR[1])}};e=null})();function bv(bR,bW,bV,bZ,bX,bY){for(var bT=0,bS=bZ.length;bT<bS;bT++){var e=bZ[bT];if(e){var bU=false;e=e[bR];while(e){if(e[bC]===bV){bU=bZ[e.sizset];break}if(e.nodeType===1&&!bY){e[bC]=bV;e.sizset=bT}if(e.nodeName.toLowerCase()===bW){bU=e;break}e=e[bR]}bZ[bT]=bU}}}function bN(bR,bW,bV,bZ,bX,bY){for(var bT=0,bS=bZ.length;bT<bS;bT++){var e=bZ[bT];if(e){var bU=false;e=e[bR];while(e){if(e[bC]===bV){bU=bZ[e.sizset];break}if(e.nodeType===1){if(!bY){e[bC]=bV;e.sizset=bT}if(typeof bW!=="string"){if(e===bW){bU=true;break}}else{if(by.filter(bW,[e]).length>0){bU=e;break}}}e=e[bR]}bZ[bT]=bU}}}if(av.documentElement.contains){by.contains=function(bR,e){return bR!==e&&(bR.contains?bR.contains(e):true)}}else{if(av.documentElement.compareDocumentPosition){by.contains=function(bR,e){return !!(bR.compareDocumentPosition(e)&16)}}else{by.contains=function(){return false}}}by.isXML=function(e){var bR=(e?e.ownerDocument||e:0).documentElement;return bR?bR.nodeName!=="HTML":false};var bM=function(bS,e,bW){var bV,bX=[],bU="",bY=e.nodeType?[e]:e;
while((bV=bE.match.PSEUDO.exec(bS))){bU+=bV[0];bS=bS.replace(bE.match.PSEUDO,"")}bS=bE.relative[bS]?bS+"*":bS;for(var bT=0,bR=bY.length;bT<bR;bT++){by(bS,bY[bT],bX,bW)}return by.filter(bU,bX)};by.attr=b.attr;by.selectors.attrMap={};b.find=by;b.expr=by.selectors;b.expr[":"]=b.expr.filters;b.unique=by.uniqueSort;b.text=by.getText;b.isXMLDoc=by.isXML;b.contains=by.contains})();var ab=/Until$/,aq=/^(?:parents|prevUntil|prevAll)/,bb=/,/,bp=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,H=b.expr.match.globalPOS,ay={children:true,contents:true,next:true,prev:true};b.fn.extend({find:function(e){var bw=this,by,bv;if(typeof e!=="string"){return b(e).filter(function(){for(by=0,bv=bw.length;by<bv;by++){if(b.contains(bw[by],this)){return true}}})}var bx=this.pushStack("","find",e),bA,bB,bz;for(by=0,bv=this.length;by<bv;by++){bA=bx.length;b.find(e,this[by],bx);if(by>0){for(bB=bA;bB<bx.length;bB++){for(bz=0;bz<bA;bz++){if(bx[bz]===bx[bB]){bx.splice(bB--,1);break}}}}}return bx},has:function(bv){var e=b(bv);return this.filter(function(){for(var bx=0,bw=e.length;bx<bw;bx++){if(b.contains(this,e[bx])){return true}}})},not:function(e){return this.pushStack(aH(this,e,false),"not",e)},filter:function(e){return this.pushStack(aH(this,e,true),"filter",e)},is:function(e){return !!e&&(typeof e==="string"?H.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(by,bx){var bv=[],bw,e,bz=this[0];if(b.isArray(by)){var bB=1;while(bz&&bz.ownerDocument&&bz!==bx){for(bw=0;bw<by.length;bw++){if(b(bz).is(by[bw])){bv.push({selector:by[bw],elem:bz,level:bB})}}bz=bz.parentNode;bB++}return bv}var bA=H.test(by)||typeof by!=="string"?b(by,bx||this.context):0;for(bw=0,e=this.length;bw<e;bw++){bz=this[bw];while(bz){if(bA?bA.index(bz)>-1:b.find.matchesSelector(bz,by)){bv.push(bz);break}else{bz=bz.parentNode;if(!bz||!bz.ownerDocument||bz===bx||bz.nodeType===11){break}}}}bv=bv.length>1?b.unique(bv):bv;return this.pushStack(bv,"closest",by)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof e==="string"){return b.inArray(this[0],b(e))}return b.inArray(e.jquery?e[0]:e,this)},add:function(e,bv){var bx=typeof e==="string"?b(e,bv):b.makeArray(e&&e.nodeType?[e]:e),bw=b.merge(this.get(),bx);return this.pushStack(B(bx[0])||B(bw[0])?bw:b.unique(bw))},andSelf:function(){return this.add(this.prevObject)}});function B(e){return !e||!e.parentNode||e.parentNode.nodeType===11}b.each({parent:function(bv){var e=bv.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(bv,e,bw){return b.dir(bv,"parentNode",bw)},next:function(e){return b.nth(e,2,"nextSibling")},prev:function(e){return b.nth(e,2,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(bv,e,bw){return b.dir(bv,"nextSibling",bw)},prevUntil:function(bv,e,bw){return b.dir(bv,"previousSibling",bw)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.makeArray(e.childNodes)}},function(e,bv){b.fn[e]=function(by,bw){var bx=b.map(this,bv,by);if(!ab.test(e)){bw=by}if(bw&&typeof bw==="string"){bx=b.filter(bw,bx)}bx=this.length>1&&!ay[e]?b.unique(bx):bx;if((this.length>1||bb.test(bw))&&aq.test(e)){bx=bx.reverse()}return this.pushStack(bx,e,P.call(arguments).join(","))}});b.extend({filter:function(bw,e,bv){if(bv){bw=":not("+bw+")"}return e.length===1?b.find.matchesSelector(e[0],bw)?[e[0]]:[]:b.find.matches(bw,e)},dir:function(bw,bv,by){var e=[],bx=bw[bv];while(bx&&bx.nodeType!==9&&(by===L||bx.nodeType!==1||!b(bx).is(by))){if(bx.nodeType===1){e.push(bx)}bx=bx[bv]}return e},nth:function(by,e,bw,bx){e=e||1;var bv=0;for(;by;by=by[bw]){if(by.nodeType===1&&++bv===e){break}}return by},sibling:function(bw,bv){var e=[];for(;bw;bw=bw.nextSibling){if(bw.nodeType===1&&bw!==bv){e.push(bw)
}}return e}});function aH(bx,bw,e){bw=bw||0;if(b.isFunction(bw)){return b.grep(bx,function(bz,by){var bA=!!bw.call(bz,by,bz);return bA===e})}else{if(bw.nodeType){return b.grep(bx,function(bz,by){return(bz===bw)===e})}else{if(typeof bw==="string"){var bv=b.grep(bx,function(by){return by.nodeType===1});if(bp.test(bw)){return b.filter(bw,bv,!e)}else{bw=b.filter(bw,bv)}}}}return b.grep(bx,function(bz,by){return(b.inArray(bz,bw)>=0)===e})}function a(e){var bw=aS.split("|"),bv=e.createDocumentFragment();if(bv.createElement){while(bw.length){bv.createElement(bw.pop())}}return bv}var aS="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ah=/ jQuery\d+="(?:\d+|null)"/g,ar=/^\s+/,R=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/<([\w:]+)/,v=/<tbody/i,W=/<|&#?\w+;/,ae=/<(?:script|style)/i,O=/<(?:script|object|embed|option|style)/i,ai=new RegExp("<(?:"+aS+")[\\s/>]","i"),o=/checked\s*(?:[^=]|=\s*.checked.)/i,bn=/\/(java|ecma)script/i,aO=/^\s*<!(?:\[CDATA\[|\-\-)/,ax={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ac=a(av);ax.optgroup=ax.option;ax.tbody=ax.tfoot=ax.colgroup=ax.caption=ax.thead;ax.th=ax.td;if(!b.support.htmlSerialize){ax._default=[1,"div<div>","</div>"]}b.fn.extend({text:function(e){return b.access(this,function(bv){return bv===L?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||av).createTextNode(bv))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e)){return this.each(function(bw){b(this).wrapAll(e.call(this,bw))})}if(this[0]){var bv=b(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){bv.insertBefore(this[0])}bv.map(function(){var bw=this;while(bw.firstChild&&bw.firstChild.nodeType===1){bw=bw.firstChild}return bw}).append(this)}return this},wrapInner:function(e){if(b.isFunction(e)){return this.each(function(bv){b(this).wrapInner(e.call(this,bv))})}return this.each(function(){var bv=b(this),bw=bv.contents();if(bw.length){bw.wrapAll(e)}else{bv.append(e)}})},wrap:function(e){var bv=b.isFunction(e);return this.each(function(bw){b(this).wrapAll(bv?e.call(this,bw):e)})},unwrap:function(){return this.parent().each(function(){if(!b.nodeName(this,"body")){b(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.insertBefore(e,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bv){this.parentNode.insertBefore(bv,this)})}else{if(arguments.length){var e=b.clean(arguments);e.push.apply(e,this.toArray());return this.pushStack(e,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bv){this.parentNode.insertBefore(bv,this.nextSibling)})}else{if(arguments.length){var e=this.pushStack(this,"after",arguments);e.push.apply(e,b.clean(arguments));return e}}},remove:function(e,bx){for(var bv=0,bw;(bw=this[bv])!=null;bv++){if(!e||b.filter(e,[bw]).length){if(!bx&&bw.nodeType===1){b.cleanData(bw.getElementsByTagName("*"));b.cleanData([bw])}if(bw.parentNode){bw.parentNode.removeChild(bw)}}}return this},empty:function(){for(var e=0,bv;(bv=this[e])!=null;e++){if(bv.nodeType===1){b.cleanData(bv.getElementsByTagName("*"))}while(bv.firstChild){bv.removeChild(bv.firstChild)}}return this},clone:function(bv,e){bv=bv==null?false:bv;e=e==null?bv:e;return this.map(function(){return b.clone(this,bv,e)})},html:function(e){return b.access(this,function(by){var bx=this[0]||{},bw=0,bv=this.length;
if(by===L){return bx.nodeType===1?bx.innerHTML.replace(ah,""):null}if(typeof by==="string"&&!ae.test(by)&&(b.support.leadingWhitespace||!ar.test(by))&&!ax[(d.exec(by)||["",""])[1].toLowerCase()]){by=by.replace(R,"<$1></$2>");try{for(;bw<bv;bw++){bx=this[bw]||{};if(bx.nodeType===1){b.cleanData(bx.getElementsByTagName("*"));bx.innerHTML=by}}bx=0}catch(bz){}}if(bx){this.empty().append(by)}},null,e,arguments.length)},replaceWith:function(e){if(this[0]&&this[0].parentNode){if(b.isFunction(e)){return this.each(function(bx){var bw=b(this),bv=bw.html();bw.replaceWith(e.call(this,bx,bv))})}if(typeof e!=="string"){e=b(e).detach()}return this.each(function(){var bw=this.nextSibling,bv=this.parentNode;b(this).remove();if(bw){b(bw).before(e)}else{b(bv).append(e)}})}else{return this.length?this.pushStack(b(b.isFunction(e)?e():e),"replaceWith",e):this}},detach:function(e){return this.remove(e,true)},domManip:function(bB,bF,bE){var bx,by,bA,bD,bC=bB[0],bv=[];if(!b.support.checkClone&&arguments.length===3&&typeof bC==="string"&&o.test(bC)){return this.each(function(){b(this).domManip(bB,bF,bE,true)})}if(b.isFunction(bC)){return this.each(function(bH){var bG=b(this);bB[0]=bC.call(this,bH,bF?bG.html():L);bG.domManip(bB,bF,bE)})}if(this[0]){bD=bC&&bC.parentNode;if(b.support.parentNode&&bD&&bD.nodeType===11&&bD.childNodes.length===this.length){bx={fragment:bD}}else{bx=b.buildFragment(bB,this,bv)}bA=bx.fragment;if(bA.childNodes.length===1){by=bA=bA.firstChild}else{by=bA.firstChild}if(by){bF=bF&&b.nodeName(by,"tr");for(var bw=0,e=this.length,bz=e-1;bw<e;bw++){bE.call(bF?bc(this[bw],by):this[bw],bx.cacheable||(e>1&&bw<bz)?b.clone(bA,true,true):bA)}}if(bv.length){b.each(bv,function(bG,bH){if(bH.src){b.ajax({type:"GET",global:false,url:bH.src,async:false,dataType:"script"})}else{b.globalEval((bH.text||bH.textContent||bH.innerHTML||"").replace(aO,"/*$0*/"))}if(bH.parentNode){bH.parentNode.removeChild(bH)}})}}return this}});function bc(e,bv){return b.nodeName(e,"table")?(e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody"))):e}function s(bB,bv){if(bv.nodeType!==1||!b.hasData(bB)){return}var by,bx,e,bA=b._data(bB),bz=b._data(bv,bA),bw=bA.events;if(bw){delete bz.handle;bz.events={};for(by in bw){for(bx=0,e=bw[by].length;bx<e;bx++){b.event.add(bv,by,bw[by][bx])}}}if(bz.data){bz.data=b.extend({},bz.data)}}function aj(bv,e){var bw;if(e.nodeType!==1){return}if(e.clearAttributes){e.clearAttributes()}if(e.mergeAttributes){e.mergeAttributes(bv)}bw=e.nodeName.toLowerCase();if(bw==="object"){e.outerHTML=bv.outerHTML}else{if(bw==="input"&&(bv.type==="checkbox"||bv.type==="radio")){if(bv.checked){e.defaultChecked=e.checked=bv.checked}if(e.value!==bv.value){e.value=bv.value}}else{if(bw==="option"){e.selected=bv.defaultSelected}else{if(bw==="input"||bw==="textarea"){e.defaultValue=bv.defaultValue}else{if(bw==="script"&&e.text!==bv.text){e.text=bv.text}}}}}e.removeAttribute(b.expando);e.removeAttribute("_submit_attached");e.removeAttribute("_change_attached")}b.buildFragment=function(bz,bx,bv){var by,e,bw,bA,bB=bz[0];if(bx&&bx[0]){bA=bx[0].ownerDocument||bx[0]}if(!bA.createDocumentFragment){bA=av}if(bz.length===1&&typeof bB==="string"&&bB.length<512&&bA===av&&bB.charAt(0)==="<"&&!O.test(bB)&&(b.support.checkClone||!o.test(bB))&&(b.support.html5Clone||!ai.test(bB))){e=true;bw=b.fragments[bB];if(bw&&bw!==1){by=bw}}if(!by){by=bA.createDocumentFragment();b.clean(bz,bA,by,bv)}if(e){b.fragments[bB]=bw?by:1}return{fragment:by,cacheable:e}};b.fragments={};b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,bv){b.fn[e]=function(bw){var bz=[],bC=b(bw),bB=this.length===1&&this[0].parentNode;if(bB&&bB.nodeType===11&&bB.childNodes.length===1&&bC.length===1){bC[bv](this[0]);return this}else{for(var bA=0,bx=bC.length;bA<bx;bA++){var by=(bA>0?this.clone(true):this).get();b(bC[bA])[bv](by);bz=bz.concat(by)}return this.pushStack(bz,e,bC.selector)}}});function bh(e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName("*")
}else{if(typeof e.querySelectorAll!=="undefined"){return e.querySelectorAll("*")}else{return[]}}}function az(e){if(e.type==="checkbox"||e.type==="radio"){e.defaultChecked=e.checked}}function D(e){var bv=(e.nodeName||"").toLowerCase();if(bv==="input"){az(e)}else{if(bv!=="script"&&typeof e.getElementsByTagName!=="undefined"){b.grep(e.getElementsByTagName("input"),az)}}}function am(e){var bv=av.createElement("div");ac.appendChild(bv);bv.innerHTML=e.outerHTML;return bv.firstChild}b.extend({clone:function(by,bA,bw){var e,bv,bx,bz=b.support.html5Clone||b.isXMLDoc(by)||!ai.test("<"+by.nodeName+">")?by.cloneNode(true):am(by);if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(by.nodeType===1||by.nodeType===11)&&!b.isXMLDoc(by)){aj(by,bz);e=bh(by);bv=bh(bz);for(bx=0;e[bx];++bx){if(bv[bx]){aj(e[bx],bv[bx])}}}if(bA){s(by,bz);if(bw){e=bh(by);bv=bh(bz);for(bx=0;e[bx];++bx){s(e[bx],bv[bx])}}}e=bv=null;return bz},clean:function(bI,bw,bv,bx){var bA,bH,bD,bJ=[];bw=bw||av;if(typeof bw.createElement==="undefined"){bw=bw.ownerDocument||bw[0]&&bw[0].ownerDocument||av}for(var bE=0,bG;(bG=bI[bE])!=null;bE++){if(typeof bG==="number"){bG+=""}if(!bG){continue}if(typeof bG==="string"){if(!W.test(bG)){bG=bw.createTextNode(bG)}else{bG=bG.replace(R,"<$1></$2>");var bN=(d.exec(bG)||["",""])[1].toLowerCase(),bz=ax[bN]||ax._default,bK=bz[0],bB=bw.createElement("div"),bL=ac.childNodes,bM;if(bw===av){ac.appendChild(bB)}else{a(bw).appendChild(bB)}bB.innerHTML=bz[1]+bG+bz[2];while(bK--){bB=bB.lastChild}if(!b.support.tbody){var by=v.test(bG),e=bN==="table"&&!by?bB.firstChild&&bB.firstChild.childNodes:bz[1]==="<table>"&&!by?bB.childNodes:[];for(bD=e.length-1;bD>=0;--bD){if(b.nodeName(e[bD],"tbody")&&!e[bD].childNodes.length){e[bD].parentNode.removeChild(e[bD])}}}if(!b.support.leadingWhitespace&&ar.test(bG)){bB.insertBefore(bw.createTextNode(ar.exec(bG)[0]),bB.firstChild)}bG=bB.childNodes;if(bB){bB.parentNode.removeChild(bB);if(bL.length>0){bM=bL[bL.length-1];if(bM&&bM.parentNode){bM.parentNode.removeChild(bM)}}}}}var bF;if(!b.support.appendChecked){if(bG[0]&&typeof(bF=bG.length)==="number"){for(bD=0;bD<bF;bD++){D(bG[bD])}}else{D(bG)}}if(bG.nodeType){bJ.push(bG)}else{bJ=b.merge(bJ,bG)}}if(bv){bA=function(bO){return !bO.type||bn.test(bO.type)};for(bE=0;bJ[bE];bE++){bH=bJ[bE];if(bx&&b.nodeName(bH,"script")&&(!bH.type||bn.test(bH.type))){bx.push(bH.parentNode?bH.parentNode.removeChild(bH):bH)}else{if(bH.nodeType===1){var bC=b.grep(bH.getElementsByTagName("script"),bA);bJ.splice.apply(bJ,[bE+1,0].concat(bC))}bv.appendChild(bH)}}}return bJ},cleanData:function(bv){var by,bw,e=b.cache,bB=b.event.special,bA=b.support.deleteExpando;for(var bz=0,bx;(bx=bv[bz])!=null;bz++){if(bx.nodeName&&b.noData[bx.nodeName.toLowerCase()]){continue}bw=bx[b.expando];if(bw){by=e[bw];if(by&&by.events){for(var bC in by.events){if(bB[bC]){b.event.remove(bx,bC)}else{b.removeEvent(bx,bC,by.handle)}}if(by.handle){by.handle.elem=null}}if(bA){delete bx[b.expando]}else{if(bx.removeAttribute){bx.removeAttribute(b.expando)}}delete e[bw]}}}});var al=/alpha\([^)]*\)/i,au=/opacity=([^)]*)/,y=/([A-Z]|^ms)/g,bo=/^[\-+]?(?:\d*\.)?\d+$/i,a1=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,I=/^([\-+])=([\-+.\de]+)/,aE=/^margin/,a9={position:"absolute",visibility:"hidden",display:"block"},G=["Top","Right","Bottom","Left"],Z,aJ,aY;b.fn.css=function(e,bv){return b.access(this,function(bx,bw,by){return by!==L?b.style(bx,bw,by):b.css(bx,bw)},e,bv,arguments.length>1)};b.extend({cssHooks:{opacity:{get:function(bw,bv){if(bv){var e=Z(bw,"opacity");return e===""?"1":e}else{return bw.style.opacity}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(bx,bw,bD,by){if(!bx||bx.nodeType===3||bx.nodeType===8||!bx.style){return}var bB,bC,bz=b.camelCase(bw),bv=bx.style,bE=b.cssHooks[bz];bw=b.cssProps[bz]||bz;if(bD!==L){bC=typeof bD;if(bC==="string"&&(bB=I.exec(bD))){bD=(+(bB[1]+1)*+bB[2])+parseFloat(b.css(bx,bw));
bC="number"}if(bD==null||bC==="number"&&isNaN(bD)){return}if(bC==="number"&&!b.cssNumber[bz]){bD+="px"}if(!bE||!("set" in bE)||(bD=bE.set(bx,bD))!==L){try{bv[bw]=bD}catch(bA){}}}else{if(bE&&"get" in bE&&(bB=bE.get(bx,false,by))!==L){return bB}return bv[bw]}},css:function(by,bx,bv){var bw,e;bx=b.camelCase(bx);e=b.cssHooks[bx];bx=b.cssProps[bx]||bx;if(bx==="cssFloat"){bx="float"}if(e&&"get" in e&&(bw=e.get(by,true,bv))!==L){return bw}else{if(Z){return Z(by,bx)}}},swap:function(by,bx,bz){var e={},bw,bv;for(bv in bx){e[bv]=by.style[bv];by.style[bv]=bx[bv]}bw=bz.call(by);for(bv in bx){by.style[bv]=e[bv]}return bw}});b.curCSS=b.css;if(av.defaultView&&av.defaultView.getComputedStyle){aJ=function(bA,bw){var bv,bz,e,by,bx=bA.style;bw=bw.replace(y,"-$1").toLowerCase();if((bz=bA.ownerDocument.defaultView)&&(e=bz.getComputedStyle(bA,null))){bv=e.getPropertyValue(bw);if(bv===""&&!b.contains(bA.ownerDocument.documentElement,bA)){bv=b.style(bA,bw)}}if(!b.support.pixelMargin&&e&&aE.test(bw)&&a1.test(bv)){by=bx.width;bx.width=bv;bv=e.width;bx.width=by}return bv}}if(av.documentElement.currentStyle){aY=function(bz,bw){var bA,e,by,bv=bz.currentStyle&&bz.currentStyle[bw],bx=bz.style;if(bv==null&&bx&&(by=bx[bw])){bv=by}if(a1.test(bv)){bA=bx.left;e=bz.runtimeStyle&&bz.runtimeStyle.left;if(e){bz.runtimeStyle.left=bz.currentStyle.left}bx.left=bw==="fontSize"?"1em":bv;bv=bx.pixelLeft+"px";bx.left=bA;if(e){bz.runtimeStyle.left=e}}return bv===""?"auto":bv}}Z=aJ||aY;function af(by,bw,bv){var bz=bw==="width"?by.offsetWidth:by.offsetHeight,bx=bw==="width"?1:0,e=4;if(bz>0){if(bv!=="border"){for(;bx<e;bx+=2){if(!bv){bz-=parseFloat(b.css(by,"padding"+G[bx]))||0}if(bv==="margin"){bz+=parseFloat(b.css(by,bv+G[bx]))||0}else{bz-=parseFloat(b.css(by,"border"+G[bx]+"Width"))||0}}}return bz+"px"}bz=Z(by,bw);if(bz<0||bz==null){bz=by.style[bw]}if(a1.test(bz)){return bz}bz=parseFloat(bz)||0;if(bv){for(;bx<e;bx+=2){bz+=parseFloat(b.css(by,"padding"+G[bx]))||0;if(bv!=="padding"){bz+=parseFloat(b.css(by,"border"+G[bx]+"Width"))||0}if(bv==="margin"){bz+=parseFloat(b.css(by,bv+G[bx]))||0}}}return bz+"px"}b.each(["height","width"],function(bv,e){b.cssHooks[e]={get:function(by,bx,bw){if(bx){if(by.offsetWidth!==0){return af(by,e,bw)}else{return b.swap(by,a9,function(){return af(by,e,bw)})}}},set:function(bw,bx){return bo.test(bx)?bx+"px":bx}}});if(!b.support.opacity){b.cssHooks.opacity={get:function(bv,e){return au.test((e&&bv.currentStyle?bv.currentStyle.filter:bv.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":e?"1":""},set:function(by,bz){var bx=by.style,bv=by.currentStyle,e=b.isNumeric(bz)?"alpha(opacity="+bz*100+")":"",bw=bv&&bv.filter||bx.filter||"";bx.zoom=1;if(bz>=1&&b.trim(bw.replace(al,""))===""){bx.removeAttribute("filter");if(bv&&!bv.filter){return}}bx.filter=al.test(bw)?bw.replace(al,e):bw+" "+e}}}b(function(){if(!b.support.reliableMarginRight){b.cssHooks.marginRight={get:function(bv,e){return b.swap(bv,{display:"inline-block"},function(){if(e){return Z(bv,"margin-right")}else{return bv.style.marginRight}})}}}});if(b.expr&&b.expr.filters){b.expr.filters.hidden=function(bw){var bv=bw.offsetWidth,e=bw.offsetHeight;return(bv===0&&e===0)||(!b.support.reliableHiddenOffsets&&((bw.style&&bw.style.display)||b.css(bw,"display"))==="none")};b.expr.filters.visible=function(e){return !b.expr.filters.hidden(e)}}b.each({margin:"",padding:"",border:"Width"},function(e,bv){b.cssHooks[e+bv]={expand:function(by){var bx,bz=typeof by==="string"?by.split(" "):[by],bw={};for(bx=0;bx<4;bx++){bw[e+G[bx]+bv]=bz[bx]||bz[bx-2]||bz[0]}return bw}}});var k=/%20/g,ap=/\[\]$/,bs=/\r?\n/g,bq=/#.*$/,aD=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,a0=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aN=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,aR=/^(?:GET|HEAD)$/,c=/^\/\//,M=/\?/,a7=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,p=/^(?:select|textarea)/i,h=/\s+/,br=/([?&])_=[^&]*/,K=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,z=b.fn.load,aa={},q={},aF,r,aW=["*/"]+["*"];
try{aF=bm.href}catch(aw){aF=av.createElement("a");aF.href="";aF=aF.href}r=K.exec(aF.toLowerCase())||[];function f(e){return function(by,bA){if(typeof by!=="string"){bA=by;by="*"}if(b.isFunction(bA)){var bx=by.toLowerCase().split(h),bw=0,bz=bx.length,bv,bB,bC;for(;bw<bz;bw++){bv=bx[bw];bC=/^\+/.test(bv);if(bC){bv=bv.substr(1)||"*"}bB=e[bv]=e[bv]||[];bB[bC?"unshift":"push"](bA)}}}}function aX(bv,bE,bz,bD,bB,bx){bB=bB||bE.dataTypes[0];bx=bx||{};bx[bB]=true;var bA=bv[bB],bw=0,e=bA?bA.length:0,by=(bv===aa),bC;for(;bw<e&&(by||!bC);bw++){bC=bA[bw](bE,bz,bD);if(typeof bC==="string"){if(!by||bx[bC]){bC=L}else{bE.dataTypes.unshift(bC);bC=aX(bv,bE,bz,bD,bC,bx)}}}if((by||!bC)&&!bx["*"]){bC=aX(bv,bE,bz,bD,"*",bx)}return bC}function an(bw,bx){var bv,e,by=b.ajaxSettings.flatOptions||{};for(bv in bx){if(bx[bv]!==L){(by[bv]?bw:(e||(e={})))[bv]=bx[bv]}}if(e){b.extend(true,bw,e)}}b.fn.extend({load:function(bw,bz,bA){if(typeof bw!=="string"&&z){return z.apply(this,arguments)}else{if(!this.length){return this}}var by=bw.indexOf(" ");if(by>=0){var e=bw.slice(by,bw.length);bw=bw.slice(0,by)}var bx="GET";if(bz){if(b.isFunction(bz)){bA=bz;bz=L}else{if(typeof bz==="object"){bz=b.param(bz,b.ajaxSettings.traditional);bx="POST"}}}var bv=this;b.ajax({url:bw,type:bx,dataType:"html",data:bz,complete:function(bC,bB,bD){bD=bC.responseText;if(bC.isResolved()){bC.done(function(bE){bD=bE});bv.html(e?b("<div>").append(bD.replace(a7,"")).find(e):bD)}if(bA){bv.each(bA,[bD,bB,bC])}}});return this},serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?b.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||p.test(this.nodeName)||a0.test(this.type))}).map(function(e,bv){var bw=b(this).val();return bw==null?null:b.isArray(bw)?b.map(bw,function(by,bx){return{name:bv.name,value:by.replace(bs,"\r\n")}}):{name:bv.name,value:bw.replace(bs,"\r\n")}}).get()}});b.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,bv){b.fn[bv]=function(bw){return this.on(bv,bw)}});b.each(["get","post"],function(e,bv){b[bv]=function(bw,by,bz,bx){if(b.isFunction(by)){bx=bx||bz;bz=by;by=L}return b.ajax({type:bv,url:bw,data:by,success:bz,dataType:bx})}});b.extend({getScript:function(e,bv){return b.get(e,L,bv,"script")},getJSON:function(e,bv,bw){return b.get(e,bv,bw,"json")},ajaxSetup:function(bv,e){if(e){an(bv,b.ajaxSettings)}else{e=bv;bv=b.ajaxSettings}an(bv,e);return bv},ajaxSettings:{url:aF,isLocal:aN.test(r[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":aW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":bd.String,"text html":true,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:f(aa),ajaxTransport:f(q),ajax:function(bz,bx){if(typeof bz==="object"){bx=bz;bz=L}bx=bx||{};var bD=b.ajaxSetup({},bx),bS=bD.context||bD,bG=bS!==bD&&(bS.nodeType||bS instanceof b)?b(bS):b.event,bR=b.Deferred(),bN=b.Callbacks("once memory"),bB=bD.statusCode||{},bC,bH={},bO={},bQ,by,bL,bE,bI,bA=0,bw,bK,bJ={readyState:0,setRequestHeader:function(bT,bU){if(!bA){var e=bT.toLowerCase();bT=bO[e]=bO[e]||bT;bH[bT]=bU}return this},getAllResponseHeaders:function(){return bA===2?bQ:null},getResponseHeader:function(bT){var e;if(bA===2){if(!by){by={};while((e=aD.exec(bQ))){by[e[1].toLowerCase()]=e[2]}}e=by[bT.toLowerCase()]}return e===L?null:e},overrideMimeType:function(e){if(!bA){bD.mimeType=e}return this},abort:function(e){e=e||"abort";if(bL){bL.abort(e)}bF(0,e);return this}};function bF(bZ,bU,b0,bW){if(bA===2){return}bA=2;if(bE){clearTimeout(bE)}bL=L;bQ=bW||"";bJ.readyState=bZ>0?4:0;var bT,b4,b3,bX=bU,bY=b0?bk(bD,bJ,b0):L,bV,b2;if(bZ>=200&&bZ<300||bZ===304){if(bD.ifModified){if((bV=bJ.getResponseHeader("Last-Modified"))){b.lastModified[bC]=bV
}if((b2=bJ.getResponseHeader("Etag"))){b.etag[bC]=b2}}if(bZ===304){bX="notmodified";bT=true}else{try{b4=F(bD,bY);bX="success";bT=true}catch(b1){bX="parsererror";b3=b1}}}else{b3=bX;if(!bX||bZ){bX="error";if(bZ<0){bZ=0}}}bJ.status=bZ;bJ.statusText=""+(bU||bX);if(bT){bR.resolveWith(bS,[b4,bX,bJ])}else{bR.rejectWith(bS,[bJ,bX,b3])}bJ.statusCode(bB);bB=L;if(bw){bG.trigger("ajax"+(bT?"Success":"Error"),[bJ,bD,bT?b4:b3])}bN.fireWith(bS,[bJ,bX]);if(bw){bG.trigger("ajaxComplete",[bJ,bD]);if(!(--b.active)){b.event.trigger("ajaxStop")}}}bR.promise(bJ);bJ.success=bJ.done;bJ.error=bJ.fail;bJ.complete=bN.add;bJ.statusCode=function(bT){if(bT){var e;if(bA<2){for(e in bT){bB[e]=[bB[e],bT[e]]}}else{e=bT[bJ.status];bJ.then(e,e)}}return this};bD.url=((bz||bD.url)+"").replace(bq,"").replace(c,r[1]+"//");bD.dataTypes=b.trim(bD.dataType||"*").toLowerCase().split(h);if(bD.crossDomain==null){bI=K.exec(bD.url.toLowerCase());bD.crossDomain=!!(bI&&(bI[1]!=r[1]||bI[2]!=r[2]||(bI[3]||(bI[1]==="http:"?80:443))!=(r[3]||(r[1]==="http:"?80:443))))}if(bD.data&&bD.processData&&typeof bD.data!=="string"){bD.data=b.param(bD.data,bD.traditional)}aX(aa,bD,bx,bJ);if(bA===2){return false}bw=bD.global;bD.type=bD.type.toUpperCase();bD.hasContent=!aR.test(bD.type);if(bw&&b.active++===0){b.event.trigger("ajaxStart")}if(!bD.hasContent){if(bD.data){bD.url+=(M.test(bD.url)?"&":"?")+bD.data;delete bD.data}bC=bD.url;if(bD.cache===false){var bv=b.now(),bP=bD.url.replace(br,"$1_="+bv);bD.url=bP+((bP===bD.url)?(M.test(bD.url)?"&":"?")+"_="+bv:"")}}if(bD.data&&bD.hasContent&&bD.contentType!==false||bx.contentType){bJ.setRequestHeader("Content-Type",bD.contentType)}if(bD.ifModified){bC=bC||bD.url;if(b.lastModified[bC]){bJ.setRequestHeader("If-Modified-Since",b.lastModified[bC])}if(b.etag[bC]){bJ.setRequestHeader("If-None-Match",b.etag[bC])}}bJ.setRequestHeader("Accept",bD.dataTypes[0]&&bD.accepts[bD.dataTypes[0]]?bD.accepts[bD.dataTypes[0]]+(bD.dataTypes[0]!=="*"?", "+aW+"; q=0.01":""):bD.accepts["*"]);for(bK in bD.headers){bJ.setRequestHeader(bK,bD.headers[bK])}if(bD.beforeSend&&(bD.beforeSend.call(bS,bJ,bD)===false||bA===2)){bJ.abort();return false}for(bK in {success:1,error:1,complete:1}){bJ[bK](bD[bK])}bL=aX(q,bD,bx,bJ);if(!bL){bF(-1,"No Transport")}else{bJ.readyState=1;if(bw){bG.trigger("ajaxSend",[bJ,bD])}if(bD.async&&bD.timeout>0){bE=setTimeout(function(){bJ.abort("timeout")},bD.timeout)}try{bA=1;bL.send(bH,bF)}catch(bM){if(bA<2){bF(-1,bM)}else{throw bM}}}return bJ},param:function(e,bw){var bv=[],by=function(bz,bA){bA=b.isFunction(bA)?bA():bA;bv[bv.length]=encodeURIComponent(bz)+"="+encodeURIComponent(bA)};if(bw===L){bw=b.ajaxSettings.traditional}if(b.isArray(e)||(e.jquery&&!b.isPlainObject(e))){b.each(e,function(){by(this.name,this.value)})}else{for(var bx in e){u(bx,e[bx],bw,by)}}return bv.join("&").replace(k,"+")}});function u(bw,by,bv,bx){if(b.isArray(by)){b.each(by,function(bA,bz){if(bv||ap.test(bw)){bx(bw,bz)}else{u(bw+"["+(typeof bz==="object"?bA:"")+"]",bz,bv,bx)}})}else{if(!bv&&b.type(by)==="object"){for(var e in by){u(bw+"["+e+"]",by[e],bv,bx)}}else{bx(bw,by)}}}b.extend({active:0,lastModified:{},etag:{}});function bk(bD,bC,bz){var bv=bD.contents,bB=bD.dataTypes,bw=bD.responseFields,by,bA,bx,e;for(bA in bw){if(bA in bz){bC[bw[bA]]=bz[bA]}}while(bB[0]==="*"){bB.shift();if(by===L){by=bD.mimeType||bC.getResponseHeader("content-type")}}if(by){for(bA in bv){if(bv[bA]&&bv[bA].test(by)){bB.unshift(bA);break}}}if(bB[0] in bz){bx=bB[0]}else{for(bA in bz){if(!bB[0]||bD.converters[bA+" "+bB[0]]){bx=bA;break}if(!e){e=bA}}bx=bx||e}if(bx){if(bx!==bB[0]){bB.unshift(bx)}return bz[bx]}}function F(bH,bz){if(bH.dataFilter){bz=bH.dataFilter(bz,bH.dataType)}var bD=bH.dataTypes,bG={},bA,bE,bw=bD.length,bB,bC=bD[0],bx,by,bF,bv,e;for(bA=1;bA<bw;bA++){if(bA===1){for(bE in bH.converters){if(typeof bE==="string"){bG[bE.toLowerCase()]=bH.converters[bE]}}}bx=bC;bC=bD[bA];if(bC==="*"){bC=bx}else{if(bx!=="*"&&bx!==bC){by=bx+" "+bC;bF=bG[by]||bG["* "+bC];if(!bF){e=L;for(bv in bG){bB=bv.split(" ");if(bB[0]===bx||bB[0]==="*"){e=bG[bB[1]+" "+bC];
if(e){bv=bG[bv];if(bv===true){bF=e}else{if(e===true){bF=bv}}break}}}}if(!(bF||e)){b.error("No conversion from "+by.replace(" "," to "))}if(bF!==true){bz=bF?bF(bz):e(bv(bz))}}}}return bz}var aC=b.now(),t=/(\=)\?(&|$)|\?\?/i;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return b.expando+"_"+(aC++)}});b.ajaxPrefilter("json jsonp",function(bD,bA,bC){var bx=(typeof bD.data==="string")&&/^application\/x\-www\-form\-urlencoded/.test(bD.contentType);if(bD.dataTypes[0]==="jsonp"||bD.jsonp!==false&&(t.test(bD.url)||bx&&t.test(bD.data))){var bB,bw=bD.jsonpCallback=b.isFunction(bD.jsonpCallback)?bD.jsonpCallback():bD.jsonpCallback,bz=bd[bw],e=bD.url,by=bD.data,bv="$1"+bw+"$2";if(bD.jsonp!==false){e=e.replace(t,bv);if(bD.url===e){if(bx){by=by.replace(t,bv)}if(bD.data===by){e+=(/\?/.test(e)?"&":"?")+bD.jsonp+"="+bw}}}bD.url=e;bD.data=by;bd[bw]=function(bE){bB=[bE]};bC.always(function(){bd[bw]=bz;if(bB&&b.isFunction(bz)){bd[bw](bB[0])}});bD.converters["script json"]=function(){if(!bB){b.error(bw+" was not called")}return bB[0]};bD.dataTypes[0]="json";return"script"}});b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){b.globalEval(e);return e}}});b.ajaxPrefilter("script",function(e){if(e.cache===L){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});b.ajaxTransport("script",function(bw){if(bw.crossDomain){var e,bv=av.head||av.getElementsByTagName("head")[0]||av.documentElement;return{send:function(bx,by){e=av.createElement("script");e.async="async";if(bw.scriptCharset){e.charset=bw.scriptCharset}e.src=bw.url;e.onload=e.onreadystatechange=function(bA,bz){if(bz||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(bv&&e.parentNode){bv.removeChild(e)}e=L;if(!bz){by(200,"success")}}};bv.insertBefore(e,bv.firstChild)},abort:function(){if(e){e.onload(0,1)}}}}});var A=bd.ActiveXObject?function(){for(var e in N){N[e](0,1)}}:false,x=0,N;function aM(){try{return new bd.XMLHttpRequest()}catch(bv){}}function ak(){try{return new bd.ActiveXObject("Microsoft.XMLHTTP")}catch(bv){}}b.ajaxSettings.xhr=bd.ActiveXObject?function(){return !this.isLocal&&aM()||ak()}:aM;(function(e){b.extend(b.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)})})(b.ajaxSettings.xhr());if(b.support.ajax){b.ajaxTransport(function(e){if(!e.crossDomain||b.support.cors){var bv;return{send:function(bB,bw){var bA=e.xhr(),bz,by;if(e.username){bA.open(e.type,e.url,e.async,e.username,e.password)}else{bA.open(e.type,e.url,e.async)}if(e.xhrFields){for(by in e.xhrFields){bA[by]=e.xhrFields[by]}}if(e.mimeType&&bA.overrideMimeType){bA.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!bB["X-Requested-With"]){bB["X-Requested-With"]="XMLHttpRequest"}try{for(by in bB){bA.setRequestHeader(by,bB[by])}}catch(bx){}bA.send((e.hasContent&&e.data)||null);bv=function(bK,bE){var bF,bD,bC,bI,bH;try{if(bv&&(bE||bA.readyState===4)){bv=L;if(bz){bA.onreadystatechange=b.noop;if(A){delete N[bz]}}if(bE){if(bA.readyState!==4){bA.abort()}}else{bF=bA.status;bC=bA.getAllResponseHeaders();bI={};bH=bA.responseXML;if(bH&&bH.documentElement){bI.xml=bH}try{bI.text=bA.responseText}catch(bK){}try{bD=bA.statusText}catch(bJ){bD=""}if(!bF&&e.isLocal&&!e.crossDomain){bF=bI.text?200:404}else{if(bF===1223){bF=204}}}}}catch(bG){if(!bE){bw(-1,bG)}}if(bI){bw(bF,bD,bI,bC)}};if(!e.async||bA.readyState===4){bv()}else{bz=++x;if(A){if(!N){N={};b(bd).unload(A)}N[bz]=bv}bA.onreadystatechange=bv}},abort:function(){if(bv){bv(0,1)}}}}})}var Q={},ba,m,aB=/^(?:toggle|show|hide)$/,aU=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,a4,aI=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],a5;b.fn.extend({show:function(bx,bA,bz){var bw,by;if(bx||bx===0){return this.animate(a2("show",3),bx,bA,bz)}else{for(var bv=0,e=this.length;bv<e;bv++){bw=this[bv];if(bw.style){by=bw.style.display;
if(!b._data(bw,"olddisplay")&&by==="none"){by=bw.style.display=""}if((by===""&&b.css(bw,"display")==="none")||!b.contains(bw.ownerDocument.documentElement,bw)){b._data(bw,"olddisplay",w(bw.nodeName))}}}for(bv=0;bv<e;bv++){bw=this[bv];if(bw.style){by=bw.style.display;if(by===""||by==="none"){bw.style.display=b._data(bw,"olddisplay")||""}}}return this}},hide:function(bx,bA,bz){if(bx||bx===0){return this.animate(a2("hide",3),bx,bA,bz)}else{var bw,by,bv=0,e=this.length;for(;bv<e;bv++){bw=this[bv];if(bw.style){by=b.css(bw,"display");if(by!=="none"&&!b._data(bw,"olddisplay")){b._data(bw,"olddisplay",by)}}}for(bv=0;bv<e;bv++){if(this[bv].style){this[bv].style.display="none"}}return this}},_toggle:b.fn.toggle,toggle:function(bw,bv,bx){var e=typeof bw==="boolean";if(b.isFunction(bw)&&b.isFunction(bv)){this._toggle.apply(this,arguments)}else{if(bw==null||e){this.each(function(){var by=e?bw:b(this).is(":hidden");b(this)[by?"show":"hide"]()})}else{this.animate(a2("toggle",3),bw,bv,bx)}}return this},fadeTo:function(e,bx,bw,bv){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:bx},e,bw,bv)},animate:function(bz,bw,by,bx){var e=b.speed(bw,by,bx);if(b.isEmptyObject(bz)){return this.each(e.complete,[false])}bz=b.extend({},bz);function bv(){if(e.queue===false){b._mark(this)}var bE=b.extend({},e),bL=this.nodeType===1,bJ=bL&&b(this).is(":hidden"),bB,bG,bD,bK,bN,bF,bI,bC,bH,bM,bA;bE.animatedProperties={};for(bD in bz){bB=b.camelCase(bD);if(bD!==bB){bz[bB]=bz[bD];delete bz[bD]}if((bN=b.cssHooks[bB])&&"expand" in bN){bF=bN.expand(bz[bB]);delete bz[bB];for(bD in bF){if(!(bD in bz)){bz[bD]=bF[bD]}}}}for(bB in bz){bG=bz[bB];if(b.isArray(bG)){bE.animatedProperties[bB]=bG[1];bG=bz[bB]=bG[0]}else{bE.animatedProperties[bB]=bE.specialEasing&&bE.specialEasing[bB]||bE.easing||"swing"}if(bG==="hide"&&bJ||bG==="show"&&!bJ){return bE.complete.call(this)}if(bL&&(bB==="height"||bB==="width")){bE.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(b.css(this,"display")==="inline"&&b.css(this,"float")==="none"){if(!b.support.inlineBlockNeedsLayout||w(this.nodeName)==="inline"){this.style.display="inline-block"}else{this.style.zoom=1}}}}if(bE.overflow!=null){this.style.overflow="hidden"}for(bD in bz){bK=new b.fx(this,bE,bD);bG=bz[bD];if(aB.test(bG)){bA=b._data(this,"toggle"+bD)||(bG==="toggle"?bJ?"show":"hide":0);if(bA){b._data(this,"toggle"+bD,bA==="show"?"hide":"show");bK[bA]()}else{bK[bG]()}}else{bI=aU.exec(bG);bC=bK.cur();if(bI){bH=parseFloat(bI[2]);bM=bI[3]||(b.cssNumber[bD]?"":"px");if(bM!=="px"){b.style(this,bD,(bH||1)+bM);bC=((bH||1)/bK.cur())*bC;b.style(this,bD,bC+bM)}if(bI[1]){bH=((bI[1]==="-="?-1:1)*bH)+bC}bK.custom(bC,bH,bM)}else{bK.custom(bC,bG,"")}}}return true}return e.queue===false?this.each(bv):this.queue(e.queue,bv)},stop:function(bw,bv,e){if(typeof bw!=="string"){e=bv;bv=bw;bw=L}if(bv&&bw!==false){this.queue(bw||"fx",[])}return this.each(function(){var bx,by=false,bA=b.timers,bz=b._data(this);if(!e){b._unmark(true,this)}function bB(bE,bF,bD){var bC=bF[bD];b.removeData(bE,bD,true);bC.stop(e)}if(bw==null){for(bx in bz){if(bz[bx]&&bz[bx].stop&&bx.indexOf(".run")===bx.length-4){bB(this,bz,bx)}}}else{if(bz[bx=bw+".run"]&&bz[bx].stop){bB(this,bz,bx)}}for(bx=bA.length;bx--;){if(bA[bx].elem===this&&(bw==null||bA[bx].queue===bw)){if(e){bA[bx](true)}else{bA[bx].saveState()}by=true;bA.splice(bx,1)}}if(!(e&&by)){b.dequeue(this,bw)}})}});function bi(){setTimeout(at,0);return(a5=b.now())}function at(){a5=L}function a2(bv,e){var bw={};b.each(aI.concat.apply([],aI.slice(0,e)),function(){bw[this]=bv});return bw}b.each({slideDown:a2("show",1),slideUp:a2("hide",1),slideToggle:a2("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,bv){b.fn[e]=function(bw,by,bx){return this.animate(bv,bw,by,bx)}});b.extend({speed:function(bw,bx,bv){var e=bw&&typeof bw==="object"?b.extend({},bw):{complete:bv||!bv&&bx||b.isFunction(bw)&&bw,duration:bw,easing:bv&&bx||bx&&!b.isFunction(bx)&&bx};
e.duration=b.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in b.fx.speeds?b.fx.speeds[e.duration]:b.fx.speeds._default;if(e.queue==null||e.queue===true){e.queue="fx"}e.old=e.complete;e.complete=function(by){if(b.isFunction(e.old)){e.old.call(this)}if(e.queue){b.dequeue(this,e.queue)}else{if(by!==false){b._unmark(this)}}};return e},easing:{linear:function(e){return e},swing:function(e){return(-Math.cos(e*Math.PI)/2)+0.5}},timers:[],fx:function(bv,e,bw){this.options=e;this.elem=bv;this.prop=bw;e.orig=e.orig||{}}});b.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(b.fx.step[this.prop]||b.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var e,bv=b.css(this.elem,this.prop);return isNaN(e=parseFloat(bv))?!bv||bv==="auto"?0:bv:e},custom:function(bz,by,bx){var e=this,bw=b.fx;this.startTime=a5||bi();this.end=by;this.now=this.start=bz;this.pos=this.state=0;this.unit=bx||this.unit||(b.cssNumber[this.prop]?"":"px");function bv(bA){return e.step(bA)}bv.queue=this.options.queue;bv.elem=this.elem;bv.saveState=function(){if(b._data(e.elem,"fxshow"+e.prop)===L){if(e.options.hide){b._data(e.elem,"fxshow"+e.prop,e.start)}else{if(e.options.show){b._data(e.elem,"fxshow"+e.prop,e.end)}}}};if(bv()&&b.timers.push(bv)&&!a4){a4=setInterval(bw.tick,bw.interval)}},show:function(){var e=b._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||b.style(this.elem,this.prop);this.options.show=true;if(e!==L){this.custom(this.cur(),e)}else{this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur())}b(this.elem).show()},hide:function(){this.options.orig[this.prop]=b._data(this.elem,"fxshow"+this.prop)||b.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(by){var bA,bB,bv,bx=a5||bi(),e=true,bz=this.elem,bw=this.options;if(by||bx>=bw.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();bw.animatedProperties[this.prop]=true;for(bA in bw.animatedProperties){if(bw.animatedProperties[bA]!==true){e=false}}if(e){if(bw.overflow!=null&&!b.support.shrinkWrapBlocks){b.each(["","X","Y"],function(bC,bD){bz.style["overflow"+bD]=bw.overflow[bC]})}if(bw.hide){b(bz).hide()}if(bw.hide||bw.show){for(bA in bw.animatedProperties){b.style(bz,bA,bw.orig[bA]);b.removeData(bz,"fxshow"+bA,true);b.removeData(bz,"toggle"+bA,true)}}bv=bw.complete;if(bv){bw.complete=false;bv.call(bz)}}return false}else{if(bw.duration==Infinity){this.now=bx}else{bB=bx-this.startTime;this.state=bB/bw.duration;this.pos=b.easing[bw.animatedProperties[this.prop]](this.state,bB,0,1,bw.duration);this.now=this.start+((this.end-this.start)*this.pos)}this.update()}return true}};b.extend(b.fx,{tick:function(){var bw,bv=b.timers,e=0;for(;e<bv.length;e++){bw=bv[e];if(!bw()&&bv[e]===bw){bv.splice(e--,1)}}if(!bv.length){b.fx.stop()}},interval:13,stop:function(){clearInterval(a4);a4=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){b.style(e.elem,"opacity",e.now)},_default:function(e){if(e.elem.style&&e.elem.style[e.prop]!=null){e.elem.style[e.prop]=e.now+e.unit}else{e.elem[e.prop]=e.now}}}});b.each(aI.concat.apply([],aI),function(e,bv){if(bv.indexOf("margin")){b.fx.step[bv]=function(bw){b.style(bw.elem,bv,Math.max(0,bw.now)+bw.unit)}}});if(b.expr&&b.expr.filters){b.expr.filters.animated=function(e){return b.grep(b.timers,function(bv){return e===bv.elem}).length}}function w(bx){if(!Q[bx]){var e=av.body,bv=b("<"+bx+">").appendTo(e),bw=bv.css("display");bv.remove();if(bw==="none"||bw===""){if(!ba){ba=av.createElement("iframe");ba.frameBorder=ba.width=ba.height=0}e.appendChild(ba);if(!m||!ba.createElement){m=(ba.contentWindow||ba.contentDocument).document;m.write((b.support.boxModel?"<!doctype html>":"")+"<html><body>");m.close()}bv=m.createElement(bx);m.body.appendChild(bv);bw=b.css(bv,"display");e.removeChild(ba)}Q[bx]=bw}return Q[bx]}var a8,V=/^t(?:able|d|h)$/i,ad=/^(?:body|html)$/i;
if("getBoundingClientRect" in av.documentElement){a8=function(by,bH,bw,bB){try{bB=by.getBoundingClientRect()}catch(bF){}if(!bB||!b.contains(bw,by)){return bB?{top:bB.top,left:bB.left}:{top:0,left:0}}var bC=bH.body,bD=aL(bH),bA=bw.clientTop||bC.clientTop||0,bE=bw.clientLeft||bC.clientLeft||0,bv=bD.pageYOffset||b.support.boxModel&&bw.scrollTop||bC.scrollTop,bz=bD.pageXOffset||b.support.boxModel&&bw.scrollLeft||bC.scrollLeft,bG=bB.top+bv-bA,bx=bB.left+bz-bE;return{top:bG,left:bx}}}else{a8=function(bz,bE,bx){var bC,bw=bz.offsetParent,bv=bz,bA=bE.body,bB=bE.defaultView,e=bB?bB.getComputedStyle(bz,null):bz.currentStyle,bD=bz.offsetTop,by=bz.offsetLeft;while((bz=bz.parentNode)&&bz!==bA&&bz!==bx){if(b.support.fixedPosition&&e.position==="fixed"){break}bC=bB?bB.getComputedStyle(bz,null):bz.currentStyle;bD-=bz.scrollTop;by-=bz.scrollLeft;if(bz===bw){bD+=bz.offsetTop;by+=bz.offsetLeft;if(b.support.doesNotAddBorder&&!(b.support.doesAddBorderForTableAndCells&&V.test(bz.nodeName))){bD+=parseFloat(bC.borderTopWidth)||0;by+=parseFloat(bC.borderLeftWidth)||0}bv=bw;bw=bz.offsetParent}if(b.support.subtractsBorderForOverflowNotVisible&&bC.overflow!=="visible"){bD+=parseFloat(bC.borderTopWidth)||0;by+=parseFloat(bC.borderLeftWidth)||0}e=bC}if(e.position==="relative"||e.position==="static"){bD+=bA.offsetTop;by+=bA.offsetLeft}if(b.support.fixedPosition&&e.position==="fixed"){bD+=Math.max(bx.scrollTop,bA.scrollTop);by+=Math.max(bx.scrollLeft,bA.scrollLeft)}return{top:bD,left:by}}}b.fn.offset=function(e){if(arguments.length){return e===L?this:this.each(function(bx){b.offset.setOffset(this,e,bx)})}var bv=this[0],bw=bv&&bv.ownerDocument;if(!bw){return null}if(bv===bw.body){return b.offset.bodyOffset(bv)}return a8(bv,bw,bw.documentElement)};b.offset={bodyOffset:function(e){var bw=e.offsetTop,bv=e.offsetLeft;if(b.support.doesNotIncludeMarginInBodyOffset){bw+=parseFloat(b.css(e,"marginTop"))||0;bv+=parseFloat(b.css(e,"marginLeft"))||0}return{top:bw,left:bv}},setOffset:function(bx,bG,bA){var bB=b.css(bx,"position");if(bB==="static"){bx.style.position="relative"}var bz=b(bx),bv=bz.offset(),e=b.css(bx,"top"),bE=b.css(bx,"left"),bF=(bB==="absolute"||bB==="fixed")&&b.inArray("auto",[e,bE])>-1,bD={},bC={},bw,by;if(bF){bC=bz.position();bw=bC.top;by=bC.left}else{bw=parseFloat(e)||0;by=parseFloat(bE)||0}if(b.isFunction(bG)){bG=bG.call(bx,bA,bv)}if(bG.top!=null){bD.top=(bG.top-bv.top)+bw}if(bG.left!=null){bD.left=(bG.left-bv.left)+by}if("using" in bG){bG.using.call(bx,bD)}else{bz.css(bD)}}};b.fn.extend({position:function(){if(!this[0]){return null}var bw=this[0],bv=this.offsetParent(),bx=this.offset(),e=ad.test(bv[0].nodeName)?{top:0,left:0}:bv.offset();bx.top-=parseFloat(b.css(bw,"marginTop"))||0;bx.left-=parseFloat(b.css(bw,"marginLeft"))||0;e.top+=parseFloat(b.css(bv[0],"borderTopWidth"))||0;e.left+=parseFloat(b.css(bv[0],"borderLeftWidth"))||0;return{top:bx.top-e.top,left:bx.left-e.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||av.body;while(e&&(!ad.test(e.nodeName)&&b.css(e,"position")==="static")){e=e.offsetParent}return e})}});b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(bw,bv){var e=/Y/.test(bv);b.fn[bw]=function(bx){return b.access(this,function(by,bB,bA){var bz=aL(by);if(bA===L){return bz?(bv in bz)?bz[bv]:b.support.boxModel&&bz.document.documentElement[bB]||bz.document.body[bB]:by[bB]}if(bz){bz.scrollTo(!e?bA:b(bz).scrollLeft(),e?bA:b(bz).scrollTop())}else{by[bB]=bA}},bw,bx,arguments.length,null)}});function aL(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}b.each({Height:"height",Width:"width"},function(bw,bx){var bv="client"+bw,e="scroll"+bw,by="offset"+bw;b.fn["inner"+bw]=function(){var bz=this[0];return bz?bz.style?parseFloat(b.css(bz,bx,"padding")):this[bx]():null};b.fn["outer"+bw]=function(bA){var bz=this[0];return bz?bz.style?parseFloat(b.css(bz,bx,bA?"margin":"border")):this[bx]():null};b.fn[bx]=function(bz){return b.access(this,function(bC,bB,bD){var bF,bE,bG,bA;
if(b.isWindow(bC)){bF=bC.document;bE=bF.documentElement[bv];return b.support.boxModel&&bE||bF.body&&bF.body[bv]||bE}if(bC.nodeType===9){bF=bC.documentElement;if(bF[bv]>=bF[e]){return bF[bv]}return Math.max(bC.body[e],bF[e],bC.body[by],bF[by])}if(bD===L){bG=b.css(bC,bB);bA=parseFloat(bG);return b.isNumeric(bA)?bA:bG}b(bC).css(bB,bD)},bx,bz,arguments.length,null)}});bd.jQuery=bd.$=b;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return b})}})(window);/*!
 * jQuery Form Plugin
 * version: 2.87 (20-OCT-2011)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(b){b.fn.ajaxSubmit=function(d){if(!this.length){a("ajaxSubmit: skipping submit process - no element selected");return this}var c,p,f,h=this;if(typeof d=="function"){d={success:d}}c=this.attr("method");p=this.attr("action");f=(typeof p==="string")?b.trim(p):"";f=f||window.location.href||"";if(f){f=(f.match(/^([^#]+)/)||[])[1]}d=b.extend(true,{url:f,success:b.ajaxSettings.success,type:c||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},d);var k={};this.trigger("form-pre-serialize",[this,d,k]);if(k.veto){a("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(d.beforeSerialize&&d.beforeSerialize(this,d)===false){a("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var g=d.traditional;if(g===undefined){g=b.ajaxSettings.traditional}var u,o,j,w=this.formToArray(d.semantic);if(d.data){d.extraData=d.data;u=b.param(d.data,g)}if(d.beforeSubmit&&d.beforeSubmit(w,this,d)===false){a("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[w,this,d,k]);if(k.veto){a("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var m=b.param(w,g);if(u){m=(m?(m+"&"+u):u)}if(d.type.toUpperCase()=="GET"){d.url+=(d.url.indexOf("?")>=0?"&":"?")+m;d.data=null}else{d.data=m}var x=[];if(d.resetForm){x.push(function(){h.resetForm()})}if(d.clearForm){x.push(function(){h.clearForm(d.includeHidden)})}if(!d.dataType&&d.target){var e=d.success||function(){};x.push(function(q){var n=d.replaceTarget?"replaceWith":"html";b(d.target)[n](q).each(e,arguments)})}else{if(d.success){x.push(d.success)}}d.success=function(z,q,A){var y=d.context||d;for(var v=0,n=x.length;v<n;v++){x[v].apply(y,[z,q,A||h,h])}};var s=b("input:file",this).length>0;var r="multipart/form-data";var l=(h.attr("enctype")==r||h.attr("encoding")==r);if(d.iframe!==false&&(s||d.iframe||l)){if(d.closeKeepAlive){b.get(d.closeKeepAlive,function(){i(w)})}else{i(w)}}else{if(b.browser.msie&&c=="get"&&typeof d.type==="undefined"){var t=h[0].getAttribute("method");if(typeof t==="string"){d.type=t}}b.ajax(d)}this.trigger("form-submit-notify",[this,d]);return this;function i(U){var z=h[0],y,Q,K,S,N,B,F,D,E,O,R,I;var C=!!b.fn.prop;if(U){if(C){for(Q=0;Q<U.length;Q++){y=b(z[U[Q].name]);y.prop("disabled",false)}}else{for(Q=0;Q<U.length;Q++){y=b(z[U[Q].name]);y.removeAttr("disabled")}}}if(b(":input[name=submit],:input[id=submit]",z).length){alert('Error: Form elements must not have name or id of "submit".');return}K=b.extend(true,{},b.ajaxSettings,d);K.context=K.context||K;N="jqFormIO"+(new Date().getTime());if(K.iframeTarget){B=b(K.iframeTarget);O=B.attr("name");if(O==null){B.attr("name",N)}else{N=O}}else{B=b('<iframe name="'+N+'" src="'+K.iframeSrc+'" />');B.css({position:"absolute",top:"-1000px",left:"-1000px"})}F=B[0];D={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(n){var X=(n==="timeout"?"timeout":"aborted");a("aborting upload... "+X);this.aborted=1;B.attr("src",K.iframeSrc);D.error=X;K.error&&K.error.call(K.context,D,X,n);S&&b.event.trigger("ajaxError",[D,K,X]);K.complete&&K.complete.call(K.context,D,X)}};S=K.global;if(S&&!b.active++){b.event.trigger("ajaxStart")}if(S){b.event.trigger("ajaxSend",[D,K])}if(K.beforeSend&&K.beforeSend.call(K.context,D,K)===false){if(K.global){b.active--}return}if(D.aborted){return}E=z.clk;if(E){O=E.name;if(O&&!E.disabled){K.extraData=K.extraData||{};K.extraData[O]=E.value;if(E.type=="image"){K.extraData[O+".x"]=z.clk_x;K.extraData[O+".y"]=z.clk_y}}}var J=1;var G=2;function H(X){var n=X.contentWindow?X.contentWindow.document:X.contentDocument?X.contentDocument:X.document;
return n}function P(){var Z=h.attr("target"),X=h.attr("action");z.setAttribute("target",N);if(!c){z.setAttribute("method","POST")}if(X!=K.url){z.setAttribute("action",K.url)}if(!K.skipEncodingOverride&&(!c||/post/i.test(c))){h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(K.timeout){I=setTimeout(function(){R=true;M(J)},K.timeout)}function aa(){try{var n=H(F).readyState;a("state = "+n);if(n.toLowerCase()=="uninitialized"){setTimeout(aa,50)}}catch(ac){a("Server abort: ",ac," (",ac.name,")");M(G);I&&clearTimeout(I);I=undefined}}var Y=[];try{if(K.extraData){for(var ab in K.extraData){Y.push(b('<input type="hidden" name="'+ab+'" />').attr("value",K.extraData[ab]).appendTo(z)[0])}}if(!K.iframeTarget){B.appendTo("body");F.attachEvent?F.attachEvent("onload",M):F.addEventListener("load",M,false)}setTimeout(aa,15);z.submit()}finally{z.setAttribute("action",X);if(Z){z.setAttribute("target",Z)}else{h.removeAttr("target")}b(Y).remove()}}if(K.forceSync){P()}else{setTimeout(P,10)}var V,W,T=50,A;function M(ab){if(D.aborted||A){return}try{W=H(F)}catch(ae){a("cannot access response document: ",ae);ab=G}if(ab===J&&D){D.abort("timeout");return}else{if(ab==G&&D){D.abort("server abort");return}}if(!W||W.location.href==K.iframeSrc){if(!R){return}}F.detachEvent?F.detachEvent("onload",M):F.removeEventListener("load",M,false);var Z="success",ad;try{if(R){throw"timeout"}var Y=K.dataType=="xml"||W.XMLDocument||b.isXMLDoc(W);a("isXml="+Y);if(!Y&&window.opera&&(W.body==null||W.body.innerHTML=="")){if(--T){a("requeing onLoad callback, DOM not available");setTimeout(M,250);return}}var af=W.body?W.body:W.documentElement;D.responseText=af?af.innerHTML:null;D.responseXML=W.XMLDocument?W.XMLDocument:W;if(Y){K.dataType="xml"}D.getResponseHeader=function(ai){var ah={"content-type":K.dataType};return ah[ai]};if(af){D.status=Number(af.getAttribute("status"))||D.status;D.statusText=af.getAttribute("statusText")||D.statusText}var n=(K.dataType||"").toLowerCase();var ac=/(json|script|text)/.test(n);if(ac||K.textarea){var aa=W.getElementsByTagName("textarea")[0];if(aa){D.responseText=aa.value;D.status=Number(aa.getAttribute("status"))||D.status;D.statusText=aa.getAttribute("statusText")||D.statusText}else{if(ac){var X=W.getElementsByTagName("pre")[0];var ag=W.getElementsByTagName("body")[0];if(X){D.responseText=X.textContent?X.textContent:X.innerText}else{if(ag){D.responseText=ag.textContent?ag.textContent:ag.innerText}}}}}else{if(n=="xml"&&!D.responseXML&&D.responseText!=null){D.responseXML=L(D.responseText)}}try{V=q(D,n,K)}catch(ab){Z="parsererror";D.error=ad=(ab||Z)}}catch(ab){a("error caught: ",ab);Z="error";D.error=ad=(ab||Z)}if(D.aborted){a("upload aborted");Z=null}if(D.status){Z=(D.status>=200&&D.status<300||D.status===304)?"success":"error"}if(Z==="success"){K.success&&K.success.call(K.context,V,"success",D);S&&b.event.trigger("ajaxSuccess",[D,K])}else{if(Z){if(ad==undefined){ad=D.statusText}K.error&&K.error.call(K.context,D,Z,ad);S&&b.event.trigger("ajaxError",[D,K,ad])}}S&&b.event.trigger("ajaxComplete",[D,K]);if(S&&!--b.active){b.event.trigger("ajaxStop")}K.complete&&K.complete.call(K.context,D,Z);A=true;if(K.timeout){clearTimeout(I)}setTimeout(function(){if(!K.iframeTarget){B.remove()}D.responseXML=null},100)}var L=b.parseXML||function(n,X){if(window.ActiveXObject){X=new ActiveXObject("Microsoft.XMLDOM");X.async="false";X.loadXML(n)}else{X=(new DOMParser()).parseFromString(n,"text/xml")}return(X&&X.documentElement&&X.documentElement.nodeName!="parsererror")?X:null};var v=b.parseJSON||function(n){return window["eval"]("("+n+")")};var q=function(ab,Z,Y){var X=ab.getResponseHeader("content-type")||"",n=Z==="xml"||!Z&&X.indexOf("xml")>=0,aa=n?ab.responseXML:ab.responseText;if(n&&aa.documentElement.nodeName==="parsererror"){b.error&&b.error("parsererror")}if(Y&&Y.dataFilter){aa=Y.dataFilter(aa,Z)}if(typeof aa==="string"){if(Z==="json"||!Z&&X.indexOf("json")>=0){aa=v(aa)}else{if(Z==="script"||!Z&&X.indexOf("javascript")>=0){b.globalEval(aa)
}}}return aa}}};b.fn.ajaxForm=function(c){if(this.length===0){var d={s:this.selector,c:this.context};if(!b.isReady&&d.s){a("DOM not ready, queuing ajaxForm");b(function(){b(d.s,d.c).ajaxForm(c)});return this}a("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(f){if(!f.isDefaultPrevented()){f.preventDefault();b(this).ajaxSubmit(c)}}).bind("click.form-plugin",function(j){var i=j.target;var g=b(i);if(!(g.is(":submit,input:image"))){var f=g.closest(":submit");if(f.length==0){return}i=f[0]}var h=this;h.clk=i;if(i.type=="image"){if(j.offsetX!=undefined){h.clk_x=j.offsetX;h.clk_y=j.offsetY}else{if(typeof b.fn.offset=="function"){var k=g.offset();h.clk_x=j.pageX-k.left;h.clk_y=j.pageY-k.top}else{h.clk_x=j.pageX-i.offsetLeft;h.clk_y=j.pageY-i.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(q){var p=[];if(this.length===0){return p}var d=this[0];var g=q?d.getElementsByTagName("*"):d.elements;if(!g){return p}var k,h,f,r,e,m,c;for(k=0,m=g.length;k<m;k++){e=g[k];f=e.name;if(!f){continue}if(q&&d.clk&&e.type=="image"){if(!e.disabled&&d.clk==e){p.push({name:f,value:b(e).val()});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}continue}r=b.fieldValue(e,true);if(r&&r.constructor==Array){for(h=0,c=r.length;h<c;h++){p.push({name:f,value:r[h]})}}else{if(r!==null&&typeof r!="undefined"){p.push({name:f,value:r})}}}if(!q&&d.clk){var l=b(d.clk),o=l[0];f=o.name;if(f&&!o.disabled&&o.type=="image"){p.push({name:f,value:l.val()});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}}return p};b.fn.formSerialize=function(c){return b.param(this.formToArray(c))};b.fn.fieldSerialize=function(d){var c=[];this.each(function(){var h=this.name;if(!h){return}var f=b.fieldValue(this,d);if(f&&f.constructor==Array){for(var g=0,e=f.length;g<e;g++){c.push({name:h,value:f[g]})}}else{if(f!==null&&typeof f!="undefined"){c.push({name:this.name,value:f})}}});return b.param(c)};b.fn.fieldValue=function(h){for(var g=[],e=0,c=this.length;e<c;e++){var f=this[e];var d=b.fieldValue(f,h);if(d===null||typeof d=="undefined"||(d.constructor==Array&&!d.length)){continue}d.constructor==Array?b.merge(g,d):g.push(d)}return g};b.fieldValue=function(c,j){var e=c.name,p=c.type,q=c.tagName.toLowerCase();if(j===undefined){j=true}if(j&&(!e||c.disabled||p=="reset"||p=="button"||(p=="checkbox"||p=="radio")&&!c.checked||(p=="submit"||p=="image")&&c.form&&c.form.clk!=c||q=="select"&&c.selectedIndex==-1)){return null}if(q=="select"){var k=c.selectedIndex;if(k<0){return null}var m=[],d=c.options;var g=(p=="select-one");var l=(g?k+1:d.length);for(var f=(g?k:0);f<l;f++){var h=d[f];if(h.selected){var o=h.value;if(!o){o=(h.attributes&&h.attributes.value&&!(h.attributes.value.specified))?h.text:h.value}if(g){return o}m.push(o)}}return m}return b(c).val()};b.fn.clearForm=function(c){return this.each(function(){b("input,select,textarea",this).clearFields(c)})};b.fn.clearFields=b.fn.clearInputs=function(c){var d=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var f=this.type,e=this.tagName.toLowerCase();if(d.test(f)||e=="textarea"||(c&&/hidden/.test(f))){this.value=""}else{if(f=="checkbox"||f=="radio"){this.checked=false}else{if(e=="select"){this.selectedIndex=-1}}}})};b.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};b.fn.enable=function(c){if(c===undefined){c=true}return this.each(function(){this.disabled=!c})};b.fn.selected=function(c){if(c===undefined){c=true}return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio"){this.checked=c}else{if(this.tagName.toLowerCase()=="option"){var e=b(this).parent("select");if(c&&e[0]&&e[0].type=="select-one"){e.find("option").selected(false)
}this.selected=c}}})};b.fn.ajaxSubmit.debug=false;function a(){if(!b.fn.ajaxSubmit.debug){return}var c="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(c)}else{if(window.opera&&window.opera.postError){window.opera.postError(c)}}}})(jQuery);window.Modernizr=function(ab,aa,Z){function G(b){S.cssText=b}function F(d,c){return G(prefixes.join(d+";")+(c||""))}function E(d,c){return typeof d===c}function D(d,c){return !!~(""+d).indexOf(c)}function C(g,c,j){for(var i in g){var h=c[g[i]];if(h!==Z){return j===!1?g[i]:E(h,"function")?h.bind(j||c):h}}return !1}function B(){X.input=function(f){for(var b=0,a=f.length;b<a;b++){N[f[b]]=f[b] in R}return N.list&&(N.list=!!aa.createElement("datalist")&&!!ab.HTMLDataListElement),N}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))}var Y="2.6.2",X={},W=!0,V=aa.documentElement,U="modernizr",T=aa.createElement(U),S=T.style,R=aa.createElement("input"),Q={}.toString,P={},O={},N={},M=[],K=M.slice,J,I={}.hasOwnProperty,H;!E(I,"undefined")&&!E(I.call,"undefined")?H=function(d,c){return I.call(d,c)}:H=function(d,c){return c in d&&E(d.constructor.prototype[c],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(a){var h=this;if(typeof h!="function"){throw new TypeError}var g=K.call(arguments,1),f=function(){if(this instanceof f){var b=function(){};b.prototype=h.prototype;var d=new b,c=h.apply(d,g.concat(K.call(arguments)));return Object(c)===c?c:d}return h.apply(a,g.concat(K.call(arguments)))};return f});for(var L in P){H(P,L)&&(J=L.toLowerCase(),X[J]=P[L](),M.push((X[J]?"":"no-")+J))}return X.input||B(),X.addTest=function(e,c){if(typeof e=="object"){for(var f in e){H(e,f)&&X.addTest(f,e[f])}}else{e=e.toLowerCase();if(X[e]!==Z){return X}c=typeof c=="function"?c():c,typeof W!="undefined"&&W&&(V.className+=" "+(c?"":"no-")+e),X[e]=c}return X},G(""),T=R=null,function(ak,aj){function z(f,e){var h=f.createElement("p"),g=f.getElementsByTagName("head")[0]||f.documentElement;return h.innerHTML="x<style>"+e+"</style>",g.insertBefore(h.lastChild,g.firstChild)}function y(){var b=s.elements;return typeof b=="string"?b.split(" "):b}function x(d){var c=ac[d[ae]];return c||(c={},ad++,d[ae]=ad,ac[ad]=c),c}function w(b,h,e){h||(h=aj);if(A){return h.createElement(b)}e||(e=x(h));var d;return e.cache[b]?d=e.cache[b].cloneNode():ag.test(b)?d=(e.cache[b]=e.createElem(b)).cloneNode():d=e.createElem(b),d.canHaveChildren&&!ah.test(b)?e.frag.appendChild(d):d}function v(b,l){b||(b=aj);if(A){return b.createDocumentFragment()}l=l||x(b);var k=l.frag.cloneNode(),j=0,i=y(),h=i.length;for(;j<h;j++){k.createElement(i[j])}return k}function u(d,c){c.cache||(c.cache={},c.createElem=d.createElement,c.createFrag=d.createDocumentFragment,c.frag=c.createFrag()),d.createElement=function(a){return s.shivMethods?w(a,d,c):c.createElem(a)},d.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+y().join().replace(/\w+/g,function(b){return c.createElem(b),c.frag.createElement(b),'c("'+b+'")'})+");return n}")(s,c.frag)}function t(b){b||(b=aj);var d=x(b);return s.shivCSS&&!af&&!d.hasCSS&&(d.hasCSS=!!z(b,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),A||u(b,d),b}var ai=ak.html5||{},ah=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,ag=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,af,ae="_html5shiv",ad=0,ac={},A;(function(){try{var b=aj.createElement("a");b.innerHTML="<xyz></xyz>",af="hidden" in b,A=b.childNodes.length==1||function(){aj.createElement("a");var c=aj.createDocumentFragment();return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"}()}catch(d){af=!0,A=!0}})();var s={elements:ai.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:ai.shivCSS!==!1,supportsUnknownElements:A,shivMethods:ai.shivMethods!==!1,type:"default",shivDocument:t,createElement:w,createDocumentFragment:v};ak.html5=s,t(aj)}(this,aa),X._version=Y,V.className=V.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(W?" js "+M.join(" "):""),X
}(this,this.document),function(ad,ac,ab){function aa(b){return"[object Function]"==P.call(b)}function Z(b){return"string"==typeof b}function Y(){}function X(b){return !b||"loaded"==b||"complete"==b||"uninitialized"==b}function W(){var b=O.shift();M=1,b?b.t?R(function(){("c"==b.t?L.injectCss:L.injectJs)(b.s,0,b.a,b.x,b.e,1)},0):(b(),W()):M=0}function V(w,v,t,s,q,p,n){function m(a){if(!g&&X(h.readyState)&&(x.r=g=1,!M&&W(),h.onload=h.onreadystatechange=null,a)){"img"!=w&&R(function(){I.removeChild(h)},50);for(var c in D[v]){D[v].hasOwnProperty(c)&&D[v][c].onload()}}}var n=n||L.errorTimeout,h=ac.createElement(w),g=0,b=0,x={t:t,s:v,e:q,a:p,x:n};1===D[v]&&(b=1,D[v]=[]),"object"==w?h.data=v:(h.src=v,h.type=w),h.width=h.height="0",h.onerror=h.onload=h.onreadystatechange=function(){m.call(this,b)},O.splice(s,0,x),"img"!=w&&(b||2===D[v]?(I.insertBefore(h,J?null:Q),R(m,n)):D[v].push(h))}function U(g,e,j,i,h){return M=0,e=e||"j",Z(g)?V("c"==e?G:H,g,e,this.i++,j,i,h):(O.splice(this.i++,0,g),1==O.length&&W()),this}function T(){var b=L;return b.loader={load:U,i:0},b}var S=ac.documentElement,R=ad.setTimeout,Q=ac.getElementsByTagName("script")[0],P={}.toString,O=[],M=0,K="MozAppearance" in S.style,J=K&&!!ac.createRange().compareNode,I=J?S:Q.parentNode,S=ad.opera&&"[object Opera]"==P.call(ad.opera),S=!!ac.attachEvent&&!S,H=K?"object":S?"script":"img",G=S?"script":H,F=Array.isArray||function(b){return"[object Array]"==P.call(b)},E=[],D={},C={timeout:function(d,c){return c.length&&(d.timeout=c[0]),d}},N,L;L=function(e){function c(i){var i=i.split("!"),h=E.length,q=i.pop(),p=i.length,q={url:q,origUrl:q,prefixes:i},o,l,j;for(l=0;l<p;l++){j=i[l].split("="),(o=C[j.shift()])&&(q=o(q,j))}for(l=0;l<h;l++){q=E[l](q)}return q}function n(b,s,r,q,p){var o=c(b),l=o.autoCallback;o.url.split(".").pop().split("?").shift(),o.bypass||(s&&(s=aa(s)?s:s[b]||s[q]||s[b.split("/").pop().split("?")[0]]),o.instead?o.instead(b,s,r,q,p):(D[o.url]?o.noexec=!0:D[o.url]=1,r.load(o.url,o.forceCSS||!o.forceJS&&"css"==o.url.split(".").pop().split("?").shift()?"c":ab,o.noexec,o.attrs,o.timeout),(aa(s)||aa(l))&&r.load(function(){T(),s&&s(o.origUrl,p,q),l&&l(o.origUrl,p,q),D[o.url]=2})))}function m(w,v){function u(b,h){if(b){if(Z(b)){h||(r=function(){var i=[].slice.call(arguments);q.apply(this,i),p()}),n(b,r,v,0,t)}else{if(Object(b)===b){for(g in o=function(){var a=0,i;for(i in b){b.hasOwnProperty(i)&&a++}return a}(),b){b.hasOwnProperty(g)&&(!h&&!--o&&(aa(r)?r=function(){var i=[].slice.call(arguments);q.apply(this,i),p()}:r[g]=function(i){return function(){var a=[].slice.call(arguments);i&&i.apply(this,a),p()}}(q[g])),n(b[g],r,v,g,t))}}}}else{!h&&p()}}var t=!!w.test,s=w.load||w.both,r=w.callback||Y,q=r,p=w.complete||Y,o,g;u(t?w.yep:w.nope,!!s),s&&u(s)}var k,f,d=this.yepnope.loader;if(Z(e)){n(e,0,d,0)}else{if(F(e)){for(k=0;k<e.length;k++){f=e[k],Z(f)?n(f,0,d,0):F(f)?L(f):Object(f)===f&&m(f,d)}}else{Object(e)===e&&m(e,d)}}},L.addPrefix=function(d,c){C[d]=c},L.addFilter=function(b){E.push(b)},L.errorTimeout=10000,null==ac.readyState&&ac.addEventListener&&(ac.readyState="loading",ac.addEventListener("DOMContentLoaded",N=function(){ac.removeEventListener("DOMContentLoaded",N,0),ac.readyState="complete"},0)),ad.yepnope=T(),ad.yepnope.executeStack=W,ad.yepnope.injectJs=function(r,q,p,n,m,h){var g=ac.createElement("script"),f,b,n=n||L.errorTimeout;g.src=r;for(b in p){g.setAttribute(b,p[b])}q=h?W:q||Y,g.onreadystatechange=g.onload=function(){!f&&X(g.readyState)&&(f=1,q(),g.onload=g.onreadystatechange=null)},R(function(){f||(f=1,q(1))},n),m?g.onload():Q.parentNode.insertBefore(g,Q)},ad.yepnope.injectCss=function(b,n,m,l,k,h){var l=ac.createElement("link"),f,n=h?W:n||Y;l.href=b,l.rel="stylesheet",l.type="text/css";for(f in m){l.setAttribute(f,m[f])}k||(Q.parentNode.insertBefore(l,Q),R(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};var Utils={EXT_MAP:{jpg:"j",png:"p",bmp:"b",tif:"t",gif:"g",ico:"i",swf:"s",pdf:"d",flv:"f",mp4:"z",gal:"x"},YFROG_VIDEO_REGEX:/[http:\/\/]*[www\.]*yfrog\.(com|us){1}\/\b\w*(z){1}\b/g,DATE_THRESHOLD_MS:7*24*3600*1000,HTML_REGEX:/(&lt;|<)(?:.|\s)*?(&gt;|>)/g,TWITTER_AVATAR_REGEX:/(\w+)\.twimg\.com\/profile_images\/(\d+)\/(\S+)/,URI_REGEX:/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/gi,YT_REGEX:[/(http:\/\/|https:\/\/)*[www\.]*youtube\.com\/watch\?.*(?:&|&amp;)?v=[a-zA-Z0-9_-]*/i,/(http:\/\/|https:\/\/)*[www\.]*youtu\.be\/[a-zA-Z0-9_-]*/i],IMG_REGEX:/(http|https)?:\/\/(?:[a-z\-]+\.)+[a-z]{2,6}(?:\/[^\/#?]+)+\.(?:jpe?g|gif|png)$/gim,MEDIA_DISPLAY_TYPE:[["thumb490x325"],["thumb235x150","thumb235x150"],["thumb200x130","thumb200x130","thumb280x270"],["thumb","thumb","thumb","thumb490x325"],["thumb","thumb","thumb","thumb","thumb490x325"]],COMMENT_DISPLAY_TYPE:[["thumb235x150"],["thumb","thumb235x150"],["thumb","thumb","thumb235x150"]],globalInformerTimeout:null,globalSuccessTimeout:null,shortenText:function(b,a){b=$.trim(b);a=a||16;return(b.length<=a?b:(b.substring(0,a)+"..."))},convertLinks:function(a){return a.replace(this.URI_REGEX,function(b){return'<a target="_blank" href="'+(/^(http:\/\/|https:\/\/)/.test(b)?b:"http://"+b)+'" rel="nofollow">'+Utils.shortenText(b.replace(/^(http:\/\/[www\.]*|https:\/\/[www\.]*|[www\.]*)/,""),24)+"</a>"}).replace(/&lt;br&gt;/gi,"<br>")},stripHtml:function(a){if(!a){return}return a.replace(this.HTML_REGEX,"")},prepareTextForPosting:function(a){if(!a){return""}return this.stripHtml($.trim(a)).replace(/\n/gi,"<br>")},isToxic:function(a){if(!a){return false}return/(&lt;|<)+\s*script\s*(&gt;|>)+/g.test(a)},base:function(c,b,a){return parseInt(c,a||10).toString(b)},yfrogId:function(d,f){if(!d||!f){return}var e=this.base(d,36);if(e.length==1){e="0"+e}var b=f.split(".");var c=b[1].toLowerCase();var a=this.EXT_MAP[c];return e+b[0]+a},getMediaThumbnail:function(b,a){return"http://desmond-secure.yfrog.com/secure_scaled/thumb/"+b+"/"+a},getMediaThumbnailMedium:function(b,a){return"http://desmond-secure.yfrog.com/secure_scaled/thumb_medium/"+b+"/"+a},getMediaDisplay:function(c,b,a){return"http://desmond-secure.yfrog.com/secure_scaled/"+this.MEDIA_DISPLAY_TYPE[a.total][a.type]+"/"+c+"/"+b},getCommentDisplay:function(b,a,c){return"http://desmond-secure.yfrog.com/secure_scaled/"+this.COMMENT_DISPLAY_TYPE[c.total][c.type]+"/"+b+"/"+a},getDefaultAvatar:function(){return"/images/default-avatar-48x48.png"},getDefaultAvatarSmall:function(){return"/images/default-avatar-25x25.png"},getDefaultAvatarLarge:function(){return"/images/default-avatar-96x96.png"},getCroppedAvatar:function(e,a,c,b){var d=c.split(Global.mediaDelimiter);return"//imageshack.us/scaled/customcrop/"+e+"/"+a+"/"+d[0]+"/"+d[1]+"/"+d[2]+"/"+d[3]+"/"+b},getAvatar:function(c,a,b){return"//desmond.yfrog.com/Himg"+c+"/scaled.php?server="+c+"&filename="+a+"&res=avatar"+b},getAvatar25:function(c,a,b){if(!c||!a||c=="null"||a=="null"){return this.getDefaultAvatarSmall()}if(b){return this.getCroppedAvatar(c,a,b,25)}else{return this.getAvatar(c,a,25)}},getAvatar48:function(c,a,b){if(!c||!a||c=="null"||a=="null"){return this.getDefaultAvatar()}if(b){return this.getCroppedAvatar(c,a,b,48)}else{return this.getAvatar(c,a,48)}},getAvatar96:function(c,a,b){if(!c||!a||c=="null"||a=="null"){return this.getDefaultAvatarLarge()}if(b){return this.getCroppedAvatar(c,a,b,96)}else{return this.getAvatar(c,a,96)}},getPhotoPlaceholder:function(){return"/images/media-placeholder.png"},getFroggyURL:function(a){return"/user/"+a},getDateString:function(c){var b=new Date().getTime(),a=Math.floor(Math.abs(b-c)/60/1000),d=Math.floor(Math.abs(b-c)/1000);if(a<1){if(d<=3){return"just a moment"}else{return d+" seconds"}}else{if(a==1){return"1 minute"}else{if(a>1&&a<60){return a+" minutes"}else{if(a>=60&&a<120){return"1 hour"}else{if(a>=120&&a<60*24){return Math.floor(a/60)+" hours"}else{if(a>=60*24&&a<60*24*2){return"1 day"}else{if(a>=60*24*2&&a<60*24*7){return Math.floor(a/60/24)+" days"
}}}}}}}},formatDate:function(b){var a=["January","February","March","April","May","June","July","August","September","October","November","December"],c=new Date(b);return a[c.getMonth()]+" "+c.getDate()+", "+c.getFullYear()},getDate:function(a){return new Date().getTime()-a>=this.DATE_THRESHOLD_MS?this.formatDate(a):this.getDateString(a)+" ago"},getPrivateNormalSizeImage:function(b,a){return"http://desmond-secure.yfrog.com/secure_scaled/medium/"+b+"/"+a},getPrivateLargeSizeImage:function(b,a){return"http://desmond-secure.yfrog.com/secure_scaled/large/"+b+"/"+a},getPrivateOriginalImage:function(b,a,c){return"/photos_gate/img"+b+"/"+c+"/"+a},getMessageURI:function(a){return"/message/"+a},bindKeyListener:function(b,a,d,c){$(b).bind("keyup",function(f){if(f.keyCode==a||f.which==a){d(f,c||{})}})},autoRefreshDates:function(a){setInterval(function(){$(".auto-refresh-date[rel]").each(function(){$("span",$(this)).html(Utils.getDate(parseInt($(this).attr("rel"))))})},(a||10)*1000)},triggerGlobalInformer:function(c,b,a){if(!c){return}if(0===b){b=null}else{b=b||5}$("#new-global-informer-text").html(c);$("#new-global-informer").addClass("open");if(b){Utils.globalInformerTimeout=setTimeout(function(){$("#new-global-informer").removeClass("open")},b*1000)}},triggerGlobalSuccess:function(c,b,a){if(!c){return}if(0===b){b=null}else{b=b||5}$("#new-global-success-text").html(c);$("#new-global-success").addClass("open");if(b){Utils.globalInformerTimeout=setTimeout(function(){$("#new-global-success").removeClass("open")},b*1000)}},isVideo:function(a){if(!a){return false}if(a.match(/http:\/\/[www\.]*/g)){return a.match(this.YFROG_VIDEO_REGEX)}else{return a.match(/\b\w*(z){1}\b/)}},getGroupById:function(b){var a=null;$.each(Global.groups,function(d,c){if(c.id==b){a=c;return false}});return a},getPrivilegeById:function(b){var a=null;$.each(Global.privileges,function(d,c){if(c.id==b){a=c;return false}});return a},makeCall:function(b,a,d,c){$.extend(d,Global.getUserCredentials());if(Global.devMode){d.url=b;d.type=a}if(c){return $.ajax({url:Global.devMode?Global.bridge:b,type:a,data:d,timeout:c})}else{return $.ajax({url:Global.devMode?Global.bridge:b,type:a,data:d})}},signUp:function(a){return $.ajax({url:"/auth/signup",type:"POST",data:a})},getGroupConnection:function(a,b){return this.makeCall(Global.APIs.group.connections.uri,Global.APIs.group.connections.type,{user_id:b})},addGroupMember:function(b,a){return this.makeCall(Global.APIs.group.request.uri,Global.APIs.group.request.type,{group_ids:b,member_id:a})},deleteGroupMembers:function(b,a){var c={group_id:b};if(a instanceof Array){c.member_ids=a.join(",")}else{c.member_ids=a}return this.makeCall(Global.APIs.group.deleteUsers.uri,Global.APIs.group.deleteUsers.type,c)},cancelGroupRequest:function(b,a,d){var c={group_id:b,member_id:a,invited_time:d};return this.makeCall(Global.APIs.group.cancel.uri,Global.APIs.group.cancel.type,c)},getNotificationCount:function(){return this.makeCall(Global.APIs.notifications.count.uri,Global.APIs.notifications.count.type,{})},getRequestCount:function(){return this.makeCall(Global.APIs.group.invCount.uri,Global.APIs.group.invCount.type,{})},getRequests:function(a){return this.makeCall(Global.APIs.notifications.requests.uri,Global.APIs.notifications.requests.type,{count:a})},getMoreNotifications:function(a){return this.makeCall(Global.APIs.notifications.notifications.uri,Global.APIs.notifications.notifications.type,{offset:a})},getInvites:function(){return this.makeCall(Global.APIs.group.invites.uri,Global.APIs.group.invites.type,{})},getHiddenUsers:function(){return this.makeCall(Global.APIs.group.members.uri,Global.APIs.group.members.type,{association_status:Global.associations.hidden})},getBlockedUsers:function(){return this.makeCall(Global.APIs.group.members.uri,Global.APIs.group.members.type,{association_status:Global.associations.blocked})},searchUsers:function(a){return this.makeCall(Global.APIs.group.peopleSearch.uri,Global.APIs.group.peopleSearch.type,{prefix:a})
},getMoreUsers:function(c,a,b){return this.makeCall(Global.APIs.group.members.uri,Global.APIs.group.members.type,{offset:c,count:a,group_id:b})},checkEmail:function(a){return this.makeCall(Global.APIs.user.checkEmail.uri,Global.APIs.user.checkEmail.type,{email:a})},getLocation:function(a){return this.makeCall(Global.APIs.location.findCities.uri,Global.APIs.location.findCities.type,{name:encodeURIComponent(a.toLowerCase())})},updateNotificationSettings:function(a){return this.makeCall(Global.APIs.notifications.updateSettings.uri,Global.APIs.notifications.updateSettings.type,a)},like:function(a){return this.makeCall(Global.APIs.message.like.uri,Global.APIs.message.like.type,{message_id:a})},unlike:function(a){return this.makeCall(Global.APIs.message.unlike.uri,Global.APIs.message.unlike.type,{message_id:a})},share:function(d,b,c,a){return this.makeCall(Global.APIs.message.share.uri,Global.APIs.message.share.type,{message:d,group_id:c,message_id:b,privilege:a})},getReplies:function(c,a,b,d){var e={group_id:$.isArray(c)?c.join(","):c,message_id:a,user_id:b};if(d){e.count=d}return this.makeCall(Global.APIs.message.replies.uri,Global.APIs.message.replies.type,e)},postComment:function(d,b,a,f,c){var e={message:d,message_id:b,privilege:a,media:f||""};c&&$.extend(e,{image_id:c});return this.makeCall(Global.APIs.message.reply.uri,Global.APIs.message.reply.type,e)},deleteMessage:function(a){return this.makeCall(Global.APIs.message["delete"].uri,Global.APIs.message["delete"].type,{message_id:a})},denyUserRequest:function(b,a,c){return this.makeCall(Global.APIs.group.deny.uri,Global.APIs.group.deny.type,{group_id:b,sender_id:a,invited_time:c})},acceptUserRequest:function(b,a,c){return this.makeCall(Global.APIs.group.accept.uri,Global.APIs.group.accept.type,{group_id:b,sender_id:a,invited_time:c})},hideUser:function(a){return this.makeCall(Global.APIs.group.updateStatus.uri,Global.APIs.group.updateStatus.type,{member_id:a,status:Global.associations.hidden})},unHideUnBlockUser:function(a){return this.makeCall(Global.APIs.group.updateStatus.uri,Global.APIs.group.updateStatus.type,{member_id:a,status:Global.associations.normal})},blockUser:function(a){return this.makeCall(Global.APIs.group.updateStatus.uri,Global.APIs.group.updateStatus.type,{member_id:a,status:Global.associations.blocked})},sendEmail:function(a,b,c){c=c.replace(/(\r\n|\n|\r)/gm,"<br />");return this.makeCall(Global.APIs.email.simple.uri,Global.APIs.email.simple.type,{email_ids:a,group_ids:b,message:c,noprocess:true})},sendInternalEmail:function(a){return this.makeCall(Global.APIs.email.internal.uri,Global.APIs.email.internal.type,{first_name:a.first_name,last_name:a.last_name,email_id:a.email_id,subject:a.subject,topic:a.topic,category:a.category})},sendContacts:function(b,a){return this.makeCall(Global.APIs.contacts.send.uri,Global.APIs.contacts.send.type,{contacts:b,contact_type:a},15000)},getContacts:function(a,b,d){var c={count:b};if(a){c.contact_type=a}if(d){c.offset=d}return this.makeCall(Global.APIs.contacts.get.uri,Global.APIs.contacts.get.type,c)},searchContacts:function(a,c){var b={user_name:a};if(c){b.offset=c}return this.makeCall(Global.APIs.contacts.search.uri,Global.APIs.contacts.search.type,b)},deleteContacts:function(a){return this.makeCall(Global.APIs.contacts.deleteContact.uri,Global.APIs.contacts.deleteContact.type,{contact_type:a})},updateUser:function(a){return this.makeCall(Global.APIs.user.update.uri,Global.APIs.user.update.type,a)},hovercard:function(a){return this.makeCall(Global.APIs.group.hovercard.uri,Global.APIs.group.hovercard.type,{user_id:a})},getLikedUsers:function(a){return this.makeCall(Global.APIs.message.liked.uri,Global.APIs.message.liked.type,{message_id:a})},getUserMessages:function(c,b,a,d,f){var e={group_id:c,user_id:b,privilege:a};if(d){e.count=d}if(f){e.offset=encodeURIComponent(f)}return this.makeCall(Global.APIs.message.profileMessages.uri,Global.APIs.message.profileMessages.type,e)},sendResetPasswordEmail:function(a){return this.makeCall(Global.APIs.user.sendResetPasswordEmail.uri,Global.APIs.user.sendResetPasswordEmail.type,{email:a})
},checkPassword:function(a){return this.makeCall(Global.APIs.user.verifyPassword.uri,Global.APIs.user.verifyPassword.type,{password:a})},resetPassword:function(b,a){return this.makeCall(Global.APIs.user.resetPassword.uri,Global.APIs.user.resetPassword.type,{hash:b,password:a})},sendEmailVerification:function(a){return this.makeCall(Global.APIs.user.sendEmailVerification.uri,Global.APIs.user.sendEmailVerification.type,{email:a})},getUserImages:function(b,a,d,f,c){var e={user_id:a,group_id:b,count:d};if(f){e.image_id=f}if(c){e.prev=true}return this.makeCall(Global.APIs.image.userImages.uri,Global.APIs.image.userImages.type,e)},getOwnImages:function(b,a,d,f,c){var e={user_id:a,group_id:b,count:d};if(f){e.image_id=f}if(c){e.prev=true}return this.makeCall(Global.APIs.image.ownImages.uri,Global.APIs.image.ownImages.type,e)},updateMessage:function(a,c,b){return this.makeCall(Global.APIs.message.update.uri,Global.APIs.message.update.type,{message_id:a,message:c,media:b})},updateUserCookie:function(a){return $.ajax({url:"/user/update",type:"POST",data:a})},updateUserPassword:function(a){return $.ajax({url:"/user/update_password",type:"POST",data:a})},updateChannelTimestamp:function(a){return $.ajax({url:"/user/update_channel_timestamp",type:"POST",data:{group_id:a}})},findUserByName:function(c,a,d){var b={name:c,count:a};if(d){b.offset=d}return $.ajax({url:Global.APIs.user.findByName.uri,type:Global.APIs.user.findByName.type,dataType:"jsonp",data:b})},extractYoutubeLinks:function(b){var a=this.YT_REGEX[0].exec(b)||this.YT_REGEX[1].exec(b);return a&&a.length&&a[0]},getYoutubeLinkData:function(a){return $.ajax({url:"/url/retrieve_yt",type:"GET",data:a})},getImageReplies:function(a,d,b){var c={image_id:a};if(d){c.offset=d}if(b){c.count=b}return this.makeCall(Global.APIs.message.imageComments.uri,Global.APIs.message.imageComments.type,c)},postImageComment:function(b,a){return this.makeCall(Global.APIs.message.imageComment.uri,Global.APIs.message.imageComment.type,{message:b,image_id:a})},isValidUploadType:function(a){if(!a){return false}return/.\.(jpg|jpeg|gif|png|bmp)$/i.test(a)},deleteImages:function(a,c,b){var d={images:a,group_id:c};if(b){d.message_id=b}return this.makeCall(Global.APIs.image["delete"].uri,Global.APIs.image["delete"].type,d)},likeImage:function(b,a){var c={image_id:b};if(a){c.message_id=a}return this.makeCall(Global.APIs.image.like.uri,Global.APIs.image.like.type,c)},unlikeImage:function(b,a){var c={image_id:b};if(a){c.message_id=a}return this.makeCall(Global.APIs.image.unlike.uri,Global.APIs.image.unlike.type,c)},getImageInfo:function(a){return this.makeCall(Global.APIs.image.info.uri,Global.APIs.image.info.type,{image_id:a})},confirmAction:function(d){var a=new $.Deferred(),e=$("body"),c=$("<div />").attr("id","confirm-bg"),b=$("<div />").attr("id","confirm-container").append($("<div />").addClass("border-radius-10 wrapper").append($("<div />").addClass("message").html(d),$("<div />").addClass("clearfix buttons").append($("<a />").addClass("blue-button large confirm").html("Confirm"),$("<a />").addClass("white-button large cancel").html("Cancel"))));b.find(".buttons a").on("click",function(){var f=$(this);b.find(".wrapper").removeClass("open");setTimeout(function(){c.add(b).remove();e.removeClass("lb-mode");a.resolve({confirmed:f.hasClass("confirm")})},200)});e.addClass("lb-mode").append(c,b);setTimeout(function(){b.find(".wrapper").addClass("open")},100);return a.promise()},signupTrigger:function(b){var f=$("body"),d="Want to get in on the conversation?<br />Just sign up or log in!",e='<span class="float-left">Want to get in on the conversation?<br />Just sign up or log in!</span>            <div class="clear"></div>            <form class="hidden-signup" action="/signup" autocomplete id="hidden-signup-form" method="POST">            	<div class="sexy-input-parent border-radius-5 box-shadow-inset clearfix">            		<input type="text" value="First Name" data-default="First Name" name="firstName" class="input dead float-left name">            	</div>            	<div class="sexy-input-parent border-radius-5 box-shadow-inset clearfix">            		<input type="text" value="Last Name" data-default="Last Name" name="lastName" class="input dead float-left name">            	</div>            	<div class="sexy-input-parent border-radius-5 box-shadow-inset clearfix">            		<input type="text" value="Email" data-default="Email" name="email" class="input dead float-left email">            	</div>            	<div class="sexy-input-parent border-radius-5 box-shadow-inset clearfix">            		<input type="text" value="Confirm Email" data-default="Confirm Email" name="confirmEmail" class="input dead float-left email">            	</div>            </form>            ',g='<span class="float-left">Want to get in on the conversation?<br />Just sign up or log in!</span>            <div class="clear"></div>            <form class="hidden-signup" action="/auth/login" autocomplete id="hidden-login-form" method="POST">            	<div class="sexy-input-parent border-radius-5 box-shadow-inset clearfix">            		<input type="text" value="Email Address" name="email" data-default="Email Address" class="input dead float-left">            	</div>            	<div class="sexy-input-parent border-radius-5 box-shadow-inset clearfix">            		<input type="password" name="password" value="Password" data-default="Password" class="input dead float-left">            	</div>            </form>            ',a=$("<div />").attr("id","confirm-container").on("click",function(h){h.stopPropagation();
if(h.target.id=="confirm-container"){setTimeout(function(){c.add(a).remove();f.removeClass("lb-mode")},10)}}).append($("<div />").addClass("border-radius-10 wrapper").append($("<div />").addClass("close-button"),$("<div />").addClass("message divert").html(function(){if(b&&b=="signup"){return e}if(b&&b=="login"){return g}return d}),$("<div />").addClass("clearfix buttons").append($("<a />").addClass("green-button large signup").html("Sign Up"),$("<a />").addClass("white-button large login").html("Log In"),$("<a />").addClass("green-button large login-buttons login-confirm").html("Log In"),$("<a />").addClass("white-button large login-buttons cancel").html("Cancel")))),c=$("<div />").attr("id","confirm-bg");a.on("click",".signup",function(){if(!$(this).hasClass("submit-form")){a.find(".divert").html(e);$(this).addClass("submit-form")}else{Utils.validateSignup($("#hidden-signup-form"))}}).on("click",".login",function(){if(!$(this).hasClass("login-form")){a.find(".divert").html(g);$(this).siblings(".signup").addClass("login-form").removeClass("submit-form")}}).on("click",".cancel",function(){a.find(".login-form").removeClass("login-form").siblings("signup").removeClass("submit-form");a.find(".divert").html(d)}).on("click",".login-confirm",function(){Utils.validateLogin($("#hidden-login-form"))}).on("keypress","input",function(j){var i=j.keyCode?j.keyCode:j.which,h=$(this).parents("form");if(i==13){if(h.attr("id")=="hidden-signup-form"){Utils.validateSignup(h)}else{Utils.validateLogin(h)}}}).on("click",".close-button",function(h){h.stopPropagation();setTimeout(function(){c.add(a).remove();f.removeClass("lb-mode")},10)});f.addClass("lb-mode").append(c,a).on("click","#confirm-bg",function(h){h.stopPropagation();setTimeout(function(){c.add(a).remove();f.removeClass("lb-mode")},100)});if(b&&b=="signup"){a.find(".signup").addClass("submit-form")}if(b&&b=="login"){a.find(".signup").addClass("login-form").removeClass("submit-form");a.find("input:first").focus()}setTimeout(function(){a.find(".wrapper").addClass("open")},100)},validateSignup:function(a){$.when(Utils.checkInputs(a)).then(function(b){if(b.success){a.submit()}else{Utils.triggerGlobalInformer(b.reason,1,{})}})},validateLogin:function(a){a.ajaxSubmit({success:function(b){if(b.success){window.location.reload()}else{Utils.triggerGlobalInformer("Incorrect email address or password!",1,{});return}},error:function(){Utils.triggerGlobalInformer("Incorrect email address or password!",1,{});return}})},checkInputs:function(c){var d={success:true,reason:""},a=c.find("input"),b=c.find(".sexy-input-parent");b.removeClass("failed");if(c.attr("id")=="hidden-signup-form"){a.each(function(){var f=$(this),e=f.parent();if(f.hasClass("name")&&f.val().length<2){e.addClass("failed");d.success=false,d.reason="Name must be 2 characters or greater!"}if(f.hasClass("name")&&f.val()==f.data("default")){e.addClass("failed");d.success=false,d.reason="You must enter a name!"}if(f.hasClass("email")&&!f.val().isValidEmail()){e.addClass("failed");d.success=false,d.reason="You must enter a valid email!"}if($(c.find("input.email")[0]).val()!==$(c.find("input.email")[1]).val()){c.find("input.email").each(function(){$(this).parent().addClass("failed")});d.success=false,d.reason="You must enter the same email!"}});return d}},assignScrollListener:function(f,a){var e=$(window),d=$(document),c=250,b=null;a=a||0.15;e.on("scroll",function(){b&&clearTimeout(b);b=setTimeout(function(){if((d.height()-e.height()-e.scrollTop())/d.height()<=a){f.call(this)}},c)})},isGlobalGroup:function(a){return Global.groups.global.id==a}};var Global=(function(){var A,ah=$(document),j=$(window),aw=$("body"),f="http://mtju1:8088/rest/v1",i=$("#menu-search"),d=$("#global-drop-down"),c=$("#global-search"),ad=$("#global-search input"),z=$("#global-search-submit"),k=$("#global-log-in"),F=$("#global-login-drop-down"),e=$("#global-login-drop-down .statics"),y=$("#global-sign-in-form"),I=$("#global-sign-in-submit a"),ae=$("#global-sign-in-email"),v=$("#global-sign-in-password"),ai=$("#global-keep-logged"),x=$("#global-sign-in-error"),o=$("#global-forgot-password"),Z=$("#user-strip"),L=$(".hover-on-me"),U=0,T=300,S=15000,au,at,aq,E=$(".unblock-me"),ao=$(".block","#hover"),am=$(".hide","#hover"),Y=$("#notifications-dropdown-button"),J=$("#notifications-dropdown-menu"),W=$("#notify-bubble"),a=$("#not-counter"),X=$("#request-details"),h=$("#activity-details"),t=$("#req-bubble"),an=$("#req-counter"),D=$("#requests-dropdown-menu"),H=$(".textarea-parent"),aa=17,w=null,K=$(".default-text-input input.input"),Q=$(".yf-slider-switch"),ag=$("#profile-badge"),ap=$("#badge-connect"),ax=$("#badge-connected"),ak=$("#badge-connections a"),ab=$("#profile-badge .top a.profile"),q=27;A={URL:"http://yfrog.com",bridge:"/api/bridge.json",userHomeLocation:"/",devMode:true,loggedInUserId:null,loggedInUserName:"",loggedInUserFirstName:"",loggedInUserLastName:"",loggedInUserToken:"",loggedInUserKey:"",mediaDelimiter:":",editableFocusInterval:150,commentTextAreaMinHeight:18,loggedInUserAvatar:Utils.getDefaultAvatar(),emptyImage:"/images/empty.png",lightBoxModeClass:"lb-mode",keyCodes:{escape:27,left:37,right:39,up:38,down:40,enter:13},groups:{friends:{id:1,name:"Friends"},family:{id:0,name:"Family"},business:{id:2,name:"Business"},global:{id:4,name:"Global"}},services:{yfrog:{id:0},twitter:{id:1}},privileges:{group:{id:0,name:"Limited"},social:{id:1,name:"Social"},"public":{id:2,name:"Public"},"private":{id:3,name:"Private"}},associations:{normal:0,hidden:2,blocked:1},login:function(ay,r,az){return $.ajax({url:"/auth/login",type:"POST",data:{email:ay,password:r,stay_logged_in:az}})},getUserCredentials:function(){return A.loggedInUserToken&&A.loggedInUserKey?{auth_token:A.loggedInUserToken,api_key:A.loggedInUserKey}:{}},textAreaDefaultFocusHandler:function(){var r=$(this);r.val()==r.data("default_text")&&r.val("")},textAreaDefaultBlurHandler:function(){var r=$(this);!r.val()&&r.val(r.data("default_text"))},textAreaAutoGrowChangeHandler:function(az){var ay=$(this);if(!ay.val()){ay.css("height",ay.data("min_height"));return}if(w){w.html(ay.val().replace(/\n/gi,"<br/>"));var r=Math.max(w.height()+aa,ay.data("min_height"));if((az.keyCode||az.which)==Global.keyCodes.enter){r+=aa}r+=(parseInt(ay.data("add_height"))||0);ay.css("height",r)}},textAreaAutoGrowFocusHandler:function(){var r=$(this);w=$("<div />").addClass("textarea-dummy").css({fontSize:r.css("fontSize"),width:r.width()-100});aw.append(w)},textAreaAutoGrowBlurHandler:function(){w&&w.remove();w=null},textAreaExpandFocusHandler:function(){$(this).parents(".textarea-parent:eq(0)").addClass("expanded")},getErrorElement:function(r){return $("<div />").addClass("error-text").html(r)}};var O=function(){A.APIs={group:{connections:{type:"GET",uri:f+"/group/connections"},members:{type:"GET",uri:f+"/group/members"},request:{type:"POST",uri:f+"/group/request"},confirm:{type:"POST",uri:f+"/group/confirm"},deleteUsers:{type:"POST",uri:f+"/group/members/delete"},invites:{type:"GET",uri:f+"/group/invites"},accept:{type:"POST",uri:f+"/group/accept"},deny:{type:"POST",uri:f+"/group/deny"},peopleSearch:{type:"GET",uri:f+"/group/people_search"},updateStatus:{type:"POST",uri:f+"/group/update_association_status"},hovercard:{type:"GET",uri:f+"/group/hovercard"},cancel:{type:"POST",uri:f+"/group/cancel"},invCount:{type:"GET",uri:f+"/group/invites_count"},search:{type:"GET",uri:f+"/group/search"}},user:{authenticate:{type:"GET",uri:f+"/user/authenticate"},update:{type:"POST",uri:f+"/user/update"},sendResetPasswordEmail:{type:"POST",uri:f+"/user/send_reset_password_email"},resetPassword:{type:"POST",uri:f+"/user/reset_password"},checkEmail:{type:"GET",uri:f+"/user/is_email_available"},findByName:{type:"GET",uri:f+"/user/find_by_name"},verifyPassword:{type:"GET",uri:f+"/user/check_auth"},sendEmailVerification:{type:"POST",uri:f+"/user/send_confirm_user_email"}},message:{"new":{type:"POST",uri:f+"/message/add"},ownerMessages:{type:"GET",uri:f+"/message/owner_messages"},profileMessages:{type:"GET",uri:f+"/message/profile_messages"},reply:{type:"POST",uri:f+"/message/comment"},recent:{type:"GET",uri:f+"/message/recent"},like:{type:"POST",uri:f+"/message/like"},unlike:{type:"POST",uri:f+"/message/unlike"},share:{type:"POST",uri:f+"/message/share"},replies:{type:"GET",uri:f+"/message/replies"},"delete":{type:"POST",uri:f+"/message/delete"},liked:{type:"GET",uri:f+"/message/liked"},update:{type:"POST",uri:f+"/message/update"},direct:{type:"POST",uri:f+"/message/direct"},"private":{type:"POST",uri:f+"/message/private"},imageComment:{type:"POST",uri:f+"/message/image/comment"},imageComments:{type:"GET",uri:f+"/message/img_comments"},"public":{type:"GET",uri:f+"/message/public"}},image:{userImages:{type:"GET",uri:f+"/image/user_images"},ownImages:{type:"GET",uri:f+"/image/images"},"delete":{type:"POST",uri:f+"/image/delete"},like:{type:"POST",uri:f+"/image/like"},unlike:{type:"POST",uri:f+"/image/unlike"},info:{type:"GET",uri:f+"/image/image_info"}},user_search:"http://api.yfrog.com/rest-api-3.2/nameSearch",email:{simple:{type:"POST",uri:f+"/email/invite"},internal:{type:"POST",uri:f+"/email/contact_us"}},notifications:{count:{type:"GET",uri:f+"/notification/act_count"},reqCount:{type:"GET",uri:f+"/notification/req_count"},requests:{type:"GET",uri:f+"/notification/requests"},notifications:{type:"GET",uri:f+"/notification/activities"},getSettings:{type:"GET",uri:f+"/notification/settings"},updateSettings:{type:"POST",uri:f+"/notification/update_settings"}},contacts:{send:{type:"POST",uri:f+"/contacts/add_contacts"},get:{type:"GET",uri:f+"/contacts/get"},search:{type:"GET",uri:f+"/contacts/search"},deleteContact:{type:"POST",uri:f+"/contacts/delete"}},location:{findCities:{type:"GET",uri:f+"/location/find_cities"}}}
};O();var G=function(){H.on("focus","textarea.has-default-text",A.textAreaDefaultFocusHandler).on("blur","textarea.has-default-text",A.textAreaDefaultBlurHandler);H.on("keyup change","textarea.autogrow",A.textAreaAutoGrowChangeHandler).on("focus","textarea.autogrow",A.textAreaAutoGrowFocusHandler).on("blur","textarea.autogrow",A.textAreaAutoGrowBlurHandler);W.on("click",function(ay){var r=$(this);if(!r.hasClass("on")){B.call(this,ay)}});t.on("click",function(ay){var r=$(this);if(!r.hasClass("on")){g.call(this,ay)}});aw.on("click",function(r){if(r.target!==Y&&W.hasClass("on")){W.removeClass("on").removeClass("alert");J.hide();P()}if(t.hasClass("on")){D.hide();t.removeClass("on").removeClass("alert")}});D.on("click",function(r){r.stopPropagation()});J.on("click",function(r){r.stopPropagation()});D.on("click",".accept",function(){n.call(this)});D.on("click",".ignore",function(){R.call(this)});L.live("mouseenter",function(ay){var r=this,az=ay.clientY;if($(this).children("#hover-cover").length==0){aq=setTimeout(function(){Global.startHover.call(r,az)},500)}}).live("mouseleave",function(r){clearTimeout(aq);au=setTimeout(function(){p.call(this)},U)});$(".ggg").live("mouseenter",function(){clearTimeout(at)});am.live("click",function(r){var ay=$(this).data("user_id");$.when(Utils.confirmAction("Are you sure you want to hide posts by this user?")).then(function(az){if(az.confirmed){$.when(Utils.hideUser(ay)).then(function(aA){window.location.reload(true)})}})});ao.live("click",function(r){var ay=$(this).data("user_id");$.when(Utils.confirmAction("Are you sure you want to block this user?")).then(function(az){if(az.confirmed){$.when(Utils.blockUser(ay)).then(function(aA){window.location.reload(true)})}})});E.live("click",function(){af.call(this)});aw.on("click","#hover .in-group-container .global-green-check",function(aC){var aD=$(this);if(!aD.hasClass("approved")&&!aD.hasClass("pending")){var r=aD.data("id"),aE=aD.data("type"),az="",aF=aD.data("time"),aB=A.loggedInUserId,ay="There was an error sending your request.  Please try again later.";$.when(Utils.confirmAction("Are you sure you want to add this user to your "+Utils.getGroupById(aE).name+" group?")).then(function(aJ){if(aJ.confirmed){$.when(Utils.addGroupMember(aE,r)).then(function(aK){if(aK&&aK.success){aD.addClass("pending");az=aK.success?aK.result[aE]:"";aD.data("time",az)}else{Utils.triggerGlobalInformer(ay,5,{isError:true})}})}})}else{if(aD.hasClass("approved")){var aD=$(this),aG=aD.data("id"),aA=aD.data("type"),aH=A.loggedInUserId,ay="There was an error sending your request.  Please try again later.";$.when(Utils.confirmAction("Are you sure you want to remove this connection?")).then(function(aJ){if(aJ.confirmed){$.when(Utils.deleteGroupMembers(aA,aG)).then(function(aK){if(aK&&aK.success){aD.removeClass("approved")}else{Utils.triggerGlobalInformer(ay,5,{isError:true})}})}})}else{if(aD.hasClass("pending")){var aD=$(this),aG=aD.data("id"),aA=aD.data("type"),aH=A.loggedInUserId,aI=aD.data("time"),ay="There was an error removing your request.  Please try again later.";$.when(Utils.confirmAction("Are you sure you want to cancel this request?")).then(function(aJ){if(aJ.confirmed){$.when(Utils.cancelGroupRequest(aA,aG,aI)).then(function(aK){if(aK&&aK.success){aD.removeClass("pending")}else{Utils.triggerGlobalInformer(ay,5,{isError:true})}})}})}}}});aw.on("click",".fake",function(){var r=$(this);r.addClass("hide-text");r.siblings(".real").focus()});aw.on("focusout",".real",function(){var r=$(this);if(!r.val()){r.siblings(".fake").removeClass("hide-text")}});aw.on("focus",".real",function(){var r=$(this);if(!r.val()){r.siblings(".fake").addClass("hide-text")}});$(".yf-check-box").live("click",function(){$(this).toggleClass("checked")});$(".sexy-input-parent input").live("focusin",function(){var r=$(this);r.parents(".sexy-input-parent:eq(0)").addClass("focused");if(r.hasClass("dead")){r.removeClass("dead");r.val("")}}).live("focusout",function(){var r=$(this);r.parents(".sexy-input-parent:eq(0)").removeClass("focused");
if(!r.val()){r.val(r.data("default")||"").addClass("dead")}});$(".sexy-input-parent .textarea").live("focusin",function(){var r=$(this);r.parents(".sexy-input-parent:eq(0)").addClass("focused");if(r.hasClass("dead")){r.removeClass("dead");r.val("").text("")}}).live("focusout",function(){var r=$(this),ay=r.data("default");r.parents(".sexy-input-parent:eq(0)").removeClass("focused");if(!r.val()){r.text(ay).val(ay).addClass("dead")}});c.one("focusin",function(){new Global.UserSearch({input:ad,parent:i})});z.on("click",function(){var r=ad.val();if(!r||r==ad.data("default_text")){return}window.location="/search/"+encodeURIComponent(r)});d.on("click",function(ay){ay.stopPropagation();var r=i.hasClass("drop-down-open");if(r){N()}else{al()}});k.click(function(r){r.preventDefault();r.stopPropagation();F.show();k.addClass("invisible");ae.focus();ah.click(av)});e.click(function(r){r.preventDefault();r.stopPropagation();k.removeClass("invisible");F.hide();ah.unbind("click",av)});F.delegate("*","click",function(r){r.stopPropagation()});Utils.bindKeyListener("#global-sign-in-email, #global-sign-in-password",13,function(r){$(r.target).parents("form:eq(0)").submit()});y.submit(function(az){az.preventDefault();u();var ay=ae.val(),r=v.val();if(!ay||!ay.isValidEmail()){ac("Please enter a valid email address.");return}if(!r){ac("Please enter your password.");return}$.when(A.login(ay,r,ai.hasClass("checked"))).then(function(aA){if(aA.error){ac(aA.error);return}window.location=A.userHomeLocation})});I.click(function(r){r.preventDefault();y.submit()});ai.click(function(r){r.preventDefault();$(this).toggleClass("checked")});o.on("click",function(){new Global.PasswordRecovery()});ah.on("click",".yf-drop-down",function(ay){ay.stopPropagation();var r=$(this);if(!r.hasClass("expanded")){ah.on("click",av)}r.toggleClass("expanded")});ah.on("click",".yf-drop-down .option",function(ay){ay.stopPropagation();var r=$(this);r.siblings(".selected:eq(0)").data("value",r.data("value")).html(r.text()).end().parent().removeClass("expanded");ah.off("click",av)});ah.on("focus blur keyup",".default-text-input input.input",function(){var r=$(this);r.val().length?r.parent().addClass("has-value"):r.parent().removeClass("has-value")});ah.on("focus",".default-text-input input.text",function(){$(this).siblings(".input").focus()});K.each(function(){var r=$(this);r.val().length&&r.parent().addClass("has-value")});Q.on("click",function(){$(this).toggleClass("off")});ap.add(ax).on("click",function(){ag.toggleClass("expanded")});ak.on("click",function(){var aC=$(this),aA=aC.data("user_id"),aB=Utils.getGroupById(aC.data("group_id")),az=aC.hasClass("pending"),ay=aC.hasClass("approved"),r=!az&&!ay;if(aC.hasClass("processing")){return}$.when(az?Utils.confirmAction("Are you sure you want to cancel this request?"):ay?Utils.confirmAction("Are you sure you want to remove this connection?"):Utils.confirmAction("Are you sure you want to add this user to your "+aB.name+" group?")).then(function(aD){if(aD.confirmed){aC.addClass("processing");$.when(az?Utils.cancelGroupRequest(aB.id,aA,aC.data("time")):ay?Utils.deleteGroupMembers(aB.id,aA):Utils.addGroupMember(aB.id,aA)).then(function(aE){if(aE&&aE.success){az&&aC.removeClass("pending");ay&&aC.removeClass("approved");r&&aC.addClass("pending").data("time",aE.result[aB.id]);var aG=aC.siblings(".approved");if(aG.length){var aF="";aG.each(function(){aF+=Utils.getGroupById($(this).data("group_id")).name+", "});aF=aF.slice(0,-2).replace(/,([^,]*)$/," and $1");ax.find(".desc").html(aF)}else{ag.find(".top, .bottom").removeClass("connected")}}else{Utils.triggerGlobalInformer("Could not complete your request at this time. Please try again later")}}).always(function(){ag.removeClass("expanded");aC.removeClass("processing")}).fail(function(){Utils.triggerGlobalInformer("Could not complete your request at this time. Please try again later")})}})})};var u=function(){x.hide().html("")};var ac=function(r){x.html(r).show()};var N=function(){i.removeClass("drop-down-open");
ah.unbind("click",av)};var av=function(){F.hide();k.removeClass("invisible");N();$(".yf-drop-down").removeClass("expanded")};var al=function(){i.addClass("drop-down-open");ah.click(av)};A.startHover=function(aE){$("#hover-cover").remove();$("#hover").remove();var aC=$(this),ay=aC.data("user_id"),az=aC.data("small"),aB=aC.hasClass("name"),r=aC.hasClass("c-name"),aA,aD;aA=(az==true)?"amend":"";if(aE<330){aD=(aB==true||r==true)?"name-amend":"";aC.append('<div id="hover-cover" class="ggg"></div><div class="shadowed-box border-radius-3 clearfix ggg top '+aA+" "+aD+'" id="hover"><img class="top-arrow" src="/images/top-arrow.png"><div class="loading-gif"><img src="/images/loader.gif"><span> Loading...</span></div></div>').css("position","relative")}else{aC.append('<div id="hover-cover" class="ggg"></div><div class="shadowed-box border-radius-3 clearfix ggg '+aA+'" id="hover"><img class="side-arrow" src="/images/side-arrow.png"><div class="loading-gif"><img src="/images/loader.gif"><span> Loading...</span></div></div>').css("position","relative")}$.when(Utils.hovercard(ay)).then(function(aF){M(aC,aF,az)})};var M=function(aE,aF,ay){if(aF.success==true){var aJ=$(aE),r=aF.result.shared_people,aG=r.length>0?r.length:0,aP=aF.result.user,aK=6,aI=aP.user_id,aH=Utils.getAvatar96(aP.avatar_server,aP.avatar_filename,aP.avatar_crop),aQ=aP.first_name+" "+aP.last_name,aN=r.length>0?Math.min(r.length,aK):0,aD=aN<5?aN:5,aM=aN==1?" person":" people",aO=aP.pending_invites.length,aB=[],aL;popWindow='<div class="clearfix hov-container">							<div class="hover-left">								<a href="/user/'+aI+'"><img src="'+aH+'" class="smaller-image"></a>';if(!aF.result.blocked&&!aF.result.hidden){popWindow+='<div class="float-left shadowed-box border-radius-2 hide" data-user_id="'+aI+'">													Hide												</div>												<div class="clear"></div>';popWindow+='<div class="float-left shadowed-box border-radius-2 block" data-user_id="'+aI+'">													Block												</div>'}else{if(aF.result.blocked){popWindow+='<div class="float-right white-button hide companion" data-user_id="'+aI+'">														Hide													</div>													<div class="clear"></div>';popWindow+='<div class="float-left white-button unblock-me extra" data-user_id="'+aI+'">														Unblock													</div>'}else{popWindow+='<div class="float-right white-button unblock-me" data-user_id="'+aI+'">														Unhide													</div>													<div class="clear"></div>';popWindow+='<div class="float-left white-button block" data-user_id="'+aI+'">														Block													</div>'}}popWindow+='<div class="clear"></div>							</div>							<div class="hover-right">								<a class="r-name dark-blue" href="/user/'+aI+'">'+aQ+'</a>								<div class="add-group-card" style="display: block; ">								<div class="hover-connection-container clearfix">';for(aL=0;aL<aO;aL++){if(aP.pending_invites[aL].group_id==0){var aA="Family"}if(aP.pending_invites[aL].group_id==1){var aA="Friends"}if(aP.pending_invites[aL].group_id==2){var aA="Business"}popWindow+='<div class="in-group-container" data-order="'+aP.pending_invites[aL].group_id+'">														<a class="global-green-check pending" data-id="'+aI+'" data-type="'+aP.pending_invites[aL].group_id+'" data-time="'+aP.pending_invites[aL].invited_time+'" data-pending="'+aP.pending_invites[aL].group_id+'">'+aA+"</a>													</div>";aB.push(aP.pending_invites[aL].group_id)}for(aL=0;aL<3;aL++){if(aL==0){var aA="Family"}if(aL==1){var aA="Friends"}if(aL==2){var aA="Business"}if(jQuery.inArray(aL,aB)===-1){popWindow+='<div class="in-group-container" data-order="'+[aL]+'">';if(jQuery.inArray(aL,aP.connected_groups)!==-1){popWindow+='<a class="global-green-check approved" data-id="'+aI+'" data-type="'+[aL]+'" data-time="" data-pending="">'+aA+"</a>"}else{popWindow+='<a class="global-green-check" data-id="'+aI+'" data-type="'+[aL]+'" data-time="" data-pending="">'+aA+"</a>"}popWindow+='															<div class="clear"></div>														</div>'
}}popWindow+='</div><div class="clear"></div>									<div class="text">People in common</div>									<div class="clear"></div>									<div style="position:relative;">';if(aN>0){for(aL=0;aL<aN;aL++){var aC=Utils.getAvatar25(r[aL].avatar_server,r[aL].avatar_filename,r[aL].avatar_crop),az=r[aL].first_name+" "+r[aL].last_name;popWindow+='<a href="/user/'+r[aL].user_id+'"><img src="'+aC+'" class="shared-user-pic" title="'+az+'"></a>'}}popWindow+='<div class="clear"></div></div>';popWindow+='</div>						<div class="clear"></div>';popWindow+="</div></div>						</div>";$("#hover").children(".loading-gif").remove();$("#hover").append(popWindow)}};var af=function(){var r=$(this).data("user_id");$.when(Utils.unHideUnBlockUser(r)).then(function(ay){window.location.reload(true)})};var p=function(){at=setTimeout(function(){$("#hover").remove();$("#hover-cover").remove()},T)};var aj=function(az){var ay=j.width()+($.browser.msie&&parseInt($.browser.version)==9?17:0),r=ah.width();Z.css({width:ay<r?r:"100%"});if(az){j.resize(function(){aj(false)})}};var g=function(ay){if(ay){ay.stopPropagation()}var r=$(this);r.addClass("on").siblings().removeClass("on").removeClass("alert");F.hide();k.removeClass("invisible");N();J.hide();D.show();$.when(Utils.getInvites()).then(function(aA){var az=aA;if(!aA||!aA.success==true){Utils.triggerGlobalInformer("There was an error in processing the request.",5,{isError:true})}else{C(az)}})};var C=function(aA){var aE=aA,aD=aE.result.length,aG=aE.result,aB="",aC;if(!aD==0){for(aC=0;aC<aD;aC++){var aF=aG[aC],az=aF.group_id,aJ=aF.invited_time,ay=Utils.getFroggyURL(aF.user_id),aI=Utils.getAvatar48(aF.avatar_server,aF.avatar_filename,aF.avatar_crop),r=aF.first_name+" "+aF.last_name,aH=!(az==null)?Utils.getGroupById(az).name:null;time=Utils.getDateString(aJ),id=aF.user_id;aB+='	<div class="instance clearfix">						<img src="'+aI+'">						<div class="info clearfix">							<div class="text clearfix"><a href="'+ay+'" class="name-text">'+r+'</a> <div class="clear"></div>wants to add you to their '+aH+' group.<span class="time">'+time+' ago</span></div>							<div class="clear"></div>							<div class="blue-button float-left accept"  data-user_id="'+id+'" data-group_id="'+az+'" data-invited_time="'+aJ+'">								Accept							</div>		  					<div class="white-button float-left ignore"  data-user_id="'+id+'" data-group_id="'+az+'" data-invited_time="'+aJ+'">								Not Now							</div>						</div>					</div>'}}else{aB+='				<div class="no-requests">    				You have no pending requests.    			</div>			'}X.html(aB)};var B=function(ay){if(ay){ay.stopPropagation()}var r=$(this);r.addClass("on").siblings().removeClass("on").removeClass("alert");F.hide();k.removeClass("invisible");N();D.hide();J.show();l()};var P=function(){a.html("").removeClass("on")};var l=function(){$.ajax({url:"/notification/parsed.json",data:{count:4},success:function(ay){var r=ay;ar(r)},error:function(){Utils.triggerGlobalInformer("There was an error retrieving your notifications.",5,{isError:true})}})};var ar=function(aA){var aC=aA,ay="",az;if(aC.result.notifications.length==0){ay+='	<div class="no-activity">	    				You have no new activity.	    			</div>'}else{if(aC.success==true&&aC.result.notifications.length>0){for(az=0;az<5;az++){var r=aC.result.notifications[az];if(r){var aB=r.avatar_url?r.avatar_url:"/images/default-avatar-48x48.png";ay+='<div class="instance clearfix">									<img src="'+aB+'" class="float-left"> <span class="message">'+r.message_html+'</span> <span class="time">'+r.date_string+"</span>								</div>"}}}else{ay+='	<div class="no-activity">	    				There was a problem retrieving notifications.<br />	    				Please try again later.	    			</div>'}}h.html(ay)};var R=function(){var az=$(this),aA=az.data("group_id"),ay=az.data("user_id"),aB=az.data("invited_time"),aD=az.parents(".instance"),r=aD.find(".name-text").text(),aC="There was a problem, please try again later";fadeCount=parseInt(an.text()),newCount=fadeCount-1,noRequests='<div class="no-requests">You have no pending requests.</div>';
if(aA==null||!ay||!aB){Utils.triggerGlobalInformer(aC,5,{isError:true})}else{if(newCount==0){X.html(noRequests);an.removeClass("on")}else{if(newCount>0){an.html(newCount)}}$.when(Utils.denyUserRequest(aA,ay,aB)).then(function(aE){if(aE.success==true){aD.html("You have ignored "+r+"'s request.");var aF=setTimeout(function(){$.when(aD.fadeOut("slow")).then(function(){aD.remove()})},500)}else{Utils.triggerGlobalInformer(aC,5,{isError:true})}})}};var n=function(){var aF=$(this),aE=aF.data("group_id"),aB=aF.data("user_id"),aA=aF.data("invited_time"),aD=aF.parents(".instance"),r=aD.find(".name-text").text(),aC=parseInt(an.text()),aG=aC-1,az="There was a problem, please try again later",ay='<div class="no-requests">You have no pending requests.</div>';if(aE==null||!aB||!aA){Utils.triggerGlobalInformer(az,5,{isError:true})}else{if(aG==0){X.html(ay);an.removeClass("on")}else{if(aG>0){an.html(aG)}}$.when(Utils.acceptUserRequest(aE,aB,aA)).then(function(aH){if(aH.success==true){aD.html("You have accepted "+r+"'s request!");var aI=setTimeout(function(){$.when(aD.fadeOut("slow")).then(function(){aD.remove()})},500)}else{Utils.triggerGlobalInformer(az,5,{isError:true})}})}};var m=function(){return m.obj};var s=function(){$.when(Utils.getNotificationCount()).then(function(az){if(!az||!az.result||!az.success){return}if(az.success&&az.result){var ay=az.result;if(ay<10){a.html(ay).addClass("on");W.addClass("alert")}else{if(ay>=10){a.addClass("large").addClass("on").html(ay);W.addClass("alert")}}}var r=setInterval(function(){$.when(Utils.getNotificationCount()).then(function(aB){if(!aB){return}if(aB.error&&aB.error.error_code&&aB.error.error_code==10){clearInterval(r)}if(aB.success&&aB.result){var aA=aB.result;if(aA<10){a.html(aA).addClass("on");W.addClass("alert")}else{if(aA>=10){a.addClass("large").html(aA).addClass("on");W.addClass("alert")}}}}).fail(function(){clearInterval(r)})},S)})};var V=function(){$.when(Utils.getRequestCount()).then(function(az){if(!az||!az.result||!az.success){return}else{var ay=az.result;if(ay<10&&ay!==0){t.addClass("alert");an.addClass("on").html(ay)}else{if(count>=10){t.addClass("alert");an.addClass("on").addClass("large").html(ay)}}}var r=setInterval(function(){$.when(Utils.getRequestCount()).then(function(aB){if(!aB){return}if(aB.error&&aB.error.error_code&&aB.error.error_code==10){clearInterval(r)}else{var aA=aB.result;if(aA<10&&aA!==0){t.addClass("alert");an.addClass("on").html(aA)}else{if(aA>=10){t.addClass("alert");an.addClass("on").addClass("large").html(aA)}}}}).fail(function(){clearInterval(r)})},S)})};var b=function(){if(ab.text().length>q){ab.addClass("long-name")}};A.init=function(){G();aj();b();Global.loggedInUserId&&s();Global.loggedInUserId&&V();setTimeout(function(){$("#new-global-informer, #new-global-success").removeClass("hacked")},100)};A.getBasicBox=function(r){r=r||{};r.closeCallback=r.closeCallback||function(){};return $("<div />").addClass("global-basic-box shadowed-box border-radius-3").append($("<div />").addClass("wrapper").append($("<a />").addClass("close").attr("title","Close").on("click",r.closeCallback).html("Close"),$("<div />").addClass("title-area").html(r.title||""),$("<div />").addClass("input-area"),$("<div />").addClass("details-area"),$("<div />").addClass("clearfix controls-area")))};A.prepareText=function(r){if(!r){return""}return r.replace(/\\"/g,'"').replace(/\\'/g,"'")};A.isPublic=function(r){return r==Global.privileges["public"].id};A.descSort=function(ay,r){return(r.last_action_time||r.created_time)-(ay.last_action_time||ay.created_time)};A.ascSort=function(ay,r){return(ay.last_action_time||ay.created_time)-(r.last_action_time||r.created_time)};A.setBaseAPI=function(r){f=r;O()};return A})();Global.ShareBox=function(e){var a=e.candid,d=$("body"),b=null,c=null,f=150;function h(){c.find(".wrapper").removeClass("open");setTimeout(function(){c.remove();b.remove();d.removeClass(Global.lightBoxModeClass)},f)}function g(){var n=$(this),o=c.find("textarea"),l=c.find(".group-wrapper .selected").data("value"),j=c.find(".privilege-wrapper .selected").data("value"),k=a.message_id,m=o.hasClass("has-default")?"":Utils.prepareTextForPosting(o.val());
if(n.hasClass("disabled")){return}n.addClass("disabled");Utils.share(m,k,l,j).then(function(p){if(p&&p.success){h();Utils.triggerGlobalSuccess("This post has been shared successfully.",2.5)}else{Utils.triggerGlobalInformer("Could not share this post, please try again later.",3)}}).always(function(){n.removeClass("disabled")}).fail(function(){Utils.triggerGlobalInformer("Could not share this post, please try again later.",3)})}function i(){b=$("<div />").attr("id","share-box-bg");c=$("<div />").attr("id","share-box-container").append($("<div />").addClass("border-radius-5 wrapper").append($("<a />").addClass("yf-close-button").on("click",h).attr("title","Close"),$("<h3 />").html("Share this post"),$("<section />").addClass("text-area").append($("<div />").addClass("border-radius-3 box-shadow-inset text-parent").append($("<textarea />").addClass("has-default").val("Say something about this post...").one("focus",function(){$(this).val("").removeClass("has-default")})),$("<div />").addClass("no-user-select group-label").html("Group"),$("<div />").addClass("group-wrapper").append($("<ul />").addClass("yf-drop-down no-user-select").append($("<li />").addClass("arrow"),$("<li />").addClass("selected").data("value",1).html("Friends"),$("<li />").addClass("option").data("value",1).html("Friends"),$("<li />").addClass("option").data("value",0).html("Family"),$("<li />").addClass("option").data("value",2).html("Business"))),$("<div />").addClass("privilege-wrapper").append($("<ul />").addClass("yf-drop-down no-user-select border-radius-3").append($("<li />").addClass("arrow"),$("<li />").addClass("selected").data("value",2).html("All Groups & The Public"),$("<li />").addClass("option").data("value",0).html("Friends Only"),$("<li />").addClass("option").data("value",1).html("Business, Friends, Family"),$("<li />").addClass("option").data("value",2).html("All Groups & The Public")))),$("<section />").addClass("clearfix content-area").append($("<img />").attr("src",a.avatar_url||Utils.getAvatar48(a.avatar_server,a.avatar_filename)),$("<div />").addClass("info").append($("<div />").addClass("name").append($("<a />").html(a.owner_first_name+" "+a.owner_last_name).attr("href",Utils.getFroggyURL(a.owner_id))),$("<div />").addClass("message").html(Utils.convertLinks(a.message)),$("<ul />").addClass("medias"))),$("<section />").addClass("clearfix buttons").append($("<a />").addClass("blue-button").on("click",g).append($("<span />").addClass("default").html("Share"),$("<span />").addClass("alt").html("Sharing...")),$("<a />").addClass("white-button").html("Cancel").on("click",h))));if(a.media&&a.media.length){var j=a.media[a.media.length-1].split(Global.mediaDelimiter);c.find(".medias").append($("<li />").addClass("shadow-1-1").append($("<img />").attr("src",Utils.getMediaThumbnailMedium(j[0],j[1])).on("error",function(){$(this).addClass("broken")})))}else{c.find(".medias").remove()}!a.message&&c.find(".message").remove();c.find(".group-wrapper .yf-drop-down .option").on("click",function(){var m=$(this),l=Utils.getGroupById(m.data("value")),k=c.find(".privilege-wrapper .yf-drop-down");k.find(".option:eq(0)").html(l.name+" Only");k.find(".selected").data("value")===Global.privileges.group.id&&k.find(".selected").html(l.name+" Only")});d.append(b,c)}d.addClass(Global.lightBoxModeClass);i();setTimeout(function(){c.find(".wrapper").addClass("open")},f)};Global.LightBox=function(X){var O=X.medias,N=X.index,c=X.noFetch,T=O[N],J=X.likeCallback||function(){},s=X.commentCallback||function(){},af=false,W=$(window),l=$(document),F=$("body"),d=500,f=null,Z=null,R=null,h=null,b=null,y=30,r=null,C=500,w=900,z=324,x=55,M=10,ae=5,Y=false,ad=false,E=null,H=50,A=T.avatar_server,o=T.avatar_filename,e=T.avatar_crop,K=T.avatar_url||"",S=T.owner_first_name,D=T.owner_last_name,G=null,v=null,t="Write your comment...",q="Collapse",ac="Expand",j=$("<div />").addClass("lightbox-dimmed-bg").on("click",I),P=$("<div />").on("click",function(){I()}).addClass("lightbox-container"+(W.height()<C?" shorter":"")).css("top",W.scrollTop()).append($("<div />").addClass("clearfix").on("click",function(ah){ah.stopPropagation()
}));var I=function(){l.off("keyup",a);W.off("resize",Q);P.remove();j.remove();F.removeClass(Global.lightBoxModeClass)};var p=function(ah){return $("<a />").addClass("likes-count").html(ah==1?"1 Person":ah+" People")};var ab=function(){var al=$(this),ak=parseInt(al.data("count")),am=!al.hasClass("unlike"),aj=al.parent(),ai=al.siblings(".likes-count:eq(0)"),ah=T.media&&T.media.length&&T.image_id==T.media[T.media.length-1];al.toggleClass("unlike").html(am?"Unlike":"Like");ak+=am?1:-1;al.data("count",ak);if(!am&&ak==0){ai.remove();P.find(".stats-like-count").html("")}else{ai.length==0?aj.prepend(p(ak)):ai.replaceWith(p(ak));P.find(".stats-like-count").html(ak)}if(ah){am?Utils.likeImage(T.media[T.media.length-1],T.message_id):Utils.unlikeImage(T.media[T.media.length-1],T.message_id)}else{am?Utils.likeImage(T.image_id):Utils.unlikeImage(T.image_id)}T.likes=ak;T.liked=am;ah&&J(T)};var B=function(){var ah=T;if(!ah.media){ah.media=[];$.each(O,function(){if(this.message_id==T.message_id){ah.media.push([this.server,this.filename,this.bucket].join(Global.mediaDelimiter))}})}};var Q=function(){var ai=W.width(),ah=W.height();G=Math.max(w,ai-2*y);v=Math.max(C,ah-2*y);var aj=G-(af?0:z)-M;if(!f){f=P.find("> div");Z=P.find(".resizable");R=P.find(".the-zone img");h=P.find(".right-side");b=h.find(".right-side-wrapper")}f.css({width:G,height:v});Z.css({width:aj,height:v});R.css({maxWidth:aj,maxHeight:v});h.css({height:v});b.css({maxHeight:v-x});if(ai<=w||ah<=C){F.removeClass(Global.lightBoxModeClass)}else{F.addClass(Global.lightBoxModeClass)}};var n=function(){P.find("> div").append($("<div />").addClass("left-side resizable").on("mouseleave",function(){P.removeClass("keyed")}).append($("<a />").addClass("yf-close-button dark").on("click",function(){I()}).attr("title","Close"),$("<div />").addClass("no-user-select the-zone resizable").append($("<div />").addClass("media").append($("<div />").addClass("media-wrapper resizable").append($("<span />"),$("<img />").addClass("waiting").on("error",function(){$(this).attr("src",Global.emptyImage).addClass("broken")}).on("load",function(){$(this).removeClass("waiting")})),$("<a />").addClass("go-left toggalable no-user-select").on("click",function(){U()}),$("<a />").addClass("go-right toggalable no-user-select").on("click",function(){k()}),$("<div />").addClass("no-user-select border-radius-3 toggalable media-stats").append($("<a />").addClass("stats-like-count").on("click",function(){if($(this).hasClass("inactive")){return}P.find(".right-side .like-anchor").click()}))))),$("<div />").addClass("right-side").append($("<div />").addClass("cover"),$("<div />").addClass("right-side-wrapper").append($("<div />").addClass("clearfix user-area").append($("<a />").addClass("avatar").append($("<img />").addClass("border-radius-2")),$("<div />").addClass("info").append($("<div />").addClass("props clearfix").append($("<a />").addClass("name dark-blue"),$("<span />").addClass("arrow"),$("<a />").addClass("second-name dark-blue")),$("<div />").addClass("message"),$("<div />").addClass("clearfix message-controls no-user-select").append($("<a />").addClass("comment-anchor").html("Comment").on("click",function(){P.find(".right-side .textarea-parent textarea").focus()}),$("<a />").addClass("like-anchor").html("Like").on("click",function(){ab.call(this)}),$("<span />").addClass("date")))),$("<div />").addClass("comments")),$("<div />").addClass("comment-input-container").on("focusin",function(){$(this).addClass("ready")}).on("focusout",function(){var ah=$(this);setTimeout(function(){var ai=ah.find(".submit-button");if(ai.hasClass("busy")){ai.removeClass("busy");return}ah.removeClass("ready")},100)}).append($("<div />").addClass("clearfix editable-content-box box-shadow-inset border-radius-3 comment-input-box textarea-parent").append($("<textarea />").on("focus",Global.textAreaDefaultFocusHandler).on("focus",Global.textAreaAutoGrowFocusHandler).on("blur",Global.textAreaDefaultBlurHandler).on("blur",Global.textAreaAutoGrowBlurHandler).on("keyup change",Global.textAreaAutoGrowChangeHandler).addClass("autogrow has-default-text").attr("autocomplete","off").data("min_height",Global.commentTextAreaMinHeight).data("default_text",t).val(t)),$("<div />").addClass("clearfix comment-button").append($("<a />").addClass("blue-button small submit-button").on("click",function(){$(this).addClass("busy");
L.call(this)}).html("Comment")))),$("<a />").attr("title",q).on("click",function(){af=!af;Q();P.toggleClass("collapsed");$(this).attr("title",af?ac:q)}).addClass("collapse no-user-select"))};var V=function(ah){if(!ah.prev&&(Y||N+ae<O.length-1)){return}if(ah.prev&&(ad||N>ae-1)){return}var aj=T.owner_id==Global.loggedInUserId?Utils.getOwnImages:Utils.getUserImages,ai=O[O.length-1].image_id;$.when(aj.call(Utils,T.group_id,T.owner_id,H,ai,ah.prev)).then(function(al){if(!al||!al.success||!al.count){Y=!ah.prev;ad=ah.prev;return}if(al.count<H){Y=!ah.prev}if(al.count<H){ad=ah.prev}var ak=0;$.each(al.result,function(){if(!this.message||this.image_id==ai){return true}ak++;var an=$.extend(this,this.message),am=this.image_id.split(Global.mediaDelimiter);an.server=am[0];an.filename=am[1];an.bucket=am[2];an.width=am[3];an.height=am[4];ah.prev?O.unshift(an):O.push(an);ah.prev&&N++});if(ak==0){Y=!ah.prev}if(ak==0){ad=ah.prev}m()})};var U=function(){if(!O.length||O.length==1){return}if(N==0){N=O.length}P.addClass("keyed").find(".global-basic-box").remove();T=O[--N];m();aa()};var k=function(){if(!O.length||O.length==1){return}if(N+1>=O.length){N=-1}P.addClass("keyed").find(".global-basic-box").remove();T=O[++N];m();aa()};var L=function(){var aj=$(this),ai=aj.parents(".right-side:eq(0)"),al=ai.find(".textarea-parent textarea"),ak=Utils.prepareTextForPosting(al.val());aj.removeClass("busy");if(!ak||ak==al.data("default_text")||aj.hasClass("disabled-button")||Utils.isToxic(ak)){return}aj.addClass("disabled-button");var ah=T.media&&T.media.length==1;$.when(ah?Utils.postComment(ak,T.message_id,T.privilege,"",T.image_id):Utils.postImageComment(ak,T.image_id)).then(function(am){aj.removeClass("disabled-button");if(!am||!am.result){return}al.val("").blur().css("height",Global.commentTextAreaMinHeight);ai.find(".comment-input-container").removeClass("ready");ai=ai.find(".comments");ai.append(u({message:ak,owner_first_name:Global.loggedInUserFirstName,owner_last_name:Global.loggedInUserLastName,created_time:new Date()-1000,avatar:Global.loggedInUserAvatar,owner_id:Global.loggedInUserId}));al.val("").blur();ah&&s(T,am.result,ak)})};var u=function(ah){if(!ah.message||Utils.isToxic(ah.message)){return}var ai=Utils.convertLinks(ah.message);return $("<div />").addClass("clearfix comment default-state").append($("<a />").addClass("avatar").attr("href",Utils.getFroggyURL(ah.owner_id)).append($("<img />").addClass("border-radius-2").attr("src",ah.avatar||Utils.getAvatar25(ah.avatar_server,ah.avatar_filename,ah.avatar_crop))),$("<div />").addClass("info").append($("<div />").addClass("user-info").append($("<a />").addClass("dark-blue").attr("href",Utils.getFroggyURL(ah.owner_id)).html(ah.owner_first_name+" "+ah.owner_last_name),$("<span />").addClass("date").html(Utils.getDate(ah.created_time))),$("<div />").addClass("message").html(ai)))};var ag=function(ah){$.when(E=Utils.getImageReplies(ah.image_id)).then(function(aj){if(!aj||!aj.success||!aj.result||!aj.result.length||aj.result.length==0){return}var ai=P.find(".comments");$.each(aj.result.sort(Global.ascSort),function(){ai.append(u(this))});setTimeout(function(){ai.find(".comment.default-state").removeClass("default-state")},50)})};var i=function(ah){ah.preloaded=true;new Image().src=ah.large_url};var g=function(){N-1>=0&&!O[N-1].preloaded&&i(O[N-1]);N+1<O.length&&!O[N+1].preloaded&&i(O[N+1])};var aa=function(){r&&clearTimeout(r);var ai=T,aj=Global.loggedInUserId==ai.owner_id,ah=Global.isPublic(ai.privilege);ai.parent_message&&ai.parent_message.owner_id!=ai.owner_id?P.addClass("has-parent"):P.removeClass("has-parent");aj?P.addClass("is-mine"):P.removeClass("is-mine");!ah?P.addClass("is-private"):P.removeClass("is-private");E&&E.abort();r&&clearTimeout(r);P.find(".comments").empty();r=setTimeout(function(){ag(ai)},d);P.find(".the-zone .stats-like-count").removeClass("inactive");P.find(".likes-count").remove();if(ai.likes_count&&ai.likes_count>0){P.find(".message-controls").prepend(p(ai.likes_count));P.find(".like-anchor").data("count",ai.likes_count).addClass(ai.liked?"unlike":"").html(ai.liked?"Unlike":"Like").removeClass(!ai.liked?"unlike":"")
}else{P.find(".like-anchor").data("count",0).removeClass("unlike").html("Like")}P.find(".user-area .avatar").attr("href",Utils.getFroggyURL(ai.owner_id)).find("img").attr("src",K||Utils.getAvatar48(A,o,e)).end().end().find(".user-area").find(".name").html(S+" "+D).attr("href",Utils.getFroggyURL(ai.owner_id)).end().find(".message").html(Utils.convertLinks(ai.message||"")).end().find(".message-controls").find(".date").html(Utils.getDate(ai.created_time)).end().end().end().find(".the-zone").find(".media-stats").find(".stats-like-count").addClass(aj?"inactive":"").html(ai.likes&&ai.likes>0?ai.likes:"").end().end().find(".media img").removeClass("broken").attr("src",T.large_url||Utils.getPrivateLargeSizeImage(ai.server,ai.filename)).end().end();if(ai.parent_message&&ai.parent_message.owner_first_name&&ai.parent_message.owner_last_name&&ai.parent_message.owner_id!=ai.owner_id){P.find(".user-area .info .second-name").html(ai.parent_message.owner_first_name+" "+ai.parent_message.owner_last_name).attr("href",Utils.getFroggyURL(ai.parent_message.owner_id))}g()};var m=function(){if(!O.length||O.length==1){P.find(".the-zone .go-left, .the-zone .go-right").hide()}else{P.find(".the-zone .go-left, .the-zone .go-right").show()}};var a=function(ai){var ah=P.find(".right-side textarea").is(":focus")||P.find(".global-basic-box .share-text").is(":focus");if(ai.keyCode==Global.keyCodes.escape||ai.which==Global.keyCodes.escape){I()}else{if(ai.keyCode==Global.keyCodes.right||ai.which==Global.keyCodes.right){!ah&&k()}else{if(ai.keyCode==Global.keyCodes.left||ai.which==Global.keyCodes.left){!ah&&U()}}}};!c&&V({});!c&&V({prev:true});n();Q();m();aa();W.on("resize",Q);F.addClass(Global.lightBoxModeClass).append(j,P);l.on("keyup",a)};Global.UserSearch=function(g){var k=null,h=null,j=150,d=g.delay||200,f=g.count||5,l=g.parent,a=null,i=g.input,b=g.minLength||2;var c=function(){i.on("keyup",function(q){var n=q.keyCode||q.which,p=$(this),o=a&&a.find(".active");if(n==Global.keyCodes.escape){p.blur();return}else{if(o&&n==Global.keyCodes.up){o.prev(".user-result").trigger("mouseenter");return}else{if(o&&n==Global.keyCodes.down){o.next(".user-result").trigger("mouseenter");return}else{if(o&&n==Global.keyCodes.enter){window.location=o.length?o.attr("href"):"/search/"+i.val();return}}}}h&&clearTimeout(h);h=setTimeout(function(){var r=i.val();if(r.length<b){a&&a.remove();return}k&&k.abort();m(r)},d)}).on("focus",function(){i.trigger("keyup");l.addClass("search-focused");i.val()==i.data("default_text")&&i.val("")}).on("blur",function(){l.removeClass("search-focused");!i.val()&&i.val(i.data("default_text"));setTimeout(function(){a&&a.remove()},j)})};var e=function(o,n){return $("<a />").on("mouseenter",function(){$(this).addClass("active").siblings(".active").removeClass("active")}).attr("href",Utils.getFroggyURL(o.user_id)).addClass("clearfix user-result"+(n===0?" active":"")).append($("<span />").addClass("avatar").append($("<img />").attr("src",Utils.getAvatar25(o.avatar_server,o.avatar_filename,o.avatar_crop))),$("<span />").addClass("name").html(o.first_name+" "+o.last_name))};var m=function(n){$.when(k=Utils.findUserByName(n,f,null)).then(function(o){a&&a.remove();a=$("<div />").addClass("shadowed-box search-results-parent");if(!o||!o.result||!o.result.length){return}$.each(o.result,function(p){a.append(e(this,p))});a.append($("<a />").addClass("more").html("See more results").attr("href","/search/"+encodeURIComponent(n)));l.append(a)}).fail(function(){a&&a.remove()})};c()};Global.PasswordRecovery=function(){var k=null,l=$(document),i=$(window),g=$("body"),a="To reset your password, please enter your email below.",j="Forgot your password?",m="Enter your email address...",e=$("<div />").addClass("lightbox-dimmed-bg").on("click",function(){d()}),f=Global.getBasicBox({title:j,closeCallback:function(){d()}}).find(".details-area, .controls-area").remove().end().on("click",function(o){o.stopPropagation()}),b=$("<div />").on("click",function(){d()}).css("top",i.scrollTop()).addClass("forgot-container");
var d=function(){l.off("keyup",c);b.remove();e.remove();g.removeClass(Global.lightBoxModeClass)};var c=function(o){if(o.keyCode==Global.keyCodes.escape||o.which==Global.keyCodes.escape){d()}};var h=function(){var p=$(this);if(p.hasClass("disabled-button")){return}var o=f.find("input").val();if(!o||!o.isValidEmail()){k.html("Please enter a valid email address.").removeClass("hidden");return}k.addClass("hidden");p.addClass("disabled-button");$.when(Utils.sendResetPasswordEmail(o)).then(function(q){p.removeClass("disabled-button");if(!q||!q.success){return}d();Utils.triggerGlobalSuccess("An email has been sent to "+o+", check your inbox for further instructions.",7)})};var n=function(){f.find(".input-area").append($("<h3 />").addClass("title").html(a),$("<div />").addClass("error hidden"),$("<div />").addClass("sexy-input-parent border-radius-3 box-shadow-inset").append($("<input />").attr({type:"text",name:"current_email",autocomplete:"on"}).addClass("input dead email").val(m).data("default",m)),$("<div />").addClass("clearfix button").append($("<a />").on("click",h).addClass("blue-button float-right").html("Submit")));return true};n()&&g.append(e,b.append(f)).addClass(Global.lightBoxModeClass);l.on("keyup",c);k=f.find(".error")};Global.LocationAutoComplete=function(g){var i=g.input,l=g.parent,f=g.delay||200,j=200,e=g.maxCount||6,c=2,m=null,o=g.locationText||"",a=null,k=null,h=null;var b=function(p){a=$("<div />").addClass("shadowed-box location-ac-results");$.each(p,function(){var q=this,u=$.trim(q.city.replace("\\N","")),r=$.trim(q.region.replace("\\N","")),t=$.trim(q.country.replace("\\N","")),s=$.trim((u?u+", ":"")+(r?r+", ":"")+(t?t+", ":"")).slice(0,-1);if(!s){return true}a.append($("<a />").on("click",function(){m=[q.latitude,q.longitude];o=s;i.val(s)}).html(s))});l.append(a)};var d=function(){return m};var n=function(){return o};i.on("keyup focus",function(){k&&k.abort();h&&clearTimeout(h);a&&a.remove();var p=i.val();if(!p||p.length<c){m=null;o="";return}l.addClass("location-ac-active");h=setTimeout(function(){$.when(k=Utils.getLocation(p.replace(/,/g,""))).then(function(q){if(!q||!q.success||!q.result||!q.result.length){return}b(q.result.slice(0,Math.min(e,q.result.length)))}).always(function(){l.removeClass("location-ac-active")})},f)}).on("blur",function(){setTimeout(function(){a&&a.remove()},j)});return{getLocation:d,getLocationText:n}};Global.AvatarEditor=function(k){var i=$("body"),j=$(window),a="//desmond.yfrog.com/Himg"+k.server+"/scaled.php?server="+k.server+"&filename="+k.filename+"&xsize=640&ysize=640",b="Drag the corners of the transparent box to crop your profile image.",g=null,h=null,m={},l=150,c=200,o=200,n=k.callback||function(){};function e(r){m={x:Math.round(r.x),y:Math.round(r.y),w:Math.round(r.w),h:Math.round(r.h),x2:Math.round(r.x2),y2:Math.round(r.y2)}}function f(){var s=h.find(".image-area img"),v=s.width(),r=s.height(),t=Math.max(0,v-c)/2,u=Math.max(0,r-o)/2;s.Jcrop({minSize:[Math.min(c,v),Math.min(o,r)],setSelect:[t,u,t+c,u+o],onSelect:e})}function p(){h.find(".wrapper").removeClass("open");setTimeout(function(){h.remove();g.remove();g=h=null;i.removeClass("lb-mode")},l)}function d(){n.call(this,m);p()}function q(){g=$("<div />").attr("id","edit-avatar-bg");h=$("<div />").attr("id","edit-avatar-container").css("top",j.scrollTop()).append($("<div />").addClass("border-radius-5 wrapper").append($("<div />").addClass("border-radius-2 image-area").append($("<img />").attr("src",a).on("load",f)),$("<p />").addClass("instruction").html(b),$("<div />").addClass("clearfix buttons").append($("<a />").addClass("blue-button").html("Done Cropping").on("click",d),$("<a />").addClass("white-button").html("Cancel").on("click",p))))}q();i.addClass("lb-mode").append(g,h);setTimeout(function(){h.find(".wrapper").addClass("open")},l)};Array.prototype.shuffle=function(){return this.sort(function(){return 0.5-Math.random()})};function _l(a){if(!window.console||!window.console.log){return}try{console.log(a)}catch(b){}}String.prototype.isValidEmail=function(){var a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
return this.match(a)};String.prototype.shortenString=function(a){var b=this.length>a?"...":"";return this.substr(0,a-1)+b};if(!window.history){window.history={}}if(!window.history.pushState){window.history.pushState=function(e,d,f){}}JSON.stringify=JSON.stringify||function(e){var d=typeof(e);if(d!="object"||e===null){if(d=="string"){e='"'+e+'"'}return String(e)}else{var f,b,c=[],a=(e&&e.constructor==Array);for(f in e){b=e[f];d=typeof(b);if(d=="string"){b='"'+b+'"'}else{if(d=="object"&&b!==null){b=JSON.stringify(b)}}c.push((a?"":'"'+f+'":')+String(b))}return(a?"[":"{")+String(c)+(a?"]":"}")}};Global.UserFeed=(function(){var i=function(){return(Modernizr.input.multiple)?true:false};var O={},av=$(document),o=$(window),G=$("body"),an=false,L=null,Y="",j="",aD=false,H=Global.groups.friends,a=null,u={},at={},f=150,ag="Comment...",q="Attach Media",aA="/media/private_upload",b=2,aB=5,n=5,K=5,e=3,ac="Could not upload your media.",ar="This file format cannot be uploaded. Please use image files only.",E=G.hasClass("safari")||G.hasClass("opera"),N=[{count:10,endOffset:null,startOffset:null,recentInterval:null,reachedEnd:false},{count:10,endOffset:null,startOffset:null,recentInterval:null,reachedEnd:false},{count:10,endOffset:null,startOffset:null,recentInterval:null,reachedEnd:false},{},{count:10,endOffset:null,startOffset:null,recentInterval:null,reachedEnd:false}],C=$("#status-box"),aI=$("#status-options"),au=$("#status-text"),aa=$("#status-upload"),ax=$("#status-box .attachment-options"),af=$("#status-box .attachment-options form input"),aw=$("#status-results-title h2"),ah=$("#status-share a"),aH=$("#badge-group-feeds.prevented .groups a"),F=$("#badge-group-feeds"),aG=$("#status-results-container"),m=$("#user-details-area .pm"),w=$("#groups-container"),Z=34,P=197,y=350,R=$(".multiple-file-upload"),S=["jpeg","gif","png","jpg"],ae=i(),W=$("#badge-group-feeds"),A=10,s=$(".logged-out-trigger");var v=function(r){var aO={group_id:r.group.id,privilege:r.privilege,message:r.message,media:r.media};if(an&&Global.loggedInUserId!=L){aO.to_user_id=L}$.extend(aO,Global.getUserCredentials());if(Global.devMode){aO.url=Global.APIs.message["new"].uri;aO.type=Global.APIs.message["new"].type}return $.ajax({url:Global.devMode?Global.bridge:Global.APIs.message["new"].uri,type:Global.APIs.message["new"].type,data:aO})};var aC=function(aQ,aO){aO=aO||{};var aS=N[aQ.id],aP={group_id:aQ.id,include_replies:true},aR=Utils.isGlobalGroup(aQ.id),r="";if(Global.devMode){r=Global.bridge}else{if(aR){r=Global.APIs.message["public"].uri}else{if(aO.checkNew){r=Global.APIs.message.recent.uri}else{r=Global.APIs.message.ownerMessages.uri}}}$.extend(aP,Global.getUserCredentials());if(aO.checkNew){aP.start_offset=encodeURIComponent(aS.startOffset)}else{aP.count=aS.count;if(aS.endOffset){aP.offset=encodeURIComponent(aS.endOffset)}}if(Global.devMode){if(aR){aP.url=Global.APIs.message["public"].uri;aP.type=Global.APIs.message["public"].type}else{aP.url=aO.checkNew?Global.APIs.message.recent.uri:Global.APIs.message.ownerMessages.uri;aP.type=aO.checkNew?Global.APIs.message.recent.type:Global.APIs.message.ownerMessages.type}}return $.ajax({url:r,type:"GET",cache:false,data:aP})};var aE=function(aO,aQ){var r=aO.find(".toggle-comments .all");if(r.length==1){var aP=parseInt(r.data("count"))+(aQ||1);r.html("+ View all "+aP+" Comments");r.data("count",aP)}};var h=function(aO){var aS=$(this),aQ=aS.parents(".comment-box:eq(0)"),aU=aQ.find("textarea"),aT=Utils.prepareTextForPosting(aU.val());if(aT==aU.data("default_text")){aT=""}if(aS.hasClass("disabled")||Utils.isToxic(aT)){return}var aR=[],r=aQ.find(".reply-to-parent"),aP=null;aQ.find(".media-wrapper li.media").each(function(){var aV=$(this);aR.push([aV.data("server"),aV.data("filename"),aV.data("bucket"),aV.data("width"),aV.data("height")].join(Global.mediaDelimiter))}).end();if(!aT&&aR.length==0){return}aS.addClass("disabled");if(r.length>0){aP=r.data("reply_to_id")}$.when(Utils.postComment(aT,aP||aO.message_id,aO.privilege,aR.reverse(),aO.media&&aO.media.length==1?aO.media[0]:null)).then(function(aW){aS.removeClass("disabled");if(!aW||!aW.result){return}aQ.find(".media-wrapper").hide().find("li.media").remove().end();aQ.addClass("visible");aQ.find(".expanded").removeClass("expanded");aU.val("").blur().css("height",Global.commentTextAreaMinHeight);aQ=aQ.find(".comments");var aV={message_id:aW.result,message:aT,owner_first_name:Global.loggedInUserFirstName,owner_last_name:Global.loggedInUserLastName,created_time:new Date()-1000,avatar:Global.loggedInUserAvatar,privilege:Global.privileges.group.id,group_id:aO.group_id,owner_id:Global.loggedInUserId,parent_path:aO.message_id,media:aR,avatar_url:Global.loggedInUserAvatar};
if(aP){$.extend(aV,{parent_path:aO.message_id+":"+aP,parent_first_name:r.data("reply_to_first_name"),parent_last_name:r.data("reply_to_last_name"),parent_user_id:r.data("reply_to_user_id")})}aP&&r.remove();aQ.append(B(aV,{parentObj:aO}));aE(aS.parents(".comment-box:eq(0)"));setTimeout(function(){aQ.find(".comment.default-state").removeClass("default-state")},50);aN()})};var M=function(){$(".feed-result, .feed-result .comment").removeClass("options-open").find("> .feed-options-anchor").removeClass("active");av.off("click",aK)};var aK=function(){$(".attachment-options").hide();$("#status-upload, .comment-upload").removeClass("open");M()};var I=function(aO){var aQ=$(this),aP=aO.parent,r=aP.find(".attachment-options");if(aQ.hasClass("disabled-button")){return}r.toggle();aQ.toggleClass("open");aQ.hasClass("open")?av.on("click",aK):av.off("click",aK)};var aq=function(aP,r){var aO=$("<div />").addClass("comment-box border-radius-3"+(r.replies&&r.replies.length&&r.replies.length>0?" visible":"")),aQ=null;aO.append($("<div />").addClass("comments"),$("<div />").addClass("wrapper textarea-parent").append($("<div />").addClass("editable-content-box box-shadow-inset border-radius-3 comment-input-box").append($("<div />").addClass("clearfix input-wrapper").append($("<textarea />").on("focus",Global.textAreaDefaultFocusHandler).on("focus",Global.textAreaAutoGrowFocusHandler).on("focus",Global.textAreaExpandFocusHandler).on("blur",Global.textAreaDefaultBlurHandler).on("blur",Global.textAreaAutoGrowBlurHandler).on("keyup change",Global.textAreaAutoGrowChangeHandler).addClass("autogrow has-default-text").attr("autocomplete","off").data("min_height",Global.commentTextAreaMinHeight).data("add_height",-17).data("default_text",ag).val(ag),$("<a />").addClass("upload comment-upload").attr("title",q).click(function(aR){aR.stopPropagation();clearTimeout(aQ);I.call(this,{parent:$(this).parents(".feed-result:eq(0)")})}).html("Upload"),$("<div />").addClass("attachment-options border-radius-3 shadowed-box").on("click focus","a,input",function(aR){aR.stopPropagation();clearTimeout(aQ);setTimeout(function(){aP.find(".comment-upload").removeClass("open");if(!E){aP.find(".attachment-options").hide()}},Global.editableFocusInterval)}).append($("<div />").addClass("no-user-select").append($("<form />").attr({enctype:"multipart/form-data",method:"post",action:aA}).append($("<input />").hover(function(){aP.find(".attachment-options .computer").addClass("hovered")},function(){aP.find(".attachment-options .computer").removeClass("hovered")}).on("change",function(aR){if(E){aP.find(".attachment-options").hide()}if(!ae){aF.call(this,{parent:aO,groupId:r.group_id})}else{az.call(this,aR,{parent:aO,groupId:H.id})}aR.target.value=""}).attr({type:"file",name:ae?"file[]":"file",multiple:ae?"true":"false",accept:"image/*"})),$("<a />").addClass("computer").html("Attach from your computer")))),$("<div />").addClass("media-wrapper").append($("<div />").addClass("error-container").html(ar),$("<div />").addClass("clearfix progress-parent inactive").append($("<div />").addClass("title").html("Attaching 1 of 1"),$("<div />").addClass("border-radius-5 the-bar").append($("<div />"))),$("<ul />").addClass("clearfix"))),$("<div />").addClass("clearfix comment-button").append($("<a />").click(function(aR){aR.preventDefault();h.call(this,r)}).addClass("blue-button small submit-button").html("Comment"))));return aO};var ao=function(r,aQ){var aR=$(this),aO=aR.parents(".info:eq(0)"),aP=aO.find(".comment-box");if(aP.length==0){aP=aq(aO,r);aO.append(aP)}aP.find("textarea").focus();if(!aP.hasClass("visible")){aP.slideToggle(f,function(){!aQ.ignoreFocus&&aP.find("textarea").focus()})}};var am=function(aT){var aU=aT.message_id,aV=6,aS=$(window),aX=$(document),aW="People that like this...",aR=$("<div />").addClass("liked-dimmed-bg").on("click",function(){aQ()}),r=$("<div />").on("click",function(){aQ()}).addClass("liked-container").css("top",aS.scrollTop()).append($("<div />").addClass("clearfix border-radius-2").append($("<a />").addClass("yf-close-button").attr("title","Close").on("click",function(){aQ()
})).on("click",function(aZ){aZ.stopPropagation()}));var aQ=function(){aX.off("keyup",aP);r.remove();aR.remove();G.removeClass(Global.lightBoxModeClass)};var aP=function(aZ){if(aZ.keyCode==Global.keyCodes.escape||aZ.which==Global.keyCodes.escape){aQ()}};var aY=function(aZ){r.find("> div").append($("<h3 />").html(aW),$("<section />").addClass("results"+(aZ?" too-many":"")))};var aO=function(aZ){return $("<article />").addClass("clearfix liked-result").append($("<a />").addClass("avatar").attr("href",Utils.getFroggyURL(aZ.user_id)).append($("<img />").addClass("border-radius-2").attr("src",Utils.getAvatar48(aZ.avatar_server,aZ.avatar_filename,aZ.avatar_crop))),$("<div />").addClass("info").append($("<a />").addClass("dark-blue").attr("href",Utils.getFroggyURL(aZ.user_id)).html(aZ.first_name+" "+aZ.last_name)))};$.when(Utils.getLikedUsers(aU)).then(function(a0){if(!a0||!a0.result||!a0.result.length||!a0.success){return}aY(a0.result.length>aV);var aZ=r.find(".results");$.each(a0.result.sort(Global.ascSort),function(){aZ.append(aO(this))});G.append(aR,r).addClass(Global.lightBoxModeClass);aX.on("keyup",aP)})};var aj=function(aO,r){return $("<a />").addClass("likes-count").attr("title","Click to see who's liked this").on("click",function(){new am({message_id:r})}).html(aO==1?"1 Person":aO+" People")};var ay=function(r,aP){aP=aP||{};var aS=$(this),aR=parseInt(aS.data("count")),aT=!aS.hasClass("unlike"),aQ=aS.parents(".mr-white:eq(0)"),aO=aS.siblings(".likes-count:eq(0)");aS.toggleClass("unlike").html(aT?"Unlike":"Like");aR+=aT?1:-1;aS.data("count",aR);if(!aT&&aR==0){aO.remove()}else{aO.length==0?aQ.prepend(aj(aR,r.message_id)):aO.replaceWith(aj(aR,r.message_id))}if(!aP.fake){if(r.media&&r.media.length){aT?Utils.likeImage(r.media[r.media.length-1],r.message_id):Utils.unlikeImage(r.media[r.media.length-1],r.message_id)}else{aT?Utils.like(r.message_id):Utils.unlike(r.message_id)}}};var aL=function(aS,aO){var r=[];for(var aP=aS.media.length-1;aP>=0;aP--){var aQ=aS.media[aP].split(Global.mediaDelimiter),aR=$.extend({},aS,{image_id:aS.media[aP]});delete aR.likes;delete aR.liked;delete aR.server;delete aR.filename;aR.server=aQ[0];aR.filename=aQ[1];r.push(aR)}$.when(Utils.getImageInfo(r[aO].image_id)).then(function(aT){if(aT&&aT.result){r[aO]["liked"]=aT.result.liked;r[aO]["likes_count"]=aT.result.likes_count}new Global.LightBox({medias:r,index:r.length-aO-1,noFetch:true,likeCallback:function(aU){ay.call($("#"+aU.message_id).find(".me-gusta:eq(0)")[0],aU,{fake:true})},commentCallback:function(aW,aV,aY){var a0=aW.parent_path||aW.message_id,aU=$("."+a0);if(aU.length==0){return}var aX=aU.find(".info"),aZ=aX.find(".comments");if(aZ.length==0){aX.find(".comment-anchor").trigger("click",{ignoreFocus:true});setTimeout(function(){aX.find(".textarea-parent").removeClass("expanded").find("textarea").blur()},f);aZ=aX.find(".comments")}aZ.append(B({message_id:aV,parent_path:a0,avatar:Global.loggedInUserAvatar,owner_id:Global.loggedInUserId,owner_first_name:Global.loggedInUserFirstName,owner_last_name:Global.loggedInUserLastName,created_time:new Date()-1000,message:aY,privilege:aW.privilege,group_id:aS.group_id}));aE(aX.find(".comment-box"));setTimeout(function(){aZ.find(".default-state").removeClass("default-state")},50)}})})};var X=function(aO,r){r.addClass("preview-mode").append($("<img >").addClass("blown-up").on("load",function(){$(this).addClass("loaded")}).attr("src",Utils.getMediaDisplay(aO.server,aO.filename,{total:0,type:0})))};var p=function(aQ,aV){aV=aV||{};var aR=aQ.server,r=aQ.image||aQ.filename,aP=aQ.bucket,aO=aQ.width,aX=aQ.height,aS=aV.displayMode?aV.displayMode:false,aT="",aU=aV.displayMode&&aV.displayMode.type?aV.displayMode.type:0,aW;if(aS){aT=aV.smallThumb?Utils.getCommentDisplay(aR,r,aS):Utils.getMediaDisplay(aR,r,aS)}else{aT=Utils.getMediaThumbnail(aR,r)}aW=$("<li />").addClass("media"+(aV.hidden?" hidden":"")+(aS?" _"+aS.total:"")).data("server",aR).data("filename",r).data("bucket",aP).data("width",aO).data("height",aX).append($("<img />").attr("src",aT).on("error",function(){$(this).attr("src",Global.emptyImage).addClass("broken").parents("li").addClass("broken")
}).addClass(aS&&!aV.smallThumb?" type"+aS.type:""),$("<a />").addClass("remove").attr("title","Remove").on("click",function(){var aY=$(this).parent();aY.hide();Utils.deleteImages([aR,r,aP,aO,aX].join(Global.mediaDelimiter),H.id);aY.remove()}).html("Remove"));!aV.removable&&aW.find("a.remove").remove().end();if(aV.clickable){aW.find("img").wrap($("<a />").on("click",function(aY){aY.preventDefault();aL.call(this,aQ,aU)})).end()}if(aV.count){aW.addClass("multiple").find("> a").append($("<a />").addClass("count").on("click",function(aY){aY.preventDefault();aL.call(this,aQ,aU)}).html(aV.count+" "+aV.countText))}if(!aV.smallThumb&&aV.total&&aV.total>3&&aU<Math.min(K,aV.total)-1){aW.on("mouseenter",function(){X(aQ,$(this).parent())}).on("mouseleave",function(){var aZ=$(this),aY=aZ.siblings(".blown-up");aY.removeClass("loaded");aZ.parent().removeClass("preview-mode");setTimeout(function(){aY.remove()},400)})}return aW};var ab=function(aW){var a0=aW.media,aO=a0.length,aY=aO==1?"photo":"photos",aR=!aW.unClickable,aP=aW.smallThumb,aT={},aX=[],r;if(!aP){r=aO<=K?aO-1:K-1;aW.parent.prepend('<div class="feed-post-count">Posted '+aO+" "+aY+"</div>")}else{r=aO<=e?aO-1:e-1}for(var aS=r;aS>=0;aS--){var aQ=a0[aS],aV={total:r,type:aS},aZ={clickable:aR,smallThumb:aP},a1=aO==1?"Photo":"Photos",aU={count:aO,countText:a1};aX=aQ.split(Global.mediaDelimiter);if(aX.length<n){continue}aT=$.extend({},aW,{server:aX[0],filename:aX[1],bucket:aX[2],width:aX[3],height:aX[4]});aZ.displayMode=aV;aZ.total=aO;aZ.index=aS;if(aS==r){aZ=$.extend(aZ,aU)}aW.parent.append(p(aT,aZ))}};var B=function(r,aP){if(!r||!r.message_id){return}aP=aP||{};var aO=$("<div />").attr("id",r.message_id).addClass("comment "+r.message_id+(aP.noFading?"":" default-state")+(aP.extraClass?" "+aP.extraClass:"")),aS=Global.loggedInUserId==r.owner_id;aO.append($("<a />").attr("title","Options").on("click",function(aT){aT.stopPropagation();aM.call(this,r)}).addClass("feed-options-anchor"),$("<div />").addClass("clearfix c-wrapper").append($("<div />").addClass("c-avatar no-user-select"+(!aS?" hover-on-me":"")).data("user_id",r.owner_id).data("small",true).append($("<a />").attr("href",Utils.getFroggyURL(r.owner_id)).append($("<img />").addClass("border-radius-2").attr("src",r.avatar||Utils.getAvatar48(r.avatar_server,r.avatar_filename,r.avatar_crop)).error(function(){$(this).attr("src",Utils.getDefaultAvatar())}))),$("<div />").addClass("c-info").append($("<div />").addClass("clearfix c-props").append($("<div />").addClass("float-left c-name"+(!aS?" hover-on-me":"")).data("user_id",r.owner_id).data("name",true).append($("<a />").addClass("dark-blue").attr("href",Utils.getFroggyURL(r.owner_id)).html(r.owner_first_name+" "+r.owner_last_name))),$("<div />").addClass("c-message").html(Utils.convertLinks(r.message)),$("<ul />").addClass("clearfix medias"),$("<div />").addClass("yt-parent child pending").append(J()),$("<div />").addClass("clearfix c-message-controls no-user-select mr-white").append($("<a />").addClass("reply-to").html("Reply to "+r.owner_first_name).click(function(aT){aT.preventDefault();al.call(this,r,aO.parents(".comment-box:eq(0)"))}),$("<a />").html(r.liked?"Unlike":"Like").data("count",r.likes||0).addClass("me-gusta"+(r.liked?" unlike":"")).click(function(aT){aT.preventDefault();ay.call(this,r)}),$("<a />").html("Share").addClass("c-share-anchor").click(function(){new Global.ShareBox({candid:r})}),$("<span />").addClass("c-date auto-refresh-date").attr("rel",r.created_time).html("<span>"+Utils.getDate(r.created_time)+"</span>")))));var aQ=Utils.extractYoutubeLinks(r.message);if(aQ){aO.find(".c-info .yt-parent").data("url",aQ).prepend(k())}else{aO.find(".c-info .yt-parent").remove()}!Global.isPublic(r.privilege)&&aO.find(".c-message-controls .c-share-anchor").remove().end();if(r.likes&&parseInt(r.likes)>0){aO.find(".c-message-controls").prepend(aj(r.likes,r.message_id)).end()}if(Global.loggedInUserId==r.owner_id){aO.find(".me-gusta, .reply-to/*, .c-message-controls .c-share-anchor*/").remove();
var aR=aO.find(".mr-white");!aR.children().length&&aR.remove()}if(r.media&&r.media.length&&r.media.length>0){ab($.extend(r,{parent:aO.find(".medias:eq(0)"),parent_message:aP.parentObj,smallThumb:true}))}else{aO.find(".medias").remove()}Global.loggedInUserId!=r.owner_id&&aO.find("> .feed-options-anchor").remove();!r.message&&aO.find(".c-message").remove();if(r.parent_user_id&&r.parent_path.split(":").length>1){aO.find(".c-name").append($("<span />").addClass("dark-blue divider"));$("<div />").addClass("float-left hover-on-me c-name replied").data("user_id",r.parent_user_id).data("name",true).append($("<a />").addClass("dark-blue").attr("href",Utils.getFroggyURL(r.parent_user_id)).html(r.parent_first_name+" "+r.parent_last_name)).insertAfter(aO.find(".c-name"))}return aO};var U=function(r){return $("<div />").addClass("clearfix reply-to-parent").data("reply_to_id",r.message_id).data("reply_to_first_name",r.owner_first_name).data("reply_to_last_name",r.owner_last_name).data("reply_to_user_id",r.owner_id).append($("<a />").addClass("dark-blue").attr("href",Utils.getFroggyURL(Global.loggedInUserId)).html(Global.loggedInUserFirstName+" "+Global.loggedInUserLastName),$("<a />").addClass("dark-blue target").attr("href",Utils.getFroggyURL(r.owner_id)).html(r.owner_first_name+" "+r.owner_last_name),$("<a />").addClass("yf-close-button").attr("title","Click to remove").on("click",function(){$(this).parent().remove()}))};var al=function(r,aO){var aP=aO.find(".reply-to-parent");if(aP.length<1){U(r).prependTo(aO.find(".textarea-parent"))}else{aP.replaceWith(U(r))}aO.find(".textarea-parent textarea").focus()};var z=function(r,aP){r.toggleClass("showing");if(r.hasClass("showing")){aP.find(".comment.extra.default-state").show();$(this).removeClass("default-state")}else{var aO=aP.find(".comment.extra");aO.addClass("default-state");aO.hide()}};var l=function(aO){M();var r=$("#group-"+H.id+" ."+aO.message_id),aP="Are you sure you want to delete this "+(aO.parent_path?"comment":"post")+"?";$.when(Utils.confirmAction(aP)).then(function(aQ){if(aQ.confirmed){at[aO.message_id]=true;$.when(Utils.deleteMessage(aO.message_id)).then(function(){r.addClass("default-state").delay(f).slideUp(f,function(){$(this).remove()})});aO.parent_path&&aE($("#"+aO.parent_path).find(".comment-box"),-1)}})};var Q=function(aR,aO){M();var aQ=$("#group-"+H.id+" ."+aR.message_id),r=aR.owner_first_name?'<a class="dark-blue" href="'+Utils.getFroggyURL(aR.owner_id)+'">'+aR.owner_first_name+(aO?"'s":"")+"</a>":"this person",aP="Are you sure you want to "+(aO?"hide "+r+" posts?":"block "+r+"?");$.when(Utils.confirmAction(aP)).then(function(aS){if(aS.confirmed){$.when(aO?Utils.hideUser(aR.owner_id):Utils.blockUser(aR.owner_id)).then(function(){aG.find(".feed-result").filter(function(){return $(this).data("owner_id")==aR.owner_id}).addClass("default-state").delay(f).slideUp(f,function(){$(this).remove()})})}})};var ak=function(aO){var aQ=Global.loggedInUserId==aO.owner_id,aP=aO.owner_first_name||"this person",r=$("<div />").on("click","a",function(aR){aR.stopPropagation()}).addClass("feed-options border-radius-3").append($("<div />").addClass("no-user-select").append($("<a />").addClass("delete").html("Delete this "+(aO.parent_path?"comment":"post")).on("click",function(){l.call(this,aO)}),$("<a />").addClass("hide").html("Hide "+aP+"'s posts").on("click",function(){Q.call(this,aO,true)}),$("<a />").addClass("block").html("Block "+aP).on("click",function(){Q.call(this,aO,false)})),$("<a />").html("View Post").attr("href",Utils.getMessageURI(aO.message_id)));aQ&&r.find(".hide, .block").remove();!aQ&&r.find(".delete").remove();return r};var aM=function(aO){var aP=$(this),r=$("#group-"+H.id+" ."+aO.message_id);$(".feed-result, .feed-result .comment").removeClass("options-open").find("> .feed-options-anchor").removeClass("active");aP.toggleClass("active");r.find("> .feed-options").length==0&&r.append(ak(aO));r.toggleClass("options-open");aP.hasClass("active")?av.on("click",aK):av.off("click",aK)
};var V=function(aY,aT){if(!aY||!aY.message_id||!aY.owner_id){return}aT=aT||{};if(Utils.isToxic(aY.message)){return}var aV=$("<article />").attr("id",aY.message_id).data("owner_id",aY.owner_id).addClass("clearfix feed-result "+aY.message_id+(aT.noFading?"":" default-state")+(aT.extraClass?" "+aT.extraClass:"")+(aY.deleted?" deleted":"")),aR=aY.replies&&aY.replies.length&&aY.replies.length>0,aQ=Global.loggedInUserId==aY.owner_id,aX="";if(aY.privilege==Global.privileges.group.id){aX=Utils.getGroupById(aY.group_id).name}else{if(aY.privilege==Global.privileges.social.id){aX="Business, Friends, Family"}else{aX="All Groups & The Public"}}aV.append($("<a />").attr("title","Options").on("click",function(aZ){aZ.stopPropagation();aM.call(this,aY)}).addClass("feed-options-anchor"),$("<div />").addClass("avatar no-user-select"+(aQ?"":" hover-on-me")).data("user_id",aY.owner_id).append($("<a />").attr("href",Utils.getFroggyURL(aY.owner_id)).append($("<img />").addClass("border-radius-2").attr("src",aY.avatar||Utils.getAvatar48(aY.avatar_server,aY.avatar_filename,aY.avatar_crop)))),$("<div />").addClass("info").append($("<div />").addClass("clearfix props").append($("<div />").addClass("float-left name"+(aQ?"":" hover-on-me")).data("user_id",aY.owner_id).append($("<a />").addClass("dark-blue").attr("href",Utils.getFroggyURL(aY.owner_id)).html(aY.owner_first_name+" "+aY.owner_last_name))),$("<div />").addClass("message").html(Utils.convertLinks(aY.message)),$("<ul />").addClass("clearfix medias"),$("<div />").addClass("yt-parent pending").append(J()),$("<div />").addClass("sharing"),$("<div />").addClass("clearfix message-controls no-user-select mr-white").append($("<a />").html("Comment").addClass("comment-anchor").on("click",function(a0,aZ){a0.preventDefault();ao.call(this,aY,aZ||{})}),$("<a />").html(aY.liked?"Unlike":"Like").data("count",aY.likes||0).addClass("me-gusta"+(aY.liked?" unlike":"")).click(function(aZ){aZ.preventDefault();ay.call(this,aY)}),$("<a />").html("Share").addClass("share-anchor").click(function(){new Global.ShareBox({candid:aY})}),$("<span />").addClass("date").append($("<a />").attr("href",Utils.getMessageURI(aY.message_id)).attr("rel",aY.created_time).addClass("auto-refresh-date").html("<span>"+Utils.getDate(aY.created_time)+"</span>")),$("<span />").attr("title",aX).addClass("status "+Utils.getPrivilegeById(aY.privilege).name.toLowerCase()+" "+Utils.getGroupById(aY.group_id).name.toLowerCase()),$("<a />").html(function(){if(window.location.href.indexOf("message")==-1){return"View Post"}else{return""}}).addClass("view-post").attr("href",Utils.getMessageURI(aY.message_id)))));var aW=Utils.extractYoutubeLinks(aY.message);if(aW){aV.find(".info > .yt-parent").data("url",aW).prepend(k())}else{aV.find(".info > .yt-parent").remove()}Global.loggedInUserId==aY.owner_id&&aV.find(".me-gusta").remove().end();!Global.isPublic(aY.privilege)&&aV.find(".message-controls .share-anchor").remove().end();if(aY.likes&&parseInt(aY.likes)>0){aV.find(".message-controls").prepend(aj(aY.likes,aY.message_id)).end()}if(aR){var aU=aV.find(".info");aU.append(aq(aU,aY));aU=aV.find(".comments");aY.replies.sort(Global.ascSort);for(var aS=Math.max(0,aY.replies.length-b);aS<aY.replies.length;aS++){aU.append(B(aY.replies[aS],{parentObj:aY,noFading:aT.noFading}))}setTimeout(function(){aU.find(".comment.default-state").removeClass("default-state");if(aY.replies.length>b){aU.parent().addClass("multiple-comments").prepend($("<a />").addClass("toggle-comments no-user-select incomplete").append($("<span />").append($("<span />").data("count",aY.replies_count).addClass("all").html("+ View all "+aY.replies_count+" Comments"),$("<span />").addClass("hide").html("- Hide Comments"))).click(function(a0){a0.preventDefault();var aZ=$(this);if(aZ.hasClass("loading")){return}if(aZ.hasClass("incomplete")){aZ.removeClass("incomplete").addClass("loading");$.when(Utils.getReplies(aY.group_id,aY.message_id,aY.owner_id)).then(function(a1){aZ.removeClass("loading");if(!a1||!a1.success||!a1.result||!a1.result.length||a1.result.length==0){return
}$.each(a1.result.sort(Global.descSort),function(){if(at[this.message_id]||$("#group-"+H.id+" #"+this.message_id).length){return true}aU.prepend(B(this,{extraClass:"extra",parentObj:aY}))});z(aZ,aU);aN()})}else{z(aZ,aU)}}))}},50)}if(aY.share){var r=aY.share;aV.find(".sharing").append($("<div />").addClass("clearfix share-row").append($("<p />").addClass("via"),$("<div />").addClass("clearfix props").append($("<a />").addClass("avatar").attr("href",Utils.getFroggyURL(r.owner_id)).append($("<img />").addClass("border-radius-2").attr("src",Utils.getAvatar25(r.avatar_server,r.avatar_filename,r.avatar_crop))),$("<div />").addClass("border-radius-3 info").append($("<p />").addClass("message").html(Utils.convertLinks(r.message)),$("<ul />").addClass("clearfix medias")))));if(r.media&&r.media.length&&r.media.length>0){var aP=r.media.length;aV.find(".sharing .via").html("Shared "+(aP==1?"a photo":aP+" photos")+' via <a href="'+(Utils.getFroggyURL(r.owner_id))+'">'+r.owner_first_name+" "+r.owner_last_name+"</a>");var aO=aV.find(".sharing .medias");ab($.extend(r,{parent:aO}))}else{aV.find(".sharing .via").html('Shared a post via <a href="'+(Utils.getFroggyURL(r.owner_id))+'">'+r.owner_first_name+" "+r.owner_last_name+"</a>").end().find(".sharing .medias").remove()}}else{aV.find(".sharing").remove()}if(aY.media&&aY.media.length&&aY.media.length>0){ab($.extend(aY,{parent:aV.find(".medias:eq(0)")}));aY.media.length>K&&aV.find(".medias, .message-controls").addClass("multiple-media")}else{aV.find(".medias:eq(0)").remove().end()}aY.deleted&&aV.find("> .feed-options-anchor").remove()&&aV.find(".me-gusta:eq(0)").remove()&&aV.find(".share-anchor:eq(0)").remove();!aY.message&&aV.find(".message").remove();if(aY.to_user_id&&aY.owner_id!=aY.to_user_id){aV.find(".props").append($("<span />").addClass("dark-blue divider").html("&gt;"));$("<div />").addClass("float-left name replied"+(aY.to_user_id==Global.loggedInUserId?"":" hover-on-me")).data("user_id",aY.to_user_id).data("name",true).append($("<a />").addClass("dark-blue").attr("href",Utils.getFroggyURL(aY.to_user_id)).html(aY.to_user_first_name+" "+aY.to_user_last_name)).insertAfter(aV.find(".props .divider"))}return aV};var J=function(){return $("<div />").addClass("overlay-wrapper").append($("<div />").addClass("overlay-bg"),$("<div />").addClass("overlay").append($("<figure />").addClass("play"),$("<div />").addClass("details").append($("<h2 />"),$("<h3 />"))))};var k=function(){return $("<img />").attr("src",Global.emptyImage)};var aN=function(){G.find(".yt-parent.pending").each(function(){var aP=$(this),aO={url:aP.data("url")},r=aP.hasClass("child");if(!r){aO.width=440;aO.height=330}$.when(Utils.getYoutubeLinkData(aO)).then(function(aS){if(!aS||!aS.result){aP.remove();return}var aR=aS.result.html.replace(/&feature=oembed/gi,"&feature=oembed&autoplay=1"),aQ=((r?y:aS.result.width)-aS.result.thumbnail_width)/2,aT=((r?P:aS.result.height)-aS.result.thumbnail_height)/2;if(r){aR=aR.replace(/width="\d*"/gi,'width="'+y+'"').replace(/height="\d*"/gi,'height="'+P+'"')}aP.attr("title",aS.result.title).find("img").css({background:"url("+aS.result.thumbnail_url+") no-repeat "+aQ+"px "+aT+"px",width:r?y:aS.result.width,height:r?P:aS.result.height}).end().find(".details h2").html(Utils.shortenText(aS.result.title,20)).end().find(".details h3").html("www.youtube.com").end().on("click",function(){aP.html(aR)})}).always(function(){aP.toggleClass("pending processed")}).fail(function(){aP.remove()})})};var c=function(aO,r){return $("<a />").addClass("newer-messages border-radius-3 shadowed-box no-user-select").data("count",r).click(function(aP){aP.preventDefault();setTimeout(function(){aO.find(".feed-result.extra.default-state").slideDown(f,function(){$(this).removeClass("default-state")})},50);$(this).remove()}).append($("<span />").addClass("plus").html("+"),$("<span />").addClass("text").html(r+" New "+(r==1?"Post":"Posts")))};var x=function(aR){var aO=aR.id,aQ=$("#group-"+aO),r=aQ.find(".newer-messages"),aP=0;$.when(aC(aR,{checkNew:true})).then(function(aS){if(aS&&aS.error&&aS.error.error_code==10){clearInterval(N[aO].recentInterval)
}if(!aS||!aS.result||!aS.result.length||aS.result.length==0){return}N[aO].startOffset=aS.start_offset;$.each(aS.result.sort(Global.ascSort),function(){if(!this||!this.message_id){return true}var aU=this;if(u[this.message_id]){if(!this.replies||!this.replies.length||this.replies.length==0){return true}$.each(this.replies.sort(Global.ascSort),function(){var aV=$("#"+this.message_id);if(aV.length==1){return true}var aW=$("."+aU.message_id).find(".info"),aX=aW.find(".comments");if(aX.length==0){aW.append(aq(aW,aU));aX=aW.find(".comments")}aX.append(B(this,{extraClass:"new",parentObj:aU}));aE(aW.find(".comment-box"))});aQ.find(".comment.new.default-state").slideDown(f,function(){$(this).removeClass("new default-state")})}else{u[aU.message_id]=true;aP++;if(r.length==1&&r.is(":visible")){var aT=V(aU,{extraClass:"extra"});aT&&aT.insertAfter(r)}else{aQ.prepend(V(aU,{extraClass:"extra"}))}}});if(aP==0){return}if(r.length==1){r.replaceWith(c(aQ,r.data("count")+1))}else{aQ.prepend(c(aQ,aP))}aN()}).fail(function(){clearInterval(N[aO].recentInterval)})};var ap=function(aQ){var r=aQ.id,aP=$(this),aO=$("#group-"+r);if(aP.hasClass("working")){return}aP.addClass("working");$.when(an?Utils.getUserMessages(r,L,Global.privileges["public"].id,N[r].count,N[r].endOffset):aC(aQ)).then(function(aU){var aR=aU.result.length,aT=aU.result.sort(Global.descSort),aS;aP.removeClass("working");if(!aU||!aU.result||!aU.result.length||aU.result.length==0){N[r].reachedEnd=true;aP.remove();return}$.each(aU.result.sort(Global.descSort),function(){if(!this||!this.message_id||aO.find("#"+this.message_id).length){return true}u[this.message_id]=true;var aV=V(this);aV&&aV.insertBefore(aP)});N[r].endOffset=aU.end_offset;setTimeout(function(){aO.find(".feed-result.default-state").removeClass("default-state");if(!aU.end_offset){N[r].reachedEnd=true;aP.remove()}},50);aN()})};var ai=function(aO,aR,aQ,aP){var r=aR.id;aQ.empty();if(!aO||!aO.result||!aO.result.length||aO.result.length==0){N[r].reachedEnd=true;aQ.html('<div class="nothing">There are no messages in this group.</div>');return}$.each(aO.result.sort(Global.descSort),function(){if(!this||!this.message_id||aQ.find("#"+this.message_id).length){return true}u[this.message_id]=true;aQ.append(V(this,{noFading:aP}))});N[r].endOffset=aO.end_offset;N[r].startOffset=aO.start_offset;if(!an){N[aR.id].recentInterval=setInterval(function(){x(aR)},aB*1000)}setTimeout(function(){aQ.find(".feed-result.default-state").removeClass("default-state");if(aO.end_offset){aQ.append($("<a />").addClass("older-messages border-radius-3 shadowed-box no-user-select").click(function(aS){aS.preventDefault();ap.call(this,aR)}).append($("<span />").addClass("plus").html("+"),$("<span />").addClass("text").html("View Older Posts"),$("<span />").addClass("text-loading").html("Loading Older Posts")))}else{N[r].reachedEnd=true}},50);aN()};var t=function(aP){var r=aP.id,aO=$("#group-"+r);if(aO.hasClass("loaded")){return}else{aO.addClass("loaded")}$.when(an?Utils.getUserMessages(r,L,Global.privileges["public"].id,N[r].count,N[r].endOffset):aC(aP)).then(function(aQ){ai(aQ,aP,aO)})};var aF=function(aP){var aQ=aP.parent,aT=aQ.find(".progress-parent"),aR=aQ.find("form"),aO=aQ.find(".upload"),r=aQ.find(".media-wrapper ul"),aS=aQ.parent().find(".submit-button");aQ.removeClass("upload-error");r.parent().show();if(!Utils.isValidUploadType($.trim(aR.find('input[type="file"]').val()))){aQ.addClass("upload-error");return}setTimeout(function(){aT.removeClass("inactive")},50);aR.ajaxSubmit({dataType:"json",data:{group_id:aP.groupId},success:function(aU){aO.removeClass("disabled-button");aS.removeClass("disabled");if(!aU||aU.error||!aU.success||!aU.result){aT.addClass("inactive");Utils.triggerGlobalInformer((aU&&aU.error)||ac,5,{isError:true});return}aT.addClass("done");setTimeout(function(){aT.toggleClass("done inactive");r.append(p(aU.result,{hidden:true,removable:true,smallThumb:aP.smallThumb})).find(".hidden").slideDown(f,function(){$(this).removeClass("hidden")}).end()
},500)},error:function(aU){aO.removeClass("disabled-button");aS.removeClass("disabled");Utils.triggerGlobalInformer(ac,5,{isError:true})},beforeSubmit:function(){aS.addClass("disabled");aO.addClass("disabled-button")},resetForm:true})};var T=function(){au.one("focus",function(){var r=$(this);r.data("min_height",Z);C.addClass("expanded").parent().addClass("expanded")});aa.click(function(r){r.stopPropagation();clearTimeout(a);I.call(this,{parent:C});if(!ae){R.attr("name","file")}});ax.on("click focus","a,input",function(r){r.stopPropagation();clearTimeout(a);setTimeout(function(){aa.removeClass("open");if(!E){ax.hide()}},Global.editableFocusInterval)});af.hover(function(){ax.find("a.computer").addClass("hovered").end()},function(){ax.find("a.computer").removeClass("hovered").end()}).on("change",function(r){E&&ax.hide();if(this.name=="file"){aF.call(this,{parent:C,groupId:H.id,smallThumb:true});return}if(this.name=="file[]"){az.call(this,r,{parent:C,groupId:H.id,smallThumb:true});r.target.value="";return}});aH.click(function(aT,aQ){aT.preventDefault();an&&m.removeClass("active")&&w.removeClass("hidden");var aS=$(this);if(aS.hasClass("active")||aS.hasClass("pm")){return}var r=aS.siblings(".active:eq(0)"),aR=Utils.getGroupById(aS.data("group_id")),aP=!au.val()||au.val()==au.data("default_text"),aO="Say something to your "+aR.name+(aR.id==Global.groups.business.id?" connections":"")+" or post a photo...";if(an&&L!=Global.loggedInUserId){aO="Say something to "+Y+" or post a photo..."}F.removeClass().addClass(aR.name.toLowerCase()+" prevented");w.removeClass().addClass(aR.name.toLowerCase());$("#group-"+r.data("group_id")).hide();$("#group-"+aS.data("group_id")).show();aP&&au.val(aO);au.data("default_text",aO);aI.find(".option:eq(0)").html(aR.name+" Only");if(parseInt(aI.find(".selected").data("value"))===0){aI.find(".selected").html(aR.name+" Only")}H=aR;r.removeClass("active");aS.addClass("active");aw.html(aR.name);t(aR);if(!aQ||!aQ.noPush){history.pushState({className:H.name.toLowerCase()},H.name+" Channel",aS.attr("href"))}if(!aS.hasClass("synced")){aS.addClass("synced");Utils.updateChannelTimestamp(H.id)}});o.on("popstate",function(r){if(r&&r.originalEvent&&r.originalEvent.state&&r.originalEvent.state.className){aH.parent().find("."+r.originalEvent.state.className).trigger("click",{noPush:true})}});an&&m.on("click",function(){if(m.hasClass("active")){return}aH.removeClass("active");w.addClass("hidden");m.addClass("active")});ah.on("click",function(aS){aS.preventDefault();var aT=Utils.prepareTextForPosting(au.val()),aR=$(this),aQ=H,r=aI.find(".yf-drop-down > .selected").data("value"),aO=$("#group-"+aQ.id);if(aT==au.data("default_text")){aT=""}if(aR.hasClass("disabled")||Utils.isToxic(aT)){return}var aP=[];C.find(".media-wrapper li.media").each(function(){var aU=$(this);aP.push([aU.data("server"),aU.data("filename"),aU.data("bucket"),aU.data("width"),aU.data("height")].join(Global.mediaDelimiter))}).end();if(!aT&&aP.length==0){return}ah.addClass("disabled");$.when(v({message:aT,group:aQ,media:aP.reverse(),privilege:r})).then(function(aV){ah.removeClass("disabled");if(!aV||!aV.result){if(aV.error&&aV.error.error_code){if(an&&aV.error.error_code==5){Utils.triggerGlobalInformer("You are not connected to this person via "+aQ.name+" group connection. Please request to connect prior to posting.",5)}else{Utils.triggerGlobalInformer(aV.error.error_message||"Could not complete your request at this time, try again later.",3.5)}}return}u[aV.result]=true;C.find(".media-wrapper").hide().find("li.media").remove().end();au.val("").blur().css("height","auto");aI.find(".yf-drop-down > .selected").data("value",0).html(H.name+" Only");aO.find(".nothing").remove();var aU={message_id:aV.result,message:aT,owner_first_name:Global.loggedInUserFirstName,owner_last_name:Global.loggedInUserLastName,created_time:new Date()-1000,avatar:Global.loggedInUserAvatar,privilege:r,group_id:aQ.id,owner_id:Global.loggedInUserId,avatar_url:Global.loggedInUserAvatar,media:aP};
an&&Global.loggedInUserId!=L&&$.extend(aU,{to_user_id:L,to_user_first_name:Y,to_user_last_name:j});aO.prepend(V(aU));setTimeout(function(){aO.find(".feed-result.default-state").removeClass("default-state")},50);aN()})});s.on("click",function(){Utils.signupTrigger()})};var az=function(aU,aV){var aY=aV.parent,aO=aY.find(".media-wrapper > ul"),a1=aY.parent().find(".submit-button"),r=aU.target.files?aU.target.files:window.event.srcElement.files,aT=r&&r.length>0?r.length:false,aP=[],aS,aX="",aR;aY&&aY.removeClass("upload-error");a1.addClass("disabled");if(r&&aT){aO.parent().show();for(aR=0;aR<aT;aR++){var aW=r[aR],a2=aW.type.split("/")[0]?aW.type.split("/")[0]:"",aQ=aW.type.split("/")[1]?aW.type.split("/")[1]:"",a0=!!(a2=="image"),aZ=a2&&$.inArray(aQ,S)!==-1?true:false;if(a0&&aZ){aP.push(aW)}else{aY.addClass("upload-error");continue}}aS=aP.length;aX+='					<li class="uploaded-image border-radius-5 box-shadow-inset"></li>					<img src="/images/loader.gif" class="float-left uploaded-image">					<span class="uploaded-image">'+aS+" of "+aS+" files uploading... </span>					";aO.prepend(aX);setTimeout(function(){aO.children(".uploaded-image").addClass("loading")},10);D(aP,aV)}};var D=function(aS,aQ){var r=aS.length,aP=aQ.parent.parent().find(".submit-button"),aO=new FormData(),aR;for(aR=0;aR<r;aR++){aO.append(aR,aS[aR])}aO.append("group_id",aQ.groupId);if(!aO){aQ.parent.find('input[type="file"]').val("");aP.removeClass("disabled-button");Utils.triggerGlobalInformer(ac,5,{isError:true});return}$.ajax({url:"/media/private_upload",data:aO,cache:false,contentType:false,processData:false,type:"POST",success:function(aU){var aT=d(aU);aP.removeClass("disabled-button");g(ad(aT),aQ)},error:function(aT){aQ.parent.find('input[type="file"]').val("");aP.removeClass("disabled-button");Utils.triggerGlobalInformer(ac,5,{isError:true})}})};var d=function(r){r=r.indexOf("<textarea>")==-1?r.split("|"):r.replace(/(<\/textarea>)/gim,"|").replace(/(<textarea>)/gim,"").split("|");r.pop();return r};var ad=function(aR){var r=aR.length,aO=[],aP;for(aP=0;aP<r;aP++){var aQ=aR[aP];aQ=$.parseJSON(aQ);aO.push(aQ)}return aO};var g=function(aT,aQ){var aO=aT.length,aS=aQ.parent,aU=aS.find(".media-wrapper > ul"),aP=aS.parent().find(".submit-button"),aR;if(!aT||!aQ){aU.children(".uploaded-image").remove();aP.removeClass("disabled");Utils.triggerGlobalInformer(ac,5,{isError:true});return}for(aR=0;aR<aO;aR++){var r=p(aT[aR].result,{hidden:true,removable:true,smallThumb:true});aU.append(r)}setTimeout(function(){aU.children(".uploaded-image").remove();aU.children(".media").removeClass("hidden")},10);aP.removeClass("disabled")};var aJ=function(){var aP=W.find(".top-nav h2"),aO=W.find("a.photos span.text"),r=aP.height()>16?aP.text().replace(Y,Y.shortenString(A)):false;r&&aP.html(r)&&aO.html(r.replace("Feeds","Photos"))};O.init=function(){T();!aD&&t(H);Utils.autoRefreshDates(10);Utils.assignScrollListener(function(){if(N[H.id].reachedEnd){return}$("#group-"+H.id).find(".older-messages").trigger("click")});an&&aJ();!Global.loggedInUserId&&G.on("click",".user-reg-hook",function(){Utils.signupTrigger()});return this};O.setRefreshInterval=function(r){if(r){aB=r}return this};O.setProfileMode=function(r){an=r;return this};O.setProfileUserId=function(r){L=r;return this};O.setProfileUserFirstName=function(r){Y=r;return this};O.setProfileUserLastName=function(r){j=r;return this};O.setFetchedFirstSet=function(r){aD=r;return this};O.setGroupStartOffset=function(r,aO){N[r].startOffset=aO;return this};O.setGroupEndOffset=function(r,aO){N[r].endOffset=aO;return this};O.renderResultsFromJSON=function(r){ai($.parseJSON(r),H,$("#group-"+H.id),true);return this};O.setGroupById=function(r){H=Utils.getGroupById(r);return this};return O})();Global.UserPost=(function(){var b=5;function a(f){var c=$.parseJSON(f).result,e=c.image_id.split(Global.mediaDelimiter);if(!e||!c.message||!c.message.message_id||!e.length||e.length<b){return}var d=$.extend({},c.message,{width:e[3],height:e[4],server:e[0],filename:e[1],bucket:e[2],large_url:Utils.getPrivateLargeSizeImage(e[0],e[1]),image_id:c.image_id});if(c.parent_message){d.parent_message=c.parent_message}delete d.likes;delete d.likes_count;delete d.liked;d.likes=c.likes||c.likes_count;d.liked=c.liked;new Global.LightBox({medias:[d],index:0})}return{triggerLightBox:a}})();Global.SearchResults=(function(){var e="",d="",g=16,h=$("#site-right .older-messages"),l=$("#search-results");function c(m){e=m;return this}function j(m){d=m;return this}function a(m){g=m;return this}function f(){h.on("click",i);Utils.assignScrollListener(function(){h.trigger("click")})}function b(m){return $("<article />").addClass("clearfix result").append($("<a />").addClass("hover-on-me avatar").attr("href",Utils.getFroggyURL(m.user_id)).data("user_id",m.user_id).append($("<img />").addClass("border-radius-2").attr("src",Utils.getAvatar48(m.avatar_server,m.avatar_filename,m.avatar_crop))),$("<div />").addClass("info").append($("<div />").addClass("hover-on-me name").data("user_id",m.user_id).append($("<a />").addClass("dark-blue").attr("href",Utils.getFroggyURL(m.user_id)).html(m.first_name+"&nbsp;"+m.last_name))))}function i(){var m=$(this);if(!e){m.remove();return}if(m.hasClass("working")){return}m.addClass("working");$.when(Utils.findUserByName(encodeURIComponent(d),g,e)).then(function(n){if(!n||!n.success||!n.result||!n.result.length){m.remove();return}!n.end_offset&&m.remove();e=n.end_offset;$.each(n.result,function(){l.append(b(this))})}).always(function(){m.removeClass("working")}).fail(function(){m.remove()})}function k(){f()}return{setOffset:c,init:k,setTerm:j,setCount:a}})();var _ticker,isSearch=false;Global.Connect=(function(N){var av={},X=$("#email-invite-stage"),aq=$("#email-trigger"),q=$("#email-invite-setup"),a=$("#single-email-invite input"),S=$("#single-email-trigger"),H=/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/,b=$("#linked-in-stage"),an=$("#link-trigger"),v=$("#search-contacts"),ap=$("#searched-stage"),m=$("#search-result-count"),ay=$("#single-email-invite .single-email"),ac=$("#single-email-invite .hide-result"),t=$("#send-indv-emails"),Y=$("#single-email-message"),A=$("#status-message"),at=$("#single-email-invite"),ao=$("#cancel-indv-emails"),y=$("#reset-everything"),J=$(".single-email .yf-drop-down-group"),ai=J.find(".check-me"),az=$(document),r,s,ag=$("#facebook-friends"),o=$("#fb-trigger"),ad=$("#site-right .connect-container"),R="",F=[],w=null,n=200;av.begin=function(){p()};var p=function(){aq.on("click",function(){var aA=$(this),aB=aA.data("type");L(aB);_ticker="gmail"});J.on("click",function(aB){aB.stopPropagation();var aA=$(this);if(!aA.hasClass("expanded")){az.on("click",ab)}aA.toggleClass("expanded");if(u()){aA.find(".selected").html("Selected")}});ai.on("click",function(aE){aE.stopPropagation();var aD=$(this),aB=aD.children(".yf-check-box"),aC=aB.data("group_id"),aA=aD.parents(".yf-drop-down-group").prev(".sexy-input-parent").find(".input").val();if(aB.hasClass("checked")){aB.removeClass("checked")}else{aB.addClass("checked")}});y.on("click",function(aA){aA.preventDefault();if(isSearch){if(_ticker=="link"){ap.hide();b.show();m.hide();isSearch=false;return}if(_ticker=="gmail"){ap.hide();X.show();m.hide();isSearch=false;return}}else{window.location.reload(true);return}});X.on("click",".confirm",function(){var aI=$(this),aC=aI.parents(".item"),aH=aI.data("email"),aA=aC.find(".checked"),aE=aC.find(".text-message").val(),aF="An error occurred.",aB=[],aD=[],aG;aA.each(function(){var aJ=$(this),aK=aJ.data("group_id");aB.push(aK)});aB=aB.join(",");$.when(Utils.sendEmail(aH,aB,aE)).then(function(aJ){if(!aJ||!aJ.success==true){Utils.triggerGlobalInformer(aF,5,{isError:true})}else{Utils.triggerGlobalSuccess("Your invite was sent successfully!",5);aC.fadeOut("fast")}})}).on("click",".moar",function(){var aB=$(this),aA=aB.data("offset"),aC=aB.data("length");ah(aA,aC);aB.fadeOut("fast")}).on("click",".btn",function(){var aC=$(this),aB=aC.data("email"),aA=aC.parents(".item").find(".send-message"),aD=aA.siblings(".text-message");aC.hide();aD.slideDown("fast");aA.show()}).on("click",".abort",function(){var aB=$(this),aA=aB.parents(".item");aB.hide().siblings(".send-message").hide().siblings(".text-message").hide();aA.find(".btn").show()});v.on("keyup",function(){var aA=$(this).val();len=aA.length;if(len>2){K(aA)}});S.on("click",function(){var aB=$(this),aA=a.val().trim();if(aA.isValidEmail()&&u()){ay.hide();t.data("email",aA);Y.show();aB.hide();ao.show();t.show()}else{if(aA=="Enter Email..."||!aA.isValidEmail()){Utils.triggerGlobalInformer("Please enter a valid email!",5,{isError:true});return}if(!u()){Utils.triggerGlobalInformer("Please select groups!",5,{isError:true});return}}});t.on("click",function(){var aC=$(this),aA=aC.data("groups"),aB=aC.data("email"),aD=aC.siblings("#single-email-message").val();U(aB,aA,aD)});ao.on("click",function(){W()});ap.on("click",".link-contacts",function(){var aD=$(this),aE=aD.data("id"),aC=aD.parents(".item"),aA=aC.find(".text-message"),aB=aC.find(".send-message");aD.hide();aA.slideDown("fast");aB.show()}).on("click",".abort",function(){var aE=$(this),aD=aE.parents(".item"),aA=aD.find(".text-message"),aC=aD.find(".send-message"),aB=aD.find(".link-contacts");aB.show();aA.hide();aC.hide();aB.show()}).on("click",".confirm",function(){var aC=$(this),aE=aC.data("id"),aB=aC.parents(".item"),aD=Utils.stripHtml(aB.find(".text-message").val()),aA=Utils.stripHtml(aB.find(".input").val());O.call(this,aE,aD,aA)}).on("click","#see-contacts",function(){if(_ticker=="link"){ap.hide();b.show();m.hide()}else{if(_ticker=="gmail"){ap.hide();X.show();m.hide()
}}}).on("click",".send-email-invite",function(){var aI=$(this),aC=aI.parents(".item"),aH=aI.data("email"),aA=aC.find(".checked"),aE=aC.find(".text-message").val(),aF="An error occurred.",aB=[],aD=[],aG;aA.each(function(){var aJ=$(this),aK=aJ.data("group_id");aB.push(aK)});aB=aB.join(",");$.when(Utils.sendEmail(aH,aB,aE)).then(function(aJ){if(!aJ||!aJ.success==true){Utils.triggerGlobalInformer(aF,5,{isError:true})}else{Utils.triggerGlobalSuccess("Your invite was sent successfully!",5);aC.hide()}})}).on("click",".btn",function(){var aC=$(this),aB=aC.data("email"),aA=aC.parents(".item").find(".send-message"),aD=aA.siblings(".text-message");aC.hide();aD.slideDown("fast");aA.show()});b.on("click",".link-contacts",function(){var aD=$(this),aE=aD.data("id"),aC=aD.parents(".item"),aA=aC.find(".text-message"),aB=aC.find(".send-message");aD.hide();aB.show();aA.slideDown("fast")}).on("click",".abort",function(){var aE=$(this),aD=aE.parents(".item"),aA=aD.find(".text-message"),aC=aD.find(".send-message"),aB=aD.find(".link-contacts");aB.show();aA.hide();aC.hide();aB.show()}).on("click",".confirm",function(){var aC=$(this),aE=aC.data("id"),aB=aC.parents(".item"),aD=Utils.stripHtml(aB.find(".text-message").val()),aA=Utils.stripHtml(aB.find(".input").val());O.call(this,aE,aD,aA)}).on("click",".moar-links",function(){var aB=$(this),aC=aB.data("offset"),aA=aB.data("length");ar(aC,aA);aB.fadeOut("fast")});ag.find(".controls > a.white-button").on("click",function(){ad.removeClass("fb");ag.find(".friends").empty();_fbSearchInput.val("").blur()});o.on("click",function(){FB.login(function(aA){if(aA.authResponse){R=aA.authResponse.accessToken;FB.api("/me/friends",{access_token:R},function(aC){if(aC.data&&aC.data.length){var aB=ag.find(".friends");F=[];$.each(aC.data,function(){$.extend(this,{avatar:"https://graph.facebook.com/"+this["id"]+"/picture?type=square"});F.push(this);aB.append(aj(this))})}ad.addClass("fb")})}})});_fbSearchInput.on("keyup",function(){var aA=$(this);w&&clearTimeout(w);w=setTimeout(function(){var aD=ag.find(".friends"),aE=aA.val(),aB=[];if(!aE){aB=F}else{var aC=new RegExp(aE,"i");$.each(F,function(){var aF=aC.exec(this["name"]);if(aF&&aF.length){aB.push($.extend({},this,{match:aF[0]}))}})}aD.empty();$.each(aB,function(){var aF=aj(this);if(this["match"]){aF.find(".info").html(this["name"].replace(this["match"],'<span class="bold">'+this["match"]+"</span>"))}aD.append(aF)})},n)}).on("focus",function(){$(this).parent().addClass("focused")}).on("blur",function(){$(this).parent().removeClass("focused")});$("#yahoo-trigger").on("click",function(){L("yahoo")});$("#hotmail-trigger").on("click",function(){L("microsoft")})};var ae=function(aB){var aA="https://apis.live.net/v5.0/me/contacts?"+aB;$.when(M(aA,{},"GET")).then(function(aC){if(!aC){Utils.triggerGlobalInformer(err,5,{isError:true})}else{_l(aC)}})};av.checkMe=function(aC,aA,aB){if(av.storeType()=="connect"){c(aC,aA);return}if(av.storeType()=="microsoft"){ae(aC);return}};av.yahooRouter=function(aA){D(aA);return};av.getINContacts=function(aA){if(!aA){var aB="There was a problem retreiving your contacts!";b.html(aB)}else{B(aA.values)}};av.storeType=function(){return av.storeType.data};var aj=function(aA){return $("<article />").addClass("clearfix friend").append($("<img />").addClass("border-radius-2 avatar").attr("src",aA.avatar),$("<div />").addClass("info").html(aA.name),$("<a />").addClass("blue-button fb-connect-button").html("Connect").on("click",function(){aa(aA.id)}))};var aa=function(aA){FB.ui({method:"send",name:"I've invited you to join my network on yfrog Social",link:"http://yfrog.com/user/"+Global.loggedInUserId,to:aA,description:"Sign up and check out my profile on yfrog Social network. For more info about yfrog Social visit http://yfrog.com/promo",picture:"http://yfrog.com/images/yfrog3-logo-180x180.jpg"})};var O=function(aH,aG,aA){var aC=aH,aF=$(this),aE=aF.parents(".item"),aD={recipients:{values:[{person:{_path:"/people/"+aC}}]},subject:aA,body:aG};IN.API.Raw("/people/~/mailbox").method("POST").body(JSON.stringify(aD)).result(function(aI){Utils.triggerGlobalSuccess("Your invite was sent successfully!",5);
aE.fadeOut("fast")}).error(function aB(aI){Utils.triggerGlobalInformer("A problem occurred while trying to send your message!",5,{isError:true})})};var B=function(aD){var aK=aD.length,aM,aF,aL="",aI,aO;_ticker="link";links=[];for(aI=0;aI<aK;aI++){var aG=aD[aI],aP=aG.firstName,aQ=aG.lastName,aC=aG.id,aH=aG.pictureUrl==null?"/images/default-avatar-48x48.png":aG.pictureUrl,aB="private";if(aP==aB||aQ==aB||aC==aB){continue}else{links.push({first_name:aP,last_name:aQ,email_id:aC,avatar_url:aH})}}$.when(Utils.sendContacts(links)).then(function(aR){if(!aR||!aR.success==true){Utils.triggerGlobalInformer("A problem occurred while trying to save contacts",5,{isError:true})}});aK=links.length;aM=aK>7?aK-8:aK;aF=(aK-7);aL+='<div class="clearfix">';for(aO=aK-1;aO>=aM;aO--){var aJ=links[aO],aP=aJ.first_name,aQ=aJ.last_name,aE=aP+" "+aQ,aC=aJ.email_id,aH=aJ.avatar_url==null?"/images/default-avatar-48x48.png":aJ.avatar_url,aB="private",aA=Global.loggedInUserId,aN=Global.loggedInUserFirstName;if(aP==aB||aQ==aB||aC==aB){continue}else{aL+='	                <div class="item clearfix">	                    <img src="'+aH+'" border="0" class="pic" onError="Global.Connect.imageError(this)">	                    <div class="name">	                        <span class="dark-blue float-left">'+aE+'</span>	                        <div class="sexy-input-parent float-left border-radius-3 send-message">	                        	<input type="text" value="Come join me on yfrog Social!" class="input dead" data-default="Come join me on yfrog Social!">	                        </div>	                        <div class="clear"></div>							<textarea class="border-radius-3 shadowed-box text-message">Hi, '+aP+"!  I&apos;ve invited you to join me on yfrog Social!  Check it out : http://yfrog.com/user/"+aA+"   -"+aN+'</textarea>	                    </div>	                    <div class="add-to-group">	                        <div class="blue-button link-contacts bold float-right border-radius-3">	                            <span>Connect</span>	                        </div>							<div class="clear"></div>	                        <span class="send-message">No HTML allowed.</span>	                        <div class="grey-button send-message bold float-right border-radius-3 abort">	                            <span>Cancel</span>	                        </div>	                        <div class="blue-button send-message bold float-right border-radius-3 confirm" data-id="'+aC+'">	                            <span>Send Message</span>	                        </div>	                    </div>	                </div>	            '}aL+="</div>"}if(aK>7){aL+='<div class="moar-links older-messages border-radius-3 shadowed-box" data-length="'+aK+'" data-offset="'+aM+'">						<span class="plus">+</span><span class="text">View More</span>					</div>					'}v.parent().show().prev(".return").show();at.hide();q.hide();b.append(aL)};var ar=function(aH,aD){var aG=(aH-7)>0?aH-7:0,aE=(aH-1),aH=(aH-7),aN="<div>",aA=links,aK="",aB=Global.loggedInUserId,aM=Global.loggedInUserFirstName,aI;if(aA==null){Utils.triggerGlobalInformer("There was an error retreiving contacts.",5,{isError:true})}else{for(aI=aE;aI>=aG;aI--){var aL=aA[aI],aJ=aL.avatar_url,aC=aL.email_id,aF=aL.first_name+" "+aL.last_name;if(!aC){continue}else{aK+='			                <div class="item clearfix">			                    <img src="'+aJ+'" border="0" class="pic" onError="Global.Connect.imageError(this)">			                    <div class="name">			                        <span class="dark-blue float-left">'+aF+'</span>			                        <div class="sexy-input-parent float-left border-radius-3 send-message">			                        	<input type="text" value="Come join me on yfrog Social!" class="input dead" data-default="Come join me on yfrog Social!">			                        </div>			                        <div class="clear"></div>									<textarea class="border-radius-3 shadowed-box text-message">Hi, '+aL.first_name+"!  I&apos;ve invited you to join me on yfrog Social!  Check it out : http://yfrog.com/user/"+aB+"   -"+aM+'</textarea>			                    </div>			                    <div class="add-to-group">			                        <div class="blue-button link-contacts bold float-right border-radius-3">			                            <span>Connect</span>			                        </div>									<div class="clear"></div>			                        <span class="send-message">No HTML allowed.</span>			                        <div class="grey-button send-message bold float-right border-radius-3 abort">			                            <span>Cancel</span>			                        </div>			                        <div class="blue-button send-message bold float-right border-radius-3 confirm" data-id="'+aC+'">			                            <span>Send Message</span>			                        </div>			                    </div>			                </div>			            '
}}if(aH<0){aK+="</div>"}else{aK+='<div class="moar-links older-messages border-radius-3 shadowed-box" data-length="'+aD+'" data-offset="'+aG+'">								<span class="plus">+</span><span class="text">View More</span>							</div>						</div>'}b.append(aK)}};var L=function(aC){var aA;if(aC=="google"){aA={respType:"token",clientId:"162622705334.apps.googleusercontent.com",redURI:"http://yfrog.com/page/oauth_router",scope:"https://www.google.com/m8/feeds",state:P(16),serviceURI:"https://accounts.google.com/o/oauth2/auth?",id:"connect"}}if(aC=="yahoo"){$.when(M("/oauth/get_request_token",{},"GET")).then(function(aF){var aD=i("oauth_problem","?"+aF)?true:false;M("/oauth/session_start",aF,"GET");if(aF&&!aD){var aE=decodeURIComponent(i("xoauth_request_auth_url","?"+aF));window.open(aE,"mywindow","location=no,top=200,left=500,menubar=1,resizable=0,width=850,height=550")}else{Utils.triggerGlobalInformer("We're sorry, there was an error.  Please try again later.",5,{isError:true})}});return}if(aC=="microsoft"){var aA={respType:"token",clientId:"000000004407681F",redURI:"http://yfrog.com/page/oauth_router",scope:"wl.basic,wl.emails",display:"popup",state:P(16),serviceURI:"https://oauth.live.com/authorize?",id:"microsoft"}}var aB=V(aA);av.storeType.data=aB.id;if(av.storeType()=="connect"||av.storeType()=="microsoft"){window.open(aB.rsrc,"mywindow","location=no,top=200,left=500,menubar=1,resizable=0,width=850,height=550")}};var aw=function(){};var M=function(aC,aB,aA){return $.ajax({url:aC,type:aA,data:aB})};var h=function(aE,aB){var aA="message="+encodeURIComponent(aE)+"&second="+encodeURIComponent(aB)+"&firstCall=true",aD="/auth/yahoo_first",aC="The Yahoo API is not responding.  Please try again later.";$.when(M(aD,aA,"POST")).then(function(aF){if(!aF){Utils.triggerGlobalInformer(aC,5,{isError:true})}else{var aG=i("oauth_problem","?"+aF);if(!aG){exchangeYahooToken(aF)}else{Utils.triggerGlobalInformer(aC,5,{isError:true})}}})};var i=function(aB,aD){aB=aB.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var aA="[\\?&]"+aB+"=([^&#]*)",aE=new RegExp(aA),aC=aE.exec(aD);if(aC==null){return false}else{return aC[1]}};var V=function(aB){var aA;if(aB.id=="connect"){aB.respType="response_type="+aB.respType+"&";aB.clientId="client_id="+encodeURIComponent(aB.clientId)+"&";aB.redURI="redirect_uri="+encodeURIComponent(aB.redURI)+"&";aB.scope="scope="+encodeURIComponent(aB.scope)+"&";aB.state="state="+aB.state;aA={rsrc:aB.serviceURI+aB.respType+aB.clientId+aB.redURI+aB.scope+aB.state,id:aB.id}}if(aB.id=="microsoft"){aB.respType="response_type="+aB.respType+"&";aB.clientId="client_id="+encodeURIComponent(aB.clientId)+"&";aB.redURI="redirect_uri="+encodeURIComponent(aB.redURI)+"&";aB.scope="scope="+encodeURIComponent(aB.scope)+"&";aB.state="state="+aB.state;aA={rsrc:aB.serviceURI+aB.respType+aB.clientId+aB.redURI+aB.scope+aB.state,id:aB.id}}return aA};var P=function(aE){var aD="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",aE=aE,aC="",aB;for(aB=0;aB<aE;aB++){var aA=Math.floor(Math.random()*aD.length);aC+=aD.substring(aA,aA+1)}return aC};var Q=function(){return{data:Q.data,token:Q.token}};av.imageError=function(aA){aA.src="/images/default-avatar-48x48.png";aA.onError=""};var c=function(aC,aB){var aA;if(av.storeType()=="connect"){aA="http://"+window.location.hostname+"/catchtoken?"+aC}$.when(M(aA,{},"GET")).then(function(aD){if(!aD){Utils.triggerGlobalInformer(e.error,5,{isError:true})}else{f(aB)}})};var f=function(aA){$.when(M("/auth/google_oauth.json","code="+aA,"GET")).then(function(aB){if(aB&&aB.result.audience=="162622705334.apps.googleusercontent.com"){al(aA)}else{Utils.triggerGlobalInformer("There was a problem connecting with your account.",5,{isError:true})}})};var al=function(aA){$.when(M("/group/google_verified.json","access_token="+aA,"GET")).then(function(aB){if(aB){parseContactObject(aB,"gmail")}else{Utils.triggerGlobalInformer(aB.error,5,{isError:true})}})};var k=function(aH,aP){var aM,aL,aC="",aN=aH.entry.length,aQ="Gmail",aK=aN>7?aN-8:aN,aF=(aN-7),aG=[];
Q.token=aP;for(aL=0;aL<aN;aL++){if(!aH.entry[aL]){continue}var aS=aH.entry[aL],aR=aS.title.$t,aB=aR.split(" ")[0]==null?"":aR.split(" ")[0],aO=aR.split(" ")[1]==null?"":aR.split(" ")[1],aJ=!aS.gd$email||aS.gd$email[0].address==null?"":aS.gd$email[0].address,aI=aS.link[0].href+"?access_token="+aP;aG.push({first_name:aB,last_name:aO,email_id:aJ,avatar_url:aI})}$.when(Utils.sendContacts(aG)).then(function(aT){if(!aT||!aT.success){Utils.triggerGlobalInformer("A problem occurred while trying to save contacts",5,{isError:true})}});aC+="<div>";for(aM=aN-1;aM>=aK;aM--){var aD=aH.entry[aM],aI=aD.link[0].href+"?access_token="+aP,aR=aD.title.$t,aB=aR.split(" ")[0]==null?"":aR.split(" ")[0],aJ=!aD.gd$email||aD.gd$email[0].address==null?"":aD.gd$email[0].address,aA=Global.loggedInUserId,aE=Global.loggedInUserFirstName;if(!aJ){continue}else{aC+='	                <div class="item clearfix">	                    <div class="pic-holder clearfix"><img src="'+aI+'" border="0" class="pic" onError="Global.Connect.imageError(this)"></div>	                    <div class="name clearfix">	                        <span class="dark-blue">'+aR+'</span>	                        <div class="clear"></div>	                        <span class="u-name">'+aJ+'</span>	                        <div class="clear"></div>	                        <textarea class="border-radius-3 float-left shadowed-box text-message">Hi, '+aB+'!  I&apos;ve invited you to join me on yfrog Social!</textarea>	                    	<div class="clear"></div>	                    	<div class="send-message"><div class="yf-check-box float-left checked" data-group_id="1"></div><div class="yf-check-box float-left" data-group_id="0"></div><div class="yf-check-box float-left" data-group_id="2"></div></div>	                    	<div class="grey-button send-message bold float-right border-radius-3 abort">	                            <span>Cancel</span>	                        </div>	                        <div class="blue-button send-message float-right confirm" data-email="'+aJ+'">	                            Send Message	                        </div>	                    </div>	                    <div class="add-to-group clearfix float-right">	                        <div class="btn blue-button float-right" data-email="'+aJ+'">	                            Connect	                        </div>	                    </div>	                </div>	            '}}aC+='</div>			<div class="clear"></div>';if(aN>7){aC+='<div class="moar older-messages border-radius-3 shadowed-box" data-length="'+aN+'" data-offset="'+aK+'">						<span class="plus">+</span><span class="text">View More</span>					</div>					'}X.addClass("connected-to-email");v.parent().show().prev(".return").show();at.hide();q.hide();X.append(aC)};var ah=function(aK,aM){var aC=(aK-7)>0?aK-7:0,aP=(aK-1),aE=(aK-7),aF="<div>",aJ=Q(),aO;if(aJ==null){Utils.triggerGlobalInformer("There was an error retreiving contacts.",5,{isError:true})}else{for(aO=aP;aO>=aC;aO--){var aH=Q(),aQ=aH.data,aG=aH.token,aN=aQ.entry[aO],aI=aN.link[0].href+"?access_token="+aG,aR=aN.title.$t,aA=aR.split(" ")[0]==null?"":aR.split(" ")[0],aL=!aN.gd$email||aN.gd$email[0].address==null?"":aN.gd$email[0].address,aB=Global.loggedInUserId,aD=Global.loggedInUserFirstName;if(!aL){continue}else{aF+='					                <div class="item clearfix">					                    <div class="pic-holder clearfix"><img src="'+aI+'" border="0" class="pic" onError="Global.Connect.imageError(this)"></div>					                    <div class="name clearfix">					                        <span class="dark-blue">'+aR+'</span>					                        <div class="clear"></div>					                        <span class="u-name">'+aL+'</span>					                        <div class="clear"></div>					                        <textarea class="border-radius-3 float-left shadowed-box text-message">Hi, '+aA+'!  I&apos;ve invited you to join me on yfrog Social!</textarea>					                    	<div class="clear"></div>					                    	<div class="send-message"><div class="yf-check-box float-left checked" data-group_id="1"></div><div class="yf-check-box float-left" data-group_id="0"></div><div class="yf-check-box float-left" data-group_id="2"></div></div>					                    	<div class="grey-button send-message bold float-right border-radius-3 abort">					                            <span>Cancel</span>					                        </div>					                        <div class="blue-button send-message bold float-right border-radius-3 confirm" data-email="'+aL+'">					                            <span>Send Message</span>					                        </div>					                    </div>					                    <div class="add-to-group clearfix float-right">					                        <div class="btn blue-button bold float-right border-radius-3" data-email="'+aL+'">					                            <span>Connect</span>					                        </div>					                    </div>					                </div>					            '
}}if(aE<0){aF+="</div>"}else{aF+='<div class="moar older-messages border-radius-3 shadowed-box" data-length="'+aM+'" data-offset="'+aC+'">								<span class="plus">+</span><span class="text">View More</span>							</div>						</div>'}X.append(aF)}};var U=function(aA,aE,aD){var aC=Global.loggedInUserName,aB;aE=aE.join(",");$.when(Utils.sendEmail(aA,aE,aD)).then(function(aF){if(aF&&aF.success==true){Utils.triggerGlobalSuccess("Your invite was sent successfully!",5);x()}else{var aG="An error occurred while inviting.";Utils.triggerGlobalInformer(aG,5,{isError:true});x()}})};var am=function(){Z(_resetInvites)};var I=function(){var aB=$(this),aD=aB.attr("params");if(aD=="all"){var aA=storeAll.count}if(aD=="friends"){var aA=storeFriends.count}if(aD=="fam"){var aA=storeFam.count}if(aD=="biz"){var aA=storeBiz.count}updateCount(aA);g.data=aD;aD="#groups-"+aD;var aC=$(aD);_hideBlock.removeClass("selected");aB.addClass("active");aB.siblings().removeClass("active");_listContainer.children(".list").hide();aC.show()};var au=function(){var aA=$(this).data("user_id");$.when(Utils.unHideUnBlockUser(aA)).then(function(aB){if(aB&&aB.success){window.location.reload(true)}else{Utils.triggerGlobalInformer("An error occurred.",5,{isError:true})}})};var ak=function(){var aA=$(this).data("user_id");$.when(Utils.unHideUnBlockUser(aA)).then(function(aB){if(aB&&aB.success){window.location.reload(true)}else{Utils.triggerGlobalInformer("An error occurred.",5,{isError:true})}})};var E=function(){var aA=$(this);aA.find(_hoverAdd).show()};var z=function(){var aF=$(this),aE=aF.parents(".item"),aD=aE.find(".dark-blue").text(),aC=aE.children(".request-container"),aA=aC.find(".contact-name"),aB=aE.children(".user-container");aF.attr("in-process","true");aB.hide();aC.show();aA.html(aD)};var af=function(){Z(_inviteFromEmail)};var l=function(aA,aB){aA.addClass("state");aB.removeClass("state")};var G=function(aB,aC,aA){aB.addClass("selected");aC.removeClass("selected");if(aA){aB.removeClass("selected")}};var g=function(){return(g.data)};var Z=function(aA){aA.show();aA.siblings().hide()};var Z=function(aA){aA.show();aA.siblings().hide()};var ax=function(aB,aI){var aC,aF=aB.result.length,aH='<div class="result clearfix">';for(aC=0;aC<aF;aC++){var aJ=aB.result[aC],aD=aJ.avatar_url,aG=aJ.email_id,aL=aJ.first_name+" "+aJ.last_name,aE=aJ.first_name,aA=Global.loggedInUserId,aK=Global.loggedInUserFirstName;if(aG.isValidEmail()){aH+='		                <div class="item clearfix">		                    <div class="pic-holder clearfix"><img src="'+aD+'" border="0" class="pic" onError="Global.Connect.imageError(this)"></div>		                    <div class="name clearfix">		                        <span class="dark-blue">'+aL+'</span>		                        <div class="clear"></div>		                        <span class="u-name">'+aG+'</span>		                        <div class="clear"></div>		                        <textarea class="border-radius-3 float-left shadowed-box text-message">Hi, '+aE+'!  I\u0027ve invited you to join me on yfrog Social!</textarea>		                    	<div class="clear"></div>		                    	<div class="send-message"><div class="yf-check-box float-left checked" data-group_id="1"></div><div class="yf-check-box float-left" data-group_id="0"></div><div class="yf-check-box float-left" data-group_id="2"></div></div>		                    	<div class="grey-button send-message bold float-right border-radius-3 abort">		                            <span>Cancel</span>		                        </div>		                        <div class="blue-button send-message bold float-right border-radius-3 send-email-invite" data-email="'+aG+'">		                            <span>Send Message</span>		                        </div>		                    </div>		                    <div class="add-to-group clearfix float-right">		                        <div class="btn blue-button bold float-right border-radius-3">		                            <span>Connect</span>		                        </div>		                    </div>		                </div>		            '
}else{aH+='<div class="item clearfix">		                    <img src="'+aD+'" border="0" class="pic" onError="Global.Connect.imageError(this)">		                    <div class="name clearfix">		                        <span class="dark-blue float-left">'+aL+'</span>		                        <div class="sexy-input-parent float-left border-radius-3 send-message">		                        	<input type="text" value="Come join me on yfrog Social!" class="input dead" data-default="Come join me on yfrog Social!">		                        </div>		                        <div class="clear"></div>								<textarea class="border-radius-3 shadowed-box text-message">Hi, '+aE+"!  I&apos;ve invited you to join me on yfrog Social!  Check it out : http://yfrog.com/user/"+aA+"   -"+aK+'</textarea>								<div class="clear"></div>								<span class="send-message">No HTML allowed.</span>								<div class="grey-button send-message bold float-right border-radius-3 abort">		                            <span>Cancel</span>		                        </div>		                        <div class="blue-button send-message bold float-right border-radius-3 confirm" data-id="'+aG+'">		                            <span>Send Message</span>		                        </div>		                    </div>		                    <div class="add-to-group">		                        <div class="blue-button link-contacts bold float-right border-radius-3">		                            <span>Connect</span>		                        </div>								<div class="clear"></div>		                    </div>		                </div>		            '}}aH+='			<div class="clear"></div>			<div id="see-contacts" class="white-button float-left">				Back to contacts			</div>			</div>';ap.show().html(aH);m.show().html(aF+" results returned for "+decodeURIComponent(aI)+".");ap.siblings(".stage").hide()};var K=function(aA){var aB=encodeURIComponent(aA);$.when(Utils.getContacts(aB)).then(function(aC){if(aC&&aC.success){isSearch=true;ax(aC,aB)}else{Utils.triggerGlobalInformer("An error occurred while retrieving contacts.",5,{isError:true})}})};var T=function(){var aA=_gmailSearch.data("default");X.show();_showSearchResults.hide();_showSearchResults.children(".result").remove();_gmailSearch.val(aA).addClass("dead")};var j=function(aA){aA.html("Your message has been sent!");r=setTimeout(function(){aA.fadeOut("slow")},1000)};var x=function(){ac.hide();s=setTimeout(function(){ay.find("input").val("Enter Email...").addClass("dead");ay.fadeIn("fast");S.fadeIn("fast");d()},1000)};var W=function(){ac.hide();ay.find("input").val("Enter Email...");ay.fadeIn("fast");S.fadeIn("fast")};var ab=function(){J.removeClass("expanded");u()};var u=function(){var aB=false,aA=[];ai.each(function(){var aC=$(this).children(".yf-check-box"),aD=aC.data("group_id");if(aC.hasClass("checked")){aB=true;aA.push(aD)}});t.data("groups",aA);if(aB){J.find(".selected").html("Selected")}else{J.find(".selected").html("Select Groups")}return aB};var d=function(){ai.each(function(){var aA=$(this).children(".yf-check-box"),aB=aA.data("group_id");if(aA.hasClass("checked")){aA.removeClass("checked")}});J.find(".selected").html("Select Groups")};var C=function(){return(C.data)};var D=function(aA){var aB={token_verifier:aA};$.when(M("/oauth/get_acc_token",aB,"GET")).then(function(aC){_l(aC);return})};return av})(Global||{});function linkedLoader(){IN.Event.on(IN,"auth",getContacts)}function getContacts(){IN.API.Connections("me").fields("firstName","lastName","id","picture-url").result(Global.Connect.getINContacts).error(Global.Connect.INcontactsError)};Global.Contact=(function(m){var i={},o=$(".textarea"),c=$("#report-abuse-button"),j=$("#report"),l=$("#support-button"),e=$("#support"),b=$("#press-button"),h=$("#press"),k="Please fill out a valid email.",g="Please fill out all the required fields.",f="Please select a topic.",a=$("#support input");i.begin=function(){n()};var n=function(){c.on("click",function(p){d.call(this)});l.on("click",function(p){d.call(this)});b.on("click",function(p){d.call(this)});Utils.bindKeyListener("input",13,function(q){var p=$(q.target).parents(".form:eq(0)"),r=p[0].id;d.call(q.target)});a.on("blur",function(){var p=$(this),r=p.val(),q=p.data("default");if(r!==q){p.addClass("darker")}})};var d=function(){var y=$(this),r=(this.id=="press-button"||this.id=="support-button"||this.id=="report-abuse-button")?y.parent(".send").siblings(".form"):y.parents(".form"),w=r.find(".email-input").val(),B=r.find(".input"),v=r.find(".topic").length>0?r.find(".topic").children("a.selected").text():"Press Inquiry",z=r.find(".topic").length>0?r.find(".topic").children("a.selected").data("value"):4,q={},u,t="Your email has been sent.";if(!w.isValidEmail()){Utils.triggerGlobalInformer(k,5);return false}else{for(u=0;u<B.length;u++){var A=$(B[u]),C=A.val(),p=A.attr("name"),s=A.data("default");C=Utils.stripHtml(C);if(C==s||C==""||C==null){Utils.triggerGlobalInformer(g,5);return false}else{q[p]=encodeURIComponent(C)}}if(v=="Select Topic"){Utils.triggerGlobalInformer(f,5);return false}else{q.topic=encodeURIComponent(v);q.category=z}$.when(Utils.sendInternalEmail(q)).then(function(x){if(x.success==true){Utils.triggerGlobalInformer(t,5)}})}};return i})(Global||{});Global.Groups=(function(j){var g={},b=$("body"),i=$("#my-groups"),p=$("#hidden"),E=$("#blocked"),x=$("#groups-all"),m=$("#list-container"),c=$(".cancel-remove"),l=$(".confirmRemove"),y=$(".older-messages"),d=$(".hide-button"),o=$(".unblock-button"),z=$(".filters a"),F=$(".filters a[data-type='all']"),n=$("#find-in-groups"),t=10,C=$(".contact-filters a"),B=$("#search-input.groups-search-flag");g.begin=function(){k()};var k=function(){b.on("click","._groups",function(J){var I=$(J.target),L=I.parent(".in-group").data("user_id"),H=I.data("group_id"),G=new Date(),K=G.getTime();if(I.hasClass("on")==true){D.call(this,L,"remove",H)}else{if(I.hasClass("pending")==true){D.call(this,L,"cancel",H)}else{I.data("invited_time",K);D.call(this,L,"add",H)}}}).on("click","#connect-with-alt-email",function(){var G=$("#enter-alternate-email").val();A(G)});i.on("click",".paginate",function(){var H=$(this),I=H.data("offset"),G=H.data("type");H.hide();e(G,I,t);H.remove()});x.on("click","#connect-hook-trigger",function(){var H=$("#connect-hook").val(),G="http://www.yfrog.com/people/connect?email="+H;if(H.length>0){document.location.href=G}}).on("keyup","#connect-hook",function(H){var G=(H.keyCode?H.keyCode:H.which),J=$("#connect-hook").val();if(G==13&&J.length>0){var I="http://www.yfrog.com/people/connect?email="+J;document.location.href=I}});n.on("keyup",function(H){H.preventDefault();var G=n.val();if(G){searchGroups(G)}else{x.show().siblings().hide()}});p.live("click",function(G){G.preventDefault();v()});E.live("click",function(G){G.preventDefault();h()});c.live("click",function(){cancelRemoveUser.call(this)});l.live("click",function(){removeUser.call(this)});y.live("click",function(){var G=s();e(G)});d.live("click",function(){w.call(this)});o.live("click",function(){u.call(this)});z.live("click",function(G){G.preventDefault();r.call(this)});C.on("click",function(){var H=$(this),G=H.data("type");if(G=="csv"){switchContactPane.call(this,G,false)}else{switchContactPane.call(this,G,true)}});B.on("keyup",function(){var H=$(this),I=H.val(),G=I.length;if(G>1){a(I)}else{if(G==0){r("all")}}});Utils.assignScrollListener(function(){$(".paginate","#my-groups").trigger("click")})};var a=function(G){var H=encodeURIComponent(G);$.when(Utils.searchUsers(H)).then(function(I){if(I&&I.success){r("search");f("search",I,G)}else{Utils.triggerGlobalInformer("An error occurred while searching your contacts.",5,{isError:true})}})};var v=function(){var G=m.children(".list");$.when(Utils.getHiddenUsers()).then(function(H){if(H.success){f("hidden",H)}else{var I="An error occurred while retrieving contacts.";Utils.triggerGlobalInformer(I,5,{isError:true})}})};var h=function(){$.when(Utils.getBlockedUsers()).then(function(G){if(G.success){f("blocked",G)}else{Utils.triggerGlobalInformer(msg,5,{isError:true})}})};var f=function(G,ad,H){var O="#groups-"+G,T="",ab=(G=="search")?true:false,Z=(G=="hidden"||G=="blocked")?true:false,X=(G=="hidden"||G=="blocked"||G=="search")?false:true,K=(X&&ad.end_offset)?ad.end_offset:false,V,U;if(ad.result&&ad.result.length>0){var W=ad.result.length;if(ab||Z){count=ad.result.length}else{count=ad.total}if(Z||ab){T+='<img src="/images/up-arrow.png" border="0" class="group-arrow">'}for(V=0;V<W;V++){var N=ad.result[V],Q=Utils.getAvatar96(N.avatar_server,N.avatar_filename,N.avatar_crop),M=q(N.connected_groups),aa=[],ac=N.first_name,S=N.last_name,ae=!N.occupation?"":N.occupation,L=!N.location?"":N.location,I=N.user_id,R=["friends","family","business"],P=(G=="hidden")?'<div class="hide-button white-button" data-user_id="'+I+'">Unhide</div>':"",J=(G=="blocked")?'<div class="unblock-button white-button" data-user_id="'+I+'">Unblock User</div>':"",Y=[1,0,2];T+='<div class="item clearfix">							<div class="user-container">							<div class="hover-on-me float-left clearfix" data-user_id="'+I+'">								<img src="'+Q+'" border="0" class="avatar-size border-radius-2" onerror="Global.Groups.imageError(this)">							</div>							<div class="name clearfix hover-on-me" data-user_id="'+I+'">								<a class="dark-blue clearfix" href="http://yfrog.com/user/'+I+'">'+ac+" "+S+'</a>								<span class="user-location">'+ae+"</span>";
if(!Z){T+='	<span class="user-association">'+M+"</span>"}T+=' <div class="clear"></div>							</div>';T+=P;T+=J;T+="</div></div>"}if(X){if(K){T+='<div class="border-radius-3 shadowed-box paginate" data-type="'+G+'" data-offset="'+K+'">								More							</div>'}$(O).append(T)}else{$(O).html(T)}s.data=G}else{if(ab){T+='<img src="/images/up-arrow.png" border="0" class="group-arrow">						<div class="no-results clearfix">							<h1>Oh no... no results found!</h1>							<div class="want-to-connect clearfix">								<span>Would you like to connect with this person?</span>								<div class="clear"></div>								<div class="sexy-input-parent border-radius-3 alternate-email">									<input type="text" id="enter-alternate-email" data-default="Enter their email..." value="Enter their email..." class="input dead">								</div>								<div class="white-button float-left border-radius-3" id="connect-with-alt-email">									<span>Connect</span>								</div>								<div class="clear"></div>								<a class="sub-text" href="/people/invite">Or invite someone from your contacts.</a>							</div>						</div>';$("#groups-search").html(T)}if(Z){T+='<img src="/images/up-arrow.png" border="0" class="group-arrow">						<div class="contact-count">0 People</div>						<div class="no-results clearfix">							<h1>There are no users in this list.</h1>						</div>';$(O).html(T)}}};var e=function(G,I,H){if(G=="all"){$.when(Utils.getMoreUsers(I,H)).then(function(J){f("all",J)})}if(G=="friends"){$.when(Utils.getMoreUsers(I,H,1)).then(function(J){f("friends",J)})}if(G=="fam"){$.when(Utils.getMoreUsers(I,H,0)).then(function(J){f("fam",J)})}if(G=="biz"){$.when(Utils.getMoreUsers(I,H,2)).then(function(J){f("biz",J)})}};g.imageError=function(G){G.src="/images/default-avatar-48x48.png";G.onError=""};var D=function(L,G,I){var K="An error occurred.",H=$(this);if(G=="remove"){$.when(Utils.confirmAction("Are you sure you want to remove this connection?")).then(function(M){if(M.confirmed){$.when(Utils.deleteGroupMembers(I,L)).then(function(N){if(N.success){H.removeClass("on");if(H.parents(".list").hasClass("_"+I)||!H.siblings().hasClass("on")){H.parents(".item").hide()}}else{Utils.triggerGlobalInformer(K,5,{isError:true})}})}})}else{if(G=="cancel"){var J=H.data("invited_time");$.when(Utils.confirmAction("Are you sure you want to cancel this request?")).then(function(M){if(M.confirmed){$.when(Utils.cancelGroupRequest(I,L,J)).then(function(N){if(N.success){H.removeClass("pending")}else{Utils.triggerGlobalInformer(K,5,{isError:true})}})}})}else{if(G=="add"){$.when(Utils.confirmAction("Are you sure you want to add this user to your "+Utils.getGroupById(I).name+" group?")).then(function(M){if(M.confirmed){$.when(Utils.addGroupMember(I,L)).then(function(N){if(N.success){H.addClass("pending").data("invited_time",N.result["1"])}else{Utils.triggerGlobalInformer(K,5,{isError:true})}})}})}else{Utils.triggerGlobalInformer(K,5,{isError:true})}}}};var r=function(H){if(!H){var G=$(this),J="#groups-"+G.data("type"),I=$(J);G.addClass("active").siblings().removeClass("active");I.addClass("show-group").siblings(".list").removeClass("show-group");if(J=="#groups-hidden"){v();return}if(J=="#groups-blocked"){h();return}}else{if(H=="search"){F.addClass("active").siblings().removeClass("active")}var J="#groups-"+H,I=$(J);if(H=="search"){F.addClass("active").siblings().removeClass("active")}I.addClass("show-group").siblings(".list").removeClass("show-group")}};var u=function(){var G=$(this).data("user_id"),H=$(this).parents(".item"),J=H.siblings(".item").length,I="Do you want to unblock this user?";$.when(Utils.confirmAction(I)).then(function(K){if(K.confirmed){$.when(Utils.unHideUnBlockUser(G)).then(function(L){if(L.success==true){H.hide()}else{Utils.triggerGlobalInformer("An error occurred.",5,{isError:true})}})}})};var w=function(){var G=$(this).data("user_id"),H=$(this).parents(".item"),J=H.siblings(".item").length,I="Do you want to unhide this user?";$.when(Utils.confirmAction(I)).then(function(K){if(K.confirmed){$.when(Utils.unHideUnBlockUser(G)).then(function(M,L){if(M.success){H.hide()
}else{Utils.triggerGlobalInformer("An error occurred.",5,{isError:true})}})}})};var s=function(){return(s.data)};var A=function(K){var H=K,L="Please enter a valid email!",G="There was an error, please try again later.",J="Your invite was sent successfully!",I=$("#enter-alternate-email").data("default");if(!H.isValidEmail()){Utils.triggerGlobalInformer(L,5,{isError:true});return}else{$.when(Utils.sendEmail(H,1,"")).then(function(M){if(M&&M.success){Utils.triggerGlobalSuccess(J,5);$("#enter-alternate-email").addClass("dead").text(I).val(I)}else{Utils.triggerGlobalInformer(G,5,{isError:true})}})}};var q=function(L){var G=L.length,K=[],I;for(I=0;I<G;I++){var H=Utils.getGroupById(L[I]).name;K.push(H)}K.sort().reverse();if(G==2){var J=K.join(" and ");return J}else{var J=K.join(", ");return J}};return g})(Global||{});Global.Help=(function(f){var d={},c=$(".question h1","#help-container"),a=$(".answer h2",".question");d.begin=function(){g()};var g=function(){c.on("click",function(){e.call(this)});a.on("click",function(){b.call(this)})};var e=function(){var i=$(this),h=i.siblings(".answer");i.slideUp("fast");h.slideDown("fast")};var b=function(){var i=$(this).parents(".answer"),h=i.parents(".question").children("h1");i.slideUp("fast");h.slideDown("fast")};return d})(Global||{});Global.Index=(function(){var h=$("#forgot-password"),i=$("#sign-up-area"),e=$("#sign-up-area input.input"),k=$("#email1"),j=$("#sign-up-form"),b="",d="Minimum two characters,Invalid email address,Emails do not match".split(",");var l=function(){h.on("click",function(){new Global.PasswordRecovery()});e.on("focus",function(){$(this).parent().removeClass("err").find(".error-text").remove()}).on("blur",function(){var n=$(this),m=null;if(n.data("min_length")&&n.val().length<n.data("min_length")){m=Global.getErrorElement(d[0])}else{if(n.data("email")&&!n.val().isValidEmail()){m=Global.getErrorElement(d[1])}else{if(n.data("confirm_email")&&(!n.val().isValidEmail()||k.val()!=n.val())){m=Global.getErrorElement(d[2])}}}m&&!n.parent().find(".error-text").length&&n.parent().addClass("err").append(m)});b&&$("#login-password").focus()};var a=function(){e.trigger("blur");var m=i.find(".error-text").length===0;if(m){$("#sign-up-area button").addClass("disabled");$.when(Utils.checkEmail($.trim(k.val()))).then(function(n){if(!n||n.result){j.off("submit").attr("onsubmit","return true;").submit()}else{$("#sign-up-area button").removeClass("disabled");Utils.triggerGlobalInformer("This email address has already been taken, please try another one.",3)}return false})}else{return false}return false};var f=function(){$("#top-area button").addClass("disabled")};var g=function(){var u=$(window),m=$(document),p=$("body"),q=$("<div />").addClass("lightbox-dimmed-bg").on("click",function(){r()}),s=Global.getBasicBox({closeCallback:function(){r()}}).find(".title-area, .controls-area").remove().end().on("click",function(w){w.stopPropagation()}),n=$("<div />").on("click",function(){r()}).css("top",u.scrollTop()).addClass("forgot-container");var o=function(w){if(w.keyCode==Global.keyCodes.escape||w.which==Global.keyCodes.escape){r()}};var r=function(){m.off("keyup",o);n.remove();q.remove();p.removeClass(Global.lightBoxModeClass)};var t=function(){var w=$(this);if(w.hasClass("disabled")){return}w.addClass("disabled");$.when(Utils.sendEmailVerification(b)).then(function(x){if(x&&x.success){r();Utils.triggerGlobalSuccess("A new confirmation email has been sent to "+b+", check your inbox for further instructions.",5)}}).fail(function(){Utils.triggerGlobalInformer("There was a problem processing your request, please try again later.",4);w.removeClass("disabled")})};var v=function(){s.find(".input-area").append($("<p />").addClass("invalidated-p").html("Your account has not been verified. Please check your email to verify your account.")).end().find(".details-area").append($("<p />").addClass("invalidated-p").html("Are you having trouble finding your validation email?"),$("<a />").addClass("blue-button invalidated-a").append($("<span />").addClass("default").html("Resend Email"),$("<span />").addClass("alt").html("Processing...")));s.find(".details-area a").on("click",t);return true};v()&&p.append(q,n.append(s)).addClass(Global.lightBoxModeClass);m.on("keyup",o)};var c=function(m){b=m};return{init:l,isSignUpComplete:a,disableLoginButton:f,showInvalidatedPopup:g,setUserEmail:c}})();Global.News=(function(b){var a={};a.begin=function(){c()};var c=function(){};return a})(Global||{});Global.Notifications=(function(i){var g={},h=$(".accept","#requests"),a=$(".deny","#requests"),d=$("#activity");g.begin=function(){j()};var j=function(){h.on("click",function(){b.call(this)});d.on("click",".get-more",function(){var k=$(this),m=k.data("offset"),l="There was an error retrieving notifications!";k.fadeOut("fast").remove();$.when(f(m)).then(function(n){if(n&&n.success){e(n)}else{Utils.triggerGlobalInformer(l,5,{isError:true})}})});a.on("click",function(){c.call(this)});Utils.assignScrollListener(function(){$(".get-more").trigger("click")})};g.imageError=function(k){k.src="/images/defaultProfile.png";k.onError=""};var e=function(n){var l="There are no more notifications to show.";if(n.result&&n.result.notifications.length>0){var p=n.result.notifications.length,k=n.result.notifications,m=n.result.offset,q="",o;for(o=0;o<p;o++){var r=k[o],s=k[o].avatar_url?k[o].avatar_url:"/images/default-avatar-48x48.png";q+='<div class="instance clearfix">							<img src='+s+'>							<div class="info">'+r.message_html+'</div>							<div class="time">'+r.date_string+"</div>						</div>"}if(m){q+='<div class="get-more border-radius-3 shadowed-box" data-offset="'+m+'">See more notifications</div>'}d.append(q)}else{Utils.triggerGlobalInformer(l,5,{isError:true})}};var f=function(k){return $.ajax({url:"/notification/parsed.json",data:{offset:k}})};var b=function(){var l=$(this),m=l.data("group_id"),k=l.data("user_id"),n=l.data("invited_time"),p=l.parents(".request-item"),o="There was a problem, please try again later";if(m==null||!k||!n){Utils.triggerGlobalInformer(o,5,{isError:true})}else{$.when(Utils.acceptUserRequest(m,k,n)).then(function(q){if(!(q.success==true)){Utils.triggerGlobalInformer(o,5,{isError:true})}else{p.fadeOut("medium")}})}};var c=function(){var l=$(this),m=l.data("group_id"),k=l.data("user_id"),n=l.data("invited_time"),p=l.parents(".request-item"),o="There was a problem, please try again later";if(!m==null||!k||!n){Utils.triggerGlobalInformer(o,5,{isError:true})}else{$.when(Utils.denyUserRequest(m,k,n)).then(function(q){if(!(q.success==true)){Utils.triggerGlobalInformer(o,5,{isError:true})}else{p.fadeOut("medium")}})}};return g})(Global||{});Global.Pending=(function(){var b={},g=$("#results"),k="You do not have any pending requests.",j=150,l={inbound:0,outbound:1};var a=function(){var p={direction:l.inbound};$.extend(p,Global.getUserCredentials());if(Global.devMode){p.url=Global.APIs.group.invites.uri;p.type=Global.APIs.group.invites.type}return $.ajax({url:Global.devMode?Global.bridge:Global.APIs.group.invites.uri,type:Global.APIs.group.invites.type,dataType:"json",data:p})};var o=function(){$.when(a()).then(function(p){g.children().remove();if(!p||!p.result||!p.result.length||p.result.length==0){g.html(k);return}c(p.result)})};var h=function(q,p,s){var r={acceptor_id:Global.loggedInUserId,group_id:q,sender_id:p,invited_time:s};$.extend(r,Global.getUserCredentials());if(Global.devMode){r.url=Global.APIs.group.accept.uri;r.type=Global.APIs.group.accept.type}return $.ajax({url:Global.devMode?Global.bridge:Global.APIs.group.accept.uri,type:Global.APIs.group.accept.type,dataType:"json",data:r})};var d=function(){var q=$(this),p=q.parents("article:eq(0)");p.addClass("disabled-button");$.when(h(q.data("groupId"),q.data("userId"),q.data("invitedTime"))).then(function(){p.addClass("dead").delay(j).slideUp(j,function(){p.remove()})})};var i=function(q,p,s){var r={denier_id:Global.loggedInUserId,group_id:q,sender_id:p,invited_time:s};$.extend(r,Global.getUserCredentials());if(Global.devMode){r.url=Global.APIs.group.deny.uri;r.type=Global.APIs.group.deny.type}return $.ajax({url:Global.devMode?Global.bridge:Global.APIs.group.deny.uri,type:Global.APIs.group.deny.type,dataType:"json",data:r})};var f=function(){var q=$(this),p=q.parents("article:eq(0)");p.addClass("disabled-button");$.when(i(q.data("groupId"),q.data("userId"),q.data("invitedTime"))).then(function(r){p.addClass("dead").delay(j).slideUp(j,function(){p.remove()})})};var e=function(){var q=$(this),t=Global.loggedInUserId,r=q.data("group_id"),p=q.data("user_id"),s=q.data("invited_time"),v=q.parents(".item"),u="There was an error in processing the request.";$.when(Utils.denyUserRequest(r,p,s)).then(function(w){if(w.success==true){v.fadeOut("medium")}else{Utils.triggerGlobalInformer(u,5,{isError:true})}})};var m=function(){var q=$(this),t=Global.loggedInUserId,r=q.data("group_id"),p=q.data("user_id"),s=q.data("invited_time"),v=q.parents(".item"),u="There was an error in processing the request.";$.when(Utils.acceptUserRequest(r,p,s)).then(function(w){if(w.success==true){v.fadeOut("medium")}else{Utils.triggerGlobalInformer(u,5,{isError:true})}})};var c=function(A){var u,v=A.length,w="<div>";for(u=0;u<v;u++){var y=A[u],r=Utils.getFroggyURL(y.user_id),D=Utils.getAvatar48(y.avatar_server,y.avatar_filename,y.avatar_crop),p=y.first_name+" "+y.last_name,B=Utils.getGroupById(y.group_id).name,s=Utils.getDateString(y.invited_time),q=y.user_id,t=y.group_id,C=y.invited_time;w+='<div class="item">						<div class="avatar">							<a href="'+r+'"><img src="'+D+'"></a>						</div>						<div class="info">							<div class="name">								<a href="'+r+'">'+p+"</a>								<span>wants to add you to "+B+'.</span>							</div>							<div class="date">'+s+'</div>							<div class="clear"></div>						</div>						<div class="buttons">							<a class="accept-bt blue-button" data-user_id="'+q+'" data-group_id="'+t+'" data-invited_time="'+C+'">								Accept							</a>							<a class="deny-bt white-button" data-user_id="'+q+'" data-group_id="'+t+'" data-invited_time="'+C+'">								Deny							</a>							<div class="clear"></div>						</div>						<div class="clear"></div>					</div>					<div class="clear"></div>'}w+="</div>";g.append(w)};var n=function(){g.on("click",".accept-bt",function(){m.call(this)});g.on("click",".deny-bt",function(){e.call(this)})};b.init=function(){o();n()};return b})();Global.Photos=(function(){var q={},w="",c="",g="",x=[],e=[[],[],[]],a=20,r=5,B=Global.groups.friends,l=[{endOffset:"",reachedEnd:false,loadingOlder:false,forceLoadOlder:true},{endOffset:"",reachedEnd:false,loadingOlder:false,forceLoadOlder:true},{endOffset:"",reachedEnd:false,loadingOlder:false,forceLoadOlder:true}],d=$("#site-right .groups a"),y=$("#loading-more"),b=$("#nav-divider"),i=null,u=250,m=$(window),f=$(document),A=0.15,z='<div class="nothing">There are no photos in this group.</div>',j=$("#badge-group-feeds"),t=$("#badge-info"),p=10;var n=function(){d.on("click",function(){var G=$(this),E=G.siblings(".active:eq(0)"),C=!G.hasClass("loaded");if(G.hasClass("active")){return}var F=B=Utils.getGroupById(G.data("group_id")),D=F.id,H=l[D];G.addClass("active")&&E.removeClass("active");b.removeClass(E.data("class")).addClass(G.data("class"));if(C){G.addClass("loaded");$.when(Utils.getUserImages(D,g,a,null)).then(function(I){if(I&&I.result&&I.result.length){H.endOffset=I.result[I.result.length-1]["image_id"];if(I.result.length<a){H.reachedEnd=true}}else{H.reachedEnd=true}v(I.result,$("#photos-"+(F.name.toLowerCase())),F)})}$("#photos-"+E.data("class")).removeClass("active")&&$("#photos-"+G.data("class")).addClass("active")});m.on("scroll",function(){i&&clearTimeout(i);i=setTimeout(function(){if((f.height()-m.height()-m.scrollTop())/f.height()<=A){o(B)}},u)})};var o=function(D){var C=D.id,E=l[C];if(!E.endOffset||E.reachedEnd||E.loadingOlder){return}E.loadingOlder=true;y.removeClass("hidden");$.when(Utils.getUserImages(C,g,a,E.endOffset)).then(function(F){y.addClass("hidden");E.loadingOlder=false;if(F&&F.result&&F.result.length){E.endOffset=F.result[F.result.length-1]["image_id"];if(F.result.length<a){E.reachedEnd=true}}else{E.reachedEnd=true}v(F.result,$("#photos-"+(D.name.toLowerCase())),D)})};var k=function(E){var D=E.group_id,C=0;$.each(e[D],function(G,F){if(F.image_id==E.image_id){C=G;return false}});e[D].splice(C,1);x[D].reset().push(e[D]);Utils.deleteImages(E.image_id,D,E.message_id)};var s=function(D){var C=$("<div />").addClass("clearfix no-user-select hovered").append($("<a />").addClass("share").attr("title","Share").html("Share"),$("<a />").addClass("remove").on("click",function(){k.call(this,D)}).attr("title","Remove this"));!D.shareable&&C.find(".share").remove();!D.removable&&C.find(".remove").remove();if(C.children().length<1){return""}return C};var v=function(D,E,F){if(!D||!D.length&&!E.find(".jg_result-row").length){E.html(z);return}var G=[],C=F.id;$.each(D,function(){var H=this,J=H.image_id.split(Global.mediaDelimiter);if(!J||!H.message||!H.message.message_id||!J.length||J.length<r){return true}var I=$.extend({},H.message,{width:J[3],height:J[4],thumbnail:Utils.getPrivateNormalSizeImage(J[0],J[1]),shareable:false,removable:Global.loggedInUserId==H.message.owner_id,server:J[0],filename:J[1],bucket:J[2],thumbnail_url:Utils.getMediaThumbnail(J[0],J[1]),large_url:Utils.getPrivateLargeSizeImage(J[0],J[1]),image_id:H.image_id});if(H.parent_message){I.parent_message=H.parent_message}delete I.likes;delete I.likes_count;delete I.liked;I.likes_count=H.likes_count;I.liked=H.liked;G.push(I);e[C].push(I)});if(G.length<1){if(E.children().length<1){E.html(z)}return}if(x[C]){x[C].push(G)}else{x[C]=new JGlance({container:E,enableLightBox:false,enableHoverInfo:true,hoverInfoCallback:s,hoverAnimateSpeed:50,maxPerRow:3,photoClickCallback:function(H){new Global.LightBox({medias:[H],index:0})},photoErrorCallback:function(I,H){H.attr("src",Global.emptyImage).addClass("broken-image")}}).push(G)}if(l[C].forceLoadOlder){o(F);l[C].forceLoadOlder=false}};var h=function(){var E=t.find(".profile h1"),D=j.find("a.photos span.text"),G=j.find(".top-nav h2"),F=E.text().split(" ")[0],C=E.height()>16?G.text().replace(F,F.shortenString(p)):false;C&&G.html(C)&&D.html(C.replace("Feeds","Photos"))};q.init=function(){n();h();return this};q.renderResultsFromJSON=function(C){v($.parseJSON(C),$("#photos-"+(B.name.toLowerCase())),B);return this};q.setOwnerAvatar=function(C){w=C;
return this};q.setOwnerName=function(C){c=C;return this};q.setOwnerId=function(C){g=C;return this};q.setEndOffset=function(D,C){l[C].endOffset=D;return this};return q})();var PromoPage=(function(){var n=350,k=null,i=1,r=["five","one","two","three"],m=8000,q=$("#carousel"),e=$("#carousel-controls a"),l=$("#dimmed-bg"),c=$("#pop-up-container"),g=$("body"),p=$("#email"),o="http://stream.imageshack.us/yfrog3_subscribe.php",a=$("#submit-button"),b=$("#pop-up-container .close");function h(){e.on("click",function(){k&&clearInterval(k);q.attr("class",$(this).attr("class"))});b.on("click",function(){c.removeClass("open");setTimeout(function(){c.removeClass("top");g.removeClass("overflown");l.removeClass("visible")},300)});a.on("click",j)}function j(){var s=$.trim(p.val()),t=$(this);if(!s||!s.isValidEmail()||t.hasClass("disabled")){return}t.addClass("disabled");f(s);c.find(".input-parent").empty().html("Thank you, we will notify you when yFrog Social has launched.")}function f(s){return $.ajax({url:o,type:"GET",dataType:"jsonp",data:{email:s}})}function d(){h();setTimeout(function(){q.addClass("five")},n);k=setInterval(function(){i=i%r.length;q.attr("class",r[i++])},m)}return{start:d}})();String.prototype.isValidEmail=function(){var a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return this.match(a)};Global.ResetPassword=(function(){var n={},i="",e=5,k=250,m=6,l='Your password has been reset. You will be forwarded to the log in page or you can click <a href="/">here</a> to go there now.',a=$("#reset-form"),p=$("#error"),q=$("#reset-button a"),d=$("#reset-password"),j=$("#new-pass-1, #new-pass-2"),b=$("#new-pass-1 input"),g=$("#new-pass-2 input"),c=$("#new-pass-1 input, #new-pass-2 input");var f=function(r){p.html(r).fadeIn("slow")};var o=function(){p.hide()};var h=function(){c.on("focus",function(){$(this).parent().addClass("hidden")}).on("blur",function(){var r=$(this);if(!r.val()){r.parent().removeClass("hidden")}});d.on("click",function(r){r.stopPropagation();a.submit()});a.on("submit",function(t){t.preventDefault();if(d.hasClass("disabled-button")){return}o();var s=b.val(),r=g.val();if(!s||!r){f("Fields cannot be blank!");return false}if(s!=r){f("Passwords do not match!");return false}if(s.length<m){f("Password too short!");return false}q.addClass("disabled-button");$.when(Utils.resetPassword(i,s)).then(function(u){q.removeClass("disabled-button");if(!u||!u.success){Utils.triggerGlobalInformer("We could not complete your request at this time, please try again later.",10,{isError:true});return}Utils.triggerGlobalSuccess(l,10);setTimeout(function(){window.top.location="/"},e*1000)});return false});q.on("click",function(){a.submit()})};n.init=function(){h();return this};n.setHash=function(r){i=r;return this};return n})();Global.Settings=(function(){var k=$("#site-right > .content"),G=$("body"),al=null,Q=$("#location"),W=$("#area-profile"),aj=W.find(".save-button a"),K=$("#area-notifications"),ab=K.find(".save-button a"),u=k.find(".tabs a"),J="",C="",p="",r="",I="",S=$("#avatar-area"),T=$("#avatar-upload-form"),f=T.find("input"),ae=$("#user-avatar"),af=$("#edit-avatar"),L=W.find(".email-type > a"),q="personal",ai=$("#settings-profile-visibility"),b=$("#visibility-anchor"),A="",ao="",v="",M="",am="",g="",a="",an=$("#change-password"),H=null,x=null,aa=150,X=$("#firstName"),E=$("#lastName"),F=$("#email"),P=$("#occupation"),i=$("#bio"),w=$("#b-month .selected"),z=$("#b-day"),e=$("#b-year"),ak=$("#gender .selected"),Z="We could not complete your request, please try again later.",aq=$("#email-notifications .controls .yf-slider-switch"),B=$("#email-notifications"),c=K.find(".popup"),m=21;function V(){u.on("click",function(){var ar=$(this);if(ar.hasClass("active")){return}ar.addClass("active").siblings(".active").removeClass("active");k.removeClass("profile notifications").addClass(ar.data("class"))});f.on("change",function(){if(S.hasClass("uploading")){return}I=J=C="";T.ajaxSubmit({dataType:"json",success:function(ar){S.toggleClass("uploading");if(ar&&ar.success&&ar.result){J=ar.result.server;C=ar.result.image;ae.attr("src",Utils.getAvatar96(ar.result.server,ar.result.image))}},error:function(ar){S.removeClass("uploading")},beforeSubmit:function(){S.addClass("uploading")}})});L.on("click",function(){var ar=$(this);ar.parent().removeClass("personal business").addClass(ar.attr("class"));q=ar.data("value")});ai.on("click",function(){$(this).toggleClass("checked")});b.on("mouseenter",function(){$(this).parent().addClass("tooltip")}).on("mouseleave",function(){$(this).parent().removeClass("tooltip")});an.on("click",ad);aj.on("click",U);ab.on("click",h);aq.on("click",function(){var au=$(this),at=au.parents(".controls:eq(0)"),ar=B.find(".content-row .yf-slider-switch");at.hasClass("all-on")?ar.addClass("off"):ar.removeClass("off");at.toggleClass("all-on")});c.on("mouseenter",function(){$(this).parent().addClass("popup-open")}).on("mouseleave",function(){$(this).parent().removeClass("popup-open")});X.on("keyup",function(av){av.stopPropagation();var au=$(this).val(),ar=au.length,at="That name is too long.  Please try again.";if(ar>=m){Utils.triggerGlobalInformer(at,3);return}});E.on("keyup",function(av){av.stopPropagation();var au=$(this).val(),ar=au.length,at="That name is too long.  Please try again.";if(ar>=m){Utils.triggerGlobalInformer(at,3);return}});af.on("click",function(){new Global.AvatarEditor({server:J||p,filename:C||r,callback:ah})})}function ag(){V();al=new Global.LocationAutoComplete({input:Q,parent:W.find(".location-occupation"),locationText:Q.val()});return this}function ah(ar){I=[ar.x,ar.y,ar.w,ar.h].join(":");ae.attr("src",Utils.getAvatar96(J||p,C||r,I))}function h(){var ar={},at=$(this);if(at.hasClass("disabled")){return}at.addClass("disabled");K.find(".yf-slider-switch").each(function(){var au=$(this);if(!au.data("key")){return true}ar[au.data("key")]=!au.hasClass("off")});$.when(Utils.updateNotificationSettings(ar)).then(function(au){if(au&&au.success){Utils.triggerGlobalSuccess("Changes were saved successfully",2)}else{Utils.triggerGlobalInformer(Z,3)}}).always(function(){at.removeClass("disabled")}).fail(function(){Utils.triggerGlobalInformer(Z,3)})}function U(){var az=$(this);if(az.hasClass("disabled")){return}var aC={},aH=parseInt(w.data("value")),aE=parseInt(z.val()),aB=parseInt(e.val()),au=new Date(),ax=$.trim(Utils.stripHtml(X.val())),aF=$.trim(Utils.stripHtml(E.val())),ar=$.trim(Utils.stripHtml(F.val())),aK=$.trim(Utils.stripHtml(P.val())),aJ=$.trim(Utils.stripHtml(i.val())),aI=v!=ax&&ax.length>1,aA=M!=aF&&aF.length>1,ay=am!=ar&&ar.isValidEmail(),at=ao!=q,aw=a!=aK,aG=g!=aJ,av=A!=al.getLocationText(),aD="That name is too long.  Please try again.";if(aI){if(ax.length<m){Global.loggedInUserFirstName=ax;$.extend(aC,{first_name:ax})}else{Utils.triggerGlobalInformer(aD,3);
return}}if(aA){if(aF.length<m){Global.loggedInUserLastName=aF;$.extend(aC,{last_name:aF})}else{Utils.triggerGlobalInformer(aD,3);return}}ay&&$.extend(aC,{email:ar});at&&$.extend(aC,{email_type:q});$.extend(aC,{occupation:aw?aK:a});$.extend(aC,{bio:aG?aJ:g});aC.searchable=!ai.hasClass("checked");if(C&&J){aC.avatar_server=J;aC.avatar_filename=C;Global.loggedInUserAvatar=Utils.getAvatar96(J,C)}aC.avatar_crop=I;if(I){Global.loggedInUserAvatar=Utils.getAvatar96(J||p,C||r,I)}$.extend(aC,{location:av?al.getLocationText():A});aC.gender=ak.data("value")||"";!isNaN(aH)&&!isNaN(aE)&&!isNaN(aB)&&aH>0&&aE>0&&aE<32&&aB<=au.getFullYear()&&aB>=au.getFullYear()-130&&$.extend(aC,{birth_date:Date.parse(aH+"/"+aE+"/"+aB)/1000});az.addClass("disabled");$.when(Utils.updateUserCookie(aC)).then(function(aL){if(aL&&aL.success){$("#profile-badge .top a, #global-drop-down-content a.user").html(Global.loggedInUserFirstName+" "+Global.loggedInUserLastName);$("#profile-badge .top img, #global-avatar img").attr("src",Global.loggedInUserAvatar);Utils.triggerGlobalSuccess("Changes were saved successfully",2);if(aI){v=ax}if(aA){M=aF}if(ay){am=ar}if(aw){a=aK}if(aG){g=aJ}if(av){A=al.getLocationText()}if(C&&J){r=C;p=J}J=C=""}else{Utils.triggerGlobalInformer(aL.error||Z,7,{isError:true})}}).always(function(){az.removeClass("disabled")}).fail(function(){Utils.triggerGlobalInformer(Z,3,{isError:true})})}function y(at,ar){return $("<div />").addClass("default-text-input box-shadow-inset border-radius-2 change-pw-input").append($("<input />").on("keyup",function(av){var au=av.keyCode||av.which;au==Global.keyCodes.enter&&ap()}).addClass("input").attr({type:"password",value:"",name:ar,autocomplete:"off"}),$("<input />").addClass("text").attr({type:"text",value:at,autocomplete:"off",tabIndex:"-1"}))}function d(){x=$("<div />").attr("id","settings-pw-change-bg");H=$("<div />").attr("id","settings-pw-change-container").append($("<div />").addClass("border-radius-5 wrapper").append($("<a />").addClass("yf-close-button").on("click",o),y("Old Password","current_password"),y("New Password","password"),y("Confirm New","password_again"),$("<div />").addClass("clearfix buttons").append($("<a />").on("click",o).addClass("white-button").html("Nevermind"),$("<a />").on("click",ap).addClass("blue-button").html("Change"))));G.append(x,H)}function ad(){G.addClass(Global.lightBoxModeClass);d();setTimeout(function(){H.find(".wrapper").addClass("open")},aa)}function o(){H.find(".wrapper").removeClass("open");setTimeout(function(){H.remove();x.remove();x=H=null;G.removeClass(Global.lightBoxModeClass)},aa)}function ap(){var at={},ar=H.find(".buttons .blue-button");if(ar.hasClass("disabled")){return}ar.addClass("disabled");H.find("input.input").each(function(){var au=$(this);at[au.attr("name")]=au.val()});$.when(Utils.updateUserPassword(at)).then(function(au){if(!au){Utils.triggerGlobalInformer("Could not process your request at this time, please try again later.",3)}else{if(au.error){Utils.triggerGlobalInformer(au.error,3)}else{o();setTimeout(function(){Utils.triggerGlobalSuccess("Your password has been updated.",2)},aa)}}}).fail(function(){Utils.triggerGlobalInformer("Could not process your request at this time, please try again later.",3)}).always(function(){ar.removeClass("disabled")})}function D(ar){A=ar;return this}function ac(ar){q=ar;return this}function n(ar){ao=ar;return this}function j(ar){v=ar;return this}function O(ar){M=ar;return this}function s(ar){am=ar;return this}function R(ar){a=ar;return this}function l(ar){g=ar;return this}function t(ar){p=ar;return this}function Y(ar){r=ar;return this}function N(ar){I=ar;return this}return{init:ag,setCurrentLocation:D,setEmailType:ac,setCurrentEmailType:n,setCurrentFirstName:j,setCurrentLastName:O,setCurrentEmail:s,setCurrentOccupation:R,setCurrentBio:l,setCurrentAvatarServer:t,setCurrentAvatarFilename:Y,setCurrentAvatarCrop:N}})();Global.Signup=(function(){var z=$("#location"),A=$("#location-parent"),j=$("#user-avatar"),c=$("#avatar-area input"),B=$("#avatar-upload-form"),U=$("#avatar-area"),n="",e="",a="",k=$("#submit-button"),m=$("#step-one"),F=$("#step-two"),y=$("#step-three"),h=$("#step-four"),E=$("#step-five"),K=$("#edit-avatar"),R=m.find("input.input"),t=F.find("input.input"),J=h.find("input.bday, input.byear"),P=y.find("input.input"),I="step-error",G="has-error",H=2,D=6,T=null,C=$(R.get(0)),s=$(R.get(1)),x=$(P.get(0)),v=$(P.get(1)),l=h.find(".yf-drop-down .selected"),p=$(J.get(0)),d=$(J.get(1)),g=$("#tagline"),M=$("#hidden-inviter-id"),u=$("#step-two .content .right-part a"),i="personal",w=$("#occupation"),S=$("#occupation-gender").find(".yf-drop-down .selected"),O=$("#hidden-flag");var L=function(){$(".step input.input").each(function(){if(!$(this).val()){$(this).focus();return false}});T=new Global.LocationAutoComplete({input:z,parent:A});c.on("change",function(){if(U.hasClass("uploading")){return}U.removeClass("uploaded");a=n=e="";B.ajaxSubmit({dataType:"json",success:function(V){U.removeClass("uploading");U.addClass("uploaded");if(V&&V.success&&V.result){n=V.result.server;e=V.result.image;j.attr("src",Utils.getAvatar96(V.result.server,V.result.image));b()}},error:function(){U.removeClass("uploading")},beforeSubmit:function(){U.addClass("uploading")}})});O.on("click",function(){var V=$(this);if(V.hasClass("visible")){V.removeClass("visible").addClass("hidden").data("value","hidden");return}if(V.hasClass("hidden")){V.removeClass("hidden").addClass("visible").data("value","visible");return}});R.on("blur",Q).on("focus",function(){$(this).parent().removeClass(I)});t.on("blur",r).on("focus",function(){$(this).parent().removeClass(I)});u.on("click",function(){var V=$(this);V.parent().removeClass("personal business").addClass(V.attr("class"));i=V.data("value")});P.on("blur",f).on("focus",function(){$(this).parent().removeClass(I)});v.on("keyup",function(){var W=x.val(),V=v.val();if(!W||!V||V.length<W.length){return}$(this).parents(".password-area:eq(0)").find("."+I).removeClass(I);f()});g.on("blur",b);k.on("click",q);setInterval(function(){o()},500);p.add(d).on("focus",function(){var V=$(this);if(V.data("default")==V.val()){V.val("")}}).on("blur",function(){var V=$(this);if(!V.val()){V.val(V.data("default"))}});K.on("click",function(){new Global.AvatarEditor({server:n,filename:e,callback:N})})};var N=function(V){a=[V.x,V.y,V.w,V.h].join(":");j.attr("src",Utils.getAvatar96(n,e,a))};var q=function(){var ab=$(this),ae=Q()||r()||f();if(ae||ab.hasClass("disabled")){if(ae){$("body,html").animate({scrollTop:0},800)}return}ab.addClass("disabled");var af=$.trim(Utils.stripHtml(g.val())),V=$.trim(Utils.stripHtml(w.val())),Z=Utils.stripHtml(S.data("value")),aa=parseInt(l.data("value")),ad=parseInt(p.val()),ac=parseInt(d.val()),W=new Date(),X=O.data("value")!=="hidden",Y={first_name:$.trim(C.val()),last_name:$.trim(s.val()),email:$.trim(t.val()),password:x.val(),password_again:v.val(),email_type:i,searchable:X};if(M.val().length>0){Y.invited_user_id=M.val()}V&&$.extend(Y,{occupation:V});Z&&$.extend(Y,{gender:Z});af&&$.extend(Y,{bio:af});n&&e&&$.extend(Y,{avatar_server:n,avatar_filename:e});a&&$.extend(Y,{avatar_crop:a});!isNaN(aa)&&!isNaN(ad)&&!isNaN(ac)&&aa>0&&ad>0&&ad<32&&ac<=W.getFullYear()&&ac>=W.getFullYear()-130&&$.extend(Y,{birth_date:Date.parse(aa+"/"+ad+"/"+ac)/1000});T.getLocationText()&&$.extend(Y,{location:T.getLocationText()});$.when(Utils.signUp(Y)).then(function(ag){if(ag&&ag.success){window.location="/signup_confirm"}else{if(ag&&ag.error){Utils.triggerGlobalInformer(ag.error,7)}else{Utils.triggerGlobalInformer("We could not complete your request at this time. Please try again later.",7)}}}).always(function(){ab.removeClass("disabled")}).fail(function(){Utils.triggerGlobalInformer("We could not complete your request at this time. Please try again later.",7)})};var Q=function(){var V=false,X=$(this),W=X.data("first");W&&X.data("first",false);if(W){return
}if(!C.val()||C.val().length<H){C.parent().addClass(I);V=true}if(!s.val()||s.val().length<H){s.parent().addClass(I);V=true}V?m.addClass(G):m.removeClass(G);V?m.removeClass("completed"):m.addClass("completed");return V};var r=function(){var V=false;if(!t.val()||!t.val().isValidEmail()){t.parent().addClass(I);V=true}V?F.addClass(G):F.removeClass(G);V?F.removeClass("completed"):F.addClass("completed");return V};var f=function(){var V=false,Y="",X=$(this),W=X.data("first");W&&X.data("first",false);if(W){return}if(!x.val()||x.val().length<D){x.parent().addClass(I);Y="Password must be 6 characters minimum";V=true}if(!v.val()||v.val().length<D){v.parent().addClass(I);Y="Password must be 6 characters minimum";V=true}if(!V&&x.val()!=v.val()){x.parent().addClass(I);v.parent().addClass(I);Y="Passwords do not match";V=true}V&&y.find(".error-text").html(Y);V?y.addClass(G):y.removeClass(G);V?y.removeClass("completed"):y.addClass("completed");return V};var o=function(){var V=false,Z=parseInt(l.data("value")),W=parseInt(p.val()),Y=parseInt(d.val()),X=new Date();if(Z<1){V=true}else{if(isNaN(W)||W>31||W<1){V=true}else{if(isNaN(Y)||Y>X.getFullYear()||Y<X.getFullYear()-130){V=true}else{if(!T.getLocationText()||!w.val()||!S.data("value")){V=true}}}}V?h.removeClass("completed"):h.addClass("completed");return V};var b=function(){var V=!g.val()||!n||!e;V?E.removeClass("completed"):E.addClass("completed")};return{init:L}})();Global.Welcome=(function(k){var g={},i=$(document),d=$("#email .yf-drop-down-group"),c=d.find(".check-me"),f=$("#send-email"),l=$("#email .email-form"),e=$(".yf-drop-down-group"),h=$("#welcome .gmail");g.begin=function(){m()};var m=function(){h.on("click",function(o){o.stopPropagation();window.location="/people/invite"});d.on("click",function(p){p.stopPropagation();var o=$(this);if(!o.hasClass("expanded")){i.on("click",a)}o.toggleClass("expanded").siblings(".yf-drop-down-group").removeClass("expanded")});c.on("click",function(s){s.stopPropagation();var r=$(this),p=r.children(".yf-check-box"),q=p.data("group_id"),o=r.parents(".yf-drop-down-group").prev(".sexy-input-parent").find(".input").val();if(p.hasClass("checked")){p.removeClass("checked")}else{p.addClass("checked")}});f.on("click",function(){b();return})};var b=function(){var t=[],s="Invitations were not sent successfully.",r="Please enter a valid email!",u,o,q,p;l.each(function(){var x=$(this),z=x.data("default"),y=x.val(),v=x.parent().next(".group-select").find(".checked");if(y!==z&&y.isValidEmail()){if(v.length>0){var w=[];v.each(function(){var A=$(this).data("group_id");w.push(A)});w=w.join(",");$.when(Utils.sendEmail(y,w,"")).then(function(A){if(A&&A.success){Utils.triggerGlobalSuccess("Your invite was sent successfully!",5);j();n.call(d);return}else{Utils.triggerGlobalInformer(s,5,{isError:true});return}})}else{Utils.triggerGlobalInformer("Please select groups!",5,{isError:true});return}}else{Utils.triggerGlobalInformer(r,5,{isError:true});return}})};var a=function(){d.removeClass("expanded");if(d.find(".checked").length>0){d.find(".selected").html("Selected")}else{d.find(".selected").html("Select Groups")}};var n=function(){var p=$(this),o=p.find(".yf-check-box");o.each(function(){var q=$(this);if(q.hasClass("checked")){q.removeClass("checked")}});p.find(".selected").html("Select Groups")};var j=function(){l.each(function(){var o=$(this),p=o.data("default");o.val(p).addClass("dead")})};return g})(Global||{});Global.Invite=(function(p){var i={},F=$(".contact-filters a"),n="",G=$(".email-trigger"),z=$("#my-contacts"),l=$("#search-input.contacts-search-flag"),m=$(".contact-content ._networks");i.begin=function(){q()};var q=function(){F.on("click",function(){var K=$(this),J=K.data("type"),I=$(".contact-content ._"+J);if(I.find(".contact-item").length>0){t.call(this,J,true)}else{t.call(this,J,false)}});G.on("click",function(){E.call(this)});z.on("click",".show-box",function(){var I=$(this);I.hide().siblings(".text-message").slideDown("fast").siblings(".send-message").show().siblings(".message-subject").show()}).on("click",".send-message",function(){var K=$(this),I=K.data("email"),J=K.data("type");if(J=="facebook"){H.call(this,I);return}if(!K.hasClass("add-groups")){K.addClass("add-groups")}else{r.call(this,J,I)}}).on("click",".contact-menu span",function(J){J.stopPropagation();var I=$(this);I.toggleClass("clicked")}).on("click",".viewing .get-more",function(){var J=$(this),K=J.data("offset"),I=J.data("type");b(I,K);J.remove()}).on("hover","#special-hover",function(){$(this).hide().addClass("hovered")}).on("click",".viewing .show-email-message",function(){E()}).on("keyup",".viewing .email-invite",function(J){J.stopPropagation();var I=(J.keyCode?J.keyCode:J.which);if(I==13){E()}}).on("click",".delete-service",function(J){J.stopPropagation();var I=$(this).data("type");h(I)}).on("click",".yahoo-trigger",function(){t("yahoo",true);x("yahoo")}).on("click",".gmail-trigger",function(){t("gmail",true);x("gmail")}).on("click",".facebook-trigger",function(){FB.login(function(I){if(I.authResponse){n=I.authResponse.accessToken;FB.api("/me/friends",{access_token:n},function(J){if(J.data&&J.data.length){t("facebook",true);f(J,"facebook",n)}})}})}).on("click",".email-trigger",function(){E.call(this)});l.on("keyup",function(){var J=$(this),K=J.val(),I=K.length;if(I>2){C(K)}else{if(I==0){t("networks",false)}}});Utils.assignScrollListener(function(){$(".viewing .get-more","#my-contacts").trigger("click")})};var h=function(I){if(!I){Utils.triggerGlobalInformer("There was an error deleting your contacts!  Please try again later.",5,{isError:true})}else{$.when(Utils.deleteContacts(I)).then(function(J){if(J&&J.success){Utils.triggerGlobalSuccess("Your "+u(I)+" contacts have been deleted!",5);D(I)}})}};var D=function(J){var M=$(".contact-content ._"+J),K='<img src="/images/up-arrow.png" border="0" class="group-arrow">',L=m.find(".portal."+J),I=J=="linkedin"?'<div id="special-hover" class="white-button"><span>Connect</span></div><div class="link-button-container float-right refresh-contacts"><script type="IN/Login">Hello, <?js= firstName ?> <?js= lastName ?>.<\/script></div>':'<div class="white-button '+J+'-trigger"><span>Connect</span></div>';if(!J){location.reload(true)}if(J=="linkedin"){K+='				<div class="no-contacts-message clearfix">					<div class="type-icon linkedin"></div>					<p>Connect with your LinkedIn contacts.</p>					<div id="special-hover" class="white-button">						<span>Connect</span>					</div>					<div class="link-button-container float-right">						<script type="IN/Login">                            Hello, <?js= firstName ?> <?js= lastName ?>.                        <\/script>                    </div>				</div>			'}else{K+='				<div class="no-contacts-message clearfix">					<div class="type-icon '+J+'"></div>					<p>Connect with your '+u(J)+' contacts.</p>					<div class="'+J+'-trigger white-button">						<span>Connect</span>					</div>				</div>			'}K+='			<div class="load-message clearfix">				<img src="/images/loader.gif" class="loader-gif float-left load-timer">				<p class="loader-text float-left load-timer">Please wait while we import your contacts!</p>			</div>		';t(J,false);M.html(K);L.find(".refresh-contacts").remove();L.append(I);if(J=="linkedin"){IN.init()}};var r=function(K,J){if(!K||!J){Utils.triggerGlobalInformer("A problem occurred while trying to send your invite.  Please try again later.",5,{isError:true});return}var L=$(this),O=L.children(".contact-menu");
if(!O.children("span").hasClass("clicked")){L.removeClass("add-groups");return}else{if(K=="linkedin"){var I=L.siblings(".message-subject").val(),N=L.siblings(".text-message").val();a.call(this,J,N,I);return}else{var M=[],N=L.siblings(".text-message").val();O.children("span").each(function(){var P=$(this);if(P.hasClass("clicked")){M.push(P.data("id"))}});M=M.join(",");g.call(this,J,M,N);return}}};var f=function(Q,W,M){var J=[],R;if(W&&W=="gmail"){var P=Q.result.feed?Q.result.feed:false,U=P.entry.length?P.entry.length:false;if(U&&P){for(R=0;R<U;R++){if(!P.entry[R]){continue}var N=P.entry[R],X=N.title.$t,T=!X.split(" ")[0]?"":X.split(" ")[0],I=!X.split(" ")[1]?"":X.split(" ")[1],V=!N.gd$email||!N.gd$email[0].address?false:N.gd$email[0].address,S=N.link[0].href+"?access_token="+M;if(!V){continue}else{J.push({first_name:T,last_name:I,id:V,avatar_url:S})}}}}if(W&&W=="facebook"){var P=Q.data,U=P.length;if(U&&P){for(R=0;R<U;R++){if(!P[R]){continue}var N=P[R],X=N.name,T=!X.split(" ")[0]?"":X.split(" ")[0],I=!X.split(" ")[1]?"":X.split(" ")[1],K=N.id,S="https://graph.facebook.com/"+K+"/picture?type=square";if(!X||!K){continue}else{J.push({first_name:T,last_name:I,id:K,avatar_url:S})}}}}if(W&&W=="linkedin"){var P=Q.values,U=P.length;if(U&&P){for(R=0;R<U;R++){if(!P[R]){continue}var N=P[R],T=N.firstName?N.firstName:"",I=N.lastName?N.lastName:"",K=N.id?N.id:false,S=N.pictureUrl?N.pictureUrl:false;if(!N||!K){continue}else{J.push({first_name:T,last_name:I,id:K,avatar_url:S})}}}}if(W&&W=="yahoo"){var P=jQuery.parseJSON(Q).contacts.contact;U=P.length;if(P&&U){for(R=0;R<U;R++){if(!P[R]||!P[R].fields||!P[R].fields[0].value){continue}var N=P[R],L=N.fields,O=L.length,K=N.fields[0].value?N.fields[0].value:false;if(O){if(O==2){var T=L[1].value.givenName?N.fields[1].value.givenName:"",I=L[1].value.familyName?N.fields[1].value.familyName:""}if(O==3){var T=L[2].value.givenName?N.fields[2].value.givenName:"",I=L[2].value.familyName?N.fields[2].value.familyName:""}}else{T="";I=""}if(!N||!K){continue}else{J.push({first_name:T,last_name:I,id:K,avatar_url:"http://yfrog.com/images/default-avatar-48x48.png"})}}}}if(J&&J.length>0&&W){$.when(Utils.sendContacts(J,W)).then(function(Y){if(!Y||!Y.success){Utils.triggerGlobalInformer("A problem occurred while trying to save contacts",5,{isError:true})}else{b(W,"",true)}})}else{Utils.triggerGlobalInformer("There was an error storing your contacts!  Please try again later.",5,{isError:true})}};var b=function(J,N,I){var K=20,L=J=="search"?true:false;if(L){var M=l.val();$.when(Utils.searchContacts(M,N)).then(function(O){if(O&&O.success){if(I){s(O,J,null,true)}else{s(O,J,null,false)}}else{Utils.triggerGlobalInformer("An error occurred while searching your contacts.",5,{isError:true})}})}else{$.when(Utils.getContacts(J,K,N)).then(function(O){if(O&&O.success){if(I){s(O,J,null,true)}else{s(O,J,null,false)}}else{Utils.triggerGlobalInformer("There was a problem retrieving your contacts!  Please try again later.	",5,{isError:true})}})}};var s=function(ab,K,P,Z){var N=ab.result,X=N.length,T=$(".contact-content ._"+K),V="",L=ab.end_offset?ab.end_offset:false,I=T.children(".load-message").children(".load-timer")?T.children(".load-message").children(".load-timer"):false,J=m.find(".portal."+K),O=K=="linkedin"?'<a class="refresh-contacts float-right delete-service" data-type="linkedin">Delete</a><span class="float-right delete-barrier refresh-contacts">|</span><a id="special-hover" class="refresh-contacts float-right">Update</a><div class="link-button-container float-right refresh-contacts"><script type="IN/Login">Hello, <?js= firstName ?> <?js= lastName ?>.<\/script></div>':'<a class="refresh-contacts float-right delete-service" data-type="'+K+'">Delete</a><span class="float-right refresh-contacts delete-barrier">|</span><a class="refresh-contacts '+K+'-trigger float-right">Update</a>',W;if(X==0){var M=K=="search"?"0 results returned for "+P+".":"There were no contacts found.";V+=M}else{for(W=0;W<X;W++){if(!N[W]){continue}var ac=N[W],Q=ac.avatar_url,U=ac.id,R=ac.type,aa=ac.first_name,S=ac.last_name;
useEmail=R=="csv"||R=="gmail"||R=="yahoo"?true:false,yfrogUser=ac.user?true:false,yfrogId=ac.user?ac.user.user_id:false;V+='					<div class="contact-item clearfix">						<img src="'+Q+'" onerror="Global.Invite.imageError(this)" class="float-left">						<div class="contact-name float-left">							<h2>'+aa+" "+S+"</h2>";if(useEmail){V+="							<h3>"+U+"</h3>"}V+='							<span class="type-icon-small '+R+'">'+u(R)+"</span>						</div>";if(R=="linkedin"){V+='<input class="float-left border-radius-3 message-subject box-shadow-inset" value="Come join me on yfrog Social!" >'}if(yfrogUser){V+='						<a class="white-button float-right" href="/user/'+yfrogId+'">							<span>View Profile</span>						</a>					'}else{if(R=="facebook"){V+='						<div class="white-button float-right send-message show-button" data-email="'+U+'" data-type="'+R+'">							<span>Connect</span>						</div>					'}else{V+='							<div class="white-button float-right show-box">								<span>Connect</span>							</div>							<textarea class="border-radius-3 box-shadow-inset text-message">I&apos;ve invited you to join me on yfrog Social!  Check it out : yfrog.com/user/'+Global.loggedInUserId+"   - "+Global.loggedInUserFirstName+'</textarea>							<div class="clear"></div>							<div class="white-button float-right send-message" data-email="'+U+'" data-type="'+R+'">								<span>Connect</span>								<div class="contact-menu">									<span data-id="1">Friends</span>									<span data-id="0">Family</span>									<span data-id="2">Business</span>								</div>							</div>'}}V+="					</div>					"}}if(L){V+='<div class="border-radius-3 shadowed-box clearfix get-more" data-offset="'+L+'" data-type="'+K+'">More</div>'}if(I){I.remove()}if(Z){var Y=ab.total==1?" Person":" People";T.children(".load-message").html(V);T.children(".contact-count").html(ab.total+Y);if(K!=="search"){Utils.triggerGlobalSuccess("Your "+u(K)+" contacts have been updated!",5);J.find(".white-button").remove();J.find(".refresh-contacts").remove();J.append(O);if(K=="linkedin"){IN.init()}}}else{T.children(".load-message").append(V)}};var u=function(I){return I.charAt(0).toUpperCase()+I.slice(1)};var C=function(I){var J=encodeURIComponent(I);$.when(Utils.searchContacts(J)).then(function(K){if(K&&K.success){t("search",true);s(K,"search",I,true)}else{Utils.triggerGlobalInformer("An error occurred while searching your contacts.",5,{isError:true})}})};var E=function(){var J=$(".viewing .email-invite"),M=J.val(),P="Please enter a valid email!",L="There was an error, please try again later.",O="Your invite was sent successfully!",N=J.data("default"),I=$(".viewing .show-email-message"),K=$(".viewing .send-message");if(!M.isValidEmail()){Utils.triggerGlobalInformer(P,5,{isError:true});return}else{K.data("email",M).data("type","email");I.hide().siblings(".text-message").slideDown("fast").siblings(".send-message").show();return;$.when(Utils.sendEmail(M,1,"")).then(function(Q){if(Q&&Q.success){Utils.triggerGlobalSuccess(O,5);J.addClass("dead").text(N).val(N)}else{Utils.triggerGlobalInformer(L,5,{isError:true})}})}};var t=function(K,M){var L=$(this),I=$(".contact-content ._"+K);if(L.data("type")){L.addClass("active").siblings().removeClass("active")}else{var J=F.filter(function(){return $(this).data("type")==K});J.addClass("active").siblings().removeClass("active")}I.show().addClass("viewing").siblings().removeClass("viewing").hide();if(M){I.addClass("loading").siblings().removeClass("loading")}else{I.removeClass("loading")}};i.imageError=function(I){I.src="/images/default-avatar-48x48.png";I.onError=""};var x=function(K){var I;if(K=="gmail"){I={respType:"token",clientId:"162622705334.apps.googleusercontent.com",redURI:location.protocol?location.protocol+"//yfrog.com/page/oauth_router":"http://yfrog.com/page/oauth_router",scope:"https://www.google.com/m8/feeds",state:A(16),serviceURI:"https://accounts.google.com/o/oauth2/auth?",id:"gmail"}}if(K=="yahoo"){$.when(c("/oauth/get_request_token",{protocol:location.protocol},"GET")).then(function(N){var L=o("oauth_problem","?"+N)?true:false;
c("/oauth/session_start",N,"GET");if(N&&!L){var M=decodeURIComponent(o("xoauth_request_auth_url","?"+N));window.open(M,"mywindow","location=no,top=200,left=500,menubar=1,resizable=0,width=850,height=550")}else{Utils.triggerGlobalInformer("We're sorry, there was an error.  Please try again later.",5,{isError:true})}});return}if(K=="microsoft"){var I={respType:"token",clientId:"000000004407681F",redURI:"http://yfrog.com/page/oauth_router",scope:"wl.basic,wl.emails",display:"popup",state:A(16),serviceURI:"https://oauth.live.com/authorize?",id:"microsoft"}}var J=B(I);i.storeType.data=J.id;if(i.storeType()=="gmail"||i.storeType()=="microsoft"){window.open(J.rsrc,"mywindow","location=no,top=200,left=500,menubar=1,resizable=0,width=850,height=550")}};i.checkMe=function(K,I,J){if(i.storeType()=="gmail"){k(K,I);return}};i.yahooRouter=function(I){y(I);return};i.storeType=function(){return i.storeType.data};var y=function(I){var J={token_verifier:I};$.when(c("/oauth/get_acc_token",J,"GET")).then(function(K){if(K&&d(K)){f(K,"yahoo","")}else{var L="There was a problem retreiving your Yahoo contacts!";Utils.triggerGlobalInformer(L,5,{isError:true})}})};var d=function(J){try{JSON.parse(J)}catch(I){return false}return true};var c=function(K,J,I){return $.ajax({url:K,type:I,data:J})};var o=function(J,L){J=J.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var I="[\\?&]"+J+"=([^&#]*)",M=new RegExp(I),K=M.exec(L);if(K==null){return false}else{return K[1]}};i.getINContacts=function(I){if(!I){var J="There was a problem retreiving your LinkedIn contacts!";Utils.triggerGlobalInformer(J,5,{isError:true})}else{t("linkedin",true);f(I,"linkedin","")}};i.getINContactsError=function(I){if(!I){var J="There was a problem retreiving your LinkedIn contacts!";Utils.triggerGlobalInformer(J,5,{isError:true})}else{displayLinkedContacts(I.values)}};var A=function(M){var L="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",M=M,K="",J;for(J=0;J<M;J++){var I=Math.floor(Math.random()*L.length);K+=L.substring(I,I+1)}return K};var B=function(J){var I;if(J.id=="gmail"){J.respType="response_type="+J.respType+"&";J.clientId="client_id="+encodeURIComponent(J.clientId)+"&";J.redURI="redirect_uri="+encodeURIComponent(J.redURI)+"&";J.scope="scope="+encodeURIComponent(J.scope)+"&";J.state="state="+J.state;I={rsrc:J.serviceURI+J.respType+J.clientId+J.redURI+J.scope+J.state,id:J.id}}return I};var k=function(K,J){var I;if(i.storeType()=="gmail"){I=location.protocol?location.protocol+window.location.hostname+"/catchtoken?"+K:"http://"+window.location.hostname+"/catchtoken?"+K}$.when(c(I,{},"GET")).then(function(L){if(!L){Utils.triggerGlobalInformer(e.error,5,{isError:true})}else{j(J)}})};var j=function(I){$.when(c("/auth/google_oauth.json","code="+I,"GET")).then(function(J){if(J&&J.result.audience=="162622705334.apps.googleusercontent.com"){w(I)}else{Utils.triggerGlobalInformer("There was a problem connecting with your account.",5,{isError:true})}})};var w=function(I){$.when(c("/group/google_verified.json","access_token="+I,"GET")).then(function(J){if(J){f(J,"gmail",I)}else{Utils.triggerGlobalInformer(J.error,5,{isError:true})}})};var H=function(I){var J=$(this);FB.ui({method:"send",name:"I've invited you to join my network on yfrog Social",link:"http://yfrog.com/user/"+Global.loggedInUserId,to:I,description:"Sign up and check out my profile on yfrog Social network. For more info about yfrog Social visit http://yfrog.com/promo",picture:"http://yfrog.com/images/yfrog3-logo-180x180.jpg"},function(K){if(K&&K.success){var L=J.parents(".contact-item").length>0?J.parents(".contact-item"):false;Utils.triggerGlobalSuccess("Your invite was sent successfully!",5);if(L){L.fadeOut("fast")}}else{Utils.triggerGlobalInformer("There was an error, please try again later.",5,{isError:true})}})};var a=function(P,O,I){var K=P,N=$(this),M=N.parents(".contact-item"),L={recipients:{values:[{person:{_path:"/people/"+K}}]},subject:I,body:O};IN.API.Raw("/people/~/mailbox").method("POST").body(JSON.stringify(L)).result(function(Q){Utils.triggerGlobalSuccess("Your invite was sent successfully!",5);
M.fadeOut("fast")}).error(function J(Q){Utils.triggerGlobalInformer('Please refresh your token by clicking "Update Contacts"!',5,{isError:true})})};var g=function(J,I,M){var L=$(this),K=L.parents(".contact-item").length>0?L.parents(".contact-item"):false;$.when(Utils.sendEmail(J,I,M)).then(function(N){if(N&&N.success){Utils.triggerGlobalSuccess("Your invite was sent successfully!",5);if(!K){v(L)}else{K.fadeOut("fast")}}else{Utils.triggerGlobalInformer("A problem occurred while trying to send your invite.  Please try again later.",5,{isError:true})}})};var v=function(K){var I=K.siblings(".reset-message"),L=K.siblings(".show-email-message"),J=$(".viewing .email-invite"),M="I&apos;ve invited you to join me on yfrog Social!  Check it out : yfrog.com/user/"+Global.loggedInUserId+"   - "+Global.loggedInUserFirstName;K.hide().removeClass("add-groups").children(".contact-menu").children().removeClass("clicked");J.val(J.data("default")).addClass("dead");I.hide().html(M);L.fadeIn("fast")};return i})(Global||{});function linkedLoader(){IN.Event.on(IN,"auth",getContacts)}function getContacts(){IN.API.Connections("me").fields("firstName","lastName","id","picture-url").result(Global.Invite.getINContacts).error(Global.Invite.INcontactsError)};