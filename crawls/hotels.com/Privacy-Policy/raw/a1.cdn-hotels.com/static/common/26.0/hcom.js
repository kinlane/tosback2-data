/*
 * jQuery JavaScript Library v1.8.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
 */
(function(window,undefined){var rootjQuery,readyList,document=window.document,location=window.location,navigator=window.navigator,_jQuery=window.jQuery,_$=window.$,core_push=Array.prototype.push,core_slice=Array.prototype.slice,core_indexOf=Array.prototype.indexOf,core_toString=Object.prototype.toString,core_hasOwn=Object.prototype.hasOwnProperty,core_trim=String.prototype.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},core_pnum=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,core_rnotwhite=/\S/,core_rspace=/\s+/,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rquickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return(letter+"").toUpperCase()},DOMContentLoaded=function(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);jQuery.ready()}else{if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);jQuery.ready()}}},class2type={};jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector){return this}if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}if(typeof selector==="string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;doc=(context&&context.nodeType?context.ownerDocument||context:document);selector=jQuery.parseHTML(match[1],doc,true);if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){this.attr.call(selector,context,true)}return jQuery.merge(this,selector)}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2]){return rootjQuery.find(selector)}this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else{if(!context||context.jquery){return(context||rootjQuery).find(selector)}else{return this.constructor(context).find(selector)}}}else{if(jQuery.isFunction(selector)){return rootjQuery.ready(selector)}}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return core_slice.call(this)},get:function(num){return num==null?this.toArray():(num<0?this[this.length+num]:this[num])},pushStack:function(elems,name,selector){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;if(name==="find"){ret.selector=this.selector+(this.selector?" ":"")+selector}else{if(name){ret.selector=this.selector+"."+name+"("+selector+")"}}return ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){jQuery.ready.promise().done(fn);return this},eq:function(i){i=+i;return i===-1?this.slice(i):this.slice(i,i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(core_slice.apply(this,arguments),"slice",core_slice.call(arguments).join(","))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(length===i){target=this;--i}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else{if(copy!==undefined){target[name]=copy}}}}}return target};jQuery.extend({noConflict:function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery},isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return }if(!document.body){return setTimeout(jQuery.ready,1)}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return }readyList.resolveWith(document,[jQuery]);if(jQuery.fn.trigger){jQuery(document).trigger("ready").off("ready")}},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array"},isWindow:function(obj){return obj!=null&&obj==obj.window},isNumeric:function(obj){return !isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return obj==null?String(obj):class2type[core_toString.call(obj)]||"object"},isPlainObject:function(obj){if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false}try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}var key;for(key in obj){}return key===undefined||core_hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj){return false}return true},error:function(msg){throw new Error(msg)},parseHTML:function(data,context,scripts){var parsed;if(!data||typeof data!=="string"){return null}if(typeof context==="boolean"){scripts=context;context=0}context=context||document;if((parsed=rsingleTag.exec(data))){return[context.createElement(parsed[1])]}parsed=jQuery.buildFragment([data],context,scripts?null:[]);return jQuery.merge([],(parsed.cacheable?jQuery.clone(parsed.fragment):parsed.fragment).childNodes)},parseJSON:function(data){if(!data||typeof data!=="string"){return null}data=jQuery.trim(data);if(window.JSON&&window.JSON.parse){return window.JSON.parse(data)}if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return(new Function("return "+data))()}jQuery.error("Invalid JSON: "+data)},parseXML:function(data){var xml,tmp;if(!data||typeof data!=="string"){return null}try{if(window.DOMParser){tmp=new DOMParser();xml=tmp.parseFromString(data,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data)}}catch(e){xml=undefined}if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data)}return xml},noop:function(){},globalEval:function(data){if(data&&core_rnotwhite.test(data)){(window.execScript||function(data){window["eval"].call(window,data)})(data)}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var name,i=0,length=obj.length,isObj=length===undefined||jQuery.isFunction(obj);if(args){if(isObj){for(name in obj){if(callback.apply(obj[name],args)===false){break}}}else{for(;i<length;){if(callback.apply(obj[i++],args)===false){break}}}}else{if(isObj){for(name in obj){if(callback.call(obj[name],name,obj[name])===false){break}}}else{for(;i<length;){if(callback.call(obj[i],i,obj[i++])===false){break}}}}return obj},trim:core_trim&&!core_trim.call("\uFEFF\xA0")?function(text){return text==null?"":core_trim.call(text)}:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var type,ret=results||[];if(arr!=null){type=jQuery.type(arr);if(arr.length==null||type==="string"||type==="function"||type==="regexp"||jQuery.isWindow(arr)){core_push.call(ret,arr)}else{jQuery.merge(ret,arr)}}return ret},inArray:function(elem,arr,i){var len;if(arr){if(core_indexOf){return core_indexOf.call(arr,elem,i)}len=arr.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++){if(i in arr&&arr[i]===elem){return i}}}return -1},merge:function(first,second){var l=second.length,i=first.length,j=0;if(typeof l==="number"){for(;j<l;j++){first[i++]=second[j]}}else{while(second[j]!==undefined){first[i++]=second[j++]}}first.length=i;return first},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;inv=!!inv;for(;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal){ret.push(elems[i])}}return ret},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&typeof length==="number"&&((length>0&&elems[0]&&elems[length-1])||length===0||jQuery.isArray(elems));if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value}}}else{for(key in elems){value=callback(elems[key],key,arg);if(value!=null){ret[ret.length]=value}}}return ret.concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}args=core_slice.call(arguments,2);proxy=function(){return fn.apply(context,args.concat(core_slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},access:function(elems,fn,key,value,chainable,emptyGet,pass){var exec,bulk=key==null,i=0,length=elems.length;if(key&&typeof key==="object"){for(i in key){jQuery.access(elems,fn,i,key[i],1,emptyGet,value)}chainable=1}else{if(value!==undefined){exec=pass===undefined&&jQuery.isFunction(value);if(bulk){if(exec){exec=fn;fn=function(elem,key,value){return exec.call(jQuery(elem),value)}}else{fn.call(elems,value);fn=null}}if(fn){for(;i<length;i++){fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass)}}chainable=1}}return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date()).getTime()}});jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"){setTimeout(jQuery.ready,1)}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",jQuery.ready,false)}else{document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",jQuery.ready);var top=false;try{top=window.frameElement==null&&document.documentElement}catch(e){}if(top&&top.doScroll){(function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}jQuery.ready()}})()}}}}return readyList.promise(obj)};jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});rootjQuery=jQuery(document);var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.split(core_rspace),function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?(optionsCache[options]||createOptions(options)):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break}}firing=false;if(list){if(stack){if(stack.length){fire(stack.shift())}}else{if(memory){list=[]}else{self.disable()}}}},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"){if(!options.unique||!self.has(arg)){list.push(arg)}}else{if(arg&&arg.length&&type!=="string"){add(arg)}}})})(arguments);if(firing){firingLength=list.length}else{if(memory){firingStart=start;fire(memory)}}}return this},remove:function(){if(list){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){firingLength--}if(index<=firingIndex){firingIndex--}}}})}return this},has:function(fn){return jQuery.inArray(fn,list)>-1},empty:function(){list=[];return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return !list},lock:function(){stack=undefined;if(!memory){self.disable()}return this},locked:function(){return !stack},fireWith:function(context,args){args=args||[];args=[context,args.slice?args.slice():args];if(list&&(!fired||stack)){if(firing){stack.push(args)}else{fire(args)}}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return !!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=fns[i];deferred[tuple[1]](jQuery.isFunction(fn)?function(){var returned=fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify)}else{newDefer[action+"With"](this===deferred?newDefer:this,[returned])}}:newDefer[action])});fns=null}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=list.fire;deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function(subordinate){var i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=length!==1||(subordinate&&jQuery.isFunction(subordinate.promise))?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?core_slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values)}else{if(!(--remaining)){deferred.resolveWith(contexts,values)}}}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues))}else{--remaining}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()}});jQuery.support=(function(){var support,all,a,select,opt,input,fragment,eventName,i,isSupported,clickFn,div=document.createElement("div");div.setAttribute("className","t");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";all=div.getElementsByTagName("*");a=div.getElementsByTagName("a")[0];if(!all||!a||!all.length){return{}}select=document.createElement("select");opt=select.appendChild(document.createElement("option"));input=div.getElementsByTagName("input")[0];a.style.cssText="top:1px;float:left;opacity:.5";support={leadingWhitespace:(div.firstChild.nodeType===3),tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:(a.getAttribute("href")==="/a"),opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:(input.value==="on"),optSelected:opt.selected,getSetAttribute:div.className!=="t",enctype:!!document.createElement("form").enctype,html5Clone:document.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:(document.compatMode==="CSS1Compat"),submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=false}if(!div.addEventListener&&div.attachEvent&&div.fireEvent){div.attachEvent("onclick",clickFn=function(){support.noCloneEvent=false});div.cloneNode(true).fireEvent("onclick");div.detachEvent("onclick",clickFn)}input=document.createElement("input");input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t";input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);fragment=document.createDocumentFragment();fragment.appendChild(div.lastChild);support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;support.appendChecked=input.checked;fragment.removeChild(input);fragment.appendChild(div);if(div.attachEvent){for(i in {submit:true,change:true,focusin:true}){eventName="on"+i;isSupported=(eventName in div);if(!isSupported){div.setAttribute(eventName,"return;");isSupported=(typeof div[eventName]==="function")}support[i+"Bubbles"]=isSupported}}jQuery(function(){var container,div,tds,marginDiv,divReset="padding:0;margin:0;border:0;display:block;overflow:hidden;",body=document.getElementsByTagName("body")[0];if(!body){return }container=document.createElement("div");container.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";body.insertBefore(container,body.firstChild);div=document.createElement("div");container.appendChild(div);div.innerHTML="<table><tr><td></td><td>t</td></tr></table>";tds=div.getElementsByTagName("td");tds[0].style.cssText="padding:0;margin:0;border:0;display:none";isSupported=(tds[0].offsetHeight===0);tds[0].style.display="";tds[1].style.display="none";support.reliableHiddenOffsets=isSupported&&(tds[0].offsetHeight===0);div.innerHTML="";div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";support.boxSizing=(div.offsetWidth===4);support.doesNotIncludeMarginInBodyOffset=(body.offsetTop!==1);if(window.getComputedStyle){support.pixelPosition=(window.getComputedStyle(div,null)||{}).top!=="1%";support.boxSizingReliable=(window.getComputedStyle(div,null)||{width:"4px"}).width==="4px";marginDiv=document.createElement("div");marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";div.appendChild(marginDiv);support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)}if(typeof div.style.zoom!=="undefined"){div.innerHTML="";div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1";support.inlineBlockNeedsLayout=(div.offsetWidth===3);div.style.display="block";div.style.overflow="visible";div.innerHTML="<div></div>";div.firstChild.style.width="5px";support.shrinkWrapBlocks=(div.offsetWidth!==3);container.style.zoom=1}body.removeChild(container);container=div=tds=marginDiv=null});fragment.removeChild(div);all=a=select=opt=input=fragment=div=null;return support})();var rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return !!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(!jQuery.acceptData(elem)){return }var thisCache,ret,internalKey=jQuery.expando,getByName=typeof name==="string",isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if((!id||!cache[id]||(!pvt&&!cache[id].data))&&getByName&&data===undefined){return }if(!id){if(isNode){elem[internalKey]=id=jQuery.deletedIds.pop()||jQuery.guid++}else{id=internalKey}}if(!cache[id]){cache[id]={};if(!isNode){cache[id].toJSON=jQuery.noop}}if(typeof name==="object"||typeof name==="function"){if(pvt){cache[id]=jQuery.extend(cache[id],name)}else{cache[id].data=jQuery.extend(cache[id].data,name)}}thisCache=cache[id];if(!pvt){if(!thisCache.data){thisCache.data={}}thisCache=thisCache.data}if(data!==undefined){thisCache[jQuery.camelCase(name)]=data}if(getByName){ret=thisCache[name];if(ret==null){ret=thisCache[jQuery.camelCase(name)]}}else{ret=thisCache}return ret},removeData:function(elem,name,pvt){if(!jQuery.acceptData(elem)){return }var thisCache,i,l,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(!cache[id]){return }if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!jQuery.isArray(name)){if(name in thisCache){name=[name]}else{name=jQuery.camelCase(name);if(name in thisCache){name=[name]}else{name=name.split(" ")}}}for(i=0,l=name.length;i<l;i++){delete thisCache[name[i]]}if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache)){return }}}if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id])){return }}if(isNode){jQuery.cleanData([elem],true)}else{if(jQuery.support.deleteExpando||cache!=cache.window){delete cache[id]}else{cache[id]=null}}},_data:function(elem,name,data){return jQuery.data(elem,name,data,true)},acceptData:function(elem){var noData=elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()];return !noData||noData!==true&&elem.getAttribute("classid")===noData}});jQuery.fn.extend({data:function(key,value){var parts,part,attr,name,l,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=jQuery.data(elem);if(elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs")){attr=elem.attributes;for(l=attr.length;i<l;i++){name=attr[i].name;if(!name.indexOf("data-")){name=jQuery.camelCase(name.substring(5));dataAttr(elem,name,data[name])}}jQuery._data(elem,"parsedAttrs",true)}}return data}if(typeof key==="object"){return this.each(function(){jQuery.data(this,key)})}parts=key.split(".",2);parts[1]=parts[1]?"."+parts[1]:"";part=parts[1]+"!";return jQuery.access(this,function(value){if(value===undefined){data=this.triggerHandler("getData"+part,[parts[0]]);if(data===undefined&&elem){data=jQuery.data(elem,key);data=dataAttr(elem,key,data)}return data===undefined&&parts[1]?this.data(parts[0]):data}parts[1]=value;this.each(function(){var self=jQuery(this);self.triggerHandler("setData"+part,parts);jQuery.data(this,key,value);self.triggerHandler("changeData"+part,parts)})},null,value,arguments.length>1,null,false)},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else{data=undefined}}return data}function isEmptyDataObject(obj){var name;for(name in obj){if(name==="data"&&jQuery.isEmptyObject(obj[name])){continue}if(name!=="toJSON"){return false}}return true}jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=jQuery._data(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=jQuery._data(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery.removeData(elem,type+"queue",true);jQuery.removeData(elem,key,true)})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!(--count)){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=jQuery._data(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var nodeHook,boolHook,fixSpecified,rclass=/[\t\r\n]/g,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea|)$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){name=jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name]}catch(e){}})},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))})}if(value&&typeof value==="string"){classNames=value.split(core_rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1){if(!elem.className&&classNames.length===1){elem.className=value}else{setClass=" "+elem.className+" ";for(c=0,cl=classNames.length;c<cl;c++){if(setClass.indexOf(" "+classNames[c]+" ")<0){setClass+=classNames[c]+" "}}elem.className=jQuery.trim(setClass)}}}}return this},removeClass:function(value){var removes,className,elem,c,cl,i,l;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))})}if((value&&typeof value==="string")||value===undefined){removes=(value||"").split(core_rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1&&elem.className){className=(" "+elem.className+" ").replace(rclass," ");for(c=0,cl=removes.length;c<cl;c++){while(className.indexOf(" "+removes[c]+" ")>=0){className=className.replace(" "+removes[c]+" "," ")}}elem.className=value?jQuery.trim(className):""}}}return this},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)})}return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(core_rspace);while((className=classNames[i++])){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className)}}else{if(type==="undefined"||type==="boolean"){if(this.className){jQuery._data(this,"__className__",this.className)}this.className=this.className||value===false?"":jQuery._data(this,"__className__")||""}}})},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0){return true}}return false},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get" in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return }isFunction=jQuery.isFunction(value);return this.each(function(i){var val,self=jQuery(this);if(this.nodeType!==1){return }if(isFunction){val=value.call(this,i,self.val())}else{val=value}if(val==null){val=""}else{if(typeof val==="number"){val+=""}else{if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}}}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set" in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return !val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}return values},set:function(elem,value){var values=jQuery.makeArray(value);jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0});if(!values.length){elem.selectedIndex=-1}return values}}},attrFn:{},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return }if(pass&&jQuery.isFunction(jQuery.fn[name])){return jQuery(elem)[name](value)}if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value)}notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return }else{if(hooks&&"set" in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{elem.setAttribute(name,value+"");return value}}}else{if(hooks&&"get" in hooks&&notxml&&(ret=hooks.get(elem,name))!==null){return ret}else{ret=elem.getAttribute(name);return ret===null?undefined:ret}}},removeAttr:function(elem,value){var propName,attrNames,name,isBool,i=0;if(value&&elem.nodeType===1){attrNames=value.split(core_rspace);for(;i<attrNames.length;i++){name=attrNames[i];if(name){propName=jQuery.propFix[name]||name;isBool=rboolean.test(name);if(!isBool){jQuery.attr(elem,name,"")}elem.removeAttribute(getSetAttribute?name:propName);if(isBool&&propName in elem){elem[propName]=false}}}}},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode){jQuery.error("type property can't be changed")}else{if(!jQuery.support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}},value:{get:function(elem,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.get(elem,name)}return name in elem?elem.value:null},set:function(elem,value,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.set(elem,value,name)}elem.value=value}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return }notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){if(hooks&&"set" in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{return(elem[name]=value)}}else{if(hooks&&"get" in hooks&&(ret=hooks.get(elem,name))!==null){return ret}else{return elem[name]}}},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}});boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===true||typeof property!=="boolean"&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==false?name.toLowerCase():undefined},set:function(elem,value,name){var propName;if(value===false){jQuery.removeAttr(elem,name)}else{propName=jQuery.propFix[name]||name;if(propName in elem){elem[propName]=true}elem.setAttribute(name,name.toLowerCase())}return name}};if(!getSetAttribute){fixSpecified={name:true,id:true,coords:true};nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;ret=elem.getAttributeNode(name);return ret&&(fixSpecified[name]?ret.value!=="":ret.specified)?ret.value:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){ret=document.createAttribute(name);elem.setAttributeNode(ret)}return(ret.value=value+"")}};jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value}}})});jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){if(value===""){value="false"}nodeHook.set(elem,value,name)}}}if(!jQuery.support.hrefNormalized){jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret===null?undefined:ret}})})}if(!jQuery.support.style){jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined},set:function(elem,value){return(elem.style.cssText=value+"")}}}if(!jQuery.support.optSelected){jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex}}return null}})}if(!jQuery.support.enctype){jQuery.propFix.enctype="encoding"}if(!jQuery.support.checkOn){jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value}}})}jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0)}}})});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*|)(?:\.(.+)|)$/,rhoverHack=/(?:^|\s)hover(\.\S+|)\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1")};jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,handlers,special;if(elem.nodeType===3||elem.nodeType===8||!types||!handler||!(elemData=jQuery._data(elem))){return }if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid){handler.guid=jQuery.guid++}events=elemData.events;if(!events){elemData.events=events={}}eventHandle=elemData.handle;if(!eventHandle){elemData.handle=eventHandle=function(e){return typeof jQuery!=="undefined"&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined};eventHandle.elem=elem}types=jQuery.trim(hoverHack(types)).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=tns[1];namespaces=(tns[2]||"").split(".").sort();special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);handlers=events[type];if(!handlers){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)}else{if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle)}}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}jQuery.event.global[type]=true}elem=null},global:{},remove:function(elem,types,handler,selector,mappedTypes){var t,tns,type,origType,namespaces,origCount,j,events,special,eventType,handleObj,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(!elemData||!(events=elemData.events)){return }types=jQuery.trim(hoverHack(types||"")).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=origType=tns[1];namespaces=tns[2];if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;eventType=events[type]||[];origCount=eventType.length;namespaces=namespaces?new RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(j=0;j<eventType.length;j++){handleObj=eventType[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!namespaces||namespaces.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){eventType.splice(j--,1);if(handleObj.selector){eventType.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(eventType.length===0&&origCount!==eventType.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){delete elemData.handle;jQuery.removeData(elem,"events",true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(event,data,elem,onlyHandlers){if(elem&&(elem.nodeType===3||elem.nodeType===8)){return }var cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType,type=event.type||event,namespaces=[];if(rfocusMorph.test(type+jQuery.event.triggered)){return }if(type.indexOf("!")>=0){type=type.slice(0,-1);exclusive=true}if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}if((!elem||jQuery.event.customEvent[type])&&!jQuery.event.global[type]){return }event=typeof event==="object"?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type);event.type=type;event.isTrigger=true;event.exclusive=exclusive;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;ontype=type.indexOf(":")<0?"on"+type:"";if(!elem){cache=jQuery.cache;for(i in cache){if(cache[i].events&&cache[i].events[type]){jQuery.event.trigger(event,data,cache[i].handle.elem,true)}}return }event.result=undefined;if(!event.target){event.target=elem}data=data!=null?jQuery.makeArray(data):[];data.unshift(event);special=jQuery.event.special[type]||{};if(special.trigger&&special.trigger.apply(elem,data)===false){return }eventPath=[[elem,special.bindType||type]];if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode;for(old=elem;cur;cur=cur.parentNode){eventPath.push([cur,bubbleType]);old=cur}if(old===(elem.ownerDocument||document)){eventPath.push([old.defaultView||old.parentWindow||window,bubbleType])}}for(i=0;i<eventPath.length&&!event.isPropagationStopped();i++){cur=eventPath[i][0];event.type=eventPath[i][1];handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&jQuery.acceptData(cur)&&handle.apply&&handle.apply(cur,data)===false){event.preventDefault()}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(elem.ownerDocument,data)===false)&&!(type==="click"&&jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem)){if(ontype&&elem[type]&&((type!=="focus"&&type!=="blur")||event.target.offsetWidth!==0)&&!jQuery.isWindow(elem)){old=elem[ontype];if(old){elem[ontype]=null}jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(old){elem[ontype]=old}}}}return event.result},dispatch:function(event){event=jQuery.event.fix(event||window.event);var i,j,cur,ret,selMatch,matched,matches,handleObj,sel,related,handlers=((jQuery._data(this,"events")||{})[event.type]||[]),delegateCount=handlers.delegateCount,args=core_slice.call(arguments),run_all=!event.exclusive&&!event.namespace,special=jQuery.event.special[event.type]||{},handlerQueue=[];args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return }if(delegateCount&&!(event.button&&event.type==="click")){for(cur=event.target;cur!=this;cur=cur.parentNode||this){if(cur.disabled!==true||event.type!=="click"){selMatch={};matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector;if(selMatch[sel]===undefined){selMatch[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length}if(selMatch[sel]){matches.push(handleObj)}}if(matches.length){handlerQueue.push({elem:cur,matches:matches})}}}}if(handlers.length>delegateCount){handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)})}for(i=0;i<handlerQueue.length&&!event.isPropagationStopped();i++){matched=handlerQueue[i];event.currentTarget=matched.elem;for(j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++){handleObj=matched.matches[j];if(run_all||(!event.namespace&&!handleObj.namespace)||event.namespace_re&&event.namespace_re.test(handleObj.namespace)){event.data=handleObj.data;event.handleObj=handleObj;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode}return event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.relatedTarget&&fromElement){event.relatedTarget=fromElement===event.target?original.toElement:fromElement}if(!event.which&&button!==undefined){event.which=(button&1?1:(button&2?3:(button&4?2:0)))}return event}},fix:function(event){if(event[jQuery.expando]){return event}var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=jQuery.Event(originalEvent);for(i=copy.length;i;){prop=copy[--i];event[prop]=originalEvent[prop]}if(!event.target){event.target=originalEvent.srcElement||document}if(event.target.nodeType===3){event.target=event.target.parentNode}event.metaKey=!!event.metaKey;return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(data,namespaces,eventHandle){if(jQuery.isWindow(this)){this.onbeforeunload=eventHandle}},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle){this.onbeforeunload=null}}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem)}else{jQuery.event.dispatch.call(elem,e)}if(e.isDefaultPrevented()){event.preventDefault()}}};jQuery.event.handle=jQuery.event.dispatch;jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false)}}:function(elem,type,handle){var name="on"+type;if(elem.detachEvent){if(typeof elem[name]==="undefined"){elem[name]=null}elem.detachEvent(name,handle)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=(src.defaultPrevented||src.returnValue===false||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};function returnFalse(){return false}function returnTrue(){return true}jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return }if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return }if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj,selector=handleObj.selector;if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!jQuery.support.submitBubbles){jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form")){return false}jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;if(form&&!jQuery._data(form,"_submit_attached")){jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=true});jQuery._data(form,"_submit_attached",true)}})},postDispatch:function(event){if(event._submit_bubble){delete event._submit_bubble;if(this.parentNode&&!event.isTrigger){jQuery.event.simulate("submit",this.parentNode,event,true)}}},teardown:function(){if(jQuery.nodeName(this,"form")){return false}jQuery.event.remove(this,"._submit")}}}if(!jQuery.support.changeBubbles){jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){jQuery.event.add(this,"propertychange._change",function(event){if(event.originalEvent.propertyName==="checked"){this._just_changed=true}});jQuery.event.add(this,"click._change",function(event){if(this._just_changed&&!event.isTrigger){this._just_changed=false}jQuery.event.simulate("change",this,event,true)})}return false}jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!jQuery._data(elem,"_change_attached")){jQuery.event.add(elem,"change._change",function(event){if(this.parentNode&&!event.isSimulated&&!event.isTrigger){jQuery.event.simulate("change",this.parentNode,event,true)}});jQuery._data(elem,"_change_attached",true)}})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||(elem.type!=="radio"&&elem.type!=="checkbox")){return event.handleObj.handler.apply(this,arguments)}},teardown:function(){jQuery.event.remove(this,"._change");return !rformElems.test(this.nodeName)}}}if(!jQuery.support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)};jQuery.event.special[fix]={setup:function(){if(attaches++===0){document.addEventListener(orig,handler,true)}},teardown:function(){if(--attaches===0){document.removeEventListener(orig,handler,true)}}}})}jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){this.on(type,selector,data,types[type],one)}return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else{if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}}if(fn===false){fn=returnFalse}else{if(!fn){return this}}if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},live:function(types,data,fn){jQuery(this.context).on(types,this.selector,data,fn);return this},die:function(types,fn){jQuery(this.context).off(types,this.selector||"**",fn);return this},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){if(this[0]){return jQuery.event.trigger(type,data,this[0],true)}},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false};toggler.guid=guid;while(i<args.length){args[i++].guid=guid}return this.click(toggler)},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){if(fn==null){fn=data;data=null}return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)};if(rkeyEvent.test(name)){jQuery.event.fixHooks[name]=jQuery.event.keyHooks}if(rmouseEvent.test(name)){jQuery.event.fixHooks[name]=jQuery.event.mouseHooks}});
/*
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
(function(window,undefined){var cachedruns,assertGetIdNotName,Expr,getText,isXML,contains,compile,sortOrder,hasDuplicate,outermostContext,baseHasDuplicate=true,strundefined="undefined",expando=("sizcache"+Math.random()).replace(".",""),Token=String,document=window.document,docElem=document.documentElement,dirruns=0,done=0,pop=[].pop,push=[].push,slice=[].slice,indexOf=[].indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++){if(this[i]===elem){return i}}return -1},markFunction=function(fn,value){fn[expando]=value==null||value;return fn},createCache=function(){var cache={},keys=[];return markFunction(function(key,value){if(keys.push(key)>Expr.cacheLength){delete cache[keys.shift()]}return(cache[key+" "]=value)},cache)},classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+attributes+")|[^:]|\\\\.)*|.*))\\)|)",pos=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*"),rpseudo=new RegExp(pseudos),rquickExpr=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rnot=/^:not/,rsibling=/[\x20\t\r\n\f]*[+~]/,rendsWithNot=/:not\($/,rheader=/h\d/i,rinputs=/input|select|textarea|button/i,rbackslash=/\\(?!\\)/g,matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),NAME:new RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),POS:new RegExp(pos,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|"+pos,"i")},assert=function(fn){var div=document.createElement("div");try{return fn(div)}catch(e){return false}finally{div=null}},assertTagNameNoComments=assert(function(div){div.appendChild(document.createComment(""));return !div.getElementsByTagName("*").length}),assertHrefNotNormalized=assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&div.firstChild.getAttribute("href")==="#"}),assertAttributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return type!=="boolean"&&type!=="string"}),assertUsableClassName=assert(function(div){div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!div.getElementsByClassName||!div.getElementsByClassName("e").length){return false}div.lastChild.className="e";return div.getElementsByClassName("e").length===2}),assertUsableName=assert(function(div){div.id=expando+0;div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>";docElem.insertBefore(div,docElem.firstChild);var pass=document.getElementsByName&&document.getElementsByName(expando).length===2+document.getElementsByName(expando+0).length;assertGetIdNotName=!document.getElementById(expando);docElem.removeChild(div);return pass});try{slice.call(docElem.childNodes,0)[0].nodeType}catch(e){slice=function(i){var elem,results=[];for(;(elem=this[i]);i++){results.push(elem)}return results}}function Sizzle(selector,context,results,seed){results=results||[];context=context||document;var match,elem,xml,m,nodeType=context.nodeType;if(!selector||typeof selector!=="string"){return results}if(nodeType!==1&&nodeType!==9){return[]}xml=isXML(context);if(!xml&&!seed){if((match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else{if(match[2]){push.apply(results,slice.call(context.getElementsByTagName(selector),0));return results}else{if((m=match[3])&&assertUsableClassName&&context.getElementsByClassName){push.apply(results,slice.call(context.getElementsByClassName(m),0));return results}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed,xml)}Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){return Sizzle(expr,null,null,[elem]).length>0};function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[(j=matchIndexes[i])]){seed[j]=!(matches[j]=seed[j])}}})})}getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else{if(nodeType===3||nodeType===4){return elem.nodeValue}}}else{for(;(node=elem[i]);i++){ret+=getText(node)}}return ret};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};contains=Sizzle.contains=docElem.contains?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&adown.contains&&adown.contains(bup))}:docElem.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){while((b=b.parentNode)){if(b===a){return true}}return false};Sizzle.attr=function(elem,name){var val,xml=isXML(elem);if(!xml){name=name.toLowerCase()}if((val=Expr.attrHandle[name])){return val(elem)}if(xml||assertAttributes){return elem.getAttribute(name)}val=elem.getAttributeNode(name);return val?typeof elem[name]==="boolean"?elem[name]?name:null:val.specified?val.value:null:null};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:assertHrefNotNormalized?{}:{href:function(elem){return elem.getAttribute("href",2)},type:function(elem){return elem.getAttribute("type")}},find:{ID:assertGetIdNotName?function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}}:function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[]}},TAG:assertTagNameNoComments?function(tag,context){if(typeof context.getElementsByTagName!==strundefined){return context.getElementsByTagName(tag)}}:function(tag,context){var results=context.getElementsByTagName(tag);if(tag==="*"){var elem,tmp=[],i=0;for(;(elem=results[i]);i++){if(elem.nodeType===1){tmp.push(elem)}}return tmp}return results},NAME:assertUsableName&&function(tag,context){if(typeof context.getElementsByName!==strundefined){return context.getElementsByName(name)}},CLASS:assertUsableClassName&&function(className,context,xml){if(typeof context.getElementsByClassName!==strundefined&&!xml){return context.getElementsByClassName(className)}}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(rbackslash,"");match[3]=(match[4]||match[5]||"").replace(rbackslash,"");if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1]==="nth"){if(!match[2]){Sizzle.error(match[0])}match[3]=+(match[3]?match[4]+(match[5]||1):2*(match[2]==="even"||match[2]==="odd"));match[4]=+((match[6]+match[7])||match[2]==="odd")}else{if(match[2]){Sizzle.error(match[0])}}return match},PSEUDO:function(match){var unquoted,excess;if(matchExpr.CHILD.test(match[0])){return null}if(match[3]){match[2]=match[3]}else{if((unquoted=match[4])){if(rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){unquoted=unquoted.slice(0,excess);match[0]=match[0].slice(0,excess)}match[2]=unquoted}}return match.slice(0,3)}},filter:{ID:assertGetIdNotName?function(id){id=id.replace(rbackslash,"");return function(elem){return elem.getAttribute("id")===id}}:function(id){id=id.replace(rbackslash,"");return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===id}},TAG:function(nodeName){if(nodeName==="*"){return function(){return true}}nodeName=nodeName.replace(rbackslash,"").toLowerCase();return function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[expando][className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(elem.className||(typeof elem.getAttribute!==strundefined&&elem.getAttribute("class"))||"")})},ATTR:function(name,operator,check){return function(elem,context){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!="}if(!operator){return true}result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.substr(result.length-check.length)===check:operator==="~="?(" "+result+" ").indexOf(check)>-1:operator==="|="?result===check||result.substr(0,check.length+1)===check+"-":false}},CHILD:function(type,argument,first,last){if(type==="nth"){return function(elem){var node,diff,parent=elem.parentNode;if(first===1&&last===0){return true}if(parent){diff=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){diff++;if(elem===node){break}}}}diff-=last;return diff===first||(diff%first===0&&diff/first>=0)}}return function(elem){var node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false}}if(type==="first"){return true}node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false}}return true}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument)}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if((elem=unmatched[i])){seed[i]=!(matches[i]=elem)}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return !results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),enabled:function(elem){return elem.disabled===false},disabled:function(elem){return elem.disabled===true},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected)},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},parent:function(elem){return !Expr.pseudos.empty(elem)},empty:function(elem){var nodeType;elem=elem.firstChild;while(elem){if(elem.nodeName>"@"||(nodeType=elem.nodeType)===3||nodeType===4){return false}elem=elem.nextSibling}return true},header:function(elem){return rheader.test(elem.nodeName)},text:function(elem){var type,attr;return elem.nodeName.toLowerCase()==="input"&&(type=elem.type)==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()===type)},radio:createInputPseudo("radio"),checkbox:createInputPseudo("checkbox"),file:createInputPseudo("file"),password:createInputPseudo("password"),image:createInputPseudo("image"),submit:createButtonPseudo("submit"),reset:createButtonPseudo("reset"),button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},input:function(elem){return rinputs.test(elem.nodeName)},focus:function(elem){var doc=elem.ownerDocument;return elem===doc.activeElement&&(!doc.hasFocus||doc.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},active:function(elem){return elem===elem.ownerDocument.activeElement},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;){matchIndexes.push(i)}return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;){matchIndexes.push(i)}return matchIndexes})}};function siblingCheck(a,b,ret){if(a===b){return ret}var cur=a.nextSibling;while(cur){if(cur===b){return -1}cur=cur.nextSibling}return 1}sortOrder=docElem.compareDocumentPosition?function(a,b){if(a===b){hasDuplicate=true;return 0}return(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}else{if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}}var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup){return siblingCheck(a,b)}else{if(!aup){return -1}else{if(!bup){return 1}}}while(cur){ap.unshift(cur);cur=cur.parentNode}cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode}al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i])}}return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)};[0,0].sort(sortOrder);baseHasDuplicate=!hasDuplicate;Sizzle.uniqueSort=function(results){var elem,duplicates=[],i=1,j=0;hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(;(elem=results[i]);i++){if(elem===results[i-1]){j=duplicates.push(i)}}while(j--){results.splice(duplicates[j],1)}}return results};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[expando][selector+" "];if(cached){return parseOnly?0:cached.slice(0)}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar}groups.push(tokens=[])}matched=false;if((match=rcombinators.exec(soFar))){tokens.push(matched=new Token(match.shift()));soFar=soFar.slice(matched.length);matched.type=match[0].replace(rtrim," ")}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){tokens.push(matched=new Token(match.shift()));soFar=soFar.slice(matched.length);matched.type=type;matched.matches=match}}if(!matched){break}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&combinator.dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while((elem=elem[dir])){if(checkNonElements||elem.nodeType===1){return matcher(elem,context,xml)}}}:function(elem,context,xml){if(!xml){var cache,dirkey=dirruns+" "+doneName+" ",cachedkey=dirkey+cachedruns;while((elem=elem[dir])){if(checkNonElements||elem.nodeType===1){if((cache=elem[expando])===cachedkey){return elem.sizset}else{if(typeof cache==="string"&&cache.indexOf(dirkey)===0){if(elem.sizset){return elem}}else{elem[expando]=cachedkey;if(matcher(elem,context,xml)){elem.sizset=true;return elem}elem.sizset=false}}}}}else{while((elem=elem[dir])){if(checkNonElements||elem.nodeType===1){if(matcher(elem,context,xml)){return elem}}}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false}}return true}:matchers[0]}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if((elem=unmatched[i])){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i)}}}}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter)}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector)}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml)}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if((elem=temp[i])){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if((elem=matcherOut[i])){temp.push((matcherIn[i]=elem))}}postFinder(null,(matcherOut=[]),temp,xml)}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem)}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml)}else{push.apply(results,matcherOut)}}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){return(!leadingRelative&&(xml||context!==outermostContext))||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];for(;i<len;i++){if((matcher=Expr.relative[tokens[i].type])){matchers=[addCombinator(elementMatcher(matchers),matcher)]}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&tokens.slice(0,i-1).join("").replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens((tokens=tokens.slice(j))),j<len&&tokens.join(""))}matchers.push(matcher)}}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=expandContext!=null,contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",expandContext&&context.parentNode||context),dirrunsUnique=(dirruns+=contextBackup==null?1:Math.E);if(outermost){outermostContext=context!==document&&context;cachedruns=superMatcher.el}for(;(elem=elems[i])!=null;i++){if(byElement&&elem){for(j=0;(matcher=elementMatchers[j]);j++){if(matcher(elem,context,xml)){results.push(elem);break}}if(outermost){dirruns=dirrunsUnique;cachedruns=++superMatcher.el}}if(bySet){if((elem=!matcher&&elem)){matchedCount--}if(seed){unmatched.push(elem)}}}matchedCount+=i;if(bySet&&i!==matchedCount){for(j=0;(matcher=setMatchers[j]);j++){matcher(unmatched,setMatched,context,xml)}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results)}}}setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&(matchedCount+setMatchers.length)>1){Sizzle.uniqueSort(results)}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};superMatcher.el=0;return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[expando][selector+" "];if(!cached){if(!group){group=tokenize(selector)}i=group.length;while(i--){cached=matcherFromTokens(group[i]);if(cached[expando]){setMatchers.push(cached)}else{elementMatchers.push(cached)}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached};function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results)}return results}function select(selector,context,results,seed,xml){var i,tokens,token,type,find,match=tokenize(selector),j=match.length;if(!seed){if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&context.nodeType===9&&!xml&&Expr.relative[tokens[1].type]){context=Expr.find.ID(token.matches[0].replace(rbackslash,""),context,xml)[0];if(!context){return results}selector=selector.slice(tokens.shift().length)}for(i=matchExpr.POS.test(selector)?-1:tokens.length-1;i>=0;i--){token=tokens[i];if(Expr.relative[(type=token.type)]){break}if((find=Expr.find[type])){if((seed=find(token.matches[0].replace(rbackslash,""),rsibling.test(tokens[0].type)&&context.parentNode||context,xml))){tokens.splice(i,1);selector=seed.length&&tokens.join("");if(!selector){push.apply(results,slice.call(seed,0));return results}break}}}}}compile(selector,match)(seed,context,xml,results,rsibling.test(selector));return results}if(document.querySelectorAll){(function(){var disconnectedMatch,oldSelect=select,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,rbuggyQSA=[":focus"],rbuggyMatches=[":active"],matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector;assert(function(div){div.innerHTML="<select><option selected=''></option></select>";if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}});assert(function(div){div.innerHTML="<p test=''></p>";if(div.querySelectorAll("[test^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')")}div.innerHTML="<input type='hidden'/>";if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")}});rbuggyQSA=new RegExp(rbuggyQSA.join("|"));select=function(selector,context,results,seed,xml){if(!seed&&!xml&&!rbuggyQSA.test(selector)){var groups,i,old=true,nid=expando,newContext=context,newSelector=context.nodeType===9&&selector;if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if((old=context.getAttribute("id"))){nid=old.replace(rescape,"\\$&")}else{context.setAttribute("id",nid)}nid="[id='"+nid+"'] ";i=groups.length;while(i--){groups[i]=nid+groups[i].join("")}newContext=rsibling.test(selector)&&context.parentNode||context;newSelector=groups.join(",")}if(newSelector){try{push.apply(results,slice.call(newContext.querySelectorAll(newSelector),0));return results}catch(qsaError){}finally{if(!old){context.removeAttribute("id")}}}}return oldSelect(selector,context,results,seed,xml)};if(matches){assert(function(div){disconnectedMatch=matches.call(div,"div");try{matches.call(div,"[test!='']:sizzle");rbuggyMatches.push("!=",pseudos)}catch(e){}});rbuggyMatches=new RegExp(rbuggyMatches.join("|"));Sizzle.matchesSelector=function(elem,expr){expr=expr.replace(rattributeQuotes,"='$1']");if(!isXML(elem)&&!rbuggyMatches.test(expr)&&!rbuggyQSA.test(expr)){try{var ret=matches.call(elem,expr);if(ret||disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){}}return Sizzle(expr,null,null,[elem]).length>0}}})()}Expr.pseudos.nth=Expr.pseudos.eq;function setFilters(){}Expr.filters=setFilters.prototype=Expr.pseudos;Expr.setFilters=new setFilters();Sizzle.attr=jQuery.attr;jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains})(window);var runtil=/Until$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,isSimple=/^.[^:#\[\.,]*$/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({find:function(selector){var i,l,length,n,r,ret,self=this;if(typeof selector!=="string"){return jQuery(selector).filter(function(){for(i=0,l=self.length;i<l;i++){if(jQuery.contains(self[i],this)){return true}}})}ret=this.pushStack("","find",selector);for(i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);if(i>0){for(n=length;n<ret.length;n++){for(r=0;r<length;r++){if(ret[r]===ret[n]){ret.splice(n--,1);break}}}}}return ret},has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;i<len;i++){if(jQuery.contains(this,targets[i])){return true}}})},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector)},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector)},is:function(selector){return !!selector&&(typeof selector==="string"?rneedsContext.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){cur=this[i];while(cur&&cur.ownerDocument&&cur!==context&&cur.nodeType!==11){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}cur=cur.parentNode}}ret=ret.length>1?jQuery.unique(ret):ret;return this.pushStack(ret,"closest",selectors)},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof elem==="string"){return jQuery.inArray(this[0],jQuery(elem))}return jQuery.inArray(elem.jquery?elem[0]:elem,this)},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});jQuery.fn.andSelf=jQuery.fn.addBack;function isDisconnected(node){return !node||!node.parentNode||node.parentNode.nodeType===11}function sibling(cur,dir){do{cur=cur[dir]}while(cur&&cur.nodeType!==1);return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name)){selector=until}if(selector&&typeof selector==="string"){ret=jQuery.filter(selector,ret)}ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret;if(this.length>1&&rparentsprev.test(name)){ret=ret.reverse()}return this.pushStack(ret,name,core_slice.call(arguments).join(","))}});jQuery.extend({filter:function(expr,elems,not){if(not){expr=":not("+expr+")"}return elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1){matched.push(cur)}cur=cur[dir]}return matched},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n)}}return r}});function winnow(elements,qualifier,keep){qualifier=qualifier||0;if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep})}else{if(qualifier.nodeType){return jQuery.grep(elements,function(elem,i){return(elem===qualifier)===keep})}else{if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1});if(isSimple.test(qualifier)){return jQuery.filter(qualifier,filtered,!keep)}else{qualifier=jQuery.filter(qualifier,filtered)}}}}return jQuery.grep(elements,function(elem,i){return(jQuery.inArray(elem,qualifier)>=0)===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement){while(list.length){safeFrag.createElement(list.pop())}}return safeFrag}var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rcheckableType=/^(?:checkbox|radio)$/,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize){wrapMap._default=[1,"X<div>","</div>"]}jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},wrapAll:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))})}if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild}return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1||this.nodeType===11){this.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1||this.nodeType===11){this.insertBefore(elem,this.firstChild)}})},before:function(){if(!isDisconnected(this[0])){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this)})}if(arguments.length){var set=jQuery.clean(arguments);return this.pushStack(jQuery.merge(set,this),"before",this.selector)}},after:function(){if(!isDisconnected(this[0])){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)})}if(arguments.length){var set=jQuery.clean(arguments);return this.pushStack(jQuery.merge(this,set),"after",this.selector)}},remove:function(selector,keepData){var elem,i=0;for(;(elem=this[i])!=null;i++){if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));jQuery.cleanData([elem])}if(elem.parentNode){elem.parentNode.removeChild(elem)}}}return this},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"))}while(elem.firstChild){elem.removeChild(elem.firstChild)}}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined){return elem.nodeType===1?elem.innerHTML.replace(rinlinejQuery,""):undefined}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&(jQuery.support.htmlSerialize||!rnoshimcache.test(value))&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function(value){if(!isDisconnected(this[0])){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old))})}if(typeof value!=="string"){value=jQuery(value).detach()}return this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();if(next){jQuery(next).before(value)}else{jQuery(parent).append(value)}})}return this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this},detach:function(selector){return this.remove(selector,true)},domManip:function(args,table,callback){args=[].concat.apply([],args);var results,first,fragment,iNoClone,i=0,value=args[0],scripts=[],l=this.length;if(!jQuery.support.checkClone&&l>1&&typeof value==="string"&&rchecked.test(value)){return this.each(function(){jQuery(this).domManip(args,table,callback)})}if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback)})}if(this[0]){results=jQuery.buildFragment(args,this,scripts);fragment=results.fragment;first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first){table=table&&jQuery.nodeName(first,"tr");for(iNoClone=results.cacheable||l-1;i<l;i++){callback.call(table&&jQuery.nodeName(this[i],"table")?findOrAppend(this[i],"tbody"):this[i],i===iNoClone?fragment:jQuery.clone(fragment,true,true))}}fragment=first=null;if(scripts.length){jQuery.each(scripts,function(i,elem){if(elem.src){if(jQuery.ajax){jQuery.ajax({url:elem.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{jQuery.error("no ajax")}}else{jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,""))}if(elem.parentNode){elem.parentNode.removeChild(elem)}})}}return this}});function findOrAppend(elem,tag){return elem.getElementsByTagName(tag)[0]||elem.appendChild(elem.ownerDocument.createElement(tag))}function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src)){return }var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}if(curData.data){curData.data=jQuery.extend({},curData.data)}}function cloneFixAttributes(src,dest){var nodeName;if(dest.nodeType!==1){return }if(dest.clearAttributes){dest.clearAttributes()}if(dest.mergeAttributes){dest.mergeAttributes(src)}nodeName=dest.nodeName.toLowerCase();if(nodeName==="object"){if(dest.parentNode){dest.outerHTML=src.outerHTML}if(jQuery.support.html5Clone&&(src.innerHTML&&!jQuery.trim(dest.innerHTML))){dest.innerHTML=src.innerHTML}}else{if(nodeName==="input"&&rcheckableType.test(src.type)){dest.defaultChecked=dest.checked=src.checked;if(dest.value!==src.value){dest.value=src.value}}else{if(nodeName==="option"){dest.selected=src.defaultSelected}else{if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}else{if(nodeName==="script"&&dest.text!==src.text){dest.text=src.text}}}}}dest.removeAttribute(jQuery.expando)}jQuery.buildFragment=function(args,context,scripts){var fragment,cacheable,cachehit,first=args[0];context=context||document;context=!context.nodeType&&context[0]||context;context=context.ownerDocument||context;if(args.length===1&&typeof first==="string"&&first.length<512&&context===document&&first.charAt(0)==="<"&&!rnocache.test(first)&&(jQuery.support.checkClone||!rchecked.test(first))&&(jQuery.support.html5Clone||!rnoshimcache.test(first))){cacheable=true;fragment=jQuery.fragments[first];cachehit=fragment!==undefined}if(!fragment){fragment=context.createDocumentFragment();jQuery.clean(args,context,fragment,scripts);if(cacheable){jQuery.fragments[first]=cachehit&&fragment}}return{fragment:fragment,cacheable:cacheable}};jQuery.fragments={};jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,i=0,ret=[],insert=jQuery(selector),l=insert.length,parent=this.length===1&&this[0].parentNode;if((parent==null||parent&&parent.nodeType===11&&parent.childNodes.length===1)&&l===1){insert[original](this[0]);return this}else{for(;i<l;i++){elems=(i>0?this.clone(true):this).get();jQuery(insert[i])[original](elems);ret=ret.concat(elems)}return this.pushStack(ret,name,insert.selector)}}});function getAll(elem){if(typeof elem.getElementsByTagName!=="undefined"){return elem.getElementsByTagName("*")}else{if(typeof elem.querySelectorAll!=="undefined"){return elem.querySelectorAll("*")}else{return[]}}}function fixDefaultChecked(elem){if(rcheckableType.test(elem.type)){elem.defaultChecked=elem.checked}}jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone;if(jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")){clone=elem.cloneNode(true)}else{fragmentDiv.innerHTML=elem.outerHTML;fragmentDiv.removeChild(clone=fragmentDiv.firstChild)}if((!jQuery.support.noCloneEvent||!jQuery.support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){cloneFixAttributes(elem,clone);srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){if(destElements[i]){cloneFixAttributes(srcElements[i],destElements[i])}}}if(dataAndEvents){cloneCopyEvent(elem,clone);if(deepDataAndEvents){srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){cloneCopyEvent(srcElements[i],destElements[i])}}}srcElements=destElements=null;return clone},clean:function(elems,context,fragment,scripts){var i,j,elem,tag,wrap,depth,div,hasBody,tbody,len,handleScript,jsTags,safe=context===document&&safeFragment,ret=[];if(!context||typeof context.createDocumentFragment==="undefined"){context=document}for(i=0;(elem=elems[i])!=null;i++){if(typeof elem==="number"){elem+=""}if(!elem){continue}if(typeof elem==="string"){if(!rhtml.test(elem)){elem=context.createTextNode(elem)}else{safe=safe||createSafeFragment(context);div=context.createElement("div");safe.appendChild(div);elem=elem.replace(rxhtmlTag,"<$1></$2>");tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;depth=wrap[0];div.innerHTML=wrap[1]+elem+wrap[2];while(depth--){div=div.lastChild}if(!jQuery.support.tbody){hasBody=rtbody.test(elem);tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j])}}}if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)){div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild)}elem=div.childNodes;div.parentNode.removeChild(div)}}if(elem.nodeType){ret.push(elem)}else{jQuery.merge(ret,elem)}}if(div){elem=div=safe=null}if(!jQuery.support.appendChecked){for(i=0;(elem=ret[i])!=null;i++){if(jQuery.nodeName(elem,"input")){fixDefaultChecked(elem)}else{if(typeof elem.getElementsByTagName!=="undefined"){jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked)}}}}if(fragment){handleScript=function(elem){if(!elem.type||rscriptType.test(elem.type)){return scripts?scripts.push(elem.parentNode?elem.parentNode.removeChild(elem):elem):fragment.appendChild(elem)}};for(i=0;(elem=ret[i])!=null;i++){if(!(jQuery.nodeName(elem,"script")&&handleScript(elem))){fragment.appendChild(elem);if(typeof elem.getElementsByTagName!=="undefined"){jsTags=jQuery.grep(jQuery.merge([],elem.getElementsByTagName("script")),handleScript);ret.splice.apply(ret,[i+1,0].concat(jsTags));i+=jsTags.length}}}}return ret},cleanData:function(elems,acceptData){var data,id,elem,type,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=jQuery.support.deleteExpando,special=jQuery.event.special;for(;(elem=elems[i])!=null;i++){if(acceptData||jQuery.acceptData(elem)){id=elem[internalKey];data=id&&cache[id];if(data){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}if(cache[id]){delete cache[id];if(deleteExpando){delete elem[internalKey]}else{if(elem.removeAttribute){elem.removeAttribute(internalKey)}else{elem[internalKey]=null}}jQuery.deletedIds.push(id)}}}}}});(function(){var matched,browser;jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}};matched=jQuery.uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome){browser.webkit=true}else{if(browser.webkit){browser.safari=true}}jQuery.browser=browser;jQuery.sub=function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(true,jQuerySub,this);jQuerySub.superclass=this;jQuerySub.fn=jQuerySub.prototype=this();jQuerySub.fn.constructor=jQuerySub;jQuerySub.sub=this.sub;jQuerySub.fn.init=function init(selector,context){if(context&&context instanceof jQuery&&!(context instanceof jQuerySub)){context=jQuerySub(context)}return jQuery.fn.init.call(this,selector,context,rootjQuerySub)};jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub}})();var curCSS,iframe,iframeDoc,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rposition=/^(top|right|bottom|left)$/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([-+])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"],eventsToggle=jQuery.fn.toggle;function vendorPropName(style,name){if(name in style){return name}var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style){return name}}return origName}function isHidden(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)}function showHide(elements,show){var elem,display,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}values[index]=jQuery._data(elem,"olddisplay");if(show){if(!values[index]&&elem.style.display==="none"){elem.style.display=""}if(elem.style.display===""&&isHidden(elem)){values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName))}}else{display=curCSS(elem,"display");if(!values[index]&&display!=="none"){jQuery._data(elem,"olddisplay",display)}}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state,fn2){var bool=typeof state==="boolean";if(jQuery.isFunction(state)&&jQuery.isFunction(fn2)){return eventsToggle.apply(this,arguments)}return this.each(function(){if(bool?state:isHidden(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return }var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number"}if(value==null||type==="number"&&isNaN(value)){return }if(type==="number"&&!jQuery.cssNumber[origName]){value+="px"}if(!hooks||!("set" in hooks)||(value=hooks.set(elem,value,extra))!==undefined){try{style[name]=value}catch(e){}}}else{if(hooks&&"get" in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function(elem,name,numeric,extra){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get" in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(numeric||extra!==undefined){num=parseFloat(val);return numeric||jQuery.isNumeric(num)?num||0:val}return val},swap:function(elem,options,callback){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.call(elem);for(name in options){elem.style[name]=old[name]}return ret}});if(window.getComputedStyle){curCSS=function(elem,name){var ret,width,minWidth,maxWidth,computed=window.getComputedStyle(elem,null),style=elem.style;if(computed){ret=computed.getPropertyValue(name)||computed[name];if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret}}else{if(document.documentElement.currentStyle){curCSS=function(elem,name){var left,rsLeft,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;if(ret==null&&style&&style[name]){ret=style[name]}if(rnumnonpx.test(ret)&&!rposition.test(name)){left=style.left;rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left;if(rsLeft){elem.runtimeStyle.left=elem.currentStyle.left}style.left=name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft){elem.runtimeStyle.left=rsLeft}}return ret===""?"auto":ret}}}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true)}if(isBorderBox){if(extra==="content"){val-=parseFloat(curCSS(elem,"padding"+cssExpand[i]))||0}if(extra!=="margin"){val-=parseFloat(curCSS(elem,"border"+cssExpand[i]+"Width"))||0}}else{val+=parseFloat(curCSS(elem,"padding"+cssExpand[i]))||0;if(extra!=="padding"){val+=parseFloat(curCSS(elem,"border"+cssExpand[i]+"Width"))||0}}}return val}function getWidthOrHeight(elem,name,extra){var val=name==="width"?elem.offsetWidth:elem.offsetHeight,valueIsBorderBox=true,isBorderBox=jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing")==="border-box";if(val<=0||val==null){val=curCSS(elem,name);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]);val=parseFloat(val)||0}return(val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox))+"px"}function css_defaultDisplay(nodeName){if(elemdisplay[nodeName]){return elemdisplay[nodeName]}var elem=jQuery("<"+nodeName+">").appendTo(document.body),display=elem.css("display");elem.remove();if(display==="none"||display===""){iframe=document.body.appendChild(iframe||jQuery.extend(document.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!iframeDoc||!iframe.createElement){iframeDoc=(iframe.contentWindow||iframe.contentDocument).document;iframeDoc.write("<!doctype html><html><body>");iframeDoc.close()}elem=iframeDoc.body.appendChild(iframeDoc.createElement(nodeName));display=curCSS(elem,"display");document.body.removeChild(iframe)}elemdisplay[nodeName]=display;return display}jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){if(elem.offsetWidth===0&&rdisplayswap.test(curCSS(elem,"display"))){return jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)})}else{return getWidthOrHeight(elem,name,extra)}}},set:function(elem,value,extra){return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing")==="border-box"):0)}}});if(!jQuery.support.opacity){jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+value*100+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if(value>=1&&jQuery.trim(filter.replace(ralpha,""))===""&&style.removeAttribute){style.removeAttribute("filter");if(currentStyle&&!currentStyle.filter){return }}style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity}}}jQuery(function(){if(!jQuery.support.reliableMarginRight){jQuery.cssHooks.marginRight={get:function(elem,computed){return jQuery.swap(elem,{display:"inline-block"},function(){if(computed){return curCSS(elem,"marginRight")}})}}}if(!jQuery.support.pixelPosition&&jQuery.fn.position){jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){if(computed){var ret=curCSS(elem,prop);return rnumnonpx.test(ret)?jQuery(elem).position()[prop]+"px":ret}}}})}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){return(elem.offsetWidth===0&&elem.offsetHeight===0)||(!jQuery.support.reliableHiddenOffsets&&((elem.style&&elem.style.display)||curCSS(elem,"display"))==="none")};jQuery.expr.filters.visible=function(elem){return !jQuery.expr.filters.hidden(elem)}}jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i,parts=typeof value==="string"?value.split(" "):[value],expanded={};for(i=0;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rselectTextarea=/^(?:select|textarea)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():(value==null?"":value);s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional}if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&").replace(r20,"+")};function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add)}})}else{if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}}var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes=["*/"]+["*"];try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,list,placeBefore,dataTypes=dataTypeExpression.toLowerCase().split(core_rspace),i=0,length=dataTypes.length;if(jQuery.isFunction(func)){for(;i<length;i++){dataType=dataTypes[i];placeBefore=/^\+/.test(dataType);if(placeBefore){dataType=dataType.substr(1)||"*"}list=structure[dataType]=structure[dataType]||[];list[placeBefore?"unshift":"push"](func)}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0];inspected=inspected||{};inspected[dataType]=true;var selection,list=structure[dataType],i=0,length=list?list.length:0,executeOnly=(structure===prefilters);for(;i<length&&(executeOnly||!selection);i++){selection=list[i](options,originalOptions,jqXHR);if(typeof selection==="string"){if(!executeOnly||inspected[selection]){selection=undefined}else{options.dataTypes.unshift(selection);selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected)}}}if((executeOnly||!selection)&&!inspected["*"]){selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected)}return selection}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key]}}if(deep){jQuery.extend(true,target,deep)}}jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments)}if(!this.length){return this}var selector,type,response,self=this,off=url.indexOf(" ");if(off>=0){selector=url.slice(off,url.length);url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else{if(params&&typeof params==="object"){type="POST"}}jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status){if(callback){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}}}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText)});return this};jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.on(o,f)}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type})}});jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},ajaxSetup:function(target,settings){if(settings){ajaxExtend(target,jQuery.ajaxSettings)}else{settings=target;target=jQuery.ajaxSettings}ajaxExtend(target,settings);return target},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var ifModifiedKey,responseHeadersString,responseHeaders,transport,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2]}}match=responseHeaders[key.toLowerCase()]}return match===undefined?null:match},overrideMimeType:function(type){if(!state){s.mimeType=type}return this},abort:function(statusText){statusText=statusText||strAbort;if(transport){transport.abort(statusText)}done(0,statusText);return this}};function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return }state=2;if(timeoutTimer){clearTimeout(timeoutTimer)}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;if(responses){response=ajaxHandleResponses(s,jqXHR,responses)}if(status>=200&&status<300||status===304){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[ifModifiedKey]=modified}modified=jqXHR.getResponseHeader("Etag");if(modified){jQuery.etag[ifModifiedKey]=modified}}if(status===304){statusText="notmodified";isSuccess=true}else{isSuccess=ajaxConvert(s,response);statusText=isSuccess.state;success=isSuccess.data;error=isSuccess.error;isSuccess=!error}}else{error=statusText;if(!statusText||status){statusText="error";if(status<0){status=0}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error])}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!(--jQuery.active)){jQuery.event.trigger("ajaxStop")}}}deferred.promise(jqXHR);jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;jqXHR.complete=completeDeferred.add;jqXHR.statusCode=function(map){if(map){var tmp;if(state<2){for(tmp in map){statusCode[tmp]=[statusCode[tmp],map[tmp]]}}else{tmp=map[jqXHR.status];jqXHR.always(tmp)}}return this};s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(core_rspace);if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?80:443))!=(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443))))}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR}fireGlobals=s.global;s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")}if(!s.hasContent){if(s.data){s.url+=(rquery.test(s.url)?"&":"?")+s.data;delete s.data}ifModifiedKey=s.url;if(s.cache===false){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+((ret===s.url)?(rquery.test(s.url)?"&":"?")+"_="+ts:"")}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)}if(s.ifModified){ifModifiedKey=ifModifiedKey||s.url;if(jQuery.lastModified[ifModifiedKey]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey])}if(jQuery.etag[ifModifiedKey]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey])}}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort()}strAbort="abort";for(i in {success:1,error:1,complete:1}){jqXHR[i](s[i])}transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport")}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])}if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout)}try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2){done(-1,e)}else{throw e}}}return jqXHR},active:0,lastModified:{},etag:{}});function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(type in responseFields){if(type in responses){jqXHR[responseFields[type]]=responses[type]}}while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("content-type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0] in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(s,response){var conv,conv2,current,tmp,dataTypes=s.dataTypes.slice(),prev=dataTypes[0],converters={},i=0;if(s.dataFilter){response=s.dataFilter(response,s.dataType)}if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]}}for(;(current=dataTypes[++i]);){if(current!=="*"){if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2]}else{if(converters[conv2]!==true){current=tmp[0];dataTypes.splice(i--,0,current)}}break}}}}if(conv!==true){if(conv&&s["throws"]){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}}prev=current}}return{state:"success",data:response}}var oldCallbacks=[],rquestion=/\?/,rjsonp=/(=)\?(?=&|$)|\?\?/,nonce=jQuery.now();jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||(jQuery.expando+"_"+(nonce++));this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,data=s.data,url=s.url,hasCallback=s.jsonp!==false,replaceInUrl=hasCallback&&rjsonp.test(url),replaceInData=hasCallback&&!replaceInUrl&&typeof data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(data);if(s.dataTypes[0]==="jsonp"||replaceInUrl||replaceInData){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;overwritten=window[callbackName];if(replaceInUrl){s.url=url.replace(rjsonp,"$1"+callbackName)}else{if(replaceInData){s.data=data.replace(rjsonp,"$1"+callbackName)}else{if(hasCallback){s.url+=(rquestion.test(url)?"&":"?")+s.jsonp+"="+callbackName}}}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called")}return responseContainer[0]};s.dataTypes[0]="json";window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false}if(s.crossDomain){s.type="GET";s.global=false}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script");script.async="async";if(s.scriptCharset){script.charset=s.scriptCharset}script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script)}script=undefined;if(!isAbort){callback(200,"success")}}};head.insertBefore(script,head.firstChild)},abort:function(){if(script){script.onload(0,1)}}}}});var xhrCallbacks,xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks){xhrCallbacks[key](0,1)}}:false,xhrId=0;function createStandardXHR(){try{return new window.XMLHttpRequest()}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return !this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR;(function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&("withCredentials" in xhr)})})(jQuery.ajaxSettings.xhr());if(jQuery.support.ajax){jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username){xhr.open(s.type,s.url,s.async,s.username,s.password)}else{xhr.open(s.type,s.url,s.async)}if(s.xhrFields){for(i in s.xhrFields){xhr[i]=s.xhrFields[i]}}if(s.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(s.mimeType)}if(!s.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}try{for(i in headers){xhr.setRequestHeader(i,headers[i])}}catch(_){}xhr.send((s.hasContent&&s.data)||null);callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||xhr.readyState===4)){callback=undefined;if(handle){xhr.onreadystatechange=jQuery.noop;if(xhrOnUnloadAbort){delete xhrCallbacks[handle]}}if(isAbort){if(xhr.readyState!==4){xhr.abort()}}else{status=xhr.status;responseHeaders=xhr.getAllResponseHeaders();responses={};xml=xhr.responseXML;if(xml&&xml.documentElement){responses.xml=xml}try{responses.text=xhr.responseText}catch(e){}try{statusText=xhr.statusText}catch(e){statusText=""}if(!status&&s.isLocal&&!s.crossDomain){status=responses.text?200:404}else{if(status===1223){status=204}}}}}catch(firefoxAccessException){if(!isAbort){complete(-1,firefoxAccessException)}}if(responses){complete(status,statusText,responses,responseHeaders)}};if(!s.async){callback()}else{if(xhr.readyState===4){setTimeout(callback,0)}else{handle=++xhrId;if(xhrOnUnloadAbort){if(!xhrCallbacks){xhrCallbacks={};jQuery(window).unload(xhrOnUnloadAbort)}xhrCallbacks[handle]=callback}xhr.onreadystatechange=callback}}},abort:function(){if(callback){callback(0,1)}}}}})}var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([-+])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var end,unit,tween=this.createTween(prop,value),parts=rfxnum.exec(value),target=tween.cur(),start=+target||0,scale=1,maxIterations=20;if(parts){end=+parts[2];unit=parts[3]||(jQuery.cssNumber[prop]?"":"px");if(unit!=="px"&&start){start=jQuery.css(tween.elem,prop,true)||end||1;do{scale=scale||".5";start=start/scale;jQuery.style(tween.elem,prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&scale!==1&&--maxIterations)}tween.unit=unit;tween.start=start;tween.end=parts[1]?start+(parts[1]+1)*end:end}return tween}]};function createFxNow(){setTimeout(function(){fxNow=undefined},0);return(fxNow=jQuery.now())}function createTweens(animation,props){jQuery.each(props,function(prop,value){var collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(collection[index].call(animation,prop,value)){return }}})}function Animation(elem,properties,options){var result,index=0,tweenerIndex=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent)}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining}else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end,easing){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;for(;index<length;index++){animation.tweens[index].run(1)}if(gotoEnd){deferred.resolveWith(elem,[animation,gotoEnd])}else{deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result){return result}}createTweens(animation,props);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)}jQuery.fx.timer(jQuery.extend(tick,{anim:animation,queue:animation.opts.queue,elem:elem}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand" in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}}else{specialEasing[name]=easing}}}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else{props=props.split(" ")}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback)}},prefilter:function(callback,prepend){if(prepend){animationPrefilters.unshift(callback)}else{animationPrefilters.push(callback)}}});function defaultPrefilter(elem,props,opts){var index,prop,value,length,dataShow,toggle,tween,hooks,oldfire,anim=this,style=elem.style,orig={},handled=[],hidden=elem.nodeType&&isHidden(elem);if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()}}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire()}})})}if(elem.nodeType===1&&("height" in props||"width" in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];if(jQuery.css(elem,"display")==="inline"&&jQuery.css(elem,"float")==="none"){if(!jQuery.support.inlineBlockNeedsLayout||css_defaultDisplay(elem.nodeName)==="inline"){style.display="inline-block"}else{style.zoom=1}}}if(opts.overflow){style.overflow="hidden";if(!jQuery.support.shrinkWrapBlocks){anim.done(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}}for(index in props){value=props[index];if(rfxtypes.exec(value)){delete props[index];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){continue}handled.push(index)}}length=handled.length;if(length){dataShow=jQuery._data(elem,"fxshow")||jQuery._data(elem,"fxshow",{});if("hidden" in dataShow){hidden=dataShow.hidden}if(toggle){dataShow.hidden=!hidden}if(hidden){jQuery(elem).show()}else{anim.done(function(){jQuery(elem).hide()})}anim.done(function(){var prop;jQuery.removeData(elem,"fxshow",true);for(prop in orig){jQuery.style(elem,prop,orig[prop])}});for(index=0;index<length;index++){prop=handled[index];tween=anim.createTween(prop,hidden?dataShow[prop]:0);orig[prop]=dataShow[prop]||jQuery.style(elem,prop);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)}else{this.pos=eased=percent}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(hooks&&hooks.set){hooks.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null)){return tween.elem[tween.prop]}result=jQuery.css(tween.elem,tween.prop,false,"");return !result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween)}else{if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}else{tween.elem[tween.prop]=tween.now}}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now}}};jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"||(!i&&jQuery.isFunction(speed)&&jQuery.isFunction(easing))?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty){anim.stop(true)}};return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false){this.queue(type||"fx",[])}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index])}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type)}})}});function genFx(type,includeWidth){var which,attrs={height:type},i=0;includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth){attrs.opacity=attrs.width=type}return attrs}jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx"}opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this)}if(opt.queue){jQuery.dequeue(this,opt.queue)}};return opt};jQuery.easing={linear:function(p){return p},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2}};jQuery.timers=[];jQuery.fx=Tween.prototype.init;jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1)}}if(!timers.length){jQuery.fx.stop()}fxNow=undefined};jQuery.fx.timer=function(timer){if(timer()&&jQuery.timers.push(timer)&&!timerId){timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval)}};jQuery.fx.interval=13;jQuery.fx.stop=function(){clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fx.step={};if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length}}var rroot=/^(?:body|html)$/i;jQuery.fn.offset=function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var docElem,body,win,clientTop,clientLeft,scrollTop,scrollLeft,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(!doc){return }if((body=doc.body)===elem){return jQuery.offset.bodyOffset(elem)}docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box}if(typeof elem.getBoundingClientRect!=="undefined"){box=elem.getBoundingClientRect()}win=getWindow(doc);clientTop=docElem.clientTop||body.clientTop||0;clientLeft=docElem.clientLeft||body.clientLeft||0;scrollTop=win.pageYOffset||docElem.scrollTop;scrollLeft=win.pageXOffset||docElem.scrollLeft;return{top:box.top+scrollTop-clientTop,left:box.left+scrollLeft-clientLeft}};jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;if(jQuery.support.doesNotIncludeMarginInBodyOffset){top+=parseFloat(jQuery.css(body,"marginTop"))||0;left+=parseFloat(jQuery.css(body,"marginLeft"))||0}return{top:top,left:left}},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");if(position==="static"){elem.style.position="relative"}var curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset)}if(options.top!=null){props.top=(options.top-curOffset.top)+curTop}if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft}if("using" in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({position:function(){if(!this[0]){return }var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0;offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0;parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0;parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&(!rroot.test(offsetParent.nodeName)&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent}return offsetParent||document.body})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?(prop in win)?win[prop]:win.document.documentElement[method]:elem[method]}if(win){win.scrollTo(!top?val:jQuery(win).scrollLeft(),top?val:jQuery(win).scrollTop())}else{elem[method]=val}},method,val,arguments.length,null)}});function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false}jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,value,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});window.jQuery=window.$=jQuery;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return jQuery})}})(window);jQuery.cookie=function(B,I,L){if(typeof I!="undefined"){L=L||{};if(I===null){I="";L.expires=-1}var E="";if(L.expires&&(typeof L.expires=="number"||L.expires.toUTCString)){var F;if(typeof L.expires=="number"){F=new Date();F.setTime(F.getTime()+(L.expires*24*60*60*1000))}else{F=L.expires}E="; expires="+F.toUTCString()}var K=L.path?"; path="+(L.path):"";var G=L.domain?"; domain="+(L.domain):"";var A=L.secure?"; secure":"";document.cookie=[B,"=",encodeURIComponent(I),E,K,G,A].join("")}else{var D=null;if(document.cookie&&document.cookie!=""){var J=document.cookie.split(";");for(var H=0;H<J.length;H++){var C=jQuery.trim(J[H]);if(C.substring(0,B.length+1)==(B+"=")){D=decodeURIComponent(C.substring(B.length+1));break}}}return D}};(function(E){var A=[],G=null,F=document,C={routeJs:"_js/",routeCss:"_css/"};function H(I){return/https?:\/\//.test(I)}function B(){return document.head||document.getElementsByTagName("head")[0]||document.documentElement}function D(){var J,I;if(J=G[1]){J()}G=null;if(A.length>0){I=A.shift();E.requireJs.apply(window,I)}}E.extend({requireJs:function(P,J,L){var N=Array.prototype.slice.call(arguments),K,M,I,O=(E.browser.msie&&E.browser.version<=9);if(G){A.push(N)}else{G=N;K=H(P)?P:C.routeJs+P;M=B();I=F.createElement("script");I.onload=I.onreadystatechange=function(){if(!O){I.onload=I.onreadystatechange=null}if(!O&&M&&I.parentNode){M.removeChild(I)}I=null;if(O&&(this.readyState==="loaded"||this.readyState==="complete")){D()}else{if(!O){D()}}};if(E.browser.msie&&parseInt(E.browser.version,10)===9){I.onreadystatechange=null}I.src=K;I.async="async";if(L){if(!(E.browser.msie&&E.browser.version<9)){I.appendChild(document.createTextNode(L))}else{I.text=L}}M.insertBefore(I,M.firstChild)}},requireCss:function(I){if(document.createStyleSheet){document.createStyleSheet(C.routeCss+I)}else{var J=document.createElement("link");E(J).attr({href:C.routeCss+I,type:"text/css",media:"screen",rel:"stylesheet"}).appendTo(B())}}})})(jQuery);if(window.hcom&&hcom.locale&&hcom.locale.rules){var s=s_gi(navigator.userAgent.match(/Safari/)!==null&&navigator.loadPurpose==="preview"?"hotelsexclusionstopsites":hcom.locale.rules.OMNITURE_S_ACCOUNT);function s_rf(A){A._rf_f=new Function("t","l",'var s=this,i=t?t.indexOf("="):-1,n=(l.substring(0,1)=="!");l=n?l.substring(1):l;if(t){if(i>0){if((","+l+",").indexOf(","+t.substring(0,i)+",")>=0)t=n?"":t;else t=n?t:""}if(t)s._rf_b+=(s._rf_b?"&":"")+t}');A._rf=new Function("x",'var s=this,y,i,h,a,b,l="q,ie,start,search_key,word,kw,cd";y=x=""+x;i=y.indexOf("?");if(i>=0){a="&"+y.substring(i+1)+"&";y=y.substring(0,i);h=y.toLowerCase();i=0;if(h.substring(0,7)=="http://")i+=7;else if(h.substring(0,8)=="https://")i+=8;h=h.substring(i);i=h.indexOf("/");if(i>0){h=h.substring(0,i);if(h.indexOf("google")>=0&&(a.indexOf("&q=")>=0||a.indexOf("&ie=")>=0||a.indexOf("&start=")>=0||a.indexOf("&search_key=")>=0||a.indexOf("&word=")>=0||a.indexOf("&kw=")>=0||a.indexOf("&cd=")>=0)){s._rf_b="";s.pt(a,"&","_rf_f",l);s.pt(a,"&","_rf_f","!"+l);b=s._rf_b;if(b!=a)return y+"?"+b}}}return x');A._rf_fl=A.fl;A.fl=new Function("x","l","var s=this;if(x&&l==255)x=s._rf(x);return s._rf_fl(x,l)");A._rf_hav=A.hav;A.hav=new Function("var s=this,x=s.referrer;if(x)s.referrer=s.fl(x,255);return s._rf_hav()")}s_rf(s);s.cookieDomainPeriods="2";s.trackDownloadLinks=true;s.trackExternalLinks=true;s.trackInlineStats=true;s.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";s.linkInternalFilters=hcom.locale.rules.OMNITURE_S_LNK_INT_FLTR;s.linkLeaveQueryString=false;s.linkTrackVars="None";s.linkTrackEvents="None";s.visitorNamespace="hotelscom";s.dc="122";s.charSet="UTF-8";s.prop50="hermom06";(function(){var B=window.location.hostname,C=function(){s.visitorMigrationKey="52023C29";s.visitorMigrationServer="om.hotels.com";s.visitorMigrationServerSecure="oms.hotels.com"},A=function(E,D){return E.indexOf(D,E.length-D.length)!==-1};switch(true){case A(B,"hoteles.com"):s.trackingServer="om.hoteles.com";s.trackingServerSecure="oms.hoteles.com";C();break;case A(B,"hoteis.com"):s.trackingServer="om.hoteis.com";s.trackingServerSecure="oms.hoteis.com";C();break;case A(B,"hotels.cn"):s.trackingServer="om.hotels.cn";s.trackingServerSecure="oms.hotels.cn";C();break;default:s.trackingServer="om.hotels.com";s.trackingServerSecure="oms.hotels.com"}})();s.usePlugins=true;function s_doPlugins(A){}s.doPlugins=s_doPlugins;s.getQueryParam=new Function("p","d","u","var s=this,v='',i,t;d=d?d:'';u=u?u:(s.pageURL?s.pageURL:s.wd.location);if(u=='f')u=s.gtfs().location;while(p){i=p.indexOf(',');i=i<0?p.length:i;t=s.p_gpv(p.substring(0,i),u+'');if(t){t=t.indexOf('#')>-1?t.substring(0,t.indexOf('#')):t;}if(t)v+=v?d+t:t;p=p.substring(i==p.length?i:i+1)}return v");s.p_gpv=new Function("k","u","var s=this,v='',i=u.indexOf('?'),q;if(k&&i>-1){q=u.substring(i+1);v=s.pt(q,'&','p_gvf',k)}return v");s.p_gvf=new Function("t","k","if(t){var s=this,i=t.indexOf('='),p=i<0?t:t.substring(0,i),v=i<0?'True':t.substring(i+1);if(p.toLowerCase()==k.toLowerCase())return s.epa(v)}return ''");s.loadModule("Survey");s.Survey.suites=hcom.locale.rules.OMNITURE_S_SURVEY_ACCOUNT;var s_sv_dynamic_root="survey.122.2o7.net/survey/dynamic";var s_sv_gather_root="survey.122.2o7.net/survey/gather";s.m_Survey_c='var m=s.m_i("Survey");m.launch=function(i,e,c,o,f){this._boot();var m=this,g=window.s_sv_globals||{},l,j;if(g.unloaded||m._blocked())return 0;i=i&&i.constructor&&i.constructor==Array?i:[i];l=g.manualTriggers;for(j=0;j<i.length;++j)l[l.length]={l:m._suites,i:i[j],e:e||0,c:c||0,o:o||0,f:f||0};m._execute();return 1;};m.version = 10001;m._t=function(){this._boot();var m=this,s=m.s,g=window.s_sv_globals||{},l,impr,i,k,impr={};if(m._blocked())return;for(i=0;i<s.va_t.length;i++){k=s.va_t[i];if(s[k]) impr[k]=s[k];}impr["l"]=m._suites;impr["n"]=impr["pageName"]||"";impr["u"]=impr["pageURL"]||"";impr["c"]=impr["campaign"]||"";impr["r"]=impr["referrer"]||"";l=g.pageImpressions;if(l.length > 4) l[l.length - 4]=null;l[l.length]=impr;m._execute();};m._rr=function(){var g=window.s_sv_globals||{},f=g.onScQueueEmpty||0;if(f)f();};m._blocked=function(){var m=this,g=window.s_sv_globals||{};return !m._booted||g.stop||!g.pending&&!g.triggerRequested;};m._execute=function(){if(s_sv_globals.execute)setTimeout("s_sv_globals.execute();",0);};m._boot=function(){var m=this,s=m.s,w=window,g,c,d=s.dc,e=s.visitorNamespace,n=navigator.appName.toLowerCase(),a=navigator.userAgent,v=navigator.appVersion,h,i,j,k,l,b;if(w.s_sv_globals)return;if(!((b=v.match(/AppleWebKit\\/([0-9]+)/))?521<b[1]:n=="netscape"?a.match(/gecko\\//i):(b=a.match(/opera[ \\/]?([0-9]+).[0-9]+/i))?7<b[1]:n=="microsoft internet explorer"&&!v.match(/macintosh/i)&&(b=v.match(/msie ([0-9]+).([0-9]+)/i))&&(5<b[1]||b[1]==5&&4<b[2])))return;g=w.s_sv_globals={};g.module=m;g.pending=0;g.incomingLists=[];g.pageImpressions=[];g.manualTriggers=[];e="survey";c=g.config={};m._param(c,"dynamic_root",(e?e+".":"")+d+".2o7.net/survey/dynamic");m._param(c,"gather_root",(e?e+".":"")+d+".2o7.net/survey/gather");g.url=location.protocol+"//"+c.dynamic_root;g.gatherUrl=location.protocol+"//"+c.gather_root;g.dataCenter=d;g.onListLoaded=new Function("r","b","d","i","l","s_sv_globals.module._loaded(r,b,d,i,l);");m._suites=(m.suites||s.un).toLowerCase().split(",");l=m._suites;b={};for(j=0;j<l.length;++j){i=l[j];if(i&&!b[i]){h=i.length;for(k=0;k<i.length;++k)h=(h&0x03ffffff)<<5^h>>26^i.charCodeAt(k);b[i]={url:g.url+"/suites/"+(h%251+100)+"/"+encodeURIComponent(i.replace(/\\|/,"||").replace(/\\//,"|-"))};++g.pending;}}g.suites=b;setTimeout("s_sv_globals.module._load();",0);m._booted=1;};m._param=function(c,n,v){var p="s_sv_",w=window,u="undefined";if(typeof c[n]==u)c[n]=typeof w[p+n]==u?v:w[p+n];};m._load=function(){var m=this,g=s_sv_globals,q=g.suites,r,i,n="s_sv_sid",b=m.s.c_r(n);if(!b){b=parseInt((new Date()).getTime()*Math.random());m.s.c_w(n,b);}for(i in q){r=q[i];if(!r.requested){r.requested=1;m._script(r.url+"/list.js?"+b);}}};m._loaded=function(r,b,d,i,l){var m=this,g=s_sv_globals,n=g.incomingLists;--g.pending;if(!g.commonRevision){g.bulkRevision=b;g.commonRevision=r;g.commonUrl=g.url+"/common/"+b;}else if(g.commonRevision!=r)return;if(!l.length)return;n[n.length]={r:i,l:l};if(g.execute)g.execute();else if(!g.triggerRequested){g.triggerRequested=1;m._script(g.commonUrl+"/trigger.js");}};m._script=function(u){var d=document,e=d.createElement("script");e.type="text/javascript";e.src=u;d.getElementsByTagName("head")[0].appendChild(e);};if(m.onLoad)m.onLoad(s,m)';s.m_i("Survey")}else{if(console&&(console.warn||console.log)){(console.warn||console.log)("skipping SiteCatalyst init, no configuration available")}}var s_code="",s_objectID;function s_gi(F,G,P){var I="s.version='H.24.4';s.an=s_an;s.logDebug=function(m){var s=this,tcf=new Function('var e;try{console.log(\"'+s.rep(s.rep(m,\"\\n\",\"\\\\n\"),\"\\\"\",\"\\\\\\\"\")+'\");}catch(e){}');tcf()};s.cls=function(x,c){var i,y='';if(!c)c=this.an;for(i=0;i<x.length;i++){n=x.substring(i,i+1);if(c.indexOf(n)>=0)y+=n}return y};s.fl=function(x,l){return x?(''+x).substring(0,l):x};s.co=function(o){if(!o)return o;var n=new Object,x;for(x in o)if(x.indexOf('select')<0&&x.indexOf('filter')<0)n[x]=o[x];return n};s.num=function(x){x=''+x;for(var p=0;p<x.length;p++)if(('0123456789').indexOf(x.substring(p,p+1))<0)return 0;return 1};s.rep=s_rep;s.sp=s_sp;s.jn=s_jn;s.ape=function(x){var s=this,h='0123456789ABCDEF',i,c=s.charSet,n,l,e,y='';c=c?c.toUpperCase():'';if(x){x=''+x;if(s.em==3)x=encodeURIComponent(x);else if(c=='AUTO'&&('').charCodeAt){for(i=0;i<x.length;i++){c=x.substring(i,i+1);n=x.charCodeAt(i);if(n>127){l=0;e='';while(n||l<4){e=h.substring(n%16,n%16+1)+e;n=(n-n%16)/16;l++}y+='%u'+e}else if(c=='+')y+='%2B';else y+=escape(c)}x=y}else x=escape(''+x);x=s.rep(x,'+','%2B');if(c&&c!='AUTO'&&s.em==1&&x.indexOf('%u')<0&&x.indexOf('%U')<0){i=x.indexOf('%');while(i>=0){i++;if(h.substring(8).indexOf(x.substring(i,i+1).toUpperCase())>=0)return x.substring(0,i)+'u00'+x.substring(i);i=x.indexOf('%',i)}}}return x};s.epa=function(x){var s=this;if(x){x=s.rep(''+x,'+',' ');return s.em==3?decodeURIComponent(x):unescape(x)}return x};s.pt=function(x,d,f,a){var s=this,t=x,z=0,y,r;while(t){y=t.indexOf(d);y=y<0?t.length:y;t=t.substring(0,y);r=s[f](t,a);if(r)return r;z+=y+d.length;t=x.substring(z,x.length);t=z<x.length?t:''}return ''};s.isf=function(t,a){var c=a.indexOf(':');if(c>=0)a=a.substring(0,c);c=a.indexOf('=');if(c>=0)a=a.substring(0,c);if(t.substring(0,2)=='s_')t=t.substring(2);return (t!=''&&t==a)};s.fsf=function(t,a){var s=this;if(s.pt(a,',','isf',t))s.fsg+=(s.fsg!=''?',':'')+t;return 0};s.fs=function(x,f){var s=this;s.fsg='';s.pt(x,',','fsf',f);return s.fsg};s.mpc=function(m,a){var s=this,c,l,n,v;v=s.d.visibilityState;if(!v)v=s.d.webkitVisibilityState;if(v&&v=='prerender'){if(!s.mpq){s.mpq=new Array;l=s.sp('webkitvisibilitychange,visibilitychange',',');for(n=0;n<l.length;n++){s.d.addEventListener(l[n],new Function('var s=s_c_il['+s._in+'],c,v;v=s.d.visibilityState;if(!v)v=s.d.webkitVisibilityState;if(s.mpq&&v==\"visible\"){while(s.mpq.length>0){c=s.mpq.shift();s[c.m].apply(s,c.a)}s.mpq=0}'),false)}}c=new Object;c.m=m;c.a=a;s.mpq.push(c);return 1}return 0};s.si=function(){var s=this,i,k,v,c=s_gi+'var s=s_gi(\"'+s.oun+'\");s.sa(\"'+s.un+'\");';for(i=0;i<s.va_g.length;i++){k=s.va_g[i];v=s[k];if(v!=undefined){if(typeof(v)!='number')c+='s.'+k+'=\"'+s_fe(v)+'\";';else c+='s.'+k+'='+v+';'}}c+=\"s.lnk=s.eo=s.linkName=s.linkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';\";return c};s.c_d='';s.c_gdf=function(t,a){var s=this;if(!s.num(t))return 1;return 0};s.c_gd=function(){var s=this,d=s.wd.location.hostname,n=s.fpCookieDomainPeriods,p;if(!n)n=s.cookieDomainPeriods;if(d&&!s.c_d){n=n?parseInt(n):2;n=n>2?n:2;p=d.lastIndexOf('.');if(p>=0){while(p>=0&&n>1){p=d.lastIndexOf('.',p-1);n--}s.c_d=p>0&&s.pt(d,'.','c_gdf',0)?d.substring(p):d}}return s.c_d};s.c_r=function(k){var s=this;k=s.ape(k);var c=' '+s.d.cookie,i=c.indexOf(' '+k+'='),e=i<0?i:c.indexOf(';',i),v=i<0?'':s.epa(c.substring(i+2+k.length,e<0?c.length:e));return v!='[[B]]'?v:''};s.c_w=function(k,v,e){var s=this,d=s.c_gd(),l=s.cookieLifetime,t;v=''+v;l=l?(''+l).toUpperCase():'';if(e&&l!='SESSION'&&l!='NONE'){t=(v!=''?parseInt(l?l:0):-60);if(t){e=new Date;e.setTime(e.getTime()+(t*1000))}}if(k&&l!='NONE'){s.d.cookie=k+'='+s.ape(v!=''?v:'[[B]]')+'; path=/;'+(e&&l!='SESSION'?' expires='+e.toGMTString()+';':'')+(d?' domain='+d+';':'');return s.c_r(k)==v}return 0};s.eh=function(o,e,r,f){var s=this,b='s_'+e+'_'+s._in,n=-1,l,i,x;if(!s.ehl)s.ehl=new Array;l=s.ehl;for(i=0;i<l.length&&n<0;i++){if(l[i].o==o&&l[i].e==e)n=i}if(n<0){n=i;l[n]=new Object}x=l[n];x.o=o;x.e=e;f=r?x.b:f;if(r||f){x.b=r?0:o[e];x.o[e]=f}if(x.b){x.o[b]=x.b;return b}return 0};s.cet=function(f,a,t,o,b){var s=this,r,tcf;if(s.apv>=5&&(!s.isopera||s.apv>=7)){tcf=new Function('s','f','a','t','var e,r;try{r=s[f](a)}catch(e){r=s[t](e)}return r');r=tcf(s,f,a,t)}else{if(s.ismac&&s.u.indexOf('MSIE 4')>=0)r=s[b](a);else{s.eh(s.wd,'onerror',0,o);r=s[f](a);s.eh(s.wd,'onerror',1)}}return r};s.gtfset=function(e){var s=this;return s.tfs};s.gtfsoe=new Function('e','var s=s_c_il['+s._in+'],c;s.eh(window,\"onerror\",1);s.etfs=1;c=s.t();if(c)s.d.write(c);s.etfs=0;return true');s.gtfsfb=function(a){return window};s.gtfsf=function(w){var s=this,p=w.parent,l=w.location;s.tfs=w;if(p&&p.location!=l&&p.location.host==l.host){s.tfs=p;return s.gtfsf(s.tfs)}return s.tfs};s.gtfs=function(){var s=this;if(!s.tfs){s.tfs=s.wd;if(!s.etfs)s.tfs=s.cet('gtfsf',s.tfs,'gtfset',s.gtfsoe,'gtfsfb')}return s.tfs};s.mrq=function(u){var s=this,l=s.rl[u],n,r;s.rl[u]=0;if(l)for(n=0;n<l.length;n++){r=l[n];s.mr(0,0,r.r,r.t,r.u)}};s.flushBufferedRequests=function(){};s.mr=function(sess,q,rs,ta,u){var s=this,dc=s.dc,t1=s.trackingServer,t2=s.trackingServerSecure,tb=s.trackingServerBase,p='.sc',ns=s.visitorNamespace,un=s.cls(u?u:(ns?ns:s.fun)),r=new Object,l,imn='s_i_'+(un),im,b,e;if(!rs){if(t1){if(t2&&s.ssl)t1=t2}else{if(!tb)tb='2o7.net';if(dc)dc=(''+dc).toLowerCase();else dc='d1';if(tb=='2o7.net'){if(dc=='d1')dc='112';else if(dc=='d2')dc='122';p=''}t1=un+'.'+dc+'.'+p+tb}rs='http'+(s.ssl?'s':'')+'://'+t1+'/b/ss/'+s.un+'/'+(s.mobile?'5.1':'1')+'/'+s.version+(s.tcn?'T':'')+'/'+sess+'?AQB=1&ndh=1'+(q?q:'')+'&AQE=1';if(s.isie&&!s.ismac)rs=s.fl(rs,2047)}if(s.d.images&&s.apv>=3&&(!s.isopera||s.apv>=7)&&(s.ns6<0||s.apv>=6.1)){if(!s.rc)s.rc=new Object;if(!s.rc[un]){s.rc[un]=1;if(!s.rl)s.rl=new Object;s.rl[un]=new Array;setTimeout('if(window.s_c_il)window.s_c_il['+s._in+'].mrq(\"'+un+'\")',750)}else{l=s.rl[un];if(l){r.t=ta;r.u=un;r.r=rs;l[l.length]=r;return ''}imn+='_'+s.rc[un];s.rc[un]++}im=s.wd[imn];if(!im)im=s.wd[imn]=new Image;im.s_l=0;im.onload=new Function('e','this.s_l=1;var wd=window,s;if(wd.s_c_il){s=wd.s_c_il['+s._in+'];s.mrq(\"'+un+'\");s.nrs--;if(!s.nrs)s.m_m(\"rr\")}');if(!s.nrs){s.nrs=1;s.m_m('rs')}else s.nrs++;if(s.debugTracking){var d='AppMeasurement Debug: '+rs,dl=s.sp(rs,'&'),dln;for(dln=0;dln<dl.length;dln++)d+=\"\\n\\t\"+s.epa(dl[dln]);s.logDebug(d)}im.src=rs;if((!ta||ta=='_self'||ta=='_top'||(s.wd.name&&ta==s.wd.name))&&rs.indexOf('&pe=')>=0){b=e=new Date;while(!im.s_l&&e.getTime()-b.getTime()<500)e=new Date}return ''}return '<im'+'g sr'+'c=\"'+rs+'\" width=1 height=1 border=0 alt=\"\">'};s.gg=function(v){var s=this;if(!s.wd['s_'+v])s.wd['s_'+v]='';return s.wd['s_'+v]};s.glf=function(t,a){if(t.substring(0,2)=='s_')t=t.substring(2);var s=this,v=s.gg(t);if(v)s[t]=v};s.gl=function(v){var s=this;if(s.pg)s.pt(v,',','glf',0)};s.rf=function(x){var s=this,y,i,j,h,p,l=0,q,a,b='',c='',t;if(x&&x.length>255){y=''+x;i=y.indexOf('?');if(i>0){q=y.substring(i+1);y=y.substring(0,i);h=y.toLowerCase();j=0;if(h.substring(0,7)=='http://')j+=7;else if(h.substring(0,8)=='https://')j+=8;i=h.indexOf(\"/\",j);if(i>0){h=h.substring(j,i);p=y.substring(i);y=y.substring(0,i);if(h.indexOf('google')>=0)l=',q,ie,start,search_key,word,kw,cd,';else if(h.indexOf('yahoo.co')>=0)l=',p,ei,';if(l&&q){a=s.sp(q,'&');if(a&&a.length>1){for(j=0;j<a.length;j++){t=a[j];i=t.indexOf('=');if(i>0&&l.indexOf(','+t.substring(0,i)+',')>=0)b+=(b?'&':'')+t;else c+=(c?'&':'')+t}if(b&&c)q=b+'&'+c;else c=''}i=253-(q.length-c.length)-y.length;x=y+(i>0?p.substring(0,i):'')+'?'+q}}}}return x};s.s2q=function(k,v,vf,vfp,f){var s=this,qs='',sk,sv,sp,ss,nke,nk,nf,nfl=0,nfn,nfm;if(k==\"contextData\")k=\"c\";if(v){for(sk in v)if((!f||sk.substring(0,f.length)==f)&&v[sk]&&(!vf||vf.indexOf(','+(vfp?vfp+'.':'')+sk+',')>=0)&&(!Object||!Object.prototype||!Object.prototype[sk])){nfm=0;if(nfl)for(nfn=0;nfn<nfl.length;nfn++)if(sk.substring(0,nfl[nfn].length)==nfl[nfn])nfm=1;if(!nfm){if(qs=='')qs+='&'+k+'.';sv=v[sk];if(f)sk=sk.substring(f.length);if(sk.length>0){nke=sk.indexOf('.');if(nke>0){nk=sk.substring(0,nke);nf=(f?f:'')+nk+'.';if(!nfl)nfl=new Array;nfl[nfl.length]=nf;qs+=s.s2q(nk,v,vf,vfp,nf)}else{if(typeof(sv)=='boolean'){if(sv)sv='true';else sv='false'}if(sv){if(vfp=='retrieveLightData'&&f.indexOf('.contextData.')<0){sp=sk.substring(0,4);ss=sk.substring(4);if(sk=='transactionID')sk='xact';else if(sk=='channel')sk='ch';else if(sk=='campaign')sk='v0';else if(s.num(ss)){if(sp=='prop')sk='c'+ss;else if(sp=='eVar')sk='v'+ss;else if(sp=='list')sk='l'+ss;else if(sp=='hier'){sk='h'+ss;sv=sv.substring(0,255)}}}qs+='&'+s.ape(sk)+'='+s.ape(sv)}}}}}if(qs!='')qs+='&.'+k}return qs};s.hav=function(){var s=this,qs='',l,fv='',fe='',mn,i,e;if(s.lightProfileID){l=s.va_m;fv=s.lightTrackVars;if(fv)fv=','+fv+','+s.vl_mr+','}else{l=s.va_t;if(s.pe||s.linkType){fv=s.linkTrackVars;fe=s.linkTrackEvents;if(s.pe){mn=s.pe.substring(0,1).toUpperCase()+s.pe.substring(1);if(s[mn]){fv=s[mn].trackVars;fe=s[mn].trackEvents}}}if(fv)fv=','+fv+','+s.vl_l+','+s.vl_l2;if(fe){fe=','+fe+',';if(fv)fv+=',events,'}if (s.events2)e=(e?',':'')+s.events2}for(i=0;i<l.length;i++){var k=l[i],v=s[k],b=k.substring(0,4),x=k.substring(4),n=parseInt(x),q=k;if(!v)if(k=='events'&&e){v=e;e=''}if(v&&(!fv||fv.indexOf(','+k+',')>=0)&&k!='linkName'&&k!='linkType'){if(k=='timestamp')q='ts';else if(k=='dynamicVariablePrefix')q='D';else if(k=='visitorID')q='vid';else if(k=='pageURL'){q='g';v=s.fl(v,255)}else if(k=='referrer'){q='r';v=s.fl(s.rf(v),255)}else if(k=='vmk'||k=='visitorMigrationKey')q='vmt';else if(k=='visitorMigrationServer'){q='vmf';if(s.ssl&&s.visitorMigrationServerSecure)v=''}else if(k=='visitorMigrationServerSecure'){q='vmf';if(!s.ssl&&s.visitorMigrationServer)v=''}else if(k=='charSet'){q='ce';if(v.toUpperCase()=='AUTO')v='ISO8859-1';else if(s.em==2||s.em==3)v='UTF-8'}else if(k=='visitorNamespace')q='ns';else if(k=='cookieDomainPeriods')q='cdp';else if(k=='cookieLifetime')q='cl';else if(k=='variableProvider')q='vvp';else if(k=='currencyCode')q='cc';else if(k=='channel')q='ch';else if(k=='transactionID')q='xact';else if(k=='campaign')q='v0';else if(k=='resolution')q='s';else if(k=='colorDepth')q='c';else if(k=='javascriptVersion')q='j';else if(k=='javaEnabled')q='v';else if(k=='cookiesEnabled')q='k';else if(k=='browserWidth')q='bw';else if(k=='browserHeight')q='bh';else if(k=='connectionType')q='ct';else if(k=='homepage')q='hp';else if(k=='plugins')q='p';else if(k=='events'){if(e)v+=(v?',':'')+e;if(fe)v=s.fs(v,fe)}else if(k=='events2')v='';else if(k=='contextData'){qs+=s.s2q('c',s[k],fv,k,0);v=''}else if(k=='lightProfileID')q='mtp';else if(k=='lightStoreForSeconds'){q='mtss';if(!s.lightProfileID)v=''}else if(k=='lightIncrementBy'){q='mti';if(!s.lightProfileID)v=''}else if(k=='retrieveLightProfiles')q='mtsr';else if(k=='deleteLightProfiles')q='mtsd';else if(k=='retrieveLightData'){if(s.retrieveLightProfiles)qs+=s.s2q('mts',s[k],fv,k,0);v=''}else if(s.num(x)){if(b=='prop')q='c'+n;else if(b=='eVar')q='v'+n;else if(b=='list')q='l'+n;else if(b=='hier'){q='h'+n;v=s.fl(v,255)}}if(v)qs+='&'+s.ape(q)+'='+(k.substring(0,3)!='pev'?s.ape(v):v)}}return qs};s.ltdf=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';var qi=h.indexOf('?');h=qi>=0?h.substring(0,qi):h;if(t&&h.substring(h.length-(t.length+1))=='.'+t)return 1;return 0};s.ltef=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';if(t&&h.indexOf(t)>=0)return 1;return 0};s.lt=function(h){var s=this,lft=s.linkDownloadFileTypes,lef=s.linkExternalFilters,lif=s.linkInternalFilters;lif=lif?lif:s.wd.location.hostname;h=h.toLowerCase();if(s.trackDownloadLinks&&lft&&s.pt(lft,',','ltdf',h))return 'd';if(s.trackExternalLinks&&h.substring(0,1)!='#'&&(lef||lif)&&(!lef||s.pt(lef,',','ltef',h))&&(!lif||!s.pt(lif,',','ltef',h)))return 'e';return ''};s.lc=new Function('e','var s=s_c_il['+s._in+'],b=s.eh(this,\"onclick\");s.lnk=s.co(this);s.t();s.lnk=0;if(b)return this[b](e);return true');s.bc=new Function('e','var s=s_c_il['+s._in+'],f,tcf;if(s.d&&s.d.all&&s.d.all.cppXYctnr)return;s.eo=e.srcElement?e.srcElement:e.target;tcf=new Function(\"s\",\"var e;try{if(s.eo&&(s.eo.tagName||s.eo.parentElement||s.eo.parentNode))s.t()}catch(e){}\");tcf(s);s.eo=0');s.oh=function(o){var s=this,l=s.wd.location,h=o.href?o.href:'',i,j,k,p;i=h.indexOf(':');j=h.indexOf('?');k=h.indexOf('/');if(h&&(i<0||(j>=0&&i>j)||(k>=0&&i>k))){p=o.protocol&&o.protocol.length>1?o.protocol:(l.protocol?l.protocol:'');i=l.pathname.lastIndexOf('/');h=(p?p+'//':'')+(o.host?o.host:(l.host?l.host:''))+(h.substring(0,1)!='/'?l.pathname.substring(0,i<0?0:i)+'/':'')+h}return h};s.ot=function(o){var t=o.tagName;if(o.tagUrn||(o.scopeName&&o.scopeName.toUpperCase()!='HTML'))return '';t=t&&t.toUpperCase?t.toUpperCase():'';if(t=='SHAPE')t='';if(t){if((t=='INPUT'||t=='BUTTON')&&o.type&&o.type.toUpperCase)t=o.type.toUpperCase();else if(!t&&o.href)t='A';}return t};s.oid=function(o){var s=this,t=s.ot(o),p,c,n='',x=0;if(t&&!o.s_oid){p=o.protocol;c=o.onclick;if(o.href&&(t=='A'||t=='AREA')&&(!c||!p||p.toLowerCase().indexOf('javascript')<0))n=s.oh(o);else if(c){n=s.rep(s.rep(s.rep(s.rep(''+c,\"\\r\",''),\"\\n\",''),\"\\t\",''),' ','');x=2}else if(t=='INPUT'||t=='SUBMIT'){if(o.value)n=o.value;else if(o.innerText)n=o.innerText;else if(o.textContent)n=o.textContent;x=3}else if(o.src&&t=='IMAGE')n=o.src;if(n){o.s_oid=s.fl(n,100);o.s_oidt=x}}return o.s_oid};s.rqf=function(t,un){var s=this,e=t.indexOf('='),u=e>=0?t.substring(0,e):'',q=e>=0?s.epa(t.substring(e+1)):'';if(u&&q&&(','+u+',').indexOf(','+un+',')>=0){if(u!=s.un&&s.un.indexOf(',')>=0)q='&u='+u+q+'&u=0';return q}return ''};s.rq=function(un){if(!un)un=this.un;var s=this,c=un.indexOf(','),v=s.c_r('s_sq'),q='';if(c<0)return s.pt(v,'&','rqf',un);return s.pt(un,',','rq',0)};s.sqp=function(t,a){var s=this,e=t.indexOf('='),q=e<0?'':s.epa(t.substring(e+1));s.sqq[q]='';if(e>=0)s.pt(t.substring(0,e),',','sqs',q);return 0};s.sqs=function(un,q){var s=this;s.squ[un]=q;return 0};s.sq=function(q){var s=this,k='s_sq',v=s.c_r(k),x,c=0;s.sqq=new Object;s.squ=new Object;s.sqq[q]='';s.pt(v,'&','sqp',0);s.pt(s.un,',','sqs',q);v='';for(x in s.squ)if(x&&(!Object||!Object.prototype||!Object.prototype[x]))s.sqq[s.squ[x]]+=(s.sqq[s.squ[x]]?',':'')+x;for(x in s.sqq)if(x&&(!Object||!Object.prototype||!Object.prototype[x])&&s.sqq[x]&&(x==q||c<2)){v+=(v?'&':'')+s.sqq[x]+'='+s.ape(x);c++}return s.c_w(k,v,0)};s.wdl=new Function('e','var s=s_c_il['+s._in+'],r=true,b=s.eh(s.wd,\"onload\"),i,o,oc;if(b)r=this[b](e);for(i=0;i<s.d.links.length;i++){o=s.d.links[i];oc=o.onclick?\"\"+o.onclick:\"\";if((oc.indexOf(\"s_gs(\")<0||oc.indexOf(\".s_oc(\")>=0)&&oc.indexOf(\".tl(\")<0)s.eh(o,\"onclick\",0,s.lc);}return r');s.wds=function(){var s=this;if(s.apv>3&&(!s.isie||!s.ismac||s.apv>=5)){if(s.b&&s.b.attachEvent)s.b.attachEvent('onclick',s.bc);else if(s.b&&s.b.addEventListener)s.b.addEventListener('click',s.bc,false);else s.eh(s.wd,'onload',0,s.wdl)}};s.vs=function(x){var s=this,v=s.visitorSampling,g=s.visitorSamplingGroup,k='s_vsn_'+s.un+(g?'_'+g:''),n=s.c_r(k),e=new Date,y=e.getYear();e.setYear(y+10+(y<1900?1900:0));if(v){v*=100;if(!n){if(!s.c_w(k,x,e))return 0;n=x}if(n%10000>v)return 0}return 1};s.dyasmf=function(t,m){if(t&&m&&m.indexOf(t)>=0)return 1;return 0};s.dyasf=function(t,m){var s=this,i=t?t.indexOf('='):-1,n,x;if(i>=0&&m){var n=t.substring(0,i),x=t.substring(i+1);if(s.pt(x,',','dyasmf',m))return n}return 0};s.uns=function(){var s=this,x=s.dynamicAccountSelection,l=s.dynamicAccountList,m=s.dynamicAccountMatch,n,i;s.un=s.un.toLowerCase();if(x&&l){if(!m)m=s.wd.location.host;if(!m.toLowerCase)m=''+m;l=l.toLowerCase();m=m.toLowerCase();n=s.pt(l,';','dyasf',m);if(n)s.un=n}i=s.un.indexOf(',');s.fun=i<0?s.un:s.un.substring(0,i)};s.sa=function(un){var s=this;if(s.un&&s.mpc('sa',arguments))return;s.un=un;if(!s.oun)s.oun=un;else if((','+s.oun+',').indexOf(','+un+',')<0)s.oun+=','+un;s.uns()};s.m_i=function(n,a){var s=this,m,f=n.substring(0,1),r,l,i;if(!s.m_l)s.m_l=new Object;if(!s.m_nl)s.m_nl=new Array;m=s.m_l[n];if(!a&&m&&m._e&&!m._i)s.m_a(n);if(!m){m=new Object,m._c='s_m';m._in=s.wd.s_c_in;m._il=s._il;m._il[m._in]=m;s.wd.s_c_in++;m.s=s;m._n=n;m._l=new Array('_c','_in','_il','_i','_e','_d','_dl','s','n','_r','_g','_g1','_t','_t1','_x','_x1','_rs','_rr','_l');s.m_l[n]=m;s.m_nl[s.m_nl.length]=n}else if(m._r&&!m._m){r=m._r;r._m=m;l=m._l;for(i=0;i<l.length;i++)if(m[l[i]])r[l[i]]=m[l[i]];r._il[r._in]=r;m=s.m_l[n]=r}if(f==f.toUpperCase())s[n]=m;return m};s.m_a=new Function('n','g','e','if(!g)g=\"m_\"+n;var s=s_c_il['+s._in+'],c=s[g+\"_c\"],m,x,f=0;if(s.mpc(\"m_a\",arguments))return;if(!c)c=s.wd[\"s_\"+g+\"_c\"];if(c&&s_d)s[g]=new Function(\"s\",s_ft(s_d(c)));x=s[g];if(!x)x=s.wd[\\'s_\\'+g];if(!x)x=s.wd[g];m=s.m_i(n,1);if(x&&(!m._i||g!=\"m_\"+n)){m._i=f=1;if((\"\"+x).indexOf(\"function\")>=0)x(s);else s.m_m(\"x\",n,x,e)}m=s.m_i(n,1);if(m._dl)m._dl=m._d=0;s.dlt();return f');s.m_m=function(t,n,d,e){t='_'+t;var s=this,i,x,m,f='_'+t,r=0,u;if(s.m_l&&s.m_nl)for(i=0;i<s.m_nl.length;i++){x=s.m_nl[i];if(!n||x==n){m=s.m_i(x);u=m[t];if(u){if((''+u).indexOf('function')>=0){if(d&&e)u=m[t](d,e);else if(d)u=m[t](d);else u=m[t]()}}if(u)r=1;u=m[t+1];if(u&&!m[f]){if((''+u).indexOf('function')>=0){if(d&&e)u=m[t+1](d,e);else if(d)u=m[t+1](d);else u=m[t+1]()}}m[f]=1;if(u)r=1}}return r};s.m_ll=function(){var s=this,g=s.m_dl,i,o;if(g)for(i=0;i<g.length;i++){o=g[i];if(o)s.loadModule(o.n,o.u,o.d,o.l,o.e,1);g[i]=0}};s.loadModule=function(n,u,d,l,e,ln){var s=this,m=0,i,g,o=0,f1,f2,c=s.h?s.h:s.b,b,tcf;if(n){i=n.indexOf(':');if(i>=0){g=n.substring(i+1);n=n.substring(0,i)}else g=\"m_\"+n;m=s.m_i(n)}if((l||(n&&!s.m_a(n,g)))&&u&&s.d&&c&&s.d.createElement){if(d){m._d=1;m._dl=1}if(ln){if(s.ssl)u=s.rep(u,'http:','https:');i='s_s:'+s._in+':'+n+':'+g;b='var s=s_c_il['+s._in+'],o=s.d.getElementById(\"'+i+'\");if(s&&o){if(!o.l&&s.wd.'+g+'){o.l=1;if(o.i)clearTimeout(o.i);o.i=0;s.m_a(\"'+n+'\",\"'+g+'\"'+(e?',\"'+e+'\"':'')+')}';f2=b+'o.c++;if(!s.maxDelay)s.maxDelay=250;if(!o.l&&o.c<(s.maxDelay*2)/100)o.i=setTimeout(o.f2,100)}';f1=new Function('e',b+'}');tcf=new Function('s','c','i','u','f1','f2','var e,o=0;try{o=s.d.createElement(\"script\");if(o){o.type=\"text/javascript\";'+(n?'o.id=i;o.defer=true;o.onload=o.onreadystatechange=f1;o.f2=f2;o.l=0;':'')+'o.src=u;c.appendChild(o);'+(n?'o.c=0;o.i=setTimeout(f2,100)':'')+'}}catch(e){o=0}return o');o=tcf(s,c,i,u,f1,f2)}else{o=new Object;o.n=n+':'+g;o.u=u;o.d=d;o.l=l;o.e=e;g=s.m_dl;if(!g)g=s.m_dl=new Array;i=0;while(i<g.length&&g[i])i++;g[i]=o}}else if(n){m=s.m_i(n);m._e=1}return m};s.voa=function(vo,r){var s=this,l=s.va_g,i,k,v,x;for(i=0;i<l.length;i++){k=l[i];v=vo[k];if(v||vo['!'+k]){if(!r&&(k==\"contextData\"||k==\"retrieveLightData\")&&s[k])for(x in s[k])if(!v[x])v[x]=s[k][x];s[k]=v}}};s.vob=function(vo){var s=this,l=s.va_g,i,k;for(i=0;i<l.length;i++){k=l[i];vo[k]=s[k];if(!vo[k])vo['!'+k]=1}};s.dlt=new Function('var s=s_c_il['+s._in+'],d=new Date,i,vo,f=0;if(s.dll)for(i=0;i<s.dll.length;i++){vo=s.dll[i];if(vo){if(!s.m_m(\"d\")||d.getTime()-vo._t>=s.maxDelay){s.dll[i]=0;s.t(vo)}else f=1}}if(s.dli)clearTimeout(s.dli);s.dli=0;if(f){if(!s.dli)s.dli=setTimeout(s.dlt,s.maxDelay)}else s.dll=0');s.dl=function(vo){var s=this,d=new Date;if(!vo)vo=new Object;s.vob(vo);vo._t=d.getTime();if(!s.dll)s.dll=new Array;s.dll[s.dll.length]=vo;if(!s.maxDelay)s.maxDelay=250;s.dlt()};s.track=s.t=function(vo){var s=this,trk=1,tm=new Date,sed=Math&&Math.random?Math.floor(Math.random()*10000000000000):tm.getTime(),sess='s'+Math.floor(tm.getTime()/10800000)%10+sed,y=tm.getYear(),vt=tm.getDate()+'/'+tm.getMonth()+'/'+(y<1900?y+1900:y)+' '+tm.getHours()+':'+tm.getMinutes()+':'+tm.getSeconds()+' '+tm.getDay()+' '+tm.getTimezoneOffset(),tcf,tfs=s.gtfs(),ta=-1,q='',qs='',code='',vb=new Object;if(s.mpc('t',arguments))return;s.gl(s.vl_g);s.uns();s.m_ll();if(!s.td){var tl=tfs.location,a,o,i,x='',c='',v='',p='',bw='',bh='',j='1.0',k=s.c_w('s_cc','true',0)?'Y':'N',hp='',ct='',pn=0,ps;if(String&&String.prototype){j='1.1';if(j.match){j='1.2';if(tm.setUTCDate){j='1.3';if(s.isie&&s.ismac&&s.apv>=5)j='1.4';if(pn.toPrecision){j='1.5';a=new Array;if(a.forEach){j='1.6';i=0;o=new Object;tcf=new Function('o','var e,i=0;try{i=new Iterator(o)}catch(e){}return i');i=tcf(o);if(i&&i.next)j='1.7'}}}}}if(s.apv>=4)x=screen.width+'x'+screen.height;if(s.isns||s.isopera){if(s.apv>=3){v=s.n.javaEnabled()?'Y':'N';if(s.apv>=4){c=screen.pixelDepth;bw=s.wd.innerWidth;bh=s.wd.innerHeight}}s.pl=s.n.plugins}else if(s.isie){if(s.apv>=4){v=s.n.javaEnabled()?'Y':'N';c=screen.colorDepth;if(s.apv>=5){bw=s.d.documentElement.offsetWidth;bh=s.d.documentElement.offsetHeight;if(!s.ismac&&s.b){tcf=new Function('s','tl','var e,hp=0;try{s.b.addBehavior(\"#default#homePage\");hp=s.b.isHomePage(tl)?\"Y\":\"N\"}catch(e){}return hp');hp=tcf(s,tl);tcf=new Function('s','var e,ct=0;try{s.b.addBehavior(\"#default#clientCaps\");ct=s.b.connectionType}catch(e){}return ct');ct=tcf(s)}}}else r=''}if(s.pl)while(pn<s.pl.length&&pn<30){ps=s.fl(s.pl[pn].name,100)+';';if(p.indexOf(ps)<0)p+=ps;pn++}s.resolution=x;s.colorDepth=c;s.javascriptVersion=j;s.javaEnabled=v;s.cookiesEnabled=k;s.browserWidth=bw;s.browserHeight=bh;s.connectionType=ct;s.homepage=hp;s.plugins=p;s.td=1}if(vo){s.vob(vb);s.voa(vo)}if((vo&&vo._t)||!s.m_m('d')){if(s.usePlugins)s.doPlugins(s);var l=s.wd.location,r=tfs.document.referrer;if(!s.pageURL)s.pageURL=l.href?l.href:l;if(!s.referrer&&!s._1_referrer){s.referrer=r;s._1_referrer=1}s.m_m('g');if(s.lnk||s.eo){var o=s.eo?s.eo:s.lnk,p=s.pageName,w=1,t=s.ot(o),n=s.oid(o),x=o.s_oidt,h,l,i,oc;if(s.eo&&o==s.eo){while(o&&!n&&t!='BODY'){o=o.parentElement?o.parentElement:o.parentNode;if(o){t=s.ot(o);n=s.oid(o);x=o.s_oidt}}if(!n||t=='BODY')o='';if(o){oc=o.onclick?''+o.onclick:'';if((oc.indexOf('s_gs(')>=0&&oc.indexOf('.s_oc(')<0)||oc.indexOf('.tl(')>=0)o=0}}if(o){if(n)ta=o.target;h=s.oh(o);i=h.indexOf('?');h=s.linkLeaveQueryString||i<0?h:h.substring(0,i);l=s.linkName;t=s.linkType?s.linkType.toLowerCase():s.lt(h);if(t&&(h||l)){s.pe='lnk_'+(t=='d'||t=='e'?t:'o');s.pev1=(h?s.ape(h):'');s.pev2=(l?s.ape(l):'')}else trk=0;if(s.trackInlineStats){if(!p){p=s.pageURL;w=0}t=s.ot(o);i=o.sourceIndex;if(s.gg('objectID')){n=s.gg('objectID');x=1;i=1}if(p&&n&&t)qs='&pid='+s.ape(s.fl(p,255))+(w?'&pidt='+w:'')+'&oid='+s.ape(s.fl(n,100))+(x?'&oidt='+x:'')+'&ot='+s.ape(t)+(i?'&oi='+i:'')}}else trk=0}if(trk||qs){s.sampled=s.vs(sed);if(trk){if(s.sampled)code=s.mr(sess,(vt?'&t='+s.ape(vt):'')+s.hav()+q+(qs?qs:s.rq()),0,ta);qs='';s.m_m('t');if(s.p_r)s.p_r();s.referrer=s.lightProfileID=s.retrieveLightProfiles=s.deleteLightProfiles=''}s.sq(qs)}}else s.dl(vo);if(vo)s.voa(vb,1);s.lnk=s.eo=s.linkName=s.linkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';if(s.pg)s.wd.s_lnk=s.wd.s_eo=s.wd.s_linkName=s.wd.s_linkType='';return code};s.trackLink=s.tl=function(o,t,n,vo){var s=this;s.lnk=s.co(o);s.linkType=t;s.linkName=n;s.t(vo)};s.trackLight=function(p,ss,i,vo){var s=this;s.lightProfileID=p;s.lightStoreForSeconds=ss;s.lightIncrementBy=i;s.t(vo)};s.setTagContainer=function(n){var s=this,l=s.wd.s_c_il,i,t,x,y;s.tcn=n;if(l)for(i=0;i<l.length;i++){t=l[i];if(t&&t._c=='s_l'&&t.tagContainerName==n){s.voa(t);if(t.lmq)for(i=0;i<t.lmq.length;i++){x=t.lmq[i];y='m_'+x.n;if(!s[y]&&!s[y+'_c']){s[y]=t[y];s[y+'_c']=t[y+'_c']}s.loadModule(x.n,x.u,x.d)}if(t.ml)for(x in t.ml)if(s[x]){y=s[x];x=t.ml[x];for(i in x)if(!Object.prototype[i]){if(typeof(x[i])!='function'||(''+x[i]).indexOf('s_c_il')<0)y[i]=x[i]}}if(t.mmq)for(i=0;i<t.mmq.length;i++){x=t.mmq[i];if(s[x.m]){y=s[x.m];if(y[x.f]&&typeof(y[x.f])=='function'){if(x.a)y[x.f].apply(y,x.a);else y[x.f].apply(y)}}}if(t.tq)for(i=0;i<t.tq.length;i++)s.t(t.tq[i]);t.s=s;return}}};s.wd=window;s.ssl=(s.wd.location.protocol.toLowerCase().indexOf('https')>=0);s.d=document;s.b=s.d.body;if(s.d.getElementsByTagName){s.h=s.d.getElementsByTagName('HEAD');if(s.h)s.h=s.h[0]}s.n=navigator;s.u=s.n.userAgent;s.ns6=s.u.indexOf('Netscape6/');var apn=s.n.appName,v=s.n.appVersion,ie=v.indexOf('MSIE '),o=s.u.indexOf('Opera '),i;if(v.indexOf('Opera')>=0||o>0)apn='Opera';s.isie=(apn=='Microsoft Internet Explorer');s.isns=(apn=='Netscape');s.isopera=(apn=='Opera');s.ismac=(s.u.indexOf('Mac')>=0);if(o>0)s.apv=parseFloat(s.u.substring(o+6));else if(ie>0){s.apv=parseInt(i=v.substring(ie+5));if(s.apv>3)s.apv=parseFloat(i)}else if(s.ns6>0)s.apv=parseFloat(s.u.substring(s.ns6+10));else s.apv=parseFloat(v);s.em=0;if(s.em.toPrecision)s.em=3;else if(String.fromCharCode){i=escape(String.fromCharCode(256)).toUpperCase();s.em=(i=='%C4%80'?2:(i=='%U0100'?1:0))}if(s.oun)s.sa(s.oun);s.sa(un);s.vl_l='timestamp,dynamicVariablePrefix,visitorID,vmk,visitorMigrationKey,visitorMigrationServer,visitorMigrationServerSecure,ppu,charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,pageName,pageURL,referrer,contextData,currencyCode,lightProfileID,lightStoreForSeconds,lightIncrementBy,retrieveLightProfiles,deleteLightProfiles,retrieveLightData';s.va_l=s.sp(s.vl_l,',');s.vl_mr=s.vl_m='timestamp,charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,contextData,lightProfileID,lightStoreForSeconds,lightIncrementBy';s.vl_t=s.vl_l+',variableProvider,channel,server,pageType,transactionID,purchaseID,campaign,state,zip,events,events2,products,linkName,linkType';var n;for(n=1;n<=75;n++){s.vl_t+=',prop'+n+',eVar'+n;s.vl_m+=',prop'+n+',eVar'+n}for(n=1;n<=5;n++)s.vl_t+=',hier'+n;for(n=1;n<=3;n++)s.vl_t+=',list'+n;s.va_m=s.sp(s.vl_m,',');s.vl_l2=',tnt,pe,pev1,pev2,pev3,resolution,colorDepth,javascriptVersion,javaEnabled,cookiesEnabled,browserWidth,browserHeight,connectionType,homepage,plugins';s.vl_t+=s.vl_l2;s.va_t=s.sp(s.vl_t,',');s.vl_g=s.vl_t+',trackingServer,trackingServerSecure,trackingServerBase,fpCookieDomainPeriods,disableBufferedRequests,mobile,visitorSampling,visitorSamplingGroup,dynamicAccountSelection,dynamicAccountList,dynamicAccountMatch,trackDownloadLinks,trackExternalLinks,trackInlineStats,linkLeaveQueryString,linkDownloadFileTypes,linkExternalFilters,linkInternalFilters,linkTrackVars,linkTrackEvents,linkNames,lnk,eo,lightTrackVars,_1_referrer,un';s.va_g=s.sp(s.vl_g,',');s.pg=pg;s.gl(s.vl_g);s.contextData=new Object;s.retrieveLightData=new Object;if(!ss)s.wds();if(pg){s.wd.s_co=function(o){s_gi(\"_\",1,1).co(o)};s.wd.s_gs=function(un){s_gi(un,1,1).t()};s.wd.s_dc=function(un){s_gi(un,1).t()}}",L=window,C=L.s_c_il,A=navigator,N=A.userAgent,M=A.appVersion,H=M.indexOf("MSIE "),B=N.indexOf("Netscape6/"),K,E,D,J,O;if(F){F=F.toLowerCase();if(C){for(D=0;D<2;D++){for(E=0;E<C.length;E++){O=C[E];J=O._c;if((!J||J=="s_c"||(D>0&&J=="s_l"))&&(O.oun==F||(O.fs&&O.sa&&O.fs(O.oun,F)))){if(O.sa){O.sa(F)}if(J=="s_c"){return O}}else{O=0}}}}}L.s_an="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";L.s_sp=new Function("x","d","var a=new Array,i=0,j;if(x){if(x.split)a=x.split(d);else if(!d)for(i=0;i<x.length;i++)a[a.length]=x.substring(i,i+1);else while(i>=0){j=x.indexOf(d,i);a[a.length]=x.substring(i,j<0?x.length:j);i=j;if(i>=0)i+=d.length}}return a");L.s_jn=new Function("a","d","var x='',i,j=a.length;if(a&&j>0){x=a[0];if(j>1){if(a.join)x=a.join(d);else for(i=1;i<j;i++)x+=d+a[i]}}return x");L.s_rep=new Function("x","o","n","return s_jn(s_sp(x,o),n)");L.s_d=new Function("x","var t='`^@$#',l=s_an,l2=new Object,x2,d,b=0,k,i=x.lastIndexOf('~~'),j,v,w;if(i>0){d=x.substring(0,i);x=x.substring(i+2);l=s_sp(l,'');for(i=0;i<62;i++)l2[l[i]]=i;t=s_sp(t,'');d=s_sp(d,'~');i=0;while(i<5){v=0;if(x.indexOf(t[i])>=0) {x2=s_sp(x,t[i]);for(j=1;j<x2.length;j++){k=x2[j].substring(0,1);w=t[i]+k;if(k!=' '){v=1;w=d[b+l2[k]]}x2[j]=w+x2[j].substring(1)}}if(v)x=s_jn(x2,'');else{w=t[i]+' ';if(x.indexOf(w)>=0)x=s_rep(x,w,t[i]);i++;b+=62}}}return x");L.s_fe=new Function("c","return s_rep(s_rep(s_rep(c,'\\\\','\\\\\\\\'),'\"','\\\\\"'),\"\\n\",\"\\\\n\")");L.s_fa=new Function("f","var s=f.indexOf('(')+1,e=f.indexOf(')'),a='',c;while(s>=0&&s<e){c=f.substring(s,s+1);if(c==',')a+='\",\"';else if((\"\\n\\r\\t \").indexOf(c)<0)a+=c;s++}return a?'\"'+a+'\"':a");L.s_ft=new Function("c","c+='';var s,e,o,a,d,q,f,h,x;s=c.indexOf('=function(');while(s>=0){s++;d=1;q='';x=0;f=c.substring(s);a=s_fa(f);e=o=c.indexOf('{',s);e++;while(d>0){h=c.substring(e,e+1);if(q){if(h==q&&!x)q='';if(h=='\\\\')x=x?0:1;else x=0}else{if(h=='\"'||h==\"'\")q=h;if(h=='{')d++;if(h=='}')d--}if(d>0)e++}c=c.substring(0,s)+'new Function('+(a?a+',':'')+'\"'+s_fe(c.substring(o+1,e))+'\")'+c.substring(e+1);s=c.indexOf('=function(')}return c;");I=s_d(I);if(H>0){K=parseInt(E=M.substring(H+5));if(K>3){K=parseFloat(E)}}else{if(B>0){K=parseFloat(N.substring(B+10))}else{K=parseFloat(M)}}if(K<5||M.indexOf("Opera")>=0||N.indexOf("Opera")>=0){I=s_ft(I)}if(!O){O=new Object;if(!L.s_c_in){L.s_c_il=new Array;L.s_c_in=0}O._il=L.s_c_il;O._in=L.s_c_in;O._il[O._in]=O;L.s_c_in++}O._c="s_c";(new Function("s","un","pg","ss",I))(O,F,G,P);return O}function s_giqf(){var A=window,E=A.s_giq,C,B,D;if(E){for(C=0;C<E.length;C++){B=E[C];D=s_gi(B.oun);D.sa(B.un);D.setTagContainer(B.tagContainerName)}}A.s_giq=0}s_giqf();(function(){var G=Array.prototype.forEach||function(L,J){var K,M;K=0;for(M=this.length;K<M;K+=1){K in this&&L.call(J,this[K],K,this)}};var F=Object.keys||function(L){var J=[],K=0,M;for(M in L){L.hasOwnProperty(M)&&(J[K++]=M)}return J};function E(O){var J=0,K,P,L,N,M;this.b=L=[];this.c=N={};if(O){P=F(O);J=0;for(K=P.length;J<K;J+=1){M=P[J],L[J]=O[M],N[M]=J}}else{P=[]}this.a=P;this.length=J}E.prototype={set:function(L,J){var K=this.c[L],K=0<=K?K:this.a.length;this.a[K]=L;this.b[K]=J;this.c[L]=K;this.length=this.a.length}};var D={channel:"ch",plugins:"p",pageURL:"g",vmk:"vmt",charSet:"ce",visitorNamespace:"ns",colorDepth:"c",javascriptVersion:"k",campaign:"v0",server:"",pageName:""},C={eVar:"v",prop:"c",list:"l",hier:"h"},B=/^(eVar|prop)([\d]+)$/;function A(L,J,K){var M=!K&&new E(void 0)||null;G.call(J.a,K?function(N,O){L[N]=J.b[O]}:function(N,O){M.set(N,L[N]);L[N]=J.b[O]},void 0);return M}var I=this.s,H;I&&(H=I.hav,I.hav=function(){function P(o,n,m){var m="D="+m,l=K.length,i=m.length-n.length,Y=0;if(0>i){for(;o<l;o+=1){if(n===K.b[o]){U.set(T[K.a[o]],m);for(var Z=K,X=o,W=void 0,V=1+X,W=X;W<V;W+=1){delete Z.c[Z.a[W]]}Z.a.splice(X,1);Z.b.splice(X,1);Z.length=Z.a.length;o-=1;l-=1;Y+=i}}}return Y}var R,S={};R=new E(void 0);var Q=S,M,O,N,L={},J;for(O in this){if(this.hasOwnProperty(O)&&(M=B.exec(O))&&(N=this[O])){J=C[M[1]]+M[2],L[J]=N,Q[J]=O}}var K=new E(L),U=R,T=S;O=F(D);S=L=0;for(M=O.length;S<M;S+=1){if(Q=O[S],N=this[Q]){L+=P(0,String(N),D[Q]||Q)}}for(S=0;S<K.length-1;S+=1){L+=P(S+1,K.b[S],K.a[S])}S=A(this,R);R=H.apply(this,arguments);A(this,S,!0);return R})})();var CRITEO=function(){var F={F:[],C:function(){if(arguments.callee.ag){return }arguments.callee.ag=true;for(var A=0;A<F.F.length;A++){F.F[A]()}},Q:function(A){if(this.F.length==0){this.F[this.F.length]=A}if(document.addEventListener){document.addEventListener("DOMContentLoaded",F.C,null)}if(/KHTML|WebKit/i.test(navigator.userAgent)){var B=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(B);delete B;F.C()}},10)}if(typeof window.onload!="function"){window.onload=F.C}else{var H=window.onload;if(H){F.C.ag=false;H()}}}};function D(B){if(document.getElementsByTagName){var A=document.getElementsByTagName("head")[0];if(!A){A=document.createElement("HEAD");document.documentElement.appendChild(A)}if(A&&A.appendChild){A.appendChild(B)}}}function G(){if(typeof (window.encodeURIComponent)==="undefined"){var A={ab:function(J){J=""+J;var I,L,K="",B=0;while(B<J.length){I=J.charCodeAt(B++);if(I>=56320&&I<57344){continue}if(I>=55296&&I<56320){if(B>=J.length){continue}L=J.charCodeAt(B++);if(L<56320||I>=56832){continue}I=((I-55296)<<10)+(L-56320)+65536}if(I<128){K+=String.fromCharCode(I)}else{if(I<2048){K+=String.fromCharCode(192+(I>>6),128+(I&63))}else{if(I<65536){K+=String.fromCharCode(224+(I>>12),128+(I>>6&63),128+(I&63))}else{K+=String.fromCharCode(240+(I>>18),128+(I>>12&63),128+(I>>6&63),128+(I&63))}}}}return K},I:"0123456789ABCDEF",V:function(B){return A.I.charAt(B>>4)+A.I.charAt(B&15)},K:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-"};window.encodeURIComponent=function(I){I=A.ab(I);var H="";for(var B=0;B<I.length;B++){if(A.K.indexOf(I.charAt(B))==-1){H+="%"+A.V(I.charCodeAt(B))}else{H+=I.charAt(B)}}return H}}}function C(){if(document.getElementsByTagName){var H=1;var B=[];var J=[];var I,P,Q,A,T,X;var R=document.getElementsByTagName("div");for(var N=0;N<R.length;N++){if(R[N].id&&R[N].id.substring(0,3).toLowerCase()=="cto"&&R[N].childNodes){I=P=Q=A=X=null;T=2;for(var L=0;L<R[N].childNodes.length;L++){var W=R[N].childNodes[L];if(W&&W.tagName&&W.tagName.toLowerCase()=="div"&&W.className&&W.className.substring(0,3).toLowerCase()=="cto"){var S=(W.textContent?W.textContent:(W.innerText?W.innerText:null));switch(W.className.toLowerCase()){case"ctowidgetserver":I=S;break;case"ctodatatype":P=S;break;case"ctowidgettype":Q=S;break;case"ctoparams":A=S;break;case"ctoversion":T=S;break;case"ctodata":X=W.innerHTML;break}}}if(I&&((!P&&Q)||(P&&!Q))){var V="v="+T;if(A){V+="&"+A}V="p"+H+"="+encodeURIComponent(V);if(X){V+="&d"+H+"="+encodeURIComponent(X)}if(Q){V+="&w"+H+"="+Q}else{V+="&t"+H+"="+P}var Y;for(Y=0;Y<B.length;Y++){if(B[Y]==I){break}}if(Y!=B.length&&J[Y]&&(J[Y].length+V.length)>2000){CRITEO.AddScript(J[Y]);J[Y]=null}if(Y==B.length||!J[Y]){B[Y]=I;J[Y]=I+"display.js?"}else{J[Y]+="&"}J[Y]+=V;H++}}}for(var K=0;K<J.length;K++){if(J[K]){CRITEO.AddScript(J[K])}}}}function E(){G();C()}return{Q:function(){CRITEO_Loaded=1;F.Q(function(){E()})},AddStyle:function(H){if(document.createElement){var B=document.createElement("style");if(B){B.setAttribute("type","text/css");D(B);if(B.styleSheet){try{B.styleSheet.cssText=H}catch(I){}}else{var A=document.createTextNode(H);B.appendChild(A)}}}},AddScript:function(A){if(document.createElement){var B=document.createElement("script");if(B){B.type="text/javascript";B.src=A;D(B)}}},AddImage:function(A,H){if(document.createElement){var B=document.createElement("IMG");if(B){if(A){var I=document.getElementById(A);if(I===null){I=document.createElement("DIV");I.id=A;I.style.display="none";document.body.appendChild(I)}if(I!==null&&I.appendChild){I.appendChild(B)}}B.src=H}}},NewGuid:function(A){var H="";for(var B=0;B<A;B++){H+=Math.floor(Math.random()*15).toString(15)}return H+""}}}();var CRITEO_Loaded;CRITEO.Q();(function(B){var A=function(){B.win=B(window);B.doc=B(document);B.html=B("html");B.body=B("body")};A();B(document).ready(A)})(jQuery);if(!Array.prototype.indexOf){Array.prototype.indexOf=function(E,C){var D,F,B=-1,A=this.length;for(D=C>=0?Math.min(C,A):0,F=A;D<F;D+=1){if(this[D]===E){B=D;break}}return B}}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(D,B){var C,A=-1,E=this.length-1;for(C=B>=0?Math.min(B,E):E;C>=0;C-=1){if(this[C]===D){A=C;break}}return A}}if(!Array.prototype.map){Array.prototype.map=function(E,F){var B,D,A=[],C=F===undefined?$.proxy(E,F):E;for(B=0,D=this.length;B<D;B+=1){A.push(C(this[B]))}return A}}if(!Array.prototype.forEach){Array.prototype.forEach=function(D,E){var C,A,B=E===undefined?$.proxy(D,E):D;for(A=0,C=this.length;A<C;A++){if(A in this){B(this[A],A,this)}}}}Date.parsePOSLocaleDate=function(){var C,E,B,A=false;function D(){var G=hcom.configuration.DEFAULT_DATE_FORMAT,H=G.split(/[^a-zA-Z]+/),F;for(F=0;F<H.length;F++){switch(H[F].toLowerCase()){case"yy":case"yyyy":C=F;break;case"m":case"mm":E=F;break;case"d":case"dd":B=F;break}}A=true}return function(J){if(!A){D()}var F=J.split(/[^0-9]/);var I=F[C],H=F[E],K=F[B],G=null;if(!isNaN(I)&&!isNaN(H)&&!isNaN(K)){G=new Date((I.length===2?"20":"")+I,parseInt(H,10)-1,K,12)}return G}}();Date.toPOSLocaleDate=function(){var A,D=false,C=false,B=false;function E(){var F=hcom.configuration.DEFAULT_DATE_FORMAT.indexOf("yyyy");A=F<0?2:4;D=hcom.configuration.DEFAULT_DATE_FORMAT.indexOf("dd")>0;C=hcom.configuration.DEFAULT_DATE_FORMAT.indexOf("MM")>0;B=true}return function(J){if(!B){E()}var G=(typeof J==="number")?new Date(J):J,I=G.getUTCDate(),H=(I<10&&D?"0":"")+I,M=G.getUTCMonth()+1,L=(M<10&&C?"0":"")+M,F=G.getUTCFullYear(),K=(A===2)?F.toString().substr(2,2):F;return hcom.configuration.DEFAULT_DATE_FORMAT.replace(/M+/,L).replace(/d+/,H).replace(/y+/,K)}}();Date.getUserDate=function(){var A=new Date().getTime();return function(){return new Date(hcom.userTime+new Date().getTime()-A)}}();Date.getServerDate=function(){var A=new Date().getTime();return function(){return !!hcom.serverTime?new Date(hcom.serverTime+new Date().getTime()-A):Date.getUserDate()}}();$.extend(String.prototype,{toArray:function(){return this.split("")},toCapitalCase:function(){return this.charAt(0).toUpperCase()+this.substr(1)},startsWith:function(A){return this.indexOf(A)===0},endsWith:function(A){var B=this.length-A.length;return B>=0&&this.lastIndexOf(A)===B},asCharValueArray:function(){var B=[],A=this.length;for(var C=0;C<A;C++){B.push(this.charCodeAt(C))}return B},cleanWhiteSpace:function(){return this.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},requestParams:function(G){var E={},B=this.split(G||"&"),A=B.length,D,F;for(var C=0;C<A;C++){D=B[C].split("=");F=typeof D[1]==="string"?decodeURIComponent(D[1].replace(/\+/g," ")):null;E[decodeURIComponent(D[0])]=F}return E},toFormatted:function(){var B=window.hcom.locale.priceFormatSeparators;B=B&&B.split("");function A(G){var C=G.split("."),F=C[0],D=C[1]||"",E=/(\d+)(\d{3})/;while(E.test(F)){F=F.replace(E,"$1"+B[0]+"$2")}return F+(D?B[1]+D:"")}return function(){var C=this+"";if(B&&!isNaN(+C)){C=A(C)}return C}}()});Object.filter=function(E,D){var B={},C,A;for(A in E){if(E.hasOwnProperty(A)){C=E[A];if(D(A,C)){B[A]=C}}}return B};Object.getReferenceToNestedName=function(B){var E=B.split(".");for(var D=0,A=E.length,C=window;D<A&&(C=C[E[D++]]);){}return C||null};Object.getKeys=function(C){var B=[];for(var A in C){if(C.hasOwnProperty(A)){B.push(A)}}return B};Object.containsKey=function(B,A){return A in B};Object.getPropertiesByKey=function(A,B){var C=function(E,F){var D=[];for(name in E){if(E.hasOwnProperty(name)){if(name===F){D.push(E[name])}if(typeof E[name]==="object"){D=D.concat(C(E[name],F))}}}return D};return C(A,B)};RegExp.escape=function(B){if(!arguments.callee.re){var A=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.re=new RegExp("(\\"+A.join("|\\")+")","g")}return B.replace(arguments.callee.re,"\\$1")};(function(){var A=Object.getReferenceToNestedName("hcom.locale.rules.JAVASCRIPT_DEVELOPMENT")===true;function B(){var P=false,N=null,I,C=0,V={},U,G;window.console=window.console||{};if(A){$.ready(function(){P=true})}function M(){$.body.append('<div id="hcomConsole" style="opacity: 0.6; position: absolute; top: 0px; left: 0px; border: 2px solid #a00; background: #fff; font-size: 9px; z-index: 255; width: 530px; height: 60px;"></div>');I=$("#hcomConsole");I.html('<h1 style="display: block; margin: 0; padding: 0; background: #a00; color: #fff;">hotels.com javascript console</h1><div style="width: 100%; height: 100%; overflow: scroll;"></div>');N=I.find("div:first")}function T(Y,Z){if(A&&P){if(N===null){M()}N.append("<pre>"+Y.join("")+"</pre>");C+=65536;N.scrollTop(C)}}function K(Z){try{return Z+""}catch(Y){return null}}function S(Z){function Y(a){switch(a){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&#39;";case'"':return"&quot;"}return"?"}return String(Z).replace(/[<>&"']/g,Y)}function W(Y,Z){Z.push(S(K(Y)))}function Q(Y,Z){Z.push('<span class="objectBox-string">&quot;',S(K(Y)),"&quot;</span>")}function L(Y,Z){Z.push('<span class="objectBox-number">',S(K(Y)),"</span>")}function H(Y,Z){Z.push('<span class="objectBox-number">',S(K(Y)),"</span>")}function X(Y,Z){Z.push('<span class="objectBox-null">',S(K(Y)),"</span>")}function R(a,b){var c=/function ?(.*?)\(/;var Y=c.exec(K(a));var Z=Y?Y[1]:"function";b.push('<span class="objectBox-function">',S(Z),"()</span>")}function D(Y,Z){Z.push('<span class="objectBox-selector">');Z.push('<span class="selectorTag">',S(Y.nodeName.toLowerCase()),"</span>");if(Y.id){Z.push('<span class="selectorId">#',S(Y.id),"</span>")}if(Y.className){Z.push('<span class="selectorClass">.',S(Y.className),"</span>")}Z.push("</span>")}function J(a,b){var c=K(a);var Z=/\[object (.*?)\]/;var Y=Z.exec(c);b.push('<span class="objectBox-object">',Y?Y[1]:c,"</span>")}function O(Z,a){try{if(Z===undefined){X("undefined",a)}else{if(Z===null){X("null",a)}else{if(typeof Z==="string"){Q(Z,a)}else{if(typeof Z==="number"){L(Z,a)}else{if(typeof Z==="function"){R(Z,a)}else{if(Z.nodeType===1){D(Z,a)}else{if(typeof Z==="object"){J(Z,a)}else{W(Z,a)}}}}}}}}catch(Y){}}function E(f){var e=[];var d=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/;var Z={s:W,d:L,i:L,f:H};for(var Y=d.exec(f);Y;Y=d.exec(f)){var c=Y[8]?Y[8]:Y[5];var b=c in Z?Z[c]:O;var a=Y[3]?parseInt(Y[3],10):(Y[4]==="."?-1:0);e.push(f.substr(0,Y[0][0]==="%"?Y.index:Y.index+1));e.push({appender:b,precision:a});f=f.substr(Y.index+Y[0].length)}e.push(f);return e}function F(g,e){var d=[],c,a;var f=g[0];var Z=0;if(typeof (f)!=="string"){f="";Z=-1}var b=E(f);for(c=0;c<b.length;++c){var Y=b[c];if(Y&&typeof (Y)==="object"){a=g[++Z];Y.appender(a,d)}else{W(Y,d)}}for(c=Z+1;c<g.length;++c){W(" ",d);a=g[c];if(typeof (a)==="string"){W(a,d)}else{O(a,d)}}T(d,e)}U={firebug:"1.05 emulated",assert:function(Y,b){if(!Y){var Z=[];for(var a=1;a<arguments.length;++a){Z.push(arguments[a])}F(Z.length?Z:["Assertion Failure"],"error");throw b?b:"Assertion Failure"}},count:function(){},debug:function(){F(arguments,"debug")},dir:function(){},dirxml:function(){},error:function(){F(arguments,"error")},group:function(){},groupEnd:function(){},info:function(){F(arguments,"info")},log:function(){F(arguments,"")},profile:function(){},profileEnd:function(){},time:function(Y){V[Y]=new Date().getTime()},timeEnd:function(Y){if(Y in V){var Z=new Date().getTime()-V[Y];F([Y+":",Z+"ms"]);delete V[Y]}},trace:function(){},warn:function(){F(arguments,"warn")}};for(G in U){if(U.hasOwnProperty(G)&&!console[G]){console[G]=U[G]}}}if(!window.console||!window.console.firebug){B()}})();(function(D){function B(F){var E;for(E in F){if(F.hasOwnProperty(E)){console.assert(D.support[E]===undefined);D.support[E]=F[E]}}}function A(){var E;return function(){var K,G,F,J,I,H;if(E===undefined){if(D.body.height()<(F=D.win.height())){I=D.body.attr("style");D.body.css("height",F+100)}if(!D.win.scrollTop()){J=0;D.win.scrollTop(1)}K=(G=D('<div style="position:fixed;top:100px;"/>')).appendTo(D.body[0]).get(0);H=K.ownerDocument.documentElement;E="getBoundingClientRect" in H&&K.getBoundingClientRect().top-(H.clientTop||0)===100;G.remove();if(J>=0){D.win.scrollTop(J)}if(I){D.body.attr("style",I)}else{D.body.removeAttr("style")}}return E}}function C(){return"autofocus" in document.createElement("input")}B({positionFixed:A(),supportsAutoFocus:C()})})(jQuery);(function(C){function B(D,E){return{get:function(F){var H,G;if(C.isWindow((H=F))){G="pageXOffset" in H?H[E?"pageYOffset":"pageXOffset"]:jQuery.support.boxModel&&H.document.documentElement[D]||H.document.body[D]}else{G=F[D]}return G}}}function A(D,E){return function(H){var G,F;if(C.isWindow((G=H.elem))){F=C.css(G,E?"scrollLeft":"scrollTop");G.scrollTo(!E?H.now:F,E?H.now:F)}else{C.fx.step._default(H)}}}(function(){var D=["scrollLeft","scrollTop"],F,E;for(E=0;(F=D[E]);E+=1){C.cssHooks[F]=B(F,E);C.fx.step[F]=A(F,E)}})()})(jQuery);(function(E){var C=false,H=document,D="hcomBodyEnd",G="#"+D;function B(){var I=H.documentElement.children[1],J=H.createElement("div");J.id=D;I.insertBefore(J,I.children[I.children.length-1])}function A(I){if(!C){B()}E(G).append(I)}function F(I){E("body:first").append(I)}E.appendBody=E.browser.msie?A:F})(jQuery);(function(A){A.extend({bookmark:function(D){var B=location.href,C=document.title;if(window.sidebar){window.sidebar.addPanel(C,B,"")}else{if(window.external){window.external.AddFavorite(B,C)}else{if(window.opera&&window.print&&D){A(D).attr("href",B).attr("title",C).attr("rel","sidebar")}}}}})})(jQuery);(function(A){A.extend({iterate:function(D,F,C){if(D&&A.isFunction(F)){var B=0;if(D.constructor===Array){for(B=0;B<D.length;B++){if(F.apply(C?C:this,[D[B],{index:B,first:B===0,last:B===D.length-1}])===false){break}}}else{if(typeof D==="object"){for(var E in D){if(D.hasOwnProperty(E)){if(F.apply(C?C:this,[D[E],{index:B,first:B===0,last:B++===D.length-1}])===false){break}}}}}}}});A.fn.extend({visible:function(C,B){if(C===undefined){return this.is(":visible")}else{if(C){return this.each(function(){if(B){A(this).css("visibility","visible")}else{A(this).show()}})}else{return this.each(function(){if(B){A(this).css("visibility","hidden")}else{A(this).hide()}})}}},exists:function(){return A(this).length>0},contains:function(B){return A(this).find(B).exists()},getDOMNode:function(){return A(this)[0]}})})(jQuery);(function(B){var D;console.assert((B.format&&B.formatter)===undefined);function C(F,G){var E;if(arguments.length>1){if(G.constructor!==Array){G=Array.prototype.slice.call(arguments,1)}else{console.assert(arguments.length===2)}E=G.length;return F.replace(/\{([0-9]+)\}/g,function(J,K,I){var H=parseInt(K,10);return I>0&&F.charAt(I-1)==="\\"?J:(H<E?G[H]:"")})}return F}B.format=C;var A=function(F,E){this.bundle=F||{};this.parent=E!==undefined?E:D};A.prototype={getMessage:function(E){return this.bundle[E]||this.parent&&this.parent.getMessage(E)||E},msg:function(F,G){var E=Array.prototype.slice.call(arguments,1);E.unshift(this.getMessage(F));return C.apply(null,E)},extendXML:function(H){var I=H.find("message"),E=I.length,G,F;for(G=0;G<E;G+=1){F=B(I[G]);this.bundle[F.attr("key")]=B.trim(F.text())}return this},setGlobal:function(){B.extend(D.bundle,this.bundle);return this},extend:function(E){B.extend(this.bundle,E);return this}};A.prototype.format=A.prototype.msg;A.prototype.loadMessages=A.prototype.extendXML;A.prototype.extendGlobal=A.prototype.extend;D=new A({},null);A.createInstance=function(F,E){return new A(F,E)};B.fmt=B.formatter=A;B.fmt.extendGlobal=B.fmt.extend=B.proxy(A.prototype.extend,D);B.fmt.msg=B.proxy(A.prototype.msg,D)})(jQuery);(function(){var B=jQuery;function A(D,C){switch(typeof D){case"string":return A.string(D);case"object":return A.map(D,C);default:throw new TypeError("Parameter is not a valid ID.")}}A.string=function(C){return B(document.getElementById(C))};A.map=function(F,G){var E,D=[],C={};for(E in F){if(F.hasOwnProperty(E)){if(G){D.push(document.getElementById(F[E]))}else{C[E]=A(F[E])}}}if(D.length){C=B(D)}return C};B.id=A})();(function(D){var F=jQuery.fn.val,B="jQuery.emptyValue",E="focus.emptyValue",G="blur.emptyValue",C="submit.emptyValue";function A(I,K,J){if(I.rawVal()===K){I.rawVal(J);if(!!J){I.addClass("placeholder")}}}function H(){var L=D.data(this,B),I,K,J;for(I=0;(K=L[I]);I++){J=D.data(K,B);if(J){A(D(K),J,"")}}return true}D.fn.extend({isDirty:function(){if(this.length<1){return false}else{if(this.length>1){for(var K=0;K<this.length;K++){if(this.eq(K).isDirty()){return true}}return false}}var L=this[0].type,J=this[0].tagName?this[0].tagName.toLowerCase():null,I=this[0];if(L==="text"||L==="password"||J==="textarea"){return this.val()!==I.submittedValue}else{if(L==="checkbox"||L==="radio"){return I.checked!==I.submittedValue}else{if(J==="select"){return I.submittedValue!==I.selectedIndex}}}return this.find(":input").isDirty()},setSubmitted:function(){return this.each(function(){var J=this.type,I=this.tagName?this.tagName.toLowerCase():null;if(J==="text"||J==="password"||I==="textarea"){this.submittedValue=D(this).val()}else{if(J==="checkbox"||J==="radio"){this.submittedValue=this.checked}else{if(I==="select"){this.submittedValue=this.selectedIndex}else{D(this).children().setSubmitted()}}}})},rawVal:F,val:function(L){var K,I=this.length?D.data(this[0],B):undefined,J;if(L===undefined){if(this.length){J=(K=this.rawVal());if(I&&K===I){J=""}}}else{J=this.rawVal(((L===""||L===null)&&I)?I:L)}return J},removeEmptyValue:function(){return this.setEmptyValue()},setEmptyValueByPlaceholder:function(){return this.each(function(J,K){var I=D(K),L=D(K).attr("placeholder");if(L){I.setEmptyValue(L)}})},setEmptyValue:function(I){return this.each(function(O,P){var N=D.data(P,B),L,M,J=false,K=D(P);if(!K.is("form")){L=K.parents("form:first");M=L.data(B);if(N!==I){if(N!==undefined&&!I){K.off(E).off(G).removeData(B);A(K,N,"");if(K.rawVal()===N){K.rawVal("")}K.removeClass("placeholder");if(L.length){if(M){L.data(B,(M=D.grep(M,function(R,Q){return R!==P})))}if(!M||!M.length){L.off(C).removeData(B)}}}else{if(!!I){if(N===undefined){K.on(E,function(){if(K.rawVal()===I){K.rawVal("")}K.removeClass("placeholder")}).on(G,function(){A(K,"",I)});A(K,"",I);if(L.length){if(!M){M=[P];J=true}else{J=M.length===0;if(J||D.inArray(P,M)<0){M.push(P)}}if(J){L.on(C,H).data(B,M)}}}else{if(K.rawVal()===N){K.rawVal("")}K.off(E).off(G).removeData(B).on(E,function(){if(K.rawVal()===I){K.rawVal("")}K.removeClass("placeholder")}).on(G,function(){A(K,"",I)});A(K,"",I)}D.data(P,B,I)}}}}})}})})(jQuery);(function(A){A.fn.linkify=function(B){this.addClass("link");this.on("mouseenter",function(){A(this).addClass("hover")});this.on("mouseleave",function(){A(this).removeClass("hover")})}})(jQuery);(function(B){var A={},C={};B.extend({isPreloadEnabled:function(D){var F=(D?D:0),E=true;if(F>0&&B.browser.msie&&B.browser.version<7){E=false}return E},preloadImages:function(H,J,G){if(!B.isPreloadEnabled(G)){if(J){J()}return }var E=H,D=false;if(H.constructor===String){E=[H]}var I=E.length;function F(K){A[K].domref.off();if(--I===0&&J){J(D)}delete A[K].domref;A[K].loadFailed=D}B.map(E,function(K){if(A[K]===undefined){A[K]={domref:B("<img>")};A[K].domref.on("load",function(){F(K)}).on("error",function(){D=true;F(K)}).on("abort",function(){F(K)}).attr("src",K)}else{D=A[K].loadFailed;if(--I===0&&J){J(D)}}})},preloadAsyncImage:function(F,H,E){var G=false,D=function(I,J){C[F].$domref.off();if(H){H(I,J);G=true}};if(!B.isPreloadEnabled(E)){D();return }if(C[F]===undefined){C[F]={$domref:B("<img>")};C[F].$domref.on("load",function(){D(false,C[F].$domref)}).on("error",function(){D(true)}).on("abort",function(){D(true)}).attr("src",F)}else{D(false,C[F].$domref)}}})})(jQuery);(function(F){var D={},E={impl:function(){return{}},dependencies:[],preInitDependencies:[],externalDependencies:[],images:[],extendsModule:null},I=Object.prototype.constructor;function J(L,Q,P){var R=L.split(".");for(var O=0,K=R.length-1,N=window,M;O<K;O++){M=N[R[O]];if(M===undefined){M={};N[R[O]]=M}N=M}if(!P&&N[R[O]]!==undefined){console.error("registerModule: possible namespace collision object %s overwritten!",L)}N[R[O]]=Q;return Q}function G(K){return Object.getReferenceToNestedName(K)!==null}function H(K){var M=[],L=K.extendsModule;M.concat(K.preInitDependencies);if(L&&F.inArray(L,M)<0){M.push(L)}return M}function C(L){var M,K=null;if((M=D[L])){console.info("loadModule: loading module %s",L);K=J(L,M.impl(L));if(!K){console.error("loadModule: module construction failure %s implCallback did not return the module object!",L)}K.getName=function(){return L};F.map(H(M),function(N){F.loadModule(N)});if(M.extendsModule){J(L,(K=F.extendCls(Object.getReferenceToNestedName(M.extendsModule),K.prototype,K)),true)}if(F.isFunction(K.preInit)){K.preInit();delete K.preInit}F.map(M.dependencies,function(N){F.loadModule(N)});F.map(M.images,function(N){F.preloadImages(N,null,1)});if(F.isFunction(K.init)){K.init();delete K.init}}else{console.warn("module not registered: %s",L)}return K}function B(K){var L=[];if(D[K]){L=D[K].externalDependencies;F.map(D[K].dependencies,function(M){L=L.concat(B(M))})}else{console.warn("module not registered: %s",K)}return L}function A(K){D[K].externalDependencies=[];F.map(D[K].dependencies,function(L){A(L)})}F.extend({registerModule:function(K){if(!K.name){throw ("registerModule: setting a module name is mandatory!")}if(D.hasOwnProperty(K.name)){throw ("registerModule: namespace collision: module "+K.name+" already registered!")}D[K.name]=F.extend({},E,K)},namespace:function(M,L,K){if(D.hasOwnProperty(M)){throw ("namespace collision with module "+M)}return J(M,L||{},K)},extendNS:function(L,K){var M;if((M=Object.getReferenceToNestedName(L))){F.extend(true,M,K)}else{F.namespace(L,K)}},loadModule:function(K){var M=null,N,L=0;if(!(M=Object.getReferenceToNestedName(K))){if(!D[K]){throw ("loadModule: unregistered module name: "+K)}N=B(K);F.unique(N);if(N.length>0){F.map(N,function(O){F.requireJs(O,function(){if(++L===N.length){A(K);M=C(K)}})})}else{M=C(K)}}return M},extendCls:function(R,P,O){var M=O||P.constructor,N=M!==I?M:function(){R.apply(this,arguments)},K=function(){},Q,L=R.prototype;K.prototype=L;Q=N.prototype=new K();Q.constructor=N;N.superclass=L;if(L.constructor===I){L.constructor=R}F.map(Object.getKeys(P),function(S){Q[S]=P[S]});if(O){F.map(Object.getKeys(R),function(S){if(!S.endsWith("_")&&!N.hasOwnProperty(S)){N[S]=R[S]}})}return N},isModuleLoaded:G})})(jQuery);(function(F){F.extend(F.ui,{datepicker:{version:"1.7.2"}});var G="datepicker";var E={};if(window.hcom.locale.direction==="RTL"){E={prefix:'<table><tbody><tr><td class="trs"></td><td class="ths"><div class="tail"></div></td><td class="tls"></td></tr><tr><td class="rvs"></td><td class="cnt"><div class="main">',postfix:'</div></td><td class="lvs"></td></tr><tr><td class="brs"></td><td class="bhs"><div class="tail"></div></td><td class="bls"></td></tr></tbody></table>'}}else{E={prefix:'<table><tbody><tr><td class="tls"></td><td class="ths"><div class="tail"></div></td><td class="trs"></td></tr><tr><td class="lvs"></td><td class="cnt"><div class="main">',postfix:'</div></td><td class="rvs"></td></tr><tr><td class="bls"></td><td class="bhs"><div class="tail"></div></td><td class="brs"></td></tr></tbody></table>'}}E.contentDivSelect="div.main:first";function A(){var H=['<div class="C_datepicker">'];if(E){if(E.prefix&&E.postfix){H.push(E.prefix,E.postfix)}}H.push("</div>");return H.join("")}function D(){this.debug=false;this.curInst=null;this.keyEvent=false;this.disabledInputs=[];this.datepickerShowing=false;this.inlineClass="inline";this.appendClass="append";this.triggerClass="hcomDPtrigger";this.unselectableClass="unselectable";this.currentClass="current-day";this.rangeClass="range-day";this.rangeLastClass="range-last-day";this.dayOverClass="days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:hcom.locale.dateFormatSymbols.months,monthNamesShort:hcom.locale.dateFormatSymbols.shortMonths,dayNames:hcom.locale.dateFormatSymbols.weekDays,dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:hcom.locale.dateFormatSymbols.shortWeekdays,dateFormat:"mm/dd/yy",firstDay:0,isRTL:(window.hcom.locale.direction==="RTL"),showMonthAfterYear:hcom.locale.showMonthAfterYear,showNumericMonth:hcom.locale.showNumericMonth,monthUnit:hcom.locale.monthUnit,yearUnit:hcom.locale.yearUnit};this.defaults={showOn:"focus",showAnim:"show",hoverStateCell:false,showOptions:{},defaultDate:null,highlightedDate:null,disableDefaultDaySelect:false,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"-10:+10",showOtherMonths:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"normal",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,msgKeyTooLongStay:hcom.locale.common.tooLongStay,msgKeyNoOfNightsSingle:hcom.locale.common.numberOfNightsSingle,msgKeyNoOfNightsPlural:hcom.locale.common.numberOfNightsPlural,ie6plate:{show:F.noop,hide:F.noop}};F.extend(this.defaults,this.regional[""]);this.dpDiv=F(A())}function C(J,I){F.extend(J,I);for(var H in I){if(I[H]===null||I[H]===undefined){J[H]=I[H]}}return J}function B(I,H){var J=F(".ths .tail",H),K=F(".bhs .tail",H);if(I){J.show();K.hide()}else{K.show();J.hide()}}F.extend(D.prototype,{markerClassName:"hasDatepicker",log:function(){if(this.debug){console.log.apply("",arguments)}},attachDatepicker:function(L,I){var H=null;var M=L.nodeName.toLowerCase();var K=(M==="div"||M==="span");if(!L.id){L.id="dp"+(++this.uuid)}var J=this.newInst(F(L),K);J.settings=F.extend({},I||{},H||{});if(M==="input"){this.connectDatepicker(L,J)}else{if(K){this.inlineDatepicker(L,J)}}if(J.input&&J.input.val()){this.setDateFromField(J)}},newInst:function(I,H){var J=I[0].id.replace(/([:\[\]\.])/g,"\\\\$1");return{id:J,input:I,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:H,dpDiv:(!H?this.dpDiv:F('<div class="'+this.inlineClass+' C_datepicker"></div>'))}},connectDatepicker:function(O,M){var J=F(O);M.append=F([]);M.trigger=F([]);if(J.hasClass(this.markerClassName)){return }var N=this.get(M,"appendText");var K=this.get(M,"isRTL");if(N){M.append=F('<span class="'+this.appendClass+'">'+N+"</span>");J[K?"before":"after"](M.append)}var I=this.get(M,"showOn");if(I==="focus"||I==="both"){J.on("focus",this.showDatepicker)}if(I==="button"||I==="both"){var L=this.get(M,"buttonText");var H=this.get(M,"buttonImage");M.trigger=F(this.get(M,"buttonImageOnly")?F("<img/>").addClass(this.triggerClass).attr({src:H,alt:L,title:L}):F('<button type="button"></button>').addClass(this.triggerClass).html(H===""?L:F("<img/>").attr({src:H,alt:L,title:L})));J[K?"before":"after"](M.trigger);M.trigger.on("click",function(){if(F.datepicker.datepickerShowing&&F.datepicker.lastInput===O){F.datepicker.hideDatepicker()}else{F.datepicker.showDatepicker(O)}return false})}J.addClass(this.markerClassName).on("keydown",this.doKeyDown).on("keypress",this.doKeyPress).on("setData.datepicker",function(Q,P,R){M.settings[P]=R}).on("getData.datepicker",function(Q,P){return this.get(M,P)});F.data(O,G,M)},inlineDatepicker:function(I,H){var J=F(I);if(J.hasClass(this.markerClassName)){return }J.addClass(this.markerClassName).append(H.dpDiv).on("setData.datepicker",function(L,K,M){H.settings[K]=M}).on("getData.datepicker",function(L,K){return this.get(H,K)});F.data(I,G,H);this.setDate(H,this.getDefaultDate(H));this.updateDatepicker(H);this.updateAlternate(H)},destroyDatepicker:function(J){var H=F(J);var I=F.data(J,G);if(!H.hasClass(this.markerClassName)){return }var K=J.nodeName.toLowerCase();F.removeData(J,G);if(K==="input"){I.append.remove();I.trigger.remove();H.removeClass(this.markerClassName).off("focus",this.showDatepicker).off("keydown",this.doKeyDown).off("keypress",this.doKeyPress)}else{if(K==="div"||K==="span"){H.removeClass(this.markerClassName).empty()}}},enableDatepicker:function(K){var H=F(K);var I=F.data(K,G);if(!H.hasClass(this.markerClassName)){return }var L=K.nodeName.toLowerCase();if(L==="input"){K.disabled=false;I.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(L==="div"||L==="span"){var J=H.children("."+this.inlineClass);J.children().removeClass("disabled")}}this.disabledInputs=F.map(this.disabledInputs,function(M){return(M===K?null:M)})},disableDatepicker:function(K){var H=F(K);var I=F.data(K,G);if(!H.hasClass(this.markerClassName)){return }var L=K.nodeName.toLowerCase();if(L==="input"){K.disabled=true;I.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(L==="div"||L==="span"){var J=H.children("."+this.inlineClass);J.children().addClass("disabled")}}this.disabledInputs=F.map(this.disabledInputs,function(M){return(M===K?null:M)});this.disabledInputs[this.disabledInputs.length]=K},isDisabledDatepicker:function(I){if(!I){return false}for(var H=0;H<this.disabledInputs.length;H++){if(this.disabledInputs[H]===I){return true}}return false},getInst:function(I){try{return F.data(I,G)}catch(H){throw"Missing instance data for this datepicker"}},optionDatepicker:function(M,I,L){var K=this.getInst(M);if(arguments.length===2&&typeof I==="string"){return(I==="defaults"?F.extend({},F.datepicker.defaults):(K?(I==="all"?F.extend({},K.settings):this.get(K,I)):null))}var J=I||{};if(typeof I==="string"){J={};J[I]=L}if(K){if(this.curInst===K){this.hideDatepicker(null)}var H=this.getDateDatepicker(M);C(K.settings,J);this.setDateDatepicker(M,H);this.updateDatepicker(K)}},changeDatepicker:function(J,H,I){this.optionDatepicker(J,H,I)},refreshDatepicker:function(I){var H=this.getInst(I);if(H){this.updateDatepicker(H)}},setDateDatepicker:function(K,H,J){var I=this.getInst(K);if(I){this.setDate(I,H,J);this.updateDatepicker(I);this.updateAlternate(I)}},getDateDatepicker:function(I){var H=this.getInst(I);if(H&&!H.inline){this.setDateFromField(H)}return(H?this.getDate(H):null)},doKeyDown:function(I){var J=F.datepicker.getInst(I.target),K=true,H=J.dpDiv.is(".rtl");J.keyEvent=true;if(F.datepicker.datepickerShowing){switch(I.keyCode){case 9:F.datepicker.hideDatepicker(null,"");break;case 13:F.datepicker.hideDatepicker(null,F.datepicker.get(J,"duration"));if(!F(I.target).hasClass("hasDatepicker")){F.datepicker.selectDate("#"+J.id,F.datepicker.formatDate(J,J.selectedDay,J.selectedMonth,J.selectedYear))}K=true;break;case 27:F.datepicker.hideDatepicker(null,F.datepicker.get(J,"duration"));break;case 33:F.datepicker.adjustDate(I.target,(I.ctrlKey?-F.datepicker.get(J,"stepBigMonths"):-F.datepicker.get(J,"stepMonths")),"M");break;case 34:F.datepicker.adjustDate(I.target,(I.ctrlKey?+F.datepicker.get(J,"stepBigMonths"):+F.datepicker.get(J,"stepMonths")),"M");break;case 35:if(I.ctrlKey||I.metaKey){F.datepicker.clearDate(I.target)}K=I.ctrlKey||I.metaKey;break;case 36:if(I.ctrlKey||I.metaKey){F.datepicker.gotoToday(I.target)}K=I.ctrlKey||I.metaKey;break;case 37:if(I.ctrlKey||I.metaKey){F.datepicker.adjustDate(I.target,(H?+1:-1),"D")}K=I.ctrlKey||I.metaKey;if(I.originalEvent.altKey){F.datepicker.adjustDate(I.target,(I.ctrlKey?-F.datepicker.get(J,"stepBigMonths"):-F.datepicker.get(J,"stepMonths")),"M")}break;case 38:if(I.ctrlKey||I.metaKey){F.datepicker.adjustDate(I.target,-7,"D")}K=I.ctrlKey||I.metaKey;break;case 39:if(I.ctrlKey||I.metaKey){F.datepicker.adjustDate(I.target,(H?-1:+1),"D")}K=I.ctrlKey||I.metaKey;if(I.originalEvent.altKey){F.datepicker.adjustDate(I.target,(I.ctrlKey?+F.datepicker.get(J,"stepBigMonths"):+F.datepicker.get(J,"stepMonths")),"M")}break;case 40:if(I.ctrlKey||I.metaKey){F.datepicker.adjustDate(I.target,+7,"D")}K=I.ctrlKey||I.metaKey;break;default:K=false}}else{if(I.keyCode===36&&I.ctrlKey){F.datepicker.showDatepicker(this)}else{K=false}}if(K){I.preventDefault();I.stopPropagation()}},doKeyPress:function(J){var K=F.datepicker.getInst(J.target);if(F.datepicker.get(K,"constrainInput")){var I=F.datepicker.possibleChars(F.datepicker.get(K,"dateFormat"));var H=String.fromCharCode(J.charCode===undefined?J.keyCode:J.charCode);return J.ctrlKey||(H<" "||!I||I.indexOf(H)>-1)}},showDatepicker:function(P){P=P.target||P;if(P.nodeName.toLowerCase()!=="input"){P=F("input",P.parentNode)[0]}if(F.datepicker.isDisabledDatepicker(P)||F.datepicker.lastInput===P){return }var O=F.datepicker.getInst(P);var L=F.datepicker.get(O,"beforeShow");C(O.settings,(L?L.apply(P,[P,O]):{}));F.datepicker.hideDatepicker(null,"");F.datepicker.lastInput=P;F.datepicker.setDateFromField(O);if(!F.datepicker.pos){F.datepicker.pos=F.datepicker.findPos(P);F.datepicker.pos[1]+=P.offsetHeight}var K=false;F(P).parents().each(function(){K|=F(this).css("position")==="fixed";return !K});if(K&&F.browser.opera){F.datepicker.pos[0]-=document.documentElement.scrollLeft;F.datepicker.pos[1]-=document.documentElement.scrollTop}if(F.browser.msie&&F.browser.version<7){K=false}var N={left:F.datepicker.pos[0],top:F.datepicker.pos[1]};F.datepicker.pos=null;O.rangeStart=null;O.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});F.datepicker.updateDatepicker(O);N=F.datepicker.checkOffset(O,N,K);var H=O.dpDiv.offsetParent().offset();O.dpDiv.css({position:K?"fixed":"absolute",display:"none",top:N.top-H.top+"px",left:N.left-H.left+"px"});if(!O.inline){var I=F.datepicker.get(O,"showAnim")||"show";var M=F.datepicker.get(O,"duration");var J=function(){F.datepicker.datepickerShowing=true;F.datepicker.get(O,"ie6plate").show(O.dpDiv)};if(F.effects&&F.effects[I]){O.dpDiv.show(I,F.datepicker.get(O,"showOptions"),M,J)}else{O.dpDiv[I](M,J)}if(M===""){J()}if(O.input[0].type!=="hidden"&&O.input.is(":visible")){O.input.trigger("focus")}F.datepicker.curInst=O}},updateDatepicker:function(M){var J=this,I=E&&E.contentDivSelect,L=I?M.dpDiv.find(I):M.dpDiv;L.empty().append(this.generateHTML(M));L[M.settings.isArrival===true?"addClass":"removeClass"]("arrival");L[M.settings.isDeparture===true?"addClass":"removeClass"]("departure");M.dpDiv.find(M.settings.hoverStateCell?"button, .prev, .next, .calendar td":"button, .prev, .next, .calendar td a").on("mouseout",function(){F(this).removeClass("state-hover");if(this.className.indexOf("prev")!==-1){F(this).removeClass("prev-hover")}if(this.className.indexOf("next")!==-1){F(this).removeClass("next-hover")}}).on("mouseover",function(){if(!J.isDisabledDatepicker(M.inline?M.dpDiv.parent()[0]:M.input[0])){F(this).parents(".calendar").find("a").removeClass("state-hover");F(this).addClass("state-hover");if(this.className.indexOf("prev")!==-1){F(this).addClass("prev-hover")}if(this.className.indexOf("next")!==-1){F(this).addClass("next-hover")}}}).end().find("."+this.dayOverClass+" a").trigger("mouseover").end();if(M.settings.isDeparture){M.dpDiv.find("a").on("mouseleave",function(O){M.dpDiv.find("div.msg").text(J.getNumberOfNightsLabel(M))})}var H=this.getNumberOfMonths(M),N=H[1],K=17;if(N>1){M.dpDiv.addClass("multi-"+N).css("width",(K*N)+"em")}else{M.dpDiv.removeClass("multi-2 multi-3 multi-4").width("")}M.dpDiv[(H[0]!==1||H[1]!==1?"add":"remove")+"Class"]("multi");M.dpDiv[(this.get(M,"isRTL")?"add":"remove")+"Class"]("rtl");if(M.input&&M.input[0].type!=="hidden"&&M===F.datepicker.curInst){M.input.trigger("focus")}},onHoverDay:function(H,K,M,I){var P,N=F("a",I).text(),J=this.getInst(F(H)[0]);if(J.settings.isDeparture){var O=this.daylightSavingAdjust(Date.parsePOSLocaleDate(J.settings.$arrInp.val())),L=this.daylightSavingAdjust(new Date(M,K,N));if(O&&L){J.dpDiv.find("div.msg").text(this.getNumberOfNightsLabel(J,O,L))}}},checkOffset:function(M,K,J){var L=M.dpDiv.outerWidth();var P=M.dpDiv.outerHeight();var O=M.input?M.input.outerWidth():0;var H=M.input?M.input.outerHeight():0;var N=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+F.doc.scrollLeft();var I=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+F.doc.scrollTop();K.left-=(this.get(M,"isRTL")?(L-O):0);K.left-=(J&&K.left===M.input.offset().left)?F.doc.scrollLeft():0;K.top-=(J&&K.top===(M.input.offset().top+H))?F.doc.scrollTop():0;K.left-=(K.left+L>N&&N>L)?Math.abs(K.left+L-N):0;if(K.top+P>I&&I>P){K.top-=P+H;B(false,M.dpDiv)}else{B(true,M.dpDiv)}return K},findPos:function(I){var K,J,H;J=I;while(I&&(I.type==="hidden"||I.nodeType!==1)){I=I.nextSibling}K=F(I);if(!I||K.not(":visible").length){K=F(J).parent().find("span.icon_sprite_calendar");H=K.offset();H.top+=K.height()}else{H=K.offset()}return[H.left,H.top]},hideDatepicker:function(J,M){var L=this.curInst;if(!L||(J&&L!==F.data(J,G))){return }if(L.stayOpen){this.selectDate("#"+L.id,this.formatDate(L,L.currentDay,L.currentMonth,L.currentYear))}L.stayOpen=false;if(this.datepickerShowing){M=(M!==null?M:this.get(L,"duration"));var I=this.get(L,"showAnim");var K=function(){F.datepicker.tidyDialog(L)};if(M!==""&&F.effects&&F.effects[I]){L.dpDiv.hide(I,F.datepicker.get(L,"showOptions"),M,K)}else{L.dpDiv[(M===""?"hide":(I==="slideDown"?"slideUp":(I==="fadeIn"?"fadeOut":"hide")))](M,K)}if(M===""){this.tidyDialog(L)}var H=this.get(L,"onClose");if(H){H.apply((L.input?L.input[0]:null),[(L.input?L.input.val():""),L])}this.datepickerShowing=false;this.lastInput=null;F.datepicker.get(L,"ie6plate").hide()}this.curInst=null},tidyDialog:function(H){H.dpDiv.off(".calendar")},checkExternalClick:function(I){if(F.datepicker.curInst){var H=F(I.target);if((H.parents("div.C_datepicker").length===0)&&!H.hasClass(F.datepicker.markerClassName)&&!H.hasClass(F.datepicker.triggerClass)&&F.datepicker.datepickerShowing&&!F.blockUI){F.datepicker.hideDatepicker(null,"")}}},adjustDate:function(L,K,J){var I=F(L);var H=this.getInst(I[0]);if(this.isDisabledDatepicker(I[0])){return }H.customCalendarPos=undefined;this.adjustInstDate(H,K+(J==="M"?this.get(H,"showCurrentAtPos"):0),J);this.updateDatepicker(H)},gotoToday:function(K){var J=F(K);var I=this.getInst(J[0]);if(this.get(I,"gotoCurrent")&&I.currentDay){I.selectedDay=I.currentDay;I.drawMonth=I.selectedMonth=I.currentMonth;I.drawYear=I.selectedYear=I.currentYear}else{var H=Date.getUserDate();I.selectedDay=H.getDate();I.drawMonth=I.selectedMonth=H.getMonth();I.drawYear=I.selectedYear=H.getFullYear()}this.notifyChange(I);this.adjustDate(J)},selectMonthYear:function(L,H,K){var J=F(L);var I=this.getInst(J[0]);I.selectingMonthYear=false;I["selected"+(K==="M"?"Month":"Year")]=I["draw"+(K==="M"?"Month":"Year")]=parseInt(H.options[H.selectedIndex].value,10);this.notifyChange(I);this.adjustDate(J)},clickMonthYear:function(J){var I=F(J);var H=this.getInst(I[0]);if(H.input&&H.selectingMonthYear&&!F.browser.msie){H.input.trigger("focus")}H.selectingMonthYear=!H.selectingMonthYear},selectDay:function(H,O,Q,L){var P=F(H);if(F(L).hasClass(this.unselectableClass)||this.isDisabledDatepicker(P[0])){return }var M=this.getInst(P[0]);M.settings.disableDefaultDaySelect=false;M.selectedDay=M.currentDay=F("a",L).text();M.selectedMonth=M.currentMonth=O;M.selectedYear=M.currentYear=Q;if(M.stayOpen){M.endDay=M.endMonth=M.endYear=null}var I=this.daylightSavingAdjust(new Date(M.currentYear,M.currentMonth,M.currentDay));this.updateOtherPicker(M,I);this.selectDate(H,this.formatDate(M,M.currentDay,M.currentMonth,M.currentYear));if(M.stayOpen){M.rangeStart=I;this.updateDatepicker(M)}var K=(M.settings.isArrival?M:this.getInst(M.settings.$arrInp[0])),J=(M.settings.isDeparture?M:this.getInst(M.settings.$depInp[0])),N=(F(L).closest("div.group").is(".group-first")?O:O-1);if(M.settings.isArrival){J.customCalendarPos=N}else{K.customCalendarPos=N}},updateOtherPicker:function(L,I,K){var M=function(U,O,T){var R=O[0];if(R){var V=this.getInst(R),Q=V&&V.currentYear&&(V.currentMonth!==undefined)&&V.currentDay?this.daylightSavingAdjust(new Date(V.currentYear,V.currentMonth,V.currentDay)):I,P=Q.getTime(),N=I.getTime();if((U&&N>=P-T)||(!U&&(P>=N||V.stayOpen===undefined))){var S=new Date(N+T);this.daylightSavingAdjust(S);F.datepicker.setDate(V,S);if(!K){O.trigger(F.Event("change",{relatedTarget:L.input[0]}))}V.settings.disableDefaultDaySelect=L.settings.disableDefaultDaySelect=false}}},J=1000*60*60*24;if(L.settings.isArrival){M.call(this,1,L.settings.$depInp,J)}else{if(L.settings.isDeparture){var H=F.datepicker.getDate(F.datepicker.getInst(L.settings.$arrInp[0]));if(H>I){M.call(this,0,L.settings.$arrInp,-J)}}}},clearDate:function(J){var I=F(J);var H=this.getInst(I[0]);H.stayOpen=false;H.endDay=H.endMonth=H.endYear=H.rangeStart=null;this.selectDate(I,"")},selectDate:function(L,H){var K=F(L);var J=this.getInst(K[0]);H=(H!==null?H:this.formatDate(J));if(J.input){J.input.val(H)}this.updateAlternate(J);var I=this.get(J,"onSelect");if(I){I.apply((J.input?J.input[0]:null),[H,J])}else{if(J.input){J.input.trigger("change")}}if(J.inline){this.updateDatepicker(J)}else{if(!J.stayOpen){this.hideDatepicker(null,this.get(J,"duration"));this.lastInput=J.input[0];if(typeof J.input[0]!=="object"){J.input.trigger("focus")}this.lastInput=null}}},updateAlternate:function(L){var J=this.get(L,"altField");if(J){var K=this.get(L,"altFormat")||this.get(L,"dateFormat"),I=this.getDate(L),H;H=this.formatDateStr(K,I,this.getFormatConfig(L));F(J).each(function(){F(this).val(H)})}},noWeekends:function(I){var H=I.getDay();return[(H>0&&H<6),""]},iso8601Week:function(I){var K=new Date(I.getFullYear(),I.getMonth(),I.getDate());var J=new Date(K.getFullYear(),1-1,4);var H=J.getDay()||7;J.setDate(J.getDate()+1-H);if(H<4&&K<J){K.setDate(K.getDate()-3);return F.datepicker.iso8601Week(K)}else{if(K>new Date(K.getFullYear(),12-1,28)){H=new Date(K.getFullYear()+1,1-1,4).getDay()||7;if(H>4&&(K.getDay()||7)<H-3){return 1}}}return Math.floor(((K-J)/86400000)/7)+1},parseDate:function(V,Q,X){if(V===null||Q===null){throw"Invalid arguments"}Q=(typeof Q==="object"?Q.toString():Q+"");if(Q.length){var I=(X?X.shortYearCutoff:null)||this.defaults.shortYearCutoff,O=(X?X.dayNamesShort:null)||this.defaults.dayNamesShort,Z=(X?X.dayNames:null)||this.defaults.dayNames,H=(X?X.monthNamesShort:null)||this.defaults.monthNamesShort,K=(X?X.monthNames:null)||this.defaults.monthNames,L=-1,a=-1,U=-1,N=-1,T=false,J,W=0,Y=null;var P=function(c){var d=(J+1<V.length&&V.charAt(J+1)===c);if(d){J++}return d};var b=function(d){P(d);var f=(d==="@"?14:(d==="y"?4:(d==="o"?3:2)));var e=f;var c=0;while(e>0&&W<Q.length&&Q.charAt(W)>="0"&&Q.charAt(W)<="9"){c=c*10+parseInt(Q.charAt(W++),10);e--}if(e===f){throw"Missing number at position "+W}return c};var M=function(h,e,k){var l=(P(h)?k:e);var m=0;for(var f=0;f<l.length;f++){m=Math.max(m,l[f].length)}var c="";var d=W;while(m>0&&W<Q.length){c+=Q.charAt(W++);for(var g=0;g<l.length;g++){if(c===l[g]){return g+1}}m--}throw"Unknown name at position "+d};var S=function(){if(Q.charAt(W)!==V.charAt(J)){throw"Unexpected literal at position "+W}W++};for(J=0;J<V.length;J++){if(T){if(V.charAt(J)==="'"&&!P("'")){T=false}else{S()}}else{switch(V.charAt(J)){case"d":U=b("d");break;case"D":M("D",O,Z);break;case"o":N=b("o");break;case"m":a=b("m");break;case"M":a=M("M",H,K);break;case"y":L=b("y");break;case"@":Y=new Date(b("@"));L=Y.getFullYear();a=Y.getMonth()+1;U=Y.getDate();break;case"'":if(P("'")){S()}else{T=true}break;default:S()}}}if(L===-1){L=Date.getUserDate().getFullYear()}else{if(L<100){L+=Date.getUserDate().getFullYear()-Date.getUserDate().getFullYear()%100+(L<=I?0:-100)}}if(N>-1){a=1;U=N;do{var R=this.getDaysInMonth(L,a-1);if(U<=R){break}a++;U-=R}while(true)}Y=this.daylightSavingAdjust(new Date(L,a-1,U));if(Y.getFullYear()!==L||Y.getMonth()+1!==a||Y.getDate()!==U){throw"Invalid date"}}return Y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TIMESTAMP:"@",W3C:"yy-mm-dd",formatDateStr:function(R,L,M){if(!L){return""}var V=(M?M.dayNamesShort:null)||this.defaults.dayNamesShort,I=(M?M.dayNames:null)||this.defaults.dayNames,P=(M?M.monthNamesShort:null)||this.defaults.monthNamesShort,N=(M?M.monthNames:null)||this.defaults.monthNames,U;var T=function(W){var X=(U+1<R.length&&R.charAt(U+1)===W);if(X){U++}return X};var H=function(Y,Z,W){var X=""+Z;if(T(Y)){while(X.length<W){X="0"+X}}return X};var O=function(W,Y,X,Z){return(T(W)?Z[Y]:X[Y])};var J="";var Q=false;if(L){for(U=0;U<R.length;U++){if(Q){if(R.charAt(U)==="'"&&!T("'")){Q=false}else{J+=R.charAt(U)}}else{switch(R.charAt(U)){case"d":J+=H("d",L.getDate(),2);break;case"D":J+=O("D",L.getDay(),V,I);break;case"o":var S=L.getDate();for(var K=L.getMonth()-1;K>=0;K--){S+=this.getDaysInMonth(L.getFullYear(),K)}J+=H("o",S,3);break;case"m":J+=H("m",L.getMonth()+1,2);break;case"M":J+=O("M",L.getMonth(),P,N);break;case"y":J+=(T("y")?L.getFullYear():(L.getYear()%100<10?"0":"")+L.getYear()%100);break;case"@":J+=L.getTime();break;case"'":if(T("'")){J+="'"}else{Q=true}break;default:J+=R.charAt(U)}}}}return J},possibleChars:function(L){var K="";var I=false;var J;var H=function(M){var N=(J+1<L.length&&L.charAt(J+1)===M);if(N){J++}return N};for(J=0;J<L.length;J++){if(I){if(L.charAt(J)==="'"&&!H("'")){I=false}else{K+=L.charAt(J)}}else{switch(L.charAt(J)){case"d":case"m":case"y":case"@":K+="0123456789";break;case"D":case"M":return null;case"'":if(H("'")){K+="'"}else{I=true}break;default:K+=L.charAt(J)}}}return K},get:function(I,H){return I.settings[H]!==undefined?I.settings[H]:this.defaults[H]},setDateFromField:function(L){var H=this.get(L,"dateFormat");var N=L.input?L.input.val():null;var O=false;L.endDay=L.endMonth=L.endYear=null;var M=this.getDefaultDate(L),I=M,J=this.getFormatConfig(L);try{I=this.parseDate(H,N,J)||M}catch(K){this.log(K);O=true;I=M}L.selectedDay=I.getDate();L.drawMonth=L.selectedMonth=I.getMonth();L.drawYear=L.selectedYear=I.getFullYear();L.currentDay=(N?I.getDate():0);L.currentMonth=(N?I.getMonth():0);L.currentYear=(N?I.getFullYear():0);this.adjustInstDate(L);return O},getDefaultDate:function(J){var H=this.determineDate(this.get(J,"defaultDate"),Date.getUserDate());var I=this.getMinMaxDate(J,"min",true);var K=this.getMinMaxDate(J,"max",false,true);H=(I&&H<I?I:H);H=(K&&H>K?K:H);return H},determineDate:function(I,L,H){var K=function(N){var M=new Date();M.setDate(M.getDate()+N);return M};var J=function(T,O){var N=H?Date.getServerDate():Date.getUserDate();var P=N.getFullYear();var S=N.getMonth();var M=N.getDate();var R=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var Q=R.exec(T);while(Q){switch(Q[2]||"d"){case"d":case"D":M+=parseInt(Q[1],10);break;case"w":case"W":M+=parseInt(Q[1],10)*7;break;case"m":case"M":S+=parseInt(Q[1],10);M=Math.min(M,O(P,S));break;case"y":case"Y":P+=parseInt(Q[1],10);M=Math.min(M,O(P,S));break}Q=R.exec(T)}return new Date(P,S,M)};I=(I===null?L:(typeof I==="string"?J(I,this.getDaysInMonth):(typeof I==="number"?(isNaN(I)?L:K(I)):I)));I=(I&&I.toString()==="Invalid Date"?L:I);if(I){I.setHours(0);I.setMinutes(0);I.setSeconds(0);I.setMilliseconds(0)}return this.daylightSavingAdjust(I)},daylightSavingAdjust:function(H){if(!H){H=null}else{H.setHours(H.getHours()>12?H.getHours()+2:0)}return H},getNumberOfNightsLabel:function(L,J,O){var M=F.datepicker.get(L,"msgKeyNoOfNightsSingle"),K=F.datepicker.get(L,"msgKeyNoOfNightsPlural"),I=F.datepicker.get(L,"msgKeyTooLongStay"),R="",N,P,Q,H=new F.formatter();if(L.settings.isDeparture){if(!J||!O){N=this.daylightSavingAdjust(Date.parsePOSLocaleDate(L.settings.$arrInp.val()));P=this.daylightSavingAdjust(Date.parsePOSLocaleDate(L.input.val()))}else{N=J;P=O}if(N&&P){Q=Math.round((P.getTime()-N.getTime())/86400000);if(Q&&Q>0){if(Q===1){R=H.format(M)}else{if(Q>28){R=H.format(I,28)}else{R=H.format(K,Q)}}}}}return R},setDate:function(L,J,M){var H=!(J);var I=L.selectedMonth;var K=L.selectedYear;J=this.determineDate(J,Date.getUserDate());L.selectedDay=L.currentDay=J.getDate();L.drawMonth=L.selectedMonth=L.currentMonth=J.getMonth();L.drawYear=L.selectedYear=L.currentYear=J.getFullYear();if(I!==L.selectedMonth||K!==L.selectedYear){this.notifyChange(L)}this.adjustInstDate(L);if(L.input){L.input.val(H?"":this.formatDate(L))}},getDate:function(I){var H=(!I.currentYear||(I.input&&I.input.val()==="")?null:this.daylightSavingAdjust(new Date(I.currentYear,I.currentMonth,I.currentDay)));return H},generateHTML:function(AC){var c=Date.getUserDate();c=this.daylightSavingAdjust(new Date(c.getFullYear(),c.getMonth(),c.getDate()));var AK=this.get(AC,"isRTL"),x=this.get(AC,"hideIfNoPrevNext"),h=this.get(AC,"navigationAsDateFormat"),Y=this.getNumberOfMonths(AC),Q=this.get(AC,"showCurrentAtPos"),k=this.get(AC,"stepMonths"),e=(Y[0]!==1||Y[1]!==1),L=this.daylightSavingAdjust((!AC.currentDay?new Date(9999,9,9):new Date(AC.currentYear,AC.currentMonth,AC.currentDay))),R=this.getMinMaxDate(AC,"min",true),Z=this.getMinMaxDate(AC,"max",false,true),H=AC.drawMonth,z=AC.drawYear;H-=Q;if(AC.customCalendarPos!==undefined){var AD=H;if(AD<AC.customCalendarPos){AD+=12}if(Math.abs(AC.customCalendarPos-H)<2){H=AC.customCalendarPos}else{H+=(AC.customCalendarPos-AD>0?1:-1)}}if(H<0){H+=12;z--}if(Z){var b=this.daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-Y[1]+1,Z.getDate()));b=(R&&b<R?R:b);while(this.daylightSavingAdjust(new Date(z,H,1))>b){H--;if(H<0){H=11;z--}}}AC.drawMonth=H;AC.drawYear=z;var a=this.get(AC,"prevText");a=(!h?a:this.formatDateStr(a,this.daylightSavingAdjust(new Date(z,H-k,1)),this.getFormatConfig(AC)));var w=(this.canAdjustMonth(AC,-1,z,H)?'<a class="icon_sprite_commons prev" onclick="DP_jQuery.datepicker.adjustDate(\'#'+AC.id+"', -"+k+", 'M');\" title=\""+a+'"><span class="icon_sprite left_arrow_button">'+a+"</span></a>":(x?"":'<a class="icon_sprite_commons prev disabled" title="'+a+'"><span class="icon_sprite left_arrow_button">'+a+"</span></a>"));var n=this.get(AC,"nextText");n=(!h?n:this.formatDateStr(n,this.daylightSavingAdjust(new Date(z,H+k,1)),this.getFormatConfig(AC)));var N=(this.canAdjustMonth(AC,+1,z,H)?'<a class="icon_sprite_commons next" onclick="DP_jQuery.datepicker.adjustDate(\'#'+AC.id+"', +"+k+", 'M');\" title=\""+n+'"><span class="icon_sprite right_arrow_button">'+n+"</span></a>":(x?"":'<a class="icon_sprite_commons next disabled" title="'+n+'"><span class="icon_sprite right_arrow_button">'+n+"</span></a>"));var AG=this.get(AC,"currentText");var AB=(this.get(AC,"gotoCurrent")&&AC.currentDay?L:c);AG=(!h?AG:this.formatDateStr(AG,AB,this.getFormatConfig(AC)));var j=parseInt(this.get(AC,"firstDay"),10);j=(isNaN(j)?0:j);var U=this.get(AC,"dayNames"),W=this.get(AC,"dayNamesMin"),V=this.get(AC,"monthNames"),I=this.get(AC,"monthNamesShort"),AF=this.get(AC,"beforeShowDay"),S=this.get(AC,"showOtherMonths"),l=AC.endDay?this.daylightSavingAdjust(new Date(AC.endYear,AC.endMonth,AC.endDay)):L,AJ=this.getDefaultDate(AC),u="",AN,g=AC.settings.isDeparture&&AC.settings.$arrInp?this.getInst(AC.settings.$arrInp[0]):null,m=AC.settings.isArrival&&AC.settings.$depInp?this.getInst(AC.settings.$depInp[0]):null,AM=g&&g.currentYear&&(g.currentMonth!==undefined)&&g.currentDay?this.daylightSavingAdjust(new Date(g.currentYear,g.currentMonth,g.currentDay)):L,AI=m&&m.currentYear&&(m.currentMonth!==undefined)&&m.currentDay?this.daylightSavingAdjust(new Date(m.currentYear,m.currentMonth,m.currentDay)):L;for(var d=0;d<Y[0];d++){var i="";for(var T=0;T<Y[1];T++){var O=this.daylightSavingAdjust(new Date(z,H,AC.selectedDay));var v=" corner-all";var q="";if(e){q+='<div class="group group-';switch(T){case 0:q+="first";v=" corner-"+(AK?"right":"left");break;case Y[1]-1:q+="last";v=" corner-"+(AK?"left":"right");break;default:q+="middle";v="";break}q+='">'}q+='<div class="header'+v+'">'+(/all|left/.test(v)&&d===0?(AK?N:w):"")+(/all|right/.test(v)&&d===0?(AK?w:N):"")+this.generateMonthYearHeader(AC,H,z,R,Z,O,d>0||T>0,V,I)+'</div><table class="calendar"><thead><tr>';var t="";for(AN=0;AN<7;AN++){var p=(AN+j)%7;t+="<th"+((AN+j+6)%7>=5?' class="week-end"':"")+'><span title="'+U[p]+'">'+W[p]+"</span></th>"}q+=t+"</tr></thead><tbody>";var P=this.getDaysInMonth(z,H);if(z===AC.selectedYear&&H===AC.selectedMonth){AC.selectedDay=Math.min(AC.selectedDay,P)}var f=(this.getFirstDayOfMonth(z,H)-j+7)%7,AA=(e?6:Math.ceil((f+P)/7)),AE=this.daylightSavingAdjust(new Date(z,H,1-f)),K=L.getTime(),J=l.getTime();for(var M=0;M<AA;M++){q+="<tr>";var AH="";for(AN=0;AN<7;AN++){var AL=(AF?AF.apply((AC.input?AC.input[0]:null),[AE]):[true,""]),o=(AE.getMonth()!==H),X=o||!AL[0]||(R&&AE<R)||(Z&&AE>Z),r=AE.getTime(),y=AE.getDate();AH+=['<td class="',((AN+j+6)%7>=5?" week-end":""),(o?" other-month":""),((r===O.getTime()&&H===AC.selectedMonth&&AC.keyEvent)||(AJ.getTime()===r&&AJ.getTime()===O.getTime())?[" ",this.dayOverClass].join(""):""),(X?" "+this.unselectableClass+" state-disabled":""),(o&&!S?"":" "+AL[1]+(!this.get(AC,"disableDefaultDaySelect")&&r>=K&&r<=J?(AC.settings.isDeparture&&AM&&AM.getTime()<r&&!(r>K)?[" ",this.rangeLastClass].join(""):[" ",this.currentClass].join("")):(!this.get(AC,"disableDefaultDaySelect")?(AC.settings.isArrival&&r>K&&AI?(r<AI.getTime()?[" ",this.rangeClass].join(""):(!(r>AI.getTime())?[" ",this.rangeLastClass].join(""):"")):(AC.settings.isDeparture&&AC.currentYear>0&&AM&&AM.getTime()<=r&&r<K?[" ",this.rangeClass].join(""):"")):""))+(r===c.getTime()?" today":"")),'"',((!o||S)&&AL[2]?[' title="',AL[2],'"'].join(""):""),(X?"":[" onclick=\"DP_jQuery.datepicker.selectDay('#",AC.id,"',",H,",",z,', this);return false;"'].join("")),(X?"":[" onmouseover=\"DP_jQuery.datepicker.onHoverDay('#",AC.id,"',",H,",",z,', this);"'].join("")),">",(o?(S?y:"&#xa0;"):(X?['<span class="state-default">',y,"</span>"].join(""):'<a onclick="return false;" class="state-default'+(r===c.getTime()||(this.get(AC,"highlightedDate")&&r===this.get(AC,"highlightedDate").getTime())?" state-highlight":"")+(r>=K&&r<=J?" state-active":"")+'" href="#">'+y+"</a>")),"</td>"].join("");AE.setDate(y+1);AE=this.daylightSavingAdjust(AE)}q+=AH+"</tr>"}H++;if(H>11){H=0;z++}q+="</tbody></table>"+(e?"</div>"+((Y[0]>0&&T===Y[1]-1)?'<div class="clear-both"></div>':""):"");i+=q}u+=i;u+=(e?'<div class="msg">'+this.getNumberOfNightsLabel(AC)+"</div>":"")}AC.keyEvent=false;return u},generateMonthYearHeader:function(N,K,V,O,T,J,W,R,H){O=(N.rangeStart&&O&&J<O?J:O);var L=this.get(N,"changeMonth");var c=this.get(N,"changeYear");var d=this.get(N,"showMonthAfterYear");var M=this.get(N,"showNumericMonth");var b=this.get(N,"monthUnit");var P=this.get(N,"yearUnit");var S='<div class="title">';var Y="";if(W||!L){if(M){Y+='<span class="month">'+(K+1)+b+"</span> "}else{Y+='<span class="month">'+R[K]+"</span> "}}else{var Z=(O&&O.getFullYear()===V);var I=(T&&T.getFullYear()===V);Y+='<select class="month" onchange="DP_jQuery.datepicker.selectMonthYear(\'#'+N.id+"', this, 'M');\" onclick=\"DP_jQuery.datepicker.clickMonthYear('#"+N.id+"');\">";for(var a=0;a<12;a++){if((!Z||a>=O.getMonth())&&(!I||a<=T.getMonth())){Y+='<option value="'+a+'"'+(a===K?' selected="selected"':"")+">"+H[a]+"</option>"}}Y+="</select>"}if(!d){S+=Y+((W||L||c)&&(!(L&&c))?"&#xa0;":"")}if(W||!c){S+='<span class="year">'+V+(P===""?"":"&#xa0;")+P+"</span>"}else{var X=this.get(N,"yearRange").split(":");var U=0;var Q=0;if(X.length!==2){U=V-10;Q=V+10}else{if(X[0].charAt(0)==="+"||X[0].charAt(0)==="-"){U=V+parseInt(X[0],10);Q=V+parseInt(X[1],10)}else{U=parseInt(X[0],10);Q=parseInt(X[1],10)}}U=(O?Math.max(U,O.getFullYear()):U);Q=(T?Math.min(Q,T.getFullYear()):Q);S+='<select class="year" onchange="DP_jQuery.datepicker.selectMonthYear(\'#'+N.id+"', this, 'Y');\" onclick=\"DP_jQuery.datepicker.clickMonthYear('#"+N.id+"');\">";for(;U<=Q;U++){S+='<option value="'+U+'"'+(U===V?' selected="selected"':"")+">"+U+(P===""?"":"&#xa0;")+P+"</option>"}S+="</select>"}if(d){S+="&#xa0;"+Y}S+="</div>";return S},adjustInstDate:function(L,J,N){var O=L.drawYear+(N==="Y"?J:0);var M=L.drawMonth+(N==="M"?J:0);var P=Math.min(L.selectedDay,this.getDaysInMonth(O,M))+(N==="D"?J:0);var I=this.daylightSavingAdjust(new Date(O,M,P));var K=this.getMinMaxDate(L,"min",true);var H=this.getMinMaxDate(L,"max",false,true);I=(K&&I<K?K:I);I=(H&&I>H?H:I);if(J){L.customCalendarPos=undefined}L.selectedDay=I.getDate();L.drawMonth=L.selectedMonth=I.getMonth();L.drawYear=L.selectedYear=I.getFullYear();if(N==="M"||N==="Y"){this.notifyChange(L)}},notifyChange:function(I){var H=this.get(I,"onChangeMonthYear");if(H){H.apply((I.input?I.input[0]:null),[I.selectedYear,I.selectedMonth+1,I])}},getNumberOfMonths:function(I){var H=this.get(I,"numberOfMonths");return(H===null?[1,1]:(typeof H==="number"?[1,H]:H))},getMinMaxDate:function(L,J,H,I){var K=this.determineDate(this.get(L,J+"Date"),null,I);return(!H||!L.rangeStart?K:(!K||L.rangeStart>K?L.rangeStart:K))},getDaysInMonth:function(H,I){return 32-new Date(H,I,32).getDate()},getFirstDayOfMonth:function(H,I){return new Date(H,I,1).getDay()},canAdjustMonth:function(K,M,J,L){var H=this.getNumberOfMonths(K),I=this.daylightSavingAdjust(new Date(J,L+(M<0?M:H[1]),1));if(M<0){I.setDate(this.getDaysInMonth(I.getFullYear(),I.getMonth()))}return this.isInRange(K,I)},isInRange:function(K,I){var H=(!K.rangeStart?null:this.daylightSavingAdjust(new Date(K.selectedYear,K.selectedMonth,K.selectedDay)));H=(H&&K.rangeStart<H?K.rangeStart:H);var J=H||this.getMinMaxDate(K,"min");var L=this.getMinMaxDate(K,"max",false,true);return((!J||I>=J)&&(!L||I<=L))},getFormatConfig:function(H){var I=this.get(H,"shortYearCutoff");I=(typeof I!=="string"?I:Date.getUserDate().getFullYear()%100+parseInt(I,10));return{shortYearCutoff:I,dayNamesShort:this.get(H,"dayNamesShort"),dayNames:this.get(H,"dayNames"),monthNamesShort:this.get(H,"monthNamesShort"),monthNames:this.get(H,"monthNames")}},formatDate:function(K,H,L,J){if(!H){K.currentDay=K.selectedDay;K.currentMonth=K.selectedMonth;K.currentYear=K.selectedYear}var I=(H?(typeof H==="object"?H:this.daylightSavingAdjust(new Date(J,L,H))):this.daylightSavingAdjust(new Date(K.currentYear,K.currentMonth,K.currentDay)));return this.formatDateStr(this.get(K,"dateFormat"),I,this.getFormatConfig(K))}});F.fn.datepicker=function(I){if(!F.datepicker.initialized){F.doc.on("mousedown",F.datepicker.checkExternalClick);F("#page_container,#page_container_ie6,#g").eq(0).append(F.datepicker.dpDiv);F.datepicker.initialized=true}var H=Array.prototype.slice.call(arguments,1),J;if(typeof I==="string"&&(I==="isDisabled"||I==="getDate")){J=F.datepicker["_"+I+"Datepicker"].apply(F.datepicker,[this[0]].concat(H))}else{if(I==="option"&&arguments.length===2&&typeof arguments[1]==="string"){J=F.datepicker["_"+I+"Datepicker"].apply(F.datepicker,[this[0]].concat(H))}else{J=this.each(function(){if(I==="string"){F.datepicker["_"+I+"Datepicker"].apply(F.datepicker,[this].concat(H))}else{F.datepicker.attachDatepicker(this,I)}})}}return J};F.datepicker=new D();F.datepicker.initialized=false;F.datepicker.uuid=new Date().getTime();F.datepicker.version="1.7.2-hcom";window.DP_jQuery=F})(jQuery);(function(A){A.fn.sortedTiles=function(F){function H(I){return I.forceMasonry||!I.singleMode||I.appendedContent!==undefined||I.saveOptions||I.animate}function G(L,K){var J=L.children(K.itemSelector);var I=J.map(function(M,N){return{el:A(N),width:A(N).outerWidth(true),height:A(N).outerHeight(true)}});I.sort(K.sortFunction);return I}function C(V,J){var S=G(V,J);if(S.length<1){return }V.css({position:"relative"});var W=V.children()[0].tagName;var N=A("<"+W+">.</ "+W+">").css({"float":"none"});V.prepend(N);var T={top:Math.round(N.position().top),left:Math.round(N.position().left)};N.remove();var Q=V.width()+T.left;var L={top:T.top,left:T.left};var I=[];var R=function(Y,X){return X.top===Y.top?X.left-Y.left:X.top-Y.top};for(var M=0;M<S.length;M++){var O=S[M];var U;if(L.top===T.top&&L.left+O.width<=Q){U={top:L.top,left:L.left};L.left+=O.width}else{var K=I.sort(R).pop();U={top:K.top,left:K.left}}I.push({top:U.top+O.height,left:U.left});O.el.css(A.extend({position:"absolute"},U))}var P=I.sort(function(Y,X){return Y.top-X.top}).pop();V.height(P.top-T.top)}function B(K,J){if(A.fn.masonry===undefined){return }var I=G(K,J);I.each(function(L,M){K.append(M.el)});K.masonry(J)}var E=A.extend({},A.sortedTiles.defaults,F);var D=H(E);return this.each(function(){var J=A(this);if(D){B(J,E)}else{C(J,E);var I=J.data("sortedTilesResizeAware")!==undefined;if(!I&&E.resizeable){A.win.on("resize.sortedTiles",function(){C(J,E)});J.data("sortedTilesResizeAware",true)}if(I&&!E.resizeable){J.removeData("sortedTilesResizeAware");A.win.off("resize.sortedTiles")}}})};A.sortedTiles={defaults:{forceMasonry:false,itemSelector:undefined,singleMode:true,sortFunction:function(C,B){return B.height-C.height},resizeable:true,appendedContent:undefined,saveOptions:false,animate:false,duration:"normal",easing:"swing"}}})(jQuery);(function(C){var A=C.browser.msie,D=A&&C.browser.version<7;function B(F,E,I,H){var G=0;if(!I){G=F.css("paddingLeft").replace(/px/,"")*1+F.css("paddingRight").replace(/px/,"")*1+F.css("borderLeftWidth").replace(/px/,"")*1+F.css("borderRightWidth").replace(/px/,"")*1}F.css("width",Math.round(E[H?"outerWidth":"width"]()-(G||0)))}C.win.bind("resize.pin",function(){C(".fixed_elem").each(function(){var H=C(this),F=H.data("props"),E;if(F&&F.aligner){E=F.aligner;H.css("left",E.offset().left+(F.withPadding?0:E.css("paddingLeft").replace(/px/,"")*1));B(H,E,F.keepPaddings,F.withPadding);if(A&&H.next("[class*=ie_shadow_]")[0]){var G=C.trim(H.next().attr("class").replace(/ie_shadow_\d+/,""));H.ieShadow().ieShadow(G?{addClass:G}:true)}}})}).resize();C.extend(C.fn,{pin:function(M){var L=this,K,F;if(D){return }if(L.length>1){L.each(function(){C(this).pin(M)})}K=L.data("props")||{};if(!M){if(K.addedClass){L.removeClass(K.addedClass)}L.css(K.origCss||{}).removeAttr("style").attr("style",K.origStyle||"").removeClass("fixed_elem").removeData();if(C.browser.msie){L.children(".pinned_ie_shadow").remove()}if(K.placeHolder){K.placeHolder.hide().removeAttr("class");F=Object.getReferenceToNestedName("hcom.search.settings");if((F&&F.headerRD)||F===null){K.placeHolder.remove();delete K.placeHolder}}}else{var G=L.css("position"),H;if(G!=="fixed"){var E=K,I=L.attr("style")||"";if(M.preserveHeight){if(E.placeHolder){E.placeHolder.show().css("height",M.preserveHeightPx!==undefined?M.preserveHeightPx:L.height()).attr("class",L.attr("class")+" pinned_elem_place")}else{var J=C('<div class="pinned_elem_place"/>').attr("style",I).css("height",L.height()).addClass(L.attr("class"));this.before(J);E.placeHolder=J}}E.aligner=typeof M.aligner==="string"?C(M.aligner):M.aligner;if(M.addClass){L.addClass(M.addClass);E.addedClass=M.addClass}C.extend(E,{origStyle:I,keepPaddings:M.keepPaddings,withPadding:M.withPadding,origCss:{position:G}});H=M.css||{};H.position="fixed";if(E.aligner){H.left=E.aligner.offset().left+(E.withPadding?0:E.aligner.css("paddingLeft").replace(/px/,"")*1);L.data("props",E).css(H).addClass("fixed_elem");B(L,E.aligner,E.keepPaddings,E.withPadding)}else{L.data("props",E).css(H).addClass("fixed_elem")}}}return L}})})(jQuery);(function(A){var B=0;A.extend(A.fn,{ieShadow:function(C){return !(A.browser.msie&&A.browser.version<9)?this:this.each(function(){var O=A(this),K,G=this.currentStyle["-moz-box-shadow"],E,M,H,N,F,I,L;if(C&&G&&G.match(/#.+/)){M=G.replace(/^.*(#.+).*$/,"$1");E=G.replace(/^[^\d]*(\d.+)\s#.*$/,"$1").split(" ");A.each(E,function(P,Q){E[P]=~~Q.replace(/px/,"")});K=O.css("position");if(K!=="relative"&&K!=="absolute"&&K!=="fixed"){O.css("position","relative")}L="relative";if(K==="fixed"){L=K}F=O.data("ie_shadow");O.data("ie_shadow",(F?F+" ":"")+"ie_shadow_"+B).after(A("<div/>").addClass("ie_shadow_"+B+(C.addClass?" "+C.addClass:"")).css({background:M,filter:"progid:DXImageTransform.Microsoft.Blur(PixelRadius='"+(E[2]||0)+"', MakeShadow='true', ShadowOpacity='0.50')",height:O.outerHeight()+(E[3]||0)*2,left:parseInt(O.css("left")!==undefined?O.css("left"):O.offset().left,10)+(E[0]||0),position:L,width:O.outerWidth()+(E[3]||0)*2}).css(K==="fixed"?"top":"marginTop",-2+(K==="fixed"?(O.css("top")!==undefined?~~O.css("top").replace(/px/,""):O.offset().top)+E[1]||0:-O.outerWidth()+(E[1]||0))));B++}if(!C){var J=O.data("ie_shadow"),D=[];if(J){A.each(J.split(" "),function(P,Q){D.push("."+Q)});A(D.join(" ")).remove();O.removeData("ie_shadow")}}})}})})(jQuery);(function(A){function B(F,D,C){var E=Math.abs(F-D);A.win.animate({scrollTop:F},Math.min(E,1000),"swing",C)}A.fn.smoothScroll=function(F){var G,H,D,C,J,E,I;if(this.length){G=this[0];H=A.fn.offset.call(this);D=A.fn.height.call(this);C=A.css(window,"scrollTop");if(H.top<C){B(H.top,C,F)}else{if((E=H.top+D)>(J=C+(I=A.win.height()))){B(E-I,C,F)}else{if(F){F()}}}}return this}})(jQuery);(function(A){A.extend(A.fn,{yellowFade:function(){var E=arguments[0]||{},C=new Date().getTime(),G=E.duration||1000,F=E.startColor||[255,255,0],D=E.endColor||[255,255,255];function B(K,O,N,L,H){var J=new Date().getTime(),I=(J-L)/(H-L),M=[Math.round(O[0]+((N[0]-O[0])*I)),Math.round(O[1]+((N[1]-O[1])*I)),Math.round(O[2]+((N[2]-O[2])*I))];K.css("backgroundColor","rgb("+M[0]+","+M[1]+","+M[2]+")");if(J<=H){setTimeout(function(){B(K,O,N,L,H)},20)}else{K.css("backgroundColor","rgb("+N[0]+","+N[1]+","+N[2]+")");if(E.callback){E.callback.call(K)}}}B(this,F,D,C,C+G);return this}})})(jQuery);(function(D){var B=function(F){var E,G=[];for(E in F){G.push(E+'="'+F[E]+'"')}return G.join(" ")},C=function(G){var E,I,H=[],F;for(E in G){if(typeof G[E]==="object"){F=[];for(I in G[E]){F.push([I,"=",encodeURIComponent(G[E][I])].join(""))}G[E]=F.join("&amp;")}H.push(['<param name="',E,'" value="',G[E],'" />'].join(""))}return H.join("")},A=false;D.flash=function(){var E="0,0,0",F=navigator.plugins["Shockwave Flash"]||window.ActiveXObject;if(F){E=F.description||function(){try{return new F("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(G){}}();if(E){E=E.match(/^[A-Za-z\s]*?(\d+)[\.|,](\d+)(?:\s+r|,)(\d+)/)}else{E="0,0,0"}}return{available:E[1]>0,activeX:F!==undefined?!F.name:false,version:{major:E[1]*1,minor:E[2]*1,release:E[3]*1},hasVersion:function(H){var K=this.version,I="major",J="minor",G="release";H=/string|number/.test(typeof H)?H.toString().split("."):H||[0,0,0];H=[H[I]||H[0]||K[I],H[J]||H[1]||K[J],H[G]||H[2]||K[G]];return(H[0]<K[I])||(H[0]===K[I]&&H[1]<K[J])||(H[0]===K[I]&&H[1]===K[J]&&H[2]<=K[G])},expressInstall:"expressInstall.swf",create:function(G){if(!D.flash.available||A||!typeof G==="object"||!G.swf){return false}if(G.hasVersion&&!D.flash.hasVersion(G.hasVersion)){G={swf:G.expressInstall||D.flash.expressInstall,attrs:{id:"SWFObjectExprInst",height:Math.max(G.height||137),width:Math.max(G.width||214)},params:{flashvars:{MMredirectURL:window.location.href,MMplayerType:D.flash.activeX?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}};A=true}else{G=D.extend(true,{attrs:{height:G.height||180,width:G.width||320},params:{wmode:G.wmode||"opaque",flashvars:G.flashvars}},G)}return"<object "+B(G.attrs)+(D.flash.activeX?' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"><param name="movie" value="'+G.swf+'" />':' type="application/x-shockwave-flash" data="'+G.swf+'">')+C(G.params)+"</object>"}}}();D.fn.flash=function(E){if(typeof E==="object"){this.each(function(){var F=D.flash.create(E);if(!!F){this.innerHTML=F}else{D(this).parent().find(".noflash").show()}})}else{if(typeof E==="function"){this.find("object").andSelf().filter("object").each(function(){var G=this,F="jsInteractionTimeoutMs";G[F]=G[F]||0;if(G[F]<660){if(G.clientWidth||G.clientHeight){E.call(this)}else{setTimeout(function(){D(G).flash(E)},G[F]+66)}}})}}return this}})(jQuery);(function(E){var D=document.documentElement.style,F=("textOverflow" in D||"OTextOverflow" in D),B="textContent" in document.createTextNode("")?"textContent":"nodeValue",A=function(G){return G.replace(/\s+$/g,"")},C=function(H,L,K){var J=0,G=[],I=function(N){var P=0,O,M=0;if(J<=L){for(P=0;P<N.length;P+=1){if(N[P].nodeType===1){O=N[P].cloneNode(false);G[G.length-1].appendChild(O);G.push(O);I(N[P].childNodes);G.pop()}else{if(N[P].nodeType===3){if(J+N[P].length<L){G[G.length-1].appendChild(N[P].cloneNode(false))}else{O=N[P].cloneNode(false);M=L-J;if(K.wholeWord){M=Math.min(L-J,O[B].substring(0,L-J).lastIndexOf(" "))}O[B]=K.trim?A(O[B].substr(0,M)):O[B].substr(0,M);G[G.length-1].appendChild(O)}J+=N[P].length}else{G.appendChild(N[P].cloneNode(false))}}}}};G.push(H.cloneNode(false));I(H.childNodes);return E(G.pop().childNodes)};E.extend(E.fn,{textOverflow:function(G){var H=E.extend({str:"&#x2026;",trim:true,title:false,className:undefined,wholeWord:false},G);if(!F||H.title){return this.each(function(){var M=E(this),N=M.clone(),Q=M.clone(),L=M.text(),I=M.width(),O=0,P=0,K=L.length,J=function(){if(I!==M.width()){M.replaceWith(Q);M=Q;Q=M.clone();M.textOverflow(E.extend({},H));I=M.width()}};M.after(N.hide().css({position:"absolute",width:"auto",overflow:"visible",maxWidth:"inherit",minWidth:"inherit"}));if(N.width()>I){while(O<K){P=Math.floor(O+((K-O)/2));N.empty().append(C(Q.get(0),P,H)).append(H.str);if(N.width()<I){O=P+1}else{K=P}}if(O<L.length){M.empty().append(C(Q.get(0),O-1,H)).append(H.str);if(H.title){M.attr("title",L)}if(H.className){M.addClass(H.className)}}}N.remove()})}else{return this}}})})(jQuery);$.registerModule({name:"hcom.common.modules.ga_reporter",impl:function(){var A;A=function(){this.setupAjaxPreFilter_()};A.prototype={setupAjaxPreFilter_:function(){var B=this;$.ajaxPrefilter(function(C,E,D){C.converters["text xml"]=function(F){return B.filterXml_.call(B,F)};C.converters["text json"]=function(F){return B.filterJson_.call(B,F)};E.converters=C.converters})},sendEvents_:function(C){var B=C.Events;hcom.common.modules.ga_reporter.sendEvents(B)},sendTransactions_:function(C){var B=C.Transactions;hcom.common.modules.ga_reporter.sendTransactions(B)},filterXml_:function(D){try{var B=$.parseJSON(D);if(B.GAPContent){if(B.GAPContent.Events&&B.GAPContent.Events.length>0){this.sendEvents_(B.GAPContent)}return $.parseXML(B.OriginalContent.Response)}else{return $.parseXML(D)}}catch(C){try{return $.parseXML(D)}catch(E){throw E}}},filterJson_:function(C){var B=$.parseJSON(C);if(B.GAPContent){if(B.GAPContent.Event&&B.GAPContent.Events.length>0){this.sendEvents_(B.GAPContent)}return $.parseJSON(B.OriginalContent.Response)}else{return $.parseJSON(C)}}};A.sendEvents=function(D){var B=0,E,C=D.length;if(typeof _gaq!=="undefined"){for(;B<C;B++){E=D[B];if(typeof E.category==="undefined"||typeof E.action==="undefined"){console.warn("'category' and 'action' property is required for google analytics reporting")}else{_gaq.push(["premium._trackEvent",E.category,E.action,E.label,E.value,E.nonInteraction])}}}else{console.warn("google analytics script is unavailable")}};A.sendTransactions=function(B){};A.init=function(){return new A()};return A}});(function(E){E.loadModule("hcom.common.modules.ga_reporter");var D=E.ajax,A=1,B=150,G={success:1,error:1,complete:1},C;var F=function(H,I){if(typeof H==="object"){this.uri=undefined;this.options=H}else{this.uri=H;this.options=I}this.legacyCallbacks={};this.cleanOpts_();this.tries=0};F.prototype.cleanOpts_=function(){var I=E.extend({},this.options),H;for(H in G){if(I[H]){this.legacyCallbacks[H]=I[H];delete I[H]}}this.originalContext=I.context||I;I.context=this;this.options=I};F.prototype.onAjaxError_=function(I,J,H){this.recovery=this.isRecoverable_(I);if(!this.recovery){this.deferred.rejectWith(this.originalContext,[I,J,H])}};F.prototype.isRecoverable_=function(H){return H.status===400&&this.tries++<A};F.prototype.onAjaxSuccess_=function(J,I,H){this.deferred.resolveWith(this.originalContext,[J,I,H])};F.prototype.onAjaxComplete_=function(H,I){if(this.recovery){setTimeout(E.proxy(this.doRequest_,this),B)}else{this.completeDeferred.fireWith(this.originalContext,[H,I])}};F.prototype.doRequest_=function(){this.recovery=false;return D(this.uri,this.options).fail(this.onAjaxError_).done(this.onAjaxSuccess_).complete(this.onAjaxComplete_)};F.prototype.initiateRequest=function(){var J=(this.deferred=E.Deferred()).promise(),K=(this.completeDeferred=C()),I,H;J.success=J.done;J.error=J.fail;J.complete=K.add;for(H in G){if(this.legacyCallbacks.hasOwnProperty(H)){J[H](this.legacyCallbacks[H])}}I=this.doRequest_();J.abort=I.abort;return J};E.ajax=function(J,I){var H=new F(J,I);return H.initiateRequest()};C=E.Callbacks&&function(){return E.Callbacks("once memory")}||function(){var H=E._Deferred();H.fireWith=H.resolveWith;H.add=H.done;return H}})(jQuery);(function(F){var O,N,L,T,I,H,C=1;if(F.fn.dotdotdot){return }function P(V,U){if(!V){return false}if(typeof U==="string"){U="dotdotdot: "+U}else{U=["dotdotdot:",U]}if(window.console&&window.console.log){window.console.log(U)}return false}function K(X){var Y=X.innerHeight(),W=["paddingTop","paddingBottom"],Z,V;for(Z=0,V=W.length;Z<V;Z++){var U=parseInt(X.css(W[Z]),10);if(isNaN(U)){U=0}Y-=U}return Y}function R(V,U){return V.innerHeight()>U.maxHeight}function M(U){return{width:U.innerWidth(),height:U.innerHeight()}}function E(V,U){if(V.innerText){V.innerText=U}else{if(V.nodeValue){V.nodeValue=U}else{if(V.textContent){V.textContent=U}}}}function Q(U){if(U.innerText){return U.innerText}else{if(U.nodeValue){return U.nodeValue}else{if(U.textContent){return U.textContent}else{return""}}}}function J(U,V){if(typeof U==="undefined"){return false}if(!U){return false}if(typeof U==="string"){U=F(U,V);return U.length?U:false}if(typeof U==="object"){return(typeof U.jquery==="undefined")?false:U}return false}function G(X,c,b){var Z=X.children(),U=false;X.empty();for(var W=0,V=Z.length;W<V;W++){var Y=Z.eq(W);X.append(Y);if(b){X.append(b)}if(R(X,c)){Y.remove();U=true;break}else{if(b){b.remove()}}}return U}function S(V,X,k,Y,U){var i=false,f=V[0],g;if(typeof f==="undefined"){return false}var h=(Y.wrap==="letter")?"":" ",j=Q(f).split(h),c=-1,l=-1,d=0,W=j.length-1;X.attr("title",V.text());while(d<=W){var Z=Math.floor((d+W)/2);if(Z===l){break}l=Z;E(f,j.slice(0,l+1).join(h)+Y.ellipsis);if(!R(k,Y)){c=l;d=l}else{W=l}}if(c!==-1){var b=j.slice(0,c+1).join(h);i=true;while(F.inArray(b.slice(-1),Y.lastCharacter.remove)>-1){b=b.slice(0,-1)}if(F.inArray(b.slice(-1),Y.lastCharacter.noEllipsis)<0){b+=Y.ellipsis}E(f,b)}else{var a=V.parent();V.remove();g=a.contents().eq(-1);i=S(g,X,k,Y,U)}return i}function A(X,W,i,Y,V){var d=X.contents(),f=false;X.empty();var h="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style";for(var g=0,b=d.length;g<b;g++){if(f){break}var c=d[g],U=F(c);if(typeof c==="undefined"){continue}X.append(U);if(V){var Z=X.is(h)?"after":"append";X[Z](V)}if(c.nodeType===3){if(R(i,Y)){f=S(U,W,i,Y,V)}}else{f=A(U,W,i,Y,V)}if(!f){if(V){V.remove()}}}return f}F.fn.dotdotdot=function(a){if(this.length===0){P(true,'No element found for "'+this.selector+'".');return this}if(this.length>1){return this.each(function(){F(this).dotdotdot(a)})}var W=this;if(W.data("dotdotdot")){W.trigger("destroy.dot")}W.bind_events=function(){W.on("update.dot",function(f,h){f.preventDefault();f.stopPropagation();Y.maxHeight=(typeof Y.height==="number")?Y.height:K(W);Y.maxHeight+=Y.tolerance;if(typeof h!=="undefined"){if(typeof h==="string"){h=F("<div />").append(h).contents()}if(h instanceof F){b=h}}X=W.wrapInner('<div class="dotdotdot" />').children();X.empty().append(b.clone(true)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var g=false,d=false;if(V.afterElement){g=V.afterElement.clone(true);V.afterElement.remove()}if(R(X,Y)){if(Y.wrap==="children"){d=G(X,Y,g)}else{d=A(X,W,X,Y,g)}}X.replaceWith(X.contents());X=null;if(F.isFunction(Y.callback)){Y.callback.call(W[0],d,b)}V.isTruncated=d;return d}).on("isTruncated.dot",function(d,c){d.preventDefault();d.stopPropagation();if(typeof c==="function"){c.call(W[0],V.isTruncated)}return V.isTruncated}).on("originalContent.dot",function(d,c){d.preventDefault();d.stopPropagation();if(typeof c==="function"){c.call(W[0],b)}return b}).on("destroy.dot",function(c){c.preventDefault();c.stopPropagation();W.unwatch().unbind_events().empty().append(b).removeAttr("title").data("dotdotdot",false)});return W};W.unbind_events=function(){W.off(".dot");return W};W.watch=function(){W.unwatch();if(Y.watch==="window"){var c=F.win.width(),d=F.win.height();F.win.on("resize.dot"+V.dotId,function(){if(c!==F.win.width()||d!==F.win.height()||!Y.windowResizeFix){c=F.win.width();d=F.win.height();if(U){clearInterval(U)}U=setTimeout(function(){W.trigger("update.dot")},10)}})}else{Z=M(W);U=setInterval(function(){var e=M(W);if(Z.width!==e.width||Z.height!==e.height){W.trigger("update.dot");Z=M(W)}},100)}return W};W.unwatch=function(){F.win.off("resize.dot"+V.dotId);if(U){clearInterval(U)}return W};var b=W.contents(),Y=F.extend(true,{},F.fn.dotdotdot.defaults,a),V={},Z={},U=null,X=null;V.afterElement=J(Y.after,W);V.isTruncated=false;V.dotId=C++;W.data("dotdotdot",true).bind_events().trigger("update.dot");if(Y.watch){W.watch()}return W};F.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:false,watch:false,windowResizeFix:true,debug:false};var B=F.fn.html;F.fn.html=function(U){if(typeof U!=="undefined"){if(this.data("dotdotdot")){if(typeof U!=="function"){return this.trigger("update",[U])}}return B.call(this,U)}return B.call(this)};var D=F.fn.text;F.fn.text=function(V){if(typeof V!=="undefined"){if(this.data("dotdotdot")){var U=F("<div />");U.text(V);V=U.html();U.remove();return this.trigger("update",[V])}return D.call(this,V)}return D.call(this)}})(jQuery);(function(A){A.tiny=A.tiny||{};A.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:true,lockscroll:true,size:"auto",sizethumb:"auto",invertscroll:false}};function B(Q,G){var K=this,T=Q,J={obj:A(".viewport",Q)},H={obj:A(".overview",Q)},D={obj:A(".scrollbar",Q)},M={obj:A(".track",D.obj)},P={obj:A(".thumb",D.obj)},L=G.axis==="x",N=L?"left":"top",V=L?"Width":"Height",R=0,Y={start:0,now:0},O={},E="ontouchstart" in document.documentElement;function U(Z){if(H.ratio<1){if(G.invertscroll&&E){Y.now=Math.min((M[G.axis]-P[G.axis]),Math.max(0,(Y.start+(O.start-(L?Z.pageX:Z.pageY)))))}else{Y.now=Math.min((M[G.axis]-P[G.axis]),Math.max(0,(Y.start+((L?Z.pageX:Z.pageY)-O.start))))}R=Y.now*D.ratio;H.obj.css(N,-R);P.obj.css(N,Y.now)}}function F(){A.body.removeClass("noSelect");A.doc.off("mousemove",U);A.doc.off("mouseup",F);P.obj.off("mouseup",F);document.ontouchmove=document.ontouchend=null}function I(a){A.body.addClass("noSelect");var Z=parseInt(P.obj.css(N),10);O.start=L?a.pageX:a.pageY;Y.start=Z==="auto"?0:Z;if(!E){A.doc.on("mousemove",U);A.doc.on("mouseup",F);P.obj.on("mouseup",F)}else{document.ontouchmove=function(b){b.preventDefault();U(b.touches[0])};document.ontouchend=F}}function X(b){if(H.ratio<1){var a=b||window.event,Z=a.wheelDelta?a.wheelDelta/120:-a.detail/3;R-=Z*G.wheel;R=Math.min((H[G.axis]-J[G.axis]),Math.max(0,R));P.obj.css(N,R/D.ratio);H.obj.css(N,-R);if(G.lockscroll||(R!==(H[G.axis]-J[G.axis])&&R!==0)){a=A.event.fix(a);a.preventDefault()}}}function S(){if(!E){P.obj.on("mousedown",I);M.obj.on("mouseup",U)}else{J.obj[0].ontouchstart=function(Z){if(1===Z.touches.length){I(Z.touches[0]);Z.stopPropagation()}}}if(G.scroll&&window.addEventListener){T[0].addEventListener("DOMMouseScroll",X,false);T[0].addEventListener("mousewheel",X,false)}else{if(G.scroll){T[0].onmousewheel=X}}}function C(){K.update();S();return K}function W(){var Z=V.toLowerCase();P.obj.css(N,R/D.ratio);H.obj.css(N,-R);O.start=P.obj.offset()[N];D.obj.css(Z,M[G.axis]);M.obj.css(Z,M[G.axis]);P.obj.css(Z,P[G.axis])}this.update=function(Z){J[G.axis]=J.obj[0]["offset"+V];H[G.axis]=H.obj[0]["scroll"+V];H.ratio=J[G.axis]/H[G.axis];D.obj.toggleClass("disable",H.ratio>=1);M[G.axis]=G.size==="auto"?J[G.axis]:G.size;P[G.axis]=Math.min(M[G.axis],Math.max(0,(G.sizethumb==="auto"?(M[G.axis]*H.ratio):G.sizethumb)));D.ratio=G.sizethumb==="auto"?(H[G.axis]/M[G.axis]):(H[G.axis]-J[G.axis])/(M[G.axis]-P[G.axis]);R=(Z==="relative"&&H.ratio<=1)?Math.min((H[G.axis]-J[G.axis]),Math.max(0,R)):0;R=(Z==="bottom"&&H.ratio<=1)?(H[G.axis]-J[G.axis]):isNaN(parseInt(Z,10))?R:parseInt(Z,10);W()};return C()}A.fn.tinyscrollbar=function(D){var C=A.extend({},A.tiny.scrollbar.options,D);this.each(function(){var E=A(this);E.data("tsb",new B(E,C))});return this};A.fn.tinyscrollbar_update=function(C){var D=A(this).data("tsb");if(D){return D.update(C)}}})(jQuery);(function(G,K,T){var C,L,H,V,D,E,A,N,S,J,W,X,B,M,R,U,I,F,P,O,Q;O={paneClass:"pane",sliderClass:"slider",contentClass:"content",iOSNativeScrolling:false,preventPageScrolling:false,disableResize:false,alwaysVisible:false,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null};U="scrollbar";R="scroll";N="mousedown";S="mousemove";W="mousewheel";J="mouseup";M="resize";D="drag";F="up";B="panedown";H="DOMMouseScroll";V="down";P="wheel";E="keydown";A="keyup";I="touchmove";C=K.navigator.appName==="Microsoft Internet Explorer"&&/msie 7./i.test(K.navigator.appVersion)&&K.ActiveXObject;L=null;Q=function(){var Y,a,Z;Y=T.createElement("div");a=Y.style;a.position="absolute";a.width="100px";a.height="100px";a.overflow=R;a.top="-9999px";T.body.appendChild(Y);Z=Y.offsetWidth-Y.clientWidth;T.body.removeChild(Y);return Z};X=function(){function Y(a,Z){this.el=a;this.options=Z;L=L||Q();this.$el=G(this.el);this.doc=G.doc;this.win=G.win;this.generate();this.createEvents();this.addEvents();this.reset()}Y.prototype.preventScrolling=function(a,Z){if(!this.isActive){return }if(a.type===H){if(Z===V&&a.originalEvent.detail>0||Z===F&&a.originalEvent.detail<0){a.preventDefault()}}else{if(a.type===W){if(!a.originalEvent||!a.originalEvent.wheelDelta){return }if(Z===V&&a.originalEvent.wheelDelta<0||Z===F&&a.originalEvent.wheelDelta>0){a.preventDefault()}}}};Y.prototype.updateScrollValues=function(){var Z;Z=this.content;this.maxScrollTop=Z.scrollHeight-Z.clientHeight;this.contentScrollTop=Z.scrollTop;this.maxSliderTop=this.paneHeight-this.sliderHeight;this.sliderTop=this.contentScrollTop*this.maxSliderTop/this.maxScrollTop};Y.prototype.createEvents=function(){var Z=this;this.events={down:function(a){Z.isBeingDragged=true;Z.offsetY=a.pageY-Z.slider.offset().top;Z.pane.addClass("active");Z.doc.bind(S,Z.events[D]).bind(J,Z.events[F]);return false},drag:function(a){Z.sliderY=a.pageY-Z.$el.offset().top-Z.offsetY;Z.scroll();Z.updateScrollValues();if(Z.contentScrollTop>=Z.maxScrollTop){Z.$el.trigger("scrollend")}else{if(Z.contentScrollTop===0){Z.$el.trigger("scrolltop")}}return false},up:function(a){Z.isBeingDragged=false;Z.pane.removeClass("active");Z.doc.unbind(S,Z.events[D]).unbind(J,Z.events[F]);return false},resize:function(a){Z.reset()},panedown:function(a){Z.sliderY=(a.offsetY||a.originalEvent.layerY)-(Z.sliderHeight*0.5);Z.scroll();Z.events.down(a);return false},scroll:function(a){if(Z.isBeingDragged){return }Z.updateScrollValues();Z.sliderY=Z.sliderTop;Z.slider.css({top:Z.sliderTop});if(a===null){return }if(Z.contentScrollTop>=Z.maxScrollTop){if(Z.options.preventPageScrolling){Z.preventScrolling(a,V)}Z.$el.trigger("scrollend")}else{if(Z.contentScrollTop===0){if(Z.options.preventPageScrolling){Z.preventScrolling(a,F)}Z.$el.trigger("scrolltop")}}},wheel:function(a){if(a===null){return }Z.sliderY+=-a.wheelDeltaY||-a.delta;Z.scroll();return false}}};Y.prototype.addEvents=function(){var Z;this.removeEvents();Z=this.events;if(!this.options.disableResize){this.win.bind(M,Z[M])}this.slider.bind(N,Z[V]);this.pane.bind(N,Z[B]).bind(""+W+" "+H,Z[P]);this.$content.bind(""+R+" "+W+" "+H+" "+I,Z[R])};Y.prototype.removeEvents=function(){var Z;Z=this.events;this.win.unbind(M,Z[M]);this.slider.unbind();this.pane.unbind();this.$content.unbind(""+R+" "+W+" "+H+" "+I,Z[R])};Y.prototype.generate=function(){var b,c,a,Z,d;a=this.options;Z=a.paneClass;d=a.sliderClass;b=a.contentClass;if(!this.$el.find(""+Z).length&&!this.$el.find(""+d).length){this.$el.append('<div class="'+Z+'"><div class="'+d+'" /></div>')}this.$content=this.$el.children("."+b);this.$content.attr("tabindex",0);this.content=this.$content[0];this.slider=this.$el.find("."+d);this.pane=this.$el.find("."+Z);if(L){c=this.$el.css("direction")==="rtl"?{left:-L}:{right:-L};this.$el.addClass("has-scrollbar")}if(a.iOSNativeScrolling){c=c||{};c.WebkitOverflowScrolling="touch"}if(c!==null){this.$content.css(c)}return this};Y.prototype.restore=function(){this.stopped=false;this.pane.show();this.addEvents()};Y.prototype.reset=function(){var f,g,h,a,b,Z,d,c,e;if(!this.$el.find("."+this.options.paneClass).length){this.generate().stop()}if(this.stopped){this.restore()}f=this.content;h=f.style;a=h.overflowY;if(C){this.$content.css({height:this.$content.height()})}g=f.scrollHeight+L;Z=this.pane.outerHeight();c=parseInt(this.pane.css("top"),10);b=parseInt(this.pane.css("bottom"),10);d=Z+c+b;e=Math.round(d/g*d);if(e<this.options.sliderMinHeight){e=this.options.sliderMinHeight}else{if((this.options.sliderMaxHeight!==null)&&e>this.options.sliderMaxHeight){e=this.options.sliderMaxHeight}}if(a===R&&h.overflowX!==R){e+=L}this.maxSliderTop=d-e;this.contentHeight=g;this.paneHeight=Z;this.paneOuterHeight=d;this.sliderHeight=e;this.slider.height(e);this.events.scroll();this.pane.show();this.isActive=true;if((f.scrollHeight===f.clientHeight)||(this.pane.outerHeight(true)>=f.scrollHeight&&a!==R)){this.pane.hide();this.isActive=false}else{if(this.el.clientHeight===f.scrollHeight&&a===R){this.slider.hide()}else{this.slider.show()}}this.pane.css({opacity:(this.options.alwaysVisible?1:""),visibility:(this.options.alwaysVisible?"visible":"")});return this};Y.prototype.scroll=function(){if(!this.isActive){return }this.sliderY=Math.max(0,this.sliderY);this.sliderY=Math.min(this.maxSliderTop,this.sliderY);this.$content.scrollTop((this.paneHeight-this.contentHeight+L)*this.sliderY/this.maxSliderTop*-1);this.slider.css({top:this.sliderY});return this};Y.prototype.scrollBottom=function(Z){if(!this.isActive){return }this.reset();this.$content.scrollTop(this.contentHeight-this.$content.height()-Z).trigger(W);return this};Y.prototype.scrollTop=function(Z){if(!this.isActive){return }this.reset();this.$content.scrollTop(+Z).trigger(W);return this};Y.prototype.scrollTo=function(Z){if(!this.isActive){return }this.reset();this.scrollTop(G(Z).get(0).offsetTop);return this};Y.prototype.stop=function(){this.stopped=true;this.removeEvents();this.pane.hide();return this};Y.prototype.flash=function(){var Z=this;if(!this.isActive){return }this.reset();this.pane.addClass("flashed");setTimeout(function(){Z.pane.removeClass("flashed")},this.options.flashDelay);return this};return Y}();G.fn.nanoScroller=function(Y){return this.each(function(){var Z,a;if(!(a=this.nanoscroller)){Z=G.extend({},O,Y);this.nanoscroller=a=new X(this,Z)}if(Y&&typeof Y==="object"){G.extend(a.options,Y);if(Y.scrollBottom){return a.scrollBottom(Y.scrollBottom)}if(Y.scrollTop){return a.scrollTop(Y.scrollTop)}if(Y.scrollTo){return a.scrollTo(Y.scrollTo)}if(Y.scroll==="bottom"){return a.scrollBottom(0)}if(Y.scroll==="top"){return a.scrollTop(0)}if(Y.scroll&&Y.scroll instanceof G){return a.scrollTo(Y.scroll)}if(Y.stop){return a.stop()}if(Y.flash){return a.flash()}}return a.reset()})}})(jQuery,window,document);(function(A){A.fn.ajaxSubmit=function(B){var C=A.extend({onSuccess:function(E,D){},onError:function(E,D){}},B);return this.each(function(){var D=A(this);D.on("submit.ajaxSubmit",function(E){var F=D.serialize();E.preventDefault();A.ajax({url:D.attr("action"),type:D.attr("method")||"get",data:F+"&ajax=true",success:C.onSuccess,error:function(I,G,H){C.onError(H,G)}})})})}})(jQuery);$.registerModule({name:"hcom.common.modules.cobranding",impl:function(A){function B(){var D=$("iframe.cobranding"),C=D.parent().width();D.width(C)}return{init:function(){if($("iframe.cobranding").length>0){$.win.on("resize",B);B()}}}}});$.registerModule({name:"hcom.common.modules.listener",impl:function(B){var D=function(){this.listenerHosts=[];this.listeners=[];return this};function C(G,F){var H=$.inArray(G,this.listenerHosts),I,E=false;if(H<0){this.listenerHosts.push(G);E=true;I=[];this.listeners.push(I)}else{I=this.listeners[H]}if(F!==undefined&&(E||$.inArray(F,I)<0)){I.push(F)}else{if(!E!==(F!==undefined)){throw"DuplicateListener"}}}function A(F,E){var H=$.inArray(F,this.listenerHosts),I,G;if(H>=0){if(E!==undefined){I=this.listeners[H];G=$.map(I,function(K,J){return(K===E?null:K)});if(G.length===I.length){console.error("listener callable not found");throw"ListenerNotFound"}}if(E===undefined||G.length===0){this.listenerHosts.splice(H,1);this.listeners.splice(H,1)}else{this.listeners[H]=G}}else{console.error("host not found while unregistering: %s",F);throw"HostNotFound"}}D.prototype={addListener:function(F,E){C.call(this,F,E);return this},removeListener:function(F,E){A.call(this,F,E);return this},fireEvent:function(){var E=Array.prototype.slice.call(arguments),G=this.listeners.slice(),F=this.listenerHosts.slice();$.map(F,function(H,I){$.map(G[I],function(J){J.apply((H.constructor===String?Object.getReferenceToNestedName(H):H),E)})});return this},fireOnHost:function(F){var E=Array.prototype.slice.call(arguments);E.splice(0,1);$.map(this.listenerHosts,function(G,H){F.apply((G.constructor===String?Object.getReferenceToNestedName(G):G),E)});return this},clear:function(){this.listeners=[];this.listenerHosts=[];return this}};return D}});$.registerModule({name:"hcom.common.modules.template",impl:function(C){var A=function(G){this.message=G;this.name="TemplateException"};A.prototype={toString:function(){return this.name+': "'+this.message+'"'}};var E=function(){this.modules={};this.templates={}};function F(I,G,H){if(!I.hasOwnProperty(G)){throw new A("requesting undefined "+H+": "+G)}return I[G]}function D(G,H){H.children("template").each(function(J){var I=$(this);G.templates[I.attr("name")]=I.text()});H.children("module").each(function(K){var J=$(this),I=J.attr("name");if(!G.modules.hasOwnProperty(I)){G.modules[I]=new E()}D(G.modules[I],J)});return G}function B(I,K){var G,J,H;for(G in K){if(K.hasOwnProperty(G)){if(!I.modules.hasOwnProperty(G)){I.modules[G]=new E()}H=K[G];for(J in H){if(H.hasOwnProperty(J)){I.modules[G].templates[J]=H[J]}}}}return I}E.prototype={getModule:function(G){return F(this.modules,G,"module")},getTemplate:function(G){return F(this.templates,G,"template")},hasModule:function(G){return this.modules.hasOwnProperty(G)},hasTemplate:function(G){return this.templates.hasOwnProperty(G)}};$.extend(E,{build:function(G){return D(new E(),G)},buildJson:function(G){return B(new E(),G)}});return E}});$.registerModule({name:"hcom.common.modules.adbanner",impl:function(){function D(I){var G,F,H=86400000,E={DAYSUNTILSTART:null,DAYSUNTILEND:null,STAR:null,NUMCHILDREN:0};if(typeof I.starRatings!=="undefined"&&I.starRatings.length>0){for(G in I.starRatings){if(E.STAR<I.starRatings[G]){E.STAR=I.starRatings[G]}}}for(G in I){if(G.indexOf("children[")===0){E.NUMCHILDREN+=parseInt(I[G],10)}}F=Math.floor(new Date().getTime()/H);if(typeof I.arrivalDate!=="undefined"){E.DAYSUNTILSTART=Math.floor(Date.parsePOSLocaleDate(I.arrivalDate).getTime()/H)-F}if(typeof I.departureDate!=="undefined"){E.DAYSUNTILEND=Math.floor(Date.parsePOSLocaleDate(I.departureDate).getTime()/H)-F}return E}function B(H,J,K){J=encodeURIComponent(J);if(K!==null){K=encodeURIComponent(K)}var G=H.split("&"),F=false,I,E;for(I=0;I<G.length;I++){E=G[I].split("=");if(E[0]===J){if(K===null){G.splice(I,1)}else{E[1]=K;G[I]=E.join("=")}F=true;break}}if(!F&&K!==null){G[G.length]=[J,K].join("=")}return G.join("&")}function C(){$("iframe[id^=bannerAd]").each(function(){this.style.display="block"})}function A(J){var I=[];if(typeof J!=="undefined"){if(J.starRatings&&!$.isArray(J.starRatings)){J.starRatings=[J.starRatings]}J=D(J)}$("iframe[id^=bannerAd]").each(function(){var M,L=this.src,N;if(typeof J!=="undefined"){for(M in J){L=B(L,M,J[M])}}N=this.attributes;N.src.value=L;I.push(N)});for(var G in I){if(I.hasOwnProperty(G)){var F=I[G],K="";for(var E=0;E<F.length;E++){var H=F[E];K+=H.name+'="'+H.value+'" '}$("#"+F.id.value).replaceWith("<iframe "+K+" />")}}C()}return{reloadAdBanners:A}}});$.registerModule({name:"hcom.common.modules.emitter",impl:function(A){var B;B=function(){this.emitSuspended=false};B.prototype={addEvents:function(){var E,C,D;D=(this.events=this.events||{});for(E=0;(C=arguments[E]);E++){D[C]=D[C]||true}},suspendEmit:function(){this.emitSuspended=true},resumeEmit:function(){this.emitSuspended=false},emitEvent:function(C){var D;if(!this.emitSuspended){D=this.events[C];if(D!==true){D.emit.apply(D,Array.prototype.slice.call(arguments,1))}}},addReceiver:function(C,F,D){var E=this.events[C]||true;if(E===true){E=(this.events[C]=new B.Event(C,this))}E.addReceiver(F,D);return this},addReceivers:function(G){var F,D,C,I,H,E=Object.getKeys(G);for(F=0;(H=E[F]);F++){C=G[H];if(C.constructor!==Array){C=[C]}for(D=0;(I=C[D]);D++){this.addReceiver(H,I.receiver,I.scope)}}},removeReceiver:function(C,E,D){var F=this.events[C];if(F!==true){return F.removeReceiver(E,D)}return false},purgeReceivers:function(){var D,C;for(D in this.events){if(this.events.hasOwnProperty(D)){C=this.events[D];if(C!==true){C.purgeReceivers()}}}return this}};B.Event=function(C,D){this.scope=D;this.name=C;this.receivers=[];this.emitting=false};B.Event.prototype={addReceiver:function(C,D){var E;D=D||this.scope;if(this.getReceiverIndex(C,D)<0){E=this.createReceiver(C,D);if(this.emitting){this.receivers=this.receivers.slice(0)}this.receivers.push(E)}},createReceiver:function(C,D){return{handler:C,scope:D}},getReceiverIndex:function(C,F){var D,E=this.receivers,G;for(D=0;(G=E[D]);D++){if(G.handler===C&&G.scope===F){return D}}return -1},removeReceiver:function(D,F){var E=this.emitting?(this.receivers=this.receivers.slice(0)):this.receivers,C=this.getReceiverIndex(D,F),G=C>=0;if(G){E.splice(C,1)}return G},purgeReceivers:function(){this.receivers=[]},emit:function(){var D,E,C;if(this.receivers.length){C=Array.prototype.slice.call(arguments,0);this.emitting=true;for(D=0;(E=this.receivers[D]);D++){E.handler.apply(E.scope||this.scope||window,C)}this.emitting=false}}};return B}});$.registerModule({name:"hcom.common.modules.events",impl:function(){function C(E){return E||$.body}function D(){$(this).parents("form:first").trigger("submit")}function A(E){C(E).find(".hcomSubmitChange").on("change",D)}function B(E){A(E)}return{attachSubmitChange:A,attachAllEvents:B}}});$.registerModule({name:"hcom.common.modules.js_links",impl:function(A){return{init:function(){$.each($("#footer, #citylanding_welcomerewards, div.region_landing_why_book_with_us, div.country_landing_why_book_with_us, div.why_book_with_us, div.wr_module, div.wr_banner_below, div.wr_banner_above, div.BorderBox").find("a.js_link"),function(B,C){C.href=C.hash.substr(1);$(C).removeAttr("onclick")})}}}});$.registerModule({name:"hcom.common.modules.favorites",impl:function(A){return{init:function(){if($.browser.safari){$("a.hcomFavorites").remove()}else{$("a.hcomFavorites").on("click",function(B){if(!$.browser.opera){B.preventDefault()}$.bookmark(".profiles_toolbar a.hcomFavorites")})}}}}});$.registerModule({name:"hcom.common.modules.geolocation_message",impl:function(A){return{init:function(){var B=$(".geolocation_message");B.find(".close_block").on("click",function(C){B.next(".geolocation_message_on").andSelf().hide();$(this).trigger("geolocation:hiding")})}}}});$.registerModule({name:"hcom.common.modules.html",dependencies:["hcom.common.area.modules.rectangle","hcom.common.area.modules.point"],impl:function(){var A,B;return{init:function(){A=hcom.common.area.modules.rectangle;B=hcom.common.area.modules.point},centerBox:function(G,F,D){var H=$.browser.msie?$.win.scrollTop():0,C=(F===undefined?G.width():F)/2,E=(D===undefined?G.height():D)/2;G.css({top:String(Math.round($.win.height()/2-E+H))+"px",position:$.browser.msie?"absolute":"fixed"})},getDimensions:function(C){console.assert(C.is(":visible"));return new A.fromJQObject(C)},getViewportDimensions:function(){var C=($.win.width()-$("#g").width())/2,D=new B($.win.scrollLeft()+C,$.win.scrollTop());return new A(D,D.addCoords($.win.width()-C,$.win.height()))}}}});$.registerModule({name:"hcom.common.modules.seo_footer",impl:function(){var B={".toggle_top_destinations":".top_destinations",".toggle_change_language":".change_language",".toggle_global_sites":".global_sites",".toggle_top_countries":".top_countries"},A=$(".seo_footer"),C=function(E){var D="";$.each(B,function(H,I){var F=$(H,A),G=$(I,A);if(F.length){if(E.attr("class").match(F.attr("class"))){if(!F.attr("class").match("opened")){F.addClass("opened");G.show("slow");D=I}else{F.removeClass("opened");G.hide("slow")}}else{if(F.attr("class").match("opened")){F.removeClass("opened");G.hide("slow")}}}});return D};return{init:function(){A.find(".footer_links_container h3").on("click",function(D){C($(this));D.preventDefault()})}}}});$.registerModule({name:"hcom.common.modules.itemtoggler",impl:function(A){var B,D,C;function E(H){var G=$(this),J,I=null,F;for(J in C){if(C.hasOwnProperty(J)){if(G.is(J)){I=C[J];break}}}if(I!==null){if(H){H.preventDefault()}I.onClick(G)}}B=function(F){var I,H,G,J=this;this.cfg=$.extend({},D,F);if(C.hasOwnProperty(this.cfg.clickFilter)){throw ("duplicate clickFilter")}I=this.cfg.containers;if(I.length){this.$containers=$(I[0]);for(G=1;(H=I[G]);G++){this.$containers=this.$containers.add(H)}}C[this.cfg.clickFilter]=this;if(this.cfg.hasOwnProperty("init")){this.cfg.init()}$.doc.on("click",this.cfg.clickFilter,E);if(this.cfg.clickOnInit!==null){this.$containers.find(this.cfg.clickOnInit).each(function(){J.onClick($(this))})}return this};B.prototype={onClick:function(F){var G=this.cfg.findContainerFromClick.call(this,F);G.toggleClass(this.cfg.contractedClass)}};B.init=function(){C={};D={clickFilter:"a.hcomItemToggler",contractedClass:"hcomContracted",clickOnInit:null,findContainerFromClick:function(F){return F.parent()}}};return B}});$.registerModule({name:"hcom.common.modules.state",impl:function(){function C(){return this.name&&!this.disabled&&(this.checked||(/select|textarea|input/i.test(this.nodeName)&&!/submit|reset|button|radio|checkbox/i.test(this.type)))}function E(){return this.name&&(this.checked||(/select|textarea|input/i.test(this.nodeName)&&!/submit|reset|button|radio|checkbox/i.test(this.type)))}function B(){return this.name&&(/select|textarea|input/i.test(this.nodeName)&&!/submit|reset|button/i.test(this.type))}function A(){return jQuery.nodeName(this,"form")?jQuery.makeArray(this.elements):this}function D(F,G){if(F){G.prop("checked",true)}else{G.prop("checked",false)}}return{formSerialize:function(G,H){var F={};G.map(A).filter(H?E:C).map(function(M,N){var L=$(N),J,K,I;if(L.is("select")&&L.attr("multiple")){J=[];for(K=0,I=N.options.length;K<I;K++){if(N.options[K].selected){J.push(N.options[K].value)}}}else{J=L.val()}if(F.hasOwnProperty(N.name)){if(F[N.name].constructor!==Array){F[N.name]=[F[N.name]]}F[N.name].push(J)}else{F[N.name]=J||""}});return F},formRestore:function(G,F){F.map(A).filter(B).map(function(J,L){var I=$(L),H=I.prop("type"),K;if(G.hasOwnProperty(L.name)){K=G[L.name];if(K.constructor===String){if(H==="checkbox"||H==="radio"){D(I.val()===K,I)}else{if(I.is("select")){if(typeof K==="string"){I.val(K)}else{if(L.options.length<K){L.selectedIndex=K}}}else{I.val(K)}}}else{if(H==="checkbox"){D($.inArray(I.val(),K)>=0,I)}else{if(I.is("select")){I.val(K)}}}}else{if(H==="checkbox"||H==="radio"){D(false,I)}else{I.val("")}}})},formRestoreConditional:function(G,F){F.map(A).filter(B).map(function(J,L){var I=$(L),H=I.prop("type"),K=G[L.name];if(K>=""&&I.val()===""){if(K.constructor===String){if(H==="checkbox"){D(I.val()===K,I)}else{if(I.is("select")){if(K>0){if(L.options.length<K){L.selectedIndex=K}}else{I.val(K)}}else{I.val(K)}}}else{if(H==="checkbox"){D($.inArray(I.val(),K)>=0,I)}else{if(I.is("select")){I.val(K)}}}}})}}}});$.registerModule({name:"hcom.common.modules.toggle",extendsModule:"hcom.common.modules.emitter",impl:function(){var A;A=function(B){this.addEvents(A.OPEN_EVENT,A.CLOSE_EVENT,A.CHANGE_EVENT);this.onClickProxy_=$.proxy(this.onClick_,this);this.bound=false;this.config=!B?A.DEFAULT_CONFIG:$.extend({},A.DEFAULT_CONFIG,B);this.bind()};A.createInstance=function(B){return new A(B)};A.prototype={bind_:function(C){var B;if(this.bound!==C){this.bound=C;B=C?$.fn.on:$.fn.off;B.call($.body,"click",this.config.elementSelector,this.onClickProxy_)}},bind:function(){this.bind_(true)},unbind:function(){this.bind_(false)},getStateSpan_:function(C,B){var D=B||$(C);return D.find(this.config.stateIconSelector)},isOpened:function(C,B){var D=B||this.getStateSpan_(C);return !D.hasClass(this.config.closedStateClass)},toggleTarget_:function(E,D){var B,C=this;B=D?$.fn.hide:$.fn.show;B.call(E.next(),this.config.toggleSpeed,$.isFunction(this.config.animCallback)?function(){C.config.animCallback(!D)}:undefined)},setState_:function(B,E){var H,J,F=this.config.closedStateClass,G=this.config.openedStateClass,C,K,I,D;H=$(B);C=this.getStateSpan_(B,H);if(C.length){J=this.isOpened(B,C);if(J!==E){if(J){K=F;I=G}else{K=G;I=F}H.find(this.config.stateIconSelector).addClass(K).removeClass(I);this.toggleTarget_(H,J);D=J?"closed":"opened";this.emitEvent(D,H);this.emitEvent("change",D,H)}}},close:function(B){this.setState_(B,false)},open:function(B){this.setState_(B,true)},toggle:function(B){this.setState_(B)},onClick_:function(B){if(A.lastHandledEvent_!==B){A.lastHandledEvent_=B;this.toggle(B.currentTarget||B.target)}B.preventDefault()}};A.lastHandledEvent_=null;A.DEFAULT_CONFIG={elementSelector:".JS_toggle_next",stateIconSelector:".icon_sprite_open_close>span",closedStateClass:"closed",openedStateClass:"opened",toggleSpeed:"slow"};A.OPEN_EVENT="opened";A.CLOSE_EVENT="closed";A.CHANGE_EVENT="change";return A}});$.registerModule({name:"hcom.common.modules.print",impl:function(A){return{init:function(){if(window.print){$.doc.on("click",".hcomPrint",function(B){window.print();B.preventDefault()})}}}}});$.registerModule({name:"hcom.common.modules.popup",impl:function(A){var B={height:600,width:600,toolbar:0,scrollbars:1,status:1,resizable:1,left:0,top:0,center:1,fullscreen:0,href:""};function C(K){function F(O){var L,N={};for(var M=0;M<O.length;M++){L=O[M].split(":");if(B[L[0]]!==undefined&&L.length===2){if(L[0]==="href"){N[L[0]]=L[1]}else{N[L[0]]=L[1]*1}}}return N}var E=K.which?(K.which===1):(K.button===0);if(E){var H;var J=$(this),D=J.attr("rel");H=F((D||"").split(","));if(H.href===undefined){if(J.attr("href")===undefined){J=$(this).parents("a:first")}H=F((D||"").split(","))}H=$.extend({},B,H);if(H.fullscreen==="1"){H.height=screen.height;H.width=screen.width}if(H.center===1){H.top=(screen.height-(H.height+110))/2;H.left=(screen.width-H.width)/2}var G=J.attr("href")||H.href||"";var I=["height=",H.height,",width=",H.width,",toolbar=",H.toolbar,",scrollbars=",H.scrollbars,",status=",H.status,",resizable=",H.resizable,",left=",H.left,",screenX=",H.left,",top=",H.top,",screenY=",H.top];if(G.length>0){window.open(G,"popup",I.join("")).focus()}K.preventDefault()}}return{init:function(){$.doc.on("click",".hcomPopup",C)}}}});$.registerModule({name:"hcom.common.modules.dropdown",dependencies:["hcom.common.modules.emitter","hcom.common.modules.ie6popupplate"],impl:function(B){var C,A;A=function(){var D,E;this.opened=null;for(D=0;(E=arguments[D]);D++){this.addMenu(E)}};A.prototype={addMenu:function(D){if(D instanceof C){D.addReceiver("open",this.onOpen,this);D.addReceiver("close",this.onClose,this)}else{console.error("invalid argument")}return this},onOpen:function(D){if(this.opened&&this.opened!==D){this.opened.hide()}this.opened=D},onClose:function(D){if(this.opened===D){this.opened=null}}};C=$.extendCls(hcom.common.modules.emitter,{constructor:function(D){C.superclass.constructor.call(this);this.addEvents("open","close");this.cfg=$.extend({},C.defaultConfig,D);if(!D.container){this.cfg.container=D.menu.parent()}this.state={active:false,hover:false,focusTS:0};this.ie6plate=new hcom.common.modules.ie6popupplate({$aligner:this.cfg.menu});this.bind()},isInsideEvent:function(E){var D=E.target||E.srcElement;return $.inArray(this.cfg.container[0],$(D).parents())>=0},bind:function(){var D=this.cfg,E=this;D.trigger.on("click."+D.ns,function(F){E.onTriggerClick(F)}).on("focus."+D.ns,function(F){E.onTriggerFocus(F)});if(!!D.hoverClass&&$.browser.msie&&$.browser.version<=6){D.trigger.hover(function(F){E.onIE6Hover(true,this)},function(F){E.onIE6Hover(false,this)})}},onIE6Hover:function(E,D){if(this.state.hover!==E){this.state.hover=E;$(D).parent()[E?"addClass":"removeClass"](this.cfg.hoverClass)}},onDocumentClick:function(D){if(this.state.active&&!this.isInsideEvent(D)){this.hide()}},onDocumentFocus:function(D){if(this.state.active&&D.target!==document&&!this.isInsideEvent(D)){this.hide()}},onDocumentKeyUp:function(D){if(this.state.active&&!this.isInsideEvent(D)){this.hide()}},onTriggerClick:function(D){var E=this.state,F;if(this.cfg.allowDefault===null||this.cfg.allowDefault(D.target)!==true){D.preventDefault()}F=new Date().getTime()-E.focusTS;if(F>800){this.setActive(!E.active)}},onTriggerFocus:function(D){this.state.focusTS=new Date().getTime();this.show()},setActive:function(J){var I=this.state,F=this.cfg,E=!(F.menu&&F.menu.length),G,H,D,K;if(J!==I.active&&!(J&&E)){I.active=J;this.emitEvent(J?"open":"close",this);H="focus."+F.ns;G="click."+F.ns;D="keyup."+F.ns;if(J){K=this;$.doc.on(H,function(L){K.onDocumentFocus(L)}).on(G,function(L){K.onDocumentClick(L)}).on(D,function(L){K.onDocumentKeyUp(L)})}else{$.doc.off(H).off(G).off(D)}F.container[J?"addClass":"removeClass"](F.activeClass);this.ie6plate[J?"show":"hide"]()}},show:function(){this.setActive(true)},hide:function(){this.setActive(false)}});C.defaultConfig={ns:"DDMenu",allowDefault:null,hoverClass:null};return{menu:C,bar:A}}});$.registerModule({name:"hcom.common.modules.calendar_dp",dependencies:["hcom.common.modules.ie6popupplate"],impl:function(){var B=/\s*min_date_([0-9]{4}-[0-9]{2}-[0-9]{2})\s*/,C;function A(F){var G=F.split("-");return new Date(G[0],G[1]-1,G[2])}function E(H){var G,F=hcom.configuration.DEFAULT_DATE_FORMAT.toLowerCase().replace("yy","y").replace("yy","y");G=$("input.hcomDate",H).not(".hasDatepicker");G.each(function(K,L){var I=$(L),J=I.parents(":eq(3)");I.datepicker({numberOfMonths:2,ie6plate:C,minDate:I.is(".hcomCheckout,.hcomCheckoutca_")?"+1D":(I.attr("class").match(B)?A(I.attr("class").match(B)[1]):"0"),dateFormat:F,firstDay:hcom.configuration.FIRST_DAY_OF_WEEK,disableDefaultDaySelect:$.trim(I.val())===F,hoverStateCell:true,maxDate:"+"+hcom.configuration.MAX_ADVANCE_DAYS+"D",maxDateInterval:28,isArrival:I.is(".hcomCheckin,.hcomCheckinca_,.hcomCheckinnac_"),isDeparture:I.is(".hcomCheckout,.hcomCheckoutca_,.hcomCheckoutnac_"),$arrInp:$("input.hcomDate.hcomCheckin,input.hcomDate.hcomCheckinca_,input.hcomDate.hcomCheckinnac_",J),$depInp:$("input.hcomDate.hcomCheckout,input.hcomDate.hcomCheckoutca_,input.hcomDate.hcomCheckoutnac_",J)})});$.doc.on("click","input.hcomDate + span.hcomDate,input.hcomDate + img.hcomDate",function(){var I=$(this);E(I.parents(":eq(3)"));$.datepicker.showDatepicker(I.siblings("input.hcomDate")[0])})}function D(){var F=$.extendCls(hcom.common.modules.ie6popupplate,{getAlignment:function(G){var H=F.superclass.getAlignment.call(this,G);return{top:H.top+15,left:H.left+8,width:H.width-16,height:H.height-22}}});C=new F({z_index:99})}return{init:function(){D();E();$.doc.on("focus click","input.hcomDate,span.hcomDatePicker",function(F){E();$.datepicker.showDatepicker(this)});return false},bindDatePickers:E}}});$.registerModule({name:"hcom.common.modules.popdiv",impl:function(R){var T,E,Q={top:1,right:2,bottom:3,left:4},H={delayIn:1,transIn:2,on:3,delayOut:4,transOut:5,off:6,waitClose:7},O,C;function N(b,c){this.x=b;this.y=c}function Z(d,b){var c,g=b.length-1,e,f=0;for(c=0;c<g;c++){if(((b[c].y<=d.y)&&(b[c+1].y>d.y))||((b[c].y>d.y)&&(b[c+1].y<=d.y))){e=(d.y-b[c].y)/(b[c+1].y-b[c].y);if(d.x<b[c].x+e*(b[c+1].x-b[c].x)){f++}}}return(f%2)===1}function X(c,b){c.css("display",b?"block":"none")}function L(b){if(b){window.clearTimeout(b)}}function V(){return null}function G(){var b=this.d.callbacks,d=this.d.callbackScope,c;$.map(E,d?function(e){if(b.hasOwnProperty(e)){c=function(){arguments.callee.callback.apply(d,arguments)};c.callback=b[e];b[e]=c}else{b[e]=V}}:function(e){if(!b.hasOwnProperty(e)){b[e]=V}})}function M(d,g,e,f,c){if(c){return[new N(d-c,g-c),new N(d+e+c,g-c),new N(d+e+c,g+f+c),new N(d-c,g+f+c)]}else{return[new N(d,g),new N(d+e,g),new N(d+e,g+f),new N(d,g+f)]}}function P(c){var b=M.call(this,c.thumbLeft,c.thumbTop,c.thumbWidth,c.thumbHeight,5);b.push(b[0]);return b}function D(e){var d=M.call(this,e.left,e.top,e.width,e.height),c=P.call(this,e),b,f=e.alignment;if(f===Q.top){b=[c[0],c[3],c[2],c[1],d[2],d[1],d[0],d[3]]}else{if(f===Q.right){b=[c[0],c[1],d[0],d[1],d[2],d[3],c[2],c[3]]}else{if(f===Q.bottom){b=[c[3],c[0],c[1],c[2],d[1],d[2],d[3],d[0]]}else{if(f===Q.left){b=[d[0],d[1],c[0],c[1],c[2],c[3],d[2],d[3]]}}}}b.push(b[0]);return b}function Y(c){var b=this;if(c){$.doc.on("mousemove."+this.d.namespace,function(d){if(!Z({x:d.pageX,y:d.pageY},b.d.cHotSpot)){b.d.cHotSpotMouseOutCallback.call(b)}else{if(b.d.cHotSpotMouseInCallback){b.d.cHotSpotMouseInCallback.call(b)}}})}else{$.doc.off("mousemove."+this.d.namespace)}}function S(f){var e=new Date().getTime(),c=e-this.d.transStart,d=this.d.transLen,b=(d>0?Math.min(1,c/this.d.transLen):1);return Math.round(f*b)}function A(){var b=this.d.state;if(b===H.transIn||(b===H.delayIn&&!this.d.fadeEnabled)){this.d.state=H.on;this.d.callbacks.activate()}}function U(){if(this.d.mouseWithinHotspot===true){this.d.mouseWithinHotspot=false;if(this.d.state===H.delayIn){Y.call(this,false);this.d.state=H.off;L(this.d.cDelayInTimerId);this.d.cDelayInTimerId=null;this.d.callbacks.setThumbOverlayAnim(false,this.d.$cThumb);this.d.callbacks.setThumbOverlay(false,this.d.$cThumb)}}}function W(){var c=this.d.state;if(c===H.transOut||(c===H.delayOut&&!this.d.fadeEnabled)){this.d.state=H.off;this.d.setVisible.call(this,this.d.$container,false);this.d.callbacks.destroy();Y.call(this,false);this.d.cHotSpotMouseInCallback=null}else{if(c===H.waitClose){var b=this;this.d.callbacks.destroy();Y.call(this,false);this.d.thumbnailCoords=this.d.waitThumbnailCoords;this.d.hotspotCoords=this.d.waitHotspotCoords;this.d.cHotSpot=this.d.thumbnailCoords;this.d.cHotSpotMouseOutCallback=U;this.d.$cThumb=this.d.$cWaitThumb;this.d.state=H.delayIn;Y.call(this,true);if(!this.d.fadeEnabled){this.d.transLen=0}if(this.d.transLen<this.d.delayIn){this.d.cDelayInTimerId=window.setTimeout(function(){C.call(b)},this.d.delayIn-this.d.transLen)}else{C.call(this)}}}}function B(d,b){var e=new Date().getTime(),c=this;this.d.transStart=e;this.d.transLen=b;if(d){this.d.$container.stop().fadeTo(b,1,function(){c.d.transStart=null;c.d.transLen=null;A.call(c)})}else{this.d.$container.stop().fadeTo(b,0,function(){c.d.transStart=null;c.d.transLen=null;W.call(c)})}}function J(){if(this.d.mouseWithinHotspot===false){this.d.mouseWithinHotspot=true;var b=this.d.state,c;if(b===H.delayOut){this.d.cHotSpotMouseInCallback=null;this.d.cHotSpot=this.d.hotspotCoords;L(this.d.cDelayOutTimerId);this.d.cDelayOutTimerId=null;this.d.state=H.on}else{if(b===H.transOut){this.d.state=H.transIn;this.d.callbacks.setThumbOverlay(true,this.d.$cThumb);this.d.cHotSpot=this.d.hotspotCoords;c=S.call(this,this.d.fadeInTime);B.call(this,true,c)}}}}function F(){if(this.d.state===H.delayOut){this.d.cHotSpot=this.d.thumbnailCoords;this.d.cDelayOutTimerId=null;this.d.cHotSpotMouseInCallback=J;this.d.callbacks.passivate();this.d.callbacks.setThumbOverlay(false,this.d.$cThumb);if(this.d.fadeEnabled){this.d.state=H.transOut;B.call(this,false,this.d.fadeOutTime)}else{this.d.setVisible.call(this,this.d.$container,false);W.call(this)}}}function a(){if(this.d.mouseWithinHotspot===true){this.d.mouseWithinHotspot=false;var c=this.d.state,b=this,d;if(c===H.transIn){this.d.state=H.transOut;this.d.callbacks.setThumbOverlay(false,this.d.$cThumb);this.d.cHotSpot=this.d.thumbnailCoords;this.d.cHotSpotMouseInCallback=J;d=S.call(this,this.d.fadeOutTime);B.call(this,false,d)}else{if(c===H.on){this.d.cHotSpotMouseInCallback=J;this.d.cHotSpot=this.d.hotspotCoords;this.d.state=H.delayOut;this.d.cDelayOutTimerId=window.setTimeout(function(){F.call(b)},this.d.delayOut)}}}}C=function(){if(this.d.state===H.delayIn){this.d.cDelayInTimerId=null;if(this.d.fadeEnabled){this.d.state=H.transIn}this.d.cHotSpot=this.d.hotspotCoords;this.d.cHotSpotMouseOutCallback=a;this.d.mouseWithinHotspot=true;this.d.$container.attr("style",this.d.containerStyle);this.d.callbacks.initialize();this.d.callbacks.setThumbOverlayAnim(false,this.d.$cThumb);if(this.d.fadeEnabled){this.d.$container.css("opacity","0");this.d.setVisible.call(this,this.d.$container,true);B.call(this,true,this.d.fadeInTime)}else{this.d.setVisible.call(this,this.d.$container,true);A.call(this)}}else{}};function I(){var b=this.d;if(b.mouseWithinHotspot){b.mouseWithinHotspot=false;if(b.state===H.waitClose){b.callbacks.setThumbOverlayAnim(false,b.$cWaitThumb);b.callbacks.setThumbOverlay(false,b.$cWaitThumb);b.cHotSpot=b.thumbnailCoords;b.state=H.transOut;b.cHotSpotMouseOutCallback=a;b.cHotSpotMouseInCallback=J;delete b.$cWaitThumb;delete b.waitThumbnailCoords;delete b.waitHotspotCoords}}}function K(b){if(b===H.delayIn){L(this.d.cDelayInTimerId);this.d.cDelayInTimerId=null}else{if(b===H.delayOut){L(this.d.cDelayOutTimerId);this.d.cDelayOutTimerId=null;this.d.callbacks.passivate()}}}T=function(b){this.d=$.extend({},O,b);this.d.containerStyle=this.d.$container.attr("style");G.call(this,this.d.callbacks,this.d.callbackScope)};T.init=function(){E=["setThumbOverlay","setThumbOverlayAnim","initialize","destroy","activate","passivate"];O={delayIn:800,delayOut:700,fadeInTime:300,fadeOutTime:300,fadeEnabled:false,state:H.off,transStart:null,transLen:null,cDelayInTimerId:null,cDelayOutTimerId:null,callbackScope:null,callbacks:{},setVisible:X};if(O.fadeEnabled&&$.browser.msie&&$.browser.version<7){O.fadeEnabled=false;console.info("popdiv fading disabled, IE6 detected")}};T.prototype={states:H,alignments:Q,currentState:function(){return this.d.state},onThumbnailHoover:function(d,c,b){var g=this.d.state,f=this;if(g===H.off){this.d.thumbnailCoords=P.call(this,b);this.d.hotspotCoords=D.call(this,b);this.d.cHotSpot=this.d.thumbnailCoords;this.d.cHotSpotMouseOutCallback=U;this.d.cHotSpotMouseInCallback=null;this.d.mouseWithinHotspot=true;this.d.$cThumb=c;Y.call(this,true);this.d.callbacks.setThumbOverlay(true,c);this.d.callbacks.setThumbOverlayAnim(true,c);this.d.state=H.delayIn;L(this.d.cDelayInTimerId);this.d.cDelayInTimerId=window.setTimeout(function(){C.call(f)},this.d.delayIn)}else{if(!Z({x:d.pageX,y:d.pageY},this.d.thumbnailCoords)&&(g!==H.waitClose)){this.d.state=H.waitClose;Y.call(this,false);this.d.waitThumbnailCoords=P.call(this,b);this.d.waitHotspotCoords=D.call(this,b);this.d.cHotSpot=this.d.waitThumbnailCoords;this.d.cHotSpotMouseOutCallback=I;this.d.cHotSpotMouseInCallback=null;this.d.mouseWithinHotspot=true;this.d.$cWaitThumb=c;Y.call(this,true);K.call(this,g);if(g!==H.transOut){this.d.callbacks.setThumbOverlay(false,this.d.$cThumb)}if(this.d.fadeEnabled){if(g!==H.transOut){var e=(g===H.transIn?S.call(this,this.d.fadeOutTime):this.d.fadeOutTime);B.call(this,false,e)}}else{this.d.setVisible.call(this,this.d.$container,false);W.call(this)}this.d.callbacks.setThumbOverlay(true,c);this.d.callbacks.setThumbOverlayAnim(true,c)}}},destroy:function(){var b=this.d.state;this.d.state=H.destroy;if(b!==H.off){Y.call(this,false);this.d.cHotSpotMouseInCallback=null;if(b===H.transIn||b===H.transOut||b===H.waitClose){if(this.d.fadeEnabled){this.d.$container.stop()}if(b===H.waitClose){this.d.callbacks.setThumbOverlayAnim(false,this.d.$cWaitThumb);this.d.callbacks.setThumbOverlay(false,this.d.$cWaitThumb);this.d.$cWaitThumb=null}}K.call(this,b);if(b===H.delayIn){this.d.callbacks.setThumbOverlayAnim(false,this.d.$cThumb)}else{this.d.setVisible.call(this,this.d.$container,false);this.d.callbacks.destroy()}if(b===H.transIn||b===H.on||b===H.delayOut){this.d.callbacks.setThumbOverlay(false,this.d.$cThumb)}}},forceClose:function(){this.destroy();this.d.state=H.off},forceOpen:function(){console.debug("popDiv.%s - forceOpen",this.d.namespace);if(this.d.state===H.delayIn){L(this.d.cDelayInTimerId);C.call(this)}}};return T}});$.registerModule({name:"hcom.common.modules.prerender",impl:function(){var G=false,F=false,A=[];function E(H){$.body.append(H)}function D(){$.each(A,function(H,I){E(I)})}function C(H){if(!G){return }D();G=false}function B(H){A.push(H);if(!F){document.addEventListener("webkitvisibilitychange",C,false);F=true}}return{init:function(){},append:function(H){if(H.content!==undefined){if(document.webkitVisibilityState!=="prerender"){E(H.content)}else{G=true;B(H.content)}}}}}});$.registerModule({name:"hcom.common.modules.searchpopdiv",dependencies:["hcom.common.modules.popdiv"],impl:function(C){var D,A;function B(){return{setThumbOverlay:this.popDivSetThumbOverlay,setThumbOverlayAnim:this.popDivSetThumbOverlayAnim,initialize:this.popDivInitialize,activate:this.popDivActivate,passivate:this.popDivPassivate,destroy:this.popDivDestroy}}D=$.extendCls(hcom.common.modules.popdiv,{constructor:function(F){var E=(this.config=$.extend({},F,A));this.$popDiv=$(E.$container);this.$popupPlate=($.browser.msie&&($.browser.version<7))?$(E.plateContainer):null;this.cHotelId=null;this.cPosition=null;if(E.clickFilter){$.doc.on("click",E.clickFilter,function(){event.preventDefault();return false})}$.extend(E,{callbacks:B.call(this),callbackScope:this});D.superclass.constructor.call(this,E);if(!E.manualEventAttachment){this.attachEvents()}},thumbDim:{height:64,width:64},attachEvents:function(){var F=this,H=function(I){F.handleMouseOver(I)},E=function(I){F.forceOpen()},G=function(I){F.forceClose()};$.doc.on("mouseover",this.config.mouseoverFilter,H);if(this.config.closeSelect){$.doc.on("click",this.config.closeSelect,G)}$.map(this.config.clickFilters,function(I){$.doc.on("click",I,E)});return this},handleMouseOver:function(F,E){var G=E||$(F.target);this.onThumbnailHoover(F,G,(this.cPosition=this.calculatePopDivPosition(G)))},popDivSetThumbOverlay:function(F,G){var E=this.getGadgetsFromThumb(G);E.$promptIcon[F?"hide":"show"]();E.$overlay[F?"show":"hide"]()},popDivSetThumbOverlayAnim:function(E,G){var F=G.parent().parent().find("div.thumbnail_popDiv_animation:first");F[E?"show":"hide"]()},setPopDiv:function(E){this.$popDiv.css({top:E.top+"px",left:E.left+"px"})},plateOffsets:null,setPlate:function(F){var E=["top","left","width","height"],H,G,I={top:F.top,left:F.left,width:this.popDivDim.width,height:this.popDivDim.height};if(this.$popupPlate){if(this.plateOffsets){for(H=0;(G=E[H]);H++){I[G]+=this.plateOffsets[G]}}for(H=0;(G=E[H]);H++){I[G]=I[G]+"px"}this.$popupPlate.css(I).show()}},popDivInitialize:function(F,G){var E=this.cPosition;this.setPopDiv(E);this.setPlate(E);this.setTail(E)},popDivActivate:function(E,F){},popDivPassivate:function(E,F){},popDivDestroy:function(E,F){}});D.init=function(){A={plateContainer:"#popupPlate",manualEventAttachment:false}};return D}});$.registerModule({name:"hcom.common.modules.slideshow",depends:["hcom.common.modules.emitter"],impl:function(D){var A,C,B,E;A=$.extendCls(hcom.common.modules.emitter,{constructor:function(F){$.extend(this,{config:$.extend({},C,F),started:false,slideTimer:null,currentSlide:null,fadeState:B.transparent,resumeTransition:false,fadeStarted:null,slideStates:{},restartTimer:false,preloadingSince:0});A.superclass.constructor.call(this);this.addEvents("change","start","stop");this.resetImage();if(this.config.fade){this.config.$image.hide()}if(this.config.autoStart){this.started=true;this.changeSlide(this.getNextSlide(),false)}},isStarted:function(){return this.started},preloadSlide:function(F){var G=this;if(!this.slideStates.hasOwnProperty(F)){this.slideStates[F]=E.preloading;$.preloadAsyncImage(this.config.images[F],function(H,I){G.changeCallback(F,H,I)})}},slidePreloaded:function(G,F,H){this.slideStates[G]=E[F?"failed":"preloaded"];if(this.resumeTransition===G){this.continueTransition(H);this.resumeTransition=false}},changeCallback:function(G,F,H){if(G!==undefined){this.slidePreloaded(G,F,H);if(this.started){this.startPlayTimer()}}else{if(this.slideStates[this.currentSlide]===E.preloaded||this.preloadingSince>=3){this.changeSlide(this.getNextSlide(),true);this.preloadingSince=0}else{if(this.slideStates[this.currentSlide]!==E.preloaded){this.preloadingSince++}}}},stopPlayTimer:function(){if(this.slideTimer){clearInterval(this.slideTimer);this.slideTimer=null}},startPlayTimer:function(){var F=this;this.stopPlayTimer();this.slideTimer=setInterval(function(){F.changeCallback()},this.config.interval)},getPrevSlide:function(){var F=this.currentSlide;if(F===null||--F<0){F=this.config.images.length-1}return F},getNextSlide:function(){var F=this.currentSlide;if(F===null||++F>=this.config.images.length){F=0}return F},start:function(){var F=this.config.images.length>1;if(!this.started){this.started=F;if(this.currentSlide===null){this.changeSlide(this.getNextSlide(),!F)}else{if(F){this.startPlayTimer()}}if(F){this.emitEvent("start")}}},stop:function(){if(this.started){this.stopPlayTimer();this.started=false;this.emitEvent("stop")}},togglePlay:function(){if(this.started){this.stop()}else{this.start()}},gotoNext:function(){this.changeSlide(this.getNextSlide())},gotoPrev:function(){this.changeSlide(this.getPrevSlide())},continueTransition:function(M){var K=this,L,H,G,F=function(){K.fadeState=B.fadeIn;K.fadeStarted=new Date().getTime();K.config.$image.fadeIn(K.config.fade,function(){K.fadeInComplete()})};if(this.fadeState===B.transparent){G=this.slideStates[this.currentSlide];if(G===E.preloaded){if(M){var J=this.config.$image.parent(":first"),I;M.css("display",this.config.$image.css("display")).css("opacity",this.config.$image.css("opacity"));this.config.$image.remove();I=$(">*",J);if(this.config.imgNumber!==undefined&&I.length>0){$(I.get(this.config.imgNumber)).before(M)}else{J.append(M)}this.config.$image=M;F()}else{if(this.config.images[this.currentSlide]===this.config.$image.attr("src")){F()}else{this.config.$image.one("load",F).attr("src",this.config.images[this.currentSlide])}}}else{if(G===E.preloading){this.resumeTransition=this.currentSlide}}}else{if(this.fadeState===B.fadeIn){this.config.$image.stop();L=new Date().getTime();H=L-this.fadeStarted;this.fadeStarted=L-this.config.fade+H;this.fadeState=B.fadeOut;this.config.$image.fadeOut(H,function(){K.fadeOutComplete()})}else{if(this.fadeState===B.opaque){this.fadeState=B.fadeOut;this.config.$image.fadeOut(this.config.fade,function(){K.fadeOutComplete()})}}}},resetImage:function(){this.fadeState=B.transparent;this.config.$image.css({opacity:"",display:"none"})},fadeOutComplete:function(){this.resetImage();this.continueTransition()},fadeInComplete:function(){this.fadeState=B.opaque;if(this.restartTimer){this.restartTimer=false;this.startPlayTimer()}},changeSlide:function(F,G){var H;if(this.currentSlide!==F&&F>=0&&F<this.config.images.length){H=this.currentSlide;this.currentSlide=F;this.preloadSlide(F);this.preloadSlide(this.getNextSlide());this.emitEvent("change",H,F);this.restartTimer=this.started&&!G;if(this.restartTimer){this.stopPlayTimer()}if(this.config.fade){this.continueTransition()}else{this.config.$image.attr("src",this.config.images[this.currentSlide])}}},destroy:function(){this.stopPlayTimer();this.purgeReceivers()}});A.init=function(){C={autoStart:true,interval:3000,fade:600};B={opaque:0,fadeIn:1,fadeOut:2,transparent:3};E={failed:0,preloading:1,preloaded:2}};return A}});$.registerModule({name:"hcom.common.modules.hotelimagepopdiv",dependencies:["hcom.common.modules.searchpopdiv","hcom.common.modules.slideshow","hcom.common.modules.ie6popupplate"],impl:function(B){var A,D,G,F,J,C=1,H=2,E=3,I=4;F=$.extendCls(hcom.common.modules.ie6popupplate,{getAlignment:function(L){var K=this;if(!K.$alignerDiv){K.$alignerDiv=$(".hcom_popdiv_content:first",L);if(!K.$alignerDiv.length){K.$alignerDiv=L}}var M=F.superclass.getAlignment.call(K,K.$alignerDiv);return{top:M.top-2,left:M.left-2,width:M.width+4,height:M.height+4}}});D=function(K){this.records=K&&K.data||null};D.prototype={get:function(K){return this.records&&this.records.hasOwnProperty(K)?this.records[K]:null},load:function(K){this.records=K}};A=$.extendCls(hcom.common.modules.searchpopdiv,{constructor:function(L){var K=this;L=$.extend({},G,L);K.tailId=K.tailPosition.center;K.hotelId=null;K.slideShow=null;K.ssControlVisible=true;J=new F();A.superclass.constructor.call(K,L)},popDivDim:{width:358,height:315},thumbDim:{width:76,height:76},calculatePopDivPosition:function(X){var a=this,i,h,Q=hcom.locale.direction==="RTL",T=X.offset(),k=T.left,g=T.top,Z=k+a.thumbDim.width,j=g+a.thumbDim.height,L=$.win.height(),Y=$.win.width(),O=$.doc.scrollTop(),f=$.doc.scrollLeft(),R=O+L,d=g+Math.round(a.thumbDim.height/2),S=k+Math.round(a.thumbDim.height/2),W=Math.round(a.popDivDim.height/2),M=Math.round(a.popDivDim.width/2),N=k-f,b=g-O,P=f+Y-Z,U=O+L-j,V,c,e,K;if(Q){if(N>a.popDivDim.width){c=C}else{if(P>a.popDivDim.width){c=H}else{if(b>a.popDivDim.height){c=E}else{if(U>a.popDivDim.height){c=I}else{K=Math.max(Math.max(P,N),Math.max(b,U));if(b>=K){c=E}else{if(U>=K){c=I}else{if(N>=K){c=C}else{c=H}}}}}}}}else{if(P>a.popDivDim.width){c=H}else{if(N>a.popDivDim.width){c=C}else{if(b>a.popDivDim.height){c=E}else{if(U>a.popDivDim.height){c=I}else{K=Math.max(Math.max(P,N),Math.max(b,U));if(b>=K){c=E}else{if(U>=K){c=I}else{if(P>=K){c=H}else{c=C}}}}}}}}switch(c){case H:if(R-d<W&&g-O>a.popDivDim.height){i=g-a.popDivDim.height+a.thumbDim.height;V=a.tailPosition.left_bottom}else{if(d-O<W&&R-j>a.popDivDim.height){i=j-a.thumbDim.height;V=a.tailPosition.left_top}else{i=d-W;V=a.tailPosition.left_middle}}h=Z+7;e=a.alignments.right;break;case C:if(R-d<W&&g-O>a.popDivDim.height){i=g-a.popDivDim.height+a.thumbDim.height;V=a.tailPosition.right_bottom}else{if(d-O<W&&R-j>a.popDivDim.height){i=j-a.thumbDim.height;V=a.tailPosition.right_top}else{i=d-W;V=a.tailPosition.right_middle}}h=k-a.popDivDim.width-7;e=a.alignments.left;break;case E:i=g-a.popDivDim.height-7;h=S-M;V=a.tailPosition.bottom_middle;e=a.alignments.top;break;case I:i=j+7;h=S-M;V=a.tailPosition.top_middle;e=a.alignments.bottom;break}return{top:i,left:h,width:a.popDivDim.width,height:a.popDivDim.height,thumbTop:T.top,thumbLeft:T.left,thumbWidth:a.thumbDim.width,thumbHeight:a.thumbDim.height,alignment:e,tail:V}},attachEvents:function(){var K=this,M=K.config.buttonSelectors;M.prev.$dom=$(M.prev.selector);M.stop.$dom=$(M.stop.selector);M.play.$dom=$(M.play.selector);M.next.$dom=$(M.next.selector);M.prev.$dom.on("click",function(N){K.onPrevClick(N)});M.stop.$dom.on("click",function(N){K.onPauseClick(N)});M.play.$dom.on("click",function(N){K.onPauseClick(N)});M.next.$dom.on("click",function(N){K.onNextClick(N)});if($.browser.msie&&$.browser.version<7){var L="img";$.each([["prev","Prev"],["stop","Stop"],["play","Play"],["next","Next"]],function(N,O){M[O[0]].$dom.on("mouseenter.himg mouseleave.himg",function(P){$(this).toggleClass(L+O[1]+"_hover")})})}A.superclass.attachEvents.call(K)},getHotelIdFromThumbId:function(K){return parseInt(K.substring(7),10)},getImageFromEvent:function(M){var K=$(M.target),L=K.is("img")?K:$("img",M.relatedTarget);L=L.is("img")?L:$("img:first",L.parent());return L[0]},handleMouseOver:function(L){var K=this,M=K.getImageFromEvent(L);K.hotelId=K.getHotelIdFromThumbId(M.id);A.superclass.handleMouseOver.call(K,L,$(M))},getGadgetsFromThumb:function(L){var K=L.parents("div:first");return{$promptIcon:K.find("div.photoPrompt:first"),$overlay:K.find("div.thumbnail_popDiv_overlay:first")}},plateOffsets:{top:12,left:21,width:-30,height:-28},tailPosition:{left_top:"left_top",left_bottom:"left_bottom",left_middle:"left_middle",right_top:"right_top",right_bottom:"right_bottom",right_middle:"right_middle",top_middle:"top_middle",bottom_middle:"bottom_middle"},setTail:function(K){this.$popDiv.children(".arrow:eq(0)").removeClass(this.tailId||"").addClass(K.tail);this.tailId=K.tail},setSlideshowControlsVisible:function(O){var L,N,K,M=this.config.buttonSelectors;if(this.ssControlVisible!==O){this.ssControlVisible=O;L=Object.getKeys(M);for(N=0;(K=L[N]);N++){$(M[K].selector)[O&&M[K].visible?"show":"hide"]()}}},popDivInitialize:function(K,P){var L=this,O=L.config.store.get(L.hotelId),N,M;setTimeout(function(){J.show(L.$popDiv)},0);$(L.config.titleSelect).text(O.name||"-");$(L.config.maxSlideNumSelect).text(O.imgURLs.length);$(L.config.descriptionLinkSelect).attr("href",O.href);A.superclass.popDivInitialize.call(L);if(O){N=$("#imagePopImage img:eq(0)");L.setSlideshowControlsVisible(O.imgURLs.length>1);L.slideShow=(M=new hcom.common.modules.slideshow({autoStart:false,images:O.imgURLs,$image:N,imgNumber:$("#imagePopImage > *").index(N[0])}));M.addReceivers({change:{receiver:L.onSlideChange,scope:L},start:{receiver:L.onSlideStart,scope:L},stop:{receiver:L.onSlideStop,scope:L}})}},setStopButton:function(L){var K=this.config.buttonSelectors;K.stop.visible=L;K.play.visible=!L;K.stop.$dom[L?"show":"hide"]();K.play.$dom[!L?"show":"hide"]()},onSlideStart:function(){this.setStopButton(true)},onSlideStop:function(){this.setStopButton(false)},onSlideChange:function(L,K){$(this.config.currentSlideNumSelect).text(K+1)},relayClickToSlideShow:function(L,M){var K=this.slideShow;if(L){L.preventDefault()}if(K){K[M].call(K)}},onNextClick:function(K){this.relayClickToSlideShow(K,"gotoNext")},onPrevClick:function(K){this.relayClickToSlideShow(K,"gotoPrev")},onPauseClick:function(K){this.relayClickToSlideShow(K,"togglePlay")},popDivActivate:function(K,L){if(this.slideShow){this.slideShow.start()}},popDivPassivate:function(K,L){if(this.slideShow){this.slideShow.stop()}},popDivDestroy:function(K,L){J.hide();if(this.slideShow){this.slideShow.destroy()}this.slideShow=null}});A.init=function(){G={eventNameSpace:"himg",mouseoverFilter:"img.imagePopDivThumb,div.photoPrompt",clickFilters:["div.photoPopDiv_overlay","div.photoPopDiv_animation"],buttonSelectors:{stop:{selector:"#imgStop",visible:true},play:{selector:"#imgPlay",visible:false},prev:{selector:"#imgPrev",visible:true},next:{selector:"#imgNext",visible:true}},closeSelect:"#forceClose",currentSlideNumSelect:"#slideNumCurrent",maxSlideNumSelect:"#slideNumMax",titleSelect:"#imagePopHotelname",descriptionLinkSelect:"#popDivFullDescription"}};A.JSONStore=D;return A}});$.registerModule({name:"hcom.common.modules.simplepopdiv",impl:function(D){var F={TOP_CENTER:1,RIGHT_CENTER:2,BOTTOM_CENTER:3,LEFT_CENTER:4,BOTTOM_LEFT:5,BOTTOM_RIGHT:6,BOTTOM_RIGHT_RTL:7};function E(H){this.setVisible(false,H)}function B(H){this.currentTarget=H.target;if(this.autoPosition){this.$positionGuide=$(H.target)}this.setVisible(true,H)}function C(K,I,J,N,M){var L,H,O;if(I.constructor!==Array){I=[I]}for(L=0;(H=I[L]);L++){if(H instanceof $){H.on(J,N)}else{O=M?$(H):$(H,K);O.on(J,N)}}}function A(){var L=this.$positionGuide,K=L.offset(),H={top:K.top+Math.round(L.outerHeight()/2),left:K.left+Math.round(L.outerWidth()/2)},J,I;if(this.positioningType===F.BOTTOM_CENTER){J=H.top-this.$pd.height();I=H.left-Math.round(this.$pd.width()/2)}else{if(this.positioningType===F.BOTTOM_LEFT){J=K.top-this.$pd.outerHeight(true);I=H.left-Math.round(this.$pd.outerWidth(true)/2)}else{if(this.positioningType===F.BOTTOM_RIGHT){J=K.top-this.$pd.outerHeight(true);I=K.left-Math.round(this.$pd.outerWidth())+40}else{if(this.positioningType===F.BOTTOM_RIGHT_RTL){J=K.top-this.$pd.outerHeight(true);I=H.left-Math.round(this.$pd.outerWidth(true))+Math.round(L.outerWidth()/2)}else{if(this.positioningType===F.RIGHT_CENTER){J=H.top-Math.round(this.$pd.outerHeight()/2);I=K.left+L.outerWidth()+20}else{if(this.positioningType===F.LEFT_CENTER){J=H.top-Math.round(this.$pd.outerHeight()/2);I=K.left-this.$pd.outerWidth()-20}else{console.assert(false,"not implemented");return false}}}}}}this.$pd.css({top:String(J+this.positionOffset.top)+"px",left:String(I+this.positionOffset.left)+"px"})}function G(L,J,I,H){var K=this;this.$pd=$(J);this.visible=false;this.clickEvt=["click",L].join(".");this.selfOrigin=false;this.positioningType=false;this.currentTarget=null;this.$pd.on(this.clickEvt,function(M){K.selfOrigin=true});C(this.$pd,I,this.clickEvt,function(M){B.call(K,M);return false},true);C(this.$pd,H,this.clickEvt,function(M){E.call(K,M);return false},false)}G.prototype={setVisible:function(L,I){var H,K=this,J=function(M){if(K.selfOrigin){K.selfOrigin=false}else{E.call(K,M)}};if(L!==this.visible){if(L){if(this.onOpen){this.onOpen.call(this)}if(this.positioningType){A.call(this)}}this.$pd[L?"show":"hide"]();H=$.body;if(L){H.on(this.clickEvt,J)}else{H.off(this.clickEvt)}if(!L&&this.onClose){this.onClose.call(this)}this.visible=L}if(I){I.preventDefault()}},hide:function(){E.call(this)},show:function(){B.call(this)},setPositioning:function(J,H,K,I){this.$positionGuide=J;this.positioningType=H;this.positionOffset=K||{top:0,left:0};this.autoPosition=I||false;return this},rePosition:function(){A.call(this)},setOnClose:function(H){this.onClose=H;return this},setOnOpen:function(H){this.onOpen=H;return this}};G.positionTypes=F;return G}});$.registerModule({name:"hcom.common.modules.sitecatalyst",impl:function(){var C={},K={},B="clickReport",A=new RegExp("^.*?"+B+"([^\\s]+)\\s?.*$",""),D=["pageName","channel","server","prop5","prop27","prop28","prop32","prop34","eVar13","eVar26","eVar43","prop68"];function L(){if(s){for(var M in K){if(K.hasOwnProperty(M)){delete s[M]}}}}function H(){if(s){for(var M in K){if(K.hasOwnProperty(M)&&$.inArray(M,D)<0){delete s[M]}}}}function G(M,N){if(M&&s){K[M]=true;if(N===undefined||N===null){s[M]=C[M]}else{s[M]=N}}}function F(M){G("events",M)}function E(){if(s){L();for(var M in C){if(C.hasOwnProperty(M)){s[M]=C[M];K[M]=true}}}}function J(O){var P;if(O.target&&O.target.rel){P=O.target}else{if(O.target){var M=O.target;for(var N=0;N<3;N++){if(M.rel||(M.nodeName==="a"||M.nodeName==="A")){break}else{M=M.parentElement||M.parentNode}}P=M}else{P=O.data}}return P}function I(Q){var S=J(Q),M=S.rel,N=S.href,P,R=undefined,O;if(N.indexOf(B)===-1&&M.indexOf(B)!==-1){P=M.replace(A,"$1");O=N.indexOf("#");if(O!==-1){R=N.substring(O);N=N.substring(0,O)}if(N.indexOf("?")===-1){N+="?"}else{N+="&"}N+=B+"="+P;if(R){N+=R}S.href=N}}return{init:function(){this.registerEvents()},registerEvents:function(){var M=this;$.doc.on("click","a.clickreport",function(N){I.call(M,N)})},storeProperties:function(N){for(var M in N){if(N.hasOwnProperty(M)){C[M]=N[M];K[M]=true}}},sendFullReport:function(N){if(N===undefined){E()}else{for(var M in N){if(N.hasOwnProperty(M)){C[M]=N[M];K[M]=true}}}var O={};$.extend(O,C);if(s){setTimeout(function(){L();for(var P in O){if(O.hasOwnProperty(P)){s[P]=O[P]}}try{s.t()}catch(Q){console.error("error while sending full sitecatalyst report: "+Q)}console.info("sitecatalyst full report sent")},0)}},sendPartialReport:function(N,O,M){if(s){setTimeout(function(){var S="",P=0;H();if(O){F(O)}if(N){for(var Q in N){if(N.hasOwnProperty(Q)){G(Q,N[Q]);S+=Q+","}}for(var T in D){if(s.hasOwnProperty(D[T])){S+=D[T]+","}}}if(S!==""){P=S.lastIndexOf(",");if(O){s.linkTrackVars=S+"events"}else{s.linkTrackVars=S.substring(0,P)}s.linkTrackEvents=O}if(N===null&&O===null){E()}try{s.tl(true,"o",M);console.info("partial sitecatalyst report sent: "+M+" s.linkTrackVars: "+s.linkTrackVars+" s.linkTrackEvents: "+s.linkTrackEvents)}catch(R){console.error("error while sending partial sitecatalyst report: "+R)}},0)}},PARTIAL_DELAY:900}}});$.registerModule({name:"hcom.common.modules.google_maps",impl:function(B){var C;function A(F,D){var G="",E=Object.getReferenceToNestedName("hcom.landing.landmark.settings.channel");if(!!E){G=E}return["http://maps.google.com/maps/api/js?sensor=false&v="+hcom.locale.rules.GOOGLE_MAPS_API_VERSION+"&async=2",(F?"&callback="+F:""),"&language=",hcom.locale.rules.GOOGLE_MAPS_LANGUAGE_CODE,"&client=",D,G].join("")}C=function(F,E,D){var G;if(!window.google||!window.google.maps){$.requireJs(A(F,D))}else{E()}};return{createMap:C}}});$.registerModule({name:"hcom.common.modules.google_maps_custom_marker",impl:function(){var A,D;function C(E,F){return E.pos}function B(E){var F={marker:E};if(E.events.mouseenter!==null){E.$element.on("mouseenter",null,F,E.events.mouseenter)}if(E.events.mouseleave!==null){E.$element.on("mouseleave",null,F,E.events.mouseleave)}if(E.events.click!==null){E.$element.on("click",null,F,E.events.click)}}A=function(F,E){this.mapIstance=F;this.id=E.id;this.content=E.content;this.visible=E.visible===undefined?true:!!E.visible;this.coordinate=new google.maps.LatLng(E.coordinate.latitude,E.coordinate.longitude);this.adjustPosition=E.adjustPosition||C;this.$element=null;this.events={mouseenter:E.mouseenter||null,mouseleave:E.mouseleave||null,click:E.click||null};this.setMap(F)};D=function(){A.prototype=new google.maps.OverlayView();$.extend(A.prototype,{onAdd:function(){var E=this.getPanes().overlayImage;this.$element=$('<div class="google_map_overlay">'+this.content+"</div>").css({display:"none",position:"absolute"}).data("mapOverlay",this);if(this.id){this.$element.attr("id","google_map_overlay_"+this.id)}$(E).append(this.$element);B(this)},draw:function(){var E=this.getProjection(),I=$(this.mapIstance.getDiv()),H=E.fromLatLngToDivPixel(this.coordinate),F={width:this.$element.outerWidth(),height:this.$element.outerHeight(),pos:H},G={width:I.outerWidth(),height:I.outerHeight()};H=this.adjustPosition(F,G);this.$element.css({left:H.x,top:H.y});if(this.visible){this.show()}},onRemove:function(){this.$element.remove();this.$element=null},show:function(){this.$element.show()},hide:function(){this.$element.hide()},toggle:function(){this.$element.toggle()},setStyle:function(E){this.$element.css(E)},setClass:function(E){this.$element.addClass(E)}})};return{init:function(){},initializeCustomMarker:D,CustomMarker:A}}});$.registerModule({name:"hcom.common.modules.autosuggest",dependencies:["hcom.common.modules.sitecatalyst","hcom.common.modules.ie6popupplate","hcom.common.modules.emitter","hcom.common.modules.keyhandling"],impl:function(R){var B="<tr></tr>",F='<td nowrap="nowrap"></td>',V="<span></span>",D=/^[\s]*/g,G=/[\s]+$/g,S,M=1,E=500,X=/[\;\,\ \.]/ig,T=3,A=100;function L(a){if(a.assambleAutoSuggestUrl){return a.assambleAutoSuggestUrl(a)}var Z;if(a.categories===undefined){Z=hcom.common.modules.autosuggest.CATEGORY_INDICATOR.CITY|hcom.common.modules.autosuggest.CATEGORY_INDICATOR.HOTEL|hcom.common.modules.autosuggest.CATEGORY_INDICATOR.LANDMARK|hcom.common.modules.autosuggest.CATEGORY_INDICATOR.AIRPORT}else{Z=a.categories}var b=hcom.common.modules.autosuggest.DESTINATION_ID_TYPE.SIMPLE_ID;return[a.urlBase,"/a",a.inputControlId,"/b",b,"/c",4,"/d",Z,"/e",a.itemsNrPerCategory,"/f",a.lang,"/g"].join("")}function W(c){var b=false,a,Z=4;for(a=0;a<Z;a++){if(c[a].length!==0){b=true;break}}return b}function K(Z){if($.browser.msie){Z.cancelBubble=true}else{Z.stopPropagation()}}function H(Z){if($.browser.msie){Z.returnValue=false}else{Z.preventDefault()}}function O(Z){var a=Z.charCode?Z.charCode:Z.keyCode?Z.keyCode:0;if(a===13){console.debug("preventing on Enter");H(Z);K(Z);return false}}function N(c){var b=c.split(/ |\\./),Z,a="";b.sort(function(e,d){return -e.length+d.length});for(Z=0;Z<b.length;Z++){if(a!==""){a+="|"+b[Z]}else{a+=b[Z]}}a=new RegExp("(\\ |\\(|\\-)("+a+")","ig");return a}function Q(Z){return Z.replace(S,"")}function P(Z){return Z.replace(X," ")}function I(Z){return Z.replace(D,"")}function C(Z){return Z.replace(G,"")}function U(Z){return I(C(Z))}function Y(e){var d=Q(e);var Z=U(d);var f=P(Z);return f}function J(AH){var AC=this,e,w,b,g,AL,i,AF,c={},l="",f=false,r=null,j=null,o=null,k=-1,AK=true,d=false,Z,AJ={};AC.lastSelected={};AJ={focusInputField:Object.getReferenceToNestedName("hcom.common.top_destination_suggest.popdiv_type")==="columns"?false:true,isActive:hcom.locale.autosuggest.isAutoSuggestActive,onFormSubmitSupplementary:function(AN){},rowSelectedSupplementary:function(AN){},onDestinationInputChange:function(AN){$("[name='destinationId']",AN.selectSearchForm()).val("")},onFormSubmitCommon:function(Af){var Ad=Af.settings,AV=Af.lastSelected,AQ=Af.isDestinationInputChanged,AW=Ad.selectSearchForm(),Ab,Aa,AR,AN;if($("[name='searchParams.landmark']",AW).length===0){AW.append("<input type='hidden' name='searchParams.landmark' id='landmarkId' value='' />")}if($("[name='hotelId']",AW).length===0){AW.append("<input type='hidden' name='hotelId' id='hotelId' value='' />")}if($("[name='destinationId']",AW).length===0){AW.append("<input type='hidden' name='destinationId' id='destinationId' value='' />")}if($("[name='queryFormState']",AW).length===0){AW.append("<input type='hidden' name='queryFormState' value='CLOSED' />")}else{$("[name='queryFormState']",AW).val("CLOSED")}if($("[name='searchParams.needPossibleResults']",AW).length===0){AW.append("<input type='hidden' name='searchParams.needPossibleResults' value='true' />")}else{$("[name='searchParams.needPossibleResults']",AW).val("true")}if($("[name='activeTab']",AW).length===0){AW.append("<input type='hidden' name='activeTab' value='DESTINATION' />")}else{$("[name='activeTab']",AW).val("DESTINATION")}if($("[name='page']",AW).length===0){AW.append("<input type='hidden' name='page' value='1' />")}else{$("[name='page']",AW).val("1")}if(AV.rowData){$("input[name='destinationId']",AW).val(typeof AV.rowData[1]==="undefined"?"":AV.rowData[1]);if(typeof AV.rowData[2]!=="undefined"){var AP=$("[name='sortOrder']",AW);if(AP.length===0){AP=$("[name='searchParams.sortOrder']",AW)}if(AP.length===0){AW.append("<input type='hidden' name='searchParams.sortOrder' value='DISTANCE' />")}AN=AV.rowData[2]}else{AN=""}$("input[name='searchParams.landmark']",AW).val(AN);$("[name='hotelId']",AW).val(typeof AV.rowData[3]==="undefined"?"":AV.rowData[3]);if($("[name='hotelId']",AW).val().length>0){AW.attr("action",Ad.hotelAction);AW.attr("method","get");var AZ=$("[name='rooms']",AW).val();if($("[name='rooms']",AW).length){$("[name='rooms']",AW).attr("name","rooms_")}else{AZ=$("[name='numberOfRooms']",AW).val()}if(!$("[name='roomno']",AW).length){AW.append("<input type='hidden' name='roomno' value='' />")}$("[name='roomno']",AW).val(AZ);if(!$("[name='arrivalDate']",AW).length){AW.append("<input type='hidden' name='arrivalDate' value='' />");$("[name='arrivalDate']",AW).val($("[name='searchParams.arrivalDate']",AW).val());AW.append("<input type='hidden' name='departureDate' value='' />");$("[name='departureDate']",AW).val($("[name='searchParams.departureDate']",AW).val())}var Ac;for(Ac=0;Ac<AZ;Ac++){var AS="searchParams",AY="rooms["+Ac+"].numberOfAdults";if(!$("[name='roomInfoList["+Ac+"].numberOfAdults']").length){AW.append("<input type='hidden' name='"+AY+"' value='' />");$("[name='"+AY+"']",AW).val($("[name^="+AS+"][name$='"+AY+"']",AW).val())}var AT=$("[name='children["+Ac+"]']",AW).val();var Ae;for(Ae=0;Ae<AT;Ae++){var AX="searchParams.rooms["+Ac+"].childrenAges["+Ae+"]",AU="rooms["+Ac+"].childrenAges["+Ae+"]",AO=$("<input type='hidden' name='"+AU+"' value='' />");AW.append(AO);AO.val($("[name='"+AX+"']").val())}}}}else{if(AQ){$("[name='searchParams.landmark']",AW).remove();$("[name='hotelId']",AW).remove();$("[name='destinationId']",AW).remove()}}return false}};function AD(){$.doc.off("keypress.autosuggest",O);if(w){w.hide();AF.hide()}d=false}function AI(AP){var AQ="NoSuggest",AN,AO='<input type="hidden" name="asaReport" value="" />';if($('input[name="asaReport"]',AP).length===0){AP.append(AO)}if(AC.lastSelected.id){AQ=AC.lastSelected.id[0]||AQ}$('input[name="asaReport"]',AP).val([AJ.pageName,AQ].join("::"))}function AA(AN){if(!AN.isDefaultPrevented()){console.debug("Sending the form");if(d){AD();return false}$.doc.off("keypress.autosuggest");AI($(this));AJ.onFormSubmitSupplementary({lastSelected:AN.data.lastSelected,settings:AJ,isDestinationInputChanged:f});AJ.onFormSubmitCommon({lastSelected:AN.data.lastSelected,settings:AJ,isDestinationInputChanged:f})}return true}function p(){AC.lastSelected.$row=null;AC.lastSelected.id=null;AC.lastSelected.rowData=null;o=null;r=null;j=null}function AB(){w=$('<div class="auto_suggest"></div>');AL=$('<table class="asPopup"></table>');i=$("<tbody></tbody>");AL.append(i);w.append(AL);$.body.append(w);AF=new hcom.common.modules.ie6popupplate({$aligner:w});w.hide();AL.on("mouseout.autosuggest",function(){AK=true});AL.on("mouseover.autosuggest",function(){AK=false})}function y(){if(!w){AB()}$.doc.on("keypress.autosuggest",O);w.css("top",e.offset().top+e.outerHeight());if(window.hcom.locale.direction==="RTL"){w.css("right",$.win.width()-(e.offset().left+e.outerWidth()))}else{w.css("left",e.offset().left)}AL.css("position","relative");w.show();AF.show();d=true}function n(){clearTimeout(k);k=-1}function q(AP){var AN,AO;AN=$(B).addClass("divider");AO=$(F).attr("colSpan",T);AN.append(AO);i.append(AN)}function AM(AO){var AP,AN;AP=$("<tr></tr>");i.append(AP);b=$("<td></td>").addClass("more");if(-1===AO){b.html("&nbsp;")}else{if("0"===AO){b.html(AJ.i18nMessages.noSuggestionMatch);AL.css("width",e.outerWidth())}else{b.html(AJ.i18nMessages.moreSuggestion.replace("{0}",AO))}}g=$("<span></span>").addClass("link").html(AH.i18nMessages.close).on("click.autosuggest",AD);AP.append(b);AN=$("<td colspan='2'></td>");AN.append(g);AP.append(AN)}function a(AO){var AN={};switch(AO){case 0:AN.message=AJ.i18nMessages.categories.cities;AN.code="City";AN.cssClass="cities";break;case 1:AN.message=AJ.i18nMessages.categories.landmarks;AN.code="Landmark";AN.cssClass="landmarks";break;case 2:AN.message=AJ.i18nMessages.categories.airports;AN.code="Airport";AN.cssClass="airports";break;case 3:AN.message=AJ.i18nMessages.categories.hotels;AN.code="Hotel";AN.cssClass="hotels";break}return AN}function AG(AN){var AO;if(!AN||typeof AN.attr("id")==="undefined"){return }o=AC.lastSelected.$row=AN;AC.lastSelected.id=AO=AN.attr("id").split("_");AC.lastSelected.rowData=null;if(AO.length===3&&c.hasOwnProperty(l)){AC.lastSelected.rowData=c[l][2][parseInt(AO[1],10)][parseInt(AO[2],10)];e.val(AC.lastSelected.rowData[0].substring(1));AJ.rowSelectedSupplementary({lastSelected:AC.lastSelected,settings:AJ})}}function m(){AG($(this));AD();return false}function z(){if(!o&&!AC.lastSelected.$row){AD();return }else{AG(o)}}function u(){if(o){o.removeClass("highlightedRow")}$(this).addClass("highlightedRow");o=$(this);return false}function AE(){$(this).removeClass("highlightedRow");return false}function t(AP){var AO=null;if(o){AO=o.removeClass("highlightedRow")}var AR,AN,AQ;AQ=e[0];if("selectionStart" in AQ){AR=AQ.selectionStart;AN=AQ.selectionEnd}if(AP===hcom.common.modules.keyhandling.FUNCTION_KEYS.UP){if(!AO||AO.attr("id")===r.attr("id")){AO=j}else{AO=AO.prev();if(AO.attr("class")==="divider"){AO=AO.prev()}}}else{if(AP===hcom.common.modules.keyhandling.FUNCTION_KEYS.DOWN){if(!AO||AO.attr("id")===j.attr("id")){AO=r}else{AO=AO.next();if(AO.attr("class")==="divider"){AO=AO.next()}}}}if(AO){o=AO.addClass("highlightedRow")}}function x(AN){f=true;AJ.onDestinationInputChange(AJ);AC.emitter.emitEvent(J.TYPING_EVENT);var AO=Y(e.val()).toLowerCase();if(k===-1&&AO.length>=AJ.minCharLength){AC.fireAutoSuggest.input=AO;setTimeout(function(){AC.fireAutoSuggest()},M)}else{if(d){n();AD()}}}function h(AN){console.debug("handleFunctionKeys");var AO=AN.charCode?AN.charCode:AN.keyCode?AN.keyCode:0;if(!d){console.debug("Ignore function keys");return true}switch(AO){case hcom.common.modules.keyhandling.FUNCTION_KEYS.ESC:AD();return false;case hcom.common.modules.keyhandling.FUNCTION_KEYS.TAB:case hcom.common.modules.keyhandling.FUNCTION_KEYS.ENTER:H(AN);K(AN);z();AD();return false;case hcom.common.modules.keyhandling.FUNCTION_KEYS.UP:case hcom.common.modules.keyhandling.FUNCTION_KEYS.DOWN:if(AN.shiftKey&&(AO===38||AO===40)){return true}H(AN);K(AN);t(AO);return false}return true}this.timeOut=function(){if(k===-1){return }AD();k=-1};this.processResponse=function(AQ){var AX,AP,Aa,AW,AT,AR,AY,AV,AO,AZ,AN;n();if(!AQ){return }AR=AQ[1];AY=AQ[2];AV=AQ[3];if(!w){AB()}if(i.html()!==""){i.empty()}p();AN=N(AR);if(!c.hasOwnProperty(AR.toLowerCase())){c[AR.toLowerCase()]=AQ}for(AW=0;AW<AY.length;AW++){AO=AY[AW];for(AT=0;AT<AO.length;AT++){AX=$(B);AP=$(F);if(AO[AT][0].charAt(0)!==" "){AO[AT][0]=" "+AO[AT][0]}AP.html(AO[AT][0].replace(AN,"$1<em>$2</em>"));AX.append(AP);if(AT===0){AZ=a(AW);AP=$(F);Aa=$("<td></td>");Aa.addClass("asaSprite");AP.addClass("asaResultCategory");AX.append(AP);AX.append(Aa);if(AJ.categories!==hcom.common.modules.autosuggest.CATEGORY_INDICATOR.CITY){var AU=$(V);var AS=$("<span></span>");AU.html(AZ.message);Aa.append(AS);AP.append(AU);AS.addClass(AZ.cssClass).addClass("asaSprite")}}else{AX.append($(F));AX.append($(F))}AX.attr("id",[AZ.code,"_",AW,"_",AT].join(""));AX.on("mouseover.autosuggest",u);AX.on("mouseout.autosuggest",AE);AX.on("click.autosuggest",AC,m);i.append(AX);if(!r){r=AX}}if(AO.length>0){q(AW)}}j=AX;if(W(AY)){if("0"===AV){AV=-1}AM(AV);if(!d){y()}AF.align();e.trigger("focus")}};this.fireAutoSuggest=function(){var AN=arguments.callee.input;l=AN;if(!c[AN]||c[AN].length===0){$.ajax({type:"GET",url:Z+encodeURIComponent(AN),data:null,success:null,cache:true,dataType:"script"});setTimeout(function(){AC.timeOut()},E)}else{this.processResponse(c[AN])}};$.extend(AJ,AH);if(AJ.isActive){e=$("#"+AH.inputControlId);var v=new hcom.common.modules.keyhandling.KeyListener(e,h,x,"autosuggest");if(parseInt(e.attr("maxlength"),10)<A){e.attr("maxlength",A)}$.doc.on("click.autosuggest",function(){if(AK){AD()}});Z=L(AJ);if(AH.selectSearchForm){AH.selectSearchForm().on("submit.autosuggest",AC,AA);AH.selectSearchForm().attr("autocomplete","off")}else{if(AH.formId){$("#"+AH.formId).on("submit.autosuggest",AC,AA);$("#"+AH.formId).attr("autocomplete","off")}}if(AJ.focusInputField){e.trigger("focus")}e.attr("autocomplete","off");p();this.emitter=new hcom.common.modules.emitter();this.emitter.addEvents(J.TYPING_EVENT)}return this}J.TYPING_EVENT="autosuggest.typing";return{init:function(){S=/[\u00A7\"\+\!\%\/\=\(\)\?\:\_\\\>\<\|\:\]\}\[\{\@\#\$\^\*]+/ig;hcom.common.modules.autosuggest.rp=function(Z){hcom.common.modules.autosuggest[Z[0]].processResponse(Z)};hcom.common.modules.autosuggest.CATEGORY_INDICATOR={CITY:2,HOTEL:4,LANDMARK:8,AIRPORT:16};hcom.common.modules.autosuggest.DESTINATION_ID_TYPE={GLOBAL_UUID:1,SIMPLE_ID:0}},AutoSuggest:J}}});$.registerModule({name:"hcom.common.modules.autosuggest_srs",dependencies:["hcom.common.modules.sitecatalyst","hcom.common.modules.ie6popupplate","hcom.common.modules.emitter","hcom.common.modules.keyhandling"],impl:function(A){var I=false;function K(M){if($.browser.msie){M.cancelBubble=true}else{M.stopPropagation()}}function J(M){if($.browser.msie){M.returnValue=false}else{M.preventDefault()}}function L(M){var N=M.charCode?M.charCode:M.keyCode?M.keyCode:0;if(N===13){console.debug("preventing on Enter");J(M);K(M);return false}}function G(M){return M.replace(/[\u00A7\"\+\!\%\/\=\(\)\?\:\_\\\>\<\|\:\]\}\[\{\@\#\$\^\*]+/ig," ")}function D(M){return M.replace(/[\;\,\ \.]/ig," ")}function F(O){var N=G(O);var M=N.replace(/^[\s]*/g,"");var P=D(M);return P}function C(M,N){return M.urlBase}function B(M){return M.lang}function H(P){var O=false,N=4,M;for(M in P){if(P.hasOwnProperty(M)){N--;if(P[M].entities.length!==0){O=true;break}if(N<=0){break}}}return O}function E(AI){var AD=this,S,w,N,U,AN,f,AH,O={},l="",T=false,r=null,g=null,n=null,h=-1,AM=true,P=false,V,W,AL={},k="<div class='auto_suggest cont'></div>",c="<table class='cont-as-popup'></table>",o="<tbody></tbody>",R="<tr></tr>",b="<td></td>",X="<td nowrap='nowrap'></td>",e="<td colspan='2'></td>",Z="<span></span>",AJ=3,AK=100,AB=1,d=500;AD.lastSelected={};AD.entitiesInEachGroup=[];AD.entitiesTotal=0;AL={focusInputField:Object.getReferenceToNestedName("hcom.common.top_destination_suggest.popdiv_type")==="columns"?false:true,isActive:hcom.locale.autosuggest.isAutoSuggestActive,onFormSubmitSupplementary:function(AP){},rowSelectedSupplementary:function(AP){},onDestinationInputChange:function(AP){},onFormSubmitCommon:function(As){var An=As.settings,AW=As.lastSelected,AT=As.isDestinationInputChanged,AX=An.selectSearchForm(),Aj,Ar,AU,Ap,Aw,AS,AY,AV,AQ=false,Av=false,Am=false,Ab=AW.rowData,Aq,Ai,Ag,Aa,Al,Af,Ak,AP,AR=$("[name='searchParams.landmark']",AX),Au=$("[name='hotelId']",AX),Ae=$("input[name='destinationId']",AX),AZ=$("[name='queryFormState']",AX),Ad=$("[name='needPossibleResults']",AX),At=$("[name='activeTab']",AX),Ac=$("[name='page']",AX),Ao=$("input[name='searchParams.sortOrder']",AX),Ah;AR=AR.length?AR:$("<input type='hidden' name='searchParams.landmark' id='landmarkId' value='' />").appendTo(AX);Au=Au.length?Au:$("<input type='hidden' name='hotelId' id='hotelId' value='' />").appendTo(AX);Ae=Ae.length?Ae:$("<input type='hidden' name='destinationId' id='destinationId' value='' />").appendTo(AX);AZ=AZ.length?AZ.val("CLOSED"):$("<input type='hidden' name='queryFormState' value='CLOSED' />").appendTo(AX);Ad=Ad.length?Ad.val("true"):$("<input type='hidden' name='searchParams.needPossibleResults' value='true' />").appendTo(AX);At=At.length?At.val("DESTINATION"):$("<input type='hidden' name='activeTab' value='DESTINATION' />").appendTo(AX);Ac=Ac.length?Ac.val("1"):$("<input type='hidden' name='page' value='1' />").appendTo(AX);Ao=Ao.length?Ao:$("<input type='hidden' name='searchParams.sortOrder' value='' />").appendTo(AX);if(Ab){Aq=typeof Ab.destinationId==="undefined"?"":AW.rowData.destinationId;Ai=typeof Ab.landmarkCityDestinationId==="undefined"?"":AW.rowData.landmarkCityDestinationId;Ag=typeof Ab.destinationId==="undefined"?"":AW.rowData.destinationId;Ae.val(Aq);if(Ai.length){Ao.val("DISTANCE");Ae.val(Ai);AR.val(Aq)}if(Ab.type==="HOTEL"){Au.val(Ag)}switch(Ab.type){case"HOTEL":AQ=true;break;case"COUNTRY":Av=true;Am=An.countryAction;break;case"REGION":Av=true;Am=An.regionAction;break;case"STATE":Av=true;Am=An.stateAction;break;case"CONTINENT":Av=true;Am=An.continentAction;break}if(Ab.redirectPage==="DESTINATION_LANDING_PAGE"){Av=true;Am=An.destinationLandingPageAction}if(AQ){AX.attr("action",An.hotelAction);AX.attr("method","get");Ah=$("[name='rooms']",AX);Aa=$("[name='roomno']",AX);Al=$("[name='arrivalDate']",AX);if(Ah.length){Ah.attr("name","rooms_")}else{Ah=$("[name='numberOfRooms']",AX)}Aw=Ah.val();Aa=Aa.length?Aa:$("<input type='hidden' name='roomno' value='' />").appendTo(AX);Aa.val(Aw);if(!Al.length){Al=$("<input type='hidden' name='arrivalDate' value='' />").appendTo(AX);Al.val($("[name='searchParams.arrivalDate']",AX).val());Af=$("<input type='hidden' name='departureDate' value='' />").appendTo(AX);Af.val($("[name='searchParams.departureDate']",AX).val())}for(Aj=0;Aj<Aw;Aj++){AU="searchParams";Ap="rooms["+Aj+"].numberOfAdults";AS=$("[name='children["+Aj+"]']",AX).val();if(!$("[name='roomInfoList["+Aj+"].numberOfAdults']").length){Ak=$("<input type='hidden' name='"+Ap+"' value='' />").appendTo(AX);Ak.val($("[name^="+AU+"][name$='"+Ap+"']",AX).val())}for(Ar=0;Ar<AS;Ar++){AY="searchParams.rooms["+Aj+"].childrenAges["+Ar+"]";AV="rooms["+Aj+"].childrenAges["+Ar+"]";AP=$("<input type='hidden' name='"+AV+"' value='' />").appendTo(AX);AP.val($("[name='"+AY+"']").val())}}}if(Av&&Am){Am=Am.replace(/([^\{]*)(\{.*\})([^\}]*)/g,"$1"+AW.rowData.destinationId+"$3");AX.attr("action",Am);AX.attr("method","get")}}else{if(AT){$("[name='searchParams.landmark']",AX).remove();$("[name='hotelId']",AX).remove();$("[name='destinationId']",AX).remove()}}return false}};function AE(){$.doc.off("keypress.autosuggest",L);if(w){w.hide();AH.hide()}P=false}function Q(Ab,AW,AS,AZ){if(!AW.rowData){return false}var Aa=null,AY=AL.pageName,AQ=AW.rowData.type.toLowerCase(),AP=AW.typedBeforeSelected||F(S.val()).toLowerCase(),AT=AW.LastSelectedIndex+1,AX='<input type="hidden" name="" value="" />',AU=null,AV="",AR;if(AY&&AQ){Aa={page:AY,pageType:"AutoS",selectionType:AQ,enteredText:AP,entitiesInEachGroup:AS,selectedItemPosition:AT,total:AZ,destinationId:AW.rowData.destinationId}}if(Aa!==null){for(AR in Aa){if(Aa.hasOwnProperty(AR)){if(AV.length>0){AV+="|"}AV+=Aa[AR]}}AU=$(AX).attr("name","srsReport");AU.val(AV);Ab.append(AU)}}function AC(AP){if(!AP.isDefaultPrevented()){if(P){AE();return false}$.doc.off("keypress.autosuggest");Q($(this),AP.data.lastSelected,AP.data.entitiesInEachGroup,AP.data.entitiesTotal);AL.onFormSubmitSupplementary({entitiesInEachGroup:AP.data.entitiesInEachGroup,entitiesTotal:AP.data.entitiesTotal,lastSelected:AP.data.lastSelected,settings:AL,isDestinationInputChanged:T});AL.onFormSubmitCommon({entitiesInEachGroup:AP.data.entitiesInEachGroup,entitiesTotal:AP.data.entitiesTotal,lastSelected:AP.data.lastSelected,settings:AL,isDestinationInputChanged:T})}return true}function q(){AD.lastSelected.$row=null;AD.lastSelected.id=null;AD.lastSelected.rowData=null;n=null;r=null;g=null}function a(){w=$(k);AN=$(c);f=$(o);AN.append(f);w.append(AN);$.body.append(w);AH=new hcom.common.modules.ie6popupplate({$aligner:w});w.hide();AN.on("mouseout.autosuggest",function(){AM=true});AN.on("mouseover.autosuggest",function(){AM=false})}function p(AR){var AP=$(R).addClass("divider"),AQ=$(X).attr("colSpan",AJ);AP.append(AQ);f.append(AP)}function j(){if(!w){return false}w.css("top",S.offset().top+S.outerHeight());if(window.hcom.locale.direction==="RTL"){w.css("right",$.win.width()-(S.offset().left+S.outerWidth()))}else{w.css("left",S.offset().left)}AN.css("position","relative")}function z(){if(!w){a()}$.doc.on("keypress.autosuggest",L);j();w.show();AH.show();P=true}function m(){clearTimeout(h);h=-1}function AO(AQ){var AR,AP;AR=$(R).addClass("statusLine");N=$(b).addClass("more");AP=$(e);if(-1===AQ){N.html("&nbsp;")}else{if(0===AQ){N.html(AL.i18nMessages.noSuggestionMatch)}else{N.html(AL.i18nMessages.moreSuggestion.replace("{0}",AQ))}}U=$(Z).addClass("link").html(AI.i18nMessages.close).on("click.autosuggest",AE);AR.append(N);AP.append(U);AR.append(AP);f.append(AR)}function M(AQ){AQ=AQ.toUpperCase();var AP={};switch(AQ){case"CITY_GROUP":AP.message=AL.i18nMessages.categories.cities;AP.code="City";AP.cssClass="cities";break;case"LANDMARK_GROUP":AP.message=AL.i18nMessages.categories.landmarks;AP.code="Landmark";AP.cssClass="landmarks";break;case"TRANSPORT_GROUP":AP.message=AL.i18nMessages.categories.airports_stations;AP.code="Transport";AP.cssClass="airports_stations";break;case"HOTEL_GROUP":AP.message=AL.i18nMessages.categories.hotels;AP.code="Hotel";AP.cssClass="hotels";break}return AP}function AG(AQ){var AS,AP;if(!AQ||typeof AQ.attr("id")==="undefined"){return }var AR=$("tr:not(.divider)",f).not(".statusLine");n=AD.lastSelected.$row=AQ;AD.lastSelected.id=AS=AQ.attr("id").split("_");AD.lastSelected.rowData=null;AD.lastSelected.typedBeforeSelected=F(S.val()).toLowerCase();AD.lastSelected.LastSelectedIndex=AR.index(AQ);if(AS.length===3&&O.hasOwnProperty(l)){AD.lastSelected.rowData=O[l].suggestions[parseInt(AS[1],10)].entities[parseInt(AS[2],10)];AP=$("<div>"+AD.lastSelected.rowData.caption+"</div>").text();S.val(AP);AL.rowSelectedSupplementary({lastSelected:AD.lastSelected,settings:AL})}}function i(){AG($(this));AE();return false}function AA(){if(!n&&!AD.lastSelected.$row){AE();return }else{AG(n)}}function u(){if(n){n.removeClass("highlightedRow")}$(this).addClass("highlightedRow");n=$(this);return false}function AF(){$(this).removeClass("highlightedRow");return false}function t(AR){var AQ=null,AT=hcom.common.modules.keyhandling,AU,AP,AS;AS=S[0];if(n){AQ=n.removeClass("highlightedRow")}if("selectionStart" in AS){AU=AS.selectionStart;AP=AS.selectionEnd}if(AR===AT.FUNCTION_KEYS.UP){if(!AQ||AQ.attr("id")===r.attr("id")){AQ=g}else{AQ=AQ.prev();if(AQ.attr("class")==="divider"){AQ=AQ.prev()}}}else{if(AR===AT.FUNCTION_KEYS.DOWN){if(!AQ||AQ.attr("id")===g.attr("id")){AQ=r}else{AQ=AQ.next();if(AQ.attr("class")==="divider"){AQ=AQ.next()}}}}if(AQ){n=AQ.addClass("highlightedRow")}}function y(AQ){var AR=false,AP;for(AP=0;AP<AQ.length;AP++){if(AQ.charCodeAt(AP)>255){AR=true}}return AR}function x(AP){var AR=F(S.val()).toLowerCase(),AQ=AR.length;T=true;AL.onDestinationInputChange();AD.emitter.emitEvent(E.TYPING_EVENT);if(y(AR)===true){if(I===false){AL.minCharLength=1;I=true}}else{I=false;AL.minCharLength=3}if(h===-1&&AQ>=AL.minCharLength){AD.fireAutoSuggest.input=AR;setTimeout(function(){AD.fireAutoSuggest()},AB)}else{if(P){m();AE()}}}function Y(AP){var AQ=AP.charCode?AP.charCode:AP.keyCode?AP.keyCode:0,AR=hcom.common.modules.keyhandling;if(!P){return true}switch(AQ){case AR.FUNCTION_KEYS.ESC:AE();return false;case AR.FUNCTION_KEYS.TAB:case AR.FUNCTION_KEYS.ENTER:J(AP);K(AP);AA();AE();return false;case AR.FUNCTION_KEYS.UP:case AR.FUNCTION_KEYS.DOWN:if(AP.shiftKey&&(AQ===38||AQ===40)){return true}J(AP);K(AP);t(AQ);return false}return true}this.timeOut=function(){if(h===-1){return }AE();h=-1};this.processResponse=function(Ai){var Ah,Ae,Af,AP,AU,AT,Ad,Ab,AY,Ag,AW,Aa,AZ,Ac,AQ,AV,AS,AR=[0,0,0,0],AX=$("#"+AI.inputControlId).val();m();if(!Ai){return }AY=Ai.term;if(!O.hasOwnProperty(AY.toLowerCase())){O[AY.toLowerCase()]=Ai}if(AX&&O.hasOwnProperty(AX.toLowerCase())){Ai=O[AX.toLowerCase()]}Ag=Ai.autoSuggestInstance;AY=Ai.term;AW=Ai.suggestions;Aa=parseInt(Ai.moresuggestions,10);if(!w){a()}if(f.html()!==""){f.empty()}q();for(Ad=0;Ad<AW.length;Ad++){AZ=AW[Ad];Ac=0;AQ=AW[Ad].entities;AV=AW[Ad].group;AS=M(AV);for(Ab in AQ){if(AQ.hasOwnProperty(Ab)){Ac+=1;AR[Ad]+=1;Ah=$(R);Ae=$(X);AP=$(X);Af=$(b);AU=$(Z);AT=$(Z);Ae.html(AQ[Ab].caption);AU.html(AS.message);Ah.append(Ae);if(parseInt(Ab,10)===0){AP.addClass("asaResultCategory");Af.addClass("asaSprite");AP.append(AU);Af.append(AT);AT.addClass(AS.cssClass).addClass("asaSprite")}Ah.append(AP);Ah.append(Af);Ah.attr("id",[AS.code,"_",Ad,"_",Ab].join(""));Ah.attr("class",AS.code);Ah.on("mouseover.autosuggest",u);Ah.on("mouseout.autosuggest",AF);Ah.on("click.autosuggest",AD,i);f.append(Ah);if(!r){r=Ah}}}if(Ac>0){p(Ad)}}AD.entitiesInEachGroup=AR.join("|");AD.entitiesTotal=function(){var Aj=0;for(var Ak=0;Ak<AR.length;Ak++){Aj+=AR[Ak]}return Aj}();if(!g){g=Ah}if(H(AW)){if(1===Aa){Aa=-1}AO(Aa);if(!P){z()}AH.align();S.trigger("focus")}else{AE()}};this.fireAutoSuggest=function(){var AS=arguments.callee.input,AQ=AI.inputControlId,AP=AL.srsBoostConfig,AR={};l=AS;if(!O[AS]||O[AS].length===0){AR={query:AS,locale:W,autoSuggestInstance:AQ};if(AP!=="undefinded"){AR.boostConfig=AP}$.ajax({type:"GET",data:AR,url:V,cache:true,contentType:"application/json",dataType:"jsonp",jsonp:"callback",jsonpCallback:"hcom.common.modules.autosuggest_srs.rp"});setTimeout(function(){AD.timeOut()},d)}else{this.processResponse(O[AS])}};$.extend(AL,AI);if(AL.isActive){S=$("#"+AI.inputControlId);var v=new hcom.common.modules.keyhandling.KeyListener(S,Y,x,"autosuggest");if(parseInt(S.attr("maxlength"),10)<AK){S.attr("maxlength",AK)}$.doc.on("click.autosuggest",function(){if(AM){AE()}});$.win.on("resize.autosuggest",j);V=C(AL);W=B(AL);if(AI.selectSearchForm){AI.selectSearchForm().on("submit.autosuggest",AD,AC);AI.selectSearchForm().attr("autocomplete","off")}else{if(AI.formId){$("#"+AI.formId).on("submit.autosuggest",AD,AC);$("#"+AI.formId).attr("autocomplete","off")}}if(AL.focusInputField){S.trigger("focus")}S.attr("autocomplete","off");q();this.emitter=new hcom.common.modules.emitter();this.emitter.addEvents(E.TYPING_EVENT)}return this}E.TYPING_EVENT="autosuggest.typing";return{init:function(){hcom.common.modules.autosuggest_srs.rp=function(M){hcom.common.modules.autosuggest_srs[M.autoSuggestInstance].processResponse(M)};hcom.common.modules.autosuggest.CATEGORY_INDICATOR={CITY:2,HOTEL:4,LANDMARK:8,AIRPORT:16};hcom.common.modules.autosuggest.DESTINATION_ID_TYPE={GLOBAL_UUID:1,SIMPLE_ID:0}},AutoSuggest:E}}});$.registerModule({name:"hcom.common.modules.checkavailabilitydialog",dependencies:["hcom.common.modules.basicinput","hcom.common.modules.glasspane"],impl:function(C){function B(){return this.$dialog||(this.$dialog=$("#queryModuleOverlay"))}function D(F){var G=this.$dialog.find("#ca_continueCheckAvailability");G.prop("disabled",!F);G.toggleClass("cta-disabled",!F)}var E=function(){var F=false,H;function G(){D(this.basicInput.validate())}return{set:function(I){var J=this;if(I!==F){F=I;if(I){H=setInterval(function(){G.call(J)},200)}else{clearInterval(H)}}}}}();function A(H,I,G,F){this.prefix=H;this.prefixStr=H!==undefined?H+"_":"";this.containerSelector="#page_container";this.basicInput=new hcom.common.modules.basicinput(this.prefix,I,G,F);$.extend(this,F);this.basicInput.initState(B()).attachEvents();return this}A.prototype={close:function(F){F.preventDefault();this.setDialog(false)},getHotelId:function(J){var H,I;if(J.target){I="target"}else{I="srcElement"}if(J[I]){var F=J[I];for(var G=0;G<3;G++){if($(F).attr("rel")){break}else{F=F.parentNode}}H=$(F).attr("rel")}else{H=$(J.target).attr("rel")||$(J.data).attr("rel")}return H},open:function(F){this.checkEvent=F;F.preventDefault();this.hotelid=this.getHotelId(F);this.setDialog(true)},submit:function(F){F.preventDefault();if(this.basicInput.validate()){if(!this.basicInput.redirectGroupBooking()){this.setDialog(false);this.submitForm(F)}}},buildTemplate:function(F){this.basicInput.setTemplates(F)},attachEvents:function(){var F=this,G=$("#propertydetails_sense_of_urgency_popup");$.doc.on("click","#checkAvailabilityHolder .closeWindowEvent",function(H){if(G.length){G.removeClass("temporarily_invisible")}F.close(H)});$.doc.on("click","#ca_continueCheckAvailability",function(H){F.submit(H)});$.doc.on("click",".hcomCheckAvailability:not(.bound),#chooseAlternate,#chooseAlternateLink",function(H){if(G.length){G.addClass("temporarily_invisible")}F.open(H)})},setDialog:function(F){var G=B();if(F){if(!G.is(":visible")){hcom.common.modules.glasspane.show();G.show();E.set.call(this,true)}}else{if(G.is(":visible")){E.set.call(this,false);G.hide();hcom.common.modules.glasspane.hide()}}}};return A}});$.registerModule({name:"hcom.common.modules.ie6popupplate",impl:function(E){var A,C=[],H,G,D=$.browser.msie&&$.browser.version<7;function F(J){var I;if(C.length>0){return C.pop()}else{I=$('<iframe style="display: none; filter: mask(); position: absolute; z-index: 1;"></iframe>');if(!J||(J.parent().length===0)){H.append(I)}else{J.before(I)}return I}}function B(I){C.push(I)}A=function(I){this.cfg=$.extend({},A.defaultConfig,I);this.$iframe=null;this.resetFrameCSS={}};A.defaultConfig={offsetTop:0,offsetLeft:0,z_index:1};A.init=function(){H=$("#page_container,#page_container_ie6,#g").eq(0);if(!H.length){H=$.body}else{G=H}};A.prototype={getAlignment:function(O){var K,J,N,L,I,M;K=this.cfg;J=O||K.$aligner;N=J.offset();L=J.outerWidth();I=J.outerHeight();if(G){M=G.offset();N.top-=M.top;N.left-=M.left}return{top:N.top+K.offsetTop,left:N.left+K.offsetLeft,width:L,height:I}},align:function(I){if(D&&this.$iframe){var J=this.getAlignment(I);this.$iframe.css({top:J.top+"px",left:J.left+"px",width:J.width+"px",height:J.height+"px"})}return this.$iframe},show:function(K){var J,I;if(D){J=(this.$iframe=F(K));if(1<(I=this.cfg.z_index)){J.css({"z-index":I});this.resetFrameCSS["z-index"]=A.defaultConfig.z_index}this.align(K).show()}},hide:function(){var I=this.$iframe;if(I){this.$iframe=null;I.hide();I.css(this.resetFrameCSS);this.resetFrameCSS={};B(I)}}};return A}});$.registerModule({name:"hcom.common.modules.keyhandling",impl:function(B){var D={DOWN:40,UP:38,ESC:27,ENTER:13,LEFT:37,RIGHT:39,TAB:9,HOME:36,END:35};function F(G){var H;H=G.charCode?G.charCode:G.keyCode?G.keyCode:0;if((H===D.TAB)||(H===D.ENTER)||(H===D.ESC)||(H===D.DOWN)||(H===D.UP)||(H===D.LEFT)||(H===D.RIGHT)||(H===D.HOME)||(H===D.END)){return true}return false}function E(G){if(F(G)){console.debug("Function key pressed or continuously pressed... Drop");return false}else{console.debug("typing");G.data.alphaNumericKeyHandler(G)}}function A(G){if(F(G)){console.debug("Function key pressed or continuously pressed... Handling");return G.data.functionKeyHandler(G)}return true}function C(H,J,G,I){this.object=H;this.functionKeyHandler=J;this.alphaNumericKeyHandler=G;if($.browser.mozilla){this.object.on("keyup."+I,this,E);this.object.on("keypress."+I,this,A)}else{this.object.on("keyup."+I,this,E);this.object.on("keydown."+I,this,A)}}return{init:function(){hcom.common.modules.keyhandling.FUNCTION_KEYS=D;hcom.common.modules.keyhandling.KeyListener=C}}}});$.registerModule({name:"hcom.common.modules.expandable_block",impl:function(A){var B=function(C){this.cfg=$.extend(this.cfg,C);var D=this;$(this.cfg.block).wrapInner("<"+this.cfg.blockContent+" />").after('<span class="'+this.cfg.expandButtonClass+'" style="display: none;">'+this.cfg.expandButtonLabel+"</span>");$.doc.on("click","."+this.cfg.expandButtonClass,function(E){$(D.cfg.block,$(this).parent()).removeClass(D.cfg.fixedBlockClass);$(this).remove()});$.win.on("resize",function(){if(this.resizeTimeout!==null){clearTimeout(this.resizeTimeout)}this.resizeTimeout=setTimeout(function(){D.resizeBlocks()},100)});this.resizeBlocks();return this};B.prototype={cfg:{block:"div.expandable_block",blockContent:"div",expandButtonClass:"expand_block",expandButtonLabel:hcom.locale.common.expandBlockButtonLabel,fixedBlockClass:"fixed_height"},resizeTimeout:null,resizeBlocks:function(){var C=this;$(this.cfg.block).each(function(G,I){var J=$(I);var F=$("."+C.cfg.expandButtonClass,J.parent());if(F.length>0){J.addClass(C.cfg.fixedBlockClass);var E=I.scrollHeight;var D=J.height();var H=$(C.cfg.blockContent,J).height();if(H<=D||$.trim(J.text())===""){J.removeClass(C.cfg.fixedBlockClass);F.hide()}else{J.addClass(C.cfg.fixedBlockClass);F.show()}}})}};B.init=function(){};return B}});$.registerModule({name:"hcom.common.modules.urgencypopup",impl:function(C){var B,A;A={visibleTime:4000,invisibleTime:4000,popsLimit:2,useToggle:false};B=function(D){this.config=$.extend({},A,D);this.config.$container=this.config.$container||$(".hcom_urgency_popup:first");this.config.$innerContainer=this.config.$innerContainer||this.config.$container.find(".urgency_popup_data:first");this.shown=0;console.assert(this.config.$container.length===1);console.assert(this.config.$innerContainer.length===1);console.assert(typeof this.config.url==="string");this.hideProxy=$.proxy(this.hide,this);this.hideForeverProxy=$.proxy(this.hideForever,this);this.showProxy=$.proxy(this.show,this);this.showAndHideProxy=$.proxy(this.showAndHide,this);this.config.$container.on("click",this.hideForeverProxy)};B.prototype.hideForever=function(){this.config.$container.hide();this.shown=this.config.popsLimit};B.prototype.hide=function(){if(this.config.useToggle){this.config.$container.hide("slow")}else{this.config.$container.slideUp("slow")}};B.prototype.show=function(){if(this.config.useToggle){this.config.$container.show("slow")}else{this.config.$container.slideDown("slow")}this.shown++};B.prototype.showAndHide=function(){if(this.shown<this.config.popsLimit){this.show();setTimeout(this.hideProxy,this.config.visibleTime);setTimeout(this.showAndHideProxy,this.config.visibleTime+this.config.invisibleTime)}};B.prototype.ajaxSuccess_=function(D){if($.trim(D).length>0){this.config.$innerContainer.html(D);setTimeout(this.showAndHideProxy,this.config.invisibleTime)}};B.prototype.init=function(){$.ajax({url:this.config.url,dataType:"html",data:this.config.data,type:"GET",success:$.proxy(this.ajaxSuccess_,this)})};return B}});$.registerModule({name:"hcom.common.modules.partialoverlay",impl:function(B){var C,A=$("#g");C=function(E,D){this.config=$.extend({},C.DEFAULT_CONFIG,D);this.$toHide=E;this.shown=false;this.$elem=$('<div class="'+this.config.cssClass+'"/>');console.assert(this.$toHide.length===1);$.win.on("resize",$.proxy(this.reposition,this))};C.prototype.reposition=function(){var L,E,D,M,F=this.$toHide.position().top,J=(this.config.$nextVisible?this.config.$nextVisible.position().top:$.doc.height())-F,I=this.config.$hRefElem.position().left,H=this.config.$hRefElem.width(),K,G=A.offset();this.$elem.css({top:F,left:I,height:J,width:H,position:"absolute"})};C.prototype.show=function(){var D;if(!this.shown){C.getOverlayContainer_().append(this.$elem);this.reposition();this.$elem.css({display:"block"});if(this.config.$overElem){D=+this.$elem.css("zIndex")+1;this.config.$overElem.each(function(){var E=$(this);C.putOver_(E);E.css({zIndex:D})})}this.shown=true}};C.prototype.hide=function(){if(!!this.shown){this.$elem.css({display:"none"});this.$elem.detach();if(this.config.$overElem){this.config.$overElem.each(function(){C.putBack_($(this))})}this.shown=false}};C.putOver_=function(G){var D=G.position(),F,H=G.css("display"),E=A.offset();if(H==="none"){G.show()}F={$placeHolder:$('<span class="placeholder"/>').insertAfter(G),css:{position:G.css("position"),top:D.top,bottom:G.css("bottom"),left:D.left,right:G.css("right"),zIndex:G.css("zIndex"),paddingTop:G.css("paddingTop"),paddingRight:G.css("paddingRight"),paddingBottom:G.css("paddingBottom"),paddingLeft:G.css("paddingLeft"),marginTop:G.css("marginTop"),marginRight:G.css("marginRight"),marginBottom:G.css("marginBottom"),marginLeft:G.css("marginLeft"),width:G.css("width"),heigth:G.css("height"),display:H}};F.$placeHolder.css(F.css).height(G.height()).width(G.width());if(H==="none"){G.hide()}G.detach().css({position:"absolute",top:D.top,left:D.left,paddingTop:F.css.paddingTop,paddingRight:F.css.paddingRight,paddingBottom:F.css.paddingBottom,paddingLeft:F.css.paddingLeft,marginTop:F.css.marginTop,marginRight:F.css.marginRight,marginBottom:F.css.marginBottom,marginLeft:F.css.marginLeft,width:F.css.width,height:F.css.height}).data("originalPos",F);C.getOverlayContainer_().append(G)};C.putBack_=function(E){var D=E.data("originalPos");E.detach().css(D.css);E.insertAfter(D.$placeHolder);D.$placeHolder.detach()};C.getOverlayContainer_=function(){return C.$oeContainer||(C.$oeContainer=$('<div id="partial_overlay_container"/>').appendTo(A))};C.DEFAULT_CONFIG={$nextVisible:null,cssClass:"hcom_partial_overlay",$hRefElem:A};return C}});$.registerModule({name:"hcom.common.modules.titletooltip",impl:function(){var N=$('<div class="hcom_simple_popdiv hcom_title_tooltip"><div class="arrow"><div class="outer"></div><div class="inner"></div></div><div class="title"></div></div>'),H,S=[],O,E=300,C=500,R,L=typeof Touch!=="undefined",Q=5000,D,K="hcom.common.config.tooltipHints";function J(i){if($.browser.msie&&$.browser.version<7&&N.css("width","auto").width()>350){N.css("width","350px")}var X=$.win.height(),a=$.win.scrollTop(),f=$.body.width(),b=$("#g").offset().left,d=i.offset().top,g=i.offset().left,Z=N.outerWidth(true),Y=N.outerHeight(true),c=g-Z+31,W=d+i.height()+17,h=i.attr("rel"),V="top",e="right";N.css({top:function(){if(i.hasClass("title_tooltip")){W=d-Y-17;V="bottom"}else{V="top";if(h==="next"){W-=Y/2+22}else{if(W+Y>X+a||i.parent().find("a").length>0){W=d-Y-17;V="bottom"}}}return Math.round(W)},left:function(){if(i.hasClass("title_tooltip")){e="middle";c=(g-(Z/2))+(i.outerWidth()/2)}else{e="right";if(h==="next"){c=g-Z-32}if(c+Z>f){c=f-Z-5}else{if(c<b){c=g-22;e="left"}}if(h==="next"){if(e==="left"){c=g+32}else{c=g-Z-32}V=e;e="middle"}}return Math.round(c)}}).children(".arrow").attr("class","arrow "+V+"_"+e)}function F(V,W){if(V===O||W===-1){clearTimeout(H)}else{H=setTimeout(function(){O=V;N.children(".title").html(S[W]);N.show();J(V);if(L){if(D){clearTimeout(D);D=undefined}D=setTimeout(R,Q)}},E)}}R=function(){clearTimeout(H);H=setTimeout(function(){O={};N.hide();if(D){clearTimeout(D);D=undefined}},75)};function U(W,X){var V=X===-1?W:W.parent();if(W.hasClass("title_tooltip")){V=W}V.on("mouseenter",function(){F(W,X)}).css("cursor",V.is("a")?"pointer":"help");V.on("mouseleave",function(){R()})}function M(V,W){setTimeout(function(){var X=V.constructor===$?V:$(V);X.each(function(){var Z=$(this),a=Z.attr("title")||Z.parent().attr("title"),Y=$.inArray(a,S),b;if(Z.hasClass("tooltip_formatted")){a=Z.next().html()}if(a!==""){if(Y>-1){b=Y}else{S.push(a);b=S.length-1}U(Z,b)}Z.add(Z.parent()).attr("title","")})},W?C:0)}function A(V){return V.find(".hcom_simple_popdiv")}function I(){A($(this)).show()}function G(){A($(this)).hide()}function T(W){var V,X;for(X=0;(V=W[X]);X++){$(V).hover(I,G)}}function B(){var V=Object.getReferenceToNestedName(K);if(V){T.apply(this,V)}}function P(){var V=".title_tooltip[title],.icon_tooltip[title],*[title]>.icon_tooltip,.tooltip_formatted";$.body.append(N);U(N,-1);$.doc.ready(function(){M(V);B()}).ajaxSuccess(function(){M(V,true)})}return{init:P,bind:M}}});$.registerModule({name:"hcom.common.form.modules.formtabs",impl:function(B){var C,A;A={tabSelector:".formtab",defaultTab:".formtab:first"};C=function(D){this.config=$.extend({},A,D);this.state={};console.assert(this.config.$ctrlElem.length===1);this.config.$container=this.config.$container||this.config.$ctrlElem.parents("form:first");this.bind_();this.showCurrent_()};C.prototype.showCurrent_=function(){var E=this.config.$ctrlElem.val(),D;this.state.value=E;D=this.config.rules?$(this.config.rules[E]):this.config.$container.find(this.config.tabSelector).filter(E?"."+E:this.config.defaultTab);if(D.length<1){D=$(this.config.defaultTab)}$(this.config.tabSelector).hide();D.show();this.state.$tabsShown=D;if(this.config.callback){this.config.callback(this)}};C.prototype.bind_=function(){var D=$.proxy(this.showCurrent_,this);this.config.$ctrlElem.bind("change",D)};return C}});$.registerModule({name:"hcom.common.pages.common",dependencies:["hcom.common.modules.js_links","hcom.common.modules.opinion_popup","hcom.gadgets.modules.headmenu","hcom.common.modules.cobranding","hcom.common.modules.print","hcom.common.modules.favorites","hcom.common.modules.popup","hcom.common.modules.sitecatalyst","hcom.common.modules.geolocation_message","hcom.common.modules.seo_footer","hcom.common.modules.adbanner","hcom.common.modules.simplepopdiv","hcom.common.modules.titletooltip","hcom.common.modules.calendar_dp","hcom.common.modules.cms_support","hcom.common.chat.modules.invitation","hcom.common.lightbox.modules.controller","hcom.common.modules.overlay","hcom.common.modules.fb_buttons"],impl:function(A){return{init:function(){}}}});$.registerModule({name:"hcom.common.pages.error_404",dependencies:["hcom.common.pages.common","hcom.common.modules.calendar_dp","hcom.gadgets.queryform.modules.queryform","hcom.common.modules.basicinput","hcom.common.modules.autosuggest","hcom.common.modules.sitecatalyst"],impl:function(){var A=$("#searchForm");function B(F){var D=hcom.locale.autosuggest,E=hcom.common.modules.autosuggest,G={inputControlId:F,i18nMessages:D.i18nMessages,minCharLength:D.activationCharLength,itemsNrPerCategory:5,urlBase:D.asURL,lang:hcom.locale.language,hotelAction:"/hotel/details.html",formId:"searchForm",sendDataTo_Search_Do:false,pageName:"Error404",selectDestinationIdField:function(){return $("#destinationId")},selectLandmarkIdField:function(){return $("#landmarkId")},selectHotelIdField:function(){return $("#hotelId")},rowSelectedSupplementary:function(H){},onDestinationInputChange:function(){},onFormSubmitCommon:function(M){var J=M.settings,K=M.lastSelected,I=M.isDestinationInputChanged,L;if(J.selectDestinationIdField().length===0){$("#"+J.formId).append("<input type='hidden' name='destinationId' id='destinationId' value='' />")}if(J.selectLandmarkIdField().length===0){$("#"+J.formId).append("<input type='hidden' name='searchParams.landmark' id='landmarkId' value='' />")}if(J.selectHotelIdField().length===0){$("#"+J.formId).append("<input type='hidden' name='hotelId' id='hotelId' value='' />")}if(K.rowData){J.selectDestinationIdField().val(typeof K.rowData[1]==="undefined"?"":K.rowData[1]);J.selectLandmarkIdField().val(typeof K.rowData[2]==="undefined"?"":K.rowData[2]);J.selectHotelIdField().val(typeof K.rowData[3]==="undefined"?"":K.rowData[3])}if(J.selectHotelIdField().val().length>0){var H=$(["#",J.formId].join(""));H.attr("action",J.hotelAction);H.attr("method","get");L=$("[name='rooms']",H).val();if($("[name='rooms']",H).length){$("[name='rooms']",H).attr("name","rooms_")}else{L=$("[name='numberOfRooms']",H).val()}if(!$("[name='roomno']",H).length){H.append("<input type='hidden' name='roomno' value='' />")}$("[name='roomno']",H).val(L);$("input",H).add("select",H).not("[disabled]").each(function(){var O=$(this);var N=O.attr("name");if(!!N&&N.match("^searchParams")){H.append("<input type='hidden' name='"+O.attr("name").replace("searchParams.","")+"' value='"+O.val()+"' />")}})}}};E[G.inputControlId]=new E.AutoSuggest(G)}function C(E){var D={prop33:"Error :: 404 :: Search Button",eVar33:"Error :: 404 :: Search Button"};hcom.common.modules.sitecatalyst.sendPartialReport(D,null,"error 404 search");A.off("submit",C);setTimeout(function(){A.trigger("submit")},300);E.preventDefault();return false}return{init:function(){B("txt_destination_404",false);A.on("submit",C);var D=new hcom.common.chat.modules.invitation()}}}});$.registerModule({name:"hcom.common.modules.opinion_popup",impl:function(B){var C="#header_mailto_or_oo, #toplinks_mailto_or_oo";function A(D){O_LC();return false}return{init:function(){$(C).filter("[showoo]").on("click",A)},setFeedbackHref:function(D){if($(C).attr("href",D).length<2){console.warn("cant update feedback URLs")}}}}});$.registerModule({name:"hcom.common.modules.shared_visibility",impl:function(){var A;A=function(B,C){console.assert(B.length===1);this.$elem=B;this.hiddenByDefault=!!C};A.prototype.getPool_=function(){var B=this.$elem.data(A.DATA_KEY);if(!B){this.$elem.data(A.DATA_KEY,(B=[]))}return B};A.prototype.getPoolIndex_=function(B){return $.inArray(this,B||this.getPool_())};A.prototype.changeState_=function(C,E){var D=this.getPool_(),B=this.getPoolIndex_(D),G=C?!this.hiddenByDefault:this.hiddenByDefault,F;if(G&&B>=0){D.splice(B,1)}if(!D.length){F=E.call(this.$elem)}if(!G&&B<0){D.push(this)}return F};A.prototype.show=function(){return this.changeState_(true,$.fn.show)};A.prototype.hide=function(){return this.changeState_(false,$.fn.hide)};A.DATA_KEY="hcom.shared_visibility";return A}});$.registerModule({name:"hcom.common.modules.glasspane",dependencies:["hcom.common.modules.shared_visibility"],impl:function(A){var F,B,I=false,H,C=($.browser.msie&&$.browser.version<7)?true:false,D;D=function(){console.assert(false)};D.setEnabled=function(M){if(D.enabled!==M){D.enabled=!!M;if(M){D.savedScroll=$.win.scrollTop()}$("html,body").css(M?{height:"100%",overflow:"hidden",position:"relative"}:{height:"",overflow:"",position:""});if(!M&&$(".error").length===0){$.win.scrollTop(D.savedScroll)}}};D.INST=null;D.enabled=false;D.savedScroll=0;function K(){D.setEnabled(!$.support.positionFixed());F.show()}function E(){F.hide();D.setEnabled(false)}function G(M){F.addClass(M)}H={constructor:function(){H.superclass.constructor.call(this,F,true)},show:function(){if(H.superclass.show.call(this)&&!$.support.positionFixed()){D.setEnabled(true)}},hide:function(){if(H.superclass.hide.call(this)){D.setEnabled(false)}}};function L(){if(!I){I=true;F=$("#holding");if(F.length<1){if(C){F=$('<iframe id="holding" style="display: none;" src="/html/blank.html" />')}else{F=$('<div id="holding" style="display: none;" />')}$.appendBody(F)}}return B}function J(){console.log("%s.buildTemplate",A);L()}return{init:function(){var M=Object.getReferenceToNestedName("hcom.search.modules.core");B=hcom.common.modules.glasspane;if(M&&$.isFunction(M.addTemplateListener)){hcom.search.modules.core.addTemplateListener(A,J)}else{L()}B.Managed=(H=$.extendCls(hcom.common.modules.shared_visibility,H))},Managed:null,initStatic:L,show:K,hide:E,toggle:function(M){if(F.is(":visible")){E()}else{K(M)}},addClass:G,visible:function(){return F.is(":visible")}}}});$.registerModule({name:"hcom.common.modules.basicinput",dependencies:["hcom.common.modules.template","hcom.common.modules.calendar_dp"],impl:function(U){var C=function(b,e,d){var c="hcom.js.changeSearch";this.name=[c,b].join(".");this.id=e;this.optionId=d};var Z=new C("adultFieldName","adultFieldId","adultFieldOptionId"),J=new C("childFieldName","childFieldId","childFieldOptionId"),E=new C("childAgeFieldName","childAgeFieldId","childAgeOptionId"),F,R=/\.rooms\[([0-9]+)\]\.(?:childrenAges\[([0-9]+)\])?/,V=9,a=["lnk_search_tab_destination","lnk_search_tab_hotelname"],H=hcom.configuration.LOCALIZED_DATE_FORMAT,Q;function S(b){if(b.rawVal()!==""){b.val(b.val().replace(/%+/g,"").replace(/\s{2,}/g," ").replace(/^\s+/,""))}}function K(d,e,c,b){this.roomSelector="select[name=numberOfRooms]:first";this.childSelector="select[name^=children]";this.adultSelector="select[name$=numberOfAdults]";this.prefix=d;this.prefixStr=d.length?d+"_":"";this.hasTabs=e||false;this.callbacks=c||{};$.extend(this,b);F=new $.formatter(!!b&&!!b.messageNS?Object.getReferenceToNestedName(b.messageNS):undefined);return this}function P(c,h,g){var f=this.$main.find("div.roomAgesOfChildren:first tbody tr:eq("+c+")"),b=this,d,e=function(i){$(this).attr("id",F.format(E.optionId,b.prefix,String(c),String(d),String(i)))};if(g===0){f.replaceWith(this.childAgeEmptyRow)}else{if(g<h){f.find("td:gt("+String(g-1)+")").remove()}else{if(g>h){if(h===0){f.empty()}for(d=h;d<g;d++){f.append(this.childAgeCell);f.find("td:last").find("select").attr("name",F.format(E.name,String(c),String(d))).attr("id",F.format(E.id,this.prefix,String(c),String(d))).find("option").each(e)}}}}}function Y(f,d,g,h){var c,b;if((d>0)&&(h===0)){this.$main.find("div.roomAgesOfChildren:first").remove()}else{if((h>0)&&(d===0)){this.$main.find("div.roomDetails:first").after(this.childTable);var e=this.$main.find("div.roomAgesOfChildren:last tbody");for(c=0;c<this.cRooms;c++){e.append(this.childAgeEmptyRow)}}}for(c=0,b=g.length;c<b;c++){if(f[c]!==g[c]){P.call(this,c,f[c],g[c])}}}function I(){var e=[],b,d=0;$(this.childSelector,this.$main).each(function(c){b=parseInt(this.value,10);d+=b;e.push(b)});return{child:e,childCount:d}}function X(){var b=I.call(this);Y.call(this,this.cChild,this.cChildCount,b.child,b.childCount);this.cChild=b.child;this.cChildCount=b.childCount}function L(c,d){var b=this;d.find("label:first").text(F.format("sfsearch.changeSearch.room",String(c+1))).end();$(this.childSelector+":first",d).on("change.basicInput",function(){X.call(b)}).val("0");$(this.adultSelector+":first",d).val("2")}function D(f){var e=/(id|for|name)="?([^\s>"]+)"?/g,i=String(f),g=[F.format(Z.id,this.prefix,i),F.format(J.id,this.prefix,i)],m=[F.format(Z.name,i),F.format(J.name,i)],h=-1,d=0,k=[Z.optionId,J.optionId],l,b,j=this;function c(t,n,p,r,o){var q;if(n==="name"){q=m[d++]}else{if(n==="for"){q=g[0]}else{if(p.indexOf("_option_")>=0){q=F.format(k[h],j.prefix,i,l++)}else{l=0;h+=1;q=g[h]}}}if(q===undefined){return""}else{return[n,'="',q,'"'].join("")}}b=this.roomHtml.replace(e,c);return b}function G(j,h){var d,f="div.roomsPeople:first > table:first > tbody:first";if(h<j){$(f,this.$main).find(["> tr:gt(",String(h-1),")"].join("")).find(this.childSelector).each(function(){$(this).off()}).end().remove();var c=this.cChildCount,g=this.cChild.slice(0);for(d=j;d>h;d--){this.cChildCount-=this.cChild.pop()}Y.call(this,g,c,this.cChild,this.cChildCount);if((c>0)&&(this.cChildCount>0)){$(["div.roomAgesOfChildren:first table:first > tbody:first > tr:gt(",String(h-1),")"].join(""),this.$main).remove()}}else{if(h>j){var e=$(f,this.$main).find("> tr:last"),b;if(this.roomHtml===undefined){b=e.clone();$("option",b).removeAttr("selected");this.roomHtml=["<tr>",b.html(),"</tr>"].join("");if($.browser.msie){this.roomHtml=this.roomHtml.replace(/jQuery[0-9]+[^\s>]+/g,"")}}for(d=j;d<h;d++){e.after(D.call(this,d));e=$(f,this.$main).find("> tr:last");L.call(this,d,e);this.cChild.push(0)}if(this.cChildCount>0){e=this.$main.find("div.roomAgesOfChildren:first tbody:first");for(d=j;d<h;d++){e.append(this.childAgeEmptyRow)}}}}}function N(){var b=parseInt(this.$main.find(this.roomSelector).val(),10);this.isGroupBooking=(b>=V);return b}function W(b){var c="div.roomsPeople:first",d="div.roomAgesOfChildren:first";if(b&&!this.isPeopleSelectorEnabled){this.$main.find(c).show().end().find(d).show();this.isPeopleSelectorEnabled=true}else{if(!b&&this.isPeopleSelectorEnabled){this.$main.find(c).hide().end().find(d).hide();this.isPeopleSelectorEnabled=false}}}function O(){var c=this.cRooms,b=this.isGroupBooking,d=N.call(this);if(!b&&this.isGroupBooking){W.call(this,false)}else{if(b&&!this.isGroupBooking){W.call(this,true)}this.cRooms=d;G.call(this,c,d)}}function B(b){var e=0,h,k,j,c=[],m,d,f=0;for(var l in b){if(b.hasOwnProperty(l)){h=R.exec(l);if(h){k=parseInt(h[1],10);e=Math.max(e,k);if(h[2]!==undefined){c[k]=Math.max(c[k]||0,parseInt(h[2],10))}}}}j=this.cRooms;this.cRooms=e+1;G.call(this,j,this.cRooms);for(var g=0;g<this.cRooms;g++){if(c[g]===undefined){c[g]=0}else{c[g]+=1}f+=c[g]}m=this.cChild;d=this.cChildCount;this.cChild=c;this.cChildCount=f;Y.call(this,m,d,this.cChild,this.cChildCount)}function M(b){var c=b.getModule("basic_input");this.childTable=c.getTemplate("child_table");this.childAgeCell=c.getTemplate("child_age_cell");this.childAgeEmptyRow=c.getTemplate("child_age_empty_row")}function A(b){var c=this.$main.find("#ca_continueCheckAvailability").eq(0);c.prop("disabled",!b);c.toggleClass("cta-disabled",!b)}function T(d){var c=this.$tabContainer.find("a"),e="click."+this.prefix,b=this;if(d){c.on(e,function(f){f.preventDefault();Q.call(b,$(this))})}else{c.off(e)}}Q=function(c){var g=c.text(),f=c.parent(),d=-1,b=-1;T.call(this,false);this.$tabContainer.find("li").each(function(h){var k=$(this),j=k.children("a");if(j.length===0){d=h;var l=k.text();k.removeClass("active").html(['<a href="#" id="',this.prefixStr,a[h],'"></a>'].join("")).children("a").text(l)}if(this===f[0]){b=h}});if(d===1||b===1){var e=this.$main.find("div.search_hotelName:first");if(d===1){e.hide();$("#search_hotelNameInput").attr("disabled","disabled")}else{$("#search_hotelNameInput").removeAttr("disabled");e.show()}}f.addClass("active");f.empty().text(g);if(this.callbacks.hasOwnProperty("tabClicked")){this.callbacks.tabClicked(b,d)}T.call(this,true)};K.prototype={initState:function(c,e){var b,d;this.$main=c;this.$form=(e===true?c.parent("form:first"):c.find("form:first"));if(this.hasTabs){this.$tabContainer=c.find("ul.searchOptions:first")}b=this.$form.find("input[name=destination]:first");this.hasDestination=((b.length>0)&&(b.attr("type")!=="hidden"));A.call(this,this.hasDestination&&b.val().length>0);this.cRooms=N.call(this);this.isPeopleSelectorEnabled=!this.isGroupBooking;d=I.call(this);this.cChild=d.child;this.cChildCount=d.childCount;this.$form.attr("autocomplete","off");this.$arrivalDate=this.$form.find("[name=arrivalDate]");this.$departureDate=this.$form.find("[name=departureDate]");this.$flexibleDatesCheckBox=this.$form.find("#ca_flexible_chk");this.arrivalDateOrigVal=$.trim(this.$arrivalDate.val());this.departureDateOrigVal=$.trim(this.$departureDate.val());if(this.$flexibleDatesCheckBox.length){this.handleFlexible()}return this},setTemplates:function(b){M.call(this,b);return this},handleFlexible:function(){var c=this,e="disabled",b=c.$arrivalDate.add(c.$departureDate),d=c.$form.find("[class*=calendar_trigger]");if(c.$flexibleDatesCheckBox.is(":checked")){b.attr(e,e).addClass(e).val(H);d.addClass(e).removeClass("hcomDate")}else{b.removeAttr(e).removeClass(e);d.removeClass(e).addClass("hcomDate");c.$arrivalDate.val(c.arrivalDateOrigVal);c.$departureDate.val(c.departureDateOrigVal)}},attachEvents:function(){var b=this;this.$main.find(this.roomSelector).on("change.basicInput",function(){O.call(b)}).end().find(this.childSelector).on("change.basicInput",function(){X.call(b)}).end().find("input.hcomACCity:first").on("blur.basicInput",function(c){A.call(b,$(this).val().length>0)});b.$flexibleDatesCheckBox.on("change.basicInput",function(){b.handleFlexible()});b.$arrivalDate.on("change.basicInput",function(){b.arrivalDateOrigVal=$.trim(b.$arrivalDate.val())});b.$departureDate.on("change.basicInput",function(){b.departureDateOrigVal=$.trim(b.$departureDate.val())});if(this.hasTabs){T.call(b,true);$("#search_hotelNameInput").setEmptyValue(F.format("sfsearch.filterModule.defaulthotelnameinput")).on("blur",function(){S($(this))})}return this},detectFieldCounts:function(){B.call(this)},validate:function(){var c=$.trim($("#"+this.prefixStr+"search_checkIn").val()),b=$.trim($("#"+this.prefixStr+"search_checkOut").val()),d=(c.length>0)&&(b.length>0);d=d&&!!Date.parsePOSLocaleDate(c)&&!!Date.parsePOSLocaleDate(b);if(d){$("div.roomAgesOfChildren:first select",this.$main).each(function(){return(d=this.selectedIndex>0)})}return d||this.isGroupBooking||this.$flexibleDatesCheckBox.is(":checked")},shouldRedirectGroupBooking:function(){return this.isGroupBooking&&!Object.getReferenceToNestedName("hcom.group_booking.settings.hotelPlannerGroupBookingEnabled")},isGroupBookingSet:function(){return this.isGroupBooking},redirectGroupBooking:function(){var e=this.shouldRedirectGroupBooking();if(e){var d=$.trim($("#"+this.prefixStr+"search_checkIn").val()),c=$.trim($("#"+this.prefixStr+"search_checkOut").val()),b=$.trim(this.$form.find("input[name=destination]:first").val());window.location=["/groups/request.html?request.destinationName=",b,"&request.checkIn=",d,"&request.checkOut=",c].join("")}return e}};K.init=function(){};K.filterHotelName=S;return K}});$.registerModule({name:"hcom.common.modules.robots",dependencies:[],impl:function(A){return{init:function(){},addAssetLinks:function(){var B=['<a href="',window.hcom.configuration.STATIC_JS_LINK,'">.</a>'];$.doc.ready(function(){$("div.static_js").append(B.join(""))})}}}});$.registerModule({name:"hcom.common.modules.estara",dependencies:["hcom.common.modules.sitecatalyst"],impl:function(){function B(){var C=Object.getReferenceToNestedName("hcom.common.estara.data.estara");if(C){webVoicePop("template="+C.templateId,"var1="+C.var1,"var2="+C.var2,"var3="+C.var3)}}function A(){hcom.common.modules.sitecatalyst.sendPartialReport({prop33:window.s.pageName+" :: Estara",eVar33:window.s.pageName+" :: Estara",eVar58:"Call :: Click to call",prop61:"Call :: Click to call",events:null},null," ")}return{init:function(){$.doc.on("click","#lnk_call_me, #lnk_call_me_more",function(){B();A()})}}}});$.registerModule({name:"hcom.common.modules.micro_template",impl:function(){return{parse:function(A){var B="var p=[];with(ctx){p.push('"+A.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"',$1,'").split("<%").join("');").split("%>").join("p.push('")+"');}return p.join('');";return new Function("ctx",B)}}}});$.registerModule({name:"hcom.common.area.modules.area",impl:function(){var A;A=function(){};A.prototype.isMouseEvtInside=function(B){return this.isCoordsInside(B.pageX,B.pageY)};A.prototype.isCoordsInside=function(B,C){console.assert(false)};A.prototype.getCenter=function(){console.assert(false)};return A}});$.registerModule({name:"hcom.common.area.modules.click",dependencies:["hcom.common.area.modules.point"],extendsModule:"hcom.common.modules.emitter",impl:function(){var A,B;A=function(){A.superclass.constructor.call(this);this.addEvents(A.OUTER_CLICK_EVENT,A.INNER_CLICK_EVENT);this.areas=[];this.bound=false;this.onClickPrx_=$.proxy(this.onClick_,this);this.setBound_(true)};A.prototype={addArea:function(C){this.areas.push(C);return this},onClick_:function(C){var E,D;for(D=0;(E=this.areas[D]);D+=1){this.emitEvent(E.isMouseEvtInside(C)?A.INNER_CLICK_EVENT:A.OUTER_CLICK_EVENT,C)}},setBound_:function(D){var C=D?$.fn.on:$.fn.off;if(D!==this.bound){this.bound=D;C.call($.body,"click.area",this.onClickPrx_)}},destroy:function(){this.setBound_(false)}};A.rectangular=function(C,G){var F,E=new A(),D=$.loadModule("hcom.common.area.modules.rectangle");if(C instanceof $){F=D.fromJQObject(C)}else{console.assert(C instanceof B&&G instanceof B);F=new D(C,G)}return E.addArea(F)};A.polygon=function(D){var C=$.loadModule("hcom.common.area.modules.polygon"),E=new A();return E.addArea(new C(D))};A.init=function(){B=hcom.common.area.modules.point};A.OUTER_CLICK_EVENT="AreaClick.outerClick";A.INNER_CLICK_EVENT="AreaClick.innerClick";return A}});$.registerModule({name:"hcom.common.area.modules.point",extendsModule:"hcom.common.area.modules.area",impl:function(){var A;A=function(B,C){this.x=B;this.y=C};A.prototype={gte:function(B){return this.x>=B.x&&this.y>=B.y},lte:function(B){return this.x<=B.x&&this.y<=B.y},gt:function(B){return this.x>B.x&&this.y>B.y},lt:function(B){return this.x<B.x&&this.y<B.y},eq:function(B){return this.x===B.x&&this.y===B.y},gteCoords:function(B,C){return this.x>=B&&this.y>=C},lteCoords:function(B,C){return this.x<=B&&this.y<=C},gtCoords:function(B,C){return this.x>B&&this.y>C},ltCoords:function(B,C){return this.x<B&&this.y<C},eqCoords:function(B,C){return this.x===B&&this.y===C},add:function(B){return new A(this.x+B.x,this.y+B.y)},addCoords:function(B,C){return new A(this.x+B,this.y+C)},sub:function(B){return new A(this.x-B.x,this.y-B.y)},div:function(B){return new A(Math.round(this.x/B),Math.round(this.y/B))},isCoordsInside:function(B,C){return this.x===B&&this.y===C},getCenter:function(){return this},distanceTo:function(C){var B=C.sub(this);return Math.round(Math.sqrt(Math.pow(B.x,2)+Math.pow(B.y,2)))},equals:function(B){return !!B&&B.constructor===A&&this.x===B.x&&this.y===B.y},asOffset:function(){return{top:this.y,left:this.x}}};A.ZERO_POINT=null;A.fromCoords=function(B,C){return new A(B,C)};A.init=function(){this.ZERO_POINT=this.fromCoords(0,0)};return A}});$.registerModule({name:"hcom.common.area.modules.polygon",extendsModule:"hcom.common.area.modules.area",dependencies:["hcom.common.area.modules.point"],impl:function(){var A;A=function(B){A.superclass.constructor.call(this)};A.prototype.isCoordsInside=function(B,C){};return A}});$.registerModule({name:"hcom.common.area.modules.rectangle",dependencies:["hcom.common.area.modules.point"],extendsModule:"hcom.common.area.modules.area",impl:function(){var A,B;A=function(D,C){A.superclass.constructor.call(this);this.tl=D;this.br=C;this.center=null;this.area=-1};A.prototype.isCoordsInside=function(C,D){return this.tl.lteCoords(C,D)&&this.br.gteCoords(C,D)};A.prototype.isRectangleInside=function(C){return this.tl.lte(C.tl)&&this.br.gte(C.br)};A.prototype.getCenter_=function(){return this.br.sub(this.tl).div(2).add(this.tl)};A.prototype.getCenter=function(){return this.center||(this.center=this.getCenter_())};A.prototype.contract=function(C){return A.fromCorners(this.tl.add(C.tl),this.br.sub(C.br))};A.prototype.intersect=function(E){var H,G,F,D,C;if(this.br.gte(E.tl)&&this.tl.lte(E.br)){G=this.tl.x<E.tl.x?E.tl.x:this.tl.x;F=this.tl.y<E.tl.y?E.tl.y:this.tl.y;D=this.br.x>E.br.x?E.br.x:this.br.x;C=this.br.y>E.br.y?E.br.y:this.br.y;H=A.fromCoords(G,F,D,C)}else{H=A.ZERO_RECTANGLE}return H};A.prototype.getArea=function(){return this.area>=0&&this.area||(this.area=(this.br.x-this.tl.x)*(this.br.y-this.tl.y))};A.prototype.expand=function(C){return A.fromCorners(this.tl.sub(C.tl),this.br.add(C.br))};A.prototype.normalize=function(){var C=this.getCenter();return C.eqCoords(0,0)?this:A.fromCorners(this.tl.sub(C),this.br.sub(C))};A.prototype.equals=function(C){return !!C&&C.constructor===A&&(this.tl&&this.tl.equals(C.tl)||!C.tl)&&(this.br&&this.br.equals(C.br)||!C.br)};A.fromJQObject=function(C){var F=C.offset(),E,D;return new A(B.fromCoords((E=F.left),(D=F.top)),B.fromCoords(E+C.outerWidth(),D+C.outerHeight()))};A.fromCorners=function(D,C){return new A(D,C)};A.fromCoords=function(E,D,C,F){return A.fromCorners(B.fromCoords(E,D),B.fromCoords(C,F))};A.ZERO_RECTANGLE=null;A.init=function(){B=hcom.common.area.modules.point;A.ZERO_RECTANGLE=this.fromCorners(B.ZERO_POINT,B.ZERO_POINT)};return A}});$.registerModule({name:"hcom.common.popdiv.modules.aligner",dependencies:["hcom.common.modules.html","hcom.common.area.modules.point","hcom.common.area.modules.rectangle"],extendsModule:"hcom.common.modules.emitter",impl:function(){var A,B,E,D,C;E=function(G,F){this.direction=G;this.popdivBounds=F;this.center=null};E.prototype.getPDBoundsCenterDistance=function(F){return this.centerDistance>=0?this.centerDistance:(this.centerDistance=F.distanceTo(this.popdivBounds.getCenter()))};E.createRelativeDistanceComparator=function(F){return function(J,I){var H=J.getPDBoundsCenterDistance(F),G=I.getPDBoundsCenterDistance(F);return H-G}};E.createOverlappingAreaComparator=function(F){return function(H,G){var J=H.popdivBounds.intersect(F).getArea(),I=G.popdivBounds.intersect(F).getArea();return J-I}};B=function(){this.lastPdBounds=null;this.lastRefBounds=null;this.lastVpBounds=null;this.allowedDirectionMap=null;this.allowedDirectionList=null;this.preferredDirection=null;this.directionalOffsets=null;this.offsets=B.NO_OFFSETS;this.customDirectionalOffsets=null;this.popdivShellOffsets=B.NO_OFFSETS;this.$reference=null;this.lastAlignment_=null;this.setPreferredDirection(B.DIRECTIONS.NONE);this.setAllowedDirections.apply(this,B.getAllDirectionsList())};B.getAllDirectionsList=function(){var I=B.ALL_DIRECTIONS,G,H,F;if(!I){I=[];G=Object.getKeys(B.DIRECTIONS);for(H=0;(F=G[H]);H++){I.push(B.DIRECTIONS[F])}I.splice($.inArray(B.DIRECTIONS.NONE,I),1);B.ALL_DIRECTIONS=I}return I};B.offsetsToRectangle=function(F){return C.fromCorners(D.fromCoords(F.left,F.top),D.fromCoords(F.bottom,F.right))};B.prototype={align:function(L,J){var I=A.getDimensions(L.getShell()),H=A.getViewportDimensions(),K=J||this.$reference,G=K?A.getDimensions(K):H,F;if(!(I.equals(this.lastPdBounds)&&G.equals(this.lastRefBounds)&&H.equals(this.lastVpBounds))){this.lastAlignment_=F=this.calculateAlignment_(this.popdivShellOffsets===B.NO_OFFSETS?I:I.contract(this.popdivShellOffsets),(this.lastRefBounds=G),(this.lastVpBounds=H));L.setPosition(F.popdivBounds.tl);this.lastPdBounds=A.getDimensions(L.getShell())}return this.lastAlignment_},setPreferredDirection:function(F){this.preferredDirection=F;return this},setDefaultReference:function(F){this.$reference=F;return this},setAllowedDirections:function(J){var G,I,H=$.isArray(J)?J:Array.prototype.slice.call(arguments,0),F={};for(G=0;(I=H[G]);G++){F[I]=true}this.allowedDirectionList=H;this.allowedDirectionMap=F;return this},setDirectionalOffsets:function(F){this.offsets=F;return this},setPopdivShellOffsets:function(F){this.popdivShellOffsets=F;return this},selectBestAlignment_:function(J,F,K){var I,G,H;if(J.length){I=E.createRelativeDistanceComparator(K.getCenter());J.sort(I);for(H=0;(G=J[H])&&G.direction!==this.preferredDirection;H+=1){}G=G||J[0]}else{console.assert(F.length>0);I=E.createOverlappingAreaComparator(K);F.sort(I);G=F[F.length-1]}return G},setCustomDirectionalOffsets:function(F){this.customDirectionalOffsets=F;return this},buildDirectionalOffsets_:function(){var H,I,G={},F,J;if(this.offsets===B.NO_OFFSETS){for(H=0;(I=this.allowedDirectionList[H])>=0;H++){G[I]=null}}else{for(H=0;(I=this.allowedDirectionList[H])>=0;H++){switch(I){case B.DIRECTIONS.TOP:case B.DIRECTIONS.TOP_LEFT:case B.DIRECTIONS.TOP_RIGHT:case B.DIRECTIONS.RIGHT_TOP:case B.DIRECTIONS.LEFT_TOP:J=-this.offsets.bottom;break;case B.DIRECTIONS.BOTTOM:case B.DIRECTIONS.BOTTOM_LEFT:case B.DIRECTIONS.BOTTOM_RIGHT:case B.DIRECTIONS.RIGHT_BOTTOM:case B.DIRECTIONS.LEFT_BOTTOM:J=this.offsets.top;break;default:J=0;break}switch(I){case B.DIRECTIONS.LEFT:case B.DIRECTIONS.BOTTOM_LEFT:case B.DIRECTIONS.TOP_LEFT:case B.DIRECTIONS.LEFT_TOP:case B.DIRECTIONS.LEFT_BOTTOM:F=-this.offsets.right;break;case B.DIRECTIONS.RIGHT:case B.DIRECTIONS.TOP_RIGHT:case B.DIRECTIONS.RIGHT_TOP:case B.DIRECTIONS.BOTTOM_RIGHT:case B.DIRECTIONS.RIGHT_BOTTOM:F=this.offsets.left;break;default:F=0;break}G[I]=D.fromCoords(F,J)}}return G},getDirectionalOffsets_:function(F){return this.directionalOffsets&&this.directionalOffsets[F]||(this.directionalOffsets=this.buildDirectionalOffsets_())[F]},getCustomDirectionalOffset_:function(J,I,G){var H=this.customDirectionalOffsets,F;if(H&&(F=H[J])){if($.isFunction(F)){F=F(I,G)}}else{F=G}return F},applyDirectionalOffsets_:function(G,I,H){var F=this.getCustomDirectionalOffset_(I,H,this.getDirectionalOffsets_(I));return F?G.add(F):G},calculateAlignment_:function(J,K,U){var Q=[],I=[],S,V,W,H,G=K.getCenter(),L=J.br.sub(J.tl),F=L.div(2),T=G.x-F.x,R=G.y-F.y,M=K.tl.y-L.y,N=K.br.y,X=K.tl.x-L.x,O=K.br.x,P;for(P=0;(W=this.allowedDirectionList[P]);P++){switch(W){case B.DIRECTIONS.TOP:V=new D(T,M);break;case B.DIRECTIONS.RIGHT:V=new D(O,R);break;case B.DIRECTIONS.BOTTOM:V=new D(T,N);break;case B.DIRECTIONS.LEFT:V=new D(X,R);break;case B.DIRECTIONS.RIGHT_TOP:case B.DIRECTIONS.TOP_RIGHT:V=new D(O,M);break;case B.DIRECTIONS.RIGHT_BOTTOM:case B.DIRECTIONS.BOTTOM_RIGHT:V=new D(O,N);break;case B.DIRECTIONS.TOP_LEFT:case B.DIRECTIONS.LEFT_TOP:V=new D(X,M);break;case B.DIRECTIONS.BOTTOM_LEFT:case B.DIRECTIONS.LEFT_BOTTOM:V=new D(X,N);break}V=this.applyDirectionalOffsets_(V,W,K);H=new E(W,new C(V,V.add(L)));S=U.isRectangleInside(H.popdivBounds)?Q:I;S.push(H)}return this.selectBestAlignment_(Q,I,U)}};B.init=function(){A=hcom.common.modules.html;D=hcom.common.area.modules.point;C=hcom.common.area.modules.rectangle};B.createForReference=function(G){var H=this,F=new H();F.setDefaultReference(G);return F};B.NO_OFFSETS={top:0,left:0,bottom:0,right:0};B.DIRECTIONS={NONE:0,TOP:1,RIGHT:2,BOTTOM:3,LEFT:4,TOP_LEFT:5,TOP_RIGHT:6,RIGHT_TOP:7,RIGHT_BOTTOM:8,LEFT_TOP:9,LEFT_BOTTOM:10,BOTTOM_LEFT:11,BOTTOM_RIGHT:12};B.ALL_DIRECTIONS=null;return B}});$.registerModule({name:"hcom.common.popdiv.modules.popdiv_simple_aligner",dependencies:["hcom.common.popdiv.modules.aligner","hcom.common.area.modules.point"],extendsModule:"hcom.common.popdiv.modules.aligner",impl:function(){var A,B;A=function(){A.superclass.constructor.call(this);A.superclass.setCustomDirectionalOffsets.call(this,A.CUSTOM_DIRECTIONAL_OFFSETS).setDirectionalOffsets(A.OFFSETS);this.currentTailDirection_=null;this.$tail_=null};A.prototype.align=function(E,C){var D=A.superclass.align.call(this,E,C);this.setTailDirection_(E,D.direction);return D};A.prototype.setTailDirection_=function(H,D){var F,G,E,C;if(!this.currentTailDirection_){C=this.getTail_(H).attr("class").split(/\s+/)[1];for(E=0;(F=A.TAIL_CLASS_MAP[(G=this.allowedDirectionList[E])])&&F!==C;E+=1){}console.assert(!!F);this.currentTailDirection_=G}if(D!==this.currentTailDirection_){this.getTail_(H).removeClass(A.TAIL_CLASS_MAP[this.currentTailDirection_]).addClass(A.TAIL_CLASS_MAP[D]);this.currentTailDirection_=D}};A.prototype.getTail_=function(C){return this.$tail_||(this.$tail_=C.getShell().find(">div:first"))};A.calcXLeftOffset_=function(D,C){return B.fromCoords(D.getCenter().x-D.tl.x+24,C&&C.y||0)};A.calcXRightOffset_=function(D,C){return B.fromCoords(D.tl.x-D.getCenter().x-24,C&&C.y||0)};A.calcYTopOffset_=function(D,C){return B.fromCoords(C&&C.x||0,D.getCenter().y-D.tl.y+28)};A.calcYBottomOffset_=function(D,C){return B.fromCoords(C&&C.x||0,D.getCenter().y-D.br.y-28)};A.OFFSETS={top:15,left:15,bottom:15,right:15};A.CUSTOM_DIRECTIONAL_OFFSETS=null;A.TAIL_CLASS_MAP=null;A.init=function(){var D=hcom.common.popdiv.modules.aligner,C={},E={};B=hcom.common.area.modules.point;C[D.DIRECTIONS.BOTTOM_LEFT]=C[D.DIRECTIONS.TOP_LEFT]=A.calcXLeftOffset_;C[D.DIRECTIONS.BOTTOM_RIGHT]=C[D.DIRECTIONS.TOP_RIGHT]=A.calcXRightOffset_;C[D.DIRECTIONS.LEFT_TOP]=C[D.DIRECTIONS.RIGHT_TOP]=A.calcYTopOffset_;C[D.DIRECTIONS.LEFT_BOTTOM]=C[D.DIRECTIONS.RIGHT_BOTTOM]=A.calcYBottomOffset_;A.CUSTOM_DIRECTIONAL_OFFSETS=C;E[D.DIRECTIONS.BOTTOM_LEFT]="top_right";E[D.DIRECTIONS.TOP_LEFT]="bottom_right";E[D.DIRECTIONS.BOTTOM_RIGHT]="top_left";E[D.DIRECTIONS.TOP_RIGHT]="bottom_left";E[D.DIRECTIONS.LEFT_TOP]="right_bottom";E[D.DIRECTIONS.RIGHT_TOP]="left_bottom";E[D.DIRECTIONS.LEFT_BOTTOM]="right_top";E[D.DIRECTIONS.RIGHT_BOTTOM]="left_top";E[D.DIRECTIONS.TOP]="bottom_middle";E[D.DIRECTIONS.BOTTOM]="top_middle";E[D.DIRECTIONS.LEFT]="right_middle";E[D.DIRECTIONS.RIGHT]="left_middle";A.TAIL_CLASS_MAP=E};return A}});$.registerModule({name:"hcom.common.popdiv.modules.popdiv",extendsModule:"hcom.common.modules.emitter",dependencies:["hcom.common.area.modules.click"],impl:function(){var B,A;B=function(C){B.superclass.constructor.call(this);this.addEvents(B.OPEN_EVENT,B.CLOSE_EVENT);this.$shell=$(C);console.assert(this.$shell.length>0);this.isOpened=this.$shell.is(":visible");this.closeSelector=null;this.closeHandlerBound=false;this.closeOnOuterClick=false;this.onCloseClickPrx_=$.proxy(this.onCloseClick_,this);this.onOpenClickPrx_=$.proxy(this.onOpenClick_,this);this.onOpenClickPDPrx_=$.proxy(this.onOpenClickPD_,this);this.clickTriggers=null;this.clickArea=null;this.openEvt=null;this.aligner=null};B.prototype={open:function(){this.setOpened(true)},close:function(){this.setOpened(false)},onCloseClick_:function(C){var D=false;if(this.openEvt){if(typeof C.srcElement==="undefined"){D=C.target===this.openEvt.target}else{D=C.srcElement===this.openEvt.srcElement}this.openEvt=null}if(!D){this.close()}},onOpenClick_:function(C){this.openEvt=C;this.open()},onOpenClickPD_:function(C){C.preventDefault();this.onOpenClick_(C)},setCloseSelector:function(C){if(this.isOpened){if(this.closeHandlerBound){this.bindCloseDelegate_(false)}if(C){this.closeSelector=C;this.bindCloseDelegate_(true)}}this.closeSelector=C;return this},createClickArea_:function(E){var D,C;console.assert(!this.clickArea===E);if(E){this.clickArea=D=A.rectangular(this.$shell);C=D.addReceiver}else{D=this.clickArea;C=D.removeReceiver}C.call(D,A.OUTER_CLICK_EVENT,this.onCloseClick_,this);if(!E){D.destroy();D=this.clickArea=null}return D},setCloseOnOuterClick:function(C){if(C!==this.closeOnOuterClick){this.closeOnOuterClick=C;if(this.isOpened){this.createClickArea_(true)}}return this},setAligner:function(C){this.aligner=C;return this},setPosition:function(C,D){if(!D){this.$shell.offset(C.asOffset())}else{this.$shell.css(C.asOffset())}},bindCloseDelegate_:function(D){var C=D?$.fn.on:$.fn.off;if(D!==this.closeHandlerBound){C.call(this.$shell,"click",this.closeSelector,this.onCloseClickPrx_);this.closeHandlerBound=D}},changeOpenedState_:function(D){var C;if(!this.closeHandlerBound&&D&&this.closeSelector){this.bindCloseDelegate_(true)}this.updateShell_(D);if(D&&(C=this.aligner)){C.align(this)}if(this.closeOnOuterClick){this.createClickArea_(D)}this.emitEvent(D?B.OPEN_EVENT:B.CLOSE_EVENT)},setOpened:function(C){if(C!==this.isOpened){this.isOpened=C;this.changeOpenedState_(C)}return this},addClickTrigger:function(E,D){var F=this.clickTriggers||(this.clickTriggers=[]),C=$.isFunction(E.bind)?E:$(E);C.on("click.popdiv_component",D?this.onOpenClickPrx_:this.onOpenClickPDPrx_);F.push(C);return this},updateShell_:function(C){this.$shell.css("display",C?"block":"none")},getShell:function(){return this.$shell},isVisible:function(){return this.isOpened}};B.OPEN_EVENT="PopdivCmp.open";B.CLOSE_EVENT="PopdivCmp.close";B.init=function(){A=hcom.common.area.modules.click};B.create=function(C){return new B(C)};return B}});$.registerModule({name:"hcom.common.chat.modules.eventhandler",dependencies:["hcom.common.modules.sitecatalyst"],impl:function(B){var A;A=function(C){this.config=$.extend({},A.DEFAULTS,C);if(this.config.chatType==="link"){this.config=$.extend(true,this.config,A.STATIC_DEFAULTS)}};A.prototype={onChatAccepted:function(){if(!this.config.chatType==="link"){this.publishRejectEvent_()}},onChatInvited:function(){},onChatNotInvited:function(){},onChatDeclined:function(){this.publishRejectEvent_()},onChatIgnored:function(){},onAgentUnavailable:function(){},publishRejectEvent_:function(){var D=Object.getReferenceToNestedName(this.config.pageAttributesNS),C=D?D.pageType:"HOTELDETAILS";$.ajax({url:"/event/publish.html?events=REJECT_CHAT&pageType="+C+"&sourceType=JAVA_SCRIPT",dataType:"json",type:"GET"})},sendReportForEvent_:function(C){hcom.common.modules.sitecatalyst.sendPartialReport({prop61:C,eVar58:C,prop59:s.pageName,eVar60:s.pageName,prop5:s.eVar13,eVar13:s.eVar13,prop32:s.eVar43,eVar43:s.eVar43,prop36:s.eVar4,eVar4:s.eVar4,prop27:s.prop27,prop28:s.prop28,eVar2:s.eVar26},"",C)}};A.DEFAULTS={reports:{identified:"Chat :: Customer Identified",invited:"Chat :: Invited",accepted:"Chat :: Invite Accepted",declined:"Chat :: Invite Declined",ignored:"Chat :: Invite Ignored",unavailable:"Chat :: Agent Unavailable",notInvited:"Chat :: Invited - Not shown"},userAttributesNS:"hcom.common.sitecatalyst.user.attributes",pageAttributesNS:"hcom.configuration.page_attributes"};A.STATIC_DEFAULTS={reports:{invited:"Chat :: Invited Static - Shown",accepted:"Chat :: Invite static Accepted",notInvited:"Chat :: Invited Static - Not shown"}};A.reportFiredAttributesOnPageLoad_=function(){var D=Object.getReferenceToNestedName(A.DEFAULTS.userAttributesNS),C=A.DEFAULTS.reports.identified;if(!!D){}};A.init=function(){A.reportFiredAttributesOnPageLoad_()};return A}});$.registerModule({name:"hcom.common.chat.modules.invitation_popup",dependencies:["hcom.common.chat.modules.eventhandler"],impl:function(C){var E,A=new $.formatter();function D(F){return((F||F===0)&&encodeURIComponent(F))||""}function B(){var F="";if(s){F+="&P59="+D(s.eVar60||s.pageName||s.prop59);F+="&P5="+D(s.prop5||s.eVar13);F+="&P32="+D(s.prop32||s.eVar43);F+="&P36="+D(s.prop36||s.eVar4);F+="&P27="+D(s.prop27);F+="&P28="+D(s.prop28);F+="&E26="+D(s.eVar26);F+="&P60="+D(s.prop60||s.eVar57);F+="&SA="+D(hcom.locale.rules.OMNITURE_S_ACCOUNT);F+="&svi="+D((window.TLGetCookie&&window.TLGetCookie("s_vi"))||"")}return F}E=function(F){this.config=$.extend(this.config||{},E.DEFAULTS,F);console.assert(this.config.eventHandler);console.assert(this.config.parameters);this.build_();this.$shell=$(this.config.shellSelector);this.bind_()};E.prototype={show:function(){if(this.config.parameters.animationType==="from_top"){var G=$.win.height()/2-this.$shell.height(),F=($.win.width()-this.$shell.width())/2;this.$shell.css("left",F);this.$shell.fadeIn().delay(10).animate({top:G},this.config.animateSpeed)}else{this.$shell.css({top:"auto",left:"auto",right:15,bottom:15});this.$shell.slideDown("slow")}this.config.eventHandler.onChatInvited();setTimeout($.proxy(function(){this.hide()},this),this.config.delayToHide)},hide:function(){if(this.config.parameters.animationType==="from_top"){this.$shell.animate({top:0},this.config.animateSpeed,$.proxy(function(){this.reportIgnored();this.$shell.fadeOut()},this))}else{this.reportIgnored();this.$shell.slideUp("slow")}},reportIgnored:function(){if(!this.userAction){this.unbind_();this.config.eventHandler.onChatIgnored()}},showChatForm:function(){var H=this.config.chatFormWidth,F=this.config.chatFormHeight,I=window.open("about:blank","chatclient","width="+H+",height="+F+",scrollbars=0"),G;if(this.config.parameters.tfs_dept===null){I.close();return }G="https://"+hcom.locale.secureUrl+"/psp247/forms/Chat.html?";G+="ai="+this.config.parameters.tfs_accountid;G+="&d="+this.config.parameters.tfs_dept_id;G+="&ww="+H;G+="&wh="+F;G+="&De="+D(this.config.parameters.tfs_destination);G+="&AD="+D(this.config.parameters.tfs_arrivalDate);G+="&DD="+D(this.config.parameters.tfs_departureDate);G+="&NR="+D(this.config.parameters.tfs_numberOfRooms);G+="&NA="+D(this.config.parameters.tfs_numberOfAdults);G+="&NC="+D(this.config.parameters.tfs_numberOfChildren);G+="&HN="+D(this.config.parameters.tfs_Product1Name?this.config.parameters.tfs_Product1Name:this.config.parameters.tfs_hotelName);G+="&H60="+D(s.prop60);G+="&v=btn";G+=B();G+="&rid=96761&iid=64521";G+="&u="+encodeURIComponent(this.config.parameters.tfs_url||window.location.href);I.location=G},build_:function(){var F=this.config.parameters.popupTemplate;$.appendBody(F)},bind_:function(){$.body.on("click","#iiacc",$.proxy(function(){this.userAction=true;this.config.eventHandler.onChatAccepted();this.hide();this.showChatForm()},this));$.body.on("click","#iidecl, #iidecl2",$.proxy(function(){this.userAction=true;this.config.eventHandler.onChatDeclined();this.hide()},this))},unbind_:function(){$.body.off("click","#iiacc, #iidecl, #iidecl2")}};E.DEFAULTS={shellSelector:"#invitelayer",eventHandler:null,parameters:null,chatFormWidth:500,chatFormHeight:320,delayToHide:10000,animateSpeed:2000};return E}});$.registerModule({name:"hcom.common.chat.modules.invitation",dependencies:["hcom.common.chat.modules.eventhandler","hcom.common.chat.modules.invitation_popup"],impl:function(A){var B;B=function(C){this.settings=$.extend({},B.DEFAULTS,C);this.InvitationPopupModule=null;this.EventH=null;this.chatParameters=Object.getReferenceToNestedName("hcom.common.chat.parameters");this.EventH=hcom.common.chat.modules.eventhandler;this.chatEventHandler=new this.EventH(this.settings);this.invitationPopup=null;this.showChatWindow(this.settings.forceCheckAgent)};B.prototype={agent_available:function(){if(this.settings.chatType==="link"){this.initChatLink();this.chatEventHandler.onChatInvited()}else{this.invitationPopup.show()}},agent_not_available:function(){this.chatEventHandler.onAgentUnavailable()},check_agent:function(D,F){var E=Math.round(+new Date()/1000),C=window.location.protocol+"//rs.instantservice.com/resources/smartbutton/"+D+"/"+F+"/available.gif?src=ii3&ts="+E;$("<img />").on({load:$.proxy(this.agent_available,this),error:$.proxy(this.agent_not_available,this)}).prop("src",C)},showChatWindow:function(C){if(!!this.chatParameters&&(this.chatParameters.chat_enabled===true||C)){this.InvitationPopupModule=hcom.common.chat.modules.invitation_popup;this.invitationPopup=new this.InvitationPopupModule({eventHandler:this.chatEventHandler,parameters:this.chatParameters});this.check_agent(this.chatParameters.tfs_accountid,this.chatParameters.tfs_dept_id)}},initChatLink:function(){var C=this,E=Object.getReferenceToNestedName("hcom.locale.chat.messages"),D=$(this.settings.chatLinkContainerSelector);D.show().on("click","a",function(F){C.invitationPopup.showChatForm();C.chatEventHandler.onChatAccepted();F.preventDefault()})},initCaptureAjaxComplete:function(){$.body.ajaxComplete($.proxy(this.ajaxCompleteFunction,this))},ajaxCompleteFunction:function(F,G,D){var C=this,E=true;if(!D.disableChatCapture&&G.responseXML){$(G.responseXML).find("offerChat").each(function(){if(this.textContent==="true"){C.showChatWindow(E)}})}}};B.DEFAULTS={chatLinkContainerSelector:"#chatLinkContainer",forceCheckAgent:false,chatType:"popup"};return B}});$.registerModule({name:"hcom.common.date",impl:function(){var A=function(F,B,C,E){var D=!F?new Date():(F instanceof Date?F:null);if(D){this.set(D.getFullYear(),D.getMonth(),D.getDate())}else{if((B!==undefined||C!==undefined)&&E!==true){this.setFromInstance_(A.normalizeDate(F,B||0,C===undefined?1:C))}else{this.set(F,B||0,C||1)}}};A.getDay=function(D,F,B){var G=Math.floor(D/100),E=A.YEAR_DAY_TBL[G],C=D%100;if(!(E>=0)){E=(A.YEAR_DAY_TBL[G]=(3-G%4)*2)}E+=C+Math.floor(C/4)+(F<2&&A.isLeapYear(D)?A.MONTH_DAY_LEAP_TBL[F]:A.MONTH_DAY_TBL[F])+B;return E%7};A.adjustDST=function(B,C){var D=B.getDate(),E;if(D!==C){E=D<C?1:-1;B.setUTCHours(B.getUTCHours()+E)}return B};A.isLeapYear=function(B){return B%4===0&&(B%100!==0||B%400===0)};A.getNumberOfDaysInMonth=function(B,C){switch(C){case A.month.FEB:return A.isLeapYear(B)?29:28;case A.month.JUN:case A.month.SEP:case A.month.NOV:case A.month.APR:return 30}return 31};A.normalizeDate=function(E,H,C){var B=E,D,G=C-1,F;B+=Math.floor(H/12);D=H%12;if(D<0){D+=12}while(G<0){if(--D<0){B-=1;D=11}G+=A.getNumberOfDaysInMonth(B,D)}while(G>=(F=A.getNumberOfDaysInMonth(B,D))){G-=F;if(++D>11){B+=1;D=0}}return new A(B,D,G+1,true)};A.prototype={set:function(C,D,B){this.year=C;this.month=D;this.date=B;return this},setFromInstance_:function(B){return this.set(B.year,B.month,B.date)},isLeapYear:function(){return A.isLeapYear(this)},getYear:function(){return this.year},getMonth:function(){return this.month},getDate:function(){return this.date},getDay:function(){return A.getDay(this.year,this.month,this.date)},getJSDate:function(){return A.adjustDST(new Date(this.year,this.month,this.date),this.date)},addDays:function(B){return this.add(0,0,B)},addMonths:function(B){return this.add(0,B)},addYears:function(B){return this.add(B)},add:function(D,H,C){var B=H||0,I=C||0,G=I===0&&(D!==0||B!==0)&&this.date>28,E,F=A.normalizeDate(this.year+D,this.month+B,G?1:this.date+I);if(G){F.date=((E=A.getNumberOfDaysInMonth(F.year,F.month))<this.date)?E:this.date}return this.setFromInstance_(F)},getDayOfYear:function(){var C=this.date,D=this.year,B;for(B=this.month-1;B>=0;--B){C+=A.getNumberOfDaysInMonth(D,B)}return C},getAbsoluteDayOfYear:function(){return this.getDayOfYear()-(this.isLeapYear()&&this.month>1?1:0)},getDaysFromEpoch:function(){var B=this.year-A.EPOCH_YEAR;return B*365+Math.floor((B+1)/4)-Math.floor((B+69)/100)+Math.floor((B+369)/400)+this.getDayOfYear()-1},compareTo:function(B){return this-B},equals:function(B){return B instanceof A&&(this===B||(this.year===B.getYear()&&this.month===B.getMonth()&&this.date===B.getDate))},clone:function(){return new A(this.year,this.month,this.date,true)}};A.prototype.getFullYear=A.prototype.getYear;A.prototype.valueOf=A.prototype.getDaysFromEpoch;A.weekDay={SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6};A.month={JAN:0,FEB:1,MAR:2,APR:3,MAY:4,JUN:5,JUL:6,AUG:7,SEP:8,OCT:9,NOV:10,DEC:11};A.MONTH_DAY_TBL=[0,3,3,6,1,4,6,2,5,0,3,5];A.MONTH_DAY_LEAP_TBL=[6,2];A.YEAR_DAY_TBL=[];A.EPOCH_YEAR=1970;return A}});$.registerModule({name:"hcom.common.lightbox.modules.controller",dependencies:["hcom.common.lightbox.modules.model","hcom.common.lightbox.modules.view.picture_frame","hcom.common.lightbox.modules.view.thumb_bar","hcom.common.modules.keyhandling","hcom.common.modules.glasspane","hcom.common.modules.listener","hcom.common.modules.sitecatalyst"],impl:function(B){var C,A={glasspaneClass:""};C=function(D){this.config=$.extend({},A,D);this.init()};$.extend(C.prototype,{init:function(){if(this.config.glasspaneClass){hcom.common.modules.glasspane.addClass(this.config.glasspaneClass)}this.listeners=function(){var D;return{get:function(E){return D[E]},init:function(E){D={};$.map(["gotoItem","open","close"],function(G,H){var F=G.toCapitalCase()+"Listener",I=new hcom.common.modules.listener();D[G]=I;E["add"+F]=function(K,J){I.addListener(K,J)};E["remove"+F]=function(K,J){I.removeListener(K,J)}})}}}();this.listeners.init(this);this.handleFunctionKeysProxy=$.proxy(this.handleFunctionKeys,this);this.keyListener=new hcom.common.modules.keyhandling.KeyListener($($.browser.msie&&$.browser.version<9?document:window),this.handleFunctionKeysProxy,$.noop,"lightbox")},getModel:function(){return this.model},setModel:function(D){this.model=D;$(this.getModel().getSelector()).on("click",{me:this},function(E){E.data.me.open(E.data.me.getIndexForId($(this).attr("href")));E.stopPropagation();E.preventDefault()})},getSrc:function(D){return this.getModel().getSrc(D)},getRatio:function(D){return this.getModel().getRatio(D)},setRatio:function(D,E){return this.getModel().setRatio(D,E)},getIndexForId:function(D){return this.getModel().getIndexForId(D)},getThumbs:function(){return this.getModel().getThumbs()},getVideoThumbs:function(){return this.getModel().getThumbs("video")},getPhotoThumbs:function(){return this.getModel().getThumbs("img")},isVideo:function(D){return this.getModel().isVideo(D)},next:function(){var D=this.getModel(),F=D.getIndex(),E;D.setIndex(F+1);E=D.getIndex();if(E>F){this.listeners.get("gotoItem").fireEvent(E)}},prev:function(){var D=this.getModel(),F=D.getIndex(),E;D.setIndex(F-1);E=D.getIndex();if(E<F){this.listeners.get("gotoItem").fireEvent(E)}},"goto":function(D){this.listeners.get("gotoItem").fireEvent(D);this.getModel().setIndex(D)},open:function(D){var E=this.getModel();E.setIndex(D);D=E.getIndex();hcom.common.modules.glasspane.show();$("#holding").on("click.lightbox",{controller:this},function(F){if(F.target.id==="holding"){$(this).off("click.lightbox");F.data.controller.close()}});this.listeners.get("open").fireEvent();this.listeners.get("gotoItem").fireEvent(D);this.isOpened=true;this.sendReport(this.isVideo(D))},close:function(){hcom.common.modules.glasspane.hide();this.listeners.get("close").fireEvent();this.isOpened=false},handleFunctionKeys:function(F){if(this.isOpened){var E=hcom.common.modules.keyhandling,D=F.charCode?F.charCode:F.keyCode?F.keyCode:0;switch(D){case E.FUNCTION_KEYS.ESC:this.close();break;case E.FUNCTION_KEYS.LEFT:this[hcom.locale.direction==="RTL"?"next":"prev"]();break;case E.FUNCTION_KEYS.RIGHT:this[hcom.locale.direction==="RTL"?"prev":"next"]();break}F.preventDefault();return true}},sendVideoReport:function(D){s.eVar33="hotel page :: "+D;s.prop33=s.eVar33;hcom.common.modules.sitecatalyst.sendPartialReport({eVar33:s.eVar33,prop33:s.prop33,products:s.products},"event40",(this.getPageName()||s.pageName))},sendThumbnailReport:function(D){s.eVar33=(this.getPageName()||s.pageName)+" :: Big Photos :: "+D;s.prop33=s.eVar33;hcom.common.modules.sitecatalyst.sendPartialReport({eVar33:s.eVar33,prop33:s.prop33},null,D)},sendReport:function(D){if(D){this.sendVideoReport("video loads")}this.sendThumbnailReport("Thumbnail Clicked")},getPageName:function(){return this.pageName},setPageName:function(D){this.pageName=D},preloadImages:function(){var D=this.getModel(),E;for(E=0;E<D.data.length;E++){$.preloadAsyncImage(D.data[E].target)}}});C.createLightbox=function(J,G,M){var F=hcom.common.lightbox.modules.view.picture_frame,I=hcom.common.lightbox.modules.view.thumb_bar,N=hcom.common.lightbox.modules.model,D=hcom.common.lightbox.modules.controller,H,E=new D(G),L,K;if(J){N=J}L=new N("lightbox");E.setModel(L);E.setPageName(M);E.preloadImages();H=new F();K=new I();H.bindTo(E);K.bindTo(E);return E};return C}});$.registerModule({name:"hcom.common.lightbox.modules.model",impl:function(){var A;A=function(C){var B=this;B.name=C||"lightbox";B.data=[];B.index=0;B.fetchVideos();B.fetchImages()};$.extend(A.prototype,{getName:function(){return this.name},getIndex:function(){return this.index},setIndex:function(B){if(B>=0&&B<this.data.length){this.index=B}},getIndexForId:function(C){for(var B=0;B<this.data.length;B++){if(C===this.data[B].target||C===this.data[B].thumb){break}}return B},getSrc:function(B){if(B<this.data.length){if(this.data[B].type==="img"){return'<img src="'+this.data[B].target+'"/>'}else{return{hotelVideoUrl:this.data[B].target}}}},getRatio:function(B){if(B<this.data.length){return this.data[B].ratio}},setRatio:function(B,C){if(B<this.data.length){this.data[B].ratio=C}},getSelector:function(B){return["a[rel=",this.getName(),"]",(B==="video"?":has(.video)":(B==="img"?":not(:has(.video))":""))].join("")},fetchContent:function(C){var B=this;$(B.getSelector(C)).each(function(){var D=$(this);B.data.push({type:C,$el:D,thumb:D.find("img").attr("src"),target:D.attr("href"),title:D.attr("title")||D.find(".title").text()})})},fetchVideos:function(){this.fetchContent("video")},fetchImages:function(){this.fetchContent("img")},getThumbs:function(D){var B=[],C;for(C=0;C<this.data.length;C++){if(!D||D===this.data[C].type){B.push(this.data[C])}}return B},isVideo:function(B){return this.data[B].type==="video"}});return A}});$.registerModule({name:"hcom.common.lightbox.modules.view.general",impl:function(){var A;A=function(B){};A.prototype.bindTo=function(B){};A.prototype.getCssPropAsNum=function(C,B){return parseInt((B||this.dom).css(C),10)||0};return A}});$.registerModule({name:"hcom.common.lightbox.modules.view.picture_frame",extendsModule:"hcom.common.lightbox.modules.view.general",impl:function(){var C="resize.lightbox_picframe_",A=0,B,D;B=function(E){this.init()};$.extend(B.prototype,{init:function(){this.dom=$('<div class="lightbox_picframe hidden"><div class="label"/><div class="content"/><div class="close"/></div>');this.dom.$prev=$('<div class="lightbox_picframe_prev hidden"><div class="arr"/></div>');this.dom.$next=$('<div class="lightbox_picframe_next hidden"><div class="arr"/></div>');this.resizeClass=C+A++;$.body.append(this.dom).append(this.dom.$prev).append(this.dom.$next)},show:function(){$.body.css({marginLeft:-8.5,overflow:"hidden"});this.dom.css({left:$.win.scrollLeft(),top:$.win.scrollTop()})},hide:function(){$.body.css({marginLeft:"",overflow:""});$.win.unbind(this.resizeClass);this.dom.hide().find(">.content").empty();this.dom.$prev.add(this.dom.$next).hide()},showItem:function(L){var F=this.controller.getSrc(L),N=this.controller.getThumbs()[L],E=this.dom.find(">.content").empty(),J=this.dom.find(">.label").empty(),K,H=this.dom.$prev.find(".arr"),I=this.dom.$next.find(".arr"),G="dis_arr";if(typeof F==="object"){if(!D){D=Object.getReferenceToNestedName("hcom.hotel_details.modules.tvtrip_iframe_player")}if(D){K=new D({flashContainer:E,hotelVideoUrl:F.hotelVideoUrl});this.videoShown=true;this.dom.add(this.dom.$prev).add(this.dom.$next).show();this.setFrameSize()}}else{var M=$(F).addClass("loading").load({view:this,idx:L},function(T){var Q=$(this),P=T.data.view.controller,U=T.data.view.dom,O=T.data.idx,R=P.getRatio(O),S;U.add(U.$prev).add(U.$next).show();if(!R){Q.after(S=$("<div/>")).css("visibility","hidden").appendTo($.body);R=Q.width()/Q.height();P.setRatio(O,R);S.before(Q.css("visibility","")).remove()}T.data.view.setFrameSize(R);Q.removeClass("loading")});E.append(M);this.videoShown=false}if(N.title){J.text(N.title)}if(L<1){H.addClass(G)}else{if(H.hasClass(G)){H.removeClass(G)}}if(L>this.controller.getThumbs().length-2){I.addClass(G)}else{if(I.hasClass(G)){I.removeClass(G)}}},setFrameSize:function(E){$.win.unbind(this.resizeClass).bind(this.resizeClass,{view:this},function(N){var I=$.win.height(),G=$.win.width(),Q=N.data.view,J=Q.dom,F=Q.getCssPropAsNum("paddingLeft")+Q.getCssPropAsNum("paddingRight"),M=Q.videoShown,H=$.win.scrollTop(),P,O=0,L,K;if(M){O=491;K=640}else{P=Math.max(I-200-I*0.14-F,64);L=P*E;K=Math.max(G-200-F,64);O=K/E}J.css({left:$.win.scrollLeft(),top:H});J.$prev.add(J.$next).css("top",H+I-198);if(O>P){J.css({marginLeft:(G-L-F)/2,marginTop:I*0.1,height:~~P,width:~~L})}else{J.css({marginLeft:(G-K-F)/2,marginTop:M?(I*0.1+O+224+F>I?Math.max(I-224-F-O,0):I*0.1):I*0.1,height:~~O,width:~~K})}}).trigger(this.resizeClass)},attachEvents:function(){var E={view:this};this.dom.find(">.close").click(E,function(F){F.data.view.controller.close()});this.dom.$prev.click(E,function(F){F.data.view.controller.prev()});this.dom.$next.click(E,function(F){F.data.view.controller.next()})},bindTo:function(F){var E=this;E.controller=F;E.attachEvents();F.addOpenListener(E,function(){E.show()});F.addCloseListener(E,function(){E.hide()});F.addGotoItemListener(E,function(G){E.showItem(G)})}});B.init=function(){};return B}});$.registerModule({name:"hcom.common.lightbox.modules.view.thumb_bar",extendsModule:"hcom.common.lightbox.modules.view.general",impl:function(){var E,D="resize.lightbox_thumbbar_",B=0,C,F,A;E=function(G){this.init()};$.extend(E.prototype,{init:function(){this.dom=$('<div class="lightbox_thumbbar hidden"><div class="scroll_area"><div class="content"><div class="videos hidden"><span class="heading hidden"/></div><div class="photos hidden"><span class="heading hidden"/></div></div></div></div>');this.fmt=new $.formatter();this.fmt.setGlobal();this.dom.find(".photos>.heading").html(this.fmt.format("hotel.details.big.photos.thumbnail.bar.photos")).end().find(".videos>.heading").html(this.fmt.format("hotel.details.big.photos.thumbnail.bar.video"));this.resizeClass=D+B++;$.body.append(this.dom)},show:function(){if(!this.built){this.buildThumbs()}$.body.css({marginLeft:-8.5,overflow:"hidden"});this.dom.css({left:$.win.scrollLeft(),top:$.win.scrollTop()+$.win.height()}).show();$.win.unbind(this.resizeClass).bind(this.resizeClass,{view:this},function(K){var I=$.win.width(),L=K.data.view,N=L.dom.find(".thumb:first"),H=N.outerWidth()+L.getCssPropAsNum("marginLeft",N)+L.getCssPropAsNum("marginRight",N),M=L.controller.getThumbs().length*H,O=Math.min(Math.min(A.outerWidth(),I-10),M),J=L.dom.find(".scroll_area"),G=L.getCssPropAsNum("marginLeft",J)+L.getCssPropAsNum("marginRight",J);L.dom.css({left:$.win.scrollLeft()+(I-O)/2,top:$.win.scrollTop()+$.win.height(),width:O});J.css({width:L.dom.width()-G})}).trigger(this.resizeClass)},hide:function(){$.body.css({marginLeft:"",overflow:""});$.win.unbind(this.resizeClass);this.dom.hide()},showItem:function(P){var R=this,S=R.dom.find("[rel=goto_"+P+"]"),O=S.outerWidth(),Q=R.dom.find(".videos"),H={},G=R.dom.find(".content").width(),K=!!S.parent(".videos")[0],M,J,L,I=Q.find(".thumb:first")[0],N=Q.width()+(I?R.getCssPropAsNum("marginRight",Q):0);if(S[0]){R.dom.find(".selected").removeClass("selected");J=S.find(".frame").addClass("selected").end().position().left;M=J-O*(C?-2:1);L=R.dom.find(".scroll_area");if(C&&$.browser.webkit){L.animate({scrollLeft:(K?R.dom.find(".photos").width():0)+J+N+O-L.width()},100)}else{if(C&&S.parent(".videos")[0]){L.animate({scrollLeft:M-S.outerWidth()*2},100)}else{L.animate({scrollLeft:((C&&!$.browser.webkit?G:0)+(M+(K?0:N*(C?0:1)))*(C&&!$.browser.webkit?-1:1))*(C&&!$.browser.msie&&!$.browser.webkit?-1:1)},100)}}H[C?"marginRight":"marginLeft"]=Math.min(Math.max(C?(P-(I?1:0)-R.controller.getVideoThumbs().length)*(O+R.getCssPropAsNum("marginRight",S)):M,0),G-N-L.width());R.dom.find(".photos .heading").animate(H,100)}},attachEvents:function(){var G={view:this};this.dom.delegate("[rel^=goto]","click",{view:this},function(J){var I=+$(this).attr("rel").replace(/\D/g,""),H=J.data.view;H.controller["goto"](I);H.controller.sendReport(H.controller.isVideo(I))})},bindTo:function(H){var G=this;G.controller=H;G.buildThumbs();G.attachEvents();H.addOpenListener(G,function(){G.show()});H.addCloseListener(G,function(){G.hide()});H.addGotoItemListener(G,function(I){G.showItem(I)})},buildThumbs:function(){var P=this,J=P.controller.getVideoThumbs(),M=P.controller.getPhotoThumbs(),G=0,N=function(R){R.preventDefault()},H=P.dom.find(".content"),L=P.dom.find(".photos"),O=P.dom.find(".videos"),Q,K,I;for(K=0;K<J.length;K++){Q=$('<span class="thumb"><a class="frame" href="#"/></span>').attr({"class":"thumb",rel:"goto_"+K}).find(".frame").click(N).append($("<img/>").attr("src",J[K].thumb)).append('<span class="video"/>').end();if(J[K].title){Q.append($('<span class="label"/>').text(J[K].title))}O.append(Q);G+=Q.outerWidth()+P.getCssPropAsNum("marginLeft",Q)+P.getCssPropAsNum("marginRight",Q);if(K<1){P.dom.find(".videos>.heading").add(O).show();G+=P.getCssPropAsNum("marginLeft",O)+P.getCssPropAsNum("marginRight",O)}P.built=true}for(I=0;K<J.length+M.length;K++,I++){Q=$('<span class="thumb"><a class="frame" href="#"/></span>').attr({"class":"thumb",rel:"goto_"+K}).find(".frame").click(N).append($("<img/>").attr("src",M[I].thumb)).end();L.append(Q);G+=Q.outerWidth()+P.getCssPropAsNum("marginLeft",Q)+P.getCssPropAsNum("marginRight",Q);if(I<1){P.dom.find(".photos>.heading").add(L).show()}P.built=true}if(F){G+=30}H.width(G)}});E.init=function(){A=$("#g");F=$.browser.msie&&$.browser.version<7;C=hcom.locale.direction==="RTL"};return E}});$.registerModule({name:"hcom.common.modules.top_destination",dependencies:["hcom.common.modules.top_destination_popup","hcom.common.area.modules.point","hcom.common.modules.keyhandling"],extendsModule:"hcom.common.modules.emitter",impl:function(D){var F,B;function A(G){if($.browser.msie){G.cancelBubble=true}else{G.stopPropagation()}}function C(G){if($.browser.msie){G.returnValue=false}else{G.preventDefault()}}function E(){if(typeof hcom.common.top_destination_suggest!=="undefined"){return hcom.common.top_destination_suggest.main_uuid}else{return""}}F=function(G){F.superclass.constructor.call(this);this.cfg=$.extend({},F.DEFAULTS,G);this.addEvents(F.DESTINATION_SELECTED_EVENT);this.onSuccessProxy=$.proxy(this.onSuccess_,this);this.onErrorProxy=$.proxy(this.onError_,this);this.onDestinationSelectedPrx_=$.proxy(this.onDestinationSelected_,this);this.onASATypingPrx_=$.proxy(this.onASATyping_,this);this.handleFunctionKeysPrx_=$.proxy(this.handleFunctionKeys_,this);this.$destination_field=$("#"+this.cfg.destination_field_id);this.rowSelector=[this.cfg.moduleSelector," ",this.cfg.rowSelector].join("");this.highlightByMouse()};F.prototype={loadTopDestinations:function(){if(!Object.getReferenceToNestedName(this.cfg.top_destination_url)){$.ajax({url:this.cfg.top_destination_url,dataType:"json",success:this.onSuccessProxy,error:this.onErrorProxy})}},getDestinationName:function(J){var G=Object.getReferenceToNestedName(this.cfg.top_destination_namespace).top_destination,H,I;for(I=0;I<G.length;I++){if(G[I].id===J){H=G[I];break}}return H},bindTopDestinationPopup:function(H){this.topDestinationPopup=new hcom.common.modules.top_destination_popup({namespace:this.cfg.top_destination_namespace,controllInstance:this});var G=hcom.common.area.modules.point.fromCoords(H.offset().left,H.offset().top+H.parent().height());this.topDestinationPopup.setPosition(G);this.topDestinationPopup.setCloseOnOuterClick(true);this.topDestinationPopup.addClickTrigger(H);this.topDestinationPopup.addReceiver(hcom.common.modules.top_destination_popup.DESTINATION_SELECTED_EVENT,this.onDestinationSelectedPrx_,this)},bindASATypingHandler:function(I){var H=hcom.common.modules.autosuggest,K=hcom.common.modules.autosuggest_srs,J,G;J=H;G=J[I.attr("id")];if(!G){J=K;G=K[I.attr("id")]}G.emitter.addReceiver(J.AutoSuggest.TYPING_EVENT,this.onASATypingPrx_,this)},onSuccess_:function(I,J,H){if(I.top_destination&&I.top_destination.length){$.namespace(this.cfg.top_destination_namespace,I);this.bindTopDestinationPopup(this.$destination_field);this.bindASATypingHandler(this.$destination_field);this.keyListener=new hcom.common.modules.keyhandling.KeyListener(this.$destination_field,this.handleFunctionKeysPrx_,$.noop,"topdestination");var G=this.topDestinationPopup.getShell().find("li");this.numberOfRows=G.length;this.$firstRow=G.first();this.$lastRow=G.last();this.data=I}},onError_:function(G,I,H){},onDestinationSelected_:function(G){this.emitEvent(F.DESTINATION_SELECTED_EVENT,G)},onASATyping_:function(){if(!this.$destination_field.val()){this.resetHighlight();B=null;this.topDestinationPopup.open();$(this.rowSelector).find("span").textOverflow({title:true})}else{this.topDestinationPopup.close()}},handleFunctionKeys_:function(G){var H=G.charCode?G.charCode:G.keyCode?G.keyCode:0;if(this.topDestinationPopup){if(!this.topDestinationPopup.isVisible()){return true}switch(H){case hcom.common.modules.keyhandling.FUNCTION_KEYS.ESC:this.topDestinationPopup.close();return false;case hcom.common.modules.keyhandling.FUNCTION_KEYS.TAB:case hcom.common.modules.keyhandling.FUNCTION_KEYS.ENTER:C(G);A(G);this.selectRowByKey();this.topDestinationPopup.close();return false;case hcom.common.modules.keyhandling.FUNCTION_KEYS.UP:case hcom.common.modules.keyhandling.FUNCTION_KEYS.DOWN:C(G);A(G);this.highlightByArrowKeys(H);return false;case hcom.common.modules.keyhandling.FUNCTION_KEYS.LEFT:case hcom.common.modules.keyhandling.FUNCTION_KEYS.RIGHT:if(B){C(G);A(G);this.highlightByArrowKeys(H);return false}}}return true},selectRowByKey:function(){if(B){var G={},H=/id_(.*)/,I=parseInt(B.attr("id").match(H)[1],10);G.id=I;G.name=this.getDestinationName(I);this.emitEvent(F.DESTINATION_SELECTED_EVENT,G)}},highlightByArrowKeys:function(H){var G;this.resetHighlight();if(B){G=B.index();if(this.topDestinationPopup.cfg.type==="list"){if(H===hcom.common.modules.keyhandling.FUNCTION_KEYS.UP){B=!B||B.attr("id")===this.$firstRow.attr("id")?this.$lastRow:B.prev()}else{if(H===hcom.common.modules.keyhandling.FUNCTION_KEYS.DOWN){B=!B||B.attr("id")===this.$lastRow.attr("id")?this.$firstRow:B.next()}}}else{if(H===hcom.common.modules.keyhandling.FUNCTION_KEYS.LEFT){B=!B||B.attr("id")===this.$firstRow.attr("id")?this.$lastRow:B.prev()}else{if(H===hcom.common.modules.keyhandling.FUNCTION_KEYS.RIGHT){B=!B||B.attr("id")===this.$lastRow.attr("id")?this.$firstRow:B.next()}else{if(H===hcom.common.modules.keyhandling.FUNCTION_KEYS.DOWN){if(B.nextAll().eq(this.cfg.number_of_columns-1).length!==0){B=B.nextAll().eq(this.cfg.number_of_columns-1)}else{if(this.numberOfRows%this.cfg.number_of_columns===0){B=(G+1)%this.cfg.number_of_columns===1?this.$firstRow:this.$firstRow.nextAll().eq(Math.abs((G+1)%this.cfg.number_of_columns-2))}else{if((this.numberOfRows-(G+1))%this.cfg.number_of_columns!==0&&(this.numberOfRows-(G+1))>=2){B=this.$firstRow}else{B=(G+1)%this.cfg.number_of_columns-2<0?this.$firstRow:this.$firstRow.nextAll().eq((G+1)%this.cfg.number_of_columns-2)}}}}else{if(H===hcom.common.modules.keyhandling.FUNCTION_KEYS.UP){if(B.prevAll().eq(this.cfg.number_of_columns-1).length!==0){B=B.prevAll().eq(this.cfg.number_of_columns-1)}else{if(this.numberOfRows%this.cfg.number_of_columns===0){B=this.cfg.number_of_columns-(G+1)===0?this.$lastRow:this.$lastRow.prevAll().eq(this.cfg.number_of_columns-(G+2))}else{if(this.numberOfRows%this.cfg.number_of_columns-(G+1)<=0){B=this.$lastRow}else{B=this.$lastRow.prevAll().eq(this.numberOfRows%this.cfg.number_of_columns-(G+2))}}}}}}}}}else{if(H===hcom.common.modules.keyhandling.FUNCTION_KEYS.DOWN){B=this.$firstRow}}if(B){B.addClass("highlighted")}},highlightByMouse:function(){var G=this;$.doc.on("mouseover",this.rowSelector,function(){G.resetHighlight();$(this).addClass("highlighted");B=$(this)});$.doc.on("mouseout",this.rowSelector,function(){G.resetHighlight()});this.$destination_field.on("focusout",function(){B=null;G.resetHighlight()})},resetHighlight:function(){if(this.topDestinationPopup){this.topDestinationPopup.resetHighlight()}}};F.DESTINATION_SELECTED_EVENT="TopDestination.selected";F.DEFAULTS={top_destination_url:"/top_destination_suggest.html?uuid="+$("#queryPodID").attr("rel")+"&mainContentUuid="+E(),top_destination_namespace:"hcom.common.modules.top_destination.data",destination_field_id:"txt_destination",moduleSelector:"#top_destination",rowSelector:"ul li",number_of_columns:4};F.init=function(){B=null};return F}});$.registerModule({name:"hcom.common.modules.top_destination_popup",extendsModule:"hcom.common.popdiv.modules.popdiv",dependencies:["hcom.common.area.modules.rectangle"],impl:function(B){var A;A=function(C){this.cfg=$.extend({},A.DEFAULTS,C);console.assert(this.cfg.id);console.assert(this.cfg.namespace);console.assert(this.cfg.controllInstance);this.buildAndInjectPopup(this.cfg.id,this.cfg.namespace);A.superclass.constructor.call(this,"#"+this.cfg.id);this.addEvents(A.DESTINATION_SELECTED_EVENT);this.onElementClickPrx_=$.proxy(this.onElementClick_,this);this.bindElementClickHandler_(true)};A.prototype={onOpenClick_:function(E){var D=$(E.target),C;if((D.is("input")&&!D.val())||this.cfg.type==="columns"&&this.cfg.firstClick){C=hcom.common.area.modules.point.fromCoords(D.offset().left,D.offset().top+D.parent().height());this.setPosition(C,true);this.resetHighlight();this.cfg.firstClick=false;A.superclass.onOpenClick_.call(this,E);$("#top_destination ul li span").textOverflow({title:true})}},onElementClick_:function(D){var F=$(D.currentTarget),C={},E=/id_(.*)/;C.id=parseInt(F.attr("id").match(E)[1],10);C.name=this.cfg.controllInstance.getDestinationName(C.id);this.emitEvent(A.DESTINATION_SELECTED_EVENT,C);this.close()},bindElementClickHandler_:function(D){var C=D?$.fn.on:$.fn.off;if(this.elementClickHandlerBound!==D){C.call(this.$shell,"click","ul li",this.onElementClickPrx_);this.elementClickHandlerBound=D}},buildAndInjectPopup:function(D,E){var I=Object.getReferenceToNestedName(E),G=I.top_destination,J=I.template,K=I.messages.title,F=I.messages.type,C,H;H=$.map(G,function(M,L){return $.format(J.line,"id_"+M.id,M.loc_name,M.eng_name)}).join("");C=$($.format(J.module,D,F,K,H));$.appendBody(C)},createClickArea_:function(E){var G,D,C,F,H;F=new hcom.common.area.modules.rectangle.fromJQObject($("#txt_destination"));G=new hcom.common.area.modules.rectangle.fromJQObject(this.$shell);console.assert(!this.clickArea===E);if(E){this.clickArea=D=hcom.common.area.modules.click.rectangular(F.tl,G.br);C=D.addReceiver}else{D=this.clickArea;C=D.removeReceiver}C.call(D,hcom.common.area.modules.click.OUTER_CLICK_EVENT,this.onCloseClick_,this);if(!E){D.destroy();D=this.clickArea=null}return D},resetHighlight:function(){$("#top_destination ul li").removeClass("highlighted")}};A.DEFAULTS={id:"top_destination",type:Object.getReferenceToNestedName("hcom.common.top_destination_suggest.popdiv_type"),firstClick:true};A.DESTINATION_SELECTED_EVENT="TopDestinationPopup.itemSelected";return A}});$.registerModule({name:"hcom.common.modules.simple_carousel",dependencies:[],impl:function(A){var B;B=function(C){this.config=$.extend({},B.DEFAULTS,C);if(!this.config.$widget){this.$carouselCntr=$(this.config.carouselCntr).not("."+this.config.initedClassName).first()}else{this.$carouselCntr=$(this.config.carouselCntr,this.config.$widget)}this.$carouselCntr.addClass(this.config.initedClassName);this.$carousel=$(this.config.carousel,this.$carouselCntr);this.$prevShifter=$(this.config.prevShifter,this.$carouselCntr);this.$nextShifter=$(this.config.nextShifter,this.$carouselCntr);this.nextPrx_=$.proxy(this.next,this);this.prevPrx_=$.proxy(this.prev,this);this.sliderUpdaterPrx_=$.proxy(this.sliderUpdater_,this);if(this.$carousel.length){this.init_()}};B.prototype={init_:function(){this.nextElementIndex=1;this.$prevShifter.on("click",this.prevPrx_);this.$nextShifter.on("click",this.nextPrx_);this.elementWidth=this.$carousel.find("li:first-child").outerWidth();this.elementHeight=this.$carousel.find("li:first-child").outerHeight();this.nextElementHeight=this.$carousel.find("li").eq(this.nextElementIndex).outerHeight();$.win.on("resize",this.sliderUpdaterPrx_);$.win.on("tab_changed",this.sliderUpdaterPrx_);this.sliderUpdaterPrx_()},dismiss:function(){$.win.off("resize",this.sliderUpdaterPrx_);$.win.off("tab_changed",this.sliderUpdaterPrx_);this.$carouselCntr.fadeOut()},next:function(){var C=this;if(this.$carousel.length&&this.$carousel.children().length){if(this.config.horizontal){if(this.$carousel.position().left+this.$carousel.children().last().position().left+this.elementWidth+60>this.$carouselCntr.width()){this.$nextShifter.off("click");this.$carousel.stop(true,true).animate({left:"-="+this.elementWidth},{duration:"slow",complete:function(){C.sliderUpdaterPrx_();C.$nextShifter.on("click",C.nextPrx_)}})}}else{if(this.$carousel.position().top+this.$carousel.children().last().position().top+this.elementHeight>this.$carouselCntr.height()&&this.$carousel.find("li").eq(this.nextElementIndex+1).length>0){this.$nextShifter.off("click");this.nextElementIndex+=1;this.nextElementHeight=this.$carousel.find("li").eq(this.nextElementIndex).outerHeight();this.$carousel.stop(false,true).animate({top:"-="+this.nextElementHeight},{duration:"slow",complete:function(){C.sliderUpdaterPrx_();C.$nextShifter.on("click",C.nextPrx_)}})}}this.sliderUpdaterPrx_()}},prev:function(){var C=this,D=33;if(this.$carousel.length&&this.$carousel.children().length){if(this.config.horizontal){if(this.$carousel.position().left<0){this.$prevShifter.off("click");this.$carousel.stop(true,true).animate({left:"+="+this.elementWidth},{duration:"slow",complete:function(){C.sliderUpdaterPrx_();C.$prevShifter.on("click",C.prevPrx_)}})}}else{if($.browser.msie&&$.browser.version<8){D=0}if(this.$carousel.position().top<D&&this.$carousel.find("li").eq(this.nextElementIndex-1).length>0){this.nextElementHeight=this.$carousel.find("li").eq(this.nextElementIndex).outerHeight();this.$prevShifter.off("click");this.$carousel.stop(true,true).animate({top:"+="+this.nextElementHeight},{duration:"slow",complete:function(){C.sliderUpdaterPrx_();C.$prevShifter.on("click",C.prevPrx_)}});this.nextElementIndex-=1}}this.sliderUpdaterPrx_()}},sliderUpdater_:function(){var D=false,E=33,C=this.$carousel.position();if(C){if(this.config.horizontal){if(C.left<0){this.$prevShifter.addClass("enabled");D=true}else{this.$prevShifter.removeClass("enabled")}if(this.$carousel.children().length&&(C.left+this.$carousel.children().last().position().left+this.elementWidth+60>this.$carouselCntr.width())){this.$nextShifter.addClass("enabled");D=true}else{this.$nextShifter.removeClass("enabled")}}else{if($.browser.msie&&$.browser.version<8){E=0}if(C.top<E){this.$prevShifter.addClass("enabled");D=true}else{this.$prevShifter.removeClass("enabled")}if(this.$carousel.position().top+this.$carousel.children().last().position().top+this.nextElementHeight>this.$carouselCntr.height()){this.$nextShifter.addClass("enabled");D=true}else{this.$nextShifter.removeClass("enabled")}}if(D||this.config.alwaysDisplayShifters){this.$prevShifter.add(this.$nextShifter).show()}else{this.$prevShifter.add(this.$nextShifter).hide()}}}};B.DEFAULTS={carouselCntr:"div.carousel",initedClassName:"initied",carousel:"ul",prevShifter:"a.control.c_prev",nextShifter:"a.control.c_next",alwaysDisplayShifters:false,horizontal:true};return B}});$.registerModule({name:"hcom.common.modules.base64",impl:function(C){var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function E(H){var G="",J,I;H=H.replace(/\r\n/g,"\n");for(I=0;I<H.length;I++){J=H.charCodeAt(I);if(J<128){G+=String.fromCharCode(J)}else{if((J>127)&&(J<2048)){G+=String.fromCharCode((J>>6)|192);G+=String.fromCharCode((J&63)|128)}else{G+=String.fromCharCode((J>>12)|224);G+=String.fromCharCode(((J>>6)&63)|128);G+=String.fromCharCode((J&63)|128)}}}return G}function F(G){var I="",K=0,M,L,J,H;M=L=J=0;while(K<G.length){M=G.charCodeAt(K);if(M<128){I+=String.fromCharCode(M);K++}else{if((M>191)&&(M<224)){J=G.charCodeAt(K+1);I+=String.fromCharCode(((M&31)<<6)|(J&63));K+=2}else{J=G.charCodeAt(K+1);H=G.charCodeAt(K+2);I+=String.fromCharCode(((M&15)<<12)|((J&63)<<6)|(H&63));K+=3}}}return I}function B(I){var G="",P,N,L,O,M,K,J,H=0;I=E(I);while(H<I.length){P=I.charCodeAt(H++);N=I.charCodeAt(H++);L=I.charCodeAt(H++);O=P>>2;M=((P&3)<<4)|(N>>4);K=((N&15)<<2)|(L>>6);J=L&63;if(isNaN(N)){K=J=64}else{if(isNaN(L)){J=64}}G=G+A.charAt(O)+A.charAt(M)+A.charAt(K)+A.charAt(J)}return G}function D(I){var G="",P,N,L,O,M,K,J,H=0;I=I.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(H<I.length){O=A.indexOf(I.charAt(H++));M=A.indexOf(I.charAt(H++));K=A.indexOf(I.charAt(H++));J=A.indexOf(I.charAt(H++));P=(O<<2)|(M>>4);N=((M&15)<<4)|(K>>2);L=((K&3)<<6)|J;G=G+String.fromCharCode(P);if(K!==64){G=G+String.fromCharCode(N)}if(J!==64){G=G+String.fromCharCode(L)}}G=F(G);return G}return{encode:B,decode:D}}});$.registerModule({name:"hcom.customer_care.core",dependencies:["hcom.common.modules.calendar_dp","hcom.common.pages.common","hcom.common.modules.toggle","hcom.landing.modules.socialbookmark"],impl:function(B){function C(){var D=$("#btn_submit_cancel");if(D.length>0){D.on("click",function(){D.addClass("cta-processing")})}}function A(){var D=$("#pmg-form-title a"),E=$("#pmg-form-wrapper");if(hcom.customer_care.data&&hcom.customer_care.data.price_match.error){D.addClass("open");E.show()}$("div.pmg-request").on("click","#pmg-form-title a",function(F){F.preventDefault();if($(this).hasClass("open")){$(this).removeClass("open");E.slideUp("500")}else{$(this).addClass("open");E.slideDown("500")}})}return{init:function(){if(hcom.customer_care.data&&hcom.customer_care.data.price_match.error){window.location=window.location+"#error"}C();A();var E=new hcom.common.chat.modules.invitation(),D=new hcom.common.modules.toggle()}}}});$.registerModule({name:"hcom.customer_care.email_us",dependencies:["hcom.customer_care.core","hcom.common.form.modules.formtabs","hcom.common.modules.estara"],impl:function(A){return{init:function(){var B;$("#emailUsForm").find("input,textarea").setEmptyValueByPlaceholder();B=new hcom.common.form.modules.formtabs({$ctrlElem:$("#sel_subject"),defaultTab:".formtab.default",rules:{"customercare.email_us.subject.option.booking_a_hotel":"#ft_booking_problems","customercare.email_us.subject.option.cancelation_reservation":"#ft_change_cancel"}})}}}});$.registerModule({name:"hcom.customer_care.receipt",impl:function(A){return{init:function(){if(window.print){window.print()}}}}});$.registerModule({name:"hcom.landing.modules.common",dependencies:["hcom.common.modules.template","hcom.common.pages.common","hcom.common.modules.calendar_dp","hcom.common.modules.ie6popupplate","hcom.common.modules.slideshow","hcom.common.modules.popdiv","hcom.landing.modules.urgencypopup","hcom.landing.modules.urgencymodule","hcom.common.modules.checkavailabilitydialog","hcom.landing.modules.checkavailabilitydialog","hcom.common.modules.searchpopdiv","hcom.common.modules.hotelimagepopdiv","hcom.landing.modules.hotelimagepopdiv","hcom.common.modules.emailtofriend","hcom.landing.modules.basicinput","hcom.landing.modules.querymodule","hcom.landing.pages.seo_link_blocks","hcom.common.modules.sharing_n_email","hcom.common.modules.share_services","hcom.landing.modules.checkavailability_onebrand_interstitial_decorator"],impl:function(B){var F;function H(){F=new $.formatter(hcom.landing.data.staticMessages);F.setGlobal()}function I(){if(hcom.landing.data&&hcom.landing.data.popdiv){return new hcom.landing.modules.hotelimagepopdiv({$container:$("#imagePopDiv"),mouseoverFilter:"div.citylanding_hlist img.imagePopDivThumb, div.citylanding_hlist div.popdiv_prompt_icon",clickFilter:"a.hotelDetailsPhoto",store:new hcom.common.modules.hotelimagepopdiv.JSONStore({data:hcom.landing.data.popdiv})})}}function E(){if($("div.citylanding_titlebar:first").length){return new hcom.common.modules.emailtofriend({titlebar:"div.citylanding_titlebar:first",popdiv:"div.common_emailtofriend:first",z_index:"4"})}}function J(){if($("#lnk_share_page").length){return new hcom.common.modules.sharing_n_email()}}function D(){if($.browser.safari){$("a.favorites").remove()}else{$("a.favorites").on("click",function(K){if(!$.browser.opera){K.preventDefault()}$.bookmark(".icon_sprite_toolbar a.favorites")})}}function C(){if($("#checkAvailabilityHolder").length){var L,K=hcom.landing.modules.checkavailability_onebrand_interstitial_decorator;L=new K("ca");L.attachEvents();L.buildTemplate(hcom.common.modules.template.buildJson(hcom.landing.data.staticTemplates));hcom.common.modules.glasspane.initStatic().hide()}}function G(){var K,L=hcom.landing.modules.urgencypopup;if($("#landing_recently_booked_message").hasClass("hcom_urgency_module")){L=hcom.landing.modules.urgencymodule}if(hcom.landing.urgency_data){K=new L({url:hcom.landing.urgency_data.urgencyPopupUrl,visibleTime:hcom.landing.urgency_data.urgencyPopupVisibleTime*1000,invisibleTime:hcom.landing.urgency_data.urgencyPopupInvisibleTime*1000,popsLimit:hcom.landing.urgency_data.urgencyPopupPopsLimit,data:hcom.landing.urgency_data.urgencyPopupContext});K.init()}}function A(){var K=hcom.common.modules.share_services;K.loadGP1();K.loadFBLike();K.loadVkontakte()}return{init:function(){H();I();E();J();D();C();G();A()}}}});$.registerModule({name:"hcom.landing.modules.checkavailabilitydialog",dependencies:["hcom.common.modules.checkavailabilitydialog","hcom.common.modules.basicinput"],impl:function(B){var A="/hotel/details.html",C=$("#checkAvailabilityHolder").find("form:first"),D=$.extendCls(hcom.common.modules.checkavailabilitydialog,{constructor:function(E){D.superclass.constructor.call(this,E)},submitForm:function(E){if(!C.find("input[name='hotelId']").length){$('<input type="hidden" name="hotelId" />').appendTo(C)}C.find("input[name='hotelId']").val(this.hotelid);if(C.attr("action")!==A){C.attr("action","/search/search.html")}else{C.find("[name='destinationName']").remove();C.find("[name='roomInfoList']").attr("name","roomno");this.handleTabs()}C.trigger("submit")},handleTabs:function(){if(!$("[name='tab']",C).length){$("<input type='hidden' name='tab' />").appendTo(C)}$("[name='tab']",C).val("prices")},attachEvents:function(){var E=this;$.doc.on("click","div.citylanding_hlist:first .hcomCheckAvailability span",function(F){E.open(F)});$.doc.on("click","div.featured_hotels .hcomCheckAvailability span",function(H){var F=C.find("[name='destinationId']"),G=C.find("[name='destinationName']"),I=$(H.target).closest("div.result").prevAll("h2.list_head").attr("rel");if(F.length===0){C.append('<input type="hidden" name="destinationId" />');F=C.find("[name='destinationId']")}if(I!==""){G.val("")}F.val(I);E.open(H)});$.doc.on("click","div.deals_container span.hcomCheckAvailability_sd button",function(F){C.attr("action",A).attr("name","hotelDetailsForm").attr("method","get");E.open(F)});D.superclass.attachEvents.call(this)},close:function(E){C.attr("action","/search/search.html").attr("name","sfSearchForm").attr("method","post");D.superclass.close.call(this,E)}});return D}});$.registerModule({name:"hcom.landing.modules.hotelimagepopdiv",dependencies:["hcom.common.modules.hotelimagepopdiv"],impl:function(B){var A=$.extendCls(hcom.common.modules.hotelimagepopdiv,{thumbDim:{width:92,height:92},getGadgetsFromThumb:function(D){var C=D.parents("div:first");return{$promptIcon:C.find("div.popdiv_prompt_icon:first"),$overlay:C.find("div.overlay:first")}},popDivSetThumbOverlayAnim:function(C,E){var D=E.parent().parent().find("div.thumbnail_popDiv_animation:first");D[C?"show":"hide"]()}});A.init=function(){var D='<div class="overlay" style="display: none;"></div><div class="thumbnail_popDiv_animation"><!-- IE6 --></div><div class="icon_sprite_pop_div popdiv_prompt_icon"><div class="pop_div_0"></div></div>';var C=$("div.citylanding_hlist").add($("div.country_landing_featured_hotel_link_block")).add($("div.special_deals_hlist div.extended_hotel")).add($("div.deals_featured")).add($("div.deals_hlist")).add($("div.deals_expandable_hotels_list"));if(C.length){$(".photo_thumbnail > span.hotelDetailsPhoto",C).prepend(D)}};return A}});$.registerModule({name:"hcom.common.modules.emailtofriend",dependencies:["hcom.common.modules.state","hcom.common.modules.ie6popupplate"],impl:function(C){var A,B,D;var E=500;B=function(){var H="has_error",I="error",J=$("div.common_emailtofriend",this.$popdiv),G=J.hasClass(H);function F(){$("label",J).add($("input",J)).removeClass(I)}function K(N,M){var L;F();if(N!==G){G=N;L=N?"addClass":"removeClass";J.children("#emailfriend_form").toggleClass(H)}if(G&&M){$.each(M,function(){$("label[for="+this+"]",J).add($("input#"+this,J)).addClass(I)})}}return{set:K,reset:function(){if(G){K(!G)}}}}();D=function(){var G=$("#emailfriend_form").add("#emailfriend_success"),H=true;function F(){H=!H;G.toggle()}return{toggle:F,reset:function(){if(!H){F()}}}}();A=$.extendCls(hcom.common.modules.ie6popupplate,{constructor:function(F){this.$titlebar=$(F.titlebar);this.$popdiv=$(F.popdiv);this.$errorContainer="";this.$successContainer="";this.$counterLeftChars=$("p.char_counter span#char_counter_left_chars");this.$socialBookMarks=$(".propertydetails_title_social_bookmarks");F.$aligner=this.$popdiv;A.superclass.constructor.call(this,F);this.registerEvents()},registerEvents:function(){var F=this;$("span.email:first",this.$titleBar).parent().on("click",function(G){if(!F.$popdiv.is(":visible")){G.preventDefault();G.stopPropagation();F.$popdiv.show();F.show();D.reset.call(F);B.reset.call(F);F.$counterLeftChars.text(E);$("form#emailToFriendForm",F.$popdiv)[0].reset()}F.$socialBookMarks.hide()});$("#socialbookmark_close").on("click",function(){F.$popdiv.hide()});$("div.foot > a:first",this.$popdiv).add("div.foot:eq(1) > a:first").add("#emailfriend_close").add("span.share:first").add("span.print:first").add("span.favorites:first").on("click",function(G){G.preventDefault();D.reset.call(F);B.reset.call(F);F.$popdiv.hide();F.hide()});$("button#btn_emailfriend_submit",this.$popdiv).on("click",function(G){G.preventDefault();F.submit()});$("textarea#personalMessage",this.$popdiv).on("keyup",function(G){var H=$(this);var I=H.val();if(I.length>500){H.val(I.substr(0,E))}else{F.$counterLeftChars.text(E-I.length)}})},submit:function(){var G=$("form#emailToFriendForm",this.$popdiv),H=hcom.common.modules.state.formSerialize(G),F=this;$.ajax({url:"/emailtofriend.html",dataType:"xml",type:"POST",data:H,success:function(K){var M={};$("email-response > addresses > address",K).map(function(){M[this.nodeName]=$(this).attr("value")});var N=$("email-response",K);if(N.length===0){console.error("invalid response")}else{if(M.address){var I=[];var P=$("div#emailfriend_success > ul");P.empty();$("> addresses > address",N).each(function(){var Q=$(this).attr("value");I.push("<li>"+Q+"</li>");P.append("<li>"+Q+"</li>")});B.reset.call(F);D.toggle.call(F)}else{var O=[];var J=[];var L=$("div.error_icon > ul",this.$popdiv);L.empty();$("> errors > error",N).each(function(){var S=$(this);var Q=S.attr("message");O.push("<li>"+Q+"</li>");L.append("<li>"+Q+"</li>");var R=S.attr("field");J.push(R)});B.set.call(F,true,J)}}},error:function(J,K,I){},complete:function(J,K,I){}})}});return A}});$.registerModule({name:"hcom.landing.modules.socialbookmark",dependencies:["hcom.common.modules.ie6popupplate"],impl:function(A){var C,B=hcom.locale.direction==="RTL";C=$.extendCls(hcom.common.modules.ie6popupplate,{constructor:function(D){this.$titlebar=$(D.titlebar);this.$popdiv=$(D.popdiv,this.$titleBar);this.safariCssOverride=!D.safariCssOverride?{right:"0px"}:D.safariCssOverride;if($.browser.safari){this.$popdiv.css(this.safariCssOverride)}D.$aligner=this.$popdiv;C.superclass.constructor.call(this,D);this.registerEvents()},registerEvents:function(){var D=this;$("#socialBookmark").on("click",function(F){var E=$(this).parent().width()-38,G=B?"left":"right";D.$popdiv.css(G,E+"px");if(!D.$popdiv.is(":visible")){D.show();D.$popdiv.show()}});$("#socialbookmark_close, span.email:first, span.print:first, span.favorites:first").on("click",function(E){E.preventDefault();D.$popdiv.hide();D.hide()})}});return C}});$.registerModule({name:"hcom.landing.modules.querymodule",dependencies:["hcom.common.modules.state","hcom.landing.pages.landing.basic","hcom.landing.modules.basicinput","hcom.landing.modules.autosuggest"],impl:function(A){var B;function C(){var D=$("#searchForm"),E;if(D.length){E=new hcom.landing.modules.basicinput("txt",false);E.initState($(".query_container:first"),false).attachEvents(false);E.setTemplates(hcom.common.modules.template.buildJson(hcom.landing.querymodule.data.staticTemplates))}}return{init:function(){C()}}}});$.registerModule({name:"hcom.landing.modules.query_deals.validation",impl:function(A){var I="date",M="<p class='error' ><span class='error_icon'/>{0}</p>",B={date:false},C,L,O,N,F,E;function G(T,R,U,S){this.c={fields:$.isArray(T)?T:[T],container:R,msgKey:U,msgParams:S}}G.prototype={render:function(R){if(R===true){var S=this.c;B[S.container].push($.format(M,C.format(S.msgKey,S.msgParams||[])));$.each(S.fields,function(U,T){T.addClass("error")})}}};function D(){var S,R=this.members;for(S=0;S<R.length;S++){this[R[S]]=false}}function Q(R){var T,S,U=true;for(S=0;(T=R[S])!==undefined&&U;S++){U=$.isArray(T)?Q(T):!T}return U}D.prototype={members:["destinationEmpty","checkinEmpty","checkoutEmpty","checkInCheckOutEmpty","invalidArrivalFormat","invalidDepartureFormat","checkoutPriorToCheckin","datesCannotBeTheSame","datesCannotBeInThePast","checkInDatePrior","checkOutDatePrior","tooLongStay"],valid:function(){var U,S=this.members,V=true,R,T;for(U=0;(R=S[U])!==undefined&&V;U++){T=this[R];V=$.isArray(T)?Q(T):!T}return V}};function P(){return{destination:$.trim($("#search_destination").val()),arrivalDateStr:$.trim(N.val()),departureDateStr:$.trim(F.val())}}function H(){for(var R in B){if(B.hasOwnProperty(R)){B[R]=[]}}}function K(R){var S;$("p.error",O).remove();$(".error",O).removeClass("error");H();for(S in L){if(L.hasOwnProperty(S)&&R.hasOwnProperty(S)){L[S].render(R[S])}}E.before(B[I].join(""))}function J(){var R=P(),a=new D(),W,V,Z=R.arrivalDateStr,U=R.departureDateStr,X,Y,T,S;a.checkinEmpty=!Z&&!!U;a.checkoutEmpty=!U&&!!Z;a.checkInCheckOutEmpty=!Z&&!U;if(Z&&U){X=Date.parsePOSLocaleDate(Z);Y=Date.parsePOSLocaleDate(U);if(!X||!Y){a.invalidArrivalFormat=!X;a.invalidDepartureFormat=!Y}else{W=Date.getUserDate();V=Y-X;a.datesCannotBeInThePast=!(X-W>-129600000);a.checkoutPriorToCheckin=V<0;a.datesCannotBeTheSame=V===0;a.tooLongStay=(Y-X-3600000)/86400000>28}}K(a);return a}return{init:function(){C=new $.formatter();O=$("#deals_landing_rd_search_form");N=$("#deals_landing_rd_search_checkIn");F=$("#deals_landing_rd_search_checkOut");E=$(".roomDetailsContainer",O);L={checkinEmpty:new G(N,I,"search.mstep.dates.checkin.empty"),checkoutEmpty:new G(F,I,"search.mstep.dates.checkout.empty"),invalidArrivalFormat:new G(N,I,"search.mstep.dates.invalidFormat"),invalidDepartureFormat:new G(F,I,"search.mstep.dates.invalidFormat"),checkoutPriorToCheckin:new G([N,F],I,"search.mstep.dates.checkOutPriorToCheckin"),datesCannotBeTheSame:new G([N,F],I,"search.mstep.dates.cannot.be.the.same"),checkInDatePrior:new G(N,I,"search.mstep.dates.checkInDatePrior"),checkOutDatePrior:new G(F,I,"search.mstep.dates.checkOutDatePrior"),tooLongStay:new G([N,F],I,"search.mstep.dates.tooLongStay",28),datesCannotBeInThePast:new G([N,F],I,"search.mstep.dates.dateInPast"),checkInCheckOutEmpty:new G([N,F],I,"seo.landing.deals.search.module.error.nodates")};$("#deals_btn_Search").on("click",function(R){J();if(!J().valid()){R.preventDefault();$("#deals_btn_Search").removeClass("cta-processing")}})}}}});$.registerModule({name:"hcom.landing.modules.basicinput",dependencies:["hcom.common.modules.template","hcom.common.modules.calendar_dp"],impl:function(R){var C=function(Y,a,Z){this.name=Y;this.id=a;this.optionId=Z};var W=new C("hcom.js.changeSearch.adultFieldName","hcom.js.changeSearch.adultFieldId","hcom.js.changeSearch.adultFieldOptionId"),I=new C("hcom.js.changeSearch.childFieldName","hcom.js.changeSearch.childFieldId","hcom.js.changeSearch.childFieldOptionId"),E=new C("hcom.js.changeSearch.childAgeFieldName","hcom.js.changeSearch.childAgeFieldId","hcom.js.changeSearch.childAgeOptionId"),F,Q=/\.rooms\[([0-9]+)\]\.(?:childrenAges\[([0-9]+)\])?/,S=9,X=["lnk_search_tab_destination","lnk_search_tab_hotelname"],P;function J(a,b,Z,Y){this.roomSelector="select[name=numberOfRooms]:first";this.childSelector="select[name^=children]";this.adultSelector="select[name$=numberOfAdults]";this.childrenAgesSelector="select[name^=childrenAges]";this.prefix=a;this.prefixStr=a.length?a+"_":"";this.hasTabs=b||false;this.callbacks=Z||{};$.extend(this,Y);return this}function A(Y){var Z=this.$main.find("#ca_continueCheckAvailability").eq(0);Z.attr("disabled",!Y);Z.toggleClass("cta-disabled",!Y)}function O(Z,e,d){var c=this.$main.find("table.childrenSelector > tbody > tr:eq("+Z+")"),Y=this,a,b=function(f){$(this).attr("id",F.format(E.optionId,Y.prefix,String(Z),String(a),String(f)))};if(d===0){c.find("td.children_age_col").find("select").off().end().empty()}else{if(d<e){for(a=e;a>d;a--){c.find("td.children_age_col").find("select:last").off().remove()}}else{if(d>e){if(e===0){c.find("td.children_age_col").empty()}for(a=e;a<d;a++){c.find("td.children_age_col").append(this.childAgeSelect);c.find("td.children_age_col").find("select:last").attr("name",F.format(E.name,String(Z),String(a))).attr("id",F.format(E.id,this.prefix,String(Z),String(a))).find("option").each(b)}}}}}function V(b,a,c,d){var Z,Y;if((a>0)&&(d===0)){this.setExpanded(false)}else{if((d>0)&&(a===0)){this.setExpanded(true)}}for(Z=0,Y=c.length;Z<Y;Z++){if(b[Z]!==c[Z]){O.call(this,Z,b[Z],c[Z])}}}function H(){var a=[],Y,Z=0;$(this.childSelector,this.$main).each(function(b){Y=parseInt(this.value,10);Z+=Y;a.push(Y)});return{child:a,childCount:Z}}function U(){var Y=H.call(this);V.call(this,this.cChild,this.cChildCount,Y.child,Y.childCount);this.cChild=Y.child;this.cChildCount=Y.childCount}function K(Z,a){var Y=this;a.find("label:first").text(F.format("sfsearch.changeSearch.room",String(Z+1))).end();$(this.childSelector+":first",a).on("change.basicInput",function(){U.call(Y)}).val("0");$(this.adultSelector+":first",a).val("2")}function D(c){var b=/(id|for|name)="?([^\s>"]+)"?/g,f=String(c),d=[F.format(W.id,this.prefix,f),F.format(I.id,this.prefix,f)],j=[F.format(W.name,f),F.format(I.name,f)],e=-1,a=0,h=[W.optionId,I.optionId],i,Y,g=this;function Z(p,k,m,o,l){var n;if(k==="name"){n=j[a++]}else{if(k==="for"){n=d[0]}else{if(m.indexOf("_option_")>=0){n=F.format(h[e],g.prefix,f,i++)}else{i=0;e+=1;n=d[e]}}}if(n===undefined){return""}else{return[k,'="',n,'"'].join("")}}Y=this.roomHtml.replace(b,Z);return Y}function G(f,e){var a,c="table.childrenSelector > tbody";if(e<f){$(c,this.$main).find(["> tr:gt(",String(e-1),")"].join("")).find(this.childSelector).each(function(){$(this).off()}).end().remove();var Z=this.cChildCount,d=this.cChild.slice(0);for(a=f;a>e;a--){this.cChildCount-=this.cChild.pop()}if(this.cChildCount===0){this.setExpanded(false)}}else{if(e>f){var b=$(c,this.$main).find("> tr:last"),Y;if(this.roomHtml===undefined){Y=b.clone();Y.find("td.children_age_col").empty();$("option",Y).removeAttr("selected");this.roomHtml=["<tr>",Y.html(),"</tr>"].join("");if($.browser.msie){this.roomHtml=this.roomHtml.replace(/jQuery[0-9]+[^\s>]+/g,"")}}for(a=f;a<e;a++){b.after(D.call(this,a));b=$(c,this.$main).find("> tr:last");K.call(this,a,b);this.cChild.push(0)}}}}function M(){var Y=parseInt(this.$main.find(this.roomSelector).val(),10);this.isGroupBooking=(Y>=S);return Y}function T(Z){var b=!!$("div.dates_rooms table thead").length?"div.dates_rooms table thead":"div.dates_rooms ~ table thead",Y=!!$("div.dates_rooms table tbody").length?"div.dates_rooms table tbody":"div.dates_rooms ~ table tbody",a=!!$("div.dates_rooms table tfoot").length?"div.dates_rooms table tfoot":"div.dates_rooms ~ table tfoot";if(Z&&!this.isPeopleSelectorEnabled){this.$main.find(b).show().end().find(Y).show().end().find(a).show();this.isPeopleSelectorEnabled=true;if(this.cChildCount>0){this.setExpanded(true)}}else{if(!Z&&this.isPeopleSelectorEnabled){this.$main.find(b).hide().end().find(Y).hide().end().find(a).hide();this.isPeopleSelectorEnabled=false;if(this.cChildCount>0){this.setExpanded(false)}}}}function N(){var Z=this.cRooms,Y=this.isGroupBooking,a=M.call(this);if(!Y&&this.isGroupBooking){T.call(this,false)}else{if(Y&&!this.isGroupBooking){T.call(this,true)}this.cRooms=a;G.call(this,Z,a)}}function B(Y){var b=0,e,g,f,Z=[],j,a,c=0;for(var h in Y){if(Y.hasOwnProperty(h)){e=Q.exec(h);if(e){g=parseInt(e[1],10);b=Math.max(b,g);if(e[2]!==undefined){Z[g]=Math.max(Z[g]||0,parseInt(e[2],10))}}}}f=this.cRooms;this.cRooms=b+1;G.call(this,f,this.cRooms);for(var d=0;d<this.cRooms;d++){if(Z[d]===undefined){Z[d]=0}else{Z[d]+=1}c+=Z[d]}j=this.cChild;a=this.cChildCount;this.cChild=Z;this.cChildCount=c;V.call(this,j,a,this.cChild,this.cChildCount)}function L(Y){var Z=Y.getModule("landing_city_basic_input");this.roomEmptyRow=Z.getTemplate("room_empty_row");this.adultNumberSelect=Z.getTemplate("adult_number_select");this.childNumberSelect=Z.getTemplate("child_number_select");this.childAgeSelect=Z.getTemplate("child_age_select")}J.prototype={initState:function(Y,a){var Z;this.$main=Y;this.$form=(a===true?Y.parent("form:first"):Y.find("form:first"));if(this.hasTabs){this.$tabContainer=Y.find("ul.searchOptions:first")}this.cRooms=M.call(this);this.isPeopleSelectorEnabled=!this.isGroupBooking;Z=H.call(this);this.cChild=Z.child;this.cChildCount=Z.childCount;this.$formContainer=Y||$("div.query_container");this.isExapanded=false;this.isRippedOff=false;this.isErrorContainerVisible=false;this.fieldErrors={};this.formContainerConfig={wideClass:"citylanding_query_wide",errorClass:"has_error",expandedClass:"citylanding_query_expanded",ripOffClass:"citylanding_query_ripoff"};this.currentHeight=this.$formContainer.outerHeight();this.originalWidth=this.$formContainer.width();this.isWide=this.$formContainer.hasClass(this.formContainerConfig.wideClass);this.errorMessages=hcom.landing.querymodule.data.staticMessages;this.$form.attr("autocomplete","off");return this},dateValidator:function(c,a){var b=false;var Y;var Z;if(!isNaN(c)){if(isNaN(a)){a=new Date()}Z=new Date(c.getFullYear(),c.getMonth(),c.getDate());Y=new Date(a.getFullYear(),a.getMonth(),a.getDate());b=Z>=Y}return b},setRippedOff:function(Y){if(Y!==this.isRippedOff){this.isRippedOff=Y;if(!this.isWide){this.$formContainer.parents("div.citylanding_query_frame")[Y?"addClass":"removeClass"](this.formContainerConfig.ripOffClass)}}},setExpanded:function(Y){if(Y!==this.isExpanded){this.isExpanded=Y;if(!this.isWide){this.setRippedOff(Y)}this.$formContainer.parents("div.citylanding_query_frame")[Y?"addClass":"removeClass"](this.formContainerConfig.expandedClass);if($.browser.msie){$(".children_age_col",this.$queryContainer).css("display",Y?"block":"none")}}return this},setErrorContainer:function(Y){if(Y!==this.isErrorContainerVisible){this.isErrorContainerVisible=Y;this.$formContainer[Y?"addClass":"removeClass"](this.formContainerConfig.errorClass)}return this},setFieldError:function(Z,a){var b=a?!this.fieldErrors.hasOwnProperty(Z):this.fieldErrors[Z]===true,Y;if(b){if(a){this.fieldErrors[Z]=true}else{delete this.fieldErrors[Z]}Y=a?"addClass":"removeClass";$("> form > div > div:first > label[for="+Z+"]",this.$formContainer)[Y](this.formContainerConfig.errorClass);$("#"+Z)[Y](this.formContainerConfig.errorClass)}return this},setErrorMessages:function(a){var Z=$("div.error_container > ul"),Y=this;Z.empty();$.each(a,function(){Z.append("<li>"+Y.errorMessages[this]+"</li>")})},setTemplates:function(Y){L.call(this,Y);return this},attachEvents:function(){var Y=this;this.$main.find(this.roomSelector).on("change.basicInput",function(){N.call(Y)}).end().find(this.childSelector).on("change.basicInput",function(){U.call(Y)}).end().find("#btn_search_submit").on("click",function(Z){if(!Y.validate()){Z.preventDefault()}});return this},detectFieldCounts:function(){B.call(this)},validate:function(){var g=true,h=this,Z=[],b=$("input[name='destinationName']",this.$main),d=$.trim($("#"+this.prefixStr+"search_ci",this.$main).val()),f=$.trim($("#"+this.prefixStr+"search_co",this.$main).val()),Y=Date.parsePOSLocaleDate(d),c=Date.parsePOSLocaleDate(f),a=!$("#"+this.prefixStr+"search_ci",this.$main).hasClass("optional"),e=!$("#"+this.prefixStr+"search_co",this.$main).hasClass("optional");if(b.length>0&&$.trim(b.val())===""){Z[Z.length]="landing.city.querymodule.error.destination.empty";this.setFieldError(b.prop("id"),true)}else{this.setFieldError(b.prop("id"),false)}if(a&&e&&(!Y||isNaN(Y))&&(!c||isNaN(c))){Z[Z.length]="landing.city.querymodule.error.dates.empty";this.setFieldError(this.prefixStr+"search_ci",true);this.setFieldError(this.prefixStr+"search_co",true)}else{if(a&&(!Y||isNaN(Y))){Z[Z.length]="landing.city.querymodule.error.checkin.empty";this.setFieldError(this.prefixStr+"search_ci",true)}else{if(!!Y&&!isNaN(Y)&&(!Date.parsePOSLocaleDate(d)||!this.dateValidator(Y))){Z[Z.length]="landing.city.querymodule.checkin.error";this.setFieldError(this.prefixStr+"search_ci",true)}else{this.setFieldError(this.prefixStr+"search_ci",false)}}if(e&&(!c||isNaN(c))){Z[Z.length]="landing.city.querymodule.error.checkout.empty";this.setFieldError(this.prefixStr+"search_co",true)}else{if(!!c&&!isNaN(c)&&(!Date.parsePOSLocaleDate(f)||(!!Y&&!isNaN(Y)&&!this.dateValidator(c,Y)))){Z[Z.length]="landing.city.querymodule.checkout.error";this.setFieldError(this.prefixStr+"search_co",true)}else{this.setFieldError(this.prefixStr+"search_co",false)}}}if(this.isPeopleSelectorEnabled){this.$main.find("td.children_age_col").find("select").each(function(){if($(this).val()==="-1"){if($.inArray("landing.city.querymodule.childrenages.error",Z)===-1){Z[Z.length]="landing.city.querymodule.childrenages.error"}h.setFieldError($(this).prop("id"),true)}else{h.setFieldError($(this).prop("id"),false)}})}if(Z.length>0){g=false}this.setErrorContainer(!g);this.setErrorMessages(Z);return g},redirectGroupBooking:function(){if(this.isGroupBooking){var a=$.trim($("#"+this.prefixStr+"search_checkIn").val()),Z=$.trim($("#"+this.prefixStr+"search_checkOut").val()),Y=$.trim($("#"+this.prefixStr+"search_destination").val());window.location="/groups/request.html"+["?request.destinationName=",Y,"&request.checkIn=",a,"&request.checkOut=",Z].join("")}return this.isGroupBooking}};J.init=function(){F=new $.formatter()};return J}});$.registerModule({name:"hcom.landing.modules.hotel_list_review",dependencies:["hcom.common.modules.toggle"],impl:function(A){return{init:function(){$("div.hotel_list_review span.review_title").linkify();var B=new hcom.common.modules.toggle({elementSelector:"div.review_head",toggleSpeed:"fast"})}}}});$.registerModule({name:"hcom.landing.pages.landing.basic",dependencies:["hcom.common.pages.common","hcom.common.modules.itemtoggler","hcom.common.modules.expandable_block"],impl:function(A){return{init:function(){var C,D,B;C=new hcom.common.modules.itemtoggler({containers:["#GradientContainer","#threeColLeftContainer","#threeColRightContainer",".col_2"],clickFilter:"a.listboxControl",clickOnInit:"a.listboxControl:not(.expand)",findContainerFromClick:function(F){var E=F.is(".expand")?F.hide().next():F.hide().prev();return E.show().parent().find("ul.expandable:first")}});D=new hcom.common.modules.itemtoggler({containers:["#twoColLeftHeadContainer > p.headerH"],clickFilter:"a.x-didYouMeanControl",clickOnInit:"a.x-didYouMeanControl",findContainerFromClick:function(E){return E.toggleClass("hidden").parent()}});B=new hcom.common.modules.expandable_block({expandButtonLabel:'<span class="icon_sprite_open_close"><span class="closed"><!-- IE6 --></span></span>'+hcom.locale.common.expandBlockButtonLabel})}}}});$.registerModule({name:"hcom.landing.pages.landing.queryform",dependencies:["hcom.landing.pages.landing.basic","hcom.landing.advanced_deals.modules.basicinput","hcom.common.modules.basicinput","hcom.landing.modules.autosuggest"],impl:function(A){function B(){var D=$("#queryForm"),E;if(D.length){var C=new $.formatter(hcom.landing.data.staticMessages);C.setGlobal();E=new hcom.landing.advanced_deals.modules.basicinput("",false,{},{});E.setTemplates(hcom.common.modules.template.buildJson(hcom.landing.data.staticTemplates));E.initState(D,true).attachEvents(false)}}return{init:function(){B()}}}});$.registerModule({name:"hcom.landing.pages.landing.city_listing",dependencies:["hcom.landing.modules.common","hcom.common.modules.listener","hcom.gadgets.modules.hotel_comparison_dockingbar.common"],impl:function(A){return{}}});$.registerModule({name:"hcom.landing.pages.landing_pgn",dependencies:["hcom.landing.pages.landing.queryform","hcom.common.modules.emailtofriend","hcom.common.modules.sharing_n_email","hcom.common.modules.share_services","hcom.landing.modules.autosuggest"],impl:function(B){function D(){if($.browser.safari){$("a.favorites").remove()}else{$("a.favorites").on("click",function(E){if(!$.browser.opera){E.preventDefault()}$.bookmark(".icon_sprite_toolbar a.favorites")})}}function A(){if($("#lnk_share_page").length){return new hcom.common.modules.sharing_n_email()}}function C(){var E=hcom.common.modules.share_services;E.loadGP1();E.loadFBLike()}return{init:function(){D();A();C();var E=new hcom.common.modules.emailtofriend({titlebar:"div.citylanding_titlebar:first",popdiv:"div.common_emailtofriend:first",z_index:"4"})}}}});$.registerModule({name:"hcom.landing.pages.seo_link_blocks",dependencies:[],impl:function(A){function B(C){var D=$(this);D.parent().hide();D.closest("ul").find(".js_hidden").show("slow")}return{init:function(){$.doc.on("click","span.view_more_link",B)}}}});$.registerModule({name:"hcom.landing.special_deals.pages.common",dependencies:["hcom.common.modules.emitter","hcom.common.modules.toggle","hcom.landing.modules.basicinput","hcom.common.modules.popdiv","hcom.common.modules.checkavailabilitydialog","hcom.landing.special_deals.modules.checkavailabilitydialog","hcom.common.modules.searchpopdiv","hcom.common.modules.hotelimagepopdiv","hcom.landing.modules.hotelimagepopdiv","hcom.landing.modules.querymodule","hcom.landing.special_deals.pages.nodealspopdiv","hcom.common.modules.emailtofriend","hcom.common.modules.sharing_n_email","hcom.common.modules.share_services"],impl:function(){var E;function H(){E=new $.formatter(hcom.landing.data.staticMessages);E.setGlobal()}function I(){if(hcom.landing.data&&hcom.landing.data.popdiv){return new hcom.landing.modules.hotelimagepopdiv({$container:$("#imagePopDiv"),clickFilter:"a.hotelDetailsPhoto",store:new hcom.common.modules.hotelimagepopdiv.JSONStore({data:hcom.landing.data.popdiv})})}}function B(){var K;K=new hcom.landing.special_deals.modules.checkavailabilitydialog("ca",false,null,{containerSelector:"#page_container",roomSelector:"select[name=roomno]:first",messageNS:"hcom.locale.search.messages"});K.attachEvents();K.buildTemplate(hcom.common.modules.template.buildJson(hcom.landing.data.staticTemplates))}function D(){return new hcom.common.modules.emailtofriend({titlebar:"div.citylanding_titlebar:first",popdiv:"div.common_emailtofriend:first",z_index:"4"})}function J(){if($("#lnk_share_page").length){return new hcom.common.modules.sharing_n_email()}}function C(){if($.browser.safari){$("a.favorites").remove()}else{$("a.favorites").click(function(K){if(!$.browser.opera){K.preventDefault()}$.bookmark(".icon_sprite_toolbar a.favorites")})}}function F(){$(".details .desc .deal_desc .icon_sprite_information").click(function(K){var L=$(".special_deals_disclaimer").offset().top;$("html,body").animate({scrollTop:L},1500)})}function A(){var K=hcom.common.modules.share_services;K.loadGP1();K.loadFBLike();K.loadVkontakte()}function G(){return new hcom.common.modules.toggle()}return{init:function(){H();I();G();D();J();C();B();F();A()}}}});$.registerModule({name:"hcom.landing.special_deals.modules.checkavailabilitydialog",dependencies:["hcom.common.modules.checkavailabilitydialog","hcom.common.modules.basicinput"],impl:function(A){var B=$.extendCls(hcom.common.modules.checkavailabilitydialog,{constructor:function(E,F,D,C){B.superclass.constructor.call(this,E,F,D,C)},submitForm:function(){var C=$("#checkAvailabilityHolder").find("form:first");C.find("input[name=hotelId]").val(this.hotelid);C.find("[name^='searchParams.']").each(function(E,F){var D=$(F);D.attr("name",D.attr("name").replace(/^searchParams\./,""))});C.trigger("submit")},attachEvents:function(){var C=this;$.doc.on("click",".special_deals_hlist:first span.hcomCheckAvailability",function(D){C.open(D)});B.superclass.attachEvents.call(this)}});B.init=function(){};return B}});$.registerModule({name:"hcom.landing.special_deals.pages.nodealspopdiv",dependencies:["hcom.common.modules.glasspane"],impl:function(A){var B=$("div.hcom_popdiv_nodeals");return{init:function(){if(B.length>0){B.show();if($.browser.msie&&$.browser.version<7){$.doc.scrollTop(0)}hcom.common.modules.glasspane.initStatic().show(true);var C=function(){B.hide();hcom.common.modules.glasspane.hide()};$("#btn_close",B).add("div.close",B).on("click",function(E){C();E.preventDefault();return false});var D=$("a.bookmark_link",B);if($.browser.safari){D.remove()}else{D.on("click",function(E){if(!$.browser.opera){E.preventDefault()}$.bookmark(D)})}}}}}});$.registerModule({name:"hcom.booking.modules.sitecatalyst",dependencies:["hcom.common.modules.sitecatalyst"],impl:function(A){function B(C){return C.find("global-error").children("error-code").eq(0).attr("value")}return{formFillingStarted:function(){hcom.common.modules.sitecatalyst.sendPartialReport({eVar33:"FormStarted",prop33:"FormStarted"},"event19",s.pageName)},orderSubmitted:function(){var L=$('input[name="paymentAndBilling.selectedPaymentType"]:checked').val()||"CREDITCARD",I=function(){var N={CREDITCARD:"Credit Card",NETBANK:"Net Banking (3rd party)",DEBITCARD:"Debit Card (3rd party)",DIRECTDEBIT:"ELV",PAYPAL:"Paypal"},M=N[L];return M}(),K=function(){var M="NA",N=function(Q){var P=/.*:.*:([^\]]+)/.exec(Q),O=Q;if(P&&P.length>1&&typeof P[1]==="string"){O=P[1]}return O};switch(L){case"CREDITCARD":M=$("#sct_booking_ccard_type").find("option:selected").attr("data-omniturename");break;case"NETBANK":M=$("#booking_paymentoption_netbank").find("option:selected").text()+" ["+$("#booking_paymentoption_netbank").val()+"]";break;case"DEBITCARD":M=$("#booking_paymentoption_debitcard").find("option:selected").text()+" ["+$("#booking_paymentoption_debitcard").val()+"]";break}return N(M)}(),F=hcom.locale.rules.installmentPaymentEnabled,D=F?"Install":"Full",J=$("#payment_installments").find("input:checked").prop("id")||"NA",E=function(){var M="NA",O=$("#sct_saved_card"),N=$("#chbox_booking_save_card");if(L==="CREDITCARD"){if(O.length>0&&O.val()!=="new"){M="Existing"}else{if(N.is(":checked")&&N.is(":visible")){M="New"}}}return M}(),H=function(){var M=hcom.locale.rules.is3dsEnabled,N=L==="CREDITCARD"&&$("#sct_booking_ccard_type").find("option:selected").attr("data-3dsrequired")==="true";return M&&N?"3DS Req":"Non 3DS"}(),G=function(){var M="3rd Party Net Banking Authentication";switch(L){case"CREDITCARD":M="1st Party Authentication";break;case"DIRECTDEBIT":M="1st Party Authentication";break}if(H==="3DS Req"){M="3D Secure Authentication"}return M}(),C={eVar33:"OrderSubmitted",prop33:"OrderSubmitted",pageName:"Booking Enter Details "+hcom.booking.modules.core.getPropertyType()};C.eVar18=function(){var M="",N=[];N.push("Payment Type Selection");N.push(I);N.push(K);N.push(D);N.push(J);N.push(E);N.push(H);M=N.join("::");return M}();C.channel=G;hcom.common.modules.sitecatalyst.sendPartialReport(C,"event20",C.pageName)},onCouponAccept:function(C,D){hcom.common.modules.sitecatalyst.sendPartialReport({pageName:(D||"")+"Booking Enter Details Merchant :: Coupon applied",eVar30:C},null,"coupon applied "+C)},onCouponFailed:function(C,D){hcom.common.modules.sitecatalyst.sendPartialReport({pageName:(D||"")+"Booking Enter Details Merchant :: Coupon failed",eVar30:"f-"+C},null,"coupon failed "+C)},onCouponRemove:function(C){hcom.common.modules.sitecatalyst.sendPartialReport({pageName:(C||"")+"Booking Enter Details Merchant :: Coupon removed",eVar30:"none"},null,"coupon removed")},onValidationError:function(C){hcom.common.modules.sitecatalyst.sendPartialReport({pageName:hcom.booking.modules.core.getPropertyType()+" Booking Form - Dynamic Validation Error",channel:"Booking Form with Error",eVar33:C,prop33:C},null,"dynamic validation error")},onCardTypeSelection:function(C){hcom.common.modules.sitecatalyst.sendPartialReport({eVar18:C},null,"card type selected")},onDuplicateBooking:function(){hcom.common.modules.sitecatalyst.sendFullReport({pageName:"Booking form page with errors hotel booking form error",channel:"duplicate hotel booking",eVar33:"duplicate booking",prop33:"duplicate booking"})},onHotelNotAvailable:function(C){hcom.common.modules.sitecatalyst.sendFullReport({pageName:hcom.booking.modules.core.getPropertyType()+" Booking Form - Booking Form - Hotel unavailable "+B(C),channel:"Booking Form with Ian Error",eVar33:"Room unavailable",prop33:"Room unavailable"})},onPriceChangeAccepted:function(C,D){hcom.common.modules.sitecatalyst.sendFullReport({eVar33:"Price change:complete|"+C+"|"+D,prop33:"Price change:complete|"+C+"|"+D})},onPriceChangeCancelled:function(C,D){hcom.common.modules.sitecatalyst.sendFullReport({eVar33:"Price change:cancel|"+C+"|"+D,prop33:"Price change:cancel|"+C+"|"+D})},onAbbreviatedBookingLinkClicked:function(C){hcom.common.modules.sitecatalyst.sendPartialReport({eVar33:window.s.pageName+" :: "+C,prop33:window.s.pageName+" :: "+C},null,"Abbreviated booking "+C)},genericBackendError:function(K,F){var I,G,J,H,D=K.children("siteCatalystProperties").children(),E,C=true;if((C=!!D.length)){I={};for(H=0;(G=D[H])&&C;H+=1){if((C=(J=$.trim($(G).text())).length>0)){I[G.nodeName]=J}}if(C&&(C=!!(I.pageName&&I.channel&&I.eVar33&&I.prop33))){if(F){hcom.common.modules.sitecatalyst.sendPartialReport(I,null,I.eVar33)}else{hcom.common.modules.sitecatalyst.sendFullReport(I)}}}return C},genericBackendErrorByJSON:function(C,E){var D=C.siteCatalystProperties,F=!!(D.pageName&&D.channel&&D.eVar33&&D.prop33);if(F){if(E){hcom.common.modules.sitecatalyst.sendPartialReport(D,null,D.eVar33)}else{hcom.common.modules.sitecatalyst.sendFullReport(D)}}return F},on3DReport:function(D,C){hcom.common.modules.sitecatalyst.sendFullReport({pageName:hcom.booking.modules.core.getPropertyType()+" Booking Form - 3D Secure :"+C,channel:"Booking Form 3D Secure : "+C,eVar33:D,prop33:D})},on3DPartialReport:function(C){hcom.common.modules.sitecatalyst.sendPartialReport({eVar33:C,prop33:C},null,"3D Secure partial report")},onWelcomeRewardApply:function(){hcom.common.modules.sitecatalyst.sendPartialReport({pageName:"Booking Enter Details Merchant :: WRRewardNightApplied",eVar33:"WRRewardNightApplied",prop33:"WRRewardNightApplied"},null,"WRRewardNightApplied")},onCouponApplyBtnClick:function(){hcom.common.modules.sitecatalyst.sendPartialReport({pageName:"Booking Form - Coupon Apply Button Clicked",eVar33:"Coupon Apply Button Clicked",prop33:"Coupon Apply Button Clicked"},null,"Coupon Apply Button Clicked")}}}});$.registerModule({name:"hcom.booking.modules.wr_selector",impl:function(A){var B;B=function(C){this.defaults={selector:".wr_multiple_selector",rooms_nights_selector:"#rooms_and_nigths_holder",rooms_regexp:/rooms_([0-9]*)/,nights_regexp:/nights_([0-9]*)/,label_selector:"p.wr_left span",form_submit_btn:".freenight div.buttonBorder1",form:undefined,max:undefined};this.config=$.extend(this.defaults,C);this.reinit()};B.prototype={initialize:function(){var C=$(this.config.rooms_nights_selector).prop("class");this.$wr_selector=$(this.config.selector);if(this.$wr_selector.length===1){this.$form=(this.config.form!==undefined)?$(this.config.form):this.$wr_selector.parents("form").eq(0);this.$inputs=this.$wr_selector.find('input[type="checkbox"]');if(this.config.max!==undefined){this.max=this.config.max}if(C!==undefined){var D=this;$.each(C.split(" "),function(E,F){if(F.match(D.config.rooms_regexp)){D.rooms=parseInt(F.match(D.config.rooms_regexp)[1],10)}else{if(F.match(D.config.nights_regexp)){D.nights=parseInt(F.match(D.config.nights_regexp)[1],10)}}});this.max=Math.min(this.$inputs.length,this.nights)}}},bindEvents:function(){var F=this.$inputs,D=$(this.config.label_selector,this.$form),C=this.max,E=$(this.config.form_submit_btn,this.$form);if(this.$wr_selector.length===1){var G=function(){var I=F.filter(":checked").length,H=F.filter(":not(:checked)");if(I>0){E.removeClass("notActive");$("input",E).removeAttr("disabled");D.parent().css({visibility:"visible"})}else{if(I===0){E.addClass("notActive");$("input",E).attr("disabled","disabled")}}if(C-I>0){H.removeAttr("disabled")}else{H.attr("disabled","disabled")}D.text(C-I)};F.on("click",G);G()}},init:function(){},reinit:function(){this.initialize();this.bindEvents()}};return B}});$.registerModule({name:"hcom.gadgets.modules.headmenu",dependencies:["hcom.common.modules.emitter","hcom.common.modules.dropdown","hcom.common.modules.robots","hcom.common.modules.base64"],impl:function(C){var D,F;function A(J){var I=$(J);return(I.is("a")&&I.is(":not(.focus)"))||I.parents("a").eq(0).is(".focus")===false||typeof Touch==="object"}function E(){$("body div.page_header div.custom_dropdown.currency").removeClass("currency_ie6_non_js");$("body div.page_header div.custom_dropdown.language").removeClass("language_ie6_non_js");$.doc.on("click","#currency_menu a",function(){var J=$("#currencyTargetURL").val(),I=this.href;if(!I.match(/[&?]sourceUrl=/)){this.href=[I,I.indexOf("?")<0?"?":"&","sourceUrl=",J].join("")}});return new D.bar(new F({ns:"DDMenuLanguage",trigger:$("body div.page_header div.language:first > a.focus"),activeClass:"languageActive",hoverClass:"languageHover",menu:$("#language_menu"),container:$("body div.page_header div.language"),allowDefault:A}),new F({ns:"DDMenuCurrency",trigger:$("body div.page_header div.currency:first > a.focus"),activeClass:"currencyActive",hoverClass:"currencyHover",menu:$("#currency_menu"),container:$("body div.page_header div.currency"),allowDefault:A}))}function B(I){var J=I.indexOf("//");J=I.indexOf("/",J<0?0:J+2);return J<0?null:[I.substring(0,J),I.substring(J)]}function G(K,L){var J,I;if(L){J=B(L);if(J){I=K+J[1]}}return I}function H(){if($(".hcom_options")[0]){$.ajax({url:hcom.configuration.SELECTORS_URL,dataType:"xml",type:"GET",data:{},success:function(N){var J=$(N).children("headerFooterAdditionalData"),P=J.children("languageSelectorContent"),K=$("#language_menu"),Q=new RegExp("\\?pos="+hcom.configuration.HCOM_POS+"&locale="+hcom.locale.language,"i"),R=new RegExp("([a-z]{2})\\-([A-Z]{2})"),M=Object.getReferenceToNestedName("hcom.footer.change_language.links"),I=$("#change_language"),L=function(T){var S;if(I.length>0){S=I.find("a[lang="+T+"]").attr("href")}else{console.assert(M);S=M[T]?hcom.common.modules.base64.decode(M[T]):null}return S};K.find(".site_group").each(function(){$(this).append(P.children("#"+this.id).text())});K.find("a").each(function(){var V=this.href.substring(this.href.indexOf("?")),T,W,U;$(this).append("&lrm;").find("span").after("&rlm;");if(this.lang.length>0){W=L(this.lang);if(!W){T=B(this.href);U=R.exec(this.lang);if(T&&U){W=G(T[0],L(U[1]))}}if(W){var S=W.indexOf("?");this.href=(S===-1?W:W.substring(0,S))+V}}if(Q.test(V)){$(this).parent("li").addClass("active")}});$("#currency_menu").append(J.children("currencySelectorContent").text());var O=$(".currency .active_currency_symbol").text();$("#currency_"+O).addClass("active")},complete:function(J,I){E()},error:function(J,K,I){console.warn(K)}})}}return{init:function(){D=hcom.common.modules.dropdown;F=D.menu;hcom.common.modules.robots.addAssetLinks();H()}}}});$.registerModule({name:"hcom.gadgets.modules.ipad_overlay",dependencies:[],impl:function(C){var B=$("#ipad_overlay"),A=$("#g");return{init:function(){if(B.length){var D=$(".cancel",B),E=$('<style type="text/css">#docking_bar{display:none !important;}</style>').appendTo("head");D.on("click",function(F){F.preventDefault();B.hide();A.removeClass("has_overlay");E.remove();$.win.trigger("resize")});$.win.on("load",function(){$("body > iframe").css({position:"absolute",top:"0",visibility:"hidden"})})}}}}});$.registerModule({name:"hcom.gadgets.queryform.modules.autosuggest",dependencies:["hcom.common.modules.autosuggest","hcom.common.modules.autosuggest_srs","hcom.common.pages.common"],impl:function(A){return{init:function(){},loadAutoSuggest:function(G,E,F,J){var I=hcom.locale.autosuggest,D,B,C,H={inputControlId:G,formId:"searchForm",i18nMessages:I.i18nMessages,minCharLength:I.activationCharLength,itemsNrPerCategory:5,urlBase:I.useSrsDataHomepage?I.srsURL:I.asURL,lang:hcom.locale.language,hotelAction:"/hotel/details.html",countryAction:I.countryURL,regionAction:I.regionURL,stateAction:I.stateURL,continentAction:I.continentURL,destinationLandingPageAction:I.destinationLandingPageUrl,srsBoostConfig:I.srsBoostConfig,formId:"searchForm",sendDataTo_Search_Do:false,pageName:I.pageName||"HomePage",selectDestinationIdField:function(){return $("#destinationId")},selectLandmarkIdField:function(){return $("#landmarkId")},selectHotelIdField:function(){return $("#hotelId")},rowSelectedSupplementary:F&&F.rowSelectedSupplementary||$.noop,onDestinationInputChange:F&&F.onDestinationInputChange||$.noop,onFormSubmitCommon:function(P){var O=P.settings,W=P.lastSelected,Q=P.isDestinationInputChanged,S,N=false,M=false,L=false,K,U,T,X=$("#"+O.formId),R,V;if(O.selectDestinationIdField().length===0){X.append("<input type='hidden' name='destinationId' id='destinationId' value='' />")}if(O.selectLandmarkIdField().length===0){X.append("<input type='hidden' name='searchParams.landmark' id='landmarkId' value='' />")}if(O.selectHotelIdField().length===0){X.append("<input type='hidden' name='hotelId' id='hotelId' value='' />")}if(W.rowData){if(I.useSrsDataHomepage){K=W.rowData.landmarkCityDestinationId||W.rowData.destinationId;if(W.rowData.landmarkCityDestinationId){U=W.rowData.destinationId}if(W.rowData.type==="HOTEL"){T=W.rowData.destinationId}}else{K=W.rowData[1];U=W.rowData[2];T=W.rowData[3]}O.selectDestinationIdField().val(typeof K==="undefined"?"":K);O.selectLandmarkIdField().val(typeof U==="undefined"?"":U);O.selectHotelIdField().val(typeof T==="undefined"?"":T)}if(I.useSrsDataHomepage){if(W.rowData){switch(W.rowData.type){case"HOTEL":N=true;break;case"COUNTRY":M=true;L=O.countryAction;break;case"REGION":M=true;L=O.regionAction;break;case"STATE":M=true;L=O.stateAction;break;case"CONTINENT":M=true;L=O.continentAction;break}if(W.rowData.redirectPage==="DESTINATION_LANDING_PAGE"){M=true;L=O.destinationLandingPageAction}}}else{if(O.selectHotelIdField().val().length>0){N=true}}if(N){X.attr("action",O.hotelAction);X.attr("method","get");if(!I.useSrsDataHomepage){X.find('[name="destinationId"]').remove()}R=X.find('[name="rooms"]');S=R.val();if(R.length){R.attr("name","rooms_")}else{S=X.find("[name='numberOfRooms']").val()}V=X.find("[name='roomno']");if(!V.length){V=$("<input type='hidden' name='roomno' value='' />");X.append(V)}V.val(S);X.find("input").add("select",X).not("[disabled]").each(function(){var Z=$(this),Y=Z.attr("name");if(!!Y&&Y.match("^searchParams")){X.append("<input type='hidden' name='"+Z.attr("name").replace("searchParams.","")+"' value='"+Z.val()+"' />")}})}if(M&&L){L=L.replace(/([^\{]*)(\{.*\})([^\}]*)/g,"$1"+K+"$3");X.attr("action",L);X.attr("method","get")}}};$.extend(H,J);D=hcom.common.modules.autosuggest;B=hcom.common.modules.autosuggest_srs;C=hcom.locale.autosuggest.useSrsDataHomepage?B:D;C[H.inputControlId]=new C.AutoSuggest(H)}}}});$.registerModule({name:"hcom.gadgets.queryform.modules.basicinput",dependencies:["hcom.common.pages.common","hcom.common.modules.ie6popupplate","hcom.gadgets.queryform.modules.basicinput_add_room","hcom.gadgets.queryform.modules.basicinput_distribute","hcom.gadgets.queryform.modules.validation"],impl:function(A){var B;B=function(C){var D;this.config=$.extend({},B.DEFAULTS,C);this.fmt=new $.formatter();D=$.extendCls(hcom.common.modules.ie6popupplate,{getAlignment:function(E){var F=D.superclass.getAlignment.call(this,E);return{top:F.top+15,left:F.left+8,width:F.width-16,height:F.height-22}}});this.CalendarIe6Plate=D;this.dateFormat=hcom.configuration.DEFAULT_DATE_FORMAT.toLowerCase();this.localizedDateFormat=hcom.configuration.LOCALIZED_DATE_FORMAT;this.daysOfTheWeek=["search.mstep.nightly.day.sunday","search.mstep.nightly.day.monday","search.mstep.nightly.day.tuesday","search.mstep.nightly.day.wednesday","search.mstep.nightly.day.thursday","search.mstep.nightly.day.friday","search.mstep.nightly.day.saturday"];this.$searchForm=$(this.config.formSelector);if(this.$searchForm.length){if(this.config.interstitial){this.basicInputTemplates=hcom.gadgets.queryform.interstitial.data.staticTemplates.basicInput}else{this.basicInputTemplates=hcom.gadgets.queryform.data.staticTemplates.basicInput}}this.$submitButton=$(this.config.buttonSelector,this.$searchForm);this.$destinationField=$(this.config.destinationSelector,this.$searchForm);this.$roomsInput=$(this.config.roomSelector,this.$searchForm);this.$people=$(this.config.peopleSelector,this.$searchForm);this.$arrivalDate=$(this.config.arrivalSelector,this.$searchForm);this.$arrivalDropdown=$(this.config.arrivalDropdownSelector,this.$searchForm);this.$departureDate=$(this.config.departureSelector,this.$searchForm);this.$departureDropdown=$(this.config.departureDropdownSelector,this.$searchForm);this.$nights=$(this.config.nightsSelector,this.$searchForm);this.$nights_container=$(this.config.nightsContainerSelector,this.$searchForm);this.$flexibleDatesCheckBox=$(this.config.flexibleSelector,this.$searchForm);this.onebranded=this.$searchForm.closest(".page_widget").hasClass("one_branded_query_form")||this.$searchForm.find(".page_widget").hasClass("one_branded_query_form");this.$roomNumberTextCells=$(".roomNumber",this.$searchForm);this.firstRoomText=this.$roomNumberTextCells.eq(0).text();this.roomNumber=parseInt(this.$roomsInput.val(),10)||1;this.hasCompactAges=!$("th.compactAges:first",this.$people).hasClass("hidden");if($("#sct_rooms"+this.config.suffix,this.$searchForm).length){this.roomNumber=parseInt($("#sct_rooms"+this.config.suffix,this.$searchForm).val(),10)}else{this.roomNumber=parseInt(this.$roomsInput.val(),10)}if(this.roomNumber===1){this.$roomNumberTextCells.eq(0).text("")}this.updateChildAgeLinks();this.upDateNightsAndWeekDays();if(this.$people.hasClass("add_room")){this.queryFormAddRoomLink=new hcom.gadgets.queryform.modules.basicinput_add_room({$form:this.$searchForm,$roomsInput:this.$roomsInput,onChildNumberChange:$.proxy(this.onChildNumberChange,this),onChange:$.proxy(function(){if($.cookie("homepage_search_data")){this.$chChildAgeLinks.trigger("click")}},this)});this.queryFormAddRoomLink.init()}else{if(this.$people.hasClass("distribute")){this.queryFormAddRoomDistribute=new hcom.gadgets.queryform.modules.basicinput_distribute({$form:this.$searchForm});this.queryFormAddRoomDistribute.init()}}this.errors=this.errors();this.errors.init();this.groupBookingState=this.groupBookingState();this.registerEvents();if(this.onebranded&&$.cookie("homepage_search_data")){this.$chChildAgeLinks.trigger("click")}};B.prototype={getDate:function(C){return Date.parsePOSLocaleDate(C)},getArrivalDate:function(){return this.getDate($.trim(this.$arrivalDate.val()))},getDepartureDate:function(){return this.getDate($.trim(this.$departureDate.val()))},clearFlexibleDatesFlag:function(){this.$flexibleDatesCheckBox.removeAttr("checked")},updateNights:function(E,G){var F,C,D;if(E&&G){C=Math.round((G.getTime()-E.getTime())/86400000);if(C&&C>0){this.$nights_container.css("visibility","visible");if(this.onebranded){F=C}else{if(C===1){F=this.fmt.format("search.mstep.calendar.night_single")}else{F=this.fmt.format("search.mstep.calendar.night_plural",C)}}}}if(F){D=this.$nights.text(F)}else{D=this.$nights.empty();this.$nights_container.css("visibility","hidden")}return D},updateWeekDay:function(D,C){if(C){$(D).text(this.fmt.format(this.daysOfTheWeek[C.getDay()]))}else{$(D).empty()}},updateDepartureDatePicker:function(D,E){var C;if(!E&&D){C=new Date();C.setTime(D.valueOf())}else{C=null}$.extend($.datepicker.getInst(this.$departureDate[0]).settings,{defaultDate:D,highlightedDate:C})},enableChildAgeSelectors:function(G,F){var H,D,C,E;for(E=0;E<3;E++){H=$($.format("#list_child_ages_{0}_{1}"+this.config.suffix,G,E),this.$searchForm);D=$($.format("#sct_ca_{0}_{1}"+this.config.suffix,G,E),this.$searchForm);C=H.prev().children(".error_column").parents("tr");if(E<F){H.show();C.show();D.removeAttr("disabled")}else{H.hide();C.hide();D.prop("disabled",true)}}$($.format("#child_{0}_ages"+this.config.suffix,G),this.$searchForm).show()},hideCompactAges:function(){if(this.hasCompactAges){this.hasCompactAges=false;$(".compactAges",this.$searchForm).addClass("hidden")}},updateChildAgeDisclaimer:function(){var D=$("#travel_age"+this.config.suffix,this.$searchForm),C=false;this.$chChildAgeLinks.each($.proxy(function(G){var F=$("#sct_children_"+G+this.config.suffix,this.$searchForm),E=F.val();if(E>0){C=true}},this));if(C){D.removeClass("hidden")}else{D.addClass("hidden")}},updateChildAgeLinks:function(){this.$chChildAgeLinks=$("a.change_child_ages_link",this.$people)},onChildNumberChange:function(){var C="select.childNumberSelect",E="change.basicInput",D=this;function F(){this.updateChildAgeLinks();this.hideCompactAges();this.$chChildAgeLinks.each($.proxy(function(G){this.enableChildAgeSelectors(G,$("#sct_children_"+G+this.config.suffix,this.$searchForm).val())},this));this.updateChildAgeDisclaimer();if(this.config.interstitial){$.win.trigger("interstitial.resized")}}return{bind:function(){D.$people.on(E,C,$.proxy(F,D))},unbind:function(){D.$people.off(E,C,$.proxy(F,D))}}},getFormData:function(){var E=$.cookie("homepage_search_data"),D={},C=E.split("//");D.rooms=C[3].split("/");D.roomNumber=D.rooms.length;return D},errors:function(){var G="<p class='error' ><span class='error_icon'></span><span class='arrow'></span>{0}</p>",F="<p class='error {0}' ><span class='error_icon'></span><span class='arrow'></span>{1}<div class='clear-both'></div></p>",J="<tr><td class='error_column' colspan='9'><p class='error {0}' ><span class='error_icon'></span><span class='arrow'></span>{1}</p></tr></td>",P="destination",M="date",K="rooms",L={destination:false,date:false,rooms:false},S=[],H,Q,D,C,I=this;function N(V,U){U.addClass("error")}function T(W,U,X,V){this.c={fields:$.isArray(W)?W:[W],container:U,msgKey:X,msgParams:V}}T.prototype={render:function(U,V){if(U===true){var W=this.c;if(I.onebranded){L[W.container].push($.format(F,V,I.fmt.format(W.msgKey,W.msgParams||[])))}else{L[W.container].push($.format(G,I.fmt.format(W.msgKey,W.msgParams||[])))}$.each(W.fields,N);S.push(W.msgKey)}}};function E(U,V){this.c={container:U,msgKey:V}}E.prototype={render:function(d){var Z,U,X,W,a=false,Y=this.c,b,V;for(X=0;(Z=d[X]);X++){for(W=0;(U=Z[W])!==undefined;W++){if(U!==false){a=true;b=$($.format("#list_child_ages_{0}_{1}"+I.config.suffix,X,W),I.$searchForm);if(V===undefined){V=b}b.addClass("error");if(I.queryFormAddRoomLink){S.push(Y.msgKey);b.children().last().html($.format(G,I.fmt.format("search.mstep.rooms.invalid_childrenages")))}}}}if(a&&!I.queryFormAddRoomLink&&!I.onebranded){S.push(Y.msgKey);L[Y.container].push($.format(G,I.fmt.format(Y.msgKey)))}if(a&&I.onebranded){V.before($.format(J,Y.container,I.fmt.format(Y.msgKey)));V.addClass("first_error_child_row")}}};function R(){var U;S=[];for(U in L){if(L.hasOwnProperty(U)){L[U]=[]}}}function O(V){var X=".c11,.c13",U=V.closest(X),Z=U.siblings(X),Y=U.offset(),W=Z.offset();return Y&&W?(Y.left<W.left):true}return{init:function(){var U="search.mstep.provide.childred.ages";Q=$("label[for=txt_destination"+I.config.suffix+"]",I.$searchForm);C=$("div.arrival",I.$searchForm);if(!!I.queryFormAddRoomDistribute){U="search.mstep.provide.children.ages.limit"}H={destinationEmpty:new T(I.$destinationField,P,"search.mstep.destionation.please.enter"),checkinEmpty:new T([I.$arrivalDate,I.$arrivalDropdown],M,"search.mstep.dates.checkin.empty"),checkoutEmpty:new T([I.$departureDate,I.$departureDropdown],M,"search.mstep.dates.checkout.empty"),invalidArrivalFormat:new T([I.$arrivalDate,I.$arrivalDropdown],M,"search.mstep.dates.invalidFormat"),invalidDepartureFormat:new T([I.$departureDate,I.$departureDropdown],M,"search.mstep.dates.invalidFormat"),checkoutPriorToCheckin:new T([I.$arrivalDate,I.$arrivalDropdown,I.$departureDate,I.$departureDropdown],M,"search.mstep.dates.checkOutPriorToCheckin"),datesCannotBeTheSame:new T([I.$arrivalDate,I.$arrivalDropdown,I.$departureDate,I.$departureDropdown],M,"search.mstep.dates.cannot.be.the.same"),checkInDatePrior:new T([I.$arrivalDate,I.$arrivalDropdown],M,"search.mstep.dates.checkInDatePrior"),checkOutDatePrior:new T([I.$departureDate,I.$departureDropdown],M,"search.mstep.dates.checkOutDatePrior"),tooLongStay:new T([I.$arrivalDate,I.$arrivalDropdown,I.$departureDate,I.$departureDropdown],M,"search.mstep.dates.tooLongStay",28),datesCannotBeInThePast:new T([I.$arrivalDate,I.$arrivalDropdown,I.$departureDate,I.$departureDropdown],M,"search.mstep.dates.dateInPast"),checkInCheckOutEmpty:new T([I.$arrivalDate,I.$arrivalDropdown,I.$departureDate,I.$departureDropdown],M,"search.mstep.dates.checkInCheckOutEmpty"),rooms:new E(K,U)}},getErrorCodes:function(){return S.join(":")},set:function(V){var W,X,U;$("p.error",I.$searchForm).remove();$(".error",I.$searchForm).removeClass("error");if(I.onebranded){$("td.error_column",I.$people).parents("tr").next().removeClass("first_error_child_row");$("td.error_column",I.$people).parents("tr").remove()}R();for(W in H){if(H.hasOwnProperty(W)&&V.hasOwnProperty(W)){H[W].render(V[W],W)}}Q.before(L[P].join(""));C.before(L[M].join(""));$("> table:first",I.$people).before(L[K].join(""));if(I.config.interstitial){$.win.trigger("interstitial.resized")}}}},isDatesFlexible:function(){return this.$flexibleDatesCheckBox.length&&this.$flexibleDatesCheckBox.prop("checked")},isDatesFlexibleAvailable:function(){return !!this.$flexibleDatesCheckBox.length},serialize:function(){var F=[],H,E,G,D,C;if(this.$roomsInput.length){this.roomNumber=parseInt(this.$roomsInput.val(),10)}if(this.roomNumber&&this.roomNumber!==9){for(D=0;D<this.roomNumber;D++){H=parseInt($("#sct_children_"+D+this.config.suffix,this.$searchForm).val(),10);G=[];E="#sct_ca_"+D+"_";for(C=0;C<H;C++){G.push($(E+C+this.config.suffix,this.$searchForm).val())}F.push(G)}}return{destination:$.trim(this.$destinationField.val()),arrivalDateStr:$.trim(this.$arrivalDate.val()),departureDateStr:$.trim(this.$departureDate.val()),isGroupBooking:$("#sct_rooms"+this.config.suffix+" > option:selected",this.$searchForm).val()>8,isFlexible:this.isDatesFlexible(),isFlexibleAvailable:this.isDatesFlexibleAvailable(),rooms:F}},validate:function(){var C;C=hcom.gadgets.queryform.modules.validation.validate(this.serialize());this.errors.set(C);return C},upDateNightsAndWeekDays:function(){var C=this.getArrivalDate(),D=this.getDepartureDate();this.updateNights(C,D);this.updateWeekDay(this.config.arrivalDaySelector,C);this.updateWeekDay(this.config.departureDaySelector,D);if(this.config.interstitial){$.win.trigger("interstitial.resized")}},groupBookingState:function(){var C=false,D=this;return{set:function(G){var E,H,F;if(C!==G){C=G;if(D.onebranded){E=$(".child_row",D.$people);F=$(".error_column",D.$people).parents("tr");H=$("th:gt(1):lt(5)",D.$people).add($("td:gt(1):lt(7)",D.$people));if(G){E.css("display","none");F.css("display","none");H.css("visibility","hidden");$("div.errorPopup",D.$searchForm).remove();$("ul.steps li",D.$searchForm).removeClass("errorC")}else{H.css("visibility","visible");E.css("display","table-row");F.css("display","table-row");D.onChildNumberChange().bind();$("select.childNumberSelect",D.$people).change();D.onChildNumberChange().unbind()}}else{E=$($.format("th:gt(0):lt({0}),tbody td:gt(0):lt({0}),tfoot td",D.hasCompactAges?4:3),D.$people);E[G?"addClass":"removeClass"]("hidden")}}if(D.config.interstitial){$.win.trigger("interstitial.resized")}}}},handleFlexible:function(){var C=this.$arrivalDate.add(this.$departureDate),F=$(this.config.arrivalIconSelector+","+this.config.departureIconSelector,this.$searchForm),E=$(this.config.arrivalDaySelector+","+this.config.departureDaySelector,this.$searchForm),D=$(".briefcase_container",this.$searchForm);if(this.$flexibleDatesCheckBox.is(":checked")){C.prop("disabled","disabled").addClass("disabled").val(this.localizedDateFormat);this.$arrivalDropdown.add(this.$departureDropdown).prop("disabled","disabled").addClass("disabled");F.addClass("disabled");E.hide();if(D.text()){this.$nights_container.css("visibility","hidden")}}else{C.removeAttr("disabled").removeClass("disabled");this.$arrivalDropdown.add(this.$departureDropdown).removeAttr("disabled").removeClass("disabled");F.removeClass("disabled");this.$arrivalDate.val(this.arrivalDateOrigVal);this.$departureDate.val(this.departureDateOrigVal);E.show();if(D.text()){this.$nights_container.css("visibility","visible")}}},registerEvents:function(){if(this.config.interstitial){this.arrivalDateOrigVal=$.trim($(B.DEFAULTS.arrivalSelector,B.DEFAULTS.formSelector).val());this.departureDateOrigVal=$.trim($(B.DEFAULTS.departureSelector,B.DEFAULTS.formSelector).val())}else{this.arrivalDateOrigVal=$.trim(this.$arrivalDate.val());this.departureDateOrigVal=$.trim(this.$departureDate.val())}this.$arrivalDate.on("change",$.proxy(function(){var F=this.getArrivalDate(),G=this.getDepartureDate();this.arrivalDateOrigVal=$.trim(this.$arrivalDate.val());this.updateNights(F,G);this.updateWeekDay(this.config.arrivalDaySelector,F);this.updateDepartureDatePicker(F,G)},this));this.$departureDate.on("change",$.proxy(function(){var F=this.getArrivalDate(),G=this.getDepartureDate();this.departureDateOrigVal=$.trim(this.$departureDate.val());this.updateNights(F,G);this.updateWeekDay(this.config.departureDaySelector,G)},this));this.ie6plate=new this.CalendarIe6Plate();var E=this.$arrivalDate,C=this.$departureDate,D=this.ie6plate;$.map([{$inp:E,isArrival:true,$depInp:C,minDate:"0"},{$inp:C,isArrival:false,$arrInp:E,minDate:"+1"}],$.proxy(function(F){F.$inp.datepicker({numberOfMonths:2,minDate:F.minDate,maxDate:"+"+hcom.configuration.MAX_ADVANCE_DAYS+"D",maxDateInterval:28,dateFormat:this.dateFormat.replace("yy","y").replace("yy","y"),firstDay:hcom.configuration.FIRST_DAY_OF_WEEK,disableDefaultDaySelect:$.trim(E.val())===this.dateFormat,ie6plate:D,isArrival:F.isArrival,hoverStateCell:true,isDeparture:!F.isArrival,$arrInp:F.$arrInp,$depInp:F.$depInp})},this));this.$arrivalDate.add(this.config.arrivalIconSelector,this.$searchForm).add(this.config.arrivalOneBrandIconSelector,this.$searchForm).on("click",$.proxy(function(F){if(!this.$arrivalDate.prop("disabled")&&!this.isDatesFlexible()){$.datepicker.showDatepicker(this.$arrivalDate[0])}},this));this.$departureDate.add(this.config.departureIconSelector,this.$searchForm).add(this.config.departureOneBrandIconSelector,this.$searchForm).on("click",$.proxy(function(F){if(!this.$departureDate.prop("disabled")&&!this.isDatesFlexible()){$.datepicker.showDatepicker(this.$departureDate[0])}},this));if(this.$flexibleDatesCheckBox.length){this.handleFlexible();this.$flexibleDatesCheckBox.on("change",$.proxy(this.handleFlexible,this))}this.$arrivalDate.add(this.$departureDate).setEmptyValue(this.localizedDateFormat);$("#sct_rooms"+this.config.suffix,this.$searchForm).on("change.basicInput",$.proxy(function(H){this.onChildNumberChange().unbind();var G=parseInt($(H.target).val(),10),F;if(G>1){this.$roomNumberTextCells.eq(0).text(this.firstRoomText)}else{this.$roomNumberTextCells.eq(0).text("")}if(G>8){G=1;this.groupBookingState.set(true)}else{this.groupBookingState.set(false)}if(this.roomNumber!==G){if(this.roomNumber<G){F=[];while(this.roomNumber<G){F.push($.format(this.basicInputTemplates.query_form_row,++this.roomNumber,this.roomNumber-1))}$("tbody tr:last",this.$people).after(F.join(""))}else{if(this.onebranded){$("thead tr,tbody tr.room_row",this.$people).each(function(I,J){if(I>G){$(this).nextAll(":lt(4)").andSelf().remove()}})}else{$("thead tr,tbody tr",this.$people).filter($.format(":gt({0})",G)).remove()}this.roomNumber=G}this.$roomsInput=$('[name="rooms"]',this.$searchForm);if(this.$roomsInput.length&&this.$roomsInput.attr("type")==="hidden"){this.$roomsInput.val(""+this.roomNumber)}this.updateChildAgeLinks();this.updateChildAgeDisclaimer()}this.onChildNumberChange().bind();if(this.config.interstitial){$.win.trigger("interstitial.resized")}},this));this.onChildNumberChange().bind();this.$submitButton.on("click",$.proxy(function(F){var I,H=hcom.gadgets.queryform.modules.validation.Result.prototype.members,K,J=true,G="destinationEmpty";if(this.config.interstitial){K=$.inArray(G,H);if(K!==-1){hcom.gadgets.queryform.modules.validation.Result.prototype.members.splice(K,1)}}if(!this.validate().valid()){F.preventDefault();if(this.config.interstitial){F.stopImmediatePropagation()}J=false;I=this.errors.getErrorCodes();hcom.common.modules.sitecatalyst.sendPartialReport({prop33:I,eVar33:I})}if(this.config.interstitial){hcom.gadgets.queryform.modules.validation.Result.prototype.members.push(G)}return J},this));this.$chChildAgeLinks.on("click",$.proxy(function(F){var G=this.getFormData();F.preventDefault();this.hideCompactAges();this.$chChildAgeLinks.each($.proxy(function(H){var I;if(G.rooms[H]){I=G.rooms[H].split("|");this.enableChildAgeSelectors(H,I.length>1?I[1].split(",").length:0)}},this));this.updateChildAgeDisclaimer();if(this.config.interstitial){$.win.trigger("interstitial.resized")}},this))}};B.DEFAULTS={buttonSelector:"#btn_search_submit",formSelector:".C_mstep_query_module #searchForm",destinationSelector:"#txt_destination",roomSelector:'[name="rooms"]',peopleSelector:"fieldset.people:first",arrivalSelector:"#txt_arrival",arrivalDropdownSelector:"#arrival_day_dropdown,#arrival_year_month_dropdown",departureSelector:"#txt_departure",departureDropdownSelector:"#departure_day_dropdown,#departure_year_month_dropdown",nightsSelector:"#nights",nightsContainerSelector:".nights_container",flexibleSelector:"#flexible_chk",arrivalDaySelector:"#arrivalDay",departureDaySelector:"#departureDay",arrivalIconSelector:"#arrivalIcon",arrivalOneBrandIconSelector:"#arrivalOneBrandIcon",departureIconSelector:"#departureIcon",departureOneBrandIconSelector:"#departureOneBrandIcon",suffix:"",interstitial:false};B.loadBasicInput=function(C){return new B(C)};return B}});$.registerModule({name:"hcom.gadgets.queryform.modules.basicinput_add_room",dependencies:["hcom.common.pages.common","hcom.common.modules.ie6popupplate"],impl:function(A){var B;B=function(C){this.options=$.extend({},C);this.$form=this.options.$form;this.$people=$("fieldset.people",this.$form);this.$table=$("table.people_table tbody",this.$people);this.$firstRow=$("tr:lt(4)",this.$table);this.$roomsInput=this.options.$roomsInput;this.roomNumber=parseInt(this.$roomsInput.val(),10);this.$anotherRoom=$(".another_room",this.$people);this.$groupBooking=$("a.group_booking",this.$form);this.blockBorder='<tr><td colspan="7"><div class="block_border"></div></td></tr>'};B.prototype={init:function(){this.bind_();this.$table.find(".remove_room span.icon_sprite_close").slice(1).css("visibility","visible");if(this.roomNumber===8){this.$anotherRoom.hide();this.$groupBooking.show()}},bind_:function(){this.$groupBooking.on("click",$.proxy(this.onGroupBookingClicked_,this));this.$anotherRoom.on("click",$.proxy(this.onAddRoom_,this));this.$table.on("mouseover",".people_table_head",this.onActualRowHover_);this.$table.on("mouseout",".people_table_head",this.onActualRowHover_);this.$table.on("click",".remove_room",$.proxy(this.onRemoveRoom_,this));this.$table.on("keypress",'input[id^="sct_ca_"]',this.sanitizeChildrenAgeFields_)},updateRoomLabels_:function(){$(".roomNumberLabel",this.$people).each(function(C,D){$(this).children("span").text(C+1)})},resetFields_:function(D,G,F){var H,C,E;H=D.find('select[id^="sct_adults_"]').attr("id","sct_adults_"+G).attr("name","searchParams.rooms["+G+"].numberOfAdults");H.parent().next().find("label").attr("for","sct_adults_"+G);C=D.find('select[id^="sct_children_"]').attr("id","sct_children_"+G).attr("name","children["+G+"]");C.parent().next().find("label").attr("for","sct_children_"+G);D.find('td[id^="td_compactAges_"]').attr("id","td_compactAges_"+G).find('p[id^="compactAges_"]').attr("id","compactAges_"+G).end().find('a[id^="change_child_ages_"]').attr("id","change_child_ages_"+G);D.filter('tr[id^="list_child_ages_"]').each(function(I,J){$(J).attr("id","list_child_ages_"+G+"_"+I)});E=D.find('input[id^="sct_ca_"]');E.each(function(I,J){$(J).attr("id","sct_ca_"+G+"_"+I).attr("name","searchParams.rooms["+G+"].childrenAges["+I+"]")});if(F){C.val("0");E.val("");H.val("2");D.find("p.error").remove();D.filter(".error").removeClass("error")}return D},correctChildAgeInputs_:function(){var C,E,D,F;for(E=0;E<this.roomNumber;E++){F=parseInt($("#sct_children_"+E).val(),10);for(D=0;D<3;D++){C=$($.format("#sct_ca_{0}_{1}",E,D));if(D<F){C.closest("tr").show();C.removeAttr("disabled")}else{C.closest("tr").hide();C.attr("disabled","disabled")}}}},onAddRoom_:function(D){this.onChange();if(this.roomNumber<8){var C=$("tr:last",this.$table);C.after(this.blockBorder);this.resetFields_(this.$firstRow.clone(),this.roomNumber,true).appendTo(this.$table);this.updateRoomLabels_();this.$table.find(".remove_room span.icon_sprite_close").slice(1).css("visibility","visible");if(!!D){++this.roomNumber}this.$roomsInput.val(this.roomNumber);this.onChildNumberChange()().bind();if(this.roomNumber===8){this.$anotherRoom.hide();this.$groupBooking.show()}}this.correctChildAgeInputs_();D.preventDefault();return false},onRemoveRoom_:function(E){var D=this,C=$(E.target).closest("tr.people_table_head");this.onChange();if(C.prev().length>0){C.prev().remove();C.nextAll().andSelf().slice(0,4).remove();this.$roomsInput.val(--this.roomNumber);this.updateRoomLabels_();$("tr.people_table_head",this.$people).each(function(F,G){D.resetFields_($(G).nextUntil(":eq(3)").andSelf(),F,false)});this.correctChildAgeInputs_();if(this.roomNumber<8){this.$anotherRoom.show();this.$groupBooking.hide()}}E.preventDefault();return false},onGroupBookingClicked_:function(C){this.roomNumber=9;this.$roomsInput.val(this.roomNumber);$(">tr",this.$table).not(this.$firstRow).remove();this.$form.trigger("submit");C.preventDefault();return false},sanitizeChildrenAgeFields_:function(D){var C=D.keyCode||D.charCode||D.which;if(!(C>=48&&C<=57||C===8||C===9||C===13)){D.preventDefault()}},onActualRowHover_:function(D){var C=$(this).find(".remove_room span.label");if($(this).prev().length>0){if(D.type==="mouseout"){C.css("visibility","hidden")}else{C.css("visibility","visible")}}},onChildNumberChange:function(){return this.options.onChildNumberChange},onChange:function(){return(this.options&&this.options.onChange?this.options.onChange():undefined)}};return B}});$.registerModule({name:"hcom.gadgets.queryform.modules.basicinput_distribute",impl:function(B){var A;A=function(C){this.options=$.extend({},C);this.$form=this.options.$form;this.$table=$(".room_list_table",this.$form);this.$querySummaryContainer=$(".query_summary_container",this.$form);this.$roomSelect=$("#select_room",this.$querySummaryContainer);this.$adultSelect=$("#select_adult",this.$querySummaryContainer);this.$childSelect=$("#select_child",this.$querySummaryContainer);this.$firstRow=$("tr.room_list_table_head",this.$table).first();this.noOfRooms=parseInt(this.$roomSelect.prop("value"),10)};A.prototype={init:function(){this.displayRoomListPrx_=$.proxy(this.displayRoomList_,this);this.rollDownRoomsPrx_=$.proxy(this.rollDownRooms_,this);this.distributeAdultsPrx_=$.proxy(this.distributeAdults_,this);this.distributeChildrenPrx_=$.proxy(this.distributeChildren_,this);this.addMoreRoomsPrx_=$.proxy(this.addMoreRooms_,this);if(parseInt(this.$adultSelect.prop("value"),10)<8){this.$adultSelect.find("option[value='9']").hide().attr("disabled","disabled")}this.bind_()},bind_:function(){this.$roomSelect.on("change",this.displayRoomListPrx_).on("change",this.rollDownRoomsPrx_);this.$adultSelect.on("change",this.displayRoomListPrx_).on("change",$.proxy(function(){this.updateNumbersPerRoom_(this.$adultSelect,this.distributeAdultsPrx_);this.removeUnecessaryRooms_()},this));this.$childSelect.on("change",this.addMoreRoomsPrx_).on("change",$.proxy(function(){this.updateNumbersPerRoom_(this.$childSelect,this.distributeChildrenPrx_)},this)).on("change",this.displayRoomListPrx_);this.$table.on("change",".childNumberSelect",$.proxy(this.enableChildAgeSelectors_,this)).on("change",".childNumberSelect",$.proxy(this.updateNumberOfChildren_,this)).on("change",".adultNumberSelect",$.proxy(this.updateNumberOfAdults_,this)).on("keypress","input.year_input",this.sanitizeChildAgeFields_);this.$table.add(this.$querySummaryContainer).on("change","select,input",$.proxy(this.handleChildrenDisclaimer_,this))},sanitizeChildAgeFields_:function(D){var C=D.keyCode||D.charCode||D.which;if(!(C>=48&&C<=57||C===8||C===9||C===13)){D.preventDefault()}},displayRoomList_:function(){var D=parseInt(this.$roomSelect.prop("value"),10),C=parseInt(this.$adultSelect.prop("value"),10),E=C-D;if(E>=2||this.isAnyChildSelected_()){this.$table.show()}else{this.$table.hide()}},isAnyChildSelected_:function(){return parseInt(this.$childSelect.prop("value"),10)>0},addMoreRooms_:function(){var D=parseInt(this.$roomSelect.prop("value"),10),C=parseInt(this.$childSelect.prop("value"),10),E=C/(D*3);if(E>1){this.$roomSelect.prop("value",D+parseInt(E,10));this.rollDownRooms_()}},rollDownRooms_:function(){var D=parseInt(this.$roomSelect.prop("value"),10),F=this.noOfRooms,G=Math.abs(D-F),C,E;if(D===9){this.$querySummaryContainer.find("span").slice(2,6).css("visibility","hidden");this.$table.hide()}else{this.$querySummaryContainer.find("span").slice(2,6).css("visibility","visible");if(D>F){for(C=0;C<G;C++){this.$firstRow.clone().insertAfter($("tr.room_list_table_head",this.$table).last());E=$("tr.room_list_table_head",this.$table).last();$(".child_column",E).hide().children("input").attr("disabled","disabled").prop("value","");$(".indiv_adults_box",E).find("select").prop("value",0)}}else{for(C=F-1;C>=D;C--){$(".room_list_table_head",this.$table).eq(C).remove()}}this.noOfRooms=D;this.updateRoomLabels_();$("tr.room_list_table_head",this.$table).each($.proxy(function(H,I){this.resetFields_($(I),H)},this));this.updateNumbersPerRoom_(this.$adultSelect,this.distributeAdultsPrx_);this.fillZeroAdults_();if(parseInt(this.$roomSelect.prop("value"),10)>parseInt(this.$adultSelect.prop("value"),10)){this.updateNumberOfAdults_()}if(parseInt(this.$roomSelect.prop("value"),10)>parseInt(this.$childSelect.prop("value"),10)){this.updateNumberOfChildren_()}this.updateNumbersPerRoom_(this.$childSelect,this.distributeChildrenPrx_)}},fillZeroAdults_:function(){var C=$("td.indiv_adults_box select",this.$table);C.each(function(D,E){if(parseInt($(E).prop("value"),10)===0){$(E).prop("value",1)}})},updateNumbersPerRoom_:function(F,H){var E=parseInt(F.prop("value"),10),C=F.prop("id"),D,G=E;D=$(C==="select_adult"?"td.indiv_adults_box select":"td.indiv_children_box select",this.$table);if(G<9&&C==="select_adult"){this.$adultSelect.find("option[value='9']").hide().attr("disabled","disabled")}if(G<11&&C==="select_child"){this.$childSelect.find("option[value='11']").hide().attr("disabled","disabled")}if(G===9&&C==="select_adult"){G=8;F.prop("value",8);this.$adultSelect.find("option[value='9']").hide().attr("disabled","disabled")}else{if(G===11){G=10;F.prop("value",10);this.$childSelect.find("option[value='11']").hide().attr("disabled","disabled")}}D.each(function(I,J){$(J).prop("value",0)});while(G>=0){G=H(G)}},distributeChildren_:function(C){var D;$('select[id^="sct_children_"]',this.$table).each($.proxy(function(E,F){D=parseInt($(F).prop("value"),10);if(C>0){if(parseInt($(F).prop("value"),10)===3){$(F).prop("value",3);this.$childSelect.prop("value",parseInt(this.$childSelect.prop("value"),10)-1)}else{$(F).prop("value",D+1)}}C--;this.enableChildAgeSelectors_($(F))},this));return C},updateNumberOfAdults_:function(){var C=0;$("td.indiv_adults_box select",this.$table).each(function(D,E){C+=parseInt($(this).prop("value"),10)});if(C<9){this.$adultSelect.prop("value",C)}else{this.$adultSelect.find("option[value='9']").show().removeAttr("disabled");this.$adultSelect.prop("value",9)}},distributeAdults_:function(C){var D;$("td.indiv_adults_box select",this.$table).each(function(E,F){D=parseInt($(F).prop("value"),10);if(C>0){$(F).prop("value",D+1)}--C});return C},enableChildAgeSelectors_:function(F){var E,C,D;if(F.currentTarget===undefined){E=parseInt($(F).prop("value"),10);C=$(".child_column",$(F).parent().parent())}else{E=parseInt($(F.currentTarget).prop("value"),10);C=$(".child_column",$(F.currentTarget).parent().parent())}for(D=0;D<3;D++){if(D<E){C.eq(D).show().removeClass("error");C.eq(D).children("input").removeAttr("disabled")}else{C.eq(D).hide();C.eq(D).children("input").attr("disabled","disabled")}}},removeUnecessaryRooms_:function(){var D=false,C;$(".adultNumberSelect",this.$table).each($.proxy(function(E,F){if(parseInt($(F).prop("value"),10)===0){$(F).closest("tr.room_list_table_head").remove();D=true}},this));if(D){C=parseInt(this.$adultSelect.prop("value"),10);this.$roomSelect.prop("value",C);this.noOfRooms=C;this.updateNumberOfChildren_()}},updateNumberOfChildren_:function(){var C=0;$('select[id^="sct_children_"]',this.$table).each(function(D,E){C+=parseInt($(this).prop("value"),10)});if(C<11){this.$childSelect.prop("value",C)}else{this.$childSelect.find("option[value='11']").show().removeAttr("disabled");this.$childSelect.prop("value",11)}},updateRoomLabels_:function(){$(".roomNumberLabel",this.$table).each(function(C,D){$(this).children("span").text(C+1)})},resetFields_:function(D,F){var G,C,E;G=D.find('select[id^="sct_adults_"]').attr("id","sct_adults_"+F).attr("name","searchParams.rooms["+F+"].numberOfAdults");C=D.find('select[id^="sct_children_"]').attr("id","sct_children_"+F).attr("name","children["+F+"]");D.find('td[id^="td_compactAges_"]').attr("id","td_compactAges_"+F).find('p[id^="compactAges_"]').attr("id","compactAges_"+F).end().find('a[id^="change_child_ages_"]').attr("id","change_child_ages_"+F);D.find('td[id^="list_child_ages_"]').each(function(H,I){$(I).attr("id","list_child_ages_"+F+"_"+H)});E=D.find('input[id^="sct_ca_"]');E.each(function(H,I){$(I).attr("id","sct_ca_"+F+"_"+H).attr("name","searchParams.rooms["+F+"].childrenAges["+H+"]")});return D},handleChildrenDisclaimer_:function(){var C=parseInt(this.$childSelect.prop("value"),10);if(C===0){$("th.children_age_label,tfoot",this.$table).css("visibility","hidden")}else{$("th.children_age_label,tfoot",this.$table).css("visibility","visible")}}};return A}});$.registerModule({name:"hcom.gadgets.queryform.modules.validation",dependencies:[],impl:function(B){function A(D){var F,E,G=true;for(E=0;(F=D[E])!==undefined&&G;E++){G=$.isArray(F)?A(F):!F}return G}function C(){var E,D=this.members;for(E=0;E<D.length;E++){this[D[E]]=false}}C.prototype={members:["destinationEmpty","checkinEmpty","checkoutEmpty","invalidArrivalFormat","invalidDepartureFormat","checkoutPriorToCheckin","datesCannotBeTheSame","datesCannotBeInThePast","checkInDatePrior","checkOutDatePrior","tooLongStay","rooms","checkInCheckOutEmpty"],valid:function(){var G,E=this.members,H=true,D,F;for(G=0;(D=E[G])!==undefined&&H;G++){F=this[D];H=$.isArray(F)?A(F):!F}return H}};return{validate:function(F,J){var S=new C(),N,M,R=F.arrivalDateStr,L=F.departureDateStr,P,Q,O,G,D,I,K,H,E;S.destinationEmpty=F.destination.length===0&&!F.isGroupBooking;S.checkinEmpty=!R&&!!L&&!F.isFlexible;S.checkoutEmpty=!L&&!!R&&!F.isFlexible;S.checkInCheckOutEmpty=!R&&!L&&F.isFlexibleAvailable&&!F.isFlexible;if(R&&L&&!F.isFlexible){P=Date.parsePOSLocaleDate(R);Q=Date.parsePOSLocaleDate(L);if(!P||!Q){S.invalidArrivalFormat=!P;S.invalidDepartureFormat=!Q}else{N=Date.getUserDate();M=Q-P;S.datesCannotBeInThePast=!(P-N>-129600000);S.checkoutPriorToCheckin=M<0;S.datesCannotBeTheSame=M===0;S.tooLongStay=(Q-P-3600000)/86400000>28}}if(F.rooms&&F.rooms.length){D=[];for(K=0;(O=F.rooms[K]);K++){I=[];for(H=0;(G=O[H])!==undefined;H++){E=parseInt(G,10);I.push(isNaN(G)||isNaN(E)||E<0||E>17)}D.push(I)}S.rooms=D}return S},Result:C}}});$.registerModule({name:"hcom.gadgets.queryform.modules.search",dependencies:["hcom.common.modules.glasspane","hcom.common.modules.top_destination","hcom.gadgets.queryform.modules.autosuggest","hcom.common.modules.sitecatalyst","hcom.homepage.modules.date_dropdown_handler"],impl:function(B){var A;A=function(D){var C=hcom.locale.search.resolution,F={},E;this.config=$.extend({},A.DEFAULTS,D);this.unique=false;this.providedASA=false;this.destinationInputChanged=false;this.searchCookiePopulated=false;this.elong="input[name='countryBlacklistSearchUrl']";this.$form=$(this.config.formSelector);this.$destination=$(this.config.destinationSelector,this.$form);this.$searchButton=$(this.config.buttonSelector,this.$form);this.$domestic=$(this.config.domesticSelector,this.$form);this.$international=$(this.config.internationalSelector,this.$form);this.domesticEnabled=this.$domestic.length>0||this.$international.length>0;this.onebranded=this.$form.closest(".page_widget").hasClass("one_branded_query_form")||this.$form.find(".page_widget").hasClass("one_branded_query_form");this.resolution_parameters={useSrsData:C.useSrsData||false,hotelAction:"/hotel/details.html",countryAction:C.countryURL,regionAction:C.regionURL,stateAction:C.stateURL,continentAction:C.continentURL,destinationLandingPageAction:C.destinationLandingPageUrl,srsBoostConfig:C.srsBoostConfig};this.$searchButton.removeAttr("disabled");this.$searchButton.removeClass("cta-disabled");if(this.$destination.attr("data-emptyvalue")){this.$destination.setEmptyValue(this.$destination.attr("data-emptyvalue"));F.focusInputField=false}if(this.$destination.length){this.registerAutoSuggest(F)}E=this.$form.find("#destinationId");if(E.attr("data-orig")){E.val(E.attr("data-orig"))}this.domesticClickEvent();this.attachOnSubmitEvent();if(Object.getReferenceToNestedName("hcom.common.top_destination_suggest.popdiv_enabled")==="true"){this.top_destination=new hcom.common.modules.top_destination();this.top_destination.addReceiver(hcom.common.modules.top_destination.DESTINATION_SELECTED_EVENT,$.proxy(this.onTopDestinationSelected,this));this.top_destination.loadTopDestinations()}if(!$("#disambiguation").length){this.$popDivContainer=$('<div id="disambiguation"></div>');this.$popDivContainer.addClass("hidden");$.appendBody(this.$popDivContainer)}else{this.$popDivContainer=$("#disambiguation")}};A.prototype={setUpdating:function(){this.$searchButton.addClass("cta-processing")},setNotUpdating:function(){this.$searchButton.removeClass("cta-processing")},setOpinionLabFunction:function(C){O_LC();return false},close:function(){this.$popDivContainer.hide();hcom.common.modules.glasspane.hide();this.$popDivContainer.empty()},rowSelectedCallback:function(C){this.providedASA=true},clearHiddenFields:function(){$.each(["searchParams.resolvedLocation","destinationId","destinationName","asaReport"],$.proxy(function(C,D){$("input[name='"+D+"']",this.$form).remove()},this))},onDestinationInputChangeCallback:function(){this.providedASA=false;this.destinationInputChanged=true;if(typeof hcom.common.top_destination_suggest!=="undefined"){this.clearHiddenFields()}},checkAndInjectInputFields:function(){$.each(["searchParams.resolvedLocation","destinationName","destinationId","asaReport"],$.proxy(function(C,D){var E=$("input[name='"+D+"']",this.$form);if(!E.length){this.$form.append($("<input type='hidden' />").attr("name",D).attr("id",D))}},this))},onTopDestinationSelected:function(C){var E="CITY:"+C.id+":EXACT_RED:MEDIUM",D=C.name.loc_name;this.checkAndInjectInputFields();$("input[name='searchParams.resolvedLocation']",this.$form).val(E);$("input[name='destinationId']",this.$form).val(C.id);$("input[name='destinationName']",this.$form).val(D);$("input[name='destination']",this.$form).val(D);$('input[name="asaReport"]',this.$form).val("HomePage::TopDestinations");this.unique=true;this.providedASA=true},registerAutoSuggest:function(D){var C={rowSelectedSupplementary:$.proxy(this.rowSelectedCallback,this),onDestinationInputChange:$.proxy(this.onDestinationInputChangeCallback,this)};hcom.gadgets.queryform.modules.autosuggest.loadAutoSuggest(this.config.destinationFieldName,false,C,D)},switchSubmitButton:function(C){if(C){this.$searchButton.removeAttr("disabled")}else{this.$searchButton.attr("disabled","disabled")}},siteCatalystDisambiguationLoadedReport:function(F,C,E){var D={};D.pageName="disambiguation page: popdiv";D.channel="disambiguation page";D.prop3=this.$destination.val();D.eVar2=this.$destination.val();hcom.common.modules.sitecatalyst.sendFullReport(D)},handleFormSubmitOrRedirect:function(I,U){var S=$(this.elong,U).val(),W=I.text()==="true",e,h,R,C=$("input[name='searchParams.resolvedLocation']",U),K,G,d,F=false,j=false,X=false,H,i,N,a,M,O,L,E,g,J,k,Q,b,f=true,P=null,Z="|||",D="",Y="",T,V;if(C.length){if(C.length>1){K=$("input[name='searchParams.resolvedLocation']:checked",U);f=false}else{K=C}if(this.resolution_parameters.useSrsData){H=$("[name='searchParams.landmark']",this.$form);i=$("[name='hotelId']",this.$form);N=$("input[name='destinationId']",this.$form);a=$("input[name='searchParams.sortOrder']",this.$form);H=H.length?H:$("<input type='hidden' name='searchParams.landmark' id='landmarkId' value='' />").appendTo(this.$form);i=i.length?i:$("<input type='hidden' name='hotelId' id='hotelId' value='' />").appendTo(this.$form);N=N.length?N:$("<input type='hidden' name='destinationId' id='destinationId' value='' />").appendTo(this.$form);G=K.parent();e=$("span.srsType",G).text();h=$("span.redirectPage",G).text();R=$("span.landmarkCityDestinationId",G).text();d=K.val().split(":")[1];if(d.length){N.val(d)}if(R.length){a=a.length?a:$("<input type='hidden' name='searchParams.sortOrder' value='' />").appendTo(this.$form);a.val("DISTANCE");N.val(R);H.val(d);M=K.val().split(":");M[1]=R;M=M.join(":");$("input[name='searchParams.resolvedLocation']",this.$form).val(M)}if(e){switch(e){case"HOTEL":F=true;break;case"COUNTRY":j=true;X=this.resolution_parameters.countryAction;break;case"REGION":j=true;X=this.resolution_parameters.regionAction;break;case"STATE":j=true;X=this.resolution_parameters.stateAction;break;case"CONTINENT":j=true;X=this.resolution_parameters.continentAction;break}if(F){this.$form.attr("action",this.resolution_parameters.hotelAction);this.$form.attr("method","get");i.val(d);O=$('[name="rooms"]',this.$form);L=$("[name='roomno']",this.$form);if(O.length){O.attr("name","rooms_")}else{O=$("[name='numberOfRooms']",this.$form)}E=O.val();L=L.length?L:$("<input type='hidden' name='roomno' value='' />").appendTo(this.$form);L.val(E);if(E.length&&E){for(Q=0;Q<E;Q++){g=$("[name='searchParams.rooms["+Q+"].numberOfAdults']",this.$form);J=$("[name='children["+Q+"]']",this.$form);if(g.length){g=g.attr("name","rooms["+Q+"].numberOfAdults")}if(J.length){for(b=0;b<J.val();b++){k=$("[name='searchParams.rooms["+Q+"].childrenAges["+b+"]']");if(k!==undefined){k=k.attr("name","rooms["+Q+"].childrenAges["+b+"]")}}}}}}if(j){X=X.replace(/([^\{]*)(\{.*\})([^\}]*)/g,"$1"+d+"$3");this.$form.attr("action",X);this.$form.attr("method","get")}}P=$("input[name='disambiguationAnalytics']",U).val();Z=P?P:Z;D=(C.index(K)!==-1)?(C.index(K)+1):D;Y=C.length?C.length:Y;V=(f)?"AutoR":"Disam";if(this.searchCookiePopulated===true){V="Cookie"}T="HomePage|"+V+"|"+e+"|"+this.$destination.val()+"|"+Z+"|"+D+"|"+Y+"|";if(e!=="GEO_LOCATION"){T+=d}$("<input type='hidden' name='srsReport' id='srsReport' value='"+T+"' />").appendTo(this.$form)}}if(this.domesticEnabled&&S!==undefined&&(this.$domestic.is(":checked")||(this.$international.is(":checked")&&W))){hcom.common.modules.sitecatalyst.sendPartialReport({eVar17:"redirect-to-eLong:SearchedForPRCDest"},"None",s.pageName);setTimeout(function(){window.location=S},1000)}else{this.switchSubmitButton(true);this.$form.trigger("submit")}},registerDisambiguationEvents:function(){var C=$("input[name='searchParams.resolvedLocation']",this.$popDivContainer),D=$("button#btn_disambiguation_submit",this.$popDivContainer);$("#disamb_mailto_or_oo",this.$popDivContainer).filter("[showoo]").on("click",this.setOpinionLabFunction);$("#btn_disamb_back,.close",this.$popDivContainer).on("click",$.proxy(function(E){E.preventDefault();this.setNotUpdating();this.close()},this));C.on("click",$.proxy(function(){var E=$("input[name='searchParams.resolvedLocation']:checked",this.$popDivContainer);if(D.hasClass("cta-disabled")&&E){D.removeAttr("disabled");D.removeClass("cta-disabled")}},this));if(!this.config.interstitial){D.on("click",$.proxy(function(F){this.setUpdating();F.preventDefault();var G=$("input[name='searchParams.resolvedLocation']:checked",this.$popDivContainer),E=G.next();$("input[name='searchParams.resolvedLocation']",this.$form).val(G.val());$("input[name='destinationName']",this.$form).val(E.text());this.unique=true;this.handleFormSubmitOrRedirect(E.next(),this.$popDivContainer);this.close()},this))}},ajaxSuccess:function(C,I,H){var E=$(C),G=$("input[name='searchParams.resolvedLocation']",E),D=$("input[name='searchParams.resolvedEntities']",E),F=G.next().next();if(D.length===1){window.location.href=D[0].value}else{if(G.length===1){$("input[name='searchParams.resolvedLocation']",this.$form).val(G.val());this.unique=true;this.handleFormSubmitOrRedirect(F,E);this.close()}else{if(G.length===0){$("input[name='searchParams.resolvedLocation']",this.$form).remove()}this.siteCatalystDisambiguationLoadedReport(G,D,E);this.setNotUpdating();$(C).appendTo(this.$popDivContainer);hcom.common.modules.glasspane.show();this.$popDivContainer.show();this.switchSubmitButton(true);this.registerDisambiguationEvents()}}},ajaxError:function(D,E,C){this.switchSubmitButton(true);this.setNotUpdating();this.$form.off("submit");this.$form.trigger("submit")},attachOnSubmitEvent:function(){var D,C;if(!this.config.interstitial){this.$form.on("submit",$.proxy(function(G){var S,L=this.$destination.val(),P=true,U=$("input[name='destinationId']",this.$form),I=$("input[name='destination']",this.$form),N=$("input[name='searchParams.arrivalDate']",this.$form),T=$("input[name='searchParams.departureDate']",this.$form),H=null,R,J,M={},O,E,F,Q=$.cookie("homepage_search_data"),K=Q?Q.split("//"):false;D=$('[name="rooms"]',this.$form);C=D.val();this.setUpdating();if(!this.domesticEnabled&&this.providedASA){P=false}if(L&&L.length&&this.destinationInputChanged===false&&(K&&K[5].length)){this.searchCookiePopulated=true}if(U.length===1&&I.length===1&&U.val()){P=false}if(D.length&&C==="9"){P=false}if(!this.unique&&P){G.preventDefault();if(D.length&&C){for(E=0;E<C;E++){H=$("[name='searchParams.rooms["+E+"].numberOfAdults']",this.$form).val();R=$("[name='children["+E+"]']",this.$form).val();if(H&&H.length&&H.length>0){M["rooms["+E+"].numberOfAdults"]=H;for(O=0;O<R;O++){J=$("[name='searchParams.rooms["+E+"].childrenAges["+O+"]']").val();if(J!==undefined){M["rooms["+E+"].childrenAges["+O+"]"]=J}}}}}S=$("<input type='hidden' name='searchParams.resolvedLocation' value='' />");if(!this.$destination.length){this.$destination=this.$form.find("input#deals_search")}this.switchSubmitButton(false);if($("input[name='searchParams.resolvedLocation']",this.$form).length===0){this.$form.append(S)}else{S=$("input[name='searchParams.resolvedLocation']",this.$form)}S.val("");F={text:this.$destination.val(),arrivalDate:N.val(),departureDate:T.val()};$.extend(F,M);$.ajax({type:"GET",url:"/homepage/resolve_destination.html",data:F,success:$.proxy(this.ajaxSuccess,this),error:$.proxy(this.ajaxError,this)});return false}else{return true}},this))}},domesticClickEvent:function(){var C="http://travel.elong.com/hotels/Default.aspx?Campaign_ID=130303968";this.$domestic.on("click",$.proxy(function(D){if(this.$domestic.is(":checked")){this.setUpdating();this.$searchButton.attr("disabled","disabled");this.$searchButton.addClass("cta-disabled");hcom.common.modules.sitecatalyst.sendPartialReport({eVar17:"redirect-to-eLong:SearchedForPRCDest"},"None",s.pageName);setTimeout(function(){window.location=C},300)}},this))}};A.DEFAULTS={destinationSelector:"#txt_destination",destinationFieldName:"txt_destination",formSelector:".C_mstep_query_module #searchForm",domesticSelector:"#radio_domestic",internationalSelector:"#radio_international",buttonSelector:"#btn_search_submit",interstitial:false};A.loadSearch=function(C){return new A(C)};return A}});$.registerModule({name:"hcom.gadgets.queryform.modules.queryform",dependencies:["hcom.gadgets.queryform.modules.autosuggest","hcom.gadgets.queryform.modules.basicinput","hcom.gadgets.queryform.modules.search"],impl:function(A){return{init:function(){var C={formSelector:"#queryModuleOverlay form#searchForm_int",buttonSelector:"#btn_search_submit_int",arrivalSelector:"#txt_arrival_int",departureSelector:"#txt_departure_int",roomSelector:"#sct_rooms_int",flexibleSelector:"#flexible_chk_int",arrivalDaySelector:"#arrivalDay_int",departureDaySelector:"#departureDay_int",arrivalIconSelector:"#arrivalIcon_int",arrivalOneBrandIconSelector:"#arrivalOneBrandIcon_int",departureIconSelector:"#departureIcon_int",departureOneBrandIconSelector:"#departureOneBrandIcon_int",nightsSelector:"#nights_int",suffix:"_int",interstitial:true},B={};if($("#txt_destination_404").length){B.destinationSelector="#txt_destination_404"}hcom.gadgets.queryform.modules.basicinput.loadBasicInput(B);hcom.gadgets.queryform.modules.search.loadSearch(B);if($(C.formSelector).length){hcom.gadgets.queryform.modules.basicinput.loadBasicInput(C);hcom.gadgets.queryform.modules.search.loadSearch(C)}}}}});$.registerModule({name:"hcom.homepage.modules.flashteasers",dependencies:[],impl:function(A){function B(){if(hcom.page_widgets.flashteasers!==undefined){var C=hcom.page_widgets.flashteasers;$.each(C.values,function(E,G){var H=$("#"+G.id),F=G.width,I=G.height,D=H.parent().width();H.attr("width",D);H.attr("height",(I*D/F))})}}return{init:function(){if(hcom.page_widgets&&hcom.page_widgets.flashteasers!==undefined){var C=hcom.page_widgets.flashteasers,D=$(".flashcontainer").parent();$.each(C.values,function(E,F){var G=$("#"+C.common.id_prefix+F.id,D);G.flash({attrs:{id:F.id},flashvars:F.flashvars,swf:F.swf,width:F.width,height:F.height,wmode:F.wmode});$.win.on("resize",B);B()})}}}}});$.registerModule({name:"hcom.homepage.modules.teaser_carousel",dependencies:[],impl:function(C){function G(H,J,I){var K=I.find("ul li");$("ul.active",I).height($("ul.active li.current",I).height());H.removeClass("current");J.addClass("current");H.stop(true,true).fadeOut("slow");J.stop(true,true).fadeIn("slow");$("ul.active",I).height("100%")}function B(K,H){var J=0,I=H.find("li").size(),L=H.find("ul li").index($("li.current",H));if(K==="prev"){J=((L+I-1)%I)}else{J=((L+1)%I)}return J}function F(K,J){var H,I,L;L=B(K,J);H=$("li.current",J);I=$("li:eq("+L+")",J);G(H,I,J);$(".paginator.active",J).removeClass("active");$(".paginator:eq("+L+")",J).addClass("active")}function A(I){var H=setInterval(function(){if(!$.data(I,"carousel.hovered")){F("next",I)}},4000);$.data(I,"carousel.interval",H)}function D(I){var H=$.data(I,"carousel.interval");if(H){clearInterval(H);A(I)}}function E(I){var J=$(".controls .paginator",I),H;$("ul:first",I).addClass("active");$("ul.active li:first",I).addClass("current");H=$("ul.active li",I);H.addClass("lastRow");H.not("li.current").hide();H.removeClass("js_hidden");A(I);$(".content",I).hover(function(){$.data(I,"carousel.hovered",true)},function(){$.data(I,"carousel.hovered",false);D(I)});J.on("click",function(){var L=$(this),K=J.index(L),M,N;if(!L.hasClass("active")){M=$("li.current",I);N=$("li:eq("+K+")",I);G(M,N,I);J.filter(".active").removeClass("active");L.addClass("active")}});$(".controls .prev",I).on("click",function(){if(hcom.locale.direction==="RTL"){F("next",I)}else{F("prev",I)}});$(".controls .next",I).on("click",function(){if(hcom.locale.direction==="RTL"){F("prev",I)}else{F("next",I)}});if($.browser.msie&&$.browser.version<7){$(".controls .prev",I).hover(function(){$(this).addClass("prev_hovered")},function(){$(this).removeClass("prev_hovered")});$(".controls .next",I).hover(function(){$(this).addClass("next_hovered")},function(){$(this).removeClass("next_hovered")})}}return{init:function(){$(".teaser_carousel").each(function(){var H=$(this);if($("ul li",H).length>1){E(H)}})}}}});$.registerModule({name:"hcom.homepage.pages.home",dependencies:["hcom.common.pages.common","hcom.common.modules.calendar_dp","hcom.common.modules.listener","hcom.common.modules.popdiv","hcom.common.modules.searchpopdiv","hcom.common.modules.hotelimagepopdiv","hcom.common.modules.seo_footer","hcom.landing.modules.hotelimagepopdiv","hcom.homepage.ammap","hcom.gadgets.queryform.modules.queryform","hcom.homepage.modules.flashteasers","hcom.homepage.modules.teaser_carousel","hcom.homepage.modules.recent_viewed_carousel","hcom.homepage.modules.custom_dropdown","hcom.homepage.modules.top_destinations","hcom.gadgets.modules.hotel_comparison_dockingbar.common","hcom.gadgets.modules.ipad_overlay"],impl:function(A){function C(){if(hcom.landing.data&&hcom.landing.data.popdiv){return new hcom.landing.modules.hotelimagepopdiv({$container:$("#imagePopDiv"),clickFilter:"a.hotelDetailsPhoto",store:new hcom.common.modules.hotelimagepopdiv.JSONStore({data:hcom.landing.data.popdiv})})}}function B(){return new hcom.homepage.modules.recent_viewed_carousel()}return{init:function(){C();B()}}}});$.registerModule({name:"hcom.landing.modules.autosuggest",dependencies:["hcom.common.modules.autosuggest"],impl:function(){function A(){var B={inputControlId:"search_destination",i18nMessages:hcom.locale.autosuggest.i18nMessages,minCharLength:hcom.locale.autosuggest.activationCharLength,itemsNrPerCategory:5,urlBase:hcom.locale.autosuggest.asURL,lang:hcom.locale.language,hotelAction:"/hotel/details.html",sendDataTo_Search_Do:true,pageName:"Landing",focusInputField:false,selectSearchForm:function(){var C=$("#landing_rd_search_form");return C.length>0?C:$("#searchForm")}};if($("#"+B.inputControlId).length){console.debug("Parameters has been set up for landing pages");console.debug("Instantiating the Autosuggest...");hcom.common.modules.autosuggest[B.inputControlId]=new hcom.common.modules.autosuggest.AutoSuggest(B);console.debug("Instantiated the autosuggest for landing pages")}}return{init:function(){A()}}}});$.registerModule({name:"hcom.homepage.modules.top_destinations",impl:function(A){function B(C){var D=C.target,E;if(D.tagName.toLowerCase()==="h3"){E=$(D)}else{if(D.parentNode.tagName.toLowerCase()==="h3"){E=$(D.parentNode)}else{if(D.parentNode.parentNode.tagName.toLowerCase()==="h3"){E=$(D.parentNode.parentNode)}}}if(E){E.parent().toggleClass("opened")}}return{init:function(){$("div.page_widget_top_destinations").on("click",B)}}}});$.registerModule({name:"hcom.homepage.ammap",dependencies:["hcom.common.modules.sitecatalyst"],impl:function(U){var P,d,C,I=true,M=true,Y=false,b,Q,a,W,N,H,O,c,S,X,B,E,D,L,K,R,T,J;function G(){var f=$(P),g=f.attr("width"),h=f.attr("height"),e=f.parent().width();f.attr("width",e);f.attr("height",(h*e/g))}function V(f,g,e){if(f&&d){b=d.country_has_states;T=d.overlayLinks;J=d.directLinks;a=d.top_level;S=[a];X=[d.labels.world];c=d.labels.back;W=a;C=$.format(d.data_file,d.initial_region!==""?d.initial_region:"World");P=f.flash({swf:d.swf,attrs:{id:g},flashvars:{path:d.path,settings_file:d.settings_file,data_file:C},width:d.width,height:d.height,wmode:d.wmode}).children()[0];if(e===true){$.win.on("resize",G);G()}}}function F(e){if(window.ActiveXObject&&window.GetObject){var f=new ActiveXObject("Microsoft.XMLDOM");f.loadXML(e);return f}if(window.DOMParser){return new DOMParser().parseFromString(e,"text/xml")}}var Z={lastReported:"",init:function(){},sendReport:function(f,g){var e;if(f!==this.lastReported){this.lastReported=f;if(g===undefined){g="HomepageFlashMap"}e={eVar33:g+"|"+f,prop33:g+"|"+f};hcom.common.modules.sitecatalyst.sendPartialReport(e,"event28","click event in the flashmap")}}};var A={init:function(e){if(e!==W){W=e;A.externalInterface.rebindMap(e)}},getState:function(){return[H,W,a,b.join(","),Q.join(",")].join(";")},bindMouseEvents:function(e,f){e.on("mouseenter",function(){if(f){A.externalInterface.setHoverColor(f)}});e.on("mouseleave",function(){if(f){A.externalInterface.resetColor(f)}});e.on("click",A.clicker)},handleOverlays:function(e){A.breadcrumb.hideOverlayLinks();if(T[W]){$.each(T[W],function(h,f){var g=e.find("area[oid='"+h+"']"),i=(f.back?c:(f.title||g.attr("title")));A.breadcrumb.showOverlayLinks(h,i,f,e)})}},getAnchor:function(g,f){if($.inArray(g,J)!==-1){var e=f.find("area[oid='"+g+"']");return'href="'+e.attr("landing")+'" class="clickreport" rel="'+e.attr("landingReport")+'"'}else{return"href=\"javascript:hcom.homepage.ammap.clickObject('"+g+"')\""}},putLink:function(f,j,h,i,g,e){f.html("<a "+A.getAnchor(j,h)+">"+i+"</a><span>"+g+"</span>");f.appendTo("ul.target",e)},showAreas:function(g){var f=K.find("ul.target"),h=$(g),l=h.find("area");f.empty();Q=[];if(M&&d.initial_country===""&&d.initial_region!==""){H=a;W=d.initial_region}N=h.find("area[oid='"+W+"']").attr("title");O=h.find("area[oid='"+H+"']").attr("title");if(!M||d.initial_country===""){if(W===a){l.each(function(){var o=$(this),n=o.attr("oid"),q=o.attr("title"),p,m=o.attr("region");if(n!==""){Q.push(n);p=$("<li></li>");A.putLink(p,n,h,q,m,K);K.find("ul.target li").addClass("region");A.bindMouseEvents(p.find("a"),n)}})}else{if((!H||H===a)||(jQuery.inArray(W,b)!==-1)){l.each(function(){var n=$(this),m=n.attr("oid"),p=n.attr("title"),o;if((n.attr("value")==="20")&&(n.attr("preferred")==="true")){Q.push(m);o=$("<li></li>");A.putLink(o,m,h,p,p,K);K.find("ul.target li").addClass("country");A.bindMouseEvents(o.find("a"),m)}})}else{var e=l.filter("[oid='"+W+"']"),j=e.attr("oid"),k=e.attr("title"),i=e.find("movie");i.each(function(){var q=$(this),n=q.attr("landing"),m=q.attr("landingReport"),o=q.attr("title"),p,r;Q.push(q.attr("oid"));r=$("<li></li>");r.html('<a class="clickreport" href="'+n+'" rel="'+m+'">'+o+"</a><span></span>").appendTo("ul.target",K);r.addClass("city");p=r.find("a");p.on("mouseenter",function(){var t=q.attr("oid");if(t){A.externalInterface.setCityHoverColor(t);A.externalInterface.swapMovieDepth(t)}});p.on("mouseleave",function(){var t=q.attr("oid");if(t){A.externalInterface.resetCityColor(t);A.externalInterface.restoreMovieDepth(t)}})})}}A.breadcrumb.addBreadcrumb(W,H,N,h);if(W===a){K.find("#breadcrumb").css("display","none")}else{K.find("#breadcrumb").css("display","block")}f.find("li:last-child").addClass("last");A.handleOverlays(h);Y=true}else{S.push(W);X.push(N)}},clicker:function(e){$(this).off("mouseenter").off("mouseleave")},breadcrumb:{addBreadcrumb:function(j,i,e,h){K.find("#breadcrumb").empty();if($(".map_see_all").length>0){$(".map_see_all").remove()}var f=S.length,g=$.inArray(j,S);if(g!==-1){S.splice(g+1,f);X.splice(g+1,f)}else{if(((f===3)&&($.inArray(S[2],b)===-1))||(f>=3)&&$.inArray(S[2],b)!==-1&&(i==="americas")){S.splice(2,3);X.splice(2,3)}else{if((f>=4)&&($.inArray(S[2],b)!==-1)){S.splice(3,4);X.splice(3,4)}}S.push(j);X.push(e)}A.breadcrumb.rewriteBreadcrumb(h);A.breadcrumb.showLinks(j,e)},rewriteBreadcrumb:function(f){if((S.length>=3)&&($.inArray(H,b)===-1)){S[1]=H;X[1]=O}for(var e=0;e<S.length-1;e++){$("<li></li>").html("<a "+A.getAnchor(S[e],f)+">"+X[e]+'</a><div class="icon_sprite_delimiter"><div></div></div>').appendTo("#breadcrumb",K)}$("<li></li>").html("<strong>"+X[X.length-1]+"</strong>").appendTo("#breadcrumb",K)},showLinks:function(k,j){var e="",g="";if(((S.length===3)&&($.inArray(S[2],b)===-1))||(S.length===4&&($.inArray(S[2],b)!==-1))){e=d.labels.see_all_city;g="city"}else{if((S.length===3)&&($.inArray(S[2],b)!==-1)){e=d.labels.see_all_state;g="state"}else{if(S.length===2){e=d.labels.see_all_country;g="country"}}}var i=$(R).find("area[oid='"+k+"']"),f=i.attr("landing"),h=i.attr("landingReport");if(f){$("div.map_landing").after('<div class="map_see_all"><a id="map_see_all_'+g+'" class="clickreport" href="'+f+'" rel="'+h+'"><span>'+e.replace("{0}",j)+'</span><span class="icon_sprite icon_sprite_go"></span></a></div>')}},showOverlayLinks:function(h,i,g,e){var f='<div class="flashlink_overlay '+g.css+'"><a '+A.getAnchor(h,e)+">";if(g.arrow==="left"){f+='<span class="icon_sprite icon_sprite_go"></span>'}f+="<span>"+i+"</span>";if(g.arrow==="right"){f+='<span class="icon_sprite icon_sprite_go"></span>'}f+="</a></div>";$("div.flashmap").append(f)},hideOverlayLinks:function(e){if(e!==undefined){$(".flashlink_overlay."+e).remove()}else{$.each(T,function(g,f){$.each(f,function(i,h){$(".flashlink_overlay."+h.css).remove()})})}}},externalInterface:{rebindMap:function(g){var f;if(W===a){f="World"}else{if(H===a||!H||(jQuery.inArray(W,b)!==-1)){f=W}else{f=H}}var e=$.format(d.data_file,f);if(e===C){P.getData();A.showAreas(R)}else{P.reloadData(e)}C=e},amRegisterClick:function(f,i,k,h,e,l,j,g){L=i;if(h){A.externalInterface.resetColor(L)}B=j;E=e;D=l;H=g},swapMovieDepth:function(e){P.swapMovieDepth(e)},restoreMovieDepth:function(e){P.restoreMovieDepth(e)},clickObject:function(e){if(Y){Z.sendReport(e,"HomepageFlashMapBreadCrumb")}P.clickObject(e)},setHoverColor:function(e){P.setColor(e,d.colors.area_color_hover)},setCityHoverColor:function(e){P.setColor(e,d.colors.movie_hover_color)},resetCityColor:function(e){P.setColor(e,d.colors.movie_color)},resetColor:function(e){P.setColor(e,d.colors.area_color_solid)},setSelectedColor:function(e){P.setColor(e,d.colors.area_color_selected)},setZoom:function(f,e,g){B=f+"%";E=e;D=g;P.setZoom(B,E,D,true)},amMapCompleted:function(e){P.getData()},amProcessCompleted:function(e,f){if(f==="reloadData"){P.getData();A.showAreas(R);A.externalInterface.clickObject(W)}else{if(M&&d.initial_country!==""){A.externalInterface.clickObject(d.initial_country)}M=false}},amReturnData:function(f,e){var g=e;R=F(g);if(I){A.showAreas(R);I=false}}}};return{init:function(){if(hcom.page_widgets){d=hcom.page_widgets.mapdata;K=$(".map_landing");V($("#map_content"),"flashmap_object",true)}},handleSelection:function(e){if(Y){Z.sendReport(e,"HomepageFlashMap")}A.init(e)},rebindMap:A.externalInterface.rebindMap,amRegisterClick:A.externalInterface.amRegisterClick,swapMovieDepth:A.externalInterface.clickObject,restoreMovieDepth:A.externalInterface.restoreMovieDepth,clickObject:A.externalInterface.clickObject,setHoverColor:A.externalInterface.setHoverColor,setCityHoverColor:A.externalInterface.setCityHoverColor,resetCityColor:A.externalInterface.resetCityColor,resetColor:A.externalInterface.resetColor,setSelectedColor:A.externalInterface.setSelectedColor,setZoom:A.externalInterface.setZoom,amMapCompleted:A.externalInterface.amMapCompleted,amProcessCompleted:A.externalInterface.amProcessCompleted,amReturnData:A.externalInterface.amReturnData,getState:A.getState}}});$.registerModule({name:"hcom.homepage.modules.date_dropdown",extendsModule:"hcom.common.modules.emitter",impl:function(D){var C,B=new $.formatter();C=function(E){C.superclass.constructor.call(this);this.addEvents(C.EVENTS.DAY_SELECTED,C.EVENTS.YEAR_MONTH_SELECTED);this.config=$.extend({},C.DEFAULTS,E);this.onDayChangedPrx_=$.proxy(this.onDayChanged_,this);this.onYearMonthChangedPrx_=$.proxy(this.onYearMonthChanged_,this);this.onDateInputChangedPrx_=$.proxy(this.onDateInputChanged_,this);this.build_();this.bind_();setTimeout($.proxy(function(){this.onDateInputChangedPrx_();if($.browser.msie&&$.browser.version<8){this.$dayControl.add(this.$yearMonthControl).hide().show()}},this),1)};C.prototype={build_:function(){this.$form=$(this.config.formSelector);this.$dateInput=$(this.config.dateInputSelector,this.$form);this.$dayControl=$(B.format(this.config.daySelectorTemplate,this.config.prefix),this.$form);this.$yearMonthControl=$(B.format(this.config.yearMonthSelectorTemplate,this.config.prefix),this.$form);this.populateYearMonthControl_();this.populateDayControl_();$("#arrivalDay,#departureDay").hide()},bind_:function(){this.$dayControl.on("change",this.onDayChangedPrx_);this.$yearMonthControl.on("change",this.onYearMonthChangedPrx_);this.$dateInput.on("change",this.onDateInputChangedPrx_)},onDayChanged_:function(E){this.updateDateInput_();if(this.$dayControl.val()==="-1"){this.$yearMonthControl.val("-1")}this.sendEvent_(C.EVENTS.DAY_SELECTED)},onYearMonthChanged_:function(E){this.updateValidDaysForMonth_();this.updateDateInput_();if(this.$yearMonthControl.val()==="-1"){this.$dayControl.val("-1")}this.sendEvent_(C.EVENTS.YEAR_MONTH_SELECTED)},onDateInputChanged_:function(E){var G=this.$dateInput.val(),F;if(G){F=Date.parsePOSLocaleDate(G);this.setDate(F);this.updateValidDaysForMonth_();this.setDate(F)}},updateValidDaysForMonth_:function(){var F=new Date(),I,J,G,H,L,E,K;I=this.getYear();J=this.getMonth();E=F.getDate()+(this.config.isArrival?0:1);if(I&&(!this.lastSelected||this.lastSelected.year!==I||this.lastSelected.month!==J)){L=this.$dayControl.val();H=this.populateDayControl_();if(F.getFullYear()===I&&F.getMonth()===J){for(G=1;G<E;G++){this.$dayControl.find("option[value="+G+"]").remove()}}this.$dayControl.val(L);if(L!=="-1"&&this.$dayControl.val()==="-1"){K=parseInt(L,10);if(H<K){this.$dayControl.val(H)}else{this.$dayControl.val(E)}}}else{if(!I){this.populateDayControl_()}}this.lastSelected={year:I,month:J}},updateDateInput_:function(){var E=this.getDate(),F=$.datepicker.getInst(this.$dateInput[0]);if(E){this.$dateInput.val(Date.toPOSLocaleDate(E));$.datepicker.setDateFromField(F);$.datepicker.updateOtherPicker(F,$.datepicker.daylightSavingAdjust(new Date(F.currentYear,F.currentMonth,F.currentDay)),true);this.$dateInput.change();this.updateFromDateFields_()}else{this.$dateInput.val("");$.datepicker.setDateFromField(F);this.$dateInput.change()}},updateFromDateFields_:function(){if(this.otherDDD){this.otherDDD.$dateInput.change()}},getMaxDayforCurrentMonth:function(){var F=this.$yearMonthControl.val(),H,J,E=new Date(),I,G;if(F&&F!=="-1"){H=F.split("_");G=32-new Date(H[0],H[1],32).getDate();I=new Date(H[0],H[1],G);E.setDate(E.getDate()+this.config.maxDays+(this.config.isArrival?-1:0));if(E.getFullYear()===I.getFullYear()&&E.getMonth()===I.getMonth()){return E.getDate()}return G}return 31},getMonths_:function(){var F=[],G,H,I,E;G=new Date();E=new Date();E.setDate(E.getDate()+this.config.maxDays+(this.config.isArrival?-1:0));finished:for(H=G.getFullYear();H<=E.getFullYear();H++){for(I=(H===G.getFullYear()?G.getMonth():0);I<12;I++){if(H!==E.getFullYear()||I<=E.getMonth()){F.push({value:H+"_"+I,year:H,month:hcom.locale.dateFormatSymbols.shortMonths[I],monthNumber:I+1})}else{break finished}}}return F},populateDayControl_:function(){var I,H=this.getMaxDayforCurrentMonth(),J=this.getYear(),L=this.getMonth(),E="",K="",G;var F=B.format("search.mstep.dates.day");this.$dayControl.empty();this.$dayControl.append(B.format(this.config.optionTemplate,-1,F));for(I=1;I<=H;I++){if(L!==null&&J!==null){G=new Date(J,L,I);K=hcom.locale.dateFormatSymbols.shortWeekdays[G.getDay()];E=hcom.locale.dateFormatSymbols.weekDays[G.getDay()]}this.$dayControl.append(B.format(this.config.optionTemplate,I,B.format(this.config.dayLabelTemplate,I,F,K,E)))}return H},populateYearMonthControl_:function(){var E=this.getMonths_(),F;var G=B.format("search.mstep.dates.month");this.$yearMonthControl.empty();this.$yearMonthControl.append(B.format(this.config.optionTemplate,-1,G));for(F=0;F<E.length;F++){this.$yearMonthControl.append(B.format(this.config.optionTemplate,E[F].value,B.format(this.config.yearMonthLabelTemplate,E[F].year,E[F].month,E[F].monthNumber,hcom.locale.yearUnit,G)))}},getDay:function(){var E=this.$dayControl.val();if(E&&E!=="-1"){return parseInt(E,10)}return null},getMonth:function(){var E=this.$yearMonthControl.val();if(E&&E!=="-1"){return parseInt(E.split("_")[1],10)}return null},getYear:function(){var E=this.$yearMonthControl.val();if(E&&E!=="-1"){return parseInt(E.split("_")[0],10)}return null},getDate:function(){var E=this.getDay(),H=this.getMonth(),G=this.getYear(),F;if(E!==null&&H!==null&&G!==null){F=new Date();F.setUTCFullYear(G,H,E);return F}return null},setDate:function(F){var E=F.getDate(),H=F.getMonth(),G=F.getFullYear();this.$dayControl.val(E);this.$yearMonthControl.val(G+"_"+H)},sendEvent_:function(E){var F={day:this.getDay(),month:this.getMonth(),year:this.getYear()};this.emitEvent(E,F)},setOtherDateDropDown:function(E){this.otherDDD=E}};function A(){var F=hcom.configuration.DEFAULT_DATE_FORMAT.indexOf("MM"),E=hcom.configuration.DEFAULT_DATE_FORMAT.indexOf("yy");if(F===-1){F=hcom.configuration.DEFAULT_DATE_FORMAT.indexOf("M")}return F<E}C.DEFAULTS={formSelector:"#searchForm",isArrival:true,maxDays:parseInt(hcom.configuration.MAX_ADVANCE_DAYS,10),maxStay:28,prefix:"",daySelectorTemplate:"#{0}_day_dropdown",yearMonthSelectorTemplate:"#{0}_year_month_dropdown",optionTemplate:'<option value="{0}">{1}</option>',dayLabelTemplate:hcom.configuration.DROP_DOWN_CALENDAR_DAY_LABEL_TEMPLATE||"{0} {2}",yearMonthLabelTemplate:hcom.configuration.DROP_DOWN_CALENDAR_YEAR_MONTH_LABEL_TEMPLATE||(A()?"{1} {0}":"{0} {1}")};C.EVENTS={DAY_SELECTED:"DateDropdown.DaySelected",YEAR_MONTH_SELECTED:"DateDropdown.YearMonthSelected"};return C}});$.registerModule({name:"hcom.homepage.modules.date_dropdown_handler",dependencies:["hcom.homepage.modules.date_dropdown"],impl:function(A){return{init:function(){var B=hcom.homepage.modules.date_dropdown,D,C;if($("#arrival_day_dropdown").length){D=new B({prefix:"arrival",dateInputSelector:"#txt_arrival"});C=new B({prefix:"departure",dateInputSelector:"#txt_departure",isArrival:false});D.setOtherDateDropDown(C);C.setOtherDateDropDown(D)}}}}});$.registerModule({name:"hcom.homepage.modules.recent_viewed_carousel",dependencies:[],extendsModule:"hcom.common.modules.simple_carousel",impl:function(B){var D,A;function C(E){E.preventDefault();E.stopPropagation();return false}A=function(E){this.config=$.extend({},A.DEFAULTS,E);this.$parent=this.config.$parent;this.$link=$(this.config.compareLinkSelector,this.$parent);if(this.$link.length){this.parameters=this.$link.attr("href").match(/(dd|cd|nr|r)=[^&]*/g)}};A.prototype={setHotelIDs:function(E){this.hotelIds=E;this.update_()},update_:function(){var E=this.config.url+"?hids="+this.hotelIds.join(",");if(!!this.parameters){E+="&"+this.parameters.join("&")}this.$link.attr("href",E);if(this.hotelIds.length<2){this.$link.fadeOut()}}};A.DEFAULTS={compareLinkSelector:"a.compare",url:"/compare/hotel_compare.html"};D=function(E){this.config=$.extend({},D.DEFAULTS,E);this.$widget=$(this.config.widgetSelector).not("."+this.config.initedClassName).first();this.config.$widget=this.$widget;this.$scrollbar=$(".nano",this.$widget);if(!this.config.alwaysDisplayShifters){this.config.alwaysDisplayShifters=this.$widget.hasClass("recent-hotels-horizontal")}D.superclass.constructor.call(this,this.config);this.$widget.addClass(this.config.initedClassName);if(this.$widget.length){this.onRemoveHotelPrx_=$.proxy(this.onRemoveHotel,this);this.onRemoveAllPrx_=$.proxy(this.onRemoveAll,this);this.$removeIcons=$(this.config.removeSelector,this.$widget);this.$removeAll=$(this.config.removeAllSelector,this.$widget);this.$removeIcons.on("click",this.onRemoveHotelPrx_);this.$removeAll.on("click",this.onRemoveAllPrx_);this.compareLink=new A({$parent:this.$widget});this.$removeIcons.show()}};D.prototype={onRemoveHotel:function(G){var F=$(G.target).closest("li"),E=F.attr(this.config.dataKeyForHotelId);$.ajax({url:this.config.removeHotelUrl,data:{ajax:true,type:"RECENT",remove:"hotel",hotelId:E}});if(this.config.socialCarousel){F.closest(".recently-viewed-hotels-container, .hotel").animate({opacity:"0"},500,$.proxy(function(){F.stop(true,true).animate({height:"0px",padding:"0px"},500,$.proxy(function(){var H;this.$removeIcons=$(this.config.removeSelector,this.$widget);F.remove();this.$scrollbar.nanoScroller();H=this.getHotelIDs_();this.compareLink.setHotelIDs(H);if(!H.length){this.dismiss()}},this))},this))}else{F.fadeOut("slow",$.proxy(function(){var H;this.$removeIcons=$(this.config.removeSelector,this.$widget);F.remove();H=this.getHotelIDs_();this.compareLink.setHotelIDs(H);if(!H.length){this.dismiss()}else{this.sliderUpdaterPrx_();if(!this.$nextShifter.hasClass("enabled")&&this.$prevShifter.hasClass("enabled")){this.prev()}}},this))}return C(G)},onRemoveAll:function(E){$.ajax({url:this.config.removeHotelUrl,data:{ajax:true,type:"RECENT",remove:"all"}});this.dismiss();return C(E)},getHotelIDs_:function(){return this.$widget.find("ul").children().map($.proxy(function(E,F){return $(F).attr(this.config.dataKeyForHotelId)},this)).get()},dismiss:function(){this.$widget.fadeOut($.proxy(function(){D.superclass.dismiss.call(this);this.$widget.remove()},this))}};D.DEFAULTS={removeSelector:".icon_sprite_close",removeAllSelector:"a.clear-all",dataKeyForHotelId:"data-key",initedClassName:"inited",widgetSelector:".recent-hotels",removeHotelUrl:"/hotel/delete_details.html"};return D}});$.registerModule({name:"hcom.homepage.modules.custom_dropdown",dependencies:["hcom.common.modules.keyhandling"],impl:function(B){var C,A=[];C=function(D){A.push(this);this.$dropDownContainer=$(D);this.$customDropdown=$(".drop_down_list",this.$dropDownContainer);this.$defaultDropdown=$(".default_drop_down_list",this.$dropDownContainer);this.$popdiv=$(".custom_drop_down_popdiv",this.$dropDownContainer);this.$popdiv_items=$(".item",this.$popdiv);this.$selectedTextContainer=$(".selected_text_container",this.$customDropdown);this.$arrowContainer=$(".drop_down_arrow_container",this.$dropDownContainer);this.$listAndArrowContainer=$(".list_and_arrow_container",this.$dropDownContainer);this.$itemSelector=$(".item_selector",this.$dropDownContainer);this.$submitButton=$("input[type=submit]",this.$dropDownContainer);this.$dropDownForm=$("#custom_dropdown_form",this.$dropDownContainer);this.init()};C.prototype={init:function(){this.expandDropDownListProxy=$.proxy(this.expandDropDownList,this);this.highlightItemProxy=$.proxy(this.highlightItem,this);this.clickOnItemProxy=$.proxy(this.clickOnItem,this);this.closePopupProxy=$.proxy(this.closePopup,this);this.onResizeProxy=$.proxy(this.onResize,this);this.handleFunctionKeysProxy=$.proxy(this.handleFunctionKeys,this);this.onSubmitProxy=$.proxy(this.onSubmit,this);var D=new hcom.common.modules.keyhandling.KeyListener(this.$dropDownContainer,this.handleFunctionKeysProxy,$.noop,"custom_drop-down");this.$customDropdown.removeClass("hidden");this.$arrowContainer.removeClass("hidden");this.$listAndArrowContainer.removeClass("hidden");this.$defaultDropdown.hide();this.$customDropdown.on("click",this.expandDropDownListProxy);this.$arrowContainer.on("click",this.expandDropDownListProxy);this.$submitButton.on("click",this.onSubmitProxy);this.$popdiv.on("mouseover",".item",this.highlightItemProxy);this.$popdiv.on("mouseout",".item",this.highlightItemProxy);this.$popdiv.on("click",".item",this.clickOnItemProxy);this.$selectedTextContainer.text(this.$popdiv_items.eq(0).text());$.win.on("resize",this.onResizeProxy)},positionDropDown:function(){var D=this.$customDropdown.offset(),E=this.$arrowContainer.offset();if(this.$customDropdown.hasClass("expanded")){if(D.left<E.left){this.$popdiv.css("left",D.left).css("top",D.top+28).slideDown("fast").show();this.$popdiv.css("width",((this.$arrowContainer.offset().left+this.$arrowContainer.width()-this.$popdiv.offset().left)-1)+"px")}else{this.$popdiv.css("left",E.left).css("top",D.top+28).slideDown("fast").show();this.$popdiv.css("width",D.left-E.left+this.$customDropdown.width()-1)}}},calculateDropDownWidth:function(){return(this.$arrowContainer.offset().left+this.$arrowContainer.width()-this.$popdiv.offset().left)+"px"},onSubmit:function(D){this.$submitButton.addClass("cta-processing");window.location.href=$("option:selected",this.$itemSelector).attr("urlValue");D.stopPropagation();return false},onResize:function(){this.positionDropDown()},resetHighlight:function(){this.$popdiv_items.removeClass("highlighted")},closePopup:function(){var D=this;this.$popdiv.slideUp("fast",function(){D.$popdiv.hide()});this.$customDropdown.removeClass("expanded").css("z-index","");this.$arrowContainer.removeClass("expanded").css("z-index","")},closeOtherPopups:function(){var D=this;$.each(A,function(E,F){if(F!==D&&F.$customDropdown.hasClass("expanded")){F.closePopup()}})},attachOuterClickEvent:function(){$.body.one("click",this.closePopupProxy)},expandDropDownList:function(F){var E=this,D=this.$customDropdown.offset();if(this.$customDropdown.hasClass("expanded")){this.closePopup()}else{this.closeOtherPopups();this.$customDropdown.addClass("expanded").css("z-index",10);this.$arrowContainer.addClass("expanded").css("z-index",10);this.resetHighlight();this.$popdiv_items.each(function(G,H){if($(H).text()===E.$selectedTextContainer.text()){$(H).addClass("highlighted")}});this.positionDropDown()}this.attachOuterClickEvent();F.stopPropagation()},highlightItem:function(E){var D=$(E.currentTarget);this.resetHighlight();if(D.hasClass("highlighted")){D.removeClass("highlighted")}else{D.addClass("highlighted")}},clickOnItem:function(E){var D=$(E.currentTarget);this.selectItem(D)},selectItem:function(D){this.$selectedTextContainer.text(D.text());if(D.index()!==0){this.$itemSelector.children()[D.index()-1].selected=true;this.$dropDownForm.trigger("submit")}},getActualHighlightedElement:function(){return $(".item.highlighted",this.$popdiv)},highlightByArrow:function(D,E){if(E===hcom.common.modules.keyhandling.FUNCTION_KEYS.UP){$(this.$popdiv_items.get(D-1)).addClass("highlighted")}else{if(this.$popdiv_items.get(D+1)===undefined){$(this.$popdiv_items.get(0)).addClass("highlighted")}else{$(this.$popdiv_items.get(D+1)).addClass("highlighted")}}},selectRowByKey:function(){this.selectItem(this.getActualHighlightedElement());this.closePopup()},highlightByArrowHandler:function(D){var E=this.getActualHighlightedElement();this.highlightByArrow(E.index(),D);E.removeClass("highlighted")},handleFunctionKeys:function(D){var E=D.charCode?D.charCode:D.keyCode?D.keyCode:0;switch(E){case hcom.common.modules.keyhandling.FUNCTION_KEYS.ESC:this.closePopup();return false;case hcom.common.modules.keyhandling.FUNCTION_KEYS.ENTER:this.selectRowByKey();return false;case hcom.common.modules.keyhandling.FUNCTION_KEYS.UP:case hcom.common.modules.keyhandling.FUNCTION_KEYS.DOWN:this.highlightByArrowHandler(E);return false}return true}};return{init:function(){var E=$(".drop_down_container"),D;E.each(function(F,G){D=new C(G)})}}}});$.registerModule({name:"hcom.groups.modules.core",dependencies:["hcom.common.modules.calendar_dp","hcom.common.modules.autosuggest"],impl:function(A){function B(){var C={instanceName:"groupsFormModel_destination",inputControlId:"groups_req_destination",focusInputField:false,formId:"groupsFormModel",i18nMessages:hcom.locale.autosuggest.i18nMessages,minCharLength:hcom.locale.autosuggest.activationCharLength,itemsNrPerCategory:5,urlBase:hcom.locale.autosuggest.asURL,lang:hcom.locale.language,categories:hcom.common.modules.autosuggest.CATEGORY_INDICATOR.CITY};hcom.common.modules.autosuggest[C.inputControlId]=new hcom.common.modules.autosuggest.AutoSuggest(C)}return{init:function(){B();$("input:text:visible:first").trigger("focus")}}}});$.registerModule({name:"hcom.landing.modules.common_for_adv_deals",dependencies:["hcom.common.modules.template","hcom.common.pages.common","hcom.common.modules.calendar_dp","hcom.common.modules.ie6popupplate","hcom.common.modules.slideshow","hcom.common.modules.popdiv","hcom.common.modules.checkavailabilitydialog","hcom.landing.modules.checkavailabilitydialog","hcom.common.modules.searchpopdiv","hcom.common.modules.hotelimagepopdiv","hcom.landing.modules.hotelimagepopdiv","hcom.common.modules.emailtofriend","hcom.landing.modules.socialbookmark","hcom.landing.modules.basicinput","hcom.landing.modules.querymodule","hcom.landing.pages.seo_link_blocks"],impl:function(D){var B;function F(){B=new $.formatter(hcom.landing.data.staticMessages);B.setGlobal()}function E(){if(hcom.landing.data&&hcom.landing.data.popdiv){return new hcom.landing.modules.hotelimagepopdiv({$container:$("#imagePopDiv"),mouseoverFilter:"img.imagePopDivThumb,div.popdiv_prompt_icon",clickFilter:"a.hotelDetailsPhoto",store:new hcom.common.modules.hotelimagepopdiv.JSONStore({data:hcom.landing.data.popdiv})})}}function C(){return new hcom.common.modules.emailtofriend({titlebar:"div.citylanding_titlebar:first",popdiv:"div.citylanding_emailfriend:first",z_index:"4"})}function A(){return new hcom.landing.modules.socialbookmark({titlebar:"div.citylanding_titlebar:first",popdiv:"div.city_landing_social_bookmarks:first",z_index:"4"})}function G(){if($.browser.safari){$("a.favorites").remove()}else{$("a.favorites").on("click",function(H){if(!$.browser.opera){H.preventDefault()}$.bookmark(".icon_sprite_toolbar a.favorites")})}}return{init:function(){F();E();C();A();G()}}}});$.registerModule({name:"hcom.landing.deals.data_manager",dependencies:["hcom.common.modules.glasspane","hcom.common.jquery.bbq.history"],impl:function(Q){var X={xhr_service:null,template_store:null,current_page:1,template:null,hotels_list:"div.deals_hlist",destination_name:"h2.city_country_name",hotels_container:"div.hotels_cntr",promotion_container:"div.destination",loading_overlay:"div.loading_overlay",pagination_container:"div.pagination",paginateBackwards:"a.paginateBackwards",paginateForwards:"a.paginateForwards",pagination_bottom:"div.p_bottom",paginating:false,divider:"span.divider",pageNo:"span.pageNo",pagination_started:false,tandcs:"div.deals_tandc_cntr",loading_msg:"span.loading_msg",loading_text:"",loading_text_error:"",loading_spinner:".ajax_spinner",animating:false,instance:null,initialized:false,xhr_object:null,xhr_processing:false,maxDealNumber:0,cityID:"",uuID:"",attr:{ids:{hotel_anchor:"hotelDetailsLanding_",imagePopDivThumb:"sfThumb"},classes:{sprites_star_rating:"rate_",indicator:"rate_",guest_rating:"sprites_guest_rating"},alt:{imagePopDivThumb:"Hotel Deals in "},rel:{hcomCheckAvailability:null}}},B,W,M,Y=false,V={};V.hotels_list=$(X.hotels_list);V.destination_name=$(X.destination_name,V.hotels_list);V.hotels_container=$(X.hotels_container,V.hotels_list);V.promotion_container=$(X.promotion_container,V.hotels_list);V.pagination_container=$(X.pagination_container);V.back=$(X.paginateBackwards,V.pagination_container);V.next=$(X.paginateForwards,V.pagination_container);V.divider=$(X.divider,V.pagination_container);V.pageNo=$(X.pageNo,V.pagination_container);V.loading_overlay=$(X.loading_overlay);V.loading_msg=$(X.loading_msg,X.loading_overlay);V.loading_spinner=$(X.loading_spinner,X.loading_overlay);V.tandcs=$(X.tandcs);V.pagination_bottom=$(X.pagination_bottom);function N(){return X.xhr_processing}function T(Z){X.xhr_processing=Z}function F(){V.loading_msg.text(X.loading_text).removeClass("error_text");if(!V.loading_spinner.is(":visible")){V.loading_spinner.show()}$.win.scrollTop(0);V.loading_overlay.show()}function H(){V.loading_overlay.hide()}function U(Z){$.each(Z.hotelImages,function(b,c){var a={};a[c.id]=c[c.id];$.extend(hcom.landing.data.popdiv,a)})}function D(){if(X.xhr_object){X.xhr_object.abort();V.loading_msg.text(X.loading_text)}}function E(h,a){V.destination_name=$(X.destination_name);var c=$("span",V.destination_name).text(),g=$("em",".cid_"+c).html(),Z=$(".xhrsender .cid_"+c).attr("href"),e=B.format("sfsearch.pagination.page",a),b,f=$("li",h).length-3;for(var d=f;d--;){$("li:last",h).remove()}if(a>1){b=$('<li><a href=""></a><div class="icon_sprite_delimiter"><div></div></div></li><li><strong></strong></li>');h.append(b);$("strong",b).append(e);$("a",b).append(g);$("a",b).attr("href",Z)}else{b=$("<li><strong></strong></li>");$("li:last",h).html($("li:last",h).text());$("li:last",h).wrapInner('<a href=""/>').append('<div class="icon_sprite_delimiter"><div/></div>');h.append(b);$("strong",b).append(B.format("landing.multicity.destination.breadcrumb.title",g))}}function L(){V.loading_msg.text(X.loading_text_error).addClass("error_text");V.loading_spinner.fadeOut();hcom.common.modules.glasspane.hide()}function C(){hcom.common.modules.glasspane.initStatic().show(true);X.template_store=[];V.hotels_container.empty();V.promotion_container.empty();V.destination_name.show();if(V.hotels_list.hasClass("deals_landing")){V.hotels_list.removeClass("deals_landing").addClass("deals_featured")}if(!V.hotels_list.hasClass("deals_featured")){V.hotels_list.addClass("deals_featured")}F();T(true)}function S(Z){V.promotion_container.html(Z)}function K(b){$("li",".navigation").removeClass("active");var a=$(".cid_"+b);a.closest("li").addClass("active open");var Z=a.parents(".main_cont");Z.removeClass("closed").addClass("open");a.parents("ul").slideDown(500,function(){})}function I(c){var Z=[],b=0;for(var d in c.hotelImages){if(c.hotelImages[d]!==undefined){Z[b++]=c.hotelImages[d]}}if(Z.length<=0){L();return false}U(c);var a=parseInt(window.hcom_landing_deals_navigation_service_data.hotelPaginationSize,10);S(c.promotion_container.content);hcom.common.modules.glasspane.hide()}function J(){V.next.on("click",{type:"next"},W);V.back.on("click",{type:"back"},W)}function P(Z){C();X.maxDealNumber=Z.maxDealNumber;X.cityID=Z.cityID;X.uuID=Z.uuID;X.xhr_object=$.ajax({type:"GET",url:X.xhr_service.url,data:{destinationId:Z.cityID,promotionPageUUID:Z.uuID,targetDateStr:Z.targetDateStr,preview:Z.preview,pageNumber:Z.pageNumber,rl:1},dataType:"json",cache:false,success:I,beforeSend:function(a){if(Y){M.addToHistory(Z);M.suspendObserveHashChange()}},error:L,complete:function(){V.pagination_container=$(X.pagination_container);V.back=$(X.paginateBackwards,V.pagination_container);V.next=$(X.paginateForwards,V.pagination_container);X.animating=false;J();H();T(false);if(Y){M.observeHashChange()}X.current_page=Z.pageNumber;E($("#breadcrumb"),X.current_page);K(Z.cityID)}})}W=function(Z){if(X.animating){return }if(Z.data.type==="next"){X.current_page++}else{X.current_page--}X.animating=true;V.tandcs.hide();V.pagination_bottom.hide();V.hotels_container.fadeOut("fast",function(){V.hotels_container.empty();X.template_store=[];P({cityID:X.cityID,uuID:X.uuID,maxDealNumber:X.maxDealNumber,targetDateStr:window.hcom_landing_deals_navigation_service_data.targetDateStr,preview:window.hcom_landing_deals_navigation_service_data.preview,pageNumber:X.current_page,rl:1})});return false};function O(){X.current_page=1}function R(Z){hcom.landing.deals.data_manager.sendXHRRequest(Z.data)}function G(){return !!window.location.hash&&window.location.hash!=="#"}function A(Z){if(!X.initialised){X.initialised=true;$.extend(X,Z||{})}if(hcom.locale.advanced!==undefined){B=new $.formatter(hcom.locale.advanced.deals.messages);X.loading_text=B.format("landing.deals.multicity.loading.content");X.loading_text_error=B.format("landing.deals.multicity.loading.content.error")}return X.instance}return{init:function(){X.instance=hcom.landing.deals.data_manager;A({template:"narrow_listings",xhr_service:{url:"/promotions/promotion.html"}});var a;try{a=hcom.locale.advanced.deals.behaviors.bbq_enabled}catch(Z){}if(a){Y=true;M=new hcom.common.jquery.bbq.history({reload:R,initParams:{}});M.initHistory();if(G()){M.restore()}}},sendXHRRequest:P,abortXHRRequest:D,getXHRProcess:N,bindHandlers:J,reload:R,restorePaging:O}}});$.registerModule({name:"hcom.landing.deals.navigation",impl:function(B){var D={navigation:".navigation",expand_list:".expand_list",expand_item:".expand_item",expand_anchor:".expand_anchor",expand_content:".expand_content",content_items:".xhrsender a",pagination_containers:"div.pagination",tandcs:"div.deals_tandc_cntr",open:"open",closed:"closed",active:"active",loading:"loading",dataManager:undefined},E,G={};G.navigation=$(D.navigation);G.expand_list=$(D.expand_list,G.navigation);G.expand_item=$(D.expand_item,G.expand_list);G.expand_anchor=$(D.expand_anchor,G.expand_item);G.expand_content=$(D.expand_content,G.expand_item);G.content_items=$(D.content_items,G.navigation);G.pagination_containers=$(D.pagination_containers);G.tandcs=$(D.tandcs);G.current_item=null;function C(M){var P=$(M.currentTarget),N=M.data.parent,O=M.data.content;if(N.hasClass(D.open)){O.slideUp(500,function(){N.removeClass(D.open).addClass(D.closed)})}else{N.removeClass(D.closed).addClass(D.open);O.slideDown(500,function(){P.trigger("focus")})}return false}function I(M){var N=M.split("|");if(D.dataManager.getXHRProcess()){D.dataManager.abortXHRRequest()}if(G.pagination_containers.is(":visible")){G.pagination_containers.hide()}if(G.tandcs.is(":visible")){G.tandcs.hide()}D.dataManager.restorePaging();D.dataManager.sendXHRRequest({cityID:N[0].split("/")[1],uuID:N[1].split("/")[1],maxDealNumber:N[2].split("/")[1],pageNumber:1,targetDateStr:window.hcom_landing_deals_navigation_service_data.targetDateStr,preview:window.hcom_landing_deals_navigation_service_data.preview,rl:1});D.dataManager.bindHandlers()}function L(){$(".pageNo").removeClass("hidden")}function J(M){hcom.common.modules.sitecatalyst.sendPartialReport({eVar45:M},null,M)}function K(N,P){var Q=$(N.currentTarget),O=Q.closest("li"),M=Q.attr("rel");if(O){if(G.current_item){G.current_item.removeClass(D.active)}G.current_item=O;O.addClass(D.active)}if(M!==undefined&&M!==""){I(M)}if(P===undefined&&N.data.sendOmniture){J("deals :: multi city :: landing page|leftnav|"+Q.attr("href"))}L();N.stopPropagation();N.preventDefault();window.scrollTo(0,0);return false}function F(M){$(".xhrsender .cid_"+M).trigger("click",[false]);return false}function A(){$.doc.on("click",".more_offers a",function(){J("deals :: multi city :: landing page|"+$(this).attr("rel")+"|"+$("#multi_city_url").text());F($(this).prop("class"));return false})}function H(O){var N,P,M;if(hcom.locale.advanced!==undefined){E=new $.formatter(hcom.locale.advanced.deals.messages)}D=$.extend(D,O||{});for(N=G.expand_item.length;N--;){P=G.expand_item.eq(N);M=G.expand_anchor.eq(N);if(!D.expand&&!P.hasClass(D.open)){P.removeClass(D.open).addClass(D.closed)}else{}M.on("click",{content:G.expand_content.eq(N),parent:P},C);if(N!==0){C({currentTarget:M,data:{content:G.expand_content.eq(N),parent:P}})}}for(N=G.content_items.length;N--;){G.content_items.eq(N).on("click",{sendOmniture:true},K)}A()}return{Navigation:function(M){H(M)}}}});$.registerModule({name:"hcom.landing.pages.landing.deals",dependencies:["hcom.landing.modules.common","hcom.landing.modules.querymodule","hcom.landing.special_deals.modules.checkavailabilitydialog","hcom.common.modules.searchpopdiv","hcom.common.modules.autosuggest","hcom.landing.deals.data_manager","hcom.landing.deals.navigation"],impl:function(A){var K,H="focused",G=null;function D(){G=hcom.landing.deals.data_manager;if(!G){throw ("initNavigation: dataManager undefined.")}var L={instance_id:"deals_navigation",settings:{expand:false,dataManager:G}};hcom.landing.deals.navigation[L.instance_id]=new hcom.landing.deals.navigation.Navigation(L.settings)}function C(){if($("#checkAvailabilityHolder").length){var L;L=new hcom.landing.special_deals.modules.checkavailabilitydialog("ca",false,null,{containerSelector:"#page_container",roomSelector:"select[name=roomno]:first"});L.attachEvents();L.buildTemplate(hcom.common.modules.template.buildJson(hcom.landing.data.staticTemplates))}}function F(){var L={instanceName:"searchCityModel_city",inputControlId:"deals_search",selectSearchForm:function(){var M=$("#searchCityModel");return M.length>0?M:$("#searchForm")},selectDestinationIdField:function(){return $("#destinationId")},i18nMessages:hcom.locale.autosuggest.i18nMessages,minCharLength:hcom.locale.autosuggest.activationCharLength,itemsNrPerCategory:5,urlBase:hcom.locale.autosuggest.asURL,lang:hcom.locale.language,categories:hcom.common.modules.autosuggest.CATEGORY_INDICATOR.CITY};if($("#"+L.inputControlId).length){hcom.common.modules.autosuggest[L.inputControlId]=new hcom.common.modules.autosuggest.AutoSuggest(L)}}function B(){var M=$(".deals_expandable_hotels_list"),L=$(".back_to_top",M),N;N=$(".countries a[name]",M);N.each(function(P,Q){var S=N.eq(P),O=$("a[href=#"+S.attr("name")+"]");if(O.length){var T=S.parent().parent(),R=location.hash.replace(/#(.*)/,"$1");K=$("li."+H,M);O.on("click",function(U){window.scrollTo(0,Math.floor(S.offset().top));if(!T.hasClass("open")){S.trigger("click")}if(K!==T){K.removeClass(H)}T.addClass(H);K=T;U.preventDefault()});if(R===S.attr("name")){O.trigger("click")}if($.browser.msie&&$.browser.version<7){O.attr("href","#")}else{O.removeAttr("href")}S.removeAttr("name")}else{return false}});L.on("click",function(O){$.win.scrollTop(0);O.preventDefault()});if($.browser.msie&&$.browser.version<7){L.attr("href","#")}else{L.removeAttr("href")}}function E(){var L=$("div.deals_expandable_hotels_list ol.countries > li");L.each(function(O,P){var Q=L.eq(O);var M=$("h3 a:first",Q);var N=$("div:first",Q);if(!Q.hasClass("open")){Q.attr("class","closed")}M.on("click",function(){if(Q.hasClass("open")){N.slideUp(500,function(){Q.attr("class","closed")})}else{var R=N.find("img.lazyinit");R.each(function(Z,X){var V=R.eq(Z),U=V.prop("id"),Y=/sfThumb(.*)/,W=U.match(Y)[1],T=hcom.landing.data.popdiv,S;S=T[W];if(S){V.attr("src",S.thumbnailUrl);V.attr("alt",S.thumbnailAltText)}V.removeClass("lazyinit")});N.slideDown(500,function(){$("a:first",N).trigger("focus")});Q.attr("class","open")}return false})})}function I(){var L=$(".deals_hlist a[name]");L.each(function(N,O){var P=L.eq(N),M=$("a[href=#"+P.attr("name")+"]");M.click(function(Q){window.scrollTo(0,Math.floor(P.offset().top));Q.preventDefault()});if($.browser.msie&&$.browser.version<7){M.attr("href","#")}else{M.removeAttr("href")}}).removeAttr("name")}function J(){if(hcom.landing.data&&hcom.landing.data.popdiv){return new hcom.landing.modules.hotelimagepopdiv({$container:$("#imagePopDiv"),mouseoverFilter:"div.deals_hlist img.imagePopDivThumb, div.deals_hlist div.popdiv_prompt_icon, div.deals_expandable_hotels_list div.photo_thumbnail",clickFilter:"span.hotelDetailsPhoto",store:new hcom.common.modules.hotelimagepopdiv.JSONStore({data:hcom.landing.data.popdiv})})}}return{init:function(){F();D();setTimeout(function(){J()},1);E();B();I();C()}}}});$.registerModule({name:"hcom.landing.advanced_deals.modules.checkavailabilitydialog",dependencies:["hcom.common.modules.checkavailabilitydialog","hcom.common.modules.basicinput"],impl:function(A){var B=$.extendCls(hcom.common.modules.checkavailabilitydialog,{constructor:function(E,F,D,C){B.superclass.constructor.call(this,E,F,D,C)},submitForm:function(){var C=$("#checkAvailabilityHolder").find("form:first");C.find("input[name=hotelId]").val(this.hotelid);C.find("[name^='searchParams.']").each(function(E,F){var D=$(F);D.attr("name",D.attr("name").replace(/^searchParams\./,""))});C.trigger("submit")},attachEvents:function(){var C=this;$.doc.on("click",".hcomCheckAvailability",function(D){C.open(D)});B.superclass.attachEvents.call(this)}});B.init=function(){};return B}});$.registerModule({name:"hcom.landing.modules.urgencypopup",impl:function(C){var B,A;A={initialDelay:7000,visibleTime:7000,invisibleTime:20000,popsLimit:2,useToggle:false};B=function(D){this.config=$.extend({},A,D);this.config.$container=this.config.$container||$(".hcom_urgency_popup:first");this.config.$innerContainer=this.config.$innerContainer||this.config.$container.find(".urgency_popup_data:first");this.shown=0;this.lastBookedHotelIds=[];console.assert(this.config.$container.length===1);console.assert(this.config.$innerContainer.length===1);console.assert(typeof this.config.url==="string");this.hideProxy=$.proxy(this.hide,this);this.hideForeverProxy=$.proxy(this.hideForever,this);this.showProxy=$.proxy(this.show,this);this.showAndHideProxy=$.proxy(this.showAndHide,this);this.ajaxRequestProxy=$.proxy(this.ajaxRequest_,this);this.config.$container.on("click",this.hideForeverProxy)};B.prototype.hideForever=function(){this.config.$container.hide();this.shown=this.config.popsLimit};B.prototype.hide=function(){if(this.config.useToggle){this.config.$container.hide("slow")}else{this.config.$container.slideUp("slow")}};B.prototype.show=function(){if(this.config.useToggle){this.config.$container.show("slow")}else{this.config.$container.slideDown("slow")}this.shown++};B.prototype.showAndHide=function(){if(this.shown<this.config.popsLimit){this.show();setTimeout(this.hideProxy,this.config.visibleTime);if(this.shown<this.config.popsLimit){var D=function(){this.ajaxRequest_(0)};setTimeout($.proxy(D,this),this.config.visibleTime+this.config.invisibleTime)}}};B.prototype.ajaxSuccess_=function(G,D){if($.trim(G).length>0){this.config.$innerContainer.html(G);var I,F=0;var H=1;var E=this.lastBookedHotelIds;$("a[id^='recentlyBookedHotel_']",this.config.$innerContainer).each(function(){if(F>=H){return false}I=$(this).prop("id");if($.inArray(I,E)===-1){E.push(I);F++;$(this).removeClass("hidden")}});if(F>0){setTimeout(this.showAndHideProxy,D)}}};B.prototype.ajaxRequest_=function(D){var E=function(F){this.ajaxSuccess_(F,D)};$.ajax({url:this.config.url,dataType:"html",data:this.config.data,type:"GET",success:$.proxy(E,this)})};B.prototype.init=function(){this.ajaxRequest_(this.config.initialDelay)};return B}});$.registerModule({name:"hcom.landing.modules.urgencymodule",extendsModule:"hcom.landing.modules.urgencypopup",impl:function(B){var C,A;A={initialDelay:3000,visibleTime:7000,invisibleTime:20000,popsLimit:2,useToggle:false};C=function(D){this.config=$.extend({},A,D);this.config.$container=this.config.$container||$("#landing_recently_booked_message");C.superclass.constructor.call(this,this.config)};C.prototype.hideForever=function(){};C.prototype.hide=function(){};C.prototype.ajaxSuccess_=function(G,D){if($.trim(G).length>0){this.config.$innerContainer.html(G);var J,F=0;var I=1;var E=this.lastBookedHotelIds,H=$("a[id^='recentlyBookedHotel_']",this.config.$innerContainer);H.each(function(){if(F>=I){return false}J=$(this).prop("id");if($.inArray(J,E)===-1){E.push(J);F++;$(this).removeClass("hidden")}});if(H.length===1){H.removeClass("hidden");F=1}if(F>0||!H.length){setTimeout(this.showAndHideProxy,D)}}};return C}});$.registerModule({name:"hcom.common.travel_hook.core",dependencies:[],impl:function(){var A="script[src*='delivery\\.']";return{executeTravelHook:function(B,D){try{A="script[src*='delivery\\.']";if(!!B&&B!==""){$(A).remove();$.requireJs($.trim(B),D)}}catch(C){console.debug("travelhook error: "+C)}},isInlineMerchandisingPresent:function(){var B=$("#TH_IS_RB_LABEL").length>0?$($("#TH_IS_RB_LABEL")[0]).text():"";return(B!=="")},pageIds:function(){return{description:"PROPERTY_DESCRIPTION",photos:"PHOTOS",maps:"MAPS",reviews:"GUEST_REVIEWS",prices:"ROOM_RATES"}},defaultPageId:function(){var B=$(".tabs .active_tab"),C;if(B.hasClass("description")){C=this.pageIds().description}else{if(B.hasClass("photos")){C=this.pageIds().photos}else{if(B.hasClass("maps")){C=this.pageIds().maps}else{if(B.hasClass("reviews")){C=this.pageIds().reviews}else{if(B.hasClass("prices")){C=this.pageIds().prices}}}}}return C},executeTravelHookFromTab:function(B,C){$(".tabs li").on("click",function(D){var E=$(this).prop("class");hcom.common.travel_hook.core.executeTravelHook(B.replace("travelHookPageIdPlaceHolder",hcom.common.travel_hook.core.pageIds()[E]))});this.executeTravelHook(B.replace("travelHookPageIdPlaceHolder",this.defaultPageId()),C)},executeTravelHookWithPageId:function(C,B,D){this.executeTravelHook(C.replace("travelHookPageIdPlaceHolder",B),D)}}}});$.registerModule({name:"hcom.profile.pages.sign_up",dependencies:["hcom.common.pages.common"],impl:function(){var G,D,F,B=Object.getReferenceToNestedName("hcom.locale.rules.COUNTRIES_WITHOUT_POSTAL_CODE").split(",");function E(){if(D.is(":checked")){G.find("input").attr("disabled",true);G.find("select").attr("disabled",true)}else{G.find("input").removeAttr("disabled");G.find("select").removeAttr("disabled")}}function A(K,L){L.$stateGroups.appendTo(L.$selectWork);L.$selectWork.find($.format("optgroup[id=stateGroup_{0}]",K)).appendTo(L.$stateSelect);if(L.$stateSelect.children().length>1){L.$stateProvince.show()}else{L.$stateProvince.hide()}}function C(L){var K=false;for(var M in B){if(B[M]===L){K=true;break}}return K}function I(K,L){if(C(K)){L.$zipCodeElement.hide()}else{L.$zipCodeElement.show()}}function J(){var L=$(this),K=F[L.attr("id")];A(L.val(),K);I(L.val(),K)}function H(){var K=$("#stateId"),L=$("#stateIdPaymentContact");G=$("#billingsElements");D=$("#billingInfoChk");F={countryCustomerContact:{$countrySelect:$("#countryCustomerContact"),$stateGroups:K.find("optgroup"),$zipCodeElement:$("#zipCode"),$stateSelect:K,$selectWork:$("#stateOrProvinceWork"),$stateProvince:$("#stateOrProvinceContainer"),$stateEmptyOption:$("#stateCustomerContactEmptyOptionLine")},countryPaymentContact:{$countrySelect:$("#countryPaymentContact"),$stateGroups:L.find("optgroup"),$zipCodeElement:$("#zipCodePaymentContact"),$stateSelect:L,$selectWork:$("#stateOrProvinceWorkPaymentContact"),$stateProvince:$("#stateOrProvinceContainerPaymentContact"),$stateEmptyOption:$("#statePaymentContactEmptyOptionLine")}}}return{init:function(){H();E();for(var K in F){if(F[K].$countrySelect.length){I(F[K].$countrySelect.val(),F[K]);A(F[K].$countrySelect.val(),F[K])}}D.on("click",function(){E()});for(var L in F){if(F[L].$countrySelect.length){F[L].$stateEmptyOption.hide();F[L].$countrySelect.on("change",J)}}}}}});$.registerModule({name:"hcom.profiles.pages.wr_activity",dependencies:["hcom.common.pages.common","hcom.common.popdiv.modules.popdiv","hcom.profiles.modules.unenroll_popdiv"],impl:function(){function A(){hcom.common.popdiv.modules.popdiv.create(".reason_for_no_points_popdiv:first").addClickTrigger("#lnk_reason_for_no_points").setCloseSelector("#reason_for_no_points_popdiv_close").setCloseOnOuterClick(true)}function B(){return new hcom.profiles.modules.unenroll_popdiv()}return{init:function(){A();B()}}}});$.registerModule({name:"hcom.profiles.modules.unenroll_popdiv",dependencies:["hcom.common.form.modules.submit_button","hcom.common.popdiv.modules.popdiv_simple_aligner"],extendsModule:"hcom.common.popdiv.modules.popdiv",impl:function(){var B,A;A=function(D){var C;A.superclass.constructor.call(this,D||A.SHELL_SELECTOR);this.addClickTrigger(C=$(A.OPEN_TRIGGER).attr("href","#"));this.setCloseOnOuterClick(true);this.setCloseSelector("#unenroll_popdiv_close");this.setAligner(new hcom.common.popdiv.modules.popdiv_simple_aligner().setDefaultReference(C));this.$checkbox=$(A.CHECKBOX_SELECTOR);this.submitButton=new B({buttonSelector:A.SUBMIT_SELECTOR,disableButton:true});this.updateSubmitButtonPrx_=$.proxy(this.updateSubmitButton_,this);this.$submitBtn=$(A.SUBMIT_SELECTOR);this.updateSubmitButton_();this.bind_(true)};A.prototype={bind_:function(D){var C=D?$.fn.bind:$.fn.unbind;C.call(this.$checkbox,"click",this.updateSubmitButtonPrx_)},updateSubmitButton_:function(){this.submitButton.set(this.$checkbox.prop("checked"))}};A.init=function(){B=hcom.common.form.modules.submit_button};A.SHELL_SELECTOR=".unenroll_popdiv:first";A.UAP_SHELL_SELECTOR=".welcome_rewards_overview_unenroll_popdiv:first";A.CHECKBOX_SELECTOR="#chk_unenroll_wr";A.SUBMIT_SELECTOR="#btn_unenroll_popdiv_submit";A.OPEN_TRIGGER="#lnk_unenroll_wr";return A}});$.registerModule({name:"hcom.landing.pages.landing.articles_hub",dependencies:["hcom.landing.pages.default"],impl:function(A){return{init:function(){$("#articles_hub_navigation ul.countries").sortedTiles()}}}});$.registerModule({name:"hcom.landing.pages.landing.index.articles_hub",dependencies:["hcom.landing.pages.landing.basic"],impl:function(A){return{init:function(){$("#articles_hub_navigation ul.countries").sortedTiles()}}}});$.registerModule({name:"hcom.enhanced_search.modules.basicinput",dependencies:["hcom.common.modules.template","hcom.common.modules.calendar_dp"],impl:function(){var C=function(c,f,e){var d="hcom.js.changeSearch";this.name=[d,c].join(".");this.id=[d,f].join(".");this.optionId=e},a=new C("adultFieldName","adultFieldId","adultFieldOptionId"),J=new C("childFieldName","childFieldId","childFieldOptionId"),E=new C("childAgeFieldName","childAgeFieldId","childAgeOptionId"),F,S=/\.rooms\[([0-9]+)\]\.(?:childrenAges\[([0-9]+)\])?/,W=9,b=["lnk_search_tab_destination","lnk_search_tab_hotelname"],R,Q="disabled";function T(c){if(c.rawVal()!==""){c.val(c.val().replace(/%+/g,"").replace(/\s{2,}/g," ").replace(/^\s+/,""))}}function K(e,f,d,c){$.extend(this,{roomSelector:"select[name='numberOfRooms']",childSelector:"select[name^=children]",adultSelector:"select[name$=numberOfAdults]",prefix:e,prefixStr:e.length?e+"_":"",hasTabs:f||false,callbacks:d||{}},c);return this}function H(){if(hcom.search.settings.isColumnedSort){var c=$("#search-header").height();if(hcom.enhanced_search.modules.pinned_header.isFloating()){$(".pinned_elem_place.search-header-pinnable").height(c)}hcom.enhanced_search.modules.infinite_scroll.updatePositions(c)}}function V(){var d=$(".change_search_popdiv"),c=$(".check_availability_popDiv");if(d[0]){$(".childrenAgeMessage",d)[$(".roomAgesOfChildren",d)[0]?"show":"hide"]()}if(c[0]){$(".pricing_chart_dialog .childrenAgeMessage")[$(".roomAgesOfChildren",c)[0]?"show":"hide"]()}H()}function P(d,j,h){var c=this,g=c.$main.find(".roomAgesOfChildren:first tbody tr:eq("+d+")"),e,f=function(i){$(this).attr("id",F.format(E.optionId,c.prefix,String(d),String(e),String(i)))};if(h===0){g.replaceWith(c.childAgeEmptyRow)}else{if(h<j){g.find("td:gt("+String(h-1)+")").remove()}else{if(h>j){if(j===0){g.empty()}for(e=j;e<h;e++){g.append(c.childAgeCell);g.find("td:last").find("select").attr({name:F.format(E.name,String(d),String(e)),id:F.format(E.id,c.prefix,String(d),String(e))}).find("option").each(f)}}}}V()}function Z(h,f,j,k){var d=this,e,c;if((f>0)&&(k===0)){d.$main.find(".roomAgesOfChildren:first").remove();if(!d.roomDetailsExpand){d.roomDetailsExpand=$(".roomDetailsExpand")}d.roomDetailsExpand.removeClass("hasChildren")}else{if((k>0)&&(f===0)){d.$main.find("div.roomDetails:first").after(d.childTable);if(!d.roomDetailsExpand){d.roomDetailsExpand=$(".roomDetailsExpand")}d.roomDetailsExpand.addClass("hasChildren");var g=d.$main.find(".roomAgesOfChildren:last tbody");for(e=0;e<d.cRooms;e++){g.append(d.childAgeEmptyRow)}}}for(e=0,c=j.length;e<c;e++){if(h[e]!==j[e]){P.call(d,e,h[e],j[e])}}}function I(){var f=[],d,e=0;$(this.childSelector,this.$main).each(function(){d=parseInt(this.value,10);e+=d;f.push(d)});return{child:f,childCount:e}}function Y(){var d=this,e=I.call(d);Z.call(d,d.cChild,d.cChildCount,e.child,e.childCount);d.cChild=e.child;d.cChildCount=e.childCount}function L(d,e){var c=this;e.find("td:first").text(F.format("sfsearch.changeSearch.room",String(d+1))).end();e.find(c.childSelector+":first").on("change.basicInput",function(){Y.call(c)}).val("0");e.find(c.adultSelector+":first").val("2")}function D(g){var f=/(id|for|name)="?([^\s>"]+)"?/g,j=String(g),n=this,h=[F.format(a.id,n.prefix,j),F.format(J.id,n.prefix,j)],m=[F.format(a.name,j),F.format(J.name,j)],i=-1,e=0,k=[a.optionId,J.optionId],l,c;function d(p,o,q){var r;if(o==="name"){r=m[e++]}else{if(o==="for"){r=h[0]}else{if(q.indexOf("_option_")>=0){r=F.format(k[i],n.prefix,j,l++)}else{l=0;i+=1;r=h[i]}}}if(r===undefined){return""}else{return[o,'="',r,'"'].join("")}}c=n.roomHtml.replace(f,d);return c}function G(h,j){var l=this,g,k,f=".roomsPeople:first > table:first > tbody:first";if(j<h){$(f,l.$main).find(["> tr:gt(",String(j-1),")"].join("")).find(l.childSelector).each(function(){$(this).off()}).end().remove();var e=l.cChildCount,m=l.cChild.slice(0);for(g=h;g>j;g--){l.cChildCount-=l.cChild.pop()}Z.call(l,m,e,l.cChild,l.cChildCount);if((e>0)&&(l.cChildCount>0)){$([".roomAgesOfChildren:first table:first > tbody:first > tr:gt(",String(j-1),")"].join(""),l.$main).remove()}}else{if(j>h){var d=$(f,l.$main).find("> tr:last"),c;if(l.roomHtml===undefined){c=d.clone();$("option",c).removeAttr("selected");l.roomHtml=["<tr>",c.html(),"</tr>"].join("");if($.browser.msie){l.roomHtml=l.roomHtml.replace(/jQuery[0-9]+[^\s>]+/g,"")}}for(g=h;g<j;g++){d.after(D.call(l,g));d=$(f,l.$main).find("> tr:last");L.call(l,g,d);l.cChild.push(0)}if(l.cChildCount>0){d=l.$main.find(".roomAgesOfChildren:first tbody:first");for(g=h;g<j;g++){d.append(l.childAgeEmptyRow)}}}}H()}function N(){var c=parseInt(this.$main.find(this.roomSelector).first().val(),10);this.isGroupBooking=(c>=W);return c}function X(d){var c=this,e=".roomsPeople:first",f=".roomAgesOfChildren:first";if(d&&!c.isPeopleSelectorEnabled){c.$main.find(e).show().end().find(f).show();c.isPeopleSelectorEnabled=true}else{if(!d&&c.isPeopleSelectorEnabled){c.$main.find(e).hide().end().find(f).hide();c.isPeopleSelectorEnabled=false}}}function O(){var d=this,e=d.cRooms,c=d.isGroupBooking,f=N.call(d);if(!c&&d.isGroupBooking){X.call(d,false)}else{if(c&&!d.isGroupBooking){X.call(d,true)}d.cRooms=f;G.call(d,e,f)}}function B(c){var n=this,f=0,j,l,k,e=[],o,d,g=0;for(var m in c){if(c.hasOwnProperty(m)){j=S.exec(m);if(j){l=parseInt(j[1],10);f=Math.max(f,l);if(j[2]!==undefined){e[l]=Math.max(e[l]||0,parseInt(j[2],10))}}}}k=n.cRooms;n.cRooms=f+1;G.call(n,k,n.cRooms);for(var h=0;h<n.cRooms;h++){if(e[h]===undefined){e[h]=0}else{e[h]+=1}g+=e[h]}o=n.cChild;d=n.cChildCount;n.cChild=e;n.cChildCount=g;Z.call(n,o,d,n.cChild,n.cChildCount)}function M(c){var d=c.basic_input;this.childTable=d.child_table;this.childAgeCell=d.child_age_cell;this.childAgeEmptyRow=d.child_age_empty_row}function A(c){var d=this.$main.find(".cta").eq(0);d.attr("disabled",!c);d.toggleClass("cta-disabled",!c)}function U(e){var c=this,d=c.$tabContainer.find("a"),f="click."+c.prefix;if(e){d.on(f,function(g){g.preventDefault();R.call(c,$(this))})}else{d.off(f)}}R=function(d){var i=d.text(),h=d.parent(),e=-1,c=-1;U.call(this,false);this.$tabContainer.find("li").each(function(j){var l=$(this),k=l.children("a");if(k.length===0){e=j;var m=l.text();l.removeClass("active").html(['<a href="#" id="',this.prefixStr,b[j],'"></a>'].join("")).children("a").text(m)}if(this===h[0]){c=j}});if(e===1||c===1){var g=this.$main.find("div.search_hotelName:first"),f=$("#search_hotelNameInput");if(e===1){g.hide();f.prop(Q,true)}else{f.prop(Q,false);g.show()}}h.addClass("active").empty().text(i);if(this.callbacks.hasOwnProperty("tabClicked")){this.callbacks.tabClicked(c,e)}U.call(this,true)};K.prototype={initState:function(d,g){var c,f,e=this;e.$main=d;e.$form=(g===true?d.parent("form:first"):d.find("form:first"));if(e.hasTabs){e.$tabContainer=d.find("ul.searchOptions:first")}c=e.$form.find("input[name=destinationName]:first");e.hasDestination=((c.length>0)&&(c.attr("type")!=="hidden"));A.call(e,e.hasDestination&&c.val().length>0);e.cRooms=N.call(e);e.isPeopleSelectorEnabled=!e.isGroupBooking;f=I.call(this);e.cChild=f.child;e.cChildCount=f.childCount;e.$form.attr("autocomplete","off");return e},setTemplates:function(c){M.call(this,c);return this},attachEvents:function(){var d=this,c="basicInput";d.$main.on("child-msg",V).on("change."+c,d.roomSelector,function(){O.call(d)}).on("change."+c,d.childSelector,function(){Y.call(d)}).on("blur."+c,"input[name=destinationName]",function(){var e=this;setTimeout(function(){A.call(d,$(e).val().length>0)},0)}).on("change."+c+"_nights",".check_in_out input",{basicInp:d},function(g){var j=g.data.basicInp.$main,f=j.find(".nights .luggage"),e,i=$.datepicker,h=i.daylightSavingAdjust(Date.parsePOSLocaleDate(j.find("#search_checkIn").val())),k=i.daylightSavingAdjust(Date.parsePOSLocaleDate(j.find("#search_checkOut").val()));if(h&&k){e=Math.round((k.getTime()-h.getTime())/86400000)}if(typeof e==="number"&&e>0){f.text(e).parent().children("span").text(F.format("search.columned.changesearch.night"+(e>1?"s":"")))}else{f.text("").parent().children("span").text(F.format("search.columned.changesearch.nights"))}}).find(".check_in_out input").first().trigger("change."+c+"_nights");if(d.hasTabs){U.call(d,true);$("#search_hotelNameInput").setEmptyValue(F.format("sfsearch.filterModule.defaulthotelnameinput")).on("blur",function(){T($(this))})}return d},detectFieldCounts:function(){B.call(this)},validate:function(){var d=this,e=$.trim($("#"+d.prefixStr+"search_checkIn").val()),c=$.trim($("#"+d.prefixStr+"search_checkOut").val()),f=(e.length>0)&&(c.length>0);f=f&&!!Date.parsePOSLocaleDate(e)&&!!Date.parsePOSLocaleDate(c);if(f){$(".roomAgesOfChildren:first select",d.$main).each(function(){return(f=this.selectedIndex>0)})}return f||d.isGroupBooking},shouldRedirectGroupBooking:function(){return this.isGroupBooking&&!Object.getReferenceToNestedName("hcom.group_booking.settings.hotelPlannerGroupBookingEnabled")},isGroupBookingSet:function(){return this.isGroupBooking},redirectGroupBooking:function(){var f=this.shouldRedirectGroupBooking();if(f){var e=$.trim($("#"+this.prefixStr+"search_checkIn").val()),d=$.trim($("#"+this.prefixStr+"search_checkOut").val()),c=$.trim(this.$form.find("input[name=destinationName]:first").val());window.location=["/groups/request.html?request.destination=",c,"&request.checkIn=",e,"&request.checkOut=",d].join("")}return f}};K.init=function(){F=new $.formatter()};K.filterHotelName=T;return K}});$.registerModule({name:"hcom.common.modules.cms_support",dependencies:[],impl:function(A){var B=hcom.deferred_command;return{init:function(){if($.isFunction(B)){B($)}}}}});$.registerModule({name:"hcom.common.modules.sharing_n_email_popdiv",extendsModule:"hcom.common.popdiv.modules.popdiv",impl:function(){var A=function(B){A.superclass.constructor.call(this,B);this.setCloseSelector("span.icon_close").setCloseOnOuterClick(true)};return A}});$.registerModule({name:"hcom.common.modules.sharing_n_email",dependencies:["hcom.common.modules.share_page_popdiv","hcom.common.modules.email_page_popdiv","hcom.common.popdiv.modules.popdiv","hcom.common.popdiv.modules.popdiv_simple_aligner"],impl:function(){var B,C,E,D,A;B=function(F){this.onTriggerPrx_=$.proxy(this.onTrigger_,this);this.sharePopdiv=null;this.emailPopdiv=null;this.openedPopdiv=null;this.bind()};B.prototype={bind:function(){this.setBind_(true)},unbind:function(){this.setBind_(false)},setBind_:function(G){var F=G?$.fn.on:$.fn.off;F.call($.body,"click",[B.SHARE_TRIGGER_SELECTOR,B.EMAIL_TRIGGER_SELECTOR].join(","),this.onTriggerPrx_)},onTrigger_:function(F){if(!this.openedPopdiv){if($(F.currentTarget).is(B.SHARE_TRIGGER_SELECTOR)){this.openSharePopdiv()}else{this.openEmailPopdiv()}}},closeOpenedPopdiv:function(){if(this.openedPopdiv){this.openedPopdiv.hide();this.openedPopdiv=null}},openPopdiv_:function(F){if(this.openedPopdiv!==F){this.closeOpenedPopdiv();this.openedPopdiv=F;F.open()}},onPopdivClose_:function(){this.openedPopdiv=null},openSharePopdiv:function(){this.openPopdiv_(this.getSharePopdiv())},openEmailPopdiv:function(){this.openPopdiv_(this.getEmailPopdiv())},bindPopdiv_:function(F){F.addReceiver(D.CLOSE_EVENT,this.onPopdivClose_,this);return F},getShareTrigger_:function(){return this.$shareTrigger_||(this.$shareTrigger_=$(B.SHARE_TRIGGER_SELECTOR))},getEmailTrigger_:function(){var F;return this.$emailTrigger_||(this.$emailTrigger_=(F=$(B.EMAIL_TRIGGER_SELECTOR)).length?F:this.getShareTrigger_())},buildPopdiv_:function(G,F,H){return this.bindPopdiv_(new G(H).setAligner(A.createForReference(F).setPreferredDirection(A.DIRECTIONS.BOTTOM_LEFT)))},getSharePopdiv:function(){return this.sharePopdiv||(this.sharePopdiv=this.buildPopdiv_(C,this.getShareTrigger_(),this.getEmailPopdiv()))},getEmailPopdiv:function(){return this.emailPopdiv||(this.emailPopdiv=this.buildPopdiv_(E,this.getEmailTrigger_()))}};B.SHARE_TRIGGER_SELECTOR="#lnk_share_page";B.EMAIL_TRIGGER_SELECTOR="#lnk_email_page";B.init=function(){C=hcom.common.modules.share_page_popdiv;E=hcom.common.modules.email_page_popdiv;D=hcom.common.popdiv.modules.popdiv;A=hcom.common.popdiv.modules.popdiv_simple_aligner};return B}});$.registerModule({name:"hcom.common.modules.email_page_popdiv",dependencies:["hcom.common.modules.state"],extendsModule:"hcom.common.modules.sharing_n_email_popdiv",impl:function(){var B,A;A=function(){A.superclass.constructor.call(this,A.SHELL_SELECTOR);this.onMessageFieldChangePrx_=$.proxy(this.onMessageFieldChange_,this);this.onSubmitPrx_=$.proxy(this.onSubmit_,this);this.onSuccessPrx_=$.proxy(this.onSuccess_,this);this.$messageField=$(A.MESSAGE_FIELD_SELECT);this.$counter=$(A.COUNTER_SELECT);this.$cancel=$(A.CANCEL_SELECTOR);this.$form=this.$shell.find("form:first");this.$successView=$(A.SUCCESS_VIEW_SELECT);this.$addressList=$(A.ADDRESS_LIST_SELECT);this.$errorContainer=$(A.ERROR_CONTAINER_SELECT);this.$backLink=null;this.backEvtBound=false;this.backLinkVisible=(this.$backLink=$(A.BACK_LINK_SELECT)).is(":visible");console.assert(this.$messageField.length&&this.$counter.length&&this.$cancel.length&&this.$form.length);this.bind_()};A.prototype={bind_:function(){this.$messageField.on("keyup focus blur",this.onMessageFieldChangePrx_);this.$cancel.on("click",this.onCloseClickPrx_);this.$form.on("submit",this.onSubmitPrx_)},open:function(C){this.$form.show();this.$successView.hide();A.superclass.open.call(this);this.opener_=C?C:null;this.setBackLinkEnabled_(!!C)},changeOpenedState_:function(C){A.superclass.changeOpenedState_.call(this,C);if(!C&&this.opener_){this.opener_=null}},onBackLinkClick_:function(C){var D=this.opener_;this.close();if(D){D.open()}return false},setBackLinkEnabled_:function(C){if(this.backLinkVisible!==C){this.$backLink.parent().css("display",C?"block":"none");this.backLinkVisible=C}if(C&&!this.backEvtBound){this.backEvtBound=true;this.$backLink.on("click",$.proxy(this.onBackLinkClick_,this))}},onMessageFieldChange_:function(){this.updateMessageCharCount_()},updateMessageCharCount_:function(){this.$counter.text(Math.max(0,A.MAX_MESSAGE_LENGTH-this.$messageField.val().length))},onSuccess_:function(C){var G=$("email-response",C),E=[],F,D={};console.assert(G.length===1);G.find(">addresses>address").map(function(){E.push(this.getAttribute("value"))});if(!E.length){G.find(">errors>error").map(function(){D[this.getAttribute("field")]=this.getAttribute("message")});F=$.map(D,function(I,H){return"<li>"+I+"</li>"}).join("");this.$errorContainer.find("ul").empty().append(F);this.$errorContainer.show()}else{this.$errorContainer.hide();this.$form.hide();F=$.map(E,function(I,H){return"<li>"+I+"</li>"}).join("");this.$addressList.empty().append(F);this.$successView.show()}this.aligner.align(this);if(this.closeOnOuterClick){this.createClickArea_(false);this.createClickArea_(true)}},onSubmit_:function(C){C.preventDefault();$.ajax({url:this.$form.attr("action"),dataType:"xml",type:"POST",data:B.formSerialize(this.$form),success:this.onSuccessPrx_})}};A.SHELL_SELECTOR=".C_email_page_popdiv:first";A.CANCEL_SELECTOR=".lnk_email_page_cancel";A.MESSAGE_FIELD_SELECT="textarea:first";A.COUNTER_SELECT="#txt_counter_left_chars";A.BACK_LINK_SELECT="#lnk_email_page_back";A.SUCCESS_VIEW_SELECT="#emailfriend_success";A.ADDRESS_LIST_SELECT="#mailtos";A.ERROR_CONTAINER_SELECT="#error_cntr";A.MAX_MESSAGE_LENGTH=500;A.init=function(){B=hcom.common.modules.state};return A}});$.registerModule({name:"hcom.common.modules.share_page_popdiv",extendsModule:"hcom.common.modules.sharing_n_email_popdiv",dependencies:["hcom.common.modules.clipboard"],impl:function(){var A,B;A=function(C){A.superclass.constructor.call(this,A.SHELL_SELECTOR);this.$toolbar=this.$shell.find(".toolbar:first");this.onEmailClicdPrx_=$.proxy(this.onEmailClick_,this);this.onPlusOneScriptLoadedPrx_=$.proxy(this.onPlusOneScriptLoaded_,this);this.emailPopdiv=C;this.init_();this.bind_(true);this.clipboard=null};A.prototype={init_:function(){this.initFB_();this.initTwitter_();this.initClipboard_();this.initPlusOne_()},bind_:function(D){var C=D?$.fn.on:$.fn.off;C.call($(A.EMAIL_SHARE_BUTTON),"click",this.onEmailClicdPrx_)},onEmailClick_:function(){this.close();this.emailPopdiv.open(this);return false},setOpened:function(C){A.superclass.setOpened.call(this,C);this.initClipboard_()},initClipboard_:function(){if(this.isOpened){if(!this.clipboard){this.clipboard=new B($(A.CLIPBOARD_COPY_SELECTOR),$(A.CLIPBOARD_TEXT_SELECTOR))}else{this.clipboard.show()}}else{if(this.clipboard){this.clipboard.hide()}}},initPlusOne_:function(){if(!this.isPlusOneAPILoaded_()&&this.isPlusOneSharePresent_()){window.___gcfg={lang:hcom.locale.language};$.requireJs("https://apis.google.com/js/plusone.js",this.onPlusOneScriptLoadedPrx_,"{parsetags: 'explicit'}")}},isPlusOneAPILoaded_:function(){return !!Object.getReferenceToNestedName("gapi.plusone")},isPlusOneSharePresent_:function(){return this.$toolbar.find("div.gplusone > *").filter(function(){return this.tagName==="G:PLUSONE"}).length===1},onPlusOneScriptLoaded_:function(){if(window.gapi){gapi.plusone.go(this.$toolbar.find("div.gplusone")[0])}},initFB_:function(){if(!this.isFBScriptLoaded_()&&this.isFBLikePresent_()){var C=hcom.locale.facebookLocale;this.createFBRoot_();$.requireJs(document.location.protocol+"//connect.facebook.net/"+C+"/all.js",$.proxy(this.onFBScriptLoaded_,this))}},onFBScriptLoaded_:function(){FB.XFBML.parse(this.$toolbar[0])},isFBLikePresent_:function(){return !!this.$toolbar.find(".fb-like").length},isFBScriptLoaded_:function(){return !!window.FB},createFBRoot_:function(){if(!$("#fb-root").length){$("<div id='fb-root' />").appendTo("body")}},initTwitter_:function(){if(!this.isTwitterScriptLoaded_()&&this.isTwitterButtonPresent()){$.requireJs("http://platform.twitter.com/widgets.js")}},isTwitterScriptLoaded_:function(){return !!window.twttr},isTwitterButtonPresent:function(){return this.$toolbar.find(".twitter-share-button:first").length>0}};A.SHELL_SELECTOR=".C_share_page_popdiv:first";A.CLIPBOARD_COPY_SELECTOR="#btn_social_share_page_link";A.CLIPBOARD_TEXT_SELECTOR="#txt_social_share_page_link";A.EMAIL_SHARE_BUTTON="#lnk_social_email_page";A.init=function(){B=hcom.common.modules.clipboard};return A}});$.registerModule({name:"hcom.common.modules.clipboard",impl:function(){var A;A=function(C,B){var D=(this.idSequence=++A.idSequence);A.clipboardMap[D]=this;this.id="clip_obj_"+D;this.$clickElem=C;this.$inputElem=B;this.$container=null;this.movie=null;this.leftOffset=0;this.attach()};A.prototype={attach:function(){var E,C=this.$clickElem.position(),D=this.$clickElem.outerWidth(),B=this.$clickElem.outerHeight();this.$container=E=$("<div style='position: absolute;' />").css("left",C.left).css("top",C.top).css("width",D).css("height",B).css("z-index",1).insertAfter(this.$clickElem);this.leftOffset=C.left;E.flash({attrs:{id:this.id,width:D,height:B},params:{flashvars:{id:this.idSequence,width:D,height:B}},wmode:"transparent",swf:A.SWF_PATH});this.movie=E.find(">*:first").get(0)},show:function(){this.$container.css("left",this.leftOffset)},hide:function(){this.$container.css("left",-4000)},onMouseOver_:function(){this.movie.setText(this.$inputElem.val())}};A.SWF_PATH=hcom.locale.clipboard_path;A.AS_NAMESPACE="ZeroClipboard.dispatch";A.idSequence=0;A.clipboardMap={};A.dispatch=function(G,E,D){var B,C,F;console.assert(!!(B=A.clipboardMap[G]));C="on"+E.charAt(0).toUpperCase()+E.substr(1)+"_";if((F=A.prototype[C])){F.call(B)}};A.init=function(){$.namespace(A.AS_NAMESPACE,A.dispatch)};return A}});$.registerModule({name:"hcom.common.modules.share_services",impl:function(C){var K=$("#fb_container"),I=hcom.locale.facebookLocale;function H(){return !!Object.getReferenceToNestedName("gapi.plusone")}function E(){if(window.gapi){gapi.plusone.go("gplus1")}}function F(){FB.XFBML.parse()}function J(){return !!K.find(".fb-like").length}function D(){return !!window.FB}function A(){if(!$("#fb-root").length){$("<div id='fb-root' />").appendTo("body")}}function B(){return !!$("#vk_like").length}function G(){VK.init({apiId:3020656,onlyWidgets:true});VK.Widgets.Like("vk_like",{type:"mini"})}return{loadGP1:function(){if(!H()){window.___gcfg={lang:hcom.locale.language};$.requireJs("https://apis.google.com/js/plusone.js",E)}},loadFBLike:function(){if(!D()&&J()){A();$.requireJs(document.location.protocol+"//connect.facebook.net/"+I+"/all.js",F)}},loadVkontakte:function(){if(B()){G()}}}}});$.registerModule({name:"hcom.landing.modules.checkavailability_forced_on_links_dialog",dependencies:[],extendsModule:"hcom.landing.modules.checkavailabilitydialog",impl:function(B){var A;A=function(D,C){this.config=$.extend({},A.DEFAULTS,C);A.superclass.constructor.call(this,D);this.forceDatedSearch=Object.getReferenceToNestedName("hcom.landing.data.forced_dates");this.forceDatedSearchEnabled=this.forceDatedSearch&&this.forceDatedSearch.enabled;this.forceDatedSearchGoToSearchResult=this.forceDatedSearchEnabled&&this.forceDatedSearch.address_search_page;this.$caForm=this.$caForm||$("#checkAvailabilityHolder").find("form:first")};A.prototype={submitForm:function(H){var G,D,F,E,C;if(this.$source&&(this.$source.closest([this.config.searchFocusedLinkSelectors,this.config.landmarkMapFocusedLinkSelectors,this.config.legacyLandmarkMapFocusedSelectors].join(",")).length||this.$source.closest(".hcomCheckAvailability").length)){if(!this.$source.closest("div.result,li.one_hotel_link,div.hotel_map_popup").closest("div.featured_hotels,div.citylanding_hlist,div.landmark_landing_hotel_link_block,div.mapsRangeContainer").length){this.setDialog(false);D=this.basicInput.$form.find(".destinationDetails,.roomDetails,.roomAgesOfChildren").find("input,select").serialize();if(!D){D=this.basicInput.$form.find(".dates,#step3_int").find("input,select").serialize()}window.location=this.$source.attr("href")+"&"+D}else{if(this.$source.length&&this.$source.prop("id")&&this.$source.prop("id").split("_").length>1){G=this.$source.prop("id").split("_");this.hotelid=G[G.length-1]}else{F=this.$source.closest("div.google_map_overlay");if(F.length&&F.prop("id")&&F.prop("id").split("_").length>1){G=F.prop("id").split("_");this.hotelid=G[G.length-1]}else{this.hotelid=this.$source.attr("rel")}}if($(this.config.flexibleDatesSelector,this.$caForm).is(":checked")||(this.forceDatedSearchEnabled&&this.forceDatedSearchGoToSearchResult===false)){this.$caForm.attr("action","/hotel/details.html");this.$caForm.attr("method","get");this.$caForm.find("[name='numberOfRooms'],[name='rooms']").first().attr("name","roomno");if(this.$source.attr("rel")&&this.$source.attr("rel").indexOf("clickReport")!==-1){$('<input type="hidden" name="clickReport"></input>').appendTo(this.$caForm).val(this.$source.attr("rel").slice("clickReport".length))}}E=$("[name='destinationId']");if(E.length){if(!this.$caForm.find("[name='destinationId']").length){$('<input type="hidden" name="destinationId"></input>').appendTo(this.$caForm)}this.$caForm.find("[name='destinationName']").remove();this.$caForm.find("[name='destinationId']").val(E.val())}C=$("[name='searchParams.landmark']");if(C.val()){if(!this.$caForm.find("[name='searchParams.landmark']").length){$('<input type="hidden" name="searchParams.landmark"></input>').appendTo(this.$caForm)}this.$caForm.find("[name='searchParams.landmark']").val(C.val())}A.superclass.submitForm.call(this,H)}}else{A.superclass.submitForm.call(this,H)}},handleTabs:function(){var C=this.$source.attr("href");if(C&&C.endsWith("#reviews")){$('<input type="hidden" name="tab"></input>').appendTo(this.$caForm).val("reviews")}else{A.superclass.handleTabs.call(this)}},open:function(C){this.$source=$(C.target).closest("a,button,span.hcomCheckAvailability");A.superclass.open.call(this,C)},attachEvents:function(){var C=this;$(this.config.legacyLandmarkMapFocusedSelectors).addClass("bound");$.doc.on("click",[this.config.searchFocusedLinkSelectors,this.config.landmarkMapFocusedLinkSelectors,this.config.legacyLandmarkMapFocusedSelectors].join(","),function(D){C.open(D)});A.superclass.attachEvents.call(this)}};A.DEFAULTS={searchFocusedLinkSelectors:"div.hotels_by_location a,div.city_landing_pagination_link_block .see_all_hotels a,div.city_landing_hotel_link_block.featured_hotels .result a,div.citylanding_hlist .result a",landmarkMapFocusedLinkSelectors:"div.hotel_map_popup a,div.landmark_landing_hotel_link_block a,:not(div.special_deals_links)>ul>li>a.see_more_link",legacyLandmarkMapFocusedSelectors:"div.landmark_landing_hotel_link_block .hcomCheckAvailability",flexibleDatesSelector:"#ca_flexible_chk"};return A}});$.registerModule({name:"hcom.landing.modules.hotel_attribute_link_mapping",dependencies:[],impl:function(A){var B;B=function(C){this.config=$.extend({},C,B.DEFAULTS)};B.prototype={get:function(D){var C;$.each(this.config.mapping,$.proxy(function(F,E){var G=$.proxy(E.parse||this.parse_,this);C=G(D,E);if(C){return false}},this));return C},parse_:function(D,C){var E=C.expr.exec(D);if(E&&E.length===2){return{id:E[1],field:C.field}}}};B.DEFAULTS={mapping:{accomodation:{expr:/de\d*\-at(\d*)/,field:"ptid"},amenity:{expr:/de\d*\-am(\d*)/,field:"aid"},brand:{expr:/de\d*\-br(\d*)/,field:"bid"},quality:{expr:/de\d*\-qu(\d*)/,field:"sr",parse:function(D){var C=this.parse_(D,this.config.mapping.quality);if(C&&C.id){switch(C.id){case"0":C.id="1,2";break;case"4":C.id="4,5";break}}return C}},"star rating":{expr:/de\d*\-st(\d*)/,field:"sr"},theme:{expr:/de\d*\-th(\d*)/,field:"ted"},type:{expr:/de\d*\-ty(\d*)/,field:"tid"}}};return B}});$.registerModule({name:"hcom.landing.modules.checkavailability_forced_on_links_top_landmarks_decorator_dialog",dependencies:["hcom.landing.modules.hotel_attribute_link_mapping"],extendsModule:"hcom.landing.modules.checkavailability_forced_on_links_dialog",impl:function(A){var B,C;B=function(E,D){this.config=$.extend({},B.DEFAULTS,D);B.superclass.constructor.call(this,E,this.config);this.forceDatedSearchOnTopLandmarks=this.forceDatedSearchEnabled&&this.forceDatedSearch.force_dates_on_top_landmarks;this.$cont=this.$cont||$(this.config.topLandmarksContSelector)};B.prototype={handleDateless_:function(){this.setDialog(false);window.location=this.$source.attr("href")},handleDateful_:function(){var E=this.$cont.attr("data-key"),D;if(this.$source.closest(this.config.hotelAttributeLinkBlockSelector,this.$cont).length){D=C.get(this.$source.prop("pathname"))}else{D={id:this.$source.attr("data-key"),field:"lids"}}if(!this.$caForm.find("input[name='hotelId']").length){$('<input type="hidden" name="hotelId" />').appendTo(this.$caForm)}this.$caForm.find("input[name='destinationId']").remove();this.$caForm.find("input[name='hotelId']").attr("name","destinationId").val(E);$('<input type="hidden" />').appendTo(this.$caForm).attr("name",D.field).val(D.id);this.$caForm.find("input[name='destinationName']").attr("name","destination").val(this.$source.text());this.$caForm.attr("method","get");this.$caForm.trigger("submit")},submitForm:function(D){if(this.forceDatedSearchOnTopLandmarks&&this.$source&&(this.$source.closest(this.config.hotelAttributeLinkBlockSelector,this.$cont).length||this.$source.closest(this.config.landmarkLinkBlockSelector,this.$cont).length)){if($(this.config.flexibleDatesSelector,this.$caForm).is(":checked")){this.handleDateless_()}else{this.handleDateful_()}}else{B.superclass.submitForm.call(this,D)}},attachEvents:function(){if(this.forceDatedSearchOnTopLandmarks){$(this.config.hotelAttributeLinkBlockSelector,this.$cont).add(this.config.landmarkLinkBlockSelector,this.$cont).find("a:not(.more)").on("click",$.proxy(function(D){this.open(D)},this))}B.superclass.attachEvents.call(this)}};B.init=function(){C=new hcom.landing.modules.hotel_attribute_link_mapping()};B.DEFAULTS={hotelAttributeLinkBlockSelector:".hotel",landmarkLinkBlockSelector:".lm,.station,.chain",topLandmarksContSelector:".top_landmarks:first",flexibleDatesSelector:"#ca_flexible_chk"};return B}});$.registerModule({name:"hcom.landing.modules.checkavailability_onebrand_interstitial_decorator",extendsModule:"hcom.landing.modules.checkavailability_forced_on_links_top_landmarks_decorator_dialog",dependencies:["hcom.gadgets.queryform.modules.queryform"],impl:function(B){var A;A=function(D,C){this.config=$.extend({},A.DEFAULTS,C);this.$form=$(this.config.formSelector);A.superclass.constructor.call(this,D,this.$form.length?this.config:{});if(this.forceDatedSearchEnabled===null){this.forceDatedSearchEnabled=true;this.forceDatedSearchGoToSearchResult=true}this.$close=$(this.config.closeSelector,this.$form);this.init()};A.prototype={init:function(){if(this.$form.length){$("#holding").addClass("holding-black");this.$scrollableContainer=$(this.config.scrollableContainer,this.$form);this.$scrollableContainer.tinyscrollbar();this.$submitButton=$(this.config.submitButton,this.$form);this.$titleText=$(this.config.titleTextSelector,this.$form);$.win.on("interstitial.resized",$.proxy(function(){this.$scrollableContainer.tinyscrollbar_update()},this));this.$close.on("click",$.proxy(function(C){this.close(C)},this));this.$form.find("[name='resolvedLocation']").remove()}},open:function(C){var D="";A.superclass.open.call(this,C);if(this.$form.length){D=$.trim(this.$source.text());if(!D&&this.$source.closest(".hotels_by_location").length){D=$.trim(this.$source.closest(".hotels_by_location").find("a.overlay").text())}if(!D&&this.$source.length){D=$.trim(this.$source.closest(".result").find(".details h3 a").text())}if(!D){this.$source=$(C.target).closest(".hcomCheckAvailability");D=$.trim(this.$source.closest(".details").find("h3 a").text())}this.$titleText.text(D).attr("title",D);$.win.trigger("interstitial.resized")}},convertForm:function(){this.$form.find("input[name='searchParams.arrivalDate']").attr("name","arrivalDate");this.$form.find("input[name='searchParams.departureDate']").attr("name","departureDate");this.$form.find("input[name='rooms']").attr("name","numberOfRooms");this.$form.find("[name^='searchParams.rooms']").each(function(D,F){var E=$(F),C=E.attr("name");E.attr("name","roomInfoList"+C.substring(C.indexOf("[")))})},attachEvents:function(){if(this.$form.length){this.$submitButton.on("click",$.proxy(function(C){C.preventDefault();this.convertForm();this.submitForm(C)},this))}A.superclass.attachEvents.call(this)}};A.DEFAULTS={submitButton:"#btn_search_submit_int",titleTextSelector:".title-text",scrollableContainer:"#scrollbar1",formSelector:"#searchForm_int",closeSelector:".close-icon",flexibleDatesSelector:"#flexible_chk_int"};return A}});$.registerModule({name:"hcom.common.modules.overlay",impl:function(){return{init:function(){var B=$(".cont-overlay"),F,A,E,D;function C(G){G.preventDefault();B.hide();F.hide()}if(B.length){F=$('<div id="cont-overlay-mask" class="cont-overlay-mask"></div>').appendTo($.body);D=B.length;while(D-->0){A=B.eq(D);E=$('<span class="cont-overlay-close sprite-icon-close"></span>').appendTo(A);A.css("z-index",F.css("z-index")+1);if(A.hasClass("cont-visible")){F.show()}A.on("click",".cont-overlay-close, .cont-overlay-cancel",C)}}}}}});$.registerModule({name:"hcom.common.modules.fb_buttons",impl:function(A){return{init:function(){var E=$(".facebook-login-btn"),D,B;function C(){hcom.common.modules.sitecatalyst.sendPartialReport({prop33:"FB Signin selected",eVar33:"FB Signin selected",events:null},null," ")}if(E){D=$("#profileModel")[0];B=$("#signInModel")[0];E.on("click",function(){if(D){D.reset()}else{if(B){B.reset()}}C()})}}}}});$.registerModule({name:"hcom.gadgets.modules.hotel_comparison_dockingbar.common",dependencies:["hcom.gadgets.modules.hotel_comparison_dockingbar.sitecatalyst"],impl:function(O){var Z,Y,l,m,h,X,C,B,i,U=200,Q,n,N=new hcom.common.modules.listener(),A,c,k,b,P=!Object.getReferenceToNestedName("window.localStorage.isHotelAdd2SL"),a=typeof Touch!=="undefined",F="disabled",H="resize.dockingbar",e=hcom.locale.direction==="RTL",L=false;function J(){var p=Y.outerWidth(true),o=X.width(),u=X.scrollLeft(),r=C.add(B),q="addClass",t="removeClass";if(e&&$.browser.webkit){u=u-Y.width()+o}else{if(e&&$.browser.msie){u*=-1}}if(!e&&u<10){X.scrollLeft(0);u=0}if(e){p-=$.browser.msie?5:0;if(p+u>o||u<0){r.show()}else{if(p+u<=o&&u>=0){r.hide()}}C[p+u>o?t:q](F);B[u<0?t:q](F)}else{if(u>0||p-u>o){r.show()}else{if(u<=0&&p-u<=o){r.hide()}}C[u>0?t:q](F);B[p-u>o?t:q](F)}}function S(p){p=e&&$.browser.msie?!p:p;var o=X.scrollLeft()+181*3*(p?-1:1);if(e){X.animate({scrollLeft:o},300,J)}else{X.animate({scrollLeft:X.scrollLeft()+181*3*(p?-1:1)},300,J)}}k=function(r){var q=Z.outerHeight(true),p=".shortlist_link",o=$(r.target);if(o.is("#db-compare-link")||o.is(p)||o.parent().is(p)){return }if(!Z.hasClass("opened")){Z.addClass("opened");m.animate({bottom:0},U);if(i>0){n.show();Z.removeClass("empty")}J();hcom.gadgets.modules.hotel_comparison_dockingbar.sitecatalyst.toggleShortlistDockingBar(true);if(window.localStorage){window.localStorage.isSLOpened=1}}else{m.animate({bottom:-m.outerHeight()},U,function(){Z.removeClass("opened")});n.hide();hcom.gadgets.modules.hotel_comparison_dockingbar.sitecatalyst.toggleShortlistDockingBar(false);if(window.localStorage){delete window.localStorage.isSLOpened}}return false};function V(r,t){var q=c.urlBase+"?",p=[],o=0;$.each(Q[r].hotels,function(){o++;return false});if(o>0){$(">li",t).each(function(){p.push($(this).attr("id").replace(/\D+/,""))});if(p.length){if(!!Q.compareParams.arrivalDate){q+=c.paramArrivalDate+"="+Q.compareParams.arrivalDate+"&"}if(!!Q.compareParams.departureDate){q+=c.paramDepartureDate+"="+Q.compareParams.departureDate+"&"}if(!!Q.compareParams.rooms){q+=c.paramRoomList+"="+Q.compareParams.rooms+"&"}q+=c.paramHotelIds+"="+p.join(",")}else{q=""}}return q}function R(o){$.ajax({url:$.format(A.removeHotelUrl,o,"default"),dataType:"json",type:"GET",success:function(p){console.debug("Hotel("+o+") successfully removed from the saved hotel list.")},error:function(p,r,q){console.error("Error occured during the removal of hotel: "+o)}})}function G(){var o=1;Y.find(".count").each(function(){$(this).text(o++)});Y.add(h).css("width",181*i);J()}function W(u,r){var q=Q.shortlisted,p,t,w=$("#shortlist_"+u),v,o;if(q.hotels[u]){o=q.hotels[u];delete q.hotels[u];$("li[id$="+u+"]",Y).remove();i--;if(i===0){n.hide();Z.addClass("empty")}l.text(i);G();R(u);v=V("shortlisted",Y);n.attr("href",v)}w.find(".shortlist_link").removeClass("js_inline_hidden").end().find(".shortlisted").addClass("js_inline_hidden").removeClass("saved");hcom.gadgets.modules.hotel_comparison_dockingbar.sitecatalyst.hotelRemovedFromShortlistDockingBar(o)}function M(p){var o=$(this).parents("li:first").attr("id").replace(/^[^\d]+(\d+)$/,"$1");if(o!==undefined){W(o)}p.preventDefault();p.stopPropagation()}function T(t){var r=$(this),o="shortlist docking bar shortlist|"+(r.index()+1)+"|na|na",p="&clickReport=S_PROP_6="+o+";S_EVAR_46="+o,q=r.find(".li-inner>a");q.attr("href",q.attr("href")+p)}function f(u,q){var p=Q.shortlisted.hotels,v,t;if(!p[u.id]||!p[u.id].added){v=$($.format(Q.templates.shortlisted_li,u.id,u.url,u.thumb.replace(/_t/,"_e"),u.name,u.star_rating<0?"":(u.star_rating<1?Q.templates.no_star_rating:$.format(Q.templates.star_rating,u.id,u.url,u.star_rating*2))));if(u.append===true){Y.append(v)}else{Y.prepend(v)}v.find(".hotel-name").textOverflow({title:true});v.find("img").bind("error",function(){$(this).attr("src",u.thumb).addClass("centered")}).addClass(u.thumb.match(/_t|_e/)?"":"centered");if(i++<1){Z.removeClass("empty");if(Z.hasClass("opened")){n.show()}else{m.css("bottom","-"+m.css("height"))}}if($("li",Y).size()>hcom.gadgets.hotel_comparison.dockingbar.maxHotelsPerShortlist){var o,r;if(u.append===true){o=Y.find("li").first()}else{o=Y.find("li").last()}r=o.attr("id").replace(/^[^\d]+(\d+)$/,"$1");$("#shortlist_"+r).find(".shortlist_link").removeClass("js_inline_hidden").end().find(".shortlisted").addClass("js_inline_hidden").removeClass("saved");o.remove();i--;G()}if(Z.hasClass("opened")){if(q&&P){P=false;if(window.localStorage){window.localStorage.isHotelAdd2SL=1}}}else{if(q&&P){k({target:null});P=false;if(window.localStorage){window.localStorage.isHotelAdd2SL=1}}}l.text(i);G();u.added=true;p[u.id]=u;t=V("shortlisted",Y);n.attr("href",t);if(q){hcom.gadgets.modules.hotel_comparison_dockingbar.sitecatalyst.hotelAddedToShortlistDockingBar(u)}}}function I(o){if(!!Z&&Z.length){Z.remove()}Z=$(o.dockingbarContent);$.body.append(Z);Q=o.dockingbarData;A=o.dockingbarSettings;c=A.compare;if(!Q.shortlisted.hotels){Q.shortlisted.hotels={};$.each(Q.shortlisted.hotelsArray,function(){Q.shortlisted.hotels[this.id]=this})}m=Z.addClass("empty").find(".content");X=Z.find(".scroll-area");C=Z.find("#db-scroll-left");B=Z.find("#db-scroll-right");Y=m.find(".hotel-list");h=Z.find(".polaroids");n=$("#db-compare-link").attr("href",V("shortlisted",Y));l=Z.find(".count");i=0;$.each(Q.shortlisted.hotelsArray,function(p){this.append=true;f(this,false)});Z.animate({bottom:0},U)}function j(){Z.delegate("*","click",function(p){if(!$(p.target).is(".hotel-name,.li-inner>a")){p.preventDefault();p.stopPropagation();return false}});Z.find(".pad-control,.db-close").click(k);n.click(function(q){hcom.gadgets.modules.hotel_comparison_dockingbar.sitecatalyst.compareShortlistedHotelsLinkClicked();q.preventDefault();q.stopPropagation();var p=this;setTimeout(function(){location.href=$(p).attr("href")},100)});Z.delegate("img,a","mousedown",function(p){p.preventDefault()});$(".search_primary").delegate(".hotel_description","mouseenter mouseleave",function(r){var q=$(this),p=q.parent().hasClass("top_offer");$(p?q.parent()[0]:this)[r.type.match(/enter/)?"addClass":"removeClass"](p?"shd":"db-shd")});Y.delegate(".del","click",M);Y.delegate("li","click",T);$("#db-scroll-left").click(function(){S(true)});$("#db-scroll-right").click(function(){S()});$.win.unbind(H).bind(H,J).trigger(H);function o(p,q){$.ajax({url:p,dataType:"json",type:"GET",success:function(r){if(!!r&&(!!r.hotelId)&&(r.hotelId!=="")){W(r.hotelId)}f({id:$(".id",q).html(),supplierName:$(".supplierName",q).html(),supplierId:$(".supplierId",q).html(),supplierPropertyId:$(".supplierPropertyId",q).html(),destinationName:$(".destinationName",q).html(),name:$(".name",q).html(),star_rating:$(".star_rating",q).html(),thumb:$(".thumb",q).html(),url:$(".url",q).html(),append:false},true)}})}$("#g").delegate("a.shortlist_link","click",function(AH){var AA=$(this),AG=AA.attr("href"),AC=AA.offset(),r,y,w,t,u,AB,AI=$(">.hotel_data",AA);AA.addClass("js_inline_hidden").parent(".shortlist_cont").find(".shortlisted").removeClass("js_inline_hidden").addClass("loaded saved");var p=$.win.scrollTop(),AD=$.win.scrollLeft(),AF=500,AJ=$.browser.msie?15:25,z,AE,q=0,x,v;v=function(){if(!x){x=setInterval(v,~~(AF/AJ))}else{var AK=AE[0].style;q++;AK.height=(z.origHeight+q*z.height)+"px";AK.width=(z.origWidth+q*z.width)+"px";AK.top=(z.origTop+q*z.top)+"px";AK.left=(z.origLeft+q*z.left)+"px";if($.browser.msie){AK.filter="alpha(opacity="+((1-q*z.opacity)*100)+")"}else{AK.opacity=1-q*z.opacity}if(q>=AJ){clearInterval(x);AE.remove();o(AG,AI)}}};y=AA.parents("li:first").find("a[id*=hotelDetailsPhoto]>img");if(!y[0]){y=$("<img/>").attr("src",$.trim(AI.find(".thumb").text())).appendTo($.body).css({left:AC.left,margin:"-32px 0 0 -32px",position:"absolute",top:AC.top});r=1}w=y.offset();t=y.height();u=y.width();AB=m.offset();AE=r?y:y.clone();AE.appendTo($.body).css({position:"fixed",height:t,width:u,top:w.top-p,left:w.left-AD,zIndex:9000});z={origHeight:t,origWidth:u,origTop:w.top-p,origLeft:w.left-AD,height:-(t-20)/AJ,width:-(u-20)/AJ,opacity:0.8/AJ,top:(AB.top+m.height()/2-10-w.top)/AJ,left:(AB.left+m.width()/2-10-w.left)/AJ};v();AH.preventDefault()})}function g(){if(b){i=0;$.ajax({url:hcom.gadgets.hotel_comparison.dockingbar.url,dataType:"json",type:"GET",success:function(o){I(o);j();N.fireEvent(o);L=true;if(window.localStorage&&window.localStorage.isSLOpened){k({target:null})}}})}}function D(){if(typeof Q!=="undefined"&&typeof Q.shortlisted!=="undefined"&&typeof Q.shortlisted.hotels!=="undefined"){return Q.shortlisted.hotels}else{return{}}}function E(o){if(!!o){Q.compareParams=o.compareParams;$.each(o.shortlisted.hotelsArray,function(){var q=this;Y.find("li[id$="+q.id+"] a:has(img)").attr("href",q.url)});var p=V("shortlisted",Y);n.attr("href",p)}}function d(){if(b&&L){$.ajax({url:hcom.gadgets.hotel_comparison.dockingbar.url+"&"+c.paramUpdateRequest+"=true",dataType:"json",type:"GET",success:function(o){E(o)}})}}function K(){var q=!a&&(!$.browser.msie||$.browser.version>=7),o=Object.getReferenceToNestedName("hcom.gadgets.hotel_comparison.dockingbar.enabled"),p;b=q&&(o==="true"||o);g();if(a){$(".shortlist_cont").remove();p=Object.getReferenceToNestedName("hcom.search.modules.core");if(p){p.addContentReloadedListener(O,function(){$(".shortlist_cont").remove()})}}}return{addHotel:f,removeHotel:W,initDockingBar:K,init:function(){K()},isEnabled:function(){return !!b},addDockingBarLoadedListener:function(o){N.addListener(O,o)},updateDockingBar:d,getShortlistedHotels:D}}});$.registerModule({name:"hcom.gadgets.modules.hotel_comparison_dockingbar.sitecatalyst",impl:function(C){function E(H){var G={};G.events="event41";G.products=H.supplierName+";"+H.supplierId+":"+H.supplierPropertyId;hcom.common.modules.sitecatalyst.sendPartialReport(G,null,"hotel added to shortlist docking bar")}function B(H){var G={};G.events="event42";G.products=H.supplierName+";"+H.supplierId+":"+H.supplierPropertyId;hcom.common.modules.sitecatalyst.sendPartialReport(G,null,"hotel removed from shortlist docking bar")}function D(H){var G={};var I;if(H){G.eVar33="Shortlist enabled";G.prop33="Shortlist enabled";I="shortlist docking bar enabled"}else{G.eVar33="Shortlist disabled";G.prop33="Shortlist disabled";I="shortlist docking bar disabled"}hcom.common.modules.sitecatalyst.sendPartialReport(G,null,I)}function A(){var G={};G.eVar33="Compare Shortlisted Hotels";G.prop33="Compare Shortlisted Hotels";hcom.common.modules.sitecatalyst.sendPartialReport(G,null,"compare shortlisted hotels clicked")}function F(){var G={};G.eVar33="Compare Recently Viewed Hotels";G.prop33="Compare Recently Viewed Hotels";hcom.common.modules.sitecatalyst.sendPartialReport(G,null,"compare recently viewed hotels clicked")}return{hotelAddedToShortlistDockingBar:E,hotelRemovedFromShortlistDockingBar:B,toggleShortlistDockingBar:D,compareShortlistedHotelsLinkClicked:A,compareRecentlyViewedHotelsLinkClicked:F}}});