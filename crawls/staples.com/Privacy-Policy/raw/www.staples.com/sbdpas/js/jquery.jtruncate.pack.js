(function(b){b.fn.jTruncate=function(a){var d={length:300,minTrail:20,moreText:"more",lessText:"less",ellipsisText:"...",moreAni:"",lessAni:""};var a=b.extend(d,a);return this.each(function(){obj=b(this);var p=b.trim(obj.html());if(p.length>a.length+a.minTrail){var o=p.indexOf(" ",a.length);if(o!=-1){var o=p.indexOf(" ",a.length);var n=p.substring(0,o);var m=p.substring(o,p.length);obj.html(n+'<span class="truncateEllipsis">'+a.ellipsisText+'</span><span class="truncateMore">'+m+"</span>");obj.find(".truncateMore").css("display","none");obj.append('<span class="moreLessLink"><a href="#" class="truncateMoreLink">'+a.moreText+"</a></span>");var l=b(".truncateMoreLink",obj);var k=b(".truncateMore",obj);var j=b(".truncateEllipsis",obj);l.click(function(){if(l.text()==a.moreText){k.show(a.moreAni);l.text(a.lessText);j.css("display","none");l.addClass("truncateHideLink");}else{k.hide(a.lessAni);l.text(a.moreText);j.css("display","inline");l.removeClass("truncateHideLink");}return false;});}}});};})(jQuery);