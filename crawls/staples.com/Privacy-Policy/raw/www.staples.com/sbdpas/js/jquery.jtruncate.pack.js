(function(a){a.fn.jTruncate=function(b){var c={length:300,minTrail:20,moreText:"more",lessText:"less",ellipsisText:"...",moreAni:"",lessAni:""};var b=a.extend(c,b);return this.each(function(){obj=a(this);var c=a.trim(obj.html());if(c.length>b.length+b.minTrail){var d=c.indexOf(" ",b.length);if(d!=-1){var d=c.indexOf(" ",b.length);var e=c.substring(0,d);var f=c.substring(d,c.length);obj.html(e+'<span class="truncateEllipsis">'+b.ellipsisText+"</span>"+'<span class="truncateMore">'+f+"</span>");obj.find(".truncateMore").css("display","none");obj.append('<span class="moreLessLink">'+'<a href="#" class="truncateMoreLink">'+b.moreText+"</a>"+"</span>");var g=a(".truncateMoreLink",obj);var h=a(".truncateMore",obj);var i=a(".truncateEllipsis",obj);g.click(function(){if(g.text()==b.moreText){h.show(b.moreAni);g.text(b.lessText);i.css("display","none");g.addClass("truncateHideLink")}else{h.hide(b.lessAni);g.text(b.moreText);i.css("display","inline");g.removeClass("truncateHideLink")}return false})}}})}})(jQuery)