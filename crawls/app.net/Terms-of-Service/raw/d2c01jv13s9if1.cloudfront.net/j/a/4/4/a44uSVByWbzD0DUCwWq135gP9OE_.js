var Sentry,QRMode,QRErrorCorrectLevel,QRMaskPattern,QRUtil,QRMath,i;function get_img_url(e){return window.image_map[e]?page_context.autochrome_img_url_base+window.image_map[e]:(console.log("get_img_url failed for",e),!1)}function QR8bitByte(e){this.mode=QRMode.MODE_8BIT_BYTE,this.data=e}function QRCode(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=Array()}function QRPolynomial(e,t){var n,i;if(void 0==e.length)throw Error(e.length+"/"+t);for(n=0;e.length>n&&0==e[n];)n++;for(this.num=Array(e.length-n+t),i=0;e.length-n>i;i++)this.num[i]=e[i+n]}function QRRSBlock(e,t){this.totalCount=e,this.dataCount=t}function QRBitBuffer(){this.buffer=Array(),this.length=0}window.image_map=window.image_map||{},$.extend(window.image_map,{}),function(){var e,t;jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=jQuery.uaMatch(navigator.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),jQuery.browser=t,jQuery.sub=function(){function e(t,n){return new e.fn.init(t,n)}jQuery.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof jQuery&&!(i instanceof e)&&(i=e(i)),jQuery.fn.init.call(this,n,i,t)},e.fn.init.prototype=e.fn;var t=e(document);return e}}(),window.console===void 0&&(window.console={log:function(){return!0}}),window.TAPP===void 0&&(window.TAPP={}),TAPP.jQuery=jQuery,$._ajax=$.ajax,$.ajax=function(e){var t=e.success;return e.success=function(e,n,i){var r=e&&e.result?e.result:null,o=e&&e.value?e.value:"ajax failed",a=e&&e.text?e.text:"ajax failed";return r&&"ok"!==r?(this.error&&this.error(i,o,a),void 0):(t&&t.apply(this,[e,n,i]),void 0)},$._ajax(e)},function(){var e,t;e=function(){var e,t,n;return e=-1,"Microsoft Internet Explorer"===navigator.appName&&(t=navigator.userAgent,n=/MSIE ([0-9]{1,}[\.0-9]{0,})/,null!==n.exec(t)&&(e=parseFloat(RegExp.$1))),e},t=e(),-1!==t&&(t=(""+t).replace(/\./g,"_"),$("html").addClass("ie v"+t+"_0"))}(),window.refresh_page_context=function(e){var t,n;t=document.getElementById("adn-page-context"),t&&(n=t.getAttribute("data-adn-page-context"),window.page_context=JSON.parse(n)),window.pjax_context=e||{}},window.refresh_page_context(),function(e){e.authedAjax=function(t){var n,i,r,o,a,s,c,l;return n={no_login_required:!1,user_action:!0},t=e.extend({},n,t),i=t.event_tracking,r=t.success||e.noop,o=t.error||e.noop,a=t.complete||e.noop,t.user_action&&(page_context.user_actions_complete=!1),s=function(e,n,i){e&&(r(n),t.user_action&&(page_context.user_actions_complete=!0)),e||o(n,i),a(n,i)},(c=!page_context.is_authenticated&&!t.no_login_required)?(l=function(n){var r,o,a;r=n?i.name_for_success:i.name_for_failure,o=function(){n?e.authedAjax(t):s(!1,null,"authentication failed")},i?(a=_.map(e.makeArray(r),function(e){return[e,i.properties]}),e.waitForFuncs(a,TAPP.event_tracking.fire_off_event,o)):o()},TAPP.auth.start_login_process(l),void 0):(page_context&&(page_context.auth_use_xdm?TAPP.wakea.send_to_provider("ajax",[t],s):e.ajax(t)),void 0)}}(jQuery),function(){var e,t;e=$(window),t=function(){return 480>=e.width()},TAPP.is_narrow=t(),e.on("resize",function(){TAPP.is_narrow=t()})}(),function(){TAPP.in_iframe=!1;try{top.location.href!==window.location.href&&(TAPP.in_iframe=!0)}catch(e){TAPP.in_iframe=!0}}(),function(){var e,t,n;e=[],t=[],n=[],$.fn.tapp_on=function(t,n,i,r){return e.push([this,t,n]),this.on(t,n,i,r)},$.tapp_subscribe=function(e,n){var i=$.subscribe(e,n);return t.push(i),i},TAPP.setInterval=function(e,t){var i=setInterval(e,t);return n.push(i),i},TAPP.clearInterval=function(e){$.map(n,function(t){return e===t?null:t})},TAPP.clear_event_handles=function(){$.each(e,function(e,t){$(t[0]).off(t[1],t[2])})},TAPP.clear_subscribe_handles=function(){$.each(t,function(e,t){$.unsubscribe(t)})},TAPP.clear_intervals=function(){$.each(n,function(){clearInterval(this)})},TAPP.unload=function(){TAPP.clear_event_handles(),TAPP.clear_subscribe_handles(),TAPP.clear_intervals()},TAPP.lock_up=function(e,t){t=t||"click";var n=function(e){e.preventDefault(),e.stopImmediatePropagation()};return e.on(t,n),function(){setTimeout(function(){e.off(t,n)},0)}}}(),function(){$.waitForFuncs=function(e,t,n){var i=[];$.each(e,function(e,n){var r=$.Deferred();i.push(r),n.push(function(){r.resolve()}),t.apply(this,n)}),$.when.apply(this,i).done(n)}}(),page_context&&page_context.br_page_name&&(window.BOOMR.init({beacon_url:"/s/boomerang",BW:{enabled:!1}}),window.BOOMR.addVar("page_name",page_context.br_page_name)),function(){TAPP.initialize_widget_code=function(){("dev"===page_context.environment||"sandbox"===page_context.environment)&&(window.APP_NET_SETTINGS=page_context.widget_overrides);var e={post_load_scripts:window.TAPP_CDN_JS_ASSETS,wakea_remote_url:"https://app.net/wakea/widget/",widget_base_url:"https://app.net/w/el/",data_attr_prefix:"data-an-"};TAPP.settings||(TAPP.settings=TAPP.jQuery.extend({},e,window.APP_NET_SETTINGS)),$.each(page_context.widget_post_load_urls,function(){$("<script />").attr({type:"text/javascript",src:this}).appendTo("body")})}}(),$(document).ajaxSend(function(e,t,n){"POST"===n.type&&t.setRequestHeader("Cache-Control","no-cache")}),function(){var e,t,n,i,r,o,a,s,c,l,u,d,h,p,f,g,m,v,_,b,w,y,x,P,C,k,T,A,S,$,R;function E(e,t,n){var i,r,o,a,s;if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;if(e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped),e.isEqual&&P.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&P.isFunction(t.isEqual))return t.isEqual(e);if(i=l.call(e),i!=l.call(t))return!1;switch(i){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(r=n.length;r--;)if(n[r]==e)return!0;if(n.push(e),o=0,a=!0,"[object Array]"==i){if(o=e.length,a=o==t.length)for(;o--&&(a=o in e==o in t&&E(e[o],t[o],n)););}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return!1;for(s in e)if(u.call(e,s)&&(o++,!(a=u.call(t,s)&&E(e[s],t[s],n))))break;if(a){for(s in t)if(u.call(t,s)&&!o--)break;a=!o}}return n.pop(),a}e=this,t=e._,n={},i=Array.prototype,r=Object.prototype,o=Function.prototype,a=i.slice,s=i.concat,c=i.unshift,l=r.toString,u=r.hasOwnProperty,d=i.forEach,h=i.map,p=i.reduce,f=i.reduceRight,g=i.filter,m=i.every,v=i.some,_=i.indexOf,b=i.lastIndexOf,w=Array.isArray,y=Object.keys,x=o.bind,P=function(e){return new S(e)},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=P),exports._=P):"function"==typeof define&&define.amd?define("underscore",function(){return P}):e._=P,P.VERSION="1.2.3",C=P.each=P.forEach=function(e,t,i){var r,o,a;if(null!=e)if(d&&e.forEach===d)e.forEach(t,i);else if(e.length===+e.length){for(r=0,o=e.length;o>r;r++)if(r in e&&t.call(i,e[r],r,e)===n)return}else for(a in e)if(u.call(e,a)&&t.call(i,e[a],a,e)===n)return},P.map=function(e,t,n){var i=[];return null==e?i:h&&e.map===h?e.map(t,n):(C(e,function(e,r,o){i[i.length]=t.call(n,e,r,o)}),i)},P.reduce=P.foldl=P.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return i&&(t=P.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(C(e,function(e,o,a){r?n=t.call(i,n,e,o,a):(n=e,r=!0)}),!r)throw new TypeError("Reduce of empty array with no initial value");return n},P.reduceRight=P.foldr=function(e,t,n,i){var r,o;return r=arguments.length>2,null==e&&(e=[]),f&&e.reduceRight===f?(i&&(t=P.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t)):(o=P.toArray(e).reverse(),i&&!r&&(t=P.bind(t,i)),r?P.reduce(o,t,n,i):P.reduce(o,t))},P.find=P.detect=function(e,t,n){var i;return k(e,function(e,r,o){return t.call(n,e,r,o)?(i=e,!0):void 0}),i},P.filter=P.select=function(e,t,n){var i=[];return null==e?i:g&&e.filter===g?e.filter(t,n):(C(e,function(e,r,o){t.call(n,e,r,o)&&(i[i.length]=e)}),i)},P.reject=function(e,t,n){var i=[];return null==e?i:(C(e,function(e,r,o){t.call(n,e,r,o)||(i[i.length]=e)}),i)},P.every=P.all=function(e,t,i){var r=!0;return null==e?r:m&&e.every===m?e.every(t,i):(C(e,function(e,o,a){return(r=r&&t.call(i,e,o,a))?void 0:n}),r)},k=P.some=P.any=function(e,t,i){t||(t=P.identity);var r=!1;return null==e?r:v&&e.some===v?e.some(t,i):(C(e,function(e,o,a){return r||(r=t.call(i,e,o,a))?n:void 0}),!!r)},P.include=P.contains=function(e,t){var n=!1;return null==e?n:_&&e.indexOf===_?-1!=e.indexOf(t):n=k(e,function(e){return e===t})},P.invoke=function(e,t){var n=a.call(arguments,2);return P.map(e,function(e){return(t.call?t||e:e[t]).apply(e,n)})},P.pluck=function(e,t){return P.map(e,function(e){return e[t]})},P.max=function(e,t,n){if(!t&&P.isArray(e))return Math.max.apply(Math,e);if(!t&&P.isEmpty(e))return-1/0;var i={computed:-1/0};return C(e,function(e,r,o){var a=t?t.call(n,e,r,o):e;a>=i.computed&&(i={value:e,computed:a})}),i.value},P.min=function(e,t,n){if(!t&&P.isArray(e))return Math.min.apply(Math,e);if(!t&&P.isEmpty(e))return 1/0;var i={computed:1/0};return C(e,function(e,r,o){var a=t?t.call(n,e,r,o):e;i.computed>a&&(i={value:e,computed:a})}),i.value},P.shuffle=function(e){var t,n=[];return C(e,function(e,i){0==i?n[0]=e:(t=Math.floor(Math.random()*(i+1)),n[i]=n[t],n[t]=e)}),n},P.sortBy=function(e,t,n){return P.pluck(P.map(e,function(e,i,r){return{value:e,criteria:t.call(n,e,i,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;return i>n?-1:n>i?1:0}),"value")},P.groupBy=function(e,t){var n,i;return n={},i=P.isFunction(t)?t:function(e){return e[t]},C(e,function(e,t){var r=i(e,t);(n[r]||(n[r]=[])).push(e)}),n},P.sortedIndex=function(e,t,n){var i,r,o;for(n||(n=P.identity),i=0,r=e.length;r>i;)o=i+r>>1,n(t)>n(e[o])?i=o+1:r=o;return i},P.toArray=function(e){return e?e.toArray?e.toArray():P.isArray(e)?a.call(e):P.isArguments(e)?a.call(e):P.values(e):[]},P.size=function(e){return P.toArray(e).length},P.first=P.head=function(e,t,n){return null==t||n?e[0]:a.call(e,0,t)},P.initial=function(e,t,n){return a.call(e,0,e.length-(null==t||n?1:t))},P.last=function(e,t,n){return null==t||n?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},P.rest=P.tail=function(e,t,n){return a.call(e,null==t||n?1:t)},P.compact=function(e){return P.filter(e,function(e){return!!e})},P.flatten=function(e,t){return P.reduce(e,function(e,n){return P.isArray(n)?e.concat(t?n:P.flatten(n)):(e[e.length]=n,e)},[])},P.without=function(e){return P.difference(e,a.call(arguments,1))},P.uniq=P.unique=function(e,t,n){var i,r;return i=n?P.map(e,n):e,r=[],P.reduce(i,function(n,i,o){return 0!=o&&(t===!0?P.last(n)==i:P.include(n,i))||(n[n.length]=i,r[r.length]=e[o]),n},[]),r},P.union=function(){return P.uniq(P.flatten(arguments,!0))},P.intersection=P.intersect=function(e){var t=a.call(arguments,1);return P.filter(P.uniq(e),function(e){return P.every(t,function(t){return P.indexOf(t,e)>=0})})},P.difference=function(e){var t=P.flatten(a.call(arguments,1));return P.filter(e,function(e){return!P.include(t,e)})},P.zip=function(){var e,t,n,i;for(e=a.call(arguments),t=P.max(P.pluck(e,"length")),n=Array(t),i=0;t>i;i++)n[i]=P.pluck(e,""+i);return n},P.indexOf=function(e,t,n){if(null==e)return-1;var i,r;if(n)return i=P.sortedIndex(e,t),e[i]===t?i:-1;if(_&&e.indexOf===_)return e.indexOf(t);for(i=0,r=e.length;r>i;i++)if(i in e&&e[i]===t)return i;return-1},P.lastIndexOf=function(e,t){if(null==e)return-1;if(b&&e.lastIndexOf===b)return e.lastIndexOf(t);for(var n=e.length;n--;)if(n in e&&e[n]===t)return n;return-1},P.range=function(e,t,n){var i,r,o;for(1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1,i=Math.max(Math.ceil((t-e)/n),0),r=0,o=Array(i);i>r;)o[r++]=e,e+=n;return o},T=function(){},P.bind=function(e,t){var n,i;if(e.bind===x&&x)return x.apply(e,a.call(arguments,1));if(!P.isFunction(e))throw new TypeError;return i=a.call(arguments,2),n=function(){var r,o;return this instanceof n?(T.prototype=e.prototype,r=new T,o=e.apply(r,i.concat(a.call(arguments))),Object(o)===o?o:r):e.apply(t,i.concat(a.call(arguments)))}},P.bindAll=function(e){var t=a.call(arguments,1);return 0==t.length&&(t=P.functions(e)),C(t,function(t){e[t]=P.bind(e[t],e)}),e},P.memoize=function(e,t){var n={};return t||(t=P.identity),function(){var i=t.apply(this,arguments);return u.call(n,i)?n[i]:n[i]=e.apply(this,arguments)}},P.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(e,n)},t)},P.defer=function(e){return P.delay.apply(P,[e,1].concat(a.call(arguments,1)))},P.throttle=function(e,t){var n,i,r,o,a,s;return s=P.debounce(function(){a=o=!1},t),function(){n=this,i=arguments;var c=function(){r=null,a&&e.apply(n,i),s()};r||(r=setTimeout(c,t)),o?a=!0:e.apply(n,i),s(),o=!0}},P.debounce=function(e,t){var n;return function(){var i,r,o;i=this,r=arguments,o=function(){n=null,e.apply(i,r)},clearTimeout(n),n=setTimeout(o,t)}},P.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments))}},P.wrap=function(e,t){return function(){var n=s.apply([e],arguments);return t.apply(this,n)}},P.compose=function(){var e=arguments;return function(){var t,n;for(t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},P.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},P.keys=y||function(e){var t,n;if(e!==Object(e))throw new TypeError("Invalid object");t=[];for(n in e)u.call(e,n)&&(t[t.length]=n);return t},P.values=function(e){return P.map(e,P.identity)},P.functions=P.methods=function(e){var t,n;t=[];for(n in e)P.isFunction(e[n])&&t.push(n);return t.sort()},P.extend=function(e){return C(a.call(arguments,1),function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}),e},P.defaults=function(e){return C(a.call(arguments,1),function(t){for(var n in t)null==e[n]&&(e[n]=t[n])}),e},P.clone=function(e){return P.isObject(e)?P.isArray(e)?e.slice():P.extend({},e):e},P.tap=function(e,t){return t(e),e},P.isEqual=function(e,t){return E(e,t,[])},P.isEmpty=function(e){if(P.isArray(e)||P.isString(e))return 0===e.length;for(var t in e)if(u.call(e,t))return!1;return!0},P.isElement=function(e){return!(!e||1!=e.nodeType)},P.isArray=w||function(e){return"[object Array]"==l.call(e)},P.isObject=function(e){return e===Object(e)},P.isArguments=function(e){return"[object Arguments]"==l.call(e)},P.isArguments(arguments)||(P.isArguments=function(e){return!(!e||!u.call(e,"callee"))}),P.isFunction=function(e){return"[object Function]"==l.call(e)},P.isString=function(e){return"[object String]"==l.call(e)},P.isNumber=function(e){return"[object Number]"==l.call(e)},P.isNaN=function(e){return e!==e},P.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==l.call(e)},P.isDate=function(e){return"[object Date]"==l.call(e)},P.isRegExp=function(e){return"[object RegExp]"==l.call(e)},P.isNull=function(e){return null===e},P.isUndefined=function(e){return void 0===e},P.noConflict=function(){return e._=t,this},P.identity=function(e){return e},P.times=function(e,t,n){for(var i=0;e>i;i++)t.call(n,i)},P.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},P.mixin=function(e){C(P.functions(e),function(t){R(t,P[t]=e[t])})},A=0,P.uniqueId=function(e){var t=A++;return e?e+t:t},P.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},P.template=function(e,t){var n,i,r;return n=P.templateSettings,i="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(n.escape,function(e,t){return"',_.escape("+t.replace(/\\'/g,"'")+"),'"}).replace(n.interpolate,function(e,t){return"',"+t.replace(/\\'/g,"'")+",'"}).replace(n.evaluate||null,function(e,t){return"');"+t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",r=Function("obj","_",i),t?r(t,P):function(e){return r.call(this,e,P)}},S=function(e){this._wrapped=e},P.prototype=S.prototype,$=function(e,t){return t?P(e).chain():e},R=function(e,t){S.prototype[e]=function(){var e=a.call(arguments);return c.call(e,this._wrapped),$(t.apply(P,e),this._chain)}},P.mixin(P),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];S.prototype[e]=function(){return t.apply(this._wrapped,arguments),$(this._wrapped,this._chain)}}),C(["concat","join","slice"],function(e){var t=i[e];S.prototype[e]=function(){return $(t.apply(this._wrapped,arguments),this._chain)}}),S.prototype.chain=function(){return this._chain=!0,this},S.prototype.value=function(){return this._wrapped}}.call(this),function(e){e.Jcrop=function(t,n){var i,r,o,a,s,c,l,u,d,h,p,f,g,m,v,_,b,w,y,x,P,C,k,T,A,S,$,R,E,M,j,D,L,O,Q;function B(e){return Math.round(e)+"px"}function N(e){return r.baseClass+"-"+e}function I(){return e.fx.step.hasOwnProperty("backgroundColor")}function F(t){var n=e(t).offset();return[n.left,n.top]}function z(e){return[e.pageX-i[0],e.pageY-i[1]]}function U(t){"object"!=typeof t&&(t={}),r=e.extend(r,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof r[t]&&(r[t]=function(){})})}function H(e,t){var n,r,o;return i=F(u),L.setCursor("move"===e?e:e+"-resize"),"move"===e?L.activateHandlers(X(t),J):(n=M.getFixed(),r=G(e),o=M.getCorner(G(r)),M.setPressed(M.getCorner(r)),M.setCurrent(o),L.activateHandlers(q(e,n),J),void 0)}function q(e,t){return function(n){if(r.aspectRatio)switch(e){case"e":n[1]=t.y+1;break;case"w":n[1]=t.y+1;break;case"n":n[0]=t.x+1;break;case"s":n[0]=t.x+1}else switch(e){case"e":n[1]=t.y2;break;case"w":n[1]=t.y2;break;case"n":n[0]=t.x2;break;case"s":n[0]=t.x2}M.setCurrent(n),D.update()}}function X(e){var t=e;return O.watchKeys(),function(e){M.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,D.update()}}function G(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function K(e){return function(t){return r.disabled?!1:"move"!==e||r.allowMove?(i=F(u),T=!0,H(e,z(t)),t.stopPropagation(),t.preventDefault(),!1):!1}}function W(e,t,n){var i=e.width(),r=e.height();i>t&&t>0&&(i=t,r=t/e.width()*e.height()),r>n&&n>0&&(r=n,i=n/e.height()*e.width()),C=e.width()/i,k=e.height()/r,e.width(i).height(r)}function Y(e){return{x:e.x*C,y:e.y*k,x2:e.x2*C,y2:e.y2*k,w:e.w*C,h:e.h*k}}function J(){var e=M.getFixed();e.w>r.minSelect[0]&&e.h>r.minSelect[1]?(D.enableHandles(),D.done()):D.release(),L.setCursor(r.allowSelect?"crosshair":"default")}function V(e){if(r.disabled)return!1;if(!r.allowSelect)return!1;T=!0,i=F(u),D.disableHandles(),L.setCursor("crosshair");var t=z(e);return M.setPressed(t),D.update(),L.activateHandlers(Z,J),O.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function Z(e){M.setCurrent(e),D.update()}function et(){var t=e("<div></div>").addClass(N("tracker"));return e.browser.msie&&t.css({opacity:0,backgroundColor:"white"}),t}function tt(e){p.removeClass().addClass(N("holder")).addClass(e)}function nt(e,t){var n,i,o,a,s,c,l,u,d,h,p,f,g,m,v,_;function b(){window.setTimeout(_,d)}n=e[0]/C,i=e[1]/k,o=e[2]/C,a=e[3]/k,A||(s=M.flipCoords(n,i,o,a),c=M.getFixed(),l=[c.x,c.y,c.x2,c.y2],u=l,d=r.animationDelay,h=s[0]-l[0],p=s[1]-l[1],f=s[2]-l[2],g=s[3]-l[3],m=0,v=r.swingSpeed,n=u[0],i=u[1],o=u[2],a=u[3],D.animMode(!0),_=function(){return function(){m+=(100-m)/v,u[0]=Math.round(n+m/100*h),u[1]=Math.round(i+m/100*p),u[2]=Math.round(o+m/100*f),u[3]=Math.round(a+m/100*g),m>=99.8&&(m=100),100>m?(rt(u),b()):(D.done(),D.animMode(!1),"function"==typeof t&&t.call(Q))}}(),b())}function it(e){rt([e[0]/C,e[1]/k,e[2]/C,e[3]/k]),r.onSelect.call(Q,Y(M.getFixed())),D.enableHandles()}function rt(e){M.setPressed([e[0],e[1]]),M.setCurrent([e[2],e[3]]),D.update()}function ot(){return Y(M.getFixed())}function at(){return M.getFixed()}function st(e){U(e),ft()}function ct(){r.disabled=!0,D.disableHandles(),D.setCursor("default"),L.setCursor("default")}function lt(){r.disabled=!1,ft()}function ut(){D.done(),L.activateHandlers(null,null)}function dt(){p.remove(),s.show(),s.css("visibility","visible"),e(t).removeData("Jcrop")}function ht(e,t){D.release(),ct();var n=new Image;n.onload=function(){var i,o,a,s;i=n.width,o=n.height,a=r.boxWidth,s=r.boxHeight,u.width(i).height(o),u.attr("src",e),f.attr("src",e),W(u,a,s),d=u.width(),h=u.height(),f.width(d).height(h),b.width(d+2*_).height(h+2*_),p.width(d).height(h),j.resize(d,h),lt(),"function"==typeof t&&t.call(Q)},n.src=e}function pt(e,t,n){var i=t||r.bgColor;r.bgFade&&I()&&r.fadeTime&&!n?e.animate({backgroundColor:i},{queue:!1,duration:r.fadeTime}):e.css("backgroundColor",i)}function ft(e){r.allowResize?e?D.enableOnly():D.enableHandles():D.disableHandles(),L.setCursor(r.allowSelect?"crosshair":"default"),D.setCursor(r.allowMove?"move":"default"),r.hasOwnProperty("trueSize")&&(C=r.trueSize[0]/d,k=r.trueSize[1]/h),r.hasOwnProperty("setSelect")&&(it(r.setSelect),D.done(),delete r.setSelect),j.refresh(),r.bgColor!=$&&(pt(r.shade?j.getShades():p,r.shade?r.shadeColor||r.bgColor:r.bgColor),$=r.bgColor),R!=r.bgOpacity&&(R=r.bgOpacity,r.shade?j.refresh():D.setBgOpacity(R)),w=r.maxSize[0]||0,y=r.maxSize[1]||0,x=r.minSize[0]||0,P=r.minSize[1]||0,r.hasOwnProperty("outerImage")&&(u.attr("src",r.outerImage),delete r.outerImage),D.refresh()}return r=e.extend({},e.Jcrop.defaults),o=!1,e.browser.msie&&"6"===e.browser.version.split(".")[0]&&(o=!0),"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof n&&(n={}),U(n),a={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},s=e(t),c=!0,"IMG"==t.tagName?(0!=s[0].width&&0!=s[0].height?(s.width(s[0].width),s.height(s[0].height)):(l=new Image,l.src=s[0].src,s.width(l.width),s.height(l.height)),u=s.clone().removeAttr("id").css(a).show(),u.width(s.width()),u.height(s.height()),s.after(u).hide()):(u=s.css(a).show(),c=!1,null===r.shade&&(r.shade=!0)),W(u,r.boxWidth,r.boxHeight),d=u.width(),h=u.height(),p=e("<div />").width(d).height(h).addClass(N("holder")).css({position:"relative",backgroundColor:r.bgColor}).insertAfter(s).append(u),r.addClass&&p.addClass(r.addClass),f=e("<div />"),g=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),m=e("<div />").width("100%").height("100%").css("zIndex",320),v=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=M.getFixed();r.onDblClick.call(Q,e)}).insertBefore(u).append(g,m),c&&(f=e("<img />").attr("src",u.attr("src")).css(a).width(d).height(h),g.append(f)),o&&v.css({overflowY:"hidden"}),_=r.boundary,b=et().width(d+2*_).height(h+2*_).css({position:"absolute",top:B(-_),left:B(-_),zIndex:290}).mousedown(V),$=r.bgColor,R=r.bgOpacity,i=F(u),E=function(){function e(){var e,t,n,i,r,o;t={},n=["touchstart","touchmove","touchend"],i=document.createElement("div");try{for(e=0;n.length>e;e++)r=n[e],r="on"+r,o=r in i,o||(i.setAttribute(r,"return;"),o="function"==typeof i[r]),t[n[e]]=o;return t.touchstart&&t.touchend&&t.touchmove}catch(a){return!1}}function t(){return r.touchSupport===!0||r.touchSupport===!1?r.touchSupport:e()}return{createDragger:function(e){return function(t){return t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,r.disabled?!1:"move"!==e||r.allowMove?(T=!0,H(e,z(t)),t.stopPropagation(),t.preventDefault(),!1):!1}},newSelection:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,V(e)},isSupported:e,support:t()}}(),M=function(){function e(e){e=s(e),v=g=e[0],_=m=e[1]}function t(e){e=s(e),p=e[0]-v,f=e[1]-_,v=e[0],_=e[1]}function n(){return[p,f]}function i(e){var t=e[0],n=e[1];0>g+t&&(t-=t+g),0>m+n&&(n-=n+m),_+n>h&&(n+=h-(_+n)),v+t>d&&(t+=d-(v+t)),g+=t,v+=t,m+=n,_+=n}function o(e){var t=a();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function a(){if(!r.aspectRatio)return l();var e,t,n,i,o=r.aspectRatio,a=r.minSize[0]/C,s=r.maxSize[0]/C,p=r.maxSize[1]/k,f=v-g,b=_-m,w=Math.abs(f),y=Math.abs(b),x=w/y;return 0===s&&(s=10*d),0===p&&(p=10*h),o>x?(t=_,n=y*o,e=0>f?g-n:n+g,0>e?(e=0,i=Math.abs((e-g)/o),t=0>b?m-i:i+m):e>d&&(e=d,i=Math.abs((e-g)/o),t=0>b?m-i:i+m)):(e=v,i=w/o,t=0>b?m-i:m+i,0>t?(t=0,n=Math.abs((t-m)*o),e=0>f?g-n:n+g):t>h&&(t=h,n=Math.abs(t-m)*o,e=0>f?g-n:n+g)),e>g?(a>e-g?e=g+a:e-g>s&&(e=g+s),t=t>m?m+(e-g)/o:m-(e-g)/o):g>e&&(a>g-e?e=g-a:g-e>s&&(e=g-s),t=t>m?m+(g-e)/o:m-(g-e)/o),0>e?(g-=e,e=0):e>d&&(g-=e-d,e=d),0>t?(m-=t,t=0):t>h&&(m-=t-h,t=h),u(c(g,m,e,t))}function s(e){return 0>e[0]&&(e[0]=0),0>e[1]&&(e[1]=0),e[0]>d&&(e[0]=d),e[1]>h&&(e[1]=h),[e[0],e[1]]}function c(e,t,n,i){var r=e,o=n,a=t,s=i;return e>n&&(r=n,o=e),t>i&&(a=i,s=t),[r,a,o,s]}function l(){var e,t=v-g,n=_-m;return w&&Math.abs(t)>w&&(v=t>0?g+w:g-w),y&&Math.abs(n)>y&&(_=n>0?m+y:m-y),P/k&&P/k>Math.abs(n)&&(_=n>0?m+P/k:m-P/k),x/C&&x/C>Math.abs(t)&&(v=t>0?g+x/C:g-x/C),0>g&&(v-=g,g-=g),0>m&&(_-=m,m-=m),0>v&&(g-=v,v-=v),0>_&&(m-=_,_-=_),v>d&&(e=v-d,g-=e,v-=e),_>h&&(e=_-h,m-=e,_-=e),g>d&&(e=g-h,_-=e,m-=e),m>h&&(e=m-h,_-=e,m-=e),u(c(g,m,v,_))}function u(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var p,f,g=0,m=0,v=0,_=0;return{flipCoords:c,setPressed:e,setCurrent:t,getOffset:n,moveOffset:i,getCorner:o,getFixed:a}}(),j=function(){function t(e,t){b.left.css({height:B(t)}),b.right.css({height:B(t)})}function n(){return i(M.getFixed())}function i(e){b.top.css({left:B(e.x),width:B(e.w),height:B(e.y)}),b.bottom.css({top:B(e.y2),left:B(e.x),width:B(e.w),height:B(h-e.y2)}),b.right.css({left:B(e.x2),width:B(d-e.x2)}),b.left.css({width:B(e.x)})}function o(){return e("<div />").css({position:"absolute",backgroundColor:r.shadeColor||r.bgColor}).appendTo(_)}function a(){v||(v=!0,_.insertBefore(u),n(),D.setBgOpacity(1,0,1),f.hide(),s(r.shadeColor||r.bgColor,1),D.isAwake()?l(r.bgOpacity,1):l(1,1))}function s(e,t){pt(m(),e,t)}function c(){v&&(_.remove(),f.show(),v=!1,D.isAwake()?D.setBgOpacity(r.bgOpacity,1,1):(D.setBgOpacity(1,1,1),D.disableHandles()),pt(p,0,1))}function l(e,t){v&&(r.bgFade&&!t?_.animate({opacity:1-e},{queue:!1,duration:r.fadeTime}):_.css({opacity:1-e}))}function g(){r.shade?a():c(),D.isAwake()&&l(r.bgOpacity)}function m(){return _.children()}var v=!1,_=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),b={top:o(),left:o().height(h),right:o().height(h),bottom:o()};return{update:n,updateRaw:i,getShades:m,setBgColor:s,enable:a,disable:c,resize:t,refresh:g,opacity:l}}(),D=function(){var t,n,i,o,a,s,c;function l(t){var n=e("<div />").css({position:"absolute",opacity:r.borderOpacity}).addClass(N(t));return g.append(n),n}function d(t,n){var i=e("<div />").mousedown(K(t)).css({cursor:t+"-resize",position:"absolute",zIndex:n}).addClass("ord-"+t);return E.support&&i.bind("touchstart.jcrop",E.createDragger(t)),m.append(i),i}function h(e){var t=r.handleSize;return d(e,n++).css({opacity:r.handleOpacity}).width(t).height(t).addClass(N("handle"))}function p(e){return d(e,n++).addClass("jcrop-dragbar")}function _(e){var t;for(t=0;e.length>t;t++)a[e[t]]=p(e[t])}function b(e){var t,n;for(n=0;e.length>n;n++){switch(e[n]){case"n":t="hline";break;case"s":t="hline bottom";break;case"e":t="vline right";break;case"w":t="vline"}i[e[n]]=l(t)}}function w(e){var t;for(t=0;e.length>t;t++)o[e[t]]=h(e[t])}function y(e,t){r.shade||f.css({top:B(-t),left:B(-e)}),v.css({top:B(t),left:B(e)})}function x(e,t){v.width(Math.round(e)).height(Math.round(t))}function P(){var e=M.getFixed();M.setPressed([e.x,e.y]),M.setCurrent([e.x2,e.y2]),C()}function C(e){return t?k(e):void 0}function k(e){var n=M.getFixed();x(n.w,n.h),y(n.x,n.y),r.shade&&j.updateRaw(n),t||S(),e?r.onSelect.call(Q,Y(n)):r.onChange.call(Q,Y(n))}function T(e,n,i){(t||n)&&(r.bgFade&&!i?u.animate({opacity:e},{queue:!1,duration:r.fadeTime}):u.css("opacity",e))}function S(){v.show(),r.shade?j.opacity(R):T(R,!0),t=!0}function $(){O(),v.hide(),r.shade?j.opacity(1):T(1),t=!1,r.onRelease.call(Q)}function D(){s&&m.show()}function L(){return s=!0,r.allowResize?(m.show(),!0):void 0}function O(){s=!1,m.hide()}function I(e){e?(A=!0,O()):(A=!1,L())}function F(){I(!1),P()}return n=370,i={},o={},a={},s=!1,r.dragEdges&&e.isArray(r.createDragbars)&&_(r.createDragbars),e.isArray(r.createHandles)&&w(r.createHandles),r.drawBorders&&e.isArray(r.createBorders)&&b(r.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()}),c=et().mousedown(K("move")).css({cursor:"move",position:"absolute",zIndex:360}),E.support&&c.bind("touchstart.jcrop",E.createDragger("move")),g.append(c),O(),{updateVisible:C,update:k,release:$,refresh:P,isAwake:function(){return t},setCursor:function(e){c.css("cursor",e)},enableHandles:L,enableOnly:function(){s=!0},showHandles:D,disableHandles:O,animMode:I,setBgOpacity:T,done:F}}(),L=function(){function t(){b.css({zIndex:450}),E.support&&e(document).bind("touchmove.jcrop",s).bind("touchend.jcrop",c),p&&e(document).bind("mousemove.jcrop",i).bind("mouseup.jcrop",o)}function n(){b.css({zIndex:290}),e(document).unbind(".jcrop")}function i(e){return d(z(e)),!1}function o(e){return e.preventDefault(),e.stopPropagation(),T&&(T=!1,h(z(e)),D.isAwake()&&r.onSelect.call(Q,Y(M.getFixed())),n(),d=function(){},h=function(){}),!1}function a(e,n){return T=!0,d=e,h=n,t(),!1}function s(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,i(e)}function c(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,o(e)}function l(e){b.css("cursor",e)}var d=function(){},h=function(){},p=r.trackDocument;return p||b.mousemove(i).mouseup(o).mouseout(o),u.before(b),{activateHandlers:a,setCursor:l}}(),O=function(){function t(){r.keySupport&&(s.show(),s.focus())}function n(){s.hide()}function i(e,t,n){r.allowMove&&(M.moveOffset([t,n]),D.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function a(e){if(e.ctrlKey||e.metaKey)return!0;S=e.shiftKey?!0:!1;var t=S?10:1;switch(e.keyCode){case 37:i(e,-t,0);break;case 39:i(e,t,0);break;case 38:i(e,0,-t);break;case 40:i(e,0,t);break;case 27:r.allowSelect&&D.release();break;case 9:return!0}return!1}var s=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),c=e("<div />").css({position:"absolute",overflow:"hidden"}).append(s);return r.keySupport&&(s.keydown(a).blur(n),o||!r.fixedSupport?(s.css({position:"absolute",left:"-20px"}),c.append(s).insertBefore(u)):s.insertBefore(u)),{watchKeys:t}}(),E.support&&b.bind("touchstart.jcrop",E.newSelection),m.hide(),ft(!0),Q={setImage:ht,animateTo:nt,setSelect:it,setOptions:st,tellSelect:ot,tellScaled:at,setClass:tt,disable:ct,enable:lt,cancel:ut,release:D.release,destroy:dt,focus:O.watchKeys,getBounds:function(){return[d*C,h*k]},getWidgetSize:function(){return[d,h]},getScaleFactor:function(){return[C,k]},getOptions:function(){return r},ui:{holder:p,selection:v}},e.browser.msie&&p.bind("selectstart",function(){return!1}),s.data("Jcrop",Q),Q},e.fn.Jcrop=function(t,n){var i;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),i=e.Jcrop(this,t),e.isFunction(n)&&n.call(i)}):(e(this).css({display:"block",visibility:"hidden"}),i=e.Jcrop(this,t),e.isFunction(n)&&n.call(i))}),this},e.Jcrop.Loader=function(t,n,i){function r(){a.complete?(o.unbind(".jcloader"),e.isFunction(n)&&n.call(a)):window.setTimeout(r,50)
}var o=e(t),a=o[0];o.bind("load.jcloader",r).bind("error.jcloader",function(){o.unbind(".jcloader"),e.isFunction(i)&&i.call(a)}),a.complete&&e.isFunction(n)&&(o.unbind(".jcloader"),n.call(a))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:7,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),void 0===Sentry&&(Sentry={}),function(){Sentry.client={};var e=Sentry.client;Sentry.client.loaded=!1,Sentry.client.options={site:page_context&&page_context.environment?page_context.environment:"prod"},Sentry.client.parseUrl=function(e){var t=e.split("?");return t[1],{url:t[0],querystring:t[1]}},Sentry.client.process=function(t){var n,i,r,o;if(t.project=e.options.projectId,t.logger=e.options.logger,t.site=e.options.site,n=["authenticated_user_id","build_info","canvas_mode"],i={},window.page_context)for(r in n)o=n[r],window.page_context[o]&&(i[o]=page_context[o]);t.extra=i,t.extra.user_agent=navigator.userAgent,t.extra.referrer=document.referrer?document.referrer:"n/a",console.log("window error",t),$.ajax({type:"POST",url:"/_jserror/",data:{message:JSON.stringify(t)}})},Sentry.client.parseTraceback=function(e){var t,n,i,r,o,a,s;for(t=[],n=e.split("\n"),r=1;i=n[r];r++)o=i.split(":"),a=o.slice(-2)[0],s=o.slice(0,-2).join(":").split(" at ")[1],t.push({lineno:a,filename:s,module:"unknown","function":"unknown"});return t},Sentry.client.captureException=function(t){var n,i,r,o,a,s,c,l;if(i=window.location.href,t.line?n=t.line:t.lineNumber&&(n=t.lineNumber),t.sourceURL?a=t.sourceURL:t.fileName&&(a=t.fileName),t.stack)try{r=e.parseTraceback(t.stack)}catch(u){}s=e.parseUrl(i),c=""+t,n&&(c=c+" at "+n),r?(o={frames:r},a=r[0].filename):a&&(o={frames:[{filename:a,lineno:n,module:"unknown","function":"unknown"}]}),l={message:c,culprit:a||void 0,"sentry.interfaces.Stacktrace":o||void 0,"sentry.interfaces.Exception":{type:t.name,value:t.message},"sentry.interfaces.Http":{url:s.url,querystring:s.querystring}},e.process(l)},Sentry.client.registerGlobalHandler=function(){Sentry.client.handled_global_error=!1,window.onerror=function(t,n,i,r){var o,a,s,c,l,u,d,h,p;if(Sentry.client.handled_global_error)return!0;for(s=window.location.href,c=e.parseUrl(s),"object"==typeof t&&(a=t.name,t=t.message),l=["script error","The first argument must be a beforeLoad event object.","atomicFindClose","Error loading script"],u=l.length;u--;)if(d=l[u],-1!==t.toLowerCase().indexOf(d))return!1;Sentry.client.handled_global_error=!0,h=i?t+" at "+i:t,r?(o={frames:r},n=n||r[0].filename):n&&(o={frames:[{filename:n,lineno:i}]}),p={message:h,culprit:n,"sentry.interfaces.Stacktrace":o,"sentry.interfaces.Exception":{type:a,value:t},"sentry.interfaces.Http":{url:c.url,querystring:c.querystring}},e.process(p)}},Sentry.client.registerGlobalHandler()}(),function(e){function t(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.ajaxSubmit=function(n){var i,r,o,a,s,c,l,u,d,h,p,f,g,m;function v(){var i,r,o,a,s,c,l,u,h,p,f,g,m,v,_,b,w;function y(){var t,n,c,l;t=d.attr("target"),n=d.attr("action"),i.setAttribute("target",o),"POST"!=i.getAttribute("method")&&i.setAttribute("method","POST"),i.getAttribute("action")!=r.url&&i.setAttribute("action",r.url),r.skipEncodingOverride||d.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),r.timeout&&(u=setTimeout(function(){h=!0,x(!0)},r.timeout)),c=[];try{if(r.extraData)for(l in r.extraData)c.push(e('<input type="hidden" name="'+l+'" value="'+r.extraData[l]+'" />').appendTo(i)[0]);a.appendTo("body"),s.attachEvent?s.attachEvent("onload",x):s.addEventListener("load",x,!1),i.submit()}finally{i.setAttribute("action",n),t?i.setAttribute("target",t):d.removeAttr("target"),e(c).remove()}}function x(n){var i,o,d,p,f,b,y;if(!c.aborted&&!m){if(n===!0&&c)return c.abort("timeout"),void 0;if(i=s.contentWindow?s.contentWindow.document:s.contentDocument?s.contentDocument:s.document,i&&i.location.href!=r.iframeSrc||h){s.detachEvent?s.detachEvent("onload",x):s.removeEventListener("load",x,!1),o=!0;try{if(h)throw"timeout";if(d="xml"==r.dataType||i.XMLDocument||e.isXMLDoc(i),t("isXml="+d),!d&&window.opera&&(null==i.body||""==i.body.innerHTML)&&--v)return t("requeing onLoad callback, DOM not available"),setTimeout(x,250),void 0;c.responseText=i.body?i.body.innerHTML:i.documentElement?i.documentElement.innerHTML:null,c.responseXML=i.XMLDocument?i.XMLDocument:i,d&&(r.dataType="xml"),c.getResponseHeader=function(e){var t={"content-type":r.dataType};return t[e]},p=/(json|script|text)/.test(r.dataType),p||r.textarea?(f=i.getElementsByTagName("textarea")[0],f?c.responseText=f.value:p&&(b=i.getElementsByTagName("pre")[0],y=i.getElementsByTagName("body")[0],b?c.responseText=b.textContent:y&&(c.responseText=y.innerHTML))):"xml"!=r.dataType||c.responseXML||null==c.responseText||(c.responseXML=_(c.responseText)),g=w(c,r.dataType,r)}catch(n){t("error caught:",n),o=!1,c.error=n,r.error&&r.error.call(r.context,c,"error",n),l&&e.event.trigger("ajaxError",[c,r,n])}c.aborted&&(t("upload aborted"),o=!1),o&&(r.success&&r.success.call(r.context,g,"success",c),l&&e.event.trigger("ajaxSuccess",[c,r])),l&&e.event.trigger("ajaxComplete",[c,r]),l&&!--e.active&&e.event.trigger("ajaxStop"),r.complete&&r.complete.call(r.context,c,o?"success":"error"),m=!0,r.timeout&&clearTimeout(u),setTimeout(function(){a.removeData("form-plugin-onload"),a.remove(),c.responseXML=null},100)}}}return i=d[0],e(":input[name=submit],:input[id=submit]",i).length?(alert('Error: Form elements must not have name or id of "submit".'),void 0):(r=e.extend(!0,{},e.ajaxSettings,n),r.context=r.context||r,o="jqFormIO"+(new Date).getTime(),a=e('<iframe id="'+o+'" name="'+o+'" src="'+r.iframeSrc+'" />'),s=a[0],a.css({position:"absolute",top:"-1000px",left:"-1000px"}),c={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(n){var i="timeout"===n?"timeout":"aborted";t("aborting upload... "+i),this.aborted=1,a.attr("src",r.iframeSrc),c.error=i,r.error&&r.error.call(r.context,c,i,i),l&&e.event.trigger("ajaxError",[c,r,i]),r.complete&&r.complete.call(r.context,c,i)}},l=r.global,l&&!e.active++&&e.event.trigger("ajaxStart"),l&&e.event.trigger("ajaxSend",[c,r]),r.beforeSend&&r.beforeSend.call(r.context,c,r)===!1?(r.global&&e.active--,void 0):(c.aborted||(h=0,p=i.clk,p&&(f=p.name,f&&!p.disabled&&(r.extraData=r.extraData||{},r.extraData[f]=p.value,"image"==p.type&&(r.extraData[f+".x"]=i.clk_x,r.extraData[f+".y"]=i.clk_y))),r.forceSync?y():setTimeout(y,10),v=50,_=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},b=e.parseJSON||function(e){return window.eval("("+e+")")},w=function(t,n,i){var r=t.getResponseHeader("content-type")||"",o="xml"===n||!n&&r.indexOf("xml")>=0,a=o?t.responseXML:t.responseText;return o&&"parsererror"===a.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(a=i.dataFilter(a,n)),"string"==typeof a&&("json"===n||!n&&r.indexOf("json")>=0?a=b(a):("script"===n||!n&&r.indexOf("javascript")>=0)&&e.globalEval(a)),a}),void 0))}if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;if("function"==typeof n&&(n={success:n}),i=this.attr("action"),r="string"==typeof i?e.trim(i):"",r&&(r=(r.match(/^([^#]+)/)||[])[1]),r=r||window.location.href||"",n=e.extend(!0,{url:r,success:e.ajaxSettings.success,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n),o={},this.trigger("form-pre-serialize",[this,n,o]),o.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&n.beforeSerialize(this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;if(c=this.formToArray(n.semantic),n.data){n.extraData=n.data;for(a in n.data)if(n.data[a]instanceof Array)for(l in n.data[a])c.push({name:a,value:n.data[a][l]});else s=n.data[a],s=e.isFunction(s)?s():s,c.push({name:a,value:s})}return n.beforeSubmit&&n.beforeSubmit(c,this,n)===!1?(t("ajaxSubmit: submit aborted via beforeSubmit callback"),this):(this.trigger("form-submit-validate",[c,this,n,o]),o.veto?(t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this):(u=e.param(c),"GET"==n.type.toUpperCase()?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+u,n.data=null):n.data=u,d=this,h=[],n.resetForm&&h.push(function(){d.resetForm()}),n.clearForm&&h.push(function(){d.clearForm()}),!n.dataType&&n.target?(p=n.success||function(){},h.push(function(t){var i=n.replaceTarget?"replaceWith":"html";e(n.target)[i](t).each(p,arguments)})):n.success&&h.push(n.success),n.success=function(e,t,i){var r,o,a;for(r=n.context||n,o=0,a=h.length;a>o;o++)h[o].apply(r,[e,t,i||d,d])},f=e("input:file",this).length>0,g="multipart/form-data",m=d.attr("enctype")==g||d.attr("encoding")==g,n.iframe!==!1&&(f||n.iframe||m)?n.closeKeepAlive?e.get(n.closeKeepAlive,v):v():e.ajax(n),this.trigger("form-submit-notify",[this,n]),this))},e.fn.ajaxForm=function(n){if(0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(t("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(n)}),this):(t("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(n))}).bind("click.form-plugin",function(t){var n,i,r,o,a;if(n=t.target,i=e(n),!i.is(":submit,input:image")){if(r=i.closest(":submit"),0==r.length)return;n=r[0]}o=this,o.clk=n,"image"==n.type&&(void 0!=t.offsetX?(o.clk_x=t.offsetX,o.clk_y=t.offsetY):"function"==typeof e.fn.offset?(a=i.offset(),o.clk_x=t.pageX-a.left,o.clk_y=t.pageY-a.top):(o.clk_x=t.pageX-n.offsetLeft,o.clk_y=t.pageY-n.offsetTop)),setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t){var n,i,r,o,a,s,c,l,u,d,h,p;if(n=[],0===this.length)return n;if(i=this[0],r=t?i.getElementsByTagName("*"):i.elements,!r)return n;for(o=0,u=r.length;u>o;o++)if(l=r[o],s=l.name)if(t&&i.clk&&"image"==l.type)l.disabled||i.clk!=l||(n.push({name:s,value:e(l).val()}),n.push({name:s+".x",value:i.clk_x},{name:s+".y",value:i.clk_y}));else if(c=e.fieldValue(l,!0),c&&c.constructor==Array)for(a=0,d=c.length;d>a;a++)n.push({name:s,value:c[a]});else null!==c&&c!==void 0&&n.push({name:s,value:c});return!t&&i.clk&&(h=e(i.clk),p=h[0],s=p.name,s&&!p.disabled&&"image"==p.type&&(n.push({name:s,value:h.val()}),n.push({name:s+".x",value:i.clk_x},{name:s+".y",value:i.clk_y}))),n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var i,r,o,a;if(i=this.name)if(r=e.fieldValue(this,t),r&&r.constructor==Array)for(o=0,a=r.length;a>o;o++)n.push({name:i,value:r[o]});else null!==r&&r!==void 0&&n.push({name:this.name,value:r})}),e.param(n)},e.fn.fieldValue=function(t){var n,i,r,o,a;for(n=[],i=0,r=this.length;r>i;i++)o=this[i],a=e.fieldValue(o,t),null===a||void 0===a||a.constructor==Array&&!a.length||(a.constructor==Array?e.merge(n,a):n.push(a));return n},e.fieldValue=function(t,n){var i,r,o,a,s,c,l,u,d,h,p;if(i=t.name,r=t.type,o=t.tagName.toLowerCase(),void 0===n&&(n=!0),n&&(!i||t.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!t.checked||("submit"==r||"image"==r)&&t.form&&t.form.clk!=t||"select"==o&&-1==t.selectedIndex))return null;if("select"==o){if(a=t.selectedIndex,0>a)return null;for(s=[],c=t.options,l="select-one"==r,u=l?a+1:c.length,d=l?a:0;u>d;d++)if(h=c[d],h.selected){if(p=h.value,p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),l)return p;s.push(p)}return s}return e(t).val()},e.fn.clearForm=function(){return this.each(function(){e("input,select,textarea",this).clearFields()})},e.fn.clearFields=e.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();"text"==e||"password"==e||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var n,i;n=this.type,"checkbox"==n||"radio"==n?this.checked=t:"option"==this.tagName.toLowerCase()&&(i=e(this).parent("select"),t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t)})}}(jQuery),function(e){function t(t){var n={},i=/^jQuery\d+$/;return e.each(t.attributes,function(e,t){t.specified&&!i.test(t.name)&&(n[t.name]=t.value)}),n}function n(){var t=e(this);t.val()===t.attr("placeholder")&&t.hasClass("placeholder")&&(t.data("placeholder-password")?t.hide().next().attr("id",t.removeAttr("id").data("placeholder-id")).show().focus():t.val("").removeClass("placeholder"))}function i(){var i,r=e(this),o=this.id;if(""===r.val()){if(r.is(":password")){if(!r.data("placeholder-textinput")){try{i=r.clone().attr({type:"text"})}catch(a){i=e("<input>").attr(e.extend(t(this),{type:"text"}))}i.removeAttr("name").data("placeholder-password",!0).data("placeholder-id",o).bind("focus.placeholder",n),r.data("placeholder-textinput",i).data("placeholder-id",o).before(i)}r=r.removeAttr("id").hide().prev().attr("id",o).show()}r.addClass("placeholder").val(r.attr("placeholder"))}else r.removeClass("placeholder")}var r="placeholder"in document.createElement("input"),o="placeholder"in document.createElement("textarea");r&&o?(e.fn.placeholder=function(){return this},e.fn.placeholder.input=e.fn.placeholder.textarea=!0):(e.fn.placeholder=function(){return this.filter((r?"textarea":":input")+"[placeholder]").bind("focus.placeholder",n).bind("blur.placeholder",i).trigger("blur.placeholder").end()},e.fn.placeholder.input=r,e.fn.placeholder.textarea=o),e(function(){e("form").bind("submit.placeholder",function(){var t=e(".placeholder",this).each(n);setTimeout(function(){t.each(i)},10)})}),e(window).bind("unload.placeholder",function(){e(".placeholder").val("")})}(jQuery),!function(e){"use strict";function t(){e(n).parent().removeClass("open")}var n='[data-toggle="dropdown"]',i=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(){var n,i,r,o=e(this);if(!o.is(".disabled, :disabled"))return i=o.attr("data-target"),i||(i=o.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),n=e(i),n.length||(n=o.parent()),r=n.hasClass("open"),t(),r||n.toggleClass("open"),!1}},e.fn.dropdown=function(t){return this.each(function(){var n=e(this),r=n.data("dropdown");r||n.data("dropdown",r=new i(this)),"string"==typeof t&&r[t].call(n)})},e.fn.dropdown.Constructor=i,e(function(){e("html").on("click.dropdown.data-api",t),e("body").on("click.dropdown",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",n,i.prototype.toggle)})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,n,i,r=this.element,o=r.closest("ul:not(.dropdown-menu)"),a=r.attr("data-target");a||(a=r.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(t=o.find(".active a").last()[0],i=e.Event("show",{relatedTarget:t}),r.trigger(i),i.isDefaultPrevented()||(n=e(a),this.activate(r.parent("li"),o),this.activate(n,n.parent(),function(){r.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,n,i){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var o=n.find("> .active"),a=i&&e.support.transition&&o.hasClass("fade");a?o.one(e.support.transition.end,r):r(),o.removeClass("in")}},e.fn.tab=function(n){return this.each(function(){var i=e(this),r=i.data("tab");r||i.data("tab",r=new t(this)),"string"==typeof n&&r[n]()})},e.fn.tab.Constructor=t,e(function(){e("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})})}(window.jQuery),function(e){e.fn.each2===void 0&&e.fn.extend({each2:function(t){for(var n=e([0]),i=-1,r=this.length;r>++i&&(n.context=n[0]=this[i])&&t.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(e,t){"use strict";function n(e,n){var i,r=0,o=n.length;if(e===t)return-1;if(e.constructor===String){for(;o>r;r+=1)if(0===e.localeCompare(n[r]))return r}else for(;o>r;r+=1)if(i=n[r],i.constructor===String){if(0===i.localeCompare(e))return r}else if(i===e)return r;return-1}function i(e,n){return e===n?!0:e===t||n===t?!1:null===e||null===n?!1:e.constructor===String?0===e.localeCompare(n):n.constructor===String?0===n.localeCompare(e):!1}function r(t,n){var i,r,o;if(null===t||1>t.length)return[];for(i=t.split(n),r=0,o=i.length;o>r;r+=1)i[r]=e.trim(i[r]);return i}function o(e){return e.outerWidth()-e.width()}function a(e){e.bind("keydown",function(){e.data("keyup-change-value",e.val())}),e.bind("keyup",function(){e.val()!==e.data("keyup-change-value")&&e.trigger("keyup-change")})}function s(n){n.bind("mousemove",function(n){var i=e(document).data("select2-lastpos");(i===t||i.x!==n.pageX||i.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function c(e,t){var n;return function(){window.clearTimeout(n),n=window.setTimeout(t,e)}}function l(e,t){var i=c(e,function(e){t.trigger("scroll-debounced",e)});t.bind("scroll",function(e){n(e.target,t.get())>=0&&i(e)})}function u(e){e.preventDefault(),e.stopPropagation()}function d(t){if(!P){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);P=e("<div></div>").css({position:"absolute",left:"-1000px",top:"-1000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),e("body").append(P)}return P.text(t.val()),P.width()}function h(e,n,i){var r=e.toUpperCase().indexOf(n.toUpperCase()),o=n.length;return 0>r?(i.push(e),t):(i.push(e.substring(0,r)),i.push("<span class='select2-match'>"),i.push(e.substring(r,r+o)),i.push("</span>"),i.push(e.substring(r+o,e.length)),t)}function p(t){var n,i=0,r=null,o=t.quietMillis||100;return function(a){window.clearTimeout(n),n=window.setTimeout(function(){i+=1;var n=i,o=t.data,s=t.transport||e.ajax,c=t.type||"GET";o=o.call(this,a.term,a.page,a.context),null!==r&&r.abort(),r=s.call(null,{url:t.url,dataType:t.dataType,data:o,type:c,success:function(e){if(!(i>n)){var r=t.results(e,a.page);a.callback(r)}}})},o)}}function f(n){var i,r=n,o=function(e){return""+e.text};return e.isArray(r)||(o=r.text,e.isFunction(o)||(i=r.text,o=function(e){return e[i]}),r=r.results),function(n){var i=n.term,a={};return""===i?(n.callback({results:r}),t):(a.results=e(r).filter(function(){return n.matcher(i,o(this))}).get(),n.callback(a),t)}}function g(n){return e.isFunction(n)?n:function(i){var r=i.term,o={results:[]};e(n).each(function(){var e=this.text!==t,n=e?this.text:this;(""===r||i.matcher(r,n))&&o.results.push(e?this:{id:this,text:this})}),i.callback(o)}}function m(t){return e.isFunction(t)?t():t}function v(t,n){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}if(window.Select2===t){var _,b,w,y,x,P;_={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case _.LEFT:case _.RIGHT:case _.UP:case _.DOWN:return!0}return!1},isControl:function(e){switch(e=e.which?e.which:e){case _.SHIFT:case _.CTRL:case _.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},x=function(){var e=1;return function(){return e++}}(),e(document).delegate("*","mousemove",function(t){e(document).data("select2-lastpos",{x:t.pageX,y:t.pageY})}),e(document).ready(function(){e(document).delegate("*","mousedown focusin touchend",function(t){var n=e(t.target).closest("div.select2-container").get(0);n?e(document).find("div.select2-container-active").each(function(){this!==n&&e(this).data("select2").blur()}):(n=e(t.target).closest("div.select2-drop").get(0),e(document).find("div.select2-drop-active").each(function(){this!==n&&e(this).data("select2").blur()}))})}),b=v(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,r,o=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.body=n.element.closest("body"),n.element.attr("class")!==t&&this.container.addClass(n.element.attr("class")),this.container.css(m(n.containerCss)),this.container.addClass(m(n.containerCssClass)),this.opts.element.data("select2",this).hide().after(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.css(m(n.dropdownCss)),this.dropdown.addClass(m(n.dropdownCssClass)),this.dropdown.data("select2",this),this.results=i=this.container.find(o),this.search=r=this.container.find("input.select2-input"),this.resultsPage=0,this.context=null,this.initContainer(),s(this.results),this.dropdown.delegate(o,"mousemove-filtered",this.bind(this.highlightUnderEvent)),l(80,this.results),this.dropdown.delegate(o,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),e.fn.mousewheel&&i.mousewheel(function(e,t,n,r){var o=i.scrollTop();r>0&&0>=o-r?(i.scrollTop(0),u(e)):0>r&&i.height()>=i.get(0).scrollHeight-i.scrollTop()+r&&(i.scrollTop(i.get(0).scrollHeight-i.height()),u(e))}),a(r),r.bind("keyup-change",this.bind(this.updateResults)),r.bind("focus",function(){r.addClass("select2-focused")," "===r.val()&&r.val("")}),r.bind("blur",function(){r.removeClass("select2-focused")}),this.dropdown.delegate(o,"click",this.bind(function(t){e(t.target).closest(".select2-result-selectable:not(.select2-disabled)").length>0?(this.highlightUnderEvent(t),this.selectHighlighted(t)):(u(t),this.focusSearch())})),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),n.element.is(":disabled")&&this.disable()},destroy:function(){var e=this.opts.element.data("select2");e!==t&&(e.container.remove(),e.dropdown.remove(),e.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(n){var i,o,a;if(i=n.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=o=n.element),o&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",populateResults:function(i,r,o){var a,s,c,l={},u=[],d=this.opts.id;a=function(e,i){var r,s,h,p,f,g;for(r=0,s=e.length;s>r;r+=1)p=e[r],f=d(p)!==t,g="children"in p&&p.children.length>0,u.push("<li class='select2-result-depth-"+i),u.push(" select2-result"),u.push(f?" select2-result-selectable":" select2-result-unselectable"),g&&u.push(" select2-result-with-children"),u.push("'"),h=x(),u.push(" id='select2-result-"+h+"'"),l[h]=p,u.push("><div class='select2-result-label'>"),c=n.formatResult(p,o,u),c!==t&&u.push(c),u.push("</div>"),g&&(u.push("<ul class='select2-result-sub'>"),a(p.children,i+1),u.push("</ul>")),u.push("</li>")},a(r,0),i.append(u.join(""));for(s in l)e("#select2-result-"+s,i).data("select2-data",l[s])},formatResult:function(e,t,n){h(e.text,t.term,n)},formatSelection:function(e){return e.fullText||e.text},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){return"Please enter "+(t-e.length)+" more characters"},formatLoadMore:function(){return"Loading more results..."},minimumResultsForSearch:0,minimumInputLength:0,id:function(e){return e.id},matcher:function(e,t){return t.toUpperCase().indexOf(e.toUpperCase())>=0}},n),"function"!=typeof n.id&&(a=n.id,n.id=function(e){return e[a]}),o?(n.query=this.bind(function(n){var r,o,a,s={results:[],more:!1},c=n.term;a=function(e,t){var i;e.is("option")?n.matcher(c,e.text())&&t.push({id:e.attr("value"),text:e.text(),element:e.get()}):e.is("optgroup")&&(i={text:e.attr("label"),children:[],element:e.get()},e.children().each2(function(e,t){a(t,i.children)}),i.children.length>0&&t.push(i))},r=i.children(),this.getPlaceholder()!==t&&r.length>0&&(o=r[0],""===e(o).text()&&(r=r.not(o))),r.each2(function(e,t){a(t,s.results)}),n.callback(s)}),n.id=function(e){return e.id}):"query"in n||("ajax"in n?n.query=p(n.ajax):"data"in n?n.query=f(n.data):"tags"in n&&(n.query=g(n.tags),n.createSearchChoice=function(e){return{id:e,text:e}},n.initSelection=function(t,n){var i=[];e(r(t.val(),",")).each(function(){i.push({id:this,text:this})}),n(i)})),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}))},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1)},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,t,n=this.container.offset(),i=this.container.outerHeight(),r=this.container.outerWidth(),o=this.dropdown.outerHeight(),a=document.body.scrollTop+document.documentElement.clientHeight,s=n.top+i,c=a>=s+o,l=n.top-o>=document.body.scrollTop,u=this.dropdown.hasClass("select2-drop-above");u?(e=!0,!l&&c&&(e=!1)):(e=!1,!c&&l&&(e=!0)),e?(s=n.top-o,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),t={top:s,left:n.left,width:r},this.dropdown.css(t)},shouldOpen:function(){var e;return this.opened()?!1:(e=jQuery.Event("open"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.clearDropdownAlignmentPreference()," "===this.search.val()&&this.search.val(""),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),this.dropdown.addClass("select2-drop-active"),this.positionDropdown(),this.updateResults(!0),this.dropdown.show(),this.ensureHighlightVisible(),this.focusSearch(),!0):!1},close:function(){this.opened()&&(this.clearDropdownAlignmentPreference(),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch())},clearSearch:function(){},ensureHighlightVisible:function(){var n,i,r,o,a,s,c,l=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return l.scrollTop(0),t;n=l.find(".select2-result-selectable"),r=e(n[i]),o=r.offset().top+r.outerHeight(),i===n.length-1&&(c=l.find("li.select2-more-results"),c.length>0&&(o=c.offset().top+c.outerHeight())),a=l.offset().top+l.outerHeight(),o>a&&l.scrollTop(l.scrollTop()+(o-a)),s=r.offset().top-l.offset().top,0>s&&l.scrollTop(l.scrollTop()+s)}},moveHighlight:function(t){var n,i,r;for(n=this.results.find(".select2-result-selectable"),i=this.highlight();i>-1&&n.length>i;)if(i+=t,r=e(n[i]),r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")){this.highlight(i);break}},highlight:function(i){var r=this.results.find(".select2-result-selectable");return 0===arguments.length?n(r.filter(".select2-highlighted")[0],r.get()):(i>=r.length&&(i=r.length-1),0>i&&(i=0),r.removeClass("select2-highlighted"),e(r[i]).addClass("select2-highlighted"),this.ensureHighlightVisible(),t)},highlightUnderEvent:function(t){var n,i;n=e(t.target).closest(".select2-result-selectable"),n.length>0&&!n.is(".select2-highlighted")?(i=this.results.find(".select2-result-selectable"),this.highlight(i.index(n))):0==n.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,n=t.find("li.select2-more-results"),i=this.resultsPage+1,r=this,o=this.search.val(),a=this.context;0!==n.length&&(e=n.offset().top-t.offset().top-t.height(),0>=e&&(n.addClass("select2-active"),this.opts.query({term:o,page:i,context:a,matcher:this.opts.matcher,callback:this.bind(function(e){r.opts.populateResults.call(this,t,e.results,{term:o,page:i,context:a}),e.more===!0?(n.detach().appendTo(t.children(":last")).text(r.opts.formatLoadMore(i+1)),window.setTimeout(function(){r.loadMoreIfNeeded()},10)):n.remove(),r.positionDropdown(),r.resultsPage=i})})))},updateResults:function(n){function r(){s.scrollTop(0),a.removeClass("select2-active"),l.positionDropdown()}function o(e){s.html(e),r()}var a=this.search,s=this.results,c=this.opts,l=this;if(n===!0||this.showSearchInput!==!1){if(a.addClass("select2-active"),c.minimumInputLength>a.val().length)return o("<li class='select2-no-results'>"+c.formatInputTooShort(a.val(),c.minimumInputLength)+"</li>"),t;this.resultsPage=1,c.query({term:a.val(),page:this.resultsPage,context:null,matcher:c.matcher,callback:this.bind(function(u){var d;return this.context=u.context===t?null:u.context,this.opts.createSearchChoice&&""!==a.val()&&(d=this.opts.createSearchChoice.call(null,a.val(),u.results),d!==t&&null!==d&&l.id(d)!==t&&null!==l.id(d)&&0===e(u.results).filter(function(){return i(l.id(this),l.id(d))}).length&&u.results.unshift(d)),0===u.results.length?(o("<li class='select2-no-results'>"+c.formatNoMatches(a.val())+"</li>"),t):(s.empty(),l.opts.populateResults.call(this,s,u.results,{term:a.val(),page:this.resultsPage,context:null}),r(),u.more===!0&&(s.children().filter(":last").append("<li class='select2-more-results'>"+c.formatLoadMore(this.resultsPage)+"</li>"),window.setTimeout(function(){l.loadMoreIfNeeded()},10)),this.postprocessResults(u,n),t)})})}},cancel:function(){this.close()},blur:function(){this.close(),this.container.removeClass("select2-container-active"),this.dropdown.removeClass("select2-drop-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){window.setTimeout(this.bind(function(){this.search.focus()
}),10)},selectHighlighted:function(){var e=this.results.find(".select2-highlighted").not(".select2-disabled").closest(".select2-result-selectable").data("select2-data");e&&this.onSelect(e)},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},getContainerWidth:function(){var e,n,i,r,o;if(this.opts.width!==t)return this.opts.width;if(e=this.opts.element.attr("style"),e!==t)for(n=e.split(";"),r=0,o=n.length;o>r;r+=1)if(i=n[r].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==i&&i.length>=1)return i[1];return e=this.opts.element.css("width"),e.indexOf("%")>0?e:0===this.opts.element.width()?"auto":this.opts.element.outerWidth()+"px"}}),w=v(b,{createContainer:function(){return e("<div></div>",{"class":"select2-container",style:"width: "+this.getContainerWidth()}).html(["    <a href='javascript:void(0)' class='select2-choice'><input type='text' class='select2-offscreen select2-focusser'/>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop' style='display:none;'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.selection.focus()},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments),this.selection.focus()},initContainer:function(){var n,i=this.container,r=this.dropdown,o=e([this.container.get(0),this.dropdown.get(0)]),a=!1,s=".select2-choice",c=i.find("input.select2-focusser");this.selection=n=i.find(s),this.search.bind("keydown",this.bind(function(e){switch(e.which){case _.UP:case _.DOWN:return this.moveHighlight(e.which===_.UP?-1:1),u(e),t;case _.TAB:case _.ENTER:return this.selectHighlighted(),u(e),t;case _.ESC:return this.cancel(e),u(e),t}})),o.delegate(s,"click",this.bind(function(e){a=!0,this.opened()?(this.close(),n.focus()):this.enabled&&this.open(),e.preventDefault(),a=!1})),o.delegate(s,"keydown",this.bind(function(e){!this.enabled||e.which===_.TAB||_.isControl(e)||_.isFunctionKey(e)||e.which===_.ESC||(this.open(),(e.which===_.PAGE_UP||e.which===_.PAGE_DOWN||e.which===_.SPACE)&&u(e),e.which===_.ENTER&&u(e))})),o.delegate(s,"focus",function(){this.enabled&&(o.addClass("select2-container-active"),r.addClass("select2-drop-active"))}),o.delegate(s,"blur",this.bind(function(e){a||e.target!==c.get(0)&&(this.opened()||this.blur())})),n.delegate("abbr","click",this.bind(function(e){this.enabled&&(this.clear(),u(e),this.close(),this.triggerChange(),n.focus())})),this.setPlaceholder(),c.bind("focus",function(){n.focus()}),n.bind("focus",this.bind(function(){c.hide(),this.container.addClass("select2-container-active")})),n.bind("blur",function(){c.show()}),this.opts.element.bind("open",function(){c.hide()})},clear:function(){this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder()},initSelection:function(){if(""===this.opts.element.val())this.updateSelection({id:"",text:""}),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder())})}},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()&&(t.initSelection=function(t,n){var i=t.find(":selected");e.isFunction(n)&&n({id:i.attr("value"),text:i.text()})}),t},setPlaceholder:function(){var e=this.getPlaceholder();if(""===this.opts.element.val()&&e!==t){if(this.select&&""!==this.select.find("option:first").text())return;"object"==typeof e?this.updateSelection(e):this.selection.find("span").html(e),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(n,r){var o=0,a=this,s=!0;this.results.find(".select2-result-selectable").each2(function(e,n){return i(a.id(n.data("select2-data")),a.opts.element.val())?(o=e,!1):t}),this.highlight(o),r===!0&&(s=this.showSearchInput=n.results.length>=this.opts.minimumResultsForSearch,this.dropdown.find(".select2-search")[s?"removeClass":"addClass"]("select2-search-hidden"),e(this.dropdown,this.container)[s?"addClass":"removeClass"]("select2-with-searchbox"))},onSelect:function(e){var t=this.opts.element.val();this.opts.element.val(this.id(e)),this.updateSelection(e),this.close(),this.selection.focus(),i(t,this.id(e))||this.triggerChange()},updateSelection:function(e){this.selection.data("select2-data",e),this.selection.find("span").html(this.opts.formatSelection(e)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.selection.find("abbr").show()},val:function(){var e,n=null;return 0===arguments.length?this.opts.element.val():(e=arguments[0],this.select?(this.select.val(e).find(":selected").each2(function(e,t){return n={id:t.attr("value"),text:t.text()},!1}),this.updateSelection(n)):(this.opts.element.val(e?this.id(e):""),this.updateSelection(e)),this.setPlaceholder(),t)},clearSearch:function(){this.search.val("")},data:function(e){return 0===arguments.length?this.selection.data("select2-data"):(e&&""!==e?(this.opts.element.val(e?this.id(e):""),this.updateSelection(e)):this.clear(),t)}}),y=v(b,{createContainer:function(){return e("<div></div>",{"class":"select2-container select2-container-multi",style:"width: "+this.getContainerWidth()}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' style='width: 25px;' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return t=e.extend({},{closeOnSelect:!0},t),"select"===t.element.get(0).tagName.toLowerCase()&&(t.initSelection=function(t,n){var i=[];t.find(":selected").each2(function(e,t){i.push({id:t.attr("value"),text:t.text()})}),e.isFunction(n)&&n(i)}),t},initContainer:function(){var e,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(n),this.search.bind("keydown",this.bind(function(n){if(this.enabled){if(n.which===_.BACKSPACE&&""===this.search.val()){this.close();var i,r=e.find(".select2-search-choice-focus");if(r.length>0)return this.unselect(r.first()),this.search.width(10),u(n),t;i=e.find(".select2-search-choice"),i.length>0&&i.last().addClass("select2-search-choice-focus")}else e.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(n.which){case _.UP:case _.DOWN:return this.moveHighlight(n.which===_.UP?-1:1),u(n),t;case _.ENTER:case _.TAB:return this.selectHighlighted(),u(n),t;case _.ESC:return this.cancel(n),u(n),t}n.which===_.TAB||_.isControl(n)||_.isFunctionKey(n)||n.which===_.BACKSPACE||n.which===_.ESC||(this.open(),(n.which===_.PAGE_UP||n.which===_.PAGE_DOWN)&&u(n))}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.container.delegate(n,"click",this.bind(function(e){this.enabled&&(this.clearPlaceholder(),this.open(),this.focusSearch(),e.preventDefault())})),this.container.delegate(n,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.show())},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.hide())},initSelection:function(){if(""===this.opts.element.val()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width("auto")):this.search.val(" ").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")?this.search.val("").removeClass("select2-default"):" "===this.search.val()&&this.search.val("")},open:function(){return this.parent.open.apply(this,arguments)===!1?!1:(this.clearPlaceholder(),this.resizeSearch(),this.focusSearch(),!0)},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i=[],r=[],o=this;e(t).each(function(){0>n(o.id(this),i)&&(i.push(o.id(this)),r.push(this))}),t=r,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},onSelect:function(e){this.addSelectedChoice(e),this.select&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):(this.search.width(10),this.resizeSearch()),this.triggerChange({added:e}),this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(t){var n,i,r=this.id(t),o=this.getVal();i=["<li class='select2-search-choice'>",this.opts.formatSelection(t),"<a href='javascript:void(0)' class='select2-search-choice-close' tabindex='-1'></a>","</li>"],n=e(i.join("")),n.find("a").bind("click dblclick",this.bind(function(t){this.enabled&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),u(t),this.close(),this.focusSearch())})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),n.data("select2-data",t),n.insertBefore(this.searchContainer),o.push(r),this.setVal(o)},unselect:function(e){var t,i,r=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),i=n(this.id(t),r),i>=0&&(r.splice(i,1),this.setVal(r),this.select&&this.postprocessResults()),e.remove(),this.triggerChange({removed:t})},postprocessResults:function(){var e=this.getVal(),i=this.results.find(".select2-result-selectable"),r=this;i.each2(function(t,i){var o=r.id(i.data("select2-data"));n(o,e)>=0?i.addClass("select2-disabled"):i.removeClass("select2-disabled")}),i.each2(function(e,n){return n.hasClass("select2-disabled")?t:(r.highlight(e),!1)})},resizeSearch:function(){var e,t,n,i,r,a=o(this.search);e=d(this.search)+10,t=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,r=n-(t-i)-a,e>r&&(r=n-a),40>r&&(r=n-a),this.search.width(r)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),r(e,","))},setVal:function(t){var i;this.select?this.select.val(t):(i=[],e(t).each(function(){0>n(this,i)&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(",")))},val:function(){var n,i=[],r=this;return 0===arguments.length?this.getVal():(n=arguments[0],this.select?(this.setVal(n),this.select.find(":selected").each(function(){i.push({id:e(this).attr("value"),text:e(this).text()})}),this.updateSelection(i)):(n=null===n?[]:n,e(n).each(function(){i.push(r.id(this))}),this.setVal(i),this.updateSelection(n)),this.clearSearch(),t)},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(n){var i,r=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(i=e.map(n,function(e){return r.opts.id(e)}),this.setVal(i),this.updateSelection(n),this.clearSearch(),t)}}),e.fn.select2=function(){var i,r,o,a,s=Array.prototype.slice.call(arguments,0),c=["val","destroy","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(0===s.length||"object"==typeof s[0])i=0===s.length?{}:e.extend({},s[0]),i.element=e(this),"select"===i.element.get(0).tagName.toLowerCase()?a=i.element.attr("multiple"):(a=i.multiple||!1,"tags"in i&&(i.multiple=a=!0)),r=a?new y:new w,r.init(i);else{if("string"!=typeof s[0])throw"Invalid arguments to select2 plugin: "+s;if(0>n(s[0],c))throw"Unknown method: "+s[0];if(o=t,r=e(this).data("select2"),r===t)return;if(o="container"===s[0]?r.container:r[s[0]].apply(r,s.slice(1)),o!==t)return!1}}),o===t?this:o},window.Select2={query:{ajax:p,local:f,tags:g},util:{debounce:c,markMatch:h},"class":{"abstract":b,single:w,multi:y}}}}(jQuery),QR8bitByte.prototype={getLength:function(){return this.data.length},write:function(e){for(var t=0;this.data.length>t;t++)e.put(this.data.charCodeAt(t),8)}},QRCode.prototype={addData:function(e){var t=new QR8bitByte(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(0>e||e>=this.moduleCount||0>t||t>=this.moduleCount)throw Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){var e,t,n,i,r,o;if(1>this.typeNumber){for(e=1,e=1;40>e;e++){for(t=QRRSBlock.getRSBlocks(e,this.errorCorrectLevel),n=new QRBitBuffer,i=0,r=0;t.length>r;r++)i+=t[r].dataCount;for(r=0;this.dataList.length>r;r++)o=this.dataList[r],n.put(o.mode,4),n.put(o.getLength(),QRUtil.getLengthInBits(o.mode,e)),o.write(n);if(8*i>=n.getLengthInBits())break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){var n,i;for(this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount),n=0;this.moduleCount>n;n++)for(this.modules[n]=Array(this.moduleCount),i=0;this.moduleCount>i;i++)this.modules[n][i]=null;this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){var n,i;for(n=-1;7>=n;n++)if(!(-1>=e+n||e+n>=this.moduleCount))for(i=-1;7>=i;i++)-1>=t+i||t+i>=this.moduleCount||(this.modules[e+n][t+i]=n>=0&&6>=n&&(0==i||6==i)||i>=0&&6>=i&&(0==n||6==n)||n>=2&&4>=n&&i>=2&&4>=i?!0:!1)},getBestMaskPattern:function(){var e,t,n,i;for(e=0,t=0,n=0;8>n;n++)this.makeImpl(!0,n),i=QRUtil.getLostPoint(this),(0==n||e>i)&&(e=i,t=n);return t},createMovieClip:function(e,t,n){var i,r,o,a,s,c,l;for(i=e.createEmptyMovieClip(t,n),r=1,this.make(),o=0;this.modules.length>o;o++)for(a=o*r,s=0;this.modules[o].length>s;s++)c=s*r,l=this.modules[o][s],l&&(i.beginFill(0,100),i.moveTo(c,a),i.lineTo(c+r,a),i.lineTo(c+r,a+r),i.lineTo(c,a+r),i.endFill());return i},setupTimingPattern:function(){var e,t;for(e=8;this.moduleCount-8>e;e++)null==this.modules[e][6]&&(this.modules[e][6]=0==e%2);for(t=8;this.moduleCount-8>t;t++)null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){var e,t,n,i,r,o,a;for(e=QRUtil.getPatternPosition(this.typeNumber),t=0;e.length>t;t++)for(n=0;e.length>n;n++)if(i=e[t],r=e[n],null==this.modules[i][r])for(o=-2;2>=o;o++)for(a=-2;2>=a;a++)this.modules[i+o][r+a]=-2==o||2==o||-2==a||2==a||0==o&&0==a?!0:!1},setupTypeNumber:function(e){var t,n,i;for(t=QRUtil.getBCHTypeNumber(this.typeNumber),n=0;18>n;n++)i=!e&&1==(1&t>>n),this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i;for(n=0;18>n;n++)i=!e&&1==(1&t>>n),this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i},setupTypeInfo:function(e,t){var n,i,r,o;for(n=this.errorCorrectLevel<<3|t,i=QRUtil.getBCHTypeInfo(n),r=0;15>r;r++)o=!e&&1==(1&i>>r),6>r?this.modules[r][8]=o:8>r?this.modules[r+1][8]=o:this.modules[this.moduleCount-15+r][8]=o;for(r=0;15>r;r++)o=!e&&1==(1&i>>r),8>r?this.modules[8][this.moduleCount-r-1]=o:9>r?this.modules[8][15-r-1+1]=o:this.modules[8][15-r-1]=o;this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){var n,i,r,o,a,s,c,l;for(n=-1,i=this.moduleCount-1,r=7,o=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(s=0;2>s;s++)null==this.modules[i][a-s]&&(c=!1,e.length>o&&(c=1==(1&e[o]>>>r)),l=QRUtil.getMask(t,i,a-s),l&&(c=!c),this.modules[i][a-s]=c,r--,-1==r&&(o++,r=7));if(i+=n,0>i||i>=this.moduleCount){i-=n,n=-n;break}}}},QRCode.PAD0=236,QRCode.PAD1=17,QRCode.createData=function(e,t,n){var i,r,o,a,s;for(i=QRRSBlock.getRSBlocks(e,t),r=new QRBitBuffer,o=0;n.length>o;o++)a=n[o],r.put(a.mode,4),r.put(a.getLength(),QRUtil.getLengthInBits(a.mode,e)),a.write(r);for(s=0,o=0;i.length>o;o++)s+=i[o].dataCount;if(r.getLengthInBits()>8*s)throw Error("code length overflow. ("+r.getLengthInBits()+">"+8*s+")");for(8*s>=r.getLengthInBits()+4&&r.put(0,4);0!=r.getLengthInBits()%8;)r.putBit(!1);for(;;){if(r.getLengthInBits()>=8*s)break;if(r.put(QRCode.PAD0,8),r.getLengthInBits()>=8*s)break;r.put(QRCode.PAD1,8)}return QRCode.createBytes(r,i)},QRCode.createBytes=function(e,t){var n,i,r,o,a,s,c,l,u,d,h,p,f,g,m,v;for(n=0,i=0,r=0,o=Array(t.length),a=Array(t.length),s=0;t.length>s;s++){for(c=t[s].dataCount,l=t[s].totalCount-c,i=Math.max(i,c),r=Math.max(r,l),o[s]=Array(c),u=0;o[s].length>u;u++)o[s][u]=255&e.buffer[u+n];for(n+=c,d=QRUtil.getErrorCorrectPolynomial(l),h=new QRPolynomial(o[s],d.getLength()-1),p=h.mod(d),a[s]=Array(d.getLength()-1),u=0;a[s].length>u;u++)f=u+p.getLength()-a[s].length,a[s][u]=f>=0?p.get(f):0}for(g=0,u=0;t.length>u;u++)g+=t[u].totalCount;for(m=Array(g),v=0,u=0;i>u;u++)for(s=0;t.length>s;s++)o[s].length>u&&(m[v++]=o[s][u]);for(u=0;r>u;u++)for(s=0;t.length>s;s++)a[s].length>u&&(m[v++]=a[s][u]);return m},QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)t^=QRUtil.G15<<QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G15);return(e<<10|t)^QRUtil.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)t^=QRUtil.G18<<QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return QRUtil.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case QRMaskPattern.PATTERN000:return 0==(t+n)%2;case QRMaskPattern.PATTERN001:return 0==t%2;case QRMaskPattern.PATTERN010:return 0==n%3;case QRMaskPattern.PATTERN011:return 0==(t+n)%3;case QRMaskPattern.PATTERN100:return 0==(Math.floor(t/2)+Math.floor(n/3))%2;case QRMaskPattern.PATTERN101:return 0==t*n%2+t*n%3;case QRMaskPattern.PATTERN110:return 0==(t*n%2+t*n%3)%2;case QRMaskPattern.PATTERN111:return 0==(t*n%3+(t+n)%2)%2;default:throw Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){var t,n;for(t=new QRPolynomial([1],0),n=0;e>n;n++)t=t.multiply(new QRPolynomial([1,QRMath.gexp(n)],0));return t},getLengthInBits:function(e,t){if(t>=1&&10>t)switch(e){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw Error("mode:"+e)}else if(27>t)switch(e){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw Error("mode:"+e)}else{if(!(41>t))throw Error("type:"+t);switch(e){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw Error("mode:"+e)}}},getLostPoint:function(e){var t,n,i,r,o,a,s,c,l,u,d;for(t=e.getModuleCount(),n=0,i=0;t>i;i++)for(r=0;t>r;r++){for(o=0,a=e.isDark(i,r),s=-1;1>=s;s++)if(!(0>i+s||i+s>=t))for(c=-1;1>=c;c++)0>r+c||r+c>=t||(0!=s||0!=c)&&a==e.isDark(i+s,r+c)&&o++;o>5&&(n+=3+o-5)}for(i=0;t-1>i;i++)for(r=0;t-1>r;r++)l=0,e.isDark(i,r)&&l++,e.isDark(i+1,r)&&l++,e.isDark(i,r+1)&&l++,e.isDark(i+1,r+1)&&l++,(0==l||4==l)&&(n+=3);for(i=0;t>i;i++)for(r=0;t-6>r;r++)e.isDark(i,r)&&!e.isDark(i,r+1)&&e.isDark(i,r+2)&&e.isDark(i,r+3)&&e.isDark(i,r+4)&&!e.isDark(i,r+5)&&e.isDark(i,r+6)&&(n+=40);for(r=0;t>r;r++)for(i=0;t-6>i;i++)e.isDark(i,r)&&!e.isDark(i+1,r)&&e.isDark(i+2,r)&&e.isDark(i+3,r)&&e.isDark(i+4,r)&&!e.isDark(i+5,r)&&e.isDark(i+6,r)&&(n+=40);for(u=0,r=0;t>r;r++)for(i=0;t>i;i++)e.isDark(i,r)&&u++;return d=Math.abs(100*u/t/t-50)/5,n+=10*d}},QRMath={glog:function(e){if(1>e)throw Error("glog("+e+")");return QRMath.LOG_TABLE[e]},gexp:function(e){for(;0>e;)e+=255;for(;e>=256;)e-=255;return QRMath.EXP_TABLE[e]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)};for(i=0;8>i;i++)QRMath.EXP_TABLE[i]=1<<i;for(i=8;256>i;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(i=0;255>i;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;QRPolynomial.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){var t,n,i;for(t=Array(this.getLength()+e.getLength()-1),n=0;this.getLength()>n;n++)for(i=0;e.getLength()>i;i++)t[n+i]^=QRMath.gexp(QRMath.glog(this.get(n))+QRMath.glog(e.get(i)));return new QRPolynomial(t,0)},mod:function(e){var t,n,i;if(0>this.getLength()-e.getLength())return this;for(t=QRMath.glog(this.get(0))-QRMath.glog(e.get(0)),n=Array(this.getLength()),i=0;this.getLength()>i;i++)n[i]=this.get(i);for(i=0;e.getLength()>i;i++)n[i]^=QRMath.gexp(QRMath.glog(e.get(i))+t);return new QRPolynomial(n,0).mod(e)}},QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],QRRSBlock.getRSBlocks=function(e,t){var n,i,r,o,a,s,c,l;if(n=QRRSBlock.getRsBlockTable(e,t),void 0==n)throw Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(i=n.length/3,r=Array(),o=0;i>o;o++)for(a=n[3*o+0],s=n[3*o+1],c=n[3*o+2],l=0;a>l;l++)r.push(new QRRSBlock(s,c));return r},QRRSBlock.getRsBlockTable=function(e,t){switch(t){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+3];default:return void 0}},QRBitBuffer.prototype={get:function(e){var t=Math.floor(e/8);return 1==(1&this.buffer[t]>>>7-e%8)},put:function(e,t){for(var n=0;t>n;n++)this.putBit(1==(1&e>>>t-n-1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);t>=this.buffer.length&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},function(e){e.fn.qrcode=function(t){var n,i;return"string"==typeof t&&(t={text:t}),t=e.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:QRErrorCorrectLevel.H,background:"#ffffff",foreground:"#000000"},t),n=function(){var e,n,i,r,o,a,s,c,l;for(e=new QRCode(t.typeNumber,t.correctLevel),e.addData(t.text),e.make(),n=document.createElement("canvas"),n.width=t.width,n.height=t.height,i=n.getContext("2d"),r=t.width/e.getModuleCount(),o=t.height/e.getModuleCount(),a=0;e.getModuleCount()>a;a++)for(s=0;e.getModuleCount()>s;s++)i.fillStyle=e.isDark(a,s)?t.foreground:t.background,c=Math.ceil((s+1)*r)-Math.floor(s*r),l=Math.ceil((a+1)*r)-Math.floor(a*r),i.fillRect(Math.round(s*r),Math.round(a*o),c,l);return n},i=function(){var n,i,r,o,a,s,c;for(n=new QRCode(t.typeNumber,t.correctLevel),n.addData(t.text),n.make(),i=e("<table></table>").css("width",t.width+"px").css("height",t.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",t.background),r=t.width/n.getModuleCount(),o=t.height/n.getModuleCount(),a=0;n.getModuleCount()>a;a++)for(s=e("<tr></tr>").css("height",o+"px").appendTo(i),c=0;n.getModuleCount()>c;c++)e("<td></td>").css("width",r+"px").css("background-color",n.isDark(a,c)?t.foreground:t.background).appendTo(s);return i},this.each(function(){var r="canvas"==t.render?n():i();e(r).appendTo(this)})}}(jQuery),function(e,t){var n,i,r,o,a,s;if(r=e.srcDoc,o=!!("srcdoc"in t.createElement("iframe")),a={compliant:function(e,t){t&&e.setAttribute("srcdoc",t)},legacy:function(e,t){var n;e&&e.getAttribute&&(t?e.setAttribute("srcdoc",t):t=e.getAttribute("srcdoc"),t&&(n="javascript: window.frameElement.getAttribute('srcdoc');",e.setAttribute("src",n),e.contentWindow&&(e.contentWindow.location=n)))}},s=e.srcDoc={set:a.compliant,noConflict:function(){return e.srcDoc=r,s}},!o)for(s.set=a.legacy,i=t.getElementsByTagName("iframe"),n=i.length;n--;)s.set(i[n])}(this,this.document),function(){var e=Array.prototype,t=(Object.prototype,Function.prototype,e.slice),n=function(){},i=function(e){return $.each(t.call(arguments,1),function(t,n){var i;for(i in n)void 0!==n[i]&&(e[i]=n[i])}),e},r=function(e,t,r){var o;return o=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i(o,e),n.prototype=e.prototype,o.prototype=new n,t&&i(o.prototype,t),r&&i(o,r),o.prototype.constructor=o,o.__super__=e.prototype,o},o=function(e,t){var n=r(this,e,t);return n.extend=this.extend,n},a=function(){};a.extend=o,TAPP.Klass=a,TAPP.Module=a.extend({register_for_event:function(e,t){$.subscribe(e,$.proxy(t,this))},register_post_load_hooks:function(e){var t=this;$.each(e,function(e,n){t.register_for_event(e,n)})},register_app_hooks:function(e){var t=this;$.each(e,function(e,n){t.register_for_event(e,n)})},publish_app_event:function(e,t){$.publish(e,t)},unload_functions:[],unload:function(){$.each(this.unload_functions,function(){this()}),this.unload_functions=[]}})}(TAPP),function(){var e=$.Deferred();$(window).on("load",function(){e.resolve()}),$.fn.serializeObject=function(e){var t,n;return t={},n=this.serializeArray(),$.each(n,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||"",e&&("on"===t[this.name]&&(t[this.name]=1),"off"===t[this.name]&&(t[this.name]=0))}),t},$.fn.affix=function(){var e,t,n,i,r,o,a,s;return e=$(window),t=[],n=e.scrollTop(),i=function(e){var t,i;t="true"===e.el.attr("data-is-stuck"),i=e.start_top-e.offset>=n,t&&i&&(e.el.removeClass("stuck"),e.el.attr("data-is-stuck","false")),t||i||(e.el.addClass("stuck"),e.el.attr("data-is-stuck","true"))},r=function(){n=e.scrollTop(),_.each(t,i)},o=!1,a=function(){e.on("scroll.affix",_.debounce(r,10)),o=!0},s=function(e){var n,i;return n=$(this),n.length?(i=n.attr("data-start-offset-top"),i===void 0&&(i=n.offset().top,n.attr("data-start-offset-top",i)),i=parseInt(i,10),o||a(),t.push({offset:e,el:n,start_top:i}),this):this},s.unload=function(){t=[],n=e.scrollTop(),e.off("scroll.affix"),o=!1},s}(),TAPP.utils={intcomma:function(e){return e=""+e,e.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},show_form_errors:function(e,t){$.each(t,function(t,n){var i,r,o,a;i=e.find(".field-"+t),i.addClass("bad"),r=i.find("input,textarea"),r.addClass("bad"),o="",$.each(n,function(e,t){o+="<li>"+t+"</li>"}),a=i.find("ul.error"),a.length||(r.after('<ul class="error"></ul>'),a=i.find("ul.error")),a.html(o)})},is_touch:function(){return $("html").hasClass("touch")},is_widescreen:function(){return $("html").hasClass("breakpoint-widescreen")},handle_resize:function(){$(window).on("resize",_.debounce(Modernizr.test_media_queries,50))},on_window_load:function(t){e.done(t)},fit_to_box:function(e,t,n,i,r){var o,a,s;return r=r||!1,n>e&&i>t&&!r?[e,t]:(o=Math.max(e/n,t/i),a=parseInt(t/o,10),s=parseInt(e/o,10),[s,a])}}}(TAPP),function(){var e,t,n,i,r;e={backdrop:!1,zIndex:1e4,buttons:{Close:function(){$(this).modal("close")}}},t=function(e,t,n){e=$("<div/>").addClass("modal-header").html(e),t=$("<div/>").addClass("modal-body").html(t),n=$("<div/>").addClass("modal-footer btn-group-spaced").html(n);
var i=$("<div/>").addClass("modal").append(e).append(t).append(n);return i.addClass("hide").appendTo($("body")),$(i)},n=function(e){if(!e)return null;var t=$("<div/>");return $.each(e,function(e,n){var i,r,o,a,s,c;i=n.text||e,r=n["class"]||"mgt-btn btn btn-small",o=n.attrs||{},a=n.data||{},s=n.click||$.noop(),c=$("<button/>").text(i).addClass(r).on("click",s).data(a),$.each(o,function(e,t){c.attr(e,t)}),t.append(c)}),t},i=function(i,r){var o,a,s,c;return"string"!=typeof i&&(i=i.html()),o=r.title||"",a=r.buttons?n(r.buttons):r.footer||"",s=$.extend({},e,r),c=t(o,i,a),c.addClass(s.modal_classes),c.modal(s),c},r=TAPP.Module.extend({markup_dialog:function(e,t){return i(e,t)},error_dialog:function(e,t,n){var r,o;return e=e||"Something is wrong with the server. Please wait a moment and try again.",o=$.extend({},{title:"<h3>An error occurred<h3>",dialogClass:"error-dialog",buttons:{Ok:{click:function(){r.modal("hide"),r.remove(),t&&t()}}}},n),r=i(e,o),r.modal("show"),r},confirm_dialog:function(e,t,n,r,o,a){var s,c;r=r||"<h3>Are you sure?</h3>",o=(o||"")+" confirmation-dialog",s=$(e),c=function(e){var s,c,l,u;return e.preventDefault(),e.stopImmediatePropagation(),c=$(this),l=a||{Cancel:{click:function(){s.modal("hide")}},Continue:{click:function(){c.unbind(e),c.trigger($.Event(t)),s.modal("hide")},text:"Continue","class":"mgt-btn mgt-btn-primary btn-small"}},c.data("dialog-init")?s=c.data("dialog-init"):(u={title:r,dialogClass:o,buttons:l},s=i(n,u),c.data("dialog-init",s)),s.modal("show"),!1},s.bind(t,c)},upgrade_dialog:function(e,t,n){var r,o,a,s;return t='<h3 class="no-text-transform">'+(t||"Upgrade To Get More")+"</h3>",o=function(){r.modal("hide"),r.remove()},a={title:t,dialogClass:"upgrade-dialog",backdrop:!0,buttons:{Close:{click:o,"class":"pull-left btn"},Upgrade:{click:function(){o(),n()},"class":"btn btn-success"}}},s="<p>"+e+"</p>",r=i(s,a)}}),TAPP.dialogs=new r,TAPP.dialogs.register_post_load_hooks({confirm_dialog:TAPP.dialogs.confirm_dialog,error_dialog:TAPP.dialogs.error_dialog})}(TAPP),function(){var e=TAPP.Module.extend({get_cc_data:function(){return{number:$("#card-number").val(),cvc:$("#card-cvc").val(),exp_month:$("#card-exp-month").val(),exp_year:$("#card-exp-year").val(),name:$("#card-name").val()}},handle_form_submit:function(e){var t,n,i;return t=$("#card-exp-year").val(),2===t.length&&$("#card-exp-year").val("20"+t),n=$("[data-cc-submit]",e),n.attr("disabled","disabled"),i=$.Deferred(),Stripe.createToken(this.get_cc_data(),function(e,t){var r,o,a;t.error?(t.error.param&&(r=$("#card-"+t.error.param.replace("_","-")),o=r.closest(".control-group"),o.addClass("error"),$("body").on("change",r,function(){o.removeClass("error")})),a=t.error.message,window._kmq=window._kmq||[],window._kmq.push(["record","Stripe Error",{"Error Message":a}]),a[0].toUpperCase()!==a[0]&&(a="We couldn't process your order. Please fix the following information:"),$(".payment-errors").text(a),n.removeAttr("disabled"),i.reject(t)):($("#stripe_token").val(t.id),i.resolve(t))}),i},init:function(){Stripe.setPublishableKey(page_context.stripe_publishable_key)}});TAPP.stripe=new e}(TAPP),function(){var e,t;e=[],t=TAPP.Module.extend({fire_off_event:function(e,t,n){var i,r;!page_context.disable_mixpanel&&window.mixpanel&&(r=function(){clearTimeout(i),n&&n()},$.extend(t,{distinct_id:page_context.cookie_value}),t.user_id&&mixpanel.name_tag(t.user_id),mixpanel.track(e,t,function(){r()}),n&&(i=setTimeout(n,300)),page_context.console_log_mixpanel&&console.log(e+", "+JSON.stringify(t)))},mixpanel_process_event_queue:function(t){var n=function(){e=[],t()};$.waitForFuncs(e,TAPP.event_tracking.fire_off_event,n)},mixpanel_empty_event_queue:function(){e=[]},mixpanel_event_delegate:function(){$("body").delegate("[data-mixpanel-event]","click",function(t){var n,i,r,o;n=$(this).data("mixpanel-event"),i=TAPP.event_tracking.mixpanel_global_metadata(),$.extend(i,$(this).data("mixpanel-info")),$(this).data("mixpanel-deferred")?e.push([n,i]):$(this).attr("data-mixpanel-navigate-wait")&&!page_context.is_pjax?(r=$(this).attr("href"),o=function(){window.top.location=r},t.stopImmediatePropagation(),t.preventDefault(),TAPP.event_tracking.fire_off_event(n,i,o)):TAPP.event_tracking.fire_off_event(n,i)})},mixpanel_global_metadata:function(){var e,t;return e={app_display_name:page_context.fb_app_display_name,page_id:page_context.fb_page_id,user_id:page_context.authenticated_user_id,device:$(".app-platform-carousel a.selected").data("mixpanel-device"),href:window.location.href},page_context.mixpanel_data&&$.extend(e,page_context.mixpanel_data),t={},_.each(e,function(e,n){e!==void 0&&(t[n]=e)}),t},track_event:function(e,t,n){var i=this.mixpanel_global_metadata();return t&&$.extend(i,t),this.fire_off_event(e,i,n)},track_event_server_side:function(e,t){var n={action:"receive_event",event_name:e};return t&&$.extend(n,t),$.ajax({type:"POST",url:""+window.location,data:n})}}),TAPP.event_tracking=new t,TAPP.event_tracking.register_app_hooks({track_event:TAPP.event_tracking.track_event,process_event_tracking_queue:TAPP.event_tracking.mixpanel_process_event_queue,empty_event_tracking_queue:TAPP.event_tracking.mixpanel_empty_event_queue})}(TAPP),TAPP.event_tracking.mixpanel_event_delegate(),function(){(function(e){var t=e.ajaxSettings.xhr;e.ajaxSetup({progress:e.noop,xhr:function(){var e=t(),n=this;return e&&e.upload&&"function"==typeof e.upload.addEventListener&&e.upload.addEventListener("progress",function(e){n.progress(e)},!1),e}})})(jQuery);var e=function(e){this.activator=e.activator,this.file_input=e.file_input,this.onfile=e.onfile||$.noop,this.onresetfile=e.onresetfile||$.noop,this.onuploadstart=e.onuploadstart||$.noop,this.onprogress=e.onprogress||$.noop,this.onuploaddone=e.onuploaddone||$.noop,this.allow=e.allow||!1,this.ondisallow=e.ondisallow||$.noop,this.max_file_size=e.max_file_size||!1,this.upload_to=e.upload_to,this.extra_data=e.extra_data||[],this.upload_on_change=e.upload_on_change||!1,this.upload_state=$.Deferred()};$.extend(e.prototype,{handle_change:function(e){var t,n,i,r,o;if(t=e.target.files&&e.target.files.length?e.target.files[0]:!1,!e.target.files&&!t)return n=$(e.target),i=n.closest("form"),i.get(0).submit(),void 0;if(t){if(this.allow&&!this.allow.test(t.type))return this.ondisallow(t),void 0;if(this.max_file_size&&t.size>this.max_file_size)return r=this.max_file_size/1024/1024,o=Math.round(100*(t.size/1024/1024))/100,TAPP.dialogs.error_dialog("The max file size is "+r+"MB. The file you tried to attach was "+o+"MB"),void 0;this.file=t,this.onfile(t,function(){var e,n;return e=new FileReader,n=$.Deferred(),e.onload=function(e){n.resolve(e)},e.readAsDataURL(t),n}),this.upload_on_change&&this.upload_file()}},handle_activator_click:function(){return this.file_input.trigger("click"),!1},bind_events:function(){this.activator.tapp_on("click.uploader",$.proxy(this.handle_activator_click,this)),this.bind_file_events()},bind_file_events:function(){this.file_input.tapp_on("change.uploader",$.proxy(this.handle_change,this))},reset_file_upload:function(){this.upload_state=$.Deferred(),this.file_input.off("change.uploader"),this.file_input.replaceWith(this.file_input.val("").clone(!0)),this.bind_file_events(),this.onresetfile()},upload_file:function(){this.onuploadstart();var e=new FormData;e.append("content",this.file),_.map(this.extra_data,function(t){e.append(t[0],t[1])}),this.current_upload=this.upload_to(e,$.proxy(function(e){if(e.lengthComputable){var t=parseInt(100*(e.loaded/e.total),10);this.onprogress(t)}},this)),this.current_upload.fail($.proxy(function(e){var t,n;t=JSON.parse(e.responseText),507===e.status?(n="file-size"===t.meta.error_slug?"Oops! This file is too large":"Wow! You have used up your file storage allotment",TAPP.dialogs.upgrade_dialog(t.meta.error_message,n,function(){window.location=page_context.upgrade_storage_url})):TAPP.dialogs.error_dialog(),this.upload_state.reject(),this.reset_file_upload()},this)),this.current_upload.done($.proxy(function(e){this.upload_state.resolve(e),this.onuploaddone(e)},this))},update_progress:function(e){this.onprogress(e)}}),window.TAPP.FileUploader=e}(),function(){var e,t;e=function(e){this.button=$(e),this.upload_type=this.button.data("upload"),this.pre_select_aspect_ratio=parseFloat(this.button.data("pre-select-aspect-ratio")),this.restrict_aspect_ratio=parseFloat(this.button.data("restrict-aspect-ratio")),this.max_file_size=parseInt(this.button.data("max-file-size"),10),this.min_width=parseInt(this.button.data("min-width"),10),this.preview=$("[data-"+this.upload_type+"-preview]"),this.use_background_image=1===parseInt(this.preview.data("background-image"),10),this.use_server_side_resize=1===parseInt(this.preview.data("server-side-resize"),10),this.file_input=$("input[type=file][name="+this.upload_type+"]"),this.is_touch=TAPP.utils.is_touch();var t={activator:this.button,file_input:this.file_input,onresetfile:$.proxy(this.onresetfile,this),onuploadstart:$.proxy(this.onuploadstart,this),onuploaddone:$.proxy(this.onuploaddone,this),ondisallow:function(){TAPP.dialogs.error_dialog("You can only upload images. The file you tried to upload was not an image.")},upload_on_change:!0,upload_to:$.proxy(this.uploadto,this),extra_data:[["upload_type",this.upload_type],["action",this.is_touch?"upload_asset":"upload_intermediate_asset"]],allow:/image\/(gif|png|jpeg)/,max_file_size:this.max_file_size};this.uploader=new TAPP.FileUploader(t),this.uploader.bind_events()},$.extend(e.prototype,{pre_selection:function(e,t,n){var i,r,o,a,s,c,l,u,d;return i=e.image,r=t/2,o=n/2,a=i.width/2,s=i.height/2,c=a-r,0>c&&(c=0),l=c+t,l>i.width&&(l=i.width),u=s-o,0>u&&(u=0),d=u+n,d>i.height&&(d=i.height),[c,u,l,d]},load_new_image:function(e){this.use_background_image?this.preview.css("background-image","url("+e+")"):this.preview.attr("src",e)},finish_file_upload:function(e){var t,n,i;t=this.crop.w,this.min_width&&this.min_width>this.crop.w&&(t=this.min_width),n=$.map([this.crop.x,this.crop.y,t,this.crop.h],function(e){return Math.floor(e)}),i=this,$.post(window.location.href,{action:"finish_asset",upload_type:this.upload_type,asset_id:this.file_data.image.id,crop_x:n[0],crop_y:n[1],crop_w:n[2],crop_h:n[3]}).done($.proxy(function(t){return t.error?this.handle_error(t):(this.load_new_image(t.image.url),e(),void 0)},this)).fail(function(){i.handle_error()})},resize_modal:function(){var e,t,n,i,r,o;e=630,t=this.crop_dialog.find(".modal-body"),n=t.height(),i=$(window).height(),r=this.crop_dialog.height()+100,o=n-(r-i+60),o>e&&(o=e),o!==n&&t.css("max-height",o)},close_crop_dialog:function(){this.crop_dialog&&($(window).off("resize.crop"),this.crop_dialog.modal("hide"),this.crop_dialog.find("img").Jcrop("destroy"),this.crop_dialog.remove())},close_loading_dialog:function(){this.loading_dialog.modal("hide"),this.loading_dialog.remove()},crop_image:function(){var e,t;return this.min_width&&this.min_width>this.file_data.image.width?(TAPP.dialogs.error_dialog("This image must be at least "+this.min_width+"px wide."),this.uploader.reset_file_upload(),!1):(this.crop_dialog=TAPP.dialogs.markup_dialog("<div data-crop-dialog><div class='crop-dialog'><img></div></div>",{title:"Crop your image",modal_classes:"image-crop",buttons:{Close:{click:$.proxy(this.close_crop_dialog,this),"class":"btn btn-danger pull-left btn-small"},Crop:{click:$.proxy(function(e){var t,n;t=$(e.target),n=TAPP.lock_up(t),t.addClass("loading"),this.finish_file_upload($.proxy(function(){t.removeClass("loading"),n(),this.close_crop_dialog(),this.uploader.reset_file_upload()},this))},this),"class":"btn btn-success btn-small"}}}),this.crop_dialog.find("img").attr({src:this.file_data.image.url,width:this.file_data.image.preview_width+"px",height:this.file_data.image.preview_height+"px"}).css({margin:"0 auto"}),e=TAPP.utils.fit_to_box(this.pre_select_aspect_ratio,1,this.file_data.image.width,this.file_data.image.height,!0),this.min_width>e[0]&&(e[0]=this.min_width),t={trueSize:[this.file_data.image.width,this.file_data.image.height],setSelect:this.pre_selection(this.file_data,e[0],e[1]),onSelect:$.proxy(function(e){var t,n,i,r;this.crop=e,1===this.restrict_aspect_ratio?(t=Math.round((e.h+e.w)/2),n=Math.floor(e.x),i=Math.floor(e.y),this.crop.x=n,this.crop.x2=n+t,this.crop.y=i,this.crop.y2=i+t,this.crop.w=this.crop.h=t):(r=this,_.each(_.keys(e),function(t){r.crop[t]=Math.round(e[t])}))},this)},this.restrict_aspect_ratio&&(t.aspectRatio=this.pre_select_aspect_ratio),this.min_width&&(t.minSize=[this.min_width,0]),this.crop_dialog.find("img").Jcrop(t),$(window).on("resize.crop",_.debounce($.proxy(this.resize_modal,this),50)),this.resize_modal(),void 0)},uploadto:function(e,t){var n={type:"POST",url:window.location.href,data:e,cache:!1,contentType:!1,processData:!1,progress:t};return $.ajax(n)},onuploadstart:function(){this.loading_dialog=TAPP.dialogs.markup_dialog("<div class='loading-dialog'><div class='spinner'></div></div>",{title:"Loading your image...",modal_classes:"loading-image-dialog"})},onuploaddone:function(e){return this.close_loading_dialog(),e.error?(this.handle_error(e),!1):(this.file_data=e,TAPP.utils.is_touch()?this.load_new_image(e.image.url):this.crop_image(),void 0)},onresetfile:function(){this.close_crop_dialog(),this.close_loading_dialog()},handle_error:function(e){var t=e&&e.error||void 0;TAPP.dialogs.error_dialog(t),this.uploader.reset_file_upload()}}),t=TAPP.Module.extend({settings_view_init:function(){this.file_uploads(),this.confirm_deauthorize(),this.confirm_revoke_password(),this.my_stream_settings_form(),this.hash_expand(),this.settings_accordion(),this.expandable_item_accordion(),this.confirm_username(),this.confirm_account_upgrade(),this.discounted_user_creator(),this.cancel_flow(),TAPP.utils.handle_resize(),$("[data-error-form]").click()},select2_init:function(){$("#id_language,#id_timezone").select2({width:"250px"})},file_uploads:function(){$("[data-upload]").each(function(){new e(this)})},confirm_deauthorize:function(){$("body").tapp_on("click","[data-deauthorize]",function(){var e,t,n,i,r,o,a;return e=$(this),t=TAPP.lock_up(e),n=e.closest("form"),i=_.escape(e.data("app-name")),o={Cancel:{click:function(){return r.remove(),t(),!1},"class":"btn btn-small"},Deauthorize:{click:function(){return r.remove(),t(),n.submit(),!1},text:"Deauthorize","class":"btn btn-danger btn-small"}},a={title:"<strong>Deauthorize "+i+"</strong>",buttons:o},r=TAPP.dialogs.markup_dialog("Are you sure you want to deauthorize this app?",a),r.show(),!1})},confirm_revoke_password:function(){$("body").tapp_on("click","[data-revoke-password]",function(){var e,t,n,i,r,o,a;return e=$(this),t=TAPP.lock_up(e),n=e.closest("form"),i=_.escape(e.data("password-name")),o={Cancel:{click:function(){return r.remove(),t(),!1},"class":"btn btn-small"},Revoke:{click:function(){return r.remove(),t(),n.submit(),!1},text:"Revoke","class":"btn btn-danger"}},a={title:"<strong>Revoke "+i+"</strong>",buttons:o},r=TAPP.dialogs.markup_dialog("Are you sure you want to revoke "+i+"?",a),r.show(),!1})},confirm_username:function(){$("body").tapp_on("click","[data-change-username]",function(){var e,t,n,i,r;return e=$(this).closest("form"),n={Cancel:{click:function(){t.remove()},"class":"btn btn-small"},Confirm:{click:function(){return e.submit(),t.remove(),!1},text:"Change Username","class":"btn btn-danger"}},i={title:"<strong>Change Username</strong>",buttons:n},r=$(this).data("confirm-msg"),t=TAPP.dialogs.markup_dialog(r,i),t.show(),!1})},confirm_account_upgrade:function(){$("body").tapp_on("click","[data-upgrade-account]",function(){var e,t,n,i,r,o,a;return e=_.escape($(this).attr("data-payment-source-name")),t=_.escape($(this).attr("data-upgrade-amount")),n=_.escape($(this).attr("data-upgrade-date")),i=$(this).closest("form"),o={Cancel:{click:function(){r.remove()},"class":"btn btn-small"},Confirm:{click:function(){return i.submit(),r.remove(),!1},text:"Upgrade Account","class":"btn btn-small"}},a={title:"<strong>Upgrade Account</strong>",buttons:o},r=TAPP.dialogs.markup_dialog("Are you sure you want to upgrade your account? Your "+e+" will be billed $"+t+(n?" on "+n:"")+".",a),r.show(),!1})},my_stream_settings_form:function(){$("body").tapp_on("change","[data-my-stream-settings] input",function(){var e=$(this).closest("form");e.submit()})},hash_expand:function(){var e,t;e=window.location.hash,t=e.substr(1,e.length),t&&($("[data-expandable-setting]").each(function(e,t){$(t).removeClass("expanded")}),$("[name="+t+"]").addClass("expanded"),$("[data-expandable-setting]").trigger("new-expanded"))},settings_accordion:function(){$("body").on("click","[data-expandable-setting]",function(){var e=$(this);e.hasClass("expanded")||($("[data-expandable-setting].expanded").removeClass("expanded").find(".icon-chevron-up, .icon-chevron-down").removeClass("icon-chevron-down").addClass("icon-chevron-up"),e.addClass("expanded").find(".icon-chevron-up, .icon-chevron-down").removeClass("icon-chevron-up").addClass("icon-chevron-down"),$("[data-expandable-setting]").trigger("new-expanded"))})},expandable_item_accordion:function(){$("body").on("click","[data-expand-expandable-item]",function(){var e=$(this).closest("[data-expandable-item]");return e.hasClass("expanded")||($("[data-expandable-item]").removeClass("expanded"),e.addClass("expanded")),!1})},payment_details_init:function(){var e,t,n,i;$("#id_plan_choice").select2({width:"250px"}),e=$("[data-card-details]"),t=$("[data-card-details-form]"),n=t.data("local-action"),$("body").on("click","[data-edit-card-details]",function(){return e.addClass("hide"),t.removeClass("hide"),!1}),TAPP.stripe.init(),i=$("#payment-form"),i.on("submit",function(e){var t=$("[data-spinner]");return t.removeClass("hide"),e.preventDefault(),TAPP.stripe.handle_form_submit(i).done(function(){var e={stripe_token:$("#stripe_token").val(),payment_method:$("#id_payment_method").val(),plan_choice:$("#id_plan_choice").val(),action:n};$(".payment-errors").text(""),$.post(window.location.href,e).done(function(e){if("error"===e.status)if($(".payment-errors").text(e.message),$(".hide-on-payment-error").addClass("hide"),"card"===e.error_type){var t=$("#card-number");t.closest(".control-group").addClass("error"),$("body").on("change",t,function(){t.closest(".control-group").removeClass("error"),$("body").off("change",t)})}else"user_details"===e.error_type&&TAPP.utils.show_form_errors(i,e.form_errors);else $("[data-card-update-complete]").submit()}).fail(function(){$(".payment-errors").text("Something is wrong with the server. Please wait a moment and try again.")}).always(function(){$("[data-cc-submit]").removeAttr("disabled"),t.addClass("hide")})}).fail(function(){t.addClass("hide")}),!1})},developer_enrollment_init:function(){$("#id_country").select2({width:"250px"})},discounted_user_creator:function(){$("body").on("click","[data-create-discounted-user]",function(){return $.ajax({url:window.location.href,type:"POST",data:{action:"add_discounted_code"},success:function(){window.location.reload()}}),!1})},submission_lockup:function(){$("body").on("click","[data-submit-for-approval]",function(){TAPP.lock_up($(this))})},init_star_app_feedback:function(){var e=function(e){$.ajax({url:window.location.href,type:"POST",data:{action:"star_rating",rating:e}})};$("[data-star-rating]").each(function(){var t,n,i;t=$(this),n=t.data("target"),i=$.map([1,2,3,4,5,6,7,8,9,10],function(e){return e+" stars"}),t.raty({cancel:!0,target:n,targetKeep:!0,targetType:"number",number:10,size:74,hintList:i,path:"/static/palama/images/",click:e})})},cancel_flow:function(){$("body").tapp_on("click","[data-cancel-account-begin], [data-resubscribe-btn]",function(){return $(".user-settings .non-standalone").addClass("hide"),$(".user-settings .standalone").removeClass("hide"),$(this).is("[data-cancel-account-begin]")?$(".user-settings .standalone .are-you-sure-cancel").removeClass("hide"):$(".user-settings .standalone .resubscribe").removeClass("hide"),!1}),$("body").tapp_on("click","[data-goto-cancel-survey]",function(){var e,t,n;return e=$(this),t=e.data("plan-choice"),n=e.data("plan-name"),$(".user-settings .standalone .are-you-sure-cancel").addClass("hide"),$(".user-settings .standalone .cancel-survey").removeClass("hide"),$("[data-downgrade-form]").find("[name=plan_choice]").val(t),$("[data-plan-type]").text(n),!1}),$("body").tapp_on("click","[data-cancel-account-begin]",function(){TAPP.event_tracking.track_event_server_side("cancel-begin"),TAPP.event_tracking.track_event_server_side("Begin Cancellation Flow",{kissmetrics:!0})}),$("body").tapp_on("click","[data-goto-cancel-survey]",function(){TAPP.event_tracking.track_event_server_side("cancel-benefits-btn-proceed"),TAPP.event_tracking.track_event_server_side("Advance Cancellation Flow",{kissmetrics:!0})})},init_invites:function(){var e,t;e=$('[name="should_email"][value=0]'),t=$('[name="should_email"][value=1]'),$('[name="email"]').tapp_on("keypress",function(){e.prop("checked",!1),t.prop("checked",!0)})},init_qrcode:function(){$("[data-qrcode]").each(function(){var e=$(this);e.qrcode({width:e.data("qrcode-width"),height:e.data("qrcode-height"),text:e.data("qrcode-text")})})},init_upgrade_form:function(){var e,t,n,i,r,o,a,s;t=function(){e=TAPP.dialogs.markup_dialog('<p class="ta-center"><i class="icon icon-refresh icon-spin"></i>',{title:"<h3>Processing...</h3>"})},n=function(){e.remove()},i=function(e,t,i,o){var a={action:"upgrade_user",plan_choice:t,payment_method:page_context.new_payment_source};e&&(a.stripe_token=e),i&&(a.current_password=i),o&&(a.resubscribe=1),$.post(window.location.href,a).done(function(e){var i,o,a;"error"===e.result?(window._kmq.push(["record","Sign Up Error",{"Error Type":e.response.error_type,"Error Message":e.response.message}]),n(),i={},"card"===e.response.error_type&&(a=function(){o.modal("hide"),o.remove()},i={buttons:{Close:{click:function(){return a(),!1},text:"Close","class":"btn pull-left"},"Update Card":{click:function(){return a(),e.response.location?window.location=e.response.location:r(t),!1},text:"Update Card","class":"btn pull-right btn-success"}}}),o=TAPP.dialogs.error_dialog(e.response.message,$.noop,i)):window.location.href=e.response.location}).fail(function(){n(),TAPP.dialogs.error_dialog(),window._kmq.push(["record","Sign Up Failure",{Location:"upgrade_form"}])})},r=function(e){var n,r,o;n=$("#id_plan_choice").find('[value="'+e+'"]'),r=n.data("name"),o=n.data("price"),StripeCheckout.open({key:page_context.stripe_publishable_key,amount:o,name:r,description:"Upgrade Your App.net Subscription",panelLabel:"Pay",image:get_img_url("/static/makana/images/appdotnet-stripe-icon.png"),token:function(n){i(n.id,e),t()}})},o=function(e){i("",e)},a=function(e){var n,r,o,a,s,c,l;n=$("#id_plan_choice").find('[value="'+e+'"]'),n.data("name"),r=n.data("price"),a={Cancel:{click:function(){o.remove()},"class":"btn btn-small pull-left",attrs:{tabIndex:-1}},Confirm:{click:function(){var n=$('[name="password"]').val();return i(!1,e,n),o.remove(),t(),!1},text:"Upgrade Account","class":"btn btn-success"}},s={title:"<strong>Upgrade Account</strong>",buttons:a},c=(r/100).toFixed(2),l='<p class="yui3-u-1 ta-center"><label class="password-confirmation">Enter your password to upgrade</label><input class="yui3-u-1-3 m-yui3-u-2-3" name="password" type="password"></p>',o=TAPP.dialogs.markup_dialog("<p>Are you sure you want to upgrade your account? Your "+page_context.current_payment_source+" will be billed $"+c+"</p>"+l,s),o.show()},s=function(e){var n,r,o,a,s;n=$("#id_plan_choice").find('[value="'+e+'"]'),n.data("name"),n.data("price"),o={Cancel:{click:function(){r.remove()},"class":"btn btn-small pull-left",attrs:{tabIndex:-1}},Confirm:{click:function(){var n=$('[name="password"]').val();return i(!1,e,n,!0),r.remove(),t(),!1},text:"Resubscribe Account","class":"btn btn-success"}},a={title:"<strong>Resubscribe Account</strong>",buttons:o},s='<p class="yui3-u-1 ta-center"><label class="password-confirmation">Enter your password to resubscribe.</label><input class="yui3-u-1-3 m-yui3-u-2-3" name="password" type="password"></p>',r=TAPP.dialogs.markup_dialog("<p>You previously chose to downgrade from this plan. Are you sure you want to resubscribe to this plan?</p>"+s,a),r.show()},$("body").tapp_on("click","[data-plan-upgrade]",function(){var e,t,n,i;return e=$(this),t=e.data("plan-upgrade"),n=$("#id_plan_choice").find('[value="'+t+'"]'),n.data("name"),i=n.data("price"),"None"===i?s(t):null!==page_context.current_payment_source?a(t):"stripe"===page_context.new_payment_source?r(t):"recurly"===page_context.new_payment_source&&o(t),!1})},poll_verification_status:function(){var e=!1;TAPP.setInterval(function(){e||(e=!0,$.get(window.location+"?verification_poll=1").done(function(e){e.response.verification_complete&&(window.location=window.location.href)}).always(function(){e=!1}))},1e3)},verification_method_change:function(){$(".verification-details").on("new-expanded","[data-expandable-setting]",function(){var e,t;e=$(".expanded[data-expandable-setting]").data("verification-method"),t=$('input[name="verification_method"]'),t.val(e)})}}),TAPP.settings_view=new t,TAPP.settings_view.register_post_load_hooks({settings_view_init:TAPP.settings_view.settings_view_init,payment_details_init:TAPP.settings_view.payment_details_init,developer_enrollment_init:TAPP.settings_view.developer_enrollment_init,submission_lockup:TAPP.settings_view.submission_lockup,init_star_app_feedback:TAPP.settings_view.init_star_app_feedback,select2_init:TAPP.settings_view.select2_init})}(),function(){var e=TAPP.Module.extend({init_developer:function(){this.edit_redirect_uris(),this.file_uploads(),this.expanding_page()},edit_redirect_uris:function(){var e,t,n,i;$("body").on("click","[data-remove-redirect-uri]",function(){var e,t,n;return e=$(this),t=e.data("remove-redirect-uri"),n=e.closest("li"),n.addClass("hide"),$.post(window.location.href,{action:"modify_redirect_uris",redirect_uri:t,app_id:page_context.app_id}).fail(function(){n.removeClass("hide"),TAPP.dialogs.error_dialog("Sorry we couldn't remove that Callback URL. Please wait a moment and try again.")}).done(function(){n.remove()}),!1}),e=$("[data-add-redirect-uri-input]"),t=$("[data-redirect-uris]"),n=function(e,t,n){e.remove(),t.val(n)},i=function(e){TAPP.dialogs.error_dialog(_.escape(e)+" is a duplicate Callback URL.")},$("body").on("click","[data-add-redirect-uri-button]",function(){var r,o,a,s,c;return r=$(this),o=TAPP.lock_up(r),a=$.trim(e.val()),""===a?(o(),!1):(s=!1,t.find("li a").each(function(){var e=$(this).data("remove-redirect-uri");e===a&&(s=!0,i(a))}),s?(o(),!1):(c=$('<li><a href="#remove" data-remove-redirect-uri="'+a+'">&times;</a> '+a+"</li>"),t.append(c),e.val(""),$.post(window.location.href,{action:"modify_redirect_uris",redirect_uri:a,app_id:page_context.app_id,add:"1"}).always(o).fail(function(){n(c,e,a),TAPP.dialogs.error_dialog("Sorry we couldn't add that Callback URL. Please wait a moment and try again.")}).done(function(t){"error"===t.status&&(n(c,e,a),t.form_errors&&t.form_errors.redirect_uri&&i(a))}),!1))})},file_uploads:function(){$("body").on("change","[data-tax-upload]",function(){$(this).closest(".salesforce-upload-block").find(".spinner").removeClass("hide"),$(this).closest(".dip-upload-form").addClass("hide"),$(this).closest(".dip-upload-form").submit()}),$("body").on("click","[data-e-sign]",function(){var e=$("input:text[name=signature]");e.val().length>0&&($(this).closest(".salesforce-control-group").find(".spinner").removeClass("hide"),$(this).closest(".btn-primary").addClass("hide"))})},expanding_page:function(){$("body").on("click","[data-expander-control]",function(){var e,t;e=$(this).data("expander-control"),t=$("div.expandable").closest(e),t.hasClass("expanded")||$("div.expanded").removeClass("expanded"),t.addClass("expanded")})},init_screenshots:function(){$("body").tapp_on("change","[data-image-upload] input[type=file]",function(){$(this).closest("form").submit()}),$("[data-image-upload]").tapp_on("submit",function(){var e,t,n;return e=$(this),t=e.data("replace"),n=$(e.data("asset-output")),e.ajaxSubmit({iframe:!0,resetForm:!0,url:""+window.location,dataType:"json",success:function(e){n.data("has-assets")||(t=!0),"ok"===e.status?(t?n.html(e.html):n.append(e.html),n.data("has-assets",!0)):TAPP.dialogs.error_dialog(e.msg)},error:function(){TAPP.dialogs.error_dialog(),e.resetForm()}}),!1}),$("body").tapp_on("click","[data-delete-asset]",function(){var e,t,n,i,r,o,a;return e=$(this),t=TAPP.lock_up(e),n=e.data("asset-id"),i=function(){var i=e.closest(".screenshot-container");i.hide(),$.ajax({type:"POST",url:""+window.location,data:{asset_id:n,action:"delete_image"}}).fail(function(){TAPP.dialogs.error_dialog(),i.show()}).done(function(){i.remove()}).always(function(){t()})},o={Cancel:{click:function(){r.remove(),t()},"class":"btn"},Delete:{click:function(){return i(),r.remove(),!1},text:"Delete","class":"btn btn-danger"}},a={title:"<strong>Delete Screenshot</strong>",buttons:o},r=TAPP.dialogs.markup_dialog("Are you sure you want to delete this screenshot?",a),r.show(),!1})},init_markdown_preview:function(){var e,t,n,i,r;e=$("[data-markdown-widget]"),t=e.find("[data-markdown-widget-body]"),n=t.find("[data-markdown-preview]"),i=t.find("textarea"),r=function(){var e=i.val();n.html('<div class="loader"></div>'),$.post(window.location.href,{markdown:e,action:"markdown_preview"}).done(function(e){n.html(e)}).fail(function(){n.html(""),TAPP.dialogs.error()})},$("body").tapp_on("click","[data-markdown-toggle]",function(){return e.toggleClass("previewing").toggleClass("editing"),e.hasClass("previewing")&&r(),!1})},init_delete_page:function(){$("body").tapp_on("click","[data-delete-page]",function(){var e,t,n,i,r,o;return e=$(this),t=TAPP.lock_up(e),n=function(){$.ajax({type:"POST",url:window.location.href,data:{action:"delete_page"}}).fail(function(){TAPP.dialogs.error_dialog()}).done(function(e){window.location=e}).always(function(){t()})},r={Cancel:{click:function(){i.remove(),t()},"class":"btn btn-small float-left"},Delete:{click:function(){return n(),i.remove(),!1},text:"Delete","class":"btn btn-danger btn-small"}},o={title:"<strong>Delete This Page</strong>",buttons:r},i=TAPP.dialogs.markup_dialog("Are you sure you want to delete this page?",o),i.show(),!1})}});TAPP.developer=new e,TAPP.developer.register_post_load_hooks({init_developer:TAPP.developer.init_developer,init_screenshots:TAPP.developer.init_screenshots,init_markdown_preview:TAPP.developer.init_markdown_preview,init_delete_page:TAPP.developer.init_delete_page})}(),$(document).ready(function(){var e=function(){var e=page_context.page_load_hooks;e&&($.isArray(page_context.page_load_hooks)||(e=[e]),$.each(page_context.page_load_hooks,function(e,t){var n,i,r;-1!==t.indexOf(".")?(n=t.split("."),i=TAPP,$.each(n,function(e,t){r=i,i=i[t]}),$.isFunction(i)&&i.call(r)):$.publish(t)})),$.publish("js_init_done")};e(),$(window).on("pjax:start",function(){TAPP.unload(),$.each(TAPP,function(){this&&this.unload&&this.unload()})}),$(window).on("pjax:end",function(){e()})});