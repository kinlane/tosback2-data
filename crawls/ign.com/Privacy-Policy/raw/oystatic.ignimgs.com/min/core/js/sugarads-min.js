SugarAds={adDivCssClassName:"sugarad",adDivIdPrefix:"sugarad-",adIframeIdSuffix:"-iframe",analytics:!1,fifurl:"/sugarfif.html?9",urlRandLength:12,urlRandNum:0,adsData:{},adCreatives:{},adJsUrls:{},stitialOverlayId:"sugarad-stitial-overlay",stitialHtmlElementClass:"sugarad-stitial-open",stitialTimeout:18E3,stitialAdType:!1,adServer:"ignadwrapper",dfp:{getUrl:function(b,d){slot2=slot1="";dfpAdUnit1="IGN";if(b.adsData.channel_id){switch(b.adsData.channel_id){case "58":dfpAdUnit2="homepage";break;case "568":dfpAdUnit2=
"blogs";break;case "472":dfpAdUnit2="bluray";break;case "541":dfpAdUnit2="comics";break;case "72":dfpAdUnit2="dvd";break;case "66":dfpAdUnit2="movies";break;case "241":dfpAdUnit2="music";break;case "566":dfpAdUnit2="my_ign";break;case "59":dfpAdUnit2="pc";break;case "515":dfpAdUnit2="psp";break;case "70":dfpAdUnit2="ps2";break;case "543":dfpAdUnit2="ps3";break;case "557":dfpAdUnit2="stars";break;case "550":dfpAdUnit2="tv";break;case "549":dfpAdUnit2="videos";break;case "547":dfpAdUnit2="wii";break;
case "256":dfpAdUnit2="wireless";break;case "73":dfpAdUnit2="xbox";break;case "542":dfpAdUnit2="xbox_360";break;case "532":dfpAdUnit2="ds";break;case "573":dfpAdUnit2="vita";break;case "544":dfpAdUnit2="xbox_live";break;case "500":dfpAdUnit1="GAMESPY";dfpAdUnit2="Homepage";break;case "508":dfpAdUnit1="GAMESPY";dfpAdUnit2="";break;case "275":dfpAdUnit1="GAMESTATS";dfpAdUnit2="";break;default:dfpAdUnit2=""}"gamespy"==b.adsData.network&&(dfpAdUnit1="GAMESPY",dfpAdUnit2="");channel_id=b.adsData.channel_id}else dfpAdUnit1=
"IGN",b.adsData.resource?("root"==b.adsData.resource&&"channel"==b.adsData.pagetype?dfpAdUnit2="homepage":"m_index"==b.adsData.pagetype||"m_content"==b.adsData.pagetype?dfpAdUnit2="m_ign":(dfpAdUnit2=b.adsData.resource,dfpAdUnit2=dfpAdUnit2.replace("-","_")),channel_id=b.adsData.resource):channel_id=dfpAdUnit2=b.adsData.route;if(""!=document.referrer)var a="",a=/(.+)\.ign\.com/.test(document.referrer.split("/")[2])?"ign.com":/(.+)\.gamespy\.com/.test(document.referrer.split("/")[2])?"gamespy.com":
escape(document.referrer);else a="none";googletag.pubads().setTargeting("r",a);a=document.location;if(-1!=a.search.indexOf("special"))for(var c=a.search.substr(1).split("&"),a=0,e=c.length;a<e;a++)-1!=c[a].indexOf("special")?(url=c[a].split("=")[1],googletag.pubads().setTargeting("special",url)):(url=c[a].split("=")[1],googletag.pubads().setTargeting("extras",url));for(k in b.adsData)googletag.pubads().setTargeting(k,b.adsData[k].toString());c=[];a=document.cookie.indexOf("rsi_segs=");if(0<=a&&(a=
document.cookie.indexOf("=",a)+1,0<a)){c=document.cookie.indexOf(";",a);if(-1==c)c=document.cookie.length;c=document.cookie.substring(a,c).split("|")}var e=20,f=[];if(c.length<e)e=c.length;for(a=0;a<e;a++)f.push(c[a]);googletag.pubads().setTargeting("rsi_segs",f.join());dfpAdUnits=""!=dfpAdUnit2?"/5691/"+dfpAdUnit1+"/"+dfpAdUnit2:"/5691/"+dfpAdUnit1;for(k in d)switch(d[k]){case "prestitial":googletag.defineOutOfPageSlot(dfpAdUnits,"sugarad-1x1").addService(googletag.pubads());break;case "728x90":googletag.defineSlot(dfpAdUnits,
[[728,90]],"sugarad-728x90").addService(googletag.pubads()).setTargeting("pos","top");break;case "300x250":case "halfpage":googletag.defineSlot(dfpAdUnits,[[300,250]],"sugarad-300x250").addService(googletag.pubads()).setTargeting("pos","top");break;case "featured":case "300x100":googletag.defineSlot(dfpAdUnits,[[300,100]],"sugarad-300x100").addService(googletag.pubads());break;case "side300x250":googletag.defineSlot(dfpAdUnits,[[300,250]],"sugarad-side300x250").addService(googletag.pubads()).setTargeting("pos",
"bottom");break;case "s728x90":googletag.defineSlot(dfpAdUnits,[[728,90]],"sugarad-s728x90").addService(googletag.pubads()).setTargeting("pos","bottom");break;case "2x2":googletag.defineSlot(dfpAdUnits,[[2,2]],"sugarad-2x2").addService(googletag.pubads()).setTargeting("pos","bottom");break;case "320x50":googletag.defineSlot(dfpAdUnits,[[320,50]],"sugarad-320x50").addService(googletag.pubads()).setTargeting("pos","top")}googletag.enableServices()},jsonpCallback:function(){return function(){}}},adServers:{ignadwrapper:{getUrl:function(b,
d){var a=b.adsData,c="http://wrapper.ign.com/services/ads/pagetype/"+a.pagetype+"/sizes/"+d.toString()+".js?callback=?",e=document.location;if(-1!=e.search.indexOf("special"))for(var f=e.search.substr(1).split("&"),g=0,i=f.length;g<i;g++)-1!=f[g].indexOf("special")&&(c+="&"+f[g]);""!=e&&(c+="&url="+encodeURIComponent(e));for(var h in a)if("pagetype"!=h)if(e=a[h],b._isArray(e)){g=0;for(i=e.length;g<i;g++)c+="&"+h+"="+encodeURIComponent(e[g])}else c+="&"+h+"="+encodeURIComponent(e);a=document.referrer;
""!=a&&(c+="&r="+encodeURIComponent(a));return c},jsonpCallback:function(b,d){return function(a){for(var c=0,e=a.length;c<e;c++)if("stitial"==a[c].size.substr(-7)){var f=/^\s*$/;!1==a[c].impressionTracker&&!0!==f.test(a[c].creative)?(b.stitialAdType="prestitial",b.adCreatives.prestitial=a[c].creative):b.adCreatives.prestitial=""}else b.adCreatives[a[c].size]=a[c].creative;b._fetchAdsCallback(d)}}},freewheel:{getUrl:function(b){var d=b.adsData,a="http://1ee2c.v.fwmrm.net//ad//g//1?flag=ptil&nw=126511&pvrn="+
Math.floor(1E5*Math.random()),a=a+"&csid=m_ign.com&resp=json&cbfn=?;;ptgt=s&envp=g_js&slau=320x50_Mobile_Display|300x50_Mobile_Display&cd=320,50|300,50slot&w=320&h=50",c;for(c in d){var e=d[c];if(b._isArray(e))for(var f=0,g=e.length;f<g;f++)a+="&"+c+"="+encodeURIComponent(e[f]);else a+="&"+c+"="+encodeURIComponent(e)}return a},jsonpCallback:function(b,d){return function(a){if(a.ads.ads[0].creatives[0].creativeRenditions[0].asset.content){var c="",e=a.siteSection.adSlots[0].selectedAds[0].eventCallbacks;
if(e)for(var f=0,g=e.length;f<g;f++)if("defaultImpression"==e[f].name){c='var i = new Image();i.src = "'+e[f].url+'";';break}b.adCreatives[d[0]]='<script type="text/javascript">'+a.ads.ads[0].creatives[0].creativeRenditions[0].asset.content+c+"<\/script>"}b._fetchAdsCallback(d)}}}},renderAds:function(b){"string"==typeof b&&(b=Array(b));!1!=this.adServer?this._renderAdCreatives(b):this._renderAdJsUrls(b)},showStitial:function(){var b=document.getElementsByTagName("html")[0],d=document.getElementById(this.stitialOverlayId);
b.className=this.stitialHtmlElementClass;d.style.display="block";this.stitialSetTimeout=setTimeout(function(a){return function(){a.hideStitial()}}(this),this.stitialTimeout)},hideStitial:function(){clearTimeout(this.stitialSetTimeout);var b=document.getElementsByTagName("html")[0],d=document.getElementById(this.stitialOverlayId);b.className="";d.style.display="none";this.renderAdsDelayedByStitial()},renderAdsDelayedByStitial:function(){},setFifDim:function(b,d,a){if("number"==typeof d&&"number"==
typeof a)b.style.cssText+=";width:"+d+"px;height:"+a+"px;",b.parentNode.style.cssText=";width:"+d+"px;height:auto;"+(0==d&&0==a?"display:none;":"")},fifOnload:function(b){var d=(new Date).getTime();this.analytics&&_gaq.push(["_trackEvent","Sugar Ads",b.frameElement.adtype,b.frameElement.adjsurl,d-b.sugarTimerStart])},_flushAndPlaceAds:function(b){for(var d=0,a=b.length;d<a;d++){var c=b[d];!1==this.adServer&&!(c in this.adJsUrls)?this._warn('Failed to render sugar ad. No ad js url has been defined for ad type "'+
c+'".'):!1!=this.adServer&&!(c in this.adCreatives)?this._warn('Failed to render sugar ad. No ad creative has been defined for ad type "'+c+'".'):this._createAndAppendFriendlyIframe(c)}},_createAndAppendFriendlyIframe:function(b){var d=this.adDivIdPrefix+b,a=document.getElementById(d);if("undefined"==typeof a||null==a)return this._warn('Failed to render sugar ad. No dom element with id "'+d+'" exists.'),!1;var c=document.getElementById(d+this.adIframeIdSuffix);if("undefined"!=typeof c&&null!=c)a.style.height=
c.offsetHeight+"px";a.innerHTML="";if(!1!=this.adServer&&""==this.adCreatives[b])delete this.adCreatives[b];else{d+=this.adIframeIdSuffix;c=document.createElement("iframe");c.id=d;c.name=d;c.src=this.fifurl;c.style.border="none";c.style.width=a.offsetWidth+"px";c.style.height=a.offsetHeight+"px";c.scrolling="no";c.seamless="seamless";c.adtype=b;!1!=this.adServer?(c.adcreative=this.adCreatives[b],delete this.adCreatives[b]):c.adjsurl=this.adJsUrls[b];if(-1!=navigator.userAgent.indexOf("MSIE"))c.frameBorder=
"0",c.allowTransparency="true";a.appendChild(c)}},_renderAdCreatives:function(b){for(var d=[],a=0,c=b.length;a<c;a++)b[a]in this.adCreatives||d.push(b[a]);if("freewheel"==this.adServer)0<d.length?this._jsonp(this.adServers[this.adServer].getUrl(this,d),this.adServers[this.adServer].jsonpCallback(this,b)):this._fetchAdsCallback(b);else{if("undefined"==typeof this.adsData.channel_id&&"undefined"==typeof this.adsData.route&&"undefined"==typeof this.adsData.resource)this.adsData.resource="legacy";this.dfp.getUrl(this,
d)}},_renderAdJsUrls:function(b){this._randomizeAdJsUrls();this._flushAndPlaceAds(b)},_fetchAdsCallback:function(b){if(!1!=this.stitialAdType){for(var d=[],a=0,c=b.length;a<c;a++){var e=b[a];e!=this.stitialAdType&&d.push(e)}this.renderAdsDelayedByStitial=function(a){return function(){a._flushAndPlaceAds(d)}}(this);this._flushAndPlaceAds([this.stitialAdType]);this.stitialAdType=!1;this.showStitial()}else this._flushAndPlaceAds(b)},_randomizeAdJsUrls:function(){0==this.urlRandNum?this.urlRandNum=Math.floor(Math.random()*
Math.pow(10,this.urlRandLength)):this.urlRandNum++;var b="sugar-rand="+this.urlRandNum,d=RegExp("sugar-rand=\\d{"+this.urlRandLength+"}","g");for(adType in this.adJsUrls){var a=this.adJsUrls[adType],c=a.match(d);null!=c?this.adJsUrls[adType]=a.replace(c[0],b):(c=a.search(/\?/),this.adJsUrls[adType]=-1!=c?a.replace("?","?"+b+"&"):a.replace(/&*$/,"&"+b))}},_jsonp:function(b,d){if(-1==b.indexOf("=?"))this._warn("The sugar jsonp url must specify the callback function in the query string i.e. callback=?");
else if("function"!=typeof d)this._warn("The sugar jsonp callback must be a function");else{var a="jsonp"+Math.floor(1E10*Math.random());window[a]=function(b){d(b);try{delete window[a]}catch(c){window[a]=void 0}};var c=document.createElement("script");c.src=b.split("=?").join("="+a);document.getElementsByTagName("head")[0].appendChild(c)}},_isArray:function(b){return"[object Array]"===Object.prototype.toString.call(b)},_warn:function(b){window.console&&console.warn&&console.warn(b)}};
