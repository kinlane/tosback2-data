/*
 * jQuery UI 1.8.5
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(A,C){A.ui=A.ui||{};if(A.ui.version){return }A.extend(A.ui,{version:"1.8.5",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});A.fn.extend({_focus:A.fn.focus,focus:function(D,E){return typeof D==="number"?this.each(function(){var F=this;setTimeout(function(){A(F).focus();if(E){E.call(F)}},D)}):this._focus.apply(this,arguments)},scrollParent:function(){var D;if((A.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){D=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(A.curCSS(this,"position",1))&&(/(auto|scroll)/).test(A.curCSS(this,"overflow",1)+A.curCSS(this,"overflow-y",1)+A.curCSS(this,"overflow-x",1))}).eq(0)}else{D=this.parents().filter(function(){return(/(auto|scroll)/).test(A.curCSS(this,"overflow",1)+A.curCSS(this,"overflow-y",1)+A.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!D.length?A(document):D},zIndex:function(G){if(G!==C){return this.css("zIndex",G)}if(this.length){var E=A(this[0]),D,F;while(E.length&&E[0]!==document){D=E.css("position");if(D==="absolute"||D==="relative"||D==="fixed"){F=parseInt(E.css("zIndex"));if(!isNaN(F)&&F!=0){return F}}E=E.parent()}}return 0},disableSelection:function(){return this.bind("mousedown.ui-disableSelection selectstart.ui-disableSelection",function(D){D.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});A.each(["Width","Height"],function(F,D){var E=D==="Width"?["Left","Right"]:["Top","Bottom"],G=D.toLowerCase(),I={innerWidth:A.fn.innerWidth,innerHeight:A.fn.innerHeight,outerWidth:A.fn.outerWidth,outerHeight:A.fn.outerHeight};function H(L,K,J,M){A.each(E,function(){K-=parseFloat(A.curCSS(L,"padding"+this,true))||0;if(J){K-=parseFloat(A.curCSS(L,"border"+this+"Width",true))||0}if(M){K-=parseFloat(A.curCSS(L,"margin"+this,true))||0}});return K}A.fn["inner"+D]=function(J){if(J===C){return I["inner"+D].call(this)}return this.each(function(){A.style(this,G,H(this,J)+"px")})};A.fn["outer"+D]=function(J,K){if(typeof J!=="number"){return I["outer"+D].call(this,J)}return this.each(function(){A.style(this,G,H(this,J,true,K)+"px")})}});function B(D){return !A(D).parents().andSelf().filter(function(){return A.curCSS(this,"visibility")==="hidden"||A.expr.filters.hidden(this)}).length}A.extend(A.expr[":"],{data:function(F,E,D){return !!A.data(F,D[3])},focusable:function(F){var I=F.nodeName.toLowerCase(),D=A.attr(F,"tabindex");if("area"===I){var H=F.parentNode,G=H.name,E;if(!F.href||!G||H.nodeName.toLowerCase()!=="map"){return false}E=A("img[usemap=#"+G+"]")[0];return !!E&&B(E)}return(/input|select|textarea|button|object/.test(I)?!F.disabled:"a"==I?F.href||!isNaN(D):!isNaN(D))&&B(F)},tabbable:function(E){var D=A.attr(E,"tabindex");return(isNaN(D)||D>=0)&&A(E).is(":focusable")}});A(function(){var E=document.createElement("div"),D=document.body;A.extend(E.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});A.support.minHeight=D.appendChild(E).offsetHeight===100;D.removeChild(E).style.display="none"});A.extend(A.ui,{plugin:{add:function(E,F,H){var G=A.ui[E].prototype;for(var D in H){G.plugins[D]=G.plugins[D]||[];G.plugins[D].push([F,H[D]])}},call:function(D,F,E){var H=D.plugins[F];if(!H||!D.element[0].parentNode){return }for(var G=0;G<H.length;G++){if(D.options[H[G][0]]){H[G][1].apply(D.element,E)}}}},contains:function(E,D){return document.compareDocumentPosition?E.compareDocumentPosition(D)&16:E!==D&&E.contains(D)},hasScroll:function(G,E){if(A(G).css("overflow")==="hidden"){return false}var D=(E&&E==="left")?"scrollLeft":"scrollTop",F=false;if(G[D]>0){return true}G[D]=1;F=(G[D]>0);G[D]=0;return F},isOverAxis:function(E,D,F){return(E>D)&&(E<(D+F))},isOver:function(I,E,H,G,D,F){return A.ui.isOverAxis(I,H,D)&&A.ui.isOverAxis(E,G,F)}})})(jQuery);
/*
 * jQuery UI Widget 1.8.5
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(B,D){if(B.cleanData){var C=B.cleanData;B.cleanData=function(E){for(var F=0,G;(G=E[F])!=null;F++){B(G).triggerHandler("remove")}C(E)}}else{var A=B.fn.remove;B.fn.remove=function(E,F){return this.each(function(){if(!F){if(!E||B.filter(E,[this]).length){B("*",this).add([this]).each(function(){B(this).triggerHandler("remove")})}}return A.call(B(this),E,F)})}}B.widget=function(F,H,E){var G=F.split(".")[0],J;F=F.split(".")[1];J=G+"-"+F;if(!E){E=H;H=B.Widget}B.expr[":"][J]=function(K){return !!B.data(K,F)};B[G]=B[G]||{};B[G][F]=function(K,L){if(arguments.length){this._createWidget(K,L)}};var I=new H();I.options=B.extend(true,{},I.options);B[G][F].prototype=B.extend(true,I,{namespace:G,widgetName:F,widgetEventPrefix:B[G][F].prototype.widgetEventPrefix||F,widgetBaseClass:J},E);B.widget.bridge(F,B[G][F])};B.widget.bridge=function(F,E){B.fn[F]=function(I){var G=typeof I==="string",H=Array.prototype.slice.call(arguments,1),J=this;I=!G&&H.length?B.extend.apply(null,[true,I].concat(H)):I;if(G&&I.substring(0,1)==="_"){return J}if(G){this.each(function(){var K=B.data(this,F);if(!K){throw"cannot call methods on "+F+" prior to initialization; attempted to call method '"+I+"'"}if(!B.isFunction(K[I])){throw"no such method '"+I+"' for "+F+" widget instance"}var L=K[I].apply(K,H);if(L!==K&&L!==D){J=L;return false}})}else{this.each(function(){var K=B.data(this,F);if(K){K.option(I||{})._init()}else{B.data(this,F,new E(I,this))}})}return J}};B.Widget=function(E,F){if(arguments.length){this._createWidget(E,F)}};B.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(F,G){B.data(G,this.widgetName,this);this.element=B(G);this.options=B.extend(true,{},this.options,B.metadata&&B.metadata.get(G)[this.widgetName],F);var E=this;this.element.bind("remove."+this.widgetName,function(){E.destroy()});this._create();this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(G,H){var F=G,E=this;if(arguments.length===0){return B.extend({},E.options)}if(typeof G==="string"){if(H===D){return this.options[G]}F={};F[G]=H}B.each(F,function(I,J){E._setOption(I,J)});return E},_setOption:function(E,F){this.options[E]=F;if(E==="disabled"){this.widget()[F?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",F)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(F,G,H){var J=this.options[F];G=B.Event(G);G.type=(F===this.widgetEventPrefix?F:this.widgetEventPrefix+F).toLowerCase();H=H||{};if(G.originalEvent){for(var E=B.event.props.length,I;E;){I=B.event.props[--E];G[I]=G.originalEvent[I]}}this.element.trigger(G,H);return !(B.isFunction(J)&&J.call(this.element[0],G,H)===false||G.isDefaultPrevented())}}})(jQuery);(function(D,F){var C=0,B=0;function E(){return ++C}function A(){return ++B}D.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(G,H){if(G=="selected"){if(this.options.collapsible&&H==this.options.selected){return }this.select(H)}else{this.options[G]=H;this._tabify()}},_tabId:function(G){return G.title&&G.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+E()},_sanitizeSelector:function(G){return G.replace(/:/g,"\\:")},_cookie:function(){var G=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+A());return D.cookie.apply(null,[G].concat(D.makeArray(arguments)))},_ui:function(H,G){return{tab:H,panel:G,index:this.anchors.index(H)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var G=D(this);G.html(G.data("label.tabs")).removeData("label.tabs")})},_tabify:function(R){var S=this,I=this.options,H=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=D(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return D("a",this)[0]});this.panels=D([]);this.anchors.each(function(V,T){var U=D(T).attr("href");var W=U.split("#")[0],X;if(W&&(W===location.toString().split("#")[0]||(X=D("base")[0])&&W===X.href)){U=T.hash;T.href=U}if(H.test(U)){S.panels=S.panels.add(S._sanitizeSelector(U))}else{if(U&&U!=="#"){D.data(T,"href.tabs",U);D.data(T,"load.tabs",U.replace(/#.*$/,""));var Z=S._tabId(T);T.href="#"+Z;var Y=D("#"+Z);if(!Y.length){Y=D(I.panelTemplate).attr("id",Z).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(S.panels[V-1]||S.list);Y.data("destroy.tabs",true)}S.panels=S.panels.add(Y)}else{I.disabled.push(V)}}});if(R){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(I.selected===F){if(location.hash){this.anchors.each(function(U,T){if(T.hash==location.hash){I.selected=U;return false}})}if(typeof I.selected!=="number"&&I.cookie){I.selected=parseInt(S._cookie(),10)}if(typeof I.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length){I.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}I.selected=I.selected||(this.lis.length?0:-1)}else{if(I.selected===null){I.selected=-1}}I.selected=((I.selected>=0&&this.anchors[I.selected])||I.selected<0)?I.selected:0;I.disabled=D.unique(I.disabled.concat(D.map(this.lis.filter(".ui-state-disabled"),function(U,T){return S.lis.index(U)}))).sort();if(D.inArray(I.selected,I.disabled)!=-1){I.disabled.splice(D.inArray(I.selected,I.disabled),1)}this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");if(I.selected>=0&&this.anchors.length){this.panels.eq(I.selected).removeClass("ui-tabs-hide");this.lis.eq(I.selected).addClass("ui-tabs-selected ui-state-active");S.element.queue("tabs",function(){S._trigger("show",null,S._ui(S.anchors[I.selected],S.panels[I.selected]))});this.load(I.selected)}D(window).bind("unload",function(){S.lis.add(S.anchors).unbind(".tabs");S.lis=S.anchors=S.panels=null})}else{I.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}this.element[I.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");if(I.cookie){this._cookie(I.selected,I.cookie)}for(var L=0,Q;(Q=this.lis[L]);L++){D(Q)[D.inArray(L,I.disabled)!=-1&&!D(Q).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}if(I.cache===false){this.anchors.removeData("cache.tabs")}this.lis.add(this.anchors).unbind(".tabs");if(I.event!=="mouseover"){var K=function(U,T){if(T.is(":not(.ui-state-disabled)")){T.addClass("ui-state-"+U)}};var N=function(U,T){T.removeClass("ui-state-"+U)};this.lis.bind("mouseover.tabs",function(){K("hover",D(this))});this.lis.bind("mouseout.tabs",function(){N("hover",D(this))});this.anchors.bind("focus.tabs",function(){K("focus",D(this).closest("li"))});this.anchors.bind("blur.tabs",function(){N("focus",D(this).closest("li"))})}var G,M;if(I.fx){if(D.isArray(I.fx)){G=I.fx[0];M=I.fx[1]}else{G=M=I.fx}}function J(T,U){T.css("display","");if(!D.support.opacity&&U.opacity){T[0].style.removeAttribute("filter")}}var O=M?function(T,U){D(T).closest("li").addClass("ui-tabs-selected ui-state-active");U.hide().removeClass("ui-tabs-hide").animate(M,M.duration||"normal",function(){J(U,M);S._trigger("show",null,S._ui(T,U[0]))})}:function(T,U){D(T).closest("li").addClass("ui-tabs-selected ui-state-active");U.removeClass("ui-tabs-hide");S._trigger("show",null,S._ui(T,U[0]))};var P=G?function(U,T){T.animate(G,G.duration||"normal",function(){S.lis.removeClass("ui-tabs-selected ui-state-active");T.addClass("ui-tabs-hide");J(T,G);S.element.dequeue("tabs")})}:function(U,T,V){S.lis.removeClass("ui-tabs-selected ui-state-active");T.addClass("ui-tabs-hide");S.element.dequeue("tabs")};this.anchors.bind(I.event+".tabs",function(){var U=this,W=D(U).closest("li"),T=S.panels.filter(":not(.ui-tabs-hide)"),V=D(S._sanitizeSelector(U.hash));if((W.hasClass("ui-tabs-selected")&&!I.collapsible)||W.hasClass("ui-state-disabled")||W.hasClass("ui-state-processing")||S.panels.filter(":animated").length||S._trigger("select",null,S._ui(this,V[0]))===false){this.blur();return false}I.selected=S.anchors.index(this);S.abort();if(I.collapsible){if(W.hasClass("ui-tabs-selected")){I.selected=-1;if(I.cookie){S._cookie(I.selected,I.cookie)}S.element.queue("tabs",function(){P(U,T)}).dequeue("tabs");this.blur();return false}else{if(!T.length){if(I.cookie){S._cookie(I.selected,I.cookie)}S.element.queue("tabs",function(){O(U,V)});S.load(S.anchors.index(this));this.blur();return false}}}if(I.cookie){S._cookie(I.selected,I.cookie)}if(V.length){if(T.length){S.element.queue("tabs",function(){P(U,T)})}S.element.queue("tabs",function(){O(U,V)});S.load(S.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}if(D.browser.msie){this.blur()}});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(G){if(typeof G=="string"){G=this.anchors.index(this.anchors.filter("[href$="+G+"]"))}return G},destroy:function(){var G=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var H=D.data(this,"href.tabs");if(H){this.href=H}var I=D(this).unbind(".tabs");D.each(["href","load","cache"],function(J,K){I.removeData(K+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){if(D.data(this,"destroy.tabs")){D(this).remove()}else{D(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}});if(G.cookie){this._cookie(null,G.cookie)}return this},add:function(J,I,H){if(H===F){H=this.anchors.length}var G=this,L=this.options,N=D(L.tabTemplate.replace(/#\{href\}/g,J).replace(/#\{label\}/g,I)),M=!J.indexOf("#")?J.replace("#",""):this._tabId(D("a",N)[0]);N.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var K=D("#"+M);if(!K.length){K=D(L.panelTemplate).attr("id",M).data("destroy.tabs",true)}K.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(H>=this.lis.length){N.appendTo(this.list);K.appendTo(this.list[0].parentNode)}else{N.insertBefore(this.lis[H]);K.insertBefore(this.panels[H])}L.disabled=D.map(L.disabled,function(P,O){return P>=H?++P:P});this._tabify();if(this.anchors.length==1){L.selected=0;N.addClass("ui-tabs-selected ui-state-active");K.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){G._trigger("show",null,G._ui(G.anchors[0],G.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[H],this.panels[H]));return this},remove:function(G){G=this._getIndex(G);var I=this.options,J=this.lis.eq(G).remove(),H=this.panels.eq(G).remove();if(J.hasClass("ui-tabs-selected")&&this.anchors.length>1){this.select(G+(G+1<this.anchors.length?1:-1))}I.disabled=D.map(D.grep(I.disabled,function(L,K){return L!=G}),function(L,K){return L>=G?--L:L});this._tabify();this._trigger("remove",null,this._ui(J.find("a")[0],H[0]));return this},enable:function(G){G=this._getIndex(G);var H=this.options;if(D.inArray(G,H.disabled)==-1){return }this.lis.eq(G).removeClass("ui-state-disabled");H.disabled=D.grep(H.disabled,function(J,I){return J!=G});this._trigger("enable",null,this._ui(this.anchors[G],this.panels[G]));return this},disable:function(H){H=this._getIndex(H);var G=this,I=this.options;if(H!=I.selected){this.lis.eq(H).addClass("ui-state-disabled");I.disabled.push(H);I.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[H],this.panels[H]))}return this},select:function(G){G=this._getIndex(G);if(G==-1){if(this.options.collapsible&&this.options.selected!=-1){G=this.options.selected}else{return this}}this.anchors.eq(G).trigger(this.options.event+".tabs");return this},load:function(J){J=this._getIndex(J);var H=this,L=this.options,G=this.anchors.eq(J)[0],I=D.data(G,"load.tabs");this.abort();if(!I||this.element.queue("tabs").length!==0&&D.data(G,"cache.tabs")){this.element.dequeue("tabs");return }this.lis.eq(J).addClass("ui-state-processing");if(L.spinner){var K=D("span",G);K.data("label.tabs",K.html()).html(L.spinner)}this.xhr=D.ajax(D.extend({},L.ajaxOptions,{url:I,success:function(N,M){D(H._sanitizeSelector(G.hash)).html(N);H._cleanup();if(L.cache){D.data(G,"cache.tabs",true)}H._trigger("load",null,H._ui(H.anchors[J],H.panels[J]));try{L.ajaxOptions.success(N,M)}catch(O){}},error:function(O,M,N){H._cleanup();H._trigger("load",null,H._ui(H.anchors[J],H.panels[J]));try{L.ajaxOptions.error(O,M,J,G)}catch(N){}}}));H.element.dequeue("tabs");return this},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},url:function(H,G){this.anchors.eq(H).removeData("cache.tabs").data("load.tabs",G);return this},length:function(){return this.anchors.length}});D.extend(D.ui.tabs,{version:"1.8.5"});D.extend(D.ui.tabs.prototype,{rotation:null,rotate:function(I,K){var G=this,L=this.options;var H=G._rotate||(G._rotate=function(M){clearTimeout(G.rotation);G.rotation=setTimeout(function(){var N=L.selected;G.select(++N<G.anchors.length?N:0)},I);if(M){M.stopPropagation()}});var J=G._unrotate||(G._unrotate=!K?function(M){if(M.clientX){G.rotate(null)}}:function(M){t=L.selected;H()});if(I){this.element.bind("tabsshow",H);this.anchors.bind(L.event+".tabs",J);H()}else{clearTimeout(G.rotation);this.element.unbind("tabsshow",H);this.anchors.unbind(L.event+".tabs",J);delete this._rotate;delete this._unrotate}return this}})})(jQuery);jQuery.cookie=function(B,I,L){if(typeof I!="undefined"){L=L||{};if(I===null){I="";L.expires=-1}var E="";if(L.expires&&(typeof L.expires=="number"||L.expires.toUTCString)){var F;if(typeof L.expires=="number"){F=new Date();F.setTime(F.getTime()+(L.expires*24*60*60*1000))}else{F=L.expires}E="; expires="+F.toUTCString()}var K=L.path?"; path="+(L.path):"";var G=L.domain?"; domain="+(L.domain):"";var A=L.secure?"; secure":"";document.cookie=[B,"=",encodeURIComponent(I),E,K,G,A].join("")}else{var D=null;if(document.cookie&&document.cookie!=""){var J=document.cookie.split(";");for(var H=0;H<J.length;H++){var C=jQuery.trim(J[H]);if(C.substring(0,B.length+1)==(B+"=")){D=decodeURIComponent(C.substring(B.length+1));break}}}return D}};
/*
 * jQuery Form Plugin
 * version: 2.47 (04-SEP-2010)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(B){B.fn.ajaxSubmit=function(P){if(!this.length){A("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof P=="function"){P={success:P}}var D=B.trim(this.attr("action"));if(D){D=(D.match(/^([^#]+)/)||[])[1]}D=D||window.location.href||"";P=B.extend(true,{url:D,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},P);var Q={};this.trigger("form-pre-serialize",[this,P,Q]);if(Q.veto){A("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(P.beforeSerialize&&P.beforeSerialize(this,P)===false){A("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var F,M,K=this.formToArray(P.semantic);if(P.data){P.extraData=P.data;for(F in P.data){if(P.data[F] instanceof Array){for(var H in P.data[F]){K.push({name:F,value:P.data[F][H]})}}else{M=P.data[F];M=B.isFunction(M)?M():M;K.push({name:F,value:M})}}}if(P.beforeSubmit&&P.beforeSubmit(K,this,P)===false){A("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[K,this,P,Q]);if(Q.veto){A("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var C=B.param(K);if(P.type.toUpperCase()=="GET"){P.url+=(P.url.indexOf("?")>=0?"&":"?")+C;P.data=null}else{P.data=C}var O=this,J=[];if(P.resetForm){J.push(function(){O.resetForm()})}if(P.clearForm){J.push(function(){O.clearForm()})}if(!P.dataType&&P.target){var N=P.success||function(){};J.push(function(S){var R=P.replaceTarget?"replaceWith":"html";B(P.target)[R](S).each(N,arguments)})}else{if(P.success){J.push(P.success)}}P.success=function(V,S,W){var U=P.context||P;for(var T=0,R=J.length;T<R;T++){J[T].apply(U,[V,S,W||O,O])}};var G=B("input:file",this).length>0;var E="multipart/form-data";var I=(O.attr("enctype")==E||O.attr("encoding")==E);if(P.iframe!==false&&(G||P.iframe||I)){if(P.closeKeepAlive){B.get(P.closeKeepAlive,L)}else{L()}}else{B.ajax(P)}this.trigger("form-submit-notify",[this,P]);return this;function L(){var R=O[0];if(B(":input[name=submit],:input[id=submit]",R).length){alert('Error: Form elements must not have name or id of "submit".');return }var X=B.extend(true,{},B.ajaxSettings,P);X.context=X.context||X;var a="jqFormIO"+(new Date().getTime()),V="_"+a;window[V]=function(){var g=S.data("form-plugin-onload");if(g){g();window[V]=undefined;try{delete window[V]}catch(l){}}};var S=B('<iframe id="'+a+'" name="'+a+'" src="'+X.iframeSrc+'" onload="window[\'_\'+this.id]()" />');var W=S[0];S.css({position:"absolute",top:"-1000px",left:"-1000px"});var T={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;S.attr("src",X.iframeSrc)}};var f=X.global;if(f&&!B.active++){B.event.trigger("ajaxStart")}if(f){B.event.trigger("ajaxSend",[T,X])}if(X.beforeSend&&X.beforeSend.call(X.context,T,X)===false){if(X.global){B.active--}return }if(T.aborted){return }var b=false;var e=0;var U=R.clk;if(U){var c=U.name;if(c&&!U.disabled){X.extraData=X.extraData||{};X.extraData[c]=U.value;if(U.type=="image"){X.extraData[c+".x"]=R.clk_x;X.extraData[c+".y"]=R.clk_y}}}function d(){var m=O.attr("target"),g=O.attr("action");R.setAttribute("target",a);if(R.getAttribute("method")!="POST"){R.setAttribute("method","POST")}if(R.getAttribute("action")!=X.url){R.setAttribute("action",X.url)}if(!X.skipEncodingOverride){O.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(X.timeout){setTimeout(function(){e=true;Z()},X.timeout)}var l=[];try{if(X.extraData){for(var o in X.extraData){l.push(B('<input type="hidden" name="'+o+'" value="'+X.extraData[o]+'" />').appendTo(R)[0])}}S.appendTo("body");S.data("form-plugin-onload",Z);R.submit()}finally{R.setAttribute("action",g);if(m){R.setAttribute("target",m)}else{O.removeAttr("target")}B(l).remove()}}if(X.forceSync){d()}else{setTimeout(d,10)}var j,k,h=50;function Z(){if(b){return }S.removeData("form-plugin-onload");var l=true;try{if(e){throw"timeout"}k=W.contentWindow?W.contentWindow.document:W.contentDocument?W.contentDocument:W.document;var p=X.dataType=="xml"||k.XMLDocument||B.isXMLDoc(k);A("isXml="+p);if(!p&&window.opera&&(k.body==null||k.body.innerHTML=="")){if(--h){A("requeing onLoad callback, DOM not available");setTimeout(Z,250);return }}b=true;T.responseText=k.documentElement?k.documentElement.innerHTML:null;T.responseXML=k.XMLDocument?k.XMLDocument:k;T.getResponseHeader=function(r){var q={"content-type":X.dataType};return q[r]};var o=/(json|script)/.test(X.dataType);if(o||X.textarea){var g=k.getElementsByTagName("textarea")[0];if(g){T.responseText=g.value}else{if(o){var n=k.getElementsByTagName("pre")[0];if(n){T.responseText=n.innerHTML}}}}else{if(X.dataType=="xml"&&!T.responseXML&&T.responseText!=null){T.responseXML=Y(T.responseText)}}j=B.httpData(T,X.dataType)}catch(m){A("error caught:",m);l=false;T.error=m;B.handleError(X,T,"error",m)}if(l){X.success.call(X.context,j,"success",T);if(f){B.event.trigger("ajaxSuccess",[T,X])}}if(f){B.event.trigger("ajaxComplete",[T,X])}if(f&&!--B.active){B.event.trigger("ajaxStop")}if(X.complete){X.complete.call(X.context,T,l?"success":"error")}setTimeout(function(){S.removeData("form-plugin-onload");S.remove();T.responseXML=null},100)}function Y(g,l){if(window.ActiveXObject){l=new ActiveXObject("Microsoft.XMLDOM");l.async="false";l.loadXML(g)}else{l=(new DOMParser()).parseFromString(g,"text/xml")}return(l&&l.documentElement&&l.documentElement.tagName!="parsererror")?l:null}}};B.fn.ajaxForm=function(C){if(this.length===0){var D={s:this.selector,c:this.context};if(!B.isReady&&D.s){A("DOM not ready, queuing ajaxForm");B(function(){B(D.s,D.c).ajaxForm(C)});return this}A("terminating; zero elements found by selector"+(B.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(E){if(!E.isDefaultPrevented()){E.preventDefault();B(this).ajaxSubmit(C)}}).bind("click.form-plugin",function(I){var H=I.target;var F=B(H);if(!(F.is(":submit,input:image"))){var E=F.closest(":submit");if(E.length==0){return }H=E[0]}var G=this;G.clk=H;if(H.type=="image"){if(I.offsetX!=undefined){G.clk_x=I.offsetX;G.clk_y=I.offsetY}else{if(typeof B.fn.offset=="function"){var J=F.offset();G.clk_x=I.pageX-J.left;G.clk_y=I.pageY-J.top}else{G.clk_x=I.pageX-H.offsetLeft;G.clk_y=I.pageY-H.offsetTop}}}setTimeout(function(){G.clk=G.clk_x=G.clk_y=null},100)})};B.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};B.fn.formToArray=function(L){var K=[];if(this.length===0){return K}var C=this[0];var F=L?C.getElementsByTagName("*"):C.elements;if(!F){return K}var H,G,E,M,D;for(H=0,max=F.length;H<max;H++){D=F[H];E=D.name;if(!E){continue}if(L&&C.clk&&D.type=="image"){if(!D.disabled&&C.clk==D){K.push({name:E,value:B(D).val()});K.push({name:E+".x",value:C.clk_x},{name:E+".y",value:C.clk_y})}continue}M=B.fieldValue(D,true);if(M&&M.constructor==Array){for(G=0,jmax=M.length;G<jmax;G++){K.push({name:E,value:M[G]})}}else{if(M!==null&&typeof M!="undefined"){K.push({name:E,value:M})}}}if(!L&&C.clk){var I=B(C.clk),J=I[0];E=J.name;if(E&&!J.disabled&&J.type=="image"){K.push({name:E,value:I.val()});K.push({name:E+".x",value:C.clk_x},{name:E+".y",value:C.clk_y})}}return K};B.fn.formSerialize=function(C){return B.param(this.formToArray(C))};B.fn.fieldSerialize=function(D){var C=[];this.each(function(){var H=this.name;if(!H){return }var F=B.fieldValue(this,D);if(F&&F.constructor==Array){for(var G=0,E=F.length;G<E;G++){C.push({name:H,value:F[G]})}}else{if(F!==null&&typeof F!="undefined"){C.push({name:this.name,value:F})}}});return B.param(C)};B.fn.fieldValue=function(H){for(var G=[],E=0,C=this.length;E<C;E++){var F=this[E];var D=B.fieldValue(F,H);if(D===null||typeof D=="undefined"||(D.constructor==Array&&!D.length)){continue}D.constructor==Array?B.merge(G,D):G.push(D)}return G};B.fieldValue=function(C,I){var E=C.name,N=C.type,O=C.tagName.toLowerCase();if(I===undefined){I=true}if(I&&(!E||C.disabled||N=="reset"||N=="button"||(N=="checkbox"||N=="radio")&&!C.checked||(N=="submit"||N=="image")&&C.form&&C.form.clk!=C||O=="select"&&C.selectedIndex==-1)){return null}if(O=="select"){var J=C.selectedIndex;if(J<0){return null}var L=[],D=C.options;var G=(N=="select-one");var K=(G?J+1:D.length);for(var F=(G?J:0);F<K;F++){var H=D[F];if(H.selected){var M=H.value;if(!M){M=(H.attributes&&H.attributes.value&&!(H.attributes.value.specified))?H.text:H.value}if(G){return M}L.push(M)}}return L}return B(C).val()};B.fn.clearForm=function(){return this.each(function(){B("input,select,textarea",this).clearFields()})};B.fn.clearFields=B.fn.clearInputs=function(){return this.each(function(){var D=this.type,C=this.tagName.toLowerCase();if(D=="text"||D=="password"||C=="textarea"){this.value=""}else{if(D=="checkbox"||D=="radio"){this.checked=false}else{if(C=="select"){this.selectedIndex=-1}}}})};B.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};B.fn.enable=function(C){if(C===undefined){C=true}return this.each(function(){this.disabled=!C})};B.fn.selected=function(C){if(C===undefined){C=true}return this.each(function(){var D=this.type;if(D=="checkbox"||D=="radio"){this.checked=C}else{if(this.tagName.toLowerCase()=="option"){var E=B(this).parent("select");if(C&&E[0]&&E[0].type=="select-one"){E.find("option").selected(false)}this.selected=C}}})};function A(){if(B.fn.ajaxSubmit.debug){var C="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(C)}else{if(window.opera&&window.opera.postError){window.opera.postError(C)}}}}})(jQuery);(function(E){E.fn.jqm=function(F){var A={overlay:70,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:O,ajaxText:"",target:O,modal:O,toTop:O,onShow:O,onHide:O,onLoad:O};return this.each(function(){if(this._jqm){return N[this._jqm].c=E.extend({},N[this._jqm].c,F)}P++;this._jqm=P;N[P]={c:E.extend(A,E.jqm.params,F),a:O,w:E(this).addClass("jqmID"+P),s:P};if(A.trigger){E(this).jqmAddTrigger(A.trigger)}})};E.fn.jqmAddClose=function(A){return M(this,A,"jqmHide")};E.fn.jqmAddTrigger=function(A){return M(this,A,"jqmShow")};E.fn.jqmShow=function(A){return this.each(function(){E.jqm.open(this._jqm,A)})};E.fn.jqmHide=function(A){return this.each(function(){E.jqm.close(this._jqm,A)})};E.jqm={hash:{},open:function(V,U){var L=N[V],Q=L.c,H="."+Q.closeClass,R=(parseInt(L.w.css("z-index"))),R=(R>0)?R:3000,F=E("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":R-1,opacity:Q.overlay/100});if(L.a){return O}L.t=U;L.a=true;L.w.css("z-index",R);if(Q.modal){if(!B[0]){K("bind")}B.push(V)}else{if(Q.overlay>0){L.w.jqmAddClose(F)}else{F=O}}L.o=(F)?F.addClass(Q.overlayClass).prependTo("body"):O;if(D){E("html,body").css({height:"100%",width:"100%"});if(F){F=F.css({position:"absolute"})[0];for(var S in {Top:1,Left:1}){F.style.setExpression(S.toLowerCase(),"(_=(document.documentElement.scroll"+S+" || document.body.scroll"+S+"))+'px'")}}}if(Q.ajax){var A=Q.target||L.w,T=Q.ajax,A=(typeof A=="string")?E(A,L.w):E(A),T=(T.substr(0,1)=="@")?E(U).attr(T.substring(1)):T;A.html(Q.ajaxText).load(T,function(){if(Q.onLoad){Q.onLoad.call(this,L)}if(H){L.w.jqmAddClose(E(H,L.w))}J(L)})}else{if(H){L.w.jqmAddClose(E(H,L.w))}}if(Q.toTop&&L.o){L.w.before('<span id="jqmP'+L.w[0]._jqm+'"></span>').insertAfter(L.o)}(Q.onShow)?Q.onShow(L):L.w.show();J(L);return O},close:function(F){var A=N[F];if(!A.a){return O}A.a=O;if(B[0]){B.pop();if(!B[0]){K("unbind")}}if(A.c.toTop&&A.o){E("#jqmP"+A.w[0]._jqm).after(A.w).remove()}if(A.c.onHide){A.c.onHide(A)}else{A.w.hide();if(A.o){A.o.remove()}}return O},params:{}};var P=0,N=E.jqm.hash,B=[],D=E.browser.msie&&(E.browser.version=="6.0"),O=false,G=E('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0}),J=function(A){if(D){if(A.o){A.o.html('<p style="width:100%;height:100%"/>').prepend(G)}else{if(!E("iframe.jqm",A.w)[0]){A.w.prepend(G)}}}I(A)},I=function(F){try{E(":input:visible",F.w)[0].focus()}catch(A){}},K=function(A){E()[A]("keypress",C)[A]("keydown",C)[A]("mousedown",C)},C=function(H){var A=N[B[B.length-1]],F=(!E(H.target).parents(".jqmID"+A.s)[0]);if(F){I(A)}return !F},M=function(A,F,H){return A.each(function(){var L=this._jqm;E(F).each(function(){if(!this[H]){this[H]=[];E(this).click(function(){for(var Q in {jqmShow:1,jqmHide:1}){for(var R in this[Q]){if(N[this[Q][R]]){N[this[Q][R]].w[Q](this)}}}return O})}this[H].push(L)})})}})(jQuery);(function($){$.fn.extend({autocomplete:function(urlOrData,options){var isUrl=typeof (urlOrData)==="string";options=$.extend({},$.Autocompleter.defaults,{url:isUrl?urlOrData:null,data:isUrl?null:urlOrData,delay:isUrl?$.Autocompleter.defaults.delay:10,max:options&&!options.scroll?10:150},options);options.highlight=options.highlight||function(value){return value};options.formatMatch=options.formatMatch||options.formatItem;return this.each(function(){new $.Autocompleter(this,options)})},result:function(handler){return this.bind("result",handler)},search:function(handler){return this.trigger("search",[handler])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(options){return this.trigger("setOptions",[options])},unautocomplete:function(){return this.trigger("unautocomplete")}});$.Autocompleter=function(input,options){var KEY={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var $input=$(input).attr("autocomplete","off").addClass(options.inputClass);var timeout;var previousValue="";var cache=$.Autocompleter.Cache(options);var hasFocus=0;var lastKeyPressCode;var config={mouseDownOnSelect:false};var select=$.Autocompleter.Select(options,input,selectCurrent,config);var blockSubmit;$.browser.opera&&$(input.form).bind("submit.autocomplete",function(){if(blockSubmit){blockSubmit=false;return false}});$input.bind(($.browser.opera?"keypress":"keydown")+".autocomplete",function(event){lastKeyPressCode=event.keyCode;switch(event.keyCode){case KEY.UP:event.preventDefault();if(select.visible()){select.prev()}else{onChange(0,true)}break;case KEY.DOWN:event.preventDefault();if(select.visible()){select.next()}else{onChange(0,true)}break;case KEY.PAGEUP:event.preventDefault();if(select.visible()){select.pageUp()}else{onChange(0,true)}break;case KEY.PAGEDOWN:event.preventDefault();if(select.visible()){select.pageDown()}else{onChange(0,true)}break;case options.multiple&&$.trim(options.multipleSeparator)==","&&KEY.COMMA:case KEY.TAB:case KEY.RETURN:event.stopImmediatePropagation();if(selectCurrent()){blockSubmit=true;return false}else{ag.siteSearch.submitSearch()}break;case KEY.ESC:select.hide();break;default:clearTimeout(timeout);timeout=setTimeout(onChange,options.delay);break}}).focus(function(){hasFocus++}).blur(function(){hasFocus=0;if(!config.mouseDownOnSelect){hideResults()}}).click(function(){if(hasFocus++>1&&!select.visible()){onChange(0,true)}}).bind("search",function(){var fn=(arguments.length>1)?arguments[1]:null;function findValueCallback(q,data){var result;if(data&&data.length){for(var i=0;i<data.length;i++){if(data[i].result.toLowerCase()==q.toLowerCase()){result=data[i];break}}}if(typeof fn=="function"){fn(result)}else{$input.trigger("result",result&&[result.data,result.value])}}$.each(trimWords($input.val()),function(i,value){request(value,findValueCallback,findValueCallback)})}).bind("flushCache",function(){cache.flush()}).bind("setOptions",function(){$.extend(options,arguments[1]);if("data" in arguments[1]){cache.populate()}}).bind("unautocomplete",function(){select.unbind();$input.unbind();$(input.form).unbind(".autocomplete")});function selectCurrent(){var selected=select.selected();if(!selected){return false}var v=selected.result;previousValue=v;$input.val(v);hideResultsNow();$input.trigger("result",[selected.url,selected.value,selected.url]);return true}function onChange(skipPrevCheck){if(lastKeyPressCode==KEY.DEL){select.hide();return }var currentValue=$input.val();if(!skipPrevCheck&&currentValue==previousValue){return }previousValue=currentValue;currentValue=lastWord(currentValue);if(currentValue.length>=options.minChars){$input.addClass(options.loadingClass);if(!options.matchCase){currentValue=currentValue.toLowerCase()}request(currentValue,receiveData,hideResultsNow)}else{stopLoading();select.hide()}}function trimWords(value){if(!value){return[""]}var words=value.split(options.multipleSeparator);var result=[];$.each(words,function(i,value){if($.trim(value)){result[i]=$.trim(value)}});return result}function lastWord(value){if(!options.multiple){return value}var words=trimWords(value);return words[words.length-1]}function autoFill(q,sValue){if(options.autoFill&&(lastWord($input.val()).toLowerCase()==q.toLowerCase())&&lastKeyPressCode!=KEY.BACKSPACE){$input.val($input.val()+sValue.substring(lastWord(previousValue).length));$.Autocompleter.Selection(input,previousValue.length,previousValue.length+sValue.length)}}function hideResults(){clearTimeout(timeout);timeout=setTimeout(hideResultsNow,200)}function hideResultsNow(){var wasVisible=select.visible();select.hide();clearTimeout(timeout);stopLoading();if(options.mustMatch){$input.search(function(result){if(!result){if(options.multiple){var words=trimWords($input.val()).slice(0,-1);$input.val(words.join(options.multipleSeparator)+(words.length?options.multipleSeparator:""))}else{$input.val("")}}})}if(wasVisible){$.Autocompleter.Selection(input,input.value.length,input.value.length)}}function receiveData(q,data){if(data&&data.length&&hasFocus){stopLoading();select.display(data,q);autoFill(q,data[0].value);select.show()}else{hideResultsNow()}}function request(term,success,failure){if(!options.matchCase){term=term.toLowerCase()}var data=cache.load(term);if(data&&data.length){success(term,data)}else{if((typeof options.url=="string")&&(options.url.length>0)){var extraParams={};$.each(options.extraParams,function(key,param){extraParams[key]=typeof param=="function"?param():param});$.ajax({mode:"abort",port:"autocomplete"+input.name,dataType:"jsonp",jsonpCallback:"typeAhead",url:options.url,data:$.extend({q:lastWord(encodeURIComponent(term)),limit:options.max},extraParams),success:function(data){var parsed=options.parse&&options.parse(data)||parse(data);cache.add(term,parsed);success(term,parsed)}})}else{select.emptyList();failure(term)}}}function parse(data){var parsed=[];var image_url_partial="http://www.addictinggames.com/newGames/";if(data.responseHeader){var rows=data.response.docs.length;for(var i=0;i<rows;i++){var gameName=data.response.docs[i].title_t[0];var imageToDisplay=image_url_partial+data.response.docs[i].keyword_t+"/"+data.response.docs[i].keyword_t[0]+".png";var imageTag='<img height="50" width= "50" src="'+imageToDisplay+'" />';try{var gameUrl=data.response.docs[i].game_url_s[0]}catch(e){var gameUrl="http://www.addictinggames.com"}parsed[parsed.length]={data:gameName,result:gameName,html:imageTag+'<span class="autoCompleteTitle">'+gameName+"</span>",url:gameUrl}}return parsed}else{for(var i=0;i<eval(data).length;i++){var row=eval(data)[i];if(row){parsed[parsed.length]={data:row,value:"Term:"+row+", URL:http://www.google.com/search?hl=en&q="+row,result:row}}}return parsed}}function stopLoading(){$input.removeClass(options.loadingClass)}};$.Autocompleter.defaults={inputClass:"autoCompleteInput",resultsClass:"autoCompleteResults",loadingClass:"autoCompleteLoading",minChars:1,delay:400,matchCase:false,matchSubset:false,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(row){return row[0]},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(value,term){return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:true,scrollHeight:164};$.Autocompleter.Cache=function(options){var data={};var length=0;function matchSubset(s,sub){if(!options.matchCase){s=s.toLowerCase()}var i=s.indexOf(sub);if(i==-1){return false}return i==0||options.matchContains}function add(q,value){if(length>options.cacheLength){flush()}if(!data[q]){length++}data[q]=value}function populate(){if(!options.data){return false}var stMatchSets={},nullData=0;if(!options.url){options.cacheLength=1}stMatchSets[""]=[];for(var i=0,ol=options.data.length;i<ol;i++){var rawValue=options.data[i];rawValue=(typeof rawValue=="string")?[rawValue]:rawValue;var value=options.formatMatch(rawValue,i+1,options.data.length);if(value===false){continue}var firstChar=value.charAt(0).toLowerCase();if(!stMatchSets[firstChar]){stMatchSets[firstChar]=[]}var row={value:value,data:rawValue,result:options.formatResult&&options.formatResult(rawValue)||value};stMatchSets[firstChar].push(row);if(nullData++<options.max){stMatchSets[""].push(row)}}$.each(stMatchSets,function(i,value){options.cacheLength++;add(i,value)})}setTimeout(populate,25);function flush(){data={};length=0}return{flush:flush,add:add,populate:populate,load:function(q){if(!options.cacheLength||!length){return null}if(!options.url&&options.matchContains){var csub=[];for(var k in data){if(k.length>0){var c=data[k];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub.push(x)}})}}return csub}else{if(data[q]){return data[q]}else{if(options.matchSubset){for(var i=q.length-1;i>=options.minChars;i--){var c=data[q.substr(0,i)];if(c){var csub=[];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub[csub.length]=x}});return csub}}}}}return null}}};$.Autocompleter.Select=function(options,input,select,config){var CLASSES={ACTIVE:"autoCompleteOver"};var listItems=null;var active=-1;var data=null;var term=null;var needsInit=true;var element=null;var list=null;function init(){if(!needsInit){return }element=$("<div/>").hide().addClass(options.resultsClass).css("position","absolute").appendTo(document.body);list=$("<ul/>").appendTo(element).mouseover(function(event){if(target(event).nodeName&&target(event).nodeName.toUpperCase()=="LI"){active=$("li",list).removeClass(CLASSES.ACTIVE).index(target(event));$(target(event)).addClass(CLASSES.ACTIVE)}});list.click(function(event){$(target(event)).addClass(CLASSES.ACTIVE);select();input.focus();return false});list.mousedown(function(){config.mouseDownOnSelect=true});list.mouseup(function(){config.mouseDownOnSelect=false});if(options.width>0){element.css("width",options.width)}needsInit=false}function target(event){var element=event.target;while(element&&element.tagName!="LI"){element=element.parentNode}if(!element){return[]}return element}function moveSelect(step){listItems.slice(active,active+1).removeClass(CLASSES.ACTIVE);movePosition(step);var activeItem=listItems.slice(active,active+1).addClass(CLASSES.ACTIVE);if(options.scroll){var offset=0;listItems.slice(0,active).each(function(){offset+=this.offsetHeight});if((offset+activeItem[0].offsetHeight-list.scrollTop())>list[0].clientHeight){list.scrollTop(offset+activeItem[0].offsetHeight-list.innerHeight())}else{if(offset<list.scrollTop()){list.scrollTop(offset)}}}}function movePosition(step){active+=step;if(active<0){active=listItems.size()-1}else{if(active>=listItems.size()){active=0}}}function limitNumberOfItems(available){if(options.max&&options.max<available){return options.max}else{return available}}function fillList(){list.empty();var max=limitNumberOfItems(data.length);for(var i=0;i<max;i++){if(!data[i]){continue}var formatted=options.formatItem(data[i].data,i+1,max,data[i].value,data.html);if(formatted===false){continue}var li=$("<li/>").html(options.highlight(data[i].html,term)).addClass(i%2==0?"autoCompleteEven":"autoCompleteOdd").appendTo(list)[0];$.data(li,"autoCompleteData",data[i])}listItems=list.find("li");if(options.selectFirst){listItems.slice(0,1).addClass(CLASSES.ACTIVE);active=0}if($.fn.bgiframe){list.bgiframe()}}return{display:function(d,q){init();data=d;term=q;fillList()},next:function(){moveSelect(1)},prev:function(){moveSelect(-1)},pageUp:function(){if(active!=0&&active-8<0){moveSelect(-active)}else{moveSelect(-8)}},pageDown:function(){if(active!=listItems.size()-1&&active+8>listItems.size()){moveSelect(listItems.size()-1-active)}else{moveSelect(8)}},hide:function(){element&&element.hide();listItems&&listItems.removeClass(CLASSES.ACTIVE);active=-1},visible:function(){return element&&element.is(":visible")},current:function(){return this.visible()&&(listItems.filter("."+CLASSES.ACTIVE)[0]||options.selectFirst&&listItems[0])},show:function(){var offset=$(input).offset();element.css({width:typeof options.width=="string"||options.width>0?options.width:$(input).width(),top:offset.top+input.offsetHeight,left:offset.left}).show();if(options.scroll){list.scrollTop(0);list.css({maxHeight:options.scrollHeight,overflow:"auto"});if($.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var listHeight=0;listItems.each(function(){listHeight+=this.offsetHeight});var scrollbarsVisible=listHeight>options.scrollHeight;list.css("height",scrollbarsVisible?options.scrollHeight:listHeight);if(!scrollbarsVisible){listItems.width(list.width()-parseInt(listItems.css("padding-left"))-parseInt(listItems.css("padding-right")))}}}},selected:function(){var selected=listItems&&listItems.filter("."+CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);return selected&&selected.length&&$.data(selected[0],"autoCompleteData")},emptyList:function(){list&&list.empty()},unbind:function(){element&&element.remove()}}};$.Autocompleter.Selection=function(field,start,end){if(field.createTextRange){var selRange=field.createTextRange();selRange.collapse(true);selRange.moveStart("character",start);selRange.moveEnd("character",end);selRange.select()}else{if(field.setSelectionRange){field.setSelectionRange(start,end)}else{if(field.selectionStart){field.selectionStart=start;field.selectionEnd=end}}}field.focus()}})(jQuery);function getValue(E,D){var C=E.split("~~");var A=0;var B="";for(A=0;A<C.length;A++){if(C[A].indexOf(D)!=-1){B="";B=C[A].substring(C[A].indexOf(":")+1,C[A].length);return B}}return max}(function(A){A.fn.hoverIntent=function(I,H){var J={sensitivity:7,interval:100,timeout:0};J=A.extend(J,H?{over:I,out:H}:I);var L,K,F,D;var E=function(M){L=M.pageX;K=M.pageY};var C=function(N,M){M.hoverIntent_t=clearTimeout(M.hoverIntent_t);if((Math.abs(F-L)+Math.abs(D-K))<J.sensitivity){A(M).unbind("mousemove",E);M.hoverIntent_s=1;return J.over.apply(M,[N])}else{F=L;D=K;M.hoverIntent_t=setTimeout(function(){C(N,M)},J.interval)}};var G=function(N,M){M.hoverIntent_t=clearTimeout(M.hoverIntent_t);M.hoverIntent_s=0;return J.out.apply(M,[N])};var B=function(P){var O=(P.type=="mouseover"?P.fromElement:P.toElement)||P.relatedTarget;while(O&&O!=this){try{O=O.parentNode}catch(P){O=this}}if(O==this){return false}var N=jQuery.extend({},P);var M=this;if(M.hoverIntent_t){M.hoverIntent_t=clearTimeout(M.hoverIntent_t)}if(P.type=="mouseover"){F=N.pageX;D=N.pageY;A(M).bind("mousemove",E);if(M.hoverIntent_s!=1){M.hoverIntent_t=setTimeout(function(){C(N,M)},J.interval)}}else{A(M).unbind("mousemove",E);if(M.hoverIntent_s==1){M.hoverIntent_t=setTimeout(function(){G(N,M)},J.timeout)}}};return this.mouseover(B).mouseout(B)}})(jQuery);ag.ModalOverlay=function(B,A){var C=this;this.config={};this.content={};this.callback=A.callback;if(A){this.config=A}if(!B){throw new Error("ag.ModalOverlay requires content");return }else{this.content=$(B)}this.fogger="";if($.support.opacity){this.fogger='<div id="modalOverlayFogger" style="opacity:0.7;">&#160;</div>'}else{this.fogger='<div id="modalOverlayFogger" style="filter:alpha(opacity=70);zoom:1;">&#160;</div>'}this.shell="";if(!A.noFrame){this.shell=$('<div id="modalOverlay" style="visibility:hidden;">   <div id="modalOverlayTop">      <div id="modalOverlayTopLeft"></div>      <div id="modalOverlayTopCenter">         <h1>&#160;</h1>         <div class="closeContainer"><div class="alternateAction"></div></div>		 <a href="#" class="modalCloseButton"></a>	         <div class="lower"></div>      </div>      <div id="modalOverlayTopRight"><div class="corner"></div></div>   </div>   <div id="modalOverlayMiddle">      <div id="modalOverlayMiddleOuter">         <div id="modalOverlayMiddleInner">            <div id="modalOverlayMiddleCenter" class="clearfix"></div>         </div>      </div>   </div>   <div id="modalOverlayBottom">      <div id="modalOverlayBottomLeft"><div class="corner"></div></div>      <div id="modalOverlayBottomCenter"></div>      <div id="modalOverlayBottomRight"><div class="corner"></div></div>   </div></div>')}else{this.shell=$('<div id="modalOverlay" style="visibility:hidden;">   <div id="modalOverlayMiddleCenter"></div></div>')}if(A.transparent){$(this.shell).find("#modalOverlay, #modalOverlayMiddleCenter").css("background","transparent")}if(this.config.headerText){$(this.shell).find("#modalOverlayTopCenter h1").text(this.config.headerText)}$(this.shell).find("#modalOverlayMiddleCenter").append(B);$(this.shell).find("#modalOverlayTopCenter a.modalCloseButton").click(function(D){C.close("cancel");D.preventDefault()});switch(this.config.alternateAction){case"login":$(this.shell).find("#modalOverlayTopCenter div.alternateAction").html('Already a member? <a href="#" id="registerToLoginLink">Login here</a>');break;case"loginReg":$(this.shell).find("#modalOverlayTopCenter div.alternateAction").html('Don\'t have an account? <a href="#" id="loginRegisterLink">Join now - It\'s FREE!</a>');break;default:break}this.show=function(H){var G=this;$("body").append(this.shell);var F;if(this.config.height){F=this.config.height}else{F=this.content.outerHeight(true)}if(F<200){F=200}var D;if(this.config.width){D=this.config.width}else{D=this.content.outerWidth(true)}if(D<400){D=400}$("#modalOverlayTopCenter, #modalOverlayBottomCenter").css({width:D+20});$("#modalOverlayMiddleOuter").css({width:D+60});var J=($("body").width()-$("#modalOverlay").width())/2;var E=window.pageYOffset||document.documentElement.scrollTop;var I=E+100;$("#modalOverlay").css({left:J,top:I});ag.hideFlashObjects();$("body").append(this.fogger);$("#modalOverlay").css({visibility:"visible"});$("#modalOverlay .modalOverlayTabs").tabs();if(H&&typeof H=="number"){setTimeout(function(){G.close()},H)}};this.close=function(D){$("#modalOverlay").empty().remove();$("#modalOverlayFogger").remove();ag.showFlashObjects();if(typeof (D)!=="undefined"){if(typeof (C.callback)!=="undefined"){C.callback()}}}};ag.ReportUserSubmittedContentAbuse=function(){this.init=function(B){var C=this;this.configObj=B;if(ag.userObject.uuid){this.launchConfirmDialog()}else{var A=new ag.Login({successCallback:function(){C.launchConfirmDialog()}}).launchLoginDialog()}};this.launchConfirmDialog=function(){var C=this;var B=$('<div class="reportAbuse" style="height:200px;width:500px;">   <p>Are you sure you want to report this '+this.configObj.typeDesc+'? Abuse of this reporting tool may result in cancellation of your account.</p>   <div class="w300 itemCentered clearfix">      <div class="fltL w150">          <a id="submitButton" class="primaryButton w100" href="">SUBMIT</a>      </div>      <div class="fltR w150">          <a id="cancelButton" class="secondaryButton w100" href="">CANCEL</a><br class="clearFloat">      </div>   </div></div>');var A=new ag.ModalOverlay(B,{headerText:"Confirm"});$(B).find("#submitButton").click(function(D){D.preventDefault();C.sendReport();A.close()});$(B).find("#cancelButton").click(function(D){D.preventDefault();A.close()});A.show()};this.sendReport=function(){var A=this;if(ag.userObject.uuid){var B=this.configObj;$.ajax({url:"/"+B.typeCode+"/report/"+B.itemId+".jsp",type:"GET",dataType:"json",success:function(C){if(C.status=="alreadySubmitted"){A.showAlreadySubmitted()}else{A.showThankYou()}$("#review-"+A.configObj.itemId).find("a.report").css({visibility:"hidden"})},error:function(C){A.showThankYou();$("#review-"+A.configObj.itemId).find("a.report").css({visibility:"hidden"})}})}else{this.showMustBeLoggedIn()}};this.showThankYou=function(){var B=$('<div class="reportAbuse" style="height:200px;width:500px;">   <p>Thank you for reporting this '+this.configObj.typeDesc+'</p>   <div class="formSubmitButtonContainer">      <a id="submitButton" class="primaryButton" href="">OK</a>   </div></div>');var A=new ag.ModalOverlay(B,{headerText:"Thank you"});$(B).find("#submitButton").click(function(C){C.preventDefault();A.close()});A.show(20000)};this.showAlreadySubmitted=function(){var B=$('<div class="reportAbuse" style="height:200px;width:500px;">   <p>You have already reported this '+this.configObj.typeDesc+'</p>   <div class="formSubmitButtonContainer">      <a id="submitButton" class="primaryButton" href="">OK</a>   </div></div>');var A=new ag.ModalOverlay(B,{headerText:"Report already submitted"});$(B).find("#submitButton").click(function(C){C.preventDefault();A.close()});A.show(20000)};this.showMustBeLoggedIn=function(){var A=$('<div class="reportAbuse" style="height:200px;width:500px;">   <p>You must be logged in to report this '+this.configObj.typeDesc+'</p>   <div class="formSubmitButtonContainer">      <a id="submitButton" class="primaryButton" href="">OK</a>   </div></div>');var B=new ag.ModalOverlay(A,{headerText:"You must be logged in"});$(A).find("#submitButton").click(function(C){C.preventDefault();B.close()});B.show()}};ag.sendEventThenFollowHref=function(B,A){btg.Controller.sendLinkEvent({linkName:B,linkType:"o",lnk:true});setTimeout(function(){window.location=A},200);return false};plusonez=function(A){console.log(A)};ag.trackPodClick=function(B,A){ag.persistMetrics.push("prop22",A.substring(0,A.indexOf("_")));ag.persistMetrics.push("prop23",A.substring(A.indexOf("_")+1,A.lastIndexOf("_")))};ag.writeFindingCookie=function(C,B,A){A(C,B)};ag.setFindingMethod=function(F,D){var A=F||window.event;try{A.preventDefault();D()}catch(E){}var C=A.target||A.srcElement;var B=$(C).attr("href");while(typeof B=="undefined"||B==""){C=$(C).parent();if(C.length==0){return false}B=$(C).attr("href")}if($(C).attr("target")==="_blank"){window.open(B)}else{window.location=B}return false};ag.getRandomArrayElement=function(A){return A[btg.Math.random(A.length-1)]};ag.reviewsAttachClickEvents=function(){$("#reviews .review .report").live("click",function(B){B.preventDefault();var A=$(B.target).parents(".review").attr("id").substr(7);new ag.ReportUserSubmittedContentAbuse().init({itemId:A,typeCode:"review",typeDesc:"review"})});$("#reviews .review .deleteReview").live("click",function(B){B.preventDefault();var A=$(B.target).parents(".review").attr("id").substr(7);$.getJSON("/game/delete-review/"+A+".jsp",function(C){if(C.status=="ok"){$(B.target).parents(".review").fadeOut("slow",function(){$(this).remove()})}})});$("#reviews .review .showMoreReview").live("click",function(A){A.preventDefault();$(A.target).parent("p.shortReview").hide();$(A.target).parents(".review").find("p.longReview").show()});$("#reviews .review .showLessReview").live("click",function(A){A.preventDefault();$(A.target).parent("p.longReview").hide();$(A.target).parents(".review").find("p.shortReview").show()})};ag.track=function(A){if(A!==undefined&&A!==null){if(A.ga!==undefined){A.ga.unshift("_trackEvent");_gaq.push(A.ga)}if(A.omniture!==undefined){A.omniture.linkType="o";btg.Controller.sendLinkEvent(A.omniture)}}};ag.gameServices.userObject=function(){return{signedInState:(ag.userObject.uuid)?"SignedInStandard":"NotSignedIn",signedInStateCode:(ag.userObject.uuid)?"SIS":"NSI",memberId:(ag.userObject.id)?ag.userObject.id:null,uuId:(ag.userObject.uuid)?ag.userObject.uuid:null,email:(ag.userObject.email)?ag.userObject.email:null,screenName:(ag.userObject.name)?ag.userObject.name:null,fbId:(ag.userObject.facebookId)?ag.userObject.facebookId:0,accessToken:(ag.userObject.accessToken)?ag.userObject.accessToken:null}};ag.gameServices.getUserInfo=function(B,C){if(ag.userObject.uuid||!B){return ag.gameServices.userObject()}else{var A=new ag.Login({cancelCallback:function(){ag.gameServices.returnUserInfo(C)}}).launchLoginDialog()}};ag.gameServices.returnUserInfo=function(A){if(typeof (A)!=="undefined"){ag.gameServices.notifySwf(A,ag.gameServices.userObject())}else{return ag.gameServices.userObject()}};ag.gameServices.getFlashObject=function(){if($.support.opacity){return window.document.gameObject}else{return document.getElementById("gameObject")}};ag.fb={loginDialog:{close:function(){$("#modalOverlay").empty().remove();$("#modalOverlayFogger").remove()},html:'<div><p>You\'re not logged in!  You can easily fix that by clicking the button below.</p> <a href="#" id="shareFbLogin" class="btnFacebookBig">Log In</a></div>'},shareGame:function(A,F,C,G,D){ag.hideFlashObjects();var B=document.location.hostname.substr(0,document.location.hostname.indexOf("."));ag.gameData.shareTitle=F;ag.gameData.shareDescription=C;ag.gameData.shareImage="http://"+B+".addictinggames.com/newGames/"+ag.gameData.keyword+"/events/"+A+".png";ag.gameData.shareParams=ag.fb.getHttpParamsFromParams(D);ag.gameData.shareHref=$('meta[property="og:url"]').attr("content")+"?extcmp=shareapi_"+ag.gameData.keyword;if(ag.gameData.shareParams.length>0){ag.gameData.shareHref=ag.gameData.shareHref+"&"+ag.gameData.shareParams}var E="shareapi_fbc_"+ag.gameData.keyword+"_"+A;btg.Controller.sendLinkEvent({linkName:"fb_share",linkType:"o",lnk:true,events:"event23",prop12:E});FB.getLoginStatus(function(H){if(H.authResponse){ag.fb.displayShareDialog()}else{ag.fb.displayFBLoginDialog()}})},displayShareDialog:function(){FB.ui({method:"stream.publish",display:"iframe",caption:"",name:ag.gameData.shareTitle,description:ag.gameData.shareDescription,picture:ag.gameData.shareImage,link:ag.gameData.shareHref,actions:{name:"Play Now",link:$('meta[property="og:url"]').attr("content")}},function(A){if(A&&A.post_id){btg.Controller.sendLinkEvent({linkName:"fb_share_success",linkType:"o",lnk:true,events:"event24"});ag.fb.notifySwf("success")}else{ag.fb.notifySwf("cancelled")}})},displayFBLoginDialog:function(){var A=new ag.ModalOverlay(ag.fb.loginDialog.html,{headerText:"Facebook Permissions",callback:function(){ag.fb.notifySwf("cancelled")}});A.show();btg.Controller.sendLinkEvent({linkName:"fb_share_siteModal",linkType:"o",lnk:true,events:"event25"});$("#shareFbLogin").click(function(B){B.preventDefault();ag.fb.loginDialog.close();FB.login(function(C){if(C.authResponse){ag.fb.displayShareDialog();btg.Controller.sendLinkEvent({linkName:"fb_share_loginSuccess",linkType:"o",lnk:true,events:"event26"})}else{ag.fb.notifySwf("cancelled")}})})},notifySwf:function(B){ag.showFlashObjects();var A=ag.gameServices.getFlashObject();A.onShareGameEventCallback(B)},getHttpParamsFromParams:function(B){var D="";if(typeof (B)!=="undefined"){if(B&&B.length>0){var C=B.split(",");if(C){for(i=0;i<C.length;i++){var A=C[i].split(":");if(A){if("keyword"!=A[0]){if(D.length>0){D=D+"&"}D=D+jQuery.trim(A[0])+"="+jQuery.trim(A[1])}}}}}}return D}};ag.gameServices.notifySwf=function(D,C){ag.showFlashObjects();var A=ag.gameServices.getFlashObject();try{A[D](C)}catch(B){}};FacebookRegisterModule={};FacebookRegisterModule.facebookShareGame=ag.fb.shareGame;ag.widget={};ag.widget.user={};ag.widget.user.LoginPopup={};ag.widget.user.LoginPopup.showPopup=function(){var A=new ag.Login({cancelCallback:function(){ag.gameServices.returnUserInfo("setUserInfoForServiceManager")}}).launchLoginDialog()};ag.showPartialNickBumper=function(){var D='<a href="/help/content-ratings.jsp" id="warningLinkFromNick"></a>';var A='<a href="/help/content-ratings.jsp" id="categoryWarningLink"></a>';function C(){if(btg.config.DoubleClick.sections==="_hp"){$("#potw").before(D)}else{if(btg.config.DoubleClick.sections.indexOf("_mn")!==-1){$("#potw").before(A)}}}if(document.referrer!=""&&document.referrer.indexOf(".nick.com")!==-1){if(document.referrer.indexOf("bumperFrameset")==-1){var B='<div id="nickBumper"><img src="/a/img/bumper_generic_new_d2.jpg" style="margin: 0 auto 0 auto;" width="900" height="179" /></div>';$("#mamabar").before(B);C();btg.Cookie.set("fromNick",true,{path:"/",domain:".addictinggames.com"});setTimeout(function(){$("#nickBumper").animate({height:0},function(){$("#nickBumper").remove()})},5000)}}else{if(btg.Cookie.read("fromNick")!==null){C()}}};$(document).ready(ag.showPartialNickBumper);ag.siteSearch={searchService:"http://search.mtvnservices.com/typeahead/suggest/?format=json",searchOptions:{minChars:1,width:380,autoFill:false,scrollHeight:164,scroll:true,max:10,selectFirst:false,cacheLength:0,matchCase:0,matchSubset:1,matchContains:0,mustMatch:0,lineSeparator:"\n",cellSeparator:"|",delay:400,extraParams:{siteName:"solr_addictinggames"}},startAutoCompleting:function(A){$(A).autocomplete(this.searchService,this.searchOptions)},stopAutoCompleting:function(){$(this.searchField).unautocomplete()},submitSearch:function(){btg.Search.setTypeAheadConversion();var A=encodeURIComponent($("#nsmInput").val());window.location="/search/games.jsp?gameKeyword="+A}};$(document).ready(function(){ag.siteSearch.startAutoCompleting("#nsmInput");$("#nsmInput").result(function(B,A){location.href=A});ag.siteSearch.startAutoCompleting("#sgm_search_input");$("#sgm_search_input").result(function(B,A){location.href=A});$("#nsmSubmitLink").click(function(){if($("#nsmInput").val()!=="Search AddictingGames..."){ag.siteSearch.submitSearch()}else{$("#nsmInput").val("").focus();$("#nsmSubmitLink").css("background-position","0 -23px")}});$("#nsmInput").one("click",function(){$("#nsmInput").val("").css({color:"#000"});$("#nsmSubmitLink").css("background-position","0 -23px")});$("#nsmInput").bind("keydown",function(A){if(A.which===13){ag.siteSearch.submitSearch()}});$("#nsmSelect").change(function(){if($("#nsmSelect").val()==="people"){ag.siteSearch.stopAutoCompleting()}else{ag.siteSearch.startAutoCompleting("#nsmInput")}})});$(document).ready(function(){if(ag.reskinIsActive==true){$("#bannerGradient").css("background","none");ag.delegateReskin()}});reskinSetBackgroundImgAndColor=function(A,B){$("#banner").css("background","transparent");$("#bannerWrapper").css("padding-top","5px");$("#headerWrapper").css("border-bottom","solid 1px #000");$("#reskinWrapper").css("background-image","url("+A+")");$("#reskinWrapper").css("background-color",B);$("#reskinWrapper").css("background-repeat","no-repeat")};reskinBackground=function(A,B){$("#reskinWrapper").css("background-image","url("+A+")");$("#reskinWrapper").css("background-color",B);$("#reskinWrapper").css("background-repeat","no-repeat");$("#banner").css("background-image","url(null)");var C=true};reskinSetBackgroundLinks=function(C,D){var A=$("#agContentWrapper").width();var B="";if(C.indexOf("http://")==0){B=' target="_blank"'}$("#reskinWrapper").prepend('<a href="'+C+'" '+B+' class="gutLinks clearLink" id="gutLinkLft">&nbsp;</a><a href="'+C+'" target="_blank" class="gutLinks clearLink" id="gutLinkRit">&nbsp;</a>');resizeGutterLinks=function(E){var G=$(window).width();var F=(G-E)/2;$(".gutLinks").width(F);$(".gutLinks").css("padding-top",D)};$(window).resize(function(){resizeGutterLinks(A)});resizeGutterLinks(A)};reskinBackground_ready=function(A,B){reskinSetBackgroundImgAndColor(A,B)};reskinBackgroundClickable_ready=function(A,B,C,D){reskinSetBackgroundImgAndColor(A,B);reskinSetBackgroundLinks(C,D)};reskinBackgroundSelectable_ready=function(A,F,E,C,B){$("#banner").css("height",186);$("#bannerWrapper").css("background","transparent");var H=A.length;if(typeof document.body.style.maxHeight==="undefined"){try{document.execCommand("BackgroundImageCache",false,true)}catch(G){}}selectableSkinLinkOnClick=function(J){reskinBackground_ready(A[J],F[J]);reskinSelectSprite("#selectableSkinLink-"+J);reskinDynamicTracking(C[J],B[J])};reskinSelectSprite=function(J){$("#reskinContent li a.selected").removeClass("selected");$(J).addClass("selected")};var I=function(){this.__strings__=new Array};I.prototype.append=function(J){this.__strings__.push(J)};I.prototype.toString=function(){return this.__strings__.join("")};var D=new I();D.append("<div id='reskinContent' class='reskinContent-"+H+"'>");D.append("<a href='"+C[0]+"' id='reskinSponsorLink' target='_blank' class='clearLink'>&nbsp;</a>");D.append("<ul>");for(i=0;i<H;i++){D.append('<li><a href="#" onclick="selectableSkinLinkOnClick('+i+'); return false;" id="selectableSkinLink-'+i+'" class="clearLink">select skin '+i+"</a></li>")}D.append("</ul>");$("#banner").append(D.toString());$("#reskinContent ul li a").css("background-image","url("+E+")");reskinBackground_ready(A[0],F[0]);reskinSelectSprite("#selectableSkinLink-0")};reskinDynamicTracking=function(B,A){$("#reskinSponsorLink").attr("href",B);try{if(typeof $("#selectableTracker").attr("src")=="undefined"){$("#reskinContent").append('<img id="selectableTracker" src="'+A+'" style="display:none;" />')}else{$("#selectableTracker").attr("src",A)}}catch(C){}};$(document).ready(function(){ag.userName=new ag.Username();ag.loginRegisterAttachClickEvents();ag.facebookRegisterAttachClickEvents();ag.loginSuccessEvent=new ag.Event();ag.forgotPasswordDialog.init()});window.fbAsyncInit=function(){FB.init({appId:ag.envConfig.facebookAppId,status:true,cookie:true,xfbml:true,oauth:true,apiKey:"LOL"});FB.Event.subscribe("auth.statusChange",function(A){if(A.authResponse){ag.userObject.accessToken=A.authResponse.accessToken;ag.getAdditionalFBData()}else{}});FB.Event.subscribe("edge.create",function(A){_gaq.push(["_trackSocial","facebook","like",A])});FB.Event.subscribe("edge.remove",function(A){_gaq.push(["_trackSocial","facebook","unlike",A])})};ag.loginRegisterAttachClickEvents=function(){$("#uimLoginLink").live("click",function(A){A.preventDefault();new ag.Login().launchLoginDialog()});$("#uimLogoutLink").live("click",function(A){A.preventDefault();new ag.Logout().logout(function(){if(ag.profile!==undefined){window.location="/index.jsp"}})});$("#uimRegisterLink").live("click",function(A){A.preventDefault();new ag.Register().launchRegister()});$("#facebookConnectLink, #userInfoMod .fbIcon").live("click",function(A){A.preventDefault();ag.facebookLogin()});$("#loginRegisterLink").live("click",function(A){A.preventDefault();ag.loginOverlay.close();new ag.Register().launchRegister()});$("#registerToLoginLink").live("click",function(B){B.preventDefault();ag.registerOverlay.close();var A=new ag.Login().launchLoginDialog()});$("#resendConfEmail").live("click",function(A){A.preventDefault();ag.resendRegConfEmail()});$("#closeRegConfirmButton").live("click",function(A){A.preventDefault();ag.registerOverlay.close();ag.loginSuccessEvent.fire()});$("#closeRemindEmailButton").live("click",function(A){A.preventDefault();ag.loginOverlay.close();ag.loginSuccessEvent.fire()});$("#loginFacebookButton").live("click",function(A){A.preventDefault();ag.loginOverlay.close();ag.facebookLogin()});$("#registerFacebookButton").live("click",function(A){A.preventDefault();ag.registerOverlay.close();ag.facebookLogin()});$("#registrationFormBean > #username").live("blur",function(A){ag.userName.updateStatus(ag.userName.getUsername())});$("#facebookRegistrationFormBean > div > #username").live("blur",function(A){ag.userName.updateStatus(ag.userName.getUsername())});$(".alternateName").live("click",function(A){$(ag.userName.usernameElement).val($(this).html());ag.userName.close(A);ag.userName.showSuccess()});$("#suggestedUsernameDialogDismiss").live("click",function(A){ag.userName.close(A);ag.userName.showFailure()});$("#accountSuggestedUsernameDialogDismiss").live("click",function(A){ag.userName.close(A);ag.userName.hideFailure()});$("#ineligibleContinueLink").live("click",function(A){A.preventDefault();ag.registerOverlay.close()});$("#loginForgotPassword").live("click",ag.forgotPasswordDialog.show);$("#forgotPasswordDialogDismiss").live("click",ag.forgotPasswordDialog.hide);$(".forgotPasswordSuccessDismiss").live("click",ag.forgotPasswordDialog.hide)};ag.forgotPasswordDialog={mode:"dialog",dialogElement:"#forgotPasswordDialog",inputElement:"#forgotPasswordInput",errorElement:"#forgotPasswordError",submitElement:"#forgotPasswordSubmit",context:this,hide:function(B){var A=ag.forgotPasswordDialog;B.preventDefault();$(A.dialogElement).hide();$(A.inputElement).val("");$(A.errorElement).hide();$(A.dialogElement+" .inputForm").show();$(A.submitElement).show();$(A.dialogElement+" .successMessage").hide()},show:function(B){var A=ag.forgotPasswordDialog;B.preventDefault();A.adjustDialogPosition();$(A.dialogElement).show()},init:function(){$(this.submitElement).die().live("click",function(A){A.preventDefault();$.ajax({url:"/user/forgot-password.jsp",data:"usernameOrEmail="+$(ag.forgotPasswordDialog.inputElement).val(),success:ag.forgotPasswordDialog.responseCallback})})},adjustDialogPosition:function(){if(this.mode==="dialog"){if($($("#loginDialogForm").children()[2]).hasClass("formError")){$(this.dialogElement).css("top",97)}else{$(this.dialogElement).css("top",61)}}},responseCallback:function(C){var B=$.parseJSON(C);var A=ag.forgotPasswordDialog;var D=$(A.inputElement).val();switch(B.status){case"ok":$(A.errorElement).hide();$("#loginDialogForm > #usernameOrEmail").val(D);$(A.dialogElement+" .inputForm").hide();$(A.dialogElement+" .successMessage").show();break;case"u13":$(A.errorElement).html('Please contact Customer Service at <a href="mailto:yourfriends@addictinggames.com">yourfriends@addictinggames.com</a> with your Username in order to retrieve your password.');$(A.submitElement).hide();$(A.errorElement).css("display","inline-block");break;default:$(A.errorElement).text(B.message);$(A.errorElement).css("display","inline-block")}},setMode:function(A){this.mode=A;switch(A){default:this.dialogInit()}this.init()},dialogInit:function(){this.dialogElement="#forgotPasswordDialog";this.errorElement="#forgotPasswordError";this.inputElement="#forgotPasswordInput";this.submitElement="#forgotPasswordSubmit"}};ag.whyRequiredHoverEventAttach=function(){$("#whyRequiredDialog").jqm({modal:false,overlay:0});$("#whyRequired").hoverIntent(ag.showWhyRequiredDialog,ag.hideWhyRequiredDialog)};ag.showWhyRequiredDialog=function(){$("#whyRequiredDialog").jqmShow()};ag.hideWhyRequiredDialog=function(){$("#whyRequiredDialog").jqmHide()};ag.Username=function(){var A=this;var F="";var L="";var M="";var H="";var K="#suggestedUsernameDialog";var G="";var B="";var C="";var E="";var I=true;var J=false;var D=false;this.close=function(N){if(typeof (N)!=="undefined"){N.preventDefault()}$(this.dialogElement).hide()};this.getUsername=function(){return $(this.usernameElement).val()};this.isAtLeastOneCharacter=function(){var N=ag.userName.getUsername().length;if(N>0){return true}else{return false}};this.updateStatus=function(P){if(typeof (P)!=="undefined"||this.isAtLeastOneCharacter()){var N="";if(typeof (P)==="undefined"){N=this.getUsername()}else{N=P}if((this.previousUsername!==N&&this.isAtLeastOneCharacter())||(this.previousUsername!==N&&typeof (P)!=="undefined")){this.previousUsername=N;var O="/user/validate/username.jsp?username="+this.previousUsername;this.showSpinner();$.getJSON(O,function(Q){A.updateStatusCallback(Q)})}else{return false}}else{this.hideSuccess()}};this.checkStatus=function(N){switch(this.status){case"ok":if(!this.facebook){A.hideSpinner();A.showSuccess();$(".formError").each(function(){if($(this).attr("id")!==undefined&&$(this).attr("id").indexOf("username")!==-1){$(this).remove()}});if(this.account){ag.account.submitInlineForm("username",ag.account.checkResponse("username"))}return true}else{A.hideSpinner();A.showSuccess();if(A.getUsername()!==A.previousUsername){$(this.usernameElement).val(A.previousUsername)}$("#fbSuggestedUsernameDialog").hide();return false}break;case"tooShort":if(this.facebook){this.showFbConnectErrors()}else{if(A.isAtLeastOneCharacter()){this.showErrors()}}break;case"duplicate":if(this.facebook){this.showFbConnectErrors()}else{this.showErrors()}break;default:this.hideSpinner();break}};this.showErrors=function(){this.hideSpinner();this.populateErrorDialog();this.showErrorDialog()};this.showFbConnectErrors=function(){this.hideSpinner();this.populateErrorDialog();if(this.previousUsername.toLowerCase()===ag.userObject.facebookFirstName.toLowerCase()){$(this.dialogElement+" .message").text("Here are some available usernames to try:").removeClass("formError")}else{$(this.dialogElement+" .message").addClass("formError")}$(this.dialogElement).show()};this.updateStatusCallback=function(N){A.status=N.status;A.alternates=N.recommend;A.message=N.message;A.checkStatus()};this.populateErrorDialog=function(){if($.browser.msie&&$.browser.version==="9.0"){$(this.dialogElement+" .alternates").css("list-style-type","disc")}var N=this.alternates.split(",");var P="";for(var O=0;O<N.length;O++){P=P+('<li><span class="alternateName">'+N[O]+"</span></li>")}$(this.dialogElement+" .message").html(this.message);$(this.dialogElement+" .alternates").html(P);$(this.dialogElement).jqm({modal:false,overlay:0})};this.showErrorDialog=function(){if(this.showdown&&$.browser.msie&&$.browser.version=="7.0"){$("#showdownSuggestedUsernameDialog").css("margin-top",35);$("#showdownSuggestedUsernameDialog").css("left",470)}$(this.dialogElement).show()};this.showSpinner=function(){$(this.spinnerElement).css("display","inline");this.hideSuccess();this.hideFailure()};this.showSuccess=function(){if(this.account){$(this.checkMarkElement).css("display","inline")}else{$(this.checkMarkElement).css("display","inline-block")}$("#username.errors").remove();this.hideFailure()};this.showFailure=function(){this.hideSuccess()};this.hideSpinner=function(){$(this.spinnerElement).hide()};this.hideSuccess=function(){$(this.checkMarkElement).hide()};this.hideFailure=function(){$(this.failureElement).remove();ag.userName.close()};this.facebookInit=function(){this.facebook=true;this.registerDialog=false;this.account=false;this.previousUsername="";this.dialogElement="#fbSuggestedUsernameDialog";this.usernameElement="#facebookRegistrationFormBean > div > #username";this.spinnerElement="#facebookRegistrationFormBean > div > #regSpinner";this.checkMarkElement="#facebookRegistrationFormBean > div > .regCheckMark";this.failureElement="#facebookRegistrationFormBean > div > #usernameFailure";$(this.dialogElement+" .message").html("Here are some available usernames to try:")};this.registerDialogInit=function(){this.facebook=false;this.registerDialog=true;this.account=false;this.dialogElement="#suggestedUsernameDialog";this.usernameElement="#registrationFormBean > #username";this.spinnerElement="#regSpinner";this.checkMarkElement="#regCheckMark";this.failureElement="#usernameFailure"};this.accountInit=function(){this.facebook=false;this.registerDialog=true;this.account=true;this.dialogElement="#accountSuggestedUsernameDialog";this.usernameElement="form.accountUsername > input";this.spinnerElement="#accountSpinner";this.checkMarkElement="#accountCheckMark";this.failureElement="#usernameFailure"};this.setMode=function(N){switch(N){case"registerDialog":this.registerDialogInit();break;case"facebook":this.facebookInit();break;case"accountPage":this.accountInit()}}};ag.facebookRegisterAttachClickEvents=function(){$("#relaunchFacebook").live("click",function(A){A.preventDefault();ag.confirmCancelFBOverlay.close();ag.facebookLogin()});$("#relaunchRegister").live("click",function(B){B.preventDefault();ag.confirmCancelFBOverlay.close();var A=new ag.Register().launchRegister()});$("#fbLinkLoginQuestion a").live("click",function(A){A.preventDefault();$("#fbLinkLoginQuestion, #linkAgLogin").toggle()});$("#fbLinkForgotPassword").live("click",function(A){A.preventDefault();$("#fbLoginDialogForm #forgotPassword").val("true");$("#fbLinkExistingSubmit").trigger("click")});$("#fbRegisterSubmit").live("click",function(A){A.preventDefault();ag.linkAccountForm=false;$.ajax({url:"/user/facebook/create-login.jsp",data:$("#facebookRegistrationFormBean").formSerialize(),type:"POST",dataType:"html",success:function(B){$("#fbCreateLinkDialog").replaceWith(B)}})});$("#fbLinkExistingSubmit").live("click",function(A){A.preventDefault();ag.linkAccountForm=true;$.ajax({url:"/user/facebook/link-login-manual.jsp",data:$("#fbLoginDialogForm").formSerialize(),type:"POST",dataType:"html",success:function(B){$("#fbCreateLinkDialog").replaceWith(B);$("#fbLinkLoginQuestion, #linkAgLogin").toggle()}})});$("#linkExistingAcctSubmit").live("click",function(A){A.preventDefault();$.ajax({url:"/user/facebook/link-login-auto.jsp",data:$("#linkExistingAcctForm").formSerialize(),type:"GET",dataType:"html",success:function(B){$("#confirmFBLinkExistingAcctDialog").replaceWith(B)}})});$("#rejectLinkExistingAcct").live("click",function(A){A.preventDefault();$("#confirmFBLinkExistingAcctDialog").load("/user/facebook/cancel-link-auto.jsp")});$("#gotoSettingsPage a").live("click",function(A){A.preventDefault();ag.genericFBOverlay.close();window.location="/static/php/account/privacyPage.php"});$("#letMePlay").live("click",function(A){A.preventDefault();ag.genericFBOverlay.close()});$("#connectWFriends").live("click",function(A){A.preventDefault();ag.genericFBOverlay.close()})};ag.Login=function(B){btg.Omniture.eVar14="login-form";btg.Controller.sendLinkEvent({linkName:"login_attempt",linkType:"o",lnk:true,eVar14:"login-form",events:"event28",prop26:"login-form"});if(typeof (B)==="object"){if(typeof (B.successCallback)==="function"){ag.loginSuccessEvent.delegate(B.successCallback)}}var A="/user/login.jsp";this.launchLoginDialog=function(){ag.forgotPasswordDialog.setMode("dialog");$("#fragmentRoot").load(A,function(){var C={headerText:"Log In to AddictingGames",alternateAction:"loginReg"};if(typeof (B)==="object"){if(typeof (B.cancelCallback)==="function"){C.callback=B.cancelCallback}}ag.loginOverlay=new ag.ModalOverlay($("#loginDialog"),C);ag.loginOverlay.show();if($("#loginDialogForm > #usernameOrEmail").val()==""){$("#loginDialogForm > #usernameOrEmail").focus()}else{$("#loginDialogForm > #password").focus()}$("#loginDialogForm > .formSubmitButtonContainer > #loginSubmit").die().live("click",function(D){ag.rememberMe=$("#rememberMe1").attr("checked");D.preventDefault();$.ajax({url:A,data:$("#loginDialogForm").formSerialize(),type:"POST",dataType:"html",success:function(E){$("#loginDialog").replaceWith(E)}})});$("#forgotPasswordDialog").jqm({modal:false,overlay:0})})}};ag.loginSuccess=function(){var A="";if(btg.String.isDefined(ag.rememberMe)){if(ag.rememberMe){A="-remember"}}btg.Controller.sendLinkEvent({linkName:"login_success",linkType:"o",lnk:true,events:"event7, event8, event30",eVar9:"loggedInSite",prop26:"login-form:success"+A});ag.loggedIn=true;ag.refreshInfoAndUpdateServiceManager()};ag.refreshInfoAndUpdateServiceManager=function(){$("#loginContainer").load("/user/forward/infoContainer.jsp",function(){if(typeof (ag.gameData)!=="undefined"){if(ag.gameData.isServiceManagerEnabled){ag.gameServices.notifySwf("notifyServiceManager","LOGIN");ag.gameServices.returnUserInfo("setUserInfoForServiceManager")}}ag.loginSuccessEvent.fire()})};ag.loginFailure=function(){btg.Controller.sendLinkEvent({linkName:"login_failure",linkType:"o",lnk:true,events:"event7, event28, event29",prop26:"login-form:error"})};ag.Logout=function(){this.logout=function(B){if(typeof (ag.gameData)!=="undefined"){if(ag.gameData.isServiceManagerEnabled){ag.gameServices.notifySwf("notifyServiceManager","LOGOUT")}}var A=this;if(ag.userObject.facebookId){FB.getLoginStatus(function(C){if(C.authResponse){FB.logout(function(D){A.callServerLogout(B)})}else{A.callServerLogout(B)}})}else{this.callServerLogout(B)}};this.callServerLogout=function(A){$.getJSON("/user/logout.jsp",function(B){if(B.status=="ok"){$("#loginContainer").load("/user/forward/infoContainer.jsp");if(typeof A=="function"){A()}}else{new ag.ModalOverlay("<p>There was an error with your request.</p>",{headerText:"Error"})}})}};ag.Register=function(B){btg.Omniture.eVar14="register-form";btg.Controller.sendLinkEvent({linkName:"register_attempt",linkType:"o",lnk:true,eVar14:"register-form",events:"event28",prop26:"register-form"});if(B){ag.loginSuccessEvent.delegate(B)}var A="/user/register.jsp";this.launchRegister=function(C){ag.userName.setMode("registerDialog");$("#fragmentRoot").load(A,function(){ag.registerOverlay=new ag.ModalOverlay($("#registerDialog"),{headerText:"Create an AddictingGames Account",alternateAction:"login"});if(typeof (C)==="function"){ag.registerOverlay.callback=C}ag.registerOverlay.show();$("#registerDialog").css("min-height",$("#registerDialog").height());$("#registrationFormBean > #username").focus();$("#registerSubmit").die().live("click",function(D){D.preventDefault();$.ajax({url:A,data:$("#registrationFormBean").formSerialize(),type:"POST",dataType:"html",success:function(E){$("#registerDialog").replaceWith(E);ag.userName.checkStatus();ag.whyRequiredHoverEventAttach()}})})});setTimeout(ag.whyRequiredHoverEventAttach,500)}};ag.registerSuccess=function(){btg.Controller.sendLinkEvent({linkName:"register_success",linkType:"o",lnk:true,events:"event9, event11, event29, event30",prop26:"register-form:success",eVar9:"loggedInSite"});$("#loginContainer").load("/user/forward/infoContainer.jsp")};ag.getFormErrors=function(){var A="";$(".formError").each(function(){var B=$(this).attr("id");A=A+B.substring(0,B.indexOf("."))+":"});return A.substring(0,A.length-1)};ag.registerFailure=function(){btg.Controller.sendLinkEvent({linkName:"register_failure",linkType:"o",lnk:true,events:"event9, event28, event29",prop26:"register-form:error",prop27:ag.getFormErrors()})};ag.facebookLogin=function(){btg.Omniture.eVar14="login-with-facebook";btg.Controller.sendLinkEvent({linkName:"login_fbook_attempt",linkType:"o",lnk:true,eVar14:"login-with-facebook",prop26:btg.Omniture.eVar14});ag.getAdditionalFBData();ag.userName.setMode("facebook");FB.login(function(A){if(A.authResponse){FB.api("/me",function(B){$.ajax({url:"/user/facebook/connect.jsp?fbId="+B.id+"&accessToken="+ag.userObject.accessToken,dataType:"html",success:function(C){$("#fragmentRoot").append('<div id="tmpFBOverlay"></div>');$("#tmpFBOverlay").append(C);if($("#tmpFBOverlay div").length>0){ag.genericFBOverlay=new ag.ModalOverlay($("#tmpFBOverlay").children("div").clone(),{headerText:"Facebook Connect"});ag.genericFBOverlay.show();if(ag.userObject.facebookFirstName!=""){ag.userName.updateStatus(ag.userObject.facebookFirstName.toLowerCase())}else{setTimeout(function(){ag.userName.updateStatus(ag.userObject.facebookFirstName.toLowerCase())},500)}btg.Controller.sendLinkEvent({linkName:"fbc_regoverlay",linkType:"o",lnk:true,events:"event10, event28",prop26:btg.Omniture.eVar14+":facebook-connect"})}else{ag.fbLoginSuccess()}$("#tmpFBOverlay").remove()}})})}else{}},{scope:"email,user_birthday,publish_stream,publish_actions"})};ag.fbRegisterConnectSuccess=function(){btg.Omniture.prop2="loggedInFacebook";var B={linkName:"fbc_linkoverlay_success",linkType:"o",lnk:true};var A="event12, ";if(btg.String.isDefined(ag.linkAccountForm)&&ag.linkAccountForm){A=A+"event14, ";B.prop26="login-with-facebook:link-success"}else{B.prop26="login-with-facebook:join-success"}A=A+"event29, event30";B.events=A;B.eVar9=btg.Omniture.prop2;btg.Controller.sendLinkEvent(B);if(typeof (ag.genericFBOverlay)!=="undefined"){ag.genericFBOverlay.close()}ag.refreshInfoAndUpdateServiceManager()};ag.fbLoginSuccess=function(){btg.Omniture.prop2="loggedInFacebook";var A={linkName:"fbc_login_success",linkType:"o",lnk:true};A.eVar9=btg.Omniture.prop2;A.events="event13";btg.Controller.sendLinkEvent(A);ag.refreshInfoAndUpdateServiceManager()};ag.fbConnectFailure=function(){if(!ag.linkAccountForm){btg.Controller.sendLinkEvent({linkName:"fbc_regoverlay_failure",linkType:"o",lnk:true,events:"event28, event29",prop26:"login-with-facebook:join-error",prop28:ag.getFormErrors()})}ag.userName.checkStatus()};ag.fbLinkFailure=function(){if(ag.linkAccountForm){btg.Controller.sendLinkEvent({linkName:"fbc_linkoverlay_failure",linkType:"o",lnk:true,events:"event28, event29",prop26:"login-with-facebook:link-error"})}};ag.resendRegConfEmail=function(){$.getJSON("/user/resend-confirm-email.jsp",function(A){if(A.status=="ok"){$("#resendConfEmail").parent().replaceWith($('<p style="color:#f00;">Confirmation email has been re-sent.</p>'))}else{$("#resendConfEmail").parent().replaceWith($("<p>An error occurred while re-sending the confirmation email.</p>"))}})};ag.Event=function(){this.delegate=function(A){if(typeof A!="function"){throw new Error("Event type callback is not a function")}else{this.callback=A}};this.fire=function(){if(this.callback){this.callback()}this.callback=null}};ag.getAdditionalFBData=function(){FB.api("/me",function(A){ag.userObject.facebookFirstName=A.first_name})};$(document).ready(function(){$("#mamabarMoreLi").live("mouseover",function(){$("#mamabarMoreLi").toggleClass("mamabarMoreLiOver");$("#mamabarMoreSpan").toggleClass("mamabarMoreSpanOver");$("#mamabarMoreMenu").show()});$("#mamabarMoreLi").live("mouseout",function(){$("#mamabarMoreLi").toggleClass("mamabarMoreLiOver");$("#mamabarMoreSpan").toggleClass("mamabarMoreSpanOver");$("#mamabarMoreMenu").hide()})});function brandMamabarMoreOver(A){A.className="brand-mamabar-more-link brand-mamabar-more-link-hover"}function brandMamabarMoreOut(A){A.className="brand-mamabar-more-link"}ag.redirectToPageAfterLogin=function(A){return function(){if(ag.loggedIn){window.location=A}else{var B=new ag.Login({successCallback:function(){window.location=A}});B.launchLoginDialog()}}};ag.launchRegister=function(){if(!ag.loggedIn){var A=new ag.Register();A.launchRegister()}};ag.PageEvents={emailPrefs:ag.redirectToPageAfterLogin("/user/view-email-prefs.jsp"),notifications:ag.redirectToPageAfterLogin("/user/notifications.jsp"),register:ag.launchRegister,startPhotoUpload:function(){setTimeout(ag.photo.showDialog,500)}};ag.checkForPageEvent=function(){if(window.location.search!==""){var A=btg.String.queryStringToObject(window.location.search);if(A.pageEvent!==undefined){if(ag.PageEvents[A.pageEvent]!==undefined){ag.PageEvents[A.pageEvent]()}}}};$(document).ready(ag.checkForPageEvent);$(document).ready(function(){ag.attachHeaderMoreEvents();ag.attachHeaderTracking();ag.relocateShowFooterText();ag.attachFooterTracking()});ag.attachHeaderMoreEvents=function(){$("#headerMore").live("click",function(){ag.track({ga:["mainNav","moreArrow"]});if($("#headerMoreFilters").height()!==186){$("#headerMoreFilters").animate({height:186});$("#headerMoreText").text("Close");$("#headerMoreArrow").addClass("headerMoreArrowUp")}else{$("#headerMoreFilters").animate({height:0});$("#headerMoreText").text("More");$("#headerMoreArrow").removeClass("headerMoreArrowUp")}return false})};ag.trackTabLink=function(){return function(C){C.preventDefault();var B=C.target.title;var A=C.target.href;if(B===""){B=C.target.parentNode.title;A=C.target.parentNode.href}ag.track({ga:["mainNav","tab",B]});setTimeout(function(){window.location=A},100);return false}};ag.trackBlogLink=function(B){B.preventDefault();var A=B.target.href;ag.track({ga:["mainNav","social","blog"]});setTimeout(function(){window.location=A},100);return false};ag.trackNavLink=function(A){A.preventDefault();var B="topNav_tag_"+A.target.id.substring(4);ag.setFindingMethod(A,ag.writeFindingCookie("prop14",B,ag.persistMetrics.push));return false};ag.attachHeaderTracking=function(){$("#categoryNav a.categoryPage").each(function(){var A=$(this).attr("id").substring(4);$(this).bind("click",function(B){ag.setFindingMethod(B,ag.writeFindingCookie("prop14","topNav_"+A,ag.persistMetrics.push));return false})});$("#navTabs").on("click","a.ga-nav",ag.trackTabLink());$("#headerMoreFilters").on("click","a.navTagLink",ag.trackNavLink);$("#socialIconsContainer").on("click","li.socialBlog",ag.trackBlogLink)};ag.relocateShowFooterText=function(){$("#footerCopy").insertAfter("#footerCategoryNav").show()};ag.attachFooterTracking=function(){$("#footerCategoryNav .categoryPage").each(function(){var A=$(this).attr("id").substring(5);$(this).bind("click",function(B){ag.setFindingMethod(B,ag.writeFindingCookie("prop14","footerNav_"+A,ag.persistMetrics.push));return false})})};$(document).ready(function(){ag.attachOverlayEvents()});ag.attachOverlayEvents=function(){$(".gameIcon").live("mouseover",function(){if(!$(this).hasClass("noHover")){if(!$(this).data("init")){$(this).data("init",true);$(this).hoverIntent({over:function(C){var A=ag.getGameKeyword(C.target);var B=new ag.GameDescOverlay(C.target);if($("#gameOverlay"+A).length>0){B.setOverlayDom($("#gameOverlay"+A));B.positionOverlay();$("#gameOverlay"+A).show()}else{B.createOverlay()}},out:function(A){$("#gameOverlay"+ag.getGameKeyword($(A.target))).hide()},timeout:100,interval:500});$(this).trigger("mouseover")}}})};ag.GameDescOverlay=function(A){this.overlayDom={};this.rootGameObj=A;this.gameKeyword=ag.getGameKeyword(this.rootGameObj);this.setOverlayDom=function(B){this.overlayDom=B};this.createOverlay=function(){var B=this;$.getJSON("/game/json/"+this.gameKeyword+".jsp",function(E){B.overlayDom=$('<div class="gameDescOverlay" id="gameOverlay'+B.gameKeyword+'"></div>');var F=$('<div class="overlayContent"></div>');B.overlayDom.append(F);F.append($('<h3 class="gameTitle">'+E.title+"</h3>"));F.append($("<p>Launch Date: "+E.addDate+"</p>"));F.append($("<h3>Description:</h3><p>"+E.description+"</p>"));F.append($("<h3>Game Category:</h3><p>"+E.category+"</p>"));var D="";if(E.isMature){D='<span class="bombSmall hideTxt">Mature Content</span>'}F.append($('<h3 class="maturityInfoTitle">Rating:</h3><span class="maturityInfo">'+E.maturityText+"</span> "+D+"</p>"));if(E.tags.length>0){F.append($("<h3>Tags:</h3>"));var C="";$.each(E.tags,function(){C+=(this.name+", ")});C=C.substring(0,C.length-2);F.append($('<p class="gameTags">'+C+"</p>"))}$("#fragmentRoot").append($(B.overlayDom));B.positionOverlay();B.overlayDom.show()})};this.positionOverlay=function(){var C=window.pageYOffset||document.documentElement.scrollTop;var E=window.innerHeight||document.documentElement.clientHeight;var D=345;var B=$(this.rootGameObj).offset();$(this.overlayDom).css("left",B.left-125+(0.5*$(this.rootGameObj).width()));if($(this.rootGameObj).offset().top+D+$(this.rootGameObj).height()>C+E){$(this.overlayDom).removeClass("gameDescOverlayBelow").addClass("gameDescOverlayAbove");$(this.overlayDom).css("top",B.top-350)}else{$(this.overlayDom).removeClass("gameDescOverlayAbove").addClass("gameDescOverlayBelow");$(this.overlayDom).css("top",B.top+$(this.rootGameObj).height())}}};ag.getGameKeyword=function(B){var D=$(B).attr("class").split(" ");var A;for(var C in D){if(D[C].substr(0,8)=="keyword-"){A=D[C].substr(8)}}return A};(function(){var A=document.createElement("script");A.async=true;A.src=document.location.protocol+"//connect.facebook.net/en_US/all.js";document.getElementById("fb-root").appendChild(A)}());(function(){var A=document.createElement("script");A.type="text/javascript";A.async=true;A.src="https://apis.google.com/js/plusone.js";var B=document.getElementsByTagName("script")[0];B.parentNode.insertBefore(A,B)})();(function(){var A=document.createElement("SCRIPT");var B=document.getElementsByTagName("script")[0];A.type="text/javascript";A.async=true;A.src="http://platform.twitter.com/widgets.js";B.parentNode.insertBefore(A,B)})();