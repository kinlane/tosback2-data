(function(c){c.fn.calcSubWidth=function(){cswew=0;c(this).find("ul").each(function(){var l=c(this).outerWidth(true);if((c.browser.mozilla&&(navigator.platform.substr(0,3)==="Mac"))||(c.browser.msie&&parseInt(c.browser.version)===9)){l+=3}if(c.browser.mozilla&&parseInt(c.browser.version)>=4){l+=1}cswew+=l;if(c.browser.msie&&parseInt(c.browser.version)===6){c(this).css("width",c(this).width())}})};function b(s){var m=s.find(".sub"),l=s.outerWidth(true);if(m){var n=m.find(".row"),q=m.outerWidth(true),o=Math.floor(Math.abs(m.position().left)*1.5);if(n.length===0){m.calcSubWidth();if(q>=l){l=cswew}else{l=l-q+cswew+o;if((c.browser.mozilla&&(navigator.platform.substr(0,3)==="Mac"))||(c.browser.msie&&parseInt(c.browser.version)===9)){l-=o}}}else{var r=0;n.each(function(){c(this).calcSubWidth();r=(cswew>r)?cswew:r;if(c.browser.msie&&parseInt(c.browser.version)===7){var p=c(this).find("li.ul");if(p.length!==0){p.each(function(){c(this).css("width",c(this).parent().width())})}}});l=r}m.css("width",l);m.addClass("calc");return l}}function e(){var p=c(this),n=p.find(".sub"),o=c("#hdrnav").find("li.toplvl.active");o.addClass("sel");p.addClass("over");if(n&&n.length!==0){n.show();if(!(n).hasClass("calc")){var m=b(p);if(n.attr("id")==="ldtab"){var q=-1*(n.outerWidth()-2-(920-n.parent().first().position().left));if((c.browser.mozilla&&parseInt(c.browser.version)>=3)||(c.browser.msie&&parseInt(c.browser.version)===9)){q+=1}n.css("left",q)}}}}function i(){var n=c(this),l=n.find(".sub"),m=c("#hdrnav").find("li.toplvl.active");if(l){l.hide()}n.removeClass("over");m.removeClass("sel")}function d(l){if(l.target===this){window.location.href=c(this).find("h2 a").attr("href")}}function j(){f();h();a();var p=c(this),n=p.find(".sub"),o=c("#hdrnav").find("li.toplvl.active");o.addClass("sel");p.addClass("over");if(n&&n.length!==0){n.show();if(!(n).hasClass("calc")){var m=b(p);if(n.attr("id")==="ldtab"){var q=-1*(n.outerWidth()-2-(920-n.parent().first().position().left));n.css("left",q)}}}}function h(){c("#hdrnav li.over .hdrtoplbl").unbind("touchstart");k();var n=c("#hdrnav li.over"),l=n.find(".sub"),m=c("#hdrnav").find("li.toplvl.active");if(l){l.hide()}n.removeClass("over");m.removeClass("sel")}function g(){h();a();c(this).children("ul").show()}function a(){c("#currentEdition li").has("ul").children("ul").hide()}function k(){var l=c("#hdrnav .hdrtoplbl h2 a");l.each(function(){var n=c(this),m=n.attr("href");if(n.data("href")===undefined){n.data("href",m)}n.attr("href","javascript:void(0);")})}function f(){setTimeout(function(){var m=c("#hdrnav li.over .hdrtoplbl h2 a"),l=m.data("href");if(l!==undefined){m.attr("href",l);if(c("#hdrnav li.over").find(".sub").length===0){window.location.href=l}else{c("#hdrnav li.over .hdrtoplbl").bind("touchstart",function(){window.location.href=l})}}},0)}c(document).ready(function(){if("ontouchstart" in document.documentElement){k();c("html").bind("touchstart",h);c("html").bind("touchstart",a);c("#hdrnav").bind("touchstart",function(m){m.stopPropagation()});var l=c("#currentEdition li").has("ul");l.bind("touchstart",function(m){m.stopPropagation()});l.bind("click",g);c("#hdrnav li.toplvl").bind("click",j)}else{c("#currentEdition").children("li").hover(function(){c(this).children("ul").show()},function(){c(this).children("ul").hide()});c("#hdrnav li.toplvl").hover(e,i);c("#hdrnav").delegate(".hdrtoplbl","click",d)}})})(jQuery);