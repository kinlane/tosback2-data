(function(k){k.fn.calcSubWidth=function(){cswew=0;k(this).find("ul").each(function(){var l=k(this).outerWidth(true);if((k.browser.mozilla&&(navigator.platform.substr(0,3)==="Mac"))||(k.browser.msie&&parseInt(k.browser.version)===9)){l+=3}if(k.browser.mozilla&&parseInt(k.browser.version)>=4){l+=1}cswew+=l;if(k.browser.msie&&parseInt(k.browser.version)===6){k(this).css("width",k(this).width())}})};function i(q){var r=q.find(".sub"),o=q.outerWidth(true);if(r){var m=r.find(".row"),n=r.outerWidth(true),p=Math.floor(Math.abs(r.position().left)*1.5);if(m.length===0){r.calcSubWidth();if(n>=o){o=cswew}else{o=o-n+cswew+p;if((k.browser.mozilla&&(navigator.platform.substr(0,3)==="Mac"))||(k.browser.msie&&parseInt(k.browser.version)===9)){o-=p}}}else{var l=0;m.each(function(){k(this).calcSubWidth();l=(cswew>l)?cswew:l;if(k.browser.msie&&parseInt(k.browser.version)===7){var s=k(this).find("li.ul");if(s.length!==0){s.each(function(){k(this).css("width",k(this).parent().width())})}}});o=l}r.css("width",o);r.addClass("calc");return o}}function e(){var o=k(this),m=o.find(".sub"),l=k("#hdrnav").find("li.toplvl.active");l.addClass("sel");o.addClass("over");if(m&&m.length!==0){m.show();if(!(m).hasClass("calc")){var p=i(o);if(m.attr("id")==="ldtab"){var n=-1*(m.outerWidth()-2-(920-m.parent().first().position().left));if((k.browser.mozilla&&parseInt(k.browser.version)>=3)||(k.browser.msie&&parseInt(k.browser.version)===9)){n+=1}m.css("left",n)}}}}function h(){var m=k(this),l=m.find(".sub"),n=k("#hdrnav").find("li.toplvl.active");if(l){l.hide()}m.removeClass("over");n.removeClass("sel")}function b(l){if(l.target===this){window.location.href=k(this).find("h2 a").attr("href")}}function c(){g();f();d();var o=k(this),m=o.find(".sub"),l=k("#hdrnav").find("li.toplvl.active");l.addClass("sel");o.addClass("over");if(m&&m.length!==0){m.show();if(!(m).hasClass("calc")){var p=i(o);if(m.attr("id")==="ldtab"){var n=-1*(m.outerWidth()-2-(920-m.parent().first().position().left));m.css("left",n)}}}}function f(){k("#hdrnav li.over .hdrtoplbl").unbind("touchstart");a();var m=k("#hdrnav li.over"),l=m.find(".sub"),n=k("#hdrnav").find("li.toplvl.active");if(l){l.hide()}m.removeClass("over");n.removeClass("sel")}function j(){f();d();k(this).children("ul").show()}function d(){k("#currentEdition li").has("ul").children("ul").hide()}function a(){var l=k("#hdrnav .hdrtoplbl h2 a");l.each(function(){var n=k(this),m=n.attr("href");if(n.data("href")===undefined){n.data("href",m)}n.attr("href","javascript:void(0);")})}function g(){setTimeout(function(){var m=k("#hdrnav li.over .hdrtoplbl h2 a"),l=m.data("href");if(l!==undefined){m.attr("href",l);if(k("#hdrnav li.over").find(".sub").length===0){window.location.href=l}else{k("#hdrnav li.over .hdrtoplbl").bind("touchstart",function(){window.location.href=l})}}},0)}k(document).ready(function(){if("ontouchstart" in document.documentElement){a();k("html").bind("touchstart",f);k("html").bind("touchstart",d);k("#hdrnav").bind("touchstart",function(m){m.stopPropagation()});var l=k("#currentEdition li").has("ul");l.bind("touchstart",function(m){m.stopPropagation()});l.bind("click",j);k("#hdrnav li.toplvl").bind("click",c)}else{k("#currentEdition").children("li").hover(function(){k(this).children("ul").show()},function(){k(this).children("ul").hide()});k("#hdrnav li.toplvl").hover(e,h);k("#hdrnav").delegate(".hdrtoplbl","click",b)}})})(jQuery);