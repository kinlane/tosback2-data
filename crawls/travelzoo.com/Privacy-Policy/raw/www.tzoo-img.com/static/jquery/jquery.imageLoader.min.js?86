$.widget("ui.imageLoader",{options:{async:!0,images:[]},total:0,_init:function(){var a;this.total++;this.loaded=0;this.data=[];for(a=0;a<this.options.images.length;a++){this.data.push({init:!1,complete:!1,error:!1,src:this.options.images[a],img:new Image,i:a})}for(a=0;a<this.data.length&&(this.options.async===!0||a===0||a<parseInt(this.options.async,10));a++){this._loadImg(a)}return this},_loadImg:function(b){var a=this;if(b!==!1&&b<a.data.length&&!a.data[b].init){a.data[b].init=!0,a._trigger("start",null,{i:b,data:$.extend(!0,{},a.data)}),setTimeout(function(){a.data[b].img.onload=function(){a.loaded++;a.data[b].complete=!0;a._trigger("complete",null,{i:b,data:$.extend(!0,{},a.data)});a._complete(b)};a.data[b].img.src=a.data[b].src;a.data[b].img.onerror=function(){a.loaded++;a.data[b].error=!0;a._trigger("error",null,{i:b,data:$.extend(!0,{},a.data)});a._complete(b)}},1)}},_complete:function(a){(!this.options.async||typeof this.options.async==="number")&&this._loadImg(this._next(a));this.loaded===this.data.length&&this._trigger("allcomplete",null,$.extend(!0,{},this.data))},_next:function(b){var a;for(a=0;a<this.data.length;a++){if(a!==b&&!this.data[a].init){return a}}return !1},getData:function(){return $.extend(!0,{},this.data)},destroy:function(){$.Widget.prototype.destroy.apply(this,arguments)}});