function createCookie(k,j,h){var g="";if(h){var f=new Date();f.setTime(f.getTime()+(h*24*60*60*1000));g="; expires="+f.toGMTString()}document.cookie=k+"="+j+g+"; path=/"}function readCookie(c){var j=c+"=";var g=document.cookie.split(";");for(var k=0;k<g.length;k++){var h=g[k];while(h.charAt(0)==" "){h=h.substring(1,h.length)}if(h.indexOf(j)===0){return h.substring(j.length,h.length)}}return null}function eraseCookie(c){createCookie(c,"",-1)}function scriptsTrackingString(){var h,e,g="{",f=booking.env.scripts_tracking;for(h in f){if(f.hasOwnProperty(h)){e=f[h];g+='"'+h+'":{"loaded":'+!!e.loaded+',"run":'+!!e.run+"},"}}g=g.slice(0,g.length-1)+"}";return"&scripts="+encodeURIComponent(g)}var report_error;function send_error_report(){if(report_error&&document.getElementById&&document.getElementById("req_info")){report_error(document.getElementById("req_info").innerHTML);report_error=null}else{if(report_error){setTimeout(send_error_report,100)}}}window.onabort=function(){document.ff_kill=true};function handleBeforeUnload(){document.ff_kill=true}if(window.addEventListener){if(typeof window.onbeforeunload!=="undefined"){window.addEventListener("beforeunload",handleBeforeUnload,false)}}window.onerror=function(l,e,o){var q=readCookie("error_catcher");if(typeof document.ff_kill!=="undefined"&&document.ff_kill===true&&navigator.userAgent.search("Firefox")!=-1&&l==="Error loading script"){return false}if(q=="kill"||(typeof document.kill!="undefined"&&document.kill===true)){return false}if(typeof window.booking_error_count==="undefined"||isNaN(window.booking_error_count)||isNaN(window.booking_error_previous)){window.booking_error_count=0;window.booking_error_previous=0;window.booking_error_sent=0}if(window.booking_error_sent>5){return}window.booking_error_count++;var n;if(window.XMLHttpRequest){try{n=new window.XMLHttpRequest()}catch(m){n=false}}else{var k=new Array("Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP");for(var t=0;t<k.length;t++){try{n=new ActiveXObject(k[t]);window.status=t;break}catch(m){n=false}}}if(n){report_error=function(d){var f="error="+encodeURIComponent(l)+"&pid="+encodeURIComponent(booking.env.pageview_id);if(typeof l==="object"){var g="";if(l.srcElement&&l.srcElement.src){g+="scriptSrc="+l.srcElement.src}else{g+="scriptSrc=inline"}f="error="+encodeURIComponent(l+" :: "+g)+"&pid="+encodeURIComponent(booking.env.pageview_id)}f+="&url="+encodeURIComponent(e!==""&&typeof e!=="undefined"?e:location.href.split("?")[0]);if(typeof PageLoadTimer!=="undefined"){var c="&since="+(+new Date()-PageLoadTimer.start)+"&ready="+(PageLoadTimer.document_ready-PageLoadTimer.start?PageLoadTimer.document_ready-PageLoadTimer.start:0)+"&loaded="+(PageLoadTimer.window_load-PageLoadTimer.start?PageLoadTimer.window_load-PageLoadTimer.start:0);f+=c}if(booking.env.enable_scripts_tracking){f+=scriptsTrackingString()}if(Number(o)){f+="&lno="+Number(o)}if(d){f+="&info="+d}f+="&errc="+window.booking_error_count+"&errp="+window.booking_error_previous;window.booking_error_previous=window.booking_error_count;n.open("GET","/js_errors?"+f,true);n.setRequestHeader("Content-type","application/x-www-form-urlencoded");n.setRequestHeader("Content-length",0);n.setRequestHeader("Connection","close");n.onreadystatechange=function(){if(n.readyState==4&&(n.status==503||n.responseText=="shut up")){document.kill=true;createCookie("error_catcher","kill",30)}};n.send();window.booking_error_sent++};send_error_report()}return false};
/*!
 * jQuery JavaScript Library v1.4.4
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Nov 11 19:04:53 2010 -0500
 */
(function(aB,aF){function l(t,c,E){if(E===aF&&t.nodeType===1){E=t.getAttribute("data-"+c);if(typeof E==="string"){try{E=E==="true"?true:E==="false"?false:E==="null"?null:!af.isNaN(E)?parseFloat(E):ag.test(E)?af.parseJSON(E):E}catch(B){}af.data(t,c,E)}else{E=aF}}return E}function aq(){return false}function O(){return true}function a3(t,c,B){B[0].type=t;return af.event.handle.apply(c,B)}function H(aa){var X,W,V,U,T,P,S,E,Z,c,B,t=[];U=[];T=af.data(this,this.nodeType?"events":"__events__");if(typeof T==="function"){T=T.events}if(!(aa.liveFired===this||!T||!T.live||aa.button&&aa.type==="click")){if(aa.namespace){B=RegExp("(^|\\.)"+aa.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}aa.liveFired=this;var Y=T.live.slice(0);for(S=0;S<Y.length;S++){T=Y[S];T.origType.replace(an,"")===aa.type?U.push(T.selector):Y.splice(S--,1)}U=af(aa.target).closest(U,aa.currentTarget);E=0;for(Z=U.length;E<Z;E++){c=U[E];for(S=0;S<Y.length;S++){T=Y[S];if(c.selector===T.selector&&(!B||B.test(T.namespace))){P=c.elem;V=null;if(T.preType==="mouseenter"||T.preType==="mouseleave"){aa.type=T.preType;V=af(aa.relatedTarget).closest(T.selector)[0]}if(!V||V!==P){t.push({elem:P,handleObj:T,level:c.level})}}}}E=0;for(Z=t.length;E<Z;E++){U=t[E];if(W&&U.level>W){break}aa.currentTarget=U.elem;aa.data=U.handleObj.data;aa.handleObj=U.handleObj;B=U.handleObj.origHandler.apply(U.elem,arguments);if(B===false||aa.isPropagationStopped()){W=U.level;if(B===false){X=false}if(aa.isImmediatePropagationStopped()){break}}}return X}}function am(t,c){return(t&&t!=="*"?t+".":"")+c.replace(q,"`").replace(a7,"&")}function aQ(t,c,E){if(af.isFunction(c)){return af.grep(t,function(S,P){return !!c.call(S,P,S)===E})}else{if(c.nodeType){return af.grep(t,function(P){return P===c===E})}else{if(typeof c==="string"){var B=af.grep(t,function(P){return P.nodeType===1});if(aV.test(c)){return af.filter(c,B,!E)}else{c=af.filter(c,B)}}}}return af.grep(t,function(P){return af.inArray(P,c)>=0===E})}function aC(t,c){var B=0;c.each(function(){if(this.nodeName===(t[B]&&t[B].nodeName)){var T=af.data(t[B++]),S=af.data(this,T);if(T=T&&T.events){delete S.handle;S.events={};for(var P in T){for(var E in T[P]){af.event.add(this,P,T[P][E],T[P][E].data)}}}}})}function aI(t,c){c.src?af.ajax({url:c.src,async:false,dataType:"script"}):af.globalEval(c.text||c.textContent||c.innerHTML||"");c.parentNode&&c.parentNode.removeChild(c)}function ae(t,c,E){var B=c==="width"?t.offsetWidth:t.offsetHeight;if(E==="border"){return B}af.each(c==="width"?aj:K,function(){E||(B-=parseFloat(af.css(t,"padding"+this))||0);if(E==="margin"){B+=parseFloat(af.css(t,"margin"+this))||0}else{B-=parseFloat(af.css(t,"border"+this+"Width"))||0}});return B}function z(t,c,E,B){if(af.isArray(c)&&c.length){af.each(c,function(S,P){E||w.test(t)?B(t,P):z(t+"["+(typeof P==="object"||af.isArray(P)?S:"")+"]",P,E,B)})}else{if(!E&&c!=null&&typeof c==="object"){af.isEmptyObject(c)?B(t,""):af.each(c,function(S,P){z(t+"["+S+"]",P,E,B)})}else{B(t,c)}}}function at(t,c){var B={};af.each(G.concat.apply([],G.slice(0,c)),function(){B[this]=t});return B}function o(t){if(!j[t]){var c=af("<"+t+">").appendTo("body"),B=c.css("display");c.remove();if(B==="none"||B===""){B="block"}j[t]=B}return j[t]}function a0(c){return af.isWindow(c)?c:c.nodeType===9?c.defaultView||c.parentWindow:false}var M=aB.document,af=function(){function bn(){if(!bm.isReady){try{M.documentElement.doScroll("left")}catch(bo){setTimeout(bn,1);return}bm.ready()}}var bm=function(bo,bp){return new bm.fn.init(bo,bp)},bl=aB.jQuery,bk=aB.$,bj,bh=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,be=/\S/,bf=/^\s+/,bb=/\s+$/,V=/\W/,ab=/\d/,ba=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,aa=/^[\],:{}\s]*$/,T=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,W=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,U=/(?:^|:|,)(?:\s*\[)+/g,P=/(webkit)[ \/]([\w.]+)/,bi=/(opera)(?:.*version)?[ \/]([\w.]+)/,bg=/(msie) ([\w.]+)/,bc=/(mozilla)(?:.*? rv:([\w.]+))?/,bd=navigator.userAgent,a9=false,a8=[],Y,S=Object.prototype.toString,X=Object.prototype.hasOwnProperty,E=Array.prototype.push,B=Array.prototype.slice,t=String.prototype.trim,Z=Array.prototype.indexOf,c={};bm.fn=bm.prototype={init:function(bp,br){var bo,bs,bq;if(!bp){return this}if(bp.nodeType){this.context=this[0]=bp;this.length=1;return this}if(bp==="body"&&!br&&M.body){this.context=M;this[0]=M.body;this.selector="body";this.length=1;return this}if(typeof bp==="string"){if((bo=bh.exec(bp))&&(bo[1]||!br)){if(bo[1]){bq=br?br.ownerDocument||br:M;if(bs=ba.exec(bp)){if(bm.isPlainObject(br)){bp=[M.createElement(bs[1])];bm.fn.attr.call(bp,br,true)}else{bp=[bq.createElement(bs[1])]}}else{bs=bm.buildFragment([bo[1]],[bq]);bp=(bs.cacheable?bs.fragment.cloneNode(true):bs.fragment).childNodes}return bm.merge(this,bp)}else{if((bs=M.getElementById(bo[2]))&&bs.parentNode){if(bs.id!==bo[2]){return bj.find(bp)}this.length=1;this[0]=bs}this.context=M;this.selector=bp;return this}}else{if(!br&&!V.test(bp)){this.selector=bp;this.context=M;bp=M.getElementsByTagName(bp);return bm.merge(this,bp)}else{return !br||br.jquery?(br||bj).find(bp):bm(br).find(bp)}}}else{if(bm.isFunction(bp)){return bj.ready(bp)}}if(bp.selector!==aF){this.selector=bp.selector;this.context=bp.context}return bm.makeArray(bp,this)},selector:"",jquery:"1.4.4",length:0,size:function(){return this.length},toArray:function(){return B.call(this,0)},get:function(bo){return bo==null?this.toArray():bo<0?this.slice(bo)[0]:this[bo]},pushStack:function(bp,bq,bo){var br=bm();bm.isArray(bp)?E.apply(br,bp):bm.merge(br,bp);br.prevObject=this;br.context=this.context;if(bq==="find"){br.selector=this.selector+(this.selector?" ":"")+bo}else{if(bq){br.selector=this.selector+"."+bq+"("+bo+")"}}return br},each:function(bo,bp){return bm.each(this,bo,bp)},ready:function(bo){bm.bindReady();if(bm.isReady){bo.call(M,bm)}else{a8&&a8.push(bo)}return this},eq:function(bo){return bo===-1?this.slice(bo):this.slice(bo,+bo+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(B.apply(this,arguments),"slice",B.call(arguments).join(","))},map:function(bo){return this.pushStack(bm.map(this,function(bq,bp){return bo.call(bq,bp,bq)}))},end:function(){return this.prevObject||bm(null)},push:E,sort:[].sort,splice:[].splice};bm.fn.init.prototype=bm.fn;bm.extend=bm.fn.extend=function(){var bo,bw,bt,bq,bs,bu=arguments[0]||{},br=1,bp=arguments.length,bv=false;if(typeof bu==="boolean"){bv=bu;bu=arguments[1]||{};br=2}if(typeof bu!=="object"&&!bm.isFunction(bu)){bu={}}if(bp===br){bu=this;--br}for(;br<bp;br++){if((bo=arguments[br])!=null){for(bw in bo){bt=bu[bw];bq=bo[bw];if(bu!==bq){if(bv&&bq&&(bm.isPlainObject(bq)||(bs=bm.isArray(bq)))){if(bs){bs=false;bt=bt&&bm.isArray(bt)?bt:[]}else{bt=bt&&bm.isPlainObject(bt)?bt:{}}bu[bw]=bm.extend(bv,bt,bq)}else{if(bq!==aF){bu[bw]=bq}}}}}}return bu};bm.extend({noConflict:function(bo){aB.$=bk;if(bo){aB.jQuery=bl}return bm},isReady:false,readyWait:1,ready:function(bp){bp===true&&bm.readyWait--;if(!bm.readyWait||bp!==true&&!bm.isReady){if(!M.body){return setTimeout(bm.ready,1)}bm.isReady=true;if(!(bp!==true&&--bm.readyWait>0)){if(a8){var bq=0,bo=a8;for(a8=null;bp=bo[bq++];){bp.call(M,bm)}bm.fn.trigger&&bm(M).trigger("ready").unbind("ready")}}}},bindReady:function(){if(!a9){a9=true;if(M.readyState==="complete"){return setTimeout(bm.ready,1)}if(M.addEventListener){M.addEventListener("DOMContentLoaded",Y,false);aB.addEventListener("load",bm.ready,false)}else{if(M.attachEvent){M.attachEvent("onreadystatechange",Y);aB.attachEvent("onload",bm.ready);var bo=false;try{bo=aB.frameElement==null}catch(bp){}M.documentElement.doScroll&&bo&&bn()}}}},isFunction:function(bo){return bm.type(bo)==="function"},isArray:Array.isArray||function(bo){return bm.type(bo)==="array"},isWindow:function(bo){return bo&&typeof bo==="object"&&"setInterval" in bo},isNaN:function(bo){return bo==null||!ab.test(bo)||isNaN(bo)},type:function(bo){return bo==null?String(bo):c[S.call(bo)]||"object"},isPlainObject:function(bo){if(!bo||bm.type(bo)!=="object"||bo.nodeType||bm.isWindow(bo)){return false}if(bo.constructor&&!X.call(bo,"constructor")&&!X.call(bo.constructor.prototype,"isPrototypeOf")){return false}for(var bp in bo){}return bp===aF||X.call(bo,bp)},isEmptyObject:function(bo){for(var bp in bo){return false}return true},error:function(bo){throw bo},parseJSON:function(bo){if(typeof bo!=="string"||!bo){return null}bo=bm.trim(bo);if(aa.test(bo.replace(T,"@").replace(W,"]").replace(U,""))){return aB.JSON&&aB.JSON.parse?aB.JSON.parse(bo):(new Function("return "+bo))()}else{bm.error("Invalid JSON: "+bo)}},noop:function(){},globalEval:function(bp){if(bp&&be.test(bp)){var bq=M.getElementsByTagName("head")[0]||M.documentElement,bo=M.createElement("script");bo.type="text/javascript";if(bm.support.scriptEval){bo.appendChild(M.createTextNode(bp))}else{bo.text=bp}bq.insertBefore(bo,bq.firstChild);bq.removeChild(bo)}},nodeName:function(bo,bp){return bo.nodeName&&bo.nodeName.toUpperCase()===bp.toUpperCase()},each:function(bq,bt,bp){var bu,br=0,bs=bq.length,bo=bs===aF||bm.isFunction(bq);if(bp){if(bo){for(bu in bq){if(bt.apply(bq[bu],bp)===false){break}}}else{for(;br<bs;){if(bt.apply(bq[br++],bp)===false){break}}}}else{if(bo){for(bu in bq){if(bt.call(bq[bu],bu,bq[bu])===false){break}}}else{for(bp=bq[0];br<bs&&bt.call(bp,br,bp)!==false;bp=bq[++br]){}}}return bq},trim:t?function(bo){return bo==null?"":t.call(bo)}:function(bo){return bo==null?"":bo.toString().replace(bf,"").replace(bb,"")},makeArray:function(bp,bq){var bo=bq||[];if(bp!=null){var br=bm.type(bp);bp.length==null||br==="string"||br==="function"||br==="regexp"||bm.isWindow(bp)?E.call(bo,bp):bm.merge(bo,bp)}return bo},inArray:function(bp,bq){if(bq.indexOf){return bq.indexOf(bp)}for(var bo=0,br=bq.length;bo<br;bo++){if(bq[bo]===bp){return bo}}return -1},merge:function(bp,br){var bo=bp.length,bs=0;if(typeof br.length==="number"){for(var bq=br.length;bs<bq;bs++){bp[bo++]=br[bs]}}else{for(;br[bs]!==aF;){bp[bo++]=br[bs++]}}bp.length=bo;return bp},grep:function(bq,bt,bp){var bu=[],br;bp=!!bp;for(var bs=0,bo=bq.length;bs<bo;bs++){br=!!bt(bq[bs],bs);bp!==br&&bu.push(bq[bs])}return bu},map:function(bq,bt,bp){for(var bu=[],br,bs=0,bo=bq.length;bs<bo;bs++){br=bt(bq[bs],bs,bp);if(br!=null){bu[bu.length]=br}}return bu.concat.apply([],bu)},guid:1,proxy:function(bp,bq,bo){if(arguments.length===2){if(typeof bq==="string"){bo=bp;bp=bo[bq];bq=aF}else{if(bq&&!bm.isFunction(bq)){bo=bq;bq=aF}}}if(!bq&&bp){bq=function(){return bp.apply(bo||this,arguments)}}if(bp){bq.guid=bp.guid=bp.guid||bq.guid||bm.guid++}return bq},access:function(bq,bt,bp,bv,br,bs){var bo=bq.length;if(typeof bt==="object"){for(var bu in bt){bm.access(bq,bu,bt[bu],bv,br,bp)}return bq}if(bp!==aF){bv=!bs&&bv&&bm.isFunction(bp);for(bu=0;bu<bo;bu++){br(bq[bu],bt,bv?bp.call(bq[bu],bu,br(bq[bu],bt)):bp,bs)}return bq}return bo?br(bq[0],bt):aF},now:function(){return(new Date).getTime()},uaMatch:function(bo){bo=bo.toLowerCase();bo=P.exec(bo)||bi.exec(bo)||bg.exec(bo)||bo.indexOf("compatible")<0&&bc.exec(bo)||[];return{browser:bo[1]||"",version:bo[2]||"0"}},browser:{}});bm.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(bo,bp){c["[object "+bp+"]"]=bp.toLowerCase()});bd=bm.uaMatch(bd);if(bd.browser){bm.browser[bd.browser]=true;bm.browser.version=bd.version}if(bm.browser.webkit){bm.browser.safari=true}if(Z){bm.inArray=function(bo,bp){return Z.call(bp,bo)}}if(!/\s/.test("\u00a0")){bf=/^[\s\xA0]+/;bb=/[\s\xA0]+$/}bj=bm(M);if(M.addEventListener){Y=function(){M.removeEventListener("DOMContentLoaded",Y,false);bm.ready()}}else{if(M.attachEvent){Y=function(){if(M.readyState==="complete"){M.detachEvent("onreadystatechange",Y);bm.ready()}}}}return aB.jQuery=aB.$=bm}();(function(){af.support={};var X=M.documentElement,V=M.createElement("script"),U=M.createElement("div"),T="script"+af.now();U.style.display="none";U.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var S=U.getElementsByTagName("*"),P=U.getElementsByTagName("a")[0],B=M.createElement("select"),E=B.appendChild(M.createElement("option"));if(!(!S||!S.length||!P)){af.support={leadingWhitespace:U.firstChild.nodeType===3,tbody:!U.getElementsByTagName("tbody").length,htmlSerialize:!!U.getElementsByTagName("link").length,style:/red/.test(P.getAttribute("style")),hrefNormalized:P.getAttribute("href")==="/a",opacity:/^0.55$/.test(P.style.opacity),cssFloat:!!P.style.cssFloat,checkOn:U.getElementsByTagName("input")[0].value==="on",optSelected:E.selected,deleteExpando:true,optDisabled:false,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableHiddenOffsets:true};B.disabled=true;af.support.optDisabled=!E.disabled;V.type="text/javascript";try{V.appendChild(M.createTextNode("window."+T+"=1;"))}catch(t){}X.insertBefore(V,X.firstChild);if(aB[T]){af.support.scriptEval=true;delete aB[T]}try{delete V.test}catch(W){af.support.deleteExpando=false}X.removeChild(V);if(U.attachEvent&&U.fireEvent){U.attachEvent("onclick",function c(){af.support.noCloneEvent=false;U.detachEvent("onclick",c)});U.cloneNode(true).fireEvent("onclick")}U=M.createElement("div");U.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";X=M.createDocumentFragment();X.appendChild(U.firstChild);af.support.checkClone=X.cloneNode(true).cloneNode(true).lastChild.checked;af(function(){var Z=M.createElement("div");Z.style.width=Z.style.paddingLeft="1px";M.body.appendChild(Z);af.boxModel=af.support.boxModel=Z.offsetWidth===2;if("zoom" in Z.style){Z.style.display="inline";Z.style.zoom=1;af.support.inlineBlockNeedsLayout=Z.offsetWidth===2;Z.style.display="";Z.innerHTML="<div style='width:4px;'></div>";af.support.shrinkWrapBlocks=Z.offsetWidth!==2}Z.innerHTML="<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";var Y=Z.getElementsByTagName("td");af.support.reliableHiddenOffsets=Y[0].offsetHeight===0;Y[0].style.display="";Y[1].style.display="none";af.support.reliableHiddenOffsets=af.support.reliableHiddenOffsets&&Y[0].offsetHeight===0;Z.innerHTML="";M.body.removeChild(Z).style.display="none"});X=function(Z){var Y=M.createElement("div");Z="on"+Z;var aa=Z in Y;if(!aa){Y.setAttribute(Z,"return;");aa=typeof Y[Z]==="function"}return aa};af.support.submitBubbles=X("submit");af.support.changeBubbles=X("change");X=V=U=S=P=null}})();var a6={},ag=/^(?:\{.*\}|\[.*\])$/;af.extend({cache:{},uuid:0,expando:"jQuery"+af.now(),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},data:function(t,c,S){if(af.acceptData(t)){t=t==aB?a6:t;var P=t.nodeType,E=P?t[af.expando]:null,B=af.cache;if(!(P&&!E&&typeof c==="string"&&S===aF)){if(P){E||(t[af.expando]=E=++af.uuid)}else{B=t}if(typeof c==="object"){if(P){B[E]=af.extend(B[E],c)}else{af.extend(B,c)}}else{if(P&&!B[E]){B[E]={}}}t=P?B[E]:B;if(S!==aF){t[c]=S}return typeof c==="string"?t[c]:t}}},removeData:function(B,c){if(af.acceptData(B)){B=B==aB?a6:B;var T=B.nodeType,S=T?B[af.expando]:B,P=af.cache,E=T?P[S]:S;if(c){if(E){delete E[c];T&&af.isEmptyObject(E)&&af.removeData(B)}}else{if(T&&af.support.deleteExpando){delete B[af.expando]}else{if(B.removeAttribute){B.removeAttribute(af.expando)}else{if(T){delete P[S]}else{for(var t in B){delete B[t]}}}}}}},acceptData:function(t){if(t.nodeName){var c=af.noData[t.nodeName.toLowerCase()];if(c){return !(c===true||t.getAttribute("classid")!==c)}}return true}});af.fn.extend({data:function(B,c){var U=null;if(typeof B==="undefined"){if(this.length){var T=this[0].attributes,S;U=af.data(this[0]);for(var P=0,t=T.length;P<t;P++){S=T[P].name;if(S.indexOf("data-")===0){S=S.substr(5);l(this[0],S,U[S])}}}return U}else{if(typeof B==="object"){return this.each(function(){af.data(this,B)})}}var E=B.split(".");E[1]=E[1]?"."+E[1]:"";if(c===aF){U=this.triggerHandler("getData"+E[1]+"!",[E[0]]);if(U===aF&&this.length){U=af.data(this[0],B);U=l(this[0],B,U)}return U===aF&&E[1]?this.data(E[0]):U}else{return this.each(function(){var W=af(this),V=[E[0],c];W.triggerHandler("setData"+E[1]+"!",V);af.data(this,B,c);W.triggerHandler("changeData"+E[1]+"!",V)})}},removeData:function(c){return this.each(function(){af.removeData(this,c)})}});af.extend({queue:function(t,c,E){if(t){c=(c||"fx")+"queue";var B=af.data(t,c);if(!E){return B||[]}if(!B||af.isArray(E)){B=af.data(t,c,af.makeArray(E))}else{B.push(E)}return B}},dequeue:function(t,c){c=c||"fx";var E=af.queue(t,c),B=E.shift();if(B==="inprogress"){B=E.shift()}if(B){c==="fx"&&E.unshift("inprogress");B.call(t,function(){af.dequeue(t,c)})}}});af.fn.extend({queue:function(t,c){if(typeof t!=="string"){c=t;t="fx"}if(c===aF){return af.queue(this[0],t)}return this.each(function(){var B=af.queue(this,t,c);t==="fx"&&B[0]!=="inprogress"&&af.dequeue(this,t)})},dequeue:function(c){return this.each(function(){af.dequeue(this,c)})},delay:function(t,c){t=af.fx?af.fx.speeds[t]||t:t;c=c||"fx";return this.queue(c,function(){var B=this;setTimeout(function(){af.dequeue(B,c)},t)})},clearQueue:function(c){return this.queue(c||"fx",[])}});var aU=/[\n\t]/g,ay=/\s+/,f=/\r/g,aX=/^(?:href|src|style)$/,aK=/^(?:button|input)$/i,al=/^(?:button|input|object|select|textarea)$/i,L=/^a(?:rea)?$/i,aH=/^(?:radio|checkbox)$/i;af.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};af.fn.extend({attr:function(t,c){return af.access(this,t,c,true,af.attr)},removeAttr:function(c){return this.each(function(){af.attr(this,c,"");this.nodeType===1&&this.removeAttribute(c)})},addClass:function(V){if(af.isFunction(V)){return this.each(function(W){var X=af(this);X.addClass(V.call(this,W,X.attr("class")))})}if(V&&typeof V==="string"){for(var U=(V||"").split(ay),T=0,S=this.length;T<S;T++){var P=this[T];if(P.nodeType===1){if(P.className){for(var E=" "+P.className+" ",t=P.className,B=0,c=U.length;B<c;B++){if(E.indexOf(" "+U[B]+" ")<0){t+=" "+U[B]}}P.className=af.trim(t)}else{P.className=V}}}}return this},removeClass:function(B){if(af.isFunction(B)){return this.each(function(W){var V=af(this);V.removeClass(B.call(this,W,V.attr("class")))})}if(B&&typeof B==="string"||B===aF){for(var c=(B||"").split(ay),U=0,T=this.length;U<T;U++){var S=this[U];if(S.nodeType===1&&S.className){if(B){for(var P=(" "+S.className+" ").replace(aU," "),t=0,E=c.length;t<E;t++){P=P.replace(" "+c[t]+" "," ")}S.className=af.trim(P)}else{S.className=""}}}}return this},toggleClass:function(t,c){var E=typeof t,B=typeof c==="boolean";if(af.isFunction(t)){return this.each(function(S){var P=af(this);P.toggleClass(t.call(this,S,P.attr("class"),c),c)})}return this.each(function(){if(E==="string"){for(var U,T=0,P=af(this),S=c,V=t.split(ay);U=V[T++];){S=B?S:!P.hasClass(U);P[S?"addClass":"removeClass"](U)}}else{if(E==="undefined"||E==="boolean"){this.className&&af.data(this,"__className__",this.className);this.className=this.className||t===false?"":af.data(this,"__className__")||""}}})},hasClass:function(t){t=" "+t+" ";for(var c=0,B=this.length;c<B;c++){if((" "+this[c].className+" ").replace(aU," ").indexOf(t)>-1){return true}}return false},val:function(B){if(!arguments.length){var c=this[0];if(c){if(af.nodeName(c,"option")){var U=c.attributes.value;return !U||U.specified?c.value:c.text}if(af.nodeName(c,"select")){var T=c.selectedIndex;U=[];var S=c.options;c=c.type==="select-one";if(T<0){return null}var P=c?T:0;for(T=c?T+1:S.length;P<T;P++){var t=S[P];if(t.selected&&(af.support.optDisabled?!t.disabled:t.getAttribute("disabled")===null)&&(!t.parentNode.disabled||!af.nodeName(t.parentNode,"optgroup"))){B=af(t).val();if(c){return B}U.push(B)}}return U}if(aH.test(c.type)&&!af.support.checkOn){return c.getAttribute("value")===null?"on":c.value}return(c.value||"").replace(f,"")}return aF}var E=af.isFunction(B);return this.each(function(Y){var W=af(this),X=B;if(this.nodeType===1){if(E){X=B.call(this,Y,W.val())}if(X==null){X=""}else{if(typeof X==="number"){X+=""}else{if(af.isArray(X)){X=af.map(X,function(Z){return Z==null?"":Z+""})}}}if(af.isArray(X)&&aH.test(this.type)){this.checked=af.inArray(W.val(),X)>=0}else{if(af.nodeName(this,"select")){var V=af.makeArray(X);af("option",this).each(function(){this.selected=af.inArray(af(this).val(),V)>=0});if(!V.length){this.selectedIndex=-1}}else{this.value=X}}}})}});af.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(t,c,S,P){if(!t||t.nodeType===3||t.nodeType===8){return aF}if(P&&c in af.attrFn){return af(t)[c](S)}P=t.nodeType!==1||!af.isXMLDoc(t);var E=S!==aF;c=P&&af.props[c]||c;var B=aX.test(c);if((c in t||t[c]!==aF)&&P&&!B){if(E){c==="type"&&aK.test(t.nodeName)&&t.parentNode&&af.error("type property can't be changed");if(S===null){t.nodeType===1&&t.removeAttribute(c)}else{t[c]=S}}if(af.nodeName(t,"form")&&t.getAttributeNode(c)){return t.getAttributeNode(c).nodeValue}if(c==="tabIndex"){return(c=t.getAttributeNode("tabIndex"))&&c.specified?c.value:al.test(t.nodeName)||L.test(t.nodeName)&&t.href?0:aF}return t[c]}if(!af.support.style&&P&&c==="style"){if(E){t.style.cssText=""+S}return t.style.cssText}E&&t.setAttribute(c,""+S);if(!t.attributes[c]&&t.hasAttribute&&!t.hasAttribute(c)){return aF}t=!af.support.hrefNormalized&&P&&B?t.getAttribute(c,2):t.getAttribute(c);return t===null?aF:t}});var an=/\.(.*)$/,R=/^(?:textarea|input|select)$/i,q=/\./g,a7=/ /g,x=/[^\w\s.|`]/g,g=function(c){return c.replace(x,"\\$&")},ai={focusin:0,focusout:0};af.event={add:function(Z,X,W,V){if(!(Z.nodeType===3||Z.nodeType===8)){if(af.isWindow(Z)&&Z!==aB&&!Z.frameElement){Z=aB}if(W===false){W=aq}else{if(!W){return}}var U,T;if(W.handler){U=W;W=U.handler}if(!W.guid){W.guid=af.guid++}if(T=af.data(Z)){var P=Z.nodeType?"events":"__events__",S=T[P],E=T.handle;if(typeof S==="function"){E=S.handle;S=S.events}else{if(!S){Z.nodeType||(T[P]=T=function(){});T.events=S={}}}if(!E){T.handle=E=function(){return typeof af!=="undefined"&&!af.event.triggered?af.event.handle.apply(E.elem,arguments):aF}}E.elem=Z;X=X.split(" ");for(var Y=0,c;P=X[Y++];){T=U?af.extend({},U):{handler:W,data:V};if(P.indexOf(".")>-1){c=P.split(".");P=c.shift();T.namespace=c.slice(0).sort().join(".")}else{c=[];T.namespace=""}T.type=P;if(!T.guid){T.guid=W.guid}var B=S[P],t=af.event.special[P]||{};if(!B){B=S[P]=[];if(!t.setup||t.setup.call(Z,V,c,E)===false){if(Z.addEventListener){Z.addEventListener(P,E,false)}else{Z.attachEvent&&Z.attachEvent("on"+P,E)}}}if(t.add){t.add.call(Z,T);if(!T.handler.guid){T.handler.guid=W.guid}}B.push(T);af.event.global[P]=true}Z=null}}},global:{},remove:function(aa,X,W,V){if(!(aa.nodeType===3||aa.nodeType===8)){if(W===false){W=aq}var U,T,P=0,S,E,Z,c,B,t,Y=aa.nodeType?"events":"__events__",a8=af.data(aa),ab=a8&&a8[Y];if(a8&&ab){if(typeof ab==="function"){a8=ab;ab=ab.events}if(X&&X.type){W=X.handler;X=X.type}if(!X||typeof X==="string"&&X.charAt(0)==="."){X=X||"";for(U in ab){af.event.remove(aa,U+X)}}else{for(X=X.split(" ");U=X[P++];){c=U;S=U.indexOf(".")<0;E=[];if(!S){E=U.split(".");U=E.shift();Z=RegExp("(^|\\.)"+af.map(E.slice(0).sort(),g).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(B=ab[U]){if(W){c=af.event.special[U]||{};for(T=V||0;T<B.length;T++){t=B[T];if(W.guid===t.guid){if(S||Z.test(t.namespace)){V==null&&B.splice(T--,1);c.remove&&c.remove.call(aa,t)}if(V!=null){break}}}if(B.length===0||V!=null&&B.length===1){if(!c.teardown||c.teardown.call(aa,E)===false){af.removeEvent(aa,U,a8.handle)}delete ab[U]}}else{for(T=0;T<B.length;T++){t=B[T];if(S||Z.test(t.namespace)){af.event.remove(aa,c,t.handler,T);B.splice(T--,1)}}}}}if(af.isEmptyObject(ab)){if(X=a8.handle){X.elem=null}delete a8.events;delete a8.handle;if(typeof a8==="function"){af.removeData(aa,Y)}else{af.isEmptyObject(a8)&&af.removeData(aa)}}}}}},trigger:function(X,V,U,T){var S=X.type||X;if(!T){X=typeof X==="object"?X[af.expando]?X:af.extend(af.Event(S),X):af.Event(S);if(S.indexOf("!")>=0){X.type=S=S.slice(0,-1);X.exclusive=true}if(!U){X.stopPropagation();af.event.global[S]&&af.each(af.cache,function(){this.events&&this.events[S]&&af.event.trigger(X,V,this.handle.elem)})}if(!U||U.nodeType===3||U.nodeType===8){return aF}X.result=aF;X.target=U;V=af.makeArray(V);V.unshift(X)}X.currentTarget=U;(T=U.nodeType?af.data(U,"handle"):(af.data(U,"__events__")||{}).handle)&&T.apply(U,V);T=U.parentNode||U.ownerDocument;try{if(!(U&&U.nodeName&&af.noData[U.nodeName.toLowerCase()])){if(U["on"+S]&&U["on"+S].apply(U,V)===false){X.result=false;X.preventDefault()}}}catch(P){}if(!X.isPropagationStopped()&&T){af.event.trigger(X,V,T,true)}else{if(!X.isDefaultPrevented()){var B;T=X.target;var E=S.replace(an,""),t=af.nodeName(T,"a")&&E==="click",W=af.event.special[E]||{};if((!W._default||W._default.call(U,X)===false)&&!t&&!(T&&T.nodeName&&af.noData[T.nodeName.toLowerCase()])){try{if(T[E]){if(B=T["on"+E]){T["on"+E]=null}af.event.triggered=true;T[E]()}}catch(c){}if(B){T["on"+E]=B}af.event.triggered=false}}}},handle:function(B){var c,U,T,S;U=[];var P=af.makeArray(arguments);B=P[0]=af.event.fix(B||aB.event);B.currentTarget=this;c=B.type.indexOf(".")<0&&!B.exclusive;if(!c){T=B.type.split(".");B.type=T.shift();U=T.slice(0).sort();T=RegExp("(^|\\.)"+U.join("\\.(?:.*\\.)?")+"(\\.|$)")}B.namespace=B.namespace||U.join(".");S=af.data(this,this.nodeType?"events":"__events__");if(typeof S==="function"){S=S.events}U=(S||{})[B.type];if(S&&U){U=U.slice(0);S=0;for(var t=U.length;S<t;S++){var E=U[S];if(c||T.test(E.namespace)){B.handler=E.handler;B.data=E.data;B.handleObj=E;E=E.handler.apply(this,P);if(E!==aF){B.result=E;if(E===false){B.preventDefault();B.stopPropagation()}}if(B.isImmediatePropagationStopped()){break}}}}return B.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(t){if(t[af.expando]){return t}var c=t;t=af.Event(c);for(var E=this.props.length,B;E;){B=this.props[--E];t[B]=c[B]}if(!t.target){t.target=t.srcElement||M}if(t.target.nodeType===3){t.target=t.target.parentNode}if(!t.relatedTarget&&t.fromElement){t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement}if(t.pageX==null&&t.clientX!=null){c=M.documentElement;E=M.body;t.pageX=t.clientX+(c&&c.scrollLeft||E&&E.scrollLeft||0)-(c&&c.clientLeft||E&&E.clientLeft||0);t.pageY=t.clientY+(c&&c.scrollTop||E&&E.scrollTop||0)-(c&&c.clientTop||E&&E.clientTop||0)}if(t.which==null&&(t.charCode!=null||t.keyCode!=null)){t.which=t.charCode!=null?t.charCode:t.keyCode}if(!t.metaKey&&t.ctrlKey){t.metaKey=t.ctrlKey}if(!t.which&&t.button!==aF){t.which=t.button&1?1:t.button&2?3:t.button&4?2:0}return t},guid:100000000,proxy:af.proxy,special:{ready:{setup:af.bindReady,teardown:af.noop},live:{add:function(c){af.event.add(this,am(c.origType,c.selector),af.extend({},c,{handler:H,guid:c.handler.guid}))},remove:function(c){af.event.remove(this,am(c.origType,c.selector),c)}},beforeunload:{setup:function(t,c,B){if(af.isWindow(this)){this.onbeforeunload=B}},teardown:function(t,c){if(this.onbeforeunload===c){this.onbeforeunload=null}}}}};af.removeEvent=M.removeEventListener?function(t,c,B){t.removeEventListener&&t.removeEventListener(c,B,false)}:function(t,c,B){t.detachEvent&&t.detachEvent("on"+c,B)};af.Event=function(c){if(!this.preventDefault){return new af.Event(c)}if(c&&c.type){this.originalEvent=c;this.type=c.type}else{this.type=c}this.timeStamp=af.now();this[af.expando]=true};af.Event.prototype={preventDefault:function(){this.isDefaultPrevented=O;var c=this.originalEvent;if(c){if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}}},stopPropagation:function(){this.isPropagationStopped=O;var c=this.originalEvent;if(c){c.stopPropagation&&c.stopPropagation();c.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=O;this.stopPropagation()},isDefaultPrevented:aq,isPropagationStopped:aq,isImmediatePropagationStopped:aq};var J=function(t){var c=t.relatedTarget;try{for(;c&&c!==this;){c=c.parentNode}if(c!==this){t.type=t.data;af.event.handle.apply(this,arguments)}}catch(B){}},v=function(c){c.type=c.data;af.event.handle.apply(this,arguments)};af.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,c){af.event.special[t]={setup:function(B){af.event.add(this,c,B&&B.selector?v:J,t)},teardown:function(B){af.event.remove(this,c,B&&B.selector?v:J)}}});if(!af.support.submitBubbles){af.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!=="form"){af.event.add(this,"click.specialSubmit",function(t){var c=t.target,B=c.type;if((B==="submit"||B==="image")&&af(c).closest("form").length){t.liveFired=aF;return a3("submit",this,arguments)}});af.event.add(this,"keypress.specialSubmit",function(t){var c=t.target,B=c.type;if((B==="text"||B==="password")&&af(c).closest("form").length&&t.keyCode===13){t.liveFired=aF;return a3("submit",this,arguments)}})}else{return false}},teardown:function(){af.event.remove(this,".specialSubmit")}}}if(!af.support.changeBubbles){var ap,e=function(t){var c=t.type,B=t.value;if(c==="radio"||c==="checkbox"){B=t.checked}else{if(c==="select-multiple"){B=t.selectedIndex>-1?af.map(t.options,function(E){return E.selected}).join("-"):""}else{if(t.nodeName.toLowerCase()==="select"){B=t.selectedIndex}}}return B},ak=function(t,c){var P=t.target,E,B;if(!(!R.test(P.nodeName)||P.readOnly)){E=af.data(P,"_change_data");B=e(P);if(t.type!=="focusout"||P.type!=="radio"){af.data(P,"_change_data",B)}if(!(E===aF||B===E)){if(E!=null||B){t.type="change";t.liveFired=aF;return af.event.trigger(t,c,P)}}}};af.event.special.change={filters:{focusout:ak,beforedeactivate:ak,click:function(t){var c=t.target,B=c.type;if(B==="radio"||B==="checkbox"||c.nodeName.toLowerCase()==="select"){return ak.call(this,t)}},keydown:function(t){var c=t.target,B=c.type;if(t.keyCode===13&&c.nodeName.toLowerCase()!=="textarea"||t.keyCode===32&&(B==="checkbox"||B==="radio")||B==="select-multiple"){return ak.call(this,t)}},beforeactivate:function(c){c=c.target;af.data(c,"_change_data",e(c))}},setup:function(){if(this.type==="file"){return false}for(var c in ap){af.event.add(this,c+".specialChange",ap[c])}return R.test(this.nodeName)},teardown:function(){af.event.remove(this,".specialChange");return R.test(this.nodeName)}};ap=af.event.special.change.filters;ap.focus=ap.beforeactivate}M.addEventListener&&af.each({focus:"focusin",blur:"focusout"},function(t,c){function B(E){E=af.event.fix(E);E.type=c;return af.event.trigger(E,null,E.target)}af.event.special[c]={setup:function(){ai[c]++===0&&M.addEventListener(t,B,true)},teardown:function(){--ai[c]===0&&M.removeEventListener(t,B,true)}}});af.each(["bind","one"],function(t,c){af.fn[c]=function(U,T,S){if(typeof U==="object"){for(var P in U){this[c](P,T,U[P],S)}return this}if(af.isFunction(T)||T===false){S=T;T=aF}var B=c==="one"?af.proxy(S,function(V){af(this).unbind(V,B);return S.apply(this,arguments)}):S;if(U==="unload"&&c!=="one"){this.one(U,T,S)}else{P=0;for(var E=this.length;P<E;P++){af.event.add(this[P],U,B,T)}}return this}});af.fn.extend({unbind:function(t,c){if(typeof t==="object"&&!t.preventDefault){for(var E in t){this.unbind(E,t[E])}}else{E=0;for(var B=this.length;E<B;E++){af.event.remove(this[E],t,c)}}return this},delegate:function(t,c,E,B){return this.live(c,E,B,t)},undelegate:function(t,c,B){return arguments.length===0?this.unbind("live"):this.die(c,null,B,t)},trigger:function(t,c){return this.each(function(){af.event.trigger(t,c,this)})},triggerHandler:function(t,c){if(this[0]){var B=af.Event(t);B.preventDefault();B.stopPropagation();af.event.trigger(B,c,this[0]);return B.result}},toggle:function(t){for(var c=arguments,B=1;B<c.length;){af.proxy(t,c[B++])}return this.click(af.proxy(t,function(P){var E=(af.data(this,"lastToggle"+t.guid)||0)%B;af.data(this,"lastToggle"+t.guid,E+1);P.preventDefault();return c[E].apply(this,arguments)||false}))},hover:function(t,c){return this.mouseenter(t).mouseleave(c||t)}});var aW={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};af.each(["live","die"],function(t,c){af.fn[c]=function(X,W,V,U){var S,T=0,P,Y,B=U||this.selector;U=U?this:af(this.context);if(typeof X==="object"&&!X.preventDefault){for(S in X){U[c](S,W,X[S],B)}return this}if(af.isFunction(W)){V=W;W=aF}for(X=(X||"").split(" ");(S=X[T++])!=null;){P=an.exec(S);Y="";if(P){Y=P[0];S=S.replace(an,"")}if(S==="hover"){X.push("mouseenter"+Y,"mouseleave"+Y)}else{P=S;if(S==="focus"||S==="blur"){X.push(aW[S]+Y);S+=Y}else{S=(aW[S]||S)+Y}if(c==="live"){Y=0;for(var E=U.length;Y<E;Y++){af.event.add(U[Y],"live."+am(S,B),{data:W,selector:B,handler:V,origType:S,origHandler:V,preType:P})}}else{U.unbind("live."+am(S,B),V)}}}return this}});af.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(t,c){af.fn[c]=function(E,B){if(B==null){B=E;E=null}return arguments.length>0?this.bind(c,E,B):this.trigger(c)};if(af.attrFn){af.attrFn[c]=true}});aB.attachEvent&&!aB.addEventListener&&af(aB).bind("unload",function(){for(var t in af.cache){if(af.cache[t].handle){try{af.event.remove(af.cache[t].handle.elem)}catch(c){}}}});(function(){function ab(bf,be,bc,bd,bb,ba){bb=0;for(var bh=bd.length;bb<bh;bb++){var bg=bd[bb];if(bg){var bi=false;for(bg=bg[bf];bg;){if(bg.sizcache===bc){bi=bd[bg.sizset];break}if(bg.nodeType===1&&!ba){bg.sizcache=bc;bg.sizset=bb}if(bg.nodeName.toLowerCase()===be){bi=bg;break}bg=bg[bf]}bd[bb]=bi}}}function Y(bf,be,bc,bd,bb,ba){bb=0;for(var bh=bd.length;bb<bh;bb++){var bg=bd[bb];if(bg){var bi=false;for(bg=bg[bf];bg;){if(bg.sizcache===bc){bi=bd[bg.sizset];break}if(bg.nodeType===1){if(!ba){bg.sizcache=bc;bg.sizset=bb}if(typeof be!=="string"){if(bg===be){bi=true;break}}else{if(S.filter(be,[bg]).length>0){bi=bg;break}}}bg=bg[bf]}bd[bb]=bi}}}var W=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,V=0,U=Object.prototype.toString,T=false,P=true;[0,0].sort(function(){P=false;return 0});var S=function(bh,bg,bd,be){bd=bd||[];var bc=bg=bg||M;if(bg.nodeType!==1&&bg.nodeType!==9){return[]}if(!bh||typeof bh!=="string"){return bd}var bb,bm,bl,bn,bk,bj=true,bi=S.isXML(bg),ba=[],bf=bh;do{W.exec("");if(bb=W.exec(bf)){bf=bb[3];ba.push(bb[1]);if(bb[2]){bn=bb[3];break}}}while(bb);if(ba.length>1&&aa.exec(bh)){if(ba.length===2&&E.relative[ba[0]]){bm=X(ba[0]+ba[1],bg)}else{for(bm=E.relative[ba[0]]?[bg]:S(ba.shift(),bg);ba.length;){bh=ba.shift();if(E.relative[bh]){bh+=ba.shift()}bm=X(bh,bm)}}}else{if(!be&&ba.length>1&&bg.nodeType===9&&!bi&&E.match.ID.test(ba[0])&&!E.match.ID.test(ba[ba.length-1])){bb=S.find(ba.shift(),bg,bi);bg=bb.expr?S.filter(bb.expr,bb.set)[0]:bb.set[0]}if(bg){bb=be?{expr:ba.pop(),set:t(be)}:S.find(ba.pop(),ba.length===1&&(ba[0]==="~"||ba[0]==="+")&&bg.parentNode?bg.parentNode:bg,bi);bm=bb.expr?S.filter(bb.expr,bb.set):bb.set;if(ba.length>0){bl=t(bm)}else{bj=false}for(;ba.length;){bb=bk=ba.pop();if(E.relative[bk]){bb=ba.pop()}else{bk=""}if(bb==null){bb=bg}E.relative[bk](bl,bb,bi)}}else{bl=[]}}bl||(bl=bm);bl||S.error(bk||bh);if(U.call(bl)==="[object Array]"){if(bj){if(bg&&bg.nodeType===1){for(bh=0;bl[bh]!=null;bh++){if(bl[bh]&&(bl[bh]===true||bl[bh].nodeType===1&&S.contains(bg,bl[bh]))){bd.push(bm[bh])}}}else{for(bh=0;bl[bh]!=null;bh++){bl[bh]&&bl[bh].nodeType===1&&bd.push(bm[bh])}}}else{bd.push.apply(bd,bl)}}else{t(bl,bd)}if(bn){S(bn,bc,bd,be);S.uniqueSort(bd)}return bd};S.uniqueSort=function(bb){if(a9){T=P;bb.sort(a9);if(T){for(var ba=1;ba<bb.length;ba++){bb[ba]===bb[ba-1]&&bb.splice(ba--,1)}}}return bb};S.matches=function(bb,ba){return S(bb,null,null,ba)};S.matchesSelector=function(bb,ba){return S(ba,null,null,[bb]).length>0};S.find=function(bf,be,bc){var bd;if(!bf){return[]}for(var bb=0,ba=E.order.length;bb<ba;bb++){var bh,bg=E.order[bb];if(bh=E.leftMatch[bg].exec(bf)){var bi=bh[1];bh.splice(1,1);if(bi.substr(bi.length-1)!=="\\"){bh[1]=(bh[1]||"").replace(/\\/g,"");bd=E.find[bg](bh,be,bc);if(bd!=null){bf=bf.replace(E.match[bg],"");break}}}}bd||(bd=be.getElementsByTagName("*"));return{set:bd,expr:bf}};S.filter=function(bi,bh,bd,be){for(var bc,bb,bn=bi,bm=[],bo=bh,bl=bh&&bh[0]&&S.isXML(bh[0]);bi&&bh.length;){for(var bk in E.filter){if((bc=E.leftMatch[bk].exec(bi))!=null&&bc[2]){var bj,ba,bg=E.filter[bk];ba=bc[1];bb=false;bc.splice(1,1);if(ba.substr(ba.length-1)!=="\\"){if(bo===bm){bm=[]}if(E.preFilter[bk]){if(bc=E.preFilter[bk](bc,bo,bd,bm,be,bl)){if(bc===true){continue}}else{bb=bj=true}}if(bc){for(var bf=0;(ba=bo[bf])!=null;bf++){if(ba){bj=bg(ba,bc,bf,bo);var bp=be^!!bj;if(bd&&bj!=null){if(bp){bb=true}else{bo[bf]=false}}else{if(bp){bm.push(ba);bb=true}}}}}if(bj!==aF){bd||(bo=bm);bi=bi.replace(E.match[bk],"");if(!bb){return[]}break}}}}if(bi===bn){if(bb==null){S.error(bi)}else{break}}bn=bi}return bo};S.error=function(ba){throw"Syntax error, unrecognized expression: "+ba};var E=S.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(ba){return ba.getAttribute("href")}},relative:{"+":function(bc,bb){var bf=typeof bb==="string",ba=bf&&!/\W/.test(bb);bf=bf&&!ba;if(ba){bb=bb.toLowerCase()}ba=0;for(var be=bc.length,bd;ba<be;ba++){if(bd=bc[ba]){for(;(bd=bd.previousSibling)&&bd.nodeType!==1;){}bc[ba]=bf||bd&&bd.nodeName.toLowerCase()===bb?bd||false:bd===bb}}bf&&S.filter(bb,bc,true)},">":function(bc,bb){var bf,ba=typeof bb==="string",be=0,bd=bc.length;if(ba&&!/\W/.test(bb)){for(bb=bb.toLowerCase();be<bd;be++){if(bf=bc[be]){bf=bf.parentNode;bc[be]=bf.nodeName.toLowerCase()===bb?bf:false}}}else{for(;be<bd;be++){if(bf=bc[be]){bc[be]=ba?bf.parentNode:bf.parentNode===bb}}ba&&S.filter(bb,bc,true)}},"":function(bc,bb,bf){var ba,be=V++,bd=Y;if(typeof bb==="string"&&!/\W/.test(bb)){ba=bb=bb.toLowerCase();bd=ab}bd("parentNode",bb,be,bc,ba,bf)},"~":function(bc,bb,bf){var ba,be=V++,bd=Y;if(typeof bb==="string"&&!/\W/.test(bb)){ba=bb=bb.toLowerCase();bd=ab}bd("previousSibling",bb,be,bc,ba,bf)}},find:{ID:function(bb,ba,bc){if(typeof ba.getElementById!=="undefined"&&!bc){return(bb=ba.getElementById(bb[1]))&&bb.parentNode?[bb]:[]}},NAME:function(bc,bb){if(typeof bb.getElementsByName!=="undefined"){for(var bf=[],ba=bb.getElementsByName(bc[1]),be=0,bd=ba.length;be<bd;be++){ba[be].getAttribute("name")===bc[1]&&bf.push(ba[be])}return bf.length===0?null:bf}},TAG:function(bb,ba){return ba.getElementsByTagName(bb[1])}},preFilter:{CLASS:function(bd,bc,bg,ba,bf,be){bd=" "+bd[1].replace(/\\/g,"")+" ";if(be){return bd}be=0;for(var bb;(bb=bc[be])!=null;be++){if(bb){if(bf^(bb.className&&(" "+bb.className+" ").replace(/[\t\n]/g," ").indexOf(bd)>=0)){bg||ba.push(bb)}else{if(bg){bc[be]=false}}}}return false},ID:function(ba){return ba[1].replace(/\\/g,"")},TAG:function(ba){return ba[1].toLowerCase()},CHILD:function(bb){if(bb[1]==="nth"){var ba=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(bb[2]==="even"&&"2n"||bb[2]==="odd"&&"2n+1"||!/\D/.test(bb[2])&&"0n+"+bb[2]||bb[2]);bb[2]=ba[1]+(ba[2]||1)-0;bb[3]=ba[3]-0}bb[0]=V++;return bb},ATTR:function(bc,bb,bf,ba,be,bd){bb=bc[1].replace(/\\/g,"");if(!bd&&E.attrMap[bb]){bc[1]=E.attrMap[bb]}if(bc[2]==="~="){bc[4]=" "+bc[4]+" "}return bc},PSEUDO:function(bc,bb,be,ba,bd){if(bc[1]==="not"){if((W.exec(bc[3])||"").length>1||/^\w/.test(bc[3])){bc[3]=S(bc[3],null,null,bb)}else{bc=S.filter(bc[3],bb,be,true^bd);be||ba.push.apply(ba,bc);return false}}else{if(E.match.POS.test(bc[0])||E.match.CHILD.test(bc[0])){return true}}return bc},POS:function(ba){ba.unshift(true);return ba}},filters:{enabled:function(ba){return ba.disabled===false&&ba.type!=="hidden"},disabled:function(ba){return ba.disabled===true},checked:function(ba){return ba.checked===true},selected:function(ba){return ba.selected===true},parent:function(ba){return !!ba.firstChild},empty:function(ba){return !ba.firstChild},has:function(bb,ba,bc){return !!S(bc[3],bb).length},header:function(ba){return/h\d/i.test(ba.nodeName)},text:function(ba){return"text"===ba.type},radio:function(ba){return"radio"===ba.type},checkbox:function(ba){return"checkbox"===ba.type},file:function(ba){return"file"===ba.type},password:function(ba){return"password"===ba.type},submit:function(ba){return"submit"===ba.type},image:function(ba){return"image"===ba.type},reset:function(ba){return"reset"===ba.type},button:function(ba){return"button"===ba.type||ba.nodeName.toLowerCase()==="button"},input:function(ba){return/input|select|textarea|button/i.test(ba.nodeName)}},setFilters:{first:function(bb,ba){return ba===0},last:function(bc,bb,bd,ba){return bb===ba.length-1},even:function(bb,ba){return ba%2===0},odd:function(bb,ba){return ba%2===1},lt:function(bb,ba,bc){return ba<bc[3]-0},gt:function(bb,ba,bc){return ba>bc[3]-0},nth:function(bb,ba,bc){return bc[3]-0===ba},eq:function(bb,ba,bc){return bc[3]-0===ba}},filter:{PSEUDO:function(bc,bb,bf,ba){var be=bb[1],bd=E.filters[be];if(bd){return bd(bc,bf,bb,ba)}else{if(be==="contains"){return(bc.textContent||bc.innerText||S.getText([bc])||"").indexOf(bb[3])>=0}else{if(be==="not"){bb=bb[3];bf=0;for(ba=bb.length;bf<ba;bf++){if(bb[bf]===bc){return false}}return true}else{S.error("Syntax error, unrecognized expression: "+be)}}}},CHILD:function(bd,bc){var bh=bc[1],ba=bd;switch(bh){case"only":case"first":for(;ba=ba.previousSibling;){if(ba.nodeType===1){return false}}if(bh==="first"){return true}ba=bd;case"last":for(;ba=ba.nextSibling;){if(ba.nodeType===1){return false}}return true;case"nth":bh=bc[2];var bf=bc[3];if(bh===1&&bf===0){return true}var be=bc[0],bb=bd.parentNode;if(bb&&(bb.sizcache!==be||!bd.nodeIndex)){var bg=0;for(ba=bb.firstChild;ba;ba=ba.nextSibling){if(ba.nodeType===1){ba.nodeIndex=++bg}}bb.sizcache=be}ba=bd.nodeIndex-bf;return bh===0?ba===0:ba%bh===0&&ba/bh>=0}},ID:function(bb,ba){return bb.nodeType===1&&bb.getAttribute("id")===ba},TAG:function(bb,ba){return ba==="*"&&bb.nodeType===1||bb.nodeName.toLowerCase()===ba},CLASS:function(bb,ba){return(" "+(bb.className||bb.getAttribute("class"))+" ").indexOf(ba)>-1},ATTR:function(bc,bb){var bf=bb[1];bf=E.attrHandle[bf]?E.attrHandle[bf](bc):bc[bf]!=null?bc[bf]:bc.getAttribute(bf);var ba=bf+"",be=bb[2],bd=bb[4];return bf==null?be==="!=":be==="="?ba===bd:be==="*="?ba.indexOf(bd)>=0:be==="~="?(" "+ba+" ").indexOf(bd)>=0:!bd?ba&&bf!==false:be==="!="?ba!==bd:be==="^="?ba.indexOf(bd)===0:be==="$="?ba.substr(ba.length-bd.length)===bd:be==="|="?ba===bd||ba.substr(0,bd.length+1)===bd+"-":false},POS:function(bc,bb,be,ba){var bd=E.setFilters[bb[2]];if(bd){return bd(bc,be,bb,ba)}}}},aa=E.match.POS,c=function(bb,ba){return"\\"+(ba-0+1)},B;for(B in E.match){E.match[B]=RegExp(E.match[B].source+/(?![^\[]*\])(?![^\(]*\))/.source);E.leftMatch[B]=RegExp(/(^(?:.|\r|\n)*?)/.source+E.match[B].source.replace(/\\(\d+)/g,c))}var t=function(bb,ba){bb=Array.prototype.slice.call(bb,0);if(ba){ba.push.apply(ba,bb);return ba}return bb};try{Array.prototype.slice.call(M.documentElement.childNodes,0)}catch(Z){t=function(bc,bb){var be=0,ba=bb||[];if(U.call(bc)==="[object Array]"){Array.prototype.push.apply(ba,bc)}else{if(typeof bc.length==="number"){for(var bd=bc.length;be<bd;be++){ba.push(bc[be])}}else{for(;bc[be];be++){ba.push(bc[be])}}}return ba}}var a9,a8;if(M.documentElement.compareDocumentPosition){a9=function(bb,ba){if(bb===ba){T=true;return 0}if(!bb.compareDocumentPosition||!ba.compareDocumentPosition){return bb.compareDocumentPosition?-1:1}return bb.compareDocumentPosition(ba)&4?-1:1}}else{a9=function(bd,bc){var bg,ba,bf=[],be=[];bg=bd.parentNode;ba=bc.parentNode;var bb=bg;if(bd===bc){T=true;return 0}else{if(bg===ba){return a8(bd,bc)}else{if(bg){if(!ba){return 1}}else{return -1}}}for(;bb;){bf.unshift(bb);bb=bb.parentNode}for(bb=ba;bb;){be.unshift(bb);bb=bb.parentNode}bg=bf.length;ba=be.length;for(bb=0;bb<bg&&bb<ba;bb++){if(bf[bb]!==be[bb]){return a8(bf[bb],be[bb])}}return bb===bg?a8(bd,be[bb],-1):a8(bf[bb],bc,1)};a8=function(bb,ba,bc){if(bb===ba){return bc}for(bb=bb.nextSibling;bb;){if(bb===ba){return -1}bb=bb.nextSibling}return 1}}S.getText=function(bc){for(var bb="",bd,ba=0;bc[ba];ba++){bd=bc[ba];if(bd.nodeType===3||bd.nodeType===4){bb+=bd.nodeValue}else{if(bd.nodeType!==8){bb+=S.getText(bd.childNodes)}}}return bb};(function(){var bb=M.createElement("div"),ba="script"+(new Date).getTime(),bc=M.documentElement;bb.innerHTML="<a name='"+ba+"'/>";bc.insertBefore(bb,bc.firstChild);if(M.getElementById(ba)){E.find.ID=function(bd,bf,be){if(typeof bf.getElementById!=="undefined"&&!be){return(bf=bf.getElementById(bd[1]))?bf.id===bd[1]||typeof bf.getAttributeNode!=="undefined"&&bf.getAttributeNode("id").nodeValue===bd[1]?[bf]:aF:[]}};E.filter.ID=function(bd,bf){var be=typeof bd.getAttributeNode!=="undefined"&&bd.getAttributeNode("id");return bd.nodeType===1&&be&&be.nodeValue===bf}}bc.removeChild(bb);bc=bb=null})();(function(){var ba=M.createElement("div");ba.appendChild(M.createComment(""));if(ba.getElementsByTagName("*").length>0){E.find.TAG=function(bc,bf){var bb=bf.getElementsByTagName(bc[1]);if(bc[1]==="*"){for(var be=[],bd=0;bb[bd];bd++){bb[bd].nodeType===1&&be.push(bb[bd])}bb=be}return bb}}ba.innerHTML="<a href='#'></a>";if(ba.firstChild&&typeof ba.firstChild.getAttribute!=="undefined"&&ba.firstChild.getAttribute("href")!=="#"){E.attrHandle.href=function(bb){return bb.getAttribute("href",2)}}ba=null})();M.querySelectorAll&&function(){var bb=S,ba=M.createElement("div");ba.innerHTML="<p class='TEST'></p>";if(!(ba.querySelectorAll&&ba.querySelectorAll(".TEST").length===0)){S=function(bd,bh,bg,be){bh=bh||M;bd=bd.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!be&&!S.isXML(bh)){if(bh.nodeType===9){try{return t(bh.querySelectorAll(bd),bg)}catch(bk){}}else{if(bh.nodeType===1&&bh.nodeName.toLowerCase()!=="object"){var bf=bh.getAttribute("id"),bj=bf||"__sizzle__";bf||bh.setAttribute("id",bj);try{return t(bh.querySelectorAll("#"+bj+" "+bd),bg)}catch(bi){}finally{bf||bh.removeAttribute("id")}}}}return bb(bd,bh,bg,be)};for(var bc in bb){S[bc]=bb[bc]}ba=null}}();(function(){var bc=M.documentElement,bb=bc.matchesSelector||bc.mozMatchesSelector||bc.webkitMatchesSelector||bc.msMatchesSelector,bd=false;try{bb.call(M.documentElement,"[test!='']:sizzle")}catch(ba){bd=true}if(bb){S.matchesSelector=function(bg,bf){bf=bf.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!S.isXML(bg)){try{if(bd||!E.match.PSEUDO.test(bf)&&!/!=/.test(bf)){return bb.call(bg,bf)}}catch(be){}}return S(bf,null,null,[bg]).length>0}}})();(function(){var ba=M.createElement("div");ba.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!ba.getElementsByClassName||ba.getElementsByClassName("e").length===0)){ba.lastChild.className="e";if(ba.getElementsByClassName("e").length!==1){E.order.splice(1,0,"CLASS");E.find.CLASS=function(bc,bd,bb){if(typeof bd.getElementsByClassName!=="undefined"&&!bb){return bd.getElementsByClassName(bc[1])}};ba=null}}})();S.contains=M.documentElement.contains?function(bb,ba){return bb!==ba&&(bb.contains?bb.contains(ba):true)}:M.documentElement.compareDocumentPosition?function(bb,ba){return !!(bb.compareDocumentPosition(ba)&16)}:function(){return false};S.isXML=function(ba){return(ba=(ba?ba.ownerDocument||ba:0).documentElement)?ba.nodeName!=="HTML":false};var X=function(bd,bc){for(var bg,ba=[],bf="",be=bc.nodeType?[bc]:bc;bg=E.match.PSEUDO.exec(bd);){bf+=bg[0];bd=bd.replace(E.match.PSEUDO,"")}bd=E.relative[bd]?bd+"*":bd;bg=0;for(var bb=be.length;bg<bb;bg++){S(bd,be[bg],ba)}return S.filter(bf,ba)};af.find=S;af.expr=S.selectors;af.expr[":"]=af.expr.filters;af.unique=S.uniqueSort;af.text=S.getText;af.isXMLDoc=S.isXML;af.contains=S.contains})();var aY=/Until$/,aE=/^(?:parents|prevUntil|prevAll)/,aL=/,/,aV=/^.[^:#\[\.,]*$/,au=Array.prototype.slice,N=af.expr.match.POS;af.fn.extend({find:function(B){for(var c=this.pushStack("","find",B),T=0,S=0,P=this.length;S<P;S++){T=c.length;af.find(B,this[S],c);if(S>0){for(var E=T;E<c.length;E++){for(var t=0;t<T;t++){if(c[t]===c[E]){c.splice(E--,1);break}}}}}return c},has:function(t){var c=af(t);return this.filter(function(){for(var E=0,B=c.length;E<B;E++){if(af.contains(this,c[E])){return true}}})},not:function(c){return this.pushStack(aQ(this,c,false),"not",c)},filter:function(c){return this.pushStack(aQ(this,c,true),"filter",c)},is:function(c){return !!c&&af.filter(c,this).length>0},closest:function(V,U){var T=[],S,P,E=this[0];if(af.isArray(V)){var t,B={},c=1;if(E&&V.length){S=0;for(P=V.length;S<P;S++){t=V[S];B[t]||(B[t]=af.expr.match.POS.test(t)?af(t,U||this.context):t)}for(;E&&E.ownerDocument&&E!==U;){for(t in B){S=B[t];if(S.jquery?S.index(E)>-1:af(E).is(S)){T.push({selector:t,elem:E,level:c})}}E=E.parentNode;c++}}return T}t=N.test(V)?af(V,U||this.context):null;S=0;for(P=this.length;S<P;S++){for(E=this[S];E;){if(t?t.index(E)>-1:af.find.matchesSelector(E,V)){T.push(E);break}else{E=E.parentNode;if(!E||!E.ownerDocument||E===U){break}}}}T=T.length>1?af.unique(T):T;return this.pushStack(T,"closest",V)},index:function(c){if(!c||typeof c==="string"){return af.inArray(this[0],c?af(c):this.parent().children())}return af.inArray(c.jquery?c[0]:c,this)},add:function(t,c){var E=typeof t==="string"?af(t,c||this.context):af.makeArray(t),B=af.merge(this.get(),E);return this.pushStack(!E[0]||!E[0].parentNode||E[0].parentNode.nodeType===11||!B[0]||!B[0].parentNode||B[0].parentNode.nodeType===11?B:af.unique(B))},andSelf:function(){return this.add(this.prevObject)}});af.each({parent:function(c){return(c=c.parentNode)&&c.nodeType!==11?c:null},parents:function(c){return af.dir(c,"parentNode")},parentsUntil:function(t,c,B){return af.dir(t,"parentNode",B)},next:function(c){return af.nth(c,2,"nextSibling")},prev:function(c){return af.nth(c,2,"previousSibling")},nextAll:function(c){return af.dir(c,"nextSibling")},prevAll:function(c){return af.dir(c,"previousSibling")},nextUntil:function(t,c,B){return af.dir(t,"nextSibling",B)},prevUntil:function(t,c,B){return af.dir(t,"previousSibling",B)},siblings:function(c){return af.sibling(c.parentNode.firstChild,c)},children:function(c){return af.sibling(c.firstChild)},contents:function(c){return af.nodeName(c,"iframe")?c.contentDocument||c.contentWindow.document:af.makeArray(c.childNodes)}},function(t,c){af.fn[t]=function(P,E){var B=af.map(this,c,P);aY.test(t)||(E=P);if(E&&typeof E==="string"){B=af.filter(E,B)}B=this.length>1?af.unique(B):B;if((this.length>1||aL.test(E))&&aE.test(t)){B=B.reverse()}return this.pushStack(B,t,au.call(arguments).join(","))}});af.extend({filter:function(t,c,B){if(B){t=":not("+t+")"}return c.length===1?af.find.matchesSelector(c[0],t)?[c[0]]:[]:af.find.matches(t,c)},dir:function(t,c,E){var B=[];for(t=t[c];t&&t.nodeType!==9&&(E===aF||t.nodeType!==1||!af(t).is(E));){t.nodeType===1&&B.push(t);t=t[c]}return B},nth:function(t,c,E){c=c||1;for(var B=0;t;t=t[E]){if(t.nodeType===1&&++B===c){break}}return t},sibling:function(t,c){for(var B=[];t;t=t.nextSibling){t.nodeType===1&&t!==c&&B.push(t)}return B}});var aJ=/ jQuery\d+="(?:\d+|null)"/g,aS=/^\s+/,a1=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,aO=/<([\w:]+)/,y=/<tbody/i,h=/<|&#?\w+;/,az=/<(?:script|object|embed|option|style)/i,ac=/checked\s*(?:[^=]|=\s*.checked.)/i,aZ=/\=([^="'>\s]+\/)>/g,av={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};av.optgroup=av.option;av.tbody=av.tfoot=av.colgroup=av.caption=av.thead;av.th=av.td;if(!af.support.htmlSerialize){av._default=[1,"div<div>","</div>"]}af.fn.extend({text:function(c){if(af.isFunction(c)){return this.each(function(t){var B=af(this);B.text(c.call(this,t,B.text()))})}if(typeof c!=="object"&&c!==aF){return this.empty().append((this[0]&&this[0].ownerDocument||M).createTextNode(c))}return af.text(this)},wrapAll:function(t){if(af.isFunction(t)){return this.each(function(B){af(this).wrapAll(t.call(this,B))})}if(this[0]){var c=af(t,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var B=this;B.firstChild&&B.firstChild.nodeType===1;){B=B.firstChild}return B}).append(this)}return this},wrapInner:function(c){if(af.isFunction(c)){return this.each(function(t){af(this).wrapInner(c.call(this,t))})}return this.each(function(){var t=af(this),B=t.contents();B.length?B.wrapAll(c):t.append(c)})},wrap:function(c){return this.each(function(){af(this).wrapAll(c)})},unwrap:function(){return this.parent().each(function(){af.nodeName(this,"body")||af(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.appendChild(c)})},prepend:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.insertBefore(c,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(t){this.parentNode.insertBefore(t,this)})}else{if(arguments.length){var c=af(arguments[0]);c.push.apply(c,this.toArray());return this.pushStack(c,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(t){this.parentNode.insertBefore(t,this.nextSibling)})}else{if(arguments.length){var c=this.pushStack(this,"after",arguments);c.push.apply(c,af(arguments[0]).toArray());return c}}},remove:function(t,c){for(var E=0,B;(B=this[E])!=null;E++){if(!t||af.filter(t,[B]).length){if(!c&&B.nodeType===1){af.cleanData(B.getElementsByTagName("*"));af.cleanData([B])}B.parentNode&&B.parentNode.removeChild(B)}}return this},empty:function(){for(var t=0,c;(c=this[t])!=null;t++){for(c.nodeType===1&&af.cleanData(c.getElementsByTagName("*"));c.firstChild;){c.removeChild(c.firstChild)}}return this},clone:function(t){var c=this.map(function(){if(!af.support.noCloneEvent&&!af.isXMLDoc(this)){var E=this.outerHTML,B=this.ownerDocument;if(!E){E=B.createElement("div");E.appendChild(this.cloneNode(true));E=E.innerHTML}return af.clean([E.replace(aJ,"").replace(aZ,'="$1">').replace(aS,"")],B)[0]}else{return this.cloneNode(true)}});if(t===true){aC(this,c);aC(this.find("*"),c.find("*"))}return c},html:function(t){if(t===aF){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(aJ,""):null}else{if(typeof t==="string"&&!az.test(t)&&(af.support.leadingWhitespace||!aS.test(t))&&!av[(aO.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(a1,"<$1></$2>");try{for(var c=0,E=this.length;c<E;c++){if(this[c].nodeType===1){af.cleanData(this[c].getElementsByTagName("*"));this[c].innerHTML=t}}}catch(B){this.empty().append(t)}}else{af.isFunction(t)?this.each(function(S){var P=af(this);P.html(t.call(this,S,P.html()))}):this.empty().append(t)}}return this},replaceWith:function(c){if(this[0]&&this[0].parentNode){if(af.isFunction(c)){return this.each(function(t){var E=af(this),B=E.html();E.replaceWith(c.call(this,t,B))})}if(typeof c!=="string"){c=af(c).detach()}return this.each(function(){var t=this.nextSibling,B=this.parentNode;af(this).remove();t?af(t).before(c):af(B).append(c)})}else{return this.pushStack(af(af.isFunction(c)?c():c),"replaceWith",c)}},detach:function(c){return this.remove(c,true)},domManip:function(V,U,T){var S,P,E,t=V[0],B=[];if(!af.support.checkClone&&arguments.length===3&&typeof t==="string"&&ac.test(t)){return this.each(function(){af(this).domManip(V,U,T,true)})}if(af.isFunction(t)){return this.each(function(W){var X=af(this);V[0]=t.call(this,W,U?X.html():aF);X.domManip(V,U,T)})}if(this[0]){S=t&&t.parentNode;S=af.support.parentNode&&S&&S.nodeType===11&&S.childNodes.length===this.length?{fragment:S}:af.buildFragment(V,this,B);E=S.fragment;if(P=E.childNodes.length===1?E=E.firstChild:E.firstChild){U=U&&af.nodeName(P,"tr");P=0;for(var c=this.length;P<c;P++){T.call(U?af.nodeName(this[P],"table")?this[P].getElementsByTagName("tbody")[0]||this[P].appendChild(this[P].ownerDocument.createElement("tbody")):this[P]:this[P],P>0||S.cacheable||this.length>1?E.cloneNode(true):E)}}B.length&&af.each(B,aI)}return this}});af.buildFragment=function(t,c,S){var P,E,B;c=c&&c[0]?c[0].ownerDocument||c[0]:M;if(t.length===1&&typeof t[0]==="string"&&t[0].length<512&&c===M&&!az.test(t[0])&&(af.support.checkClone||!ac.test(t[0]))){E=true;if(B=af.fragments[t[0]]){if(B!==1){P=B}}}if(!P){P=c.createDocumentFragment();af.clean(t,c,P,S)}if(E){af.fragments[t[0]]=B?P:1}return{fragment:P,cacheable:E}};af.fragments={};af.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,c){af.fn[t]=function(T){var S=[];T=af(T);var P=this.length===1&&this[0].parentNode;if(P&&P.nodeType===11&&P.childNodes.length===1&&T.length===1){T[c](this[0]);return this}else{P=0;for(var E=T.length;P<E;P++){var B=(P>0?this.clone(true):this).get();af(T[P])[c](B);S=S.concat(B)}return this.pushStack(S,t,T.selector)}}});af.extend({clean:function(X,V,U,T){V=V||M;if(typeof V.createElement==="undefined"){V=V.ownerDocument||V[0]&&V[0].ownerDocument||M}for(var S=[],P=0,B;(B=X[P])!=null;P++){if(typeof B==="number"){B+=""}if(B){if(typeof B==="string"&&!h.test(B)){B=V.createTextNode(B)}else{if(typeof B==="string"){B=B.replace(a1,"<$1></$2>");var E=(aO.exec(B)||["",""])[1].toLowerCase(),t=av[E]||av._default,W=t[0],c=V.createElement("div");for(c.innerHTML=t[1]+B+t[2];W--;){c=c.lastChild}if(!af.support.tbody){W=y.test(B);E=E==="table"&&!W?c.firstChild&&c.firstChild.childNodes:t[1]==="<table>"&&!W?c.childNodes:[];for(t=E.length-1;t>=0;--t){af.nodeName(E[t],"tbody")&&!E[t].childNodes.length&&E[t].parentNode.removeChild(E[t])}}!af.support.leadingWhitespace&&aS.test(B)&&c.insertBefore(V.createTextNode(aS.exec(B)[0]),c.firstChild);B=c.childNodes}}if(B.nodeType){S.push(B)}else{S=af.merge(S,B)}}}if(U){for(P=0;S[P];P++){if(T&&af.nodeName(S[P],"script")&&(!S[P].type||S[P].type.toLowerCase()==="text/javascript")){T.push(S[P].parentNode?S[P].parentNode.removeChild(S[P]):S[P])}else{S[P].nodeType===1&&S.splice.apply(S,[P+1,0].concat(af.makeArray(S[P].getElementsByTagName("script"))));U.appendChild(S[P])}}}return S},cleanData:function(V){for(var U,T,S=af.cache,P=af.event.special,E=af.support.deleteExpando,t=0,B;(B=V[t])!=null;t++){if(!(B.nodeName&&af.noData[B.nodeName.toLowerCase()])){if(T=B[af.expando]){if((U=S[T])&&U.events){for(var c in U.events){P[c]?af.event.remove(B,c):af.removeEvent(B,c,U.handle)}}if(E){delete B[af.expando]}else{B.removeAttribute&&B.removeAttribute(af.expando)}delete S[T]}}}}});var D=/alpha\([^)]*\)/i,aN=/opacity=([^)]*)/,ax=/-([a-z])/ig,Q=/([A-Z])/g,m=/^-?\d+(?:px)?$/i,A=/^-?\d/,k={position:"absolute",visibility:"hidden",display:"block"},aj=["Left","Right"],K=["Top","Bottom"],ao,a4,aM,a2=function(t,c){return c.toUpperCase()};af.fn.css=function(t,c){if(arguments.length===2&&c===aF){return this}return af.access(this,t,c,true,function(P,E,B){return B!==aF?af.style(P,E,B):af.css(P,E)})};af.extend({cssHooks:{opacity:{get:function(t,c){if(c){var B=ao(t,"opacity","opacity");return B===""?"1":B}else{return t.style.opacity}}}},cssNumber:{zIndex:true,fontWeight:true,opacity:true,zoom:true,lineHeight:true},cssProps:{"float":af.support.cssFloat?"cssFloat":"styleFloat"},style:function(V,U,T,S){if(!(!V||V.nodeType===3||V.nodeType===8||!V.style)){var P,E=af.camelCase(U),t=V.style,B=af.cssHooks[E];U=af.cssProps[E]||E;if(T!==aF){if(!(typeof T==="number"&&isNaN(T)||T==null)){if(typeof T==="number"&&!af.cssNumber[E]){T+="px"}if(!B||!("set" in B)||(T=B.set(V,T))!==aF){try{t[U]=T}catch(c){}}}}else{if(B&&"get" in B&&(P=B.get(V,false,S))!==aF){return P}return t[U]}}},css:function(t,c,S){var P,E=af.camelCase(c),B=af.cssHooks[E];c=af.cssProps[E]||E;if(B&&"get" in B&&(P=B.get(t,true,S))!==aF){return P}else{if(ao){return ao(t,c,E)}}},swap:function(t,c,P){var E={},B;for(B in c){E[B]=t.style[B];t.style[B]=c[B]}P.call(t);for(B in c){t.style[B]=E[B]}},camelCase:function(c){return c.replace(ax,a2)}});af.curCSS=af.css;af.each(["height","width"],function(t,c){af.cssHooks[c]={get:function(S,P,E){var B;if(P){if(S.offsetWidth!==0){B=ae(S,c,E)}else{af.swap(S,k,function(){B=ae(S,c,E)})}if(B<=0){B=ao(S,c,c);if(B==="0px"&&aM){B=aM(S,c,c)}if(B!=null){return B===""||B==="auto"?"0px":B}}if(B<0||B==null){B=S.style[c];return B===""||B==="auto"?"0px":B}return typeof B==="string"?B:B+"px"}},set:function(E,B){if(m.test(B)){B=parseFloat(B);if(B>=0){return B+"px"}}else{return B}}}});if(!af.support.opacity){af.cssHooks.opacity={get:function(t,c){return aN.test((c&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100+"":c?"1":""},set:function(t,c){var P=t.style;P.zoom=1;var E=af.isNaN(c)?"":"alpha(opacity="+c*100+")",B=P.filter||"";P.filter=D.test(B)?B.replace(D,E):P.filter+" "+E}}}if(M.defaultView&&M.defaultView.getComputedStyle){a4=function(t,c,E){var B;E=E.replace(Q,"-$1").toLowerCase();if(!(c=t.ownerDocument.defaultView)){return aF}if(c=c.getComputedStyle(t,null)){B=c.getPropertyValue(E);if(B===""&&!af.contains(t.ownerDocument.documentElement,t)){B=af.style(t,E)}}return B}}if(M.documentElement.currentStyle){aM=function(t,c){var S,P,E=t.currentStyle&&t.currentStyle[c],B=t.style;if(!m.test(E)&&A.test(E)){S=B.left;P=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left;B.left=c==="fontSize"?"1em":E||0;E=B.pixelLeft+"px";B.left=S;t.runtimeStyle.left=P}return E===""?"auto":E}}ao=a4||aM;if(af.expr&&af.expr.filters){af.expr.filters.hidden=function(t){var c=t.offsetHeight;return t.offsetWidth===0&&c===0||!af.support.reliableHiddenOffsets&&(t.style.display||af.css(t,"display"))==="none"};af.expr.filters.visible=function(c){return !af.expr.filters.hidden(c)}}var aP=af.now(),aA=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ad=/^(?:select|textarea)/i,F=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,n=/^(?:GET|HEAD)$/,w=/\[\]$/,ar=/\=\?(&|$)/,C=/\?/,a5=/([?&])_=[^&]*/,aT=/^(\w+:)?\/\/([^\/?#]+)/,aG=/%20/g,ah=/#.*$/,aR=af.fn.load;af.fn.extend({load:function(t,c,S){if(typeof t!=="string"&&aR){return aR.apply(this,arguments)}else{if(!this.length){return this}}var P=t.indexOf(" ");if(P>=0){var E=t.slice(P,t.length);t=t.slice(0,P)}P="GET";if(c){if(af.isFunction(c)){S=c;c=null}else{if(typeof c==="object"){c=af.param(c,af.ajaxSettings.traditional);P="POST"}}}var B=this;af.ajax({url:t,type:P,dataType:"html",data:c,complete:function(T,U){if(U==="success"||U==="notmodified"){B.html(E?af("<div>").append(T.responseText.replace(aA,"")).find(E):T.responseText)}S&&B.each(S,[T.responseText,U,T])}});return this},serialize:function(){return af.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?af.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ad.test(this.nodeName)||F.test(this.type))}).map(function(t,c){var B=af(this).val();return B==null?null:af.isArray(B)?af.map(B,function(E){return{name:c.name,value:E}}):{name:c.name,value:B}}).get()}});af.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,c){af.fn[c]=function(B){return this.bind(c,B)}});af.extend({get:function(t,c,E,B){if(af.isFunction(c)){B=B||E;E=c;c=null}return af.ajax({type:"GET",url:t,data:c,success:E,dataType:B})},getScript:function(t,c){return af.get(t,null,c,"script")},getJSON:function(t,c,B){return af.get(t,c,B,"json")},post:function(t,c,E,B){if(af.isFunction(c)){B=B||E;E=c;c={}}return af.ajax({type:"POST",url:t,data:c,success:E,dataType:B})},ajaxSetup:function(c){af.extend(af.ajaxSettings,c)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return new aB.XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},ajax:function(bc){var bb=af.extend(true,{},af.ajaxSettings,bc),ba,a9,a8,aa=bb.type.toUpperCase(),X=n.test(aa);bb.url=bb.url.replace(ah,"");bb.context=bc&&bc.context!=null?bc.context:bb;if(bb.data&&bb.processData&&typeof bb.data!=="string"){bb.data=af.param(bb.data,bb.traditional)}if(bb.dataType==="jsonp"){if(aa==="GET"){ar.test(bb.url)||(bb.url+=(C.test(bb.url)?"&":"?")+(bb.jsonp||"callback")+"=?")}else{if(!bb.data||!ar.test(bb.data)){bb.data=(bb.data?bb.data+"&":"")+(bb.jsonp||"callback")+"=?"}}bb.dataType="json"}if(bb.dataType==="json"&&(bb.data&&ar.test(bb.data)||ar.test(bb.url))){ba=bb.jsonpCallback||"jsonp"+aP++;if(bb.data){bb.data=(bb.data+"").replace(ar,"="+ba+"$1")}bb.url=bb.url.replace(ar,"="+ba+"$1");bb.dataType="script";var Y=aB[ba];aB[ba]=function(bd){if(af.isFunction(Y)){Y(bd)}else{aB[ba]=aF;try{delete aB[ba]}catch(be){}}a8=bd;af.handleSuccess(bb,P,a9,a8);af.handleComplete(bb,P,a9,a8);T&&T.removeChild(U)}}if(bb.dataType==="script"&&bb.cache===null){bb.cache=false}if(bb.cache===false&&X){var V=af.now(),E=bb.url.replace(a5,"$1_="+V);bb.url=E+(E===bb.url?(C.test(bb.url)?"&":"?")+"_="+V:"")}if(bb.data&&X){bb.url+=(C.test(bb.url)?"&":"?")+bb.data}bb.global&&af.active++===0&&af.event.trigger("ajaxStart");V=(V=aT.exec(bb.url))&&(V[1]&&V[1].toLowerCase()!==location.protocol||V[2].toLowerCase()!==location.host);if(bb.dataType==="script"&&aa==="GET"&&V){var T=M.getElementsByTagName("head")[0]||M.documentElement,U=M.createElement("script");if(bb.scriptCharset){U.charset=bb.scriptCharset}U.src=bb.url;if(!ba){var S=false;U.onload=U.onreadystatechange=function(){if(!S&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){S=true;af.handleSuccess(bb,P,a9,a8);af.handleComplete(bb,P,a9,a8);U.onload=U.onreadystatechange=null;T&&U.parentNode&&T.removeChild(U)}}}T.insertBefore(U,T.firstChild);return aF}var t=false,P=bb.xhr();if(P){bb.username?P.open(aa,bb.url,bb.async,bb.username,bb.password):P.open(aa,bb.url,bb.async);try{if(bb.data!=null&&!X||bc&&bc.contentType){P.setRequestHeader("Content-Type",bb.contentType)}if(bb.ifModified){af.lastModified[bb.url]&&P.setRequestHeader("If-Modified-Since",af.lastModified[bb.url]);af.etag[bb.url]&&P.setRequestHeader("If-None-Match",af.etag[bb.url])}V||P.setRequestHeader("X-Requested-With","XMLHttpRequest");P.setRequestHeader("Accept",bb.dataType&&bb.accepts[bb.dataType]?bb.accepts[bb.dataType]+", */*; q=0.01":bb.accepts._default)}catch(B){}if(bb.beforeSend&&bb.beforeSend.call(bb.context,P,bb)===false){bb.global&&af.active--===1&&af.event.trigger("ajaxStop");P.abort();return false}bb.global&&af.triggerGlobal(bb,"ajaxSend",[P,bb]);var c=P.onreadystatechange=function(bd){if(!P||P.readyState===0||bd==="abort"){t||af.handleComplete(bb,P,a9,a8);t=true;if(P){P.onreadystatechange=af.noop}}else{if(!t&&P&&(P.readyState===4||bd==="timeout")){t=true;P.onreadystatechange=af.noop;a9=bd==="timeout"?"timeout":!af.httpSuccess(P)?"error":bb.ifModified&&af.httpNotModified(P,bb.url)?"notmodified":"success";var bf;if(a9==="success"){try{a8=af.httpData(P,bb.dataType,bb)}catch(be){a9="parsererror";bf=be}}if(a9==="success"||a9==="notmodified"){ba||af.handleSuccess(bb,P,a9,a8)}else{af.handleError(bb,P,a9,bf)}ba||af.handleComplete(bb,P,a9,a8);bd==="timeout"&&P.abort();if(bb.async){P=null}}}};try{var ab=P.abort;P.abort=function(){P&&Function.prototype.call.call(ab,P);c("abort")}}catch(Z){}bb.async&&bb.timeout>0&&setTimeout(function(){P&&!t&&c("timeout")},bb.timeout);try{P.send(X||bb.data==null?null:bb.data)}catch(W){af.handleError(bb,P,null,W);af.handleComplete(bb,P,a9,a8)}bb.async||c();return P}},param:function(t,c){var P=[],E=function(T,S){S=af.isFunction(S)?S():S;P[P.length]=encodeURIComponent(T)+"="+encodeURIComponent(S)};if(c===aF){c=af.ajaxSettings.traditional}if(af.isArray(t)||t.jquery){af.each(t,function(){E(this.name,this.value)})}else{for(var B in t){z(B,t[B],c,E)}}return P.join("&").replace(aG,"+")}});af.extend({active:0,lastModified:{},etag:{},handleError:function(t,c,E,B){t.error&&t.error.call(t.context,c,E,B);t.global&&af.triggerGlobal(t,"ajaxError",[c,t,B])},handleSuccess:function(t,c,E,B){t.success&&t.success.call(t.context,B,E,c);t.global&&af.triggerGlobal(t,"ajaxSuccess",[c,t])},handleComplete:function(t,c,B){t.complete&&t.complete.call(t.context,c,B);t.global&&af.triggerGlobal(t,"ajaxComplete",[c,t]);t.global&&af.active--===1&&af.event.trigger("ajaxStop")},triggerGlobal:function(t,c,B){(t.context&&t.context.url==null?af(t.context):af.event).trigger(c,B)},httpSuccess:function(t){try{return !t.status&&location.protocol==="file:"||t.status>=200&&t.status<300||t.status===304||t.status===1223}catch(c){}return false},httpNotModified:function(t,c){var E=t.getResponseHeader("Last-Modified"),B=t.getResponseHeader("Etag");if(E){af.lastModified[c]=E}if(B){af.etag[c]=B}return t.status===304},httpData:function(t,c,P){var E=t.getResponseHeader("content-type")||"",B=c==="xml"||!c&&E.indexOf("xml")>=0;t=B?t.responseXML:t.responseText;B&&t.documentElement.nodeName==="parsererror"&&af.error("parsererror");if(P&&P.dataFilter){t=P.dataFilter(t,c)}if(typeof t==="string"){if(c==="json"||!c&&E.indexOf("json")>=0){t=af.parseJSON(t)}else{if(c==="script"||!c&&E.indexOf("javascript")>=0){af.globalEval(t)}}}return t}});if(aB.ActiveXObject){af.ajaxSettings.xhr=function(){if(aB.location.protocol!=="file:"){try{return new aB.XMLHttpRequest}catch(t){}}try{return new aB.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}}af.support.ajax=!!af.ajaxSettings.xhr();var j={},I=/^(?:toggle|show|hide)$/,u=/^([+\-]=)?([\d+.\-]+)(.*)$/,aw,G=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];af.fn.extend({show:function(t,c,E){if(t||t===0){return this.animate(at("show",3),t,c,E)}else{E=0;for(var B=this.length;E<B;E++){t=this[E];c=t.style.display;if(!af.data(t,"olddisplay")&&c==="none"){c=t.style.display=""}c===""&&af.css(t,"display")==="none"&&af.data(t,"olddisplay",o(t.nodeName))}for(E=0;E<B;E++){t=this[E];c=t.style.display;if(c===""||c==="none"){t.style.display=af.data(t,"olddisplay")||""}}return this}},hide:function(t,c,B){if(t||t===0){return this.animate(at("hide",3),t,c,B)}else{t=0;for(c=this.length;t<c;t++){B=af.css(this[t],"display");B!=="none"&&af.data(this[t],"olddisplay",B)}for(t=0;t<c;t++){this[t].style.display="none"}return this}},_toggle:af.fn.toggle,toggle:function(t,c,E){var B=typeof t==="boolean";if(af.isFunction(t)&&af.isFunction(c)){this._toggle.apply(this,arguments)}else{t==null||B?this.each(function(){var P=B?t:af(this).is(":hidden");af(this)[P?"show":"hide"]()}):this.animate(at("toggle",3),t,c,E)}return this},fadeTo:function(t,c,E,B){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:c},t,E,B)},animate:function(t,c,P,E){var B=af.speed(c,P,E);if(af.isEmptyObject(t)){return this.each(B.complete)}return this[B.queue===false?"each":"queue"](function(){var V=af.extend({},B),T,U=this.nodeType===1,X=U&&af(this).is(":hidden"),S=this;for(T in t){var W=af.camelCase(T);if(T!==W){t[W]=t[T];delete t[T];T=W}if(t[T]==="hide"&&X||t[T]==="show"&&!X){return V.complete.call(this)}if(U&&(T==="height"||T==="width")){V.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(af.css(this,"display")==="inline"&&af.css(this,"float")==="none"){if(af.support.inlineBlockNeedsLayout){if(o(this.nodeName)==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}else{this.style.display="inline-block"}}}if(af.isArray(t[T])){(V.specialEasing=V.specialEasing||{})[T]=t[T][1];t[T]=t[T][0]}}if(V.overflow!=null){this.style.overflow="hidden"}V.curAnim=af.extend({},t);af.each(t,function(Z,ba){var ab=new af.fx(S,V,Z);if(I.test(ba)){ab[ba==="toggle"?X?"show":"hide":ba](t)}else{var aa=u.exec(ba),a8=ab.cur()||0;if(aa){var Y=parseFloat(aa[2]),a9=aa[3]||"px";if(a9!=="px"){af.style(S,Z,(Y||1)+a9);a8=(Y||1)/ab.cur()*a8;af.style(S,Z,a8+a9)}if(aa[1]){Y=(aa[1]==="-="?-1:1)*Y+a8}ab.custom(a8,Y,a9)}else{ab.custom(a8,ba,"")}}});return true})},stop:function(t,c){var B=af.timers;t&&this.queue([]);this.each(function(){for(var E=B.length-1;E>=0;E--){if(B[E].elem===this){c&&B[E](true);B.splice(E,1)}}});c||this.dequeue();return this}});af.each({slideDown:at("show",1),slideUp:at("hide",1),slideToggle:at("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,c){af.fn[t]=function(P,E,B){return this.animate(c,P,E,B)}});af.extend({speed:function(t,c,E){var B=t&&typeof t==="object"?af.extend({},t):{complete:E||!E&&c||af.isFunction(t)&&t,duration:t,easing:E&&c||c&&!af.isFunction(c)&&c};B.duration=af.fx.off?0:typeof B.duration==="number"?B.duration:B.duration in af.fx.speeds?af.fx.speeds[B.duration]:af.fx.speeds._default;B.old=B.complete;B.complete=function(){B.queue!==false&&af(this).dequeue();af.isFunction(B.old)&&B.old.call(this)};return B},easing:{linear:function(t,c,E,B){return E+B*t},swing:function(t,c,E,B){return(-Math.cos(t*Math.PI)/2+0.5)*B+E}},timers:[],fx:function(t,c,B){this.options=c;this.elem=t;this.prop=B;if(!c.orig){c.orig={}}}});af.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(af.fx.step[this.prop]||af.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var c=parseFloat(af.css(this.elem,this.prop));return c&&c>-10000?c:0},custom:function(t,c,S){function P(T){return E.step(T)}var E=this,B=af.fx;this.startTime=af.now();this.start=t;this.end=c;this.unit=S||this.unit||"px";this.now=this.start;this.pos=this.state=0;P.elem=this.elem;if(P()&&af.timers.push(P)&&!aw){aw=setInterval(B.tick,B.interval)}},show:function(){this.options.orig[this.prop]=af.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());af(this.elem).show()},hide:function(){this.options.orig[this.prop]=af.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(B){var c=af.now(),T=true;if(B||c>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var S in this.options.curAnim){if(this.options.curAnim[S]!==true){T=false}}if(T){if(this.options.overflow!=null&&!af.support.shrinkWrapBlocks){var P=this.elem,E=this.options;af.each(["","X","Y"],function(U,V){P.style["overflow"+V]=E.overflow[U]})}this.options.hide&&af(this.elem).hide();if(this.options.hide||this.options.show){for(var t in this.options.curAnim){af.style(this.elem,t,this.options.orig[t])}}this.options.complete.call(this.elem)}return false}else{B=c-this.startTime;this.state=B/this.options.duration;c=this.options.easing||(af.easing.swing?"swing":"linear");this.pos=af.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||c](this.state,B,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};af.extend(af.fx,{tick:function(){for(var t=af.timers,c=0;c<t.length;c++){t[c]()||t.splice(c--,1)}t.length||af.fx.stop()},interval:13,stop:function(){clearInterval(aw);aw=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(c){af.style(c.elem,"opacity",c.now)},_default:function(c){if(c.elem.style&&c.elem.style[c.prop]!=null){c.elem.style[c.prop]=(c.prop==="width"||c.prop==="height"?Math.max(0,c.now):c.now)+c.unit}else{c.elem[c.prop]=c.now}}}});if(af.expr&&af.expr.filters){af.expr.filters.animated=function(c){return af.grep(af.timers,function(t){return c===t.elem}).length}}var d=/^t(?:able|d|h)$/i,aD=/^(?:body|html)$/i;af.fn.offset="getBoundingClientRect" in M.documentElement?function(t){var c=this[0],S;if(t){return this.each(function(T){af.offset.setOffset(this,t,T)})}if(!c||!c.ownerDocument){return null}if(c===c.ownerDocument.body){return af.offset.bodyOffset(c)}try{S=c.getBoundingClientRect()}catch(P){}var E=c.ownerDocument,B=E.documentElement;if(!S||!af.contains(B,c)){return S||{top:0,left:0}}c=E.body;E=a0(E);return{top:S.top+(E.pageYOffset||af.support.boxModel&&B.scrollTop||c.scrollTop)-(B.clientTop||c.clientTop||0),left:S.left+(E.pageXOffset||af.support.boxModel&&B.scrollLeft||c.scrollLeft)-(B.clientLeft||c.clientLeft||0)}}:function(V){var U=this[0];if(V){return this.each(function(W){af.offset.setOffset(this,V,W)})}if(!U||!U.ownerDocument){return null}if(U===U.ownerDocument.body){return af.offset.bodyOffset(U)}af.offset.initialize();var T,S=U.offsetParent,P=U.ownerDocument,E=P.documentElement,t=P.body;T=(P=P.defaultView)?P.getComputedStyle(U,null):U.currentStyle;for(var B=U.offsetTop,c=U.offsetLeft;(U=U.parentNode)&&U!==t&&U!==E;){if(af.offset.supportsFixedPosition&&T.position==="fixed"){break}T=P?P.getComputedStyle(U,null):U.currentStyle;B-=U.scrollTop;c-=U.scrollLeft;if(U===S){B+=U.offsetTop;c+=U.offsetLeft;if(af.offset.doesNotAddBorder&&!(af.offset.doesAddBorderForTableAndCells&&d.test(U.nodeName))){B+=parseFloat(T.borderTopWidth)||0;c+=parseFloat(T.borderLeftWidth)||0}S=U.offsetParent}if(af.offset.subtractsBorderForOverflowNotVisible&&T.overflow!=="visible"){B+=parseFloat(T.borderTopWidth)||0;c+=parseFloat(T.borderLeftWidth)||0}T=T}if(T.position==="relative"||T.position==="static"){B+=t.offsetTop;c+=t.offsetLeft}if(af.offset.supportsFixedPosition&&T.position==="fixed"){B+=Math.max(E.scrollTop,t.scrollTop);c+=Math.max(E.scrollLeft,t.scrollLeft)}return{top:B,left:c}};af.offset={initialize:function(){var t=M.body,c=M.createElement("div"),S,P,E,B=parseFloat(af.css(t,"marginTop"))||0;af.extend(c.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});c.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";t.insertBefore(c,t.firstChild);S=c.firstChild;P=S.firstChild;E=S.nextSibling.firstChild.firstChild;this.doesNotAddBorder=P.offsetTop!==5;this.doesAddBorderForTableAndCells=E.offsetTop===5;P.style.position="fixed";P.style.top="20px";this.supportsFixedPosition=P.offsetTop===20||P.offsetTop===15;P.style.position=P.style.top="";S.style.overflow="hidden";S.style.position="relative";this.subtractsBorderForOverflowNotVisible=P.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=t.offsetTop!==B;t.removeChild(c);af.offset.initialize=af.noop},bodyOffset:function(t){var c=t.offsetTop,B=t.offsetLeft;af.offset.initialize();if(af.offset.doesNotIncludeMarginInBodyOffset){c+=parseFloat(af.css(t,"marginTop"))||0;B+=parseFloat(af.css(t,"marginLeft"))||0}return{top:c,left:B}},setOffset:function(W,U,T){var S=af.css(W,"position");if(S==="static"){W.style.position="relative"}var P=af(W),E=P.offset(),t=af.css(W,"top"),B=af.css(W,"left"),c=S==="absolute"&&af.inArray("auto",[t,B])>-1;S={};var V={};if(c){V=P.position()}t=c?V.top:parseInt(t,10)||0;B=c?V.left:parseInt(B,10)||0;if(af.isFunction(U)){U=U.call(W,T,E)}if(U.top!=null){S.top=U.top-E.top+t}if(U.left!=null){S.left=U.left-E.left+B}"using" in U?U.using.call(W,S):P.css(S)}};af.fn.extend({position:function(){if(!this[0]){return null}var t=this[0],c=this.offsetParent(),E=this.offset(),B=aD.test(c[0].nodeName)?{top:0,left:0}:c.offset();E.top-=parseFloat(af.css(t,"marginTop"))||0;E.left-=parseFloat(af.css(t,"marginLeft"))||0;B.top+=parseFloat(af.css(c[0],"borderTopWidth"))||0;B.left+=parseFloat(af.css(c[0],"borderLeftWidth"))||0;return{top:E.top-B.top,left:E.left-B.left}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent||M.body;c&&!aD.test(c.nodeName)&&af.css(c,"position")==="static";){c=c.offsetParent}return c})}});af.each(["Left","Top"],function(t,c){var B="scroll"+c;af.fn[B]=function(S){var P=this[0],E;if(!P){return null}if(S!==aF){return this.each(function(){if(E=a0(this)){E.scrollTo(!t?S:af(E).scrollLeft(),t?S:af(E).scrollTop())}else{this[B]=S}})}else{return(E=a0(P))?"pageXOffset" in E?E[t?"pageYOffset":"pageXOffset"]:af.support.boxModel&&E.document.documentElement[B]||E.document.body[B]:P[B]}}});af.each(["Height","Width"],function(t,c){var B=c.toLowerCase();af.fn["inner"+c]=function(){return this[0]?parseFloat(af.css(this[0],B,"padding")):null};af.fn["outer"+c]=function(E){return this[0]?parseFloat(af.css(this[0],B,E?"margin":"border")):null};af.fn[B]=function(S){var P=this[0];if(!P){return S==null?null:this}if(af.isFunction(S)){return this.each(function(T){var U=af(this);U[B](S.call(this,T,U[B]()))})}if(af.isWindow(P)){return P.document.compatMode==="CSS1Compat"&&P.document.documentElement["client"+c]||P.document.body["client"+c]}else{if(P.nodeType===9){return Math.max(P.documentElement["client"+c],P.body["scroll"+c],P.documentElement["scroll"+c],P.body["offset"+c],P.documentElement["offset"+c])}else{if(S===aF){P=af.css(P,B);var E=parseFloat(P);return af.isNaN(E)?P:E}else{return this.css(B,typeof S==="string"?S:S+"px")}}}}})})(window);if(booking.env.enable_scripts_tracking){booking.env.scripts_tracking.main={loaded:true,run:false}}function bookmark(c,d){if(window.external){window.external.AddFavorite(c,d)}else{if(window.sidebar){window.sidebar.addPanel(d,c,"")}else{alert(tr.pressCtlD)}}}function addBookmark(d,c){if(window.sidebar){window.sidebar.addPanel(d,c,"")}else{if(document.all){window.external.AddFavorite(c,d)}else{alert("Sorry your browser doesn't support this function\nTo bookmark this page\nWindows users press ctrl + D\nMac users press cmd + D")}}}function hideFrameContainer(d,h,e){if(document.getElementById){var j=document.getElementById(d);var g=document.getElementById(h);j.style.display="none";document.getElementById("headline_newsletter").style.display="block";document.getElementById("headline_createprofile").style.display="none"}}function changeHeadline(){document.getElementById("headline_newsletter").style.display="none";document.getElementById("headline_createprofile").style.display="block"}function hideEl(c){$("#"+c).hide()}function showEl(c){$("#"+c).show()}function showFrameContainer(k,g,j,d,h,x,q,m,v){if(document.getElementById){var o=document.getElementById(k);var t=document.getElementById(g);var n=document.getElementById(j);if(t.style.display=="block"){t.style.display="none";return false}if(n.src!=d){n.src=d}t.style.visibility="hidden";t.style.display="block";var w=$(o).position()||{};var l=w.left,u=w.top;if(q){l+=q}if(m){u+=m}if(!h){h=t.offsetWidth}var y=document.getElementById("bodyconstraint").offsetWidth;if((l+h)>y){l=(y-h-40)}t.style.left=l+"px";t.style.top=u+"px";t.style.visibility="visible";return false}else{window.open(d)}}function sSc(d,c,e){if(document.getElementById){document.getElementById("rsc_"+d).innerHTML=e}}function sSc3(c,d){$("li[id^="+c+"]").attr("style","display: none; ");$("li[id^="+d+"]").removeAttr("style")}function sSc2(f,e,g){if(document.getElementById){if(document.getElementById("rnr")){document.getElementById("rnr").innerHTML=f}for(var d=-1;d<10;d++){var c=document.getElementById("rl"+d);if(c){c.style.color="";c.style.textDecoration="underline"}}e.style.color="#003580";e.style.textDecoration="none";e.blur();$("#gr_profile_chooser ul").removeClass().addClass(g);$(".review_filter_sub").text($(e).find(".key").text());if(g=="group"||g=="review_category_group_of_friends"){classname="group_big"}else{if(g=="solo_traveller"){classname="solo_big"}else{if(g=="family_with_young_children"||g=="review_category_family"){classname="youngchildren_big"}else{if(g=="mature_couple"){classname="maturecouple_big"}else{if(g=="family_with_older_children"){classname="oldchildren_big"}else{if(g=="with_friends"){classname="withfriends_big"}else{if(g=="young_couple"||g=="review_category_couple"){classname="youngcouple_big"}else{classname="global_big"}}}}}}}$(".review_user_type").attr("class","review_user_type type_"+classname)}}if($.ajaxSetup){$.ajaxSetup({cache:false,beforeSend:function(c){c.setRequestHeader("X-Booking-Pageview-Id",booking.env.pageview_id);c.setRequestHeader("X-Booking-AID",booking.env.aid);c.setRequestHeader("X-Booking-Session-Id",booking.env.b_sid)}})}if($(".b_msie_6").length){$(".b_msie_6 .bigbluebutton").mouseenter(function(){$(this).addClass("bigbluebutton_hover")});$(".b_msie_6 .bigbluebutton").mouseleave(function(){$(this).removeClass("bigbluebutton_hover")});$(".b_msie_6 .price_button").mouseenter(function(){$(this).addClass("price_button_hover")});$(".b_msie_6 .price_button").mouseleave(function(){$(this).removeClass("price_button_hover")})}$("#signup_box").hide();$(".userdataform").hide();function ShowHideSignup(){$("#signup_box").animate({height:"toggle"},{duration:500});return false}$("#signup_box #signupForm").click(function(c){c.stopPropagation()});$("#signup_box .userdataform").click(function(c){c.stopPropagation()});$(function(){$(".newsletter_ajax_error").hide();$('input#to[type="text"]').css({backgroundColor:"#FFFFFF"});$('input#to[type="text"]').focus(function(){$(this).css({color:"#003580"});if(this.value==this.defaultValue){this.value=""}if(this.value!=this.defaultValue){this.select()}});$("input.text-input").blur(function(){$(this).css({backgroundColor:"#FFFFFF"})});$("div#newsletterform_form a.flashdeals_nosubscribe").click(function(){$("div#flashdealsbg_wrapper h2.flashdeals_header_one").hide();$("div#flashdealsbg_wrapper h2.flashdeals_header_two").show();$("div#flashdealsbg_wrapper h3.flashdeals_subheader_one").hide();$("div#flashdealsbg_wrapper h3.flashdeals_subheader_two").show();$("div#flashdealsbg_wrapper a.flashdeals_nosubscribe").hide();$("div#flashdealsbg_wrapper a.flashdeals_gotobooking").show();$("div#flashdealsbg_wrapper input.newsletter_button").hide();$("div#flashdealsbg_wrapper input.newsletter_button_deals").show();return false})});(function(f,d){var e=e||{};var g=f.console||{};g.warn=g.warn||function(){};var c={_list:{},get:function(j){return c._list[j]},set:function(j,k){var j=j||"";var k=k||"";if(typeof j==="string"){j=j.replace(/^\s+|\s+$/g,"")}if(typeof k==="string"){k=k.replace(/^\s+|\s+$/g,"")}if((j.length>0&&typeof j==="string")||typeof j!=="string"){if(typeof c._list[j]!=="undefined"){g.warn("Booking Strings: replacing string with id: "+j)}c._list[j]=k}else{g.warn("Booking Strings: trying to insert string with empty id")}}};var h=function(j,k){return c[typeof k!=="undefined"?"set":"get"](j,k)};d.strings=h;d.strings.get=c.get;d.strings.set=c.set})(window,booking);(function(k,m){var d="experiments",g="startup",e="experiments_load",l="startup_load",j=m.env,h=$(document),c=function(o){return typeof o==="function"},n=function(q){var o="b_site_experiment_"+q;return(o in j)&&+j[o]>0},f;m.ensureNamespaceExists(d);m.ensureNamespaceExists(g);m.ensureNamespaceExists(e);m.ensureNamespaceExists(l);f=m[g];f.init=function(x){var y=[],I=9,A,u,t,D,C,B,H,G,v,z,q,F,E,w,o=x==="ready";A=o?d:e;t=m[A];for(D in t){y.push([t[D].priority||I,D,A,!n(D)])}u=o?g:l;C=m[u];for(B in C){q=C[B];y.push([q.priority||I,B,u,false])}if(y.length>0){y.sort();for(E=0,w=y.length;E<w;E+=1){H=y[E];G=H[1];v=H[2];q=m[v][G];$.extend(q,{strings:m.strings});z=H[3]?q.initElse:q.init;q.ns="booking."+v;q.name=G;if(c(z)){F=this.execute(z,q);if(F===true){q.init=q.initElse=null}}}}$(document).trigger(x+":finished")};f.execute=function(q,o){return q.call(o)};j.amTracking=[];(function(){var v=20,w=Object.prototype.toString,B=Array.prototype.slice,y=$(k),G=$(document),t=function(L){var N=L.offset(),K=(typeof N.constructor==="function")?N.constructor:{name:"OtherConstructor"},M;if(K.name==="ClientRect"){M=$(L.trackingSelector).eq(0).offset();if(M){return M.top}return false}return N.top},C=function(L){var K=t(L);if(K===false){return false}return(y.scrollTop()+y.height())>(K+v)},z=function(K,M){try{y.trigger(K,M)}catch(L){}},A={css:jQuery.fn.css,show:jQuery.fn.show,hide:jQuery.fn.hide,toggle:jQuery.fn.toggle},H={show:/block|inline|list-item|inline-block/,hide:/none/};jQuery.fn.css=function(M,L){var K=A.css.apply(this,B.apply(arguments));if(this.selector){if(typeof L!=="undefined"&&M==="display"){z("ELEMENT_DISPLAY:"+this.selector,{elem:this,value:L})}else{if(w.apply(M)==="[object Object]"&&"display" in M){z("ELEMENT_DISPLAY:"+this.selector,{elem:this,value:M.display})}}}return K};$.each("show hide toggle".split(" "),function(K,L){jQuery.fn[L]=function(){var M=A[L].apply(this,B.apply(arguments));if(this.selector){z("ELEMENT_DISPLAY:"+this.selector,{elem:this,value:this.css("display")})}return M}});var I=[],D=[],J,u,q,x,o,F;o=function(){F=false};u=function(){var K,L,M;J=false;if(F){J=setTimeout(u,250);return}if(I.length>0||D.length>0){F=true;y.trigger("ClickTale:TrackDynamic",{experiments:I});K=D.length?";what="+D.join(","):"";M=$("#req_info")?$("#req_info").html():"";L=document.createElement("img");L.setAttribute("style","height:1px;width:1px;visibility:hidden;float:left;");L.onload=L.onerror=o;L.src="/js_tracking?ver=1"+K+";sid="+j.b_sid+";aid="+j.b_aid+";pid="+j.pageview_id+";exps="+I.join(",")+";info="+M;document.body.appendChild(L);I=[];D=[]}};q=function(K,L){if(typeof K==="undefined"||K===null){return}var R=K.split(","),M,O,Q,N=m.env.js_experiment_tracking,P;for(M=0,O=R.length;M<O;M+=1){P=isNaN(+R[M])&&!!N?N[R[M]]:R[M];if(/^[0-9]+$/.test(P)&&typeof j.amTracking["e"+P]==="undefined"){I.push(P);j.amTracking["e"+P]=1}}if(L&&typeof j.amTracking["g"+L]==="undefined"){D.push(L);j.amTracking["g"+L]=1}if(!I.length&&!D.length){return false}else{if(N&&N.njst&&/^[0-9]+$/.test(N.njst)&&typeof j.amTracking["e"+N.njst]==="undefined"){I.push(N.njst);j.amTracking["e"+N.njst]=1}}if(J){k.clearTimeout(J);J=false}J=k.setTimeout(u,500)};x=function(M,L){if(typeof M==="undefined"||M===null){return}var S=M.split(","),P=[],Q,N,O,T,R,K=m.env.js_experiment_tracking,U;for(Q=0,N=S.length;Q<N;Q+=1){U=isNaN(+S[Q])&&!!K?K[S[Q]]:S[Q];if(/^[0-9]+$/.test(U)&&typeof j.amTracking["e"+U]==="undefined"){P.push(U);j.amTracking["e"+U]=1}}if(P.length>0){if(K&&K.njst&&/^[0-9]+$/.test(K.njst)&&typeof j.amTracking["e"+K.njst]==="undefined"){P.push(K.njst);j.amTracking["e"+K.njst]=1}y.trigger("ClickTale:TrackDynamic",{experiments:P});T=L?";what="+L:"";O=$("#req_info")?$("#req_info").html():"";R='<img style="height:1px;width:1px;visibility:hidden;float:left;" src="/js_tracking?ver=1'+T+";sid="+j.b_sid+";aid="+j.b_aid+";pid="+j.pageview_id+";exps="+P.join()+";info="+O+'">';$(document.body).append(R)}};m.track={exp:(j.bse_new_js_track)?q:x,onView:function(K){var L=$(K).eq(0),M=this.exp;L.trackingSelector=K;return{exp:function(){var N=B.apply(arguments),O=$.proxy(function(){var P;if(C(L)){P="ONVIEW:"+(w.apply(K)==="[object String]"?K:$(K).selector);y.trigger(P,{source:K});M.apply(m.track,this.args);y.unbind("resize scroll",O)}},{args:N});if(L.length){if(L.css("display")==="none"){L.css({display:"block",visibility:"hidden"})}y.bind("resize scroll",O);O()}}}},onNav:function(){return{exp:function(){}}}};$.each("blur change click dblclick mouseover mouseout".split(" "),function(L,K){var N=K.slice(0,1),M=K.replace(N,N.toUpperCase());m.track[K]=m.track["on"+M]=function(O){var P=$(O);return{exp:function(){var Q=B.apply(arguments),R=$.proxy(function(){m.track.exp.apply(m.track,this.args);P.unbind(K,R)},{args:Q});P.bind(K,R)}}};m.track["live"+M]=function(O){return{exp:function(){var P=B.apply(arguments),Q=$.proxy(function(){m.track.exp.apply(m.track,this.args);$(O).unbind(K,Q)},{args:P});G.delegate(O,K,Q)}}}});$.each("show hide".split(" "),function(L,K){m.track[K]=function(M){var N=$(M);if(!N.selector){return{exp:function(){}}}return{exp:function(){var O=B.apply(arguments),P=$.proxy(function(Q,R){if(H[K].test(R.value)&&(R.elem.selector===N.selector||(N.length===1&&R.elem[0]===N[0]))){m.track.exp.apply(m.track,this.args);y.unbind("ELEMENT_DISPLAY:"+N.selector,P)}},{args:O});y.bind("ELEMENT_DISPLAY:"+N.selector,P)}}}});$.each("blur change click dblclick mouseover mouseout".split(" "),function(M,L){var K="[data-track-on-"+L+"]",N=function(){m.track.exp.call(m.track,$(this).data("track-on-"+L)+"");G.undelegate(K,L,N)};G.delegate(K,L,N)});var E={mouseenter:"hover",hover:"hover",click:"click"};G.delegate("[data-google-track]","click hover mouseenter mouseleave",function(L){var K=($(this).data("google-track")||"").split("/");if(K[0].toLowerCase()===E[L.type]){m.google.trackEvent.apply(m.google,K)}})})();j.trackExperiment=function(){m.track.exp.apply(this,Array.prototype.slice.apply(arguments))};$(function(){m[g].init("ready")});$(k).load(function(){m[g].init("load")});m.run=function(o){return{onReady:function(q){m[g][o]={priority:9,init:q}},onLoad:function(q){m[l][o]={priority:9,init:q}}}};m.runExp=function(o){return{afterReady:function(q){this.onReady(function(){h.bind("ready:finished",q)})},onReady:function(q){m[d][o]={priority:9,init:q}},afterLoad:function(q){this.onLoad(function(){h.bind("load:finished",q)})},onLoad:function(q){m[e][o]={priority:9,init:q}}}};k.sNSExperiments=d;k.sNSStartup=g;k.sNSExperimentsLoad=e;k.sNSStartupLoad=l})(this,this.booking);(function(d,c){var h=c.startup,f=$(document),g,e=0;if(!c.env.b_site_experiment_clicktale&&!/clicktale/.test(document.location.hostname)){return}h.execute=function(l,k){var n=function(o){return function(){var v=false,q,y=!!($(this).selector),t=Array.prototype.slice.apply(arguments),u,x,w;if(!!this.length){if(!!t.length){for(u=0,x=t.length;u<x;u+=1){w=t[u];if(w&&Object.prototype.toString.apply(w)==="[object Function]"){q=u;v=w;break}}}if(v){t[q]=function(z){if(!y){if(typeof ClickTaleExec==="function"&&!/submit/i.test(z.type)){if(this===d){ClickTaleExec("jQuery(window)."+z.type+"()")}else{if(this===document){ClickTaleExec("jQuery(document)."+z.type+"()")}}}return v.apply(this,Array.prototype.slice.apply(arguments))}var I=$(this),B=I.attr("id"),E=z.type,G,H,C=this.tagName.toLowerCase(),D,F,A;if(B){F=$("#"+B).index(this);A='jQuery("#'+B+'").eq('+F+")"}else{G=I.closest("[id]");H=G.attr("id");D=$("#"+H).index(G);F=G.find(C).index(this);A='jQuery("#'+H+'").eq('+D+').find("'+C+'").eq('+F+")"}if(typeof ClickTaleExec==="function"&&!/submit/i.test(z.type)){if(E==="change"){A+='.val("'+I.val()+'")'}A+="."+E+"()";if(!I.hasClass("ClickTaleSensitive")){ClickTaleExec(A)}}return v.apply(this,Array.prototype.slice.apply(arguments))}}}return o.apply(this,t)}},j,m;j=$.fn.bind;m=$.fn.live;$.fn.bind=n(j);$.fn.live=n(m);l.call(k);$.fn.bind=j;$.fn.live=m};f.bind("ready:finished load:finished",function(){e+=1;g()});g=function(){if(e!==2){return}}})(this,this.booking);$(function(){if(!booking.env.b_site_experiment_clicktale&&!/clicktale/.test(document.location.hostname)){return}ClickTaleEvent=(typeof ClickTaleEvent==="function")?ClickTaleEvent:function(){};ClickTaleRegisterElementAction=(typeof ClickTaleRegisterElementAction==="function")?ClickTaleRegisterElementAction:function(){};ClickTaleRegisterFormSubmitNotSent=(typeof ClickTaleRegisterFormSubmitNotSent==="function")?ClickTaleRegisterFormSubmitNotSent:function(){};ClickTaleRegisterFormSubmitSent=(typeof ClickTaleRegisterFormSubmitSent==="function")?ClickTaleRegisterFormSubmitSent:function(){};var l=function(w){if("ClickTaleContext" in window&&j(ClickTaleContext)==="[object Object]"){try{ClickTaleContext.getAggregationContextAsync("1",w)}catch(v){}}},g=$("[data-clicktale-signify]"),n=$(".clicktale-propagation, .bigbluebutton"),h=booking.env,q=h.all_experiment_labels_running_for_clicktale,t={index:"#b_searchbox_errors",searchresults:".dateerrors",hotel:".dateerrors",city:".dateerrors",country:".dateerrors",book:".errorSimpleMsg",confirmation:""},u=t[h.b_action],m=$(u),o=h.b_action==="searchresults",c=$("#basiclayout").length,f,e,d=$(window),k={"0":"User not logged in","1":"User recognized","2":"User logged in"},j=function(v){return Object.prototype.toString.apply(v)};if(g.length){g.map(function(){var v=$(this),x=v.data("clicktale-signify").split("_"),w=x[0];if(w==="hover"){w="mouseenter"}v.bind(w,function(){ClickTaleEvent(x[1]+" "+w+"ed")})})}n.click(function(v){ClickTaleRegisterElementAction("click",v)});if(h.rtl){ClickTaleEvent("Right To Left")}if(h.b_action==="book"){ClickTaleEvent("Booking step "+h.b_stage)}if(/utm_medium/.test(document.location.search)){ClickTaleEvent("Source: email")}if(h.b_locale){ClickTaleEvent("Language: "+h.b_locale)}if(o){if(h.b_is_disambiguation){ClickTaleEvent("Disambiguation Page")}else{if(c){ClickTaleEvent("Search results Page")}else{ClickTaleEvent("Deal Finder Page")}}}ClickTaleEvent(k[h.auth_level]);for(f=0,e=q.length;f<e;f+=1){ClickTaleEvent(q[f])}ClickTaleEvent(h.user_has_dates?"Dates chosen":"Dates not chosen");if(u&&m.length&&m.is(":visible")){ClickTaleRegisterFormSubmitFailure()}else{ClickTaleRegisterFormSubmitSuccess()}d.bind("Form:NotValid",function(v,w){ClickTaleRegisterFormSubmitNotSent(w.form)});d.bind("Form:Valid",function(v,w){ClickTaleRegisterFormSubmitSent(w.form)});$(".ctaction").live("click",function(){var v=$(".ctaction").index(this);ClickTaleExec('jQuery(".ctaction:eq('+v+')").click()')});l(function(v){$("#bOn").click()});d.bind("ClickTale:TrackDynamic",function(z,B){var A=B.experiments,x,v,w,y;for(w=0,y=A.length;w<=y;w+=1){x=A[w]+"";if(x in h.clicktale_experiment_ids){v=h.clicktale_experiment_ids[x];if(v in h.all_experiment_names_running_for_clicktale){ClickTaleEvent("Experiment "+v+" variant "+h.all_experiment_names_running_for_clicktale[v])}}}})});booking[sNSStartup].popups={priority:9,curPopup:null,tempTar:null,sizes:{s:{width:300,height:400},m:{width:400,height:400},l:{width:600,height:580},xl:{width:850,height:600}},init:function(){var c=this;$(".popup_s, .popup_m, .popup_l, .popup_xl").click(function(){var f="l";var d=$(this).attr("class").split(" ");for(var e=0;e<d.length;e++){if(d[e].indexOf("popup_")>-1){f=d[e].split("_")[1]}}c.tempTar=$(this).attr("href");c.openPopup(f);return false})},openPopup:function(d){var c=this;if(this.curPopup!=null){this.curPopup.close();this.curPopup=null;var d=d;setTimeout(function(){c.openPopup(d)},300)}else{var e=this.sizes[d];this.curPopup=window.open(this.tempTar,"","toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=yes,resizable=1,width="+e.width+",height="+e.height+",left=200,top=200");this.curPopup.focus();this.tempTar=null}}};jQuery.cookie=function(d,l,o){if(typeof l!="undefined"){o=o||{};if(l===null){l="";o=$.extend({},o);o.expires=-1}var g="";if(o.expires&&(typeof o.expires=="number"||o.expires.toUTCString)){var h;if(typeof o.expires=="number"){h=new Date();h.setTime(h.getTime()+(o.expires*24*60*60*1000))}else{h=o.expires}g="; expires="+h.toUTCString()}var n=o.path?"; path="+(o.path):"";var j=o.domain?"; domain="+(o.domain):"";var c=o.secure?"; secure":"";document.cookie=[d,"=",encodeURIComponent(l),g,n,j,c].join("")}else{var f=null;if(document.cookie&&document.cookie!=""){var m=document.cookie.split(";");for(var k=0;k<m.length;k++){var e=jQuery.trim(m[k]);if(e.substring(0,d.length+1)==(d+"=")){f=decodeURIComponent(e.substring(d.length+1));break}}}return f}};jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(f,g,e,j,h){return jQuery.easing[jQuery.easing.def](f,g,e,j,h)},easeInQuad:function(f,g,e,j,h){return j*(g/=h)*g+e},easeOutQuad:function(f,g,e,j,h){return -j*(g/=h)*(g-2)+e},easeInOutQuad:function(f,g,e,j,h){if((g/=h/2)<1){return j/2*g*g+e}return -j/2*((--g)*(g-2)-1)+e},easeInCubic:function(f,g,e,j,h){return j*(g/=h)*g*g+e},easeOutCubic:function(f,g,e,j,h){return j*((g=g/h-1)*g*g+1)+e},easeInOutCubic:function(f,g,e,j,h){if((g/=h/2)<1){return j/2*g*g*g+e}return j/2*((g-=2)*g*g+2)+e},easeInQuart:function(f,g,e,j,h){return j*(g/=h)*g*g*g+e},easeOutQuart:function(f,g,e,j,h){return -j*((g=g/h-1)*g*g*g-1)+e},easeInOutQuart:function(f,g,e,j,h){if((g/=h/2)<1){return j/2*g*g*g*g+e}return -j/2*((g-=2)*g*g*g-2)+e},easeInQuint:function(f,g,e,j,h){return j*(g/=h)*g*g*g*g+e},easeOutQuint:function(f,g,e,j,h){return j*((g=g/h-1)*g*g*g*g+1)+e},easeInOutQuint:function(f,g,e,j,h){if((g/=h/2)<1){return j/2*g*g*g*g*g+e}return j/2*((g-=2)*g*g*g*g+2)+e},easeInSine:function(f,g,e,j,h){return -j*Math.cos(g/h*(Math.PI/2))+j+e},easeOutSine:function(f,g,e,j,h){return j*Math.sin(g/h*(Math.PI/2))+e},easeInOutSine:function(f,g,e,j,h){return -j/2*(Math.cos(Math.PI*g/h)-1)+e},easeInExpo:function(f,g,e,j,h){return(g==0)?e:j*Math.pow(2,10*(g/h-1))+e},easeOutExpo:function(f,g,e,j,h){return(g==h)?e+j:j*(-Math.pow(2,-10*g/h)+1)+e},easeInOutExpo:function(f,g,e,j,h){if(g==0){return e}if(g==h){return e+j}if((g/=h/2)<1){return j/2*Math.pow(2,10*(g-1))+e}return j/2*(-Math.pow(2,-10*--g)+2)+e},easeInCirc:function(f,g,e,j,h){return -j*(Math.sqrt(1-(g/=h)*g)-1)+e},easeOutCirc:function(f,g,e,j,h){return j*Math.sqrt(1-(g=g/h-1)*g)+e},easeInOutCirc:function(f,g,e,j,h){if((g/=h/2)<1){return -j/2*(Math.sqrt(1-g*g)-1)+e}return j/2*(Math.sqrt(1-(g-=2)*g)+1)+e},easeInElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l)==1){return e+m}if(!k){k=l*0.3}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k))+e},easeOutElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l)==1){return e+m}if(!k){k=l*0.3}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}return g*Math.pow(2,-10*h)*Math.sin((h*l-j)*(2*Math.PI)/k)+m+e},easeInOutElastic:function(f,h,e,m,l){var j=1.70158;var k=0;var g=m;if(h==0){return e}if((h/=l/2)==2){return e+m}if(!k){k=l*(0.3*1.5)}if(g<Math.abs(m)){g=m;var j=k/4}else{var j=k/(2*Math.PI)*Math.asin(m/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*l-j)*(2*Math.PI)/k)*0.5+m+e},easeInBack:function(f,g,e,k,j,h){if(h==undefined){h=1.70158}return k*(g/=j)*g*((h+1)*g-h)+e},easeOutBack:function(f,g,e,k,j,h){if(h==undefined){h=1.70158}return k*((g=g/j-1)*g*((h+1)*g+h)+1)+e},easeInOutBack:function(f,g,e,k,j,h){if(h==undefined){h=1.70158}if((g/=j/2)<1){return k/2*(g*g*(((h*=(1.525))+1)*g-h))+e}return k/2*((g-=2)*g*(((h*=(1.525))+1)*g+h)+2)+e},easeInBounce:function(f,g,e,j,h){return j-jQuery.easing.easeOutBounce(f,h-g,0,j,h)+e},easeOutBounce:function(f,g,e,j,h){if((g/=h)<(1/2.75)){return j*(7.5625*g*g)+e}else{if(g<(2/2.75)){return j*(7.5625*(g-=(1.5/2.75))*g+0.75)+e}else{if(g<(2.5/2.75)){return j*(7.5625*(g-=(2.25/2.75))*g+0.9375)+e}else{return j*(7.5625*(g-=(2.625/2.75))*g+0.984375)+e}}}},easeInOutBounce:function(f,g,e,j,h){if(g<h/2){return jQuery.easing.easeInBounce(f,g*2,0,j,h)*0.5+e}return jQuery.easing.easeOutBounce(f,g*2-h,0,j,h)*0.5+j*0.5+e}});
/*!
* jQuery hashchange event - v1.3 - 7/21/2010
* http://benalman.com/projects/jquery-hashchange-plugin/
* 
* Copyright (c) 2010 "Cowboy" Ben Alman
* Dual licensed under the MIT and GPL licenses.
* http://benalman.com/about/license/
*/
(function($,g,d){var e="hashchange",k=document,h,j=$.event.special,l=k.documentMode,f="on"+e in g&&(l===d||l>7);function c(m){m=m||location.href;return"#"+m.replace(/^[^#]*#?(.*)$/,"$1")}$.fn[e]=function(m){return m?this.bind(e,m):this.trigger(e)};$.fn[e].delay=50;j[e]=$.extend(j[e],{setup:function(){if(f){return false}$(h.start)},teardown:function(){if(f){return false}$(h.stop)}});h=(function(){var m={},v,q=c(),n=function(w){return w},o=n,u=n;m.start=function(){v||t()};m.stop=function(){v&&clearTimeout(v);v=d};function t(){var x=c(),w=u(q);if(x!==q){o(q=x,w);$(g).trigger(e)}else{if(w!==q){location.href=location.href.replace(/#.*/,"")+w}}v=setTimeout(t,$.fn[e].delay)}$.browser.msie&&!f&&(function(){var w,x;m.start=function(){if(!w){x=$.fn[e].src;x=x&&x+c();w=$('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){x||o(c());t()}).attr("src",x||"javascript:0").insertAfter("body")[0].contentWindow;k.onpropertychange=function(){try{if(event.propertyName==="title"){w.document.title=k.title}}catch(y){}}}};m.stop=n;u=function(){return c(w.location.href)};o=function(B,y){var A=w.document,z=$.fn[e].domain;if(B!==y){A.title=k.title;A.open();z&&A.write('<script>document.domain="'+z+'"<\/script>');A.close();w.location.hash=B}}})();return m})()})(jQuery,window);(function(c){c.fn.hint=function(d){if(!d){d="blur"}return this.each(function(){var j=c(this),g=j.attr("title"),f=c(this.form),h=c(window);function e(){if(j.val()===g&&j.hasClass(d)){j.val("").removeClass(d)}}if(g){j.blur(function(){if(this.value===""){j.val(g).addClass(d)}}).focus(e).blur();f.submit(e);h.unload(e)}})}})(jQuery);$("input#destination:text").hint();(function(h,g,m){var l=g.event,k;l.special.smartresize={setup:function(){g(this).bind("resize",l.special.smartresize.handler)},teardown:function(){g(this).unbind("resize",l.special.smartresize.handler)},handler:function(e,q){var o=this,n=arguments;e.type="smartresize",k&&clearTimeout(k),k=setTimeout(function(){g.event.handle.apply(o,n)},q==="execAsap"?0:100)}},g.fn.smartresize=function(c){return c?this.bind("smartresize",c):this.trigger("smartresize",["execAsap"])},g.Mason=function(d,e){this.element=g(e),this._create(d),this._init()},g.Mason.settings={isResizable:!0,isAnimated:!1,animationOptions:{queue:!1,duration:500},gutterWidth:0,isRTL:!1,isFitWidth:!1,containerStyle:{position:"relative"}},g.Mason.prototype={_filterFindBricks:function(d){var c=this.options.itemSelector;return c?d.filter(c).add(d.find(c)):d},_getBricks:function(d){var c=this._filterFindBricks(d).css({position:"absolute"}).addClass("masonry-brick");return c},_create:function(u){this.options=g.extend(!0,{},g.Mason.settings,u),this.styleQueue=[];var t=this.element[0].style;this.originalStyle={height:t.height||""};var q=this.options.containerStyle;for(var o in q){this.originalStyle[o]=t[o]||""}this.element.css(q),this.horizontalDirection=this.options.isRTL?"right":"left",this.offset={x:parseInt(this.element.css("padding-"+this.horizontalDirection),10),y:parseInt(this.element.css("padding-top"),10)},this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth=="function";var n=this;setTimeout(function(){n.element.addClass("masonry")},0),this.options.isResizable&&g(h).bind("smartresize.masonry",function(){n.resize()}),this.reloadItems()},_init:function(c){this._getColumns(),this._reLayout(c)},option:function(d,e){g.isPlainObject(d)&&(this.options=g.extend(!0,this.options,d))},layout:function(y,x){for(var w=0,v=y.length;w<v;w++){this._placeBrick(y[w])}var u={};u.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){var t=0;w=this.cols;while(--w){if(this.colYs[w]!==0){break}t++}u.width=(this.cols-t)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:u});var q=this.isLaidOut?this.options.isAnimated?"animate":"css":"css",o=this.options.animationOptions,n;for(w=0,v=this.styleQueue.length;w<v;w++){n=this.styleQueue[w],n.$el[q](n.style,o)}this.styleQueue=[],x&&x.call(y),this.isLaidOut=!0},_getColumns:function(){var d=this.options.isFitWidth?this.element.parent():this.element,c=d.width();this.columnWidth=this.isFluid?this.options.columnWidth(c):this.options.columnWidth||this.$bricks.outerWidth(!0)||c,this.columnWidth+=this.options.gutterWidth,this.cols=Math.floor((c+this.options.gutterWidth)/this.columnWidth),this.cols=Math.max(this.cols,1)},_placeBrick:function(F){var E=g(F),D,C,B,A,z;D=Math.ceil(E.outerWidth(!0)/this.columnWidth),D=Math.min(D,this.cols);if(D===1){B=this.colYs}else{C=this.cols+1-D,B=[];for(z=0;z<C;z++){A=this.colYs.slice(z,z+D),B[z]=Math.max.apply(Math,A)}}var y=Math.min.apply(Math,B),x=0;for(var w=0,v=B.length;w<v;w++){if(B[w]===y){x=w;break}}var u={top:y+this.offset.y};u[this.horizontalDirection]=this.columnWidth*x+this.offset.x,this.styleQueue.push({$el:E,style:u});var t=y+E.outerHeight(!0),q=this.cols+1-v;for(w=0;w<q;w++){this.colYs[x+w]=t}},resize:function(){var c=this.cols;this._getColumns(),(this.isFluid||this.cols!==c)&&this._reLayout()},_reLayout:function(d){var c=this.cols;this.colYs=[];while(c--){this.colYs.push(0)}this.layout(this.$bricks,d)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(c){this.reloadItems(),this._init(c)},appended:function(f,e,o){if(e){this._filterFindBricks(f).css({top:this.element.height()});var n=this;setTimeout(function(){n._appended(f,o)},1)}else{this._appended(f,o)}},_appended:function(e,d){var f=this._getBricks(e);this.$bricks=this.$bricks.add(f),this.layout(f,d)},remove:function(c){this.$bricks=this.$bricks.not(c),c.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="",this.style.top="",this.style.left=""});var f=this.element[0].style;for(var e in this.originalStyle){f[e]=this.originalStyle[e]}this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"),g(h).unbind(".masonry")}},g.fn.imagesLoaded=function(n){function q(){n.call(x,w)}function o(d){var e=d.target;e.src!==u&&g.inArray(e,t)===-1&&(t.push(e),--v<=0&&(setTimeout(q),w.unbind(".imagesLoaded",o)))}var x=this,w=x.find("img").add(x.filter("img")),v=w.length,u="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",t=[];return v||q(),w.bind("load.imagesLoaded error.imagesLoaded",o).each(function(){var c=this.src;this.src=u,this.src=c}),x};var j=function(c){h.console&&h.console.error(c)};g.fn.masonry=function(d){if(typeof d=="string"){var e=Array.prototype.slice.call(arguments,1);this.each(function(){var c=g.data(this,"masonry");if(!c){j("cannot call methods on masonry prior to initialization; attempted to call method '"+d+"'");return}if(!g.isFunction(c[d])||d.charAt(0)==="_"){j("no such method '"+d+"' for masonry instance");return}c[d].apply(c,e)})}else{this.each(function(){var f=g.data(this,"masonry");f?(f.option(d||{}),f._init()):g.data(this,"masonry",new g.Mason(d,this))})}return this}})(window,jQuery);(function(c){c.extend({noticeAdd:function(f){var k={inEffect:{opacity:"show"},inEffectDuration:600,stayTime:3000,text:"",stay:false,type:"notice",destination:"",platform:"mac"};var f,l,j,g,e,d;f=c.extend({},k,f);if(typeof booking.env.b_site_experiment_ipad_improvements!="undefined"&&booking.env.b_site_experiment_ipad_improvements){return}var h=navigator&&navigator.platform&&(navigator.platform.indexOf("Mac")==-1&&navigator.platform.indexOf("iPad")==-1&&navigator.platform.indexOf("iPhone")==-1);if(h){f.platform="win"}l=(!c(".notice-wrap").length)?c("<div></div>").addClass("notice-wrap").addClass(f.platform).appendTo("body"):c(".notice-wrap");j=c("<div></div>").addClass("notice-item-wrapper");d=(f.destination=="")?"<p>"+f.text+"</p>":'<p><a href="'+f.destination+'">'+f.text+"</a></p>";if(f.close=="all"){g=c("<div></div>").hide().addClass("notice-item "+f.type+" "+f.addClassName).appendTo(l).html(d).animate(f.inEffect,f.inEffectDuration).wrap(j).click(function(n){if(booking.env.b_action==="hotel"){var m=JSON.parse($.cookie("bs"))||{};m.gc=1;if(typeof(JSON)!="undefined"){$.cookie("bs",JSON.stringify(m),{path:"/",domain:booking.env.b_domain_end})}}booking.google.trackEvent(booking.google.clickTracker,"growl_removed",n&&n.target&&$(n.target).closest(".notice-item-close-x").length?"x":"message");c.noticeRemove(g,f.addClassName);return false});e=c("<div></div>").addClass("notice-item-close-x").prependTo(g)}else{g=c("<div></div>").hide().addClass("notice-item "+f.type).appendTo(l).html(d).animate(f.inEffect,f.inEffectDuration).wrap(j);e=c("<div></div>").addClass("notice-item-close-x").prependTo(g).click(function(){c.noticeRemove(g);if(f.type=="language"){if(typeof(b_cookie)=="undefined"){b_cookie={}}b_cookie.langPrompt="dontshow";if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:booking.env.b_domain_end})}}return false})}if(f.type=="language"){$(".notice-item p").css("cursor","pointer");$(".notice-item p").click(function(){$("#langselectformlist").val(booking.env.browser_lang);$("#languageselect")[0].submit();c.noticeRemove(g);return false})}if(navigator.userAgent.match(/MSIE 6/i)){l.css({top:document.documentElement.scrollTop})}if(!f.stay){setTimeout(function(){c.noticeRemove(g)},f.stayTime)}},noticeAddBig:function(e){var h={inEffect:{opacity:"show"},inEffectDuration:600,stayTime:3000,text:"",stay:false,type:"notice"};var e,j,g,f,d;e=c.extend({},h,e);j=(!c(".notice-wrap").length)?c("<div></div>").addClass("notice-wrap").appendTo("body"):c(".notice-wrap");g=c("<div></div>").addClass("notice-item-wrapper");f=c("<div></div>").hide().addClass("notice-item-big "+e.type).appendTo(j).html("<p>"+e.text+"</p>").animate(e.inEffect,e.inEffectDuration).wrap(g);d=c("<div></div>").addClass("notice-item-close").prependTo(f).html("x").click(function(){c.noticeRemove(f)});if(navigator.userAgent.match(/MSIE 6/i)){j.css({top:document.documentElement.scrollTop})}if(!e.stay){setTimeout(function(){c.noticeRemove(f)},e.stayTime)}},noticeRemove:function(e,d){e.animate({opacity:"0"},600,function(){e.parent().animate({height:"0px"},300,function(){e.parent().remove()})});if(d&&d!=""){$("."+d).removeClass(d)}}})})(jQuery);jQuery.fn.pulse=function(c,f,d,j,l){if(isNaN(d)){l=j;j=d;d=1}var k=jQuery.speed(f,j,l),h=k.queue!==false,g=0;for(var e in c){g=Math.max(c[e].length,g)}k.times=k.times||d;return this[h?"queue":"each"](function(){var o={},n=jQuery.extend({},k),m=jQuery(this);q();function q(){var v={},t=false;for(var u in c){o[u]=o[u]||{runs:0,cur:-1};if(o[u].cur<c[u].length-1){++o[u].cur}else{o[u].cur=0;++o[u].runs}if(c[u].length===g){t=n.times>o[u].runs}v[u]=c[u][o[u].cur]}n.complete=q;n.queue=false;if(t){m.animate(v,n)}else{k.complete.call(m[0])}}})};(function(f){var c=f.scrollTo=function(d,g,h){f(window).scrollTo(d,g,h)};c.defaults={axis:"xy",duration:parseFloat(f.fn.jquery)>=1.3?0:1};c.window=function(d){return f(window)._scrollable()};f.fn._scrollable=function(){return this.map(function(){var d=this,g=!d.nodeName||f.inArray(d.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!g){return d}var h=(d.contentWindow||d).document||d.ownerDocument||d;return f.browser.safari||h.compatMode=="BackCompat"?h.body:h.documentElement})};f.fn.scrollTo=function(h,g,d){if(typeof g=="object"){d=g;g=0}if(typeof d=="function"){d={onAfter:d}}if(h=="max"){h=9000000000}d=f.extend({},c.defaults,d);g=g||d.speed||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue){g/=2}d.offset=e(d.offset);d.over=e(d.over);return this._scrollable().each(function(){var v=this,n=f(v),o=h,l,m={},j=n.is("html,body");switch(typeof o){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(o)){o=e(o);break}o=f(o,this);case"object":if(o.is||o.style){l=(o=f(o)).offset()}}f.each(d.axis.split(""),function(u,w){var y=w=="x"?"Left":"Top",x=y.toLowerCase(),A="scroll"+y,t=v[A],q=c.max(v,w);if(l){m[A]=l[x]+(j?0:t-n.offset()[x]);if(d.margin){m[A]-=parseInt(o.css("margin"+y))||0;m[A]-=parseInt(o.css("border"+y+"Width"))||0}m[A]+=d.offset[x]||0;if(d.over[x]){m[A]+=o[w=="x"?"width":"height"]()*d.over[x]}}else{var z=o[x];m[A]=z.slice&&z.slice(-1)=="%"?parseFloat(z)/100*q:z}if(/^\d+$/.test(m[A])){m[A]=m[A]<=0?0:Math.min(m[A],q)}if(!u&&d.queue){if(t!=m[A]){k(d.onAfterFirst)}delete m[A]}});k(d.onAfter);function k(q){n.animate(m,g,d.easing,q&&function(){q.call(this,h,d)})}}).end()};c.max=function(j,k){var o=k=="x"?"Width":"Height",n="scroll"+o;if(!f(j).is("html,body")){return j[n]-f(j)[o.toLowerCase()]()}var q="client"+o,g=j.ownerDocument.documentElement,d=j.ownerDocument.body;return Math.max(g[n],d[n])-Math.min(g[q],d[q])};function e(d){return typeof d=="object"?d:{top:d,left:d}}})(jQuery);if(!window.console){window.console=new function(){this.log=function(c){};this.dir=function(c){};this.debug=function(c){};this.info=function(c){};this.warn=function(c){};this.table=function(c){};this.trace=function(){};this.time=function(c){};this.timeEnd=function(c){};this.info=function(c){}}}booking[sNSStartup].anchorJump={priority:9,init:function(){if($("#newsletterbox .error").length){location.href=location.href+"#errormsg"}$(".forgotten a, a.forgotten").click(function(){window.open(this.href,"","toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=yes,resizable=1,width=500,height=500,left=200,top=200");return false})}};booking[sNSStartup].search_autocomplete={target:$("#destination"),priority:9,init:function(){this.initializeAutocomplete()},initElse:function(){this.initializeAutocomplete()},initializeAutocomplete:function(){var d=this,c=function(){booking.env.trackExperiment(booking.env.autocomplete_values);d.target.unbind("keypress",d.handler)};this.target.keypress(c)}};(function(){var d=booking.env,c=booking[sNSStartup].calendar={priority:9,version:1.4,datefmt:"YYYY MM DD",minimalDays:1,maximalDays:30,oldDays:1,from:{date:null,day:null,month:null,year:null},till:{date:null,day:null,month:null,year:null},viewDateFrom:new Date(),viewDateTill:new Date(),oneDayInMS:86400000,calendars:[],calendarTypes:{checkin_day:{isTill:false,isDay:true},checkin_monthday:{isTill:false,isDay:true},checkin_year_month:{isTill:false,isDay:false},pre_checkin_year_month:{isTill:false,isDay:false},checkout_day:{isTill:true,isDay:true},checkout_monthday:{isTill:true,isDay:true},checkout_year_month:{isTill:true,isDay:false},pre_checkout_year_month:{isTill:true,isDay:false}},maxMonthsInFuture:12,maxDaysInFuture:365,maxDaysInThePast:1,syncDate:null,userServDate:false,hasDataRange:false,dateFormat:function(k,x,t){var l=/D{1,4}|M{1,4}|YY(?:YY)?/g,j=function(y,m){y=String(y);m=m||2;while(y.length<m){y="0"+y}return y};var h=this;if(arguments.length==1&&Object.prototype.toString.call(k)=="[object String]"&&!/\d/.test(k)){x=k;k=undefined}k=k?new Date(k):new Date;if(isNaN(k)){throw SyntaxError("invalid date")}x=String(x||h.datefmt);if(x.slice(0,4)=="UTC:"){x=x.slice(4);t=true}var v=t?"getUTC":"get",o=k[v+"Date"](),e=k[v+"Day"](),g=k[v+"Month"](),q=k[v+"FullYear"](),u=k[v+"Hours"](),n=k[v+"Minutes"](),w=k[v+"Seconds"](),f={D:o,DD:j(o),DDD:d.b_simple_weekdays_for_js[(e+6)%7],DDDD:d.b_long_weekdays[(e+6)%7],M:g+1,MM:j(g+1),MMM:d.b_short_months_abbr[g],MMMM:d.b_short_months[g],YY:String(q).slice(2),YYYY:q};return x.replace(l,function(m){return m in f?f[m]:m.slice(1,m.length-1)})},searchMinDays:function(e){this.minimalDays=e},maxYearsInFuture:function(){this.today=this.noHourDate(null);this.maxMonthsInFuture=12;if(d.b_site_variant_calendar_days_allowed_fix){this.maxDaysInFuture=parseInt(d.calendar_days_allowed_number)}else{this.maxDaysInFuture=365}if(d.b_site_experiment_rolling_calendar_year){if(this.maxMonthsInFuture<13){this.maxMonthsInFuture=13}}this.tomorrow=this.dateAfterDays(this.today,1);this.endOfYear1=this.dateAfterDays(this.today,this.maxDaysInFuture);this.endOfYear2=this.dateAfterDays(this.today,this.maxDaysInFuture-1)},setPast:function(e){this.maxDaysInThePast=e},syncDates:function(e,f,l,h,k){if(!k){$("#availcheck").attr("checked",false);$("#define_group input, #define_group select").removeAttr("disabled");$("#define_group").removeClass("disableme")}if(e){this.till.day=(f==null)?this.till.day:f;this.till.month=(l==null)?this.till.month:l;this.till.year=(h==null)?this.till.year:h;if(this.till.day!=null&&this.till.month!=null&&this.till.year!=null){this.till.date=new Date(this.till.year+"/"+this.till.month+"/"+this.till.day+" 00:00:00");this.viewDateTill=new Date(this.till.year+"/"+this.till.month+"/"+this.till.day+" 00:00:00")}}else{this.hasDataRange=true;this.from.day=(f==null)?this.from.day:f;this.from.month=(l==null)?this.from.month:l;this.from.year=(h==null)?this.from.year:h;if(this.from.day!=null&&this.from.month!=null&&this.from.year!=null){this.from.date=new Date(this.from.year+"/"+this.from.month+"/"+this.from.day+" 00:00:00");this.viewDateFrom=new Date(this.from.year+"/"+this.from.month+"/"+this.from.day+" 00:00:00")}}var j=false;if(!e&&this.from.date!=null){if(this.till.date!=null){if(this.till.date<=this.from.date){if(booking.env.b_site_experiment_av_calendar&&booking.avCalendar.isCheckInAvailable(this.from)){this.till.date=new Date(booking.avCalendar.getFirstAvailableCheckOut(this.from)+" 00:00:00")}else{this.till.date=this.dateAfterDays(this.from.date,this.oldDays)}j=true}else{if(booking.env.b_site_experiment_av_calendar&&booking.avCalendar.isCheckOutAvailable(this.from,this.till)===false){this.till.date=new Date(booking.avCalendar.getFirstAvailableCheckOut(this.from)+" 00:00:00");j=true}}}else{if(!k){if(booking.env.b_site_experiment_av_calendar&&booking.avCalendar.isCheckInAvailable(this.from)){this.till.date=new Date(booking.avCalendar.getFirstAvailableCheckOut(this.from)+" 00:00:00")}else{this.till.date=this.dateAfterDays(this.from.date,this.minimalDays)}j=true}}}else{if(e&&this.till.date!=null){if(this.from.date==null){if(!k){this.from.date=this.dateAfterDays(this.till.date,~(this.minimalDays-1));j=true}}}}if(j){if(!e){this.till.year=this.till.date.getFullYear();this.till.month=this.till.date.getMonth()+1;this.till.day=this.till.date.getDate();this.viewDateTill=new Date(this.till.year+"/"+this.till.month+"/"+this.till.day+" 00:00:00")}else{this.from.year=this.from.date.getFullYear();this.from.month=this.from.date.getMonth()+1;this.from.day=this.from.date.getDate();this.viewDateFrom=new Date(this.from.year+"/"+this.from.month+"/"+this.from.day+" 00:00:00")}}if(booking.env.b_site_experiment_omni_search){this.updateOmniLabels()}for(var g=0;g<this.calendars.length;g++){$(this.calendars[g]).trigger("changed_date",[e,j])}},updateCalendarTables:function(e){if($(e).hasClass("calendarTill")){this.rebuildCalendarTable($("table",e).get(0),true,this.viewDateTill.getMonth()+1,this.viewDateTill.getFullYear())}else{this.rebuildCalendarTable($("table",e).get(0),false,this.viewDateFrom.getMonth()+1,this.viewDateFrom.getFullYear())}},init:function(){if(this.calendarReady){return}this.calendarReady=true;if(d.b_site_experiment_fix_user_dates){var g=d.b_current_datetime;this.syncDate=g.replace(/-/gi,"/");var h=new Date(this.syncDate);h.setDate(h.getDate()+1);var f=new Date();this.syncDate=new Date(this.syncDate);this.syncDate.setDate(this.syncDate.getDate()-0.5);if(h<f){this.userServDate=true;this.viewDateFrom=new Date(this.syncDate);this.viewDateTill=new Date(this.syncDate)}else{var e=new Date(this.syncDate);e.setDate(e.getDate()-1);if(e>f){this.userServDate=true;this.viewDateFrom=new Date(this.syncDate);this.viewDateTill=new Date(this.syncDate)}}}this.maxYearsInFuture();this.initAddHandlers();if(booking.env.b_site_experiment_omni_search){this.updateOmniLabels()}},initAddHandlers:function(){var e=this;$("select").each(function(){if(e.calendarTypes[$(this).attr("name")]){e.calendars.push(this);var f=$(this).val();if(f!="0"){var h=e.calendarTypes[$(this).attr("name")];if(h.isDay){if(h.isTill){e.till.day=f}else{e.from.day=f}}else{var g=f.split("-");if(g.length&&g.length>0){if(h.isTill){e.till.year=g[0];e.till.month=g[1]}else{e.from.year=g[0];e.from.month=g[1]}}}}$(this).bind("changed_date",function(k,j,m){$("input",this.parentNode).each(function(){if(e.calendarTypes[$(this).attr("name")]){var n=e.calendarTypes[$(this).attr("name")];if(n.isDay&&n.isTill&&e.till.day!=null){$(this).val(e.till.day)}if(n.isDay&&!n.isTill&&e.from.day!=null){$(this).val(e.from.day)}if(!n.isDay&&n.isTill&&e.till.month!=null&&e.till.year!=null){$(this).val(e.till.year+"-"+e.till.month)}if(!n.isDay&&!n.isTill&&e.from.month!=null&&e.from.year!=null){$(this).val(e.from.year+"-"+e.from.month)}}});var l=e.calendarTypes[$(this).attr("name")];if(((j||m)&&l.isTill)||((!j||m)&&!l.isTill)){if(l.isDay){if((l.isTill&&e.till.year!=null&&e.till.month!=null)||(!l.isTill&&e.from.year!=null&&e.from.month!=null)){e.rebuildDaySelect(this,l.isTill)}}else{if(l.isTill&&e.till.year!=null&&e.till.month!=null){e.selectOption(this,e.till.year+"-"+e.till.month)}else{if(!l.isTill&&e.from.year!=null&&e.from.month!=null){e.selectOption(this,e.from.year+"-"+e.from.month)}}}}});$(this).change(function(){var m=e.calendarTypes[$(this).attr("name")];var l=$(this).val();var k=l.split("-");if(l!="0"){if($(this).parents(".newcalendar").length){var j=$(this).parents(".newcalendar");if(k.length&&k.length>1){if($(this).parents(".calendarTill").length){e.viewDateTill=new Date(k[0]+"/"+k[1]+"/"+e.viewDateTill.getDate()+" 00:00:00");e.rebuildCalendarTable($("table",j).get(0),true,e.viewDateTill.getMonth()+1,e.viewDateTill.getFullYear())}else{e.viewDateFrom=new Date(k[0]+"/"+k[1]+"/"+e.viewDateFrom.getDate()+" 00:00:00");e.rebuildCalendarTable($("table",j).get(0),false,e.viewDateFrom.getMonth()+1,e.viewDateFrom.getFullYear())}}}else{e.syncDates(m.isTill,(m.isDay)?l:null,(m.isDay)?null:((k.length&&k.length>1)?k[1]:null),(m.isDay)?null:k[0])}}})}});$(".newcalendar").each(function(){if($(this).hasClass("calendarTill")){e.rebuildCalendarTable($("table",this).get(0),true,e.viewDateTill.getMonth()+1,e.viewDateTill.getFullYear())}else{e.rebuildCalendarTable($("table",this).get(0),false,e.viewDateFrom.getMonth()+1,e.viewDateFrom.getFullYear())}e.calendars.push(this);$(this).bind("changed_date",function(g,f,j){if($(this).hasClass("calendarTill")){if(e.till.month!=null&&e.till.year!=null){var h=(e.till.day)?e.till.day:1;e.viewDateTill=new Date(e.till.year+"/"+e.till.month+"/"+h+" 00:00:00");e.rebuildCalendarTable($("table",this).get(0),true,e.till.month,e.till.year)}}else{if(e.from.month!=null&&e.from.year!=null){var h=(e.from.day)?e.from.day:1;e.viewDateFrom=new Date(e.from.year+"/"+e.from.month+"/"+h+" 00:00:00");e.rebuildCalendarTable($("table",this).get(0),false,e.from.month,e.from.year)}}e.updateLabels()});$("td",this).live("click",function(){if(parseInt($(this).text())>0){if($("a",this).length){if($(this).parents(".calendarTill").length){e.syncDates(true,$(this).text(),e.viewDateTill.getMonth()+1,e.viewDateTill.getFullYear())}else{e.syncDates(false,$(this).text(),e.viewDateFrom.getMonth()+1,e.viewDateFrom.getFullYear())}if(!d.b_site_experiment_groups_number_rooms){$("#define_group").show()}e.closePopupCalendar()}}e.checkFormPost();return false});$(".nextmonth",this).bind("click",function(){if(!$(this).hasClass("disabled")){var f=$(this).parents(".newcalendar").get(0);if($(this).parents(".calendarTill").length){e.viewDateTill=e.dateAfterDays(e.viewDateTill,0,1);e.rebuildCalendarTable($("table",f).get(0),true,e.viewDateTill.getMonth()+1,e.viewDateTill.getFullYear())}else{e.viewDateFrom=e.dateAfterDays(e.viewDateFrom,0,1);e.rebuildCalendarTable($("table",f).get(0),false,e.viewDateFrom.getMonth()+1,e.viewDateFrom.getFullYear())}}this.blur();return false});$(".prevmonth",this).bind("click",function(){if(!$(this).hasClass("disabled")){var f=$(this).parents(".newcalendar").get(0);if($(this).parents(".calendarTill").length){e.viewDateTill=e.dateAfterDays(e.viewDateTill,0,-1);e.rebuildCalendarTable($("table",f).get(0),true,e.viewDateTill.getMonth()+1,e.viewDateTill.getFullYear())}else{e.viewDateFrom=e.dateAfterDays(e.viewDateFrom,0,-1);e.rebuildCalendarTable($("table",f).get(0),false,e.viewDateFrom.getMonth()+1,e.viewDateFrom.getFullYear())}}this.blur();return false});$("select",this).each(function(){var f=$(this).attr("name");var g=$(this).val();if(e.calendarTypes[f]){if(!e.calendarTypes[f].isDay){$(this).attr("name","pre_"+f);$(this.parentNode).append('<input type="hidden" name="'+f+'" value="'+g+'" />')}}else{$(this).change(function(){var h=$(this).val();if(h!="0"){var j=h.split("-");if(j.length&&j.length>0){oCalendar=$(this).parents(".newcalendar");if($(this).parents(".calendarTill").length){e.viewDateTill=new Date(j[0]+"/"+j[1]+"/1 00:00:00");e.rebuildCalendarTable($("table",oCalendar).get(0),true,j[1],j[0])}else{e.viewDateFrom=new Date(j[0]+"/"+j[1]+"/1 00:00:00");e.rebuildCalendarTable($("table",oCalendar).get(0),false,j[1],j[0])}}}})}})});$(".calendarLink").click(function(){if(booking.env.b_site_experiment_omni_search){$("body").trigger("click");if($(".when","#frm").hasClass("has_omni_error")){$(".when","#frm").removeClass("has_omni_error")}}window.calendarRef=$(this).parent().attr("class");e.openPopupCalendar(this);return false});$(".calendar_close").click(function(){e.closePopupCalendar();return false});if(this.from.year!=null&&this.from.month!=null&&this.from.day!=null){e.syncDates(false,this.from.day,this.from.month,this.from.year,true)}if(this.till.year!=null&&this.till.month!=null&&this.till.day!=null){e.syncDates(true,this.till.day,this.till.month,this.till.year,true)}if(window.location.hash=="#auto_open_checkout"){$("#auto_open_checkout a").click()}},checkFormPost:function(){if($("."+window.calendarRef+" .submit_on_change").length){if(booking.env.b_action=="hotel"){if(window.calendarRef=="dealCheckinDate"&&$("#hotelpage_availform").attr("action").indexOf("#")>-1){var e=$("#hotelpage_availform").attr("action").split("#")[0];$("#hotelpage_availform").attr("action",e)}$("#hotelpage_availform").submit()}else{$("#frm").submit()}}},updateLabels:function(){var f=Math.round((this.noHourDate(this.till.date)-this.noHourDate(this.from.date))/this.oneDayInMS);if(f>0){if(d.night&&d.nights){var e=(f==1)?1+" "+d.night:d.nights.replace("{amount}",f);if(e.indexOf(f)<0){e=f+" "+e}if($(".dayamount").length){$(".dayamount").text(e)}if($(".no_nights_helper").length){$(".no_nights_helper").text("("+e+")")}}}if($(".calendarFrom").length){$(".calendarFrom .ct_month").text(d.b_short_months[parseInt(this.from.month)-1]);$(".calendarFrom .ct_day").text(this.from.day);if($(".calendarTill").length){$(".calendarTill .ct_month").text(d.b_short_months[parseInt(this.till.month)-1]);$(".calendarTill .ct_day").text(this.till.day)}}},updateOmniLabels:function(){var g=$("#checkin_day option:selected").val()!="0"||$("#checkout_day option:selected").val()!="0";if(g&&this.from.day&&this.till.day){var e=booking.formatter.date(this.from.month+"-"+this.from.day+"-"+this.from.year);var f=booking.formatter.date(this.till.month+"-"+this.till.day+"-"+this.till.year);if($(".checkin .placeholder","#frm").length>0&&$(".checkout .placeholder","#frm").length>0){$(".checkin").addClass("filled").find(".placeholder").text(e);$(".checkout").addClass("filled").find(".placeholder").text(f)}else{$("fieldset.when label.checkin","#frm").addClass("filled").append('<button class="placeholder theme">'+e+"</button>");$("fieldset.when label.checkout","#frm").addClass("filled").append('<button class="placeholder theme">'+f+"</button>")}}else{if(!($(".checkin .placeholder","#frm").length>0&&$(".checkout .placeholder","#frm").length>0)){$("fieldset.when label.checkin","#frm").append('<button class="placeholder theme">'+booking.env.b_omni_map_checkin+"</button>");$("fieldset.when label.checkout","#frm").append('<button class="placeholder theme">'+booking.env.b_omni_map_checkout+"</button>")}}},updatePrevNextLinks:function(e,f){var j=this;var h=this.dateAfterDays(this.tomorrow,(this.maxDaysInFuture-2));var g=($(f).parents(".calendarTill").length)?this.viewDateTill:this.viewDateFrom;$(".nextmonth",f.parentNode).each(function(){if(j.dateAfterDays(g,0,1,true)>h){$(this).addClass("disabled")}else{$(this).removeClass("disabled")}});$(".prevmonth",f.parentNode).each(function(){if(j.dateAfterDays(g,0,-1,true)<j.tomorrow){$(this).addClass("disabled")}else{$(this).removeClass("disabled")}});this.selectOption($("select",f.parentNode),g.getFullYear()+"-"+(g.getMonth()+1))},rebuildCalendarTable:function(g,h,w,x){var e=$(g).parents(".newcalendar");var u=document.createElement("table");$(u).html(g.innerHTML);var v=booking.env.b_site_experiment_av_calendar&&e.hasClass("avCalendar");if(h&&v&&this.from.date){$(".avCalendar_pick_checkin").hide();$(".avCalendar.calendarTill").show()}var y=parseInt(new Date(x+"/"+w+"/1").getDay())-2;if(d.calendar_sunday_first_day_for_us){y+=1}else{if(y<0){y=7+y}}var q=u.getElementsByTagName("td");for(var o=0;o<42;o++){var n=o-y;var f=q[o];if(n>0&&n<=this.getDaysInMonth(w,x)){var k=new Date(x+"/"+w+"/"+n+" 00:00:00");if(k<this.today||(h&&k<this.tomorrow)||k>this.endOfYear1||(!h&&k>this.endOfYear2)){if(k-this.today==0&&!v){f.innerHTML='<span class="today">'+n+"</span>"}else{f.innerHTML="<span>"+n+"</span>"}}else{var t="";if(v){if((k-this.till.date==0&&h)||(k-this.from.date==0&&!h)){t+=" selected"}if(!h&&booking.avCalendar.isDateInRange({year:x,month:w,day:n})){t+=booking.avCalendar.isCheckInAvailable({year:x,month:w,day:n})?" has_av":" no_av"}if(h&&this.from.day&&booking.avCalendar.isDateInRange(this.from)){t+=booking.avCalendar.isCheckOutAvailable(this.from,{year:x,month:w,day:n})?" has_av":" no_av"}}else{if(k-this.today==0){t+=" today"}if(k-this.till.date==0){t+=h?" selected":" endsel"}if(k-this.from.date==0){t+=h?" endsel":" selected"}if(k<this.till.date&&k>this.from.date){t+=" inbetween"}}if(booking.env.b_fd_hotel_dates){for(var m=0;m<booking.env.b_fd_hotel_dates.length;m++){if(booking.env.b_fd_hotel_dates[m]){$.lst=booking.env.b_fd_hotel_dates[m].split("-");var l=new Date(Number($.lst[0]),Number($.lst[1])-1,Number($.lst[2]));if(k-l==0){t+=" flashdeals"}}}}f.innerHTML='<a href="#" class="'+t+'">'+n+"</a>"}}else{f.innerHTML="&nbsp;"}}$(g).html(u.innerHTML);this.updatePrevNextLinks(true,g)},rebuildDaySelect:function(g,e){var l="&nbsp;";if(e){var n=this.till.month;var o=this.till.year;var j=this.till.day;if(j==null||booking.env.keep_day_month){if(!((n==booking.env.b_this_month)&&(o>booking.env.b_this_year4)&&(k>(booking.env.b_this_day-1))&&booking.env.b_site_experiment_rolling_calendar_year)){l='<option style="text-transform:capitalize;" value="0">'+d.day+"</option>"}}}else{var n=this.from.month;var o=this.from.year;var j=this.from.day;if(j==null||booking.env.keep_day_month){if(!((n==booking.env.b_this_month)&&(o>booking.env.b_this_year4)&&(k>(booking.env.b_this_day-2))&&booking.env.b_site_experiment_rolling_calendar_year)){l='<option style="text-transform:capitalize;" value="0">'+d.day+"</option>"}}}$(g).html(l);var q=this.getDaysInMonth(n,o);for(var k=1;k<=q;k++){var f=new Date(o+"/"+n+"/"+k+" 00:00:00");var h=(f.getDay()>0)?f.getDay()-1:6;var m=d.b_simple_weekdays_for_js[h]+" "+k;if((d.b_lang=="ja")||(d.b_lang=="zh")||(d.b_lang=="ko")||(d.b_lang=="hu")){m=k+" "+d.b_simple_weekdays_for_js[h]}if(!((n==booking.env.b_this_month)&&(o>booking.env.b_this_year4)&&(((k>(booking.env.b_this_day-2))&&!e)||((k>(booking.env.b_this_day-1))&&e))&&booking.env.b_site_experiment_rolling_calendar_year)){$(g).append('<option value="'+k+'"'+((j==k)?' selected="selected"':"")+">"+m+"</option>")}}},noHourDate:function(f){var e=(typeof f==="undefined"||f===null)?(this.userServDate?new Date(this.syncDate):new Date()):f;e.setHours(0);e.setMilliseconds(0);e.setMinutes(0);e.setSeconds(0);return e},getDaysInMonth:function(g,e){var f=[31,(function(){return((((e%4)===0)&&((e%100)!==0)||((e%400)===0))?29:28)})(),31,30,31,30,31,31,30,31,30,31];return f[g-1]},selectOption:function(j,n,k){var f=$(j).parents(".newcalendar");var m=booking.env.b_site_experiment_av_calendar&&f.hasClass("avCalendar");var g=false;var q=$("option",j);var h,e,o;for(var l=0;l<q.length;l++){h=q[l];e=$(h);o=e.text();if(n&&n!=""){if(e.val()==n){h.selected=true;g=true;if(m){f.find(".avCalendar_month").text(o)}}else{q[l].selected=false}}if(k&&k!=""){if(o==n){h.selected=true;g=true;if(m){f.find(".avCalendar_month").text(o)}}else{h.selected=false}}}return g},dateAfterDays:function(o,j,l,n){var e=this.oneDayInMS*j;var k=12;if(n){o.setDate(1)}if(l){var f=this.noHourDate(o);if(l>k||l<-1*k){o.setFullYear(o.getFullYear()+parseInt(l/k));l=l%k}if(l!=0){var g=o.getMonth();if(g+l>k){o.setFullYear(o.getFullYear()+1);o.setMonth((g+l)-k)}else{if(g+l<0){o.setFullYear(o.getFullYear()-1);o.setMonth((g+l)+k)}else{o.setMonth(g+l)}}}}var h=new Date((this.noHourDate(o)*1)+e);if(o.getTimezoneOffset()!=h.getTimezoneOffset()){var m=o.getTimezoneOffset()-h.getTimezoneOffset();m=((m<0)?~m+1:m)*60*1000;if(m>0){h=new Date((this.noHourDate(o)*1)+e+m)}}return h},setPosition:function(g){var f=$(g).offset(),h=10,e=f.top+h;leftPos=f.left,$window=$(window),windowHeight=$window.height(),windowWidth=$window.width(),documentScrollTop=$(document).scrollTop();if(booking.env.b_site_experiment_omni_search){e=e+5}if(d.rtl){leftPos=leftPos-211}if(windowWidth<leftPos+230){if(windowWidth-230>0){leftPos=windowWidth-230}}if(windowHeight+documentScrollTop<e+230){if(e-documentScrollTop-250>0){e=e-250}else{e=windowHeight+documentScrollTop-250}}$("#calendar_popup").css({top:e+"px",left:leftPos+"px"})},scrollHandlers:[],openPopupCalendar:function(h){var f=$("#calendar_popup").get(0),k=$(window),j,e=this;var g="";switch(h.nodeName.toLowerCase()){case"a":g=h.href.split("#")[1];break;case"input":g=h.name;break;case"select":g=h.name;break;case"label":g=h.getAttribute("data-title");break;default:break}j=function(){e.setPosition(h)};this.scrollHandlers.push(j);this.setPosition(h);k.bind("scroll resize",j);$("#calendar_popup").show();if(this.calendarTypes[g]&&this.calendarTypes[g].isTill){$(f).addClass("calendarTill");this.rebuildCalendarTable($("table",f).get(0),true,this.viewDateTill.getMonth()+1,this.viewDateTill.getFullYear())}else{$(f).removeClass("calendarTill");this.rebuildCalendarTable($("table",f).get(0),false,this.viewDateFrom.getMonth()+1,this.viewDateFrom.getFullYear())}if(booking.env.b_site_experiment_omni_search){$(".calendar_close","#calendar_popup").remove();$("#calendar_popup").append($("#no_dates"))}$("body").bind("close_calendar",this.closeHandler)},closeHandler:function(){c.closePopupCalendar()},closePopupCalendar:function(){var e,g,f;$("#calendar_popup").removeClass("calendarTill").hide();$("body").unbind("close_calendar",this.closeHandler);for(e=0,g=this.scrollHandlers.length;e<g;e+=1){f=this.scrollHandlers[e];if(typeof f==="function"){$window.unbind("scroll resize",f)}}this.scrollHandlers=[]}}})();booking[sNSStartupLoad].change_dates={priority:9,init:function(){if(typeof trigger_error_template_event_tracking!="undefined"&&trigger_error_template_event_tracking===true){booking.google.trackEvent(booking.google.pageviewTracker,"Error Template (Aggregate)",b_errors);if(b_this_referer!=""){booking.google.trackEvent(booking.google.pageviewTracker,"Error Template (Referrer)",b_this_referer+" - "+b_errors)}booking.google.trackEvent(booking.google.pageviewTracker,"Error Template (RequestURL)",b_this_url+" - "+b_errors)}if(booking.env.b_page="send_change_dates"){$("#message_changing-dates").fadeIn();$("#change_dates").submit(function(){var e=$("input[name=do]");var c=$("#change_dates input[name=checkin_date]").val();var d=$("#change_dates input[name=checkout_date]").val();if(c&&d&&(c.length>0||d.length>0)){cin_yymm=$("#checkin_year_month").val();cin_dd=$("#checkin_day").val();cin_yymmdd=cin_yymm+"-"+cin_dd;cout_yymm=$("#checkout_year_month").val();cout_dd=$("#checkout_monthday").val();cout_yymmdd=cout_yymm+"-"+cout_dd;a=c.replace(/-0/g,"-");b=d.replace(/-0/g,"-");if(a!=cin_yymmdd||b!=cout_yymmdd){e.val("dochangedates")}}})}}};booking[sNSStartup].cookie_warning={priority:10,init:function(){if(booking.env.cookie_warning&&!$.cookie("cookie_notice_shown")){var d=$("#cookie_warning");d.show();var c=function(){if(typeof(JSON)!="undefined"){$.cookie("cookie_notice_shown",1,{expires:365,path:"/",domain:booking.env.b_domain_end})}};$("#cookie_warning a").click(function(e){c();if($(this).hasClass("close_warning")){d.fadeOut("1000",function(){$(this).remove()});booking.google.trackEvent(booking.google.clickTracker,"Cookie warning","Close");e.preventDefault()}else{booking.google.trackEvent(booking.google.clickTracker,"Cookie warning","Read")}})}}};function switchDateStack(c,e){var d=c;if($(c).parents("div").length){d=$(c).parents("div").get(0)}var f=0;while(d){if(d.nodeName.toLowerCase()=="div"){f++;if(f==e){d.style.display="block"}}d=d.nextSibling}}function switchDateFlashDeal(c,d){$("div#editDates").css("display","block");$("div#available_rooms_header1").css("display","none")}booking[sNSStartup].validatedate={priority:9,init:function(){$("#frm, #hotelpage_availform").submit(function(){var d=booking[sNSStartup].validatedate.validate(this),c=!d?"Form:NotValid":"Form:Valid";if(!d&&this.id==="hotelpage_availform"){fminit("hotelpage_availform")}$(window).trigger(c,{form:this});return d});$("#fd_dates, #fd_flashdeals").submit(function(){return booking[sNSStartup].validatedate.validate(this)});$("#labfor").click(function(){checkbox_status="";if($("#availcheck").is(":checked")){checkbox_status="Uncheck"}else{checkbox_status="Check"}booking.google.trackEvent(booking.google.clickTracker,booking.env.b_action+" | searchbox checkbox",checkbox_status)})},validate:function(oForm){var sError="";var today=new Date();var sErrorIsNeedDates=false;if(booking.env.b_site_experiment_fix_user_dates){var checkUserDate=booking.env.b_current_datetime;syncDate=checkUserDate.replace(/-/gi,"/");var checkTomorrow=new Date(syncDate);checkTomorrow.setDate(checkTomorrow.getDate()+1);if(checkTomorrow<today){today=new Date(syncDate)}else{var checkYesterday=new Date(syncDate);checkYesterday.setDate(checkYesterday.getDate()-1);if(checkTomorrow>today){today=new Date(syncDate)}}}today.setHours("0");today.setMinutes("0");today.setSeconds("0");today.setMilliseconds("0");if($("select[name=checkin_monthday]",oForm).length&&$("select[name=checkin_year_month]",oForm).length&&$("select[name=checkout_monthday]",oForm).length&&$("select[name=checkout_year_month]",oForm).length){if($("#availcheck:checked").length){if(booking.env.b_site_experiment_omni_search){if($("#no_dates","#calendar_popup").length>0){$(".when .field","#frm").append($("#no_dates"))}}return true}var oCheckinD=$("select[name=checkin_monthday]",oForm).get(0);var oCheckinYM=$("select[name=checkin_year_month]",oForm).get(0);var oCheckoutD=$("select[name=checkout_monthday]",oForm).get(0);var oCheckoutYM=$("select[name=checkout_year_month]",oForm).get(0);var checkinYM=$(oCheckinYM).val();var checkinD=parseInt($(oCheckinD).val());var checkoutYM=$(oCheckoutYM).val();var checkoutD=parseInt($(oCheckoutD).val());if((typeof checkinYM!="undefined")){var checkinY=checkinYM.split("-")[0];var checkoutY=checkoutYM.split("-")[0];var checkinM=parseInt(checkinYM.split("-")[1]);var checkoutM=parseInt(checkoutYM.split("-")[1]);var checkin=new Date(checkinY,checkinM-1,checkinD);var checkout=new Date(checkoutY,checkoutM-1,checkoutD);if(checkinYM=="0"||checkinD=="0"){if(checkoutYM=="0"||checkoutD=="0"){sError=booking.env.to_check_availability_please_enter_your_dates_of_stay;if(booking.env.b_site_experiment_remove_no_dates_box){sError+=' <a href="#" id="swd">'+booking.env.click_here_to_search_without_dates+"</a>"}sErrorIsNeedDates=true}else{sError=booking.env.please_enter_your_check_in_date}}else{if(checkoutYM=="0"||checkoutD==0){sError=booking.env.please_enter_your_check_out_date}else{if((checkinY>checkoutY)||((checkinY==checkoutY)&&(eval(checkinYM)<eval(checkoutYM)))||((checkinYM==checkoutYM)&&(checkinD>checkoutD))){sError=booking.env.error.checkout_date_not_after_checkin_date.name}}}if(sError==""){if(checkin.getTime()<today.getTime()&&!(checkin.getTime()>today.getTime()-86400005&&booking.env.b_site_experiment_fix_timezone_error)){sError=booking.env.error.checkin_date_in_the_past.name}else{if((checkout-checkin)/86400000>30){sError=booking.env.error.checkout_date_more_than_30_days_after_checkin.name}else{if(checkin>checkout){sError=booking.env.error.checkout_date_not_after_checkin_date.name}}}}}}if(sError!=""){if($(".dateerrors",oForm).length){if(booking.env.b_site_experiment_omni_search){if($(".has_omni_error").length==0){$(".when","#frm").addClass("has_omni_error")}}var errorField=$(".dateerrors",oForm).get(0);if(sErrorIsNeedDates){if(booking.env.b_site_experiment_omni_search){if($("#no_dates","#calendar_popup").length>0){$(".when .field","#frm").append($("#no_dates"))}if($("#no_dates p","#frm").length==0){$("#no_dates","#frm").prepend('<p class="omni_error_msg">'+booking.env.view_prices_enter_dates+"</p>")}}else{$("#inout select").change(function(){$("#friendly_error_popup").remove()});$(".calendar").click(function(){$("#friendly_error_popup").remove()});$("#friendly_error_popup span.close_errormsg").live("click",function(){$("#friendly_error_popup").remove()});$("#inout .avail, .toggle_overview, .toggle_review").live("click",function(){$("#friendly_error_popup").remove()});if($("#friendly_error_popup").length==0){var last_dropdown_searchbox=$("#inout select").eq(3);if(booking.env.b_action=="hotel"||booking.env.b_action=="searchresults"){last_dropdown_searchbox=$(".leftsmall #inout select").eq(1)}var last_dropdown_offset=last_dropdown_searchbox.offset();var last_dropdown_hotelpage=$("#hotelpage_availform select").eq(3);if(booking.env.nodates_popup_up){last_dropdown_hotelpage=$("#hotelpage_availform select").eq(0)}var last_dropdown_hotelpage_offset=last_dropdown_hotelpage.offset()||{};var first_dropdown_searchbox=$("#inout select").eq(0);var first_dropdown_offset=last_dropdown_searchbox.offset();var homeinPos=($("#checkin_year_month").position().top-18);var nodates_popup_upRight=-255;if($.browser.msie&&$.browser.version==="7.0"){nodates_popup_upRight=-200}if(booking.env.b_lang=="ar"||booking.env.b_lang=="he"){var errorHTML='<div id="friendly_error_popup" style="direction:ltr;background-position:center right;top:'+homeinPos+"px;left:"+(nodates_popup_upRight+50)+'px"><div class="wrapper"><span class="close_errormsg"></span><p>'+booking.env.view_prices_enter_dates+"</p></div></div>";$("#inout").css({position:"relative","z-index":"999"}).append(errorHTML)}else{if(oForm.id=="hotelpage_availform"){if(booking.env.nodates_popup_up){var errorHTML='<div id="friendly_error_popup" class="hotelpage new_change_dates" style="top:'+(last_dropdown_hotelpage_offset.top-90)+"px;left:"+(last_dropdown_hotelpage_offset.left-150)+'px;"><div class="wrapper"><span class="close_errormsg"></span><p>'+booking.env.view_prices_enter_dates+"</p></div></div>"}else{var errorHTML='<span class="exclamation exclamation_daterrrors">&nbsp;!&nbsp;</span><p class="error errors_dateerros">'+sError+"</p>";errorField.innerHTML=errorHTML;errorField.style.display="block"}}else{var errorHTML='<div id="friendly_error_popup" style="top:'+homeinPos+"px;right:"+nodates_popup_upRight+'px"><div class="wrapper"><span class="close_errormsg"></span><p>'+booking.env.view_prices_enter_dates+"</p></div></div>";$("#inout").css({position:"relative","z-index":"999"}).append(errorHTML)}}}}}else{if(booking.env.b_site_experiment_omni_search){var errorHTML='<p class="omni_error_msg">'+sError+"</p>"}else{var errorHTML='<span class="exclamation exclamation_daterrrors">&nbsp;!&nbsp;</span><p class="error errors_dateerros">'+sError+"</p>"}errorField.innerHTML=errorHTML;errorField.style.display="block"}$("#swd").click(function(){document.getElementById("availcheck").checked="checked";document.getElementById("frm").submit();return false});return false}else{return true}}else{return true}}};function noDatesPopup(c){if(document.getElementById("checkin_day").value==0||document.getElementById("checkin_year_month").value==0||document.getElementById("checkout_monthday").value==0||document.getElementById("checkout_year_month").value==0){document.location=document.location+"#top";alert(c)}else{document.getElementById("availcheck").checked=false;document.getElementById("frm").submit()}}booking[sNSStartup].default_input_text={priority:9,init:function(){$("input.swap_text, textarea.swap_text").each(function(){if($(this).val()==""){$(this).val($(this).attr("alt"));$(this).removeClass("swapped")}else{if($(this).val()==$(this).attr("alt")){$(this).removeClass("swapped")}else{$(this).addClass("swapped")}}$(this).focus(function(){if($(this).val()==$(this).attr("alt")){$(this).val("");$(this).addClass("swapped")}}).blur(function(){if($(this).val()==""){$(this).val($(this).attr("alt"));$(this).removeClass("swapped")}});$(this).closest("form").submit(function(){$("input.swap_text, textarea.swap_text",this).each(function(){if($(this).val()==$(this).attr("alt")){$(this).val("")}})})})}};booking[sNSStartup].destinationThemes={priority:8,init:function(){$(".city_list_info").click(function(d){var c=$(this).attr("class");if($(d.target).hasClass("city_price")){booking.google.trackEvent(booking.google.clickTracker,"DestThemes","City Closed Price - "+c);return}if($(this).next(".hotels_in_city").hasClass("closed")){$(".hotels_in_city.opened").each(function(){booking.google.trackEvent(booking.google.clickTracker,"DestThemes","City Open HList - "+c);$(this).removeClass("opened");$(this).slideUp();$(this).addClass("closed");$(this).parent().find(".city_from_price").show()});$(this).next(".hotels_in_city").removeClass("closed");$(this).next(".hotels_in_city").slideDown();$(this).next(".hotels_in_city").addClass("opened");$(this).find(".city_from_price").hide()}else{if($(this).next(".hotels_in_city").hasClass("opened")){booking.google.trackEvent(booking.google.clickTracker,"DestThemes","City Close HList - "+c);$(this).next(".hotels_in_city").removeClass("opened");$(this).next(".hotels_in_city").slideUp();$(this).next(".hotels_in_city").addClass("closed");$(this).parent().find(".city_from_price").show()}}});$(".city_list_info").hover(function(){$(this).find(".cityimage_marker").addClass("hovered");$(this).find("h3.cityname").addClass("hovered");$(this).find(".city_from_price a").addClass("hovered")},function(){$(this).find(".cityimage_marker").removeClass("hovered");$(this).find("h3.cityname").removeClass("hovered");$(this).find(".city_from_price a").removeClass("hovered")});$(".hotel_block").click(function(){var d=$(this).attr("class");booking.google.trackEvent(booking.google.clickTracker,"DestThemes","Hotel: "+d);var c=$(this).find(".hotelname").attr("href");location.href=c});$(".showall_in_city").click(function(){var c=$(this).attr("class");booking.google.trackEvent(booking.google.clickTracker,"DestThemes","City Show All - "+c)})}};booking[sNSStartup].fixMail={priority:9,init:function(){var c=this;$(".encrypted").each(function(){$(this).html(c.deCode($(this).text()));$(this).removeClass("encrypted")})},deCode:function(c){return c.replace(/[a-zA-Z]/g,function(d){return String.fromCharCode((d<="Z"?90:122)>=(d=d.charCodeAt(0)+13)?d:d-26)})}};function calcage(c,e,d){s=((Math.floor(c/e))%d).toString();if(LeadingZero&&s.length<2){s="0"+s}return"<b>"+s+"</b>"}function CountBack(c){if(c<0){if(document.getElementById("cntdwn")){document.getElementById("cntdwn").innerHTML=FinishMessage;return}}else{if(c>86400){DisplayStr_days=DisplayFormat_days.replace(/%%D%%/g,calcage(c,86400,100000));document.getElementById("flash_days").innerHTML=DisplayStr_days}else{document.getElementById("flash_days_wrapper").style.display="none"}}DisplayStr_hours=DisplayFormat_hours.replace(/%%H%%/g,calcage(c,3600,24));DisplayStr_minutes=DisplayFormat_minutes.replace(/%%M%%/g,calcage(c,60,60));DisplayStr_seconds=DisplayFormat_seconds.replace(/%%S%%/g,calcage(c,1,60));document.getElementById("flash_hours").innerHTML=DisplayStr_hours;document.getElementById("flash_minutes").innerHTML=DisplayStr_minutes;document.getElementById("flash_seconds").innerHTML=DisplayStr_seconds;if(CountActive){setTimeout("CountBack("+(c+CountStepper)+")",SetTimeOutPeriod)}}if(typeof(TargetDate)=="undefined"){TargetDate="12/31/2020 5:00 AM"}if(typeof(DisplayFormat)=="undefined"){DisplayFormat="%%D%% Days, %%H%% Hours, %%M%% Minutes, %%S%% Seconds."}if(typeof(CountActive)=="undefined"){CountActive=true}if(typeof(FinishMessage)=="undefined"){FinishMessage=""}if(typeof(CountStepper)!="number"){CountStepper=-1}if(typeof(LeadingZero)=="undefined"){LeadingZero=true}CountStepper=Math.ceil(CountStepper);if(CountStepper==0){CountActive=false}var SetTimeOutPeriod=(Math.abs(CountStepper)-1)*1000+990;var dthen=new Date(TargetDate);var dnow=new Date();if(CountStepper>0){ddiff=new Date(dnow-dthen)}else{ddiff=new Date(dthen-dnow)}gsecs=Math.floor(ddiff.valueOf()/1000);if(document.getElementById("flash_seconds")){CountBack(gsecs)}booking.ensureNamespaceExists("google");booking.google.AjaxApiLoader=function(){var c=booking,e=c.env;function d(g){var f=window.location.protocol;this.script={_this:this,"@type":"text/javascript","@src":f+"//www.google.com/jsapi?oe=utf-8&"+e.b_google_maps_key_params};if(e.b_lang){this.script["@src"]+=("&hl="+e.b_lang)}if(g){this.script["@src"]+=("&callback="+g)}}return{loaded:false,load:function(f){booking.google.AjaxApiLoader.loaded=true;return c.utils.buildHtmlNode(new d(f),document.getElementsByTagName("head")[0])}}}();booking[sNSStartupLoad].google_thumbnail_map={priority:9,init:function(){var c=$("#b_google_map_thumbnail").attr("data-map");if(c){if(window.location.protocol.indexOf("s")!=-1){c=c.replace("http","https")}$("#b_google_map_thumbnail").attr("style","background-image: url("+c+");")}return true}};if(!Array.prototype.walk){Array.prototype.walk=function(e){var c=[],d=this.length;while(d--){c.push(e(this[d]))}return c.reverse()}}if(!Array.prototype.flatten){Array.prototype.flatten=function(){var d=[],e=-1,c=this.length;while(++e<c){d=d.concat(this[e].constructor==Array?this[e].flatten():this[e])}return d}}if(!Array.indexOf){Array.prototype.indexOf=function(d){for(var c=0;c<this.length;c++){if(this[c]==d){return c}}return -1}}booking.ensureNamespaceExists("google");booking.google.returnAnalyticsTrackingString=function(){var c=booking.env;var d=[];d[d.length]=c.b_this_urchin.replace(/&amp;$/,"");d[d.length]="ur_aid="+c.b_aid;d[d.length]="ur_plang="+c.b_lang_for_url;d[d.length]="ur_gstcc="+c.b_guest_country;if(c.b_search_category!=""){d[d.length]="ur_scat="+c.b_search_category}if(c.b_experiment_group){d[d.length]="ur_expgr=1"}if(c.b_action==="hotel"){if(c.b_hotel_blocks===0&&c.b_checkin_date){d[d.length]="ur_honovail=1"}d[d.length]="ur_hocc1="+c.b_countrycode;if(typeof c.b_label!="undefined"&&c.b_label.substr(0,11)=="postbooking"){d[d.length]="ur_postbknglabel="+c.b_label}}if(c.b_availability_checked||c.b_checkin_date){d[d.length]="ur_dat=1"}else{d[d.length]="ur_nodat=1"}if(c.b_action==="searchresults"){if(c.b_multiple_destinations_found){d[d.length]="ur_srdis=1"}if(typeof c.b_available_hotels!="undefined"){if(c.b_available_hotels==0){d[d.length]="ur_hc=0"}else{if(c.b_available_hotels<=20){d[d.length]="ur_hc=1"}else{d[d.length]="ur_hc=2"}}}}if(c.b_context_details){d[d.length]=c.b_context_details.walk(function(f){return["rctp="+f.b_type,"ur_srcid="+f.b_code]})}if(typeof b_first_seen!="undefined"&&b_first_seen!=""){d[d.length]="first_seen="+b_first_seen}if(c.b_yahoo_param_keyword||c.b_yahoo_param_advert||c.b_yahoo_param_campaign){d[d.length]="utm_source=yahoo";d[d.length]="utm_medium=cpc";if(c.b_yahoo_param_keyword){d[d.length]="utm_term="+c.b_yahoo_param_keyword}if(c.b_yahoo_param_advert){d[d.length]="utm_content="+c.b_yahoo_param_advert}if(c.b_yahoo_param_campaign){d[d.length]="utm_campaign="+c.b_yahoo_param_campaign}}return d.flatten().join("&amp;")};booking.ensureNamespaceExists("google");booking.google.trackEvent=function(e,f,g,d,c){if(typeof e!="undefined"){_gaq.push(["_trackEvent",e,f,g,1,true])}};booking.google.setGACustomVariable=(function(){var e,c={Map:{"Not used":1,Displayed:2,"Hotel icon clicked":3},Search:{Neither:1,Normal:2,Autocomplete:3,Both:4}};var d=function(g){var l=(g&&g.type==="Map"&&c[g.type][g.value]&&(booking.env.b_action==="hotel"||booking.env.b_action==="searchresults"||booking.env.b_is_landing_page)),j=(g&&g.type==="Search"&&c[g.type][g.value]),k,h,m=false,f;if(!(l||j)||typeof _gaq==="undefined"){return}if(g.type==="Search"){e=18}else{if(g.type==="Map"){if(booking.env.b_action==="searchresults"){e=15}else{if(booking.env.b_action==="hotel"){e=16}else{e=17}}}}if(typeof(JSON)!=="undefined"){k=JSON.parse($.cookie("bs"))||{}}h=c[g.type][g.value];if(!k.cv){k.cv={};k.cv[e]={};m=true}else{if(!k.cv[e]){k.cv[e]={};m=true}else{f=k.cv[e][g.type];if(g.type==="Map"){if(h>f){m=true}}else{if(g.type==="Search"){if((h===3&&f===2)||(h===2&&f===3)){g.value="Both";h=4;m=true}else{if(h>f){m=true}}}}}}if(m){k.cv[e][g.type]=h;_gaq.push(["_setCustomVar",e,g.type,g.value,2]);$.cookie("bs",JSON.stringify(k),{path:"/",domain:booking.env.b_domain_end})}};return d})();booking[sNSExperiments].event_tracking={priority:9,init:function(){if(typeof _gaq!="undefined"){booking.google.errorTracker="Error";booking.google.clickTracker="Click";booking.google.hoverTracker="Hover";booking.google.mapTracker="Map";booking.google.pageviewTracker="Pageview";booking.google.viewTracker="View";booking.google.cityTracker="City";booking.google.groupTracker="Group";booking.google.cardTracker="Credit Card";booking.google.comparisonTracker="Hotel Comparison";$(window).load(function(){if(booking.env.f_seen_experiments){for(var f in booking.env.f_seen_experiments){booking.google.trackEvent("Experiment",f,booking.env.f_seen_experiments[f])}}});$("body").delegate("a, .trackit","click",function(){var f="";$(this).parents(".tracked").each(function(){f=(this.id)?"#"+this.id+" > "+f:(this.className)?"."+this.className+" > "+f:this.tagName+" > "+f});if(f!=""){f=(this.id)?f+"#"+this.id:(this.className)?f+"."+this.className:f+"a";booking.google.trackEvent(booking.google.clickTracker,"Action: "+booking.env.b_action,f)}});if($("select[name^=group]").length){$("#frm").submit(function(){if($("#clear_group").val()=="1"){return}var f=$("#frm select[name=group_adults]");var g=f.length;f.each(function(){var j=this.value;var h=$(this).parent().next().find("select").val();var k=[];$("#frm input[name=age]").each(function(l){k[l]=this.value});booking.google.trackEvent(booking.google.groupTracker,"["+g+"] "+j+" adults + "+h+" children","Ages: "+k.join(", "))})});$("#clear_and_submit").click(function(){booking.google.trackEvent(booking.google.groupTracker,"Clear Group",booking.env.b_action)})}$("#select_group2").click(function(){booking.google.trackEvent(booking.google.groupTracker,"Clicked group Book button")});var e=$(".error, .errorSimpleMsg");for(var d=0;d<e.length;d++){if(!$(this).hasClass("disabled")){var c=e[d].getAttribute("rel");if(c!=null){booking.google.trackEvent(booking.google.errorTracker,"Display",c)}}}if(typeof trigger_error404_event_tracking!="undefined"&&trigger_error404_event_tracking==true){booking.google.trackEvent(booking.google.pageviewTracker,"404 Error",document.location.pathname+document.location.search+"&from="+document.referrer)}$(".filterbox a").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Filter",(this.id==="city_centre_filter_opt"?"district-city_centre":this.getAttribute("data-id")))});if(booking.env.b_action==="hotel"){$("#hcta").click(function(){var f="Hotel cta";if(booking.env.track_htca){f+=("v"+booking.env.track_htca)}booking.google.trackEvent(booking.google.clickTracker,f,this.getAttribute("data-id"))})}$("#sort_by a").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Sort",this.href.substr(this.href.indexOf("order=")+6))});$("#ccfaq").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Credit Card FAQ Popup","View")});$(".track_register").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Login","Register")});$(".track_login").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Login","Login")});if(booking.env.b_action=="hotelcomparison"){$(".back").click(function(){booking.google.trackEvent(booking.google.comparisonTracker,"Previous Page","Clicked")});$("h1 a, .hotel_comparison_header").click(function(){booking.google.trackEvent(booking.google.comparisonTracker,"Hotel Header",$(this).parent("td").eq(0).attr("class"))});$(".bigbluebutton").click(function(){booking.google.trackEvent(booking.google.comparisonTracker,"Book Now Button",$(this).parent().attr("class"))});$(".bigbluebutton.topbutton").click(function(){booking.google.trackEvent(booking.google.comparisonTracker,"Top Book Now Button on comparison_colors_buttons",$(this).parent().attr("class"))});$(".bigbluebutton.bottombutton2").click(function(){booking.google.trackEvent(booking.google.comparisonTracker,"Bottom Book Now Button on comparison_colors_buttons",$(this).parent().attr("class"))});$(".bigbluebutton.bottombutton").click(function(){booking.google.trackEvent(booking.google.comparisonTracker,"Bottom Book Now Button on comparison_colors",$(this).parent().attr("class"))});$(".remove_hotel").click(function(){booking.google.trackEvent(booking.google.comparisonTracker,"Remove and Replace",$(this).parent().attr("class"))})}$("#bookconditions").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Booking Conditions","Link clicked")});$("#bp_cart a").click(function(){booking.google.trackEvent(booking.google.clickTracker,"Shopping Cart","Link Clicked")});$("#localcurr_dis a").mouseenter(function(){booking.google.trackEvent(booking.google.clickTracker,"Action: "+booking.env.b_action,"hover_tooltip_local_currency")});if(booking.env.smart_deals_count&&booking.env.smart_deals_count>0){booking.google.trackEvent(booking.google.viewTracker,"Smart deal filter",booking.env.smart_deals_count+" deals displayed")}}return true}};booking[sNSStartup].google_pageview_tracker={priority:9,init:function(){var d=booking.env,e=d.b_action,c,f=window._gaq;if(typeof d.google_analytics_tracking_enabled!="undefined"&&d.google_analytics_tracking_enabled){$('div#survey[surveykey="'+d.survey_key+'"] button[value="accept"]').click(function(){f.push(["_trackPageview",d.surveytracklink])});if(e==="general"){$("a#jobsite").click(function(){f.push(["_trackPageview","/outgoinglink/jobsite"])})}$("#review_useful_share a").click(function(){var g;this.id=="share_any_review_fb"?g="facebook":g="twitter";g+="/"+this.getAttribute("data-id");f.push(["_trackPageview","/outgoinglink/socnet_share/review_v2/"+g]);f.push(["_trackSocial",g,"Share Review"])});$("#flash_bookmark_home").click(function(){f.push(["_trackPageview","/outgoinglink/flashdeals/bookmark"])});$(".priceline_ext_link").click(function(){f.push(["_trackPageview","/outgoinglink/priceline_name_your_price"])});$("#share_popup_inner a").click(function(){var g="hotel_share_popup/base/";if(this.id=="share_popup_fb"){g+="facebook"}else{if(this.id=="share_popup_t"){g+="twitter"}else{g+="mail_a_friend"}}f.push(["_trackPageview","/outgoinglink/socnet_share/"+g]);f.push(["_trackSocial",g,"Share"])});$("#share_hotel_history a").click(function(){var g;if(this.id=="share_hotel_history_fb"){g="facebook"}else{if(this.id=="share_hotel_history_t"){g="twitter"}else{g="mail_a_friend"}}f.push(["_trackPageview","/outgoinglink/socnet_share/hotel_history/"+g]);f.push(["_trackSocial",g,"Share History"])});if(e==="index"){$("#number_one_promotion #wua_link_logo").click(function(){f.push(["_trackPageview","/outgoinglink/wua-1"])});$("#number_one_promotion #link_jobsite_nl").click(function(){f.push(["_trackPageview","/outgoinglink/jobsite_promo_nl"])})}if(e==="confirmation"){$("#social_share_links a").click(function(){var g="base";if(this.id=="social_share_conf_facebook"){g+="/facebook";sn="facebook"}else{g+="/twitter";sn="twitter"}f.push(["_trackPageview","/outgoinglink/socnet_share/confirmation/"+g]);f.push(["_trackSocial",sn,"Share Confirmation"])});if(d.b_site_experiment_external_review_invite){$("#external_review_invite_link").click(function(){f.push(["_trackPageview","/outgoinglink/confirmation/external_review_invite/"])})}}if(/error/.test(e)){c=(d.b_referrer||"").split("?")[0].replace(window.location.origin,"")||"dont-know";f.push(["_trackPageview","/error-action/"+e+"/caused-by"+c])}if((e==="searchresults")&&d.is_ipad){$("a.filterelement").click(function(){var g=$(this).parent().parent().attr("id");g=g.substring(7);if(d.filterbox_ipad){var j="var1"}else{var j="base"}var h="/outgoinglink/filterbox_ipad_link/"+j+"/"+g+"/";f.push(["_trackPageview",h])})}}}};booking[sNSStartup].header_cleaned_links={priority:9,init:function(){$(".forgot_link_look").click(function(){if(booking.env.b_site_variant_inline_password_reminder){forgotten_url=$(this).data("href");if($("#foldout_login input#username_input_top").val()){forgotten_url=forgotten_url+";email="+$("#foldout_login input#username_input_top").val()}$(".better_login").hide();$("#current_account_foldout .select_foldout_wrap").append('<div class="reminder_iframe_wrapper"><iframe src="'+forgotten_url+'" frameborder="0" width="440" height="200"></iframe><span class="hide_reminder_iframe">&laquo; '+booking.env.transl_return_to_sign_in+"</span></div>");booking[sNSStartup].new_personal_menu.recheckHeight()}else{window.open($(this).attr("data-href"),"_blank","left=42,top=42,height=502px,width=440px,resizable=false")}});$("body").delegate(".hide_reminder_iframe","click",function(){$(this).parent(".reminder_iframe_wrapper").remove();$(".better_login").show();booking[sNSStartup].new_personal_menu.recheckHeight();oThat.openSelect("current_account")});$("#foldout_loggedin li").click(function(){var c=$(this);if(c.hasClass("seo_link_look")){window.location=c.attr("data-href")}})}};(function(c){c.idleTimer=function(m,e){var f=false,j=true,k=30000,n="mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove";e=e||document;var h=function(u){if(typeof u==="number"){u=undefined}var t=c.data(u||e,"idleTimerObj");t.idle=!t.idle;var o=(+new Date())-t.olddate;t.olddate=+new Date();if(t.idle&&(o<k)){t.idle=false;clearTimeout(c.idleTimer.tId);if(j){c.idleTimer.tId=setTimeout(h,k)}return}var q=jQuery.Event(c.data(e,"idleTimer",t.idle?"idle":"active")+".idleTimer");q.stopPropagation();c(e).trigger(q)},l=function(o){var q=c.data(o,"idleTimerObj");q.enabled=false;clearTimeout(q.tId);c(o).unbind(".idleTimer")},d=function(){var o=c.data(this,"idleTimerObj");clearTimeout(o.tId);if(o.enabled){if(o.idle){h(this)}o.tId=setTimeout(h,o.timeout)}};var g=c.data(e,"idleTimerObj")||{};g.olddate=g.olddate||+new Date();if(typeof m==="number"){k=m}else{if(m==="destroy"){l(e);return this}else{if(m==="getElapsedTime"){return(+new Date())-g.olddate}}}c(e).bind(c.trim((n+" ").split(" ").join(".idleTimer ")),d);g.idle=f;g.enabled=j;g.timeout=k;g.tId=setTimeout(h,g.timeout);c.data(e,"idleTimer","active");c.data(e,"idleTimerObj",g)};c.fn.idleTimer=function(d){if(this[0]){c.idleTimer(d,this[0])}return this}})(jQuery);booking[sNSStartup].ie6_content_width={priority:9,init:function(){if($("html.b_msie_6").length){$(window).resize(function(){var c=document.documentElement.clientWidth;document.getElementById("bodyconstraint-inner").style.width=(c<630)?"630px":((c>1094)?"1094px":(c-20)+"px")})}}};booking[sNSStartup].in_and_around_updates={priority:9,loadpos:0,savecheck:0,init:function(){var c=(booking.env.b_action=="hotel")?1:12;$(".landing .widesep ul, .hotel .in_and_around ul").each(function(){var d=$(this).find("li");if(d.length>c+2){d.eq(c).after('<li class="iaa_more"><a href="#">'+booking.env.inandaround_more+"</a></li>");d.filter(":gt("+c+")").hide()}});$("li.iaa_more a").click(function(){$(this).hide().parents("ul").find("li").show();if(booking.env.b_action!="hotel"){$("#in_and_around .masonry").masonry()}return false});if(document.getElementById("in_and_around")&&booking.env.b_action!="hotel"){$(window).resize(function(){var d=$("#in_and_around .masonry");d.masonry({itemSelector:".in_and_around",isResizable:false,columnWidth:d.width()*0.499})}).resize()}}};var JSON=JSON||{};JSON.stringify=JSON.stringify||function(g){var f=typeof(g);if(f!="object"||g===null){if(f=="string"){g='"'+g+'"'}return String(g)}else{var h,d,e=[],c=(g&&g.constructor==Array);for(h in g){d=g[h];f=typeof(d);if(f=="string"){d='"'+d+'"'}else{if(f=="object"&&d!==null){d=JSON.stringify(d)}}e.push((c?"":'"'+h+'":')+String(d))}return(c?"[":"{")+String(e)+(c?"]":"}")}};JSON.parse=JSON.parse||function(str){if(str===""){str='""'}eval("var p="+str+";");return p};if($.cookie("b")){var b_cookie=JSON.parse($.cookie("b"))||{}}else{var b_cookie={}}(function(){var d=booking.env,e=booking[sNSStartupLoad].show_language={priority:9,init:function(){var g=function(){b_cookie.langPrompt="dontshow";if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:d.b_domain_end})}};if(typeof(b_cookie)=="undefined"){b_cookie={}}$("#langselectbutton, #languageselect input").hide();$("#langselectformlist, #currList").change(function(){$("#languageselect")[0].submit();g()});$(".language_flags").click(function(){g()});if(d.show_language_suggestion){if(b_cookie.countLang){if(!isNaN(b_cookie.countLang)){var f=parseInt(parseInt(b_cookie.countLang)+1);if(f<=4){d.language_dialog_count2=f;b_cookie.countLang=d.language_dialog_count2}}else{d.language_dialog_count2=1;b_cookie.countLang=1}}else{d.language_dialog_count2=1;b_cookie.countLang=1}if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:d.b_domain_end})}if(b_cookie.langPrompt!="dontshow"&&d.language_dialog_count2<4){setTimeout(e.createAlert,2000)}}},createAlert:function(k){var l=d.show_language_suggestion,o=d.browser_lang,g=d.icons,m,q=false,h="",f="",n="";if(l){var j=230;current_currency_width=$("#current_currency").width();current_language_width=$("#current_language").width();personal_form_space=Math.round(current_currency_width+(current_language_width/2)-(j/2));if($("#languageselect .language-wrapper").length){m=$("#languageselect .language-wrapper");h="margin-top:10px;";f="top: -2px;";if(d.b_is_ie6||d.b_is_ie7){n="margin-top:25px;left:100px;"}q=true}else{m=$("#personal_form");f="top: -11px;";n="top:40px;"}m.append('<div id="lang-prompt" style="display:none;height:1px;position:absolute;z-index:50;width:'+j+"px;left:"+personal_form_space+"px;"+n+'"><div style="position:absolute;zoom:1;'+f+";left:120px;width:17px;height:13px;background:url('//q.bstatic.com/static/img/experiments/top-info-arrrow2.png');\"></div><div style=\"border:2px solid #a2bbda;padding:10px;background:#e6edf6;width:230px;-moz-box-shadow:0 1px 2px rgba(0,0,0,.7);-webkit-box-shadow:0 1px 2px rgba(0,0,0,.7);"+h+'"><a href="#" class="close" style="float:right;font-weight:normal;">'+d.transl_close_x+'</a><a href="#scs" id="lang_change_link" style="display:block;font-weight:normal;margin-right:50px;padding-left:40px;white-space:normal;background:url(\'//r.bstatic.com/static/img/flags/24/'+d.b_flag_to_suggest+".png') no-repeat;\">"+l.transl_change_page_lang_to_x+"</a></div></div>");$("#lang-prompt").fadeIn("slow");booking.google.trackEvent(booking.google.clickTracker,"Lang prompt","Show");$("#lang-prompt .close").click(function(){b_cookie.langPrompt="dontshow";if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:d.b_domain_end})}$("#lang-prompt").hide();booking.google.trackEvent(booking.google.clickTracker,"Lang prompt","Close");return false});$("#lang-prompt #lang_change_link").click(function(){b_cookie.langPrompt="dontshow";if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:d.b_domain_end})}if(q){$("#langselectformlist").val(l.suggested_lang_select);$("#languageselect")[0].submit()}else{window.location=$(".lang_"+l.suggested_lang_select).attr("data-href")}})}}};if(d.b_site_experiment_langselect_lazy_init){var c=e.init;e.init=function(){var g=$("#current_language"),f=$.proxy(function(){g.unbind("click",f);this.start()},this);g.bind("click",f)};e.start=c}})();booking.ensureNamespaceExists(sNSStartup);booking.lightbox=booking[sNSStartup].lightbox=(function(){var u;var t;var d;var n;var q;var f={bAnimation:true,bCloseButton:true,customWrapperClassName:"",customMaskClassName:"",bFullscreen:false,bNoScroll:false,hideCallBack:null};var e={};var c=function(){n.prepend(d);d.css("display",q);u.remove();t.remove();$(window).unbind("resize",l);$(document).unbind("keyup",j);if($.browser.msie&&$.browser.version<=6){$("embed, object, select").filter(function(){return $(this).closest(".modal-wrapper").length!=1}).css({visibility:"visible"})}if(e.hideCallBack){e.hideCallBack()}};var g=function(){u.css({width:$(document).width(),height:$(document).height()});if($.browser.msie&&$.browser.version<=6){u.width($(document.body).innerWidth())}var x=$(window).width(),w=$(window).height();if($.browser.msie&&($.browser.version<9)){x=x-parseInt(t.css("paddingLeft"))-parseInt(t.css("paddingRight"));w=w-parseInt(t.css("paddingTop"))-parseInt(t.css("paddingBottom"))}if(t.outerHeight()>$(window).height()){t.css("height",w)}else{t.css("height","");if(t.outerHeight()>=$(window).height()){t.css("height",w)}}if(t.outerWidth()>$(window).width()){t.css("width",x)}else{t.css("width","");if(t.outerWidth()>=$(window).width()){t.css("width",x)}}var z=0,y=0;if(!e.bFullscreen){z=Math.max(0,$(window).height()/2-t.outerHeight()/2);y=Math.max(0,$(window).width()/2-t.outerWidth()/2)}else{t.css({width:x,height:w})}var A="auto";if(e.bNoScroll){A="none"}t.css({top:z,left:y,overflow:A});if($.browser.msie&&$.browser.version<=6){k()}};var l=function(){if(t&&t.is(":visible")){g()}};var j=function(w){if(w.keyCode===27){c()}};var k=function(){var w=Math.max(0,$(window).height()/2-t.outerHeight()/2);w+=$(document).scrollTop();t.css("top",w)};var m=function(){$(".modal-wrapper .modal-mask-closeBtn").one("click",function(){c()});$(".modal-mask").one("click",function(){c()});$(document).bind("keyup",j);$(window).bind("resize",l)};var v=function(){$('<div class="modal-mask"/>').appendTo(document.body);u=$(".modal-mask");if(e.customMaskClassName.length>0){u.addClass(e.customMaskClassName)}$('<div class="modal-wrapper"/>').appendTo(document.body);t=$(".modal-wrapper");if(e.customWrapperClassName.length>0){t.addClass(e.customWrapperClassName)}t.append(d);if(e.bCloseButton){t.append($('<div class="modal-mask-closeBtn" title="'+booking.env.experiment_popups_close+'"/>'))}if(e.bFullscreen){t.addClass("modal-wrapper--fullscreen")}d.show();g();m();if($.browser.msie&&$.browser.version<=6){$(window).scroll(function(){if(t.is(":visible")){k()}})}};var o=function(x,w){if(t&&t.is(":visible")){return}e={};$.extend(e,f,w);d=$(x);n=d.parent();q=d.css("display");v();t.css("visibility","visible");if(e.bAnimation&&!($.browser.msie&&$.browser.version<=6)){u.fadeTo("slow",0.5);t.css("opacity","0").animate({opacity:1},1000,function(){$(this).css("opacity","")})}else{u.css("opacity","0.5").show()}if($.browser.msie&&$.browser.version<=6){$("embed, object, select").filter(function(){return $(this).closest(".modal-wrapper").length!=1}).css({visibility:"hidden"})}};var h=function(y,x,w,z){booking[sNSStartup].lightbox.show($("#"+z))};return{priority:5,init:function(){},show:o,hide:c,rePosition:l,open:h}}());booking[sNSStartupLoad].message_box={priority:9,init:function(){$("#self_change1 .messageBox").click(function(e){var c=$(this).children("a").attr("href");var d=/(?:\b)tmpl[\=]docs[\\\/]customer_service(?:\b)/i;if(c&&(c!="#")&&(!d.test(c))){location.href=$(this).children("a").attr("href")}return false});$("#isDifferent").fadeIn()}};booking.newsLanding=(function(){var e=function(){$(".b_msie_6 .hotel_item").hover(function(){$(this).toggleClass("hotel_item_hover")});$(".location_dropdowns select").live("focus",function(){var f=$(this).find(":selected").text();$(this).attr("oldValue",f)});$(".location_dropdowns select").change(function(){myid=$(this).attr("id");myvalue=$(this).find(":selected").val();mytext=$(this).find(":selected").text();selected=$(this).attr("oldValue");if(myvalue.length>0){if(myid=="fd_title_countryname"){track_string=booking.env.b_lang+" | Countries | "+mytext}else{if(myid=="fd_title_regionname"){track_string=booking.env.b_lang+" | Regions | "+mytext}else{if(myid=="fd_title_cityname"){track_string=booking.env.b_lang+" | Cities | "+mytext}}}}else{if(myid=="fd_title_countryname"){track_string=booking.env.b_lang+" | Countries Remove | "+selected}else{if(myid=="fd_title_regionname"){track_string=booking.env.b_lang+" | Regions Remove | "+selected}else{if(myid=="fd_title_cityname"){track_string=booking.env.b_lang+" | Cities Remove | "+selected}}}}booking.google.trackEvent(booking.google.clickTracker,"Dealfinder",track_string);this.form.submit()});$("#b_sortbox select").change(function(){booking.google.trackEvent(booking.google.clickTracker,"Dealfinder","df_dropdown_sorting");this.form.submit()});$("#checkin-flexible-form").submit(function(){var f=$("#b_fd_checkin_date").val();var g=$("#fd_flex").attr("checked");if(f!="undefined"){if(g){track_string=booking.env.b_lang+" | Date Select | Flexible"}else{track_string=booking.env.b_lang+" | Date Select"}}else{track_string=booking.env.b_lang+" | Date Remove | "}booking.google.trackEvent(booking.google.clickTracker,"Dealfinder",track_string)});if($.browser.msie&&jQuery.browser.version<9){$(window).resize(function(){c()});c()}};function d(h,g,k){var m=booking.env.b_canonical_url_delimiter,j=h.split(m),f=j.length,l;while(f--){l=j[f].split("=");if(l[0]==g){l[1]=k;j[f]=l.join("=");break}}if(f<0){j[j.length]=[g,k].join("=")}return j.join(m)}var c=function(){var f=$(window).width();var g=$("body.nobg #bodyconstraint");if(f<901){g.css("width","901px")}else{if(f<1110){g.css("width","901px")}else{g.css("width","1110px")}}};return{init:e}}());booking[sNSExperiments].fd_pages={priority:1,init:function(){booking.newsLanding.init()}};booking[sNSStartup].dod_sr={priority:1,init:function(){if(!$(".hotel_item").hasClass("hotel_item_rooms_table")){$(".hotel_item").click(function(c){if(c.which==2){return true}location.href=$(this).find("a.bigbluebutton").attr("href");return false})}$(".flash_deal_extra").hover(function(){var e=$(this).find("span").find("small").text().length;var d=7.2;if(booking.env.b_lang=="ja"){var d=14}if(booking.env.b_lang=="zh"){var d=15}if(booking.env.b_lang=="ko"){var d=11}var c=Math.round(e*d);$(this).find("span").stop().animate({width:c},400);$(this).find("span").find("small").stop().show()},function(){$(this).find("span").find("small").stop().hide();$(this).find("span").stop(true,true).animate({width:"0px"},400)});if($(".b_hotel_share").length){if(!($.browser.msie&&parseInt($.browser.version,10)>=9)){(function(){var c=document.createElement("script");c.type="text/javascript";c.async=true;c.src="https://apis.google.com/js/plusone.js";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)})()}}$(".subscriptionbox").click(function(){booking[sNSStartup].lightbox.show($("#subsciber_reinforcement_lightbox"),{customWrapperClassName:"dealfinder-lightbox"});return false});if(booking.env.b_show_solicitation_popup){if(booking.env.b_show_success_popup_content){booking[sNSStartup].lightbox.show($("#solicitation_feedback_success"),{customWrapperClassName:"solicitation-lightbox"});return false}else{if(booking.env.b_show_error_popup_content){booking[sNSStartup].lightbox.show($("#solicitation_feedback_error"),{customWrapperClassName:"solicitation-lightbox"});return false}}}}};booking[sNSStartup].newsletterTutorials={priority:8,init:function(){var e=1;var f=this;if(booking.env.tutorialpopup){if(b_cookie&&(b_cookie.showthistutorial!=booking.env.tutorialpopup)){var c=booking.env.tutorialpopup;var d=$(".tutorialwrapper_"+c).attr("id");f.loadPopups("#tutorial_dyk_"+c+"_s"+e,c,e)}}$("#tutorial_dyk_02_s1 a.fd_next").click(function(){$("#show_reviews_tab").click()});$("a.fd_close").click(function(){f.closeTutorial(this)});$("a.fd_next").click(function(){f.nextPopup(this,d,c)})},loadPopups:function(g,j,h){var c=this;var k=$("#tutorial_dyk_"+j+"_s"+h).attr("rel");if(k){var f=new c.relativePosition(k,true,false);var d=$(g).attr("rev");var e=$(g).width();var m=new c.getRelInlineCss(g);if(m.rgValues){$(this).css({top:"",right:"",bottom:"",left:""})}if(d!="undefined"){if(d=="right"){var l={top:(f.relDivTop+m.rgTop)+"px",left:(f.relDivSide+m.rgLeft)+"px"}}else{if(d=="left"){var l={top:(f.relDivTop+m.rgTop)+"px",left:(f.relDivSide-e+m.rgLeft)+"px"}}}}if(f.scrollToDiv&&h==1){$("html, body").delay(500).animate({scrollTop:(f.relDivTop-50)},1000,function(){$(g).css(l).fadeIn(300)})}else{$(g).delay(300).css(l).fadeIn(500)}}else{$(g).delay(300).fadeIn(500)}},relativePosition:function(c){var d=$("#"+c).offset()||{};this.relDivTop=d.top;var f=d.left;var e=$("#bodyconstraint-inner").offset().left;this.relDivSide=(f-e);if(this.relDivTop>200){this.scrollToDiv=true}else{this.scrollToDiv=false}},getRelInlineCss:function(c){this.rgTop=parseInt($(c).css("top").replace("px",""))||0;this.rgLeft=parseInt($(c).css("left").replace("px",""))||0;if(this.rgLeft==0&&this.rgTop){this.rgValues=false}else{this.rgValues=true}},nextPopup:function(c,g,d){var h=$(c).attr("id").split("nextstep_")[1];var e=(parseInt(h)+1);var f="#"+g+"_s"+h;$(f).fadeOut(300);this.loadPopups("#tutorial_dyk_"+d+"_s"+e,d,e)},closeTutorial:function(c){$(c).closest(".tutorial_dyk").fadeOut(300);b_cookie=b_cookie||{};b_cookie.showthistutorial=booking.env.tutorialpopup;if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:booking.env.b_domain_end})}return false}};booking[sNSStartup].accounts_for_everybody={priority:9,passwordFields:0,passwordChar:"",maskPass:"",isAdding:false,keyCounter:0,paswordShowInit:false,init:function(){var c=this;$(".passwd_strength").each(function(){var e='<div class="pwd_strength"><div class="strength"></div></div><span class="jq_tooltip strength_text" title="'+booking.env.b_passwd_tooltip+'" rel="300">&nbsp;</span>';$(this).after(e);var f=parseInt($(this).css("margin-left").replace("px",""))+1;$(".pwd_strength",this.parentNode).css("margin-left",f+"px");var d=this;$(".pwd_strength",this.parentNode).click(function(){$(d).focus()});$(".pwd_strength",this.parentNode).mouseenter(function(){$(d).addClass("hoverText")});$(".pwd_strength",this.parentNode).mouseleave(function(){$(d).removeClass("hoverText")})});$(".passwd_strength").focus(function(){var e=parseInt($(this).css("margin-left").replace("px",""));var d=(booking.env.b_browser=="safari")?2:e+2;$(".pwd_strength",this.parentNode).css("margin-left",d+"px")});$(".passwd_strength").blur(function(){var d=parseInt($(this).css("margin-left").replace("px",""))+1;$(".pwd_strength",this.parentNode).css("margin-left",d+"px")});$(".passwd_strength").keyup(function(){c.keyCounter++;oThis=this;var d=c.keyCounter;setTimeout(function(){c.calculateStrength(oThis,d)},400)});if($("td.pass_fix").length){$("#new_pass").blur(function(){var d=$(this).parents("tr").get(0);if($(this).val()!=""){$("th span",d).removeClass("val-no");$("th span",d).addClass("val-yes")}else{$("th span",d).removeClass("val-yes");$("th span",d).addClass("val-no")}});$("#confirm_new_pass").blur(function(){var d=$("#new_pass").val();var e=$(this).parents("tr").get(0);if($(this).val()!=""&&$(this).val()==d){$("th span",e).removeClass("val-no");$("th span",e).addClass("val-yes")}else{$("th span",e).removeClass("val-yes");$("th span",e).addClass("val-no")}})}},passWdInit:function(){var c=this;if(!this.paswordShowInit&&booking.env.auth_level<2){this.paswordShowInit=true;$(".passwd_show").each(function(){c.passwordFields++;var e=$(this).attr("name");var h=$(this).val();var g=($(this).hasClass("passwd_strength"))?" strength_margin":"";var j=Math.random();var d="pw_"+j+"textpwd_"+e;$(this).after('<div id="pwfield_'+c.passwordFields+'" class="show_password_text'+g+'"><input type="text" style="display:none;" class="textual_passwd textpwd_'+e+'" name="'+d+'" id="'+d+'" value="'+h+'" onkeyup="'+c.ns+"."+c.name+'.syncPassFields(this,true)" /><label class="pw_toggle_label" for="pw_toggle_'+c.passwordFields+'"><input id="pw_toggle_'+c.passwordFields+'" type="checkbox" onclick="'+c.ns+"."+c.name+'.togglePasswd(this)" />&nbsp;'+booking.env.b_show_passwd+"</label></div>");$(this).mouseenter(function(){var k=$(".textual_passwd",this.parentNode).get(0);$(k).addClass("hoverView")});$(this).mouseleave(function(){var k=$(".textual_passwd",this.parentNode).get(0);$(k).removeClass("hoverView")});var f="#confirm_"+$(this).attr("id");if($(f).length){$(f).each(function(){var m=$(this).attr("name");var l=$(this).val();var k="pw_"+j+"textpwd_"+m;$(this).after('<div id="confirm_pwfield_'+c.passwordFields+'" class="show_password_text"><input type="text" style="display:none;" class="textual_passwd textpwd_'+m+'" name="'+k+'" id="'+k+'" value="'+l+'" onkeyup="'+c.ns+"."+c.name+'.syncPassFields(this,true)" /></div>');$(this).mouseenter(function(){var n=$(".textual_passwd",this.parentNode).get(0);$(n).addClass("hoverView")});$(this).mouseleave(function(){var n=$(".textual_passwd",this.parentNode).get(0);$(n).removeClass("hoverView")})})}$(this).keyup(function(){c.syncPassFields(this,false)});$(this).focus(function(){var l=$(this).parents("form").get(0);var m=$(".textual_passwd",l).get(0);var k=$(m).css("display");if(k!="none"){$(m).focus()}})})}},calculateStrength:function(o,e){if(this.keyCounter==e){var f=$(o).val();var j=$(".pwd_strength .strength",o.parentNode).get(0);if(j){var t=0;var n=0;var h=0;var g=0;var c=0;var d=f.length;if(d>0){t=parseInt(d/2.5);for(var m=0;m<d;m++){var q="!@#$%^&*(){}[];:'\"\\|,.<>/?+=-_±¤";var l="ABCDEFGHIJKLMNOPQRSTUVWXYZ";if(!isNaN(f.charAt(m))){n=n+1}if(isNaN(f.charAt(m))){h=1}if(q.indexOf(f.charAt(m))>-1){g=g+2}if(l.indexOf(f.charAt(m))>-1){c=c+1}}if(g>4){g=4}if(n>2){n=2}if(c>2){c=2}if(h!=0){t+=n}t+=g;t+=c;if(t>10){t=10}}var u=26;if($(o).parents("#foldout_signup").length||$(o).parents("#registration_id").length){u=18}var k=u*t;$(j).animate({width:k+"px"});if(f!=""){$(".strength_text",o.parentNode).text(booking.env.b_password_strength_msg[parseInt(t/2)])}else{$(".strength_text",o.parentNode).text("")}}}},togglePasswd:function(h){var f=$(h).parents("form").get(0);$(".textual_passwd",f).toggle();var g=$(".textual_passwd",f).get(0);var d=$(g).css("display");var c=$(g).attr("name");c=c.split("textpwd_")[1];var e=$("input[name='"+c+"']",f).get(0);if(d!="none"){this.fixCursorPosition(null,g);if(!$("td.pass_fix").length){$(e).addClass("focusText")}}else{$(e).removeClass("focusText");this.fixCursorPosition(null,e)}this.syncPassFields($(g).get(0),true)},fixCursorPosition:function(f,e){if(f!=null){var d=document.getElementById(f)}else{var d=e}d.focus();var g=$(d).val().length;if(g>0){if("selectionStart" in d){d.selectionStart=g;d.focus()}else{var c=document.selection.createRange();c.moveStart("character",g);c.moveEnd("character",0);c.select()}}},syncPassFieldsMask:function(h){var f=this;var d="textpwd_"+$(h).attr("name");var c=$("input."+d,h.parentNode).get(0);var e=$(h).val();var j="";var k="";f.maskPass="";for(var g=0;g<e.length;g++){var l=e.length-1;if(g>=e.length-1){j+=e[g];f.maskPass+=this.passwordChar}else{j+=this.passwordChar;f.maskPass+=this.passwordChar}}$(c).val(j);setTimeout(function(){f.syncPassFieldsFullMask(c)},1000)},syncPassFieldsFullMask:function(c){$(c).val(this.maskPass)},syncPassFields:function(l,g){var o=false;var m=null;var f=this;if(g){var e=$(l).attr("name");e=e.split("textpwd_")[1];var c=$("input[name='"+e+"']",l.parentNode.parentNode).get(0);var n=$(c).attr("id");if(n.indexOf("confirm_")>-1){var k="#"+n.replace("confirm_","");if(!$(k).length){k="#"+n.replace("_confirm","")}o=true}else{var k="#confirm_"+n}if($(k).length){m=$(k).get(0);$(m).val($(l).val());var d=$(m).attr("name");d="textpwd_"+d;var j=$("input."+d,m.parentNode.parentNode).get(0);$(j).val($(l).val())}}else{var e="textpwd_"+$(l).attr("name");var c=$("input."+e,l.parentNode).get(0)}$(c).val($(l).val());if(g){if(o){if($(m).hasClass("passwd_strength")){this.keyCounter++;var h=this.keyCounter;setTimeout(function(){f.calculateStrength(m,h)},400)}}else{if($(c).hasClass("passwd_strength")){this.keyCounter++;var h=this.keyCounter;setTimeout(function(){f.calculateStrength(m,h)},400)}}}else{if($(l).hasClass("passwd_strength")){this.keyCounter++;var h=this.keyCounter;setTimeout(function(){f.calculateStrength(m,h)},400)}}}};booking[sNSStartup].popular_destinations_block=(function(){var c=function(){if($.browser.msie&&$.browser.version.substr(0,1)<7){$(".b-popular_item").mouseenter(function(){$(this).addClass("is_active")}).mouseleave(function(){$(this).removeClass("is_active")})}};return{init:c}}());booking[sNSStartup].rate_guarantee={priority:9,init:function(){$("#rate_guarantee a, a.usps_rate_guarantee_link, #rate_guaranteev2 a, #ratelogo a, #terms_rateguarantee, a#guarantee_terms, #rates_feedback_invite a.jq_tooltip").live("click",function(){window.open(this.href,"RateGuarantee","status=1,toolbar=0,menubar=0,width=450,height=550,scrollbars=1");return false});return true}};booking.ensureNamespaceExists(sNSStartup);booking[sNSStartup].short_url={priority:9,loadpos:0,savecheck:0,init:function(){var create_twitter_short_url=function(oTarget){if(typeof oTarget=="object"){myPopup=window.open("","booking_com");$.get("/short_uri?url="+escape(oTarget.getAttribute("data-shorturl"))+"&aid="+booking.env.aid,function(responseText){var json=eval(responseText);myPopup.location.href=oTarget.getAttribute("href")+" http://www.booking.com/"+json.short_url})}};$(".review_useful_t").live("click",function(){create_twitter_short_url(this);return false});$(".share_t").click(function(){create_twitter_short_url(this);return false})}};booking.env.showCase=function(d){var f={baseEl:"#newsletter_deals_city",showCaseClass:".deals",navClass:".deals_nav",menuClass:".deals_menu",showCaseWidth:150,showCaseBorder:3,defSteps:3};$("ul.deals",d.baseEl).css("left","0");var d=$.extend(f,d);c();$(d.baseEl).slideToggle();function c(){$(".next",d.baseEl).click(function(){e(1)});$(".prev",d.baseEl).click(function(){e(-1)})}function e(h){$(".next",d.baseEl).unbind("click");$(".prev",d.baseEl).unbind("click");var m=d.baseEl,g=d.defSteps,o=parseInt(d.showCaseWidth)+parseInt(d.showCaseBorder);var n=parseInt(g)*parseInt(o)*parseInt(h),l=$("ul"+d.showCaseClass+":visible",m),k=l.css("width"),j=parseInt(k)/n;if(n>0){if((-1*parseInt(l.css("left")))+n<parseInt(k)){l.animate({left:"-="+n},"normal",c)}else{l.animate({left:"0"},"normal",c)}}else{if(parseInt(l.css("left"))!=0){l.animate({left:"-="+n},"normal",c)}else{c()}}}};booking.ensureNamespaceExists(sNSExperiments);booking[sNSStartup].b_site_experiment_expand_signup={priority:9,init:function(){var d=$("#newsletter_to",".footerForm"),c=d.attr("value");d.click(function(){var e=$(this);if(e.val()===c){e.val("")}else{e.select()}});d.blur(function(){var e=$(this);if(e.val()===""){e.val(c)}});$("#newsletter_button_footer").click(function(){$(this).parents("form:first").submit()});$(".signupForm").submit(function(f){f.preventDefault();$(".newsletter_ajax_error").hide();var l=booking.env,j=$(this),n=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,g=$("input[name=url]",j).val(),o=$("input[name=hostname]",j).val(),h=$("input[name=aid]",j).val(),m=$("input[name=companyname]",j).val(),e=$("input[name=subscribe_source]",j).val(),q=$("input[name=to]",j).val(),k;if(q===""||!(n.test(q))){$(".newsletter_subscribe_error_invalid",j).show();return false}k="to="+q+"&url="+g+"&hostname="+o+"&aid="+h+"&companyname="+m+"&subscribe_source="+e;$.ajax({type:"POST",url:"/newslettersubscribe.json",data:k,dataType:"json",success:function(u){console.log(u);if(u.success===0){if(u.error==="denied"){$(".newsletter_subscribe_error_denied",j).show();$(".newsletter_subscribe_error_bad_unknown, .newsletter_subscribe_error_invalid, .newsletter_sub_success",j).hide();$(".userdataform").hide()}else{if(u.error==="bad_params"){$(".newsletter_subscribe_error_bad_unknown",j).show();$(".newsletter_subscribe_error_denied, .newsletter_subscribe_error_invalid, .newsletter_sub_success",j).hide();$(".userdataform").hide()}}return}else{if(u.success===1){if($("div#flashdealsbg_wrapper").length){window.location.href=l.b_nonsecure_hostname_signup+l.b_fd_searchresults_url_signup}else{$(".newsletter_sub_success",j).show();$(".userdataform").show();$("#add_location_to").val(q);booking.env.my_city_autocomplete.init();$(".newsletter_form_fields, .newsletter_subscribe_error_bad_unknown, .newsletter_subscribe_error_denied, .newsletter_subscribe_error_invalid",j).hide();if(u.has_account){var t=$("#userdataform form").eq(0);if(t){t.attr("action",t.attr("data-url-login"))}}}}}}})});$(".themeSignupForm").submit(function(k){k.preventDefault();$(".newsletter_ajax_error").hide();var j=booking.env,g=$(this),e=$("input[name=theme_id]",g).val(),f=$("input[name=th_actionth_action]",g).val(),h;h="theme_id="+e;if($("input[name=th_action]",g).val()=="remove"){this.action_url="/delete_favorite_theme"}else{this.action_url="/set_favorite_theme"}$.ajax({type:"POST",url:"http://"+j.b_hostname_signup+this.action_url,data:h,dataType:"json",success:function(l){if(l.status=="ok"){$("#newsletter_button",g).hide();$(".feedback_msg",g).hide();$(".successfulsubscription",g).show()}else{$(".feedback_msg",g).hide();$(".someerroroccured",g).show()}}})});$(".soldOutHotelSignup").submit(function(f){f.preventDefault();$(".newsletter_ajax_error").hide();var o=booking.env,j=$(this),t=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,m=$("input[name=firstname]",j).val(),n=$("input[name=lastname]",j).val(),q=$("input[name=email]",j).val(),g=$("input[name=aid]",j).val(),l=$("input[name=subscribe_to_newsletter]",j).val(),u=$("input[name=hotel_id]",j).val(),v=$("input[name=checkin]",j).val(),h=$("input[name=checkout]",j).val(),e=$("input[name=hsubscribe_source]",j).val(),k;if(q===""||!(t.test(q))){$(".hotel_availability_error_invalid").show();return false}k="firstname="+m+"&lastname="+n+"&email="+q+"&aid="+g+"&subscribe_to_newsletter="+l+"&hotel_id="+u+"&checkin="+v+"&checkout="+h+"&subscribe_source="+e;$.ajax({type:"POST",url:"http://"+o.b_hostname_signup+"/hotel_availability_newsletter/add",data:k,dataType:"json",success:function(w){console.log(w);if(w.subscribed===1){$(".contenttohide").hide();$(".hotel_availability_sub_success").show()}else{$(".hotel_availability_error_bad_unknown").show()}}})})}};booking.env.my_city_autocomplete={res_location:"/autocomplete?lang=en&aid=100000&skip_suggestions=&term=",store_locations:{},cur_index:-1,fav_game:false,init:function(){this.res_location="/autocomplete?lang="+booking.env.b_lang+"&aid="+booking.env.b_aid+"&skip_suggestions=&term=";var c=this;$("#city_add, #country_add, #userdataform #city, #fav_city").keypress(function(d){if(d.keyCode==13){d.preventDefault();return false}});$("#city_add, #country_add, #userdataform #city, #fav_city").blur(function(){oWhat=this;setTimeout(function(){c.cleanList(oWhat)},500)});$("#city_add, #country_add, #userdataform #city, #fav_city").keyup(function(d){if($(this).attr("id")=="fav_city"){c.fav_game=true}else{c.fav_game=false}if(d.keyCode&&(d.keyCode==38||d.keyCode==40||d.keyCode==13)){if(d.keyCode==38){d.preventDefault();c.cur_index--;if(c.cur_index<0){c.cur_index=$(".add_result li",this.parentNode).length-1}c.makeSelect(this);return false}if(d.keyCode==40){d.preventDefault();c.cur_index++;if($(".add_result li",this.parentNode).length<=c.cur_index){c.cur_index=0}c.makeSelect(this);return false}if(d.keyCode==13){d.preventDefault();c.clickSelect(this);return false}}else{c.cur_index=-1;c.cleanList(this);var f=$(this).val();var e=$(this).attr("search");if(f.length>1){oField=this;setTimeout(function(){c.loadList(oField,e)},100)}}});$(".favlist .remover").live("click",function(){$(this).removeClass("jq_tooltip");$("img",this).attr("alt","");c.removeFavourite(this,$(this).attr("remtype"));return false});$(".add_result li").live("mouseenter",function(){$("li",this.parentNode).removeClass("sel_fav");$(this).addClass("sel_fav");c.cur_index=$("li",this.parentNode).index(this);var d=$("input",this.parentNode.parentNode).get(0);$(d).focus()});$("#pref_city").click(function(){$(this).hide();$("#pref_city_add").show();$("#city_add").focus();return false});$("#pref_country").click(function(){$(this).hide();$("#pref_country_add").show();$("#country_add").focus();return false})},makeSelect:function(c){$(".add_result li",c.parentNode).removeClass("sel_fav");if($(".add_result li",c.parentNode).length>this.cur_index){var d=$(".add_result li",c.parentNode).get(this.cur_index);$(d).addClass("sel_fav")}},clickSelect:function(c){if($(".add_result li.sel_fav",c.parentNode).length){$(".add_result li.sel_fav a",c.parentNode).click()}else{if($(".add_result li",c.parentNode).length==1){$(".add_result li a",c.parentNode).click()}else{}}},loadList:function(f,d){var e=this;var f=f;var g=$(f).val();var c=this.res_location+g;if(d=="country"){c+="&dest_type=country"}else{if(d=="city"){c+="&dest_type=city&give_cc1=1"}}$.ajax({url:c,success:function(l){var h="";var m=false;if(!l||typeof l[d]==="undefined"){return}for(var k=0;k<l[d].length;k++){var j=l[d][k].label.replace("'","");var n="";if(l[d][k].cc1){var n=l[d][k].cc1[0]}h+='<li onclick="booking.env.my_city_autocomplete.addLocation('+k+", document.getElementById('city_link_"+k+"'), '"+l[d][k].dest_type+"', '"+j+"', '"+n+'\');return false;"><a id="city_link_'+k+'" href="#" onClick="return false;">'+l[d][k].label+"</a></li>";m=true}$(".add_result",f.parentNode).html(h);if(m){$(".add_result",f.parentNode).css({border:"1px solid #dddddd",background:"#ffffff"})}else{$(".add_result",f.parentNode).css({border:"0",background:"transparent"})}e.store_locations=l}})},cleanList:function(d){var c=this;$(".add_result",d.parentNode).html("");$(".add_result",d.parentNode).css({border:"0",background:"transparent"});c.store_locations={}},addLocation:function(o,d,k,c,n){var e=this;var y=this.store_locations[k][o];if(k=="city"){var f=booking.env.fav_city_locations;var t=y.dest_id}else{var f=booking.env.fav_country_locations;var t=y.co_code}var x="favlocation_"+t;if($(d).parents("#userdataform").length){var g=c.split(",");var j=g[0];if(booking.env.b_site_experiment_prefill_country){if(n!=""){if($("#country").length){$("#country").val(n)}if($("#cc1").length){$("#cc1").val(n)}}}$("#city").val(j);$("#city_id").val(t);if($(d).parents(".save_useufi_light").length){$.ajax({type:"POST",url:"/save_my_ufi",data:{ufi:t,lang:booking.env.b_guest_country},success:function(A){var z=$(".save_useufi_light").get(0);$(z).addClass("saved_ufi")}})}e.cleanList($(d).parents("ul").get(0))}else{var v=y.label;var l=v.split(",");if(e.fav_game){if(booking[sNSExperiments].favourites_game){booking[sNSExperiments].favourites_game.addSearchFav(t,y)}e.cleanList($(d).parents("ul").get(0))}else{if($("#"+x).length){e.cleanList($(d).parents("ul").get(0))}else{f[f.length]=t;this.saveFavourites(k);e.cleanList($(d).parents("ul").get(0));var w=l[0];var q="";if(l.length>0){for(var u=1;u<l.length;u++){q+=(u>1)?",":"";q+=l[u]}}var h='<li class="roundme" id="favwrap_'+x+'">';h+='<a href="#" id="'+x+'" class="jq_tooltip remover" remtype="'+k+'" title="remove this item"><img src="/static/img/icon_cancel_trans.png" alt="Remove item" /></a>';h+='<a href="#" onclick="return false;">';if(k=="city"){h+='<span class="roundme def_city">&nbsp;</span>';h+='<span class="roundme city_img" style="background:transparent url(\'/static/img/city/'+t+"/32x32.jpg') left top no-repeat;\">&nbsp;</span>"}else{h+='<img class="roundme" src="/static/img/flags/24/'+t+'.png" alt="" />'}h+="</a>";if(k=="city"){h+='<a href="'+booking.env.b_nonsecure_hostname_signup+"/searchresults."+booking.env.b_lang+".html?city="+t+'">'+w+"</a>"}else{h+='<a href="'+booking.env.b_nonsecure_hostname_signup+"/country/"+t+"."+booking.env.b_lang+'.html">'+w+"</a>"}h+="<span>"+q+"</span>";if(k=="city"){$("#addNewCity").before(h);$("#city_add").val("")}else{$("#addNewCountry").before(h);$("#country_add").val("")}}if(booking.env.profile_map_list){if(k=="city"){var m="/static/img/city/"+t+"/32x32.jpg"}else{var m="/static/img/flags/24/"+t+".png"}}this.animateAdding(x)}}},animateAdding:function(c){var d=$("#"+c).get(0);var e=0;var f=window.setInterval(function(){e++;var g=255-(e*5);if(e>51){g=(e*5)-255}if(e>101){$(d.parentNode).css({background:""});window.clearInterval(f)}else{$(d.parentNode).css({background:"rgb(255,"+g+","+g+")"})}},10)},removeFavourite:function(e,k){var j=$(e).attr("id").split("favlocation_")[1];var d=(k=="city")?booking.env.fav_city_locations:booking.env.fav_country_locations;var f=-1;for(var h=0;h<d.length;h++){if(d[h]==j){f=h}}if(f!=-1){d.splice(f,1);this.saveFavourites(k)}var c=$(e).attr("id");var g="favwrap_"+c;$("#"+g).animate({opacity:0},600,function(){$(this).html("");var l=this;setTimeout(function(){$(l).remove()})})},saveFavourites:function(g){var f=(g=="city")?"cities?ufis":"countries?cc1s";var c=(g=="city")?booking.env.fav_city_locations:booking.env.fav_country_locations;var e="/set_favorite_"+f+"=";for(var d=0;d<c.length;d++){if(d>0){e+=","}e+=c[d]}$.ajax({url:e,type:"POST",success:function(h){if(h.status&&h.status=="auth_needed"){document.location.reload(true)}}})}};function mySlideToggle(f,d){var e=$(f),c=e.data("originalHeight"),g=e.is(":visible");if(arguments.length==1){d=!g}if(d==g){return false}if(!c){c=e.show().height();e.data("originalHeight",c);if(!g){e.hide().css({height:0})}}if(d){e.show().animate({height:c},{duration:250})}else{e.animate({height:0},{duration:250,complete:function(){e.hide()}})}}booking[sNSStartup].social_network={priority:9,init:function(){var c=this;$("#social_network_bookmarks li a").mouseover(function(){$("#share_on").text(this.name)});if(booking.env.b_site_experiment_favorites_bar){$(".socnet_mailafriend").live("click",function(){c.showMailAFriend(this.href);return false})}else{$(".socnet_mailafriend").click(function(){c.showMailAFriend(this.href);return false})}},showMailAFriend:function(d){var f,c,j,e,h,g;if(booking.env.b_is_ie6){h='style="height: 453px;"';g='style="height: 435px;width: 618px;"'}else{h="";g=""}f="maf_wrapper",c='<div id="maf_wrapper" class="iframe"><div id="maf_shadow" '+h+'></div><div id="maf_iframe_wrapper"><iframe id="maf_iframe" '+g+' src="'+d+'" frameborder="0"></iframe></div></div>';if($("#"+f).length){$("#"+f).show()}else{$(document.body).append(c)}j=$(window)[0];e=(document.body.scrollTop==0)?(j.pageYOffset)?j.pageYOffset:(document.body.parentElement)?document.body.parentElement.scrollTop:0:document.body.scrollTop;$("#"+f).css("top",e+($(j).height()/2-$("#"+f).height()/2));if(booking.env.b_site_experiment_event_tracking&&typeof(pageTracker)!="undefined"){booking.google.trackEvent(booking.google.clickTracker,"Mail A Friend","Popup mail_a_friend_redesign")}}};booking[sNSStartup].sr_comp_set_destinations={priority:9,init:function(){if(booking.env.b_sr_compset_url){$.ajax({type:"GET",url:booking.env.b_sr_compset_url+";pid="+booking.env.pageview_id+";sid="+booking.env.b_sid,contentType:"text/html; charset=utf-8",success:function(c){if(!c.match(/^\s*$/)){$("#x_sr_compset").html(c).show()}}})}}};booking.env.Tabs=function(c){var d={baseEl:"#newsletter_deals_city",menuEl:".deals_menu",contentEl:".deals_wrapper",dealsEl:".deals",navEl:".nav_menu",defaultEl:1};var c=$.extend(d,c);$(c.menuEl+" li:nth-child("+c.defaultEl+")").addClass("active").show();$(c.contentEl+" ul.deals:nth-child("+c.defaultEl+")").show();$("li",c.menuEl).click(function(){$("li",c.menuEl).removeClass("active");$(this).addClass("active");$(c.dealsEl,c.contentEl).hide();var e=$(this).find("a").attr("href");$(e).show();return false});$(c.contentEl,c.baseEl).show()};(function(c){c.fn.bgIframe=c.fn.bgiframe=function(e){if(c("html.b_msie_6").length){e=c.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},e||{});var f=function(g){return g&&g.constructor==Number?g+"px":g},d='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+e.src+'"style="display:block;position:absolute;z-index:-1;'+(e.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(e.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":f(e.top))+";left:"+(e.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":f(e.left))+";width:"+(e.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":f(e.width))+";height:"+(e.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":f(e.height))+';"/>';return this.each(function(){if(c("> iframe.bgiframe",this).length==0){this.insertBefore(document.createElement(d),this.firstChild)}})}return this}})(jQuery);(function(f){var c={},o,A,l,j=f.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),n=false,m=function(F,G){var K=f(F),C=K.attr("id"),I,J,D=K.get(0).tagName.toLowerCase(),E,H,B;if(C){H=f("#"+C).index(K);B='jQuery("#'+C+'").eq('+H+")"}else{I=K.closest("[id]");J=I.attr("id");E=f("#"+J).index(I);H=I.find(D).index(K);B='jQuery("#'+J+'").eq('+E+').find("'+D+'").eq('+H+")"}return"(function(){var ele="+B+"."+G+'(),offset=ele.offset();$("#tooltip").css({top: offset.top + "px",left: (offset.left + 70) + "px"})}())'};f.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){f.tooltip.blocked=!f.tooltip.blocked}};f.fn.extend({tooltip:function(C){C=f.extend({},f.tooltip.defaults,C);var B=function(){f.data(this,"tooltip",C);this.tOpacity=c.parent.css("opacity");this.tooltipText=this.getAttribute("data-title")||this.title;this.removeAttribute("title");this.alt=""};q(C);if(typeof booking.env.b_site_experiment_ipad_improvements!="undefined"&&booking.env.b_site_experiment_ipad_improvements){return this.each(B).mouseover(u).bind("touchstart",function(){f(this).mouseover()}).mouseout(k).bind("touchend",function(){f(this).mouseout()}).click(k)}else{if(booking.env.touch_os){return this.each(B).click(u)}else{if(!f(this).hasClass("remover")){return this.each(B).mouseover(u).mouseout(k)}else{return this.each(B).mouseover(u).mouseout(k).click(k)}}}},fixPNG:j?function(){return this.each(function(){var B=f(this).css("backgroundImage");if(B.match(/^url\(["']?(.*\.png)["']?\)$/i)){B=RegExp.$1;f(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+B+"')"}).each(function(){var C=f(this).css("position");if(C!="absolute"&&C!="relative"){f(this).css("position","relative")}})}})}:function(){return this},unfixPNG:j?function(){return this.each(function(){f(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){f(this)[f(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function q(B){if(c.parent){return}if(booking.env.tooltip_traversing){c.parent=f('<div id="'+B.id+'"><div class="shadow"><h3></h3></div></div>').appendTo(document.body).hide()}else{c.parent=f('<div id="'+B.id+'" style="width: '+B.width+'px;"><div class="shadow"><h3></h3></div></div>').appendTo(document.body).hide()}if(booking.env.touch_os){c.parent.bind("click",function(){if(f.tooltip.blocked){return}if(l){clearTimeout(l)}o=null;f(this).removeClass(B.extraClass).fadeOut().css("opacity","")})}if(f.fn.bgiframe){c.parent.bgiframe()}c.title=f("h3",c.parent);c.body=f("div.body",c.parent);c.url=f("div.url",c.parent)}function x(B){return f.data(B,"tooltip")}function y(B){if(x(this).delay){l=setTimeout(z,x(this).delay)}else{z()}n=!!x(this).track;f(document.body).bind("mousemove.tooltip",h);h(B)}var d=false;var t={};var v;function u(){if("ontouchstart" in document.documentElement){booking.env.trackExperiment(booking.env.js_experiment_tracking.remove_hotel_img_tooltip_sr);if(booking.env.b_site_experiment_remove_hotel_img_tooltip_sr){window.location=f(this).attr("href");return false}}if(f.tooltip.blocked||this==o||(!this.tooltipText&&!x(this).bodyHandler)){return}A=this.tooltipText;o=this;if(f(this).hasClass("hotel_thumbs_sprite")||f(this).hasClass("hotel_variable_size")||f(this).attr("id")=="photo_wrapper"){d=true;var H=f(window);var E=H.width();var G=H.height();var D=200;if(E>1600&&G>900){D=600}else{if(E>1360&&G>765){D=500}else{if(E>1120&&G>630){D=400}else{if(E>880&&G>495){D=300}else{if(E>760&&G>428){D=250}}}}}A=A.replace(/\/max(\d+)\//,"/max"+D+"/")}if(f(this).hasClass("with_featured_review")){booking.env.trackExperiment(booking.env.js_experiment_tracking.sr_featured_review_in_photo_block)}if(f(this).hasClass("usps_rate_guarantee_link")||f(this).is("#rate_guarantee a")){booking.env.trackExperiment(booking.env.js_experiment_tracking.generalised_bpg)}if(f(this).hasClass("mouse_hover_general_rackrate")){booking.env.trackExperiment(booking.env.js_experiment_tracking.general_rackrate_tooltip_new)}if(A.indexOf("<img")===0){d=true;g()}if(f(this).hasClass("show_map")||f(this).hasClass("mouse_hover_rackrate")||f(this).hasClass("deals_label_content")||f(this).hasClass("icon_minibubble")){d=true}if(x(this).bodyHandler){c.title.hide();var I=x(this).bodyHandler.call(this);if(I.nodeType||I.jquery){c.title.empty().append(I)}else{c.title.html(I)}c.title.show()}else{if(x(this).showBody){var F=A.split(x(this).showBody);c.title.html(F.shift()).show();c.body.empty();for(var C=0,B;(B=F[C]);C++){if(C>0){c.body.append("<br/>")}c.body.append(B)}c.body.hideWhenEmpty()}else{c.title.html(A).show();c.body.hide()}}if(x(this).showURL&&f(this).url()){c.url.html(f(this).url().replace("http://","")).show()}else{c.url.hide()}c.parent.addClass(x(this).extraClass);if(x(this).fixPNG){c.parent.fixPNG()}y.apply(this,arguments);if(booking.env.touch_os){f("#tooltip h3").append("<img src='//q.bstatic.com/static/img/experiments/filter_remove.gif' alt='Close window' style='position: absolute; right: 8px; top: 8px;' />").css("padding-right","22px")}if(typeof ClickTaleExec==="function"){ClickTaleExec(m(this,"mouseover"))}}function g(){var C=A.match(/src=['"]([^'"]+)['"]/);if(!C||t[C[1]]){return}var B=A;var D=document.createElement("img");A='<img src="//r.bstatic.com/static/img/experiments/ajax-loader-black.gif" class="tooltip_loader" style="padding: 25px;"/>';D.onload=function(){t[this.src]=true;if(this.src!==v){return}A=B;c.title.html(A);c.parent.css("width",this.width+20);if(c.parent.is(":visible")){h()}};v=C[1];D.src=C[1]}function z(){var B,E;l=null;if(!o||!x(o)){return}if(booking.env.tooltip_traversing){B=x(o);E=B.width;E=(typeof E==="function")?E.apply(o):E;if(E){c.parent[0].style.width=E+"px"}else{c.parent[0].style.width="auto"}}if((!j||!f.fn.bgiframe)&&x(o).fade){if(c.parent.is(":animated")){c.parent.stop().show().fadeTo(x(o).fade,o.tOpacity)}else{c.parent.is(":visible")?c.parent.fadeTo(x(o).fade,o.tOpacity):c.parent.fadeIn(x(o).fade)}}else{c.parent.show()}if(f(".track_clear_meal_plan",c.parent).length){booking.env.trackExperiment(booking.env.js_experiment_tracking.clearer_meal_plan)}if(c.parent.find(".track_cancellation_policy_free_hightlight").length){booking.env.trackExperiment(booking.env.js_experiment_tracking.cancellation_policy_free_hightlight)}c.parent.removeClass("niceBlackBorderTooltip blackBorderTooltip");if(x(o).width){c.parent.css("width",x(o).width+"px");if(c.parent.find("#map_hover_preview_text").length){c.parent.addClass(booking.env.b_site_experiment_nice_tooltips==1?"niceBlackBorderTooltip":"blackBorderTooltip")}}else{var C=c.parent.find("img:eq(0)");var D=C.attr("src");if(D){c.parent.addClass(booking.env.b_site_experiment_nice_tooltips==1?"niceBlackBorderTooltip":"blackBorderTooltip")}c.parent.css("width",t[D]?(C.width()+20):"")}h()}function h(F){if(f.tooltip.blocked){return}if(F&&F.target&&F.target.tagName=="OPTION"){return}if(!n&&c.parent.is(":visible")){f(document.body).unbind("mousemove.tooltip")}if(o==null){f(document.body).unbind("mousemove.tooltip");return}if(booking.env.bse_tooltip_new_pos||d){e(F);return}var H=c.parent[0].offsetLeft;var G=c.parent[0].offsetTop;if(F){if(booking.env.touch_os){H=f(o).offset().left;G=f(o).offset().top}else{if(!x(o)){f(document.body).unbind("mousemove.tooltip");if(c&&"parent" in c&&c.parent[0]&&c.parent[0].style.display!=="none"){c.parent[0].style.display="none"}return false}if(booking.env.tooltip_traversing){var E=x(o).left;E=(typeof E==="function")?E.apply(o):E;H=F.pageX+E}else{H=F.pageX+x(o).left}G=F.pageY+x(o).top}var C="auto";if(x(o).positionLeft){C=f(window).width()-H;H="auto"}c.parent.css({left:H,right:C,top:G})}if(booking.env.touch_os){if(H>700){H=H-150}else{if(H>600){H=H-100}}c.parent.css({left:H+"px"})}else{var B=w(),D=c.parent[0];if(B.x+B.cx<D.offsetLeft+D.offsetWidth){H-=D.offsetWidth+20+x(o).left;c.parent.css({left:H+"px"}).addClass("viewport-right")}if(B.y+B.cy<D.offsetTop+D.offsetHeight){G-=D.offsetHeight+20+x(o).top;c.parent.css({top:G+"px"}).addClass("viewport-bottom")}if(D.offsetLeft<B.x){H=10;c.parent.css({left:H+"px"}).addClass("viewport-left")}}}function e(E){var C=w();var D=c.parent[0];var B=(f.browser.msie&&parseInt(f.browser.version,10)>=10);var G=E?E.pageX+12:D.offsetLeft;var F=E?(B?E.layerY:E.pageY)+12:D.offsetTop;if(C.x+C.cx<G+D.offsetWidth){if(booking.env.bse_tooltip_new_pos){G=G-D.childNodes[0].offsetWidth-24}else{G=G-D.offsetWidth-24}if(G<C.x+5){G=5}}if(C.y+C.cy<F+D.offsetHeight+5){F=C.y+C.cy-D.offsetHeight-5}c.parent.css({left:G,top:F})}function w(){return{x:f(window).scrollLeft(),y:f(window).scrollTop(),cx:f(window).width(),cy:f(window).height()-11}}function k(D){if(f.tooltip.blocked){return}if(l){clearTimeout(l)}o=null;var C=x(this);function B(){c.parent.removeClass(C.extraClass).hide().css("opacity","")}if((!j||!f.fn.bgiframe)&&C.fade){if(c.parent.is(":animated")){c.parent.stop().fadeTo(C.fade,0,B)}else{if(booking.env.tooltip_hide_without_fadeout){c.parent.stop().hide()}else{c.parent.stop().fadeOut(C.fade,B)}}}else{B()}if(x(this).fixPNG){c.parent.unfixPNG()}if(typeof ClickTaleExec==="function"){ClickTaleExec(m(this,"mouseout"))}}})(jQuery);(function(){var c=booking[sNSStartupLoad].tooltip_3={priority:8,lazy:true,init:function(){if(booking.env.bse_tooltip_delegate){this.delegateTooltip()}else{this.addTooltip(document)}return true},delegateTooltip:function(){$("body").delegate(".jq_tooltip,.jq_tooltippex","mouseenter",function(f){var e=$(this);var g=e.data();if(!g.initialized){e.data("initialized",true);var h=e.hasClass("jq_tooltippex"),j=e.hasClass("policy_name")||e.hasClass("policy_name_tt"),d=e.attr("rel")||0;e.tooltip({bodyHandler:j?function(){return $(this).siblings(".differing_policies").html()}:false,showURL:false,track:true,opacity:h?false:1,fade:h?false:250,width:j?400:d,left:j?-200:-d/2,top:18,extraClass:h?"opaque":false});e.mouseover()}})},setupTooltip:function(d){$(".jq_tooltip",d).tooltip({showURL:false,track:true,opacity:1,fade:250,width:function(){return this.getAttribute("rel")||0},left:function(){return -(this.getAttribute("rel")||0)/2},top:18})},setupTooltippex:function(d){$(".jq_tooltippex",d).each(function(){var f=$(this),e=f.attr("rel")||0;f.tooltip({showURL:false,track:true,width:e,left:-(e/2),top:18,extraClass:"opaque"})})},setupPolicy:function(d){$(".policy_name.jq_tooltip, .policy_name_tt.jq_tooltip",d).tooltip({bodyHandler:function(){return $(this).siblings(".differing_policies").html()},showURL:false,track:true,opacity:1,fade:250,width:400,left:-200,top:18})},addTooltip:function(d){this.setupTooltip(d);this.setupTooltippex(d);this.setupPolicy(d)}};if("ontouchstart" in document.documentElement){c.setupTooltip=function(d){$(".jq_tooltip",d).each(function(){var f=$(this),g=f.attr("rel"),e=(g)?(g.match(/\d+/)||0):0;if(!f.hasClass("urgency_link")){f.tooltip({showURL:false,track:false,opacity:1,fade:250,width:e,extraClass:"opaque"})}})};c.setupTooltippex=function(d){$(".jq_tooltippex",d).each(function(){var f=$(this),e=f.attr("rel");f.click(function(){return false});if(!booking.env.b_site_experiment_remove_hotel_img_tooltip_sr){if(f.get(0).tagName.toLowerCase()==="img"){f.wrap("<span class='touchHoverBox' />");f.parent().append("<img src='//q.bstatic.com/static/img/icons/imgplus.gif' class='touchHoverPlus' />")}else{f.addClass("touchHoverBox").append("<img src='//q.bstatic.com/static/img/icons/imgplus.gif' class='touchHoverPlus' />")}}f.tooltip({showURL:false,track:false,opacity:1,fade:250,width:e,extraClass:"opaque"})})};c.setupPolicy=function(d){$(".policy_name.jq_tooltip, .policy_name_tt.jq_tooltip",d).tooltip({bodyHandler:function(){return $(this).siblings(".differing_policies").html()},showURL:false,track:false,opacity:1,fade:250,width:400,extraClass:"opaque"});$("body, .show_map").click(function(){$("#tooltip").hide()});$("sup.jq_tooltip, tr.dotter").removeAttr("onclick")}}if(booking.env.b_site_experiment_tooltip_on_ready){booking[sNSStartup].tooltip_3=c}})();booking.ensureNamespaceExists(sNSStartup);booking[sNSStartup].touch_device_check={priority:5,init:function(){booking.env.touch_os=("ontouchstart" in document.documentElement)?true:false;return true}};booking.run("tracking_for_smart_deal_tooltip_alt_translation").onReady(function(){var c=$(".smart_deal_tooltip_alt_tr_tracking_position"),d=function(){booking.track.exp("smart_deal_tooltip_alt_translation");c.unbind("mouseenter",d)};if(!c.length){return}c.bind("mouseenter",d)});$("#currencyChange, #languageChange").hide();$("#current_currency .description, #current_currency .pointer, #current_language .description, #current_language .pointer").show();var currency=booking.currencyDropdownOptions="";$("#currencyChange select option").each(function(){var g=$(this);var f=$(this).attr("data-label");var c=$(this).attr("value");var d;var e="<span class='selsymbol'>"+f+"</span><span class='seldescription'>"+g.text()+"</span>";if(g.hasClass("currency_split")){d="<strong class='currency_split'>"+g.text()+"</strong>"}else{d="<a ";if(!g.hasClass("selected_currency")){d+="href='"+$("#link_with_currency").val()+"="+c;d+="'"}d+=">"+e+"</a>"}if(g.hasClass("selected_currency")){booking.currencyDropdownOptions+="<li class='selected_currency'>"+d+"</li>"}else{booking.currencyDropdownOptions+="<li>"+d+"</li>"}});$("#current_currency_foldout ul").append(booking.currencyDropdownOptions);var language="";$("#languageChange select option").each(function(){var f=$(this);var g=$(this).attr("data-label");var e=$(this).attr("value");var c;var d="<span class='selsymbol'><span class='flag_16 "+g+"'>&nbsp;</span></span><span class='seldescription'>"+f.text()+"</span>";if(f.hasClass("currency_split")){c="<strong class='currency_split'>"+f.text()+"</strong>"}else{c="<a href='"+$("#link_with_language").val()+"="+e+"'>"+d+"</a>"}if(f.hasClass("selected_country")){language+="<li class='selected_country'>"+c+"</li>"}else{language+="<li>"+c+"</li>"}});$("#current_language_foldout ul").append(language);booking[sNSStartup].viewed_hotels={priority:9,fullListShowed:false,minListSize:5,lastviewTimer:null,loadStart:null,init:function(){this.loadStart=new Date();var f=this,d="",c=false;if(document.getElementById("LastViewedHotels")){try{this.minListSize=parseInt($("#LastViewedHotels").attr("min"))}catch(g){}$("a.remove_hotel").click(function(){var e=$(this).attr("href").substring(1);$.ajax({url:"/hotel_history",type:"DELETE",data:{hotel_id:e}});booking[sNSStartup].viewed_hotels.cleanupHistoryList(this);this.blur();c=true;return false});$("#compare_mvh").click(function(){if(c){$.ajax({url:"/last_viewed_hotels",dataType:"json",async:false,success:function(j){var e=j.length;for(var h=0;h<e;h++){d+=j[h].hotel_id.toString()+","}window.location=booking.env.compare_my_viewed_hotels_link+"hotel_ids="+d}})}else{window.location=$(this).attr("href")}});if($("#showAllHistory").length){$("#showAllHistory").click(function(){booking[sNSStartup].viewed_hotels.showAll();this.blur();return false})}if($("#removeAllHistory").length){$("#removeAllHistory").click(function(){booking[sNSStartup].viewed_hotels.removeAll(true);this.blur();return false})}}if($(".lastVisitdate").length){$(".lastVisitdate").parents("li").mouseenter(function(){var e=$(".lastVisitdate",this);$(e).slideDown("fast");$(this).addClass("selectedVisit");f.updateTime(e);f.lastviewTimer=window.setInterval(function(){f.updateTime(e)},1000)});$(".lastVisitdate").parents("li").mouseleave(function(){window.clearInterval(f.lastviewTimer);$(".lastVisitdate",this).slideUp("fast");$(this).removeClass("selectedVisit")})}return true},updateTime:function(q){var t=this.loadStart;var o=new Date();if($(q).attr("sh")==undefined){$(q).attr("sd",$(".viewed_d",q).text());$(q).attr("sh",$(".viewed_h",q).text());$(q).attr("sm",$(".viewed_m",q).text());$(q).attr("ss",$(".viewed_s",q).text());if($(q).attr("sd")==""){$(q).attr("sd","0")}if($(q).attr("sh")==""){$(q).attr("sh","0")}if($(q).attr("sm")==""){$(q).attr("sm","0")}if($(q).attr("ss")==""){$(q).attr("ss","0")}}var c=0;var g=0;var l=0;var n=0;var v=o.getSeconds()-t.getSeconds();if(v<0){v=60-t.getSeconds()+o.getSeconds();c=1}var f=o.getMinutes()-t.getMinutes()-c;if(f<0){f=60-t.getMinutes()+o.getMinutes()-c;g=1}var k=o.getHours()-t.getHours()-g;if(k<0){k=24-t.getHours()+o.getHours()-g;l=1}if(k>24){k=k-24;n=1-l}var j=parseInt($(q).attr("sh"))+k;var e=parseInt($(q).attr("sm"))+f;var u=parseInt($(q).attr("ss"))+v;if(u>59){u=u-60;e=e+1}if(e>59){e=e-60;j=j+1}if(j>23){j=j-24;n=n+1}if(u==0){$(".viewed_s",q).text("");$(".viewed_seconds",q).removeClass("show");$(".viewed_second",q).removeClass("show")}else{$(".viewed_s",q).text(u);if(u==1){$(".viewed_seconds",q).removeClass("show");$(".viewed_second",q).addClass("show")}else{$(".viewed_seconds",q).addClass("show");$(".viewed_second",q).removeClass("show")}}if(e==0){$(".viewed_m",q).text("");$(".viewed_minutes",q).removeClass("show");$(".viewed_minute",q).removeClass("show")}else{$(".viewed_m",q).text(e);if(e==1){$(".viewed_minutes",q).removeClass("show");$(".viewed_minute",q).addClass("show")}else{$(".viewed_minutes",q).addClass("show");$(".viewed_minute",q).removeClass("show")}}if(j==0){$(".viewed_h",q).text("");$(".viewed_hours",q).removeClass("show");$(".viewed_hour",q).removeClass("show")}else{$(".viewed_h",q).text(j);if(j==1){$(".viewed_hours",q).removeClass("show");$(".viewed_hour",q).addClass("show")}else{$(".viewed_hours",q).addClass("show");$(".viewed_hour",q).removeClass("show")}}if(n==0){$(".viewed_d",q).text("");$(".viewed_days",q).removeClass("show");$(".viewed_day",q).removeClass("show")}else{$(".viewed_d",q).text(n);if(n==1){$(".viewed_days",q).removeClass("show");$(".viewed_day",q).addClass("show")}else{$(".viewed_days",q).addClass("show");$(".viewed_day",q).removeClass("show")}}},cleanupHistoryList:function(d){var c=this.minListSize;$(d).parent().fadeOut(500,function(){$(d).parents("li").remove();var f=$("#LastViewedHotels ul.lastViewedList li");if(!f.length){booking[sNSStartup].viewed_hotels.removeAll(false)}if(f.length<2){$(".hotel_comparison_link").hide();$("#share_hotel_history").css("borderTop","none")}if(f.length>=c){var e=f.get(c-1);$(e).fadeIn(1000)}if(document.getElementById("showAllHistory")){if(f.length<=c){$("#moreHistoryLinkWrapper").hide()}}})},showAll:function(){var d=$("#LastViewedHotels ul.lastViewedList li");var c=this.minListSize;if(!booking[sNSStartup].viewed_hotels.fullListShowed){for(i=c-1;i<d.length;i++){$(d[i]).fadeIn(500)}booking[sNSStartup].viewed_hotels.fullListShowed=true}else{for(i=c;i<d.length;i++){$(d[i]).fadeOut(500)}booking[sNSStartup].viewed_hotels.fullListShowed=false}booking[sNSStartup].viewed_hotels.switchCaption()},removeAll:function(c){if(c){$.ajax({url:"/hotel_history",type:"DELETE",data:{hotel_id:-1}})}$("#LastViewedHotels").fadeOut(500,function(){$(this).remove()})},switchCaption:function(){if(booking[sNSStartup].viewed_hotels.fullListShowed){$("#showAllHistory .showLink").hide();$("#showAllHistory .hideLink").show()}else{$("#showAllHistory .showLink").show();$("#showAllHistory .hideLink").hide()}}};booking[sNSStartup].worldmap={priority:8,init:function(){if(!$("#map_holder").length){return}var d=this;var e;var c;this.oldid=$("#continent_list a.selected").attr("id").split("list_continent_")[1];for(c=1;c<10;c++){$("#continent_"+c).mouseover(function(){clearTimeout(e);d.curid=this.id.split("continent_")[1];e=setTimeout(function(){d.togleContinents()},300)});$("#continent_"+c).click(function(){return false});$("#list_continent_"+c).mouseover(function(){clearTimeout(e);d.curid=this.id.split("list_continent_")[1];e=setTimeout(function(){d.togleContinents()},300)});$("#list_continent_"+c).click(function(){return false})}$("#country_wrapper").mouseenter(function(){d.curid=d.oldid});$("#countrylist_10 li, #countrylist_2 li").appendTo("#countrylist_1");$("#countrylist_7 li").appendTo("#countrylist_8")},togleContinents:function(){if(this.curid==this.oldid){return}if(this.oldid){$("#link_continent_"+this.oldid).hide();$("#list_continent_"+this.oldid).removeClass("selected");$("#countrylist_"+this.oldid).hide()}this.showContinent()},showContinent:function(){$("#link_continent_"+this.curid).fadeIn(300);$("#list_continent_"+this.curid).addClass("selected");$("#countrylist_"+this.curid).show();this.oldid=this.curid}};booking[sNSExperiments].trustpilot_external_proof={init:function(){booking.track.onView("#trustpilot_block").exp(booking.env.js_experiment_tracking.trustpilot_external_proof)}};booking[sNSStartup].worldMapV2={priority:8,init:function(){if(!$("#map_holder_v2").length){return}booking.track.onView(".v2_worldmap").exp(booking.env.js_experiment_tracking.continent_lp_wrapper);var d=this;var e;var c;if(booking.env.b_site_experiment_continent_lp_wrapper){this.oldid=0}else{this.oldid=$("#map_holder_v2 h3.selected").attr("id").split("link_continent_")[1]}$("#world_map_v2 area").hover(function(){var g=$(this).attr("id");var f=parseInt(g.split("_")[1]);$("#link_continent_"+f).stop(true,true).fadeIn(200);$("#list_continent_"+f).addClass("hovered")},function(){var g=$(this).attr("id");var f=parseInt(g.split("_")[1]);if(!$("#link_continent_"+f).hasClass("selected")){$("#link_continent_"+f).stop(true,true).hide()}$("#list_continent_"+f).removeClass("hovered")});$("#world_map_v2 area").click(function(){if(booking.env.b_site_experiment_continent_lp_wrapper){booking.google.trackEvent(booking.google.clickTracker,"Continent-page",$(this).attr("id"));window.location=$(this).attr("data-href")}else{thisid=$(this).attr("id");d.curid=parseInt(thisid.split("_")[1]);d.togleContinents();return false}});if(booking.env.b_site_experiment_continent_lp_wrapper){$(".contlist_v2 li a").hover(function(){$("#link_"+$(this).attr("data-id")).stop(true,true).fadeIn(200)},function(){$("#link_"+$(this).attr("data-id")).stop(true,true).hide()})}else{$(".contlist_v2 li a").hover(function(){var g=$(this).attr("id");var f=parseInt(g.split("list_continent_")[1]);$("#link_continent_"+f).stop(true,true).fadeIn(200);$("#list_continent_"+f).addClass("hovered")},function(){var g=$(this).attr("id");var f=parseInt(g.split("list_continent_")[1]);if(!$("#link_continent_"+f).hasClass("selected")){$("#link_continent_"+f).stop(true,true).hide()}$("#list_continent_"+f).removeClass("hovered")})}$(".contlist_v2 li a").click(function(){if(booking.env.b_site_experiment_continent_lp_wrapper){booking.google.trackEvent(booking.google.clickTracker,"Continent-page",$(this).attr("data-id"))}else{thisid=$(this).attr("id");d.curid=parseInt(thisid.split("list_continent_")[1]);d.togleContinents();return false}});$("#countrylist_10 li, #countrylist_2 li").appendTo("#countrylist_1");$("#countrylist_7 li").appendTo("#countrylist_8")},togleContinents:function(){if(this.curid==this.oldid){return}if(this.oldid){$("#link_continent_"+this.oldid).hide();$("#link_continent_"+this.oldid).removeClass("selected");$("#list_continent_"+this.oldid).removeClass("selected");$("#continent_name_"+this.oldid).removeClass("selected");$("#countrylist_"+this.oldid).hide()}this.showContinent()},showContinent:function(){$("#link_continent_"+this.curid).fadeIn(300);$("#list_continent_"+this.curid).addClass("selected");$("#link_continent_"+this.curid).addClass("selected");$("#continent_name_"+this.curid).addClass("selected");$("#countrylist_"+this.curid).show();this.oldid=this.curid}};$(document).ready(function(){var c=$("#editorTitle").val();var d=$("#editorText").html()});var $_dot_or_comma={USD:".",EUR:",",BRL:",",CAD:",",RUB:","};var $_decimal_by_lang={ca:$_dot_or_comma,cs:$_dot_or_comma,da:$_dot_or_comma,de:$_dot_or_comma,el:$_dot_or_comma,en:{},es:$_dot_or_comma,es_us:{},es_mx:{},fi:$_dot_or_comma,fr:$_dot_or_comma,hu:$_dot_or_comma,it:$_dot_or_comma,ja:{},nl:$_dot_or_comma,no:$_dot_or_comma,pt:$_dot_or_comma,pl:$_dot_or_comma,ro:$_dot_or_comma,ru:$_dot_or_comma,sv:$_dot_or_comma,tr:$_dot_or_comma,zh:{}};var $_decimal_by_lang_new={ca:",",cs:",",da:",",de:",",el:",",en:".",es:",",es_us:".",es_mx:".",fi:",",fr:",",hu:",",it:",",ja:".",nl:",",no:",",pt:",",pl:",",ro:",",ru:",",sv:",",tr:",",zh:"."};var lang,currency,country;var original_persons_count=null;$(function(){lang=$("html").attr("lang");currency=$("#currList").val();country=$("meta[name=country]").attr("content");$(".bookExtra").show();if(original_persons_count==null){original_persons_count=parseInt($("#person_count").text());if(isNaN(original_persons_count)){original_persons_count=parseInt($(".person_count:first").text())}}$("select.number_guests").change(function(){var h=$(this);var f=h.val();if(booking.env.b_site_experiment_one_page_bookprocess){var g=h.parents(".room_item").find(".addon")}else{var g=h.parents("table:first").find(".addon")}var j;g.each(function(){var v=$(this);var q=v.find(".number_guests");q.html(f);var k=q.length?f:1;var u=v.find(".price_per_unit");var n=u.attr("price");var w=u.attr("price_hotel");var l=v.find("span.addon_price");var x=v.find(".number_nights").text()||u.attr("nights")||1;var o=v.find("span.addon_price");var t=((n>0)?n:w)*x*k;o.attr("price",t);o.attr("price_hotel",format_price(w*x*k));if(booking.env.b_site_experiment_bp_clean_addon&&q.length>0){o.fadeOut("fast",function(){m();o.fadeIn()})}else{m()}function m(){o.html(o.attr("currency_symbol")+" "+format_price(t,o.attr("currency")))}});show_addons_cost();update_persons_count()});$("tr.dropdowns td select").change(function(){var l=$(this);var g=$(this).parents("tr.dropdowns").find(".price_per_unit");var j=l.find("option:selected").text();var k=g.attr("nights");var m=g.attr("price");var f=g.attr("price_hotel");var h=((m>0)?m:f)*k*j;l.attr("price",h);l.attr("price_hotel",format_price(f*k*j));show_addons_cost()});$("input:checkbox[name^=addon]").click(show_addons_cost);$(".extrabed").click(function(){if(!booking.env.b_site_experiment_bp_clean_addon){$("select.number_guests").trigger("change")}});$("input:checkbox[name^=insurance]").click(function(){var k=1*($("#cost_with_addons").attr("tc")||0);var f=1*(this.checked?($("#insurance_cost").attr("price")||0):0);var j=$("#selected_currency_symbol").text();$("#cost_with_addons").html(format_price(k+f));if(j){var h=1*$("#s_cost_with_addons").attr("tc");var g=1*(this.checked?($("#s_insurance_cost").attr("price")||0):0);$("#s_cost_with_addons").html(format_price(h+g))}if(this.checked){$("#insurance_div").show();$(".ovTotalCost").show()}else{$("#insurance_div").hide()}});var e={nl:1,dk:1,fi:1,se:1,de:1,it:1,ch:1,pt:1,at:1,es:1,de:1,fr:1,ie:1,be:1,cy:1,cz:1,ee:1,hu:1,gr:1,lv:1,lt:1,lu:1,no:1,pl:1,sk:1,ro:1};$("select[name=cc1]").change(function(){var f=$(this).val();if(e[f]==1){$("#insurance_wrapper").show();$("input:checkbox[name^=insurance]").removeAttr("disabled")}else{$("#insurance_wrapper").hide();$("input:checkbox[name^=insurance]").attr("disabled","disabled")}});$("tr.dropdowns .totPrice select").trigger("change");var c=$("input:checkbox[name^=addon]:checked").length;var d=$(".dropdowns select .notnull:selected").length;if(c||d){show_addons_cost()}if(e[$("select[name=cc1] option:selected").val()]==1){$("#insurance_wrapper").show();$("input:checkbox[name^=insurance]").removeAttr("disabled")}});function show_addons_cost(){var h=$("input:checkbox[name^=f_addon]:checked, input:checkbox[name^=addon]:checked, select.addon_price option.notnull:selected").parents("tr.addon").find(".addon_price");var l=0,q=0;var d={city_tax:0,vat:0,service_charge:0};var n={city_tax:0,vat:0,service_charge:0};var k=$("#pricedetails .total .hotel_currency .currency_symbol").text();if($("#pricedetails .total .hotel_currency .currency_symbol").data("currency")){k=$("#pricedetails .total .hotel_currency .currency_symbol").data("currency")}h.each(function(){var u=$(this);d.addons=d.addons||0;d.addons+=1*u.attr("price_hotel");n.addons=n.addons||0;n.addons+=1*u.attr("price");u.nextAll(".addon_tax").each(function(){var w=$(this);var v=w.attr("name");var x=1*w.val();if(v.match(/^s_/)){v=v.replace(/^s_/,"");n[v]=n[v]||0;n[v]+=x}else{d[v]=d[v]||0;d[v]+=x}});u.nextAll(".addon_tax_percentage").each(function(){var x=$(this);var w=x.attr("name");var v=1*x.val();d[w]=d[w]||0;d[w]+=v*u.attr("price_hotel");n[w]=n[w]||0;n[w]+=v*u.attr("price")})});var j=1*($("#total_cost").attr("price")||0);var m=j;for(var g in d){var e=$("#"+g+"_cost");var f=1*(e.attr(g)||0);var t=f+d[g];j+=t;e.html(format_price(t,k))}$("#cost_with_addons").html(format_price(j,k));var c=booking.env.b_selected_currency;if(c){var o=1*($("#s_total_cost").attr("price")||0);for(var g in n){var e=$("#s_"+g+"_cost");var f=1*(e.attr(g)||0);var t=f+n[g];o+=t;e.html(format_price(t,k))}$("#s_cost_with_addons").html(format_price(o,c))}if(booking.env.b_site_experiment_extracharges_breakdown){if(d.addons>0){$(".cost").show();$(".ovTotalCost").show();$("#rack-rate-total-user-currency").hide();$("#rack-rate-total-hotel-currency").hide();$("#rack-rate-total-percentage").hide()}else{$(".cost").hide();$("#rack-rate-total-user-currency").show();$("#rack-rate-total-hotel-currency").show();$("#rack-rate-total-percentage").show();if($(".included","#pricedetails").length<2){if(m==j){$(".ovTotalCost").hide();$("#rack-rate-total-user-currency").show();$("#rack-rate-total-hotel-currency").show();$("#rack-rate-total-percentage").show()}else{$(".ovTotalCost").show();$("#rack-rate-total-user-currency").hide();$("#rack-rate-total-hotel-currency").hide();$("#rack-rate-total-percentage").hide()}}}}else{if(d.addons>0){$(".cost").show();$(".ovTotalCost").show();$("#rack-rate-total-user-currency").hide();$("#rack-rate-total-hotel-currency").hide();$("#rack-rate-total-percentage").hide()}else{$(".cost").hide();$("#rack-rate-total-user-currency").show();$("#rack-rate-total-hotel-currency").show();$("#rack-rate-total-percentage").show();if(m==j){$(".ovTotalCost").hide();$("#rack-rate-total-user-currency").show();$("#rack-rate-total-hotel-currency").show();$("#rack-rate-total-percentage").show()}else{$(".ovTotalCost").show();$("#rack-rate-total-user-currency").hide();$("#rack-rate-total-hotel-currency").hide();$("#rack-rate-total-percentage").hide()}}}if($(".extrabed :checked").length){$("#extrabed_remark").show();$(".extrabed_var_is_included").show();$(".extrabed_var_is_excluded").hide()}else{$("#extrabed_remark").hide();$(".extrabed_var_is_included").hide();$(".extrabed_var_is_excluded").show()}if($("li.total").hasClass("updated")){$("li.total").removeClass("updated")}else{$("li.total").addClass("updated").delay(600).queue(function(u){$(this).removeClass("updated");u()})}}function update_persons_count(){var c=0;$("select.number_guests").each(function(){c+=parseInt($(this).val())});$("input[type=checkbox].is_extrabed:checked").each(function(){c+=1});var d=$("#person_count");if(d.length==0){d=$(".person_count");var e="";d.each(function(){e=$(this).text().replace(/[0-9]+/,c);$(this).html(e)})}else{var e=d.text().replace(/[0-9]+/,c);d.html(e)}}var _language_number_formatting={ar:[".",",",false],bg:["."," ",false],ca:[",",".",false],cs:["."," ",false],da:[",",".",false],de:[",",".",false],"en-us":[".",",",false],"en-gb":[".",",",false],el:[",",".",false],es:[",",".",false],et:[","," ",false],fi:[","," ",false],fr:[","," ",false],he:[".",",",false],hr:[",",".",false],hu:["."," ",false],id:[",",".",false],is:[",",".","ISK"],it:[",",".",false],ja:[".",",","YEN"],ko:[".",",",false],lt:[","," ",false],lv:[","," ",false],ms:[".",",",false],nl:[",",".",false],no:[","," ",false],pl:[","," ",false],pt:[","," ",false],"pt-br":[",",".",false],ro:[",",".",false],ru:[","," ",false],sk:[","," ",false],sl:[",",".",false],sr:[",",".",false],sv:[","," ",false],th:[".",",",false],tl:[".",",",false],tr:[",",".",false],uk:[","," ",false],vi:[",",".",false],zh:[".",",",false]};function thousand_separate(d,e){d=d.replace(/,/g,"");var c=new RegExp("(-?[0-9]+)([0-9]{3})");while(c.test(d)){d=d.replace(c,"$1"+e+"$2")}return d}function format_price(d,k){var h=(Math.round(d*100)/100)+"";if(h.match(/\.\d$/)){h+="0"}var n=country.toLowerCase();var f=$_decimal_by_lang[lang+"_"+n]||$_decimal_by_lang[lang];var j=f?f[k]||".":".";if(booking.env.b_site_variant_currency_consistency){j=$_decimal_by_lang_new[lang+"_"+n]||$_decimal_by_lang_new[lang]||"."}if(booking.env.b_site_variant_localize_price_number_format){var o=lang.split("-")[0];var e=_language_number_formatting[lang]||_language_number_formatting[o]||[".",",",false];var j=e[0];var m=e[1];var c=!(e[2]==k);var g=h.split(".");var l=thousand_separate(g[0],m);if(c&&g[1]){l=l+j+g[1]}return l}return h.replace(/\./,j)}booking[sNSStartup].addons={priority:9,init:function(){$("#insurance_button").click(function(){$(this).toggleClass("hover");$("#insurance_panel").toggle()});return true}};booking[sNSExperiments].free_cancellation_fake_addon={priority:9,init:function(){$(".free-cancellation input").removeAttr("checked");$(".free-cancellation input").click(function(){var k=$(this).attr("name").split("_");var m=$(this).attr("value");var g=k[2]+"_"+k[3]+"_"+k[4];var c=$("input[name='nr_rooms_"+g+"']").attr("value");var e=$("input[name='nr_rooms_"+m+"']").attr("value");var l;var h;var f=$("#bookForm input[name='total_cost']");var d=parseFloat(f.attr("value"));var j=parseFloat($(this).parents("tr.addon").find(".addon_price").attr("price_hotel"));if(this.checked){$("input[name='nr_rooms_"+g+"']").attr("value",--c);$("input[name='nr_rooms_"+m+"']").attr("value",++e);l=g;h=m;d+=j}else{$("input[name='nr_rooms_"+g+"']").attr("value",++c);$("input[name='nr_rooms_"+m+"']").attr("value",--e);l=m;h=g;d-=j}f.attr("value",d);var n=$(this).parents(".bookstep2").get(0);$("input",n).each(function(){if($(this).attr("name").indexOf("f_addon")<0){$(this).attr("name",$(this).attr("name").replace(l,h));$(this).attr("id",$(this).attr("id").replace(l,h))}});$("select",n).each(function(){$(this).attr("name",$(this).attr("name").replace(l,h));$(this).attr("id",$(this).attr("id").replace(l,h))});show_addons_cost()});return true}};booking[sNSExperiments].ajax_filters=(function(){var f="=!=!=";var q=false;var m={};var n;var w;var k=[];var y=function(A,B){m[A]={timestamp:+new Date(),value:B}};var z=function(B){var C=m[B];var A=+new Date();if(C&&(A-C.timestamp)<600000){return C.value}};var v=function(){var B=$(".sorth1").offset().top;var A=$(window).scrollTop();if(A>B){window.scrollTo(0,B)}};var h=function(A){if(typeof history.pushState!=="undefined"){history.pushState({url:A},null,A)}else{location.hash="#!"+A}};var d=function(A,I){var H=A.replace(booking.env.b_url_start,"").replace(/;;/g,";").replace(/^;+|;+$/g,"").split("?");var E=H[1].split(";");var F,G=E.length;var C,B,D=[];for(F=0;F<G;F++){C=E[F].split("=");if(C[0]==="nflt"){B=decodeURIComponent(C[1]).replace(/;;/g,";").replace(/^;+|;+$/g,"");if(B){D=B.split(";")}E.splice(F,1);break}}if(typeof I==="function"){I(E,D)}E.push("nflt="+encodeURIComponent(D.sort().join(";")));return H[0]+"?"+E.sort().join(";")};var g=function(B){var A=B.split("=")[0];return d(w,function(D,C){if(A==="pr"){o(B,D)}else{C.push(B);if(A==="district"){u(D)}}})};var o=function(F,E){var C,B=E.length;var D=false;var A;for(C=0;C<B;C++){if(E[C].split("=")[0]==="pr"){D=true;A=F.split("=")[1]+","+E[C].split("=")[1];A=A.split(",");A=$.map(A,function(G){return parseInt(G,10)});A.sort(function(H,G){return H-G});if(A[0]===-1){A.splice(0,1);A.push(-1)}E[C]="pr="+A[0]+","+A[A.length-1];break}}if(!D){E.push(F)}};var j=function(B){var A=B.split("=")[0];return d(w,function(E,D){if(A==="pr"){l(B,E)}else{var C=D.length;while(C--){if(D[C]===B){D.splice(C,1)}}if(A==="district"){c(E)}}})};var l=function(C,E){var F,G=E.length;for(F=0;F<G;F++){if(E[F].split("=")[0]==="pr"){var J=E[F].split("=")[1].split(",");var B=parseInt(J[0],10);var A=parseInt(J[1],10);var D=C.split("=")[1].split(",");var I=parseInt(D[0],10);var H=parseInt(D[1],10);if(B===I&&A===H){E.splice(F,1)}else{if(B===I){E[F]="pr="+H+","+A}else{if(A===H){E[F]="pr="+B+","+I}}}break}}};var u=function(A){c(A);A.push("radius=0")};var c=function(B){var A=B.length;while(A--){if(/^radius=/.test(B[A])){B.splice(A,1)}}};var e=function(E,B,A){if(!A){A={}}var D=E.split(f);if($(D[2]).find("table.hotellist > tbody > tr").length===0){var F=k.pop();if(F){x(F);return false}}$(document.body).unbind("mousemove.tooltip");k=[];var H=[];$("#filterbox_wrap .filtercategory").each(function(){var I=$(this);if(!I.hasClass("toggla_hide")){H.push(I.parent().attr("id"))}});$("#filterbox_wrap").html(D[0]);$.each(H,function(J,I){var K=$("#"+I);K.find(".filtercategory").removeClass("toggla_hide");K.find(".filteroptions").hide()});var G=$(D[1]).filter("#breadcrumb");if(G.length){$("#breadcrumb").empty().append(G.contents())}else{$("#breadcrumb").html(D[1])}$("h1.sorth1").html(D[2]);var C=document.getElementById("ajaxsrwrap");$(C).html(D[3]);booking[sNSStartupLoad].tooltip_3.addTooltip(C);booking[sNSStartupLoad].search_all_roomtypes.addMoreLink(C);booking[sNSStartup].filterbox.init();booking[sNSStartup].sort_popups.init();booking[sNSStartupLoad].change_currency_on_click.init();$(".address a, .broaden_search a, .prevnextbar a, a.filterelement, #sort_by a").each(function(){if(this.href.indexOf("standalonesearchresults.")>-1){this.href=this.href.replace("standalone","")}});if(A.scrollToTop===undefined||A.scrollToTop){v()}if(A.saveUrl===undefined||A.saveUrl){h(B)}};var x=function(B,A){if(!A){A={}}var C=z(B);w=B;if(C){e(C,B,A);return}q=true;booking[sNSStartup].filterbox_loading.show();setTimeout(function(){n=$.ajax({cache:true,url:B.indexOf("standalonesearchresults")>-1?B:B.replace("searchresults.","standalonesearchresults."),success:function(D){if(B!==w){return}q=false;e(D,B,A);y(B,D)}})},15)};var t=function(){y(location.pathname+location.search,$("#filterbox_wrap").html()+f+$("#breadcrumb").html()+f+$("h1.sorth1").html()+f+$("#ajaxsrwrap").html());var C=location.href.split("#!")[1];if(C){x(C,{scrollToTop:false,saveUrl:false})}$("a.filterelement").live("click",function(){var F=$(this);if(F.hasClass("cantdeselect")){return false}var G=this.getAttribute("data-id").replace(/^(.+)[\-_](\d+)$/,"$1=$2");if(/^pricerange=/.test(G)){G=this.getAttribute("data-param")}var E=G.split("=")[0];var D;if(q){q=false;if(n){n.abort()}if(w){k.push(w)}D=F.hasClass("active")?j(G):g(G)}else{D=d(this.href)}if(booking.env.filter_config[E]==="single"){F.siblings().toggle(F.hasClass("active"))}F.removeClass("on").toggleClass("active").blur();x(D);return false});$(window).bind("hashchange",function(){var D=location.href.split("#!")[1];if(!D){x(location.pathname+location.search,{saveUrl:false})}else{if(D!==w){x(D,{saveUrl:false})}}});var B=("state" in window.history);var A=location.href;$(window).bind("popstate",function(E){var D=!B&&location.href===A;B=true;if(D){return}var F=E.originalEvent.state;if(!F){x(location.pathname+location.search,{saveUrl:false})}else{if(F.url!==w){x(F.url,{saveUrl:false})}}})};return{init:t}}());booking[sNSExperiments].bp_cart={init:function(){$.ajax({url:"/cart",dataType:"json",success:function(c){$.each(c,function(g,e){if(g==0){var f=$("#bp_cart");var d=function(h){return'<a class="clear_cart" href="#" id="bp_cart_clear">'+booking.env.bp_cart_abandon_close+'</a><a class="proceed" title="'+h.hotel_name+'" href="'+h.secure_hostname+h.book_url+'">'+booking.env.bp_cart_abandon_complete_book_01+'<span class="cart_cta_button">'+booking.env.bp_cart_abandon_complete_book_02+"</span></a>"};f.html(d(e));f.show();$("body").addClass("cart_is_active");$("#bp_cart_clear").click(function(){$.ajax({url:"/cart_clear",dataType:"json",success:function(){$("body").removeClass("cart_is_active");$("#bp_cart").css("display","none")}})})}})}})}};var b_Feedback=function(){function g(){if(b_cookie&&b_cookie.contentFeedback){var k=b_cookie.contentFeedback.split("|");if(k.indexOf(booking.env.b_hotel_id)!=-1){return}}$("#hotel_main_content").append('<p id="content_feedback_invite">'+booking.env.content_feedback_prompt_question+'<br /><button id="b_content_feedback_yes">'+booking.env.content_feedback_prompt_link+"</button></p>");$("#b_content_feedback_yes").click(function(){b_Feedback.popup("/general.html?tmpl=content_feedback");if(booking.env.b_site_experiment_event_tracking&&(typeof pageTracker!="undefined"||typeof _gaq!="undefined")){booking.google.trackEvent(booking.google.clickTracker,"Content Feedback","Clicked")}return false})}function h(){}function f(){var l="<option value=''>"+transl_please_select+"</option>";var k;$("#maxotel_rooms td.roomPrice div.roomDefaultUse, #maxotel_rooms td.roomPrice div.roomSingleUse").each(function(){singleOcc="";if($(this).hasClass("roomSingleUse")){singleOcc="- Single Occupancy"}var n=$(this).find("strong").text();var m=n.match(/[0-9].*[0-9]/);if($(this).parents("tr:eq(0)").find("td.roomType a.togglelink").length!=0){k=$(this).parents("tr:eq(0)").find("td.roomType a.togglelink").html()}l+='<option value="'+$(this).attr("id").substr(9)+" *** "+k+singleOcc+" | "+booking.env.rates_feedback_userscurrency+" "+m+'">'+k+singleOcc+" - "+n+"</option>"});$("#feedback_roomslist").append('<select name="roomtype_id" id="roomtype_id" style="width:410px;">'+l+"</select>")}function e(){if($("#comments_table").length){var l=$("#comments_table");$(".review_tr",l).mouseenter(function(m){$(".review_feedback",$(this)).css({filter:"alpha(opacity=100)",opacity:1})});$(".review_tr",l).mouseleave(function(m){$(".review_feedback",$(this)).css({filter:"alpha(opacity=20)",opacity:0.2})});if($.fn&&$.fn.tooltip){$(".review_useful_form",l).tooltip({track:true,opacity:1,fade:250,left:0})}if(b_cookie&&b_cookie.rF){var k=b_cookie.rF.split(",");$("tr",l).each(function(){var n=$(this).find("div[id^='area_comments_']").attr("id");var m=n.substr(14,n.length);if(k.indexOf(m)!=-1){if(booking.env.b_site_experiment_review_helpful_thumbs){var o=$(this);o.find(".review_useful_form").remove();o.find(".vote_copy").remove();o.find("span.review_feedback").prepend('<p class="review_useful_thankyou">'+booking.env.transl_content_feedback_thankyou_new+"</p>")}else{var o=$(this);o.find(".review_useful_form").remove();o.find(".vote_copy").remove();o.find("span.review_feedback").prepend('<p class="review_useful_thankyou">'+transl_content_feedback_thankyou_short+"</p>")}}})}$("div.review_feedback form",l).submit(function(){$(this).children("textarea").val(booking.env.b_hotel_id);var n=$(this).parents("div[id^='area_comments_']").attr("id");var m=n.substr(14,n.length);var o=this;$.post(this.action,{hotel_id:$(this).children("textarea").val()},function(){if(b_cookie&&b_cookie.rF){var t=b_cookie.rF.split(",");if(t.length>50){t.shift();b_cookie.rF=t.toString()+","+m}else{b_cookie.rF+=","+m}}else{if(typeof(b_cookie)=="undefined"){b_cookie={}}b_cookie.rF=m}if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:booking.env.b_domain_end})}var q=$(o).parent();q.find(".review_useful_form").remove();q.prepend('<p class="review_useful_thankyou">'+transl_content_feedback_thankyou_short+"</p>");booking.google.trackEvent(booking.google.clickTracker,"Review Useful",$(o).children("button").attr("class"))});return false});$("span.review_feedback form",l).submit(function(){$(this).children("textarea").val(booking.env.b_hotel_id);var n=$(this).parents("div[id^='area_comments_']").attr("id");var m=n.substr(14,n.length);var o=this;$.post(this.action,{hotel_id:$(this).children("textarea").val()},function(){if(b_cookie&&b_cookie.rF){var t=b_cookie.rF.split(",");if(t.length>50){t.shift();b_cookie.rF=t.toString()+","+m}else{b_cookie.rF+=","+m}}else{if(typeof(b_cookie)=="undefined"){b_cookie={}}b_cookie.rF=m}if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:".booking.com"})}var q=$(o).parent();if(booking.env.b_site_experiment_review_helpful_thumbs){$(o).closest(".no_thumbs").html('<p class="review_useful_thankyou">'+booking.env.transl_content_feedback_thankyou_new+"</p>")}else{q.find(".review_useful_form").remove();q.prepend('<p class="review_useful_thankyou">'+transl_content_feedback_thankyou_short+"</p>")}booking.google.trackEvent(booking.google.clickTracker,"Review Useful",$(o).children("button").attr("class"))});return false})}}function d(){$("input[name^=reason]:checked").each(function(){$.ajax({url:"/feedback",type:"PUT",data:{type:this.value,hotel_id:booking.env.b_hotel_id,lang:booking.env.b_lang_for_url}})});var k=booking.env.content_feedback_thankyou_end+". "+booking.env.content_feedback_we_appreciate;if($("#contact:checked").length){k=booking.env.content_feedback_contact_info+" "+k}$("#content_feedback_invite").text(k);if(b_cookie&&b_cookie.contentFeedback){b_cookie.contentFeedback=b_cookie.contentFeedback+"|"+booking.env.b_hotel_id}else{if(typeof(b_cookie)=="undefined"){b_cookie={}}b_cookie.contentFeedback=booking.env.b_hotel_id}if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:booking.env.b_domain_end})}if(booking.env.b_site_experiment_event_tracking&&(typeof pageTracker!="undefined"||typeof _gaq!="undefined")){booking.google.trackEvent(booking.google.clickTracker,"Content Feedback","Sent")}}function j(){$("#b_content_feedback_yes").hide();if($("#content_feedback_checkboxes").length){$("#content_feedback_checkboxes").show()}else{$('<div id="content_feedback_checkboxes"><label for="translation"><input id="translation" type="checkbox" name="reason[]" value="translation">'+booking.env.content_feedback_response1+'</label><label for="difficult"><input id="difficult" type="checkbox" name="reason[]" value="difficult">'+booking.env.content_feedback_response2+'</label><label for="incorrect"><input id="incorrect" type="checkbox" name="reason[]" value="incorrect">'+booking.env.content_feedback_response3+'</label><label for="missing"><input id="missing" type="checkbox" name="reason[]" value="missing">'+booking.env.content_feedback_response4+'</label><label for="contact"><input id="contact" type="checkbox" name="reason[]" value="contact">'+booking.env.content_feedback_response5+'</label><button onclick="b_Feedback.send();">'+booking.env.send_your_feedback+"</button><a href=\"#\" onclick=\"$('#content_feedback_checkboxes').hide(); $('#b_content_feedback_yes').show(); return false;\">Close</a></div>").appendTo("#content_feedback_invite")}}function c(k){$(document.body).append('<div id="b_feedback"></div>');$("#b_feedback").load(k,function(){if($("#b_feedback").css("position")=="fixed"){$("#b_feedback").css("top",$(window).height()/2-$("#b_feedback").height()/2)}else{var l=(document.body.scrollTop==0)?(window.pageYOffset)?window.pageYOffset:(document.body.parentElement)?document.body.parentElement.scrollTop:0:document.body.scrollTop;$("#b_feedback").css("top",l+($(window).height()/2-$("#b_feedback").height()/2))}$("#b_feedback").bgiframe();b_Feedback.createRoomsDd()})}return{init:g,initRatesFeedback:h,createRoomsDd:f,registerEvent:e,send:d,open:j,popup:c}}();booking[sNSStartup].b_Feedback={priority:9,init:function(){b_Feedback.initRatesFeedback()}};booking.ensureNamespaceExists(sNSExperiments);booking[sNSExperiments].content_feedback={priority:9,init:function(){b_Feedback.init()}};booking[sNSStartup].show_nr_accounts={priority:9,counters:{},updateCounters:[],counterCount:0,startingzeros:"00000000",init:function(){this.counterInit()},counterInit:function(){var c=this;$(".show_counter").each(function(){c.addCounter(this)});c.startRunning()},addCounter:function(o){this.counterCount++;var q=this.counterCount;this.counters["counter_"+q]={nodeId:q,displayAccounts:0,intervalCounter:0,expected:0,increase:1,interVal:null,fields:1};var m=$(o).attr("fields");var k=this.counters["counter_"+q];k.fields=m;if(k.fields>8){this.startingzeros=this.startingzeros+"0"}if(m>1){var k=this.counters["counter_"+q];k.expected=$(o).attr("expected");k.displayAccounts=parseInt(k.expected);var j=$(o).attr("number");k.increase=$(o).attr("increase");var n=false;for(var g=0;g<m;g++){var e=m-g-1;var f=this.startingzeros+k.displayAccounts;var h=f.charAt(~(m-f.length)+g+1);if(h=="0"&&!n){var l="none"}else{var l="block";n=true}$(o).append('<div class="cntr_nr" id="nr_ac_'+e+"_"+q+'" style="display:'+l+';"><span>'+h+"</span></div>");if(j&&j.length>2){var d=null;if(j.indexOf(".")>-1){var d="."}if(j.indexOf(",")>-1){var d=","}if(d!=null){var c=j.split(d)[1].length;if(j&&e%3==0&&e!=0){$(o).append('<span class="counter_divider">'+d+"</span>")}}}}}},startRunning:function(){for(items in this.counters){var c=this.counters[items];var d=1000/c.increase;this.runInterval(c,d)}},runInterval:function(c,d){var e=this;var c=c;this.updateCounters[c.nodeId]=window.setInterval(function(){c.displayAccounts++;var f=e.startingzeros+c.displayAccounts;var h=true;for(var j=c.fields;j>-1;j--){var g=f.charAt(f.length-j-1);var k=document.getElementById("nr_ac_"+j+"_"+c.nodeId);if(k){k.innerHTML="<span>"+g+"</span>";if(g=="0"&&h){k.style.display="none"}else{k.style.display="block";h=false}}}},d)}};function popup_cancel_big_index(c){window.open(c,"","toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=yes,resizable=1,width=950,height=500,left=200,top=200");return false}booking[sNSStartup].default_group_new={priority:9,user_modified:false,group_set:$(".group_set").length,init:function(){if(booking.env.b_site_experiment_groups_number_rooms){function f(m){if(m=="notshowing"){$("#clear_group_spec").hide();$("#group_spec").show()}else{if(m=="showing"){$("#clear_group_spec").show();$("#group_spec").hide()}}}function h(){f("showing");$("#define_group").show()}function d(){$(".default_group tbody tr").slice(1).remove();$("select[name=group_adults]")[0].value=2;$("select[name=group_children]")[0].value=0;if($(".index.landing").length>0){f("notshowing")}$("#group_nr_rooms")[0].value=1;$("#ages_header").hide();$("#group_definition input").remove();$(".index.landing #define_group").hide()}function e(){$("#group_nr_rooms").val($(".default_group tbody tr").length)}$("#define_group h3").remove();group_defined=(booking.env.b_group)?true:false;if(!group_defined){$("#define_group").hide();f("notshowing")}else{f("showing")}$("#group_spec").click(function(){h();return false});$("#clear_group_spec").click(function(){d();return false});$("#group_nr_rooms").change(function(){var o=$(this).val(),t=$(".default_group tbody tr"),m=t.length;if(o<m){t.slice(o).remove()}else{for(var q=m+1;q<=o;q++){var n=$("#define_group tbody").append(booking[sNSStartup].b_GroupDefinitionModule.row_markup.replace("XXX",q));booking[sNSStartup].b_GroupDefinitionModule.addChildrenHandlers(n)}}});$("#define_group tfoot a").click(function(){e()});$("#define_group tbody a").live("click",function(){e()})}else{var g=this;$("#in_a_group, #in_a_group_narrow, #define_group h3").hide();$("#define_group table").addClass("hidelinks");$("#default_group_new_block select, #predefined_group").change(function(){$("#define_group").show()});function j(o,n,m){if(g.group_set==1||m>0||n>parseInt(o)+1){var q=".hidelinks";if(g.group_set!=1){q+=", #group_definition_modal"}$(q).show()}else{$(".hidelinks").not("#group_definition_modal .hidelinks").hide()}}$("#default_group_new_block select").change(function(){var v=$("#nr_rooms").val(),w=$("#nr_adults").val(),m=$("#nr_children").val(),x=$(".default_group tbody tr"),q=x.length;if(v<q){x.slice(v).remove();g.user_modified=false}else{for(var o=q+1;o<=v;o++){var t=$("#define_group tbody").append(booking[sNSStartup].b_GroupDefinitionModule.row_markup.replace("XXX",o));booking[sNSStartup].b_GroupDefinitionModule.addChildrenHandlers(t)}}if(g.user_modified===false){$("select[name=group_adults]").each(function(y){this.value=(y<w%v)?Math.floor(w/v)+1:Math.floor(w/v)});$("select[name=group_children]").each(function(y){this.value=(y<m%v)?Math.floor(m/v)+1:Math.floor(m/v);$ages_row=$(this).parent().next();var z=$ages_row.find("input").length;if(this.value-1<z){if(this.value>0){$ages_row.find("input:gt("+(this.value-1)+")").remove()}else{$ages_row.find("input").remove()}}else{for(var y=0;y<this.value-z;y++){$ages_row.append(booking[sNSStartup].b_GroupDefinitionModule.age_markup)}}});if($("input[name=age]").length===0){$("#ages_header").hide()}else{$("#ages_header").show()}}else{var n=w,u=m;$(".default_group select").each(function(){if(this.name=="group_adults"){if(n>0){n-=this.value}else{this.value=0}}else{if(u>0){u-=this.value}else{this.value=0}}})}j(v,w,m)});$(".default_group table select").live("change",function(){var n=0,m=0;$(".default_group table select").each(function(){if(this.name=="group_adults"){n+=parseInt(this.value)}else{m+=parseInt(this.value)}});$("#nr_adults").val(n);$("#nr_children").val(m);g.user_modified=true});var k=$("#nr_rooms").val(),l=$("#nr_adults").val(),c=$("#nr_children").val();j(k,l,c)}}};booking[sNSStartup].b_GroupDefinitionModule={row_markup:"",age_markup:'<input type="text" name="age" maxlength="2" size="2" autocomplete="off" />',age_markup_request_children_in_sr:'<input type="text" name="age" maxlength="2" size="2" value="-1" style="visibility: hidden" autocomplete="off" />',attachEvents:function(){var d=this,c=function(){var f,g=$("#frm select[name^=check]"),e=g.length-1;while(e--){f=$(g[e]).val();if(!f||+f<=0){return false}}return true};$("#in_a_group").click(function(){if(this.checked){$("#group_definition").show();$("#clear_group").val("0")}else{$("#group_definition").hide();$("#clear_group").val("1")}});$("#in_a_group_narrow").click(function(){if(this.checked){d.showModalWindow();$("#clear_group").val("0")}else{$("#group_definition_modal").hide();$("#clear_group").val("1")}});$("#define_group tfoot a").click(function(){var f=$("#define_group tbody tr").length+1;var e=$("#define_group tbody").append(d.row_markup.replace(/XXX/,f));$("#clear_group").val("0");d.addChildrenHandlers(e);return false});$("#define_group tbody a").live("click",function(){$(this).parents("tr").eq(0).remove();if($("#group_definition tbody tr").length===0){$("#clear_group").val("1")}return false});$("#define_group input").live("click",function(){if(this.value=="?"){this.value=""}});$("#show_modal, #show_modal_nr, #show_modal_ssb").click(function(){$(".search_summary_block").hide();$(".original_search_form").removeClass("original_search_form_hidden");d.showModalWindow();return false});$("#clear_and_submit, #clear_and_submit_nr").click(function(){$("#clear_group").val("1");$("#in_a_group").attr("checked","");$("#group_definition, .b_group_recommendation").hide();$("#frm")[0].submit();return false});$("#close").click(function(){var e=$("#org_nr_rooms").val();org_nr_adults=$("#org_nr_adults").val();org_nr_children=$("#org_nr_children").val();$("#nr_rooms").val(e).trigger("change");$("#nr_adults").val(org_nr_adults).trigger("change");$("#nr_children").val(org_nr_children).trigger("change");$("#group_definition_modal").hide();return false});$(".group_change").click(function(){if(booking.env.b_site_experiment_omni_search){$("#group_definition_modal").hide();d.updateCount();return false}else{if(!c()){$("#group_definition_modal").hide()}}});$("#frm").submit(function(h){if($("#availcheck")[0].checked){return}var f=0;var l=Array();var k=false;$("#group_definition input[name=age]").each(function(){if(this.value.match(/[mMkKhHlLaA]/)){this.value="0"}if(this.value.match(/\D/)){this.value=""}if(this.value>17){this.value=""}if(this.value==""){$(this).addClass("error");$("#ages_header").removeClass("error");h.preventDefault();return false}else{$(this).removeClass("error");$("#ages_header").removeClass("error")}l.push(this.value)});if(booking.env.b_site_experiment_new_group_params){var j=0;var g="";$("#group_definition select[name=group_adults]").each(function(){g+="|p:"+this.value+",c:"+$("#group_definition select[name=group_children]")[f].value+",";for(var e=0;e<$("#group_definition select[name=group_children]")[f].value;e++){g+="a:"+l[j]+",";j++}f++});$("#group_config").val(g)}else{$("#group_config").val("")}if(k){h.preventDefault();return false}});$("#availcheck").click(function(){if(this.checked){if(booking.env.b_site_experiment_omni_search){$("#show_modal, #define_group input, #define_group select").attr("disabled","disabled");$("fieldset.group","#frm").addClass("disableme");$("#define_group").addClass("disableme")}else{$("#define_group input, #define_group select").attr("disabled","disabled");$("#define_group").addClass("disableme")}if($("#group_definition_modal").length){$("#group_definition_modal").hide();$("#in_a_group_narrow").attr("checked","")}}else{$("#show_modal, #define_group input, #define_group select").removeAttr("disabled");$("fieldset.group","#frm").removeClass("disableme");$("#define_group").removeClass("disableme")}})},update:function(g){var f=this;var e=$(g);var d=e.val();var h=e.parent().next().find("input").length;if(d-1<h){if(d>0){e.parent().next().find("input:gt("+(d-1)+")").remove()}else{e.parent().next().find("input").remove()}}else{for(var c=0;c<d-h;c++){e.parent().next().append(f.age_markup)}}if($("input[name=age]").length===0){$("#ages_header").hide()}else{$("#ages_header").show()}},setInitialVisibility:function(){if(!document.getElementById("in_a_group")||document.getElementById("in_a_group").checked){if(typeof $("#group_definition").show=="function"){$("#group_definition").show()}}else{$("#group_definition").hide();$("#clear_group").val("1")}$(".featuredRooms tbody").each(function(){if($(this).find("tr").length===0){$(this).parents("tr").eq(0).remove()}});if(booking.env.b_site_experiment_omni_search){this.updateCount()}},showModalWindow:function(){if(booking.env.b_site_experiment_omni_search){$("body").trigger("click")}$("#group_definition_modal").show();if(!booking.env.b_site_experiment_omni_search){var c=(document.body.scrollTop==0)?(window.pageYOffset)?window.pageYOffset:(document.body.parentElement)?document.body.parentElement.scrollTop:0:document.body.scrollTop;$("#group_definition_modal").css("top",c+($(window).height()/2-$("#group_definition_modal").height()/2));$("#group_definition_modal").bgiframe()}},selectRecommendedRooms:function(){$("#roomsForm select").each(function(){this.value=0});var f="";for(var e=0;e<booking.env.b_room_groups.length;e++){var d=booking.env.b_room_groups[e].split(":");var g=$("select[name=nr_rooms_"+d[0]+"]").val();$("select[name=nr_rooms_"+d[0]+"]").val(parseInt(g)+parseInt(d[1]))}for(var e=0;e<booking.env.b_room_extrabeds.length;e++){var c=booking.env.b_room_extrabeds[e].split(":");f+=c[0]+":"+c[1]+";";$('<input type="hidden" name="extrabeds_'+c[0]+'" value="'+c[1]+'"/>').appendTo($("#roomsForm"))}$('<input type="hidden" name="is_group_recommendation" value="1"/>').appendTo($("#roomsForm"));$("#roomsForm")[0].submit()},addChildrenHandlers:function(d){var c=this;$('select[name="group_children"]',d).change(function(){c.update(this)})},updateCount:function(){var c=0;$("#default_group_new_block select.omni_people option:selected").each(function(){if($(this).val()-0==$(this).val()){c=c+parseInt($(this).val())}});if(c>2){$("fieldset.group","#frm").addClass("group_set");if($("#group_count").length>0){$("#group_count").html(c)}else{$("fieldset.group .field","#frm").append('<div id="group_count">'+c+"</div>")}}else{if($("#group_count").length>0){$("#group_count").html(c)}}},init:function(){var c=this;if($("#define_group").length){this.row_markup="<tr><th>"+booking.env.group_room+'&nbsp;XXX:&nbsp;</th><td><select name="group_adults"><option value="0">0</option><option value="1" selected="selected">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td><td class="b"><select name="group_children"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option></select></td><td class="b"></td><td><a href="#">'+booking.env.group_remove+"</a></td></tr>";this.attachEvents();this.setInitialVisibility();if($("#availcheck")[0].checked){$("#define_group input, #define_group select").attr("disabled","disabled");$("#define_group").addClass("disableme")}if($("#define_group").css("display")=="none"){$("#inout select").change(function(){$("#define_group").show()})}}$("#select_group").click(function(){c.selectRecommendedRooms();this.blur();return false});$("#select_group2").click(function(){c.selectRecommendedRooms();this.blur();return false});this.addChildrenHandlers(document)}};booking.destination_game_home=(function(){var m,e,l,j,c,f=booking.env.b_good_msg,h=booking.env.b_bad_msg,k;var n=function(){m=$("a.social_remove","#top-destinations");e=$("a.social_love","#top-destinations");l=$("#top-destinations table").attr("data-seen_ids");j=$("#create_profile");f=booking.env.b_good_msg;h=booking.env.b_bad_msg;k=0;String.prototype.supplant=function(q){return this.replace(/{([^{}]*)}/g,function(t,o){var u=q[o];return typeof u==="string"||typeof u==="number"?u:t})};e.live({mouseenter:function(){var o=$('<div class="pop_tooltip">'+f+"</div>");o.appendTo($(this));o.css("margin-left",parseInt("-"+(o.width()/2))+"px").show()},mouseleave:function(){$(this).find("div:last").hide().remove()}});e.live("click",function(){var q=$(this).closest("td");var o=$(this);c=$(this).attr("data-ufi");g(q,c,o);k++;return false});m.live({mouseenter:function(){var o=$('<div class="pop_tooltip">'+h+"</div>");o.appendTo($(this));o.css("margin-left",parseInt("-"+(o.width()/2))+"px").show()},mouseleave:function(){$(this).find("div:last").hide().remove()}});m.live("click",function(){var o=$(this).closest("td");c=$(this).attr("data-ufi");d(o,c);return false})};var d=function(v,t){var o="";var u="seen="+(l||$("#top-destinations table").attr("data-seen_ids"))+";ufi="+t+";favorite=0;tmpl=destination_suggestion";var q=false;var w=false;$.ajax({type:"GET",url:"/destinationsuggestion.html",data:u,dataType:"json",beforeSend:function(){v.toggleClass("loading")},complete:function(){v.toggleClass("loading")},success:function(A){if(A.new_destination.image_url){var y=A.new_destination.image_url}else{var y=booking.env.b_default_city_image}if(v.find(".clickblock").length>0){w=true}o+='	<div class="loveicons loveicons_4">';o+=' <a data-ufi="'+A.new_destination.ufi+'" class="social_love " href="#"><em>Add to favourite locations</em></a>';o+=' <a data-ufi="'+A.new_destination.ufi+'" class="social_remove" href="#"><em>Remove location</em></a>';o+="	</div>";if(w){o+='<a class="clickblock" href="'+A.new_destination.city_url+'"><span class="thumblink">'}else{o+='<a class="thumblink" href="'+A.new_destination.city_url+'">'}o+='	<img class="round8" src="'+y+'" alt="'+A.new_destination.ufi_name+'" width="100" height="100">';if(w){o+="</span>"}else{o+="</a>"}o+='<div class="promotion_data">';if(!w){o+='	<a class="citylink" href="'+A.new_destination.city_url+'" title="'+A.new_destination.ufi_name+'">'}else{o+='	<span class="citylink">'}o+=A.new_destination.ufi_name;if(!w){o+="</a>"}else{o+="</span>"}o+="	<br>";if(!w){o+='	<a class="countrylink" href="'+A.new_destination.country_url+'">'}else{o+='	<span class="countrylink" href="'+A.new_destination.country_url+'">'}o+=' <span title="'+A.new_destination.country_name+'" class="flag_16 flag_16_'+A.new_destination.country_code+'">&nbsp;</span>';o+=" "+A.new_destination.country_name;if(!w){o+="	</a>"}else{o+="	</span>"}var C={num:A.new_destination.hotel_count};var z=String(A.new_destination.hotel_count_tpl);var B=z.supplant(C);o+='	<span class="hotelcount">'+B+"</span>";o+="</div>";if(w){o+="</a>"}l=A.new_destination.seen_ids;if(w){var x=".clickblock, .loveicons"}else{var x=".thumblink, .promotion_data, .loveicons"}v.find(x).fadeOut(function(){$(this).remove();if(!q){v.append(o);q=true}})},error:function(){var x='<span class="destination_error">'+booking.env.b_default_error_msg+"</span>";v.html(x)}})};var g=function(w,u,t){var o="";var q=t.hasClass("social_loved")?0:1;var v="seen="+(l||$("#top-destinations table").attr("data-seen_ids"))+";ufi="+u+";favorite="+q+";tmpl=destination_suggestion";$.ajax({type:"GET",url:"/destinationsuggestion.html",data:v,dataType:"json",beforeSend:function(){w.toggleClass("loading")},complete:function(){w.toggleClass("loading")},success:function(x){t.toggleClass("social_loved");$('<a class="social_loved faded"></a>').appendTo(t).fadeOut(function(){t.find(".pop_tooltip").fadeOut(function(){$(this).remove()})});c=t.attr("data-ufi")}})};return{init:n}}());booking[sNSExperiments].destination_game_home={priority:1,init:function(){booking.destination_game_home.init()}};booking[sNSExperiments].disambiguation_skip_links={priority:9,init:function(){var c=false;$(".more_disamb_results_link").click(function(){if(!c){var h=$(this),d=h.attr("href"),g=h.attr("data-type"),f=h.attr("data-url"),e;if(!f){return true}c=true;$("#disambiguation_partitions_overlay").show();f=(f.replace(/[\&|\;]partition_dest_type\=\w*/g,""))+"&tmpl=disambiguation_block";if(typeof(g)!=="undefined"&&g!=="All"){f+="&partition_dest_type="+g}e=$("#sideNav").find(".current");e.removeClass("current");h.parent().addClass("current");$.get(f,{},function(j){if(j){j=j.replace(/[\&|\;]tmpl=disambiguation_block/g,"");$("#disambiguation_partitions_wrapper").html(j)}c=false})}return false})}};booking[sNSStartupLoad].disambiguation_custom_variable={priority:9,init:function(){if(booking.env.b_is_disambiguation){booking.google.setGACustomVariable({type:"Search",value:"Normal"})}}};booking[sNSExperiments].disambiguation_survey={priority:9,init:function(){var c={};if(typeof(JSON)!=="undefined"){c=JSON.parse($.cookie("b"))||{}}if(!c.dis_svy){$("#disambiguation_survey").show()}$("#kampylink").click(function(){$("#disambiguation_survey").hide();c.dis_svy=1;if(typeof(JSON)!="undefined"){$.cookie("b",JSON.stringify(c),{path:"/",domain:booking.env.b_domain_end})}})}};booking[sNSExperimentsLoad].dotd_redesign={priority:9,init:function(){var c=$("#dotd-defer");c.replaceWith(c.data("defer"))}};booking[sNSExperiments].expired_login_message={priority:9,expire_time:600000,init:function(){this.reInit()},reInit:function(){var c=this;setTimeout(function(){c.showLoggedOutPopup()},this.expire_time)},showLoggedOutPopup:function(){$(".user_salutation").each(function(){var c=$(this).attr("id");if(c=="hidden_login_form"){$(this).removeAttr("id");$(this).show()}else{if(c=="my_links"){$(this).remove()}}});$("#link_my_profile").remove();booking.lightbox.open(null,null,null,"lb_logged_out")}};$(function(){$.extend($.expr[":"],{containsi:function(f,d,c){return(f.textContent||f.innerText||"").toLowerCase().indexOf((c[3]||"").toLowerCase())>=0}});$("#search_form").submit(function(){var d=$("#keyword").val();if(!d.length){return false}var c=["item_searching","topten","item_volcano_eruption","item_roomtypes","item_pricing","item_creditcards","item_payments","item_reservation_process","item_hotelpolicies","item_confirmation","item_extrafacilities","item_cancellation","item_directions","item_reviews",];$(c).each(function(f,g){hideEl(g)});$("#search_results").children().remove();var e=[];$('a:containsi("'+d+'")').each(function(g,k){var j=$(k).parent(),h=j.next(),f=h.attr("id");if(f&&f.match(/faqa\d+/)){j.clone().appendTo("#search_results");h.clone().appendTo("#search_results");e.push(f)}});if(!e.length){$("#search_results").append("<p>Nothing found</p>")}$.ajax({url:"/faqsearch",data:{q:d,r:e.join(","),lang:""}});return false});$(".staticmenustyle").children("li").children("a").each(function(c,d){$(d).click(function(){$("#search_results").children().remove()})})});booking.myFavoriteHotels=(function(){var w=[],B=[],G,q,A,d,v=[],C=1,k=true,l=$(".favorites_loaded_list"),t,z,c=1023,y=3,D=false,j='(<a class="b_change_dates" href="#edit_dates">'+booking.env.change_dates+"</a>)",h='<a class="b_change_dates" href="#edit_dates">Select dates</a>';var n=function(J){var I='<div class="favorite_hotel favorite_hotel_'+J.hotel_id;if(J.is_favorite){I+=" favorite_hotel_s-favorite"}I+='" data-id="'+J.hotel_id+'"><a href="'+J.url+'"><img src="'+J.square40+'" width="30" height="30" alt=""/></a><div class="favorite_hotel_name"><div class="favorite_hotel_name_inner_1"><div class="favorite_hotel_name_inner_2">'+J.title+'</div></div></div><div class="favorite_hotel_remove">&times;</div></div>';return I};$("#show_fav").click(function(S){var M,J=$(window),I=w.length,T=261,O=J.scrollTop()+60,K=J.width(),Q=Math.round((K-c)/2),P=Math.floor(Q/T*2);if(booking.env.current_hotel_id&&!$(".remove_from_my_hotels").is(":visible")){current_viewed_hotel=booking.env.current_hotel_id;var L=booking.env.comparisonpage+"hotel_ids="+current_viewed_hotel+","+w;D=true;I+=1}else{var L=booking.env.comparisonpage+"hotel_ids="+w}console.log(L);for(var N=P;N-->0;){if(I>y){c+=T;y++;Q-=T/2}}$(".favorites_comparison").load(L+" .hotel_comparison_matrix",function(){var V=$(".hotel_comparison_matrix");t=$("#switch_hotel_left");z=$("#switch_hotel_right");V.find("h1.title").after('<a id="close_fav_lightbox" href="#">'+booking.env.close_tag+"</a>");var X=$(".starts_favorites");X.find("h1 a").append(X);X.remove();var U=V.find(".notice");var W=U.html();loadedElementHeight=V.height();if(W!=null){V.find("h1.title").after('<p class="price_dates">'+W+"</p>")}else{}$(".remove_hotel2").html(booking.env.remove_favorite+'<span class="fav_hotel_removeIcon"></span>').addClass("remove_from_my_hotels");if(D){$(".hotel-1").addClass("current_viewed_hotel")}$(".bigtopbuttons").remove();U.remove();k=false;M=V.height()+82;$(".shadow_border").css({width:c+20+"px",height:M+"px"});R.css({width:c-62});$(".hotel_comparison_matrix").css({width:c-84+"px"});if(I>y){}});l.css({visibility:"hidden"});var R=$(".favorites_comparison");l.css({top:O+"px",left:Q+"px",width:c,visibility:"visible"}).show();S.preventDefault()});$("#close_fav_lightbox").live("click",function(I){l.hide();I.preventDefault()});$(".b_change_dates").live("click",function(){booking[sNSStartup].lightbox.show($("#editDates"),{customWrapperClassName:booking.env.b_site_experiment_av_calendar?"modal-edit-dates-av":"modal-edit-dates"})});l.find("ul.tags li").live({mouseover:function(){$("li[title='"+$(this).attr("title").replace("'","\\'")+"']").addClass("highlight-tag")},mouseout:function(){$("li[title='"+$(this).attr("title").replace("'","\\'")+"']").removeClass("highlight-tag")}});function o(){var J,I;l.find("td").live({mouseover:function(K){I=$(this).index()+1;if(I!=1){J=l.find("td:nth-child("+I+")");J.addClass("hoverHotel");J.first().addClass("hoverHotelFirst");J.last().addClass("hoverHotelLast");var L=J.find(".prev_hotel, .next_hotel");L.show()}},mouseout:function(){if(I!=1){J.removeClass("hoverHotel");J.first().removeClass("hoverHotelFirst");J.last().removeClass("hoverHotelLast");J.find(".prev_hotel, .next_hotel").hide()}}})}function e(M){var L,I=booking.env.current_hotel_id?'<td clas="hotel-1"></td>':"";for(var K=0;K<M;K++){L+='<td><a href="#" class="change_the_hotel" data-id="'+v[K].hotel_id+'"><img src="'+v[K].square40+'" width="30" height="30" alt=""/>'+v[K].title+"<span></span></a></td>"}var J="<tr><td>Select hotels to compare</td>"+I+L+"</tr>";$("#tblHotelComparisson thead").prepend(J)}$("#close_fav").click(function(I){$(".favorites_loaded_list").slideUp("slow",function(){$("#favorite_thumbs").show()});$(this).hide();I.preventDefault()});var x=function(){if(typeof b_cookie==="undefined"){window.b_cookie={}}G=$("#show_fav");$noFavorites=$(".no_favorites");q=$(".my_favorites_bar");A=$(".dock_close");d=/(.+)\/images\/hotel$/.exec(booking.env.dock_images_url)[1];$.ajax({url:"/favorites",dataType:"json",success:function(L){var K,I=L.length,M="";for(K=0;K<I;K++){L[K].square40=d+L[K].square40;L[K].url=booking.env.domain_for_app+L[K].url+booking.env.dock_url_params;M+=n(L[K]);v.push(L[K]);w.push(L[K].hotel_id.toString());$(".favorites_bar_buttons").each(function(){var N=$(this);if(N.attr("data-id")==L[K].hotel_id.toString()){N.hide();N.closest(".remove_from_my_hotels").show()}})}q.html(M);m("init");var J=w.length;if(J<C){$noFavorites.show();G.addClass("show_all_favorites-hidden");G.hide();return}if(J>=2){}if(b_cookie.dock_my_hotels==="closed"){A.addClass("dock_s-closed").removeClass("show_all_favorites-hidden")}else{G.removeClass("show_all_favorites-hidden");A.removeClass("show_all_favorites-hidden");$noFavorites.hide()}}});q.delegate(".favorite_hotel_remove","click",function(){var I=$(this).parent().attr("data-id");H(I)});A.bind("click",function(){toggleDock()});$(".dock_compare_link").bind("click",function(){})};var E=function(J){var K=J.hotel_id;if($.inArray(K,w)>-1){var I=q.find(".favorite_hotel_"+K);if(I.hasClass("favorite_hotel_s-favorite")){return}else{I.addClass("favorite_hotel_s-favorite")}}else{w.unshift(K);q.prepend(n(J))}if(w.length>=C&&G.hasClass("show_all_favorites-hidden")){g();b_cookie.dock_my_hotels="open";F()}if(w.length>=2){}$.ajax({url:"/favorites/add",type:"POST",data:{hotel_id:K,pid:booking.env.pageview_id}});m("addHotel",K);k=true;booking.google.trackEvent(booking.google.clickTracker,"FavoritesBar","Hotel added")};var H=function(K){var J=$.inArray(K,w);if(J===-1){return}w.splice(J,1);var I=q.find(".favorite_hotel_"+K);if(w.length>=C){I.remove()}else{if(G.hasClass("show_all_favorites-hidden")){I.remove();A.addClass("show_all_favorites-hidden");$noFavorites.show()}else{u(true,function(){I.remove()})}}if(w.length<2){G.hide()}$.ajax({url:"/favorites/delete",type:"DELETE",data:{hotel_id:K}});m("removeHotel",K);k=true;booking.google.trackEvent(booking.google.clickTracker,"FavoritesBar","Hotel removed")};var g=function(){var I=A.hasClass("show_all_favorites-hidden")?G.add(A):G;A.removeClass("dock_s-closed");$noFavorites.hide();I.css("bottom",-45).removeClass("show_all_favorites-hidden").animate({bottom:0},"fast")};var u=function(J,K){var I=J?G.add(A):G;I.css("bottom",0).animate({bottom:-45},"fast",function(){I.addClass("show_all_favorites-hidden");A.addClass("dock_s-closed");$noFavorites.show();if($.isFunction(K)){K()}})};var F=function(){if(typeof JSON==="undefined"){return}$.cookie("b",JSON.stringify(b_cookie),{expires:30,path:"/",domain:booking.env.b_domain_end})};var f=function(J,I){if(!B[J]){B[J]=[]}B[J].push(I)};var m=function(K){var L=B[K];var J;var I=L.length;if(!L){return}for(J=0;J<I;J++){L[J].apply(this,arguments)}};return{init:x,addHotel:E,removeHotel:H,attachObserver:f}}());booking[sNSExperiments].favorites_bar={priority:9,init:function(){booking.myFavoriteHotels.init();booking.myFavoriteHotels.attachObserver("addHotel",function(c,d){$(".add_to_my_hotels").each(function(){var e=$(this);var f=e.attr("data-id");if(f===d){e.hide()}});$(".remove_from_my_hotels").each(function(){var e=$(this);var f=e.attr("data-id");if(f===d){e.show()}})});booking.myFavoriteHotels.attachObserver("removeHotel",function(c,d){$(".add_to_my_hotels").each(function(){var e=$(this);var f=e.attr("data-id");if(f===d){e.show()}});$(".remove_from_my_hotels").each(function(){var e=$(this);var f=e.attr("data-id");if(f===d){e.hide()}})});booking.myFavoriteHotels.attachObserver("init",function(){$(".add_to_my_hotels").live("click",function(){booking.myFavoriteHotels.addHotel({hotel_id:this.getAttribute("data-id"),square40:this.getAttribute("data-thumbnail"),title:this.getAttribute("data-name"),url:this.getAttribute("data-url"),is_favorite:true})});$(".remove_from_my_hotels").live("click",function(){var e=this.getAttribute("data-id");booking.myFavoriteHotels.removeHotel(e);if($(this).hasClass("remove_hotel2")){var c=$(this).parent().parent().index()+1;var d=$(".favorites_loaded_list").find("td:nth-child("+c+")");d.fadeOut("500").remove()}$(this).parent(".hotelinfo").css("background-color","#FFD3D3").fadeOut("500",function(){$(this).remove()})})})}};booking[sNSStartup].fdTutorial={priority:8,init:function(){$("a.fd_start").click(function(){$("#tutorial_popup_2").delay(300).fadeIn(300);return false});$("a.fd_close").click(function(){var d=$(this).attr("id");var c=parseInt(d.split("_")[1]);$("#tutorial_popup_"+c).fadeOut(300);return false});$("a.fd_next").click(function(){var e=$(this).attr("id");var d=parseInt(e.split("_")[1]);var c=d+1;$("#tutorial_popup_"+d).fadeOut(300);$("#tutorial_popup_"+c).delay(300).fadeIn(300);return false});$("a.fd_restart").click(function(){var d=$(this).attr("id");var c=parseInt(d.split("_")[1]);$("#tutorial_popup_"+c).fadeOut(300);$("#tutorial_popup_1").delay(300).fadeIn(300);return false})}};booking[sNSStartupLoad].flash_deals_for_city={priority:9,init:function(){$("#flash_deal_city_sr #city_deal").change(function(){$("#flash_deal_city_sr")[0].submit()})}};booking[sNSExperimentsLoad].google_plus_one_button={priority:9,init:function(){if(!($.browser.msie&&parseInt($.browser.version,10)>=9)){var c=document.createElement("script");c.type="text/javascript";c.async=true;c.src="//apis.google.com/js/plusone.js";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}}};booking[sNSExperiments].header_2012=(function(){var c=function(){$("#b_nav_profile").bind("click",function(){$(this).toggleClass("selected");if($("#b_header").hasClass("profile_slide_down")){$("#b_header").removeClass("profile_slide_down").addClass("profile_slide_up")}else{$("#b_header").removeClass("profile_slide_up").addClass("profile_slide_down")}});$(".profile_login_switcher").bind("click",function(){$("#profile_forms").toggleClass("profile_sign-in").toggleClass("profile_sign-up")});$("select","#header_currency").bind("change",function(){$(this).parent("form").submit()});$("select","#header_language").bind("change",function(){$(this).parent("form").submit()})};var d=function(){c()};return{init:d}}());$(".help_foldout").click(function(){$("#helpPopup").slideToggle();$(this).toggleClass("open");return false});$(".menu_close_link").click(function(){$("#helpPopup").slideToggle();return false});booking[sNSExperiments].home_upcoming_bookings={priority:9,init:function(){var d=this;$("#upcoming_bookings_container ul li").each(function(){$(this).hover(function(){$(".upcoming_actions").hide();$(".upcoming_actions",this).show();var e=$(this).height();$(".date_box").css("height",e)})});var c=false;$(document).ready(function(){$("#upcoming_bookings_container ul li").hover(function(){c=true},function(){c=false;$(".upcoming_actions").hide()});$("body").mouseup(function(){if(!c){$(".upcoming_actions").hide()}})})}};(function(e,c,d){c[d].images_on_demand={priority:1,init:function(){var g=$("img[data-src]"),l=100,k=$(e),f=function(m){return(k.scrollTop()+k.height())>(m.offset().top-l)},j=function(){var m=g.filter("[data-src]");if(m.length===0){k.unbind("scroll resize",j);return}m.each(function(){if(f($(this))){h(this)}})},h=function(m){var n=m.getAttribute("data-src");m.removeAttribute("data-src");m.setAttribute("src",n)};j();k.bind("scroll resize",j)}}})(this,this.booking,this.sNSExperiments);booking[sNSStartup].improve_calendar_closing={priority:9,init:function(){$(document.body).click(function(e){var d=$(e.target).parents("#calendar_popup").length;var c=$(e.target).parents(".calendarLink").length;if(!d&&!c){$(this).trigger("close_calendar",e.target)}});return true}};booking[sNSStartup].filterbox={priority:9,init:function(){if(booking.env.b_action==="searchresults"){$("div.filtercategory").each(function(){$(this).click(function(){$div=$(this).parents("div").eq(0).find("div.filteroptions");if($(this).hasClass("toggla_hide")){mySlideToggle($div);$(this).removeClass("toggla_hide")}else{mySlideToggle($div);$(this).addClass("toggla_hide")}this.blur();return false})})}}};booking[sNSExperimentsLoad].lazy_load_print_css={priority:9,init:function(){var c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=booking.env.print_css_href;c.media="print";document.getElementsByTagName("head")[0].appendChild(c)}};booking[sNSStartup].login_foldout={priority:9,fontchange:false,init:function(){var c=this;$("#login_redesign").click(function(){if(!$(this).hasClass("no_arrow")){if($(this).hasClass("login_opened")){$(this).removeClass("login_opened")}else{$(this).addClass("login_opened");booking.track.exp(booking.env.js_experiment_tracking.bs2_login_none_usps);booking.track.exp(booking.env.js_experiment_tracking.bs2_login_polish)}$("#login-form_wrapper fieldset").toggle();$("#login_open, #login_close, #login_optional").toggle()}return false});$(".in-pagelogin-form").submit(function(){if(booking.env.auth_level<1){var d=$(".in-pagelogin-form").height()-11}else{var d=$(".in-pagelogin-form").height()+19}$("#page_login_loading").css("height",d+"px").show()});$(".login_foldout").each(function(){var d=$("#loginPopup").height();if(d==0){var d=1000}$("#loginPopup").css({height:"0px","overflow-y":"hidden",display:"none"});$("#loginPopup").attr({shown:"false"});$(this).click(function(){c.toggle(document.getElementById("loginPopup"),d);return false});$("#closeLoginPopup").click(function(){c.toggle(document.getElementById("loginPopup"),d);return false});$(".stay_login").submit(function(){$("#foldout_error").hide();$("#login_loading").css("height",$("#foldout_login").height()+"px");$("#login_loading").show();var e=$("#login-form").height();$("#loginPopup").css({height:e+"px"});$("#loginPopup").animate({height:e+"px"},500,function(){});setTimeout(function(){c.hideLoader()},10000)})});$('input[name="username"]').each(function(){if(!isNaN($(this).val())){$(this).val("");var d=$(this).parents("form").get(0);$('input[name="password"]',d).val("")}})},thirdParty:function(f,c,e,d){if(c&&!d){$("#log_tar").attr("src",e)}if(d){$("#email_send").show("slow")}},thirdPartyCancel:function(e,d,c){this.hideLoader();if(typeof $.noticeAdd!="undefined"){$.noticeAdd({text:"\n \n \n "+d+" \n \n \n ",stay:false,stayTime:3000,type:"users",close:"all",destination:""})}if(c){$("#email_send").show("slow")}},signupLight:function(d){this.hideLoader();if(d.signupstatus=="OK"){$("#foldout_error_signup").hide();$("#email_place_holder").text($("#username").val());$("#signup_form_light").hide();$("#signed_up_message").show()}else{if(d.error){var c=unescape(d.error)}else{var c=""}$("#foldout_error_signup").html(c).show()}booking[sNSStartup].new_personal_menu.recheckHeight()},reCall:function(l){var f=this;if(l.reload){booking.env.b_req_login="1"}if(l.loginstatus=="OK"){if(l.userlanguage||l.currency){var c=booking.env.b_this_url;var j=(c.indexOf("?")>0)?"&":"?";if(l.userlanguage){c+=j+"lang="+l.userlanguage;j="&"}if(l.currency){c+=j+"selected_currency="+l.currency}c.replace("logout=1","");if(booking.env.b_site_experiment_reload_secure&&booking.env.b_nonsecure_hostname_https){c.replace(booking.env.b_nonsecure_hostname,booking.env.b_nonsecure_hostname_https)}document.location.href=c}else{if(booking.env.b_redirect){document.location.href=booking.env.b_redirect}else{if(booking.env.b_req_login=="1"){var g=booking.env.b_this_url;g.replace("logout=1","");document.location.href=g}else{var k=booking.env.b_this_url;k.replace("logout=1","");k=(k.indexOf("?")>0)?k+";logout=1":k+"?logout=1";sLoginLinks=l.loginlink.replace("sign_out_url",k);$("#login-form_wrapper fieldset").hide();$(".welcome_login_link").hide();$("#login_open, #login_close, #login_optional").hide();$(".hide_on_login").hide("slow");$(".show_on_login").show();if($("#login_redesign").length){var e=$("#login_redesign").get(0);$(e).addClass("no_arrow");$(e).mouseover(function(){return false});$(e.parentNode).mouseover(function(){return false})}var n=window.setTimeout(function(){$("#loginPopup").css({height:"0px","overflow-y":"hidden",display:"none"});$("#loginPopup").attr({shown:"false"});$("#password_input_top").val("");$("#listnav_user .user_salutation").hide();$("#listnav_user .user_salutation").attr("id","hidden_login_form");if(l.historylink){$("#myActivityHeader .my_history_header").text(l.historylink)}if(l.avatarurl&&l.avatarurl!="0"){if($("#my_image_room").length){$("#my_image_room").attr("src",l.avatarurl);$("#my_image_room").css({padding:"0",width:"24px",height:"24px"})}if($(".my_image img").length){$(".my_image img").each(function(){$(this).attr("src",l.avatarurl);if($(".head_firstname").length){$(this).css({"margin-top":"-5px",width:"26px",height:"26px"})}})}else{if($("#b_nav_profile").length){var q=l.avatarurl.replace("square_32","square_128");$("#b_nav_profile").addClass("has_avatar").css("background-image","url("+q+")")}}}else{if(l.defaultavatar!=0){if($(".my_image img").length){$(".my_image img").addClass("def_avtr");$(".my_image img").addClass("t_s_avtr_"+l.defaultavatar);$(".my_image img").css({"margin-top":"-4px","margin-left":"-1px",width:"24px",height:"24px"})}}}setTimeout(function(){var t=booking.env.js_experiment_tracking.show_menu_after_login;booking.track.exp(t);f.preShowMenu()},100);if(!$("#b_header").length){if(typeof $.noticeAdd!="undefined"){$.noticeAdd({text:"\n \n \n "+unescape(l.growl1)+"<br>"+unescape(l.growl2)+" \n \n \n ",stay:false,stayTime:3000,type:"users",close:"all",destination:"",addClassName:"notice_login"})}}},500);if(l.email!=""){if($("#email_confirm").length&&$("#email_confirm").val()==""){$("#email_confirm").val(l.email);$("#error_email_confirm").hide();$("#label_email_confirm").removeClass("val-no").addClass("val-yes")}if($("#email").length&&$("#email").val()==""){$("#email").val(l.email);$("#error_email").hide();$("#label_email").removeClass("val-no").addClass("val-yes")}}if(l.fdata1){if($("#address1").length&&$("#address1").val()==""){$("#address1").val(l.fdata1)}}if(l.fdata2){if($("#city").length&&$("#city").val()==""){$("#city").val(l.fdata2)}}if(l.fdata3){if($("#zip").length&&$("#zip").val()==""){$("#zip").val(l.fdata3)}}if(l.fdata4){if($("#cc1").length&&$("#cc1").val()==""){$("#cc1").val(l.fdata4)}}if(l.fdata5){if($("#phone").length&&$("#phone").val()==""){$("#phone").val(l.fdata5)}}var h=" ";if(l.fdata6){if($("#lastname").length&&$("#lastname").val()==""){$("#lastname").val(l.fdata6);$("#error_lastname").hide();$("#label_lastname").removeClass("val-no").addClass("val-yes")}$(".head_lastname").text(l.fdata6);h=l.fdata6}if(l.fdata7){if($("#firstname").length&&$("#firstname").val()==""){$("#firstname").val(l.fdata7);$("#error_firstname").hide();$("#label_firstname").removeClass("val-no").addClass("val-yes")}$(".head_firstname").text(l.fdata7);h=l.fdata7+" "+h}else{if(l.fdata6){$(".head_firstname").text("")}}if($(".login_for_name").length){if(h!=" "){$(".login_for_name").val(h);$(".login_for_name").css({color:"#003580"})}}$("input[name='username']").val(l.email);if(booking.lightbox&&booking.lightbox.isopen){booking.lightbox.close()}if($("#update_profile_row").length){$("#update_profile_row").show()}booking[sNSStartup].new_personal_menu.closeSelect(null,true,l.hasbookings);if(booking[sNSStartup].hide_email_confirm){booking[sNSStartup].hide_email_confirm.hideConfMailInit()}if(l.has_stored_cc>0){current_book_url=booking.env.b_this_url;current_book_url=current_book_url.replace(";logout=1","");current_book_url=current_book_url+";tmpl=profile/creditcards_ajax;";$("#bs3_cc_form #book_credit_card").load(current_book_url+" #book_credit_card");$("#cc_img").remove()}$(".login_text").hide();$(".loggedin_text").show();$("#multiple_login").hide();if(l.unreadmsg&&l.unreadmsg>0){$("#current_account_foldout .placeholder_hnm").text(l.unreadmsg).addClass("header_new_messages")}if(l.pendingreviews&&l.pendingreviews>0){$("#current_account_foldout .placeholder_hnb").text(l.pendingreviews).addClass("header_new_bookings")}f.hideLoader();if(booking.env.b_site_experiment_reload_secure&&booking.env.b_nonsecure_hostname_https){this.replaceSecure()}if(booking.env.b_action=="book"){if(booking[sNSStartup].authenticated_email_change){if($(".auth_user_info #email").length){$(".auth_user_info #email").addClass("email_change");booking[sNSStartup].authenticated_email_change.trackAuthenticatedEmailChange()}}}if($(".loadedContent").length){$(".loadedContent").removeClass("loadedContent")}}}}}else{if(l.error){var o=unescape(l.error)}else{var o=""}var m=(l.nofoldout)?false:true;var d=window.setTimeout(function(){if(m){$("#foldout_error").html(o).show();var q=$("#foldout_error").height()+32;$("#old_pin_login").css("top",q+"px");booking[sNSStartup].new_personal_menu.openSelect("current_account");$(".error_open_signup_tab").click(function(){$("#username").val($("#username_input_top").val());$("#new_user").click();return false});$(".error_forgotten_password").click(function(){$(".forgot_link_look").click();return false})}else{if($("#page_login_error").length){$("#page_login_error").html(o).show()}if($("#bs2_page_login_error").length){$("#bs2_page_login_error").html(o).show()}}if(booking.env.b_site_experiment_clean_wrong_login){$('input[name="password"]').val("")}},500);f.hideLoader();if(l.trackerror){booking.env.trackExperiment(booking.env.js_experiment_tracking.no_login_error,"error_logging_in")}}},toggle:function(c,f){var e=c.getAttribute("shown");if(e=="false"){$("#foldout_error").hide();$(c).css("display","block");if(f==1000){var d=$("#loginPopup form").get(0);f=$(d).height()}$(c).animate({height:f+"px"},500,function(){document.getElementById("username_input_top").focus()});c.setAttribute("shown","true")}else{$(c).animate({height:"0px"},500,function(){$(this).css("display","none")});c.setAttribute("shown","false")}},hideLoader:function(){$("#login_loading").hide();$("#signup_loading").hide();$("#page_login_loading").hide()},replaceSecure:function(){var f=document.getElementsByTagName("a");for(var c=0;c<f.length;c++){var d=f[c].href;d=d.replace(booking.env.b_nonsecure_hostname,booking.env.b_nonsecure_hostname_https);f[c].href=d}var e=document.getElementsByTagName("form");for(var c=0;c<e.length;c++){var d=e[c].action;d=d.replace(booking.env.b_nonsecure_hostname,booking.env.b_nonsecure_hostname_https);e[c].action=d}},preShowMenu:function(){if(booking.env.b_action!="book"){booking[sNSStartup].new_personal_menu.openSelect("current_account");oThat.moused_menu=false;$("#current_account").mouseenter(function(){oThat.moused_menu=true});setTimeout(function(){if(!oThat.moused_menu){booking[sNSStartup].new_personal_menu.closeSelect()}},4000)}}};booking[sNSStartup].new_personal_menu={priority:9,opening_state:0,cur_open:"",max_select_height:240,is_ie:0,openSlow:false,init:function(){var c=this;if(!booking.env.new_personal_menu_ie_performance){if($.browser.msie){$(".select_foldout ul li a").mouseenter(function(){$(this).addClass("hover_class")});$(".select_foldout ul li a").mouseleave(function(){$(this).removeClass("hover_class")})}}if($(".b_msie_6").length){this.is_ie=6}if($(".b_msie_7").length){this.is_ie=7}$("#signup_form_light").submit(function(){if(booking.env.js_experiment_tracking.light_signup){booking.env.trackExperiment(booking.env.js_experiment_tracking.light_signup)}var d=$("#signup_form_light").height()+55;$("#signup_loading").css("height",d+"px");$("#signup_loading").show();setTimeout(function(){c.hideLoader()},10000)});$("#signup_form_regular").submit(function(){if(booking.env.js_experiment_tracking.light_signup){booking.env.trackExperiment(booking.env.js_experiment_tracking.light_signup)}});$(".stay_login").submit(function(){$("#foldout_error").hide();$("#login_loading").css("height",$("#foldout_login").height()+"px");$("#login_loading").show();var g=document.getElementById("username_input_top").value;if(g==""){c.hideLoader();$('label[for="username_input_top"]').css({color:"#B30000","font-weight":"bold"});$("#username_input_top").focus();return false}else{var e=/^[0-9[\.]+$/.exec(g);if(e){var d=$("#bm_log").val();d+=(d.indexOf("?">0))?"&":"?";var f=$("#password_input_top",this).val();d+="pincode="+f+"&bn="+g;$("#tar_tmpl").attr("value","");$(this).attr("action",d);$(this).attr("target","_top")}}setTimeout(function(){c.hideLoader()},10000)});$(".select_box").mouseenter(function(){$(this).addClass("sel_hover")});$(".select_box").mouseleave(function(){$(this).removeClass("sel_hover")});$("body").click(function(f){if(c.opening_state==2){var e=$(f.target);if($(e).length){if(!$(e).parents("#current_account_foldout").length){c.closeSelect()}}}if(booking[sNSStartupLoad].googleMaps&&booking[sNSStartupLoad].googleMaps.map_opened&&!(booking.env.useLargerMapSr&&booking.map.mapHasBeenDragged)){var d=$(f.target);if((booking.env.b_action==="hotel"||booking.env.useLargerMapSr)&&(d.length&&(!d.parents("#b_map_container").length&&d.attr("id")!=="close_map"))){$("#close_map").click()}}});$(".select_box").click(function(d){if(c.opening_state==0){c.openSelect($(this).attr("id"))}else{if(c.cur_open!=$(this).attr("id")){c.closeSelect($(this).attr("id"))}else{if(!$(d.target).parents("#current_account_foldout").length){c.closeSelect()}}}});$("#login_jump").click(function(){c.scrollToLogin();return false})},recheckHeight:function(){var c=$("#current_account_foldout .select_foldout_wrap").height()+15;$("#current_account_foldout").animate({height:c+"px"},400)},resetLeftPos:function(c){$(c).css({display:"block",overflow:"hidden","margin-left":"-300px"});var d=$(c).parents(0).width()-$(c).width()-2;if(this.is_ie==6||this.is_ie==7){d=d-$(c).parents(0).width()}if(d>0){d=-2}$(c).css({"margin-left":d+"px"})},openSelect:function(j){booking[sNSStartup].accounts_for_everybody.passWdInit();oThat=this;this.cur_open=j;var k="#"+j+"_foldout";$("#"+j).addClass("sel_open");if(j=="current_account"){if($("#foldout_loggedin").css("display")=="block"){booking.env.trackExperiment(booking.env.js_experiment_tracking.better_signout_icon);booking.env.trackExperiment(booking.env.js_experiment_tracking.copy_changes_on_profile_settings_menu)}else{var h=booking.env.js_experiment_tracking.show_password+","+booking.env.js_experiment_tracking.switch_login_usps;booking.env.trackExperiment(h)}}this.opening_state=1;$(k).css({display:"block",opacity:"0",overflow:"hidden",height:"400px",width:"1000px"});var m=$(".select_foldout_wrap",k).get(0);$(m).css({"overflow-y":"hidden",height:"auto"});var c=$(m).height();var g=$(m).width();var f=this.max_select_height;if($(k).hasClass("flex_foldout")){var l=g+10}else{if(!$("#"+j).hasClass("sel_done")){var l=g+20;$("#"+j).addClass("sel_done")}else{var l=g}}if(c>=this.max_select_height-10&&$(k).attr("id")!="current_account_foldout"){if($(k).hasClass("flex_foldout")){f=c+10;if(f<300){f=300}}else{$(m).css({"overflow-y":"scroll",height:"230px",width:l+"px"});if(!this.is_ie==6&&!this.is_ie==7){l+=10}}}else{f=c+10;$(m).css({"overflow-y":"hidden",height:"auto"})}if(this.is_ie==6){$(k).css({opacity:"1",height:"0px",width:"0px"});$(k).css({width:"auto"});$(m).css({width:"auto"});g=$(m).width();l=g+10}else{$(k).css({opacity:"1",height:"0px",width:"auto"})}if($(k).hasClass("left_foldout")&&!booking.env.rtl){oThat.resetLeftPos($(k));$(k).css({width:l+"px","padding-right":"0px"})}else{$(k).css({width:l+"px","padding-right":"10px"})}if(this.is_ie==6||this.is_ie==7){var d=$(k).parents(0).width();if($(k).hasClass("left_foldout")&&!booking.env.rtl){iFixedPointEx=d-$(k).width()-2;if(iFixedPointEx<0){d=d-iFixedPointEx}}if(this.is_ie==6){var e=210;if($("#multiple_login",k).length){if($("#foldout_loggedin").css("display")!="block"){e=482}else{e=182}}$(k).css({"margin-left":"-"+d+"px",width:e+"px","padding-right":"18px"})}else{$(k).css({"margin-left":"-"+d+"px",width:l+"px"});$(".select_foldout_wrap",k).css({"overflow-x":"hidden"})}}if(this.openSlow){this.openSlow=false;$(k).animate({height:f+"px"},800)}else{$(k).css({height:f+"px"})}setTimeout(function(){oThat.opening_state=2},200);if(booking.env.b_site_experiment_header_2012){$("body").bind("touchstart",function(o){if(oThat.opening_state==2){var n=$(event.target);if($(n).length&&!$(n).is("#current_account")){if(!$(n).parents("#current_account_foldout").length){oThat.closeSelect();$(this).unbind(o)}}}})}},closeSelect:function(e,f,c){var d=this;if(booking.env.b_site_variant_inline_password_reminder){if($(".reminder_iframe_wrapper").length){$(".reminder_iframe_wrapper").remove();$(".better_login").show()}}if(f){$("#foldout_login").css({display:"none"});$("#multiple_login").css({display:"none"});$("#foldout_loggedin").css({display:"block"});if(c){$("#stats_menu_link").css({display:"block"})}}if(this.opening_state==2){$(".select_foldout").animate({height:"0px"},200,function(){$(".select_foldout").css({display:"none"});$(".select_box").removeClass("sel_open");if(e&&e!=null){d.openSelect(e)}});this.opening_state=0}if($("#user_searches_menu").length){booking[sNSStartup].top_saved_searches.closeTabs()}},scrollToLogin:function(){if(booking.env.rtl){$("body").scrollTo({top:0,left:0},500)}else{$("body").scrollTo({top:0,left:1000},500)}this.openSlow=true;if(this.opening_state==0){this.openSelect("current_account")}else{this.closeSelect("current_account")}},hideLoader:function(){$("#login_loading").hide();$("#signup_loading").hide();$("#page_login_loading").hide()}};booking[sNSStartup].my_social_networks={priority:9,tp_window:null,tp_cur:"",cur_state:"CLOSED",window_sizes:{yahoo:[510,500],facebook:[500,450],google:[850,510]},init:function(){var c=this;$(".signup_tp a, #re_log_in a, a.connect_with").click(function(){booking[sNSStartup].new_personal_menu.opening_state=2;var k=this;var e=$(k).attr("href");var g=$(k).attr("id");var f=e;$("#login_loading").show();if(c.cur_state!="OPENING"){if(c.tp_window){if(c.tp_cur!=g.toLowerCase()){window.clearInterval(c.checking_in);c.tp_window=null;c.cur_state="CLOSED"}else{c.tp_window.focus()}}else{c.cur_state="OPENING";c.tp_cur=g.toLowerCase();var j=500;var h=500;if(c.window_sizes[c.tp_cur]){var j=c.window_sizes[c.tp_cur][0];var h=c.window_sizes[c.tp_cur][0]}var l="width="+j+",height="+h+",toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=1";c.tp_window=window.open(f,"",l);var d="rem_provider="+c.tp_cur;if(booking.env.b_this_url.indexOf(d)>-1){booking.env.b_this_url=booking.env.b_this_url.replace(";"+d,"");booking.env.b_this_url=booking.env.b_this_url.replace(d,"")}c.checking_in=window.setInterval(function(){if((c.tp_window&&c.tp_window.closed)||!c.tp_window){$("#login_loading").hide();$("#page_login_loading").hide();window.clearInterval(c.checking_in);c.tp_window=null;c.cur_state="CLOSED"}},1000);c.cur_state="OPENED";if(c.tp_window){c.tp_window.focus()}}}return false})}};booking[sNSStartup].merge_mybooking_myaccount={priority:9,old_pin_shown:false,init:function(){var c=this;$("#user_pin_link").click(function(){$("#foldout_error").hide();$("#old_pin_login").css({display:"block",top:"0px"});$("#existing_user_login .login_right").hide();if($(".b_msie_8").length){$("#old_pin_login").css({left:"240px"})}else{$("#old_pin_login").animate({left:"240px"})}c.old_pin_show=true;return false});$("#new_user").click(function(){c.newUserOpen(true);booking.env.trackExperiment(booking.env.js_experiment_tracking.newsletter_checkbox_header);booking.track.exp(booking.env.js_experiment_tracking.ditch_password_confirm)});$("#existing_user").click(function(){c.newUserOpen(false)});$("#old_pin_login a").click(function(){$("#foldout_error").hide();$("#old_pin_login").css({top:"0px"});$("#old_pin_login").animate({left:"500px"},function(){$("#old_pin_login").css("display","none")});c.old_pin_show=false;return false})},newUserOpen:function(c){if(this.old_pin_show){$("#old_pin_login").hide();$("#existing_user_login .login_right").show()}if(c){$("#existing_user_login").hide();$("#foldout_signup").show();$("#existing_user").removeClass("active");$("#new_user").addClass("active");booking[sNSStartup].new_personal_menu.recheckHeight()}else{$("#existing_user_login").show();$("#foldout_signup").hide();$("#new_user").removeClass("active");$("#existing_user").addClass("active");booking[sNSStartup].new_personal_menu.recheckHeight()}}};booking[sNSStartup].welcome_user={priority:9,old_pin_shown:false,init:function(){$("#welcome_login").click(function(){booking[sNSStartup].new_personal_menu.openSelect("current_account");booking[sNSStartup].merge_mybooking_myaccount.newUserOpen(false);return false});$("#welcome_signup").click(function(){booking[sNSStartup].new_personal_menu.openSelect("current_account");booking[sNSStartup].merge_mybooking_myaccount.newUserOpen(true);booking.env.trackExperiment(booking.env.js_experiment_tracking.newsletter_checkbox_header);return false})}};booking[sNSStartup].faq_login_foldout={priority:9,init:function(){if(booking.env.b_action=="general"&&booking.env.auth_level=="0"){$(".open_top_login").click(function(){booking[sNSStartup].new_personal_menu.openSelect("current_account");booking[sNSStartup].merge_mybooking_myaccount.newUserOpen(false);$("body").scrollTo({top:0,left:0},500);return false})}}};$(function(){$("#msg_low_avail .button_close").click(function(c){c.preventDefault();$("#msg_low_avail").fadeOut("fast")})});booking.ensureNamespaceExists(sNSExperiments);booking[sNSExperiments].map_text_overlay=(function(){var c=function(){$("#GoogleMap").bind("mouseenter",function(){booking.track.exp(booking.env.map_thumbnail_overlay_param);$("#GoogleMap").unbind("mouseenter");return true})};return{priority:9,init:c,initElse:c}})();booking[sNSStartup].experiment_nps={priority:9,loadpos:0,savecheck:0,init:function(){var c=function(f){var g=f.attr("score");var d=$("#netPromoterScore_daddy").attr("hr");var e=$("#netPromoterScore_daddy").attr("tid");$.ajax({url:"/receive_nps?tid="+escape(e)+"&hr="+escape(d)+"&nps="+g,context:document.body,success:function(k,m,j){var l=$("#netPromoterScore");if(l.find("table").length>0){var h=l.find("table")}else{var h=l.find("ul")}if(k.status=="thanks"){h.before('<p class="success">'+booking.env.conf_page_thanks_opinion+"</p>");$("#feedback_score").css("display","none")}else{if(k.status=="voted_already"){h.before('<p class="voted">'+booking.env.conf_page_answered_question+"</p>")}else{h.before('<p class="error">'+booking.env.conf_page_error_inconvenience+"</p>")}}h.fadeOut()},dataType:"json",type:"PUT"})};if($("#netPromoterScore").length>0){$("#netPromoterScore").fadeIn()}$("td, li[score]","#netPromoterScore").click(function(d){c($(this));d.stopPropagation();return false});$("td input, td label, li input, li label","#netPromoterScore").click(function(){return true})}};booking[sNSExperiments].occupancy_policy={priority:9,init:function(){if(!$.fn||!$.fn.tooltip){return false}$(".occ_policy_tooltip.jq_tooltip").tooltip({bodyHandler:function(){return $(this).siblings(".occ_policy").html()},showURL:false,track:true,opacity:1,fade:250,left:-200,top:18});return true}};booking.ensureNamespaceExists(sNSExperiments);booking[sNSExperiments].omni_search={priority:9,init:function(){$("fieldset.when","#frm").addClass("no_dropdowns");$("body.omni_search").click(function(d){var c=$(d.target);if($(c).length){if(!$(c).parents("#define_group").length){$("#group_definition_modal").hide()}}});return true}};(function(){var c="___paas___";booking.runExp("page_alive_after_submit").onReady(function(){var e=$(".loading_after_submit"),d=function(){$(".loading_after_submit_image").detach();$(this).append('<img class="loading_after_submit_image" src="//r.bstatic.com/static/img/white-loader.gif" width="10px" style="margin-left: 4px" alt="" />')};$(document.body).append('<img src="//r.bstatic.com/static/img/white-loader.gif" width="1px" height="1px" style="display: none;" alt="" />');e.click(function(g){var f=this;g.preventDefault();d.call(this);setTimeout(function(){window.location=$(f).attr("href")},0);return false})});$(function(){var d=booking.env.b_action;if(d==="searchresults"){$(".loading_after_submit").click(function(){$.cookie(c,"true")})}if(d==="hotel"&&$.cookie(c)==="true"){booking.track.exp(booking.env.js_experiment_tracking.page_alive_after_submit);$.cookie(c,null)}})})();booking[sNSExperiments].predefined_group_selection={priority:8,init:function(){function c(g){var d=$("#predefined_group").attr("value"),f=$("#predefined_group option:selected").attr("data-room"),e=$("#predefined_group option:selected").attr("data-children"),h=$(".predefined_block_shown, #define_group, #define_group .hidelinks");if(d<=4){$("#nr_adults").val(d).trigger("change");if(f==2){h.show().removeClass("default_predefined_group_selectors")}else{h.hide().addClass("default_predefined_group_selectors");$("#nr_children").val(0).trigger("change")}}else{if(d>4){if(d==5){$("#nr_adults").val(d).trigger("change")}if(d==6&&e){$("#nr_children").val(1).trigger("change")}h.show().removeClass("default_predefined_group_selectors")}}if(f){$("#nr_rooms").val(f).trigger("change")}}c();$("#predefined_group").change(function(){c()})}};booking.preload_static_assets=function(g){var d,f,c,e=$.browser.msie;for(d=0,f=g.length;d<f;d+=1){if(e){new Image().src=g[d];continue}c=document.createElement("object");c.data=g[d];if(e){c.width=1;c.height=1;c.style.visibility="hidden";c.type="text/plain"}else{c.width=0;c.height=0}document.body.appendChild(c)}};$(window).load(function(){var c=$(document.body),e="mousemove keyup scroll mousedown",j=$("[data-preload-assets]"),g=$.cookie("has_preloaded"),k=0,f=function(){c.unbind(e,d);clearTimeout(k);booking.preload_static_assets(j.data("preload-assets"));$.cookie("has_preloaded",1,{expires:1,path:"/"})},h=function(){k=setTimeout(f,10000)},d=function(){clearTimeout(k);h()};if(g){return}if(j.length){setTimeout(function(){h();c.bind(e,d)},10000)}});booking.runExp("price_filter_no_dates").onReady(function(){$("#price_filter_no_dates").click(function(){$(window).scrollTop(0);$("#homein, #homeout").pulse({opacity:[".5","1",".5","1"]},300,1,"linear");booking.google.trackEvent(booking.google.clickTracker,"price_filter_no_dates","V1")})});booking.ensureNamespaceExists(sNSExperiments);booking[sNSExperiments].request_group_size_in_policy={priority:9,init:function(){var d=this;var c="#group_definition_modal";if($("#define_group .group_set").length){$("#hp_group_set").val(0);$("#hp_group_is_set").val(0)}$(".group_modal_toggle").click(function(){$("#searchboxInc .search_summary_block").hide();$("#searchboxInc .original_search_form").removeClass("original_search_form_hidden");$(c).show();if($("#group_definition_modal #default_group_new_block").length){}else{$("#default_group_new_block").insertBefore("#group_definition_modal table")}$("#frm").attr("action",booking.env.b_this_url);$("html, body").animate({scrollTop:0},"slow")});$("#group_definition_modal #close").click(function(){if($("#define_group .group_set").length){$("#hp_group_set").val(0);$("#hp_group_is_set").val(0)}else{$("#default_group_new_block").insertBefore($("#define_group #group_definition"))}})}};$(function(){$("a.room_link_changes_date").click(function(c){c.stopPropagation();c.preventDefault();$(this).siblings(".confirm_change_date").css({top:c.pageY+"px"}).show().find("a[href=#continue]").attr("href",$(this).attr("href"))});$(".confirm_change_date a[href=#cancel]").click(function(c){c.stopPropagation();c.preventDefault();$(".confirm_change_date").hide()});$(".confirm_change_date").click(function(c){c.stopPropagation()});if($(".confirm_change_date").length>0){$("body").click(function(){$(".confirm_change_date").hide()})}if($("#maxotel_rooms tr.highlight").length>0){$("body, html").scrollTop($("#availability_target").offset().top)}});$(function(){$("a.hotel_link_changes_date").click(function(c){c.stopPropagation();c.preventDefault();$(this).siblings(".confirm_change_date_hotel").css({top:c.pageY+"px"}).show().find("a[href=#continue]").attr("href",$(this).attr("href"))});$(".confirm_change_date_hotel a[href=#cancel]").click(function(c){c.stopPropagation();c.preventDefault();$(".confirm_change_date_hotel").hide()});$(".confirm_change_date_hotel").click(function(c){c.stopPropagation()});if($(".confirm_change_date_hotel").length>0){$("body").click(function(){$(".confirm_change_date_hotel").hide()})}if($("#maxotel_rooms tr.highlight").length>0){$("body, html").scrollTop($("#availability_target").offset().top)}});$(function(){$("a.photo_link_changes_date").click(function(c){c.stopPropagation();c.preventDefault();$(this).siblings(".confirm_change_date_photo").css({top:c.pageY+"px"}).show().find("a[href=#continue]").attr("href",$(this).attr("href"))});$(".confirm_change_date_photo a[href=#cancel]").click(function(c){c.stopPropagation();c.preventDefault();$(".confirm_change_date_photo").hide()});$(".confirm_change_date_photo").click(function(c){c.stopPropagation()});if($(".confirm_change_date_photo").length>0){$("body").click(function(){$(".confirm_change_date_photo").hide()})}if($("#maxotel_rooms tr.highlight").length>0){$("body, html").scrollTop($("#availability_target").offset().top)}});$(function(){$("a.review_link_changes_date").click(function(c){c.stopPropagation();c.preventDefault();$(this).siblings(".confirm_change_date_review").css({top:c.pageY+"px"}).show().find("a[href=#continue]").attr("href",$(this).attr("href"))});$(".confirm_change_date_review a[href=#cancel]").click(function(c){c.stopPropagation();c.preventDefault();$(".confirm_change_date_review").hide()});$(".confirm_change_date_review").click(function(c){c.stopPropagation()});if($(".confirm_change_date_review").length>0){$("body").click(function(){$(".confirm_change_date_review").hide()})}if($("#maxotel_rooms tr.highlight").length>0){$("body, html").scrollTop($("#availability_target").offset().top)}});$(function(){$("a.more_link_changes_date").click(function(c){c.stopPropagation();c.preventDefault();$(this).siblings(".confirm_change_date_more").css({top:c.pageY+"px"}).show().find("a[href=#continue]").attr("href",$(this).attr("href"))});$(".confirm_change_date_more a[href=#cancel]").click(function(c){c.stopPropagation();c.preventDefault();$(".confirm_change_date_more").hide()});$(".confirm_change_date_more").click(function(c){c.stopPropagation()});if($(".confirm_change_date_more").length>0){$("body").click(function(){$(".confirm_change_date_more").hide()})}if($("#maxotel_rooms tr.highlight").length>0){$("body, html").scrollTop($("#availability_target").offset().top)}});$(function(){$("a.scarcity_link_changes_date").click(function(c){c.stopPropagation();c.preventDefault();$(this).siblings(".confirm_change_date_scarcity").css({top:c.pageY+"px"}).show().find("a[href=#continue]").attr("href",$(this).attr("href"))});$(".confirm_change_date_scarcity a[href=#cancel]").click(function(c){c.stopPropagation();c.preventDefault();$(".confirm_change_date_scarcity").hide()});$(".confirm_change_date_scarcity").click(function(c){c.stopPropagation()});if($(".confirm_change_date_scarcity").length>0){$("body").click(function(){$(".confirm_change_date_scarcity").hide()})}if($("#maxotel_rooms tr.highlight").length>0){$("body, html").scrollTop($("#availability_target").offset().top)}});if(booking.env.search_box_autofocus&&!("autofocus" in document.createElement("input"))){$("#destination:visible:first").each(function(){this.focus()})}booking.ensureNamespaceExists(sNSExperiments);booking[sNSExperiments].search_engine_partitioned_disambiguation_page={priority:9,init:function(){$(".disambBlockHeader").click(function(){var d=$(this),c=$("#"+d.attr("data-results"));if(c.hasClass("disambBlockShown")){c.slideUp().removeClass("disambBlockShown")}else{c.slideDown().addClass("disambBlockShown")}return false})}};booking[sNSStartup].search_history={priority:9,fullListShowed:false,minListSize:5,lastviewTimer:null,loadStart:null,init:function(){this.loadStart=new Date();var c=this;if(document.getElementById("SearchHistory")){try{this.minListSize=parseInt($("#SearchHistory").attr("min"))}catch(d){}$("a.remove_search").click(function(){var f=$(this).attr("href").substring(1).split(";");var g=f[0];var e=f[1];var h=f[2];$.ajax({url:"/search_history",type:"DELETE",data:{type:g,value:e,epoch:h}});booking[sNSStartup].search_history.cleanupHistoryList(this);this.blur();return false});if($("#showAllSearches").length){$("#showAllSearches").click(function(){booking[sNSStartup].search_history.showAll();this.blur();return false})}if($("#removeAllSearches").length){$("#removeAllSearches").click(function(){booking[sNSStartup].search_history.removeAll(true);this.blur();return false})}}return true},cleanupHistoryList:function(d){var c=this.minListSize;$(d).parent().fadeOut(500,function(){$(d).parents("li").remove();if($("#SearchHistory li").length>c-1){var e=$("#SearchHistory li").get(c-1);$(e).fadeIn(1000)}});if($("#SearchHistory li").length<2){booking[sNSStartup].search_history.removeAll(false)}if(document.getElementById("showAllSearches")){if($("#SearchHistory li").length<c+2){$("#moreSearchesLinkWrapper").hide()}}},showAll:function(){var c=$("#SearchHistory li");var d=this.minListSize;if(!booking[sNSStartup].search_history.fullListShowed){for(i=d-1;i<c.length;i++){$(c[i]).fadeIn(500)}booking[sNSStartup].search_history.fullListShowed=true}else{for(i=d;i<c.length;i++){$(c[i]).fadeOut(500)}booking[sNSStartup].search_history.fullListShowed=false}booking[sNSStartup].search_history.switchCaption()},removeAll:function(c){if(c){$.ajax({url:"/search_history",type:"DELETE",data:{type:-1,value:null,epoch:null}})}$("#SearchHistory").fadeOut(500,function(){$(this).remove()})},switchCaption:function(){if(booking[sNSStartup].search_history.fullListShowed){$("#showAllSearches .showLink").hide();$("#showAllSearches .hideLink").show()}else{$("#showAllSearches .showLink").show();$("#showAllSearches .hideLink").hide()}}};booking[sNSExperiments].search_near_me={priority:9,init:function(){var l;var f;function d(){if(l&&f){if(blackberry.location.latitude==0&&blackberry.location.longitude==0){f({message:"Position unavailable",code:2})}else{var m=null;if(blackberry.location.timestamp){m=new Date(blackberry.location.timestamp)}l({timestamp:m,coords:{latitude:blackberry.location.latitude,longitude:blackberry.location.longitude}})}l=null;f=null}}var j=function(){var m={};var n=null;m.getCurrentPosition=function(o,q,t){n.getCurrentPosition(o,q,t)};m.init=function(){try{if(typeof(geo_position_js_simulator)!="undefined"){n=geo_position_js_simulator}else{if(typeof(bondi)!="undefined"&&typeof(bondi.geolocation)!="undefined"){n=bondi.geolocation}else{if(typeof(navigator.geolocation)!="undefined"){n=navigator.geolocation;m.getCurrentPosition=function(q,t,u){function v(w){if(typeof(w.latitude)!="undefined"){q({timestamp:w.timestamp,coords:{latitude:w.latitude,longitude:w.longitude}})}else{q(w)}}n.getCurrentPosition(v,t,u)}}else{if(typeof(window.google)!="undefined"){n=google.gears.factory.create("beta.geolocation");m.getCurrentPosition=function(q,t,u){try{n.getCurrentPosition(q,t,u)}catch(v){t({message:v,code:1})}}}else{if(typeof(Mojo)!="undefined"&&typeof(Mojo.Service)!="undefined"&&typeof(Mojo.Service.Request)!="Mojo.Service.Request"){n=true;m.getCurrentPosition=function(q,t,u){parameters={};if(u){if(u.enableHighAccuracy&&u.enableHighAccuracy==true){parameters.accuracy=1}if(u.maximumAge){parameters.maximumAge=u.maximumAge}if(u.responseTime){if(u.responseTime<5){parameters.responseTime=1}else{if(u.responseTime<20){parameters.responseTime=2}else{parameters.timeout=3}}}}r=new Mojo.Service.Request("palm://com.palm.location",{method:"getCurrentPosition",parameters:parameters,onSuccess:function(v){q({timestamp:v.timestamp,coords:{latitude:v.latitude,longitude:v.longitude,heading:v.heading}})},onFailure:function(v){if(v.errorCode==1){t({code:3,message:"Timeout"})}else{if(v.errorCode==2){t({code:2,message:"Position Unavailable"})}else{t({code:0,message:"Unknown Error: webOS-code"+errorCode})}}}})}}else{if(typeof(device)!="undefined"&&typeof(device.getServiceObject)!="undefined"){n=device.getServiceObject("Service.Location","ILocation");m.getCurrentPosition=function(q,t,u){function w(z,y,x){if(y==4){t({message:"Position unavailable",code:2})}else{q({timestamp:null,coords:{latitude:x.ReturnValue.Latitude,longitude:x.ReturnValue.Longitude,altitude:x.ReturnValue.Altitude,heading:x.ReturnValue.Heading}})}}var v=new Object();v.LocationInformationClass="BasicLocationInformation";n.ILocation.GetLocation(v,w)}}else{if(typeof(window.blackberry)!="undefined"&&blackberry.location.GPSSupported){blackberry.location.setAidMode(2);m.getCurrentPosition=function(q,t,u){l=q;f=t;blackberry.location.onLocationUpdate("handleBlackBerryLocation()");blackberry.location.refreshLocation()};n=blackberry.location}}}}}}}}catch(o){if(typeof(console)!="undefined"){console.log(o)}}return n!=null};return m}();function k(){j.getCurrentPosition(h,e)}function h(m){$("#destination").val("lat:"+m.coords.latitude.toFixed(4)+" long:"+m.coords.longitude.toFixed(4));booking.google.trackEvent(booking.google.clickTracker,"Action: "+booking.env.b_action,"#destinationSearch > search-near-me-allow-share");g()}function e(m){g()}function g(){$(".search-near-me").hide()}function c(){if($("#destination").val().length){return}booking.env.trackExperiment(booking.env.js_experiment_tracking.search_near_me);if($("#destination").length&&booking.env.b_site_experiment_search_near_me_exp){$("#destinationSearch").css({position:"relative"}).addClass("tracked");$("#destinationSearch").append('<a class="search-near-me jq_tooltip" title="'+booking.env.b_site_experiment_search_near_me_title+'" ></a>');if($.browser.webkit){$(".search-near-me").css({bottom:"0.7em",right:"11%"})}$(".search-near-me").click(function(){k()});$("#destination").keyup(function(){if($(this).val().length){g()}})}}if(j.init()){c()}}};$("a.search_summary_toggle_button").click(function(){$(".search_summary_block").hide();$(".original_search_form").removeClass("original_search_form_hidden");return false});booking[sNSStartupLoad].search_all_roomtypes={priority:9,init:function(){this.addMoreLink(document);$("a.more_rooms_link").live("click",function(f){f.preventDefault();var c=booking.env.b_site_experiment_sr_fewer_rooms?2:3;if($(".define_group_table").length){if($(this).hasClass("more_rooms_hide")){if(booking.env.shrink_group_search){$(this).parent().parent().parent().find(".sr_table_undesign").hide()}else{$(this).next().hide()}$(this).removeClass("more_rooms_hide")}else{if(booking.env.shrink_group_search){$(this).parent().parent().parent().find(".sr_table_undesign").show()}else{$(this).next().show()}$(this).addClass("more_rooms_hide")}}else{var d=$(this).parents("table").eq(0);if($(this).hasClass("more_rooms_hide")){number_of_matching_rows=d.find("tbody > tr.room_match").length;if(number_of_matching_rows>0){d.find("tbody tr:not(.room_match)").addClass("hidden");d.find("tbody tr.room_match:gt("+(c-1)+")").addClass("hidden")}else{d.find("tbody tr:gt("+(c-1)+")").addClass("hidden")}$(this).removeClass("more_rooms_hide")}else{d.find("tbody tr").removeClass("hidden");$(this).addClass("more_rooms_hide")}}this.blur();return false});return true},addMoreLink:function(c){var d=booking.env,e=$(c);if(d.b_action==="searchresults"){if($(".group_table").length){$("form table.featuredRooms").each(function(){if(booking.env.shrink_group_search){$(this).hide().parent().parent().find(".total").before('<a class="more_rooms_link shrink_more_rooms" href="#">'+d.group_booking_02+"</a>")}else{$(this).hide().before('<a class="more_rooms_link" href="#">'+d.group_booking_02+"</a>")}})}else{e.find("form table.featuredRooms").each(function(){var u=$(this),q=u.find("tbody > tr").length,m=u.find("tbody > tr.room_match").length,f=q-m,k=3,t;q-=k;if(q>1){if(m>0){$("tbody tr:not(.room_match)",this).addClass("hidden");base_number_or_rows=u.find("tbody > tr").length;q=(m>k)?base_number_or_rows-k:base_number_or_rows-m}if(m>0){$(this).find("tbody tr.room_match:gt("+(k-1)+")").addClass("hidden")}else{$(this).find("tbody tr:gt("+(k-1)+")").addClass("hidden")}}else{if(m>0){if(f>0){$("tbody tr:not(.room_match)",this).addClass("hidden")}}}if(booking.env.b_site_experiment_hide_none_matching_rooms==2){if((m>0&&m<k)||$(".more_rooms_link",this).length){var g=$("tbody tr.hidden",this);var n=[];var j=false;for(var l=0;l<g.length;l++){var h=$(".maxPersons .hideme",g[l]).text();if(n.indexOf(h)==-1){n.push(h);if(h>9){j=true}}}var o=n.length;if(o>-1){if(!j){n.sort()}sMinMaxHidden=" (";for(var l=0;l<o;l++){sMinMaxHidden+='<img width="43" height="10" alt="" class="occsprite max'+n[l]+' jq_tooltip" src="'+d.icons_url+'/transparent.png">';if(l+1<o){sMinMaxHidden+=", "}}sMinMaxHidden+=")"}$(".more_rooms_link",this).append(sMinMaxHidden)}}})}}}};booking[sNSStartup].SecretDeals={priority:8,init:function(){if(!booking.env.b_is_ie6){var d=this;$(window).bind("scroll",function(f){d.parallaxScroll()});$("a.section1").click(function(){$("html, body").animate({scrollTop:0},1000,function(){d.parallaxScroll()});return false});$("a.section2").click(function(){$("html, body").animate({scrollTop:$("#section2").offset().top},1000,function(){d.parallaxScroll()});return false});$("a.section3").click(function(){$("html, body").animate({scrollTop:$("#section3").offset().top},1000,function(){d.parallaxScroll()});return false});$("a.section4").click(function(){$("html, body").animate({scrollTop:$("#section4").offset().top},1000,function(){d.parallaxScroll()});return false});$("nav#primary a").hover(function(){$(this).prev("h1").show()},function(){$(this).prev("h1").hide()});var c=$(".sc_navigator");$(window).scroll(function(){var e=$(window).scrollTop();if(e<=900){d.removeActiveClass();$("a#sd_nr1").addClass("active")}else{if(e>900&&e<1750){d.removeActiveClass();$("a#sd_nr2").addClass("active")}else{if(e>1751&&e<2500){d.removeActiveClass();$("a#sd_nr3").addClass("active")}else{d.removeActiveClass();$("a#sd_nr4").addClass("active")}}}})}},removeActiveClass:function(){$(".sc_navigator a").each(function(){$(this).removeClass("active")})},parallaxScroll:function(){var c=$(window).scrollTop();$("#secretdeals-bg1").css("top",(0-(c*0.25))+"px");$("#secretdeals-bg2").css("top",(0-(c*0.5))+"px");$("#secretdeals-bg3").css("top",(0-(c*0.75))+"px");$("#secretdeals-bg4").css("top",(0-(c*0.3))+"px")}};booking.social_plugins_footer=(function(){var d=false;var f=false;var e=false;var h=false;var c=function(l,k){var j=document.createElement("script");j.type="text/javascript";j.src=l;k.find(".footer_tooltip").append(j)};var g=function(){var j=$("#footer_fb"),k=$("#footer_tw"),l=$("#footer_we"),m=$("#footer_gp");l.hover(function(o){l.find(".footer_tooltip").fadeIn();if(h){return}var n=booking.env.b_locale.replace("-","_");l.find(".footer_tooltip").append('<iframe width="136" height="24" frameborder="0" allowtransparency="true" marginwidth="0" marginheight="0" scrolling="no" border="0" src="http://widget.weibo.com/relationship/followbutton.php?language='+n+'&width=136&height=24&uid=2144202281&style=2&btn=red&dpc=1"></iframe>');h=true},function(){l.find(".footer_tooltip").fadeOut()});j.hover(function(n){j.find(".footer_tooltip").fadeIn();if(d){return}j.find(".footer_tooltip").append('<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fbookingcom&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:150px; height:21px;" allowTransparency="true"></iframe>');d=true},function(){j.find(".footer_tooltip").fadeOut()});k.hover(function(n){k.find(".footer_tooltip").fadeIn();if(f){return}c("//platform.twitter.com/widgets.js",k);f=true},function(){k.find(".footer_tooltip").fadeOut()});if(!($.browser.msie&&parseInt($.browser.version,10)>=9)){m.hover(function(n){m.find(".footer_tooltip").fadeIn();if(e){return}c("https://apis.google.com/js/plusone.js",m);e=true},function(){m.find(".footer_tooltip").fadeOut()})}};return{init:g}}());booking[sNSExperiments].social_plugins_footer={priority:9,init:function(){booking.social_plugins_footer.init()}};booking.dockSocial=(function(){var c=false;var e=function(j){var g=document.createElement("script");g.type="text/javascript";g.async=true;g.src=j;var h=document.getElementsByTagName("script")[0];h.parentNode.insertBefore(g,h)};var d=function(){if(c){return}$(".dock_social_fb").html('<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fbookingcom&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:150px; height:21px;" allowTransparency="true"></iframe>');e("//platform.twitter.com/widgets.js");if(!($.browser.msie&&parseInt($.browser.version,10)>=9)){e("https://apis.google.com/js/plusone.js")}c=true};var f=function(){$(".doc_social_link").mouseover(function(){d();var g=$(this).innerWidth();var h=Math.round(g/2)-16;$(".dock_social_block_angle").css("left",h);$(".dock_social_block").show()});$(".dock_social_block_remove").click(function(){$(".dock_social_block").hide()})};return{init:f}}());booking[sNSExperiments].social_plugins_two_new_footer_bars={priority:9,init:function(){booking.dockSocial.init()}};(function(){var g="#sort_by li.sort_stars > a, #sort_by li.sort_price > a, #sort_by li.review_score > a, #sort_by li.sort_distfrom > a",c="#sort_by li.with_dd ul",f=function(h){$(h).show();$(document).one("click",d)},d=function(){$(c).hide()},e;e=booking[sNSStartup].sort_popups={priority:9,init:function(){$(this.anchorSelector).bind("click",function(){var h=$(this).siblings("ul");d();if(!h.is(":visible")){f(h)}return false})},ulSelector:c,anchorSelector:g,showPopup:f,hideSortPopups:d};booking.run("tracking_for_sort_filter_on_hover").onReady(function(){var h=$(c).parent(),j=function(){booking.track.exp("sort_filter_on_hover");h.unbind("mouseenter",j)};h.bind("mouseenter",j)});if(booking.env.b_site_experiment_sort_filter_on_hover){g="#sort_by li.sort_stars, #sort_by li.sort_price, #sort_by li.review_score, #sort_by li.sort_distfrom";e.init=function(){$(g).mouseenter(function(){var h=$(this).children("ul");d();if(!h.is(":visible")){f(h)}}).mouseleave(d)};e.showPopup=function(h){$(h).show()}}})();booking[sNSStartup].store_cc_details={priority:9,init:function(){var c=this;$("#saved_credit_cards .cc_save").attr("disabled","disabled");$("#saved_credit_cards .cc_save").addClass("cc_save_disabled");$("#saved_credit_cards select").change(function(){var e=$(this).closest("form");$(this).css({"font-weight":"bold"});$(".cc_save",e).removeAttr("disabled");$(".cc_save",e).removeClass("cc_save_disabled")});if($("#card_status").length){setTimeout(function(){$("#card_status").hide("slow")},5000)}if($(".first_card_row").length){var d=$('#book_credit_card tr input[name="cc_card_id"]:checked').get(0);this.disableFields($(d).closest("tr").get(0))}$(".cc_radio").click(function(){var e=$(this).closest("tr").get(0);c.disableFields(e)});$("#cc_type").change(function(){onchange_cc(this)});$(".new_card select").change(function(){var e=$(this).closest("tr").get(0);$("input[type='radio']",e).attr("checked","checked");c.disableFields(e)});$(".new_card input").keydown(function(){var e=$(this).closest("tr").get(0);$("input[type='radio']",e).attr("checked","checked");c.disableFields(e)});$(".cc_delete").click(function(){var g=$(this).closest("tr").get(0);var e=$(this).val();var f="/delete_cc_card?cc_id="+e;$.ajax({url:f,type:"POST",success:function(h){$(g).hide()},error:function(h){return false}});return false})},disableFields:function(c){var c=c;$("table.saved_cc_table tr").each(function(){if(!$(this).hasClass("new_card")&&!$(this).hasClass("save_my_card_tick")&&!$(this).hasClass("invalid")&&!$(this).hasClass("not_allowed_by_hotel")){if(this==c){$("input,select",this).each(function(){$(this).removeAttr("disabled")})}else{$("input,select",this).each(function(){if($(this).attr("type")!="radio"&&!$(this).hasClass("dc_maestro_fields")){$(this).attr("disabled","disabled")}})}}})}};booking[sNSExperiments].store_cc_details_step2_new={priority:9,init:function(){var c=$("#save_card_tick:checked").length;$("#bookStage3Inc #signup_later").click(function(){$("#save_card_tick").attr("checked",false);$("#store_cc_new_new").hide();return false})}};booking[sNSExperiments].store_cc_details_step2_returning={priority:9,init:function(){var c=$("#save_card_tick:checked").length;if(c){$("#store_cc_returning_new .password_fields_wrapper").show()}else{$("#store_cc_returning_new .password_fields_wrapper").hide()}$("#store_cc_returning_new #save_card_tick").click(function(){$("#store_cc_returning_new .password_fields_wrapper").show()});$("#store_cc_returning_new #signup_later").click(function(){console.info("i clicked the radio");$("#save_card_tick").attr("checked",false);$("#store_cc_returning_new").hide()})}};booking[sNSExperiments].store_cc_details_step3={priority:9,init:function(){var c=$("#save_card_tick:checked").length;if(c){$("#bookStage3Inc .password_field_wrapper").show()}else{$("#bookStage3Inc .password_field_wrapper").hide()}$("#bookStage3Inc #save_card_tick").click(function(){$("#bookStage3Inc .password_field_wrapper").toggle()});$("#bookStage3Inc #signin_later").click(function(){$("#save_card_tick").attr("checked",false);$("#bookStage3Inc .password_field_wrapper").hide();return false})}};if(typeof b_survey_url!="undefined"&&b_survey_url){booking[sNSStartup].survey={priority:9,init:function(){$("#survey").fadeIn("normal");var c="/survey?";$("#survey button").click(function(f){var g=$(this).val();if(g){if(booking[sNSStartup].fix_move_book_header_and_button){booking[sNSStartup].fix_move_book_header_and_button.surveyFixed=false}if(g=="accept"||g=="Yes"||g=="yes"||g=="Ja, ik doe mee"||g=="Okay"){var d=window.open(b_survey_url,"booking_survey_window")}else{$("#survey").hide("normal")}$.get(c+"decision="+g+"&survey_key="+booking.env.survey_key,{},function(e){$("#survey").hide("normal")})}return false})}}}booking[sNSExperiments].fb_likes={priority:9,likes:"",init:function(){var c=this;if(booking.env.b_action=="book"){this.likes=setInterval(function(){var d=booking.env.b_fb_id;if(window[d[5]+d[0]]){booking.env.trackExperiment(booking.env.js_experiment_tracking.fb_likes);window.clearInterval(c.likes);c.likes=""}},10000)}}};$(function(){if(booking.env.b_lang==="el"||booking.env.b_lang==="th"||booking.env.b_lang==="ko"||booking.env.b_lang==="ar"||booking.env.b_lang==="he"){booking.track.onView("#filter_chains").exp(booking.env.js_experiment_tracking.translate_brand_filter_2)}});booking[sNSStartup].unsubscribe={priority:8,init:function(){var d=this;var c=5000;if(booking.env.b_action==="unsubscribe"){$(".unsub_clickarea").live("click",function(g){g.preventDefault();var f=$(this).parents("li");d.changeState(f)});$(".frequency").live("click",function(f){d.openUnsubContent(this,".unsub_frequency");return false});$(".preview").live("click",function(f){d.openUnsubContent(this,".unsub_previews");return false});$(".save_unsubscription").click(function(k){k.preventDefault();var g=$("#unsubscription_management");if(booking.env.no_subscriber_found){var m=$("input:text[name=email]").val();var l=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;var j=$(g).find(".unsub_messages");if(m===""||!(l.test(m))){$(j).find("p.notsubscribed").hide();$(j).find("p.error.invalidemail").show();$(j).slideDown("fast");$(j).delay(c).slideUp("fast",function(){$(this).find("p").hide()});return false}}if($(this).find("#unsub_all_area .notsubscribed").is(":visible")){$(this).find("#unsub_all_area .notsubscribed").slideUp("fast")}var h={};h.token=($("input[name=token]",g).val()?$("input[name=token]",g).val():false);h.email=(m?m:$("input[name=email]",g).val());var f=true;$("#unsub_managing_area li").each(function(q){if(($(this).hasClass("on")&&!$(this).hasClass("forceoff"))){var o=$(this).attr("rel");var n=1;f=false}else{if($(this).hasClass("off")||$(this).hasClass("forceoff")){var o=$(this).attr("rel");var n=0}}h[o]=n});if(h.token){dataString="token="+h.token}else{dataString="email="+h.email;if($("#unsub_all_area li").hasClass("on")){h.subscribe_weekly=1;h.subscribe_sunday_newsletter=1;h.subscribe_flash_deals=1;h.subscribe_cityspecial=1;f=false}else{h.subscribe_weekly=0;h.subscribe_sunday_newsletter=0;h.subscribe_flash_deals=0;h.subscribe_cityspecial=0;f=true}}dataString=dataString+"&subscribe_weekly="+h.subscribe_weekly+"&subscribe_sunday_newsletter="+h.subscribe_sunday_newsletter+"&subscribe_flash_deals="+h.subscribe_flash_deals+"&subscribe_cityspecial="+h.subscribe_cityspecial;$.ajax({type:"POST",url:"/update_newsletter_subscription",data:dataString,dataType:"json",success:function(n){if(k.target.id=="unsub_all_button"){var e=$(g).find("#unsub_all_area .unsub_messages");$(e).find("p").hide();if(n.success=="1"){if(f){$(e).find("p.success.unsubscribed").show()}else{$(e).find("p.success.subscribed").show()}}else{$(e).find("p.error.someerror").show()}}else{if(k.target.id=="unsub_management_button"){var e=$(g).find("#unsub_managing_area .unsub_messages");$(e).find("p").hide();if(n.success=="1"){$(e).find("p.success").show()}else{$(e).find("p.error.someerror").show()}}}$(e).slideDown("fast");$(e).delay(c).slideUp("fast")}});return false})}},changeState:function(f){var d=3000;var e=$(f).next(".unsub_nameanddesc");if($(f).hasClass("on")){$(f).removeClass("on").addClass("off");var c=false;$("#unsub_managing_area li").each(function(g){if($(this).hasClass("on")){c=true}});console.log(c);if(!c){$("#unsub_managing_area li").each(function(){$(this).addClass("forceoff")});$("#unsub_all_area li").each(function(){$(this).removeClass("on").addClass("off")});$(".unsub_disabled").show()}if($(f).hasClass("wide")){$("#unsub_managing_area li").each(function(){$(this).addClass("forceoff")});$(".unsub_disabled").show()}}else{if($(f).hasClass("off")){$(f).removeClass("off").addClass("on");if($(f).hasClass("wide")){var c=false;$("#unsub_managing_area li").each(function(){if($(this).hasClass("on")){c=true}$(this).removeClass("forceoff")});$(".unsub_disabled").hide();if(!c){$("#unsub_managing_area li").each(function(){$(this).removeClass("off").addClass("on")})}}}}return false},openUnsubContent:function(e,c){var d=$(e).parents(".unsub_visible").siblings(c);if(d.hasClass("on")){$(d).slideUp("fast");$(d).removeClass("on");$(e).removeClass("on")}else{if(!$(d).hasClass("on")){$(".unsub_content.on").each(function(){$(this).removeClass("on");$(this).slideUp("fast")});$(".unsub_questions a.on").each(function(){$(this).removeClass("on")});$(d).find("p.fyi").show();$(d).addClass("on").slideDown("fast");$(e).addClass("on")}}return false}};booking[sNSStartup].top_saved_searches={priority:9,opening_state:0,init:function(){var c=this;$(".search_tab").click(function(){c.opening_state=1;c.closeTabs(this);if(!$(this).hasClass("loadedContent")){c.loadContent($(this))}return false})},showAllNone:function(c){var d=$(".user_search_item",c.parentNode.parentNode);var e=0;if($(".hidden_item",c.parentNode.parentNode).length){$(".showLink",c.parentNode.parentNode).hide();$(".hideLink",c.parentNode.parentNode).show()}else{$(".showLink",c.parentNode.parentNode).show();$(".hideLink",c.parentNode.parentNode).hide()}$(d).each(function(){e++;if(e>6){if($(this).hasClass("hidden_item")){$(this).removeClass("hidden_item")}else{$(this).addClass("hidden_item")}}})},closeTabs:function(d){var e=this;var c=d?$(d).attr("id"):"";c=c.replace("tab","foldout");$(".search_foldout").each(function(){if($(this).hasClass("closed_content")){if($(this).attr("id")==c){$(this).removeClass("closed_content")}}else{$(this).addClass("closed_content")}});if(c===""){this.opening_state=0}else{setTimeout(function(){e.opening_state=2},100)}},loadContent:function(h){var g=this;var c=$(h).attr("data-href");if(c.indexOf("http://booking.com")!=-1){c=c.replace("http://booking.com","http://www.booking.com")}if($("#current_account").width()>$(h).width()){var f=$("#current_account").width()+458+15}else{var f=$(h).width()+458+15}if(booking.env.b_is_ie7){f=f+102}if(booking.env.b_is_ie6){f=f+20}var e=$("#current_account_foldout").offset().top;var j=$(h).attr("id");var d="#"+j+"_content";$(h).addClass("loadedContent");$.ajax({url:c,type:"GET",success:function(k){$(d).html(k);$(d).css({left:"-"+f+"px",top:e+"px"});setTimeout(function(){g.addRemoveClicks(j);booking[sNSStartupLoad].tooltip_3.addTooltip($(d))},200)}})},addRemoveClicks:function(d){var c=this;$("#removeAllHistoryHotel, #removeAllHistorySearch").click(function(){c.removeAll($(this).attr("id"));return false});if(d=="search_tab_viewed"){$("#search_tab_viewed_content a.remove_hotel").click(function(){var f=$(this).attr("href").split("#")[1];$.ajax({url:"/hotel_history",type:"DELETE",data:{hotel_id:f}});booking[sNSStartup].viewed_hotels.cleanupHistoryList(this);this.blur();var e=$(this).parents(".user_search_item").get(0);var g=e.parentNode;$(e).hide("slow",function(){$(this).remove();if($(".hidden_item",g).length){var h=$(".hidden_item",g).get(0);$(h).removeClass("hidden_item")}c.reOddEven(g)});c.removeOneHome(f);if($(".user_search_item",g).length==1){$(".user_search_item",g).show()}return false});$("#search_tab_viewed_content .user_search_show").click(function(e){c.showAllNone(this);return false})}if(d=="search_tab_searched"){$("#search_tab_searched_content a.remove_search").click(function(){var l=$(this).attr("href").split("#")[1];var h=l.split(";");var j=h[0];var f=h[1];var k=h[2];$.ajax({url:"/search_history",type:"DELETE",data:{type:j,value:f,epoch:k}});booking[sNSStartup].search_history.cleanupHistoryList(this);this.blur();var e=$(this).parents(".user_search_item").get(0);var g=e.parentNode;$(e).hide("slow",function(){$(this).remove();if($(".hidden_item",g).length){var m=$(".hidden_item",g).get(0);$(m).removeClass("hidden_item")}c.reOddEven(g)});return false});$("#search_tab_searched_content .user_search_show").click(function(e){c.showAllNone(this);return false})}if(d=="search_tab_booked"){}if(d=="search_tab_favourite"){$("#search_tab_favourite_content").find(".user_search_show").remove();$("#search_tab_favourite_content a.remove_hotel").click(function(){var l=$(this).attr("href").split("#")[1];var h=l.split(";");var j=h[0];var f=h[1];var k=h[2];$.ajax({url:"/favorites/delete",type:"DELETE",data:{hotel_id:j}});this.blur();var e=$(this).parents(".user_search_item").get(0);var g=e.parentNode;$(e).hide("slow",function(){$(this).remove();if($(".hidden_item",g).length){var m=$(".hidden_item",g).get(0);$(m).removeClass("hidden_item")}c.reOddEven(g)});return false});$("#search_tab_searched_content .user_search_show").click(function(e){c.showAllNone(this);return false})}},removeAll:function(d){var e=this;var c=$("#"+d).parents(".user_searches_content");if(d=="removeAllHistoryHotel"){$.ajax({url:"/hotel_history",type:"DELETE",data:{hotel_id:-1}});e.removeAllHome();booking[sNSStartup].viewed_hotels.cleanupHistoryList($("#"+d))}else{booking[sNSStartup].search_history.removeAll(true)}$("#"+d).blur();$(".user_search_item",c).each(function(){if($(this).hasClass("no_listing")){$(this).show("slow")}else{$(this).hide("slow",function(){$(this).remove()})}});$(".user_search_header",c).hide();$(".user_search_footer",c).hide()},removeAllHome:function(){$("#LastViewedHotels").hide()},removeOneHome:function(c){$("#LastViewedHotels .remove_hotel").each(function(){if($(this).attr("href")=="#"+c){$(this.parentNode).hide()}})},reOddEven:function(e){var d=0;if($(".user_search_item",e).length>1){$(".user_search_item",e).each(function(){if(!$(this).hasClass("no_listing")){if(d==0){if($(this).hasClass("even")){$(this).removeClass("even")}d=1}else{if(!$(this).hasClass("even")){$(this).addClass("even")}d=0}}})}else{if($(".no_listing",e).length){var c=$(".no_listing",e).get(0);$(c).show();$(".user_search_header",e).hide();$(".user_search_footer",e).hide()}}}};booking[sNSStartupLoad].change_currency_on_click={priority:9,init:function(){var g=booking.env,c="",j,d=$(".click_change_currency");if(!d.length){return}c=booking.currencyDropdownOptions;if(g.change_currency_hotel_anchor){j="&amp;"+g.change_currency_hotel_anchor;c=c.replace(/href\s*\=\s*\'([\w/=%_&\-.;?]*)\s*\'/ig,"href='$1"+j+"'")}$("#click_current_currency_foldout ul").append(c);var f=$("#click_current_currency_foldout"),h,e;e=f.find("a");$(".click_change_currency").click(function(A){var o=$(this);if(!f.is(":hidden")){f.slideUp()}else{o.after(f);f.slideDown();$("#tooltip").hide();var m=o.closest("tr.flash_deal_soldout");h=m.children(0).attr("id")}var q=$("#current_currency_index").val();if(booking.env.change_currency_on_click_convert_prices&&q!=""){var k=$(this).text();var w=$(".convert_prices option");var y=$("#click_current_currency_foldout .selsymbol");var x={},v,n,B;var z=function(l){return parseFloat(l.replace(/,/g,".").replace(/[^\d\.]/g,""),10)};n=z(k);for(var u=0,t=w.length;u<t;u++){B=n*(q/w[u].value);x[w[u].innerHTML]=B.toFixed(2)}for(var u=0,t=y.length;u<t;u++){v=y[u];$(v.parentNode).find(".converted_currency").html(x[v.innerHTML])}if(booking.env.change_currency_on_click_convert_prices==2){$("#click_current_currency_foldout .seldescription:not(:first)").remove()}}if(q!=""){booking.env.trackExperiment(booking.env.js_experiment_tracking.change_currency_on_click_convert_prices)}A.stopPropagation()});if(!g.change_currency_hotel_anchor){e.live("click",function(){$(this).attr("href",$(this).attr("href")+"#"+h)})}$("html").click(function(k){if("click_current_currency_foldout"!=k.target.id){f.slideUp()}})}};if(booking.env.enable_scripts_tracking){booking.env.scripts_tracking.main.run=true}if(booking.env.enable_scripts_tracking){booking.env.scripts_tracking.maps={loaded:true,run:false}}booking.map={buildCurrentHotel:function(c){var d={};d[c.b_id]=c;d[c.b_id]["title"]=c.b_name;d[c.b_id].b_image_url=c.b_main_photo;booking[sNSStartupLoad].googleMaps.parseJsonData(d)}};booking[sNSStartupLoad].googleMaps={priority:9,api_version:3.3,map_inited:false,sensor:false,protocol:"http",tracked:false,json_params:["dest_type","dest_id","b_param_pr_id","b_param_class","b_param_hotelfacility","b_param_district_id","b_param_hoteltag","b_param_chaincode","b_param_score_min"],map:null,map_object:null,placemark_amount:0,placemark_type:"hotel",placemarks:{},hotels_cache:{},b_clusters_found:0,max_length_of_hotel_description:booking.env.map_shorten_desc?booking.env.map_shorten_desc:250,map_scroll:{x:0,y:0},map_scroll_base:{x:0,y:0},map_width:515,map_height:400,latitude:0,longitude:0,current_zoom:undefined,search_destination_without_district:(document.getElementById("destination")?document.getElementById("destination").value:""),search_destination:((booking.env.district_city_name)?booking.env.district_city_name:(document.getElementById("destination")?document.getElementById("destination").value:"")),b_ufi:booking.env.b_ufi?booking.env.b_ufi:"",b_district_ufi:(booking.env.b_ufi?booking.env.b_ufi:(booking.env.b_city_id?booking.env.b_city_id:"")),bs_cookie:null,last_hotel_details:null,geocoder:null,enable_all_markers:true,is_sr:(booking.env.b_action==="searchresults"),is_hp:(booking.env.b_action==="hotel"),is_lp:(booking.env.b_is_landing_page),last_clicked_hotel:"",supress_hotel_overlay:0,map_pos_x:0,map_pos_y:0,good_browser:true,fixZoom:false,clicked_marker:false,pan_item_coords:undefined,pan_item:true,disambiguation_bbox:null,use_sr_cookie:(!booking.env.b_is_disambiguation&&booking.env.b_action==="searchresults"),use_new_marker_overlay:(booking.env.b_action==="searchresults"||booking.env.b_action==="hotel"||booking.env.b_is_landing_page),searchingAddress:false,currentRequestId:0,currentResponsedReceivedId:0,mouseover:"mouseenter",mouseout:"mouseleave",mousedown:"mousedown",mouseclick:"click",final_zoom:0,initPopup:false,initPopupSR:true,initPopupTimeout:false,highlight_marker_z:false,map_opened:false,cur_selected_hotel:null,b_force_no_clusters:false,filter:{hotel:true,hotel_current:true,hotel_matching_criteria:true,city:true,city_current:true,landmark:true,landmark_current:true,airport:true,airport_current:true,disambiguation:true,disambiguation_best:true,ski_lift:true,ski_lift_current:true,flash_deal:true,current_search:true,country:true},b_cluster_mapping:{country:"region",region:"city",city:"district",district:"hotel",anon:"hotel"},b_map_icons:{hotel:{className:"icon-marker-hotel-blue",image:booking.env.icons+"/marker-hotel-blue.png",min:7,zOrder:10000,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},cluster:{className:"icon-cluster",min:1,max:13,width:56,height:60,zOrder:10000,infoWindowAnchor:[27,54],iconAnchor:[27,27]},cluster_1:{className:"icon-cluster",min:7,zOrder:10000,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},hotel_mini:{className:"icon-hotel_mini",min:7,width:11,height:12,zOrder:10000,infoWindowAnchor:[5.5,12],iconAnchor:[5.5,12]},hotel_matching_criteria:{className:"icon-marker-hotel-orange",image:booking.env.icons+"/marker-hotel-orange.png",min:8,zOrder:5000,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},hotel_matching_criteria_mini:{className:"icon-marker-hotel-mini-orange",min:8,width:11,height:12,zOrder:5000,infoWindowAnchor:[5.5,12],iconAnchor:[5.5,12]},hotel_not_matching_criteria:{className:"icon-marker-hotel-grey",image:booking.env.icons+"/marker-hotel-grey.png",min:8,zOrder:100,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},hotel_closed:{className:"icon-marker-hotel-grey",image:booking.env.icons+"/marker-hotel-grey.png",min:8,zOrder:10000,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},hotel_not_matching_criteria_mini:{className:"icon-marker-hotel-mini-grey",min:8,zOrder:100,width:11,height:12,infoWindowAnchor:[5.5,12],iconAnchor:[5.5,12]},hotel_current:{className:"icon-marker-hotel-orange-large",image:booking.env.icons+"/marker-hotel-orange-large.png",min:4,zOrder:11000,width:26,height:27,infoWindowAnchor:[13,27],iconAnchor:[13,27]},airport:{className:"icon-marker-airport",image:booking.env.icons+"/marker-airport.png",min:5,zOrder:90,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},airport_current:{className:"icon-marker-airport-large",image:booking.env.icons+"/marker-airport-large.png",min:5,zOrder:90,width:26,height:27,infoWindowAnchor:[13,27],iconAnchor:[13,27]},landmark:{className:"icon-marker-landmark",image:booking.env.icons+"/marker-landmark.png",min:12,zOrder:80,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},landmark_current:{className:"icon-marker-landmark-large",image:booking.env.icons+"/marker-landmark-large.png",min:12,zOrder:10001,width:26,height:27,infoWindowAnchor:[13,27],iconAnchor:[13,27]},ski_lift:{className:"icon-ski_lift",image:booking.env.icons+"/map/ski_lift.png",min:12,zOrder:80,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},ski_lift_current:{className:"icon-ski_lift_current",image:booking.env.icons+"/map/ski_lift_current.png",min:12,zOrder:80,width:26,height:27,infoWindowAnchor:[13,27],iconAnchor:[13,27]},city:{className:"icon-marker-city",image:booking.env.icons+"/marker-city.png",min:4,zOrder:70,width:9,height:9,infoWindowAnchor:[4.5,9],iconAnchor:[4.5,9]},city_current:{className:"icon-marker-city-large",image:booking.env.icons+"/marker-city-large.png",min:4,zOrder:70,width:15,height:15,infoWindowAnchor:[7.5,15],iconAnchor:[7.5,15]},country:{className:"icon-marker-city",min:4,max:10,zOrder:60,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},region:{className:"icon-marker-city",min:5,zOrder:50,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},district:{className:"icon-marker-city",min:7,zOrder:40,width:9,height:9,infoWindowAnchor:[4.5,9],iconAnchor:[4.5,4.5]},lat_long_current:{className:"icon-marker-city",min:4,max:16,zOrder:40,width:9,height:9,infoWindowAnchor:[4.5,9],iconAnchor:[4.5,4.5]},disambiguation_best:{className:"icon-disambiguation_marker_best",min:0,max:20,zOrder:41,width:34,height:38,infoWindowAnchor:[4.5,9],iconAnchor:[17,38]},disambiguation:{className:"icon-disambiguation_marker",min:0,max:20,zOrder:40,width:34,height:38,infoWindowAnchor:[4.5,9],iconAnchor:[17,38]},flash_deal:{className:"icon-flash_deal_marker",min:0,zOrder:10000,infoWindowAnchor:[21,21],iconAnchor:[21,21]},current_search:{image:booking.env.icons+"/map/address_marker.png",min:1,max:20,zOrder:10002,width:25,height:25,infoWindowAnchor:[12.5,25],iconAnchor:[12.5,12.5],rawImage:true},country:{className:"icon-marker-country",min:7,width:27,zOrder:10000,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]}},b_map_icons_improved:{hotel:{className:"mk-hotel",image:booking.env.icons+"/marker-hotel-blue.png",min:7,zOrder:10000,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},cluster:{className:"mk-cluster",min:1,max:13,width:56,height:60,zOrder:10000,infoWindowAnchor:[27,54],iconAnchor:[27,27]},cluster_1:{className:"mk-cluster",min:7,zOrder:10000,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},hotel_mini:{className:"mk-hotel_s",min:7,width:11,height:12,zOrder:10000,infoWindowAnchor:[5.5,12],iconAnchor:[5.5,12]},hotel_matching_criteria:{className:"mk-hotel_match",image:booking.env.icons+"/marker-hotel-orange.png",min:8,zOrder:5000,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},hotel_matching_criteria_mini:{className:"mk-hotel_match_s",min:8,width:11,height:12,zOrder:5000,infoWindowAnchor:[5.5,12],iconAnchor:[5.5,12]},hotel_not_matching_criteria:{className:"mk-hotel_not",image:booking.env.icons+"/marker-hotel-grey.png",min:8,zOrder:100,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},hotel_closed:{className:"mk-hotel_not",image:booking.env.icons+"/marker-hotel-grey.png",min:8,zOrder:10000,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},hotel_not_matching_criteria_mini:{className:"mk-hotel_not_s",min:8,zOrder:100,width:11,height:12,infoWindowAnchor:[5.5,12],iconAnchor:[5.5,12]},hotel_current:{className:"mk-hotel_match_l",image:booking.env.icons+"/marker-hotel-orange-large.png",min:4,zOrder:11000,width:26,height:27,infoWindowAnchor:[13,39],iconAnchor:[13,39]},airport:{className:"mk-airport",image:booking.env.icons+"/marker-airport.png",min:5,zOrder:90,infoWindowAnchor:[13,39],iconAnchor:[13,39]},airport_current:{className:"mk-airport_l",image:booking.env.icons+"/marker-airport-large.png",min:5,zOrder:90,width:26,height:27,infoWindowAnchor:[13,27],iconAnchor:[13,27]},landmark:{className:"mk-landmark",image:booking.env.icons+"/marker-landmark.png",min:12,zOrder:80,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]},landmark_current:{className:"mk-landmark_l",image:booking.env.icons+"/marker-landmark-large.png",min:12,zOrder:10001,width:26,height:27,infoWindowAnchor:[13,27],iconAnchor:[13,27]},ski_lift:{className:"mk-ski_lift",image:booking.env.icons+"/map/ski_lift.png",min:12,zOrder:80,infoWindowAnchor:[13,39],iconAnchor:[13,39]},ski_lift_current:{className:"mk-ski_lift_current",image:booking.env.icons+"/map/ski_lift_current.png",min:12,zOrder:80,width:26,height:27,infoWindowAnchor:[13,39],iconAnchor:[13,39]},city:{className:"mk-city",image:booking.env.icons+"/marker-city.png",min:4,zOrder:70,width:9,height:9,infoWindowAnchor:[13,39],iconAnchor:[13,39]},city_current:{className:"mk-city_l",image:booking.env.icons+"/marker-city-large.png",min:4,zOrder:70,width:15,height:15,infoWindowAnchor:[13,39],iconAnchor:[13,39]},country:{className:"mk-city",min:4,max:10,zOrder:60,infoWindowAnchor:[13,39],iconAnchor:[13,39]},region:{className:"mk-city",min:5,zOrder:50,infoWindowAnchor:[13,39],iconAnchor:[13,39]},district:{className:"mk-city",min:7,zOrder:40,width:9,height:9,infoWindowAnchor:[13,39],iconAnchor:[13,39]},lat_long_current:{className:"mk-city",min:4,max:16,zOrder:40,width:9,height:9,infoWindowAnchor:[13,39],iconAnchor:[13,39]},disambiguation_best:{className:"icon-disambiguation_marker_best",min:0,max:20,zOrder:41,width:34,height:38,infoWindowAnchor:[4.5,9],iconAnchor:[17,38]},disambiguation:{className:"icon-disambiguation_marker",min:0,max:20,zOrder:40,width:34,height:38,infoWindowAnchor:[4.5,9],iconAnchor:[17,38]},flash_deal:{className:"icon-flash_deal_marker",min:0,zOrder:10000,infoWindowAnchor:[21,21],iconAnchor:[21,21]},current_search:{image:booking.env.icons+"/map/address_marker.png",min:1,max:20,zOrder:10002,width:25,height:25,infoWindowAnchor:[12.5,25],iconAnchor:[12.5,12.5],rawImage:true},country:{className:"mk-country",min:7,width:27,zOrder:10000,infoWindowAnchor:[8.5,20],iconAnchor:[8.5,20]}},map_sprite_version:(booking.env.mapImproveContrast==1||booking.env.mapImproveContrast==3)?"use_map_sprites_improved":"use_map_sprites",markerMarkups:{},markerHtml:function(c,g){var e=this.markerMarkups,f,d;if(c in e){return e[c]}g=(g)?'style="'+g+'"':"";d=this.b_map_icons[c];if(d.hasOwnProperty("rawImage")&&d.rawImage){return e[c]='<img src="'+d.image+'" alt="" '+g+"/>"}return e[c]='<img class="'+this.map_sprite_version+" icon-marker "+d.className+'" src="'+booking.env.icons+'/transparent.png" alt="" '+g+"/>"},geocoderHelper:(function(){var f=this,c=function(g){var h=(booking.env.map_enable_sr_autocomplete?$("#right"):$("#search_results_table"));if(booking.env.map_enable_sr_autocomplete||booking.env.mapAddressSearchUpdates){h.animate({opacity:1},500,function(){$(this).css("filter","")});$("#filterbox_wrap").animate({opacity:1},500,function(){$(this).css("filter","")})}if(booking.env.map_enable_sr_autocomplete){$("#sidebar_map_address_search_failed").hide();$("#sidebar_map_address_search_loading").hide();$("#view_map").css("display","block")}else{$("#map_address_search_failed").hide();if(!(booking.env.map_landmark_dropdown_type&&booking.env.map_landmark_dropdown_type===2)){$("#map_address_search_result").html(g)}if(booking.env.mapAddressSearchUpdates){$("#sidebar_map_address_search_loading").hide()}$("#map_address_search_success_wrapper").show()}},d=function(){if(booking.env.map_enable_sr_autocomplete){$("#view_map").hide();$("#sidebar_map_address_search_loading").hide();$("#sidebar_map_address_search_failed").css("display","block")}else{$("#map_address_search_failed").show();$("#map_address_search_success_wrapper").hide();if(booking.env.mapAddressSearchUpdates){$("#sidebar_map_address_search_loading").hide()}}},e=function(){if(booking.env.mapAddressSearchUpdates){$("#map_address_search_failed").hide();$("#map_address_search_success_wrapper").hide();$("#sidebar_map_address_search_loading").show();if(f.map_object){f.map.oMarkerLayer.empty();f.updateMap()}}else{if(booking.env.map_enable_sr_autocomplete){$("#sidebar_map_address_search_failed").hide();$("#view_map").hide();$("#sidebar_map_address_search_loading").css("display","block")}}};return{showSuccessMsg:c,showFailureMsg:d,showLoadingMsg:e}})(),isMapInitialized:false,init:function(){if(this.isMapInitialized){return this}else{this.isMapInitialized=true}var h=this,c="first",d;if($.browser.msie&&$.browser.version<8){this.good_browser=false}if(booking.env.b_map_center_latitude){this.latitude=booking.env.b_map_center_latitude}if(booking.env.b_map_center_longitude){this.longitude=booking.env.b_map_center_longitude}if(window&&window.location){this.sProtocol=window.location.protocol}if(navigator.platform.indexOf("iPad")!=-1){this.mouseover="touchstart";this.mousedown=null;this.mouseout=null}this.bs_cookie={};if(typeof(JSON)!=="undefined"){this.bs_cookie=JSON.parse($.cookie("bs"))||{}}GLatLng=function(k,l){return{b_latitude:k,b_longitude:l}};$(".show_map").live("click",function(){var n=$(this),o=n.attr("href"),t="#right",q="",u="",x=(booking.env.map_hover_preview_type?n.attr("data-zoom"):n.attr("rel")),w;if(o){if(o!="#"&&o!=window.location.href.split("#")[0]+"#"){var l=$("#"+o.split("#")[1]);if(l.length){h.map_target=l.get(0)}}}h.supress_hotel_overlay=0;if(h.highlighted_marker){h.highlighted_marker.b_type=h.highlighted_marker.b_type.replace("_current","")}h.filter.hotel=true;h.filter.landmark=true;h.filter.airport=true;if(n.attr("latitude")){h.latitude=n.attr("latitude")}if(n.attr("longitude")){h.longitude=n.attr("longitude")}if(n.attr("id")){w=h.cur_selected_hotel;h.cur_selected_hotel=n.attr("id");var v=((n.attr("data-hotel"))?n.attr("data-hotel"):h.cur_selected_hotel).replace("show_id","");if(v!="open_map"&&v!="hotel_show_map"){q=(n.attr("id")==="b_google_map_thumbnail"?"map_thumbnail":(booking.env.b_action==="hotel"?"top_link":"hotel_item"));h.initPopupSR=true;h.cur_selected_hotel=v;h.b_force_no_clusters=true;if(n.attr("data-coords")){if(booking.env.map_handle_hashchange){h.last_clicked_hotel=v}var m=n.attr("data-coords").split(",");if(typeof m[1]!="undefined"){h.latitude=m[1];h.longitude=m[0]}}if(booking.env.mapUseJsClusters&&h.is_sr&&h.placemarks&&h.placemarks[v]){h.placemarks[v].b_type="hotel_current";if(w&&h.placemarks[w]){h.placemarks[w].b_type="hotel"}}if(x){h.final_zoom=parseInt(x,10)}if(!h.is_hp&&!booking.env.useLargerMapSr){if(!h.is_sr){t="#promo_map_box"}else{if(booking.env.map_sr_anchor){t="#subheader-wrap";if($(t).length===0){if(booking.env.b_site_experiment_omni_search){t="#omni_breadcrumb"}else{t="#breadcrumb"}}if(booking.env.map_sr_anchor===1){var l=$(t);if(l.length===0){t="#right"}else{t=l.offset().top+l.height()}}}if(booking.env.highlight_current_hotel){$("#hotel_item_"+v).css("background-color","#e6edf6")}}$(window).scrollTo(t)}}else{q="top_link"}}h.googleCreate(h.latitude,h.longitude);if(h.is_sr&&h.search_destination){h.setMapCookie("bs","map_open",h.search_destination+h.b_district_ufi+"1")}$(".sr_sidebar_map_redesign").hide();var k=$("#b_hotel_list.deal_of_the_day");if(k.length){k.hide()}booking.google.setGACustomVariable({type:"Map",value:"Displayed"});if(typeof(booking.google.mapTracker)!="undefined"){u="Display - "+booking.env.b_action+" - "+q+" - "+c;if(c==="first"){c="redisplay"}booking.google.trackEvent(booking.google.mapTracker,u,document.body.id)}return false});$(".show_map_landmark").live("click",function(){var l=$(this),k=l.attr("data-id");h.supress_hotel_overlay=1;$("#map_detail_overlay").hide();if(h.highlighted_marker){h.highlighted_marker.b_type=h.highlighted_marker.b_type.replace("_current","")}if(k&&h.placemarks[k]){h.highlighted_marker=h.placemarks[k];h.highlighted_marker.b_type=h.highlighted_marker.b_type+"_current";h.filter.hotel=false;h.filter.landmark=false;h.filter.airport=false;h.googleCreate(h.latitude,h.longitude)}});if(!booking.env.b_site_experiment_lp_folded_map){$("#fixed_map_container_wrapper").each(function(){h.create_landing_page_map("fixed_map_container_wrapper",h)})}$("*[datamap]").each(function(){var k='url("http://maps.google.com/'+$(this).attr("datamap")+'")';$(this).css({"background-image":k})});$(".thumbnailmap").each(function(){if(!$(this).attr("datamap")){var l=($(this).attr("dimensions"))?$(this).attr("dimensions"):"215x150";var k='url("http://maps.google.com/staticmap?center='+$(this).attr("latitude")+","+$(this).attr("longitude")+"&zoom="+h.getZoom()+"&size="+l+"&"+booking.env.b_google_maps_key_params+'&sensor=false")';$(this).css({"background-image":k})}});$(".folded_map img").bind("click",function(){$(".folded_map").remove();$("#promo_map_box").show();h.create_landing_page_map("fixed_map_container_wrapper",h);return false});if(booking.env.map_handle_hashchange){var e,g=[],j=0;$(window).hashchange(function(){var k=window.location.hash.replace("#","");g.push(k);e=(g.length>1)?g[j-1]:"";j++;if(e==="map_opened"&&(k===""||k.indexOf("hash-blockdisplay")!=-1)){$("#close_map").click();if(h.last_clicked_hotel&&booking.env.b_action!=="hotel"){$(window).scrollTo("#hotel_"+h.last_clicked_hotel)}}else{if(k==="map_opened"&&!h.map_opened){$(h.last_clicked_hotel?"#show_id"+h.last_clicked_hotel:"#open_map").click()}}})}if(booking.env.enableMapSurvey){$(".map_survey").live("click",function(){var k;if(typeof(JSON)!=="undefined"&&$(this).id!=="show_non_matching_criteria_hotels"){k=JSON.parse($.cookie("b"))||{};k.map_svy=1;$.cookie("b",JSON.stringify(k),{expires:30,path:"/",domain:booking.env.b_domain_end})}$("#map_survey_block").fadeOut("slow");if(this.id==="map_survey_cancel"){return false}})}if(booking.promotions){this.preLoadPromotions()}if(booking.loadCurrentHotels){booking.loadCurrentHotels()}if(booking.env.map_enable_sr_autocomplete){this.googleInit();this.historyHandler.initializeHistoryHandler(this);$("#sidebar_map_address_search").live("submit",function(){var l=$("#sidebar_map_address_search_value").val(),k=function(m){if(m){h.requestSearchResults(m)}else{h.geocoderHelper.showFailureMsg();if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"SR Address search - Failed "+(h.b_ufi?h.b_ufi:"")+" - "+l,document.body.id)}}};if(l){h.geocode(l,k)}else{}return false})}if((this.is_sr&&this.bs_cookie&&this.bs_cookie.map_open&&h.search_destination&&this.bs_cookie.map_open===h.search_destination+h.b_district_ufi+"1")||(!booking.env.b_is_landing_page&&booking.env.force_map_open)){if(booking.env.map_enable_sr_autocomplete){h.autoOpenMap=1}else{if($(".show_map").length){var f=$(".show_map").get(0);$(f).click()}else{$("#show_map").click()}}}else{if(booking.env.b_action=="hotel"&&booking.env.b_site_experiment_streetview){this.streetviewCreate(0,0)}}booking.google.setGACustomVariable({type:"Map",value:"Not used"})},create_landing_page_map:function(d,e){if(booking.env.b_map_center_latitude&&booking.env.b_map_center_longitude){var c=$("#"+d);e.map_width=c.width();c.replaceWith('<div id="b_gmap" style="padding:0px;height:auto;width:'+e.map_width+'px;position:relative;border:0 !important;"><div id="markerPopup"></div><div id="map_detail_overlay"></div><div id="b_gmap_inner" style="width:'+e.map_width+'px;" latitude="'+booking.env.b_map_center_latitude+'" longitude="'+booking.env.b_map_center_longitude+'">&nbsp;</div>'+(booking.env.map_hide_legend?"":e.legendHTML())+"</div>");e.map_target=$("#b_gmap_inner").get(0);e.googleCreate(booking.env.b_map_center_latitude,booking.env.b_map_center_longitude);$(window).resize(function(){if(e.map_resize_timeout){clearTimeout(e.map_resize_timeout)}e.map_resize_timeout=setTimeout(function(){var f=c.width();if(f<513){$("#b_gmap, #b_gmap_inner").css({width:"100%"})}},100)})}},legendHTML:function(C){var n="",v="";if(booking.env.b_action!=="hotel"&&booking.env.b_action!=="searchresults"&&!booking.env.b_is_ie6){if(booking.env.enable_toggle_icons_lp){var x='<td class="map_toggle_opt map_opt_other_hotel" data-rel="toggle_other_hotel" ><input id="toggle_other_hotel" type="checkbox" class="map_toggle_opt" checked="checked" data-type="hotel"/></td>',k='<td class="map_toggle_opt map_opt_landmark" data-rel="toggle_landmark" ><input id="toggle_landmark" type="checkbox" class="map_toggle_opt" checked="checked" data-type="landmark"/></td>',E='<td class="map_toggle_opt map_opt_airport" data-rel="toggle_airport" ><input id="toggle_airport" type="checkbox" class="map_toggle_opt" checked="checked" data-type="airport"/></td>',h='<td class="map_toggle_opt map_opt_city" data-rel="toggle_city" ><input id="toggle_city" type="checkbox" class="map_toggle_opt" checked="checked" data-type="city"/></td>',d=' class="map_toggle_opt map_opt_other_hotel" data-rel="toggle_other_hotel" ',c=' class="map_toggle_opt map_opt_landmark" data-rel="toggle_landmark" ',g=' class="map_toggle_opt map_opt_airport" data-rel="toggle_airport" ',f=' class="map_toggle_opt map_opt_city" data-rel="toggle_city" ';if(booking.show_ski_lifts){var u='<td class="map_toggle_opt map_opt_ski_lift" data-rel="toggle_ski_lift" ><input id="toggle_ski_lift" type="checkbox" class="map_toggle_opt" checked="checked" data-type="ski_lift"/></td>';var w=' class="map_toggle_opt map_opt_ski_lift" data-rel="toggle_ski_lift" '}}else{var x="",k="",h="",E="",d="",c="",f="",g="";if(booking.show_ski_lifts){var u=w=""}}var l='<div id="b_map_horizontal_legend" class="'+this.map_sprite_version+'" style="clear:both;"><h3>'+booking.env.map_legend+'</h3><table cellpadding="0" cellspacing="0"><tbody>';l+=x+"<td "+d+" >"+this.markerHtml("hotel")+"</td><th "+d+" >"+booking.env.map_hotel+"</th>";l+=k+"<td "+c+" >"+this.markerHtml("landmark")+"</td><th "+c+" >"+booking.env.map_landmark+"</th>";if(booking.show_ski_lifts){l+=u+"<td "+w+" >"+this.markerHtml("ski_lift")+"</td><th "+w+" >"+booking.map_legend_ski_lift+"</th>"}l+=h+"<td "+f+" >"+this.markerHtml("city")+"</td><th "+f+" >"+booking.env.city+"</th>";l+=E+"<td "+g+" >"+this.markerHtml("airport")+"</td><th "+g+" >"+booking.env.airport+"</th>";if(booking.env.b_city_center_polygon){l+='<td><img src="//r.bstatic.com/static/img/city-center.gif"></td><th>'+booking.env.city_centre+"</th>"}l+="</tr></tbody></table>";l+="<p>"+booking.env.map_click_these_markers_on_the_map_for_more_detailed_information+"</p>";l+="</div>"}else{var o='<td class="map_toggle_opt map_opt_current_hotel" data-rel="toggle_current_hotel" ><input id="toggle_current_hotel" type="checkbox" class="map_toggle_opt" checked="checked" data-type="hotel_current"/></td>';if(booking.env.b_action==="hotel"||booking.env.enable_toggle_icons_sr||booking.env.enable_toggle_icons_lp){var x='<td class="map_toggle_opt map_opt_other_hotel" data-rel="toggle_other_hotel" ><input id="toggle_other_hotel" type="checkbox" class="map_toggle_opt"'+(this.filter.hotel?' checked="checked"':"")+' data-type="hotel"/></td>',k='<td class="map_toggle_opt map_opt_landmark" data-rel="toggle_landmark" ><input id="toggle_landmark" type="checkbox" class="map_toggle_opt"'+(this.filter.landmark?' checked="checked"':"")+' data-type="landmark"/></td>',E='<td class="map_toggle_opt map_opt_airport" data-rel="toggle_airport" ><input id="toggle_airport" type="checkbox" class="map_toggle_opt"'+(this.filter.airport?' checked="checked"':"")+' data-type="airport"/></td>',y=' class="map_toggle_opt map_opt_current_hotel" data-rel="toggle_current_hotel" ',d=' class="map_toggle_opt map_opt_other_hotel" data-rel="toggle_other_hotel" ',c=' class="map_toggle_opt map_opt_landmark" data-rel="toggle_landmark" ',g=' class="map_toggle_opt map_opt_airport" data-rel="toggle_airport" ';if(booking.show_ski_lifts){var u='<td class="map_toggle_opt map_opt_ski_lift" data-rel="toggle_ski_lift" ><input id="toggle_ski_lift" type="checkbox" class="map_toggle_opt" checked="checked" data-type="ski_lift"/></td>';var w=' class="map_toggle_opt map_opt_ski_lift" data-rel="toggle_ski_lift" '}if(booking.env.enable_toggle_icons_sr){var t='<td class="map_toggle_opt map_opt_hotel_matching_criteria" data-rel="toggle_hotel_matching_criteria" ><input id="toggle_hotel_matching_criteria" type="checkbox" class="map_toggle_opt" checked="checked" data-type="hotel_matching_criteria"/></td>';var D=' class="map_toggle_opt map_opt_hotel_matching_criteria" data-rel="toggle_hotel_matching_criteria" '}}else{var o="",x="",k="",E="",y="",d="",c="",f="",g="";if(booking.show_ski_lifts){var u=w=""}if(!booking.env.enable_toggle_icons_sr){var t=D=""}var m="";var z;var q}var m=" width: 155px; ";if(typeof C=="undefined"){C=390}if(this.is_sr){n="right: -198px;"+(booking.env.map_use_thumbnail_improved_zoom?"top: 27px;":"top: 60px;");v='<div id="map_legend_toggle_wrapper"><div id="map_legend_toggle" class="map_legend_toggle"></div><div id="map_legend_toggle_img" class="map_legend_toggle"></div></div>'}if(booking.env.b_lang=="ru"){var l='<div id="b_map_legend" class="'+this.map_sprite_version+'" style="height: '+C+"px;"+m+n+'">'+v+'<div id="map_legend_basic_content"><table><tbody>'}else{var l='<div id="b_map_legend" class="'+this.map_sprite_version+'" style="height: '+C+"px; "+m+n+'">'+v+'<div id="map_legend_basic_content"><h3>'+booking.env.map_legend+"</h3><table><tbody>"}if(this.is_sr){z="hotel_matching_criteria";q=booking.env.map_hotel_matching_your_selection_criteria;if(booking.env.b_site_experiment_fd_pages){z="flash_deal";q=booking.env.my_flash_deal_translation}l+="<tr>"+t+"<td "+D+" >"+this.markerHtml(z);l+="</td><th "+D+" >"+q+"</th></tr>";if(!booking.env.b_site_experiment_fd_pages){l+="<tr>"+x+"<td "+d+" >"+this.markerHtml("hotel_not_matching_criteria");l+="</td><th "+d+" >"+booking.env.map_other_hotel+"</th></tr>"}}else{if(booking.env.b_action==="hotel"){l+="<tr>"+o+"<td "+y+" >"+this.markerHtml("hotel_current")+"</td><th "+y+" >"+booking.env.current_hotel+"</th></tr>"}l+="<tr>"+x+"<td "+d+" >"+this.markerHtml("hotel");l+="</td><th "+d+" >"+(booking.env.map_vars.competitiveSetTxt?booking.env.map_vars.competitiveSetTxt:booking.env.map_hotel)+"</th></tr>"}l+="<tr>"+k+"<td "+c+" >"+this.markerHtml("landmark")+"</td><th "+c+" >"+booking.env.map_landmark+"</th></tr>";if(booking.show_ski_lifts){l+="<tr>"+u+"<td "+w+" >"+this.markerHtml("ski_lift")+"</td><th "+w+" >"+booking.map_legend_ski_lift+"</th></tr>"}l+="<tr>"+E+"<td "+g+" >"+this.markerHtml("airport")+"</td><th "+g+" >"+booking.env.airport+"</th></tr>";l+="</tbody></table>";if(booking.env.map_legend_districts_dropdown){l+='<p class="ledge">'+booking.env.map_legend_copy_hover_bold+"</p>";l+='<p class="ledge">'+booking.env.map_legend_copy_click_bold+"</p>";if(booking.env.map_legend_districts_dropdown){var j="",B=0,e="";for(var A in booking.env.map_legend_districts_dropdown){if(booking.env.map_legend_districts_dropdown[A].id===booking.env.b_district_id){j='selected="selected"';B=1}else{j=""}e+='<option value="'+booking.env.map_legend_districts_dropdown[A].url+'" '+j+">"+A+"</option>"}l+="<h4>"+booking.env.map_legend_districts+'</h4><select id="map_district_filter" style="width: 100%;"><option value="';l+=(B?booking.env.b_url_no_district+'">'+booking.env.map_legend_all_districts:'">'+booking.env.map_legend_copy_zoom)+"</option>";l+=e+"</select>"}}else{if(booking.env.b_action!=="hotel"){l+='<p style="font-size: 11px;">'+booking.env.map_click_these_markers_on_the_map_for_more_detailed_information+"</p>"}}l+="</div></div>"}return l},googleInit:function(f,c){var e=this,d;if(!this.mapScriptLoaded){this.mapScriptLoaded=true;d=document.createElement("script");d.type="text/javascript";d.src=booking.env.google_map_current_url;window.rerunCreateMap=function(){if(booking.env.map_enable_sr_autocomplete){e.initGooglePlacesAutocomplete("sidebar_map_address_search_value");if(e.autoOpenMap){$("#show_map").click()}}else{e.googleCreate(f,c)}};$("head").append(d)}else{}},streetviewInit:function(g,c){var f=this;var e=f.sProtocol+"//maps.google.com/maps/api/js?v="+this.api_version+"&callback=rerunCreateMap&sensor=";e+=(this.sensor)?"true":"false";e+="&language=";e+=(booking.env.b_lang)?booking.env.b_lang:"en";var d=document.createElement("script");d.type="text/javascript";d.src=e;window.rerunCreateMap=function(){f.streetviewCreate(g,c)};$("head").append(d)},streetviewCreate:function(f,c){if(typeof google!="undefined"&&typeof google.maps!="undefined"){var d=new google.maps.LatLng(booking.env.b_streetview_latitude,booking.env.b_streetview_longitude);var e={position:d,pov:{heading:booking.env.b_streetview_yaw,pitch:booking.env.b_streetview_pitch+10,zoom:booking.env.b_streetview_zoom}};booking.env.panorama=new google.maps.StreetViewPanorama(document.getElementById("streetview"),e);booking.env.panorama.setVisible(true)}else{this.streetviewInit(f,c)}},googleCreate:function(L,k){var f=this;if(typeof google!="undefined"&&typeof google.maps!="undefined"){this.map_opened=true;if(!this.map_object){if(!booking.hotelsMatchingCriteria){booking.hotelsMatchingCriteria={}}if(typeof(this.map_target)==="undefined"){var A="",w=2,j="",C="",c="",D=false,H="",t="",x=$(window),o="#right",u=(booking.env.b_action==="hotel"),K,h,q,B,e=(x.height()>577&&x.width()>735),v=e&&this.is_hp,n="",g;if(typeof booking.google!="undefined"){if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,(e?"Big size":"Small size"),document.body.id)}}if(typeof(JSON)!=="undefined"){K=JSON.parse($.cookie("b"))||{}}if(!K.map_svy){if(booking.env.enableMapSurvey&&!K.map_svy){n='<div id="map_survey_block" class="map_status_msg_type map_survey_block"><span>Пожалуйста, ответьте на <a class="map_survey" target="_blank" href="http://www.surveygizmo.com/s3/1054252/2012?city_map='+booking.env.b_ufi+"&entry_page="+booking.env.b_action+"&city_name="+(booking.env.city_name_en?booking.env.city_name_en:booking.env.b_urlcity)+'">пару коротких вопросов</a> и помогите нам улучшить карты.</span><br><a href="#" id="map_survey_cancel" class="map_survey" >Нет, спасибо.</a></div>'}else{if(booking.env.mapHideGreyMarkers&&!K.map_gm){n='<div id="map_survey_block" class="map_status_msg_type map_survey_block"><span>'+booking.env.mapHideGreyMarkersTxt+'</span><a href="#" id="show_non_matching_criteria_hotels" class="map_survey" >'+booking.env.mapHideGreyMarkersShowAllTxt+"</a></div>";booking.env.enableMapSurvey=1}else{booking.env.mapHideGreyMarkers=0}}}t=n+'<div id="map_ui_blocker_overlay" style="display:none;position: absolute; top: 0px;left: 0px; width:100%;height:100%;z-index: 999;background-color: #ccc;opacity:0.3;filter: alpha(opacity=30);"></div><div id="map_status_msg" class="map_status_msg_type"><span id="map_status_current_msg">'+booking.env.mapAddressLoadingMsgTxt+"</span></div>";if(booking.env.enable_map_info_box&&!booking.env.map_enable_sr_autocomplete){H=(u?'<div id="hotel_map_info_box_wrapper">':"")+'<div id="map_info_box" '+(booking.env.map_enable_sr_autocomplete?'style="display:none"':"")+'class="'+(booking.env.map_landmark_dropdown?" mult_item_info_box":"")+(booking.env.use_places_autocomplete?" autocomplete_search":"")+'">'+(u?'<div id="hotel_map_info_box_content">':"")+'<table id="map_info_box_wrapper"><tbody><tr><td class="map_info_box_item_wrapper'+(booking.env.map_landmark_dropdown?" two_list_item":"")+'"><div id="map_info_box_address" class="option_item"><form id="map_address_search"><label for="map_address_search_value" style="margin: 3px;">'+booking.env.map_address_search_search_label+'</label><input id="map_address_search_value" type="text"/><input type="submit" class="button_x" style="float:none;margin: 0 10px;" value="'+booking.env.map_address_search_search+'" /><span id="map_address_search_success_wrapper"'+(booking.env.map_landmark_dropdown_type===2?' class="no_padding"':"")+'><span id="map_address_search_success" class="map_address_search_status'+(booking.env.map_landmark_dropdown_type===2?' simple_success">':'">'+booking.env.map_address_search_centered)+'</span><span id="map_address_search_result"></span></span><span id="map_address_search_failed" class="map_address_search_status">'+(booking.env.map_landmark_dropdown_type===2?"":booking.env.map_address_search_error)+"</span>"+(booking.env.mapAddressSearchUpdates?'<span id="sidebar_map_address_search_loading" class="map_address_search_status">'+booking.env.loading+"</span>":"")+"</form></div></td>"+(booking.env.map_landmark_dropdown?booking.env.map_landmark_dropdown:"")+"<tr></tbody></table>"+(u?"</div>":"")+"</div>"+(u?"</div>":"")}if(this.is_sr){$("#open_map").hide();$("#close_map").show();if(!booking.env.map_no_force_open_sr){$("#frm").append('<input type="hidden" name="map" value="1" id="force_map">')}j='class="map_wrapper"'+(booking.env.enable_map_info_box&&!(booking.env.map_address_search_to_top)?'style="border-bottom: 1px solid #AAA !important;border-bottom: 1px solid rgba(0,0,0,.3) !important;"':"");C=' style="height: '+(booking.env.b_site_experiment_fd_pages?"450":"550")+'px;"';$(".map_legend_toggle").live("click",function(){var N=-198,d=true;if(!D){D=true;$img=$("#map_legend_toggle_img");if(!$img.hasClass("map_legend_toggle_shown")){d=false;N=-1}$("#b_map_legend").animate({right:N},function(){D=false;d?$img.removeClass("map_legend_toggle_shown"):$img.addClass("map_legend_toggle_shown")})}});h='<div id="b_map_container" style="z-index:999;">'+(booking.env.map_address_search_to_top?H:"")+'<div id="b_gmap" '+j+">"+this.legendHTML()+t+'<div id="b_gmap_inner"'+(booking.env.useLargerMapSr?'class="sr_responsive_map"':"")+C+'></div></div><div id="markerPopup"></div><div id="map_detail_overlay"></div>'+(booking.env.map_address_search_to_top?"":H)+"</div>";if(booking.env.useLargerMapSr){$(document.body).append('<div id="sr_map" style="position: absolute;" class="sr_tab legend_static">'+h+'<div id="b_shadow"></div><div id="close_map_lightbox"></div></div>');q=$("#sr_map")}else{q=$("#sr_map");q.html(h)}q.show();if(booking.env.use_places_autocomplete&&!booking.env.map_enable_sr_autocomplete){this.initGooglePlacesAutocomplete("map_address_search_value")}A=$("#b_gmap_inner");if(booking.env.useLargerMapSr){this.resizeMapToFullScreen(this,true);this.positionMapContainer()}else{B=q.width();$("#b_gmap").width(B);if(booking.env.enableMapSurvey){g=(this.is_hp?{width:B-450,left:100,top:43}:{width:B-200,left:100});$("#map_survey_block").css(g)}A.width(B)}q.removeClass("placeholder_sr_map").show();$("#close_map_lightbox, #close_map").live("click",function(){var N="",d=$("#b_hotel_list");if(typeof(ClickTaleExec)!=="undefined"){ClickTaleExec('jQuery("#close_map").click()')}$("#sr_map").hide();$("#close_map").hide();$("#open_map").show();f.map_opened=false;if(d.length){d.show()}if(booking.env.b_action=="searchresults"){if(typeof(JSON)!="undefined"){f.bs_cookie=JSON.parse($.cookie("bs"))||{};f.bs_cookie.map_open="";$.cookie("bs",JSON.stringify(f.bs_cookie),{path:"/",domain:booking.env.b_domain_end})}}if(typeof booking.google!="undefined"){if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Close",document.body.id)}}$("#filterbox_options a, #sort_by a").each(function(){this.href=this.href.slice(0,-4)});$(".sr_sidebar_map_redesign").show();f.initPopup=false;$("#rightClickPopup").hide();if(f.last_clicked_hotel){if(booking.env.map_scroll_last_hotel){$(window).scrollTo("#hotel_item_"+f.last_clicked_hotel);if(booking.env.map_scroll_last_hotel===2){$("#hotel_item_"+f.last_clicked_hotel).css("background-color","#e6edf6")}}}booking.env.trackExperiment(N,"map_opened");return false})}else{var M=false;var J=document.createElement("div");J.id="b_map_container";J.style.zIndex=999;J.style.display="none";J.innerHTML='<div id="b_gmap" '+(v?'class="larger"':"")+">"+t+'<div id="b_map_title"><h2 '+(booking.env.not_drag_map?'class="no_drag"':"")+">"+booking.env.map+'</h2><a href="#" id="close_map">'+booking.env.close_map+'</a></div><div style="position:relative;float: left;"><div id="b_gmap_inner"></div><div id="map_detail_overlay"></div><div id="markerPopup"></div>'+(booking.env.enable_map_info_box?H:"")+"</div>"+this.legendHTML()+'</div><div id="b_shadow"></div>';document.body.appendChild(J);A=$("#b_gmap_inner");this.resizeMapToFullScreen(this,true);this.positionMapContainer();$("#b_map_container").show();$("#close_map").click(function(){var d="";$("#b_map_container").hide();$(".sr_sidebar_map_redesign").show();$("#open_map").show();f.map_opened=false;if(typeof booking.google!="undefined"){if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Close",document.body.id)}}f.initPopup=false;$("#rightClickPopup").hide();if(!M){booking.env.trackExperiment(d,"map_opened");M=true}return false});if(!booking.env.not_drag_map){$(document).mousemove(function(d){if(f.oDragMap!=null){var O=f.map_pos_x[1]+d.pageX-f.map_pos_x[0];var N=f.map_pos_y[1]+d.pageY-f.map_pos_y[0];$(f.oDragMap).css({left:O+"px",top:N+"px"})}});$("#b_map_title, #b_shadow").mousedown(function(d){f.map_pos_x=[d.pageX,$("#b_map_container").position().left];f.map_pos_y=[d.pageY,$("#b_map_container").position().top];f.oDragMap=$("#b_map_container")});$(document).mouseup(function(d){f.oDragMap=null})}}this.map_width=A.width();this.map_height=A.height();this.map_target=A.get(0);if(v||booking.env.useLargerMapSr){this.mapResizeListener(true)}}$("#b_gmap").bgiframe();this.initMap(L,k,this);if(booking.env.b_city_center_polygon){var F=[],l=0,G=0,E;for(E=0;booking.env.b_city_center_polygon[E];E++){F.push(new google.maps.LatLng(booking.env.b_city_center_polygon[E][0],booking.env.b_city_center_polygon[E][1]));l+=parseFloat(booking.env.b_city_center_polygon[E][0]);G+=parseFloat(booking.env.b_city_center_polygon[E][1])}b_city_center_polygon=new google.maps.Polygon({paths:F,strokeColor:"#003580",strokeOpacity:0.5,strokeWeight:1,fillColor:"#003580",fillOpacity:0.2});b_city_center_polygon.setMap(f.map_object);f.map_object.setCenter(new google.maps.LatLng(l/E,G/E));if(booking.env.b_this_url.match(/london|paris/)){f.map_object.setZoom(f.map_object.getZoom()+1)}else{if(booking.env.b_this_url.match(/venice/)){f.map_object.setZoom(f.map_object.getZoom()+3)}else{f.map_object.setZoom(f.map_object.getZoom()+2)}}}if(booking.env.mapShowCurrentDistrict){this.drawPolygon({polygons:booking.env.mapCurrentDistrictPolygons})}$("#embedded_map_loading").hide()}else{$("#"+(booking.env.b_action==="searchresults"?"sr_map":"b_map_container")).show();$("#open_map").hide();$("#close_map").show();if((this.is_hp&&v)||booking.env.useLargerMapSr){this.resizeMapToFullScreen(this,true);this.positionMapContainer()}google.maps.event.trigger(this.map_object,"resize");if(f.cur_selected_hotel!=="hotel_show_map"){if(f.cur_selected_hotel!=="b_google_map_thumbnail"&&f.cur_selected_hotel!=="open_map"&&f.cur_selected_hotel!=="show_map"&&f.cur_selected_hotel!=="view_map"&&f.cur_selected_hotel!=="sidebar_map_address_search_success"){f.map_object.setCenter(new google.maps.LatLng(L,k));f.map_object.setZoom(f.getZoom())}else{var I=this.getBoundingZoom();if(I!=null){var F=I.split(",");var z=new google.maps.LatLng(F[1],F[0]);var m=new google.maps.LatLng(F[3],F[2]);var y=new google.maps.LatLngBounds(z,m);f.map_object.fitBounds(y)}}}this.updateMap()}if(booking.env.map_handle_hashchange){window.location.hash="map_opened"}}else{this.googleInit(L,k);if(booking.env.map_chrome_cursor_fix){$(document.body).append('<img src="'+f.sProtocol+'//maps.gstatic.com/mapfiles/openhand_8_8.cur" style="display: none;" />')}}},preLoadPromotions:function(){if(typeof booking.promotions!="undefined"&&typeof booking.promotions.load!="undefined"){booking.promotions.load(booking.env);if(booking.pageSubject){var c={};c.pageSubject=booking.pageSubject;this.parseJsonData(c)}this.parseJsonData(booking.promotions)}},loadJSONHotels:function(l){var f=this;if(!booking.env.no_update_map){var g=this.map_object.getBounds(),m=g.getSouthWest().lng()+","+g.getSouthWest().lat()+","+g.getNorthEast().lng()+","+g.getNorthEast().lat(),d="/hotelsonmap."+booking.env.b_lang+".json"+(booking.env.b_query_params_no_ext?booking.env.b_query_params_no_ext:"?")+";BBOX="+m,k={sr:(booking.env.use_mobile_icons?(booking.env.use_mobile_icons===2?200:150):100),other:(booking.env.use_mobile_icons?(booking.env.use_mobile_icons===2?200:150):50)};if(booking.env.mapUseJsClusters){d+=";limit=500"}else{if(this.is_sr){d+=";limit="+k.sr}}if(booking.map.singleCallHotelsOnMap){d+=";limit=1"}else{d+=";limit="+k.other}if(!this.tracked&&booking.env.map_more_params){this.tracked=true;d+=";exps="+booking.env.map_more_params+";what=map_open";if(booking.map.singleCallHotelsOnMap){booking.env.no_update_map=true}}if(booking.env.b_checkin_date&&booking.env.b_checkout_date){d+=";checkin="+booking.env.b_checkin_date+";checkout="+booking.env.b_checkout_date}for(var h=0;h<this.json_params.length;h++){var e=this.json_params[h];if(booking.env[e]){d+=";"+e.replace("b_param_","")+"="+booking.env[e]}}this.currentRequestId++;if(booking.env.mapUseJsClusters){this.showStatusMsg({position:"center",loadFromMapDrag:1})}$.get(d,function(q){var o=(typeof q.b_clusters_found!="undefined")?q.b_clusters_found:0;f.currentResponsedReceivedId++;if(booking.map.singleCallHotelsOnMap){q.b_hotels={}}f.parseJsonData(q.b_hotels,o)})}else{if(booking.env.map_vars.enableCompetitiveSet){this.updateMap()}else{if(booking.env.profile_map_list){this.parseJsonData(booking.env.profile_map_list,booking.env.profile_map_list_count);if(!booking.env.profile_map_init){booking.env.profile_map_init=true;var c=new google.maps.LatLngBounds();for(var n in booking.env.profile_map_list){if(booking.env.profile_map_list.hasOwnProperty(n)){var j=new google.maps.LatLng(booking.env.profile_map_list[n].b_latitude,booking.env.profile_map_list[n].b_longitude);c.extend(j)}}f.map_object.setCenter(c.getCenter());f.map_object.fitBounds(c)}}}}},parseJsonData:function(c,e){if(this.b_clusters_found==0){var e=0;for(oItem in c){if((c[oItem].b_latitude&&c[oItem].b_longitude)||c[oItem].latLng){this.placemarks[oItem]=c[oItem];e++}}if(e==0){e=1}this.b_clusters_found=e}else{if(c&&typeof c.b_clusters_found!="undefined"){this.b_clusters_found=c.b_clusters_found}for(oItem in c){var g=c[oItem];if(g.latLng){g.b_latitude=g.latLng.b_latitude;g.b_longitude=g.latLng.b_longitude}if(g.b_avg_lat&&g.b_avg_long){g.b_latitude=g.b_avg_lat;g.b_longitude=g.b_avg_long;g.icon_type="cluster";g.b_type="cluster";if(g.b_nr_hotels){if(g.b_nr_hotels>1){g.title=g.b_nr_hotels+" hotels"}else{g.title=g.b_nr_hotels+" hotel"}}if(!this.placemarks[oItem]){this.placemarks[oItem]=g}else{for(oSubItem in g){this.placemarks[oItem][oSubItem]=g[oSubItem]}}}else{if((g.b_latitude&&g.b_longitude)||g.latLng){var d=false;if(this.placemarks.pageSubject&&(oItem==this.placemarks.pageSubject.b_hotel_id)){d=true}var f=this.placemarks[oItem];if(!this.placemarks[oItem]&&!d){this.placemarks[oItem]=g}else{for(oSubItem in g){if(!oSubItem=="icon_type"&&this.placemarks[oItem].icon_type=="hotel_current"){this.placemarks[(d?"pageSubject":oItem)][oSubItem]=g[oSubItem]}}}}}}}if(typeof google!=="undefined"&&this.map_object!=null){this.updateMap();if(this.is_sr){this.initPopupSR=false}}},getIcon:function(d,e){e=e.replace("hotel_","");e=e.replace("hotel","");var c="hotel";if(d.b_type){c=d.b_type}if(d.icon_type){c=d.icon_type}if(c==="hotel"){if(this.is_sr){if(booking.hotelsMatchingCriteria[e]){c="hotel_matching_criteria"}else{c="hotel_not_matching_criteria"}}if(e===this.cur_selected_hotel){c="hotel_current"}if(d.b_closed){c="hotel_closed"}}return c},getZoom:function(){var c=14;if($(".show_map[rel]").length){iZoomlevel=$(".show_map[rel]").attr("rel")}c=(booking.env.b_map_google_static_thumbnail_zoom_level)?booking.env.b_map_google_static_thumbnail_zoom_level:(booking.env.b_action=="country")?5:11;if(this.final_zoom>0){c=this.final_zoom}return c},getBoundingZoom:function(){var d=null,c=$(".show_map[data-bounding-box]");if(c.length){d=c.attr("data-bounding-box")}if(booking.env.b_map_google_bounding_box){d=booking.env.b_map_google_bounding_box}return d},createMarker:function(u){var n=this.b_map_icons[u.type],o=(n.height)?n.height:20,w=(n.width)?n.width:17,j=n.iconAnchor[0],y=(n.zOrder)?n.zOrder:20,v=u.y-n.iconAnchor[1],f=(u.type=="cluster")?'<div class="ml-text">'+u.nrHotels+"</div>":"",t="left:"+(u.x-j)+"px;top:"+v+"px;z-index:"+(y+1)+";",g="width:"+w+"px;height:"+o+"px;",e="",d,q,l,h,m=this.b_map_icons[u.type].className,k,c=true,x="";if(u.type=="country"){d=$('<div class="marker marker_type_'+u.type+'" id="'+u.id+'" style="'+t+g+";background: url(//r.bstatic.com/static/img/flags/24/"+u.id+'.png) left top no-repeat;">'+f+this.markerHtml(u.type,"position:absolute;top:0px;left:0px;z-index:12000;")+"</div>")}else{if(booking.env.supress_map_marker_img&&this.b_map_icons[u.type].className){if(u.type==="cluster"){x=booking.env.mapClusterCountHTML.replace("placeholder",u.nrHotels);x=x.replace("{clusterid}",u.id)}d=$('<div class="marker '+this.map_sprite_version+" icon-marker marker_type_"+u.type+" "+m+'" id="'+u.id+'" style="'+t+'">'+x+"</div>")}else{d=$('<div class="marker marker_type_'+u.type+'" id="'+u.id+'" style="'+t+'">'+f+this.markerHtml(u.type,"position:absolute;top:0px;left:0px;z-index:12000;")+"</div>")}}return d},updateMap:function(){if(!this.map.oMarkerLayer||!this.enable_all_markers){return}var d=this,F,e=this.map_object.getZoom(),H=document.createDocumentFragment(),C=d.filter,z=0,m,j,h,g,v,o=this.map_object.getBounds(),J=o.getSouthWest().lat(),y=o.getSouthWest().lng(),G=[J,y,o.getNorthEast().lat(),o.getNorthEast().lng()],A,u,t,x,c,w,q,B=false,k,E,D=this.is_sr&&booking.env.mapHideGreyMarkers;this.map_overlay.oMarkerLayer.empty();var n=new google.maps.LatLng(J,y);F=this.map_overlay.getProjection();d.map_scroll=F.fromLatLngToDivPixel(n);if(booking.env.mapUseJsClusters){c={};this.markerClusterer.clearClusters();if(this.map_object.getZoom()<15){B=true}}for(oItem in d.placemarks){k=d.placemarks[oItem];if(typeof(k.b_type)==="undefined"){k.b_type="hotel"}E=k.b_type;if(k.latLng){k.b_latitude=k.latLng.b_latitude;k.b_longitude=k.latLng.b_longitude}if(C[E]){if((k.b_latitude>G[0]&&k.b_longitude>G[1]&&k.b_latitude<G[2]&&k.b_longitude<G[3])){if(E==="hotel"&&this.markerClusterer){this.markerClusterer.addMarkerToClosestCluster(k)}A=this.getIcon(k,oItem);if(!(A==="hotel_not_matching_criteria"&&D)){u=d.b_map_icons[A];t=(u.min)?u.min:0;x=(u.max)?u.max:1000;if((e>=t&&e<=x)||booking.env.skip_zoom_levels){if(E==="hotel"){z++}oHotelLatLng=new google.maps.LatLng(k.b_latitude,k.b_longitude);m=F.fromLatLngToDivPixel(oHotelLatLng);j=(k.title)?k.title:A;h=(k.b_nr_hotels)?k.b_nr_hotels:1;g=d.createMarker({x:m.x,y:m.y,id:oItem,type:A,nrHotels:h});v=g.get(0);if(B&&E==="hotel"){c[k.b_id]={marker:k,markerHTML:v}}else{H.appendChild(v)}}}}}}if(B){for(i in c){if(typeof(c[i].marker.clusterId)==="undefined"||(c[i].marker.clusterId>=0&&this.markerClusterer.clusters[c[i].marker.clusterId]&&this.markerClusterer.clusters[c[i].marker.clusterId].totalMarkers<this.markerClusterer.minClusterSize)){H.appendChild(c[i].markerHTML)}}for(i=0,w=this.markerClusterer.clusters.length,q=this.markerClusterer.clusters;i<w;i++){if(q[i].totalMarkers>=this.markerClusterer.minClusterSize){oHotelLatLng=new google.maps.LatLng(q[i].center.b_latitude,q[i].center.b_longitude);m=F.fromLatLngToDivPixel(oHotelLatLng);g=d.createMarker({x:m.x,y:m.y,id:"cluster"+q[i].id,type:"cluster",nrHotels:q[i].totalMarkers});v=g.get(0);H.appendChild(v)}}H.appendChild($('<div id="cluster_area"></div>').get(0))}this.map.oMarkerLayer.append(H);if(!(booking.env.b_action==="hotel"&&this.initPopup)&&!(this.is_sr&&!this.initPopupSR)){if(this.is_sr){$("#map_detail_overlay").hide()}if(!(this.is_sr&&booking.env.use_new_current_hotel_icon===2)){var I=false;d.initPopupTimeout=setTimeout(function(){var f=$(".marker_type_hotel_current");if(f.length){if(!I&&booking.env.map_highlight_hotel_params){I=true;booking.env.trackExperiment(booking.env.map_highlight_hotel_params,"map_opened")}d.highlight_marker_z=f.css("z-index");if(!(booking.env.map_not_highlight_hotel||d.supress_hotel_overlay)){f.mouseover()}d.initPopup=true}},500)}}else{$("#map_detail_overlay").hide()}if(this.currentRequestId===this.currentResponsedReceivedId&&d.mapStatusMSgShown){d.mapStatusMSgShown=0;$("#map_status_msg").hide();$("#map_ui_blocker_overlay").hide()}this.updateFilters()},initMap:function(J,g,c){if(!google||!google.maps||!google.maps.OverlayView){return}if(booking.env.mapTrackConcurrentAjax){var o=0,H=0,l=true,I=$(document);I.bind("ajaxSend",function(){if(l){if(typeof(arguments[2].url)!==undefined&&arguments[2].url.indexOf("hotelsonmap")!==-1){if(o>H){if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"AJAX: concurrent hotelsonmap",document.body.id)}}o++}}else{I.unbind("ajaxSend")}}).bind("ajaxComplete",function(){if(typeof(arguments[2].url)!==undefined&&arguments[2].url.indexOf("hotelsonmap")!==-1){H++;if(arguments[2].url.indexOf("exps")!==-1){l=false;I.unbind("ajaxComplete")}}})}var B=false,t;function m(M){this.setValues(M);this.oMarkerLayer=$("<div />").addClass("markersOverlay")}m.prototype=new google.maps.OverlayView;m.prototype.onAdd=function(){var M=$(this.getPanes().overlayImage);M.append(this.oMarkerLayer);c.map=this};m.prototype.onRemove=function(){this.oMarkerLayer.remove()};m.prototype.draw=function(){if(!booking.env.b_site_experiment_fd_pages){if(booking.env.b_site_experiment_map_overlay_no_timeout){c.loadJSONHotels()}else{setTimeout(function(){c.loadJSONHotels()},500)}}};if(typeof google!="undefined"){if(this.bs_cookie&&this.bs_cookie.map&&this.use_sr_cookie&&document.getElementById("destination")){var u=this.bs_cookie.map.split(",");if(u[0]===document.getElementById("destination").value+c.b_ufi&&!this.bs_cookie.map_dist){J=u[1];g=u[2];var L=u[3]}if(this.bs_cookie.map_dist){c.setMapCookie("bs","map_dist","")}}if(booking.env.map_improve_ufi_zoom&&!L){var E=booking.env.map_improve_ufi_zoom[booking.env.b_ufi];L=E.zoom;J=E.lat;g=E.lng}var e=(L)?parseInt(L,10):c.getZoom()+(booking.env.map_landmark_extra_zoom?2:0);if(booking.env.b_site_experiment_zoomout_us_city200){e-=1}if(booking.env.mapImproveContrast){if(booking.env.mapImproveContrast==1||booking.env.mapImproveContrast==3){c.selectMarkerSet()}if(booking.env.mapImproveContrast==1||booking.env.mapImproveContrast==2){t=[{featureType:"road.highway",stylers:[{hue:"#0055ff"},{saturation:-61}]},{featureType:"road.highway.controlled_access",stylers:[{visibility:"simplified"},{saturation:-30}]},{featureType:"landscape.man_made",stylers:[{visibility:"on"},{hue:"#0008ff"},{saturation:-43},{lightness:-2}]},{featureType:"road.arterial",stylers:[{visibility:"on"},{hue:"#0011ff"},{saturation:-50},{lightness:14}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{saturation:-100},{lightness:-62}]},{elementType:"labels.text.stroke",stylers:[{lightness:75}]},{stylers:[{saturation:-50}]}]}}var C=new google.maps.LatLng(J,g),x={zoom:e,center:C,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID]},mapTypeControl:true,navigationControl:true,scaleControl:true,streetViewControl:false,maxZoom:(booking.env.b_site_experiment_map_min_zoom_sr?17:null),overviewMapControl:(booking.env.map_use_thumbnail_improved_zoom?true:false),overviewMapControlOptions:(booking.env.map_use_thumbnail_improved_zoom?{opened:true}:false)};if(t){x.styles=t}this.map=new google.maps.Map(this.map_target,x);this.map_object=this.map;if(!L&&(c.cur_selected_hotel==="b_google_map_thumbnail"||c.cur_selected_hotel==="open_map"||c.cur_selected_hotel==="show_map"||c.cur_selected_hotel==="view_map"||c.cur_selected_hotel==="sidebar_map_address_search_success")){var F=this.getBoundingZoom();if(F!=null){var A=F.split(",");var w=new google.maps.LatLng(A[1],A[0]);var k=new google.maps.LatLng(A[3],A[2]);var v=new google.maps.LatLngBounds(w,k);this.map_object.fitBounds(v);this.fixZoom=true}}if(booking.env.useLargerMapSr){$("#b_gmap_inner").removeClass("sr_responsive_map")}google.maps.event.addListener(this.map,"dragstart",function(M){if(typeof(c.clicked_marker)!==undefined&&c.clicked_marker===true){c.clicked_marker=false}$("#rightClickPopup").hide();$("#map_detail_overlay").html("<div />").hide();$("#markerPopup").html("<div />").hide()});google.maps.event.addListener(this.map,"dragend",function(P){if(booking.env.useLargerMapSr){booking.map.mapHasBeenDragged=true;setTimeout(function(){booking.map.mapHasBeenDragged=false},50)}if(!booking.env.b_site_experiment_fd_pages){var Q=c.map_object.getBounds(),O=new google.maps.LatLng(Q.getSouthWest().lat(),Q.getSouthWest().lng()),N=c.map_overlay.getProjection();c.map_scroll=N.fromLatLngToDivPixel(O);c.loadJSONHotels(true);if(c.use_sr_cookie&&c.search_destination_without_district){var M=c.map_object.getCenter();c.setMapCookie("bs","map",c.search_destination_without_district+c.b_ufi+","+M.lat()+","+M.lng()+","+c.map_object.getZoom())}}else{c.updateMap()}if(booking.env.mapUseJsClusters){$("#cluster_area").hide()}});if(this.is_sr||booking.env.b_action==="hotel"||booking.env.enable_toggle_icons_sr||booking.env.enable_toggle_icons_lp){google.maps.event.addListener(this.map,"zoom_changed",function(){if(c.use_sr_cookie&&!booking.env.b_site_experiment_fd_pages){var M=c.map_object.getCenter(),N=c.map_object.getZoom();c.setMapCookie("bs","map",c.search_destination+c.b_ufi+","+M.lat()+","+M.lng()+","+N)}if(booking.env.b_action==="hotel"||booking.env.enable_toggle_icons_sr||booking.env.enable_toggle_icons_lp){c.updateToggleOptions()}if((booking.env.b_site_experiment_fd_pages)&&this.getZoom()<=2){setTimeout(function(){c.updateMap()},200)}})}google.maps.event.addListener(this.map,"idle",function(M){$(document).trigger("mapIdle");c.mapCenter=c.map_object.getCenter()});google.maps.event.addListener(this.map,"tilesloaded",function(O){var P=true;if(c.map_scroll_base.x==0&&c.map_scroll_base.y==0){var Q=c.map_object.getBounds();var N=new google.maps.LatLng(Q.getSouthWest().lat(),Q.getSouthWest().lng());var M=c.map_overlay.getProjection();c.map_scroll_base=M.fromLatLngToDivPixel(N);if(c.map_scroll.y==0){c.map_scroll.y=c.map_scroll_base.y}}if(P&&(booking.env.enable_toggle_icons_sr||booking.env.enable_toggle_icons_lp)){c.updateToggleOptions();P=false}if(booking.env.b_site_experiment_fd_pages){c.updateMap()}if(c.highlightedMarker){$("#"+c.highlightedMarker).trigger(c.mouseover);c.highlightedMarker=undefined}})}if(!this.map_overlay){this.map_overlay=new m({map:this.map})}this.mouseEventHandlers=this.createMouseEventHandlers(this);$("#b_gmap").delegate(".marker",c.mouseover,function(M){c.mouseEventHandlers.markerMouseoverHandler(this,M)});if(c.mouseout){$("#b_gmap").delegate(".marker",c.mouseout,function(M){c.mouseEventHandlers.markerMouseoutHandler(this,M)})}if(c.mousedown){$("#b_gmap").delegate(".marker",c.mousedown,function(N){c.clicked_marker=true;if(booking.env.b_is_ie9){var M=this;setTimeout(function(){c.mouseEventHandlers.markerClickHandler(M,N,c)},2);return false}})}if(!booking.env.b_is_ie9){$("#b_gmap").delegate(".marker","mouseup",function(N){var M=this;setTimeout(function(){c.mouseEventHandlers.markerClickHandler(M,N,c)},2);return false})}google.maps.event.addListener(this.map_object,"click",function(){$("#rightClickPopup").hide()});$(".rightClickPopup_a").live("click",function(){$("#rightClickPopup").hide();if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Right click"+(($(this).attr("target"))?" new tab":""),document.body.id)}});if(booking.env.b_action=="searchresults"&&!booking.env.b_is_disambiguation){var h=$("#map_district_filter").val();$("#map_district_filter").change(function(){if(this.value&&h!==this.value){c.setMapCookie("bs","map_open",c.search_destination+c.b_district_ufi+"1");c.setMapCookie("bs","map_dist","1");if(booking.env.ispopup&&window.opener){window.opener.location.href=this.value;window.close();return false}else{window.location.href=this.value}}})}var f=false;if(booking.env.enable_map_info_box){var q={},y=false,D,z=$("#map_info_box"),j=$("#hotel_map_info_box_wrapper"),G,K,d=($("#map_address_search_value").length?$("#map_address_search_value"):$("#sidebar_map_address_search_value")),n=function(M){var N=d.val();if(M){f=true;c.requestSearchResults(M)}else{c.geocoderHelper.showFailureMsg();if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Address search - Failed "+(c.b_ufi?c.b_ufi:"")+" - "+N,document.body.id)}}};$("#map_address_search").live("submit",function(){var M=d.val();if(M){if(booking.env.map_landmark_dropdown_type&&booking.env.map_landmark_dropdown_type!==2){$("#map_landmark_dropdown_content").hide();$("#map_landmark_dropdown_wrapper").addClass("collapsed_landmark_dropdown");$("#map_info_box_address").animate({width:770},150)}c.geocode(M,n,c.map_object.getBounds())}else{}return false});if(booking.env.map_landmark_dropdown){$("#map_landmark_dropdown").live("change",function(){var N=$(this),M=N.val().split("-");c.highlightMarker({markerObject:c.placemarks[M[0]],zoom:14,performNewSearch:f});if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Landmark dropdown"+(c.b_ufi?c.b_ufi+" - "+M[1]+" - "+M[0]:""),document.body.id)}});$("#map_landmark_dropdown_wrapper").live("click",function(){var M=$(this);if(M.hasClass("collapsed_landmark_dropdown")){$("#map_address_search_success_wrapper").hide();$("#map_address_search_failed").hide();M.removeClass("collapsed_landmark_dropdown");$("#map_info_box_address").animate({width:395},150,function(){M.animate({width:395},150,function(){$("#map_landmark_dropdown_content").show()})})}})}}if(booking.env.b_action==="hotel"||booking.env.enable_toggle_icons_sr||booking.env.enable_toggle_icons_lp){$(".map_toggle_opt").click(function(O){var P,N,M;if(!$(this).hasClass("map_toggle_opt_disabled")){if(this.nodeName.toLowerCase()!=="input"){P=$("#"+this.getAttribute("data-rel"));N=!P.attr("checked");P.attr("checked",N)}else{P=$(this);N=P.attr("checked");O.stopPropagation()}M=P.attr("data-type");switch(M){case"hotel_current":c.filter.hotel_current=(N)?true:false;break;case"hotel":c.filter.hotel=(N)?true:false;break;case"hotel_matching_criteria":c.filter.hotel_matching_criteria=(N)?true:false;break;case"city":c.filter.city=(N)?true:false;break;case"landmark":c.filter.landmark=(N)?true:false;break;case"ski_lift":c.filter.ski_lift=(N)?true:false;break;case"airport":c.filter.airport=(N)?true:false;break}c.updateMap();if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Toggle icons - "+M,document.body.id)}}})}if(booking.env.mapUseJsClusters){booking[sNSStartupLoad].googleMaps.clusters();this.markerClusterer=new MarkerClusterer({mapContext:this,gridSize:60,minClusterSize:4})}if(booking.env.mapHideGreyMarkers){$("#show_non_matching_criteria_hotels").click(function(){booking.env.mapHideGreyMarkers=0;var M;if(typeof(JSON)!=="undefined"){M=JSON.parse($.cookie("b"))||{};M.map_gm=1;$.cookie("b",JSON.stringify(M),{expires:30,path:"/",domain:booking.env.b_domain_end})}$("#map_survey_block").hide();if(c.map_object){c.updateMap()}return false})}},selectMarkerSet:function(){this.b_map_icons=this.b_map_icons_improved},popupHTML:function(w,t){var D=false,e=this.getIcon(w,t),L="",M=(w.b_type==="hotel"||w.b_type==="hotel_current"),u=$("#b_gmap_inner").width(),F="",B="",o="",d;if(M&&this.use_new_marker_overlay){D=true}if(D){L+='<div id="map_hotel_overlay_picture_wrapper"'+(booking.env.map_show_price_per_x_nights?'class="no_margin"':"")+'><div id="map_hotel_overlay_picture"'+(w.b_image_url?' style="background: url('+w.b_image_url+') no-repeat scroll 0 0 transparent"':"")+"></div>"+((booking.env.map_show_price_per_x_nights&&!w.soldout)?'<div class="price_x_nights">'+booking.env.map_price_per_x_nights_txt+"</div>":"")+'</div><div id="map_hotel_overlay_content_wrapper">';if(w.b_review_score&&parseInt(w.b_review_nr,10)>4&&booking.env.hotel_score_words){var K=w.b_review_score,c="",h=booking.env.hotel_score_words;L+='<div id="map_hotel_overlay_review_score_wrapper"><div id="map_hotel_overlay_review_score">';if(K>=1&&K<3){c=h.very_poor}else{if(K>=3&&K<4){c=h.poor}else{if(K>=4&&K<5){c=h.disappointing}else{if(K>=5&&K<5.6){c=h.average_passable}else{if(K>=5.6&&K<6){c=h.average_okay}else{if(K>=6&&K<7){c=h.pleasant}else{if(K>=7&&K<8){c=h.good}else{if(K>=8&&K<8.6){c=h.very_good}else{if(K>=8.6&&K<9){c=h.fabulous}else{if(K>=9&&K<9.5){c=h.superb}else{if(K>=9.5){c=h.exceptional}}}}}}}}}}}L+=c+", "+K+"</div>";if(w.b_review_score_hotel_location){if(booking.env.mapGreatLocationParam){F+=((F?",":"")+booking.env.mapGreatLocationParam);booking.env.mapGreatLocationParam=""}if(booking.env.mapGreatLocationTxt){d='<span id="hotel_location_score_txt">'+booking.env.mapGreatLocationTxt.replace("placeholder_location_rating",w.b_review_score_hotel_location)+"</span>";L+='<div id="hotel_location_score">'+d+"</div>"}}L+='<div id="map_hotel_overlay_review_score_x_reviews">'+h.review_score_from_x.replace("placeholder",w.b_review_nr)+"</div></div>"}L+='<h3 id="map_hotel_overlay_title">'}else{L+='<div id="b_overlay" class="'+e+'" '+((M&&booking.env.wider_hp_popup)?'style="width: 360px;"':"")+"><h3>"}if(w.b_type!="cluster"){if(D){L+=w.title;if(w.b_class){if(w.b_country_code!=="au"){L+='<span class="hotel_overlay_stars use_sprites stars4 stars4i'+w.b_class+'"></span>'}else{L+='<span class="hotel_overlay_stars"><img class="map_overlay_unofficial_rating" src="//r.bstatic.com/static/img/icons/circles/'+w.b_class+'sterren4.png"/></span>'}}if(w.b_preferred){if(booking.env.mapShowPreferredParam){F+=((F?",":"")+booking.env.mapShowPreferredParam);booking.env.mapShowPreferredParam=""}if(booking.env.mapShowPreferred){L+='<span style="margin-left: 3px;" class="use_sprites icon_thumbyellow"></span>'}}}else{if(w.b_class){L+='<img src="'+booking.env.icons+"/icons/stars/"+w.b_class;if(w.b_class_half){L+=w.b_class_half}L+='sterren-small.png" alt="'+w.b_class+" "+(w.b_class==1?booking.env.star:booking.env.stars)+'" />'}L+=w.title;if(typeof w.subhead!="undefined"){if(w.url){L+="<span>"+w.subhead+"</span>"}}}L+="</h3>";L+="<p "+(D?'id="map_hotel_overlay_description"':"")+" >";if(!D){if(w.b_image_url){L+='<img src="'+w.b_image_url+'" alt="" />'}}}else{if(w.b_cluster_name.match(/^anon/)){L+=w.b_nr_hotels+" "+(w.b_nr_hotels==1?booking.env.map_hotel:booking.env.map_hotels)}else{L+=w.b_cluster_name+": "+w.b_nr_hotels+" "+(w.b_nr_hotels==1?booking.env.map_hotel:booking.env.map_hotels)}L+="</h3>";L+="<p>"}var m=((w.b_type==="hotel")||(w.b_type==="flash_deal")||(w.b_type==="hotel_current"))?true:false,A;var H=w.b_address&&w.b_address.length;var C=w.b_city&&w.b_city.length;if(m){if(booking.env.mapAddressNotDesc){if(H){L+=w.b_address}if(C){if(H){L+=" - "}L+=w.b_city}}else{if(w.b_description&&w.b_description.length){L+=(w.b_description.length<=this.max_length_of_hotel_description)?w.b_description:this.truncateDescription(w.b_description);A=(w.visitors?parseInt(w.visitors,10):0);if(A){L+='<span style="font-style: italic; color: #666;"> '+(A===1?booking.env.map_1_person_looking:booking.env.map_x_persons_looking.replace("placeholder",A))+"</span>"}}}}else{if(w.b_nr_hotels>1){if(booking.env.zoom_in){L+=booking.env.zoom_in}else{if(w.b_extra_msg){L+=w.b_extra_msg}}}}L+="</p>";if(w.last_reservation_data){F+=((F?",":"")+booking.env.map_hover_last_booking_param);booking.env.map_hover_last_booking_param="";if(booking.env.map_overlay_last_booking){var j="",g="",f=w.last_reservation_data;if(f.last_reservation_is_today){g=f.last_reservation_ellapsed_time_simple.replace("{seconds}",booking.env.map_seconds_txt);g=g.replace("{minutes}",booking.env.map_minutes_txt);g=g.replace("{minute}",booking.env.map_minute_txt);g=g.replace("{hours}",booking.env.map_hours_txt);g=g.replace("{hour}",booking.env.map_hour_txt);j=booking.env.latest_booking_elapsedtime_ago.replace("placeholder",g)}else{j=booking.env.latest_booking_yesterday}L+='<span class="lastbooking">'+j+"</span>"}}if(m){if(typeof(booking.env.map_vars)=="undefined"){booking.env.map_vars={}}if(typeof(booking.env.map_vars.translation_from)=="undefined"){booking.env.map_vars.translation_from="From"}if(typeof(booking.env.map_vars.translation_occupancies)=="undefined"){booking.env.map_vars.translation_occupancies=[]}L+='<table id="'+(D?"hotel_overlay_prices_detached":"b_overlay_table_prices")+'"><tbody><tr>';if(w.av){var x=w.av;var N=booking.env.map_vars.translation_occupancies;if(x.cheapest_double_selected_currency){L+='<tr class="b_overlay_tr"> <td class="b_overlay_td_room_occupancy" >'+N[1]+'</td> <td class="b_overlay_td_room_price">'+x.cheapest_double_selected_currency+"</td></tr>"}if(x.cheapest_single_selected_currency){L+='<tr class="b_overlay_tr"> <td class="b_overlay_td_room_occupancy" >'+N[0]+'</td> <td class="b_overlay_td_room_price">'+x.cheapest_single_selected_currency+"</td></tr>"}}else{if(w.prices&&w.prices.length){var x=w.prices,N=booking.env.map_vars.translation_occupancies,l=(D&&x.length===4)?3:x.length,J="",E="",z="",k="",y=0,n="";for(var I=0;I<l;I++){if(D){if(x[I].available&&x[I].available<6){if(x[I].available===1){J=(w.b_hoteltype_id!="2")?booking.env.map_x_rooms_left.rooms_1:booking.env.map_x_rooms_left.apts_1}else{J=(w.b_hoteltype_id!="2")?booking.env.map_x_rooms_left.rooms_x.replace("placeholder",x[I].available):booking.env.map_x_rooms_left.apts_x.replace("placeholder",x[I].available)}}if(x[I]&&x[I].room_persons&&x[I].room_price){if(x[I].rack_rate){if(booking.env.mapShowRackRates){B=" price_with_rack_rates ";o='<div class="hotel_overlay_rackrate">'+x[I].rack_rate+"</div>"}F+=((F?",":"")+booking.env.mapHoverRackRatesParam)}L+='<td class="hotel_overlay_occupancy_item hotel_overlay_occupancy_first"><span class="hotel_overlay_occupancy_persons" style="width: '+(x[I].room_persons*11)+'px;"></span></td><td class="hotel_overlay_occupancy_item'+(I<(l-1)?" hotel_overlay_occupancy_last":"")+B+'"><div class="hotel_overlay_room_price">'+x[I].room_price+"</div>"+o+(J?'<div class="hotel_overlay_occupancy_urgency">'+J+"</div></td>":"</td>")}else{if(w.soldout){L+='<tr class="b_overlay_tr"> <td class="'+(D?"hotel_overlay_soldout":"b_overlay_td_room_occupancy")+'" >'+booking.env.ajax_hotel_details_soldout+"</td></tr>"}else{if(x[I]&&x[I].room_from){L+='<td class="hotel_overlay_from hotel_overlay_occupancy_item" >'+(booking.env.map_vars.translation_from.replace("price_placeholder",x[I].room_from)).replace("price_placeholdernbsp;","$ ")+"</td></tr>"}}}}else{if(x[I]&&x[I].room_persons&&x[I].room_price){var v=x[I].room_persons-1;if(v>3){v=3}var G=(typeof(N[v])!="undefined")?N[v]:"";if(booking.env.map_x_rooms_left&&booking.env.b_is_ie){k=" marker_popup_small "}if(booking.env.map_x_rooms_left&&x[I].available&&x[I].available<6){if(x[I].available===1){J='<td class="b_overlay_td_room_price b_overlay_rooms_left'+k+'">'+((w.b_hoteltype_id!="2")?booking.env.map_x_rooms_left.rooms_1:booking.env.map_x_rooms_left.apts_1)+"</td>"}else{J='<td class="b_overlay_td_room_price b_overlay_rooms_left'+k+'">'+((w.b_hoteltype_id!="2")?booking.env.map_x_rooms_left.rooms_x.replace("placeholder",x[I].available):booking.env.map_x_rooms_left.apts_x.replace("placeholder",x[I].available))+"<td>"}}L+='<tr class="b_overlay_tr"> <td class="b_overlay_td_room_occupancy '+k+'" >'+G+'</td> <td class="b_overlay_td_room_price '+k+'">'+x[I].room_price.replace(" ","&nbsp;")+"</td>"+J+"</tr>"}else{if(x[I]&&x[I].room_from){L+='<tr class="b_overlay_tr"> <td class="b_overlay_td_room_occupancy" >'+(booking.env.map_vars.translation_from2.replace("price_placeholder",x[I].room_from)).replace("price_placeholdernbsp;","$ ")+"</td></tr>"}}}}}else{if(w.soldout){L+='<tr class="b_overlay_tr"> <td class="'+(D?"hotel_overlay_soldout":"b_overlay_td_room_occupancy")+'" >'+booking.env.ajax_hotel_details_soldout+"</td></tr>"}else{if(w.b_min_rate){L+='<td class="hotel_overlay_from hotel_overlay_occupancy_item" >'+(booking.env.map_vars.translation_from.replace("price_placeholder",w.b_min_rate)).replace("price_placeholdernbsp;","$ ")+"</td></tr>"}else{if(w.b_price||w.b_price_selected_currency){if(w.b_price_selected_currency){var q=w.b_price_selected_currency}else{var q=w.b_price}if(D){L+='<td class="hotel_overlay_from hotel_overlay_occupancy_item" >'+(booking.env.map_vars.translation_from.replace("price_placeholder",q)).replace("price_placeholdernbsp;","$ ")+"</td></tr>"}else{L+='<tr class="b_overlay_tr"> <td class="b_overlay_td_room_occupancy" >'+(booking.env.map_vars.translation_from.replace("price_placeholder",q)).replace("price_placeholdernbsp;","$ ")+"</td></tr>"}}}}}}L+="</tr></tbody></table>"}if(!D){L+="</p>"}else{L+="</div>"}if(M){if(booking.env.mapOverlayCtaParam){F+=((F?",":"")+booking.env.mapOverlayCtaParam);booking.env.mapOverlayCtaParam=""}if(booking.env.mapOverlayCtaTxt){L+='<div id="map_hotel_overlay_cta">'+booking.env.mapOverlayCtaTxt+"</div>"}}this.hotels_cache[t]=L;if(F){booking.env.trackExperiment(F)}return L},positionPopup:function(f,H,q){var E=this.getIcon(q,(typeof(H)==="string"&&((new RegExp("[0-9]").test(H)||H==="pageSubject"||H==="cluster"))?H:H.id)),z=this.b_map_icons[E],B=(z.infoWindowAnchor?z.infoWindowAnchor[1]:20),c=0,G=(q.b_type==="hotel"||q.b_type==="hotel_current"),k=(H==="cluster"?true:false),x=((G||H==="cluster")&&(this.is_sr||this.is_hp||this.is_lp)),n=x?$("#map_detail_overlay"):$("#b_overlay"),v=$("#b_gmap_inner"),m=v.width(),g=v.height(),D=(this.is_sr&&m>=832),d=D?91:56,F=(this.is_sr?40:5),l=m-d-F,j={},y=this.map.getProjection(),h,A,t,o,C,u,e,I,w;if(k){h=y.fromLatLngToContainerPixel(q.bounds.getSouthWest());clusterAreaPixelSw=y.fromLatLngToDivPixel(q.bounds.getSouthWest());clusterAreaPixelNe=y.fromLatLngToDivPixel(q.bounds.getNorthEast());h.y+=2;c=122}else{h=y.fromLatLngToContainerPixel(new google.maps.LatLng(q.b_latitude,q.b_longitude))}t=h.x,o=h.y;if(x){if(this.last_popup_max_width!==l){this.last_popup_max_width=l;if(l>670){l=670}j.width=l;if(!D){j.left=56;if(this.is_sr){n.removeClass("full_width")}}else{n.addClass("full_width")}$("#map_detail_overlay").css(j)}if(!this.last_popup_max_width){this.last_popup_max_width=l}}if(booking.env.use_new_current_hotel_icon&&E==="hotel_current"){B+=5}C=n.height();u=n.width();e=t+(u/2);if(t-(u/2)<56){t=56}else{if(e>(m-35)){t=t-u+(m-t)-45}else{if(!k){t-=(u/2)}}}if(o+C>(g-35)){w=$(document).scrollTop();I=$(H).offset();if(!(w&&I&&I.top&&((I.top-w)<(C-B)))){o=o-(C+(k?c:B)+2)}}f.css({top:o+"px",left:t+"px",position:"absolute","z-index":"99999"});if(k){$("#cluster_area").css({display:"block",left:clusterAreaPixelSw.x+"px",top:clusterAreaPixelNe.y+"px"})}if(navigator.platform.indexOf("iPad")!=-1){if($("#marker_close").length==0){f.append('<div id="marker_close">Close</div>');$("#marker_close").bind("touchstart",function(J){J.stopPropagation();J.preventDefault();if(this.use_new_popup){$("#map_detail_overlay").html("<div />").hide()}$("#markerPopup").html("<div />").hide();return false});f.bind("touchstart",function(K){var J="";K.stopPropagation();K.preventDefault();if(q.b_url){if(q.b_url.indexOf("http:")>-1||!booking.env.b_url_start){J=q.b_url}else{J=booking.env.b_url_start+q.b_url}if(J.indexOf(".html")==-1){J+=booking.env.b_query_params_with_lang}if(q.b_extra_params){J+=q.b_extra_params}window.location.href=J}})}}},truncateDescription:function(d){var c=1;while(d.charAt(this.max_length_of_hotel_description-c)!=" "){c++}return d.substr(0,this.max_length_of_hotel_description-c)+"..."},updateFilters:function(){$("#toggle_other_hotel").attr("checked",this.filter.hotel);$("#toggle_airport").attr("checked",this.filter.airport);$("#toggle_landmark").attr("checked",this.filter.landmark)},updateToggleOptions:function(){var d=this,h,j,k,e,f,c,g,l=$(booking.env.b_is_landing_page?"#b_map_horizontal_legend":"#b_map_legend");h=d.map_object.getZoom();if(h>3){j=false;c=false}else{j=true;c=true}if(h>4){g=false}else{g=true}if(this.is_sr){k=(h>7)?false:true;disable_hotel_matching_criteria=(h>7)?false:true}else{k=(h>6)?false:true;disable_hotel_matching_criteria=(h>6)?false:true}if(h>11){e=false;f=false}else{e=true;f=true}if(g){$(".map_opt_airport",l).addClass("map_toggle_opt_disabled");$("#toggle_airport").attr("disabled",true)}else{$(".map_opt_airport",l).removeClass("map_toggle_opt_disabled");$("#toggle_airport").attr("disabled",false)}if(c){$(".map_opt_city",l).addClass("map_toggle_opt_disabled");$("#toggle_city").attr("disabled",true)}else{$(".map_opt_city",l).removeClass("map_toggle_opt_disabled");$("#toggle_city").attr("disabled",false)}if(j){$(".map_opt_current_hotel",l).addClass("map_toggle_opt_disabled");$("#toggle_current_hotel").attr("disabled",true)}else{$(".map_opt_current_hotel",l).removeClass("map_toggle_opt_disabled");$("#toggle_current_hotel").attr("disabled",false)}if(k){$(".map_opt_other_hotel",l).addClass("map_toggle_opt_disabled");$("#toggle_other_hotel").attr("disabled",true)}else{$(".map_opt_other_hotel",l).removeClass("map_toggle_opt_disabled");$("#toggle_other_hotel").attr("disabled",false)}if(disable_hotel_matching_criteria){$(".map_opt_hotel_matching_criteria",l).addClass("map_toggle_opt_disabled");$("#toggle_hotel_matching_criteria").attr("disabled",true)}else{$(".map_opt_hotel_matching_criteria",l).removeClass("map_toggle_opt_disabled");$("#toggle_hotel_matching_criteria").attr("disabled",false)}if(e){$(".map_opt_landmark",l).addClass("map_toggle_opt_disabled");$("#toggle_landmark").attr("disabled",true)}else{$(".map_opt_landmark",l).removeClass("map_toggle_opt_disabled");$("#toggle_landmark").attr("disabled",false)}if(f){$(".map_opt_ski_lift",l).addClass("map_toggle_opt_disabled");$("#toggle_ski_lift").attr("disabled",true)}else{$(".map_opt_ski_lift",l).removeClass("map_toggle_opt_disabled");$("#toggle_ski_lift").attr("disabled",false)}},panMap:function(){if(this.pan_item){if(this.pan_item_coords&&this.pan_item_coords.lat){this.map_object.panTo(new google.maps.LatLng(this.pan_item_coords.lat,this.pan_item_coords.lon))}else{if(this.disambiguation_bbox){this.map_object.fitBounds(disambiguation_bbox)}}}},mapScrollListener:function(h){var g=this,f=$(window),d=$("#"+h),c=(d.offset()&&d.offset().top)?d.offset().top:undefined,l=$("#disambiguation_map_wrapper"),n=$("#disam_list_last"),m=(n.offset()&&n.offset().top)?n.offset().top:undefined,o=(l.offset()&&l.offset().top)?l.offset().top:undefined,j,k,q,e=function(){l.css(q)};f.scroll(function(){window_scrollTop=$(window).scrollTop();if(c&&o&&(window_scrollTop>=c)){if(window_scrollTop+l.height()<=m){q={"margin-top":(window_scrollTop-o)+20+"px"}}}else{q={"margin-top":"0px"}}if(q){if(k){clearTimeout(k)}k=setTimeout(function(){e()},500)}})},mapResizeListener:function(c){var f=this,d,e=500;$window=$(window);$window.resize(function(){if(d){clearTimeout(d)}d=setTimeout(function(){f.resizeMapToFullScreen(f,true)},e)})},resizeMapToFullScreen:function(v,e){if(e){$map_container=$("#b_map_container");var l=$(window),f=l.height(),j=l.width(),h=(f>577&&j>735),u=h?(f*0.8):427,t=h?(j*0.8):681,m=(v.is_sr?0:166),c=" width: "+(t-m)+"px; ",q=$("#map_info_box"),k=q.height(),x,o,n,g=(booking.env.enable_map_info_box&&!booking.env.map_enable_sr_autocomplete?k:0),d=$("#b_map_legend"),w;v.map_width=t;v.map_height=u;$map_container.css("width",v.map_width);$("#b_gmap").css({height:(u-(v.is_sr?0:27)-g),width:v.map_width-(this.is_sr?2:31)});w=u-(v.is_sr?0:54)-g;$("#b_gmap_inner").css({height:w,width:v.map_width-m-(this.is_sr?3:31)});if(v.is_hp){d.height(w)}$("#b_shadow").css({height:$map_container.height()+20,width:$map_container.width()+20});if(v.is_hp&&booking.env.enable_map_info_box){$("#hotel_map_info_box_wrapper").css("width",t)}if(booking.env.enableMapSurvey){surveyPosition=(this.is_hp?{width:t-450,left:100,top:43}:{width:t-200,left:100});$("#map_survey_block").css(surveyPosition)}if(v.map_object&&v.map_object.getBounds){x=v.map_overlay.getProjection();google.maps.event.trigger(v.map_object,"resize");o=v.map_object.getBounds();if(o){n=new google.maps.LatLng(o.getSouthWest().lat(),o.getSouthWest().lng());v.positionMapContainer();v.map_scroll=x.fromLatLngToDivPixel(n)}}}if(v.map_object){google.maps.event.trigger(v.map_object,"resize");if(v.mapCenter){v.map_object.setCenter(v.mapCenter)}}},setMapCookie:function(f,e,d){if(typeof(e)==="string"&&e!==""){var c={};if(typeof(JSON)!=="undefined"){c=JSON.parse($.cookie(f))||{};c[e]=d;$.cookie(f,JSON.stringify(c),{path:"/",domain:booking.env.b_domain_end})}}},geocode:function(c,f,e){var d={address:c};if(e){d.bounds=e}if(!this.geocoder){this.geocoder=new google.maps.Geocoder()}this.geocoder.geocode(d,function(h,g){f(g==google.maps.GeocoderStatus.OK?h:false)})},initGooglePlacesAutocomplete:function(d){var f=this,e=(d?d:"disamb_google_autocomplete_target"),c;this.google_autocomplete=new google.maps.places.Autocomplete(document.getElementById(e));if(d){c=function(){f.requestSearchResults("placesAutocomplete")}}else{$("#disamb_alternatives_menu").hide();$("#disamb_google_autocomplete").show(function(){setTimeout(function(){$("#disamb_google_autocomplete_target").val(booking.env.current_ss).focus()},75)});c=function(){var g=f.google_autocomplete.getPlace();if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,"Disamb Google Search - Select item",document.body.id)}window.location.href="/searchresults"+booking.env.b_query_params_with_lang+";latitude="+g.geometry.location.lat()+";longitude="+g.geometry.location.lng()+";radius=5;order=distance"}}google.maps.event.addListener(this.google_autocomplete,"place_changed",c)},highlightMarker:function(data){var old_highlighted_marker=this.highlighted_marker,oThat=this,highlightedMarkerCoords=new google.maps.LatLng(data.markerObject.b_latitude,data.markerObject.b_longitude),iRadius,boundingBox;if(old_highlighted_marker){old_highlighted_marker.b_type=old_highlighted_marker.b_type.replace("_current","")}this.highlighted_marker=data.markerObject;data.markerObject.b_type=data.markerObject.b_type+"_current";if(data.performNewSearch){oThat.enable_all_markers=false}if(data.relativeMarker){boundingBox=new google.maps.LatLngBounds();boundingBox.extend(highlightedMarkerCoords);boundingBox.extend(new google.maps.LatLng(data.relativeMarker.b_latitude,data.relativeMarker.b_longitude));this.map_object.fitBounds(boundingBox);$("#markerPopup").html("<div />").hide();this.highlightedMarker=data.markerObject.id.replace("landmark","")}else{this.map_object.setCenter(highlightedMarkerCoords);if(data.zoom){this.map_object.setZoom(data.zoom)}}if(data.performNewSearch){iRadius=Math.ceil(15.0588*Math.pow(2,10-oThat.map_object.getZoom()));if(iRadius>150){iRadius=150}$.get("/standalonesearchresults"+booking.env.b_query_params_with_lang+";latitude="+highlightedMarkerCoords.lat()+";longitude="+highlightedMarkerCoords.lng()+";radius="+iRadius+";map_only=1",function(data){typeof(JSON)!=="undefined"?booking.hotelsMatchingCriteria=JSON.parse(data):eval("booking.hotelsMatchingCriteria = "+data);oThat.enable_all_markers=true;oThat.updateMap()})}else{this.updateMap()}},createMouseEventHandlers:function(g){var f=false,c=function(q,j,o){var w="",l,t,k,m,x,n,h,v,u;t=$(q);u=t.hasClass("marker_type_cluster");if(u){v=g.markerClusterer.clusters[t.attr("id").replace("cluster","")];x=$("#map_detail_overlay");x.html('<div id="cluster_overlay_content">'+booking.env.mapClusterCtaTxt+"</div>").addClass("cluster_overlay");g.positionPopup(x,"cluster",v);x.show()}if(!t.attr("oldz")){t.attr("oldz",q.style.zIndex)}q.style.zIndex="1000000";w=t.attr("id");l=g.placemarks[w];if(w!=="marker_current_address"&&!u){g.last_hotel_details=w;k=((w==="pageSubject")?l.b_hotel_id:w);m=(l.b_type==="hotel"||l.b_type==="hotel_current");if(g.use_new_marker_overlay&&m){x=$("#map_detail_overlay")}else{if($("#markerPopup").length){x=$("#markerPopup")}else{x=$('<div id="markerPopup" class="static_map_legend_marker"></div>');x.appendTo(".markersOverlay")}}if(g.initPopupTimeout&&w!=="pageSubject"){clearTimeout(g.initPopupTimeout);g.initPopupTimeout=null;if(g.highlight_marker_z){$(".marker_type_hotel_current").css("z-index",g.highlight_marker_z)}}if(m){if(l.b_closed){x.html('<div id="b_overlay" class="'+g.getIcon(l,w)+'"'+(booking.env.wider_hp_popup?' style="width: 360px;margin-left: -181px;"':"")+"><h3>"+l.title+"</h3><em>"+l.b_extra_msg+"</em></div>").show();g.positionPopup(x,q,l)}else{if(typeof booking[sNSStartupLoad].googleMaps.hotels_cache[w]=="undefined"){if(g.use_new_marker_overlay){n=(booking.env.b_is_ie6?'<div id="map_hotel_overlay_loading_ie6">':"")+'<div id="map_hotel_overlay_picture_wrapper"><div id="map_hotel_overlay_picture" class="map_overlay_loading"></div></div><h3 id="map_overlay_loading_msg">'+booking.env.loading+"</h3>"+(booking.env.b_is_ie6?"</div>":"")}else{n='<div id="b_overlay" class="'+g.getIcon(l,w)+' ahdom2"'+(booking.env.wider_hp_popup?' style="width: 360px;"':"")+"><h3>"+booking.env.loading+"</h3></div>"}x.html(n).show();h="/hotel_onmap_detail"+(booking.env.b_query_params_no_ext?booking.env.b_query_params_no_ext:"?")+";hotel_id="+k+";lang="+booking.env.b_lang_for_url+";detail=0;currency="+booking.env.b_selected_currency+";prices=1;cc1="+booking.env.ip_country+";aid="+booking.env.b_aid;if(booking.env.b_checkin_date&&booking.env.b_checkout_date){h+=";checkin="+booking.env.b_checkin_date+";checkout="+booking.env.b_checkout_date+";currency="+booking.env.map_vars.b_currencycode}if(booking.env.b_site_experiment_use_flat_av_on_map_detail){h+=";use_flat=1"}if(booking.env.b_site_experiment_always_use_search_when_reuse){h+=";reuse=1"}if(booking.env.is_us_visitor||booking.env.new_min_rates){h+=";fav_hot_mins=1"}if(g.use_new_marker_overlay){h+=";img_size=90"}if(booking.env.b_site_variant_localize_price_number_format){h+=";localize_format=1"}if(booking.env.b_site_variant_currency_consistency){h+=";consistent=1"}h+=";rack_rates=1";if(booking.env.map_hover_more_params&&!f){h+=";exps="+booking.env.map_hover_more_params;f=true}$.get(h,function(A){if(A.b_hotels&&A.b_hotels[k]){var B=A.b_hotels[k],y=g.placemarks[w],z;y.url=B.b_url;y.title=B.title;if(o){B.pixel=y.pixel}B.b_type=y.b_type;if(B.b_extra_params){y.b_extra_params=B.b_extra_params}if(y.prices&&!B.prices){B.prices=y.prices}z=g.popupHTML(B,w);if(g.last_hotel_details===w&&g.map_opened){x.html((z?z:g.popupHTML(B,w))).show();g.positionPopup(x,q,B)}}else{x.hide()}})}else{x.html(booking[sNSStartupLoad].googleMaps.hotels_cache[w]).show()}}}else{x.html(g.popupHTML(l,w)).show()}if(g.map_opened){g.positionPopup(x,q,l)}}},e=function(n,k,h){var j=$("#map_detail_overlay"),m=$(n),l=m.hasClass("marker_type_cluster");g.last_hotel_details=false;if(booking.env.mapUseJsClusters){$("#cluster_area").hide();j.removeClass("cluster_overlay").css("left","91px")}else{if(!h&&m.attr("oldz")){m.css("z-index",m.attr("oldz"))}}if(g.use_new_marker_overlay){j.html("<div />").hide()}$("#markerPopup").html("<div />").hide()},d=function(n,o,j,m){var t=$(n),v,k,u,h="";rightclick=(o.which===3||booking.env.map_marker_click_show_menu);if(typeof(j.clicked_marker)!==undefined&&(j.clicked_marker===true||rightclick)){if(t.hasClass("marker_type_cluster")){u=j.markerClusterer.clusters[n.id.replace("cluster","")];if(u&&u.bounds){j.clusterClicked=true;j.showStatusMsg({position:"center"});j.map_object.fitBounds(u.innerHotelsBounds)}$("#map_detail_overlay").html("<div />").hide().removeClass("cluster_overlay").css("left","91px");return false}v=$(n).attr("id");k=j.placemarks[v];if(typeof booking.google!="undefined"){if(typeof booking.google.mapTracker!="undefined"){var l="Icon clicked: ";if(rightclick){l="Icon right clicked: "}booking.google.trackEvent(booking.google.mapTracker,l+k.b_type,document.body.id)}}if(k.b_type==="hotel"){booking.google.setGACustomVariable({type:"Map",value:"Hotel icon clicked"})}if(k.b_url){k.url=k.b_url}if(k.url){if(k.url.indexOf("http:")>-1||!booking.env.b_url_start){h=k.url}else{h=booking.env.b_url_start+k.url}if(h.indexOf(".html")==-1){h+=booking.env.b_query_params_with_lang}if(k.b_extra_params){h+=k.b_extra_params}if($(n).hasClass("marker_type_cluster")){j.map_object.setZoom(j.map_object.getZoom()+1)}else{if(rightclick){if(booking.env.map_marker_click_show_menu===2){$(document.body).append('<a id="map_right_click_link" target="_new" href="'+h+'">'+(booking.env.map_right_click[k.b_type])[1]+"</a>");$("#map_right_click_link").each(function(){this.click()})}else{$("#markerPopup").html("<div />").hide();$("#map_detail_overlay").html("<div />").hide();var q='<ul id="rightClickPopup_ul"><li><a class="rightClickPopup_a" href="'+h+'">'+(booking.env.map_right_click[k.b_type])[0]+'</a></li><li><a class="rightClickPopup_a" target="_blank" href="'+h+'">'+(booking.env.map_right_click[k.b_type])[1]+"</a></li></ul>";if($("#rightClickPopup").length){var w=$("#rightClickPopup").html(q)}else{$(document.body).append('<div id="rightClickPopup">'+q+"</div>");var w=$("#rightClickPopup")}w.css({top:o.pageY,left:o.pageX}).show()}rightclick=false}else{if(booking.env.ispopup&&window.opener){window.opener.location.href=h;window.close();return false}else{document.location=h}}}}}};return{markerMouseoverHandler:c,markerMouseoutHandler:e,markerClickHandler:d}},requestSearchResults:function(B){var e=this,x=(B==="placesAutocomplete"?true:false),l=x?e.google_autocomplete.getPlace():B[0],q=(booking.env.mapAddressLoadingMsg?true:false),m,y,d,n,w,h,k=false,j,t,g,C,f,A;if(!B||this.searchingAddress!==false||!l||(B==="placesAutocomplete"&&l&&!l.geometry)){return}this.searchingAddress=true;var o=l.geometry.viewport,c=l.geometry.location,D,u=(booking.env.map_enable_sr_autocomplete?$("#sidebar_map_address_search_value"):$("#map_address_search_value")).val(),v=$("#open_map"),z;if(c){if(c.lat()){D=new google.maps.LatLng(c.lat(),c.lng())}if(booking.env.b_action!=="hotel"){if(booking.env.map_enable_sr_autocomplete&&o){y=o.getCenter();j=o.getNorthEast();t=3963;g=y.lat()/57.2958;C=y.lng()/57.2958;f=j.lat()/57.2958;A=j.lng()/57.2958;m=t*Math.acos(Math.sin(g)*Math.sin(f)+Math.cos(g)*Math.cos(f)*Math.cos(A-C));d=e.calculateBoundingBoxZoomLevel(o,{width:238})}else{d=14;if(e.map_object){m=Math.ceil(15.0588*Math.pow(2,10-e.map_object.getZoom()))}else{m=1}}if(m>150){m=150}h=booking.env.b_query_params_with_lang+";latitude="+D.lat()+";longitude="+D.lng()+";radius="+m+";force_auto_extend=1";if(!booking.env.map_update_hotel_list){h+=";map_only=1"}if(booking.env.map_update_hotel_list_by_distance){h+=";order=distance"}if(d){h+=";map_thumb_zoom="+d}w="/standalonesearchresults"+h;if(booking.env.mapRememberAddressSearch){k=true}if(o){z=((o.toString()).replace(/\)/g,"")).replace(/\(/g,"")}else{z=""}e.processSearchResults({url:w,viewport:z,formattedAddress:l.formatted_address,saveUrl:k,location:c.lat()+","+c.lng()})}else{e.enable_all_markers=true;map_info_box_height=$map_info_box.height();$map_info_box_wrapper.css("width",$map_info_box_wrapper.parent().width()-1);e.updateMap()}if(!(booking.env.mapAddressSearchUpdates||booking.env.map_enable_sr_autocomplete)){e.geocoderHelper.showSuccessMsg(l.formatted_address)}if(x){if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,(booking.env.map_enable_sr_autocomplete?"SR ":"")+"Address Search - Success "+(e.b_ufi?e.b_ufi:"")+" - Autocomplete - "+(l.formatted_address?l.formatted_address:""),document.body.id)}}else{if(booking.env.b_action==="hotel"){height_diff=$map_info_box.height()-map_info_box_height;$("#b_gmap").css("height",$("#b_gmap").height()+height_diff);$("#b_shadow").css("height",$("#b_shadow").height()+height_diff)}if(typeof(booking.google.mapTracker)!="undefined"){booking.google.trackEvent(booking.google.mapTracker,(booking.env.map_enable_sr_autocomplete?"SR ":"")+"Address Search - Success "+(e.b_ufi?e.b_ufi:"")+" - "+u,document.body.id)}}}},processSearchResults:function(l){if(typeof l==="undefined"||!l.url){return}var e=this,d=l.viewport,g=(d?d.split(","):""),j=l.url,f=(l.location?l.location.split(","):""),k,c,h;if(booking.env.map_enable_sr_autocomplete||booking.env.mapAddressSearchUpdates){this.geocoderHelper.showLoadingMsg();hotelList=(booking.env.map_enable_sr_autocomplete?$("#right"):$("#search_results_table"));hotelList.animate({opacity:0.2},500);$("#filterbox_wrap").animate({opacity:0.2},500)}if(f){h=new google.maps.LatLng(f[0],f[1])}if(e.placemarks&&h){e.placemarks.marker_current_address={b_latitude:h.lat(),b_longitude:h.lng(),id:"marker_current_address",b_type:"current_search"}}if(e.map_object){e.enable_all_markers=false;if(d){c=((new google.maps.LatLngBounds()).extend(new google.maps.LatLng(g[0],g[1]))).extend(new google.maps.LatLng(g[2],g[3]));e.map_object.fitBounds(c)}else{if(h){booking.env.map_updated_sr_map_zoom=parseInt(booking.env.map_updated_sr_map_zoom,10);k=booking.env.map_updated_sr_map_zoom;if(typeof k==="number"&&!isNaN(k)){e.map_object.setCenter(h);e.map_object.setZoom(k)}}}}if(typeof h!=="undefined"){booking.env.b_map_center_latitude=h.lat();booking.env.b_map_center_longitude=h.lng();e.latitude=booking.env.b_map_center_latitude;e.longitude=booking.env.b_map_center_longitude;booking.env.b_map_google_bounding_box=((new google.maps.LatLngBounds()).extend(new google.maps.LatLng(g[1],g[0]))).extend(new google.maps.LatLng(g[3],g[2]))}$.get(j,function(u){var q,o,n,v,t,m;e.searchingAddress=false;if(e.map_object){booking.track.exp(booking.env.map_update_hotel_list_by_distance_param+","+booking.env.mapAddressLoadingMsgParam)}u=u.replace(/standalonesearchresults/g,"searchresults");searchResults=u.split("=!=!=");q=document.getElementById("ajaxsrwrap");$(q).html(searchResults[3]);e.enable_all_markers=true;if(e.map_object){e.updateMap()}if(booking.env.mapAddressSearchUpdates||booking.env.map_enable_sr_autocomplete){n=$("#open_map,#b_google_map_thumbnail,#view_map,#sidebar_map_address_search_success");if(typeof d!=="undefined"){n.attr("data-bounding-box",d);if(booking.env.map_updated_sr_map_zoom){n.attr("rel",booking.env.map_updated_sr_map_zoom)}}else{booking.env.b_map_google_bounding_box="";n.removeAttr("data-bounding-box",booking.env.b_map_google_bounding_box)}v=searchResults[2].replace("placeholder",l.formattedAddress);$("#right .sorth1").html(v);$("#filterbox_wrap").html(searchResults[0]);e.geocoderHelper.showSuccessMsg(l.formattedAddress);if(booking.env.map_enable_sr_autocomplete){if(!e.usedHistory){e.usedHistory=true}if(l.saveUrl){if(typeof history.pushState!=="undefined"){if(d){m=((d.toString()).replace(/\)/g,"")).replace(/\(/g,"")}else{m=""}e.historyHandler.pushUrl({url:l.url.replace("standalone",""),viewport:m,formattedAddress:l.formattedAddress,srHeader:v,mapThumbnailUrl:$("#b_google_map_thumbnail").css("background-image"),originalSearchboxValue:$("#destination").val(),originalDestId:booking.env.dest_id,originalDestType:booking.env.dest_type,location:l.location})}else{location.hash="#!"+l.url}}}}if(booking.env.map_enable_sr_autocomplete){$("#b_hotel_list").hide();if(typeof(JSON)!=="undefined"){o=JSON.parse($.cookie("bs"))||{}}o.map_open="";o.map="";$.cookie("bs",JSON.stringify(o),{path:"/",domain:booking.env.b_domain_end})}else{booking.track.exp(booking.env.mapAddressSearchUpdateParams);if(booking.env.mapAddressSearchUpdateFilters){$("#filterbox_wrap").html(searchResults[0])}}booking[sNSStartupLoad].tooltip_3.addTooltip(q);booking[sNSStartupLoad].search_all_roomtypes.addMoreLink(q);booking[sNSStartup].filterbox.init();booking[sNSStartup].sort_popups.init();if(booking.env.b_site_experiment_star_filter_slider){booking[sNSExperiments].star_filter_slider.init()}if(booking.env.b_site_experiment_sr_user_removed_hotels){booking[sNSExperiments].sr_user_removed_hotels.init()}booking[sNSStartupLoad].change_currency_on_click.init()})},positionMapContainer:function(){var c=(this.is_sr?$("#sr_map"):$("#b_map_container"));$document=$(document);var e=($document.width()-c.width())/2;var d=$document.scrollTop()+(($(window).height()-c.height())/2);c.css({left:e+"px",top:d+"px","z-index":999})},trackExperiments:function(){if(booking.env.map_more_params){booking.env.trackExperiment(booking.env.map_more_params,"map_opened")}},calculateBoundingBoxZoomLevel:function(e,d){var f=256,c=e.getSouthWest().lng(),g=e.getNorthEast().lng(),h=g-c;if(h<0){h+=360}return Math.round(Math.log(d.width*360/h/f)/Math.LN2)},historyHandler:{pushUrl:function(c){if(typeof history.pushState!=="undefined"){history.pushState(c,null,c.url)}else{location.hash="#!"+url}},initializeHistoryHandler:function(d){if(typeof history.pushState!=="undefined"){var e=("state" in window.history),c=location.href;$(window).bind("popstate",function(h){var f=!g&&location.href===c,g=true,m,k=false,j,l=$("#frm fieldset");if(h&&h.originalEvent&&h.originalEvent.state){j=h.originalEvent.state;k=true}else{if(history.state&&d.lastState&&d.lastState.srHeader&&d.lastState.srHeader!==history.state.srHeader){j=history.state}}d.lastState=j;if((f&&!d.usedHistory)||(location.href.indexOf("#map_opened")!==-1)){if(j&&j.srHeader){$("#right .sorth1").html(j.srHeader);$("#b_google_map_thumbnail").css("background-image",j.mapThumbnailUrl);$("#destination").val(j.originalSearchboxValue);$(".search_summary_block").find(".ss").find(".search_summary_toggle_button").html(j.originalSearchboxValue);l.append($("<input>",{type:"hidden",name:"dest_type",value:j.originalDestId}));l.append($("<input>",{type:"hidden",name:"dest_id",value:j.originalDestId}))}return}if(!j){m=(location.pathname+location.search).replace("searchresults","standalonesearchresults");d.processSearchResults({url:m})}else{m=(j.url).replace("searchresults","standalonesearchresults");d.processSearchResults({url:m,viewport:j.viewport,formattedAddress:j.formattedAddress,location:j.location})}})}else{$(window).bind("hashchange",function(){var f=location;hash=location.href.split("#!")[1],url;if(!hash){url=(location.pathname+location.search).replace("searchresults","standalonesearchresults")}else{if(hash!==f){url=hash}}d.processSearchResults({url:url})})}}},drawPolygon:function(m){if(!m||!m.polygons||!jQuery.isArray(m.polygons)||!m.polygons.length||!this.map_object){return}var h=m.polygons,g,l,k;for(var f=0,d=h.length;f<d;f++){l=h[f];g=[];for(var e=0,c=l.length;e<c;e++){g.push(new google.maps.LatLng(l[e][1],l[e][0]))}k=new google.maps.Polygon({path:g,strokeColor:"#FEBA02",strokeOpacity:0.8,strokeWeight:2,fillColor:"#FEBA02",fillOpacity:0.2,clickable:false});k.setMap(this.map_object)}},showStatusMsg:function(d){if(this.mapStatusMSgShown){return}var e="",c,f;if(booking.env.mapUseJsClusters&&d.position==="center"){this.mapStatusMSgShown=1;if(this.clusterClicked){e=booking.env.mapClusterZoomAreaTxt}else{e=booking.env.mapAddressLoadingMsgTxt}this.clusterClicked=false;$("#map_status_current_msg").html(e);c=$("#map_status_msg");f=(this.map_width/2)-(c.width()/2);c.show().css("left",f+"px");$("#map_ui_blocker_overlay").show();if(!d.loadFromMapDrag){this.map_overlay.oMarkerLayer.empty()}}}};booking[sNSStartupLoad].googleMaps.clusters=function(){MarkerClusterer=function(c){this.mapContext=c.mapContext;this.clusters=[];this.minClusterSize=c.minClusterSize||2;this.gridSize=c.gridSize||60};MarkerClusterer.prototype.clearClusters=function(){this.clusters=[]};MarkerClusterer.prototype.addMarkerToClosestCluster=function(e){var f,c,g;distance=40000,clusterToAddTo=null,markerPosition={b_latitude:e.b_latitude,b_longitude:e.b_longitude};for(f=0,c=this.clusters.length;f<c;f++){g=this.distanceBetweenPoints(this.clusters[f].center,markerPosition);if(g<distance){distance=g;clusterToAddTo=this.clusters[f]}}if(clusterToAddTo&&clusterToAddTo.isMarkerInClusterBounds(e)){clusterToAddTo.addMarker(e)}else{clusterToAddTo=new Cluster({mapContext:this.mapContext,gridSize:this.gridSize,minClusterSize:this.minClusterSize,id:this.clusters.length});clusterToAddTo.addMarker(e);this.clusters.push(clusterToAddTo)}};MarkerClusterer.prototype.distanceBetweenPoints=function(t,q){if(!t||!q){return 0}var h=6371,g=t.b_latitude,o=t.b_longitude,f=q.b_latitude,m=q.b_longitude,k=(f-g)*Math.PI/180,e=(m-o)*Math.PI/180,n=Math.sin(k/2)*Math.sin(k/2)+Math.cos(g*Math.PI/180)*Math.cos(f*Math.PI/180)*Math.sin(e/2)*Math.sin(e/2),l=2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)),j=h*l;return j};Cluster=function(c){this.center=null;this.bounds=null;this.averageCenter=false;this.mapContext=c.mapContext;this.gridSize=c.gridSize||60;this.totalMarkers=0;this.minClusterSize=c.minClusterSize||2;this.id=c.id;this.innerHotelsBounds=new google.maps.LatLngBounds()};Cluster.prototype.addMarker=function(d){var c,g,e,f;this.totalMarkers++;if(!this.center){this.center={b_latitude:d.b_latitude,b_longitude:d.b_longitude};f=new google.maps.LatLng(this.center.b_latitude,this.center.b_longitude);this.bounds=new google.maps.LatLngBounds();this.bounds.extend(f);this.calculateBounds()}else{if(this.averageCenter){c=this.totalMarkers;g=(this.center.b_latitude*(c-1)+d.b_latitude)/c;e=(this.center.b_longitude*(c-1)+d.b_longitude)/c;this.center={b_latitude:g,b_longitude:e};this.bounds=new google.maps.LatLngBounds(new google.maps.LatLng(g,e));this.calculateBounds(new google.maps.LatLng(this.center.b_latitude,this.center.b_longitude))}}this.innerHotelsBounds.extend(new google.maps.LatLng(d.b_latitude,d.b_longitude));d.clusterId=this.id};Cluster.prototype.calculateBounds=function(){var f=this.mapContext.map_overlay.getProjection(),c=this.bounds.getNorthEast(),l=this.bounds.getSouthWest(),k,g,j,h,e,d;k=f.fromLatLngToDivPixel(c);k.x+=this.gridSize;k.y-=this.gridSize;g=f.fromLatLngToDivPixel(l);g.x-=this.gridSize;g.y+=this.gridSize;c=f.fromDivPixelToLatLng(k);l=f.fromDivPixelToLatLng(g);this.bounds.extend(c);this.bounds.extend(l)};Cluster.prototype.isMarkerInClusterBounds=function(c){return(this.bounds?this.bounds.contains(new google.maps.LatLng(c.b_latitude,c.b_longitude)):false)}};if(booking.env.enable_scripts_tracking){booking.env.scripts_tracking.maps.run=true}(function(e,f){e.ui=e.ui||{};if(e.ui.version){return}e.extend(e.ui,{version:"1.8.6",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});e.fn.extend({_focus:e.fn.focus,focus:function(g,c){return typeof g==="number"?this.each(function(){var h=this;setTimeout(function(){e(h).focus();if(c){c.call(h)}},g)}):this._focus.apply(this,arguments)},scrollParent:function(){var c;if((e.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){c=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(e.curCSS(this,"position",1))&&(/(auto|scroll)/).test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0)}else{c=this.parents().filter(function(){return(/(auto|scroll)/).test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!c.length?e(document):c},zIndex:function(c){if(c!==f){return this.css("zIndex",c)}if(this.length){var j=e(this[0]),k,h;while(j.length&&j[0]!==document){k=j.css("position");if(k==="absolute"||k==="relative"||k==="fixed"){h=parseInt(j.css("zIndex"),10);if(!isNaN(h)&&h!==0){return h}}j=j.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(c){c.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});e.each(["Width","Height"],function(m,o){var n=o==="Width"?["Left","Right"]:["Top","Bottom"],l=o.toLowerCase(),c={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};function k(h,j,q,g){e.each(n,function(){j-=parseFloat(e.curCSS(h,"padding"+this,true))||0;if(q){j-=parseFloat(e.curCSS(h,"border"+this+"Width",true))||0}if(g){j-=parseFloat(e.curCSS(h,"margin"+this,true))||0}});return j}if(e().jquery.replace(/\./g,"")>170){return}e.fn["inner"+o]=function(g){if(g===f){return c["inner"+o].call(this)}return this.each(function(){e(this).css(l,k(this,g)+"px")})};e.fn["outer"+o]=function(h,g){if(typeof h!=="number"){return c["outer"+o].call(this,h)}return this.each(function(){e(this).css(l,k(this,h,true,g)+"px")})}});function d(c){return !e(c).parents().andSelf().filter(function(){return e.curCSS(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}e.extend(e.expr[":"],{data:function(c,g,h){return !!e.data(c,h[3])},focusable:function(l){var c=l.nodeName.toLowerCase(),n=e.attr(l,"tabindex");if("area"===c){var j=l.parentNode,k=j.name,m;if(!l.href||!k||j.nodeName.toLowerCase()!=="map"){return false}m=e("img[usemap=#"+k+"]")[0];return !!m&&d(m)}return(/input|select|textarea|button|object/.test(c)?!l.disabled:"a"==c?l.href||!isNaN(n):!isNaN(n))&&d(l)},tabbable:function(c){var g=e.attr(c,"tabindex");return(isNaN(g)||g>=0)&&e(c).is(":focusable")}});e(function(){var g=document.body,c=g.appendChild(c=document.createElement("div"));e.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});e.support.minHeight=c.offsetHeight===100;e.support.selectstart="onselectstart" in c;g.removeChild(c).style.display="none"});if(!e.curCSS){e.curCSS=e.css}e.extend(e.ui,{plugin:{add:function(l,k,c){var j=e.ui[l].prototype;for(var m in c){j.plugins[m]=j.plugins[m]||[];j.plugins[m].push([k,c[m]])}},call:function(m,k,l){var c=m.plugins[k];if(!c||!m.element[0].parentNode){return}for(var j=0;j<c.length;j++){if(m.options[c[j][0]]){c[j][1].apply(m.element,l)}}}},contains:function(c,g){return document.compareDocumentPosition?c.compareDocumentPosition(g)&16:c!==g&&c.contains(g)},hasScroll:function(c,j){if(e(c).css("overflow")==="hidden"){return false}var k=(j&&j==="left")?"scrollLeft":"scrollTop",h=false;if(c[k]>0){return true}c[k]=1;h=(c[k]>0);c[k]=0;return h},isOverAxis:function(g,h,c){return(g>h)&&(g<(h+c))},isOver:function(c,m,j,k,n,l){return e.ui.isOverAxis(c,j,n)&&e.ui.isOverAxis(m,k,l)}})})(jQuery);(function(e,g){if(e.cleanData){var h=e.cleanData;e.cleanData=function(j){for(var d=0,c;(c=j[d])!=null;d++){e(c).triggerHandler("remove")}h(j)}}else{var f=e.fn.remove;e.fn.remove=function(d,c){return this.each(function(){if(!c){if(!d||e.filter(d,[this]).length){e("*",this).add([this]).each(function(){e(this).triggerHandler("remove")})}}return f.call(e(this),d,c)})}}e.widget=function(m,k,n){var l=m.split(".")[0],c;m=m.split(".")[1];c=l+"-"+m;if(!n){n=k;k=e.Widget}e.expr[":"][c]=function(j){return !!e.data(j,m)};e[l]=e[l]||{};e[l][m]=function(o,j){if(arguments.length){this._createWidget(o,j)}};var d=new k();d.options=e.extend(true,{},d.options);e[l][m].prototype=e.extend(true,d,{namespace:l,widgetName:m,widgetEventPrefix:e[l][m].prototype.widgetEventPrefix||m,widgetBaseClass:c},n);e.widget.bridge(m,e[l][m])};e.widget.bridge=function(c,d){e.fn[c]=function(l){var n=typeof l==="string",m=Array.prototype.slice.call(arguments,1),k=this;l=!n&&m.length?e.extend.apply(null,[true,l].concat(m)):l;if(n&&l.charAt(0)==="_"){return k}if(n){this.each(function(){var o=e.data(this,c),j=o&&e.isFunction(o[l])?o[l].apply(o,m):o;if(j!==o&&j!==g){k=j;return false}})}else{this.each(function(){var j=e.data(this,c);if(j){j.option(l||{})._init()}else{e.data(this,c,new d(l,this))}})}return k}};e.Widget=function(d,c){if(arguments.length){this._createWidget(d,c)}};e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(d,c){e.data(c,this.widgetName,this);this.element=e(c);this.options=e.extend(true,{},this.options,this._getCreateOptions(),d);var j=this;this.element.bind("remove."+this.widgetName,function(){j.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(d,c){var j=d;if(arguments.length===0){return e.extend({},this.options)}if(typeof d==="string"){if(c===g){return this.options[d]}j={};j[d]=c}this._setOptions(j);return this},_setOptions:function(c){var d=this;e.each(c,function(k,j){d._setOption(k,j)});return this},_setOption:function(d,c){this.options[d]=c;if(d==="disabled"){this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(n,m,l){var c=this.options[n];m=e.Event(m);m.type=(n===this.widgetEventPrefix?n:this.widgetEventPrefix+n).toLowerCase();l=l||{};if(m.originalEvent){for(var o=e.event.props.length,d;o;){d=e.event.props[--o];m[d]=m.originalEvent[d]}}this.element.trigger(m,l);return !(e.isFunction(c)&&c.call(this.element[0],m,l)===false||m.isDefaultPrevented())}}})(jQuery);(function(l,k){l.ui=l.ui||{};var n=/left|center|right/,m=/top|center|bottom/,j="center",h=l.fn.position,o=l.fn.offset;l.fn.position=function(g){if(!g||!g.of){return h.apply(this,arguments)}g=l.extend({},g);var c=l(g.of),d=c[0],t=(g.collision||"flip").split(" "),u=g.offset?g.offset.split(" "):[0,0],e,q,f;if(d.nodeType===9){e=c.width();q=c.height();f={top:0,left:0}}else{if(d.setTimeout){e=c.width();q=c.height();f={top:c.scrollTop(),left:c.scrollLeft()}}else{if(d.preventDefault){g.at="left top";e=q=0;f={top:g.of.pageY,left:g.of.pageX}}else{e=c.outerWidth();q=c.outerHeight();f=c.offset()}}}l.each(["my","at"],function(){var v=(g[this]||"").split(" ");if(v.length===1){v=n.test(v[0])?v.concat([j]):m.test(v[0])?[j].concat(v):[j,j]}v[0]=n.test(v[0])?v[0]:j;v[1]=m.test(v[1])?v[1]:j;g[this]=v});if(t.length===1){t[1]=t[0]}u[0]=parseInt(u[0],10)||0;if(u.length===1){u[1]=u[0]}u[1]=parseInt(u[1],10)||0;if(g.at[0]==="right"){f.left+=e}else{if(g.at[0]===j){f.left+=e/2}}if(g.at[1]==="bottom"){f.top+=q}else{if(g.at[1]===j){f.top+=q/2}}f.left+=u[0];f.top+=u[1];return this.each(function(){var G=l(this),E=G.outerWidth(),y=G.outerHeight(),F=parseInt(l.curCSS(this,"marginLeft",true))||0,z=parseInt(l.curCSS(this,"marginTop",true))||0,C=E+F+parseInt(l.curCSS(this,"marginRight",true))||0,B=y+z+parseInt(l.curCSS(this,"marginBottom",true))||0,D=l.extend({},f),A;if(g.my[0]==="right"){D.left-=E}else{if(g.my[0]===j){D.left-=E/2}}if(g.my[1]==="bottom"){D.top-=y}else{if(g.my[1]===j){D.top-=y/2}}D.left=parseInt(D.left);D.top=parseInt(D.top);A={left:D.left-F,top:D.top-z};l.each(["left","top"],function(v,w){if(l.ui.position[t[v]]){l.ui.position[t[v]][w](D,{targetWidth:e,targetHeight:q,elemWidth:E,elemHeight:y,collisionPosition:A,collisionWidth:C,collisionHeight:B,offset:u,my:g.my,at:g.at})}});if(l.fn.bgiframe){G.bgiframe()}G.offset(l.extend(D,{using:g.using}))})};l.ui.position={fit:{left:function(f,e){var c=l(window),d=e.collisionPosition.left+e.collisionWidth-c.width()-c.scrollLeft();f.left=d>0?f.left-d:Math.max(f.left-e.collisionPosition.left,f.left)},top:function(f,e){var c=l(window),d=e.collisionPosition.top+e.collisionHeight-c.height()-c.scrollTop();f.top=d>0?f.top-d:Math.max(f.top-e.collisionPosition.top,f.top)}},flip:{left:function(g,e){if(e.at[0]===j){return}var c=l(window),d=e.collisionPosition.left+e.collisionWidth-c.width()-c.scrollLeft(),q=e.my[0]==="left"?-e.elemWidth:e.my[0]==="right"?e.elemWidth:0,f=e.at[0]==="left"?e.targetWidth:-e.targetWidth,t=-2*e.offset[0];g.left+=e.collisionPosition.left<0?q+f+t:d>0?q+f+t:0},top:function(g,e){if(e.at[1]===j){return}var c=l(window),d=e.collisionPosition.top+e.collisionHeight-c.height()-c.scrollTop(),q=e.my[1]==="top"?-e.elemHeight:e.my[1]==="bottom"?e.elemHeight:0,f=e.at[1]==="top"?e.targetHeight:-e.targetHeight,t=-2*e.offset[1];g.top+=e.collisionPosition.top<0?q+f+t:d>0?q+f+t:0}}};if(!l.offset.setOffset){l.offset.setOffset=function(d,g){if(/static/.test(l.curCSS(d,"position"))){d.style.position="relative"}var e=l(d),t=e.offset(),q=parseInt(l.curCSS(d,"top",true),10)||0,c=parseInt(l.curCSS(d,"left",true),10)||0,f={top:(g.top-t.top)+q,left:(g.left-t.left)+c};if("using" in g){g.using.call(d,f)}else{e.css(f)}};l.fn.offset=function(d){var c=this[0];if(!c||!c.ownerDocument){return null}if(d){return this.each(function(){l.offset.setOffset(this,d)})}return o.call(this)}}}(jQuery));(function(d,f){if(booking.env.b_site_experiment_omni_search){var e={appendTo:"#frm .where .field",position:{my:"left top",at:"left bottom",collision:"none",offset:"0 -5"},delay:300,minLength:1,source:null}}else{var e={appendTo:"body",delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null}}d.widget("ui.autocomplete",{options:e,_create:function(){var h=this,c=this.element[0].ownerDocument,g;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(k){if(h.options.disabled||h.element.attr("readonly")){return}g=false;var j=d.ui.keyCode;switch(k.keyCode){case j.PAGE_UP:h._move("previousPage",k);break;case j.PAGE_DOWN:h._move("nextPage",k);break;case j.UP:h._move("previous",k);k.preventDefault();break;case j.DOWN:h._move("next",k);k.preventDefault();break;case j.ENTER:case j.NUMPAD_ENTER:if(h.menu.active){g=true;k.preventDefault()}else{h.close(k);if(h.xhr){h.xhr.abort()}break}case j.TAB:if(!h.menu.active){return}h.menu.select(k);break;case j.ESCAPE:h.element.val(h.term);booking.env.autocompleteESC=true;h.close(k);break;default:if(booking.env.b_site_experiment_omni_search&&h.element.val().length>3){d(".where").removeClass("has_omni_error");d(".where .omni_error").remove()}if(k.keyCode==j.BACKSPACE&&h.element.val().length<=h.options.minLength){if(h.xhr){h.xhr.abort()}}clearTimeout(h.searching);h.searching=setTimeout(function(){if(h.term!=h.element.val()){h.selectedItem=null;h.search(null,k)}},h.options.delay);break}}).bind("keypress.autocomplete",function(j){if(g){g=false;j.preventDefault()}}).bind("focus.autocomplete",function(){if(h.options.disabled){return}h.selectedItem=null;h.previous=h.element.val()}).bind("blur.autocomplete",function(j){if(h.options.disabled){return}clearTimeout(h.searching);h.closing=setTimeout(function(){h.close(j);h._change(j)},150)});this._initSource();if(this.options&&this.options.delay){this.options.orig_delay=this.options.delay}this.response=function(){return h._response.apply(h,arguments)};this.menu=d("<ul></ul>").addClass("ui-autocomplete").appendTo(d(this.options.appendTo||"body",c)[0]).mousedown(function(k){var j=h.menu.element[0];if(!d(k.target).closest(".ui-menu-item").length){setTimeout(function(){d(document).one("mousedown",function(l){if(l.target!==h.element[0]&&l.target!==j&&!d.ui.contains(j,l.target)){h.close()}})},1)}setTimeout(function(){clearTimeout(h.closing)},13)}).menu({focus:function(k,j){var l=j.item.data("item.autocomplete");if(false!==h._trigger("focus",k,{item:l})){if(/^key/.test(k.originalEvent.type)){if(l&&l.value){h.element.val(l.value)}}}},selected:function(l,k){if(typeof(k.item)!=="undefined"&&k.item!==null){var m=k.item.data("item.autocomplete");var n=h.previous;if(h.element[0]!==c.activeElement){h.element.focus();h.previous=n;setTimeout(function(){h.previous=n},1)}if(false!==h._trigger("select",l,{item:m})){if(typeof(m)!=="undefined"){h.element.val(m.value)}}h.term=h.element.val();h.close(l);h.selectedItem=m}},blur:function(k,j){if(h.menu.element.is(":visible")&&(h.element.val()!==h.term)){h.element.val(h.term)}}}).zIndex(this.element.zIndex()+2000).css({top:0,left:0}).hide().data("menu");if(d.fn.bgiframe){this.menu.element.bgiframe()}if(booking.env.search_autocomplete_with_search_history){window.showSearchHistory=(function(j){var k=j;return function(){k._suggest({searchHistory:window.booking.env.history_search_string})}})(this)}},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();d.Widget.prototype.destroy.call(this)},_setOption:function(g,c){d.Widget.prototype._setOption.apply(this,arguments);if(g==="source"){this._initSource()}if(g==="appendTo"){this.menu.element.appendTo(d(c||"body",this.element[0].ownerDocument)[0])}},_initSource:function(){var n=this,o={},k,c,m,q,l=true;if(d.isArray(this.options.source)){c=this.options.source;this.source=function(g,h){h(d.ui.autocomplete.filter(c,g.term))}}else{if(typeof this.options.source==="string"){m=this.options.source;this.source=function(h,j){var g=function(t){j(t)};if(n.xhr){n.xhr.abort()}k=m+JSON.stringify(h);if(k in o){g(o[k]);n.xhr=null}else{if(n.options.disable){return}if(booking.env.b_site_experiment_omni_search){h.give_cc1=1;h.show_img=1;h.img_size="64x64";h.name_breakdown=1}n.xhr=d.getJSON(m,h,function(u,v,t){if(typeof u!=="undefined"&&u!==null&&u.shut_up){n.options.disable=true}n.options.delay=n.options.orig_delay;if(t===n.xhr){o[k]=u;g(u)}n.xhr=null});if(booking.env.search_autocomplete_delay_on_failure){n.element.ajaxError(function(){n.options.delay=Math.floor(n.options.delay*=1.5)})}}}}else{this.source=this.options.source}}},search:function(c,g){c=c!=null?c:this.element.val();this.term=this.element.val();if(c.length<this.options.minLength){return this.close(g)}clearTimeout(this.closing);if(this._trigger("search",g)===false){return}return this._search(c)},_search:function(c){this.element.addClass("ui-autocomplete-loading");var g=this.options.extraParams||{};g.dest_type=booking.env.search_autocomplete_params.dest_type;g.term=c;this.source(g,this.response)},_response:function(c){if(c&&c.length){c=this._normalize(c);this._suggest(c);this._trigger("open")}else{if(booking.env.b_site_experiment_search_autocomplete_no_results_msg||(((d.isEmptyObject(c)&&booking.env.b_site_experiment_search_autocomplete_no_results_msg)||!d.isEmptyObject(c))&&booking.env.b_site_experiment_search_autocomplete_partitions)){if(booking.env.search_autocomplete_with_search_history){c.searchHistory=d.ui.autocomplete.filter(booking.env.history_search_string,this.element.val())}this._suggest(c);this._trigger("open")}else{this.close()}}this.element.removeClass("ui-autocomplete-loading")},close:function(c){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this._trigger("close",c);this.menu.element.hide();this.menu.deactivate();if(typeof(c)!=="undefined"&&booking.env.autocompleteESC){c.preventDefault();booking.env.autocompleteESC=false}}},_change:function(c){if(this.previous!==this.element.val()){this._trigger("change",c,{item:this.selectedItem})}},_normalize:function(c){if(c&&c.length&&c[0].label&&c[0].value){return c}return d.map(c,function(g){if(typeof g==="string"){return{label:g,value:g}}return d.extend({label:g.label||g.value,value:g.value||g.label},g)})},_suggest:function(l){var j=this.menu.element.empty().zIndex(this.element.zIndex()+2000),k=d(j),c=booking.env.autocomplete_skip_suggestions,m="";this._renderMenu(j,l);if((l.length===0||(d.isEmptyObject(l)&&booking.env.b_site_experiment_search_autocomplete_partitions))&&booking.env.b_site_experiment_search_autocomplete_no_results_msg){c=booking.env.autocomplete_no_results;m='style="margin: 0;border: none;"'}k.append('<li id="autocomplete_skip" class="ui-menu-item" role="menuitem" '+m+'><a id="autocomplete_skip_a" class="ui-corner-all" tabindex="-1">'+c+"</a></li>");this.menu.deactivate();this.menu.refresh();this.menu.element.show().position(d.extend({of:this.element},this.options.position));if(!l.length&&(booking.env.b_action==="hotel"||booking.env.b_action==="searchresults")&&booking.env.b_site_experiment_search_autocomplete_partitions){k.removeClass("ui-autocomplete").css({width:(booking.env.b_is_ie6||booking.env.b_is_ie7)?"40%":"auto"})}else{this._resizeMenu()}},_resizeMenu:function(){var c=this.menu.element;c.outerWidth(this.element.outerWidth())},_renderMenu:function(u,l){var c=this,j=false;if(booking.env.b_site_experiment_search_autocomplete_partitions&&!booking.env.b_site_experiment_omni_search){var w,y,z,t,x,v=0,A=["city","airport","district","region","country","hotel","landmark","searchHistory"],B=A.length;for(w=0;w<B;w++){x=A[w];if(l[x]){v++;t=c._normalize(l[x]);z=t.length;for(y=0;y<z;y++){if(y===0){t[0].header=x;if(v===1){t[0].first=1}}if(booking.env.user_has_search_history&&x==="searchHistory"&&!j){j=true;u.append('<li class="ui-menu-item" role="menuitem"><strong style="background:#ddd;display:block;font-weight:normal;color:#666;font-size:0.9em;padding:5px;">'+booking.env.search_you_recently_searched+"</strong></li>")}c._renderItem(u,t[y],y)}}}}else{if(booking.env.b_site_experiment_omni_search){d.each(l,function(h,g){c._renderItem(u,g,h)})}else{d.each(l,function(h,g){c._renderItem(u,g)})}}},_renderItem:function(I,C,z){var M=C.label,G="",R="",F="",D="",Q="",A=(booking.env.b_site_experiment_search_autocomplete_partitions===2);if(booking.env.b_site_experiment_omni_search){var c;var N=d('<a href="#"></a>');var M=d('<div class="item"></div>');var B=d('<span class="flag_16"></span>');var H=d('<span class="item_geo"></span>');var P=C.cc1?C.cc1[0]:C.co_code;var Q=d('<span class="item_count"></span>');var O=d('<div class="item_title"></div>');I.parent(".field").addClass("autocomplete_shown");I.addClass("omni_autocomplete");if(C.name){O.text(C.name);M.append(O)}B.addClass("flag_16_"+P);if(C.img_url){var L;if(C.type=="ho"){L=C.img_url.replace("64x64","square60")}else{L=C.img_url}c='<img src="'+L+'" />'}else{if(C.type=="ci"){c='<img src="'+booking.env.icons+'/default_city.jpg" />'}else{if(C.type=="ai"){c='<img src="'+booking.env.icons+'/airport60.gif" />'}else{if(C.type=="la"){c='<img src="'+booking.env.icons+'/landmark60.gif" />'}else{if(C.type=="di"){c='<img src="'+booking.env.icons+'/district60.gif" />'}else{if(C.type=="ho"){c='<img src="'+booking.env.icons+'/hotel60.gif" />'}else{if(C.type=="co"){c='<img src="'+booking.env.icons+'/country60.gif" />'}else{if(C.type=="is"){c='<img src="'+booking.env.icons+'/island60.gif" />'}else{if(C.type=="re"){c='<img src="'+booking.env.icons+'/region60.gif" />'}else{c='<img src="'+booking.env.icons+'/default_city.jpg" />'}}}}}}}}}if(C.region){H.append(C.region+", "+C.country)}else{H.append(C.country)}if(z<2){H.append(" ("+C.dest_type+")");M.append(B).append(H)}else{N.addClass("item_secondary");O.append(" ("+C.dest_type+")");M.append(B)}if(C.hotels){var y=(C.hotels==1?booking.env.autocomplete.hotel:booking.env.autocomplete.hotels);Q.append(C.hotels+" "+y);M.append(Q)}N.append(c).append(M);return d("<li></li>").append(N).data("item.autocomplete",C).appendTo(I)}else{if(booking.env.b_site_experiment_search_autocomplete_partitions){if(booking.env.search_autocomplete_with_search_history){var E=C.header,J="",K="";if(E){if(E=="searchHistory"){if(C.first){F="search_history_start"}if(booking.env.b_lang=="ar"||booking.env.b_lang=="he"){G='<span class="autocomplete_header autocomplete_h_'+C.dest_type+'" style="float:left;position:static;">'+booking.env.autocomplete_search_history_categories[C.dest_type]+"</span>"}else{G='<span class="autocomplete_header autocomplete_h_'+C.dest_type+'" style="float:right;position:static;">'+booking.env.autocomplete_search_history_categories[C.dest_type]+"</span>"}}else{G='<span class="autocomplete_header autocomplete_h_'+C.dest_type+'" >'+booking.env.autocomplete_categories[C.header]+"</span>";R=(C.first)?"":' style="border-top: 1px solid #CCC;"'}}if(A&&E!="searchHistory"){if(C.hotels===0){booking.env.trackExperiment(booking.env.js_experiment_tracking.search_autocomplete_hotels_nearby);Q='<span class="label" style="position: static;color:#888;">&nbsp;('+(booking.env.autocomplete_show_hotels_nearby?booking.env.autocomplete.hotels_nearby:("0 "+booking.env.autocomplete.hotels))+")</span>"}else{Q='<span class="label" style="position: static;color:#888;">&nbsp;('+C.hotels+" "+(C.hotels==1?booking.env.autocomplete.hotel:booking.env.autocomplete.hotels)+")</span>"}}else{if(E=="searchHistory"){if(C.has_dates){J='<span class="ck_i_d">'+C.checkin_day+'</span> <span class="ck_i_m" style="display:none;">'+C.checkin_month_number+"</span>"+C.checkin_month+' <span class="ck_i_y">'+C.checkin_year+'</span> - <span class="ck_o_d">'+C.checkout_day+'</span> <span class="ck_o_m" style="display:none;">'+C.checkout_month_number+"</span> "+C.checkout_month+' <span class="ck_o_y">'+C.checkout_year+"</span>";Q='<span class="label" style="position: static;color:#888;font-size:0.9em;">&nbsp;'+J+"</span>"}K=" search_history_link"}}M=G+"<span>"+M+Q+"</span>";D='class="partition_item'+K+'"'}else{if(C.header){G='<span class="autocomplete_header autocomplete_h_'+C.dest_type+'" >'+booking.env.autocomplete_categories[C.header]+"</span>";R=(C.first)?"":' style="border-top: 1px solid #CCC;"'}if(A){if(C.hotels===0){booking.env.trackExperiment(booking.env.js_experiment_tracking.search_autocomplete_hotels_nearby);Q='<span class="label" style="position: static;color:#888;">&nbsp;('+(booking.env.autocomplete_show_hotels_nearby?booking.env.autocomplete.hotels_nearby:("0 "+booking.env.autocomplete.hotels))+")</span>"}else{Q='<span class="label" style="position: static;color:#888;">&nbsp;('+C.hotels+" "+(C.hotels==1?booking.env.autocomplete.hotel:booking.env.autocomplete.hotels)+")</span>"}}M=G+"<span>"+M+Q+"</span>";D='class="partition_item"'}}else{if(C.hotels>0){M+="<span class='label'><i>&nbsp;</i>"+C.hotels+" "+(C.hotels==1?booking.env.autocomplete.hotel:booking.env.autocomplete.hotels)+"</span>"}else{M+="<span class='label'><i>&nbsp;</i>"+booking.env.autocomplete.hotels_nearby+"</span>"}F=C.dest_type}return d('<li class="'+F+'"'+R+"></li>").data("item.autocomplete",C).append(d("<a "+D+">"+M+"</a>")).appendTo(I)}},_move:function(c,g){if(!this.menu.element.is(":visible")){this.search(null,g);return}if(this.menu.first()&&/^previous/.test(c)||this.menu.last()&&/^next/.test(c)){this.element.val(this.term);this.menu.deactivate();return}this.menu[c](g)},widget:function(){return this.menu.element}});d.extend(d.ui.autocomplete,{escapeRegex:function(c){return c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(c,h){var g=new RegExp(d.ui.autocomplete.escapeRegex(h),"i");return d.grep(c,function(j){return g.test(j.label||j.value||j)})}})}(jQuery));(function(c){c.widget("ui.menu",{_create:function(){var d=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(e){if(!c(e.target).closest(".ui-menu-item a").length){return}e.preventDefault();d.select(e)});this.refresh()},refresh:function(){var e=this;var d=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");d.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(f){e.activate(f,c(this).parent())}).mouseleave(function(){e.deactivate()})},activate:function(j,k){this.deactivate();if(this.hasScroll()){var h=k.offset().top-this.element.offset().top,g=this.element.attr("scrollTop"),l=this.element.height();if(h<0){this.element.attr("scrollTop",g+h)}else{if(h>=l){this.element.attr("scrollTop",g+h-l+k.height())}}}this.active=k.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",j,{item:k})},deactivate:function(){if(!this.active){return}this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null},next:function(d){this.move("next",".ui-menu-item:first",d)},previous:function(d){this.move("prev",".ui-menu-item:last",d)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(g,h,j){if(!this.active){this.activate(j,this.element.children(h));return}var f=this.active[g+"All"](".ui-menu-item").eq(0);if(f.length){this.activate(j,f)}else{this.activate(j,this.element.children(h))}},nextPage:function(h){if(this.hasScroll()){if(!this.active||this.last()){this.activate(h,this.element.children(".ui-menu-item:first"));return}var g=this.active.offset().top,j=this.element.height(),f=this.element.children(".ui-menu-item").filter(function(){var d=c(this).offset().top-g-j+c(this).height();return d<10&&d>-10});if(!f.length){f=this.element.children(".ui-menu-item:last")}this.activate(h,f)}else{this.activate(h,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(g){if(this.hasScroll()){if(!this.active||this.first()){this.activate(g,this.element.children(".ui-menu-item:last"));return}var f=this.active.offset().top,e=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var d=c(this).offset().top-f+e-c(this).height();return d<10&&d>-10});if(!result.length){result=this.element.children(".ui-menu-item:first")}this.activate(g,result)}else{this.activate(g,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(d){this._trigger("selected",d,{item:this.active})}})}(jQuery));booking[sNSExperiments].search_autocomplete={priority:9,cur_ui_item:{},init:function(){var w=this,t=$("#destination"),u=t.closest("form"),k=u.find("fieldset"),o=false,q=false,v=false,m=false,n=function(){if(!booking.env.b_site_experiment_search_autocomplete_no_auto_cal){if(!booking.env.b_site_experiment_omni_search){booking[sNSStartup].calendar.openPopupCalendar($("#homein .calendarLink").get(0))}else{booking[sNSStartup].calendar.openPopupCalendar($(".calendarLink.checkin","#frm").get(0))}}},l=function(){if(booking.env.autocomplete_more_params){booking.env.trackExperiment(booking.env.autocomplete_more_params)}};booking.google.setGACustomVariable({type:"Search",value:"Neither"});$("#destination").keydown(function(c){if(c.keyCode!=13){w.cur_ui_item={}}});t.autocomplete({source:"/autocomplete",extraParams:booking.env.search_autocomplete_params,minLength:2,delay:booking.env.search_autocomplete_delay||200,max:10}).bind("autocompleteselect",function(d,c){if(c.item){m=true;w.cur_ui_item=c.item;if(typeof _gaq!="undefined"){booking.google.trackEvent("Click","Autocomplete",document.body.id)}if(!$("#availcheck").attr("checked")&&(parseInt($("#checkin_day").val(),10)===0&&parseInt($("#checkout_monthday").val(),10)===0)){setTimeout(function(){if(booking.env.search_autocomplete_with_search_history_clicked){booking.env.search_autocomplete_with_search_history_clicked=false;return}n()},25)}}}).bind("autocompleteopen",function(d,c){if($("#calendar_popup").length){booking[sNSStartup].calendar.closePopupCalendar()}if(o===false&&typeof _gaq!="undefined"){o=true;booking.google.trackEvent("View","Autocomplete",document.body.id)}});t.bind("focus",function(d,c){if(booking.env.search_autocomplete_with_search_history){showSearchHistory();$("#autocomplete_skip_a").hide()}if(booking.env.user_has_search_history){booking.env.trackExperiment(booking.env.js_experiment_tracking.search_autocomplete_with_search_history)}return false});if(booking.env.search_autocomplete_with_search_history){$(".search_history_link").live("click",function(c){if(!booking.env.user_has_dates){$sel_link=$(this);var d=$sel_link.find(".ck_i_y").text()+"-"+$sel_link.find(".ck_i_m").text(),e=$sel_link.find(".ck_o_y").text()+"-"+$sel_link.find(".ck_o_m").text();if(e&&d){booking.env.search_autocomplete_with_search_history_clicked=true}$("#checkin_year_month").val(d);$("#checkout_year_month").val(e);$("#checkin_day").val($sel_link.find(".ck_i_d").text());$("#checkout_monthday").val($sel_link.find(".ck_o_d").text())}booking.google.trackEvent(booking.google.clickTracker,"Search history in autocomplete","Click on history")})}$("#autocomplete_skip").live("click",function(){var f=$(this),d=(!booking.env.user_has_dates&&!$("#availcheck").attr("checked")&&(parseInt($("#checkin_day").val(),10)===0&&parseInt($("#checkout_monthday").val(),10)===0));t.autocomplete("close");w.cur_ui_item={};if(booking.env.b_site_experiment_search_autocomplete_no_results_msg){var e=$(".bigbluebutton",u);if(!d){var g=true,c=function(){e.animate({"background-color":"#003580"},function(){e.animate({"background-color":"#0896FF"});if(g){g=false;c()}})};c()}}else{if(typeof _gaq!="undefined"){booking.google.trackEvent("Click","Autocomplete Skip"+(booking.env.b_site_experiment_search_autocomplete_skip_copy?" v"+booking.env.b_site_experiment_search_autocomplete_skip_copy:""),document.body.id)}}if(d){n()}});u.bind("submit",function(d,c){var e=$("#destination");if(w.cur_ui_item.dest_type){u.find("input[name='dest_type'], input[name='dest_id'], input[name='ac_pageview_id']").remove();u.append($("<input>",{type:"hidden",name:"dest_type",value:w.cur_ui_item.dest_type}));u.append($("<input>",{type:"hidden",name:"dest_id",value:w.cur_ui_item.dest_id}));u.append($("<input>",{type:"hidden",name:"ac_pageview_id",value:booking.env.pageview_id}));booking.google.setGACustomVariable({type:"Search",value:"Autocomplete"})}else{if((e.val()==booking.env.sess_dest_fullname)&&booking.env.sess_dest_id&&booking.env.sess_dest_type&&booking.env.normalize_sbox_value){u.find("input[name='dest_type'], input[name='dest_id'], input[name='ac_pageview_id']").remove();u.append($("<input>",{type:"hidden",name:"dest_type",value:booking.env.sess_dest_type}));u.append($("<input>",{type:"hidden",name:"dest_id",value:booking.env.sess_dest_id}));u.append($("<input>",{type:"hidden",name:"ac_pageview_id",value:booking.env.pageview_id}))}else{booking.google.setGACustomVariable({type:"Search",value:"Normal"})}}});return true}};